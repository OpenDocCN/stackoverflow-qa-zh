# StackOverflow 问答 11562000-11562999

# javascript - 在父类 div 中触发不正确的 jQuery 函数

> ID：11562001
> 
> 赞同：0
> 
> 时间：2012-07-19T13:31:23.650
> 
> 标签：javascript, jquery, asp.net-mvc

**已解决**- 请参阅下面的答案

* * *

我有一个要显示列表的页面`parentCategories`。当用户选择一个`parentCategory`列表时`categories`出现（或子类别）。然后，我希望用户能够单击 a`category`并显示一个列表`products`。

我已经使用[此处](https://stackoverflow.com/questions/11541496/jquery-referencing-a-div-generated-with-a-partial-view-to-append-another-partial)`category`讨论的内容在其自己的页面上制作了该`products`功能。

我还可以制作一个`parentCategories`可点击列表以显示`categories`（或子类别）列表。

当我试图让列表`products`出现在列表出现之后时，问题`categories`就出现了。

我正在尝试使用以下代码：

```
<script type="text/javascript">
    $(document).ready(function () {

        function getCategories(e) {
            e.preventDefault();
            e.stopPropagation();
            var $parentCategory = $(this).closest(".parentCategory");
            var parentCategoryName = $parentCategory.attr("id");
            $('.divResult', $parentCategory).load("@Url.Action("CategoryList", "Product")", {
                parentCategory: parentCategoryName
            });
        }

        $(".parentCategory").on("click", "a", getCategories);

        function getProducts(f) {
            f.preventDefault();
            f.stopPropagation();
            var $category = $(this).closest(".category");
            var categoryName = $category.attr("id");
            $('.divResult', $category).load("@Url.Action("ProductList", "Product")", {
                category: categoryName
            });
        }

        $(".category").on("click", "a", getProducts);
    });
</script> 
```

我知道它几乎以相同的方式重复自己，但我试图在我清理它之前让它工作。我认为它应该工作的方式是当用户单击`parentCategory`链接时，它位于 div 类中，`parentCategory`因此函数`getCategories`会触发。这会在`parentCategory`包含类的 div 的父 div 中生成一些 div `category`- 我认为因为我使用：

```
$(function() {
    $(".category").on("click", "a", getProducts);
}); 
```

当我单击`category`该函数的 div 内的链接时，`getProducts`应该会触发，但不会触发。而是`getCategories`再次触发（我可以说是因为触发`Debug.Write()`的动作中的一个`getCategories`。

`categories`出现后`parentCategories`，我的页面形状如下：

```
<div class="parentCategory" id="1">
. . .
    <div class="result">
        <div class="category" id="1">
        . . . 
            <div class="result">
                *This is where Products would be listed
            </div>
        </div>
        <div class="category" id="2">
        . . .
            <div class="result">
                *This is where Products would be listed
            </div>
        </div>
    </div>
. . .
</div>
<div class="parentCategory" id="2">
. . .
    <div class="result">
    . . .
    </div>
</div> 
```

**我需要做什么才能在单击`category`类 div中的链接时`getProducts`激活我的功能而不是`getCategories`？**

**更新**

我已经用`category`div 之外的`parentCategory`div 测试了我的代码，一切都按预期工作。问题似乎完全在于我的`category`div 位于`parentCategory`div 内，并且：

```
$(".parentCategory").on("click", "a", getCategories); 
```

似乎覆盖了以下用途：

```
$(".category").on("click", "a", getProducts); 
```

我显然需要重组一些东西——我只是不知道是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:26:42.637

最简单的方法是将我的 click() 函数从：

```
$(".parentCategory").on("click", "a", getCategories);

$(".category").on("click", "a", getProducts); 
```

至：

```
$(document).on("click",".parentCategory", getCategories);

$(document).on("click", ".category", getProducts); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T15:44:17.497

你可以试试这个：

```
$(document).ready(function () {

    function getCategories(e) {
        //........
    }

    function getProducts(f) {
        //........
    }

    $(".parentCategory").on("click", "a", function(e){ 
         //Checking whether "a" is outside of ".category" element
         if( $(this).closest(".category").length===0 ){
             getCategories.call(this,e);
         }else{
             getProducts.call(this,e);
         }
    });
}); 
```

# asp.net - 如何在超链接上添加文本，同时保持文本区域的“可点击性”？

> ID：11562005
> 
> 赞同：0
> 
> 时间：2012-07-19T13:31:33.440
> 
> 标签：asp.net, html, css

我在这样的超链接上有文字：

```
<asp:HyperLink ID="HyperLink1" runat="server" ImageUrl="..." NavigateUrl="..." ></asp:HyperLink>
<div style="position: absolute; top: 50px; left: 300px">MyText</div> 
```

但是用户不能点击文本区域。我知道我可以使文本成为具有相同目标 URL 的新超链接，但有没有更好的方法 - 使文本“对点击透明”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:37:27.630

想到的第一个解决方案是[`pointer-events`](https://developer.mozilla.org/en/CSS/pointer-events/)在文字上使用[**——demo**](http://dabblet.com/gist/3143980)

```
pointer-events: none; 
```

但是，IE 和 Opera 尚不支持此功能（嗯，它支持，但仅适用于 SVG）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:52:40.333

当你有这样的结构时：

```
<a href="">Link</a>
<div>Content</div> 
```

并且希望在`div`不添加额外锚点的情况下也可以点击，您可以使用它：

```
<a href="">
    Link
    <div>
        Content
    </div>
</a> 
```

由于 HTML5 允许在`<a>`-tags 中使用块元素，因此这是完全有效的。

您只需要将它移植到 asp 语句中，因为我从未使用过 asp.net。:)

# ruby-on-rails - In Rails 3, how to redirect straight from the routes while setting cookies

> ID：11562011
> 
> 赞同：4
> 
> 时间：2012-07-19T13:31:41.887
> 
> 标签：ruby-on-rails, redirect, routes, ruby-on-rails-3.2, middleware

I've just come across a situation in the app I'm working in, in which I wrote an action specifically for setting the language cookie and redirect to the last url. Something like this:

```
def language
  cookies[:locale] = {:value => params[:locale], :domain => APP_DOMAIN}
  redirect_to_back
end 
```

Thing is, I'm not very pleased with this. Since the whole purpose of the endpoint is to set a new language for the app on the server side, this super-light logic kind of gets jammed in the whole middleware stack before it actually reaches the controller, which hurts the performance of the workflow. But later, I found out I could redirect straight from the route mapper (http://guides.rubyonrails.org/routing.html#redirection), and thought I had found the solution to all my problems.

```
match "language/:locale" => redirect {|p, req| req.cookies["locale"] = {:value => p[:locale], :domain => APP_DOMAIN} ; req.referrer || '' } 
```

Problem is, Even though I have access to the request, and can therefore insert cookies in it, only the last value of the redirect block will be taken to form the redirection response. Which will not check the request and set its cookies (or whatever more there may be) accordingly. So yeah, the question is, does anybody know a way of influencing the route.rb redirections a bit more than by passing the destination route?

And no, I don't want a client-side solution. I'm fully aware I can also do this with JS, I just wanted a no-JS solution.

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-20T10:50:41.523

```
Movienight::Application.routes.draw do
  match '/movies/search', to: proc { |env|
    [
      302,
      {"Content-Type" => 'text/plain',
       'Location' => 'cosmicvent.com',
       'Set-Cookie' => 'sessionToken=abc123; Expires=Wed, 09 Jun 2021 10:18:14 GMT'},
       ['302 found']
    ]
 }
end 
```

# c++ - C++ 致命错误 C1017

> ID：11562014
> 
> 赞同：1
> 
> 时间：2012-07-19T13:31:54.413
> 
> 标签：c++, c-preprocessor

我得到：

> **致命错误 C1017：无效的整数常量表达式**

使用以下代码：

```
#if V1>0
//do stuff
#endif 
```

V1 在 .cpp 文件的顶部定义如下：

```
#define V3 UINT32
#define V4  sizeof(V3)
#define V1 (V2 % V4) 
```

V2定义如下：

```
const int V2 = 256; 
```

谁能看到我哪里出错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T13:42:05.723

预处理发生在编译之前。这意味着您不能`const int TOTAL = 16;`在预处理期间使用编译时概念（即）。预处理器不知道程序中的变量（甚至`const`）。

正如 Wug 建议的那样，不要使用 a`#define`作为常量，而是更清洁的解决方案是：

```
typedef UINT32 TARGET_TYPE;
const int TARGET_TYPE_SIZE = sizeof(TARGET_TYPE);
const int TOTAL = 16;
const int NUM_BYTES = (TOTAL % TARGET_TYPE_SIZE); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T13:34:06.583

尝试

```
#define V2 256 
```

代替

```
const int V2 = 256; 
```

编辑：您使用预处理器宏而不是常规分支是有充分理由的，对吗？

编辑 2：正如其他人指出的那样，预处理器不接受 sizeof 语句，因为这些语句由编译器处理。您的选择是使用编程 if 语句（与预处理器相反）或使用大小表达式的实际值（这将涉及对大小进行硬编码。但是，由于它是 UINT32，我认为它永远不会是 4 以外的任何东西。

# iphone - My application is performing differenet when it's processing to apple store

> ID：11562016
> 
> 赞同：3
> 
> 时间：2012-07-19T13:32:00.247
> 
> 标签：iphone, ios, ipad, app-store

This is really really a weird case .. I have an application which is works perfectly with my devices , we have tested it many times .. so after apple review and approved it , it has been published on apple store .. I download the version on apple store and its performing different to the one I have on my code .. i will describe it through screen shot , We'v built a custom control with a dragging ball when you drag it a menu with buttons will appear like this pic

![enter image description here](../Images/f4e36003439b7e38d4d5faa70de63537.png)

But the disaster is when I download the app from apple store is performing like this

![enter image description here](../Images/6f476f426bdb9fa9efca7c54b26ccb77.png)

So As you can see the ball is not in the correct position beside that the menu is disappearing some times .. Im really sure that the code I'v upload it to the iTunes is EXACTLY same the one I'm testing on my devices (svn history log also can prove that to me) .. please notice that my app have been approved today I don't know if it has any relation with that problem.

Please I need your help !!

Note : this is happened on both iPhone and iPad and in all iOS versions.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:56:41.360

一个鲜为人知的事实是，您可以在设备上安装 App Store builds ^*。我刚刚在 iOS 5.1 上对此进行了测试，以确保它仍然有效。只需解压缩您上传的 .zip 并将 MyApp.app 拖到 Xcode 管理器中的应用程序列表中。

唯一的要求是您在设备上安装了“匹配”配置文件。我还没有计算出匹配的配置文件，但如果除了配置文件名称^(**)、设备列表和 App Store/Ad Hoc 设置之外的*所有内容*都相同，它应该可以工作。

（大概这旨在让您将设备添加到配置文件并安装应用程序而无需重新构建/重新签名它。App Store 配置文件只是一个没有 UDID 列表的 Ad Hoc 配置文件。）

或者，您可以重新签署构建，`codesign -f --preserve-metadata=identifier,entitlements,resource-rules,requirements`假设配置文件非常相似，以至于它们可以使用相同的权利。

^*`embedded.mobileprovision`文件是“App Store”个人资料的人。
^(**)我通常使用“MyApp AppStore”和“MyApp AdHoc”，但贵公司可能有不同的约定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:07:32.890

正如@Brad Larson 所说：我发现问题是在我将应用程序归档到 xcode 时发生的。我只是再次归档并上传它，现在一切正常，无需更改代码中的任何内容！

# css - Woff open-type fonts not working in local?

> ID：11562018
> 
> 赞同：2
> 
> 时间：2012-07-19T13:32:11.840
> 
> 标签：css, fonts, font-face, webfonts

I have downloaded a .Woff font (Ubuntu), here is the code related to it:

```
 @font-face {
  font-family: 'Ubuntu';
  font-style: normal;
  font-weight: 400;
  src: local('Ubuntu'), url(http://themes.googleusercontent.com/static/fonts/ubuntu/v4/_xyN3apAT_yRRDeqB3sPRg.woff) format('woff');
} 
```

I downloaded it and put it directly into my css folder.

I canged the src value to:

```
src: local('Ubuntu'), url(ubuntu.woff) format('woff'); 
```

(I renamed my font to Ubuntu.woff) But the font is not working with the local URL, I checked the path Chrome gives me(can't find font located at whatever/whatever/css/Ubuntu.woff) and it's the right path. Anyone has an idea why it's not working?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:50:20.290

我能够在 Internet 上找到一些 Woff 到 TTF 转换器，以这种方式解决问题是一个很好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T09:20:59.147

我用另一种 .woff Google 网络字体尝试了同样的事情，但在 Windows 上。显然windows说文件格式无效。

# ios - 使用 [id class] 作为指针

> ID：11562027
> 
> 赞同：0
> 
> 时间：2012-07-19T13:32:39.700
> 
> 标签：ios, class

我可能试图做错事，但这有助于使我的代码简单。

我有一些类，具有相同的功能。为了避免长时间的 if，else if with `isKindOfClass`，我想做这样的事情：

```
[(([myClassVar class] *) myClassVar) myFunction]; 
```

如果`myClassVar`没有 myFunction，它可能会崩溃，但如果我执行 if，else if 方法，它不会崩溃，只是在最后一个 else 情况下写一个错误。

有人知道怎么做吗？

在此先感谢，
达米安

**编辑：**
由 SamFisher 回答，我的代码是：

```
if( [myClassVar respondsToSelector:@selector(myFunction) )
    [myClassVar performSelector:@selector(myFunction)]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:36:44.207

一种更客观的方法是检查实例是否支持选择器。如果是，请致电。

例如，

```
if ( [myClassVar respondsToSelector:@selector(myFunction:)] ) {
    [myClassVar myFunction];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:37:51.087

你为什么不使用 respondsToSelector: 然后 performSelector: ？

# ms-access - How to do a distinct query that returns multiple columns

> ID：11562029
> 
> 赞同：0
> 
> 时间：2012-07-19T13:32:47.907
> 
> 标签：ms-access

I need to create a MS Access query that will return only one instance of a serial number along with a few other columns. For example

```
SerialNumber    CRM        EmailClient   VersionBuild  IPAddress  DateLogged
------------    ----       -----------   ------------  ---------  ----------
123456          Outlook    Outlook       4.7.4         0.0.0.0    20120625
123456          SugarCRM   SMTP          4.6.1         0.0.0.0    20120621
435352          ACT!       Outlook       4.5.2         0.0.0.0    20120619
537352          ACT!       SMTP          4.5.3         0.0.0.0    20120619 
```

The results would be

```
SerialNumber    CRM        EmailClient   VersionBuild  IPAddress  DateLogged
------------    ----       -----------   ------------  ---------  ----------
123456          Outlook    Outlook       4.7.4         0.0.0.0    20120625
435352          ACT!       Outlook       4.5.2         0.0.0.0    20120619
537352          ACT!       SMTP          4.5.3         0.0.0.0    20120619 
```

I was trying to complete this using the following query. I think First and Group by cancel each other out.

```
SELECT FIRST(LogData.SerialNumber), LogData.CRM, LogData.EmailClient, LogData.VersionBuild, LogData.IPAddress, LogData.DateLogged
FROM LogData
GROUP BY  LogData.CRM, LogData.EmailClient, LogData.VersionBuild, LogData.IPAddress, LogData.DateLogged 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:47:42.003

在您提到的评论中 LogData 没有主键。如果您添加自动编号主键，您的问题将变得非常容易解决。

使用子查询为每个组返回一个`id`值，子查询为.`SerialNumber``INNER JOIN``LogData`

```
SELECT base.*
FROM
    LogData AS base
    INNER JOIN (
        SELECT SerialNumber, Min(id) AS which_id
        FROM LogData
        GROUP BY SerialNumber
    ) AS sub
    ON base.id = sub.which_id; 
```

替换`base.*`为要显示的字段列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:39:08.213

这不漂亮但是...

```
SELECT L.SerialNumber, 
            (Select Top 1 A.First from LogData as A where A.SerialNumber = L.SerialNumber Order by A.First, A.Last) AS [First], 
            (Select Top 1 A.Last from LogData as A where A.SerialNumber = L.SerialNumber Order by A.First, A.Last) AS [Last]
FROM LogData AS L
GROUP BY L.SerialNumber; 
```

这基本上是 Thomas 的回答，除了因为您使用的是子查询，您可以指定 order by 以确保您始终获得预期的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T13:38:14.407

我想你想这样做：

*   只得到一个 SerialNumber => GROUP BY SerialNumber
*   为每个 SerialNumber => FIRST(LogData.First) 只获取一个（第一个）名称

```
选择 LogData.SerialNumber，FIRST（LogData.First），FIRST（LogData.Last）
来自日志数据
按 LogData.SerialNumber 分组

```

但请注意：这可能会导致（不是在“FIRST”函数的情况下）混合记录，例如：

```
序号 前 后
------ ----- ----
123456 弗兰克·史密斯

```

顺便说一句：并非所有 SQL 系统都支持“FIRST”-Grouping-Function：http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html [您](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)可以使用另一个满足sql标准的功能...

# c - 发送 802.11 帧的“帧控制字段”数据的顺序？

> ID：11562036
> 
> 赞同：4
> 
> 时间：2012-07-19T13:33:25.770
> 
> 标签：c, libpcap, wifi

下面是 QoS 数据的 FC 字段的位格式：

```
00|01|0001  01000010 
```

前 2 位表示版本，后 2 位表示类型，后 4 位表示子类型，ToDS=0，FromDS=1，保护位=1。

那么，以上数据在空中通过接口发送的顺序是怎样的呢？（即从左到右或从右到左）

我看到wireshark 将数据捕获为“ **8842** ”（在最后一段显示原始数据包数据）。

但是，如果我编写以下代码来打印 FC 字段数据：

```
struct mgmt_header_t {
    u_int16_t    fc;          /* 2 bytes */
    u_int16_t    duration;    /* 2 bytes */
    u_int8_t     addr1[6];    /* 6 bytes */  
    u_int8_t     addr2[6];    /* 6 bytes */  
    u_int8_t     addr3[6];    /* 6 bytes */  
    u_int16_t    seq_ctrl;    /* 2 bytes */
};
void my_callback(u_char *args, const struct pcap_pkthdr *header, const u_char *packet)
{
    int radiotapheader_length = (unsigned short int)(*(packet+2));
    struct mgmt_header_t *mac_header = (struct mgmt_header_t *)  (packet+radiotapheader_length);
    printf("FC = %X\n", mac_header->fc);
} 
```

输出是：

```
FC = 4288 
```

所以我的第二个问题是，它不应该打印**8842**而不是**4288**吗？

**更新：** 我正在更新问题，以便更清楚我的疑问是什么。

比如说，我想发送一个 QoS 数据包，其 FC 字段格式如下：

```
00|01|0001  01000010 
```

所以，我应该写：

```
mac_header->fc = 0x1142 /* value if read from left to right */ 
```

或者

```
mac_header->fc = 0x4211 
```

或者

```
mac_header->fc = 0x4288 /* value if read from right to left */ 
```

或者

```
mac_header->fc = 0x8842 
```

我的是一个小端机器。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T18:31:36.860

IEEE 802.11 标准（遗憾的是，目前无法从[IEEE Get 程序中获得](http://standards.ieee.org/about/get/index.html)）说：

> MAC 子层中的 MPDU 或帧被描述为按特定顺序排列的字段序列。第 7 章中的每个图描述了出现在 MAC 帧中的字段/子字段，并按照它们从左到右传递到物理层会聚过程 (PLCP) 的顺序。
> 
> 在图中，字段内的所有位都被编号，从 0 到 k，其中字段的长度为 k + 1 位。字段内的八位字节边界可以通过取字段的位数模 8 来获得。数字字段中长于单个八位字节的八位字节按重要性的递增顺序描述，从最低编号位到最高编号位。长于单个八位字节的字段中的八位字节按从包含最低编号位的八位位组到包含最高编号位的八位位组的顺序发送到 PLCP。

所以发送到PLCP 的帧控制字段的第一个八位字节是包含B0 的字节，即包含协议版本、类型和子类型字段的八位字节。之后是包含 To DS、From DS、More Frag 等的八位字节。因此`00|01|0001`，八位字节是传输的第一个八位字节。这在内存中的一个字节中变成了 10001000，从高位到低位，而不是从低位到高位，因此是 0x88。下一个八位字节是`01000010`一个，因此是 0x42。

因此，它通过线路，`00010001`然后是`01000010`，并且会在内存中显示为 0x88，然后是 0x42。（顺便说一下，这意味着 FC 字段与 802.11 中的所有其他多字节整数字段一样，以*小端*字节顺序传输，而不是*大端*字节顺序。“网络字节顺序”是大端endian 字节顺序；并非所有通过网络传输的数据都采用“网络字节顺序”——IPv4、IPv6、TCP 和 UDP 等 Internet 协议标准中的字段采用“网络字节顺序”，但其他协议，包括一些IP 是传输的，有些是通过 TCP 或 UDP 传输的，可能使用 little-endian 字节顺序。）

由 little-endian 机器接收，并被视为 16 位整数，即 0x4288 - 在 little-endian 机器上，具有多个八位字节的整数，内存中的第一个八位字节是低位八位字节的数量。因此，您的代码在 little-endian 机器上将其打印为 0x4288；如果它在大端机器上运行，它将打印为 0x8842。

将其打印为 0x4288 是“正确”的打印方式，因为它是“在线”（或者，更确切地说，“在线”，因为这是 802.11 :-)）的小端序。Wireshark 在“数据包详细信息”窗格（默认情况下，中间窗格）中将数据包的帧控制字段显示为 0x4288；它在“十六进制转储”窗格（默认情况下，底部窗格）中显示为 88 42，因为它只是按照它们在内存中出现的顺序显示每个单独的八位字节。

如果您希望它在 big-endian 和 little-endian 机器上打印为 0x4288，则需要将其从 little-endian 字节顺序转换为主机字节顺序。最简单的方法是使用诸如`pletohs()`Wireshark 中的宏之类的东西：

```
#define pletohs(p) ((unsigned short)                       \
                    ((unsigned short)*((const unsigned char *)(p)+1)<<8|  \
                     (unsigned short)*((const unsigned char *)(p)+0)<<0)) 
```

并做一些事情，例如

```
printf("FC = %X\n", pletohs(&mac_header->fc)); 
```

至于*传输该值，无论您的机器的字节顺序如何**，*最简单的方法是使用诸如`phtoles()`来自 Wireshark 的宏之类的东西：

```
#define phtoles(p, v) \
    {                 \
        (p)[0] = (unsigned char)((v) >> 0);    \
        (p)[1] = (unsigned char)((v) >> 8);    \
    } 
```

做

```
pletohs(&mac_header->fc, 0x4288); 
```

设置`mac_header->fc`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:07:04.613

这是一个字节排序错误。`(unsigned short int)(*(packet+2))`除非您知道您的平台与数据包的内容具有相同的字节顺序，否则您不能这样做。在您的情况下，它们不同，这就是您看到字节交换位置的原因。

有关字节顺序或也称为字节序的更多信息，请参阅[此 Wikipedia 文章。](http://en.wikipedia.org/wiki/Endianness)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T14:20:40.840

FC 打印为`4288`因为您的系统使用 little-endian 格式将数据存储在内存中。网络通信遵循大端格式。

确保使用以下程序

```
#include <stdio.h>
int main()
{

int a = 0x12345678, j = 0;
char *b =(char*)&a;
printf("\n0x");
for(j=0; j < sizeof(int); j++)
        printf("%x", *b++);

printf("\n");

return 0;
} 
```

如果它打印 0x78563412 那么你的机器是小端的。否则如果它打印 0x12345678 那么它是大端的。

编辑：
我希望以下链接会有所帮助。

[1\. http://www.cs.odu.edu/~cs476/fall03/lectures/sockets.htm](http://www.cs.odu.edu/~cs476/fall03/lectures/sockets.htm)
[2.http://www.ccplusplus.com/2011/10/htons-example-in-c.html](http://www.ccplusplus.com/2011/10/htons-example-in-c.html)

# f# - F# 中的函数模板

> ID：11562037
> 
> 赞同：3
> 
> 时间：2012-07-19T13:33:30.543
> 
> 标签：f#, inline

假设我正在解决一个特定问题并想出一个函数

```
let function parameter1 ... = 
     a lot of adding, multiplying & so on with a lot of 
     literals all over the place 
```

现在，如果我的参数是 int 类型，这个函数就可以正常工作了。但在某个地方，我需要将它增加到 11，我需要额外推动 int64 甚至 BigInteger。那我该怎么办？我复制并粘贴函数，更改名称，然后寻找所有使编译器认为函数应该在 int 上运行的文字外观。这很糟糕。

有没有办法做到这一点：

```
let greatFunction param1 param2 = (param1+1)/(param2*2) 
```

其中 param1 和 param2 可以是整数类型的任何组合？

编辑：

通过下面的 kvb 扩展了一个很棒的技巧，我想出了以下内容

```
module NumericLiteralG 

  let inline FromZero() = LanguagePrimitives.GenericZero
  let inline FromOne() = LanguagePrimitives.GenericOne
  let inline FromInt32 n =
    let rec loop nIn nOut = 
        if nIn>0 then loop (nIn - 1) (nOut + LanguagePrimitives.GenericOne)
        else nOut
    loop n LanguagePrimitives.GenericZero 
```

所以使用时会变得不那么难看

```
let inline halfSquare num =
   let res = num / 2G
   res * res

let solve1 = halfSquare 5I 
let solve2 = halfSquare 5.0
let solve3 = halfSquare 5uy 
```

现在的问题是我应该使用这个吗？如果不是，为什么不呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T18:46:35.987

我认为通用算术是 .NET 语言中的常见问题。有很多文章解释了不同的方法，很快我将发布另一篇解释我的文章，它与您发布的解决方案相似。

现在，如果你问我是否应该使用它，我会说：只要你明白你在做什么，为什么不呢？我在生产中部分使用它并且完全没有问题，但是因为我关心运行时性能，所以我使用重载在编译时解决所有问题。然后为了加快编译时间，我重新定义了基本的数学运算符以在相同的类型中运行，否则类型签名会变得非常复杂并且可能需要很长时间才能编译。

还有更多需要考虑的事情，但对于您的具体问题，这里有一个示例代码：

```
open System.Numerics

type FromInt = FromInt with
    static member ($) (FromInt, _:sbyte     ) = fun (x:int) -> sbyte      x
    static member ($) (FromInt, _:int16     ) = fun (x:int) -> int16      x
    static member ($) (FromInt, _:int32     ) = id
    static member ($) (FromInt, _:float     ) = fun (x:int) -> float      x
    static member ($) (FromInt, _:float32   ) = fun (x:int) -> float32    x
    static member ($) (FromInt, _:int64     ) = fun (x:int) -> int64      x
    static member ($) (FromInt, _:nativeint ) = fun (x:int) -> nativeint  x
    static member ($) (FromInt, _:byte      ) = fun (x:int) -> byte       x
    static member ($) (FromInt, _:uint16    ) = fun (x:int) -> uint16     x
    static member ($) (FromInt, _:char      ) = fun (x:int) -> char       x
    static member ($) (FromInt, _:uint32    ) = fun (x:int) -> uint32     x
    static member ($) (FromInt, _:uint64    ) = fun (x:int) -> uint64     x
    static member ($) (FromInt, _:unativeint) = fun (x:int) -> unativeint x
    static member ($) (FromInt, _:bigint    ) = fun (x:int) -> bigint     x
    static member ($) (FromInt, _:decimal   ) = fun (x:int) -> decimal    x
    static member ($) (FromInt, _:Complex   ) = fun (x:int) -> Complex(float x,0.0)  

let inline fromInt (a:int) : ^t = (FromInt  $  Unchecked.defaultof< ^t>) a

module NumericLiteralG =
    let inline FromZero() =LanguagePrimitives.GenericZero
    let inline FromOne() = LanguagePrimitives.GenericOne
    let inline FromInt32 (i:int)     = fromInt i

// This will reduce the number of types inferred, will reduce compile time too.
let inline (+) (a:^t) (b:^t) : ^t = a + b
let inline (-) (a:^t) (b:^t) : ^t = a - b
let inline (*) (a:^t) (b:^t) : ^t = a * b
let inline (/) (a:^t) (b:^t) : ^t = a / b
let inline (~-) (a:^t) : ^t = -a

let inline halfSquare num =
   let res = num / 2G
   res * res

let solve1 = halfSquare 5I 
let solve2 = halfSquare 5.0
let solve3 = halfSquare 5uy 

// Define more generic math functions. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T13:57:45.943

这[是一篇关于 F# 中的通用数值计算的文章](http://tomasp.net/blog/fsharp-generic-numeric.aspx)。一般来说，您有两种选择：

*   静态成员约束
*   全局数字关联（在 F# PowerPack 中可用）

...或者您可以结合这些技术。

在您的情况下，听起来静态约束会起作用。

那篇文章中的一个简单示例：

```
let inline halfSquare num =
   let res = LanguagePrimitives.DivideByInt num 2
   res * res 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-19T13:59:38.780

一种方法是结合[LanguagePrimitives](http://msdn.microsoft.com/en-us/library/ee340276.aspx)模块中的`inline`关键字和通用位：

```
let inline greatFunction param1 param2 = 
    let one = LanguagePrimitives.GenericOne
    let two = one + one
    (param1+one)/(param2*two)

// Usage
let f1 = greatFunction 4 2
let f2 = greatFunction 4L 2L
let f3 = greatFunction 4I 2I 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T17:28:09.953

虽然不理想，并且有点绕过您的主要问题，但您可以添加类型注释以强制编译器处理：

```
let greatFunction (param1:int64) (param2:int64) : int64 = (param1+1)/(param2*2) 
```

现在当然 F# 中没有隐式转换，因此您需要添加`L`到所有数字文字，但它们至少会显示为编译器错误。

# c# - Achieving consistent sorting between c# and SQL using CollationInfo.Comparer

> ID：11562042
> 
> 赞同：3
> 
> 时间：2012-07-19T13:33:40.070
> 
> 标签：c#, sql-server, sorting, collation, smo

I am attempting to use CollationInfo.Comparer from SMO to get my c# code to sort like SQL Server. I have gotten the correct collation, but my items still do not sort correctly.

```
var collationInfo = CollationInfo.Collations.Single(x => x.Name == "SQL_Latin1_General_CP1_CS_AS") as CollationInfo;
var comparer = collationInfo.Comparer;

int c = comparer.Compare("Tri-Valley L", "Trimble L"); 
```

In this case c returns '1' indicating that Tri-Valley L will come after Trimble.

However this code in SQL Server

```
DECLARE @T TABLE
(
    Name VARCHAR(20)
)

INSERT INTO @T
(
    Name
)
VALUES('Tri-Valley L'),
    ('Trimble L')

SELECT
Name
FROM
@T
ORDER BY Name 
```

Returns Tri-Valley before Trimble.

Does the collation compare stuff just not work correctly, or am I doing something wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-20T19:35:22.933

旧版“SQL”排序规则与 Windows“字排序”算法不一致。您需要对数据库中的列使用 Windows 排序规则（例如 Latin1_General_CS_AS）以获得相同的行为。

# ssrs-2008 - 试图消除 SSRS 报告中的空白

> ID：11562043
> 
> 赞同：2
> 
> 时间：2012-07-19T13:33:40.727
> 
> 标签：ssrs-2008, reporting-services

我有一个需要隐藏重复项的报告，但不幸的是，我现在在重复记录曾经所在的返回数据中有空白。

我该如何解决这个问题，以使我的报告看起来不那么不专业？

我搜索了互联网并找到了隐藏没有数据的行的答案，但在我的报告中有我不想显示的数据。我只是将它从查询中取出，但表的设置方式不是一个选项。

**编辑** 我正在使用 Tablix，没有我能够找到的 ConsumeContainerWhitespace 属性。这不是在出口报告末尾添加额外页面的情况。我在记录之间有空格。

**编辑**

```
=iif(Fields!CaseNbr.Value = Previous(Fields!CaseNbr.Value), True, False) 
```

那是我在我的数据的占位符行的属性部分的可见性下写入隐藏属性的代码。这会在隐藏重复信息的信息表中留下空单元格。

我的表如下所示：

```
Name            Title
Malione         Programmer

Manny           Watchman 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T21:30:51.353

这可能会有所帮助：[http ://blog.datainspirations.com/2011/03/18/the-case-of-the-extra-page/](http://blog.datainspirations.com/2011/03/18/the-case-of-the-extra-page/)

首先要尝试的是我最后提到的 ConsumeContainerWhitespace 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T05:54:30.287

您的问题的答案可以在这里找到。

[http://www.sqldev.org/sql-server-reporting-services/hidden-rows-still-displayed-9660.shtml](http://web.archive.org/web/20130530032649/http://www.sqldev.org/sql-server-reporting-services/hidden-rows-still-displayed-9660.shtml)

您可能在文本可见性属性而不是行组可见性中输入表达式。使用行组将删除整个行、文本和空白。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T10:14:53.357

为了避免空格，您可以使用内置的修剪功能，它将修剪所有空格。有关 SSRS 功能的更多详细信息，您可以参考[这里](http://bisqlserver2005.blogspot.com/2008/06/useful-built-in-functions-of-ssrs.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-07T17:22:12.347

我最近遇到了这个问题，我发现如果我将矩形的可见性设置为表达式并简单地将表达式设置为 =true，则矩形会适当地缩小。我也将报告设置为 ConsumeContainerWhitespace，尽管我不确定这在每种情况下都是必需的。

# c# - Resizing .jpg image in asp.net and storing as stream

> ID：11562045
> 
> 赞同：0
> 
> 时间：2012-07-19T13:33:43.880
> 
> 标签：c#, image

I am resizing image in asp.net.I succeeded resizing image.but while converting it as stream .jpg images are not working.

here my code if i set image format as jpeg it is not working.Because in C# there is no image format for .jpg

```
 public static System.Drawing.Image ScaleImage(System.Drawing.Image image, int maxWidth, int maxHeight)
    {
        var width=image.Width;
        var height=image.Height;

        var newWidth=0;
        var newHeight=0;
        var divisor=0;
        if (width > height) {
                    newWidth = maxWidth;
                    divisor = width / maxWidth;
                    if (divisor == 0)
                    {
                        divisor = 1;
                    }
                    newHeight = Convert.ToInt32(height /divisor);
                }
                else {
                    newHeight = maxHeight;
                    divisor = height / maxHeight;
                    if (divisor == 0)
                    {
                        divisor = 1;
                    }
                    newWidth = Convert.ToInt32(width / divisor);
                }

        var newImage = new Bitmap(newWidth, newHeight);

        Graphics.FromImage(newImage).DrawImage(image, 0, 0, newWidth, newHeight);
        return newImage;

    }

public static Stream ToStream(this System.Drawing.Image image, ImageFormat formaw)
    {
        var stream = new System.IO.MemoryStream();
        //stream.ReadTimeout = 100000;
        image.Save(stream, formaw);
        stream.Position = 0;
        //stream.ReadTimeout = 100000;
        return stream;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:42:58.583

伙计们，`System.Drawing`如果在 ASP.NET 服务中使用所有类，则必须显式处置。**这不是可选的。任何大量流量都会使服务器崩溃。**

现在，您的代码依赖 GC 来释放`Graphics`和`Bitmap`实例。不幸的是，GC 将这两个对象都视为微小的、低优先级的对象，并且不知道它们实际上占用了 100+ MB 的 RAM。

以下是一些如何安全地调整图像大小且质量更好的示例：

### [灯光调整大小](https://github.com/stakx/lightresize)

*   [SinglePurposeResize.cs](https://github.com/stakx/lightresize/blob/dcee788b76fe5f3c8965f04066fd874a718723c9/SinglePurposeResize.cs)
*   [LightResize.cs](https://github.com/stakx/lightresize/blob/dcee788b76fe5f3c8965f04066fd874a718723c9/LightResize.cs)

它是 MIT 许可的，因此无需担心使用限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:30:19.093

您正在寻找的 ImageFormat 是[ImageFormat.Jpeg](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.imageformat.jpeg.aspx)。

# image-processing - 如何在直方图的基础上找到好的图像

> ID：11562048
> 
> 赞同：4
> 
> 时间：2012-07-19T13:33:51.337
> 
> 标签：image-processing, opencv, histogram

对不起，我用“好”这个词……它是相对的。但是，在我的项目中，我想找到那些没有曝光不足或过度曝光的照片，并且有很多颜色的动态。

好的 ：

*   对于第一个问题，我可以在 HSV 颜色空间中使用粗略的 bin 数量来获取 V 直方图。所以我可以检测曝光不足/过度曝光的图像
*   对于颜色的计数，我可以使用 H/V-Diagram，也许在累积直方图中？
*   对于动态（颜色速率之间的差异），我可以选择 H-Diagram，并计算 bin 的平均值。
*   另外，我想检测全局峰值。颜色被侵蚀的地方。当然，我可以获得 V-Histogram 的最大值并查看值/亮度是否为 255。

这些观点提出了我解决问题的想法。但也许任何论文中还有其他有效的解决方案或想法。

在我的项目中，我必须探索大量图像，我认为创建所有这些直方图需要很长时间。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:01:57.640

尝试[颜色量化](http://en.wikipedia.org/wiki/Color_quantization)- 我相信它应该对你有所帮助。看看这个[StackOverflow 讨论](https://stackoverflow.com/questions/11411889/color-classification-with-k-means-in-opencv/)。

# hibernate - Hibernate 3.5 @OneToMany 注解和 PostgreSQL

> ID：11562049
> 
> 赞同：-1
> 
> 时间：2012-07-19T13:33:52.923
> 
> 标签：hibernate, postgresql, jpa, entity-relationship

我有一个名为 article 的表格，其中包含按以下顺序排列的以下列：

文章表：

1)creator_id 2)article_id(pk) 3).....

article_page 表：

1)article_page_id(pk) 2)article_page_number 3)article_id(fk --> 文章表)。

我使用单向或双向休眠注释映射，当我尝试保存具有许多 article_page 对象调用 save() 的文章对象时会出现以下问题：

文章被插入到表 article 中，并生成了一个新的 article_id。但是当试图在 article_page 表中插入行时，hibernate 试图使用表 article 中的 creator_id 而不是 article_id。

我已经仔细检查了我的 java 注释类，我似乎没有发现任何错误。我想知道 creator_id 是否在 PostgreSQL 文章表的位置 1 导致这种奇怪的行为。或者是别的什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T08:32:18.123

好的，似乎我的表格文章的所有列都被认为是自动生成的，因此它们都在 getGeneratedKeys() 调用中返回。列在表 article 中的存在顺序是您可以从 GeneratedKeys 中检索它们的顺序。在我们的例子中，我的主键是通过 getInt(2) 返回的，因为它是第二个。

Hibernate 3.5 似乎将第一列作为主键检索。

# android - 以编程方式更改 Activity 的主题

> ID：11562051
> 
> 赞同：133
> 
> 时间：2012-07-19T13:33:59.117
> 
> 标签：android

在特定情况下，我需要从我的活动中删除对话框主题，但它似乎不起作用。这是一个例子

第一项活动：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    startActivity(new Intent(MainActivity.this, SecondActivity.class));
} 
```

第二个活动：

```
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setTheme(android.R.style.Theme);
    setContentView(R.layout.activity_second);
} 
```

清单摘录：

```
 <activity android:name="SecondActivity" android:theme="@android:style/Theme.Dialog"></activity> 
```

当我运行它仍然是对话框主题。

API10

谢谢。

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2012-07-20T09:23:51.050

正如[文档](http://developer.android.com/reference/android/content/Context.html#setTheme%28int%29)所说，您必须`setTheme`在任何视图输出之前调用。似乎`super.onCreate()`参与`view`处理。

因此，要在主题之间动态切换，您只需像这样调用`setTheme`之前`super.onCreate`：

```
public void onCreate(Bundle savedInstanceState) {
    setTheme(android.R.style.Theme);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_second);
} 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2016-08-25T16:24:04.590

user1462299 的响应效果很好，但是**如果您包含片段**，他们将使用原始活动主题。要将主题也应用于所有片段，您可以**覆盖 Context 的 getTheme()**方法：

```
@Override
public Resources.Theme getTheme() {
    Resources.Theme theme = super.getTheme();
    if(useAlternativeTheme){
        theme.applyStyle(R.style.AlternativeTheme, true);
    }
    // you could also use a switch if you have many themes that could apply
    return theme;
} 
```

您不再需要在 onCreate() 方法中调用 setTheme()。您正在以这种方式覆盖每个请求以在此上下文中获取当前主题。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-10-23T15:11:33.723

我知道我迟到了，但我想在这里发布一个解决方案：在此处 [查看](http://programondaspot.blogspot.com/2015/10/implementing-users-choice-themeapply.html)
完整的源代码。 这是我使用首选项更改主题时使用的代码..

```
SharedPreferences pref = PreferenceManager
        .getDefaultSharedPreferences(this);
String themeName = pref.getString("prefSyncFrequency3", "Theme1");
if (themeName.equals("Africa")) {
    setTheme(R.style.AppTheme);

} else if (themeName.equals("Colorful Beach")) {
    //Toast.makeText(this, "set theme", Toast.LENGTH_SHORT).show();
    setTheme(R.style.beach);

} else if (themeName.equals("Abstract")) {
    //Toast.makeText(this, "set theme", Toast.LENGTH_SHORT).show();

    setTheme(R.style.abstract2);

} else if (themeName.equals("Default")) {

    setTheme(R.style.defaulttheme);

} 
```

请注意，您必须将代码放在 setcontentview 之前。

快乐编码！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-10-31T13:21:55.983

我已经使用此代码来实现暗模式...对我来说效果很好...您可以在打开时使用它...侦听器...

```
//setting up Night Mode...
 AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_YES);
//Store current mode in a sharedprefernce to retrieve on restarting app
            editor.putBoolean("NightMode", true);
            editor.apply();
//restart all the activities to apply changed mode...
            TaskStackBuilder.create(getActivity())
                    .addNextIntent(new Intent(getActivity(), MainActivity.class))
                    .addNextIntent(getActivity().getIntent())
                    .startActivities(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-07-09T16:36:00.233

这对我来说很好用：

`theme.applyStyle(R.style.AppTheme, true)`

**用法：**

```
 override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    //The call goes right after super.onCreate() and before setContentView()
    theme.applyStyle(R.style.AppTheme, true)
    setContentView(layoutId)
    onViewCreated(savedInstanceState)
} 
```

或使用`setTheme(R.style.AppTheme_Light)`：

```
override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    //The call goes right after super.onCreate() and before setContentView()
    setTheme(R.style.AppTheme_Light)
    setContentView(R.layout.activity_main)
} 
```

# c# - 使用 C# 的大文件的 RSA

> ID：11562057
> 
> 赞同：0
> 
> 时间：2012-07-19T13:34:22.053
> 
> 标签：c#, .net, rsa, x509certificate, public-key-encryption

> **可能重复：**
> [RSA 加密，长度变差](https://stackoverflow.com/questions/1496793/rsa-encryption-getting-bad-length)

我正在尝试使用 RSA 加密一个大字符串。.NET 的默认实现让我可以轻松加密小字符串，但是当我传递大字符串时，它会抛出 CryptographyException: Bad length。

我想克服这个问题，但问题是我需要将加密字符串传递给另一个我无法修改的应用程序（因为它不是我的 ;-)

那么是否有一个 RSA 实现可以用来加载 X509 公钥然后加密大字符串？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T13:44:13.230

您将需要设计一些东西来完成此操作，可能通过将其拆分为块并加密每个块。

它不起作用，因为 RSA 加密中的明文长度受密钥长度的限制，即不可能加密大于用于加密它的密钥的数据。通常，使用 RSA 执行一次性的对称密钥交换，并从那里使用商定的对称算法。

此外，RSA（与对称算法相比）在计算上非常昂贵，并且将大数据分解为数十个（可能数百个？）小块会遇到可怕的性能问题，您可能只能每秒加密几兆字节。

强烈考虑另一种方法。

编辑：另外，请查阅必须接受这些加密字符串的程序的文档，因为如果程序无法解密它们，它不会帮助您使用一些非标准的加密方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:47:18.100

查看 Bouncy Castle 密码库： http: [//www.bouncycastle.org/csharp/index.html](http://www.bouncycastle.org/csharp/index.html)

我认为这个库比.Net 的标准库更灵活。我用在它可以做标准不能做的事情的场景中。

此外，作为一种解决方法，您可以将大字符串拆分为长度与加密密钥相对应的较小字符串，然后使用标准的 .Net 类。

最后。你确定这不是填充的问题吗？填充时，您应该填充字符串的某些部分以获得正确的长度。

# regex - adding regular expression to form_validation in codeIgniter

> ID：11562060
> 
> 赞同：0
> 
> 时间：2012-07-19T13:34:26.647
> 
> 标签：regex, codeigniter, validation

I have number of forms with same structure. They all are same for user data. the id for these forms are addComment1, addComment2, addComment3, and etc. I want to define form validation for each of them. but i don't know their numbers. I want to use regular expression for defining them in form_validation.php. They all have the same structure and form_validation function is same for all of them. How can I use regular expression to do it?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T14:02:21.103

```
$this->form_validation->set_rules('field name', 'human name', 'regex_match[expression]'); 
```

[http://ellislab.com/forums/viewthread/195050/](http://ellislab.com/forums/viewthread/195050/)

使用搜索。

# asp.net-mvc-3 - asp.net mvc 3 jquery 插件的打印屏幕？

> ID：11562062
> 
> 赞同：0
> 
> 时间：2012-07-19T13:34:33.800
> 
> 标签：asp.net-mvc-3, jquery-plugins, pdf-generation

我一直在寻找一个 jquery 插件或其他东西来从我的 asp.net mvc 页面的屏幕截图中创建一个 pdf？有这样的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:38:46.970

PDF是相当高的标准。您将很难找到用于服务器端语言的 PDF 生成工具，但为 javascript 编写 PDF 解析器将非常庞大。我从来没有遇到过这样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:26:33.370

试试 jQuery 打印预览。您可以在以下位置找到示例

[https://github.com/etimbo/jquery-print-preview-plugin](https://github.com/etimbo/jquery-print-preview-plugin)

谢谢，-纳伦

# c# - 方法（）应该放在哪里？

> ID：11562063
> 
> 赞同：1
> 
> 时间：2012-07-19T13:34:48.763
> 
> 标签：c#, function, methods

我有一个演示脚本，它很好地展示了这个问题，所以我会展示这个脚本，然后提问。

```
class Program
{
    static void Main(string[] args)
    {
        Dog dog = new Dog() { Age = 4 };

        //This approach (version A)
        dog.DisplayDogYears();

        //Or this approach (version B)
        displayDogYears(dog);

        Console.ReadKey();
    }

    private static void displayDogYears(Dog d)
    {
        Console.WriteLine("The dog is {0} years old in human years.", d.Age * 7);
    }
}

public class Dog
{
    public int Age { get; set; }

    public void DisplayDogYears()
    {
        Console.WriteLine("The dog is {0} years old in human years.", Age * 7);
    }
} 
```

有两种方法可以做同样的事情（方法 A 和 B）。就可扩展性和可读代码而言，是否有任何理由更喜欢一种方法而不是另一种方法。我可以看到方法 A 的一个优点是该方法可用于 Dog 类的所有实例（非常好、可扩展、可重用和可维护，但是，在调试时它确实意味着我必须在不同的类之间移动（而 VS 有跳转到不同的文件等），而不是只在一个文件中查看所有内容。

有什么想法吗？

戴夫

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T13:37:43.683

我希望在 Dog 类中有一个方法：

```
public int GetAgeInHumanYears()
{
    return Age*7;
} 
```

并使用您喜欢的格式字符串从 main 调用此方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T13:42:07.267

在这种情况下，该方法应该在类 (Dog) 上，因为它是特定于 Dog 对象的功能。

顺便说一句，狗 -> 人类年不是简单的几何乘法 - 随着狗年龄的增长曲线开始变得平滑，因此乘数减小。

[狗年](http://foothillpethospital.com/agingchart.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-19T13:45:45.533

> 调试时确实意味着我必须在不同的类之间移动（并且 VS 必须跳转到不同的文件等），而不是只在一个文件中查看所有内容

你所有的钥匙都在一个巨大的钥匙圈上吗？你的所有纸质文件都堆在你的桌子上吗？

将方法分成它们所属的类。也许您实际上需要*第三*类才能从狗年（或一般动物年）转换为人类年。将所有内容放在一个（或几个）类中会限制重用性、可维护性（您必须在调试器中运行程序才能弄清楚它在做什么）和可扩展性。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-19T13:39:22.707

这种方法会更好。因为你的班级没有直接输出任何东西。所以一切仍然由`main`班级控制。它使我更容易阅读代码正在做什么。

```
class Program
{
    static void Main(string[] args)
    {
        Dog dog = new Dog() { Age = 4 };

        //This approach (version A)
        Console.WriteLine(dog.DisplayDogYears());

        Console.ReadKey();
    }

}

public class Dog
{
    public int Age { get; set; }

    public String DisplayDogYears()
    {
        return("The dog is {0} years old in human years.", Age * 7);
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-19T13:45:47.477

戴夫，这是一个隔离问题。如果你要添加一个 Cat 类怎么办？你会添加一个新方法说 DisplayCatYears 吗？如果你在 Dog 类中有它 - 你可以为此提取公共接口，并通过利用多态性让一个方法编写动物的年龄作为参数传递。

更重要的是，当您的程序超过几个屏幕长度并且将所有内容都放在一个文件中时，我认为您会感到不舒服。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-19T13:41:39.237

这确实是一个偏好问题。

我可能会在其余部分措辞不好，但不会太深：

有几个因素需要考虑：

*   可读性
*   代码重用
*   可怜的维护程序员将不得不维护它。（但这可能是可读性）

在这个例子中，我认为所有因素都指向将它放在 Dog 类中。

代码中的类应该反映现实生活中的对象。

*   可读性：对我来说，狗的年龄以年为单位，以狗年为单位，因此它应该是狗的财产。（那是选项 C - 在您的问题中未显示）而不是调用程序中的方法。
*   代码重用：如果您编写的另一个应用程序需要使用 Dog 类，并且需要获取 Dog Years 中的年龄，则您必须重写代码。

简而言之，现实生活到代码对象的映射是狗年是狗的一部分，而不是调用程序。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-19T13:46:25.663

最佳实践还说每个类都有自己的类，因此 Dog 类不会与应用程序的主要部分一起，而是保持独立。按照这种逻辑，最好将与该类相关的每个方法都放在该类中。例如，假设您有 20 个班级，20 只动物，每个班级都有不同的年龄计算方式，您是否希望将所有 20 个班级和所有 20 种方法随机扔在同一页面上？是的？那么你有什么问题！

您希望保持代码干净和可访问，每个类都独立，每个方法都专门用于其中的那个类。例如，Dog 类不需要知道 Cat 年数是如何计算的，它与自身无关，因此 cat 类中的 cat 年，dog 类中的 dog 年，

这更整洁，易于使用和阅读，并且可重用性更好！假设您现在想在另一个项目中使用您的 dog 类，您将不得不先切出该类，然后在代码行中寻找该类所需的所有方法。如果他们在里面，都在一个地方，它将加快你的编码速度，让你继续迎接更大的挑战！

我什至不会提及您希望重用的类应该在共享库中以便于重用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-19T13:52:15.847

将您的`Dog`班级与您的班级分离，`Console`但仍允许您的`Dog`班级显示自己的年龄。

```
public class Dog
{
    public int Age { get; set; }
    private int dogYears { get { return Age * 7; } }

    public void DisplayDogYears(TextWriter writer)
    {
        writer.WriteLine(
            "The dog is {0} years old in human years.", 
            dogYears);
    }
} 
```

然后，您可以将狗年显示给任何`TextWriter`：

```
static void Main(string[] args)
{
    var dog = new Dog { Age = 4 };

    // This will output to the console
    dog.DisplayDogYears(Console.Out);

    // This will output to the 'sb' StringBuilder
    var sb = new StringBuilder();
    dog.DisplayDogYears(new StringWriter(sb));
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-19T13:58:29.990

依靠，

您是否需要能够在不同的类中调用该方法，即您希望它可重用？选择一个。

是否仅在一个类/方法中使用 B.

# jquery - jQuery: next and nextAll

> ID：11562066
> 
> 赞同：1
> 
> 时间：2012-07-19T13:35:00.183
> 
> 标签：jquery

In [this](http://jsfiddle.net/Jb2jP/15/) code, could you please explain why the first alert shows the correct fieldset's id when the Maintenance button is clicked and the second alert shows the correct fieldset's id when the Subfile maint button is clicked, but not the other way round?

```
<div>
 <table width="100%">
  <col width="25%" />
  <col width="75%" />
  <tr>
   <td>
    <div class="width300"><h1>Inandrias Software&#174;</h1></div>
   </td>
   <td>
    <div class="nopadormarg" style="white-space:nowrap;">
     <h1><font size=+1>You are logged in as </font>charlie<font size=+1> of New Enterprises (Pty) Ltd.</font></h1>
    </div>
   </td>
  </tr>
 </table>

 <div id="menudiv" class="nopadormarg">

    <a href="#" class="menuA" name="level01"><span>Maintenance</span></a>
      <fieldset id="Maintenance" class="menuAbuttons">
        <p>
          <a href="#" class="menuA" name="level02" title="Maintain ancilliary files"><span>Subfile maint</span></a>
            <fieldset id="Subfilemaint" class="menuAbuttons">
              <p>
                <a href="#" class="menuA" name="level03" title="Add, amend, delete (unused) Products"><span>Products</span></a>
              </p>
              <p>
                <a href="#" class="menuA" name="level03" title="Add, amend, delete (unused) Insurers"><span>Insurers</span></a>
              </p>
              <p>
                <a href="#" class="menuA" name="level03" title="Add, amend, delete (unused) Section types"><span>Section types</span></a>
              </p>
              <p>
                <a href="#" class="menuA" name="level03" title="Add, amend, delete (unused) Agents"><span>Agents</span></a>
              </p>
              <p>
                <a href="#" class="menuA" name="level03" title="Add, amend, delete (unused) Pay methods"><span>Pay methods</span></a>
              </p>
            </fieldset>
        </p>
      </fieldset>

 </div>
</div> 
```

​ JS:

```
$(document).ready(function() {
    $(".menuA").click(function(evnt) {
        evnt.preventDefault();

        alert("next fieldset id = " + $(this).next('fieldset').attr('id'));
        alert("next fieldset id = " + 
$(this).closest('fieldset').find(".menuAbuttons:first").attr('id'));

    // remove the menuA-open class from the current and lower (numerically higher) level's
    //   class menuA objects except the one being clicked (toggled)
    var level = $(this).attr('name');
    // trying to avoid higher levels with >= doesn't seem to work
    //   nor does "[name = " + level + "][name > " + level + "]"
    $(".menuA").not(this).filter("[name = " + level + "]").removeClass("menuA-open");
    //this removes all menuA-open classes except the currently clicked one
    //$(".menuA").not(this).removeClass("menuA-open");

    // hide all other fieldset objects except the one being toggled
    $('fieldset').not($(this).next('fieldset')).hide();

    // toggle the fieldset following this link open or closed
    $("fieldset#" + $(this).text().replace(/\s+/gi,'')).toggle();

    // toggle the currently selected menuA-open class on or off
    $(this).toggleClass("menuA-open");

    });
}); 
```

​</p>

# python - 为什么 *args 不适用于字符串格式

> ID：11562072
> 
> 赞同：3
> 
> 时间：2012-07-19T13:35:26.907
> 
> 标签：python, python-2.7

我正在尝试了解 Python *args 和 **kwargs 的操作。让我们考虑一个接受 4 个参数的函数。我们可以使用 *x 将列表 x 作为参数传递给函数

```
def foo(a,b,c,d):
    print a,b,c,d

x=[1,2,3,4]

foo(x)
#TypeError: foo() takes exactly 4 arguments (1 given)

foo(*x)
#1 2 3 4 # works fine

print "%d %d %d %d" %(*x)
#SyntaxError: invalid syntax 
```

如果我猜对了，以防 foo() *x 解包值...那么为什么会出现错误`print "%d %d %d %d" %(*x)`？
注意-我对如何在一行中打印列表不感兴趣，但只是好奇为什么`print "%d %d %d %d" %(*x)`不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T13:39:14.377

`*x`将 的内容解包`x`到参数中，而不是元组；元组是`%`应该传递的。

```
print "%d %d %d %d" % tuple(x) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T13:42:24.100

我建议[在 Python 中使用格式化字符串的新方法](http://docs.python.org/library/string.html#formatstrings)。事实上，它更加优雅，并且完全符合您的期望：

```
"{} {} {} {}".format(*x) 
```

# mysql - RMySQL 安装：$operator 对原子向量无效

> ID：11562073
> 
> 赞同：0
> 
> 时间：2012-07-19T13:35:29.340
> 
> 标签：mysql, r, windows-xp, xampp, rmysql

考虑下面的场景。在 R2.14.0 中添加包[“RMySQL”](http://cran.r-project.org/web/packages/RMySQL/index.html)

```
> install.packages('RMySQL',type='source')

* installing *source* package 'RMySQL' ...
** package 'RMySQL' successfully unpacked and MD5 sums checked
**checking for $MYSQL_HOME... C:/wampp/mysql/**

gcc  -I"G:/PROGRA~1/R/R-214~1.0/include" -I"C:/wampp/mysql/"/include    -I"d:/RCompile/CRANpkg/extralibs/local/include"     -O3 -Wall  -std=gnu99 -mtune=core2 -c RS-DBI.c -o RS-DBI.o
gcc  -I"G:/PROGRA~1/R/R-214~1.0/include" -I"C:/wampp/mysql/"/include    -I"d:/RCompile/CRANpkg/extralibs/local/include"     -O3 -Wall  -std=gnu99 -mtune=core2 -c RS-MySQL.c -o RS-MySQL.o
gcc -shared -s -static-libgcc -o RMySQL.dll tmp.def RS-DBI.o RS-MySQL.o -Ld:/RCompile/CRANpkg/extralibs/local/lib C:/wampp/mysql//lib/opt/libmysql.lib -LG:/PROGRA~1/R/R-214~1.0/bin/i386 -lR
installing to G:/Program Files/R/R-2.14.0/library/RMySQL/libs/i386
** R
** inst
** preparing package for lazy loading
Creating a generic function for 'format' from package 'base' in package 'RMySQL'
Creating a generic function for 'print' from package 'base' in package 'RMySQL'
** help
*** installing help indices
** building package indices ...
** testing if installed package can be loaded
Error : .onLoad failed in loadNamespace() for 'RMySQL', details:
  call: i$Location
  error: $ operator is invalid for atomic vectors
Error: loading failed
Execution halted
ERROR: loading failed
* removing 'G:/Program Files/R/R-2.14.0/library/RMySQL' 
```

安装失败的任何想法或解释？平台详情：

1.  赢XP
2.  R2.14.0
3.  RMySQL_0.9-3.tar.gz
4.  MySQL 来自最新的 xampp 安装，其中 lib 和头文件位于 mysql_home 目录下的各个目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-22T20:17:06.930

最新版本 MySQL 的注册表的性质与包中的代码不匹配。

在 tar.gz 文件中，有一个 R 文件“\RMySQL_0.9-3.tar\RMySQL\R\zzz.R”，其中包含以下代码：

```
# check registry
if (!dir.exists(mysql)) {
    reg <- utils::readRegistry("SOFTWARE\\MySQL AB", hive="HLM", maxdepth=2)
    for (i in reg){
    mysql <- i$Location
    if (dir.exists(mysql)) {
        if (verbose) cat(mysql, "found in registry\n")
        break
    }
    }
} 
```

以前“reg”的每个元素都是一个列表，但现在第一个元素是一个向量。这意味着“mysql <- i$Location”语句将失败，创建您观察到的错误消息。

我修改了语句以通过更改行来跳过注册表的第一个元素

```
for (i in reg){ 
```

至

```
for (i in reg[-1]){ 
```

并通过在本地修改的 tarball 上运行 install.packages 来安装。

# shell - 如何在不重复输入密码数百次的情况下将我的公共 ssh 密钥复制到数百台计算机？

> ID：11562087
> 
> 赞同：0
> 
> 时间：2012-07-19T13:36:40.130
> 
> 标签：shell, ssh, ssh-keys, openssh

我想将我的公共 ssh 密钥放在数百台计算机上。通常我只是做“ssh-copy-id remoteHost001”然后输入我的密码。显然，重新输入我的密码一百次很痛苦。将我的公钥放在数百台计算机上而不会将我的手指放在小块上的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:44:31.050

ssh 命令不为密码提供命令行参数，以防止用户硬脚本化他们的密码。您可以使用[此技巧](http://bash.cyberciti.biz/security/expect-ssh-login-script/)或[此](http://www.cyberciti.biz/faq/noninteractive-shell-script-ssh-password-provider/)技巧将密码自动传递给命令。

# javascript - jquery嵌套函数中的全局变量？

> ID：11562091
> 
> 赞同：1
> 
> 时间：2012-07-19T13:36:53.520
> 
> 标签：javascript, jquery, callback, scope

jquery嵌套函数中可以访问全局变量吗？我有一个我无法解决的问题。一个对象属性发生变化，另一个没有

情况是这样的

```
 for(var key in object) {
        if(object[key].boolean) {
            alert(object[key].value)
            $.get(url, "data", function(data) {
                if(parseInt(data) > object[key].int) {
                    alert(object[key].value);
                    object.int = data;
                }
            });
        }
    } 
```

我遇到的问题是 object[key].value 不保持其价值。两个警报都有不同的值，所以我不能在嵌套返回函数中使用它。object[key].int 也得到正确更新，这更令人困惑。对象被声明为全局变量。

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:47:43.603

您的匿名包装器仅在 get 成功后才被调用，它不会立即被调用，看起来像一些情况

[从匿名包装器返回一个函数？](https://stackoverflow.com/questions/11200279/return-a-function-from-the-anonymous-wrapper)

您是否从内部封闭处收到最后一项警报？

```
var object = {
    x:10,
    y:20,
    z:30
};
for(var key in object) {
            console.log("outside closure",object[key]);
                $.get("/echo/html?data=asdf" ,(function(keyAlias) {
                    return function(data) {
                        console.log("inside closure",object[keyAlias],data);
                        //your logis goes here
                    }
                 })(key));
    } 
```

小提琴： http: [//jsfiddle.net/eTdv5/1/](http://jsfiddle.net/eTdv5/1/)（检查控制台日志）

解释整个事情并不像我猜的那样，你可以查看上面提到的SO帖子，如果有任何不清楚的地方请询问。

**解释：**

第一的，`key = 10`

```
$.get("/echo/html?data=asdf" , <at this place key is 10> ); 
```

`(function(key) {})(key)`就像调用一样`display(key)`，认为您正在编写显示函数并使用参数调用它`key`。

`return function(data) {};`将返回一个函数，实际上就像`(function(key) {})(key)`被这个返回的函数所取代。

这将为您提供介绍，现在如何管理范围：

将随着循环`key`的循环而改变它的值，但是我们创建的每个回调函数都有自己的关联，它对应于创建回调函数时的值`for in``object``keyAlias``key``(function(key) {})(key)`

# c# - 在连接的 Android 设备上使用 C# 创建 SQLlite 连接

> ID：11562092
> 
> 赞同：-1
> 
> 时间：2012-07-19T13:36:53.393
> 
> 标签：c#, android, sqlite, usb

我已使用 USB 电缆将我的 android 设备连接到我的系统。现在我想访问我在设备上的项目中使用的数据库。从这里我想将数据检索到我的系统中。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:50:38.410

由于 Android 设备的安全性，您不能直接执行此操作

如果您的设备已植根，您可以将其直接从应用程序数据库文件夹复制到您的计算机上。如果要连接到非 root 设备上的数据库，则必须将数据库备份到设备上的文件夹，然后将其复制到计算机。

但是，如果您使用的是允许 USB 访问的根设备，就像普通文件夹结构一样（我的非根 ICS S2 不再允许这样做），那么您应该能够直接连接到该文件夹​​： [Android：数据库文件存储在哪里?](https://stackoverflow.com/questions/1105219/android-where-are-database-files-stored)

# vba - 根据列中的条件删除行

> ID：11562093
> 
> 赞同：1
> 
> 时间：2012-07-19T13:36:59.260
> 
> 标签：vba, excel, excel-2007

我在网上和这里搜索过，但找不到任何似乎符合要求和工作的东西。我有一些有效的代码，但是因为范围的长度在删除行时会发生变化，因此它不会捕获所有要删除的行，所以我最终运行了几次，这不是很好......所以我m 现在尝试此线程上推荐的 AutoFilter 方法。

我有一个包含几列的电子表格，其中之一是“成本”。我需要遍历“成本”列（有时可能是第 9 列，有时是第 10 列，因此下面的“查找”位）并删除成本为 0 的任何行...

以下是我到目前为止编写的代码，任何帮助将非常非常感谢！！！！

-- 编辑 3：进行了更多代码更改...新代码如下。

```
Sub RemoveRows()
    Dim cell As Range
    Dim lastRow As Long
    Dim lastColumn As Integer
    Dim criteraColumn As Integer
    Dim criteriaRange As Range

    lastRow = Cells.Find(What:="*", After:=Range("A1"), LookIn:=xlValues, LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlPrevious).row
    lastColumn = Cells.Find(What:="*", After:=Range("A1"), LookIn:=xlValues, LookAt:=xlPart, SearchOrder:=xlByColumns, SearchDirection:=xlPrevious).Column

    Rows(1).EntireRow.Select
    criteriaColumn = Selection.Find(What:="Cost", After:=ActiveCell, LookIn:= _
                        xlValues, LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:= _
                        xlNext, MatchCase:=False, SearchFormat:=False).Column
    Set criteriaRange = Range("A1", Cells(lastRow, lastColumn))

    criteriaRange.AutoFilter Field:=criteriaColumn, Criteria1:="£0.00"
    AutoFilter.Range.Delete
    ActiveSheet.AutoFilterMode = False
End Sub 
```

当我运行它时，它将过滤器应用于正确的范围和正确的列。然后我收到错误消息：“运行时错误'424'：需要对象”，适用于该`AutoFilter.Range.Delete`行。当我按下“结束”或“调试”并查看电子表格时，过滤器已应用于正确的列并检查了正确的选项（0.00 英镑），但没有返回任何结果（我知道我需要做将来出现这种情况时会进行一些错误处理，但目前该过滤器应该至少返回 10 行）。如果我在电子表格中的过滤器设置上手动按“确定”（不更改任何设置！）我的 10 个结果会正确显示，所以我不确定为什么当我以编程方式执行此操作时它们没有显示？

如果需要，很高兴提供电子表格示例，这真的让我很困惑！

电子表格可以在[这里找到](http://dl.dropbox.com/u/87261581/test%20phone%20data.xls)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T13:55:06.017

您应该能够使用 Excel 自动筛选来删除行。

```
Cells.AutoFilter Field:=criteriaColumn, Criteria1:="£0.00"
ActiveSheet.AutoFilter.Range.Offset(1).Delete
ActiveSheet.ShowAllData 
```

这将过滤成本 = 0，然后删除与过滤器匹配的所有行。

运算符自动等于，因此您不需要“=£0.00”作为参数。

我在 ActiveSheet 中添加了 AutoFilter 以摆脱未找到的对象，并且 Offset 使其不删除标题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T13:50:56.817

出于性能原因，我会以另一种方式来做（逐行阅读+删除很慢）。我之前回答过一个类似的问题，我认为它也很适用于你的帖子。

我建议你可以做的：

*   不是逐行读取工作表，而是将整个范围加载到一个数组中；
*   不要逐行删除，而是将所需的值传输到内存中的第二个数组中；
*   当你有你需要的数据时，应用一个 oRange.clearcontents 来清除当前范围；
*   通过应用 oRange = vArray 将新的数据数组显示到工作表中。

读/转换数据在内存中进行，读写只进行一次。

在这个线程中，你有我之前写的代码： [Execution of VBA code get slow after many iterations](https://stackoverflow.com/questions/11555643/vba-execution-gets-slow-after-many-iterations/11557711#11557711)

让我知道这是否可以帮助您，或者您是否希望收到更具体的信息/代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T13:50:36.453

您需要做的是在范围内后退一步，因为在 Excel 中默认情况下，删除行会自动将行上移一格。

代替：

```
 For Each cell In criteriaRange.Cells
        If cell.Value = 0 Then
            cell.EntireRow.Delete
        End If
    Next cell 
```

和：

```
Dim i As Integer

For i = criteriaRange.Rows.Count To 1 Step -1
    If criteriaRange.Cells(i) = 0 Then
        criteriaRange.Cells(i).EntireRow.Delete
    End If
Next 
```

此外，`ScreenUpdating`对宏的方法没有影响。它基本上会为宏执行的每个操作关闭“屏幕闪烁”，使其运行得更快、更流畅，从而获得用户体验。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T13:44:46.393

你可以拥有它，所以每当它删除一行时，它要么回到列的顶部，要么你可以从计数中减去一个。无论哪种方式，它都不会跳过任何行。我会提供实际的代码，但我是 VBA 的新手，不太知道该怎么做。

# oracle - 带有 substr 的 Oracle 选择查询

> ID：11562096
> 
> 赞同：3
> 
> 时间：2012-07-19T13:37:00.850
> 
> 标签：oracle, select, oracle10g, substr

我有一张桌子，看起来像：

```
DAYDATE     TIMEOFDAY   USERID
18-JUL-12   Afternoon   mistu4u
18-JUL-12   Noon        mistu4u
20-JUL-12   Noon        mistu4u
21-JUL-12   Afternoon   mistu4u
11-SEP-12   Afternoon   rimo
06-AUG-12   Noon        rimo
14-JUN-12   Noon        mistu4u 
```

现在我想获取 mistu4u 的那些值，它的 daydate 月份是“jul”。我试过了

```
select * from mealdb where userid='mistu4u' and substr(daydate,4,3)='jul'; 
```

但它给出了“没有找到数据”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T13:39:03.440

您的安装是否区分大小写？这个 SQL 有效吗？

```
select * from mealdb where userid='mistu4u' and substr(daydate,4,3)='JUL'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:41:21.677

尝试

```
SELECT *
FROM   mealdb
WHERE  userid = 'mistu4u'
AND    TO_NUMBER(TO_CHAR(daydate,'MM')) = 7
; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T13:41:46.300

尝试

```
TRUNC(daydate, 'MONTH') = '01-JULY-2012' 
```

如果 daydate 列上有任何索引，请小心。substr 将使其无用。也许，考虑使用 BETWEEN 代替。

此外，大多数解决方案将在7 月份获取*任何一年中的所有记录。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-23T15:12:39.680

试试这个：

```
select * from mealdb where userid='mistu4u' and daydate like '%JUL%'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-08T04:49:44.873

```
select *
from mealdb
where userid='mistu4u'
and upper(daydate) LIKE '%JUL%'; 
```

# shell - 如何在linux shell脚本中使用#

> ID：11562097
> 
> 赞同：0
> 
> 时间：2012-07-19T13:37:01.340
> 
> 标签：shell

我知道在 shell 脚本中使用 # 会注释该行的其余部分。

我必须将变量从另一个文件传递给 shell 脚本。我正在使用“导出”来执行此操作。问题是变量的值中有一个 #，所以我无法在我的 shell 脚本中获取该值。

我正在使用的脚本如下所示

导出文件名=#gclfac*sched$

如您所见， # 位于值的开头，我无法在我的 shell 脚本中获取任何内容。

如何在 shell 脚本中传递“#”值而不注释掉该行的其余部分？任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:54:17.337

```
export FILE_NAME='#gclfac*sched$' 
```

或者

```
export FILE_NAME="#gclfac*sched$" 
```

要执行的脚本：

```
#!/bin/bash
set -x
export FILE_NAME='#jfkslj**23948290$'
echo $FILE_NAME "_ $FILE_NAME" 
```

将其放入 test.sh 使其可执行（`chmod +x test.sh`）并运行`./test.sh`并在此处发布输出。附言。是你的 shell `bash`（如果不是，将 she-bang [#!/bin/bash at the first string] 更改为你的 shell，别忘了给我们写信）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:55:04.743

将您的分配字符串放在双引号中。因此，使用您的示例将是；

```
FILE_NAME="#gclfac*sched$"
export FILE_NAME 
```

# geospatial - GeoScript：CQL DWITHIN 忽略单位

> ID：11562098
> 
> 赞同：1
> 
> 时间：2012-07-19T13:37:04.710
> 
> 标签：geospatial, geotools

我正在使用 GeoScript 对数据集进行查询。给定一个高程图块，我们创建包含超过一定高度的区域的几何图形，这些几何图形用于进行一些寻路。我正在进行 DWITHIN 调用以获取范围内的所有几何图形，但 DWITHIN 忽略了我的单位类型。这两个调用返回相同的数据集（132 个几何图形中的 124 个）。轴翻转是故意的，愚蠢的 API。

```
DWITHIN(geom, POINT(42.4979 -122.7668), 233.7, meters)

DWITHIN(geom, POINT(42.4979 -122.7668), 233.7, kilometers) 
```

我查看了 GeoScript 的源代码，发现字符串被发送到

```
org.geotools.filter.text.ecql.ECQL 
```

返回的过滤器包含正确的单位测量，但似乎根本没有使用它，如果我将过滤器打印出来，它的 toString 也会忽略单位。任何想法可能会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T07:14:34.877

GeoTools dwithin 过滤器始终以基础数据为单位工作。因此，在您的情况下，您需要以度为单位指定距离或将数据重新投影到以米为单位的投影中。

# android - 在 MonkeyRunner 上查找 xy 坐标的简单方法

> ID：11562099
> 
> 赞同：1
> 
> 时间：2012-07-19T13:37:07.497
> 
> 标签：android, monkeyrunner, android-monkey

我正在使用 MonkeyRunner 来测试我非常广泛的应用程序并在我的设备上运行许多不同的脚本。但是，要花很长时间才能确定每次触摸屏幕时 x/y 坐标的位置。我尝试使用这个不错的插件[http://blogs.wittwer.fr/whiler/2011/07/01/editeur-monkeyrunner/](http://blogs.wittwer.fr/whiler/2011/07/01/editeur-monkeyrunner/) 但它的坐标不够准确....有没有我可以安装的应用程序给我为我需要的坐标干杯？

```
device.touch(225, 182, "DOWN_AND_UP") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T05:02:44.580

可以使用**Settings -> Developer options -> Pointer location**获得每次触摸的坐标，但也许您根本不需要坐标。查看[http://dtmilano.blogspot.ca/2012/05/androidviewclient-q.html](http://dtmilano.blogspot.ca/2012/05/androidviewclient-q.html)，它描述了如何使用*View ID*获取坐标和发送事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T12:51:48.907

这对于一个无需修改应用程序本身即可按下按钮的语音应用程序来说非常棒。在 Galaxy s 3（它适用于手机）上，您必须通过转到设置 > 更多 > 关于设备 > 内部版本号来启用开发者选项，然后点击多次，直到启用开发者选项，然后返回到开发者选项屏幕。

# android - 布局内存泄漏？

> ID：11562100
> 
> 赞同：1
> 
> 时间：2012-07-19T13:37:09.937
> 
> 标签：android, memory, memory-management, memory-leaks, android-memory

我是一名初级安卓开发人员。对于 android UI 设计，我认为大多数 android 开发人员会使用 XML 进行布局设计。今天，我的高级开发人员说他不使用 XML 进行布局设计。所有的 UI 设计都使用代码来生成。他说的原因是Android不会自动释放布局资源。使用JNI释放布局资源。他没有详细告诉你，因为他认为我很初级。

我想问他是真是假。我不知道他的观点。但是，我确保他的代码不能重用。另外，Android 在其生命周期中如何释放布局资源。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T13:47:17.190

> 他说的原因是布局资源不是Android自动释放的

当这些小部件从活动中删除或活动被销毁时，通过膨胀布局资源创建的小部件将“由 Android 自动释放”。换句话说，小部件的垃圾收集方式与任何其他 Java 对象一样。而且，无论小部件是否是使用布局资源创建的，这都是正确的。

可以想象，布局资源的解析后的XML被进程缓存了，所以如果再次需要相同的布局，可以跳过解析步骤。这不会是太多的记忆。避免使用 XML 布局资源来避免如此小的内存缓存是非常短视的，这不是我对真正的“高级开发人员”的期望。

> 使用 JNI 释放布局资源

JNI 与布局资源无关。JNI 也与小部件无关。

> 他没有详细告诉你，因为他认为我很初级。

欢迎他记录他的发现，为他的主张提供证据，并为他的决定提供理由。

# android - 如何在 Android 中使用 Google 地图上的叠加层添加标记？

> ID：11562102
> 
> 赞同：1
> 
> 时间：2012-07-19T13:37:23.340
> 
> 标签：android

我想在 Android 中使用 Overlay 在 Google Maps 上添加标记...我的代码如下

```
@Override
    public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
            long when) {
          Point screenPts = new Point(); mapView.getProjection().toPixels(p1,
          screenPts);
          //---add the marker--- 
          Bitmap bmp = BitmapFactory.decodeResource(getResources()
          , R.drawable.googlepin); ``
          canvas.drawBitmap(bmp, screenPts.x,
          screenPts.y-50, null);
                  }
        return super.draw(canvas, mapView, shadow, when);
    } 
```

在 getResources() 下给 RedLine ....给任何建议....提前谢谢..

# python - 错误：安装 pylibrabbitmq 时命令“gcc”失败，退出状态为 1

> ID：11562107
> 
> 赞同：1
> 
> 时间：2012-07-19T13:37:37.567
> 
> 标签：python, ubuntu

我在 Ubuntu 上安装 pylibrabbitmq。但得到错误。我已经从 Git Hub 下载了 pylibrabbitmq。我正在做'python setup.py install'。但得到以下错误。

这是日志，

```
running install
Checking .pth file support in /usr/local/lib/python2.7/dist-packages/
/usr/bin/python -E -c pass
TEST PASSED: /usr/local/lib/python2.7/dist-packages/ appears to support .pth files
running bdist_egg
running egg_info
writing pylibrabbitmq.egg-info/PKG-INFO
writing top-level names to pylibrabbitmq.egg-info/top_level.txt
writing dependency_links to pylibrabbitmq.egg-info/dependency_links.txt
file pylibrabbitmq.py (for module pylibrabbitmq) not found
reading manifest file 'pylibrabbitmq.egg-info/SOURCES.txt'
reading manifest template 'MANIFEST.in'
warning: no files found matching '*' under directory 'tests'
no previously-included directories found matching '*.pyc'
no previously-included directories found matching '*.o'
no previously-included directories found matching '*.so'
no previously-included directories found matching '*.dylib'
writing manifest file 'pylibrabbitmq.egg-info/SOURCES.txt'
installing library code to build/bdist.linux-x86_64/egg
running install_lib
running build_py
file pylibrabbitmq.py (for module pylibrabbitmq) not found
file pylibrabbitmq.py (for module pylibrabbitmq) not found
running build_ext
building '_pyrabbitmq' extension
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c pylibrabbitmq/_rabbitmqmodule.c -o build/temp.linux-x86_64-2.7/pylibrabbitmq/_rabbitmqmodule.o
In file included from /usr/include/python2.7/Python.h:8:0,
                 from pylibrabbitmq/_rabbitmqmodule.h:16,
                 from pylibrabbitmq/_rabbitmqmodule.c:7:
/usr/include/python2.7/pyconfig.h:1161:0: warning: "_POSIX_C_SOURCE" redefined [enabled by default]
/usr/include/features.h:215:0: note: this is the location of the previous definition
In file included from pylibrabbitmq/_rabbitmqmodule.c:7:0:
pylibrabbitmq/_rabbitmqmodule.h:18:18: fatal error: amqp.h: No such file or directory
compilation terminated.
error: command 'gcc' failed with exit status 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:41:53.980

您丢失了`amqp.h`（来自 librabbitmq 的 C 头文件，依赖于库 pylibrabbitmq）。

[要么手动](https://github.com/alanxz/rabbitmq-c)安装该文件，要么安装[包含它的软件包](http://packages.ubuntu.com/search?searchon=contents&keywords=amqp.h&mode=exactfilename&suite=precise&arch=any)librabbitmq [-dev](http://packages.ubuntu.com/precise/librabbitmq-dev)。

# html - 向左填充不起作用

> ID：11562108
> 
> 赞同：0
> 
> 时间：2012-07-19T13:37:37.703
> 
> 标签：html, css, asp.net-mvc

我有一个 MVC2 应用程序测试应用程序。母版页代码的结构如下：

```
<div id="mainContainer"> 
    <asp:ContentPlaceHolder ID="leftColPlaceHolder" runat="server"> 
        <div id="leftcolumn"> 
            <div class="links"> 
                <div class="padding_left"> 
                    blah blah 
                </div> 
            </div> 
            <div class="innertube"> 
              blah blah 
            </div> 
        </div> 
    </asp:ContentPlaceHolder> 
    <asp:ContentPlaceHolder ID="MainContent" runat="server"> 
        <div id="contentwrapper"> 
            <div id="contentcolumn"> 
               blah blah                </div> 
        </div> 
    </asp:ContentPlaceHolder> 
</div> 
```

在视图 index.aspx 中，代码

```
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server"> 
<h2><%: ViewData["Message"] %></h2> 
<p> 
    To learn more about ASP.NET MVC visit <a href="http://asp.net/mvc" title="ASP.NET MVC Website">http://asp.net/mvc</a>. 
</p> 
```

我想将 h2 部分填充留在左边，但它根本不起作用。请看我的CSS：

```
#maincontainer{
width: 840px; /*Width of main container*/
margin: 0 auto; /*Center container on page*/
}

#topsection{
background: #EAEAEA;
height: 90px; /*Height of top section*/
}

#topsection h1{
margin: 0;
padding-top: 15px;
}

#contentwrapper{
float: left;
width: 100%;
}

#contentcolumn{
margin-left: 300px; /*Set left margin to LeftColumnWidth*/
}

#leftcolumn
{
    float: left;
    width: 300px; /*Width of left column*/
    background: #C8FC98;
}

#footer
{
    clear: left;
    width: 100%;
    background: #666699;
    color: #FFF;
    text-align: center;
    padding: 4px 0;
 }

  #footer a{
  color: #FFFF80;
  }

  .innertube{
  /*Margins for inner DIV inside each column (to provide padding)*/
    margin-top: 0;
   }

  .links
  {
      width: 300px;
      height: 541px; /* must be 541px to display full image */
      background-image: url('../../cross.jpg');
  } 

  h2
  {
      padding-left: 55px;
      background-color: #00FFFF;
  } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:49:41.567

填充按应有的方式工作。我打算附上一个屏幕截图，但没有足够的声誉点来这样做。使用左边距，您会看到文本缩进 55 像素，蓝色背景将从 0 开始。

如果您希望整个 h2 区域缩进，那么您应该使用 margin-left: 55px;

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:08:32.677

我复制了样式并创建了一个 HTML 文件：

`<h2><%: ViewData["Message"] %></h2> <p> To learn more about ASP.NET MVC visit <a href="http://asp.net/mvc" title="ASP.NET MVC Website">http://asp.net/mvc</a>. </p>`

它似乎工作正常。如果您使用的是 Chrome 或 Firefox，请尝试右键单击文本并检查元素以检查是否已采用该样式。可能是您有多个用于不同类的 h2 样式。通过更改 css 属性并跟踪页面上的更改来找到正确的 h2。当你找到正确的一个去同一行的 css 文件来更正样式。

作为一个非常快速的解决方案（虽然不是一个好习惯），您可以将您的 h2 标签更改为：

`<h2 style="padding-left: 55px;"></h2>`

希望这可以帮助。

# html - 没有图标的 JQuery Mobile 拆分按钮列表

> ID：11562111
> 
> 赞同：0
> 
> 时间：2012-07-19T13:37:47.340
> 
> 标签：html, jquery-mobile

我正在尝试制作一个包含两个部分的列表，每个部分都有不同的链接，但如果不使用列表右侧部分的图标，我将无法做到这一点。

我试图将 data-icon='false' 放在任何地方，但它不起作用，它使用默认图标。

我也尝试过使用它并且它可以工作，但我无法让它看起来像拆分列表一样好。

关于如何做到这一点的任何想法？

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T16:30:58.540

你能像这样覆盖 jquery mobile 的 .ui-icon 类吗？

```
.ui-icon-your_name_icon {
   width: 18px;
   height: 18px;
   -moz-border-radius: 0px;
   -webkit-border-radius: 0px;
   border-radius: 0px;
   background-position: 50% 50%;
   background: url("../images/some_one_image_transparent.png") no-repeat scroll 0 0 transparent;
} 
```

我希望这有帮助。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:09:30.137

我已经设法用这样的控制组来做到这一点，并在 .css 文件中使用宽度：

```
<li data-role='list-divider'>
    <div data-role='controlgroup' data-type='horizontal' >
        <a class='resume' type='button' href='javascript:void(0)'>
            <span class='name' >Object Name </span>
        </a>
        <a class='info' type='button' href='javascript:void(0)'>
            <span class='name'>Max Value </span>
        </a>
    </div>
</li> 
```

# java - 用于软件度量的 Eclipse 插件 - 工作区级别摘要

> ID：11562117
> 
> 赞同：0
> 
> 时间：2012-07-19T13:38:10.000
> 
> 标签：java, eclipse, metrics, workspace

我发现并尝试了为我的 java 代码提供软件指标的 ecliple 插件。但是，此插件适用于项目级别 - 分别分析每个项目。

有谁知道任何计算指标的 Eclipse 插件并对工作区中的所有项目进行汇总？这对我来说将是一个更有用的工具，因为我的工作区到目前为止包含 70 多个项目......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:48:55.630

不太确定是否有任何插件可以在工作区级别为您的项目检索指标。我有一个类似的问题，我使用了[Metrics 1.3.6](http://metrics.sourceforge.net/)

这个支持 Ant 的 Headless 操作，您可以将数据导出为 xml 格式。我所做的是创建一个小脚本文件来从命令行执行所有项目 ant 文件（具有此指标任务）。这对我有用。我有大约 85 个奇怪的项目要处理。

至于ant文件的创建，我为一个生成并使用脚本为其他文件修改和复制粘贴它。我知道总体而言它不像获得工作区指标生成器那么容易，但是在我看来，创建几个脚本文件和一个 ant 文件不会那么困难或耗时

# cocos2d-iphone - 如何为平铺地图中的平铺制作矩形

> ID：11562118
> 
> 赞同：0
> 
> 时间：2012-07-19T13:38:12.917
> 
> 标签：cocos2d-iphone, tiles, bounding-box

对于我的碰撞检测，我需要检查球矩形是否与任何墙壁矩形相交。现在我让它工作，但它使用它检查球的位置是否在瓷砖的 GID 之一。

```
-(void) checkHits:(CGPoint)position {
    CGPoint tileCoord = [self tileCoordForPosition:position];
    int tileGid = [levelLayer tileGIDAt:tileCoord];
    //NSLog(@"%g",tileRect.origin);
    if (tileGid) {
        NSDictionary *properties = [level propertiesForGID:tileGid];
        if (properties) {
            NSString *collision = [properties valueForKey:@"break"];
            if (collision && [collision compare:@"True"] == NSOrderedSame) {
                //for blocks
                //[[SimpleAudioEngine sharedEngine] playEffect:@"hit.caf"];
                [levelLayer removeTileAt:tileCoord];
                velocity.y *= -1;
            }
            if (collision && [collision compare:@"False"] == NSOrderedSame) {
                //for edges 
                //[[SimpleAudioEngine sharedEngine] playEffect:@"hit.caf"];
                velocity.y *= -1;
            }      
        }    
    }
} 
```

我需要知道如何将其更改为检查球 rect/boundingbox 是否与具有属性中断的任何瓷砖 rects/boundingboxex 相交（以及如何首先获得瓷砖 rect/boundingbox）。PS 我正在使用平铺地图编辑器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:25:54.873

前一阵子想通了这个：

```
 CCSprite *tile;
    for (int i = 0; i < level.contentSize.width/level.tileSize.width; i ++)
        for (int j = 0; j < level.contentSize.height/level.tileSize.height; j ++){
            tile = [levelLayer tileAt:ccp(i,j)];
            if (CGRectIntersectsRect(ball.boundingBox, tile.boundingBox)) {
                //Do whatever...
            }
        }
    } 
```

我建议有一个碰撞层以使地图制作更容易。

# javascript - jQuery 事件关闭太快

> ID：11562120
> 
> 赞同：0
> 
> 时间：2012-07-19T13:38:16.943
> 
> 标签：javascript, jquery, ajax, web

以下是我的 jQuery 代码：

```
$("#remove").click(function(e) {
    $.confirm({
        'title': 'Delete Confirmation',
        'message': 'You are about to delete this item. <br />It cannot be restored at a later time! Continue?',
        'buttons': {
            'Yes': {
                'class': 'blue',
                'action': function() {
                    $.ajax({
                        'url': "../api/removeHost.php?id=" + $("#id").val(),
                        'success': function(d) {
                            var json = JSON.parse(d);
                            //Display error text
                            if (json[0] == 0) {
                                createMessageDialog("General Error", json[1][1]);
                                //If all is successful reload the listServersBody to reflect the new changes and create the success popup
                            } else {
                                $("#listBody").load(lastPopulateAPICall); //Refresh the search\browse list with the new edits/
                                enableAdd();
                                createMessageDialog("Success", "Successfully removed!");
                            }
                        }
                    });
                }
            },
            'No': {
                'class': 'gray',
                'action': function() {} // Nothing to do in this case. You can as well omit the action property.
            }
        }
    });
});....

function createMessageDialog(title, message) {
    $.confirm({
        'title': title,
        'message': message,
        'buttons': {
            'Ok': {
                'class': 'blue',
                'action': function() {
                    alert('dd');
                }
            },
            'No': {
                'class': 'gray',
                'action': function() {} // Nothing to do in this case. You can as well omit the action property.
            }
        }
    });
} 
```

正在调用 createMessageDialog() 函数，因为正在触发我删除的调试警报。就好像在第一个关闭之前盒子没有足够的时间显示一样。我什至将第一个确认对话框复制到 createMessageDialog 函数中，但无济于事。我正在使用以下确认插件[http://tutorialzine.com/2010/12/better-confirm-box-jquery-css3/](http://tutorialzine.com/2010/12/better-confirm-box-jquery-css3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:41:37.417

您单击的默认操作可能是刷新页面。

```
$("#remove").click(function(e) {
    e.preventDefault(); // cancel the click
    ... 
```

# iphone - MPMediaItem | 受 iCloud 或 DRM 保护

> ID：11562121
> 
> 赞同：6
> 
> 时间：2012-07-19T13:38:18.760
> 
> 标签：iphone, xcode, icloud, mpmediaitem

有什么方法可以检查从 iPhone 音乐库中获取的 mediaItem 是否代表 iCloud 项目？

我知道媒体项目的 MPMediaItemPropertyAssetURL 属性对于受 DRM 保护的媒体和 iCloud 项目都是 nil，但我不知道如何确定该项目是受 DRM 保护还是在云上可用。

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T22:32:23.367

从 iOS 6 开始，您可以使用以下属性检查项目是否在 iCloud 中`MPMediaItemPropertyIsCloudItem`

[https://developer.apple.com/documentation/mediaplayer/mpmediaitempropertyisclouditem?language=objc](https://developer.apple.com/documentation/mediaplayer/mpmediaitempropertyisclouditem?language=objc)

从 iOS 9.2 开始，您可以检查`MPMediaItemPropertyHasProtectedAsset`DRM。[https://developer.apple.com/documentation/mediaplayer/mpmediaitempropertyhasprotectedasset?language=objc](https://developer.apple.com/documentation/mediaplayer/mpmediaitempropertyhasprotectedasset?language=objc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T19:33:34.150

我不能绝对肯定地说这是最好的方法，但在我的应用程序中，我只是测试 MPMediaItem 的`MPMediaItemPropertyAssetURL`属性，看看它是否为零：

```
if ([(MPMediaItem*)item valueForProperty:MPMediaItemPropertyAssetURL] == nil) {
  // it's in the cloud
} 
```

# jquery - 如何使用 jQuery Datatables fnServerData 处理 HTTP 403

> ID：11562123
> 
> 赞同：5
> 
> 时间：2012-07-19T13:38:38.260
> 
> 标签：jquery, datatables

我正在为 ajax 调用的会话超时生成一个 http 403。使用 jquery Datatables 时，我可以`fnServeData`像这样拦截返回的调用

```
"fnServerData": function ( sSource, aoData, fnCallback ) {
    $.getJSON( sSource, aoData, function (json) { 
            fnCallback(json);
        });
    } 
```

这通常只是将结果转发到数据表上 - 但是当我返回 403 时，我只是在我的 Firebug 控制台中收到 http 错误 - 我如何/在哪里检查 403 以便我可以显示一个对话框？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T14:27:57.173

After a bit more digging - one solution is to add an error handler like this:

```
"fnServerData": function ( sSource, aoData, fnCallback ) {
    $.getJSON( sSource, aoData, function (json) { 
            fnCallback(json);
        });
    }.error(function(jqXHR, statusText, errorThrown) { 
    console.log(jqXHR.status);//403 etc.
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-29T19:23:09.760

接近空白的答案，但我的看起来像这样：

```
"sServerMethod"   : "POST",
"fnServerData": function (sSource, aoData, fnCallback) {
               $.getJSON(sSource, aoData, function (json) {
                    fnCallback(json);
                }).done(function(){

                }).fail(function handleError(jqXHR, statusText, errorThrown) {
                    alert("The page cannot load.  Refresh your browser or if this problem persists, contact support.");
                    sendError(jqXHR,statusText,errorThrown);

            });
        }

function sendError(jqXHR, statusText, errorThrown){
        jqXHR = JSON.stringify(jqXHR) || '';
        statusText = statusText || '';
        errorThrown = errorThrown || '';

        var data = new FormData();
        data.append('jqXHR', jqXHR);
        data.append('statusText', statusText);
        data.append('errorThrown', errorThrown);
        var file = window.location.href;
        data.append('file', file); 

        var xhr = new XMLHttpRequest();
        xhr.open('POST', 'createLog.php', true);
        xhr.onload = function () {
            // test if you want to know when errors are actually thrown.

        };
        xhr.send(data);

    } 
```

createLog.php 文件如下所示：

```
 <?php

    if(!function_exists('convertAlphaNumWithSpace')){
        function convertAlphaNumWithSpace($value) {
          if( !isset($value) || is_null($value) ){
            return false;
          }

          $value = trim($value);
          if (ctype_alnum($value)) {
            return $value;
          }
          $value = preg_replace("/[^'\"a-zA-Z0-9_. ]/", '', $value);
          return $value;

        }
    }
    if(!function_exists('filledAndSet')){
        function filledAndSet($postVar){

            if(is_null($postVar)){
                return false;
            } 

            if(!is_array($postVar)){
                $postVar = trim($postVar);

                if(is_bool($postVar)){
                   return true;
                }   

                if(is_int($postVar)){
                return true;
                }

                if(isset($postVar) && !empty($postVar)){
                    return true;
                } 
                return false;
            }/* End basic bool, int, string check.  Although false will return as false, unsurprisingly. */

            if(is_array($postVar)){
                foreach($postVar as $key => $value) {
                    $$key = trim($value);
                    if(empty($$key)){
                        return false;
                    }/* We already know that the array is set, or it would never pass isarray */
                }return true; /* If the array is set and not empty, return true. */

                }
        }/* End filled and set. */
    }

    filledAndSet($_POST['jqXHR']) ? $mainLog = convertAlphaNumWithSpace($_POST['jqXHR']) : $mainLog = null;
    filledAndSet($_POST['statusText']) ? $statusText = convertAlphaNumWithSpace($_POST['statusText']) : $statusText = null;
    filledAndSet($_POST['errorThrown']) ? $errorThrown = convertAlphaNumWithSpace($_POST['errorThrown']) : $errorThrown = null;
    filledAndSet($_POST['file']) ? $file = $_POST['file'] : $file = null;
    if(!is_null($mainLog)){
        $thisDate = date("F j, Y, g:i a");  
        $prettyPrint = "$mainLog  \r\n $statusText \r\n $errorThrown \r\n $file \r\n $thisDate \r\n\r\n"; 
        $logFile = __DIR__ . DIRECTORY_SEPARATOR . 'json.log';
        if(!file_exists($logFile)){
            touch($logFile);
            chmod($logFile, 0777);
        }
        file_put_contents($logFile, $prettyPrint, FILE_APPEND);

    }
    ?> 
```

# c++ - 对动态大小的对象进行排序

> ID：11562124
> 
> 赞同：12
> 
> 时间：2012-07-19T13:38:39.863
> 
> 标签：c++, sorting, stl, g++, stl-algorithm

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T16:23:16.710

最实用的解决方案是使用`qsort`您提到的 C 风格。

```
template <unsigned S>
struct my_obj {
    enum { SIZE = S; };
    const void *p_;
    my_obj (const void *p) : p_(p) {}
    //...accessors to get data from pointer
    static int c_style_compare (const void *a, const void *b) {
        my_obj aa(a);
        my_obj bb(b);
        return (aa < bb) ? -1 : (bb < aa);
    }
};

template <unsigned N, typename OBJ>
void my_sort (const char (&large_array)[N], const OBJ &) {
    qsort(large_array, N/OBJ::SIZE, OBJ::SIZE, OBJ::c_style_compare);
} 
```

（或者，`qsort_r`如果您愿意，也可以调用。）由于 STL`sort`内联比较调用，您可能无法获得最快的排序。如果您的系统所做的只是排序，那么添加代码以使自定义迭代器工作可能是值得的。但是，如果您的系统大部分时间都在做排序以外的事情，那么您获得的额外收益可能只是整个系统的噪音。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T16:33:55.270

鉴于巨大的大小（4GB），我会认真考虑动态代码生成。将自定义排序编译到共享库中，并动态加载它。唯一的非内联调用应该是对库的调用。

使用预编译的头文件，编译时间实际上可能并没有那么糟糕。整个`<algorithm>`标题不会改变，你的包装逻辑也不会改变。您只需要每次重新编译一个谓词。而且由于它是您获得的单个功能，因此链接是微不足道的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T13:57:12.320

如果您可以将对象叠加到缓冲区上，那么您可以使用`std::sort`，只要您的叠加类型是可复制的。（在本例中，4 个 64 位整数）。使用 4GB*数据*，您将需要大量内存。

正如评论中所讨论的，您可以根据一些固定大小的模板选择可能的大小。您必须在运行时从这些类型中进行选择（`switch`例如，使用语句）。这是一个具有各种大小的模板类型的示例以及对 64 位大小进行排序的示例。

这是一个简单的例子：

```
#include <vector>
#include <algorithm>
#include <iostream>
#include <ctime>

template <int WIDTH>
struct variable_width
{
   unsigned char w_[WIDTH];
};

typedef variable_width<8> vw8;
typedef variable_width<16> vw16;
typedef variable_width<32> vw32;
typedef variable_width<64> vw64;
typedef variable_width<128> vw128;
typedef variable_width<256> vw256;
typedef variable_width<512> vw512;
typedef variable_width<1024> vw1024;

bool operator<(const vw64& l, const vw64& r)
{
   const __int64* l64 = reinterpret_cast<const __int64*>(l.w_);
   const __int64* r64 = reinterpret_cast<const __int64*>(r.w_);

   return *l64 < *r64;
}

std::ostream& operator<<(std::ostream& out, const vw64& w)
{
   const __int64* w64 = reinterpret_cast<const __int64*>(w.w_);
   std::cout << *w64;
   return out;
}

int main()
{
   srand(time(NULL));
   std::vector<unsigned char> buffer(10 * sizeof(vw64));
   vw64* w64_arr = reinterpret_cast<vw64*>(&buffer[0]);

   for(int x = 0; x < 10; ++x)
   {
      (*(__int64*)w64_arr[x].w_) = rand();
   }

   std::sort(
      w64_arr,
      w64_arr + 10);

   for(int x = 0; x < 10; ++x)
   {
      std::cout << w64_arr[x] << '\n';
   }

   std::cout << std::endl;

   return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T14:20:10.930

我同意`std::sort`使用自定义迭代器、引用和值类型；最好尽可能使用标准机械。

您担心内存分配，但现代内存分配器在分配小块内存方面非常有效，尤其是在重复使用时。你也可以考虑使用你自己的（有状态的）分配器，从一个小池中分发长度为*s 的块。*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-19T18:18:51.673

由于只有 31 种不同的对象变体（1 到 32 个字节），您可以轻松地为每个变体创建对象类型，并`std::sort`根据 switch 语句选择调用。每个调用都将内联并高度优化。

某些对象大小可能需要自定义迭代器，因为编译器会坚持填充本机对象以对齐地址边界。在其他情况下，指针可以用作迭代器，因为指针具有迭代器的所有属性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T15:12:04.983

```
#define OBJECT_SIZE 32
struct structObject
{
    unsigned char* pObject;
    bool operator < (const structObject &n) const
    {
        for(int i=0; i<OBJECT_SIZE; i++)
        {
            if(*(pObject + i) != *(n.pObject + i))
                return (*(pObject + i) < *(n.pObject + i));
        }

        return false;       
    }
};

int _tmain(int argc, _TCHAR* argv[])
{       
    std::vector<structObject> vObjects;
    unsigned char* pObjects = (unsigned char*)malloc(10 * OBJECT_SIZE); // 10 Objects

    for(int i=0; i<10; i++)
    {
        structObject stObject;
        stObject.pObject = pObjects + (i*OBJECT_SIZE);      
        *stObject.pObject = 'A' + 9 - i; // Add a value to the start to check the sort
        vObjects.push_back(stObject);
    }

    std::sort(vObjects.begin(), vObjects.end());

    free(pObjects); 
```

跳过#define

```
struct structObject
{
    unsigned char* pObject; 
};

struct structObjectComparerAscending 
{
    int iSize;

    structObjectComparerAscending(int _iSize)
    {
        iSize = _iSize;
    }

    bool operator ()(structObject &stLeft, structObject &stRight)
    { 
        for(int i=0; i<iSize; i++)
        {
            if(*(stLeft.pObject + i) != *(stRight.pObject + i))
                return (*(stLeft.pObject + i) < *(stRight.pObject + i));
        }

        return false;       
    }
};

int _tmain(int argc, _TCHAR* argv[])
{   
    int iObjectSize = 32; // Read it from somewhere

    std::vector<structObject> vObjects;
    unsigned char* pObjects = (unsigned char*)malloc(10 * iObjectSize);

    for(int i=0; i<10; i++)
    {
        structObject stObject;
        stObject.pObject = pObjects + (i*iObjectSize);      
        *stObject.pObject = 'A' + 9 - i; // Add a value to the start to work with something...  
        vObjects.push_back(stObject);
    }

    std::sort(vObjects.begin(), vObjects.end(), structObjectComparerAscending(iObjectSize));

    free(pObjects); 
```

# sql - 总和（案例结果不正确

> ID：11562126
> 
> 赞同：0
> 
> 时间：2012-07-19T13:38:43.457
> 
> 标签：sql, sum, case

我有一个联系人表，其中包括每个联系人在附近居住的时间长度：

```
 ID    First_Name   Last_Name    Neighborhood_Time
 1      John         Smith        1-2 years
 2      Mary         Jones        2-5 years
 3      Dennis       White        2-5 years
 4      Martha       Olson        5+ years
 5      Jeff         Black        5+ years
 6      Jean         Rogers       2-5 years 
```

我想显示时间百分比，结果如下所示：

```
 One_to_2_Years   Two_to_5_Years       5+_Years
      16                50                 33 
```

这就是我正在使用的：

```
 select 
 sum(case when Neighborhoods_time ='1-2 years' then 1 else 0 end)*100/(select count(*) from contact) as One_to_2_Years,    
 sum(case when Neighborhoods_time ='2-5 years' then 1 else 0 end)*100/(select count(*) from contact) as Two_to_6_Years,
 sum(case when Neighborhoods_time ='5+years' then 1 else 0 end)*100/(select count(*) from contact) as Six_to_10_Years
  from dbo.contact 
```

这是我的结果：

```
 One_to_2_Years   Two_to_5_Years       5+_Years
        0               0                  16
        16              33                 0
        0               16                 16 
```

我看到每列下的数字都是正确的，我在求和它们时遇到了问题。

我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:41:52.237

按 Neighborhoods_time 添加组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:23:50.377

您的查询的基础可以像

```
select 
    Neighborhood_Time,
    100*COUNT(*)/(Select COUNT(*) from contact) as percentvalue
from 
    contact
group by 
    Neighborhood_Time 
```

如果要水平排列，则应使用枢轴

```
select
*
from
(
select 
    Neighborhood_Time,
    100*COUNT(*)/(Select COUNT(*) from contact) as percentvalue
from 
    contact
group by 
    Neighborhood_Time
) src
PIVOT
( SUM(percentvalue) for Neighborhood_Time in ([1-2 years],[2-5 years],[5+ years])) as pt 
```

# servicestack - 使用 servicestack ormlite 将存储过程运行到自己的模型中

> ID：11562131
> 
> 赞同：7
> 
> 时间：2012-07-19T13:38:52.877
> 
> 标签：servicestack

有没有使用 ormlite 在 serviceStack MVC 上运行存储过程的示例？神话？看到这段代码：

```
var results = new List<EnergyCompare>
                    {dbFactory.Exec(dbCmd =>
                       {
                          dbCmd.CommandType = CommandType.StoredProcedure;
                          dbCmd.Parameters.Add(new SqlParameter("@id", 1));
                          dbCmd.CommandText = "GetAuthorById";
                          return dbCmd.ExecuteReader().ConvertTo<EnergyCompare>();
                       }
                    )}; 
```

但附带了从未在谷歌群组工作过的文字！

我也可以这样写：

```
using(var db = new SwitchWizardDb())
            {
             var results2 = db.dbCmd.ExecuteProcedure()   
            } 
```

但不确定如何使用参数完成此操作，并且在我查看的源代码中，它说已过时？

谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-27T23:56:51.683

看起来 ServiceStack.ORMLite 已经更新以使这更容易：

```
List<Poco> results = db.SqlList<Poco>("EXEC GetAnalyticsForWeek 1");
List<Poco> results = db.SqlList<Poco>("EXEC GetAnalyticsForWeek @weekNo", new { weekNo = 1 });

List<int> results = db.SqlList<int>("EXEC GetTotalsForWeek 1");
List<int> results = db.SqlList<int>("EXEC GetTotalsForWeek @weekNo", new { weekNo = 1 }); 
```

这个例子[在 github repo 的首页](https://github.com/ServiceStack/ServiceStack.OrmLite#new-apis-to-execute-custom-sql)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T07:49:11.253

好吧，我认为最好滚动我自己的处理程序，所以创建了这个，任何想法都会受到欢迎，特别是我如何在某种 func 或其他东西中传递参数：

我有一个主类来处理对我的连接对象的轻松访问：

```
public class DatabaseNameSp : IDisposable
{
    private readonly SqlConnection _spConn = new SqlConnection(DatabaseNameSp .dbConString);
    public readonly SqlCommand SpCmd;

    public DatabaseNameSp (string procedureName)
    {
       _spConn.Open();

        SpCmd = new SqlCommand
                    {
                        Connection = _spConn,
                        CommandType = CommandType.StoredProcedure,
                        CommandText = procedureName
                    };
    }

    public void Dispose()
    {
         _spConn.Close();
         SpCmd.Dispose();
    }
} 
```

用法：

```
using (var db = new DatabaseNameSp ("procedurenname"))
            {
                db.SpCmd.Parameters.Add(new SqlParameter("@Id", 1));

                var rdr = db.SpCmd.ExecuteReader(CommandBehavior.CloseConnection);

                var results = new List<CustomDTO>();
                while (rdr.Read())
                {
                    results.Add(new CustomDTO { Name = rdr["name"].ToString(), Id = rdr["id"].ToString() });
                }
                return new CustomDTOResponse { Results = results };
            } 
```

有什么想法吗 ！

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T18:14:37.483

这是一个使用 ormLite 运行存储过程的示例，可能会对您有所帮助：

```
IList<MyDTO> myList = DbFactory.Run(dbCnx =>
{
 using (var dbCmd = dbCnx.CreateCommand())
 {
      dbCmd.CommandType = CommandType.StoredProcedure;
      dbCmd.CommandText = "mySchema.myStoredProc";
      dbCmd.Parameters.Add(new SqlParameter("@param1", val1));
      dbCmd.Parameters.Add(new SqlParameter("@param2", val2));

      var r = dbCmd.ExecuteReader();
      return r.ConvertToList<MyDTO>();
  }
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T11:36:45.983

只是简单地运行一个不返回数据的存储过程：

```
 public class ComsManager : Dbase
 {   
    private IDbConnection dbConn;

    public ComsManager()
    {
        dbConn = Dbase.GetConnection();
    }

    public void Housekeeping()
    {
        using(var dbCmd = dbConn.CreateCommand())
            dbConn.Exec(res => { dbCmd.CommandType = CommandType.StoredProcedure; dbCmd.CommandText = "SP_housekeeping"; dbCmd.ExecuteNonQuery(); });
    } 
```

# opengl - OpenGL 透视图

> ID：11562135
> 
> 赞同：3
> 
> 时间：2012-07-19T13:39:06.397
> 
> 标签：opengl, 3d, projection

我正在尝试使用透视投影来描绘一个立方体，但我得到的只是正方形的一角。正方形的面设置在原点并沿正方向扩展。使用 glOrtho 我可以设置坐标系，但我在使用 glPerspective 做同样的事情时遇到了麻烦。

```
#include <gl/glut.h>

void mesh(void) {
float v[8][3] = { /* Vertices for 8 corners of a cube. */
{0.0, 0.0, 0.0}, {100.0, 0.0, 0.0}, {100.0, 100.0, 0.0}, {0.0, 100.0, 0.0},
{0.0, 0.0, -100.0}, {100.0, 0.0, -100.0}, {100.0, 100.0, -100.0}, {0.0, 100.0, -100.0} };
float n[6][3] = { /* Normals for the 6 faces of a cube. */
{0.0, 0.0, 1.0}, {1.0, 0.0, 0.0}, {0.0, 1.0, 0.0},
{-1.0, 0.0, 0.0}, {0.0, -1.0, 0.0}, {0.0, 0.0, -1.0} };
int f[6][4] = { /* Indexes of the vertices in v that make the 6 faces of a cube. */
{0, 1, 2, 3}, {1, 5, 6, 2}, {3, 2, 6, 7}, 
{0, 4, 7, 3}, {0, 1, 5, 4}, {4, 5, 6, 7} };

for (int j = 0; j < 6; j++) {
    glBegin(GL_QUADS);
    glNormal3fv(&n[j][0]);
    glVertex3fv(&v[f[j][0]][0]);
    glVertex3fv(&v[f[j][1]][0]);
    glVertex3fv(&v[f[j][2]][0]);
    glVertex3fv(&v[f[j][3]][0]);
    glEnd();
    glFlush();
}
}

void display(void) {
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glColor3f(1.0, 0.0, 0.0);
mesh();
}

void main(int argc, char** argv) {
glutInit(&argc, argv);
glutInitDisplayMode(GLUT_RGB |GLUT_DEPTH |GLUT_SINGLE);
glutInitWindowSize(400, 300);
glutInitWindowPosition(200, 200);
glutCreateWindow("Mesh");
glClearColor(0.0, 0.0, 0.0, 1.0);
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
//glRotatef(15, 0.0, 0.0, 1.0);
//glOrtho(-400.0, 400.0, -300.0, 300.0, 200.0, -200.0);
gluPerspective(120,1,0,600);
glEnable(GL_DEPTH_TEST);
glEnable(GL_NORMALIZE);
glutDisplayFunc(display);
glutMainLoop();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T14:19:14.713

你说你只看到立方体的角落？那么你**的视野**太宽了..你正在使用 gluPerspective() 并提供你的计算是正确的..这些值有点偏离 imo，函数参数是：

```
void gluPerspective(GLdouble fovy,
                    GLdouble aspect_ratio,
                    GLdouble zNear,
                    GLdouble zFar); 
```

我建议将其更改为类似

```
gluPerspective(45.0f,
               width_of_window / height_of_window,    //aspect ratio
               0.1f, 
               500.0f); 
```

# android - 通过设置椭圆大小在画布上绘制时无法截断 TextView

> ID：11562142
> 
> 赞同：2
> 
> 时间：2012-07-19T13:39:24.633
> 
> 标签：android, android-layout, canvas

在 Canvas 上绘制 Textview 时出现问题。我希望文本将被截断将超载高度。我设置`textView.setEllipsize(TextUtils.TruncateAt.MIDDLE)`了，但它对我不起作用。

那是我的代码

```
 if(mBitmapNormalImage != null)
            mBitmapNormalImage.recycle();
        mBitmapNormalImage = BitmapFactory.decodeResource(getResources(), bgImageIds[position]);

    if(bmOverlayNormalImage != null)
        bmOverlayNormalImage.recycle();
    bmOverlayNormalImage = Bitmap.createBitmap(mBitmapNormalImage.getWidth(), mBitmapNormalImage.getHeight(),
        Bitmap.Config.ARGB_8888);

    canvasNormalImage = new Canvas(bmOverlayNormalImage);
    canvasNormalImage.drawBitmap(mBitmapNormalImage, 0, 0, null);

    coordTopLeftX = coordinateValues[position][0]*canvasNormalImage.getWidth()/320 ;
    coordTopLeftY = coordinateValues[position][1]*canvasNormalImage.getHeight()/320;
    RectWidth = coordinateValues[position][2]*canvasNormalImage.getWidth()/320;
    RectHeight = coordinateValues[position][3]*canvasNormalImage.getHeight()/320;

    LinearLayout layout = new LinearLayout(this);
    layout.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

    TextView textView = new TextView(layout.getContext());
    textView.setVisibility(View.VISIBLE);
    textView.setGravity(Gravity.CENTER);    
    textView.setEllipsize(TextUtils.TruncateAt.MIDDLE);

    LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
    LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT,1f);

    params.gravity=Gravity.CENTER;

    textView.setLayoutParams(params);
 textView.setTypeface(Typeface.createFromAsset(getAssets(),"fonts/"+fonts[position]));
        textView.setText(message);
        textView.setTextColor(Color.argb(colorValue[position][0],colorValue[position][1], colorValue[position][2], colorValue[position][3]));
        textView.setTextSize(TextSize.listSize[position]+15);

    layout.addView(textView);

    layout.measure(MeasureSpec.makeMeasureSpec((int)RectWidth, MeasureSpec.EXACTLY), MeasureSpec.makeMeasureSpec((int)RectHeight, MeasureSpec.EXACTLY));
    layout.layout(0, 0, (int)RectWidth, (int)RectHeight);

    // To place the text view somewhere specific:
    canvasNormalImage.translate(coordTopLeftX, coordTopLeftY);

    layout.draw(canvasNormalImage);

    // set the bitmap into the ImageView
    bgImage.setBackgroundDrawable(new BitmapDrawable(getResources(),bmOverlayNormalImage)); 
```

# jquery - jQuery ListBox 单个 或多个选定项

> ID：11562143
> 
> 赞同：2
> 
> 时间：2012-07-19T13:39:36.793
> 
> 标签：jquery

我有一个 ASP.NET 列表框，并且在更改时我需要在（单个或多个）警报中显示（单个或多个）选定文本。警报的数量应等于所选项目的数量。我尝试了以下代码，其中我收到了一个额外的警报，显示 ListBox 中的第一项。我哪里做错了？

```
<asp:ListBox ID="ListBox1" runat="server" Width="100px"
    SelectionMode="Multiple">
    <asp:ListItem Selected="True" Value="1">White</asp:ListItem>
    <asp:ListItem Selected="False" Value="2"> Silver </asp:ListItem>
    <asp:ListItem Value="3"> Dark Gray </asp:ListItem>
    <asp:ListItem Value="4"> Khaki </asp:ListItem>
    <asp:ListItem Value="5"> Dark Khaki </asp:ListItem>
</asp:ListBox>

$(document).ready(function () {
    $("#ListBox1 ").change(function () {
        $("option").each(function () { 
            if (this.selected) {
                alert(this.text);
            }
        });
    });
}); 
```

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:41:56.937

我认为正在发生的事情是您的 asp 代码在 HTML 中呈现列表项：

```
...
<option value="1" selected="true">
<option value="2" selected="false">
... 
```

由于属性“selected”在这两种情况下都存在，如果属性设置为 true 或 false，检查 this.selected 将返回 true，因为“selected”以任何一种方式都存在。

实现相同目标的更简单方法是替换它：

```
$("#ListBox1 ").change(function () {
    $("option").each(function () { 
        if (this.selected) {
            alert(this.text);
        }
    });
}); 
```

有了这个：

```
$('#ListBox1').find('option:selected').map(function () {
  alert.log($(this).text());
}); 
```

# ruby-on-rails - capistrano 错误

> ID：11562147
> 
> 赞同：4
> 
> 时间：2012-07-19T13:39:51.127
> 
> 标签：ruby-on-rails, ruby, capistrano

执行后

```
cap deploy:setup 
```

我收到这个错误

```
failed: "sh -c 'sudo -p '\\''sudo password: '\\'' mkdir -p /u/apps/blog /u/apps/blog/releases /u/apps/blog/shared /u/apps/blog/shared/system /u/apps/blog/shared/log /u/apps/blog/shared/pids'" on foobar.com 
```

这是我的 deploy.rb 的内容

```
require 'capistrano'

    # Account Settings
    set :user, "user"
    set :password, "pass"
    set :domain, "foobar.com"
    set :mount_path, "/"
    set :application, "blog"

    set :repository, "/Users/me/Desktop/project"
    set :local_repository, "/Users/me/Desktop/project"
    set :scm, :git
    set :deploy_via, :copy

    role :app, 'foobar.com'
role :web, 'foobar.com' 
```

可能是什么问题呢 ？

//编辑

```
*** [err :: foobar.com] stdin: is not a tty
*** [err :: foobar.com] sudo:
*** [err :: foobar.com] can't mkdir /var/db/sudo: No such file or directory
*** [err :: foobar.com] sudo:
*** [err :: foobar.com] no tty present and no askpass program specified
failed: "sh -c 'sudo -p '\\''sudo password: '\\'' mkdir -p /u/apps/blog /u/apps/blog/releases /u/apps/blog/shared /u/apps/blog/shared/system /u/apps/blog/shared/log /u/apps/blog/shared/pids'" on foobar.com 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-19T14:14:25.030

将此行添加到您的`deploy.rb`（例如之后`set :application, "blog"`）

```
default_run_options[:pty] = true 
```

现在运行：

```
cap -v deploy:setup 
```

* * *

如果您没有 sudo 权限，请将此行添加到`deploy.rb`：

```
set :use_sudo, false 
```

`/u/apps/blog`您必须具有创建目录或更改部署文件夹的权限：

```
set :deploy_to, "/home/user_name/apps/blog" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-14T13:38:01.080

```
# Default value for :pty is false
set :pty, true 
```

# ios - hls aes加密视频在ios上的EXT-X-DISCONTINUITY标签后不播放

> ID：11562150
> 
> 赞同：2
> 
> 时间：2012-07-19T13:39:55.257
> 
> 标签：ios, ios5, http-live-streaming

看起来 ios 不喜欢将加密的 .ts 文件与 EXT-X-DISCONTINUITY 标签混合的 hls m3u8 文件。

这是一个测试播放列表，它是两个视频的混合。未加密的前贴片广告和主要加密视频。两者都可以分开播放，但是当我将它们放在一个 m3u8 中，由 EXT-X-DISCONTINUITY 分隔时，只播放预卷然后播放器停止。

```
#EXTM3U
#EXT-X-TARGETDURATION:10
#EXTINF:10,     
http://ixemes-ppweb.ixemes.com/prerollmain/vig_400-0.ts
#EXTINF:10,
http://ixemes-ppweb.ixemes.com/prerollmain/vig_400-1.ts
#EXT-X-DISCONTINUITY
#EXTINF:10,
#EXT-X-KEY:METHOD=AES-128,URI="http://ixemes-ppweb.ixemes.com/prerollmain/113760.key"
http://ixemes-ppweb.ixemes.com/prerollmain/02-0.ts
#EXTINF:10,     
http://ixemes-ppweb.ixemes.com/prerollmain/02-1.ts
#EXTINF:10,     
http://ixemes-ppweb.ixemes.com/prerollmain/02-2.ts
#EXTINF:10,     
http://ixemes-ppweb.ixemes.com/prerollmain/02-3.ts
#EXTINF:10,     
http://ixemes-ppweb.ixemes.com/prerollmain/02-4.ts
#EXTINF:10,     
http://ixemes-ppweb.ixemes.com/prerollmain/02-5.ts
#EXTINF:10,     
http://ixemes-ppweb.ixemes.com/prerollmain/02-6.ts
#EXTINF:10,     
http://ixemes-ppweb.ixemes.com/prerollmain/02-7.ts
#EXTINF:10,     
http://ixemes-ppweb.ixemes.com/prerollmain/02-8.ts
#EXTINF:10,     
http://ixemes-ppweb.ixemes.com/prerollmain/02-9.ts
#EXTINF:10,     
http://ixemes-ppweb.ixemes.com/prerollmain/02-10.ts
#EXTINF:10,     
http://ixemes-ppweb.ixemes.com/prerollmain/02-11.ts
#EXTINF:2,      
http://ixemes-ppweb.ixemes.com/prerollmain/02-12.ts
#EXT-X-ENDLIST 
```

我尝试了两个未加密的视频，它可以工作。而且我在 HLS 规范中没有看到任何内容表明禁止在加密视频中使用 EXT-X-DISCONTINUITY 标签：[https ://datatracker.ietf.org/doc/html/draft-pantos-http-live-streaming-08 #section-6.3.3](https://datatracker.ietf.org/doc/html/draft-pantos-http-live-streaming-08#section-6.3.3)

所以我猜这是苹果自己的规范的实现是错误的，但也许是我做错了。

我制作了一个快速的 html 页面来测试它（在任何 ios5 设备上的 safari 中打开它）：http: [//ixemes-ppweb.ixemes.com/prerollmain/index.html](http://ixemes-ppweb.ixemes.com/prerollmain/index.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-14T01:11:44.627

我注意到您的 EXT-X-KEY 没有 IV 项，即初始化向量。标准支持这一点，例如：

```
#EXT-X-KEY:METHOD=AES-128,URI="https://priv.example.com/key.php?r=52",IV=0x9c7db8778570d05c3177c349fd9236aa 
```

如果缺少，以下是[https://developer.apple.com/library/ios/technotes/tn2288/_index.html](https://developer.apple.com/library/ios/technotes/tn2288/_index.html)说玩家应该选择 IV：

> 媒体加密的默认初始化向量（如果未指定）是媒体文件的序列号。您应该指定一个初始化向量值，而不是依赖于序列号。主要原因是便携性。例如，如果您更改片段在播放列表中的显示位置（例如插入广告），则会更改其序列号，需要重新加密。

在我的团队中，我们无法弄清楚为什么带有插入广告的加密内容无法播放。我们有一个播放的加密内容示例：

```
#EXTM3U
#EXT-X-VERSION:3
#EXT-X-MEDIA-SEQUENCE:1
#EXT-X-ALLOW-CACHE:NO
#EXT-X-TARGETDURATION:11
#EXT-X-KEY:METHOD=AES-128,URI="http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans.key"
#EXTINF:11,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-1.ts
#EXTINF:7,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-2.ts
#EXTINF:7,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-3.ts
#EXTINF:8,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-4.ts
#EXTINF:10,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-5.ts
#EXTINF:6,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-6.ts
#EXTINF:9,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-7.ts
#EXTINF:7,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-8.ts
#EXTINF:9,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-9.ts
#EXTINF:8,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-10.ts
#EXTINF:8,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-11.ts
#EXTINF:8,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-12.ts
#EXTINF:6,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-13.ts
#EXTINF:9,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-14.ts
#EXTINF:5,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-15.ts
#EXT-X-ENDLIST 
```

[你可以在http://demo.theplatform.com/dev/m3u8/encrypted.m3u8](http://demo.theplatform.com/dev/m3u8/encrypted.m3u8)试试这个。但是当我们在它之前插入内容时，就像这样，它没有播放：

```
#EXTM3U
#EXT-X-VERSION:3
#EXT-X-MEDIA-SEQUENCE:1
#EXT-X-ALLOW-CACHE:NO
#EXT-X-TARGETDURATION:11
#EXT-X-KEY:METHOD=NONE
#EXTINF:10.01,
http://ne.edgecastcdn.net/0008B0/mps/Inkola_VMS/20/687/15_WordIsOut_UPFW1764H_1080p_20802040_m3u8_video_480x0_400000_primary_audio_eng_2_x5e1c9dd7b9834f38a319d348e1a5f9ee_00001.ts
#EXTINF:5.088,
http://ne.edgecastcdn.net/0008B0/mps/Inkola_VMS/20/687/15_WordIsOut_UPFW1764H_1080p_20802040_m3u8_video_480x0_400000_primary_audio_eng_2_x5e1c9dd7b9834f38a319d348e1a5f9ee_00002.ts
#EXT-X-DISCONTINUITY
#EXT-X-KEY:METHOD=AES-128,URI="http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans.key"
#EXTINF:11,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-1.ts
#EXTINF:7,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-2.ts
#EXTINF:7,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-3.ts
#EXTINF:8,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-4.ts
#EXTINF:10,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-5.ts
#EXTINF:6,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-6.ts
#EXTINF:9,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-7.ts
#EXTINF:7,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-8.ts
#EXTINF:9,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-9.ts
#EXTINF:8,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-10.ts
#EXTINF:8,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-11.ts
#EXTINF:8,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-12.ts
#EXTINF:6,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-13.ts
#EXTINF:9,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-14.ts
#EXTINF:5,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-15.ts
#EXT-X-ENDLIST 
```

这个 URL 是[http://demo.theplatform.com/dev/m3u8/mix.m3u8](http://demo.theplatform.com/dev/m3u8/mix.m3u8)。我们发现问题是因为我们添加了两个段，媒体序列号现在减少了 2。如果您明确地将 IV 设置为“0x000000000000000000000000000000001”，如下所示：

```
#EXTM3U
#EXT-X-VERSION:3
#EXT-X-MEDIA-SEQUENCE:1
#EXT-X-ALLOW-CACHE:NO
#EXT-X-TARGETDURATION:11
#EXT-X-KEY:METHOD=NONE
#EXTINF:10.01,
http://ne.edgecastcdn.net/0008B0/mps/Inkola_VMS/20/687/15_WordIsOut_UPFW1764H_1080p_20802040_m3u8_video_480x0_400000_primary_audio_eng_2_x5e1c9dd7b9834f38a319d348e1a5f9ee_00001.ts
#EXTINF:5.088,
http://ne.edgecastcdn.net/0008B0/mps/Inkola_VMS/20/687/15_WordIsOut_UPFW1764H_1080p_20802040_m3u8_video_480x0_400000_primary_audio_eng_2_x5e1c9dd7b9834f38a319d348e1a5f9ee_00002.ts
#EXT-X-DISCONTINUITY
#EXT-X-KEY:METHOD=AES-128,URI="http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans.key",IV=0x00000000000000000000000000000001
#EXTINF:11,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-1.ts
#EXTINF:7,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-2.ts
#EXTINF:7,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-3.ts
#EXTINF:8,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-4.ts
#EXTINF:10,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-5.ts
#EXTINF:6,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-6.ts
#EXTINF:9,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-7.ts
#EXTINF:7,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-8.ts
#EXTINF:9,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-9.ts
#EXTINF:8,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-10.ts
#EXTINF:8,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-11.ts
#EXTINF:8,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-12.ts
#EXTINF:6,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-13.ts
#EXTINF:9,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-14.ts
#EXTINF:5,
http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes-audio=65000-video=2042000-15.ts
#EXT-X-ENDLIST 
```

然后它工作。你可以试试这个[http://demo.theplatform.com/dev/m3u8/mix_fixed.m3u8](http://demo.theplatform.com/dev/m3u8/mix_fixed.m3u8)。所以也许这就是你遇到的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:59:48.353

好的，看起来它与主视频的加密无关，而与主视频的编码方式有关。我无法控制主视频的编码方式。我只对自己的预卷视频进行编码（并分块）以进行测试。

如果我将预卷与相同的主视频混合但未加密，它也不起作用。如果我混合由同一个外部编码器编码的两个视频，加密（或不加密）它不起作用。不知道外部编码器的编码参数有什么问题，但是不连续标签不起作用。

但是，如果我对自己的两个视频（前卷和主视频）进行编码，加密主视频，并使用不连续性标签将它们放入单个 m3u8 文件中，它就可以工作。

所以 ios 处理不连续性标签的方式仍然存在问题，并且没有完全重置播放器参数，但至少可以在加密的前卷视频之前插入未加密的预卷视频。

# java - 应用程序在 Android 4.0 上崩溃，但不是 2.3 - 奇怪的异常

> ID：11562161
> 
> 赞同：1
> 
> 时间：2012-07-19T13:40:34.837
> 
> 标签：java, android, android-4.0-ice-cream-sandwich

我正在 2.3 上开发一个 android 游戏，并已开始在更多设备上进行测试，以便我可以发布它。

在某些（并非所有）4.0 设备上，我的游戏在最小化时会崩溃。您可以锁定手机并解锁它，游戏恢复和暂停都很好。当您尝试返回主屏幕时会发生崩溃。

错误日志如下所示：

```
07-18 14:33:44.839 E/AndroidRuntime(15542)FATAL EXCEPTION: Thread-662
07-18 14:33:44.839 E/AndroidRuntime(15542)java.lang.NullPointerException
07-18 14:33:44.839 E/AndroidRuntime(15542)at com.petronicarts.stormthecastle.MainThread.run(MainThread.java:55)
07-18 14:33:44.846 W/IInputConnectionWrapper(15542)showStatusIcon on inactive InputConnection
07-18 14:33:45.081 I/ActivityManager(178)No longer want com.android.packageinstaller (pid 15351): hidden #16
07-18 14:33:45.143 W/InputDispatcher(178)channel '41bb4d28 com.android.packageinstaller/com.android.packageinstaller.InstallAppProgress (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
07-18 14:33:45.143 E/InputDispatcher(178)channel '41bb4d28 com.android.packageinstaller/com.android.packageinstaller.InstallAppProgress (server)' ~ Channel is unrecoverably broken and will be disposed!
07-18 14:33:45.190 W/InputDispatcher(178)Attempted to unregister already unregistered input channel '41bb4d28 com.android.packageinstaller/com.android.packageinstaller.InstallAppProgress (server)'
07-18 14:33:45.190 I/WindowManager(178)WIN DEATH: Window{41bb4d28 com.android.packageinstaller/com.android.packageinstaller.InstallAppProgress paused=false}
07-18 14:33:45.198 I/WindowManager(178)WINDOW DIED Window{41bb4d28 com.android.packageinstaller/com.android.packageinstaller.InstallAppProgress paused=false}
07-18 14:33:47.268 D/dalvikvm(178)GC_EXPLICIT freed 338K, 20% free 22816K/28487K, paused 6ms+5ms
07-18 14:34:15.464 I/power   (178)*** set_screen_state 0
07-18 14:34:15.471 D/SurfaceFlinger(115)About to give-up screen, flinger = 0x1822918
07-18 14:34:15.596 D/NfcService(403)NFC-C OFF, disconnect 
```

我相信重要的一行是：

```
com.petronicarts.stormthecastle.MainThread.run(MainThread.java:55) 
```

查看第 55 行，它是这样的：

```
canvas.setMatrix(matrix); 
```

在我的运行线程中：

```
 @Override
public void run() 
{
    boolean ScaleGame = true;
    //boolean SkipFrame = false;
    Bitmap screen = Bitmap.createBitmap(960, 540, Config.RGB_565);
    Canvas canvas;
    Canvas canvas2 = new Canvas(screen);
    Paint paint = new Paint();
    Matrix matrix = new Matrix();
    matrix.preScale(gamePanel.getScaleX(), gamePanel.getScaleY());
    if (gamePanel.getScaleX() == 1 && gamePanel.getScaleY() == 1)
        ScaleGame = false;
    long startTime, elapsedTime;
    startTime = System.currentTimeMillis();
    elapsedTime = System.currentTimeMillis() - startTime;

    this.gamePanel.setScreenBitmap(screen);

    while (running) {
        if(!pleaseWait) {
            canvas = null;
            // try locking the canvas for exclusive pixel editing on the surface
            try {
                canvas = this.surfaceHolder.lockCanvas();
                if (ScaleGame)
                    canvas.setMatrix(matrix);
                synchronized (surfaceHolder) {
                    startTime = System.currentTimeMillis();
                    this.gamePanel.update((float)elapsedTime);

                    canvas.drawBitmap(screen, 0, 0, paint);
                    elapsedTime = System.currentTimeMillis() - startTime;

                }
            } finally {
                if (canvas != null) {
                    surfaceHolder.unlockCanvasAndPost(canvas);
                }
            }            
        }
        else {
            synchronized (this) {
                try {
                    wait();
                } catch (Exception e) { }
            }
        }
    }
} 
```

我不知道为什么我无法设置矩阵。看起来代码应该可以正常工作。我认为这意味着我正在以仅适用于 2.3 的方式处理某些事情。

我的暂停、恢复和销毁事件如下所示：

```
public void pause() {
    justPause = true;
    pauseGame = true;

    SharedPreferences fileStore = this.getContext().getSharedPreferences("userData", 0);
    SharedPreferences.Editor editor = fileStore.edit();
    editor.putInt("highscore", highscore);
    editor.commit();

    AudioService.StopMusic();

}

public void resume(Context context) {
    if (gameState == 1)
        AudioService.StartMusic();
    //gold += 1000;
}

public void destroy() {
    thread.setRunning(false);

    if (thread != null)
    {
        Thread killThread = thread;
        thread = null;
        killThread.interrupt();
    }   
} 
```

如果您有任何想法，他们将非常欢迎。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T14:18:06.140

我看到的一个问题是在调用“canvas = this.surfaceHolder.lockCanvas();”之后 您只在 finally 块中检查 null 。我会将其更改为如下所示：

```
if(!pleaseWait) {
    canvas = this.surfaceHolder.lockCanvas();

    if (canvas != null) {
        // try locking the canvas for exclusive pixel editing on the surface
        try {
            if (ScaleGame)
                canvas.setMatrix(matrix);
            synchronized (surfaceHolder) {
                startTime = System.currentTimeMillis();
                this.gamePanel.update((float)elapsedTime);
                canvas.drawBitmap(screen, 0, 0, paint);
                elapsedTime = System.currentTimeMillis() - startTime;
        }
        finally {
            surfaceHolder.unlockCanvasAndPost(canvas);
        }            
    }
} 
```

如果未设置画布矩阵（当 ScaleGame 为 false 时），我还会询问是否应该运行同步块。我对问题或 Canvas 没有足够的洞察力来回答这个问题。如果答案是否定的，那么同步块应该包含在 if 语句中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:54:05.590

您永远不应该锁定 UI 线程，因为它会阻塞 UI 线程并阻止用户与您的应用顺利交互。文档`lockCanvas`建议改为与单独的绘图线程同步：

> If null is not returned, `lockCanvas()` internally holds a lock until the corresponding `unlockCanvasAndPost(Canvas)` call, preventing `SurfaceView` from creating, destroying, or modifying the surface while it is being drawn. This can be more convenient than accessing the `Surface` directly, as you do not need to do special synchronization with a drawing thread in `Callback.surfaceDestroyed`.

Android 3.0+ introduced StrictMode checks to ensure developers didn't abuse the UI thread, so it is no surprise that your app works on Android 2.3, but not on Android 4.0.

# android - Android图库图片

> ID：11562162
> 
> 赞同：0
> 
> 时间：2012-07-19T13:40:38.353
> 
> 标签：android, android-gallery

[https://stackoverflow.com/a/2508138/1508448](https://stackoverflow.com/a/2508138/1508448)

请通过上面的链接。我的编译器在 REQ_CODE_PICK_IMAGE 中显示问题。它询问我是否需要创建一个变量。它是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:44:53.030

//你需要在你的类中创建一个变量

```
 public final static int REQ_CODE_PICK_IMAGE=1

switch(case)
case 1: //instead of hardcoding here you need to declare the variable as integer
break;
case 2;
 .
 . 
```

**编辑：**

当一个活动退出时，它可以调用 setResult(int) 将数据返回给它的父级。它必须始终提供结果代码，可以是标准结果 RESULT_CANCELED、RESULT_OK 或任何以 RESULT_FIRST_USER 开头的自定义值。此外，它还可以选择返回一个 Intent，其中包含它想要的任何附加数据。所有这些信息连同它最初提供的整数标识符一起出现在父级的 Activity.onActivityResult() 上。

# php - MYSQL PHP - 像 $float 一样获得浮点数

> ID：11562165
> 
> 赞同：0
> 
> 时间：2012-07-19T13:40:53.300
> 
> 标签：php, mysql, floating-point, where, sql-like

我想获得像我这样的浮动行`$float`。

我使用了这段代码：

```
$float = $_GET['float'];

$requst = mysql_fetch_array(mysql_query("SELECT * FROM floats WHERE float LIKE'$float.%%%%%%%'")); 
```

然后我用 while 呼应了所有行：

```
while ($r = $request) {

    echo $a['float'];

} 
```

但页面没有显示任何内容。（是的，我在地址栏中输入了表格`?float=34`中的浮点数`34.******`。）

问题是什么？

（PHP 5.2 版，MYSQL 5.0 版）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:44:20.497

试试这个

```
$requst = mysql_query("SELECT * FROM floats WHERE float LIKE'$float.%%%%%%%'");
while ($r = mysql_fetch_array($request)) {

    echo $r['float'];

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T13:47:05.273

怎么样`select * from floats where floor(float) = $floor;`？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T13:44:04.103

您的变量中已经有一个小数点。

`"SELECT * FROM floats WHERE float LIKE '$float%'"`

如果您的浮点数为 34.567，则您的语句执行为 find like '34.567.%' ，但未找到任何结果。

编辑：那这个怎么样？

`"SELECT * FROM floats WHERE abs(float-$float)<1;"`

那会在1内带来任何东西吗？

话虽如此，尽管您可以在 mysql 中保留浮点数，但将它们保留为小数点可能更安全，小数点后的点数有限。

# sql - SQL - 如何将子查询插入到查询中以检索唯一值

> ID：11562171
> 
> 赞同：0
> 
> 时间：2012-07-19T13:41:08.147
> 
> 标签：sql, reporting-services, subquery, reportbuilder3.0

我正在使用 Report Builder 3 编写报告，我需要一些关于 sql 查询的帮助来获取唯一值。

使用以下示例数据：

![在此处输入图像描述](../Images/3ec4d9b1744781450cff11b377f3f637.png)

我需要能够为每个feeRef 返回的feeBudRec 获得一个值。对于每个单独的feeRef，每个feeBudRec 的值始终相同（例如，对于feeRef LR01 的每个数据行，feeBudRec 的值为1177）。

我需要为每个feeRef 获取单个feeBudRec 值的原因是我需要能够合计feePin 中每个feeRef 的feeBudRec 值（例如，对于feePin LEE，我需要合计LR01 和PS01 的feeBudRec 值，应该是 1177 + 1957 得到总共 3134；但是如果我没有feeBudRec 的唯一值，它将添加每一行的值，这将为 8 个 LEE 行带来总共 11756）。

我编写 SQL 查询的经验非常有限，但是通过搜索互联网，看起来我需要在我的 SQL 查询中放入一个子查询，以便为每个 feeRef 获取一个唯一的 feeBudRec 数字，并且一个子查询获得每个feeRef 的最低feeBudRec 值应该对我有用。

根据我找到的示例，我认为以下子查询应该可以工作：

```
SELECT a.feeRef, a.feeBudRec
  FROM (
    SELECT uvw_EarnerInfo.feeRef, Min(uvw_EarnerInfo.feeBudRec) as AvailableTime
    FROM uvw_EarnerInfo
    GROUP BY
    uvw_EarnerInfo.feeRef
) as x INNER JOIN uvw_EarnerInfo as a ON a.feeRef = x.feeRef AND a.feeBudRec = x.AvailableTime; 
```

问题是我不知道如何将该子查询插入到我用来生成报告的查询中（如下所示）：

```
SELECT
  uvw_EarnerInfo.feeRef
  ,uvw_EarnerInfo.PersonName
  ,uvw_EarnerInfo.PersonSurname
  ,uvw_EarnerInfo.feePin
  ,uvw_RB_TimeLedger.TimeDate
  ,uvw_RB_TimeLedger.matRef
  ,uvw_RB_TimeLedger.TimeTypeCode
  ,uvw_RB_TimeLedger.TimeCharge
  ,uvw_RB_TimeLedger.TimeElapsed
  ,uvw_WoffTimeByTime.WoffMins
  ,uvw_WoffTimeByTime.WoffCharge
  ,uvw_EarnerInfo.feeBudRec
  ,uvw_EarnerInfo.personOccupation
FROM
  uvw_RB_TimeLedger
  LEFT OUTER JOIN uvw_WoffTimeByTime
    ON uvw_RB_TimeLedger.TimeId = uvw_WoffTimeByTime.TimeId
  RIGHT OUTER JOIN uvw_EarnerInfo
    ON uvw_EarnerInfo.feeRef = uvw_RB_TimeLedger.feeRef
WHERE
  uvw_RB_TimeLedger.TimeDate >= @TimeDate
  AND uvw_RB_TimeLedger.TimeDate <= @TimeDate2 
```

如果该子查询将获得正确的结果，任何人都可以帮我将它插入到我的报告查询中。否则，谁能让我知道我需要做什么才能为每个feeRef 获得唯一的feeBudRec 值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T19:21:48.713

取决于确切的架构，但假设 uvw_EarnerInfo 列出了 Pin、Ref 和 Rec 而没有重复，请尝试在查询末尾添加一个额外的列（在 personOccupation 之后），例如：

```
feeBudRecSum = (Select SUM(FeeBudRec) From uvw_EarnerInfo x 
            where x.feePin = uvw_EarnerInfo.feePin
            Group By x.FeePin) 
```

请注意，您不会在报告中对这些值求和。此列应包含您要查找的总数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-19T13:52:47.233

Report Builder 的关键是从偏移量中获取正确的查询，然后让向导为您构建报告。它消除了手动构建报告的所有艰苦工作。我已经有一段时间没有使用报表生成器了，但是在显示查询图形表示的报表的查询生成器中，您应该能够将列拖放到查询集中和从中删除。将一列向上拖出框（显示您的列）会导致您的报告在此列上中断。如果您以这种方式重组，您可能必须再次运行报告生成器来重新生成报告并对其进行重组。一旦您对结构感到满意，您就可以开始添加摘要列。

# objective-c - 如何在 iOS 上试验私有 API？

> ID：11562174
> 
> 赞同：2
> 
> 时间：2012-07-19T13:41:21.193
> 
> 标签：objective-c, ios, iphone-privateapi

出于实验的明确目的，我一直在探索 iOS 中的私有 API。有没有人有实例化像 MKTransitAnnotationView 这样的类的示例？

我已经下载了 Erica Sadun 的[HeaderDumpKit](http://ericasadun.com/HeaderDumpKit/)和[class-dump](http://www.codethecode.com/projects/class-dump/)二进制文件。在对她的 perl 脚本进行了一些更正后，我转储了一个 Headers 目录并将其移动到项目文件夹中。

在构建设置的其他链接器标志部分中，我添加了：

```
-force_flat_namespace
-undefined suppress 
```

尝试调用 MKTransitAnnotationView 时，我得到 dyld: Symbol not found: _OBJC_CLASS_$_MKTransitAnnotationView。那么我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T19:21:02.723

将转储的标头添加为普通头文件，然后从项目导航器中添加：

*   点击你的项目
*   点击你的目标
*   单击 Build Phases 选项卡，然后展开 Link Binary With Libraries 部分
*   从您要使用的 PrivateFramework 文件夹中拖放二进制文件。

那么你应该准备好了。

通常你不应该改变你的标志。

# android - 如何在android中的PreferencesFragment上防止双重addtobackstack

> ID：11562182
> 
> 赞同：0
> 
> 时间：2012-07-19T13:41:38.957
> 
> 标签：android

**背景：**

我正在使用 PreferencesFragment 来管理我的 android 应用程序中的首选项，并且我使用选项菜单来访问这些首选项。

*MainActivity 类重写方法：*

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch(item.getItemId()){
    case R.id.menu_prefs:
        PrefsFragment prefs = new PrefsFragment();
        getFragmentManager()
            .beginTransaction()
            .replace(R.id.main_container, prefs)
            .addToBackStack(null)
            .commit();
        break;
    }
    return true;
} 
```

*资源/菜单/menu.xml：*

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@+id/menu_prefs"
    android:icon="@android:drawable/ic_menu_preferences"
    android:title="@string/menu_prefs_title"
    android:showAsAction="ifRoom|withText">
</item>

</menu> 
```

**问题：**

*   在主屏幕上，我单击操作栏中的首选项图标，PrefsFragment 启动。
*   在 PrefsFragment 上，我单击操作栏中的首选项图标 PrefsFragment**再次**启动（这是出现问题的地方）。
*   我点击后退按钮，它恢复片段事务并返回**PrefsFragment**。（它应该回到主屏幕）。

**问题：** 有什么聪明的方法可以禁用双重显示 PrefsFragment？

**期望的结果：** 如果在主屏幕上显示 PrefsFragment，则单击操作栏中的首选项图标，在 PrefsFragemnt 可见时单击操作栏中的首选项图标不会执行任何操作，在 PrefsFragment 上单击返回按钮始终返回主屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T16:03:03.163

好的，经过更多挖掘后，我做到了：

如果 PrefsFragemnt 可见，我将禁用操作栏/选项菜单（我可以在此处添加不同的菜单，但在这种情况下禁用它可以正常工作）。

*PrefsFragment.java*

```
import android.os.Bundle;
import android.preference.PreferenceFragment;

public class PrefsFragment extends PreferenceFragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.prefs);
    }

    @Override
    public void onStop() {
        super.onStop();
        getActivity().invalidateOptionsMenu();
    }
} 
```

*MainActivity.java（重写方法）：*

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    PrefsFragment prefs = (PrefsFragment)getFragmentManager().findFragmentByTag("PREFS");
    if (prefs != null){
        if (prefs.isVisible()) {
            return true;
        }
    }

    getMenuInflater().inflate(R.menu.menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch(item.getItemId()){
    case R.id.menu_prefs:
        PrefsFragment prefs = new PrefsFragment();
        FragmentManager manager = getFragmentManager();
        manager 
            .beginTransaction()
            .replace(R.id.main_container, prefs, "PREFS")
            .addToBackStack(null)
            .commit();
        manager.executePendingTransactions();
        invalidateOptionsMenu();
        break;
    }
    return true;
} 
```

最重要的部分是在停止片段时调用`manager.executePendingTransactions()`和`invalidateOptionsMenu()`单击按钮并调用。`invalidateOptionsMenu()`这将导致每次我们去首选项和离开它们后刷新菜单。

如果您有更好的解决方案，我很**乐意**看到它们，因为这对我来说有点骇人听闻。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:09:39.090

您可以尝试使用 FragmentTransaction.detach 来完成它吗？

[http://developer.android.com/reference/android/app/FragmentTransaction.html#detach%28android.app.Fragment%29](http://developer.android.com/reference/android/app/FragmentTransaction.html#detach%28android.app.Fragment%29)

# codeigniter - Codeigniter 表单验证：验证规则的顺序

> ID：11562192
> 
> 赞同：1
> 
> 时间：2012-07-19T13:42:06.860
> 
> 标签：codeigniter, validation

我有一个类似这样的表单验证规则

```
$this->form_validation->set_rules('name', 'Name', 'trim|required|strip_tags|xss_clean|callback__name_check'); 
```

现在，如果有人输入`<p></p>`或等效（空标签），结果将为空，但不知何故，所需的规则也会通过，导致插入数据库时​​名称为空。

我可以在插入之前进行额外检查，但我想知道 CI 中是否有办法防止这种情况发生？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T13:52:38.187

您是否尝试过切换`required`并`strip_tags`遵守此规则？

```
$this->form_validation->set_rules('name', 'Name', 'trim|strip_tags|required|xss_clean|callback__name_check'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:52:36.697

尝试删除 strip_tags 规则（未出现在 codeigniter 用户指南中）并尝试：

```
$this->form_validation->set_rules('name', 'Name', 'trim|required|prep_for_form|xss_clean|callback__name_check'); 
```

我认为这对你有用

用户指南说：

```
prep_for_form

Converts special characters so that HTML data can be shown in a form field without breaking it.

http://codeigniter.com/user_guide/libraries/form_validation.html 
```

# ibm-midrange - 如何为 RPG 或 CL 程序中的激活组设置编译器选项？

> ID：11562194
> 
> 赞同：2
> 
> 时间：2012-07-19T13:42:11.213
> 
> 标签：ibm-midrange, compiler-flags, rpgle, rpg, compiler-options

有没有办法为程序源指定，在编译期间应该使用哪些激活组选项？

在我们在 as/400 上的大多数程序中，我们需要更改激活组的处理方式（因为默认行为根本没有用......）。每次编译其中一个程序时，我都必须记住设置编译器选项（在 PDM 中： enter `14`、 hit `F4`、 change `DFTACTGRP`from `*YES`to `*NO`、 hit `enter`、 change `ACTGRP`to `*NEW`or `*CALLER`，具体取决于程序）。所以我们有很多程序开头都有注释，有大量的感叹号，提醒程序员这样做。是的，有时你会忘记。

有什么诀窍，让你不必记住自己吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T13:42:11.213

您可以在 RPGLE 或 CLLE 程序源中设置这些编译器选项。

在**RPG**中，您将使用源代码顶部的 H-Specs 来设置编译器选项。像这样：

```
HDFTACTGRP(*NO) ACTGRP(*CALLER) 
```

只需将其添加到您那里的任何其他内容中，例如：

```
H DEBUG DATEDIT(*YMD)
H DFTACTGRP(*NO) ACTGRP(*CALLER)
H BNDDIR('SRVBNDDIR')
H MAIN(main)
F OUTPUT   O    F 3000        DISK    USROPN
D ...
 * procedures, etc. 
```

在**CL**中，有一个特殊的命令`DCLPRCOPT`，它实际上不是一个命令（因为它不会在运行时执行），而是一种设置编译器选项的方法。

```
DCLPRCOPT DFTACTGRP(*NO) ACTGRP(*CALLER) 
```

只需将其放在程序的顶部即可。我通常把它放在变量声明之后和任何实际命令之前。我还添加了一个简短的评论，因为我认为可能正确我的代码的每个人都不会理解那里做了什么：

```
PGM        PARM(&SOMEPARM)
DCL        VAR(&SOMEPARM) TYPE(*CHAR) LEN(*64)
DCL        VAR(&COUNTER) TYPE(*DEC) LEN(5 0) 

/* Setting options for compilation of this program */
/* This is a permanent job, so we want a *NEW activation group. */
DCLPRCOPT DFTACTGRP(*NO) ACTGRP(*NEW)

/* do actual work here in a loop */
/* ..... */

ENDPGM 
```

现在，当您编译程序时（只需`14`在 PDM 中输入并按回车键），它会以您在源代码中指定的激活组行为结束。那里没有什么可以记住自己的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T04:18:35.037

@kratenko 建议之外的另一种方法。如果您有默认的公司设置，您可以使用更改命令默认值`CHGCMDDFT`。例如`CHGCMDDFT CRTBNDRPG 'DFTACTGRP(*NO)'`等等.. 我们这里的做法是始终将设置设置为 H-spec，特别是对于一些特殊的非标准设置。如果有人忘记了，将使用默认的公司设置。这种方法的一个问题是您更新的命令可能会在操作系统更新后重置。您可以使用两种方法之一

1.  将所有 CHGCMDDFT 放入 CL 代码中，并在每次操作系统升级后重新运行
2.  复制，CHGCMDDFT 所需的库命令并将此库放入系统库列表

我们更改了相当多的其他命令默认值，我更喜欢上面的方法 1。希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T09:27:27.837

H 规范绝对是 99% 程序的前进方向，但有时您会发现无法在 h 规范中设置的编译器选项。我过去使用过源代码控制软件，它将这些选项作为注释添加到源代码标题中，并在编译时自动应用它。为了解决在不同机器上编译的问题，我们编写了自己的编译实用程序来读取这些注释。这是一个相当简单的 CL 程序，您只需要决定注释的格式。

# matlab - 查找元胞数组中所有（非唯一）元素的索引，因为它们出现在第二个（已排序且唯一）元胞数组中

> ID：11562196
> 
> 赞同：5
> 
> 时间：2012-07-19T13:42:20.490
> 
> 标签：matlab, find, cell-array

```
A = {'A'; 'E'; 'A'; 'F'};

B = {'A';'B';'C';'D';'E'; 'F'}; 
```

我试图为单元格数组中的每个字符串获取与单元格数组`A`中该字符串匹配的索引`B`。`A`会有重复的值，`B`不会。

```
find(ismember(B, A) == 1) 
```

输出

```
1
5
6 
```

但我想得到

```
1
5
1
6 
```

最好在一个衬里。我也不能使用 strcmp 代替 ismember 因为向量的大小不同。

向量实际上将包含日期字符串，并且我需要索引而不是逻辑索引矩阵，我对不将其用于索引的数字感兴趣。

我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T13:54:45.917

您将参数翻转为`ismember`，然后使用第二个输出参数：

```
[~,loc]=ismember(A,B)

loc =

     1
     5
     1
     6 
```

第二个输出告诉您 的元素在`A`哪里`B`。

如果您对代码中可以包含的行数有非常严格的限制，并且无法解雇施加此类限制的经理，您可能希望直接访问第二个输出`ismember`。为此，您可以创建以下帮助函数，允许直接访问函数的第 i 个输出

```
function out = accessIthOutput(fun,ii)
%ACCESSITHOUTPUT returns the i-th output variable of the function call fun
%
% define fun as anonymous function with no input, e.g.
% @()ismember(A,B)
% where A and B are defined in your workspace
%
% Using the above example, you'd access the second output argument
% of ismember by calling
% loc = accessIthOutput(@()ismember(A,B),2)

%# get the output
[output{1:ii}] = fun();

%# return the i-th element
out = output{ii}; 
```

# xquery - 如何在 Marklogic Server 中获取上传的文档名称？

> ID：11562197
> 
> 赞同：1
> 
> 时间：2012-07-19T13:42:20.380
> 
> 标签：xquery, marklogic

我正在 Marklogic Server 中上传一些 office 2007/2010 文档。现在内容处理器将生成相应的 xhtml 和 html 文件。我想通过 xquery 获取 Marklogic Server 中上传的文档名称（xml、xhtml 和 html 文件除外）。为了让我的问题更清楚，这里有一个例子。如果我在 Marklogic 中上传了一个 docx 和一个 pdf，那么我想运行这样的 xquery，它将为我提供这两个上传文档的名称。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:54:51.323

MarkLogic 不会自动存储文档名称。文档由 URI 唯一标识，该 URI 可能全部或部分由文档名称组成，也可能不组成。文档 URI 在您上传文档时以编程方式确定。如果您将文档名称放入 URI，那么您可以将其从 URI 中解析出来。如果您不这样做，那么您需要捕获并存储文档名称作为文档本身的元数据的一部分，或者可能作为关联的属性片段。

# c# - 根据 URL 更改文本

> ID：11562200
> 
> 赞同：0
> 
> 时间：2012-07-19T13:42:32.983
> 
> 标签：c#, asp.net

我正在寻找编写一些 C# 来检测一段 URL 并根据页面加载上找到的 URL 更改一些文本。

本质上，我希望这种情况发生：

1.  URL 被检测为以“.us || .com”或“.ca”结尾
2.  根据找到的 URL将 an 的文本更改为`<h1>`“美国”或“加拿大”。

我对这种代码的 C# 经验几乎是 0，所以我没有任何代码可以展示，因为我不知道从哪里开始。任何人都可以帮助我朝着正确的方向前进吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T13:46:53.653

您可以使用[Uri](http://msdn.microsoft.com/en-us/library/system.uri_properties%28v=vs.90%29)类并查看`Host`属性以查看它是否包含`.us`、`.com`或`.ca`使用简单的字符串`EndsWith`操作。

请记住，在构造`Uri`类时，您必须传入一个有效的 URI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T13:47:21.843

这个问题可能会帮助您朝着正确的方向前进：[C# 中来自 URL 的顶级域](https://stackoverflow.com/questions/4643227/top-level-domain-from-url-in-c-sharp)

然后，您所要做的就是找到扩展名，将其包装在`switch`声明或其他内容中，然后就可以了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T13:48:08.253

如果您正在检查符合某些条件的字符串，那么我会看看正则表达式。

[http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T14:01:33.097

你也可以通过使用 JQuery 来实现这一点 [http://jsfiddle.net/tEqwb/11/](http://jsfiddle.net/tEqwb/11/)

```
$(document).ready(function() {
    var pathname = window.location.pathname;
    if($(pathname +"*.us") || $(pathname +"*.com") || $(pathname +"*.ca"))
    {
      $("#theH1").text("United States");
    }
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T14:09:34.533

试试这个，它应该工作

if (ss.Contains(".us"))
{
//改名美国代码
}
else if (ss.Contains(".ca"))
{
//改名加拿大代码
}

# php - Jquery - 表格工具如何导出为 xls？

> ID：11562202
> 
> 赞同：0
> 
> 时间：2012-07-19T13:42:40.127
> 
> 标签：php, javascript, jquery, html

我正在使用 DataTables 和 TableTools 来格式化表格，当我希望它将表格导出为 .xls 时，结果仍然是 .csv。.pdf 导出工作完美，但如何使“TableTools”将表格导出为 .xls？

![在此处输入图像描述](../Images/073e9fa733885dfeb874a8e4c9fa1030.png)

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:46:27.447

您可以使用以下库： [http](http://code.google.com/p/php-excel/) ://code.google.com/p/php-excel/或 [http://phpexcel.codeplex.com/](http://phpexcel.codeplex.com/)

或者你可以使用 header 来制作简单的 xls 文件

```
$filename ="excelreport.xls";
$contents = "testdata1 \t testdata2 \t testdata3 \t \n";
header('Content-type: application/ms-excel');
header('Content-Disposition: attachment; filename='.$filename);
echo $contents; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T04:34:39.767

试试这个，问题解决了.. :)

```
$('#dt_gal').dataTable({ "sDom": 'T<"clear">lfrtip', 
"oTableTools": {"sSwfPath": "<?php echo base_url() ?>asset/export/swf/copy_csv_xls_pdf.swf" ,
"aButtons": [
   "copy", 
   { "sExtends": "csv", 
     "sTitle": "titleExport csv",
     "sFileName": "*.csv" 
   },
   { "sExtends": "xls", 
     "sTitle": "titleExportxls",
     "sFileName": "*.xls" },
   { "sExtends": "pdf", 
     "sTitle": "titleExportpdf",
     "sFileName": "*.pdf" 
   },
   "print" ] } 
}); 
```

# javascript - 在java脚本的第一行之前添加新行

> ID：11562203
> 
> 赞同：0
> 
> 时间：2012-07-19T13:42:43.997
> 
> 标签：javascript, dom

嗨，我的代码如下：

```
function addRowToTable(num){
if (hasLoaded) {
    var tbl = document.getElementById(TABLE_NAME);
    var nextRow = tbl.tBodies[0].rows.length;
    var iteration = nextRow + ROW_BASE;
    if (num == null) {
        num = nextRow;
    } else {
        iteration = num + ROW_BASE;
    }

    // add the row
    var row = tbl.tBodies[0].insertRow(num);

    // cell
    var cell0 = row.insertCell(0);
    var LNInpT = document.createElement('input');
    LNInpT.setAttribute('type', 'text');
            LNInpT.setAttribute('value', 'name');
            cell0.appendChild(LNInpT);

    // Pass in the elements you want to reference later
    // Store the myRow object in each row
    row.myRow = new myRowObject(textNode, txtInp, cbEl, raEl);
}} 
```

* * *

请帮助我通过编辑此代码在表格的第一行之前添加新行。坦克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:00:08.813

这应该可以帮助您：

```
var myTable = document.getElementById('myTable');
var tbody = myTable.tbodies[0];
var tr = tbody.insertRow(-1); // puts it at the start

var td = document.createElement('td');
td.innerHTML = "Something";
tr.appendChild(td); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:50:11.543

我建议您使用 jQuery，这将使这更容易（使用[prepend](http://api.jquery.com/prepend/)方法）。如果你不能或不想，你应该可以使用[insertBefore](http://www.w3schools.com/dom/met_element_insertbefore.asp)。

您可能想在 SO 上查看这个[问题](https://stackoverflow.com/questions/3391576/how-can-i-implement-prepend-and-append-with-regular-javascript)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T14:46:37.850

为此使用 jQuery 的[`prepend()`](http://api.jquery.com/prepend/)方法。

# jquery - 使用jquery提交时取消提交

> ID：11562212
> 
> 赞同：0
> 
> 时间：2012-07-19T13:43:24.630
> 
> 标签：jquery

我正在静默提交一个表单，即没有使用 jquery.submit() 方法刷新页面。当用户选择文件并单击上传按钮时，上传开始并启用取消按钮。但我不知道如何在两者之间取消此上传。官方 jquery 文档说

**“我们可以通过在事件对象上调用 .preventDefault() 或从我们的处理程序返回 false 来取消提交操作”**，但我不明白在我的情况下如何使用它。下面是我用来提交表单的代码。

```
$('#button').click(function() {
    $('#form').submit();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:50:02.703

一旦提交已到达服务器，您就无能为力了（表单）。

这样做`return false;`最多可以防止提交发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:00:26.213

我认为 jquery .submit() 方法的使用方式有些混乱。从[jquery 文档](http://api.jquery.com/submit/)：

> 当用户尝试提交表单时，提交事件被发送到元素。它只能附加到元素上。`<input type="submit">`可以通过单击显式、 `<input type="image">`或`<button type="submit">`或在某些表单元素具有焦点时按 Enter来提交表单。

这意味着这个方法所做的只是处理表单的提交事件。如果您取消活动，则您的文件上传将被取消。中间没有。您要么允许上传文件，要么完全取消表单提交（上传）。此外，要使用 .preventDefault()，它看起来像这样：

```
$('#button').click(function() {
    $('#form').submit();
});

$('#form').submit(function(e) {
    e.preventDefault();
    // could also use return false; as a previous poster 
    // suggested but I have found e.preventDefault() to be more reliable
}); 
```

您可能需要查看一些 3rd 方插件来完成您想要做的事情。一个这样的插件是[Uploadify](http://www.uploadify.com/)。

# java - 在 ecplise 中使用 getThreadAllocatedBytes() 获取编译错误

> ID：11562215
> 
> 赞同：2
> 
> 时间：2012-07-19T13:43:48.553
> 
> 标签：java, eclipse, memory-leaks, threadpool

我正在尝试在 Quartz 调度程序中监视我的线程。我需要估计执行我的工作需要多少内存。

我正在尝试使用以下方法：

```
 import java.lang.management.ManagementFactory;

    ManagementFactory.getThreadMXBean().getThreadAllocationBytes(); 
```

但是，在 Eclipse 中出现错误：

```
The method getThreadAllocationBytes() is undefined for the type ThreadMXBean 
```

我搜索发现该方法是在 JDK6u25 中引入的，由于 Eclipse 使用的是自己的编译器，我无法解决问题。

在没有 Eclipse 的情况下编译类似乎是一个弱解决方案，因为我需要能够使用 Eclipse 编译项目。

你能给我一些关于如何解决这个问题的建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T15:26:52.097

为`ManagementFactory`您提供了`java.lang.management.ThreadMXBean`，但您要调用的方法位于`com.sun.management.ThreadMXBean`接口内部（扩展了`java.lang.management.ThreadMXBean`接口）。

如果您在 Sun/Oracle VM 上运行，您可以转换结果并调用方法：

```
((com.sun.management.ThreadMXBean)ManagementFactory.getThreadMXBean())
   .getThreadAllocatedBytes(); 
```

但这当然会在其他虚拟机上失败。此外，不建议使用 com.sun 包，因为那里的类可能随时更改（即使是对 VM 的微小更新）。所以最好在使用它并让你的代码不依赖它时小心。

***编辑*** 如果您仍然无法编译它，但它使用反射工作，那么有比反射更好的方法。Java 管理 API 对通过名称访问 bean 和属性具有特殊支持，因为您通常希望在编译时不知道它们的情况下显示它们（想想通用 JMX 客户端，如 JConsole 或 VisualVM）。

使用以下代码：

```
ObjectName threadMxBean = new ObjectName(ManagementFactory.THREAD_MXBEAN_NAME);
MBeanServer mbeanServer = ManagementFactory.getPlatformMBeanServer();
long[] memUsedPerThread = (long[]) mbeanServer.getAttribute(threadMxBean, "ThreadAllocatedBytes"); 
```

这应该可行，但我无法测试它，因为在我的 JVM 上，该属性不存在。如果它不起作用，请使用 JConsole 或 VisualVM，连接到您的 Java 进程并验证该属性确实存在且名称正确。

您还可以查看[JMX 文档](http://docs.oracle.com/javase/6/docs/technotes/guides/jmx/index.html)。

***编辑 2*** 在您的代码示例中，您使用`getThreadAllocationBytes`了 ，但指向 API 的链接显示`getThreadAllocatedBytes`。仔细检查您是否正确。我的答案是错误的，我现在修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:45:23.420

*   如果您需要的话，您可以随时在 Eclipse 中更改项目的编译器设置。`Project > Properties > Java Compiler > Enable Project specific settings`

*   您还可以按如下方式更改 JRE 系统库`Project > Build Path > Configure Build Path > JRE System Library > Edit`：从这里您可以选择不同的执行环境或选择添加备用 JRE。

# node.js - 表示找不到/使用布局

> ID：11562217
> 
> 赞同：4
> 
> 时间：2012-07-19T13:44:02.320
> 
> 标签：node.js, layout, express

我正在尝试使用 express 并呈现 layout.jade 我的目录树非常标准。

```
├── apps
│   └── fridge_face
│       ├── routes.coffee
│       └── views
|           └── index.jade
├── server.js
└── views
    ├── layout.jade
    └── stylesheets
        └── style.styl 
```

在我的 routes.coffee 中，当我渲染 index.jade 时，一切都很好，但没有渲染布局。我曾尝试将布局移入`apps/fridge_face/views/`，但没有成功。

我没有做布局配置。

这是我的

### 布局.jade

```
doctype 5
html
  head
    title 'What is up'
    link(rel='stylesheet', href='/stylesheets/style.css')
  body
    != body 
```

### 路线.咖啡

```
routes = (app) ->
  app.get '/', (req, res) ->
    Word.once 'wordsFetched', (params) ->
      res.render "#{__dirname}/views/index",
        layout: true
        words: params.map (word) -> word.word

    Word.getWords()

module.exports = routes 
```

### server.js 配置

```
app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express['static'](__dirname + '/public'));
}); 
```

如您所见，没有任何东西可以或会使布局无法呈现...我做错了什么我如何快速找到我的布局

## 编辑

* * *

我知道我让这个问题变得超长，但增加了一些进展。第一的

当我`!=`从两个目录的布局中删除时，没有任何变化。我的视图仍然是免费的。

当我添加

```
app.set('view options', {
  layout: false
}); 
```

然后在我的视图中显式呈现我的布局

```
layout: "#{__dirname}/views/layout"
# OR
layout: "layout"
# OR
layout: true 
```

什么都没有发生，视图被渲染为免费布局......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T00:43:06.520

正如上面有人所说，您使用的是 3.0 版，它摆脱了布局和部分，并让模板引擎处理。这是通过迁移 wiki 获得的答案：

“要使用 EJS 恢复布局功能，您可以使用[express-partials](https://github.com/publicclass/express-partials)或 ejs-locals。”

（来自[https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)）

我最终使用了 express-partials，它的工作方式与他们的示例完全相同。我无法发布指向 ejs-locals 的链接，因为我还没有足够的声誉，但您可以在 wiki 上找到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:57:25.250

您在新的 express 版本中使用过时的代码。模板系统的新用法请参见[http://github.com/visionmedia/jade](http://github.com/visionmedia/jade)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T13:56:35.570

尝试在调用时明确指定布局文件的路径`render`。快递文档中有一个示例：

```
res.render('page', { layout: __dirname + '/../../mylayout.jade' }); 
```

我的猜测是 express/jade 中存在不同的逻辑，具体取决于视图名称是不合格的还是指定为文件系统路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T14:22:27.333

如果布局不起作用，您可以尝试使用部分，我正在使用 ejs ：

```
app.get('/', function(req,res){
 res.render('layout.ejs', { layout:false,
   locals : {
        body: '../apps/index.ejs' ,
        name : "Daniel"
 }});
}); 
```

在 layout.ejs 中：

```
<html>
...
<%-partial(body)%>
<html> 
```

在 index.ejs 中：

```
<h1>Hola</h1>
<%=name%> 
```

# android - ExpandableListView 确定何时应用过滤文本

> ID：11562220
> 
> 赞同：0
> 
> 时间：2012-07-19T13:44:05.707
> 
> 标签：android, filter, expandablelistview

我的任务是在过滤期间保持展开/折叠的组。我编写了自己的过滤器，如果组没有任何孩子，则删除组。但是在组消失后，过滤器的文本被更改并且组返回，但它会被折叠。

所以我保存展开/折叠状态来分组对象。所以我只需要在适当的时候应用这些状态。

有我的尝试：

```
class SubjectGroupList extends ExpandableListView implements OnGroupCollapseListener, OnGroupExpandListener{

    public SubjectGroupList(Context context) {
        super(context);
    }

    public void onGroupExpand(int groupPos) {
        SubjectGroup group = (SubjectGroup)getExpandableListAdapter().getGroup(groupPos);
        group.expanded = true;
    }

    public void onGroupCollapse(int groupPos) {
        SubjectGroup group = (SubjectGroup)getExpandableListAdapter().getGroup(groupPos);
        group.expanded = false;
    }

    @Override 
    public void onFilterComplete(int count) {
        fixCollapse();

        super.onFilterComplete(count);
    }

    private void fixCollapse() {
        Log.d("SubjectGroupList", "fix collapse");

        SubjectGroupAdapter adapter = (SubjectGroupAdapter)getExpandableListAdapter();
        int i = adapter.getGroupCount();
        while (--i >= 0)
            if (adapter.getGroup(i).expanded)
                expandGroup(i);
            else
                collapseGroup(i);
    }
} 
```

但这根本不起作用。永远不会调用**onFilterComplete**方法。

我必须找到另一种方法来确定，在重新绘制之前何时应用过滤器。

也许有人知道？谢谢。

**编辑：**

**我的过滤器：**

```
class GroupFilter extends Filter {
    private SubjectGroupAdapter adapter;

    public GroupFilter(SubjectGroupAdapter adapter) {
        this.adapter = adapter;
    }

    @Override
    protected FilterResults performFiltering(CharSequence s) {
        FilterResults result = new FilterResults();
        result.count = 0;

        ArrayList<SubjectGroup> groups = new ArrayList<SubjectGroup>();

        s = s.toString().toLowerCase();

        for (SubjectGroup group : adapter.ori) {
            SubjectGroup ng = new SubjectGroup(group.name, group.id);

            int founded = 0;
            for (SubjectItem item : group) {
                if (s == null || s.length() == 0 || item.name.toLowerCase().contains(s)) {
                    ng.add(new SubjectItem(item.name, item.id));
                    result.count++;
                    founded++;
                }
            }

            if (founded > 0)
                groups.add(ng);
        }

        result.values = groups;

        return result;
    }

    @Override
    protected void publishResults(CharSequence s, FilterResults result) {
        adapter.filter((ArrayList<SubjectGroup>) result.values);
    }
} 
```

**以及接受过滤数据的适配器方法 ** :

```
protected void filter(ArrayList<SubjectGroup> groups) {
    this.groups = groups;
    notifyDataSetInvalidated();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:07:48.520

我创立了答案。

I can register DataSetObserver to Adapter, who listens for data changes or invalidate. So I register observer in ExpandableListView by overriding addAdapter method:

```
@Override
public void setAdapter(ExpandableListAdapter adapter) {
    adapter.registerDataSetObserver(new DataSetObserver() {
        public void onInvalidated() {
            fixCollapse();
        }
    });

    super.setAdapter(adapter);
} 
```

Also I need tweak a bit Filter, because there was the mistakes.

It work very well. I hope someone else helps my experience.

# c++ - 迭代模板参数列表？

> ID：11562223
> 
> 赞同：3
> 
> 时间：2012-07-19T13:44:19.520
> 
> 标签：c++, templates, metaprogramming, c++03

我试图想办法循环遍历模板参数列表但没有成功

我不能使用 c++11 可变参数模板功能，它需要在编译时完成

我可以假设在否定论点之后不会有肯定论点

任何的想法 ？

```
template< int F1, int F2 ,int F3>
struct TemplatedClass
{
    TemplatedClass();
    update()
    {
        /* 
          for each positive template argument 
             call a method
        */
    }
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T13:59:00.303

除了编写一系列`if`语句之外，您还可以将所有参数放入一个数组并遍历它。这样编译器将无法优化您的代码（您没有指定是否需要这样做），但我认为它看起来会更干净。例如

```
template<int F1, int F2 ,int F3>
struct TemplatedClass
{ 
    TemplatedClass(); 
    update() 
    {
        const int array[] = {F1, F2, F3};
        // replace this with std::for_each(...) with functors you need
        for (int i = 0; i < sizeof(array)/sizeof(array[0]); ++i)
        {
            myfunc(array[i]);
        }
    } 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T13:47:11.260

由于您将拥有有限数量的模板参数，因此您可以使用一系列`if`语句。

```
template<int F1, int F2 ,int F3> 
struct TemplatedClass 
{ 
    TemplatedClass(); 
    update() 
    {
    if (F1 > 0) myfunc(); 
    if (F2 > 0) myfunc(); 
    if (F3 > 0) myfunc(); 
        // etc.*  
    } 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T13:48:41.230

固定模板参数的数量后，像这样的简单代码就可以了：

```
update()
{
    if (F1 > 0) callAMethod();
    if (F2 > 0) callAMethod();
    if (F3 > 0) callAMethod();
} 
```

语句中的表达式`if`是编译时常量，因此优化器会将其优化为相当于调用方法“不受保护”（没有分支）或根本不调用方法的代码。换句话说，是否调用该方法的决定将由优化器在编译时做出，而不会产生运行时成本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T13:52:48.113

或者如果您不确定优化器会摆脱`if`s，请使用帮助模板：

```
void functionToCall(int number) { /* ... */ }

template<bool doCall>
struct FuncCaller {
    template<typename Callable>
    FuncCaller(Callable func, int number) { func(number); }
};

template<>
struct FuncCaller<false> {
    template<typename Callable>
    FuncCaller(Callable, int) {}
};

update()
{
    FuncCaller<(F1 > 0)>(functionToCall, F1);
    FuncCaller<(F2 > 0)>(functionToCall, F2);
    FuncCaller<(F3 > 0)>(functionToCall, F3);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T16:53:21.360

您可以尝试使用 Boost 元编程库来执行此操作，但需要您更改类的模板定义以为 Boost MPL 参数腾出空间。

你想用 Boost::MPL 做的一个例子是：

```
#include <boost/mpl/vector.hpp>
#include <boost/mpl/empty.hpp>
#include <boost/mpl/back.hpp>
#include <boost/mpl/pop_back.hpp>
#include <boost/mpl/if.hpp>
#include <iostream>

using namespace boost::mpl;
template<class T>
class Test {
public:
  void funcToCall() {
    std::cout << "I'm called\n";
  }
  void update();
};

template<class Y, class T>
struct Update {
  static void update(T* t) {
    typedef typename pop_back<Y>::type vec_less;
    if (back<Y>::type::value > 0)
      t->funcToCall();
    Update<typename if_<empty<vec_less>, void, vec_less >::type, T>::update(t);
  }
};
template<class T>
struct Update<void ,T> {
  static void update(T* t) {}
};

template<class T>
void Test<T>::update() {

Update<T, Test<T> >::update(this);

}

int main() {
  Test<vector<int_<0>,int_<4>, int_<9> > > t;
  t.update();
  return 0;
} 
```

“测试”类将是您原来的“模板类”。现在，您无需获取 int 模板参数列表，而是获取一个 boost::mpl::vector 参数。这包含您要传递的所有整数，然后您调用更新函数，该函数将从结构“Update”中递归调用更新方法，如果整数大于 0，则该方法将有责任调用“funcToCall()”方法。

我上面粘贴的程序的输出是：

> MacBook-Pro-di-Marcello:~ Kariddi$ ./test
> 
> 我叫
> 
> 我叫

当然，您需要 Boost 库才能使此示例正常工作。

您可以在此处找到有关 MPL 的信息：

[http://www.boost.org/libs/mpl/doc/index.html](http://www.boost.org/libs/mpl/doc/index.html)

干杯，马塞洛

# javascript - 拉斐尔路径未显示

> ID：11562228
> 
> 赞同：0
> 
> 时间：2012-07-19T13:44:45.837
> 
> 标签：javascript, raphael

我相信我有一个语法错误，但我已经尝试了一切，但无法解决这个问题。我正在使用 Raphael Javascript 矢量图形库，并尝试从 170、170 到 150、150 绘制一条黑线，但没有显示任何内容。谁能告诉我为什么？

```
<html>
    <head>
        <script src="raphael.js"></script>
        <script src="jquery-1.7.2.js"></script>
    </head>
    <body>
        <div id="sample-2" style=" background-color:blue; width:500px;"></div>
        <script type="text/javascript">
            var paper = Raphael("sample-2", 900, 500);
            //var curvePath = paper.path("M100,100 L400,400 C500,400 500,100 400,100");
            //curvePath.attr({fill:"blue", stroke:"black"});

            //var circle = paper.circle(175, 175, 50);
            var newpath = paper.path({type:"path", path:"M170, 170 L150, 150", stroke:"black"});
            //circle.attr({"fill": "orange"});
            //circle.attr({"stroke": "black"});
        </script>
    </body>
</html>​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:50:28.297

你在滥用`Paper.path()`构造函数。使用单个字符串参数调用它，表示路径字符串：

```
var newpath = paper.path("M170, 170 L150, 150"); 
```

如果您希望更改路径的属性，例如笔触颜色、填充、字体，请使用该`attr()`方法，如下所示：

```
newpath.attr({
    'stroke' : 'black',
    'stroke-width' : 3
}); 
```

**拉斐尔参考：**

*   [`Paper.path()`](http://raphaeljs.com/reference.html#Paper.path)
*   [`Element.attr()`](http://raphaeljs.com/reference.html#Element.attr)

# android - textview中某些文本周围的形状

> ID：11562231
> 
> 赞同：0
> 
> 时间：2012-07-19T13:44:56.290
> 
> 标签：android, html, formatting, textview, nine-patch

在下面的屏幕截图中，数字周围有正方形，上标文本周围有圆圈。

我发现很多网站 `TextView`都在文本中不围绕某个单词放置背景形状，还有一些讨论九补丁的网站。

这可以在 中做`TextView`还是我需要使用不同的`View`？对此的任何帮助都会很棒。

谢谢

![屏幕截图在这里](../Images/ebb4db8831b918c191a009fdceb3b34e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:49:35.627

您最好的选择是将`WebView`内容格式化为 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:49:45.537

您可以为您的文本设计一个 HTML 字符串并在 TextView 中使用

`textView.setText(Html.fromHtml("htmlcontent"));`

或者您可以使用在 WebView 中加载 HTML 字符串内容

```
webview.loadData("htmlcontent", "text/html", "utf-8"); 
```

或者如果你有 html 文件，你可以使用 webView.loadUrl(url) 直接在 WebView 中加载它；

PS：TextView支持的HTML标签列表[http://commonsware.com/blog/Android/2010/05/26/html-tags-supported-by-textview.html](http://commonsware.com/blog/Android/2010/05/26/html-tags-supported-by-textview.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T13:54:46.003

您可以在文本视图上进行一些格式设置，我不确定框，但您可以检查一下：

跨越[http://developer.android.com/reference/android/text/Spanned.html](http://developer.android.com/reference/android/text/Spanned.html)和它的子类，在 Html 中有一个 fromHtml 返回 SpannableString [http://developer.android.com/reference/android/text/Html .html](http://developer.android.com/reference/android/text/Html.html)

也许在那些课上，找到你的答案，你会的。

# mysql - 查询不存在的记录

> ID：11562232
> 
> 赞同：0
> 
> 时间：2012-07-19T13:45:00.250
> 
> 标签：mysql, vb.net, null

```
SELECT today.status, GROUP_CONCAT(tomorrow.work_order order by line), today.code, today.events  
FROM today LEFT JOIN tomorrow 
   ON today.code = tomorrow.code   
   WHERE today.status like '1%' or  
      (today.status like '3%' and tomorrow.work_ordertext is null) 
      GROUP BY today.code 
```

我遇到了“tomorrow.work_ordertext is null”语句的问题。明天.code 和明天.work_ordertext 可能甚至不存在于表中，所以我猜它不应该是一个空语句。如果今天表中的状态类似于 3，明天表上不存在任何记录，我正在寻找一种从今天表中提取行的方法。对不起，如果这听起来令人困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:08:20.217

```
SELECT today.status, GROUP_CONCAT(tomorrow.work_order order by line), today.code, today.events  
  FROM today LEFT JOIN tomorrow   
ON today.code = tomorrow.code   
WHERE today.status = 1 or    
  (today.status = 3 and isnull( tomorrow.work_ordertext ))  
  GROUP BY today.code 
```

我取出了类似的状态，因为它将匹配 1、10、1b、1somethingweird。

# asp.net-mvc-3 - '重载' MVC 路由？

> ID：11562233
> 
> 赞同：0
> 
> 时间：2012-07-19T13:45:01.467
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing

我正在使用 ASP.NET MVC 路由来根据某些单词来引导流量，例如`mydomain.com/support`，它指向支持页面（在 Home 控制器下），或者`mydomain.com/controller/action/id`按照默认设置。

但是，我还希望流量能够在 gTLD 之后使用任何单个词（我尚未指定）来访问我的主页。

例如：`mydomain.com/anything`仍然会点击我的主页并且不会产生 404 响应。除了我已经指定的以外的任何单词（在此示例中为“支持” *）*。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:49:11.620

你只是做这样的事情不是吗？

```
routes.MapRoute(
  "MyRoute",
  "{word}.aspx",
    new { 
      controller = "Home",
      action = "Index"
  }  // Parameter defaults
); 
```

?

并更新您的操作（在本例中为**Index**以具有**word**参数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:09:17.500

我不确定你为什么要这样做，因为这样你最终可以索引搜索引擎的大量请求。

```
routes.MapRoute(
  "MyRoute",
  "{anything}",
  new { controller = "Home", action = "Index" }
); 
```

这条路线应该最后在默认路线之后。

如果您甚至希望此类请求[http://mydomain.com/anything/otherthing/another](http://mydomain.com/anything/otherthing/another)仍由 Home 控制器处理，那么您必须尝试，

```
routes.MapRoute(
  "CatchAllRoute",
  "{*anything}",
  new { controller = "Home", action = "Index" }
); 
```

# javascript - 如何在 JavaScript 中捕获鼠标滚轮（中键）单击事件

> ID：11562235
> 
> 赞同：2
> 
> 时间：2012-07-19T13:45:11.467
> 
> 标签：javascript, jquery, dom-events, mouseevent, mousewheel

我想知道如何捕获鼠标滚轮单击事件，它显示：

![在此处输入图像描述](../Images/5b49fa5fa1404f2dd08bebd3a162ff22.png)

下图我想捕捉移动鼠标时自动向下/向上滚动的事件，分别到右左上下按钮。在该图像的下方、上方、左侧或右侧移动我的鼠标（导航图像）

# esoteric-languages - 如果执行达到程序的限制，Befunge 会发生什么？

> ID：11562238
> 
> 赞同：1
> 
> 时间：2012-07-19T13:45:32.327
> 
> 标签：esoteric-languages, befunge

我找不到这个问题的答案......是否存在“周期性边界条件”？即是否在对面站点继续执行？还是执行离开程序是非法的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T23:50:48.130

来自[http://en.wikipedia.org/wiki/Befunge](http://en.wikipedia.org/wiki/Befunge)

> Befunge-93 规范将每个有效程序限制为水平 80 条指令和垂直 25 条指令的网格。超出这些限制的程序执行“环绕”到网格另一侧的相应点；Befunge 程序以这种方式在拓扑上等价于环面。

所以，对于“经典”Befunge，是的，它包装了。但后来的发展使它变得不那么简单。

> 由于 Befunge-93 程序只能有一个堆栈并且它的存储阵列是有界的，因此 Befunge-93 语言与大多数机器语言不同，不是图灵完备的（然而，已经证明 Befunge-93 是图灵完备的无界堆栈字大小）。 [3] 后来的 Funge-98 规范通过删除程序的大小限制来提供图灵完备性；Funge-98 指令指针的移动不是在一个固定的极限处环绕，而是遵循其创始人 Chris Lahey 之后被称为“Lahey-space”的模型。在这个模型中，网格在包裹方面表现得像一个有限大小的圆环，同时仍然允许自己无限扩展。

# javascript - 从链式对象中动态检索变量

> ID：11562239
> 
> 赞同：0
> 
> 时间：2012-07-19T13:45:33.420
> 
> 标签：javascript

我无法弄清楚如何使用类似的函数访问多级深层对象中的变量

```
getLanguageVariable("form.passwordSwitch.disabled"); 
```

和以下对象作为样本

```
var language = {
    "de": {
        "form": {
            "passwordSwitch": {
                "enabled": "Der Klartext-Modus ist aus. Aktivieren?",
                "disabled": "Der Klartext-Modus ist an. Deaktivieren?"
            }
        }
    }
} 
```

试图在点字符处拆分字符串，然后创建一个字符串表示

```
language["de"]["form"]["passwordSwitch"]["enabled"] 
```

它用于访问对象及其属性。我使用了这段代码：

```
var stack = variableIdentifier.split(".");
var reference = "";

for (i = 0; i < stack.length; i++) {
    if (i == 0) reference += stack[i];
    else reference += "[\"" + stack[i] + "\"]";
} 
```

任何线索如何动态访问对象的属性，因为您不知道它有多深？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:51:43.607

几天前我在 python 中实现了相同的功能。基本上，当您不知道对象有多深时，请使用**递归模式**。

```
function getPath(obj, path)
{
    path = path.split('.');
    return _getpath(obj, path);
}

function _getPath(obj, path)
{
    if(!path.length)
        return obj;

    p = path.shift();

    if(obj[p])
        return _getPath(obj[p], path);

    return undefined;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:49:36.550

你可以做这样的事情；

```
function getLanguageVariable(path) {
    // I don't know how you determine "de", but this should be
    // easy to customise
    var next = language.de;

    // Make path = ["form","passwordSwitch","disabled"];
    path = path.split(/\./);

    // Loop over path, and for each pass, set next to the next key
    // e.g. next = next["form"];
    //      next = next["passwordSwitch"]
    //      next = next["disabled"]
    while (path.length && (next = next[path.shift()]) && typeof next === "object" && next !== null);

    // Check we have used all the keys up (path.length) and return
    // either undefined, or the value
    return path.length ? undefined : next;
} 
```

对于将来的信息，请注意您拥有的是通过 Object Literal Syntax 定义的 Object，而根本不是 JSON；有关更多信息，请参阅[JSON 和 Object Literal Notation 有什么区别？](https://stackoverflow.com/questions/2904131/what-is-the-difference-between-json-and-object-literal-notation)

# android - 无法使用 Android 应用程序的 addView 合并两个 LinearLayouts

> ID：11562243
> 
> 赞同：0
> 
> 时间：2012-07-19T13:45:45.243
> 
> 标签：android, android-linearlayout

我正在尝试合并两个这样的线性布局：

```
ViewGroup.LayoutParams lp = new ViewGroup.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);
main.addView(namnLL,lp);
    hscrolla.addView(ll_scrolla,lp);
    scrolla.addView(hscrolla,lp);
    main.addView(scrolla,lp);
    setContentView(main, lp); 
```

但是，当我运行应用程序时，只有第一个“main”可见。

有谁知道我做错了什么？

编辑：这是一些额外的代码：

```
LinearLayout main = new LinearLayout(this);
main.setOrientation(LinearLayout.HORIZONTAL);

LinearLayout ll_scrolla=new LinearLayout(this);
ScrollView scrolla=new ScrollView(this);
HorizontalScrollView hscrolla=new HorizontalScrollView(this);

LinearLayout namnLL = new LinearLayout(this);
LinearLayout textrutaView = new LinearLayout(this);
textrutaView.setOrientation(LinearLayout.VERTICAL);

//Everything named something with "tv" are TextViews
namnLL.addView(tvNamn,lp);
textrutaView.addView(tv1,lp);
textrutaView.addView(tv2,lp);
textrutaView.addView(tv3,lp);
textrutaView.addView(tv4,lp);
textrutaView.addView(tv5,lp);

namnLL.addView(namnTV);
ll_scrolla.addView(textrutaView); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:13:06.750

以这种方式改变`LinearLayout`方向`VERTICAL`：

```
main.setOrientation(LinearLayout.VERTICAL); 
```

默认是`HORIZONTAL`

# javascript - jTable 不显示

> ID：11562244
> 
> 赞同：0
> 
> 时间：2012-07-19T13:45:46.210
> 
> 标签：javascript, jquery, html, jquery-jtable

我正在尝试建立一个包含 jQuery 和 jTable 的网站。因此，我一直在尝试使用网站提供的示例 jTable 脚本，但似乎无法返回任何输入。文件路径都有效，我检查以确保 jQuery 已加载（确实如此）。我真的不确定我做错了什么，如果有的话。谢谢！

jTable 文件：

```
<html>
<head>
<link href="JQueryUI/css/smoothness/jquery-ui-1.8.21.custom.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<link href="jtable/themes/standard/blue/jtable_blue.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jtable/jquery.jtable.js"></script>
</head>
<title>Under Construction</title>
Hello World
<div id="PersonTableContainer"></div>
<script type="text/javascript">
 $(document).ready(function () {
        $('#PersonTableContainer').jtable({
           title: 'Table of people',
            actions: {
    listAction: 'PersonList.php'
    createAction: 'CreatePerson.php'
    updateAction: 'UpdatePerson.php'
    deleteAction: 'DeletePerson.php'
        },
        fields: {
            PersonId: {
                key: true,
                create: false,
                edit: false,
                list: false
            },
            Name: {
                title: 'Author Name',
                width: '40%'
            },
            Age: {
                title: 'Age',
                width: '20%'
    },
            RecordDate: {
                title: 'Record date',
                width: '30%',
                type: 'date',
                create: false,
                edit: false
            }
        }
    });

    $('#PersonTableContainer').jtable('load');
}); 
```

个人列表.php

```
<?php
$link = new mysqli("localhost", "user", "pass", "people");

$query = "SELECT * FROM people";
$results = mysqli_query($link, $query);
$rows = array();
while($row = mysqli_fetch_assoc($results))
{
    $rows[] = $row;
}
$jTableResult = array();
$jTableResult['Result'] = "OK";
$jTableResult['Records'] = $rows;
print json_encode($jTableResult);
}
?> 
```

PersonList.php 在终端中返回正确的输出，它似乎没有在网站/jTable 中显示任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:07:24.757

试试下面，让我知道它是否有效，我没有很多经验，但如果你需要，我什至为它制作了自定义搜索功能。

我使用单个操作文件，但我使用 $_REQUEST，而不是像您那样使用不同的文件。

```
//Get records from database
$result = mysql_query("SELECT * FROM people;");

//Add all records to an array
$rows = array();
while($row = mysql_fetch_array($result))
{
$rows[] = $row;
}

//Return result to jTable
$jTableResult = array();
$jTableResult['Result'] = "OK";
$jTableResult['Records'] = $rows;
print json_encode($jTableResult); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-17T02:41:11.550

要调试这个，我将从三个角度开始： 1\. 查看开发人员工具中的 AJAX 响应。在网络选项卡上的 Chrome 中，按 XHR 过滤。首先验证是否正在进行 AJAX 调用并查看响应。2\. 验证 AJAX 响应是否进入 jtable 上下文。只需在您的字段属性下添加这些行：

```
fields: {
    ...
},
recordsLoaded: function(event, data) {
    console.log(data);
} 
```

3\. 在浏览器控制台中展开这个console.log 对象并查看数组项。jtable 区分大小写，因此生成的参数必须具有相同的拼写和大小写。它通常很容易更改 jtable 描述中的字段名称以匹配 db 字段名称。

# php - PHP：用于在 html 元素中查找类的正则表达式

> ID：11562252
> 
> 赞同：-1
> 
> 时间：2012-07-19T13:46:15.647
> 
> 标签：php, html, regex

我有一个带有子菜单的 html ul 菜单。我想用 PHP 在子菜单的第一项中添加一个“first-item”类。

```
<ul id="menu-main" class="menu">
  <li id="menu-item-68" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-68"><a href="...">ITEM1</a></li>
  <li id="menu-item-69" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-69"><a href="...">ITEM2</a>
  <ul class="sub-menu">
    <li id="menu-item-70" class="first-item menu-item menu-item-type-post_type menu-item-object-page menu-item-70"><a href="...">SUB-ITEM-1</a></li>
    <li id="menu-item-71" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-71"><a href="...">SUB-ITEM2</a></li>
  </ul>
  <li id="menu-item-73" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-73"><a href="...">ITEM3</a></li>
</ul> 
```

（在文本中查找“第一项”）

到目前为止，我遇到了类似的事情：

```
$output = preg_replace('/(sub-menu.*class.*)menu-item/smi', '$1 first-item menu-item', $output, 1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:31:09.277

首先，第二个`<li>`缺少结束`</li>`。修复该问题将允许您使用它，它使用 DOMDocument / DOMXPath 来更改`<li>`子菜单中第一个的类：

```
$doc = new DOMDocument;
$doc->loadHTML( $html);

$xpath = new DOMXPath( $doc);
$first_node = $xpath->query( '//ul[@id="menu-main"]/ul[@class="sub-menu"]/li')->item(0);

$new_class = $doc->createAttribute( "class");
$new_class->appendChild( $doc->createTextNode( "first-item "));
$new_class->appendChild( $doc->createTextNode( $first_node->getAttributeNode("class")->value));

$first_node->setAttributeNode( $new_class); 
```

这导致`<li>`子菜单中的第一个[看起来像](http://viper-7.com/6rgZZI)：

```
string(198) "<li id="menu-item-70" class="first-item menu-item menu-item-type-post_type menu-item-object-page menu-item-70"><a href="...">SUB-ITEM-1</a></li>" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:32:38.293

为此，请使用 jQuery 或 JavaScript。

这是使用 jQuery 的一种方法：

```
$('.sub-menu').find('li:first-child').addClass('first-item'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T14:15:20.027

使用[DOMDocument](http://php.net/manual/en/class.domdocument.php)和[DOMXPath](http://php.net/manual/en/class.domxpath.php)会好得多。它们提供了导航 DOM 的方法。您将使用类似下面的内容来查找子菜单（虽然我没有测试过它，所以 xpath 可能不完全正确）。一旦你找到了你感兴趣的 DOM 元素，你就可以修改它的 class 属性。

```
$dom = new DOMDocument ();
$dom -> loadHTML ($htmlString);
$path = new DOMXpath ($dom);

$firstItem = $path -> query ('//ul[@id="main-menu"]//ul[@class="sub-menu"]/li[1]'); 
```

# xterm - sles 11.2 上的 xterm

> ID：11562253
> 
> 赞同：0
> 
> 时间：2012-07-19T13:46:19.097
> 
> 标签：xterm, suse

我正在尝试让 xterm 在 sles 11.2 上工作。我最近在 10.3 上做了它，它真的很简单，但在 11.2 上没有任何效果。

在 10.3 上，我在服务器上安装了 xterm，并在本地 PC 上运行 xming for windows。然后从腻子转到 SSH > X11 > 启用 X11 转发。当我连接到服务器时，我可以运行 xterm 并立即运行。

但是，当我在 Sles 11.2 上做同样的事情并尝试运行 xterm 时，它说显示未设置。

我需要为 11.2 做些什么才能使其正常工作。没有启用任何防火墙，所以这不是问题。

感谢您的任何帮助，您可以提供。

**更新** 我已经按照 twalberg 的建议更改了 SSH 配置文件，但仍然没有运气。

在`/etc/ssh/ssh_config I have the following`

```
Host *
#   ForwardAgent no
   ForwardX11 yes
ForwardX11Trusted yes 
```

在`/etc/ssh/sshd_config I have the following`

```
X11Forwarding yes 
```

然后我使用 ssh 重新启动`/etc/init.d/ssh restart`，然后使用 putty 执行问题中提到的相同步骤，但仍然找不到显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:11:13.630

我怀疑`sshd`您的 11.2 机器出于安全原因配置为不允许 X11 转发。它需要在客户端（您正在执行的操作）和服务器端（在 中`sshd_config`）启用它才能工作，因此您可能需要调整 SLES 系统上的配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T15:20:17.033

我已经设法找出问题所在。我需要在 yast 中安装 x-core 包。在 sles 10.3 中不需要这样做，但显然在 11.2 中你需要这样做。

感谢大家的帮助和建议。

# c# - 如果我担心内存使用情况，我应该避免使用 MVVM 吗？

> ID：11562257
> 
> 赞同：2
> 
> 时间：2012-07-19T13:46:31.533
> 
> 标签：c#, .net, wpf, mvvm, prism

我有一个 WPF 应用程序，它应该是紧凑的，内存占用最少。GUI从流程的角度来看很简单，页面和网格很少，但从图形、动画等的角度来看却相当丰富。

我有使用 Prism 编写应用程序的经验，我非常喜欢它。但对于简单的任务来说，它看起来太重了。它不是 LOB 应用程序，但我仍然需要可测试性、GUI/流/业务分离等。

我应该使用 MVVM 吗？

我不确定在尝试最小化应用程序的内存使用时是否应该担心使用 MVVM 设计模式的开销。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T14:03:18.287

是的，如果您正在使用 WPF，请使用 MVVM

WPF 被设计成有一个 UI 层和一个数据层，这非常适合 MVVM 设计模式。我发现它使编码和维护变得更快、更容易。

您根本不必使用成熟的 MVVM 框架，甚至任何 MVVM 框架。您可以选择您有兴趣使用的部分（继承的基础对象、`INotifyPropertyChanged`或`RelayCommand`、`DelegateCommand`消息传递系统等），然后删除所有其余部分。或者你可以建立自己的。

开销很小，绝对不值得避免这种模式，但是一些 MVVM 框架确实包含不需要的功能并且可能会导致一些开销，因此请确保您只从中挑选出您想要的部分。

关键是，如果您使用 WPF，请使用 MVVM 设计模式。这将使您的生活以及从事该项目的任何未来开发人员的生活变得更加轻松:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T14:04:06.150

我真的会推荐使用 MVVM。

我们在一个大型项目中使用了该模式，并且效果很好，有以下建议：

*   我们使用非常有用的，顾名思义，light，[MVVM Light Toolkit](http://mvvmlight.codeplex.com/.) lib
*   我们不使用 ViewModelLocator 的东西。当您动态实例化视图时，很难让它工作。`this.Datacontext = new TheViewModel();`代码隐藏中的老好人很好
*   我们不使用 Messenger 的东西。太复杂了，收益很少。从视图模型触发的一个很好的旧事件比 IMO 更简单。
*   我们不使用 EventToCommand 东西，这在很多情况下会使 XAML 变得复杂。
*   **当代码纯粹与视图相关时，我们确实在后面编写代码**。对于鼠标手势功能（拖放...）或其他特定的 UI 事物，代码隐藏非常适合控制事件处理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T14:09:37.903

首先：是的，MVVM 是一种推荐的方式来构建 C#/WPF 应用程序

第二：您可以使用 MVVM 根本没有框架，那么它就像您构建它一样轻量级。

在此处查看可能的 MVVM 框架的概述： [SO in deep discussion of different MVVM frameworks](https://stackoverflow.com/questions/1409553/what-framework-for-mvvm-should-i-use)

# iphone - 使用自我。设置但不访问导致问题

> ID：11562259
> 
> 赞同：0
> 
> 时间：2012-07-19T13:46:36.907
> 
> 标签：iphone, objective-c, xcode, self, accessor

我目前很困惑为什么以下情况在某些情况下有效，但在其他情况下无效。使用以下代码时：

```
NSString *currentLoc = [[NSString stringWithString:sceneName] retain];
self.currentLocation = currentLoc;
[currentLoc release]; 
```

`NSString *currentLocation, of type (nonatomic, retain)`这应该用新值覆盖 my 。为什么我现在不能通过执行以下操作来访问此值：

```
NSString *test = currentLocation; 
```

调试时，我看到 test 设置为随机数组，因此指针必须指向完全不同的东西。我已经检查了代码，并且 currentLocation 变量仅在此处设置。如果我使用以下内容：

```
NSString *test = self.currentLocation; 
```

然后现在显示正确的值，有人可以解释为什么 currentLocation / self.currentLocation 被视为不同的对象，我理解那个自我。使用访问器，但如果设置正确，它们肯定都应该指向相同的值？

编辑1：（所有代码）

。H

```
NSString *currentLocation;
@property (nonatomic, retain) NSString *currentLocation; 
```

.m

```
@synthesize currentLocation;

NSString *currentLoc = [[NSString stringWithString:sceneName] retain];
    self.currentLocation = currentLoc;
    [currentLoc release];

if (currentLocation != nil && singleton.storyLocation != nil)
    {
        if (boolMoviePlayed == false && [singleton.storyLocation isEqualToString:currentLocation]) // crash here due to current location being set to an array
            [buttonPlayMovie setHidden:!textVisible];
    }

    self.currentLocation = nil; // viewDidUnload
    [currentLocation release]; // dealloc 
```

编辑2：（更新代码，仍然崩溃）

所以这次我尝试按照设置的方式访问代码，如下所示：

```
if (self.currentLocation != nil && singleton.storyLocation != nil)
{
    if (boolMoviePlayed == false && [singleton.storyLocation isEqualToString:self.currentLocation])
        [buttonPlayMovie setHidden:!textVisible];
} 
```

但是，这一次我遇到了一个变量似乎未设置的崩溃，即使它在此过程中的任何时候都没有更改（参见 EDIT 1 中的代码）。

编辑 3：

现在我很困惑，我以为我有答案，但我只是没有。我尝试使用 Erics 的建议：

@synthesize currentLocation = _currentLocation;

然后我确保所有对 currentLocation 的访问都是使用 self.currentLocation = xyz 设置的。现在谈到 dealloc 方法时，我总是被警告不要使用 self. 在交易中。但这意味着我所有的值都为零，因为 currentLocation 尚未设置。使用 [self.currentLocation release] 是否安全，或者如何解决我的问题？

编辑4：

据我所知，然后你在 dealloc 中使用 [_currentLocation release]，如果我错了，请纠正我，如果不是，我现在会沿着这条路线走，因为它似乎有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T13:49:57.487

我会看看你是如何合成的以及你的 ivars。实际上，currentLocation 是直接引用 iVar，而 self.currentLocation，如果您像这样合成它可能会指向不同的变量，例如：

```
@synthesize myVar = _myVar 
```

然后你的界面中也有

```
interface {
  myVar
} 
```

在这种情况下，您会看到所描述的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:51:06.417

`currentLocation`是一个变量，`self.currentLocation`是一种调用属性getter（一种方法）的奇特方式`- (NSString*)currentLocation`。

显然，您正在使用该属性来存储值，并且变量和您的属性之间没有设置连接。

您应该检查您正在合成属性的行`currentLocation`。

对edit3的回答：

`init`方法 和`dealloc`是应该直接访问属性 ivar 的唯一两个地方。在`dealloc`你通常直接写`[_currentLocation release]`。然而，关于它的讨论很大。一般来说，只是投入是正确的，`self.currentLocation = nil`但`dealloc`你必须知道你在做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T13:50:06.847

使用`@synthesize currentLocation = _currentLocation`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T03:03:29.923

您显示的代码没有任何问题。但是您已经展示了代码的点点滴滴（甚至没有完整的方法或类），而且很难说出发生了什么。错误必须来自其他东西。所有这些关于更改变量名的讨论都完全无关紧要——使用相同的变量名并没有错。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T17:13:27.370

为了简单起见：

属性 = getter + setter + iver

**经验。#1：**

。H

```
NSString *yourName;  //iver
@property (nonatomic, retain) NSString *myName; //property 
```

.m

```
@synthesize myName;   

-(void)someMethod{
    self.myName = @"Mike";

    NSString * name = self.myName; // name will be "Mike"
    name = myName; // name will be "Mike"

    name = yourName;   // name will be null
} 
```

这里 yourName、self.myName 和是三个不同的东西：

yourName 是 iver self.myName 在两种不同情况下是 getter 或 setter myName 是 iver

现在我想将 yourName 连接到 myName 属性。让我们看看如何在 Exp。#2

经验。#2

.m

```
@synthesize myName = yourName;   

-(void)someMethod{
   self.myName = @"Mike";

    NSString * name = self.myName; // name will be "Mike"

    name = yourName;   // name will be "Mike"

    yourName = @"James";

   name = self.myName ; // name will be "James"

} 
```

在这里你不能使用 myName 。

# image - 检查文件夹中是否存在文件 actionScript 3

> ID：11562261
> 
> 赞同：2
> 
> 时间：2012-07-19T13:46:49.380
> 
> 标签：image, actionscript-3, apache-flex, air, directory

我想检查文件是否存在，如果不显示 noimage.gif。以下在控制台中返回 false，您能帮忙吗？

```
 ...
[Bindable]
private var imageName:String;   
imageName  = "pca" + this._product.productID + ".jpg";

var fileName:File = new File() 
fileName.nativePath = "C:/STSMultimediaSync/market/pictures/{imageName}"; 
trace(fileName.exists);
.... 
```

PS - 我知道文件存在，因为当我对图像名称进行硬编码时，值变为 true。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T13:51:23.187

我认为您不能在 AS3 中执行 {}（可以在 mxml 中完成）。尝试 ：

```
fileName.nativePath = "C:/STSMultimediaSync/market/pictures/"+imageName; 
```

# mysql - 如何使 MySQL 表中的列唯一？

> ID：11562263
> 
> 赞同：-1
> 
> 时间：2012-07-19T13:46:51.310
> 
> 标签：mysql, sql

我`QUES`在 mysql 数据库中有一个表。

该表有一列`BODY`目前不是唯一的。

该表有很多行，我确信目前它们`BODY`本质上是唯一的，但未定义为属性。

如何更新`BODY`具有唯一定义为属性的列？

有人可以建议正确的 sql 查询吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:52:10.163

下面是一些示例 SQL 语句，可以帮助您入门。这假定这`body`是一个字符类型列，并且您希望“保留”尽可能多的现有值，并附加一个唯一的字符串以使其“更加独特”。

```
-- find values of `body` that are "duplicated" in the table
SELECT q.body
     , COUNT(1) as cnt_
  FROM ques q
 GROUP BY q.body
HAVING COUNT(1) > 1 
```

该查询只是为我们提供了`body`“重复”的特定值，以及共享该值的行数。我们需要能够识别具有这些唯一值的行，因此我们可以运行如下查询：

```
-- find all rows that have one of the "duplicated" values
SELECT s.id
     , s.body
  FROM (SELECT q.body
          FROM ques q
         WHERE q.body IS NOT NULL 
         GROUP BY q.body
        HAVING COUNT(1) > 1
       ) r
  JOIN ques s ON s.body = r.body 
```

这些是我们需要更新的行。`body`为了使这些唯一，我们可以为每一行的列分配一个新的唯一值。如果没有任何“新”值与表中已存在的值重复，我们将拥有唯一值。

更新语句示例：

```
-- append unique value to end of each body value
UPDATE (SELECT q.body
          FROM ques q
         WHERE q.body IS NOT NULL 
         GROUP BY q.body
        HAVING COUNT(1) > 1
       ) r
  JOIN ques s ON s.body = r.body
   SET s.body = CONCAT(s.body,'<!--',s.id,'-->'); 
```

在这里，我们将一个值“附加”到现有主体值的末尾。我们可以利用表中保证不为空且唯一的现有列。AUTO_INCREMENT 主键列是合适的候选者。（我们可以让语句生成一个唯一的整数。）

注意：不能保证我们分配的新值`body`与数据库中已经存在的值不同。我们只是识别现有的重复项，然后应用更改以使这些值彼此唯一。我们真的需要回过头来，再次检查重复值。

另请注意，这里没有检查`body`列的最大长度，即每个现有值的末尾是否有“空间”来附加给定格式的字符串。所以那里还有改进的空间，检查现有`body`值的大小（使用`LENGTH()`or`CHAR_LENGTH()`函数）并将其与列定义进行比较。

此外，如果有 2 行具有重复值，我们实际上只需要更新其中的一行，我们可以将其中的一行保留为现有值。示例查询现在不执行此操作，但可以执行此操作。

但这应该足以让您入门。

当然，一旦你的值是唯一的，你会想要在这个列上添加一个 UNIQUE 约束，以防止将来创建重复项。

* * *

这演示了我们如何保持一行的 body 值不变。（相应的 UPDATE 语句会将该`IF()`表达式分配给 body 列。）

```
-- show new values for body, leave the value for one row unchanged
SELECT s.id
     , s.body AS old_val
     , IF(s.id = q.min_id, s.body, CONCAT(s.body,'<!--',s.id,'-->')) AS new_val
  FROM (SELECT q.body
             , MIN(q.id) AS min_id
          FROM ques q
         WHERE q.body IS NOT NULL
         GROUP BY q.body
        HAVING COUNT(1) > 1
       ) r
  JOIN ques s ON s.body = r.body 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:54:54.317

```
ALTER TABLE QUES ADD UNIQUE (BODY). 
```

[在这里](http://dev.mysql.com/doc/refman/5.6/en/alter-table.html)阅读精美的手册。

# boost - 在 OSX Lion 10.7 下安装 GPUOCELOT

> ID：11562266
> 
> 赞同：1
> 
> 时间：2012-07-19T13:47:07.303
> 
> 标签：boost, cuda, emulation, gpu

我是stackoverflow的新手。我的问题是关于 gpuocelet。有人在用吗？它是否适用于 unix（我使用的是带有 os x 10.7 的 macbook air）操作系统？我尝试了多种方式来安装它，但没有成功。我按照这些说明正确安装了 macports 所需的所有软件包[http://code.google.com/p/gpuocelot/downloads/detail?name=Ocelot_Installation_manual2.pdf](http://code.google.com/p/gpuocelot/downloads/detail?name=Ocelot_Installation_manual2.pdf) 特别是我通过 macports 安装了 boost 1.50，但运行时出现错误gpuocelot 文件夹中的 ./configure 是：

`MacBook-Air-di-Manfredo:downloads manfredo$ cd ocelot-2.0.969/
MacBook-Air-di-Manfredo:ocelot-2.0.969 manfredo$ ./configure
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... ./install-sh -c -d
checking for gawk... no
checking for mawk... no
checking for nawk... no
checking for awk... awk
checking whether make sets $(MAKE)... yes
checking for style of include used by make... GNU
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables...
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking dependency style of gcc... gcc3
checking how to run the C preprocessor... gcc -E
checking for grep that handles long lines and -e... /usr/bin/grep
checking for egrep... /usr/bin/grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking minix/config.h usability... no
checking minix/config.h presence... no
checking for minix/config.h... no
checking whether it is safe to define __EXTENSIONS__... yes
checking for main in -lboost_system-mt... no
configure: error: "libboost_system required"
MacBook-Air-di-Manfredo:ocelot-2.0.969 manfredo$`

我的路径是

> ```
>  PATH=/Users/manfredo/downloads/boost_1_42_0/stage/lib:/Users/manfredo/downloads/boost_1_42_0/libs:/Users/manfredo/downloads/boost_1_42_0/libs:/Users/manfredo/downloads/boost_1_42_0/boost/system:/Users/manfredo/downloads/boost_1_42_0/boost:/opt/local/bin:/opt/local/sbin:/opt/local/lib:/usr/local/cuda/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin 
> ```

欢迎任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T08:47:18.760

看起来您已经尝试将另一个版本的 Boost 安装在您的主目录中，因为您已将其放在您的路径上，Boost 也不会在路径上，但标头应位于 INCLUDE 环境变量中，而库应位于 lib 变量中。

对于 macport，它们分别是 /opt/local/include 和 /opt/local/lib。

例如来自[控制构建的变量的 Cmake](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#section_VariablesthatControltheBuild)

```
CMAKE_INCLUDE_CURRENT_DIR=/opt/local/include
CMAKE_LIBRARY_PATH_FLAG=/opt/local/lib 
```

# asp.net - System.Data.OleDb.OleDbException：找不到可安装的 ISAM

> ID：11562267
> 
> 赞同：9
> 
> 时间：2012-07-19T13:47:07.163
> 
> 标签：asp.net, oledb

我已经在网上搜索过，发现很多人都在问这个问题，但没有人确定我的答案。

我有一个连接类和一个在页面中使用该类的方法。

数据连接

```
public static OleDbConnection ConnectExcel()
{
    //Store the connection details as a string
    string connstr =
        String.Format(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=pricelist.xlsx;Extended Properties=Excel 12.0 Xml;HDR=YES");

    //Initialise the connection to the server using the connection string.
    OleDbConnection oledbConn = new OleDbConnection(connstr);

    //Open the connection, we do this here so we can instantly be able to use SQL commands in the code.
    oledbConn.Open();

    return oledbConn;
}

public static void DisconnectExcel()
{
    _oledbConn.Dispose();
    _oledbConn.Close();
} 
```

以及调用它的代码

```
protected void Page_Load(object sender, EventArgs e)
{
    // Connection String
    const string xlStr = "SELECT * FROM [Sheet2$]";

    // Create OleDbCommand object and select data from worksheet Food
    OleDbCommand cmd = new OleDbCommand(xlStr, DataConn.ConnectExcel());

    // Create new OleDbDataAdapter
    OleDbDataAdapter oleda = new OleDbDataAdapter();

    oleda.SelectCommand = cmd;

    // Create a DataSet which will hold the data extracted from the worksheet.
    DataSet ds = new DataSet();

    // Fill the DataSet from the data extracted from the worksheet.
    oleda.Fill(ds);

    // Bind the data to the GridView
    gridPricelist.DataSource = ds;
    gridPricelist.DataBind();
} 
```

是的，我仍然得到：

> *System.Data.OleDb.OleDbException：找不到可安装的 ISAM。*

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-19T13:58:15.967

如果您使用超过 1 个扩展属性，则必须引用值标记，否则驱动程序无法将它们与连接字符串中的其他非扩展属性区分开来；

```
...Extended Properties=""Excel 8.0;IMEX=1""" 
```

**修改你的连接字符串**

```
String.Format(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=pricelist.xlsx;Extended Properties=""Excel 12.0 Xml;HDR=YES"""); 
```

参考： [找不到可安装的 ISAM](https://stackoverflow.com/questions/8120699/could-not-find-installable-isam)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-15T13:48:28.933

请把“扩展属性”放在''中。

也就是说，就像下面的语句：

> string connStr = String.Format(@"Provider=Microsoft.ACE.OLEDB.12.0;数据源=pricelist.xlsx;**扩展属性= `'`Excel 12.0 Xml;HDR=YES`'`** ")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-07T19:05:01.513

如果您安装了 LibreOffice，请查找 cli_basetypes.dll、cli_cppuhelper.dll、cli_oootypes.dll、cli_uno.dll、cli_ure.dll、cli_uretypes.dll 然后添加对您项目的引用（以使用 LibreOffice API），我还安装了“Microsoft Office Word、Excel 和 PowerPoint 文件格式的兼容包”和“Microsoft Access Database Engine 2010 Redistributable”（无需完成 Office 安装即可获得 ACE.OLEDB.12.O 连接）。这是 VB 示例的一部分，我在其中连接到 oledb 以创建一些查询。

```
 OpenFileDialog.Filter = "Spreadsheets (*.xls*)|*.xls*"
    OpenFileDialog.Multiselect = False
    Try
        If (OpenFileDialog.ShowDialog() = System.Windows.Forms.DialogResult.OK) Then
            objOffice = CreateObject("com.sun.star.ServiceManager") 'preparar instancia libreOffice (prepare libreOffice instance)
            instOffice = objOffice.createInstance("com.sun.star.frame.Desktop")
            Dim obj(-1) As Object
            Dim myDoc = instOffice.loadComponentFromURL("file:///" & OpenFileDialog.FileName.Replace("\", "/"), "_default", 0, obj)
            Dim hojas = myDoc.getSheets().getElementNames() 'Obtener nombres de las hojas de calculo (get Spreadsheet names)
            System.Threading.Thread.Sleep(1000) 'Esperar a que termine la instancia Office (await libreOffice thread)
            myDoc.Close(True)

            Dim MyConnection As System.Data.OleDb.OleDbConnection 'Preparar conexión para realizar consulta tipo sql (preparing connection)
            Dim DtSet As System.Data.DataSet
            Dim MyCommand As System.Data.OleDb.OleDbDataAdapter

            If OpenFileDialog.FileName.ToUpper.Contains(".XLSX") Then
                MyConnection = New System.Data.OleDb.OleDbConnection("provider=Microsoft.ACE.OLEDB.12.0;Data Source='" & OpenFileDialog.FileName & "';Extended Properties='Excel 12.0 Xml;HDR=YES;IMEX=1;'")
            Else
                MyConnection = New System.Data.OleDb.OleDbConnection("provider=Microsoft.ACE.OLEDB.12.0;Data Source='" & OpenFileDialog.FileName & "';Extended Properties='Excel 12.0;HDR=YES;IMEX=1'")
            End If 
```

# php - 使用 Eclipse 在 PHP 中处理阿拉伯字符串

> ID：11562276
> 
> 赞同：9
> 
> 时间：2012-07-19T13:47:22.697
> 
> 标签：php, eclipse, editor, arabic

我目前正在对一个网站进行本地化，该网站最初只有英文版。第三方公司进行了翻译，并为我们提供了包含翻译的 excel 文件。我成功地将其转换为可以在视图中使用的 PHP 数组。我正在使用 Eclipse for Windows 来编辑我的 PHP 文件。

一切都很好，除了我需要在我的字符串中添加变量，例如：

```
'%1 is now following %2' 
```

在阿拉伯语中，我得到了这样的字符串：

```
'_______الآن يتتبع _______' 
```

我发现用 %1 和 %2 替换*_*非常困难，因为阿拉伯语部分是从右到左的字符串，而`%1`,`%2`将被视为从左到右或从右到左，而我不是当然 。我的参数顺序几乎没有我期望的结果，因为 %1 有时会到字符串的左边，有时会在右边，这取决于我开始输入的位置。复制粘贴替换字符串也会产生同样奇怪的效果。

大多数时候我会得到这样的字符串：

```
%2الآن يتتبع %1 
```

%1 应位于右侧站点，%2 应位于左侧站点。`%1`显然被认为是从右到左的字符串，因为 % 出现在右侧。被`%2`认为是从左到右。

我敢肯定有人之前有这个问题。有什么方法可以在 Eclipse 中轻松完成？或者使用更智能的编辑器处理阿拉伯语问题？或者可能是 Windows 问题？有解决方法吗？

**更新**

我也尝试将我的字符串拆分为多个字符串，但这也改变了参数的顺序：

```
'%1' . 'الآن تتبع' . '%2' 
```

**更新 2**

似乎更改替换字符串会使事情变得更好。它可能与阿拉伯字符串中数字的处理方式有关。这个字符串在 Eclipse 中被编辑，没有任何问题。参数顺序正确，字符串被PHP正确处理：

```
'{var2} الآن يتتبع {var1}' 
```

如果没有找到其他解决方案，这可能是一个不错的选择。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T14:15:48.363

作为一名说阿拉伯语的人，我得到了很多本地化任务。虽然我没有特别遇到这个问题，但我在编辑时遇到了很多从左到右/从右到左的问题。我已经成功使用[Notepad++](http://notepad-plus-plus.org/)。

所以当我想编辑阿拉伯语文本时，这就是我通常会做的事情

1.  打开**空**记事本++ *
2.  将编码设置为 UTF-8（编码 -> UTF-8 编码）
3.  启用 RTL 模式（视图 -> 文本方向 RTL）
4.  粘贴你的字符串

这是一个屏幕截图，显示了我如何编辑你的字符串

![在此处输入图像描述](../Images/73d55874095a7507a0db10f2ce597db7.png)

*：出于某种原因，每当我打开一个已经存在的文件时，事情就会变得很糟糕。所以也许我很迷信，但这一直对我有用。

**更新：**我第一次这样做时我很怀疑，因为字符串*看起来*不对，但后来我这样做了：

```
print_r(str_split($string)); 
```

我看到它们的顺序确实正确。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T19:41:10.177

@Adnan 帮助我意识到并后来确认将拉丁数字与阿拉伯文本混合时存在问题。

基于该结论，解决方案就是停止使用`%1`, `%2`, `%3`, ... 作为占位符。我将使用更具描述性的关键字，例如`{USER}`, `{ALBUM}`, `{PHOTO}`, ...

这显示了 PHP 文件中的预期结果，并且很容易编辑：

```
'ar' => '{USER} الآن يتابع {ALBUM}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T15:41:07.663

对于这种任务，我更喜欢原来的记事本。

1.  打开记事本，确保您处于 LTR 模式
2.  类型`%1`
3.  按 将模式更改为 RTL`CTRL + SHIFT`
4.  将阿拉伯语字符串粘贴到编辑器中。
5.  再次按下返回 LTR `CTRL + SHIFT`。
6.  类型`%2`
7.  全选`CTRL + A`并复制`CTRL + C`
8.  粘贴到 IDE 中。它**应该**看起来很奇怪，但按预期执行。

**使用记事本的原因：**更复杂的编辑器，例如 Notepad++、Sublime、Coda (Mac) 和一些 IDE——在您的情况下，Eclipse**可能**没有使用正确的编码，而记事本很**简单**，但**适用**于多语言任务。

# python - 如何在 python 3.2（windows 7）上使用 .xlsx（excel-2007）文件时检测颜色然后应用颜色

> ID：11562279
> 
> 赞同：0
> 
> 时间：2012-07-19T13:47:39.330
> 
> 标签：python, python-3.x, excel-2007, openpyxl

我正在使用 openpyxl 解析 .xlsx 文件。在写入 xlsx 文件时，我需要保持与输入 .xlsx 文件的单元格中相同的字体颜色和单元格颜色。知道如何从中提取颜色编码单元格，然后在另一个 excel 文件中实现相同。在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T18:28:13.793

我相信您可以通过以下方式访问字体颜色： color = ws.cell(row=id,column=id).style.font.color

我不确定如何访问单元格颜色。

# c++ - C++（逻辑复制构造函数）如何复制对象？

> ID：11562282
> 
> 赞同：1
> 
> 时间：2012-07-19T13:47:51.377
> 
> 标签：c++, pointers, object, copy-constructor

我有一堂课：

```
class Person{
public:
    Person();
    ~Person();
    string name;
    int* age;
};

int main()
{
    Person* personOne = new Person;
    personOne->name = "Foo";
    personOne->age = new int(10);

    return 0;
} 
```

如何创建另一个复制所有 personOne 数据的 Person 对象？年龄指针需要指向一个新的 int，因此当 personOne 或 personTwo 中的年龄发生变化时，它不会相互影响。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T13:50:51.667

有两种可能：

*   复制构造函数 + 赋值运算符
*   `clone`方法

代码：

```
class Person{
public:
    Person();
    ~Person();
    Person (const Person& other) : name(other.name), age(new int(*(other.age)))
    {
    }
    Person& operator = (const Person& other)
    {
        name = other.name;
        delete age; //in case it was already allocated
        age = new int(*(other.age))
        return *this;
    }
    //alternatively 
    Person clone()
    {
        Person p;
        p.name = name;
        p.age = new int(age);
        return p;
    }

    string name;
    int* age;
}; 
```

**在继续之前回答这些：**

*   你真的需要`int`指针吗？
*   你知道智能指针吗？
*   你释放你分配的所有内存吗？
*   你初始化构造函数中的所有成员吗？

# r - 格子 (R) 中密度对数图中的小刻度

> ID：11562289
> 
> 赞同：1
> 
> 时间：2012-07-19T13:48:26.160
> 
> 标签：r, lattice

我需要使用 R 的 lattice 包创建密度图。x 轴具有对数刻度。最小的例子：

```
densityplot( ~ mpg, data=mtcars, scales=list(x=list(log=TRUE))) 
```

![在此处输入图像描述](../Images/612d73f34c0f0e86a276c9ca58531226.png)

是否可以在主要刻度之间放置次要刻度线？在 xyplot 中可以使用`xscale.components=xscale.components.log10ticks`，但这不适用于密度图或直方图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:01:03.450

我发现这需要

```
library("lattice")
library("latticeExtra") 
```

现在`xscale.components=xscale.components.log10ticks`有效（对于我认为的所有格子图）。我不知道这`latticeExtra`是需要的。

# java - Play Framework 2.0 表单助手：从复选框到列表

> ID：11562292
> 
> 赞同：12
> 
> 时间：2012-07-19T13:48:30.500
> 
> 标签：java, forms, playframework, playframework-2.0

我有一个包含字符串和列表的模型：

```
public String title;    
public List<String> topics; 
```

在 index.scala.html 我使用一个表单来添加新项目：

```
@form(routes.Application.newPaper()) {
    @inputText(paperForm("title"))
    <input type="submit" value="Create">
    } 
```

用一个简单的字符串，这很好用。但我想显示复选框

```
@for(t <- topics) {
    <input type='checkbox' name='topic' value=@t>@t <br>
} 
```

然后将所有选中的“主题”添加到`List<String> topics;`我的新项目中。如何处理 @form{ ... } 中的复选框？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-04T11:06:14.533

我正在使用**Play!Framework 2.1.0**，以下是解决方案：

**1\. 在 scala 模板中，您必须给所有复选框名称，如下所示：**

```
@form(action = routes.Application.newPaper()) {
   @inputText(paperForm("title"))

   @******* Indexed chekbox name *********@
   @for((t, index) <- topics.zipWithIndex) {
       <input type="checkbox" name="topics[@index]" value="@t">@t <br>
   }

   <input type="submit" value="Create">
} 
```

**2\. 然后在您的控制器中，作为处理表单提交的操作，您应该执行以下操作**：

```
public static Result newPaper() {
    // Bind submitted form value to your model, ex. Paper.java
    Form<Paper> paperForm = Form.form(Paper.class).bindFromRequest();
    Paper paper = paperForm.get();

    Logger.info("Title entered = " + paper.title);
    // Because in template we use indexed name, unchecked item are binded with null value
    paper.topics.removeAll(Collections.singleton(null)); // remove value for unchecked topic
    for (String t : paper.topics) {
       Logger.info("The topic is " + t);
    }
    Logger.info("Total topic selected = " + paper.topics.size());

    return redirect(routes.Application.index()); // redirect page
} 
```

* * *

### 更新

这是解决方案的**另一个想法**。您在 scala 模板上的复选框代码**未修改**。

```
@for(t <- topics) {
    <input type='checkbox' name='topic' value=@t>@t <br>
} 
```

所以**控制器**应该是这样的：

```
public static Result newPaper() {
    // Bind submitted form value to your model, ex. Paper.java
    Form<Paper> paperForm = Form.form(Paper.class).bindFromRequest();
    Paper paper = paperForm.get();

    // get request value from submitted form
    Map<String, String[]> map = request().body().asFormUrlEncoded();
    String[] checkedVal = map.get("topic"); // get selected topics

    // assign checked value to model
    paper.topics = Arrays.asList(checkedVal);

    // for debugging purpose
    for (String t : paper.topics) {
        Logger.info("The topic is " + t);
    }
    Logger.info("Total topic selected = " + paper.topics.size());

    return redirect(routes.Application.index()); // redirect page
} 
```

希望这个想法更优雅.. :)

注意：我也在 Play!Framework 2.1.1 上进行了测试，这对我有用。

# jquery - 如何从 jquery 回调 fnc 返回数据？

> ID：11562297
> 
> 赞同：2
> 
> 时间：2012-07-19T13:48:41.533
> 
> 标签：jquery, callback

我有 jquery 点击回调，这从 DOM 中获取了一些数据，我需要在另一个点击回调中使用这些数据

```
$('#test').click(function () {
    var some_var = $(this).attr('title').split('-');
}); 
```

在另一次点击中我需要使用它

```
$('#test2').click(function () {
    init(data_from_test);
}); 
```

如何将数据从一次单击返回到另一次？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:53:03.450

```
(function() {
    var some_var;
    $('#test').click(function () {
        some_var = $(this).attr('title').split('-');
    });

    $('#test2').click(function () {
        if( some_var) init(some_var);
    });

})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:52:20.077

您必须将数据存储在第一次单击和下一次单击都可以访问的变量中。

我通常会有一个命名空间，所以我会这样做

`App.currentClickContext = {}`

然后在第一次点击

`App.currentClickContext.data = xxxx`

然后在第二个我可以访问该数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T13:52:28.210

[`data`](http://api.jquery.com/data/)您可以将数据保存在某个元素上的 jQuery对象中。

```
$('#test').click(function () {
    var some_var = $(this).attr('title').split('-');
    $(document).data("someData",some_var);
});

$('#test2').click(function () {
    init($(document).data("someData"));
}); 
```

或者，您可以使用全局变量（或单个全局变量的属性，或[Esailija](https://stackoverflow.com/a/11562381/95033)和[jAndy](https://stackoverflow.com/a/11562398/95033)提到的更高范围的变量）。

```
var globalData = null;

$('#test').click(function () {
    globalData = $(this).attr('title').split('-');
});

$('#test2').click(function () {
    if(globalData) {
        init(globalData);
    {
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T13:54:08.780

最简单的方法是在更高范围内使用（免费）变量。例如：

```
(function() {
   var some_var;

   $('#test').click(function () {
       var some_var = $(this).attr('title').split('-');
   });

   $('#test2').click(function () {
       init(some_var);
   });
}()); 
```

还有其他方法可以解决此问题，例如

*   使用`datasets`条目
*   用一个`namespace object`

# android - 如何在另一个 android 上放置布局

> ID：11562301
> 
> 赞同：0
> 
> 时间：2012-07-19T13:48:48.163
> 
> 标签：android

我已经按照[本](http://www.dreamincode.net/forums/topic/270319-how-to-create-a-slide-in-menulist-like-in-facebook-app/)指南制作了像 facebook 应用程序一样的滑动菜单。

`Button`按下 时，屏幕左侧会显示一个新的`Layout`。但它将带有元素的原始元素推`Layout`到屏幕右侧。我怎样才能在原件上`Layout`铺设`Layout`？

请参阅代码示例的链接。谢谢！

**让我重新表述我的问题**

当我按下按钮时，按钮的文本和按钮本身将被推到一侧，并垂直对齐。我怎样才能将按钮“移出屏幕”

![在此处输入图像描述](../Images/437da1f0f678c739e80a243176c65da4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:51:31.620

要将布局/视图相互重叠，您需要使用[`FrameLayout`](http://developer.android.com/reference/android/widget/FrameLayout.html). 它按照定义的顺序设置视图的可见性（例如 CSS 中的 z-index）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:55:56.887

你为什么不使用滑动抽屉？

实际上，我发现了一些实现您正在寻找的类似内容的代码/

[带截图的博客：](http://androidblogger.blogspot.com/2009/01/sliding-drawer-again.html)

[论坛讨论：](http://www.anddev.org/viewtopic.php?p=16622)

[来自 SVN 的结帐代码：](http://code.google.com/p/android-misc-widgets/)

我希望这可以帮助你。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T13:53:57.170

听起来您正在将新布局添加到父布局中，这就是为什么它将原始布局推开的原因。您需要将新布局添加到原始布局中，它将位于原始布局中。

# cakephp-2.0 - cakephp 2.0 的五星级评级系统？

> ID：11562305
> 
> 赞同：1
> 
> 时间：2012-07-19T13:49:03.760
> 
> 标签：cakephp-2.0

请告诉我如何在 cakephp 2.0 中实现五星级评级系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:34:28.803

您必须创建一个插件来显示星级。这是[cakephp 的星级评级插件](http://bakery.cakephp.org/articles/schneimi/2010/08/19/ajax-star-rating-plugin-1)。我用过它，它工作正常。请询问它是否不适合您。

# windows-7 - 在 Windows 上的剪贴板中打印字符串的大小/长度

> ID：11562307
> 
> 赞同：0
> 
> 时间：2012-07-19T13:49:06.490
> 
> 标签：windows-7, clipboard

我希望有一个快速的技巧可以告诉我 Windows 剪贴板中包含的字符串的长度。（如果它实际上是一个字符串）。

它不适用于任何类型的生产代码，而且我不依赖于任何特定的语言。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:53:27.563

在 Java 中：

```
java.awt.datatransfer.Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();
String content = (String) clipboard.getData(DataFlavor.stringFlavor);
int size = content.length(); 
```

根据需要添加额外的错误检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T15:01:29.060

在蟒蛇中：

```
import ctypes
ctypes.windll.user32.OpenClipboard(None)
print len(ctypes.c_char_p(ctypes.windll.user32.GetClipboardData(1)).value)
ctypes.windll.user32.CloseClipboard() 
```

# c# - 访问公共类内部的类类型数组

> ID：11562309
> 
> 赞同：0
> 
> 时间：2012-07-19T13:49:12.790
> 
> 标签：c#

我有一个内部课程

```
namespace commonNamespace
{
    internal class A{}
} 
```

我在同一个程序集中有另一个公共课程

```
public class B{} 
```

我想在 classB 中声明一个 A 类型的数组。前任：

```
namespace commonNamespace
{
    public class B
    {
        A[] array;
    }
} 
```

我收到不一致的可访问性级别错误消息。请让我知道我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:53:31.247

`B`在公开某些类型的实例时，您必须具有公共/受保护的字段或属性`A`。将其标记为内部，您应该一切顺利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:52:43.910

只需将访问修饰符添加到字段数组：

```
public class B
{
   internal A[] array;
} 
```

这是访问修饰符层次结构：

```
 public > protected > internal > internal protected > private 
```

因此，只需选择受保护以下的任何内容，您就可以了。

# wpf - 从模板列中的嵌套控件获取 DataGridCell 而无需遍历可视化树

> ID：11562310
> 
> 赞同：0
> 
> 时间：2012-07-19T13:49:14.630
> 
> 标签：wpf, datagrid, wpfdatagrid, visual-tree

DataGridCell 似乎不在控件的 VisualTree 中。

我有一个 DataGridTemplateColumn，它在网格内的堆栈面板中包含一个矩形和标签。

```
<t:DataGridTemplateColumn>
    <t:DataGridTemplateColumn.CellTemplate>                                
        <DataTemplate>
            <Grid FocusManager.FocusedElement="{Binding ElementName=swatch}">
                <StackPanel Orientation="Horizontal">
                    <Rectangle Name="swatch" PreviewMouseLeftButtonDown="swatch_PreviewMouseLeftButtonDown" />
                    <Label/>
                </StackPanel>
            </Grid>
        </DataTemplate>
    </t:DataGridTemplateColumn.CellTemplate>
</t:DataGridTemplateColumn> 
```

我希望`PreviewMouseLeftButtonDown`事件在可视树中向上迭代，直到找到父元素为空`DataGridCell`之后。`Grid`

```
private void swatch_PreviewMouseLeftButtonDown(object sender, MouseButtonEventArgs e)
        {          
            DataGridCell cell = null;

            while (cell == null)
            {
                cell = sender as DataGridCell;
                sender = ((FrameworkElement)sender).Parent;
            }

            MethodForCell(sender);
        } 
```

阅读下面的链接，似乎在 DataGrid 的可视化树中 UIControls 被设置为`DataGridCell`. 那么如何从 Rectangle 中获取 DataGridCell 呢？

[http://blogs.msdn.com/b/vinsibal/archive/2008/08/14/wpf-datagrid-dissecting-the-visual-layout.aspx](http://blogs.msdn.com/b/vinsibal/archive/2008/08/14/wpf-datagrid-dissecting-the-visual-layout.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:34:30.337

在此更改您的事件处理程序：

```
private void swatch_PreviewMouseLeftButtonDown(object sender, MouseButtonEventArgs e)
        {         
            DataGridCell cell = null;

            while (cell == null)
            {
                cell = sender as DataGridCell;
                if (((FrameworkElement)sender).Parent != null)
                    sender = ((FrameworkElement)sender).Parent;
                else 
                    sender = ((FrameworkElement)sender).TemplatedParent;
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:28:33.930

我发现这要好得多

```
public static T GetVisualParent<T>(Visual child) where T : Visual
    {
        T parent = default(T);
        Visual v = (Visual)VisualTreeHelper.GetParent(child);
        if (v == null)
            return null;
        parent = v as T;
        if (parent == null)
        {
            parent = GetVisualParent<T>(v);
        }
        return parent;
    } 
```

你会这样称呼它：

```
var cell = GetVisualParent<DataGridCell>(e.Source); 
```

# .net - .NET 2.0 的 HTML 敏捷包

> ID：11562314
> 
> 赞同：2
> 
> 时间：2012-07-19T13:49:28.710
> 
> 标签：.net, visual-studio-2010, html-agility-pack, nuget

我有一个针对 .NET v3.5 的 Visual Studio 2010 项目（它是一个 Sharepoint 站点）。我需要在我的项目中使用[Html Agility Pack](http://htmlagilitypack.codeplex.com/)，但显然我不能使用 .NET v4.0 版本。

[我从codeplex](http://htmlagilitypack.codeplex.com/)下载了 Html Agility Pack ，并将`Net20/`(.NET v2.0) 目录中的 DLL 引用添加到我的 Visual Studio 项目中。但是，当我去检查参考属性时，它说“运行时版本”是“v4.0.30319”而不是“v2.0.xxxxx”，因此我的项目不会编译。

“好的......”我说，并尝试了更正式的方式，在[NuGet](http://nuget.org/packages/HtmlAgilityPack)中使用[Visual Studio 中的包管理器](http://docs.nuget.org/docs/start-here/using-the-package-manager-console)。我安装了 Html Agility Pack，但它再次无法编译，因为运行时版本适用于 .NET v4.0 ...

*我可以以某种方式设置我想在 NuGet 中安装的版本，还是它会自动执行此操作？我是不是因为 HAP 开发人员没有为 .NET v2.0 提供正确的 DLL 的错误而搞砸了？*

这非常令人沮丧，因为我实际上只需要编译我知道在 .NET v4.0 中工作的代码，这个项目就会完成。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T13:53:42.077

试试这个 - 它应该是 .Net 2.0 - [http://htmlagilitypack.codeplex.com/releases/view/272](http://htmlagilitypack.codeplex.com/releases/view/272)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:51:40.277

最终对我有用的是[这里](http://htmlagilitypack.codeplex.com/releases/view/33903)的版本。我下载了“二进制文件”，添加了 DLL，根据需要运行时版本为 .NET 2.0。我的程序就像在 .NET 4.0 下一样工作。

# qt - 无法使用激活原因使 QSystemTrayIcon 正常工作

> ID：11562319
> 
> 赞同：3
> 
> 时间：2012-07-19T13:49:45.600
> 
> 标签：qt, tray

我使用的是 Ubuntu 12.04，虽然我可以创建一个带有可用菜单的托盘图标，但我无法控制它的操作：

```
 trayIcon = new QSystemTrayIcon(this);
    trayIcon->setIcon(QIcon(":/icons/Pictures/icon.png"));
    trayIcon->setToolTip(QString("Hello there..."));

    connect(trayIcon,SIGNAL(activated(QSystemTrayIcon::ActivationReason)),this,SLOT(clickSysTrayIcon(QSystemTrayIcon::ActivationReason)));
    connect(this,SIGNAL(minimized()),this,SLOT(hide()),Qt::QueuedConnection);

    QMenu *changer_menu = new QMenu;
    Show_action = new QAction(tr("S&how"),this);
    Show_action->setIconVisibleInMenu(true);
    connect(Show_action, SIGNAL(triggered()), this, SLOT(showClicked()));
    changer_menu->addAction(Show_action);
    changer_menu->addSeparator();
    Quit_action = new QAction(tr("&Quit"), this);
    Quit_action->setIconVisibleInMenu(true);;
    connect(Quit_action, SIGNAL(triggered()), this, SLOT(close_minimize()));
    changer_menu->addAction(Quit_action);

    trayIcon->setContextMenu(changer_menu);
    trayIcon->show(); 
```

clickSysTrayIcon(QSystemTrayIcon::ActivationReason) 如下：

```
void MainWindow::clickSysTrayIcon(QSystemTrayIcon::ActivationReason reason)
{
    //reason is a variable that holds the type of activation or click done on the icon tray
    qDebug() << "I'm in!";
} 
```

并且，在头文件中定义为：

```
private Q_SLOTS:
    void clickSysTrayIcon(QSystemTrayIcon::ActivationReason reason); 
```

但是，我无法得到“我在！” 要显示的消息。我试图通过左/右键单击、中键单击和鼠标滚轮使其工作，但我从未看到输出此消息。

怎么了？

编辑：特定系统 Ubuntu 12.04 似乎有问题，因为它不再使用托盘图标而只使用指示器。因此，有一个程序使用托盘图标并将它们转换为指标。但是，然后指标的功能就消失了。我知道这是系统的错，因为相同的程序，在相同的代码下，在 Lubuntu 12.04 和 LXDE 桌面下完美运行。

我为此责怪Ubuntu。sni-qt 包没有很好地从托盘图标迁移到指示器，前提是指示器可以在点击、滚轮等上进行交互。真可惜！这个问题有什么解决办法吗？

我的赏金结束了，所以如果有人可以解决这个问题，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T01:40:57.813

向对项目影响最大的人提出问题。

[https://help.ubuntu.com/community/ReportingBugs#How_to_report_bugs](https://help.ubuntu.com/community/ReportingBugs#How_to_report_bugs)

[https://bugreports.qt.io/](https://bugreports.qt.io/)

## 解决方法

我会在绘制指示器的指示器区域顶部制作一个浮动的无框 qwidget，然后在其上添加适当的 mouseEvent 函数。

这是这种解决方法的起点。我不知道这是多么洁净，但它在 Windows 中运行良好。我知道有一些适用于 Windows 的 UI 调整和工具使用这种分层元素，例如 DisplayFusion 和 TeamViewer。我还没有在 Ubuntu 中测试过它，但它应该以同样的方式工作。

```
#include <QtGui/QWidget>
#include <QMenu>
#include <QSystemTrayIcon>
#include <QMouseEvent>
#include <QPixmap>
#include <QAction>
#include <QDebug>
#include <QPaintEvent>
#include <QPainter>
#include <QApplication>
#include <QTimerEvent>

class Widget : public QWidget
{
    Q_OBJECT

public:
    Widget(QWidget *parent = 0)
        : QWidget(parent)
    {
        // setup this widget to be borderless, transparent around the image
        // and always on top
        // and not to have a presence in the "visible window list"
        this->setWindowFlags( Qt::WindowStaysOnTopHint |
                              Qt::FramelessWindowHint | Qt::Tool);
        this->setAttribute(Qt::WA_TranslucentBackground);

        // necessary if you want to track when you enter and leave the widget's rect with the mouse
        this->setMouseTracking(true);

        m_trayIcon = new QSystemTrayIcon(this);
        m_trayIcon->setIcon(QIcon("icon1.ico"));
        m_trayIcon->setToolTip(QString("Hello there..."));

        m_changer_menu = new QMenu;

        m_show_action = new QAction(tr("S&how"),this);
        m_show_action->setIconVisibleInMenu(true);

        connect(m_show_action, SIGNAL(triggered()), this, SLOT(showClicked()));

        m_changer_menu->addAction(m_show_action);
        m_changer_menu->addSeparator();

        m_quit_action = new QAction(tr("&Quit"), this);
        m_quit_action->setIconVisibleInMenu(true);;

        connect(m_quit_action, SIGNAL(triggered()), this, SLOT(close_minimize()));

        m_changer_menu->addAction(m_quit_action);

        m_trayIcon->setContextMenu(m_changer_menu);
        m_trayIcon->show();

        QPixmap p("icon2.ico");
        m_pix = p.scaled(QSize(m_trayIcon->geometry().width(),
                                   m_trayIcon->geometry().height()),
                             Qt::IgnoreAspectRatio,
                             Qt::SmoothTransformation);
        this->move(m_trayIcon->geometry().x() ,m_trayIcon->geometry().y());
        this->resize(m_trayIcon->geometry().width(), m_trayIcon->geometry().height());

//        qDebug() << m_trayIcon->geometry();
//        qDebug() << this->geometry();
        // This assumes that the notification is stationary.  If you want it to move
        // with the tray icon underneath, you will need to subclass QSystemTrayIcon
        // and track its move and resize and probably also its show and hide events

        // raise itself 15x a second
        this->startTimer(1000/15);
    }

    ~Widget(){ }

public slots:
    void mouseDoubleClickEvent(QMouseEvent *)
    {
        qDebug() << Q_FUNC_INFO;
    }

    void mouseReleaseEvent(QMouseEvent * me)
    {
        qDebug() << Q_FUNC_INFO;
        switch(me->button())
        {
        case Qt::LeftButton:
            qDebug() << "Left Click";
            break;
        case Qt::RightButton:
            qDebug() << "Right Click";
            m_changer_menu->popup(this->geometry().topLeft() + me->pos());
            break;
        default:
            qDebug() << "other click";
            break;
        }
    }

    void showClicked()
    {
        qDebug() << Q_FUNC_INFO;
    }

    void close_minimize()
    {
        qDebug() << Q_FUNC_INFO;
        qApp->exit();
    }

    void paintEvent(QPaintEvent *)
    {
        QPainter aPainter(this);
        aPainter.drawPixmap(rect(), m_pix);
    }

    void timerEvent(QTimerEvent *)
    {
        if(!m_changer_menu->isVisible())
            this->raise();
    }

private:
    QPixmap m_pix;
    QSystemTrayIcon * m_trayIcon;
    QMenu * m_changer_menu;
    QAction * m_quit_action;
    QAction * m_show_action;
}; 
```

这是主要功能...

```
#include <QtGui/QApplication>
#include "widget.h"

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    Widget w;
    w.show();

    return a.exec();
} 
```

# forms - 在下拉列表中显示多个值，CakePHP

> ID：11562321
> 
> 赞同：1
> 
> 时间：2012-07-19T13:49:55.870
> 
> 标签：forms, cakephp

我有一个下拉列表，其中显示了“产品类别”列表

问题是，有多个同名的产品类别。

每个产品类别都有一个关联的“系统”，所以我的问题是，有没有办法修改：

```
echo $this->Form->input('product_cat_id'); 
```

显示`Product Category`显示`System >> Product Category`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:33:46.673

好吧，我想通了。

我不能在视图级别轻松地做到这一点，所以我必须在控制器级别做到这一点。

基本上，我的目标是构建如下使用的选项组：

```
$options = array(
   'Group 1' => array(
      'Value 1' => 'Label 1',
      'Value 2' => 'Label 2'
   ),
   'Group 2' => array(
      'Value 3' => 'Label 3'
   )
);
echo $this->Form->select('field', $options); 
```

我决定最好在我的控制器中构建选项列表并将其传递给视图。

为此，我将此代码添加到控制器的操作中：

```
$systemCats = $this->Product->ProductCat->SystemCat->find('all');
$this->set('fieldOptions', buildFieldOptions($systemCats)); 
```

我创建了一个名为 buildFieldOptions 的函数，它使用完全关联的 $systemCats 数组作为参数：

```
function buildFieldOptions($productCats, $systemCats) {
    $optionsArray = array(); //empty options array
    foreach ($systemCats as $systemCat) {
        $productCatArray = array(); //empty product categories array
        foreach($systemCat['ProductCat'] as $productCat){  
            $productCatArray[$productCat['id']] = $productCat['title'];
            //fill product categories array
        }
        $optionsArray[$systemCat['SystemCat']['title']] = $productCatArray;
        //fill options array with system category as a key
    }
    return $optionsArray;
} 
```

完成的一个选择框现在具有如下选项：

```
SystemCategory
    Product Category
    Product Category
    Product Category
SystemCategory
    Product Category
    Product Category
    Product Category 
```

这对我有用！

# java - 将小部件添加到 iframe 时出现异常？

> ID：11562336
> 
> 赞同：0
> 
> 时间：2012-07-19T13:50:41.313
> 
> 标签：java, gwt, extjs, gxt

我正在使用 GWT。在我的主机页面中有以下代码。

```
<div id="mainDiv"/>
 <iframe id="__printingFrame" style="width:0;height:0;border:0"> </iframe> 
```

在 EntryPoint 的 onModuleLoad() 中，我有以下代码：

```
@Override
    public void onModuleLoad() {
        RootPanel.get("mainDiv").add(new SomePage());
    } 
```

在 SomePage.java 我正在做的一种方法中：

```
RootPanel rootPanel = RootPanel.get("__printingFrame");
  rootPanel.add(new Html(" "));//adding some widget 
```

但是上面一行的 bcaz 我得到了例外。我在这里错过了什么吗？

```
java.lang.AssertionError: A widget that has an existing parent widget may not be added to the detach list
    at com.google.gwt.user.client.ui.RootPanel.detachOnWindowClose(RootPanel.java:136)
    at com.google.gwt.user.client.ui.RootPanel.get(RootPanel.java:211) 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T16:36:29.870

您的代码中有 2 个问题（但您现在只看到一个）：

*   您不能有嵌套`RootPanel`的 s（请参阅[http://code.google.com/p/google-web-toolkit/issues/detail?id=3511](http://code.google.com/p/google-web-toolkit/issues/detail?id=3511)和[http://code.google.com/p/google-web-toolkit /issues/detail?id=3528](http://code.google.com/p/google-web-toolkit/issues/detail?id=3528)），这就是导致您看到的错误的原因

*   您不能将小部件添加到 iframe。`RootPanel`好吧，从技术上讲，您可以将其包装在 a中，但它们将作为元素的子`iframe`元素添加，因此您的用户将看不到它们（我想不出一个解释 JavaScript 但不支持的浏览器iframe)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-19T14:30:09.953

RootPanel.get("id") 只能获取 <div> 元素。你可以像这样包装已存在的元素。

```
Frame frame=Frame.wrap(DOM.getElementById("__printingFrame")); 
```

# iphone - 你能修改iphone密码屏幕吗？

> ID：11562340
> 
> 赞同：0
> 
> 时间：2012-07-19T13:50:47.707
> 
> 标签：iphone, objective-c, ios

有没有办法可以让应用程序在锁定屏幕上添加一个按钮（输入您的密码）？对于 iOS/iPhone 设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:55:03.597

> 有没有办法让我的应用程序在锁定屏幕上添加一个按钮

不，我不相信这类事情有公共 API。Apple 显然可以做到这一点，因为 iPad 锁屏有一个按钮，可以显示照片库。但这并不意味着第三方应用程序具有该功能，如果您可以在不越狱设备的情况下实现这一功能，我会感到非常惊讶。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:59:34.670

不，这在您的应用程序沙箱之外。除非您越狱设备，否则无法在应用程序沙箱之外运行（播放音乐等小例外）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T14:09:47.700

你不能。这违反了沙盒策略。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T15:17:49.037

不不不不不不不不不不不不不不不不不不不不不不不不不不不不不了

但是cydia中有一些应用程序可以做这种事情

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T17:36:44.477

简单来说，没有这样的 API 可以对 iOS 本身进行自定义。苹果也不允许这样做。

# java - Java：将 JFrame 焦点转移到另一个 JFrame

> ID：11562341
> 
> 赞同：1
> 
> 时间：2012-07-19T13:50:48.063
> 
> 标签：java, swing, window, focus, jframe

我有两个独立的应用程序，每个应用程序都在自己的 JVM 中运行。App1 实现一个 ServerSocket 并等待请求。App2 实现一个 Socket 并向 App1 执行请求。

在 App2 执行请求（并将焦点转移到 App1）或 App1 完成请求（并获取焦点）之后，App1 应该成为活动进程/窗口。

我怎么做？

我尝试在 App1 上使用 Window.toFront() 方法，但所发生的只是任务栏中的一个闪烁栏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:20:09.350

您可以尝试将[requestFocusInWindow()](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Component.html#requestFocusInWindow%28%29)或[requestFocus()](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Component.html#requestFocus%28%29)与 toFront() 结合使用。但是，不能保证这会成功。焦点行为在一定程度上依赖于平台。

从另一个问题来看，这个功能似乎适用于 Windows 7：

```
private void BringToFront() {
    java.awt.EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            if(jFrame != null) {
                jFrame.toFront();
                jFrame.repaint();
            }
        }
    });
} 
```

# java - a4j：支持 onchange 事件不触发

> ID：11562343
> 
> 赞同：4
> 
> 时间：2012-07-19T13:50:56.510
> 
> 标签：java, seam, jsf-1.2, ajax4jsf

当我更改第一个下拉列表中的值时，我试图重新呈现第二个下拉列表。但是当我单击并更改第一个下拉列表中的值时，什么也没有发生。我错过了任何关键部分吗？

**我的xhtml：**

```
<h:form>
    <h:selectOneMenu value="#{adminBean.currentLeadCategory}" required="true" styleClass="formfield fpgeo" style="width:20em;margin-right:20px;">
        <a4j:support event="onchange" action="#{adminBean.currentLeadCategoryChanged()}"
 reRender="componentToReRender"/>
        <s:selectItems value="#{leadCategories}" var="leadCategory" label="#{leadCategory.name}" noSelectionLabel="Choose Category"/>
        <s:convertEntity/>
    </h:selectOneMenu>

<a4j:outputPanel id="componentToReRenderWrapper">

    <h:selectOneMenu id="componentToReRender" value="#{adminBean.currentCounty}"
 styleClass="formfield fpgeo" style="width:20em;margin-right:20px;">
        <s:selectItems value="#{adminBean.counties}" var="county" label="#{county.name}" noSelectionLabel="choose"/>
        <s:convertEntity/>
    </h:selectOneMenu>
<h:messages/>
</a4j:outputPanel>
</h:form> 
```

**我的豆子：**

```
@AutoCreate
@Scope(ScopeType.CONVERSATION)
@Name("adminBean")
@MeasureCalls
@Restrict("#{s:hasRole('admin') or s:hasRole('sales')}")
public class AdminBean implements Serializable {

    private LeadCategory currentLeadCategory;
    private List<County> counties = new ArrayList<County>();
    private County currentCounty;

@Factory(value = "leadCategories", autoCreate = true, scope = ScopeType.SESSION)
    public List<LeadCategory> fetchLeadCategories() {
        Query query = entityManager.createQuery("select l from LeadCategory l");
        return query.getResultList();
    }

public LeadCategory getCurrentLeadCategory() {
        return currentLeadCategory;
    }

    public void setCurrentLeadCategory(LeadCategory currentLeadCategory) {
        this.currentLeadCategory = currentLeadCategory;
    }

    public County getCurrentCounty() {
        return currentCounty;
    }

    public void setCurrentCounty(County currentCounty) {
        this.currentCounty = currentCounty;
    }

    public void currentLeadCategoryChanged() {
        this.loadCountiesForCategory();
    }

    public List<County> getCounties() {
        return counties;
    }

    public void setCounties(List<County> counties) {
        this.counties = counties;
    }

    public void loadCountiesForCategory(){
        if(currentLeadCategory == null){
            counties = new ArrayList<County>();
        }
        counties = new ArrayList<County>(currentLeadCategory.getCounties());
    }

} 
```

编辑1：

如果我检查萤火虫我得到一个错误：时间戳：7/19/12 4:14:44 PM 错误：ReferenceError：A4J 未定义源文件：`http://localhost:8080/admin/admin.seam?cid=11` 行：1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T15:10:58.390

好的，找到问题了！这里发生了重大的疯狂。有人在 web.xml 中将 LoadScriptStrategy 参数设置为 NONE。这使得 framework.pack.js 和 ui.pack.js**没有**加载。

```
<context-param>
<param-name>org.richfaces.LoadScriptStrategy</param-name>
<param-value>NONE</param-value>
</context-param> 
```

[在docs.jboss](http://docs.redhat.com/docs/en-US/JBoss_Enterprise_Portal_Platform/5.0/html/Reference_Guide/sect-Reference_Guide-Bridge_Configuration-RichFaces_Setup_and_Configuration_Options.html)找到此页面

> 如果您使用“NONE”策略，您必须在您的 portlet 或门户页面标题中包含以下脚本。如果您使用的是 JBoss Portal，您可以将它添加到 jboss-portlet.xml 文件中。

添加`<a4j:loadScript src="resource:///org/ajax4jsf/framework.pack.js"/>` 到我的标题模板和中提琴中，一切都像魅力一样。

我热爱我的工作 =)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:43:44.360

我可以清楚地看到您的 xhtml 有一个结束标签`</a4j:outputPanel>`但没有开始标签：`<a4j:outputPanel>`
如果您重新排列标签，它将起作用。

# jquery-ui - 如何更改或关闭 jQuery UI 手风琴的固定高度内联样式？

> ID：11562346
> 
> 赞同：2
> 
> 时间：2012-07-19T13:51:12.353
> 
> 标签：jquery-ui, jquery-ui-accordion

我在出现的 jQuery UI 手风琴中有一个 <p> ：

```
<p class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content-active" style="height: 184px " role="tabpanel"> 
```

早些时候，当我在那里有几个文本链接时，它非常适合。但是，现在我有图像链接，并且图像被锐利地剪裁了。

我可以通过添加额外的 <br /> 选项卡来获得更多空间，但我希望手风琴面板包含所有图像，一个在另一个之上，并且大小正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T16:56:16.380

如果我正确理解了您的问题，您需要告诉手风琴根据内容确定其高度。

```
$(function() {
    $( "#accordion" ).accordion({
        heightStyle: "content"
    });
}); 
```

这在此处的 jQuery UI 站点上进行了说明和显示：http: [//jqueryui.com/accordion/#no-auto-height](http://jqueryui.com/accordion/#no-auto-height)

希望这是您正在寻找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-11T17:56:44.020

我在使用 jQuery Accordion 时遇到了同样的问题，我刚刚找到了解决方法！

只需在页面顶部添加此 CSS 代码。它将覆盖缩略图上发生的自动裁剪：

```
.ui-accordion-content {
  min-height:auto !important;  
} 
```

# android - 是否有 DBPedia 的 API

> ID：11562348
> 
> 赞同：0
> 
> 时间：2012-07-19T13:51:16.347
> 
> 标签：android, dbpedia

我想开发一个 android 应用程序，使用户能够对 DBPedia 数据集运行查询并检索结果。谁能建议我如何实现这一目标？我想知道如何将查询从我的应用程序传递到 DBPedia 并检索结果。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:12:02.677

据我了解，DPPedia 只是一个邀请您在其上运行查询的数据库。只是鬼混给了我这个“http://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query=select+distinct+%3FConcept+where+%7B%5B%5D+a+%3FConcept %7D+LIMIT+100&format=text%2Fhtml&timeout=0&debug=on"。

您可以清楚地看到我在 URL 中运行的查询（选择 distinct ?Concept where {[] a ?Concept} LIMIT 100）以及其他几个参数。简单地从 Android 应用程序中获取该页面，并通过它运行 XML 解析器来获取您的数据。

# javascript - 检查文件大小——存储在服务器上的文件（未上传！）；使用没有 AJAX 请求的 JavaScript

> ID：11562353
> 
> 赞同：0
> 
> 时间：2012-07-19T13:51:32.290
> 
> 标签：javascript, ajax, filesize

就像在标题中一样。使用 jQuery，甚至是简单的 JavaScript 代码，我可以获得特定页面使用的所有脚本（CSS 和图像）的表格，并且我正在寻找是否有任何解决方案来获取每个资源文件的大小？

我想我在这里做了很好的研究。大多数答案都是关于上传到服务器、正在上传或刚刚上传之前的文件，所以这不是我要找的。HTML5 中引入了一些支持，但同样，它似乎仅适用于上传的文件。

当然，我正在寻找一个跨浏览器的解决方案，所以使用旧 IE 中引入的一些糟糕的文件对象也不是我想要的。另外，请让我强调一下，我只是在谈论检查**存储在服务器上的文件的文件大小，可以通过给定的 URL 访问**。因此，出于安全原因，请不要写出我无法从 JavaScript访问*本地文件之类的答案。*我已经知道了。

我[在 SO 上找到了非常好的解决方案](https://stackoverflow.com/questions/7909641/javascript-check-file-size/7909914#7909914)，但它使用 AJAX 请求来解决问题。尽管它非常有趣（发送 HEAD 类型的请求），但它可能不适用于所有服务器（但已由 answer 的作者测试，所有主流浏览器都支持）。对于在每个分析页面上找到的每个资源触发 AJAX 请求，我有点激动。

所以，我假设没有这样的解决方案。如果有人能证明我的假设是错误的，我会很高兴。但是，另一方面，他们如何在 Firebug 中做到这一点？如果我没记错的话，XPI 扩展是用 JavaScript 编写的，对吧？Firebug 确实可以测量当前网站中使用的资源的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T16:51:39.253

要验证内联脚本的内容长度，您可以使用它们的`.text`属性。

```
document.getElementsByTagName('script')[0].text.length //works for inline scripts 
```

对于外部脚本，其中`.src`属性引用另一个文件/资源​​，[Access-Control-Allow-Origin](http://www.w3.org/TR/cors/)安全约束存在问题，除非您在[浏览器设置](https://developer.mozilla.org/en/http_access_control)中允许它们。如果外部脚本与您尝试捕获它们的页面来自同一域，则可以。

我创建了一个[小提琴](http://jsfiddle.net/flaviocysne/DNVsp/)来演示如何获取它们的内容长度。

**20/07 更新**

Firebug 有[自己的实现](https://github.com/firebug/firebug/blob/master/extension/modules/firebug-http-observer.js)来拦截扩展[Mozilla.org 观察者服务](https://addons.mozilla.org/en-US/developers/docs/sdk/1.7/packages/api-utils/observer-service.html)的页面加载。

问题[“自定义 xul:browser 中页面加载的观察者”](https://stackoverflow.com/questions/1549831/an-observer-for-page-loads-in-a-custom-xulbrowser)应该让您了解如何使用 Mozilla Add-on API 实现这种拦截器。

# wpf - 在转换器 wpf 中将 double.NaN 转换为相关区域性

> ID：11562354
> 
> 赞同：2
> 
> 时间：2012-07-19T13:51:36.113
> 
> 标签：wpf, converter, cultureinfo, culture, nan

当我们没有值时，有一个使用 doubl.NaN 插入的数据表。我想要做的是每当我看到 double.Nan 我想把“-”代替，因此我有一个带有以下代码的转换器：

```
 if (value.ToString() == double.NaN.ToString())
        {
            return "-";
        } 
```

一切都在“en-us”文化上完美运行，但是当我们使用不同的文化（如“zn-cn”）时，它不起作用，因为“double.NaN.ToString()”会产生一个中文单词，其中 value .ToString() 是正常的“NaN”。

我尝试使用转换器使用 double.parse()，但没有任何效果。

**更新 -**好的，问题是转换器将对象作为字符串获取，而不是作为 Xaml 的两倍：

```
 <ControlTemplate TargetType="{x:Type DataGridCell}">
                <Border Background="Transparent"  Padding="10 8" BorderBrush="Transparent"  BorderThickness="1">
                    <Border.Resources>
                        <Style TargetType="ToolTip">
                            <Setter Property="OverridesDefaultStyle" Value="true"/>
                            <Setter Property="HasDropShadow" Value="False"/>
                            <Setter Property="VerticalOffset" Value="-46"/>
                            <Setter Property="HorizontalOffset" Value="10"/>
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="ToolTip">
                                        <General:TextTooltip TitleStyle="{StaticResource NumericTableToolTipTitleStyle}"  Content="{TemplateBinding Content}" ContentStringFormat="G"  ContentStyle="{StaticResource NumericTableToolTipContentStyle}"/>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Border.Resources>
                    <TextBlock x:Name="tbCellText" Text="{Binding RelativeSource={RelativeSource TemplatedParent}, 
                               Path=Content.Text, Converter={StaticResource NumericTableCellContentConverter}, ConverterCulture={x:Static gl:CultureInfo.CurrentCulture}}"
                               ToolTip="{Binding ElementName=tbCellText, Path=Text}"
                               TextWrapping="Wrap"/>
                </Border>
            </ControlTemplate> 
```

有没有办法保留对象的类型？

我知道我可以与“NaN”进行比较，但我想要更通用的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T14:01:12.620

当您绑定到 type`double`的属性时，转换器将获取 type 的`value`参数`double`。你可以很容易地做到这一点：

```
if (double.IsNaN((double)value))
{
    return "-";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:58:37.327

`if (double.IsNaN(value)) ...`将在任何语言环境中进行。

文档链接：http: [//msdn.microsoft.com/en-us/library/system.double.isnan.aspx](http://msdn.microsoft.com/en-us/library/system.double.isnan.aspx)

`double.NaN`顺便说一句，与( )的直接比较是`if (value == double.NaN)`行不通的，因为与`NaN`返回`NaN`的比较`false`！但是，您可以`NaN`通过这样的技巧检测到：（`if (value != value) ...`这仅适用于`NaN`s）。但是显式测试`double.IsNaN`更具可读性。

编辑：正如其他答案所暗示的，在转换器内部你`value`的可能不是`double`，但是`object`。所以你需要包括一张支票：

```
if (!(value is double))
    return ""; // or signal an error, or whatever
double d = (double)value;
if (double.IsNaN(d))
    return "-";
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T14:00:40.850

对弗拉德的一点补充：

if (value is double && double.IsNaN((double)value))

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T15:35:01.797

不要绑定到 datagridcell 中的 content.text 属性。这就是为什么值以字符串形式出现的原因。

尝试将数据值存储在 TextBlock 的 Tag 属性中并绑定到该属性，然后在属性更新代码中设置文本的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-04T19:16:02.393

**解决方案 -**问题是我将数据表绑定到数据网格，然后才转换所有值。从数据网格中提取值始终是类型字符串，所以这是我的问题。我只需要在直接绑定到数据表而不是数据网格单元时使用转换器。

# javascript - 如何在 OBJECT 标签内加载的 HTML 页面上调用 JS 函数

> ID：11562356
> 
> 赞同：1
> 
> 时间：2012-07-19T13:51:51.610
> 
> 标签：javascript, jquery, html, object

我在标签内加载 HTML 页面，由于 iPAD 不支持 iFrame，我使用标签在容器内加载外部 html 页面。一切正常，现在我想从加载的页面（加载的页面）调用一个函数。任何人都可以帮我找出解决方案吗？

```
"<object id='page' width='100%' height='100%' data='"+pageURL+"' style='position:absolute;'></object>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:45:17.173

最后，我得到了访问对象标签中加载的 HTML 页面的 Javascript 功能的解决方案。

```
window.objectID.functionName(); 
```

这将调用该函数（“但它在 IE8 中不起作用”）。对 IE 使用 iframe。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:56:27.890

如果您的意思是您希望您的代码在加载页面的上下文中调用 JavaScript 函数，那么如果页面不是来自同一来源（从它的声音来看，它们不是），您就不能这样做。[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)禁止。您页面中的 JavaScript 代码无法与其他页面交互。

如果页面来自同一来源，则`object`元素[`contentWindow`](http://www.w3.org/TR/html5/the-object-element.html#dom-object-contentwindow)和[`contentDocument`](http://www.w3.org/TR/html5/the-object-element.html#dom-object-contentdocument)属性应该提供对它的访问，尽管我没有在`object`元素上使用它们并且不知道它们的支持程度。

# regex - 接受 1,2,3 或 2 的正则表达式

> ID：11562362
> 
> 赞同：0
> 
> 时间：2012-07-19T13:52:22.633
> 
> 标签：regex, django

以下表达式接受`deal_status/2/`

```
(r'^deal_status/(?P<deal_id>\d+)/$', _deal_status_view), 
```

但是我如何接受任何逗号分隔的数字加上一个没有任何逗号的数字？

`deal_status/2,3,5/` 或者 `deal_status/2/`

Django 专业人士在哪里测试 url 正则表达式？是否有任何在线验证器可以帮助我？

非常感谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T13:53:52.840

```
(r'^deal_status/(?P<deal_id>\d+(,\d+)*)/$', _deal_status_view), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-21T07:14:36.000

> Django 专业人士在哪里测试 url 正则表达式？是否有任何在线验证器可以帮助我？

[https://regex101.com/#python](https://regex101.com/#python)

# unit-testing - 在 JAX-RS 单元测试中连接到 @EJB 或 @PersistenceContext 注入

> ID：11562367
> 
> 赞同：14
> 
> 时间：2012-07-19T13:52:36.937
> 
> 标签：unit-testing, ejb, jersey, jax-rs

我很喜欢学习 JAX-RS 和 Jersey，但是我在尝试测试需要注入 DAO 的简单资源时遇到了障碍，如下所示：

```
@Stateless
@Path("simple")
public class SimpleResource {

    @PersistenceContext
    private EntityManager em;

// @GET, etc...

} 
```

（我将转向更抽象的 DAO 模式，但问题是一样的，即如何注入 @EJB DAO？）

在我的单元测试中，我使用的是在其 web.xml 中配置 Jersey 的嵌入式 Jetty 服务器，并且我想挂钩资源的生命周期，以便我可以注入一个模拟 EntityManager，但我还没有找到一个干净的答案经过大量搜索。你能帮我吗？我遇到的一些可能的方向：

**1) 在我的代码中使用 JNDI 上下文查找来获取 DAO bean，并在测试中注册模拟对象。**

而不是@EJB 或@PersistenceContext，在资源的构造函数中使用类似这样的东西：

```
 theDAO = (DAOImpl) new InitialContext().lookup("java:global/EJB/DAOImpl"); 
```

但是，这意味着我的测试环境需要支持 JNDI，而在 Jetty 中这样做可能会带来一些痛苦。另外，它不使用干净的注释方法。

**2）使用方法注入。**

注入该方法，以便我可以设置 DAO 后实例化，例如，

```
@PersistenceContext(name = "persistence/pu00")
public void setPersistenceUnit00(final EntityManager em) {
    em00 = em;
} 
```

或者

```
private MyEjbInterface myEjb;
@EJB(mappedName="ejb/MyEjb")
public void setMyEjb(MyEjb myEjb) {
    this.myEjb = myEjb;
} 
```

但是，要做到这一点，我需要 Jersey 实例化的实例，例如 SimpleResource。我怎么得到它？

**3）使用反射。**

一种 DIY 注射，类似于：

```
public static void setPrivateField(Class<? extends Object> instanceFieldClass, Object instance, String fieldName, Object fieldValue) {
    Field setId = instanceFieldClass.getDeclaredField(fieldName);
    setId.setAccessible(true);
    setId.set(instance, fieldValue);
} 
```

同样，我需要 Jersey 实例化的实例。

**4) 使用注入提供程序。**

我仍然粗略地了解它是如何工作的，但看起来 Jersey 提供了一种定义自定义可注射注释的方法，例如，

```
 @Provider
    public class EJBProvider implements InjectableProvider<EJB, Type> {

    public ComponentScope getScope() {
    return ComponentScope.Singleton;
    }

    public Injectable getInjectable(ComponentContext cc, EJB ejb, Type t) {
    if (!(t instanceof Class)) {
        return null;
    }
    try {
        Class c = (Class) t;
        Context ic = new InitialContext();
        final Object o = ic.lookup(c.getName());
        return new Injectable<Object>() {
        public Object getValue() {
            return o;
        }
        };
    } catch (Exception e) {
        e.printStackTrace();
        return null;
    }
    }
} 
```

使用辅助类的变体：

```
Server server = new Server(8080);
Context root = new Context(server,"/",Context.SESSIONS);

ResourceConfig rc = new PackagesResourceConfig("edu.mit.senseable.livesingapore.platform.restws.representations");
rc.getSingletons().add(new SingletonTypeInjectableProvider<javax.ws.rs.core.Context, Myobj>(Myobj.class, new Myobj(12,13)){});

root.addServlet(new ServletHolder(new ServletContainer(rc)), "/");
server.start(); 
```

有了这个用途：

```
@Path("/helloworld")
public class HelloWorldResource {
    @Context Myobj myClass;
    ....
} 
```

这对@EJB 或@PersistenceContext 是否可行？

**5) 扩展 javax.ws.rs.core.Application。**

对此粗略，但是：

```
@javax.ws.rs.ApplicationPath("application")
public class InjectionApplication extends javax.ws.rs.core.Application {

  private Set<Object> singletons = new HashSet<Object>();
  private Set<Class<?>> classes = new HashSet<Class<?>>();

  public InjectionApplication() {
    // no instance is created, just class is listed
    classes.add(BookResource.class);
  }

  @Override
  public Set<Class<?>> getClasses() {
    return classes;
  }

  @Override
  public Set<Object> getSingletons() {
    return singletons;
  }
} 
```

**6）扩展ServletContainer。**

使用 InjectableProvider 的旧风格？看起来更复杂：

```
public class ServletAdapter extends ServletContainer {

@Override
protected void configure(ServletConfig servletConfig, ResourceConfig rc, WebApplication wa) {
    super.configure(servletConfig, rc, wa);

    rc.getSingletons().add(new InjectableProvider<Resource, Type>() {

        public ComponentScope getScope() {
            return ComponentScope.Singleton;
        }

        public Injectable<Object> getInjectable(ComponentContext ic, Resource r, Type c) {
            final Holder value = new Holder();

                Context ctx = new InitialContext();
                try {
                    value.value = ctx.lookup(r.name());
                } catch (NamingException ex) {

                    value.value = ctx.lookup("java:comp/env/" + r.name());
                }

            return new Injectable<Object>() {
                public Object getValue() {
                    return value.value;
                }
            };
        }
    });
}
} 
```

**7) 使用嵌入式 EJB 容器。**

例如， http: [//openejb.apache.org](http://openejb.apache.org)。这很重，我预计开始工作会很混乱。（事实上​​，让我开始走“Jetty + Jersey”路线的是 GlassFish Embedded 中围绕安全登录的一个错误。我还查看了其他 Java EE 6 应用程序容器，如 JBoss AS，但每个在嵌入式模式下都有问题，用户有限社区支持。）

**8) 使用第三方 IoC 库，如 Spring 或 Guice。**

Spring 显然通常用于解决这类问题（在单元测试时注入模拟），但我想避免不得不学习另一组 API ——纯 Java EE 已经足够挑战了！但如果这是最好的解决方案，我很乐意。我还没有仔细研究过 Spring 或 Guice。

你成功使用过这些吗？您喜欢其他任何解决方案吗？我真的很期待您对此的建议。提前致谢——马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:38:28.833

由于您使用的是 Netbeans，请尝试一下：

[使用嵌入式 EJB 容器测试企业应用程序](http://netbeans.org/kb/docs/javaee/javaee-entapp-junit.html)

本教程使用嵌入式 Glassfish 容器并注入一个封装 EntityManager 的 EJB（类似于您在第一个选项中描述的内容）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T14:08:47.180

如果您只需要一个`EntityManager`内嵌的 Jetty 容器，为什么首先要使用注入？您可以将其中一个 JPA 实现（例如 eclipselink 或 hibernate）放在您的类路径中，配置一个资源本地持久性单元，然后像这样获取它：

```
EntityManagerFactory emf = Persistence.createEntityManagerFactory("your unit name");
EntityManager em = emf.createEntityManager(); 
```

`@EJB`为了测试您的 JAX-RS 类，拥有一些行为类似于您的东西（可能是静态 DAO 工厂？）就足够了。

如果您确实希望您的单元测试尽可能接近 Java EE 环境，请考虑使用 Arquillian (http://www.jboss.org/arquillian.html) 运行它们。它直接在 Java EE 容器上运行测试——这很简单，它有很好的文档。

# c++ - 为什么 C++ Standard 1.9/5 谈论“可能的执行序列”？

> ID：11562375
> 
> 赞同：5
> 
> 时间：2012-07-19T13:52:50.807
> 
> 标签：c++

根据 C++03 标准 1.9/5

> 执行格式良好的程序的一致实现应产生与具有相同程序和相同输入的抽象机的相应实例的可能执行序列之一相同的可观察行为。

我没有得到“作为之一”的部分。

如果我有一个特定的程序和一个特定的输入，并且我的程序不包含未定义的行为，为什么可观察到的行为会有所不同？“可能的执行顺序之一”是什么意思？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-19T13:56:42.010

在 C++ 中，某些事情留给实现。例如，当你写

```
int x = f(a) + f(b); 
```

实现可以选择先调用 f(a) 或先调用 f(b)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-19T13:57:00.713

考虑：

```
x = f() + g(); 
```

这允许两种可能的执行顺序：

```
__temp1 = f();           /*or*/     __temp1 = g();
__temp2 = g();           /*or*/     __temp2 = f();
x = __temp1 + __temp2;   /*or*/     x = __temp2 + __temp1; 
```

该标准没有规定必须执行哪些；只是程序必须表现得好像执行了这两个之一。如果`f()`并且`g()`有副作用，那么程序可能具有两种不同的可观察行为之一。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-19T14:01:59.780

C++ 标准没有定义某些表达式的求值顺序。例如，在：

```
 proc( a(), b() ); 
```

a() 和 b() 都必须在 proc() 之前求值，但 a() 可以在 b() 之前或之后求值。所以有两个合法的执行序列，如果 a() 和 b() 有副作用（例如，打印语句），你可以知道使用了哪个编译器。

（这种关于评估顺序的自由旨在帮助编译器生成更有效的代码。它是否真的有助于现代机器是有争议的。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-19T15:00:14.520

除了其他人已经提到的评估子表达式的未指定顺序之外，请记住 C++11 添加了线程，这使得执行顺序更加不确定。

例如，如果您有两个线程正在执行，并且每个线程都只打印出“线程 A”或“线程 B”，那么这些输出的生成顺序是完全未指定的。您可能会得到所有“线程 A”输出，然后是所有“线程 B”输出，反之亦然，或者它们可能是任意交错的（更可能是交错）。

# sql-server - 列组中的汇总报表项 (SSRS 2008)

> ID：11562377
> 
> 赞同：1
> 
> 时间：2012-07-19T13:52:55.320
> 
> 标签：sql-server, reporting-services

我在 SSRS 2008 (R2) 报告中有以下工资表：

![工资表](../Images/7c5f0edf76ad2748664dc4c7bacf318a.png)

数据集返回由以下字段组成的人工交易：

```
STARTDATE
STARTTIME
FINISHDATE
FINISHTIME
REGULARHRS (difference between finish and start)
REFWO (such as "Travel", "Holiday", "Work", etc and is used to sort into the categories shown in the table above)
TIMEWORKED (0/1 flag that indicates whether or not it counts towards "Time Worked" category) 
```

我有一个在 STARTDATE 分组的列，以便显示一周中的每一天（我们的周从周一到周日）。包括“无薪休假”在内的所有内容`Sum(IIF(something,A,B)`都是每日列和每周（总计）列中的一个简单表达式（通常只是格式）。在“临时常规”框中（用于日期分组），我有以下表达式：

```
=IIF(Weekday(Fields!startdate.Value)=1 
     OR Weekday(Fields!startdate.Value)=7 
     OR ReportItems!Holiday.Value>0,
    0,
    ReportItems!TimeWorked.Value-ReportItems!Holiday.Value-ReportItems!Bereave.Value) 
```

基本上我在说的是：如果 STARTDATE 是星期六、星期日或节假日，则正常工作时间将为 0，因为它会落入 OT1.5（加班时间半），否则我计算正常工作时间通过从工作时间中减去假期时间和丧亲时间（因为两者都包含在工作时间中）。这部分效果很好！！但是当我尝试使用它来总结一周的总数时，`=Sum(ReportItems!InterimRegularDaily.Value)`它告诉我我不能在报表项上使用聚合，并且聚合函数只能用于页眉和页脚中包含的报表项。我已经进行了广泛的谷歌搜索以查看是否有解决方案，但一切似乎都涉及编写自定义函数。我不敢相信在一个外部组中简单地总结一个组计算会这么难！

任何和所有的帮助将不胜感激！！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-28T05:37:39.867

您可以添加`Sum()`表达式的范围以尊重整个数据集或组：

```
'Returns the sum of the whole DataSet
=Sum(Fields!TestField.Value, "YourDataSetName")

'Returns the sum of a group
=Sum(Fields!TestField.Value, "YourGroupName") 
```

您还可以堆叠它们：

```
=Sum(Sum(Fields!TestField.Value, "Level3GroupName"), "Level2GroupName") 
```

# android - 如何仅在第一个活动完成后才启动线程？

> ID：11562378
> 
> 赞同：0
> 
> 时间：2012-07-19T13:52:56.613
> 
> 标签：android, barcode, zxing

在我的应用程序中，我有扫描二维码的扫描按钮。代码是这样的：

```
btnScan.setOnClickListener(new OnClickListener() {

                        @Override
                        public void onClick(View v) {
                            Intent intent = new Intent("com.google.zxing.client.android.SCAN");
                            intent.putExtra("SCAN_MODE", "QR_CODE_MODE");
                            startActivityForResult(intent, 1);

                            ClearForm();
                            //if (!CheckCHFID())return;

                            pd = ProgressDialog.show(EnquireActivity.this, "", getResources().getString(R.string.GetingInsuuree));
                            new Thread(){
                                public void run(){
                                    getInsureeInfo();

                                    pd.dismiss();
                                }
                            }.start();

                        }
                    }); 
```

现在的问题是在我扫描代码之前它开始查找 getInsureeInfo(); 的信息。我如何控制它只在用户成功扫描代码后才执行？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:57:15.357

您需要将扫描后想要发生的部分移动到 onActivityResult() 方法。

```
/*Here is where we come back after the Barcode Scanner is done*/
public void onActivityResult(int requestCode, int resultCode, Intent intent) {
    if (requestCode == 0) {
        if (resultCode == RESULT_OK) {
            // contents contains whatever the code was
            String contents = intent.getStringExtra("SCAN_RESULT");

            // Format contains the type of code i.e. UPC, EAN, QRCode etc...
            String format = intent.getStringExtra("SCAN_RESULT_FORMAT");

            // Handle successful scan. 

        } else if (resultCode == RESULT_CANCELED) {
            // Handle cancel. If the user presses 'back' before a code is scanned.

        }
    }
} 
```

此外，我认为当隐藏进度对话框时，您将不得不使用 Handler 将消息从工作线程发送到主线程。我认为它不会让你从后台线程调用它。不过，这只是一种预感，未经测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:55:03.527

把它放在`OnActivityResult`方法中，覆盖它。

```
 @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        switch(requestCode) {
        case 1: 
        if (resultCode == RESULT_OK) {

            //put your stuff here....

            break;
        }
      }
    } 
```

# key-bindings - 如何绕过 GNU 屏幕中的 bindkey 指令？

> ID：11562379
> 
> 赞同：1
> 
> 时间：2012-07-19T13:52:59.263
> 
> 标签：key-bindings, gnu-screen

我使用`bindkey`.screenrc 文件中的命令来使用 F5 和 F6 键：

```
# Split/restore on F5/F6
bindkey -k k5 split
bindkey -k k6 only 
```

但是，一些程序使用这些键作为输入（如`htop`）。有没有办法绕过 GNU 屏幕键绑定，以便这些击键进入当前终端？

我试过了`Ctrl-a`，`F5`但这似乎不起作用。而且它似乎没有提到任何关于绕过文档中的绑定的[内容](http://www.delorie.com/gnu/docs/screen/screen_94.html)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T15:28:03.330

看来我已经想通了。

该[`mapdefault`](http://www.delorie.com/gnu/docs/screen/screen_96.html)命令旨在用于此目的。

将以下内容添加到 .screenrc 文件中，您可以键入或`Ctrl-A` `e` `<key>`发送到终端：`Ctrl-A` `Ctrl-E` `<key>``<key>`

```
# It's sometimes useful to have a quote key.
bind ^E mapdefault
bind e mapdefault 
```

# database - 外键是如何工作的？

> ID：11562395
> 
> 赞同：5
> 
> 时间：2012-07-19T13:53:56.907
> 
> 标签：database

我以前主要使用不支持外键的 MyISAM 表。查看堆栈溢出，我没有找到关于外键实际作用的简洁明了的解释。我最感兴趣的是连接表，你会有这样的模式：

```
customers
id category_id

products
id category_id 

categories
id

customerproducts
customer_id product_id 
```

如果我在 customerproducts 上有外键，它将确保只有有效的客户和有效的产品才能进入该表，但是如果我尝试将电话类别中的产品添加到指定为只对复印机感兴趣的客户呢？这会导致违反外键约束吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-10T13:11:25.807

> 我最感兴趣的是连接表，你会有这样的模式：

你不会有这样的模式——它不代表你感兴趣的事实。让我们在 SQL 中画出一些表。（在 PostgreSQL 中测试）首先，客户和产品。

```
-- Customer names aren't unique.
create table customers (
  cust_id integer primary key,
  cust_name varchar(15) not null
);
insert into customers values (1, 'Foo'), (2, 'Bar');

-- Product names are unique.
create table products (
  prod_id integer primary key,
  prod_name varchar(15) not null unique
);
insert into products values 
(150, 'Product 1'), (151, 'Product 2'), (152, 'Product 3'); 
```

产品有不同的类别。

```
create table categories (
  cat_name varchar(15) primary key
);
insert into categories values ('Cable'), ('Networking'), ('Phones'); 
```

每个产品可能出现在几个类别中。

```
create table product_categories (
  prod_id integer not null references products,
  cat_name varchar(15) not null references categories,
  primary key (prod_id, cat_name)
);

insert into product_categories values 
(150, 'Cable'), (150, 'Networking'), (151, 'Networking'), (152, 'Phones'); 
```

客户可能对几类产品感兴趣。

```
create table customer_category_interests (
  cust_id integer not null references customers,
  cat_name varchar(15) not null references categories,
  primary key (cust_id, cat_name)
);

-- Nobody's interested in phones
insert into customer_category_interests values
(1, 'Cable'), (1, 'Networking'), (2, 'Networking'); 
```

> 如果我在 customerproducts 上有外键，它将确保只有有效的客户和有效的产品才能进入该表，但是如果我尝试将电话类别中的产品添加到指定为只对复印机感兴趣的客户呢？

客户并不对他们喜欢的类别中的*每一种产品都感兴趣。*注意重叠的外键约束。

```
create table product_interests (
  cust_id integer not null,
  prod_id integer not null,
  cat_name varchar(15) not null,
  foreign key (cust_id, cat_name) references customer_category_interests,
  foreign key (prod_id, cat_name) references product_categories,
  primary key (cust_id, prod_id, cat_name)
);

insert into product_interests values
(1, 150, 'Cable'), (2, 150, 'Networking'); 
```

下一次插入将失败，因为客户 1 对电话不感兴趣。

```
insert into product_interests values
(1, 152, 'Phones'); 
```

```
错误：在表“product_interests”上插入或更新违反了外键约束“product_interests_cust_id_fkey”
详细信息：表“customer_category_interests”中不存在键 (cust_id, cat_name)=(1, Phones)。

```

# android - Android：如何使用广播接收器获取已安装的应用程序信息

> ID：11562413
> 
> 赞同：0
> 
> 时间：2012-07-19T13:54:53.677
> 
> 标签：android, broadcastreceiver

我是安卓新手。我正在使用广播接收器，它在安装或删除应用程序时进行侦听。当安装或删除应用程序时，我的广播接收器的**onReceive(context,intent)**将被调用。现在我需要获取有关安装或删除的应用程序的信息删除（主要是包名）..

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-20T08:07:09.260

你可以试试这个接收器和权限。（但这似乎只适用于 /system/app）^^"

```
<receiver
    android:name="com.your.receiver"
    android:enabled="true"
    android:exported="true" >
            <intent-filter>
                <action android:name="android.intent.action.PACKAGE_ADDED" />
                <action android:name="android.intent.action.PACKAGE_REMOVED" />
                    <data android:scheme="package"/> 
                </intent-filter>
 </receiver>
 <uses-permission android:name="android.permission.BROADCAST_PACKAGE_REMOVED" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T15:24:24.097

您想要的所有信息都在 Intent extras 中。

查看[使用 Intent.ACTION_PACKAGE_REMOVED 时如何查找已卸载的包名](https://stackoverflow.com/questions/8910411/how-to-find-the-package-name-which-has-been-uninstalled-when-using-intent-action)

# javascript - 模板的动画下拉菜单

> ID：11562418
> 
> 赞同：2
> 
> 时间：2012-07-19T13:55:07.417
> 
> 标签：javascript, jquery, animation, menu

我以前从未使用过 jQuery，我正在尝试做一些非常简单的事情，但这让我发疯了。我为 CMS 设计了一个模板，现在我想让它的菜单动画化。下图说明了菜单的结构（显然是CMS生成的）
![菜单结构](../Images/73d91914777a3b418634855b281e959d.png)

下面的代码是我认为应该工作的，但它没有：

```
var menuItem = jQuery(".menu:first>li");
var subMenu;
for(var i=0; i<menuItem.length;i++)
{
    var li = jQuery(menuItem[i]);
    subMenu = li.children("ul");
    if (subMenu.length)
        li.hover(function(){ li.children("ul").slideToggle(250); });   
} 
```

基本上，我正在做的是获取第一级`li`s，然后为它们添加一个`hover`侦听器，告诉他们为他们的孩子制作动画`ul`（这是实际的子菜单）。
相反，我得到的是当我指向“产品”时，它自己的子菜单不显示，而是弹出“联系我们”的子菜单！当我指向“联系我们”时，它的子菜单会按预期弹出。**注意：**棕色`ul`设置为显示：无
我感谢任何帮助。在此先感谢
**PS：**我正在使用 jQuery 1.7.1（如果重要的话）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T14:18:00.667

对于您要实现的目标，它看起来相当复杂。我会做这样的事情。

```
$(".menu > li").hover(

  //When mouse is over the menu button
  function () {
    $(this).children("ul").slideDown(250);
  },

  //When mouse leaves the menu / menu button 
  function () {
    $(this).children("ul").slideUp(250);
  }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:23:44.867

我看到您在代码中尝试做什么，但我认为您应该首先从良好的 jQuery 实践开始。这真的不难，你会看到的。它会让你的生活更轻松。

首先，我不确定循环是你想要的。jQuery 提供了一个选择器（可以与 $ 作为快捷方式一起使用）来选择类，它非常强大。像这样构建你的菜单（有点）：

```
<ul id="menu">
   <li class="menu-item">Home
      <ul>
        <li></li>
        <li></li>
      </ul>
   </li>
   <li class="menu-item">Products
      <ul>
        <li></li>
        <li></li>
      </ul>
   </li>
   <li class="menu-item">Contact us
      <ul>
        <li></li>
        <li></li>
      </ul>
   </li>
</ul> 
```

然后你可以选择菜单项

```
$('.menu-item') 
```

并在其悬停功能中，选择下拉菜单

```
$(this).childen('ul') 
```

然后基本上玩得开心！

# javascript - 将 jquery fancybox 显示为 ajax 成功

> ID：11562420
> 
> 赞同：2
> 
> 时间：2012-07-19T13:55:11.700
> 
> 标签：javascript, jquery, ajax, fancybox

我有：

*   `<a href>`显示花式框的链接和
*   ，`<form>`当subtmit按钮点击ajax成功时在页面上显示一条消息。他们都工作正常。

代码如下。

```
<script>
    $(document).ready(function ()
    { //this fancybox appears when <a href="..." ...>...</a> clicked
        $(".fancybox-effects-d").fancybox({
            padding:15,
            closeBtn:true,
        });

        $("form#submit").submit(function ()
        {
            var name = $('#name').attr('value');
            var password = $('#password').attr('value');
            $.ajax({
                type:"POST",
                url:"index/success",
                data:{ name:name, password:password},
                success:function ()
                {
                    //this form disappears and div appears when submit button of the <form id="submit" ...>...</form> clicked
                    $('form#submit').hide(function ()
                    {
                        $('div#errors').fadeIn(3000);

                    });
                }
            });
            return false;
        });
    });
</script> 
```

我想移动那个花式框以显示 ajax 成功。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T13:58:18.120

您可以使用对最终用户不可见的链接，并在 ajax 成功回调上使用 jQuery 触发它。像这样的东西：

```
<a id="hiddenlink" href="#fancy" style="display: none;"></a>

<script>

    $(document).ready(function ()
    { //this fancybox appears when <a href="..." ...>...</a> clicked
        $(".fancybox-effects-d").fancybox({
            padding:15,
            closeBtn:true,
            }
        });

        $("form#submit").submit(function ()
        {
            var name = $('#name').attr('value');
            var password = $('#password').attr('value');
            $.ajax({
                type:"POST",
                url:"index/success",
                data:{ name:name, password:password},
                success:function ()
                {
                    $("a#hiddenlink").trigger("click");
                    //this form disappears and div appears when submit button of the <form id="submit" ...>...</form> clicked
                    $('form#submit').hide(function ()
                    {
                        $('div#errors').fadeIn(3000);

                    });
                }
            });
            return false;
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T14:03:38.777

您可以使用这个简单的功能手动调用fancybox

```
$.fancybox(
        '<p>Content of the box in HTML</p>',
        {
                padding:15,
                closeBtn:true
        }
    ); 
```

只需将其添加到成功函数中即可。

# php - 是否可以制作安全的 JS 脚本或函数？

> ID：11562429
> 
> 赞同：2
> 
> 时间：2012-07-19T13:56:03.587
> 
> 标签：php, javascript, ajax, security

是否可以在 Web 应用程序中拥有一段安全的 Javascript 代码？所谓*安全*，我的意思是我们可以做一些事情，比如查询服务器的权限，做客户端不能改变的操作？

例子：

```
 var flag = 0;

    $.ajax({
        async: false,
        url: "/check_permission_script.php",
        success: function(data){
            flag = parseInt(data);
        }
    });

    if (flag != 1){
        display_normal_content();
    }else{
        display_secure_content();
    } 
```

在这里，我想向服务器查询以检查用户是否有权查看安全内容。如果他们有权限，那么我们用来`display_secure_content()`向他们展示安全内容，如果没有，我们`display_normal_content()`用来展示正常内容。问题是，通过调试终端，很容易`flag`在客户端计算机上设置变量== 1，或者直接调用`display_secure_content()`函数。

我这样做的动机是拥有一个使用 ajax 来获取新内容的优秀 Web 应用程序，而无需重新加载页面。我喜欢这样，而不必重新加载页面。

所以问题是，我们能否拥有能够防止客户端操纵的 JS 脚本？或者这完全是由于 Web 基础设施的性质而无法实现的？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:57:58.557

由于 JavaScript 的本质，这是不可能的。

任何您不想被客户看到的东西根本无法发送给客户。所有身份验证/授权都应该发生在服务器端。

您仍然可以使用 AJAX 在界面中加载数据，但请确保在服务器端进行检查以防止敏感数据泄露。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:59:44.630

简短的回答，不 - 不是单独使用 JavaScript。JavaScript 在客户端执行，因此您放入其中的任何内容都可以被客户端访问并通过扩展进行修改。

有几种工具可以帮助“通过晦涩实现安全”，例如混淆代码，但这对您的最终目标没有帮助。

考虑到您当前的设置，可以帮助您通过 Ajax 联系处理所有安全/验证并返回要显示的内容的服务器端 PHP 页面。这样做，面向客户端的 JavaScript 只能“请求”，不能验证或选择要显示的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T14:00:17.930

您可以针对您的内部数据库查询会话 ID，并返回一个安全的公钥/私钥加密令牌，其中包含用于解密数据块的密钥。然后将其用作 javascript 函数的参数，该函数使用此返回的密钥来解密 blob。

此解决方案不需要重新加载页面，虽然它在理论上有效，但您必须每次返回带有使用不同密钥加密的安全内容的页面。我不建议实际尝试这个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T14:01:49.633

服务器应该知道用户能看到什么和不能看到什么。如果客户端上的标志发生了变化，服务器不应该信任它，它应该在收到请求时进行验证。安全 101 东西

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T13:58:14.577

JavaScript 是一种客户端脚本语言。本来就是这样的。

如果您需要安全脚本，请使用 PHP。

# java - 建造者模式是否适用这个要求？

> ID：11562430
> 
> 赞同：1
> 
> 时间：2012-07-19T13:56:04.657
> 
> 标签：java, oop, design-patterns, factory-pattern, builder-pattern

我有一个 Web 应用程序，在启动时，一个 servlet 创建了相同**'Product'**网关的各种实例，并定义了不同的配置设置。这是一个小描述。

**网关**：抽象类定义了不同类型的网关。

**MessageParser**：接口，每种类型`Gateway`都有自己的解析器，处理并返回一个特定的`Message`.

**消息**：一个接口，有一个方法返回`String getMessage()`，所有的bean都实现这个消息，并且是可序列化的。

**监听器**：每种类型的网关都会注册一个自己的监听器来处理传入的数据。

**GatewaySettings**：网关需要的所有信息，连接方式、时间和地点，端口等。

**GatewayBuilder**使用设置生成网关产品`Gateway buildGateway()`，设置其属性的所有适当实现？什么方法进入这个，它应该有设置器来使它不可变？

构建器模式是否完成工作或任何其他模式？如果可以使用构建器模式，那么在这种情况下，模式的主管在哪里出现？

如果需要更多信息，请给我发帖！

谢谢，V。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:19:35.143

[这个 stackoverflow 讨论](https://stackoverflow.com/questions/328496/when-would-you-use-the-builder-pattern)可能是一个非常有价值的资源。Builder 模式的合适用例是当我们需要在其整个生命周期中构造一个不可变的类实例时，因此 Builder 类创建了不可变实例。Builder 本身是可变的，并且使用和丢弃某种对象。

# swing - 如何在摇摆中运行 javaFX MediaPlayer？

> ID：11562431
> 
> 赞同：2
> 
> 时间：2012-07-19T13:56:04.520
> 
> 标签：swing, user-interface, javafx-2

我为我正在开发的应用程序制作了一个简单的媒体播放器，问题是我认为您可以简单地将 JavaFX 集成到 Swing 中。事实并非如此。我一直在寻找这个问题的解决方案并尝试使用这个网站：[http](http://docs.oracle.com/javafx/2/swing/jfxpub-swing.htm) ://docs.oracle.com/javafx/2/swing/jfxpub-swing.htm 问题是即使我有解释的网站如何将代码放在一起，我仍然不明白如何。这是媒体播放器，我打算将它集成到我的 Swing 代码中，以便在单击按钮时调用媒体播放器。这是我所有的媒体播放器代码，如果有人能分享一些关于如何将它集成到我的 Swing 代码（即我的 GUI）中的信息，我可能不得不通过电脑亲吻你。

 ````
public class Player extends Application{

private boolean atEndOfMedia = false;
private final boolean repeat = false;
private boolean stopRequested = false;
private Duration duration;
private Label playTime;
private Slider volumeSlider;

@Override
public void start(final Stage stage) throws Exception {

    stage.setTitle("Movie Player");//set title
    Group root = new Group();//Group for buttons etc

    final Media media = new Media("file:///Users/Paul/Downloads/InBruges.mp4");
    final MediaPlayer playa = new MediaPlayer(media);
    MediaView view = new MediaView(playa);

    //Slide in and out and what causes that.
    final Timeline slideIn = new Timeline();
    final Timeline slideOut = new Timeline();
    root.setOnMouseEntered(new javafx.event.EventHandler<javafx.scene.input.MouseEvent>()              { 
        @Override
        public void handle(MouseEvent t) {
            slideIn.play();
        }
    });

    root.setOnMouseExited(new javafx.event.EventHandler<javafx.scene.input.MouseEvent>() {
        @Override
        public void handle(MouseEvent t) {
            slideOut.play();
        }
    });

    final VBox vbox = new VBox();
    final Slider slider = new Slider();
    final Button playButton  = new Button("|>");

    root.getChildren().add(view);
    root.getChildren().add(vbox);
    vbox.getChildren().add(slider);
    vbox.getChildren().add(playButton);
    vbox.setAlignment(Pos.CENTER);

    Scene scene = new Scene(root, 400, 400, Color.BLACK);
    stage.setScene(scene);
    stage.show();

    // Play/Pause Button
   playButton.setOnAction(new EventHandler<ActionEvent>() {
        @Override
    public void handle(ActionEvent e) {
    Status status = playa.getStatus();

    if (status == Status.UNKNOWN  || status == Status.HALTED)
    { 
       // don't do anything in these states
       return;
    }

      if ( status == Status.PAUSED
         || status == Status.READY
         || status == Status.STOPPED)
      {
         // rewind the movie if we're sitting at the end
         if (atEndOfMedia) {
            playa.seek(playa.getStartTime());
            atEndOfMedia = false;
         }
         playa.play();
         } else {
           playa.pause();
         }
     }
 });

   //Listeners and Shit for Play Button
    playa.setOnPlaying(new Runnable() {
        @Override
        public void run() {
            if (stopRequested) {
                playa.pause();
                stopRequested = false;
            } else {
                playButton.setText("||");
            }
        }
    });

    playa.setOnPaused(new Runnable() {
        @Override
        public void run() {
            playButton.setText(">");
        }
    });

    playa.play();
    playa.setOnReady(new Runnable() {

        @Override    
        public void run(){
        int v = playa.getMedia().getWidth();
        int h = playa.getMedia().getHeight();

        stage.setMinWidth(v);
        stage.setMinHeight(h);

        vbox.setMinSize(v, 100);
        vbox.setTranslateY(h-50);

        //slider and graphical slide in/out
        slider.setMin(0.0);
        slider.setValue(0.0);
        slider.setMax(playa.getTotalDuration().toSeconds());

        slideOut.getKeyFrames().addAll(
                new KeyFrame(new Duration(0),
                      new KeyValue(vbox.translateYProperty(), h-100),
                      new KeyValue(vbox.opacityProperty(), 0.9)
                            ),
                new KeyFrame(new Duration(300),
                      new KeyValue(vbox.translateYProperty(), h),
                      new KeyValue(vbox.opacityProperty(), 0.0)
          )
          );
        slideIn.getKeyFrames().addAll(
                new KeyFrame(new Duration(0),
                    new KeyValue(vbox.translateYProperty(), h),
                    new KeyValue(vbox.opacityProperty(), 0.0) 
                            ),
                new KeyFrame(new Duration(300),
                        new KeyValue(vbox.translateYProperty(), h-100),
                        new KeyValue(vbox.opacityProperty(), 0.9)
          )
          );
    }

});

    //Slider being current and ability to click on slider. 
playa.currentTimeProperty().addListener(new ChangeListener<Duration>(){
    @Override
    public void changed(ObservableValue<? extends Duration> observableValue, Duration   duration, Duration current){
       slider.setValue(current.toSeconds());
   }
  });
   slider.setOnMouseClicked(new javafx.event.EventHandler<javafx.scene.input.MouseEvent>()   {

        @Override
        public void handle(javafx.scene.input.MouseEvent t) {
            playa.seek(Duration.seconds(slider.getValue()));
        }
});
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T23:27:46.393

使用`JFXPanel`：

```
 public class Test {

     private static void initAndShowGUI() {
         // This method is invoked on Swing thread
         JFrame frame = new JFrame("FX");
         final JFXPanel fxPanel = new JFXPanel();
         frame.add(fxPanel);
         frame.setVisible(true);

         Platform.runLater(new Runnable() {
             @Override
             public void run() {
                 initFX(fxPanel);
             }
         });
     }

     private static void initFX(JFXPanel fxPanel) {
         // This method is invoked on JavaFX thread
         Scene scene = createScene();
         fxPanel.setScene(scene);
     }

     public static void main(String[] args) {
         SwingUtilities.invokeLater(new Runnable() {
             @Override
             public void run() {
                 initAndShowGUI();
             }
         });
     }
 } 
```

其中方法`createScene()`来自`start(final Stage stage)`您的代码。与其将场景放到舞台上，不如将其归还。`

# jquery - 基本显示/隐藏代码上的 jQuery“未定义”错误

> ID：11562432
> 
> 赞同：0
> 
> 时间：2012-07-19T13:56:06.287
> 
> 标签：jquery, undefined

我有一些非常简单的代码：

```
var overlay = {
    show: function() {
        var width = $('#checkout-region').outerWidth();
        var height = $('#checkout-region').outerHeight();
        // Set vars and show
        $('#checkout-processing').css({
            'height': height + 'px',
            'width': width + 'px'
        }).fadeIn(300);
    },
    hide: function() {
        $('#checkout-processing').fadeOut(300);
    }
} 
```

只允许我overlay.show(); 和overlay.hide();。当我尝试在控制台（Chrome）中运行它们时，我继续得到一个（非常有用的）“未定义”。一个简单的 console.log('ok'); 显示功能在那里，但我无法弄清楚这一点。

这可能是一些愚蠢的事情，但我睡眠不足，而且现在从事这个项目的时间太长了。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:01:17.920

`Undefined`不是错误，而是返回值。

这些函数返回 Undefined 因为它们没有`return something;`行。

如果您尝试调试代码，您应该 console.log 查询结果以查看您的查询是否返回了正确的元素。像这样：

```
console.log($('#checkout-processing')); 
```

如果这有效，则元素应该淡出。

# macos - 在 OS X (10.7) 中编辑 sudoers

> ID：11562434
> 
> 赞同：4
> 
> 时间：2012-07-19T13:56:09.447
> 
> 标签：macos, sh, sudoers

我有一个脚本（由我的前任编写），它成功地在运行 OS X 10.6 的 Mac 上编辑了 sudoers 文件；它是这样的：

```
#!/bin/sh

if [ -z "$1" ]; then
    export EDITOR=$0 && sudo -E visudo
else
    echo "%staff ALL=NOPASSWD: /sbin/shutdown" >> $1
fi 
```

但是，当在运行 10.7 的 Mac 上运行时，它不会将该行添加到 sudoers 文件中，而是“以交互方式”启动 visudo。它似乎在任何时候都没有进入“else”子句。我怀疑第 4 行（“export ...”）的适当语法已经改变，但我似乎不知道如何。任何指针？

既然有人会问：我们有一个精心设计的（诚然，有些愚蠢，但必然如此）强制重启的修补时间表。如果用户在截止日期前没有故意重启，应用程序将在 5 分钟倒计时启动（或立即重启的选项），此时发出“sudo shutdown -r now”命令。为了我的理智，请不要让我为这种安排的性质辩护。这是我无法控制的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T14:15:41.070

`if [ -z "$1" ];`是一种常见的习惯用法，用于检查是否没有为脚本提供任何参数。当*不带参数调用*时，您的脚本将采用第一个路径，启动编辑器（在这种情况下应该是这个脚本本身）。 *给定一个文件名*作为参数，采用`else`-branch 并以非交互方式（在`visudo`上下文中）将一行附加到文件中。

假设脚本在没有参数的情况下从外部调用，sudo 开始清除 EDITOR 环境变量，或者（如@twalberg 所述）visudo 现在忽略 EDITOR。

要解决此问题，请调整 sudoers 文件以保留 EDITOR，并通过设置允许任何程序作为编辑器`env_editor`，或者将脚本（以及编辑 sudoers 文件的任何其他脚本）添加到`editor`变量中。

```
Defaults    env_keep += "EDITOR"
# UNSAFE
#Defaults   env_editor
# better
Defaults    editor = "/usr/bin/vi:/path/to/script" # ... possibly more 
```

如果您不想这样做（或不能以非交互方式进行）并且可以安全地假设不会发生同时编辑，您可以执行以下操作：

```
cp -p /etc/sudoers /etc/sudoers.tmp
echo "%staff ALL=NOPASSWD: /sbin/shutdown" >> /etc/sudoers.tmp
if visudo -cqf /etc/sudoers.tmp; then
    mv /etc/sudoers.tmp /etc/sudoers
else
    rm /etc/sudoers.tmp
    echo "update failed"
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T15:25:31.103

`visudo(8)`有话要说：

> 有一个 visudo 将在编译时使用的一个或多个编辑器的硬编码列表，可以通过编辑器 sudoers 默认变量覆盖。此列表默认为“/bin/vi”。通常， visudo 不支持 VISUAL 或 EDITOR 环境变量，除非它们包含上述编辑器列表中的编辑器。但是，如果 visudo 配置了 --with-env-editor 选项或在 sudoers 中设置了 env_editor 默认变量，则 visudo 将使用由 VISUAL 或 EDITOR 定义的任何编辑器。请注意，这可能是一个安全漏洞，因为它允许用户通过设置 VISUAL 或 EDITOR 来执行他们希望执行的任何程序。

我怀疑这就是你在这里遇到的。

# matlab - 在 MATLAB 中处理多个绘图

> ID：11562438
> 
> 赞同：2
> 
> 时间：2012-07-19T13:56:18.777
> 
> 标签：matlab, plot

我正在使用`plot(X)`where`X`是一个 n×k 矩阵，它产生`k`带有`n`点的图。

如何显示此情节的图例？更重要的是，是否有一种简单的方法来显示复选框以显示或不显示某些图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:19:21.060

我认为您会发现这部分文档很有用。
**显示和绘制表格数据的 GUI**
[http://www.mathworks.com/help/techdoc/creating_guis/bropmbk-1.html](http://www.mathworks.com/help/techdoc/creating_guis/bropmbk-1.html)

请将此主体用于文件中的`plot_callback`函数`tableplot.m`以获得灵活图例的肮脏实现。

```
function plot_callback(hObject, eventdata, column)
% hObject     Handle to Plot menu
% eventdata   Not used
% column      Number of column to plot or clear

colors = {'b','m','r'}; % Use consistent color for lines
colnames = get(htable, 'ColumnName');
colname = colnames{column};
lgidx = get(haxes, 'UserData');
if isempty(lgidx)
   lgidx = false(size(colnames));
end

if get(hObject, 'Value')
    % Turn off the advisory text; it never comes back
    set(hprompt, 'Visible', 'off')
    % Obtain the data for that column
    ydata = get(htable, 'Data');
    set(haxes, 'NextPlot', 'Add')
    % Draw the line plot for column
    hplot = plot(haxes, ydata(:,column),...
             'DisplayName', colname,...
             'Color', colors{column});
    lgidx(column) = true;
else % Adding a line to the plot
    % Find the lineseries object and delete it
  hplot = findobj(haxes, 'DisplayName', colname);
  lgidx(column) = false;
  delete(hplot);
end
if any(lgidx)
  legend(haxes, colnames{lgidx} );
else
  legend(haxes, 'off')
end
  set(haxes, 'UserData', lgidx);
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:45:22.397

一个例子：

```
x = cumsum(rand(100,3)-0.5);         %# three series with 100 points each
h = plot(x);
legend(h, {'first' 'second' 'third'}) 
```

![截屏](../Images/9aba46d69f5007b39ce3dcef59df8d4d.png)

# asp.net - 仅将用户添加到 1 个角色（asp.net 成员资格）

> ID：11562439
> 
> 赞同：0
> 
> 时间：2012-07-19T13:56:18.813
> 
> 标签：asp.net, drop-down-menu, roles, membership, createuserwizard

我试图允许用户从包含所有角色的下拉列表中选择 createuserwizard 上的角色。我没有收到错误，但无论选择什么下拉列表项，用户总是添加到“提供房间”角色。

代码：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        roleDropDownList = RegisterUser.CreateUserStep.ContentTemplateContainer.FindControl("RoleDropDownList")
        roleDropDownList.DataSource = Roles.GetAllRoles()
        roleDropDownList.DataBind()
    End Sub

    Protected Sub RegisterUser_CreatedUser(ByVal sender As Object, ByVal e As EventArgs) Handles RegisterUser.CreatedUser         
        Roles.AddUserToRole(RegisterUser.UserName, roleDropDownList.SelectedValue)         
    End Sub 
```

标记：

```
<asp:DropDownList ID="RoleDropDownList" runat="server">

                                </asp:DropDownList> 
```

html:

```
<option value="Offering Rooms">Offering Rooms</option>
<option value="Seeking Rooms">Seeking Rooms</option> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T14:09:55.080

您需要添加检查这是否是回发而不是再次绑定：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
     If Not IsPostBack Then        
        roleDropDownList = RegisterUser.CreateUserStep.ContentTemplateContainer.FindControl("RoleDropDownList")
        roleDropDownList.DataSource = Roles.GetAllRoles()
        roleDropDownList.DataBind()
     End If
End Sub 
```

# javascript - jquery过滤图像src问题

> ID：11562442
> 
> 赞同：0
> 
> 时间：2012-07-19T13:56:37.643
> 
> 标签：javascript, jquery

如果图像不包含 src 那么我想隐藏`div.PageHeaderDescription`

```
<div class="PageHeaderDescription">
  <h1>Bistro 300</h1>
    <img border="0" src="images/Category/large/469.jpg" id="EntityPic621">
    This is some text
</div> 
```

为此，我使用了：

```
if ($("div.PageHeaderDescription img").filter("[src='']")) {
    $("div.PageHeaderDescription").hide();
} 
```

但是，如果您将 src 路径放入图像中，jquery 仍然会隐藏`div.PageHeaderDescription`，这是错误的。如果有图像 src，它需要是可见的。

这是我的例子：http: [//jsfiddle.net/dfasd/1/](http://jsfiddle.net/dfasd/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T13:58:36.730

```
$("div.PageHeaderDescription img[src='']").parent().hide(); 
```

`img`用空查找`src`并隐藏其父级`div.PageHeaderDescription`；

**[演示](http://jsfiddle.net/xx62q/21/)**

或者

```
$("div.PageHeaderDescription").has("img[src='']").hide(); 
```

用 empty隐藏`div.PageHeaderDescription`这个。`img``src`

**[演示](http://jsfiddle.net/xx62q/24/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T13:58:04.613

`filter()`返回一个 jQuery 对象，无论元素是否匹配，它总是真实的。

你应该做的是检查`length`返回对象的属性；

```
if ($("div.PageHeaderDescription img").filter("[src='']").length) {
    $("div.PageHeaderDescription").hide();
} 
```

尽管您可以将其缩短为；

```
if ($("div.PageHeaderDescription img[src='']").length) {
    $("div.PageHeaderDescription").hide();
} 
```

但是，如果`div.PageHeaderDescription`页面上有多个，则应该这样做；

```
$("div.PageHeaderDescription").each(function () {
    var self = $(this);

    if (self.find('img[src=""]').length) {
        self.hide();
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T14:06:41.710

如果您想在页面加载时执行此操作，可以使用以下代码：

```
$("div.PageHeaderDescription img")     // search for all img's inside a div...
   .filter("[src='']")                 // get only ones with no src
   .parents("div.PageHeaderDescription")   // get their parent elements
   .hide(); // hide then 
```

或者，您可以在每次要检查页面中是否有任何没有 src 的 img 并且必须隐藏时运行相同的脚本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T14:05:00.367

无需使其比使用`.filter()`.

```
var phd = $("div.PageHeaderDescription");    
if ($('img:not([src])',phd).length || $('img[src=""]',phd).length) {
    phd.hide();
} 
```

​</p>

我检查是否`img`没有该`src`属性，或者它是否具有该属性，我检查它是否为空白。

小提琴：http: [//jsfiddle.net/iambriansreed/G6bPu/](http://jsfiddle.net/iambriansreed/G6bPu/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T14:00:54.327

如前所述，一个 jQuery 对象总是计算为`true`. 但是您根本不需要`if`声明，只需将元素集减少为具有“空”图像的元素即可。这就是它的`.filter()`用途：

```
$("div.PageHeaderDescription").filter(function() {
    return $(this).find("img[src='']").length > 0;
}).hide(); 
```

# xhtml - Jsoup文本提取

> ID：11562452
> 
> 赞同：0
> 
> 时间：2012-07-19T13:57:08.887
> 
> 标签：xhtml, html-parsing, jsoup

这是一个提取案例，我想知道 Jsoup 中是否有本机方法或任何其他 HTML 解析器可以有效地执行。假设我有以下页面，我想从中提取“StackOverFlow”以及任何可以形成正确句子的附近文本。

```
<html> <head><title>A test page </title></head> 
<body> 
<p> Not relevant 1\. </p>
<p> Not relevant 2\. 
<em> word1 word2 word3 <b> StackOverFlow </b> word4 word5 word6 </em>
</p>
</body>  
</html> 
```

应该提取的文本是：word1 word2 word3 StackOverFlow word4 word5 word6。而不是这个：不相关 2\. word1 word2 word3 StackOverFlow word4 word5 word6

即有没有办法在 Jsoup 中识别句子边界？可以想到一些正则表达式，但我想知道是否有更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T02:23:41.203

最好的方法是使用 CSS JQuery 类似的选择器。另请阅读有关“组合器”的信息，这样您就可以从哪个元素控制您的元素必须是子元素。

[http://jsoup.org/apidocs/org/jsoup/select/Selector.html](http://jsoup.org/apidocs/org/jsoup/select/Selector.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:07:28.890

尝试这个：

```
doc.select("em").text(); 
```

# wpf - wpf网络浏览器cpu问题

> ID：11562461
> 
> 赞同：0
> 
> 时间：2012-07-19T13:57:26.610
> 
> 标签：wpf, webbrowser-control, cpu-usage

我对 wpf Web 浏览器控件有疑问。我正在使用 jQuery 进行一些 HTML 处理。我正在使用 browser.InvokeScript 方法来调用脚本。脚本执行正常，没有问题，但我的控件有问题。它占用了 50% 的 CPU。CPU 使用率是恒定的，即使我没有在控件上做任何事情。我将其最小化，但 CPU 使用率始终保持在 50%。没有 InvokeScript，它没有问题，CPU 使用率处于正常水平。

似乎 InvokeScript 产生了问题。我用它来隐藏 HTML 中的某些 div。我看不出可能是什么问题。有没有人遇到过这样的问题？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T16:31:38.640

您是否使用 WPF 性能套件对此进行了分析？ [http://msdn.microsoft.com/en-us/library/aa969767.aspx](http://msdn.microsoft.com/en-us/library/aa969767.aspx)

如果你这样做，性能套件可能会给你答案。

# perl - 是否有使用 svn 的命令来显示过去 24 小时内的修订？

> ID：11562463
> 
> 赞同：1
> 
> 时间：2012-07-19T13:57:31.440
> 
> 标签：perl, svn

我目前正在使用 svn 来跟踪几个目录中文本文件的更改。我正在使用下面的代码（整个程序的一部分）来提取当前的修订号并使用 xml 在 perl/cgi 脚本中显示它。我的目标是为过去 24 小时（或一天）内更改的 svn 修订显示不同的颜色编号。我认为有一种方法可以使用 svn --recursive 函数。我知道如何查看特定日期，但这会不断更新。

```
my $SVNInfoXML=`svn --recursive --xml info data/text/`;
my $SVNInfo=XMLin($SVNInfoXML);
my %FileInfo=();my $SVNLatestRev=0;
for my $entry (@{$SVNInfo->{entry}}) {
    $FileInfo{File::Basename::basename($entry->{path},'.diff')}=$entry;
    $SVNLatestRev=($entry->{revision}>$SVNLatestRev)?$entry->{revision}:$SVNLatestRev;} 
```

稍后在程序中，我用 HTML 打印一个表格，显示最新的 svn 修订号；但是，我不仅需要查看数字，还需要查看是否在最后一天进行了修改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T02:14:21.657

这是一个 Perl 脚本。对？

为什么不让 Perl 弄清楚早 24 小时是明智的，然后用它`Time::Piece`来解析 Subversion 日期呢？

实际上，您为什么要使用`svn info`而不是简单地使用`svn log --xml`. 这将为您提供所有更改的历史记录，您只需查看每个日期并查看它是否与您的旧日期匹配。

要获取 24 小时前的时间，您可以使用以下命令：

```
use Time::Piece
use Time::Seconds    #Constants that come in handy

my $current_time = localtime;
my $yesterday_time = $current_time - ONE_DAY; 
```

现在，`$yesterday_time`是24小时前。

如果使用`XML::Simple`，则可以将`svn log --xml $file`输出格式转换为方便的结构。这是我写的一个简单的测试程序：

```
#! /usr/bin/perl

use strict;
use warnings;
use autodie;
use feature qw(say);

use XML::Simple qw(xml_in xml_out);
use Time::Piece;
use Time::Seconds;

my $file_name = "?Some Name?";

my $now = localtime;
my $yesterday_time = $now - ONE_DAY;

open (my $xml_file, "-|", qq(svn log --xml "$file_name"));

my $xml = xml_in($xml_file);

# XML is a reference to a hash with a single key 'logentry'
# This points to a reference to an array and each entry is
# a reference to a hash that contains the four pieces to the
# log entry.

my $entries_ref = $xml->{logentry};

foreach my $entry (@{$entries_ref}) {

    # Each entry is a reference to a hash

    my $revision = $entry->{revision};
    my $author = $entry->{author};
    my $date = $entry->{date};
    my $message = $entry->{msg};

    # For giggles, we print out the four items.
    # In truth, there could be more than four items
    # in the hash if there was also a revprop too.

    say "$revision: $author: $date: $message";

    # The date is in 100,000 of a second. We need to get
    # rid of everything on the other side of the seconds
    # decimal before we manipulate it.

    $date =~ s/\.\d+Z$//;   # Get rid of 10,000 of seconds

    # Now, we can convert the "svn log" date to a Time::Piece
    my $rev_date = Time::Piece->strptime($date, "%Y-%m-%dT%H:%M:%S");

    # Compare the rev date to the $yesterday_time date
    if ($rev_date < $yesterday_time) {
        say "Revision $revision is older than one day"
    }
} 
```

# javascript - 像在代码编辑器中一样在网页上缩进代码？

> ID：11562465
> 
> 赞同：7
> 
> 时间：2012-07-19T13:57:37.230
> 
> 标签：javascript, css, pre

是否可以像在代码编辑器中那样在网页上包装缩进代码？请参阅下面的屏幕截图比较以更好地理解我的意思：

**`pre-wrap`在网页上：**

![截图 1](../Images/38ebf5db31f4063e09cb20c060853186.png)

**在代码编辑器中换行缩进：**

![截图 2](../Images/dd83e3b249bff9ad53eda0cd1d6fd986.png)

我的意思是缩进线即使在换行后也保持缩进。这似乎不会发生在网页上。是否有一个 CSS 属性可以做到这一点？（JavaScript 也可以。）

**注意：**我不是在这里谈论代码突出显示。这是关于包裹线的缩进。

* * *

如果这很重要——这就是我在网页上显示代码块的方式：

```
<pre><code>if ( is_page() && $post->post_parent ) {
  return $post->post_parent;

} else {
  return false;
}
</code></pre> 
```

...并且`white-space: pre-wrap;`样式应用于`pre`标签。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T10:10:37.720

## 算法

1.  获取元素的内容，并生成所有行的列表。
2.  使用该元素测量空格字符的宽度。
3.  创建一个[文档片段](https://developer.mozilla.org/en/DOM/document.createDocumentFragment)（以获得最佳性能！）。
4.  循环遍历所有行。对于每一行：
    *   计算前面的空格数。
    *   创建块级元素（例如`<div>`）。
    *   将`marginLeft`（或`paddingLeft`，如果您愿意）属性设置为单个空格大小与前缀空格数的乘积。
    *   追加行的内容（左修剪）。
5.  用片段替换实际元素的内容。

## 代码（演示：http: [//jsfiddle.net/YPnhX/](http://jsfiddle.net/YPnhX/)）：

```
/**
 * Auto-indent overflowing lines
 * @author Rob W http://stackoverflow.com/u/938089
 * @param code_elem HTMLCodeElement (or any element containing *plain text*)
 */
function autoindent(code_elem) {
    // Grab the lines
    var textContent = document.textContent === null ? 'textContent' : 'innerText';
    var lines = code_elem[textContent].split(/\r?\n/),
        fragment = document.createDocumentFragment(),
        dummy, space_width, i, prefix_len, line_elem;

    // Calculate the width of white space
    // Assume that inline element inherit styles from parent (<code>)
    dummy = document.createElement('span');
    code_elem.appendChild(dummy);
    // offsetWidth includes padding and border, explicitly override the style:
    dummy.style.cssText = 'border:0;padding:0;';
    dummy[textContent] = ' ';
    space_width = dummy.offsetWidth;
    // Wipe contents
    code_elem.innerHTML = '';

    for (i=0; i<lines.length; i++) {
        // NOTE: All preceeding white space (including tabs is included)
        prefix_len = /^\s*/.exec(lines[i])[0].length;
        line_elem = fragment.appendChild(document.createElement('div'));
        line_elem.style.marginLeft = space_width * prefix_len + 'px';
        line_elem[textContent] = lines[i].substring(prefix_len);
    }
    // Finally, append (all elements inside) the fragment:
    code_elem.appendChild(fragment);
} 
```

## 浏览器兼容性

*   IE8+（IE7-不支持[`white-space:pre-wrap`](https://developer.mozilla.org/en/CSS/white-space#Browser_compatibility)）
*   铬 1+
*   火狐 3+
*   野生动物园 3+
*   Opera 9+（以前的版本未经测试）

## 笔记

*   在此示例中，我计算了空格 (U+0020) 字符的宽度。如果要计算其他空白字符的不同值，则使用类似的方法。
*   上一个注释的后续：要考虑选项卡，您必须采用硬路由，这会降低性能。对于每一行，将 dummy 的内容（附加到`code_elem`！）设置为前缀空白，然后使用`.offsetWidth`.
    每次都会渲染元素。对于数百行，这种方法可能会导致 CPU 使用率飙升。永远不要使用标签在网页中显示代码！
*   该`autoindent`函数假定元素的内容是**纯文本**。

# ruby-on-rails - 带有 TinyTDS 和 SQL Server 适配器的 Rails / 语言

> ID：11562472
> 
> 赞同：0
> 
> 时间：2012-07-19T13:57:59.273
> 
> 标签：ruby-on-rails, activerecord

我实际上正在使用 TinyTDS 和 activerecord-sql-adapter gems 来连接到我的数据库。每个错误消息都以英文显示（即：ActiveRecord::StatementInvalid TinyTds::Error: Invalid column name 'rofl'.:)

有没有办法让这种消息以另一种语言显示？我找不到任何可参数化的文件或有关此问题的其他内容。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:20:39.370

连接后使用“SET LANGUAGE ...”到您选择的一种。SQL Server 适配器提供了一个回调方法来为这样的事情配置每个连接。请参阅自述文件的这一部分。

[https://github.com/rails-sqlserver/activerecord-sqlserver-adapter#configure-connection--app-name](https://github.com/rails-sqlserver/activerecord-sqlserver-adapter#configure-connection--app-name)

# hibernate - Hibernate 连接表的标准

> ID：11562473
> 
> 赞同：2
> 
> 时间：2012-07-19T13:58:00.187
> 
> 标签：hibernate, hibernate-criteria

我正在使用 HibernateTemplate.findByCriteria 方法进行一些查询。现在我想对标准创建一些 SQL 限制，比如

```
criteria.add(Restrictions.sqlRestriction("name like '%abc%'") 
```

问题是我试图获取一个与 ClassB 对象有关系的对象 Class A 并且两个类都有一个名为“name”（或“id”或...）的字段，因此休眠引擎进行连接在具有重复列名的表上。如何根据对象类型指定限制？

我试过 {classA.name} 和类似的变体，但我得到一个“不明确的列名”异常。

示例（其中条件是 Restrictions.sqlRestriction() 的数组）：

```
final DetachedCriteria criteria = DetachedCriteria.forClass(objectClass);
criteria.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY);
for(Criterion criterion : criterions) {
    criteria.add(criterion);
}
List<T> results = template.findByCriteria(criteria, firstResult, maxResults); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T15:33:45.223

您需要创建一个连接，例如为了能够访问用户的字段：

```
String username ="spnbldk";
criteria.createAlias("user", "u");
criteria.add(Restrictions.eq("u.name", username); 
```

有关更多信息，请查看这些方法：

```
public class TaskDAO {

    public List<Task> findByCriteria(Map<String,String> aliasMap, List<Criterion> list) throws Exception {

                Criteria criteria = getSession().createCriteria(task.class);
                Iterator<Entry<String, String>> it = aliasMap.entrySet().iterator();
                while (it.hasNext()) {
                    Entry<String, String> pairs = it.next();
                    criteria.createAlias(pairs.getKey(), pairs.getValue());
                }
                for (Criterion criterion : list)
                    criteria.add(criterion);

                return criteria.list();
    }
} 
```

然后你可以在服务类中使用它：

```
 public List<Task> get(String username) {
            try {
                // Manage Restrictions
                List<Criterion> list = new ArrayList<Criterion>();
                Criterion c = Restrictions.eq("u.username", username);
                list.add(c);

                Map<String,String> aliasMap = new HashMap<String, String>();
                    aliasMap.put("user", "u");

                List<Task> tasks = taskDAO.findByCriteria(aliasMap, orders);
                return tasks

            } catch (Exception e) { }
        } 
```

“sqlRestriction”应该像这样工作：

```
Criteria criteria = session.createCriteria(Task.class);
criteria.add(Restrictions.sqlRestriction("{alias}.username like 'spn'));
List result = criteria.list(); 
```

# sql - Oracle 10.2.0.5 - SQL 命令未正确结束

> ID：11562489
> 
> 赞同：0
> 
> 时间：2012-07-19T13:58:35.610
> 
> 标签：sql, oracle

我有一个奇怪的 Oracle 查询问题。问题是我真的是一名 MS SQL 开发人员。

这是一段相当大的 SQL，但是当它以这个结尾时：

```
WHERE     RLTEST.D550M.PERSON_REF = '00027280'; 
```

一切正常。

当它结束时：

```
WHERE     RLTEST.D550M.PERSON_REF = '00027280'
AND       RLTEST.D580M.PROJECTED_END_DATE <= SYSDATE(); 
```

我明白了`ORA-00933: SQL command not properly ended`

当它结束时：

```
WHERE     RLTEST.D550M.PERSON_REF = '00027280'
AND       NVL(RLTEST.D580M.PROJECTED_END_DATE, SYSDATE()-1) <= SYSDATE(); 
```

我明白了`ORA-00907: missing right parenthesis`

我需要做什么才能添加日期比较？

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T14:02:47.280

您不需要额外的括号 - 从 sysdate 之后删除“()”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:09:29.370

Oracle 有一个伪列的概念，sysdate 就是其中之一，因此您应该在引用它后立即删除括号/大括号。

有关伪列的更多信息可[在此处获得](http://www.orafaq.com/wiki/Pseudo-column)

# backbone.js - Backbone.js 不遍历集合

> ID：11562495
> 
> 赞同：0
> 
> 时间：2012-07-19T13:58:59.273
> 
> 标签：backbone.js, coffeescript

有点奇怪...

我有收藏：

```
class Store.Collections.Product extends Backbone.Collection

  url: '/api/products'

  model: Store.Models.Product 
```

有观点：

```
class Store.Views.Origin extends Backbone.View

  initialize: ->
    @collection = new Store.Collections.Product()
    @collection.fetch() 
    @model.bind('change:formatted', @render, this);
    @render()

  events:
    'change [name=origin]': 'setOrigin'

  el: =>
    @options.parent.$('.origin-input')[0]

  template: JST["backbone/templates/shapes/product"]

  render: ->
    $this = $(this.el)
    $this.html(@template(model: @model.toJSON(), errors: @model.errors))
    console.log(@collection)
    @collection.each(@appdenDropdown)
    @delegateEvents()
    this

  appdenDropdown: (product) ->
    console.log("append trigger")
    #view = new Store.Views.Products(model: product)
    #$('#history').append(view.render().el) 
```

使用模板：

```
 <div id="history"></div> 
```

该系列作品...

```
console.log(@collection) 
```

显示数据！然而

```
@collection.each(@appdenDropdown) 
```

不做任何事情，不出错，或通过任何事情。它只是没有做任何事情。我正在尝试从集合中提取数据！但它不会...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T15:02:28.643

这是因为集合中还没有任何内容。

`@collection.fetch()`在初始化程序中是一个异步方法。在遍历集合项之前，您必须等到提取完成。

该`fetch()`函数接受一个可选的成功回调，该回调在获取完成时触发。

所以你可以更新你的初始化代码，等到集合被获取后再调用`render`. 这是代码。

```
initialize: ->
  @collection = new Store.Collections.Product()
  @collection.fetch
    success: =>
      @render() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T23:15:27.580

其他人提到的问题`fetch`是异步的，但解决方案更简单：jQuery的`deferred`对象：

```
initialize: ->
  @collection = new Store.Collections.Product()
  @collection.deferred = @collection.fetch()

  @model.bind('change:formatted', @render, this);
  @collection.deferred.done ->
    @render() 
```

这里发生的情况是，当您调用 时`@collection.deferred.done`，您是在告诉 jQuery 等到集合加载完毕后再执行`render`它，这正是您想要的。我认为这应该有效。

几个很好的参考`deferred`：

*   [http://lostechies.com/derickbailey/2012/02/07/rewriting-my-guaranteed-callbacks-code-with-jquery-deferred/](http://lostechies.com/derickbailey/2012/02/07/rewriting-my-guaranteed-callbacks-code-with-jquery-deferred/)
*   [http://www.erichynds.com/jquery/using-deferreds-in-jquery/](http://www.erichynds.com/jquery/using-deferreds-in-jquery/)

# r - 将向量一分为二

> ID：11562497
> 
> 赞同：1
> 
> 时间：2012-07-19T13:59:12.367
> 
> 标签：r, vector

如何将一个向量分成两个，以便为每个新向量选择一个随机样本。但我总是想分成两半。例如

```
x <- 1:10
obj <- splitMyVector(x)

obj$a
 > 5 3 9 7 10
obj$b
 > 8 4 1 6 2 
```

注意：这样做的目的是做一个半可靠性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T14:04:06.560

```
split(sample(x),letters[seq(length(x))%%2+1])
$a
[1]  9  7 10  4  2

$b
[1] 6 1 8 3 5 
```

# sql - 连接两个表的sql查询

> ID：11562498
> 
> 赞同：0
> 
> 时间：2012-07-19T13:59:12.767
> 
> 标签：sql

> **可能重复：**
> [从 2 个表中选择简单 SQL（什么是联接？）](https://stackoverflow.com/questions/11040587/simple-sql-select-from-2-tables-what-is-a-join)

我有一个 sql 查询问题。两张表：

**地点**

```
lid  State
---  -----
1    MI
2    FL
3    CA 
```

**时间**

```
tid lid
a   1
b   1
c   2
d   2
e   3
f   3 
```

现在我想连接这两个表。如果我做：

```
select l.lid, l.state, t.tid 
from location l, time t 
where l.lid=t.lid 
```

然后它会给我这个结果：

```
lid state tid
--- ----- ---
1   MI    a
1   MI    b
2   FL    c
2   FL    d
3   CA    e
3   CA    f 
```

我不想得到这个，而是想要得到这个结果：

```
lid state tid1 tid2
--- ----- ---- ----
1   MI    a    b
2   FL    c    d
3   CA    e    f 
```

我应该如何编写查询？

此外，假设在**Time**表中，每个盖子**正好有两条记录**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T14:53:29.567

您正在尝试的问题是它不会对结果进行分组，并且 GROUP BY 子句只能与聚合函数结合使用。

这可以通过像这样使用来轻松完成

```
select location.lid as [lid],
        location.state as [state],
        min(time.tid) as [tid1],
        max(time.tid)as [tid2] 

from
      location,time 
where
      location.lid = time.lid 

group by 
      location.state,location.lid; 
```

查询的作用是正常选择盖子和状态，但选择最小 tid1 和最大 tid2。由于只有两个结果，一个是最大的，第二个是最小的。

（查询只选择最大值和最小值。如果有三个值，查询仍然只显示两个结果。）

最后，结果按位置 ID 和州名分组。

看到它在这里工作[SqlFiddle](http://sqlfiddle.com/#!3/c8f5c/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:12:13.643

```
SELECT 
    l.lid, l.state, 
    MIN(t.tid) AS tid1,
    MAX(t.tid) AS tid2
FROM
        location AS l
    JOIN 
        time AS t 
            ON l.lid = t.lid
GROUP BY
    l.lid, l.state ; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-19T17:01:42.680

我有我自己的版本解决这个问题。

只需连接两个**时间表**并使用**大于**运算符。

```
select * from
location l, time t1, time t2
where l.lid=t1.lid and l.lid=t2.lid and t1.tid<t2.tid 
```

# git - 仅合并与 GIT 中特定分支相关的更改？

> ID：11562501
> 
> 赞同：2
> 
> 时间：2012-07-19T13:59:25.090
> 
> 标签：git, version-control, merge, branch, git-merge

将特定分支合并到另一个分支时遇到问题。

我们总共有 3 个分支作为我们项目的基础。开发，SUP，大师。开发人员基于他们的 DEV 分支，当他们的票据作为基线时，我将它们合并到 DEV 中供客户测试。此时没有额外的更改，因为它们基于 DEV 的本地分支。问题是当我尝试将例如分支 DEV12345 合并到 SUP 中时，它显示了一堆与 DEV12345 分支（提交）中所做的更改无关的更改。

我已经阅读了有关樱桃采摘和其他一些解决方案的信息，但我刚刚开始使用 GIT，因此没有足够的经验来遵循我所看到的一些答案。

我不想挑选，因为当我将 SUP 合并到 master 时，我的理解是，我可能会丢失提交或有更多的合并冲突？

```
$ git merge DEV12345 --no-commit
$ git status 
```

在这一点上，它显示了我不想要的一堆变化。我确实尝试过这个，这是我从 Stackoverflow 中的另一个解决方案中得到的。

```
$git add <fileNamePath> 
$git clean -f -d
$git reset HEAD 
```

我想这就是我所做的。我已经验证这确实只带来了我想要的特定更改，即 100 个文件中只有 1 个文件不同。我相信如果我没记错的话，因为我做了我自己的

```
$git commit -m "xxxxxxxxxxxx" 
```

我会丢失原作者的提交/历史，这对我们不利。

有没有更简单的方法来做到这一点？当我最终发布到大师时，这也将保留历史。一旦客户批准票，我们就会发布到 SUP，然后一旦我将所有批准的票发布到 SUP，我将 SUP 合并到 master，这是我们的 Live 系统。

有人可以以简单的形式给出一个解决方案，以便初学者可以理解吗？

感谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:08:49.063

Git 允许您将提交压缩为一个（或多个）。它基于交互式`git rebase`应用程序。也许，您可以合并到 SUP 中，然后将您的提交压缩在一起。因此，您将提交保留在您的分支中，同时有意义地合并到 SUP 中。

有关 的更多信息`git rebase`，请查看此[配方](http://gitready.com/advanced/2009/02/10/squashing-commits-with-rebase.html)或 git-book。

再见

# java - java中jtextarea中的自定义选项卡

> ID：11562502
> 
> 赞同：-3
> 
> 时间：2012-07-19T13:59:29.573
> 
> 标签：java, swing, jtextcomponent, styleddocument, defaultstyleddocument

如何在 jtextarea 中设置不同长度的制表位，

第一个标签应该停止 4

第二个标签应该在 20 处停止（如果我从 4 给出标签，它应该在 20 处停止）

第三个标签应该在 30 处停止（如果我从 0 给出标签，它应该在 30 处停止）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T15:05:38.997

尝试这样的事情。

```
StyledDocument document = new DefaultStyledDocument():

SimpleAttributeSet attributes = new SimpleAttributeSet();

TabStop[] tabStops = new TabStop[3];
tabStops[0] = new TabStop(4.0, TabStop.ALIGN_LEFT, TabStop.LEAD_DOTS);
tabStops[1] = new TabStop(20.0, TabStop.ALIGN_LEFT, TabStop.LEAD_DOTS);
tabStops[2] = new TabStop(30.0, TabStop.ALIGN_LEFT, TabStop.LEAD_DOTS);

TabSet tabSet = new TabSet(tabStops);
StyleConstants.setTabSet(attributes, tabSet);
document.setParagraphAttributes(0, 0, attributes, false); 
```

创建 时`JTextArea`，请使用`Document`构造函数。

# php - 你可以使用 mysql 来更改数据库值，如果它是过去的日期？

> ID：11562503
> 
> 赞同：0
> 
> 时间：2012-07-19T13:59:32.800
> 
> 标签：php, mysql, database, mysqli

假设我有两列。日期和状态。

当新行出现时，STATUS 会设置一个默认值。状态有四个值：

```
Not Answered, 
Just Asked (Default), 
Answered, 
Closed 
```

假设 2 天后，我希望它自动更改为 Not Answered，我可以使用 mysql 来执行此操作吗？还是我必须使用 PHP 之类的脚本语言并每天运行它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T14:00:54.860

这最好使用您每晚运行的 cron 脚本来完成。

```
UPDATE `my_table` SET status = 'Not answered' WHERE date = ADDDATE( now(), -2 ); 
```

不过，您可能需要首先检查日期格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:01:42.640

您可以为下一次插入使用“插入后”触发器来更新现有值。但是，如果您不能依赖不断输入的新值，那么 cron 作业是您最好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T14:03:08.683

使用每次需要时运行的 cron 脚本，例如对于 mysql，您可以使用：

```
mysql -h hostname -u username -ppassword -e "query to run" 
```

# javascript - Adding audio to click event

> ID：11562509
> 
> 赞同：3
> 
> 时间：2012-07-19T13:59:48.850
> 
> 标签：javascript, jquery, jquery-ui

I want to add a sound clip to a button on a game I am creating. Currently It doesn't do anything and I don't know why.

At the moment In the script I have...

```
var audio = $(".mysoundclip")[0];
$(".minibutton").onclick(function() {
    audio.play();
}); 
```

In the HTML I have...

```
<audio id="mysoundclip" preload="auto">
    <source src="http://www.wav-sounds.com/cartoon/bugsbunny1.wav"></source>
</audio> 
```

Then I have CSS for .minibutton.

Any ideas why it won't work?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T14:22:19.470

Your jQuery had some simple errors in it.

HTML

```
<audio id="mysoundclip" preload="auto">
    <source src="http://www.wav-sounds.com/cartoon/bugsbunny1.wav"></source>
</audio>
<button type="button">play</button> 
```

jQuery

```
var audio = $("#mysoundclip")[0];
$("button").click(function() {
    audio.play();
});​ 
```

Fiddle: [http://jsfiddle.net/iambriansreed/VavyK/](http://jsfiddle.net/iambriansreed/VavyK/)

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:02:58.777

Maybe I'm a too suspicous.. but

`http://www.sound-effect.com/sounds1/animal/Saf/Tiger1.wav` "The requested URL was not found on this server"

If that's just a typo, you should also try to figure out which audio types a browser is capable to play:

```
myApp.htmlAudio = (function _htmlAudioCheck() {
    var elem = document.createElement('audio'),
        bool = false;

    try {
        if( !!elem.canPlayType ) {
            bool = new Boolean(bool);
            bool.ogg = elem.canPlayType('audio/ogg; codecs="vorbis"');
            bool.mp3 = elem.canPlayType('audio/mpeg;');

            bool.wav = elem.canPlayType('audio/wav; codecs="1"');
            bool.m4a = ( elem.canPlayType('audio/x-m4a;') ||      elem.canPlayType('audio/aac;'));
        }
    } catch(e) { }

    return bool;
}()); 
```

Now we can check like

```
if( myApp.htmlAudio && myApp.htmlAudio.wav ) {
} 
```

if the browser is able to playback `.wav` files for instance.

However, I never saw a nested `source element` for `audio elements`. That should be named `track` if anything. But you don't really need that here, you can just have a `src` attribute on the `audio element` itself. Example: [http://jsfiddle.net/5GUPg/1/](http://jsfiddle.net/5GUPg/1/)

# javascript - 有什么方法可以使这个名称生成循环运行最少秒数？

> ID：11562511
> 
> 赞同：0
> 
> 时间：2012-07-19T13:59:56.750
> 
> 标签：javascript, jquery

我正在使用以下代码（其中包含一些 Frog VLE API 代码；希望这不太相关）从列表中选择一个随机学生。

这很好用，但有时——考虑到它的随机性——它只运行很短的一段时间。是否可以先循环多次，以确保它至少运行 X 段时间？

```
var Count = 0;

/* construct the array of people */
for (var i in data.users) {
    for (var n = 0; n < data.users[i].Quantity; n++) {
        var TempObj = { 'Count' : Count, 'Student_ID' : i, 'Student_Name' : data.users[i].Student_Name };
        RewardPurchases.PurchasesArray[Count] = TempObj;
        Count++;
    }
} 
```

...这里有更多代码，与脚本的工作方式无关...

```
$('button#random').click( function() {

    /* first things first, play a drum-roll when the button is clicked! */
    $('embed').remove();
    $('body').append('<embed src="/user/74/177499.wav" autostart="true" hidden="true" loop="true">');

    /* take the RewardPurchases.PurchasesArray and sort it so that there's no particular order */
    RewardPurchases.PurchasesArray.sort(function() {return 0.5 - Math.random()})

    /* remove the winner class for consecutive re-rolls */
    $display.removeClass( "winner" );
    $display.addClass( "spinner" );

    /* determine the number of people in the array and calculate a random winner */
    var total = RewardPurchases.PurchasesArray.length,
        selected = Math.floor( Math.random() * total ),
        i = 0;

    /* work out how long each name should appear for, dependent upon how many people are in the array */
    var timeout = ( 15000 / total );

    /* run through the array of people ... */
    for (i=0; i<total; i++) {

        setTimeout((function(i){
            return function(){
                console.log( "timeout", i );

                /* ... if the person in the array is a valid person! then display their name */
                if (typeof RewardPurchases.PurchasesArray[i] === 'object' && typeof RewardPurchases.PurchasesArray[i] !== null) {
                    $display.text( "[" + RewardPurchases.PurchasesArray[i].Count + "] " + RewardPurchases.PurchasesArray[i].Student_Name.toUpperCase() );

                    /* if we encounter the winner, play a cheering wav and change the class of the display so that they appear in big, bold, red text */
                    if( i === selected ) {
                        $('embed').remove();
                        $('body').append('<embed src="/user/74/177086.wav" autostart="true" hidden="true" loop="false">');

                       $display.addClass( "winner" );
                    }
                }
            };
        }(i)), i*timeout);

        /* if the winner has been found, break the loop */
        if( i === selected ) {
            break;
        }
    }
} ); 
```

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:20:29.660

你可以做这样的事情：

```
function doforsec(msec, func) {
    var curDate = new Date().getTime();
    while ((new Date().getTime() - curDate) < msec) {
        func();
    }
}
doforsec(200, function() {
    console.log(new Date().getSeconds())
});​ 
```

这会一次又一次地执行给 doforsec 的函数，直到指定的时间段（以毫秒为单位）结束。（首先我有几秒钟，但我认为毫秒会更好）

[JSfiddle](http://jsfiddle.net/7LMkP/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T23:28:18.410

因为我的截止日期是......好吧，大约 8 小时后发布这个......我决定重新编写脚本并使用 jQuery 插件：

```
Array.prototype.remove = function(from, to) {
    var rest = this.slice((to || from) + 1 || this.length);
    this.length = from < 0 ? this.length + from : from;
    return this.push.apply(this, rest);
};

$(document).ready(function(){

        var staff = [ 'hardcoded', 'list', 'of', 'staff', 'members' ];

        $('button#start').click( function() {
        var $display = $('#display'),
            $results = $('#results table');
        $display.removeClass( "winner" );
        $display.addClass( "spinner" );

        var counter = 0,            
            rand = 0,
            run_time = 10,
            delay = ( run_time * 100 ) / staff.length,
            loop_number = 5,
            max_count = staff.length * loop_number;

        $display.doTimeout( 'loop', delay, function() {
            counter++;
            var newRand = Math.floor( Math.random() * staff.length );
            if ( rand === newRand ) {
                rand = Math.floor( Math.random() * staff.length );
            } else {
                rand = newRand;
            }

            $(this).text( staff[rand] );

            if ( counter < max_count ) { return true; }
            else {
                $('#results tr:last').after('<tr><td class="number">' + staff.length + '</td><td>' + staff[rand] + '</td></tr>');
                staff.remove( rand );
            }
        });

        $display.doTimeout( 'class', max_count * delay, function() {
            $display.removeClass( "spinner" );
            $display.addClass( "winner" );
        });
    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T14:09:06.453

在 var timeout = ( 15000 / total ) 之后；插入以下内容，并删除 (i=0; i

```
var totalTime = 2000;
var timeOut= Math.Ceiling(totalTime/timeout);
var timesToDisplay = totalTime / timeOut;
var currentDisplay = 0;
for (currentDisplay = 0; currentDisplay < timesToDisplay; currentDisplay++) {

    i = currentDisplay % total; 
```

# c# - 带有 CultureInfo 日期时间的 DisplayFormat

> ID：11562512
> 
> 赞同：4
> 
> 时间：2012-07-19T13:59:57.993
> 
> 标签：c#, localization, data-annotations

我正在尝试将公共属性的 DisplayFormat 设置为当前的文化信息日期时间格式。该类将用于 Silverlight Datagrid。

```
 [DisplayFormat(DataFormatString=CultureInfo.CurrentCulture.DateTimeFormat.ShortDatePattern.ToString())]
    public DateTime createDate { get; set; } 
```

它说，只有参数只能是常量和 typeof 参数......

有任何想法吗？

更新，我尝试了 Lukazoid 解决方案，但 Silverlight 数据网格忽略了数据注释。由于本地化，数据网格列被添加到代码隐藏中。

该列如下所示：

```
 DataGridTextColumn tcCreateDate = new DataGridTextColumn();
        tcCreateDate.Header = SilverlightApplication.Resources.ContentGrid.dgCreateDate;
        tcCreateDate.Binding = new Binding("createDate"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T14:12:04.153

属性值必须是常量或`typeof`语法的结果。

如果要对当前区域性使用短日期格式，请使用以下格式字符串：

```
[DisplayFormat(DataFormatString = "{0:d}")] 
```

**更新**

我可以看到你更新的代码来添加`DataGridTextColumn`，试试这个来添加`StringFormat`：

```
DataGridTextColumn tcCreateDate = new DataGridTextColumn();
tcCreateDate.Header = SilverlightApplication.Resources.ContentGrid.dgCreateDate;
tcCreateDate.Binding = new Binding("createDate") { StringFormat = "{0:d}" }; 
```

默认情况下，silverlight 使用 en-US 作为所有绑定的当前区域性（无论您的系统设置如何），这意味着`StringFormat`将生成美国格式的日期。请参阅[此处](http://timheuer.com/blog/archive/2010/08/11/stringformat-and-currentculture-in-silverlight.aspx)获取解决方案，以确保考虑到您的当前设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:03:18.603

像这样试过

```
public class Foo
{
    [DataType(DataType.DateTime)]
    public DateTime createDate { get; set; }
} 
```

这将与您的项目的日期基础文化一起显示

# php - Amazon EC2 上的 PHP 脚本在浏览器上给出响应 324

> ID：11562513
> 
> 赞同：0
> 
> 时间：2012-07-19T13:59:59.170
> 
> 标签：php, amazon-ec2, amazon

我们有一个下载 acsv 文件的脚本。当我们在 EC2 控制台的命令行上运行此脚本时，它运行良好；下载文件并向用户发送成功消息。

但是如果我们通过浏览器运行，我们会得到：

> 错误 324 (net::ERR_EMPTY_RESPONSE)：服务器关闭连接而不发送任何数据。

当我们签入支持文件下载时，它就在那里，但浏览器没有收到下载后发送的成功消息。

我们正在使用 cURL 通过身份验证从远程位置下载。该文件夹的用户组和所有权是“ec2-user”，该文件夹具有完全权限，即 777。

总结一下：文件已下载，但在浏览器端，我们没有收到任何打印的数据或成功消息。

PS：下载文件大小为8-9MB时出现问题；如果它是一个较小的文件大小说 1MB 它可以工作。因此，脚本执行时间或下载文件大小或某些 ec2 实例配置都会阻止它向浏览器提供响应。相同的脚本在我们的 Godaddy Linux VPS 上运行良好。我们已经更改了脚本的最大执行时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T21:20:38.270

可悲的是，这是一个没有好的解决方案的已知问题。亚马逊论坛上有一个很长的帖子：[https](https://forums.aws.amazon.com/thread.jspa?threadID=33427) ://forums.aws.amazon.com/thread.jspa?threadID=33427 。那里提供的解决方案是发送一条保持活动消息，以防止连接在 60 秒后终止。不是一个很好的解决方案，但我认为除非亚马逊解决了这个问题，否则我认为没有更好的解决方案，鉴于该线程已经开放了 3 年，这似乎不太可能。

# c# - 从 Linklabel C# 中删除边框

> ID：11562518
> 
> 赞同：1
> 
> 时间：2012-07-19T14:00:22.947
> 
> 标签：c#, winforms

我有一个`LinkLabel`, 通过`BorderStyle=none`在我运行表单时在它周围设置一个细边框。我想从链接标签中删除这个细边框。我怎样才能做到这一点？

我的链接标签的代码是

```
 linkLabel1.AccessibleRole = System.Windows.Forms.AccessibleRole.Alert;
            linkLabel1.BackColor = System.Drawing.Color.Transparent;
            linkLabel1.Font = new System.Drawing.Font("Tw Cen MT Condensed", 13F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
            linkLabel1.ForeColor = System.Drawing.SystemColors.HotTrack;
            linkLabel1.LinkBehavior = System.Windows.Forms.LinkBehavior.NeverUnderline;
            linkLabel1.LinkColor = System.Drawing.Color.RoyalBlue;
            linkLabel1.Location = new System.Drawing.Point(129, 330);
            linkLabel1.Name = "linkLabel1";
            linkLabel1.Size = new System.Drawing.Size(68, 21);
            linkLabel1.TabIndex = 7;
            linkLabel1.TabStop = true;
            linkLabel1.Text = "Contact Us";
            linkLabel1.TextAlign = System.Drawing.ContentAlignment.TopCenter;
            linkLabel1.LinkClicked += new System.Windows.Forms.LinkLabelLinkClickedEventHandler(this.linkLabel1_LinkClicked); 
```

Linklabel 代码输出截图 [http://tinypic.com/r/20rk09v/6](http://tinypic.com/r/20rk09v/6) Linklabel 代码设计视图 Scrrenshot [http://tinypic.com/r/4kzj9y/6](http://tinypic.com/r/4kzj9y/6)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T14:05:41.037

如果您已经将`BorderStyle`属性设置为`none`，我猜您正在谈论链接下划线作为边框。如果是，您可以在属性中更改该行为。有一个名为的属性`LinkBehaviour`，您可以选择`NeverUnderLine`要避免下划线的值。

![在此处输入图像描述](../Images/6dd26ad6bbf0b072892368a6106256c8.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T14:05:37.497

怎么样：

```
this.label.BorderStyle = System.Windows.Forms.BorderStyle.None 
```

# css - 资源解释为脚本，但使用 MIME 类型 text/x-c++ 传输

> ID：11562521
> 
> 赞同：6
> 
> 时间：2012-07-19T14:00:32.323
> 
> 标签：css, less

少初学者。

下面写了一个测试html

```
<head>
    <link rel="stylesheet" type="text/css" href="404.less">
    <script src="http://lesscss.googlecode.com/files/less-1.3.0.min.js" type="text/javascript"></script>
</head>
<body>test</body> 
```

但在 Chrome 中收到警告

> 资源解释为脚本，但使用 MIME 类型 text/x-c++ 传输：“http://lesscss.googlecode.com/files/less-1.3.0.min.js”。

为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T21:49:14.250

您可能希望您的链接标签说：

```
<link rel="stylesheet/less" type="text/css" href="404.less"> 
```

也就是说，如果这是从网络服务器提供的，则可能是从文件扩展名中检测到错误的 mime 类型。但是，如果它是 apache 服务器，则很容易解决。将此添加到/在您的 webroot 中创建一个 .htaccess 文件，其中包含以下行：

```
AddType text/css less 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T06:29:37.037

当我在 chrome 中查看本地 html 文件时，我在 twitter 跟随我按钮上遇到了类似的问题。为了解决这个问题，我刚刚启动了 web matrix 2.0 并指向我的文件夹。希望这可以帮助。

# macos - 从 Mac 终端在 iPad（设备）上运行已安装的应用程序

> ID：11562522
> 
> 赞同：4
> 
> 时间：2012-07-19T14:00:33.267
> 
> 标签：macos, ipad, terminal

1.  我使用以下方法为 iPad（从终端）构建应用程序：

    > xcodebuild ARCHS=armv7 ONLY_ACTIVE_ARCH=NO VALID_ARCHS=armv7 -scheme MyApp -sdk iphoneos build

2.  然后我使用fruitstrap将它部署到我的iPad：

    > ./fruitstrap -b Mobile/DerivedData/MyApp/Build/Products/Debug-iphoneos/MyApp.app/

3.  在下一步我有一个问题：我需要从终端运行已安装的应用程序才能在 Hudson CI 上运行每晚迭代。

关于如何做的任何想法？

# html - 使用移动模拟器进行移动开发的视口

> ID：11562523
> 
> 赞同：0
> 
> 时间：2012-07-19T14:00:40.317
> 
> 标签：html, css, mobile, media-queries, viewport

像 MITE( [http://mite.keynote.com/](http://mite.keynote.com/) ) 这样的移动模拟器能识别视口吗？

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"> 
```

有谁知道任何可以识别视口的？

谢谢戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:27:23.683

您是否尝试过 Google Chrome 的 Ripple 模拟器插件？据我所知，它可以识别视口。

注意：它仅适用于服务器上的站点（W/X/MAMP 或在线）

# objective-c - 释放 NSMutableArray 不影响数组中元素的计数

> ID：11562528
> 
> 赞同：3
> 
> 时间：2012-07-19T14:00:47.840
> 
> 标签：objective-c, memory-management, nsmutablearray

有人可以向我解释以下结果吗？

```
//generate an array with 4 objects
NSMutableArray *array = [[NSMutableArray alloc] initWithObjects:
                         [NSNumber numberWithInt:1],
                         [NSNumber numberWithInt:2],
                         [NSNumber numberWithInt:3],
                         [NSNumber numberWithInt:4],
                         nil];
//release the array    
[array release];

//get a count of the number of elements in the array
int count = [array count]; <---  count returns 4 
```

我的计数不应该为零吗？“释放”不会从数组中删除所有元素吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T14:02:59.957

的值`count`是未定义的，因为在`release`数组的最后一次访问属性之后是非法的：本质上，您正在访问一个悬空指针。

如果您想清除数组而不使其无效，请使用`removeAllObjects`method.

# android - 用于从 Web 链接到应用程序的 http 方案意图过滤器

> ID：11562534
> 
> 赞同：2
> 
> 时间：2012-07-19T14:00:58.920
> 
> 标签：android, android-intent, intentfilter

这似乎是一个典型的问题，并且似乎有很多不同的行为，但我遇到的问题是我的方案将启动选择器并允许我在点击电子邮件或电子邮件中的链接时选择我的应用程序注意设备上，但如果我点击网页上的链接，我似乎无法启动应用程序，甚至没有选择器（我检查了两个浏览器的“默认值”并且没有设置） .

```
<activity
                android:name=".MyActivity" 
                android:exported="true"
                android:enabled="true">
                <intent-filter>
                    <data android:scheme="http" android:host="www.website.com"/>
                    <data android:scheme="http" android:host="website.com"/>
                    <action android:name="android.intent.action.VIEW" />
                    <category android:name="android.intent.category.DEFAULT" />
                    <category android:name="android.intent.category.BROWSABLE" />
                </intent-filter>
    </activity> 
```

如果我使用下面的电子邮件中的一个链接，它会给我选择器，启动我的应用程序，一切都很好，但是，在网络浏览器中点击相同的链接只会启动没有选择器的页面。关于问题可能是什么的任何建议？

```
http://www.website.com/share.aspx?id=12345678 
```

使用 Chrome 和股票浏览器在运行 ICS 4.0.3 的 GS2 上进行测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T01:29:35.557

添加 android:pathPrefix 属性。

```
<data android:scheme="http" android:host="website.com" android:pathPrefix="/" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-17T10:11:52.373

这就是我最终解决它的方法：

```
<intent-filter>
            <data
                android:host="www.website.com"
                android:pathPattern=".*\\share.aspx"
                android:scheme="http" />
            <data
                android:host="website.com"
                android:pathPattern=".*\\share.aspx"
                android:scheme="http" />

            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.BROWSABLE" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter> 
```

还将以下内容添加到 Activity 标记中：

```
android:exported="true" 
```

有两个地址的原因是应用程序可以选择规范域（带/不带 www.）。

# sql - 从 CTE 更新表中的记录

> ID：11562536
> 
> 赞同：79
> 
> 时间：2012-07-19T14:01:07.997
> 
> 标签：sql, sql-server, tsql, common-table-expression

我有以下 CTE，它将为我提供整个发票的 DocTotal。

```
 ;WITH CTE_DocTotal
 AS
 (
   SELECT SUM(Sale + VAT) AS DocTotal
   FROM PEDI_InvoiceDetail
   GROUP BY InvoiceNumber
 )

UPDATE PEDI_InvoiceDetail
SET DocTotal = CTE_DocTotal.DocTotal 
```

现在有了这个结果，我想在列中输入 PEDI_InvoiceDetail 中的 DocTotal 值。

我知道这行不通，我知道我错过了一些东西，那是什么？

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2012-07-19T14:11:18.663

您对 CTE 所做的更新将级联到源表。

我不得不稍微猜测您的架构，但是这样的事情应该可以工作。

```
;WITH T AS
(   SELECT  InvoiceNumber, 
            DocTotal, 
            SUM(Sale + VAT) OVER(PARTITION BY InvoiceNumber) AS NewDocTotal
    FROM    PEDI_InvoiceDetail
)
UPDATE  T
SET     DocTotal = NewDocTotal 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-07-19T14:02:58.117

```
WITH CTE_DocTotal (DocTotal, InvoiceNumber)
AS
(
    SELECT  InvoiceNumber,
            SUM(Sale + VAT) AS DocTotal
    FROM    PEDI_InvoiceDetail
    GROUP BY InvoiceNumber
)    
UPDATE PEDI_InvoiceDetail
SET PEDI_InvoiceDetail.DocTotal = CTE_DocTotal.DocTotal
FROM CTE_DocTotal
INNER JOIN PEDI_InvoiceDetail ON ... 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-07-19T14:02:56.953

您不需要 CTE

```
UPDATE PEDI_InvoiceDetail
SET
    DocTotal = v.DocTotal
FROM
     PEDI_InvoiceDetail
inner join 
(
   SELECT InvoiceNumber, SUM(Sale + VAT) AS DocTotal
   FROM PEDI_InvoiceDetail
   GROUP BY InvoiceNumber
) v
   ON PEDI_InvoiceDetail.InvoiceNumber = v.InvoiceNumber 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-03T01:05:51.293

尝试以下查询：

```
;WITH CTE_DocTotal
 AS
 (
   SELECT SUM(Sale + VAT) AS DocTotal_1
   FROM PEDI_InvoiceDetail
   GROUP BY InvoiceNumber
 )

UPDATE CTE_DocTotal
SET DocTotal = CTE_DocTotal.DocTotal_1 
```

# java - 扫描仪未将外部文件放入链接列表

> ID：11562541
> 
> 赞同：-1
> 
> 时间：2012-07-19T14:01:29.910
> 
> 标签：java, java.util.scanner

我已经搜索过这个问题，但在尝试了很多之后我仍然不知所措。我对Java完全陌生，所以请原谅我的无知。我正在尝试从扫描仪读取文件。该文件包含 SmartPhone 属性，我想将它们直接分配给智能手机类变量，然后创建我的手机并将其添加到列表中。但是，电话没有被添加，我已确保文本文件采用扫描仪和类属性所期望的格式。谁能发现我的错误？

```
package model;
import java.io.*; 
import java.util.*; 

public class menu {
    public static void main(String[] args) {
        int inputOption;
        SmartPhone newPhone;
        LinkedList<SmartPhone> phoneList;
        FileToLinkedList smartphoneList;

        smartphoneList = new FileToLinkedList();
        phoneList = smartphoneList.createDatabase();
        System.out.println(phoneList);

        Scanner userInput = new Scanner(System.in);
        //userInput.useDelimiter(System.getProperty("line.separator"));

        int smartphoneLabel = 0;
        String model = "";
        String manufacturer = "";
        int year = 0;
        double price = 0.0;
        String color = "";

        System.out.println("==============================");
        System.out.println("   SmartPhone Database Menu   ");
        System.out.println("==============================");
        System.out.println("Options:                      ");
        System.out.println("  1\.  Display all smartphones ");
        System.out.println("  2\.  Add a smartphone        ");
        System.out.println("  3\.  Delete a smartphone     ");
        System.out.println("  4\.  Search for a smartphone ");
        System.out.println("  5\.  Quit                    ");
        System.out.println("==============================");

        inputOption = KeyIn.inInt("Please select an option from the menu: ");

        switch(inputOption){
            case 1:
                System.out.println("You've selected to display the entire smartphone database.");

                break;
            case 2:
                System.out.println("You have chosen to add a smartphone to the database. ");
                System.out.println("Smartphone Label: ");
                smartphoneLabel = userInput.nextInt();
                System.out.println("Model: ");
                model = userInput.next();
                System.out.println("Manufacturer: ");
                manufacturer = userInput.next();
                System.out.println("Year: ");
                year = userInput.nextInt();
                System.out.println("Price: ");
                price = userInput.nextDouble();
                System.out.println("Color: ");
                color = userInput.next();

                newPhone = new SmartPhone(smartphoneLabel, model, manufacturer, year, price, color);
                phoneList.add(newPhone);                

                System.out.println("Here is your new database of smartphones. ");
                //phoneList.displayDatabase();

                break;

            case 3:
                System.out.println("You have chosen to delete a smartphone from the database. ");
                break;
            case 4:
                System.out.println("You have chosen to search for a particular model." );
                break;
            case 5:
                System.out.println("Goodbye!");
                break;
            default:
                System.out.println("Invalid selection.");
                break;              
        }
    }
} 
```

* * *

```
package model;

import java.io.*; 
import java.util.*; 

public class FileToLinkedList extends LinkedList {
    LinkedList<SmartPhone> myPhoneList;

    public FileToLinkedList(){
        myPhoneList = new LinkedList<SmartPhone>();
    }

    public LinkedList<SmartPhone> createDatabase(){

        try{
        Scanner scanner = new Scanner("SmartPhone_Database.txt");
        while(scanner.hasNext()) {

            SmartPhone newPhone = new SmartPhone();

            newPhone.setLabel(scanner.nextInt());
            newPhone.setModel(scanner.nextLine());
            newPhone.setManufacturer(scanner.nextLine());
            newPhone.setYear(scanner.nextInt());
            newPhone.setPrice(scanner.nextDouble());
            newPhone.setColor(scanner.nextLine());
            //phoneList.add(newPhone);
            ((LinkedList<SmartPhone>)myPhoneList).add(newPhone);
        }    
    }
    catch(InputMismatchException e){}
        return myPhoneList;
    }
} 
```

* * *

***我列出了两种建议的方法，一种被注释掉了——但仍然没有..**

```
package model;
import java.lang.*;

public class SmartPhone {
    private int smartphoneLabel;
    private String model;
    private String manufacturer;
    private int year;
    private double price;
    private String color;

    //constructor
    public SmartPhone(){
        smartphoneLabel = 0;
        model = "";
        manufacturer = "";
        year = 0;
        price = 0.0;
        color = "";
    }

    public SmartPhone(int myLabel, String myModel, String myManufacturer, int myYear, double myPrice, String myColor)
    {
            smartphoneLabel = myLabel;
            model = myModel;
            manufacturer = myManufacturer;
            year = myYear;
            price = myPrice;
            color = myColor;
    }

    public int getLabel(){
        return smartphoneLabel;
    }

    public String getModel(){
        return model;
    }

    public String getManufacturer(){
        return manufacturer;
    }

    public int getYear(){
        return year;
    }

    public double getPrice(){
        return price;
    }

    public String getColor(){
        return color;
    }

    public void setLabel(int label){
        smartphoneLabel = label;
    }

    public void setModel(String model){
        model = model;
    }

    public void setManufacturer(String manufacturer){
        manufacturer = manufacturer;
    }

    public void setYear(int year){
        year = year;
    }

    public void setPrice(double price){
        price = price;
    }

    public void setColor(String color){
        color = color;
    }

    public void display(){
        System.out.println("Label: " + getLabel() + "\n");
        System.out.println("Model: " + getModel() + "\n");
        System.out.println("Manufacturer: " + getManufacturer() + "\n");
        System.out.println("Year: " + getYear() + "\n");
        System.out.println("Price: " + getPrice() + "\n");
        System.out.println("Color: " + getColor() + "\n");

    }
} 
```

这是我的文本文件：

```
1234    NC2000  Nokia   2009    100.00  Silver
3874    CT4500  iPhone  2012    450.00  White
59780   F5600   Android 2012    475.00  Black
5983    T95000  Android 2011    500.00  Silver
23300   GH3000  Samsung 2010    275.00 Black
47000   TT2700  Samsung 2009    100.00 Silver 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:55:32.853

您的问题出在 createDatabase() 的返回语句中。仅当存在 InputMismatchException 时才返回 LinkedList，当您希望每次调用该方法时都返回 myPhoneList。那应该可以为您解决问题。

# opencl - clEnqueueNDRange 在 Nvidia 硬件上阻塞？（也是多 GPU）

> ID：11562543
> 
> 赞同：3
> 
> 时间：2012-07-19T14:01:34.170
> 
> 标签：opencl, nvidia

在 Nvidia GPU 上，当我调用 时`clEnqueueNDRange`，程序会等待它完成，然后再继续。更准确地说，我将其称为等效的 C++ 绑定，`CommandQueue::enqueueNDRange`但这应该没有什么区别。这只发生在远程 Nvidia 硬件（3 Tesla M2090s）上；在我们配备 AMD GPU 的办公室工作站上，呼叫是非阻塞的，并且会立即返回。我没有要测试的本地 Nvidia 硬件——我们曾经做过，我记得当时也有类似的行为，但有点模糊。

这使得将工作分散到多个 GPU 上变得更加困难。`std::async`我已经尝试在新的 C++11 规范中使用/为每次调用 enqueueNDRange 启动一个新线程`std::finish`，但这似乎也不起作用 - 监控 nvidia-smi 中的 GPU 使用情况，我可以看到内存使用情况GPU 0 上升，然后它做一些工作，然后 GPU 0 上的内存下降，GPU 1 上的内存上升，那个做一些工作，等等。我的 gcc 版本是 4.7.0。

这是我启动内核的方式，其中增量是所需的全局工作大小除以设备数量，四舍五入到所需本地工作大小的最接近的倍数：

```
std::vector<cl::CommandQueue> queues;
/* Population of queues happens somewhere
cl::NDrange offset, increment, local;
std::vector<std::future<cl_int>> enqueueReturns;
int numDevices  = queues.size();

/* Calculation of increment (local is gotten from the function parameters)*/

//Distribute the job among each of the devices in the context
for(int i = 0; i < numDevices; i++)
{   
    //Update the offset for the current device
    offset = cl::NDRange(i*increment[0], i*increment[1], i*increment[2]);

    //Start a new thread for each call to enqueueNDRangeKernel
    enqueueReturns.push_back(std::async(
                   std::launch::async,
                   &cl::CommandQueue::enqueueNDRangeKernel,
                   &queues[i],
                   kernels[kernel],
                   offset,
                   increment,
                   local,
                   (const std::vector<cl::Event>*)NULL,
                   (cl::Event*)NULL));
    //Without those last two casts, the program won't even compile
}   
//Wait for all threads to join before returning
for(int i = 0; i < numDevices; i++)
{   
    execError = enqueueReturns[i].get();

    if(execError != CL_SUCCESS)
        std::cerr << "Informative error omitted due to length" << std::endl
} 
```

内核肯定应该在调用时运行`std::async`，因为我可以创建一个小的虚拟函数，在 GDB 中设置断点并让它在`std::async`调用的那一刻进入它。但是，如果我为 enqueueNDRangeKernel 创建一个包装函数，在那里运行它，并在运行后放入一个打印语句，我可以看到打印之间需要一些时间。

PS 由于黑客等原因，Nvidia 开发区已关闭，因此我无法在此处发布问题。

**编辑：**忘了提 - 我作为参数传递给内核的缓冲区（以及我在上面提到的那个似乎在 GPU 之间传递的缓冲区）被声明为使用 CL_MEM_COPY_HOST_PTR。我一直在使用 CL_READ_WRITE_BUFFER，但效果相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T17:35:42.537

我给英伟达的人发了电子邮件，实际上得到了相当公平的回复。Nvidia SDK 中有一个示例显示，对于您需要单独创建的每个设备：

*   **queues** - 因此您可以代表每个设备并将订单排入队列
*   **buffers** - 你需要传递给设备的每个数组都有一个缓冲区，否则设备将传递一个缓冲区，等待它变得可用并有效地序列化所有内容。
*   **内核**- 我认为这是可选的，但它使指定参数更容易。

此外，您必须在单独的线程中为每个队列调用 EnqueueNDRangeKernel。这不在 SDK 示例中，但 Nvidia 人员确认调用被阻塞。

做完这一切之后，我实现了多个 GPU 上的并发。但是，仍然存在一些问题。[进入下一个问题...](https://stackoverflow.com/questions/11636491/opencl-multiple-gpu-buffer-synchronization)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:17:19.653

你是对的。AFAIK - nvidia 实现有一个同步的“clEnqueueNDRange”。我在使用我的库（Brahma）时也注意到了这一点。我不知道是否有解决方法或防止这种情况的方法，请使用不同的实现（以及设备）。

# java - Android：从单独的类文件中调用 AsyncTask 内部类

> ID：11562547
> 
> 赞同：1
> 
> 时间：2012-07-19T14:01:56.067
> 
> 标签：java, android, android-asynctask, inner-classes

我有一个类： TabsPagerFragmentActivity 托管所有选项卡。

然后我有一个单独的类： ShopsFragment 它有一个扩展 AsyncTask 的内部类

我正在尝试从 TabsPagerFragmentActivity 调用这个内部类的 .execute 方法，但是我得到了一个

```
 No enclosing instance of the type is accessible error. 
```

有没有办法从 TabsPagerFragmentActivity 调用这个内部类执行？基本上，一旦用户离开此片段，我就会尝试更改图像。

代码：

```
public class AlternateImageView extends AsyncTask<String,Integer,Void>{

        @Override
        protected Void doInBackground(String... params) {

            return null;
        }

        @Override 
        protected void onProgressUpdate(Integer... progress) {

        }

        @Override
        protected void onPostExecute(Void v) {
                       //Do something 
                }
         } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:09:20.480

像这样的东西？

```
AlternateImageView alternateImageView = new TabsPagerFragmentActivity().new AlternateImageView();
alternateImageView.execute(); 
```

我想补充一点，我不会对此做出判断，这是一个好主意还是坏主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:22:42.307

这是如何声明你的内部类：

```
public class AlternateImageView extends AsyncTask<String,Integer,Void> 
```

要从不同的类文件中使用这个类，您需要添加单词 static，如下所示：

```
public static class AlternateImageView extends AsyncTask<String,Integer,Void> 
```

然后你可以像这样使用你的类：

```
AlternateImageView task = new TabsPagerFragmentActivity.AlternateImageView();
task.execute(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T14:45:39.727

改变

```
public class 
```

到

```
public static class 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T14:29:00.917

将您的 AsyncTask 声明为静态类。静态内部类使该类与包顶层的其他类具有相同的可见性，但是您可以获得将其作为内部类的组织优势。例如：

```
Class1
Class2
Class3
    >Inner1
Class4 
```

要调用 Inner1，您需要执行`new Class3().new Inner1()`. 如果你让它像这样静态：

```
Class1
Class2
Class3
    >static Inner1
Class4 
```

然后你可以像在包中的任何其他类一样创建它`new Inner1()`

# wpf - 从用户控件绑定到父用户控件的属性

> ID：11562551
> 
> 赞同：2
> 
> 时间：2012-07-19T14:02:01.427
> 
> 标签：wpf, binding, properties, user-controls, parent

假设我在一个窗口中有一个名为 Graph 的用户控件。此用户控件包含一个网格，其中还有另一个用户控件，称为 Toolbar。现在 Graph 公开了一个名为 Mode 的公共属性，它使用一个名为 ModeProperty 的依赖属性作为后备存储。我希望 Toolbar 用户控件中的元素绑定到其祖先 Graph 中的 Mode 属性。我怎样才能做到这一点？即使只是获得对 Graph 的引用也被证明比我预期的要困难，this.parent 获得对网格而不是 Graph 的引用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T14:24:20.717

您只能像这样在 xaml 中绑定它 -

```
<Toolbar Mode="{Binding Path=Mode, RelativeSource={RelativeSource
      Mode=FindAncestor, AncestorType = UserControl, AncestorLevel =2}}"/> 
```

您也可以像这样在绑定中使用 ElementName -

```
<Toolbar Mode="{Binding Path=Mode, ElementName=GraphUserControl}"/> 
```

您必须在要绑定到的 userControl 上设置 x:Name 属性 -

```
<UserControl x:Name="GraphUserControl"></UserControl> 
```

或者，如果您不想在代码后面做，您可以查看这篇有用的帖子，了解前往祖先父级 - [Visual Tree Navigator](http://rachel53461.wordpress.com/2011/10/09/navigating-wpfs-visual-tree/ "可视化树导航器")

# android - Android 上的回声消除器

> ID：11562553
> 
> 赞同：2
> 
> 时间：2012-07-19T14:02:03.003
> 
> 标签：android, audio, echo, speex, webrtc

请分享您在 Android 上使用软件回声消除器的经验：

1.  内置（据我所知，在 v3.0 中出现的那个）
2.  斯佩克斯
3.  网络RTC
4.  等等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-31T06:38:10.030

我刚刚完成了android上的AEC工作，我尝试了speex/android-built-in-ec/webrtc-aec和webrtc-aecm(echo control on mobile)，最后选择了AECM模块，有一些tips：

1.  speex 和 webrtc-aec 不适合在移动设备上运行（由于 CPU 性能低的原因）。
2.  android内置EC在工作，但效果不理想，仍然能听到一些回声或大量自激（可能是我没用对）。并且此时并不是所有的android设备都支持内置EC，所以这种情况被抛弃了。
3.  webrtc-aecm 模块很好，处理一个 10ms 的帧只需要 1~2ms。最重要的是那个东西`delay`，你应该按照[audio_processing.h](https://chromium.googlesource.com/external/webrtc/stable/webrtc/+/b8a655ac3c71977abf0e8d657dbe9d0aec633ff9/modules/audio_processing/include/audio_processing.h) **`strictly`**中的描述，如果你计算一个正确的延迟值，一切都会好的。

**编辑**

1.  经过长时间使用 WebRTC AECM（或 APM）后，我仍然无法使其在 android 上完美运行。我认为 AECM 需要更多的优化，但谷歌似乎没有计划。无论如何，我会继续关注 Google WebRTC 及其在 android 上的 AECM（或 AEC）性能。

2.  （2020 年 6 月 23 日更新）请参考我[的 GitHub 项目的 README](https://github.com/BillHoo/webrtc-based-android-aecm)，我上面的解决方案在几年前被我自己弃用了。我不想误导别人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T09:30:58.980

有两个与 Android 上的 AEC 相关的问题：

1.  中央处理器。大多数 AEC 算法在 CPU 较低的情况下性能不佳。

2.  回声路径 - Android 上的许多 VoIP 应用程序引入的回声延迟高于免费算法可以（有效地）处理的延迟。

最重要的是，我建议您首先测量 VoIP 应用程序中的回声延迟（即回声尾）。如果不超过 16ms-64ms，您可以尝试使用上述免费解决方案之一。

还有一点需要注意的是，我相信 Speex 在移动设备上无法正常运行，因为据我所知它没有固定点版本。

# javascript - Firefox 是否支持 enablePrivilege("UniversalBrowserRead")？

> ID：11562560
> 
> 赞同：3
> 
> 时间：2012-07-19T14:02:48.467
> 
> 标签：javascript, firefox, npapi

我编写了一个插件，它使用 NPAPI 从 FireFox 浏览器查询网页参数，但是每当我尝试查询具有 iFrames 的网页时，我在尝试从我的插件查询内部高度时遇到错误：

> 拒绝查询 innerHeight 的权限

我认为这将是跨域安全限制，所以我想`NPN_evaluate()`在查询信息之前使用函数从我的插件中运行以下 JavaScript 代码：

```
netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"); 
```

我的问题是 Firefox 最新版本是否支持此 JavaScript，它是否允许我查询信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T17:42:56.467

`"UniversalBrowserRead"`不再起作用（请参见[此处](https://bugzilla.mozilla.org/show_bug.cgi?id=667312#c3)）并且对 的支持`enablePrivilege()` [将被删除](https://bugzilla.mozilla.org/show_bug.cgi?id=546848)。

# c++ - 提升语言环境的特定于语言环境的 to_lower 问题

> ID：11562561
> 
> 赞同：2
> 
> 时间：2012-07-19T14:02:52.987
> 
> 标签：c++, utf-8, icu, boost-locale

我正在尝试使用 boost::locale::to_upper 根据 boost-locale 页面[http://www.boost.org/doc/libs/1_50_0/libs/locale/doc/html进行特定于区域设置的大写/conversions.html](http://www.boost.org/doc/libs/1_50_0/libs/locale/doc/html/conversions.html)

文本表明我应该能够在 'grüßEN' 上使用 boost::locale::to_upper 并得到结果 'GRÜSSEN' - 这是正确的特定于语言环境的大写版本（所以我相信）。

在我的测试版本中，我得到的是“GRÜßEN”而不是“GRÜSSEN”。

我的测试代码看起来像这样（我使用 utf8cpp 来检查我的字符串实际上是 utf8）：

```
 boost::locale::generator gen;                                    
                std::locale loc= gen("de_DE.UTF-8");  

                std::locale::global(loc); 
                cout.imbue(loc);

                string s = "grüßEN"; 
                if (utf8::is_valid(s.begin(), s.end())){
                    std::cout << s << " U= "<< boost::locale::to_upper(s) << std::endl;
                } 
```

这是在使用 Xcode (4.1) 的 OSX (10.7.4) 上。我已经使用 -DU_USING_ICU_NAMESPACE=0 -DU_CHARSET_IS_UTF8=1 的建议选项安装了 ICU (49_1_2)。ICU 位于 /usr/local/include/unicode 中，库位于 /usr/local/lib/libicu*.*

我从 1_48 套件中构建了 boost::locale，如下所示：

```
./bjam boost.locale.iconv=off -sICU_PATH=/usr/local --with-locale stage 
```

并在构建时报告：

```
Performing configuration checks

- icu                      : yes

Component configuration:

 - chrono                   : not building
- date_time                : not building
- exception                : not building
- filesystem               : not building
- graph                    : not building
- graph_parallel           : not building
- iostreams                : not building
- locale                   : building
- math                     : not building
- mpi                      : not building
- program_options          : not building
- python                   : not building
- random                   : not building
- regex                    : not building
- serialization            : not building
- signals                  : not building
- system                   : not building
- test                     : not building
- thread                   : not building
- timer                    : not building
- wave                     : not building

...patience...
...patience...
...found 1850 targets...
...updating 25 targets...
darwin.compile.c++ bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-    off/threading-multi/encoding/codepage.o
darwin.compile.c++ bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/threading-multi/icu/boundary.o
darwin.compile.c++ bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/threading-multi/icu/codecvt.o
darwin.compile.c++ bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/threading-multi/icu/collator.o
darwin.compile.c++ bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/threading-multi/icu/conversion.o
darwin.compile.c++ bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/threading-multi/icu/date_time.o
darwin.compile.c++ bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/threading-multi/icu/formatter.o
darwin.compile.c++ bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/threading-multi/icu/icu_backend.o
darwin.compile.c++ bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/threading-multi/icu/numeric.o
darwin.compile.c++ bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/threading-multi/icu/time_zone.o
darwin.link.dll bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/threading-multi/libboost_locale.dylib
common.copy stage/lib/libboost_locale.dylib    
darwin.compile.c++ bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv- off/link-static/threading-multi/encoding/codepage.o
darwin.compile.c++ bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/link-static/threading-multi/icu/boundary.o
darwin.compile.c++ bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/link-static/threading-multi/icu/codecvt.o
darwin.compile.c++ bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/link-static/threading-multi/icu/collator.o
darwin.compile.c++ bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/link-static/threading-multi/icu/conversion.o
darwin.compile.c++ bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/link-static/threading-multi/icu/date_time.o
darwin.compile.c++ bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/link-static/threading-multi/icu/formatter.o
darwin.compile.c++ bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/link-static/threading-multi/icu/icu_backend.o
darwin.compile.c++ bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/link-static/threading-multi/icu/numeric.o
darwin.compile.c++ bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/link-static/threading-multi/icu/time_zone.o
darwin.archive bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/link-static/threading-multi/libboost_locale.a
/usr/bin/libtool: warning same member name (codecvt.o) in output file used for input files: bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/link-  static/threading-multi/std/codecvt.o and: bin.v2/libs/locale/build/darwin- 4.2.1/release/boost.locale.iconv-off/link-static/threading-multi/posix/codecvt.o (due to use  of basename, truncation, blank padding or duplicate input files)
/usr/bin/libtool: warning same member name (codecvt.o) in output file used for input files: bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/link-static/threading-multi/posix/codecvt.o and: bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/link-static/threading-multi/icu/codecvt.o (due to use of basename, truncation, blank padding or duplicate input files)
/usr/bin/libtool: warning same member name (collate.o) in output file used for input files: bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/link-static/threading-multi/std/collate.o and: bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/link-static/threading-multi/posix/collate.o (due to use of basename, truncation, blank padding or duplicate input files)
/usr/bin/libtool: warning same member name (converter.o) in output file used for input files: bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/link-static/threading-multi/std/converter.o and: bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/link-static/threading-multi/posix/converter.o (due to use of basename, truncation, blank padding or duplicate input files)
/usr/bin/libtool: warning same member name (date_time.o) in output file used for input files: bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/link-static/threading-multi/icu/date_time.o and: bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/link-static/threading-multi/shared/date_time.o (due to use of basename, truncation, blank padding or duplicate input files)
/usr/bin/libtool: warning same member name (numeric.o) in output file used for input files: bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/link-static/threading-multi/icu/numeric.o and: bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/link-static/threading-multi/posix/numeric.o (due to use of basename, truncation, blank padding or duplicate input files)
/usr/bin/libtool: warning same member name (numeric.o) in output file used for input files: bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/link-static/threading-multi/posix/numeric.o and: bin.v2/libs/locale/build/darwin-4.2.1/release/boost.locale.iconv-off/link-static/threading-multi/std/numeric.o (due to use of  basename, truncation, blank padding or duplicate input files)
common.copy stage/lib/libboost_locale.a
...updated 25 targets... 
```

根据[https://svn.boost.org/trac/boost/ticket/6424](https://svn.boost.org/trac/boost/ticket/6424)，可以忽略警告（或者有人知道吗？）我将构建的库从 stage/libs 复制到 /usr/local/libs。

据我所知，它是针对 ICU 正确构建的。我的测试代码确实需要我链接到 libiconv - 我会认为这不是必需的，因为我在构建中关闭了图标？

谁能让我深入了解正在发生的事情/我做错了什么以及为什么我没有得到记录的预期行为 - 或者至少有一些事情可以尝试？

干杯

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:49:03.840

所以 XCODE 在我身上崩溃了（就像它经常发生的那样），一旦我重新启动它并重新构建项目，它就会要求 ICU 库并且不再需要 iconv 库 - 即如预期的那样。我想把它归结为 XCODE voodoo。我会留下这个问题，因为它至少涵盖了如何在 OSX 上使用 ICU 构建 boost 语言环境。

# delphi - delphi 7如何同时执行两个exe文件

> ID：11562569
> 
> 赞同：0
> 
> 时间：2012-07-19T14:03:03.497
> 
> 标签：delphi, delphi-7

我有两个 exe 文件，我想同时运行它们。可以在delphi 7中做到吗？我在互联网上搜索过，但我找不到任何答案...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T23:45:45.327

伊曼在评论中说：

> 不，我运行两个 exe 文件，第一个获取一些文件并为每个文件生成一个输出。第二个exe同时运行并等待第一个的输出，所以当第一个exe文件处理第二个输入时，第二个exe正在处理第一个exe的第一个输出:)类似于管道的东西

然后我会做的是首先启动第二个程序。一旦产生输出，它将立即为第一个输出做好准备，并且不会有延迟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:07:21.927

只需执行一个，然后执行另一个。让计算机在完全相同的时间做任何事情是非常困难的，相隔一毫秒不应该杀死你。

# android - Titanium Android 应用程序安装程序的 5 分钟构建

> ID：11562571
> 
> 赞同：0
> 
> 时间：2012-07-19T14:03:10.893
> 
> 标签：android, macos, titanium

似乎在这里找不到解决方案，运行 Lion 并且在上周早些时候的某个时间，我的构建花费了通常的时间（不到一分钟）。突然之间，每次我运行应用程序安装程序时，我的构建都需要超过五分钟（我不记得更改任何配置）。

它似乎正在完全编译所有代码，我不确定它到底在做什么，但我认为我的环境存在根本问题。

最初使用 brew 来安装我的 android-sdk/卸载那些并通过 Titanium 安装。

我在三星 Galaxy 上使用 Titianium Mobile SDK 1.76（非必要）。

让我知道是否需要在构建时发布整个堆栈跟踪（真的很长，所以我会在这里扔一些项目）

```
[TRACE] Writing out AndroidManifest.xml
[DEBUG] /usr/local/android_sdk/platform-tools/aapt package -m -J 
/trunk/build/android/gen -M     
/trunk/build/android/AndroidManifest.xml -S   
/trunk/build/android/res -I     
/usr/local/android_sdk/platforms/android-7/android.jar

[INFO] Compiling Android Resources... This could take some time
[DEBUG] creating unsigned apk: /trunk/build/android/bin/app-unsigned.apk
[DEBUG] from resource zip => assets/Resources/data/Auburn.txt <- This line for almost all resources
[DEBUG] from JAR /Library/Application     
Support/Titanium/mobilesdk/osx/1.7.6.v20120320183239/android/titanium.jar =>   org/apache/Commons-NOTICE.txt 
```

这些是我注意到的一些行，当事情按应有的方式运行时，它们似乎并不存在。

任何指针将不胜感激。

编辑：

使用 Mountain Lion 的版本进行了全新安装，此问题已解决。我的环境显然存在根本性的问题，但如果有人知道可能发生了什么，请仍然把它扔在那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:28:16.500

如果编辑 tiapp.xml，整个应用程序需要重新编译。您可能没有太多地接触该文件，因此它不应该说“Tiapp.xml 更改，重新编译..hold 紧”或它在构建控制台中所说的任何内容。

你是在手机还是模拟器上运行？如果您正在调试而不使用断点，则选择“运行”而不是“调试”将更快地构建它。此外，从技术上讲，您不必每次都重新启动运行配置；fastdev 服务器的全部意义在于，您可以回家（在模拟器上）并重新启动应用程序，而无需从工作室单击“运行”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T04:46:41.170

是的，我也有这个问题，但是，当我撤消我的 tiapp.xml 文件时它就解决了。并从 Android Emulator 卸载我的应用程序，并从项目文件目录中删除构建文件，然后运行它正在正常运行......

干杯..

# asp.net - system.webserver 的设置有时会从 web.config 文件中删除

> ID：11562572
> 
> 赞同：1
> 
> 时间：2012-07-19T14:03:13.393
> 
> 标签：asp.net, iis-7, web-config, iis-7.5, config

我们在 IIS7.5 中遇到了一个相当烦人的错误，它偶尔会删除 web.config 中标记的内容。它不只是在运行时删除内容，它实际上是在物理上更新文件。

在我们的本地机器上，当我们重建所有内容（包括从源代码管理替换 application.config）时会发生这种情况，而在我们的服务器机器上，它会在应用程序池重启时发生。这两种情况都是间歇性的。

这似乎正在发生，因为我们在配置的根目录中有一些配置，而在位置标签中有一些配置。我们这样做的原因是因为我们在根应用程序下面有一些虚拟应用程序，我们不希望它们继承处理程序和模块。我们有根 system.webserver 标记，因为我们想要继承一些设置（如 validateIntegratedModeConfiguration）。

它只影响不在位置标签内的 system.webserver 设置。如果您将所有内容都移到位置标签中，那很好。

我们的 web.config 看起来像这样：

```
<system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    ...
</system.webServer>
<location path="." inheritInChildApplications="false">
    <system.webServer>
      <modules>
        ...
      </modules>
      <handlers accessPolicy="Read, Script">
        ...
      </handlers>
    </system.webServer>
 </location> 
```

还有其他人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:06:08.840

我们最终将配置从根 system.webserver 移到 location 标签内。然后我们还将它添加到所有子应用程序中。

```
<location path="." inheritInChildApplications="false">
    <system.webServer>
      <validation validateIntegratedModeConfiguration="false" />
      <modules>
        ...
      </modules>
      <handlers accessPolicy="Read, Script">
        ...
      </handlers>
    </system.webServer>
 </location> 
```

虽然这不是一个理想的解决方法，但它已经解决了删除配置的问题。

# php - php通配符搜索带有文件路径和详细信息的混合字符串

> ID：11562574
> 
> 赞同：0
> 
> 时间：2012-07-19T14:03:14.770
> 
> 标签：php, string, search, pattern-matching, wildcard

在我的 php 程序中，我需要使用带有或不带有通配符的模式搜索具有文件路径的混合字符串以及有关它的一些详细信息，如果此模式与字符串匹配，则它应该返回 true，否则返回 false。

例子：

```
$string="us01     /remote/ecishome/gussman/Sol_10         TEST    WILLIAMS   us01-000018     us01-000019     04/19/2012      04/19/2012      05/20/2012      Expired" 
```

如果`$pattern= "/remote/*/guss*"`它应该匹配 true 或者`$pattern=will*`它应该返回 true 或者如果`$pattern="/remote/ecishome/gussman/Sol_10"`它也应该返回 true。

任何人都可以请建议我该怎么做。在这方面的任何帮助都是非常可观的。

现在我正在使用`fnmatch()`它但无法满足要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:12:19.510

你检查过[preg_match()](http://php.net/manual/en/function.preg-match.php "preg_match()")吗？

好的正则表达式信息网站：[www.regular-expressions.info](http://www.regular-expressions.info/tutorialcnt.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:12:55.017

要匹配`/remote/*/guss*`模式，您可以使用以下正则表达式：

```
/\/remote\/[\w]*\/guss[\S]*/ 
```

要匹配`will*`，您可以使用以下正则表达式：

```
/will[\S]*/i 
```

要匹配`/remote/ecishome/gussman/Sol_10`，您可以使用以下正则表达式：

```
/\/remote\/ecishome\/gussman\/Sol_10/ 
```

您可以使用这些正则表达式模式`preg_match`

# windows - jenkins：windows xp、windows 7 slave无法执行命令

> ID：11562583
> 
> 赞同：0
> 
> 时间：2012-07-19T14:03:34.407
> 
> 标签：windows, jenkins

我有一个 Arch Linux 主机，它驱动 2 个 arch linux 从站、1 个 windows xp 从站和 1 个 windows 7 从站。Linux部分一切正常，我以某种方式使用自动执行和slave.jar启动了windows slave。我有一个需要执行的外部程序，它安装在 windows7 上的 c:\program files (x86) 和 windows xp 上的 c:\programs 上。我继续路径变量并在两个系统上插入了两个路径，但是当我尝试运行 jenkins build 时，它说“找不到命令”

我尝试根据每个系统将 2 个 bat 文件放在 c:\ 指向正确的位置，但它显示 c:\build.bat 命令未找到。我可以在正确的位置看到文件...

您如何管理放置在不同计算机上不同位置的可执行文件？有更好的方法来运行程序吗？我可以更改有关此安装的所有内容，我唯一需要它来找到启动该程序的方法。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:09:49.607

您是否验证了您对系统路径所做的更改实际上已保存？确保两个从站都已重新启动，然后通过标准命令行窗口进行测试。

如果您尝试执行的程序实际上在路径上，您还可以查看[Envfile Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Envfile+Plugin)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:03:06.820

将新路径添加到环境变量 PATH 后，您需要重新启动 jenkins 从服务以允许它使用这些新 PATH。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T07:09:36.830

我解决了改变詹金斯在奴隶上开始工作的方式的问题。我使用了“Execute shell”并执行了一些程序。我用“执行 windows 批处理命令”更改了“执行 shell”，一切正常。

# tsql - SSRS 中的指标

> ID：11562584
> 
> 赞同：0
> 
> 时间：2012-07-19T14:03:36.623
> 
> 标签：tsql, reporting-services, report, ssrs-2008, bids

我在 SSRS 报告中有一个专栏。值为“真”或“假”或“是”或“否”或“1”或“0”

我不想在该列中显示，而是使用指标。

我在该列中放置了指标，但需要设置 start 和 end 属性。我该怎么做才能在“真”、“是”或“1”时显示绿色复选标记，否则显示红色？

我正在尝试 =IFF(Fields!Column_name.Value = "True", "Red", "Green") 作为绿色复选标记的起始值......但显然我错了......

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T18:31:54.357

好吧，也许这只是您问题中的一个错字，但有几件事很突出

*   函数是 IIF，而不是 IFF
*   True 结果应该在条件之后

我以前从未使用过这些指标，但简单地看一下它们，您似乎可以定义可接受（绿色）、不可接受（红色）或中间（黄色）的范围。

开始和结束可能应该是数值，“绿色”和“红色”似乎不是有效值。

尝试将指标值表达式绑定到这样的东西。

```
=IIF(Fields!ColumnName.Value = "True" OrElse
    Fields!ColumnName.Value = "Yes"  OrElse
    Fields!ColumnName.Value = "1", 100, 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T18:57:02.163

转到指标属性 > 值和状态，然后将检查的开始和结束值设置为`1`。X 把它的开始和结束值放到`0`.

然后像这样写你的表达式：

`=iif(First(Fields!YourField.Value, "YourDataSet")=True,1,0)`

如果选中，那应该给你一个 Check，如果没有，应该给你一个 X。

# django - django 和静态 css 加上 js 文件

> ID：11562586
> 
> 赞同：0
> 
> 时间：2012-07-19T14:03:41.197
> 
> 标签：django, django-templates

我在 django 上做了一个小应用程序，它正在使用模板。每个模板都使用静态文件，例如 css、js 和图像。所有这些文件与模板位于同一目录中。

```
template
    main.html
    support.html
    about.html
    ...

    css
        reset.css
        style.css
        ...

    img
    js
        jquery.js
        main.js
        ... 
```

如果要配置 django 开发服务器来加载这些文件而不编辑 html 模板文件？

我收到

```
http://127.0.0.1:8000/face/css/960_24_col.css   404 NOT FOUND    127.0.0.1:8000 
```

settings.py 中的这些更改对我没有帮助

```
STATIC_ROOT = 'C:/Projects/site/website/face/static/'
STATIC_URL = '/static/'
STATICFILES_DIRS = ('C:/Projects/site/website/face/static',) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:18:58.823

这是我通过 Django 开发服务器提供静态文件的方式。

在 urls.py 中定义：

```
from os import getcwd, path as ospath
...
urlpatterns += patterns('',
    (r'css/([a-zA-Z0-9_.]+.css)$', 'django.views.static.serve', {'document_root': ospath.join(getcwd(), 'css')}),
    (r'images/(.*)$', 'django.views.static.serve', {'document_root': ospath.join(getcwd(), 'images')}),
    (r'js/([a-zA-Z0-9_.]+.js)$', 'django.views.static.serve', {'document_root': ospath.join(getcwd(), 'js')})
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:35:18.293

STATIC_URL 已定义为“/static/”，因此所有静态文件都将从 /static 提供。

换句话说 /face/css/960_24_col.css 是不正确的。

这应该是 /static/face/css/960_24_col.css ，假设 face 目录位于 C:/Projects/site/website/face/static/face。

我是否还建议您不要在设置文件中使用绝对路径。要找出项目根目录的绝对路径，请使用以下内容：

```
PROJECT_DIR = os.path.abspath(os.path.dirname(__file__)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T14:34:15.353

您可能想要使用 contrib 应用程序[staticfiles](https://docs.djangoproject.com/en/1.4/ref/contrib/staticfiles/)。在文档页面的底部，您将看到如何在开发服务器上使用它。

# objective-c - 直接从代码创建 NSView

> ID：11562587
> 
> 赞同：1
> 
> 时间：2012-07-19T14:03:54.537
> 
> 标签：objective-c, cocoa, nsview

我想运行一个打开几个视图的小程序。我不想使用除 Basic AppDelegate 之外的任何 xib 文件定义。

有人可以指导我如何在 Cocoa 中打开新窗口而不在 xib 文件中定义它的任何示例，只是从代码中？

这就是我现在正在做的事情——我应该添加什么？

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
NSRect frameRect    = NSMakeRect(100, 100 , 256, 256);
NSView* tmpView     = [[NSView alloc] initWithFrame:frameRect];
[tmpView setHidden:NO];
[tmpView setNeedsDisplay:YES];
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T14:23:16.133

您需要创建一个新的 NSWindow 并将其 contentView 设置为您的新 NSView，如下所示：

```
NSWindow *myWindow = [[NSWindow alloc] initWithContentRect:NSMakeRect(100,100,256,256) styleMask:NSTitledWindowMask backing:NSBackingStoreBuffered defer:NO];
[myWindow setContentView:tmpView];
[myWindow makeKeyAndOrderFront:self]; 
```

# c# - ITextsharp 为 IElement 设置字体

> ID：11562589
> 
> 赞同：5
> 
> 时间：2012-07-19T14:04:02.413
> 
> 标签：c#, itextsharp, html-to-pdf

```
 var htmlarraylist = HTMLWorker.ParseToList(new StringReader(htmlText), styles);

                document.Open();

BaseFont Vn_Helvetica = BaseFont.CreateFont(@"C:\Windows\Fonts\arial.ttf", 
"Identity-H", BaseFont.EMBEDDED);

Font fontNormal = new Font(Vn_Helvetica, 12, Font.NORMAL);

                foreach (var t in htmlarraylist)
                {

                    document.Add((IElement)t);
                   //how set FontNormal if element is Paragraph?
                }

                    document.Close(); 
```

有人能帮助我吗

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-19T15:22:36.397

您可以在 iTextSharp 中使用字体

```
FontFactory.RegisterDirectories();
Font fontNormal = new Font(FontFactory.GetFont("Arial", 12, Font.NORMAL)) 
```

您应该能够使用以下方法在段落上设置字体：

```
foreach (var t in htmlarraylist)
{
    if(t is Paragraph)
    {
        ((Paragraph)t).Font = fontNormal;
    }
    document.Add((IElement)t);
} 
```

# python - Postgresql 启动失败

> ID：11562590
> 
> 赞同：2
> 
> 时间：2012-07-19T14:04:03.013
> 
> 标签：python, sql, postgresql, ubuntu

我正在尝试在 Ubuntu 上使用 PostgreSQL。我安装了它，一切正常。但是，由于空间限制，我需要更改数据库的位置，因此我尝试了在线指南来进行操作。

我继续停止 postgresql，创建一个新的空目录并通过使用授予它权限

```
chown postgres:postgres /my/dir/path 
```

那也很好用。然后我用

```
initdb -D /my/dir/path 
```

启用我的数据库。我还将文件中的 path_data 更改`postgresql.conf`为我的新目录。

当我现在尝试启动数据库时，它说：`The postgresql server failed to start, please check the log file`. 但是，没有日志文件！当我更改默认目录时，有些事情搞砸了。我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T02:07:24.270

[`pg_wrapper`](http://manpages.ubuntu.com/manpages/precise/man1/pg_wrapper.1.html)首先：您可能会发现使用 Ubuntu 提供的自定义工具（作为: [`pg_createcluster`](http://manpages.ubuntu.com/manpages/precise/man8/pg_createcluster.8.html)、[`pg_dropcluster`](http://manpages.ubuntu.com/manpages/precise/man8/pg_dropcluster.8.html)等的一部分）更容易管理您在 Ubuntu 上的 Pg 安装[`pg_ctlcluster`](http://manpages.ubuntu.com/manpages/precise/man8/pg_ctlcluster.8.html)。这些工具与 Ubuntu 启动脚本集成，并将配置移动到`/etc/postgresql/`Ubuntu 喜欢保留的位置，而不是PostgreSQL 默认在 datadir 中。要移动实际文件的存储位置，请使用符号链接（见下文）。

当你遇到问题时，你是如何启动 PostgreSQL 的？

如果您通过`pg_ctl`它启动它应该可以正常工作，因为您必须指定数据目录位置。但是，如果您使用的是发行版包脚本，他们不知道您已经移动了数据目录。

在 Ubuntu 上，您需要更改配置`/etc/postgresql`以告诉脚本数据目录在哪里，可能`pg_ctl.conf`是`start.conf`适当的版本。我不确定具体细节，因为我从来不需要这样做。这就是为什么：

不过，还有更好的方法。使用从旧数据目录位置到新数据目录的符号链接。PostgreSQL 和安装脚本会很高兴地跟随它，您不必更改任何配置。

```
cd /var/lib/postgresql/9.1/main
mv main main.old
ln -s /new/datadir/location main 
```

我猜是“9.1”，因为您没有提供 Ubuntu 版本或 PostgreSQL 版本。

另一种方法是使用`mount -o bind`将您的新数据目录位置映射到旧位置，因此没有注意到差异。然后添加绑定挂载以`/etc/fstab`使其在重新启动后保持不变。如果其中一个工具不喜欢符号链接方法，您只需要这样做。我认为这不会是`pg_wrapper`等问题。

您还应该注意，由于您手动使用了 initdb，因此您的新 datadir 将直接在 datadir 中进行配置，而不是在`/etc/postgresql/`.

如果您只使用 Ubuntu 集群管理脚本，这会更容易。

# asp.net - 单选按钮不会继续检查我是否在选择时打开了模式窗口

> ID：11562598
> 
> 赞同：1
> 
> 时间：2012-07-19T14:04:31.357
> 
> 标签：asp.net, vb.net, ajaxcontroltoolkit, modal-dialog

在 asp.net web 项目中，当用户选择单选按钮时，我需要一个模式窗口来打开并提示输入用户凭据。

我将“TargetControlID”设置为单选按钮。模式打开得很好，但是当它消失时，单选按钮没有被选中。

编辑：

```
Removed code for personal reasons 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:08:49.450

当模态消失时，只需重新选中单选按钮

`$("radio button").attr('checked',true);`

# php - php接口方法覆盖

> ID：11562602
> 
> 赞同：3
> 
> 时间：2012-07-19T14:04:37.797
> 
> 标签：php, interface, overriding

```
<?php
interface a {
    public function bar();
}
interface b extends a {
    public function foo();
    public function bar($a);
}

?> 
```

它显示了方法中签名不匹配的致命错误。是不是可以覆盖php中的接口方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T15:54:25.170

您收到签名不匹配错误，因为这两个`bar`函数不兼容。

您可以通过将界面更改为来修复它

```
interface b extends a {
    public function foo();
    public function bar($a = null);
} 
```

尽管这可能不是一个完整的解决方案，因为您现在会收到`Can't inherit abstract function`错误消息。

# json - EXTJS 4 Json 网格面板中的嵌套数据

> ID：11562604
> 
> 赞同：0
> 
> 时间：2012-07-19T14:04:50.647
> 
> 标签：json, model, extjs4, nested, gridpanel

这个话题已经在网上讨论过好几次了，但所有的话题都没有帮助我解决我的问题。我的 javascript 代码接收 JSON 嵌套数据。所有 JSON 数据 1 级数据都在网格面板中转录，但所有子数据都没有。我尝试了很多方法，但不可能。这就是为什么我请你帮助我。

我的 JSON：

```
{
  "success":true,
  "error":false,
  "redirectUrl":null,
  "fund":[{
    "cat_id":1,
    "catname":"Europe OE Japan Large-Cap Equity",
    "region":{
      "region_id":2,
      "region_name":"JAPAN"
    }
    },{
    "cat_id":2,
    "catname":"Europe OE Europe Large-Cap Growth Equity",
    "region":{
      "region_id":1,
      "region_name":"EUROPE"
    }
   }]
} 
```

我的型号：

```
var Recommended = new function() {

this.DataModel = function() {

Ext.define('Fund', {

    extend: 'Ext.data.Model',

    fields: [{
    name: 'catname',     
    type: 'string'
    },{
    name: 'cat_id',     
    type: 'int'     
    }],
    proxy :{
    type: 'rest',
    url: application +'directory/function',
    reader: {
        type: 'json',
        root: 'fund'

    }
    },
    associations: [{
    type: 'hasOne', 
    model: 'Region',
    primaryKey: 'region_id',
    name:'region'
    }]

});     

Ext.define('Region', {
    extend: 'Ext.data.Model',
    fields: [{
    name: 'region_name',       
    type: 'string'
    },{
    name: 'region_id',       
    type: 'int'     
    }]

});  

} 
```

我的商店和网格面板：

```
 this.JSONstore = function() {

var storeRecommended;

storeRecommended = Ext.create('Ext.data.Store', {
    model: 'Fund',
    autoLoad:true,
    groupField: 'region_name'
});     

var colModel =
[
{
    text: 'REGION', 
    width: 200,
    dataIndex: 'region_name',
    name:'region_name',
    mapping:'region.region_name'

},{
    text: 'MORNINGSTAR', 
    width: 300,
    dataIndex: 'catname',
    name:'catname'  
}       

];

var groupingFeature = Ext.create('Ext.grid.feature.Grouping',{
    groupHeaderTpl: 'Classe: {name} ({rows.length} Item{[values.rows.length > 1 ? "s" : ""]})',
    hideGroupedHeader: false
});

var grid = Ext.create('Ext.grid.Panel', {
    renderTo: 'recommendedlists',
    collapsible: true,
    iconCls: 'icon-grid',
    frame: true,
    store: storeRecommended,
    width: 1200,
    height: 400,
    title: 'Test',
    resizable: true,
    features: [groupingFeature],
    columns: colModel,
    fbar  : ['->', {
    text:'Clear Grouping',
    iconCls: 'icon-clear-group',
    handler : function(){
        groupingFeature.disable();
    }
    }]
  });
   }

   this.initControlsOnload = function() {
   Recommended.DataModel();
   Recommended.JSONstore();
   }    
} // close Recommended function 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T00:08:53.837

问题是您绑定到网格的商店对区域一无所知。它存储资金。因此，您不能要求将列映射到不在存储中的数据属性。该商店是基金记录的平面列表。当然，单个基金本身可能知道它所属的区域，但包含基金列表的商店却不知道。

该怎么办？

需要做的是扁平化客户端的数据结构。为什么？因为网格是平的。如果每个基金有多个地区——那么我们将讨论不同的解决方案。

怎么做？

如果您控制此应用程序的服务器端，然后将 Region**字段**添加到 Fund 对象，那么您的数据集就很简单、直接，更重要的是平坦。如果您不能（或不想）更改服务器端，那么您可以更改客户端模型[映射](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Field-cfg-mapping)。本质上，您会将 Fund 模型更改为如下所示：

```
Ext.define('Fund', {
    extend: 'Ext.data.Model',
    fields: [
      { name: 'catname',     type: 'string' },     
      { name: 'cat_id',      type: 'int' },
      { name: 'region_name', type: 'string',
          mapping: 'region.region_name'},
      { name: 'region_id',   type: 'int',
          mapping: 'region.region_id'}     
    ]
    ....
}); 
```

你看到我们在那里做了什么吗？我们将区域数据扁平化到基金记录中。现在，您的商店按名称访问区域名称数据将毫无问题。

祝你好运，

德米特里。

# java - 为什么这两个数据库会提交死锁？

> ID：11562605
> 
> 赞同：0
> 
> 时间：2012-07-19T14:04:52.240
> 
> 标签：java, sql-server, database-deadlocks

```
<executionStack>
     <frame procname="adhoc" line="1" sqlhandle="0x02000000cb01b3329478b4bbe70e115ebcb8f5f4a8610e7e">
(@1 varchar(8000),@2 varchar(8000),@3 varchar(8000),@4 varchar(8000))UPDATE [TABLE_NAME] set [END_TIME] = @1,[ERROR] = @2  WHERE [USER_ID]=@3 AND [SESSION_ID]=@4 AND [END_TIME] IS NULL     </frame>
     <frame procname="adhoc" line="1" sqlhandle="0x02000000ef595e01eab1df10c694910f5810afb17d814663">
UPDATE TABLE_NAME SET END_TIME='2012-03-30 12:07:45', ERROR='FALSE' WHERE USER_ID='username' AND SESSION_ID='095d42ad-67d8-444f-8e51-4576f6b940d8' AND END_TIME IS NULL     </frame>
 </executionStack> 
```

以上是客户从站点发送给我的死锁跟踪的净化实例。据我了解，当两个提交尝试无序访问相同的表时，就会发生死锁。

然而，在这种情况下，只有一个表，执行这些 sql 语句的代码将它们从队列中拉出并按顺序执行。

为什么会出现这种僵局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:19:54.653

这取决于 DBMS，但是当两个不同的用户会话尝试锁定另一个会话也试图不受限制地访问的资源（行或表）时，可能会发生死锁，而不必发生提交。

```
Session 1 :  lock  <row x>   (e.g. read for update)
Session 2 :  lock  <row y>   (e.g. read for update)
Session 1 :  fetch <row y>
Session 2 :  fetch <row x> 
```

如果获取或其他操作需要解锁访问或干净读取，则存在死锁。

# javascript - 通过处理程序后车把上下文丢失

> ID：11562612
> 
> 赞同：2
> 
> 时间：2012-07-19T14:05:13.510
> 
> 标签：javascript, handlebars.js

我确信这是非常基本的，但我无法在里面使用 ../model `{{#if_eq}}`。我什至尝试使用../../model，这指向model._revs_info的一个孩子。

```
 {{#each model._revs_info}} 
        {{debug ../model}}
        {{#if_eq status compare="available"}} 
            {{debug ../model}}
            <a href="#list/{{model.id}}/{{rev}}">{{rev}}</a>
         {{/if_eq}}                                      
  {{/each}} 
```

`{{#if_eq}}`已从[https://github.com/danharper/Handlebars-Helpers/blob/master/helpers.js复制](https://github.com/danharper/Handlebars-Helpers/blob/master/helpers.js)

```
/**
 * If Equals
 * if_eq this compare=that
 */
Handlebars.registerHelper('if_eq', function(context, options) {
    if (context == options.hash.compare)
        return options.fn(this);
    return options.inverse(this);
}); 
```

`{{debug}}`已从[http://thinkvitamin.com/code/handlebars-js-part-3-tips-and-tricks/复制](http://thinkvitamin.com/code/handlebars-js-part-3-tips-and-tricks/)

```
Handlebars.registerHelper("debug", function(optionalValue) {
  console.log("Current Context");
  console.log("====================");
  console.log(this);

  if (optionalValue) {
    console.log("Value");
    console.log("====================");
    console.log(optionalValue);
  }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T11:24:31.813

根据[关于路径的 Handlebars 文档](http://handlebarsjs.com/#paths)，

> ../ 路径段引用父模板范围，而不是上下文中的上一级。这是因为块助手可以调用具有任何上下文的块，因此“上一级”的概念除了作为对父模板范围的引用之外没有特别的意义。

每个块助手定义一个范围，所以在 if_eq 你的层次结构看起来像

1.  基本模板，
2.  每个范围，
3.  if_eq 范围。

指向祖父母，`../../model`您就会得到正确的上下文。

还有一个基于你的代码的小提琴[http://jsfiddle.net/aFGD6/](http://jsfiddle.net/aFGD6/)另一个调试活动的，[http://jsfiddle.net/aFGD6/1/](http://jsfiddle.net/aFGD6/1/)

# ejb-3.1 - EJB3.1 提供属性值

> ID：11562614
> 
> 赞同：0
> 
> 时间：2012-07-19T14:05:31.933
> 
> 标签：ejb-3.1

也许这个问题可以重复。我只是找不到任何好的搜索词。

我如何为 SLSB 提供一些开发物业价值？

```
@LocalBean
@Stateless
class ClouldBean {

    public void doSomethingWithUsernameAndPassowrd() {
        // ...
    }

    private String username;
    private String password;
} 
```

我只想知道如何以非常**标准**`username`和**便携**的方式注入。`password`

 ****我必须使用一些标准的属性配置文件吗？

我是否必须将其设置为由容器提供？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T14:46:56.323

是的，有标准和可移植的方式，它被称为环境进入。

将以下内容添加到 ejb-jar.xml：

```
<ejb-jar>
    <enterprise-beans>
         ....
        <session>
            <ejb-name>ClouldBean</ejb-name>
         ....
            <env-entry>
               <env-entry-name>username</env-entry-name>
               <env-entry-type>java.lang.String</env-entry-type>
               <env-entry-value>my name</env-entry-value>
            </env-entry>
        ...
        </session>
    </enterprise-beans>
</ejb-jar> 
```

然后您可以将值注入到 bean 中的变量中：

```
@Resource(name="username")
private String username; 
```

有关更详细的示例，您可以查看此[博客文章](http://javaevangelist.blogspot.de/2008/08/how-to-implement-ejb-30-in-ejb-jarxml.html)。对于所有细节，最好的来源是 EJB 3.1 规范第 16.4 节。****

# windows - 在 Windows 中的 XAMPP 上安装 Zend Framework 2

> ID：11562617
> 
> 赞同：21
> 
> 时间：2012-07-19T14:05:42.643
> 
> 标签：windows, xampp, zend-framework2

我知道这个问题可能在这里和互联网上出现过几次。但是我仍然觉得对于想要进入框架世界的人来说还不清楚。我遵循了这些链接[Rob Allens 教程](http://akrabat.com/zend-framework-2-tutorial/)，[ZF 快速教程](http://packages.zendframework.com/docs/latest/manual/en/zend.mvc.quick-start.html)。

但是有些我觉得安装部分不太清楚。我有一个 Windows 系统，基本上是 Vista，安装了最新版本的 XAMPP。我已经从这个链接[ZFSkeletonApp](https://github.com/zendframework/ZendSkeletonApplication/zipball/master)下载了最新版本的 ZFSkeletonApplication ，提取了骨架内容，将文件夹重命名为 zendframework 并将其移动到 xampp 文件夹，即现在 ZF 骨架位于 c:\xampp\zendframework 中。

因此，直到这里一切似乎都清晰易懂，从这里开始，我对配置感到有些迷茫。有人可以从这里详细说明如何安装 Zf 并使其工作，例如包含路径、.htaccess 文件等的更改。请记住，我有带有 XAMPP 的窗口。如果有人可以准确地指导我进行此设置，那将很有帮助。

PS如果可以提供有关我需要通过包含路径的示例进行的更改的信息会很好，这样我就不会迷路，例如您可以在此处找到.htaccess文件（前路径名），.htaccess中的更改文件应该是某某。

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-20T05:15:23.337

为了将来的参考，我还发表了一篇关于如何在 Windows xampp 环境中安装 ZF2 的重要帖子，就在此处[在 Windows Xampp 上安装 ZF2](http://samminds.com/2012/07/zend-framework-2-installation-on-xampp-for-windows/ "在 Windows Xampp 上安装 Zend Framework 2")

好的，我现在已经在多个系统上完成了这项工作。对于家庭系统，以下步骤非常有效：

*   下载[msysGit](http://msysgit.github.com/)并安装到任意目录
*   从 msysGit-Folder 运行 git-cmd.bat
*   移动到您想要的目录，即`C:\xampp\htdocs\`（这是通过`cd dirname`或`cd ..`上一级完成的，更改分区`D:`并按回车键）

运行以下命令。将`<OptionalFolderName>`是 的子目录的名称`htdocs`，如果您跳过此，文件夹将被命名`ZendSkeletonApplication`

```
git clone git://github.com/zendframework/ZendSkeletonApplication.git <OptionalFolderName> 
```

**可能的故障场景**（*致命：无法连接到 github.com*）

再次在工作场所，git-protocol 的默认端口（9418）通常被阻止。如果您是这种情况，那么您应该尝试以下命令之一

```
git clone https://github.com/zendframework/ZendSkeletonApplication.git <OptionalFolderName>
git clone git@github.com:zendframework/ZendSkeletonApplication.git <OptionalFolderName> 
```

现在你还没有完成。安装了骨架应用程序，但仍然缺少框架，这里有些人可能会遇到第一个问题，但这实际上很容易。

我们仍然在命令行界面

*   `cd <OptionalFolderName>`或者`cd ZendSkeletonApplication`取决于你之前做了什么
*   `php composer.phar self-update`
*   `php composer.phar install`（这可能需要一段时间）

因此，这是可能发生很多事情的部分。我有两种情况发生在我身上：

**场景 #1**没有目录写权限

这很容易通过以管理员权限运行命令行界面来处理

**场景#2**在路由器后面工作（即在工作中）

就我个人而言，我不需要做太多事情来完成这项工作，但线路可能会根据您的代理而改变。我个人在命令行界面做了以下

*   `SET HTTP_PROXY=http://proxy.domain.tld:8080`你可能也很擅长
*   `SET HTTP_PROXY=proxy.domain.tld:8080`不要问我为什么，但我需要 http://

完成所有这些后，您应该拥有一个几乎可以运行的 ZendSkeletonApplication。另一部分是如何设置你的虚拟主机，但我不会详细介绍，因为这甚至是 ZF1 的东西，现在每个人都应该熟悉它，如果没有，那里有[很好的资源可以学习](http://framework.zend.com/manual/de/learning.quickstart.create-project.html#learning.quickstart.create-project.vhost)。

我希望我能对你有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:45:23.680

挫折必须安装在 Windows 中，但我最终找到了解决方案。从ZF2到通过git安装到windows上，因为这是在windows上模拟msysGit git linux的唯一用途，因为它只能访问教程：http: [//zf2.com.br/tutorialis/post/instalando-o-git -no-windows-para-fazer-a-instalacao-do-zf2-somente-no-comando-do-windows-via-composer](http://zf2.com.br/tutoriais/post/instalando-o-git-no-windows-para-fazer-a-instalacao-do-zf2-somente-no-comando-do-windows-via-composer)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-25T06:01:17.743

由于旧版本的 XAMPP 有很多依赖扩展问题（主要是 .dll 文件），所以我做的第一件事是确保我卸载了系统上已经存在的所有以前版本的 PHP 以及旧 XAMPP。然后安装最新的 XAMPP v3.2.2（在 Win-7-64 位上使用最新的 XAMPP 3.2.2-32 位）。然后按照 XAMPP 文档中标题*Start a New Zend Framework 2 Project*下的安装步骤进行操作。

我在使用旧 XAMPP 安装作曲家时也遇到了问题，但不知何故，这次在作曲家安装期间没有出现这些错误。而且，我成功安装了 ZEND，直到我在浏览器中输入`http://localhost:8081/myapp/`（我根据文档重命名了我的`ZendSkeletonAppliction`文件夹`myapp`）来访问它并遇到了错误：

```
致命错误：未捕获的 RuntimeException：无法加载 ZF2。运行 php composer.phar install 或定义 ZF2_PATH 环境变量。在 C:\xampp\apps\myapp\htdocs\init_autoloader.php:51
堆栈跟踪：
 #0 C:\xampp\apps\myapp\htdocs\public\index.php(18): 要求()
 #1 {main} 在第 51 行的 C:\xampp\apps\myapp\htdocs\init_autoloader.php 中抛出

```

`Composer.phar`我第一次`ZendSkeletonApplication‐master.zip`从 Github 下载时甚至都不存在（只有`composer.json`和`composer.lock`文件存在）。无论如何我不需要它们，因为我遵循了 XAMPP Doc，它不会`composer.phar`在命令行中调用：

```
composer create‐project ‐s dev zendframework/skeleton‐application path/to/install 
```

我不是那么精通技术，不知道如何`ZF2_PATH`正确地“定义环境变量”，所以我浪费时间在网上寻找解决方案，找不到任何解决方案（当时我偶然发现这个论坛也没有我的查询的解决方案）。最后，在抑郁和焦虑的夹缝中，意外发生了。我所做的只是根据 XAMPP 的 ZEND 文档，我右键单击`C:\xampp\apps\myapp\htdocs`文件夹内部并单击“ **Composer Install** ”，它从缓存中重新安装了 Zend 文件。然后刷新`http://localhost:8081/myapp/`，出现 Zend 介绍页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T19:05:49.267

我只是这样做了：

```
D:\web_dev\zendapp>C:\PHP\php.exe composer.phar self-update 
```

它工作得很好

# c++ - 如何访问 C++ 中列表中的列表？

> ID：11562618
> 
> 赞同：0
> 
> 时间：2012-07-19T14:05:42.273
> 
> 标签：c++

好的，所以我首先开始学习 C#，现在我正在学习 C++，所以我对它有点陌生。
在 C# 中，当我想访问列表中的列表时，我会简单地使用嵌套的 for-each 循环。

现在因为在 C++ 中我不知道如何使用 for-each 循环，所以我尝试使用 for 循环访问嵌套列表。

这是我的代码：

```
int main

{      
    list<list<char *> > moves; 

    list<char *> pointers;

    list<list<char> > undoValues;
    list<char> undoValue;

    for(list<list<char *> >::iterator outer=moves.begin();outer!=moves.end();outer++)
    {
        for(list<char *>::iterator inner=outer.begin();inner!=outer.end();inner++)
        {

        }
    }
} 
```

我收到 2 个错误：

```
error 'struct std::_List_iterator<std::list<char*>,std::allocator<char *> > >' has no member named begin

error 'struct std::_List_iterator<std::list<char*>,std::allocator<char *> > >' has no member named end 
```

如何访问嵌套列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T14:09:28.653

您需要取消引用迭代器以获取元素。您可以使用`*`或`->`：

```
for(list<char *>::iterator inner=outer->begin();inner!=outer->end();inner++) 
```

或者

```
for(list<char *>::iterator inner=(*outer).begin();inner!=(*outer).end();inner++) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:08:35.607

您需要使用 (*outer) 来获取迭代器指向的内容：

```
list<char *> pointers;

list<list<char> > undoValues;
list<char> undoValue;
for(list<list<char *> >::iterator outer=moves.begin();outer!=moves.end();outer++)
{
    for(list<char *>::iterator inner=(*outer).begin();inner!=(*outer).end();inner++)
    {

    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T14:09:15.863

```
for(list<list<char *> >::iterator outer=moves.begin();outer!=moves.end();outer++)
    for(list<char *>::iterator inner=outer->begin();inner!=outer->end();inner++) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T14:10:21.133

要访问迭代器引用的对象的成员，您需要间接；所以列表的`begin()`成员`outer`是`outer->begin()`，不是`outer.begin()`。同样对于`end()`.

# objective-c - 如何在 iOS 中标记和取消标记行

> ID：11562621
> 
> 赞同：2
> 
> 时间：2012-07-19T14:05:59.683
> 
> 标签：objective-c, ios, xcode, uitableview, storyboard

我有一个表视图包含通过情节提要创建的静态组我想使用复选标记来更改设置或选择不同的行，但我不知道该怎么做，以编程方式或通过 xcode 检查和取消选中行

你能帮帮我吗！

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T14:10:41.273

您更改 UITableViewCell[附件类型](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html)

至于选择什么，你在tableView中使用上面的属性：didSelectRowAtIndexPath。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:19:21.067

对于法语/英语部分，我假设您需要默认选中一个。在你的 cellForRowAtIndexPath 中：

```
if([cell.textLabel.text isEqualToString:@"English"]) 
{
      cell.accessoryType = UITableViewCellAccessoryCheckmark;
} 
```

然后，每当点击单元格时，您都需要确定其中一个已被点击，然后取消选中另一个。

在你的 didSelectRowAtIndexPath

```
if(indexPath.section ==0 && indexPath.row ==0) {
    UITableViewCell * otherCell = [tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:1 inSection:0]];
    otherCell.accessoryType = UITableViewCellAccessoryNone;
    cell.accessoryType = UITableViewCellAccessoryCheckmark;
   }
 else if(indexPath.section ==0 && indexPath.row ==1) {
    UITableViewCell * otherCell = [tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0]];
    otherCell.accessoryType = UITableViewCellAccessoryNone;
    cell.accessoryType = UITableViewCellAccessoryCheckmark;
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T11:08:53.930

使用此代码：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

UITableViewCell *thisCell = [tableView cellForRowAtIndexPath:indexPath];

if (thisCell.accessoryType == UITableViewCellAccessoryNone) {
    thisCell.accessoryType = UITableViewCellAccessoryCheckmark;

}else{
    thisCell.accessoryType = UITableViewCellAccessoryNone;

}
}

- (UITableViewCellAccessoryType)tableView:(UITableView *)tableView accessoryTypeForRowWithIndexPath:(NSIndexPath 
*)indexPath {

//add your own code to set the cell accesory type.
return UITableViewCellAccessoryNone;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T15:22:05.263

您可以选中或取消选中视图，这很好，但是您将模型保存在哪里？您使用什么属性来保存有关正在选择的语言的信息？

我建议您使用某种枚举数据类型来保存您选择的语言并将其包含在您的`.h`文件中：

```
enum language {english, french};

@interface TesterProjectViewController : UIViewController
{
    enum language selectedLanguage;
} 
```

接下来我会选择你的语言`viewDidLoad:`作为你的默认语言，或者`NSUserDefaults`用来选择他们最后选择的语言。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self->selectedLanguage = english;

} 
```

然后，我将使用我的`UITableViewDelegate`和`UITableViewDataSource`函数来跟上需要选择哪种语言，以及哪些`UITableViewCell`需要具有辅助视图：

```
-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if(indexPath.section==0)
    {
        switch (indexPath.row) {
            case 0:
                self->selectedLanguage = english;
                break;

            case 1:
                self->selectedLanguage = french;
                break;

            default:
                break;
        }
    }
    [theTableView reloadData];
} 
```

该`didSelectRowAtIndexPath:`方法用于设置您在模型中使用的语言。然后该`cellForRowAtIndexPath:`方法用于设置您的视图以匹配您的模型。您可能希望继续在您的 中设置复选标记`didSelectRowAtIndexPath:`，但我更喜欢将其保留在 中，`cellForRowAtIndexPath:`以便在重新加载我的数据时始终正确，如下所示：

```
-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *theCell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"cell"];

    //  You may set up the cell differently or do whatever setup you need here:

    if(indexPath.section==0)
    {
        if(self->selectedLanguage == english && indexPath.row==0)
            theCell.accessoryType = UITableViewCellAccessoryCheckmark;
        else if(self->selectedLanguage == french && indexPath.row==1)
            theCell.accessoryType = UITableViewCellAccessoryCheckmark;
        else 
            theCell.accessoryType = UITableViewCellAccessoryNone;
    }

    //More cell setup can go here, or setup cells for different rows/sections.

    return theCell;
} 
```

此外，正如其他人所指出的，我将`UISwitch`用于底部的通知选择，因为它们不是“无线电”类型选择，而是每个选择都是开/关类型选择。

我希望这对你有所帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T14:36:30.567

您可以使用标记或取消标记行

```
 cell.accessoryType = UITableViewCellAccessoryCheckmark;

        cell.accessoryType = UITableViewCellAccessoryNone; 
```

您在 didSelectRowAtIndexPath 中添加上述方法，管理数组中的所有检查并重新加载数据。

# c# - 缩放和选择不适用于时间类型为 x 轴的 C# 图表

> ID：11562629
> 
> 赞同：9
> 
> 时间：2012-07-19T14:06:49.043
> 
> 标签：c#, .net, mschart

我正在使用以下代码来选择和缩放我的图表部分：

```
chart1.ChartAreas[0].CursorX.IsUserEnabled = true;
chart1.ChartAreas[0].CursorX.IsUserSelectionEnabled = true;
chart1.ChartAreas[0].AxisX.ScaleView.Zoomable = true;
chart1.ChartAreas[0].AxisX.ScrollBar.IsPositionedInside = true;

chart1.ChartAreas[0].CursorY.IsUserEnabled = true;
chart1.ChartAreas[0].CursorY.IsUserSelectionEnabled = true;
chart1.ChartAreas[0].AxisY.ScaleView.Zoomable = true;
chart1.ChartAreas[0].AxisY.ScrollBar.IsPositionedInside = true; 
```

它适用于具有整数类型的 x 和 y 轴的图表。

![在此处输入图像描述](../Images/5a6e30ac5540cf3ebf996f278a43d8e0.png)

但是当我将系列值类型设置为 时`series1.XValueType = ChartValueType.Time;`，我将无法放大 x 轴。

![在此处输入图像描述](../Images/09ddd3a84b3df475429ae24726be0822.png)

当我将两个轴值类型设置为自动并使用例如添加点时，`chart1.Series[0].Points.AddXY(DateTime.Now.ToLongTimeString(), rand.Next(10, 20));`缩放就起作用了。

我怎样才能让我的 x 轴成为时间并且仍然能够缩放？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-20T16:01:45.647

您需要将光标上的间隔默认设置为 1.0，我遇到了百分比问题，所以我将间隔设置为 0.01，例如 1%，如下所示。您想在 Cursor 上设置 IntervalType，因为它接受日期时间类型。

```
chart1.ChartAreas[0].CursorX.Interval = 0.01 
```

更多信息请访问[http://msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting.cursor.interval%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting.cursor.interval%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T21:08:59.810

您的缩放很可能不起作用，因为您的测试时间值彼此太接近。缩放必须能够从用户选择中选择起点和终点。如果 start == end，比例视图的合理行为是什么都不做。

# function - Powershell：返回函数中没有行的数据表

> ID：11562634
> 
> 赞同：3
> 
> 时间：2012-07-19T14:07:04.770
> 
> 标签：function, powershell, return, rows

我正在编写一个脚本，在其中创建许多自定义数据表，因此我想创建一个为我生成表的函数。具体来说，我希望该函数创建表和表的列，然后返回该表，以便调用函数可以将行元素添加到返回的表中。但是，每当我返回一个没有行的表时，我都会被告知我不能向它添加行，因为该元素是空的。这是我到目前为止所尝试的：

```
Function Generate-Table ($Name, [String[]]$ColumnNames, [Type[]]$DataTypes) {
    $table = New-Object system.Data.DataTable "$Name"

    for ($i = 0; $i -lt $ColumnNames.Length; $i++) {
        $col = New-Object system.Data.DataColumn $ColumnNames[$i],($DataTypes[$i])
        $table.columns.add($col)
    }
    return $table
}

$ColumnNames = @("Name", "Age")
$DataTypes = @([string], [int])
$table = Generate-Table "OutputTable" $ColumnNames $DataTypes

$row = $table.NewRow();
$row.Name = "Bob"
$row.Age = "20"
$table.Rows.Add($row);

$table 
```

这给了我错误：

```
You cannot call a method on a null-valued expression.
At C:\Users\mrpadmin\accounting\test.ps1:15 char:21
+ $row = $table.NewRow <<<< ();
    + CategoryInfo          : InvalidOperation: (NewRow:String) [], RuntimeException
    + FullyQualifiedErrorId : InvokeMethodOnNull 
```

现在，如果我也这样做，但将第 13 行替换为：

```
. Generate-Table "OutputTable" $ColumnNames $DataTypes 
```

它正确地给了我以下输出：

```
Name    Age
----    ---
Bob      20 
```

有没有办法返回没有行的数据表对象？如果没有，是否有另一种方法来制作一个可以返回准备好填充行的数据表的函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T16:07:14.923

我认为您的问题将通过简单地在您返回的表前使用一元逗号运算符来解决：

```
return ,$table 
```

Powershell 对实现 IEnumerable 的集合进行了一些有趣的自动展开。逗号运算符会将您的表格包装在一个单对象数组中，因此当它自动展开时，它将返回到表格中。我不知道有一种方法可以强制 Powershell 不这样做。

这里是[运营商](http://technet.microsoft.com/en-us/library/dd347588.aspx)的参考。

# css - 将 Div 定位到页面的中心

> ID：11562635
> 
> 赞同：0
> 
> 时间：2012-07-19T14:07:08.637
> 
> 标签：css, html

我的页面上有以下背景：

![在此处输入图像描述](../Images/21774b9d325d99d7e53fb0c1deb8da10.png)

这是老第比利斯的照片，这也是我的代码

```
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
</head>
<style>

#links { 
    margin: 0 auto; 
    width: 4800px; 
    font-size:70px;
    clear: both; 
    display: block;

}
#test a {
    float: right;
}
a, a:active, a:visited {
    color: red;
}
</style>
<body background="თბილისი.jpg" >

</body>
</html> 
```

我想在我的页面上添加一些链接，例如“酒店”、“旅游”和“娱乐”，这样它们就不会出现在房屋等处。我喜欢它们在中间或右侧。你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:46:31.587

```
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
</head>

<body background="http://www.cyprusq.com/wp-content/uploads/2010/02/NORTH-CYPRUS-HOTELS-view.jpg" >
<nav>
<ul>
<li><a href="">Hotel</a></li>
<li><a href="">Tours</a></li>
<li><a href="">Entertainment</a></li>
</ul>
</nav>

<style>
nav {
width: 300px;
float: right;
margin-top: 20px;
}

nav li a{
float: left;
padding: 0px 10px;
color: #fff;
}
</style>

</body>
</html>​ 
```

jsfiddle在这里：http: [//jsfiddle.net/Ya4Ra/1/](http://jsfiddle.net/Ya4Ra/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:10:14.503

将您的“链接” div 定位到您希望使用游览 CSS 显示链接的位置。使用边距或填充移动 div。定位 div 的其他方法可能是向左或向右浮动。

```
#links { 
    margin-top: 400px;//moves div down, this will probably be below the middle of the page 
    width: 4800px; 
    font-size:70px;
    clear: both; 
    display: block;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T14:11:20.773

您已经将您的链接（`#links`，而不是在代码中）定位在页面的中心。您应该减小宽度以查看效果。尝试`width: 950px;`或`width: 60em; max-width: 90%;`。

另一种选择是绝对定位您的链接元素（我假设它将是一个列表）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T14:13:14.173

**HTML**

```
<div id="links-container">
    <a href="http://hostel.com>Super Hotel</a>
</div> 
```

**CSS**

```
#links-container {
    float: right;
} 
```

# c# - 如何格式化 stringbuilder 以表格形式发送电子邮件，而不仅仅是纯文本

> ID：11562636
> 
> 赞同：1
> 
> 时间：2012-07-19T14:07:09.167
> 
> 标签：c#, email

所以我有一个页面，用户填写评论/请求表，当媒体提交他们填写的所有信息时，他们会直接发送到我的电子邮件。

我正在努力做到这一点，这样当电子邮件通过时，它更容易阅读，并且在表格或 html 中。我该怎么做呢？

这是我的代码：

```
System.Text.StringBuilder sb = new System.Text.StringBuilder();

            sb.AppendFormat("Request Name:  {0}, <b><b/>  <br/><br/>",   txtBugName.Text.Trim());
            sb.AppendFormat("Category: {0}<br/><br/>", ddlModule.SelectedValue);
            sb.AppendFormat("Sub-Category: {0}<br/><br/>", ddlPage.SelectedValue);
            sb.AppendFormat("Description: {0}<br/><br/>", txtComments.Text.Trim());
            sb.AppendFormat("Email is: {0}<br/><br/>", txtemail.Text.Trim()); 
```

我需要添加什么来更改格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T14:10:26.760

您可以将`MailMessage`'`IsBodyHtml`属性设置为 true：

```
var message = new MailMessage();

message.IsBodyHtml = true;

message.Body = "your html snippet"; 
```

[System.Net.Mail.MailMessage](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T14:33:40.017

您的代码应该看起来更像：

```
System.Text.StringBuilder sb = new System.Text.StringBuilder();

sb.Append("<table>");
sb.AppendFormat("<tr><td>Request Name:</td><td>{0}</td></tr>", txtBugName.Text.Trim());
sb.AppendFormat("<tr><td>Category:</td><td>{0}</td></tr>", ddlModule.SelectedValue);
sb.AppendFormat("<tr><td>Sub-Category:</td><td>{0}</td></tr>", ddlPage.SelectedValue);
sb.AppendFormat("<tr><td>Description:</td><td>{0}</td></tr>", txtComments.Text.Trim());
sb.AppendFormat("<tr><td>Email is:</td><td>{0}</td></tr>", txtemail.Text.Trim());
sb.Append("<table>"); 
```

然后我假设这个`IsBodyHtml`属性是真的，因为你已经在使用 HTML

# c# - Word 2007 互操作 Document.Open 失败且没有错误

> ID：11562637
> 
> 赞同：1
> 
> 时间：2012-07-19T14:07:18.107
> 
> 标签：c#, ms-word, office-interop

我正在尝试让 Word Interop 在我们的构建服务器上工作。在我的本地机器上一切都很好，但在构建服务器上，我毫无例外地返回了一个空文档对象。

知道为什么我不会收到任何错误吗？

# html - XPath 获取 div 的属性

> ID：11562641
> 
> 赞同：1
> 
> 时间：2012-07-19T14:07:29.887
> 
> 标签：html, parsing, xpath, html-parsing, html-agility-pack

我正在尝试通过编写一个简单的程序来学习 xpath，该程序将从以下页面列出英超联赛的足球赛程： [http ://www.livefootball.com/football/england/premier-league/](http://www.livefootball.com/football/england/premier-league/)

我已经使用`//dl[@class='mElHeaderDet']`语句收集了所有日期，并使用`//div[@class='mEl show']/dl/*`. 但是问题是，该页面中的每个匹配项似乎都有自己的唯一 ID，例如第一个匹配项如下所示：

```
<dl id="fid1-1228229" class="even">
  <dd class="mElStatus">16:00</dd>
  <dd class="mElO1">Arsenal</dd>
  <dd class="mElScore">v</dd>
  <dd class="mElO2">Sunderland</dd>
</dl> 
```

在这个例子中，fid1-1228229 是我感兴趣的。我将如何获取所有匹配项 ID 的列表？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T14:25:23.540

要检索您可以使用的所有 ID 的列表

```
//div[@class='mEl show']/dl[not(contains(@class,'mElHeaderDet'))]/@id 
```

上面的 Xpath 将返回您`id`的类不是 div 的属性值列表`mElHeaderDet`。

**或者**

或者，您也可以使用此 xpath

```
//div[@class='mEl show']/dl[starts-with(@id,'fid')]/@id 
```

以上 XPath 将返回 ID 属性值以开头的所有 div 的 id 列表`fid`

希望这可以帮助。

# c - 错误：可变大小的对象可能未初始化

> ID：11562642
> 
> 赞同：1
> 
> 时间：2012-07-19T14:07:32.333
> 
> 标签：c, arrays, macros

```
#define L 1
#define M L+1

int main(void){

    int N=L*M*2;
    char s [N]={'1','2'};
    printf("%d", sizeof(s));

    return 1;   
} 
```

为什么上面的代码无法编译？Eclipse 的编译器说了两件事：

1.  *可变大小的对象可能无法初始化：*是因为在宏中定义了 N 与 M 和 L 还是因为我无法初始化*类型为*arr[x] 的数组，其中 x 在任何情况下都是可变的？
2.  *数组初始值设定项中的多余元素*- 这是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:10:13.940

> 因为我无法初始化类型为 arr[x] 的数组，其中 x 是可变的？

事实上，在 C99 之前，数组大小必须是一个*常量表达式*。在 C99 中，这已通过*变长数组*放宽。

（这与宏无关。）

> 数组初始值设定项中的多余元素 - 这是什么意思？

解决第一个问题，这应该会消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:15:56.907

您的示例中的数组大小由 指定`N`，它不是常量。这意味着您的数组是 VLA（可变长度数组）。C 语言不允许在 VLA 声明中使用初始值设定项。

为了编译`N`它，我必须把它做成一个常数（因为`M`和`L`是常数，`N`也可以是常数）。声明`N`使用`#define`或作为枚举成员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T14:11:33.123

如果我没记错的话

```
char s [N]={'1','2'}; 
```

N 必须是常数

# svn - 如何使我的 SVN 存储库看起来与我的工作副本完全一样？

> ID：11562643
> 
> 赞同：1
> 
> 时间：2012-07-19T14:07:31.867
> 
> 标签：svn, netbeans, version-control, ubersvn

我的 SVN 存储库充满了错误，因为我犯了试图对我的一个目录进行驼峰式命名的大罪。

我想要的只是让我的 SVN 存储库（我是唯一一个使用它，所以我可以对它做任何事情）看起来完全像我的工作副本并停止出错。我现在正在使用 uberSVN，经过数小时的尝试，我无法让它工作。有什么方法可以获取我的存储库的树形视图并在那里进行编辑？我应该删除存储库并从头开始吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:44:38.240

我没有使用 uberSVN，但这里是修改 Subversion 存储库的一般过程。

*   断开您的工作副本与 Subversion 的连接。
*   重命名您的工作副本主目录。
*   对 Subversion 存储库的文件夹和文件名进行所需的任何更改。
*   从您的 Subversion 存储库中签出工作副本。
*   通过从重命名的原始工作副本复制和粘贴，手动对新工作副本模块进行任何更改。
*   将您的工作副本提交到 Subversion。
*   删除您的原始重命名工作副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:18:47.593

尽管 Gilbert Le Blanc 的回答在技术上是正确的，但我实际上使用了 TortoiseSVN，它确实有一个树视图，我可以在其中编辑存储库。我能够以这种方式修复它。

# c# - 将 Word 文档转换为 base64 字符串 C#

> ID：11562644
> 
> 赞同：8
> 
> 时间：2012-07-19T14:07:35.023
> 
> 标签：c#, .net-4.0, ms-word, vsto

我正在尝试获取仍在 Word 中打开的活动 Word 文档的 base64 表示形式，并且在 ReadAllBytes() 中出现以下错误：

**该进程无法访问另一个进程正在使用的文件“文件路径”**

```
public string GetEncodedTemplate()
        {
            //Convert a Word document's base64 representation
            string base64 = String.Empty;
            _application.ActiveDocument.Save();

            string docPath = _application.ActiveDocument.FullName;
            byte[] binarydata = File.ReadAllBytes(docPath);
            base64 = System.Convert.ToBase64String(binarydata, 0, binarydata.Length);
            return base64;
        } 
```

我确实知道发生错误是因为指定的文档仍然在 Word 中打开，我的问题是 - 是否仍然有可能在不求助于保存到临时文件的情况下获取文档的 base64 表示？

我正在使用 C# .NET 4.0 和 MS Office 2010

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T14:09:51.940

您是对的 - Word 锁定了当前文档。为了获取当前文档字节，您需要**复制现有文件**( [`File.Copy`](http://msdn.microsoft.com/en-us/library/c6cfw35a.aspx)) 或**保存到新文件**([`Document.SaveAs`](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.word.document.saveas%28v=vs.100%29.aspx)或[`IPersistFile.Save`](http://blogs.msdn.com/b/pranavwagh/archive/2008/04/03/how-to-do-a-save-copy-as-in-word.aspx)) 以读取其内容。

# asp.net - ASP.NET 或 Windows 事件日志速率限制？

> ID：11562645
> 
> 赞同：2
> 
> 时间：2012-07-19T14:07:41.150
> 
> 标签：asp.net, asp.net-mvc, exception, logging, event-log

我正在测试 ASP.NET MVC 中的一些错误处理，但我的异常每分钟只记录一次（至少看起来是这样）。

我打开了 CustomErrors：

```
<customErrors mode="On" defaultRedirect="~/Home/Error"> 
```

我删除了 HandleErrorAttribute 的全局过滤器。我的控制器和操作没有 HandleError 属性。

我有一个控制器操作，它会引发如下异常：

```
public ActionResult Test()
{
    var random = new Random();

    throw new Exception(random.Next().ToString());
} 
```

但是，如果我多次访问此页面（不能只是因为它重定向而刷新），我每分钟只会在 Windows 事件日志中看到 1 个事件。我尝试从另一个浏览器访问同一页面，但也没有记录该异常。

ASP.NET 或 Windows 事件日志是否有某种速率限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-23T12:03:22.077

速率限制由 ASP.NET 根据 system.web/healthMonitoring/rules/add 的属性 minInterval 和 Web.config 中的 system.web/healthMonitoring/profiles/add 元素完成

[https://msdn.microsoft.com/library/23t1tcty%28v=vs.100%29.aspx](https://msdn.microsoft.com/library/23t1tcty%28v=vs.100%29.aspx)

为了记录所有错误，您可以将其添加到 Web.config ( [source](https://leansentry.zendesk.com/entries/23584078-How-do-I-enable-ASP-NET-detailed-error-tracking-) )：

```
<system.web>
    <healthMonitoring>
        <rules>
            <!-- Make sure all errors are logged to the EventLogProvider ("Default" profile only allows 1 error per minute) -->
            <remove name="All Errors Default" />
            <add name="All Errors Default" eventName="All Errors" profile="Critical" provider="EventLogProvider" />
        </rules>
    </healthMonitoring>
</system.web> 
```

# javascript - 将 DIV 行添加到现有行

> ID：11562649
> 
> 赞同：0
> 
> 时间：2012-07-19T14:07:59.493
> 
> 标签：javascript, jquery, jquery-selectors

谁能告诉我下面的脚本可能有什么问题？

它应该在类名中查找最后一个带有#objec 的 DIV，然后在 DIV 中查找最后一个输入元素，然后在已经存在的那个下面添加一个 ID/名称递增的新 DIV。我认为这是出错的行：

```
var name = $("#objec:last>input").attr("name"); 
```

代码在这里：http: [//jsfiddle.net/mtait/9MbQH/6/](http://jsfiddle.net/mtait/9MbQH/6/)

...及以下。

谢谢，

标记

```
<label id="add_tag"> 
     Click me to add a new row
</label> 

<div class="objec">
    <div class="row">
        <div class="span4">
            <input class="span4" data-val="true" data-val-required="Objective&#32;is&#32;required" id="Objectives_7__objective" name="Objectives[7].objective" type="text" value="Timecard Completion" />
        </div>
     </div>
</div>

$(document).ready(function() {
var re = /\[(.*?)\]/;
$("#add_tag").click(function() {
    var name = $("#objec:last>input").attr("name");
    var m = re.exec(name);
    var itemNumber = parseInt(m[1]) + 1;
    var $newdiv1 = $('<div class="objec"><div class="row"><div class="span4"><input class="span4" data-val="true" data-val-required="Objective&#32;is&#32;required" id="Objectives_' + itemNumber + '__objective" name="Objectives[' + itemNumber + '].objective" type="text" value="..." /></div></div>');
    $(".objec:last").after($newdiv1);
    return false;
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:12:06.187

这种用法适用于 ID 。如果 objec 是一个 ID，你可以使用下面的

```
 $("#objec:last>input") 
```

在你的情况下，它是一个类名

所以试试

```
 $(".objec") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:13:30.743

可能你想要这个：

```
var name = $(".objec:last input").attr("name"); 
```

[现场演示](http://jsfiddle.net/9MbQH/9/)

[**阅读Descendant 组合器**](http://www.w3.org/TR/selectors/#descendant-combinators)和[**Child 组合**](http://www.w3.org/TR/selectors/#child-combinators)器之间的区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T20:54:12.843

如果我没记错的话，我认为你应该使用“。” 引用类与 id 时的选择器。ex/ $(".objec:last>input").attr("name");

# c# - 强制垃圾收集以确保 GC 以后不会检查相当大的对象是个好主意吗？

> ID：11562651
> 
> 赞同：4
> 
> 时间：2012-07-19T14:08:12.753
> 
> 标签：c#, garbage-collection

我创建了服务器应用程序，它必须在开始侦听客户端之前处理一些数据（这是一个非常繁重的过程）。结果，它分配的内存（大约 30MB）只会被使用一次。

强制垃圾收集会给我带来好处吗？还是让 GC 做它的工作？

此外，我必须使用 .NET 3.5，据我所知，垃圾收集会中断线程，这就是我强制使用垃圾收集器的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T14:23:13.867

好吧，垃圾收集仍然只是一种启发式方法，它通常会*尽力**做出*最好的猜测，但您可能有合理的主张，即在特定时间比它知道得更好。

 *以拥有大量资产的游戏为例。当您切换到新区域时，您会弹出一个加载屏幕并开始加载新数据，释放对旧数据的引用。它还不会被收集，因为你还没有达到你的门槛，但你可能会在你开始每帧创建你的小矩阵来展示你的游戏时很快达到它，然后你会得到一个（可能很明显）当您卸载数百兆数据并移动其他所有内容以压缩队列时会卡顿。

现在您可以在加载新资源后强制收集，因为用户已经处于“空闲”模式，盯着您的进度条，他不会注意到小卡顿，之后您的游戏整体看起来会更流畅。

真正的诀窍是知道什么时候干涉，什么时候不干涉。如有疑问，请不要——无论如何，该收集都会发生，并且更频繁地发生只会让您的应用程序看起来*更加*卡顿。你需要一些东西来“隐藏”它，比如一个用进度条锁定你的应用程序的长任务，该进度条会以某种方式生成许多最终对象——实际上，游戏加载屏幕是我唯一能想到的东西，但是 YMMV。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:23:42.917

托管语言的部分意义在于，您（大概）永远不必担心垃圾收集。只有在非常特殊的情况下手动调用垃圾收集器才会有用，而且几乎可以肯定这不是其中之一。

[您可以在此处](http://msdn.microsoft.com/en-us/library/ms973837.aspx)阅读有关 GC 背后的一些语义以及使其快速而不是慢的原因，这可能是很好的理论阅读，因此您了解正在发生的事情。

同时，对于您的具体问题，我认为您应该看一下[IDisposable](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)接口。如果您有一个很大的特定对象并且您很担心，那么在其上实现 IDisposable 接口将允许您将工作包装在一个`using`语句中，这保证该对象将在您完成它的那一刻被释放。在该特定硬币的另一面，它保证该大对象将有一个活动的、打开的句柄，因此在 using 语句结束之前，GC 无法拾取它。

这可能会比尝试手动使用 GC 更好地解决您的问题，GC 在设计上是终结程序员的黑匣子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T14:30:17.473

你没有说你是如何分配 30MB 内存的，但这很重要。如果您正在分配非托管内存，GC 不知道它（尽管您可以使用方法[GC.AddMemoryPressure](http://msdn.microsoft.com/en-us/library/system.gc.addmemorypressure%28v=vs.90%29)告诉它）。在这种情况下，您应该在处理非托管内存的类上实现 IDisposable，并且在处理完对象后应该显式调用 Dispose。

如果您正在分配托管内存，只需让 GC 完成其工作，*除非*：

*   你只是碰巧知道，在你完成了这个对象之后，你的活动总是会停顿下来，
*   您实际上已经观察到 GC 在稍后时间点导致性能问题的证据。*

# c# - 如何在 ASP.NET MVC4 中执行方法之前检查用户权限角色访问

> ID：11562652
> 
> 赞同：1
> 
> 时间：2012-07-19T14:08:16.140
> 
> 标签：c#, asp.net-mvc, authentication, authorization, security

我已经编辑了我的问题，这是我用于实现身份验证的代码。

继承 AuthorizeAttribute 的类。

```
public class FBxAuth : AuthorizeAttribute
    {

        public FBxAuth()
            : base()
        {

        }
        protected override bool AuthorizeCore(HttpContextBase httpContext)
        {
            bool isAuthenticated = false;
            if (httpContext.User.Identity.IsAuthenticated)
            {
                // here I will check users exists in database.
                // if yes , isAuthenticated=true;
            }
            return isAuthenticated;
        }
        protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
        {
            filterContext.HttpContext.Response.Redirect("/home/Register/?returningURL=" +
                filterContext.HttpContext.Server.UrlEncode(filterContext.HttpContext.Request.Url.ToString()));

        }

    } 
```

我的控制器

```
[FBxAuth]
        public ActionResult Index()
        {
            teamDA = new TeamDataAccess();
            var teams = teamDA.TeamsList();

            return View(teams);
        } 
```

1.  我是否遵循正确的方法？

2.如何检查经过身份验证的用户是否有权在控制器中执行操作。例如：删除。 `www.abc.com/teams/5/`删除将执行删除我可以从 UI 中隐藏删除链接。但是，如果用户尝试通过提供上述 url 来删除，我该如何阻止他执行该操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:07:14.927

您必须对 Index 操作执行相同的操作，只需将`[FBxAuth]`或 common`[Authorize]`属性添加到您希望仅允许经过身份验证的用户访问的操作。

# vim - vim CTRL-] 键不起作用

> ID：11562654
> 
> 赞同：19
> 
> 时间：2012-07-19T14:08:20.163
> 
> 标签：vim, ctrl

嗨，我是 vim 的新手，我被卡住了。`:help tag`它说可以使用`CTRL`-`]`击键进入标签定义。但我无法让它工作。我以为我用我的插件弄乱了一些映射，所以我清理了`.vimrc`. 但是我仍然将光标移到标签词上（例如在帮助中）。我罢工`Ctrl`，`]`同时没有任何反应。

有人知道如何解决吗？或者，也许我正在阅读 :help 错了？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-19T16:33:09.510

首先，使用`:verbose`命令（感谢[sehe](https://stackoverflow.com/questions/11562654/vim-ctrl-keys-not-working/11565329?noredirect=1#comment25918828_11565329)）知道谁在哪里反弹你的密钥。

```
:verbose nmap <C-]> 
```

然后，如果您找不到您的密钥被反弹的位置，请将您的`Ctrl`-`]`密钥与原始密钥绑定，然后重试：

```
:nnoremap <C-]> <C-]> 
```

欲了解更多信息：

```
:help mapping
:help :verbose
:help :noremap 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-11T22:13:38.880

我有同样的问题，并`:verbose`没有提出任何有用的东西。我想出的是`Ctrl`——`+`带我去那里。

请注意，我使用的是德语键盘，加号位于美式键盘方括号的位置。也许代码只查看密钥的位置（我记得结合`Ctrl`-key 阅读了一些关于这方面的内容）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-02T06:05:16.813

我在虚拟机虚拟机上遇到了同样的问题。正确的 ctrl 键是在主机和来宾环境之间切换。尝试使用左**`ctrl`**+ **`]`**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-06T10:16:36.927

一个有点晚的条目，但我遇到了同样的问题。以为我会分享一个可能的解决方案，这样其他人就不必经历痛苦。

在我的情况下的解决方案是：按下`Ctrl`并按住它，按下`]`两次！！！无论您使用什么组合键来生成正确的方括号`]`，都要做两次！我不知道为什么这适用于我的情况。帮助文件中没有提到这一点。大概花了一两个小时试图找出`Ctrl`-`]`组合，直到我偶然找到了解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-30T13:20:26.447

对于我来说，“Ctrl-]”的意思是“Ctrl+Alt GR+)”。换句话说，

*   按“Ctrl”
*   在按下“Ctrl”的同时按下“Alt GR”
*   按下“）”（也有“]”）同时按下以上两个

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-13T10:00:12.290

问题是由于虚拟盒子的默认设置。在 Oracle Virtual Box 中，您可以看到默认情况下，权限控制用作主机组合键。转到文件-> 首选项-> 输入并将主机组合键更改为“无”。最初对我来说，ctrl 也工作了，在上述更改之后，两个键都工作了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-04T21:23:18.473

在挪威语键盘上使用 macOS：`CTRL-]`是`CTRL-å`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-12-04T15:21:28.160

*此解决方案仅适用于非美国键盘布局的 X 环境中的 linux。*

我只是在 linux 中使用瑞士德语键盘布局来解决这个问题。我们通过按 AltGr+¨ 键入 ]，因此我必须使用 AltGr+Ctrl+¨ 来跳转到 ctag 定义，这很尴尬。

我所做的是将¨（分音符号）键重新映射到]（括号右）

1.  打印键码 35 的当前映射：

    `$> xmodmap -pke | grep 35 keycode 35 = dead_diaeresis exclam dead_diaeresis exclam bracketright dead_macron bracketright`

2.  重映射键（我们只是用括号右替换第一个 dead_diaeresis）：

    `$> xmodmap -e 'keycode 35 = bracketright exclam dead_diaeresis exclam bracketright dead_macron bracketright'`

现在按下键码 35 (¨) 将打印 ] 而不需要任何修饰符，并且 CTRL-] 可以跳转到标签。

xmodmap -e 可以作为用户执行而无需 sudo，例如，您可以将其放在您的 .profile 中。

请参阅[瑞士-德国布局](https://en.wikipedia.org/wiki/QWERTZ#/media/File:KB_Swiss.svg)以供参考

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-06T18:01:40.433

我有同样的问题，我解决了。就我而言，我正在映射键 CTRL + F10。所以我首先在 Vim 插入模式下按 CTRL + F10 看看键输出是什么。在我的情况下，`F36`我只是将它映射到 vimrc 文件中

`map <F36> <CR>YOUR COMMAND<CR>`

# r - 按组计算平均值

> ID：11562656
> 
> 赞同：85
> 
> 时间：2012-07-19T14:08:23.317
> 
> 标签：r, dataframe, r-faq

我有一个类似于此的大型数据框：

```
df <- data.frame(dive = factor(sample(c("dive1","dive2"), 10, replace=TRUE)),
                 speed = runif(10)
                 )
> df
    dive      speed
1  dive1 0.80668490
2  dive1 0.53349584
3  dive2 0.07571784
4  dive2 0.39518628
5  dive1 0.84557955
6  dive1 0.69121443
7  dive1 0.38124950
8  dive2 0.22536126
9  dive1 0.04704750
10 dive2 0.93561651 
```

我的目标是在另一列等于某个值时获得一列中值的平均值，并对所有值重复此操作。即在上面的示例中，我想为该列`speed`的每个唯一值返回该列的平均值`dive`。因此，当`dive==dive1`的平均值为`speed`的每个值时，依此类推`dive`。

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-07-19T14:18:59.393

在 R 中有很多方法可以做到这一点。具体来说，`by`, `aggregate`, `split`, 和`plyr`, `cast`, `tapply`, `data.table`, `dplyr`, 等等。

从广义上讲，这些问题的形式是拆分-应用-组合。Hadley Wickham 写了[一篇漂亮的文章](http://www.jstatsoft.org/v40/i01/paper)，可以让你更深入地了解整个问题类别，非常值得一读。他的`plyr`包实现了通用数据结构的策略，并且`dplyr`是针对数据帧调整的更新的实现性能。它们允许解决相同形式但比这更复杂的问题。作为解决数据操作问题的通用工具，它们非常值得学习。

性能在非常大的数据集上是一个问题，因此很难击败基于`data.table`. 但是，如果您只处理中型或更小的数据集，那么花时间学习`data.table`可能不值得。`dplyr`也可以很快，所以如果你想加快速度，但不太需要`data.table`.

下面的许多其他解决方案不需要任何额外的软件包。其中一些在中大型数据集上甚至相当快。它们的主要缺点是隐喻或灵活性之一。通过比喻，我的意思是它是一种工具，旨在强迫其他东西以“聪明”的方式解决这种特殊类型的问题。我所说的灵活性是指他们缺乏解决范围广泛的类似问题或轻松产生整洁输出的能力。

* * *

## 例子

### `base`功能

**`tapply`：**

```
tapply(df$speed, df$dive, mean)
#     dive1     dive2 
# 0.5419921 0.5103974 
```

**`aggregate`**：

`aggregate`接受data.frames，输出data.frames，并使用公式接口。

```
aggregate( speed ~ dive, df, mean )
#    dive     speed
# 1 dive1 0.5790946
# 2 dive2 0.4864489 
```

**`by`**：

在其最用户友好的形式中，它接受向量并将函数应用于它们。但是，它的输出不是一种非常易于操作的形式。：

```
res.by <- by(df$speed, df$dive, mean)
res.by
# df$dive: dive1
# [1] 0.5790946
# ---------------------------------------
# df$dive: dive2
# [1] 0.4864489 
```

为了解决这个问题，简单地使用库中`by`的`as.data.frame`方法`taRifx`可以工作：

```
library(taRifx)
as.data.frame(res.by)
#    IDX1     value
# 1 dive1 0.6736807
# 2 dive2 0.4051447 
```

**`split`**：

顾名思义，它只执行拆分-应用-组合策略的“拆分”部分。为了使其余的工作，我将编写一个`sapply`用于 apply-combine 的小函数。 `sapply`自动尽可能地简化结果。在我们的例子中，这意味着一个向量而不是一个 data.frame，因为我们只有一维的结果。

```
splitmean <- function(df) {
  s <- split( df, df$dive)
  sapply( s, function(x) mean(x$speed) )
}
splitmean(df)
#     dive1     dive2 
# 0.5790946 0.4864489 
```

* * *

### 外部包

**数据表**：

```
library(data.table)
setDT(df)[ , .(mean_speed = mean(speed)), by = dive]
#    dive mean_speed
# 1: dive1  0.5419921
# 2: dive2  0.5103974 
```

**`dplyr`**：

```
library(dplyr)
group_by(df, dive) %>% summarize(m = mean(speed)) 
```

**`plyr`**（的前身`dplyr`）

这是[官方页面](http://plyr.had.co.nz/)必须说的`plyr`：

> 已经可以使用`base`R 函数（如函数`split`和`apply`函数族）来做到这一点，但是通过以下方式`plyr`使这一切变得更容易：
> 
> *   完全一致的名称、参数和输出
> *   `foreach`通过包方便的并行化
> *   数据帧、矩阵和列表的输入和输出
> *   进度条以跟踪长时间运行的操作
> *   内置错误恢复和信息丰富的错误消息
> *   在所有转换中维护的标签

换句话说，如果您学习一种用于拆分-应用-组合操作的工具，它应该是`plyr`.

```
library(plyr)
res.plyr <- ddply( df, .(dive), function(x) mean(x$speed) )
res.plyr
#    dive        V1
# 1 dive1 0.5790946
# 2 dive2 0.4864489 
```

**重塑2**：

该`reshape2`库的设计并未将拆分应用组合作为其主要重点。相反，它使用两部分熔化/铸造策略来[执行各种数据重塑任务](http://www.jstatsoft.org/v21/i12/paper)。但是，由于它允许聚合函数，因此可以用于此问题。它不是我对拆分应用组合操作的首选，但它的重塑功能非常强大，因此您也应该学习这个包。

```
library(reshape2)
dcast( melt(df), variable ~ dive, mean)
# Using dive as id variables
#   variable     dive1     dive2
# 1    speed 0.5790946 0.4864489 
```

* * *

## 基准

### 10行，2组

```
library(microbenchmark)
m1 <- microbenchmark(
  by( df$speed, df$dive, mean),
  aggregate( speed ~ dive, df, mean ),
  splitmean(df),
  ddply( df, .(dive), function(x) mean(x$speed) ),
  dcast( melt(df), variable ~ dive, mean),
  dt[, mean(speed), by = dive],
  summarize( group_by(df, dive), m = mean(speed) ),
  summarize( group_by(dt, dive), m = mean(speed) )
)

> print(m1, signif = 3)
Unit: microseconds
                                           expr  min   lq   mean median   uq  max neval      cld
                    by(df$speed, df$dive, mean)  302  325  343.9    342  362  396   100  b      
              aggregate(speed ~ dive, df, mean)  904  966 1012.1   1020 1060 1130   100     e   
                                  splitmean(df)  191  206  249.9    220  232 1670   100 a       
  ddply(df, .(dive), function(x) mean(x$speed)) 1220 1310 1358.1   1340 1380 2740   100      f  
         dcast(melt(df), variable ~ dive, mean) 2150 2330 2440.7   2430 2490 4010   100        h
                   dt[, mean(speed), by = dive]  599  629  667.1    659  704  771   100   c     
 summarize(group_by(df, dive), m = mean(speed))  663  710  774.6    744  782 2140   100    d    
 summarize(group_by(dt, dive), m = mean(speed)) 1860 1960 2051.0   2020 2090 3430   100       g 

autoplot(m1) 
```

![基准 10 行](../Images/507d44e7ea3186eb53798e671299787a.png)

像往常一样，`data.table`有更多的开销，所以对于小型数据集来说大约是平均水平。不过，这些都是微秒，所以差异是微不足道的。任何方法在这里都可以正常工作，您应该根据以下条件进行选择：

*   您已经熟悉或想要熟悉的内容（`plyr`因其灵活性而始终值得学习；`data.table`如果您计划分析庞大的数据集，则值得学习；并且`by`都是基本 R 函数，因此普遍可用）`aggregate``split`
*   它返回什么输出（数字、data.frame 或 data.table——后者继承自 data.frame）

### 1000 万行，10 个组

但是如果我们有一个大数据集呢？让我们尝试将 10^7 行分成十个组。

```
df <- data.frame(dive=factor(sample(letters[1:10],10^7,replace=TRUE)),speed=runif(10^7))
dt <- data.table(df)
setkey(dt,dive)

m2 <- microbenchmark(
  by( df$speed, df$dive, mean),
  aggregate( speed ~ dive, df, mean ),
  splitmean(df),
  ddply( df, .(dive), function(x) mean(x$speed) ),
  dcast( melt(df), variable ~ dive, mean),
  dt[,mean(speed),by=dive],
  times=2
)

> print(m2, signif = 3)
Unit: milliseconds
                                           expr   min    lq    mean median    uq   max neval      cld
                    by(df$speed, df$dive, mean)   720   770   799.1    791   816   958   100    d    
              aggregate(speed ~ dive, df, mean) 10900 11000 11027.0  11000 11100 11300   100        h
                                  splitmean(df)   974  1040  1074.1   1060  1100  1280   100     e   
  ddply(df, .(dive), function(x) mean(x$speed))  1050  1080  1110.4   1100  1130  1260   100      f  
         dcast(melt(df), variable ~ dive, mean)  2360  2450  2492.8   2490  2520  2620   100       g 
                   dt[, mean(speed), by = dive]   119   120   126.2    120   122   212   100 a       
 summarize(group_by(df, dive), m = mean(speed))   517   521   531.0    522   532   620   100   c     
 summarize(group_by(dt, dive), m = mean(speed))   154   155   174.0    156   189   321   100  b      

autoplot(m2) 
```

![基准 1e7 行，10 组](../Images/65317286bb99efda01978077cb96d0cd.png)

然后`data.table`或`dplyr`使用对`data.table`s 进行操作显然是要走的路。某些方法（`aggregate`和`dcast`）开始看起来很慢。

### 1000 万行，1000 个组

如果您有更多组，则差异会变得更加明显。有**1,000 个组**和相同的 10^7 行：

```
df <- data.frame(dive=factor(sample(seq(1000),10^7,replace=TRUE)),speed=runif(10^7))
dt <- data.table(df)
setkey(dt,dive)

# then run the same microbenchmark as above
print(m3, signif = 3)
Unit: milliseconds
                                           expr   min    lq    mean median    uq   max neval    cld
                    by(df$speed, df$dive, mean)   776   791   816.2    810   828   925   100  b    
              aggregate(speed ~ dive, df, mean) 11200 11400 11460.2  11400 11500 12000   100      f
                                  splitmean(df)  5940  6450  7562.4   7470  8370 11200   100     e 
  ddply(df, .(dive), function(x) mean(x$speed))  1220  1250  1279.1   1280  1300  1440   100   c   
         dcast(melt(df), variable ~ dive, mean)  2110  2190  2267.8   2250  2290  2750   100    d  
                   dt[, mean(speed), by = dive]   110   111   113.5    111   113   143   100 a     
 summarize(group_by(df, dive), m = mean(speed))   625   630   637.1    633   644   701   100  b    
 summarize(group_by(dt, dive), m = mean(speed))   129   130   137.3    131   142   213   100 a     

autoplot(m3) 
```

![在此处输入图像描述](../Images/452608856b16d99c5e13207f42986061.png)

所以`data.table`继续很好地扩展，并且`dplyr`在 a 上运行也`data.table`很有效，但速度慢了一个数量级。/策略在组数上的扩展性似乎很差（这意味着可能很慢而很快）。 仍然是相对有效的——在 5 秒时，用户肯定会注意到它，但对于这么大的数据集仍然不是不合理的。尽管如此，如果您经常使用这种大小的数据集，显然是要走的路 - 100% data.table 以获得最佳性能或用作可行的替代方案。`dplyr``data.frame``split``sapply``split()``sapply``by``data.table``dplyr``dplyr``data.table`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-09-02T18:40:28.567

**2015 年 dplyr 更新：**

```
df %>% group_by(dive) %>% summarise(percentage = mean(speed))
Source: local data frame [2 x 2]

   dive percentage
1 dive1  0.4777462
2 dive2  0.6726483 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-19T14:18:54.917

```
aggregate(speed~dive,data=df,FUN=mean)
   dive     speed
1 dive1 0.7059729
2 dive2 0.5473777 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-07T21:45:54.840

添加替代基础 R 方法，在各种情况下保持快速。

```
rowsummean <- function(df) {
  rowsum(df$speed, df$dive) / tabulate(df$dive)
} 
```

借用@Ari 的基准：

**10行，2组**

[![资源1](../Images/9e65202c56e3d686a358c45707154f74.png)](https://i.stack.imgur.com/BnMPr.png)

**1000 万行，10 个组**

[![资源2](../Images/4593425231a69bc0f4b54c114964eb15.png)](https://i.stack.imgur.com/S7x5c.png)

**1000 万行，1000 个组**

[![水库3](../Images/4b7c1d13a7a15eec5daec8b2e16fb69e.png)](https://i.stack.imgur.com/QULfL.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-03T10:08:45.170

我们已经有大量的选项来按组获取平均值，从`mosaic`包中再添加一个。

```
mosaic::mean(speed~dive, data = df)
#dive1 dive2 
#0.579 0.440 
```

这将返回一个命名的数字向量，如果需要一个数据框，我们可以将它包装在`stack`

```
stack(mosaic::mean(speed~dive, data = df))

#  values   ind
#1  0.579 dive1
#2  0.440 dive2 
```

**数据**

```
set.seed(123)
df <- data.frame(dive=factor(sample(c("dive1","dive2"),10,replace=TRUE)),
                 speed=runif(10)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-17T18:19:56.467

使用`collapse`

```
library(collapse)
library(magrittr)
df %>% 
   fgroup_by(dive) %>%
   fsummarise(speed = fmean(speed))
#   dive     speed
#1 dive1 0.5788479
#2 dive2 0.4401514 
```

### 数据

```
set.seed(123)
df <- data.frame(dive=factor(sample(c("dive1","dive2"),10,replace=TRUE)),
             speed=runif(10)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-15T18:40:19.387

有了新功能`across`：

```
df %>% 
  group_by(dive) %>% 
  summarise(across(speed, mean, na.rm = TRUE)) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-18T09:07:24.930

RCchelsie 提供的扩展答案 - 如果有人想按组计算数据框中所有列的平均值：

```
df %>% 
  group_by(dive) %>% 
  summarise(across(.cols=everything(), mean, na.rm=TRUE)) 
```

# xquery - 如何在 Marklogic Server 中下载文档？

> ID：11562657
> 
> 赞同：1
> 
> 时间：2012-07-19T14:08:25.520
> 
> 标签：xquery, marklogic

我想编写一个 xquery，它将下载并保存在 Marklogic Server 中的上传文档。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T17:26:12.297

请参阅[http://developer.marklogic.com/pubs/5.0/apidocs/AppServerBuiltins.html#xdmp:get-request-field](http://developer.marklogic.com/pubs/5.0/apidocs/AppServerBuiltins.html#xdmp:get-request-field)，其中有以下示例

考虑一个具有以下内容的 form.xqy XQuery 模块：

```
<html xmlns="http://www.w3.org/1999/xhtml">
  <body>
  <form name="test" action="upload.xqy?uid={xdmp:random()}" method="post"
        enctype="multipart/form-data">
  <p><label>File to upload:
  <input type="file" class="name" name="upload" size="50"/></label></p>
  <p><input type="submit" value="Upload and Get Results"/></p>
  </form>
  </body>
</html> 
```

然后有一个 upload.xqy XQuery 模块，如下所示：

```
let $filename := xdmp:get-request-field-filename("upload")
let $disposition := fn:concat("attachment; filename=""",$filename,"""")
let $x := xdmp:add-response-header("Content-Disposition", $disposition)
let $x:= xdmp:set-response-content-type(
         xdmp:get-request-field-content-type("upload"))
return
xdmp:get-request-field("upload") 
```

执行form.xqy文件，选择一个文件，点击“上传并获取结果”按钮。您上传的文件将根据浏览器的 mime 类型打开。如果您想将其保存到数据库中，您可以使用 xdmp:document-insert 来执行此操作。

还有额外的工作来支持分段上传。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T17:24:51.047

使用[xdmp:add-response-header](http://developer.marklogic.com/pubs/5.0/apidocs/AppServerBuiltins.html#xdmp%3aadd-response-header)。

```
 let $uri := xdmp:get-request-field('uri', '')
 let $filename := fn:tokenize($uri, "/")[fn:last()]
 return 
 (
     xdmp:add-response-header("Content-Disposition", fn:concat("attachment; filename=", $filename)),
     fn:doc($uri)
 ) 
```

# php - jQuery 表格排序器

> ID：11562661
> 
> 赞同：0
> 
> 时间：2012-07-19T14:08:37.953
> 
> 标签：php, jquery, tablesorter

我正在使用位于[此处](http://tablesorter.com/docs/)的 jQuery 表格排序器，它没有对我的表格进行排序。我在一个简单的测试页面上使用了完全相同的代码，它没有问题。如果有人能指出我的代码中可能导致我的问题的原因，那就太好了。

这是调用JS文件的代码，路径是正确的。

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="../css/style.css" />
<script type="text/javascript" src="../js/jquery-latest.js"></script> 
<script type="text/javascript" src="../js/jquery.tablesorter.js"></script>
</head> 
```

这是我的代码片段，其中包含需要排序的表。

```
<div id="roster">
<?php
$guildRealm = "taken out";
$guildName = "taken out";

$json = file_get_contents("http://us.battle.net/api/wow/guild/".$guildRealm."/".$guildName."?fields=members");
$json= json_decode($json);
$name = $json->name;
$level = $json->level;
$achievementPoints = $json->achievementPoints;

?>

<span class="h2"><?php echo $name; ?></span><br />
<span class="h4">Level: <?php echo $level; ?></span><br />
<span class="h5"><img src="images/guild_achievement_icon.png" width="38" height="32">    </span><span class="AP"><?php echo $achievementPoints; ?></span><br />
<table id="gRoster" class="tablesorter" width="100%" cellspacing="0">
<thead>
<tr class="roster-header">
    <th width="5%"></th>
    <th align="left">Name</th>
    <th align="center">Rank</th>
    <th align="center">Level</th>
    <th align="center">Class</th>
    <th align="center">Race</th>
    <th align="center">Achievement Points</th>
</tr>
</thead>

<?php
$count = 0;

foreach($json->members as $p) {
    $mrank = $p->rank;
    $mname = $p->character->name;
    $mclass = $p->character->class;
    $mrace = $p->character->race;
    $mgender = $p->character->gender;
    $mlevel = $p->character->level;
    $mthumb = $p->character->thumbnail;
    $machievement = $p->character->achievementPoints;
    $colour = "default";
    $mraceImage = "images/inv_misc_questionmark.jpg";
    $mclassImage = "images/inv_misc_questionmark.jpg";
    $mgrank = "";

    // Alot of if statements go here that just display how some of the content is display, already tested and they do not cause the problem.

    if ($count%2==0) {
        echo "<tbody>";
        echo "<tr class=\"even\">";
        echo "<td class=\"roster-avatar\"><img src=\"http://us.battle.net/static-render/us/".$mthumb."?alt=/wow/static/images/2d/avatar/".$mrace."-".$mgender.".jpg\" width=\"40\" height=\"40\" class=\"".$colour."\"></td>";
        echo "<td class=\"roster-name\"><span class=\"".$colour."\">".$mname."</span></td>";
        echo "<td align=\"center\">".$mgrank."</td>";
        echo "<td align=\"center\">".$mlevel."</td>";
        echo "<td align=\"center\"><img src=\"".$mclassImage."\" /></td>";
        echo "<td align=\"center\"><img src=\"".$mraceImage."\" /></td>";
        echo "<td align=\"center\">".$machievement."</td>";
        echo "</tr>";
        echo "</tbody>";
    } else {
        echo "<tbody>";
        echo "<tr class=\"odd\">";
        echo "<td class=\"roster-avatar\"><img src=\"http://us.battle.net/static-render/us/".$mthumb."?alt=/wow/static/images/2d/avatar/".$mrace."-".$mgender.".jpg\" width=\"40\" height=\"40\" class=\"".$colour."\"></td>";
        echo "<td class=\"roster-name\"><span class=\"".$colour."\">".$mname."</span></td>";
        echo "<td align=\"center\">".$mgrank."</td>";
        echo "<td align=\"center\">".$mlevel."</td>";
        echo "<td align=\"center\"><img src=\"".$mclassImage."\" /></td>";
        echo "<td align=\"center\"><img src=\"".$mraceImage."\" /></td>";
        echo "<td align=\"center\">".$machievement."</td>";
        echo "</tr>";
        echo "</tbody>";
    }
    $count++;
}
?>
</table>

<script type="text/javascript">
$(document).ready(function() 
    { 
        $("#gRoster").tablesorter();
    } 
); 
</script>
</div><!--- roster ---> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:15:53.860

我看到两种可能性：

1.  你创造了不止一个块
2.  您的变量不是 HTML 安全的（例如 $machievement 可能包含与 HTML 相关的字符）-您至少应该使用 htmlspecialchars()

# c++ - 有没有办法在 Eclipse 中为 C++ 启用“步入选择”？

> ID：11562665
> 
> 赞同：4
> 
> 时间：2012-07-19T14:08:47.360
> 
> 标签：c++, eclipse, debugging

Windows 上的 Visual Studio C++ 中有非常方便的“步入特定”功能。我听说在 Eclipse 中可以为 Java 找到类似的“步入选择”功能。Ubuntu 上的 Eclipse CDT (C++) 有类似的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T12:26:29.770

我不太确定“步入选择”是什么意思，但我可以告诉您 Eclipse IDE（我将它用于 Java，但相信它为 C++ 提供了相同的功能）允许您在调试期间执行以下操作

*   走过去，一行一行。但是请注意，如果您在函数调用中有一个函数调用，这将计为“行”，因此您可以按预期执行两次
*   走出去。执行此块的其余部分，通常导致执行函数的其余部分
*   踏进。这就是我认为您正在讨论的内容，这将进入函数调用，因此您可以单步执行该函数的各个行
*   运行选择。这使您可以让程序正常执行并再次停在光标所在的位置（可以通过右键菜单访问该程序）

我希望我已经理解您的要求，如果您需要我更好地解释任何事情，请发表评论。

根据来自 OP 的额外信息，我相信答案是否定的。Eclipse 在调试器中不支持此功能

有导航代码库的功能，“F3”默认用于跳转到函数的实现。同样，我在这里谈论的是 Eclipse for Java。不确定它在调试期间是否有效，但您可以使用它导航到相关函数的源代码，然后右键单击并选择“运行到此处”。虽然诚然不如 VS 听起来那么好，但它可能只是最好的选择。假设它确实有效，那就是

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T12:36:38.557

不，它没有在 Eclipse IDE 调试器中实现。

# python - RegEx Perl 语法到 Python

> ID：11562668
> 
> 赞同：1
> 
> 时间：2012-07-19T14:08:49.573
> 
> 标签：python, regex

我正在尝试匹配 HTTP GET 请求中的 jpeg 图像。

例如在：

```
GET /category/catpic.jpg HTTP/1.1 
```

正则表达式应该返回：`catpic`

我设法在 Perl 语法中获得了一个运行良好的 RegEx：

```
/(?<=\/)[^(\/)]+(?=(\.jpg HTTP))/g 
```

但我对 Python 的了解还不够，无法将其转换为 Perl 语法。

*   任何人都可以帮我在 Python RegEx 中转换这个 Perl RegEx 吗？

先感谢您 ！

编辑：对不起，我解释错了。我想匹配 HTTP GET 请求中的任何 .jpg 图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T14:15:29.020

只需将 Perl 中斜线之间的内容放入原始字符串`r"(?<=\/)[^(\/)]+(?=(\.jpg HTTP))"`并将其传递给`re`模块中的适当函数即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:11:50.133

使用这个正则表达式`(?<=category/)(.+?)(?=\.jpg HTTP)`

# javascript - 如何在 HTML5 中旋转带有形状的画布。？

> ID：11562670
> 
> 赞同：0
> 
> 时间：2012-07-19T14:08:53.913
> 
> 标签：javascript, html

我有画布，我在上面绘制一些 HTM5 形状（使用 context.fiiRect(x,y,w,h)、context.strokeRect(x,y,w,h) 等）。我想将包括画布在内的所有形状旋转 90 度。画布正在旋转，但形状仍然在同一位置.... 我怎样才能为画布和形状做这件事。

**编辑**

HTML 代码：-

```
<body onload="draw();">
    <img style='display:none;'id='image' src="Robot.jpg"/>
    <canvas id="canvas" width="900" height="600" ></canvas>
    <canvas id="annCanvas" width="900" height="600" ></canvas>
    <div id="annoatation" >
       <input type="button" value="90°" onclick="rotate(90);">
    </div>
</body> 
```

CSS 代码：-

```
#annoatation
{
  position: absolute;
}
#canvas
{
border: 1px solid black;
position: absolute;
}
#annCanvas
{
position: absolute;
} 
```

JAVA脚本代码：-

```
function rotate(val)
{
    var image = document.getElementById('image');
    var canvas = document.getElementById('canvas');
    var canvasContext = canvas.getContext('2d');

    canvas.setAttribute('width', image.height);
    canvas.setAttribute('height', image.width);
    canvasContext.rotate(90 * Math.PI / 180);
    canvasContext.drawImage(image, 0, -image.height);

    canvasContext.beginPath();
    canvasContext.strokeRect(50,50,200,200);
    canvasContext.stroke();

}
function draw()
{
    var canvas = document.getElementById('canvas');
    var canvasContext = canvas.getContext('2d');
    var image1=new Image();
    image1.onload = function()
    {
        canvasContext.drawImage(image,0,0,canvas.width,canvas.height);
        canvasContext.beginPath();
        canvasContext.lineWidth=4;
        canvasContext.strokeRect(50,50,200,200);
        canvasContext.stroke();
    }
    image1.src='Robot.jpg';
} 
```

我想将矩形旋转到与 0 度角相同的位置。

# amazon-web-services - 关于 Amazon Web Services，什么是引导卷？

> ID：11562675
> 
> 赞同：2
> 
> 时间：2012-07-19T14:09:14.283
> 
> 标签：amazon-web-services, amazon-ebs

关于 Amazon Web Services，什么是“引导卷”？它与其他卷有什么不同？“启动卷”是亚马逊使用的标准术语吗？

Amazon Elastic Block Storage 是否始终用作“启动卷​​”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:43:15.183

启动卷本质上是实例用来利用操作系统代码和其他文件和应用程序的工作存储。

弹性块存储 (EBS) 是一种提供此启动卷以供您的实例使用的方式。另一种方法是使用“实例存储”，尽管现在可能不那么流行了。

EBS 很好，因为它与您的实例的处理方面是分开的，您可以有效地解除 EBS 卷与您的实例的关联，并根据您的喜好关联一个不同的卷。

EBS 并不总是用作引导卷，但需要它的 Micro EC2 实例除外。对于所有其他实例大小 IIRC，您可以在 EBS 或实例存储之间进行选择。EBS 在许多方面都非常出色，最重要的是上述能够断开卷并且即使您终止实例也使其保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T17:44:31.133

在 AWS 中，引导卷通常被称为“根设备”。它类似于标准计算机中的操作系统分区。在谈论在 AWS 中导入/导出 VM 映像时，术语“引导卷”似乎更受欢迎，可能是因为“根设备”是 AWS 特定的，而“引导卷”更通用。从 AWS 导出 VM 时，只会导出引导卷，不会导出额外的 EBS 设备。

[您可以在AWS EC2 常见](http://aws.amazon.com/ec2/faqs/)问题解答中找到更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T17:52:40.700

Amazon Elastic Block Storage (EBS) 并不总是用作“启动卷​​”。亚马逊所谓的“本地实例存储”可用于启动卷。此磁盘空间是短暂的（在机器关闭时丢失），但大多数 EC2 实例可以使用此本地实例存储通过操作系统映像启动。

# java - 我每天可以使用谷歌应用引擎发送多少封邮件？

> ID：11562685
> 
> 赞同：0
> 
> 时间：2012-07-19T14:09:35.740
> 
> 标签：java, google-app-engine

我找到：

[https://developers.google.com/appengine/docs/quotas#Mail](https://developers.google.com/appengine/docs/quotas#Mail)

但是我真的看不到使用 JAVA Api 可以发送多少邮件？

所以 5000 封邮件有 100 个收件人？

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:39:41.740

**未计费用户：**

*   每天最多可以向 100 个非管理员收件人发送电子邮件。
*   每天最多可以向 5000 名管理员收件人发送电子邮件。

换句话说：每天 100 封电子邮件给一位非管理员收件人或每天一封电子邮件给 100 位收件人加上每天 5000 封电子邮件给一位管理员收件人。

**计费用户：**

*   可以向 100 个非管理员收件人发送电子邮件，直到第一次收费被清除；然后是 100 个免费的非管理员收件人，此后没有上限。
*   可以向 3 000 000 个管理员收件人发送电子邮件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T15:55:10.363

更好的选择是将 Amazon SES 用于邮件服务，因为您不会从 GAE 邮件服务中收到任何投递费用。“Amazon SES 提供了一个内置的反馈循环，其中包括退回通知、失败和成功的交付尝试以及垃圾邮件投诉。”

# http - 用于过滤目标源 IP 地址和协议的 Wireshark 过滤器

> ID：11562690
> 
> 赞同：11
> 
> 时间：2012-07-19T14:09:42.880
> 
> 标签：http, networking, wireshark, sniffer

我想根据源、目标 IP 地址和协议的过滤器组合过滤 Wireshark 的监控结果。因此，现在我可以使用以下过滤器表达式过滤出目标和源 IP 地址的活动：(ip.dst == xxx.xxx.xxx.xxx && ip.src == xxx.xxx.xxx. xxx) || (ip.dst == xxx.xxx.xxx.xxx && ip.src == xxx.xxx.xxx.xxx)

这给了我 2 个 IP 地址的请求响应活动，这两个 IP 地址都是目标和源，这取决于它是请求还是响应。但是现在，我得到了 HTTP 和 TCP 的结果。我只想查看 HTTP 的结果。

任何建议如何做到这一点？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-19T14:14:59.987

(ip.dst == xxx.xxx.xxx.xxx && ip.src == xxx.xxx.xxx.xxx) || (ip.dst == xxx.xxx.xxx.xxx && ip.src == xxx.xxx.xxx.xxx) && http

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T14:08:32.793

我喜欢单个主机的 (ip.addr==XXX.XXX.XXX.XXX && http)。您也可以为两个主机执行 (ip.addr==XXX.XXX.XXX.XXX 或 XXX.XXX.XXX.XXX && http)。

# timeout - 谷歌地球 fetchKml 超时

> ID：11562694
> 
> 赞同：2
> 
> 时间：2012-07-19T14:09:50.770
> 
> 标签：timeout, kml, large-files, google-earth-plugin

我通过javascript调用goolge earth api函数'fetchKml'。获取大文件时，firefox 给我一个弹出窗口，上面写着“此页面上的脚本可能正忙，或者它可能已停止响应。您可以立即停止脚本，在调试器中打开脚本，或让脚本继续运行。”

我注意到关于 google groups issue 331 的类似问题（'fetchKml 在较慢的连接或快速连接和大型 KML/KMZ 文件时失败'）。唉 - 这个问题是在 2009 年。现在是 2012 年。如何在不出现超时问题的情况下以编程方式加载文件？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T23:22:01.993

根本原因是[fetchKml](https://developers.google.com/earth/documentation/reference/google_earth_namespace#afca518f43d5f863b254c5fa23a5967f2)是同步的。它将一直阻塞，直到通过网络获取、解析 KML 文件并将其指定的内容加载到插件中。如果其中任何一个步骤耗时过长（服务器响应慢、文件很大、内容过于复杂）等函数调用耗时过长，则会触发浏览器中的慢脚本警告，通常只是在一个简单的基于时间的看门狗循环上触发。

有几种方法可以解决这个问题：

*   最简单的方法是将您的内容拆分为几个单独的 KML 文件并加载每个文件，可能会`setTimeout`在每次`fetchKml()`调用之间产生一个中间值。如果您的主要问题是延迟，这将无济于事，但既然您说这是发生在大型 KML 文件中，那么这里可能不是这种情况。

*   惯用的方法是在您的 KML 中使用[NetworkLinks](https://developers.google.com/kml/documentation/kmlreference#networklink)来加载这些其他文件。第一次`fetchKml`调用将是同步的，但随后（取决于如何设置[更新机制](https://developers.google.com/kml/documentation/updates)）后续内容将由插件在其自己的时间加载，而不会阻塞 javascript 执行线程。

*   最后，还有一种“亲自动手”的方式。您可以使用浏览器的本机`XMLHttpRequest`功能来加载默认情况下异步的 KML 文件。当文件被加载时，你的回调函数会被通知，然后你可以使用 [parseKml()](https://developers.google.com/earth/documentation/reference/interface_g_e_plugin#acd35e260277fb0ffb86b5b2a962551da)在插件中加载该文件并显示其内容。请注意，这`parseKml`也是同步的，因此在解析文件和创建内容时它会阻塞，但与首先下载文件相比，这通常是一个非常快的步骤。

# c# - 获取上次重启时间

> ID：11562699
> 
> 赞同：8
> 
> 时间：2012-07-19T14:09:56.813
> 
> 标签：c#, date

> **可能重复：**
> [显示构建日期](https://stackoverflow.com/questions/1600962/displaying-the-build-date)
> [如何知道 Windows 何时启动或关闭？](https://stackoverflow.com/questions/7407286/how-to-know-when-was-windows-started-or-shutdown)

出于我的目的，我正在编写一个 C# 可执行文件，它将计算现在时间和服务器上次重新启动时间的时间差（分钟）。

我现在正在做的是捕获和解析来自 cmd -> "net stats server" 的输出并创建一个新`DateTime`对象，然后将其`DateTime.Now`与一个`TimeSpan`对象进行比较。

有没有更简洁的方法可以在**不使用 3rd 方下载的情况下**做到这一点？我担心并非“网络统计服务器”中的所有日期格式都符合我的预期。

**编辑我的错误，这是重复的，但值得我的解决方案是使用这个：

```
float ticks = System.Environment.TickCount;
Console.WriteLine("Time Difference (minutes): " + ticks / 1000 / 60);
Console.WriteLine("Time Difference (hours): " + ticks / 1000 / 60 / 60);
Console.WriteLine("Time Difference (days): " + ticks / 1000 / 60 / 60 / 24); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-19T14:13:09.193

[这个答案](https://stackoverflow.com/a/972189/237917)应该对您有所帮助。如果您想知道系统上次重新启动的时间，只需获取正常运行时间值并从当前日期/时间中减去它

**来自链接答案的代码**

```
public TimeSpan UpTime {
    get {
        using (var uptime = new PerformanceCounter("System", "System Up Time")) {
            uptime.NextValue();       //Call this an extra time before reading its value
            return TimeSpan.FromSeconds(uptime.NextValue());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:12:33.250

您可以使用其中的 WMI 使用 powsershell 执行此操作

```
$wmi = Get-WmiObject -Class Win32_OperatingSystem -Computer "RemoteMachineName"
$wmi.ConvertToDateTime($wmi.LastBootUpTime) 
```

像这样的东西...

如果您决定采用这条路线并想了解更多关于使用 WMI 的 powershell 的信息，这是一个非常有用的链接[http://www.powershellpro.com/powershell-tutorial-introduction/powershell-wmi-methods/](http://www.powershellpro.com/powershell-tutorial-introduction/powershell-wmi-methods/)

# c# - 通过IIS访问wcf服务和路由

> ID：11562700
> 
> 赞同：1
> 
> 时间：2012-07-19T14:09:58.963
> 
> 标签：c#, wcf, iis

我有一个作为 Windows 服务运行的 wcf 自托管服务，为本地网络中的多个 win/web 客户端提供服务。服务本身有多个合同（tcp 和命名管道），其中一个应通过 IIS（任何形式的 http 绑定）提供，以便可以从外部访问它，例如只需访问 www.mypublicdomain.com/public-contract。服务端

当前拓扑：

*   服务器应用程序 - wcf windows 服务
*   客户端 app1 - win forms app - 通过 tcp/ip 联系服务器应用
*   客户端 app2 - mvc Web 应用程序（通过公共域在内部和通过 Internet 都可用） - 通过命名管道联系服务器应用程序（同一台机器）
    *   此应用程序托管在 iis7 上，新的公共 wcf 合同应作为其中的一部分公开。
*   共享程序集 - 包含接口（服务合同）

问题是 - 通过 IIS 公开 windows 服务上的合同之一的最佳方式是什么，因此对该公开可用服务的所有请求都将直接路由到后端 windows 服务。

我对stackoverflow的第一个问题，如果有不清楚的地方，我会尝试进一步解释。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:18:58.787

如果您使用的是 IIS 7，那么您可以在 IIS 中托管 wcf 服务，并使用 HTTP 绑定公开一个服务合同，并将另一个非公共服务合同公开为 TCP-IP。

如果您必须将服务器应用程序托管为 Windows 服务，则创建一个新的 IIS 托管服务，该服务与您希望公开的服务合同具有相同的接口，但只是传递调用。

# python - 用于为所有外部链接添加 relnofollow 的 Django 中间件

> ID：11562701
> 
> 赞同：1
> 
> 时间：2012-07-19T14:10:04.460
> 
> 标签：python, django, nofollow

我正在尝试使用 rel="nofollow" 参数关闭所有外部网址：

我写了这个简单的中间件：

```
import re

NOFOLLOW_RE = re.compile(u'<a (?![^>]*rel=["\']nofollow[\'"])'\
                         u'(?![^>]*href=["\']mysite\.com[\'"])',
                         re.UNICODE|re.IGNORECASE)

class NofollowLinkMiddleware(object):

    def process_response(self, request, response):
        if ("text" in response['Content-Type']):

            response.content = re.sub(NOFOLLOW_RE, u'<a rel="nofollow" ', response.content.decode('UTF8') )
            return response
        else:
            return response 
```

它可以工作，但会关闭所有内部和外部链接。而且我不知道如何添加 <noindex></noindex> 标记来链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T15:24:24.403

起初，您忘记了“http://”和 url 路径。所以，你的正则表达式应该是：

```
NOFOLLOW_RE = re.compile(u'<a (?![^>]*rel=["\']nofollow[\'"])'\
                         u'(?![^>]*href=["\']http://mysite\.com(/[^\'"]*)?[\'"])',
                         re.U|re.I) 
```

然后，您还需要考虑以“/”和“#”开头的 href 作为内部链接：

```
NOFOLLOW_RE = re.compile(u'<a (?![^>]*rel=["\']nofollow[\'"])'\
                         u'(?![^>]*href=["\'](?:https?://mysite\.com(?:/[^\'"]*)|/[^\'"]*|#[^\'"]*)[\'"])',
                         re.U|re.I) 
```

此外，您可能希望考虑 3 级域和“https://”协议。

对于 <noindex> 标签，您可以使用组，请查看[Python 文档中的 re.sub()](http://docs.python.org/library/re.html#re.sub)：

```
NOFOLLOW_RE = re.compile(u'<a (?P<link>(?![^>]*rel=["\']nofollow[\'"])'\
                         u'(?![^>]*href=["\'](?:https?://mysite\.com(?:/[^\'"]*)|/[^\'"]*|#[^\'"]*)[\'"]).*?</a>)',
                         re.U|re.I)
...
response.content = NOFOLLOW_RE.sub(u'<noindex><a rel="nofollow" \g<link></noindex>', your_html) 
```

这个正则表达式很古怪。我强烈建议您为它编写一个测试，使用 <a> 标记的所有可能组合以及您可以想象的属性。如果之后你在这段代码中发现了一些问题，测试将帮助你不要破坏一切。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-25T21:38:11.273

我知道我很晚了，但我正在为其他人留下答案。@HighCat 对所有案例都给出了正确的答案，除了一个。上面的正则表达式还将nofollow添加到链接[http://example.com](http://example.com)

所以在这种情况下正则表达式应该是 =>

```
import re

NOFOLLOW_RE = re.compile(u'<a (?P<link>(?![^>]*rel=["\']nofollow[\'"])'\
                         u'(?![^>]*href=["\'](?:https?://example\.com/?(?:[^\'"]*)|/[^\'"]*|#[^\'"]*)[\'"]).*?</a>)',
                         re.U|re.I)

class NofollowLinkMiddleware(object):

    def process_response(self, request, response):
        if ("text" in response['Content-Type']):

            response.content = NOFOLLOW_RE.sub(u'<a rel="nofollow" target="_blank" \g<link>', response.content.decode('UTF8') )
            return response
        else:
            return response 
```

^(这是微小的变化。我应该评论或编辑，但我没有足够的声誉（评论），编辑也需要 6+ 字符更改。)

# php - 减少阵列深度

> ID：11562713
> 
> 赞同：0
> 
> 时间：2012-07-19T14:10:28.933
> 
> 标签：php, arrays

我有一个来自键值表的数组，看起来像这样（直接来自数据库）：

```
$application_strings = array(
    array('key' => 'building_type', 'value' => 'Building Type'),
    array('key' => 'application', 'value' => 'Application'),
);
/* would print_r like so:
Array(
    [0] => Array([key] => 'building_type', [value] => 'Building Type'),
    [1] => Array([key] => 'application', [value] => 'Application')
)
*/ 
```

并想将其转换为类似

```
$strings = array(
    'building_type' => 'Building type',
    'application' => 'Application',);
/* would print_r like so:
Array(
    [building_type] => 'Building Type',
    [application] => 'Application'
)
*/ 
```

我目前的方法如下所示：

```
$strings_statement = DB::getDB()->prepare(
    "SELECT `key`, `value` FROM `strings` 
     WHERE `lang` = (SELECT `lang` FROM `sites` WHERE `key`=:key)");
$strings_statement->execute(array(':key' => 12345));
$application_strings = $strings_statement->fetchAll(PDO::FETCH_ASSOC);
$strings = array();
foreach($application_strings as $string) {
    $strings[$string['key']] = $string['value'];
} 
```

这可以做得更短/更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:34:29.990

```
$application_strings = array(
  array('key' => 'building_type', 'value' => 'Building Type'),
  array('key' => 'application', 'value' => 'Application'),
);

$output = array();
array_map(function($x) use (&$output) {
     $output[$x['key']] = $x['value']; 
}, array_values($application_strings)); 
```

如果您不想要循环，我想出的解决方案是类似于丹尼尔的回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T15:22:42.750

添加其他答案，因为第一个使用 array_map 来转换当前数组，但这不仅仅是转换数组（我第一次没有抓住它），而是将某种数组转换/合并为某种“目的”。

所以，array_map 并不是越快，而是越快进入 Array 的函数就是 array_walk：

```
$application_strings = array(
    array('key' => 'building_type', 'value' => 'Building Type'),
    array('key' => 'application', 'value' => 'Application'),
);
$strings = array();
array_walk ($application_strings, function ($row) use(&$strings) {
  $strings[ $row['key'] ] = $row['value'] ;
}, $strings);
echo '<pre>';
print_r( $strings );
echo '</pre>'; 
```

输出：

```
Array
(
    [building_type] => Building Type
    [application] => Application
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-12T21:45:01.403

从 PHP5.5 开始，解决方案是[array_column](http://php.net/manual/de/function.array-column.php)：

```
$application_strings = [
    [
        'key' => 'building_type',
        'value' => 'Building Type'
    ],
    [
        'key' => 'application',
        'value' => 'Application'
    ],
];  
$output = array_column($application_strings, 'value', 'key');
print_r($output); 
```

给出：

```
Array
(
    [building_type] => Building Type
    [application] => Application
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T14:29:18.033

这是一个数组映射，试试这个：

```
$application_strings = array(
    array('key' => 'building_type', 'value' => 'Building Type'),
    array('key' => 'application', 'value' => 'Application'),
);
function transform($row){
  return array( $row['key'] => $row['value'] );
}
$strings = array_map ('transform', $application_strings);
echo '<pre>';
print_r( $strings );
echo '</pre>'; 
```

这给

```
Array(
    [0] => Array([building_type] => 'Building type'),
    [1] => Array([application] => 'Application')
) 
```

# android - Android编程和不同版本之间的兼容性

> ID：11562717
> 
> 赞同：1
> 
> 时间：2012-07-19T14:10:45.593
> 
> 标签：android, compatibility, android-4.0-ice-cream-sandwich, android-2.3-gingerbread

您好，我刚刚对不同版本的 Android 之间的兼容性及其工作方式有疑问。我最近开始了 Android 编程，并一直在为 Ice Cream Sandwich 4.0.2 开发一个应用程序，这是我正在使用的源。现在，在这个项目完成一半的时候，我开始怀疑这是否适用于较低版本的 Android，比如 Gingerbread。从我的猜测来看，我认为它不会起作用。我怎样才能使它与 Gingerbread 兼容并且仍然使用 Ice Cream Sandwich 附带的功能，例如 Action Overflow 或任何所谓的 Holo 主题。我是否制作了我的应用程序的 2 个版本，或者是否有某种方法可以让应用程序通过条件来确定手机或平板电脑正在运行的 Android 版本并从那里开始？先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:12:35.673

您可以使您的应用程序与它兼容，`Gingerbread`这将适用于 Gingerbread 以及`Ice Cream Sandwich`

Android 提供**前向兼容性。**

如果您在较低版本中开发了您的应用程序，那么它肯定可以在上述版本上运行。

要检测当前版本，请参阅[此](https://stackoverflow.com/a/3940823/1289716)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:17:12.153

您仍然可以在一个应用程序中包含所有内容。除非您自己自定义皮肤，否则您可能不一定能够在 Gingerbread 上使用 Holo 主题。至于处理不同的功能，我会读到：

[http://developer.android.com/training/basics/supporting-devices/platforms.html](http://developer.android.com/training/basics/supporting-devices/platforms.html)

此外，兼容性库将成为您的朋友。我会研究 V4 支持库以及 ActionBarSherlock。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T14:19:42.093

是的，您绝对可以创建一个可在多个 Android 版本上运行的应用程序。正如您可能想象的那样，您必须将大部分代码编写到您想要支持的最旧版本的 Android 上。您想从较新版本中使用的任何功能都必须经过仔细考虑。对于某些功能，您可以选择仅在较新版本的操作系统上支持它们（例如，当它们真的只有意义或真的只有在最新的硬件上才有可能时）。对于其他功能，您需要研究在旧平台上复制所需行为的方法（例如 ActionBar、Fragments、Animators）。

有很多资源可用于帮助实现向后兼容性。特别是，您可能想看看这些：

1.  [支持库](http://developer.android.com/tools/extras/support-library.html)
2.  [动作栏夏洛克](http://actionbarsherlock.com/)
3.  [九老机器人](http://nineoldandroids.com/)

# jquery - jquery asp.net webservice调用不起作用

> ID：11562720
> 
> 赞同：0
> 
> 时间：2012-07-19T14:11:01.643
> 
> 标签：jquery, asp.net, ajax

我正在尝试调用 Web 服务，但总是出现错误，警报错误显示“未定义”

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public static string Test()
{            
    JavaScriptSerializer js = new JavaScriptSerializer(); 
    return js.Serialize("Hello");
} 
```

这是脚本

```
$.ajax({ type: "POST",

    contenttype: "application/json; charset=utf-8",
    data: "{}",
    url: "WorkflowAjaxHelper.asmx/Test",
    dataType: "json",
    async: false,

    success: function (res) {
        alert('success');
    },

    error: function (err) {
        alert(err.text);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:27:52.177

Text is not valid on the error object. You could use, any of the following, to get more info:

```
responseText 
status 
statusText 
```

Leverage the debuggers built into Chrome, IE, or Firefox to help debug. You can also console.log an object and chrome and firefox are nice enough to let you click through the object model to see what is available.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:34:54.517

Jorge，您的 .asmx.cs 文件的顶部是否具有以下属性？

```
 /// <summary>
    /// Summary description for PartServices
    /// </summary>
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 

    // This bit here!!!

    [System.Web.Script.Services.ScriptService]
    public class PartServices : System.Web.Services.WebService 
```

# python - site.addsitedir 不会将鸡蛋添加到 sys.path

> ID：11562721
> 
> 赞同：0
> 
> 时间：2012-07-19T14:11:03.177
> 
> 标签：python, pythonpath

我有一个由 distutils 打包的 python 模块到一个安装在自定义前缀中的压缩鸡蛋中。如果我将 PYTHONPATH 设置为包含该前缀的站点包目录，则会将 egg 添加到 sys.path 并且可以导入模块。但是，如果我从脚本中使用前缀的站点包目录运行 site.addsitedir，则不会将鸡蛋添加到 sys.path 并且模块导入失败。在这两种情况下，模块的站点包目录都以 sys.path 结尾。

这是预期的行为吗？如果是这样，有没有办法告诉 Python 在不设置 env var 的情况下处理给定目录中的 .pth 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:35:05.043

> 如果我将 PYTHONPATH 设置为包含该前缀的站点包目录，则会将 egg 添加到 sys.path 并且可以导入模块。

添加一些目录`PYTHONPATH`不会触发其中的`.pth`-files 处理。因此，您的带拉链的鸡蛋不会在`sys.path`. 只有在鸡蛋本身在`sys.path`（父目录不够）时，您才能从鸡蛋中导入模块。

> 但是，如果我从脚本中使用前缀的站点包目录运行 site.addsitedir，则不会将鸡蛋添加到 sys.path 并且模块导入失败。

`site.addsitedir()``.pth`如果尚未看到该目录，则触发对 -files 的处理，因此它应该可以工作。

您描述的行为与应该发生的行为相反。

作为一种解决方法，您可以`sys.path`手动添加鸡蛋：`sys.path.insert(0, '/path/to/the.egg')`

# java - 处理 JPopupMenu 关闭

> ID：11562728
> 
> 赞同：2
> 
> 时间：2012-07-19T14:11:30.493
> 
> 标签：java, swing, jpopupmenu, jmenuitem, jpopup

当 PopupMenu 中的一个 JMenuItem 被选中（鼠标悬停）时，我想突出显示屏幕上的一些元素。所以我在我的 JMenuItem 上使用 MouseListener

```
 @Override
        public void mouseEntered(MouseEvent e) {
            highlightOn();
        }

        @Override
        public void mouseExited(MouseEvent e) {
            highlightOff();
        } 
```

它工作正常，但如果我按 Esc，弹出菜单将被关闭，无需清理高亮。我如何拦截 JPopupMenu 的关闭来处理这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T14:35:14.473

这样的事情应该可以解决问题：

```
myPopupMenu.addPopupMenuListener(new PopupMenuListener {
  public void popupMenuCanceled(PopupMenuEvent popupMenuEvent) {
    highlightOff();
  }
  public void popupMenuWillBecomeInvisible(PopupMenuEvent popupMenuEvent) {
    highlightOff();
  }
  public void popupMenuWillBecomeVisible(PopupMenuEvent popupMenuEvent) {}
} 
```

只需记住在使监听器可见之前或在其构造函数中添加监听器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T14:22:41.843

你看

1.  `PopupMenuListener`

更好的可能是

1.  `JMenuItem`(s) 可以退货`ButtonModel`，

2.  `ButtonModel`返回`isRollover()`, `isArmend()`, `isPressed()`ei

3.  每个`JButtons JComponents`（JButton、JCheckBox、JRadioButton 和 JMenuXxx）都实现了不同的方法`ButtonModel`

# design-patterns - 这种模式的名称是什么 - 满足最后一个条件时调用函数

> ID：11562730
> 
> 赞同：1
> 
> 时间：2012-07-19T14:11:41.897
> 
> 标签：design-patterns

我有一个结果函数，我只想在满足 x 个条件时调用，只要满足最后一个条件。

每个条件都可以忽略其他所有条件以减少耦合。

我在想可能有某种“决策”对象，您可以使用它注册您的结果函数，并且您可以指定您的 x 个条件。当满足每个条件时，它会调用决策对象以使其知道已满足。当满足最后一个条件时，调用结果函数。

我遇到过执行此操作的线程阻塞对象，但我不是在寻找线程阻塞的答案。

我所描述的内容有通用术语吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T18:20:35.073

除了作为一种模式， **这是[数据流编程](http://en.wikipedia.org/wiki/Dataflow_programming)**：

> 在计算机编程中，**数据流编程**是一种编程范式，它将程序建模为操作之间数据流动的有向图，从而实现数据流原理和架构。

**[管道和过滤器](http://www.eaipatterns.com/PipesAndFilters.html)**是一种可用于数据流编程的企业模式。

对于 Java，你可以看到这个问题：**[Dataflow Programming API for Java?](https://stackoverflow.com/q/162208/471214)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:44:58.430

我不确定是否有一个通用术语，但它似乎是[中介模式](http://en.wikipedia.org/wiki/Mediator_pattern)和[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)的组合——如果我必须给它一个名字，我可能会称之为“受保护的函数”或“受保护的方法” ”。

# asp.net-mvc - 使用 Asp.Net MVC 项目进行缓慢的调试和开发

> ID：11562734
> 
> 赞同：0
> 
> 时间：2012-07-19T14:11:55.843
> 
> 标签：asp.net-mvc, performance, debugging, iis, startup

有一个 MVC 项目使用不同的类库和 WCF 服务。实际上 bin 目录中有 228 个程序集。当我开始在本地 IIS 中调试时，IIS 会尝试预热并加载所有程序集。这需要很长时间。所以每次建项目都要等很久。那么，在本地环境中调试和测试时有什么变通方法吗？有什么解决方案可以加快调试的启动过程吗？像stackoverflow这样的大网站，如何在大框架中调试？

# php - 读取excel文件并放入html模板

> ID：11562740
> 
> 赞同：0
> 
> 时间：2012-07-19T14:12:06.860
> 
> 标签：php, html-parsing, export-to-excel

我正在尝试使用 excel 数据创建描述构建器。我想在 HTML 模板中使用预定义的值，并希望将 excel 值放在出现预定义值的位置，例如

```
<table>
  <tr>
     <td>ISBN</td>
     <td>{ISBN}</td>
  </tr>
  <tr>
     <td>Publisher</td>
     <td>{Publisher}</td>
  </tr>
  <tr>
     <td>Year</td>
     <td>{Year}</td>
  </tr>
  <tr>
     <td>About Book</td>
     <td>{AboutBook}</td>
  </tr>
</table> 
```

HTML 模板可以从物理 HTML 文件或文本区域传递。我希望用 excel 数据替换花括号中的文本。excel 文件中的标题与 HTML 模板中的值相同，但 excel 文件每次都可以更改，其标题也可以更改，excel 文件中可能有更多标题，其中只有少数包含在 HTML 模板中。我正在使用 excelreader 从 excel 文件中获取数据

```
for ($j = 1; $j <= $data->sheets[0]['numCols']; $j++) {
    $xlshead[$j] = trim($data->sheets[0]['cells'][1][$j]);
}

foreach($xlshead as $hkey=>$hval) {
        $row[$hkey] = trim($hval);
    } 
```

现在我得到了数组 $row 键中的列号和数组 $row 值中的标题

我在用

```
for ($j = 1; $j <= $data->sheets[0]['numRows']-1; $j++) {
       str_replace(array_valyes($row),$data->sheets[0]['cells'][$j+1][array_$keys($row)],$_POST['strhtmltemplate'])
} 
```

不，我不知道如何在替换功能中获得确切的密钥。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:26:50.453

这是我为我的项目完成的完整代码

```
$data = new Spreadsheet_Excel_Reader();
$filename = $_SESSION['filename'];
$data->read(ROOT.$filename);

$xlshead = array();

for ($j = 1; $j <= $data->sheets[0]['numCols']; $j++) {
    $xlshead[$j] = trim($data->sheets[0]['cells'][1][$j]);
}

$TotalRecord = $data->sheets[0]['numRows']-1;
$row = array();

foreach($xlshead as $hkey=>$hval) {
    $row['<?php echo $data->sheets[0][\'cells\'][$j+1]['.$hkey.']; ?>'] = "{".trim($hval)."}";
}

function _loadFile($filename)
{
    $contents = '';
    if ( file_exists($filename ) )
    {
        ob_start();
        require_once $filename;
        $contents = ob_get_contents();
        ob_end_clean();
    }
    return $contents;
}

$datafile = session_id();
$writedata = "";

$writedata .= str_replace(array_values($row),array_keys($row),$_SESSION['template']);

$myFile = $datafile.".php";
$fh = fopen($myFile, 'w') or die("can't open file");
fwrite($fh, $writedata);
fclose($fh);

$showdata = _loadFile("code.php");
$_SESSION['finaldata'] = $showdata; 
```

**代码.php**

```
require_once 'Excel/reader.php';

$datafile = session_id();

if(isset($_SESSION['filename'])) {
    $data = new Spreadsheet_Excel_Reader();
    $filename = $_SESSION['filename'];
    $data->read(ROOT.$filename);

    for ($j = 1; $j <= $data->sheets[0]['numRows']-1; $j++) {
        include($datafile.".php");
        echo '--br--';
    }
} 
```

**最后将文件导出到excel**

```
<?php
session_start();
$filename ="Downloaded.xls";
header('Content-type: application/ms-excel');
header('Content-Disposition: attachment; filename='.$filename);

$dataarr = explode("--br--",$_SESSION['finaldata']);

?>
<table>
<?php 

$dataarr = explode("--br--",$_SESSION['finaldata']);

foreach($dataarr as $res) {
    echo "<tr><td>".htmlentities($res)."</td></tr>";
}
?>
</table> 
```

# python - 在python中，这个'return decorator(callback) if callback else decorator'是什么意思？

> ID：11562751
> 
> 赞同：0
> 
> 时间：2012-07-19T14:13:09.603
> 
> 标签：python, return, if-statement

```
def method(path,method,callback) 
    def decorator(callback):if isinstance(callback, basestring): callback = load(callback)
        for rule in makelist(path) or yieldroutes(callback):
            for verb in makelist(method):
                verb = verb.upper()
                route = Route(self, rule, verb, callback, name=name,
                              plugins=plugins, skiplist=skiplist, **config)
                self.add_route(route)
    return callback
return decorator(callback) if callback else decorator 
```

最后一句话是什么意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T14:15:17.077

```
return decorator(callback) if callback else decorator 
```

翻译成：

```
if callback:
   return decorator(callback)
else:
   return decorator 
```

这是[Python](http://en.wikipedia.org/wiki/Ternary_operator#Python)使用[三元](http://en.wikipedia.org/wiki/Ternary_operator)表达式的方式。

[有关Python 是否有三元条件运算符](https://stackoverflow.com/questions/394809/python-ternary-operator)的更多信息，请参阅此 SO 问题？ .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:15:57.063

最后一句基本意思是

```
if callback:  # Tests to see if callback is not None in essence, although 0 and '' will also test False
    return decorator(callback)
else:    # Not needed, just for clarity sake
    return decorator 
```

# android - 插入失败时出现约束错误

> ID：11562760
> 
> 赞同：5
> 
> 时间：2012-07-19T14:13:31.020
> 
> 标签：android, android-contentprovider

我正在使用`ContentProvider`添加 mp3 的媒体。

代码是这样的：

```
// LOOP1_PATH: /mnt/sdcard/60AH/hack043/loop1.mp3

ContentValues values = new ContentValues(5);
values.put(Media.ARTIST, "Android");
values.put(Media.ALBUM, "60AH");
values.put(Media.TITLE, "hack043");
values.put(Media.MIME_TYPE, "audio/mp3");
values.put(Media.DATA, LOOP1_PATH);

getContentResolver().insert(Media.EXTERNAL_CONTENT_URI, values); 
```

如果您运行此代码，它将起作用。如果您尝试运行它两次，您将获得以下堆栈跟踪：

```
E/Database( 4102): Error inserting album_id=66 title=hack043 title_keyQQQQQ*Q*Q*Q mime_type=audio/mp3 date_added=1342706644 _display_name=loop12.mp3 sort_key=hack043 artist_id=133 _data=/mnt/sdcard/60AH/hack043/loop1.mp3
E/Database( 4102): android.database.sqlite.SQLiteConstraintException: error code 19: constraint failed
E/Database( 4102):  at android.database.sqlite.SQLiteStatement.native_execute(Native Method)
E/Database( 4102):  at android.database.sqlite.SQLiteStatement.execute(SQLiteStatement.java:61)
E/Database( 4102):  at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1582)
E/Database( 4102):  at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1426)
E/Database( 4102):  at com.android.providers.media.MediaProvider.insertInternal(MediaProvider.java:2166)
E/Database( 4102):  at com.android.providers.media.MediaProvider.insert(MediaProvider.java:1984)
E/Database( 4102):  at android.content.ContentProvider$Transport.insert(ContentProvider.java:206)
E/Database( 4102):  at android.content.ContentProviderNative.onTransact(ContentProviderNative.java:146)
E/Database( 4102):  at android.os.Binder.execTransact(Binder.java:320)
E/Database( 4102):  at dalvik.system.NativeStart.run(Native Method) 
```

不是 100% 肯定，但我猜约束失败是因为路径是`UNIQUE`.

我的问题是：

有没有办法获得有关约束错误的更多信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:45:11.720

不幸的是，这是本机功能的结果。[此处](http://www.sqlite.org/c3ref/c_abort.html)列出的代码将转换为错误消息。

# c++ - dllexport/dllimport 是否忽略成员模板函数？

> ID：11562763
> 
> 赞同：1
> 
> 时间：2012-07-19T14:13:44.293
> 
> 标签：c++, visual-studio

我现在正在使用 Visual Studio。我有一个经典的宏来标记 dll api 函数和类。我的理解是标记一个类 dllexport 使它的功能可以从其他二进制文件中看到，从而可以使用 dll 提供的类型。

我想知道当类包含模板成员函数时 dllexport 和 dllimport 的行为是什么？我最初的怀疑是它只是忽略它们，而这正是我想要的。

但是我在 MSDN 中找不到他们解释这个特定案例的位置（尽管他们解释了其他案例）。

例子：

```
 class MY_API Log // MY_API is either __declspec( dllexport ) or __declspec( dllimport ) depending on if we are compiling the library or using it's header
    {
    public:

            // is this ignored?
        template< typename TypeOfSomething >
        Log& write( const TypeOfSomething& something ) 
        {
            test_stream << something;
        }

        ~Log(); // ok this is exported/imported

    private:
          std::stringstream text_stream;
    }; 
```

我简化了代码来给出这个例子。

我怀疑的是，如果客户端代码使用 write() 函数，它将实例化模板，生成真正的函数代码，可能是内联的。在这种情况下，编译器会将其标记为“dllimport”，因为它应该与所有成员函数一样，还是什么都不做，只在客户端代码中使用该版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:43:22.500

没有“模板功能”之类的东西。C++ 有*函数模板*。

函数模板不是函数。它们是生成函数的方法。它们不存在于已编译的程序或 DLL 中。他们没有类型，也没有地址。您不能导入或导出它们。

从模板生成的函数（又名函数模板实例化）是普通函数。它们可以放在 DLL 中，可以导入和导出。但这样做通常没有什么意义。函数模板通常存在于头文件中的源表单中，因此无需从 DLL 导入实例。特别是考虑到 DLL 只能包含一组固定的、有限的实例化，并且库的用户总是可以请求不存在的实例化。

有时将一组特定的固定实例化放入 DLL 是合理的，但这种情况很少见。

# silex - 无法在已安装的 ControllerCollection 上设置默认值

> ID：11562767
> 
> 赞同：2
> 
> 时间：2012-07-19T14:13:58.217
> 
> 标签：silex

当我在路径上安装控制器集合时，默认值不起作用，我被迫提供一个值。

```
// app.php
...
$app->mount('/path/', MyControllerProvider());
....    

// my controller provider
class MyControllerProvider implements ControllerProviderInterface
{
    public function connect(Application $app)
    {
        $controllers = $app['controllers_factory'];

        $controllers->get('/{param}', function($param) {
             return $param;     
        })
        ->value('param','foo');
    }
} 
```

当我尝试访问 /path/ 时，会出现以下错误：

NotFoundHttpException：找不到“GET /path/”的路由

如果我访问 /path/somevalue 那么它可以工作。

如果您向主 $app 添加路由但在挂载时不会，默认值可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-11T22:02:59.080

Silex 将带有和不带有斜杠的路径视为不同的路径。关于此的问题已发布在 github 上：[https](https://github.com/silexphp/Silex/issues/149) ://github.com/silexphp/Silex/issues/149 。

您可以尝试将两个路径注册到同一个函数（代码看起来有点奇怪，但应该可以工作）。

# php - PHP：对除第一个和最后一个以外的所有数组元素执行操作

> ID：11562771
> 
> 赞同：1
> 
> 时间：2012-07-19T14:14:20.477
> 
> 标签：php, arrays, slice

我知道我可以`array_slice()`用来创建一个新数组，其中包含除第一个和最后一个元素之外的所有元素，对每个元素执行操作，然后重新添加原始的第一个和最后一个值。不过，这似乎有点矫枉过正。有没有一种更简洁的方法来对所有内部数组元素而不是在末端执行操作（在这种情况下，只是将字符串附加和前置到数组值中）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T14:16:26.357

我可能会遗漏一些东西，但这不会起到作用吗？

```
for ($i = 1; $i < count($arr) - 1; $i++) {
   // Do stuff to $arr[$i], like prefixing and suffixing
   $arr[$i] = 'prefix ' . $arr[$i] . ' suffix';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:21:11.053

有很多方法。一种是：

```
for($i = 1; $i < count($arr)-1; $i++) {
    // process $arr[$i];
} 
```

如果您的数组是关联的，并且已经以某种有意义的方式排序，您可以这样做：

```
$keys = array_keys($arr);
for($i = 1; $i < count($arr)-1; $i++) {
    // process $arr[$keys[$i]];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T14:21:27.217

那这个呢：

```
reset($array);
$firstKey = key($array);
end($array);
$lastKey = key($array);
foreach($array as $key => $value) {
    if ($key === $firstKey || $key === $lastKey) {
         continue;
    }
    do_your_stuff($key, $value);
 } 
```

# iphone - 在 iPhone/iPad 设备和 AES256Cryptor 中读取大的 .txt 文件

> ID：11562772
> 
> 赞同：0
> 
> 时间：2012-07-19T14:14:21.350
> 
> 标签：iphone, ios, aes

我正在开发 iPhone/iPad 应用程序，其中包含使用 AES256Cryptor 加密的 .txt 文件中的数据。包含数据的文件非常大（~10MB）。应用程序启动时：

1.  读取 .txt 文件
2.  从文件中解密字符串（用于解密使用 NSString 中硬编码的密钥）
3.  字符串被解析并放入 NSDictionary（约 40000 条记录）

应用程序不使用网络（必须离线）。我的问题是：

1.  数据（在 .txt 中）相对有价值，我不希望看到它被黑客入侵。你认为这有多安全？你有什么疑问吗？
2.  从文件读取并保存到 NSDictionary 需要很多时间（读取 .txt 约 5 秒，解析保存到 NSDictionary 约 5 秒）：

.

```
NSString *encryptedString = [[NSString alloc] initWithData:[NSData dataWithContentsOfFile:path] encoding:NSUTF8StringEncoding];
NSError *error = nil;
NSData *encryptedData = [GTMBase64 decodeString:encryptedString];
NSData *decryptedData = [[RNCryptor AES256Cryptor] decryptData:encryptedData password:@"password" error:&error];
NSString *dataString  = [[NSString alloc] initWithData:decryptedData encoding:NSUTF8StringEncoding];
NSArray *records = [dataString componentsSeparatedByString:@"separator"];

for( "record in records") {
  save record to dictionary...
} 
```

我该如何改进它？

# c++ - C++：继承、赋值

> ID：11562773
> 
> 赞同：3
> 
> 时间：2012-07-19T14:14:23.333
> 
> 标签：c++, inheritance

我正在学习 C++，目前我正在继承类和对象的动态内存分配。我正在做一些练习，现在我的应用程序出现了一些奇怪的崩溃。

问题在于将派生类分配给新对象。一切看起来都很好，直到析构函数开始工作，我分析了一切，我找不到错误。代码应该很简单，类 cd 存储简单的数据，“经典”是添加一个字段。

（主要问题是应用程序最终崩溃）

这是源代码，希望有人能帮助我

```
#ifndef CLASSIC_H_
#define CLASSIC_H_

class Cd
{
private:
    char* performers;
    char* label;
    int selection;
    double playtime;
public:
    Cd(char* s1, char* s2, int n, double x);
    Cd(const Cd& d);
    Cd();
    virtual ~Cd();
    virtual void Report() const;
    Cd& operator=(const Cd& d);
};

class Classic : public Cd
{
private:
    char* maintrack;
public:
    Classic(char* mt, char* s1, char* s2, int n, double x);
    Classic();
    Classic(const Classic& c);
    Classic(char* mt, const Cd& d);
    virtual void Report() const;
    virtual ~Classic();
    Classic& operator=(const Classic& c);
};

#endif

using std::strcpy;
Cd::Cd(char* s1, char* s2, int n, double x)
{

    performers = new char[strlen(s1) + 1];
    strcpy(performers, s1);

    label = new char[strlen(s2) + 1];
    strcpy(label, s2);

    selection = n;
    playtime = x;
}

Cd::Cd(const Cd& d)
{
    performers = new char[strlen(d.performers) + 1];
    strcpy(performers, d.performers);

    label = new char[strlen(d.label) + 1];
    strcpy(label, d.label);

    selection = d.selection;
    playtime = d.playtime;
}    

Cd::~Cd()
{

    delete [] performers;
    delete [] label;
}

Cd::Cd()
{
    performers = new char[1];
    performers[0] = '\0';

    label = new char[1];
    label[0] = '\0';

    selection = 0;
    playtime = 0;
}

Cd& Cd::operator=(const Cd& d)
{
    if (this == &d)
        return *this;

    delete [] performers;
    delete [] label;

    performers = new char[strlen(d.performers) + 1];
    strcpy(performers, d.performers);

    label = new char[strlen(d.label) + 1];
    strcpy(label, d.label);

    selection = d.selection;
    playtime = d.playtime;
    return *this;
}

void Cd::Report() const
{
    using namespace std;
    cout << performers << endl;
    cout << label << endl;
    cout << selection << endl;
    cout << playtime << endl;
}

Classic::Classic(char* mt, char* s1, char* s2, int n, double x)
    : Cd(s1, s2, n, x)
{
    maintrack = new char[strlen(mt) + 1];
    strcpy(maintrack, mt);
}

Classic::Classic() : Cd()
{
    maintrack = new char[1];
    maintrack[0] = '\0';
}

Classic::Classic(const Classic& c) : Cd(c)
{
    maintrack = new char[strlen(c.maintrack) + 1];
    strcpy(maintrack, c.maintrack);
}

Classic::Classic(char* mt, const Cd& d) : Cd(d)
{
    maintrack = new char[strlen(mt) + 1];
    strcpy(maintrack, mt);
}

void Classic::Report() const
{
    Cd::Report();
    std::cout << maintrack << std::endl;
}

Classic::~Classic()
{
    delete [] maintrack;
}

Classic& Classic::operator=(const Classic& c)
{
    if (this == &c)
        return *this;

    Cd::operator=(c);
    delete [] maintrack;

    maintrack = new char[strlen(c.maintrack)];
    strcpy(maintrack, c.maintrack);

    return *this;
}

#include <iostream>
#include "classic.h"
#include <cstdlib>
using namespace std;

void Bravo(const Cd& disk);

int main()
{
    Cd c1("Beatles", "Capitol", 14, 35.5);
    Classic c2 = Classic("Sonata fortepianowa B-dur, Fantazja C-moll",
                         "Alfred Brendel", "Philips", 2, 57.17);

    Classic copy;
    copy = c2;

    copy.Report();

    system("pause");

    return 0;
}

void Bravo(const Cd& disk)
{
    disk.Report();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T14:22:35.380

问题出在您的复制构造函数中`Classic`。然而，这只是突出了进行自己的字符串操作的危险。我建议改用 no`char*`和 using重写整个练习`std::string`。

```
Classic& Classic::operator=(const Classic& c)
{
    if (this == &c)
        return *this;

    Cd::operator=(c);
    delete [] maintrack;

        // you need strlen(c.maintrack) + 1
    maintrack = new char[strlen(c.maintrack)];
    strcpy(maintrack, c.maintrack);

    return *this;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T14:24:55.553

Classic& Classic::operator=(const Classic& c) 中可能的内存损坏：

```
maintrack = new char[strlen(c.maintrack)];
strcpy(maintrack, c.maintrack); 
```

用。。。来代替：

```
maintrack = new char[strlen(c.maintrack) + 1];
strcpy(maintrack, c.maintrack); 
```

也就是说，你为什么不直接使用标准库中的字符串类呢？它会为你省去这个和许多其他的麻烦。它自动完成所有的内存管理、空终止等。

```
string maintrack;
char * derp = "derp";
maintrack = derp; // valid
maintrack = "derp"; // valid
maintrack = another_string; // valid 
```

# spring-security - Neo4j 弹簧安全

> ID：11562776
> 
> 赞同：1
> 
> 时间：2012-07-19T14:14:37.933
> 
> 标签：spring-security, neo4j, spring-data-neo4j

像 Neo4j 这样的图形数据库是否非常适合存储 spring-security 检查访问权限的“用户”和信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T17:35:59.043

嗯，我认为这很有可能，请参阅[http://docs.neo4j.org/chunked/snapshot/examples-acl-structures-in-graphs.html](http://docs.neo4j.org/chunked/snapshot/examples-acl-structures-in-graphs.html)示例？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T10:36:16.423

手册中有一些关于此的内容： http: [//spring.neo4j.org/docs#d0e816](http://spring.neo4j.org/docs#d0e816)

拉斯

# java - ViewSwitcher 和 MapView 组合是否会引发 OutOfMemoryError？

> ID：11562780
> 
> 赞同：0
> 
> 时间：2012-07-19T14:15:00.303
> 
> 标签：java, android, android-mapview, out-of-memory

我在我的 Android 应用程序中有一个带有 a `MapView`in a的布局`ViewSwitcher`（它是在 a 中`RelativeLayout`，而不是整个屏幕）。

我的问题是点击该项目非常慢，点击几下后它会触发`java.lang.OutOfMemoryError`（在设备和模拟器上）。

```
07-19 15:39:29.839: E/dalvikvm-heap(14832): 86400-byte external allocation too large for this process.
07-19 15:39:29.839: E/GraphicsJNI(14832): VM won't let us allocate 86400 bytes
07-19 15:39:29.889: I/dalvikvm-heap(14832): Clamp target GC heap from 32.934MB to 32.000MB
07-19 15:39:29.889: D/dalvikvm(14832): GC_FOR_MALLOC freed <1K, 29% free 8447K/11847K, external 20846K/21207K, paused 47ms
07-19 15:39:29.889: D/skia(14832): --- decoder->decode returned false
07-19 15:39:29.889: D/AndroidRuntime(14832): Shutting down VM
07-19 15:39:29.889: W/dalvikvm(14832): threadid=1: thread exiting with uncaught exception (group=0x2aac8578)
07-19 15:39:29.889: E/AndroidRuntime(14832): FATAL EXCEPTION: main
07-19 15:39:29.889: E/AndroidRuntime(14832): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
07-19 15:39:29.889: E/AndroidRuntime(14832):    at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:504)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:370)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:715)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at android.graphics.drawable.Drawable.createFromStream(Drawable.java:675)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at mypackage.widgets.LocalisationArrayAdapter.getView(LocalisationArrayAdapter.java:92)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at android.widget.AbsListView.obtainView(AbsListView.java:1498)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at android.widget.ListView.measureHeightOfChildren(ListView.java:1220)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at android.widget.ListView.onMeasure(ListView.java:1131)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at android.view.View.measure(View.java:8462)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3231)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:254)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at android.view.View.measure(View.java:8462)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at android.widget.RelativeLayout.measureChild(RelativeLayout.java:566)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:381)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at android.view.View.measure(View.java:8462)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3231)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:254)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at android.view.View.measure(View.java:8462)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:535)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:313)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at android.view.View.measure(View.java:8462)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3231)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:254)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at android.view.View.measure(View.java:8462)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at android.view.ViewRoot.performTraversals(ViewRoot.java:861)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1882)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at android.os.Looper.loop(Looper.java:130)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at android.app.ActivityThread.main(ActivityThread.java:3701)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at java.lang.reflect.Method.invokeNative(Native Method)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at java.lang.reflect.Method.invoke(Method.java:507)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
07-19 15:39:29.889: E/AndroidRuntime(14832):    at dalvik.system.NativeStart.main(Native Method) 
```

所以我的问题是：真正导致此错误的原因是什么？

1.  这不是全屏`MapView`吗？

    我遵循了这篇文章的解决方案：[android MapView 总是在嵌套元素中导致 OutOfMemoryError](https://stackoverflow.com/questions/5460650/android-mapview-always-causes-an-outofmemoryerror-in-nested-elements)但它没有做任何事情。

2.  是因为`ViewSwitcher`the`MapView`和它的另一个孩子 (a `ListView`) 都在内存中吗？

    如果是这样，我怎样才能让android重绘每个视图`showNext()`？

当我有两个不同的活动而不是`ViewSwitcher`，并且当`MapView`整个布局运行良好时，它是什么问题，我该如何改变它？

# iphone - Xcode Interface Builder 视图编辑在同一控制器中

> ID：11562781
> 
> 赞同：0
> 
> 时间：2012-07-19T14:15:01.593
> 
> 标签：iphone, xcode, view, interface-builder, storyboard

有没有一种简单的方法可以在 Xcode 中访问视图？

我正在制作一个游戏，其中我有几个手机尺寸（480x320）的视图，但每个视图中有不同的元素。

当我试图点击一个按钮并将其拖到视图中时，我不能，因为我点击的只是视图 1（视图 1 在视图 2 的顶部）

我知道您可以从元素的左侧面板中选择它，但是当您想要调整大小和拖动它时，实际上通过界面生成器而不是更改它的属性更容易做到，最好能够单独访问子视图在单个窗口中，或一些智能功能做类似的事情。

如果 Xcode 支持这样的东西，有什么聪明的主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:22:53.813

如果每个视图都有出口，那么让它们变得强大，不要将视图放在主视图中，而是将它们平铺在主视图之外（如果您现在没有出口，则必须创建它们）。

然后您可以轻松地进行编辑（尽管 Xcode 会经常重新排列它们）。在您的代码中，当视图加载时，将这些视图作为子视图添加到主视图中。您还需要在 viewDidUnload 中将它们归零（这有点痛苦），或者如果您只是添加了出口以便将它们放置在 view.subview 中，则可以在将它们添加到子视图后将该属性归零。

# shell - “ls”命令输出

> ID：11562782
> 
> 赞同：-2
> 
> 时间：2012-07-19T14:15:04.207
> 
> 标签：shell, unix, ls

我正在运行`ls -l`，它带来以下输出：

> `-rw-r----- 1 webadm webgrp 168 Jul 19 16:00 SYNCHRO_20120719_1600.csv`

有没有办法只得到最后两个字段？IE：

> `16:00 SYNCHRO_20120719_1600.csv`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:27:01.260

在具有 GNU 日期的系统上：

```
for f in *; do
    printf '%s %s\n' "$(date +%H:%M -r "$f")" "$f"
done 
```

这将适用于带有空格的文件名——甚至是带有换行符的文件名，尽管无法区分文件名嵌入的换行符和记录分隔的换行符。（如果这很重要，请使用空分隔符）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:19:34.173

这应该做你想要的：

```
ls -l | awk '{print $8" "$9}' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T14:17:26.250

尝试这个：

```
 ls -l | awk '{print $(NF-1), " ", $NF}' 
```

它将显示该行的倒数第二个和最后一个字段，即时间和目录条目的名称，*不依赖*于字段的特定数字。

但是，可能会对包含空格的名称产生问题。

请参阅@CharlesDuffy 提供的有关处理使用的[此页面](http://mywiki.wooledge.org/ParsingLs)`'ls'`，这在一定程度上破坏了上述方法:-) .. 所以应该在这种情况下查看所提出的快速解决方案。

# java - 在 JPA 映射的表中添加外部列会破坏正常功能吗？

> ID：11562783
> 
> 赞同：5
> 
> 时间：2012-07-19T14:15:12.707
> 
> 标签：java, jpa, eclipselink

我是 JPA 的新手，我从中学到了很多东西。我最近部署了一个使用 EclipseLink 作为我的 JPA 提供程序的应用程序，它运行良好。

现在需要向其中一个映射表添加一个额外的列。这个额外的字段用于报告目的，不会影响我的应用程序，所以我真的不想触及运行良好的东西。我当然会在适当的时候更新我的应用程序以将此字段包含在我的映射中，但我现在不想这样做。

此列添加将由 DBA 在外部直接添加到表中。这个添加会破坏我的应用程序吗？

我相信这不应该发生，因为映射字段没有变化，而且就 JPA 而言，没有任何变化。JPA 不会知道添加了什么，因此一切都应该正常工作而不会中断。

如果我错了，请纠正我。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T14:18:58.327

你可以做到，它没有理由破坏，JPA 不会强制你将每一列映射到实体中的一个字段。除非新列是强制性的 ( `NOT NULL`) 并且没有默认值（例如在插入时）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-19T14:17:59.833

> 这个添加会破坏我的应用程序吗？

不，它不会。

JPA 允许您仅映射您实际需要的表和字段。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-19T14:27:56.690

What does an ORM such as JPA, Hibernate, or EclipseLink do under the hood ? It generates the SQL starting from your data model to let you interact with a database in a transparent way.

If you apply any modification to the database which do not require modification to the SQL you use to interact with it (you are not adding any constraints and non null columns), nothing will break. Your SQL queries will simply not use the added columns when writing/reading from the db.

If on the contrary you apply changes on the constraints, you can make your code not working anymore even without adding a column.

# php - PHP + jQuery .ajax：发布

> ID：11562788
> 
> 赞同：0
> 
> 时间：2012-07-19T14:15:29.633
> 
> 标签：php, jquery

我正在研究 PHP 和 jQuery，试图用 jquery 做一个帖子。它似乎在 FF 中工作，但 IE 给了我几个错误：

以下是我正在使用的代码：

```
<script>
$(function()
{
$("#mainForm").submit(function()
{
dataString = $("#mainForm").serialize();
$.ajax({
type : "POST",
url : "/gops/views/groups//ajax.php",
data : dataString,
//dataType : "json",
success : function(data) {
gid = $("#group_id").val();
$('#load_skills').load('/gops/views/groups/get_skills.php?gid='+gid);
}
});
return false;
});///close submit
});//close function
</script> 
```

这些是我在 IE8 中遇到的错误：网页错误详细信息

用户代理：Mozilla/4.0（兼容；MSIE 8.0；Windows NT 6.1；WOW64；Trident/4.0；SLCC2；.NET CLR 2.0.50727；.NET CLR 3.5.30729；.NET CLR 3.0.30729；Media Center PC 6.0； .NET4.0C；.NET4.0E；BRI/2；InfoPath.2) 时间戳：2012 年 7 月 19 日星期四 14:11:45 UTC

消息：对象不支持此属性或方法行：3 字符：13 代码：0

网页错误详情

用户代理：Mozilla/4.0（兼容；MSIE 8.0；Windows NT 6.1；WOW64；Trident/4.0；SLCC2；.NET CLR 2.0.50727；.NET CLR 3.5.30729；.NET CLR 3.0.30729；Media Center PC 6.0； .NET4.0C；.NET4.0E；BRI/2；InfoPath.2) 时间戳：2012 年 7 月 19 日星期四 14:12:04 UTC

消息：对象不支持此属性或方法行：3 字符：13 代码：0 URI：

消息：对象不支持此属性或方法行：2 字符：9 代码：0 URI：

消息：由于错误 80020101 无法完成操作。行：2 字符：11321 代码：0 URI：=1342707101099">http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js ?=1342707101099

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T14:26:36.950

好吧，尝试在 jquery 加载后执行 $.noConflict()

# google-maps - 如何在 kml 弹出窗口中覆盖 target="_blank"

> ID：11562791
> 
> 赞同：0
> 
> 时间：2012-07-19T14:15:38.447
> 
> 标签：google-maps, google-maps-api-3, kml

我正在使用这样的代码从谷歌的地图中加载一个 kml：

```
var myOptions = {
    mapTypeId: google.maps.MapTypeId.ROADMAP
};
var map = new google.maps.Map(document.getElementById('map_canvas'), myOptions);
var kmlLayer = new google.maps.KmlLayer('https://maps.google.com/maps/ms?authuser=0&vps=2&ie=UTF8&msa=0&output=kml&msid=209879288832578501414.0004c52d678cf88f70685');
kmlLayer.setMap(map); 
```

问题是弹出窗口的链接，[kml 添加](https://developers.google.com/kml/documentation/kmlreference#description) `target="_blank"`，我不想要它。

如何使用 javascript 将其删除？我找到[了这个答案](https://stackoverflow.com/a/1185271/842697)，但它在 API 3 中不起作用。我不喜欢使用 jQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:22:28.863

通过 jQuery，

加载地图后执行此操作，

```
$('a[target="_blank"]').prop('target','_self'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T16:05:46.500

通过[@geocodezip](https://stackoverflow.com/users/1210329/geocodezip)的评论，我得到了解决方案。它并不完美，`InfoWindow`始于标记的脚下而不是头部，但它是某种东西。

```
var infoWindow;
var map;

function initialize() {
    var myOptions = {
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById('map_canvas'), myOptions);

    var opts = {suppressInfoWindows: true};
    var kmlLayer = new google.maps.KmlLayer('https://maps.google.com/maps/ms?authuser=0&vps=2&ie=UTF8&msa=0&output=kml&msid=209879288832578501414.0004c52d678cf88f70685', opts);
    kmlLayer.setMap(map);

    infoWindow = new google.maps.InfoWindow();

    google.maps.event.addListener(kmlLayer, 'click', function(kmlMouseEvent) {
        var name = kmlMouseEvent.featureData.name;
        var descr = kmlMouseEvent.featureData.description.replace(/ target="_blank"/ig, '');
        var dom = '<div style="font-family: Arial, sans-serif; font-size: small">' +
            '<div style="font-weight: bold; font-size: medium; margin-bottom: 0em">' +
            name +
            '</div>' +
            '<div>' +
            descr +
            '</div>' +
            '</div>';
        infoWindow.setContent(dom);
        infoWindow.setPosition(kmlMouseEvent.latLng);
        infoWindow.open(map);
    });
} 
```

# linux - Linux bash：通过软链接执行时查找目标文件的完整路径

> ID：11562794
> 
> 赞同：2
> 
> 时间：2012-07-19T14:15:40.963
> 
> 标签：linux, bash, shell, path

当用户不是直接执行文件而是通过软链接执行文件时，如何找到正在执行的原始文件的完整路径。更准确地说，假设我有`/original/path/a.sh`, 和该文件的软链接：`~/Desktop/link-to-a.sh`. 如果用户实际执行，我如何找到`"/original/path/"`内部？`a.sh``~/Desktop/link-to-a.sh`

以下变量包含 ~/Desktop/ ，这没有用。

```
DIR="$( cd "$( dirname "$0" )" && pwd )" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T14:18:30.603

使用`readlink`.

要获取包含脚本的软链接目录的真实路径：

```
DIR=`dirname $0`
DIR=`readlink -f $DIR` 
```

如果您的软链接直接指向脚本，而不是其目录，请执行此操作以获取包含脚本的真实目录：

```
FILE=`readlink -f $0`
DIR=`dirname $FILE` 
```

# matlab - 如何在 MATLAB 中使用 repmat、replicate 或 kron 等函数

> ID：11562797
> 
> 赞同：3
> 
> 时间：2012-07-19T14:15:50.833
> 
> 标签：matlab, matrix, repeat

我想转换矩阵b：

```
b(:,:,1) =
     1
b(:,:,2) =
     3
b(:,:,3) =
     5 
```

到矩阵 c：

```
c(:,:,1) =
     1     1
     1     1
c(:,:,2) =
     3     3
     3     3
c(:,:,3) =
     5     5
     5     5 
```

不使用`for`循环。在矩阵`c`中， 的每个`1x1`元素`b`都转换为`2x2`与 中的对应元素具有相同值的块`b`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T14:41:08.603

您可以只使用索引，这通常更快：

```
b([1 1],[1 1],:) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T14:25:00.860

如果我理解正确，那么：

```
 c = repmat(b, [2 2 1]) 
```

# linux - 每六个小时在 Linux 上运行一次 cron 作业

> ID：11562804
> 
> 赞同：144
> 
> 时间：2012-07-19T14:16:22.750
> 
> 标签：linux, cron

如何每天每六个小时运行一次命令？

我尝试了以下方法，但没有奏效：

```
/6 * * * * *  mycommand 
```

* * *

## 回答 #1

> 赞同：337
> 
> 时间：2012-07-19T14:18:08.363

您忘记了`*`，并且您的字段太多。这是你需要关心的时刻

```
0 */6 * * * /path/to/mycommand 
```

这意味着从 0 开始每隔六个小时，即在 0、6、12 和 18 小时，您可以写为

```
0 0,6,12,18 * * * /path/to/mycommand 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-19T14:19:29.817

您应该包含命令的路径，因为 cron 在广泛缩减的环境中运行。您不会拥有交互式 shell 会话中的所有环境变量。

最好指定脚本/二进制文件的绝对路径，或在 crontab 本身中定义 PATH。为了帮助调试任何问题，我还将 stdout/err 重定向到日志文件。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-09-08T07:35:01.930

```
0 */6 * * * command 
```

这将是说每天工作 6 小时的完美方式。

你的命令会持续六分钟！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-04-10T12:54:37.263

**请注意以下语法**：

```
* */6 * * * 
```

这意味着每 6 小时 60*次*（每分钟），

**不是**

每 6 小时一次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-01T08:33:21.347

```
0 */6 * * * 
```

每 6 小时 crontab 是常用的 cron 计划。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-17T14:01:57.203

您需要使用 *

```
0 */6 * * * /path/to/mycommand 
```

您也可以参考[https://crontab.guru/](https://crontab.guru/)这将帮助您更好地安排...

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2018-06-25T10:53:56.007

尝试：

```
0 */6 * * * command 
```

. * 不得不

# javascript - 为什么这个 jQuery 选择器只返回 1 个元素？

> ID：11562806
> 
> 赞同：2
> 
> 时间：2012-07-19T14:16:25.743
> 
> 标签：javascript, jquery, checkbox

所以，我有这个包含我选中的复选框的下一个变量：

```
var checked = $('input[name="article[]"]:checked'); 
```

但是我怎么知道是否有 1 个已选中、2 个或什至没有？因为`console.log(checked.length)`总是返回 1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T14:29:13.193

I know it's a stupid mistake but for everybody to know, the problem was that I was doing this:

```
if(checked.length = 1) { 
```

instead of this

```
if(checked.length == 1) { 
```

btw, I don't know why the "hate" on the other answers (for those who down voted), the answers given... work (I've tested 2 of them)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:18:39.863

尝试

```
$('input[name=article\\[\\]]:checked').length 
```

见jsfiddle：http: [//jsfiddle.net/dyrD5/](http://jsfiddle.net/dyrD5/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-19T14:27:19.827

谁点击了代码悖论的答案？右选择器，只需要长度

```
<input type="checkbox" name="article" value="1" />
<input type="checkbox" name="article" value="2" />
<input type="checkbox" name="article" value="3" />
<button>go</button> 
```

​ js

```
$(document).ready(function(){
    $('button').click(function(){
        alert($('input[name^="article"]:checked').length)
    })
});​ 
```

在这里工作[http://jsfiddle.net/joevallender/GLjTg/](http://jsfiddle.net/joevallender/GLjTg/)

# asp.net-mvc-3 - 具有自定义架构的多租户数据库

> ID：11562807
> 
> 赞同：1
> 
> 时间：2012-07-19T14:16:33.757
> 
> 标签：asp.net-mvc-3, model, database-schema, multi-tenant

我正在编写一个多租户应用程序，其中每个租户在数据库或自己的数据库中都有自己的架构。因为租户数据是独立的，所以我希望能够通过添加列来自定义他们的表格，或者通过创建额外的视图来满足他们的特定需求。理想情况下，我想在不重新编译代码的情况下进行更改。

这种愿望似乎与 MVC 的工作方式背道而驰。我的问题是，当模式彼此略有不同时，MVC 和多模式、多租户架构可以工作吗？如果是这样，我如何设计允许这些变化的模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:35:59.163

我想把它扔在那里，以防你自己没有偶然发现：

[http://weblogs.asp.net/zowens/archive/2010/05/29/multi-tenant-asp-net-foundation.aspx](http://weblogs.asp.net/zowens/archive/2010/05/29/multi-tenant-asp-net-foundation.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-01T21:39:00.317

在[Citus](http://www.citusdata.com)，我们正在使用 PostgreSQL 构建分布式/分片多租户数据库。您可以查看我们的[用例指南](https://docs.citusdata.com/en/v6.2/use_case_guide/multi_tenant.html)，其中包含一个示例应用程序。我们不按模式分片，而是按租户 ID 分片。然后将表分片到多个节点。对于每个租户的信息，我们使用 JSONB，它允许不同的租户保留不同的租户特定信息。

# html - 在html5中对齐figcaption标签的语义方式

> ID：11562811
> 
> 赞同：1
> 
> 时间：2012-07-19T14:16:59.870
> 
> 标签：html

在 html5 中，如何`<figcaption>`在不使用 css 的情况下将标签对齐到顶部而不是底部。以下是片段，

```
<figure>
  <img src="img_pulpit.jpg" alt="The Pulpit Rock"
  width="304" height="228" />
  <figcaption>Fig1\. - A view of the pulpit rock in Norway.</figcaption>
</figure> 
```

有没有类似的语义方式`<figcaption align='top'>`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T14:21:48.990

简单地说作为（[例子](http://jsfiddle.net/EQaGU/)`<figcaption>`）的第一个孩子：`<figure>`

```
<figure>
  <figcaption>Fig1\. - A view of the pulpit rock in Norway.</figcaption>
  <img src="img_pulpit.jpg" alt="The Pulpit Rock" width="304" height="228" />
</figure> 
```

如果您希望`<figcaption>`元素作为最后一个子元素，但显示在图像上方，那么这是**展示**性的，*应该使用 CSS 完成*。

* * *

> **可以使用此元素的上下文：**
> 作为图形元素的第一个或最后一个子元素。
> 
> **内容属性：**
> [全局属性](http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#global-attributes)
> 
> [来源](http://www.whatwg.org/specs/web-apps/current-work/multipage/grouping-content.html#the-figcaption-element)

# java - 从命令行中删除 Java 证书？

> ID：11562815
> 
> 赞同：2
> 
> 时间：2012-07-19T14:17:23.017
> 
> 标签：java, java-web-start, certificate

是否可以从命令行删除 Java Webstart 安装的证书？我可以通过 Java 控制面板-> 证书来完成，但现在我想通过程序来完成。

# php - 基本php上的php错误

> ID：11562816
> 
> 赞同：-4
> 
> 时间：2012-07-19T14:17:23.953
> 
> 标签：php

我正在尝试执行以下操作，但不断出现错误。

```
<?php
echo '<a href="'javascript:toggle5'" id.'imageDivLink'('profilebar', 'imageDivLink');">' .$USER->firstname.' '.$USER->lastname.'</a>';
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T14:20:02.127

您的代码包含大量 PHP、JavaScript 和 HTML 错误。以下是我假设你的意思。

```
<?php
echo '<a href="javascript:toggle5()" id="'
    . imageDivLink('profilebar', 'imageDivLink') . '">'
    . $USER->firstname . ' ' . $USER->lastname
    . '</a>';
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T14:19:08.373

```
echo '<a href="javascript:toggle5()" id="'.imageDivLink('profilebar','imageDivLink').'">'.$USER->firstname.' '.$USER->lastname.'</a>'; 
```

# javascript - jasmine-node 是否提供任何类型的“快速失败”选项？

> ID：11562817
> 
> 赞同：7
> 
> 时间：2012-07-19T14:17:25.127
> 
> 标签：javascript, unit-testing, jasmine

当我从命令行运行一套 jasmine 测试时，我想要某种类型的快速失败选项，因此它会在第一个断言错误处停止

今天有这样的事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-15T23:29:03.457

只是将[jasmine-bail-fast](https://github.com/goodeggs/jasmine-bail-fast)拼凑在一起以获得这种行为。

```
npm install jasmine-bail-fast 
```

然后在你的第一个规范之前：

```
require('jasmine-bail-fast');
jasmine.getEnv().bailFast(); 
```

希望将其[合并到茉莉花核心](https://github.com/pivotal/jasmine/issues/414)，然后将其作为标志添加到茉莉花节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T21:52:03.333

我能够对茉莉花进行猴子修补以应对快速失败。

[https://gist.github.com/btakita/4718081](https://gist.github.com/btakita/4718081)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T03:51:20.537

据我所知，答案是“不”。我们通过将测试拆分为单独的文件并逐个运行它们在某种程度上解决了这个问题，因此一旦遇到测试失败的文件，它就会停止。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-27T15:17:28.343

您可以通过自定义报告器手动/人工完成。他们似乎正在研究该功能，但问题仍然存在。现在这就是我在 jasmine-node 中所做的事情：

```
function installExitOnFail(runner)
{
    var SpecReporter = require('jasmine-spec-reporter')
    var exitOnFailReporter = new SpecReporter({displayStacktrace: true});
    var specDone = exitOnFailReporter.specDone
    exitOnFailReporter.specDone = function(result)
    {
        if(result.status === 'failed')
        {
            console.log(outpcolors.red('\nFailed test: ' + result.fullName +
                '\nReason: '+result.failedExpectations[0].message) +
                '\n' + result.failedExpectations[0].stackut);
            process.exit(1);
        }
        else
        {
            specDone.apply(exitOnFailReporter, arguments)
        }
    };
    runner.addReporter(exitOnFailReporter);
}

var jasmineRunner = new require('jasmine')();
installExitOnFail(jasmineRunner);
jasmine.DEFAULT_TIMEOUT_INTERVAL = 99999999;
jasmineRunner.specFiles = [your specs files....];
jasmineRunner.execute(); 
```

# java - Oracle JDBC 字符集和 4000 个字符限制

> ID：11562819
> 
> 赞同：9
> 
> 时间：2012-07-19T14:17:37.913
> 
> 标签：java, database, oracle, jdbc, ojdbc

我们正在尝试将 UTF-16 编码的字符串存储到 AL32UTF8 Oracle 数据库中。

我们的程序在`WE8MSWIN1252`用作字符集的数据库上完美运行。当我们尝试在使用`AL32UTF8`它的数据库上运行它时，会得到一个`java.sql.SQLException: ORA-01461: can bind a LONG value only for insert into a LONG column`.

在下面的测试用例中，只要我们的输入数据不会太长，一切都可以正常工作。

输入字符串可以超过 4000 个字符。我们希望尽可能多地保留信息，即使我们意识到必须切断输入。

我们的数据库表是使用`CHAR`关键字定义的（见下文）。我们希望这将允许我们存储多达 4000 个字符集的任何字符集。***这可以做到吗？如果是这样，怎么做？***

我们尝试将字符串转换为`UTF8`使用 a`ByteBuffer`没有成功。`OraclePreparedStatement.setFormOfUse(...)`也没有帮助我们。

切换到 a`CLOB`不是一种选择。如果绳子太长，则需要剪断。

这是我们目前的代码：

```
public static void main(String[] args) throws Exception {
    String ip ="193.53.40.229";
    int port = 1521;
    String sid = "ora11";
    String username = "obasi";
    String password = "********";

    String driver = "oracle.jdbc.driver.OracleDriver";
    String url = "jdbc:oracle:thin:@" + ip + ":" + port + ":" + sid;
    Class.forName(driver);

    String shortData = "";
    String longData = "";
    String data;

    for (int i = 0; i < 5; i++)
        shortData += "é";

    for (int i = 0; i < 4000; i++)
        longData += "é";

    Connection conn = DriverManager.getConnection(url, username, password);

    PreparedStatement stat = null;
    try  {
        stat = conn.prepareStatement("insert into test_table_short values (?)");
        data = shortData.substring(0, Math.min(5, shortData.length()));
        stat.setString(1, data);
        stat.execute();

        stat = conn.prepareStatement("insert into test_table_long values (?)");
        data = longData.substring(0, Math.min(4000, longData.length()));
        stat.setString(1, data);
        stat.execute();
    } finally {
        try {
            stat.close();
        } catch (Exception ex){}
    }
} 
```

这是简单表的创建脚本：

```
CREATE TABLE test_table_short (
    DATA    VARCHAR2(5 CHAR);
);

CREATE TABLE test_table_long (
    DATA    VARCHAR2(4000 CHAR);
); 
```

测试用例在短数据上完美运行。然而，在长数据上，它不断收到错误。即使我们`longData`只有 3000 个字符长，它仍然不能成功执行。

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T14:32:20.087

在 Oracle 12.1 之前，一个`VARCHAR2`列被限制为在数据库字符集中存储 4000 字节的数据，即使它被声明为`VARCHAR2(4000 CHAR)`. 由于字符串中的每个字符都需要 UTF-8 字符集中的 2 个字节的存储空间，因此您将无法在列中存储超过 2000 个字符。当然，如果您的某些字符实际上只需要 1 个字节的存储空间，或者其中一些字符需要超过 2 个字节的存储空间，那么这个数字将会改变。当数据库字符集是 Windows-1252 时，字符串中的每个字符只需要一个字节的存储空间，因此您可以在列中存储 4000 个字符。

由于您有更长的字符串，是否可以将列声明为 a`CLOB`而不是 a `VARCHAR2`？这将（有效地）消除长度限制（a 的大小有一个限制，`CLOB`这取决于 Oracle 版本和块大小，但它至少在多个 GB 范围内）。

如果您碰巧使用的是 Oracle 12.1 或更高版本，该`max_string_size`参数允许您将列[的最大大小`VARCHAR2`从 4000 字节增加到 32767 字节](http://dbasolved.com/2013/06/26/change-varchar2-to-32k-12c-edition/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T10:02:32.233

通过将字符串切割为所需的字节长度解决了这个问题。请注意，这不能通过简单地使用来完成

```
stat.substring(0, length) 
```

因为这会产生一个 UTF-8 字符串，它可能比允许的长度长三倍。

```
while (stat.getBytes("UTF8").length > length) {
  stat = stat.substring(0, stat.length()-1);
} 
```

注意不要使用 stat.getBytes() 因为这取决于设置的 'file.encoding' 并产生 Windows-1252 或 UTF-8 字节！

如果你使用 Hibernate，你可以使用 org.hibernate.Interceptor 来做到这一点！

# sql - SQL 是否可以从另一个表的 MAX 列执行 ORDER BY ？

> ID：11562822
> 
> 赞同：0
> 
> 时间：2012-07-19T14:17:43.473
> 
> 标签：sql, db2, sql-order-by

```
T1:
ID   
100
101
102

T2:
ID     OWNDATE   
100    1.1.2001
100    3.1.2001
101    2.1.2001
102    4.1.2001 
```

我想要类似的东西，`select * from T1` 但是按 T2 表中的 MAX 自己的日期列排序？

结果将是

```
102
100
101 
```

这可能吗？谢谢

对不起

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T14:19:48.133

只需在 ID 上将两个表连接在一起，然后订购`OWNDATE`。

```
SELECT T1.* 
FROM T1 
INNER JOIN T2 on T1.[ID] = T2.[ID]
ORDER BY T2.OWNDATE 
```

**更新：**

```
SELECT T1.* FROM T1
INNER JOIN (
    SELECT [ID], MAX(OWNDATE) AS OWNDATE
    FROM T2
    GROUP BY [ID]
) T2 ON T1.[ID] = T2.[ID]
ORDER BY OWNDATE DESC 
```

# yii - Yii Query builder 中的多次调用

> ID：11562823
> 
> 赞同：4
> 
> 时间：2012-07-19T14:17:44.930
> 
> 标签：yii, query-builder

我想用多个调用在哪里构建查询，但是在使用此代码时出现错误

```
$command = Yii::app()->db->createCommand()
    ->select('*')
    ->from('{{table}}');

$command->where('value1 = :value1', array(':value1' => 1));
$command->where('value2 < :value2', array(':value2' => 2)); 
```

我明白，我可以使用类似的代码

```
$command->where('value1 = :value1 AND value2 = :value2', array(':value1' => 1, ':value2' => 2)); 
```

但我有困难的条件和更简单的使用代码，如上。

在 Codeigniter 中，我可以多次使用这些条件

```
$this->db->where() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T15:26:26.587

你必须给它传递一个这样的数组：

```
$command->where(array('AND', 'value1 = :value1', 'value2 < :value2'), array(':value1' => 1, ':value2' => 2)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-09T00:39:26.947

实际上我找到了一个更好的方法来做到这一点

```
$result = array();
    $result = Yii::app()->db->createCommand()
            ->select('*')
            ->from('table');

    $condition = array();
    $cond_arg = array();

    if (!empty($email)) {

        $condition[] = "email =:email";
        $cond_arg[':email'] = $email;
    }

    if (!empty($value2)) {

        $condition[] = "value2 =:value2";
        $cond_arg[':value2'] = $value2;
    }

    if (!empty($value3)) {

        $condition[] = "value3 like :value3";
        $cond_arg[':value3'] = $value3;
    }

    if (count($condition) > 0) {
        $result->where(array('AND', implode(" AND ", $condition)), $cond_arg);
    }

    return $result->queryAll(); 
```

# java - FastList 不是通用 Java

> ID：11562827
> 
> 赞同：-1
> 
> 时间：2012-07-19T14:17:49.710
> 
> 标签：java, eclipse, generics, collections

关于使用，有些事情我不明白，`FastList`我想知道是否有人可以帮助我：确实，我已经导入了库：`javolution.util.FastList`我不明白为什么 Eclipse 不接受这个程序运行（它给出了一个错误对于`FastList`）：

```
public List<String> invokeMethodList() {
    FastList<String> lMethodList = new FastList<String>();
    lMethodList.add("getAdminLogs");
    return lMethodList;
} 
```

在创建另一个独立项目时，这段代码工作得很好：

```
import javolution.util.FastList;

public class FastTest {

      public static void main(String[] args) {

            FastList<String> lMethodList = new FastList<String>();
            lMethodList.add("getAdminLogs");
            lMethodList.add("getPlugInsConfig");
            lMethodList.add("reloadPlugIn");
            System.out.println(lMethodList.toString());

      }

} 
```

我知道这与 FastList 是一个非通用函数的事实有关，但我无法弄清楚这两个项目之间的区别！

我希望有人能给我一个提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:31:47.780

我猜第一个项目被配置为使用不支持泛型的 Java 版本（即 1.5 之前的版本）。

检查项目属性中的 Java 编译器页面。

# c - 带有未确定参数的函数指针

> ID：11562828
> 
> 赞同：4
> 
> 时间：2012-07-19T14:17:55.730
> 
> 标签：c, function-pointers

我想要一个可以接受各种类型参数的函数指针。我怎么做？

下面的例子（第 1 行），我也希望`void (*fp)(int)`能够采用`void (*fp)(char*)`。以下代码无法正确编译，因为我在预期 int 的地方传递了 char*，因此编译以下代码会给您警告（并且无法正常工作）。

```
void callIt(void (*fp)(int))
{
    (*fp)(5);
}

void intPrint(int x)
{
    printf("%d\n", x);
}

void stringPrint(char *s)
{
    printf("%s\n", s);
}

int main()
{
    void (*fp1)(int) = intPrint;
    callIt(fp1);
    void (*fp2)(char*) = stringPrint;
    callIt(fp2);
    return 0;
} 
```

注意：我知道尝试将整数 5 作为 char* 参数传递是愚蠢的，但这不是这个问题的关注点。如果需要，可以将 char* 替换为 float。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T14:24:42.620

我会说 use `void (*fp)(void*)`，然后传入指向变量的指针并将它们转换为 void*。这很hacky，但它应该可以工作。

例如：

```
void callIt(void (*fp)(void*))
{
    int x = 5;
    (*fp)((void*)&x);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:25:42.270

您希望对 stringPrint 的调用究竟能做什么？

看起来好像你确实让这个工作了，它最终会尝试将内存位置 5 的内容打印为字符串。我怀疑这不是你想要的，因为它会崩溃，我怀疑你打算输出“5”。

另请注意 ... 至少需要一个命名参数。传递一个 void * 和大量的强制转换至少会编译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T14:31:15.007

虽然不好，但函数指针的类型并不重要。

只需将其定义为

```
typedef void (*fp_t)(void * pv); 
```

您唯一需要确保的是您调用它的方式与您分配给它的功能相匹配。

```
int intFuncWithTwoDoubles(double d1, double d2);
char * pCharFuncWithIntAndPointer(int i, void * pv);

...

fp_t fp = NULL;

fp = intFuncWithTwoDoubles;
printf("%d", fp(0.0, 1.0));

fp = pCharFuncWithIntAndPointer;
printf("%s", fp(1, NULL));

... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T14:26:45.920

为什么不让它成为一个接受 void* 参数的函数指针？

```
void(*fp)(void*) 
```

这将处理所有可能的指针参数。现在对于数据类型，您可以为每个函数创建一个函数指针类型，或者只为将要与函数指针一起使用的函数创建一个函数指针类型，将数据类型作为指针传递并在函数的开头取消引用它们。这只是一个想法，不知道你想做什么。

# asp.net-mvc - 在 Orchard CMS 中修改页脚

> ID：11562833
> 
> 赞同：4
> 
> 时间：2012-07-19T14:18:07.537
> 
> 标签：asp.net-mvc, orchardcms

我曾尝试寻找答案，但似乎没有一个解决方案显示如何修改页脚。我在主题视图中看到了这一点：

```
 <div id="footer-sig" class="group">
        @Zone(Model.Footer)
    </div> 
```

如何修改 Model.Footer？我有从 Web 安装程序安装的发布版本，它似乎没有控制器或模型，只有视图。如何修改页脚？

例如，我只想放一个“|” 在仪表板和其他链接之间。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T09:55:15.507

如果您还没有这样做，那么可能值得阅读一些有关[自定义 Orchard 主题](http://docs.orchardproject.net/Documentation/Customizing-the-default-theme)的背景知识。

这在很大程度上取决于您要更改的内容`Model.Footer`。假设您使用的是**TheThemeMachine**主题，您发布的代码片段包含在`Layout.cshtml`. 如果您进一步查看源代码，您将看到以下代码段：

```
WorkContext.Layout.Footer.Add(New.BadgeOfHonor(), "5"); // Powered by Orchard
WorkContext.Layout.Footer.Add(New.User(), "10"); // Login and dashboard links 
```

这告诉 Orchard 旋转两个新形状作为页脚 (`BadgeOfHonor`和`User`) 的一部分。

`BadgeOfHonor`形状只是呈现捆绑到主题中的视图，因此`TheTimeMachine`可以轻松更改。

该`User`形状在核心中有一个默认视图，并呈现页脚的“欢迎 XXX / 登录”元素。这可以被您的主题以通常的 Orchard 方式覆盖。

从您的评论中，听起来您想将页脚从 更改为`TheThemeMachine`，而不是说：

```
Powered by Orchard © The Theme Machine 2010\. Welcome, admin! Sign Out Dashboard 
```

它说：

```
Powered by Orchard © The Theme Machine 2010\. Welcome, admin! Sign Out | Dashboard 
```

您可以通过在主题中创建适当的视图来覆盖 Orchard 中的视图。因此，要更改`User`呈现形状的方式，您只需将视图添加到主题并进行修改。最简单的方法是找到现有视图并将其复制到您的主题中，这将为您提供一些工作。在这种情况下，需要将文件**src\Orchard.Web\Core\Shapes\Views\User.cshtml**复制到文件夹**src\Orchard.Web\Themes\TheThemeMachine\Views\User.cshtml 中**（假设您正在修改主题机）。然后您只需要更改此代码：

```
 <span class="user-actions">
        @Html.ActionLink(T("Sign Out").ToString(), "LogOff", new { Controller = "Account", Area = "Orchard.Users", ReturnUrl = Context.Request.RawUrl }, new { rel = "nofollow" })
        @if (AuthorizedFor(Orchard.Security.StandardPermissions.AccessAdminPanel)) {
            @Html.ActionLink(T("Dashboard").ToString(), "Index", new {Area = "Dashboard", Controller = "Admin"})
        }
    </span> 
```

变成这样的东西：

```
 <span class="user-actions">
        @Html.ActionLink(T("Sign Out").ToString(), "LogOff", new { Controller = "Account", Area = "Orchard.Users", ReturnUrl = Context.Request.RawUrl }, new { rel = "nofollow" })
        |
        @if (AuthorizedFor(Orchard.Security.StandardPermissions.AccessAdminPanel)) {
            @Html.ActionLink(T("Dashboard").ToString(), "Index", new {Area = "Dashboard", Controller = "Admin"})
        }
    </span> 
```

一般来说，处理自己的主题副本是个好主意，而不是直接修改发行版附带的主题，因为这将使您更容易在更新时进行更新。还值得研究 ShapeTracing 模块，它允许您确定需要覆盖哪些形状以更改站点上的不同元素。[Orchard.Net](http://docs.orchardproject.net/)页面上的文档确实包含一些有用的信息（尽管它可能会有点过时，因为开发仍在快速进行），因此值得一读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-21T09:24:09.833

一种简单的方法是浏览您的网站文件并找到 ~\Themes[ThemeNameOverHere]\Views\BadgeOfHonor.cshtml
我有这个有它的内容，您可以轻松编辑：@T("Powered by Orchard"," [http:/ /www.orchardproject.net](http://www.orchardproject.net) ") @T("© The Theme Machine 2010.")

注意：我使用的是 Orchard 1.9.1 版本。希望这是有用的。

# linux - 比较字符串和整数

> ID：11562836
> 
> 赞同：0
> 
> 时间：2012-07-19T14:18:12.843
> 
> 标签：linux, bash, shell, scripting

我想将一个字符串与一个整数进行比较，如果它满足给定的要求，那么它将将该值添加到一个文本文件中。

```
test="$fqdn:$port"

if [ $test = "$fqdn:443" ]; then
  echo "$test" | tee -a list.txt
fi 
```

在这种情况下，变量`fqdn`将保存网站的值，端口将保存不同的端口号，但我只想保留端口号为 443 的那些`:`，并将其附加到名为`list.txt`.

当我运行这段代码时，由于某种原因，我没有得到想要的结果。有人可以帮忙吗？我对 shell 编程非常陌生。

**编辑：**

fqdn 的值如下所示：

```
something1.awesome.com
something2.awesome.com
something3.awesome.com
something4.awesome.com
something5.awesome.com
... 
```

对于端口，它看起来像这样：

```
80
8090
443
1090
80
80
... 
```

**编辑2：**

我确实考虑过仅将 $port 与 443 进行比较，但这在我的情况下不起作用，因为第一个 fqdn 与第一个端口一起使用，如果第一个 fqdn:port 等于 fqdn:443 之类的东西，则将其添加到文本文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:28:28.783

Try something like this

```
if [ $port -eq 443 ]; then
    echo $fqdn:$port | tee -a list.txt
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T15:50:17.170

将组合的 FQDN 和 PORT 数据视为 SOCKET 更容易，并且由于您还希望记录此信息，因此这是可取的。然后执行简单的文本匹配`grep`将找到对应于特定端口的每一行。

套接字列表在您的脚本之前是否可用，例如作为文件中的列表？如果是这样，以下将起作用（假设文件中每行一项`socket.txt`）：-

```
PORT=443
grep ":$PORT\$" socket.txt | tee -a list.txt 
```

在这里，grep 正在文件中搜索完整端口号跟在冒号后面的所有字符串。或者， grep 也将过滤通过管道传递给它的行。

如果您没有可用的套接字信息，您可以自己组合连续的 FQDN 和 PORT 项并生成`socket.txt`文件。以下脚本（例如命名`socket`）将执行此操作，前提是您可以将 FQDN 列表和 PORT 列表写入两个文件（同样，每行一项）。

```
#!/bin/bash

die() {
    echo "$*" >&2
    exit 1
}

[ $# = 2 ] || die "usage: `basename $0` FQDN PORT"

exec 6<$1 || die "Cannot open $1"
exec 7<$2 || die "Cannot open $2"

while true
do
    read FQDN <&6 && read PORT <&7 || exit
    echo "$FQDN:$PORT"
done 
```

运行为：`socket fqdn.txt port.txt`

# javascript - 在 jquery 中使用 $.ajax 出现未指定的错误

> ID：11562839
> 
> 赞同：0
> 
> 时间：2012-07-19T14:18:16.003
> 
> 标签：javascript, jquery, ajax

我有一个简单的代码...

```
 $.ajax({
        url: url,
        dataType: 'text',
        success: function (json) {
            alert (json);
        },
        error: function (object, text_status, error_thrown) {
            alert ('Error: '+ url +' : '+ object +' : '+ text_status +' : '+ error_thrown);
        }
    }); 
```

哪个应该起作用，只是不起作用。它只是显示`'Error: *url* : [object Object] : error : '`不完全有用的错误。直接在我的浏览器中访问 URL 可以正常工作。

更新：

该对象也没有真正的帮助：`{"readyState":0,"responseText":"","status":0,"statusText":"error"}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:23:54.417

尝试将 url 存储在不同的变量中`var siteurl`并使用它。

# mysql - 带有更新 && 加入的 MySQL 不安全语句

> ID：11562845
> 
> 赞同：2
> 
> 时间：2012-07-19T14:18:50.770
> 
> 标签：mysql, unsafe

我在有大量供应商向其发送数据（或阅读通知）的电子商务网站上工作，我需要为每个供应商保留最后一次连接的时间。由于供应商表的更新显示为不良做法（大量更新性能不佳），因此我创建了内存表，其中存储了每个供应商的最后连接时间。该时间比一分钟更新一次或两次。对于更新，我使用此查询：

> 更新供应商自然加入 tmp_vendors 设置供应商.last_conn_time = tmp_vendors.last_conn_time

我在 mysqld.log 中不断得到的是：

> [警告] 由于 BINLOG_FORMAT = STATEMENT，使用语句格式写入二进制日志的不安全语句。从另一个表中选择后写入具有自动增量列的表的语句是不安全的，因为检索行的顺序决定了将写入哪些（如果有）行。此顺序无法预测，并且可能在主从服务器上有所不同。

那么有没有办法关闭这个警告（仅在当前的数据库连接上）或者有没有更好的做法呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T15:22:38.287

如果从属服务器断电，内存表将是空白的，这将导致复制问题。因此，只要您从内存表更新表，您就可能会收到此警告。

不幸的是，目前没有办法在 MySQL 中禁止记录警告消息。

如果您提供更多详细信息，我们可能会为您现在的做法提供替代解决方案。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-19T14:28:34.160

Is your memtable indexed on 'vendor id' or similar? It sounds like the update to 'vendors' is getting confused by which entry for 'last_conn_time' to use. Would it be rational to keep only one entry / vendor in the memtable using 'insert.. on duplicate key update last_conn_time...'?

# javascript - 设置 Dojo Mobile Switch 以更改 Javascript 中显示的值不起作用

> ID：11562847
> 
> 赞同：0
> 
> 时间：2012-07-19T14:18:56.523
> 
> 标签：javascript, html, dojo

所以我对 Dojo 开关有一个问题，这真的很烦人！我希望有人可以帮助我摆脱一遍又一遍地为此绞尽脑汁（这可能是我没有看到的简单事情）。

基本上，我想运行一个 if 语句来确定当用户加载相关页面时开关应该是“打开”还是“关闭”。这听起来很容易，所以这就是我试图做的：

```
document.getElementById('reqPasswordSettingToggle').value = 'on'; 
```

所以这不起作用，因为在运行时，id 与交换机分离，所以它不知道它设置为“on”的值是什么。所以，我认为下一段代码会起作用：

```
document.getElementsByName("passwordSwitch").value = "off"; 
```

在运行时，交换机确实有可用的名称，并且这种访问名称的合法方式应该可以工作。它没有。我从 if 语句中打印了一些调试信息，它告诉我它已成功更改了值，但这并没有反映在屏幕上。为什么？我希望有人会知道答案！

如果您需要更多信息，请告诉我，但这只是尝试根据 JS 中的简单 if 语句将此移动开关设置为“开”或“关”。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:35:41.177

我没有意识到您可以使用 dijit 表示法来处理这个问题：

```
var widget = dijit.byId("switch");
widget.set("value", "on"); 
```

这很有魅力！

# internet-explorer - 是否可以在 IE ActiveX 控件中唤起 Chrome Frame

> ID：11562853
> 
> 赞同：0
> 
> 时间：2012-07-19T14:19:06.993
> 
> 标签：internet-explorer, activex, google-chrome-frame

我有一个使用嵌入式 IE 作为查看器的应用程序。然而 IE 缺少 Google Chrome Frame (GCF) 中可用的所需功能，但不幸的是 GCF 在 IE ActiveX 控件中不起作用，而仅在 IE 应用程序中起作用。

由于 GCF 是 ActiveX 对象，是否可以在 HTML 文档（用于查看）中编写简单的 vbscript/jscript 来加载 GCF 并在嵌入式 IE 中呈现内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-30T08:11:16.293

您可以使用`ActiveX for Chrome`扩展。

1.  在地址栏输入“gcf:about:version”。
2.  右键单击以弹出右侧菜单。
3.  单击检查元素，您将获得一个窗口。
4.  点击窗口的系统图标，选择打开的New Window Item。
5.  将扩展安装到 GCF 中。

玩得开心！

# c# - 将 RemoteAttribute 与嵌套子集合一起使用

> ID：11562856
> 
> 赞同：0
> 
> 时间：2012-07-19T14:19:19.967
> 
> 标签：c#, asp.net, asp.net-mvc-3, validation, data-annotations

我有两个视图模型，一个聚合另一个集合：

```
class Parent 
{
   public string Key { get; set; }
   public IList<Child> Children { get; set; }
}

class Child
{
   public string Key { get; set; }

   [Required, Remote("VerifyNameUnique", "Parent", AdditionalFields = "Key", ErrorMessage = "The name must be unique.")]
   public string Name { get; set; }
} 
```

我有一个控制器动作

```
public ActionResult VerifyNameUnique(string key, string name)
{
    var result = // ... verify uniqueness
    return Json(result, JsonRequestBehavior.AllowGet);
} 
```

还有一个观点：

```
@model Parent
@Html.HiddenFor(m => m.Key)
@for(var i=0; i<Model.Children; i++)
{
   @Html.HiddenFor (m => m.Children[i].Key)
   @Html.LabelFor(m => m.Children[i].Name)
   @Html.EditorFor (m => m.Children[i].Name)
} 
```

当我的父/子编辑器模板调用该操作来验证任何名称字段时，它会发送一个查询字符串`?Children[0].Key=abc&Children[0].Name=Fred`，其中`0`是刚刚编辑的子项的索引`i`。

`VerifyNameUnique`由于前缀，这不会绑定到参数。我尝试使用`BindAttribute`前缀集，但前缀因`i`.

编写自定义模型绑定器是一种选择，但现在对于这个简单的场景来说似乎有点过分了。有什么更好的我可以做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:35:39.510

这根本不支持。因此，您必须编写自定义模型绑定器或自定义远程验证属性。话虽这么说，您要实现的目标可能不是一个好主意，因为如果用户单击提交按钮，将为集合中的每个字段发送 AJAX 请求，这不是很有效。我可能会直接在父级的集合属性上使用自定义远程验证字段，以便通过单次往返服务器来验证所有内容。

# ruby-on-rails - 重构respond_to Rspec

> ID：11562859
> 
> 赞同：0
> 
> 时间：2012-07-19T14:19:23.110
> 
> 标签：ruby-on-rails, ruby, rspec, tdd

我正在关注 Michael Hartl 的精彩 Rails 教程，但我想知道是否有办法在我的用户规范中重构它。这是非常重复的，想知道是否有办法让它变干一点。

```
it { should respond_to(:name) }
it { should respond_to(:email) }
it { should respond_to(:password_digest) }
it { should respond_to(:password) }
it { should respond_to(:password_confirmation) }
it { should respond_to(:remember_token) }
it { should respond_to(:authenticate) }
it { should respond_to(:admin) }
it { should respond_to(:authenticate) }
it { should respond_to(:microposts) }
it { should respond_to(:feed) }
it { should respond_to(:relationships) }
it { should respond_to(:followed_users) }
it { should respond_to(:following?) }
it { should respond_to(:follow!) }
it { should respond_to(:followers) }
it { should respond_to(:reverse_relationships) } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T14:24:40.460

```
[:name, 
 :email, 
 ...
].each do |attrib|
  it { should respond_to(attrib) }
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T15:07:15.513

您可以传递任意数量`respond_to`的方法名称：

```
it { should respond_to(:name, :email, :password) } 
```

与为每个属性创建单独的示例相比，这样做的一个好处是运行速度更快，因为它是一个示例而不是 n 个示例。

综上所述：我建议不要像这样在测试中指定所有公共属性。这是结构，而不是行为[1]。你的用户模型必须有一些行为保证它需要每个属性。我会专注于指定这些行为（使用模型的公共 API），而不用担心指定实现细节（例如模型具有哪些属性）。

我发现`should respond_to`有用的一次是当我有一个希望多个类实现的公共接口时。我创建了一个共享示例组，它以最简单的形式指定类的实例对接口的所有部分的响应。

[1] [http://blog.davidchelimsky.net/2012/02/12/validations-are-behavior-associations-are-structure/](http://blog.davidchelimsky.net/2012/02/12/validations-are-behavior-associations-are-structure/)

# c# - AutoMapper 将源对象上的单个列表映射到目标对象上的两个列表

> ID：11562860
> 
> 赞同：3
> 
> 时间：2012-07-19T14:19:28.397
> 
> 标签：c#, mapping, automapper, dto, domain-object

我正在尝试使用 AutoMapper 从包含对象列表的域对象进行映射，其中我有一个布尔属性，我想使用 AutoMapper 用来将该列表拆分为目标对象上的两个目标的属性.

**我的基本域看起来像这样（来源）**

```
//Domain object
public class Article
{
  public bool IsActive { get; set; }
} 
```

所以我的来源将是一个**IList<Article>**

**我的观点看起来像这样（目的地）**

```
//DTO
public class ViewAllArticles
{
  public IList<ViewArticle> ActiveArticles { get; set; }
  public ILIst<ViewArticle> InactiveArticles { get; set; }
}

public class ViewArticle
{
  public bool IsActive { get; set; }
} 
```

**通缉映射**

```
//wanted mapping code (source to destination)
Mapper.Map<IList<Article>, ViewAllArticles>(collectionOfAllArticles) 
```

其中 ActiveArticles 仅包含具有“IsActive=true”的文章，反之亦然用于 InactiveArticles。

希望你们中的一个人可以帮助我开始做这种映射，我会发现它非常有用。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T14:44:55.233

你可以这样做

```
internal class StartNewDemo
{
    public static void Main(string[] args)
    {
        Mapper.CreateMap<IList<Article>, ViewAllArticles>()
            .ForMember(map => map.ActiveArticles, opt => opt.MapFrom(x => x.Where(y => y.IsActive)))
            .ForMember(map => map.InactiveArticles, opt => opt.MapFrom(x => x.Where(y => !y.IsActive)));

        var list = new List<Article>() { new Article { IsActive=true }, new Article { IsActive = false } };
        var result = Mapper.Map<List<Article>, ViewAllArticles>( list );
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:28:08.557

```
Mapper.CreateMap<IList<Article>, ViewAllArticles>()
  .AfterMap( (arts , artsvm) => 
{
   //var artsvm = new ViewAllArticles();
   artsvm.ActiveArticles = arts.Where(a=> IsActive==true).ToList();
   artsvm.InactiveArticles = arts.Where(a=> IsActive==false).ToList();
} 
```

您也可以使用 ConvertUsing，唯一的区别是您将从 a 开始， `new ViewAllArticles`因为您将负责创建它。我在这里没有这样做的唯一原因是因为我不记得 ConvertUsing 是否允许多行 lambda，但我实际上会尝试 ConvertUsing 并查看它是否有效。

# sql-server - 为什么 TClientDataSet 会为 WideText 字段获取错误的类型？

> ID：11562865
> 
> 赞同：2
> 
> 时间：2012-07-19T14:19:36.133
> 
> 标签：sql-server, delphi, ado, delphi-xe

我正在使用 Delphi XE 的服务，我从客户端收到一个 ClientDataset。当我检查 ftWideText 字段的类型时，系统检测到该字段是 ftBlob。为了理解原因，我已将 ClientDataset 保存到一个文件中，但我得到的 XML 包含该字段定义的错误。我得到：

```
<FIELD attrname="TEXTTEST" fieldtype="bin.hex" SUBTYPE="" SUBTYPE="WideText" /> 
```

正确时属性 SUBTYPE 出现两次：

```
<FIELD attrname="TEXTTEST" fieldtype="bin.hex" SUBTYPE="WideText" /> 
```

此问题仅出现在服务器上；其他工作正常。我不知道问题出在哪里，如果是Delphi，ADO，SQL Server。

如果我将 Web 服务更改为使用相同数据库的另一台计算机，则一切正常。我认为这是计算机上安装的组件的 ADO 问题。

**更新：**我在使用 Windows 2003 Server 计算机时遇到了同样的问题。两台装有 MDAC 2.8 SP2（ODBC 组件版本 3.526）的计算机都失败了。我在其中一台计算机上安装了 Microsoft SQLServer 2008 R2，问题已解决。我需要知道使用 SqlServer2008 安装或重新安装了什么来解决问题。显然与 ADO 有关，但现在我有两台机器具有相同版本的 ADO，只有一台出现故障。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T16:30:22.500

毫无疑问，这个问题与 ADO 组件有关。组件的版本是6.0，升级到6.1问题就解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:18:45.387

最后，问题与 Microsoft MDAC ADO 组件无关。问题是有这个问题的计算机有旧版本的 Midas.dll。该 dll 与 Delphi ClientDataset 相关。该问题已修复，将服务器 Midas.dll 替换为相同版本的客户端。

# python - 更新用户的访问令牌并在用户离线时发布

> ID：11562883
> 
> 赞同：1
> 
> 时间：2012-07-19T14:20:23.347
> 
> 标签：python, facebook, facebook-graph-api, oauth-2.0, server-side

我有一个 Facebook 应用程序，可以在客户端处理与 Facebook 的大多数交互，但是，我最终需要在用户离线时发布到用户的墙上。我目前正在存储用户的 ID 和访问令牌，但我不知道如何更新访问令牌。

我认为这只是调用传递我的应用程序的图形方法的问题，秘密和用户 ID 以获取新的访问令牌，因为用户之前已经为应用程序提供了所有必要的权限，但我似乎找不到任何东西像这样在文档上。我在这里采取了正确的方法还是我应该做些什么才能以离线用户的身份发布？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T20:20:33.063

Facebook 已经删除了第三方应用程序的离线用户的概念，如果用户没有积极使用您的应用程序，那么令牌过期是合理的。您可以将短期令牌延长至两个月。请参阅[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)

# python - 组合加到零

> ID：11562888
> 
> 赞同：2
> 
> 时间：2012-07-19T14:20:39.833
> 
> 标签：python, algorithm, complexity-theory

给定五个排序列表：List1、List2、List3、List4、List5，每个列表的长度为 n。如果有 5 个 (int) 数字（每个列表中的 1 个），求和为零返回 true。我的目标是确保算法是 O(n)。在我的脑海中，我可以考虑创建一个包含 5 个链表之和的哈希映射，或者评估这 5 个列表，例如 [o(n*n*n*n*n)]。我正在寻找优化或降低复杂性的方法，但我陷入了困境。

我在 Python 中的代码：

```
def getIndicesFromFiveArrays(List1,List2,List3,List4,List5,t):
    a,b,c,d,e=0,0,0,0,0
    while(List1[a]+List2[b]+List3[c]+List4[d]+List5[e]!=t):
        b=b+1
        if b==len(List2):
            return (-1,-1)
        if List1[a]+List2[b]+List3[c]+List4[d]+List5[e]<t:
            a=a+1
            b=b-1
        c=c-1
        d=d-1
        e=e-1
            if a==len(List1):
                return (-1,-1)
    return (a,b,c,d,e) 
```

编辑1：顺便说一句，这不是作业，您可以查看我的其他问题并自己验证。谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T21:21:16.963

受 MRAB 的评论启发，有一个 O(n^3) 解决方案。

首先，将列表 1 中的每个值与列表 2 中的每个值组合起来，并将其存储在一个集合中。调用结果集 1and2，它有 n^2 个值。

接下来，将集合 1and2 与列表 3 组合。调用结果集 1and2and3，它有 n^3 个值，需要 n^3 步来构造。

接下来，组合列表 4 和 5。调用结果集 4and5，它有 n^2 个值。

最后，检查集合 4and5 中的任何值是否等于集合 1and2and3 中的值的倒数。这一步需要 n^2 步。

这种方法使用 O(n^3) 空间和 O(n^3) 时间。

正如 Karoly Horvath 指出的那样，您实际上不需要存储集合 1and2and3，您可以在最后一步从集合 1and2 动态构建它。这种方法仅使用 O(n^2) 空间，但仍需要 O(n^3) 时间。这是代码：

```
l1 = [1,2,3,4,5,10]
l2 = [1,2,3,4,5,11]
l3 = [1,2,3,4,5,12]
l4 = [1,2,3,4,5,13]
l5 = [1,2,3,4,5,-46]

def test():
    l1_2 = [a + b for a in l1 for b in l2]
    set4_5 = set([a + b for a in l4 for b in l5])
    return any([True for x in l1_2 for y in l3 if -(x + y) in set4_5])

print test() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:57:14.927

如果有 2 个列表，您将从列表 1 中获取一个数字，然后在列表 2 中查找该数字的负数。如果您将列表 2 替换为一个集合，则总体复杂度将为 O(n)。

如果有 3 个列表，您将从列表 1 中获取一个数字，然后从列表 2 中获取一个数字，复杂度为 O(n^2)。如果将列表 3 替换为一组，则总体复杂度为 O(n^2)。

所以我认为 5 个列表/集合的整体复杂性不能降低到 O(n^4) 以下。

# css - 通过 IE7 访问时将用户重定向到消息页面

> ID：11562892
> 
> 赞同：4
> 
> 时间：2012-07-19T14:20:41.740
> 
> 标签：css, ruby-on-rails-3, internet-explorer-7

我正在为我的网站使用 ruby​​ on rails 3 并且快完成了，该网站很快就会上线（星期一），但我遇到了 IE7 兼容性问题，所以作为临时措施，我想让用户重定向到“404”式页面，如果他们使用的是 IE7，它只会有一些基本信息说明现在尝试其他浏览器，直到问题得到解决

我将如何在 Rails 3 中解决这个问题？过去有没有人做过这样的事情？我不想进入我应该/应该支持 IE7 的话题，我要去，只是比我想象的要花一点时间

对此的任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-19T14:26:12.187

你可以做一个脚本来重定向：

```
<!--[if IE 7]>
  <script type="text/javascript">
    window.location = "http://www.google.com/";
  </script>
<![endif]--> 
```

或者一个html：

```
<!--[if IE 7]>
  <meta http-equiv="REFRESH" content="0;url=http://www.google.com/">
<![endif]--> 
```

或者干脆留言说本站不支持

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T14:29:59.453

如果你能够使用 jQuery，你可以做一个简单的浏览器版本测试，然后重定向到适当的页面并设置一个 cookie：

```
 //IE 7 browser detection
    if ($.browser.msie) {
        var version = $.browser.version;

        if (version == '7.0') {
            var cookie = $.cookie('IE7');

            if (cookie != 'set') {
                $.cookie('IE7', 'set');

                window.location = '404-url-string';

            }

            window.location = '404-url-string';

        }
    } 
```

您还需要引入 jquery cookie 插件来设置 cookie。'404-url-string' 将是您指向的页面的路径名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T14:26:58.190

作为临时措施，带有 Javascript 重定向的 IE 条件是否有效？

```
 <!--[if IE 7]>
    <script type="text/javascript">
      window.location = "/upgrade_browser.html";
    </script>
 <![endif]--> 
```

**来源：[Internet Explorer 浏览器版本用户代理的 Javascript 重定向？](https://stackoverflow.com/questions/7407182/javascript-redirect-for-internet-explorer-browser-version-user-agent)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T14:30:34.783

一点点的 javascript 应该可以解决这个问题。

这是 JavaScript`navigator`对象的一个​​小演示：

```
<script type="text/javascript">

txt = "<p>Browser CodeName: " + navigator.appCodeName + "</p>";
txt+= "<p>Browser Name: " + navigator.appName + "</p>";
txt+= "<p>Browser Version: " + navigator.appVersion + "</p>";
txt+= "<p>Cookies Enabled: " + navigator.cookieEnabled + "</p>";
txt+= "<p>Platform: " + navigator.platform + "</p>";
txt+= "<p>User-agent header: " + navigator.userAgent + "</p>";

document.getElementById("example").innerHTML=txt;

</script> 
```

请注意，这实际上是直接取自 W3Schools（我通常不建议这样做，但对于这个问题，这很好）

无论如何，你会想要这样的东西：

```
<script type="text/javascript">
if(navigator.appName=="Internet Explorer" && navigator.appVersion == "7.0.Whatever") //maybe its "IE", I didn't actually check. Sorry lol, don't have time to test this out
{
    window.location.href = "YourErrorPageFileName";
}
</script> 
```

将该代码放入您的登录页面（或母版页，无论如何），您应该一切顺利。

旁注：不知道为什么代码会这样格式化。猜猜 StackOverflow 在某些条件下会奇怪地解析斜线

# assembly - 如何在汇编中使用 ADC？

> ID：11562895
> 
> 赞同：5
> 
> 时间：2012-07-19T14:20:49.107
> 
> 标签：assembly, x86

```
.MODEL SMALL
.STACK 1000
.DATA

MSGA DB 13,10,"Input first number: ","$"
MSGB DB 13,10,"Input second number:","$"
MSGC DB 13,10,"The sum is: ","$"

NUM1 db ?
NUM2 db ?
NUM3 db ?

.CODE

MAIN PROC NEAR

MOV AX, @DATA
MOV DS, AX

; get first number
LEA DX, MSGA
MOV AH, 09h
INT 21h

MOV AH, 01
INT 21H
SUB AL, '0'

MOV BL, AL

MOV AH, 01
INT 21H
SUB AL, '0'

MOV CL, AL

; get second number
LEA DX, MSGB
MOV AH, 09h
INT 21h

MOV AH, 01
INT 21H
SUB AL, '0'

MOV DL, AL

MOV AH, 01
INT 21H
SUB AL, '0'

MOV DH, AL

; add
ADD CL, DH 
ADC BL, DL
MOV NUM1, CL
ADD NUM1, '0'
MOV NUM2, BL
ADD NUM2, '0'

; output sum
LEA DX, MSGC
MOV AH, 09h
INT 21h

MOV DL, NUM2
MOV AH, 02H
INT 21h

MOV DL, NUM1
MOV AH, 02H
INT 21h

MOV AH, 4Ch
INT 21h

MAIN ENDP
END MAIN 
```

以上是我在汇编中添加 2 个两位数的代码。我想知道为什么ADC不起作用。如果添加时个位数未获得进位，则我的代码有效。但并非如此。我是否误解了 ADC 的真正作用？我应该如何处理我的代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T14:39:59.067

您似乎正在使用十进制数学，但您没有使用`AAA`. `ADC`符合您的期望，但是使用该代码，第一次加法永远不会有实际进位（毕竟 9+9 不大于 255）。

所以解决方案当然是使用`AAA`，像这样（未测试）：

```
add al,dl
aaa        ; takes no arguments and works on al
add ah,dh  ; adc not necessary, aaa already incremented ah if there was a carry 
```

`AAA`( [ASCII Adjust for Addition](http://faydoc.tripod.com/cpu/aaa.htm) ) 测试是否`al`大于 9，如果是：

*   调整`al`，
*   设置进位标志，并且
*   增量`ah`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:31:27.903

在此处查看此问题，答案解释了 ADC - Add with carry 的工作原理[。](https://stackoverflow.com/questions/4153852/assembly-adc-add-with-carry-to-c)基本上，您需要首先使用普通的 ADD 指令将低位字节相加。然后使用 ADC 将高位字节相加（带进位相加），如果低位字节相加产生进位，ADC 将添加进位。

例如，如果您要添加 AX 和 BX，您将执行以下操作：

```
add  al, bl
adc  ah, bh   ; include the carry if previous add generated one 
```

正如您对问题的评论所提到的，您实际上是通过获取每个 ASCII 字符然后从中减去“0”来执行十进制算术。这些操作中的每一个都只会生成一个介于 0 和 9 之间的二进制数，并将其存储在 8 位寄存器中。正如评论所说，将两个小于 10 的数字相加永远不会导致进位，只有当结果大于 256 时才会发生进位。

如果您继续使用您的方法执行此任务，则需要手动检查两个低位小数的加法是否导致进位，方法是检查加法的结果是否大于 10 以及是否减去 10从数字中，然后将 1 加到高位数字计算中。

那有意义吗？

这是家庭作业吗？如果是的话，作业的目的是学习进位的工作原理还是只是编写一个程序来将两个两位数相加？

# sql - 为什么我的函数返回逗号分隔列表而不是行 (SQL Server)？

> ID：11562896
> 
> 赞同：3
> 
> 时间：2012-07-19T14:20:52.297
> 
> 标签：sql, function, scalar

我有一个通常返回一个值的函数。但是，当它可以返回多行时，它会返回所有值的逗号分隔字符串。我是使用函数的新手，所以我想知道它是如何做到的？它是循环的吗？SELECT 语句不是只运行一次吗？这是我的代码：

```
CREATE FUNCTION dbo.list_of_cities (@fruit VARCHAR(10))
RETURNS VARCHAR(1000)
AS
BEGIN
    DECLARE @output VARCHAR(1000)
    SELECT @output = ISNULL(@output + ', ', '') + stores_table.city
    FROM fruits_table INNER JOIN stores_table
    ON fruits_table.store = stores_table.store
    WHERE fruit = @fruit
    RETURN @output
END 
```

基本上我希望这个函数返回一个出售水果的所有城市的列表。fruits_table 有两列：水果和商店。stores_table 有两列：store 和 city。大多数情况下，这只会返回一个城市，但有时一种水果会在多个商店出售，这意味着这将返回多行。这个函数究竟如何将行连接成逗号分隔的字符串？该功能工作正常，但我只是好奇它为什么/如何这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T14:24:16.177

select 语句只运行一次，但由于您在查询中有一个计算定义，它会为每一行计算它。由于它也在每一行上分配，因此它的值会`@output`发生变化，并且您会获得完整的逗号分隔列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:24:42.940

您有一个带有赋值 ( `@output = @output+...`) 的选择，因此返回的每一行都将一个新结果附加到`@output`变量中（因为`@output`在右侧值中重新引用了 的值）。

# zend-framework - 指定的控制器无效 (auth)

> ID：11562899
> 
> 赞同：1
> 
> 时间：2012-07-19T14:21:02.530
> 
> 标签：zend-framework

我一直在尝试编写一个基本的身份验证系统，作为我应该使用的项目的一部分，以了解 Zend 框架。我一直在使用 Zend CLI 工具来帮助创建我的应用程序。我有一个名为 Admin 的模块，其中有一个名为 Auth 的控制器。但是，当我尝试在浏览器中导航到控制器时，出现以下错误：

```
An error occurred

Page not found

Exception information:

Message: Invalid controller specified (auth)

Stack trace:

#0 /home/www-data/zend.danielgroves.net/htdocs/library/Zend/Controller/Front.php(954): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http))
#1 /home/www-data/zend.danielgroves.net/htdocs/library/Zend/Application/Bootstrap/Bootstrap.php(97): Zend_Controller_Front->dispatch()
#2 /home/www-data/zend.danielgroves.net/htdocs/library/Zend/Application.php(366): Zend_Application_Bootstrap_Bootstrap->run()
#3 /home/www-data/zend.danielgroves.net/htdocs/public/index.php(26): Zend_Application->run()
#4 {main}  
Request Parameters:

array (
  'module' => 'admin',
  'controller' => 'auth',
  'action' => 'index',
) 
```

您可以前往 zend.danielgroves.net 亲自查看

据我所知，所有内容均已正确命名，请查看下面的屏幕截图，了解 CLI 工具如何构建所有内容。这是我在尝试构建此登录系统时遵循的指南[http://akrabat.com/zend-auth-tutorial/](http://akrabat.com/zend-auth-tutorial/)。我刚刚到达登录屏幕截图的部分（第一张图片）。

![Zend 目录/文件结构](../Images/e8aa757b2aa797bad4eb9f8ea3f533b7.png)

任何帮助将不胜感激。

**编辑 1**

我的 application.ini 文件发布了@ByteNudger 建议的更改：

```
[production]
phpSettings.display_startup_errors = 0
phpSettings.display_errors = 0
includePaths.library = APPLICATION_PATH "/../library"
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"
appnamespace = "Application"
resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers"
resources.frontController.params.displayExceptions = 0

resources.db.adapter = "Pdo_Mysql"
resources.db.params.charset = "utf8"
resources.db.params.host = "localhost"
resources.db.params.username = ""
resources.db.params.password = ""
resources.db.params.dbname = ""

resources.frontController.moduleDirectory = APPLICATION_PATH "/modules"

resources.modules[] = "" (section [bootstrap])

[staging : production]

[testing : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1

[development : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
resources.frontController.params.displayExceptions = 1 
```

application.ini 生成的 PHP 错误更改：

```
PHP Fatal error:  Uncaught exception 'Zend_Config_Exception' with message 'syntax error, unexpected '(' in /home/www-data/zend.danielgroves.net/htdocs/application/configs/application.ini on line 20' in /home/www-data/zend.danielgroves.net/htdocs/library/Zend/Config/Ini.php:182
Stack trace:
#0 /home/www-data/zend.danielgroves.net/htdocs/library/Zend/Config/Ini.php(202): Zend_Config_Ini->_parseIniFile('/home/www-data/...')
#1 /home/www-data/zend.danielgroves.net/htdocs/library/Zend/Config/Ini.php(126): Zend_Config_Ini->_loadIniFile('/home/www-data/...')
#2 /home/www-data/zend.danielgroves.net/htdocs/library/Zend/Application.php(386): Zend_Config_Ini->__construct('/home/www-data/...', 'development')
#3 /home/www-data/zend.danielgroves.net/htdocs/library/Zend/Application.php(85): Zend_Application->_loadConfig('/home/www-data/...')
#4 /home/www-data/zend.danielgroves.net/htdocs/public/index.php(24): Zend_Application->__construct('development', '/home/www-data/...')
#5 {main}
  thrown in /home/www-data/zend.danielgroves.net/htdocs/library/Zend/Config/Ini.php on line 182 
```

**编辑2：**

好的，我刚刚尝试了下面罗斯史密斯二世在回答中提出的建议。我的 application.ini 文件现在显示：

```
[production]
phpSettings.display_startup_errors = 0
phpSettings.display_errors = 0
includePaths.library = APPLICATION_PATH "/../library"
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"
appnamespace = "Application"
resources.frontController.controllerDirectory = APPLICATION_PATH "/modules/admin/controllers"

resources.frontController.params.displayExceptions = 0

resources.db.adapter = "Pdo_Mysql"
resources.db.params.charset = "utf8"
resources.db.params.host = "localhost"
resources.db.params.username = ""
resources.db.params.password = ""
resources.db.params.dbname = ""

resources.frontController.moduleDirectory = APPLICATION_PATH "/modules"
resources.frontController.defaultModule = "admin"
resources.layout.layoutPath = APPLICATION_PATH "/modules/admin/layouts/scripts/"
resources.modules[] =

[staging : production]

[testing : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1

[development : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
resources.frontController.params.displayExceptions = 1 
```

我在浏览器中收到此错误：

```
Fatal error: Uncaught exception 'Zend_Controller_Dispatcher_Exception' with message 'Invalid controller specified (error)' in /home/www-data/zend.danielgroves.net/htdocs/library/Zend/Controller/Dispatcher/Standard.php:248 Stack trace: #0 /home/www-data/zend.danielgroves.net/htdocs/library/Zend/Controller/Front.php(954): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http)) #1 /home/www-data/zend.danielgroves.net/htdocs/library/Zend/Application/Bootstrap/Bootstrap.php(97): Zend_Controller_Front->dispatch() #2 /home/www-data/zend.danielgroves.net/htdocs/library/Zend/Application.php(366): Zend_Application_Bootstrap_Bootstrap->run() #3 /home/www-data/zend.danielgroves.net/htdocs/public/index.php(26): Zend_Application->run() #4 {main} Next exception 'Zend_Controller_Exception' with message 'Invalid controller specified (error)#0 /home/www-data/zend.danielgroves.net/htdocs/library/Zend/Controller/Front.php(954): Zend_Controller_Dispatcher_Standard->dispatch(O in /home/www-data/zend.danielgroves.net/htdocs/library/Zend/Controller/Plugin/Broker.php on line 336 
```

自己看看：http: [//zend.danielgroves.net/admin/auth/](http://zend.danielgroves.net/admin/auth/)

**编辑 3**

```
[production]
phpSettings.display_startup_errors = 0
phpSettings.display_errors = 0
includePaths.library = APPLICATION_PATH "/../library"
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"
appnamespace = "Application"
resources.frontController.controllerDirectory = APPLICATION_PATH "/modules/admin/controllers"

resources.frontController.params.displayExceptions = 0

resources.db.adapter = "Pdo_Mysql"
resources.db.params.charset = "utf8"
resources.db.params.host = "localhost"
resources.db.params.username = ""
resources.db.params.password = ""
resources.db.params.dbname = ""

resources.modules[] = ""

[staging : production]

[testing : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1

[development : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
resources.frontController.params.displayExceptions = 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:42:25.380

让模块在 Zend 中正常工作是非常具有挑战性的。我们遇到了许多意想不到的问题，例如正在初始化多个数据库连接（每个模块一个）。

首先，我将更改您`application.ini`的内容以包括以下内容：

```
resources.frontController.controllerDirectory = APPLICATION_PATH "/modules/Admin/controllers"
resources.frontController.defaultModule = "Admin"
resources.frontController.moduleDirectory = APPLICATION_PATH "/modules"

resources.layout.layoutPath = APPLICATION_PATH "/modules/Admin/layouts/scripts/"

resources.modules[] = 
```

如果这没有帮助，请尝试更改`Admin`为，`admin`因为我们从未使用过大写的模块名称。

如果您仍然卡住，请发布您的`application.ini`文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:58:09.957

为了使模块在 ZF 1.11 的应用程序中工作，我所添加的只是我的 application.ini 中的这三行。

```
resources.frontController.moduleControllerDirectoryName = "controllers"
resources.modules = ""
resources.frontController.moduleDirectory = APPLICATION_PATH "/modules" 
```

还要使自动加载正常工作，请确保您不要忘记`Bootstrap.php`在每个模块中放置一个空，如下所示：

```
<?php
class Admin_Bootstrap extends Zend_Application_Module_Bootstrap
{
    //put your code here
} 
```

它也可能有助于一些配置来指定默认模块的前缀，我的看起来像：

```
resources.frontController.params.prefixDefaultModule = "" 
```

我的默认模块是控制器、模型和视图的原始应用程序目录。很像您当前的配置。

**[编辑]**

好吧，你已经陷入了一些混乱，也许你看看 Rob Allen 关于[ZF 1.x 模块](http://akrabat.com/zend-framework/bootstrapping-modules-in-zf-1-8/)的教程，这就是我学到的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T07:10:42.100

这是我几个月前做的事情

[您可以在https://github.com/harikt/blog](https://github.com/harikt/blog)查看整个代码

```
[production]
phpSettings.display_startup_errors = 0
phpSettings.display_errors = 0
includePaths.library = APPLICATION_PATH "/../library"
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"
appnamespace = "Application"
resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers"
resources.frontController.params.displayExceptions = 0
resources.frontController.moduleDirectory = APPLICATION_PATH "/modules"
resources.modules[] = ""
autoloadernamespaces[] = "BinaryKitten"
resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts/"
resources.view[] = 

[staging : production]

[testing : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1

[development : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
resources.frontController.params.displayExceptions = 1 
```

在 Bootstrap.php 中

```
<?php
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{
    public function _initControllerPlugins()
    {
        $plugin = Zend_Controller_Front::getInstance()->registerPlugin(
            new BinaryKitten_ModuleConfig()
        );
    }

    public function _initAutoload()
    {
        $moduleLoader = new Zend_Application_Module_Autoloader(
            array(
                'namespace' => '',
                'basePath'  => APPLICATION_PATH . "/modules/default"
            )
        );
        return $moduleLoader;
    }
} 
```

希望这有助于解决您的问题。

# javascript - YouTube JS API - onStateChange

> ID：11562902
> 
> 赞同：0
> 
> 时间：2012-07-19T14:21:11.423
> 
> 标签：javascript, html, javascript-events

我正在尝试将 YouTube 视频嵌入到我们客户的一个网站上，它需要能够在播放完毕后显示图像。我认为最简单的方法是删除包含的 div，以便显示底层图像。但是，我遇到了一点困难。我对 javascript 知之甚少，而且我通常将这项工作交给的小伙子现在不可用。

我遇到的问题是包含的 div 没有被删除。播放完成后，播放器仅显示相关视频列表 - 不会神奇地消失！

任何人都可以就我到目前为止编写的代码提供建议吗？

谢谢

-铝

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script>
<div id="ytapiplayer">
    You need Flash player 8+ and JavaScript enabled to view this video.
</div>
<script type="text/javascript">

var params = { allowScriptAccess: "always"  };
var atts = { id: "myytplayer" };
swfobject.embedSWF("http://www.youtube.com/v/VIDEO-ID?enablejsapi=1&playerapiid=ytplayer&version=3&autoplay=1&controls=0&modestbranding=1&showinfo=0&autohide=1",
                   "ytapiplayer", "621", "244", "8", null, null, params, atts);
// listen
function onYouTubePlayerReady(playerId) {
  var ytplayer = getElementById("myytplayer");
  ytplayer.addEventListener("onStateChange", "onytplayerStateChange");
}
// closediv 
function onytplayerStateChange(newState) {
   if (newState === 0){
        $('ytapiplayer').remove();
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:26:43.963

你的 jQuery 选择器是错误的。

```
$('ytapiplayer').remove(); 
```

你说寻找一个名为 ytapiplayer 的 html 元素，你需要使用 a`#`来表示它是一个 id。

所以该行应该是：

```
$('#ytapiplayer').remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:54:31.920

我知道这已经有一段时间了，但他的评论表明它仍然不起作用。

代码的另一个问题是他在哪里测试 newState，他应​​该在哪里测试 newState.data。

他有：

```
function onytplayerStateChange(newState) {
   if (newState === 0){
        $('ytapiplayer').remove();
   }
} 
```

需要是：

```
function onytplayerStateChange(newState) {
   if (newState.data === 0){
        $('ytapiplayer').remove();
   }
} 
```

# r - ggplot没有绘图

> ID：11562911
> 
> 赞同：1
> 
> 时间：2012-07-19T14:22:02.467
> 
> 标签：r, ggplot2

我已经看了一段时间了，有人看到这个 ggplot 语法有什么问题吗？我收到此错误：

```
Error: Discrete value supplied to continuous scale 
```

这是z：

```
 Month Value
1  2011-01-01    11
2  2011-02-01     5
3  2011-03-01     6
4  2011-04-01     6
5  2011-05-01     4
6  2011-06-01     5
7  2011-07-01     3
8  2011-08-01     9
9  2011-09-01    19
10 2011-10-01     3
11 2011-11-01     6
12 2011-12-01     2
13 2012-01-01     1
14 2012-02-01     4
15 2012-04-01     1
16 2012-05-01     2
17 2012-06-01    11
18 2012-07-01     5

ggplot(z, aes(Month, Value)) + 
  geom_bar(fill="orange",size=.3)  + 
  theme_bw() + scale_x_discrete(name="Date") +   
  scale_y_continuous("Number") +
  opts(title="Monthly issues", 
       axis.title.x = theme_text(face="bold", colour="#990000"), 
       axis.text.x  = theme_text(angle=90), 
       axis.title.y = theme_text(face="bold", colour="#990000", angle=90)
   ) + 
  geom_smooth(data=z,aes(Month,Value,group=1), method="lm", size=2, color="darkblue") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T14:40:31.270

啊哈！问题是您的`Month`专栏，正如您在评论中指出的那样，它存储为日期。R 认为这是一个连续变量，因此误差为`scale_x_discrete`。如果您想`as.character`将它与`geom_bar`.

# scala - 如何以 Scala 的函数式风格重写此函数？

> ID：11562912
> 
> 赞同：1
> 
> 时间：2012-07-19T14:22:07.567
> 
> 标签：scala, functional-programming

我正在尝试以功能样式重写函数。我知道功能不好。但是如何避免使用 var 字段`watermarkTime`？

该函数为具有连续增加时间戳的行设置第“1”天。如果时间戳小于上一行的时间戳，则设置天“2”。

```
case class Row(time: String, name: String, var day: Int)

val rows = List(new Row("09:18:52", "3_0711-082757_01001", 0),
                new Row("09:23:18", "3_0711-082757_01002", 0),
                new Row("09:33:43", "3_0711-082757_01004", 0),
                new Row("10:20:00", "3_0711-082757_01011", 0),
                new Row("05:03:38", "3_0711-082757_02001", 0),  // set secound day
                new Row("05:07:51", "3_0711-082757_02002", 0),
                new Row("05:13:02", "3_0711-082757_02003", 0),
                new Row("05:19:16", "3_0711-082757_02004", 0),
                new Row("10:54:27", "3_0711-082757_02015", 0),  // set first day 
                new Row("11:00:38", "3_0711-082757_02016", 0),
                new Row("11:07:28", "3_0711-082757_02017", 0))

def setDayFP(rows: List[Row]): List[Row] = {

  var watermarkTime = 0

  for (row <- rows) {

    val newTime = row.time.replaceAll(":","").toInt 

    if (watermarkTime < newTime) {
      watermarkTime = newTime
      row.day = 1
    }  else  {
      row.day = 2
    }
  }
  return rows 
} 
```

这是结果（按日期和名称排序）：

```
Row(09:18:52,3_0711-082757_01001,1)
Row(09:23:18,3_0711-082757_01002,1)
Row(09:33:43,3_0711-082757_01004,1)
Row(10:20:00,3_0711-082757_01011,1)
Row(10:54:27,3_0711-082757_02015,1)
Row(11:00:38,3_0711-082757_02016,1)
Row(11:07:28,3_0711-082757_02017,1)
Row(05:03:38,3_0711-082757_02001,2)
Row(05:07:51,3_0711-082757_02002,2)
Row(05:13:02,3_0711-082757_02003,2)
Row(05:19:16,3_0711-082757_02004,2) 
```

我正在寻找更好的解决方案。提前致谢！

庞戈

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T14:53:02.607

下面的解决方案

*   有一个不可变的列表类并使用复制而不是字段更新

*   使用`foldLeft`而不是循环

*   使用元组作为折叠的聚合器来携带`watermarkTime`

但是，我个人会坚持使用你的 for 循环和`var watermarkTime`，因为`foldLeft`它不会使其更具可读性。不过，我会保留`day: Option[Int]`和复制。

```
case class Row(time: String, name: String, day: Option[Int] = None)

val rows = List(new Row("09:18:52", "3_0711-082757_01001"),
                new Row("09:23:18", "3_0711-082757_01002"),
                new Row("09:33:43", "3_0711-082757_01004"),
                new Row("10:20:00", "3_0711-082757_01011"),
                new Row("05:03:38", "3_0711-082757_02001"),
                new Row("05:07:51", "3_0711-082757_02002"),
                new Row("05:13:02", "3_0711-082757_02003"),
                new Row("05:19:16", "3_0711-082757_02004"),
                new Row("10:54:27", "3_0711-082757_02015"),
                new Row("11:00:38", "3_0711-082757_02016"),
                new Row("11:07:28", "3_0711-082757_02017"))

def setDayFP(rows: List[Row]): List[Row] = {
  rows.foldLeft((0, List[Row]()))
               {case ((watermarkTime, resultRows), row) =>

    val newTime = row.time.replaceAll(":","").toInt

    val (newWatermarkTime, day) = 
      if (watermarkTime < newTime)
        (newTime, 1)
      else
        (watermarkTime, 2)

    (newWatermarkTime, row.copy(day = Some(day)) :: resultRows)
  }._2.reverse
}

setDayFP(rows).foreach(println) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T15:57:07.587

这是我的解决方案：

```
case class Row(time: String, name: String, day: Int)

def setDay(rs: List[Row], wt: String = ""): List[Row] = rs match {
  case x::xs => if(wt < x.time) x.copy(day=1) :: setDay(xs,x.time)
                else x.copy(day=2) :: setDay(xs,wt)
  case Nil => Nil
} 
```

将其用作`setDay(rows)`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T16:03:59.317

只是为了好玩：

```
case class Row(time: String, name: String, day: Int) {
  def timeAsInt = time.replaceAll(":", "").toInt
}

val rows = List(new Row("09:18:52", "3_0711-082757_01001", 0),
                new Row("09:23:18", "3_0711-082757_01002", 0),
                new Row("09:33:43", "3_0711-082757_01004", 0),
                new Row("10:20:00", "3_0711-082757_01011", 0),
                new Row("05:03:38", "3_0711-082757_02001", 0),  // set secound day
                new Row("05:07:51", "3_0711-082757_02002", 0),
                new Row("05:13:02", "3_0711-082757_02003", 0),
                new Row("05:19:16", "3_0711-082757_02004", 0),
                new Row("10:54:27", "3_0711-082757_02015", 0),  // set first day 
                new Row("11:00:38", "3_0711-082757_02016", 0),
                new Row("11:07:28", "3_0711-082757_02017", 0))

def setDayFP(rows: List[Row]): List[Row] = {
  lazy val rowStream:Stream[Row] = for((row, watermarkTime) <- rows.toStream.zip(watermarkStream)) yield
    row.copy(day = if(watermarkTime < row.timeAsInt) 1 else 2) 

  lazy val watermarkStream:Stream[Int] = 0 #:: rowStream.zip(watermarkStream).map{ case (row, watermarkTime) =>
    math.max(watermarkTime, row.timeAsInt)
  }

  rowStream.toList
}

setDayFP(rows) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T15:18:33.077

我试了一下，我认为这`foldLeft`不是去这里的路。这是我的解决方案：

```
def sdfp(rows: List[Row]): List[Row] = {
  var watermark = 0
  rows.map(row => {
    val time = row.time.replaceAll(":","").toInt
    if(watermark < time) {
      watermark = time
      row.day = 1
    } else {
      row.day = 2
    }
    row
  }
} 
```

`map`接受一个函数并将其应用于集合的所有元素。

**编辑**

我找到了解决这个问题的另一种方法：

```
def sdfp2(rows: List[Row]): List[Row] = {
  var watermark = 0
  for {
    row <- rows
    val time = row.time.replaceAll(":","").toInt
    val after = watermark < time
  } yield {
    if(after) { watermark = row; row.day = 1 } else row.day = 2
    row
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T14:54:40.643

根据您想要实现的功能，您至少有两种方法：

第一个解决方案是在一组可变数据结构上使用 foldLeft，这不是最实用的方法。这是您尝试以命令式样式执行的操作，我不明白为什么您需要在 setDayFP 末尾返回列表，因为您没有更改它。

```
 def foldLeftExample(rows:List[Row]) = {
    rows.foldLeft(0){
      case(previousWaterMarkTime,currentRow) => 
        val newTime = currentRow.time.replaceAll(":","").toInt
        if(previousWaterMarkTime<newTime){
          currentRow.day=1
          newTime
        }
        else{
          currentRow.day=2
          previousWaterMarkTime
        }
    }
  } 
```

折叠时，您将类型 A 的初始值传递给集合和一个接受 Tuple[A,YourCollectionType] 并返回 A 的函数。如果重构它，您会发现它看起来会更好：

```
/**
   * Updates the row and returns the new waterMark time
   *
   */
  def updateRow(row:Row,previousWaterMarkTime:Int):Int = {
    val newTime = currentRow.time.replaceAll(":","").toInt
    if(previousWaterMarkTime<newTime){
      currentRow.day=1
      newTime
    }
    else{
      currentRow.day=2
      previousWaterMarkTime
    }
  }

  def foldLeftExample(rows:List[Row]) = {
    rows.foldLeft(0){
      case(previousWaterMarkTime,currentRow) => updateRow(currentRow,previousWaterMarkTime)
    }
  } 
```

然而，正如我所说，这不是最好的方法，因为您正在改变 currentRow。

对于 FP 的新手来说，最好的方法更难理解……哎呀！有人在我面前发过。将我的答案作为您的答案与 mhs 的确切版本之间的中间版本

# html - 如何防止包含 HTML5 清单属性的网页包含在应用程序缓存中？

> ID：11562918
> 
> 赞同：1
> 
> 时间：2012-07-19T14:22:37.943
> 
> 标签：html

该页面[http://appcachefacts.info/](http://appcachefacts.info/)表示 HTML5 应用程序缓存可以“在线使用以显着减少加载时间”。

如何防止包含 html manifest 属性的网页被包含在应用程序缓存中（因为某些内容是在服务器上动态创建的）？

我正在使用嵌入式 Web 服务器。我更喜欢简单的（JavaScript、HTML）解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T17:03:37.687

您不能，引用清单的页面始终包含在应用程序缓存中。尝试使用清单引用创建一个虚拟静态页面并将其加载到`iframe`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-19T15:44:44.093

尝试将网页添加到缓存清单的 NETWORK 部分。

> NETWORK - 此标题下列出的文件需要连接到服务器，并且永远不会被缓存

[http://www.w3schools.com/html5/html5_app_cache.asp](http://www.w3schools.com/html5/html5_app_cache.asp)

希望这可以帮助！

# jquery - 尝试使用 jQuery 在开关上设置计时器

> ID：11562922
> 
> 赞同：2
> 
> 时间：2012-07-19T14:22:50.033
> 
> 标签：jquery, timer, switch-statement

在 Google（以及 StackOverflow 上的许多结果）的帮助下，我和我的同事设法拼凑了一个“旋转器”。www.buisnessinlake.com 右侧带有蓝色按钮的主图片供参考。

我们让它正常运行，但现在我们正试图让它以设定的时间间隔在不同的状态之间自动切换。我们现在正在使用开关来执行此操作，但想添加汽车部件。我找到了其他关于如何添加计时器的脚本示例，但没有一个可以与这样的开关一起使用的脚本示例，所以我不确定从这里去哪里。

这就是我们所处的位置：

```
 $(document).ready(function () {
    var theid = $("div.open").attr("id");

    //ACCORDION BUTTON ACTION   
    $('div.accordionButton').click(function () {
        // console.warn(theid);
        var theitem = $("#" + theid);
        var doanimation = true;
        if ($(this).attr("id") == theid) {
            doanimation = false;
        };

        theid = $(this).attr("id");

        if (doanimation) {
            switch (theid) {
                case "rotator_1":
                    $('div.arrow').animate({
                        left: '-24',
                        top: '-3'
                    }, 300, function () {
                        // Animation complete.
                    });
                    $('#picsunder').css("background-image", "url(../../content/images/rotator_1.png)");
                    $('#pics').fadeTo('slow', 0, function () {
                        //animationcomplete
                        $(this).css("background-image", "url(../../content/images/rotator_1.png)");
                        $(this).fadeTo('fast', 1);
                    });
                    break;

                case "rotator_2":
                    $('div.arrow').animate({
                        left: '-24',
                        top: '55'
                    }, 300, function () {
                        // Animation complete.
                    });
                    $('#picsunder').css("background-image", "url(../content/images/rotator_2.png)");
                    $('#pics').fadeTo('slow', 0, function () {
                        //animationcomplete
                        $(this).css("background-image", "url(../content/images/rotator_2.png)");
                        $(this).fadeTo('fast', 1);
                    });
                    break;

                case "rotator_3":                      
                    $('div.arrow').animate({
                        left: '-24',
                        top: '113'
                    }, 300, function () {
                        // Animation complete.
                    });
                    $('#picsunder').css("background-image", "url(../content/images/rotator_4.png)");
                    $('#pics').fadeTo('slow', 0, function () {
                        //animationcomplete
                        $(this).css("background-image", "url(../content/images/rotator_4.png)");
                        $(this).fadeTo('fast', 1);
                    });
                    break;

                case "rotator_4":
                    $('div.arrow').animate({
                        left: '-24',
                        top: '171'
                    }, 300, function () {
                        // Animation complete.
                    });
                    $('#picsunder').css("background-image", "url(../content/images/rotator_3.png)");
                    $('#pics').fadeTo('slow', 0, function () {
                        //animationcomplete
                        $(this).css("background-image", "url(../content/images/rotator_3.png)");
                        $(this).fadeTo('fast', 1);
                    });
                    break;

            }
        }
        //console.warn(theid);
        $("div.accordionButtonSelected").removeClass("accordionButtonSelected").addClass("accordionButton");
        $("div.accordionContentSelected").removeClass("accordionContentSelected").addClass("accordionContent");
        $(this).next().removeClass("accordionContent").addClass("accordionContentSelected");
        $(this).removeClass("accordionButton").addClass("accordionButtonSelected");
        $('div.accordionContent').slideUp('normal');
        $(this).next().slideDown('normal');
    });

    //HIDE THE DIVS ON PAGE LOAD    
    $("div.accordionContent").hide();

    //Opens DIV on load that has the ID of "open"
    $("div.open").trigger('click');

}); 
```

这是所要求的 HTML：

```
 <div id="photo_rotator">
 <div id="pics"></div>
 <div id="picsunder"></div>
 <div id="wrapper">
    <div class="arrow"></div>
    <div class="accordionButton open" id="rotator_1">Why Lake</div>
    <div class="accordionContent">@Html.ActionLink("Our prime location and business-friendly approach make Lake County the perfect location to live, work and play.", "Index", "WhyLake", Nothing, New With {.class = "rotator"})</div>
    <div class="accordionButton shadow" id="rotator_2">Opportunity Centers</div>
    <div class="accordionContent">@Html.ActionLink("Lake County’s three Business Opportunity Centers offer a myriad of programs and services to support your business.", "BusinessOpportunityCenters", "BusinessSupport", Nothing, New With {.class = "rotator"})</div>
    <div class="accordionButton shadow" id="rotator_3">Economic Coordinators</div>
    <div class="accordionContent">@Html.ActionLink("Lake County’s economic development coordinators are here to assist with the information or support your business needs.", "EconomicDevelopmentCoordinators", "BusinessSupport",  Nothing, New With {.class = "rotator"})</div>
    <div class="accordionButton shadow" id="rotator_4">Site Selection</div>
    <div class="accordionContent"><a class="rotator" href="http://propertyfinder.lakecountyfl.gov">With an abundance of available land and vacant building space, we can pinpoint the perfect site to locate your business.</a></div>
</div> 
```

关于如何添加一个简单的计时器以每 10 秒在每种情况之间切换的任何想法？最欣赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:32:47.983

首先取这里定义的那个大匿名函数

```
$('div.accordionButton').click(function () { 
```

并命名它

```
function doRotateImage(event)
{
   //stuff you already have
} 
```

然后你把你的按钮连接到它

```
$('div.accordionButton').click(doRotateImage); 
```

现在你制作了一个在计时器上旋转的功能

```
function autoRotate()
{
   doRotateImage();
   setTimeout( autoRotate, 10 * 1000);  
} 
```

现在在某处调用一次 autoRotate() 来启动它。

你将不得不修补它，但这是基本思想

# c# - 为什么我会拾取外来字符，如何删除它们？

> ID：11562924
> 
> 赞同：2
> 
> 时间：2012-07-19T14:22:53.367
> 
> 标签：c#, html, string, html-agility-pack

当我使用 HTML Agility Pack 抓取 H3 标记的 InnerText 时，与源代码相比，我拾取了额外的字符 (Â)。

我不确定这些字符来自哪里或如何删除它们。

**提取字符串：**

```
Â WeekÂ 1 
```

**HTML 源代码：**

```
<h3>
<span> </span>Week 1</h3> 
```

**当前代码：**

```
private void getWeekNumber(string url)
{
    HtmlAgilityPack.HtmlDocument htmlDoc = new HtmlAgilityPack.HtmlDocument();

    htmlDoc.Load(new System.IO.StringReader(url));

    foreach (HtmlAgilityPack.HtmlNode h3 in htmlDoc.DocumentNode.SelectNodes("//h3"))
    {
        MessageBox.Show(h3.InnerText);
    }
} 
```

**当前的解决方法**（从stackoverflow上的某个地方被盗，丢失了链接）：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);

request.Method = "GET";

using (var stream = request.GetResponse().GetResponseStream())
using (var reader = new System.IO.StreamReader(stream, Encoding.UTF8))
{
    result = reader.ReadToEnd();
}

HtmlAgilityPack.HtmlDocument htmlDoc = new HtmlAgilityPack.HtmlDocument();

htmlDoc.Load(new System.IO.StringReader(result));

foreach (HtmlAgilityPack.HtmlNode h3 in htmlDoc.DocumentNode.SelectNodes("//h3"))
{
    MessageBox.Show(h3.InnerText);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T14:57:19.633

您需要先设置编码，然后再执行...

```
htmlDoc.Load(new System.IO.StringReader(url), Encoding.UTF8); 
```

这告诉敏捷包字符是 UTF8 而不是其他编码。

您需要在此处执行此操作的原因是，这是解析错误的关键。在此之后，您将存储文字 Â 字符。

[在从 Internet 下载 HTML 后更改的字符串中的字符](https://stackoverflow.com/questions/2700638/characters-in-string-changed-after-downloading-html-from-the-internet)也可能很有趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:24:47.193

可能是你的字符编码，设置编码为 UTF-8

# android - 安卓。让开发人员知道抛出异常的最佳方法

> ID：11562925
> 
> 赞同：5
> 
> 时间：2012-07-19T14:22:56.723
> 
> 标签：android, exception-handling

抛出异常后，处理异常的最常见方法是什么。我并不是说要从异常中恢复过来，而不是关闭 Activity 或其他什么。我的意思是如何让开发人员知道错误号、StackTrace 和其他从异常中创建的日志文件？

将这些发送给开发人员的最常见方式是什么？或者这样做不常见？

您是否要求用户发送包含此信息的电子邮件？您是否在联系页面上实现某种形式，类似于网站上使用的形式，并自动发送信息？

开发人员如何处理这个问题？我真的很想从用户那里得到一些反馈，所以我知道我的应用程序在哪里以及是否会崩溃，但我不确定从哪里开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T14:26:37.737

检查[android.util.Log](http://developer.android.com/reference/android/util/Log.html)。

关于如何管理日志，由您决定。您可以在方法中将它们发送到服务器`Activity.onDestroy()`，或者专门请求它们给报告错误的用户。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T14:29:16.750

Android 操作系统具有内置功能，可帮助您处理此问题 :)

当 Android 应用程序抛出未处理的异常时，操作系统会自动准备堆栈跟踪并询问用户是否愿意将其发送给开发人员。[如果用户发送它，开发人员可以在http://market.android.com/publish](http://market.android.com/publish)的开发人员控制台中查看堆栈跟踪。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-19T14:30:50.540

一种简单的方法是将所有容易发生异常的代码包含在`try-catch`块中，并且每当发生异常时，将它们写入应用程序缓存目录中的文本文件（最好在 sd 卡上）。稍后，压缩文本文件并在后台将其发送到您的服务器。您可以定期执行*发送。*

通过这种方式，您可以避免您的应用程序崩溃，但仍然能够收集崩溃报告。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-19T14:30:02.053

有许多工具可以捕获异常并将它们提交给您（开发人员）。例如，看看[ACRA](http://code.google.com/p/acra/)和[HockeyApp](http://www.hockeyapp.net/crash-reports)。这两者都比将堆栈跟踪提交到您的 Google Play 开发者帐户的内置支持要灵活得多。

# git - Git - 在分支内移动提交，然后插入分支

> ID：11562926
> 
> 赞同：0
> 
> 时间：2012-07-19T14:22:59.310
> 
> 标签：git, version-control, merge, branch, commit

环顾四周，找不到这个问题的答案！我是一个完整的 git n00b 并且非常感谢任何可以给我一些指示的人。

我最初在我的存储库中有一个很长的提交分支，我想更改分配给分支中先前提交（master~14）的消息

所以我做了

```
git checkout master~14
git commit --amend -m "added the new description for the commit bla bla bla" 
```

不幸的是，现在我被置于分离头模式所以然后我有点惊慌并创建了一个新分支，这样我就不会失去对这个提交的引用

```
git branch detached 
```

现在我有这样的情况，我在树的顶部有 master~14 在它自己的分支上，我想把它放回它在树中的位置，而不会引起任何冲突或覆盖任何东西

```
+        [detached] xxxxx
  *    + [master] xxxxx
  *    + [master^] xxxxx
  *    + [master~2] xxxxx
  *    + [master~3] xxxxx
  *    + [master~4] xxxxx
  *    + [master~5] xxxxx
  *    + [master~6] xxxxx
  *    + [master~7] xxxxx
  *    + [master~8] xxxxx
  *    + [master~9] xxxxx
  *    + [master~10] xxxxx
  *    + [master~11] xxxxx
  *    + [master~12] xxxxx
  *    + [master~13] xxxxx
  *    + [master~14] xxxxx 
```

我还想（在解决此问题后）将我的提交从 master~14..master~5 分支为一棵新树，最后将 master~4..master 作为另一棵树。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T21:31:29.073

q1：

```
git checkout master 
```

这将使您回到主提示

或使用

```
git reflog 
```

或者`git reflog show master`

看看指针是如何移动的

但对整个事情的更好方法是

```
git rebase -i master~14 
```

然后标记必要的提交以停止修改，那么你就不会处于分离的 HEAD 状态

q2：对我来说，如果正确的话，您希望 master~14..master~5 和 master~4..master 从 master~15 开始（为简单起见，我将创建命名分支）：

```
git branch feature1 master~5
git branch master15back master~15
git rebase --onto master15back feature1 master 
```

见[git rebase 文档](http://www.kernel.org/pub/software/scm/git/docs/git-rebase.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:36:29.783

对于 q1，您可以尝试 git rebase -i master~14

在此之后，将相关提交更改为 r 意味着更新提交消息

# linux-kernel - Kconfig 选择：未选择的选择显示为新的

> ID：11562927
> 
> 赞同：1
> 
> 时间：2012-07-19T14:23:02.107
> 
> 标签：linux-kernel, buildroot, kbuild

我有以下 Kconfig 代码：

```
choice
    prompt "Choice ?"
    config A_CHOSEN
          bool "A"
    config B_CHOSEN
           bool "B"
 endchoice 
```

我的问题，每次我运行 make oldconfig 它都会说：

```
*
* Restart config...
*
Choice ?
> 1\. A (A_CHOSEN)
  2\. B (B_CHOSEN) (NEW)
choice[1-2]: 
```

我检查了配置文件，它说

```
A_CHOSEN=y
# B_CHOSEN is not set 
```

知道为什么未选择的选项总是显示为新的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:58:57.903

解决方案：

由于未知原因，buildroot 维护者决定修补 conf 以仅读取以 BR2_ 为前缀的变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T06:12:53.193

当你运行 make oldconfig 时。它读取现有的 .config 文件并询问用户对配置文件的任何新添加并将其标记为新的。这在您升级到新内核时非常有用，因为它可以让您为每个新的配置参数做出决定。

# activerecord - 在 Sinatra 而不是 Rails 上对 ActiveRecord 进行版本控制？

> ID：11562928
> 
> 赞同：1
> 
> 时间：2012-07-19T14:23:03.090
> 
> 标签：activerecord, sinatra, versioning

我只是快速浏览了可用的解决方案，主要的两个对我不起作用：

*   paper trail 自 3 个月以来没有得到积极维护，并且与 Rails 3 相关联；
*   维斯塔版本自 2 年以来未维护。

你能提出一个解决方案吗？我应该实施我的吗？问题是我的期限很紧。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:02:48.670

为我自己的快速实现、具有多态关联的模型和我将关联对象编组到的文本字段而去了。

# sublimetext2 - 如何使用 SublimeLinter 对 SCSS 文件进行正确的 linting

> ID：11562929
> 
> 赞同：12
> 
> 时间：2012-07-19T14:23:05.697
> 
> 标签：sublimetext2, sass

在 Sublime Text 2 中处理 SCSS 文件时，我经常不得不禁用 linting。

任何人都知道在 ST2 中为 SCSS 文件获取正确 linting 的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-10T00:22:04.897

我最近发现这个 add on for sublime linter 添加 SCSS 语法

[https://sublime.wbond.net/packages/SublimeLinter-contrib-scss-lint](https://sublime.wbond.net/packages/SublimeLinter-contrib-scss-lint)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T00:11:49.807

在撰写本文时，还没有可用于 SCSS 的 linter。

# nhibernate - NHibernate MappingException，没有持久性：NHiberDeneme.Sinifi

> ID：11562930
> 
> 赞同：0
> 
> 时间：2012-07-19T14:23:07.443
> 
> 标签：nhibernate

应用程序配置

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="hibernate-configuration" type="NHibernate.Cfg.ConfigurationSectionHandler, NHibernate" />
  </configSections>
  <hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
    <session-factory>
      <property name="connection.provider">NHibernate.Connection.DriverConnectionProvider</property>
      <property name="dialect">NHibernate.Dialect.MsSql2008Dialect</property>
      <property name="connection.driver_class">NHibernate.Driver.SqlClientDriver</property>
      <property name="connection.connection_string">Data Source=localhost;Initial Catalog=hiberdb;Integrated Security=True;</property>
      <property name="default_schema">hiberdb.dbo</property>
      <mapping assembly="NHiberDeneme"/>
    </session-factory>
  </hibernate-configuration>
</configuration> 
```

程序.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using NHibernate.Cfg;
using NHibernate;

namespace NHiberDeneme
{
    class Program
    {

        static void Main(string[] args)
        {
            Configuration cfg = new Configuration();
            cfg.AddAssembly("NHibernate"); // projenin assembly Adi
            ISessionFactory factory = cfg.BuildSessionFactory();
            ISession session = factory.OpenSession();
            ITransaction transaction = session.BeginTransaction();
            Sinifi sinif = new Sinifi();
            sinif.Id = 1;
            sinif.SinifAdi = "sinif adi";
            session.Save(sinif);
            session.Flush();
            session.Clear();
            transaction.Commit();
            session.Close();
        }
    }
} 
```

中文版

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using NHibernate.Mapping;

namespace NHiberDeneme  
{
    class Sinifi 
    {
        private int _id;
        private string _sinifadi;

        public int Id
        {
            get { return _id; }
            set { _id = value; }
        }

        public string SinifAdi
        {
            get { return _sinifadi; }
            set { _sinifadi = value; }
        }
    }
} 
```

西尼菲.hbm.xml

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.0">
  <class name="NHiberDeneme.Sinifi, NHiberDeneme.Program, NHiberDeneme" table="Sinifi" lazy="false">
    <id name="Id" column="Id" type="int">
      <generator class="assigned" />
    </id>
    <property name="SinifAdi" column="SinifAdi" type="String" length="10"/>

    <bag name="SinifiId" table="SinifiId" inverse="true">
      <key column="Id" />
      <one-to-one class="NHiberDeneme.Sinifi, NHiberDeneme.Program, NHiberDeneme" />
    </bag>

  </class>
</hibernate-mapping> 
```

我的 sql 关系在这里[http://i.stack.imgur.com/jOT5M.jpg](http://i.stack.imgur.com/jOT5M.jpg)

*给我“MappingException，没有持久性：NHiberDeneme.Sinifi”错误。我尝试了很多方法，我也嵌入了资源。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:40:32.770

有了这个错误，NHibernate 告诉你你的类映射有问题。NHibernate 要么找不到类映射，要么无法正确解析它。

通过查看它，您在映射文件中的类名似乎是错误的。

从 NHibernate 的文档中[`class mapping`](http://nhforge.org/doc/nh/en/index.html#mapping-declaration-class)：

> **name**：持久类（或接口）的完全限定的 .NET 类名，包括其程序集名称。

在你的代码中，你有这个类名：`NHiberDeneme.Sinifi, NHiberDeneme.Program, NHiberDeneme`。这不是有效的[.NET 程序集限定类名](http://msdn.microsoft.com/en-us/library/system.type.assemblyqualifiedname.aspx)。如果你的程序集名称是`NHiberDeneme`，你应该有这个：

```
<class name="NHiberDeneme.Sinifi, NHiberDeneme" ... /> 
```

...如果程序集名称是`NHiberDeneme.Program`映射，则应如下所示：

```
<class name="NHiberDeneme.Sinifi, NHiberDeneme.Program" ... /> 
```

# php - 用 unset() 替换 session_unregister

> ID：11562931
> 
> 赞同：14
> 
> 时间：2012-07-19T14:23:10.610
> 
> 标签：php, session

我正在将我没有创建的旧系统从一台服务器 (php 5.2) 移动到较新的服务器 (php 5.3)，并且很多系统都使用 session_unregister。我很欣赏这在 5.3 中已被弃用，所以我应该继续用 unset($_SESSION['myVar']) 替换所有案例还是会导致某些事情中断？

更好的是，如果 unset() 不是正确的，是否有替代方法可以实现我需要的相同功能

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-19T14:25:29.530

您可以使用 取消设置特定的会话变量`unset($_SESSION['yourvar']);`，但请注意手册中的这一部分：

> 不要使用 unset($_SESSION) 取消设置整个 $_SESSION，因为这将禁用通过 $_SESSION 超全局变量注册会话变量。

（来自： http: [//php.net/manual/en/function.session-unset.php](http://php.net/manual/en/function.session-unset.php)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-05T06:28:32.723

*   session_unregister()

自 PHP 5.3.0 起，该函数已被弃用，自 PHP 5.4.0 起已移除。 [http://php.net/manual/en/function.session-unregister.php](http://php.net/manual/en/function.session-unregister.php)

但是，如果您需要“释放所有会话变量”。采用

*   session_unset();

[http://php.net/manual/en/function.session-unset.php](http://php.net/manual/en/function.session-unset.php)

# tridion - 每次都会弹出用户名和密码窗口

> ID：11562943
> 
> 赞同：-1
> 
> 时间：2012-07-19T14:23:59.640
> 
> 标签：tridion

我们正在使用 Tridion 5.3。

我们最近在 DEV 环境中添加了新的 Content Manager Server。

当我们从 Content Manager 服务器访问 Tridion GUI 时，一切正常。

但是当我们尝试从客户端计算机访问 Content Manager Server 时，它会一次又一次地询问用户 ID 和密码，最终用户被锁定。

谁能告诉我们调试这个问题的方法，这是否与服务器和客户端的域有关，它们应该在同一个域中？如果不同的域，那么一旦提供了密码，它应该可以工作，并且不应该再次询问。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T16:05:24.863

当您的客户端计算机登录到与 Tridion 尝试进行身份验证的用户不同的域时，通常会出现重复弹出窗口。

当您输入您的登录信息时，请尝试在用户名中输入域的名称，例如 SDL\user123

# javascript - 如何在播放 HTML 5 视频（如 Youtube 广告）时添加图像/DIV？

> ID：11562945
> 
> 赞同：4
> 
> 时间：2012-07-19T14:24:17.380
> 
> 标签：javascript, jquery, html, video, mediaelement

我使用 MediaElement.js HTML 5 视频播放器，我想在播放时间之间在我的视频上添加一个广告（如 Youtube 添加）（如：在 0:20 秒添加淡入和在 0:30 秒淡出 - 添加可见：10 秒）。

有人做过这样的事情吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T15:51:53.370

一种方法是在视频的当前时间 20 秒时更改视频源，播放 10 秒添加，然后改回视频的原始源。

这里的问题是任何人都可以移动到添加的末尾并跳过它，因为人们只能使用视频标签的控件。

除非您知道阻止控件的方法，否则这不是最佳解决方案。

（删除 controls="controls" 也不是解决方案，因为您可以通过检查器将其添加回。）

# perl - 在 Perl 中尝试/捕获键盘中断？

> ID：11562950
> 
> 赞同：2
> 
> 时间：2012-07-19T14:24:34.033
> 
> 标签：perl, signals

如何在 Perl 中捕捉键盘中断？

```
while(1) {
    try {
        print 1;
    } 
    catch KeyboardInterrupt {
        print 2;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T14:27:41.200

您似乎正在尝试在这里编写 Python。

“键盘中断”，很可能是指`SIGINT`. `%SIG`您可以使用哈希处理信号。例如：

```
$SIG{INT} = sub { print "Received SIGINT\n" }; 
```

# c++ - 当显示为独立对话框时，CPropertyPage 派生对话框不会在 Esc 上关闭

> ID：11562960
> 
> 赞同：1
> 
> 时间：2012-07-19T14:25:01.060
> 
> 标签：c++, mfc

我有一个对话框，我需要在 CPropertySheet 中和作为独立对话框显示。我选择不使用 2 个单独的类以避免代码冗余（我在这些对话框中进行了很多更改，并且必须不断同步 2 个类将是地狱），相反，当我想将其显示为独立对话框时，我只是调用 CPropertyPage::DoModal。这会导致一些问题，但我已经解决了大部分问题。

但是，有些仍然存在，即 enter 和 esc 不起作用。同样按 Tab 也不会改变焦点。这让我觉得 CPropertyPage 吃掉了所有的键盘输入，或者它可能试图将它们传递给它的父级。

有什么想法可以在独立模式下覆盖该行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:47:28.863

我相信这对你有用。我没有可以测试它的对话框，所以我是从内存中完成的，但我相信你可以添加一个你在调用时设置的布尔值，`DoModal`或者将它公开为你在调用之前设置的属性`DoModal`以指示它作为一个独立的对话框运行，然后`PreTranslateMessage`像这样覆盖：

```
CMyPropertyPage::PreTranslateMessage(MSG* pMsg)
{
    if (m_runningAsStandalone && pMsg->message == WM_KEYDOWN)
    {
        UINT key = pMsg->wParam;
        switch(pMsg->wParam)
        {
            case VK_RETURN:
                 OnOK();
                 return TRUE;
            case VK_ESCAPE:
                 OnClose();
                 return TRUE;
        }
    }
    return CPropertyPage::PreTranslateMessage(pMsg);
} 
```

您可能还会发现此链接很有帮助[http://support.microsoft.com/kb/125645](http://support.microsoft.com/kb/125645)

# c# - 如何在不调用 string.Trim() 的情况下通过忽略“”前缀和后缀来比较字符串

> ID：11562965
> 
> 赞同：0
> 
> 时间：2012-07-19T14:25:27.107
> 
> 标签：c#, string, performance

> **可能重复：**
> [String.comparison 性能（带修剪）](https://stackoverflow.com/questions/1862314/string-comparison-performance-with-trim)

我想写一个函数来判断两个字符串是否相等，忽略第一个字符串的空格前缀和后缀，而不调用string.Trim()。还请考虑不敏感的情况。

认为：

```
string str1 = "   Abc   ";
string str2 = "abc";

bool trueEqual = IsEqualWithoutWhiteSpace(str1, str2, /*ignore case?*/ true);  // return true. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:33:10.523

我假设您出于性能原因想要这样做（在某些情况下这将是一个正当的理由 - 我会为您省去通常的过早优化警告）。

首先，计算两个字符串开头和结尾的空白字符数。如果非空白部分的长度不同，则返回 false。现在我们知道它具有相同的长度。

接下来，`stringA.IndexOf(stringB, ...)`使用适当的 start 和 count 参数调用以确定是否找到匹配项。如果匹配，则根据您的实现，字符串相等。

如果您不需要不区分大小写，您也可以使用循环来比较两个字符串的中间部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:32:51.397

就像评论显示的那样，没有直接的理由不使用修剪。因此，如果您确信 Trim 没问题，这里有一个解决方案。

```
public static bool IsEqualWithoutWhiteSpace(this string aLhs, string aRhs)
{
    var left = aLhs.Trim();
    var right = aRhs.Trim();
    return left.Equals(right, StringComparison.OrdinalIgnoreCase);
}

string str1 = "   Abc   ";
string str2 = "abc";

var b = str1.IsEqualWithoutWhiteSpace(str2); 
```

如果这是性能原因，请重新考虑您的问题，因为您问的是“有人可以为我写一个函数吗”而不是“有人可以解释为什么我的代码不起作用”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T15:45:39.337

再次踢罐头 Trim 是您的朋友。但是，另一种避免使用修剪的方法是：

bool found = string1.Contains(string2);

如果您确定 string1 是可能具有空格并希望区分大小写的字符串。如果您不想区分大小写，请在每个字符串后添加 .ToLower：

bool found = string1.ToLower().Contains(string2.ToLower());

最后，如果您不确定哪个有空格但只有一个有空格（例如，两个输入中的一个来自合理可靠的来源（如代码中的字符串），另一个来自用户添加的内容，但您不确定您的代码的用户可能会选择哪个顺序输入）您可以使用 or 运算符：

bool found = string1.Contains(string2) || string2.Contains(string1);

不过，这些是一种特殊情况，.Net 团队在提高代码效率方面做得很好，因此它可能调用 trim 并比较一次比比较两次并避免 Trim 调用更有效（比较必须至少查看 Len2 - Len1 组合数，一旦发现非空白字符，修剪就可以终止，因此从逻辑上讲，对于函数调用来说，这是一个更简单的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T14:37:48.270

看，不`Trim()`！

```
 string str1 = "      AbC   ";
        string str2 = "abc";

        var r = new Regex("^[ \t]+|[ \t]+$");
        var trimStr1 = r.Replace(str1, "");
        var trimStr2 = r.Replace(str2, "");

        return trimStr1.Equals(str2, StringComparison.OrdinalIgnoreCase); 
```

虽然，就像其他人所说的那样，我肯定会`Trim()`在我自己的一个项目中使用这个。

# objective-c - 目标 C：OpenAL 更改音高问题

> ID：11562966
> 
> 赞同：1
> 
> 时间：2012-07-19T14:25:28.597
> 
> 标签：objective-c, ios, avfoundation, openal

我在 OpenAL 框架上遇到了困难……我只想改变播放动作的音调……我的项目中缺少什么代码……我是目标 c、iOS 开发的新手。希望得到您的善意考虑，在此先感谢..这是我的三个按钮（记录，停止，播放）的代码..

```
-(void)startRecording:(UIButton *)sender
{   //for recording

    recStopBtn.hidden = NO;
    recStopBtn.enabled =YES;
    playRecBtn.enabled = NO;
    loading.hidden = NO;
    [loading startAnimating];

    AVAudioSession *audioSession = [AVAudioSession sharedInstance];
    NSError *err = nil;
    [audioSession setCategory :AVAudioSessionCategoryPlayAndRecord error:&err];
    if(err)
    {
        NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
        return;
    }
    [audioSession setActive:YES error:&err];
    err = nil;
    if(err)
    {
        NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
        return;
    }

    recordSetting = [[NSMutableDictionary alloc] init];

    // We can use kAudioFormatAppleIMA4 (4:1 compression) or kAudioFormatLinearPCM for nocompression
    [recordSetting setValue :[NSNumber numberWithInt:kAudioFormatAppleIMA4] forKey:AVFormatIDKey];

    // We can use 44100, 32000, 24000, 16000 or 12000 depending on sound quality
    [recordSetting setValue:[NSNumber numberWithFloat:16000.0] forKey:AVSampleRateKey];

    // We can use 2(if using additional h/w) or 1 (iPhone only has one microphone)
    [recordSetting setValue:[NSNumber numberWithInt: 1] forKey:AVNumberOfChannelsKey];

    // These settings are used if we are using kAudioFormatLinearPCM format
    //[recordSetting setValue :[NSNumber numberWithInt:16] forKey:AVLinearPCMBitDepthKey];
    //[recordSetting setValue :[NSNumber numberWithBool:NO] forKey:AVLinearPCMIsBigEndianKey];
    //[recordSetting setValue :[NSNumber numberWithBool:NO] forKey:AVLinearPCMIsFloatKey];

    recorderFilePath = [NSString stringWithFormat:@"%@/MySound.caf", DOCUMENTS_FOLDER];

    NSLog(@"recorderFilePath: %@",recorderFilePath);

    NSURL *url = [NSURL fileURLWithPath:recorderFilePath];

    err = nil;

    NSData *audioData = [NSData dataWithContentsOfFile:[url path] options: 0 error:&err];
    if(audioData)
    {
        NSFileManager *fm = [NSFileManager defaultManager];
        [fm removeItemAtPath:[url path] error:&err];
    }

    err = nil;
    recorder = [[ AVAudioRecorder alloc] initWithURL:url settings:recordSetting error:&err];
    if(!recorder){
        NSLog(@"recorder: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
        UIAlertView *alert =
        [[UIAlertView alloc] initWithTitle: @"Warning"
                                   message: [err localizedDescription]
                                  delegate: nil
                         cancelButtonTitle:@"OK"
                         otherButtonTitles:nil];
        [alert show];

        return;
    }

    //prepare to record
    [recorder setDelegate:self];
    [recorder prepareToRecord];
    recorder.meteringEnabled = YES;

    BOOL audioHWAvailable = audioSession.inputIsAvailable;
    if (! audioHWAvailable) {
        UIAlertView *cantRecordAlert =
        [[UIAlertView alloc] initWithTitle: @"Warning"
                                   message: @"Audio input hardware not available"
                                  delegate: nil
                         cancelButtonTitle:@"OK"
                         otherButtonTitles:nil];
        [cantRecordAlert show];

        return;
    }

    // start recording
    [recorder record];

    lblStatusMsg.text = @"Recording...";
    //recIcon.image = [UIImage imageNamed:@"rec_icon.png"];
    //progressView.progress = 0.0;
    //timer = [NSTimer scheduledTimerWithTimeInterval:6.0 target:self selector:@selector(handleTimer) userInfo:nil repeats:YES];
}

-(void)stopRecord:(UIButton *)sender
{
    loading.hidden = YES;
    [loading stopAnimating];

    recStartBtn.enabled = YES;
    recStartBtn.hidden = NO;
    playRecBtn.hidden = NO;

    playRecBtn.enabled = YES;
    recStopBtn.enabled = NO;
    recStopBtn.hidden = YES;
    [recorder stop];

    [timer invalidate];
    lblStatusMsg.text = @"Stopped";
    // recIcon.image = [UIImage imageNamed:@"rec_icon2.png"];

}

-(void)playRecord:(UIButton *)sender
{
    recorderFilePath = [NSString stringWithFormat:@"%@/MySound.caf", DOCUMENTS_FOLDER];
    NSURL *urlRecord = [NSURL fileURLWithPath:recorderFilePath isDirectory:NO];
    NSError *errorRecord;
    soundRecord = [[AVAudioPlayer alloc] initWithContentsOfURL:urlRecord error:&errorRecord];
    [soundRecord play];
}

-(void)changePitch:(UIButton *)sender
{

    alSourcef(recorderFilePath, AL_PITCH, 1.2f);//this kinda troubles me,the source. =(
    [soundRecord play];//this one also...

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T16:35:47.197

alSourcef 方法的第一个参数不是 NSString 文件路径，它是表示音频源的 ALuint。

有关如何从 URL 设置 OpenAL 源的信息，请参阅示例[oalTouch （特别是 oalPlayback 类）。](http://developer.apple.com/library/ios/#samplecode/oalTouch/Introduction/Intro.html)

# java - 如何通过'java.sql.date'获取当前系统月份？

> ID：11562969
> 
> 赞同：1
> 
> 时间：2012-07-19T14:25:30.227
> 
> 标签：java, date, monthcalendar

我想从系统中获取当前月份作为字符串并使用`java.sql.Date`对象。

我已经尝试了下面的代码，但是`getMonth()`被[Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29)删除了：

```
java.util.Date date = new java.util.Date();
java.sql.Date sqlDate = new java.sql.Date( date.getMonth() ); 
```

为什么会被击穿？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T14:34:34.697

该方法在 Eclipse 中被删除，因为方法 getMonth() 已被弃用。此外，如果您希望它作为字符串，您可以使用该类`SimpleDateFormat`将日期转换为字符串。

例如：

```
new SimpleDateFormat("MMMM").format(new Date()); // will output 'july' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T14:36:16.403

日期对象的 getMonth() 函数已弃用：

```
getMonth() 
    Deprecated. As of JDK version 1.1, replaced by Calendar.get(Calendar.MONTH) 
```

以下是使用日历类的代码

```
 import java.util.Calendar;

    public class GetMonth
    {
      public static void main(String[] args)
      {
      String[] months = {"January", "February",
      "March", "April", "May", "June", "July",
      "August", "September", "October", "November",
      "December"};

      Calendar cal = Calendar.getInstance(); 
      String month = months[cal.get(Calendar.MONTH)];
      System.out.println("Month name: " + month);
      }
    } 
```

[参考](http://www.roseindia.net/java/java-get-example/get-month.shtml)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T14:34:25.887

尝试：

```
import java.util.Calendar;

public class GetMonth
{
  public static void main(String[] args)
  {
  String[] months = {"January", "February",
  "March", "April", "May", "June", "July",
  "August", "September", "October", "November",
  "December"};

  Calendar cal = Calendar.getInstance(); 
  String month = months[cal.get(Calendar.MONTH)];
  System.out.println("Month name: " + month);
  }
} 
```

[来源](http://www.roseindia.net/java/java-get-example/get-month.shtml)

# ios - 如何在 UITextview 上的单击事件中停止键盘外观？

> ID：11562975
> 
> 赞同：1
> 
> 时间：2012-07-19T14:26:15.600
> 
> 标签：ios, xcode, ipad, keyboard, uitextview

在我的 IPad 应用程序中，我仅将 TextView 用于文本显示。因为我需要显示更大的文本，这就是我使用 UITextview 的原因，因为它的滚动属性而不是使用 UILabel。在我的应用程序中，我不需要在 UITextview 中编辑文本，但对我来说，问题是当我单击 Textview 滚动键盘时，它会隐藏我的文本视图，所以我希望我的键盘永远不会出现在点击事件上。我进行搜索但找不到任何合适的解决方案。任何帮助都将得到解决。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T14:29:45.597

**新答案**（以前的答案不能正常工作）

好的，因为这不起作用，因为它也禁用滚动，你应该尝试：

实现 UITextFieldDelegate 协议在您的视图控制器中添加文本

```
@interface YourViewController () <UITextViewDelegate> 
```

在 viewDidLoad 中将自己设置为委托：

```
yourUITextView.delegate = self; 
```

实现下面的委托方法：

```
- (BOOL)textViewShouldBeginEditing:(UITextView *)textView
{ 
   return NO; 
} 
```

当 textview 即将编辑文本时，会自动调用该方法。它返回 no，因此不会开始编辑。

撤消先前答案中的更改非常重要：**不要将可编辑字段设置为 NO**

我试过了，它工作正常。希望能帮助到你！

**旧答案**

当您声明变量时，或在您的 viewdidload 方法中，将可编辑属性设置为 NO：

```
yourUITextView.editable = NO; 
```

或者

```
[yourUITextView setEditable:NO] 
```

这应该可以防止键盘出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:28:24.223

转到 .XIB 文件，您可以取消选中可编辑的行为或以编程方式

`textView.editable = NO;`

# iphone - 从包含其他视图的 UIView 导出高分辨率图像

> ID：11562979
> 
> 赞同：1
> 
> 时间：2012-07-19T14:26:32.043
> 
> 标签：iphone, objective-c, ios, xcode, uiview

我正在尝试从包含 UIImage 视图和一些标签的 UIView 导出图像。我不确定我是否以正确的方式进行此操作。我想导出视图中的所有内容并维护布局。我想以 1536 x 2048 的分辨率导出。

我将以下代码与 renderInContext 一起使用来获取主视图 (UIView) 的图像。有点作品，但布局搞砸了，基本上布局发生变化，标签不能正确缩放。renderInContext 是做这样的事情的正确方法吗？有没有更好的办法？

![输出](../Images/d3c62b3ed6c8cce51d67ad20a799b99f.png)

你可以在这里下载整个项目：http: [//tinyurl.com/7qvhqtp](http://tinyurl.com/7qvhqtp)

```
UIGraphicsBeginImageContext(CGSizeMake(1536, 2048));
viewOutput.frame = CGRectMake(0, 0, 1536, 2048);
[[viewOutput layer] renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
UIImageWriteToSavedPhotosAlbum(image,nil,nil,nil); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T14:34:51.780

这是我用来将当前 UIView 保存为图像的代码。布局得到完美保存。

```
UIGraphicsBeginImageContextWithOptions(self.view.bounds.size, self.view.opaque, 0.0);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage * img = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

我不是 100% 确定，但是`UIGraphicsBeginImageContext`vs可能存在一些问题`UIGraphicsBeginImageContextWithOptions`。

另一方面，如果您的视图`autoresizesSubviews`设置为 YES，则问题可能出在您视图的子视图的自动调整大小掩码中。如果您不支持旋转或至少在更改视图框架之前，我会尝试禁用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:36:18.663

为了获得更大的图像，您所做的唯一一件事就是更改框架，但标签没有正确的自动调整大小蒙版，它们的字体大小也没有改变。您可以在“运行代码后”图像中清楚地看到标签既没有移动也没有改变大小。

首先，如果您希望标签在超级视图的框架发生变化时更改其框架（标签是图像的子视图吗？如果不是，您可能需要自己计算它们的新帧），那么您应该给它一个合适的极光遮罩。在您的情况下，您希望它与屏幕底部的距离固定，与顶部的距离灵活。您还希望固定左右的距离，以便宽度可以灵活调整。

这只会给您留下字体大小问题。您应该计算比例因子（一切都变大多少倍）并将当前字体大小乘以该比例因子。

# php - 如何正确保护表单动作属性

> ID：11562980
> 
> 赞同：1
> 
> 时间：2012-07-19T14:26:31.713
> 
> 标签：php, forms, security, xhtml

> **可能重复：**
> [对 HTML 表单的操作属性使用空 URL 是否是一种好习惯？（动作=“”）](https://stackoverflow.com/questions/1131781/is-it-a-good-practice-to-use-an-empty-url-for-a-html-forms-action-attribute-a)

有人告诉我，使用表单将数据提交到同一页面时，将表单操作属性留空是不安全的。

```
<form action=""> 
```

我不太确定这样的事情怎么会不安全。将数据提交到同一页面的最佳方法是什么？

# command-line - 通过命令行发送 Ctrl+Z 到串口

> ID：11562987
> 
> 赞同：5
> 
> 时间：2012-07-19T14:26:45.943
> 
> 标签：command-line, serial-port, ctrl

我正在尝试使用 ECHO 或类似方法通过命令行将以下内容发送到 COM1 串行端口（我也尝试下载一个名为 serialsend 的小程序，但我不知道如何发送等效的`CTRL`+ `Z`。这是发送一个通过 Siemens TC35 GAM 模块发送 SMS 消息。我可以通过 Hyperterminal 进行测试，它工作正常，但我不知道如何在末尾发送`CTRL`+以确认消息的 ned。`Z`

这就是我所拥有的：

```
AT

AT+CMGF=1

AT+CMSG="+xxxxxxxxxxx"

HELLO 
```

现在，在我要发送的消息 Hello 之后，我必须发送`CTRL`+ `Z`。但不知道怎么做，我试过这个：

```
AT

AT+CMGF=1

AT+CMSG="+xxxxxxxxxxx"

HELLO

\x1A 
```

正如我所读到的那样，这相当于这样做，但它没有奏效。

谁能帮我这个？我找到了解决方案，但它们不是我需要的命令行。

我也尝试过使用这种格式：

```
ECHO AT > COM1: 
```

但由于我不知道如何发送`CTRL`+`Z`我不知道它是否有效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T21:38:42.060

我编写了您提到的免费命令行程序 SerialSend。由于这个问题最初是发布的，我添加了一个额外的功能，允许在您通过串行端口发送的文本中包含任意字节值（以十六进制格式）。例如，要发送 Ctrl-Z（十进制 26，十六进制 0x1A），只需使用以下命令：

```
SerialSend /hex "\x1a" 
```

端口名称/编号、波特率等可以使用额外的命令行参数进行配置。例如，

```
SerialSend /baudrate 9600 /devnum 2 /hex "\x1a" 
```

有关详细信息，请参阅[SerialSend 主页](http://batchloaf.wordpress.com/serialsend/)。

希望有帮助！

泰德

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T12:58:09.467

用这个：

```
port.Write(txt_msgbox.Text + char.ConvertFromUtf32(26)); 
```

有用 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-14T07:26:53.403

键入此命令 Serial.println((char)26); 在 Arduino 代码中......串行监视器上将出现一个方框。复制该正方形并粘贴到记事本++中。它将显示为带有黑色背景的 SUB。每当您想键入 cntrl+z 时，只需复制此 SUB 并粘贴到串行监视器中即可。有用。

# objective-c - 进行类扩展时避免警告

> ID：11562991
> 
> 赞同：0
> 
> 时间：2012-07-19T14:27:07.970
> 
> 标签：objective-c, cocoa, categories

我想做以下事情：

```
@interface UINavigationController ()

-(void)removeFromNavigationStack:(Class)aClass;

@end 
```

并在 .m 文件中

```
@implementation UINavigationController

-(void)removeFromNavigationStack:(Class)aClass {

} 
```

但在 .m 文件中有很多警告，例如“'initWithRootViewController:'的方法定义：'未找到”

我怎样才能避免这种情况？我试过包括但仍然有警告

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T14:41:36.000

由于您正在处理`UINavigationController`UIKit 类，因此您可能希望使用类别。扩展需要`@implementation`在类实现的主块中定义，并且您无权访问它`UINavigationController`

从[文档](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocCategories.html#//apple_ref/doc/uid/TP30001163-CH20-SW1)：

> 类扩展类似于匿名类别，只是它们声明的方法必须在相应类的主 @implementation 块中实现。使用 Clang/LLVM 2.0 编译器，您还可以在类扩展中声明属性和实例变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:28:54.723

在 .m 文件中添加您的类扩展名。

# ios - 滚动动态 TableView (iOS) 时不再初始化全局变量

> ID：11562995
> 
> 赞同：1
> 
> 时间：2012-07-19T14:27:25.523
> 
> 标签：ios, uitableview

我有一个用 NSArray 填充的 UITableView。不幸的是，这个数组的大小和内容不断变化。所以我想创建该数组的全局单一副本（在某个时间点）并使用它来填充我的表。

这就是我正在做的事情：

。H

```
@interface TableViewController : UITableViewController {
//    ProcessListArrayHolder *processListArrayObject;

    NSArray *_myArray;
}

...

@property(nonatomic,strong) NSArray *myArray; 
```

.m

```
@synthesize myArray = _myArray;

// in ViewDidLoad
_myArray = [myObject myFunctionThatReturnsAnArray]; //This function returns a different array every time because the data is constantly changing 
```

但是，当我滚动时，_myArray 看起来是空的，并且我得到一个“错误访问”，试图从中获取一个值。

当我滚动时，TableView 在做什么？有没有办法让它一次加载整个表？

**编辑：**为了解决这个问题，我刚刚使用了属性“myArray”，将其称为“self.myArray”，并忽略了 _myArray。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:40:57.427

首先，您可能应该使用生成的设置器（这就是它的用途）

```
self.myArray = [myObject myFunctionThatReturnsAnArray]; 
```

您首先在哪里初始化该数组？

你的`cellForRowAtIndexPath`和`numberOfRowsInSection`代码是什么样的？如果您有一个正确初始化的数组并正确设置了委托函数，那么您永远不会收到错误的访问权限。当你滚动时，表格视图正在使用它的委托来填充和显示它当时需要的单元格。

# c# - 比较字典中用作键的对象

> ID：11562996
> 
> 赞同：22
> 
> 时间：2012-07-19T14:27:27.660
> 
> 标签：c#, dictionary, comparison, equals, contains

我的课：

```
public class myClass
{
    public int A { get; set; }
    public int B { get; set; }
    public int C { get; set; }
    public int D { get; set; }
} 
```

和主要例子：

```
Dictionary<myClass, List<string>> dict = new Dictionary<myClass, List<string>>();
myClass first = new myClass();
first.A = 2;
first.B = 3;

myClass second = new myClass();
second.A = 2;
second.B = 3;
second.C = 5;
second.D = 6;

dict.Add(first, new List<string>());

if (dict.ContainsKey(second))
{
    //
    //should come here and update List<string> for first (and only in this example) key 
    //
}
else
{
    //
    //if myFirst object has difference vlues of A or B properties
    //
    dict.Add(second, new List<string>());
} 
```

这该怎么做？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-19T14:35:03.397

如果您**总是**希望字典只比较 A 和 B，您有两个选择。要么使用实现[的构造函数](http://msdn.microsoft.com/en-us/library/ms132072)`IEqualityComparer<TKey>`并将你的比较逻辑放在那里，要么让你的类实现*GetHashCode 和 Equals*，这样默认的比较器就会给你你正在寻找的结果。~~[`IEquateable<T>`](http://msdn.microsoft.com/en-us/library/ms131187)~~

 *如果您只想在一种情况下比较 A 和 B，则需要使用 .Keys 属性和允许您传入 a的 Linq 扩展方法[Contains](http://msdn.microsoft.com/en-us/library/bb339118)`IEqualityComparer<T>`。但是，当这样做时，您会失去使用字典的速度优势，因此请谨慎使用它。

```
public class MyClassSpecialComparer : IEqualityComparer<myClass>
{
    public bool Equals (myClass x, myClass y)
    { 
        return x.A == y.A && x.B == y.B 
    }

    public int GetHashCode(myClass x)
    {
       return x.A.GetHashCode() + x.B.GetHashCode();
    }

}

 //Special case for when you only want it to compare this one time
 //NOTE: This will be much slower than a normal lookup.
    var myClassSpecialComparer = new MyClassSpecialComparer();
    Dictionary<myClass, List<string>> dict = new Dictionary<myClass, List<string>>();
    //(Snip)
    if (dict.Keys.Contains(second, myClassSpecialComparer ))
    {
        //
        //should come here and update List<string> for first (and only in this example) key 
        //
    }

 //If you want it to always compare
    Dictionary<myClass, List<string>> dict = new Dictionary<myClass, List<string>>(new MyClassSpecialComparer()); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-19T14:39:11.167

默认情况下，比较会根据其哈希码将对象放入存储桶中。`Equals`如果两个哈希码相同，则执行详细比较（通过调用）。如果您的类既不提供`GetHashCode`也不实现相等，`object.GetHashCode`则将使用默认值——在这种情况下，不会将任何特定于您的类的内容用于值比较语义。只会找到相同的引用。如果您不想要这个，请实施`GetHashCode`并实施平等。

例如：

```
public class myClass
{
    public int A { get; set; }
    public int B { get; set; }
    public int C { get; set; }
    public int D { get; set; }

    public bool Equals(myClass other)
    {
        if (ReferenceEquals(null, other)) return false;
        if (ReferenceEquals(this, other)) return true;
        return other.A == A && other.B == B && other.C == C && other.D == D;
    }

    public override bool Equals(object obj)
    {
        if (ReferenceEquals(null, obj)) return false;
        if (ReferenceEquals(this, obj)) return true;
        if (obj.GetType() != typeof (myClass)) return false;
        return Equals((myClass) obj);
    }

    public override int GetHashCode()
    {
        unchecked
        {
            int result = A;
            result = (result*397) ^ B;
            result = (result*397) ^ C;
            result = (result*397) ^ D;
            return result;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-19T14:36:50.980

在你的 myClass 中覆盖：

*   GetHashCode 方法

*   等于方法

要实现 GetHashCode 方法，您只需对整数属性进行 XOR GetHashCodes 即可。

可选择重写 ToString 方法并实现 IEquatable 接口*

# javascript - 如果已在另一个选项中选中，则从选择框中删除选项

> ID：11562997
> 
> 赞同：0
> 
> 时间：2012-07-19T14:27:28.613
> 
> 标签：javascript

我有一个表格。用户单击添加按钮为该状态添加另一个状态 + 文本框。当人们在第一个框中选择一个状态时，我希望将其从可能添加的任何其他选择框中删除，以便无法再次选择它。

```
<form action=state.php method=post> 

<a href="javascript:addElement();" style='color:blue; text-decoration:underline;'>Add a State </a> &nbsp; &nbsp; 
<a href='javascript:removeElement();' style='color:blue; text-decoration:underline;' >Remove </a><br /><br />

<script type="text/javascript">
    var intTextBox=0;

    //FUNCTION TO ADD TEXT BOX ELEMENT
    function addElement() {
        intTextBox = intTextBox + 1;
        var contentID = document.getElementById('addresscontent');

        var newTBDiv = document.createElement('div');

        newTBDiv.setAttribute('id','strText'+intTextBox);

        newTBDiv.innerHTML = "<select   id='u" + intTextBox + "' name=b_state[" + intTextBox + "][statename]/><option value=''>Select a State</option><option  value='AK'>AK</option><option  value='AL'>AL</option><option  value='AR'>AR</option><option  value='AS'>AS</option><option  value='AZ'>AZ</option><option  value='CA'>CA</option></select> &nbsp; <span style='font-size:12px;'>URL (if different) </span><input style='border:1px solid black; ' size=60 type='text' id='u" + intTextBox + "' name=b__state[" +intTextBox + "][url] /><br>";

        contentID.appendChild(newTBDiv);
    }

    //FUNCTION TO REMOVE TEXT BOX ELEMENT
    function removeElement()  {
        if(intTextBox != 0)  {
            var contentID = document.getElementById('addresscontent');
            contentID.removeChild(document.getElementById('strText'+intTextBox));
            intTextBox = intTextBox-1;
        }
    }
</script>

<div id="addresscontent"></div>

</div>

<input type=submit value='go'> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T16:54:46.957

以下是您需要的步骤：

1）将所有相关的选择字段收集到一个节点列表中：document.getElementById("myBigForm").getElementsByTagName("select");

2) 现在您需要遍历这些选择字段。对于每个选择字段，您需要遍历选项元素

3) 如果选项包含某个值，则执行删除子项。

```
var removeState = function (x) {
        "use strict";
        var a = document.getElementById("myBigForm").getElementsByTagName("select"),
            b = a.length,
            c = 0,
            d = [],
            e = 0,
            f = 0;
        for (c = 0; c < b; c += 1) {
            d = a[b].getElementsByTagName("option");
            e = d.length;
            for (f = 0; f < e; f += 1) {
                if (d[f].value === x) {
                    a[b].removeChild(d[f]);
                    break;
                }
            }
        }
    }; 
```