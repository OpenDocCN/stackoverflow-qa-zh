# StackOverflow 问答 11280000-11280999

# arduino - 是否可以在 snipmate 中包含文件中的片段

> ID：11280000
> 
> 赞同：2
> 
> 时间：2012-07-01T06:21:14.590
> 
> 标签：arduino, vim

我正在使用带有这些[片段的](https://github.com/honza/snipmate-snippets)[vim-snipmate](http://github.com/garbas/vim-snipmate)插件。

我目前正在为 Arduino 创建一个片段文件。我意识到 c 语言的所有片段也适用于 Arduino。

我不只是复制粘贴它们，而是考虑包括整个 c 文件，然后添加 Arduino 特定部分。

所以我的问题是，是否可以将其他文件中的片段包含到您的片段文件中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T07:32:45.833

（在搜索了 snipmate Plugin 的文档后，我找到了这个问题的答案）

我不能在另一个片段文件中包含一个片段文件，但我可以为某种文件类型包含多个片段。我现在在我的 .vimrc 中声明了以下内容并且它可以工作。

```
" Add c snippets to Arduino
let g:snipMate = {}
let g:snipMate.scope_aliases = {} 
let g:snipMate.scope_aliases['arduino'] = 'arduino,c' 
```

我将它与我创建的[arduino 片段一起使用。](https://github.com/sudar/vim-arduino-snippets)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T09:39:00.073

@Sudar：您的方法很好，但是如果您以后有另一个配置或语言，则没有必要，您的 vimrc 将变得臃肿。

只需`arduino.snippets`在 snipmate 中创建即可`:set ft=c.arduino`。Snipmate 根据其文件类型识别片段

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T09:58:48.660

您专门询问了 snipmate，所以这可能有点离题，但无论如何：还有一个名为 UltiSnips 的插件，它与 snipmate 非常相似（具有一些附加功能）。在 UltiSnips 的片段文件中，您可以使用完全符合您要求的 extends 语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T06:31:51.467

不，您需要将这些片段复制/粘贴到您的 arduino.snippets 文件中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T09:22:35.297

将以下内容添加到`$VIMRUNTIME/after/plugin/snipMate.vim`文件中：

```
call ExtractSnipsFile(g:snippets_dir.'arduino.snippets', 'c') 
```

这将解析和初始化`arduino.snippets`文件的文件`.c`类型。

基本上，它只是从该文件加载片段，并将它们添加到您的案例`c`文件中的指定文件类型。

有关使用的帮助，`ExtractSnipsFile`请参阅`:help ExtractSnipsFile` [或查看 GitHub 上的 Doc 文件](https://github.com/msanders/snipmate.vim/blob/master/doc/snipMate.txt#L188)

**编辑 2018.03.14**

可以使用`UltiSnipsAddFiletypes`. 例如，如果您想`.c`在编辑`.arduino`文件时加载片段，只需将以下行添加到您的`ftplugins/arduino.vim`: `UltiSnipsAddFiletypes arduino.c`

# jquery - 使用 JQuery ajax() 方法检索 RESTful 数据

> ID：11280001
> 
> 赞同：0
> 
> 时间：2012-07-01T06:21:16.557
> 
> 标签：jquery, asana

我正在尝试通过 JQuery.ajax() 方法从 Asana API 中提取信息。但是没有返回想要的结果，或者显示错误。
这是我在 JavaScript 中的部分代码：

```
$(document).ready(function () {

    $('#buttonCallAjax').click(function () {
        jQuery.support.cors = true;
            $.ajax(
                {
                    type: "GET",
                    url: "https://app.asana.com/api/1.0/users/me",
                    data: "{}", 
                    contentType: "application/x-www-form-urlencoded; charset=utf-8",
                    dataType: "jsonp",
                    success: function (data) {

                        alert(data);

                    },
                    error: function (msg, url, line) {
                        alert('error trapped in error: function(msg, url, line)');
                        alert('msg = ' + msg + ', url = ' + url + ', line = ' + line);

                    }
                });
        });

    }); 
```

ajax() 方法我看了很多，但是还是弄明白了这个方法中的一些options参数，比如data，dataType（因为这是跨域请求，我用的是jsonp）。
有人可以帮助成功地从 Asana API 中提取信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T06:34:15.853

经过一番研究，现在 Asana 的 API 似乎不支持返回 JSONP。

此外，经过我自己的一些探索，它们看起来也不支持 CORS，因此跨域 XHR 看起来是不可能的。当然，我没有使用适当的身份验证进行测试，并且他们的服务可能配置为仅将 CORS 标头授予已授权的请求。

或者，您可以让服务器端脚本向 API 发出通用 Web 请求，并将结果代理回您的 UI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T01:37:17.917

尽管 Asana API 目前看起来不支持 JSONP，但如果将来他们支持并且您需要进行身份验证，您可以使用以下代码来完成。

```
$.ajax( {
  url : 'https://app.asana.com/api/1.0/users/me',
  dataType : 'jsonp',
  beforeSend : function(xhr) {
      xhr.setRequestHeader('Authorization', 'Basic ' + btoa(API_KEY + ":"));

  }
); 
```

该`btoa`函数编码为 base64，但[并非](http://www.perturb.org/display/1061_Browser_base64_support.html)所有浏览器都支持，因此如果您需要支持较旧的浏览器，您可能需要使用其他库。

**更新**

用户名也可以直接用 jQuery 设置，无需编码或设置标题。

```
 $.ajax( {
  url : 'https://app.asana.com/api/1.0/users/me',
  dataType : 'jsonp',
  username : API_KEY
 }); 
```

当使用 JS 访问 API 时，您的 API_KEY 将以明文形式出现在页面上。也许这些东西应该在服务器端完成。

# ruby-on-rails - 为什么我不能用 crontab 启动 delay_job 守护进程？

> ID：11280004
> 
> 赞同：0
> 
> 时间：2012-07-01T06:21:50.050
> 
> 标签：ruby-on-rails, delayed-job, crontab, reboot

我有以下脚本用于在 ruby​​ on rails 中启动延迟的工作人员

```
require 'rubygems'
require 'daemon_spawn'
$: << '.'

RAILS_ROOT = File.expand_path(File.join(File.dirname(__FILE__), '..'))

class DelayedJobWorker < DaemonSpawn::Base
  def start(args)
    ENV['RAILS_ENV'] ||= args.first || 'development'
    Dir.chdir RAILS_ROOT
    require File.join('config', 'environment')

    Delayed::Worker.new.start
  end

  def stop
    system("kill `cat #{RAILS_ROOT}/tmp/pids/delayed_job.pid`")
  end
end

DelayedJobWorker.spawn!(:log_file => File.join(RAILS_ROOT, "log", "delayed_job.log"),
                    :pid_file => File.join(RAILS_ROOT, 'tmp', 'pids', 'delayed_job.pid'),
                    :sync_log => true,
                    :working_dir => RAILS_ROOT) 
```

它以这个命令开始

```
user@mysystem:path/to/my/application$ ruby script/delayed_job start production
DelayedJobWorker started. 
```

我正在尝试使用 crontab 在启动时自动执行此操作
为此我制作了此脚本

```
#!/bin/bash
cd path/to/my/application
ruby script/delayed_job start production 
```

这是我的 crontab

```
# m h  dom mon dow   command
SHELL=/bin/bash
@reboot /path/to/my/script/delayed_job_at_startup.sh 
```

当我重新启动系统时，脚本没有成功，我从 crontab 收到此消息

```
X-Cron-Env: <SHELL=/bin/bash>
X-Cron-Env: <HOME=/home/finalsayan>
X-Cron-Env: <PATH=/usr/bin:/bin>
X-Cron-Env: <LOGNAME=finalsayan>

/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- daemon_spawn (LoadError)
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from script/delayed_job:24:in `<main>' 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T16:24:48.240

问题是，对于使用 rvm 的 cron，您需要加载 rvm 环境以获取文档，请参阅[https://rvm.io/integration/cron/](https://rvm.io/integration/cron/) cron 在启动时调用的脚本如下

```
#!/bin/bash
source /usr/local/rvm/environments/default

# Go to the app
APP_HOME=/path/to/my/application
cd $APP_HOME

# start the delayed jobs
ruby script/delayed_job start production 
```

# firefox - 用户添加用户名时Firefox如何填写密码？

> ID：11280008
> 
> 赞同：-1
> 
> 时间：2012-07-01T06:24:36.577
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk, add-on, browser-addons

我想得到它的信号。因为我正在为 Firefox 创建人脸识别插件（如主密码）。

编辑：当用户添加用户名时，我需要检查用户面。如果只有给定的用户名和他保存的脸是相等的，那么只有密码应该输入密码字段。我想要的是当用户添加他的用户名时执行我的应用程序来识别人脸。我想在添加用户名后得到信号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T16:03:08.063

基本的天真的解决方案是在所有文本元素上[添加一个事件侦听器，并侦听](https://developer.mozilla.org/en/DOM/element.addEventListener)[任何适合您需要的事件，](https://developer.mozilla.org/en/DOM/DOM_event_reference/)在您的情况下特别有趣的应该是，或者可能是事件。还有可能会派上用场的财产。`input``focus``blur`[`input`](https://developer.mozilla.org/en/DOM/DOM_event_reference/input)[`element.onchange`](https://developer.mozilla.org/en/DOM/element.onchange)

典型用法（简化逻辑）：

```
var inputs = document.getElementsByTagName("input");
for (var i = 0; i < inputs.length; i++) {
    inputs[i].onchange = yourFunctionToCall;
} 
```

一些附加说明：

1.  最好只在[存储了密码](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/addon-kit/passwords.html#search%28options%29)的页面上添加监听器。
2.  仅在包含至少一个`<input type="password" />`元素的页面上添加侦听器可能是个好主意。

# javascript - Emacs 上的 js-comint 模式：NoClassDefFoundError

> ID：11280009
> 
> 赞同：1
> 
> 时间：2012-07-01T06:24:47.677
> 
> 标签：javascript, emacs, debian, rhino

我在 Emacs 24 上安装了 js-comint 模式。现在当我尝试执行时`run-js`，它会抛出以下错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/mozilla/javascript/tools/shell/Main
Caused by: java.lang.ClassNotFoundException: org.mozilla.javascript.tools.shell.Main
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: org.mozilla.javascript.tools.shell.Main. Program will exit.

Process js exited abnormally with code 1 
```

变量`inferior-js-program-command`是`"/usr/bin/java org.mozilla.javascript.tools.shell.Main"`，并且由于某种原因它不起作用。我应该怎么做才能在 Emacs 中运行劣质的 javascript 进程？如果上述错误意味着我没有一些 Java 库，那么应该在 Debian 中安装什么包？

我使用 Linux Mint Debian 版（对应于 Debian 测试）。我已经`openjdk-6-jre`安装了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T06:27:17.723

好的，我找到了解决方法。`rhino`我在我的 Debian 上安装了包并放入`"/usr/bin/rhino"`了变量`inferior-js-program-command`，现在 Emacs 成功运行了劣质的 javascript 进程。但是我仍然感兴趣，为什么没有`/usr/bin/java org.mozilla.javascript.tools.shell.Main`在我的系统上工作。

# backbone.js - 主干的使用，以及如何实现视图和模型的双向绑定？

> ID：11280013
> 
> 赞同：4
> 
> 时间：2012-07-01T06:25:30.350
> 
> 标签：backbone.js

具体来说：

1.查看控件内容变化，自动更新模型中的相应属性。

2.当一个模型内的属性发生变化时，自动更新该属性对应的控件视图，而不是简单的调用view.render()重新更新整个视图。

**有人有类似的做法吗？或者有什么好的资源推荐，非常感谢！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T09:36:13.337

Rivets 是 Backbone 和其他 JavaScript MV* 框架（如 Spine）的另一个数据绑定框架。[https://github.com/mikeric/rivets](https://github.com/mikeric/rivets)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T07:31:50.693

这就是我想要的：[https ://github.com/theironcook/Backbone.ModelBinder](https://github.com/theironcook/Backbone.ModelBinder)

ModelBinder 类包含促进**双向视图模型绑定的**所有逻辑。

:)

编辑：20120715----------- 这是完美的解决方案演示： [http ://files.cnblogs.com/justinw/Nested_Model_bi_Binding.zip](http://files.cnblogs.com/justinw/Nested_Model_bi_Binding.zip)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T16:59:05.370

我写了一篇博文，说明使用 Backbone.ModelBinder 插件在 Backbone 视图和模型之间进行两种数据绑定。这是帖子的直接链接：http: [//niki4810.github.io/blog/2013/03/02/new-post/](http://niki4810.github.io/blog/2013/03/02/new-post/)

# c# - 内部访问修饰符

> ID：11280016
> 
> 赞同：0
> 
> 时间：2012-07-01T06:27:02.390
> 
> 标签：c#

我在这样的项目中有两个类：

```
namespace ConsoleApplication1
{
    internal class ClassA
    {
         internal int dataMember;
    }
} 
```

和

```
namespace ConsoleApplication1
{
    class ClassB 
    {
        static void Main(string[] args)
        {
            ClassA c = new ClassA();
            Console.Write(c.dataMember); //Cannot access??
        }
    }
} 
```

我对 A 类及其数据成员使用了内部访问修饰符

虽然 A 类的对象可以在 B 类的主体中创建，但为什么我不能在同一个程序集中使用内部访问说明符访问其数据成员？

这是它在 VS 2010 中给出的错误：

> 'ConsoleApplication1.ClassA.dataMember' 由于其保护级别而无法访问

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T06:32:06.837

你应该能够。您的确切代码 - 只需添加一个`using System;`指令 - 为我编译。

检查您是否实际保存了所有文件等 - 如果存在编译时错误，请将其包含在您的问题中。也许还有其他问题`ClassA`（您没有向我们展示）阻止该类编译？

还要检查它们是否真的*在*同一个项目中——而不仅仅是在同一个命名空间中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T06:38:24.397

我以这种方式得到结果：

```
 internal class A
    {
        internal int X = 5;
    }
    static class B
    {
        public static void Show()
        {
            A a = new A();
            MessageBox.Show(a.X.ToString());
        }
    }
    private void Form2_Load(object sender, EventArgs e)
    {
        B.Show();
    } 
```

也是这样：

```
 internal class A
    {
        internal int X = 5;
    }
    private void Form2_Load(object sender, EventArgs e)
    {
        A a = new A();
        MessageBox.Show(a.X.ToString());
    } 
```

# php - MySQL with PHP - LIKE is not working properly

> ID：11280024
> 
> 赞同：0
> 
> 时间：2012-07-01T06:29:02.620
> 
> 标签：php, mysql

I'd like to search a MySQL database to match keywords passed by the user. I heard that using `LIKE` is the fastest option but can't find an example of a full simple query using LIKE in PHP code.

This is what I am tring:

```
$value = 'Fire';
$result = mysql_query("SELECT * FROM effects WHERE title LIKE 'value%'"); 
```

I know there is an row in the database with `Fire` as the title but the query is returning `null`.

Can someone please give me an example of how to perform a MySQL LIKE search or alternative to find rows by keyword(s).

Thank you.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T06:31:26.913

You need to add the dollar sign of the variable:

```
$result = mysql_query("SELECT * FROM effects WHERE title LIKE '$value%'"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T07:05:43.787

You are missing `$` before variable `value`.

Your query should look like

```
$value = 'Fire';
$result = mysql_query("SELECT * FROM effects WHERE title LIKE '$value%'"); 
```

Say there is title like `My Fire Effect`. You don't want this in search result? If you want to display `My Fire Effect` in result too then you should use `%` before $value

```
$value = 'Fire';
$result = mysql_query("SELECT * FROM effects WHERE title LIKE '%$value%'"); 
```

Hope this helps you.

## For Differences, see [demo with live example](http://sqlfiddle.com/#!3/d711d/1)

***Note***, *first query in demo returns me 5 rows, however second query returns me 8 rows which is PERFECT.*

# cocoa - 隐藏一个 NSMenuItem 的标题，只显示它的图像？

> ID：11280028
> 
> 赞同：2
> 
> 时间：2012-07-01T06:29:49.130
> 
> 标签：cocoa, nsmenuitem, nsmenu

我有一个`NSMenu`（属于一个`NSPopUpButton`），其中`NSMenuItem`所有人都设置了图像，我希望它们只显示图像，而不是标题。不过，我无法取消设置标题，因为它们提供了键盘可访问性（以及，我认为，其他可访问性）。有没有办法隐藏标题，比如图像`NSImageOnly`位置`NSButton`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T09:07:41.240

一个并不真正让我高兴的临时解决方法：

不设置 的标题，而是`NSMenuItem`将属性标题设置为预期标题的属性字符串，系统字体采用不可见的小尺寸，例如 0.01。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T11:15:59.823

至少对于菜单中的第一项，这样做可以正常工作：

1.  `NSPopUpButton`在 Interface Builder 中实例化
2.  设置为下拉类型，设置方形样式，并设置图像。
3.  仅制作位置图像（调色板中的第二个选项）

这些设置都与控件的按钮部分有关，但它将创建一个菜单，其中第一项是仅图像菜单项。实际上，没有设置标题（正如标题字段中显示的占位符所证明的那样）。这应该意味着您可以将标题设置为`nil`，以防您以编程方式进行。

# php - PHP mail() 变成垃圾邮件，可能是 DNS 问题？

> ID：11280030
> 
> 赞同：3
> 
> 时间：2012-07-01T06:30:14.950
> 
> 标签：php, email, dns, spam

我正在通过 PHP 的 mail() 发送带有正确和完整标题的消息。它拥有应有的一切，而且 Hotmail 喜欢电子邮件本身。但是，Hotmail 在消息源中显示了这一点：

```
X-DKIM-Result: None
X-Message-Status: n:0:n
X-SID-Result: None
X-AUTH-Result: NONE 
```

我试图让他们通过，但只是设法将 SID 和 AUTH 设置为“失败”，导致 SmartScreen 将邮件视为可疑邮件并在十天后将其删除，而在此之前它对过滤器来说似乎是垃圾邮件。

如果我能够让这些通过，那么电子邮件将不会被标记为垃圾邮件。我知道我需要在 DNS 中做一些事情。我在网站上设置了反向 DNS。

电子邮件包括边界、MIME 版本、内容类型、回复和返回路径、x-mailer 等。内容类型是多部分/替代（用于边界），主题或正文不包含任何垃圾邮件关键字。

任何人都知道如何让这些东西通过 PHP 或 DNS 传递？

**底线：**如果这些结果是“无”，那么它只会和平地进入垃圾。如果它们是“失败”，那么它将是“可疑的”并自动删除。如果他们是“通过”，那么它将直接进入收件箱而没有问题，但我不知道如何让他们通过。

如果它有任何帮助，我在 cPanel/WHM (Linux) VPS 上运行 Exim 4.77。我的 IP 地址是干净的，过去没有被滥用过。它不会在任何黑名单中被阻止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T06:42:59.120

在您的 DNS 中设置[SPF 记录](http://en.wikipedia.org/wiki/Sender_Policy_Framework)，可以是一个解决方案。

编辑

谷歌搜索消息 **X-AUTH-Result: FAIL** 我发现这篇文章，这似乎是同样的问题： [https ://serverfault.com/questions/138886/emails-going-to-junk-for-hotmail-recipients](https://serverfault.com/questions/138886/emails-going-to-junk-for-hotmail-recipients)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T08:26:13.353

确保发送邮件的服务器有一个正确的 rDNS 或 PTR 记录返回到它的主机名。

# css - 并排显示 ul li

> ID：11280031
> 
> 赞同：1
> 
> 时间：2012-07-01T06:30:18.767
> 
> 标签：css, menu, html-lists

我试图并排而不是从上到下显示菜单的下拉部分。我必须 display: none 使菜单工作，而 float: left 没有这样做。我没有想法，不知道还有什么需要显示的：没有人可以隐藏列表，直到它需要显示。我抛出了 float: 几乎到处都是。CSS：

```
ul {
    margin: 0;
    padding: 0;
    list-style-type: none;
    min-width: 200px;
    float: left;
    display: inline;
} 
ul#navigation {
    float: left;
} 
ul#navigation li {
    float: left;
    border: 1px black solid;
    min-width: 200px;
} 
ul.sub_navigation {
    position:absolute;
    float: left;
    display: inline;
    display: none;
} 
ul.sub_navigation li {
    clear: both;
    float: left;
    display: inline;
} 
a,a:active,a:visited {
    display: block;
    padding: 10px;
} 
```

的HTML：

```
<div id="menu">
    <ul id="navigation">
        <li class="dropdown"><a href="javascript:ajaxpage('home.php', 'body');">Home</a></li>
        <li class="dropdown"><a href="javascript:ajaxpage('projects.php', 'body');">Projects</a>
            <ul class="sub_navigation" style="float: left;">
                    <!-- pull projects with P H P -->
                    <li><a href="javascript:ajaxpage('openproj.php?id=<? echo $row['id']; ?>', 'body');"><? echo $row['name']; ?></a></li>
                    <li><a href="javascript:ajaxpage('createproj.php', 'body');">Add a project</a></li>
                    <?php
                    }
                    ?>
            </ul>
        </li>
        <li class="dropdown"><a href="javascript:ajaxpage('pubfiles.php', 'body');">Public Files</a></li>
        <li class="dropdown"><a href="javascript:ajaxpage('users.php', 'body');">Users</a></li>
        <li class="dropdown"><a href="javascript:ajaxpage('settings.php', 'body');">Settings</a></li>
            <!-- only pull if admin and logged in per P H P session-->
        <li class="dropdown"><a href="javascript:ajaxpage('admin.php', 'body');">Admin</a></li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T08:46:48.170

您可以通过这种方式实现您的 HTML 和 CSS 代码，然后它将正常工作。

HTML：

```
<div class="menu">
    <ul>
        <li><a href="index.html" class="active">Home</a></li>
        <li><a href="about.html">About Us</a></li>
        <li><a href="about.html">Services</a></li>
        <li><a href="portfolio.html">Portfolio</a></li>
        <li><a href="contact.html">Contact us</a></li>
    </ul>
</div> 
```

CSS：

```
.menu {
   padding:0;
   margin:0;
   width:400px;
   float:left;
 }

.menu ul {
  padding:0;
  margin:0;
  list-style:none;
  border:0;
  float:left;
}

.menu ul li {
  float:left;
  margin:0;
  padding:0;
  border:0;
}

.menu ul li a {
  float:left;
  margin:0;
  padding:13px 10px;
  text-decoration:none;
  border:1px
  solid #000;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T04:50:35.677

似乎同时放入`width=auto;`the`ul li`和它的孩子，以及将孩子的定位更改为`relative`，使它按照我需要的方式工作。

我感谢每个人的意见，因为它让我离完成这个工作更近了一步，并更多地了解了这个网站，以及使用 jquery 的 css。

链接：[jsFiddle](http://jsfiddle.net/nvNTb/2/)

# java - 关于排除注释行

> ID：11280033
> 
> 赞同：0
> 
> 时间：2012-07-01T06:31:26.697
> 
> 标签：java, string, collections, io

我试图开发计算我的源文件的代码行的应用程序是..

```
package asd;
    public class abv {
        /**
         * @param args
         */
        public static void main(String[] args) {
    // comment
    /* comment*/
        }
    } 
```

下面是一段代码.....

```
 private static int totalLineCount = 0;
    private static int totalFileScannedCount = 0;

    public static void main(final String[] args) throws Exception {

        JFileChooser chooser = new JFileChooser();
        chooser.setCurrentDirectory(new java.io.File("C:" + File.separator));
        chooser.setDialogTitle("FILES ALONG WITH LINE NUMBERS");
        chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
        chooser.setAcceptAllFileFilterUsed(false);
        if (chooser.showOpenDialog(null) == JFileChooser.APPROVE_OPTION) {
            Map<File, Integer> result = new HashMap<File, Integer>();
            File directory = new File(chooser.getSelectedFile().getAbsolutePath());

            List<File> files = getFileListing(directory);

            // print out all file names, in the the order of File.compareTo()
            for (File file : files) {
               // System.out.println("Directory: " + file);
                getFileLineCount(result, file);
                //totalFileScannedCount += result.size(); //saral
            }

            System.out.println("*****************************************");
            System.out.println("FILE NAME FOLLOWED BY LOC");
            System.out.println("*****************************************");

            for (Map.Entry<File, Integer> entry : result.entrySet()) {
                System.out.println(entry.getKey().getAbsolutePath() + " ==> " + entry.getValue());
            }
            System.out.println("*****************************************");
            System.out.println("SUM OF FILES SCANNED ==>" + "\t" + totalFileScannedCount);
            System.out.println("SUM OF ALL THE LINES ==>" + "\t" + totalLineCount);
        }

    }

    public static void getFileLineCount(final Map<File, Integer> result, final File directory)
            throws FileNotFoundException {
        File[] files = directory.listFiles(new FilenameFilter() {

            public boolean accept(final File directory, final String name) {
                if (name.endsWith(".java")) {
                    return true;
                } else {
                    return false;
                }
            }
        });
        for (File file : files) {
            if (file.isFile()) {
                Scanner scanner = new Scanner(new FileReader(file));
                int lineCount = 0;
                totalFileScannedCount ++; //saral
                try {

                    /*for (lineCount = 0; scanner.nextLine() != null;lineCount++ ) { //saral
                        ;

                    }*/

                    while (scanner.hasNextLine()) {
                           String line = scanner.nextLine().trim();
                           if (!line.isEmpty()) {
                              System.out.println("debug-->"+line); // to debug cross checked that no whitespaces are there 
                             lineCount++;
                           }
                    }

                     result.put(file, lineCount);
                     totalLineCount += lineCount;                               
                } catch (NoSuchElementException e) {
                    // e.printStackTrace();
                }
            }
        }

    }

    /**
     * Recursively walk a directory tree and return a List of all Files found;
     * the List is sorted using File.compareTo().
     * 
     * @param aStartingDir
     *            is a valid directory, which can be read.
     */
    static public List<File> getFileListing(final File aStartingDir) throws FileNotFoundException {
        validateDirectory(aStartingDir);
        List<File> result = getFileListingNoSort(aStartingDir);
        Collections.sort(result);
        return result;
    }

    // PRIVATE //
    static private List<File> getFileListingNoSort(final File aStartingDir) throws FileNotFoundException {
        List<File> result = new ArrayList<File>();
        File[] filesAndDirs = aStartingDir.listFiles();
        List<File> filesDirs = Arrays.asList(filesAndDirs);
        for (File file : filesDirs) {
            if (file.isDirectory()) {
                result.add(file);
            }
            if (!file.isFile()) {
                // must be a directory
                // recursive call!
                List<File> deeperList = getFileListingNoSort(file);
                result.addAll(deeperList);
            }
        }
        return result;
    }

    /**
     * Directory is valid if it exists, does not represent a file, and can be
     * read.
     */
    static private void validateDirectory(final File aDirectory) throws FileNotFoundException {
        if (aDirectory == null) {
            throw new IllegalArgumentException("Directory should not be null.");
        }
        if (!aDirectory.exists()) {
            throw new FileNotFoundException("Directory does not exist: " + aDirectory);
        }
        if (!aDirectory.isDirectory()) {
            throw new IllegalArgumentException("Is not a directory: " + aDirectory);
        }
        if (!aDirectory.canRead()) {
            throw new IllegalArgumentException("Directory cannot be read: " + aDirectory);
        }
    } 
```

现在问题来了。当我选择项目文件夹并在控制台上查看结果时，它会计算我的 java 文件的代码行，但它也计算注释，我什至不希望计算注释，这意味着不计算注释行作为代码行，请告知需要在代码中进行哪些修改...

下面是我在控制台上的输出..

```
debug-->package asd;
debug-->public class abv {
debug-->/**
debug-->* @param args
debug-->*/
debug-->public static void main(String[] args) {
debug-->// comment
debug-->/* comment*/
debug-->}
debug-->}
*****************************************
FILE NAME FOLLOWED BY LOC
*****************************************
C:\Users\vaio\Desktop\Demo\fg\src\asd\abv.java ==> 10
*****************************************
SUM OF FILES SCANNED ==>    1
SUM OF ALL THE LINES ==>    10 
```

请告知需要在代码中进行哪些修改...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T06:56:39.303

我的第一个尝试是使用正则表达式。鉴于源文件不会那么大，您可以将整组行读入一个字符串，运行一个将所有注释替换为空的正则表达式，然后计算新字符串中的行数。

我的 Java 有点生疏，但我相信这会起作用（现在没有要测试的环境）：

```
int count = 0;
Scanner scanner = new Scanner(new File(file));
scanner.useDelimiter("\\Z");
String data = scanner.next();
String cleaned = data.replaceAll("/\\*(?:.|[\\n\\r])*?\\*/",""));
LineNumberReader lnr = new LineNumberReader(new StringReader(cleaned));
String line;
while ((line = lnr.readLine()) != null)
{
    String sline = line.trim();
    if(sline.isEmpty() == false)
        if(!(sline.length() > 2 && sline.charAt(0) == '/' && sline.charAt(1) == '/'))
            count += 1;
            //separated for clarity
} 
```

这应该为您提供并非全部注释的行数 // 并且还可以处理多行注释。

正则表达式的评论来源：[Regex source](http://ostermiller.org/findcomment.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T06:38:35.967

我之前的回答不正确。因为您将其勾选为正确，所以我使用@Trickfire 的代码来编辑我的答案。

```
while (scanner.hasNextLine()) {

                   scanner.useDelimiter("\\Z");
                   String data = scanner.next();
                   String cleaned = data.replaceAll("/\\*(?:.|[\\n\\r])*?\\*/",""));
                   LineNumberReader lnr = new LineNumberReader(new StringReader(cleaned));
                   String line;
                   while ((line = lnr.readLine()) != null)
                    {
                      String sline = line.trim();
                      if(sline.isEmpty() == false)
                      if(!(sline.length() > 2 && sline.charAt(0) == '/' && sline.charAt(1) == '/'))
                          lineCount += 1;
                           //separated for clarity
                   }

                } 
```

# objective-c - 释放了自动释放的对象，但内存仍然不足？

> ID：11280038
> 
> 赞同：0
> 
> 时间：2012-07-01T06:31:57.070
> 
> 标签：objective-c, memory-management, automatic-ref-counting, instruments

[http://i46.tinypic.com/2nquzag.png](http://i46.tinypic.com/2nquzag.png)

我有一个应用程序可以在很长的计算过程中创建和释放数百万个 NSNumber。我将@autoreleasepools 与创建和处理这些对象的各种循环一起使用。正如您在仪器屏幕上看到的那样，我只有 10656 个活动 CFNumber，但此时应用程序由于无法为更多对象分配内存而崩溃。有超过 5700 万个 CFNumber 处于“临时”状态。这是否意味着他们被释放了？为什么 malloc 还不使用这些内存位置？

我已经包含了我正在使用的代码的模型。运行 testProbabilities 方法，它将每 10000 次迭代计数一次。在分配错误之前，我使用此代码进行了多达 790000 次迭代。然而 Instruments 对我来说看起来不错。

```
@implementation MMTest

NSMutableSet *predictedSet;

-(NSMutableArray *)calculateCDF {

//// NORMALIZE PROBABILITIES ////

float probabilitySum = 0;
float runningCDFTotal = 0;
float normaledProbability = 0;

@autoreleasepool {

    NSMutableArray *CDF = [[NSMutableArray alloc] init];

    probabilitySum = 4.5; ////This is just a placholder for additive iteration of an array which creates this sum.

    //// CREATE CDF ////

    int x;

    for (x=0; x<50; x++) {

        normaledProbability = .2/probabilitySum;////This is placeholder for calculation on same array as above.
        runningCDFTotal += normaledProbability;

        [CDF addObject:[NSNumber numberWithFloat:runningCDFTotal]];

    }

    return CDF;

}

}

-(NSMutableSet *)generateNumbers {

@autoreleasepool {

    int x;
    double r = 0;

    if (!predictedSet) {
        predictedSet = [[NSMutableSet alloc] init];
    }

    else {
        [predictedSet removeAllObjects];
    }

    for (x=0; x<5;) {

        r = arc4random_uniform(1000)/1000;////I'm actually using SFMT here instead.
        int num = 0;
        __weak id CDF = [self calculateCDF];

        if (r <= [[CDF objectAtIndex:[CDF count]-1] floatValue]) {

            for (NSNumber *cdf in CDF) {

                if (r <= [cdf floatValue]) {

                    num = [CDF indexOfObject:cdf]+1;

                    [predictedSet addObject:[NSNumber numberWithInt:num]];

                    x++;

                    break;

                }

            }

        }

    }

    return predictedSet;

}

}

-(void)testProbability {

int x = 0;
BOOL nextSetFound = NO;
NSSet *nextSet = [[NSSet alloc] initWithObjects:
                  [NSNumber numberWithInt:1],
                  [NSNumber numberWithInt:2],
                  [NSNumber numberWithInt:3],
                  [NSNumber numberWithInt:4],
                  [NSNumber numberWithInt:5],
                  nil];

while (nextSetFound == NO) {

    @autoreleasepool {

        __weak id newSet = [self generateNumbers];

        x++;

        if ([nextSet isSubsetOfSet:newSet]) {

            nextSetFound = YES;
            NSLog(@"%@", newSet);

        }   

        if (fmod (x,10000) == 0) {
            NSLog(@"%i", x);

        }

    }

}

NSLog(@"%i", x);

}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T06:59:36.670

我错了还是你没有在任何地方发布`CDF`？这样，您`CDF`每次调用时都会泄漏`calculateCDF`。

尝试这个：

```
id CDF = [self calculateCDF]; 
```

代替

```
 __weak id CDF = [self calculateCDF]; 
```

和

```
id newSet = [self generateNumbers]; 
```

代替

```
__weak id newSet = [self generateNumbers]; 
```

指定`weak`将使对象不属于`newSet`ARC，因此不会被 ARC 自动释放。

另一方面，Apple[明确反对使用`__weak`堆栈变量](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)：

在堆栈上使用 __weak 变量时要小心。考虑以下示例：

> ```
>  NSString * __weak string = [[NSString alloc] initWithFormat:@"First Name: %@", [self firstName]];
>        NSLog(@"string: %@", string); 
> ```
> 
> 虽然在初始赋值后使用了字符串，但在赋值时并没有其他对字符串对象的强引用；因此，它立即被解除分配。日志语句显示该字符串具有空值。（例如，如果使用 .，您将看不到效果`NSString * __weak string = [[NSString alloc] initWithString:@"First Name"]`。在这种情况下，`initWithString:`只返回从未释放的字符串常量。）

据我了解这一段，您要么立即解除分配，要么发生内存泄漏。

我在 iOS 4.3 iPhone 上尝试了您的代码（删除了 __weak），它在仪器下显示了平坦的“物理空闲内存”。

旧答案：

棘手的事情`autorelease`是自动释放池在不可预知的时间被耗尽（通常在应用程序执行运行循环时）。这与使用`release`的不同之处在于它在您完成对象的时刻和内存被释放的时刻之间增加了一些延迟。

如果你将这个小延迟（就像系统的惯性`autorelease`）乘以自动释放对象的数量，这可能会导致内存使用高峰。如果 iOS 在其中一个峰值期间检查内存使用情况，并且您的应用程序无法对随之而来的内存警告做出正确反应，那么您的应用程序将被终止。

另一方面，如果您分配了一个释放池，并且它在运行周期的同一步骤中变得很大，这也可能导致过多的内存使用。

您提供的代码细节很少，所以我不能更准确；无论如何`release`，如果可能的话，我会尝试使用明确的对象。这将摆脱上述两个问题。或者您可以尝试处理较小的自动释放池（并且您将解决第二种问题）...

我还建议你在 Instruments 中添加一个内存监视器，这样你就会看到系统释放内存的速度有多快。

PS：现在，你所附的图片让我印象深刻的是分配图是绝对平坦的：没有分配，没有释放。我希望内存会上下波动（根据我的经验，这是一个健康的 iOS 应用程序的标志）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T11:49:20.050

不知道究竟是为什么，但上面这个确切的代码现在可以正常工作了。在测试各种修改的过程中，我在 Xcode 中启用和禁用了 Guard Malloc 和 Malloc Stack Logging。突然间，我的修改版本开始运行，没有崩溃。然后我再次尝试了这个原始版本，现在它运行良好而没有崩溃。这没有任何意义，但我很高兴它正在工作。

@sergio：我想至少为您提供很多帮助和建议以进一步优化此代码提供很多帮助和建议，但我没有足够高的声誉。谢谢您的帮助。我很感激。

# web-applications - spring 3/tomcat 7 是这个 webapp 的可行组合吗？

> ID：11280042
> 
> 赞同：0
> 
> 时间：2012-07-01T06:33:22.790
> 
> 标签：web-applications, spring-3

我想我有点偏见。两年多前，在我了解了 servlet 之后，我第一次对 Java Web 框架产生了兴趣。当我决定组建我的公司并开始开发 web 应用程序时，我知道我将使用 Java web 技术。我还想让我的开发堆栈保持开源。现在我们使用 Maven、Hibernate、Spring 3（以及许多子技术，如 spring social、spring security 和 spring web flow）、Tomcat 7 作为应用服务器。我们有一些相互依赖的多模块 maven 项目，大约有 13 个月的时间。我们刚刚进入 spring 3 的内容，我意识到我什至不确定 spring 3 是否是正确的选择。

此应用程序旨在供（最终）数十万并发用户（甚至更多）使用。操作并不复杂 - 大量的数据库查询，一些图形的东西。我们打算使用一些 ajax 和花哨的 javascript。这个应用程序将被病毒驱动，因此我们需要一个健壮的框架。

spring 3 是一个不错的选择吗？如果是，为什么？如果没有 - 同样的问题。根据我的研究，我了解到 Spring 3 可能更适合“更复杂”的 Web 应用程序，而不是高流量的应用程序（不用说让我有点担心）。Tomcat 7 是适合此类项目的应用程序服务器，还是我会从另一个项目中受益更多？

请在您的答案中提供简洁但内容丰富的解释。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:19:00.527

听起来你主要关心的是性能。如果您不打算在单个服务器上运行整个节目（如果您想在 Web 规模上运行最好不要），那么 MVC 框架的选择不太可能成为您的瓶颈。我见过的大多数情况最终都将存储层作为瓶颈。你的旅费可能会改变。

Spring 是用于构建 Web 服务的可靠框架。它内置了很多东西，这使得它非常容易。它可以帮助您避免为许多已经解决的问题重新发明轮子。

Tomcat 很好，尽管您可能会发现嵌入式 Jetty 更易于部署。你的旅费可能会改变。同样，servlet 容器通常不太可能成为扩展限制。

# jquery - 我怎样才能使内容 宽度为零？

> ID：11280044
> 
> 赞同：0
> 
> 时间：2012-07-01T06:33:30.720
> 
> 标签：jquery

我有以下 HTML：

```
<section id="sidebar" class="grid_3">
<section id="content" class="grid_9"> 
```

我使用 jQuery 将其更改为：

```
<section id="sidebar" class="" style="width: 0px;">
<section id="content" class="grid_12"> 
```

但是，似乎带有侧边栏 id 的部分仍然有一些宽度，并且其中的元素出现了。

有什么方法可以让 id=sidebar 的内容使用 jQuery 不可见？我认为给它一个 0px 的宽度可以使它工作，但似乎没有。我想知道将显示设置为隐藏或可见，但我不确定隐藏和可见之间的区别？也不确定 jQuery 的显示和隐藏。在这种情况下哪个最好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T06:38:35.113

```
$("#sidebar").hide() // sets the position of the element to `display: none`;
$("#sidebar").show() // sets the position of the element to `display: block`;
$("#sidebar").css('width', '0 !important') // sets the width of the element to `0` and overrides other element's width properties;
$("#sidebar").css('visibility', 'hidden') // The element is invisible but still takes up space; 
```

> `how can I detect if the display is set to "none" with jQuery?`

尝试这个：

```
if ($('.grid_3').is(':hidden')) { // if the element is hidden do something here}
if ($('.grid_3').is(':visible')) { // if the element is visible do something here} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T06:36:14.703

`visibility: hidden`隐藏元素但保留在文档流中。`display: none`将从常规流中隐藏和删除元素。`opacity: 0`可以在其他情况下使用。在某些情况下使用的另一个选项是`position: absolute`元素并通过将其移动到一侧来隐藏它`left: -9999px`。选择其中一个选项，`width: 0`至少在我的经验中不适合任何情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T06:41:00.690

`$('#sidebar').hide()`将隐藏侧边栏，但您必须知道（正如@elclanrs 解释的那样）这会从文档流中删除该元素，因此如果侧边栏的存在是您的布局工作所必需的，请使用`$('#sidebar').css('visibility', 'none')`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T07:02:54.140

正如其他人指出的：

*   `visibility: hidden;`: 隐藏元素及其内容，但一直占用空间（就像设置一样`opacity: 0;`）；
*   `display: none;`：隐藏对象并将其从流程中移除，为其他元素释放空间（例如：如果您在上面的元素上设置它，下面的元素将向上移动以占据其空间）；

要将元素设置为宽度为零并隐藏您需要将`overflow`属性设置为的内容`hidden`

*   `overflow: hidden`: 隐藏溢出的内容（扩展超出其父级的边界），防止它出现在其父级之外。

使用 jQuery，我建议使用`animate()`来完成任务：

```
$("#sidebar").css("overflow", "hidden").animate({ width: "hide" }, "fast"); 
```

您可以在此处使用“切换”或“显示”作为宽度参数。

# php - 抓取 Soundcloud 图像

> ID：11280046
> 
> 赞同：0
> 
> 时间：2012-07-01T06:33:58.640
> 
> 标签：php, javascript, image, curl, soundcloud

是否可以仅使用 Javascript 和 PHP 来获取 Soundcloud Track Art 的图像 URL？

是否可以执行相同的过程来获取 Soundcloud Track 的下载链接？

任何帮助是极大的赞赏！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T16:36:36.423

检查这里[http://developers.soundcloud.com/docs/api/reference#tracks](http://developers.soundcloud.com/docs/api/reference#tracks) 有一个名为`artwork_url`

# css - 放大时 CSS 无法在 iOS 上正确呈现

> ID：11280047
> 
> 赞同：3
> 
> 时间：2012-07-01T06:34:01.340
> 
> 标签：css, mobile-safari

我想渲染一个侧边栏。我的 CSS 在桌面浏览器上呈现时效果很好，即使我放大也是如此。然而，在 iOS 设备上，放大页面（通过捏合缩放）会在内容上呈现侧边栏。最后我检查了一下，我记得在默认的 Android 浏览器和 Chrome Beta 上得到了相同的行为。

我建立了一个（大部分）最小的演示页面来说明这种行为：[http ://www.seas.upenn.edu/~dange/test/test.html](http://www.seas.upenn.edu/~dange/test/test.html)

但是，如果您使用移动浏览器（例如移动 Safari）访问，我们会得到以下信息： [iOS 屏幕截图](http://i.stack.imgur.com/2pM0x.jpg)

这是用于呈现该页面的 CSS：

```
/* Sidebar */

header {
  border-right: 1px solid #AAA;
  float: left;
  padding: 0 10px;
  position: fixed;
  width: 200px;
  bottom: 0;
  left: 0;
  right: auto;
  top: 0;
}

#site-title {
  font: bold 36px sans-serif;
  margin: 1em 0;
  text-align: center;
}

/* Navigation menu in sidebar */

nav {
  font: 18px sans-serif;
  margin: 2em auto;
  width: 140px;
}

    nav > ul {
      list-style: none;
      padding: 0 10px;
    }

    nav li {
      margin: 0;
      text-align: center;
    }

    nav a {
      display: block;
      padding: 8px 10px;
      text-decoration: none;
    }

/* Content "Pane" */

#content,
footer {
  margin-left: 220px;
  max-width: 620px;
  padding: 0 10px;
  position: relative;
}

#content p {
  font: 18px / 30px serif;
}

footer {
  border-top: 1px solid #AAA;
  font: 14px serif;
} 
```

...和一个简化的 HTML 文档：

```
<body>
  <header>
    <h1 id="site-title">Lorem Ipsum</h1>
    <nav>
      <ul>
        <li><a href="#">Link 1</a></li>
        <li><a href="#">Link 2</a></li>
        <li><a href="#">Link 3</a></li>
      </ul>
    </nav>

  </header>

  <section id="content">
    <article>
      <p>...</p>
      <p>...</p>
      <p>...</p>
    </article>
  </section>

  <footer>
    <p>...</p>
  </footer>
</body> 
```

我知道这不是移动浏览器的最佳布局（我确实计划改进我的实际站点，以便它在移动设备上看起来不错）。但与此同时，我确实想摆脱这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T12:15:00.233

通过在 body 标记内使用包装器，我已经在我的网站上解决了类似的问题。

```
#wrapper{
     width:840px;
     overflow:auto;
} 
```

但我认为移动侧边栏不是一个好主意，除非它可以动态隐藏。在移动设备上，最好将侧边栏堆叠在内容之上：

```
@media (max-width: 480px) {
     #content, nav{width:100%; margin:10px 0; position:relative;}
} 
```

以上未经测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T20:01:35.357

尝试取出为标题固定的位置，我无法真正测试它，在小提琴上尝试过，但缩放似乎不像我预期的那样工作。但是如果您的标题标签固定在左侧，那么将它放在左侧是有意义的。似乎iOS将缩放视为调整窗口大小或其他东西，因此它迫使css做出反应或类似的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T18:01:38.440

诀窍是给导航元素（“标题”）不仅比主要内容的 z-index 小，而且给它一个负 z-index，如 -3。给主要内容 div 的 z-index 为 +4 或其他。

现在，当您使用 Mobile Safari 放大主要内容时，导航元素仍会像以前一样存在，但会隐藏在主要内容后面，直到您再次缩小。

玩得开心！

编辑：否定不是一个好主意，因为它使链接无法触及。至少在我的情况下;-)

编辑 2：z-index 似乎仅在其位置属性已明确设置为绝对、固定或相对的元素上适用于 Mobile Safari。

# css - 选择但排除包含

> ID：11280050
> 
> 赞同：3
> 
> 时间：2012-07-01T06:34:38.043
> 
> 标签：css

我有两种类型的标签，像第一行这样的普通标签，以及其中包含输入字段的标签。什么 CSS 规则可以让我选择所有`<label>`但排除恰好包含`<input>`在其中的所有标签？

```
<label for="type">Some Label</label>

<label for="type">
   <input type="checkbox" value="1" id="type">Some Label
</label> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T06:41:34.680

最好的方法是向它们或至少向其中一个添加不同的类。

CSS 没有父选择器，因此您无法使用一些 javascript 检查包含其他元素的元素。

一些背景：
[“包含 bar 的 foo”的 CSS 选择器？](https://stackoverflow.com/questions/2000582/css-selector-for-foo-that-contains-bar)
[有 CSS 父选择器吗？](https://stackoverflow.com/questions/1014861/css-parent-selector)
[CSS Parent/Ancestor Selector](https://stackoverflow.com/questions/1251768/css-parent-ancestor-selector)
[复杂 CSS 选择器，用于活动子的父级](https://stackoverflow.com/questions/45004/complex-css-selector-for-parent-of-active-child)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T06:49:00.433

**如果**您正在寻找标签+输入对，“相邻兄弟”选择器应该可以工作：

```
label+input
{
    /* rules */
} 
```

这将忽略您的标签嵌套输入，除非在其中包含输入的标签之后碰巧有输入。

请参阅 Sitepoint 的 CSS 参考：[http ://reference.sitepoint.com/css/adjacentsiblingselector](http://reference.sitepoint.com/css/adjacentsiblingselector)

# wpf - 将行样式绑定到用户控件的属性

> ID：11280052
> 
> 赞同：0
> 
> 时间：2012-07-01T06:34:57.273
> 
> 标签：wpf, styles, bind, radgridview

在 UserControl 我有一个属性：

```
公共 FontWeight RowFontWeight { 获取 { 返回 FontWeights.Bold; } 放 { } }
```

我有一个 RadGridView 名称 mygv；在我设置的用户控件的构造函数中

```
mygv.DataContext = 这个；
```

在gridview中我有：

```
<telerik:RadGridView.RowStyle>
    <Style TargetType="telerik:GridViewRow">
        <Setter Property="FontWeight" Value="{Binding RowFontWeight}" />
     </样式>
</telerik:RadGridView.RowStyle>

```

但行不会更改为粗体。我已将属性类型更改为字符串，但它不再起作用。
显然，如果我写 ... Value="Bold" ...，就可以了。

# node.js - 从另一个域获取图像并通过节点 js 编码 base64

> ID：11280063
> 
> 赞同：2
> 
> 时间：2012-07-01T06:39:09.357
> 
> 标签：node.js, base64, encode

我想从url获取图像并通过nodejs对该图像进行base64编码，然后通过base64编码显示该图像，但此代码不正确。此代码保存不正确的 png 文件。

```
var http = require('http')
  , fs = require('fs')
  , options

options = {
    host: 'google.com'
  , port: 80
  , path: '/images/srpr/logo3w.png'
}

function base64_encode(bitmap) {  
    return new Buffer(bitmap).toString('base64');
}

function ImageReady(res2){
    var request = http.get(options, function(res){
        var imagedata = '';
        res.setEncoding('binary');

        res.on('data', function(chunk){
            imagedata += chunk;
        })

        res.on('end', function(){
            var base64encode = base64_encode(imagedata);
            res2.end('<img src="data:image/png;base64,'+base64encode+'" />');
            fs.writeFile('logo.png', imagedata, 'binary', function(err){
            if (err) throw err
            console.log('File saved.')
        })
        })

    })
}

var httpListen = require('http');
httpListen.createServer(function (req, res) {
    res.writeHead(200, {'Content-Type': 'text/html'});
    ImageReady(res);
}).listen(8080);
console.log('Server running!'); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-06T10:19:30.123

尝试这个：

```
var loadBase64Image = function (url, callback) {
    // Required 'request' module
    var request = require('request');

    // Make request to our image url
    request({url: url, encoding: null}, function (err, res, body) {
        if (!err && res.statusCode == 200) {
            // So as encoding set to null then request body became Buffer object
            var base64prefix = 'data:' + res.headers['content-type'] + ';base64,'
                , image = body.toString('base64');
            if (typeof callback == 'function') {
                callback(image, base64prefix);
            }
        } else {
            throw new Error('Can not download image');
        }
    });
}; 
```

在你的 node.js 应用程序的某个地方使用：

```
// ...
loadBase64Image('http://upload.wikimedia.org/wikipedia/commons/thumb/9/9f/Carcharhinus_falciformis_off_Cuba.jpg/180px-Carcharhinus_falciformis_off_Cuba.jpg', function (image, prefix) {
    res.send('<img src="' + prefix + image + '"') />;
});
// ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-18T18:18:45.320

我最近遇到了这种情况，我只是通过使用这个模块[base64-img](https://www.npmjs.com/package/base64-img)来克服 它，它只是从 url 中提取一个 base64 编码的图像

* * *

```
var base64Img = require('base64-img');

base64Img.requestBase64(url, function (err, res, body) {
    if (err) console.log(err)
    else {
        console.log(res)
        console.log(body)  
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T05:14:27.537

我尝试使用@codef0rmer 代码，但没有成功......在阅读了要点评论后，我偶然发现了一个不依赖于“BufferList”外部库的解决方案，并且作为一种魅力......

所以这里是[这个要点的链接](https://gist.github.com/1294667)！它是用 Coffee 写的，所有归功于[@hackable](https://github.com/hackable)：

```
express = require("express")
request = require("request")
BufferList = require("bufferlist").BufferList //no longer needed
app = express.createServer(express.logger(), express.bodyParser())
app.get "/", (req, res) ->
  if req.param("url")
    url = unescape(req.param("url"))
    request
      uri: url
      encoding: 'binary'
    , (error, response, body) ->
      if not error and response.statusCode is 200
      data_uri_prefix = "data:" + response.headers["content-type"] + ";base64,"
        image = new Buffer(body.toString(), "binary").toString("base64")
        image = data_uri_prefix + image
        res.send "<img src=\"" + image + "\"/>"

app.listen 3000 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-01T06:47:25.680

尝试使用[request](http://search.npmjs.org/#/request) npm 插件，

```
app.get('/', function(req, res){
  if(req.param("url")) {
    var url = unescape(req.param("url"));
    var bl = new BufferList();
    request({uri:url, responseBodyStream: bl}, function (error, response, body) {
      if (!error && response.statusCode == 200) {
        var data_uri_prefix = "data:" + response.headers["content-type"] + ";base64,";
        var image = new Buffer(bl.toString(), 'binary').toString('base64');                                                                                                                                                                 
        image = data_uri_prefix + image;
        res.send('<img src="'+image+'"/>');
      }
    }); 
  }
}); 
```

更多信息：[https ://gist.github.com/583836](https://gist.github.com/583836)

# ruby-on-rails - AJAX 渲染搞乱了我的路线

> ID：11280070
> 
> 赞同：0
> 
> 时间：2012-07-01T06:40:23.480
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, routes

我有两个控制器杂志和文章，文章是杂志的嵌套路线。当我在`/magazines/show`那里时，有一个创建文章的基本表格

```
<%= form_for @article, :url => magazine_articles_path(@magazine), remote: true do |f| %>
    <%= render 'shared/error_messages', target: @article %>
    <%= f.text_field :name %>
    <%= f.submit %>
<% end %> 
```

当这个提交它被发送到文章控制器。在文章控制器中，我呈现了一个重新呈现此表单的操作（如果有任何错误，我正在重新呈现表单以消除错误）

```
$('#id').html('<%= escape_javascript render partial: 'create_article' %>'); 
```

但是，这会将表单的操作更改`/magazines/:id/articles`为`/magazines/:id`

初始形式：

```
<form id="new_article" class="new_article" method="post" data-remote="true" action="/magazines/1/articles" accept-charset="UTF-8"> 
```

重新渲染后的表格：

```
<form id="edit_article_3" class="edit_article" method="post" data-remote="true" action="/magazines/1/articles" accept-charset="UTF-8"> 
```

如果我再次尝试提交此表单，这会打乱我的路由并给我带来路由错误。我猜这是因为新`@article`的来自文章控制器。非常感谢有关这种情况如何发生的更多细节以及解决此问题的干净解决方案。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:17:31.747

哈！在第二种情况下，您`@article`已经存在，您的表单应如下所示：

```
<%= form_for @article, :url => magazine_articles_path(@magazine, @article), remote: true do |f| %> 
```

所以要多解释一下：既然`@article`存在，你应该清楚哪些`@article`正在被编辑。如果文章尚不存在，则只需创建新文章即可。

路径助手可能可以处理新记录与现有记录本身，否则您将不得不执行类似的操作

```
<% post_url = @article.new_record? ? magazine_articles_path(@magazine) : magazine_articles_path(@magazine, @article) %>
<%= form_for @article, :url => post_url, remote: true do |f| %> 
```

希望这可以帮助。

# entity-framework - Entity Framework 4.0 (5.0) 和一对多

> ID：11280073
> 
> 赞同：1
> 
> 时间：2012-07-01T06:41:07.960
> 
> 标签：entity-framework, one-to-many

我有两节课：

```
public class MultilingualString
{
  public int Id { get; set; }

  public string DefaultText { get; set; }

  public IList<Translation> Translations { get; set; }
} 
```

和

```
public class Translation
{
    public string Language { get; set; }

    public string Text { get; set; }

    public MultilingualString Owner { get; set; }
} 
```

现在，我想要具有以下架构的表 MultilingualStrings 和 Translations：

```
MultilingualString
  ID INT PK
  DefaultText NVARCHAR 
```

和

```
Translations
  StringID PK, FK
  Language NCHAR(5) PK
  Text NVARCHAR 
```

但不知道如何使用 EF4/EF5 创建我的代码优先模型映射。EF可以实现这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T10:07:40.777

无法在表和实体之间创建映射，因为您必须将完整的主键公开为实体类中的属性。您的表`Translations`有一个复合主键 ( `StringID`+ `Language`)，但您的实体`Translation`只有该键 ( `Language`) 的一部分作为属性。

但是，如果您`StringID`在映射中引入 as 属性`Translation`应该是可能的：

```
public class Translation
{
    public int StringId { get; set; }
    public string Language { get; set; }

    public string Text { get; set; }

    public MultilingualString Owner { get; set; }
} 
```

使用 Fluent API 进行映射：

```
modelBuilder.Entity<Translation>()
    .HasKey(t => new { t.StringId, t.Language });

modelBuilder.Entity<Translation>()
    .Property(t => t.Language)
    .HasMaxLength(5)
    .IsFixedLength();

modelBuilder.Entity<Translation>()
    .HasRequired(t => t.Owner)
    .WithMany(m => m.Translations)
    .HasForeignKey(t => t.StringId); 
```

# java - 将一组变量从即时批处理运行时传递到 JAVA 中的调用批处理文件

> ID：11280075
> 
> 赞同：1
> 
> 时间：2012-07-01T06:41:15.347
> 
> 标签：java, variables, process, batch-file, runtime

我有一个有趣的问题。我有一个 Java 应用程序，它创建一个批处理文件并且该批处理文件设置一个变量。现在，正在从另一个批处理文件调用应用程序自身。因此，我想了解如何将变量传递给父批处理文件。我可以在批处理调用另一个批处理时执行此操作，但不能在批处理文件调用 jar 文件时执行此操作，实习生创建批处理文件，执行它并退出。这是我的代码。

```
 import java.awt.Window;
    import java.io.BufferedWriter;
    import java.io.File;
    import java.io.FileWriter;
    import java.io.IOException;
    import java.io.UnsupportedEncodingException;
    import java.net.URLDecoder;
    import java.security.InvalidAlgorithmParameterException;
    import java.security.InvalidKeyException;

    import javax.crypto.BadPaddingException;
    import javax.crypto.IllegalBlockSizeException;
    import javax.crypto.ShortBufferException;

    import junit.framework.Test;

    public class main 
    {
        private static byte[] KeyBytes = {0,0,0,0,0,0,0,0};
        private static byte[] ivBytes = {0,0,0,0,0,0,0,0};

        public static void main(String[] args) throws InvalidKeyException, InvalidAlgorithmParameterException, IllegalBlockSizeException, ShortBufferException, BadPaddingException, IOException, ClassNotFoundException, InterruptedException
        {   
            ObjectCrypter EncStr = new ObjectCrypter(KeyBytes,ivBytes);
            if(args.length == 2 )
            {
                if (args[0].equals("-E")|args[0].equals("-e"))
                {
                    byte[] tbyte = EncStr.encrypt(args[1]);
                    String test = byteToString(tbyte); 
                    System.out.println(test);
                }
                else if (args[0].equals("-D")|args[0].equals("-d"))
                {
                    byte[] t = stringToByte(args[1]);
                    writeBat("SET HypPWD=" +String.valueOf(EncStr.decrypt(t)));
                    //System.out.println("cmd /C " + getPath() + "tmpPwd.bat");
                    Process proc = Runtime.getRuntime().exec("cmd /C start tmpPwd.bat");
                    proc
                    proc.waitFor();
                }
            }
            else
            {
                System.out.println("Wrong Argument set please revise input");
                System.exit(0);
            }
        }
        private static String getPath() throws UnsupportedEncodingException 
        {
//....
        }
        public static String byteToString(byte[] b) 
        {
//....
        }
        public static byte[] stringToByte(String s)
        {
//....
        }
        public static void writeBat(String txt)
          {
              try
              {
                  FileWriter fstream = new FileWriter("tmpPwd.bat");
                  BufferedWriter out = new BufferedWriter(fstream);
                  out.write("@ECHO OFF");
                  out.newLine();
                  out.write(txt);
                  out.newLine();
                  out.write("EXIT");
                  out.newLine();
                  out.write("DEL tmpPwd.bat");
                  out.close();
              }
              catch (Exception e)
              {
                  System.err.println("Error: " + e.getMessage());
              }
          } 
```

# .net - 无法保存 applicationHost.config 文件

> ID：11280076
> 
> 赞同：18
> 
> 时间：2012-07-01T06:41:23.567
> 
> 标签：.net, windows, iis, configuration-files

我无法保存 applicationHost.config 文件，它说“保存失败，它在另一个程序中打开”，而我停止 IIS 服务并关闭了 Visual Studio，知道吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-11T20:25:58.783

如果您使用 64 位架构并尝试使用 32 位编辑器（例如 Notepad++）进行编辑，显然您无法保存文件。尝试使用 Windows 附带的常规记事本编辑文件。可以肯定的是，还要以管理员身份运行记事本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-25T20:00:29.923

1.  以管理员身份打开记事本++
2.  打开 %SystemRoot%\Sysnative\inetsrv\config\applicationHost.config
3.  停止 IIS
4.  编辑和保存更改

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T06:50:45.513

您没有足够的权限来修改文件。

右键单击文件，然后单击属性。

在安全选项卡下 -> 检查您登录的用户帐户是否对文件具有修改权限。

如果没有，则编辑权限并检查修改并应用这些设置。

现在尝试更新它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T09:19:49.003

您是否尝试编辑 C:\Program Files\IIS Express\AppServer 中的那个？您的 Documents 文件夹中有一个镜像副本，位于 IISExpress\config 下，我相信这是您要编辑的副本；为您复制更改。

# batch-file - 用于制作备份文件夹的批处理脚本。只有新的和修改过的文件

> ID：11280077
> 
> 赞同：4
> 
> 时间：2012-07-01T06:41:33.693
> 
> 标签：batch-file, backup, xcopy

我需要一个脚本来仅将更改/修改的文件和新文件从我的 C:\Dropbox 复制到我的 C:\backup。为什么这只会复制文件夹结构：

```
@echo off

set destination=C:\Backup
set source=C:\Users\XXXX\Dropbox\Intranet

for /F "tokens=2-4 delims=/ " %%i in ('date /t') do set yyyymmdd1=%%j"."%%i"."%%k

xcopy %source%"\*" %destination%"\*" /m/e/y
mkdir %destination%"\LastBackupDate %yyyymmdd1%"
echo A folder containing the latest date has been created in root directory of %source%.
echo Finished copying %source% to %destination%
echo.
pause 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T09:08:00.137

```
ECHO OFF
set source=C:\Users\xxxx\Dropbox\
set destination=C:\Backup\

for /F "tokens=2-4 delims=/ " %%i in ('date /t') do set yyyymmdd1=%%j"."%%i"."%%k

if exist %destination% goto GO
:GO
mkdir %destination%%yyyymmdd1%
xcopy %source%* %destination% /s/d/y/c/v/r
echo. 
echo Finished copying %source% to %destination%
echo.
echo Created %destination%%yyyymmdd1%
pause 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-01T11:54:07.020

这是一个通用的备份脚本。

```
@echo off
REM get start time
for /f "tokens=2 delims==" %%a in ('wmic OS Get localdatetime /value') do set "dt=%%a"
set "YY=%dt:~2,2%" & set "YYYY=%dt:~0,4%" & set "MM=%dt:~4,2%" & set "DD=%dt:~6,2%"
set "HH=%dt:~8,2%" & set "Min=%dt:~10,2%" & set "Sec=%dt:~12,2%"

REM set "datestamp=%YYYY%%MM%%DD%" & set "timestamp=%HH%%Min%%Sec%"
set "fullstamp=%YYYY%-%MM%-%DD%_%HH%-%Min%-%Sec%"
set "logtimestamp=%YYYY%.%MM%.%DD% %HH%:%Min%:%Sec%"

REM actual copy
set source=%1
set destination=%2

REM create the exclusion list
set exclusion=%3
set exclusion=%exclusion:"=%
(for %%i in (%exclusion%) do echo %%i) > exclusion.txt

REM set the file name for the logging data
set log=log-%fullstamp%.txt

REM start the backup process
echo // started backup at %logtimestamp% > %log%
echo // from %~f1 to %~f2\ >> %log%

echo ---- >> %log%
xcopy %source% %destination% /S /E /C /D /H /R /Y /V /I /EXCLUDE:exclusion.txt >> %log%
echo ---- >> %log%
del /f exclusion.txt

REM get finish time
for /f "tokens=2 delims==" %%a in ('wmic OS Get localdatetime /value') do set "dt=%%a"
set "YY=%dt:~2,2%" & set "YYYY=%dt:~0,4%" & set "MM=%dt:~4,2%" & set "DD=%dt:~6,2%"
set "HH=%dt:~8,2%" & set "Min=%dt:~10,2%" & set "Sec=%dt:~12,2%"
set "logtimestamp=%YYYY%.%MM%.%DD% %HH%:%Min%:%Sec%"

echo // finished backup at %logtimestamp% >> %log%

REM move the logging
if not exist "%destination%\.backup_log" mkdir %destination%\.backup_log
move %log% %destination%\.backup_log 
```

我会这样称呼它，假设批处理脚本称为backup.bat：

```
backup.bat MyFolder h:\MyFolder .metadata 
```

MyFolder 的内容被备份到 h:\MyFolder 并且所有名为“.metadata”的文件夹都被忽略。如果 h:\ 驱动器上的文件夹“MyFolder”尚不可用，则会创建该文件夹。

该脚本的特点：

*   创建所有必要的文件夹
*   如果自上次备份以来修改了所有文件，则复制所有文件
*   在目标文件夹数据中创建一个用于记录的文件夹：.backup_log
*   创建一个日志文件，其中包含 xcopy 运行时的所有信息以及开始和停止时间的时间戳。

更新：如果您没有排除列表，请将“”作为第三个参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-23T00:08:42.027

要回答最初的问题，为什么您的脚本只复制了文件夹结构......

由于 xcopy 上的参数，您只指定了这些 /m/e/y：

> /M = 仅复制带有存档属性集的文件，关闭存档属性。
> 
> /E = 复制目录和子目录，包括空目录。
> 
> /Y = 禁止确认。

请注意，正如之前给出的答案，只需添加 /D 和删除 /M 就可以了，请检查帮助中关于 /D 的内容：

> /D:mdy 复制在指定日期或之后更改的文件。如果未指定日期，则仅复制源时间比目标时间新的文件。

如果您需要在一次运行中备份多个文件夹并拥有一个包含其执行的日志文件，您可以使用以下内容：

```
@echo off

call:backUpFolder "C:\Users\XXX\folder1" "C:\Backup\folder1"
call:backUpFolder "C:\Users\XXX\folder2" "C:\Backup\folder2"
call:backUpFolder "C:\Users\XXX\folder3" "C:\Backup\folder3"

goto:eof
::--------------------------------------------------
::-- This is the function to back up one folder
::--------------------------------------------------
:backUpFolder
set source="%~1"
set destination="%~2"
echo copying from %source% to %destination%

for /F "usebackq tokens=1,2 delims==" %%i in (`wmic os get LocalDateTime /VALUE 2^>NUL`) do if '.%%i.'=='.LocalDateTime.' set ldt=%%j
set ldt=%ldt:~0,4%-%ldt:~4,2%-%ldt:~6,2% %ldt:~8,2%:%ldt:~10,2%:%ldt:~12,6%

xcopy %source%"\*" %destination%"\*" /s/d/y/c/v/r

echo %ldt%: %source% to %destination% >> backHistory.log
echo Finished copying %source% to %destination%
goto:eof 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-12T08:34:21.093

```
set "source="F:\Projects""
set "destination=G:\backup"

for /f "tokens=1* delims=" %%a in ('date /T') do set datestr=%%a
if not exist %destination%\%datestr% (mkdir %destination%\%datestr%)

for /f %%I in ('wmic os get localdatetime ^|find "20"') do set dt=%%I
set dt=%dt:~4,2%-%dt:~6,2%-%dt:~0,4%
echo %dt%

XCOPY %source% %destination%\%datestr% /S /d:%dt% /Y

REM XCOPY %source% %destination%\%datestr% /E /I /H /Y /S /d:%dt%

pause
"Press any key to continue . . ." 
```

# search-engine - Google 如何跟踪动态页面？

> ID：11280079
> 
> 赞同：1
> 
> 时间：2012-07-01T06:41:37.183
> 
> 标签：search-engine

我听说谷歌可以跟踪网站中的所有静态页面以及这些页面中的所有文本、图像和视频，但是它如何跟踪动态页面呢？

例如，如果我在 Google 上搜索“Facebook Sam耶路撒冷”，它会显示包含我的 Facebook 页面和一些相关页面的搜索结果。Elance、Freelancers.com、DeviantArt 和许多其他网站的情况也是如此。它也适用于 Stack Overflow：我们可以搜索问题，Google 可能会在 Stack Overflow 上找到该问题的页面。

我不敢相信这些网站会为每个用户或每个产品自动生成一个静态页面。我搜索了答案，但我无法理解许多网站在说什么，有些网站只提供了一个模糊的想法。

**Google 如何跟踪动态网页？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T06:45:49.003

对于客户来说，静态页面和动态页面之间没有区别。客户端只需在 URL 处请求内容，服务器将内容提供给客户端。

像谷歌这样的搜索引擎请求页面并将它们编入索引。只要客户端仍然获得内容，服务器就可以处理它想要的请求。

^(这是一个过度简化，但细节对于这个问题的目的并不重要。)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-01T06:46:32.233

你应该明白一件事——你在互联网上看到的每个页面都是静态的。它在服务器上动态生成的事实是无关紧要的，因为所有浏览器/爬虫都看到它只是一个静态的 html、css 和 javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T15:13:15.990

只要每个动态页面都有一个不同的 URL JSYK，跟踪就会发生。

# iphone - iOS状态栏：如何在那里显示一些文本

> ID：11280081
> 
> 赞同：21
> 
> 时间：2012-07-01T06:41:53.607
> 
> 标签：iphone, ios

在 iPhone 屏幕的最顶部栏中，我不知道它是否称为状态栏。我想在完成一些操作后写一些文字，是否有任何 API 或示例？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-01T07:32:46.933

您应该会发现 gitHub 项目[MTStatusBarOverlay](https://github.com/myell0w/MTStatusBarOverlay)非常有用。允许轻松而强大地创建自定义状态栏覆盖的下拉类。[也可以在此处找到](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=status+bar)实现相同目的的其他一些类。

那些说这违背了良好的 iOS 设计的人，我认为如果谨慎使用并且仅在适当的情况下使用，它可以帮助整理已经在屏幕上显示大量信息的应用程序。

编辑：一个很好的当前例子是大肆宣传的电子邮件应用[Mailbox](http://www.mailboxapp.com/)。它使用状态栏覆盖来指示正在运行的任务的进度，释放整个屏幕来显示内容！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T06:44:55.850

状态栏仅供操作系统使用 - 这意味着它可以显示时间、网络活动指示器、电池状态等，但不可自定义。我想如果您谈论的是越狱环境的开发，情况并非如此。

一个有趣的选项可能是[创建自定义状态栏](http://www.cocoaintheshell.com/2010/11/custom-status-bar-ios/)。

**更新**

自从我写了这个答案以来，我在 Cocoa Controls 上遇到了几个可能有帮助的项目：

[KG状态栏](http://www.cocoacontrols.com/controls/kgstatusbar)

[FDStatusBarNotifierView](http://www.cocoacontrols.com/controls/fdstatusbarnotifierview)

[TW状态](http://www.cocoacontrols.com/controls/twstatus)

似乎自从 MailBox 应用程序以来这已经变得“性感”了 :)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-01T15:22:14.763

另一种解决方案是在下方显示辅助状态栏：

[iOS：创建用于显示应用内消息的辅助状态栏](https://coderwall.com/p/jkdqra)

![隐](../Images/ebc848abe84bb7b01b56322f5866ae7e.png) ![可见的](../Images/c0b49bca1990c856644a63b8fcba404b.png)

# php - BadMethodCallException：未定义方法 waitForTextPresent

> ID：11280083
> 
> 赞同：0
> 
> 时间：2012-07-01T06:42:42.030
> 
> 标签：php, selenium, tdd, yii, phpunit

我在 Mandriva 2011 Apache 2.2.22
PHP 5.3.14
PHPUnit 版本 3.3.17
Selenium Server 2.24.2
Yii 1.1.10上运行服务器
我把一些工作带到我家，发现我无法运行标准测试..

```
PHPUnit 3.3.17 by Sebastian Bergmann.

.EE

Time: 33 seconds

There were 2 errors:

1) testContact(SiteTest)
BadMethodCallException: Method waitForTextPresent not defined.
/home/user/server/hosts/cmf/www/framework/test/CWebTestCase.php:63
/home/user/server/hosts/cmf/www/protected/tests/functional/SiteTest.php:21
/home/user/server/hosts/cmf/www/protected/tests/functional/SiteTest.php:21

2) testLoginLogout(SiteTest)
BadMethodCallException: Method waitForTextPresent not defined.
/home/user/server/hosts/cmf/www/framework/test/CWebTestCase.php:63
/home/user/server/hosts/cmf/www/protected/tests/functional/SiteTest.php:36
/home/user/server/hosts/cmf/www/protected/tests/functional/SiteTest.php:36

FAILURES!                                                                                                                                   
Tests: 3, Assertions: 4, Errors: 2. 
```

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T09:23:55.733

我刚刚将 PHPUnit 从 pear 升级到 v.3.6.11。并且问题解决了。
奇怪的是它不是从 mandriva repo 中获得的最新版本。

# iphone - iScroll：如何隐藏 IOS Safari 地址栏

> ID：11280090
> 
> 赞同：2
> 
> 时间：2012-07-01T06:45:08.993
> 
> 标签：iphone, css-position, iscroll, address-bar

我正在尝试隐藏我的 iPhone 网站上的地址栏。当然，我首先尝试了这个：

```
 window.addEventListener("load",function() {
  // Set a timeout...
    setTimeout(function(){
  // Hide the address bar!
    window.scrollTo(0, 1);
    }, 100);
}); 
```

哪个有效，但是...

我使用 iScroll 杀死了它。我猜想当从文档流中删除绝对定位的元素时，这会影响正文的高度，从而使上述脚本无用。

隐藏不依赖于文档正文高度的地址栏是否还有其他技巧？

# javascript - 如何通过值查找html元素

> ID：11280091
> 
> 赞同：0
> 
> 时间：2012-07-01T06:45:47.243
> 
> 标签：javascript, jquery, html

我想通过它的值找到一个 html 元素。我尝试使用 id，但我的情况很脆弱：

伪代码：

```
for user in users:
 <li id="followed" onclick="follow($(this).text())"><a class="follow">user.name</a></li>
endfor 
```

我希望每个用户名都可以点击，我将他保存到数据库中并将“保存”附加到用户名的末尾部分。像这样：

```
"username" ==> after click: "username saved" 
```

我正在通过 ajax 执行此操作。

```
function follow(data){
    var Him = data;
    alert(Him);
    $.ajax({
        url: "/follow",
        type: "POST",
        datatype: "html",
        data: {Him: Him}
    }).success(function(response){
        $('#followed').append(response);
    });
} 
```

这段代码很好，但它仅将“已保存”响应附加到第一个用户名，因为在循环结束时，所有用户名都有`id='followed'`.

这就是为什么，我想通过它的值找到 html 元素。例如“用户名”。
是否可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T06:50:01.550

您可以使用该`context`参数更改传递给 AJAX 请求的成功回调的上下文。

但首先让我们从清理标记开始，如果这是一个循环，则使用类名而不是 id，因为如您所知，id 在 HTML 中必须是唯一的：

```
for user in users:
    <li class="followed"><a class="follow">user.name</a></li>
endfor 
```

好的，现在我们已经清理了标记，让我们悄悄地订阅`.click()`this 的事件`<li>`：

```
$(function() {
    $('.followed').click(function() {
        // Remark: maybe you wanna get just the username inside the anchor in which case
        // you probably need "var Him = $('a', this).text();"
        var him = $(this).text();
        $.ajax({
            url: '/follow',
            type: 'POST',
            dataType: 'html',
            context: this,    // <!-- Here, that's the important bit
            data: { him: him },
        }).success(function(response) {
            // since we have used the context, here 'this' will no
            // longer refer to the XHR object (which is the default) but
            // to whatever we have passed as context (in our case this
            // happens to be the <li> that was clicked) => we can be certain
            // that we are updating the proper DOM element
            $(this).append(response);
        });
    });
}); 
```

# eclipse - 无法安装 Eclipse 的 Maven 集成

> ID：11280093
> 
> 赞同：0
> 
> 时间：2012-07-01T06:45:55.523
> 
> 标签：eclipse, maven, eclipse-plugin, m2eclipse

我尝试从 Eclipse Market Place 安装 Maven Integration for Eclipse。

我不得不在中途取消安装，因为它花了很长时间。

我在重启 Eclipse 后尝试安装，现在我找不到“ `Install`”按钮，而是有一个“ `Update`”按钮被禁用。（见屏幕截图）。

我尝试卸载并重新安装，但没有成功。

我在我的 Ubuntu 12.04 LTS 上使用 Eclipse Indigo。

![在此处输入图像描述](../Images/b5eb316f694d8a67f2c252a668da9afc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T06:48:01.533

现在，m2e 在 Eclipse 中默认启用。已经存在时无需安装。

# dhtml - 将 dhtmlgoodies 向下滑动更改为向上滑动

> ID：11280094
> 
> 赞同：0
> 
> 时间：2012-07-01T06:46:02.130
> 
> 标签：dhtml, slidedown, slideup

我希望将以下脚本从初始向下滑动操作更改为初始滑动**向上**操作。我不能使用 Jquery，只能使用常规 JS。

目前当内容进入时，它是向下滑动的。我希望它向上滑动。

谢谢你的帮助！

```
<pre>
<script language="javascript" type="text/javascript">

var initHeight = 0;
var slidedown_direction = 1;
var slidedownContentBox = false;
var slidedownContent = false;
var slidedownActive = false;
var contentHeight = false;
var slidedownSpeed = 3;  // Higher value = faster script
var slidedownTimer = 7; // Lower value = faster script

function slidedown_showHide() {
  if(initHeight==0)slidedown_direction=slidedownSpeed; else slidedown_direction = slidedownSpeed*-1;
  if(!slidedownContentBox) {
    slidedownContentBox = document.getElementById('dhtmlgoodies_contentBox');
    slidedownContent = document.getElementById('dhtmlgoodies_content');
    contentHeight = document.getElementById('dhtmlgoodies_content').offsetHeight;
  }
  slidedownContentBox.style.visibility='visible';
  slidedownActive = true;
  slidedown_showHide_start();
}

function slidedown_showHide_start() {
  if(!slidedownActive)return;
  initHeight = initHeight/1 + slidedown_direction;
  if(initHeight <= 0) {
    slidedownActive = false; 
    slidedownContentBox.style.visibility='hidden';
    initHeight = 0;
  }
  if(initHeight>contentHeight) {
    slidedownActive = false; 
  }
  slidedownContentBox.style.height = initHeight + 'px';
  slidedownContent.style.top = initHeight - contentHeight + 'px';
  setTimeout('slidedown_showHide_start()',slidedownTimer); // Choose a lower value than 10 to make the script move faster
}

function setslidedownWidth(newWidth) {
  document.getElementById('dhtmlgoodies_slidedown').style.width = newWidth + 'px';
  document.getElementById('dhtmlgoodies_contentBox').style.width = newWidth + 'px';
}

function setSlideDownSpeed(newSpeed) {
  slidedownSpeed = newSpeed;
}

</script>
</pre> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T16:13:18.127

使用`bottom`代替`top`：

```
slidedownContent.style.bottom = initHeight - contentHeight + 'px'; 
```

或加法而不是减法：

```
slidedownContent.style.top = initHeight + contentHeight + 'px'; 
```

# asp.net - 为什么这里没有调用 jQuery 代码...请建议？

> ID：11280095
> 
> 赞同：1
> 
> 时间：2012-07-01T06:46:11.887
> 
> 标签：asp.net, asp.net-mvc-3, jquery

在我所有的代码下面，

**型号 **

以下是型号代码，

```
public class MyViewModel
{
    public int? Year { get; set; }
    public int? Month { get; set; }

    public IEnumerable<SelectListItem> Years
    {
        get
        {
            return Enumerable.Range(2000, 12).Select(x => new SelectListItem
            {
                Value = x.ToString(),
                Text = x.ToString()
            });
        }
    }
} 
```

**控制器**

下面是控制器代码，

```
//
    // GET: /MenuSix/

    public ActionResult Index()
    {
        var model = new MyViewModel();
        return View(model);
    }

    public ActionResult Months(int year)
    {
        if (year == 2011)
        {
            return Json(
                Enumerable.Range(1, 3).Select(x => new { value = x, text = x }),
                JsonRequestBehavior.AllowGet
            );
        }
        return Json(
            Enumerable.Range(1, 12).Select(x => new { value = x, text = x }),
            JsonRequestBehavior.AllowGet
        );
    } 
```

**看法**

下面是查看代码，

```
@model DemoWeb.Models.MenuSix.MyViewModel
@using (Html.BeginForm()) 
{
@Html.DropDownListFor(
x => x.Year,
new SelectList(Model.Years, "Value", "Text"),
"-- select year --"
)
@Html.DropDownListFor(
x => x.Month,
Enumerable.Empty<SelectListItem>(),
"-- select month --"
)
}

@section PageScriptsAndCSS{
<script type="text/javascript">
    $('#Year').change(function () {
        debugger;
        var selectedYear = $(this).val();
        if (selectedYear != null && selectedYear != '') {
            $.getJSON('@Url.Action("Months")', { year: selectedYear }, 
 function    (months) {
                var monthsSelect = $('#Month');
                monthsSelect.empty();
                $.each(months, function (index, month) {
                    monthsSelect.append($('<option/>', {
                        value: month.value,
                        text: month.text
                    }));
                });
            });
        }
    });

</script>
} 
```

我正在测试上面的代码，但是在此处未调用的 jquery 代码中，请建议为什么在 jquery 中未调用下拉更改事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T06:49:33.577

将 javascript 代码包装在 document.ready 中，以确保在绑定 then 事件时控件可用。它看起来这个 javascript 是在头部呈现的，此时下拉菜单还没有添加到 DOM

```
$(document).ready(function() 
```

{ $("#year").///其余代码});

# php - 在php中传递消息时出现错误行

> ID：11280099
> 
> 赞同：0
> 
> 时间：2012-07-01T06:47:01.613
> 
> 标签：php

我一直在使用登录代码..它工作正常，除了打开登录页面时出现的这条消息！

```
Notice: Undefined index: msg in C:\xampp\htdocs\thesite\login.php on line 103 
```

它出现在我在 loginExcution.php 中输入时

```
 else {
        //Login failed
        header("location:login.php? msg=*invalid name or password");
        exit();
    } 
```

这将在登录表单页面中显示消息

```
<?php
$msg = $_GET['msg'];
print $msg;
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T06:49:25.963

不要在你的`header("Location:`.

```
else {
    //Login failed
    header("Location: login.php?msg=invalid%20name%20or%20password");
    exit();
} 
```

**编辑：** s`%20`实际上是空格。`urlencode()`如果您想了解更多信息，请查看 PHP 函数。上面的代码等价于：

```
else {
    //Login failed
    header("Location: login.php?msg=" . urlencode("invalid name or password"));
    exit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T07:02:28.860

除了删除 simpleianm 答案中提到的第一个空格。如果代码到达此行 $_GET['msg'] 并且 msg 未定义索引，它将触发通知。你可以这样做

```
 if (isset($_GET['msg'])){
      $msg=$_GET['msg'];
      print $msg;
 } 
```

但是，通过 url 传递消息内容并不是一个好主意。用户可以传递一些 javascript 并将链接发送给毫无戒心的用户。相反，您可以将其设为代码 login.php?msg=invalid

然后在代码中

```
 if (isset($_GET['msg'])){
      switch ($msg){
          case "invalid":
              echo "Invalid username or password";
          break;
      }  
 } 
```

# windows - Windows 7 上默认安装了哪些编程语言？

> ID：11280102
> 
> 赞同：0
> 
> 时间：2012-07-01T06:47:55.303
> 
> 标签：windows, compiler-construction

我正计划学习一种创建自己的编程语言的方法，我想知道用什么语言编写编译器。C？C++？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T07:05:46.020

Windows Vista 和更新版本默认安装了 .NET Framework。这反过来已经为 .NET 语言（最显着的 C# 和 VB.NET）提供了编译器。它是唯一一种您可以编写高效编译器的语言。其他语言是 VBScript 和 JScript（通过 windows Scripting Host）和批处理文件，因此您真的不想在其中实现更复杂的东西。

但是，根据您要创建的语言的复杂性，C++ 实现可能会提供更好的性能。无意冒犯，但你并没有给人留下你真的知道如何为一门新语言实现编译器的印象。Greg Hewgill 的链接应该为您提供一些起点。问题是，创建一种新的（正式的）语言绝非易事。是的，这样做的工具是免费的，知识也是免费的。但是，在尝试编写编译器或解释器之前，您应该已经对编写编译器或解释器的编程语言有深入的了解。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-01T06:50:49.043

我建议你使用 C#；DLR 非常适合此目的。

# titanium - 如何在单击按钮上从一个 js 页面导航到另一个 js 页面

> ID：11280105
> 
> 赞同：0
> 
> 时间：2012-07-01T06:48:49.770
> 
> 标签：titanium

我对 mac os x 的钛金属比较新鲜。

我是第一次使用钛，对 js 页面和动作事件一无所知

我正在设置钛并添加按钮。单击按钮时，我需要导航到另一个 js 页面

```
 var btn = Ti.UI.createButton({

        left:10,
        top:100,        
        height:'40',
        width:'80',
        title:'login',
        color:'auto'
     }  
)
    self.add(lbl);

    btn.addEventListener('click',function() {
    }
        ) 
```

让示例考虑第二个 js 页面是 login.js 页面

当我单击按钮时，我需要登录.js 页面

带导航效果！

@ 提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T06:41:02.640

使用下面的代码

```
var btn = Ti.UI.createButton({
        left:10,
        top:100,        
        height:'40',
        width:'80',
        title:'login',
        color:'auto'
});
self.add(btn);

btn.addEventListener('click',function() {
    var win = Titanium.UI.createWindow({
        url:'login.js',
        title:'Login'
    });

    Titanium.UI.currentTab.open(win,{animated:true}); //if you used tabbar in your app
    win.open(win,{animated:true}); //if you don't have tabbar in your app
}); 
```

希望这可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T09:21:35.370

此代码可以帮助您

功能应用程序窗口（）{

```
//declare module dependencies

var All = require('ui/common/All');

    Tree = require('ui/common/Tree');

    EBOM = require('ui/common/E-BOM');

    MBOM = require('ui/common/M-BOM');

    SBOM = require('ui/common/S-BOM');

//create object instance

var self = Ti.UI.createWindow({

    title:'Products',

    exitOnClose:true,

    navBarHidden:true,

    backgroundColor:'#ffffff',
    /////////////////////////////////////////////////////////////////////////////

    activity: {

        onCreateOptionsMenu: function(e) {

            var menu = e.menu;       

            var menuItem = menu.add({ title: "C-BOM", icon: 'Arrow-Hover.jpg' });

            //menuItem.setIcon("Arrow-Hover.jpg");

            menuItem.addEventListener("click", function(e) {

                 var all = new All();

                        self.add(all);
            });

            var menuItem = menu.add({ title: "ALL-BOM" });

            menuItem.setIcon("images/refresh_icon.png");

            menuItem.addEventListener("click", function(e) {

                   var tree = new Tree();

                        self.add(tree);
            });

            var menuItem = menu.add({ title: "E-BOM" });

            menuItem.setIcon("images/refresh_icon.png");

            menuItem.addEventListener("click", function(e) {

                    var ebom = new EBOM();

                        self.add(ebom);
            });

            var menuItem = menu.add({ title: "M-BOM" });

            menuItem.setIcon("images/refresh_icon.png");

            menuItem.addEventListener("click", function(e) {

                    var mbom = new MBOM();

                        self.add(mbom);
            });

            var menuItem = menu.add({ title: "S-BOM" });

            menuItem.setIcon("images/refresh_icon.png");

            menuItem.addEventListener("click", function(e) {

                   var sbom = new SBOM();

                        self.add(sbom);
            });

            var menuItem = menu.add({ title: "Logout" });

            menuItem.setIcon("Arrow-Hover.jpg");

            menuItem.addEventListener("click", function(e) {

                 alert("Logout");

            });

           }

          }

    /////////////////////////////////////////////////////////////////////////////

});

var webview = Titanium.UI.createWebView({

    url:'/ui/common/Login.html'

    });

self.add(webview);

return self; 
```

};

module.exports = 应用程序窗口；

# javascript - 如何编辑一篇博客文章的 CSS 而不是其他文章的 CSS 以获得 5 星评级系统？

> ID：11280114
> 
> 赞同：1
> 
> 时间：2012-07-01T06:49:40.073
> 
> 标签：javascript, jquery, html, css, rating-system

我最近使用 Google 的 Blogger创建[**了自己的博客。**](http://beingwellread.blogspot.com)

当我读完一本书后，我有一个[**我读过的书部分**](http://beingwellread.blogspot.com/p/books-ive-read.html)，我希望有一个静态的**5 星评级系统**来代替某种形式。也许使用**CSS**，我可以定位每本书，这样我就可以显示**1 到 5 星**供访问者查看。

我不知道如何编辑单个博客文章的**CSS ，以便我可以针对这些特定的阅读书籍，如果这是最好的方法，并且想要创建图像的任何提示，我可以指定****5 星**应该是多少显示（如 5 星 100%、4 星 80%、3 星 60% 等）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T08:35:56.787

此方法**不**使用**JavaScript**、**jQuery**、**CSS**或**CSS3**。

**澄清一下：**它使用纯**ASCII 码**来提供**STAR**要求。

*实星：* ★实星
ASCII 码：`&#9733;`

*轮廓星：* ☆轮廓星
ASCII 码：`&#9734;`

**现场演示如下（*对不起 jsFiddle！*）：**

* * *

**书名：**牙医之旅
**书作者：** Yin Pain & Lord Howard Hurts
**星级评分：** ★☆☆☆☆

* * *

* * *

**书名：**胸痛
**书作者：** I. Coffalot
**星级评价：** ★★☆☆☆

* * *

* * *

**书名：**对付臭鼬
**书作者：** Stan Back
**星级：** ★★★☆☆

* * *

* * *

**书名：**真眼识真假
**书作者：** IC优
**星评价：** ★★★★☆

* * *

* * *

**书名：**墙上的斑点
**书作者：**蒲公英
**星级评分：** ★★★★★

* * *

**上面的 HTML 标记：**

```
Book Title: A Trip To The Dentist<br />
Book Author: Yin Pain & Lord Howard Hurts<br />
Star Rating: &#9733;&#9734;&#9734;&#9734;&#9734;<br />

Book Title: Chest Pain<br />
Book Author: I. Coffalot<br />
Star Rating: &#9733;&#9733;&#9734;&#9734;&#9734;<br />

Book Title: Dealing With Skunks<br />
Book Author: Stan Back<br />
Star Rating: &#9733;&#9733;&#9733;&#9734;&#9734;<br />

Book Title: Real Eyes Realize Real Lies<br />
Book Author: I.C. You<br />
Star Rating: &#9733;&#9733;&#9733;&#9733;&#9734;<br />

Book Title: Spots On The Wall<br />
Book Author: Who Flung Poo<br />
Star Rating: &#9733;&#9733;&#9733;&#9733;&#9733;<br /> 
```

## ★☆☆☆☆ ★★☆☆☆ ★★★☆☆ ★★★★☆ ★★★★★   

***可选：**用于`CSS font properties`更改星星大小、颜色和背景以自定义它！*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T07:24:16.410

`style`您可以使用以下属性更改特定标签的 CSS ：

```
<span class="stars" style="width: 80px"></span> 
```

该类`.stars`可能如下所示：

```
background: url(stars.png) repeat-x; 
```

哪里`stars.png`是 20 像素宽的图像，然后在 x 维度上重复 4 次（80 像素）以获得 4 颗星。5 颗星的宽度为 100 像素，以此类推。

* * *

*上面的总体思路在这个 jsFiddle Demo 中实现，并附有教程注释。*

**参考：**

[**具有可重复星级 CSS 演示的 jsFiddle 演示**](http://jsfiddle.net/e6aHd/)

**截屏：**
![在此处输入图像描述](../Images/1441949670f1a8132f0bbbbd8934ccc1.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T07:38:45.297

使用 jQuery **Star Rating 插件**。**有关仅 CSS**的方法
，请参见第二部分。

 **这是[**jQuery Star Rating Plugin**](http://www.fyneworks.com/jquery/star-rating/#tab-Testing)的屏幕截图。***数据库集成选项卡***有更多插件示例，如果需要，您可以随时在[**此处**](http://www.google.com/search?q=jQuery+star+rating+plugin)搜索更多 jQuery Star 插件。

**截屏：** ![在此处输入图像描述](../Images/c678722491bbe6df9ca827e7be1c0231.png)

**参考：**

[**jQuery Star Rating Plugin 的 jsFiddle 演示**](http://jsfiddle.net/xXACN/)

**jsFiddle jQuery Star Rating Demo 截图：**

![在此处输入图像描述](../Images/301d0e644ea64252fdf20efe8c48f79d.png)

**jQuery Star Rating Plugin**使用的最小 HTML 标记（*非常可配置*）：

```
<span class="bookFiveStar">
  <input name="book002" type="radio" class="star" disabled="disabled"/>
  <input name="book002" type="radio" class="star" disabled="disabled"/>
  <input name="book002" type="radio" class="star" disabled="disabled" checked="checked"/>
  <input name="book002" type="radio" class="star" disabled="disabled"/>
  <input name="book002" type="radio" class="star" disabled="disabled"/>
</span> 
```

* * *

*上面和下面是这个答案的两个非常不同的解决方案。*

* * *

使用没有 jQuery 插件或 JavaScript的**纯 CSS 评级系统。**
jQuery Star Rating Plugin 方法见上半部分。

使用的参考图像来自[**热链接**](http://img366.imageshack.us/img366/6441/stars.jpg)imageshack.us，如下所示。
尺寸是`width:98px;`和`height:143px;`图像类型是`jpg`。

     ![在此处输入图像描述](../Images/3c0cc7217bdea4ac3ce9ec01232f944e.png)

**参考：**

[**用于纯 CSS 星级评级的 jsFiddle 演示**](http://jsfiddle.net/BWrMd/)

**jsFiddle 纯 CSS Demo 截图：**

![在此处输入图像描述](../Images/727736775a014a6f5b34f1191692f46e.png)

**最小的 HTML：**

```
<div class="starsCSS">
  <img class="stars3" title="3 Stars" src="http://img366.imageshack.us/img366/6441/stars.jpg" alt="Star Rating Image" />
</div> 
```

**完整的 CSS：**

```
/* This class name configures and positions the 6 star image block. */
.starsCSS{
  /* The width of the star block uses the entire star.jpg width */
  width: 98px;
  /* The height of the star block is LIMITED to 23px, i.e. 1 star row. */
  height: 23px;
  /* This overflow:hidden will ensure only 1 row is ever seen, when aligned properly.
  /* That said, later below different classname uses margin-top negitive offset to align. */
  overflow: hidden;
  /* The placement of the star block is relative to other elements. Adjust px here. */
  position: relative;
  top: 10px;
  left: 155px;
  /* Simple light blue border is provided for the image./
  /* Your cusom star image may be a .png with transparency so remove this setting. */
  border: 2px solid DodgerBlue;
}

/* This CSS Selector consists of classname .starsCSS that has 'img tag'. */
/* This rule will set original image width and original image height for stars.jpg file. */
.starsCSS img{
  width: 98px;
  height: 143px;
}

/* These 6 classes will position the image so that only the relevant "star row" is seen for .starsCSS */
/* Technically, this first class .stars1 is not needed since nothing changes. */
/* Note stars.jpg is used full width (98px), therefore it's 1 column. */
/* Use margin-left with negative value if your custom image.jpg has 2 or more columns */
/* IF stars.jpg was double in width then "margin-left: -98px;" will hide first column */
.stars1{
  margin-top: 0px;
}
/* Reference Image: 143px height divide by 6 star rows = 23.833333px per row. */
/* Hence, star.jpg image is not perfect and it's rounded to 24px per row instead */
/* Since 1 star row is 24px high, classname .stars2 will offset that to get to next row. */
/* That said, the value needs to be negitive since entire image is shifted up (offset). */
/* The class .starsCSS will now show the second star row! */
.stars2{
  margin-top: -24px; /* Shift up star row 1 */
}
.stars3{
  margin-top: -48px; /* Shift up star rows 1 and 2 */
}
.stars4{
  margin-top: -72px; /* Shift 3 rows of stars out of view (24 x 3 = 72 )  */
}
.stars5{
  margin-top: -96px; /* Shift 4 rows of stars out of view */
}
.stars6{
  margin-top: -120px; /* Shift 5 rows of stars out of view */
} 
```**

# c# - 如何禁用对 EdmMetadata 表的查询？

> ID：11280120
> 
> 赞同：6
> 
> 时间：2012-07-01T06:50:53.460
> 
> 标签：c#, entity-framework, ef-code-first, database-metadata

我在我的新项目中使用 EF Code First。我不会使用自动迁移功能，并且在 db 中没有 [__MigrationHistory] ​​表。但是通过查看 Profiler，我总是可以看到 EF 在任何其他查询之前发出这样的查询：

```
SELECT 
[GroupBy1].[A1] AS [C1]
FROM ( SELECT 
    COUNT(1) AS [A1]
    FROM [dbo].[__MigrationHistory] AS [Extent1]
)  AS [GroupBy1] 
```

我怎样才能禁用此功能？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-02T12:43:32.660

禁用此功能的唯一方法是不使用任何数据库初始化程序。一旦您使用数据库初始化程序（您希望 EF 创建或更改数据库），您将始终对该表进行查询。

要关闭数据库初始化程序，请在应用程序的引导程序中使用：

```
Database.SetInitializer<YourContext>(null); 
```

# asp.net - 超出 asp.net 母版页内容边距的 HTML 表格

> ID：11280121
> 
> 赞同：0
> 
> 时间：2012-07-01T06:51:38.300
> 
> 标签：asp.net, html, css, vb.net, master-pages

我在 asp.net(vb) 母版页中有一个包含 9 列的表。单元格应该包含文本框。但即使没有文本框，它们也超出了内容边距。那么可以做些什么来使它们适合母版页边距，如果仍然不适合，则内容区域应该可以滚动（而不是整个页面！）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T06:54:15.853

在表格上使用 CSS 属性*宽度*和*[溢出](https://developer.mozilla.org/en/CSS/overflow-x)*...假设它是一个 ASP.Net 控制表，而不是纯 HTML，那么它看起来像这样：

```
<style type='text/css'>
    table.mytable {
        width: 100%;
        overflow-x: scroll;
    }
</style>

<asp:Table CssClass="mytable">
    <%-- table stuff  --%>
</asp:Table> 
```

如果它是一个常规的 HTML 表格：

```
<table style="width: 100%; overflow-x: scroll">
    <!-- table stuff -->
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T09:41:57.620

使用 asp.net 面板控件对我有用。它自动在表格的边缘和底部添加了滚动窗格。

# python - 为什么允许我访问不存在的变量？

> ID：11280122
> 
> 赞同：0
> 
> 时间：2012-07-01T06:51:43.880
> 
> 标签：python, class

可能是一个愚蠢的问题，但我更习惯于 Java 之类的，因此不明白为什么我可以这样做：

```
class A:
    def __init__( self ):
        pass

a = A()
a.description = "whyyy"

print a.description 
```

并让它打印出来`whyyy`而不是给我一个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T06:53:45.990

因为 Python 对象是动态的——它们不需要遵循严格的模式。

创建一个类的实例会为您提供一个已经定义了某些内容的对象，但您可以动态地将其他内容添加到该实例中；您不限于原始类定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T06:58:36.973

> 变量通过分配一个值而出现，并且当它们超出范围时它们会自动销毁。

对于对象，您可以在运行时动态添加新字段。请注意，这不会更改类描述。仅当前实例。

```
class A:
    def __init__( self ):
        pass

a = A()
a.description = "whyyy"

print a.description

b = A()

print b.description # Should return an error 
```

# file - Lua 5.2 中的沙盒

> ID：11280124
> 
> 赞同：5
> 
> 时间：2012-07-01T06:52:11.410
> 
> 标签：file, lua, external, sandbox, environment

我正在从 Roberto Ierusalimschy 的“Programing in Lua”中学习，我发现在书中，Sandboxing 的示例使用该函数`setfenv()`来更改给定函数的环境，但是在 lua 5.2 中不再提供该函数。

我试图将文件（配置文件）中的一些值加载到表中的字段中，但是在 lua 5.2 中我不能使用 setfenv （所以我可以在给定环境中加载值）。在阅读了一些关于 lua 5.2 的文章后，我发现每个函数可能有（或没有）一个称为 _ENV 的上值作为环境，所以，我尝试了以下代码：

```
function sandbox(sb_func, sb_env)
    if not sb_func then return nil, "sandbox function not valid" end
    sb_orig_env = _ENV
    _ENV = sb_env -- yes, replaces the global _ENV
    pcall_res, message = pcall( sb_func )
    local modified_env = _ENV -- gets the environment that was used in the pcall( sb_func )
    _ENV = sb_orig_env
    return true, modified_env
end

function readFile(filename)
    code = loadfile(filename)
    res, table = sandbox(code, {})
    if res then
        --[[ Use table (modified_env) ]]--
    else
        print("Code not valid")
end 
```

在“沙盒”函数中替换`_ENV`效果很好（无法访问常规字段），但是，当执行“代码”时，它似乎忽略了我已替换`_ENV`，它仍然可以访问常规字段（打印、加载文件、dofile、 ETC）。

再读一点，我发现lua 5.2为此提供了一个函数，这个函数是`loadin(env, chunk)`，它在给定的环境中运行给定的块，但是，当我尝试将此函数添加到我的代码中时，该函数不存在（不存在于全局`_G`字段中）。

一些帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T08:40:13.853

当您从 inside 分配时`_ENV`，`sandbox`您不会*覆盖*全局环境 - 您正在替换`_ENV`当前运行代码的 upvalue。添加调用`print(_ENV)`可以帮助您更好地了解所涉及的表的身份。

例如：

```
function print_env()
  print(_ENV)
end

function sandbox()
  print(_ENV) -- prints: "table: 0x100100610"
  -- need to keep access to a few globals:
  _ENV = { print = print, print_env = print_env, debug = debug, load = load }
  print(_ENV) -- prints: "table: 0x100105140"
  print_env() -- prints: "table: 0x100105140"
  local code1 = load('print(_ENV)')
  code1()     -- prints: "table: 0x100100610"
  debug.setupvalue(code1, 1, _ENV) -- set our modified env
  code1()     -- prints: "table: 0x100105140"
  local code2 = load('print(_ENV)', nil, nil, _ENV) -- pass 'env' arg
  code2()     -- prints: "table: 0x100105140"
end 
```

该`loadin`功能存在于 Lua 5.2 的一些预发布版本中，但在最终发布之前被删除。相反，Lua 5.2[`load`和`loadfile`函数](http://www.lua.org/manual/5.2/manual.html#pdf-loadfile)接受一个`env`参数。您还可以使用 修改`_ENV`另一个函数的[`debug.setupvalue`](http://www.lua.org/manual/5.2/manual.html#pdf-debug.setupvalue)。

# jquery - 使用 jquery 更改列表项的 id 属性

> ID：11280131
> 
> 赞同：0
> 
> 时间：2012-07-01T06:53:07.457
> 
> 标签：jquery

当我单击下面的列表项 (li) 时，我将它的 id 从 sprite-heart 更改为 sprite-stars。这很好用。

但是，一旦我再次单击 li，它就会像处理 sprite-heart 一样处理该功能，但现在应该绕过该功能，因为列表项是 sprite-stars。

我怎样才能改变这个？

```
<li><a class="navit" id="sprite-heart" title="Love this webcam! Add to my personal webcam page" href="#"><span class="love">Love this webcam</span></a></li>

    $("#sprite-heart").click(function() {

    addfavcam();

    });

    function addfavcam()
    {

   $.ajax({
        url: '/v3/ajax/addfavourite.php',
        type: 'POST',
        data: {id: <?php echo $cam_id; ?>, usr: 'x<?php echo $user_id; ?>'},
        success: function(responseText){

    $('#sprite-heart').attr('id','sprite-stars');
    $('#sprite-heart,#sprite-stars').attr('title','My favourite');

        },
        error: function(responseText){
        }
    });

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T06:56:08.403

您需要取消绑定事件，而不仅仅是更改 id。只需添加

```
 $("#sprite-heart").click(function() { $(this).unbind('click'); ... } 
```

# entity-framework - 实体框架有问题。添加新行

> ID：11280134
> 
> 赞同：0
> 
> 时间：2012-07-01T06:53:44.683
> 
> 标签：entity-framework, sql-server-ce-3.5

实体框架有问题。我一直在向 Iktato 表添加新行，但不起作用。

```
CREATE TABLE [Iktato] (
[TIPACT] nvarchar(3), 
[NRINREG] int NOT NULL identity(1,1), 
[DATAINREG] datetime, 
[NRACT] nvarchar(10), 
[DATAACT] datetime, 
[CODARHIVA] nvarchar(20), 
[NRFILE] int, 
[NRANEXE] int, 
[EMITENT] nvarchar(50), 
[TERMEN] datetime, 
[RESP1] nvarchar(50), 
[RESP2] nvarchar(50), 
[RESP3] nvarchar(50), 
[RESP4] nvarchar(50), 
[DESCRIERE] ntext, 
[PRIORITATE] nvarchar(13), 
[STATUT] nvarchar(20), 
[FILENAME] nvarchar(128),
PRIMARY KEY (NRINREG)
)
GO

CREATE TABLE [rasp] (
[TIPACT] nvarchar(3), 
[NRINREG] int NOT NULL, 
[DATAINREG] datetime, 
[NRACT] nvarchar(10), 
[DATAACT] datetime, 
[CODARHIVA] nvarchar(20), 
[NRFILE] int, 
[NRANEXE] int, 
[EMITENT] nvarchar(50), 
[TERMEN] datetime, 
[RESP1] nvarchar(50), 
[RESP2] nvarchar(50), 
[RESP3] nvarchar(50), 
[RESP4] nvarchar(50), 
[DESCRIERE] ntext, 
[PRIORITATE] nvarchar(13), 
[STATUT] nvarchar(20), 
[FILENAME] nvarchar(128),  
[ROW_ID] int NOT NULL IDENTITY,
PRIMARY KEY (ROW_ID)
)
GO

ALTER TABLE rasp 
ADD CONSTRAINT fk_Iktato 
FOREIGN KEY (NRINREG) 
REFERENCES Iktato (NRINREG) ON DELETE CASCADE 

GO 
```

这是我的程序的序列：

```
private RegistruEntities entities;
private Iktato proba;

proba = new Iktato { NRINREG = 5 };
entities.AttachTo("Iktatoes", proba);
entities.SaveChanges(); 
```

我想插入一个注册号为 5 的行，它将保存在数据库 Iktato 中。保存它不起作用。

请帮忙 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T09:46:56.730

必须使用 插入新实体`AddObject`，而不是`AttachTo`：

```
proba = new Iktato { NRINREG = 5 };
entities.AddObject("Iktatoes", proba);
entities.SaveChanges(); 
```

您还应该有一个`ObjectSet<Iktato>`作为 ObjectContext 的成员，它允许使用更强类型的版本来避免`"Iktatoes"`实体集的字符串：

```
proba = new Iktato { NRINREG = 5 };
entities.Iktatoes.AddObject(proba);
entities.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:45:57.517

尝试这个。这个对我有用

```
public ItemCategory Create(ItemCategory objItemCategory)
    {            
        context.ItemCategory.Add(objItemCategory);
        context.SaveChanges();

        return objItemCategory;
    } 
```

# c++ - 可选的命令行参数

> ID：11280136
> 
> 赞同：0
> 
> 时间：2012-07-01T06:53:58.200
> 
> 标签：c++, command-line-arguments

我的程序接收三个参数：

```
int bufferSize
int priority
int milliTimeOut 
```

有没有办法让这些参数中的一些是可选的（并将这些参数值设置为默认值）？

例如，如果用户想要离开`priority`作为默认优先级，但要插入`bufferSize`and `milliTimeOut`，他在运行我的程序时输入了什么，我如何在我的程序中检查它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T06:59:34.177

您可以实现*options*，就像您在 Linux 上经常看到的那样。

```
$ program.exe -b 100 -p 1 -m 100 
```

其中`-b`代表*bufferSize*后跟它的值。同样，`-p`and`-m`分别代表*priority*和*milliTimeOut*，后跟它们的值。

您编写程序来处理这个问题，也就是说，首先解析*option*，然后解析它的值。然后您可以知道命令行中*缺少*哪些选项。一旦您知道*缺少*的选项，您就可以为其（它们）采用默认值。

例如，

```
$ program.exe -b 100 -m 100 
```

where `-p`is missing，这意味着*优先级* 需要有它的默认值，由你的程序决定。

相似地，

```
$ program.exe -b 100 
```

其中*priority*和*milliTimeOut*是默认的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T07:10:39.643

这完全取决于您如何解析命令行参数。如果您使用[Boost program_options](http://www.boost.org/doc/libs/1_50_0/doc/html/program_options.html)模块，您可以这样做：

```
#include <boost/program_options.hpp>
namespace po = boost::program_options;

int main(int argc, char *argv[])
{
    int bufferSize;
    int priority;
    int milliTimeOut;

    po::options_description desc("Options for my program");
    desc.add_options()
        // Option 'buffer-size' and 'b' are equivalent.
        ("buffer-size,b", po::value<int>(& bufferSize)->default_value(8192),
            "The buffer's size")
        // Option 'priority' and 'p' are equivalent.
        ("priority,p", po::value<int>(& priority)->default_value(4),
            "The priority")
        // Option 'timeout' and 't' are equivalent.
        ("timeout,t", po::value<int>(& milliTimeOut)->default_value(30000),
            "Time out in ms")
        ;

    po::variables_map vm;
    po::store(po::parse_command_line(argc, argv, desc), vm);
    po::notify(vm);

    // Here your variables have the values specified by the user,
    // or the default one.
} 
```

然后你像这样调用你的程序：

```
program --buffer-size=100000 -t 600000
program -b 100000 --priority=10
program -b 5000 -t 50000 -p 15
program 
```

您未指定的参数将获取其默认值。

您应该阅读[包文档](http://www.boost.org/doc/libs/1_50_0/doc/html/program_options.html)，它非常完整和灵活（例如，您只能为某些参数设置默认值）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T07:00:15.320

是的，您可以使参数成为可选参数，如果在命令行中没有输入任何参数，则提供默认值。举例来说，您可以使用`-b`指定缓冲区大小，如果没有输入则假定为 64K：

```
int main(int argc, char **argv) { 

    int bufferSize = 65536; 
```

然后是检查命令行参数是否以 开头的繁琐代码`-b`，如果是，则从该参数的其余部分读取所需的缓冲区大小。

您可能想使用 Boost [program_options](http://www.boost.org/doc/libs/1_50_0/doc/html/program_options.html)来缓解这种情况。

# css - 浮子里面的浮子？

> ID：11280139
> 
> 赞同：0
> 
> 时间：2012-07-01T06:54:10.140
> 
> 标签：css, css-float

我知道这个问题的标题听起来很奇怪，但我不知道还能叫什么。

首先，我有一个网格布局，我希望我`.search-wrapper`的宽度为 50% 并向右浮动。在我的[jsfiddle](http://jsfiddle.net/mQSBR/2/)演示中，整个`.search-wrapper`背景颜色为绿色。这个元素保持原样很重要，因为它应该适合我的网格。

在这里面`.search-wrapper`我有一个搜索框和一个按钮并排浮动。这正是我想要的样子。所以`#search-button`应该向左浮动并且`input`应该向右对齐。

然而，我无法实现的是如何浮动 -`#search-button`和“输入 .search `to the right inside the outer container`-wrapper”。

目前的状态……</p>

![在此处输入图像描述](../Images/747c691fc0039753f4001be1a6ec7043.png)

我希望它是这样的方式...... </p>

![在此处输入图像描述](../Images/4f3a52767bb2baa4d2d1fd461916778f.png)

这是我的问题的演示：http: [//jsfiddle.net/mQSBR/2/](http://jsfiddle.net/mQSBR/2/) 对此有什么想法吗？非常感激您的帮忙。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T07:06:38.750

看到这个，如果这是你想要的效果：http: [//jsfiddle.net/mQSBR/9/](http://jsfiddle.net/mQSBR/9/) [编辑]

```
div.search { width: 180px; float: right; } /* fix to 180px wide, float to right */ 
```

还添加：

```
.search-wrapper {
    min-width: 180px;
} 
```

所以包装器在调整大小时不会超过 .search div。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T09:33:34.260

这是更新的jsfiddle中的解决方案

```
<div class="wrapper search-wrapper">
  <div class="search">
    <form action="/" method="get">
      <fieldset>
         <input type="text" name="s" id="search-box" value="" class="" placeholder="Search this platform …">
            <button type="submit" id="search-button">Search</button>
      </fieldset>
    </form>
 </div> 
```

​</p>

```
.search-wrapper {
width: 50%;
float: right;
background:green;
margin-top:1em; 
```

}

```
#search-box {
border: none;
background-color: transparent;
color: transparent;
height: 20px;
float: right; 
```

}

```
#search-button {
border: none;
background-color: transparent;
color: transparent;
float: right;
background-color:red;
background-position: center -36px;
background-repeat: no-repeat; 
```

}

​</p>

[搜索框/按钮右对齐](http://jsfiddle.net/mQSBR/18/)

另外，我的建议是使用元素的占位符属性而不是溢出标签

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T07:03:16.873

你可以做这样的事情

```
.search {
  float: right;
  width: 80%;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T07:03:34.337

你可以这样做：

```
<fieldset style="margin-left: 20%">
  <div class="input-inside-label"> 
```

[http://jsfiddle.net/userdude/mQSBR/3/](http://jsfiddle.net/userdude/mQSBR/3/)

进行了一些编辑以补偿`overflow-x`滚动条：

```
#search-button {
    ...
    margin-left: -20px;
    ...
}
.input-inside-label {
    ...
    margin-left: 0;
    width: 70%;
    ...
} 
```

[http://jsfiddle.net/userdude/mQSBR/7/](http://jsfiddle.net/userdude/mQSBR/7/)

# java - 使用 Android 一次从 Sqlite 数据库中获取数据

> ID：11280141
> 
> 赞同：-1
> 
> 时间：2012-07-01T06:54:51.313
> 
> 标签：java, android, sqlite

我正在构建一个应用程序，用户可以在其中将一些信息保存到 sqlite 数据库中。我现在想要做的是能够从 sqlite 数据库中获取数据并将每一行存储在自己的字符串中。

注意数据库中只有一列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T08:17:03.297

因此，算法并不难，只需创建`Cursor`并在循环中您将从其中检索数据，然后将它们保存到`List`例如。

所以试试这段代码：

```
final String SELECT_QUERY = "Select column from Table";
List<String> data = new ArrayList<String>();
String member = null;
Cursor c = db.rawQuery(SELECT_QUERY, null);
if (c.getCount() > 0 && c.moveToFirst()) {
   do {
      member = new String(c.getString(0));
      data.add(member);
   }
   while (c.moveToNext());
} 
```

# maven - Maven：无法解析的构建扩展

> ID：11280142
> 
> 赞同：3
> 
> 时间：2012-07-01T06:54:56.507
> 
> 标签：maven, plugins, installation

我一直在看谷歌，并没有真正指出这个问题。当我运行“mvn clean install”时，它返回以下错误。

> [错误] 无法解析的构建扩展：插件 org.sonatype.flexmojos:flexmojos-maven-plugin:3.8 或其依赖项之一无法解析：无法收集 org.sonatype.flexmojos:flexmojos-maven-plugin:jar 的依赖项： 3.8 ()

我正在尝试弄清楚如何导入 maven 插件 flexmojos，但没有关于如何执行此操作的明确指示。

我如何将此插件导入我的项目？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T11:24:17.823

您正在寻找的依赖[确实存在](http://search.maven.org/#search%7Cga%7C1%7Cg:%22org.sonatype.flexmojos%22%20AND%20a:%22flexmojos-maven-plugin%22%20AND%20v:%223.8%22)。为了进一步解决这个问题，我们需要查看您的 POM 和其余的构建输出。

在黑暗中刺伤：

这是你第一次在这台机器上运行这个版本吗？如果是这样，一个非常常见的“陷阱”是阻止访问 Maven Central 的公司防火墙。在这种情况下，解决方案是设置一个像[Nexus](http://www.sonatype.org/nexus/)这样的 Maven 存储库管理器，或者将 Maven 配置为[使用 HTTP 代理](http://maven.apache.org/guides/mini/guide-proxies.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-23T21:44:19.430

我有一个类似的问题。我在 Eclipse 中设置了代理，然后我发现我还在我的 settings.xml 中设置了代理。我从 settings.xml 中删除了代理，一切都解决了。

我希望我的情况会有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-08T15:42:43.863

如果在 Eclipse 环境中显示此问题，这是因为 m2e 连接器尝试将插件下载到您的`~\.m2\`存储库中

要解决这个问题，请打开 Eclipse Settings:`Window->Preferences`并转到`->Maven->User Settings`Section。检查是否`Global Settings`或`User Settings`连接到`settings.xml`您的 Maven 使用的文件。

**通常：** Maven 或您的 m2e 连接器尝试通过您在 settings.xml 中配置的插件存储库下载这些插件，因为存储库未知或无法访问，因为您位于代理后面，所以找不到它们：

```
08.11.18, 15:54:47 MEZ: [WARN] Failed to build parent project for com.xxx.xxx.xxx:eclipse-plugin:1.0.0-SNAPSHOT
08.11.18, 15:54:47 MEZ: [WARN] Failure to transfer org.apache.maven.plugins:maven-site-plugin/maven-metadata.xml from http://repository.sonatype.org/content/groups/sonatype-public-grid was cached in the local repository, resolution will not be reattempted until the update interval of tycho has elapsed or updates are forced. Original error: Could not transfer metadata org.apache.maven.plugins:maven-site-plugin/maven-metadata.xml from/to tycho (http://repository.sonatype.org/content/groups/sonatype-public-grid): repository.sonatype.org 
```

转到您的`settings.xml`文件并添加：

镜像（在此示例中：`central`存储库。相应地对任何其他存储库执行此操作，例如`tycho`）：

```
<mirror>
    <id>central</id>
    <name>Our mirror for central repo</name>
    <url>http://<your host to>/nexus/content/repositories/central/</url>
    <mirrorOf>central</mirrorOf>
</mirror> 
```

存储库：

```
<repository>
    <id>central</id>
    <url>http://<your host to>/nexus/content/groups/public/</url>
    <layout>default</layout>
    <releases> 
         <enabled>true</enabled>
         <updatePolicy>daily</updatePolicy>
         <checksumPolicy>warn</checksumPolicy>
    </releases>
</repository> 
```

这应该可以解决您的问题：

**Eclipse 特定的：**如果错误盛行（例如未知的包装）添加生命周期映射通过`Window->Preferences->Maven->Discovery->Open Catalog`并添加`Tycho Connector` 进一步您可以添加`lifecycle-mapping`在 Eclipse 环境中处理这些生命周期映射的插件：[eclipse m2e 生命周期映射](http://www.eclipse.org/m2e/documentation/m2e-execution-not-covered.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-05T15:42:53.307

我通过在 中添加一个`settings.xml`文件解决了这个问题`~\.m2 directory`，适当的配置指向我们的内部库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-26T01:08:02.623

我通过将 pom.xml 中的另一个配置文件参数添加到我的 mvn 命令来解决这个问题，例如“-Pprofile-name”指向嵌入在该配置文件中的非 Maven 存储库定义，因为 Maven 可能正在寻找独立的存储库定义在 settings.xml 中，但并非总是如此。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-29T21:13:08.863

也许您最终来到这里是因为您运行 nexus 很长时间。我终于在*Repositories*页面中找到了错误*Summary*选项卡。在某些时候*Maven Central*决定要求**https:**并且我的配置中列出的 URL 仍然使用**http:**。

 ******更新 URL 以使用**https:**，*保存*，一切又顺利进行了！******

# r - 将纬度/经度转换为邮政编码/社区名称

> ID：11280145
> 
> 赞同：6
> 
> 时间：2012-07-01T06:55:04.273
> 
> 标签：r, google-maps, gis, geospatial, openstreetmap

我有大量带有 GPS 位置的图片，编码为纬度/经度坐标，主要在洛杉矶。我想将这些转换为 (1) 邮政编码和 (2) 社区名称。是否有任何免费的网络服务或数据库可以这样做？

到目前为止，我能想到的最好的方法是从[LA 时间页面](http://projects.latimes.com/mapping-la/neighborhoods/)上刮取邻域多边形，并尝试找出每个坐标位于哪个多边形中。然而，这可能是一项相当多的工作，而且并不是我所有的坐标都在洛杉矶。至于邮政编码，这个 2004[数据库](http://www.boutell.com/zipcodes/)是我能找到的最好的数据库，但是邮政编码被编码为单个坐标而不是多边形。所以我能做的最好的就是找到从给定坐标到给定邮政编码坐标的最小距离，这不是最优的。

我的印象是 google-maps 或 open-street-maps 应该能够做到这一点（因为他们似乎“知道”每个社区和邮政编码的确切位置），但是我找不到任何 API 来进行查找/查询.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-05T23:35:54.320

[由于非常棒的ggmap](http://cran.r-project.org/web/packages/ggmap/index.html)包，您现在可以直接在 R 本身中执行此操作。

像其他人提到的那样，您将使用 google maps API 进行反向地理编码（因此每天限制为 2,500 个查询），但它很简单：

```
library("ggmap")

# generate a single example address
lonlat_sample <- as.numeric(geocode("the hollyood bowl"))
lonlat_sample  # note the order is longitude, latitiude

res <- revgeocode(lonlat_sample, output="more")
# can then access zip and neighborhood where populated
res$postal_code
res$neighborhood 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T06:58:39.470

使用[反向地理编码](https://developers.google.com/maps/documentation/geocoding/)将您的纬度/经度转换为地址。但是，它对每天的查询数量有一些限制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T07:09:37.047

这是一篇不错的[博客文章](http://allthingsr.blogspot.de/2012/03/geocode-and-reverse-geocode-your-data.html)，其中包含如何使用谷歌地图进行地理编码和反向地理编码的示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T07:07:39.550

试试这个：

[http://www.usnaviguide.com/zip.htm](http://www.usnaviguide.com/zip.htm)

您每天可以在网站上进行多少次查询是有限制的，但他们也出售完整的数据库，该数据库每隔几个月就会更改一次。抱歉，我不知道任何免费资源。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-01T14:46:44.500

正如其他人所建议的那样，将它们地理编码为街道地址应该适用于邮政编码。我不太确定社区，因为您可能需要查看街道编号是否为奇数/偶数，以查看它是否位于确定社区的道路的哪一侧。

另一种方法是准备 GIS 多边形特征（例如 ESRI 形状文件），针对这组多边形测试每个点，看看它与哪个多边形相交。

邮政编码非常简单，您可以从人口普查处下载形状文件。

[http://www.census.gov/cgi-bin/geo/shapefiles2010/main](http://www.census.gov/cgi-bin/geo/shapefiles2010/main)

邻居更难，我猜。在美国的另一个地方，我必须通过结合市政府、房地产网站、报纸等的定义来自己创建我的形状文件，这样它看起来就像人们认为城市中的邻里一样，没有任何重叠或差距。组成这样一组多边形可能需要一些时间。您可以从上面的页面中抓取人口普查“块组”，甚至人口普查“块”并将它们合并

准备好多边形要素后，在不同的环境中有几个 GIS 工具（独立可执行文件、GUI 程序、c/python/sql 等 API，可能还有 R，用于进行多边形和点的交集。

# macos - 拖放：NSView 认为源是一个图像，它不是

> ID：11280148
> 
> 赞同：0
> 
> 时间：2012-07-01T06:55:56.020
> 
> 标签：macos, drag-and-drop, nsimage, nsimageview

我有两种看法。1\. 一个视图有一个带有图像的 NSImageViews 网格。2\. 另一个视图有一个放置拖动图像的潜在位置网格。

我想我拖着工作。如果我从视图 1 中单击并拖动图像，它可以正常工作，但是当我尝试放置它时，源图像的路径是我桌面上的一个图像，它甚至不是我的项目的一部分。下面代码的结果是 CarryData = nil，但我用 NSLog 进行了一些测试，发现它正在发送项目外部的图像的路径，而不是我的桌面。

这是我实现的一些 D&D 协议方法。myDragState 只是我用来突出显示拖动当前悬停的网格空间的枚举。

在初始化...

```
[self registerForDraggedTypes:[NSImage imagePasteboardTypes]];
myDragState = dragStateNone; 
```

然后是协议方法

```
- (NSDragOperation)draggingEntered:(id <NSDraggingInfo>)sender
{

    if ((NSDragOperationGeneric & [sender draggingSourceOperationMask]) == NSDragOperationGeneric)
    {
        myDragState = dragStateOver;
        [self setNeedsDisplay];

        return NSDragOperationGeneric;
    }
    else
    {
        return NSDragOperationNone;
    }
}

- (void)draggingExited:(id <NSDraggingInfo>)sender
{
    //turn off focus ring
    myDragState = dragStateExited;
    [self setNeedsDisplay];

}

- (void)draggingEnded:(id <NSDraggingInfo>)sender { }

- (BOOL)prepareForDragOperation:(id <NSDraggingInfo>)sender
{
    return YES;
}

- (BOOL)performDragOperation:(id <NSDraggingInfo>)sender
{
    NSPasteboard *paste = [sender draggingPasteboard];
    //gets the dragging-specific pasteboard from the sender
    NSArray *types = [NSArray arrayWithObjects:NSTIFFPboardType, nil];
    //a list of types that we can accept
    NSString *desiredType = [paste availableTypeFromArray:types];
    NSData *carriedData = [paste dataForType:desiredType];

    if (nil == carriedData)
    {
        //the operation failed for some reason
        NSRunAlertPanel(@"Paste Error", @"Sorry, but the past operation failed", nil, nil, nil);

        myDragState = dragStateNone;
        [self setNeedsDisplay];

        return NO;
    }
    else
    {
        //the pasteboard was able to give us some meaningful data
        if ([desiredType isEqualToString:NSTIFFPboardType])
        {
            NSLog(@"TIFF");
            //we have TIFF bitmap data in the NSData object
            NSImage *newImage = [[NSImage alloc] initWithData:carriedData];
            [self setImage:newImage];

            myDragState = dragStateSet;
        }
        else
        {
            //this can't happen
            //NSAssert(NO, @"This can't happen");
            NSLog(@"Other type");
            myDragState = dragStateNone;
            [self setNeedsDisplay];
            return NO;
        }
    }
    //redraw us with the new image
    return YES;
}

- (void)concludeDragOperation:(id <NSDraggingInfo>)sender
{
    //re-draw the view with our new data
    [self setNeedsDisplay:YES];
}

- (void)drawRect:(NSRect)dirtyRect
{
    // Drawing code here.
    NSRect ourBounds = [self bounds];

    if (myDragState == dragStateSet)
    {
        NSImage *image = [self image];
        [super drawRect:dirtyRect];
        [image compositeToPoint:(ourBounds.origin) operation:NSCompositeSourceOver];
    }
    else if (myDragState == dragStateOver)
    {
        [[NSColor colorWithDeviceRed:1.0f green:1.0f blue:1.0f alpha:0.4f] set];
        [NSBezierPath fillRect:ourBounds];
    }
    else {
        //draw nothing
    }

} 
```

编辑：所以我想通了。问题实际上出在源头上。我没有正确地将它复制到 PBoard。我的代码是：

```
NSPasteboard *zPasteBoard = [NSPasteboard pasteboardWithName:NSDragPboard]; 
[zPasteBoard declareTypes:[NSArray arrayWithObject:NSTIFFPboardType] owner:self]; 
[zPasteBoard setData:[tileImageView.image TIFFRepresentation] forType:NSTIFFPboardType]; 
```

现在，当图像显示时，我得到了一些奇怪的效果。当图像被放置在目标图像视图中时，它们正在调整大小，但更大的可拖动版本也仍然出现。所以，我在图像视图上得到了两个图像。

# json - 如何将按钮或图像添加到道场网格

> ID：11280149
> 
> 赞同：1
> 
> 时间：2012-07-01T06:55:57.217
> 
> 标签：json, zend-framework, dojox.grid.datagrid, dojo

我有一个带有 json 数据存储的 dojo 网格（mysql 结果集转换为 json 格式）。目前我的网格显示 5 列，如下图所示： ![在此处输入图像描述](../Images/59b1af8f1bbe6b75f61377ec4074e6ed.png)

我有名为“操作”的列。此“操作”列下的行应包含带有超链接的按钮或图像（编辑图标、删除图标），例如用于编辑的 edit.php?id=1 或用于删除的 delete.php?id=1。这是我的道场网格代码：

```
<span dojoType="dojo.data.ItemFileReadStore" data-dojo-id="studentsStore" url="http://localhost/newsmis/public/studentManagement/student/fetchdata/data/1"></span>
<table dojoType="dojox.grid.DataGrid" id="studentsGrid" data-dojo-id="studentsGrid" columnReordering="true" sortFields="['idstudents','first_name','middle_name','last_name']" store="studentsStore"  clientSort="true" selectionMode="single" rowHeight="25" noDataMessage="<span class='dojoxGridNoData'>No students found</span>">
    <thead>
        <tr>
            <th field="idstudents" width="20%">Student ID</th>
            <th field="first_name" width="20%">First Name</th>
            <th field="middle_name" width="20%">Middle Name</th>
            <th field="last_name" width="20%">Last Name</th>
            <th field="action" width="20%">Action</th>
        </tr>
    </thead>
</table> 
```

我的 json 数据格式是

```
 {"identifier":"idstudents","items":[{"idstudents":"11","first_name":"Pradip","middle_name":"Maan","last_name":"Chitrakar"}]} 
```

我该怎么做？请给我一些想法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T15:56:21.013

我知道的一种方法是，在网格结构中为该列定义格式化方法。因此，不要以声明方式定义网格的结构，而是在 JavaScript 对象中定义，如下所示

```
var structure = [
{
    name: "First Name",
    field: "first_name"
},
{
    name: "Action",
    field: "_item",
    formatter: function(item){
        var btn = new dijit.form.Button({
            label: "Edit"
        });
    return btn;
    }
} 
```

]

并将此结构设置为网格

```
<table dojoType="dojox.grid.DataGrid" id="studentsGrid" data-dojo-id="studentsGrid" columnReordering="true" sortFields="['idstudents','first_name','middle_name','last_name']" store="studentsStore"  clientSort="true" selectionMode="single" rowHeight="25" noDataMessage="<span class='dojoxGridNoData'>No students found</span>" structure=structure > 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T06:50:43.813

这是工作示例，

[道场网格中的图像](http://www.sitepen.com/labs/code/grid/dojo_grid_2/grid_objects.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-21T21:46:05.933

作为 dojox.grid.DataGrid 的文档保留：

> 从 Dojo 1.7 开始，您应该使用 dgrid 或 gridx，它们是充分利用现代浏览器和对象存储的下一代网格组件。

一段代码示例：

```
columns: [
            {
                field: "id",
                label: "ID"
            },
            {
                field: "name",
                label: "Name"
            },
            {
                field: "options",
                label: "Options",
                renderCell: function (obj) {
                    var cellContent = domConstruct.create("div",{});
                    var btn = new Button({
                        label: "Cell " + obj.id,
                        name: "idBtn"
                    })
                    btn.placeAt(cellContent);

                    on(btn, "click", function (evt) {
                        console.log(obj);
                    });

                    return cellContent;
                }
            }
        ] 
```

这是[JSfiddle 示例](http://jsfiddle.net/atoha/grt6gury/)如何通过在 dgrid 的列属性中使用函数 renderCell 在 dgrid 中执行此操作。

> renderCell(object, value, node, options) - 一个可选函数，将被调用以将值呈现到目标单元格中​​。object 指的是网格存储中的记录，value 指的是当前单元格的特定值（可能已被列定义的 get 函数修改）。node 指的是renderCell没有返回任何内容时将放置在网格中的表格单元格；如果 renderCell 返回一个节点，则返回的节点将被放置在网格中。（注意：如果指定了格式化程序，则忽略 renderCell。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-15T15:25:48.277

如果您不想要一个按钮，而只想要一个图像图标，您可以从格式化程序函数返回一个跨度元素，如下所示：

```
formatter: function(value) {
    var myValueClass = "dijitNoValue";
    ...
    myValueClass = "ValueClass1";
    ...
    return "<span class='dijitReset dijitInline dijitIcon " + myValueClass + "'></span>";
} 
```

必须定义一个 css 类

```
.ValueClass1 {
    background-image: url('val_image1.png');
    background-repeat: no-repeat;
    width: 18px;
    height: 18px;
    text-align: center;
    background-position: 1px;
} 
```

# sql - 从加入（1 到多个）postgresql 接收 1 行

> ID：11280151
> 
> 赞同：1
> 
> 时间：2012-07-01T06:56:10.937
> 
> 标签：sql, postgresql, one-to-many, postgresql-9.1

我有这个问题：

*   我有 2 个主要的桌子（公寓，租户），它们有 1 对多（1 间公寓，许多租户）的连接。
*   我正试图搬走我所有的公寓，但和他的一位房客一起。
*   首选租户是 ot=2 的租户（有 2 个可能的值：1 或 2）。

我尝试使用子查询，但在 postgresql 中它不允许您返回超过 1 列。
我不知道如何解决它。这是我的最新代码：

```
SELECT a.apartment_id, a.apartment_num, a.floor, at.app_type_desc_he, tn.otype_desc_he, tn.e_name
FROM 
  public.apartments a INNER JOIN public.apartment_types at ON
  at.app_type_id = a.apartment_type INNER JOIN 
    (select t.apartment_id, t.building_id, ot.otype_id, ot.otype_desc_he, e.e_name
     from   public.tenants t INNER JOIN public.ownership_types ot ON
        ot.otype_id = t.ownership_type INNER JOIN entities e ON
        t.entity_id = e.entity_id
     ) tn ON
  a.apartment_id = tn.apartment_id AND tn.building_id = a.building_id
WHERE 
  a.building_id = 4 AND tn.building_id=4
ORDER BY
  a.apartment_num ASC, 
  tn.otype_id DESC 
```

提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T13:43:28.037

```
 SELECT a.apartment_id, a.apartment_num, a.floor
      ,at.app_type_desc_he, tn.otype_desc_he, tn.e_name
FROM   public.apartments a
JOIN   public.apartment_types at ON at.app_type_id = a.apartment_type
LEFT JOIN  (
    SELECT t.apartment_id, t.building_id, ot.otype_id
          ,ot.otype_desc_he, e.e_name
    FROM   public.tenants t
    JOIN   public.ownership_types ot ON ot.otype_id = t.ownership_type
    JOIN   entities e ON t.entity_id = e.entity_id
    **ORDER  BY (ot.otype_id = 2) DESC**
    **LIMIT  1**
    ) tn ON (tn.apartment_id, tn.building_id)=(a.apartment_id, a.building_id) 
WHERE  a.building_id = 4
AND    tn.building_id = 4
ORDER  BY a.apartment_num;  -- , tn.otype_id DESC -- pointless 
```

Crucial part emphasized.

This works in either case.

*   If there are tenants for an apartment, exactly 1 will be returned.
*   If there is one (or more) tenant of `ot.otype_id = 2`, it will be one of that type.
*   If there are no tenants, the apartment is still returned.

If, for `ot.otype_id` ...

> there are 2 possible values: 1 or 2

... you can simplify to:

```
ORDER  BY ot.otype_id DESC 
```

* * *

### Debug query

Try removing the `WHERE` clauses from the base query and change

```
JOIN   public.apartment_types 
```

to

```
LEFT JOIN   public.apartment_types 
```

and add them back one by one to see which condition excludes all rows.

Do `at.app_type_id` and `a.apartment_type` really match?

# python - 如何在没有 ++ 运算符的情况下更紧凑地编写此语句？

> ID：11280152
> 
> 赞同：1
> 
> 时间：2012-07-01T06:56:13.113
> 
> 标签：python

这是我想写的：

```
groups[m][n] = groups[m - 1][n] or ++gid 
```

这是我必须写的：

```
g = groups[m - 1][n]
if g:
    groups[m,n] = g
else:
    gid += 1
    groups[m][n] = gid 
```

仅仅因为它缺少运算符，就没有更紧凑的方式在 Python 中编写它`++`吗？

* * *

我正在研究的方法中的更大样本：

```
groups = [[0] * self.columns] * self.rows
gid = 0
for m in xrange(self.rows):
    for n in xrange(self.columns):
        stone = self[m, n]
        if stone == self[m - 1, n]:
            if groups[m - 1][n]:
                groups[m][n] = groups[m - 1][n]
            else:
                gid += 1
                groups[m][n] = gid
        elif stone == self[m, n - 1]:
            if groups[m][n - 1]:
                groups[m][n] = groups[m][n - 1]
            else:
                gid += 1
                groups[m][n] = gid 
```

我认为当我不得不像那样把它吹出来时，阅读起来要困难得多，而且我正在评估`m-1`两次......不过我不确定我该如何浓缩它。

* * *

这就是我想出的：

我创建了一个包装类`int`：

```
class Int(object):
    def __init__(self, i):
        self.i = i

    def pre(self, a=1):
        self.i += a
        return Int(self.i)

    def post(self, a=1):
        cpy = Int(self.i)
        self.i += a
        return cpy

    def __repr__(self):
        return str(self.i)

    def __nonzero__(self):
        return self.i != 0 
```

可以这样使用：

```
def group_stones(self):
    groups = [[None for _ in xrange(self.cols)] for _ in xrange(self.rows)]
    gid = Int(0)
    for m in xrange(self.rows):
        for n in xrange(self.cols):
            stone = self[m, n]
            if stone == self[m - 1, n]:
                groups[m][n] = groups[m - 1][n] or gid.pre()
            elif stone == self[m, n - 1]:
                groups[m][n] = groups[m][n - 1] or gid.pre()
            else:
                groups[m][n] = gid.pre() 
```

就像我在其他语言中所做的一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T07:02:46.450

技术上更紧凑，但不是更易读，也不是更干燥：

```
groups[m][n], gid = (groups[m-1][n], gid) if groups[m-1][n] else (gid+1, gid+1) 
```

不那么紧凑（至少对于单一用途），更具可读性：

```
def test_or_inc(val, accum):
    return (val, accum) if val else (accum+1, accum+1)

groups[m][n], gid = test_or_inc(groups[m-1][n], gid) 
```

* * *

另一种选择是制作*可以*`gid`通过引用传递的东西......例如对象的属性或列表中的项目。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T07:14:53.033

```
gid = [0] # list - mutable object

def incremented(gid):
    gid[0] += 1
    return gid[0]

groups[m][n] = groups[m - 1][n] or incremented(gid) 
```

您可以为您的 Int 类添加一些“魔法”：

```
class C(object):
    ...
    def __add__(self, other):
        self.i += other
        return self.__class__(self.i)
    def __radd__(self, other):
        cpy = self.__class__(self.i)
        self.i += other
        return cpy

>>> print Int(2) + 1 # pre
3
>>> i = Int(2)
>>> print 1 + i # post
2
>>> print i
3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T07:19:30.647

如果你把 gid 生成放在一个函数中，你可以做到这一点。例如（使用全局范围）：

```
gid = 0
def newgid(): global gid; gid += 1; return gid 
```

现在你可以写：

```
groups[m][n] = groups[m - 1][n] or newgid() 
```

当然，最好将 gid 和 newgid 放在它自己的类中，或者放在其他方法所在的类中。*

# excel - 是否可以在 microsoft excel 中使用 http 数据源

> ID：11280158
> 
> 赞同：0
> 
> 时间：2012-07-01T06:57:26.757
> 
> 标签：excel, vba, datasource

> **可能重复：**
> [是否可以使用 C# 在 excel 工作簿中编写功能](https://stackoverflow.com/questions/11276526/is-it-possible-to-use-c-sharp-to-write-functionality-within-an-excel-workbook)

我有一个需要从 HTTP 服务器查询数据的 excel 工作簿。不能直接从远程数据库查询。

据我所知，我可以使用数据源选项将数据与远程数据库同步。是否可以对 HTTP 数据源做类似的事情？例如，可以通过工作簿范围内每个单元格的静态 URL 来表示数据在哪里以及数据是否发生了变化。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T15:48:55.977

我不太明白您想要什么，但您可以转到“数据”、“外部数据源”，然后选择“来自网络”（如果这是您要查找的内容）（标题是近似的，我使用的是 Excel 2007 的法语版本）。

# ios - GCDAsyncSocket 点对点连接

> ID：11280160
> 
> 赞同：1
> 
> 时间：2012-07-01T06:57:43.613
> 
> 标签：ios, macos, wifi, asyncsocket

我正在尝试使用 GCDAsyncSocket 在我的 Mac 和 iPhone 之间建立点对点连接。目前两个设备都在同一个wifi下连接。但是使用方法：

```
[asyncSocket connectToHost:@"my iPhone's IP address" onPort:80 error:&err] 
```

不起作用。是不是因为我的错误操作？您能否解释一下在我的情况下如何建立点对点连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:10:02.207

我找到了一种方法来做到这一点。如果您使用的是 GCDAsyncSocket，则有一个名为 BonjourServer 和 BonjourClient 的演示。在其代码中，有一个委托方法：

```
- (void)socket:(GCDAsyncSocket *)sock didAcceptNewSocket:(GCDAsyncSocket *)newSocket
{   

DDLogInfo(@"Accepted new socket from %@:%hu", [newSocket connectedHost], [newSocket connectedPort]);

// The newSocket automatically inherits its delegate & delegateQueue from its parent.

[connectedSockets addObject:newSocket];

connectedSocket = newSocket;
} 
```

当您在服务器和客户端之间建立点对点连接时，您可以按照上面指定的方法发送数据。

# google-docs-api - 文档列表 api 创建失败

> ID：11280168
> 
> 赞同：0
> 
> 时间：2012-07-01T06:59:54.180
> 
> 标签：google-docs-api, google-drive-api

下面的请求失败了，我不知道为什么，有什么见解吗？

```
var atom = ["<?xml version='1.0' encoding='UTF-8'?>",
            '<entry xmlns="http://www.w3.org/2005/Atom" xmlns:docs="http://schemas.google.com/docs/2007">',
            '<category scheme="http://schemas.google.com/g/2005#kind"',
            ' term="http://schemas.google.com/docs/2007#document"/>',
            '<title>', titleDoc, '</title>',
            '</entry>'].join('');

xhr.open('POST', URI , true);
xhr.setRequestHeader('Content-type', 'application/atom+xml');
//xhr.setRequestHeader('GData-Version', '3.0');                                                                                     
xhr.setRequestHeader('X-Upload-Content-Length', '0');
xhr.setRequestHeader('Authorization', 'OAuth ' + google.getAccessToken());
xhr.send(atom); 
```

这是来自服务器的请求/响应数据包

```
Request URL:https://docs.google.com/feeds/upload/create-session/default/private/full
Request Method:POST
Status Code:400 Bad Request
Request Payload
<?xml version='1.0' encoding='UTF-8'?><entry xmlns="http://www.w3.org/2005/Atom" xmlns:docs="http://schemas.google.com/docs/2007"><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/docs/2007#document"/><title>test</title></entry>
Response Headersview source
cache-control:no-cache, no-store, must-revalidate
content-length:19
content-type:text/html; charset=UTF-8
date:Sun, 01 Jul 2012 06:46:21 GMT
expires:Fri, 01 Jan 1990 00:00:00 GMT
pragma:no-cache
server:HTTP Upload Server Built on Jun 14 2012 02:12:09 (1339665129)
status:400 Bad Request
version:HTTP/1.1 
```

未注释 gdata 版本的休息，但这仍然没有在谷歌文档中创建文档

```
HTTP/1.1 200 OK
status: 200 OK
version: HTTP/1.1
cache-control: no-cache, no-store, must-revalidate
content-length: 0
content-type: text/html; charset=UTF-8
date: Sun, 01 Jul 2012 21:02:16 GMT
expires: Fri, 01 Jan 1990 00:00:00 GMT
location: https://docs.google.com/feeds/upload/create-session/default/private/full?convert=false&upload_id=AEnB2UoaVeHUGhiIgKm9fL-WL_Fd1DdAAh7rdYDx6G6cseLwHgAMBfkdt42kf9YiKFJ8q9tiZ8vLVUb3Sr-KVUZi01m3vY6ZUw
pragma: no-cache
server: HTTP Upload Server Built on Jun 14 2012 02:12:09 (1339665129) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:42:14.167

您可以使用简单上传来创建一个空文件，只需将您的 url 替换`https://docs.google.com/feeds/default/private/full`为 GData-Version 标头并取消注释即可。

另一种选择（推荐）是使用新的 Google Drive API 的[files.insert](https://developers.google.com/drive/v2/reference/files/insert)方法。

# json - Twitter JSON to Google Spreadsheet API - 1\. 导入和读取 JSON 文件

> ID：11280169
> 
> 赞同：3
> 
> 时间：2012-07-01T06:59:56.100
> 
> 标签：json, twitter, google-apps-script, google-sheets, trello

我正在尝试将 Google 电子表格链接到 twitter——让他们互相交谈——我正在尝试使用 JSON。（Trello 和 Google 日历是 JSON 的另一个想法）

根据我收集到的信息，您应该使用 Utilities.JSONParse() 来处理这些数据。我不确定括号中创建 JSON 对象的内容。当我的基本代码运行时，我不断收到无效的 JSON 字符串；

```
function myFunction() {
 var j = UrlFetchApp.fetch("https://api.trello.com/1/organizations/fogcreek?key=727f13bf79cfa362db49b79eb8c56c94");
  Utilities.jsonParse(j);
} 
```

所以...关于如何在谷歌电子表格中读取 JSON 对象的示例/帮助会很棒！谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T00:23:24.327

这是一个非常聪明的人创建的 Google Docs 电子表格，它使用 Google Apps 脚本从 Trello 导入：

[http://www.littlebluemonkey.com/blog/online-scrum-tools-part-4-trello-backup/](http://www.littlebluemonkey.com/blog/online-scrum-tools-part-4-trello-backup/)

它获取 JSON 数据并对其进行翻译，因此查看他的代码可能会帮助您导入 twitter json。

还有另一个聪明人解释了他是如何用 Trello 做类似事情的：

[http://www.kevinpelgrims.com/blog/2012/03/05/project-progress-tracking-with-google-docs-and-trello/](http://www.kevinpelgrims.com/blog/2012/03/05/project-progress-tracking-with-google-docs-and-trello/)

# ruby-on-rails - 如何从 Rails 应用程序中的不同视图访问模型数据

> ID：11280171
> 
> 赞同：3
> 
> 时间：2012-07-01T07:00:02.340
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我是 RoR 的新手，我对这个话题有点困惑。控制器中变量的范围是否只能在其相应的视图中访问？

例如说我生成了一个**Post**脚手架（带有 blog_text 和 title）。我还使用*主页*视图/控制器资源生成了一个名为**static的控制器。**有什么方法可以从我*的主页*视图中访问/打印所有帖子？我需要在我的 static#home 函数中做些什么吗？我不能只做 Post.all 正确吗？

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T07:10:42.870

控制器与它们对应的视图相关联。`@variable`但是，如果您希望能够在视图中使用该变量，则需要使用实例变量（例如前面带有“@”的变量）。此外，当您从数据库请求数据时，您所处的模型/视图/控制器并不重要。所以在回答你的问题时，是的，你可以做类似的事情

```
@posts = Post.all 
```

在任何控制器中，然后访问您视图中的帖子。这是非常基本的东西，你应该多学习一下[指南](http://guides.rubyonrails.org/)。**

# json - Node.js - 何时将 HTML 转义到 JSON 数据、服务器或客户端？

> ID：11280174
> 
> 赞同：4
> 
> 时间：2012-07-01T07:00:18.930
> 
> 标签：json, client-side, server-side, underscore.js, html-escape

我正在使用 Node.js 和 Underscore.js。我无法确定是在服务器端还是客户端转义 JSON 数据。For underscore 不会使用语法自动转义插值，`<%= someValue %>`而是使用 with `<%- someValue %>`，这与 EJS 形成对比，可能会导致混淆。GitHub上有一个[问题，还有一个自动转义版本的](https://github.com/documentcloud/underscore/issues/129)[提交](https://github.com/dvv/underscore/commit/a4f4d30440f52c7cef26e8574e8eae384a66db9f)。但该问题下方的评论说：

> 我的一般理念是转义应该更接近您的数据而不是模板语言

那么，有什么建议何时将 HTML 转义为 AJAX 数据更好？这是我一直在使用的服务器端助手功能：

```
var htmlEscape = function(html){
    return String(html)
    .replace(/&(?!\w+;)/g, '&amp;')
    .replace(/</g, '&lt;')
    .replace(/>/g, '&gt;')
    .replace(/"/g, '&quot;');
};
var xss = function(obj) {
    if (obj instanceof Array) {
        for (var i = 0; i < obj.length; i++) {
            obj[i] = xss(obj[i]);
        }
    } else {
        for(var key in obj) {
            // key != '_id' for mongoose doc
            if(obj[key] instanceof Object && !(obj[key] instanceof String) 
                && !(obj[key] instanceof Function) && key != '_id') {
                obj[key] = xss(obj[key]);
            } else if (obj[key] instanceof String || typeof(obj[key]) == "string") {
                obj[key] = htmlEscape(obj[key]);
            } else {
                obj[key] = obj[key];
            }
        }
    }
    return obj;
}; 
```

然后在返回 JSON 时调用它：

```
res.json(xss(someData)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:57:39.290

在服务器上执行清理/转义操作总是更好，因为任何人都可以弄乱您的客户端代码并以他们想要的任何方式发送数据。

有一个很棒的 node.js 模块[node-validator](https://github.com/chriso/node-validator)，它有一个 xss() 函数以及一堆其他函数来验证/清理你的数据。

# python - 查找自省方法的函数参数规范

> ID：11280175
> 
> 赞同：1
> 
> 时间：2012-07-01T07:00:29.870
> 
> 标签：python, introspection, pygobject

我正在通过 GObject 内省使用 PyGI - Python 2.7 和 GTK+ 3 开发应用程序。

如何找到使用自省调用的函数的参数和函数的参数类型？

具体来说，`Gio.File.replace_contents_async()`。[我发现 C 定义与 PyGI ( gio C docs](http://developer.gnome.org/gio/stable/GFile.html#g-file-replace-contents-async) )中的定义不匹配。我尝试过使用交互式 shell 并使用 help(Gio.File.replace_conents_async) 和 inspect.getargspec(...)，但他们只是声明它需要 vargs。现在，我一直在放置虚拟参数，以查看打印了哪些警告或异常，以查看它需要哪些参数。

Gtk 文档并不完整，但我发现足以解决一些与之相关的问题。我使用 Ubuntu 的“快速”工具启动了这个应用程序，没想到使用 PyGI 进行开发会如此困难......缺乏文档，没有可查看的资源......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-19T07:58:40.543

较新版本的 PyGI (>= 3.10) 具有包含参数名称和类型的文档字符串：

```
>>> from gi.repository import Gio
>>> Gio.File.replace_contents_async.__doc__
'replace_contents_async(self, contents:list, etag:str=None, make_backup:bool,
flags:Gio.FileCreateFlags, cancellable:Gio.Cancellable=None,
callback:Gio.AsyncReadyCallback=None, user_data=None)' 
```

使用 help(Gio.File.replace_conents_async) 似乎没有显示这一点。

这里还有一些非常好的 Python 特定文档，用于存储库：http: [//lazka.github.io/pgi-docs/#Gio-2.0/interfaces/File.html#Gio.File.replace_contents_async](http://lazka.github.io/pgi-docs/#Gio-2.0/interfaces/File.html#Gio.File.replace_contents_async)

# sql - 缺少索引系统名

> ID：11280186
> 
> 赞同：4
> 
> 时间：2012-07-01T07:03:56.090
> 
> 标签：sql, sql-server, tsql

当我使用 SQL Server Management Studio 显示查询的估计执行计划时，它有时会提示缺少索引。

我的问题是关于以下建议中的 sysname - sysname 是什么意思？

我通常会用 CREATE NONCLUSTERED INDEX [IX_Users_Surname] 替换第一行，所以我不理解 sysname 参考。

```
CREATE NONCLUSTERED INDEX [<Name of Missing Index, sysname,>]
ON [dbo].[Users] ([Surname])
INCLUDE ([UserID],[Firstname],[Email],[Password]) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T07:13:06.413

该`<name, type>`语法适用于 SSMS 模板替换对话框，请参阅[替换模板参数](http://msdn.microsoft.com/en-us/library/hh230912)：

> 要使用此对话框，脚本中的参数必须用尖括号 (< >) 括起来，格式为`<parameter_name, data_type, default_value>`。

因此`sysname`是索引名称模板参数的*类型*，而sysname 是合适的类型。

# java - 在不知道构造函数参数的情况下从 java 反射创建对象

> ID：11280191
> 
> 赞同：1
> 
> 时间：2012-07-01T07:05:36.003
> 
> 标签：java, reflection

我正在尝试使用反射创建对象集合。我有班级名称。但是在编译时不知道构造函数。我使用了本教程。

```
import java.lang.reflect.*;

  public class constructor2 {
      public constructor2()
      {
      }

  public constructor2(int a, int b)
  {
     System.out.println(
       "a = " + a + " b = " + b);
  }

  public static void main(String args[])
  {
     try {
       Class cls = Class.forName("constructor2");
       Class partypes[] = new Class[2];
        partypes[0] = Integer.TYPE;
        partypes[1] = Integer.TYPE;
        Constructor ct 
          = cls.getConstructor(partypes);
        Object arglist[] = new Object[2];
        arglist[0] = new Integer(37);
        arglist[1] = new Integer(47);
        Object retobj = ct.newInstance(arglist);
     }
     catch (Throwable e) {
        System.err.println(e);
     }
  } 
```

}

现在假设我不知道构造函数的参数。（无论是默认构造函数还是两个整数）。构造函数参数可以从一个类到另一个类。我不知道 Constructor2 类。但我有类名。所以我不能像上面那样创建“argList”。知道如何从构造函数创建对象。

我做了如下

```
Constructor[] brickConstructorsArray = brickClass.getConstructors();
            for (Constructor constructor : brickConstructorsArray) {
                Class[] constructorParams = constructor.getParameterTypes();

                Object argList[] = new Object[constructorParams.length];
                int index = 0;
                for (Class cls : constructorParams) {

                    if (cls.equals(Sprite.class)) {
                        Object spriteOb = foundSprite;
                        argList[index] = spriteOb;
                    } else if (cls.equals(double.class)) {
                        Object dblObj = new Double(0.0);
                        argList[index] = dblObj;
                    }

                    index++;
                }
                brickObject = (Brick) constructor.newInstance(argList);

            } 
```

这适用于具有 Sprite 或双参数的成本管理器。要包括其他可能性，我必须创建一个 loooong if else 链。需要帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T07:10:35.210

你真的不在乎你要传递什么价值观吗？您可以将每个原始类映射到其包装器类型的默认值：

```
// You can make this a static member somewhere
Map<Class<?>, Object> primitiveValues = new HashMap<Class<?>, Object>();
primitiveValues.put(char.class, '\0');
// etc 
```

...并且仅`null`用于任何非原始类型。所以：

```
Constructor[] brickConstructorsArray = brickClass.getConstructors();
for (Constructor constructor : brickConstructorsArray) {
    Class[] constructorParams = constructor.getParameterTypes();

    Object argList[] = new Object[constructorParams.length];

    // When you need the index, there's no point in using the enhanced
    // for loop.
    for (int i = 0; i < constructorParams.length; i++) {
        // Fetching the value for any non-primitive type will 
        // give null, which is what we were going to use anyway.
        argList[i] = primitiveValues.get(constructorParams[i]);
    }

    brickObject = (Brick) constructor.newInstance(argList);
} 
```

当然，我希望这会经常失败。毕竟，如果你对所调用的构造函数一无所知，你就不知道哪些参数是有效的。

这*真的*是您期望发现有用的东西吗？

# python - NameError：名称“书”未定义

> ID：11280194
> 
> 赞同：1
> 
> 时间：2012-07-01T07:05:47.907
> 
> 标签：python, string

这是我的一段代码：

```
#!/usr/bin/python 

from xml.etree.ElementTree import ElementTree
from array import *
#import re

count = array('i',[0,0,0])

def find_root_tags(file,str1,i):

    tree = ElementTree()
    tree.parse(file)
    root = tree.getroot()
    if root == str1:
        count[i] = count[i]+1

    for j in tree.getiterator(str1):
        count[i] = count[i] + 1

    print "%dth file's count %d" % (i,count[i])

str1 = input("enter the word to be searched:")
fo = open("xml.txt","r")

for i in range(count.__len__()):

    file = fo.readline()
    find_root_tags(file,str1,i)

fo.close() 
```

它在运行我的代码时给了我这个错误：

```
enter the word to be searched:book

Traceback (most recent call last):

File "keywords.py", line 23, in <module>

str1 = input("enter the word to be searched\n")

File "<string>", line 1, in <module>

NameError: name 'book' is not defined 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T07:07:56.567

`input()`就像`eval(raw_input())`Python 2 一样：

```
input(...)
    input([prompt]) -> value

    Equivalent to eval(raw_input(prompt)). 
```

您可能正在寻找`raw_input()`

# emacs - emacs 查询替换正则表达式倒置

> ID：11280195
> 
> 赞同：3
> 
> 时间：2012-07-01T07:06:02.130
> 
> 标签：emacs, elisp

是否有一个现有的包以子表达式为目标进行替换 `query-replace-regexp`？

例如给出以下

```
var foo1 = blah( properties, property_id);

var foo2 = blah(properties, property_id );

var foo3 = blah(  properties, property_id      ); 
```

我想移除大括号周围的填充物。

通常，方法是将要保留的位子分组并组装替换。

搜索：

```
\(var .* = blah\s-*(\)\s-*\(.*?\)\s-*\()\) 
```

代替：

```
\1\2\3 
```

但是，使用正则表达式对我要删除的位进行分组似乎比其他方式更容易。像这个：

```
var .* = blah\s-*(\(\s-*\).*?\(\s-*\)) 
```

我会从中得到两个子组。如何定位它们进行替换？

编辑：我要求一种交互式方式来“反转”给定的正则表达式。所以界面类似于`query-replace-regexp`

1.  输入正则表达式
2.  输入第 1 组的替换
3.  输入第 2 组的替换

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T19:48:41.980

我认为这应该工作的一些变化：

```
(defun remove-padding ()
  (interactive)
  (while (search-forward-regexp
          "var .* = [a-zA-Z_]+\\s-*(\\(\\s-*\\).*?\\(\\s-*\\))"
          nil t)
    ;; Replace the 2 subexpressions with nothing
    (replace-match "" nil t nil 2)
    (replace-match "" nil t nil 1))) 
```

但是，您也可以考虑使用像[缩进](http://linux.die.net/man/1/indent)这样的工具，具体取决于您的用例。

***编辑：*** 下面是一个非常小的交互式版本。该功能`query-replace-regexp`非常复杂，我没有尝试重现它的所有功能。

```
(require 're-builder)
(defun query-replace-subexpressions (regexp replacements)
  "REPLACEMENTS need to be in reverse order if passed from lisp!"
  ;; Read the correct number of subexpressions
  (interactive
   (let* ((re (read-from-minibuffer "Query replace subexps: "))
          (num-subexps (reb-count-subexps re))
          (replacement-list nil)
          (replacements (dotimes (rep num-subexps)
                          (setq replacement-list
                                (cons
                                 (read-from-minibuffer
                                  (format "Replace subexpression %s with: " rep))
                                 replacement-list)))))
     (list re replacement-list)))
  ;; Search
  (let ((len (length replacements)))
    (while (search-forward-regexp regexp nil t)
      (replace-highlight (match-beginning 0) (match-end 0)
                         (point-min) (point-max) regexp
                         t case-fold-search)
      ;; Query
      (when (save-match-data (y-or-n-p "Replace this occurrence? "))
        ;; Make all the replacements
        (dotimes (i len)
          (replace-match (nth i replacements) nil nil nil (- len i)))))
    (replace-dehighlight)))

;; Test it out below
(query-replace-subexpressions
 "var .* = [a-zA-Z_]+\\s-*(\\(\\s-*\\).*?\\(\\s-*\\))"
 '("" ""))

var foo1 = blah(properties, property_id    );

var foo2 = blah (properties, property_id );

var foo3 = blah( properties, property_id      ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T16:49:37.953

我已经把它挂`query-replace-regexp`在了[github上](https://github.com/lewang/le_emacs_libs/blob/master/parallel-replace.el)

这是链接腐烂的粘贴：

```
;; -*- lexical-binding: t -*-

(provide inverted-replace)

(require 're-builder)
(require 'parallel-replace)

(defun inverted-replace-generate-replacement (from to)
  "invert result of current match (match-string 0)"
  (let ((string (match-string 0))
        (count (reb-count-subexps from))
        (replacements (parallel-replace-read-list to)))
    (save-match-data
      (string-match from string)
      (dotimes (i count)
        (setq string (replace-match (nth i replacements) nil nil string (- count i)))))
    string))

(defun inverted-replace-regexp (from to)
  (interactive (destructuring-bind (from to _)
                   (query-replace-read-args "inverted-replace-regexp: " t)
                 (list from to)))
  (query-replace-regexp from
                        (quote (replace-eval-replacement
                                replace-quote
                                (inverted-replace-generate-replacement from to)))
                        nil (and (and transient-mark-mode mark-active)
                               (region-beginning))
                        (and (and transient-mark-mode mark-active) (region-end)))) 
```

# iphone - 将自定义类连接到图形界面

> ID：11280206
> 
> 赞同：0
> 
> 时间：2012-07-01T07:09:39.253
> 
> 标签：iphone

我需要一些帮助来解决这个问题，拜托。我使用视图控制器 ( **MainViewController** ) 和包含所有绘图代码 ( **DrawView.m** ) 的自定义类创建了一个 iPad 绘图应用程序。DrawView类是在**UIView 视图****上**实现的，并且程序工作得非常好，允许用手指触摸进行绘制。擦除绘图是通过依次敲击几次来完成的。

 **现在我想通过实现一些按钮来添加更多功能（例如擦除绘图以及启用撤消和重做）。问题是，尽管在我的**DrawView**类 ( **UIImageView** * **drawImage** ) 中为绘图声明了一个出口，但我找不到在界面构建器中将此出口物理连接到图形界面 ( **MainViewController_iPad.xib** ) 的方法。

请问有什么方法可以连接它们吗？谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T12:49:22.523

我通过以下步骤获得了我认为您正在寻找的结果：

*   创建一个新的视图控制器子类，称为`MainViewController_iPad`针对 iPad 和匹配的 xib 文件。
*   `UIView`为名为 的子类创建代码`DrawView`。
*   在 DrawView.h: 中添加一行`@property (nonatomic, strong) IBOutlet UIImageView *drawImage;`并合成变量。
*   使用 IB 将 a`UIView`和 a`UIImageView`放入我的 xib 文件中。
*   将 的类更改`UIView`为`DrawView`使用身份检查器。
*   `DrawView`仍然选择对连接检查器的更改。
*   将连接从`drawImage`插座拖到`UIImageView`对象。

与您正在做的事情有什么不同还是我错过了问题的重点？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T13:36:57.790

解决了！我正在使用@property (strong, nonatomic) UIImageView *drawImage; 而不是@property (nonatomic, strong) IBOutlet UIImageView *drawImage; 我做了改变，drawImage神奇地出现了！非常感谢你。**

# .net - 如何在 vb.net 的每个类中添加一个函数并使其使用局部变量？

> ID：11280208
> 
> 赞同：0
> 
> 时间：2012-07-01T07:09:53.273
> 
> 标签：.net, vb.net, oop

我有一些类似的类，它们每个都有常量“值”我需要在每个类中都有一个简单的函数，称为“Register”，它将返回文本`Value & ".REGISTER"`。

我尝试`Inherits`在每节课中使用。它添加了函数，但在这种情况下如何访问局部变量？

编辑：在答案中说我应该使用 MustOverride 和 Overrides。但在我的情况下，应该共享一个功能，有没有可能的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T07:15:00.757

将常量 Value 放在被继承的父类中。

或者，在父类中声明属性[MustOverride并在子类中使用](http://msdn.microsoft.com/en-us/library/hyb29zk8%28v=vs.90%29)[Overrides](http://msdn.microsoft.com/en-us/library/k777kzw1%28v=vs.90%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T07:57:35.800

我不是专家，但也许您可以在注册功能中传递价值。我的意思是你的注册功能看起来像

我很抱歉，但解决方案在 c# 中。很久没用vb了。但我想你会有一个想法。

```
 public String Register(Integer VALUE)
    {
    ....
     Return Value + ".REGISTER";
    } 
```

并在参数中传递常量值。

我猜另一种解决方案效率不高，但可能是您需要的。

您可以在静态类中创建函数注册。这样你就不需要继承类，但你可以简单地通过类名调用函数。

```
public static Class A
{
public String Register(Integer Value){...}
} 
```

并将其他类中的函数调用为

```
Public class B{
public const int VALUE = 12;
String res = A.Register(A);
} 
```

# ruby-on-rails - 长期运行的 Sidekiq 工作不断消亡

> ID：11280209
> 
> 赞同：6
> 
> 时间：2012-07-01T07:10:03.040
> 
> 标签：ruby-on-rails, background-process, resque, sidekiq

我正在使用 sidekiq gem 来处理 Rails 中的后台作业。由于某种原因，该工作会在一段时间后挂起——该过程要么变得无响应，出现`top`但没有太多其他内容，要么神秘地消失，没有错误（没有任何错误报告给 airbrake.io）。

有没有人有这方面的经验？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-01T16:52:54.537

Use the TTIN signal to get a backtrace of all threads in the process so you can figure out where the workers are stuck.

[https://github.com/mperham/sidekiq/wiki/Signals](https://github.com/mperham/sidekiq/wiki/Signals)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T03:44:02.270

我经历过这种情况，但还没有找到解决方案/根本原因。

我无法干净地解决这个问题，但想出了一个技巧。

我将 God 配置为监视我的 Sidekiq 进程，并在文件更改时重新启动它们。

然后我设置了一个每 5 分钟运行一次的 Cron 作业，它检查所有当前 Sidekiq 工作人员的队列。如果某个百分比的工人过去的开始时间 <= 5 分钟，则意味着这些工人因某种原因挂起。如果发生这种情况，我触摸了一个文件，这让上帝重新启动了 Sidekiq。对我来说，5 分钟是理想的，但这取决于你的工作通常运行多长时间。

这是我可以解决挂起的 Sidekiq 作业的唯一方法，而无需每小时手动检查它们并自己重新启动它。

# c# - 涉及泛型和自继承的继承混淆

> ID：11280216
> 
> 赞同：1
> 
> 时间：2012-07-01T07:10:48.870
> 
> 标签：c#, .net, generics, inheritance

我对这个接口和类定义有点困惑。有人可能会有所启发吗？

接口和继承自它的类是这样定义的：

```
public abstract class DNum {

}

public abstract class DNum<DIM> : DNum where DIM : DNum<DIM> { //etc... 
```

......`DIM : DNum<DIM>`有点让我失望。DIM 必须从我们当前定义的类继承，并将其本身作为泛型参数？这是某种无限递归的定义吗？这里发生了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T07:15:28.983

这种声明的通常*意图*是，对于任何具体的子类，`DIM`都将是该子类：

```
public sealed class Concrete : DNum<Concrete>
{
    ...
} 
```

通常这是为了让您可以创建相同类型或非常相似的新实例。

（请注意，.NET 命名约定`DIM`作为类型参数名称不受欢迎。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T15:00:50.300

Polity 与 Eric Lippert 博客的链接对于理解这些奇怪声明的作者可能的意图非常有用。

请注意（只要意图是 E. Lippert 提出的意图），还有另一种表达相同类型约束的方法，它更加安全、可读和易于理解。它依赖于表达方法。

由于您的代码示例不够清晰，无法确定意图，假设我们已经阅读了 Eric Lippert 的文章，其意图是允许任何种类的动物只能与同一品种的另一只动物交朋友。

然后你可以这样做：

```
abstract class Animal
{
    ...
}

public static class AnimalExtensions
{
    public static void MakeFriends(this T animal, T anotherT) where T : Animal
    {
        ...
    }
} 
```

了解这种技术非常有用（而且一点也不令人困惑）。

# python - 找不到元素“xml”的声明

> ID：11280232
> 
> 赞同：1
> 
> 时间：2012-07-01T07:16:43.210
> 
> 标签：python, xml, validation

我从 python 中收到很多与我的 xml 文件相关的解析错误。我在stackoverflow的其他地方读到我应该首先验证xml文件。

我不明白为什么这个 xml 不会验证：

```
<xml><hive name="myprojectname"> 
```

XML 验证器显示此错误：找不到元素“xml”的声明。错误位置： `<xml><hive name="myprojectname">`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T11:03:53.560

这：

```
<xml><hive name="myprojectname"> 
```

不在[http://www.validome.org/xml/validate/](http://www.validome.org/xml/validate/)中验证，因为首先您必须在此处检查“仅格式良好”选项。

其次，它必须遵循 XML 规则，[http](http://en.wikipedia.org/wiki/XML#Well-formedness_and_error-handling) ://en.wikipedia.org/wiki/XML#Well-formedness_and_error-handling 。所以这应该看起来：

```
<xml><hive name="myprojectname"/></xml> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T07:23:36.253

您使用的验证器似乎是基于 DTD 的验证器。除非你告诉它只检查格式是否正确（在这种情况下，它不会检查你的元素和属性是否正确，只是你以理智的顺序打开/关闭元素，引用你的属性值等）然后你必须开始带有[Doctype](http://en.wikipedia.org/wiki/Document_Type_Definition)的 XML 文档，以便它可以找到 DTD。

# python - 如何将嵌套列表的所有元素相乘

> ID：11280236
> 
> 赞同：1
> 
> 时间：2012-07-01T07:17:57.543
> 
> 标签：python, python-2.7

我刚开始使用 Python，需要一些帮助。我有以下包含列表的字典列表：

```
>>> series
[{'data': [2, 4, 6, 8], 'name': 'abc'}, {'data': [5, 6, 7, 8], 'name': 'efg'}]
>>> 
```

如何在不使用循环的情况下将内部列表的每个元素乘以一个常数并就地执行。

所以如果我有：

```
>>> x = 100 
```

该代码应导致：

```
>>> series
[{'data': [200, 400, 600, 800], 'name': 'abc'}, {'data': [500, 600, 700, 800], 'name': 'efg'}] 
```

就我有限的知识而言，我能想到的最好的就是这个（我什至不知道“[:]”是什么）：

```
>>> for s in series:
...     s['data'][:] = [j*x for j in s['data']]
... 
>>> 
```

如何删除 for 循环？

对代码的解释或指向文档的指针也很好。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T07:30:37.483

> 如何删除 for 循环？

您可以使用 list 和 dict 理解的组合来删除循环：

```
>>> [{k:[j*100 for j in v] if k == 'data' else v for k,v in d.items()}
     for d in series]
[{'data': [200, 400, 600, 800], 'name': 'abc'}, {'data': [500, 600, 700, 800], 'name': 'efg'}] 
```

然而，这不太可读，不再进行原地乘法。

所以我认为你*不应该*尝试删除循环。相反，你应该继续做你已经在做的事情。

> 对代码的解释或指向文档的指针也很好。

我认为解释上面的代码没有多大意义，因为我们已经确定它不是您想要的。但也许您想知道`[:]`现有代码中的作用。为此，我建议您参考这个相关问题，详细解释它：

*   [切片整个列表的切片赋值和直接赋值有什么区别？](https://stackoverflow.com/questions/10155951/what-is-the-difference-between-slice-assignment-that-slices-the-whole-list-and-d)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T07:36:24.880

您可以使用以下方法删除`for`列表理解中的循环`map`：

```
for s in series:
    s['data'] = map(lambda d: d*x, s['data']) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T07:39:25.350

通过遍历列表中的每个元素来映射乘数：

```
series = [{'data': [2, 4, 6, 8], 'name': 'abc'}, {'data': [5, 6, 7, 8], 'name': 'efg'}]
x=100

def mult_elements(series, x):
    for s in series:
        s['data']= map(lambda y:y*x, s['data'])
    return series

print mult_elements(series, x) 
```

将其作为具有列表理解的单行符：

```
series = [{'data': map(lambda y:y*x, s['data']), 'name':s['name']} for s in series] 
```

# python - python write可以接受2个参数

> ID：11280239
> 
> 赞同：1
> 
> 时间：2012-07-01T07:18:55.303
> 
> 标签：python, arguments

我有一个问题要制作“output.txt”。我想将 word 和 prob(l.19) 结果写入“output.txt”文件。当我写“model_file.write(word, prob)”时，终端用“TypeError：函数只需要 1 个参数（给定 2 个）”消息责骂我。我试图添加更多的论点，但没有奏效..有人可以帮我解决我的问题吗？

这是一个字数.PY

```
total_count = 0 

train_file = open(sys.argv[1],"r")
for line in train_file:
    words =  line.strip().split(" ") 
    words.append("</s>")
    for word in words:t
    counts[word] = counts.get(word, 0) + 1 
    total_count = total_count + 1

model_file = open('output.txt',"w")
for word, count in sorted(counts.items(),reverse=True):
    prob = counts[word]*1.0/total_count
    print "%s --> %f" % (word, prob) 

model_file.write(word, prob)
model_file.close() 
```

#

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T09:16:46.710

只需简单更换

`model_file.write(word, prob)`

和

`model_file.write(word+' '+str(prob)+'\n')`

* * *

请注意，该方法`write()`被实现为**只接受一个字符串参数**，因此您必须将其转换`prob`为字符串（通过方法`str()`），然后将其与`word`字符串运算符组合`+`，这样您就只有一个字符串参数。

* * *

PS：虽然你没有问这个，但我不得不说，如果你要写每个单词及其概率，你应该把它放在`model_file.write(word+' '+str(prob)+'\n')` **语句`for`中**。否则，如果您出于某种目的拒绝在语句之外调用它，那么您也应该在语句之外进行`for`赋值。否则会导致另一个错误。`word``prob``for`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T07:34:00.927

您可以使用该`print`语句来执行此操作：

```
print >>model_file, word, prob 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-20T22:26:35.707

我想创建一种关于我的 df 的描述，所以我写了这个：

```
# Create an empty txt
f = open(os.path.join(pathlib.Path().absolute(),'folder','florder','name.txt'), "a")

# Create an kind of header
f.write('text'+'\n')
f.write('text'+'\n')
f.write("""
-------------------
""")
f.write('text:'+ '\n')
f.write("""
""")

for c in range(0, len(df.columns)):
        campo = df.columns[c]
        if df[df.columns[c]].dtype== 'object':
            text= 'Tex'
        outfile = open('name.txt','w')
        f.write('str:'+"'"+str(xxx)+"'"'\n')
        f.write('str:'+ str(str)+'\n')
        f.write('\n')
f.close() 
```

# linux - 为什么当信号设置为“DEBUG”假信号时我的陷阱不起作用？

> ID：11280240
> 
> 赞同：4
> 
> 时间：2012-07-01T07:19:15.953
> 
> 标签：linux, debugging, bash, shell, ubuntu

```
#test code:

#!/bin/bash
#~/test/test.sh
trap "echo 'testmessage'" DEBUG

while :
do
echo abc
sleep 6
done 
```

* * *

```
#run it
~/test$sh test.sh 
```

===============================

```
#result
=>   trap: DEBUG: bad trap 
```

===============================

?[shell debug]为什么当信号设置为“DEBUG”假信号时我的trap不工作，但报trap错误？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-01T07:38:26.540

错误消息“bad trap”是由 ash 而不是 bash 产生的。当你运行`sh test.sh`shebang 行时是无关紧要的，因为你没有执行脚本，你正在执行名为“sh”的程序，并以“test.sh”作为参数。sh 程序（在你的情况下是 ash 或 dash 的符号链接，我敢打赌）然后尽最大努力运行参数中命名的脚本。如果您运行命令，shebang 行将发挥作用`./test.sh`（首先需要 +x 权限）。

# java - 无法调用其他类

> ID：11280253
> 
> 赞同：-1
> 
> 时间：2012-07-01T07:23:01.847
> 
> 标签：java, class, compilation, call

我正在制作一个 Java 程序，它可以通过给出 a、b 和 c 来使用二次方程求解根。

这是主要代码：

```
//main file

class Call
{
       public static void main(String args [])
    {
            double a=Double.parseDouble(args[0]);
            double b=Double.parseDouble(args[1]);
            double c=Double.parseDouble(args[3]);

            Receiver r = new Receiver(".");
            if (r.determine(a,b,c)=true)
            {
                    double root1=r.Root;
                    double root2=r.Root2;
                    System.out.println("The first root is +root1");
                    System.out.println("The second root is +root2");

            }
            else
            {
                    System.out.println("Not a number");
            }
    }
 } 
```

现在这是我试图打电话但不能打电话的课程。

```
 class Receiver
    {
    public boolean determine(double a, double b, double c)
    {
            double value=b*b-4*a*c;
                    if (value<0)
                            return false;
                    else
                            return true;
    }

    public double Root(double a, double b, double c)
    {
            double value=b*b-4*a*c;
            double root=(-b+ Math.sqrt(value))/(2*a);
            return root;
    }

    public double Root2(double a, double b, double c)
    {
            double value=b*b-4*a*c;
            double root2=(-b- Math.sqrt(value))/(2*a);
            return root2;
    }
    } 
```

我确保我已经编译了 Receiver.java。但是当我编译 Call.java 时，我得到了这个错误：

```
Call.java:14:error:cannot find symbol
      Receiver r= new Receiver();
      symbol: class Receiver
      location: class Call 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T07:27:48.877

您正在`Receiver`使用 String 参数调用 s 构造函数，但是在您`Receiver`发布的代码中没有这样的构造函数。

另外，您可以尝试制作课程`public`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T07:35:29.943

**请注意，我还没有找到 constructor `public Receiver(String arg)`，而您正在这样使用它，您不是错过了吗？**

如果您**从命令行**自行编译，请确保，这些步骤：

**用这些类创建包**

```
// top of Call.java
package com.mypackage.app;

// top of Receiver.java
package com.mypackage.app; 
```

**编译这些文件，以便在类结构中创建包**
（这将在当前位置创建文件夹，如`/com/mypackage/app/`）

```
javac -d . Call.java Receiver.java 
```

**通过它的包名从当前位置运行 Call 类**

```
java com.mypackage.app.Call 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T07:33:11.567

您需要同时编译这两个文件，或者确保编译器已通过对 Receiver 类文件的引用。此外，Receiver 中的构造函数不采用字符串参数。

通常，将源文件放在包（目录）中被认为是一种很好的做法 - 随着项目变得越来越大，它可以更容易地组织它们。例如，在您的情况下，您可以选择像“com.myapp.roots”这样的包名称，并将两个源文件放在像“myFirstProject/src/com/myapp/roots”这样的目录中。然后从“myFirstProject”目录你应该能够调用“javac src”来编译源目录中的所有内容

[http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/javac.html](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/javac.html)

# c# - 在 C# 中获取当前月份时的奇怪行为

> ID：11280254
> 
> 赞同：2
> 
> 时间：2012-07-01T07:23:23.780
> 
> 标签：c#, c#-3.0, datetime-format

这是小代码。但我找不到它有什么问题。在我的应用程序中，我想以长月格式（例如：一月）获取当前月份。我使用了以下两行代码。

```
DateTime now = DateTime.Now;
string month = now.Month.ToString("MMMM",CultureInfo.CurrentCulture); 
```

但对于月份的值，它会返回“MMMM”。谁能告诉我这段代码有什么问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T07:26:41.150

[now.Month](http://msdn.microsoft.com/en-us/library/system.datetime.month.aspx)是`int`月份的表示，例如一月的 1，这就是`.ToString("MMMM")`作品“奇怪”的原因。

您需要的是`.ToString()`直接在`DateTime`对象上调用：

```
DateTime now = DateTime.Now;
string month = now.ToString("MMMM",CultureInfo.CurrentCulture); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T07:33:27.483

```
String month = 
System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(
    DateTime.Now.Month); 
```

# c# - 如何使用 XmlTextWriter 将对象写入 XML？

> ID：11280256
> 
> 赞同：1
> 
> 时间：2012-07-01T07:24:06.433
> 
> 标签：c#, .net, xml, xsd, xmltextwriter

我使用 Visual Studio xsd 工具生成了一个带有 XML 架构 (.xsd) 的类。现在我有了这个类，我想将该对象输出回 XML，如我的 xsd 定义的那样。我想知道该怎么做。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T07:37:28.257

您需要负责`XmlSerializer`序列化您的课程：

```
using System.Text; // needed to specify output file encoding
using System.Xml;
using System.Xml.Serialization; // XmlSerializer lives here

// instance of your generated class
YourClass c = new YourClass();

// wrap XmlTextWriter into a using block because it supports IDisposable
using (XmlTextWriter tw = new XmlTextWriter(@"C:\MyClass.xml", Encoding.UTF8))
{
    // create an XmlSerializer for your class type
    XmlSerializer xs = new XmlSerializer(typeof(YourClass));

    xs.Serialize(tw, c);
} 
```

# emacs - 输入 } 后如何将点切换到上一行？

> ID：11280261
> 
> 赞同：1
> 
> 时间：2012-07-01T07:24:53.797
> 
> 标签：emacs, elisp, cc-mode

我正在使用带有 cc 模式的 emacs24，我想知道如何让我的 emacs 更“聪明”。在我输入 } 后，它会自动插入一个新行并缩进为例外。我想知道如何将点切换到上一行。例如，当我定义一个函数时，现在我的 emacs 行为是：

```
void f()
{
}
//point 
```

“//point”是输入}后光标的位置。但我想要的是这个：

```
void f()
{
    //point
} 
```

我希望光标的位置可以自动切换到上一行并缩进。我知道emacs可以做到这一点，但我不知道该怎么做，谁能帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T08:23:51.323

我想你是在追求这些.. `C-M-u`, `C-M-d`, `C-M-f`and`C-M-b`

练习一下......它们是一种全球性的，它们在几乎所有模式下都会根据上下文表现......

更新：

哦.. 似乎您想自动放置光标.. 实际上，更一般地说，Emacs 会帮助您根本不打字`}`。我的意思是emacs可以自动插入关闭参数。

内置一对电模式

第三方 autopair.el

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:02:59.087

看看像 yasnippet 这样的模板系统：[http ://www.emacswiki.org/emacs/CategoryTemplates](http://www.emacswiki.org/emacs/CategoryTemplates)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T01:03:24.577

[自动缩进模式](https://github.com/mlf176f2/auto-indent-mode.el)也许是你想要的！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T08:55:06.027

我不相信任何电动的东西，所以我写了这个函数。

```
(defconst insert-logical-brackets-logical-bracket-begin "{")
(defconst insert-logical-brackets-logical-bracket-end "}")
(defconst insert-logical-brackets-default-style 0)
(make-variable-buffer-local 'logical-bracket-begin)
(make-variable-buffer-local 'logical-bracket-end)
(make-variable-buffer-local 'insert-logical-brackets-default-style)
(defun insert-logical-brackets(&optional style)
  "If STYLE = 0(default, according to `insert-logical-brackets-default-style' value), make a newline before opening bracket, if line is not empty. Make a newline after closing bracket, if there is something after this bracket. Make two newlines in the middle.
If STYLE = 1, don't make newlines before opening a bracket(one of c styles).
If STYLE = 2, don't make newlines before opening and after closing bracket.
If STYLE = 3, allways make all newlines.
If STYLE is not nil, don't make newlines between brackets(still makes before/after lines)."
  (interactive "P")
  (when (eq style nil)
    (setq style insert-logical-brackets-default-style))
  (funcall indent-line-function)
  (unless (or (eq 1 style) (eq 2 style))
    (when (or (/= (point) (save-excursion (back-to-indentation) (point))) (eq 3 style))
      (newline)
      (funcall indent-line-function)))
  (unless (and (integerp style) (= 2 style))
    (when (or (not (looking-at "\n")) (eq 3 style))
      (newline)
      (funcall indent-line-function)
      (forward-line -1)
      (goto-char (point-at-eol))))
  (insert logical-bracket-begin)
  (funcall indent-line-function)
  (let ((return-point (point)))
    (when (or (not style) (or (eq 0 style) (eq 1 style) (eq 2 style) (eq 3 style)))
      (newline)
      (funcall indent-line-function)
      (setq return-point (point))
      (newline))
    (insert logical-bracket-end)
    (funcall indent-line-function)
    (goto-char return-point))) 
```

# c - Visual Studio 2010 不缩进 C 代码

> ID：11280263
> 
> 赞同：1
> 
> 时间：2012-07-01T07:25:04.153
> 
> 标签：c, visual-studio-2010, indentation

有谁知道为什么 Visual Studio 2010 不缩进 C 代码以及如何使其自动缩进，*即*当我键入（我已经知道键盘快捷键）C 代码时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T07:35:33.443

检查Tools->Options->Text Editor->C/C++->Tabs->Indenting ？</p>

# html - 菜单项显示其子项的延迟时间

> ID：11280265
> 
> 赞同：0
> 
> 时间：2012-07-01T07:25:56.177
> 
> 标签：html, css

目前，我的网站水平显示菜单项，当用户将鼠标悬停在每个菜单项上时，会显示其子菜单项。但是，当用户尝试单击子项时，它们就会消失。有什么办法可以延迟子项可见的时间吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T12:01:45.603

是的，有可能（使用 CSS3 转换/动画）在此显示/隐藏行为上添加延迟，但我认为问题在于：

1.  你是如何嵌套标签的
2.  哪些标签具有关联的 :hover 样式

如果用户将鼠标从容器元素上移开，则子菜单将再次隐藏。它们需要停留在与要显示的子元素相关联的任何元素的“目标区域”中：悬停样式。（我想你只是通过 CSS 来显示/隐藏子菜单。）

但实际上，您需要给出一个代码示例才能给出具体的反馈。

# mysql - 从mysql中的表创建动态创建的列

> ID：11280267
> 
> 赞同：0
> 
> 时间：2012-07-01T07:26:22.350
> 
> 标签：mysql

我想创建基于连接表生成值的动态虚拟列。

我有下表称为类型：

```
id, name
1, TypeA
2, TypeB 
```

我有一个名为类别的表

```
id, name, type
1, a, 1
2, b, 2 
```

我想要一个返回以下内容的查询

```
category name, TypeA, TypeB
a, 1, 0
b, 0, 1 
```

这可以在mysql中做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T08:09:34.263

我将在这里概述几个案例。

1.  首先也是最直接的如下：

    ```
    SELECT c.name AS "CatName",
           IF(typea.id IS NULL, 0, 1) AS "TypeA",
           IF(typeb.id IS NULL, 0, 1) AS "TypeB"
      FROM category c
      LEFT JOIN types typea ON c.type = typea.id AND typea.name = 'TypeA'
      LEFT JOIN types typeb ON c.type = typeb.id AND typeb.name = 'TypeB'; 
    ```

    但这需要手动提及查询中的所有类型，这显然不是您想要的。

2.  可以构建 SQL 查询并使用它，此方法假定您正在从某个脚本运行查询，该脚本可以从第一个查询中获取输出并将其用作新查询。

    ```
    SELECT concat('SELECT c.name AS "CatName",',
        group_concat(concat('IF(',lower(t.name),
          '.id IS NULL,0,1) AS "',t.name,'"')),
        ' FROM category c ',
        group_concat(concat('LEFT JOIN types ',
          lower(t.name),' ON c.type = ',lower(t.name),'.id AND ',
          lower(t.name),'.name = ''',t.name,'''') SEPARATOR ' '),
        ';')
      FROM types t; 
    ```

    编写一个小的 shell（或其他）脚本应该很容易。

3.  在标准 SQL 中，不可能使用表的内容来创建[DML](http://en.wikipedia.org/wiki/Data_Manipulation_Language)语句。不同的数据库为此提供了不同的工具，如`PIVOT`语句、过程语言等。我不知道如何使用 MySQL 工具来实现这一点，但想法是动态构建第 2 点中概述的查询并执行它。

我已经介绍了[SQL Fiddle](http://www.sqlfiddle.com/#!2/13090/24)的前 2 个案例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T07:34:22.663

有一个特性叫做`PIVOT`可以做你想做的事，但不幸的是，它在 MySQL 中不可用。

但是，您***可以***做的是将所有类型连接到每个类别的单个字符串中：

```
SELECT
    a.name,
    GROUP_CONCAT(b.name) AS types
FROM
    category a
LEFT JOIN
    types b ON a.type = b.id
GROUP BY
    a.id 
```

这将导致类似：

```
name    |    types
--------------------------------
a       |    TypeA
b       |    TypeB
c       |    TypeA,TypeB,TypeC,TypeD 
```

其中 category`c`有四种不同的类型，但只有一种类型与它们相关联`a`。`b`

如果您事先知道`type`要检查的 s 和数量，并且希望在该类别存在该类型的情况下显示一个布尔值，您可以这样做：

```
SELECT,
    a.name,
    b.id IS NOT NULL AS TypeA,
    c.id IS NOT NULL AS TypeB,
    -- etc...
FROM
    category a
LEFT JOIN
    types b ON a.type = b.id AND b.id = 1
LEFT JOIN
    types c ON a.type = c.id AND c.id = 2
-- etc... 
```

**编辑：**如果您事先不知道要创建的列数，但仍希望在它们自己的单独列中为每种类型提供布尔值，则另一种选择是在应用程序逻辑中动态构建查询字符串。假设您使用的是 PHP，例如：

```
$columns = $ljoins = array();
$i = 1;

foreach($pdo->query('SELECT id, name FROM types') as $row)
{
    $columns[] = "t$i.id IS NOT NULL AS " . $row['name'];
    $ljoins[] = "LEFT JOIN types t$i ON a.type = t$i.id AND t$i.id = " . $row['id'];
    $i++;
}

$sql = 'SELECT a.name, ' . implode(', ', $columns) . ' FROM category a ' . implode(' ', $ljoins);
$stmt = $pdo->query($sql);

// Do stuff with result-set 
```

# c# - 使用 OnPropertyChanged 创建具有公共属性的 ViewModel？

> ID：11280270
> 
> 赞同：-1
> 
> 时间：2012-07-01T07:26:44.030
> 
> 标签：c#, wpf, design-patterns, mvvm

我觉得我有很多具有这两个属性的模型视图模型

```
public Visibility OkButtonVisibility
{
get{  return _OkButtonVisibility;}
set{ 
_OkButtonVisibility = value;
RaisePropertyChanged("OkButtonVisibility");
}

}

public Visibility CancelButtonVisibility
{
get{  return _CancelButtonVisibility;}
set{ 
_CancelButtonVisibility = value;
RaisePropertyChanged("CancelButtonVisibility");
}

} 
```

我想为它们创建可附加的界面，如下所示：

```
Interface IOKandCancelButtonsVM
{
 public Visibility OkButtonVisibility
{
get{  return _OkButtonVisibility;}
set{ 
_OkButtonVisibility = value;
RaisePropertyChanged("OkButtonVisibility");
}

}

public Visibility CancelButtonVisibility
{
get{  return _CancelButtonVisibility;}
set{ 
_CancelButtonVisibility = value;
RaisePropertyChanged("CancelButtonVisibility");
}

} 
```

并让我的视图模型使用它来继承它们以及具有像这样的代理属性的另一个接口

```
class VM1:BaseVM,IOKandCancelButtonsVM,IOtherCommonPropertyVM
{ 

} 
```

但后来我发布了我的新界面并没有暗示`INotifyChanged`。`IOKandCancelButtonsVM`隐含`INotifyChanged` 并`VM1`明确隐含会是一个坏主意`BaseVM`吗？

我从来没有处理过两次继承相同接口的类并且不知道该怎么做。

**这只是一个示例，只有不到一半的 VM 使用我拥有数百个属性的那些，其中许多在数十个屏幕上共享。我需要一个更优雅的解决方案，而不是把所有东西都粘在 BaseViewModel 中**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T07:56:53.337

您的接口定义中不能有实现。这意味着您的`IOKandCancelButtonsVM`定义不正确。

> 让 IOKandCancelButtonsVM 实现 BaseVM 会是个坏主意吗

是的，这将是一个非常糟糕的主意——事实上不可能——接口不能实现或扩展类。

既然您就如何构建代码征求意见，我也会把它扔在那里：从您的视图模型中删除对“可见性”的任何引用。**不要**从您的视图模型返回 System.Visibility 值。

视图模型不应该对视图一无所知。语义上正确的方法是简单地从视图模型返回一个标志，并使用转换器将其更改为绑定中的可见性值 - 框架中甚至有一个现成的转换器来执行此操作：[BooleanToVisibilityConverter](http://msdn.microsoft.com/en-us/library/system.windows.controls.booleantovisibilityconverter.aspx)。尽量避免在您的 VM 中提及任何与 UI 相关的术语，即使它返回一个布尔值 - 这是一种很好的做法，它会导致代码更紧凑、更规范，随意使用这些名称最终会导致代码有问题。

我有一篇博文说明了一种很好的属性更改通知方法：[Streamlining property notifications in MVVM](http://techfilth.blogspot.co.nz/2010/02/streamlining-property-notifications-in.html)。

为了清楚起见，我建议您摆脱对`IOKandCancelButtonsVM`接口的任何想法，无论如何都要在基本视图模型上包含简单的布尔属性，该属性将由许多其他视图模型扩展，这些视图模型将绑定到带有确定/取消的对话框纽扣。

要在文本中绘制它，它看起来像这样：

> *YourBaseVm* <-- *BaseVmUsedByDialogs* <-- SpecificDialogVm

（注意斜体表示该类是抽象的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T07:29:50.453

看来您已经有了一个基本的 viewmodel 类。只需在此处添加两个属性。您可能希望创建从第一个继承的第二个基，当需要这两个属性时使用它，因此如果它们不是，则没有开销。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T08:04:35.813

为什么不在`virtual properties`你的基类 BaseVM 中实现默认功能呢？如果其他派生类想要扩展它，他们总是可以根据所需的功能覆盖它。

确保您的 BaseVM 正在实施`INotifyPropertyChanged`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T05:26:59.620

我只需创建一个抽象基类，并让需要这些属性的 ViewModel 继承自它。把事情简单化。

```
abstract class BaseDialogVM : BaseVM
{
    private Visibility _OkButtonVisibility;
    public Visibility OkButtonVisibility {
        get { return _OkButtonVisibility; }
        set { 
           _OkButtonVisibility = value;
           RaisePropertyChanged("OkButtonVisibility");
        }
    }

    private Visibility _CancelButtonVisibility;
    public Visibility CancelButtonVisibility {
        get { return _CancelButtonVisibility; }
        set { 
           _CancelButtonVisibility = value;
           RaisePropertyChanged("CancelButtonVisibility");
        }
    }
}

class VM1 : BaseDialogVM { /*...*/ } 
```

# magento - Magento：语言检测和 url 404 错误

> ID：11280272
> 
> 赞同：1
> 
> 时间：2012-07-01T07:27:54.917
> 
> 标签：magento

我已经配置了我的 magento index.php，以便它检测浏览器语言并将用户重定向到相应的商店视图。这很好用。但是对于每个商店视图的特定 URL 存在问题。例如，有一个带有 url 的产品：

```
./product-url-in-english --> English view
./product-url-in-catalan --> Catalan view 
```

如果我的浏览器是用英语配置的并且我转到加泰罗尼亚语 url，那么我会收到 404 错误，因为该 url 仅适用于加泰罗尼亚语视图，但鉴于我正在检测浏览器语言并重定向到英语视图，加泰罗尼亚语 URL 不起作用。

如果我使用 from_store 和 store 的参数，它会起作用，但我不知道如何在我的 index.php 文件中反映这一点。检测浏览器语言的代码如下：

```
/* Language detection */
function getLanguageCode()
{
    $default_language_code = 'es';
    if (isset($_SERVER['HTTP_ACCEPT_LANGUAGE'])) {
        foreach (explode(",", strtolower($_SERVER['HTTP_ACCEPT_LANGUAGE'])) as $accept) {
            if (preg_match("!([a-z-]+)(;q=([0-9.]+))?!", trim($accept), $found)) {
                $langs[] = $found[1];
                $quality[] = (isset($found[3]) ? (float) $found[3] : 1.0);
            }
        }
        // Order the codes by quality
        array_multisort($quality, SORT_NUMERIC, SORT_DESC, $langs);
        // get list of stores and use the store code for the key
        $stores = Mage::app()->getStores(false, true);
        // iterate through languages found in the accept-language header
        foreach ($langs as $lang) {
            $lang = substr($lang,0,2);
            if (isset($stores[$lang]) && $stores[$lang]->getIsActive()) 
                return $lang;
        }
    }
    return $default_language_code;
}

/* Store or website code */
if(isset($_SERVER['MAGE_RUN_CODE']))
    $mageRunCode = $_SERVER['MAGE_RUN_CODE'];
else
    $mageRunCode = getLanguageCode();

/* Run store or run website */
$mageRunType = isset($_SERVER['MAGE_RUN_TYPE']) ? $_SERVER['MAGE_RUN_TYPE'] : 'store';

Mage::run($mageRunCode, $mageRunType); 
```

我需要在我的 index.php 文件中进行哪些更改，以便我可以处理来自所有商店视图的 url 并重定向到特定页面而不会出现 404 错误？

谢谢

# .htaccess - 想用 .htaccess 从我的 url 替换 .php?url= 这部分

> ID：11280273
> 
> 赞同：1
> 
> 时间：2012-07-01T07:28:02.463
> 
> 标签：.htaccess

在我的网站上有一个像这样的链接
[http://backlinks.cheapratedomain.com/backlinks.php?url=emobileload.com](http://backlinks.cheapratedomain.com/backlinks.php?url=emobileload.com)

为了更好的 SEO，我想让它像这样
[http://backlinks.cheapratedomain.com/backlinks/emobileload.com](http://backlinks.cheapratedomain.com/backlinks/emobileload.com)

只想用 '/' 替换 '.php?url='

我的问题是如何通过编辑我的 .htaccess 文件来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T09:36:17.157

如果它只针对那个 URL，那么你可以试试这个：

```
RewriteRule ^backlinks/([a-zA-Z0-9\.\-]*)$ backlinks.php?url=$1 [L] 
```

所以请求的 URL`http://backlinks.cheapratedomain.com/backlinks/domain.com`将被重定向到`http://backlinks.cheapratedomain.com/backlinks.php?url=domain.com`

# php - 正则表达式函数将 url 更改为另一个

> ID：11280276
> 
> 赞同：0
> 
> 时间：2012-07-01T07:30:09.963
> 
> 标签：php, regex

我对正则表达式完全陌生。我需要你的帮助。

将下面的 url 更改为列出的 url 的正则表达式函数是什么？如何在 PHP 中使用该正则表达式函数。

```
https://fbcdn-photos-a.akamaihd.net/hphotos-ak-ash4/393656_257350694313804_126044397444435_712409_344887174_s.jpg 
```

到

```
https://fbcdn-sphotos-a.akamaihd.net/hphotos-ak-ash4/s320x320/393656_257350694313804_126044397444435_712409_344887174_n.jpg 
```

或者

```
https://fbcdn-sphotos-a.akamaihd.net/hphotos-ak-ash4/s480x480/393656_257350694313804_126044397444435_712409_344887174_n.jpg 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T08:01:31.843

```
$size = "s320x320";
$url = preg_replace("#https://(.*)/(.*)/(.*)\_s.jpg#i", "https://$1/$2/$size/$3_n.jpg", $url);
$url = str_replace("-photos-", "-sphotos-", $url); 
```

此代码未经测试，但应该可以工作。第三行，`str_replace`，用于使正则表达式更简单。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T07:37:11.767

```
preg_replace( '#^(.*?)photos(.*)(/[^/]*?)_s.jpg$#', '$1sphotos$2/s320x320$3_n.jpg', $url ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T07:51:00.087

好的，让我尝试用一​​些代码来回答

```
$url = 'https://fbcdn-photos-a.akamaihd.net/hphotos-ak-ash4/393656_257350694313804_126044397444435_712409_344887174_s.jpg';
$str = array('fbcdn-photos-a.akamaihd.net/hphotos-ak-ash4', '_s');
$rep1 = array('fbcdn-sphotos-a.akamaihd.net/hphotos-ak-ash4/s320x320', '_n');
$rep2 = array('fbcdn-sphotos-a.akamaihd.net/hphotos-ak-ash4/s480x480', '_n');

//TO
$url1 = str_replace($str, $rep1, $url);
//OR
$url2 = str_replace($str, $rep2, $url); 
```

# r - 将因子计数添加到数据框中

> ID：11280277
> 
> 赞同：3
> 
> 时间：2012-07-01T07:30:18.050
> 
> 标签：r, dataframe

我有一个数据框，其中每一行都是关于瞳孔的观察。数据框中的向量之一是学校的 id。我获得了一个新向量，每个学校的计数如下：

```
tbsch <- table(dt$school) 
```

现在我想将相关的计数值添加到`dt`. 我已经使用`for()`循环遍历每一行`dt`并创建一个包含相关计数的新向量并最后使用`cbind()`将其添加到 来完成它`dt`，但我认为这是非常低效的。有没有一种聪明/简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-01T12:29:53.893

使用 jmsigner 的数据，您可以：

```
dt$count <- ave(dt$school, dt$school,  FUN = length) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T12:20:30.997

这在`data.table`v1.8.1 中要容易得多。`:=`现在按组工作。组不必是连续的，它保留原始顺序。这只是一行：

```
library(data.table)

# set up data
set.seed(2)
npupils <- rpois(10, 20)
pupil <- unlist(lapply(npupils, seq_len))
school <- rep(seq_along(npupils), npupils)
dt <- data.table(school = school, pupil = pupil) # Create a data.table
dt <- dt[sample(seq_len(nrow(dt)))] # Mix it up

dt
     school pupil
  1:      5     2
  2:      6    13
  3:      2    14
  4:      5     3
  5:     10    14
 ---             
186:      3    11
187:      7     2
188:      8    12
189:      3     6
190:      7    10

(dt[, schoolSize := .N, by = school])

     school pupil schoolSize
  1:      5     2         16
  2:      6    13         18
  3:      2    14         15
  4:      5     3         16
  5:     10    14         24
 ---                        
186:      3    11         14
187:      7     2         28
188:      8    12         19
189:      3     6         14
190:      7    10         28 
```

这具有快速分组的所有通常速度优势，并且通过引用分配新列而根本没有副本。

* * *

编辑：删除了仅与`data.table`1.8.1 版之前相关的答案：（感谢 Matthew 的更新）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-01T08:34:22.257

你可以尝试这样的事情：

```
dt <- data.frame(p=1:20, school=sample(1:5, 20, replace=T)) 
tbsch <- table(dt$school)

tbsch <- data.frame(tbsch)

merge(dt, tbsch, by.x="school", by.y="Var1") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-01T10:16:16.700

您也可以使用**plyr** ...并使用这一个衬垫保留原始订单

```
join(dt, count(dt, "school")) 
```

# python - 从文件中读取行而不在末尾附加“\ n”

> ID：11280282
> 
> 赞同：17
> 
> 时间：2012-07-01T07:31:49.833
> 
> 标签：python, linux, file-io, ubuntu-10.04

我的文件是“xml.txt”，内容如下：

```
books.xml 
news.xml
mix.xml 
```

如果我使用 readline() 函数，它会在所有文件的名称中附加“\n”，这是一个错误，因为我想打开 xml.txt 中包含的文件。我写了这个：

```
fo = open("xml.tx","r")
for i in range(count.__len__()): #here count is one of may arrays that i'm using
    file = fo.readline()
    find_root(file) # here find_root is my own created function not displayed here 
```

运行此代码时遇到错误：

```
IOError: [Errno 2] No such file or directory: 'books.xml\n' 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-01T07:39:37.977

只删除末尾的换行符：

```
line = line.rstrip('\n') 
```

保留换行符的原因`readline`是您可以区分空行（有换行符）和文件结尾（空字符串）。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-11-03T08:13:51.240

来自[在 Python 中读取换行符分隔文件并丢弃换行符的最佳方法？](https://stackoverflow.com/questions/544921/best-method-for-reading-newline-delimited-files-in-python-and-discarding-the-new/544932#544932)

```
lines = open(filename).read().splitlines() 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-01T07:36:05.423

您可以使用`.rstrip()`字符串对象的方法来获取删除了尾随空格（包括换行符）的版本。

例如：

```
find_root(file.rstrip()) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-03-13T18:41:40.800

我只是出于好奇而计时。以下是不同大文件的结果。

tldr; 文件读取然后拆分似乎是处理大文件的最快方法。

```
with open(FILENAME, "r") as file:
    lines = file.read().split("\n") 
```

但是，如果您无论如何都需要遍历这些行，那么您可能想要：

```
with open(FILENAME, "r") as file:
    for line in file:
        line = line.rstrip("\n") 
```

Python 3.4.2

```
import timeit

FILENAME = "mylargefile.csv"
DELIMITER = "\n"

def splitlines_read():
    """Read the file then split the lines from the splitlines builtin method.

    Returns:
        lines (list): List of file lines.
    """
    with open(FILENAME, "r") as file:
        lines = file.read().splitlines()
    return lines
# end splitlines_read

def split_read():
    """Read the file then split the lines.

    This method will return empty strings for blank lines (Same as the other methods).
    This method may also have an extra additional element as an empty string (compared to
    splitlines_read).

    Returns:
        lines (list): List of file lines.
    """
    with open(FILENAME, "r") as file:
        lines = file.read().split(DELIMITER)
    return lines
# end split_read

def strip_read():
    """Loop through the file and create a new list of lines and removes any "\n" by rstrip

    Returns:
        lines (list): List of file lines.
    """
    with open(FILENAME, "r") as file:
        lines = [line.rstrip(DELIMITER) for line in file]
    return lines
# end strip_readline

def strip_readlines():
    """Loop through the file's read lines and create a new list of lines and removes any "\n" by
    rstrip. ... will probably be slower than the strip_read, but might as well test everything.

    Returns:
        lines (list): List of file lines.
    """
    with open(FILENAME, "r") as file:
        lines = [line.rstrip(DELIMITER) for line in file.readlines()]
    return lines
# end strip_readline

def compare_times():
    run = 100
    splitlines_t = timeit.timeit(splitlines_read, number=run)
    print("Splitlines Read:", splitlines_t)

    split_t = timeit.timeit(split_read, number=run)
    print("Split Read:", split_t)

    strip_t = timeit.timeit(strip_read, number=run)
    print("Strip Read:", strip_t)

    striplines_t = timeit.timeit(strip_readlines, number=run)
    print("Strip Readlines:", striplines_t)
# end compare_times

def compare_values():
    """Compare the values of the file.

    Note: split_read fails, because has an extra empty string in the list of lines. That's the only
    reason why it fails.
    """
    splr = splitlines_read()
    sprl = split_read()
    strr = strip_read()
    strl = strip_readlines()

    print("splitlines_read")
    print(repr(splr[:10]))

    print("split_read", splr == sprl)
    print(repr(sprl[:10]))

    print("strip_read", splr == strr)
    print(repr(strr[:10]))

    print("strip_readline", splr == strl)
    print(repr(strl[:10]))
# end compare_values

if __name__ == "__main__":
    compare_values()
    compare_times() 
```

结果：

```
run = 1000
Splitlines Read: 201.02846901328783
Split Read: 137.51448011841822
Strip Read: 156.18040391519133
Strip Readline: 172.12281272950372

run = 100
Splitlines Read: 19.956802833188124
Split Read: 13.657361738959867
Strip Read: 15.731161020969516
Strip Readlines: 17.434831199281092

run = 100
Splitlines Read: 20.01516321280158
Split Read: 13.786344555543899
Strip Read: 16.02410587620824
Strip Readlines: 17.09326775703279 
```

文件读取然后拆分似乎是处理大文件的最快方法。

注意： read then split("\n") 将在列表末尾有一个额外的空字符串。

注意：读取然后 splitlines() 会检查更多内容，而不仅仅是“\n”，可能是“\r\n”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-01T07:45:24.690

最好为文件使用上下文管理器，而`len()`不是调用`.__len__()`

```
with open("xml.tx","r") as fo:
    for i in range(len(count)): #here count is one of may arrays that i'm using
        file = next(fo).rstrip("\n")
        find_root(file) # here find_root is my own created function not displayed here 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-20T21:09:38.507

要从末尾删除换行符，您还可以使用以下内容：

```
for line in file:
   print line[:-1] 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-10-28T16:21:49.987

@Lars Wirzenius 回答的用例：

```
with open("list.txt", "r") as myfile:
    for lines in myfile:
        lines = lines.rstrip('\n')    # the trick
        try:
            with open(lines) as myFile:
                print "ok"
        except IOError as e:
            print "files does not exist" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-22T21:09:27.560

```
# mode : 'r', 'w', 'a'
f = open("ur_filename", "mode")
for t in f:
    if(t):
        fn.write(t.rstrip("\n")) 
```

“如果”条件将检查该行是否有字符串，如果是，下一行将在末尾剥离“\n”并写入文件。代码测试。;)

# django - 验证 ManyToManyFields 的正确方法是什么？

> ID：11280286
> 
> 赞同：1
> 
> 时间：2012-07-01T07:32:17.170
> 
> 标签：django, django-models, django-orm

如果我有一个带有 a 的模型，`ManyToManyField`并且我想将其限制为具有特定属性的实例，那么最好的方法是什么？我可以在表单验证或视图中做到这一点，但我想更接近模型。

例如，如何只允许将 is_cool 设置为 True 的 B 类实例与 A 类实例关联？

```
from django.db import models

class A(models.Model):
    cool_bees = models.models.ManyToManyField('B') 

class B(models.Model):
    is_cool = models.BooleanField(default=False) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T09:45:06.093

为了更接近模型，您可以使用 m2m_changed 信号来检查模型是否符合您的要求，因此代码可能如下所示：

```
import django.db.models.signals

def validate(sender, instance, action, reverse, model, pk_set, **kwargs):
    if action == "pre_add":
        # if we're adding some A's that're not cool - a.cool_bees.add(b)
        if not reverse and model.objects.filter(pk__in=pk_set, is_cool=False):
              raise ValidationError("You're adding an B that is not cool")
        # or if we add using the reverse - b.A_set.add(a)
        if reverse and not instance.is_cool:
              raise ValidationError("You cannot insert this non-cool B to A")

signals.m2m_changed.connect(validate, sender=A.cool_bees.through) 
```

# python - 我想将列表值存储在变量中，然后必须将其写入文件

> ID：11280287
> 
> 赞同：-3
> 
> 时间：2012-07-01T07:32:29.697
> 
> 标签：python, file, list, variables

```
value,rows = DB.DB_sel('localhost','root','ndoitadmin','Example','select * from UC1_voip_gateway') 
```

在这里，我以列表格式从数据库中获取值

```
for j in range(0,rows):
     for i in range(0,21):
        # print value[j][i] 
```

在这里，我必须以句子格式打印列表的值，以便我可以将变量 N​​ame 传递给 write.file 函数以将其写入文件

```
 Name = ''' '+value[0][1]+' 
                   list 2 = '+value[0][2]+'

                   .....etc ....'''

write_file.write_file(Name , Filename) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:01:40.937

更好地描述你想做的事情会有所帮助，但这是我关于我能理解的答案：

```
outfile = open(file.txt, 'w') # Opens the output file

for j in range(0, rows):
    for i in range(0, 21) # I suppose this is the way how you obtain your "value"
        outfile.write("Value1 is: %s\nValue2 is: %s" % (value[0], value[1]) 
```

该行的输出`outfile.write("Value1 is: %s\nValue2 is: %s" % (value[0], value[1])`是：

```
Value1 is: x
Value2 is: y 
```

for 循环对数据库中的每个值都执行此操作。

# javascript - 字符串方法替换无法正常工作

> ID：11280292
> 
> 赞同：0
> 
> 时间：2012-07-01T07:32:55.607
> 
> 标签：javascript, jquery

我正在使用`replace`字符串方法，

```
 var text = this ex is not working.;
     text = text.replace(" ", "+");
     alert(text); 
```

并得到警报：

```
 this+ex is not working. 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T07:39:49.457

试试这个：**lil diff 演示** [http://jsfiddle.net/bLaZu/6/](http://jsfiddle.net/bLaZu/6/)

**请注意：**

> RegExp 上的 g 标志，它将在字符串内进行全局替换。

如果你热衷：[https ://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)

休息随意玩演示，`:)`

**代码**

```
var text = "this ex is not working.";
     text = text.replace(/\s+/g, '+');
     alert(text);​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T07:38:13.320

要用加号替换所有空格，`+`请使用以下命令：

```
var text = "this ex is not working.";
text = text.replace(/ /g, "+");
alert(text); 
```

并且不要忘记使用引号`"`来初始化字符串。

# javascript - javascript if-else循环没有到达else

> ID：11280297
> 
> 赞同：0
> 
> 时间：2012-07-01T07:33:29.777
> 
> 标签：javascript, if-statement

我现在正在完成一个关于表单验证的教程，我想知道为什么这个函数总是返回`if`条件。

```
<html>
<head>
</head>
<body>
     <form id="form" action="#" method="post">
        <fieldset>
            <p>
                First Name:
                <input type="text" id="txt" />
            </p>
            <p> <input type="submit" value="submit" onclick="validate()" /> </p>
        </fieldset>
    </form>
    <script type="text/javascript"> 
        function validate() 
            {
            var userName = document.getElementById("txt").value;
            if (userName.length == 0)
                {
                alert("FINISH THAT UP");
                return false;
                } 
            else 
                {
                alert("thanks, " + UserName);
                }
            }
    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T07:40:13.407

当文本框不为空时，它确实到达了该`else`部分，但随后它因错误而崩溃，因此表单被静默提交。

JavaScript 区分大小写 -`UserName`与`userName`未定义不同。

改成：

```
alert("thanks, " + userName); 
```

为避免此类问题，您可以像这样包装整个块`try..catch`：

```
function validate() 
{
    try
    {
        var userName = document.getElementById("txt").value;
        if (userName.length == 0)
        {
            alert("FINISH THAT UP");
            return false;
        } 
        else 
        {
            alert("thanks, " + UserName);
        }
    } catch (err) {
        alert("general error while validating: " + err.message);
        return false;
    }
} 
```

有了这个，您会看到“用户名未定义”。

[现场测试用例](http://jsfiddle.net/799T3/1/)。

此外，附带说明 - 使用您当前的代码，即使使用空值，尽管您返回 false，表单仍将被提交 - 这是因为您甚至需要取消提交：

```
<input type="submit" value="submit" onclick="return validate()" /> 
```

您忘记了本身的`return`关键字。`onclick`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T07:40:27.837

JavaScript 是区分大小写的语言。因此，如下更正`userName`else 语句中的变量名。

```
 else {
      alert("thanks, " + userName); 
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T07:54:16.247

你能试试这个吗？我认为这可行。

```
function validate() 
{
    try
    {
        var userName = document.getElementById("txt").value;
        if (userName)
        {
            alert("FINISH THAT UP");
            return false;
        } 
        else 
        {
            alert("thanks, " + UserName);
        }
    } catch (err) {
        alert("general error while validating: " + err.description);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T08:02:22.967

那这个呢

```
function validate(){
    $("#form").submit(function() {

    if($("#txt").val()==""){
        alert("FINISH THAT UP");
        return false;
    }
    if($("#txt").val()!=""){
        var un = $("#txt").val();
        alert("thanks, " + un);
        return true;
    }
   });

} 
```

# mysql - 检测哪一列的值最大

> ID：11280298
> 
> 赞同：-1
> 
> 时间：2012-07-01T07:33:54.157
> 
> 标签：mysql

我有一张这样的桌子

```
id | a | b | c | status
---+---+---+---+--------
1  | 3 |12 |6  |   b
2  | 5 |8  |56 |   c
3  | 99|7  |23 |   a 
```

我想检测哪一列具有最大值（1,2 或 3），然后记录该行最大值的“状态”（我仅使用 a,b,c 作为示例）

我怎么能这样做？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T07:42:37.753

```
SELECT *, 
    CASE GREATEST(a,b,c)
        WHEN a THEN 'a'
        WHEN b THEN 'b'
        WHEN c THEN 'c'
    END AS status
FROM yourtable 
```

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!2/5d1aa/1)

重写为`UPDATE`语句：

```
UPDATE yourtable
SET status =
    CASE GREATEST(a,b,c)
        WHEN a THEN 'a'
        WHEN b THEN 'b'
        WHEN c THEN 'c'
    END 
```

# uml - 我应该如何使用 UML 表示主要方法（java）？

> ID：11280301
> 
> 赞同：3
> 
> 时间：2012-07-01T07:34:26.500
> 
> 标签：uml

我有三个班级：桥梁，主要和汽车。我不知道如何在我的 UML 表示中包含 main 方法。我应该列出所有属性......以及主要方法吗？

主要方法： - 一些计算 - 实例化其他两个类

我会这样画主线：

```
---------------------------
Main
---------------------------

---------------------------
+ main(String[] args): void

--------------------------- 
```

那是对的吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T15:07:33.537

您的绘图很好，您只需要在 main 方法下划线以表明它是静态的。我认为您应该对其进行建模，因为它表明该类是系统的一个入口点（可能还有更多）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T07:46:26.663

你不需要在你的 UML 中包含 main 方法，而且我记得，你应该把除了 main 方法之外的所有成员和方法都放在你的类中。由于 main 方法在某种程度上已经给定了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-10T01:00:29.657

主要方法应该是这样绘制的：

```
+ main(args: String[]): void
____________________________ 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-05-02T16:25:45.183

根据定义，主类没有实例；对象之间使用关联、聚合等关系，所以图中的主类用处不大。

# android - Android 取证应用程序

> ID：11280302
> 
> 赞同：2
> 
> 时间：2012-07-01T07:34:37.347
> 
> 标签：android, filesystems

我正在开发一个 Android Forensic 应用程序，以从任何 Android 设备上检索已删除的短信、电子邮件和通话记录。我设法使用我的 C++ 应用程序从 sqlite 数据库中提取了几条已删除的记录，但是为了获得 sqlite dbs，我应该连接到一个有根的 Android 设备，这实际上是不可能的，因为将使用这个应用程序的人没有太多的技术专长他们将无法植根设备。

为了解决这个问题，我正在考虑从文件系统图像中雕刻 sqlites，一旦我可以访问图像文件，我很有信心做同样的事情。所以我尝试了 dd 和 nanddump 但似乎它们都需要对分区的写访问权来转储图像。

所以我想知道是否有办法在设备上没有 su / root 权限的情况下转储 userdata 分区？

# seo - Google 目前不支持 Schema.org 的 AggregateRating 吗？

> ID：11280314
> 
> 赞同：0
> 
> 时间：2012-07-01T07:36:34.707
> 
> 标签：seo, schema.org, google-rich-snippets

来自 Schema.org [http://schema.org/AggregateRating](http://schema.org/AggregateRating)的丰富片段示例：

```
<html>
<div itemscope itemtype="http://schema.org/Product">
  <img itemprop="image" src="dell-30in-lcd.jpg" />
  <span itemprop="name">Dell UltraSharp 30" LCD Monitor</span>

  <div itemprop="aggregateRating"
    itemscope itemtype="http://schema.org/AggregateRating">
    <span itemprop="ratingValue">87</span>
    out of <span itemprop="bestRating">100</span>
    based on <span itemprop="ratingCount">24</span> user ratings
  </div>

</div>
</html> 
```

但[http://www.google.com/webmasters/tools/richsnippets](http://www.google.com/webmasters/tools/richsnippets)不会显示预览。

那么，[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=146645](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=146645)中的以下内容只是谎言？

> 新的！schema.org 允许您使用 Google、Microsoft 和 Yahoo! 的词汇表在您的页面上标记更广泛的项目类型。都能理解。找到更多。（不过，Google 仍然支持您现有的丰富网页摘要标记。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:51:56.183

它工作得很好。

Google 没有义务每次都向您显示预览，当我从 schema.org 插入您的示例时，它会显示错误：

```
The following errors were found during preview generation:
This page does not contain authorship or rich snippet markup. 
```

我已经在我网站的新闻中做到了，它显示得[很好](http://www.google.com/webmasters/tools/richsnippets?url=http://bengalimovies.org/news/celebs-gathered-tabe-tai-hok-s-music-release-10726)。

# xaml - 转换 wf4 xamlized 进入c#

> ID：11280322
> 
> 赞同：0
> 
> 时间：2012-07-01T07:38:37.757
> 
> 标签：xaml, workflow-foundation-4

我无法在 C# 中重新编写下面的 XAML 提炼部分。

```
<Activity 
  xmlns:swm="clr-namespace:System.Web.Mvc;assembly=System.Web.Mvc" 
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
>
  <x:Members>
    <x:Property 
      Name="ViewData" 
      Type="InArgument(swm:ViewDataDictionary)" />
  </x:Members>
  <Assign>
    <Assign.To>
      <OutArgument x:TypeArguments="x:Object">[ViewData("Foo")]</OutArgument>
    </Assign.To>
    <Assign.Value>
      <InArgument x:TypeArguments="x:Object">["funky foo string"]</InArgument>
    </Assign.Value>
  </Assign>
</Activity> 
```

任何人都可以阐明这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T15:30:51.530

```
 var dic = new Dictionary<string, object>();
  dic.Add("foo", "before");
  var activity = new Assign {
    To = new OutArgument<object>(_ => dic["foo"]),
    Value = new InArgument<object>( _ => (object)"after")
  };

  WorkflowInvoker.Invoke(activity); 
```

您必须使用接受表达式的 In/Out 参数重载。此外，我必须明确地将“之后”转换为对象，否则工作流验证会抱怨类型不匹配。

# java - 我在 Java 项目中构建了一个 matlab 代码，现在在运行调用该 matlab 函数的 java 代码行时出现错误

> ID：11280323
> 
> 赞同：1
> 
> 时间：2012-07-01T07:38:43.967
> 
> 标签：java, matlab, image-processing, matlab-deployment, matlab-compiler

我的 matlab 代码进行图像处理，我制作了 matlab 函数，它有 2 个图像作为输入。我编写了一个单独的java 类来执行matlab 的imread 功能，即将jpg 图像读入3D 数组（它是一个RGB 图像）。

```
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import QRcode_java.*;
import com.mathworks.toolbox.javabuilder.*;

public class Driver {
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        encoder_class x=null;     //encoder_class is the class built from the  
                                        //matlab function                         

        Object[] barcode2=null;         //output of matlab function
        barcode_image_class barcode;     //class to imread the jpg image input
        barcode= new barcode_image_class();
        original_photo_class original_photo;  
             //class to imread another image input
        original_photo= new original_photo_class();

        try {
            x= new encoder_class();
            barcode2=x.encoder_function(barcode, original_photo); 
//**ERROR!** /*encoder_function is the matlab function written by me. this line gives an //error as the following: 
//"The method encoder_function(List, List) in the type encoder_class 
//is not applicable for the arguments (barcode_image_class, original_photo_class)"*/

        } catch (MWException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

} 
```

你能告诉我如何解决这个错误吗？是我的java代码有问题，还是matlab代码的导入有问题？我对Java很陌生，所以我无法弄清楚问题所在。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T08:28:15.960

根据您的评论，您已经定义了一个`encoder_function(List, List)`以两个`List`s 作为参数的方法。你试图用一些不是`List`s 的参数来调用它，这就是编译器抱怨的原因。

要解决此问题，您必须：

*   更改`encoder_function(List, List)`定义以将`barcode_image_class`,`original_photo_class`作为参数并相应地更新方法的代码

或者

*   找到一种方法将`barcode_image_class`,转换`original_photo_class`为`List`（通过实现`List`接口或在两个类中提供一些帮助方法将它们转换为`List`s

# django - django.contrib.comments 和多个评论表单

> ID：11280326
> 
> 赞同：0
> 
> 时间：2012-07-01T07:39:08.727
> 
> 标签：django

我按照[https://docs.djangoproject.com/en/dev/ref/contrib/comments/custom/](https://docs.djangoproject.com/en/dev/ref/contrib/comments/custom/)上的指南为我当前的 django 应用程序的新闻条目设置了评论表单。现在，我需要在站点的另一部分为另一种类型的对象创建一个包含不同字段的评论表单。

考虑到我已经覆盖了联系表格，这应该如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:09:51.520

这是个好问题; django 似乎非常坚持你在任何地方都使用相同的评论表单。您可能可以编写一个表单，根据实例化的对象显示不同的字段。尝试按照以下方式编写一个**init**方法：

```
class CustomCommentForm(CommentForm):
    custom_field = forms.CharField(max_length=100)

    def __init__(self, *args, **kwargs):
        super(CustomCommentForm, self).__init__(*args, **kwargs)

        # check what's in kwargs['initial'], and insert fields if needed like this:   
        if ...:
            self.fields['optional_field'] = forms.CharField(max_length=100) 
```

# android - 更改返回键

> ID：11280331
> 
> 赞同：3
> 
> 时间：2012-07-01T07:39:53.477
> 
> 标签：android, android-keypad

我想更改输入按钮的名称（图中圈出的按钮）来搜索

![在此处输入图像描述](../Images/d8eb6a8a8b11d88c273d6f3ecaac4855.png)

所以我用

```
 <EditText
                android:imeOptions="actionSearch"
                android:imeActionLabel="Search"

                android:id="@+id/et_PatientID"

                android:layout_width="400dip"
                android:layout_height="50dip"
                android:layout_toRightOf="@id/tv_patientID"
                android:background="@android:drawable/editbox_background" /> 
```

但它没有用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T07:47:26.580

添加`android:imeOptions="actionSearch"`和`android:inputType="text"`到您的 EditText 视图

还添加编辑器动作监听器

```
editText.setOnEditorActionListener(new TextView.OnEditorActionListener() {
    @Override
    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
        if (actionId == EditorInfo.IME_ACTION_SEARCH) {
            performSearch();
            return true;
        }
        return false;
    }
});

<EditText 
            android:id="@+id/et_PatientID"
            android:inputType="text"
            android:layout_width="400dip"
            android:layout_height="50dip"
            android:layout_toRightOf="@id/tv_patientID"
            android:background="@android:drawable/editbox_background"
            android:imeOptions="actionSearch" 
            android:imeActionLabel="Search"  /> 
```

# java - 在 Spring MVC Hibernate Application 中，图像路径从 jsp 更改为控制器类？

> ID：11280336
> 
> 赞同：0
> 
> 时间：2012-07-01T07:40:56.357
> 
> 标签：java, hibernate, spring-mvc

在 Spring MVC hibernate 应用程序中，我从 JSP 中选择图像并将其发送到控制器，但图像路径正在更改，因此我收到文件未找到错误... **这是我的 jsp 代码：**

> ```
>  <form name="reguserform">
>     <input type="file" name="userImage" id="userImage"/>
>  </form> 
> ```

这里我从 D: 驱动器**D:\25986.jpeg 中选择图像**

**以下是我的控制器类代码：**

```
 public String regUser(@RequestParam("userImage") File userImage) {
    System.out.println("Image  =  "+ userImage);
  } 
```

// 这里我得到：**Image = C:\fakepath\25986.jpeg**

因此，我无法处理。
我不知道为什么图像路径会自动更改。我应该更改图像的输入类型吗？有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T07:54:18.120

假设它做了你想要的，假设我使用你的 webapp，并选择从我的`K:\Documents\JBNizet`目录上传一张图片。因此，您将获得`K:\Documents\JBNizet\someImage.jpg`方法的参数。它有什么用处？最终用户机器（我的机器）上的文件路径在 webapp 服务器（你的机器）上并不代表任何有意义的东西。

阅读[Spring MVC 的文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#mvc-multipart)以了解您必须如何处理文件上传。

# php - 通过网站从 sqlite 下载文档

> ID：11280337
> 
> 赞同：0
> 
> 时间：2012-07-01T07:41:13.890
> 
> 标签：php, sqlite

我在名为 template.doc 的本地服务器中存储了一个示例文档。然后我将文件目录存储在我的 sqlite 表中。我设法调出文件目录的路径，但我怎样才能让用户下载它？

代码

```
 <form id="List" name="List" method="post" action="">
          <select name="List" id="List">
                       <?php 
            if ($Choice !="No")
            {
                            $path = $_SERVER['DOCUMENT_ROOT']."/WEB/";
                $fullPath = $path.$_GET['$Choice'];
                                echo "<form id=\"form7\" name=\"form7\" method=\"post\" action=\"\">";
                echo "<input type=\"submit\" name=\"Download\" id=\"Download\" value=".$fullPath."/>";

                if (file_exists($fullPath)) 
                {
                    header('Content-Description: File Transfer');
                    header('Content-Type: application/octet-stream');
                    header('Content-Disposition: attachment; filename='.basename($fullPath));
                    header('Content-Transfer-Encoding: binary');
                    header('Expires: 0');
                    header('Cache-Control: must-revalidate');
                    header('Pragma: public');
                    header('Content-Length: ' . filesize($fullPath));
                    ob_clean();
                    flush();
                    readfile($fullPath);
                    echo "<label>".$fullPath."</label>";
                    echo "<input type=\"submit\" name=\"Download\" id=\"Download\" value=".$fullPath."/>";
                    exit;
                                            echo '</form>';
                }
            }
            ?> 
```

如何在列表表单下方创建一个按钮并下载 microsoft word？它现在会在网站上清除 Microsoft Word 文本，而不是在按钮上。请告知是否可以这样做。仅用于本地测试。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T07:45:50.507

您可以使用[`readfile`](http://php.net/manual/en/function.readfile.php)并设置适当的标题来强制下载。

来自 readfile 驯化页面的示例：

```
<?php
$file = 'monkey.gif';

if (file_exists($file)) {
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename='.basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);
    exit;
}
?> 
```

你的表格应该是这样的

```
<form name="download" action="download.php" method="post">
    <input type="hidden" name="fileID" value="some file identifier" />
    <input type="submit" name="submit" value="Download File" />
</form> 
```

那么，在`download.php`

```
if(isset($_POST["submit"])) {
    $file = $_POST['fileID'];
    // download file
} 
```

# cherrypy - 如何获取 CherryPy 的cherryd 服务静态文件

> ID：11280338
> 
> 赞同：0
> 
> 时间：2012-07-01T07:41:32.933
> 
> 标签：cherrypy

我只想启动一个服务器，将它指向一个目录并让它提供静态文件。我认为`cherryd`这会很好/很容易。

我已经阅读了cherryd 的用法和大部分在线文档，以及关于静态文件和CherryPy 的帖子，但我还没有找到有关cherryd 的裸配置文件的信息。我已经能够拼凑以下内容：

```
[global]
server.socket_host: "127.0.0.1"
server.socket_port: 8000
log.error_file = '/Users/chb/code/app/test/log/cherrypy.error.log'

[/]
tools.staticdir.on: True
tools.staticdir.root: '/Users/chb/code/app'
tools.staticdir.dir: '.' 
```

我还尝试了这种替代配置：

```
[global]
server.socket_host: "127.0.0.1"
server.socket_port: 8000
log.error_file = '/Users/chb/code/app/test/log/cherrypy.error.log'

[/]
tools.staticdir.root: '/Users/chb/code/app'

[/index.html]
tools.staticfile.on: True
tools.staticfile.filename: '/Users/chb/code/app/index.html' 
```

后者更符合文档（见下文）。

访问 127.0.0.1:8000 给我一个 404。当我`tail`运行后的错误日志时`cherryd -c /path/to/cherryd.cfg`，除了标准的启动信息之外什么都没有出现。

这个问题与 CherryPy 3.2.2 和 Python 2.7.3 有关

文档中的相关页面：

*   [http://docs.cherrypy.org/stable/concepts/tools.html](http://docs.cherrypy.org/stable/concepts/tools.html)
*   [http://docs.cherrypy.org/stable/progguide/files/static.html](http://docs.cherrypy.org/stable/progguide/files/static.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T14:53:25.357

我的错误在于认为[cherryd](http://docs.cherrypy.org/stable/deployguide/cherryd.html)是一个简单的HTTP 守护程序，它可以在没有用户创建的Python 脚本的情况下运行。

我想要的是类似[lighttpd](http://www.lighttpd.net)的东西。我偶然发现了[这个文档](http://redmine.lighttpd.net/projects/lighttpd/wiki/TutorialConfiguration)，想知道是否在 Python 中实现了类似的东西。

幸运的是，经过更多搜索后，我发现了原帖[评论中提到的单行字。](https://stackoverflow.com/a/759666/148680)

# php - 将内部数组嵌套为预先存在的多维数组中的值

> ID：11280342
> 
> 赞同：0
> 
> 时间：2012-07-01T07:42:42.543
> 
> 标签：php, arrays, json

我有一个名为：

```
$fragment = array($fragment); 
```

其中有以下三个值：

1.  `["<div class=\"alert alert_error mt20\"><a class=\"js-alert-close close\"><\/a>Please enter a title <\/div>"]`
2.  `["<div class=\"alert alert_error mt20\"><a class=\"js-alert-close close\"><\/a>Enter a valid source URL (e.g. http:\/\/en.wikipedia.org\/wiki\/Penguins) <\/div>"]`
3.  `["<div class=\"alert alert_error mt20\"><a class=\"js-alert-close close\"><\/a>Please choose a category <\/div>"]`

我想将该数组合并到另一个数组（到`'fragment'`键中），如下所示：

```
$toReturn = array(
    'status' => $status,
    'formData' => $formData,
    'inputs' => $inputs,
    'fragment' => $fragment
); 
```

但每次我这样做时，它只会添加第一个值`$fragment`：

1.  `"<div class=\"alert alert_error mt20\"><a class=\"js-alert-close close\"><\/a>Please enter a title <\/div>"`

如何将所有三个值添加`$fragment`到我的`$toReturn`数组中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T07:45:32.130

您可以通过连接三个数组条目来创建一个长字符串，例如使用流行的[`implode`^(*Docs*)](http://php.net/implode)函数：

```
$fragment = implode("", $fragment); 
```

# r - 如何在R中绘制家谱

> ID：11280343
> 
> 赞同：15
> 
> 时间：2012-07-01T07:42:51.367
> 
> 标签：r

我一直在寻找如何绘制家谱，但找不到可以复制的东西。我一直在看哈德利关于 ggplot 的书，但同样的事情。

我想绘制一个以类似于以下的数据框为源的家谱：

```
dput(head(familyTree))
structure(
  list(
    id = 1:6, 
    cnp = c("11", NA, "22", NA, NA, "33"), 
    last_name = c("B", "B", "B", NA, NA, "M"), 
    last_name_alyas = c(NA, NA, NA, NA, NA, "M"), 
    middle_name = c("C", NA, NA, NA, NA, NA), 
    first_name = c("Me", "P", "A", NA, NA, "S"), 
    first_name_alyas = c(NA, NA, NA, NA, NA, "F"), 
    maiden_name = c(NA, NA, "M", NA, NA, NA), 
    id_father = c(2L, 4L, 6L, NA, NA, 8L), 
    id_mother = c(3L, 5L, 7L, NA, NA, 9L), 
    birth_date = c("1986-01-01", "1963-01-01", "1964-01-01", NA, NA, "1936-01-01"), 
    birth_place = c("City", "Village", "Village", NA, NA, "Village"), 
    death_date = c("0000-00-00", NA, NA, NA, NA, "2007-12-23"), 
    death_reason = c(NA, NA, NA, NA, NA, "stroke"), 
    nr_brothers = c(NA, 1L, NA, NA, NA, NA), 
brothers_names = c(NA, "M", NA, NA, NA, NA), 
    nr_sisters = c(1L, NA, 1L, NA, NA, 2L), 
    sisters_names = c("A", NA, "E", NA, NA, NA), 
    school = c(NA, "", "", NA, NA, ""), 
    occupation = c(NA, "", "", NA, NA, ""), 
    diseases = c(NA_character_, NA_character_, NA_character_, NA_character_, NA_character_, NA_character_), 
    comments = c(NA_character_, NA_character_, NA_character_, NA_character_, NA_character_, NA_character_)
  ), 
  .Names = c("id", "cnp", "last_name", "last_name_alyas", "middle_name", "first_name", "first_name_alyas", "maiden_name", "id_father", "id_mother", "birth_date", "birth_place", "death_date", "death_reason", "nr_brothers", "brothers_names", "nr_sisters", "sisters_names", "school", "occupation", "diseases", "comments"), 
  row.names = c(NA, 6L), 
  class = "data.frame"
) 
```

有什么办法可以用ggplot绘制家谱吗？如果没有，我如何使用另一个包来绘制它。

主键是“id”，您使用“id_father”和“id_mother”连接到家庭的其他成员。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-01T17:05:03.687

如评论中所述，您应该尝试`igraph`. 这是一个快速入门：

```
require(igraph)
mothers=familyTree[,c('id','id_mother','first_name', 'last_name')]
fathers=familyTree[,c('id','id_father','first_name', 'last_name')]
mothers$name=paste(mothers$first_name,mothers$last_name)
fathers$name=paste(fathers$first_name,fathers$last_name)
names(mothers)=c('parent','id','first_name','last_name','name')
names(fathers)=c('parent','id','first_name','last_name','name')
links=rbind(mothers,fathers)
links=links[!is.na(links$id),]
g=graph.data.frame(links)
co=layout.reingold.tilford(g, flip.y=F)
plot(g,layout=co) 
```

![在此处输入图像描述](../Images/7ab16060ee4266b1f28dbcc2bdcb162f.png)

没有任何名称，箭头指向错误的方向，但您应该可以从那里开始。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-04-20T20:54:29.400

你试过这个 `kinship2`包吗？

```
library(kinship2)
df <- data.frame(id = c(1,2,3,4,5,6), sex = c(1,2,1,2,2,2), dadid = c(0,0,0,0,1,3), momid = c(0,0,0,0,2,4), famid = 1)
relation1 <- matrix(c(2,3,4,1), nrow = 1)
foo <- pedigree(id = df$id, dadid = df$dadid, momid = df$momid, sex = df$sex, relation = relation1, famid = df$famid)
ped <- foo['1']
plot(ped) 
```

您可以看到结果图：

[![在此处输入图像描述](../Images/013d4b6ecf0857edbc80c1d5ef44d55d.png)](https://i.stack.imgur.com/dJlE1.png)

# android - 使用不符合 Android 命名方案的图片资源

> ID：11280345
> 
> 赞同：0
> 
> 时间：2012-07-01T07:42:56.767
> 
> 标签：android, resources, naming

我需要使用要移植到 Android 的 iOS 应用程序中的图像资源。不幸的是，它们的文件名中都有破折号，这会导致错误。

我无法重命名资源，因为它们与 iOS 代码库共享，并且拥有重复的资源是不行的。

有没有办法绕过这个命名要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T07:59:53.233

没有办法绕过命名要求，但您可以使用符号链接。

（不过，我有点困惑，并且假设您必须已经在复制文件或使用符号链接。考虑到每个应用程序所需的不同目录结构，您还能如何构建您的 Android 和 iOS 应用程序？）

# javascript - Uploadify v3.1 传递 POST 数据

> ID：11280360
> 
> 赞同：0
> 
> 时间：2012-07-01T07:46:20.950
> 
> 标签：javascript, jquery

我对 JQuery Uploadify V3.1 越来越疯狂了。

```
// setup fileuploader
$("#file_upload").uploadify({
    'swf': 'flash/uploadify.swf',
    'uploader' : 'upload/do-upload',
    'debug' : false,
    'buttonText': 'Files auswählen',
    'multi': true,
    'method': 'POST',
    'auto': false,
    'width': 250,
    'queueSizeLimit' : 10,
    'fileSizeLimit' : '100MB',
    'cancelImg': 'img/uploadify-cancel.png',
    'removeCompleted' : true,
    'onUploadSuccess' : function(file, data, response) {
        $('#message').append(data);
    },
    'onUploadError' : function() {
        $('#message').html('<h2>Fehler beim Upload</h2>');
    }
}); 
```

开始下载 onClick

```
// handle the event stuff
$("#event_start_upload").on({
    click: function(){
        var key = $('#key').val();

        if (key.length < KeyLength) {
            $('#form-encryption-control').addClass('error');
            return;
        } else {
            $('#form-encryption-control').removeClass('error');
        }
        // some space for new download links
        $('#message').empty();
        $('#file_upload').uploadify('upload','*')
    }
}); 
```

我的问题是：我必须将附加参数传递给服务器端，在 Uploadify V2 中有一个 Method uploadifySettings 来传递 "scriptData" ，但在 V3 中没有？有人知道这是如何工作的吗？

如果其他人需要线索：

```
'onUploadStart' : function(file) {
            var key = $('#key').val();
            $("#file_upload").uploadify('settings', 'formData', {'key' : key});
        }, 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T07:54:13.337

要通过 uploadify 发送数据，您可以使用`formData`例如：

```
$(function() {
$("#file_upload").uploadify({
    'formData'      : {'someKey' : 'someValue', 'someOtherKey' : 1},
    'swf'           : '/uploadify/uploadify.swf',
    'uploader'      : '/uploadify/uploadify.php',
    'onUploadStart' : function(file) {
        $("#file_upload").uploadify("settings", "someOtherKey", 2);
    }
});
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T17:34:10.640

```
$("#image_upload1").uploadify(uploadifyBasicSettingsObj);

uploadifyBasicSettingsObj.onUploadSuccess = function(file, data, response) 
{
    $('.tempImageContainer2').find('.uploadify-overlay').show();

    /* Here you actually show your uploaded image.In my case im showing in Div  */
    $('.tempImageContainer2').attr('style','background- image:url("../resources/temp/thumbnail/'+data+'")');
    $('#hidden_img_value2').attr('value',data);
} 
```

这是我在项目中使用的代码，其中我实际上将图像上传到临时文件夹并动态地将该图像显示给我的`DIV`(Having class 'tempImageContainer2' ) 标签`onUploadSuccess`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T07:49:31.477

这应该可以帮助您开始[http://www.uploadify.com/documentation/uploadify/formdata/](http://www.uploadify.com/documentation/uploadify/formdata/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-01T08:21:25.997

只需像这样添加`'formData'`您的代码：

```
 $("#file_upload").uploadify({
        'swf': 'flash/uploadify.swf',
        'uploader' : 'upload/do-upload',
        'debug' : false,
        'buttonText': 'Files auswählen',
        'multi': true,
        'method': 'POST',
        'auto': false,
        'width': 250,
        'queueSizeLimit' : 10,
        'fileSizeLimit' : '100MB',
        'cancelImg': 'img/uploadify-cancel.png',
        'removeCompleted' : true,

        'formData' : {'K':'V','K':'V','K':'V'},

        'onUploadSuccess' : function(file, data, response) {
            $('#message').append(data);
        },
        'onUploadError' : function() {
            $('#message').html('<h2>Fehler beim Upload</h2>');
        }
    }); 
```

# web-services - 从没有 API 的网站收集数据

> ID：11280363
> 
> 赞同：0
> 
> 时间：2012-07-01T07:46:54.283
> 
> 标签：web-services, api, web-applications, web-scraping

我正在寻找构建一个 web 应用程序来改善用户在印度预订火车票的体验。由于购买它的费用很高，因此无法获得该 API。我见过许多通过他们的应用程序提供火车等详细信息的应用程序。

* * *

我的问题是他们如何从网站上抓取数据。**一般来说，我怎样才能合法地在任何网站上向用户显示数据（我不想要付款和没有 API 就不可能的东西）**。**人们如何抓取这些数据？**有什么工具/方法吗？

* * *

如果问题很幼稚，请耐心等待。我对这些东西很陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T22:51:40.493

他们可以使用几种编程语言中的任何一种来获取火车时刻表信息，尽管这很可能是使用普通的 PHP 和任何好的网络服务器主机完成的。例如，所有印度火车时刻表都可以在 indianrail.gov 网站上找到。

将专门构建的 URL 发送到 ..

```
http://www.indianrail.gov.in/cgi_bin/inet_trnnum_cgi.cgi?lccp_trnname=1123 
```

使用发送表单数据的 POST 方法应该会为您提供**1123**号列车的所有详细信息，然后它就变成了整理结果以存储在数据库中的简单任务。

更新：装备精良的站点检查用户代理和入站请求的引用者。

修正：indianrail.gov 网站正在更改为[http://www.trainenquiry.com/](http://www.trainenquiry.com/) -> 将不得不再看看

# iphone - iPhone 结构 ViewController

> ID：11280366
> 
> 赞同：-1
> 
> 时间：2012-07-01T07:48:04.410
> 
> 标签：iphone, xcode, view, controller, structure

我正在设计一个带有主页的 iPhone 应用程序。此页面有多个按钮 (6)，用于不同的事情。

2 个按钮是一个简单的视图，只有一些信息并返回主屏幕。下一个按钮打开一封电子邮件，我相信这只是一个视图，因此与其他两个没有太大不同。

这就是它变得复杂的地方。一个按钮将拍照，另一个按钮将从库中选择一张。完成后，它将对其进行编辑并创建一个我将创建的对象。该对象将存储在一个数组中，该数组将由主页的最后一个按钮打开，UITableViewController 将控制它。

我的**第一个问题**是我应该使用基于导航的视图控制器还是只使用我可以自己创建的视图控制器？或者我应该使用我什至不知道的东西？

请帮忙！！！如果您能帮上忙，真诚的谢谢您！

编辑：

好吧，我首先尝试了自己的方式，我遇到的唯一问题是这段代码

```
- (void) displayView:(int)intNewView { 
    NSLog(@"%i", intNewView);
    [home.view removeFromSuperview];
    Instructions *i = [[Instructions alloc]init];
    instructions = i; 
    [self.view insertSubview:instructions.view atIndex:0]; 
} 
```

它在我的 SwitchClass 中，它控制主窗口的视图。我知道它在那里工作，因为当它第一次运行时，开关类将它引导到主屏幕。我知道正在调用该方法，因为控制台正在显示 NSLog 的东西，但它不会切换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T08:02:42.677

除了你有 6 个按钮之外，我会尝试使用 UITabBarController 来完成你想要做的事情；这对我来说似乎更自然（但你应该找到一种方法将你的 6 个按钮减少到 5 个，否则它们不会一次全部显示出来）。

否则， UINavigationController 对我来说似乎很好。对于每个按钮，您按下一个新控制器来处理该按钮功能，然后您弹回。它应该很容易工作。

编辑：

你试过吗？

```
[self.view addSubview:instructions.view]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T08:06:53.423

你的第一个问题是的，你应该使用基于导航的控制器......所以当你按下任何按钮时，将打开另一个带有动画的视图控制器。如果你有任何创建的对象，基于导航的控制器也会跟踪父控制器。作为导航根的父视图控制器。

这是您应该使用的步骤。

1-在主应用程序委托中创建导航控制器并使其根为视图控制器。

2-当您按下具有 6 个按钮的视图控制器时。

3-如果您已将源类型更改为相机，您也可以查看此链接以获取相册，然后您可以获得图像... [Photo Libaray](https://stackoverflow.com/questions/676039/photo-library-view-stays-on-screen-after-choosing-an-image-with-uiimagepickercon?rq=1)

4-一旦您获得图像，您可以将其添加到存在于 NavigationViewController 根目录中的 NSMutableArray 中，在您的情况下将是具有 6 个按钮的视图。

5-sice 每次您想查看包含照片的数组时，您将使用保存照片的数组初始化 uitableviewcontroller 的数据源。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T21:12:16.990

我认为问题出在以下两个地方之一：

据我了解，这些都是不同的视图控制器，对吗？他们有自己的xib文件吗？如果这是真的，那么调用：

> 指令 *i = [[指令分配]init];

是不够的。你需要使用

```
 Instructions *i = [[Instructions alloc] initWithNibNamed:@"Instructions"]; 
```

为了包含您已经在界面构建器中构建的视图。

我认为可能出错的另一件事是您将所有视图插入到同一索引中。将索引视为 Photoshop 中的一个图层。如果您希望新视图在最后一个视图之上可见，则它需要更高的索引。如果您使用`addSubview:`而不是，这将自动处理`insertSubview: atIndex:`

# php - 数组推送错误

> ID：11280368
> 
> 赞同：1
> 
> 时间：2012-07-01T07:48:47.143
> 
> 标签：php, arrays

我在使用 array_push 时遇到问题。它正在显示`"Parse error: syntax error, unexpected T_DOUBLE_ARROW"`变量 $vars 是贝宝的关联数组。

```
array_push($vars,
'item_number'.$num => $id,
'item_name'.$num => $cart_item->name,
'amount_'.$num => $cart_item->discount_price,
'quantity_'.$num => $value);

$vars = array (
'cmd' => '_cart',
'charset' => 'utf-8',
'upload' => '1',
'currency_code' => 'HKD',
'amount' => $_SESSION['total'],
'custom' => $user_data->id) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T07:52:25.060

该`=>`语法仅在定义数组时有效。`array_push`只能用于推送带有自动递增数字键的元素。

也许你可以使用`array_merge`：[http ://www.php.net/manual/en/function.array-merge.php](http://www.php.net/manual/en/function.array-merge.php)

```
$vars = array_merge( $vars, array(
    'item_number'.$num => $id,
    'item_name'.$num => $cart_item->name,
    'amount_'.$num => $cart_item->discount_price,
    'quantity_'.$num => $value
)); 
```

或者您可以使用运算符，认为它的行为[与 PHP 中数组的](https://stackoverflow.com/questions/2140090/operator-for-array-in-php): + 运算符`+`完全不同？`array_merge`

```
$vars =  $vars + array(
    'item_number'.$num => $id,
    'item_name'.$num => $cart_item->name,
    'amount_'.$num => $cart_item->discount_price,
    'quantity_'.$num => $value
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T07:54:41.043

来自php手册：

如果您打算`array_push()`将一`"key" => "value"` 对插入数组中，可以使用以下方法完成：

```
$data[$key] => $value; 
```

没有必要使用 array_push

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T07:51:17.140

您正在将一个数组推入堆栈，因此您的代码应该反映这一点

```
array_push($vars, array(
                     'item_number'.$num => $id,
                     'item_name'.$num => $cart_item->name,
                     'amount_'.$num => $cart_item->discount_price,
                     'quantity_'.$num => $value
                  )
); 
```

# java - tomcat实例之间通信（分布式架构）

> ID：11280369
> 
> 赞同：2
> 
> 时间：2012-07-01T07:48:55.347
> 
> 标签：java, tomcat, distributed

我们有一个分布式架构，我们的应用程序在四个 Tomcat 实例上运行。我想知道可用于在这些 Tomcat 实例之间进行通信的各种选项。

详细信息：假设用户发送停止侦听传入队列的请求，这需要与其他 Tomcat 实例进行通信，以便它们也停止侦听器。如何跨 Tomcat 进行这种通信？

谢谢， 米顿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:01:44.747

看起来你正面临协调问题。

我建议您使用[Apache ZooKeeper](http://zookeeper.apache.org/)来解决此类问题。考虑将您的配置放入 ZooKeeper。ZooKeeper 允许您*监视*更改，如果 ZooKeeper 中的配置发生更改，则将通知 tomcat 实例，并且您可以调整应用程序在每个节点上的行为。

不过，您可以使用任何类型的外部持久存储来解决此问题。

其他可能的方法是自己实现 tomcat 节点之间的通信，但在这种情况下，您将在管理部署拓扑时遇到问题：每个 tomcat 节点都应该知道集群中的其他节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T15:01:45.210

我们在这种情况下使用[Hazelcast 。](http://www.hazelcast.org)他们有一个方便的[Http Session Clustering](http://www.hazelcast.com/docs/2.1/manual/multi_html/ch10.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T08:02:05.930

表面上是 RMI，HTTP 请求。同样，恕我直言，您可以尝试使用 MBean。还有一件事，你可以使用一些非java相关的东西，比如DBus之类的，甚至是平面文件……如果所有的tomcat都在同一台机器上运行。很多选择...

# visual-studio-2010 - 我可以在 VisualStudio 中编写 OCaml

> ID：11280370
> 
> 赞同：1
> 
> 时间：2012-07-01T07:48:59.887
> 
> 标签：visual-studio-2010, ocaml

我找到了一个叫 Visual ML 的插件

[http://caml.inria.fr/cgi-bin/hump.en.cgi?contrib=62](http://caml.inria.fr/cgi-bin/hump.en.cgi?contrib=62)

但我找不到下载链接

我可以使用其他插件吗？

# php - 在 OpenCart 中添加新实体

> ID：11280373
> 
> 赞同：0
> 
> 时间：2012-07-01T07:49:10.117
> 
> 标签：php, opencart

我想知道是否可以在 OpenCart 中添加新实体（类/表）来存储默认功能中未包含的信息。更准确地说，我想添加订阅（3/6/12 个月）相关信息，如下所述： [OpenCart 订阅模型（x 个月）](https://stackoverflow.com/questions/11244247/opencart-subscription-model-x-months)

如果是，我可以为新课程添加管理页面吗？会像：[如何在 opencart 中创建自定义管理页面？](https://stackoverflow.com/questions/10700761/how-to-create-a-custom-admin-page-in-opencart)工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:41:52.353

您需要创建一个

1.  模板文件 (.tpl)
2.  控制器文件 (.php)
3.  模型文件 (.php)
4.  语言文件 (.php)

所有文件都以不同的扩展名命名，并位于各自的文件夹中

您还需要在数据库中添加更多列，这些列以您要存储的附加设置命名。

除了页面特定设置之外，您还需要在菜单的头文件中添加指向页面的链接。

您将使用模型文件在数据库中插入、更新和删除数据。控制器控制使用模型中的哪些功能。

创建后，在管理员/用户组权限中，您需要授予对新页面的访问权限

查看现有文件以了解其工作原理。复制更简单的 4 个文件之一，重命名，然后开始修改它们。

如果您只想向现有页面添加更多设置，则可以将它们添加到现有的 4 个文件并在数据库中添加列。

希望对您有所帮助，祝您好运！

# javascript - 是否可以使用 JS 或 jQuery 为 DIV 编写 onFocus/lostFocus 处理程序？

> ID：11280379
> 
> 赞同：12
> 
> 时间：2012-07-01T07:51:39.840
> 
> 标签：javascript, jquery, onfocus, lost-focus

我有一个 div，当用户单击 div 时，应该调用一个函数。当用户点击其他东西（除了这个 div 之外的任何东西）时，应该调用另一个函数。

所以基本上我需要有与这个 DIV 关联的 onFocus() 和 lostFocus() 函数调用。它在 JavaScript 甚至 jQuery 中可用吗？

谢谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-01T08:08:04.803

您需要将`tabindex`属性添加到`div`：

```
$("#mydiv").focusin(function() {
  $("#mydiv").css("background", "red");
});
$("#mydiv").focusout(function() {
  $("#mydiv").css("background", "white");
});
```

```
#mydiv {
  width: 50px;
  height: 50px;
  border: 1px solid red;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div id="mydiv" tabindex="100"></div>
<div id="anotherdiv"></div>
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-01T07:56:09.387

焦点不起作用`DIV`：[http ://api.jquery.com/focus/](http://api.jquery.com/focus/)

另请阅读：[jquery：对 div 的关注不起作用](https://stackoverflow.com/questions/5965924/jquery-focus-to-div-is-not-working)

```
If you want to focus a div or anything normally can't be focused, set the tag's tabindex to -1 first.
eg: $("div#header").attr("tabindex",-1).focus(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T08:04:25.813

不确定此解决方案是否适合您的网页，但您可以使用 JQuery on() 将点击事件附加到 body 元素并将其委托给子 div。然后在您的事件处理程序中，测试 id 属性并按此处理；就像是：

```
$(body).on("click", "div", function (evt) {
     if ($(this).attr("id") == "innerDiv") {
            handle inner div click here
     } else {
            hanlde out div click here
     {
} 
```

希望这可以帮助...

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-01T07:56:23.113

当然。

```
$("#your-div-id").focusin(function() {
    // code here
});

$("#your-div-id").focusout(function() {
    // code here
}); 
```

# c# - 在 Windows Phone 上使用 MVVM 制作列表框页面导航的正确方法

> ID：11280380
> 
> 赞同：0
> 
> 时间：2012-07-01T07:51:42.353
> 
> 标签：c#, mvvm, windows-phone

我正在为 Windows Phone 构建一个应用程序，在这个应用程序中，我有一个带有标题、情节和图片的电影列表。我将此列表绑定到具有自定义 DataTemplate 的 ListBox，用于显示数据的项目。我还创建了第二个页面来显示每部电影的详细信息。我现在的问题是这些页面之间的导航。我正在使用 MVVM 构建应用程序，我在互联网上搜索的大多数方法是在代码隐藏中使用 OnSelectionChanged 事件，但这与我想要的相反，即使用 MVVM。

我见过的其他方法，这是我正在尝试的方法，是将 SelectedItem 绑定到 ViewModel 中的属性，但我无法让它更改属性，似乎我无法在列表框中选择一个项目. 此外，当我按下列表框中的一项时，我没有视觉反馈，例如我们在手机设置菜单中的反馈。

我在列表框中使用的代码是：

```
<ListBox Margin="0,0,-12,0" ItemsSource="{Binding Movies}" SelectedItem="{Binding SelectedMovieItem}" SelectionMode="Single" >
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,17">
                            <!--Replace rectangle with image-->
                            <Rectangle Height="50" Width="50" Fill="#FFE5001b" Margin="12,0,9,0"/>
                            <StackPanel Width="311">
                                <TextBlock Text="{Binding Name}" TextWrapping="NoWrap" Style="{StaticResource PhoneTextExtraLargeStyle}" Foreground="#000" />
                                <!--<TextBlock Text="{Binding LineTwo}" TextWrapping="Wrap" Margin="12,-6,12,0" Style="{StaticResource PhoneTextSubtleStyle}"/>-->
                            </StackPanel>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> 
```

我见过的另一种方法是使用 INavigationService 来实现这一点，我发现这篇文章： http: [//windowsphonegeek.com/articles/MVVM-in-real-life-Windows-Phone-applications-Part1](http://windowsphonegeek.com/articles/MVVM-in-real-life-Windows-Phone-applications-Part1) 我阅读了第一个部分和两个，但我无法理解这个工作。

所以，我想知道的是我使用的方法是否适合进行页面导航，或者是否有更好的方法使用 MVVM 来通过列表框上的视觉反馈来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T08:32:31.853

为什么在针对 MVVM 的代码中处理事件？处理事件交互是 UI 的一部分。当然，您不会在那里编写所有逻辑代码。但是您只是想转到下一页。我做这样的事情：

```
 private void MainListBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        // If selected index is -1 (no selection) do nothing
        if (MainListBox.SelectedIndex == -1)
            return;

        // Navigate to the new page
        NavigationService.Navigate(new Uri("/Views/detailsPage.xaml?selectedItem=" + MainListBox.SelectedIndex, UriKind.Relative));

        // Reset selected index to -1 (no selection)
        MainListBox.SelectedIndex = -1;
    } 
```

# javascript - Google Drive API JavaScript - 插入文件

> ID：11280381
> 
> 赞同：3
> 
> 时间：2012-07-01T07:52:04.797
> 
> 标签：javascript, google-drive-api

我正在尝试“插入”一个云端硬盘文件。我已经进行了身份验证，它工作正常:)

但是当我尝试从 JS 创建（插入）一个新文件时，它会创建一个文件，但是一个名为“Untitled”的文件根本没有扩展名。（我的文件系统上有一个同步文件夹，也是一样的）。

我的代码是这样的：

```
 function createNewFile(  ) {
    gapi.client.load('drive', 'v2', function() {
    var request = gapi.client.drive.files.insert ( {
        "title" : "cat.jpg",
        "mimeType" : "image/jpeg",
        "description" : "Some"
        } );
    request.execute(function(resp) { console.log(resp); });
    });
 } 
```

关于什么是错的任何想法？我可以从 JS 的驱动器中列出文件，这段代码创建了这个“无标题”并且没有扩展文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T11:33:11.840

我有这样的工作：

```
function createNewFile(  ) {

    gapi.client.load('drive', 'v2', function() {

       var request = gapi.client.request({
        'path': '/drive/v2/files',
        'method': 'POST',
        'body':{
            "title" : "cat.jpg",
            "mimeType" : "image/jpeg",
            "description" : "Some"
         }
     });

      request.execute(function(resp) { console.log(resp); });
   });
} 
```

请记住，如果`cat.jpg`已存在具有标题的文件，则此请求将创建另一个具有相同标题的文件，因为 Google Drive 中的文件具有唯一的文件 ID，内部引用这些文件 ID。

# python - 对象不是 JSON 可序列化的

> ID：11280382
> 
> 赞同：22
> 
> 时间：2012-07-01T07:52:12.490
> 
> 标签：python, json, mongodb, flask, pymongo

我在使用 Mongodb 和 Python (Flask) 时遇到了一些问题。

我有这个 api.py 文件，我希望所有请求和响应都在 JSON 中，所以我这样实现。

```
#
# Imports
#

from datetime import datetime
from flask import Flask
from flask import g
from flask import jsonify
from flask import json
from flask import request
from flask import url_for
from flask import redirect
from flask import render_template
from flask import make_response
import pymongo
from pymongo import Connection
from bson import BSON
from bson import json_util

#
# App Create
#

app = Flask(__name__)
app.config.from_object(__name__)

#
# Database
#

# connect
connection = Connection()
db = connection['storage']
units = db['storage']

#
# Request Mixins
#

@app.before_request
def before_request():
    #before
    return

@app.teardown_request
def teardown_request(exception):
    #after
    return

#
# Functions
#

def isInt(n):
    try:
        num = int(n)
        return True
    except ValueError:
        return False

def isFloat(n):
    try:
        num = float(n)
        return True
    except ValueError:
        return False

def jd(obj):
    return json.dumps(obj, default=json_util.default)

def jl(obj):
    return json.loads(obj, object_hook=json_util.object_hook)

#
# Response
#

def response(data={}, code=200):
    resp = {
        "code" : code,
        "data" : data
    }
    response = make_response(jd(resp))
    response.headers['Status Code'] = resp['code']
    response.headers['Content-Type'] = "application/json"
    return response

#
# REST API calls
#

# index
@app.route('/')
def index():
    return response()

# search
@app.route('/search', methods=['POST'])
def search(): 
    return response()

# add
@app.route('/add', methods=['POST'])
def add():
    unit = request.json
    _id = units.save(unit)
    return response(_id)

# get
@app.route('/show', methods=['GET'])
def show():
    import pdb; pdb.set_trace();
    return response(db.units.find())

#
# Error handing
#

@app.errorhandler(404)
def page_not_found(error):
    return response({},404)

#
# Run it!
#

if __name__ == '__main__':
    app.debug = True
    app.run() 
```

这里的问题是来自 mongo 的 json 编码数据。看来我已经能够通过将 request.json 作为保存字典来“破解”添加路由，所以这很好......问题是 /show。此代码不起作用...当我进行一些日志记录时，我得到

```
TypeError: <pymongo.cursor.Cursor object at 0x109bda150> is not JSON serializable 
```

有任何想法吗？我也欢迎对其余代码提出任何建议，但 JSON 让我很生气。

提前致谢！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-02T01:33:30.677

@ErenGüven 向您展示了一种很好的手动方法来解决此 json 序列化问题，而 pymongo 附带了一个[实用程序来为您完成此任务](http://api.mongodb.org/python/1.4/api/pymongo/json_util.html)。我在我自己的 django mongodb 项目中使用它：

```
import json
from bson import json_util

json_docs = []
for doc in cursor:
    json_doc = json.dumps(doc, default=json_util.default)
    json_docs.append(json_doc) 
```

或者简单地说：

```
json_docs = [json.dumps(doc, default=json_util.default) for doc in cursor] 
```

并再次从 json 中取回它们：

```
docs = [json.loads(j_doc, object_hook=json_util.object_hook) for j_doc in json_docs] 
```

辅助实用程序告诉`json`如何处理自定义 mongodb 对象。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-01T22:58:46.533

当您传递`db.units.find()`给`response`您时，您将[`pymongo.cursor.Cursor`](http://api.mongodb.org/python/current/api/pymongo/cursor.html)对象传递给`json.dumps`... 并且`json.dumps`不知道如何将其序列化为 JSON。尝试通过遍历光标来获取实际对象以获取其结果：

```
[doc for doc in db.units.find()] 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-09-17T04:55:30.577

```
import json
from bson import json_util

docs_list  = list(db.units.find())
return json.dumps(docs_list, default=json_util.default) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-02T01:14:03.933

要将 MongoDB 文档编码为 JSON，我使用了与下面的覆盖`bson.objectid.ObjectId`和`datetime.datetime`类型类似的方法。

```
class CustomEncoder(json.JSONEncoder):
    """A C{json.JSONEncoder} subclass to encode documents that have fields of
    type C{bson.objectid.ObjectId}, C{datetime.datetime}
    """
    def default(self, obj):
        if isinstance(obj, bson.objectid.ObjectId):
            return str(obj)
        elif isinstance(obj, datetime.datetime):
            return obj.isoformat()
        return json.JSONEncoder.default(self, obj)

enc = CustomEncoder()
enc.encode(doc) 
```

至于Cursor，则需要先对其进行迭代并获取文档。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-17T10:15:02.193

简短的回答：它是一个光标对象。迭代它，你会得到 python dicts。再次序列化这样做：

```
import json 
from bson import json_util 
```

假设这是我的查询：

```
details = mongo.db.details.find()
# this is cursor object

#iterate over to get a list of dicts
details_dicts = [doc for doc in details]

#serialize to json string
details_json_string = json.dumps(details_dicts,default=json_util.default) 
```

如果您希望返回上述内容，它将只是一个字符串。这样做以将其作为可用的 dict 或 json 返回

```
return json.loads(details_json_string)
#return jsonified version rather than string without  unwanted "\" in earlier json string! 
```

希望有帮助！快乐编码！

是的，普通的旧`jsonify`作品，如果您的查询不包含像 Objectid 等一些复杂的文件！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-13T03:58:42.177

以防万一您正在寻找一种更简单的 python 发送响应的方式，然后创建一个空列表并在其中附加值，最后以 JSON 格式返回此列表。

```
from flask import Flask, jsonify

@app.route('/view', methods=["GET'])
def viewFun():
   data = units.find()
   s = []
   for i in data:
      s.append(str(i))
   return jsonify(s) 
```

可能不是完美的，但它有效！

# python - Python - 从没有 numPy 的矩阵中删除列

> ID：11280388
> 
> 赞同：1
> 
> 时间：2012-07-01T07:52:55.097
> 
> 标签：python

这是我在这里的第一个问题。问题很简单——

```
# this removes the top list from the list of lists
triangle = [
[3, 0, 0],
[2, 0, 0],
[1, 0, 0]]
del triangle[0] 
```

我想要一种同样简单的方法来删除“列”。我当然可以使用 for 循环来做到这一点，但是有没有相当于

```
del triangle[0] 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T08:09:51.443

如果您想在不复制整个列表的情况下*就地执行此操作，那么类似*

```
all(map(lambda x: x.pop(which_column), triangle)) 
```

编辑。是的，如果列中有0，它将不起作用，只需使用任何其他累加器功能

```
sum(map(lambda x: x.pop(which_column), triangle)) 
```

对于`map`不需要迭代器累加器的python 2：

```
map(lambda x: x.pop(1), triangle) 
```

作为副作用，这将返回您可以使用的已删除列

```
deleted_column = list(map(lambda x: x.pop(which_column), triangle)) 
```

（对于 python 2 list() 不需要包装器）

更短的形式是

```
sum(i.pop(which_column) for i in triangle) 
```

或者

```
deleted_column = [i.pop(which_column) for i in triangle] 
```

虽然我不确定它是否符合“没有 for 循环”的条件

PS 在官方 Python 文档中，他们使用 0-lenqth deque 来使用迭代器，如下所示：

```
collections.deque(map(lambda x: x.pop(which_column), triangle), maxlen=0) 
```

不知道是不是比sum()好，但是可以用于非数值数据

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T07:57:40.963

一种方法是使用[*zip()*](http://docs.python.org/library/functions.html#zip)转置矩阵，删除目标行，然后将其压缩回去：

```
>>> def delcolumn(mat, i):
        m = zip(*mat)
        del m[i]
        return zip(*m)

>>> triangle = delcolumn(triangle, 1)
>>> pprint(triangle, width=20)
[(3, 0),
 (2, 0),
 (1, 0)] 
```

另一种方法是使用[列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)和[切片](https://stackoverflow.com/questions/509211/good-primer-for-python-slice-notation)：

```
>>> def delcolumn(mat, i):
        return [row[:i] + row[i+1:] for row in mat]

>>> triangle = delcolumn(triangle, 1)
>>> pprint(triangle, width=20)
[(3, 0),
 (2, 0),
 (1, 0)] 
```

*最后一种技术是使用del*就地改变矩阵：

```
>>> def delcolumn(mat, i):
         for row in mat:
             del row[i] 
```

# linux - 删除不包含特定字符串的文件

> ID：11280389
> 
> 赞同：17
> 
> 时间：2012-07-01T07:53:25.380
> 
> 标签：linux, bash, sed, grep

我想找到不包含特定字符串的文件（在目录及其子目录中）并删除这些文件。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-01T15:46:45.013

以下将起作用：

```
find . -type f -print0 | xargs --null grep -Z -L 'my string' | xargs --null rm 
```

这将首先使用 find 打印当前目录和任何子目录中所有文件的名称。这些名称使用空终止符而不是通常的换行符分隔符打印（尝试通过管道输出到`od -c`以查看`-print0`参数的效果。

然后`--null`参数`xargs`告诉它接受以空值结尾的输入。`xargs`然后将调用`grep`文件名列表。

`-Z`参数的`grep`工作方式与 的参数`-print0`类似`find`，因此 grep 将打印出以空值结尾的结果（这就是为什么最终调用也`xargs`需要一个`--null`选项的原因）。导致在其命令行（已添加）上打印与正则表达式**不**匹配的那些文件的文件名的参数`-L`：`grep``grep``xargs`

 **> 我的弦

如果您想要没有正则表达式魔法的简单匹配，请添加该`-F`选项。如果您想要更强大的正则表达式，请给出一个`-E`论点。使用单引号而不是双引号是一个好习惯，因为这可以保护您免受任何应用于字符串的 shell 魔法（例如变量替换）

最后，您`xargs`再次调用以删除您在先前调用中找到的所有文件。

`grep`直接从带有参数的`find`命令调用的问题是每个文件调用一次，而不是像整批文件那样调用一次。如果您有很多文件，这会**快得多。**也不要试图做类似的事情：`-exec``grep``xargs`

 **```
rm $(some command that produces lots of filenames) 
```

最好将它传递给它，`xargs`因为它知道最大命令行限制，并且`rm`每次都会使用尽可能多的参数调用多次。

请注意，此解决方案会更简单，无需处理包含空格和新行的文件。

或者

```
grep -r -L -Z 'my string' . | xargs --null rm 
```

也可以（而且更短）。`-r`参数使其读取目录中的`grep`所有文件并递归地下降到任何子目录）。`find ...`如果您还想对文件进行一些其他测试（例如年龄或权限），请使用该方法。

请注意，任何带有单个破折号介绍器的单个字母参数都可以组合在一起（例如 as `-rLZ`）。但还要注意，`find`它不使用相同的约定，并且使用单个破折号引入了多字母参数。这是出于历史原因，并且从未修复过，因为它会破坏太多脚本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-01T08:11:17.663

GNU grep 和 bash。

```
grep -rLZ "$str" . | while IFS= read -rd '' x; do rm "$x"; done 
```

`find`如果需要可移植性，请使用解决方案。这稍微快一些。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-01T08:02:39.520

**编辑：**这就是你**不应该**这样做的方式！原因在[这里](http://mywiki.wooledge.org/UsingFind#Actions_in_bulk%3a_xargs.2C_-print0_and_-exec_.2B-)给出。感谢@ormaaj 指出！

```
find . -type f | grep -v "exclude string" | xargs rm 
```

注意：`grep`模式将匹配当前目录的完整文件路径（见`find . -type f`输出）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-01T08:00:16.040

一种可能是

```
find . -type f '!' -exec grep -q "my string" {} \; -exec echo rm {} \; 
```

`echo`如果此预览的输出看起来正确，您可以删除。

等价`-delete`于

`find . -type f '!' -exec grep -q "user_id" {} \; -delete`

但是你没有得到很好的预览选项。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-01T08:18:38.800

我可以想出几种方法来解决这个问题。这是一个： find 和 grep 生成一个不匹配的文件列表，然后 xargs rm 它们。

```
find yourdir -type f -exec grep -F -L 'yourstring' '{}' + | xargs -d '\n' rm 
```

这假设 GNU 工具（grep -L 和 xargs -d 是不可移植的），当然没有包含换行符的文件名。它的优点是每个文件不运行 grep 和 rm 一次，所以它会相当快。我建议使用“echo”代替“rm”对其进行测试，以确保它在释放破坏之前选择正确的文件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-12-01T14:10:42.140

要删除不包含特定字符串的文件：

**重击：**

要使用它们，请启用 extglob shell 选项，如下所示：

```
shopt -s extglob 
```

只需删除所有没有字符串“fix”的文件：

```
rm !(*fix*) 
```

如果您不想删除所有没有名称“fix”和“class”的文件：

```
rm !(*fix*|*class*) 
```

**Zsh：**

要使用它们，请启用扩展 glob zsh shell 选项，如下所示：

```
setopt extended_glob 
```

删除所有没有字符串的文件，在本例中为“修复”：

```
rm -- ^*fix* 
```

如果您不想删除所有没有名称“fix”和“class”的文件：

```
rm -- ^(*fix*|*class*) 
```

可以将其用于扩展，您只需要更改正则表达式：（. *zip）、（* .doc）等。

以下是来源：

[https://www.tecmint.com/delete-all-files-in-directory-except-one-few-file-extensions/](https://www.tecmint.com/delete-all-files-in-directory-except-one-few-file-extensions/)

[https://codeday.me/es/qa/20190819/1296122.html](https://codeday.me/es/qa/20190819/1296122.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-22T14:58:51.413

这对我有用，如果您可以删除目录，则可以删除 -f 。

```
myString="keepThis"
for x in `find  ./`
    do if [[ -f $x && ! $x =~ $myString ]]
        then rm $x
    fi
done 
```****

# c++ - 我可以在 C++ 和 C 中使用 protobuf-c 吗？

> ID：11280390
> 
> 赞同：2
> 
> 时间：2012-07-01T07:53:33.937
> 
> 标签：c++, c

我是 protobuf-c 的新手我已经根据我的要求更改了 protobuf-c 客户端和服务器示例程序，我通过这个链接得到了这个程序

> [code.google.com/p/protobuf-c/wiki/RPC_Example](http://code.google.com/p/protobuf-c/wiki/RPC_Example)

现在我必须用 C++ 编写服务器端编程，我想在 C 本身中使用客户端程序，这是我的新要求

任何人都可以帮助我如何使用在 c++ 服务器端程序文件中使用 protobuf-c 编译的 .h 和 .c proto 文件
任何建议将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T07:26:53.143

正如@Konrad Rudolph 所指出的，protobuf 的全部意义在于使用不同语言的相同消息格式。因此，您执行以下操作：

1.  编写你的 .proto 文件
2.  使用 protobuf-c 编译此 .proto 文件以获取客户端代码，使用 protobuf (protoc) 编译服务器代码（这将是不同的类，但消息格式相同！）
3.  将客户端代码链接到 protobuf-c，将服务器代码链接到 protobuf

这将解决您的问题。

# android - Android 中的外部数据库访问

> ID：11280392
> 
> 赞同：1
> 
> 时间：2012-07-01T07:54:11.867
> 
> 标签：android, database

我可以从我的代码中与另一个应用程序的数据库通信吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T08:08:59.227

你不能。

[同样的问题](https://stackoverflow.com/questions/2335136/android-accessing-information-from-sqlitedatabase-in-other-classes)

但是你可以通过root手机试试

链接>>[链接](https://stackoverflow.com/questions/4742035/viewing-an-android-application-database)

从 SDCARD 读取数据库>>

查看数据库文件的位置然后在类中创建一个方法，方法如下：

```
public class DB_Path {
public final SQLiteDatabase getDB() {
        File dbfile = new File("path of file like : /sdcard/TheDataBaseFile");
        SQLiteDatabase db = SQLiteDatabase.openOrCreateDatabase(dbfile, null);
             return db;
    } 
```

## }

初始化像

```
 public DB_Path dbp = new DB_Path();
  public SQLiteDatabase db = dbp.getDB(); 
```

之后，您可以使用 db 调用游标。

```
 Cursor cur = db.rawQuery("the sql query",null); 
```

参考链接>>[链接](https://stackoverflow.com/questions/10481983/create-database-from-prestored-db-file-on-sdcard)

如何从数据库中获取表名>>[链接](https://stackoverflow.com/questions/4681744/android-get-list-of-tables)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T08:07:16.593

仅，如果该**数据库不是该应用程序的私有数据库**。（此外，如果您的设备已植根，那么您可以访问任何应用程序的数据库）此外，如果该数据库类似于内容提供程序，那么您可以在您的应用程序中访问其他应用程序的数据库。像 Android 原生电话簿数据库。（因为它使用他们的数据库作为内容提供者。）

# javascript - Fennec 中“webkit-tap-highlight-color”的等价物是什么？

> ID：11280398
> 
> 赞同：3
> 
> 时间：2012-07-01T07:55:07.423
> 
> 标签：javascript, html, css, mobile, fennec

我想禁用用户点击链接时显示的橙色突出显示。我认为 iOS 和 Android 浏览器通过使用“webkit-tap-highlight-color”来支持这一点。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-14T18:45:23.643

仅`document.querySelector("a, label, button")`将其 tagName 更改为其他，例如具有适当 aria 值的 span。您还需要更改 CSS。

Tap 颜色在 fennec/firefox 中是硬编码的，不能像 "::selection"/::-moz-selection 那样更改。另外 ::-moz-selection 不完整，因为它不会更改所选元素的图像背景。

可选：

```
div.tap-detector
{
   position:fixed;
   height:100%;
   top:0rem;
   left:0rem;
   width:100%;
   z-index:1000;
   overflow:hidden;
} 
```

并将所有 click、mousemove、mousedown 和 mouseup 事件（以及其他如果使用）从 div 重定向到它下面的元素。重定向点击不得使用点击突出显示。可能不需要捕捉的滚动手势 - 带有溢出：隐藏的元素对于滚动手势是“透明的”。

这不是一个明确的解决方案，只有在你必须因为你的老板抱怨时才使用。

# grails - Grails：使用一个控制器操作同时渲染两个视图

> ID：11280399
> 
> 赞同：2
> 
> 时间：2012-07-01T07:55:15.410
> 
> 标签：grails, view, controller

我的一个控制器的一项操作需要同时生成（重定向/渲染）两个单独的视图并将两个页面显示给客户端。这就像当用户提交他的信息时，页面将重定向到一个带有列表的新页面。**同时**另一个页面需要在包含一些附加信息**的新窗口中弹出**（用户将打印此页面）。我知道，我可以用单个页面解决问题，但我想知道是否有任何方法可以从单个控制器操作同时生成两个单独的页面/窗口。

感谢期待

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T15:29:58.623

简单回答是不。Grails 没有做任何神奇的事情。它仍然受限于正常的 HTTP 请求/响应生命周期。一个请求得到一个响应。您所要求的听起来像是您希望 grails 能够为单个 HTTP 请求生成 2 个响应，这是不可能的。响应要么是浏览器要呈现的页面，要么是浏览器转到另一个 URL 的重定向消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T08:13:49.817

您可以编写可以处理正常和 ajax 请求的操作。请参阅此处的文档： [响应 Ajax 和非 Ajax 请求](http://grails.org/doc/latest/guide/theWebLayer.html#ajaxOnTheServer)

然后你可以生成你的“正常”视图。之后，您通过在客户端使用 ajax 调用相同的操作并为您的弹出页面加载数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T15:15:33.297

为什么不在`<script>window.open()</script>`主视图中使用 a 来打开弹出窗口？

# java - 使用 JDOM 在 Java 中解析 XML（getChildren 方法不返回列表）

> ID：11280403
> 
> 赞同：1
> 
> 时间：2012-07-01T07:57:09.380
> 
> 标签：java, xml, jdom

对于根有 25 个孩子的 xml 文件，getChildren 方法返回 list.size= 0 ！！

这是我的代码：

```
public static void main(String[] args) {

  SAXBuilder builder = new SAXBuilder();
       File xmlFile = new File("g:\\*");
        try {

    Document document = (Document) builder.build(xmlFile);
    Element rootNode = document.getRootElement();
    List list = rootNode.getChildren("job",Namespace.getNamespace("Montage"));

    for (int i = 0; i < list.size(); i++) 
                {

       Element node = (Element) list.get(i);
               System.out.println("ID : " + node.getAttributeValue("id"));
       System.out.println("Run Time : " + node.getAttributeValue("runtime"));
            }
        }
             catch (IOException io) {
    System.out.println(io.getMessage());
  } catch (JDOMException jdomex) {
    System.out.println(jdomex.getMessage());
  }

    } 
```

这里是xml文件的部分：

```
<adag xmlns="http://pegasus.isi.edu/schema/DAX"    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://pegasus.isi.edu/schema/DAX http://pegasus.isi.edu/schema/dax-2.1.xsd" version="2.1" count="1" index="0" name="test" jobCount="25" fileCount="0" childCount="20">
 <job id="ID00000" namespace="Montage" name="mProjectPP" version="1.0" runtime="13.39">
  <uses file="region.hdr" link="input" register="true" transfer="true" optional="false" type="data" size="304" /> 
  <uses file="2mass-atlas-ID00000s-jID00000.fits" link="input" register="true" transfer="true" optional="false" type="data" size="4222080" /> 
  <uses file="p2mass-atlas-ID00000s-jID00000.fits" link="output" register="true" transfer="true" optional="false" type="data" size="4167312" /> 
  <uses file="p2mass-atlas-ID00000s-jID00000_area.fits" link="output" register="true" transfer="true" optional="false" type="data" size="4167312" /> 
  </job> 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T08:08:47.000

您的`job`元素有一个名为 的属性`namespace`，其值为“Montage”，但这不会使作业元素成为“Montage”命名空间的一部分。

只需使用

```
List list = rootNode.getChildren("job"); 
```

# php - url 扰乱了 php 中的布局

> ID：11280408
> 
> 赞同：3
> 
> 时间：2012-07-01T07:57:55.160
> 
> 标签：php, html, layout

## 我只在 .htacess 文件中发现了问题，但没有找到解决方案

```
RewriteRule ^test/(.*)?$ findjob4.php?skills=$1
RewriteRule ^test-(.*)?$ findjob4.php?skills=$1

URL 1 : www.example.com/test-software
URL 2 : www.example.com/test/software 
```

使用`URL 2`时，页面的布局会受到干扰，当我使用`URL 1`它时效果很好（不是一个错误）。任何人都可以让我知道，为什么以及是什么问题

刚刚在上面添加了新查询

* * *

我使用 .htacess 和正常的 url 写入时出错

## .htacess

```
RewriteRule ^search-jobs/(.*)?$ findjob4.php?skills=$1 
```

## findjob4.php

```
<?php
    if (isset($_GET['skills']) or !empty($_GET['skills'])) {
        $d_skills = $_GET['skills'];
        $d_skills = str_replace('-', ' ', $d_skills);
    } else {
        $d_skills = ""; 
    }   
    $d_location = "texas";
    $page = 1;
?>

<?php require('header.php'); ?>

<div id="container">
    <?php  do_job_search6($d_skills, $d_location, $page); ?>
</div>
<?php require('footer.php'); ?> 
```

现在，当我打开具有 `findjob4.php?skills=software`完美显示布局的 url 时。

那么`search-jobs/software`结果很好，但布局主要分布在页脚区域。

当我在标签下和标签下使用`Developer Tools`时`Chrome`，`Inspect Element`我`console` 看到了

```
Resource interpreted as Image but transferred with MIME type text/html: "http://localhost/example/search-jobs/software/images/loadingAnimation.gif" 
```

并且这个错误是连续流动的..页脚的内容随着主容器的空内容而改变..

## Javascript：jQuery库错误

```
(anonymous function)
jQuery.Callbacks.fire
jQuery.Callbacks.self.fireWith
jQuery.extend.ready 
```

我有一张图片供下面参考。

## 图片1

![在此处输入图像描述](../Images/1db6cfcc2a7b0a516c1b1531b4c4acbd.png)

## 图片2

![在此处输入图像描述](../Images/368137e96582afebdc59af42b9ed612b.png)

下面是`ROOT_URL`常数，我用于路径。

```
<?php
    define('ROOT_DIR', dirname(__FILE__));
    define('ROOT_URL', substr($_SERVER['PHP_SELF'], 0, - (strlen($_SERVER['SCRIPT_FILENAME']) - strlen(ROOT_DIR))));
?> 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-01T08:02:37.677

使用图像的绝对路径而不是相对路径。

```
<img src="http://localhost/example/images/loadingAnimation.gif" /> 
```

与

```
<img src="images/loadingAnimation.gif" /> 
```

# c# - 使用 Server.Transfer() 返回时出错

> ID：11280412
> 
> 赞同：3
> 
> 时间：2012-07-01T07:59:34.930
> 
> 标签：c#, asp.net, .net

我有页面（Default1.aspx），我使用`Server.Transfer()`方法重定向到另一个页面（Default2.aspx）。在 Default2.aspx 中完成页面处理后，执行返回到 Default1.aspx，但当时我得到了异常：

> 无法计算表达式，因为代码已优化或本机框架位于调用堆栈顶部。

为什么我会得到这个，在使用该方法时如何避免这种情况`Server.Transfer()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T08:13:44.107

尝试改用 Server.Execute 方法。如果有帮助，可能是您遇到了[http://support.microsoft.com/kb/312629/en-us中描述的情况](http://support.microsoft.com/kb/312629/en-us)

# google-app-engine - appengine的数据存储如何查询和索引多值属性？

> ID：11280414
> 
> 赞同：2
> 
> 时间：2012-07-01T08:00:00.910
> 
> 标签：google-app-engine, indexing, datastore

假设我有一个 Photo 类，其中包含标签的多值属性和日期字段。

我想允许用户执行基于标签的查询（对于超过 1 个标签仅使用 AND 运算符）。

例如，假设用户搜索下雨天。从照片中选择 * 其中 tag='clouds' AND tag='rainy'

之字形合并如何工作？我知道执行了两次扫描，并且基于两个搜索的键是否指向同一张照片，然后返回。然而，这会同时发生吗？例如：当搜索 1 找到一张包含标签“云”的照片时，搜索 2 正在找到第一张包含标签“下雨”的照片。当两个搜索都完成后，它就变成了同步的。然后搜索 1 继续它的扫描，直到它击中与 S2 相同的键。那么当每次搜索的键相同时，返回照片，每次搜索时“光标”移动 1 步？

其次，定义多个索引会加速这类查询吗？例如，如果我想允许最多 4 个标签，那么我需要定义索引，例如： Index(Photo) Index(Photo, tag) Index(Photo, tag,tag) Index(Photo, tag,tag,tag) Index(Photo, tag,tag,tag,tag) 那么，执行上面相同的查询会更快吗？

另外，使用我们的原始查询，假设我们有数百万张照片被标记为多云，但只有两张被标记为下雨。这是否意味着之字形将执行相对较慢？由于其中一个搜索将尝试找到匹配的存在吗？更糟糕的是，如果我们有一百万张照片被标记为“下雨”，而一百万张照片被标记为“多云”，但没有一张照片同时包含这两个标签。定义上述索引会解决这个问题吗？

最后，假设一张照片有 100 个标签。这是否意味着以上所有索引都必须包含 100 个标签的每个组合？

我知道有 got-yas（比如一个实体只能被索引 5000 次，而单个多值属性只能被索引 1000 次）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:55:37.760

> 之字形合并如何工作？

您可以观看 2009 年的 Google I/O 视频，内容是[在 App Engine 上构建可扩展的复杂应用程序](http://www.google.com/events/io/2009/sessions/BuildingScalableComplexApps.html)。Brett Slatkin 从 27 分钟开始解释 zig-zag 合并的工作原理。正如他所说，“如果不展示它是如何工作的，我无法真正解释它。”

# css - 隐藏顶级列表项

> ID：11280415
> 
> 赞同：3
> 
> 时间：2012-07-01T08:00:06.600
> 
> 标签：css, html-lists

我正在寻找一种纯 CSS 解决方案来隐藏无序列表中的顶级列表项。例如：

*   顶级项目 1
*   顶级项目 2
    *   子项 1
    *   子项 2
    *   分项 3
*   顶级项目 3

变成...

*   子项 1
*   子项 2
*   分项 3

最初我想我这会很简单。我创建了一个像这样的简单小例子......

```
<ul>
  <li> Top level item 1
  <li> Top level item 2
  <ul>
    <li> Sub item 1
    <li> Sub item 2
    <li> Sub item 3
  </ul>
  <li> Top level item 3
</ul> 
```

使用类似...

```
.menu ul{
    display:none;
}
.menu ul li ul{
    display:inline-block;
} 
```

...但似乎如果父 ul 被隐藏，那么我无法显示子 ul。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T08:11:44.953

我认为在不需要更改结构的 javascript 和 html 的情况下做你想做的事情的唯一方法就是这样。

[演示](http://jsfiddle.net/2SS9k/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T08:26:06.287

实际上，正如您所知道的并且您已经尝试过，实际上您想要的 CSS 是不可能的，但是如果您只是想这样做，那么下面是一些方法，但我认为它不能满足您的需求：

**方法1** [http://jsfiddle.net/surendraVsingh/2SS9k/1/](http://jsfiddle.net/surendraVsingh/2SS9k/1/)

```
ul > li {
  text-indent: -9999px;
  line-height: 1px;
}

ul > li > ul >li{
    text-indent: 0;
    line-height: 20px;
} 
```

# python - 如何检查mpd是否正在播放或停止？

> ID：11280420
> 
> 赞同：0
> 
> 时间：2012-07-01T08:00:30.593
> 
> 标签：python, linux

我`python-mpd`用来获取当前正在播放的歌曲艺术家和标题。我能够成功地做到这一点。

问题是在我停止播放歌曲之后，`mpc stop`而不是尝试获取当前正在播放的歌曲信息，它会显示最后播放的歌曲信息。

*获取歌曲信息*

```
>>> client.currentsong()['artist']
'Sean Paul feat. Alexis Jordan' 
```

*现在在我使用 mpc stop*

```
>>> client.currentsong()['artist']
'Sean Paul feat. Alexis Jordan'
>>> 
```

所以，我的问题是如何确保 mpd 当前正在播放或停止？

我需要的是，`mpc stop`当我尝试获取歌曲信息后，它应该显示出来`None`，或者是否有类似`if mpd_playing()`.

我试图查看[`python-mpd`](https://github.com/magcius/python-mpd/blob/d75c186aed6aa613e5f8c6e379d6f9d39e844c5b/mpd.py)脚本，但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T09:29:35.560

```
>>> status = client.status()
>>> status['state']
'play'
# or
'pause'
# or
'stop' 
```

所以这是你需要的条件：

```
if client.status()['state'] in ('play', 'pause'):
    #playing
else:
    #stopped 
```

# php - PHP - 显示从 MySQL DB 检索到的乌尔都语文本

> ID：11280421
> 
> 赞同：9
> 
> 时间：2012-07-01T08:00:40.993
> 
> 标签：php, mysql, database, functional-programming

MySQL 数据库中存储有乌尔都语的书名。我必须使用 PHP 在 html 页面上显示。

目前仅显示问号 ( `??????`) 来代替乌尔都语文本。

```
<div class='product_title'><a href='details.php?pid=".$Row['s_id']."'>".$Row["books"]."</a></div> 
```

需要做什么才能正确显示这些字符？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-01T08:42:45.130

步骤：1 - 转到表结构并将排序**规则 latin1_swedish_ci**更改为**utf8_general_ci**

第 2 步 - 您必须在数据结果页面中包含以下标签。

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

步骤：3 - 插入“N”前缀。这里的 N 代表国家语言字符集。这意味着您正在传递 NCHAR、NVARCHAR 或 NTEXT 值[等](http://databases.aspfaq.com/general/why-do-some-sql-strings-have-an-n-prefix.html)

步骤：4 - PHP 代码显示记录表格数据库。在此之前您必须指定 mysql_query() 函数数据字符集类型

```
<?php
include('db.php');
mysql_query ("set character_set_results='utf8'"); 
$query = mysql_query("SELECT * FROM books") or die(mysql_error());
while($row=mysql_fetch_array($query))
{
echo $row['id']; // Book id 
echo $row['books_title']; // Book title
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T09:06:34.927

此外，您的文件编码必须是没有 BOM 的 utf-8

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-03T18:04:46.960

我遇到了同样的问题，并通过操纵整个 PHP-MySQL 环境的字符编码来解决。

默认情况下，PHPMyAdmin 中的字符集编码一般为拉丁瑞典语或一般 utf8，但字符集编码不支持乌尔都语、中文等其他语言，因此您需要更改您的 MySQL 数据库或表的字符编码或根据您的要求列。

```
# For each database:
ALTER DATABASE database_name CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci;
# For each table:
ALTER TABLE table_name CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;
# For each column:
ALTER TABLE table_name CHANGE column_name column_name VARCHAR(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;
# (Don’t blindly copy-paste this! The exact statement depends on the column type, maximum length, and other properties. The above line is just an example for a `VARCHAR` column.) 
```

您还需要为使​​用 mysqli_query 检索的数据设置字符编码。您可以使用连接线下方的 mysqli_charset() 函数来实现。喜欢...

```
 // Create connection
$conn = mysqli_connect($servername, $username, $password, $dbname);

/* change character set to utf8mb4 */
mysqli_set_charset($conn,"utf8mb4"); 
```

现在您可以通过 PHP Query 从 MySQL 数据库中检索直接显示乌尔都语或任何其他语言。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-21T12:09:03.360

我遇到了这个问题，我通过将它们转换为 UTF-8 解决了这个错误。

```
ALTER TABLE test_Table_name CONVERT TO CHARACTER SET utf8 COLLATE utf8_general_ci;

ALTER TABLE test_Table_name DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;

ALTER TABLE test_Table_name CHANGE title title VARCHAR(100) CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

# javascript - 用自定义类型包装 document.createElement()

> ID：11280423
> 
> 赞同：0
> 
> 时间：2012-07-01T08:01:07.210
> 
> 标签：javascript, wrapper

我想制作一个基本上`<div>`用一些自定义样式选项包装标签的视口类型，但我不确定如何将元素方法添加到我的视口类型，我正在尝试这样的事情：

```
var viewport = function(){
    document.createElement.call(this, 'div');
    // additional custom properties...
    this.customStuff = ExtraProperty;
}

//would this work?
viewport.prototype = Object.create(document.createElement.prototype);

// additional custom methods...
viewport.prototype.constructor = viewport; 
```

我希望我的视口对象能够像 Element 对象一样使用。所以我可以这样打电话：

```
var myVP = new viewport();
myVP.appendChild(someotherElementType); 
```

我只是不确定如何正确/有效地包装 document.createElement，因为我不确定 .appendChild 和其他方法在哪里等。如果它像典型的构造函数一样使用，我知道我可以使用上面的模式，但正如你不需要写`new document.createElement('type');`我不确定。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T09:25:43.560

1.  `document.createElement`应始终在文档的上下文中执行。在这里使用`.call`or`.apply`没有意义。
2.  使用创建的元素`document.createElement`不继承自（它甚至不是构造函数！）**。**`document.createElement.prototype`DOM 元素正在实现*接口*。当一个方法/属性都在 和 上定义时`Node`，`Element`则 from`Element`优先。一般来说，这应该是“继承”的顺序：
    [Node](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-1950641247) > [Element](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-745549614) > [HTMLElement](http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#htmlelement) > HTML *Name* Element。

当您想添加自定义属性时，请扩展这些原型之一，例如

```
Node.prototype.foo = 1;
console.log(document.createElement('div').foo); //"1" 
```

但是这些不能用作构造函数：

```
new HTMLDivElement; // TypeError: HTMLDivElement.prototype is not a constructor
Object.create(HTMLLIElement).innerHTML; // undefined
Object.create(HTMLAnchorElement).href ; // undefined 
```

但是您不能通过定义全局 HTML*名称*元素对象来创建自定义元素：

```
window.HTMLHelloElement = HTMLDivElement; // Expected: Create alias for div
document.createElement('hello');          // Result: [object HTMLUnknownElement] 
```

兼容性：

*   IE 7- 不公开任何可继承的原型
*   IE8：元素仅继承自`Element.prototype`.
*   IE9+ / Chrome 1+ / Firefox 1+ / Opera 8+ / Safari 3+：遵循标准。

* * *

> “我想制作一个基本上用一些自定义样式选项包装标签的视口类型”

类名和 CSS 更适合定义类特定的样式。例如：

```
var foo = document.createElement('div');
foo.className = 'type-viewport';       // CSS style sheet: .type-viewport { ... } 
```

# ios - 需要澄清在 iOS 中使用视图

> ID：11280428
> 
> 赞同：-2
> 
> 时间：2012-07-01T08:01:44.537
> 
> 标签：ios, uiview, drawrect, cs193p, cgcontextref

好的，我正在通过斯坦福大学在 iTunes U (CS193P) 上的在线课程学习 iOS 编程，但我无法完全掌握 UIView 的所有内容是如何工作的。

有人可以解释以下事物如何紧密结合以及我应该如何使用它们吗？

CGContextRef CGContext（如果它们不是同一个东西）drawRect awakeFromNib

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T08:10:37.620

```
CGContextRef 
```

只是参考

`CGContext`.

```
drawRect 
```

使您的视图在选定的矩形上绘制（或重绘）自身。[在这里阅读。](http://cocoadev.com/wiki/DrawRect) 我从来没有自己使用过它，对我来说它足以完成所有的`viewWillAppear:`工作`viewDidLoad:`。

**连接所有出口和操作后，nib 加载器将 awakeFromNib 发送到 nib 中的每个对象。**(c)[在此处阅读。](http://cocoadev.com/wiki/AwakeFromNib)

# iphone - UIPanGestureRecognizer 不适用于按钮

> ID：11280436
> 
> 赞同：0
> 
> 时间：2012-07-01T08:03:04.690
> 
> 标签：iphone, c, uibutton

我遇到了 UIPanGestureRecognizer 的问题。假设我在添加第一个按钮时使用不同的标签动态添加 10 个按钮，然后尝试将其拖到其他地方，然后它可以正常工作。然后，如果我添加其他按钮，然后尝试拖动第二个按钮，那么它甚至可以正常工作，但是如果那时我会拖动第一个按钮，那么它不会被拖动。日志中显示的消息是忽略对 [UIPanGestureRecognizer setTranslation:inView:] 的调用，因为手势识别器未激活。手势仅适用于最近添加的按钮。下面是我正在使用的代码

* * *

这是添加按钮的代码

```
 NSUInteger counter = 1;
    if([ButtonArray count] !=0 ){
        NSLog(@"%d",[ButtonArray count]);
        NSLog(@"hi");
        counter = [ButtonArray count] + 1;

    }
    [ButtonArray addObject:[NSString stringWithFormat:@"%d",counter]];
    NSLog(@"%d",1);
    UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [btn setTag:counter];
    btn.frame = CGRectMake(80.0, 210.0, 160.0, 40.0);
    //[btn addTarget:self action:@selector(Dragged:withEvent:) forControlEvents:UIControlEventTouchDragInside];
    //[self.view addSubview:btn];
    btn.userInteractionEnabled = YES;

    gesture = [[UIPanGestureRecognizer alloc] 
                                        initWithTarget:self 
                                        action:@selector(labelDragged:)];
    [btn addGestureRecognizer:gesture];
    // add it 
```

## [self.view addSubview:btn];

这是手势代码

```
 UIButton *button = (UIButton *)gesture.view;

CGPoint translation = [gesture translationInView:button];

// move button
button.center = CGPointMake(button.center.x + translation.x, 
                           button.center.y + translation.y);

// reset translation
[gesture setTranslation:CGPointZero inView:button]; 
```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T08:08:23.627

我怀疑问题归结为：

```
gesture = [[UIPanGestureRecognizer alloc] 
                                    initWithTarget:self 
                                    action:@selector(labelDragged:)]; 
```

我倾向于从您的代码中认为这`gesture`是您班级中的某些属性。`gesture`在这种情况下，当您创建一个新的时，您会不断地覆盖旧的。这也可以解释你描述的行为。

编辑：

您不需要将手势识别器存储在属性中；这样做就足够了：

```
UIPanGestureRecognizer* localgesture = [[UIPanGestureRecognizer alloc] 
                                    initWithTarget:self 
                                    action:@selector(labelDragged:)];
[btn addGestureRecognizer:localgesture]; 
```

然后，当`labelDragged`调用该方法时，您可以使用它的`recognizer`参数来了解触发了哪些手势识别器：

```
- (void)labelDragged:(UIGestureRecognizer *)gestureRecognizer; 
```

# groovy - 如何在 soapUI Pro 中使用 groovy 脚本开始自动化？

> ID：11280437
> 
> 赞同：1
> 
> 时间：2012-07-01T08:03:09.890
> 
> 标签：groovy, automation, soapui

我是自动化的新 SoapUI Pro。在 SoapUI Pro 工具的帮助下，到目前为止，我只测试了服务的请求和响应。如果我想通过在 SoapUI Pro 工具中使用 groovy 编写脚本来自动化这个过程，我该怎么做？

学习 Groovy 脚本需要哪些先决条件？

请任何人指导我..

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-17T21:23:36.713

navie 启动 SoapUI 测试自动化的步骤

1.  详细了解 XML DOM ( [http://www.w3schools.com/xml/xml_dom.asp](http://www.w3schools.com/xml/xml_dom.asp) )。这是怎么一回事。
2.  了解 SoapUI 的工作原理。去他们的[网站](http://www.soapui.org/)。
3.  确定您想要自动化的具体要求是什么。它可以像为已经存在/创建的测试套件运行测试套件或从绑定生成实时 XML 请求、连接 Excel 以获取数据、生成 XML 响应和验证、生成日志等一样简单。天空是极限。

一步一步来，你应该可以很好地自动化 SoapUI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-16T09:14:56.317

在这里回答发起的问题。您需要了解任何基本的编程/脚本、OOP 能力/知识、REST/Http/Https 和 JSON/XML。

别担心，这很容易，首先双击任何测试用例/套件，你会看到它的编辑器，在运行测试之前有一个“设置脚本”选项。

请分析上面列出的所有变量，例如：runner/testRunner、testCase/testSuite、logger、context...等。有一些方法可以让你得到另一个句柄，比如从 testCase 你可以通过各自的方法得到 testSuite/teststep，所以你需要知道那些。

这个想法是通过脚本运行你已经配置的 testCase/Suite/Step，你可以为每个 api 设置标题，也可以设置属性。您甚至可以通过soapui 中的Groovy/JavaScript 脚本来完成几乎所有事情。

实际上，我将创建一个博客，其中包含所需的 groovy 脚本来实现有关 REST API 执行和测试的自动化。我将在此处发布该链接。谢谢！

# php - php中的error_reporting(0)是否防止黑客攻击

> ID：11280441
> 
> 赞同：1
> 
> 时间：2012-07-01T08:04:06.873
> 
> 标签：php, security, xss, sql-injection

在 php 脚本中使用 error_reporting(0) 是否会通过不报告错误来防止使用 SQLi 或 XSS 进行黑客攻击？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T08:16:37.713

使用`error_reporting(0)`是非常危险的；您隐藏的警告可能会为不稳定的编码提供重要线索。同时它不会阻止 SQL 注入问题或 xss。

我的建议：`error_reporting(-1)`始终设置并使用记录所有错误`error_log`或编写[自定义错误处理程序](https://stackoverflow.com/questions/10331084/error-logging-in-a-smooth-way/10476589#10476589)来`set_error_handler()`处理错误而不在页面上显示它们。在开发过程中，您也应该始终启用`display_errors`。

请注意，只有良好的编码实践和适当的测试才能减轻黑客攻击，但完全防止它需要更多。采用防御性编程，或者请[Bernstein](http://cr.yp.to/djb.html)辅导你 ;-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T08:09:20.760

通过执行 error_reporting(0) 您只能对用户隐藏错误。在某些情况下，最大限度地减少黑客攻击可能会有所帮助，但肯定不是 XSS 攻击。

# mysql - 如何将数据库结果保存到 Ruby 中的文本文件

> ID：11280445
> 
> 赞同：0
> 
> 时间：2012-07-01T08:04:29.843
> 
> 标签：mysql, ruby

我正在尝试将查询结果保存到 db 并将它们保存到 csv 文件中。这是我当前的 Ruby 脚本。

```
#! /usr/bin/ruby

require 'rubygems'
require 'mysql'
require 'date'

# need mysql queries here / use mysql2 calls
db_con = Mysql.new("localhost", "root", "", "msd")

date_results = db_con.query("SELECT CONCAT(CONVERT(date_format(dd.date, '%b-%e'),char),'\\n') AS date
FROM msd.date_dim dd LEFT OUTER JOIN msd.results cs 
    ON dd.id = cs.date_id
GROUP BY
    dd.date")

# create new xml file and insert header
open('test_trend.xml', 'w') do |f|
  date_results.each_hash do |f|
    f.puts "#{f['date']}"
  end      
end 
```

我收到以下错误。第 23 行是 date_results.each_hash 行。

```
so_test.rb:24:in `block (2 levels) in <main>': private method `puts' called for {"date"=>"Jun-12\n"}:Hash (NoMethodError)
    from /Users/pierce/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/ruby-mysql-2.9.9/lib/mysql.rb:686:in `call'
    from /Users/pierce/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/ruby-mysql-2.9.9/lib/mysql.rb:686:in `each_hash'
    from so_test.rb:23:in `block in <main>'
    from so_test.rb:22:in `open'
    from so_test.rb:22:in `<main>' 
```

任何建议表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T08:05:55.673

在您的嵌套块中，您正在覆盖`f`变量。相反，请尝试以下操作：

```
# create new xml file and insert header
open('test_trend.xml', 'w') do |f|
  date_results.each_hash do |hash|
    f.puts "#{hash['date']}"
  end      
end 
```

# c - 如何在 POSIX-C 中复制“which”命令的行为？

> ID：11280449
> 
> 赞同：1
> 
> 时间：2012-07-01T08:05:19.000
> 
> 标签：c, process, posix

是否有像`which`命令一样工作的 POSIX 函数？也就是说，我将一个命令名称传递给它，它会查找`$PATH`具有该名称的可执行文件，并返回该命令的绝对路径（如果有）。

更长的解释：我的 POSIX-C 应用程序想要启动一个子进程，其进程可能被调用`foo`或`bar`. 我的第一个想法是（忽略我需要孩子的`stdin/stdout/stderr`）：

```
 system("which foo && foo || which bar && bar"); 
```

我不喜欢这种通用方法，因为这会将有关进程调用的所有错误推入子进程的退出代码和`stdout/stderr`（我需要在我的应用程序中作为二进制流！）。

所以看起来我需要`which`在我的应用程序代码中复制 的行为，以找到`foo`或`bar`可执行文件。是否有合适的 POSIX 函数，或者您是否有代码片段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T08:21:08.317

您可以使用标准`fork`/`exec`模式，但只需运行`exec`两次。如果`exec`失败，则尝试其他进程。

```
pid_t pid;
pid = fork();
if (pid < 0)
    abort();
if (pid == 0) {
    // child process
    execlp("foo", "foo", "--flag");
    if (errno != ENOENT)
        abort();
    execlp("bar", "bar", "--bar-flags");
    abort();
}
// parent process 
```

这可能是最简单的方法，因为通过从 捕获错误代码`exec`，您可以准确找出失败的原因（因为`foo`不存在）。

**替代方案：**您也可以`which`在 C 中实现自己，这可能会或可能不会比`which`直接调用更烦人。

```
function which(file)
    path = getenv("PATH")
    for prefix in path
        if access(prefix "/" file, R_OK | X_OK)
            return prefix "/" file
        end if
    end for
    return NULL
end function 
```

# collections - 如何实现通用 Max （功能 功能）

> ID：11280451
> 
> 赞同：0
> 
> 时间：2012-07-01T08:06:39.230
> 
> 标签：collections, max, func

我正忙于编写自己的集合类型，需要有一个函数 Max 来返回集合中的值，其中值属性之一是最大值或某些条件成立。

所以我试图在一个底层的.net集合上调用 Max(Func<...) ，但我似乎无法让它工作：

```
public TValue MaxValue(Func<TValue,TValue> func)
{
  return this.valueSet.Max<TValue>(func);
} 
```

但我收到 2 个错误：

```
Argument 2: cannot convert from 'System.Func<TValue,TValue>' to System.Func<TValue,int>' 
```

和

```
'System.Collections.Generic.SortedSet<TValue>' does not contain a definition for 'Max'
 and the best extension method overload 'System.Linq.Enumerable.Max<TSource>(System.Collections.Generic.IEnumerable<TSource>,
System.Func<TSource,int>)' has some invalid arguments 
```

我似乎无法弄清楚我应该在这里做什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T08:38:41.127

你打电话时：

```
this.valueSet.Max<TValue>(func); 
```

编译器将此解释为具有一种泛型类型的`Max` [重载之一。](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.max.aspx)要么明确指出返回值也应该是一个`TValue`类型：

```
this.valueSet.Max<TValue, TValue>(func); 
```

或使用隐式类型并让编译器自己整理类型：

```
this.valueSet.Max(func); 
```

# javascript - 谷歌分析自定义变量使用

> ID：11280461
> 
> 赞同：2
> 
> 时间：2012-07-01T08:08:31.990
> 
> 标签：javascript, google-analytics, google-api, google-analytics-api

我是GA的新手。我不确定 GA 是否适合我正在寻找的报告。请帮助

**我的情况是：**

**我有一个 ajax 表单，每个问题都有提交和跳过按钮。**

**我需要跟踪谁都跳过或回答了他们的 user_id、question_id、campaign_id 和 category_id**

**而且我应该能够检索回答/跳过特定活动/问题/类别的用户**

我尝试使用自定义变量，例如：

```
_gaq.push(['_setCustomVar', 1, 'skip', 'yes', 1])
_gaq.push(['_setCustomVar', 2, 'Campaign', campaign_id, 1])
_gaq.push(['_setCustomVar', 3, 'Engagement', question_id, 1])
_gaq.push(['_setCustomVar', 4, 'Property', category_id, 1])
_gaq.push(['_setCustomVar', 5, 'User', user_id, 1])
_gaq.push(['_trackEvent']) 
```

我如何获得特定活动或问题的所有跳过用户？

GA 是否符合我的要求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T18:45:31.887

这违反了[Google Analytics 服务条款](http://www.google.com/analytics/tos.html)。参见第 7 条隐私。

> 7.隐私。您不会（也不会允许任何第三方）使用服务来跟踪或收集互联网用户的个人身份信息，您也不会（或允许任何第三方）关联从您的网站收集的任何数据（或此类第三方的网站），其中包含来自任何来源的任何个人身份信息，作为您使用（或此类第三方的使用）服务的一部分。您将拥有并遵守适当的隐私政策，并将遵守与收集您网站访问者的信息有关的所有适用法律。您必须发布隐私政策，并且该政策必须提供您使用收集匿名流量数据的 cookie 的通知。

和

> 虽然用户名或用户 ID 不是直接的 PII，但如果它用于与来自后端系统的人绑定……那就违反了服务条款。

Google Analytics 不是用于此类跟踪的工具。正如@Juhana 所说，托管在您自己的服务器上的自定义后端解决方案是更好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T08:12:49.870

不可以。虽然*可以*使用 Google Analytics 来完成此操作，但它主要是一种统计工具，因此您最好在自己的服务器上跟踪用户或使用其他服务。

主要问题是某些用户阻止或选择退出 Google Analytics，因此您将无法通过它获得可靠的信息。

# python - 同步 AMQP 发布

> ID：11280464
> 
> 赞同：4
> 
> 时间：2012-07-01T08:08:58.697
> 
> 标签：python, rabbitmq, amqp, pika

我知道有许多库在 python 中实现 AMQP 支持。不过，我需要的是一个库，它允许我以同步方式进行 AMQP 发布，因为它将在 WSGI 应用程序中使用，因此与队列代理交互的通常异步回调驱动方式将是那里有点格格不入。

系统的其他部分使用[pika](http://pika.github.com/)来支持 AMQP，但它是异步的，即使那里存在某种“阻塞”连接，我也不想使用它。

当然，如果所有其他方法都失败了，则可以为每个 WSGI 进程维护一个 Pika 事件循环。另一个问题是我在当前稳定版本的 Pika 中发现了一些令人讨厌的 (IMO) 错误，我宁愿使用其他东西。

重申：

*   我需要做 basic.publish （有“确认”支持！这样我就知道消息什么时候没有真正发布）
*   以同步方式
*   对于 rabbitmq（显然，“纯”AMQP 也可以工作）
*   来自 python WSGI 应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:06:17.023

我建议您查看[Kombu](https://github.com/ask/kombu)，它是[Celery](http://celeryproject.org/)使用的底层库。Kombu 和 Celery 都可以很容易地与 Django 和 Flask（基于 Werkzeug）集成，因此将它与 WSGI 应用程序集成应该不会有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T02:51:33.940

我的理解是可以使用 RabbitMQ 的 RPC 进行同步调用。由于您已经安装了鼠兔，因此您应该不费吹灰之力就可以采用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T08:16:33.023

您是否在 pika 文档站点测试了示例代码？

有一段叫做：同步编程风格，无并发 [http://pika.github.com/communicating.html#synchronous-programming-style-no-concurrency](http://pika.github.com/communicating.html#synchronous-programming-style-no-concurrency)

看起来你想要的是一种 RPC 风格的调用。您可以在以下位置找到一个很好的同步示例： [http ://www.rabbitmq.com/tutorials/tutorial-six-python.html](http://www.rabbitmq.com/tutorials/tutorial-six-python.html)

# java - 获取质数

> ID：11280466
> 
> 赞同：-4
> 
> 时间：2012-07-01T08:09:01.727
> 
> 标签：java, math

请看下面的代码

```
public class Prime
{
    public static void main(String[]args)
    {
        int i = 2; 
        int counter = 0;

        while(true)
        {

            if(counter==6)//Count still 6
            {
                break;
            }
            else
            {
                if(getPrimes(i)==true)
                {

                    i++;
                    counter++;
                    System.out.println("Counter: "+counter);
                }
                else
                {
                    System.out.println("No");
                }
            }
        }
    }

    static boolean getPrimes(int num)
    {

        boolean result = false;
        int i = 2;

            while(true)
            {
                if((num%i) != 0) //if the number cannot be divided by any other number (except 1 and it self) it is prime
                {
                    result = true;
                    System.out.println(num);
                    System.out.println("I is: "+i);
                    i=2;
                    break;
                }

                else //Not a prime. Repeat the process
                {
                    result = false;
                    i++;
                }
            }

            return result;
     }       
} 
```

在这里，我试图获得 0-6 之间的所有素数。这是从一个非常大的数字中获取数千个素数的测试用例。但是，它不是显示唯一的素数，而是显示每一个数字！

我在这里做错了什么？请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T08:27:54.973

试试这个答案......在你的循环中

```
static boolean getPrimes(int num)
{

    boolean result=true;     // incase u gave 1 or 2 as input.....
    int i = 2;
    int mid=num/2; 

    while(i<mid)
    {
         if(num%i==0)
         {
               result=false;   // not a prime and breaks...
               break;
         }
         else
         {
               result=true;    // the loop make result as true.....  

         }
         i++;
     }
     return result;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T08:16:22.503

我认为你需要这样的东西：

```
public void getPrimes(int a){
    for(int i = 2; i < a; i++){
        int inCounter = 0;
        if(counter%i==0){
            System.out.println("false");
            inCounter++;
        }
        if(inCounter == 0){
            System.out.println("Prime: "+counter);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T17:51:46.893

我想我找到了解决方案。至少，我找到了我需要的答案。这是我的答案

```
import java.math.BigInteger;

public class Problem7
{
    public static void main(String[]args)
    {
        int i = 0;
        int counter = 0;

        while(true)
        {

            if(i>6)
            {
                break;
            }

            if(i>1)
            {
                String str = String.valueOf(i);

                if (new BigInteger(str).isProbablePrime(i/2))
                {
                    System.out.println(str);
                     counter++;
                }
            }
            i++;

        }

    }
} 
```

我想这是最简单的方法...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T14:05:42.113

使用筛子，[Eratosthenes](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)或[Atkins](http://en.wikipedia.org/wiki/Sieve_of_Atkin)

这是 Robert Sedgewick 在 Java 中的 Eratosthenes 实现：

[http://introcs.cs.princeton.edu/java/14array/PrimeSieve.java.html](http://introcs.cs.princeton.edu/java/14array/PrimeSieve.java.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-02T08:46:54.653

```
import java.util.Scanner;
class PrimeNumbers2
{
   public static void main (String[] args)
   {        
      Scanner scanner = new Scanner(System.in);
      int i =0;
      int num =0;
      //Empty String
      String  primeNumbers = "";
      System.out.println("Enter the value of n:");
      int n = scanner.nextInt();
      for (i = 1; i <= n; i++)         
      {                   
         int counter=0;           
         for(num =i; num>=1; num--)
         {
        if(i%num==0)
        {
        counter = counter + 1;
        }
     }
     if (counter ==2)
     {
        //Appended the Prime number to the String
        primeNumbers = primeNumbers + i + " ";
     }  
      } 
      System.out.println("Prime numbers from 1 to n are :");
      System.out.println(primeNumbers);
   }
} 
```

它将显示所有质数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-27T05:04:16.347

找到具有最小迭代的素数

布尔 IsPrimeNumber(int num) {

```
 boolean isPrime = true;
    if (num == 1 || num ==0)
        isPrime = false;
    else{

        int limit = (int) Math.sqrt(num);
        for (long i = 2L; i <=limit ; i++)
            if (num % i == 0) {
                isPrime = false;
                break;
            }
    }

    return isPrime;

} 
```

# ios - 删除孩子后boundingBox仍然存在

> ID：11280480
> 
> 赞同：0
> 
> 时间：2012-07-01T08:11:37.790
> 
> 标签：ios, cocos2d-iphone, collision-detection, ccsprite, bounding-box

我实例化了一个精灵，然后当它与第二个精灵碰撞时，该精灵的子元素被删除：

```
if (CGRectIntersectsRect(spriteOne.boundingBox, self.swat.boundingBox)) 
     {
         if (spriteOne.tag == 0){
             [self removeChild:spriteOne cleanup:YES];
         }
         if (spriteOne.tag == 1){
             [self removeChild:spriteOne cleanup:YES];
         }
} 
```

这可以按我的意愿工作，并且精灵会从屏幕上消失。但是，即使图像不存在，boundingBox 似乎仍然存在，这会导致评分等问题......所以，我想知道的是如何“禁用”精灵的 boundingBox 以便当两个精灵第一次碰撞时，会检测到碰撞，但之后的任何时候都不会。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T08:33:16.080

据我了解，碰撞后移除精灵应该有一些问题。

你会试试这个吗？

```
if (CGRectIntersectsRect(spriteOne.boundingBox, self.swat.boundingBox)) 
 {
     if (spriteOne.tag == 0){
         [spriteOne removeFromParentAndleanup:YES];
     }
     if (spriteOne.tag == 1){
         [spriteOne removeFromParentAndleanup:YES];
     }
 } 
```

您是否尝试过添加一些 NSLog 跟踪来查看精灵是否真的被移除了？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:41:11.263

您必须保留 spriteOne。如果有充分的理由保留它，请执行以下操作：

```
if ( spriteOne.visible && CGRectIntersectsRect(spriteOne.boundingBox, self.swat.boundingBox)) 
 {
     if (spriteOne.tag == 0){
         spriteOne.visible=NO;
     }
     if (spriteOne.visible && spriteOne.tag == 1){
         spriteOne.visible=NO;
     }
} 
```

稍后，当您再次需要 spriteOne 时，只需将其可见性设置为 YES；

如果没有，您有泄漏，请执行以下操作：

```
if ( spriteOne && CGRectIntersectsRect(spriteOne.boundingBox, self.swat.boundingBox)) 
 {
     if (spriteOne.tag == 0){
         [self removeChild:spriteOne cleanup:YES];
         self.spriteOne=nil;    // assumes you have a property for spriteOne
     }
     if (spriteOne && spriteOne.tag == 1){
         [self removeChild:spriteOne cleanup:YES];
         [spriteOne release];   // assumes no property for spriteOne
         spriteOne=nil;         // dont forget this ! beware of zombies
     }
} 
```

# php - PHPMailer“无法访问文件：”

> ID：11280485
> 
> 赞同：0
> 
> 时间：2012-07-01T08:12:13.393
> 
> 标签：php, html, email, phpmailer, email-attachments

我正在尝试使用 PHPMailer 向我的服务器上存在的文件发送电子邮件。当我运行此代码时，我得到“无法访问文件”并且电子邮件发送时没有附件......这里有什么问题？

```
<html>
<title>Email Sent!</title>
<?php 
        include("menu.php");
        include("sqlconnect.php");
        require_once('../PHPMailer/class.phpmailer.php');

        $path = $_POST['path'];
        $filename = $_POST['filename'];
        $newpath = "Library/WebServer/Documents/Inventory/".$path;

define('GUSER', 'xxxxxxx@gmail.com'); // GMail username
define('GPWD', 'xxxxxxx'); // GMail password

function smtpmailer($to, $from, $from_name, $subject, $body) { 
    global $error;
    $mail = new PHPMailer();  // create a new object
    $mail->IsSMTP(); // enable SMTP
    $mail->SMTPDebug = 0;  // debugging: 1 = errors and messages, 2 = messages only
    $mail->SMTPAuth = true;  // authentication enabled
    $mail->SMTPSecure = 'ssl'; // secure transfer enabled REQUIRED for GMail
    $mail->Host = 'smtp.gmail.com';
    $mail->Port = 465; 
    $mail->Username = GUSER;  
    $mail->Password = GPWD;           
    $mail->SetFrom($from, $from_name);
    $mail->Subject = $subject;
    $mail->Body = $body;
    $mail->AddAddress($to);
    $attachtest = $mail->AddAttachment($newpath);   
    if(!$mail->Send()) {
        $error = 'Mail error: '.$mail->ErrorInfo; 
        return false;
    } else {
        $error = 'Message sent!';
        return true;
    }
}

smtpmailer('xxxxxxx@me.com', 'xxxxxxxx@gmail.com', 'Name', 'test mail message', 'Hello World!');

?>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T09:01:22.697

尝试像这样将正确的路径传递给您的函数

```
function smtpmailer($to, $from, $from_name, $subject, $body, $newpath) 
```

并称它为

```
 smtpmailer('xxxxxxx@me.com', 'xxxxxxxx@gmail.com', 'Name', 'test mail message', 'Hello World!', $newpath); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T08:22:13.323

确保运行 Apache 和 PHP 的用户/组至少对文件具有 READ 权限。

如果您在服务器上工作并以其他用户身份使用 sFTP/SSH 上传文件，则此问题很常见。

找出正在运行 apache/php 的用户和组，并授予该用户和组对您尝试附加的文件的读取权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-29T22:29:06.710

我遇到了同样的问题。

我需要在我的 php 脚本中运行一个额外的命令，将 move_uploaded_file() 从我的主机家中移动到一个内部目录，然后现在我可以发送附件。

我的提示对我很有效:)

# php - OpenCart 跳过“添加到购物车”，直接结帐

> ID：11280487
> 
> 赞同：2
> 
> 时间：2012-07-01T08:12:20.293
> 
> 标签：php, checkout, opencart

我想知道是否可以为特定产品跳过 OpenCart 中的“添加到购物车”步骤，当用户点击它们时，将他直接发送到结帐页面。但仅限于特定产品。

谢谢，
伊拉克利斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-12T07:19:01.067

（这适用于 opencart 1.5.2.x 和 1.5.3.x）

编辑文件：catalog/view/theme/yourtheme/template/product/product.tpl 并进行以下修改：

找到代码：

```
if (json['success']) {
window.location='index.php?route=checkout/cart';
} 
```

替换为以下代码：

```
if (json['success']) {
window.location='index.php?route=checkout/checkout';
} 
```

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-16T06:19:22.603

对于 opencart 2.0 在添加到购物车按钮旁边添加额外按钮，即立即购买或者您可以在管理员中添加必须立即购买的产品选项或添加到购物车按钮

对于类别页面 \catalog\view\theme\default\template\product\category.tpl 和模块相同

```
<button type="button" onclick="buynow('<?php echo $product['product_id']; ?>');">
     <i class="fa"></i> 
     <span class="hidden-xs hidden-sm hidden-md">Buy Now</span>
     </button> 
     <script>function buynow(pid){cart.add_buynow(pid);}</script> 
```

产品页面 \catalog\view\theme\default\template\product\product.tpl

```
<button type="button" id="button_buy" data-loading-text="<?php echo $text_loading; ?>" class="btn btn-primary btn-lg btn-block">Buy Now</button>

<script>
$("#button_buy").click(function(){
  $.ajax({
    url: 'index.php?route=checkout/cart/add',
    type: 'post',
    data: $('#product input[type=\'text\'], #product input[type=\'hidden\'], #product input[type=\'radio\']:checked, #product input[type=\'checkbox\']:checked, #product select, #product textarea'),
    dataType: 'json',
    beforeSend: function() {
      $('#button-buy').button('loading');
    },    
    complete: function() {
      $('#loading-image').html('');
    },
    success: function(json) {

      $('.form-group').removeClass('has-error');

      if (json['error']) {
        if (json['error']['option']) {
          for (i in json['error']['option']) {
            var element = $('#input-option' + i.replace('_', '-'));

            if (element.parent().hasClass('input-group')) {
              element.parent().after('<div class="text-danger">' + json['error']['option'][i] + '</div>');
            } else {
              element.after('<div class="text-danger">' + json['error']['option'][i] + '</div>');
            }
          }
        }

        if (json['error']['recurring']) {
          $('select[name=\'recurring_id\']').after('<div class="text-danger">' + json['error']['recurring'] + '</div>');
        }

        // Highlight any found errors
        $('.text-danger').parent().addClass('has-error');
      }

      if (json['success']) {location.href = 'index.php?route=checkout/checkout';  }
    }
  });
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T00:36:53.773

我认为要做到这一点，您必须向管理员添加一个复选框，以记下您希望跳过该步骤的项目。然后，这将为您提供需要跳过的项目列表。

添加到购物车时，在 Ajax 调用 php 脚本中将查询添加到购物车中，从这里您可以获取产品 ID 并检查它是否是要跳过的项目之一，如果是，您可以将标题重定向到结帐。

希望有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-30T18:53:18.690

我正在使用 OpenCart 2.3.0.2。这可能对某人有帮助

我加了

```
window.location='index.php?route=checkout/checkout'; 
```

归档 opencart/upload/catalog/view/javascript/common.js 第 168 行。

它就像魅力一样。

# c# - 为什么我的 c# 编译器找不到 System.Windows.Forms

> ID：11280495
> 
> 赞同：2
> 
> 时间：2012-07-01T08:14:00.523
> 
> 标签：c#, compiler-construction, namespaces

以下是基本信息：

1.  我一直在广泛研究 Rob Miles 的 C# Yellow Book 2011。
2.  我在 197 页的第 155 页（大部分已完成），并开始讨论有关表单/guis 的部分。
3.  我使用 Notepad++ 和 NppExec 进行快速编译和轻松编辑（我个人只是讨厌 VisualStudio……我不喜欢为我做事。）
4.  我正在使用 .NET 4.0 的编译器
5.  我已将 csc.rsp 设置为包括：
    1.  System.Windows.Forms.dll
    2.  System.Drawing.dll
    3.  System.Drawing.Design.dll
    4.  和其他所需的资源参考。
6.  我已经仔细检查了我所有的参考资料。
7.  我在我的代码中包含了所有必需的“使用”语句。

问题是：

每次我尝试编译一段使用任何表单方法的代码时，我都会收到此错误：

`error CS0234: The type or namespace name 'Windows' does not exist in the namespace 'System' (are you missing an assembly reference?)`

我到处都看过。我可以做些什么来解决这个问题？

PS - 如果您真的想要或需要查看代码，我可以将其粘贴到回复中。除非有人问，否则我不会这样做，因为它有点长。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T08:20:40.360

如果它在 System 下找不到 Windows，那么您对 ​​System.Windows.Forms.dll 的引用不起作用。您没有确切显示您是如何做到的，但是：这就是问题所在。所以：无论您使用的是 csc.rsp，它都不起作用。你也许在使用`/noconfig`？您是否编辑了正确的文件？您是否以管理员用户身份对其进行了编辑？如果您在编辑器中打开 csc.rsp，您是否在那里进行了更改？

# hibernate - ORA-02292 违反约束 - 找到子记录

> ID：11280500
> 
> 赞同：-3
> 
> 时间：2012-07-01T08:15:32.223
> 
> 标签：hibernate, jpa, seam

当我删除父 ID 时，父实体是许多关系的组成部分，我给出的例外是 ORA-02292 约束违规 - 找到子记录。

我的实体：

@实体

@Table(name = "MOBEE_AGENCY")

公共类 MobeeAgency 实现 java.io.Serializable {

```
private static final long serialVersionUID = 1L;
private Long id;

private Set<MobeeAgent> mobeeAgents = new HashSet<MobeeAgent>(0);
private Set<MobeeAgcyAccounts> mobeeAgcyAccountses = new HashSet<MobeeAgcyAccounts>(
        0);

private Set<MobeeAgencyRegion> MobeeAgencyRegions = new HashSet<MobeeAgencyRegion>(0);

@Id
@GeneratedValue(generator = "MOBEE_AGENCY_SEQ")
@SequenceGenerator(name = "MOBEE_AGENCY_SEQ", sequenceName = "MOBEE_AGENCY_SEQ", allocationSize = 1)
@Column(name = "ID")
public Long getId() {
    return this.id;
}

public void setId(Long id) {
    this.id = id;
}

@OneToOne(cascade = { CascadeType.PERSIST, CascadeType.REMOVE }, fetch = FetchType.LAZY)
@JoinColumn(name = "APP_ID")
public MobeeRegProcess getMobeeRegProcess() {
    return this.mobeeRegProcess;
}

public void setMobeeRegProcess(MobeeRegProcess mobeeRegProcess) {
    this.mobeeRegProcess = mobeeRegProcess;
}

@OneToMany(cascade = { CascadeType.PERSIST, CascadeType.REMOVE }, fetch = FetchType.LAZY, mappedBy = "mobeeAgency")
public Set<MobeeAgent> getMobeeAgents() {
    return this.mobeeAgents;
}

public void setMobeeAgents(Set<MobeeAgent> mobeeAgents) {
    this.mobeeAgents = mobeeAgents;
}

@OneToMany(cascade = { CascadeType.PERSIST, CascadeType.REMOVE }, fetch = FetchType.LAZY, mappedBy = "mobeeAgency")
public Set<MobeeAgcyAccounts> getMobeeAgcyAccountses() {
    return this.mobeeAgcyAccountses;
}

public void setMobeeAgcyAccountses(
        Set<MobeeAgcyAccounts> mobeeAgcyAccountses) {
    this.mobeeAgcyAccountses = mobeeAgcyAccountses;
}

@OneToMany(cascade = { CascadeType.PERSIST, CascadeType.REMOVE }, fetch = FetchType.LAZY, mappedBy = "mobeeAgency")
public Set<MobeeAgencyRegion> getMobeeAgencyRegions() {
    return MobeeAgencyRegions;
}

public void setMobeeAgencyRegions(Set<MobeeAgencyRegion> mobeeAgencyRegions) {
    MobeeAgencyRegions = mobeeAgencyRegions;
} 
```

}

获得例外是：

> 13:29:56,226 INFO [STDOUT] [Mobee]- INFO 2012-07-01 13:29:56,225 [] MobeeAgencyHome - 删除该机构的记录 832859 13:29:56,251 INFO [STDOUT] [Mobee]- WARN 2012- 07-01 13:29:56,251 [] JDBCExceptionReporter - SQL 错误：2292，SQLState：23000 13:29:56,251 信息 [STDOUT] [Mobee]-错误 2012-07-01 13:29:56,251 [] JDBCExceptionReporter - ORA- 02292：违反完整性约束 (KCBUSER.FK6B6B82ABC89B1A0C) - 找到子记录 13:29:56,251 INFO [STDOUT] [Mobee]- WARN 2012-07-01 13:29:56,251 [] JDBCExceptionReporter - SQL 错误：2292，SQLState：23000 13:29:56,251 INFO [STDOUT] [Mobee]-ERROR 2012-07-01 13:29:56,251 [] JDBCExceptionReporter - ORA-02292：违反完整性约束 (KCBUSER.FK6B6B82ABC89B1A0C) - 发现子记录 13:29:56,253 INFO [标准输出] [Mobee]-错误 2012-07-01 13:29:56，251 [] AbstractFlushingEventListener - 无法将数据库状态与会话 org.hibernate.exception.ConstraintViolationException 同步：无法在 org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:71) 在 org.hibernate.exception 处执行 JDBC 批量更新。 JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43) 在 org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:253) 在 org.hibernate.jdbc.AbstractBatcher.prepareStatement(AbstractBatcher.java:92) 在 org.hibernate.jdbc .AbstractBatcher.prepareStatement(AbstractBatcher.java:87) 在 org.hibernate.jdbc.AbstractBatcher.prepareBatchStatement(AbstractBatcher.java:222) 在 org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:2479) 在 org. hibernate.persister.entity。AbstractEntityPersister.delete(AbstractEntityPersister.java:2697) at org.hibernate.action.EntityDeleteAction.execute(EntityDeleteAction.java:74) at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:250) at org.hibernate.engine .ActionQueue.executeActions(ActionQueue.java:234) 在 org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:146) 在 org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:298) 在 org. hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27) at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1000) at org.hibernate.ejb.AbstractEntityManagerImpl.flush(AbstractEntityManagerImpl.java:296)在 org.jboss.seam.persistence.EntityManagerProxy.flush(EntityManagerProxy.java:92) 在 org.jboss.seam.framework.EntityHome.update(EntityHome.java:64) 在 com.manam.mobee.agency.MobeeAgencyHome.update(MobeeAgencyHome.java:2599) 在 com.manam.mobee.agency.MobeeAgencyHome.processUserDecision(MobeeAgencyHome. java:2465) 在 sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) 在 java.lang.reflect.Method.invoke （来源不明） org.jboss.seam.util.Reflections.invoke(Reflections.java:22) org.jboss.seam.intercept.RootInvocationContext.proceed(RootInvocationContext.java:32) org.jboss.seam.intercept .SeamInvocationContext.proceed(SeamInvocationContext.java:56) 在 org.jboss.seam.transaction.RollbackInterceptor.aroundInvoke(RollbackInterceptor.java:28) 在 org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68) at org.jboss.seam.core.BijectionInterceptor.aroundInvoke(BijectionInterceptor.java:77) at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext. java:68) at org.jboss.seam.core.ConversationInterceptor.aroundInvoke(ConversationInterceptor.java:56) at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68) at org.jboss.seam.transaction .TransactionInterceptor$1.work(TransactionInterceptor.java:97) at org.jboss.seam.util.Work.workInTransaction(Work.java:47) at org.jboss.seam.transaction.TransactionInterceptor.aroundInvoke(TransactionInterceptor.java:91)在 org.jboss.seam.core 的 org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)。MethodContextInterceptor.aroundInvoke(MethodContextInterceptor.java:44) at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68) at org.jboss.seam.security.SecurityInterceptor.aroundInvoke(SecurityInterceptor.java:163) at org .jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68) at org.jboss.seam.intercept.RootInterceptor.invoke(RootInterceptor.java:107) at org.jboss.seam.intercept.JavaBeanInterceptor.interceptInvocation(JavaBeanInterceptor .java:185) 在 org.jboss.seam.intercept.JavaBeanInterceptor.invoke(JavaBeanInterceptor.java:103) 在 com.manam.mobee.agency.MobeeAgencyHome_$$_javassist_seam_15.processUserDecision(MobeeAgencyHome_$$_javassist_seam_15.java) 在太阳。 reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect。NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at org.jboss.el.util.ReflectionUtil.invokeMethod(ReflectionUtil.java: 335) 在 org.jboss.el.parser.AstMethodSuffix.getValue(AstMethodSuffix.java:59) 在 org.jboss.el.parser.AstMethodSuffix 的 org.jboss.el.util.ReflectionUtil.invokeMethod(ReflectionUtil.java:280) .invoke(AstMethodSuffix.java:65) 在 org.jboss.el.parser.AstValue.invoke(AstValue.java:96) 在 org.jboss.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:276) 在 com.sun。 facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:68) 在 javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:77) 在 com.sun.faces。application.ActionListenerImpl.processAction(ActionListenerImpl.java:91) 在 javax.faces.component.UICommand.broadcast(UICommand.java:383) 在 org.ajax4jsf.component.AjaxActionComponent.broadcast(AjaxActionComponent.java:55) 在 org.ajax4jsf .component.AjaxViewRoot.processEvents(AjaxViewRoot.java:324) 在 org.ajax4jsf.component.AjaxViewRoot.broadcastEvents(AjaxViewRoot.java:299) 在 org.ajax4jsf.component.AjaxViewRoot.processPhase(AjaxViewRoot.java:256) 在 org. ajax4jsf.component.AjaxViewRoot.processApplication(AjaxViewRoot.java:469) 在 com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:97) 在 com.sun.faces.lifecycle.LifecycleImpl.phase(LifecycleImpl.java: 251) 在 com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:117) 在 javax.faces.webapp.FacesServlet。org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290) 的服务(FacesServlet.java:244) org.ajax4jsf 的 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) .webapp.BaseFilter.doFilter(BaseFilter.java:530) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206 ) 在 org.apache.catalina.core.ApplicationDispatcher 的 org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:445) 的 org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:654)。 doForward(ApplicationDispatcher.java:379) 在 org.apache.catalina.core。ApplicationDispatcher.forward(ApplicationDispatcher.java:292) at org.jboss.seam.web.RewriteFilter.process(RewriteFilter.java:98) at org.jboss.seam.web.RewriteFilter.doFilter(RewriteFilter.java:57) at org .jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69) at org.jboss.seam.web.IdentityFilter.doFilter(IdentityFilter.java:40) at org.jboss.seam.servlet.SeamFilter$FilterChainImpl .doFilter(SeamFilter.java:69) 在 org.jboss.seam.web.MultipartFilter.doFilter(MultipartFilter.java:90) 在 org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69) 在org.jboss.seam.web.ExceptionFilter.doFilter(ExceptionFilter.java:64) 在 org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69) 在 org.jboss.seam.web.RedirectFilter。 doFilter(RedirectFilter.java:45) 在 org.ajax4jsf.webapp.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java:178) 在 org.ajax4jsf.webapp.BaseFilter.handleRequest 的 org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69) (BaseFilter.java:290) 在 org.jboss.seam.web 的 org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:515) 的 org.ajax4jsf.webapp.BaseFilter.processUploadsAndHandleRequest(BaseFilter.java:388)。 Ajax4jsfFilter.doFilter(Ajax4jsfFilter.java:56) at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69) at org.jboss.seam.web.LoggingFilter.doFilter(LoggingFilter.java:60)在 org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69) 在 org.jboss.seam.servlet.SeamFilter.doFilter(SeamFilter.java: 13:29:56,253 INFO [STDOUT] 158) 在org.apache.catalina.core。ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 在 org.apache.catalina.core.StandardWrapperValve.invoke (StandardWrapperValve.java:230) 在 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175) 在 org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:179) 在 org. apache.catalina.authenticator.AuthenticatorBase.invoke（AuthenticatorBase.java：第432章.ErrorReportValve.invoke(ErrorReportValve.java:102) at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java :109) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844) 在 org.apache.coyote.http11 的 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:262)。 Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583) 在 org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:446) 在 java.lang.Thread。运行（未知来源）原因：java.sql.BatchUpdateException：ORA-02292：违反完整性约束（KCBUSER.FK6B6B82ABC89B1A0C） - 找到子记录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:45:00.420

只需检查：

```
select distinct lvl cleanup_order, t1 clean_table, t2 to_clean_table 
from 
(SELECT level lvl, t2, t1, i2, c1, c2
FROM
  (
    SELECT c1.owner, c1.table_name t1, c2.table_name t2, c2.index_name i2,
      c1.constraint_name c1, c2.constraint_name c2
    FROM user_constraints c1, user_constraints c2
    WHERE c1.constraint_type = 'R'
    AND c1.r_constraint_name = c2.constraint_name
    AND c1.r_owner           = c2.owner
  )
  ov
  START WITH t2       in ('YOUR_TABLE_YOU_WANT_DELETE')  ---List tables which have to be cleaned.
  CONNECT BY prior T1 = T2) lvl
 -- where t1 is not NULL
  order by lvl desc, to_clean_table; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T09:49:42.737

如果您想在移除实体时移除您的孩子

@Cascade(DELETE_ORPHAN)

如果 JPA 2 你可以做

@OneToMany(orphanRemoval=true)

# php - 如何模拟内置的 php 套接字函数？

> ID：11280506
> 
> 赞同：1
> 
> 时间：2012-07-01T08:17:02.483
> 
> 标签：php, sockets, mocking, phpunit

我正在处理一些从套接字读取的代码，当它获得一定的大输入时会出错。在修复它之前，我为此添加了一个单元测试，但是因为我无法模拟`fread`（以及我正在使用的其他 PHP 内置函数，例如`fsockopen`,`feof`等）而被卡住了。

简单来说，我的问题是此代码因“*致命错误：无法重新声明 fgets() ...* ”而失败：

```
function fgets($fp){
return "xxx";
} 
```

我意识到我可以创建一个套接字包装类，我的真实代码使用它，然后我可以为该包装类创建一个模拟对象。但这就是《摇尾巴》，我能想到原因，这是一个坏主意，不仅仅是事情的原理。（例如，使代码更复杂、更高效，必须重构尚未测试的代码。）

`fgets()`所以，我的问题是如何在单元测试中用我自己的替换内置实现？（或者，如果您想跳出框框思考，问题可以表述为：如何控制调用返回的字符串，调用`fgets($socket)`的`$socket`返回值是什么时候`fsockopen`？）

* * *

**在旁边**

按照正确答案的要求安装 apd 是一项艰苦的工作；它最后一次发布是在 2004 年，并且不支持开箱即用的 php 5.3。没有适用于它的 Ubuntu 软件包，也`pecl install apd`失败了。所以这里是安装它的过程（这些是针对 ubuntu 10.04）（都是以 root 身份完成的）：

```
pecl download apd
tar xzf apd-1.0.1.tgz
cd apd-1.0.1
phpize
./configure
# Do edits (see below)
make install 
```

有关您需要做的补丁，请参阅[https://bugs.php.net/bug.php?id=58798 。](https://bugs.php.net/bug.php?id=58798)注意。只有一行您真正需要更改，因此您可以手动更改，如下所示：在文本编辑器中打开 php_apd.c，转到第 967 行，并将该`CG(extended_info) = 1`行替换为这一行：

```
CG(compiler_options) |= ZEND_COMPILE_EXTENDED_INFO; 
```

最后，您需要添加一个 php.ini 条目来激活它。见[http://php.net/manual/en/apd.installation.php](http://php.net/manual/en/apd.installation.php)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T08:24:49.607

看看这些：

[bool rename_function ( string $original_name , string $new_name )](http://www.php.net/manual/de/function.rename-function.php)

[bool override_function ( 字符串 $function_name , 字符串 $function_args , 字符串 $function_code )](http://www.php.net/manual/de/function.override-function.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T09:09:18.077

如果您无权访问 APD 或 Runkit 但正在使用命名空间，请尝试以下操作：[https](https://stackoverflow.com/a/5337635/664108) ://stackoverflow.com/a/5337635/664108 （链接中的答案是指 time() 但没有区别）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T08:19:34.683

`fsockopen`改为`fopen`做模拟，不要改变任何其他功能。

```
$fp = fsockopen("www.example.com", 80, $errno, $errstr, 30); 
```

到

```
$fp = fopen("/path/to/your/dummy_data_file"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T02:48:27.663

我[写了一篇关于我的经历的博客，](http://darrendev.blogspot.jp/2012/07/mock-socket-in-php.html)其中包含完整的工作代码，展示了如何使用 override_function 来实现预期的目标；文件读取和套接字读取。我不会在这里重复整篇文章，而只会指出您必须如何使用这些功能：

1.  用于`rename_function`为旧的原始函数命名，以便我们稍后找到它。
2.  用于`override_function`定义新行为
3.  `rename_function`用来给一个假名`__overridden__`

如果您希望之后能够恢复原始行为，那么第 1 步至关重要。

在最后的思考部分，我展示了一种我认为更强大的替代方法，因此我认为在使用 phpUnit 时替换文件函数更安全。它创建了一个永久函数替换，其默认行为是转发到内置函数。然后它检查参数（`$handle`在这种情况下是资源）来决定是否在我们想要不同行为的流上调用它。（我认为您可以将其称为责任链设计模式的示例。）

# wpf - 饼图上的 DropShadow 效果

> ID：11280516
> 
> 赞同：0
> 
> 时间：2012-07-01T08:19:38.363
> 
> 标签：wpf, toolkit

我想做一个带有 DropShadow 效果的饼图，所以我尝试将效果放在 PieDataPoint 对象上，但它不起作用 - 而不是在饼图的每个切片上绘制自己的阴影它的邻居，如下图所示：

![在此处输入图像描述](../Images/b7bf4ca2412129f25b7c0678372e285a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:52:05.267

最终，我在图表模板内的 EdgePanel 上设置了 DropShadow 效果，它起作用了。

```
 <Charting:Chart.Template>
            <ControlTemplate  TargetType="Charting:Chart">
                <Border>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <chartingprimitives:EdgePanel x:Name="ChartArea" Style="{TemplateBinding ChartAreaStyle}">
                            <chartingprimitives:EdgePanel.Effect>
                                <DropShadowEffect
                                    ShadowDepth = "5"
                                    Direction = "330"
                                    Color = "Gray"
                                    Opacity = "0.5"
                                    BlurRadius = "10">
                                </DropShadowEffect>
                            </chartingprimitives:EdgePanel.Effect>
                        </chartingprimitives:EdgePanel>

                            <charting:Legend x:Name="Legend" BorderThickness="0" Grid.Row="1" HorizontalAlignment="Center"/>

                        </Grid>
                </Border>
            </ControlTemplate>
        </Charting:Chart.Template> 
```

# asp.net - 如何在 asp.net 中显示遵循特定模式/格式的数据？

> ID：11280520
> 
> 赞同：1
> 
> 时间：2012-07-01T08:20:44.060
> 
> 标签：asp.net, repeater, datalist, asp.net-controls

我有这张桌子![在此处输入图像描述](../Images/f3925040c586cb0991d460ced746d87b.png)

我想要的是在浏览器上有这样的东西。![在此处输入图像描述](../Images/01c666bf0a45a5a6b1ebb2705e1b74f6.png)

该表有 8 行 3 列

这是我的 sql 查询：“SELECT q.QuestionID, q.QuestionText, q.GroupNo FROM question q ORDER BY GroupNo asc” 我已经存储了问题，但我很难以这种格式打印它。

其中在打印 4 个问题后，它将转到另一个单元格并再次打印 4 个问题，然后一旦已经有 3 列，它将创建一个新行并再次执行相同的步骤。

[在数据库中，第一个 4 个问题是 QuestionID1,2,3,4，然后右边的单元格是 6,7,8,9 等等....]

我想以这种模式显示问题。

我已经坚持了将近两天了......我尝试在网上寻找其他解决方案，但我无法找到与我想要完成的事情非常相似的东西。我正在尝试使用数据列表或中继器来做到这一点。如果您可以提供一个同时使用两者的解决方案，那将是非常有帮助的++

先生/女士，您的回答会很有帮助。谢谢++

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T08:34:52.127

我认为你应该放弃现有的控件，如repeater或datalist。只需使用自己的代码来实现这个功能。可能是这样的：

```
StringBuilder sb=new StringBuilder();
for(int i=0;i<4;i++)
{
sb.append("...");
}
sb.append("...");
for(int i=4;i<8;i++)
{
sb.append("...");
} 
```

# c - C、从文件读入结构

> ID：11280523
> 
> 赞同：4
> 
> 时间：2012-07-01T08:21:12.003
> 
> 标签：c, file, structure

我已经为此苦苦挣扎了好几天，我不知道为什么它不起作用。

我正在尝试从具有如下数字的文件中读取数字：

```
0 2012 1 1 2000.000000
0 2012 1 1 3000.000000
1 2012 1 1 4500.000000 
```

我的结构：

```
struct element{

        int id;
        int sign;
        int year;
        int month;
        double amount;

        struct element *next;

};

struct queue{
    struct element *head;
    struct element *tail;
    struct element *head2; 
    struct element *temp;  
    struct element *temph; 

    int size;
}; 
```

> （head2，temp和temph用于排序结构）

并从文件中读取：

```
void read_str(struct queue *queue){

    FILE *reads;

    char filename[40];
    int temp;

    printf("Type in name of the file\n");
    scanf("%s",&filename);
    reads=fopen(filename, "r");
    if (reads==NULL) {
        perror("Error");
        return 1;
    }
    else { 
        while(!feof(reads)) {
            struct element *n= (struct element*)malloc(sizeof(struct element));             
            fscanf(reads,"%d %d %d %d %lf", n->id, n->sign, n->year, n->month, n->amount);                  
            n->next=NULL;                   

            if(queue->head ==NULL) {
                queue->head=n;
            }
            else {
                queue->tail->next=n;
            }

            queue->tail=n;
            queue->size++;                  

        }           
    }
} 
```

我可以通过更改写入数据的函数来更改数据在文件中的显示方式，但我认为这不是问题所在。我猜我用`malloc`错了方法。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-01T08:23:32.080

> ```
> fscanf(reads,"%d %d %d %d %lf", n->id, n->sign, n->year, n->month, n->amount); 
> ```

函数族`scanf`期望地址。将行更改`fscanf`为：

```
fscanf(reads,"%d %d %d %d %lf", &n->id, &n->sign, &n->year,
    &n->month, &n->amount); 
```

* * *

旁注，这是一个严重误导的行：

> ```
> else { while(!feof(reads)) { 
> ```

# facebook - 在 facebook 上以不同的标题/照片共享同一页面

> ID：11280527
> 
> 赞同：0
> 
> 时间：2012-07-01T08:21:41.013
> 
> 标签：facebook, share

我在页面上有很多照片，我想给它们添加点赞按钮，所以我创建了一个页面 photo.php?id=x 并用不同的变量将点赞按钮链接到它。但是 fb 在发布后会删除所有变量！大约 1 年前它可以工作，但现在我无法在链接中添加变量以进行共享。

还有另一种方法可以使用不同的 ID 共享页面吗？

```
echo '<iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fportovenere.a-turist.com%2F'.$curfolder.'photo.php%3Fid%3D'.$row["id"].'&amp;send=false&amp;layout=button_count&amp;width=450&amp;show_faces=true&amp;action=like&amp;colorscheme=light&amp;font&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:21px;" allowTransparency="true"></iframe>'; 
```

PS：

```
$curfolder="ru/"
id = 1-5 for test 
```

或者

```
echo '<div class="fb-like" data-href="http://www.portovenere.a-turist.com/'.$curfolder.'photo.php?id='.$row["id"].'" data-send="false" data-layout="button_count" data-width="150" data-show-faces="true"></div>'; 
```

与这个：它与变量共享一个页面，但不获取信息（照片，标题）

或旧共享者：

```
echo '<a target="_blank" rel="nofollow" href="http://www.facebook.com/sharer/sharer.php?u=http://portovenere.a-turist.com/'.$curfolder.'photo.php?id='.$row["id"].'"><img style="margin-bottom:25px;" src="/images/fb_share_img.png"></a>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T09:42:59.043

我认为您的问题出在`og:url`元标记上。

查看[调试工具](http://developers.facebook.com/tools/debug/og/object?q=http://portovenere.a-turist.com/photo_galery.php?id=4)对您的 url 的说明：

> [获取的 URL： http](http://portovenere.a-turist.com/photo_galery.php?id=4) : //portovenere.a-turist.com/photo_galery.php?id=4
> 规范 URL： [http ://www.portovenere.a-turist.com/photo_galery.php](http://www.portovenere.a-turist.com/photo_galery.php)

我相信，如果您解决此问题并为其返回相同的 url，`og:url`它将按照您的意愿行事。

# jquery - 加载文件并将其显示在悬停 jQUERY 的窗口上

> ID：11280528
> 
> 赞同：0
> 
> 时间：2012-07-01T08:21:51.357
> 
> 标签：jquery, html, file, load

这是我正在尝试做的事情：

两列，一列是文章（链接）列表，右侧是一个窗口。

每个链接都指向自己的页面，所以我想看看它是否可以在文章右侧的窗口中显示几行，以提供它的内容。

理想情况下，当用户将鼠标悬停在链接上时，javascript/jQuery 将查找文件并显示它。

现在我的链接可以正常工作，悬停时它们会显示我已经在页面本身中设置的任何文本。所以鼠标悬停的节目有效，我只需要知道是否有办法在悬停期间动态加载内容。

我在论坛和电子邮件中以工具提示的形式看到了类似的事情，这些工具提示显示了链接的内容。

有关更多信息，文章是同一页，每篇文章都是其自己的文件，通过“/?id=C1”和 php.ini 粘贴到其中。

这是我现在正在工作的：链接：

```
<a onMouseOver="changeText('La canción verde', 'C1.php')" 
href="?id=C1" alt="La canción verde" title="La canción verde" >
1\. La canción verde</a> 
```

FUNCTION，blurb 出现的 div 是“descripciondecuentos”：

```
<script>
function changeText(msg, documento)
{ document.getElementById("descripciondecuentos").innerHTML=msg; }
</script> 
```

完美的世界，这个函数会对“documento”做一些事情并改变“descripciondecuentos”。不确定在页面加载期间加载所有这些文件是否明智，因为这只会使页面膨胀。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T08:26:38.713

您可能想查看 jQuery 的`load()`功能。

例如：

```
$("a.fetchContent").hover(function() {
    var newLoadedHtml = $(this).attr("href");

    $("#sectionContainer").fadeOut("fast")
        .load(newLoadedHtml + " #content")
        .fadeIn("slow");
}); 
```

和你的 HTML：

```
<ul>
<li>
  <a class="fetchContent"  href="includes/Pages1.html" title="Pages 1">Pages 1</a>
</li>
<li>
  <a class="fetchContent"  href="includes/Pages2.html" title="Pages 2">Pages 2</a>
</li>
<li>
  <a class="fetchContent"  href="includes/Pages3.html" title="Pages 3">Pages 3</a>
</li>
<li>
  <a class="fetchContent"  href="includes/Pages4.html" title="Pages 4">Pages 4</a>
</li>
</ul> 
```

链接的 href 应该是 HTML 文件（或 php 文件）的相对路径，例如：`includes/Pages1.html`. load 函数允许您只加载您正在调用的页面的一部分 ( `+ " #content"`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T08:28:08.553

您可以在链接上使用 jquery 的鼠标悬停功能，如下所示：

```
$('#link').mouseover(function() {
}); 
```

要动态加载内容，您可以在该函数中使用 ajax。

```
$.ajax({
  url: "Your text Url"
}).done(function ( data ) {
  display the data
}); 
```

更多关于 ajax 的信息：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# mysql - 具有多个连接子查询的mysql更新计数查询

> ID：11280529
> 
> 赞同：1
> 
> 时间：2012-07-01T08:22:12.107
> 
> 标签：mysql, subquery

早上，我正在尝试使用 UPDATE、JOIN、SUBQUERY 为每个类别/商店创建产品计数，但我无法正确使用语法，有人可以帮我解决哪里出错：

```
UPDATE 
    oc_category_to_store c2s 
SET 
    c2s.product_count = 
        (
        SELECT 
            count(p.product_id) as product_count,
            p2c.category_id,
            p2s.store_id
        FROM 
            oc_product p
            INNER JOIN oc_product_to_category p2c ON 
                (p.product_id = p2c.product_id)
            INNER JOIN oc_product_to_store p2s ON
                (p.product_id = p2s.product_id)
        ) AS pc
WHERE
        (p2c.category_id = pc.category_id) AND
        (p2s.store_id = pc.store_id) 
```

本质上这是在 OpenCart 中，但现有的产品计数例程是在 PHP 中完成的，是在大型产品数据库上，它会减慢网站的速度。

产品使用 product_to_category 和 product_to_store 表通过 ID 链接到类别和商店，类别也使用 category_to_store 表链接到商店。

我想运行一个 mySQL 查询，通过将值存储在 category_to_store 表中来更新每个类别/商店的产品计数，因为这只需要在添加/删除/更新产品时运行，而不是每次加载任何页面时运行。

```
CREATE TABLE `oc_product_to_category` (
  `product_id` int(11) NOT NULL,
  `category_id` int(11) NOT NULL,
  PRIMARY KEY (`product_id`,`category_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_bin AVG_ROW_LENGTH=9 ROW_FORMAT=FIXED;

CREATE TABLE `oc_product_to_store` (
  `product_id` int(11) NOT NULL,
  `store_id` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`product_id`,`store_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_bin AVG_ROW_LENGTH=9 ROW_FORMAT=FIXED;

CREATE TABLE `oc_category_to_store` (
  `category_id` int(11) NOT NULL,
  `store_id` int(11) NOT NULL,
  `product_count` int(11) DEFAULT NULL,
  PRIMARY KEY (`category_id`,`store_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_bin AVG_ROW_LENGTH=9 ROW_FORMAT=FIXED; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T08:57:08.270

您需要使用以下`INNER JOIN`语法：

```
UPDATE 
    oc_category_to_store a
INNER JOIN 
(
    SELECT
        b.category_id,
        c.store_id,
        COUNT(*) AS productcnt
    FROM 
        oc_product a
    INNER JOIN
        oc_product_to_category b ON a.product_id = b.product_id
    INNER JOIN
        oc_product_to_store c ON a.product_id = c.product_id
    GROUP BY
        b.category_id,
        c.store_id
) b ON 
    a.category_id = b.category_id AND 
    a.store_id = b.store_id
SET
    a.product_count = b.productcnt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T08:45:45.567

第一个错误在您的查询逻辑中。您的子查询返回 3 列：

```
product_count,
p2c.category_id,
p2s.store_id 
```

而您正试图将此三元组分配给单个列 *c2s.product_count*

更新

第二个错误出现在主查询的 WHERE 子句中。您使用表*p2c*、*p2s*和*pc* 但是 UPDATE 子句仅使用*c2s*。最有可能的 WHERE 子句必须在子查询中，如下所示：

```
UPDATE 
    oc_category_to_store c2s 
SET 
    c2s.product_count = 
        (
        SELECT 
            count(oc_product.product_id) as product_count,
        FROM 
            oc_product p
            INNER JOIN oc_product_to_category p2c ON 
                (p.product_id = p2c.product_id)
            INNER JOIN oc_product_to_store p2s ON
                (p.product_id = p2s.product_id)
        WHERE
            (p2c.category_id = pc.category_id) AND
            (p2s.store_id = pc.store_id)        
        ) 
```

# java - 如何将 JSON lOutput（纬度和经度）放在地图上

> ID：11280531
> 
> 赞同：0
> 
> 时间：2012-07-01T08:22:17.813
> 
> 标签：java, android, json, google-maps

我有一个主要活动来解析我的 mysql 中的 JSON 数据（表跟踪：纬度和经度）现在我想将此数据传递到我的 MapActivity 并显示在谷歌地图上。非常感谢任何帮助。谢谢！

这是我的 JSONactivity

```
 public class JSONActivity extends Activity{
  private JSONObject jObject;

  private String xResult ="";
  //Seusuaikan url dengan nama domain 
  private String url = "http://10.0.2.2/labiltrack/daftartracking.php";

  @Override
 public void onCreate(Bundle savedInstanceState){
  super.onCreate(savedInstanceState);
  setContentView(R.layout.daftartrack);
  TextView txtResult = (TextView)findViewById(R.id.TextViewResult);
  //url += "?lattitude=" + UserData.getEmail();
  xResult = getRequest(url);
   try {
        parse(txtResult);
    } catch (Exception e) {
        e.printStackTrace();
    }
  }

 private void parse(TextView txtResult) throws Exception {
 // TODO Auto-generated method stub
 jObject = new JSONObject(xResult);
 JSONArray menuitemArray = jObject.getJSONArray("joel");
 String sret="";
 //int j = 0;
 for (int i = 0; i < menuitemArray.length(); i++) {
    sret +=menuitemArray.getJSONObject(i).
            getString("lattitude").toString()+" : ";
    System.out.println(menuitemArray.getJSONObject(i)
            .getString("lattitude").toString());
    System.out.println(menuitemArray.getJSONObject(i).getString(
    "longitude").toString());
    sret +=menuitemArray.getJSONObject(i).getString(
    "lattitude").toString()+"\n";   
    //j=i;
  }txtResult.setText(sret);

 }
 /**
* Method untuk Mengirimkan data keserver
 * event by button login diklik
 *
 * @param view
 */
 private String getRequest(String url) {
 // TODO Auto-generated method stub
 String sret="";
 HttpClient client = new DefaultHttpClient();
 HttpGet request = new HttpGet(url);
 try{
   HttpResponse response = client.execute(request);
   sret =request(response);

  }catch(Exception ex){
    Toast.makeText(this,"jo "+sret, Toast.LENGTH_SHORT).show();
  }
  return sret;
 }

   /**
  * Method untuk Menenrima data dari server
  * @param response
 * @return
  */
private String request(HttpResponse response) {
  // TODO Auto-generated method stub

  String result = "";
  try{
      InputStream in = response.getEntity().getContent();
      BufferedReader reader = new BufferedReader(new InputStreamReader(in));
      StringBuilder str = new StringBuilder();
      String line = null;
      while((line = reader.readLine()) != null){
        str.append(line + "\n");
     }
     in.close();
     result = str.toString();
  }catch(Exception ex){
     result = "Error";
  }
  return result;
  }
  } 
```

这是我的 mapActivity

```
public class mapactivity extends MapActivity {
private MapView mapView;
 MapController mc;
GeoPoint p;
//private MyLocationOverlay me = null;

 class MapOverlays extends com.google.android.maps.Overlay
{

  @Override
  public boolean draw (Canvas canvas, MapView mapView, boolean shadow, long when)
    {
    super.draw(canvas, mapView, shadow);

    //translate the geopoint to screen pixels
    Point screenPts = new Point();
    mapView.getProjection().toPixels(p, screenPts);

    //tambah marker
    Bitmap bmp = BitmapFactory.decodeResource(getResources (), R.drawable.pin_red);
    canvas.drawBitmap(bmp, screenPts.x, screenPts.y-50, null);
    //mapView.setSatellite(true);       

    return true;
  }  

   @Override
   public boolean onTouchEvent(MotionEvent event, MapView mapView) 
   {   
     //---when user lifts his finger---
     if (event.getAction() == 1) {                
         GeoPoint p = mapView.getProjection().fromPixels(
             (int) event.getX(),
             (int) event.getY());

         Toast.makeText(getBaseContext(), 
                 p.getLatitudeE6() / 1E6 + "," + 
                 p.getLongitudeE6() /1E6 , 
                 Toast.LENGTH_SHORT).show();
         mc.animateTo(p);

            //geocoding 
         Geocoder geoCoder = new Geocoder(
             getBaseContext(), Locale.getDefault());
         try {
             List<Address> addresses = geoCoder.getFromLocation(
                 p.getLatitudeE6()  / 1E6, 
                 p.getLongitudeE6() / 1E6, 1);

             String add = "";
             if (addresses.size() > 0) 
             {
                 for (int i=0; i<addresses.get(0).getMaxAddressLineIndex(); 
                      i++)
                    add += addresses.get(0).getAddressLine(i) + "\n";
             }

             Toast.makeText(getBaseContext(), add, Toast.LENGTH_SHORT).show();
         }
         catch (IOException e) {                
             e.printStackTrace();
         }   
         return true;
     }
      else                
         return false;
     }      }         

   /** Called when the activity is first created. */
   @SuppressWarnings("deprecation")
 @Override
 public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.mapview1);

 //utk mnampilkan zoom
 mapView = (MapView) findViewById(R.id.mapView);
 LinearLayout zoomLayout = (LinearLayout)findViewById(R.id.zoom);  
 View zoomView = mapView.getZoomControls(); 

    zoomLayout.addView(zoomView, 
        new LinearLayout.LayoutParams(
        LayoutParams.FILL_PARENT, 
        LayoutParams.FILL_PARENT)); 
    mapView.displayZoomControls(true);       

    //menampilkan default peta banda aceh 
    mc = mapView.getController();
    String coordinates[] = {"5.550381", "95.318699"};
    double lat = Double.parseDouble(coordinates[0]);
    double lng = Double.parseDouble(coordinates[1]);

        p = new GeoPoint(
        (int) (lat * 1E6), 
        (int) (lng * 1E6));

        mc.animateTo(p);
        mc.setZoom(14); 
        mapView.invalidate();

        //tambah marker
        MapOverlays mapOverlay = new MapOverlays();
        List<Overlay> listOfOverlays = mapView.getOverlays();
        listOfOverlays.clear();
        listOfOverlays.add(mapOverlay);        

        mapView.invalidate();
        }

   public void btnSatelitClick(View v){
  mapView.setSatellite(true);
  mapView.setStreetView(false);

 }

 public void btnjalanClick (View v){
  mapView.setSatellite(false);
  mapView.setStreetView(true);
  }

          protected boolean isRouteDisplayed() 
          {
              //auto generate method
              return false;
         }

    } 
```

我的 jsonactivity 是从 mysql（字段“纬度”和“经度”）获取数据到列表视图中，但现在我想在谷歌地图上显示该数据（纬度和经度），我该怎么做？请帮助我，提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T08:55:22.573

你需要从另一个类中获取捆绑包：这个类将是你的 `mapActivity`

```
Bundle b = getIntent().getExtras(); // Getting the Bundle object that pass from another activity
        int SelectedPropertylat = b.getInt("SelectedLat");
        int SelectedPropertylong = b.getInt("SelectedLong");

        String  lattitude = Integer.toString(SelectedPropertylat);          
        String  longertude = Integer.toString(SelectedPropertylong);

        Log.d(lattitude,longertude); 
```

并将数据从 mysql 获取到您的应用程序中，请使用以下命令：

```
try{

    JSONArray  earthquakes = json.getJSONArray("PropertyDetails");

    for(int i=0;i<earthquakes.length();i++){                        

        JSONObject e = earthquakes.getJSONObject(i);
                lat = e.getString("P_Lat");
        lonng = e.getString("P_Long"); 
```

然后将 lat 和 long 转换为一个字符串，如：

```
lonnng = Integer.parseInt(lonng.toString());
        latt =Integer.parseInt(lat.toString()); 
```

然后像这样将数据传递到您的地图视图中：

```
Intent moreDetailsIntent = new Intent(PropertiesDetails.this,mapActivity .class);

            Bundle dataBundle = new Bundle();
            dataBundle.putInt("SelectedLong",lonnng);
            dataBundle.putInt("SelectedLat", latt);
            moreDetailsIntent.putExtras(dataBundle);
            startActivity(moreDetailsIntent); 
```

# python - 如何添加几个数字列表的相应元素？

> ID：11280536
> 
> 赞同：17
> 
> 时间：2012-07-01T08:23:40.880
> 
> 标签：python

我有一些数字列表：

```
[1, 2, 3, 4, 5]
[2, 3, 4, 5, 6]
[3, 4, 5, 6, 7] 
```

假设我使用的所有列表长度相同，如何添加这些列表的元素？

这是我希望从上述列表中获得的输出类型。

```
[6, 9, 12, 15, 18] 
```

我知道我需要某种循环——但我怎样才能优雅地做到这一点？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-01T08:25:28.940

试试这个功能风格的代码：

```
>>> map(sum, zip(*lists))
[6, 9, 12, 15, 18] 
```

该[`zip`](http://docs.python.org/library/functions.html#zip)函数匹配具有相同索引的元素。

```
>>> zip(*lists)
[(1, 2, 3), (2, 3, 4), (3, 4, 5), (4, 5, 6), (5, 6, 7)] 
```

然后[`sum`](http://docs.python.org/library/functions.html#sum)通过使用 应用于每个元组[`map`](http://docs.python.org/library/functions.html#map)。

在线查看它：[ideone](http://ideone.com/0mmzI)

* * *

请注意，在 Python 3.x 中，`map`不再返回列表。如果您需要该列表，请参阅以下问题：

*   [在 Python 3.x 中获取 map() 以返回列表](https://stackoverflow.com/questions/1303347/getting-a-map-to-return-a-list-in-python-3-1)

（你可以打电话`list`）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-01T08:26:14.210

```
>>> lis=[[1,2,3,4,5],[2,3,4,5,6],[3,4,5,6,7]]

>>> [sum(x) for x in zip(*lis)]
[6, 9, 12, 15, 18] 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-01T08:27:39.497

假设：

```
a = [1,2,3,4,5]
b = [2,3,4,5,6]
c = [3,4,5,6,7] 
```

这样做：

```
[sum(n) for n in zip(*[a, b, c])] 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-01T08:51:56.293

使用[numpy](http://numpy.scipy.org/)：

```
>>> seq = np.array([
... [1,2,3,4,5],
... [2,3,4,5,6],
... [3,4,5,6,7]])
>>> np.sum(seq,axis=0)
array([ 6,  9, 12, 15, 18]) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-01T08:27:13.303

怎么样：

```
a = [1,2,3,4,5]
b = [2,3,4,5,6]
c = [3,4,5,6,7]

s = map(sum, zip(a,b,c)) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-06-03T14:57:40.413

这也适用于各种长度的列表（仅嵌套 1 次）。

```
def sum_list_of_list_of_int(ll):
    l=[]
    for i in ll:  # "i" type is list
        for ii in range(len(i)):  # "ii" type is int
            if len(l)-1>=ii:
                l[ii]+=int(i[ii])
            else:
                l.append(int(i[ii]))
    return l 
```

# iphone - Objective C（iphone）变量在方法调用中发生变化

> ID：11280538
> 
> 赞同：0
> 
> 时间：2012-07-01T08:24:18.597
> 
> 标签：iphone, objective-c, ios, cocoa-touch, automatic-ref-counting

我正在运行一个 ARC 项目，我注意到一些事情正在搞乱我的项目。在下面的代码块中，

```
- (void)didTapSuggestionButton:(id)sender {
//[_buttonDelegate suggestionButtonPressed:[sender currentTitle]];
//NSLog(@"current title is %@",[sender currentTitle]);
} 
```

在第一行的断点中，我在调试控制台中看到以下内容。

> 自 freeFormAutoCompleteScroller *const 0x0000ace9
> 
> UIScrollView UIScrollView
> 
> 建议按钮 NSMutableArray * 0x6e65006e
> 
> _buttonDelegate objc_object * 0x00646564
> 
> ISA objc_class * 0x00000008
> 
> 发件人 id 0x06d7f3f0 [0] id

* * *

但是在第二行中，我看到：

> 自 freeFormAutoCompleteScroller *const 0x06d7f3f0
> 
> UIScrollView UIScrollView 建议按钮 NSMutableArray * 0x00000000
> 
> _buttonDelegate objc_object * 0x00000000
> 
> isa objc_class * 发件人 id 0x06babf30 [0] id

* * *

“自我”开始引用另一个内存地址？即使我什么都没做？这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T15:24:26.967

酷利欧，

您的第一个转储中的许多值都未初始化。例如：

```
self freeFormAutoCompleteScroller *const 0x0000ace9 
```

`self`永远不能奇怪。

这是一个极不可能的类对象地址：

```
isa objc_class * 0x00000008 
```

我怀疑你不知何故没有按下按钮`retain`的对象`target`。换句话说，您正在尝试执行随机内存。您的问题不在此方法中。

安德鲁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T08:27:39.040

这可能是因为代码同时在另一个线程上被调用，请检查调用堆栈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T08:30:03.563

你不应该写吗

```
NSLog(@"current title is %@",[sender currentTitle]); 
```

?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T15:27:01.447

如果它由 UIButton 调用，请尝试将 (id)sender 修改为“(UIButton *)sender”

# vba - 列表框：添加一个组合框作为项目？

> ID：11280540
> 
> 赞同：3
> 
> 时间：2012-07-01T08:24:33.913
> 
> 标签：vba, excel

是否可以将列表框的每个项目都设为组合框？我需要这个，因为我将列表框设置为可检查，然后我需要让用户为列表的每个元素从不同的选项中进行选择。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T09:42:05.173

如果您不打算分发您的应用程序，那么您还可以查看 TreeView 控件。请参阅此示例。

**代码**

```
Private Sub CommandButton1_Click()
    With TreeView1.Nodes
        .Add , , "R1", "Root 1"
        .Add "R1", tvwChild, , "Test 1"
        .Add "R1", tvwChild, , "Test 2"
        .Add "R1", tvwChild, , "Test 3"
        .Add "R1", tvwChild, , "Test 4"
        .Add "R1", tvwChild, , "Test 5"

        .Add , , "R2", "Root 2"
        .Add "R2", tvwChild, , "Test 11"
        .Add "R2", tvwChild, , "Test 22"
        .Add "R2", tvwChild, , "Test 33"
        .Add "R2", tvwChild, , "Test 44"
        .Add "R2", tvwChild, , "Test 55"
    End With
End Sub 
```

**快照**

![在此处输入图像描述](../Images/22f3ccaad7c6ee71eab431afc76aa5ba.png)

**使用控件**

为了能够使用 Treeview 控件，您的系统必须已经`MSCOMCTL.OCX`注册。然后，您可以通过右键单击添加控件

**快照**

![在此处输入图像描述](../Images/bca08ed928c5e257d04c23634dda7b59.png)

**设计时间快照**

![在此处输入图像描述](../Images/da859aa7b7562a24b2af817a95e86b2d.png)

**下载 OCX**

如果您没有 OCX，则可以从[此处下载](http://www.microsoft.com/en-us/download/details.aspx?id=10019)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T08:33:55.417

您可以通过将列表框替换为数据表视图中的子表单来实现这种效果。
您将通过提供一个复选框来模拟多选，并且您可以将第二列作为列表框。

# java - 是否可以在 Canvas 上打开 JFileChooser？

> ID：11280541
> 
> 赞同：-1
> 
> 时间：2012-07-01T08:24:36.357
> 
> 标签：java, swing, netbeans, awt

有没有其他方法可以打开`JFileChooser`a`JFrame`只包含 a `Canvas`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T08:31:21.070

我不这么认为。
看一下 的文档`Canvas`，似乎唯一可以添加的组件是`PopMenu`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T09:07:12.563

*   没有肮脏的黑客是不可能的，我建议使用[JPanel](http://docs.oracle.com/javase/tutorial/uiswing/components/panel.html)而不是`Canvas`,

*   轻量级`Swing JComponents`落后`AWT Components`，

*   用于绘制到 Swing JComponents 以使用`paintComponent`而不是`paint`

*   我建议不要`AWT Components (Canvas)`混合`Swing JComponents (JFrame or JFileChooser)`

# google-app-engine - Google App Engine + 自定义域

> ID：11280542
> 
> 赞同：4
> 
> 时间：2012-07-01T08:24:40.383
> 
> 标签：google-app-engine, google-apps

我试图将自定义域名映射到我在 Google App Engine 中创建的站点。但是，自定义域并未应用于该站点。以下是我在查看 Google 帮助网站和 stackoverflow 答案后执行的步骤。

**1\. 创建/上传 Google App Engine 站点**

[http://myGoogleSite.appspot.com/](http://myGoogleSite.appspot.com/)

**2\. 购买了一个域名**

mydomain.com

**3\. 使用我的域名提供商创建了 CNAME 记录**

名称：www

价值：ghs.google.com

**4.创建了一个谷歌应用程序帐户**

[https://www.google.com/a/mydomain.com](https://www.google.com/a/mydomain.com)

**5\. Google Apps 帐号中的已验证域名**

**6\. 为 Google App Engine 启用服务。**

添加了站点[http://myGoogleSite.appspot.com/](http://myGoogleSite.appspot.com/)（在步骤 1 中创建）

**7.谷歌管理面板**

设置 > 选择 Google App Engine 网站

添加了新网址

[http://www.mydomain.com](http://www.mydomain.com)

> 解决

一天后，该问题已得到解决，没有任何其他更改。我认为我在域名服务器中添加的 CNAME 条目确实在一天后被应用。尽管我在同一天通过 dnsstuff.com 进行了检查，但它们反映正确。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-18T01:06:31.587

如果 CNAME www 在定向到 ghs.google.com 时不起作用，请改用 ghs.googlehosted.com。至少他们的一些文档是这么说的。

对于一家可以非常准确地筛选数百万页相关数据的公司来说，他们关于自己产品的文档非常糟糕。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T06:40:33.990

一天后，该问题已得到解决，没有任何其他更改。我认为我在域名服务器中添加的 CNAME 条目确实在一天后被应用。虽然我在同一天通过 dnsstuff.com 进行了检查，但它们反映正确

# php - 使用 webGL 加载大数据

> ID：11280544
> 
> 赞同：0
> 
> 时间：2012-07-01T08:25:06.417
> 
> 标签：php, javascript, mysql, ajax, webgl

我需要在我的 webGL 页面中加载从 mysql 数据库中获取的大量数据。我发现的方法是这样的：[http ://www.w3schools.com/php/php_ajax_database.asp](http://www.w3schools.com/php/php_ajax_database.asp)

虽然首先使用 PHP 获取然后将其传递给 webGL 页面的想法并不令人兴奋，但还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T08:44:36.857

目前尚不清楚您要做什么，但是如果您想要向用户显示数据并且您有太多数据，那么您应该使用分页/分页。

大致流程是这样的：

1.  您需要读取一部分数据（比如说 100 条记录）并在第一页向用户显示。
2.  您有使用户能够移动到其他页面的按钮。
3.  单击时，您发送带有按下数字的 ajax 请求，并且您知道需要按下数字 * 100 到 ((按下数字 *100) + 100)

例如：

1.  第一页显示第 0-100 行，用户单击下一步您将获得第 100-200 行并显示它们。
2.  第一页显示第 0-100 行，用户点击第 4 行，您将获得第 400 - 500 行（4*100 到 ((4*100) + 100)）。

# javascript - 如何在 Photoshop 脚本中为值创建输入字段

> ID：11280552
> 
> 赞同：5
> 
> 时间：2012-07-01T08:26:35.147
> 
> 标签：javascript, photoshop

我正在使用 Photoshop 脚本，并且我已将动作转换为运行良好的脚本。我已经使用如下变量定义了另存为文件名：

```
var path="~/desktop/Images/";
var start ="a"; 
```

保存路径是这样设置的：

```
desc1.putPath(cTID('In  '), new File(path + start + "001")); 
```

下一次保存将是：

```
desc1.putPath(cTID('In  '), new File(path + start + "002")); 
```

每次使用路径和起始值的输入运行脚本时，如何制作弹出框？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-01T11:05:28.387

好的，我发现了。想错了把它放在这里，以便它可以帮助其他人。

```
 var Path= Folder.selectDialog("Select folder to save");
  var Start =prompt("Layer Name","","Input Layer Name");

  desc1.putPath(cTID('In  '), new File(Path + "/" + Start + "001")); 
```

# c# - 多语言网站测试 - 我无法输入法语？

> ID：11280556
> 
> 赞同：-1
> 
> 时间：2012-07-01T08:26:42.470
> 
> 标签：c#, asp.net-mvc, localization, globalization, multilingual

我正在使用支持多种语言的 ASP.NET 创建一个网站。为此，我为我的 login.aspx 页面创建了一个本地资源文件。我想要不同语言的登录页面，如法语、西班牙语等。

为此，我还在解决方案资源管理器的 _LOCALRESOURCE 文件夹中创建了两个不同的资源文件。现在在法语本地资源文件中，我需要以法语添加值，但我无法在 Visual Studio 中输入法语。

我必须在视觉工作室的某个地方安装法语字体吗？

我还将法语本地资源文件保存为 login.aspx.(language_name).resx。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T08:33:08.913

你可以在VS之外输入法语吗？如果不; 您需要为您的 Windows 激活法语键盘
转到`Control Panel\Clock, Language, and Region --> keyboard and languages`然后添加法语键盘

![在此处输入图像描述](../Images/252cfbac1b0091ff5872a255aadb73a5.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T08:37:38.320

有一次，看看下面的 MSDN 博客：

[如何为多语言开发自动配置 Visual Studio IDE UI 语言](http://blogs.msdn.com/b/astebner/archive/2006/03/11/549592.aspx)

[Visual Studio IDE 中的多语言开发支持](http://blogs.msdn.com/b/astebner/archive/2006/03/07/545919.aspx)

# ios - 在可能未知的类上调用 Class 方法 (iOS)

> ID：11280561
> 
> 赞同：0
> 
> 时间：2012-07-01T08:27:23.913
> 
> 标签：ios, class, methods

假设我有一个特定的对象类，它定义了一个返回有关该类的简单信息的类方法，因此：

```
+ (NSInteger) defaultValueForClass {
    return 5;
} 
```

现在，假设我有一系列子类，每个子类都覆盖此方法以提供不同的信息。我的问题是：如何在不知道正在执行哪个具体子类的情况下调用该类方法，从而使用相关的子类方法？我不能简单地去：

```
[[anObject class] defaultValueForClass] 
```

...因为编译器此时不知道我的自定义子类方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T08:31:59.210

对不起我之前的帖子，我错了，只需定义一个协议然后检查你的类是否符合ToProtocol，或者检查给定的类是否“isSubclassOfClass”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T08:56:11.713

为我工作。

```
// car.m
#import <Foundation/Foundation.h>

@interface Car : NSObject
+ (void)make;
@end

@interface Honda : Car
@end

@interface Porsche : Car
@end

@implementation Car
+ (void)make { NSLog(@"generic"); }
@end

@implementation Honda
+ (void)make { NSLog(@"Honda"); }
@end

@implementation Porsche
+ (void)make { NSLog(@"Porsche"); }
@end

int main() {
    Porsche *porsche = [[Porsche alloc] init];
    [[porsche class] make];

    Car *supercar = (Car *)[[Honda alloc] init];
    [[supercar class] make];

    return 0;
} 
```

并且编译和执行输出没有显示错误或警告。

```
$ clang -framework 基础 car.m -o car.o
$ ./car.o
2012-07-01 01:53:46.559 car.o[8127:707] 保时捷
2012-07-01 01:53:46.561 car.o[8127:707] 本田

```

你使用的是什么版本的 Xcode 和 GCC？是旧的 GCC 还是 LLVM-GCC？

# php - 错误报告问题

> ID：11280564
> 
> 赞同：0
> 
> 时间：2012-07-01T08:27:41.787
> 
> 标签：php, error-reporting

我仍然纠结于错误处理问题。在阅读并尝试了许多不同的脚本之后，我仍然没有对这个问题有一个全面的了解。

我故意犯了语法错误并收到以下错误消息：

```
Parse error: syntax error, unexpected '{' in /home/directory/public_html/mypage.php on line 10 
```

要了解它是如何工作的，作为第一步，我想删除此消息（我能够做到）并将其替换为自定义消息。

如何自定义此消息？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T09:14:51.833

您需要使用[set_error_handler](http://php.net/manual/en/function.set-error-handler.php)。它使您能够捕获抛出的错误并随心所欲地处理它。

# emacs - Emacs lisp - 在两个括号之间的点下提取数字

> ID：11280565
> 
> 赞同：3
> 
> 时间：2012-07-01T08:27:46.750
> 
> 标签：emacs, elisp

我对 Emacs Lisp 还很陌生，并且仍在学习如何做一些基础知识。

我有一些文本`[123]`，我想提取数字`123`。我做了一些不同的尝试，但我似乎仍然无法可靠地捕捉到这个数字。我得到的最接近的是提取字符`]`。

谁能指出我的方向？我最大的困难是了解如何在使用后捕获数字`search-forwards`并`search-backwards`捕获括号的点位置。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T08:45:26.043

尝试

```
(when (re-search-forward "\\[\\([0-9]+\\)\\]" nil t)
  (string-to-number (match-string 1))) 
```

或者，当点已经在数字的顶部时，`thing-at-point`可能更方便：

```
(string-to-number (thing-at-point 'sexp)) 
```

# html - CSS3框架，创建指定高度的中心内容区域

> ID：11280570
> 
> 赞同：0
> 
> 时间：2012-07-01T08:28:21.643
> 
> 标签：html, css, zurb-foundation

我知道 CSS 的基本知识，最近继续使用 CSS 框架，因为它让我的生活更轻松。我有一个关于网格系统的问题，目前正在使用 zurb Foundation 3 (http://foundation.zurb.com/)

我面临的问题主要是在创建行时我不能给它一个特定的高度。在我看来，网格系统被设计为按原样使用，我在不同的地方读到不建议尝试更改行的高度，而是将项目按原样放置在其中。

在我的项目中，我有一个内容区域，我想在其中显示一个固定的高度和宽度 div，但它不适合我。那么，谁能告诉我我该怎么办？下面是我的html代码

更新：编辑了html

```
<div class="row">
  <div class="six columns">
    <div style="height:6em; width:5em;>
          <!-- my block -->
    </div>
  </div>
  <div class="six columns">
    <div style="height:6em; width:5em;>
          <!-- my block -->
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T08:31:53.887

你的“风格”声明是错误的

```
style="height=6em; width:5em; 
```

应该

```
style="height:6em; width:5em;" 
```

注意：您使用 = 而不是 : 并且您错过了结束引号“

而且您不应该使用内联样式 - 与 .css 文件分开并按类定位它们

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="/foundation3/stylesheets/foundation.css"/>
</head>
<body>
<div class="row">
  <div class="six columns">
    <div style="height:6em; width:5em;">
          <!-- my block -->
    </div>
  </div>
  <div class="six columns">
    <div style="height:6em; width:5em;">
          <!-- my block -->
    </div>
  </div>
</div>
</body>
</html> 
```

注意：我没有在这里声明 DOCTYPE - 这是准系统。它确实有效，我已经在 Firefox 和 Chrome 中对其进行了测试。只是说它不起作用是没有帮助的 OP

# android - 在android中作为服务发送短信

> ID：11280573
> 
> 赞同：3
> 
> 时间：2012-07-01T08:30:17.873
> 
> 标签：android, service, android-intent, sms, android-service

我正在制作一个应用程序，它允许我们自动向我们的联系人发送短信，即用户界面允许我们插入我们必须发送的时间和短信内容。现在，即使应用程序已关闭，我如何检查是否该发送短信了。

我认为服务用于这些任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T08:38:38.040

```
private void setRecurringAlarm(Context context) {

    Calendar updateTime = Calendar.getInstance();
    updateTime.setTimeZone(TimeZone.getTimeZone("GMT"));
    updateTime.set(Calendar.HOUR_OF_DAY, 11);
    updateTime.set(Calendar.MINUTE, 45);

    Intent downloader = new Intent(context, AlarmReceiver.class);
    PendingIntent recurringDownload = PendingIntent.getBroadcast(context, 0, downloader, PendingIntent.FLAG_CANCEL_CURRENT);
    AlarmManager alarms = (AlarmManager) getActivity().getSystemService(
            Context.ALARM_SERVICE);
    alarms.setInexactRepeating(AlarmManager.RTC_WAKEUP,
            updateTime.getTimeInMillis(),
            AlarmManager.INTERVAL_DAY, recurringDownload);
} 
```

此警报管理器将在预定时间调用 AlarmReciever。这样做。

您可以在此处找到更多详细信息：[调度任务](http://mobile.tutsplus.com/tutorials/android/android-fundamentals-scheduling-recurring-tasks/)

问候， 阿基夫·哈米德

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T08:36:27.587

为此使用警报管理器，设置一个广播接收器，当“警报”消失时，它会发送消息，看看这里的警报管理器[警报管理器示例](https://stackoverflow.com/questions/4459058/alarm-manager-example)

# vba - 根据列中的值为完整行着色

> ID：11280579
> 
> 赞同：11
> 
> 时间：2012-07-01T08:31:26.937
> 
> 标签：vba, excel, excel-formula

我需要根据列中单元格的值为完整的 Excel 行着色。

我有三列（和） `Item`，如果值为：`Price``Status``Status`

*   已交付（至格林）
*   拒绝（对红色）
*   WIP（到橙色）。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-01T08:57:39.390

您可以为此使用（非 VBA）条件格式

如果您的状态列在 C 列中，那么 - 选择了感兴趣区域中的所有行 - 您可以使用诸如此类的规则来根据 C 列条目格式化整行

`=$C1="REJECTED"`并选择红色
`=$C1="WIP"`和橙色等

更改您的列参考以适合

下面的示例来自 Excel 2010

*{NB：如有必要，更改您的文本大小写}*

有关详细信息，请参阅[Debra Dalgleish 的网站](http://www.contextures.com/xlCondFormat01.html)

![在此处输入图像描述](../Images/206f1a1088a119fe2b3f54e23a689da0.png)

# php - 我应该如何将我的 mysql 数据库设置为我的 php 文档模板？

> ID：11280583
> 
> 赞同：1
> 
> 时间：2012-07-01T08:31:56.480
> 
> 标签：php, mysql, database, templates, phpmyadmin

[http://dl.dropbox.com/u/11246427/naysof_template.rar](http://dl.dropbox.com/u/11246427/naysof_template.rar)

我正在使用 XAMPP 并使用 phpmyadmin 设置我的数据库。

以上是我目前的项目。我正在尝试为此“报价”模板设置数据库。如您所见，大多数用户的输入都是`<textarea>`.

我希望发票号码是自动递增的，当点击保存时（我已经在其他模板上做了一个按钮），它将数据存储到数据库中。我创建了数据库、表，但我不知道如何设置它。

我是否将此模板中的所有 textarea 包含到一个表格中，还是制作 2 个表格？因为我不确定它们是否可以组合在一起（例如一张表中的地址、标题、发票编号，以及另一张表中的商品、价格等）。如果是这样，我如何在我的数据库中定义它们？我在链接到 css 时使用“id”，而我在互联网上找到的指南都是“name”。我不确定它是否会有所不同，但是在遵循指南时我没有得到正确的数据库保存/调用。

而且，我一直遵循的指南正在`<input>`用作示例。不知道如何使用`<textarea>`.

这是我的sql语句，执行保存功能时出错，

```
<?php

// Connect database 
mysql_connect("localhost", "root", "") or die (mysql_error());

// Select database
mysql_select_db("naysof_template") or die(mysql_error());

$strSQL = "INSERT INTO invoice_info(";

//$strSQL = $strSQL . "invoice_id, ";
$strSQL = $strSQL . "cust_address, ";
$strSQL = $strSQL . "title, ";
$strSQL = $strSQL . "date, ";
$strSQL = $strSQL . "signature_name) ";

$strSQL = $strSQL . "VALUES(";

//$strSQL = $strSQL . "' . $_POST["invoice_id"] . ', ";
$strSQL = $strSQL . "' . $_POST["cust_address"] . ', ";
$strSQL = $strSQL . "' . $_POST["title"] . ', ";
$strSQL = $strSQL . "' . $_POST["date"] . ', ";
$strSQL = $strSQL . "' . $_POST["signature_name"] . ')";

// The SQL statement is executed 
mysql_query($strSQL) or die (mysql_error());

// Close the database connection
mysql_close();

<h1>The database is updated!</h1>

?> 
```

这是错误，我不明白：

> 解析错误：语法错误，意外的 '"'，在第 20 行的 C:\xampp\htdocs\naysof_template\insert.php 中需要 T_STRING 或 T_VARIABLE 或 T_NUM_STRING

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T09:22:23.780

即使 HTML 放在 *.php 文件中，项目文件中也只有 HTML/CSS/JS 代码，但在任何地方都没有实际的 PHP 代码。

HTML/CSS/JSS 在浏览器中的访问者计算机上工作，它们被称为客户端技术。

Apache/PHP/MySQL 在托管计算机（服务器）上工作，它们被称为服务器端技术。

客户端可以请求从服务器下载一个项目，他会收到它（因为这是服务器的默认行为）。

默认情况下，客户端无法在服务器上存储信息。它可以将信息（例如表单）发送到服务器，但默认情况下它们不会保存在任何地方。

服务器上必须有*一些*PHP 代码（您编写的）检查接收到的表单并决定如何处理它们（例如，将它们保存在一些 MySQL 表中）。

## 编辑（现在您正在向我们展示您的 PHP 代码）：

`unexpected '"', expecting T_STRING or`表示您在这里没有正确使用引号：

```
$strSQL = $strSQL . "' . $_POST["cust_address"] . ', "; 
```

你应该像这样使用它们：

```
$strSQL = $strSQL . "'" . $_POST["cust_address"] . "', "; 
```

# python - Python：在文件中查找字符串

> ID：11280585
> 
> 赞同：1
> 
> 时间：2012-07-01T08:32:17.777
> 
> 标签：python, regex, find

我的python脚本中有以下内容..

```
hostIP = sys.argv[1]
hostsFileLoc = "hosts.txt"

if not hostIP in open(hostsFileLoc).read():
    # Script to add if the string is not in file
else:
    # Print message 
```

唯一的问题是它不是完全匹配，例如......

如果我的文件包含：

```
192.168.0.111 
```

我的主机IP是：

```
192.168.0.11 
```

然后它将找到它作为匹配项。我想我可以用正则表达式来做到这一点，因为总会有一个空格`("\s+")`或逗号`("\,")`，所以我想我可以使用类似的东西

```
test = re.compile("^" + hostIP + "[\s\,]*") 
```

并使用 test 作为我的搜索，但这显然不起作用。我试图找到一些关于此的文档，但无济于事。有没有人建议我如何使用正则表达式的变量进行更具体的搜索。

谢谢

米宾

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T08:38:28.743

它不起作用的唯一原因是您使用`*`in `"[\s\,]*"`，这意味着“空格或逗号**零次或**多次”。因此它将匹配，`'192.168.0.111'`因为它后面有零个空格`11`。更改`*`为`+`（“一次或多次”），它应该可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T08:40:49.877

您可以通过分隔符（例如空格）拆分文本文件，然后在列表中查找字符串：

```
if not hostIP in open(hostsFileLoc).read().split():
    # Script to add if the string is not in file
else:
    # Print message 
```

如果您使用的不是空格，请将分隔符放入*split()*

# linux - vmware player 无法在 kubuntu 中启动服务

> ID：11280590
> 
> 赞同：0
> 
> 时间：2012-07-01T08:33:10.117
> 
> 标签：linux, ubuntu, compilation, vmware, vmware-player

```
my environment:
kubuntu : 3.2.0-generic-pae
vmware player: VMware-Player-4.0.4-744019.i386.bundle 
```

* * *

我已经安装了它。

```
$sh VMware-Player-4.0.4-744019.i386.bundle 
```

* * *

我有一个问题，当我启动“菜单->系统->VMware Player”时

它启动一个窗口并开始编译：

```
 [ok] Virtual Machine Monitor
    [failed] Virtual Network Device
        [ok] VMware Blocking Filesystem
        [ok] Virtual Machine Communication Interface
        [ok] VMCI Sockets

[result fail]Starting Vmare Services
           See log file /tmp/vmware-root/modconfig-2722.log for detail 
```

* * *

来自日志文件：

```
 [msg.dictionary.load.openFailed] Cannot open file "/usr/lib/vmware/settings":
   No such file or directory.
   [msg.dictionary.load.openFailed] Cannot open file "/root/.vmware/config":
   No such file or directory.
   [msg.dictionary.load.openFailed] Cannot open file "/root/.vmware/preferences"
   No such file or directory.

  Failed to find /lib/modules/preferred/build/include/linux/version.h
  Failed to compile module vmnet! 
```

* * *

有人可以告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:51:51.900

好的，我今晚从 4.0.3 升级到 4.0.4 时遇到了同样的问题。我发现的工作是首先从这个 VMWare 社区线程下载补丁 - [http://communities.vmware.com/thread/344213](http://communities.vmware.com/thread/344213)

解压，然后在gedit中打开patch-modules_3.2.0.sh。顶部将有三行内容：

`fpatch=vmware3.2.0.patch
vmreqver=8.0.2
plreqver=4.0.2`

你必须`plreqver=4.0.2`改变`plreqver=4.0.4`

然后，打开你的终端并运行

`sudo ./patch-modules_3.2.0.sh`

作为旁注，请将该文件放在手边，因为我发现在 Ubuntu 12.04 中从 4.0.2 升级到 4.0.3 时我必须做同样的事情。但是，当您在下一次升级中再次尝试相同的操作时（例如，将 plreqver 更改为 4.0.5 并运行脚本），它会说该文件已经打过补丁并且它不会工作。

要解决这个问题，您需要转到“/usr/lib/vmware/modules/source/”文件夹，找到名为“.patched”的隐藏文件，并将其删除（最简单的选择是终端中的“sudo nautilus”并浏览文件夹结构）。然后它认为它没有被修补并再次执行该过程。

希望这能让您的 VMWare 恢复运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T13:22:28.183

我想你的机器上没有安装 linux 头文件，这就是为什么无法构建`vmnet`模块的原因。您必须安装标头，然后再试一次。

# java - 在 Java 的 Swing GUI 中使用线程

> ID：11280596
> 
> 赞同：3
> 
> 时间：2012-07-01T08:35:04.347
> 
> 标签：java, multithreading, swing

我正在使用以下代码，`JLabel`每 0.5 秒替换一次，用相同的句子但用另一个点。

```
 Runnable r1=new Runnable() {
        @Override
        public void run() {
            while(true){
                try {
                    connectionStatus.setText("Connection Established...");
                    Thread.sleep(500L);
                    connectionStatus.setText("Connection Established.");
                    Thread.sleep(500L);
                    connectionStatus.setText("Connection Established..");
                    Thread.sleep(500L);
                } catch (InterruptedException ex) {

                }
            }
        }
    };
Thread th1=new Thread(r1);
th1.start(); 
```

这是使用线程的真正目的吗？这会影响程序的速度吗？如果我正在做的事情如此愚蠢，还有其他方法可以做如此愚蠢的事情吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T08:54:41.220

> 这是使用线程的真正目的吗？

如果您希望这些操作**并行**运行，那么答案是肯定的

> 还有其他方法可以做这种愚蠢的事情吗？

如果您以固定的时间间隔更新标签，那么您可能应该改用[Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html) s

附带说明：

*   您应该避免`while(true)`在执行多线程时使用，您应该定义一个在循环中测试的停止布尔值，或者`Thread.interrupted()`在扩展`Thread`类时使用
*   从非 EDT 线程更新 UI 元素时，您应该使用`SwingUtilities.invokeLater`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-01T08:43:51.567

尝试使用`Timer`来自 Swing 库的代替。将这些用于与 GUI 相关的任务通常是一个更好的主意。当您尝试在多个组件上使用定时事件时，这将特别派上用场，因为所有计时器共享相同的计时器线程。

它还提供了基于监听器的灵活直观的编程模型。

无需重新发明轮子。

[定时器教程](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)

***编辑：***

对车轮改造部分的一点跟进。您还应该考虑 Andrew Thompson 的建议。Swing 中有一些组件是专门为指示进度而设计的。正如您尝试做的那样，没有必要使用标签来做到这一点。看看[`JProgressBar`](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JProgressBar.html)。它会很简单，看起来会更专业。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-01T08:46:05.580

第一个建议，而不是使用这样的东西：

```
while(!isStopped) {
  // do some work
} 
```

通过您的方法，您刚刚创建了无限循环。

**注意：**看看[Java Timer](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/Timer.html)。这是非常有用和高效的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-01T10:49:58.603

这段代码有几个问题。

1.  Swing 组件应在 Event Dispatch Thread 上访问/更新，并且不是线程安全的。所以启动另一个线程来更新你`JLabel`的根本就没有完成。有关更多信息，请参阅[“Swing 中的并发”](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)教程
2.  即使您在 EDT 上调用上面的代码，您也不会看到任何更新，`JLabel`因为这`Thread.sleep`会阻塞 EDT，并避免重绘。

所以解决方案是使用[`javax.swing.Timer`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)类，它允许定期对 EDT 执行操作，并且不会在其间阻塞 EDT。另请参阅[`Timer`教程](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)。作为副作用，使用计时器可以避免`while(true)`永远不会结束的循环。

[您可以在此处](https://stackoverflow.com/questions/11088910/timing-with-swing-animation/11090056#11090056)找到更完整的答案。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-01T09:47:24.843

试试这个，

1.  **如果您的目的是并行处理**，您将需要上述方法。

2.  你已经给出了**while (true)**，这将导致一个**无限循环，你必须控制它，最好有一个布尔变量**来控制数字。while 循环的迭代。

3.  **让您的非 UI 线程处理 OUT 的 Event Dispatcher Thread**，否则您将使 GUI 挂起，直到您的线程完成其 run() 方法。在您的情况下，它是无限的，如 while (true)。

4.  如果要**同步**非**ui 工作和 ui 工作**，则可以使用**Handler 或 Swing-Worker。**

5.  最后但并非最不重要的一点，看看**TimeTask**，看这个链接

    [http://enos.itcollege.ee/~jpoial/docs/tutorial/essential/threads/timer.html](http://enos.itcollege.ee/~jpoial/docs/tutorial/essential/threads/timer.html)

# php - 如何在 Zend 中发布具有特定内容类型的帖子？

> ID：11280598
> 
> 赞同：1
> 
> 时间：2012-07-01T08:35:12.303
> 
> 标签：php, zend-framework, youtube, captions

有没有办法使用 Zend GData 发布特定的内容类型？具体来说，我想发布一个类型为

```
"Content-Type: application/vnd.youtube.timedtext; charset=UTF-8" 
```

否则，我需要使用 cURL 吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T13:03:01.087

您可以使用以下内容设置文件的特定内容类型`setContentType()`：

```
$yt = new Zend_Gdata_YouTube($httpClient);

$filesource = $yt->newMediaFileSource('your_file.ext');
// content type you want to use
$filesource->setContentType('application/vnd.youtube.timedtext; charset=UTF-8'); 
```

Zend 框架中有更多选项的好例子[：文档：使用 YouTube 数据 API - Zend 框架手册：将视频上传到 YouTube](http://framework.zend.com/manual/en/zend.gdata.youtube.html#zend.gdata.youtube.uploads)。

# extjs - 将网格面板添加到选项卡面板的第一个选项卡

> ID：11280602
> 
> 赞同：2
> 
> 时间：2012-07-01T08:35:33.143
> 
> 标签：extjs, extjs4, sencha-touch, extjs4.1

我有一个可以正常工作的网格。现在我需要将此 GRID 添加到第一个选项卡面板。我怎样才能做到这一点？

我的代码：

网格.JS

```
Ext.create('Ext.grid.Panel', {
    xtype:'grid',
    title: 'Simpsons',
    store: Ext.data.StoreManager.lookup('simpsonsStore'),
    columns: [
        { header: 'Name',  dataIndex: 'name' },
        { header: 'Email', dataIndex: 'email', flex: 1 },
        { header: 'Phone', dataIndex: 'phone' }
    ],
    height: 200,
    width: 400,
    renderTo: Ext.getBody()
}); 
```

选项卡

```
Ext.create('Ext.tab.Panel', {
    width: 300,
    height: 200,
    activeTab: 0,
    items: [
        {
            title: 'Tab 1',
            xtype:'grid'
        },
        {
            title: 'Tab 2',
            html : 'Another one'
        }
    ],
    renderTo : Ext.getBody()
}); 
```

我已经`xtype:grid`在 GRID.JS 中添加了，我正在尝试从第一个选项卡中的 TAB.JS 访问该网格，但它没有显示出来。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-01T11:10:37.223

`xtype: 'grid'`- 意思是`create standard Ext.grid.Panel and add it here`。

你有两个选择：

创建您的网格并将其保存到变量中。

```
var _grid = Ext.create('...', {...});

Ext.create('Ext.tab.Panel', {
    ...
    items: [
       _grid
    ]
}); 
```

或者，使用 new 定义您自己的类`xtype`

```
Ext.define('MyGrid', {
   extend: 'Ext.grid.Panel',
   alias: 'widget.mygrid',
   ... 

});

Ext.create('Ext.tab.Panel', {
    ...
    items: [{
       xtype: 'mygrid'
    }]
}); 
```

# mysql - 基本 MySQL 查询

> ID：11280604
> 
> 赞同：1
> 
> 时间：2012-07-01T08:35:41.883
> 
> 标签：mysql

在 MySQL 中，我需要创建一个名为 users 的新表，其中包含以下字段：

```
id – integer type (primary key)
first_name – varchar type
username – varchar type
password – char type with length 40 (this is the length of a sha1 hash)
type – varchar type (‘admin’ or ‘author’) 
```

一切看起来都很简单，除了

```
type – varchar type (‘admin’ or ‘author’) . 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T08:37:12.017

你想使用 MySQL 的[`ENUM`](http://dev.mysql.com/doc/en/enum.html)数据类型：

> An`ENUM`是一个字符串对象，其值选自创建表时列规范中明确枚举的允许值列表。

因此，在您的情况下：

```
`Type` ENUM('admin', 'author') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T08:38:03.343

你应该使用 ENUM 数据类型 [http://dev.mysql.com/doc/refman/5.0/en/enum.html](http://dev.mysql.com/doc/refman/5.0/en/enum.html)

```
`type` ENUM ('admin','author') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T08:41:10.090

如果您确定用户类型不会是其他任何东西，`admin`或者`author`您可以使用`ENUM`：

```
`type` ENUM('admin', 'author') NOT NULL DEFAULT 'author' 
```

但是，如果可能的用户类型需要扩展或者当您需要在表单中列出不同的用户类型时，这可能会导致反模式。如果是这种情况，您可以添加另一个表：

```
user_types (type) 
```

`type`a在哪里`VARCHAR(20)`（应该足够长）。在您的`users`表中，您创建相同类型的字段并向`user_types`表中添加外键。

* * *

顺便说一句，不要存储简单`SHA1()`的密码，而是使用[Bcrypt](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php) :)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-06-01T12:30:04.627

枚举是数字、天数等列表的集合

```
ENUM('admin','author'); 
```

# c# - 依赖 EventHandler 订单调用好不好？

> ID：11280612
> 
> 赞同：1
> 
> 时间：2012-07-01T08:36:45.173
> 
> 标签：c#, event-handling

在我的设计中有三方：

*   MSFT 订单簿
*   纳斯达克指数（需要在 MSFT 订单簿更改时重新计算）
*   MSFT 策略（需要在 MSFT 订单簿或纳斯达克指数变化时重新计算）

所以我附上两者`NASDAQ index`并`MSFT strategy`喜欢`MSFT orderbook`这样：`msftOrderBook.OrderbookUpdated += orderbookUpdated;`

我也附上`MSFT strategy`以同样的方式倾听`NASDAQ index`变化。

我有以下问题：

*   秩序很重要。由于我想`NASDAQ index`在重新计算策略之前重新计算我应该在附加之前附加`NASDAQ index`到. 这是潜在的错误，因为我没有简单的机制来“保证”我以正确的顺序附加......`orderBook``strategy`
*   当`MSFT`订单簿更新时，它会通知`NASDAQ index`两者`NASDAQ index`并`MSFT orderbook`通知`MSFT strategy`更新。所以`MSFT strategy`收到双重更新，但我不需要。我只想要一次更新，因为预计当 MSFT 订单簿发生变化时，纳斯达克指数也会发生变化。

问题：

*   依赖`EventHandler`调用顺序好不好？如果它不好，我的问题的一般解决方案是什么？
*   关于第二点，我只想在`MSFT strategy` `MSFT orderBook`更新中忽略，因为策略知道每次更新 orderBook 时纳斯达克指数也会更新，因此仅对纳斯达克指数更新做出反应就足够了。但也许你可以建议一些完全不同的更好的东西..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T09:34:06.820

似乎很清楚：

> *   MSFT 订单簿
> *   纳斯达克指数（需要在 MSFT 订单簿更改时重新计算）
> *   MSFT 策略（需要在 MSFT 订单簿或纳斯达克指数变化时重新计算）

和...一起

> *   因为我希望在重新计算策略之前重新计算纳斯达克指数

意味着 MSFT 策略依赖于纳斯达克指数，并且仅间接依赖于 MSFT 订单。
因此，这要求该策略可以订阅的纳斯达克指数上的 Changed 事件。

不过，我倾向于采用没有事件的方法，但尚不清楚这是否可行。

* * *

回复评论：

```
class BusinessLayer
{
    public void Update(Type data)
    {
        OrderBook.Update(data);
        NasdaqIndex.Update(OrderBook);
        NasdaqStrategy.Update(NasdaqIndex);
    }
} 
```

# ember.js - Ember.Binding.transform 迁移到最新代码

> ID：11280613
> 
> 赞同：1
> 
> 时间：2012-07-01T08:37:01.700
> 
> 标签：ember.js

Ember.Binding.transform 在最新的 ember 中已被删除或替换。我有许多采用这种形式的绑定：

```
valueBinding: Ember.Binding.transform({
  to: function(value, binding) {
    //return something
  },
  from: function(value, binding) {
    //return something
  }
}).from('parentView.content.finishBy'), 
```

谁能建议我如何将我的代码更新为新制度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T10:43:29.403

您可以将您的计算属性定义添加到`Ember.computed`，请参阅 [http://jsbin.com/awufuv/edit#source](http://jsbin.com/awufuv/edit#source)：

```
Ember.computed.finishBy = function() {
  return Ember.computed('parentView.content.finishBy', function(key) {
    var finishBy = Ember.getPath(this, 'parentView.content.finishBy');
    return finishBy === 'now';
  }).cacheable();
}; 
```

然后你可以像这样使用它：

```
App.obj = Ember.Object.create({
  parentView: {
    content: {
      finishBy: 'now'
    }
  },
  finishProp: Ember.computed.finishBy()
}); 
```

[在https://github.com/emberjs/ember.js/blob/master/packages/ember-metal/lib/computed.js#L417-434](https://github.com/emberjs/ember.js/blob/master/packages/ember-metal/lib/computed.js#L417-434)中查看更多示例

* * *

只是要明确一点：您不必将自定义计算属性添加到`Ember.computed`. 您基本上可以在代码中的任何位置声明该函数。现在我考虑了一下，您可能希望将助手添加到应用程序命名空间，而不是将其添加/污染到`Ember`. 但这只是个人喜好问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T09:48:39.040

关于如何更新代码的[原始提交](https://github.com/emberjs/ember.js/commit/7ae011753e595086287f06733028b260e0526847)有一个很好的讨论。

但是，在您的情况下，我认为您可以只使用计算属性：

```
value: function(key, value){
  if(arguments.length===1){
    //return something
  } else{
    //set and return something
  }
}).property('parentView.content.finishBy') 
```

# jquery - jquery ajax 显示功能

> ID：11280618
> 
> 赞同：0
> 
> 时间：2012-07-01T08:38:06.177
> 
> 标签：jquery, html, ajax

我一直在使用这个函数从 php 文件中加载数据：

```
$('#form form').submit(function(){
    $('#content').empty();
    $.get('data.php', $(this).serialize(), function(data){                          
        $('#content').html(data);               
    });         
    return false;
}); 
```

我想要的是用一些动画来显示数据，比如`fadeIn`效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T08:41:33.760

你可以这样做：

```
$('#form form').submit(function(){
$('#content').empty();
$('#content').fadeOut();
$.get('data.php', $(this).serialize(), function(data){                          
$('#content').html(data);   
$('#content').fadeIn();            
});         
return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T08:53:11.517

使用对 htynkn 答案的建议编辑，您可以执行以下操作：

```
$('#form form').submit(function(){
    var $content = $('#content');
    $content.empty().fadeOut();
    $.get('data.php', $(this).serialize(), function(data){                          
        $content.html(data).fadeIn();            
    });         
    return false;
}); 
```

通过声明局部变量，您可以获得缩小和效率的好处，而且`$content`您可以按照建议进行链接。您也可以只使用`.hide()`而不是`.fadeOut()`.

# java - 如何修改此视线算法以接受通过角落的光线？

> ID：11280619
> 
> 赞同：6
> 
> 时间：2012-07-01T08:38:10.320
> 
> 标签：java, algorithm

我正在研究一种基于 Theta* 的寻路算法，它是 A* 的一种变体，它提供了一个不受网格约束的良好寻路系统，即使地形/障碍物是基于网格图案的。该系统需要一种视线算法来确定特定路径是否被阻挡。

我发现[这个](http://playtechs.blogspot.com/2007/03/raytracing-on-grid.html)非常有用的视线算法，并且我已经在我的代码中成功地实现了它。不幸的是，它认为以下是无效路径：

![网格](../Images/f4c5b34bb1098ac6b52dd62693cc1c9c.png)

但是，出于我的目的，我希望这样的路径被认为是有效的。我试图通过使用基本公式检测一个点是否在线上来修改算法`y = mx + b`，但是算法的不一致使我无法依赖这样的系统。

有没有有效的方法来修改这个算法以允许这样的路径？是否有另一种更好的算法？请记住，路径的起点和终点*不一定*限于网格，因此所有点都使用`double`精度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T13:16:16.890

您引用的代码实际上省略了明确处理线穿过网格点（四个正方形接触）的情况。您需要检查`error == 0`.

在这种情况下，接触网格点的四个方格中最多有一个方格可能被阻挡以仍然具有有效路径。

问候， 埃里希

# php - PHP通过代理访问url时无法打开流

> ID：11280620
> 
> 赞同：1
> 
> 时间：2012-07-01T08:38:20.533
> 
> 标签：php, proxy, xampp

我在 localhost 上运行一个 php 站点，我收到以下错误。

> 警告：file_get_contents(http://www.engadget.com/rss.xml) [function.file-get-contents]：打开流失败：HTTP 请求失败！在第 26 行的 C:\Program Files\xampp\htdocs\infohut\rss_read_class.php

但是当我在真实服务器中运行相同的托管时，它不会给出任何错误。

另请注意，我的本地电脑是通过代理连接的，当我从另一台直接连接到互联网的电脑上尝试时，问题不存在。

所以我的猜测是它与代理有关。

我正在使用 xampp 进行带有 php 5.1.4 和 Apache 2.2.2 的 Windows 安装

我尝试将我的代理设置添加到 php.ini 以及使用下面

> pfpro.proxyaddress
> 
> pfpro.proxyport

还是想不通。请告知我是否需要更改任何其他设置或任何东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T09:08:37.177

您应该在 php.ini 中启用[allow_url_fopen](http://php.net/manual/en/filesystem.configuration.php)

# c# - 如何从 Windows 服务文件生成 exe

> ID：11280624
> 
> 赞同：1
> 
> 时间：2012-07-01T08:38:40.210
> 
> 标签：c#, .net, visual-studio, windows-services

我创建了一个类继承 ServiceBase 的 Lib 项目，但是当我运行解决方案时，我没有得到 EXE 文件？

```
public class Scheduler : ServiceBase
{    
    static void Main()
    {
        ServiceBase[] ServicesToRun;
        ServicesToRun = new ServiceBase[] {new Scheduler()};
        Run(ServicesToRun);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T08:50:10.803

首先，确保您的项目类型是`Windows Application`Windows 服务推荐的项目类型。

您所做的还不足以安装和启动您的服务。您还不能安装您的服务。您必须提供一个安装程序类，然后可以使用它`InstallUtil`来注册您的服务。

[`ServiceProcessInstaller`](http://msdn.microsoft.com/en-us/library/system.serviceprocess.serviceprocessinstaller.aspx)你可以在类文档中看到一个例子。

之后，再次构建您的服务并通过在命令窗口中运行以下命令来安装它：

```
"%SystemRoot%\Microsoft.NET\Framework\v4.0.30319\InstallUtil.exe" "YourServiceExeName.exe" 
```

然后，您将能够在服务管理单元中看到您的服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T09:28:54.930

为什么不创建**Windows Service**类型的项目？并且安装部分已经被浣熊侠提到了，但是您需要所有服务的exe路径，而不仅仅是服务名称。

祝你好运

# java - 线程“Thread-2”java.lang.OutOfMemoryError 中的异常：Java 堆空间

> ID：11280626
> 
> 赞同：1
> 
> 时间：2012-07-01T08:38:47.827
> 
> 标签：java, java-io

我试图使用 ObjectOutputStream 将其中一个类对象保存到文件中。当我的对象随着大小而增长时，我得到以下错误，否则一切都很好。

**线程“Thread-2”java.lang.OutOfMemoryError 中的异常：java.io.ObjectOutputStream$HandleTable.growEntries(ObjectOutputStream.java:2308) 处的 Java 堆空间**

**我的代码如下所示：**

```
 try {
        FileOutputStream fout = new FileOutputStream("D:\\out.dat");
        ObjectOutputStream os = new ObjectOutputStream(fout);
        os.writeObject(this.obj);  // Writing object to a File

        os.close();
        fout.close();
        os=null;
        fout=null;
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

请建议我如何解决这个问题？有什么替代方法可以达到同样的效果吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T08:44:42.727

使用选项启动您的程序`-Xms1024M -Xmx1024M`。除非该对象非常大和/或您的计算机具有少量 RAM，否则您通常不会收到该错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T09:22:50.177

前段时间我遇到了类似的问题，我有以下两个选项来解决此类问题：

1.  `-Xms`通过调整和`-Xmx`参数来增加 JVM 内存
2.  如果对象真的很大，那么您可能应该考虑将其拆分成更小的块，以便在读取时重新组合

# java - 如何在数组中初始化空对象？

> ID：11280627
> 
> 赞同：1
> 
> 时间：2012-07-01T08:39:14.877
> 
> 标签：java, arrays, object, null, initialization

```
public static MyType mtOrders;    
public static MyType mtCustomers;    
public static MyType mtItems;    
public static MyType mtGroups;    
public static MyType mtDelieverAddresses;    
public static MyType mtVendors;    
public static MyType mtOrderItems;    
public static MyType mtPrims;        

public final static MyType[] xTable = {mtCustomers, mtGroups, mtItems, mtOrders,
                        mtDelieverAddresses, mtVendors, mtOrderItems, mtPrims};

for (int i = 0; i < xTables.length; i++) {    
  xTable[i] = new MyType();
} 
```

执行后`xTable`的元素被初始化，但是`mtOrders`......`mtPrims`为空！

我明白为什么会这样，但我想不出我是如何初始化循环中的对象的。

我不想这样做：

```
mtOrders = new MyType();
mtCustomers = new MyType();
...
mtPrims = new MyType(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T08:51:56.340

`xTable`而那一系列静态变量是不同的*引用*，*可能*指向同一个对象，但不能用于相互修改。也就是说，它们都可以用来修改同一个*对象*，但是在一个对象上拥有一个点并不会在该对象上产生另一个点。

我不太明白你的实际目标。我能提供的最好的方法是使用他们都会指出的一些中间类。所以`mtOrders`不会是 a `MyType`，而是 a `MyTypeRef`，它将有一个`MyType`字段。然后，将其初始化为 new `MyTypeRef`，并使用循环设置`MyType`所有 refs 中的对象。由于静态变量和`xTable`条目都指向同一个`MyTypeRef`，因此将`MyType`字段设置在一个上也会影响另一个。

IMO，使用该循环而不是初始化每个单独的变量看起来像更紧凑的代码，但它不起作用。只需多写几行代码，这样它就不是那么漂亮但确实有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T08:51:11.300

除了分配给它之外，Java 没有其他方法来初始化引用变量。您也许可以使用地图接近您想要的：

```
public static final String myOrders = "mtOrders";
// etc.

public final static Map<String, MyType> xTable;

static {
    HashMap<String, MyType> table = new HashMap<String, MyType>();
    String[] keys = { myOrders, . . . }
    for (int i = 0; i < keys.length; ++i) {
        table.put(keys[i], new MyType());
    }
    xTable = Collections.unmodifiableMap(table);
} 
```

然后，您可以通过以下方式获取各个元素：

```
MyType orders = xTable.get(myOrders); 
```

如果这不能满足您的需求，您只需单独分配每个字段。

# ruby-on-rails - 在 Rails 3 中使用 has_many 通过关联防止孤立对象

> ID：11280630
> 
> 赞同：4
> 
> 时间：2012-07-01T08:40:17.993
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations, orphan

我有一个带有“member”、“group”、“membership”和“user”的模型。数据以树状结构组织，其中包含与其相关联的成员的组。没有任何组关联的成员被认为是孤立的，对应用程序没有用处。

当用户销毁组时，不应留下任何孤立的成员。换句话说：当且仅当最后一个组关联被删除时，才应该销毁成员。最好这应该发生在单个事务中，但最重要的方面是孤立对象不会随着时间的推移在数据库中累积。

仅应删除与用户关联的成员和组。其他用户拥有的组、成员和成员资格完全不受影响。（有人可能会争辩说可以随时运行全局清理方法，但我想隔离破坏性操作以仅影响当前用户对象。）

我的问题：在 Rails 3 中实现此功能的最有效和最优雅的方式是什么？我当前的实现（由此处描述的简化模型说明）不会从数据库中删除成员，除非用户手动删除它（或者通过级联删除删除整个用户和他/她的所有数据。）

```
class User < ActiveRecord::Base
  has_many :groups, :foreign_key => 'owner_id', :dependent => :delete_all
  has_many :members, :foreign_key => 'owner_id', :dependent => :destroy
end

class Member < ActiveRecord::Base
  belongs_to :owner, :class_name => 'User'    
  has_many :memberships, :dependent => :destroy
  has_many :groups, :through => :memberships
end

class Membership < ActiveRecord::Base
  belongs_to :member
  belongs_to :group
end

class Group < ActiveRecord::Base
  belongs_to :owner, :class_name => 'User'
  belongs_to :parent, :class_name => 'Group'    
  has_many :groups, :foreign_key => 'parent_id', :dependent => :destroy
  has_many :memberships, :dependent => :destroy
  has_many :members, :through => :memberships
end 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-27T19:46:05.823

我通过在 Membership 类中添加一个回调来解决这个问题，该回调会在成员资格被破坏时通知成员。如果成员对象不再具有任何组关联，则成员对象会自行销毁。

```
class Membership < ActiveRecord::Base
  belongs_to :member
  belongs_to :group

  after_destroy :notify_member

  def notify_member
    member.destroy_if_empty_groups
  end
end

class Member < ActiveRecord::Base
  belongs_to :owner, :class_name => 'User'    
  has_many :memberships, :dependent => :destroy
  has_many :groups, :through => :memberships

  def destroy_if_empty_groups
    if groups.count == 0
      self.destroy
    end
  end
end 
```

# c# - 将 stringbinary 转换为 ascii

> ID：11280631
> 
> 赞同：2
> 
> 时间：2012-07-01T08:40:25.873
> 
> 标签：c#, windows-phone-7

我刚刚开始为 wp7 开发应用程序，我正在尝试使用 c# 将二进制字符串转换回 ascii。

但我不知道该怎么做。希望有人可以在这里帮助我。

例子 ：

输入字符串：`0110100001100101011011000110110001101111`

输出字符串：`hello`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T08:56:43.577

# 简单的解决方案，

使用 SubString 并内置 Convert.ToByte 可能如下所示：

```
string input = "0110100001100101011011000110110001101111";
int charCount = input.Length / 8;
var bytes = from idx in Enumerable.Range(0, charCount)
            let str = input.Substring(idx*8,8)
            select Convert.ToByte(str,2);
string result = Encoding.ASCII.GetString(bytes.ToArray());
Console.WriteLine(result); 
```

# 另一种解决方案，自己进行计算：

我添加了这个以防您想知道应该*如何*执行计算，而不是框架中的哪个方法为您执行计算：

```
string input = "0110100001100101011011000110110001101111";
var chars = input.Select((ch,idx) => new { ch, idx});
var parts = from x in chars
            group x by x.idx / 8 into g
            select g.Select(x => x.ch).ToArray();

var bytes = parts.Select(BitCharsToByte).ToArray();
Console.WriteLine(Encoding.ASCII.GetString(bytes)); 
```

其中 BitCharsToByte 进行从 char[] 到相应字节的转换：

```
byte BitCharsToByte(char[] bits) 
{
    int result = 0;
    int m = 1;
    for(int i = bits.Length - 1 ; i >= 0 ; i--) 
    {
        result += m * (bits[i] - '0');
        m*=2;
    }
    return (byte)result;
} 
```

上述两种解决方案的作用基本相同：首先将字符分组为 8 个；然后获取该子字符串，获取表示的位并计算字节值。然后使用 ASCII 编码将这些字节转换为字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T09:03:11.713

您可以使用`BitArray`该类并使用其`CopyTo`功能将您的位字符串复制到字节数组

然后您可以使用将字节数组转换为字符串`Text.Encoding.UTF8.GetString(Byte[])`

[请参阅MSDN 上 BitArray 上的](http://msdn.microsoft.com/en-us/library/system.collections.bitarray.copyto.aspx)此链接

# compression - .ZIP 格式规范中定义的字长

> ID：11280639
> 
> 赞同：1
> 
> 时间：2012-07-01T08:42:19.653
> 
> 标签：compression, zip, standards, cpu-architecture

因此，我一直在阅读[PKWARE 的 .zip 文件格式规范，](http://www.pkware.com/documents/casestudies/APPNOTE.TXT)并注意到在几个地方，它们以单词（处理器单词，而不是字典单词 :-)）给出块大小。

现在，按照我的理解，一个字的字节大小特定于某个处理器系列。因此，如果一个文件在 i386 上压缩，然后在 x64-86 上解压缩，这两种架构将有不同的单词定义（4 字节与 8 字节），因此会以不同的方式解释块数据。

我在这里错过了什么吗？还是 PKWARE 的人只是假设 1 个字 = 4 个字节？这对我来说似乎是最有可能的选择 - 我已经使用十六进制编辑器检查了一些 zip 文件，并且 4 字节的定义适合，但我想要一些确认，因为它不像我有一大堆不同的处理器来测试:)

提前谢谢，如果问题已经存在，很抱歉 - 我确实尝试过搜索，但这有点困难，因为“单词”这个词太模棱两可了（明白我的意思吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T17:56:00.993

在规范中以 deflate 格式对存储块说“字”的地方，它意味着两个字节（按 LSB 顺序）。

对于 zip 解密（不应该使用所述加密，因为它太弱了），一个词再次表示两个字节。

当谈到内爆下的通用标志字时，它再次表示两个字节。

# java - Java Eclipse 中的 OJDBC 代码问题

> ID：11280643
> 
> 赞同：0
> 
> 时间：2012-07-01T08:42:47.543
> 
> 标签：java, jdbc

我制作了一个注册表 reg1 并从 HTML 文件中存储了每个注册用户的值。现在我在 HTML 中创建了一个登录页面，用户可以在其中提供他们的用户名并查看他们输入的数据。我已经创建了一个用户“bbb”并且只想显示他的用户名。所以我制作了如下的一般 java 代码：

```
 import java.io.IOException;
    import java.io.PrintWriter;
    import java.sql.Connection;
    import java.sql.DriverManager;
    import java.sql.PreparedStatement;
    import java.sql.ResultSet;
    import java.sql.SQLException;
    import java.sql.Statement;

    import javax.servlet.ServletException;
    import javax.servlet.http.HttpServlet;
    import javax.servlet.http.HttpServletRequest;
    import javax.servlet.http.HttpServletResponse;

    public class Check extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
    * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
    */
        protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
         // TODO Auto-generated method stub
         String username=request.getParameter("username");
         try{
             Class.forName("oracle.jdbc.driver.OracleDriver");
             String url="jdbc:oracle:thin:@localhost:1521:XE";
             Connection con=DriverManager.getConnection(url,"system","root");
             Statement stmt=con.createStatement();
             ResultSet rs=stmt.executeQuery("select uname from reg1");

            while(rs.next())    
                {

                String name=rs.getString("uname");
                if(name==username)
                {

                response.setContentType("text/html");
                PrintWriter pw=response.getWriter();
                pw.println("Your User name is:"+username);

            //  System.out.println(""+name);
                }

                    con.commit();

                }
             stmt.close();
    }

                catch (SQLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (ClassNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

    }

   } 
```

它给出了类似的错误`java.sql.SQLException: Closed Statement: next`

表格如下：

FNAME LNAME ADDR MAIL OCCU UNAME PASSWD aaa aaa aaaa aaa aaaa bbb cccc bkgkb jjv jhvjmh jjkg jvjv jvjvh bjbmb

请帮我解决这个问题！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T09:07:05.563

首先不需要使用

```
con.commit(); 
```

只有在将 AutoCommit 设置为 false 时才可以使用它。

```
con.setAutoCommit(false); 
```

其次，我建议您使用`PreparedStatements`更快更安全的。
接下来，无需关闭您的 Statement。

在**finally**块中，您必须`con.close()`在关闭连接时调用，语句将自动关闭。

**注意：**你必须在 finally 块中调用它，因为你`Application`可能会崩溃然后你`Connection`永远不会被关闭。

```
finally {
   if (con != null) {
      con.close();
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T09:00:49.767

尝试删除`con.commit`线，没有必要这样做。

您应该在那里添加`finally`并`catch`关闭该语句。

您还应该使用[PreparedStatement](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)而不是 Statement。

关于`finally`看[这里](http://docs.oracle.com/javase/tutorial/essential/exceptions/finally.html)。

# java - xmlreader 不运行 startelement 方法

> ID：11280645
> 
> 赞同：1
> 
> 时间：2012-07-01T08:43:08.243
> 
> 标签：java, xml-parsing

我有关于 xmlreader 的问题。我可以运行它并且 url 是正确的，但它没有运行 startelement 方法。返回的所有值都是空的。我想知道为什么会发生这种情况以及解决方法。谢谢！

```
package com.headfirstlabs.nasadailyimage;

import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.UnknownHostException;
import java.util.jar.Attributes;

import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;

import org.xml.sax.InputSource;
import org.xml.sax.SAXException;
import org.xml.sax.XMLReader;
import org.xml.sax.helpers.DefaultHandler;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.StrictMode;

public class IotdHandler extends DefaultHandler {
    private String url = "http://www.nasa.gov/rss/image_of_the_day.rss";
    private boolean inUrl = false;
    private boolean inTitle = false;
    private boolean inDescription = false;
    private boolean inItem = false;
    private boolean inDate = false;
    private Bitmap image = null;
    private String title = null;
    private StringBuffer description = new StringBuffer();
    private String date = null;

    public void processFeed() {
    try {
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

        StrictMode.setThreadPolicy(policy); 
    SAXParserFactory factory =
    SAXParserFactory.newInstance();
    SAXParser parser = factory.newSAXParser();
    XMLReader reader = parser.getXMLReader();
    reader.setContentHandler(this);
    InputStream inputStream = new URL(url).openStream();
    reader.parse(new InputSource(inputStream));
    }
    catch(UnknownHostException e)
    {
        title="UnknownHostException";
    }
    catch(IOException e)
    {
        title="IOException";
    }
    catch(SAXException e)
    {
        title="SAXException";
    }
    catch (Exception e) {

        title="Exception";
        System.out.println(e);
    }
    }

    private Bitmap getBitmap(String url) {
        try {
        HttpURLConnection connection =
        (HttpURLConnection)new URL(url).openConnection();
        connection.setDoInput(true);
        connection.connect();
        InputStream input = connection.getInputStream();
        Bitmap bitmap = BitmapFactory.decodeStream(input);
        input.close();
        return bitmap;
        } catch (IOException ioe) { return null; }
    }

    public void startElement(String uri, String localName, String qName,
    Attributes attributes) throws SAXException {
        if (localName.equals("url")) { inUrl = true; }
        else { inUrl = false; }
        if (localName.startsWith("item")) { inItem = true; }
        else if (inItem) {
        if (localName.equals("title")) { inTitle = true; }
        else { inTitle = false; }
        if (localName.equals("description")) { inDescription = true; }
        else { inDescription = false; }
        if (localName.equals("pubDate")) { inDate = true; }
        else { inDate = false; }
        }
    }

    public void characters(char ch[], int start, int length) {
    String chars = new String(ch).substring(start, start + length);
    if (inUrl && url == null) { image = getBitmap(chars); }
    if (inTitle && title == null) { title = chars; }
    if (inDescription) { description.append(chars); }
    if (inDate && date == null) { date = chars; }
    }

    public Bitmap getImage() { return image; }
    public String getTitle() { return title; }
    public StringBuffer getDescription() { return description; }
    public String getDate() { return date; }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T12:41:22.103

问题在于这一行：

```
import java.util.jar.Attributes; 
```

它应该是

```
import org.xml.sax.Attributes; 
```

因为您的第四个参数的类型错误`startElement`，您的方法不会覆盖`startElement`in `DefaultHandler`，因此会调用`startElement`in的默认实现`DefaultHandler`而不是您的方法。

您可以使用`@Override`注解来指示方法应该覆盖超类中的方法。如果带有`@Override`注解的方法没有覆盖超类方法，则会出现编译器错误。事实上，如果你把这个注解放在你的`startElement`方法上，你会得到这样的错误。

# php - 从 __callStatic 返回对静态变量的引用？

> ID：11280646
> 
> 赞同：1
> 
> 时间：2012-07-01T08:43:16.777
> 
> 标签：php

我正在尝试找到一种解决方法，使静态变量不被复制到扩展类（这与后期静态绑定不能很好地配合），这是我认为可能有效的方法，但给了我一个“PHP致命错误：可以” t 在写上下文中使用函数返回值”：

```
<?php

class Person
{
    protected static $tlsb_names = ['name'];
    protected static $tlsb_vars  = [];

    public static function & __callStatic($method,$args)
    {
        echo "call static " . $method . " on " . get_called_class() . "\n";
        if(in_array($method,static::$tlsb_names))
        {
            if(!array_key_exists(get_called_class(),static::$tlsb_vars))
            {
                static::$tlsb_vars[get_called_class()] = [];
            }
            if(!array_key_exists($method, static::$tlsb_vars[get_called_class()]))
            {
                echo "set var $method for " . get_called_class() . "\n";
                static::$tlsb_vars[get_called_class()] = null;
            }
            return static::$tlsb_vars[get_called_class()][$method];
        }
    }

    public static function show_name()
    {
        static::name() . "\n";
    }

    public static function call_me_al()
    {
        static::name() = "Al";
    }

    public static function call_me_joe()
    {
        static::name() = "Joe";
    }   
}

class Al extends Person{}
class Joe extends Person{}

Al::call_me_al();
Joe::call_me_joe();

Al::show_name();
Joe::show_name(); 
```

有问题的部分是行：

```
public static function call_me_al()
{
    static::name() = "Al";
} 
```

显然这是一个编译时错误，因为我的 echo 没有运行。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T10:38:26.783

以下代码行是错误的：

```
public static function & __callStatic($method,$args) 
```

您需要匹配[该`__callStatic`函数^(*Docs*)](http://php.net/manual/language.oop5.overloading.php#object.callstatic)的定义，并且没有通过引用返回：

```
public static function __callStatic($name, $arguments) 
```

所以你试图达到的目标是不可能的。

而您周围的另一个问题应该能够通过[*后期静态绑定*(LSB) ^(*Docs*)](http://php.net/manual/language.oop5.late-static-bindings.php)解决。

还要记住，Magic 很难调试，所以准备好你的单步调试器并单步调试应用程序，这样你就可以更好地了解实际发生的情况。PHP 中的调试器称为 Xdebug，大多数 PHP IDE 和编辑器都支持它。

# matlab - 如何将指数值（1.3e12）和正常值（1.3）存储在matlab的同一矩阵中？

> ID：11280647
> 
> 赞同：-1
> 
> 时间：2012-07-01T08:43:23.237
> 
> 标签：matlab, number-formatting, floating-point-precision

我有一个文件，其中包含从 0.1 到 1.3e12 的值。我一直在尝试将它存储在同一个数组中，但它不起作用。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:56:26.713

数字 0.1 和 1.3e12 都以浮点数据类型存储。该`double`类型是在 Matlab 中存储其中任何一个的默认值。所以答案是*肯定*的，你可以将它们存储在同一个矩阵中。

您*实际上*指的是数字*格式*以供查看的方式。请查看[文档`format`](http://www.mathworks.com/help/techdoc/ref/format.html)

# qt - QML 中继器：父/子与所有权

> ID：11280648
> 
> 赞同：4
> 
> 时间：2012-07-01T08:43:25.233
> 
> 标签：qt, parent, parent-child, qml

谁能帮我澄清[QML Repeater 文档](http://doc.qt.nokia.com/4.7-snapshot/qml-repeater.html)首先说的意思

> “由中继器实例化的项目按顺序插入，**作为中继器父**级的子级。”，

进而

> “注意：**Repeater 项目拥有它实例化的所有项目**。删除或动态销毁由中继器创建的项目会导致不可预测的行为。”？

QML 中的视觉对象的子/父关系和所有权是否相同？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T23:34:08.910

QtQuick 中的对象父级（所有权）和可视父级并不相同。对象父对象在创建时设置并且永远不会更改。可视父级可以随时通过“父级”属性进行更改。

中继器创建委托并将所有权设置为自身，并将可视父级设置为其父级。换句话说，Repeater 拥有代理，但将视觉呈现留给其父级（在大多数情况下，定位器）。

Qt 5 文档正在这方面进行改进。这是一个片段（Qt 5 文档快照最近没有更新 - 这是来自源）：

> 在使用 Qt Quick 的 QML 应用程序中有两种不同的父子关系。第一种是确定对象生命周期语义的所有权父级（也称为 QObject 父级）。第二种是视觉父级，它决定了在画布上绘制项目的位置，以及某些属性（例如，不透明度适用于视觉子级）。
> 
> 在几乎所有情况下，视觉父级与所有权父级相同。有关该主题的更深入信息，请参阅有关 Visual Parent 的文档。

不幸的是，“Visual Parent”主题还没有写完。

# facebook - 如何将fb like插入fancybox？

> ID：11280651
> 
> 赞同：0
> 
> 时间：2012-07-01T08:43:58.967
> 
> 标签：facebook, fancybox

有什么方法可以将 facebook like 插入到fancybox 的流行图像中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T09:39:44.753

fancybox 只是另一个 ajax 调用。您可以使用 HTML5 LIKE 按钮

只需在加载完成时触发解析功能。

在 fancybox load 之后尝试下面的简单代码，你可以运行：

```
$("#foo").fancybox({
    'onComplete':function() {
             FB.XFBML.parse(); 
    }
}); 
```

[http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)

# c++ - 如何拆分cin输入

> ID：11280652
> 
> 赞同：0
> 
> 时间：2012-07-01T08:44:30.573
> 
> 标签：c++, cin

我面临着在 C++ 中拆分我的输入的问题，类似于 Python 拆分函数。
输入在不同的行中以 1001-43 1003-45 1008-67 的形式给出。我想知道如何将这些输入分开`'-'`并将它们存储在不同的变量中。

在 Python 中是：

```
a, x = input().split('-') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T08:51:27.113

看看提升。[字符串算法库](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFYQFjAA&url=http%3A%2F%2Fwww.boost.org%2Fdoc%2Flibs%2F1_49_0%2Fdoc%2Fhtml%2Fstring_algo.html&ei=ZhHwT_LvJYy78gPHzI2SDQ&usg=AFQjCNEfJw3oBaHdEmu3fXa3qx5PoITHSQ&sig2=o3hwZDb0fCuM6zuD8Qq53Q)包含您在 python 中可以找到的大部分内容，包括一个拆分函数，该函数将字符串拆分为您选择的 stl 容器。例如（从他们的文档中提取）在破折号或星号上拆分：

```
std::string str1("hello abc-*-ABC-*-aBc goodbye");

std::vector< std::string > SplitVec; // #2: Search for tokens
split( SplitVec, str1, is_any_of("-*"), token_compress_on );

// SplitVec == { "hello abc","ABC","aBc goodbye" } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-07-19T17:05:19.327

```
int number,digit1,digit2,digit3;
std::cin>>number;
digit1=number%10;
digit2=number%100;
digit3=number%1000; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-01T08:47:50.633

查看 strtok()，[http: //www.cplusplus.com/reference/clibrary/cstring/strtok/](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)

# c++ - 迭代器算术

> ID：11280653
> 
> 赞同：12
> 
> 时间：2012-07-01T08:44:35.703
> 
> 标签：c++, stl, iterator

在 c++ STL 中，如果我有一个指向`it`向量的迭代器`v`，则`it - v.begin()`保证会给我指向向量的索引，这样`*it == v[it - v.begin()]`呢？如果是这样，所有随机访问迭代器都是这样吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-01T08:51:43.497

是的，对所有 RA 迭代器都是如此。

# php - PHP帐户权限，会话或mysql检查

> ID：11280655
> 
> 赞同：0
> 
> 时间：2012-07-01T08:44:40.823
> 
> 标签：php

对于具有版主权限的用户；当用户登录时，我是否查询以检查用户是版主，然后设置会话？例如，在带有版主选项的页面上

```
if($_SESSION['mod']==1) {
//moderator options
} 
```

或者，我是否在每个页面上都进行查询并检查用户是否被标记为版主？然后对于主持人选项，例如

```
if($moderatorfound==1) {
//moderator options
} 
```

下面，我目前将用户名设置为 cookie 中的版主，但是当我学习 PHP 安全性时，这是不安全的；

```
 if($moderator=='1') {
    setcookie('username[3]',$moderator,time()+(60*60*24*365));  
    }

 if($_COOKIE['username'][3]==1) {
    //moderator options
    } 
```

执行此操作的安全方法是什么？示例会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T08:53:13.837

用户登录后，将他的信息存储在会话变量中。
无需检查每一页上的数据库。
cookie 不是保存敏感信息（例如特权）的好解决方案，因为它可能会被用户更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T08:53:37.240

在 cookie 中，设置一个复杂的代码并将其保存在数据库中。如果复杂代码与用户名匹配，则允许访问。

# java - 多个参数到一个 Spring 控制器参数中

> ID：11280657
> 
> 赞同：0
> 
> 时间：2012-07-01T08:44:44.823
> 
> 标签：java, spring, spring-mvc, controller

我有一个如下的课程设置......

```
public class Person {
    protected String firstName;
    protected String lastName;
    protected Integer age;
    ...
} 
```

一个看起来像这样的控制器......

```
@RequestMapping(value={"/person"}, method = RequestMethod.GET)
public void returnPerson(Person person, ModelMap model, HttpServletResponse response) {
    ....
} 
```

我正在传递一个直接的 URL，例如...

```
<a href="/person?firstName=John&lastName=Smith&age=18">Link</a> 
```

是否可以将所有这些传递到我的控制器中的“Person”参数中，而不是`@RequestParam`为每个参数制作大量参数？特别是如果我要传递大量的参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T09:06:33.573

是的，只要您遵循 Person 的属性命名约定，您就可以按照您描述的确切方式执行此操作。

当你用这种方式尝试时，你会遇到什么问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T11:02:16.120

您可以完全按照您的要求使用模型绑定：

```
@ModelAttribute("person")
public Person getPerson() {
    return new Person();
}

@RequestMapping(value="/person", method=RequestMethod.GET)
public void handle(@ModelAttribute("person") Person person, BindingResult errors, ModelMap model, HttpServletRequest req) {
    ...
} 
```

模型属性将由方法初始化，`getPerson`当`handle`方法触发时，请求中的任何参数都将自动绑定到新 Person 对象中的相应属性。保存由于绑定而导致的`BindingResult`任何错误，例如，如果您将“XYZ”作为年龄字段（整数）传递。

更多信息在这里[http://static.springsource.org/spring/docs/current/spring-framework-reference/html/validation.html](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/validation.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T08:23:01.663

这个问题在这里也得到了很好的回答： [Passing parameters from JSP to Controller in Spring MVC](https://stackoverflow.com/questions/5590036/passing-paramters-from-jsp-to-controller-in-spring-mvc)

仔细阅读答案，希望你能得到正确的答案。

# git - 如何在接收后挂钩中获取推送者的信息？

> ID：11280661
> 
> 赞同：6
> 
> 时间：2012-07-01T08:45:47.327
> 
> 标签：git, hook

作者、提交者和推送者在 Git 中可以是不同的人，但 git 并没有将推送者的信息存储在日志中。

那么，我如何得到它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T09:26:35.713

你没有。[上游 repo](https://stackoverflow.com/questions/2739376/definition-of-downstream-and-upstream/2749166#2749166)不对谁提供提交做任何假设：它可以通过电子邮件、USB 密钥上复制的差异补丁以及其他
各种**[传输协议](http://git-scm.com/book/en/Git-Internals-Transfer-Protocols)**。

其中一些协议（ssh、https）*可能*在其日志中包含您寻求的信息，但是：

*   这与Git无关
*   这假设他们的日志级别设置得当。
*   即使对于[Gitolite](https://github.com/sitaramc/gitolite/)，在 repo 中注册[的公共 ssh 密钥的名称](http://sitaramc.github.com/gitolite/users.html)`gitolite-admin`也可以是您想要的任何名称，并且与真实姓名无关。

正如 Linus 提到的（在“[为什么有些开源项目不接受拉取请求，而只通过电子邮件发送补丁文件？](https://softwareengineering.stackexchange.com/questions/149199/why-do-some-open-source-projects-do-not-accept-pull-requests-but-emailing-patch/149202#comment295214_149202) ”）：

> 由于 github 身份是随机的，我希望拉取请求是**[签名标签](https://stackoverflow.com/questions/5663733/signing-tags-in-git)**，以便我可以验证相关人员的身份。

因此，如果您希望作为推送某些提交的人来保证所有 repo 的完整性，您可以在`HEAD`正在推送的内容上制作并签名标签，以便上游 repo 将您视为，而不是完全“推动者”，但验证已推动的内容

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-01T09:26:27.230

如果推送是通过 SSH 进行的，您可以使用`USER`环境变量。（当然，这也适用于本地推送。）当然，这取决于用于 SSH 登录的用户对于系统的不同用户是否不同 - 例如，gitolite 就不是这种情况。（但是，gitolite 会定义`GL_USER`环境变量来识别推送者。）对于 HTTP，您可以尝试`REMOTE_USER`环境变量。

*更新*：总的来说，与提交的作者和提交者相比，这些信息并不是很有趣 - 例如，GitHub 显示执行特定推送的用户总是让我感到惊讶......

# iphone - 在 iOS 上的推文中发布屏幕截图

> ID：11280664
> 
> 赞同：0
> 
> 时间：2012-07-01T08:46:05.807
> 
> 标签：iphone, objective-c, twitter, image

试图在我的应用程序内的推文中发布屏幕截图.. 到目前为止，我已经将它保存到库中，但我需要发布它......这里是截图和空的推特帖子......

```
- (IBAction)savephoto:(id)sender {

// Returns 1024x768 for iPad Retina
CGSize screenDimensions = [[UIScreen mainScreen] applicationFrame].size;

// Create a graphics context with the target size
// (last parameter takes scale into account)
UIGraphicsBeginImageContextWithOptions(screenDimensions, NO, 0);

// Render the view to a new context
CGContextRef context = UIGraphicsGetCurrentContext();
[customview.layer renderInContext:context];

// Save to Camera Roll
CGRect contentRectToCrop = CGRectMake(18, 14, 602, 460);
UIImage *screenshot = UIGraphicsGetImageFromCurrentImageContext();

CGImageRef imageRef = CGImageCreateWithImageInRect([screenshot CGImage], contentRectToCrop);
UIImage *croppedImage = [UIImage imageWithCGImage:imageRef];
UIImageWriteToSavedPhotosAlbum(croppedImage, self, nil, nil);

UIGraphicsEndImageContext(); 
```

…………

```
- (IBAction)tweetphoto:(id)sender {

TWTweetComposeViewController *twitter = [[TWTweetComposeViewController alloc] init];
[twitter setInitialText:@"Enter tweet here!"];
[twitter addImage:[UIImage imageNamed:@""]]; 
```

...........

无法弄清楚在 imageNamed 中输入什么...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T09:04:52.750

```
[...]
UIImage* croppedImage = [UIImage imageWithCGImage:imageRef];

TWTweetComposeViewController *twitter = [[TWTweetComposeViewController alloc] init];
[twitter setInitialText:@"Enter tweet here!"];
[twitter addImage:croppedImage];

UIGraphicsEndImageContext(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T09:00:44.123

你为什么不使用你已经创建的“裁剪图像”对象..你不需要创建另一个使用

[UIimage imageName:@""];

有帮助吗？

# database - 如何使用 JDBC 检索数据

> ID：11280670
> 
> 赞同：0
> 
> 时间：2012-07-01T08:47:23.267
> 
> 标签：database, jdbc, resultset

我一直在尝试使用以下代码。

正在建立连接。但是它`resultSet`是空的（不是空的），而数据库中有几个条目（每个 2 个字段）是相同的。

它不进入while条件。我是 JDBC 新手，请帮忙！

我的代码是：

```
import java.sql.*;

public class JDBCTest123
{

    public static void main(String[] args)
    {
        System.out.println("oracle Connect Example.");
        Connection conn = null;
        String url = "jdbc:oracle:thin:@127.0.0.1:1521:XE";
        String driver = "oracle.jdbc.driver.OracleDriver";
        String userName = "system";
        String password = "mumpymamai";
        Statement stmt = null;
        String query = "select * from table1";  
        try
        {
            Class.forName(driver);
            conn = DriverManager.getConnection(url, userName, password);
            stmt = conn.createStatement();
            System.out.println("Connected to the database");
            ResultSet rs = stmt.executeQuery(query);
            while (rs.next())
            {
                System.out.println(rs.getString(1));
                System.out.println(rs.getString(2));
            }
            conn.close();
            System.out.println("Disconnected from database");
        } catch (Exception e)
        {
            e.printStackTrace();
        }
    }
} 
```

输出是：

```
oracle Connect Example.
Connected to the database
Disconnected from database 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T08:56:44.403

这么少的建议。我建议您使用`PreparedStatements`更快、更安全的方法。

```
PreparedStatement ps = null;
conn = DriverManager.getConnection(url, userName, password);
ps = conn.prepareStatement(query);
ResultSet rs = ps.executeQuery();
while (rs.next())
{
   // do some work
} 
```

第二个建议，在 finally 块中调用`close()`方法，因为应用程序可能会崩溃，然后您的连接将不会关闭。finally 块保证将始终被调用。

第三个建议，如果没有它就不起作用`Exception`，可能你有空桌子。

# jquery - 仅当 jQuery 中的 div 为空时，如何附加 html？

> ID：11280671
> 
> 赞同：2
> 
> 时间：2012-07-01T08:47:33.220
> 
> 标签：jquery

我有这段代码用于在我的 PHP 文件中显示登录和注册内容：

```
<?php // LOGIN PART ?>
<div class="login-part"></div>

<?php // REGISTRATION PART ?>
<div class="registration-part"></div> 
```

这在我的 js 文件中：

```
$(document).ready( function() {
            // FOR REGISTRATION
            $('span.logreg.reg').click(function () {

                $('div.registration-part').append('<p>Registration</p>');
            });

            // FOR LOGIN
            $('span.logreg.log').click(function () {

                // insert html
                $('div.login-part').append('<p>Login</p>');
            });
        }); 
```

现在，每次我单击一个跨度时，它都会根据单击的跨度显示文本登录或注册。

没关系，但是我只需要添加一次，因此当用户在跨度上单击更多次时，它不会添加更多文本。

据我所知，Remove() 或 empty() 不是一个选项，因为我需要输入框内的信息（稍后会有输入框用于插入用户信息）留在那里，如果用户意外点击不会被删除再次在跨度上。

但是，如果他单击另一个跨度，它可以删除 div 内的 html。例如，如果 span.log 处于活动状态，则单击 span.log 后没有任何反应，但如果他单击 span.reg，则 div.login-part 中的 html 将被删除，并且将显示注册文本。

如何做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T08:49:09.253

尝试 APi：`.one`请 :(阅读您的问题，您似乎只需要像`login`使用一次一样附加 HTML 即可`.one`解决此问题）

> 将处理程序附加到元素的事件。每个元素最多执行一次处理程序。

API 链接：[http ://api.jquery.com/one/](http://api.jquery.com/one/)

这种方式只会根据需要追加一次，并且您不会有重复的 html 显示多次。

希望这会有所帮助，如果我错过了什么，请让我知道，

**进一步**的差异演示： http: [//jsfiddle.net/avSDa/9/](http://jsfiddle.net/avSDa/9/)使用`.is(:empty)`适合您的。

**像这样的**代码****

 **```
 $('span.logreg.log').one('click', function () {

                // insert html
                $('div.registration-part').append('<p>Login</p>');
            }); 
```**

# html - 如何在 WebKit 浏览器中创建带有圆点的虚线边框？

> ID：11280676
> 
> 赞同：15
> 
> 时间：2012-07-01T08:48:43.350
> 
> 标签：html, css, webkit, border

在 WebKit 驱动的浏览器中，例如 Safari、Chrome，其样式声明为`dotted`的边框以方点而不是圆形呈现。

有什么方法可以强制跨浏览器无缝渲染圆点？

### 参考测试

*   [在 jsFiddle 上](http://jsfiddle.net/e5VK6/)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-01T10:00:43.333

目前缺乏原生支持的解决方案，因为[规范没有明确定义这些属性](http://www.w3.org/TR/CSS2/box.html#propdef-border-style)，而是将其留给浏览器的实现。

但是，您可以使用 SVG 创建边框，因为它可以完全控制您所追求的特征。

画一条线，然后定义它的`stroke-dasharray`和`stroke-linecap`属性来达到预期的效果。

### 示例代码片段

```
<line 
    x1="40" x2="260" 
    y1="100" y2="100" 
    stroke="#5184AF" 
    stroke-width="20" 
    stroke-linecap="round" 
    stroke-dasharray=".001, 30" /> 
```

### 结果快照

![SVG 虚线圆形边框](../Images/3ff44e5fc3670e458cf7a148294de3e2.png)

### 演示

*   [http://jsfiddle.net/eliranmal/hsfxS/](http://jsfiddle.net/eliranmal/hsfxS/)

### 参考资料（在 Mozilla 开发者网络上）

*   [`stroke-dasharray`](https://developer.mozilla.org/en/SVG/Attribute/stroke-dasharray)
*   [`stroke-linecap`](https://developer.mozilla.org/en/SVG/Attribute/stroke-linecap)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-18T01:14:57.283

我也有这个问题，但我的菜单项下只需要三个圆点。所以我只是使用了一个可怕的 hack，但它起作用了：首先我使用 @import 连接到 FontAwesome 然后在 CSS 中添加圆点字符作为内容：

```
#nav ul .current_page_item a:after {
    font-family: 'FontAwesome';
    content: "\f111  \f111  \f111";
    font-size: 6px;
    display: block;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-01T08:55:35.343

`border-image`有可能：[http ://www.css3.info/preview/border-image/](http://www.css3.info/preview/border-image/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-06T09:21:50.130

基于[ozbassplayer 的解决方案](https://stackoverflow.com/a/24815934/2686510)（谢谢）。

如何在**sass**中使用来生成更长的线条而不需要计算点。

唯一发现的缺点是当线条不是“理想”长时切割点。

```
 &:after {
    font-family: 'FontAwesome';  
    display: block;  
    font-size: 6px;  

    letter-spacing: 3px;      // to adjust space between dots
    white-space: nowrap;      // force to keep in one line  
    overflow: hidden;         // avoid rendering dots out of container
    width: 100%;

    $content: ' ';
    @for $i from 1 through 50 {
      $content: $content + " \f111";
    }

    content: $content;
  } 
```

# c# - 如何在页面开始时显示 MappedUrl 的新 URL？（网址映射）

> ID：11280677
> 
> 赞同：0
> 
> 时间：2012-07-01T08:49:06.273
> 
> 标签：c#, asp.net, url-rewriting, url-mapping

我为 url-mapping 编写了下面的代码：

```
<urlMappings enabled="true">
  <add url="~/My Fantastic Page" mappedUrl="~/Default.aspx" />
</urlMappings> 
```

我的目的是当有人在他/她的地址栏中键入我的域时，请参阅

> (http://www.domain.com/My Fantastic Page)

代替

> (http://www.domain.com/Default.aspx)

如何在页面开始时显示映射 url 的新 url？
我应该为此目的使用 url-mapping 还是 url-routing？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T09:34:32.993

IMO，最好使用 ASP.NET Url Routing 而不是像 Url 映射这样的过时技术（当然，在 ASP.NET 4.0 中），请查看：

[使用 ASP.NET 4 Web](http://weblogs.asp.net/scottgu/archive/2009/10/13/url-routing-with-asp-net-4-web-forms-vs-2010-and-net-4-0-series.aspx)表单的 URL 路由来自 scottgu

此外，对于 .NET Framework 3.5 SP1：

Scott Allen[使用 ASP.NET Web 窗体进行路由](http://msdn.microsoft.com/en-us/magazine/dd347546.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T09:15:57.500

您必须像这样指定：

```
<urlMappings enabled="true">
  <add url="~/My Fantastic Page.aspx" mappedUrl="~/Default.aspx" />
</urlMappings> 
```

# java - 方向改变时android活动重新启动

> ID：11280679
> 
> 赞同：5
> 
> 时间：2012-07-01T08:49:29.180
> 
> 标签：java, android, eclipse

我阅读了许多关于此问题的帖子，例如 [此链接][1]，一种解决方案是将方向配置更改添加到清单并处理 onConfigurationChanged 事件，以防止在旋转时再次调用 onCreate 活动。我做到了，事件被正确触发，但是，在执行之后，onCreate方法也被执行了！为什么？我错过了什么？谢谢

显现，

```
<activity 
            android:name="webPush"
            android:configChanges="keyboardHidden|orientation"/> 
```

活动，

```
@Override
    public void onConfigurationChanged(Configuration newConfig) {
      super.onConfigurationChanged(newConfig);
      setContentView(R.layout.vistaaib);
    }

@Override
    protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.vistaaib);
... 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-01T09:07:54.957

我认为这会奏效......

```
<activity android:name=".MyActivity"
          android:configChanges="orientation|keyboardHidden"
          android:label="@string/app_name"> 
```

从 Android 3.2（API 级别 13）开始，当设备在纵向和横向之间切换时，“屏幕尺寸”也会发生变化。因此，如果您想在为 API 级别 13 或更高级别开发时防止由于方向更改而导致运行时重新启动，您必须使用

```
android:configChanges="orientation|screenSize" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-05T12:15:08.347

我做了这个。我将此代码添加到清单中，并且效果很好。

```
<activity
        android:name="?"
        android:label="@string/?"
        android:theme="@style/?" 
        android:configChanges="orientation|screenSize"> 
```

如果您想在设备旋转时更改某些内容，则需要在您的活动下添加它。

```
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);

    // Checks the orientation of the screen
    if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
        Toast.makeText(this, "landscape", Toast.LENGTH_SHORT).show();
    } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT){
        Toast.makeText(this, "portrait", Toast.LENGTH_SHORT).show();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T08:58:28.287

在该 Activity 的清单文件中写入这两行代码。

看来这会解决你的问题。`<activity android:name=".YourActivity" android:configChanges="orientation|keyboardHidden"/>`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-01T08:58:52.060

您的活动将在任何配置更改时重新启动。很可能它正在重新启动，因为键盘状态发生了变化。尝试将此添加到活动的属性中：

```
android:configChanges="orientation|keyboard|keyboardHidden" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-23T13:31:30.407

以下可能是原因

事件：屏幕大小

当前可用的屏幕尺寸已更改。这表示当前可用尺寸相对于当前纵横比的变化，因此当用户在横向和纵向之间切换时会发生变化。但是，如果您的应用程序以 API 级别 12 或更低级别为目标，那么您的 Activity 始终会自行处理此配置更改（此配置更改不会重新启动您的 Activity，即使在 Android 3.2 或更高版本的设备上运行时也是如此）。在 API 级别 13 中添加。

所以随着“方向”添加“screenSize”以及

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-11T12:12:56.793

如果您正在为 API 级别 12 或更低级别工作

在清单文件中，在声明您的活动名称后添加以下内容。

```
 android:configChanges="orientation" 
```

例如-

```
 <activity
        android:name=".NameOfYourActivity"
        android:configChanges="orientation"/> 
```

在 android 3.2（API 级别 13）或更高版本中，屏幕尺寸也会随着旋转变化而变化，所以也要声明这一点。

为了这，

```
 android:configChanges="orientation|screenSize" 
```

# python - 在python中计算一个字符串在另一个字符串中的出现

> ID：11280681
> 
> 赞同：4
> 
> 时间：2012-07-01T08:49:54.407
> 
> 标签：python, string

如果这是第一个字符串：`ABCD`

如果这是第二个字符串：`ABCD is ABCD`

我想计算第二个字符串中第一个字符串的出现次数，以及 python 中的出现次数。我该怎么做？我是 python 新手，所以面临一些问题。谁能告诉我解决方案或提供相同的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T08:50:54.633

使用[`str.count()`](https://docs.python.org/2/library/stdtypes.html#str.count)：

```
>>> str1 = "ABCD"
>>> str2 = "ABCD is ABCD"
>>> str2.count(str1)
2 
```

# jquery - JSON 数组用作 DropDownLists 中可用选项的矩阵

> ID：11280683
> 
> 赞同：1
> 
> 时间：2012-07-01T08:50:24.480
> 
> 标签：jquery, json

我在 XSLT 样式表中有一些例程，它们处理 XML 文件以在网页 (ASP.NET) 中向用户显示产品。XSLT 样式表输出一个 html 来显示产品以及产品的任何变体，例如尺寸、颜色、包装数量、样式等。

变化被任意处理。我的代码实际上都没有具体提到变体。XML 始终包含产品可以具有的变体的节点树。然后每个产品都包含这些变化。例如，在 XML 中：

```
<Variations>
    <Variation>
        <Name>Color</Name>
    </Variation>
    <Variation>
        <Name>Size</Name>
    </Variation>
</Variations> 
```

从这些信息中我知道要创建两个控件。一个提供颜色选择，另一个提供尺寸选择。

产品的每个变体都在其自己的节点中的 XML 中列出。它具有唯一的产品 ID - 与所有其他产品变体不同。例如：

```
<Product>
    <ID>000001</ID
    <VariationAttribute>
        <Name>Color</Name>
        <Value>Green</Value
    </VariationAttribute>
    <VariationAttribute>
        <Name>Size</Name>
        <Value>6</Value>
    </VariationAttribute>
</Product>
<Product>
    <ID>000002</ID
    <VariationAttribute>
        <Name>Color</Name>
        <Value>Multiple(orange)</Value
    </VariationAttribute>
    <VariationAttribute>
        <Name>Size</Name>
        <Value>6</Value>
    </VariationAttribute>
</Product> 
```

在我的 XSLT 中，我创建了一个属性的所有可能值的唯一列表。例如，许多产品的颜色为绿色，但尺寸不同。许多产品的尺寸为 6，但颜色不同。因此，我对每个属性进行唯一排序，并在我的 XSLT 中创建 DropDownLists。

现在我需要一种允许用户将商品添加到购物车的方法。这需要知道产品 ID，因此我的 XSLT 还创建了一些 JSON 对象。其中一个对象包含可能的变体属性和提供属性选项选择的控件的名称 (ID)，如下所示：

```
var propCtlMap = [{"Color": "ddColor","Size": "ddSize"}] 
```

另一个 JSON 对象包含所有可能的产品配置的列表，如下所示：

```
var datalist = [
{"pID": "000001","Color": "Green","Size": "6"},
{"pID": "000002","Color": "Multiple(orange)","Size": "6"},
{"pID": "000003","Color": "Multiple(purple)","Size": "6"},
{"pID": "000004","Color": "Multiple(red)","Size": "6"},
{"pID": "000005","Color": "Purple","Size": "6"},
{"pID": "000006","Color": "Green","Size": "8"},
{"pID": "000007","Color": "Multiple(orange)","Size": "8"},
{"pID": "000008","Color": "Multiple(purple)","Size": "8"},
{"pID": "000009","Color": "Multiple(red)","Size": "8"},
{"pID": "000010","Color": "Purple","Size": "10"},
etc, etc
] 
```

到目前为止，我已经完成了所有这些工作。我有处理 DropDownList 的 JQuery 事件`.change`。然后将所有选定的变体选项映射到产品 ID。这允许我在隐藏字段中包含产品 ID，这样当用户单击“添加到购物车”按钮时，他们的选择就会得到处理。同样，这一切都很好。

现在到我的具体问题......我希望能够禁用不可用/无库存的变体选项。我知道可以禁用 DropDownList 中的选择。我有用 ASP 编写的代码。我想我可以将它转换为 JQuery，但我不知道该怎么做是确定（从`datalist`上面，在 JQuery 中）哪些选项不可用。在`datalist`上面，有 3 种可能的尺寸 - 6、8 和 10。绿色有 6 和 8 码，但没有 10 码。同样，紫色有 10 码，但没有 6 或 8 码。

我认为必须有一些使用 JQuery/Javascript 的方法/函数可以帮助我制作所有选项的矩阵，以便我可以禁用无效的选项。在上面的示例中，如果用户选择了紫色，我将需要该颜色中所有可用尺寸的列表。同样，如果用户选择了 8 号，我想要一个该尺寸中所有可用颜色的列表。

我想如果我知道如何获得这些列表，我就可以处理剩下的大部分编码。

顺便说一句，我现在只学习 JQuery/Javascript 大约 2 周。我知道的很少，但我正在追赶。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T09:56:37.217

你可以使用 jQuery 的[grep](http://api.jquery.com/jQuery.grep/)函数来过滤你的数组：

```
var objectArray = JSON.parse(json);

var purpleElements = $.grep(objectArray, function (element, index) {
    // purpleElements will contain all of those values in objectArray for which
    // this function returns true.
    return element.Color === "Purple";
});

$.each(purpleElements, function (index, element) {
    alert(element.Color + ": " + element.Size);
}); 
```

会提醒：`Purple: 6`, `Purple: 10`.

如果你只是想要一个 Sizes 列表，你可以使用 jQuery 的[map](http://api.jquery.com/jQuery.map/)函数来转换数组：

```
var sizes = $.map(purpleElements, function (element, index) {
    // sizes will contain an array of the return values of this function
    // for each element in purpleElements.
    return element.Size;
});

$.each(sizes, function (index, element) {
    alert(element);
}); 
```

会提醒`6`，`10`。

看到[这个 jsFiddle](http://jsfiddle.net/RichardTowers/jFE7s/)。

# python - pycurl.INFOTYPE_HEADER_OUT 有什么用？

> ID：11280684
> 
> 赞同：1
> 
> 时间：2012-07-01T08:50:28.887
> 
> 标签：python, pycurl

在 php 中有如下代码行：

curl_setopt($ch, CURLINFO_HEADER_OUT, true);

我不明白它的确切含义；我认为它设置为 true 时意味着您将获得标题信息以及响应。但它是针对 set 方法调用的。

在 python 的 pycurl 库中，我最接近的是`pycurl.INFOTYPE_HEADER_OUT`. 但是当我针对 set 方法调用它时会引发错误：

```
>>> c = pycurl.Curl()
>>> c.setopt(pycurl.INFOTYPE_HEADER_OUT, 1)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
pycurl.error: (48, '')
>>> c.getinfo(pycurl.INFOTYPE_HEADER_OUT)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: invalid argument to getinfo 
```

在这种情况下，我必须输入的正确 python 语句是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T12:52:25.727

这不是一个设置，而是一个用于调试目的的标志，用于打印库发出的原始标*头*。要使用它，您需要定义一个回调作为您的`DEBUGFUNCTION`，然后处理返回类型：

```
sent_headers = []
received_headers = []
def collect_headers(debug_type, debug_msg):
    if debug_type == pycurl.INFOTYPE_HEADER_OUT:
            sent_headers.append(debug_msg)
    if debug_type == pycurl.INFOTYPE_HEADER_IN:
            received_headers.append(debug_msg)

# somewhere later in the code

c = pycurl.Curl()
c.setopt(pycurl.URL, 'http://www.google.com/')
c.setopt(pycurl.DEBUGFUNCTION, collect_headers)
c.perform() 
```

以下是[文档](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html)中的相关位：

> CURLOPT_DEBUGFUNCTION
> 
> 传递一个指向与以下原型匹配的函数的指针： int curl_debug_callback (CURL *, curl_infotype, char *, size_t, void *); CURLOPT_DEBUGFUNCTION 替换 CURLOPT_VERBOSE 生效时使用的标准调试函数。此回调接收由 curl_infotype 参数指定的调试信息。此函数必须返回 0。传递给此函数的 char * 指向的数据不会以零结尾，而是与 size_t 参数所告知的大小完全相同。
> 
> 可用的 curl_infotype 值：
> 
> CURLINFO_TEXT
> 
> 数据是信息性文本。
> 
> CURLINFO_HEADER_IN
> 
> 数据是从对等方接收的标头（或类似标头）数据。
> 
> CURLINFO_HEADER_OUT
> 
> 数据是发送到对等方的标头（或类似标头）的数据。
> 
> CURLINFO_DATA_IN
> 
> 该数据是从对等方接收到的协议数据。
> 
> CURLINFO_DATA_OUT
> 
> 数据是发送给对等体的协议数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T06:52:34.003

发现如果您不希望在`perform()`屏幕上输出响应，则 pycurl 有一种特殊的调用方式。检查[https://stackoverflow.com/a/2776815/145682](https://stackoverflow.com/a/2776815/145682)

我的意思是这只是如何使用 pycurl。它并不完全类似于 php 的 curl 界面......

# c# - 具有相同 DataSource 属性的两个 BindingSource 对象

> ID：11280686
> 
> 赞同：2
> 
> 时间：2012-07-01T08:50:38.680
> 
> 标签：c#, winforms, data-binding, dataview

我在理解 BindingSource 的行为方面遇到了一些困难。让我们看下面的例子：

1.  创建表

    `DataTable dt = new DataTable();`

    `dt.Columns.Add("id", typeof(int));`

    `dt.Rows.Add(new object[] { 0 });`

    `dt.Rows.Add(new object[] { 1 });`

    `dt.Rows.Add(new object[] { 2 });`

    `dt.Rows.Add(new object[] { 3 });`

2.  创建两个具有相同 DataSource 属性的 BindingSource 对象

    `BindingSource bs1 = new BindingSource();`

    `BindingSource bs2 = new BindingSource();`

    `bs1.DataSource = dt;`

    `bs2.DataSource = dt;`

在这一点上，我认为创建的 BindingSource 是完全独立的。但实际上并非如此。**更改`Filter`属性后`bs1`**：

```
`bs1.Filter = "id >= 2";` 
```

**`Filter`的属性`bs2`不变，但`RowFilter`****两个 BindingSource 对象****的基础 DataView**的属性（`List`的属性`BindingSource`）发生了变化。

 ****事实证明，这两个`BindingSource`对象都具有完全相同的 DataView 实例，即条件`bs1.List == bs2.List`是`true`**。

我的问题是为什么他们共享相同的列表以及如何改变这种行为？

编辑：我找到了“为什么他们共享同一个列表？”的解释。- 似乎 List 是从`DataTable`的`DefaultView`属性分配的（所以`bs1.List == bs2.List`,`bs1.List == dt.DefaultView`都是真的）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T09:05:50.617

似乎要改变这种行为，可以创建两个不同`DataView`的实例`DataTable`并相应地将它们分配给`DataSource`两个`BindingSource`对象的属性：

```
BindingSource bs1 = new BindingSource();
BindingSource bs2 = new BindingSource();
bs1.DataSource = new DataView(dt);
bs2.DataSource = new DataView(dt); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T09:02:36.400

我还不是 C# 方面的专家，但根据我所读到的内容，我理解这一点：

通过使用`DataTable dt = new DataTable();`您只创建该对象的一个​​实例。如果该实例发生更改，则引用它的任何内容都会更改。

您需要创建两个实例，并将每个 BindingSource 实例设置为引用其自己的 DataTable 实例，如下所示：

`DataTable dt1 = new DataTable();`

`DataTable dt2 = new DataTable();`

`bs1.DataSource = dt1;`

`bs2.DataSource = dt2;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-31T06:45:18.620

鲁本的回答对我不起作用，但为我指明了正确的方向。我必须在绑定源中设置过滤器才能使其工作。下面是对我有用的代码

```
BindingSource bs1 = new BindingSource();
BindingSource bs2 = new BindingSource();
bs2.Filter = "My Filter"; // Instead of setting filter on DataView, I had to set it on binding source.
bs1.DataSource = new DataView(dt);
bs2.DataSource = new DataView(dt);
//bs2.DataSource = new DataView(dt, RowFilter: "My Filter", Sort: "", RowState: DataViewRowState.CurrentRows); // This does not work. 
```**

# c# - 如何使用带有“for”或“foreach”循环的多线程？

> ID：11280687
> 
> 赞同：2
> 
> 时间：2012-07-01T08:50:44.113
> 
> 标签：c#, .net, multithreading, asynchronous

我正在尝试在单独的线程中运行 for 循环，以便 UI 应该是响应式的并且进度条是可见的。

问题是我不知道该怎么做:)。在这段代码中，进程在单独的线程中开始，但代码的下一部分同时执行。messageBox 被显示并且结果永远不会被返回（例如列表框的 selected index 属性永远不会被设置）。

即使我使用“taskEx.delay()”，它也不起作用。

```
 TaskEx.Run(() =>
                {
                    for (int i = 0; i < sResults.Count(); i++)
                    {

                        if (sResults.ElementAt(i).DisplayIndexForSearchListBox.Trim().Contains(ayaStr))
                        {
                            lstGoto.SelectedIndex = i;
                            lstGoto_SelectionChanged(lstReadingSearchResults, null);
                            IsIndexMatched = true;
                            break;
                        }
                    }
                });

        //TaskEx.delay(1000);
        if (IsIndexMatched == true)
            stkPanelGoto.Visibility = Visibility.Collapsed;
        else //the index didn't match
        {
            MessagePrompt.ShowMessage("The test'" + ayaStr + "' does not exist.", "Warning!");
        } 
```

谁能告诉我如何使用带有“for”或“foreach”循环的多线程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T08:56:13.027

你需要使用`Task.Wait()`

试试这个：

```
TaskEx.Wait();
if (IsIndexMatched == true)
    stkPanelGoto.Visibility = Visibility.Collapsed; 
```

如果要限制等待时间可以给出`Wait()`时间参数或TimeSpan，例如：

```
TaskEx.Wait(10000) 
```

您也可以将其与 CancellationToken 一起使用，
或者将 CancellationToken 和时间限制结合使用

阅读 MSDN 上的所有选项：http:
[//msdn.microsoft.com/en-us/library/dd235635.aspx](http://msdn.microsoft.com/en-us/library/dd235635.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T09:12:14.327

`TaskEx`- 您是否使用 .NET 4.0 的异步目标包？在这种情况下，使用`await TaskEx.Run(...)`- C# 5.0`await`将等待任务完成，但会在等待时保持 UI 响应（与`.Wait()`方法不同）。

此外，您需要将`lstGoto.SelectedIndex = i;`分配移出后台线程 - 仅允许在主线程上访问 UI 控件。

```
 int index = await TaskEx.Run(() =>
            {
                // ensure that sResults is a List<T> - call .ToList() if necessary
                for (int i = 0; i < sResults.Count; i++)
                {

                    if (sResults[i].DisplayIndexForSearchListBox.Trim().Contains(ayaStr))
                    {
                        return i;
                    }
                }
                return -1; // nothing found
            });

    //await TaskEx.Delay(1000);
    if (index >= 0)
    {
        stkPanelGoto.Visibility = Visibility.Collapsed;
        lstGoto.SelectedIndex = i;
        lstGoto_SelectionChanged(lstReadingSearchResults, null);
    }
    else //the index didn't match
    {
        MessagePrompt.ShowMessage("The test'" + ayaStr + "' does not exist.", "Warning!");
    } 
```

最后一句警告：不要在循环中重复使用`Count()`/ `ElementAt()`- 这些 LINQ 方法最终可能会遍历整个集合来计算它们的结果。如果需要按索引遍历 IEnumerable，将其转换为 List 一次，然后遍历该列表会快得多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-01T12:27:04.070

应用修复后的代码。

```
int index = -1;
IEnumerable<dictSearchResults> sResults = (IEnumerable<dictSearchResults>)lstGoto.DataContext;
//Makin a list of all the DisplayIndex from the IEnumerable object
var lstGotoResults= sResults.Select(rec => rec.DisplayIndexForSearchListBox.ToString()).ToList();

index = await TaskEx.Run(() =>
{
    return lstGotoResults.IndexOf(ayaIndexStr);
});

if (index >= 0)
{ 
    lstGoto.SelectedIndex = index ;
    lstGoto_SelectionChanged(lstReadingSearchResults, null);
    stkPanelGoto.Visibility = Visibility.Collapsed;
} 
```

将 IEnumerable 转换为 List 后，代码非常高效，我怀疑是否应该使用`TaskEx`. 没有时间让进度条可见:)

谢谢丹尼尔的提示！

# jsf-2 - 在 JSF 中动态创建表列

> ID：11280688
> 
> 赞同：5
> 
> 时间：2012-07-01T08:50:47.057
> 
> 标签：jsf-2, datatable

我正在开发仪表板应用程序，我必须在其中检索一组记录并显示在动态表格框中。页框长度是固定的。现在可以初始化列和行。它应该看起来像这个示例：

![在此处输入图像描述](../Images/25b96dfc4ee07871a41df1a88d2b5d81.png)

目前我正在使用数据表来显示，但它将所有数据打印在一列中。如何将我的代码更改为上述模式？

```
<o:dataTable id="tabBlSearch" var="item"
     onkeyup="handleLeftRightArrowOnDataTable('frmDashBoard:tabBlSearch')"
     value="#{bLDashBoardAction.listBondLoc}">
  <o:column style="width: 20px;">
    <h:outputText value="#{item.awb}" />
  </o:column>
</o:dataTable> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-01T11:37:23.343

您可以使用标准 JSF 组件来实现这一点，`<h:panelGrid>`其中`<c:forEach>`使用用于在视图构建期间生成单元格。将`<ui:repeat>`不起作用，因为它在视图渲染期间运行。

```
<h:panelGrid columns="5">
    <c:forEach items="#{bean.items}" var="item">
        <h:panelGroup>
            <h:outputText value="#{item.value}" />
        </h:panelGroup>
    </c:forEach>
</h:panelGrid> 
```

至于组件库，我在[OpenFaces 的展示中看](http://www.openfaces.org/components/)不到任何东西，但 PrimeFaces 有一个[`<p:dataGrid>`](http://www.primefaces.org/showcase/ui/datagrid.jsf)正是为了这个目的，即使支持分页。

```
<p:dataGrid columns="5" value="#{bean.items}" var="item">
    <p:column>
        <h:outputText value="#{item.value}" />
    </p:column>
</p:dataGrid> 
```

# javascript - 在浏览器上使用 javascript 将 mp3 转换为 wav

> ID：11280707
> 
> 赞同：1
> 
> 时间：2012-07-01T08:53:12.407
> 
> 标签：javascript, audio, html5-audio

如何在浏览器上使用 javascript 将 .mp3 文件转换为 .wav 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T08:57:50.953

**你在寻找这样的东西吗？**

MP3.js - 基于 JSMad 的 JavaScript MP3 解码器

MP3.js 是 JSMad 的重构版本，旨在运行在 ofmlabs Aurora 音频框架中。它支持 JSMad 的所有功能，并在相同的 GPLv2 许可下发布。代码进行了一些重组，现在使用所有类型的数组进行解码，性能更好。

[https://github.com/devongovett/mp3.js](https://github.com/devongovett/mp3.js)

# php - 如何通过 xpath 从网站获取标题？

> ID：11280714
> 
> 赞同：3
> 
> 时间：2012-07-01T08:54:37.660
> 
> 标签：php, xml, xpath, domdocument

我正在玩 xpath，但不知道如何使用 xpath 从网站获取标题，这是我的代码，但我不知道下一步该做什么......

```
$dom = new DOMDocument();
$dom->loadHTMLFile("http://www.cool.de");

$x=new DOMXPath($dom);
$result = $x->query("//TITLE");

//...??? 
```

print_r($result) 只显示“对象”，是否有类似 print_r 的函数可以查看对象内部的内容，所以我不必猜测？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-01T09:02:05.823

[`$result`是一个 DOMNodeList](http://php.net/manual/en/domxpath.query.php)

```
echo $result->item(0)->textContent 
```

* * *

**编辑：** xpath 区分大小写 - dom 节点必须小写：

```
echo $x->query('//title')->item(0)->textContent 
```

[这](http://codepad.viper-7.com/OkQ3Er)现在有效

# c# - LINQ中可以用什么代替Datatable

> ID：11280717
> 
> 赞同：2
> 
> 时间：2012-07-01T08:55:10.310
> 
> 标签：c#, linq

我有一个返回数据表的 SQL 查询：

```
var routesTable = _dbhelper.Select("SELECT [RouteId],[UserId],[SourceName],[CreationTime] FROM [Routes] WHERE UserId=@UserId AND RouteId=@RouteId", inputParams); 
```

然后我们可以使用 *routesTable的 Datatable 对象*

```
if (routesTable.Rows.Count == 1)
            {
                result = new Route(routeId)
                {
                    Name = (string)routesTable.Rows[0]["SourceName"],
                    Time = routesTable.Rows[0]["CreationTime"] is DBNull ? new DateTime() : Convert.ToDateTime(routesTable.Rows[0]["CreationTime"])
                };

                result.TrackPoints = GetTrackPointsForRoute(routeId);
            } 
```

我想将此代码更改为 linq 但我不知道如何在 LINQ 中模拟 Datatable ，我写了这部分：

```
Route result = null;
            aspnetdbDataContext aspdb = new aspnetdbDataContext();
            var Result = from r in aspdb.RouteLinqs
                           where r.UserId == userId && r.RouteId==routeId
                           select r;

    .... 
```

但我不知道如何更改这部分：

```
if (routesTable.Rows.Count == 1)
            {
                result = new Route(routeId)
                {
                    Name = (string)routesTable.Rows[0]["SourceName"],
                     Time = routesTable.Rows[0]["CreationTime"] is DBNull ? new DateTime() : Convert.ToDateTime(routesTable.Rows[0]["CreationTime"])
                }; 
```

你能告诉我我该怎么做吗？

**在这里编辑** 你可以看到原始的整个代码块

```
public Route GetById(int routeId, Guid userId)
        {
            Route result = null;
            var inputParams = new Dictionary<string, object>
                                  {
                                      {"UserId", userId},
                                      {"RouteId", routeId}
                                  };

            var routesTable = _dbhelper.Select("SELECT [RouteId],[UserId],[SourceName],[CreationTime] FROM [Routes] WHERE UserId=@UserId AND RouteId=@RouteId", inputParams);

            if (routesTable.Rows.Count == 1)
            {
                result = new Route(routeId)
                {
                    Name = (string)routesTable.Rows[0]["SourceName"],
                    Time = routesTable.Rows[0]["CreationTime"] is DBNull ? new DateTime() : Convert.ToDateTime(routesTable.Rows[0]["CreationTime"])
                };

                result.TrackPoints = GetTrackPointsForRoute(routeId);
            }

            return result;
        } 
```

选择功能：

```
public DataTable Select(string query, Dictionary<string, object> parameters)
        {
            var dt = new DataTable();

            using (_command = new SqlCommand(query, _connnection))
            {
                InitializeParametersAndConnection(parameters);

                using (_adapter = new SqlDataAdapter(_command))
                {
                    _adapter.Fill(dt);
                }
            }

            return dt;
        } 
```

和 GetTrackPointsForRoute

```
private List<TrackPoint> GetTrackPointsForRoute(int routeId)
        {
            aspnetdbDataContext aspdb = new aspnetdbDataContext();
            var result = new List<TrackPoint>();
            var trackPointsTable = from t in aspdb.TrackPointlinqs
                                   where t.RouteFK == routeId
                                   select t;
            foreach (var trackPointRow in trackPointsTable)
            {
                var trackPoint = new TrackPoint
                {
                    Id = (int)trackPointRow.TrackPointId,
                    Elevation = Convert.ToSingle(trackPointRow.Elevation),
                    Latitude = Convert.ToDouble(trackPointRow.Latitude),
                    Longitude = Convert.ToDouble(trackPointRow.Longitude),
                    Time = trackPointRow.TrackTime is DBNull ? new DateTime() : (DateTime)trackPointRow.TrackTime
                };
                result.Add(trackPoint);
            }

            return result;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T08:58:27.520

```
var firstRoute = aspdb.RouteLinqs
    .Where(r => r.UserId == userId && r.RouteId == routeId)
    .FirstOrDefault();

if (firstRoute == null)
{
    return null;
}
else
{
    return new Route(routeId)
    {
        Name = first.SourceName,
        Time = first.CreationTime ?? new DateTime(),
        TrackPoints = GetTrackPointsForRoute(routeId)
    };
} 
```

如果这是 LINQ to SQL，您可以进一步简化它（但这不适用于 LINQ to Entity Framework）：

```
return aspdb.RouteLinqs
    .Where(r => r.UserId == userId && r.RouteId == routeId)
    .Select(r => new Route(routeId)
    {
        Name = r.SourceName,
        Time = r.CreationTime ?? new DateTime(),
        TrackPoints = GetTrackPointsForRoute(routeId)
    })
    .FirstOrDefault(); 
```

注意：您可能可以替换`GetTrackPointsForRoute`为子表的连接，这意味着整个方法可以通过一次调用数据库来完成，而不是一次调用获取路由，然后调用第二次获取积分。为此，您应该了解 LINQ to SQL 中的关联和联接。

# objective-c - 目标c：使用设备方向异步更新UIView

> ID：11280734
> 
> 赞同：1
> 
> 时间：2012-07-01T08:57:36.240
> 
> 标签：objective-c, uiview, asynchronous

我面临着在设备方向到位的情况下异步更新 UIView 的问题。我已经在 viewDidload 中实现了设备方向，如下所示

```
- (void)viewDidLoad{
[super viewDidLoad];
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(orientationChanged) name:UIDeviceOrientationDidChangeNotification object:nil];
[self initialize];} 
```

在orientationChanged方法中，我有以下代码

```
-(void)orientationChanged {
UIDeviceOrientation orientation = [UIDevice currentDevice].orientation;

if(UIInterfaceOrientationIsLandscape(orientation)){
    UINib *nib = [UINib nibWithNibName:@"ConsoleViewControllerLandscape" bundle:nil];
    UIView *portraitView = [[nib instantiateWithOwner:self options:nil] objectAtIndex:0];
    self.view = portraitView;

    [self initialize];

} else {
    UINib *nib = [UINib nibWithNibName:@"ConsoleViewController" bundle:nil];
    UIView *portraitView = [[nib instantiateWithOwner:self options:nil] objectAtIndex:0];
    self.view = portraitView;

    [self initialize];

} 
```

在初始化方法中，我实际上使用如下代码异步更新 UI

```
 [self performSelectorOnMainThread:@selector(arrangeAsynchronously) withObject:nil waitUntilDone:NO];
- (void) arrangeAsynchronously{
    //Some complex calculation and finally
[self.view addSubview:imageview];
} 
```

问题是当方向改变的图像视图没有添加到主视图时。假设我从纵向视图开始，然后我可以在纵向视图中看到所有图像视图，如果它变为横向，则视图为空白。同样，如果我切换到纵向，则所有子视图（即 imageViews）都会正确添加。问题是当方向改变时，我正在加载一个新的 nib 文件，但是代码仍然是指从旧的 nob 文件加载的旧视图。如何更改参考。仅当我在异步模式下执行此操作时才会出现此问题。

uiview 不是问题，而是设备旋转后计算子视图位置的问题。早些时候我的代码是

```
CGAffineTransform inverseTransform = CGAffineTransformInvert(self.view.transform);
fixedPoint = CGPointApplyAffineTransform(fixedPoint,inverseTransform);
fixedPoint = CGPointMake(fixedPoint.x+126, fixedPoint.y-109); 
```

我把它改成了

```
fixedPoint = CGPointMake(fixedPoint.x+126, fixedPoint.y-109); 
```

但是我仍然不知道为什么仿射变换不起作用waitUntilDone：NO并且在waitUntilDone：YES中起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T10:36:42.630

你的策略有点问题。`self.view`以某种方式呈现，仅仅因为您制作了一个 new `UIView`，并不意味着它会在呈现的窗口中被替换。

我建议您将一个容器视图添加到您的主视图`UIView`（您在此处替换的那个），然后在更改设备方向时更改容器视图的内容。

**编辑**

我的回答可能看起来有点不清楚，所以让我试着更详细地解释一下。a的`UIView`a`UIViewController`由 a 表示`UIWindow`。这意味着窗口具有对视图的引用。当您更改`UIView`a 的`UIViewController`（通过构造一个新的`UIView`）时，并不意味着它将反映在`UIWindow`.

* * *

初始场景：

*UIViewController-> **UIView1** <-UIWindow*

构建新的 UIView 后：

*UIViewController-> **UIView2**
UIWindow-> **UIView1***

* * *

正如您在上图中看到的，您没有生成任何错误，但是您现在有两个视图，并且您所做的更改`UIViewController`不会反映在屏幕上。

但是你可能很幸运它第一次工作：如果你`UIView` 在 UIWindow 呈现它之前重建它，一切仍然有效，但它仍然是一个糟糕的设计，可能很容易破坏（就像你在时间改变后看到的那样）。

这就是事情可能真正起作用的情况：

* * *

初始场景：

*UIViewController-> **UIView1**

构建新的 UIView 后：

*UIViewController-> **UIView2**

窗口在屏幕上显示视图：

*UIViewController-> **UIView2** <-UIWindow*

* * *

基本上你不应该在它被展示后扔掉你的把手`UIView`。`UIViewController`

我希望这有助于您理解引用/指针的工作原理。

# android - 在 Google Play 上，使用特定包发布应用程序如何限制可以发布的其他包以及由谁发布？

> ID：11280741
> 
> 赞同：5
> 
> 时间：2012-07-01T08:58:45.170
> 
> 标签：android, dns, package, google-play

我有兴趣了解使用特定包在 Google Play 上发布应用程序的所有方式可能会限制我和其他人将来可以用来发布应用程序的包。我对 Google Play 系统允许的内容、Google 政策允许的内容以及法律允许的内容都感兴趣。

我知道并仔细记录了以下相关讨论：

[在 Google Play 上保留包名](https://stackoverflow.com/questions/9977413/reserving-a-package-name-on-google-play)

[如何为应用程序保留名称？](https://stackoverflow.com/questions/3204774/how-can-you-reserve-a-name-for-an-application)

这些讨论未解决的一个方面是，一个应用程序是否可以有一个包名称，其中包含另一个应用程序的包名称作为前缀，如果是，这两个应用程序是否必须由同一个开发者帐户拥有。这尤其影响到是否可以通过注册（不一定发布）具有包的应用程序来保留整个包名称系列（例如，所有以自己的、拥有的、域的反向开头的名称）的问题那*只是*那个反向域（例如，com.naifapps），仅此而已。

以下是一些我想了解的具体示例：

1.  是否可以发布两个应用程序，其中一个应用程序使用的包是另一个应用程序包的正确前缀（例如，一个应用程序具有前缀 com.naifapps，另一个应用程序具有前缀 com.naifapps.candide）？如果没有，如果您在具有自己的反向域的包下发布了一个应用程序，那么您可能真的会限制您未来的选择，仅此而已。

2.  在情况 1 中，这两个应用程序是否由两个不同（不相关）的开发人员拥有？*如果答案是否定的，但如果这两个由一个*帐户拥有，则允许使用，然后通过上传并保存一个虚拟应用程序，该应用程序的包名称与您自己的、拥有的、域的相反，仅此而已，您可能能够有效地*保留*以该反向域开头的整个名称系列以供您自己将来使用。但是，如上面第 1 项所述，如果 Google Play 禁止应用程序共享相同的包前缀，那么您可能会永远阻止自己使用以您自己的域名相反开头的包进一步发布任何内容。

3.  假设我拥有域 naifapps.com，并在 Google Play 上以包名 com.naifapps.candide 和 com.naifapps.erendira 发布了两个应用程序。那么，是否有什么可以阻止其他开发人员稍后在应用程序包名称的开头使用相同的反向域发布应用程序（例如，使用包 com.naifapps.bwahaha）？换句话说，我发布的应用程序的包仅以反向域名*开头，足以“保留”该包前缀供我自己的帐户独占使用吗？*

4.  如果我向 Google 抱怨这样的应用程序，我对 naifapps.com 域的所有权本身是否足以导致 Google 删除其他开发人员发布的应用程序，这些应用程序使用包含 com.naifapps 作为前缀的包好像侵权了？

5.  如果我以外的其他人使用前缀 com.naifapps 发布应用程序，这是否会阻止我作为域 naifapps.com 的所有者在我发布的应用程序包中使用我自己的域的反转（例如， com.naifapps.erendira）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T09:08:30.047

据我了解：

1.  是的，`com.naifapps`并且`com.naifapps.candide`都可以发布。
2.  是的，它们可以由不同的开发者发布。
3.  不，除了惯例和常识之外，没有什么可以阻止某人这样做。因为它只会阻止其他人使用完全相同的包名称，所以它并不那么重要，而且似乎没有人会这样做。
4.  很难知道谷歌会做什么，但我怀疑如果很明显有人出于恶意这样做，那么你拥有该域的事实可能足以让谷歌站在你这边。
5.  不，见 1\. 和 2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T09:10:13.580

我的理解是你不能使用同一个包的两个应用程序，因为你的应用程序的 url 完全基于你的应用程序的包

看看网址：`https://play.google.com/store/apps/details?id=nz.thesmartlemon.configuration`

它使用包名“nz.thesmartlemon.configuration”作为 url，这就是为什么当你更改应用程序的 url 时，以前的用户无法更新。

所以理论上：

1.  您可以使用其他前缀，如 nz.thesmartlemon.config 和 nz.thesmartlemon.config.test 将被归类为两个不同的应用程序。

2.  是的，据我了解是的。

3.  我相信您只能预订完整的套餐。（以上原因）

4.  如果包名相同，是的，但是您应该可以使用它，这种情况并不常见。

# php - 如何在php中循环char

> ID：11280743
> 
> 赞同：0
> 
> 时间：2012-07-01T08:58:57.407
> 
> 标签：php, char

我需要在 php 中做一个简单的循环来获取 char 从`a`到`z`.. 的东西，例如：

```
for($i=0;$i<aNumber;$i++)
   echo "char = ".intToChar($i)."<br>"; 
```

其中 aNumber 小于 20

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T09:01:49.530

[`range` *^(您可以使用[docs])*](http://php.net/manual/en/function.range.php)轻松创建字符数组：

```
$chars = range('a', 'z'); 
```

或者，如果您真的只想打印它们：

```
echo implode('<br />', range('a', 'z')); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T09:00:35.207

您需要了解 ASCII 表。请参阅[此链接](http://en.wikipedia.org/wiki/ASCII)。`A - Z`is`65 - 90`和`a - z`is 的代码`97 - 122`。

```
for($i = 97; $i <= 122; $i++)
    echo chr($i); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T09:01:17.157

我是这样解决的：

```
$i = 0;
$char = 'a';
$aNumber = xx;
while($i<$aNumber){
    echo $char."<br>";
    $char++;
    $i++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T09:01:08.173

要返回由 ASCII 代码/数字指定的字符，请使用[chr](http://php.net/manual/en/function.chr.php)函数。既然你想从 0 循环到 20，那么你需要将 97 添加到`$i`， 97 是字母的 ASCII 码`a`：

```
for($i=0;$i<$aNumber;$i++)
   echo "char = ".chr($i+97)."<br>"; // + 97 because it is ASCII 'a' 
```

如果您只想遍历这些字母，可以这样做：

```
for($i = ord('a'); $i < ord('z'); $i++)
   echo "char = ".chr($i)."<br>"; 
```

此外，如果您只想获取这些字符的数组，您可以使用[range](http://php.net/manual/en/function.range.php)函数：

```
$chars = range('a', 'z'); 
```

# android - 传感器 TYPE_ACCELEROMETER 和 TYPE_MAGNETIC_FIELD - 它们适用于手机，但不适用于平板电脑

> ID：11280744
> 
> 赞同：2
> 
> 时间：2012-07-01T08:59:14.697
> 
> 标签：android, android-sensors

在我的 2d 游戏中，我有以下代码负责游戏实体控制（飞行飞机）。就手机而言，一切似乎都运行良好，但不幸的是，我得到了一些信息，在 Android 平板电脑上，转向完全不可靠（轴被弄乱了，或者根本不工作）。不幸的是，我没有自己的平板电脑，所以我无法更仔细地研究它。那么..以下代码有什么问题？（为了清楚起见，我只放了与传感器相关的代码）

```
// ...
private float[] accelerometerValues;
private float[] magneticFieldValues;
private float[] R;
private float[] I;
private float[] outR;
private float[] sensorValues;

private Sensor accelerometer;
private Sensor magneticField;
// ...

// ... sensor initialization
    sensorManager = (SensorManager)activity.getSystemService(Context.SENSOR_SERVICE);
    if(sensorManager == null)
        return;
    accelerometer = sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER); 
    magneticField = sensorManager.getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD);
// ...

// ... onPause() sensor is being unregistered
public void onResume() {
    if(!sensorManager.registerListener(sensorListener, accelerometer, SensorManager.SENSOR_DELAY_GAME) ||
       !sensorManager.registerListener(sensorListener, magneticField, SensorManager.SENSOR_DELAY_GAME))
// ...

    // ...
    sensorListener = new SensorEventListener() {
        public void onAccuracyChanged(Sensor arg0, int arg1) {              
        }
        public void onSensorChanged(android.hardware.SensorEvent event) {
            synchronized(InputMgr.this) {
                switch(event.sensor.getType()) {
                case Sensor.TYPE_ACCELEROMETER:
                    System.arraycopy(event.values, 0, accelerometerValues, 0, 3);
                    break;
                case Sensor.TYPE_MAGNETIC_FIELD:
                    System.arraycopy(event.values, 0, magneticFieldValues, 0, 3);
                    break;
                }
            }
        }
    };  
    // ...  

    // used somewhere in the game
public void getSensorValues(float values[]) {
    synchronized(InputMgr.this) {
        SensorManager.getRotationMatrix(R, I, accelerometerValues, magneticFieldValues);
        SensorManager.remapCoordinateSystem(R, SensorManager.AXIS_Y, SensorManager.AXIS_X, outR);
        SensorManager.getOrientation(outR, sensorValues);
        System.arraycopy(sensorValues, 0, values, 0, sensorValues.length);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T05:17:14.863

这不会让你振作起来，但我有一个类似的问题。我可以看到一个 TYPE_MAGNETIC_FIELD 传感器，我可以向它添加一个事件侦听器，但我从未从中获取任何数据。其他传感器工作正常。这是在 Galaxy Tab 7 上。

onSensorChanged(SensorEvent event) 从不触发案例 Sensor.TYPE_MAGNETIC_FIELD：

因此，我没有从磁场传感器获得数据。

如果你解决了，请告诉我们 =)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T15:10:43.373

在默认方向为横向（-> 大多数平板电脑）的设备上，传感器值有点“错误”（我不知道为什么）。所以你需要抓住这些设备并重新映射你的旋转矩阵。

要检查矩阵是否需要重新映射，可以使用以下代码：

```
public boolean needToRemapOrientationMatrix;

// compute once (e.g. in onCreate() of your Activity):
Display display = ((WindowManager)getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
int orientation;
if(display.getWidth() < display.getHeight()) orientation = Configuration.ORIENTATION_PORTRAIT;
else if(display.getWidth() > display.getHeight()) orientation = Configuration.ORIENTATION_LANDSCAPE;
else orientation = Configuration.ORIENTATION_SQUARE;
int rotation = display.getRotation();
needToRemapOrientationMatrix =
    (orientation==Configuration.ORIENTATION_LANDSCAPE && (rotation==Surface.ROTATION_0 || rotation==Surface.ROTATION_180)) ||
    (orientation==Configuration.ORIENTATION_PORTRAIT && (rotation==Surface.ROTATION_90 || rotation==Surface.ROTATION_270)); 
```

当您读取传感器值时，如果需要，重新映射矩阵：

```
public void getSensorValues(float values[]) {
    synchronized(InputMgr.this) {
        SensorManager.getRotationMatrix(R, I, accelerometerValues, magneticFieldValues);

        if(needToRemapOrientationMatrix)
            SensorManager.remapCoordinateSystem(R, SensorManager.AXIS_MINUS_Y, SensorManager.AXIS_X, R);

        SensorManager.remapCoordinateSystem(R, SensorManager.AXIS_Y, SensorManager.AXIS_X, outR);
        SensorManager.getOrientation(outR, sensorValues);
        System.arraycopy(sensorValues, 0, values, 0, sensorValues.length);
    }
} 
```

这对我有用，我希望它有所帮助。

# javascript - Twitter Bootstrap navbar-fixed-top 在页面上重新定位

> ID：11280748
> 
> 赞同：2
> 
> 时间：2012-07-01T08:59:48.297
> 
> 标签：javascript, html, css, twitter-bootstrap, navbar

我已经成功地在我的网站上运行了 Bootstrap，但我正在尝试使用 navbar-top-fixed 功能，每当页面加载时，它会将所有内容向下推约 20 像素，我似乎无法诊断原因。

我的导航栏代码是这样的：

```
 <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container protected">
                <ul class="nav pull-right nav-pills">
                    <li><a href="/account/login" id="customer_login_link">Login</a></li>
                    <li><a href="/cart"><i class="icon-shopping-cart icon-white"></i> View cart <span class="badge badge-warning">2</span></a></li>
                </ul>
            </div>
        </div>
    </div> 
```

并且[此链接](http://www.athousandprints.com)处的页面将正确加载页面，然后在加载页面时将其向下推，就像[这个截图](http://cl.ly/2v1b1M2Q1E1s0k2j183k)一样。

有没有人见过这个或知道任何快速修复？我正在使用 lessCSS 自定义页面上的导航栏之一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T09:03:58.250

请将导航栏标记移到“容器”div 前面。“容器”类定义了这个边距。

见这里： http: [//postimage.org/image/nu5pv8tkz/](http://postimage.org/image/nu5pv8tkz/)

# objective-c - NSUserDefults 返回 null

> ID：11280752
> 
> 赞同：0
> 
> 时间：2012-07-01T09:00:21.457
> 
> 标签：objective-c, ios, nsuserdefaults

我在 NSUserDefults 中保存了一个自定义对象，该对象具有多个属性，我在 AppDelegate 中初始化了自定义对象的值，我的问题是，当我尝试在 viewcontroller didLoad 方法中检索自定义对象属性“userToken”时它可以工作并且数据是正确的，但是当我在视图控制器中的另一个方法中检索它时，我得到 NULL 请注意，另一个属性“uId”返回正确的值，并且我正在以相同的方式检索对象

我在这里做错了什么？非常感谢您的帮助

这是我保存和检索对象的方式

```
+(void)SaveUser:(User *)user
{
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    NSData *userData = [NSKeyedArchiver archivedDataWithRootObject:user];
    [userDefaults setObject:userData forKey:@"User"];  
    [userDefaults synchronize]; 
}

+(User*)retrieveUser
{
    NSUserDefaults *ud = [NSUserDefaults standardUserDefaults];
    NSData *userData = [ud objectForKey:@"User"];
    User *user = [NSKeyedUnarchiver unarchiveObjectWithData:userData];
    return user;    
} 
```

这是用户对象的实现

```
- (id)initWithCoder:(NSCoder *)decoder 
{
   self = [super init];
   if (self)
   {    
        //uId and userToken are of type NSString
        self.uId = [decoder decodeObjectForKey:@"UID"];
        self.userToken = [decoder decodeObjectForKey:@"DeviceToken"];
   }
   return self;
}

- (void)encodeWithCoder:(NSCoder *)encoder 
{
    [encoder encodeObject:self.uId forKey:@"UID"];
    [encoder encodeObject:self.userToken forKey:@"DeviceToken"];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T09:22:28.287

试试这个： 还要注意 + 意味着作为静态函数没有访问类属性使你的 saveuser 或retrieveuser 函数中的每一件事也解码，而无需调用类外的另一个方法来解码它。这就是为什么当你在 loadview 中使用它时，你的 + 方法可能总是得到空值

```
+(void)SaveUser:(User *)user
{
    NSUserDefaults *UserDefaults = [NSUserDefaults standardUserDefaults];
    [UserDefaults setObject:[NSKeyedArchiver archivedDataWithRootObject:user] forKey:@"User"];
    [UserDefaults synchronize];
}

+(User*)retrieveUser
{
    NSUserDefaults *UserDefaults = [NSUserDefaults standardUserDefaults];
    NSData *userData = [UserDefaults objectForKey:@"User"];
    User *user = [NSKeyedUnarchiver unarchiveObjectWithData:userData];
    return user;
} 
```

# php - 无法安装 yii 用户模块

> ID：11280757
> 
> 赞同：7
> 
> 时间：2012-07-01T09:01:01.930
> 
> 标签：php, yii, yii-extensions

我从 github 下载了最新版本的 Yii 用户模块，并在下面解压

```
protected/modules/ 
```

目录，因此我在此目录下的目录结构包括 zip 中包含的用户和其他模块。我对文档中提到的主文件进行了更改，所以我的 main.php 现在看起来像这样

```
'import'=>array(
    'application.modules.user.models.*',
    'application.models.*',
    'application.components.*',

),

  'modules'=>array(
    // uncomment the following to enable the Gii tool

    'gii'=>array(
        'class'=>'system.gii.GiiModule',
        'password'=>'sheikh24',
        // If removed, Gii defaults to localhost only. Edit carefully to taste.
        'ipFilters'=>array('127.0.0.1','::1'),
    ),
            'user' => array(
                    'debug' => true,
            )

),
'components'=>array(
        'user'=>array(
            'class' => 'application.modules.user.components.YumWebUser',
            'allowAutoLogin'=>true,
            'loginUrl' => array('//user/user/login'),

        ),
    // uncomment the following to use a MySQL database

        'db'=>array(
        'connectionString' => 'mysql:host=localhost;dbname=ewindow',
        'emulatePrepare' => true,
        'username' => 'root',
        'password' => '',
        'charset' => 'utf8',
                    'tablePrefix' => '',
    ),
    'errorHandler'=>array(
        // use 'site/error' action to display errors
        'errorAction'=>'index/error',
    ),
    'log'=>array(
        'class'=>'CLogRouter',
        'routes'=>array(
            array(
                'class'=>'CFileLogRoute',
                'levels'=>'error, warning',
            ),
            // uncomment the following to show log messages on web pages
            /*
            array(
                'class'=>'CWebLogRoute',
            ),
            */
        ),
    ),
) 
```

如您所见，我已经设置了所有代码，但是当我点击网址时

```
http://localhost/ewindow/index.php?r=user/install 
```

我收到以下错误

```
include(UserModule.php) [<a href='function.include'>function.include</a>]: failed to open stream: No such file or directory 
```

或者我尝试在我的应用程序中点击其他页面我收到错误

```
include(YumWebUser.php) [<a href='function.include'>function.include</a>]: failed to open stream: No such file or directory 
```

谁能告诉我我在这里做错了什么？请帮我 。

**编辑 ：**

这是扩展的链接 [https://github.com/thyseus/yii-user-management](https://github.com/thyseus/yii-user-management)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-29T06:42:50.333

我解决这个问题的方法是在 php.ini 文件中打开 short_open_tag。在我修改它之前它是关闭的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T07:25:22.197

还要检查 wamp 服务器设置。特别是您正在使用的php版本...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T18:51:28.547

还检查文件权限：

```
chmod -R go+rx protected/modules 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-11T01:03:13.420

似乎模块开发人员在中使用了 short_open_tags。即，`<? ?>`而不是`<?php ?>`. 所以只需在 PHP 中启用它。

在 Xampp 中，找到 php.ini 并设置`short_open_tags = On`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T05:56:52.367

```
'modules'=>array(

'user' => array(
        'debug' => false,
        ),

 'gii'=>array(
        'class'=>'system.gii.GiiModule',
        'password'=>'sheikh24',
        // If removed, Gii defaults to localhost only. Edit carefully to taste.
        'ipFilters'=>array('127.0.0.1','::1'),
    ),
            'user' => array(
                    'debug' => true,
            )

), 
```

应用此更改并尝试。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T14:53:23.080

在用户模块的模型上，打开文件 UserLogin.php

你可以试试这样的编辑功能

```
public function attributeLabels()
{
    return array(
        'rememberMe'=>Yii::t("User.user", "Remember me next time"),
        'username'=>Yii::t("User.user", "username or email"),
        'password'=>Yii::t("User.user", "password"),
    );
} 
```

# class - symfony2 用于 sluggable 实体的类验证器

> ID：11280759
> 
> 赞同：0
> 
> 时间：2012-07-01T09:01:16.113
> 
> 标签：class, symfony, constraints

我对带有字段 slug 的实体有一个类约束。我想在自定义类约束中对 slug 进行一些检查，但在约束中的值为`getSlug()`空。

```
// my custom class validator
public function isValid( $page, Constraint $constraint ) {
    $slug = $page->getSlug(); 
```

=>`$slug`为空。

这是我的实体

```
class page
{
    /**
     * @ORM\Column(name="name", type="string", length=150)
     * @Assert\NotBlank()
     */
    private $name;

    /**
     * @Gedmo\Slug(fields={"name"})
     * @ORM\Column(name="slug", type="string", length=255)
     */
    private $slug; 
```

这是我的控制器：

```
public function createAction()
{
    $entity  = new Page();
    $request = $this->getRequest();
    $form    = $this->createForm( new PageType(), $entity );
    $form->bindRequest( $request ); 
```

自定义类验证器在`$form->bindRequest( $request )`. 我认为，slug 没有设置，因为教义会在 pre persist 事件中设置它。但此事件稍后在`$em->persist( $entity )`.

有没有办法在我的类约束中找到页面的slug？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:06:50.720

不，你不能。

就像你说的，蛞蝓是在`prePersist`事件中生成的。

你确定你必须验证slug吗？如果是这种情况，请删除`@Gedmo\Slug`注释并自己创建它......但我不确定这是否是一个好主意。

# python - 在 Python 中为应用程序中的任何文件全局加载类或函数

> ID：11280762
> 
> 赞同：4
> 
> 时间：2012-07-01T09:01:27.487
> 
> 标签：python

我正在用 Python 构建一个应用程序，并且我有我的整个包。*虽然我真的很喜欢你必须明确*声明你需要的每个导入的事实，但我想知道是否有一种方法可以将一些函数或类隐式添加到全局范围。

在我的示例中，需要一个应该在所有文件中都可用的 Factory 类。像 dict、str 等类都是可用的，我想也许可以在我的`__init__.py`.

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T09:23:53.870

对于交互模式，将所有导入定义添加到文件（比如 all_my_imports.py），如下所示：

```
from abc import xyz
from my_stuff import * 
```

并且，将环境变量[PYTHONSTARTUP](http://docs.python.org/using/cmdline.html#envvar-PYTHONSTARTUP)指向它。

从脚本中，只需导入包含上述定义的文件：

```
from all_my_imports import * 
```

请记住，依赖此功能并不好，显式导入所有模块（几乎）总是更好。

# c# - 预测周期性时间序列的趋势线

> ID：11280766
> 
> 赞同：2
> 
> 时间：2012-07-01T09:02:05.183
> 
> 标签：c#, excel, forecasting

我在 Excel 电子表格中有一些数据，它代表了一组采样的日期时间。日期呈线性增长，但存在一些周期性间隙（导致日期数据不连续）。

请参阅附图，因为这显示了数据的周期性。请注意，变化率在出现不连续性的地方显示出明显的尖峰。

![在此处输入图像描述](../Images/bfc85749e958ac8d4872a6e38d9ff75b.png)

数据是 DateTimes 的 Excel 电子表格中的单列。我想预测这个重复序列到未来，以便估计未来的不连续性。

最终我想用 C# 编写代码，但如果有人知道可以在 Excel 或 C#/C 中执行这种预测的算法，那就太好了！

我考虑过自动相关，但无法弄清楚如何在 Excel 中进行测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T15:09:41.707

解释我对正确数据表示的评论： ![在此处输入图像描述](../Images/9e53438fe3f049bbe5b513247f36ab7b.png)

如果数据可以用线性函数表示，即：

```
f(date) = start_value + daily_increase * (date - fist_date) 
```

那么你可以做一个简单的线性回归 - 在我的 excel 示例中使用这个[LINEST 函数](http://office.microsoft.com/en-us/excel-help/linest-HP005209155.aspx)（在 2 个单元格中同时输入 Ctrl+Shift+Enter 作为数组公式）：

```
=LINEST(C2:C31;A2:A31) 
```

结果 (6, -220436) 是线性回归公式的线性和常数因子：
=>`f(date) = 6 * date - 220436`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T17:08:10.963

如果有人需要循环数据生成器，请使用此算法（excel公式）：

```
=baseline_value
 + INT([@Step]/repeat_c1) * increase_c1
 + INT([@Step]/repeat_c2) * increase_c2
 + INT([@Step]/repeat_c3) * increase_c3
 ... 
```

要计算增量，需要从最短到最长对周期进行排序 - 请参阅此周期规范的插图：

1.  每一步，增加前一个值2小时
2.  对于每 2 步，将先前的值增加 22 小时而不是 2（即增加 20）
3.  每 8 步，增加 70 小时（增加 48 小时）

![循环数据发生器的测试](../Images/6b45ffcb0554350ac9e7c9f4d03b754c.png)

# java - H2 sql如何将列设置为auto_increment

> ID：11280775
> 
> 赞同：3
> 
> 时间：2012-07-01T09:03:27.143
> 
> 标签：java, sql, playframework-2.0, auto-increment

我正在尝试将我的 ID 设置为 auto_increment，但它没有这样做。我又将 2 个数据保存到 db 中，但仍然是 0 id。结果我无法将 ID 设置为主键。

这怎么可能？我可以使用 JPA 注释将字段设置为 auto_increment 吗？

我什至尝试了这个命令，这是第一次尝试：

```
 alter table user alter column id int not null auto_increment; 
```

没有影响。

有人能帮助我吗

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T09:50:01.980

如果您只想将 ID 设置为自动生成的主键，则为它设置 sql uniqueidentifier。

```
CREATE TABLE userTable(userId uniqueidentifier primary key, userName nvarchar(50)) 
         --create a table having userId as a primary key 

   INSERT INTO userTable(userId, userName ) VALUES (NEWID(), 'mohit');
   INSERT INTO userTable(userId, userName ) VALUES (NEWID(), 'doniyor');

   SELECT * FROM userTable

Result will be:

userId                                             userName

{E8E0A79D-436F-49CB-BCEC-EC9E5D69F1BB}              mohit
{21081DFA-7DBB-46AF-A160-550631160C25}              doniyor 
```

# objective-c - TapkuLibrary.h 在存档中找不到

> ID：11280784
> 
> 赞同：3
> 
> 时间：2012-07-01T09:05:18.873
> 
> 标签：objective-c, ios, xcode, xcode4, tapku

一切都很好，在 xcode 中构建并测试应用程序，直到我内置存档。

我能够在 xcode 中运行我的程序，它确实有效。

我的问题是，当我尝试归档项目时出现错误。

这是错误：

```
Lexical or Preprocessor Error issue
'TapkuLibrary/TapkuLibrary.h' file not found 
```

请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T09:32:53.543

开发/归档/发布是否有不同的标题搜索路径？![在此处输入图像描述](../Images/5628fd5ea2f9191240b542911cf11cd5.png)

# c - 编译时出错（可能包含不止一次的函数）

> ID：11280785
> 
> 赞同：1
> 
> 时间：2012-07-01T09:05:19.653
> 
> 标签：c, include

我正在为学校做一个项目，所以我需要编译它：

```
gcc hide.c stegano.c -o hide -ansi -pedantic -Wall -Werror 
```

但后来我得到这个错误：

```
/tmp/ccDME1jC.o: In function `calculate_n':
stegano.c:(.text+0x0): multiple definition of `calculate_n'
/tmp/ccQxPZJu.o:hide.c:(.text+0x0): first defined here
/tmp/ccDME1jC.o: In function `tam_msg':
stegano.c:(.text+0x87): multiple definition of `tam_msg'
/tmp/ccQxPZJu.o:hide.c:(.text+0x87): first defined here
/tmp/ccDME1jC.o: In function `insere_msg':
stegano.c:(.text+0xe1): multiple definition of `insere_msg'
/tmp/ccQxPZJu.o:hide.c:(.text+0xe1): first defined here
/tmp/ccDME1jC.o: In function `copia':
stegano.c:(.text+0x201): multiple definition of `copia'
/tmp/ccQxPZJu.o:hide.c:(.text+0x201): first defined here
/tmp/ccDME1jC.o: In function `esconde_msg':
stegano.c:(.text+0x274): multiple definition of `esconde_msg'
/tmp/ccQxPZJu.o:hide.c:(.text+0x274): first defined here
collect2: ld returned 1 exit status 
```

程序代码是这样的，我认为错误可能在包含中，所以我隐藏了实际代码：

程序 hide.c 是这样的：

```
#include <stdio.h>
#include <stdlib.h>
#include "stegano.c"
//code// 
```

然后它调用 stegano.c，其中包含 hide.c 中使用的所有实际函数：

```
#include <stdio.h>
#include <stdlib.h>
#include "stegano.h"
//code// 
```

以及头文件stegano.h：

```
#include <stdio.h>
#include <stdlib.h>
#define MAX 100

typedef unsigned char Byte;

void calculate_n(char name[MAX], int* n, int* x);
int tam_msg(char name[MAX]);
void insere_msg(int size, char name[MAX], Byte* v);
void copia(Byte* v1, Byte *v2, int size);
void esconde_msg(Byte* msg, char name1[MAX], char name2[MAX]); 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T09:07:30.480

原因如下：

```
#include "stegano.c" 
```

这会将所有函数定义拉`stegano.c`入`hide.c`. 含义 the`stegano.c`和`hide.c`now 定义相同的功能。这将产生您在尝试（编译和）链接时看到的*多个定义错误。*

改为包含头文件：

```
#include "stegano.h" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T09:07:43.707

您需要删除`#include "stegano.c"`. `stegano.h`而是包含该文件。

通过包含该`.c`文件，您基本上尝试从该文件编译代码两次（一次在包含它时，一次在直接编译文件时），因此两者都`stegano.o`将`hide.o`包含相同的函数，这些函数将在链接阶段中断。

# ruby - Datamapper同时进行两个关联

> ID：11280797
> 
> 赞同：0
> 
> 时间：2012-07-01T09:07:40.277
> 
> 标签：ruby, sinatra, datamapper

假设我有一个帖子，这个帖子应该有一定数量的评论，这些评论应该由一定的用户创建。所以这些是我的数据映射器模型：

```
class User
include DataMapper::Resource

property :id, Serial
property :name, String,
property :password, String

has n, :post
end

class Post
include DataMapper::Resource

property :id, Serial
property :text, Text
property :created_at, DateTime

belongs_to :user
end

class Comment
include DataMapper::Resource

property :text, Text,
property :created_at, DateTime

belongs_to :post
belongs_to :user
end 
```

因此，假设用户 x 创建了一个帖子，而用户 y 想要对该帖子创建评论。那我该怎么做呢？我需要这样的东西：

```
user = User.get(sessions[:user_id])
post = Post.get(params[:post_id])
comment = post.user.Comment.new {
:text => "Bla",
[...]
}

[...]

comment.save

[...] 
```

所以基本上模特帖子应该与模特评论和模特帖子相关联，我如何实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T15:53:47.317

```
comment = Comment.create :post => post, :user => user, :text => 'Foo' 
```

# c# - 序列化 C# 类并返回 JSON

> ID：11280805
> 
> 赞同：1
> 
> 时间：2012-07-01T09:08:19.853
> 
> 标签：c#, asp.net, ajax, json

```
 string query = context.Request.QueryString["tag"];
    System.Web.Script.Serialization.JavaScriptSerializer JsonSerializer =
        new System.Web.Script.Serialization.JavaScriptSerializer();

    context.Response.ContentType = "application/json";
    context.Response.Write(JsonSerializer.Serialize(Category.GetAll())); 
```

这成功返回，但我如何命名返回的 JSON 数组？就像默认情况下 ASP.NET 命名 json 数组一样返回“d”。自己退货时如何创建相同的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T09:28:32.830

如果你想要一个名为“d”的东西，也许：

```
var obj = new { d = Category.GetAll() }; 
```

并序列化：

```
context.Response.Write(JsonSerializer.Serialize(obj)); 
```

# python - 如何找到要在其他文件中导入的类的完整模块路径

> ID：11280810
> 
> 赞同：2
> 
> 时间：2012-07-01T09:09:00.970
> 
> 标签：python, path

我有返回给定类名的模块路径的方法

```
def findModulePath(path, className):
    attributes = []
    for root, dirs, files in os.walk(path):
        for source in (s for s in files if s.endswith(".py")):
            name = os.path.splitext(os.path.basename(source))[0]
            full_name = os.path.splitext(source)[0].replace(os.path.sep, '.')
            m = imp.load_module(full_name, *imp.find_module(name, [root]))
            try:
                attr = getattr(m, className)
                attributes.append(attr)
            #                if "." in attr.__module__:
            #                    return

            except:
                pass
    if len(attributes) <= 0:
        raise Exception, "Class %s not found" % className

    for element in attributes:
        print "%s.%s" % (element.__module__, className) 
```

但它不返回模块的完整路径，例如我在对象包中有一个名为“objectmodel”的python文件，它包含一个模型类，所以我调用findModulePath(MyProjectPath,"Model")。它打印 objectmodel.Model 但我需要 objects.objectmodel.Model

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T09:13:20.810

您要查找的属性是`__file__`. 请注意，您可能需要在获得此值后对其进行一些按摩 - 它可能是`.py`, `.pyc`, `.pyd`, `.so`,`.dll`等。

当然它也将是一个完整的路径，但是你有你的根，你可以减去它以获得你关心的实际层次结构。

# android - 在 Google Play 中，我可以将应用从一个开发者帐户转移到另一个帐户吗？

> ID：11280811
> 
> 赞同：25
> 
> 时间：2012-07-01T09:09:01.763
> 
> 标签：android

我在 Google Play 上有一个应用程序。我可以将其转移到另一个 Google Play 开发者帐户吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-01T09:43:21.107

是的。截至 2014 年 3 月，正确的起点是这里：[转移您的应用程序](https://support.google.com/googleplay/android-developer/checklist/3294213)。

该页面同时指导您完成为转移准备两个帐户的过程，然后将您带到表格以启动转移。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-09-19T09:23:21.720

成功将一个应用程序从一个帐户转移到另一个帐户。

[在https://support.google.com/googleplay/android-developer/contact/appt](https://support.google.com/googleplay/android-developer/contact/appt)上填写请求

所需物品：

开发者名称 - [https://play.google.com/apps/publish/](https://play.google.com/apps/publish/) - 设置/帐户详情/开发者资料

用于原始开发者帐户注册的 Google 电子钱包交易 ID
- “？”中有一个链接 [https://wallet.google.com/manage/](https://wallet.google.com/manage/) - 支付“开发者注册费” - 详情页面下方 - ID 交易

应用程序名称和 APK 文件名......我们从[https://play.google.com/apps/publish/](https://play.google.com/apps/publish/)输入我们的一个应用程序- 所有应用程序/商店列表 - 名称和包名称（已发布按钮左侧的标题中的文本)

一天后电子邮件到达，传输完成。确实如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-13T10:18:10.940

只需填写此表格： https: [//support.google.com/googleplay/android-developer/contact/appt](https://support.google.com/googleplay/android-developer/contact/appt)

一个真正的 WTF 补充：如果 Google Play 帐户很旧，您的 Google Wallet Transaction ID 可能是这样的：`12345678901234567890.G.123456789012345`. 由于表单不接受这种格式，我决定联系 Google。

幸运的是，他们给出了解决方案：只需将之前的所有字符替换`.G`为`0`。结果类似于`0.G.123456789012345`. 它奏效了:·)

# javascript - 使用javascript删除字符串中的空格

> ID：11280812
> 
> 赞同：3
> 
> 时间：2012-07-01T09:09:04.937
> 
> 标签：javascript

在提交表单之前，我需要对一些文本字段内容执行一些功能，例如检查客户注册代码的有效性，将客户名称作为客户表中的代码附加一个递增数字。

我不想在提交表单后这样做，因为我需要在提交表单之前将其显示在代码字段中。

我的代码：

```
function getCode(){
    var temp = document.getElementById("temp").value ;
    var d = parseInt(document.getElementById("temp").value) + 1;
    document.getElementById("customernumber").value = d;
    document.getElementById("code").value = document.getElementById("name").value+"-"+ d;
} 
```

一切正常，但最后一行代码开发了代码之间有空格的代码。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-01T09:12:13.667

删除空格的几种方法...

使用正则表达式：`string.replace(/ /g,'');`

用空格分割字符串并组合不带分隔符的数组：

`string.split(' ').join('');`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-01T09:13:41.863

```
var str = "ab cd ef gh   ";
str = str.replace(/\s+/g,""); 
```

# javascript - 使用 javascript 将外部 .htm 文件加载到 div 中

> ID：11280816
> 
> 赞同：-1
> 
> 时间：2012-07-01T09:10:21.077
> 
> 标签：javascript, jquery, ajax

所以我得到了这个代码

Javascript：

```
<script type="text/javascript">
$(function(){
    $('.ajax') .click(function(e){
        e.preventDefault()
        $('#content').load( 'file.htm' )
    })
})
</script> 
```

html:

```
<a href="file.htm" class="ajax">Link</a> 
```

它在 Firefox 中完美运行，但是当我单击 chrome 中的链接并且 IE 只是打开一个包含该文件的新窗口时，什么也没有发生。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-05T18:13:13.090

我不是任何类型的编码员，我知道有不止一种方法可以完成这项工作。
这对我的情况有用。
我有一个工作站点，但在一个页面中包含大量代码/DIV 内容，我想清理它。
我希望这对其他人有帮助！

我一直在寻找这个解决方案很长一段时间，并且遇到了许多关于它如何在不同情况下工作的示例。我的场景如下：
我有一个摄影网站，它使用一系列包含各种“页面”的 DIV 标签，可以说是网站。
这些都设置为：
`<div id="DivId" style="display:none"></div>`
页面头部的以下脚本：

```

    $(文档).ready(函数(){
    $('a').click(function () {
    var divname= this.name;
    $("#"+divname).show("slow").siblings().hide("slow");
    });

```
});
</script> 
```

并使用如下锚链接调用：

    `<a href="" name="home">HOME</a>`

其中 name 是要调用的 DIV 的名称。

请注意，DIV 将在父容器 DIV 中调用。

最后也是最重要的是，对于这个特定的问题和场景，DIV 都放在页面上，如上所示。

每个 div 内容的创建就像在 DIV 标记中一样，但减去了开始和结束 DIV 标记，然后保存为单独的 .txt 文件，并通过放置 this 调用父页面的头部：

    `src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.js">`

和

```

    $(document).ready(function() { // 一旦页面准备好（DOM 加载完毕）就会运行
        $("#DivName") // 选择“div”（你也可以像在 css 中一样通过它的 id 或类来选择元素）
        .load("PathToFile.txt");//加载指定文件
        $("#AnotherDiv").load("AnotherFile.txt");// 可以添加额外的 DIV 来填充父页面上的 DIV。
    });

```

            回答 #2

赞同：-2

时间：2012-07-01T09:15:35.123

将链接更改为`href="#"`或`"javascript:void(0);return false;"`

```
<a class='ajax' href='#'>...</a> 
```

加载逻辑都在您的 ajax 调用中。但是，您也有一个指向该文件的链接。因此，似乎某些浏览器对如何处理点击给出了不同的优先级。

无论如何，除了更改页面（例如执行 js）之外的链接不应该具有明确的 HREF 属性，而不是“什么都不做”（如上）

            回答 #3

赞同：-3

时间：2012-07-01T09:15:37.983

我认为问题在于脚本在加载文档之前加载。

尝试这个：

```
$(document).ready(function (){
    $('.ajax').click(function(e){
        e.preventDefault()
        $('#content').load( 'file.htm' )
    });
}); 
```

我不确定，但我看不到任何其他问题。

```

# jquery - jquery 事件处理程序仅在绑定到多个元素时执行

> ID：11280817
> 
> 赞同：2
> 
> 时间：2012-07-01T09:10:29.697
> 
> 标签：jquery

我想要一个事件处理程序，它只执行一次，然后将自己与它绑定的所有元素解除绑定。

我知道但是在使用它时“**每个元素**`.one()`最多执行一次处理程序”。

 **是否有一种“内置”方法可以将事件处理程序绑定到多个元素，并在其中任何一个元素上执行后自动将其从所有元素中删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T05:49:41.707

miguel camba 已经告诉你检查 wiki 是否解除绑定。正确的解决方案如下：

```
 var handler = function() {
        alert('I appear only one time');
         $('p').unbind('click', handler);
    }
    $('p').bind('click', handler); 
```

这将仅解除该处理程序与 click 事件的绑定。

//编辑：

另一种解决方案是命名您的点击事件：

```
$('p').bind('click.myClickEvent', function() {
    alert('I appear only one time');
    $('p').unbind('click.myClickEvent');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T09:18:03.903

简单的。只需在回调函数中取消绑定事件处理程序即可。像这样：

```
$('p').on('click', function(){
  alert('I appear only one time');
  $('p').off('click'); // Removes the event. So, it will never be executed again.
}) 
```

该脚本将删除所有*click*类型的事件，这有点激进。检查文档以了解[**更多**](http://api.jquery.com/unbind/)信息[**。**](http://api.jquery.com/off/)[](http://api.jquery.com/unbind/)**

# database - 是否有可能两个请求同时加倍此代码？（防止双重数据库条目）

> ID：11280818
> 
> 赞同：0
> 
> 时间：2012-07-01T09:10:54.867
> 
> 标签：database, symfony, request, entity, sametime

# 1）控制器代码（Symfony2框架）：

```
 $em = $this->getDoctrine()->getEntityManager();

    // get latest toplist
    $last = $em->getRepository('RadioToplistBundle:Toplist')->findOneBy(
      array('number' => 'DESC')
    );

    // get current year and week of the year
    $week = date('W');
    $year = date('Y');

    // if:
    //   [case 1]: $last is null, meaning there are no toplists in the database
    //   [case 2]: $last->getYear() or $last->getWeek() do not match current
    //             year and week number, meaning that there are toplists in the
    //             database, but not for current week
    // then:
    //   create new toplist entity (for current week of current year)
    // else:
    //   do nothing (return)

    if($last && $last->getYear() == $year && $last->getWeek() == $week)
      return;
    else {
      $new = new Toplist();
      $new->setYear($year);
      $new->setWeek($week);
      $em->persist($new);
      $em->flush();
    } 
```

此代码随每个请求执行以查看顶级列表结果（前端）或顶级列表列表（后端）。每当有人想要访问 toplist 时，我们首先检查是否应该创建一个新的 toplist 实体（用于新的一周）。

# 2）问题是：

有没有可能：

*   用户 A 于周一 00:00:01 访问 mydomain.com/toplist -> 代码应生成新实体
*   服务器变慢了，他需要 3 秒来执行代码
*   所以新的顶级列表实体在星期一 00:00:04 保存到数据库
*   用户 B 在星期一 00:00:02 访问 mydomain.com/toplist
*   在 00:00:02，toplist 尚未保存在数据库中，因此 UserB 的请求触发代码创建另一个 toplist 实体

所以.. 几秒钟后，我们有 2 个本周的顶级实体。

这可能吗？

我应该如何防止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T09:22:42.833

对的，这是可能的。您应该在基于 db 值（而不是存储在 db 中）执行计算时使用锁。

在教义的文档中阅读更多关于锁的信息：[锁定支持](http://doctrine-orm.readthedocs.org/en/2.0.x/reference/transactions-and-concurrency.html#locking-support)

# html - HTML5 全屏 Web 应用程序：没有浏览器栏

> ID：11280826
> 
> 赞同：15
> 
> 时间：2012-07-01T09:12:21.110
> 
> 标签：html, mobile

我正在为移动设备创建一个 HTML5 网络应用程序，并被要求隐藏浏览器**导航栏（后退和前进按钮）**（此处为错字）。我怎样才能做到这一点？

我想我应该能够使用 Phone Gap 来实现这一点。但我想知道“普通”网络应用程序是否有可能隐藏浏览器栏？如果我将网站/应用程序固定到主屏幕，我认为这可能吗？

iPhone 有[http://ajaxian.com/archives/iphone-full-screen-webapps](http://ajaxian.com/archives/iphone-full-screen-webapps)，但至少 Andriod 呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-09-15T03:02:33.740

我知道这个问题在这一点上有点过时了，所以这里有一个更新：

在适用于 iOS 7+ 的 Safari 上，这个解决方案很棒：

```
<meta name="viewport" content="minimal-ui, width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"> 
```

minimum-ui 属性使浏览器隐藏所有按钮，同时保持任务栏完好无损。

我还没有为android测试过这个。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-01T09:27:11.973

如果您可以在您的网络应用程序中使用[JQuery](http://jquery.com)，那么我建议您使用[NiceScroll](http://areaaperta.com/nicescroll/)插件。

它可用于移动和桌面浏览器，并将隐藏浏览器的滚动条。如果您的代码超出了浏览器的视口高度，它将创建一个自定义滚动条，如果不使用该滚动条会淡出。

这是[它的演示](http://areaaperta.com/nicescroll/demo.html)。

**编辑：**
根据您的更新，我想补充一点，我实际上不是本地移动网络应用程序开发人员，但在搜索您的问题时，我发现了一些可以帮助您进一步引领方向的问题：

*   [从浏览器中删除地址栏（在 Android 上查看）](https://stackoverflow.com/questions/4068559/removing-address-bar-from-browser-to-view-on-android)
*   [适用于 Android 的全屏 Web 应用程序](https://stackoverflow.com/questions/7517352/fullscreen-web-app-for-android)

这些教程：

*   [全屏网络应用](http://mobile.tutsplus.com/tutorials/mobile-web-apps/remove-address-bar/)
*   [Web 应用的最佳实践](http://developer.android.com/guide/webapps/best-practices.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-16T14:09:19.270

您可以将此应用程序用于 Android：[Kiosk Web/Html Browser](https://play.google.com/store/apps/details?id=fabiodipa.myapplication)，它会在您的 sd 卡中创建一个文件夹，您可以在其中放置 html，以全屏“沉浸式模式”显示。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-02-06T02:00:54.847

```
<script> function requestFullScreen() {

  var el = document.body;

  // Supports most browsers and their versions.
  var requestMethod = el.requestFullScreen || el.webkitRequestFullScreen 
  || el.mozRequestFullScreen || el.msRequestFullScreen;

  if (requestMethod) {

    // Native full screen.
    requestMethod.call(el);

  } else if (typeof window.ActiveXObject !== "undefined") {

    // Older IE.
    var wscript = new ActiveXObject("WScript.Shell");

    if (wscript !== null) {
      wscript.SendKeys("{F11}");
    }
  }
}

</script>
<a href="#" onClick="requestFullScreen();"> click </a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T22:33:06.170

**编辑**

**新答案**

自从提出这个问题以来，情况发生了很大变化。现在对滚动、固定位置有了很好的原生支持，而且大多数操作系统的浏览器栏比当时小了很多。既然是这种情况，我建议不要像大多数网站和答案所推荐的那样诉诸滚动黑客。遵守操作系统的规则将提高您的 web 应用程序的稳定性、可用性和未来兼容性。

**旧答案**

当有人将 iPhone 作为 web 应用程序保存到主屏幕时，它是可能的。如果您添加正确的元标记，这将起作用。

对于标准浏览器模式，您必须回退到黑客攻击有点棘手。基本上，当您滚动时地址栏会消失（对于 Iphone，大多数情况下对于 android）。你可以用 javascript 伪造它。Mobile tuts 也有一篇很好的文章：http: [//mobile.tutsplus.com/tutorials/mobile-web-apps/remove-address-bar/](http://mobile.tutsplus.com/tutorials/mobile-web-apps/remove-address-bar/)，但这仅适用于内容较长的屏幕分辨率。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-06T11:26:55.430

最新的 Chrome for Android 测试版中有这样的功能： [https ://developers.google.com/chrome/mobile/docs/installtohomescreen](https://developers.google.com/chrome/mobile/docs/installtohomescreen)

# c# - 我的 winform 应用程序在没有安装 vs 2010 的情况下无法在其他人的电脑上运行

> ID：11280828
> 
> 赞同：-2
> 
> 时间：2012-07-01T09:12:43.503
> 
> 标签：c#, winforms, excel, com

就像我说的，我的 winform 应用程序在安装了 VS 的计算机上正常工作，但在其他计算机上，它会由于`FileNotFound Exception`. 我用了

`using Application = Microsoft.Office.Interop.Excel.Application;`

在我的源代码中生成一个Excel文件，一调用Excel相关函数就出现问题。但我不知道它具体指的是什么。我是否必须将一些`.dll`与 .exe 文件一起包含在内？那`DLL`是什么？

以下是我的部分代码：

```
 private void FileExport(object objTable)
    {
        StartWaiting();
        string[,] table = null;
        try
        {
            table = (string[,])objTable;
        }
        catch (Exception ex)
        {
            ShowStatus(ex.Message, StatusType.Warning);
        }
        if (table == null)
        {
            return;
        }
        Application excelApp = new Application
        {
            DisplayAlerts = false
        };
        Workbooks workbooks = excelApp.Workbooks;
        Workbook workbook = workbooks.Add(XlWBATemplate.xlWBATWorksheet);
        Worksheet worksheet = (Worksheet)workbook.Worksheets[1];
        worksheet.Name = "TABLE";
        for (int i = 0; i < table.GetLength(0); i++)
        {
            for (int j = 0; j < table.GetLength(1); j++)
            {
                worksheet.Cells[i + 1, j + 1] = table[i, j];
            }
        }
        Range range = excelApp.Range["A1", "H1"];
        range.Merge();
        range.Font.Bold = true;
        range.Font.Size = 15;
        range.RowHeight = 50;
        range.EntireRow.AutoFit();
        range = excelApp.Range["A2", "H8"];
        range.Font.Size = 11;
        range = excelApp.Range["A1", "H8"];
        range.NumberFormatLocal = "@";
        range.RowHeight = 300;
        range.ColumnWidth = 50;
        range.HorizontalAlignment = XlHAlign.xlHAlignCenter;
        range.VerticalAlignment = XlVAlign.xlVAlignCenter;
        range.EntireRow.AutoFit();
        range.EntireColumn.AutoFit();
        worksheet.UsedRange.Borders.LineStyle = 1;
        Invoke(new MainThreadInvokerDelegate(SaveAs), new object[] { worksheet, workbook, excelApp }
            );
        EndWaiting();
    } 
```

`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T09:21:42.757

我认为您的程序正在寻找副本`Microsoft.Office.Interop.Excel.dll`但没有找到它。

为此，请转到解决方案资源管理器，确保选中“显示所有文件”，然后打开您的参考列表。

选择您对`Microsoft.Office.Interop.Excel.dl`l 的引用，然后按 F4 打开“属性”菜单。在那里，将 Copy Local 更改为`True`，现在应该将引用的 dll 复制到您的输出目录，这意味着将找到该文件并且程序应该可以运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T09:34:20.093

`Microsoft.Office.Interop.Excel.dll`正如其他人提到的，您可能忘记与应用程序文件一起部署。您可以在部署应用程序时包含这些文件，也可以使用可以自动为您执行此操作的 Windows 安装程序。安装程序将负责部署您的项目文件及其所有依赖项。关于这个问题， [MSDN](http://msdn.microsoft.com/en-us/library/wx3b589t.aspx)说：

> 生成的 Windows Installer (.msi) 文件包含应用程序、任何相关文件、有关应用程序的信息（如注册表项）和安装说明。

附带说明：您必须确保 Excel 安装在另一台机器上，否则您的应用程序将不会按照您期望的方式运行。

# node.js - 没有 Schema.ObjectId 的猫鼬中的 DB-ref？

> ID：11280831
> 
> 赞同：3
> 
> 时间：2012-07-01T09:13:11.007
> 
> 标签：node.js, mongodb, mongoose

在我的代码中，人们可以关注其他人。到目前为止，除了这个事实之外一切都很好：在 userScheme 我有这个字段。

```
, following: [{ type: Schema.ObjectId, ref: 'Users' }] 
```

由于每个用户都有一个用户名，因此我将 dbref 与用户名一起使用更加通用。有没有办法做这样的事情？

```
, following: [{ type: Users.username, ref: 'Users' }] 
```

非常感谢，g

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T13:13:44.323

不，只有`ObjectId`引用`_id`另一个集合的属性的值才能用作引用。

在[源代码](https://github.com/LearnBoost/mongoose/blob/master/lib/model.js)中确认。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T05:56:53.433

您只能通过 ObjectId 引用像您的第一个代码片段这样的集合。

```
[{ type: Schema.ObjectId, ref: 'Users' }] 
```

使用[populate()](http://mongoosejs.com/docs/populate.html)进行查询时，您可以指定要返回的字段。在你的情况下，它看起来像

```
User.find({}).populate('following', 'username').exec(function(err,doc) {}); 
```

以下数组中的每个对象看起来像

```
{ _id: 'xxxxxxxxxx', username: 'xxxxxxxx' } 
```

# sql-server - 连接中的 Where 子句与子查询中的 Where 子句

> ID：11280833
> 
> 赞同：2
> 
> 时间：2012-07-01T09:13:25.473
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

## DDL

```
create table t
(
    id int Identity(1,1),
    nam varchar(100)
)

create table t1
(
    id int Identity(1,1),
    nam varchar(100)
) 
```

* * *

## DML

```
Insert into t( nam)values( 'a')
Insert into t( nam)values( 'b')
Insert into t( nam)values( 'c')
Insert into t( nam)values( 'd')
Insert into t( nam)values( 'e')
Insert into t( nam)values( 'f')

Insert into t1( nam)values( 'aa')
Insert into t1( nam)values( 'bb')
Insert into t1( nam)values( 'cc')
Insert into t1( nam)values( 'dd')
Insert into t1( nam)values( 'ee')
Insert into t1( nam)values( 'ff') 
```

* * *

## 查询 - 1

```
Select t.*, t1.* From t t
Inner join t1 t1 on t.id = t1.id
Where t.id = 1 
```

## 查询 1 SQL 分析器结果

读取 => 56，持续时间 => 4

## 查询 - 2

```
Select T1.*, K.* from 
(
    Select id, nam from t Where id = 1
)K
Inner Join t1 T1 on T1.id = K.id 
```

## 查询 2 SQL Profiler 结果

读取 => 262 和持续时间 => 2

你也可以看看我的**[SQlFiddle](http://www.sqlfiddle.com/#!3/28e39/1)**

查询 - 应该使用哪个查询，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T09:37:13.567

优化器为两个查询生成相同的执行计划，总成本相同。您可以通过选中 SSMS 中的“包括实际执行计划”选项，然后查看图形执行计划中显示的每个查询的第一个元素的“估计子树成本”来查看成本指标。您还可以通过使用 SET STATISTICS TIME ON 和 SET STATISTICS IO ON 启用时间指标和 IO 读取指标来比较它们。进行多次测试，取最好的平均结果进行比较。如果测试显示相同的性能，我会采用更具可读性且更易于维护的查询。

# algorithm - 瑞士奶酪有多防水？

> ID：11280836
> 
> 赞同：13
> 
> 时间：2012-07-01T09:13:53.127
> 
> 标签：algorithm, shortest-path, computation-theory

想象一块立方体形状的瑞士奶酪。我们通过 20x20x20 的网格对奶酪进行建模。为简单起见，我们假设每个网格立方体完全由奶酪或完全由空气组成。然后我们在瑞士奶酪立方体的上侧倒入水，水只能通过立方体中的气孔渗入奶酪。水可能会从顶部流到底部的连续通道，但如果两个立方体通过面（不仅仅是边缘或角落）连接，它可能只会从一个空气立方体流到下一个空气立方体。水也可以在弯道上流动，例如在水槽排水管中，但它可能不会在奶酪块的侧壁上流出。

现在让我们以编程方式实现瑞士奶酪的模型，如上所述，空气和奶酪块的随机分布，奶酪的概率为*p*，空气的概率为*1 - p*，并模拟水流过奶酪，以找出，水是否流到瑞士奶酪块的底部。

通过以不同的奶酪和空气概率反复模拟流过瑞士奶酪立方体的水，我们可以确定 p 与水流到瑞士奶酪立方体底部的概率之间的关系，我们将其命名为*q*。结果如下所示：

```
q
1   ************************
0.8                          *
0.6                           *
0.4                            *
0.2                             *
0                                 ***********
    0       0.2     0.4     0.6     0.8     1   p 
```

我的问题：**为什么会有这么奇怪的曲线？**

本题摘自[德国第 23 届联邦信息学竞赛（2004/2005）](http://www.bundeswettbewerb-informatik.de/uploads/media/bwi23/runde1/bwinf231-gross.pdf)。网络上没有提供“为什么这么奇怪的曲线”的答案（[提供的解决方案](http://www.bundeswettbewerb-informatik.de/uploads/media/bwi23/runde1/loesungshinweise231.pdf)）。

我希望我在正确的地方提出这类问题。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-01T14:03:08.213

也许你会发现下面的解释很直观：

在您的情况下，20 * 20 * 20 个单元格，除非您至少有 20 个孔，否则水流的概率正好为 0。如果您有 20 个孔，如果您将它们排列成一列，水可以流动，但概率这样随机出现的顺序非常低，20*20/Comb(20^3, 20) ~= 1e-57。随着孔数的增加，出现连续路径的可能性越来越大。

当除了 20*20 的所有单元格都是孔时，阻止流动的唯一方法是将所有奶酪单元格排列成一个“阻塞”层，例如水平 20*20 层。（还有其他可能的配置，但不太可能。每个 (x, y) 坐标都需要一个奶酪块，并且每个奶酪块必须与其所有 (x, y) 邻居接触。但它们可能是沿 z 轴分布）。

一旦你有少于 20*20 的奶酪块，你就不能形成一个完整的层，流动概率正好变成 1。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-14T14:26:34.543

这是Zhenya评论的延伸。

如前所述，您的瑞士奶酪是[渗透理论](http://en.wikipedia.org/wiki/Percolation_theory)的一个例子。当我们考虑[相变](http://en.wikipedia.org/wiki/Phase_transition)的主题时，这是[统计力学](http://en.wikipedia.org/wiki/Statistical_mechanics)的一个基本概念。渗透理论的典型例子之一与您发布的问题非常相似。

## Erdős-Rényi 模型

在[Erdős–Rényi 模型](http://en.wikipedia.org/wiki/Erd%C5%91s%E2%80%93R%C3%A9nyi_model)中，您从一个空[图](http://en.wikipedia.org/wiki/Graph_%28mathematics%29)开始，并以概率 将节点与一条边连接起来`p`。在某个临界`p`值下，图的结构从一堆不连贯的集群变为一个包含大部分节点的大型跨越结构。事实上，如果您要绘制最大集群的平均大小，您会得到与您的瑞士奶酪模型非常相似的图片！示意图如下所示：

![在此处输入图像描述](../Images/e0311ccd6c1db4a18f86ef185935e2e2.png)

你会在应用数学和物理学的*许多例子中找到它。*图片的功劳来自[Frontiers](http://www.frontiersin.org/fractal_physiology/10.3389/fphys.2012.00094/full)中的这篇文章，它更详细地讨论了这种现象。

# java - gson：根据类型参数化 fromJson

> ID：11280837
> 
> 赞同：1
> 
> 时间：2012-07-01T09:13:58.377
> 
> 标签：java, json, casting, gson

很抱歉，它肯定已经被问过了，但我没有找到我需要
的我有几种消息类型：

```
class AbstractMessage {
    int code;
    String token;
}

class ShareMessage extends AbstractMessage{
    String user;
    Map<String, String> friends;
}

class PostMessage extends AbstractMessage{
    String user;
    Map<String, String> data;
} 
```

以及从 json post 消息中解码它们的方法：

```
public Object getMessage(BufferedReader r, Type t){
    Object o = null;
    try{
        o = g.fromJson(r, t);
    } catch (final JsonSyntaxException e) {
        LOGGER.info("Error in Json format", e);
    } catch (final JsonParseException e) {
        LOGGER.info("Error in parsing Json", e);
    }

    return o;
} 
```

然后例如：

```
Type dataType = new TypeToken<PostMessage>() {}.getType();
PostMessage m = (PostMessage) getMessage(request.getReader(), dataType); 
```

有效，但它很难看，我怎么能有一个参数化的 getMessage 函数，或者比返回 Object 和投射
thx更好的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T20:33:27.363

添加`<T>`到方法签名，紧接在返回类型之前。这将创建一个类型参数化的方法：

```
public <T> T getMessage(BufferedReader r, TypeToken<T> typeToken){
  try {
    return g.fromJson(r, typeToken.getType());
  } catch (final JsonSyntaxException e) {
    LOGGER.info("Error in Json format", e);
  } catch (final JsonParseException e) {
    LOGGER.info("Error in parsing Json", e);
  }
  return null;
} 
```

像这样称呼它：

```
PostMessage m = getMessage(request.getReader(), new TypeToken<PostMessage>() {}); 
```

# scala - 为什么 ListNode 示例（Scala 网站）可以处理不同的类型？

> ID：11280838
> 
> 赞同：4
> 
> 时间：2012-07-01T09:13:58.983
> 
> 标签：scala, type-parameter, lower-bound

ListNode[示例](http://www.scala-lang.org/node/137)，取自 Scalas 主页，如下所示：

```
case class ListNode[+T](h: T, t: ListNode[T]) {
  def head: T = h
  def tail: ListNode[T] = t
  def prepend[U >: T](elem: U): ListNode[U] =
    ListNode(elem, this)
} 
```

使用这个类，我们可以创建如下对象：

```
val empty: ListNode[Null] = ListNode(null, null)
val strList: ListNode[String] = empty.prepend("hello")
                                     .prepend("world")
val anyList: ListNode[Any] = strList.prepend(12345) 
```

如我们所见，我们可以在`String`节点前添加一个整数值。我想，这是可行的，因为类型参数`U`将被自动设置为`Any`，当给`prepend`方法提供整数时（因为`Int`不是 的超类型`String`）。

当尝试使用自己的下限示例时，我会收到错误消息：

```
scala> class E[T >: String]
defined class E

scala> new E[Any]
res1: E[Any] = E@135f0a

scala> new E[Int]
<console>:11: error: type arguments [Int] do not conform to class E's type param
eter bounds [T >: String]
      val res2 =
          ^
<console>:12: error: type arguments [Int] do not conform to class E's type param
eter bounds [T >: String]
              new E[Int]
                  ^ 
```

为什么`Int`这里的类型不会自动被视为示例`Any`中的类型`ListNode`？

* * *

**更新 1**：这也有效（没有明确地说 new`ListNode`应该是 type `Any`）

```
scala> val empty: ListNode[Null] = ListNode(null, null)
empty: example.listNode.ListNode[Null] = ListNode(null,null)

scala> empty.prepend("hello").prepend("world")
res0: example.listNode.ListNode[java.lang.String] = ListNode(world,ListNode(hell
o,ListNode(null,null)))

scala> val strList: ListNode[String] = empty.prepend("hello").prepend("world")
strList: example.listNode.ListNode[String] = ListNode(world,ListNode(hello,ListN
ode(null,null)))

scala> strList.prepend(12345)
res1: example.listNode.ListNode[Any] = ListNode(12345,ListNode(world,ListNode(he
llo,ListNode(null,null)))) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T09:26:26.137

您会收到上述错误，因为`Int`它不是`String`.

请注意，在上面的`ListNode`代码中，`String`是`Null`（请参阅[类层次结构](http://www.artima.com/pins1ed/images/scalaHierarchy.jpg)）`Any`的超类型，并且是`String`（正如您正确指出的那样）的超类型。

我猜想混淆是由比较两个并不完全相同的操作引起的：`new E[Int]`使用类型参数实例化类`Int`，它不符合下限`String`，因此失败。

`ListNode`另一方面，在上面的代码中，您调用了`prepend`采用超类型`U`的方法`T`。创建时`anyList`, `U`（正如您所猜测的那样）解析为，`Any`因为这是 and 的唯一常见超类型`String`，`Int`因此您可以认为它并没有真正将 an 传递给它，而只是( 它也恰好是 type`Int`的一些任意实例）。`Any``Int`

所以，

```
val anyList: ListNode[Int] = strList.prepend(12345) 
```

也失败了，因为`strList.prepend(12345)`只能返回`ListNode[Any]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T17:40:56.987

您正在做一件根本不同的事情：传递`Int`类型。让我们打破原来的代码，例如：

```
scala> val anyList: ListNode[Any] = strList.prepend[Int](12345)
<console>:11: error: type arguments [Int] do not conform to method prepend's type parameter bounds [U >: String]
       val anyList: ListNode[Any] = strList.prepend[Int](12345)
                                                   ^ 
```

看？如果您*指定*，`Int`它会中断。它在原始版本中起作用，因为`12345`被推断为 type `Any`，而不是 type `Int`。

# php - 电子邮件未正确发送

> ID：11280841
> 
> 赞同：0
> 
> 时间：2012-07-01T09:14:33.113
> 
> 标签：php, html, email

我正在使用带有 xampp 的 Mozilla Thunderbird - 水银、apache、mysql

问题是当我订购一种产品时，它会发送订单电子邮件，其中包含所有内容。一种产品看起来像这样：

```
Order date and time: July 1, 2012, 11:04 am
Thank you for your order at our online shop!
Your order information:

    Product ID: 1991001
    Brand: Razer
    Model: Mamba Elite Wireless Gaming Mouse
    Price per item: 129.99
    Amount of item: 1
    Total cost: 129.99
    _________________________________________________|
    1To follow your odertracking please remember your order ID and customer ID
    Order ID: 116
    Customer ID: 6
    Link to track your order: Ordertracking system 
```

当我订购 5 件产品时，它只会在电子邮件中显示 4 件产品，看起来像这样：

```
Order date and time: July 1, 2012, 11:08 am
Thank you for your order at our online shop!
Your order information:

Product ID: 1991001
Brand: Razer
Model: Mamba Elite Wireless Gaming Mouse
Price per item: 129.99
Amount of item: 1
Total cost: 129.99
_________________________________________________|
1 Product ID: 1991002
Brand: Razer
Model: Imperator Expert Ergonomic Gaming Mouse
Price per item: 79.99
Amount of item: 1
Total cost: 79.99
_________________________________________________|
2 Product ID: 1991003
Brand: Razer
Model: Orochi Elite Mobile Gaming Mouse
Price per item: 79.99
Amount of item: 3
Total cost: 239.96999999999997
_________________________________________________|
3 Product ID: 1991004
Brand: Razer
Model: Expert Ambidextrous Gaming Mouse
Price per item: 79.99
Amount of item: 1
T 
```

我没有看到第 5 个产品，也没有看到： `To follow your odertracking please remember your order ID and customer ID Order ID: 116 Customer ID: 6 Link to track your order: Ordertracking system`

为什么以及如何解决这个问题？

这是电子邮件的代码。email.php，最后你会看到`$to = $email;`

```
<?php
//var_dump($_GET);

//collect all information
$name = $_GET["name"];
$surname = $_GET["surname"];
$city = $_GET["city"];
$postalcode = $_GET["postalcode"];
$phonenumber = $_GET["phonenumber"];
$email = $_GET["email"];

$i = 1;
while (isset($_GET["Product_ID_".$i])) {
    $productid = $_GET["Product_ID_".$i];
    $brand = $_GET["Brand_".$i];
    $model = $_GET["Model_".$i];
    $price = $_GET["Price_".$i];
    $amount = $_GET["Amount_products_".$i];
    $totalcost = $_GET["Total_cost_".$i];
    $i++;
}

$image = "includes/images/mouse_4.jpg";

$date = date("F j, Y, g:i a");

//connect to database
$connection = mysql_connect("localhost","root","") or die ("Can't connect");
mysql_select_db("shoppingcart", $connection) or die ("Can't connect");  

//check if already customer
$result = mysql_query("SELECT * FROM customer WHERE email='$email'");
$rows = mysql_num_rows($result);

    if ($rows) 
    {
      echo '<br>Welcome back ' . $name .' '. $surname. '<br>';
    }
    else
    {
        //if new customer, add to database
        $customer = "INSERT INTO customer (customerid, name, surname, email, city, postalcode, phonenumber) VALUES ('', '$name', '$surname', '$email', '$city', '$postalcode', '$phonenumber')";
        if (!mysql_query($customer,$connection))
        {
            die('Error: ' . mysql_error());
            echo "Sorry, there was an error";
        }
        echo "New customer added" . "<br />";
        echo '<br>Welcome as our new customer ' . $name . ' '. $surname;

        mysql_close($connection);   
    }

//connect to database
$connection = mysql_connect("localhost","root","") or die ("Can't connect");
mysql_select_db("shoppingcart", $connection) or die ("Can't connect");

//get customer id
$res = mysql_query("SELECT customerid FROM customer WHERE email='$email'");
while($row=mysql_fetch_array($res))
{
 $customerid=$row['customerid'];
}
    //add new ordertracking
    $ordertracking = "INSERT INTO `ordertracking` (orderid, customerid, email, progress, date) VALUES ('', '$customerid', '$email', 'Pending', '$date')";
    if (!mysql_query($ordertracking,$connection))
        {
            die('Error: ' . mysql_error());
            echo "Sorry, there was an error";
        }
        echo "New order added" . "<br />";

        mysql_close($connection);

//connect to database
$connection = mysql_connect("localhost","root","") or die ("Can't connect");
mysql_select_db("shoppingcart", $connection) or die ("Can't connect");

//get order id
$vol = mysql_query("SELECT orderid FROM ordertracking WHERE email='$email'");
while($volume=mysql_fetch_array($vol))
{
 $orderid = $volume['orderid'];
}
    // add new order
    $order = "INSERT INTO `order` (orderid, customerid, productid, brand, model, price, amount, totalcost, image) VALUES ('$orderid', '$customerid', '$productid', '$brand' , '$model', '$price', '$amount', '$totalcost', '$image')";
    if (!mysql_query($order,$connection))
        {
            die('Error: ' . mysql_error());
            echo "Sorry, there was an error";
        }
        echo "New order added" . "<br />";

        mysql_close($connection);

$to = $email;
$subject = "Order information of: ";

$headers = "From: " . "postmaster@localhost" . "\r\n";
$headers .= "Reply-To: ". "postmaster@localhost" . "\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";

$message = '<html><body>';
$message .= '<h1>Dear ' . $name . ' ' . $surname .  ',</h1>' . '<br />';
$message .= 'Order date and time: ' . $date . '<br />';
$message .= 'Thank you for your order at our online shop!' . '<br />';
$message .= 'Your order information: ' . '<br /><br /><br />';
$i = 1;
while (isset($_GET["Product_ID_".$i])) {
    $productid = $_GET["Product_ID_".$i];
    $brand = $_GET["Brand_".$i];
    $model = $_GET["Model_".$i];
    $price = $_GET["Price_".$i];
    $amount = $_GET["Amount_products_".$i];
    $totalcost = $_GET["Total_cost_".$i];

    $message .= ' Product ID: ' . $productid . "<br />" .
                'Brand: '. $brand . "<br />" .
                'Model: ' . $model . "<br />" .
                'Price per item: ' . $price . "<br />" .
                'Amount of item: ' . $amount . "<br />" .
                'Total cost: ' . $totalcost . "<br />" .
                '_________________________________________________| ' . "<br />" .
    $i++;
}
$message .= 'To follow your odertracking please remember your order ID and customer ID' . '<br />';
$message .= 'Order ID: ' . $orderid . '<br />';
$message .= 'Customer ID: ' . $customerid . '<br />';
$message .= 'Link to track your order: ' . '<a href="http://localhost/school/shoppingcart/ordertracking.php">Ordertracking system</a>' . '<br />';

$message .= '</body></html>';

mail($to, $subject, $message, $headers);

?>
<meta http-equiv="REFRESH" content="3;ordertracking.php"> 
```

编辑 var dump 输出：

```
array(38) { ["Product_ID_1"]=> string(7) "1991001" ["Brand_1"]=> string(5) "Razer" ["Model_1"]=> string(33) "Mamba Elite Wireless Gaming Mouse" ["Price_1"]=> string(6) "129.99" ["Amount_products_1"]=> string(1) "1" ["Total_cost_1"]=> string(6) "129.99" ["Product_ID_2"]=> string(7) "1991002" ["Brand_2"]=> string(5) "Razer" ["Model_2"]=> string(39) "Imperator Expert Ergonomic Gaming Mouse" ["Price_2"]=> string(5) "79.99" ["Amount_products_2"]=> string(1) "1" ["Total_cost_2"]=> string(5) "79.99" ["Product_ID_3"]=> string(7) "1991003" ["Brand_3"]=> string(5) "Razer" ["Model_3"]=> string(32) "Orochi Elite Mobile Gaming Mouse" ["Price_3"]=> string(5) "79.99" ["Amount_products_3"]=> string(1) "1" ["Total_cost_3"]=> string(5) "79.99" ["Product_ID_4"]=> string(7) "1991004" ["Brand_4"]=> string(5) "Razer" ["Model_4"]=> string(32) "Expert Ambidextrous Gaming Mouse" ["Price_4"]=> string(5) "79.99" ["Amount_products_4"]=> string(1) "1" ["Total_cost_4"]=> string(5) "79.99" ["Product_ID_5"]=> string(7) "1991005" ["Brand_5"]=> string(5) "Razer" ["Model_5"]=> string(62) "Battlefield 3â„¢ Razer Imperator Expert Ergonomic Gaming mouse" ["Price_5"]=> string(5) "79.99" ["Amount_products_5"]=> string(1) "1" ["Total_cost_5"]=> string(5) "79.99" ["name"]=> string(1) "s" ["surname"]=> string(1) "s" ["city"]=> string(1) "s" ["postalcode"]=> string(1) "s" ["phonenumber"]=> string(1) "s" ["email"]=> string(17) "klant-x@localhost" ["x"]=> string(2) "85" ["y"]=> string(2) "12" } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T09:36:48.850

我认为问题在于通过查询字符串传递所有这些信息。

相反，您应该通过`POST`基于表单发送它，然后使用`$_POST`.

如果您已经在使用表单，则只需将`method`属性更改为`POST`

# ios - 在适用于 iOS 的 Chrome 上创建 iOS 主屏幕快捷方式

> ID：11280851
> 
> 赞同：41
> 
> 时间：2012-07-01T09:16:56.020
> 
> 标签：ios, google-chrome, safari

我有一个网络应用程序，允许用户将网页添加到他在 iPhone 上的主屏幕。

该功能存在于 Safari 中。

现在他们也发布了适用于 iPhone 的 chrome 浏览器。我的问题是如何指导用户将网页添加到他的 ios 主屏幕。chrome浏览器似乎没有那个功能..？我可以从 chrome 选项中添加一个快捷方式，以便它出现在 iphone 主页上吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-07-18T06:16:55.700

为了完整性：

[https://developer.chrome.com/multidevice/android/installtohomescreen](https://developer.chrome.com/multidevice/android/installtohomescreen)

> 添加到主屏幕是否适用于 iOS 版 Chrome？
> 
> 不。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-14T04:41:05.057

无法更改默认浏览器，但试试这个（不久前在网上找到的）。在 Safari 中添加一个名为“在 Chrome 中打开”的书签，如下所示。

```
javascript:location.href=%22googlechrome%22+location.href.substring(4); 
```

将在 Chrome 中打开当前页面。不那么方便，但也许有人会觉得它有用。

[资源](http://community.spiceworks.com/topic/263661-iphone-chrome-shortcuts)

为我工作。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-02T06:57:35.927

没有用于在 iOS 中添加主屏幕快捷方式的 API，因此没有第三方浏览器能够提供该功能。

# jquery - 在 AJAX 选项卡内的 gridview 中引用链接按钮

> ID：11280853
> 
> 赞同：0
> 
> 时间：2012-07-01T09:17:37.797
> 
> 标签：jquery, asp.net

在我的主页上，我有大约 10 个网格位于 ajax 选项卡等内

当用户单击它时，一个网格特别有一个名为“存档”的链接按钮这我如何获取需要使用 Jquery 归档的行的名称和电子邮件，我想将此信息存储在隐藏字段中，然后从后面的代码中引用隐藏字段等。

我尝试使用 asp:ModalPopUp 扩展器，但是由于此网格放置在 ajax 选项卡内，模式弹出扩展器抱怨它可以看到控制链接按钮，所以 iv 决定使用 Jquery 来获取两个字段名称和编号可以有人帮我实现这一目标吗？

下面是按下链接按钮时我需要获取姓名和电子邮件地址的一个网格

 `````
 <asp:HiddenField ID="hdnUserFullName" runat="server"/>
    <asp:HiddenField ID="hdnUserEmail" runat="server" />

     <div id="MainContent_TabControl_body" class="ajax__tab_body" style="height: 100%;
                    display: block;">
                    <div id="MainContent_TabControl_tb2" id="MainContent_TabControl_tb2" class="ajax__tab_panel">
                        <div>
                            <table cellspacing="0" class="tablesorter" id="MainContent_TabControl_tb2_GrdViewUsers"
                                style="border-collapse: collapse;">
                                <thead>
                                    <tr>
                                        <th scope="col">
                                            &nbsp;
                                        </th>
                                        <th scope="col">
                                            Full Name
                                        </th>
                                        <th scope="col">
                                            Email
                                        </th>
                                        <th scope="col">
                                            Exam Taken
                                        </th>
                                        <th scope="col">
                                            Date Taken
                                        </th>
                                        <th scope="col">
                                            Exam Total
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>
                                            <a id="MainContent_TabControl_tb2_GrdViewUsers_Edit_0" href="javascript:__doPostBack(&#39;ctl00$MainContent$TabControl$tb2$GrdViewUsers$ctl02$Edit&#39;,&#39;&#39;)">
                                                Archieve</a>
                                        </td>
                                        <td>
                                            <a id="MainContent_TabControl_tb2_GrdViewUsers_HyperFullName_0" href="/Authentication/ExamPaper.aspx?uid=1">
                                                Scott Atkinson</a>
                                        </td>
                                        <td>
                                            <span id="MainContent_TabControl_tb2_GrdViewUsers_lblEmail_0">Scott.test@hotmail.co.uk</span>
                                        </td>
                                        <td>
                                            <span id="MainContent_TabControl_tb2_GrdViewUsers_lblExamTaken_0">True</span>
                                        </td>
                                        <td>
                                            <span id="MainContent_TabControl_tb2_GrdViewUsers_lblDateTaken_0">30-06-2012</span>
                                        </td>
                                        <td>
                                            <span id="MainContent_TabControl_tb2_GrdViewUsers_lblExamTotal_0">0</span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div> 
````  `这是我的 Jquery 到目前为止，我在其中放了一个警报，以确保它击中脚本并且它是.....

 `````
$(document).ready(function () {

    $('#MainContent_TabControl_tb2_GrdViewUsers_Edit_0').click(function () {
        alert('hello');
        $('#dvArchive').show();
        $('#MainContent_hdnUserFullName').val() == 'Value of the grid view column';
        $('#MainContent_hdnUserEmail').val() == 'Email Value from the column';
    });

}); 
````  `只需要一些帮助来引用全名列和电子邮件列，以使用需要存档的行的值填充隐藏字段.....

更新这是我修改后的 Jquery

任何帮助，将不胜感激.......

 `````
 $(document).ready(function () {
            $('.ClickMe').click(function () {
                var tr = $(this);
                var UserName;
                var Email;
                UserName == tr.find('.UserName').text();
                Email == tr.find('Email').text();

                $('#MainContent_hdnUserFullName').val() == UserName;
                $('#MainContent_hdnUserEmail').val() == Email;

                return false;
            });

        }); 
````  `Iv 为链接按钮提供类名 .ClickMe 用于测试目的以及 Full Name 具有类 .Username 和 Email 作为类 .Email

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T12:02:23.880

您需要的是一个名为的 jquery 方法`closest()`，该方法从元素本身向上搜索 DOM 以找到匹配给定条件的父级。

在您的情况下，您需要找到`tr`单击的链接所在的网格行 ( )。然后从该行中提取您的名字等。

你还有两个错误：

1.  要为变量赋值，您需要使用`=`而不是`==`.
2.  要在 jquery 中为控件分配值，您需要说`.val(value)`而不是`.val() == value`.

换句话说：

```
$(document).ready(function () {
        $('.Archive-Button').click(function () {
            var tr = $(this).closest("tr");
            var UserName = tr.find('.UserName').text();
            var Email = tr.find('.Email').text();

            $('#MainContent_hdnUserFullName').val(UserName);
            $('#MainContent_hdnUserEmail').val(Email);

            return false;
        });

    }); 
`````````

# delphi - 如何在 Delphi 的不同时区中获取当前时间？

> ID：11280858
> 
> 赞同：10
> 
> 时间：2012-07-01T09:19:12.100
> 
> 标签：delphi

我如何从德尔福的不同时区获取当前时间。如果我使用 TidSNTP，它只会给我当地的时区。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-01T09:41:29.683

[您可以使用delphi-tzdb (Delphi 的时区数据库)](https://github.com/pavkam/tzdb)轻松地将本地时间转换为不同的时区。

以下是其[文档](https://github.com/pavkam/tzdb/wiki/Code-Examples)中的示例。

```
var
  LSydney: TTimeZone;
  LMadeUpLocalTime, LUniversalTime,
    LSydneyTime: TDateTime;
begin
  // Get the Sydney time zone 
  LSydney := TBundledTimeZone.GetTimeZone('Australia/Sydney');

  // Encode a local date/time value -- 14th March 2009 at 12:45:00 PM 
  LMadeUpLocalTime := EncodeDateTime(2009, 03, 14, 12, 45, 00, 00);

  // Find out what was the time in Sydney at that moment 
  LUniversalTime := TTimeZone.Local.ToUniversalTime(LMadeUpLocalTime);
  LSydneyTime := LSydney.ToLocalTime(LUniversalTime);

  WriteLn(Format('When in my time zone the time was %s, in Sydney it was %s.',
   [DateTimeToStr(LMadeUpLocalTime), DateTimeToStr(LSydneyTime)]));
end; 
```

# java - hibernate 简单继承 - 或 - xml 属性导入/包含

> ID：11280859
> 
> 赞同：1
> 
> 时间：2012-07-01T09:19:26.917
> 
> 标签：java, xml, hibernate, orm, hbmxml

最终目标：
**让一些共享相同基类的 java 对象持久化到数据库中，而每个对象都有自己的自包含表，其中包含所有自己/继承的对象，以及由数据库 id 自动生成的简单对象**。

很简单的要求。不可能（？）与休眠！

到目前为止我所拥有的（使用 MySQL，Hibernate XML 映射）：

地图.hbm.xml

```
<?xml version="1.0"?>

<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">

<hibernate-mapping default-access="field"
    default-lazy="false">

    <class name="xyz.url.hibernate.EntityBase" abstract="true">
        <id name="m_id" column="id">
            <generator class="identity" />
        </id>

        <version name="m_version" column="version" type="long" />

        <union-subclass name="xyz.url.hibernate.User" table="my_entity">
            <property name="name" column="name" type="string" />
        </union-subclass>
    </class>

</hibernate-mapping> 
```

EntityBase.java

```
public abstract class EntityBase {
    private final long  m_id;
    private final long  m_version;

    public EntityBase() {
        this.m_id = 0;
        this.m_version = 0;
    }

    public long get_id() {
        return this.m_id;
    }

    public long get_version() {
        return this.m_version;
    }
} 
```

用户.java

```
public class User extends EntityBase {
    public String   name;
} 
```

除非您将`generator`类更改为`increment`.
目前这是给定的错误：

```
org.hibernate.MappingException: Cannot use identity column key generation with <union-subclass> mapping for: xyz.url.hibernate.User 
```

好吧，为什么 Hibernate 假设我想要一个程序范围内的唯一 ID（我已经阅读了一些 JPA 要求）......真是个废话！

无论如何，我坚持有一个简单的表（每个对象）来聚合所有对象的（`User`在这种情况下）属性，并拒绝使用只会使最终 SQL 查询复杂化并影响性能的鉴别器（又是什么废话……）。

我在这里看到的唯一解决方案：

1.  在 XML 内的一个块中手动映射所有属性。

2.  `<propert>`映射所有属性，同时从外部文件“导入”一些项目，从而实现继承（属性的重用）。可能的？怎么做？！？

3.  进一步探索注释，据我所知，它们不支持简单的继承要求。

4.  转储 Hibernate 并使用另一个 ORM 解决方案。

请不要链接到文档 - 在阅读了几次之后我放弃了那个文档！
一个属性导入的例子（从外部文件）会很棒。

感谢上帝保佑！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:08:56.733

首先，您需要决定您的继承关系是否应该映射到数据库（以允许多态查询，例如`from EntityBase`，多态关系等）。

据我了解，在您的情况下，它不应该被映射，因此使用继承映射选项根本没有意义`<union-subclass>`。现在您有以下选择：

2\. Hibernate 没有特别支持重用 XML 映射，但它的文档建议在这种情况下使用 XML 实体，例如，参见[10.1.6。使用隐式多态性的每个具体类的表](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/inheritance.html)。

[`@MappedSuperclass`3.注解当然以注解](http://docs.oracle.com/javaee/6/api/javax/persistence/MappedSuperclass.html)的形式支持这个要求。这个注解可以用来标记一个没有映射到数据库本身的类，但是在它的属性上定义的任何映射注解都会对其映射的子类生效，所以你不需要重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-31T18:48:51.270

您还可以使用 XML 实体参考，请参阅：

[https://n1njahacks.wordpress.com/2014/09/19/hibernate-xml-mapping-fragment-re-use/](https://n1njahacks.wordpress.com/2014/09/19/hibernate-xml-mapping-fragment-re-use/) [http://xml.silmaril.ie/includes.html](http://xml.silmaril.ie/includes.html)

# jquery - jQuery TinySort 混合文字和数字不起作用

> ID：11280861
> 
> 赞同：0
> 
> 时间：2012-07-01T09:19:44.480
> 
> 标签：jquery, sorting

尝试按收藏夹对 MetaFilter 上的评论进行排序。通过使用 TinySort 并在收藏夹链接中获取 title 属性来执行此操作：

```
$('div.comments').tsort('span.smallcopy>span>span>a',{attr:'title',order:'desc'}); 
```

但是混合文字和数字无法正常工作，因为我得到了这个（5、58、4、3、39、32、2 ...）例如：http: [//i.imgur.com/7N1Ln.jpg](http://i.imgur.com/7N1Ln.jpg)

而不是 (58, 39, 32, 5, 4, 3, 2...)

我正在使用最新的 TinySort 版本 1.3.27

我什至尝试从 title 属性中删除空格，但没有运气：

```
$('span.smallcopy>span>span>a').attr('title', function() {
    return this.title.replace(/\s/g, ''); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T21:31:18.857

嗯......听起来像一个错误我明天下午会看看并更新源代码，如果它确实是一个错误。

-编辑-

@title 是一个字符串，因为它表示类似“4 个人将此标记为收藏”之类的内容。那么这种排序在技术上是正确的。

如果它只是一个数字，那么 tinysort 就会对其进行解析并进行不同的排序。

所以这里的解决方案可能是首先使用 jQuery 使用该标题设置一个额外的属性，然后对其进行排序。比如这样：

```
$('span.smallcopy').find('a:last').each(function(i,el){
    var el=$(this);
    el.attr('data-favorites',parseInt(el.attr('title')));
}); 
```

然后进行排序。还没有尝试过，但也许你应该看看这个[http://tinysort.sjeiti.com/#returnonlysorted](http://tinysort.sjeiti.com/#returnonlysorted)因为源看起来相当混乱（在 div 之后的 br :-/ ）

# iphone - 使用一个 ViewController 处理多个场景

> ID：11280863
> 
> 赞同：2
> 
> 时间：2012-07-01T09:20:28.797
> 
> 标签：iphone, ios, uiviewcontroller, storyboard, uistoryboard

我想为多个场景使用相同的 ViewController。现在我想根据使用的场景实现稍微不同的行为。我想这可以使用标识符。喜欢（伪代码）

```
if (self.identifier == scene1)
{
    // do this
}
else if (self.identifier == scene2)
{
    // do that
} 
```

如何从 ViewController 调用标识符？

编辑：

我的意思是来自 Inpector 的这个标识符 - 我如何在代码中调用它？

![在此处输入图像描述](../Images/a2c9ec905a5d884e81f409e1b8c9a284.png)

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T19:26:10.180

我修好了它。一种可能的方法是命名 Segway 标识符，然后在 prepareForSegue 方法中检查相等的字符串。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"HelpSegue"])
    {
        // do this
    }
    else
    {
        // do that
    } 
```

}

![在此处输入图像描述](../Images/deaa7de27c3267ba59e9b701770cd074.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T09:31:54.010

我认为这里正确的设计是使用枚举值，例如：

```
typedef enum{
    kViewControllerStyle1,
    kViewControllerStyle2,
    kViewControllerStyle3
} ViewControllerStyle; 
```

通过界面构建​​器插座连接所有需要适应此样式的视图元素，并在您的“viewDidLoad”方法中添加一个开关盒以进行正确的调整，依赖于当前的视图控制器样式（还添加一个“ViewControllerStyle”属性到您的视图控制器类）。

# php - 有什么方法可以检查用户是否已经订阅了我的 youtube 频道？

> ID：11280866
> 
> 赞同：1
> 
> 时间：2012-07-01T09:21:14.550
> 
> 标签：php, jquery, ajax, youtube, youtube-api

我正在编写一个脚本，我需要检查用户是否已经订阅了我的 youtube 频道，是否有任何 API 调用或任何脚本来检查用户是否已经订阅？任何类型的帮助/提示将不胜感激:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T09:39:31.260

是的，youtube Api 可以帮助你，点击这个链接： [https ://developers.google.com/youtube/2.0/developers_guide_protocol#Saving_and_collecting_videos](https://developers.google.com/youtube/2.0/developers_guide_protocol#Saving_and_collecting_videos)

但我不确定它是否需要用户授权。

抱歉，链接错误，请按照以下说明操作： [https ://developers.google.com/youtube/2.0/developers_guide_protocol#Retrieving_subscriptions](https://developers.google.com/youtube/2.0/developers_guide_protocol#Retrieving_subscriptions)

api就像

```
https://gdata.youtube.com/feeds/api/users/userId/subscriptions?v=2 
```

您可以获得用户的订阅，然后您可以检查您的频道是否在其中。此请求不需要身份验证。

# algorithm - 用于训练神经网络的反向传播

> ID：11280873
> 
> 赞同：2
> 
> 时间：2012-07-01T09:22:14.957
> 
> 标签：algorithm, neural-network

我想用[这篇文章](http://www.google.ru/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CE4QFjAA&url=http://www.zju.edu.cn/jzus/downloadpdf.php?doi=10.1631/jzus.A0820154&ei=XBDwT4XQB82UsgampMiMDw&usg=AFQjCNHg4RBVqTv_TeDg6ahkvZDYfUs4Gw&sig2=X2Y15mNx7ZWV1qRblXXzoQ)来构建神经网络，但是在权重向量的更新算法上遇到了一些问题。具体来说，用[红色标记](http://saveimg.ru/show-image.php?id=19b9f3007a8e61f903b6a595917474fe)的公式。谁能帮我理解，什么是 hm(i) 和符号“|” 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T04:09:11.483

这看起来像是神经网络训练误差梯度的[反向传播](http://en.wikipedia.org/wiki/Back-propagation)计算。 [Bishop](http://research.microsoft.com/en-us/um/people/cmbishop/prml/)（第 244 页）列出了一个关键公式：

```
δj = h'(aj) SUM(k, wkj δk) 
```

`δ`是隐藏或输出节点的预测值和标记值之间的误差。`δ`右侧的项已经计算过了，并且对应于正在考虑的下一层输出方向。

该`h'`术语是非线性[激活函数](http://en.wikipedia.org/wiki/Activation_function)的导数，通常是[sigmoid 函数](http://en.wikipedia.org/wiki/Sigmoid_function)或`tanh`。您的图像中列出`hm`的看起来像是`tanh`变量变化的导数。

竖线是评估的语法：`f(t) = f(x) | t`. 我不太清楚你图片中的表情是什么；我可能是错的。

# logic - 如何确定是否需要右转或右转

> ID：11280876
> 
> 赞同：1
> 
> 时间：2012-07-01T09:22:33.347
> 
> 标签：logic, avl-tree

我正在尝试实现 AVL 树，但我很难知道何时需要 RR 或 RL 轮换（LL 和 LR 相同）。

每个的先决条件是什么，它们有何不同。我知道当我看到树的图片时（直观地），但实际情况是什么？

这是一个逻辑问题，不需要代码，谢谢。

**我所知道**的是它涉及到左重或右重的树。但是你怎么确定呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T09:50:55.180

可能有不同的解决方案，但一个如下：

递归添加项目时，在每次递归调用时，您应该跟踪该调用是将节点添加到左子树还是右子树（例如，通过让 add 函数返回它）。在递归调用之后，您检查高度不变量。如果在插入后发现在该节点处违反了它，那么您将知道不平衡的路径。

一些（不完整的）伪代码：

```
add(item, node):
  if item < node.value //should add to left subtree
    if node.left is empty
      //add item here
    else
      addedLeft := add(item, node.left)
      if node.left.height - node.right.height > 1
        if addedLeft
          //you know the path to the subtree causing the imbalance is LL, do a RR (single-right) rotation
        else
          //path is LR, do a LR (double-right) rotation
  ... 
```

递归调用将从添加的节点自下而上展开，一般的想法是检查不变量在哪个节点被违反（如果有的话）。当发现该节点时，您需要知道导致不平衡的子树的路径。必须以某种方式解决该问题，这是一种解决方案。

# ios - 尽管停止使用它们仍然得到动画

> ID：11280881
> 
> 赞同：2
> 
> 时间：2012-07-01T09:23:09.660
> 
> 标签：ios, xcode, animation

使用以下方法完成一些核心动画后：

```
 [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.5];

    [self setAffineTransform:CGAffineTransformIdentity];

    [UIView commitAnimations]; 
```

我注意到，如果我只是简单地改变一个属性，它仍然会使用动画而不是简单地改变属性。例如`setAffineTransform`......这是iOS动画固有的东西吗？我的代码中是否遗漏了某些东西或某些东西一定是错的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T11:59:56.523

`setAffineTransform:`是 CALayer 上的一种方法，而不是 UIView，就像你提到的不透明度一样。对这些属性的更改是隐式动画的，也就是说，设置它们会导致图层动画到新值，而不是立即切换。

隐式动画属性列表在[这里](http://developer.apple.com/library/ios/DOCUMENTATION/Cocoa/Conceptual/CoreAnimation_guide/Articles/AnimProps.html#//apple_ref/doc/uid/TP40005942-SW1)。要禁用隐式动画，请将更新包装在 CATransaction 中，并禁用隐式动画，如此处[所述](http://developer.apple.com/library/ios/DOCUMENTATION/Cocoa/Conceptual/CoreAnimation_guide/Articles/Transactions.html#//apple_ref/doc/uid/TP40006096-SW1)。

# asp.net-mvc-3 - Asp.net MVC3 报表系统

> ID：11280883
> 
> 赞同：0
> 
> 时间：2012-07-01T09:23:52.737
> 
> 标签：asp.net-mvc-3, reporting

我正在为报告构建一个新的 asp.net MVC3 Web 应用程序，我想知道创建报告的最佳方法。

我尝试使用 Crystal 报表，但它在实现和样式方面存在一些问题，所以是否有免费或定制的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:54:05.037

在 google 中进行大量搜索后，我找到了一个满足我需求的好解决方案，它是一个免费的开源工具[，这里](http://doddlereport.codeplex.com/)称为 doddleReports，它创建 pdf、excel、csv 逗号分隔、HTML 报告

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T09:34:19.513

我在一个轻量级 ASP.NET 应用程序中使用[worddocgenerator.codeplex.com](http://worddocgenerator.codeplex.com/)作为报告工具。它允许您用很少的代码生成数据绑定内容。

![在此处输入图像描述](../Images/b70616994b849c3560badb2846306e6e.png)

要预览报告，您可以使用[Open Xml Viewer](http://openxmlviewer.codeplex.com/)

# java - 如何将 Joda DateTime 对象与可接受的偏移量（公差）进行比较？

> ID：11280890
> 
> 赞同：6
> 
> 时间：2012-07-01T09:24:40.503
> 
> 标签：java, date, jodatime

我想知道是否有任何标准 API`JodaTime`来比较`DateTime`具有指定容差的 2 个对象？我正在寻找一种最好使用`Joda`标准 API 的单线。不适用于[这篇文章](https://stackoverflow.com/questions/4809939/how-can-i-test-that-two-joda-time-datetime-objects-are-nearly-equal)中的时间算术表达式。

理想情况下，它会是这样的：

```
boolean areNearlyEqual = SomeJodaAPIClass.equal(dt1, dt2, maxTolerance); 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-01T12:27:05.273

用这个：

```
new Duration(dt1, dt2).isShorterThan(Duration.millis(maxTolerance)) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-11T16:40:29.843

这篇文章很旧，但我发现接受的解决方案中的行有点长，我发现现有的东西没有更好的。所以我做了一个为 Date 和 DateTime 包装它的小类：

```
public class DateTimeUtils
{
    public static boolean dateIsCloseToNow(Date dateToCheck,
                                           Duration tolerance)
    {
        return dateIsCloseToNow(new DateTime(dateToCheck), tolerance);
    } 

    public static boolean dateIsCloseToNow(DateTime dateToCheck,
                                           Duration tolerance)
    {
        return datesAreClose(dateToCheck, DateTime.now(), tolerance);
    }

    public static boolean datesAreClose(Date date1,
                                        Date date2,
                                         Duration tolerance)
    {
        return datesAreClose(new DateTime(date1), new DateTime(date2), tolerance);
    }

    public static boolean datesAreClose(DateTime date1,
                                         DateTime date2,
                                         Duration tolerance)
    {
        if (date1.isBefore(date2)) {
            return new Duration(date1, date2).isShorterThan(tolerance);
        }
        return new Duration(date2, date1).isShorterThan(tolerance);
    } 
```

所以这一行：

```
new Duration(date.getTime(), System.currentTimeMillis()).isShorterThan(Duration.standardSeconds(5) 
```

变成：

```
DateUtils.dateIsCloseToNow(date, Duration.standardSeconds(5)) 
```

我发现这在需要验证创建日期的单元测试用例中非常有用。

# php - Windows 上的 Memcache PHP 扩展

> ID：11280891
> 
> 赞同：4
> 
> 时间：2012-07-01T09:24:49.347
> 
> 标签：php, iis, memcached

我找到了很多教程，涵盖了如何在 Windows 中安装 memcache 和安装 PHP 扩展。我的情况虽然有点不寻常：

我使用的是 iis，而不是 apache。我不需要在服务器上安装 memcache（它已经设置了自己的专用服务器）。我只需要安装扩展。

我以为我只需要将 PHP_memcache.dll 扩展添加到 PHP 扩展文件夹并将其添加到 PHP.ini

这会导致加载 PHP 模块时出错（无法加载动态库）。

这个错误可能是因为服务器上没有安装memcache，我该怎么做才能解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T23:55:51.023

在 Windows 中加载扩展时出现的错误不如在 Linux 中那么有用，因此您需要像 dependency walker 这样的工具来找出问题所在。

[http://www.dependencywalker.com/](http://www.dependencywalker.com/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-11T13:22:59.007

如果您在 Windows 上使用 XAMPP，您可能已经安装了 32 位 XAMPP 版本。因此，请确保您使用的是 Memcache 的 32 位 (x86) DLL。

windows 的 DLL 下载列表可以在这里找到：http: [//pecl.php.net/package/memcache/3.0.8/windows](http://pecl.php.net/package/memcache/3.0.8/windows)

# java - GAE/Java：如何从给定的 URL 加载图像并获取图像的宽度和高度

> ID：11280894
> 
> 赞同：2
> 
> 时间：2012-07-01T09:25:32.317
> 
> 标签：java, image, google-app-engine

我正在使用 GAE[JAVA] 进行一些图像处理。GAE不允许将文件写入磁盘，所以我希望我的App允许输入一个URL，然后我想检查这个指定的URL是否代表图像，如果是，我想获取它的高度和宽度。

有没有人提供一些解决方案来告诉我如何实现这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T10:27:22.290

您可以使用 GAE Image API。解决您的问题的简单示例是：

```
 final ByteArrayOutputStream baos = new ByteArrayOutputStream();
    try {
        final InputStream inputStream = url.openStream();
        int read;
        while ((read = inputStream.read()) != -1) {
            baos.write(read);
        }

        final Image image = ImagesServiceFactory.makeImage(baos.toByteArray());

        resp.getWriter().println("image width: " + image.getWidth());
        resp.getWriter().println("image height: " + image.getHeight());
    } catch (final IOException e) {
        resp.getWriter().println("image doesn't exists!");
    } catch (final IllegalArgumentException e) {
        resp.getWriter().println("invalid image!");
    } 
```

* * *

完成 Servlet 以执行此操作：

```
package foo.bar;

import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.URL;

import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.google.appengine.api.images.Image;
import com.google.appengine.api.images.ImagesServiceFactory;

@SuppressWarnings("serial")
public class MyFirstWebAppServlet extends HttpServlet {
    @Override
    public void doGet(final HttpServletRequest req, final HttpServletResponse resp) throws IOException {
        URL url;
        if ("exists".equals(req.getParameter("image"))) {
            url = new URL("https://www.google.com/logos/classicplus.png");
        } else if ("notImage".equals(req.getParameter("image"))) {
            url = new URL("http://www.google.com");
        } else {
            url = new URL("http://foo.bar/image.png");
        }

        resp.setContentType("text/plain");
        final ByteArrayOutputStream baos = new ByteArrayOutputStream();
        try {
            final InputStream inputStream = url.openStream();
            int read;
            while ((read = inputStream.read()) != -1) {
                baos.write(read);
            }

            final Image image = ImagesServiceFactory.makeImage(baos.toByteArray());

            resp.getWriter().println("image width: " + image.getWidth());
            resp.getWriter().println("image height: " + image.getHeight());
        } catch (final IOException e) {
            resp.getWriter().println("image doesn't exists!");
        } catch (final IllegalArgumentException e) {
            resp.getWriter().println("invalid image!");
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-01T09:55:30.857

也许这种方式很奇怪，但我认为你可以使用 javascript

```
var img=new Image();
img.src="http://www.google.com.hk/images/nav_logo107.png";
img.height;
img.width; 
```

![在此处输入图像描述](../Images/5d1e6417bc9905b48e0d115487cda580.png)

如果图像没有退出，则会抛出 404（未找到）问题。

# java - 内部类中布尔标志的最终数组而不是非最终变量的模式

> ID：11280902
> 
> 赞同：1
> 
> 时间：2012-07-01T09:26:49.087
> 
> 标签：java, design-patterns

当我需要在内部类中设置布尔标志时，我的 Java 代码中经常会遇到这种情况。不可能为此使用原始布尔类型，因为内部类只能使用外部的最终变量，所以我使用这样的模式：

```
// class from gnu.trove is not of big importance, just to have an example
private final TIntIntHashMap team = new TIntIntHashMap();
// ....... code ............
final boolean[] flag = new boolean[]{false};
team.forEachValue(new TIntProcedure() {
    @Override
    public boolean execute(int score) {
        if(score >= VICTORY_SCORE) {
            flag[0] = true;
        } 
        return true; // to continue iteration over hash map values
    }
});
//  ....... code .............. 
```

最终数组而不是非最终变量的模式效果很好，除了它对我来说看起来不够漂亮。有人知道更好的 Java 模式吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T10:20:39.443

使用**[AtomicBoolean](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicBoolean.html)**。

这是关于这个问题的一个流行的 StackOverflow 问题：[为什么在匿名类中只能访问最终变量？](https://stackoverflow.com/questions/4732544/why-are-only-final-variables-accessible-in-anonymous-class)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-01T09:40:48.670

拥有一个包含任何类型对象的通用持有者类怎么样。在您的情况下，它可以包含一个 `Boolean`类型。就像是：

```
class Holder<T> {        
    private T genericObj;

    public Holder(T genericObj) {
        this.genericObj = genericObj;
    }

    public T getGenericObj() {
        return genericObj;
    }

    public void setGenericObj(T genericObj) {
        this.genericObj = genericObj;
    }    
} 
```

并将其用作：

```
public class Test {
    public static void main(String[] args) throws Exception {        
        final Holder<Boolean> boolHolder = new Holder<Boolean>(Boolean.TRUE);
        new Runnable() {            
            @Override
            public void run() {
                boolHolder.setGenericObj(Boolean.FALSE);
            }
        };
    }
} 
```

当然，这具有跨线程共享的可变对象的常见问题，但您明白了。另外，对于内存要求很紧的应用程序，在进行优化时可能会被划掉，以防您有很多此类方法的调用。此外，使用`AtomicReference`交换/设置引用应该注意从多个线程中使用，尽管跨线程使用它仍然有点问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-01T09:31:57.593

在某些情况下，这是最好的模式。

我可以建议的唯一改进是`return false`当您找到匹配项时。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-01T10:00:13.950

一个问题是 TIntIntHashMap 没有[折叠/减少](http://en.wikipedia.org/wiki/Fold_%28higher-order_function%29)方法，因此您必须使用 foreach 来模拟它。您可以尝试编写自己的类来扩展 TIntIntHashMap 添加一个 reduce 方法。

其他解决方案是仅扩展 TIntProcedure 以具有值。就像是：

```
abstract class TIntProcedureWithValue<T> implements TIntProcedure {
    private T accumulator;
    public T getValue() {return accumulator;}
} 
```

然后你可以将这个类的一个实例传递给foreach，设置内部累加器而不是外部标志数组，然后得到结果值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-01T12:38:43.680

我对 gnu.trove 不熟悉，但通常最好让“algortihm”函数更具体，在这里留下更少的代码。

```
private final IntIntHashMap team = new IntIntHashMap();

boolean found = team.value().containsMatch(new IntPredicate() {
    public boolean is(int score) {
        return score >= VICTORY_SCORE;
    }
}); 
```

（Java SE 8 中应该提供更简洁的语法。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-01T10:01:31.130

也许是这样的？（实现或扩展......不幸的是，我不知道什么是 TIntProcedure）：

```
 class FlagResult implements TIntProcedure {
        boolean flag = false;
        @Override
        public boolean execute(int score) {
            flag = score >= VICTORY_SCORE;
            return !flag;
        }
    };
    FlagResult result = new FlagResult();
    team.forEachValue(result);
    boolean flag = result.flag; 
```

# asp.net - 表单发布后如何绑定月份下拉值？

> ID：11280904
> 
> 赞同：0
> 
> 时间：2012-07-01T09:27:01.653
> 
> 标签：asp.net, asp.net-mvc-3

这就是我们实现年和月级联下拉的方式。选择年/月后，表格被提交。当提交后查看返回时，选定的年份值是持久的（因为我们在模型中对此进行了处理），但选定的月份值不是持久的。需要做什么来保持价值？

**模型**

```
public class MyViewModel
{
    public int? Year { get; set; }
    public int? Month { get; set; }

    public IEnumerable<SelectListItem> Years
    {
        get
        {
            return Enumerable.Range(2000, 12).Select(x => new SelectListItem
            {
                Value = x.ToString(),
                Text = x.ToString()
            });
        }
    }
} 
```

**控制器**

HttpGet 和 HttpPost 动作，

```
//
    // GET: /MenuSix/

    public ActionResult Index()
    {
        var model = new MyViewModel();
        return View(model);
    }

    public ActionResult Months(int year)
    {
        if (year == 2011)
        {
            return Json(
                Enumerable.Range(1, 3).Select(x => new { value = x, text = x }),
                JsonRequestBehavior.AllowGet
            );
        }
        return Json(
            Enumerable.Range(1, 12).Select(x => new { value = x, text = x }),
            JsonRequestBehavior.AllowGet
        );
    }

    //
    // POST: /MenuSix/
    [HttpPost]
    public ActionResult Index(MyViewModel myViewModel)
    {
        var month = myViewModel.Month; //11
        var year = myViewModel.Year;   //2011
        return View(myViewModel);
    } 
```

**看法**

这里需要改变什么来保持月份值“Enumerable.Empty()”？

```
@model DemoWeb.Models.MenuSix.MyViewModel
@using (Html.BeginForm())
{
@Html.DropDownListFor(x => x.Year, new SelectList(Model.Years, "Value", "Text"), "-- select year --")
@Html.DropDownListFor(x => x.Month, Enumerable.Empty<SelectListItem>(), "-- select month --")

<div align="center">
    <input type="submit" id="valSubmit" value="Save"/>
</div>
}

@section PageScriptsAndCSS{
<script type="text/javascript">
    $(document).ready(function () {
        $('#Year').change(function () {
            debugger;
            var selectedYear = $(this).val();
            if (selectedYear != null && selectedYear != '') {
                $.getJSON('@Url.Action("Months")', { year: selectedYear }, function (months) {
                    var monthsSelect = $('#Month');
                    monthsSelect.empty();
                    $.each(months, function (index, month) {
                        monthsSelect.append($('<option/>', {
                            value: month.value,
                            text: month.text
                        }));
                    });
                });
            }
        });
    });
</script> 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T06:56:31.463

是的，您需要更改绑定月份下拉列表的方式。因为，您将它与一个空列表绑定在表单提交后您将不会获得选定的月份值。我以我的方式更改了您的代码。让我知道它是否适合您的需要。

**模型**

```
public class MyViewModel
{
    public int? Year { get; set; }
    public int? Month { get; set; }

    public static IEnumerable<int> GetMonthsRangeOf(int year) { 
        return (year ==2011) ? Enumerable.Range(1, 3) : Enumerable.Range(1, 12);
    }

    public IEnumerable<SelectListItem> Years { get {
        return Enumerable.Range(2000, 12).Select(x => new SelectListItem
        {
            Value = x.ToString(),
            Text = x.ToString()
        });

    } }

    public IEnumerable<SelectListItem> Months
    {
        get
        {
            IEnumerable<SelectListItem> months = null;
            if (! this.Year.HasValue)
            {
                months = Enumerable.Empty<SelectListItem>();
            }
            else
            {
                months = GetMonthsRangeOf(this.Year.Value).Select(x => new SelectListItem
                {
                    Value = x.ToString(),
                    Text = x.ToString()
                });
            }

            return months;
        }
    }
} 
```

**控制器**

```
public ActionResult Months(int year)
    {
            return Json(
                MyViewModel.GetMonthsRangeOf(year).Select(x => new { value = x, text = x }),
                JsonRequestBehavior.AllowGet
            );
    }

    //
    // POST: /MenuSix/
    [HttpPost]
    public ActionResult About(MyViewModel myViewModel)
    {
        var month = myViewModel.Month; //11
        var year = myViewModel.Year;   //2011
        return View(myViewModel);
    } 
```

**看法**

```
 @model TestFreezeMVC.ViewModel.MyViewModel
@using (Html.BeginForm())
{

@Html.DropDownListFor(x => x.Year, new SelectList(Model.Years, "Value", "Text"), "-- select year --")

@Html.DropDownListFor(x => x.Month, new SelectList(Model.Months, "Value", "Text"), "-- select month --");

<div align="center">
    <input type="submit" id="valSubmit" value="Save"/>
</div>
}

<script type="text/javascript">
    $(document).ready(function () {
        $('#Year').change(function () {
            var selectedYear = $(this).val();
            if (selectedYear != null && selectedYear != '') {
                $.getJSON('@Url.Action("Months")', { year: selectedYear }, function (months) {
                    var monthsSelect = $('#Month');
                    monthsSelect.empty();
                    $.each(months, function (index, month) {
                        monthsSelect.append($('<option/>', {
                            value: month.value,
                            text: month.text
                        }));
                    });
                });
            }
        });
    });

</script> 
```

建议我是否做错了什么..

# php - 如果我订购两种产品，它只会在我的数据库中保存一种产品

> ID：11280907
> 
> 赞同：0
> 
> 时间：2012-07-01T09:27:16.460
> 
> 标签：php, mysql, database

当我点击结帐时，它会向我发送一封包含我的订单的电子邮件，并将我订购的产品发送到 mysql 数据库。但是只有一个（最后一个产品）产品被发送并保存在数据库中。我怎样才能解决这个问题？

```
//connect to database
$connection = mysql_connect("localhost","root","") or die ("Can't connect");
mysql_select_db("shoppingcart", $connection) or die ("Can't connect");

//get order id ONLY to get order id <<<<<<<
$vol = mysql_query("SELECT orderid FROM ordertracking WHERE email='$email'");
while($volume=mysql_fetch_array($vol))
{
 $orderid = $volume['orderid'];
} // end of getting order id from table ordertracking
    // add new order
    $order = "INSERT INTO `order` (orderid, customerid, productid, brand, model, price, amount, totalcost, image) VALUES ('$orderid', '$customerid', '$productid', '$brand' , '$model', '$price', '$amount', '$totalcost', '$image')";
    if (!mysql_query($order,$connection))
        {
            die('Error: ' . mysql_error());
            echo "Sorry, there was an error";
        }
        echo "New order added" . "<br />";

        mysql_close($connection); 
```

整个脚本：

```
<?php
error_reporting(-1);ini_set('display_errors', 'stdout');
var_dump($_GET);

//collect all information
$name = $_GET["name"];
$surname = $_GET["surname"];
$city = $_GET["city"];
$postalcode = $_GET["postalcode"];
$phonenumber = $_GET["phonenumber"];
$email = $_GET["email"];

$i = 1;
while (isset($_GET["Product_ID_".$i])) {
    $productid = $_GET["Product_ID_".$i];
    $brand = $_GET["Brand_".$i];
    $model = $_GET["Model_".$i];
    $price = $_GET["Price_".$i];
    $amount = $_GET["Amount_products_".$i];
    $totalcost = $_GET["Total_cost_".$i];
    $i++;
}

$image = "includes/images/mouse_4.jpg";

$date = date("F j, Y, g:i a");

//connect to database
$connection = mysql_connect("localhost","root","") or die ("Can't connect");
mysql_select_db("shoppingcart", $connection) or die ("Can't connect");  

//check if already customer
$result = mysql_query("SELECT * FROM customer WHERE email='$email'");
$rows = mysql_num_rows($result);

    if ($rows) 
    {
      echo '<br>Welcome back ' . $name .' '. $surname. '<br>';
    }
    else
    {
        //if new customer, add to database
        $customer = "INSERT INTO customer (customerid, name, surname, email, city, postalcode, phonenumber) VALUES ('', '$name', '$surname', '$email', '$city', '$postalcode', '$phonenumber')";
        if (!mysql_query($customer,$connection))
        {
            die('Error: ' . mysql_error());
            echo "Sorry, there was an error";
        }
        echo "New customer added" . "<br />";
        echo '<br>Welcome as our new customer ' . $name . ' '. $surname;

        mysql_close($connection);   
    }

//connect to database
$connection = mysql_connect("localhost","root","") or die ("Can't connect");
mysql_select_db("shoppingcart", $connection) or die ("Can't connect");

//get customer id
$res = mysql_query("SELECT customerid FROM customer WHERE email='$email'");
while($row=mysql_fetch_array($res))
{
 $customerid=$row['customerid'];
}
    //add new ordertracking
    $ordertracking = "INSERT INTO `ordertracking` (orderid, customerid, email, progress, date) VALUES ('', '$customerid', '$email', 'Pending', '$date')";
    if (!mysql_query($ordertracking,$connection))
        {
            die('Error: ' . mysql_error());
            echo "Sorry, there was an error";
        }
        echo "New order added" . "<br />";

        mysql_close($connection);

//connect to database
$connection = mysql_connect("localhost","root","") or die ("Can't connect");
mysql_select_db("shoppingcart", $connection) or die ("Can't connect");

//get order id
$vol = mysql_query("SELECT orderid FROM ordertracking WHERE email='$email'");
while($volume=mysql_fetch_array($vol))
{
 $orderid = $volume['orderid'];
}
    // add new order
    $order = "INSERT INTO `order` (orderid, customerid, productid, brand, model, price, amount, totalcost, image) VALUES ('$orderid', '$customerid', '$productid', '$brand' , '$model', '$price', '$amount', '$totalcost', '$image')";
    if (!mysql_query($order,$connection))
        {
            die('Error: ' . mysql_error());
            echo "Sorry, there was an error";
        }
        echo "New order added" . "<br />";

        mysql_close($connection);

$to = $email;
$subject = "Order information of: ";

$headers = "From: " . "postmaster@localhost" . "\r\n";
$headers .= "Reply-To: ". "postmaster@localhost" . "\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";

$message = '<html><body>';
$message .= '<h1>Dear ' . $name . ' ' . $surname .  ',</h1>' . '<br />';
$message .= 'Order date and time: ' . $date . '<br />';
$message .= 'Thank you for your order at our online shop!' . '<br />';
$message .= 'Your order information: ' . '<br /><br /><br />';
$i = 1;
while (isset($_GET["Product_ID_".$i])) {
    $productid = $_GET["Product_ID_".$i];
    $brand = $_GET["Brand_".$i];
    $model = $_GET["Model_".$i];
    $price = $_GET["Price_".$i];
    $amount = $_GET["Amount_products_".$i];
    $totalcost = $_GET["Total_cost_".$i];

    $message .= ' Product ID: ' . $productid . "<br />" .
                'Brand: '. $brand . "<br />" .
                'Model: ' . $model . "<br />" .
                'Price per item: ' . $price . "<br />" .
                'Amount of item: ' . $amount . "<br />" .
                'Total cost: ' . $totalcost . "<br />" .
                '_________________________________________________| ' . "<br />" .
    $i++;
}
$message .= 'To follow your odertracking please remember your order ID and customer ID' . '<br />';
$message .= 'Order ID: ' . $orderid . '<br />';
$message .= 'Customer ID: ' . $customerid . '<br />';
$message .= 'Link to track your order: ' . '<a href="http://localhost/school/shoppingcart/ordertracking.php">Ordertracking system</a>' . '<br />';

$message .= '</body></html>';

mail($to, $subject, $message, $headers);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T09:36:02.993

您只运行一次查询，因为您过早关闭 while 循环：

```
while($volume=mysql_fetch_array($vol))
{
 $orderid = $volume['orderid'];
} 
```

您应该在该行之后关闭它：

```
 echo "New order added" . "<br />"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T09:38:26.717

你在这里做的是：

*   从 orderTracking 表中获取所有订单 ID，其中 email 是给定的电子邮件。我假设提取了不止一行。

编码

```
while($volume=mysql_fetch_array($vol))
{
 $orderid = $volume['orderid'];
} 
```

效果很好，但是当您尝试将 orderid 的值插入 [order] 表时，只会更新一行，因为变量 $orderid 现在只包含一个字符串（查询的最后一行的 orderid）。

所以解决方案是在while循环中运行插入

像这样的东西

```
$vol = mysql_query("SELECT orderid FROM ordertracking WHERE email='$email'");
while($volume=mysql_fetch_array($vol))
{
 $orderid = $volume['orderid'];
// add new order
    $order = "INSERT INTO `order` (orderid, customerid, productid, brand, model, price, amount, totalcost, image) VALUES ('$orderid', '$customerid', '$productid', '$brand' , '$model', '$price', '$amount', '$totalcost', '$image')";
    if (!mysql_query($order,$connection))
        {
            die('Error: ' . mysql_error());
            echo "Sorry, there was an error";
        }
} 
```

希望你会有一个想法。

第二种解决方案可以是使用数组变量，而不是使用简单的变量 $orderid。然后遍历变量以获取orderid。

简而言之，根据您的代码，您需要一个循环来在数据库中插入多条记录。

# android - onKeyUp 在子视图中不起作用

> ID：11280908
> 
> 赞同：0
> 
> 时间：2012-07-01T09:27:22.403
> 
> 标签：android, onkeyup, android-2.3-gingerbread

我有这个视图层次结构：Activity -> ViewPager -> MyViewGroup

在 MyViewGroup （并且只有那里）我覆盖 onKeyUp 事件：

```
@Override
    public boolean onKeyUp(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            Log.i(TAG, "Back");
            return true;
        } else {
            return super.onKeyUp(keyCode, event);
        }
    } 
```

但是当我按“返回”键时，不会调用此覆盖并且应用程序已关闭。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T09:33:11.513

默认情况下，后退按钮完成活动。来自安卓源：

当活动检测到用户按下返回键时调用。默认实现只是完成当前活动，但您可以覆盖它来做任何您想做的事情。

```
public void onBackPressed() {
    if (!mFragments.popBackStackImmediate()) {
        finish();
    }
} 
```

如果您希望更改此行为，则必须在 Activity 中覆盖 onBackPressed 并使其不调用 super。然后你可以实现你自己的行为。

```
public @Override void onBackPressed()
{
    if (doSomeThingOnBackPressed) {
        // do some stuff
        return;
    }
    super.onBackPressed();
} 
```

# jquery - 快速移动开/关项目时的jQuery mouseenter mouseleave错误

> ID：11280909
> 
> 赞同：-1
> 
> 时间：2012-07-01T09:27:22.673
> 
> 标签：jquery, image, animation, resize

我有非常简单的 jquery 代码：

```
 $(document).ready(function(){
        $('img.marqFl').on({
            mouseenter: function() {
                $(this).animate({height: 300}, 600);
            },
            mouseleave: function() {
                $(this).animate({height: 150}, 600);
            }
        }); 

    }); 
```

但它没有做我想要的..

我有 10 个具有相同类别的图像 - marqFl。他们都有150高。当用户将鼠标移到某个图像上时，它应该开始将高度增加到 300。

但是，如果他们将鼠标从图像中移出，它应该停止并开始减少回 150。如果他们将鼠标移回图像，它应该停止减少并再次开始增加。对于这两种情况，旧动画必须被打破。用户不应等待上一个动画结束来开始新的动画。

如果他们将鼠标移动到其他图像，第一个 1 必须直接（无动画）到 150，并且新图像应该开始增加。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T09:30:07.833

使用[停止](http://api.jquery.com/stop/)功能：

```
$(this).stop().animate({height: 300}, 600); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T09:30:11.843

只需添加`stop()`：

```
 $(document).ready(function(){
        $('img.marqFl').on({
            mouseenter: function() {
                $(this).stop().animate({height: 300}, 600);
            },
            mouseleave: function() {
                $(this).stop().animate({height: 150}, 600);
            }
        }); 

    }); 
```

# wordpress - wordpress 插件直接将文件上传到亚马逊 s3

> ID：11280922
> 
> 赞同：3
> 
> 时间：2012-07-01T09:30:18.610
> 
> 标签：wordpress

你好我正在尝试这样做

1.  我需要集成一个 wordpress 插件，以便当用户将任何视频上传到我的 wordpress 网站时，它会直接上传到 amazon s3，当我需要使用该视频时，它会给我 URL 或自动重定向到亚马逊以加载视频
2.  当用户输入一个 url 然后文件上传到本地服务器然后立即上传到 s3 并且文件从我的服务器中删除，这是因为 amazons3 不允许直接上传远程文件

好吧，这一切有什么插件吗？我找到了一些，但他们允许这种形式有自己的接口，但我需要做的是，当文件上传时，它直接转到 s3，不需要其他操作来执行此操作

如果没有插件，那么请任何有关如何执行此操作的教程都会有所帮助

它应该与我的 wordpress 主题完全集成

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-30T16:30:05.043

这里有这个插件：http: [//codecanyon.net/item/wordpress-aws-s3-browser/6470423](http://codecanyon.net/item/wordpress-aws-s3-browser/6470423) chekcout 现场演示，我认为它可以满足您的需求：

演示：[http ://www.awss3.redwanhilali.net/?page_id=5#](http://www.awss3.redwanhilali.net/?page_id=5#)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T09:33:44.177

这个插件将为任何上传完成[http://wordpress.org/extend/plugins/tantan-s3/的工作。](http://wordpress.org/extend/plugins/tantan-s3/)

如果要将主题文件上传到 s3，则需要手动执行。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-01T13:15:39.710

这个插件可以完美地为您完成工作。 [http://wordpress.org/extend/plugins/download-monitor/](http://wordpress.org/extend/plugins/download-monitor/)

# string - KMP算法中使用的Failure函数是如何工作的？

> ID：11280924
> 
> 赞同：5
> 
> 时间：2012-07-01T09:31:02.063
> 
> 标签：string, algorithm, knuth-morris-pratt

我已经尽力阅读了大部分关于这方面的文献，但仍然不了解 KMP 算法中使用的故障函数是如何构造的。我主要指的是大多数人认为优秀的[ht​​tp://community.topcoder.com/tc ?module=Static&d1=tutorials&d2=stringSearching 教程。](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=stringSearching)但是，我仍然没有理解它。如果您能不厌其烦地给我一个更简单易懂的解释，我将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-01T13:14:48.220

失败函数实际上告诉我们：如果匹配字符串的 X 个字符，那么该字符串的最长后缀是什么，它也是搜索字符串的前缀。

您在问它是如何构建的，该方法非常简单。

如果在字符串的末尾添加一个新字符，即您正在构建 f[x]，并且如果它与位置 f[x-1] 的字符匹配，则 f[x] 就是 f[x-1 ]+1。

在其他不匹配的情况下，您尝试找到越来越小的后缀并检查它们是否匹配。

例如，您有一个`"accadaccac"`要为其构建故障函数的单词，并且您刚刚添加了字母`'c'`。假设您正在为最后一个字母 the letter 构建一个失败函数`'c'`。

*   首先查看前一个字母的失败函数，它的失败函数是4，因为你可以匹配suffix`"acca"`和prefix `"acca"`，现在你添加字母`'c'`，它不匹配`'d'`后面的字母prefix `"acca"`。
*   所以你回溯，到最后一个好的后缀。您现在正在搜索的后缀`"acca"`也是 的前缀`"accadaccac"`，但小于“acca”。该问题的答案是 f[length("acca")-1]，或 f[3]，即 f[3] = 1，因为长度为 1 的后缀（只是字母`'a'`）也是搜索的前缀细绳。
*   现在您可以尝试是否`'c'`与位置 1 上的字符匹配，瞧，它匹配，所以现在您知道 f[9] = f[f[8]-1]+1 = 2。

我希望这能帮到您。祝你好运！:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-03T09:59:37.050

[http://www.oneous.com/Tutorial-Content.php?id=24](http://www.oneous.com/Tutorial-Content.php?id=24)

U can use the learning resources in this website for understanding the KMP Algorithm and the failure function. Also try to take the code and do some runs on it for an example string by hand. However, the best way to understand its working would be to code it yourself on some variations of the basic algorithm. I suggest u start with NHAY and PERIOD on SPOJ.

# c++ - 在成员函数中使用 sizeof()

> ID：11280929
> 
> 赞同：0
> 
> 时间：2012-07-01T09:33:06.550
> 
> 标签：c++, c, arrays, sizeof

> **可能重复：**
> [如何找到作为参数传递的 sizeof（指向数组的指针）](https://stackoverflow.com/questions/492384/how-to-find-the-sizeofa-pointer-pointing-to-an-array)
> [Sizeof 数组](https://stackoverflow.com/questions/1328223/sizeof-array-passed-as-parameter)

我有这个代码：

```
class total {

public:
    void display(int []);
};

void total::display(int *arr)
{
    int len = sizeof(arr)/sizeof(int);
    cout << len;
}

int main(void)
{
    int arr[] = { 10, 0, 0, 4, 20 };
    total A;
    A.display(arr);
    return 0;
} 
```

输出是**1**，而我期望它是数组的长度，**5** 但是，如果我使用其中的`sizeof()`语句`main()`显示 5。那么，为什么 sizeof() 没有在成员函数内显示正确的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T09:34:36.753

`sizeof`数组操作数产生数组的大小，而`sizeof`指针操作数产生指针的大小。指针和数组在 C/C++ 中是不一样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T09:37:57.950

sizeof 运算符返回操作数的大小。在您的情况下`sizeof(arr)`，操作数的类型是`int*`. 因此，结果是 4 或 8（取决于平台，也可以是 2 或 1）。在函数内部没有办法知道传递数组的长度。即使你写

```
void total::display(int arr[5])
{
} 
```

这不会改变任何东西，因为数组在用作方法的参数时会转换为指针。您仍然可以传递任何大小的数组。

# php - 如果我们将许多文件包含在一个文件中，如何处理连接变量

> ID：11280930
> 
> 赞同：1
> 
> 时间：2012-07-01T09:33:06.953
> 
> 标签：php, mysql

我制作了一个页面，从不同的文件中获取页眉、页脚等。每个子文件都需要使用一些 php.ini 文件。目前我正在做的是我正在使用

```
mysql_connect(servername,username,password); 
```

在每个子文件中。是否有任何更短的格式可以做到这一点，以便我只能在主文件中连接，而子文件会自动连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T09:34:34.847

你为什么不把那个代码放在`header`文件的顶部......

否则，您可以查看自动附加和前置： [http ://www.electrictoolbox.com/php-automatically-append-prepend/](http://www.electrictoolbox.com/php-automatically-append-prepend/)

我从未尝试过使用它，对我来说似乎有点狡猾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T09:37:52.623

由于您包含文件，并且包含只是将文件的代码插入到`include`语句所在的任何位置，因此您可以在主文件的顶部进行连接，并且所有其他文件都应该能够正常使用它。

# c# - 自签名证书是否足够安全？

> ID：11280933
> 
> 赞同：3
> 
> 时间：2012-07-01T09:33:27.773
> 
> 标签：c#, .net, wcf, digital-certificate

我有一个需要通过 https 保护的 WCF 服务。WCF服务服务器站点和使用WCF服务的客户端都是自行开发的。

我生成了一个自签名证书，并在以下操作指南文章的帮助下在我的服务中使用它：http: [//msdn.microsoft.com/en-us/library/ff647171.aspx](http://msdn.microsoft.com/en-us/library/ff647171.aspx)。

我的服务的绑定和行为配置如下：

```
<behaviors>
  <serviceBehaviors>
    <behavior name="SecureServiceBehavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false" />
      <serviceCredentials>
        <serviceCertificate findValue="CN={my server's ip address}" />
        <userNameAuthentication userNamePasswordValidationMode="MembershipProvider"
          membershipProviderName="SqlMembershipProvider" />
      </serviceCredentials>
      <serviceAuthorization principalPermissionMode="UseAspNetRoles"
        roleProviderName="SqlRoleProvider" />
        <serviceThrottling maxConcurrentCalls="128"
                           maxConcurrentSessions="128"
                           maxConcurrentInstances="128" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<bindings>
  <wsHttpBinding>
    <binding name="MyBinding">
       <security mode="TransportWithMessageCredential">
          <message clientCredentialType="UserName"/>
       </security>
    </binding>
  </wsHttpBinding>
</bindings> 
```

所有 WCF 客户都是我们公司的员工，他们将通过 IP 地址通过 Internet 访问系统。我会将服务器的证书添加到每台客户端计算机的受信任证书颁发机构。

这样的配置是否足够安全？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T09:53:31.353

我不确定您是否理解证书安全意味着什么。问题是，您可能会说所有现代证书都是平等的。现代散列和加密算法是免费提供的，它们几乎都是牢不可破的。区分安全证书和不安全证书的是信任问题。

创建证书以识别潜在敌对网络中的受信任服务器。您可能会将它们与警察徽章或身份证进行比较，尽管我想还有更多的东西。因此，关于证书有效性的主要问题是：

*   我完全认可证书吗？（*我完全认得ID的类型吗？*）
*   证书是否与使用它的服务器匹配？（*照片和持票人很像吗？*）
*   证书是否已被泄露？（*会不会是身份证被盗了？*）
*   根 CA 是否已被破坏？（*有人可以伪造身份证吗？*）

创建安全证书的问题类似于关于其有效性的问题：

*   在所有客户端上安装证书意味着识别服务器。
*   确保服务器与证书匹配
*   保护证书和根 CA。

当所有客户端和服务器都彼此密切了解时（例如在同一家公司；您的情况），可以使用自签名证书并手动将其安装在所有客户端上，以便它们能够识别它。由于服务器不对外部请求（来自*任何人*）开放，因此安全性也不是问题。因此，简而言之，**只要您遵守标准安全准则，就您而言，自签名证书就可以了。**

当您必须向外部访问者标识您的服务器时，就会出现问题。例如，如果我想使用您的 Web 服务，我的计算机不会知道您正在使用的证书（因为自签名证书必须显式安装在需要了解它的每台计算机上），因此 https 功能将毫无用处。在这种情况下，您必须从广泛认可的 CA 获得证书（这可能需要花钱）。这不会比自签名证书在本质上更安全，但它会更值得信赖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T09:39:41.087

*“什么足够安全？”* 是我要问的问题。自签名证书所做的只是提供一定级别的身份验证，即发送通信的人拥有该证书。

如果您相信签名是正确的签名，那么它就足够安全了。如果您想确保您和您的订阅者正在与您通信，而不是冒充您的人，那么您应该获得 CA 签名证书。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T09:42:46.840

它具有相同级别的安全性，但主要区别在于信任。在您的情况下，我会购买便宜的证书。

# php - 如果在Sum中结合SQL查询，和Yii ActiveRecord

> ID：11280943
> 
> 赞同：2
> 
> 时间：2012-07-01T09:35:03.887
> 
> 标签：php, mysql, sql, yii

首先，对不起我的英语。我需要一些帮助。最近我用 Yii 开始了我的第一个项目，一切都很好，框架看起来很完美，但是我在使用 ActiveRecord 从数据库中选择记录时遇到了一点问题。

假设我有以下代码：

```
$criteria = new CDbCriteria();
$criteria->select = '*, user.*, sum(if(points > 0, 1, 0)) as rank_points, sum(points) as all_points, count(*) as count_all';
$criteria->group = 'user_id';
$criteria->order = 'all_points desc';

$users = Types::model()
                ->with('user')
                ->findAll($criteria); 
```

我有这个问题

```
sum(if(points > 0, 1, 0)) as rank_points 
```

当我使用它时，我收到以下错误：

> 活动记录“类型”正在尝试选择无效列“sum(if(points > 0”。注意，该列必须存在于表中或者是具有别名的表达式。

问题是这个查询是正确的，我可以手动使用它，或者（我没有尝试过，但我认为它应该可以）使用查询生成器。我决心用 AR 做到这一点，所以这是我的问题；是否有可能按照说明执行此操作？我做错了什么，还是一个更复杂的问题？

提前感谢您的每一个回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T07:38:31.810

只需将选择指定为数组

```
$criteria->select=array('*', 'sum(if(points > 0, 1, 0)) as rank_points','sum(points) as all_points', 'count(*) as count_all'); 
```

您的代码的问题在于，由于您的`select`参数是一个字符串，Yii 尝试`explod`通过使用 a来获取所有列，`,`并且`,`您的`IF`语句中的 yii 将其视为两个单独的选择值

# javascript - 滚动条将内容移到左侧

> ID：11280944
> 
> 赞同：-1
> 
> 时间：2012-07-01T09:35:12.843
> 
> 标签：javascript, jquery, html, css, wordpress

我有站点 change.is，其中标题中的右侧菜单和搜索栏与背景图像网格对齐（主体背景图像中的暗线）。

但是当页面有滚动条时，这些右侧的菜单和搜索就会向右移动。对此的任何解决方案。具有滚动条的页面，[http://change.is/video/david-oistrakh-debussy-clair-de-lune](http://change.is/video/david-oistrakh-debussy-clair-de-lune)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T10:02:31.293

我认为您要实现的目标很难做到，因为滚动条是浏览器窗口的一部分，而不是文档的一部分。

因此，当您的标题具有属性 width:100% 时，滚动条会更小。

我只能考虑这些替代方案：

*   修复标题的宽度，但在调整窗口大小时效果不佳。
*   将你的页面内容放在一个固定高度的div中，只有这部分可以滚动，并且你的header在div之外
*   基于此：[如何检查滚动条是否可见？](https://stackoverflow.com/questions/4814398/jquery-check-if-scrollbar-visible-div-with-overflowauto)您可以确定您的滚动条是否可见，并在可见时更改标题位置

我希望它有所帮助。

# javascript - 无法在 Android 的浏览器上使用 Javascript 获取 GPS 坐标

> ID：11280946
> 
> 赞同：6
> 
> 时间：2012-07-01T09:35:56.533
> 
> 标签：javascript, android, html, geolocation, gps

我对 android、java 和 javascript 编码非常陌生。

我正在尝试获取当前的 GPS 坐标，然后在 Android 设备上对其进行跟踪。我正在使用 webview，并且大部分代码都是用 javascript 编写的。

我已经搜索了几天并尝试了许多不同的方法，但我无法在 android 设备上获取 GPS 坐标。请查看代码并帮助我弄清楚为什么我没有获得 GPS 位置。

需要指出的几点是 - 1\. 我下载并检查了其他传感器应用程序，可以看到当前 GPS 坐标正在显示（因此 GPS 正在设备上工作）。2\. 当我运行我的代码时，我在通知区域看到 GPS 搜索图标，它一直在闪烁，但从未修复。3\. 当我在笔记本电脑浏览器上只运行带有 javascript 的 HTML 文件时，它会询问共享位置的权限，然后给出坐标，但是同一个文件在 android 中没有显示任何内容。

请查看下面的代码并帮助我解决这个问题。我已经尝试了很多，并将其发布为我最后的希望。

清单文件具有以下权限 -

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_GPS" />
<uses-permission android:name="android.permission.ACCESS_ASSISTED_GPS" />
<uses-permission android:name="android.permission.ACCESS_LOCATION" /> 
```

Android中的主要java代码有 -

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    webView = new WebView(this);  
    webView.getSettings().setJavaScriptEnabled(true);   
    webView.getSettings().setLoadWithOverviewMode(true);
    webView.getSettings().setUseWideViewPort(true);
    webView.loadUrl("file:///android_asset/mymap.html");
    setContentView(webView);
} 
```

带有 javascript 的 HTML 文件是 -

```
<!DOCTYPE html>
<html>
<body onunload="OnUnload()" onload="getLocation()">
<p id="demo">Your coordinates:</p>
<script>
var watchID;
var x=document.getElementById("demo");
function getLocation()
  {
  if (navigator.geolocation)
    {
       var options = {maximumAge:600000, timeout:100000, enableHighAccuracy: true};
       watchID = navigator.geolocation.watchPosition(showPosition,showError,options);
    }
  else{x.innerHTML="Geolocation is not supported by this browser.";}
  }
function showPosition(position)
  {
  x.innerHTML="Latitude: " + position.coords.latitude + 
  "<br />Longitude: " + position.coords.longitude;  
  }
function showError(error)
  {
  switch(error.code) 
    {
    case error.PERMISSION_DENIED:
      x.innerHTML="User denied the request for Geolocation."
      break;
    case error.POSITION_UNAVAILABLE:
      x.innerHTML="Location information is unavailable."
      break;
    case error.TIMEOUT:
      x.innerHTML="The request to get user location timed out."
      break;
    case error.UNKNOWN_ERROR:
      x.innerHTML="An unknown error occurred."
      break;
    }
  }

function OnUnload()
{
   alert ("The current document will be unloaded!");
   navigator.geolocation.clearWatch(watchID);
}  
</script>
</body>
</html> 
```

非常感谢，斧头

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T17:36:27.493

好吧，我做了进一步的搜索并找到了解决方案。我在这里发布这些链接作为对我的问题的回答，供任何来到这里寻找答案的人使用。

在加载 url 之前，我必须在我的 java 代码中添加这些行，然后我才能看到地理坐标。

```
 webView.getSettings().setGeolocationEnabled(true);
    webView.setWebChromeClient(new WebChromeClient() {
         public void onGeolocationPermissionsShowPrompt(String origin, GeolocationPermissions.Callback callback) {
            // callback.invoke(String origin, boolean allow, boolean remember);              
            callback.invoke(origin, true, false);
         }
        }); 
```

有关更多信息，请点击这两个链接 -

*   [android webview 地理定位](https://stackoverflow.com/questions/5329662/android-webview-geolocation)
*   [Android：使用 html5 使用 javascript api 确定 webview 中的地理位置](https://stackoverflow.com/questions/2390641/android-using-html5-to-determine-geolocation-in-webview-with-javascript-api)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-04-01T16:24:19.217

在 Android 6.0 手机上（不确定其他版本），这在我的`build.gradle`文件中为我杀死了它：

```
targetSdkVersion: 23 
```

减少到

```
targetSdkVersion 21 
```

解决了我的问题。

# python - 从python中的URL获取查询字符串的最佳方法？

> ID：11280948
> 
> 赞同：33
> 
> 时间：2012-07-01T09:36:04.240
> 
> 标签：python, django, comparison, urlencode, urlparse

我需要从此 URL [https://stackoverflow.com/questions/ask?next=1&value=3](https://stackoverflow.com/questions/ask?next=1&value=3)获取查询字符串，并且我不想使用[request.META](https://docs.djangoproject.com/en/2.1/ref/request-response/#django.http.HttpRequest.META)。我发现还有两种获取查询字符串的方法：

1.  **使用 urlparse** urlparse.urlparse(url).query

2.  **使用 url 编码** 使用 urlencode 并将 request.GET 参数字典传递给它以获取字符串表示形式。

那么哪种方式更好呢？我的同事更喜欢 urlencode，但没有提供令人满意的解释。他们声称 urlparse 在内部调用 urlencode ，这是我不确定的，因为 urlencode 存在于 urllib 模块中。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-07-01T10:55:10.863

您可以使用这样的 GET 参数制作查询字符串

```
request.GET.urlencode() 
```

这不包括`?`前缀，并且它可能不会以与原始请求相同的顺序返回密钥。

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2012-07-01T09:49:58.987

第三个选项：

```
>>> from urlparse import urlparse, parse_qs
>>> url = 'http://something.com?blah=1&x=2'
>>> urlparse(url).query
'blah=1&x=2'
>>> parse_qs(urlparse(url).query)
{'blah': ['1'], 'x': ['2']} 
```

在 Python 3+ 中，这可用作：

```
from urllib.parse import parse_qs 
```

[urllib.parse 的文档](https://docs.python.org/3/library/urllib.parse.html)

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2014-03-09T00:40:03.777

我更喜欢使用

```
request.META['QUERY_STRING'] 
```

来自文档：

[https://docs.djangoproject.com/en/stable/ref/request-response/#django.http.HttpRequest.META](https://docs.djangoproject.com/en/stable/ref/request-response/#django.http.HttpRequest.META)

这不包括`?`前缀。

# javascript - 如果带大括号的条件在 jQuery 中无法正常工作

> ID：11280949
> 
> 赞同：0
> 
> 时间：2012-07-01T09:36:14.903
> 
> 标签：javascript, jquery

这有效：

```
if($('div.login-part').is(':empty'))
        $('div.login-part').append('<p>Login</p>'); 
```

但这不是：

```
if($('div.login-part').is(':empty')) 
{
        $('div.login-part').append('<p>Login</p>');
            $('div.login-part').append('<p>Welcome!</p>');
            $('div.login-part').append('<p>What is your name?</p>');
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T09:39:53.247

那应该可以正常工作。但是，您可以通过不多次运行选择器来提高代码效率：

```
var login = $('div.login-part')
if(login.is(':empty')) {
    login.append('<p>Login</p>');
    login.append('<p>Welcome!</p>');
    login.append('<p>What is your name?</p>');
} 
```

您甚至可以将其减少为：

```
$('div.login-part:empty')
    .append('<p>Login</p>')
    .append('<p>Welcome!</p>')
    .append('<p>What is your name?</p>'); 
```

甚至：

```
$('div.login-part:empty').append(
    '<p>Login</p>',
    '<p>Welcome!</p>',
    '<p>What is your name?</p>'
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T09:38:47.263

**工作演示** [http://jsfiddle.net/avSDa/10/](http://jsfiddle.net/avSDa/10/)

请检查代码中的结束引号；因为我从之前的早期回复中知道了这个问题的背景`:)`

演示应该可以帮助你，

希望这有帮助，干杯

**代码**

```
// FOR REGISTRATION
$('span.logreg.reg').click(function() {

    if ($('div.login-part').is(':empty')) {
        $('div.login-part').append('<p>Login</p>');
        $('div.login-part').append('<p>Welcome!</p>');
        $('div.login-part').append('<p>What is your name?</p>');
    }
}); 
```

# php - MySQL - 获取列中的平均值

> ID：11280954
> 
> 赞同：1
> 
> 时间：2012-07-01T09:37:49.637
> 
> 标签：php, mysql, math

我正在制作包含某些歌曲的列表。每首歌曲都有自己唯一的 ID。好的，假设我有这张表名为`list`. 一个新的：

![在此处输入图像描述](../Images/7277d2f663cdb55963f2350fc0a7d82e.png)

ID 是不言自明的。它用于标识行。`song_one`through`song_ten`填充了歌曲的唯一 ID。

每次用户制作新的`list`时，他们都会添加歌曲并且每一行都会被填满。现在，如何`list`使用填充在`song_one`through之间的歌曲 ID 获得表格中歌曲的平均排名`song_ten`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T09:42:31.117

重新设计您的数据库。用 songid、listid 和 rank 创建一个新表。这将使您的工作变得轻松。

```
listsongs
-----------------
songid [PK] -- Foreign key referencing the songs table
listid [PK] -- Foreign key referencing the lists table
rank 
```

选择平均歌曲排名：

```
SELECT
    a.song_id
    AVG(b.rank) AS avgrank
FROM
    songs a
LEFT JOIN
    listsongs b PM a.song_id = b.song_id
GROUP BY
    a.song_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T09:50:21.627

请按照其他人所说的规范化您的数据库结构。但是，如果您希望继续此设计，则可以使用这个看起来很笨重的解决方案：

```
SELECT 
    a.song_id,
    AVG(
        CASE
            WHEN a.song_id = b.song_one THEN 1
            WHEN a.song_id = b.song_two THEN 2
            WHEN a.song_id = b.song_three THEN 3
            WHEN a.song_id = b.song_four THEN 4
            WHEN a.song_id = b.song_five THEN 5
            WHEN a.song_id = b.song_six THEN 6
            WHEN a.song_id = b.song_seven THEN 7
            WHEN a.song_id = b.song_eight THEN 8
            WHEN a.song_id = b.song_nine THEN 9
            WHEN a.song_id = b.song_ten THEN 10
        END
    ) AS AvgRank
FROM
    songs a
INNER JOIN
    list b ON 
        a.song_id IN 
        (
            b.song_one,
            b.song_two,
            b.song_three,
            b.song_four,
            b.song_five,
            b.song_six,
            b.song_seven,
            b.song_eight,
            b.song_nine,
            b.song_ten
        )
GROUP BY
    a.song_id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T10:10:32.150

我会听*@Mark Byers*和*@Shehzad Bilal*的意见，他们说您需要重新设计数据库结构。

当您从表及其属性的角度思考时，请从逻辑上思考——从代码的角度思考。

例如：如果您正在写入文件，是否更容易创建一个通用循环来输出所有需要的内容，或者每次需要写入内容时使用不同的代码段打开文件。

在您的数据库中，拥有一个代表歌曲本身的表（这是数据库设计背后的一般思想）比拥有一个代表所有歌曲的表更容易。

```
(table) (attribute)
 song
         id
         albumid (fk from table album)
         name
         title
         (...etc)
 list
         id
         songid (fk from table song)
         ip
         date
         (...etc) 
```

如果你想创建一个排名系统，你可以通过代码来实现。在某些情况下，完全取决于您的设计，您会有一张桌子，但它也是通用的。

# python - 如何知道代码中的错误在哪里

> ID：11280956
> 
> 赞同：1
> 
> 时间：2012-07-01T09:37:53.210
> 
> 标签：python, google-app-engine

今天，我犯了一个错误，让我沮丧了好几个小时，才发现 Google App Engine SDK 出了什么问题。但是，我的代码有什么问题是语法错误（真的很傻）。

这是我的错误代码：

```
app = webapp2.WSGIApplication([('/', MainPage), debug=True) 
```

代替：

```
app = webapp2.WSGIApplication([('/', MainPage)], debug=True) 
```

我的问题是：当再次发生类似错误时，我不知道**如何知道**错误在哪里。当我使用 localhost 时，我只收到“服务器故障”。当我发布到 Google App Engine 时，我会收到：

> 错误：服务器错误 服务器遇到错误，无法完成您的请求。如果问题仍然存在，请报告您的问题并提及此错误消息和导致它的查询。

当我在 Google App Engine 中查看日志时，它仍然没有说明错误。那么，如果没有任何东西告诉我我的代码哪里出了问题，我该如何防止将来出现这种问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T10:01:09.160

检查代码中的*语法错误*的一种方法是像普通 python 程序一样运行文件。在你的情况下，它会给出类似的东西：

```
app = webapp2.WSGIApplication([('/', MainPage), debug=True)
SyntaxError: invalid syntax 
```

如果语法中没有任何错误，它可能会给您一些关于找不到 appengine 特定模块的错误。但它总是会先检查语法。

这显然不适用于所有类型的错误，但它是一个很好的起点。

但是，我不确定您为什么首先需要这样做。当我尝试在浏览器中访问本地应用程序（出现错误）时，我会看到一个调试页面，其中包含有关该错误的大量信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T12:17:26.710

如果您使用带有 PyDev 的 IDE（例如 Eclipse），它将为您突出显示类似的语法错误。

# python - 解析 XML 异常

> ID：11280958
> 
> 赞同：2
> 
> 时间：2012-07-01T09:38:07.860
> 
> 标签：python, xml, parsing, module, elementtree

我是 python 新手，非常需要帮助！我有许多我无法弄清楚的错误。我在 Mac 上使用 python 2.7。以下是错误列表：

```
Traceback (most recent call last):
  File "minihiveosc.py", line 378, in <module>
    swhive = SWMiniHiveOSC( options.host, options.hport, options.ip, options.port, options.minibees, options.serial, options.baudrate, options.config, [1,options.minibees], options.verbose, options.apimode )
  File "minihiveosc.py", line 280, in __init__
    self.hive.load_from_file( config )
  File "/Users/Puffin/Documents/python/pydon/pydon/pydonhive.py", line 396, in load_from_file
    hiveconf = cfgfile.read_file( filename )
  File "/Users/Puffin/Documents/python/pydon/pydon/minibeexml.py", line 116, in read_file
    tree = ET.parse( filename )
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xml/etree/ElementTree.py", line 1183, in parse
    tree.parse(source, parser)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xml/etree/ElementTree.py", line 656, in parse
    parser.feed(data)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xml/etree/ElementTree.py", line 1643, in feed
    self._raiseerror(v)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xml/etree/ElementTree.py", line 1507, in _raiseerror
    raise err
xml.etree.ElementTree.ParseError: not well-formed (invalid token): line 164, column 8 
```

有人可以帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T09:54:49.110

您在问题中发布的内容称为“回溯”，它仅显示*一个*错误：

> xml.etree.ElementTree.ParseError：格式不正确（无效标记）：第 164 行，第 8 列

它之前的所有行都显示了python是如何到达那里的；在文件`minihiveosc.py`中，在第 378 行执行了一些代码（显示在回溯中），然后导致同一文件的第 280 行，其中调用了其他内容，等等。

每次 Python 调用一个函数时，当前状态都会被压入堆栈，以便为下一个上下文腾出空间，当异常发生时，python 可以向您显示此堆栈以帮助您诊断问题

在这种情况下，您尝试将 XML 文档提供给其中有错误的 XML 解析器；当解析器到达第 164 行第 8 列时，它发现了一些它没有预料到的东西。您需要检查该文档以查看问题所在，它将在该区域附近。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-04T14:53:51.760

只是因为您的 XML 文件在第 8 行格式不正确。当解析器尝试读取该行时，它会引发该错误。查看您的文档以了解它是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T09:52:35.373

这是堆栈跟踪的一个错误。执行 load_from_file(config) 方法时，创建 SWMiniHiveOSC 对象导致错误。文件名或文件内容在“options.config”中。您的 XML 配置文件格式不正确，此文件中第 164 行第 8 列的令牌无效。问题在于 XML 文件，而不是 python 代码。

# xslt - 表达式中的 XPath 相对路径

> ID：11280974
> 
> 赞同：1
> 
> 时间：2012-07-01T09:40:49.310
> 
> 标签：xslt, xpath

我在“组”节点中。从中，我想找到这样的“项目”节点，它的“id”属性等于当前的“组”节点“ref_item_id”属性值。因此，在我的情况下，通过在“组”节点 B 中，我希望“项目”节点 A 作为输出。这有效：

```
<xsl:value-of select="preceding-sibling::item[@id='1']/@description"/> 
```

但这没有（什么都不提供）：

```
<xsl:value-of select="preceding-sibling::item[@id=@ref_item_id]/@description"/> 
```

当我输入：

```
<xsl:value-of select="@ref_item_id"/> 
```

结果我有'1'。所以这个属性肯定是可访问的，但我无法从上面的 XPath 表达式中找到它的路径。我尝试了许多 '../' 组合，但无法正常工作。

测试代码：[http ://www.xmlplayground.com/7l42fo](http://www.xmlplayground.com/7l42fo)

完整的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <item description="A" id="1"/>
    <item description="C" id="2"/>
    <group description="B" ref_item_id="1"/>
</root> 
```

完整的 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output method="text" indent="no"/>
  <xsl:template match="root">
     <xsl:for-each select="group">
        <xsl:value-of select="preceding-sibling::item[@id=@ref_item_id]/@description"/>
     </xsl:for-each>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-01T09:51:46.190

这与**上下文**有关。一输入谓词，上下文就变成了当前被谓词过滤的节点，**不再**是模板匹配的节点。

您有两个选择 - 使用变量来缓存外部范围数据并在谓词中引用该变量

```
<xsl:variable name='ref_item_id' select='@ref_item_id' />
<xsl:value-of select="preceding-sibling::item[@id=$ref_item_id]/@description"/> 
```

或使用该`current()`功能

```
<xsl:value-of select="preceding-sibling::item[@id=current()/@ref_item_id]/@description"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T09:49:18.460

您的表达式搜索其 id 属性与其自己的 ref_item_id 匹配的项目。您需要在 xsl:variable 中捕获当前 ref_item_id 并在表达式中引用该 xsl:variable。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T10:35:45.810

另一种可能的解决方案是使用`xsl:key`

```
<xsl:key name="kItemId" match="item" use="@id" />

<xsl:template match="root">
    <xsl:for-each select="group">
        <xsl:value-of select="key('kItemId', @ref_item_id)[1]/@description"/>
    </xsl:for-each>
</xsl:template> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T10:27:58.720

查看 XML，如果我假设您有`<item>`和`<group>`作为兄弟姐妹并且以任何顺序。然后示例输入 XML 将如下所示。

```
 <?xml version="1.0" encoding="UTF-8"?>
    <root>
        <item description="A" id="1"/>
        <item description="C" id="2"/>
        <group description="B" ref_item_id="1"/>
        <item description="D" id="1"/>
        <group description="E" ref_item_id="2"/>
    </root> 
```

现在，如果目标是提取*id*与对应的*nodes ref_item_id*匹配的所有`<item>`节点的描述。然后我们可以简单地只遍历这些节点并获取它们的描述。*`<group>``<item>`*

 *```
 <xsl:output method="text" indent="no"/>
      <xsl:template match="root">
         <xsl:for-each select="//item[(./@id=following-sibling::group/@ref_item_id) or (./@id=preceding-sibling::group/@ref_item_id)]">
            <xsl:value-of select="./@description"/>
         </xsl:for-each>
      </xsl:template>
    </xsl:stylesheet> 
```

既然您说节点具有唯一的 ID，并且所有节点都放在节点之前。我建议您使用以下 XSL 并在特定节点而不是节点上循环。

```
 <xsl:output method="text" indent="no"/>
      <xsl:template match="root">
         <xsl:for-each select="//item[./@id=following-sibling::group/@ref_item_id]">
            <xsl:value-of select="./@description"/>
         </xsl:for-each>
      </xsl:template>
    </xsl:stylesheet> 
```*

# html - HtmlService 中的href

> ID：11280978
> 
> 赞同：2
> 
> 时间：2012-07-01T09:41:21.837
> 
> 标签：html, google-apps-script

我的谷歌应用程序脚本项目（showHtml1、showHtml2）中有 2 个 html 文档。我为第一个提供服务

```
function doGet() {
    return HtmlService.createTemplateFromFile('showHtml1').evaluate();
} 
```

在第一个 html 中，我想将 href 包含到第二个 html（showHtml2）中。那可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T14:40:48.463

此示例应该向您展示模式。您可以在我使用 HtmlOuput 对象的任何地方使用 Html 文件。我只是想保持简单。

```
function doGet(requestInfo) {
  var url = ScriptApp.getService().getUrl();
  if (requestInfo.parameter && requestInfo.parameter['page'] == '2') {
    return HtmlService.createHtmlOutput(
      "This is Page 2\. <a href='" + url + "?page=1'>Page 1</a>");
  }
  return HtmlService.createHtmlOutput(
      "This is Page 1\. <a href='" + url + "?page=2'>Page 2</a>");
} 
```

使用时请记住，来自 ScriptApp 的 URL 将是已部署的 url，而不是开发模式的 url，因此如果您正在试验，您可能希望将末尾的“/exec”替换为“/dev”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:52:19.083

是的，您可以按照上面的提示，但从您的 html 文件构建模板，如下所示：

```
function doGet() {
  var template;
  if(parameter.page='html01') {
    template= HtmlService.createTemplateFromFile('fileHtml01');
     template.page='html01';
  } else {
     template= HtmlService.createTemplateFromFile('fileHtml02');
     template.page='html02';
  }
  return template.evaluate();
} 
```

并根据参数显示一个 url 或另一个。

# jquery - 操作 fb 的登录按钮 (fb_button_text)

> ID：11280982
> 
> 赞同：1
> 
> 时间：2012-07-01T09:41:54.190
> 
> 标签：jquery, facebook

我尝试`fb_button_text`使用 jQuery 操作值，但它根本不起作用。然后我尝试`alert`了 val，但它返回未定义。关于如何操作它的任何想法？

```
alert($(".fb_button_text").val()); //returns undefined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T10:00:04.647

不可能。同源策略禁止您与来自另一个域的 iframe 内容进行交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T10:06:53.400

您不能操纵这些按钮上的文本，因为恶意开发人员可能会误导他们的用户点击执行与标记不同的操作的按钮。

我相信你可以在这里看到问题。标有“退出”的按钮实际上可能是“喜欢”按钮。这不是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T13:51:58.903

正如其他用户所写，您无法操纵此按钮的文本值，
但另一种解决方案是构建您的自定义图像、文本或按钮以与 JS SDK 一起使用。

```
function fbAuth() {
    FB.login(function(response) {
      if (response.authResponse) {
        alert('User fully authorize the app.');
      } else {
        alert('User canceled login or did not fully authorize the app.');
      }
    }, { scope: 'friend_likes' });
} 
```

我已经在这里回答了这个问题：
[Facebook SDK: Replace "Log In" button with custom image](https://stackoverflow.com/questions/9952611/facebook-sdk-replace-log-in-button-with-custom-image/9956489#9956489)

# ruby-on-rails - Ruby on Rails 对象报告

> ID：11280983
> 
> 赞同：0
> 
> 时间：2012-07-01T09:42:00.323
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3

我目前正在开发一个具有大量不同对象的 ruby​​ 应用程序。作为此应用程序的一部分，我想添加一个报告引擎，允许用户针对应用程序中的几乎任何变量创建自定义报告 - 例如，他们可以创建一个报告，显示有多少百分比的客户拥有电话号码，或者街道名称以 E 开头的供应商的绝对数量。关键是，他们应该能够在应用程序中创建任何关于数据的报告，无论多么模糊，而无需依赖已经在应用程序中创建的数据.

我的问题是：我如何开始创建一个允许这种情况发生的结构？是否有必要指定可用作报告一部分的所有可能变量（例如，我需要指定`customers.count`,`customers.email_address`并且`suppliers.addresses.street_name`是上述示例的报告引擎可用的所有变量），或者这些变量是否可以以某种方式自动提供?

如果有必要指定变量，那么最好的方法是什么？

我已经搜索了这方面的一些资源，但还没有找到任何资源 - 如果有人可以推荐一个来源，也将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T10:04:42.937

*考虑一下自己警告过这可能违反了 YAGNI。我强烈建议首先为您的用户想要的最常见的报告类型构建报告，以便您可以使它们可用且美观。在抽象级别执行此操作要复杂一个数量级，容易出错，如果您不小心可能会导致一些安全问题，并且很难制作漂亮的报告而不是通用的报告。*

也就是说，看看像[Active Admin](http://activeadmin.info/)这样的东西，它提供了自定义过滤器和数据导出。您应该能够添加自定义范围以使其执行您想要的操作，但如果仍然无法执行，那么查看实现应该可以让您对所涉及的内容有一个很好的了解。

# android - 这是android中的哪个View Switcher控件？

> ID：11280985
> 
> 赞同：0
> 
> 时间：2012-07-01T09:42:13.007
> 
> 标签：android, android-layout, android-widget

谁能告诉我下图中的哪个视图切换器控件。？![在此处输入图像描述](../Images/2da73a120f1c029e020ca85e3f75d7a6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T10:15:20.373

它们可能是标签。 [http://developer.android.com/design/building-blocks/tabs.html](http://developer.android.com/design/building-blocks/tabs.html)

请务必在 Stack Overflow 上发帖之前进行一些研究。

# jquery - 如何在加载时动态更改页面内容

> ID：11280993
> 
> 赞同：0
> 
> 时间：2012-07-01T09:43:50.443
> 
> 标签：jquery, list, ready

我的问题是在加载新页面时执行一个函数。我有两个页面（index.html 和 location_page.html）。在第一个中有一个标签列表。当用户单击此列表的一个元素时，他将被重定向到应动态加载相关信息的第二页。我尝试使用功能`ready`，但它不起作用。这是我的 jQuery 代码

```
$("#location_title").ready(function(e){
    console.log("executing the function");
}); 
```

这是HTML

```
<div class="location_info">
    <div class="location_text">
    <div id="location_title"></div>
        <div id="location_description"></div>
    </div>
    <div class="location_img"><img src="./img/strutture01.jpg" class="location_image"/></div>           
     </div> 
```

第一页也有这样的方法（我称之为“就绪”函数）并且它可以工作，但它在第二页上不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T09:55:06.760

传递一个查询字符串说`location_page.html?info=1`

使用此函数获取查询字符串值，

```
function getParameterByName(name)
{
  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
  var regexS = "[\\?&]" + name + "=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(window.location.search);
  if(results == null)
    return "";
  else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
} 
```

所以在文件准备好时，调用函数

```
$(document).ready(function(){  
    value = getParameterByName("info");
    if (value == '1')
    {
        $("#location_title").show();
        // Do your stuff
    }
    console.log("executing the function");  
}); 
```

**`getParameterByName()`**函数取自**[在 JavaScript 中获取查询字符串值](https://stackoverflow.com/a/901144/500725)**

## 更新：

替换这个

```
$("#location_title").ready(function(e){ 
```

和

```
$(document).ready(function(){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T09:56:12.203

尝试`onLoad`在 HTML 标记中使用 HTML 属性，`<body>`然后在 Javascript 中调用您的函数。

即我的Javascript；

```
function doSomeThing(){ /*your code*/ } 
```

在 HTML 中；

```
<body onload='doSomething()'>
   <!-- your html body -->
</body> 
```

希望能帮助到你 ：-）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T09:56:14.363

为此，您需要一个简单的自动执行匿名：

```
(function() {
    $("#location_title").ready(function(e){
        console.log("executing the function");
    });
})(); 
```

# ios - 如何在 UITableView 中打开带有 UIButton 的链接

> ID：11280994
> 
> 赞同：2
> 
> 时间：2012-07-01T09:44:05.423
> 
> 标签：ios, uitableview, hyperlink, uibutton

我创建了下面的代码来显示按钮`UITableView`。我想为表格中的每个特定单元格添加点击事件，以通过点击该按钮来访问谷歌链接。如何将点击事件添加到特定单元格的按钮选项中并访问谷歌链接？

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"cell";    
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    UIButton *button =[[UIButton alloc]initWithFrame:CGRectMake(5,5,40,40)];
    [button addTarget:self action:@selector(buttonpressed:) forControlEvents:UIControlEventTouchUpInside];
    [button setImage:[UIImage imageNamed:@"lori"] forState:UIControlStateNormal];
    [button setTag:9001];
    [cell addSubview:button];
    [cell setIndentationWidth:45];
    [cell setIndentationLevel:1];
    cell.textLabel.text = [thearray objectAtIndex:indexPath.row];

    return cell;
}

-(void) buttonpressed:(UIButton *)sender {} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-01T10:31:04.913

尝试类似：

```
-(void) buttonpressed:(UIButton *)sender {
    NSString* launchUrl = @"http://apple.com/";
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString: launchUrl]];
} 
```

这将打开指向您传入的 URL 的 Safari。

如果您不想打开 safari，则应显示自己的`UIWebView`.

此外，您可能希望将按钮添加到`contentView`：

```
[cell.contentView addSubview:button]; 
```

# iphone - 哪个实现在foursquare中给出的布局

> ID：11280995
> 
> 赞同：1
> 
> 时间：2012-07-01T09:44:27.003
> 
> 标签：iphone

我想创建与foursquare相同的布局，但我不清楚 MapView 和 mapview 他们使用 TableView 或其他一些技术，请帮助哪种技术用于以下布局。 ![在此处输入图像描述](../Images/0e8f4415ac48b14324c568c171fcc169.png)