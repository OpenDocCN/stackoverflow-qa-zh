# StackOverflow 问答 11305000-11305999

# fortran - 什么是使新颖的 Fortran 库可从 C 调用的便捷方法

> ID：11305005
> 
> 赞同：0
> 
> 时间：2012-07-03T05:30:12.897
> 
> 标签：fortran, fortran90, gfortran

我正在开发一个小型 Fortran 库（新颖的代码），它被多个 C/C++ 应用程序调用。当几乎每个子例程都可以从应用程序中单独调用时，该库就是这样的。所以我需要为这些子程序提供 C 接口。

*   我可以使用模块，这些模块本身就很舒服。但是然后我需要手动解码模块名称修改（这对 gfortran 来说不是很难，但看起来很糟糕）或使用`bind(C,name="some_name")`子句。最后一个导致编译器警告，例如*子例程参数没有明确地可互操作*（例如，编译器希望我用 替换`double precision`）`real(kind=C_DOUBLE)`。在这种情况下，我应该用如此丑陋的声明替换库中的几乎每个变量，这会导致代码阅读困难。
*   当库中的每个文件都包含几个子例程时，我可以使用子例程（这就是我现在所做的方式）。显式地在它们之间提供接口，`interface ... include "otherfile_h.f90" ... end interface`这不是很舒服。在这种情况下，名称修改相当简单，库子例程可以很容易地直接从 C 中调用。

我使用的方法（bullet #2）需要更多的输入，而且由于在源/头文件中重复定义而容易出错。有没有更好的方法来使用智能 C 接口保持源代码清晰可读？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:48:42.183

混合 Fortran 和 C 的现代方法是使用 Fortran 的 ISO C 绑定。这将使您的代码可移植，因为 ISO C 绑定是语言标准的一部分。手动确定名称修饰是特定于编译器的，可能不适用于其他编译器。“双精度”不被认为是现代 Fortran 的最佳实践声明（参见，例如，[扩展双精度](https://stackoverflow.com/questions/9211037/extended-double-precision)和 [http://fortranwiki.org/fortran/show/Modernizing+Old+Fortran](http://fortranwiki.org/fortran/show/Modernizing+Old+Fortran)）。现代的方式是使用“real (kind=XYZ)”。该语言的概念是程序员通常使用 SELECTED_REAL_KIND 内部函数来定义他们需要的精度的常量（例如，MyDouble）。如果您需要的精度是 C_DOUBLE，那么 Fortran 使用这种类型的值是非常合适的。这不是一个丑陋的声明。（我不明白你的子弹＃2。）

# javascript - Javascript：为什么“.deletebutton”的点击事件没有触发

> ID：11305010
> 
> 赞同：0
> 
> 时间：2012-07-03T05:30:40.023
> 
> 标签：javascript, jquery, python, django

这是我的代码：

 `````
$(document).ready(function(){
        //These variables are for loading more posts
        var create_ptr = 1
        var participate_ptr = 1
        var approve_ptr = 1

        var identical_flag = "{{ identical_flag }}"

        //These are confirmatory dialogues
        $('a.deletebutton').click(function(e){
            if(!confirm("Do you really want to delete it?")){
                e.preventDefault();
            }
        });
        $('.cancel').click(function(e){
            if(!confirm("Do you really want to cancel it?")){
                e.preventDefault();
            }
        });

        //Ajax Loading of more posts

        //Ajax Loading of created wars
        $('#load_created').click(function(){
            $.ajax({
                url:"/wars/loadcreated/",
                type:'POST',
                dataType: 'json',
                data: {
                    poi: create_ptr,
                    user: {{ user_req.id }},
                    csrfmiddlewaretoken: '{{ csrf_token }}',
                },
                success: function(response){
                    //alert(response);
                    label = "div"+create_ptr;
                    var map = response;
                    $.each(map,function(k,v){
                        //alert(k+":"+v);
                        if(identical_flag=="True"){
                        text = "<div> \
                                <div class='grid_16 omega title'> \
                                <a href=/wars/"+k+" class='war'>"+v['title']+"</a> \
                                </div> \
                                <div class='grid_3 configure'> \
                                <a href=/wars/configure/"+k+" class='configure'>Configure</a> \
                                </div> \
                                <div class='grid_3 alpha omega delete'> \
                                <a href=/wars/"+v['user']+"/"+k+"/delete class='deletebutton'>Delete</a> \
                                </div> \
                                </div>";
                        }else{
                            text = "<div class='grid_22 title'> \
                                    <a href=/wars/"+k+" class='war'>"+v['title']+"</a> \
                                    </div>";
                        }
                        $('div#created div#wars').append(text);
                        $('div#created div#wars').append('<div class="clear"></div>');
                        $('div#created div#wars').append('<hr>');
                        $('div#created div#wars').append('<div class="clear"></div>');
                    });
                    create_ptr++;
                }
                });
        });
); 
````  `但是当我按下“a.deletebutton”时，没有出现确认对话框。它只是继续从数据库中删除我的数据。似乎“a.deletebutton”的javascript点击事件不起作用。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T05:34:19.310

因为它是动态生成的..您需要将事件委托给它

```
$('body').delegate('a.deletebutton','click',function(e){
            if(!confirm("Do you really want to delete it?")){
                e.preventDefault();
            }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T05:42:10.223

那是因为绑定事件时元素不存在。

在 AJAX 调用的成功方法中创建元素后绑定事件。``

# objective-c - 从详细视图中的主视图中的表视图重新加载数据

> ID：11305017
> 
> 赞同：0
> 
> 时间：2012-07-03T05:31:30.343
> 
> 标签：objective-c, ios, cocoa-touch, uitableview, ios4

我有一个主从应用程序，其中有一个表格视图，您可以`masterViewController`在其中`detailview`编辑和添加信息到文本字段等。我`rightBarButtonItem`在详细视图中有一个保存按钮。如果他们没有保存他们的工作并且他们回击我有一个`UIAlertView`弹出窗口询问他们是否要保存他们的工作。在 alertview 后面，detailview 仍然被关闭，masterviewcontroller 现在正在显示。

所以当我点击保存时，tableview 不会更新。我`[tableview reloadData]`在我的 masterviewcontroller 中有`viewWillAppear`但它不起作用，因为在用户点击保存之前视图出现在 alertview 后面。我想`[tableview reloadData]`在这里调用这个方法中的（或类似的），它是从我的详细视图中调用的。

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex 
```

我不能只是调用`[tableview reloadData]`，因为 alertViews 委托被设置为 detailview，因为如果他们在 alertview 上推送保存，它会从文本字段中提取所有信息以保存到 plist 中。有没有办法可以`[tableView reloadData]`从我的 alertView 调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:12:39.290

如果我正确理解了您的问题，那么`detailView`在点击`alertView`. 我不知道您将数据保存在哪里以及`tableView`从哪里检索数据，但请尝试在`alertView`.

在弹出`alertView`请求保存的代码中，什么也不做。

```
- (void)yourBackButtonAction //i assumed this is your method when they hit 'back'
{
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:title message:@"Would you like to save your work?" delegate:self cancelButtonTitle:@"No"  otherButtonTitles:@"Yes", nil];

    [alertView show];
    [alertView release];
} 
```

在委托方法中，保存数据并关闭`detailView`：

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
     if (buttonIndex == 1) //yes
    {
        //save your data
        [self.navigationController dismissModalViewControllerAnimated:YES];
    }
    else // no
        [self.navigationController dismissModalViewControllerAnimated:YES];
} 
```

现在在你的`masterViewController's` `viewWillAppear`方法中，`[self.tableView reloadData]`应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T07:17:49.957

我想到了。我所做的是`UITableViewController`在我的 DetailViewController.h 文件中创建一个属性并将其命名为 masterView 然后在其 .m 文件中合成它。然后我进入我的 masterViewController.m 文件并找到该方法`tableView:didSelectRowAtIndexPath:`并将我的 detailsViewController.masterView 属性设置为 self（self 是 masterViewController）。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
      self.detailViewController.masterView = self;
} 
```

然后我进入我的 UIAlertView 保存方法并在 masterViews tableView 上调用 reloadData

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 1) {
        [masterView.tableView reloadData];
    }
} 
```

这很像从下面这样的细节视图中将信息传递给数组或字典`tableView indexPath.row`（这也在方法中`tableView:didSelectRowAtIndexPath:`）

```
self.detailViewController.detailItem = object; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T05:48:06.563

设置的属性`tableview`并尝试

```
[self.tableView reloadData] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T05:51:07.297

我想你必须为此创建一个委托方法。

*   创建协议，
*   在内部创建一种方法，例如`- (void) updateMyMasterTable;`
*   在您的详细信息类中创建一个委托实例`id <ProtocolName> obj;`并写入 .h 文件。
*   合成它。
*   当你想重新加载你的主人的 tableview 调用`[obj updateMyMasterTable];`
*   在您的主类 .m 文件中实现`- (void) updateMyMasterTable`方法和调用`[tableView reloadData];`

# php - php 转换 file_get_contents 无法使用 Windows Azure 连接必应搜索 API

> ID：11305018
> 
> 赞同：0
> 
> 时间：2012-07-03T05:31:30.580
> 
> 标签：php, bing

当尝试使用 Windows Azure 新的基于 Bing 的 API 创建新的 API 请求时，使用下面的代码

```
$url= 'https://'.$this->m_host.'/Web?Query={keyword}&Adult=%27Off%27&$top=50&$format=Atom';     

        $url=str_replace('{keyword}', urlencode($this->m_keywords), $url);

        // Replace this value with your account key
                    $accountKey = $this->key;

                    $WebSearchURL = $url;

                    $context = stream_context_create(array(
                        'http' => array(
                            'proxy' => 'tcp://127.0.0.1:8888',
                            'request_fulluri' => true,
                            'header'  => "Authorization: Basic " . base64_encode($accountKey . ":" . $accountKey)
                        )
                    ));

                    $request = $WebSearchURL;
                    $response = file_get_contents($request, 0, $context);

        print_r($response); 
```

**我收到以下错误。**

```
Warning: file_get_contents() [function.file-get-contents]: 
Couldn't connect to server in /home/xxxxx on line 43

Warning: file_get_contents(https://api.datamarket.azure.com/ 
failed to open stream: operation failed in /home/xxxx/ bing_search.php on line 43 
```

知道为什么会失败吗？还是最好使用 CURL 库而不是 file_get_contents() ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T09:43:23.210

下面的代码对我有用，它是搜索新闻，但它也适用于网络搜索。

只需将 appkey 替换为您的，保留用户名原样（即`username`），因为它被服务器忽略

```
function getBingResult($keyword)
{
    $credentials = "username:appkey";
    $url= "https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/News?Query=%27{keyword}%27". "&\$format=json";        
    $url=str_replace('{keyword}', urlencode($keyword), $url);
    $ch = curl_init();
    $headers = array(
       "Authorization: Basic " . base64_encode($credentials)
    );

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE); 
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT,5);
    curl_setopt($ch, CURLOPT_FAILONERROR, true);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($ch, CURLOPT_AUTOREFERER, true);
    curl_setopt($ch, CURLOPT_TIMEOUT, 10);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($session, CURLOPT_VERBOSE, TRUE); 

    $rs = curl_exec($ch);
    $jsonobj = json_decode($rs);
    curl_close($ch);    
    return $jsonobj;
} 
```

测试功能：

```
$bingResult = getBingResult("John");
foreach($bingResult->d->results as $value)
{   
    echo '<pre>'."URL:". $value->Url.'</pre>';
    echo '<pre>'."Title:". $value->Title.'</pre>';
    echo '<pre>'."Description:". $value->Description.'</pre>';   
    echo '<pre>'."Source:". $value->Source.'</pre>';   
    echo '<pre>'."Date:". $value->Date.'</pre>';   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-24T09:33:04.150

1.) 你不需要 str_replace()。直接在 url 中使用 var：
`$url= 'https://'.$this->m_host.'/Web?Query='.urlencode($this->m_keywords).'&Adult=%27Off%27&$top=50&$format=Atom';`

2.) 您定义了三个具有相同值的不同变量：
`$WebSearchURL = $url;`
`$request = $WebSearchURL;`

仅使用`$url`。

3.)`base64_encode($accountKey . ":" . $accountKey)`可以简化为`base64_encode(":" . $accountKey)`

4.）添加`Accept-Encoding: gzip`到您的标题以减少流量并提高速度。

5.）你的问题应该是这一行：
`'proxy' => 'tcp://127.0.0.1:8888',`

删除它或将其更改为正确的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T05:47:15.010

要么适用于 Bing API，`file_get_contents`要么`CURL`适用于 Bing API，您可以使用在您的系统上适用的内容以及您熟悉的内容。

首先，我会检查您的服务器是否可以连接到 Windows Azure 服务器。尝试从命令行运行 a `ping`，然后运行 ​​a 以查看是否可以。`wget`你通过代理吗？您需要在流上下文中设置这些详细信息。

我不确定您`$this->m_host`设置了什么，但新的 Bing API 应该位于： [https](https://api.datamarket.azure.com/Bing/Search/) ://api.datamarket.azure.com/Bing/Search/或[https://api.datamarket.azure.com/必应/搜索网络/](https://api.datamarket.azure.com/Bing/SearchWeb/)。URL [https://api.datamarket.azure.com/Web](https://api.datamarket.azure.com/Web)返回无效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T12:56:57.877

这是搜索 API 的工作示例，只需将您的访问密钥替换为“XXXX”。即使我浪费了好几个小时来使用 cURL 让它工作，但它在本地失败了“CURLOPT_SSL_VERIFYPEER”的原因:(

```
$process = curl_init('https://api.datamarket.azure.com/Bing/Search/Web?Query=%27xbox%27');
curl_setopt($process, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
curl_setopt($process, CURLOPT_USERPWD, "username:XXXX");
curl_setopt($process, CURLOPT_TIMEOUT, 30);
curl_setopt($process, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($process, CURLOPT_SSL_VERIFYPEER, false);
$response = curl_exec($process);

# Deliver
return $response;

# Have a great day!
curl_close($process); 
```

# hibernate - 与休眠同时更新

> ID：11305024
> 
> 赞同：0
> 
> 时间：2012-07-03T05:32:09.240
> 
> 标签：hibernate, concurrentmodification

假设 user_1 和 user_2 在同一时刻访问了一个 id = 101、name = Rahul、accountBalance = 1500 的员工。所以两个用户现在都有具有上述价值观的员工。User_1 向 accountBalance 添加了 1000 并更新了员工。所以他的余额现在在数据库中是 2500。

在 user_1 更新员工之后，user_2 立即将 500 添加到帐户余额中。因此 500 将添加到当前在 user_2 手中的员工帐户余额中。所以 1500+500 =2000。

但是，实际上应该是 (1500+1000)+500 = 3000。

这个问题是如何在java中用hibernate处理的？

我们是否要在业务方法 updateEmployee() 中再次检查最新值，然后将金额添加到新的 accountBalance 中？

请帮助我以适当的方式处理这种情况。谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T05:55:45.690

您可以通过启用乐观锁定来做到这一点，使用带有@Version 注释的字段。在每次更新时，Hibernate 将检查数据库中的版本是否与内存中的版本相同，并增加版本。如果版本不匹配，它将引发异常。

更多关于乐观锁定[的文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#d0e5844)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T06:01:26.720

Hibernate 的用户版本控制概念。在这种情况下，如果 user_2 更新了相同的记录，hibernate 会在更新之前检查相同的记录是否已被修改，如果是，则抛出异常。因此，您的应用程序必须处理该异常并让 user_2 通知记录的更改并重新加载记录再次。

# android - 如何在 cocos2d-android 中覆盖 ccTouchbegan（去除重叠精灵）

> ID：11305027
> 
> 赞同：0
> 
> 时间：2012-07-03T05:32:33.557
> 
> 标签：android, cocos2d-iphone, cocos2d-android

我有一组精灵列表。如果精灵重叠，我想删除最上面的精灵。

如果（popRect1.containsPoint（popRect1，位置））{

```
 BaloonList1.remove( baloons );
                       baloons.removeSelf();

                 } 
```

如果（popRect2.containsPoint（popRect2，位置））{

```
 BaloonList2.remove( baloons );
                       baloons.removeSelf();

                 } 
```

当相同列表的两个精灵重叠并且如果我触摸它们时，只有最上面的精灵将被删除......如果 2 个精灵来自不同的列表并且当我触摸最上面的精灵时它们都被删除（就像我的触摸正在拦截......我认为它的发生是因为两个接触点都是精灵的有界矩形）..我搜索了很多。有人说覆盖 TouchBegan..registerWithTouchDispatcher...有人知道吗？？？？？？？我知道这可能是一个简单的问题 4u 伙计们。如果您想要更多关于此的代码或描述，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:30:21.640

您还必须保存首先添加的精灵的状态。假设我们有 2 个精灵 A 和 B。

情况 1) 如果 A 和 B 都具有相同的 z 值

如果我们添加 B 精灵，然后添加 A 精灵，那么 A 将出现在 B 精灵的上方。所以我们需要设置最后添加哪个精灵的状态。据此，您必须删除精灵。情况 2) 如果 A 和 B 具有不同的 z 值 在这种情况下。你有清晰的画面。具有更多 z 值的精灵将出现在其他精灵之上。所以你可以删除那个精灵。

* * *

在您的情况下，如果您使用案例 1，那么您还必须保持状态。

假设我们有两个 ArrayList：ArrayList1 和 ArrayList2

我们将状态保存为 ArrayList：ArrayListStatus1,ArrayListStatus2

我们已经将状态初始化为 1。 int status=1;

如果我们在任何 ArrayList 中添加一个精灵，我们还必须将 ArrayListStatus 添加到相应的状态数组列表中并增加状态，所以下次我们添加精灵时，它将添加一个加号状态。

现在我们有了订单，所以我们可以应用检查哪个精灵在上面。状态对应于状态数组列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:25:07.507

addChild(CCNode child, int z);

如果您将 z 的值设置为 0,1,2,3,4.. 等等..

在此之后，当您在屏幕上触摸时，z 的值被决定删除精灵。在发生重叠的情况下要首先删除的精灵，给z的值是最大值。给其他人。

# mysql - 如何使用 PDO 向数组中添加一行

> ID：11305028
> 
> 赞同：0
> 
> 时间：2012-07-03T05:32:40.523
> 
> 标签：mysql, arrays, pdo

如何使用 PDO 在数组中添加一行。以前我是这样做的`$message = array('status' => 'ok';`但是当我尝试像这样在 PDO 中使用它时它不起作用

```
 try {
    $dbh = new PDO("mysql:host=$dbhost;dbname=$dbname", $dbuser, $dbpass);  
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $stmt = $dbh->query($sql);  
    $employees = $stmt->fetchAll(PDO::FETCH_OBJ);
$employees['status'] = 'ok';
$employees = array($employees);
    $dbh = null;
    header('Content-Type: application/json');
    echo '{"key":'. json_encode($employees) .'}'; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T05:36:10.710

尝试

```
$employees = $stmt->fetchAll(PDO::FETCH_ASSOC); 
```

如果你想类型转换`$employees`成一个数组，你应该使用

```
$employees = (array)$employees; 
```

# c++ - 在 C++ 中使用第 3 方库

> ID：11305029
> 
> 赞同：1
> 
> 时间：2012-07-03T05:32:56.227
> 
> 标签：c++, static-libraries, codeblocks

我正在完全转动我的轮子，让几个 3rd 方库与我的 c++ 程序一起工作。我正在寻找一些关于实现库时需要采取的一般步骤的一般性建议（40,000 英尺高）。

首先，一些细节：我在 Windows 中使用 code::blocks 作为我的 IDE。我喜欢这个 IDE，如果不需要的话，我真的不想切换到其他任何东西（我已经尝试过 Visual c++ 以及 linux 中的一些东西）。我尝试使用的库是 GMP 和 crypto++。

好的。我*想*我知道的是：下载库后，我将文件解压缩到一个文件夹中。我一直在直接解压缩到 C:\，每个 zip 文件都解压缩到它自己的文件夹（例如 c:\cryptopp 和 c:\gmp）。我认为下一步是构建库，但这是我完全陷入困境的地方。这是怎么做到的？提取的文件中没有可执行文件。据我所知，我相信我是在 code::blocks 中做到这一点的，但我不知道怎么做？

最后，假设我可以完成这项工作，我相信这会创建 .lib 文件，在我的代码中实际使用该库之前的最后一步是链接到该库。这部分，我相信我明白了。

所以，我的问题很广泛：我是否全面了解这个过程？如果是这样，我该如何构建这些库，如果事实上这是我所缺少的。

非常感谢你纵容我的无知。我现在完全没有方向感，尽管在谷歌上花了好几个小时，但我没有取得任何进展。另外，请随时纠正我所说的任何不正确的事实。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T05:56:44.273

通常，库中有一个名为 makefile 的特殊文件，并使用名为[Make](http://en.wikipedia.org/wiki/Make_%28software%29)的实用程序构建（或其变体之一，无论在 Windows 下如何工作）。通常你所要做的就是在你解压源文件的目录中运行 Make，剩下的事情它会自己做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T06:21:52.093

如果您提到的那些库（GMP 和 crypto++；免责声明：我不熟悉它们中的任何一个）没有 code::blocks 的项目文件，那么您仍然可以在 Windows 下使用 MinGW 编译它们。

如果您已经安装了 MinGW，您可以使用 MinGW shell 导航到相应的目录，`/c/cryptopp/`在`/c/gmp`您的示例中 - MinGW shell 的工作方式类似于 Unix shell，并且具有不同的命名约定。

然后你需要编译库。检查这些目录中是否有Makefile，如果没有，您可以检查是否有`configure`脚本，该脚本将生成Makefile。如果你有 Makefile，你可以键入`make`它将使用 MinGW 的 GCC 编译器端口编译库。

编译完成后，您应该有一个 .a 文件（例如`libcryptopp.a`）形式的库，您可以将其链接到您的项目。在 code::blocks 中，您可以将链接器路径（`-L`GCC 中的命令行选项）设置到`C:\cryptopp\bin`编译库的位置或任何位置，然后添加`libcryptopp.a`到要链接的库列表中（这与`-l`GCC 中的选项相关联） . 惯例是省略 lib 前缀和 .a 扩展名，因此您只需将其添加`cryptopp`到您的库列表中。最后，您的链接器选项应该`-LC:\cryptopp\bin -lcryptopp`与

此外，为了能够使用库，您需要将 headers 目录的路径添加到项目的包含路径中。这与`-I`GCC 中的命令行选项相关联，因此您的编译器的命令行选项会有类似的东西`-IC:\cryptopp\include`。

当然，以上所有内容都假设您将 code::blocks 与 GCC 一起使用。如果你用 VisualC++ 使用它，那么原理是一样的，但具体步骤不同。

# gwt - REST 服务应用程序中的会话管理

> ID：11305034
> 
> 赞同：3
> 
> 时间：2012-07-03T05:33:51.500
> 
> 标签：gwt, rest, jersey

在阅读了来自不同人关于 Rest 支持的应用程序的会话管理的大量评论之后，我想到了要做的事情。

我的应用程序也可以从浏览器（作为普通 Web 应用程序）和移动设备访问。应用程序最初是使用服务器中的 http 会话管理编写的，用于基于浏览器的应用程序。现在在获取移动客户端的同时，我们已经实现了 Rest web 服务，移动设备和浏览器客户端也具有相同的服务层。

当用户使用移动设备登录时，我们正在创建一个唯一的身份验证令牌，生成一个 http 会话，并将带有此令牌 ID 的 http 会话存储为应用程序中的键、值映射。稍后我们希望来自移动设备的每个用户请求都返回此令牌，并使用此令牌从地图获取会话并继续。

有人可以查看我的方法并确认它是否可以吗？

现在，我有第二个问题 - 我们正在使用 GWT 中的 JsonPRequestBuilder 使用 jersey-guice 调用我的后端 REST 服务。如何在来自 GWT 的 jsonp 调用期间在 http 标头中发送此令牌？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T10:33:16.033

“REST 中的会话”是一个矛盾的说法。

> 当用户使用移动设备登录时，我们正在创建一个唯一的身份验证令牌

看起来不错，虽然它看起来有点像你重新发明了 OAuth。

> 生成一个 http 会话，我们将带有这个令牌 ID 的 http 会话存储为 app 中的键、值映射。

在服务器端保留一些缓存以加快访问速度是可以的，但不要将其称为*session*，也不要将其绑定到特定*令牌*（如果数据是特定于用户的，则可以将其绑定到用户；如果有意义，用户 ID 将只是缓存键的一部分）。

您不会谈论该缓存的到期时间，或者您如何/何时清理它并释放内存。

> 现在，我有第二个问题 - 我们正在使用 GWT 中的 JsonPRequestBuilder 使用 jersey-guice 调用我的后端 REST 服务。如何在来自 GWT 的 jsonp 调用期间在 http 标头中发送此令牌？

正如@Arcadien 所说，JSONP 只是`<script>`在页面中插入一个元素，因此您只能控制 URL，因此这是您应该/可以传递身份验证令牌的地方（尽管它并不真正安全）。
我可以质疑您从移动“本机”应用程序使用 JSONP 的原因吗？AFAIK 没有来自 UIWebViews 或类似的 SOP 问题，所以`RequestBuilder`只是`XMLHttprequest`工作™。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:19:42.197

对于第二个：使用 JSONP，您必须将令牌添加为纯 http 参数，当使用常规 XMLHttpRequest 时，您无法访问像 Request 这样的对象。所以你不能设置任何类型的标题，一切都应该放在查询字符串中。

# php - PHP/mySQL 导出为 CSV 但仅用户选择的日期范围数据

> ID：11305036
> 
> 赞同：2
> 
> 时间：2012-07-03T05:34:00.510
> 
> 标签：php, date, csv, export, range

我很难过，可以使用一些非常感谢的帮助来解决这个问题。

基本上，我有一个显示来自 mysql 数据库的数据的页面。

我有一个简单的文本链接，可以将所有数据导出到下载的 CSV 文件中。那个代码是...

```
<a href="log_activity-export2CSV.php?id=<?php echo $colname_CoachActivityListData ?>">Export All</a> 
```

...这工作得很好。

注意：一切都是根据登录的用户生成的——因此需要 ID。

这是将上述内容导出为 CSV 的 PHP 文件的内容/代码...

```
<?php 
mysql_select_db($database_vandyConnect, $vandyConnect);

$queryString = "SELECT Created, Last_Updated, coach_name, Start_Date, End_Date, And_Many_More_Columns FROM Activity_Log WHERE User_id = ". $_GET['id'];

$result = mysql_query($queryString, $vandyConnect);

// $result = $db_con->query('SELECT * FROM `Activity_Log`');
if (!$result) die('Couldn\'t fetch records');

$num_fields = mysql_num_fields($result);

$headers = array();
for ($i = 0; $i < $num_fields; $i++) {
    $headers[] = mysql_field_name($result , $i);
}

// $today = date("F_j,_Y,_g:ia");
$today = date("Ymd_g-ia");

$fp = fopen('php://output', 'w');
if ($fp && $result) {
    header('Content-Type: text/csv');
    header('Content-Disposition: attachment; filename="ADEC_Activty_export-'.($today).'.csv"');
    header('Pragma: no-cache');
    header('Expires: 0');
    fputcsv($fp, $headers);
    while ($row = mysql_fetch_row($result)){
        fputcsv($fp, $row, ",");
    }
    die;
}
?> 
```

...注意：我从上面删除了 Dreamweaver 为我插入的所有 php 代码，这些代码将其连接到数据库和用户权限等。

**所以现在**，我试图弄清楚如何为用户添加一种方法来下载此数据的 CSV 文件，但*仅限*于用户选择的某些日期范围之间。

首先，我选择使用我在网站其他地方使用过的 JQuery DatePicker，但这次使用它的 DateRange 选项...

```
<script type="text/javascript"> //to pick date range
$(function() {
    $( "#from_start" ).datepicker({
        defaultDate: "-2m",
        changeMonth: true,
        numberOfMonths: 2,
        onSelect: function( selectedDate ) {
            $( "#to_end" ).datepicker( "option", "minDate", selectedDate );
        }
    });
    $( "#to_end" ).datepicker({
        defaultDate: "-1m",
        changeMonth: true,
        numberOfMonths: 2,
        onSelect: function( selectedDate ) {
            $( "#from_start" ).datepicker( "option", "maxDate", selectedDate );
        }
    });
});
</script> 
```

...注意：这部分也可以正常工作。然后我为用户制作了html表单来选择他们的日期范围......

```
<form method="POST" action="log_activity-export2CSV.php?id=<?php echo $colname_CoachActivityListData ?>">
    Select a date range from <input type="text" id="from_start" name="from_start" value="" /> to <input type="text" id="to_end" name="to_end" value="" />
    <input name="export" type="submit" value="Export CSV" />
</form> 
```

...我给出了与上面的“导出所有链接”相同的“动作”，这是整个问题的关键/关键 - 我不知道如何将表单的选定值推送到 CSV 导出，以便仅在所选日期范围内进行下载。

如果有人可以指导我，我将不胜感激。另请注意：虽然这是很多代码，但我是 php 的菜鸟，所以请保持温柔 ;-) 谢谢，-jason。

# jquery - rails + jquery调用javascript函数，返回值未定义

> ID：11305043
> 
> 赞同：0
> 
> 时间：2012-07-03T05:34:51.273
> 
> 标签：jquery, ruby-on-rails, ajax

我一生都无法弄清楚这一点。我知道 ajax 进行调用的异步方式存在一些问题，但仍然无法确定问题所在。我有这个：

```
$(document).ready(function() {
  $('#address').blur(function() {
    console.log("now processing address");
    var add = $("#address").val();
    console.log("address is: " + add);
    var refAdd = processAddress(add);
    console.log("refined addres is: " + refAdd);
  }); 
}); 
```

然后我有我正在调用的 processAddress 函数（感谢 SO 上的另一篇文章）。问题是上面的最后一条语句将 refAdd 返回为未定义。这是为什么？？

```
function processAddress(address){
  var geocoder = new google.maps.Geocoder();
  if (geocoder) {
    geocoder.geocode({ 'address': address }, function (results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        //console.log(results[0].geometry.location);
        console.log(results[0].formatted_address);
        console.log("latitude is: " + results[0].geometry.location_type);
      }
      else {
        console.log("Geocoding failed: " + status);
        //formatted_address = "Geocoding failed: " + status;
        formatted_address = "failed"
      }
    });
  } 
} 
```

很明显是一个异步问题，我可以看到输出的打印顺序；refAdd 应该最后打印，但不是。

```
now processing address
address is: 415 N Mathilda Ave, Sunnyvale
refined addres is: undefined
415 N. Mathilda Ave, Sunnyvale, CA, USA
latitude is: ROOFTOP 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:57:36.773

你是对的，问题是因为函数是异步的（我怎么知道？因为正如你所说：`logs`异步编写*并* `geocoder.geocode`使用回调）。您必须使用回调，如下所示：

```
$(document).ready(function() {
  $('#address').blur(function() {
    console.log("now processing address");
    var add = $("#address").val();
    console.log("address is: " + add);

    // adding callback to call.
    processAddress(add, function(refAdd) {
      console.log("refined addres is: " + refAdd);
    });
  }); 
}); 
```

并在函数中：

```
function processAddress(address, callback){ // <---- note the callback arg
  var geocoder = new google.maps.Geocoder();
  if (geocoder) {
    geocoder.geocode({ 'address': address }, function (results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        //console.log(results[0].geometry.location);
        console.log(results[0].formatted_address);
        console.log("latitude is: " + results[0].geometry.location_type);
        callback('TEST'); // <---- pass here the value you need
      }
      else {
        console.log("Geocoding failed: " + status);
        //formatted_address = "Geocoding failed: " + status;
        formatted_address = "failed"
        callback('TEST'); // <---- pass here the value you need
      }
    });
  } else {
    callback(); // <---- pass here for example error if you need
  }
}; 
```

我不知道这个`geocoder`东西，所以你需要根据自己的需要定制它。

# java - 设置在不同域中定义的域类的值

> ID：11305044
> 
> 赞同：0
> 
> 时间：2012-07-03T05:34:54.433
> 
> 标签：java

我有两个域类（两个表的 getter setter）：`Contact Information`和`Address`. 我在联系信息中有一些字段，在地址中有一些字段。

我在控制器类中设置联系信息的值，但我需要通过联系信息设置地址类中的字段值。

代码：

```
class ContactInformation {

String id;
String name;

Address address;

//getter and setters

} 
```

和

```
Class Address{

String idAddress;
...
...
//getter and setter

} 
```

在控制器类中

我正在设置像

```
contactInformation.setId("some value"); 
```

如何通过 ContactInformation 设置 idAddress 的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T05:38:06.100

```
contactInformation.getAddress().setIdAddress(id) 
```

# java - 在 netbeans 中更改 UI 状态。Netbeans 是否有 Java 的状态窗口概念？

> ID：11305045
> 
> 赞同：0
> 
> 时间：2012-07-03T05:35:04.483
> 
> 标签：java, swing, netbeans, jframe, state

我正在创建一个具有多个 UI 状态的 UI 应用程序。我想知道是否可以使用 netbeans 功能管理状态。

我以前使用过 flex，他们确实有管理状态的方法。状态窗口。Netbeans 有类似的功能吗？

如果不是，我们如何去维护状态并在设计窗口中预览它们？

# c++ - 使用带有参考的手动内存管理？

> ID：11305046
> 
> 赞同：1
> 
> 时间：2012-07-03T05:35:13.140
> 
> 标签：c++, pointers, reference

我有一个被大量引用的变量。它最初是一个自动变量。

现在我决定在一些代码中间我想调用它的 dtor 来重置它的状态，所以我打算释放并重新分配它。执行此操作的标准方法当然是调用 delete 并创建一个新的。

前：

```
void func() {
    ClassName varname; 
    while (varname.check()/*...*/) { if (varname.function()/*...*/) { /* bunches of code ... */
            /*... some more code ... */ 
        }
    } 
} 
```

现在我想要：

```
void func() {
    ClassName varname; 
    while (varname.check()/*...*/) { if (varname.function()/*...*/) { /* bunches of code ... */
            if (key_code[SDLK_r]) { // Pressing R key should reset "varname"!
                /* Here I want to dealloc and realloc varname! */
                /* But if I declare varname as a ptr on line 2, */
                /* line 3 (rest of code) must be refactored. */
            }
        }
    } 
} 
```

我的第一次尝试是将第 2 行更改为这样的

```
ClassName *varnamep = new ClassName();
ClassName& varname = *varnamep; 
```

但我不确定这是否意味着我以后可以调用 delete 并重新分配参考！

```
 delete &varname; 
                varnamep = new ClassName();
                varname = *varnamep; // I assume compiler will error here because I can't reassign a ref. 
```

我可以通过其他方式做到这一点吗？还是我应该把它吸起来，然后找一个替换`varname.`成的`varname->`？在这种特殊情况下，对于我的实际情况，我可能会实现一个成员函数`reset()`，而不用担心这个实际问题。但是我想知道是否有一些捷径可以有效地将引用视为指针（或者可能会证明这是荒谬的废话）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T05:42:26.230

鉴于`ClassName varname`，你*可以*这样做：

```
varname.~ClassName();
new (&varname) ClassName; 
```

但我不会推荐它。这使用了 C++ 的两个鲜为人知的特性：显式析构函数调用和放置 new。仅当它在性能上产生显着差异时才使用它，由探查器测量，并且`ClassName`构造函数不能抛出异常。

如果`ClassName::operator=`做你需要的（或者你可以修改它来做你需要的），你可以这样做：

```
varname = ClassName(); 
```

这比使用显式析构函数调用后跟placement-new 更容易理解。

另一个常见的成语：

```
varname.swap(ClassName()); 
```

如果`ClassName`有一种有效的`swap`方法，就像标准容器一样，这很有效。这很微妙，如果您决定使用它，它可能值得评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T05:38:36.730

标准方法是**不**删除并创建新实例。只需重新分配变量：

```
ClassName varname = .... ;

....

if (some condition) {
  varname = SomethingElse;
} 
```

并确保复制构造函数、赋值运算符和析构函数正确处理由`ClassName`.

# import - 如何使用c#将shapefile加载到spatialite？

> ID：11305050
> 
> 赞同：0
> 
> 时间：2012-07-03T05:35:55.313
> 
> 标签：import, shapefile, spatialite

我正在尝试在 c-sharp 中编写代码以将 shapefile 导入到空间数据库。

编写用于初始化 sqlite 连接的代码如下，

```
SQLiteConnection conn = new SQLiteConnection(@"Data Source=" + sqLiteFile + ";Version=3;");
conn.Open();

SQLiteCommand cmd = new SQLiteCommand(@"SELECT load_extension('libspatialite-2.dll')", conn);
cmd.ExecuteNonQuery();

cmd = new SQLiteCommand("select .loadshp ShapeTest ShapeTest CP1252 23032", conn);
cmd.ExecuteNonQuery(); //Getting error here. 
```

我认为存在语法错误。有任何想法的人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:31:17.253

.loadshp 由命令行实用程序提供，而不是由 spatialite 扩展提供。我认为您想要做的是使用 VirtualShape 虚拟表：

```
"CREATE VIRTUAL TABLE ShapeTest USING VirtualShape(\"ShapeTest\", \"CP1252\", 23032)" 
```

# solr - Solr 的 MoreLikeThis：如何在 mlt.fl 中使用浮点数？

> ID：11305054
> 
> 赞同：1
> 
> 时间：2012-07-03T05:36:16.973
> 
> 标签：solr

我真的很想使用浮点字段来查找文档的 MoreLikeThis 文档。但是，据我所知，我只能将字符串字段用于 mlt.fl？我的意思是使用文档的唯一 id 来查找其 MoreLikeThis 结果，其中 mlt.fl 字段应为浮点数。有没有办法做到这一点？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:47:19.167

如果您希望`myfield`字段接近 10（例如），请根据以下方式提升：

`&bf="dist(1, myfield, 0, 10, 0)^2"`

来自[http://wiki.apache.org/solr/FunctionQuery#Using_FunctionQuery](http://wiki.apache.org/solr/FunctionQuery#Using_FunctionQuery)

* * *

**更新：**似乎 MoreLikeThisHandler 不支持您想要的增强功能。尝试从 MLT 处理程序中提取[有趣的术语](http://wiki.apache.org/solr/MoreLikeThisHandler#Params)，然后在像 Dismax 这样的常规搜索处理程序上使用它们。

# sql-server-2008 - 从表中删除一行会导致在另一个表中自动插入另一行？怎么做？

> ID：11305058
> 
> 赞同：0
> 
> 时间：2012-07-03T05:36:41.833
> 
> 标签：sql-server-2008

谁能告诉我如何做到这一点？

它看起来像一个设置。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T05:44:12.590

```
CREATE TRIGGER trgAfterDelete ON <yourFirsttable> AFTER DELETE
AS
    select @blah = <yourCol1>, @blih = <yourCold2> from deleted;    

    insert into <YourSecondTable>(..., blah, blih)
        values(..., @blah, @blih);
GO 
```

# algorithm - 寻找节点之间所有简单路径的问题？

> ID：11305059
> 
> 赞同：1
> 
> 时间：2012-07-03T05:36:46.677
> 
> 标签：algorithm, graph-algorithm, dijkstra

通过在未加权图上使用dijkstra算法找到两个节点之间的所有简单路径是否可行。如果是，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T07:52:46.480

您应该能够通过使用标准 Floyd-Warshall 算法的修改来计算图中任意两个节点之间的简单路径。 您可能想从 UVA Online Judge中查看[这个问题。](http://uva.onlinejudge.org/index.php?option=onlinejudge&page=show_problem&problem=61)它的解决方案可在互联网上免费获得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:22:12.497

首先，dijkstra 的行为就像在未加权图上的广度拳搜索，因此将它用于此任务没有任何意义。

获取两个顶点之间的所有路径的典型方法是使用修改的[深度优先搜索](http://en.wikipedia.org/wiki/Depth-first_search)。

# php - 从 PHP 的下拉菜单中传递两个变量

> ID：11305072
> 
> 赞同：-4
> 
> 时间：2012-07-03T05:38:15.453
> 
> 标签：php, javascript, html

我想重新加载我的页面（PHP），从下拉菜单更改值并将所选项目的值作为变量与另一个变量一起传递给页面。我试过以下 -

```
<select name="application" onChange=Refresh(this.value,$query)" \>
<option>Any Application</option>
<option>ChIP</option>
<option>Enzyme Immunoassay</option>
<option>ELISA</option>
<option>Flow Cytometry</option>
<option>FACS</option>
</select> 
```

刷新功能是：

```
function Refresh(id,gene){
location.href="getnet.php?app=" + id + "&query=" + gene;
} 
```

我收到的变量如下：

```
$query = $_POST['gene'];
$app = $_POST['application']; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T05:58:38.370

在第二个参数的下拉和隐藏字段的情况下，您必须使用表单`submit()`方法`onchange`，例如：

```
<form name="myForm" method="GET" action="<?php echo $_SERVER['PHP_SELF'];?>">
  <select name="first" onChange="document.myForm.submit();">
    <option value="1">Value 1
    <option value="2">Value 2
    <option value="3">Value 3
  </select>
  <input type="hidden" name="second" value="second parameter value"/>
</form> 
```

在服务器端，您可以在`$_GET`超全局数组中获取变量，例如： `$_GET['first']`-它是下拉元素的值和`$_GET['second']`-第二个隐藏参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T05:51:57.463

尝试为下拉 onchange 事件编写 js 函数。下面是示例代码：

```
<script type="text/javascript">
 function reload_url(val){
    window.location.href = 'some_php_file.php?new_var='.val;
 }
 </script>

 <select name="my_Sel" onchange="reload_url(this.value);">
 <option value="1">1</option>
 <option value="2">2</option>
 </select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T05:57:46.077

尝试表单提交 onChange 怎么样？

```
<form name="form" action="url" method="get">
    <select name="application" onChange="this.form.submit();" > 
        <option>Any Application</option> 
        <option>ChIP</option> 
        <option>Enzyme Immunoassay</option> 
        <option>ELISA</option> 
        <option>Flow Cytometry</option> 
        <option>FACS</option> 
    </select>
    <input type="hidden" name="gene" value="variable" />
</form> 
```

# c# - 对象当前在其他地方使用 - 当 image.save

> ID：11305074
> 
> 赞同：4
> 
> 时间：2012-07-03T05:38:30.590
> 
> 标签：c#, wpf

![在此处输入图像描述](../Images/605a9e5ca4257bccc7097f952d5bf21a.png)使用以下代码，我们得到错误“对象当前正在其他地方使用”

```
private void CaptureDone(System.Drawing.Bitmap e)
        {
            try
            {
                this.pictureBox.Image = e;
                 if (isSending)
                    ThreadPool.QueueUserWorkItem(new WaitCallback(SendVideoBuffer), pictureBox.Image);
            }
            catch (Exception) { }
        }

     void SendVideoBuffer(object bufferIn)
            {
    TcpClient tcp = new TcpClient(ConfigurationSettings.AppSettings[0].ToString(), 6000);
                           NetworkStream ns = tcp.GetStream();
                           if (ns != null)
                           {
                               System.Drawing.Image buffer = (System.Drawing.Image)bufferIn;
                               buffer.Save(ns, System.Drawing.Imaging.ImageFormat.Jpeg);// error comes here
                               ns.Close();
                               tcp.Close();
                            }
           } 
```

请提出建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T05:46:55.893

GDI+ 图像不是线程安全的，您需要获取对象上的锁定。

```
void SendVideoBuffer(object bufferIn) 
    { 

 var tcp = new TcpClient(ConfigurationSettings.AppSettings[0].ToString(), 6000); 
                   var ns = tcp.GetStream(); 
                   if (ns != null) 
                   { 
                       var buffer = (System.Drawing.Image)bufferIn;
                       lock(buffer) 
                            buffer.Save(ns, System.Drawing.Imaging.ImageFormat.Jpeg);
                       ns.Close(); 
                       tcp.Close(); 
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-03T02:21:06.773

我之前遇到过这样的异常并且有更多的基础。

这个异常的大部分原因是多线程造成的，我们尝试操作同一个全局图像。

这是一个很好的解释为什么会发生此异常：“对于 WinForms，这通常意味着发生递归 Graphics.GetHdc。GetHdc 必须在任何其他 GetHdc 之前匹配 ReleaseHdc。递归意味着您有类似 GetHdc->GetHdc->ReleaseHdc- >ReleaseHdc，而不是 GetHdc->ReleaseHdc->GetHdc->ReleaseHdc。另一种可能是缺少对 ReleaseHdc 的调用。（即 GetHdc->GetHdc->ReleaseHdc）”。

深入image.Save方法，会调用GetHdc->ReleaseHdc对方法。另外，我想如果我们尝试获取 image.width 或 image.Clone 方法，它也会调用 GetHdc 方法。

因此，尝试在线程中使用全局图像时要小心。大多数操作都不是线程安全的。

# c - 简单的 C 内核字符指针不起作用

> ID：11305075
> 
> 赞同：6
> 
> 时间：2012-07-03T05:38:34.843
> 
> 标签：c, pointers, x86, kernel, osdev

我正在尝试使用 C 制作一个简单的内核。一切都加载并正常工作，我可以访问视频内存和显示字符，但是当我尝试实现一个简单的 puts 函数时，由于某种原因它不起作用。我已经尝试过自己的代码和其他代码。此外，当我尝试使用在函数外部声明的变量时，它似乎不起作用。这是我自己的代码：

```
#define PUTCH(C, X) pos = putc(C, X, pos)
#define PUTSTR(C, X) pos = puts(C, X, pos)

int putc(char c, char color, int spos) {
    volatile char *vidmem = (volatile char*)(0xB8000);
    if (c == '\n') {
        spos += (160-(spos % 160));
    } else {
        vidmem[spos] = c;
        vidmem[spos+1] = color;
        spos += 2;
    }
    return spos;
}
int puts(char* str, char color, int spos) {
    while (*str != '\0') {
        spos = putc(*str, color, spos);
        str++;
    }
    return spos;
}
int kmain(void) {
    int pos = 0;
    PUTSTR("Hello, world!", 6);
    return 0;
} 
```

（`spos`起始位置）的东西是因为我无法制作全局位置变量。`putc`工作正常，但`puts`没有。我也试过这个：

```
unsigned int k_printf(char *message, unsigned int line) // the message and then the line #
{
    char *vidmem = (char *) 0xb8000;
    unsigned int i=0;

    i=(line*80*2);

    while(*message!=0)
    {
        if(*message=='\n') // check for a new line
        {
            line++;
            i=(line*80*2);
            *message++;
        } else {
            vidmem[i]=*message;
            *message++;
            i++;
            vidmem[i]=7;
            i++;
        };
    };

    return(1);
};

int kmain(void) {
    k_printf("Hello, world!", 0);
    return 0;
} 
```

为什么这不起作用？我尝试将我的 puts 实现与我的原生 GCC 一起使用（没有颜色和 spos 数据并使用`printf("%c")`），它运行良好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T20:11:42.083

由于您通常遇到全局变量问题，因此问题很可能与链接器将“Hello World”字符串文字放在内存中的位置有关。这是因为字符串文字通常由链接器存储在全局内存的只读部分中......您没有详细说明您是如何编译和链接内核的，所以我会尝试类似以下和看看这是否有效：

```
int kmain(void) 
{
    char array[] = "Hello World\n";
    int pos = 0;
    puts(array, 0, pos);
    return 0;
} 
```

这将在堆栈而不是全局内存上分配字符数组，并避免链接器决定放置全局变量的任何问题。

通常，在创建简单内核时，您希望将其编译并链接为平面二进制文件，而不依赖于外部 OS 库。如果您正在使用像 GRUB 这样的多引导兼容引导加载程序，您可能需要查看多[引导规范页面](http://www.gnu.org/software/grub/manual/multiboot/multiboot.html)中的基本示例代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T13:31:27.140

由于这得到了 SO 之外的引用，我将添加一个通用答案

互联网上有几个内核示例，其中许多处于各种退化状态 - 例如 Multiboot 示例代码缺少编译指令。如果您正在寻找一个工作的开始，可以在[http://wiki.osdev.org/Bare_Bones找到一个已知的好示例](http://wiki.osdev.org/Bare_Bones)

最后要妥善处理三件事：

1.  **引导加载程序需要正确加载内核，因此它们必须就某种格式达成一致。**GRUB 定义了一个相当普遍的标准，即 Multiboot，但您可以自行开发。归结起来，您需要选择一种文件格式和位置，在内核代码执行之前，您的内核和相关元数据的所有部分最终都在内存中。通常将 ELF 格式与 multiboot 一起使用，该格式在其标头中包含该信息

2.  **编译器必须能够创建与平台相关的二进制代码。**典型的 PC 以 16 位模式启动，之后 BIOS 或引导加载程序可能经常决定更改它。通常，如果您使用 GRUB legacy，Multiboot 标准会根据其合同将您置于 32 位模式。如果你在 64 位 linux 上使用默认编译器设置，你最终会得到错误架构的代码（恰好足够相似，你可能会得到*看起来像*你想要的结果）。编译器还喜欢重命名部分或包含特定于平台的机制和安全功能，例如堆栈探测或金丝雀。尤其是 Windows 上的编译器倾向于注入特定于主机的代码，这些代码在没有 Windows 的情况下运行时当然会中断。提供的示例故意使用单独的编译器来防止此类问题的各种问题。这些

3.  **链接器必须能够以创建符合引导加载程序合同的输出所需的方式组合代码。**链接器具有生成二进制文件的默认方式，通常它根本不是您想要的。在几乎所有情况下，为此任务选择 gnu ld 意味着您需要编写一个链接描述文件，将所有部分放在您想要的位置。省略的部分将导致数据丢失，错误位置的部分可能会使映像无法启动。假设您有 gnu ld，除了您选择的十六进制编辑器之外，您还可以使用捆绑的 nm 和 objdump 工具来告诉您输出二进制文件中出现的位置，并使用它检查您是否一直遵守合同为你设置。

这种基本类型的问题最终会追溯到不遵循上述一个或多个步骤。使用此答案顶部的参考并查找差异。

# c# - SQL 查询从 Table1 和 Table2 中获取匹配记录，如果存在数据，则自定义列显示 1/0

> ID：11305084
> 
> 赞同：1
> 
> 时间：2012-07-03T05:39:18.850
> 
> 标签：c#, sql, sql-server-2008, join

我有几个与多语言照片库相关的表格，例如

*   专辑类别
*   专辑名称
*   相片
*   照片详情

两个表的示例表结构。我实际上想要一个结果集，它将显示表中所有记录的列表，以及一个自定义列，该列将显示或基于表中是否存在特定`Photos`的PhotoID`AlbumID``TRUE``FALSE``PhotoDetails`

```
 Table: Photos
    PhotoID PhotoFile   AlbumID
    1       Photo1.jpg  7
    2       Photo2.jpg  7
    3       Photo3.jpg  5
    4       Photo4.jpg  5
    5       Photo5.jpg  7
    6       Photo6.jpg  7

Table: PhotoDetails
PDID        PhotoID     PDTitle     AlbumID     LanguageID
11      1       Photo 1     7       1
22      2       Photo 2     7       1
33      3       Photo 3     5       1
44      4       Photo 4     5       1

    DESIRED OUT PUT
    PhotoID PDTitle     AlbumID     DetailPresent
    1       Photo1      7       TRUE
    2       Photo2      7       TRUE
    5       Photo5      7       FALSE
    6       Photo6      7       FALSE 
```

我尝试了几个基于 JOIN 的查询，但无法获得所需的结果

```
SELECT pd.PhotoTitle, p.PhotoTN,p.PhotoCreatedOn, pd.AlbumID, ISNULL(p.PhotoID,NULL) AS Missing FROM AlbumPhotos p 
  JOIN AlbumPhotoDetails pd
  ON p.PhotoID = pd.PhotoID WHERE pd.AlbumID = 16 
```

这个查询给了我同样的结果

```
 SELECT pd.PhotoTitle, p.PhotoTN,p.PhotoCreatedOn, pd.AlbumID, ISNULL(p.PhotoID,NULL) AS Missing FROM AlbumPhotos p 
  JOIN AlbumPhotoDetails pd
  ON p.PhotoID = pd.PhotoID WHERE pd.AlbumID = 16 
  OR  p.PhotoID  IN (SELECT PhotoID FROM AlbumPhotoDetails WHERE LanguageID = 1 AND AlbumID = 16) 
```

上面的查询让我得到基于`PhotoID`. 我迷失了如何实际达到预期的结果，如上面的示例“DESIRED OUT PUT”所示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T05:54:45.850

使用左外连接。

您显示的表格示例没有任何意义，因为没有字段可以连接它们，并且`PDTitle`示例数据中不存在您希望在结果中出现的值。

假设表中有一个`PhotoId`字段`PhotoDetails`（就像`AlbumPhotoDetails`您在显示的查询中使用的表中一样），并且该`PhotoDetails`表包含您希望在结果中出现的标题，您可以这样做：

```
select
  p.PhotoId, d.PDTitle, p.AlbumId,
  case when d.PhotoId is null then 'FALSE' else 'TRUE' end
from Photos p
left join PhotoDetails d on d.PhotoId = p.PhotoId
where p.AlbumId = 7 
```

请注意，如果表中没有相应记录，则标题将为空`PhotoDetails`。

# amazon-ec2 - 使用关机终止 Amazon EC2 实例

> ID：11305085
> 
> 赞同：5
> 
> 时间：2012-07-03T05:39:37.773
> 
> 标签：amazon-ec2, amazon-web-services, shutdown

**我可以使用 API 命令ec2-terminate-instances**终止 Amazon EC2 实例，但我试图在登录 EC2 实例本身时找出如何执行此操作。

我**现在尝试过 shutdown -h**但这只会“停止”实例，而不会完全终止它。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T12:51:02.807

您可以在创建实例时设置一个选项，该选项将允许实例在关闭时终止。

如果您使用的是 ec2 命令行工具，请添加以下选项：`--instance-initiated-shutdown-behavior terminate`

使用该选项创建实例后，`shutdown -h now`从实例中发出命令将终止它而不是停止它。

# iphone - 应用程序将背景更改为前景时不显示 UIViewAnimations

> ID：11305093
> 
> 赞同：1
> 
> 时间：2012-07-03T05:41:02.287
> 
> 标签：iphone, objective-c

我可以使用以下代码暂停和恢复 UIViewAnimations

暂停：

```
CFTimeInterval paused_time = [layer convertTime:CACurrentMediaTime() fromLayer:nil];
layer.speed = 0.0;
layer.timeOffset = paused_time; 
```

恢复：

```
CFTimeInterval paused_time = [layer timeOffset];
layer.speed = 1.0f;
layer.timeOffset = 0.0f;
layer.beginTime = 0.0f;
CFTimeInterval time_since_pause = [layer convertTime:CACurrentMediaTime() fromLayer:nil] - paused_time;
layer.beginTime = time_since_pause; 
```

但是当应用程序进入后台时暂停动画后，再次进入前台，这些动画不会显示在视图中。我正在为 UIViewAnimations 使用 UIImageView。

# json - 使用 Zend 框架的漂亮、整洁的 JSON 输出？

> ID：11305094
> 
> 赞同：0
> 
> 时间：2012-07-03T05:41:04.717
> 
> 标签：json, zend-framework, helper, formatting

我正在为 JSON 使用 Zend Framework 助手。我使用创建的方法 toArray() 从域实体返回数据数组。

有没有办法将格式从整洁更改为漂亮？

PHP

```
$data = array(
            "success"=>true,
            "user"=>array($user->toArray())
            );
$this->_helper->json($data); 
```

身体反应：

```
{"success":true,"user":[{"id":9,"displayName":"joey","firstName":"joe","lastName":"blow","email":"joeblow@yahoo.com","role":"user"}]} 
```

到：

```
{
  "success":true,
  "user": [{
     "id":9, 
     "displayName":"joey",
     "firstName":"joe",
     "lastName":"blow",
     "email":"joeblow@yahoo.com",
     "role":"user"
  }]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:43:33.037

它未经测试，将取决于您的一些 json 实现，但您可以尝试：

```
$json = Zend_Json::encode($data);
$json = Zend_Json::prettyPrint($json);

$this->_helper->json($json, true, array('encodeData' => false)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:56:52.803

试试这个 ：

```
$json = Zend_Json::encode($phpNative);
echo Zend_Json::prettyPrint($json, array("indent" => " ")); 
```

链接： http: [//framework.zend.com/manual/en/zend.json.basics.html](http://framework.zend.com/manual/en/zend.json.basics.html)

# html - 文本 - IE 8 中的空文本节点问题

> ID：11305095
> 
> 赞同：0
> 
> 时间：2012-07-03T05:41:12.923
> 
> 标签：html, internet-explorer, internet-explorer-8

我正在使用 IE8 浏览器。`<input /><span><textarea>`它在like this 标签之后创建一个空文本节点。
我找不到如何纠正这个问题。谁能告诉我解决这个问题..？
**代码 ：-**

```
 <form id="addNewsForm" action="/addNews.php" method="post" enctype="multipart/form-data">
            <label>Title : </label>
            <input type="text" class="addNewsTitle" name="addNewsTitle" />
            <label>Content : </label>
            <textarea rows="10" cols="35" name="addNewsCnt" class="addNewsCnt"></textarea>
            <label>Category : </label>
            <select>
                <option>world</option>
                <option>important</option>
                <option>common</option>
                <option>tamilnadu</option>
                <option>lifestyle</option>
            </select>
            <input type="button" name="noimage" class="newsImgAdd" value="ADD IMAGE" /> 
            <input type="file" name="file" class="addNewsImg" />
            <input type="submit" class="submit addNewsSubmit" value="SUBMIT" />
            <iframe id="addNewsFrame" name="addNewsFrame"></iframe>
        </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:00:51.150

IE8 显示空文本节点，因为有时它将两个元素之间的空间视为空文本节点。

您需要删除字段之间的空格。

小提琴 - [http://jsfiddle.net/uTDWD/1/](http://jsfiddle.net/uTDWD/1/)

# algorithm - 具有可变杆数的河内塔的通用解决方案？

> ID：11305098
> 
> 赞同：3
> 
> 时间：2012-07-03T05:41:28.053
> 
> 标签：algorithm, optimization, puzzle

给定 D 圆盘、P 极点和圆盘的初始起始位置，以及极点所需的最终目的地，我们如何编写该问题的通用解决方案？

例如，

给定 D=6 和 P=4，初始起始位置如下所示：

```
5     1
6 2 4 3 
```

其中数字代表圆盘的半径，极点从左到右编号为 1-4，我们要将所有圆盘堆叠在极点 1 上。

**我们如何选择下一步行动？**

解决方案是（手工制定）：

```
3 1
4 3
4 1
2 1
3 1 
```

（格式`<from-pole> <to-pole>`：）

第一步很明显，将“4”移动到“5”之上，因为这是最终解决方案中所需的位置。

接下来，我们可能想要移动下一个最大的数字，即“3”。但首先我们必须把它拆开，这意味着我们接下来应该移动“1”。但是我们如何决定把它放在哪里呢？

这就是我所得到的。我可以编写一个递归算法来尝试所有可能的地方，但我不确定这是否是最优的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T05:54:55.800

我们不能。

更准确地说，正如[http://en.wikipedia.org/wiki/Tower_of_Hanoi#Four_pegs_and_beyond](http://en.wikipedia.org/wiki/Tower_of_Hanoi#Four_pegs_and_beyond)所说，对于 4 个以上的钉子，证明最佳解决方案是一个开放的问题。有一种已知的非常好的算法，被广泛认为是最优的，适用于简单的情况，即一堆磁盘位于一个钉子上，而您想将整个堆转移到另一个钉子上。但是，对于任意起始位置，我们没有算法，甚至没有已知的启发式算法。

如果我们确实提出了算法，那么开放问题可能会容易得多。

# actionscript-3 - Box2D/AS3 动态平台只反弹其他动态对象

> ID：11305100
> 
> 赞同：0
> 
> 时间：2012-07-03T05:41:48.437
> 
> 标签：actionscript-3, flash, box2d, flashdevelop

我有一个由键盘移动的动态平台。想想破砖游戏。我希望它反映撞击它的其他动态对象，但我不希望它被撞得到处都是。我怎么做？

感谢帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:08:25.040

您可以使平台成为运动体。在创建之前在body定义中设置类型为b2_kinematicBody，或者在创建之后执行body->SetType(b2_kinematicBody)。

Kinematic body 不响应力或冲量，因此您需要使用 SetLinearVelocity 来移动它。它们也不会与静态物体发生碰撞，因此如果您在游戏区域的一侧有静态物体墙，平台将能够直接穿过它们 - 您必须在每次步骤中检查位置以查看是否平台应该停止。

# wpf - 如何将 ViewModel 的属性绑定到 Treeview 的 HierarchicalDataTemplate 中的元素？

> ID：11305106
> 
> 赞同：0
> 
> 时间：2012-07-03T05:42:11.980
> 
> 标签：wpf, mvvm, binding, user-controls, hierarchicaldatatemplate

如何将 ViewModel 的属性绑定到 a 中的元素`HierarchicalDataTemplate`（`Treeview`该属性不在`HierarchicalDataTemplate.Itemsource`）

这是示例，问题在此行中：`Visibility="{Binding IsCheckBoxVisible , RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=UserControl}, Converter={StaticResource debuger}}"/>`

```
<UserControl ....>
<Grid>
    <TreeView ItemsSource="{Binding Roots}" Grid.Row="0">
        <TreeView.ItemContainerStyle>
        </TreeView.ItemContainerStyle>
        <TreeView.ItemTemplate >
            <HierarchicalDataTemplate ItemsSource="{Binding ConfigedChildren}">
                <StackPanel Orientation="Horizontal" >
                    <CheckBox IsChecked="{Binding IsChecked}" Visibility="{Binding IsCheckBoxVisible, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=UserControl}, Converter={StaticResource debuger}}"/>
                    <Label Content="{Binding Title}"/>
                </StackPanel>
            </HierarchicalDataTemplate>
        </TreeView.ItemTemplate>
    </TreeView>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:22:10.033

```
<CheckBox IsChecked="{Binding IsChecked}" Visibility="{Binding DataContext.IsCheckBoxVisible, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=UserControl}, Converter={StaticResource debuger}}"/> 
```

使用`DataContext.IsCheckBoxVisible`. 希望这会奏效

# sql - 需要 SQL Server SSIS 和 SSRS 功能

> ID：11305108
> 
> 赞同：0
> 
> 时间：2012-07-03T05:42:19.477
> 
> 标签：sql, sql-server-2008

我想使用 ssis 和 ssrs 我应该下载哪个版本的 sql server 2008 r2？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:37:46.167

完整安装的 SQL Server 2008 R2 Developer Edition 版本 10 包括 SSRS 和 SSIS

# visual-c++ - 无法挂钩 NtCreateFile

> ID：11305110
> 
> 赞同：0
> 
> 时间：2012-07-03T05:42:27.850
> 
> 标签：visual-c++, api-hook

我挂钩到 NtCreateFile 函数，但我不是因为一些错误。我的代码如下。我遇到两个错误，即 1）未解析的外部符号 _NtCreateFile 和 2）1 未解析的外部。请帮我 。

```
#include "stdafx.h"
#include "MinHook.h"
#include <Winternl.h>

#if defined _M_X64
#pragma comment(lib, "libMinHook.x64.lib")
#elif defined _M_IX86
#pragma comment(lib, "libMinHook.x86.lib")
#endif

typedef NTSTATUS(WINAPI *NtCreateFileNext)(PHANDLE FileHandle,ACCESS_MASK    DesiredAccess,POBJECT_ATTRIBUTES ObjectAttributes,
                                    PIO_STATUS_BLOCK IoStatusBlock,PLARGE_INTEGER AllocationSize,ULONG FileAttributes,
                                    ULONG ShareAccess,ULONG CreateDisposition,ULONG CreateOptions,PVOID EaBuffer,ULONG EaLength);

NtCreateFileNext Real_NtCreateFileData = NULL;

NTSTATUS WINAPI NtCreateFileCallback(PHANDLE FileHandle,ACCESS_MASK DesiredAccess,POBJECT_ATTRIBUTES ObjectAttributes,
                                    PIO_STATUS_BLOCK IoStatusBlock,PLARGE_INTEGER AllocationSize,ULONG FileAttributes,
                                    ULONG ShareAccess,ULONG CreateDisposition,ULONG CreateOptions,PVOID EaBuffer,ULONG EaLength)
{

 MessageBoxA(NULL,"NtCreateFile Called","Info",MB_OK);
 return(FileHandle, DesiredAccess, ObjectAttributes,IoStatusBlock, AllocationSize, FileAttributes,
        ShareAccess, CreateDisposition, CreateOptions, EaBuffer, EaLength);
}

BOOL APIENTRY DllMain(HMODULE hModule,DWORD  ul_reason_for_call,LPVOID lpReserved)
{
switch (ul_reason_for_call)
{
case DLL_PROCESS_ATTACH:
                        if (MH_CreateHook(&NtCreateFile, &NtCreateFileCallback, reinterpret_cast<void**>(&Real_NtCreateFileData)) != MH_OK)
                        {
                            MessageBoxW(NULL,L"Failed CreateHook NtCreateFile",L"Info!",MB_ICONWARNING|MB_OK);
                        }
                        if (MH_EnableHook(&NtCreateFile) != MH_OK)
                        {
                            MessageBoxW(NULL,L"Failed EnableHook NtCreateFile",L"Info!",MB_ICONWARNING|MB_OK);
                        }
                        break;

case DLL_PROCESS_DETACH:
                        if (MH_Uninitialize() != MH_OK)
                        {               
                        }
                        if (MH_DisableHook(&NtCreateFile) != MH_OK)
                        {
                        }
                        break;
}
return TRUE;
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:07:31.673

Kantesh：您需要获取 Windows 驱动程序套件并将 NtDll.lib 作为附加依赖项包含在链接器/输入属性页面中。HTH 的

# cakephp - 在 cakephp 中动态添加虚拟字段

> ID：11305111
> 
> 赞同：0
> 
> 时间：2012-07-03T05:42:31.727
> 
> 标签：cakephp, cakephp-2.1

我正在使用 CakePHP 2.1.3；我想在控制器中动态创建一个虚拟字段。可能吗？问题是当我试图在表中找到最大值时，它会从模型数组中给我另一个数组。请询问您是否需要更多信息。

当我尝试执行以下查询时，

```
$find_max_case_count = $this->CaseMaster->find('first', array(
    'conditions' => array(
        'CaseMaster.CLIENT_ID' => $client_id,
        'CaseMaster.CASE_NO LIKE' => '%-%'
    ),
    'fields' => array('max(CaseMaster.CASE_NO) AS MAX_NO')
)); 
```

它给了我一个像这样的数组：

```
[0]=> array([MAX_NO]=> 52) 
```

但是我希望它像：

```
[CaseMaster] => array([MAX_NO] => 52) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T06:34:38.723

我找到了解决方案。我可以在运行时创建虚拟字段。代码应如下所示：

```
$this->CaseMaster->virtualFields['MAX_NO'] = 0; 
```

将其写在查找查询的上方，查询将保持与编写时相同。 [此链接](http://book.cakephp.org/2.0/en/models/virtual-fields.html#virtual-fields-in-sql-queries)有助于找出解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T07:33:59.030

没有办法（据我所知）“即时”创建虚拟字段。虚拟字段是“[任意 SQL 表达式](http://book.cakephp.org/2.0/en/models/virtual-fields.html)”，它将在查找通过模型时执行，并且“将在模型的键下与其他模型字段一起被索引”。

“动态创建的虚拟字段”需要做什么？如果您解释您究竟需要完成什么，也许我们可以提供不同的（甚至更合适的？:)）解决方案？我个人很乐意为您提供帮助。

在你编辑你的问题后，我可以说你得到的是数组应该返回的方式，这是因为 fields 参数。如果您想从中获得不同的结构，我建议应用回调来格式化它。首先将方法移入`CaseMaster Model`：

```
public function getMaxCaseCount($client_id){
$data = $this->find('first', array(
                   'conditions' => array(
                                   'CaseMaster.CLIENT_ID' => $client_id,  
                                   'CaseMaster.CASE_NO LIKE' => '%-%'),
                   'fields' => array('max(CaseMaster.CASE_NO) AS MAX_NO')));
return array_map(array('CaseMaster', '__filterMaxCaseCount'), $data);
}

private function __filterMaxCaseCount($input){
    //This is just an example formatting
    //You can do whatever you would like here.
    $output['CaseMaster'] = $input[0];
    return $output;
} 
```

[array_map](http://php.net/manual/en/function.array-map.php)函数将应用回调`__filterMaxCaseCount`方法，以便在您调用时：

```
$this->CaseMaster->getMaxCaseCount($client_id); 
```

从您的控制器中，您将以您需要的方式获取数据。[array_map](http://php.net/manual/en/function.array-map.php)函数也可能如下所示：

```
return array_map(array($this, '__filterMaxCaseCount'), $data); 
```

因为你们在同一个班级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-17T18:22:09.280

只需将模型别名添加到字段定义也适用于此目的

```
'fields' => array('max(CaseMaster.CASE_NO) AS CaseMaster__MAX_NO') 
```

# javascript - jqplot纵轴标签

> ID：11305112
> 
> 赞同：5
> 
> 时间：2012-07-03T05:42:42.173
> 
> 标签：javascript, jquery, jqplot

一个非常简单的问题，但我无法弄清楚...我尝试使用 jqplot 生成带有垂直 y 轴标签的线图。根据[jqplot 网站](http://www.jqplot.com/tests/axisLabelTests.php)的例子，我只需要使用这个插件`jqplot.canvasAxisLabelRenderer.min.js`。我在本地尝试过，但没有奏效。任何人都可以给我一个提示吗？这是我的问题的[演示](http://jsfiddle.net/godhong/JWhmQ/245/)。

下面是我的代码：

```
$(document).ready(function(){
        $.jqplot.config.enablePlugins = true;
        var s1 = $.parseJSON($('#x_indi_val').text());    
        $.jqplot('chart1', [s1], {                
            seriesDefaults: { 
               showMarker:false,
               pointLabels: { show:false } ,
            },                
            series:[
               {label:'Individuals'}
            ],
            axes: {
                xaxis: {
                   label :'Time units',
                   pad: 0,
                },
                yaxis: {
                    label: 'Number of individuals',
                    //jqplot example indicated that use the following js file can give you a vertical label, I tried locally, but it did not work
                    //renderer: $.jqplot.canvasAxisLabelRenderer
                }
            },
            legend: {
                show: true,
                location: 'ne',
                placement: 'inside',
                fontSize: '11px'
            } 
        });   
    })​; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T11:49:14.040

正如提供的演示示例中所观察到的，您的代码中有一些小而重要的问题：

1.  您忘记导入标签渲染器所需的两个脚本：

    `<script type="text/javascript" src="../src/plugins/jqplot.canvasTextRenderer.min.js"></script>`

    `<script type="text/javascript" src="../src/plugins/jqplot.canvasAxisLabelRenderer.min.js"></script>`

2.  您正在设置轴的渲染器而不是轴的标签渲染器：

    `labelRenderer: $.jqplot.CanvasAxisLabelRenderer`

[请查看带有更正示例的代码。](http://jsfiddle.net/Boro/JWhmQ/250/)

# java - Portlet 阻止 jsp 页面

> ID：11305114
> 
> 赞同：0
> 
> 时间：2012-07-03T05:42:54.837
> 
> 标签：java, portlet

我有一个关于 portlet 的问题。当我在`portlet.xml`标准行中写

```
<portlet-class>com.liferay.util.bridges.mvc.MVCPortlet</portlet-class> 
```

我的jsp页面工作正常。但是当我添加我的 portlet 类时

```
<portlet-class>test.uploadport</portlet-class> 
```

jsp页面中的java代码不执行。我不是在谈论我在`view.jsp`谈论从 调用的页面`view.jsp`。

我认为来自 portlet 的 doView() 有问题

上传端口.java

```
package test;

import java.io.*;
import java.util.Iterator;
import java.util.List;

import javax.portlet.*;

import org.apache.commons.fileupload.*;
import org.apache.commons.fileupload.disk.*;
import org.apache.commons.fileupload.portlet.*;
import org.apache.commons.fileupload.servlet.*;
import org.apache.commons.fileupload.util.*;
public class uploadport extends GenericPortlet {
private String error;
public void doView(RenderRequest req, RenderResponse res)
throws IOException, PortletException
{
 WindowState state = req.getWindowState();
 res.setContentType("text/html");
 PortletSession session = req.getPortletSession(true);
 PortletContext context = getPortletContext();
 PortletRequestDispatcher rd;
 rd = context.getRequestDispatcher("/view.jsp");
 rd.include(req, res);

}
public void processAction(ActionRequest req, ActionResponse res)
throws IOException, PortletException
{
System.out.println("VASAY - PIROZJOK");
    PortletSession session = req.getPortletSession(true);
    DiskFileItemFactory diskFileItemFactory = new DiskFileItemFactory();
    PortletFileUpload portletFileUpload = new PortletFileUpload(diskFileItemFactory);
    List<FileItem> list=null;
    String mifpath= "1";
    String path = " ";
    String mif = " ";
    String from = "\\\\";
    String to ="/";
    String error="";
    try{
        list = portletFileUpload.parseRequest(req);
        Iterator<FileItem> it = list.iterator();
        //response.setContentType("text/html");
       while ( it.hasNext() ) 
       {

          FileItem item = (FileItem) it.next();
          File disk = new File("C:/uploaded_files/"+item.getName());

    path = disk.toString();

    String code = new String(path.substring(path.lastIndexOf("."), path.length()).getBytes("ISO-8859-1"),"utf-8");
    if (code.equalsIgnoreCase(".zip"))
    {
        System.out.println("PIROZJOK");
        mifpath=path;
        mif = mifpath.replaceAll(from, to);
        item.write(disk);
        error=unzip.unpack(mif, "C:/uploaded_files");
    }
    else
    {
        error = "Выбранный файл не является архивом zip";

    }
  }
}
 catch ( Exception e ) {
 log( "Upload Error" , e);
} 

}
 private void log(String string, Exception e)
   {
// TODO Auto-generated method stub

}
} 
```

为什么它正在发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:32:21.397

这个问题特别解决了。1.不需要
使用2.从portlet 中 删除`MVC portlet``Generic Portlet`
`doView()`

就这些。但是还有其他问题。
1.`MVC portlet`不是最佳选择。
2.如何在`view.jsp`没有的情况下将参数发送到portlet `doView()`？

# c - _tcstok (strtok) 跳到一个令牌上？

> ID：11305116
> 
> 赞同：0
> 
> 时间：2012-07-03T05:43:03.233
> 
> 标签：c, windows, winapi

这是我的代码：

```
#include <stdio.h>
#include <string.h>
#include <windows.h>
#include <tchar.h>

#define MAX_KEY_LENGTH 6

void CheckForUIMatch(TCHAR *ui, TCHAR *UIToFind, TCHAR *UIFound);

int _tmain(int argc, LPTSTR argv[])
{
    TCHAR UIToFind[24] = _T("hi***;en-US; ");
    TCHAR UIFound[24] = _T("");

    LPCTSTR placeToLook = _T("SYSTEM\\CurrentControlSet\\Control\\MUI\\UILanguages");

    HKEY UIKey;
    DWORD subkeyCounter = 0;
    TCHAR subkeyName[MAX_KEY_LENGTH];
    DWORD subkeyLength;
    DWORD subkeyAmount = 0;

    if(RegOpenKeyEx(HKEY_LOCAL_MACHINE, placeToLook , 0, KEY_READ, &UIKey) == ERROR_SUCCESS) {

            RegQueryInfoKey(UIKey, NULL, NULL, NULL, &subkeyAmount, NULL, NULL, NULL, NULL, NULL, NULL, NULL); // Get the length of the longest subkey. 

            for (subkeyCounter = 0; subkeyCounter < subkeyAmount; subkeyCounter++) {
                subkeyLength = MAX_KEY_LENGTH;
                RegEnumKeyEx(UIKey,
                        subkeyCounter,
                        subkeyName,
                        &subkeyLength,
                        NULL,
                        NULL,
                        NULL,
                        NULL);
                CheckForUIMatch(subkeyName, UIToFind, UIFound);

            }
    } else {
        _tprintf(L"Faild to open the registry key!");
    }

    _tprintf(_T("Match: %s"), UIFound);

    return 0;
}

void CheckForUIMatch(TCHAR *ui, TCHAR *UIToFind, TCHAR *UIFound)
{
    int charToMatch;
    TCHAR* token = _tcstok(UIToFind, L";");
    while(token != NULL) {
        /* Check for exact match or general match */
        if ((token[_tcslen(token)-2] == '*') && (token[_tcslen(token)-1] == '*')) { // make general lang match
            charToMatch = 2;    
        } else {
            charToMatch = 5; // make exact lang match
        }

        _tprintf(L"\ntoken: %s, to match %d.\n", token, charToMatch); //Debug
        if(!_tcsncmp(token, ui, charToMatch)) {
            _tcsncat(UIFound, ui, charToMatch);
            _tcscat(UIFound, _T(";"));
        }
        token = _tcstok(NULL, L";");

    }
} 
```

问题：

CheckForUIMatch 上的 while 循环似乎只工作一次，但在第二次运行循环时（例如，当在注册表中找到多个 UI 时），它仅在其中一个令牌上循环（例如嗨***）而不是在第二个，一旦它结束循环并需要获取第二个令牌，我可以在调试器中看到它得到 BatPointer 而不是第二个令牌。

如果我将 UIToFind TCHAR 直接放在 CheckForUIMatch 函数中，一切正常，我不知道为什么？有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:43:08.867

`strtok`就地修改搜索字符串以分隔子字符串。您的搜索字符串会随着您的调用而演变`strtok`：

```
"hi***;en-US; "
"hi***\0en-US; "
"hi***\0en-US\0 " 
```

当您尝试在对 的第二轮调用中重用此字符串时`strtok`，该函数会看到，`"hi***"`因为第一次调用`'\0'`终止了该字符串。

不要每次都拆分字符串，而是拆分一次或将其声明为数组，例如：

```
LPCTSTR UiToFind[] = {_T("hi***"), _T("en-US") }; 
```

# backbone.js - Backbone.js 遍历来自 fetch() 的 JSON 结果

> ID：11305118
> 
> 赞同：0
> 
> 时间：2012-07-03T05:43:10.853
> 
> 标签：backbone.js

我对 Backbone 很陌生，只是想弄清楚事情的工作方式。如何遍历“获取”的结果？

```
(function($) {
    console.log('Formcontainer init.'); 

    var Field = Backbone.Model.extend({
        defaults: {
            id: "0",
            memberlist_id: "3",
            field_name: "sample-field-name",
        },
        initialize: function() {
            console.log('Field model init.');
        }
    });

    var FieldCollection = Backbone.Collection.extend({
        defaults: {
            model: Field
        },
        model: Field,
        url: 'http://localhost:8888/getstuff/3.json',
        initialize: function() {
            console.log('FieldCollection init.');
        }
    });

    var ListView = Backbone.View.extend({
        el: '#app-container',

        initialize: function() {
            _.bindAll(this,"render");
            console.log('ListView init.')
            this.counter = 0;

            this.collection = new FieldCollection();
            this.collection.fetch();
            //this.collection.bind('reset', function() { console.log('xxx')});
            //this.collection.fetch();

            this.render();
        },

        events: {
            'click #add': 'addItem'
        },

        render: function() {
            var self = this;
            console.log('Render called.');
        },

        addItem: function() {
            this.counter++;
            this.$("ul").append("<li>hello world" + this.counter + "</li>");
        }
    });

    var listView = new ListView();

})(jQuery); 
```

我在我的 Firebug 控制台中得到了这个：

```
Formcontainer init.
ListView init.
FieldCollection init.
GET http://localhost:8888/getstuff/3.json 200 OK
Render called.
Field model init.
Field model init.
Field model init.
Field model init.
Field model init. 
```

似乎调用了 fetch() - 因为“字段模型初始化”。在控制台中 5 次。但是我该如何输出呢？我想将项目附加到无序列表中。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T05:53:51.210

*将重置*事件绑定到您的*渲染*函数...

```
this.collection.bind('reset', this.render, this); 
```

这会在*获取*完成后触发，因此您可以创建列表...

```
render: function() {
    var self = this;
    console.log('Render called.');
    this.collection.each(function(i,item) {
        this.$el.append("<ul>" + item.get("field_name") + "</ul>");
    });
}, 
```

# vb.net - xorencryption 中没有为类型“char”和“integer”定义运算符“xor”？

> ID：11305127
> 
> 赞同：0
> 
> 时间：2012-07-03T05:44:29.290
> 
> 标签：vb.net

下面给出的是用于加密字符串的程序。我从下面的链接中获取了这段代码并转换为 vb.net。 [http://www.eggheadcafe.com/tutorials/csharp/8b53894c-a889-4914-8c46-122980cc44ae/simple-xor-encryption.aspx](http://www.eggheadcafe.com/tutorials/csharp/8b53894c-a889-4914-8c46-122980cc44ae/simple-xor-encryption.aspx)。这将使用简单的异或加密转换字符串。

```
Namespace SimpleXOREncryption
    Public NotInheritable Class EncryptorDecryptor
        Private Sub New()
        End Sub
        Public Shared key As Integer = 129

        Public Shared Function EncryptDecrypt(ByVal textToEncrypt As String) As String
            Dim inSb As New StringBuilder(textToEncrypt)
            Dim outSb As New StringBuilder(textToEncrypt.Length)
            Dim c As Char
            For i As Integer = 0 To textToEncrypt.Length - 1
                c = inSb(i)
                c = ChrW(c Xor key)
                outSb.Append(c)
            Next
            Return outSb.ToString()
        End Function
    End Class
End Namespace 
```

我收到错误

> “未为类型 'char' 和 'integer' 定义运算符 'xor'”

我在哪里犯错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T06:06:05.843

基本上，VB 不允许[`Xor`](http://msdn.microsoft.com/en-us/library/csw1x2a6.aspx)between `Char`and `Integer`，正如编译器告诉你的那样。C# 编译器会自动`char`升级为`int`，但 VB 编译器不会这样做（至少在这种情况下）。您需要先将字符显式转换为整数：

```
c = ChrW(AscW(c) Xor key) 
```

我*强烈*建议您不要将这种“加密”（又名混淆）用于*任何*生产项目。.NET 内置了大量加密算法——为什么不使用其中的一种呢？注意关于上述方法的警告也并不总是给出有效的 XML 字符。哎呀，由于包含代理对的“一半”等，它可能会产生基本上无效的字符串。您应该对将字符数据视为任意数字的任何事情感到紧张。

# javascript - 使用 Phonegap，我想录制语音，停止录制，然后在 Android 中播放

> ID：11305129
> 
> 赞同：1
> 
> 时间：2012-07-03T05:44:50.440
> 
> 标签：javascript, android, jquery, html, cordova

HTML 文件有 4 个按钮，分别是录制、停止录制声音和播放、停止播放。代码看起来像这样。

```
<!DOCTYPE HTML>
<html>
    <head>
        <title>Cordova</title>
        <script type="text/javascript" charset="utf-8" src="scripts/cordova-1.9.0.js"></script>
        <script type="text/javascript" charset="utf-8" src="scripts/jquery-1.7.2.min.js"></script>

        <script>
            $(document).ready(function(){
                $("#record").on("click", function(){
                    alert("record start");  
                    window.plugins.VoicePlugin.record(function(){alert("yo");}, 
                                                    function(){alert("yol");},
                                                    "voice.3gp");
                });

                $("#stoprecord").on('click', function(){
                    alert("record stop");
                    window.plugins.VoicePlugin.stoprecord(function(){},
                                                        function(){},
                                                        "voice.3pg");
                });

                $("#play").on("click", function(){
                    alert("play");
                    window.plugins.VoicePlugin.play(function(){},
                            function(){},
                            "voice.3pg");
                });

                $("#stopplay").on("click", function(){
                    alert("stop play");
                    window.plugins.VoicePlugin.stopplay(function(){},
                            function(){},
                            "voice.3pg");
                });
            }); 
        </script>
    </head>
    <body>
        <button id="record">Start Recording</button>
        <button id="stoprecord">Stop Recording</button>
        <button id="play">Start Playing</button>
        <button id="stopplay">Stop Playing</button>
    </body>
</html> 
```

Android插件部分是

```
package com.saxoo.voice;

import java.io.IOException;

    import org.apache.cordova.api.Plugin;
    import org.apache.cordova.api.PluginResult;
    import org.json.JSONArray;

    import android.media.MediaPlayer;
    import android.media.MediaRecorder;
    import android.util.Log;

/**
 * @author sbapp008
 *
 */
public class VoicePlugin extends Plugin {

    /* (non-Javadoc)
     * @see org.apache.cordova.api.Plugin#execute(java.lang.String, org.json.JSONArray, java.lang.String)
     */

    public static final String Record = "record";
    public static final String Play = "play";
    public static final String Stopplaying = "stopplaying";
    public static final String Stoprecording = "stoprecording";
    private static final String LOG_TAG = "AudioRecordTest";
    private static String mFileName = null;

    private static MediaRecorder mRecorder = null;
    private static MediaPlayer mPlayer = null;

    @Override
    public PluginResult execute(String action, JSONArray data, String callbackId) {
        PluginResult result = null;

        if(Record.equals(action)){ //data에 filename
            mRecorder = new MediaRecorder();
            mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
            mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
            mRecorder.setOutputFile(mFileName);
            mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);

            try {
                mRecorder.prepare();
            } catch (IOException e) {
                Log.e(LOG_TAG, "prepare() failed");
            }

            mRecorder.start();

        } else if(Play.equals(action)){ //data에 filename 
            mPlayer = new MediaPlayer();

            try {
                mPlayer.setDataSource(mFileName);
                mPlayer.prepare();
                mPlayer.start();
            } catch (IOException e) {
                Log.e(LOG_TAG, "prepare() failed");
            }
        } else if(Stopplaying.equals(action)){
            mPlayer.release();
            mPlayer = null;
        } else{
            mRecorder.stop();
            mRecorder.release();
            mRecorder = null;
        }

        return null;
    }

} 
```

关键是，我应该留在一个记录、停止记录、播放和停止播放声音的活动中。如果我使用phonegap，因为它只是通过插件发送一些字符串，所以每次都会创建和销毁`MediaRecorder`and对象。`MediaPlayer`我按下 html 中的录制按钮，`MediaRecorder`创建了对象，但是按下停止录制按钮无法停止`MediaRecorder`刚刚创建的对象。这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:39:46.010

使用 Phonegap，我无需添加插件即可录制语音并播放录制的语音。我只将 Phonegap Media 的插件连接到我的应用程序，如下所示：

```
app/res/xml/config.xml

<plugin name="Media" value="org.apache.cordova.AudioHandler" />

app/AndroidManifest.xml

<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

那里的代码：

```
<!DOCTYPE html>
<html>
  <head>
  <title></title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
    <meta charset="utf-8">

    <script type="text/javascript" charset="utf-8" src="cordova-2.2.0.js"></script>
    <script type="text/javascript" src="jquery-1.7.2.js"></script>

    <script type="text/javascript">

        var deviceready = false;
        var mediaVar = null;
        var recordFileName = "recording.wav";
        function onBodyLoad()
        {        
            document.addEventListener("deviceready", onDeviceReady, false);
            deviceready = true;
        }

        $(document).ready(function(){

            //validation to check if device is ready is skipped

            $("#recordBtn").click(function(){
                record();                  
            });

            $("#playBtn").click(function(){
                play();
            });

            $("#stopBtn").click(function(){
                stop();
            });
        });

        function record()
        {
        if (mediaVar != null) {
                mediaVar.release();
            }
            createMedia(function(){
                status = "recording";
                mediaVar.startRecord();
            },onStatusChange);
        }

        function createMedia(onMediaCreated, mediaStatusCallback){
            if (mediaVar != null) {
                onMediaCreated();
                return;
            }

            if (typeof mediaStatusCallback == 'undefined') 
                mediaStatusCallback = null;

                mediaVar = new Media(recordFileName, function(){
                    log("Media created successfully");
                }, onError, mediaStatusCallback); 
                onMediaCreated();
        }

        function stop()
        {
            if (mediaVar == null)
                return;

            if (status == 'recording')
            {
                mediaVar.stopRecord();
                log("Recording stopped");
            }
            else if (status == 'playing')
            {
                mediaVar.stop();            
                log("Play stopped");
            } 
            else
            {
                log("Nothing stopped");
            }
            status = 'stopped';
        }

        function play()
        {
            createMedia(function(){
                status = "playing";
            mediaVar = new Media('/sdcard/'+recordFileName, function(){
                    log("Media created successfully");
                }, onError); 

                mediaVar.play();    
            });
        }

        function onStatusChange()
        {
        }

        function onSuccess()
        {
            //do nothing
        }

        function onError(err)
        {
            if (typeof err.message != 'undefined')
                err = err.message;
            alert("Error : " + err);
        }

        function log(message)
        {
            console.info(message);
        }
 </script>
  </head>
  <body onload="onBodyLoad()">
      Recorder<br>
      <input type="button" name="recordBtn" id="recordBtn" value="Record">
      <input type="button" name="stopBtn" id="stopBtn" value="Stop">
      <input type="button" name="playBtn" id="playBtn" value="Play">
  </body>
</html> 
```

在 Android 设备上，PhoneGap 媒体对象具有以下未充分记录的重要行为 ( [http://software.intel.com/en-us/articles/media-sample-using-phonegap#id_android](http://software.intel.com/en-us/articles/media-sample-using-phonegap#id_android) )：

*   “my_audio = new Media('myRecording100.wav', onMediaCallSuccess, onMediaCallError)”：当“myRecording100.wav”不存在时，创建文件；当它存在时，它会打开它。
*   “my_audio.stopRecord()”：当调用“stopRecord()”时，.wav
    媒体文件被移动到“/sdcard”文件夹。因此，在检查之前录制的 .wav 是否存在时，代码应位于“/sdcard”文件夹下。如果确实存在，它应该从
    “/sdcard/myRecording100.wav”打开文件。

希望这对您有所帮助。

# ruby-on-rails - 带有has_many的Rails嵌套表单：通过，不将数据保存到连接表

> ID：11305133
> 
> 赞同：0
> 
> 时间：2012-07-03T05:45:15.777
> 
> 标签：ruby-on-rails

我对 Rails 有点陌生，这是我在 StackOverflow 上的第一篇文章。

假设我有 3 个模型：

```
class Product < ActiveRecord::Base
  default_scope :order => :title
  has_many :line_items
  has_many :promo_products
  has_many :promotions, :through => :promo_products, :foreign_key => :promotion_id
  before_destroy :ensure_not_referenced_by_any_line_item
  before_destroy :ensure_not_referenced_by_any_promo_product

  validates :title, :presence => true, :uniqueness => true
  validates :description, :presence => true
  validates :price, :numericality => {:greater_than_or_equal_to => 0.01}
  private
  def ensure_not_referenced_by_any_line_item
    if line_items.empty?
      return true
    else
      errors.add(:base, 'Line Items present')
      return false
    end
  end
  def ensure_not_referenced_by_any_promo_product
    if promo_products.empty?
      return true
    else
      errors.add(:base, 'Some promotions are still in effect')
      return false
    end
  end
end

class Promotion < ActiveRecord::Base

  CART_OR_PRODUCT = ['Cart', 'Product']
  PROMOTION_TYPE = ['Percentage based', 'Value based']

  has_many :promo_products
  accepts_nested_attributes_for :promo_products
  has_many :products, :through => :promo_products, :foreign_key => :product_id
  accepts_nested_attributes_for :products
  #attr_accessible :promo_products_attributes, :title, :description, :cart_or_product, :promotion_type, :discount, :minimum_price, :minimum_quantity

  validates :title, :description, :presence => true
  validates :cart_or_product, :inclusion => {:in => CART_OR_PRODUCT, :message =>
  "is invlaid. Please select a valid option"}
  validates :promotion_type, :inclusion => {:in => PROMOTION_TYPE, :message =>
  "is invalid. Please select a valid option"}
  validates :discount, :minimum_price, :numericality => {:greater_than_or_equal_to => 0.00}
  validates :minimum_quantity, :numericality => {:greater_than_or_equal_to => 0}

end

class PromoProduct < ActiveRecord::Base

  belongs_to :promotion
  belongs_to :product
  accepts_nested_attributes_for :products
end 
```

在促销新页面中，我想显示可能是促销一部分的产品列表。根据促销的类型，用户可以选择 0、1 或更多产品。

在promotions_controller的新动作中，我是这样构建的：

```
@promotion.promo_products.build.build_product 
```

在促销的_form中，我需要显示产品列表供用户选择。我做了一个嵌套形式，如：

```
<%= form_for(@promotion) do |f| %>
  <!-- other promotion fields -->
  <%= f.fields_for :promo_products do |pp| %>
    <%= pp.fields_for :products do |p| %>
      <div class="field">
        <%= f.label "Products" %><br />
        <%= collection_select :promo_product, :product_id, Product.all, :id, :title {:selected => @promotion.product_ids}, {:multiple => true} %>
      </div>
    <% end %>
  <% end %>
<% end %> 
```

我有2个问题。

1.  首先我的代码抛出一个错误：PromotionsController#new 中的 ArgumentError 没有为名称“产品”找到关联。已经定义了吗？如果我将 PromoProduct 模型中的行更改为：accepts_nested_attributes_for :products 为 accept_nested_attributes_for :product 那么没有错误，一切正常。
2.  数据不会保存到 promo_product 表中。我在 promo_product 控制器中有创建操作：

    ```
    def create
      @promotion = current_promotion
      products = Product.select(:id => params[:product_id])
      products.each do |p|
        promo_product = @promotion.promo_products.build(p)
        promo_product.save
      end
      #@promo_product = PromoProduct.new(params[:promo_product])
      redirect_to promotions_path
    end 
    ```

    我该怎么办？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:10:44.133

1.  You shouldn't put the "accept_nested_attribute_for" in the association table PromoProducts. It should exist in the model that you want to use for creating association to another model. "accept_nested_attribute_for" IIRC simply inserts an "[association]_attributes=" method for your model. For instance, if you add this method to your Product class for Promotion, you will get "promotion_attributes=" method inserted in the Product class. Then a nested form can use this function to create new objects with a hash that represents the model and association.

2.  Base on the above, the create action shouldn't be in PromoProduct controller, instead it should be in Promotion controller.

    ```
    <%= form_for(@promotion) do |f| %>
      <!-- other promotion fields -->
      <%= f.fields_for :products do |pp| %>
        <div class="field">
          <%= f.label "Products" %><br />
          <%= collection_select :promo_product, :product_id, Product.all, :id, :title {:selected => @promotion.product_ids}, {:multiple => true} %>
        </div>
      <% end %>
    <% end %> 
    ```

I don't know without trying if the above collection_select line is correct. But you can debug this by checking the parameter returned by the form to the controller in the server console log. Basically you should see a nested hash of

```
{:promotion => {:products => ...}} 
```

Let me know if you need more help on this. In my solution I used a combination of select_tag and options_from_collection_for_select. (But I don't recall the behavior of all these offhand without looking at the API doc.)

Lastly, do you need the :through model? I *think* since you created the through model you need to handle saving that in your create action. But since you don't have other attributes on the PromoProducts table I wonder if you want to simply leave it as a HABTM association and let rails deal with the rest?

# php - 获取最后插入的值的 ID

> ID：11305137
> 
> 赞同：0
> 
> 时间：2012-07-03T05:45:26.170
> 
> 标签：php, sql

我正在尝试获取数据库中最近添加的值的唯一 ID。我尝试使用 LastInsertID bu 我相信这与 MySQL (http://www.php.net/manual/en/pdo.lastinsertid.php) 不兼容。

```
$sql = "INSERT INTO discussion_links (link_url, link_title, link_source, publish_date, link_side, img_link) VALUES (?, ?, ?, ?, ?, ?)";
$sth=$db->prepare($sql);
$sth->execute(array($_POST['OP_link_url'], $_POST['OP_title'], $_POST['OP_source'], $_POST['OP_pub_date'], $_POST['OP_disc_side'], $_POST['OP_img_url']));
$op_link_id = $sth->$db->lastInsertID(); 
```

在这里我得到错误： PHP Catchable fatal error: Object of class PDO could not be convert to string

我还尝试将最后一行作为：

```
$op_link_id = $sth->fetch(PDO::lastInsertID); 
```

和

```
$temp = $sth->fetch(PDO::FETCH_ASSOC);
$temp_op_link_id = $temp['link_id']; 
```

但没有一个工作（得到一些 SQLState 一般错误 2053）。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T05:48:53.200

`lastInsertID()`应该在 PDO 实例上调用。

```
$op_link_id = $sth->$db->lastInsertID(); 
```

应该

```
$op_link_id = $db->lastInsertID(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T05:49:52.747

试试这个

```
$op_link_id = $db->lastInsertID(); 
```

# javascript - 如何动态插入新的顶栏并将所有原始内容下移？

> ID：11305141
> 
> 赞同：0
> 
> 时间：2012-07-03T05:45:59.447
> 
> 标签：javascript, css

我的目标是 1）使用 JS 小书签在任意站点上加载新的“顶栏”元素；2) 将顶栏固定在顶部；3）将原始内容下推。

是否有一种**可靠**的方法可以使用适用于所有网站的 CSS/JS？

编辑：这是我尝试过的：jQuery.wrapInner() 和 prepend() 首先，将现有的正文内容包装到一个新的 DIV 中，其次，将另一个具有固定位置的新 DIV 插入到顶部。我已经遇到了 jQuery.wrapInner() 重新评估 JavaScript 两次的问题。

我能想到的一种替代方法是通过我的网站代理原始页面并将原始页面作为 iFrame（就像 Digg 一样）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:18:49.643

一种方法是使用 jquery 将原始内容包装在 div 中，然后设置 topbar`position:absolute; top: 20px;` 是否为 20 px 高。我真的想不出这不起作用的情况......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:13:32.870

这不能可靠地完成，因为 JavaScript 在注入主机页面时会重新评估。对于某些主机页面，这无关紧要，对于其他主机页面，它会造成一团糟。现在我明白了为什么要尽可能多地使用 iFrame 方法。

# iphone - 如何指示是否有更多文本可以向下滚动以在 iOS 中使用 UITextView？

> ID：11305144
> 
> 赞同：1
> 
> 时间：2012-07-03T05:46:13.720
> 
> 标签：iphone, xcode, ios5, scroll, uitextview

具体来说，如果有更多文本要向下滚动，我希望图像弹出几秒钟。弹出的图像不是问题，但我看不到如何设置滚动委托并计算出剩下多少文本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T06:00:49.697

设置 UItextview 的委托属性

```
textview.delegate = self;
[textview flashScrollIndicators]; 
```

它将闪烁一个指示器以显示更多可用的文本。

# javascript - 覆盖 js 文件中网络故障的“错误加载页面”

> ID：11305146
> 
> 赞同：4
> 
> 时间：2012-07-03T05:46:39.957
> 
> 标签：javascript, android, jquery-mobile

我有[JQuery Mobile-1.0.js](http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.js)文件。

```
 // Load a page into the DOM.
    $.mobile.loadPage = function (url, options) {
        // This function uses deferred notifications to let callers
        // know when the page is done loading, or if an error has occurred.
        var deferred = $.Deferred(),

        // The default loadPage options with overrides specified by
        // the caller.
            settings = $.extend({}, $.mobile.loadPage.defaults, options),

        // The DOM element for the page after it has been loaded.
            page = null,

        // If the reloadPage option is true, and the page is already
        // in the DOM, dupCachedPage will be set to the page element
        // so that it can be removed after the new version of the
        // page is loaded off the network.
            dupCachedPage = null,

        // determine the current base url
            findBaseWithDefault = function () {
                var closestBase = ($.mobile.activePage && getClosestBaseUrl($.mobile.activePage));
                return closestBase || documentBase.hrefNoHash;
            },

        // The absolute version of the URL passed into the function. This
        // version of the URL may contain dialog/subpage params in it.
            absUrl = path.makeUrlAbsolute(url, findBaseWithDefault());

        // If the caller provided data, and we're using "get" request,
        // append the data to the URL.
        if (settings.data && settings.type === "get") {
            absUrl = path.addSearchParams(absUrl, settings.data);
            settings.data = undefined;
        }

        // If the caller is using a "post" request, reloadPage must be true
        if (settings.data && settings.type === "post") {
            settings.reloadPage = true;
        }

        // The absolute version of the URL minus any dialog/subpage params.
        // In otherwords the real URL of the page to be loaded.
        var fileUrl = path.getFilePath(absUrl),

        // The version of the Url actually stored in the data-url attribute of
        // the page. For embedded pages, it is just the id of the page. For pages
        // within the same domain as the document base, it is the site relative
        // path. For cross-domain pages (Phone Gap only) the entire absolute Url
        // used to load the page.
            dataUrl = path.convertUrlToDataUrl(absUrl);

        // Make sure we have a pageContainer to work with.
        settings.pageContainer = settings.pageContainer || $.mobile.pageContainer;

        // Check to see if the page already exists in the DOM.
        page = settings.pageContainer.children(":jqmData(url='" + dataUrl + "')");

        // If we failed to find the page, check to see if the url is a
        // reference to an embedded page. If so, it may have been dynamically
        // injected by a developer, in which case it would be lacking a data-url
        // attribute and in need of enhancement.
        if (page.length === 0 && dataUrl && !path.isPath(dataUrl)) {
            page = settings.pageContainer.children("#" + dataUrl)
                .attr("data-" + $.mobile.ns + "url", dataUrl);
        }

        // If we failed to find a page in the DOM, check the URL to see if it
        // refers to the first page in the application. If it isn't a reference
        // to the first page and refers to non-existent embedded page, error out.
        if (page.length === 0) {
            if ($.mobile.firstPage && path.isFirstPageUrl(fileUrl)) {
                // Check to make sure our cached-first-page is actually
                // in the DOM. Some user deployed apps are pruning the first
                // page from the DOM for various reasons, we check for this
                // case here because we don't want a first-page with an id
                // falling through to the non-existent embedded page error
                // case. If the first-page is not in the DOM, then we let
                // things fall through to the ajax loading code below so
                // that it gets reloaded.
                if ($.mobile.firstPage.parent().length) {
                    page = $($.mobile.firstPage);
                }
            } else if (path.isEmbeddedPage(fileUrl)) {
                deferred.reject(absUrl, options);
                return deferred.promise();
            }
        }

        // Reset base to the default document base.
        if (base) {
            base.reset();
        }

        // If the page we are interested in is already in the DOM,
        // and the caller did not indicate that we should force a
        // reload of the file, we are done. Otherwise, track the
        // existing page as a duplicated.
        if (page.length) {
            if (!settings.reloadPage) {
                enhancePage(page, settings.role);
                deferred.resolve(absUrl, options, page);
                return deferred.promise();
            }
            dupCachedPage = page;
        }

        var mpc = settings.pageContainer,
            pblEvent = new $.Event("pagebeforeload"),
            triggerData = { url: url, absUrl: absUrl, dataUrl: dataUrl, deferred: deferred, options: settings };

        // Let listeners know we're about to load a page.
        mpc.trigger(pblEvent, triggerData);

        // If the default behavior is prevented, stop here!
        if (pblEvent.isDefaultPrevented()) {
            return deferred.promise();
        }

        if (settings.showLoadMsg) {

            // This configurable timeout allows cached pages a brief delay to load without showing a message
            var loadMsgDelay = setTimeout(function () {
                $.mobile.showPageLoadingMsg();
            }, settings.loadMsgDelay),

            // Shared logic for clearing timeout and removing message.
                hideMsg = function () {

                    // Stop message show timer
                    clearTimeout(loadMsgDelay);

                    // Hide loading message
                    $.mobile.hidePageLoadingMsg();
                };
        }

        if (!($.mobile.allowCrossDomainPages || path.isSameDomain(documentUrl, absUrl))) {
            deferred.reject(absUrl, options);
        } else {
            // Load the new page.
            $.ajax({
                url: fileUrl,
                type: settings.type,
                data: settings.data,
                dataType: "html",
                success: function (html, textStatus, xhr) {
                    //pre-parse html to check for a data-url,
                    //use it as the new fileUrl, base path, etc
                    var all = $("<div></div>"),

                    //page title regexp
                        newPageTitle = html.match(/<title[^>]*>([^<]*)/) && RegExp.$1,

                    // TODO handle dialogs again
                        pageElemRegex = new RegExp("(<[^>]+\\bdata-" + $.mobile.ns + "role=[\"']?page[\"']?[^>]*>)"),
                        dataUrlRegex = new RegExp("\\bdata-" + $.mobile.ns + "url=[\"']?([^\"'>]*)[\"']?");

                    // data-url must be provided for the base tag so resource requests can be directed to the
                    // correct url. loading into a temprorary element makes these requests immediately
                    if (pageElemRegex.test(html)
                            && RegExp.$1
                            && dataUrlRegex.test(RegExp.$1)
                            && RegExp.$1) {
                        url = fileUrl = path.getFilePath(RegExp.$1);
                    }

                    if (base) {
                        base.set(fileUrl);
                    }

                    //workaround to allow scripts to execute when included in page divs
                    all.get(0).innerHTML = html;
                    page = all.find(":jqmData(role='page'), :jqmData(role='dialog')").first();

                    //if page elem couldn't be found, create one and insert the body element's contents
                    if (!page.length) {
                        page = $("<div data-" + $.mobile.ns + "role='page'>" + html.split(/<\/?body[^>]*>/gmi)[1] + "</div>");
                    }

                    if (newPageTitle && !page.jqmData("title")) {
                        if (~newPageTitle.indexOf("&")) {
                            newPageTitle = $("<div>" + newPageTitle + "</div>").text();
                        }
                        page.jqmData("title", newPageTitle);
                    }

                    //rewrite src and href attrs to use a base url
                    if (!$.support.dynamicBaseTag) {
                        var newPath = path.get(fileUrl);
                        page.find("[src], link[href], a[rel='external'], :jqmData(ajax='false'), a[target]").each(function () {
                            var thisAttr = $(this).is('[href]') ? 'href' :
                                    $(this).is('[src]') ? 'src' : 'action',
                                thisUrl = $(this).attr(thisAttr);

                            // XXX_jblas: We need to fix this so that it removes the document
                            //            base URL, and then prepends with the new page URL.
                            //if full path exists and is same, chop it - helps IE out
                            thisUrl = thisUrl.replace(location.protocol + '//' + location.host + location.pathname, '');

                            if (!/^(\w+:|#|\/)/.test(thisUrl)) {
                                $(this).attr(thisAttr, newPath + thisUrl);
                            }
                        });
                    }

                    //append to page and enhance
                    // TODO taging a page with external to make sure that embedded pages aren't removed
                    //      by the various page handling code is bad. Having page handling code in many
                    //      places is bad. Solutions post 1.0
                    page
                        .attr("data-" + $.mobile.ns + "url", path.convertUrlToDataUrl(fileUrl))
                        .attr("data-" + $.mobile.ns + "external-page", true)
                        .appendTo(settings.pageContainer);

                    // wait for page creation to leverage options defined on widget
                    page.one('pagecreate', $.mobile._bindPageRemove);

                    enhancePage(page, settings.role);

                    // Enhancing the page may result in new dialogs/sub pages being inserted
                    // into the DOM. If the original absUrl refers to a sub-page, that is the
                    // real page we are interested in.
                    if (absUrl.indexOf("&" + $.mobile.subPageUrlKey) > -1) {
                        page = settings.pageContainer.children(":jqmData(url='" + dataUrl + "')");
                    }

                    //bind pageHide to removePage after it's hidden, if the page options specify to do so

                    // Remove loading message.
                    if (settings.showLoadMsg) {
                        hideMsg();
                    }

                    // Add the page reference and xhr to our triggerData.
                    triggerData.xhr = xhr;
                    triggerData.textStatus = textStatus;
                    triggerData.page = page;

                    // Let listeners know the page loaded successfully.
                    settings.pageContainer.trigger("pageload", triggerData);

                    deferred.resolve(absUrl, options, page, dupCachedPage);
                },
                error: function (xhr, textStatus, errorThrown) {
                    //set base back to current path
                    if (base) {
                        base.set(path.get());
                    }

                    // Add error info to our triggerData.
                    triggerData.xhr = xhr;
                    triggerData.textStatus = textStatus;
                    triggerData.errorThrown = errorThrown;

                    var plfEvent = new $.Event("pageloadfailed");

                    // Let listeners know the page load failed.
                    settings.pageContainer.trigger(plfEvent, triggerData);

                    // If the default behavior is prevented, stop here!
                    // Note that it is the responsibility of the listener/handler
                    // that called preventDefault(), to resolve/reject the
                    // deferred object within the triggerData.
                    if (plfEvent.isDefaultPrevented()) {
                        return;
                    }

                    // Remove loading message.
                    if (settings.showLoadMsg) {

                        // Remove loading message.
                        hideMsg();

                        //show error message
                        $("<div class='ui-loader ui-overlay-shadow ui-body-e ui-corner-all'><h1>" + $.mobile.pageLoadErrorMessage + "</h1></div>")
                            .css({ "display": "block", "opacity": 0.96, "top": $window.scrollTop() + 100 })
                            .appendTo(settings.pageContainer)
                            .delay(800)
                            .fadeOut(400, function () {
                                $(this).remove();
                            });
                    }

                    deferred.reject(absUrl, options);
                }
            });
        }

        return deferred.promise();
    }; 
```

`"Error Loading Page"`这是用于在页面中显示错误消息的代码。在这里，我想显示网络连接失败的警报消息，`"Please check your net connection"`而不是下图。

![加载页面时出错](../Images/cad162c026852665a10c06c940c7e02f.png)

**注意：我不想更改 pageloaderrormessage。[想要停止获取页面错误消息，而不是像Show Network Error in android](https://stackoverflow.com/questions/11261193/show-network-error-in-android)那样启用我的网络错误条件。如果用户在警报对话框中按下“确定”，我会将它们导航到 Reload.html。**

请告诉我在哪里可以检查该情况以及我必须在哪里更改错误消息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T13:50:33.737

正如@shkschneider 和@codemonkey 都建议您需要在mobileinit 上设置此选项

例子：

```
$(document).bind("mobileinit", function(){
    $.mobile.pageLoadErrorMessage = "Please check your net connection";
}); 
```

链接 jQM 1.0.1 文档：

*   [http://jquerymobile.com/demos/1.0.1/docs/api/globalconfig.html](http://jquerymobile.com/demos/1.0.1/docs/api/globalconfig.html)

这是一个例子：

*   [http://jquerymobile.com/demos/1.0.1/docs/config/pageLoadErrorMessage.html](http://jquerymobile.com/demos/1.0.1/docs/config/pageLoadErrorMessage.html)（点击“或试试这个断开的链接”按钮）

现在，如果您有能力将 jQM 升级到 1.1.1，您可以尝试以下操作：

```
//use theme swatch "b", a custom message, and no spinner
$.mobile.showPageLoadingMsg("b", "Please check your net connection", true);

// hide after delay
setTimeout( $.mobile.hidePageLoadingMsg, 1500 ); 
```

文件：

*   [http://jquerymobile.com/demos/1.1.1/docs/api/methods.html](http://jquerymobile.com/demos/1.1.1/docs/api/methods.html)

更新：

另一个想法是使用插件来实现你想要的东西，这样的东西有用吗？

*   [http://dev.jtsage.com/jQM-SimpleDialog/demos/bool.html](http://dev.jtsage.com/jQM-SimpleDialog/demos/bool.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T09:38:34.887

`pageLoadErrorMessage`按照此处所述设置[http://jquerymobile.com/demos/1.1.1/docs/api/globalconfig.html](http://jquerymobile.com/demos/1.1.1/docs/api/globalconfig.html)

**编辑**

如果您想以自定义方式处理行为，请设置`loadingMessage`为 false。这可以防止显示加载消息。您可以绑定到`pageloadfailed`（此处描述[http://jquerymobile.com/demos/1.1.1/docs/api/events.html](http://jquerymobile.com/demos/1.1.1/docs/api/events.html)）并在事件处理程序中添加自定义处理逻辑。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T09:44:21.930

只需使用：

```
$(document).bind("mobileinit", function(){
  $.mobile.pageLoadErrorMessage("Please check your netconnection");
}); 
```

[http://jquerymobile.com/test/docs/api/globalconfig.html](http://jquerymobile.com/test/docs/api/globalconfig.html)

# php - 在加载时为图像添加边距？

> ID：11305147
> 
> 赞同：0
> 
> 时间：2012-07-03T05:46:54.947
> 
> 标签：php, javascript, html, css

我试图弄清楚如何在“mainImage”中动态插入边距。我要做的是垂直居中图像，它具有动态高度和宽度（以及动态客户端视口）。我不知道如何在从 javascript 加载图像时将边距添加到图像中......

我有以下 HTML：

```
<div id="content">
    <img id="left" onclick="prevImage('images/52/image_','mainImage',52)" src="icons/arrow_left.png" />
    <img id="right" onclick="nextImage('images/52/image_','mainImage',52)" src="icons/arrow_right.png"/>
    <img id="mainImage" src="images/52/image_0.jpg" onload="addMargins()" />
</div> 
```

使用以下 CSS：

```
div#content{
    position: absolute;
    margin-left: 20%;
    margin-right: 5%;
    width: 75%;
    height: 95%;
    text-align: center;
}

div#content img#left{
    position: absolute;
    left: 0;
    top: 50%;
}

div#content img#right{
    position: absolute;
    right: 0;
    top: 50%;
}

div#content img#mainImage{
    max-height: 100%;
    max-width: 95%;
} 
```

和javascript：

```
var key = 1;

function nextImage(thePath, id, max)
{
    if(key == max)
    {
        key = 1;
    }else{
        key++;
    }
    var image = thePath + key + ".jpg";
    document.getElementById(id).src= image;
};

function prevImage(thePath, id, max)
{
    if(key == 1)
    {
        key = max;
    }else{
        key--;
    }
    var image = thePath + key + ".jpg";
    document.getElementById(id).src= image;
}; 
```

所以我的想法是在javascript中做一些基本上说的事情：

```
"var viewport= viewport.height;
var mainImage= mainImage.height;
set marginTop to (viewport-mainImage)/2;
set marginBottom to (viewport-mainImage/2;" 
```

并在每个图像通过“下一个/上一个”按钮加载时执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:00:27.607

我不会说这是最好的方法。你可能想看看在你的css中使用'em's来设置边距而不是内联。em 将确保边距相对于包含元素的大小。

但是，如果您想这样做，那么您就在正确的轨道上。您将需要获取对图像的引用，然后设置样式的 marginTop 属性。

```
 var elem = document.getElementById(id); //reference to image
 elem.style.marginTop = (viewport-mainImage)/2;
 elem.style.marginBottom = (viewport-mainImage)/2; 
```

我不能 100% 确定您的图像是否已经具有高度，因此请告诉我这是否有效。如果没有，我会在有时间的时候检查一下。快乐编码。

# php - 存储表单数据的有效方法？

> ID：11305151
> 
> 赞同：2
> 
> 时间：2012-07-03T05:47:15.103
> 
> 标签：php, mysql, html, css, forms

我有一个具有大而复杂的表单（字段、检查等）的 Web 应用程序。我不得不使用标准的操作系统表单控件，因为它们有视觉（样式）限制。

我基本上一直在使用 ID 创建跨度并附加类或自定义数据属性。稍后我需要将其发送到 PHP 脚本以插入数据库。这在过去运作良好，但我不得不对字段进行大量手动处理，我认为这不是有效的......有没有更好的方法？

我目前做的，

```
IF ($('#foo').hasClass('on')){bar=1} 
```

...

然后我通过手动编写一个 POST 字符串

```
foo=bar&bla=blabla ... 
```

然后在 PHP 端进行更多操作以创建插入 SQL 语句。如果你有几十个字段，这似乎效率低下......但我讨厌标准的 FORM 元素......

有什么建议么？....循环？数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:06:53.203

您应该使用表格。但是如何让它漂亮呢？

使用 JavaScript，您可以拥有一种表单前端。隐藏表单元素并使用一些 JS 在交互时更改表单字段值。

在谷歌中搜索`pretty forms jquery`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:02:23.000

据我了解，您不想手动获取具有“on”类的每个元素的值。您可以使用 jQuery 的 each 函数循环遍历您需要的所有元素。就像是：

```
​var query = "";

$(".on")​​.each(function(i){
    if(i === 0) {  
      query+="?"+$(this).attr('id')+"="+$(this).text();            
    } else {
        query+="&"+$(this).attr('id')+"="+$(this).text();            
    }
}); 
```

（见：http: [//jsfiddle.net/MkbrV/](http://jsfiddle.net/MkbrV/)）

这是你要找的东西吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T06:19:10.953

你可以使用 jQuery 的[serialize()](http://api.jquery.com/serialize/)方法：

```
$('form .on').serialize(); 
```

[jsFiddle 示例](http://jsfiddle.net/teneff/KF3ZB/1/)

# c++ - c ++错误：没有前一个if的else

> ID：11305153
> 
> 赞同：-5
> 
> 时间：2012-07-03T05:47:25.807
> 
> 标签：c++, if-statement, syntax-error

只是制作一个小程序来启动 c++，编译器说有一个没有 if 的 else 来引用 main 中的 while 循环，但显然不是这样，我不明白为什么。如果我删除 while 循环，它工作正常。

```
#include <iostream>
using namespace std;

int number;

int arithmetic(int num)
{
 if(num > 20)
  num = num * 5;
 else 
  num = 0;
 return (num);
}

int main()
{ 
 int wait;
 cout <<  "I will take any number providing it is higher than twenty" << endl;
 cout <<  "and I will multiply it by 5\. I shall then print every number" << endl;
 cout <<  "from that number backwards and say goodbye." << endl; 
 cout <<  "Now please give me your number: " << endl;
 cin >> number;
 int newnum = arithmetic(number);
 if (newnum != 0)
  cout << "Thank you for the number, your new number is" << newnum << endl;
  while(newnum > 0){
   cout << newnum;
   --newnum;
  }
  cout << "bye";
 else
  cout << "The number you entered is not greater than twenty";
 cin >> wait;
 return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T05:50:46.290

你缺少括号。你有

```
if (newnum != 0)
cout << "Thank you for the number, your new number is" << newnum << endl;
while(newnum > 0){
cout << newnum;
--newnum;
 }
cout << "bye";
else
cout << "The number you entered is not greater than twenty"; 
```

而你应该有：

```
if (newnum != 0)
{
   cout << "Thank you for the number, your new number is" << newnum << endl;
   while(newnum > 0){
   cout << newnum;
   --newnum;
   cout << "bye";
}
else
    cout << "The number you entered is not greater than twenty"; 
```

如果 if 语句中有多个操作，则应始终使用括号。如果你只有一个，你也可以省略它们（就像在这个“else”语句中一样）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T05:48:52.593

你需要一个`{`after`if (newnum != 0)`和一个`}`before `else`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T05:50:05.530

这种结构是错误的：

```
if(something)
  line1;
  line2; // this ; disconnects the if from the else
 else 
  // code 
```

你需要类似的东西

```
if ( something ) {
  // more than one line of code 
} else  {
  // more than one line of code
} 
```

# sql - 过滤出包含一个特定条件的唯一列表

> ID：11305154
> 
> 赞同：0
> 
> 时间：2012-07-03T05:47:33.730
> 
> 标签：sql, filter, distinct

我有一张名为“域”的表。A 列（域名）包含各种域名的列表。B列（状态）包含它的“状态”。状态可以是活动、已结束、已阻止、已取消。一个域名可以在 A 列中多次列出，并且不限于只有一种状态。请注意，如果一个域在 A 列中列出了不止一次，并且它的每个实例都具有 Cancelled 状态，则该域的所有出现都应出现在结果中。

我想提取所有“仅”状态已取消的域的列表。他们不能取消状态，也不能取消其他类型的状态。在下面的示例中，它应该只返回 domain5.com。

网站域名

Domain1.com
Domain2.com
Domain1.com
Domain4.com
Domain5.com

地位

活动
结束
取消
阻塞
取消

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:03:26.123

尝试使用以下 sql 查询：

```
select Domainnames  from Domains 
            where Status ='cancelled' AND
            Domainnames  NOT IN (SELECT Domainnames  from Domains where Status <> 'cancelled') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T05:53:02.293

```
SELECT DISTINCT  domainname FROM DomainsTable
WHERE 
Status = 'Canceled' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T05:54:08.830

您可以使用一个`not exists`子句来要求同一域在另一个状态下没有行：

```
select  *
from    Domains d1
where   status = 'cancelled'
        and not exists
        (
        select  *
        from    Domains d2
        where   d1.domainname = d2.domainname
                and d2.status <> 'cancelled'
        ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T06:06:33.453

尝试这个 ：

```
select * from domains d 
where d.status = 'cancelled' and 
( select count(*) from domains where domainnames = d.domainesnames) = 1 ; 
```

如果`count equals to 1`这意味着只有一行`d.domainnames`和即是选择查询中的当前行。

# c# - 正则表达式仅用于数字加上“h”字符

> ID：11305156
> 
> 赞同：1
> 
> 时间：2012-07-03T05:47:39.140
> 
> 标签：c#, regex

只有在字符串中的任何位置包含数字和/或“h”或“H”字符时，我才想验证字符串。

例如

> 123 - 有效
> 123h - 有效
> 1h23 - 有效
> h234 - 有效
> 123H - 有效
> asdf -**无效**
> 123d -**无效**

我只能限制数字的字符串，但不能满足 h 的附加要求。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T05:55:22.730

```
^\d*h?\d*$ 
```

与忽略大小写选项一起使用。

[在 Regexr 上](http://regexr.com?31dv1)查看

`^`锚定到字符串的开头。

`\d*`匹配 0 个或多个数字

`h?`匹配 0 或 1 小时

`\d*`匹配 0 个或多个数字

`$`锚定到字符串的末尾。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T05:49:57.343

`[0-9h]*`将匹配任何数字 0-9 或 h。只允许一个，你可以使用“h” `[0-9]*h?[0-9]*`（我假设你已经在做不区分大小写的操作）。您还可以限制 h 周围的位数，如`[0-9]{1,2}h?[0-9]{1,2}`.

让我们真正忘乎所以，假设您希望允许以分钟的形式输入 0-59，或者以带有分隔“h”的小时和分钟格式输入：

```
[0-9]{1,2}h[0-5]?[0-9]|[0-5]?[0-9] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T05:54:06.897

这应该适合你`/[\dh]*/i`

您的示例在[此处](http://rubular.com/r/yMvpgop5Qd)进行了测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T05:52:19.797

这是有效的正则表达式：

```
^\d*h?H?\d*$ 
```

看这里：[正则表达式示例](http://regexr.com?31dvg)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T06:05:24.297

用这个：

`[^h]*h?[^h]*`

这应该有效。

# httpcontext - httpcontext.current.request 默认返回值，如果没有设置

> ID：11305158
> 
> 赞同：1
> 
> 时间：2012-07-03T05:47:58.093
> 
> 标签：httpcontext, request.querystring

我花了很多时间在我的程序中搜索和测试，但我无法得到任何输出。我正在用 C# 代码隐藏 aspx 进行编码。我正在尝试查询的网址

anUnknownWebsite.aspx?SerialNumber=CND0340482

并使用 httpcontext.current.request["SerialNumber"] 方法获取序列号。

我的程序的一半工作正常，如果在 URL 中设置了序列号，一切工作正常，但我想要一个布尔语句，如下所示：

```
 if(HttpContext.Current.Request["SerialNumber"] == null)
    {
    Do this
    }else
    {
    Do something else
    } 
```

我只想知道该方法是否有默认值或空值来获取布尔值，因为上面的 if 语句不起作用。打开以尝试任何新的想法或理论。

多谢你们

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T05:59:55.780

它应该为空（不是空字符串/默认值），但试试这个......

```
if(HttpContext.Current.Request.QueryString["SerialNumber"] == null) {
    // ...
} 
```

如果您知道*SerialNumber*在查询字符串中，则可以使用*Request.QueryString*，否则您还将检查表单变量、cookie 和服务器变量。

# iphone - 动态调整 UITextView 大小的错误边距行为

> ID：11305159
> 
> 赞同：3
> 
> 时间：2012-07-03T05:48:01.920
> 
> 标签：iphone, ios, cocoa-touch, uikit, uitextview

我需要动态调整 UITextView 的大小，但在多次调整大小后，右边距会惊人地向左延伸，因此在文本视图中显示了一条非常窄的文本，其中有很多空白。这可以通过仅使用 UITextView 和 UISlider 的简单设置来重现。产生此行为的简单示例设置是 UISlider，其值范围为 0-200，宽度为 320 的 UITextView 和以下代码：

```
- (IBAction)sliderValueChanged:(UISlider *)slider {
    textView.frame = CGRectMake(0, 0, 320 - slider.value, 300);
} 
```

我尝试过的一些方法是修改 autoResizingMask、contentMode、contentOffset 和 sizeToFit，但它们都不起作用。如何避免这种奇怪的行为，或者它是一个错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T19:15:53.590

子类`UITextView`和覆盖`layoutSubViews`以设置`frame`为`CGRectZero`然后返回到原始帧大小。它并不优雅，但它有效。

```
-(void) layoutSubviews
{
    CGRect rect = [self frame];
    [self setFrame:CGRectZero];
    [self setFrame:rect];
} 
```

# iphone - 从 iPhone 在 MMS / Facebook 中附加图像。

> ID：11305168
> 
> 赞同：0
> 
> 时间：2012-07-03T05:49:17.957
> 
> 标签：iphone, xcode, image, mms

我很容易找到一种将图片发布到 Twitter 的方法，并在下面发送电子邮件.. 但我仍然找不到 MMS 的解决方案，这里的所有搜索都说这是不可能的，但这些帖子已经有一年多了..如果有人知道请帮忙..

**推文图片**

```
-(IBAction)tweetpicture...{
    TWTweetComposeViewController *twitter = [[TWTweetComposeViewController alloc] init];
    [twitter setInitialText:@""];
    [twitter addImage:tweetimage.image];
    [self presentViewController:twitter animated:YES completion:nil]; 
    [self dismissModalViewControllerAnimated:YES];
} 
```

**电子邮件图片**

```
-(IBAction)mailpicture....{
    MFMailComposeViewController *mailComposer = [[MFMailComposeViewController alloc] init];
    [mailComposer setMailComposeDelegate:self];
    if ([MFMailComposeViewController canSendMail]) {
       // [mailComposer setToRecipients:[NSArray arrayWithObjects:@"", nil]];
        [mailComposer setSubject:@""];
        [mailComposer setMessageBody:@"" isHTML:NO];
        [mailComposer setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
        UIImage *xcode = mailimage.image;
        NSData *xcodeData = UIImagePNGRepresentation(xcode);
        [mailComposer addAttachmentData:xcodeData mimeType:@"image/png" fileName:@""];
        [self presentModalViewController:mailComposer animated:YES]; 
        [mailComposer release]; 

    } else { 
        [mailComposer release]; 
    }
} 
```

**彩信图片**

```
-(IBAction)sendviatext...{
    //???
} 
```

**脸书图片**

```
-(IBAction)sendtofacebook...{
    ???
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:15:38.790

首先，您不能从 iOS 中的代码发送彩信，仅支持短信。

和 facebook 我做了类似的事情：

```
Facebook *facebook = [App instance].facebook;

    if ([facebook isSessionValid]) {

        NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                       self.capturedImage.image, @"picture",
                                       @"Some nice caption", @"caption",
                                       nil];

        [facebook requestWithMethodName:@"photos.upload"
                               andParams:params
                           andHttpMethod:@"POST"
                             andDelegate:self];
    } else {
        [facebook authorize:[NSArray arrayWithObjects:@"offline_access", nil]];
    } 
```

# java-me - j2me 应用程序中的一次性密码

> ID：11305183
> 
> 赞同：1
> 
> 时间：2012-07-03T05:51:16.553
> 
> 标签：java-me, midp

我正在开发一个 j2me 应用程序，其中用户只能设置一次密码，并且它应该是整个应用程序生命周期中的密码。

它不是每个用户的密码，它是应用程序的密码，我只需要存储一次。

如何使用数据库设置此密码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:25:09.860

你的数据库会在手机上吗？如果是这样，您可以使用 RecordStore。关于它的一篇好文章是[http://developers.sun.com/mobility/midp/articles/databasemap/](http://developers.sun.com/mobility/midp/articles/databasemap/)

您可以使用简单对象映射来存储您的用户登录名和密码，例如：

```
    类用户{
      私人字符串登录名，密码；

      // ... 构造函数、setter 和 getter

      公共字节[] toByteArray() 抛出 IOException {
        ByteArrayOutputStream 回合 = 新的 ByteArrayOutputStream();
        DataOutputStream dout = new DataOutputStream(bout);

        dout.writeUTF( 登录 );
        dout.writeUTF( 密码 );

        dout.close();

        返回 bout.toByteArray();
      }

      // fromByteArray 方法
    }

```

对于每个新用户，您都向 RecordStore 添加一个新条目，但从不更改或删除 RecordStore 中的内容。

**评论后更新**。

您可以使用另一个简单对象映射来存储您的应用程序密码，例如：

```
    类应用密码{
      私人字符串密码；

      // ... 构造函数、setter 和 getter

      公共字节[] toByteArray() 抛出 IOException {
        ByteArrayOutputStream 回合 = 新的 ByteArrayOutputStream();
        DataOutputStream dout = new DataOutputStream(bout);

        dout.writeUTF( 密码 );

        dout.close();

        返回 bout.toByteArray();
      }

      // fromByteArray 方法
    }

```

仅当刚刚创建记录存储时，您才必须在 RecordStore 中写入返回的字节数组。

# ruby-on-rails-3 - 在rails 3中使用回形针上传图像

> ID：11305186
> 
> 赞同：2
> 
> 时间：2012-07-03T05:51:34.917
> 
> 标签：ruby-on-rails-3

我正在尝试在我的 Rails 应用程序中上传图像。但是，我无法这样做。我对 Rails 比较陌生，在这里我需要一些帮助。

我在这里显示了一个“图片”模型-

```
 class Picture < ActiveRecord::Base

     attr_accessible :photo, :tag

     has_attached_file :photo, :styles => { :medium => "300x300>",
     :large => "1000x1000>",     :thumb => "100x100>" }

 end 
```

我在这里显示了一个“图片”控制器 -

```
 class PicturesController < ApplicationController

    def new
            @picture = Picture.new
    end

    def create
            @picture = Picture.create( params[:picture] )
            if @picture.save
                    flash.now[:success] = "Image Uploaded"
                    redirect_to @picture
            else
                    render 'new'
            end
    end

    def index
    end

    def show
            @picture = Picture.find(params[:id])
            send_data @picture.photo, :type => 'image/png', :disposition => 'inline'
    end

    def imageshow
    end

 end 
```

最后，这些是我的“新”和“展示”观点：

“新的.html.erb”

```
 <h1>Upload an Image</h1>
 <div>
    <%= form_for(@picture, :html => {:multipart => true}) do |f| %>
       <%= f.file_field :photo %>
       <%= f.label :tag %>
       <%= f.text_field :tag %>
       <%= f.submit "Submit", class: "btn btn-large btn-primary" %>
    <% end %>
 </div> 
```

“show.html.erb”

```
 <h1>Displaying Uploaded Image</h1>
 <div>
     <%= image_tag @picture.photo.url %>
     <%= image_tag @picture.photo.url(:large) %>
 </div> 
```

*我能够访问上传页面（即图片控制器中的 new.html.erb）。但是，当我上传图片时，出现以下错误：*

**“此图像“http://10.102.119.20:3000/pictures/12”无法显示，因为它包含错误”**

我的查询是：

1.  图片从哪里上传到服务器？
2.  有什么需要做的配置吗？
3.  我的代码还有其他问题吗？

提前感谢您的帮助..!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T23:01:32.067

Ryan Bates[在他的 Railscasts 中讨论了回形针](http://railscasts.com/episodes/134-paperclip)。一探究竟。它帮助我开始。

# vba - 我无法使用 VBA 解锁 vbaproject

> ID：11305192
> 
> 赞同：1
> 
> 时间：2012-07-03T05:51:58.660
> 
> 标签：vba, excel

下面是我的功能，由于某种原因它不起作用。如果我在最后一个 if 语句中放置一个断点并删除发送“%{F11}”它确实有效。所以我的猜测是“%F11”不起作用。有人有想法吗？

```
Sub UnprotecPassword(wb As Workbook, ByVal projectPassword As String)
    Dim currentActiveWb As Workbook    

    If wb.VBProject.Protection <> vbext_pp_locked Then
        Exit Sub
    End If
    Set currentActiveWb = ActiveWorkbook
    wb.Activate

    SendKeys "%{F11}"
    SendKeys "^r" ' Set focus to Explorer
    SendKeys "{TAB}" ' Tab to locked project
    SendKeys "~" ' Enter
    SendKeys projectPassword
    SendKeys "~" ' Enter

    If (wb.VBProject.Protection = vbext_pp_locked) Then
        MsgBox ("failed to unlock")
    End If
    currentActiveWb.Activate
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T08:19:38.027

为了测试这一点，让我们创建一个名为`Book2.xlsm`.

出于测试目的，将此代码粘贴到 Book2 模块中。

```
Sub Book2Macro()

End Sub 
```

用密码保护它，`a`然后关闭它。这是锁定生效所必需的。

现在创建一个新的工作簿，比如 Book1，并在模块中粘贴此代码。

```
Sub Sample()
    UnprotecPassword Workbooks("Book2.xlsm"), "a"
End Sub

Sub UnprotecPassword(wb As Workbook, ByVal projectPassword As String)
    Dim currentActiveWb As Workbook

    If wb.VBProject.Protection <> 1 Then
        Exit Sub
    End If

    Set currentActiveWb = ActiveWorkbook

    wb.Activate

    SendKeys "%{F11}"
    SendKeys "^r" ' Set focus to Explorer
    SendKeys "{TAB}" ' Tab to locked project
    SendKeys "~" ' Enter
    SendKeys projectPassword
    SendKeys "~" ' Enter

    If (wb.VBProject.Protection = vbext_pp_locked) Then
        MsgBox ("failed to unlock")
    End If
    currentActiveWb.Activate
End Sub 
```

现在打开我们创建的第一个工作簿；Book2.xlsm。检查 Book2 的 VBA 编辑器，您会注意到它受密码保护。您还会注意到它是活动工作簿。`Book1`点击激活`View Tab | Switch Workbooks | Book1`

![在此处输入图像描述](../Images/74cf4589e7083e023e1736a7625a0428.png)

现在单击`Developer tab | Macros`如果您看不到开发人员选项卡，那么我建议您通过此[链接](http://msdn.microsoft.com/en-us/library/bb608625.aspx)。

![在此处输入图像描述](../Images/0508d0a6fa6e372432a58eb469cbb76f.png)

单击`Sample`宏中的宏`Macro Dialog Box`，您就完成了。

![在此处输入图像描述](../Images/dada325f247a763f4d69f1810620ee5b.png)

如果您检查 VBA 编辑器，您会注意到 Book2 的 VBA 编辑器现在已解锁/可访问。

根据您对它的使用，Sendkeys 是不可靠的。如果您正确使用它，那么这非常可靠:)

还有另一种解锁 VBA 密码的方法，但这非常复杂，需要调用 FindWindow 等 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:02:07.833

查看这些帖子以获取代码示例：
[http ://www.mrexcel.com/archive/VBA/29825.html](http://www.mrexcel.com/archive/VBA/29825.html)
[http://www.vbaexpress.com/forum/showthread.php?t=30687](http://www.vbaexpress.com/forum/showthread.php?t=30687)

这些帖子仅供参考：
[http ://www.excelforum.com/excel-programming/490883-why-doesnt-sendkeys-work-consistently.html](http://www.excelforum.com/excel-programming/490883-why-doesnt-sendkeys-work-consistently.html)
[http://www.ozgrid.com/forum/showthread.php？ t=13006](http://www.ozgrid.com/forum/showthread.php?t=13006)

他们讨论了为什么在多任务环境中使用 Sendkeys 不是很可靠，并且许多人不鼓励将其用于商业目的。但是，对于取消保护 VBA 项目，它似乎是唯一的解决方案。

希望能帮助到你！

# iphone - 未知类型名称错误 Iphone

> ID：11305194
> 
> 赞同：1
> 
> 时间：2012-07-03T05:52:14.187
> 
> 标签：iphone, ios, uitableview, uiview

它给出了 UNKNOWN TYPE NAME 错误。我也导入了“billSummary”类，但不知道为什么 xcode 会给出这个错误。

```
#import <UIKit/UIKit.h>
    #import "customiseForItems.h"
    #import "billSummary.h"

    @interface itemsInParty : UITableViewController<UIAlertViewDelegate>{
        IBOutlet customiseForItems *tblCell;
        IBOutlet UIToolbar *billSummaryTool;

        CGFloat percValue;
        billSummary *billSummaryToShow;        //ERROR UNKNOWN TYPE NAME BILL SUMMARY
        UIAlertView *alertForPercentage;
        NSMutableArray *selectedEntriesPath;
        BOOL descTapped;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T05:57:21.497

写`@class billSummary;`而不是 `#import "billSummary.h"`

像这样尝试它会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:01:02.953

一个可能的原因是：

billSummary.h

```
@interface billSummaryMisspelled : ParentClass
@end 
```

billSummary.m

```
@implementation billSummaryMisspelled
@end 
```

你的文件名！=你的类名

您可以使用前向类声明来跳过错误，

```
@class billSummary; 
```

而不是#import

# map - 将 3D 点云映射到表面然后展平

> ID：11305196
> 
> 赞同：1
> 
> 时间：2012-07-03T05:52:16.520
> 
> 标签：map, 3d, projection, flatten, topography

将点云映射到 3D“织物”然后展平。

所以我有一个由 3D 点云组成的科学数据集，这个点云由曲面上的点组成。然而，为了执行定量分析，我需要将这些点云映射到我可以展平的表面上。我考虑过使用地图工具，有点像将 3d 世界展平到地图上的情况，但不知道如何开始，因为我没有制图经验，也许我正试图用错误的方法解决一个简单的问题工具。

只是简单地描述一下数据集：想象窗户上完全透明的窗帘，上面有小点，如果我可以使用那个点图案来适应点所在的材料，那么我就可以“拉直”它并对它的传播进行有意义的分析点。我猜这个过程是首先通过使用轮廓或沿着这些线的东西将“工作表”手动拟合到点云数据上，然后展平工作表，从而将点放入二维数组中。最终我可能还会将其减少为一维，但我假设我需要中间二维步骤，因为第二维的长度是可变的（即纸张的一端比另一端短，但仍对应于相同的位置轮廓）虽然我总是很高兴学习新工具，但我正在使用 Matlab 和 Amira！

非常感谢任何建议或提示如何处理！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T17:18:03.547

您可以尝试构建一个近似于您的数据集的表面，然后用您想要的点展开该表面。[Solid3dtech.com](http://Solid3dtech.com)具有用曲线或点展开曲面的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:00:57.837

您可以使用空间填充曲线将 3d 复杂度降低到 1d 复杂度。我使用希尔伯特曲线在 2d 地图上索引 lat-lng 对。您可以对 3d 空间执行相同操作，但从简单曲线开始更容易，例如 az morton order curve。空间填充曲线常用于制图应用。空间填充曲线还为 3d 点添加了一些邻近信息和新的排序顺序。

# ruby-on-rails - 在 Rails 中使用 select_tag 更新多个对象

> ID：11305198
> 
> 赞同：0
> 
> 时间：2012-07-03T05:52:23.400
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, forms, associations

我有一个 User 模型、一个 Team 模型和一个 CoachingRole 模型。CoachingRoles 模型用于关联用户和团队，因为用户和团队之间已经存在一对多关联。各自的关联设置如下：

用户：

```
has_many :coaching_roles
has_many :teams_coaching, :through => :coaching_roles, :source => :team 
```

团队：

```
has_many :coaching_roles
has_many :coaches, :through => :coaching_roles, :source => :user 
```

教练角色

```
belongs_to :team
belongs_to :user 
```

我有一个表单来编辑用户，其中一部分是将团队添加到其 CoachingRoles。这是我到目前为止的 select_tag：

`= select_tag "user[coaching_role_ids]", options_for_select(@teams.map {|t| [t.name, t.id]})`

该特定行会将 Team id 添加到 User's `coaching_role_ids`，但显然不会添加相反的内容。最终，我想添加`:multiple => true`它并允许将多个团队的选择添加到用户的 CoachingRoles 中。这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:34:37.997

我在我的实现中使用了这个。

假设 Team 具有 name 属性和 selected_team_ids 方法，该方法返回为该用户选择的团队 ID 数组。

```
select_tag ("user[coaching_role_ids][]"), options_from_collection_for_select(Team.all, :id, :name, @user.coaching_role_ids), :multiple => true 
```

希望它有帮助！

编辑：我根据@nilmethod 自己的发现编辑了上面的解决方案。我原来的解决方案是：

```
select_tag ("user[teams][]"), options_from_collection_for_select(Team.all, :id, :name, @user.team_ids), :multiple => true 
```

我猜我的桌子当时的设置有点不同。谢谢！

# c# - Stylecop 自定义规则未显示在设置中

> ID：11305199
> 
> 赞同：2
> 
> 时间：2012-07-03T05:52:51.770
> 
> 标签：c#, stylecop

我使用 C# express 2010 创建了自己的 stylecop 自定义规则，但是当我将 .dll 文件放在 stylecop 文件夹中时，它没有在 stylecop 设置列表中显示我的自定义规则，我可以知道这是我的编码问题还是我放错了文件？下面是我的 xml 代码，好心的建议

```
<?xml version="1.0" encoding="utf-8" ?>
<SourceAnalyzer Name="My Custom Rule3">
<Description>
Custom rule for demo purposes.
 </Description>
   <Rules>
    <Rule Name="AvoidUsingAInClassNames" CheckId="CR0001">
      <Context>Do not use 'M' letter in {0} names.</Context>
      <Description>Fires when 'a' letter is used in class name.</Description>
    </Rule>
  </Rules>
</SourceAnalyzer> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T16:12:43.083

XML 文件的名称应与类文件**完全相同，因此***MyClass.cs*和*MyClass.xml*。

您还需要确保类库生成 v3.5 .NET DLL 以及使 XML 成为嵌入式资源并将 DLL 放置在 StyleCop 文件夹中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T09:00:07.907

验证 dll 版本。我遇到了同样的问题，因为我使用 4.3 版和 4.7 版开发的规则位于不同的命名空间下：

**4.3：**

```
using Microsoft.StyleCop;
using Microsoft.StyleCop.CSharp; 
```

**4.7：**

```
using StyleCop;
using StyleCop.CSharp; 
```

# jquery - Jquery Datatable 按日期排序错误

> ID：11305202
> 
> 赞同：0
> 
> 时间：2012-07-03T05:53:20.277
> 
> 标签：jquery, datatables

这是代码..

```
 $.fn.dataTableExt.oSort['us_date-asc'] = function (a, b) { 

        var x = new Date(a),
         y = new Date(b);
        return ((x < y) ? -1 : ((x > y) ? 1 : 0));
    };

    $.fn.dataTableExt.oSort['us_date-desc'] = function (a, b) {
        var x = new Date(a),
         y = new Date(b);
        return ((x < y) ? 1 : ((x > y) ? -1 : 0));
    };

    var oTable = $('#example').dataTable({
        "bJQueryUI": true,
        "sPaginationType": "full_numbers",
        //"bSortClasses": false,
        "aoColumns": [
        null, null,
        {
            "sType": "us_date"
        },
        null,
        {
            "bSortable": false
        }],
        "aaSorting": [
            [2, "desc"]
        ]
    }); 
```

我正在将此代码用于数据表以使第三列可排序。我想以 jun-06-2012 格式显示日期。当我使用 06-06-2012 格式时，排序工作正常......但是当月份按字母顺序表示时，排序不起作用（它在 chrome 中有效，但在其他浏览器中无效） ...我该如何解决这个问题？任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:41:39.770

```
jQuery.fn.dataTableExt.oSort['shortdate-asc']  = function(x,y) {
        var months = {}; 
                months["JAN"] = "01"; 
                months["FEB"] = "02"; 
                months["MAR"] = "03"; 
                months["APR"] = "04"; 
                months["MAY"] = "05"; 
                months["JUN"] = "06"; 
                months["JUL"] = "07"; 
                months["AUG"] = "08"; 
                months["SEP"] = "09"; 
                months["OCT"] = "10"; 
                months["NOV"] = "11"; 
                months["DEC"] = "12";

        x = (x=="")? 0 : x.split('-');
        y = (y=="")? 0 : y.split('-');

        if(x.length){
            x = x[2] + months[x[0].toUpperCase()] + x[1];
        }

        if(y.length){
            y = y[2] + months[y[0].toUpperCase()] + y[1];
        }

        return ((x < y) ? -1 : ((x > y) ?  1 : 0)); 
    }; 

    jQuery.fn.dataTableExt.oSort['shortdate-desc']  = function(x,y) { 

        var months = {}; 
                months["JAN"] = "01"; 
                months["FEB"] = "02"; 
                months["MAR"] = "03"; 
                months["APR"] = "04"; 
                months["MAY"] = "05"; 
                months["JUN"] = "06"; 
                months["JUL"] = "07"; 
                months["AUG"] = "08"; 
                months["SEP"] = "09"; 
                months["OCT"] = "10"; 
                months["NOV"] = "11"; 
                months["DEC"] = "12";

        x = (x=="")? 0 : x.split('-');
        y = (y=="")? 0 : y.split('-');

        if(x.length){
            x = x[2] + months[x[0].toUpperCase()] + x[1];
        }

        if(y.length){
            y = y[2] + months[y[0].toUpperCase()] + y[1];
        }

        return ((x < y) ?  1 : ((x > y) ? -1 : 0)); 
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:02:00.210

您可以使用[datejs 之](http://www.datejs.com/)类的库将仲裁字符串转换为实际的 Date 对象并进行比较。这个想法是将您显示的内容与实际比较的内容分开。

示例代码：

```
var x = Date.parse('06-jun-2012');
var y = Date.parse('06-jul-2012');
return Date.compare(x, y); 
```

您可以使用日期对象 toString() 方法并指定自定义格式字符串。检查文档[http://code.google.com/p/datejs/wiki/APIDocumentation](http://code.google.com/p/datejs/wiki/APIDocumentation)

如果这恰好是一项一次性任务，您可能不想承担另一个库的依赖关系。但是，如果您碰巧在整个应用程序中处理日期，您会想要使用这个库。

# hibernate - Hibernate：在不重写映射的情况下从核心 API 切换到 JPA API

> ID：11305204
> 
> 赞同：3
> 
> 时间：2012-07-03T05:53:27.417
> 
> 标签：hibernate, jpa-2.0

是否可以使用 hbm xml Hibernate 配置以符合 JPA 2.0 的方式构建 EntityManagerFactory 和 EntityManager？该文档似乎表明这是不可能的：

> “以前的教程使用了特定于 Hibernate 的 hibernate.cfg.xml 配置文件。然而，JPA 定义了一个不同的引导过程，它使用自己的名为 persistence.xml 的配置文件。” —<a href="http://docs.jboss.org/hibernate/orm/4.1/quickstart/en-US/html/ch04.html" rel="nofollow">第 4 章

我的 hbm xml 配置长达数千行并且可以正常工作；我宁愿不必手动重写为 orm.xml 和 persistence.xml。我也没有对数据模型添加 Hibernate 或 JPA 注释的写入权限。出于我的目的，我只需要 JPA API，而不需要 JPA 配置。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T06:26:56.940

Yes, it is possible. Existing mappings can be used by setting following property in persistence.xml:

```
<property name="hibernate.ejb.cfgfile" value="hibernate.cfg.xml"/> 
```

Value is path to hibernate specific configuration. It is also possible to partially override hibernate style mappings with JPA mappings. Additional instructions can be found from documentation: [http://docs.jboss.org/hibernate/core/4.0/hem/en-US/html_single#d0e708](http://docs.jboss.org/hibernate/core/4.0/hem/en-US/html_single#d0e708)

# android - 一个视图的Android页面卷曲

> ID：11305207
> 
> 赞同：4
> 
> 时间：2012-07-03T05:53:38.187
> 
> 标签：android, page-curl

所有可用于在 android 中实现 page curl 的代码都使用一组固定的图像来实现 curl。谁能告诉我一种在线性布局上实现页面卷曲的方法（由几个文本视图、几个按钮和动态内容组成）？

# android - IMarketBillingService.java 从未在应用程序的 gen 文件夹中创建？

> ID：11305208
> 
> 赞同：1
> 
> 时间：2012-07-03T05:53:39.697
> 
> 标签：android, in-app-purchase, in-app-billing, aidl

我一直在开发一个 android 应用程序，我必须在其中集成应用内计费。我正在遵循以下链接中给出的程序，但它没有得到回报。

[http://developer.android.com/guide/google/play/billing/billing_integrate.html#billing-permission](http://developer.android.com/guide/google/play/billing/billing_integrate.html#billing-permission)

在此链接上有一个名为“*将 AIDL 文件添加到您的项目*”的部分，当我按照该部分中给出的步骤进行操作时，我在项目的“gen”文件夹中找不到任何“IMarketBillingService.java”文件。可能是什么问题？有没有人遇到过这个问题..？任何有关此问题的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:10:32.733

1.  将 .aidl 文件从项目的 src 文件夹移动到某个临时文件夹中。
2.  清理并构建项目（构建可能会失败，启动它很重要）。
3.  将 .aidl 文件移回原位。
4.  清理并重新构建。这次应该一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:53:01.330

好吧，没有什么比一次又一次地清理和重建项目对我有用......但是从现有项目创建一个新项目解决了这个问题。在新项目中，我能够添加aidl 文件，然后在 gen 文件夹中创建相应的 java 文件。这可能不是最好的解决方案，但这是经过 2 到 3 天的搜索和头脑风暴后唯一对我有用的东西，所以如果有人有更好的解决方案，请分享...:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-22T10:33:20.477

右键单击项目->选择属性->选择java编译器->将编译器合规级别设置为1.6或更高

# python - 在 django 中不使用交互式 python shell 在数据库表中插入值

> ID：11305215
> 
> 赞同：1
> 
> 时间：2012-07-03T05:54:38.057
> 
> 标签：python, django, linux, sqlite, ubuntu-10.04

我的应用名称是 search_keywords。在创建这个应用程序时，我将有一个名为 models.py 的文件，我在其中编写了这段代码：

```
from django.db import models 

class Keywords(models.Model):
    file_name = models.CharField(primary_key=True, max_length=100)
    frequency_count = models.IntegerField() 
```

然后将此应用程序添加到 INSTALLED_APPS 并运行 python manage.py syncdb。运行此命令时，我将在 django 中自动创建一个表。然后运行 ​​python manage.py sql search_keywords。它将根据需要显示表格。

然后下一步是运行 python manage.py shell。而不是运行这个，我想在通过我创建的 python 代码创建的表中插入值。代码是：

```
#!/usr/bin/python

#here skey.py is another file created by me and has the imported functions 
#in this code 
from skey import find_root_tags, count, sorting_list 
str1 = raw_input("enter the word to be searched\n")
list = []
fo = open("xml.txt","r")

for i in range(count.__len__()):

    file = fo.readline()
    file = file.rstrip('\n')
    find_root_tags(file,str1,i) 

list.append((file,count[i]))

sorting_list(list)
fo.close() 
```

我想在 django 创建的表中插入这个列表元素，并且在调用函数排序列表之后也是如此。该列表包含文件名及其计数。例如 list=[('books.xml','3'),('news.xml,'2')]。

我怎样才能做到这一点？

请帮忙。

///////////////////////////////////////// /////////////////////////

嘿，我已经写了代码：

```
#!/usr/bin/python

#to tell django which settings module to use 
import os
os.environ['DJANGO_SETTINGS_MODULE'] = 'mysite.settings'

from search.models import Keywords 

from skey import find_root_tags, count, sorting_list

str1 = raw_input("enter the word to be searched\n")
list = []
fo = open("xml.txt","r")

for i in range(count.__len__()):

    file = fo.readline()
    file = file.rstrip('\n')
    find_root_tags(file,str1,i) 

    list.append((file,count[i]))

sorting_list(list)

for name, count in list:
    s = Keywords(file_name=name,frequency_count=count)
    s.save()

fo.close() 
```

这里 django_project = mysite #my project's name and app = search #my app's name

在运行此代码时，它给了我错误：

回溯（最近一次通话最后）：

文件“call.py”，第 7 行，在

从 search.models 导入关键字

ImportError：没有名为 search.models 的模块

并包括：

```
import sys
sys.path.insert(0, path_to_django_project) 
```

这在上面的代码中给出了错误：

回溯（最近一次通话最后）：

文件“call.py”，第 4 行，在

sys.path.insert(0,path_to_mysite)

NameError：名称'path_to_mysite'未定义

为什么？我在桌面上有我的项目和上面的python代码文件。请帮忙！！

/////////////////////////////////////////////////////////////////////////////////////////////////////////现在它给我这个错误help.see it at： [在 python 代码中访问在 django 中创建的表时出错](https://stackoverflow.com/questions/11307928/error-in-accessing-table-created-in-django-in-the-python-code)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:25:47.163

It shouldn't be a probjem just importing your models and create object instances to persist to the database:

```
# setup sys.path first if needed
import sys
sys.path.insert(0, path_to_django_project)

# tell django which settings module to use
import os
os.environ['DJANGO_SETTINGS_MODULE'] = 'django_project.settings'

# import application models
import test_app.models as m

# create and save db entries...
o = m.TestObject()
o.var = 'spam'
o.par = 1
o.save() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T06:26:07.333

For each element in your list, create an instance of `Keywords_Search`. After that, call `.save()` on each of them. For example:

```
for name, count in mylist:
    s = Keywords_Search(file_name=name, frequency_count=count)
    s.save() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T09:22:56.370

首先，您的代码几乎没有问题（例如，您正在调用内置方法，更不用说`count.__len__()`）。与其试图弄清楚你在做什么，这里有两种在 django 中推荐的方法：

1.  Django 提供了为SQL、XML、YAML 或 JSON 中[的模型提供初始数据的功能。](https://docs.djangoproject.com/en/dev/howto/initial-data/)这允许您*每次*运行 syncdb 时自动插入数据。您不必再次运行命令。

2.  创建一个[自定义管理命令](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)并运行它`manage.py`

我假设您有一个关键字文件，并且您想搜索文件中有多少输入的关键字。

以下是创建执行此操作的自定义管理命令的方法：

```
from collections import Counter
from django.core.management.base import BaseCommand, CommandError
from search.models import Keywords

class Command(BaseCommand):
    args = 'search_string'
    help = 'Enter the search string'

    def handle(self, *args, **options):
        file_contents = []
        with open('keyword_master.txt') as f:
            file_contents = [l for l in f.readlines() if l.rstrip('\n')]

        if not file_contents:
           raise CommandError("Cannot read keyword_master.txt")

        c = Counter(file_contents)

        for search_string in args:
            freq = c[search_string]
            Keywords.object.create(keyword=search_string,frequency_count=freq)
            self.stdout.write('Added %s freq for "%s"' % (freq,search_string)) 
```

`commands`在任何应用程序中创建一个名为的文件夹。在此文件夹中，创建一个名为`__init__.py`. 在同一文件夹中，将此文件另存为“keyword_importer.py”。所以现在你有：

```
/search
..__init__.py
../commands
.....__init__.py
.....keyword_importer.py
.....keyword_master.txt 
```

现在运行它`python manage.py keyword_importer mykeyword`

# node.js - 使用 Windows Azure 模拟器设置 Node.js 的正确安装过程是什么

> ID：11305217
> 
> 赞同：0
> 
> 时间：2012-07-03T05:54:42.367
> 
> 标签：node.js, azure, emulation

这个问题与这个问题有关：

[在 IIS Express 下运行的 Node.js 不断崩溃](https://stackoverflow.com/questions/11287509/node-js-running-under-iis-express-keeps-crashing)

我需要帮助重新安装和启动 node.js 并在 Windows 模拟器中运行。

您好，我正在重新安装我的机器：

*   东芝笔记本电脑
*   2 GB 内存
*   32位处理器

从头到尾让node.js开发工作的正确程序是什么，到目前为止没有任何工作，并且模拟器（IIS Express）工作处理器不断崩溃。无论有多少实例，它们最终都会崩溃。直到两周前，我的节点开发工作正常，但我不得不重新安装，从那以后我没有在 Windows 模拟器上进行任何 node.js 开发，因为 2012 年 6 月最新的适用于 Node.js 的 Azure SDK 有问题.

这些是我采取的步骤：

1) 重新格式化 HD 2) 插入 Windows 7 N SP1 CD 3) 重新启动机器进入 CD 安装 4) 跟随并等待 Windows 7 安装 5) 运行添加/删除程序 + 启用 IIS + IIS 管理工具 6) 运行 Windows 更新 (安装大约53 次更新）7）转到此处[http://www.windowsazure.com/en-us/develop/nodejs/](http://www.windowsazure.com/en-us/develop/nodejs/) 8）单击 Windows Installer 2012 年 6 月并安装 Windows Azure SDK for Node.js - 2012 年 6 月 9）运行 Azure Powershell 10 ) 导航到 c:\node\testSite\webrole1 11) 启动站点：start-azureemulator -launch 12) 在网站上玩耍（然后崩溃！）

```
Problem signature:
Problem Event Name: APPCRASH
Application Name:   iisexpress.exe
Application Version:    8.0.8298.0
Application Timestamp:  4f620349
Fault Module Name:  iiscore.dll
Fault Module Version:   8.0.8298.0
Fault Module Timestamp: 4f63b65c
Exception Code: c0000005
Exception Offset:   00021767
OS Version: 6.1.7601.2.1.0.256.28
Locale ID:  1033
Additional Information 1:   f66d
Additional Information 2:   f66d807b515d6b2dc6f28f66db769a01
Additional Information 3:   7b2f
Additional Information 4:   7b2f6797d07ebc2c23f2b227e779722e 
```

我在树脂安装过程中错过了一步吗？我是否拥有进行 node.js windows azure 模拟器开发所需的所有文件？为什么 IIS Express 总是崩溃？我是否仍然可以在不使用 IIS Express 的情况下进行 node.js windows azure 模拟器开发并使用随附的本地 Windows 7 N (SP1) IIS 7.x？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:21:17.110

您只需要在 web pi 中安装“适用于 Node.js 的 Windows Azure SDK”，这会将所有需要的部分链接起来，包括适用于 Windows Azure 的模拟器和 IIS Express 8 的适当版本。

[https://github.com/WindowsAzure/azure-sdk-for-node](https://github.com/WindowsAzure/azure-sdk-for-node)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T03:11:12.493

为了解决这个问题，我这样做了：

```
1) Reinstall Windows 7 N SP1
2) Run Add/Remove Programs
3) Select IIS (go through and enable all the bits)
4) Run Windows Update (53 mandatory updates)
5) Install MS Visual Studio 2012 RC Release
6) Run MS Visual Studio 2012 RC Release
7) Select New Project/Cloud
8) Click the button that says 'Install Windows Azure SDK'
9) Install Windows Azure SDK (this installs IIS Express 8.0)
10) In Web Platform Installer, select Powershell and Windows Azure SDK for Node.js - June 2012 
```

现在 IIS 工作进程不再崩溃。分析情况后，很可能是 IIS 8.0 版本解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T01:04:54.187

您可以做几件事来缩小问题的范围：

(1) 在您的服务目录中，导航到 local_package.csx\roles\\approot\bin 并查看 log.txt 的内容 -> 这是角色启动的日志，会告诉您初始配置是否有任何问题对于角色（在角色配置时，复制 iisnode_schema 并将 http 模块注册到 iis express ）

(2)在你的web角色目录下，查看iisnode目录下的日志文件，如果你的node app里有打印到控制台的数据，会显示在这里

# git - 将 javascript-config-file 添加到 herokuapp？

> ID：11305221
> 
> 赞同：0
> 
> 时间：2012-07-03T05:55:07.260
> 
> 标签：git, heroku

我有两个版本的代码库。一个在heroku上，一个在另一台服务器上。每个都有一个 javascript 文件，其中包含一组特定于该服务器的设置。我主要从非 heroku-server 拉下更改，并在我进行更新时将它们推送到 heroku。当我这样做时，有没有办法不覆盖 Heroku 上的配置文件？

我知道 confg Vars，但它不是很合适，因为我不运行任何后端的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:46:14.543

我最终做了一个回购，我锁定了配置文件，只是手动将文件添加到该回购中。也许不是最整洁的解决方案，但它确实很好用。

# perl - perl 运行两个系统命令错误

> ID：11305224
> 
> 赞同：3
> 
> 时间：2012-07-03T05:55:25.377
> 
> 标签：perl, unix, command, system

因此，在我的脚本中，我需要调用 unix，并通过系统命令执行此操作，如下所示：

```
system "bash -i -c 'addmothernode'";

...

perl code ...

...

system "bash -i -c 'addnode -ip=$_'"; 
```

但是，每当我在同一个脚本中运行这两个命令时，由于某种原因，我的进程会像这样停止：

```
[1]+  Stopped                 perl boot.pl 
```

而且脚本只能在我运行时完成`fg %1`。当我只有其中一个系统调用时，perl 脚本成功完成。但我需要这两个命令，因为它们相互依赖。有人对发生的事情有任何想法吗？谢谢！

更新：

下面的很多答案都说我不需要`bash -i`用来运行系统命令，我通常知道这是真的，但我需要使用我创建的别名，如果我不使用这个别名将不会认可。所以我确实需要`bash -i`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T08:05:37.637

此问题与 perl 无关。`-i`如果您在交互模式 ( ) 下一个接一个地启动两个 bash，您可以轻松重现这种情况：

```
$ cat 1.sh 
bash -i -c 'sleep 1'
bash -i -c 'sleep 1'

$ bash 1.sh

[1]+  Stopped                 bash 1.sh 
```

当然，最好在非交互模式下运行 bash（不`-i`带 bash）或直接运行程序，不带 bash，但如果出于某种原因需要，`bash -i`可以使用以下命令保护它的运行`setsid`：

```
$ cat 1.sh
setsid bash -i -c 'sleep 1'
setsid bash -i -c 'sleep 1'
echo done

$ bash 1.sh
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T06:36:53.740

该`bash -i`装置运行交互式外壳；所以你有两个shell都从终端读取。

尝试删除`-i`选项。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T07:30:43.097

```
system "addmothernode"; 
```

应该管用。

* * *

要执行命令，不需要 bash。Perl`system`函数就像系统 C 函数一样，默认调用`sh`.

[人系统](http://cims.nyu.edu/cgi-systems/man.cgi?section=3C&topic=system)

[执行](http://cims.nyu.edu/cgi-systems/man.cgi?section=2&topic=exec)

调用者遵循的标准决定了使用哪个 shell。见[标准(5)](http://cims.nyu.edu/cgi-systems/man.cgi?section=5&topic=standards)。

```
Standard                                      Shell Used
______________________________________________________________
1989 ANSI  C,  1990  ISO  C,  1999  ISO  C,   /usr/xpg4/bin/sh
POSIX.1  (1990-2001),  SUS,  SUSv2,  SUSv3,
XPG4
POSIX.1 (1988), SVID3,  XPG3,  no  standard   /usr/bin/sh
specified 
```

# hive - 为 Hive MR 作业配置分隔符

> ID：11305228
> 
> 赞同：3
> 
> 时间：2012-07-03T05:55:52.367
> 
> 标签：hive

有没有办法为 Hive MR Jobs 配置分隔符？hive 内部使用的默认分隔符是“hive delimiter”（/001）。我的用例是配置分隔符，以便我可以根据要求使用任何分隔符。在hadoop中有一个属性“mapred.textoutputformatter.separator”，它将键值分隔符设置为此属性指定的值..有没有这样的方法来配置Hive中的分隔符？..我搜索了很多但没有没有任何有用的链接。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T17:07:15.607

从 hive-0.11.0 开始，您可以编写

```
INSERT OVERWRITE LOCAL DIRECTORY '...'
ROW FORMAT DELIMITED FIELDS TERMINATED BY '\t'
SELECT ... 
```

有关完整语法，请参阅[HIVE-3682](https://issues.apache.org/jira/browse/HIVE-3682)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:10:32.900

You can try that:

```
SELECT (rest of your query)
ROW FORMAT DELIMITED
    FIELDS TERMINATED BY 'YourChar' (example: FIELDS TERMINATED BY '\t') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T09:56:43.863

你也可以使用这个：-

```
ROW FORMAT SERDE 'org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe'
WITH SERDEPROPERTIES ('field.delim'='-','serialization.format'='-') 
```

这将使用 -*分隔符分隔*列，但它特定于**LazSimpleSerde**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-30T11:16:03.233

我猜您正在使用 INSERT OVERWRITE DIRECTORY 选项写入 hdfs 文件。如果您在 hdfs 文件的顶部创建一个没有分隔符的配置单元表，它将使用 '\001' 作为分隔符，因此您可以从配置单元表中读取文件而不会出现任何问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-02T16:27:24.083

如果源表 dnt 没有在创建模式语句中指定分隔符，那么您将无法更改它。您的操作将始终包含默认值。是的，分隔符将由为源表创建模式来控制。所以这也不是可配置的。我遇到了类似的问题，最终在完成 hive MR 工作后修改了 001 作为第二步。

# android - 如何在windows机器上构建一个android内核

> ID：11305229
> 
> 赞同：3
> 
> 时间：2012-07-03T05:56:03.300
> 
> 标签：android, android-source

我想在我的 Windows 机器上构建一个 android 内核。我是一个初学者，我刚刚使用 eclipse 和 sdk 创建了一些示例应用程序。但现在我想了解构建 android 内核所需的所有东西，以及如何构建内核，如何配置 android 内核。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T04:11:54.507

我也在寻找同样的东西，但我发现它还支持 Windows。[正如这里](http://source.android.com/source/initializing.html)所说：目前不支持在 Windows 下构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T06:44:22.553

使用cygwin。那是windows的linux模拟器

# php - 使用 PDO 替代 mysql_num_rows

> ID：11305230
> 
> 赞同：24
> 
> 时间：2012-07-03T05:56:19.047
> 
> 标签：php, mysql, pdo

现在我有一个 PHP 文件，它执行 MYSQL 查询，然后像这样计算行数：

```
$count=mysql_num_rows($result);

if ($count == 1) {
    $message = array('status' => 'ok');
} else {
    $message = array('status' => 'error');
} 
```

这工作正常，但我正在尝试将我的所有 PHP 文件更改为使用 PDO。那么如何使用 PDO 来做到这一点呢？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-03T06:17:10.247

```
$res = $DB->query('SELECT COUNT(*) FROM table');
$num_rows = $res->fetchColumn(); 
```

或者

```
$res = $DB->prepare('SELECT COUNT(*) FROM table');
$res->execute();
$num_rows = $res->fetchColumn(); 
```

您也可以使用它来询问数据是否存在或被选中：

```
$res = $DB->query('SELECT COUNT(*) FROM table');
$data_exists = ($res->fetchColumn() > 0) ? true : false; 
```

或使用您的变量：

```
$res = $DB->query('SELECT COUNT(*) FROM table');
$message = ($res->fetchColumn() > 0) ? array('status' => 'ok') : array('status' => 'error'); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-04-12T06:54:40.307

```
$stmt = $db->query('SELECT * FROM table');  
$row_count = $stmt->rowCount();  
echo $row_count.' rows selected'; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-26T04:18:20.850

也许您可以使用 PDO 的“fetchAll”方法，该方法返回一个包含所有 SELECT 结果的数组。然后使用“count”方法计算数组的行数。

前任：

```
$rows = $stmt->fetchAll();
$num_rows = count($rows); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-03T06:04:29.707

如果您没有使用准备好的语句，请尝试：

```
$find = $dbh->query('SELECT count(*) from table');
if ($find->fetchColumn() > 0){
    echo 'found';
} 
```

但是，如果您选择我强烈推荐的准备好的语句，那么：

```
$find = $dbh->prepare('SELECT count(*) from table');
$find->execute();
if ($find->fetchColumn() > 0){
    echo 'found';
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-05T07:43:31.493

可以这样...

```
$numRows = $conn->query("SELECT COUNT(*) FROM yourtable")->fetchColumn();
echo $numRows; 
```

# xcode - 如何解决 iPhone 错误： 使用 Adhoc 发行版和许多成功发行版时“安装失败”？

> ID：11305235
> 
> 赞同：0
> 
> 时间：2012-07-03T05:56:29.947
> 
> 标签：xcode, adhoc, ad-hoc-distribution

我已经向相同的设备分发了许多临时发行版。现在，当测试人员尝试加载应用程序时，我收到此错误。到目前为止，我已经定义了一个新的配置文件，以确保设备是正确的设备代码。我更改了签名以反映新的分发配置文件，我已经清理然后生成了存档。我靠墙，因为我不知道是什么导致了这个错误。我已经尝试过这个网站上提到的解决方案。

帮助！！！

# asp.net - asp.net中的openCV

> ID：11305237
> 
> 赞同：0
> 
> 时间：2012-07-03T05:56:34.397
> 
> 标签：asp.net, opencv, emgucv

我想像在 opencv 提供的示例中一样使用 opencv

当我在示例中（在winform中）运行它时，它工作正常，但在我的网站上我得到了这个错误：

```
The type initializer for 'Emgu.CV.CvInvoke' threw an exception. 
```

和内部异常：

```
An attempt was made to load a program with an incorrect format. (Exception from HRESULT: 0x8007000B) 
```

与堆栈：

```
at Emgu.CV.CvInvoke.cvLoadImage(String filename, LOAD_IMAGE_TYPE loadType)
at Emgu.CV.Image`2.LoadImageUsingOpenCV(FileInfo file)
at Emgu.CV.Image`2..ctor(String fileName) 
```

我正在使用 emgucv windows x64 2.40 版本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:04:45.447

下载emgu 64位版本，需要安装visual c++ runtime 64位

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:08:54.447

我找到了一些解决方案，但我所做的是在 Visual Studio 中将项目属性转到 Web 部分并检查收音机以使用本地 iis 网络服务器，这并不是一个好主意。

我猜emgucv找到了一些更好的帮助然后这样做，为什么64位的vs2010强迫你这样做？

# css - 如何从我的 wordpress 网站中的 iframe 中删除 png 透明度

> ID：11305242
> 
> 赞同：0
> 
> 时间：2012-07-03T05:57:09.827
> 
> 标签：css, image, wordpress, iframe, transparency

白色背景围绕着我的 iframe，因为我正在从数据库中呼应这个 iframe，尽管它在除 IE8、IE9 之外的所有其他浏览器中正确显示（请检查屏幕截图）。虽然我在我的 header.php 中尝试了这个脚本，`wordpress`但仍然没有运气（在 js 文件夹下包含 ie6pngfix.js）。让我知道我该如何解决。

```
<!--[if IE 6]>
<script type="text/javascript" src="js/ie6pngfix.js"></script>
<script type="text/javascript">
DD_belatedPNG.fix('img, ul, ol, li, div, p, a, h1, h2, h3, h4, h5, h6, png, span');
</script>
<![endif]--> 
```

详情如下——

```
<div id="banner_right">
<iframe width="483" height="300" src="http://www.youtube.com/embed/EDPYq4BFHBI" frameborder="0" allowfullscreen></iframe>       
</div>

#banner_right iframe{background:url(images/bg.png) 0 0 no-repeat;padding: 20px 13px 27px;} 
```

`bg.png`是`510X351`px

正确的屏幕截图，除 IE8-9 之外的所有内容——（无白色背景） ![在此处输入图像描述](../Images/16c0071d1fe20659c1d719c9b9d049d9.png)

不正确的屏幕截图，IE8-9 --（带白色背景） ![在此处输入图像描述](../Images/61aaf6387762e43101a6192beb7ec54b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T07:02:53.853

自己找到答案——

添加`allowtransparency="true"`到 iframe 代码。

```
<iframe width="483" height="300" src="http://www.youtube.com/embed/EDPYq4BFHBI" frameborder="0" allowtransparency="true"></iframe> 
```

然后添加`background-color:transparent;`到我的 css--

```
#banner_right iframe{background:url(images/bg.png) 0 0 no-repeat;padding: 20px 13px 27px; background-color:transparent; } 
```

# mongodb - mongodb $in 限制

> ID：11305249
> 
> 赞同：6
> 
> 时间：2012-07-03T05:57:51.510
> 
> 标签：mongodb

只是想知道 Mongodb 的 $in 函数是否有限制？

[http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24in](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24in)

我有一个用户集合（BIG），并且有一个较小的 ObjectId 子集隐藏在某个地方，我想选择我的 ObjectIds 中的所有用户（集合）。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T07:42:14.403

由于数组中的项目数量没有限制，因此您应该没有任何问题。对于将数组嵌入文档中的情况，您可能想看看这些：

[http://groups.google.com/group/mongodb-user/browse_thread/thread/4a7caeba972aa998?fwc=1](http://groups.google.com/group/mongodb-user/browse_thread/thread/4a7caeba972aa998?fwc=1)

[根据单词过滤内容](https://stackoverflow.com/questions/11304996/filtering-content-based-on-words)

[http://groups.google.com/group/mongodb-user/browse_thread/thread/28ae76e5ad5fcfb5](http://groups.google.com/group/mongodb-user/browse_thread/thread/28ae76e5ad5fcfb5)

# spring-mvc - 使用 Spring Controller 在数据库中插入 JSP 表单数据

> ID：11305251
> 
> 赞同：0
> 
> 时间：2012-07-03T05:58:43.533
> 
> 标签：spring-mvc

我正在使用弹簧制作休息网络服务。在 rest client-ui 的帮助下，我可以轻松插入更新和删除用户。现在我想对用户 JSP 页面做同样的事情，但现在无法调用用户控制器

## 用户.jsp

```
<form action="adduser" name="user" id="my-form",method="POST"
    onsubmit="com.mobile-app.controller"/> 
```

## 用户控制器

```
@RequestMapping(method = RequestMethod.POST, value = "/adduser", headers="Accept=application/xml, application/json")

    public void createuser(@RequestBody User user) {
        try {
            userManager.AddToUser(user);
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

## Web.xml

```
<listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>rest</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>rest</servlet-name>
        <url-pattern>/rest/*</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>Index.jsp</welcome-file>
    </welcome-file-list> 
```

## 休息-Servlet.XML

```
<context:component-scan base-package="controller" />
    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">

        <property name="prefix">
            <value>/views/</value>
        </property>
        <property name="suffix">
            <value>.jsp</value>
        </property>
    </bean>
    <bean id="adduser" class="com.mobileapp.controller.UserController">
        <property name="userManager" ref="userManager" />
    </bean> 
```

请帮助我通过 JSP 操作调用控制器 addUser 我将非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:10:04.993

Create a POJO UserForm.java as

```
public class UserForm {

    private Long id;
    @NotEmpty(message = "Please enter name")
    private String name;
    @NotEmpty(message = "Please enter username")
    private String username;
    @NotEmpty(message = "Please enter password")
    private String password;
    private String address;
    private String gender;
    @Future(message = "Please enter valid DOB")
    private Date dob;
    private String email;
    private String mobile;
//Getter & Setter
} 
```

user.jsp page code will be

```
 <c:url var="saveOrUpdateUrl" value="/app/user/saveOrUpdate" />
 <form:form action="${saveOrUpdateUrl}" method="post" modelAttribute="userForm" id="userForm">
<form:input path="name"/>
// Other input fields
<input name="saveBtn" value="Save" type="submit">
</form:form> 
```

In Controller you should have 2 method as

```
@Controller
@RequestMapping("/user")
public class UserController {

 @RequestMapping(value = "/add", method = RequestMethod.GET)
    public String add(Model model) {
        UserForm userForm = new UserForm();
        model.addAttribute("userForm", userForm);
        return "user";
    }

    @RequestMapping(value = "/saveOrUpdate", method = RequestMethod.POST)
    public String saveOrUpdate(@RequestParam("id") Long id, @Valid UserForm userForm, BindingResult result, Model model) {

            //Logic to save data from userForm
    }

} 
```

# .net - 在 .net3.5 中包含 CSS3

> ID：11305252
> 
> 赞同：0
> 
> 时间：2012-07-03T05:58:47.857
> 
> 标签：.net, css

我在我的项目中使用了 css3 的一些功能，但它显示错误。我正在使用.net 3.5。边框右上角半径：10px；边框右下角半径：10px；这些是我遇到错误的样式。使用 css3 功能我需要做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:05:02.923

试试[CSS3 Intellisense 架构插件](http://visualstudiogallery.msdn.microsoft.com/7211bcac-091b-4a32-be2d-e797be0db210/)……或者当 Visual Studio 抱怨 CSS 属性时忽略它。

# php - 如何在单个查询中将两个不同的数组值插入到表中

> ID：11305253
> 
> 赞同：0
> 
> 时间：2012-07-03T05:58:49.307
> 
> 标签：php, mysql

我想在单个查询中将两个数组的值插入到表中。有没有可能做这样的事情。

表格格式

```
id | product_id | category_id | blog_id | updated_by | created_date 
```

**类别_id**

```
Array
(
    [0] => 4
    [1] => 15
    [2] => 18
) 
```

**Product_id**

```
Array
(
    [0] => 2260 
    [1] => 1401 
)

Blog id = mysql_insert_id(); 
```

结果

```
id | product_id | category_id | blog_id | updated_by  
 1      2260        4               15      xyz         
 2      1401        15              15      xyz   
 3      null        18              15      xyz 
```

对我的任何建议也可以为此改进更好的插入查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T06:05:28.100

```
INSERT INTO `Table_Name` (`product_id`, `category_id`, `blog_id`, `updated_by`) VALUES (2260, 4, 15, 'xyz'), (1401, 15, 15, 'xyz'), (, 18, 15, 'xyz'); 
```

我假设该`id`列是自动递增的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:05:48.200

您可以在现在使用的同一查询中一次性插入多行。只需添加一个逗号，然后输入更多值：

```
Insert into myTable values ('field1-var1','field2-var2'), ('field1-var2','field2-var2') .. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T10:17:57.243

```
$combain = array_merge($cat , $proid);   
for($i = 0; $i <count($combain); $i++ )
            {
                if(isset($proid[$i])) {
                    $product_id = $proid[$i];
                }
                else{
                    $product_id = "''";
                }            
                if(isset($cat[$i])){
                    $category_id = $cat[$i];
                }
                else{
                    $category_id = "''";
                }   
                if(!empty($cat[$i]) || !empty($proid[$i])) {

                    @$values[] ="('',". $blogid.",".$category_id.",".$product_id.","."'".$updated_by."'".",now())";
                }
            }        
            $query = $this->db->query("insert into blog_details (id , blog_id , cat_id, pro_id, updated_by , created_date) values" . implode(',', $values)); 
```

# android - 如何在活动之间应用幻灯片动画

> ID：11305259
> 
> 赞同：-1
> 
> 时间：2012-07-03T05:59:38.047
> 
> 标签：android, animation, android-activity

嘿朋友们，我在活动之间应用幻灯片动画时遇到问题。我已经在活动之间应用了幻灯片动画，因此它可以在模拟器上运行，并且下一个活动将使用幻灯片动画打开，但是当我在移动设备中运行相同的代码时，它就不起作用了。

**我的左滑动画**

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
         android:shareInterpolator="false">
        <translate android:fromXDelta="-100%" android:toXDelta="0%"
          android:fromYDelta="0%" android:toYDelta="0%"
         android:duration="700"/>
       </set> 
```

**我的右侧动画**

```
 <set xmlns:android="http://schemas.android.com/apk/res/android"
             android:shareInterpolator="false">
          <translate
           android:fromXDelta="0%" android:toXDelta="100%"
           android:fromYDelta="0%" android:toYDelta="0%"
           android:duration="700" />
        </set> 
```

我很困惑，因为当动画在模拟器上工作时，为什么不在移动设备上工作。所以请建议我解决这个问题，必须感谢帮助者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:57:21.077

你测试过 Eclipse 中 Project 菜单的 clean 选项吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:04:06.487

从设备上卸载以前的 APK 并尝试，它应该可以工作。

还要考虑@MKJParekh 和@breceivemail 的评论。

如果这仍然不能帮助您尝试在其他设备上运行并测试结果。还要确保您使用的布局尺寸与您正在测试的设备屏幕相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-29T17:23:54.830

我遇到了同样的问题。这个答案解决了我的问题[如何在 Monodroid 中的活动之间制作从左到右的滑动动画过渡？](https://stackoverflow.com/questions/13212610/how-do-i-make-a-swipe-animation-from-left-to-right-transition-between-activities/13224118#13224118). 需要通过转到设置->显示->动画并选择并保存所有动画来打开动画。

# android - ICS 上的 Android webview 应用程序像素化

> ID：11305260
> 
> 赞同：0
> 
> 时间：2012-07-03T05:59:40.683
> 
> 标签：android, android-webview, android-4.0-ice-cream-sandwich, pixelate

我的 android 应用程序在所有 android 设备上运行良好，除了具有 ICS 的三星设备。这是一个 webview 应用程序，图像在具有 ICS 的三星设备上变得像素化。对此有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:01:36.483

我得到了解决方案:) 我刚刚在 xml 文件的应用程序标记中包含了一行 android:hardwareAccelerated="true"。为此，我不得不将项目构建目标更改为 Android 3.0。就是这样！像素化问题消失了:)

# python - python语法的正则表达式

> ID：11305271
> 
> 赞同：4
> 
> 时间：2012-07-03T06:00:36.720
> 
> 标签：python, syntax

我想编写一个 python 代码生成器，如果我有描述所有有效 python 程序的正则表达式会很有帮助。

这样的正则表达式是否存在？它是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-03T06:07:37.553

这样的正则表达式不可能存在，因为根据定义，正则表达式的功能不足以识别图灵完备的语言（例如 python）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T06:49:28.640

如果您使用 Python 代码片段生成字符串，并且想检查其语法是否正确，请尝试使用内置函数[`compile`](http://docs.python.org/library/functions.html#compile)。它返回结果代码对象或引发`SyntaxError`异常。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T06:06:59.570

您需要对代码进行[lint](http://en.wikipedia.org/wiki/Lint_%28software%29)。有几个工具可以用 Python 做到这一点。[pylint](http://pypi.python.org/pypi/pylint)、[PyChecker](http://pypi.python.org/pypi/PyChecker)和[pyflakes](http://pypi.python.org/pypi/pyflakes)都可以解决问题。

回答您的实际问题：不，这不是正则表达式的工作。

# php - 在不同的文件夹中设置 cookie

> ID：11305278
> 
> 赞同：0
> 
> 时间：2012-07-03T06:01:21.977
> 
> 标签：php, cookies, directory

我正在尝试从一个也可以在另一个文件夹中使用的文件夹创建 cookie。简单地做：

```
setcookie('favorite['.$id.']',1,time()+60*24*60*60,'/'); 
```

但它不起作用。Cookie 在创建的文件夹中可见，但在其他文件夹中为空。

我也试过：

```
setcookie('favorite['.$id.']',1,time()+60*24*60*60,ROOT);
setcookie('favorite['.$id.']',1,time()+60*24*60*60,HTTP_ADR); 
```

`ROOT = dirname(__FILE__)`我的`HTTP_ADR`网站地址在哪里`http://example.com/site`

可能是由于这个数组的问题`favorite['.$id.']`吗？

**更新：**以这种方式使用`echo count($_COOKIE['favorite'])`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:13:10.303

奇怪的。/cookie/中的这个脚本傻瓜

```
<?
setcookie('foo[lol]', 1, time()+60*24*60*60, "/"); 
```

设置即使在根文件夹中也可以使用的 cookie。

因此，请确保没有任何内容会删除您在另一个文件夹中的 cookie。

**编辑：** php 无法读取包含括号的 cookie。但是浏览器可以。

**EDIT2：**不，它可以，但它认为它是数组。因此，要读取您的 cookie，请使用以下代码：

```
var_dump($_COOKIE['favorite'][$id]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T06:15:17.680

如果它不起作用，您可以将该 cookie 存储在会话中并可以使用该 cookie

```
<?php 
    session_start();
    if(isset($_COOKIE['cookiename']))
    {
        $_SESSION['cookie_name']= $_COOKIE['cookiename'];
    }
    echo $_SESSION['cookie_name'];
    ?> 
```

# c - 如果使用 printf 格式化后没有参数会怎样？

> ID：11305281
> 
> 赞同：0
> 
> 时间：2012-07-03T06:01:38.133
> 
> 标签：c, stack, printf

> **可能重复：**
> [打印 %d 而不提供变量名时 printf 的行为](https://stackoverflow.com/questions/437816/behaviour-of-printf-when-printing-a-d-without-supplying-variable-name)

例如，如果我使用 printf("%d %d"); 会发生什么？? 它会从堆栈中弹出最后八个字节并打印出来吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:06:05.233

在 GCC 中 - 您会收到警告（这是使用 完成的`__attribute__ ((__warn_unused_result__))`）。

在 x86 上，您不会收到堆栈错误，因为调用者会将数据推送到堆栈，并在函数返回后弹出。这称为 C 调用约定，与 pascal 不同 - 其中函数还将从堆栈中弹出数据（`ret 10`例如在 ASM 中使用）。

您需要的数据值将是随机的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:04:11.007

如果格式说明符的`printf()`数量大于参数的数量，从技术上讲，它的未定义行为。

但是以下很好

```
printf("%d",x,y); // y is evaluated but not printed. 
```

* * *

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T06:18:03.333

它将打印垃圾值，但它有“比数据参数更多的转换百分比”警告。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T06:07:59.350

在这种情况下，您将获得`garbage data`依赖于编译器及其编译选项的内容......

# ruby-on-rails - 嵌套控制器中的未初始化常量错误

> ID：11305284
> 
> 赞同：2
> 
> 时间：2012-07-03T06:01:53.890
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我收到此错误：

```
Routing Error
uninitialized constant RegistrationsController 
```

这是我的日志：

```
Started GET "/registrants/1/registrations/new" for 127.0.0.1 at 2012-07-03 00:55:44 -0500

ActionController::RoutingError (uninitialized constant RegistrationsController):

Rendered /.rvm/gems/ruby-1.9.2-p0/gems/actionpack-3.1.3/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (8.5ms) 
```

这是我的 routes.rb 中合适的部分：

```
registrant_registrations GET    /registrants/:registrant_id/registrations(.:format)          {:action=>"index", :controller=>"registrations"}
                                   POST   /registrants/:registrant_id/registrations(.:format)          {:action=>"create", :controller=>"registrations"}
       new_registrant_registration GET    /registrants/:registrant_id/registrations/new(.:format)      {:action=>"new", :controller=>"registrations"}
      edit_registrant_registration GET    /registrants/:registrant_id/registrations/:id/edit(.:format) {:action=>"edit", :controller=>"registrations"}
           registrant_registration GET    /registrants/:registrant_id/registrations/:id(.:format)      {:action=>"show", :controller=>"registrations"}
                                   PUT    /registrants/:registrant_id/registrations/:id(.:format)      {:action=>"update", :controller=>"registrations"} 
```

这是我的注册控制器，位于`/app/controllers/portal/registrations_controller.rb`：

```
class Portal::RegistrationsController < ApplicationController
  def create
        @registrant = current_member.registrants.find(params[:registrant])
        @registration = @registrant.registrations.build

        respond_to do |format|
          if @registration.save
            format.html {   redirect_to root_path, :notice => "Registration successfully created!" }
            format.json { head :ok }
          else
           format.html { redirect_to root_path, :notice => "There was a problem with the registration." }
          end
        end     
  end

end 
```

当我`new_registrant_registration_path(registrant)`从`Portal#index`.

编辑：

为了完整起见，这是我在找到解决方案之前的完整 routes.rb 文件。雷达提到了我发布的要点，但我想我会把代码放在这里，以防要点被删除。

```
MyApp::Application.routes.draw do

  match 'admin' => 'admin/dashboard#index', :as => :admin_root
  match 'portal' => 'portal#index', :as => :member_root

  namespace 'admin' do
    match 'profile' => 'profile#show', :as => :profile

    resources :members
    resources :admins
        resources :packages
        resources :products
        resources :levels
        resources :lessons
        resources :registrations
        resources :registrants, :controller => 'customers/registrants'
        resources :locations
        resources :schools
        resources :terms
        resources :customers
        resources :invoices
        resources :payments
  end

  namespace 'member' do
    resources :registrations
  end

  match 'register' => 'member/registrations#new', :as => :signup  
  match 'login' => 'member_sessions#new', :as => :login
  match 'logout' => 'member_sessions#destroy', :as => :logout  
  match 'admin/login' => 'admin_sessions#new', :as => :admin_login
  match 'admin/logout' => 'admin_sessions#destroy', :as => :admin_logout

  match 'member/activate/:activation_code' => 'member/activations#create', :as => :member_activation
  match 'member/:id/activate/resend' => 'member/activations#resend', :as => :resend_member_activation
  match 'member/:id/activate' => 'member/activations#new', :as => :new_member_activation

  match 'member/password/reset/begin' => 'member/password_resets#new', :as => :new_member_password_reset, :via => :get
  match 'member/password/reset' => 'member/password_resets#create', :as => :member_password_resets, :via => :post
  match 'member/password/:token/finish' => 'member/password_resets#edit', :as => :edit_member_password_reset, :via => :get
  match 'member/password/reset' => 'member/password_resets#update', :as => :member_password_reset, :via => :put

  match 'admin/packages/new/:partial' => 'admin/packages#new'

  resources :admins

  resources :registrants, :controller => 'portal/registrants' do
    resources :registrations
  end

  resource :admin_session
  resource :member_session

  root :to => 'portal#index'

end 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T06:59:48.083

*说清楚一点：marcamillion 加入了#rubyonrails 和 Freenode 并[分享了他的`config/routes.rb`](https://gist.github.com/ebd4002ef068b10c9376). 这就是我找出他所犯的错误然后找出答案的地方。*

* * *

两件事情。

### 第一：管理员根路由

而不是像这样为您的命名空间定义根路由`admin`：

```
match 'admin' => 'admin/dashboard#index', :as => :admin_root 
```

像这样在`namespace :admin`调用中定义它：

```
namespace 'admin' do
  root :to => "dashboard#index"
end 
```

这将自动将其定义为`admin_root_path`and `admin_root_url`，因此您不需要这样做，并且它会自动为控制器添加`admin/`前缀，因此您也不需要这样做。

### 二：引用RegistrantsController

您目前在您的`config/routes.rb`:

```
resources :registrants, :controller => 'portal/registrants' do
  resources :registrations
end 
```

这将做的是定义资源路由以`registrants`正确使用`Portal::RegistrantsController`，但*不会*定义其下的嵌套路由 using `Portal::RegistrationsController`。它将尝试使用，这*就是***您收到该错误的原因**。`RegistrationsController`

 **要解决此问题，我建议您使用该`scope`方法，如下所示：

```
scope :module => Portal do
 resources :registrants do
  resources :registrations
 end
end 
```

以这种方式使用该`scope`方法时，将告诉 Rails 块内路由的控制器位于`Portal`命名空间下。这意味着它将知道 that `resources :registrants`is for`Portal::Registrants`和 that `resources :registrations`is for `Portal::Registrations`，从而修复您看到的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:14:15.237

如果你改变这一行怎么办：

```
class Portal::RegistrationsController < ApplicationController 
```

至：

```
class RegistrationsController < ApplicationController 
```

?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T06:21:38.833

这很奇怪。我认为，您的控制器应该位于`/app/controllers/registrants/registrations_controller.rb`并且看起来像这样：

```
class Registrants::RegistrationsController < Registrants::ApplicationController
  def create
    @registration = registrant.registrations.build

    ...
  end
end

class Registrants::ApplicationController < ApplicationController
  def registrant
    current_member.registrants.find(params[:registrant_id])
  end
end 
```

Registrants::ApplicationController( `/app/controllers/registrants/application_controller.rb`) 控制器的目的是避免代码重复。**

# cocos2d-android - 如何在 COCOS2d Android 1 中整合缺失的包

> ID：11305286
> 
> 赞同：1
> 
> 时间：2012-07-03T06:02:26.510
> 
> 标签：cocos2d-android

我在我的项目中使用的是 COCOS2d android，现在我需要用最新的 cocos2d 替换 COCOS2d-android。当我更换这个 jar 时，它显示以下包中的某些包无法解决错误

导入 org.cocos2d.protocols.CCTouchDelegateProtocol；导入 org.cocos2d.sound.SoundEngine；

他们是否有任何最新的 COCOS2d android jar 可用于这些文件，或者是否有任何方法可以集成这些包。

可能会出现一个问题，我为什么要这样做？ [如何在 cocos2d-android 中覆盖 ccTouchbegan（去除重叠精灵）](https://stackoverflow.com/questions/11305027/how-can-i-override-cctouchbegan-in-cocos2d-android-removal-of-overlaying-sprite)

# android - appWidget 在屏幕上的出现在不同的手机上是不同的

> ID：11305288
> 
> 赞同：1
> 
> 时间：2012-07-03T06:02:32.880
> 
> 标签：android, android-layout, android-widget

我创建了一个 WiFi 小部件。这将显示用户 wifi 详细信息及其状态。如果我要更改手机的布局格式，小部件的外观就会发生变化。我想了解更多有关**布局格式**的信息。从我的 android 手机中，我可以选择三种布局格式，即 3 X 4、4 X 4 和 5 X 4。我在下面发布了我的 Widget 布局。我确信我的小部件不会以相同的方式出现在所有手机上。我如何使它适用于每部手机。

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
 <ImageView
        android:scaleType="matrix"
        android:id="@+id/wifi_background"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

<ImageView
    android:scaleType="matrix"
    android:id="@+id/wifi_signal_strength"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

    <LinearLayout 
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_gravity="center"
        android:orientation="horizontal" >

        <ImageView
            android:scaleType="matrix"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/wifi_circle"
            android:background="@null"
            android:src="@drawable/toggle" />

        <FrameLayout android:layout_width="fill_parent"
                    android:layout_height="fill_parent">

            <ImageView
                android:scaleType="matrix"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:id="@+id/wifi_square"
                android:background="@null"
                android:src="@drawable/togglenetwork"/>

                <LinearLayout
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:paddingTop="5dp"
                    android:paddingLeft="4dp"
                    >
                    <FrameLayout 
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:paddingTop="5dp">

                        <TextView
                            android:id="@+id/wifi_status"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:maxLines="1"
                            android:ellipsize="marquee"
                            android:textStyle="bold"
                            android:textSize="10sp"/>
                        <TextView
                            android:id="@+id/wifi_on"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:textColor="@android:color/white"
                            android:maxLines="1"
                            android:ellipsize="marquee"
                            android:textStyle="bold"
                            android:textSize="11sp"/>
                    </FrameLayout>

                    <TextView
                        android:id="@+id/wifi_ip"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:textColor="@android:color/white"
                        android:textSize="7sp"
                        android:maxLines="1"
                        android:ellipsize="marquee"
                        android:paddingTop="4dp"/>
                    <TextView
                        android:id="@+id/wifi_mac"

                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:textColor="@android:color/white"
                        android:textSize="7sp"
                        android:layout_marginRight="1dp"
                        />
                </LinearLayout>
        </FrameLayout>
    </LinearLayout> 
```

# ruby-on-rails - Rails 资产未在生产中编译

> ID：11305289
> 
> 赞同：4
> 
> 时间：2012-07-03T06:02:40.930
> 
> 标签：ruby-on-rails, stylesheet, asset-pipeline

这是错误：

```
Processing by LandingPageController#index as HTML
  Rendered landing_page/index.html.erb within layouts/application (2.1ms)
Completed 500 Internal Server Error in 49ms

ActionView::Template::Error (landing_page.css isn't precompiled):
    12:     <![endif]-->
    13: 
    14:         <%= stylesheet_link_tag "application", :media => "all" %>
    15:         <%= stylesheet_link_tag params[:controller] %>
    16: 
    17:   </head>
    18:   <body>
  app/views/layouts/application.html.erb:15:in `_app_views_layouts_application_html_erb__3002306950342527375_29178380' 
```

由于第 15 行，我可以看到它正在寻找landing_page.css 文件。我不明白的是，将此资产预编译用于生产的最佳方法是什么。我试过修改/config/application.rb：

```
config.assets.precompile += ['landing_page.css'] 
```

这对我来说似乎不正确。我必须对每一个烦人的样式表都这样做。

我在 application.css 清单中添加了代码：

```
*= require landing_page 
```

这似乎不起作用。当我这样做并且不修改应用程序配置文件时，我得到了第一个错误。

我很困惑你如何能包含这条线

```
<%= stylesheet_link_tag params[:controller] %> 
```

在您的布局中，并在您运行时为生产预编译资产

```
bundle exec rake assets:precompile 
```

我觉得我错过了一些简单的技巧，当您运行 rake 任务时，它会自动将自动生成的样式表和 javascript 文件添加到要预编译的文件列表中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T07:14:44.080

添加`require landing_page`到 application.css 不会导致landing_page 被预编译。这意味着当 application.css 被预编译时，landing_page.css 的内容将包含在输出中。

如果您要单独加载它们，即

    <%= stylesheet_link_tag 参数[:controller] %>

然后，您需要将它们全部添加到要预编译的内容列表中。您可以在该列表中使用通配符，因此如果这些特定于控制器的样式表都在样式表/控制器中，那么您可以这样做

    config.assets.precompile += ["controllers/*.css"]

通常，尽管人们倾向于不这样做。虽然为了便于开发，事情通常会在每个控制器的基础上进行拆分，但所有这些都是 application.css 所必需的。Application.css 是您调用的唯一样式`stylesheet_link_tag`表

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T06:05:58.193

在你的 /config/environments/production.rb 添加这个：

```
config.assets.precompile += %w( landing_page.css) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-06T16:54:33.673

这对我来说是个新闻，所以我将分享：在 Rails 4 中，只有 application.js|css 清单文件由 Rails 自动编译。如果您使用类似的东西

```
javascript_include_tag controller_name
# ex javascript_include_tag 'guitars' 
```

如上所述，您显然需要将自定义清单（“吉他”）添加到 config.assets.precompile。我{相信}这是对 Rails 3.2 的改变。

# scala - 有没有办法从列表创建元组（没有代码生成）？

> ID：11305290
> 
> 赞同：15
> 
> 时间：2012-07-03T06:02:43.367
> 
> 标签：scala, tuples, iterable-unpacking

有时需要从小集合创建元组（例如 scalding 框架）。

```
def toTuple(list:List[Any]):scala.Product = ... 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-03T06:05:00.300

你真的不希望你的方法返回`Product`，因为这是无用的模糊。如果您希望能够将返回的对象用作元组，那么您必须知道它的数量。所以你可以做的是`toTupleN`针对不同的arities有一系列的方法。为方便起见，您可以将这些作为隐式方法添加到`Seq`.

这个怎么样：

```
class EnrichedWithToTuple[A](elements: Seq[A]) {
  def toTuple2 = elements match { case Seq(a, b) => (a, b) }
  def toTuple3 = elements match { case Seq(a, b, c) => (a, b, c) }
  def toTuple4 = elements match { case Seq(a, b, c, d) => (a, b, c, d) }
  def toTuple5 = elements match { case Seq(a, b, c, d, e) => (a, b, c, d, e) }
}
implicit def enrichWithToTuple[A](elements: Seq[A]) = new EnrichedWithToTuple(elements) 
```

并像这样使用它：

```
scala> List(1,2,3).toTuple3
res0: (Int, Int, Int) = (1,2,3) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-03T08:41:01.610

如果正如@dhg 所观察到的，您预先知道预期的数量，您可以在这里做一些有用的事情。使用[shapeless](https://github.com/milessabin/shapeless)你可以写，

```
scala> import shapeless._
import shapeless._

scala> import Traversables._
import Traversables._

scala> import Tuples._
import Tuples._

scala> List(1, 2, 3).toHList[Int :: Int :: Int :: HNil] map tupled
res0: Option[(Int, Int, Int)] = Some((1,2,3)) 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-07-03T13:41:33.257

如果你不知道前面的 arity 并想做一个可怕的骇客，你可以这样做：

```
def toTuple[A <: Object](as:List[A]):Product = {
  val tupleClass = Class.forName("scala.Tuple" + as.size)
  tupleClass.getConstructors.apply(0).newInstance(as:_*).asInstanceOf[Product]
}
toTuple: [A <: java.lang.Object](as: List[A])Product

scala> toTuple(List("hello", "world"))
res15: Product = (hello,world) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-03T15:28:22.840

你想要一个`Tuple`还是只是一个`Product`. 因为对于后者：

```
case class SeqProduct[A](elems: A*) {
  override def productArity: Int = elems.size
  override def productElement(i: Int) = elems(i)
}

SeqProduct(List(1, 2, 3): _*) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-24T17:32:52.530

基于@Kim Stebel 的想法，我编写了一个从 seq 创建元组的简单实用程序。

```
import java.lang.reflect.Constructor

/**
 * Created by Bowen Cai on 1/24/2015.
 */
sealed trait Product0 extends Any with Product {

  def productArity = 0
  def productElement(n: Int) = throw new IllegalStateException("No element")
  def canEqual(that: Any) = false
}
object Tuple0 extends Product0 {
  override def toString() = "()"
}

case class SeqProduct(elems: Any*) extends Product {
  override def productArity: Int = elems.size
  override def productElement(i: Int) = elems(i)
  override def toString() = elems.addString(new StringBuilder(elems.size * 8 + 10), "(" , ",", ")").toString()
}

object Tuples {

  private[this] val ctors = {
    val ab = Array.newBuilder[Constructor[_]]
    for (i <- 1 to 22) {
      val tupleClass = Class.forName("scala.Tuple" + i)
      ab += tupleClass.getConstructors.apply(0)
    }
    ab.result()
  }

  def toTuple(elems: Seq[AnyRef]): Product = elems.length match {
    case 0 => Tuple0
    case size if size <= 22 =>
      ctors(size - 1).newInstance(elems: _*).asInstanceOf[Product]
    case size if size > 22 => new SeqProduct(elems: _*)
  }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-09T10:03:10.273

```
scala> val numbers = Seq(1,2,4)
numbers: Seq[Int] = List(1, 2, 4)

scala> val string = numbers.mkString("(",",",")")
string: String = (1,2,4)

*** mkString(start:String, sep: String, end: String) 
```

我已经在我的 where-in-clause 中生成了它。

# ios - UIImage 没有在屏幕上绘制

> ID：11305293
> 
> 赞同：0
> 
> 时间：2012-07-03T06:02:59.760
> 
> 标签：ios, xcode, shell, uiimage

我运行 Xcode 4.3 和 Mac OSX 10.7。

我已经在一个应用程序上工作了几个星期，我面临一个特殊的问题：-

1.  我在位于根目录的文件夹中拥有该应用程序的所有资产。
2.  我有 shell 脚本，这些脚本在编译期间将这些资产放入一个包中。
3.  我已经编写了自己的方法（类似于 imageNamed: ）来处理图像缓存，并且普遍使用这种方法来制作所有 UIImages。

问题是某些图像没有反映在设备上的应用程序中，而所有图像都出现在模拟器上。

我已确保

1.  图像名称与捆绑包中的名称正确匹配
2.  将图像复制到包中（显示产品应用程序中的包内容）
3.  此文件的权限也授予（文件上的 chmod 777）

有人知道可能出了什么问题吗？

**更新 ：**

我清理了派生数据并从模拟器中卸载了应用程序并启动了它，现在相同的图像也不会出现在模拟器上，而相同的逻辑和代码适用于所有其他图像。

我面临与设备相同的问题。

此外，当我进入具有我要在屏幕上绘制的图像的屏幕时，我会收到以下错误：-

```
 <Error>: CGContextSaveGState: invalid context 0x0

 <Error>: CGContextSetBlendMode: invalid context 0x0

 <Error>: CGContextSetAlpha: invalid context 0x0

 <Error>: CGContextTranslateCTM: invalid context 0x0

 <Error>: CGContextScaleCTM: invalid context 0x0

 <Error>: CGContextDrawImage: invalid context 0x0

 <Error>: CGContextRestoreGState: invalid context 0x0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T06:05:21.133

您可以检查图像的名称。当您在设备上运行您的构建但无论哪种方式都可以在模拟器中工作时，它是区分大小写的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-03T06:57:48.860

您还必须指定图像的扩展名才能在设备上工作。

```
[UIImage imageNamed:@"test.png"]; 
```

# html - 在没有加载延迟的情况下以正确的方式嵌入声音

> ID：11305296
> 
> 赞同：1
> 
> 时间：2012-07-03T06:03:12.593
> 
> 标签：html, audio, embed

我尝试了很多选项，基本上在这里描述了[http://www.w3schools.com/html/html_sounds.asp](http://www.w3schools.com/html/html_sounds.asp)。但这一切都导致了一个大问题：一旦页面加载，它会“冻结”1-2 秒。

冻结效果来自嵌入标签（这是肯定的，因为我试图剪切标签并且一切都很好）。我的声音是非常非常基本的，有点像通知器。应该没有问题，但还是有问题。那么......你如何在网页中嵌入声音？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:10:12.057

不知道你到底想做什么。发布您尝试过的代码并描述您要完成的工作将有助于我们为您提供更多指导。

但是...我发现 jPlayer (http://jplayer.org/) 对于嵌入声音非常有用且易于使用。它很灵活，并且有很多自定义选项。

# cakephp-2.1 - 禁用 checkboxlist + FormHelper 中的一些复选框

> ID：11305297
> 
> 赞同：0
> 
> 时间：2012-07-03T06:03:14.097
> 
> 标签：cakephp-2.1

我正在渲染复选框列表；使用以下代码说 10 个复选框：

```
<?php echo $this->Form->input('User.hobbies', array('options' => $hobbies_array, 'multiple' => 'checkbox'));?> 
```

现在我想在渲染视图之前禁用其中一些复选框。意味着我不想使用 javascript 来禁用某些复选框。请建议，是否有任何类型的选项可以让我们提供复选框值数组来禁用其中一些复选框。请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:32:26.737

目前还没有任何一种`FormHelper`方法可以使用两个数组，一个用于 checkboxlist，另一个用于禁用其中一些复选框。你必须让你自己的 Helper 类被类扩展`FormHelper`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T07:46:15.090

我不确定这是否真的有效，因为我现在没有时间检查它，但似乎你可以通过[FromHelper::inputs()](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#FormHelper::inputs)完成这个。我建议你尝试这样的事情：

```
$form->inputs(array(
        'name' => array('label' => 'custom label'),
        'hobbies' => array(
            'label' => 'custom label',
            'type' => 'checkbox',
            'multiple' => true,
            'options' => $options

     )
)); 
```

其中 $options 是一个带有选项的复选框名称数组：

```
$options = array(
   'Thing1' => array(
      'Value 1' => 'Label 1',
      'disabled' => true
   ),
   'Thing2' => array(
      'Value 2' => 'Label 3'
   )
); 
```

当我有时间的时候，我也会研究这个，因为这个概念很有趣。我不知道我什么时候有时间做一些研究，但我会发表评论或相应地更新我的答案。

# ssh - 如何使用 Putty 连接到路由器

> ID：11305299
> 
> 赞同：-1
> 
> 时间：2012-07-03T06:03:15.920
> 
> 标签：ssh, putty

我正在尝试使用 Putty 直接连接到路由器。使用以下命令，我可以连接到终端服务器：

`putty.exe -ssh <IP> p 22 -l <user> -pw <mypassword>`

输出`TS#`

使用该命令，Putty 将直接打开 TS#，然后我在 Putty 中输入路由器名称以转到路由器。

输出：`routername#`

我的问题是：如何使用 SSH 直接连接到路由器，使用以下命令：

`putty.exe -ssh <IP> p 22 -l <user> -pw <mypassword>`

我应该添加什么命令以便在连接终端服务器后直接连接到路由器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:08:33.233

您可以使用该`-m`标志在登录时执行脚本。

> **3.8.3.6 -m：从文件中读取远程命令或脚本**
> 
> -m 选项执行与 PuTTY 配置框的 SSH 面板中的“远程命令”框类似的功能（请参阅第 4.18.1 节）。然而，-m 选项期望被赋予一个本地文件名，并且它将从该文件中读取一个命令。
> 
> 对于某些服务器（尤其是 Unix 系统），您甚至可以在该文件中放置多行并依次执行多个命令或整个 shell 脚本；但这可以说是一种滥用，并且不能期望在所有服务器上都有效。特别是，众所周知，它不能与某些“嵌入式”服务器一起使用，例如 Cisco 路由器。
> 
> 此选项在文件传输工具 PSCP 和 PSFTP 中不可用。

通过[http://the.earth.li/~sgtatham/putty/0.62/htmldoc/Chapter3.html#using-cmdline](http://the.earth.li/%7Esgtatham/putty/0.62/htmldoc/Chapter3.html#using-cmdline)

# android - WebView 向服务器发送引荐来源网址

> ID：11305302
> 
> 赞同：1
> 
> 时间：2012-07-03T06:03:46.073
> 
> 标签：android, android-webview

如何在 webView 的 url 中发送引用者？存在一个方法 loadUrl (String url, Map additionalHttpHeaders)，但我有一个 7 Api。

我就是这样尝试的

```
 mWebView.getSettings().setJavaScriptEnabled(true); 
 mWebView.getSettings().setUserAgentString("");
 mWebView.setWebViewClient(new HelloWebViewClient());
 String query = "referer=http://donmob.com/";
 mWebView.postUrl("http://donmob.com/",EncodingUtils.getBytes(query, "BASE64")); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-03T07:07:17.863

我认为下面的帖子有你的答案

[如何将 URL 请求作为“Referer”发送](https://stackoverflow.com/questions/9903496/how-to-send-a-url-request-as-referer)

[如何在 webView 的 url 中发送引用请求](https://stackoverflow.com/questions/5342399/how-to-send-a-referer-request-in-a-url-for-a-webview)

在这里，他们使用带有附加 HttpHeaders 参数的 loadUrl()，并且此功能从 Android 2.2 开始可用。

# r - 删除任何重复项及其对

> ID：11305308
> 
> 赞同：2
> 
> 时间：2012-07-03T06:04:36.673
> 
> 标签：r

`duplicated()`给出`TRUE`或`FALSE`声明取决于该位置是否在向量中先前重复。如果我不仅要删除重复的位置，还要删除它重复的所有先前位置怎么办。

```
a <- c("A", "B", "C")
b <- c("A", "B", "C", "D") 
```

`a`包含所有将被复制的值，并`b`包含 的值`a`和其他一些不被复制的值。

我如何只提取`"D"`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T06:26:14.970

这是另一个：

```
b[!b %in% a]
[1] "D" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T06:16:47.300

如果你真正拥有的是一个单一的向量，其中一些元素是重复的，而一些（你想保留的）不是，你可以尝试以下任何一种：

```
## Constructing an example that fits your narrative description of the situation
a <- c("A", "B", "C")
b <- c("A", "B", "C", "D")
ab <- c(a,b)

# Approach #1
setdiff(ab, ab[duplicated(ab)])
# [1] "D"

# Approach #2 
ab[!(duplicated(ab) | rev(duplicated(rev(ab))))] 
# [1] "D" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T08:19:35.763

以下是展示@Josh O'Brien、@cogitovita 和@jmsigner 发布的解决方案如何处理更大数据集的一些时间安排：

```
set.seed(123)

a = sample(paste("ID_", seq(1e6), sep=""))
b = sample(a, 9e5, replace=TRUE)
ab = sample(c(a, b))

system.time(res1 <- setdiff(ab, ab[duplicated(ab)]))
#   user  system elapsed 
#  1.543   0.030   1.563 

system.time(res2 <- ab[!(duplicated(ab) | rev(duplicated(rev(ab))))])
#   user  system elapsed 
#  0.537   0.042   0.575 

system.time(res3 <- names(table(ab))[table(ab) == 1])
#   user  system elapsed 
# 52.208   0.255  52.218 

system.time(b[!b %in% a])
#user  system elapsed 
#0.098   0.002   0.100 

setequal(res1, res2)
# [1] TRUE
setequal(res1, res3)
# [1] TRUE 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T06:18:13.403

```
> table(c(a, b))
# A B C D
# 2 2 2 1
> names(table(c(a, b)))[table(c(a, b)) == 1]
# [1] "D" 
```

# mono - 单声道 mkbundle 和西里尔文路径

> ID：11305309
> 
> 赞同：0
> 
> 时间：2012-07-03T06:04:36.633
> 
> 标签：mono, mkbundle

我正在使用 mkbundle 实用程序在 Windows 上将 Mono 与我的 WinForms 应用程序捆绑在一起。我已经按照这里描述的过程：[Can not compile simple C# application with mkbundle](https://stackoverflow.com/questions/4474613/can-not-compile-simple-c-sharp-application-with-mkbundle)。应用程序构建和运行得很好，但前提是可执行文件的路径不包含西里尔符号。如果路径包含此类符号（俄语中的文件夹名称等），应用程序根本不会启动（不显示错误消息）。似乎问题发生在托管代码运行之前。有什么方法可以诊断和解决这样的问题吗？我没有使用 C 代码的经验，所以我不知道应该在 host.c 文件或 GCC 选项中更改什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:06:08.593

解决方案是在 mkbundle 生成的 host.c 中（在 main 方法中）设置 MONO_EXTERNAL_ENCODING 变量：

```
SetEnvironmentVariable("MONO_EXTERNAL_ENCODINGS", "UTF16"); 
```

# overlay - Web 编程：加载 DOM 后显示叠加层

> ID：11305318
> 
> 赞同：0
> 
> 时间：2012-07-03T06:05:31.580
> 
> 标签：overlay

在网页上加载所有内容后如何显示覆盖元素？我不知道在“DOM”加载后该怎么称呼它？或文件准备好了吗？请填写

我正在使用来自该站点的 jquery 插件：http://jquerytools.org/documentation/overlay/ 该站点上的示例显示了如何显示覆盖，但仅在单击某些内容后我想知道如何在所有事情之后立即显示已加载只是为了制作带有登录覆盖的登录页面。

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:24:16.023

in `jquery` you can use

```
$(document).ready(function () {
   //do what ever
}); 
```

or if you want you can use pure javascript like this

```
window.onload = function(e){ 
    //do something
} 
```

they both do and mean the same thing. When the page elements are finished loading, like `divs` `span`, `p tags` and `text`.. do something.. this is needed because like in your case you have a div you want to show like an overlay, but if you don't wait until everything is loaded that div may not exist when your javascript wants to show it.

# php - 修复php中的错误

> ID：11305319
> 
> 赞同：0
> 
> 时间：2012-07-03T06:05:32.910
> 
> 标签：php

我的 php 文件中出现以下错误：

注意：未定义索引：第 13 行 /clientdata/zeus-dynamic-1/c/r/crowndoor.com.au/www/crowntest/contact.php 中的 errStr

注意：未定义索引：在第 20 行的 /clientdata/zeus-dynamic-1/c/r/crowndoor.com.au/www/crowntest/contact.php 中发送

它出现在浏览器窗口的顶部。我尝试使用以下方法关闭通知：error_reporting(E_ALL ^ E_NOTICE); 但这似乎没有任何区别。我现在正在尝试修复未定义的索引。我的php如下：

```
<?php
session_name("fancyform");
session_start();

$_SESSION['n1'] = rand(1,20);
$_SESSION['n2'] = rand(1,20);
$_SESSION['expect'] = $_SESSION['n1']+$_SESSION['n2'];

$str='';
if($_SESSION['errStr'])
{
    $str='<div class="error">'.$_SESSION['errStr'].'</div>';
    unset($_SESSION['errStr']);
}
if (!isset($_POST['errStr'])) 
{
//If not isset -> set with dumy value 
$_POST['errStr'] = "undefine"; 
}

$success='';
if($_SESSION['sent'])
{
    $success='<h1>Thank you!</h1>';

    $css='<style type="text/css">#contact-form{display:none;}</style>';

    unset($_SESSION['sent']);
}
?> 
```

如果有人对如何解决这些通知的出现有任何想法，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:15:47.770

在 php 页面顶部添加代码。

```
<?php error_reporting(0); ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T06:09:02.017

这意味着您要查找的数组索引不存在。处理该问题的两种方法是确保它存在，然后此错误消息将指出您的应用程序中的逻辑缺陷。或者，如果索引可能*不合法*存在，`isset`请在访问它之前使用来检查。请参阅[PHP 的 isset 和 empty 权威指南](http://kunststube.net/isset/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T06:10:17.560

You can however check manually yourself without interfering the php.ini setting as it will add more complication on the deployment when you migrate your server one day.

To check manually, please see the following code...you have done it in a line somewhere in your code though...

```
<?php
if (isset($_SESSION['sent'])) {
    $success='<h1>Thank you!</h1>';
    $css='<style type="text/css">#contact-form{display:none;}</style>';
        unset($_SESSION['sent']);
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T06:14:50.933

转告通知，如：

`error_reporting(E_ALL & ~E_NOTICE`)

和/或首先检查数组键的存在。

```
$sent = array_key_exists('sent', $_SESSION) ? $_SESSION['sent'] : null; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T06:08:07.010

你为什么`isset()`不像你那样使用 with `$_POST['errStr']`？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-03T06:08:10.367

您需要先检查密钥是否存在。

```
if(isset($_SESSION['errStr']) && $_SESSION['errStr']) { 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-03T06:08:43.660

更改第 13 行：

```
if($_SESSION['errStr']) 
```

至：

```
if(isset($_SESSION['errStr'])) 
```

# android - 为每个主屏幕设置墙纸

> ID：11305324
> 
> 赞同：0
> 
> 时间：2012-07-03T06:06:01.110
> 
> 标签：android, wallpaper, homescreen

我是android开发的新手。我使用以下代码将壁纸设置为每个主屏幕。在此代码中，它首先会要求用户输入主屏幕可用性编号。

用户输入他们有 3 个主屏幕意味着它将要求他们从 sdcard 中选择三个壁纸，我得到这三个图像并将其更改为设备默认屏幕尺寸并组合该位图图像并将其设置为主屏幕墙纸。

```
 public void onCreate(Bundle savedInstanceState) {
         Display display = getWindowManager().getDefaultDisplay();
    dwidth = display.getWidth();
    dheight = display.getHeight();
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main1);          
    Log.i("WALLPAPER", "" + dwidth);
    Log.i("WALLPAPER", "" + dheight);
    width1 = dwidth;
    height1 = dheight;
    scno = (EditText) findViewById(R.id.screenno);
    image = (ImageView) findViewById(R.id.imageview1);
    wallpaper=(Button) findViewById(R.id.setwallpaper);
    selectimage = (Button) findViewById(R.id.selectimg);
    selectimage.setVisibility(View.VISIBLE);
    selectimage.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if(scno.getText().toString().length()<=0){
        Toast.makeText(getApplicationContext(),"Enter The number Of Screen",Toast.LENGTH_LONG).show();
            }
            else{
            nmscreen = scno.getText().toString();               
            noofscreen = Integer.parseInt(nmscreen);            
            Log.i("WALLPAPERDEMO", "" + noofscreen);                
            Intent intent1=new Intent();
            intent1.setType("image/*");
            intent1.setAction(Intent.ACTION_GET_CONTENT);
            startActivityForResult(Intent.createChooser(intent1, "Complete action using"), PICK_FROM_FILE);             
            }
        }
    });

    wallpaper.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if(scno.getText().toString().length()<=0){
                Toast.makeText(getApplicationContext(),"Enter The Number Of Screen",Toast.LENGTH_LONG).show();
            }
            else{
            WallpaperManager mywallpapermanager=WallpaperManager.getInstance(getApplicationContext());

            try{
                mywallpapermanager.setBitmap(change);
                selectimage.setEnabled(true);

            }catch (IOException e) {
                // TODO: handle exception
                e.printStackTrace();
            }
            image.setImageBitmap(null);
            scno.setText("");
        }
        }

    });
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode != RESULT_OK)return;
    Log.d("WALLPAPERDEMO", "Count: " + count);
    switch (requestCode) {
        case PICK_FROM_FILE:
            mImageCaptureUri = data.getData();
            Log.i("WALLPAPERDEMO","Calling doCrop() "+mImageCaptureUri.toString());
            doCrop();
            break;
        case CROP_FROM_CAMERA:          
            Bundle extras = data.getExtras();
            if (extras != null) {               
                photo = extras.getParcelable("data");               
                Log.d("WALLPAPERDEMO",""+photo.getWidth());                 
                Log.d("WALLPAPERDEMO",""+photo.getWidth());
                bitmapArray.add(photo);
                 count++;
                 Log.d("WALLPAPERDEMO","Count"+count);
                 if(count<noofscreen){
                        Log.d("WALLPAPERDEMO","Outside Switch"+count);
                        Intent intent1=new Intent();
                        intent1.setType("image/*");
                    intent1.setAction(Intent.ACTION_GET_CONTENT);
                        startActivityForResult(Intent.createChooser(intent1, "Complete action using"), PICK_FROM_FILE);
                 }else{
                     firstimage = new Bitmap[count];
                        for (i = 0; i <count; i++) {
                            firstimage[i] = bitmapArray.get(i);
                        }
                        setImage(firstimage);
                        selectimage.setEnabled(false);
                 }
                File f = new File(mImageCaptureUri.getPath());            
                if (f.exists()) f.delete();
                break;
        }           
    }               
}       

private void setImage(Bitmap[] firstimage) {

    change = Bitmap.createScaledBitmap(firstimage[0], width1, height1, true);
    for(int i=1;i<firstimage.length;i++){
            Log.d("WALLPAPERDEMO", "" + firstimage[i].getWidth());
            Log.d("WALLPAPERDEMO", "change " + change.getWidth());
            change1 = Bitmap.createScaledBitmap(firstimage[i], width1, height1, true);
            Log.d("WALLPAPERDEMO", "change1 " + change1.getWidth());
            change = combineImages(change, change1);
            Log.d("WALLPAPERDEMO", ""+change.getWidth());
    }

    image.setImageBitmap(change);

}

public Bitmap combineImages(Bitmap change1, Bitmap change) {
    Bitmap cs = null;
    int width, height = 0;

    if (change1.getWidth() > change.getWidth()) {
        width = change1.getWidth() + change.getWidth();
        height = change1.getHeight();
    } else {
        width = change.getWidth() + change1.getWidth();
        height = change.getHeight();
    }
    cs = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);

    Canvas comboImage = new Canvas(cs);

    comboImage.drawBitmap(change, 0f, 0f, null);
    comboImage.drawBitmap(change1, change.getWidth(), 0f, null);
    return cs;

} 
```

我正在运行此应用程序并使用真实设备检查它是否可以正常工作。但在某些设备中，屏幕尺寸不适合。我的代码有什么问题。我正在获取设备的默认屏幕尺寸，为了组合图像，我将选定的位图图像更改为默认屏幕尺寸，然后仅组合图像并将其设置为墙纸。

请帮我为每个主屏幕设置壁纸。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:01:07.377

xlarge 屏幕至少 960dp x 720dp 大屏幕至少 640dp x 480dp 普通屏幕至少 470dp x 320dp 小屏幕至少 426dp x 320dp

将您的资源保存在此文件夹中。

# javascript - jQuery Mobile：选择菜单中的空选项问题（下拉列表）

> ID：11305338
> 
> 赞同：0
> 
> 时间：2012-07-03T06:07:06.837
> 
> 标签：javascript, android, jquery-mobile, cordova

我在中实现**了下拉列表**“**选择菜单**”***`jQuery Mobile.`***

```
 <div data-role="fieldcontain">
          <label for="name" class="select ui-select" style ="vertical-align:baseline; width:33%; " ><b>Application:</b></label>
          <select name="select_choice" data-theme="c" class="ui-btn ui-btn-icon-right ui-btn-corner-all ui-shadow ui-btn-hover-c" id="editWSAppType" >

          <option value="EmptyOption">"  "</option> <!--EMPTY OPTION-->
          <option value="Other">Other</option>
          <option value="Other2">Other2</option>
          <option value="Other3">Other 3</option>

          </select>
    </div> 
```

所有选项都显示在下拉列表中，但存在标签对齐问题。

我暂时用过**`vertical-align:baseline`**。我也尝试了其他对齐属性。

但是**在 EMPTY OPTION 的情况下，与其他选项相比，标签的位置会更改为向下**。

我的应用程序中的许多选择菜单都有同样的问题。

一些选择菜单没有任何 opstrong texttions 这些也有同样的问题。

```
<div data-role="fieldcontain">
      <label for="name" class="select ui-select" style ="vertical-align:baseline; width:33%; " ><b>Application:</b></label>
      <select name="select_choice" data-theme="c" class="ui-btn ui-btn-icon-right ui-btn-corner-all ui-shadow ui-btn-hover-c" id="editWSAppType" >
           <!--NO OPTIONS-->
      </select>
</div> 
```

![在此处输入图像描述](../Images/6592c44a362270d39b033e0bc9e9a00e.png)

![在此处输入图像描述](../Images/d257b66dafb357b8ce71b89d4088b1d1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:18:06.637

在`for`标签的属性中，您应该放入`id`您的选择（您目前拥有`"name"`）

```
<div data-role="fieldcontain">
          <label for="editWSAppType" class="select ui-select"  ><b>Application:</b></label>
          <select  name="select_choice" data-theme="c" class="ui-btn ui-btn-icon-right ui-btn-corner-all ui-shadow ui-btn-hover-c" id="editWSAppType" >

          <option value="EmptyOption"></option> <!--EMPTY OPTION-->
          <option value="Other">Other</option>
          <option value="Other2">Other2</option>
          <option value="Other3">Other 3</option>

          </select>
    </div> 
```

# ruby-on-rails-3 - 什么是在 Ruby on Rails Web 应用程序中广泛使用的有用 gem

> ID：11305340
> 
> 赞同：0
> 
> 时间：2012-07-03T06:07:09.800
> 
> 标签：ruby-on-rails-3, rubygems

什么是在 Ruby on Rails Web 应用程序中广泛使用的有用 Gems。
我要求学习目的。
请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:56:34.540

我强烈推荐[https://www.ruby-toolbox.com/](https://www.ruby-toolbox.com/)，它多次帮助我找到适合工作的宝石。

# twitter - 如何在@anywhere twitter API 中设置回调 URL

> ID：11305346
> 
> 赞同：2
> 
> 时间：2012-07-03T06:07:40.493
> 
> 标签：twitter, twitter-anywhere

我正在使用@anywhere twitter API，我想使用推文框发布推文。我已经完成了以下步骤：

我注册的应用程序和消费者密钥如下。我将回调 URL 留空。

1.  我在注册应用程序时设置了回调 URL 为空白
2.  消费者密钥：94zA1u34whtdXz91Kjymgw

    ```
    <script src="http://platform.twitter.com/anywhere.js?id=94zA1u34whtdXz91Kjymgw&v=1" type="text/javascript">
    </script>
    <script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.5.1.js">
    </script> 
    ```

我正在创建如下推文框，

```
$(document).ready(function () {
       $('#shareonTwitter').click(function (e) {
           alert('hello1234567');
           twttr.anywhere.config({ callbackURL: "http://localhost:1461/ShareonTwitter.html" });
           twttr.anywhere(function (T) {
               T("#tbox").tweetBox({
                   height: 100,
                   width: 400,
                   defaultContent: "Hi how r u ?"
               });
           });
       });
   }); 
```

身份验证技术问题后出现错误。我无法发推文。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:00:06.070

I read myself a little into the documentation and I found the following:

> Please note: The call to twttr.anywhere.config() must precede the call to twttr.anywhere(). And the callback URL must match both the subdomain and domain of the web application utilizing @Anywhere.
> 
> **Authorizing Additional Domains for @Anywhere**
> 
> Some implementors may want their @Anywhere API Key to function across multiple domains or subdomains. By default, @Anywhere will only work with the domain specified in the "Callback URL" field of the application record.
> 
> To authorize additional domains for @Anywhere, begin by going to your applications, and clicking on the @Anywhere application name you want to configure. Now select Manage Domains from the right-hand sidebar.
> 
> You can enter up to 5 additional domains here, by typing a domain name you want to authorize in the field provided and clicking Authorize. Be sure and only authorize domains that you trust.

[https://dev.twitter.com/docs/anywhere/welcome#custom-callback](https://dev.twitter.com/docs/anywhere/welcome#custom-callback)

Any callback url must be in your authored domains. This means that you must had localhost in your domain list. Since you can't register localhost with you api/consumer key you can't do this on localhost.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:27:03.417

我认为您不能将本地主机地址用作回调 URL。将代码托管在某处的 Web 服务器上后尝试该代码。

# asp.net - 带有 IE8 问题的 ASP.NET UpdatePanel 和 TabIndex

> ID：11305347
> 
> 赞同：0
> 
> 时间：2012-07-03T06:07:51.240
> 
> 标签：asp.net, internet-explorer-8, updatepanel, cross-browser

示例 Visual Studio 2008 ASP.NET 3.5 项目：[源代码](https://docs.google.com/open?id=0B6uh3_tQ_xBCZ0hGVGstMzNIdFU)

## **代码**

```
<form id="form1" runat="server">
    <asp:ScriptManager runat="Server" EnableScriptGlobalization="true"
    EnableScriptLocalization="true" ID="ScriptManager1" ScriptMode="Debug" />
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional" RenderMode="Inline">
    <ContentTemplate>
        <div runat="server">
            test
            <br />
            <br />
            <asp:TextBox ID="TB1" runat="server" AutoPostBack="True" OnTextChanged="UIDataChanged" />
            <br />
            <asp:TextBox ID="TB2" runat="server" AutoPostBack="True" OnTextChanged="UIDataChanged" />
            <br />
            <asp:TextBox ID="TB3" runat="server" AutoPostBack="True" OnTextChanged="UIDataChanged" />
            <br />
            <asp:TextBox ID="TB4" runat="server" AutoPostBack="True" OnTextChanged="UIDataChanged" />
            <br />
            <br />
            <asp:Label ID="Label1" runat="server" Text="Counter"></asp:Label>
            <br />
            <br />
        </div>
    </ContentTemplate> 
</asp:UpdatePanel>
</form> 
```

基本上我正在将应用程序从 IE6 转换到 IE8。我遇到了一个我无法解决的情况。我到处寻找并发现了一些文章，但没有足够详细的。

基本上在示例项目中，您会发现 4 个文本框，每个文本框都配置为`AutoPostBack="true"`并触发一个示例`OnTextChange="UIDataChanged"`事件。

我**强制**使用 IE8 渲染模式：`<meta http-equiv="X-UA-Compatible" content="IE=8" />`

## **重现错误：**

*注意：我将文本框 1 到 4 称为 TB1、TB2 等。*

*   启动 IE8 和 TAB 到 TB1 输入一些文本。
*   再次按 TAB，您会注意到这会触发回发并将光标返回到 TB1。注意：我还没有做任何花哨的事情来保持光标位置。
*   再次按 TAB 会将您带到 TB2，您可以在其中输入一些文本。
*   再按一次 TAB 后，又发生一次回发，光标跳到 TB3。但这就是问题所在：无法进行进一步的编辑，并且如果您连续 TAB，您将不再移动任何文本框。

## **更新1：**

在 Visual Studio 2010 和 IE9 浏览器中测试了上述内容。

**测试用例 1：**

*   浏览器模式：IE=9
*   框架：4.0
*   结果 - 文本字段上的选项卡按预期工作

**测试用例 2：**

*   浏览器模式：IE=9
*   框架：3.5
*   结果 - 文本字段上的选项卡按预期工作

**测试用例 3：**

*   浏览器模式：IE=8
*   框架：4.0
*   结果 - 在第二个 TextBox 之后断开的制表符

**测试用例 4：**

*   浏览器模式：IE=8
*   框架：3.5
*   结果 - 在第二个 TextBox 之后断开的制表符

*根据上述发现，似乎问题可能出在 Internet Explorer 渲染引擎中。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T01:08:35.030

根据调查结果，我得出的结论是，这绝对是 IE8 渲染问题。它的行为与 IE7 和 IE9 不同。

根据进一步调查，IE7 和 IE8 在渲染方面的差异也太大，无法实际执行 IE7 模式。强制执行 IE7 模式将解决选项卡问题，但可能会引入更多复杂性，具体取决于其他样式“修复”以适应 IE8。

对于将来的更新，如果 Internet Explorer 9 确实可用或者是每个用户的标准操作环境的一部分，那么我建议强制执行 IE9 渲染或 IE'edge' 以符合标准。

# php - 在给定递归查询的 php 中显示树结构输出

> ID：11305351
> 
> 赞同：0
> 
> 时间：2012-07-03T06:08:22.857
> 
> 标签：php, phpquery

我必须以树格式显示此 pgsql 查询的输出

```
WITH RECURSIVE SYSTEM_PARTS("PART","PART_NUM","NODE_ID","PARENT_ID")
            AS
            (
                select p."PART",p."PART_NUM",hd."NODE_ID",hd."PARENT_ID" from relma_hierarchy_data hd
                INNER JOIN relma_part p on p."PART_NUM"=hd."FK_ID"
                where hd."HIERARCHY_ID"=2 and hd."NODE_ID"=16515 and hd."PARENT_ID"=hd."NODE_ID"

                UNION

                select p."PART",p."PART_NUM",hd."NODE_ID",hd."PARENT_ID" from relma_hierarchy_data hd
                INNER JOIN relma_part p on p."PART_NUM"=hd."FK_ID"
                , SYSTEM_PARTS sp
                where hd."HIERARCHY_ID"=2 and  sp."NODE_ID"=hd."PARENT_ID" AND hd."NODE_ID"<>hd."PARENT_ID"

            )
        select * from SYSTEM_PARTS'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T22:04:49.487

1) 如果这是 LOINC 数据，则 NODE_ID = PARENT_ID 表示树的根。

2) 此外，树的 PATH_ENUMERATION（“杜威十进制数”）可以帮助解决显示问题（如 002.014.003 是 002.014 的第三个孩子）。

# c++ - SuSE Linux 网络异常系统日志文件

> ID：11305353
> 
> 赞同：0
> 
> 时间：2012-07-03T06:08:24.343
> 
> 标签：c++, linux, network-programming

我发布了一个[关于](https://stackoverflow.com/questions/11151140/socket-select-fails-with-operation-in-progress-non-blocking-mode)严重拥塞下网络行为的问题。作为后续问题，我想了解以下方面

*   假设具有此类代码的应用程序存在于部署环境中，向用户证明问题是由于网络拥塞的最佳方法是什么。我真正的问题是：是否有系统级网络活动记录机制（至少对于异常情况）？
*   是否有任何其他间接方法可以向用户证明这一点？表示此类系统活动下的任何命令，可以获取有关系统网络活动的特定信息。

PS：我知道那里有非常好的工具可以在这种情况下帮助我们。但是，由于问题发生在部署区域，我们仅限于使用系统提供的默认工具和日志。

这方面的任何建议/研究链接都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:33:16.810

> 是否有系统级网络活动记录机制？

就在这里。看看[syslog](http://linux.die.net/man/3/syslog)。您应该在应用程序中定义要记录每条消息的级别。

> 是否有任何其他间接方法可以向用户证明这一点？

那要看。如果你有一个 GUI，那么你可以弹出一个带有适当警告文本的消息框。

# node.js - 新手节点 JS 查询

> ID：11305355
> 
> 赞同：1
> 
> 时间：2012-07-03T06:08:34.900
> 
> 标签：node.js

我是 node.js 的新手，我想知道一些基本的事情：

1.  项目文件放在哪里？就像 PHP 一样，我们把它们放在`www/`OR中`htdocs/`。

2.  我将它们放在文档中的一个文件夹中并尝试了`node /path/to/folder/example.js`. 它是否正确？

3.  我尝试了节点官方文档中的第一个程序，它只是打印`...`到控制台而不是打印`Server is running at 127.0.0.1:8080`。文件夹结构可能是造成这种情况的原因吗？

4.  是否可以使用 node.js 制作整个网站，或者只能制作特定的模块？什么样的模块？

请指导我！

谢谢！

**编辑：**

这是我尝试过的代码，它是 Node 文档中的第一个“简单 Web 服务器”示例：

```
var http = require('http');

http.createServer(function (request, response) {
    response.writeHead(200, {'Content-Type': 'text/plain'});
    response.end('Hello World\n');
}).listen(8124);

console.log('Server running at http://127.0.0.1:8124/'); 
```

**编辑：**

此代码仅打印出以下内容：

```
>node example.js
... 
```

甚至不返回节点提示！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T08:22:19.623

1.  只要运行`node`命令的用户有权访问该位置，您将文件放在哪里并不重要。

    事实上，我建议您将 node.js 源文件**放在**任何`www`或`htdocs`文件夹（或任何公开可用的文件夹）之外，因为否则`.js`源文件在使用您的网络服务器提供时可能是世界可读的（包括任何可能的安全凭证在源文件中，让你暴露）。

2.  是的，这是运行节点脚本的正确方法。但是，我建议首先`cd`进入正确的目录并`node example.js`从那里运行以防止路径解析错误，尤其是当您`npm`稍后开始使用各种模块时。

3.  可能不是。如果没有看到您首先尝试运行的代码，很难判断，但如果由于文件夹结构等原因发生任何路径解析错误，则`node`只会以令人讨厌的错误退出，而不是打印“...”。

4.  是的，可以使用 `node`. 事实上，有各种`npm`模块可以帮助您更轻松地完成任务。我建议你看看：

    *   [快递框架](http://expressjs.com/)
    *   [煎茶连接](http://www.senchalabs.org/connect/)

    这些框架提供了许多花里胡哨的功能，可以扩展`node`以使其作为一个成熟的网络服务器（cookies、vhosts、会话、路径路由等）更加可行。

**编辑**

详细说明答案 nr.3：我已经尝试了您粘贴的代码，既来自我在答案 nr.2 中推荐的正确文件夹，也使用绝对路径；他们都工作正常：

```
remco@Prosperpine ~ $ node tests.js 
Server running at http://127.0.0.1:8124/
^C

remco@Prosperpine ~ $ cd /
remco@Prosperpine / $ node /Users/remco/tests.js 
Server running at http://127.0.0.1:8124/ 
```

因此节点服务器启动并在 上提供内容`http://127.0.0.1:8124/`，这也可以：

```
remco@Prosperpine ~ $ wget http://127.0.0.1:8124/ && cat index.html
--2012-07-03 13:25:32--  http://127.0.0.1:8124/
Connecting to 127.0.0.1:8124... connected.
HTTP request sent, awaiting response... 200 OK
Length: unspecified [text/plain]
Saving to: `index.html'

    [ <=>     ] 12          --.-K/s   in 0s      

2012-07-03 13:25:32 (901 KB/s) - `index.html' saved [12]

Hello World
remco@Prosperpine ~ $ 
```

因此，我们可以得出结论，您正在尝试的代码没有任何问题。可能你的`node`安装有问题。这是在 Linux、OSX 还是 Windows 上？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T23:47:34.993

您的问题是您试图从节点的 REPL 内部运行您的服务器。您需要直接从 Windows 命令行运行它。您得到的“...”意味着节点的 REPL 没有看到有效 JavaScript 表达式的结尾，因此正在等待您输入更多内容。

为了回应您对上一个答案的最后评论，REPL 在调用后打印“未定义”的原因`console.log()`是它正在将其评估为一个表达式（这恰好有一个副作用，即打印出消息）然后尝试打印它的返回值；因为`console.log()`实际上并没有返回任何东西（它只用于它的副作用），这就是你得到“未定义”的原因。

# c# - 如何使用 IIS6 删除 ASP.net C# MVC3 应用程序中的 url 重写？

> ID：11305356
> 
> 赞同：0
> 
> 时间：2012-07-03T06:08:35.837
> 
> 标签：c#, asp.net-mvc-3, iis-6

我已经使用 MVC3 开发了 ASP.net(C#) 应用程序，但我被迫在不支持 url 重写的 IIS6 服务器中运行它。而且我也没有 default.aspx 文件。我认为我无法更改IIS 服务器配置也是如此。以下显示了我的 Global.asax。

```
public class MvcApplication : System.Web.HttpApplication
{
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new HandleErrorAttribute());
    }

    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

    }

    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);
    }
} 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:11:56.333

I'm not sure what do you want but maybe this will help: [http://www.asp.net/mvc/tutorials/older-versions/deployment/using-asp-net-mvc-with-different-versions-of-iis-cs](http://www.asp.net/mvc/tutorials/older-versions/deployment/using-asp-net-mvc-with-different-versions-of-iis-cs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:19:56.830

@LittleOne：伙计，第一件事。不要偏离这个问题，问题是如何在 IIS 6 上部署 MVC 3。使用[它](http://blog.stevensanderson.com/2008/07/04/options-for-deploying-aspnet-mvc-to-iis-6/)来部署它。它对我们有用。祝你好运。

# javascript - JavaScript：检测对象属性删除

> ID：11305360
> 
> 赞同：2
> 
> 时间：2012-07-03T06:09:24.347
> 
> 标签：javascript

有没有办法检测对象属性删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:42:19.720

是的，有可能。就像您可以对属性使用 setter/getter 一样，您可以对对象属性使用“删除器”函数。

```
function myFunc() {}
myFunc.prototype = {
    constructor: myFunc,

    deleteProp: function( prop ) {
        delete this[ prop ];
    }
}; 
```

在该`deleteProp`方法中，您可以在之前和之后做任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T06:42:26.147

[您可以使用hasOwnProperty](http://es5.github.com/#x15.2.4.5)或propertyIsEnumerable检查对象本身是否存在[属性](http://es5.github.com/#x15.2.4.7)，但这本身不会告诉您该属性是否曾经存在并随后被删除。您可以使用以下方法测试自己的属性和继承的属性是否具有值：

```
if (typeof obj.prop != 'undefined') 
```

但这并不能告诉您该属性是否存在，只告诉您它是否被赋予了*undefined*以外的值。请注意，如果属性已创建但未分配属性，它仍将返回*undefined*。对于大多数目的来说，这就足够了。

你想用这个做什么？[在 ES5 中，您可以使用Object.create](http://es5.github.com/#x15.2.3.5)和[Object.defineProperty](http://es5.github.com/#x15.2.3.6)创建不可删除的属性，但某些浏览器缺乏支持，因此不适合一般 Web。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T06:13:37.707

您不能覆盖删除运算符，因此除了定期检查属性是否仍然存在之外，我认为您不能这样做。

**编辑：这是 2012 年的正确答案。现在使用**[代理](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy)显然很容易

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-18T20:29:16.303

ES6 代理呢？（[MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy)用于参考，[stackoverflow](https://stackoverflow.com/a/45521928/4062197)为简单起见）

文档明确指出，您可以为“ **deleteProperty”添加一个****“陷阱”** ......或者简单地说 -每当从特定对象中删除属性时**“监听” （** [MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/deleteProperty)进行救援）

 ****```
const myObject = { say: 'hello', to: 'proxy' }
const proxyHandler = {
  deleteProperty(target, prop) {
    if (prop in target) {
      delete target[prop]
      console.log(`property removed: ${prop}`)
    }
  }
}
const proxy = new Proxy(myObject, proxyHandler)
delete proxy.to
console.log(myObject) 
```

另外，请检查[我可以使用](https://caniuse.com/#search=proxy)浏览器的可比性

干杯!****

# android - Micromax funbook平板中的Android开发

> ID：11305361
> 
> 赞同：9
> 
> 时间：2012-07-03T06:09:27.087
> 
> 标签：android

是否可以在 Micromax funbook 平板电脑中开发 Android 应用程序？
我是否必须安装任何驱动程序才能在 funbook 中部署 android 应用程序？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-04T07:32:08.530

从以下论坛主题的第一篇文章中找到一个。

[生根 Micromax Funbook 最简单的方法！！！！](http://forum.xda-developers.com/showthread.php?t=1662010)

我只下载了 ADB_Driver.rar，安装它并为我工作。

你可以**[从这里下载](http://forum.xda-developers.com/attachment.php?attachmentid=1070541&d=1337427944)**

要查看如何安装驱动程序，请访问Android 官方开发者网站上的[OEM USB 驱动程序。](http://developer.android.com/tools/extras/oem-usb.html)并且不要忘记[设置 Android 设备进行开发](http://developer.android.com/tools/device.html#setting-up)。

# mysql - 这个 MySQL 代码有什么问题？

> ID：11305362
> 
> 赞同：-2
> 
> 时间：2012-07-03T06:09:36.437
> 
> 标签：mysql

```
DELIMITER |
CREATE EVENT CestaTicket
ON SCHEDULE EVERY 1 SECOND
DO 
BEGIN    
 DECLARE var INT;
 DECLARE contador INT; 
 DECLARE valor FLOAT; 
 SET contador=0;
 SET var=0;
 SET valor=0;
 WHILE (var<(SELECT COUNT(DISTINCT IdEmpleado) FROM asistencia WHERE (Asistio=1 AND (Fecha BETWEEN (Now() AND DATE_SUB(CURDATE(),INTERVAL 30 DAY))))))
   SELECT COUNT(IdEmpleado) INTO contador FROM asistencia 
   WHERE (IdEmpleado=var AND Fecha BETWEEN (Now() AND DATE_SUB(CURDATE(),INTERVAL 30 DAY)));

      IF (contador>0)      
      SET valor = contador*0.95*95;      
      INSERT INTO reporte (Emision,Descripcion,Accion,IdEmpleado) 
      VALUES (Now(),CONCAT('El monto asignado para el empleado es: ',CAST(valor AS VARCHAR(30))),'Monto CestaTicket',var);
  END IF;
      var = var + 1;        
  END WHILE;

END |

DELIMITER ;
` 
```

我想知道是否有人可以通过告诉我代码有什么问题来帮助我，我是 MySQL 句子的新手，所以请耐心等待！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:14:37.903

使用“分隔符 |;” 而不是“分隔符 |” 如果您指的是此错误“您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以了解在 '))) 附近使用的正确语法）） SELECT COUNT(IdEmpleado) INTO contador FROM asistencia WHERE ( IdEm' 在第 11 行"

# jquery - 如何阻止 li 宽度匹配其子 li

> ID：11305364
> 
> 赞同：0
> 
> 时间：2012-07-03T06:10:00.350
> 
> 标签：jquery, css, menu, html-lists

希望我一直在处理这个菜单的最后一部分。它的子菜单下拉菜单像导航的主要部分一样水平，但是每个 li 的子 li 都会变大，粗略，问题是父级试图匹配它的子 li 的宽度。我尝试将子 li 宽度保持在自动状态并为父级分配宽度，但要么我选择了所有错误的数字，要么它不起作用，因为每次我为父级分配宽度时，它都会使下拉菜单变为垂直. 每次我在 ftp 上发送时，我的主机服务器似乎也没有正确更新，因此输入随机大小并查看我需要匹配的内容变得非常困难。

jsFiddle 链接显示了这一切，但我无法让 body onload 隐藏子菜单来工作： [jsFiddle](http://jsfiddle.net/eETjb/)

所以最好也查看测试站点：[测试站点](http://imengine.gofreeserve.com/fileshare/fileshare2/index2.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:21:42.623

在这种情况下，您需要维护父子层次结构，例如 -

```
#navigation li ul.sub_navigation li{......} 
```

更新的小提琴 - [http://jsfiddle.net/eETjb/2/](http://jsfiddle.net/eETjb/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:46:22.817

嘿，我想你应该想要下拉菜单

我创建了一些示例检查它

**HTML**

```
<ul class="navi">
  <li><a href="#">Home</a></li>
  <li><a href="#">Home2</a></li>
  <li><a href="#">Home3</a>

    <ul class="submenu">
    <li><a href="#">Home</a></li>
  <li><a href="#">Home2</a></li>
  <li><a href="#">Home3</a></li>
  <li><a href="#">Home4</a></li>
  <li><a href="#">Home5</a></li>
    </ul>

  </li>
  <li><a href="#">Home4</a></li>
  <li><a href="#">Home5</a></li>

</ul> 
```

**CSS**

```
ul, ul li{
margin:0;
  padding:0;
}
.navi, .submenu{
  list-style:none;
  display:block;
  margin:0;
  padding:0;
}
.navi > li{
background:green;
  display:inline-block;
  vertical-align:top;
  position:relative;
}
.navi li a{
color:white;
  padding:10px;
  display:block;
  text-decoration:none;
}
.navi li .submenu{
display:none;
  position:absolute;
  top:39px;
  left:0;
}
.navi li:hover .submenu{
display:block;
}
.submenu > li{
display:block;
background:red;
}

.submenu li > a{
border-top:2px solid black;
display:block;
} 
```

现场演示[http://tinkerbin.com/GoDsKf4n](http://tinkerbin.com/GoDsKf4n)

# java - 获得第一个具有 400 多个除数的三角形数

> ID：11305365
> 
> 赞同：1
> 
> 时间：2012-07-03T06:10:04.103
> 
> 标签：java, math, for-loop, while-loop

> **可能重复：**
> [Project Euler 问题 12 - C++](https://stackoverflow.com/questions/3808148/project-euler-problem-12-c)

我正在尝试获得第一个具有 400 多个除数的三角形数（三角形数，例如：1、3、6、10）。例如，6 号三角形有四个除数 1、2、3、6。以下是我尝试获得具有 400 个除数的三角形数

```
import java.math.BigInteger;

public class IQ3
{

        static int num1 = 1;    
        static int devideResult = 0;      

    public static void main(String[]args)
    {

        while(true)
        {
            int triangle = num1*(num1+1)/2;

            if(devide(triangle))
            {
                break;
            }

            num1++;
        }

    }

    static boolean devide(int num)
    {
        boolean result = false;
        int devideCounter = 2;       

        for(int i=1;i<=num/2;i++)
            {
                if(num%i == 0)
                {
                    devideCounter++;
                    System.out.println("Devide Counter: "+devideCounter);
                    //System.out.println("i number: "+i);
                    //System.out.println("input number: "+num);

                    if(devideCounter>400)
                    {
                        System.out.println("Number: "+num);
                        result = true;
                        break;
                    }
                }
            }

        return result;
    }
} 
```

但这需要很长时间，有时它会崩溃。

但是，由于答案可能非常大，我想到了使用 BigInteger。

```
import java.math.BigInteger;

public class IQ2P2
{

        static BigInteger num1 = new BigInteger("1");
        static BigInteger two = new BigInteger("2");
        static BigInteger one = new BigInteger("1");
        static BigInteger i = new BigInteger("1");
        static BigInteger zero = new BigInteger("0");

        static int devideResult = 0;        
    //    static int devideCounter = 0;

    public static void main(String[]args)
    {

        while(true)
        {
            BigInteger triangle = num1.multiply(num1.add(one)).divide(two);

            if(devide(triangle))
            {
                break;
            }

            num1.add(one);
        }

    }

    static boolean devide(BigInteger num)
    {
        boolean result = false;
        int devideCounter = 2;       

        while((i.compareTo(num))<(num.divide(two).intValue()))
            {
                if(num.remainder(i) == zero)
                {
                    devideCounter++;
                    System.out.println("Devide Counter: "+devideCounter);
                    //System.out.println("i number: "+i);
                    //System.out.println("input number: "+num);

                    if(devideCounter>400)
                    {
                        System.out.println("Number: "+num);
                        result = true;
                        break;
                    }
                }
                i.add(one);
            }

        return result;
    }
} 
```

但是 biginteger 从来没有返回任何东西。

请帮助我获得第一个具有 400 多个除数的三角形数。

*注意：这不是家庭作业。我不是学生。*

以下是对一个答案的回应

```
import java.math.BigInteger;

public class IQ2
{

        static long num1 = 1;
        static long numberToAdd = 0;
        static long devideResult = 0;  

       static   long triangleNum = 1;
    static long incrementer = 2;
    //    static int devideCounter = 0;

    public static void main(String[]args)
    {

        while(true)
        {
            triangleNum += incrementer++;

            if(devide(triangleNum))
            {
                break;
            }

            num1++;
        }

    }

    static boolean devide(long num)
    {
        boolean result = false;
        int devideCounter = 2;       

        for(long i=1;i<=num/2;i++)
            {
                if(num%i == 0)
                {
                    devideCounter++;
                    System.out.println("Devide Counter: "+devideCounter);
                    //System.out.println("i number: "+i);
                    //System.out.println("input number: "+num);

                    if(devideCounter>400)
                    {
                        System.out.println("Number: "+num);
                        result = true;
                        break;
                    }
                }
            }

        return result;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:33:41.480

由于第 i 个三角形数有多少个除数并没有真正的规则或模式，因此您必须从头开始并测试每个数字。

所以优化（在我看来）只能在“有多少除数有这个数字”的问题上进行。

您只能检查所有素数（在检查期间建立素数集）。这将显着减少时间，尽管我不知道这是否已经是最快的解决方案（我对此表示怀疑）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T05:37:12.990

您需要优化找出给定数字的除数数量的方式。首先，对于每个`d <= sqrt(n)`这样的`n%d==0`，都有`m=n/d`这样的`n%m==0`和`m >= sqrt(n)`。这意味着您可以同时数两个数，停在`sqrt(n)`.

但真正的优化是计算一个数的[素因数分解](http://en.wikipedia.org/wiki/Prime_factor)，并从中找出[除数的数量](http://en.wikipedia.org/wiki/Divisor#number_of_divisors_formula)。

# php - 编辑谷歌地图后获取坐标

> ID：11305369
> 
> 赞同：0
> 
> 时间：2012-07-03T06:10:26.803
> 
> 标签：php, javascript, jquery, google-maps

我将在 googlemap 上标记的多边形的坐标存储到 mysql 数据库中。我可以在编辑页面中绘制该多边形。我的问题是，当我通过拖动点来编辑地图时，如何获得新坐标。我阅读了谷歌地图文档，用户可编辑的形状，但我无法理解。请帮我。

在此先感谢 iijb

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:48:01.310

请参阅[Polygon.getPaths的文档](https://developers.google.com/maps/documentation/javascript/reference#Polygon)

这是获取路径（不是路径，因为折线没有该方法）并使用结果在文本框中创建 xml[的示例地图。](http://www.geocodezip.com/v3_GoogleEx_directions-draggable2Xml.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T12:29:10.667

这个怎么样

```
var map;
    var coords = [];
    var lats = [];
    var lngs = [];
    var myMarkers = [];
    var myPoly;
    function initialize() {
        var latlng = new google.maps.LatLng(17.397821, 78.479354);
        var mapOptions = {
            zoom: 15,
            center: latlng,
            mapTypeId: google.maps.MapTypeId.TERRAIN
        }
        map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
        addEventListener_marker();

    }
    function addEventListener_marker() {
        google.maps.event.addListener(map, 'click', function (e) {
            coords.push(e.latLng);
            lats.push(e.latLng.lb);
            lngs.push(e.latLng.mb);
            placeMarker(e.latLng, map);
        });
    }

    function placeMarker(position, map) {
        var mark = new google.maps.Marker({
            position: position,
            map: map,
            draggable: false
        });
        myMarkers.push(mark);
    }

    function createPoly() {
        polyOptions = {
            path: coords,
            strokeColor: "#FF0000",
            strokeOpacity: 0.8,
            strokeWeight: 2,
            fillColor: "#FF6803",
            fillOpacity: '0.25',
            draggable: true,
            editable: true
        }
        myPoly = new google.maps.Polygon(polyOptions);
        myPoly.setMap(map);
        google.maps.event.addListener(myPoly, 'click', isWithinPoly);
        markerCoords();
        //removeEventListener();
        clearOverlays();

    }

    function markerCoords() {
        var curLatLng = [];
        curLatLng = myPoly.getPath().getArray();
        $("#info").append("coordinates are: Latitude: " + curLatLng + "<br/>");
        //google.maps.event.addListener(myPoly, 'shape_changed', function () {
        google.maps.event.addListener(myPoly, 'dragend', function () {
            //alert("drag end");
            var curLatLng;
            curLatLng = myPoly.getPath().getArray();
            $("#info").append("coordinates are: Latitude: " + curLatLng + "<br/>");
        });

    }

    function removeEventListener() {
        //google.maps.event.clearListeners(map, 'bounds_changed');
    }
    function clearOverlays() {
        setAllMap(null);
    }
    function setAllMap(map) {
        for (var i = 0; i < myMarkers.length; i++) {
            myMarkers[i].setMap(map);
        }
    }
    function isWithinPoly(event) {
        var isWithinPolygon = google.maps.geometry.poly.containsLocation(event.latLng, this);
    }

    google.maps.event.addDomListener(window, 'load', initialize); 
```

# windows-phone-7 - Windows Phone: Performance issues using xml to load my page data?

> ID：11305370
> 
> 赞同：0
> 
> 时间：2012-07-03T06:10:30.373
> 
> 标签：windows-phone-7, silverlight-4.0, xna, windows-phone-7.1

WP7.5/ Silverlight app. This is a story book type app.

I am in a process to refactor my code. So I created a base storypage class. The core story pages are almost similar with back/next/home buttons on it. What differs on each page is images, animations, some text and sounds played on the click of images.

I plan to store story specific data into an XML file. So on each page NavigatedTo, I load my objects and initialize variables with the data from xml. I pass the storypageId to grab appropriate element from the XML.

**My Question:**

*   Is it a good way to go? or do you see any issues with this.
*   A typical story consists of about 15-20 pages. So basically my XML will have 15-20 Page elements. I will be reading XML on each page load. Can this cause any performance issue?
*   In future the app will have more stories. So would it be a good idea to store all stories in one XML or is it good to go one XML per story. My major concern is any performance implications as the size of XML will grow.

Has anyone come across such situation and can share their experience. Any ideas / suggestions welcome. Thanks for reading.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:37:09.170

我认为 XML 可以很好地存储数据，但是如果您预加载下一页，它将隐藏普通阅读器的加载延迟。这个想法是始终尝试将当前页面、下一页和上一页放在内存中。然后根据内存使用情况，您甚至可以预加载接下来的 2 或 3 页。

# ios - ios加粗带有自定义字体名称的文本，其中包含空格

> ID：11305372
> 
> 赞同：1
> 
> 时间：2012-07-03T06:10:39.920
> 
> 标签：ios, uilabel, uifont

我可以添加一个自定义字体，称为“jelly beans.ttf”

我可以将此前端添加到我的应用程序中，并且当我为其设置 uilabel 字体时，它可以工作，它会显示自定义字体。

但是，现在我需要使用这种自定义字体使文本变为粗体，经过一些研究，我似乎只需要在末尾添加 -Bold，就像这样

```
[UIFont fontWithName:@"jelly beans-Bold" size:30]; 
```

以下行有效，但文本没有变粗

```
[UIFont fontWithName:@"jellyh beans" size:30]; 
```

但它不起作用

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T06:28:16.837

我认为使用 ttf 你不能有多个字体粗细。基本上，您需要导入另一种 ttf 字体，即“果冻豆粗体”。如果您需要同时使用粗体和常规，那么您需要两个 ttf。

希望这可以帮助。

# iphone - 为 uilocalnotification 正确分配警报正文

> ID：11305373
> 
> 赞同：0
> 
> 时间：2012-07-03T06:10:41.610
> 
> 标签：iphone, alert, uilocalnotification

我有一个表单，用户填写所有信息，例如名称、事件名称、提醒日期等。所以我要做的是根据这样的键设置通知

```
- (void)scheduleNotificationForNotificationID:(NSString *)notificationID1:(NSString *)notificationID2:(NSString *)notificationKey 
{ 
    //Set notification after confirmation of saved data 

    Class cls = NSClassFromString(@"UILocalNotification"); 
    reminderNotification = [[cls alloc] init]; 
    if (cls != nil) 
    { 
       NSDateFormatter *dateFormat = [[[NSDateFormatter alloc]init]autorelease]; 
       [dateFormat setDateFormat:@"YYYY-MM-dd HH:mm:ss"]; 
       NSDate *notificationDate = [dateFormat dateFromString:textField2.text]; 
       reminderNotification.fireDate = notificationDate; 
       reminderNotification.timeZone = [NSTimeZone defaultTimeZone]; 
       NSString *reminderText = [NSString stringWithFormat:@"%@ 's %@ on %@",textField.text,textField1.text,strDate];
       reminderNotification.alertBody = reminderText; 
       reminderNotification.alertAction = @"View"; 
       reminderNotification.soundName = @"apple_ring.mp3"; 
       reminderNotification.applicationIconBadgeNumber = 1; 
       //Use name and event name as keys
       NSDictionary *infoDict = [NSDictionary dictionaryWithObjectsAndKeys:notificationID1,@"Name",notificationID2,@"Event",notificationKey,@"Date",nil];  
       reminderNotification.userInfo = infoDict; 
       [[UIApplication sharedApplication] scheduleLocalNotification:reminderNotification]; 
    } 
} 
```

**textField 保存名称，textField1 保存事件名称**

所以我有一个保存按钮操作来保存每个提醒，如果按钮标题为“保存”，它将保存提醒并插入新记录，如果是“完成”，它将编辑提醒详细信息并记录将得到更新。

现在通知的问题不是不正确的触发或不触发等。问题在于通知警报正文，这是接收本地通知的代码：

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification 
{
    application.applicationIconBadgeNumber = 0;
    NSString *reminderText = [notification.userInfo objectForKey:kReminder];
    [self.addViewController performSelector:@selector(showReminder:) withObject:reminderText afterDelay:1];
} 
```

所以这是通知警报正文的操作

```
//Notification alert
- (void)showReminder:(NSString *)text
{
    self.reminderAlert = [[UIAlertView alloc] initWithTitle:@"Reminder" message:reminderNotification.alertBody delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(220, 10, 40, 40)];
    UIImage *image= [UIImage imageNamed:@"icon@2x.png"];
    [imageView setImage:image];

    [reminderAlert addSubview:imageView];
    [imageView release];

    [reminderAlert show];
    [reminderAlert release];
} 
```

现在，在我编辑提醒/记录详细信息后，以前的通知会以任何方式被取消，但我的问题是警报正文与通知警报正文不同，即通知警报正文得到更新，但不是警报正文，即根据名称和事件名称例如：

**“史蒂夫·乔布斯 7 月 3 日生日”，如果这是保存时的初始事件，并且用户更新/更改为“史蒂夫·乔布斯 7 月 3 日生日”**

警报正文保存先前的事件名称值，其中通知警报正文保存正确且正确更新的新提醒详细信息。如果标题已保存，我尝试分配一个警报正文，如果标题完成，则分配另一个值，我的意思是我拿了几个字符串来保存名称和事件名称的值，用于保存和完成操作，全局声明字符串，在我在完成操作中分配提醒正文之前尝试使字符串值为零等......没有任何效果！

**因此，我自己分配了提醒通知警报正文**。即使这样也不起作用:(

我哪里错了……？？？

请帮助我，并提前感谢大家:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:03:36.763

我找到了将文本分配给提醒警报正文的适当解决方案，即我们基于三个键保存通知：

```
NSDictionary *infoDict = [NSDictionary dictionaryWithObjectsAndKeys:notificationID1,@"Name",notificationID2,@"Event",notificationKey,@"Date",nil]; 
```

我们可以使用这些键为警报视图分配文本/正文，即：

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification 
{
    application.applicationIconBadgeNumber = 0;
    NSString *name = [notification.userInfo objectForKey:@"Name"];
    NSString *event = [notification.userInfo objectForKey:@"Event"];

    //Get the date of event and convert it to required format...
    NSString *date = [notification.userInfo objectForKey:@"Date"];
    NSDateFormatter *dateFormat = [[[NSDateFormatter alloc] init]autorelease]; 
    [dateFormat setDateFormat:@"yyyy-MM-dd HH:mm:ss"]; 
    NSDate *dateVal = [dateFormat dateFromString:date]; 
    [dateFormat setDateFormat:@"MMMM dd"]; 
    NSString *eventDate = [dateFormat stringFromDate:dateVal];

    NSString *reminderText = [NSString stringWithFormat:@"%@'s %@ on %@", name, event, eventDate];
    [self.addViewController performSelector:@selector(showReminder:) withObject:reminderText afterDelay:1];
} 
```

我们不必担心 showReminderAction 中的任何文本分配，即：

```
- (void)showReminder:(NSString *)text
{
    self.reminderAlert = [[UIAlertView alloc] initWithTitle:@"Reminder" message:text delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
    [reminderAlert show];
    [reminderAlert release];
} 
```

这应该会让事情顺利进行，希望这对某人有所帮助，谢谢:)

# java - how to lock a variable at server for a time period

> ID：11305375
> 
> 赞同：0
> 
> 时间：2012-07-03T06:11:01.330
> 
> 标签：java, php, logic, mutex

I have a specific variable which i get it from server and have to return it to server. But until my processing is completed on that variable, no one should access it i.e, i want to lock that variable at server. I'm programming in Php. Kindly some one give an idea on how to do it..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:31:59.580

您最好的选择是在您的数据表中创建一个附加列，当用户想要保留座位时，您可以在其中插入一个时间戳。考虑到用户也可能只是走开并且永远不会完成预订，因此您不能简单地将其无限期锁定。因此，在行中输入当前时间以将其标记为保留。在检查座位是否空闲时，将所有早于 X 的标志（决定 X 应该是什么）视为已过期，因为用户显然从未遵循过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:15:13.713

PHP 是一个无共享的环境，因此除了当前用户之外，没有人可以访问该变量（即使它是静态的或全局的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T06:41:40.600

我认为要实现这一点，您必须在您就座的桌子上做一些事情。
比如，在表中设置一些东西——布尔值、时间戳、删除行、标志等——表明你已经处理或处理了该行。

或者

您可以使用 mysql 数据库的行锁定概念。

[http://dev.mysql.com/doc/refman/5.0/en/internal-locking.html](http://dev.mysql.com/doc/refman/5.0/en/internal-locking.html)

# .net - 为变量类型分配多个接口

> ID：11305380
> 
> 赞同：3
> 
> 时间：2012-07-03T06:11:58.030
> 
> 标签：.net, vb.net

我正在尝试为我正在编写的硬件接口创建一些抽象级别，并且想知道是否有某种方法可以将多个接口分配为单个变量类型

想到的唯一方法是创建一个隐含 IDisposable 和 IDataEndPoint 的抽象类，然后将其用作我的变量类型和端点的基础

GoogleFu、Stack Overflow 和 MSDN 没有提供任何其他想法

干杯!

IE

```
Public Class A
  Impliments IDisposable

Public ReadOnly DataEndpoint as IDataEndpoint, IDisposable <---- something like this

Protected Overridable Sub Dispose(disposing as Boolean)
  if disposing then
    DataEndPoint.Dispose
  end if
End Sub
Public Sub Dispose() Impliments IDisposable.Dispose
  Dispose(True)
  GC.SuppressFinalize(Me)
End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T06:31:23.307

为什么没有在需要时`DataEndoint`实现接口和`DirectCast`属性到所需接口的类型？

```
Public Class DataEndpoint 
  Implements IDataEndpoint, IDisposable

  'Implementation ...

End Class

Public Class A
  Implements IDisposable

Public ReadOnly DataEndpoint as DataEndpoint

Protected Overridable Sub Dispose(disposing as Boolean)
  if disposing then
    DirectCast(DataEndPoint, IDisposable).Dispose
  end if
End Sub
Public Sub Dispose() Implements IDisposable.Dispose
  Dispose(True)
  GC.SuppressFinalize(Me)
End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T06:25:59.640

如果接口中没有定义关系：基本上没有。除非 if`A`是泛型类型（`T`例如 ），并且`T`有多个约束，并且该字段的类型是`T`。在这种情况下不太合适。

我只需将字段键入为*有趣*的类型 ( `IDataEndpoint`)，然后将 dispose 处理为（用 C# 术语）：

```
var disp = DataEndPoint as IDisposable;
if(disp != null) disp.Dispose(); 
```

# android - 布局的边框

> ID：11305382
> 
> 赞同：18
> 
> 时间：2012-07-03T06:12:14.183
> 
> 标签：android, border, android-linearlayout

我正在尝试像这样在我的布局周围制作边框

![两个带有圆形边框的文本区域](../Images/c25b56c428c5dae0a17eca59673bf4a0.png)

但我正在尝试改变布局颜色。不做任何边框。

我的代码是

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android"
> 

<stroke android:width="1dp"

        android:color="#eedfcc"
        android:background="#000080"/>

<corners android:bottomRightRadius="20dp"
         android:bottomLeftRadius="20dp" 
         android:topLeftRadius="10dp"
         android:topRightRadius="8dp"/> 
</shape> 
```

为什么它不起作用？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-07-03T06:17:28.007

试试这个：

**第 1**`layout_border.xml`步：在项目的 drawables 目录 (res/drawable/layout_border.xml) 中创建文件：

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android"> 
    <solid android:color="#FFFFFF"/> 
    <stroke android:width="3dip" android:color="#B1BCBE" />
    <corners android:radius="10dip"/>
    <padding android:left="0dip" android:top="0dip" android:right="0dip" android:bottom="0dip" />
</shape> 
```

**第2步：**

```
<EditText 
    android:id="@+id/edittext"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/layout_border"
     /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T06:27:12.967

创建一个文件“res/drawable/my_border.xml”并定义一个形状：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <stroke android:width="4dp" android:color="#FF00FF00" />
    <solid android:color="#ffffff" />
    <padding android:left="7dp" android:top="7dp"
            android:right="7dp" android:bottom="7dp" />
    <corners android:radius="4dp" />
</shape> 
```

然后将其添加为布局标签内的背景：

```
android:background="@drawable/my_border" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T06:29:12.807

**解决方案1：**

my_edittext_bg

```
 <?xml version="1.0" encoding="utf-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android" >    
    <!-- Color of the border -->
    <stroke
      android:width="2dp"
      android:color="#FF0000" />
    <!-- Use this if you want to round your Corners -->
    <corners android:radius="5dp" />
    <!-- Use this attribute if you want add some paddings -->
    <padding android:left="0dip" android:top="0dip" android:right="0dip" android:bottom="0dip" />
    </shape> 
```

现在将其设置为编辑文本的背景

```
 android:background="@drawable/my_edittext_bg" 
```

**解决方案2：**

使用这个 9-patch drawable 作为你的 EditText 的背景

![在此处输入图像描述](../Images/c209dbd880e9975faa35cad006c11447.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T06:16:23.013

试试这个代码：

```
<EditText 
    android:id="@+id/edittext1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/textboxes"
     /> 
```

并在名为“textboxes”的可绘制文件夹中创建 xml 文件，并在其中编写以下代码：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
<stroke
    android:color="#f269be"
    android:width="2dp" />
<solid
    android:color="#ffffff" />
</shape> 
```

从圆角边框，写下：

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
<solid android:color="#009FFFFF"/>
<corners android:radius="10px"/>
<padding android:left="1dp" android:top="2dp" android:right="2dp" android:bottom="2dp" /> 
<stroke android:width="2dp" android:color="#AAAAAA" />
</shape> 
```

# delphi - How to rotate a TShape

> ID：11305383
> 
> 赞同：1
> 
> 时间：2012-07-03T06:12:16.800
> 
> 标签：delphi

I have a TShape on my form. and would like to rotate it. Can this be done with TShape? If so How? I assume its just drawing the shape according to some coords. Maybe there is Coords that can be changed? Thanks.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T06:18:32.947

不幸的是，这是无法做到的。您可以基于支持此功能的 TShape 编写自己的组件。

# active-directory - Use the SAP LDAP connector to modify OU structure?

> ID：11305384
> 
> 赞同：0
> 
> 时间：2012-07-03T06:12:34.367
> 
> 标签：active-directory, ldap, abap

Does anyone know if the SAP LDAP connector can be used to modify the AD OU structure as well?

This SAP document briefly describes how to set it up and change user accounts. Can it also be used to create and modify the AD OU tree? [http://scn.sap.com/docs/DOC-3431](http://scn.sap.com/docs/DOC-3431)

The business need is to create a solution that will create the AD structure and populate it with employees based on data from the SAP HR module.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:56:33.270

有一组函数作用于 LDAP：LDAP_READ/UPDATE/DELETE/CREATE（组函数 FSLDAP_EXT）。这些函数可用于对 ldap（用户或 OU）执行 aby 操作。您仅受 LDAP 中用户的配置（权限）限制。

我们使用这些来更新具有 105000 个用户和 12000 个组织单位的项目的组织和用户。完全比较（删除 LDAP 中存在且在 SAP 中不再活跃的人员，添加 sap 中的新人员，比较其他人员的属性值并在需要时进行更新）大约需要一个小时。

否则，afaik，您文档中描述的功能仅适用于用户。

# asp.net-mvc - Save/Update error for entities with many to many relation

> ID：11305385
> 
> 赞同：0
> 
> 时间：2012-07-03T06:12:36.477
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, entity-framework-4.1, many-to-many

I am working on Database first approach with Entity Framework 4.1\. I have 2 many to many related entities Book and Library. I also have one junction table with 10 columns to store information about the particular copy of the book in Library with one to many relation with both BOOK and LIBRARY entities. I have created a view which submits a JSON object with child object in it which matches the definition of my BookVieMOdel. The view is working just fine but I am having trouble adding new entries to the junction table in the controller. I am getting error saying "***Adding a relationship with an entity which is in the Deleted state is not allowed***". I guess the error is referring to the deleted object which were deleted when by the `book.LibraryBookCopies.Clear();` but can't think of doing it other way.

Thanks,

CONTROLLER:

```
[HttpPost]
    public ActionResult Edit(BookViewModel bookv)
    {

        Mapper.CreateMap< BookViewModel,Book>();

        Book  book = Mapper.Map<BookViewModel,Book>(bookv);

        db.Books.Attach(book);

        db.ObjectStateManager.ChangeObjectState(book, EntityState.Modified);

        //Add library ref to each libraryBookCopies object in Book
        foreach (LibraryBookCopy lBC in book.LibraryBookCopies)
        {
            lBC.Library = db.Libraries.Single(l => l.LibraryId == lBC.LibraryId);
        }

        //Remove all currently related records
        book.LibraryBookCopies.Clear();

        //Add copies from ViewModel to book object
        foreach (LibraryBookCopy lBC in bookv.LibraryBookCopies)
        {      book.LibraryBookCopies.Add(lBC); //Error here      }

        db.SaveChanges();

        return RedirectToAction("Index");     
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:28:09.087

您说过错误是“不允许处于已删除状态的实体”我想知道 WillCascadeOnDelete 是否有问题并且该书正在被删除。请参阅 [http://weblogs.asp.net/manavi/archive/2011/01/23/associations-in-ef-code-first-ctp5-part-3-one-to-one-foreign-key-associations。 aspx](http://weblogs.asp.net/manavi/archive/2011/01/23/associations-in-ef-code-first-ctp5-part-3-one-to-one-foreign-key-associations.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:22:32.220

也许在添加新记录之前尝试保存更改？

```
//Remove all currently related records
book.LibraryBookCopies.Clear();
db.SaveChanges();

//Add copies from ViewModel to book object
foreach (LibraryBookCopy lBC in bookv.LibraryBookCopies)
{      book.LibraryBookCopies.Add(lBC); //Error here      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T03:04:35.013

```
 [HttpPost]
        public ActionResult Edit(BookViewModel bookv)
        {
            //create maps
            Mapper.CreateMap<LibraryBookCopyViewModel, LibraryBookCopy>();
            Mapper.CreateMap<BookViewModel, Book>();

            //convert view objects to model objects
            Book book = Mapper.Map<BookViewModel, Book>(bookv);

            List<LibraryBookCopy> bookCopiesFromView = Mapper.Map<List<LibraryBookCopyViewModel>, List<LibraryBookCopy>>(bookv.LibraryBookCopies);

            List<LibraryBookCopy> toBeDeletedLibraryBookCopies = new List<LibraryBookCopy>();

            //this has to be executed before db.Books.Attach
            book.LibraryBookCopies.Clear();

            //Add or update book copies
            foreach (LibraryBookCopy bc in bookCopiesFromView)
            {
                if (bc.LibraryBookCopyId != 0)
                {
                    db.LibraryBookCopies.Attach(bc);
                    db.ObjectStateManager.ChangeObjectState(bc, EntityState.Modified);
                }
                else
                {

                    db.LibraryBookCopies.Attach(bc);
                    db.ObjectStateManager.ChangeObjectState(bc, EntityState.Added);
                }

            }

            db.Books.Attach(book);

            if (bookCopiesFromView.Count == 0) //if all the copies are delted from view, delete all from 
            {
                db.LibraryBookCopies.Where(c => c.BookId == book.BookId).ToList().ForEach(l => db.LibraryBookCopies.DeleteObject(l));
            }
            else
            {
                toBeDeletedLibraryBookCopies = book.LibraryBookCopies.Except(bookCopiesFromView).ToList();
                foreach (LibraryBookCopy bc in toBeDeletedLibraryBookCopies)
                {

                    db.ObjectStateManager.ChangeObjectState(bc, EntityState.Deleted);
                }
            }

            db.ObjectStateManager.ChangeObjectState(book, EntityState.Modified);
            db.SaveChanges();
            return RedirectToAction("Index");

        } 
```

# java - Java NIO SocketChannel.read() with multithread

> ID：11305386
> 
> 赞同：7
> 
> 时间：2012-07-03T06:12:36.683
> 
> 标签：java, multithreading, nio

I am implementing a simple file server using Java NIO with one selecting thread and multiple worker threads(for performing real read/write).

The main part of the code looks like the following:

```
while (true) {
    int num = selector.select();
    if (num > 0) { 
        Iterator<SelectionKey> keys = selector.selectedKeys().iterator();
        final SelectionKey key = keys.next();
        keys.remove();

        if (key.isValid()) {
            if (key.isAcceptable()) {
                accept(key);
            } else if (key.isReadable()) {
                performReadInWorkerThread (key);
            } else if (key.isWritable()) {
                performWriteInWorkerThread (key);
            }
        }
    }
} 
```

As you can see from the code snippet, when a readable/writable channel is selected, I offload the read/write from the selecting thread to a worker thread.

Now the problem is that when a readble channel is handed over to the worker thread, and before it finishes/starts reading from the channel, the selecting thread loops again, and `selector.select()` selects the previously selected readable channel(because there's still input buffer in the channel that is not yet fully consumed by the previously assigned worker thread), so again the channel is handed over to another worker thread, resulting in **multiple worker threads reading the same channel**.

I believe this is a design problem. My question is how I can ensure only one thread reading a channel at the same time?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T06:38:56.437

为什么？读取不会阻塞。在当前线程中执行。这样你只会遇到无穷无尽的问题。您必须在移交给读取线程之前取消注册 OP_READ，这很容易，但困难的部分是当读取线程完成读取时，它必须重新注册 OP_READ，这需要 (i) 选择器唤醒（），这会导致选择线程在可能无事可做时运行，这是浪费的，或者（ii）使用挂起的重新注册队列，这会将该通道上的下一次读取延迟到下一次选择器之后唤醒，这也很浪费，否则您必须在添加到队列时立即唤醒选择器，如果没有准备好，这也很浪费。我从未见过使用不同选择和读取线程的令人信服的 NIO 架构。

不要这样做。如果您必须使用多线程，请将您的通道组织成组，每个组都有自己的选择器和自己的线程，并让所有这些线程自己阅读。

同样，无需在单独的线程中编写。当你有东西要写的时候就写。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T15:15:06.353

对于 NIO，只需记住一个原则： **在主选择线程中进行读/写。** 这个原理是硬件性质的体现。不要担心在主选择线程中读取速度不快。在现代服务器中，CPU 总是比网卡快。所以一个线程中的无阻塞读取也比网卡操作要快。一个线程已经足够读取数据包了。我们不需要更多线程。

# android - Input Error in android

> ID：11305388
> 
> 赞同：3
> 
> 时间：2012-07-03T06:12:43.027
> 
> 标签：android, android-layout

I developed an application in android. Its input fields are working fine e.g. username and password inputs (this will call the services and get a xml response) in 2.2, 2.3 but it does not work in 4.0, 4.1.

**xml**

```
EditText
            android:id="@+id/email"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="4"
            android:imeOptions="actionNext"
            android:singleLine="true"
            android:text="" 
```

in error log.

```
 Url is not found 
```

(in catch exception..)

**edit**

android 4.1 sdk and updated eclipse log cat was printing lot

```
07-03 11:57:07.826: I/Choreographer(2747): Skipped 44 frames! 
The application may be doing too much work on its main thread. 
```

by that I can't easily find error on Log cat.

error was:

```
07-03 11:58:25.927: E/ActivityThread(555): Failed to find provider info
for com.android.inputmethod.latin.dictionarypack 07-03 11:58:25.947:
E/BinaryDictionaryGetter(555): Could not find a dictionary pack 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T06:25:44.263

if it is working fine on android 2.2 & 2.3 OSs, then the error may be due to the more strict network policies in android 4.0\. Adding the below static block in your activity/communication-class will remove the communication policy related issues in 4.0

```
static{
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

    StrictMode.setThreadPolicy(policy);
} 
```

# batch-file - how to use the for /f command when the file has a space

> ID：11305391
> 
> 赞同：0
> 
> 时间：2012-07-03T06:13:03.060
> 
> 标签：batch-file, for-loop, cmd

I'm new to cmd, having trouble with this:

```
md "C:\kysumicomp"
for /f "usebackq" %%a in (`CALL DIR /b /s "C:\Program Files" ^| FIND "javac.exe"`) do
   copy "%%a" "C:\kysumicomp"
pause 
```

What I am trying to achieve is a batch file that that will find the javac.exe file then copy it to C:\kysumicomp but I don't want it to be an absolute path so if my java updates the batch will still work.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:42:03.587

中的默认字段分隔符`for /f`是空格和制表符。要解决您的问题，您必须重新定义分隔符。与永远不会出现在路径中的字符一起使用`delims=`，例如`|`. 还有另一个问题。想象一下有一个目录`c:\Program Files\javac.exe\`。您的代码会将该目录中的所有文件复制到 C:\kysumicomp。但是您实际上不必使用`find`,`dir`就足够了：

```
md "C:\kysumicomp"
for /f "delims=| usebackq" %%a in (`dir /b /s "C:\Program Files\javac.exe"`) do (
   copy "%%a" "C:\kysumicomp"
)
pause 
```

Christian的解决方案也是一个不错的解决方案，我相信唯一需要改变的就是将文件名包含在`copy`：

```
FOR /R "%ProgramFiles%" %%a IN (.) DO (
  IF EXIST "%%~a\javac.exe" (
    COPY "%%~a\javac.exe" "C:\kysumicomp"
    GOTO END
  )
)
:END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T06:22:43.193

嗯......你真正的问题（尽管问题的标题）似乎是：

> 我想要实现的是一个批处理文件，它将找到 javac.exe 文件，然后将其复制到 C:\kysumicomp ...

我认为你把事情复杂化了。

试试这个（有关该选项`FOR /?`的更多信息，请参阅）：`/R`

```
FOR /R "%ProgramFiles%" %%a IN (.) DO (
    IF EXIST "%%~a\javac.exe" COPY /Y "%%~a" C:\kysumicomp\
) 
```

请注意，这会将*所有*出现的复制`javac.exe`到您的目录中，其中一个会覆盖另一个（您的原始解决方案也存在问题）。如果要在第一次命中后停止，则需要提前退出循环：

```
FOR /R "%ProgramFiles%" %%a IN (.) DO (
    IF EXIST "%%~a\javac.exe" (
       COPY "%%~a" C:\kysumicomp\
       GOTO END
    )
)
:END 
```

最后，一个更简单的解决方案可能是复制`javac.exe`您`PATH`的 .

```
FOR %%a IN (javac.exe) DO (
    IF EXISTS "%%~$PATH:a" (
       COPY "%%~$PATH:a" C:\kysumicomp\
    )
) 
```

然后，由于您的问题标题已经与您想要实现的目标不符，我想知道您是否真的需要做一些完全不同的事情。你为什么首先复制`javac.exe`到你的目录？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T10:14:01.773

这应该做你需要的

```
@echo off
md "C:\kysumicomp"
for /r "C:\Program Files" %%a in (*.*) do (
if %%~nxa==javac.exe (
rem Found it!
xcopy /h /y "%%a" "C:\kysumicomp"
exit >nul
)
)
rem Done
exit >nul 
```

# jquery - jQuery remove the nearlest P tag

> ID：11305392
> 
> 赞同：-1
> 
> 时间：2012-07-03T06:13:03.297
> 
> 标签：jquery

i have this jquery code

```
$("#eioShowLink").on('click',function(){
        $("#ioEditRelatedConcepts").html('');
        $.getJSON("http://localhost/Mar7ba/Ontology/getRelatedConceptsAndRelations/"+conceptName+"/TRUE", function(data){
            var concepts = data[0];
            var relations = data[1];
            for(var i = 0 ; i < concepts.length ; i++){
                (function(currentConcept, currentRelation) {
                    $.getJSON("http://localhost/Mar7ba/InformationObject/getIOsForConcept/"+currentConcept+"/TRUE" , function(data1){
                        var IOS = '';
                        IOS +="<option>Select IO</option>";
                        for(var j=0;j<data1.length;j++){
                            IOS+="<option>"+data1[j]+"</option>";
                        }
                        $("#ioEditRelatedConcepts").append('<p>\n\
              connect to\n\
              <span class="ioAddConcept">'+ currentConcept +'</span>\n\
              with\n\
              <span class="ioAddRelation">'+ currentRelation +'</span>\n\
              <select name ="concetedIOs[]" class="TypeSelector">'+IOS+'</select>\n\
              <span class="errorMessage"></span>\n\
              <a href="#" class="removeA" id="eioRemoveIO">remove</a>\n\
              </p>\n\
              <p>');
                    });
                })(concepts[i], relations[i]);
            }
        });

    }); 
```

it works good, now i want when press the link "eioremoveIO" i want to remove the nearlest P tag, so i tried this

```
$("#editOnePlace").on('click','#eioRemoveIO',function(){
    $(this).closest('p').remove();
}); 
```

but nothing happen when pressing, it seems that it doesn't even fired, would you tell me what am i doing wrong?

### edit

`#editOnePlace"` is the id of my div(doesn't appear here)

### edit

the html

```
 <li>
                <p>
                    <label>Concepts</label>
                    <a href="#" class="smallLink" id="eioShowLink">Show Concepts</a>
                </p>
                <div id="ioEditRelatedConcepts">
                </div>
            </li> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T06:19:25.870

jQuery 函数最接近给出最近的祖先您可以使用 prev/next 来获取上一个/下一个兄弟。

```
$("#editOnePlace").on('click','#eioRemoveIO',function(){
    $(this).prev('p').remove();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T06:19:42.953

假设您使用的是最新版本的 jQuery：

```
 $('#eioRemoveIO').live('click',function(){     
    $(this).closest('p').remove();
 }); 
```

# php - how to pass an hierarchical array through command line to a php file

> ID：11305394
> 
> 赞同：0
> 
> 时间：2012-07-03T06:13:16.613
> 
> 标签：php, arrays, command-line

I want to pass an array from command line to php as:

```
c:\<path>\php.exe somefile.php --filter array{['name']=>"lion",['category']=>array{['teeth']=>'long_teeth',['height']=>'short'}} 
```

and now in code I want variable filter as an array as I passed through command line like:

```
$opt['filter'] = array {
                    ['name']=>"lion",
                    ['category']=>
                        array{
                              ['teeth']=>'long_teeth',
                              ['height']=>'short'
                             }
                       } 
```

But the problem is passed argument becomes string and I am not able to parse it to array. I am using getopt() function to get filter as an attribute to array variable $opt like:

```
$shortopts = "abc"; // These options do not accept values

$longopts  = array(
    "filter:",     // Required value
);<br>
$opt = getopt($shortopts, $longopts); 
```

actually whole scenario is to take a variable as an array or string or a boolean value and pass it to another php script as it is and that script I am calling through exec function like: `exec(c:\<path>\php.exe myphpscript.php --filter $array_variable );` and then in myphpscript.php, I want to use `$array_variable` as it was in earlier script so that I can use it as it was.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:01:21.693

命令行参数是字符串并且只是字符串。

当您要传入分层元素时，唯一的选择是解析字符串。然而 JSON 编码很好，简单且紧凑。

在命令行上传递以下内容，然后使用[json_decode](http://php.net/json_decode)解析将为您提供所需的结果；

```
{"Name":"Lion","Category":{"teeth":"long_teeth","height":"short"}} 
```

简单证明：

```
$opt = '{"Name":"Lion","Category":{"teeth":"long_teeth","height":"short"}}';
print_r(json_decode($opt)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:19:17.117

命令行参数只能是字符串，无法直接在命令行上传递任何复杂的数据结构，如数组。您可以将数组*序列化为字符串，并在程序中**取消序列化*该参数。因此，您可以将数组作为字符串传递。最明显的候选是 JSON 格式，请参阅[`json_decode`](http://php.net/json_decode).

# codeigniter - jQuery Tablesorter not work with CodeIgniter

> ID：11305396
> 
> 赞同：1
> 
> 时间：2012-07-03T06:13:31.783
> 
> 标签：codeigniter, jquery-plugins

I downloaded [Tablesorter](http://tablesorter.com) and it works fine but if I use in codeigniter firebug says `c is undefined` on select different value from dropdown.

I move all js resource files inclusion in views/template/header/

> **header.php**

```
<!-- Tablesorter -->
    <?php echo link_tag('tablesorter/themes/blue/style.css');?>
    <script type="text/javascript" src="<?php echo base_url(); ?>tablesorter/js/jquery.tablesorter.js"></script>
    <script type="text/javascript" src="<?php echo base_url(); ?>tablesorter/js/jquery.tablesorter.pager.js"></script>
    <script type="text/javascript">
    $(function() {
        $("table")
            .tablesorter({widthFixed: true, widgets: ['zebra']})
            .tablesorterPager({container: $("#pager")});
    });
    </script>
    <!--// Tablesorter --> 
```

and the view where I use tablesorter is

views/countries/index.php

> **index.php**

```
<table cellspacing="1" class="tablesorter">
            <thead>
                <tr>
                    <th>Country Name</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tfoot>
                <tr>
                    <th>Country Name</th>
                    <th>Action</th>
                </tr>
            </tfoot>
            <tbody>
                <?php foreach ($countries as $key): ?>
                <tr>
                    <td><?php echo $key['countryName'];?></td>
                    <td><?php echo anchor("countries/edit/".$key['countryId'],"Edit")?></td>
                </tr>
                <?php endforeach; ?>
            </tbody>
        </table>
        <div id="pager" class="pager">
            <form>
                <img src="<?php echo base_url(); ?>tablesorter/icons/first.png" class="first"/> <img src="<?php echo base_url(); ?>tablesorter/icons/prev.png" class="prev"/>
                <input type="text" class="pagedisplay"/>
                <img src="<?php echo base_url(); ?>tablesorter/icons/next.png" class="next"/> <img src="<?php echo base_url(); ?>tablesorter/icons/last.png" class="last"/>
                <select class="pagesize">
                    <option selected="selected"  value="10">10</option>
                    <option value="20">20</option>
                    <option value="30">30</option>
                    <option  value="40">40</option>
                </select>
            </form>
        </div> 
```

now after integrate with CodeIgniter it just work for ascending/descending but pagination does not work and firebug says `c is undefined`

![enter image description here](../Images/61071abf86af7be636f7098d5ff90aa4.png)

# c# - Capturing screen shot in selenium

> ID：11305398
> 
> 赞同：0
> 
> 时间：2012-07-03T06:13:34.363
> 
> 标签：c#, selenium, build-automation

Hi I am not able to capture the screen shot using selenium webdriver . I get "Unable to get window (NoSuchDriver)".It works fine with Firefox. I tried running on User1 then it ran well but when I switched to another User ie(User2) switching User then I get this error

```
 public string TakeScreenshot(IWebDriver driver, string SnapFolderPath, string TCID,   string      KeyFunction)
    {
        ITakesScreenshot ssdriver = driver as ITakesScreenshot;
        Screenshot screenshot = ssdriver.GetScreenshot();
        string filePath = SnapFolderPath + "\\" + TCID + "_" + KeyFunction + "_" + GetDateTimeforFilePath() + ".bmp";
        screenshot.SaveAsFile(filePath, ImageFormat.Png);
        return filePath;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:49:56.237

Maybe it has to do with your internet settings, try this:

Tools > Internet Options... > Security tab, Enable Protected Mode checkbox is at the bottom of the tab.

Read this on [https://groups.google.com/forum/?fromgroups#!topic/selenium-users/6eRU4HIXFfs](https://groups.google.com/forum/?fromgroups#!topic/selenium-users/6eRU4HIXFfs)

# powershell - powershell string/ array modification

> ID：11305400
> 
> 赞同：0
> 
> 时间：2012-07-03T06:13:48.133
> 
> 标签：powershell

I have a csv file with some data. I have read the columns of it using

$read=import-csv C:\file.csv | foreach-object {"{0} {1}" -f $*.ColA,$*.ColB}

There are 100+ rows for this.

This is how $read looks:

```
test2pc K:\\
test3pc L:\\
testapc 
testapc C:\\XYZ
testapc C:\\
testapc C:\\
testapc 
testbpc C:\\
testbpc F:\\
testbpc F:\\ABC
testbpc F:\\DEF
testbpc F:\\GHI 
```

I am looking to remove all rows except those which have anything after the "\\", and anything that does not have a "\\". I also am looking to modify those entries, in the end I would be left with

```
\\testapc\C$\XYZ
\\testbpc\f$\ABC
\\testbpc\F$\DEF
\\testbpc\F$\GHI 
```

Any inputs greatly appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T06:37:48.350

`Where-Object`带有正则表达式的 A 应该可以解决问题：

```
$read=Import-Csv C:\file.csv | Where-Object { $_.ColB -match '\\\\\w' } | Foreach-Object {"{0} {1}" -f $.ColA,$.ColB} 
```

如果您在 '\\'s 后面有除字母以外的任何内容，您可能需要扩展搜索以包括数字、特殊字符等。

# r - 具有多个因变量的时间序列

> ID：11305403
> 
> 赞同：1
> 
> 时间：2012-07-03T06:14:06.303
> 
> 标签：r

我有一个包含以下列产品、日期、销售额的数据框

例如数据

```
 product date      sales
         A      1/1/2011  100 
         A      2/1/2011  102
         ..     .. 
         B      1/1/2011   50 
         B      2/1/2011   50 
```

我已经使用一个变量进行了预测，但是当有多个因变量时不知道该怎么做我想使用格子图绘制所有产品的时间序列图，包括它们的预测值

# css - 苹果风格扩展搜索域

> ID：11305406
> 
> 赞同：1
> 
> 时间：2012-07-03T06:14:30.037
> 
> 标签：css, css-transitions

我正在尝试模仿苹果的导航栏样式，特别是 CSS3 扩展搜索字段。

它使用带有 display:table 的 UL，它是带有 display:table-cell 和 width:100% 的 LI。当聚焦时，搜索 LI 会扩展，而其他 LI 的合同会适应。

现在我的 li 不会调整大小。

有人知道我在那里缺少什么吗？

此外，IE 甚至不显示任何内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T07:37:06.097

嘿，现在你可以用这个了

**HTML**

```
<input type="text" placeholder="search bar"> 
```

**css**

```
input[type="text"] {
    background: #444;
    border: 0 none;
    font: bold 12px Arial,Helvetica,Sans-serif;
    color: #d7d7d7;
    width:50px;
    padding: 6px 15px 6px 35px;
    -webkit-border-radius: 20px;
    -moz-border-radius: 20px;
    border-radius: 20px;
    text-shadow: 0 2px 2px rgba(0, 0, 0, 0.3);
    -webkit-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 3px rgba(0, 0, 0, 0.2) inset;
    -moz-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 3px rgba(0, 0, 0, 0.2) inset;
    box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 3px rgba(0, 0, 0, 0.2) inset;
    margin:3px 12px;
}

input[type="text"]:focus {
    background:#fcfcfc;
    color: #6a6f75;
    width: 120px;
    -webkit-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(0, 0, 0, 0.9) inset;
    -moz-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(0, 0, 0, 0.9) inset;
    box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(0, 0, 0, 0.9) inset;
    text-shadow: 0 2px 3px rgba(0, 0, 0, 0.1);
    margin:3px 12px;
    outline: none;
}

input[type="text"] {
    -webkit-transition: all 0.7s ease 0s;
    -moz-transition: all 0.7s ease 0s;
    -o-transition: all 0.7s ease 0s;
    transition: all 0.7s ease 0s;
} 
```

现场演示[http://jsfiddle.net/vzLFS/3/](http://jsfiddle.net/vzLFS/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T09:40:41.837

在苹果页面上，当输入获得焦点时，他们似乎向`nav`-element ( ) 添加了一个类，该类处理包含.`.searchmode``<li>``<input>`

虽然不确定是否有一个纯 css 解决方案，但您可以使用[jQuery](http://api.jquery.com/)做这样的事情，如下所示：

```
$('#searchform input').on('focus', function(){
   $(this).closest('li').css('width', '180px');
});

$('#searchform input').on('blur', function(){
   $(this).closest('li').css('width', '50px');
}); 
```

...并且仍然`css-transitions`用于 FX :)

# android - Android双SIM卡API

> ID：11305407
> 
> 赞同：30
> 
> 时间：2012-07-03T06:14:37.463
> 
> 标签：android, sim-card

有几个关于通过 Android SDK 访问双 SIM 卡功能的问题，所有这些问题都通过简短的声明来回答，即 Android 不支持此类功能。

尽管如此，双 SIM 卡手机确实存在，像[MultiSim](https://play.google.com/store/apps/details?id=de.qianqin.multisim&hl=en)这样的应用程序似乎能够以某种独立于制造商的方式检测到这一点。

所以，从这个确认开始，让我试着问一些更尖锐的问题：

*   “Android SDK 不支持多个 SIM 功能”是否意味着这些功能不存在，或者尝试使用它们只是一个坏主意？
*   是否有提供 SIM 卡信息的 Android 内容提供商或内部包（com.android...）？（据我在文档和代码中看到的 TelephonyManager 没有提到多个 SIM 卡）
*   是否有任何制造商向开发人员公开多个 SIM 功能的报告？
*   如果我要从制造商那里寻找未记录的功能，我会怎么做？

（顺便说一句，这一切的目的仅仅是实现这个算法：用 SIM 卡 1 发送短信；如果发送失败，则切换到 SIM 卡 2 并以这种方式重新发送消息。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2017-01-09T09:09:05.697

您可以使用`MultiSim`库从多 sim 设备获取详细信息。

每张 SIM 卡的可用信息：IMEI、IMSI、SIM 序列号、SIM 状态、SIM 运营商代码、SIM 运营商名称、SIM 国家/地区 iso、网络运营商代码、网络运营商名称、网络运营商 iso、网络类型、漫游状态。

只需在您的应用级 Gradle 脚本中添加以下行：

```
dependencies {
    compile 'com.kirianov.multisim:multisim:2.0@aar'
} 
```

不要忘记在 AndroidManifest.xml 中添加所需的权限：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

在您的代码中使用类似的代码：

```
MultiSimTelephonyManager multiSimTelephonyManager = new MultiSimTelephonyManager(this);
// or
MultiSimTelephonyManager multiSimTelephonyManager = new MultiSimTelephonyManager(this, new BroadcastReceiver() {
  @Override
  public void onReceive(Context context, Intent intent) {
    updateInfo();
  }
});

public void updateInfo() {

  // for update UI
  runOnUiThread(new Runnable() {
    @Override
    public void run() {
      multiSimTelephonyManager.update();
      useInfo();
    }
  }

  // for update background information
  multiSimTelephonyManager.update();
  useInfo();
}

public void useInfo() {

  // get number of slots:
  if (multiSimTelephonyManager != null) {
     multiSimTelephonyManager.sizeSlots();
  }

  // get info from each slot:
  if (multiSimTelephonyManager != null) {
    for(int i = 0; i < multiSimTelephonyManager.sizeSlots(); i++) {
      multiSimTelephonyManager.getSlot(i).getImei();
      multiSimTelephonyManager.getSlot(i).getImsi();
      multiSimTelephonyManager.getSlot(i).getSimSerialNumber();
      multiSimTelephonyManager.getSlot(i).getSimState();
      multiSimTelephonyManager.getSlot(i).getSimOperator();
      multiSimTelephonyManager.getSlot(i).getSimOperatorName();
      multiSimTelephonyManager.getSlot(i).getSimCountryIso();
      multiSimTelephonyManager.getSlot(i).getNetworkOperator();
      multiSimTelephonyManager.getSlot(i).getNetworkOperatorName();
      multiSimTelephonyManager.getSlot(i).getNetworkCountryIso();
      multiSimTelephonyManager.getSlot(i).getNetworkType();
      multiSimTelephonyManager.getSlot(i).isNetworkRoaming();
    }
  }
}

// or for devices above android 6.0
MultiSimTelephonyManager multiSimTelephonyManager = new MultiSimTelephonyManager(MyActivity.this, broadcastReceiverChange); 
```

用法：

```
// get info about slot 'i' by methods:
multiSimTelephonyManager.getSlot(i). 
```

强制更新信息：

```
// force update phone info (needed on devices above android 6.0 after confirm permissions request)
multiSimTelephonyManager.update(); 
```

权限请求的句柄（6.0+）：

```
// in YourActivity for update info after confirm permissions request on  devices above android 6.0
@Override
public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) {
    super.onRequestPermissionsResult(requestCode, permissions, grantResults);
    if (multiSimTelephonyManager != null) {
        multiSimTelephonyManager.update();
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-03T06:22:23.280

有3个不同的类别...

1.  支持和记录的功能
2.  可用且未记录的功能
3.  功能不可用

因此双 sim 卡功能可用但未记录在案，因此未得到官方支持。

话虽如此，这并不意味着它不能使用，它只是意味着 android（或就此而言 google 甚至制造商）不负责支持您的应用程序功能。

但它可能只是工作，例如联系人是一个类似的东西。

然后，您可能会问，如果没有记录，每个人都如何知道这些功能。嘿，android 是开源的 ..查看代码并自己找到它。这就是我猜多 sim 开发人员所做的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-12-08T08:08:00.493

在 API 22 之前，Android 不支持多 SIM 卡功能。但从 Android 5.1（API 级别 22）开始，Android 开始支持多 SIM 卡。[有关Android 文档](https://developer.android.com/reference/android/telephony/SubscriptionManager.html#getActiveSubscriptionInfoList%28%29)的更多详细信息

来自这个[原始答案的参考](https://stackoverflow.com/questions/7996197/detect-the-status-of-two-sim-cards-in-a-dual-sim-android-phone)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-15T08:46:00.387

您可以使用`SubscriptionInfo`类来实现它，

```
 if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP_MR1) {
        val mSubscriptionManager = getSystemService(Context.TELEPHONY_SUBSCRIPTION_SERVICE) as SubscriptionManager
        // val mSubscriptionManager = SubscriptionManager.from(baseContext)
        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.READ_PHONE_STATE) == PackageManager.PERMISSION_GRANTED) {
            val subscriptions = mSubscriptionManager.activeSubscriptionInfoList
        //loop through number of SIMS inserted
            for (subscriptionInfo in subscriptions) {
                //the number of this subscription if the calling app has been granted the READ_PHONE_NUMBERS permission, or an empty string otherwise
                Log.v("SIM", subscriptionInfo.number)
                //the ISO country code
                Log.v("SIM", subscriptionInfo.countryIso)
                //the name displayed to the user that identifies Subscription provider name
                Log.v("SIM", subscriptionInfo.carrierName.toString())
                //the name displayed to the user that identifies this subscription
                Log.v("SIM", subscriptionInfo.displayName.toString())
                //The MCC, as a string. This value may be null.
                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.Q) {
                    Log.v("SIM", subscriptionInfo.mccString.toString())
                } else {
                    Log.v("SIM", subscriptionInfo.mcc.toString())
                }
                //The MNC, as a string. This value may be null.
                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.Q) {
                    Log.v("SIM", subscriptionInfo.mncString.toString())
                } else {
                    Log.v("SIM", subscriptionInfo.mnc.toString())
                }
            }
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-15T15:41:41.767

MultiSim 库源现在在 VCS 上不可用
它的源仍然在这里可用[https://mvnrepository.com/artifact/com.kirianov.multisim/multisim](https://mvnrepository.com/artifact/com.kirianov.multisim/multisim)
我已经在 Kotlin 上重写了它以供个人使用

```
class Slot {

    var imei: String? = null

    var imsi: String? = null

    var simState = -1

    val simStates = hashSetOf<Int>()

    var simSerialNumber: String? = null

    var simOperator: String? = null

    var simCountryIso: String? = null

    fun setSimState(state: Int?) {
        if (state == null) {
            simState = -1
            return
        }
        simState = state
    }

    private fun compare(slot: Slot?): Boolean {
        return if (slot != null) {
            imei == slot.imei && imsi == slot.imsi && simSerialNumber == slot.simSerialNumber
        } else false
    }

    fun indexIn(slots: List<Slot>?): Int {
        if (slots == null) {
            return -1
        }
        for (i in slots.indices) {
            if (compare(slots[i])) {
                return i
            }
        }
        return -1
    }

    fun containsIn(slots: List<Slot>?): Boolean {
        if (slots == null) {
            return false
        }
        for (slot in slots) {
            if (compare(slot)) {
                return true
            }
        }
        return false
    }

    override fun toString(): String {
        return "Slot(" +
            "imei=$imei, " +
            "imsi=$imsi, " +
            "simState=$simState, " +
            "simStates=$simStates, " +
            "simSerialNumber=$simSerialNumber, " +
            "simOperator=$simOperator, " +
            "simCountryIso=$simCountryIso" +
            ")"
    }
} 
```

我还删除了本机库依赖项

```
import android.Manifest
import android.annotation.SuppressLint
import android.annotation.TargetApi
import android.content.Context
import android.os.Build
import android.telephony.SubscriptionManager
import android.text.TextUtils
import domain.shadowss.extension.areGranted
import domain.shadowss.extension.isLollipopMR1Plus
import domain.shadowss.extension.isMarshmallowPlus
import domain.shadowss.extension.isOreoPlus
import domain.shadowss.model.Slot
import org.jetbrains.anko.telephonyManager
import timber.log.Timber
import java.lang.ref.WeakReference
import java.lang.reflect.Modifier
import java.util.*

/**
 * https://mvnrepository.com/artifact/com.kirianov.multisim/multisim
 */
@Suppress("MemberVisibilityCanBePrivate")
class MultiSimManager(context: Context) {

    private val reference = WeakReference(context)

    val slots = arrayListOf<Slot>()
        @Synchronized get

    @Suppress("unused")
    val dualMcc: Pair<String?, String?>
        @SuppressLint("MissingPermission")
        @TargetApi(Build.VERSION_CODES.LOLLIPOP_MR1)
        get() = reference.get()?.run {
            if (isLollipopMR1Plus()) {
                if (areGranted(Manifest.permission.READ_PHONE_STATE)) {
                    val subscriptionManager =
                        getSystemService(Context.TELEPHONY_SUBSCRIPTION_SERVICE) as SubscriptionManager
                    val list = subscriptionManager.activeSubscriptionInfoList
                    return list.getOrNull(0)?.mcc?.toString()
                        ?.padStart(3, '0') to list.getOrNull(1)?.mcc?.toString()
                        ?.padStart(3, '0')
                }
            }
            null to null
        } ?: null to null

    @Synchronized
    @SuppressLint("MissingPermission")
    fun updateData(): String? = reference.get()?.run {
        if (areGranted(Manifest.permission.READ_PHONE_STATE)) {
            val error = try {
                var slotNumber = 0
                while (true) {
                    val slot = touchSlot(slotNumber)
                    if (slot == null) {
                        for (i in slotNumber until slots.size) {
                            slots.removeAt(i)
                        }
                        break
                    }
                    if (slot.containsIn(slots) && slot.indexIn(slots) < slotNumber) {
                        // protect from Alcatel infinity bug
                        break
                    }
                    slots.apply {
                        when {
                            size > slotNumber -> {
                                removeAt(slotNumber)
                                add(slotNumber, slot)
                            }
                            size == slotNumber -> add(slot)
                        }
                    }
                    slotNumber++
                }
                null
            } catch (e: Throwable) {
                Timber.e(e)
                e.toString()
            }
            // below is my custom logic only which was found on practice
            slots.removeAll { it.imsi == null || it.simOperator?.trim()?.isEmpty() != false }
            val imsi = arrayListOf<String?>()
            slots.forEachReversedWithIndex { i, slot ->
                if (imsi.contains(slot.imsi)) {
                    slots.removeAt(i)
                } else {
                    imsi.add(slot.imsi)
                    slot.simStates.apply {
                        clear()
                        addAll(slots.filter { it.imsi == slot.imsi }.map { it.simState })
                    }
                }
            }
            error
        } else {
            slots.clear()
            null
        }
    }

    @Suppress("SpellCheckingInspection", "DEPRECATION")
    @SuppressLint("MissingPermission", "HardwareIds")
    private fun touchSlot(slotNumber: Int): Slot? = reference.get()?.run {
        val slot = Slot()
        val telephonyManager = telephonyManager
        Timber.v("telephonyManager [$telephonyManager] ${telephonyManager.deviceId}")
        val subscriberIdIntValue = ArrayList<String>()
        val subscriberIdIntIndex = ArrayList<Int>()
        for (i in 0..99) {
            val subscriber = runMethodReflect(
                telephonyManager,
                "android.telephony.TelephonyManager",
                "getSubscriberId",
                arrayOf(i),
                null
            ) as? String
            if (subscriber != null && !subscriberIdIntValue.contains(subscriber)) {
                subscriberIdIntValue.add(subscriber)
                subscriberIdIntIndex.add(i)
            }
        }
        var subIdInt =
            if (subscriberIdIntIndex.size > slotNumber) subscriberIdIntIndex[slotNumber] else null
        if (subIdInt == null) {
            try {
                subIdInt = runMethodReflect(
                    telephonyManager,
                    "android.telephony.TelephonyManager",
                    "getSubId",
                    arrayOf(slotNumber),
                    null
                ).toString().toInt()
            } catch (ignored: Throwable) {
            }
        }
        Timber.v("subIdInt $subIdInt")
        val subscriberIdLongValue = ArrayList<String>()
        val subscriberIdLongIndex = ArrayList<Long>()
        for (i in 0L until 100L) {
            val subscriber = runMethodReflect(
                telephonyManager,
                "android.telephony.TelephonyManager",
                "getSubscriberId",
                arrayOf(i),
                null
            ) as? String
            runMethodReflect(
                telephonyManager,
                "android.telephony.TelephonyManagerSprd",
                "getSubInfoForSubscriber",
                arrayOf(i),
                null
            ) ?: continue
            if (subscriber != null && !subscriberIdLongValue.contains(subscriber)) {
                subscriberIdLongValue.add(subscriber)
                subscriberIdLongIndex.add(i)
            }
        }
        if (subscriberIdLongIndex.size <= 0) {
            for (i in 0L until 100L) {
                val subscriber = runMethodReflect(
                    telephonyManager,
                    "android.telephony.TelephonyManager",
                    "getSubscriberId",
                    arrayOf(i),
                    null
                ) as? String
                if (subscriber != null && !subscriberIdLongValue.contains(subscriber)) {
                    subscriberIdLongValue.add(subscriber)
                    subscriberIdLongIndex.add(i)
                }
            }
        }
        var subIdLong =
            if (subscriberIdLongIndex.size > slotNumber) subscriberIdLongIndex[slotNumber] else null
        if (subIdLong == null) {
            subIdLong = runMethodReflect(
                telephonyManager,
                "android.telephony.TelephonyManager",
                "getSubId",
                arrayOf(slotNumber),
                null
            ) as? Long
        }
        Timber.v("subIdLong $subIdLong")
        val listParamsSubs = ArrayList<Any?>()
        if (subIdInt != null && !listParamsSubs.contains(subIdInt)) {
            listParamsSubs.add(subIdInt)
        }
        if (subIdLong != null && !listParamsSubs.contains(subIdLong)) {
            listParamsSubs.add(subIdLong)
        }
        if (!listParamsSubs.contains(slotNumber)) {
            listParamsSubs.add(slotNumber)
        }
        val objectParamsSubs = listParamsSubs.toTypedArray()
        for (i in objectParamsSubs.indices) {
            Timber.v("SPAM PARAMS_SUBS [$i]=[${objectParamsSubs[i]}]")
        }
        val listParamsSlot = ArrayList<Any?>()
        if (!listParamsSlot.contains(slotNumber)) {
            listParamsSlot.add(slotNumber)
        }
        if (subIdInt != null && !listParamsSlot.contains(subIdInt)) {
            listParamsSlot.add(subIdInt)
        }
        if (subIdLong != null && !listParamsSlot.contains(subIdLong)) {
            listParamsSlot.add(subIdLong)
        }
        val objectParamsSlot = listParamsSlot.toTypedArray()
        for (i in objectParamsSlot.indices) {
            Timber.v("SPAM PARAMS_SLOT [$i]=[${objectParamsSlot[i]}]")
        }
        // firstly all Int params, then all Long params
        Timber.v("------------------------------------------")
        Timber.v("SLOT [$slotNumber]")
        if (isMarshmallowPlus()) {
            slot.imei = telephonyManager.getDeviceId(slotNumber)
        }
        if (slot.imei == null) {
            slot.imei = iterateMethods("getDeviceId", objectParamsSlot) as? String
        }
        if (slot.imei == null) {
            slot.imei = runMethodReflect(
                null,
                "com.android.internal.telephony.Phone",
                null,
                null,
                "GEMINI_SIM_" + (slotNumber + 1)
            ) as? String
        }
        if (slot.imei == null) {
            slot.imei = runMethodReflect(
                getSystemService("phone" + (slotNumber + 1)),
                null,
                "getDeviceId",
                null,
                null
            ) as? String
        }
        Timber.v("IMEI [${slot.imei}]")
        if (slot.imei == null) {
            when (slotNumber) {
                0 -> {
                    slot.imei = if (isOreoPlus()) {
                        telephonyManager.imei
                    } else {
                        telephonyManager.deviceId
                    }
                    slot.imsi = telephonyManager.subscriberId
                    slot.simState = telephonyManager.simState
                    slot.simOperator = telephonyManager.simOperator
                    slot.simSerialNumber = telephonyManager.simSerialNumber
                    slot.simCountryIso = telephonyManager.simCountryIso
                    return slot
                }
            }
        }
        if (slot.imei == null) {
            return null
        }
        slot.setSimState(iterateMethods("getSimState", objectParamsSlot) as? Int)
        Timber.v("SIMSTATE [${slot.simState}]")
        slot.imsi = iterateMethods("getSubscriberId", objectParamsSubs) as? String
        Timber.v("IMSI [${slot.imsi}]")
        slot.simSerialNumber = iterateMethods("getSimSerialNumber", objectParamsSubs) as? String
        Timber.v("SIMSERIALNUMBER [${slot.simSerialNumber}]")
        slot.simOperator = iterateMethods("getSimOperator", objectParamsSubs) as? String
        Timber.v("SIMOPERATOR [${slot.simOperator}]")
        slot.simCountryIso = iterateMethods("getSimCountryIso", objectParamsSubs) as? String
        Timber.v("SIMCOUNTRYISO [${slot.simCountryIso}]")
        Timber.v("------------------------------------------")
        return slot
    }

    @SuppressLint("WrongConstant")
    private fun iterateMethods(methodName: String?, methodParams: Array<Any?>): Any? =
        reference.get()?.run {
            if (methodName == null || methodName.isEmpty()) {
                return null
            }
            val telephonyManager = telephonyManager
            val instanceMethods = ArrayList<Any?>()
            val multiSimTelephonyManagerExists = telephonyManager.toString()
                .startsWith("android.telephony.MultiSimTelephonyManager")
            for (methodParam in methodParams) {
                if (methodParam == null) {
                    continue
                }
                val objectMulti = if (multiSimTelephonyManagerExists) {
                    runMethodReflect(
                        null,
                        "android.telephony.MultiSimTelephonyManager",
                        "getDefault",
                        arrayOf(methodParam),
                        null
                    )
                } else {
                    telephonyManager
                }
                if (!instanceMethods.contains(objectMulti)) {
                    instanceMethods.add(objectMulti)
                }
            }
            if (!instanceMethods.contains(telephonyManager)) {
                instanceMethods.add(telephonyManager)
            }
            val telephonyManagerEx = runMethodReflect(
                null,
                "com.mediatek.telephony.TelephonyManagerEx",
                "getDefault",
                null,
                null
            )
            if (!instanceMethods.contains(telephonyManagerEx)) {
                instanceMethods.add(telephonyManagerEx)
            }
            val phoneMsim = getSystemService("phone_msim")
            if (!instanceMethods.contains(phoneMsim)) {
                instanceMethods.add(phoneMsim)
            }
            if (!instanceMethods.contains(null)) {
                instanceMethods.add(null)
            }
            var result: Any?
            for (methodSuffix in suffixes) {
                for (className in classNames) {
                    for (instanceMethod in instanceMethods) {
                        for (methodParam in methodParams) {
                            if (methodParam == null) {
                                continue
                            }
                            result = runMethodReflect(
                                instanceMethod,
                                className,
                                methodName + methodSuffix,
                                if (multiSimTelephonyManagerExists) null else arrayOf(methodParam),
                                null
                            )
                            if (result != null) {
                                return result
                            }
                        }
                    }
                }
            }
            return null
        }

    private fun runMethodReflect(
        instanceInvoke: Any?,
        classInvokeName: String?,
        methodName: String?,
        methodParams: Array<Any>?,
        field: String?
    ): Any? {
        var result: Any? = null
        try {
            val classInvoke = when {
                classInvokeName != null -> Class.forName(classInvokeName)
                instanceInvoke != null -> instanceInvoke.javaClass
                else -> return null
            }
            if (field != null) {
                val fieldReflect = classInvoke.getField(field)
                val accessible = fieldReflect.isAccessible
                fieldReflect.isAccessible = true
                result = fieldReflect.get(null).toString()
                fieldReflect.isAccessible = accessible
            } else {
                var classesParams: Array<Class<*>?>? = null
                if (methodParams != null) {
                    classesParams = arrayOfNulls(methodParams.size)
                    for (i in methodParams.indices) {
                        classesParams[i] = when {
                            methodParams[i] is Int -> Int::class.javaPrimitiveType
                            methodParams[i] is Long -> Long::class.javaPrimitiveType
                            methodParams[i] is Boolean -> Boolean::class.javaPrimitiveType
                            else -> methodParams[i].javaClass
                        }
                    }
                }
                val method = if (classesParams != null) {
                    classInvoke.getDeclaredMethod(methodName.toString(), *classesParams)
                } else {
                    classInvoke.getDeclaredMethod(methodName.toString())
                }
                val accessible = method.isAccessible
                method.isAccessible = true
                result = if (methodParams != null) {
                    method.invoke(instanceInvoke ?: classInvoke, *methodParams)
                } else {
                    method.invoke(instanceInvoke ?: classInvoke)
                }
                method.isAccessible = accessible
            }
        } catch (ignored: Throwable) {
        }
        return result
    }

    @Suppress("unused")
    val allMethodsAndFields: String
        get() = """
            Default: ${reference.get()?.telephonyManager}${'\n'}
            ${printAllMethodsAndFields("android.telephony.TelephonyManager")}
            ${printAllMethodsAndFields("android.telephony.MultiSimTelephonyManager")}
            ${printAllMethodsAndFields("android.telephony.MSimTelephonyManager")}
            ${printAllMethodsAndFields("com.mediatek.telephony.TelephonyManager")}
            ${printAllMethodsAndFields("com.mediatek.telephony.TelephonyManagerEx")}
            ${printAllMethodsAndFields("com.android.internal.telephony.ITelephony")}
        """.trimIndent()

    private fun printAllMethodsAndFields(className: String): String {
        val builder = StringBuilder()
        builder.append("========== $className\n")
        try {
            val cls = Class.forName(className)
            for (method in cls.methods) {
                val params = method.parameterTypes.map { it.name }
                builder.append(
                    "M: ${method.name} [${params.size}](${TextUtils.join(
                        ",",
                        params
                    )}) -> ${method.returnType} ${if (Modifier.isStatic(method.modifiers)) "(static)" else ""}\n"
                )
            }
            for (field in cls.fields) {
                builder.append("F: ${field.name} ${field.type}\n")
            }
        } catch (e: Throwable) {
            builder.append("E: $e\n")
        }
        return builder.toString()
    }

    companion object {

        private val classNames = arrayOf(
            null,
            "android.telephony.TelephonyManager",
            "android.telephony.MSimTelephonyManager",
            "android.telephony.MultiSimTelephonyManager",
            "com.mediatek.telephony.TelephonyManagerEx",
            "com.android.internal.telephony.Phone",
            "com.android.internal.telephony.PhoneFactory"
        )

        private val suffixes = arrayOf(
            "",
            "Gemini",
            "Ext",
            "Ds",
            "ForSubscription",
            "ForPhone"
        )
    }
} 
```

可能对某人有帮助

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-07-15T06:19:17.507

```
 <receiver
     android:name=".SimChangedReceiver"
    android:enabled="true"
    android:process=":remote" >
    <intent-filter>
        <action android:name="android.intent.action.SIM_STATE_CHANGED" />
    </intent-filter>
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />
    </intent-filter>
 </receiver>

SimChangedReceiver class

public class SimChangedReceiver extends BroadcastReceiver {

public void onReceive(Context context, Intent intent) {
    String action = intent.getAction();
    if (action.equalsIgnoreCase("android.intent.action.SIM_STATE_CHANGED")) {
        Log.d("SimChangedReceiver", "--> SIM state changed <--");   

      //            do code  whatever u want to apply action                //

    }
   }
} 
```

这也适用于双卡，你不需要打电话给这个接收器，因为它会远程运行

# c# - 如何使用 Ajax ModalPopUpExtender 控件更新 GridView 中的特定列？

> ID：11305411
> 
> 赞同：0
> 
> 时间：2012-07-03T06:15:02.843
> 
> 标签：c#, asp.net

我是一名新的 ASP.NET 开发人员，我正在为我的公司开发一个基于 Web 的建议框程序，员工可以在其中提交他们有的任何安全建议。现在，我正在研究这个系统的管理部分。

管理员将能够查看 GridView 控件中列出的所有建议。在 GridView 的最后一列中，将在此处列出状态。当管理员单击其中一个建议的状态时，将出现一个新的弹出窗口 (asp.net ajax ModalPopUpExtender)，其中列出所有可能的状态，例如：已执行、已批准...等。当管理员选择其中一种状态，建议的状态将在数据库中更新。***我写了代码，但它仍然没有更新建议的状态，***

**所以你能帮我修改它吗？**

仅供参考，我有以下数据库设计：

```
Employee Table: Username, Name...
SafetySuggestionsLog: ID, Title, Description, Username, StatusID
SafetySuggestionsStatus: ID, Status 
```

**ASP.NET 代码：**

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>
        <asp:GridView ID="GridView1" runat="server" AllowPaging="True" 
                        AllowSorting="True" AutoGenerateColumns="False" DataKeyNames="ID" 
                        width="900px" CssClass="mGrid" 
                        DataSourceID="SqlDataSource1" 
                        OnRowDataBound="GridView1_RowDataBound">
            <AlternatingRowStyle BackColor="White" ForeColor="#284775" CssClass="alt" />
            <HeaderStyle Font-Bold = "True" ForeColor="Black" Height="20px"/> 
            <Columns>
                <asp:BoundField DataField="ID" HeaderText="ID" InsertVisible="False" 
                    ReadOnly="True" SortExpression="ID" />
                <asp:BoundField DataField="Title" HeaderText="Title" SortExpression="Title" />
                <asp:BoundField DataField="Description" HeaderText="Description" 
                    SortExpression="Description" />
                <asp:BoundField DataField="Name" HeaderText="Name" SortExpression="Name" />
                <asp:BoundField DataField="Username" HeaderText="Username" 
                    SortExpression="Username" />
                <asp:BoundField DataField="DivisionShortcut" HeaderText="DivisionShortcut" 
                    SortExpression="DivisionShortcut" />
                <asp:BoundField DataField="Type" HeaderText="Type" SortExpression="Type" />

                <%-- This to make status be opened and edited through the Ajax ModalPopUp Window --%>
                <asp:TemplateField HeaderText="Status">
                    <ItemTemplate>
                        <asp:LinkButton runat="server" ID="lnkSuggestionStatus" Text='<%#Eval("Status")%>'
                                        OnClick="lnkSuggestionStatus_Click">
                        </asp:LinkButton>
                    </ItemTemplate>
                </asp:TemplateField>

                <%--<asp:HyperLinkField HeaderText="Status" 
                    SortExpression="Status" />--%>
            </Columns>
            <RowStyle HorizontalAlign="Center" />
        </asp:GridView>

        <asp:Button runat="server" ID="btnModalPopUp" style="display:none" />

        <AjaxToolkit:ModalPopUpExtender ID="modalPopUpExtender1"
                                        runat="server" 
                                        TargetControlID="btnModalPopUp" 
                                        PopupControlID="pnlPopUp" 
                                        BackgroundCssClass="popUpStyle"
                                        PopupDragHandleControlID="panelDragHandle" 
                                        OkControlID="OKButton">
        </AjaxToolkit:ModalPopUpExtender>

        <asp:Panel runat="server" ID="pnlPopUp">

                    <asp:RadioButtonList ID="StatusList" runat="server" RepeatColumns="1" RepeatDirection="Vertical"
                                            RepeatLayout="Table" TextAlign="Left" DataSourceID="SuggestionStatusDataSource"
                                            DataTextField="Status" DataValueField="ID">
                        <asp:ListItem id="option1" runat="server" Value="ACTIONED" />
                        <asp:ListItem id="option2" runat="server" Value="APPROVED" />
                        <asp:ListItem id="option3" runat="server" Value="PENDING" />
                        <asp:ListItem id="option4" runat="server" Value="TRANSFERRED" />
                    </asp:RadioButtonList>
                    <asp:SqlDataSource ID="SuggestionStatusDataSource" runat="server"
                                        ConnectionString="<%$ ConnectionStrings:testConnectionString %>"
                                        SelectCommand="SELECT * FROM [SafetySuggestionsStatus]"></asp:SqlDataSource>

                    <asp:Button ID="confirmButton" runat="server" Text="Confirm" 
                                OnClientClick="javascript:return confirm('Are you sure you want to send an email notification about the safety suggestion to the owner?')" 
                                OnClick="btnSendStatus_Click" />

            <asp:Button ID="OKButton" runat="server" Text="Close" />
        </asp:Panel>
        </ContentTemplate>
        </asp:UpdatePanel> 
```

**代码隐藏：**

```
protected void lnkSuggestionStatus_Click(object sender, EventArgs e)
    {
        LinkButton lnkSuggestionStatus = sender as LinkButton;

//var safetySuggestionsId=

        //get reference to the row selected 
        GridViewRow gvrow = (GridViewRow)lnkSuggestionStatus.NamingContainer;

        //set the selected index to the selected row so that the selected row will be highlighted
        GridView1.SelectedIndex = gvrow.RowIndex;

        //show the modalPopUp
        modalPopUpExtender1.Show();
    }

public void btnSendStatus_Click(object sender, EventArgs e) {
        var statusID = StatusList.SelectedValue;

        string connString = "Data Source=localhost\\sqlexpress;Initial Catalog=psspdbTest;Integrated Security=True";
        //For updating the status of the safety suggestion
        string updateCommand = "UPDATE SafetySuggestionsStatus SET ID= @statusID where ID=@SafetySuggestionsID"";
        using (SqlConnection conn = new SqlConnection(connString))
        {
            conn.Open();
            //using (SqlCommand cmd = new SqlCommand(cmdText, conn))
            using (SqlCommand cmd = new SqlCommand(updateCommand, conn))
            {

                cmd.Parameters.AddWithValue("@ID", statusID);
                cmd.ExecuteNonQuery();
            }
        }

        SendSuggestionStatusToUser(statusID);
    } 
```

**更新：**

**当我调试代码时，出现以下错误：**

```
SqlException was unhandled by user code 
 Must declare the scalar variable "@SafetySuggestionsID" 
```

**更新 2：**

我按照您的建议修改了我的代码：

```
protected void lnkSuggestionStatus_Click(object sender, EventArgs e)
    {
        LinkButton lnkSuggestionStatus = sender as LinkButton;

        //var safetySuggestionsId = 

        //get reference to the row selected 
        GridViewRow gvrow = (GridViewRow)lnkSuggestionStatus.NamingContainer;

        //set the selected index to the selected row so that the selected row will be highlighted
        GridView1.SelectedIndex = gvrow.RowIndex;

        HiddenField1.Value = gvrow.RowIndex.ToString();

        //show the modalPopUp
        modalPopUpExtender1.Show();
    }

    public void btnSendStatus_Click(object sender, EventArgs e) {

        var statusID = StatusList.SelectedValue;

        string connString = "Data Source=localhost\\sqlexpress;Initial Catalog=psspdbTest;Integrated Security=True";
        //For updating the status of the safety suggestion
        string updateCommand = "UPDATE SafetySuggestionsLog SET StatusID= @statusID where ID=@SafetySuggestionsID";
        using (SqlConnection conn = new SqlConnection(connString))
        {
            conn.Open();
            using (SqlCommand cmd = new SqlCommand(updateCommand, conn))
            {
                cmd.Parameters.AddWithValue("@ID", Convert.ToInt32(statusID));
                cmd.Parameters.AddWithValue("@SafetySuggestionsID", Convert.ToInt32(HiddenField1.Value));
                cmd.ExecuteNonQuery();
            }
            //reset the value of hiddenfield
            HiddenField1.Value = "-1";
        }

        //SendSuggestionStatusToUser(statusID);
    } 
```

但是，在调试代码时，出现以下错误：

> 必须声明标量变量“@statusID”

我不知道为什么我已经定义了这个错误。

**更新 3：**

我添加`GridView1.DataBind()`以使用所选建议的更新状态更新 GridView，但它不适用于我。

```
public void btnSendStatus_Click(object sender, EventArgs e) {

        var statusID = StatusList.SelectedValue;

        string connString = "Data Source=localhost\\sqlexpress;Initial Catalog=psspdbTest;Integrated Security=True";
        //For updating the status of the safety suggestion
        string updateCommand = "UPDATE SafetySuggestionsLog SET StatusID= @statusID where ID=@SafetySuggestionsID";
        using (SqlConnection conn = new SqlConnection(connString))
        {
            conn.Open();
            using (SqlCommand cmd = new SqlCommand(updateCommand, conn))
            {
                cmd.Parameters.AddWithValue("@statusID", Convert.ToInt32(statusID));
                cmd.Parameters.AddWithValue("@SafetySuggestionsID", Convert.ToInt32(HiddenField1.Value));
                cmd.ExecuteNonQuery();
            }
            //reset the value of hiddenfield
            HiddenField1.Value = "-1";
        }

        GridView1.DataBind();

        //SendSuggestionStatusToUser(statusID);
    } 
```

**更新 4：** 我添加了以下内容，但没有奏效：

```
public void btnSendStatus_Click(object sender, EventArgs e) {

        var statusID = StatusList.SelectedValue;

        string connString = "Data Source=localhost\\sqlexpress;Initial Catalog=psspdbTest;Integrated Security=True";
        //For updating the status of the safety suggestion
        string updateCommand = "UPDATE SafetySuggestionsLog SET StatusID= @statusID where ID=@SafetySuggestionsID";
        using (SqlConnection conn = new SqlConnection(connString))
        {
            conn.Open();
            using (SqlCommand cmd = new SqlCommand(updateCommand, conn))
            {
                cmd.Parameters.AddWithValue("@statusID", Convert.ToInt32(statusID));
                cmd.Parameters.AddWithValue("@SafetySuggestionsID", Convert.ToInt32(HiddenField1.Value));
                cmd.ExecuteNonQuery();
            }
            //reset the value of hiddenfield
            HiddenField1.Value = "-1";
        }

        UpdatePanel1.Update();
        GridView1.DataBind();

        //SendSuggestionStatusToUser(statusID);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:39:39.130

我`SafetySuggestionsID`在任何地方都没有看到定义...您已将其定义为`statusID`

同样，当您添加参数时，您指的是`ID`...请进行这些更正或更新查询中的代码。

```
string updateCommand = "UPDATE SafetySuggestionsStatus SET ID= @statusID";  // where??
        using (SqlConnection conn = new SqlConnection(connString))  
        {  
            conn.Open();  
            //using (SqlCommand cmd = new SqlCommand(cmdText, conn))  
            using (SqlCommand cmd = new SqlCommand(updateCommand, conn))  
            {  

                cmd.Parameters.AddWithValue("@statusID", statusID);  
                cmd.ExecuteNonQuery();  
            }  
        } 
```

**更新**：

```
"UPDATE SafetySuggestionsStatus SET ID= @statusID where ID=@SafetySuggestionsID""; 
```

您已经定义了 2 个参数，但您在参数集合中只添加了 1 个：

```
cmd.Parameters.AddWithValue("@ID", statusID); // id should be statusID
// also add @SafetySuggestionsID 
```

**更新 2：** 在您的`lnkSuggestionStatus_Click`事件处理程序中，获取第一列 (ID) 的值并将其存储在一个类变量中，例如 safetySuggestionsId。

然后在您的`btnSendStatus_Click`事件处理程序中，您可以简单地添加：

```
using (SqlConnection conn = new SqlConnection(connString))   
        {   
            conn.Open();   
            //using (SqlCommand cmd = new SqlCommand(cmdText, conn))   
            using (SqlCommand cmd = new SqlCommand(updateCommand, conn))   
            {   

                cmd.Parameters.AddWithValue("@statusID ", statusID); 
                cmd.Parameters.AddWithValue("@SafetySuggestionsID", safetySuggestionsId);   
                cmd.ExecuteNonQuery();   
            }   
        } 
```

**更新3：** 希望以下工作，因为这是未经测试的......：

1.  在模态弹出面板中添加一个隐藏字段 -->

2.  然后在您的`lnkSuggestionStatus_Click`事件处理程序中，添加：

    hiddenRowIndex.Value = row.Cells[1].Text; // 必要时修剪

3.  然后当你保存时，在你的`btnSendStatus_Click`事件处理程序中，你可以简单地添加：

    ```
     ...
           ...   
            {   

                cmd.Parameters.AddWithValue("@statusID ", statusID); 
                cmd.Parameters.AddWithValue("@SafetySuggestionsID", 
                                            Convert.ToInt32(hiddenRowIndex.Value));   
                cmd.ExecuteNonQuery();   
            } 
            // reset hiddenRowIndex
            hiddenRowIndex.Value = "-1";
        } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:02:29.070

最后，我知道如何解决它。我的问题是 HiddenField，我立即将其分配给所选行的索引，而没有指定分配给该行的 DataKey。

我只需要在 lnkSuggestionStatus_Click 方法中修改它：

```
HiddenField1.Value = GridView1.DataKeys[gvrow.RowIndex].Value.ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T06:41:55.157

看看这个示例项目

[http://www.codeproject.com/Articles/17722/GridView-with-a-single-ModalPopupExtender-Panel-fo](http://www.codeproject.com/Articles/17722/GridView-with-a-single-ModalPopupExtender-Panel-fo)

[http://mattberseth.com/blog/2007/07/modalpopupextender_example_for.html](http://mattberseth.com/blog/2007/07/modalpopupextender_example_for.html)

[http://thinkofdotnet.blogspot.com/2012/05/edit-update-gridview-with-ajax.html](http://thinkofdotnet.blogspot.com/2012/05/edit-update-gridview-with-ajax.html)

# php - 使用带有密钥的 REST_Controller Codeigniter API

> ID：11305413
> 
> 赞同：2
> 
> 时间：2012-07-03T06:15:15.463
> 
> 标签：php, codeigniter, rest, codeigniter-2

这是我的 PHP 应用程序访问由 Phil sturgeon 编写的 CI Rest 库的代码。当我禁用 api 密钥时，它似乎很好。这是json结果如下：

```
[{"groupID":"1","listID":"1","groupTitle":"GroupA","groupName":"Group Name 1"}] 
```

当我尝试在 rest 库中启用 api 密钥时。我收到这个

```
{"status":false,"error":"Unknown method."} 
```

也在我的终端上尝试：

我懂了

**卷曲**

```
[2012-07-03 14:11.42]  ~
[User4001.me] → curl -X POST -H "X-API-KEY: 221b368d7f5f597867f525971f28ff75" http://localhost/mailapi/index.php/api/group/id/1
{"status":false,"error":"Unknown method."} 
```

**关于 PHP**
test.php

```
$ch = curl_init();
curl_setopt_array($ch, array(
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_URL => 'http://localhost/mailapi/index.php/api/group/id/1',
    CURLOPT_POSTFIELDS => 'X-API-KEY=221b368d7f5f597867f525971f28ff75'
));
$response = curl_exec($ch);

echo"<pre>";
print_r($response);
echo"</pre>"; 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:04:33.987

Phils 库默认查找 X-API-KEY 作为标题，而不是帖子。该文档明确指出您需要更改配置文件以接受 post vars。

# asp.net - 使用 GridView 删除记录

> ID：11305418
> 
> 赞同：0
> 
> 时间：2012-07-03T06:15:42.220
> 
> 标签：asp.net, vb.net

我在删除记录时遇到了一些问题。我将 VB.net 与 Access 数据库一起使用。当我尝试运行这个程序时没有错误，但记录没有在数据库中删除。有一个类可以删除记录，这个类将调用另一个方法，即 DeleteMultipleRecords。这是我的代码，希望任何人都可以帮助我解决这个问题。

**-Default.aspx.vb-**

```
Protected Sub btnDelete_Click(ByVal sender As Object, ByVal e As EventArgs) Handles btnDelete.Click
    'create string collection to store IDs of records to be deleted
    Dim idCollection As New StringCollection()
    Dim strID As String = String.Empty
    'Loop through GridView rows to find checked rows 
    For i As Integer = 0 To i < GridView1.Rows.Count - 1
        Dim chkDelete As CheckBox = DirectCast(GridView1.Rows(i).Cells(0).FindControl("chkSelect"), CheckBox)
        If chkDelete IsNot Nothing Then
            If chkDelete.Checked Then

                strID = GridView1.Rows(i).Cells(1).Text
                idCollection.Add(strID)

            End If
        End If
    Next

    'called method to delete record
    DeleteMultipleRecords(idCollection)

    'rebind(GridView)
    GridView1.DataBind()
End Sub
Private Sub DeleteMultipleRecords(ByVal idCollection As StringCollection)
    'create connection
    Dim cnnOLEDB As New OleDbConnection(strConnection)
    Dim IDs As String = ""

    'create string builder to store 
    'delete commands seperated by ;

    For Each id As String In idCollection

        IDs += id.ToString() & ","
    Next

    Try

        Dim strIDs As String = IDs.Substring(0, IDs.LastIndexOf(""))
        Dim strSql As String = ("Delete from Details WHERE ID = '" & strIDs & "' ")

        cmdOLEDB.CommandType = CommandType.Text
        cmdOLEDB.CommandText = strSql
        cmdOLEDB.Connection = cnnOLEDB
        cnnOLEDB.Open()
        cmdOLEDB.ExecuteNonQuery()
        cmdOLEDB.Dispose()

    Catch ex As OleDbException

        Dim errorMsg As String = "Error in Deletion"
        errorMsg += ex.Message
        Throw New Exception(errorMsg)

    Finally
        cnnOLEDB.Close()
    End Try

End Sub 
```

**-Default.aspx-**

```
<asp:GridView ID="GridView1" runat="server" AllowPaging="True" 
        DataSourceID="SqlDataSource1" AutoGenerateColumns="False" DataKeyNames="ID">
        <Columns>
        <asp:TemplateField HeaderText="Select">
<ItemTemplate>

<asp:CheckBox ID="chkSelect" runat="server" />
</ItemTemplate>
 </asp:TemplateField>
<asp:BoundField DataField="ID" HeaderText="ID" SortExpression="ID"/>

<asp:TemplateField HeaderText="Name" 
                   SortExpression="Name">
<ItemTemplate>
<asp:TextBox ID="txtName" runat="server" 
             Text='<%# Bind("Name") %>'  ReadOnly="true" 
             BorderStyle="none" 
             BorderWidth="0px" >
</asp:TextBox>
</ItemTemplate>
</asp:TemplateField>

<asp:TemplateField HeaderText="Location" 
                   SortExpression="Location">
<ItemTemplate>
<asp:TextBox ID="txtLocation" runat="server" 
             Text='<%# Bind("Location") %>' 
             ReadOnly="true" 
             BorderStyle="none" BorderWidth="0px">
</asp:TextBox>
</ItemTemplate>
</asp:TemplateField>
        </Columns>
    </asp:GridView>

    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:LabSystemDBConnectionString %>" 
        ProviderName="<%$ ConnectionStrings:LabSystemDBConnectionString.ProviderName %>" 
        SelectCommand="SELECT * FROM [Details]"
        DeleteCommand = "DELETE FROM [Details] WHERE ID = [@ID]">

    <DeleteParameters>
    <asp:Parameter Name="ID" />
    </DeleteParameters></asp:SqlDataSource>

    <asp:Button ID="btnDelete" runat="server" OnClick="btnDelete_Click" OnClientClick="return DeleteConfirmation();"  Text="Delete" />
    &nbsp;<br /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:32:25.393

你应该改变这些行来工作：

```
For Each id As String In idCollection

    IDs += "'" + id.ToString() & "',"
Next

Try

    Dim strIDs As String = IDs.Substring(0, IDs.LastIndexOf(""))
    Dim strSql As String = ("Delete from Details WHERE ID IN (" & strIDs & ")") 
```

**但是**：此代码容易出现[SQL INJECTION](http://msdn.microsoft.com/en-us/library/ms161953%28v=sql.105%29.aspx)，您必须在 2012 中使用 SQL 参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:13:14.423

请设置一个断点

```
Dim strSql As String = ("Delete from Details WHERE ID IN (" & strIDs & ")") 
```

然后运行你的应用程序，并在strSql中添加watch，当断点被命中时，按F11，然后你可以看到strSql的内容，复制那个sql语句并在你的Access数据库中运行查询，看看它是否工作。

PS：尝试在表名中加[]，DELETE FROM [详情]

# linux - Apache2 - 403 禁止，chmod/chown/chgrp 没有任何区别

> ID：11305424
> 
> 赞同：0
> 
> 时间：2012-07-03T06:16:39.583
> 
> 标签：linux, apache, permissions, http-status-code-403

我正在运行 Ubuntu 12.04、32、PHP、Apache2。我有一个普遍可读的文件夹：/home/ashesh/commonfloor.com/developmentBranch11.0/html - 这就是 apache2 所指向的。commonfloor.com 也是普遍可读、可执行的。里面的所有文件夹也是如此。

不管我怎么尝试，我都可以看到 apache2 抛出了 403 禁止错误。它为 favicon.ico 抛出了一个权限被拒绝，更具体地说：

```
[Mon Jul 02 12:18:39 2012] [error] [client 127.0.0.1] (13)Permission denied: access to / denied
[Mon Jul 02 12:18:39 2012] [error] [client 127.0.0.1] (13)Permission denied: access to /favicon.ico denied 
```

我已经在这些文件夹上尝试了 chown www-data 和 chgrp www-data ，但没有任何帮助。可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T06:49:20.750

所以，我不得不放弃这个。在 /var/www/commonfloor.com [rwX] 中重新检查了代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:56:22.310

我现在看不出原因。您使用非常日志路径，可能有任何子文件夹以不允许 apache 访问的方式设置权限。尝试使用默认路径，`/var/www/myproject`并创建从您的主目录到该文件夹​​的软链接。

那对你有用吗？

# jsf - JSF 富脸 ( 标签库支持命名空间：http://java.sun.com/jsf/html，但没有为名称定义标签：head）

> ID：11305425
> 
> 赞同：1
> 
> 时间：2012-07-03T06:16:44.000
> 
> 标签：jsf, richfaces

我在 JSF 上工作了 3 周，我被 Richfaces 卡住了，实际上我的演示应用程序运行良好，但是当我将它集成到我的项目中时，它给了我这个错误：-

**标签库支持命名空间：http: [//java.sun.com/jsf/html](http://java.sun.com/jsf/html)，但没有为名称定义标签：head**

**我的库包含：-**

commons-beanutils-1.8.3

commons-codec-1.3

commons-collections-3.2

commons-digester-1.8

公共发现-0.4

公共日志记录-1.1.1

休眠3

hibernate-commons-annotations-3.0.0.ga

休眠验证器-3.0.0.ga

jsf-facelets-1.1.15.B1

myfaces-api-2.0.2

myfaces-impl-2.0.2

richfaces-api-3.3.3.Final (1)

richfaces-impl-3.3.3.Final

richfaces-ui-3.3.3.Final

我认为两个罐子是矛盾的......

欢迎任何帮助thnx :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:22:38.903

此错误消息是 JSP 标记库的典型错误消息。这`<h:head>`是自 JSF 2.0 以来的新功能。因此，这意味着您试图在 JSP 文件中使用 JSF 2.0 特定标记。但是，自 JSF 2.0 以来，JSP 已被**弃用为视图技术。**不*支持*JSP 文件的 JSF 2.0 特定标记，如`<h:head>`、`<h:body>`、`<f:ajax>`等。

您应该改用 Facelets (XHTML)。

### 也可以看看：

*   [从 JSF 1.2 迁移到 JSF 2.0](https://stackoverflow.com/questions/4441713/migrating-from-jsf-1-2-to-jsf-2-0)

* * *

**与具体问题无关**，虽然 RichFaces 3.3.3 在经过几次 hack 后仍可在 JSF 2.0 上运行，但强烈建议在涉及新的 JSF 2.x 项目时立即开始使用 RichFaces 4.x。

# networking - 网络地址背后的想法是什么？

> ID：11305428
> 
> 赞同：-2
> 
> 时间：2012-07-03T06:16:58.100
> 
> 标签：networking, ip-address, lighttpd

我想阻止我的网络服务器的整个 IP 范围，但我不确定是否可以使用 lighttpd。例如 10.0.0.0/8 或 176.4.8.0/24 的网络地址背后的想法究竟是什么？尤其是反斜杠和数字让我感到困惑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:26:58.647

那是网络掩码。（一个二进制掩码，告诉路由器使用 IP 的哪一部分）

/24 代表 24 个，所以 174.4.8.0/24

10110000.00000010.00000100.00000000 地址 11111111.11111111.11111111.00000000 网络掩码

这有点痛苦，但并不难 [http://en.wikipedia.org/wiki/Subnetwork](http://en.wikipedia.org/wiki/Subnetwork)

# c# - 自定义 app.config 列表在 ApplicationConfiguration.GetSection() 上产生错误

> ID：11305429
> 
> 赞同：1
> 
> 时间：2012-07-03T06:16:59.897
> 
> 标签：c#, .net, app-config

**背景：** 尝试按照以下示例在 app.config 中实现列表：

*   [http://jopinblog.wordpress.com/2007/04/20/custom-configurationsections-in-net-20-config-files/](http://jopinblog.wordpress.com/2007/04/20/custom-configurationsections-in-net-20-config-files/)
*   [http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/0f3557ee-16bd-4a36-a4f3-00efbeae9b0d](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/0f3557ee-16bd-4a36-a4f3-00efbeae9b0d)
*   [带有“添加”元素的简单列表的自定义 app.config 部分](https://stackoverflow.com/questions/2718095/custom-app-config-section-with-a-simple-list-of-add-elements)
*   [app.config 的自定义配置 - 部分的集合？](https://stackoverflow.com/questions/7203557/custom-configuration-for-app-config-collections-of-sections)

**目标：** 我希望解决此错误并使其正常工作。

**错误：**

> 无法识别的元素“lookupMapping”。（C：...第 75 行）

**通过以下方式调试时在此行产生错误：**

LookupMappingsConfigSection section = (LookupMappingsConfigSection)config.Sections["lookupMappings"];

**app.config 片段：**

```
<configuration>
  <configSections>
    <section name="lookupMappings" type="System.Configuration.AppSettingsSection, System.Configuration, Version=4.0.30319.1, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/> 
  </configSections>
  <lookupMappings>
    <lookupMapping name="One" lookupName="foo" />
    <lookupMapping name="Two" lookupName="foo" />
    <lookupMapping name="Three" lookupName="foo" />
    <lookupMapping name="Four" lookupName="foo" />
  </lookupMappings> 
</configuration> 
```

课程：

```
public class LookupMappingsInstanceElement : ConfigurationElement
{
    [ConfigurationProperty("name", IsRequired = true)]
    public string Name
    {
        get { return (string)base["name"]; }
        set { base["name"] = value; }
    }

    [ConfigurationProperty("lookupName", IsRequired = true)]
    public string LookupName
    {
        get { return (string)base["lookupName"]; }
        set { base["lookupName"] = value; }
    }
}

public class LookupMappingsConfigSection: ConfigurationSection
{
    [ConfigurationProperty("lookupMappings", IsDefaultCollection = true, IsRequired = true)]
    [ConfigurationCollection(typeof(LookupMappingsConfigCollection), AddItemName = "lookupMapping")]
    public LookupMappingsConfigCollection Instances
    {
        get { return (LookupMappingsConfigCollection) this[""]; }
        set { this[""] = value; }
    }
}

public class LookupMappingsConfigCollection : ConfigurationElementCollection
{
    protected override ConfigurationElement CreateNewElement()
    {
        return new LookupMappingsInstanceElement();
    }

    protected override object GetElementKey(ConfigurationElement element)
    {
        return ((LookupMappingsInstanceElement) element).Name;
    }

    public LookupMappingsInstanceElement this[int idx]
    {
        get { return (LookupMappingsInstanceElement)BaseGet(idx); }
    }

    public override ConfigurationElementCollectionType CollectionType
    {
        get { return ConfigurationElementCollectionType.BasicMap; }
    }

    protected override string ElementName
    {
        get { return "lookupMapping"; }
    }
} 
```

**实现c#：**

```
Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
LookupMappingsConfigSection section = (LookupMappingsConfigSection)config.Sections["lookupMappings"]; // <--ERROR ON THIS LINE
LookupMappingsInstanceElement entry1 = section.Instances[0];
LookupMappingsInstanceElement entry2 = section.Instances[1]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T06:54:57.380

好的。我开始了，根据帖子，我的命名空间和程序集在 app.config 部分区域中不正确。我还必须在我的 app.config 中添加一个额外的分组才能让它发挥得很好。这是我的最终产品，以防它帮助别人..

应用程序配置

```
<configuration>
  <configSection>
    <section name="LookupMappingsSection" type="your.namespace.LookupMappingsConfigSection, your.assembly"/>
  </configSections>
  <LookupMappingsSection>
    <LookupMappings>
      <add name="One" lookupName="foo" />
      <add name="Two" lookupName="foo" />
      <add name="Three" lookupName="foo" />
      <add name="Four" lookupName="foo" />
    </LookupMappings>
  </LookupMappingsSection>
</configuration> 
```

c# 类

```
public class LookupMappingsConfigSection: ConfigurationSection
{
    [ConfigurationProperty("LookupMappings")]
    public LookupMappingsConfigCollection LookupMappings
    {
        get { return ((LookupMappingsConfigCollection)(base["LookupMappings"])); }
    }
}

[ConfigurationCollection(typeof(LookupMappingElement))]
public class LookupMappingsConfigCollection : ConfigurationElementCollection
{
    protected override ConfigurationElement CreateNewElement()
    {
        return new LookupMappingElement();
    }

    protected override object GetElementKey(ConfigurationElement element)
    {
        return ((LookupMappingElement) element).Name;
    }

    public LookupMappingElement this[int idx]
    {
        get { return (LookupMappingElement)BaseGet(idx); }
    }

}

public class LookupMappingElement : ConfigurationElement
{
    [ConfigurationProperty("name", DefaultValue = "",IsKey = true)]
    public string Name
    {
        get { return (string)base["name"]; }
        set { base["name"] = value; }
    }

    [ConfigurationProperty("lookupName", DefaultValue = "", IsKey = false, IsRequired = false)]
    public string LookupName
    {
        get { return (string)this["lookupName"]; }
        set { base["lookupName"] = value; }
    }
}

//Get the lookup entries
LookupMappingsConfigSection section = (LookupMappingsConfigSection)ConfigurationManager.GetSection("LookupMappingsSection");
foreach(LookupMappingElement lookupMapping in section.LookupMappings)
{ 
    //Do something 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T07:10:27.587

您的自定义配置部分的命名空间是什么？

我从您编写的配置文件中看到：

```
type="System.Configuration.AppSettingsSection, System.Configuration, Version=4.0.30319.1, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" 
```

这不应该是这样的：

```
type="your.namespace.LookupMappingsConfigSection, your.assembly" ? 
```

对于自定义配置部分，您还可以查看[配置部分设计器](http://csd.codeplex.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T07:11:06.677

配置部分定义无效。它应该指向实现 LookupMappingsConfigSection 的完全限定名称。

```
<configuration>
  <configSections>
    <section name="lookupMappings" type="MyAssembly.Namespace.LookupMappingsConfigSection, MyAssembly"/> 
  </configSections>
  <lookupMappings>
    <lookupMapping name="One" lookupName="foo" />
    <lookupMapping name="Two" lookupName="foo" />
    <lookupMapping name="Three" lookupName="foo" />
    <lookupMapping name="Four" lookupName="foo" />
  </lookupMappings> 
</configuration> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T07:17:07.213

主要问题是您试图将您的`lookupMappings`部分作为标准加载`AppSettingsSection`。将配置文件更改为：

```
<configuration>
  <configSections>
    <section name="lookupMappings" type="Fully.Qualified.Type.Of.LookupMappingsConfigSectionType, Name.Of.Assembly.Containing.LookupMappingsConfigSectionType"/> 
  </configSections>
  <lookupMappings>
    <lookupMapping name="One" lookupName="foo" />
    <lookupMapping name="Two" lookupName="foo" />
    <lookupMapping name="Three" lookupName="foo" />
    <lookupMapping name="Four" lookupName="foo" />
  </lookupMappings> 
</configuration> 
```

> **注意：**您需要将`Fully.Qualified.Type.Of.LookupMappingsConfigSectionType`和替换`Name.Of.Assembly.Containing.LookupMappingsConfigSectionType`为适当的类型和程序集名称。

# java - IF 语句中的死代码警告

> ID：11305432
> 
> 赞同：4
> 
> 时间：2012-07-03T06:17:17.243
> 
> 标签：java, warnings

我不知道为什么eclipse在我的这段代码中警告我“死代码”：

```
 PreparedStatement p = conn.prepareStatement("SELECT name FROM user WHERE age = ? , city = ?");
    p.setInt(1, (String) parameters.get("age"));
    p.setString(2, (String) parameters.get("city"));

    if (p == null) {
        log.warn("User is not available");
        return results;
    } 
```

警告在日志中，有人可以告诉我这是什么原因吗？谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T06:18:41.953

`p`不能`null`在那个时候，仅仅因为你已经调用过`setInt`并且如果它在那里，那么它会抛出一个，因此永远不会到达你的.`setString``p``null``NullPointerException``if`

另请注意，根据[其文档](http://docs.oracle.com/javase/7/docs/api/java/sql/Connection.html#prepareStatement%28java.lang.String%29)，`preparedStatement`永远无法返回`null`。它只能返回有效语句或抛出异常。在后一种情况下，您`if`也不会被联系到*。*然而，编译器*不会*检查这一事实（因为理论上*可能*return的*错误*实现）。`prepareStatement` *`null`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:24:02.647

You need to do that `null` check before you call any method on `p`. If p is `null`, it will never reach that line.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-03T06:20:54.733

如果`p`是`null`则在第二行本身将抛出“NullPointerException”。

更改如下代码

```
PreparedStatement p = conn.prepareStatement("SELECT name FROM user WHERE age = ? , city = ?");
if(p != null){
    p.setInt(1, (String) parameters.get("age"));
    p.setString(2, (String) parameters.get("city"));
}else{
    log.warn("User is not available");
    return results;
} 
```

`if loop`或使用前带上`p`

```
PreparedStatement p = conn.prepareStatement("SELECT name FROM user WHERE age = ? , city = ?");
if (p == null) {
    log.warn("User is not available");
    return results;
}
p.setInt(1, (String) parameters.get("age"));
p.setString(2, (String) parameters.get("city")); 
```*

# iphone - 找不到可能的内存泄漏

> ID：11305434
> 
> 赞同：0
> 
> 时间：2012-07-03T06:17:24.243
> 
> 标签：iphone, objective-c

当我分析我的代码是否存在来自 xcode 的内存泄漏时，我有一个警告。我尝试了一个小时来弄清楚但无法理解，但我对特定代码有些怀疑：

```
[stack push:[outputString copy]];
[stack print]; //here xcode tell there is potential leak of an object that is createn on above line 
```

我的堆栈实现是：

```
-(void) push:(NSString *)element{
[store addObject:element];
top++;
}

-(void) print{
NSLog(@"%@", [store objectAtIndex:top]);
}

- (void)dealloc {
[store release];
[super dealloc];
} 
```

这是我的堆栈类的初始化：

```
-(id) initWithMutableArray{
self = [super init];
if(self){
    store = [[NSMutableArray alloc] init];
    top = -1;
}
return self;
} 
```

我怀疑代码 [outputString 复制]。但是我将它存储在数组中，并且我在 dealloc 上释放存储数组。格拉西亚斯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T06:21:47.227

没有`release`平衡，`[outputString copy]`所以它被泄露了。将对象添加到数组时，它会被数组保留并在数组被销毁时释放。

# code-analysis - 将设备转储与 FDT 和 ant 一起使用

> ID：11305437
> 
> 赞同：0
> 
> 时间：2012-07-03T06:17:39.710
> 
> 标签：code-analysis, active-script

我对 Flash 开发完全陌生，甚至还不知道 ActiveScript。我必须改进一些现有的 Flash 应用程序，所以首先我需要了解代码。我想使用一些工具进行代码分析，以可视化类依赖关系和代码结构。我用谷歌搜索并发现了有关 Apparat 工具的信息。现在我正在努力解决它，因为我找不到描述如何使用 Apparat 的文档。我很沮丧，但它似乎是唯一这样的工具。

所以我从例子开始。

我已经按照本指南设置了在 FDT 上运行的设备： [http](http://www.webdevotion.be/blog/2010/06/02/how-to-get-up-and-running-with-apparat/) ://www.webdevotion.be/blog/2010/06/02/how-to-get-up-and-running-with-apparat/ 示例（ http://blog.joa-ebert.com/2010/05/26/new-apparat-example/) 构建良好并创建了两个 SWF 文件。（我正在使用 ANT 构建器）

现在我想分析现有的 swf 并查看具有类依赖关系的 PNG。我该怎么做？我必须添加什么以及在哪里添加？

或者也许有人可以解释如何从 Windows 命令行使用转储？就像是

```
dump example.swf exampleAnalysis.png 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T01:17:44.183

在解决所有依赖项（这很棘手）之后，我设法让转储运行

```
dump -i example.swf -uml 
```

但它以 .DOT 格式保存 UML 图，这真的很难阅读，因为 Graphviz GVedit 无法缩放并只能导出到 PNG 只看到你看到的（混乱的无法读取缩小的图），smyrna 不起作用，zgrviewer 无法加载一些文件。

# android - Android NDK：诊断日志日志功能错误

> ID：11305439
> 
> 赞同：0
> 
> 时间：2012-07-03T06:17:50.987
> 
> 标签：android, android-ndk

如何诊断 log log 函数错误，即返回负值时：

```
/*
 * Send a formatted string to the log, used like printf(fmt,...)
 */
int __android_log_print(int prio, const char *tag,  const char *fmt, ...); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:12:07.103

简短的回答：检查 errno。

长答案：出现 __android_log_print 可以返回负值的两个原因。第一个是如果它无法打开任何用于写入的日志文件（/dev/log/main、/dev/log/radio 或 /dev/log/events）。第二个是如果 write() 系统调用返回一个负数。

__android_log_print 返回负值后，是否设置了errno？如果是这样，它的值应该给你一些关于哪里出了问题的信息。如果 errno 为零，您的日志调用可能会在 __write_to_log_null 中结束，您应该调查您的程序打开这些 /dev/log 文件的能力。

如果设置了 errno，则可能是在尝试打开日志文件时设置了它。您应该能够通过设置 errno = 0 来隔离这种情况，然后使用错误的 log_id（第一个参数）调用 __android_log_bug_write。为了使它有用，它需要是对任何日志记录函数的第一次调用 - 否则文件打开阶段将会过去。显然，这仅在 errno 设置为可能在写入时间或打开时间设置的情况下才有必要。

这个答案来自 system/core/liblog/logd_write.c。

# android - 在 AndEngine Android 中绘画

> ID：11305440
> 
> 赞同：0
> 
> 时间：2012-07-03T06:17:52.063
> 
> 标签：android, andengine

我想知道AndEngine里有没有绘画工具？或者有人知道如何在 Touch with different Colors 上绘制场景？

如果您使用过 Paint 或 Photo shop，其中有一个绘画选项。我想在我的应用程序中拥有相同的功能。我正在为儿童开发着色应用程序。为此目的在 AndEngine 中使用 Line 并没有提供平滑度和质量。你知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:49:26.310

您可以加载一个精灵（白色圆圈）。并在用户每次触摸屏幕时添加它（在`onAreaTouched()`方法中）。如果`MotionEvent == ACTION_DOWN`或`MotionEvent == ACTION_MOVE`只是添加一个精灵。

您可以使用`sprite.setColor()`更改画笔颜色和`sprite.setScale()`更改画笔大小。

希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T06:02:11.043

您可以通过 LayoutGamActivity 来完成。使用 layoutgameActivity 并在 XML 中添加自定义视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T00:33:58.030

有一个实体“线”可以被绘制并具有定义的“宽度”。也许这就是你正在寻找的。

# html - youtube 视频未加载到我的本地网页中

> ID：11305441
> 
> 赞同：0
> 
> 时间：2012-07-03T06:18:01.073
> 
> 标签：html, iframe, youtube

我从 youtube 本身为 youtube 视频获取了以下 iframe 代码。

```
<iframe width=”560? height=”315? src=”http://www.youtube.com/embed/V3oJR5IAMxM” frameborder=”0? allowfullscreen></iframe> 
```

但是当我尝试将此视频嵌入到 div 元素内的简单网页上时。我可以在网页中看到 youtube 播放器。但是视频没有加载到我的网页中。但同样的视频正在 youtube 上为我播放。

谁能告诉我可能是什么问题，..

是代码问题还是浏览器问题，我使用的是 mozilla 13。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T06:55:31.073

HiTbmBizz,

试试这个，

`<iframe width="640" height="360" src="http://www.youtube.com/embed/V3oJR5IAMxM?feature=player_embedded" frameborder="0" allowfullscreen></iframe>`

如果您想测试，可以在 HTMLSandbox 中为我工作。

让我知道事情的后续。

# iphone - 如何将图像从文档目录显示到图像视图？

> ID：11305445
> 
> 赞同：2
> 
> 时间：2012-07-03T06:18:07.010
> 
> 标签：iphone, objective-c, ios5, uiimageview

我想从文档目录显示我的图像...我得到了目录的内容。但是当我想显示图像时，它什么也不显示...我检查了文档目录..有图像..但不知道为什么它没有显示在 UIimage 视图中？？？

有谁能够帮我？？？问题出在哪里？？？

我的代码

```
NSArray *filePathsArray = [[NSFileManager defaultManager] subpathsOfDirectoryAtPath:newDir  error:nil];
setImage.image = [UIImage imageWithContentsOfFile:[filePathsArray objectAtIndex:0]]; 
```

嘿，我得到了答案.....请点击此链接

[这里](https://stackoverflow.com/a/11294125/1465480)

感谢大家的宝贵帮助......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:04:18.327

尝试这个，

```
NSArray *filePathsArray = [[NSFileManager defaultManager] subpathsOfDirectoryAtPath:newDir  error:nil];
NSString *str_imgpath = [NSString stringWithFormat:@"%@/imageName.png", [filePathsArray objectAtIndex:0]]
imgView.image = [UIImage imageWithData:[NSData dataWithContentsOfFile:str_imgpath]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:55:29.567

您已使用文档目录的路径，但未提供存储在那里的图像的路径.. 请在此处查看以下内容

```
NSArray *filePathsArray = [[NSFileManager defaultManager] subpathsOfDirectoryAtPath:newDir  error:nil];
setImage.image = [UIImage imageWithContentsOfFile:[NSString stringWithFormat:@"%@/imageName.png", [filePathsArray objectAtIndex:0]]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T06:39:49.290

如果您在文档目录中的图像使用以下内容：

```
NSString *directory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *newPath = [directory stringByAppendingPathComponent:@"myMovie.m3u8"];
    UIImage *image=[UIImage imageWithContentsOfFile:newPath]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T06:22:20.877

我认为您`UIImage`对`UIImageView`. 创建`UIImage`setImage 后，您需要将其设置为 UIImageView：

```
UIImageView *myImageView = [[UIImageView alloc] initWithImage:setImage]; 
```

那么您需要将 myImageView 添加到您的视图中：

```
[self.view addSubview:myImageView]; 
```

**编辑**：

检查文件是否存在于您使用的路径`fileExistsAtPath`并记录输出：

```
if ([[NSFileManager defaultManager] fileExistsAtPath:myPath]) {

     NSLog(@"file exists!");
} 
```

myPath 将是您获取的路径的 NSString。我认为您很可能没有正确获取文件的路径。您确定图像在文档目录中吗？如果您使用的是模拟器，您始终可以使用 finder 来定位应用程序沙箱中的文件和文件夹。尝试通过转到手动查找您的图像

```
 ~/Library/Application Support/iPhone Simulator/x.x/Applications/ 
```

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T06:35:10.257

使用此代码..

```
NSArray *sysPaths = NSSearchPathForDirectoriesInDomains( NSDocumentDirectory, NSUserDomainMask, YES );

NSString *docDirectory = [sysPaths objectAtIndex:0];

NSString *imagePath=[docDirectory stringByAppendingPathComponent:@"your image-name"];

UIImageView *myimage=[UIImageView alloc] initWithFrame:CGRectMake(0,0,20,20)];
myimage.image=[UIImage imageWithData:[NSData dataWithContentsOfFile:imagePath]];    
[self.view addSubView:myimage];
[myimage release]; 
```

这可能会帮助你...

# c# - 如果数字为零，则格式化函数以显示自定义字符

> ID：11305447
> 
> 赞同：2
> 
> 时间：2012-07-03T06:18:19.140
> 
> 标签：c#, asp.net, vb.net, formatting

我正在使用 Format 函数 ( [http://msdn.microsoft.com/en-us/library/59bz1f0h%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/59bz1f0h%28v=vs.90%29.aspx) ) 来格式化我的输出。目前我使用这种格式字符串：

```
 TestStr1 = Format(5459.4, "##,##0.00")
 TestStr2 = Format(0.4, "##,##0.00")
 TestStr3 = Format(0.0, "##,##0.00") 
```

上面的代码将分别返回“5,459.40”、“0.4”和“0.00”。现在，如果该值等于 0，我想改为显示“-”。如何在不使用 if-else 语句而仅使用 Format 函数的情况下实现该输出？

**编辑：**

除了 Pranay 的文章，我在这里找到了 Microsoft 的一篇文章，它位于底部。[http://msdn.microsoft.com/en-us/library/0c899ak8.aspx](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T06:22:59.607

全文 :[要显示的格式编号](http://pranayamr.blogspot.com/2012/06/format-number-to-display.html)

利用

**“;” 部分分隔符**

这允许根据数字符号显示数字。正如您在下面的代码中看到的那样，fmt 变量是我将在我的号码之前应用的格式；用于正数，第二种格式用于负数，最后一种格式用于零值。基本上它的“正；负；零”格式。您可以在此代码的输出中看到它的作用。

**例子 ：**

```
double posValue = 1234;
double negValue = -1234; 
double zeroValue = 0;

string fmt = "+##;-##;**Zero**";

Console.WriteLine("value is positive : " + posValue.ToString(fmt));    
Console.WriteLine();

Console.WriteLine("value is negative : " +negValue.ToString(fmt));    
Console.WriteLine();

Console.WriteLine("value is Zero : " + zeroValue.ToString(fmt));
Console.WriteLine(); 
```

**笔记：**

在上面的示例中，您只需用“-”或您想要的字符替换**零。**

尽管代码在 c#.net 中，但在其**ToString**函数格式发生变化后，您可以在 vb.net 中实现它。

# iphone - 关于 dispatch_queue_t 和 dispatch_sync 的调用

> ID：11305450
> 
> 赞同：0
> 
> 时间：2012-07-03T06:18:29.980
> 
> 标签：iphone, ios, grand-central-dispatch

为什么`if (dispatch_get_current_queue() == socketQueue)`需要代码？为什么不能`dispatch_sync(socketQueue, block)`直接使用？？？

提前致谢！

```
- (BOOL)isConnected
{
__block BOOL result = NO;

dispatch_block_t block = ^{
    result = (flags & kConnected) ? YES : NO;
};

if (dispatch_get_current_queue() == socketQueue)
    block();
else
    dispatch_sync(socketQueue, block);

return result;
} 
```

顺便说一句，代码来自[XMPPFramework](https://github.com/robbiehanson/XMPPFramework/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T06:28:33.870

您不能调用`dispatch_sync`以调度当前串行队列上的块，因为这会死锁。Dispatch_sync 一直等到块完成执行，但在当前块完成运行之前它永远不会开始运行。

# c# - Linq 中的“无效演员表”

> ID：11305452
> 
> 赞同：2
> 
> 时间：2012-07-03T06:18:31.087
> 
> 标签：c#, asp.net, linq

我正在尝试使用以下代码过滤数据表

```
private void Filter(string text)
    {
        int outText=0;
        if (Int32.TryParse(text, out outText))
        {
            text = string.Empty;
        }
     DataTable DT = new DataTable();
            DT = PinCDAO.GetArea().AsEnumerable().Where(r => r.Field<int>("AreaID")==Convert.ToInt32(outText) || (r.Field<string>("AreaDescription").Contains(text))).AsDataView().ToTable();

} 
```

我收到错误“指定的演员表无效”。因为代码

```
r => r.Field<int>("AreaID")==Convert.ToInt32(outText) 
```

我确定 AreaID 列包含整数

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T06:26:48.417

Try out code - **Handle null in you code**

because "**AreaID**" is nullable field.

```
DT = PinCDAO.GetArea().AsEnumerable().Where(r => 
   (Convert.IsDBNull(r["AreaID"]) ? 0 :  Convert.ToInt32(r["AreaID"])) ==outText
  || (r.Field<string>("AreaDescription").Contains(text))).AsDataView().ToTable(); 
```

this code handles null value easily..

already answered question by me : ["Specified cast is not valid" error in LINQ's orderby clause](https://stackoverflow.com/questions/10885837/specified-cast-is-not-valid-error-in-linqs-orderby-clause)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T06:25:30.923

You don't need conversion to `int` as `outText` already declared to `int`....You can simply use the `outText` in following way:

```
r => r.Field<int>("AreaID")==outText 
```

You can change the expresson in following way:

```
 r => Convert.ToInt32(r["AreaID"])==outText 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T06:25:51.887

Variables passed as an out arguments need not be initialized prior to being passed. Moreover, outtext need not to be convert to Int32 as it is one already.

```
private void Filter(string text)     {      
   int outText;         
          if (Int32.TryParse(text, out outText))        
                  { 
                    // text was integer and parsed successfully.            
                    text = string.Empty;       
                   }     
 DataTable DT = new DataTable();  
           DT = PinCDAO.GetArea().AsEnumerable().Where(r => r.Field<int>("AreaID")== outText || (r.Field<string>("AreaDescription").Contains(text))).AsDataView().ToTable();  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T06:22:32.670

删除 Convert.ToInt32，outText 已经被解析为 int 使用 `if (Int32.TryParse(text, out outText))`

```
DT = PinCDAO.GetArea().AsEnumerable()
          .Where(r => r.Field<int>("AreaID")==outText 
                           || (r.Field<string>("AreaDescription")
           .Contains(text))).AsDataView().ToTable(); 
```

您收到异常的原因可能是“AreaID”可能不包含 int 值

# python - django中用于url的正则表达式

> ID：11305470
> 
> 赞同：0
> 
> 时间：2012-07-03T06:19:59.817
> 
> 标签：python, regex, django, url

我想做的是如下

我有这样的网址，`/blog/1/sdc/?c=119`或者`/forum/83/ksnd/?c=100`我想要做的是将这些重定向到一个视图，以便我可以将网址更改为`/blog/1/sdc/#c119`

一种方法是在每个应用程序的视图中进行配置，其中可能会生成这样的 url，但这是不可扩展的。我想要做的是捕获`?c=<some_digit>`最后的任何 url 并重定向到我的自定义视图。

谁能帮忙，我不擅长正则表达式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T06:23:46.087

您不能在 urlconf 中执行此操作，它与查询字符串中的任何内容都不匹配。您需要做的是按照以下方式编写一个中间件：

```
class RedirectMiddleware:
    def process_request(self, request):
        if 'c' in request.GET:
            # return a HttpResponseRedirect here 
```

有关更多详细信息，请参阅[https://docs.djangoproject.com/en/dev/topics/http/middleware/](https://docs.djangoproject.com/en/dev/topics/http/middleware/)。

# swt - 比 JFace DataBinding 更简单的 SWT/JFace 验证框架

> ID：11305471
> 
> 赞同：1
> 
> 时间：2012-07-03T06:20:01.820
> 
> 标签：swt, validation, jface

是否有比 JFace DataBinding 更易于使用的 SWT 和 JFace 验证框架？我想简单地将验证器附加到控件，并说明应该调用哪些事件。

# javascript - IE 8在没有jQuery的情况下按下tab键后聚焦一个div

> ID：11305472
> 
> 赞同：2
> 
> 时间：2012-07-03T06:20:11.937
> 
> 标签：javascript, internet-explorer, html, focus

我们有一个简单的数据网格，我们通过 tab 键启用导航。（我们移动到下一个单元格） 在 IE 7 和 8 中，当我们点击 tab 键时，它会导致焦点从网格移到下一个元素。

在其他浏览器中，我们通过在包含我们网格的 div 上调用 focus() 来防止焦点移动到页面上的下一个元素。在 IE 中这是行不通的，不管怎样，焦点都会转移。

我们可以做什么（不使用 jQuery）来保持对网格的关注，这样我们就可以反复点击 tab 键并在网格中的单元格中移动？

按下回车键时也存在同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T06:43:08.883

在您的事件处理程序（onkeydown、keypress 等）中，当您完成处理 tab 键时，使用此代码:)

```
return false; 
```

这可以防止发生默认行为，并且应该停止导航继续进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:56:45.413

另一种方法是按照您希望它们访问的顺序对元素使用[tabindex属性。](http://dev.w3.org/html5/spec-author-view/editing.html#sequential-focus-navigation-and-the-tabindex-attribute)不需要脚本。

然而，较旧的浏览器可能不支持 HTML5 版本，但很可能这些浏览器也不支持*关注*相同的元素。

# postgresql - 在 postgresql 中查找现有函数的脚本的命令是什么？

> ID：11305474
> 
> 赞同：5
> 
> 时间：2012-07-03T06:20:38.163
> 
> 标签：postgresql

由于我们使用 sp_helptext [procedure name] 在 Sqlserver 中获取 SP 脚本，因此我需要可以用来从 postgresql 检索函数脚本的命令。

请帮忙....

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T07:21:08.907

如果您使用的是 psql （命令行界面），则可以`\df+`按照 tobixen 已经说明的方式使用（并且在手册中有明确记录）。

如果您需要在 SQL 查询中执行此操作，请查看[系统信息功能](http://www.postgresql.org/docs/current/static/functions-info.html#FUNCTIONS-INFO-CATALOG-TABLE)。你正在寻找`pg_get_functiondef()`

```
select pg_get_functiondef(oid)
from pg_proc
where proname = 'your_function'; 
```

如果您正在处理具有不同数量参数的重载函数，则需要在名称中包含参数签名：

```
select pg_get_functiondef('public.foo(int)'::regprocedure);
select pg_get_functiondef('public.foo(int,int)'::regprocedure); 
```

将检索函数的重载版本`foo`（一个版本具有单个 int 参数，另一个版本具有两个 int 参数）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T07:14:00.520

在 psql 命令行中是`\df+ foo`，不是吗？

最终，`select prosrc from pg_proc where proname='foo';`

# c# - 加载应用程序选项的建议

> ID：11305477
> 
> 赞同：0
> 
> 时间：2012-07-03T06:20:57.197
> 
> 标签：c#, .net, configuration, persistence

我想创建一个 WinForms 应用程序。该应用程序将有许多可配置的选项，这些选项将保存在数据库中，因此它们可以在执行过程中保持不变（例如打印设置、设计选项等）。

你会推荐什么方法来加载这些选项，以避免频繁访问数据库？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:33:27.713

有一些问题，保存在数据库中的设置将被所有用户共享。在这种情况下，您已经考虑为每个用户设置设置。更好的选择是保存在可以加密和使用的本地配置文件中。如果需要在用户之间共享任何内容，则可以将 db 用于该特定选项。您可以在应用程序加载之前加载这些选项并通过对象访问它。

您可以通过向用户显示进度来在 SPlash 屏幕中执行这些数据库获取操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:35:34.500

如果安全性不重要，您还可以将设置保存在表单读取的 xml 文件中。您可以拥有一个加载所需属性的类。

[http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)

```
[Serializable()]
public class Defaults
{
    public string Description { get; set; }
    public double Tolerance { get; set; }
    public string Units { get; set; }
 }

internal class FormDefaults
{
public void LoadSettings()
    {
      string kfileString = @"C:\Default_Settings.xml";

      var q = from el in XElement.Load(kfileString).Elements()
                select new FormDefault()
                {
                    Description = el.Element("InstrumentDescription").Value,
                    Tolerance = Double.Parse(el.Element("InstrumentMassTolerance").Value),
                    Units = el.Element("InstrumentMassUnits").Value,

                };
        }
    }
} 
```

这很粗糙，但我有类似的东西效果很好，而且很容易设置。

干杯

# c - Reading files with DOS line endings using fgets() on linux

> ID：11305479
> 
> 赞同：2
> 
> 时间：2012-07-03T06:21:11.330
> 
> 标签：c, linux, file-io

I have a file with DOS line endings that I receive at run-time, so I cannot convert the line endings to UNIX-style offline. Also, my app runs on both Windows and Linux. My app does an `fgets()` on the file and tries to read in line-by-line.

Would the number of bytes read per line on Linux also account for 2 trailing characters `(\r \n)` or would it contain only *(\n)* and the *\r* would be discarded by the underlying system?

**EDIT:**

Ok, so the line endings are preserved while reading a file on Linux, but I have run into another issue. On Windows, opening the file in "r" or "rb" is behaving differently. Does windows treat these two modes distinctly, unlike Linux?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T08:43:54.047

`fgets()` keeps line endings.

[http://msdn.microsoft.com/en-us/library/c37dh6kf(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/c37dh6kf(v=vs.80).aspx)

`fgets()` itself doesn't have any special options for converting line endings, but on Windows, you can choose to either open a file in "binary" mode, or in "text" mode. In text mode Windows converts the CR/LF sequence (C string: "\r\n") into just a newline (C string: "\n"). It's a feature so that you can write the same code for Windows and Linux and it will work (you don't need "\r\n" on Windows and just "\n" on Linux).

[http://msdn.microsoft.com/en-US/library/yeby3zcb(v=vs.80](http://msdn.microsoft.com/en-US/library/yeby3zcb(v=vs.80))

Note that the Windows call to `fopen()` takes the same arguments as the call to `fopen()` in Linux. The "binary" mode needs a non-standard character (`'b'`) in the file mode, but the "text" mode is the default. So I suggest you just use the same code lines for Windows and Linux; the Windows version of `fopen()` is designed for that.

The Linux version of the C library doesn't have any tricky features. If the text file has CR/LF line endings, then that is what you get when you read it. Linux `fopen()` will accept a `'b'` in the options, but ignores it!

[http://linux.die.net/man/3/fopen](http://linux.die.net/man/3/fopen)

[http://linux.die.net/man/3/fgets](http://linux.die.net/man/3/fgets)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T06:30:16.553

On Unix, the lines would be read to the newline `\n` and would include the carriage return `\r`. You would need to trim both off the end.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T06:59:50.053

Although the other answers gave satisfying information regarind the question what kind of line ending would be returned for a `DOS` file read under `UNIX`, I'd like to mentioned an alternative way to chop off such line endings.

The significant difference is, that the following approach is multi-byte-character save, as it does not involve any characters directly:

```
if (pszLine && (2 <= strlen(pszLine)))
{ 
  size_t size = strcspn(pszLine, "\r\n"); 
  pszLine[size] = 0; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T06:34:45.470

You'll get what's actually in the file, including the `\r` characters. In unix there aren't text files and binary files, there are just files, and stdio doesn't do conversions. After reading a line into a buffer with fgets, you can do:

```
char *p = strrchr(buffer, '\r');
if(p && p[1]=='\n' && p[2]=='\0') {
    p[0] = '\n';
    p[1] = '\0';
} 
```

That will change a terminating `\r\n\0` into `\n\0`. Or you could just do `p[0]='\0'` if you don't want to keep the `\n`.

Note the use of strrchr, not strchr. There's nothing that prevents multiple `\r`s from being present in the middle of a line, and you probably don't want to truncate the line at the *first* one.

Answer to the **EDIT** section of the question: yes, the "b" in "rb" is a no-op in unix.

# sql - SQL中的动态排序列

> ID：11305485
> 
> 赞同：0
> 
> 时间：2012-07-03T06:21:50.737
> 
> 标签：sql, sql-server, tsql

我有一个具有以下架构的 SQL Server 2008 R2 表

```
DECLARE @AttributeTable TABLE
(
     Code1 nvarchar(50),
     Value1 nvarchar(50),
     Code2 nvarchar(50),
     Value2 nvarchar(50),
     Stock int
); 
```

具有以下值：

```
Color, Red, Size, Large, 15
Color, Blue, Size Large, 5
Size, Large, Color, Green, 4 
```

我正在寻找一种方法来重新排序每一行的列（动态地，而不是在表本身中），以便查询的结果是

```
Color, Red, Size, Large, 15
Color, Blue, Size Large, 5
Color, Green, Size, Large, 4 
```

但是我想不出任何方法来做到这一点而不求助于创建一个 .NET 函数，这似乎有点矫枉过正。

我承认这是一个失败的架构，但该架构属于我无法更改的第 3 方 ERP。

最后，如果有人对这个问题的标题有一个好主意，请随时编辑（或评论，我会改变它）

**编辑：**

这个示例所基于的真实表有 6 个不同的键值对而不是两个，并且“代码”值是动态的（当前数据库有大约 45 个不同的代码值）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T06:27:49.160

如果表格像您显示的那样简单，则相对简单：

```
SELECT
    'Color',
    CASE WHEN Code1 = 'Color' THEN Value1 ELSE Value2 END,
    'Size',
    CASE WHEN Code1 = 'Size' THEN Value1 ELSE Value2 END,
    Stock
FROM
    @AttributeTable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T04:42:08.380

*   如果您赞成这个答案，请赞成 PaulBailey 的回答，因为他的回答使我的回答成为可能 *

这会处理 3 个通用代码/值对并正确地重新排序输出。显然它并不完美，但它解决了我的需求。

第一个查询查找代码值并将它们按表中第一项的顺序放置。将其扩展为函数或存储过程并按顺序传递并不难。

第二个查询使用 PaulBailey 的解决方案来正确排序对。

```
 DECLARE @ItemCode nvarchar(50) = 'ITEM-000001'
       DECLARE @Code1 nvarchar(50)
       DECLARE @Code2 nvarchar(50)
       DECLARE @Code3 nvarchar(50)

        SELECT TOP 1
               @Code1 = ii.AttributeCode1
             , @Code2 = ii.AttributeCode2
             , @Code3 = ii.AttributeCode3
          FROM @AttributeTable ii
         WHERE ii.ItemCode = @ItemCode

        SELECT ii.ItemCode
             , @Code1 as [AttributeCode1]
             , CASE WHEN ii.AttributeCode1 = @Code1 THEN ii.Attribute1 
                    WHEN ii.AttributeCode2 = @Code1 THEN ii.Attribute2 
                    WHEN ii.AttributeCode3 = @Code1 THEN ii.Attribute3
                    ELSE null END as [Attribute1]
             , @Code2 as [AttributeCode2]
             , CASE WHEN ii.AttributeCode1 = @Code2 THEN ii.Attribute1 
                    WHEN ii.AttributeCode2 = @Code2 THEN ii.Attribute2 
                    WHEN ii.AttributeCode3 = @Code2 THEN ii.Attribute3
                    ELSE null END as [Attribute2]
             , @Code3 as [AttributeCode3]
             , CASE WHEN ii.AttributeCode1 = @Code3 THEN ii.Attribute1 
                    WHEN ii.AttributeCode2 = @Code3 THEN ii.Attribute2 
                    WHEN ii.AttributeCode3 = @Code3 THEN ii.Attribute3
                    ELSE null END as [Attribute3]
          FROM @AttributeTable ii
         WHERE ii.ItemCode = @ItemCode
      ORDER BY [AttributeCode1], [Attribute1]
             , [AttributeCode2], [Attribute2]
             , [AttributeCode3], [Attribute3] 
```

# php - 直接发布/草稿帖子的 Wordpress 前端表单

> ID：11305486
> 
> 赞同：0
> 
> 时间：2012-07-03T06:21:51.970
> 
> 标签：php, forms, wordpress, frontend

我有一个 Wordpress 前端表单，可以直接从我的主题发布/草稿帖子：-

```
<?php
if( 'POST' == $_SERVER['REQUEST_METHOD'] && !empty( $_POST['action'] ) &&  $_POST['action'] == "new_post") {

    // Do some minor form validation to make sure there is content
    $title = $_POST["title"];
    if(!empty($_POST['middle'])) {
    $description = 'a sentence ' . $_POST['middle'] . ' with something in the MIDDLE. a sentence ' . $_POST['end'] . ' with something in the END.';
    }
    $tags = $_POST["tags"];
    $post_cat = $_POST['cat'];

    // ADD THE FORM INPUT TO $new_post ARRAY
    $new_post = array(
    'post_title'    =>  $title,
    'post_content'  =>  $description,
    'post_category' =>  $post_cat,  // Usable for custom taxonomies too
    'tags_input'    =>  $tags,
    'post_status'   =>  'draft',           // Choose: publish, preview, future, draft, etc.
    'post_type' =>  'post',  //'post',page' or use a custom post type if you want to
    );

    //SAVE THE POST
    $pid = wp_insert_post($new_post);

    //REDIRECT TO THE NEW POST ON SAVE
    $link = get_permalink( $pid );
    wp_redirect( '/post-submitted-draft' );

} // END THE IF STATEMENT THAT STARTED THE WHOLE FORM

//POST THE POST YO
do_action('wp_insert_post', 'wp_insert_post');

?> 
```

我有一个简单的 php 表单，它具有以下功能：-

```
<?php
if(!empty($_POST['middle'])) {
   echo "a sentence".$_POST['middle']." with something in the MIDDLE.";
}

if(!empty($_POST['end'])) {
   echo "a sentence".$_POST['end']." with something in the END.";
}
?> 
```

我想将它包含在表单中，我使用以下方法完成了它： -

```
if(!empty($_POST['middle'])) {
$description = 'a sentence ' . $_POST['middle'] . ' with something in the MIDDLE. a sentence ' . $_POST['end'] . ' with something in the END.'; 
```

但是如果'middle'的字段为空，它将忽略$description的整个值，如果'middle'的字段为空，我希望它只忽略第一句并显示具有字段'end的第二句' IE

```
'a sentence ' . $_POST['end'] . ' with something in the END.'; 
```

如何让它像这样工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:02:29.893

改变 ：

```
if(!empty($_POST['middle'])) {
$description = 'a sentence ' . $_POST['middle'] . ' with something in the MIDDLE. a sentence ' . $_POST['end'] . ' with something in the END.'; 
```

到 ：

```
$description = (!empty($_POST['middle']))? 'a sentence ' . $_POST['middle'] . ' with something in the MIDDLE.': '' ;
$description .= (!empty($_POST['end']))? 'a sentence ' . $_POST['end'] . ' with something in the END.': '' ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:03:07.333

遵循下面这样的方法将使整个事情变得更好，更有意义。基本上，将描述变量设置为第一句并添加第二位（如果存在）。

```
if(!empty($_POST['middle'])) {
   $description = "a sentence".$_POST['middle']." with something in the MIDDLE.";
}

if(!empty($_POST['end'])) {
   $description .= "a sentence".$_POST['end']." with something in the END.";
}

if(isset($description)) {
// do something with description
} 
```

另外，请考虑根据您的用途转义字符串。

# jsp - 使用 sendRedirect() 时的 Servlet.service() 异常

> ID：11305492
> 
> 赞同：0
> 
> 时间：2012-07-03T06:22:12.420
> 
> 标签：jsp, struts2

增加响应缓冲区后收到以下错误：

```
SEVERE: Servlet.service() for servlet jsp threw exception java.lang.NullPointerException
    at org.apache.jsp.redirects.redirects_005flist_jsp._jspService(redirects_005flist_jsp.java:325)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:393)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:104)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:261)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:581)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
    at java.lang.Thread.run(Unknown Source) 
```

我在 JSP 中添加以下行：

```
Welcome <%=userSession.getFirstName() %>! 
```

由于用户会话为空，它应该重定向到登录页面，但它不是，当它到达上面的行时，它会抛出异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T17:28:53.240

基本上你应该在每次使用时更换

```
resposnse.redirect("abc.jsp"); 
```

和

```
RequestDispatcher rd = request.getRequestDispatcher("abc.jsp");
        rd.forward(request, response); 
```

从您第一次在项目或会话中使用它开始

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:43:25.167

我认为响应是在`sendRedirect()`发生之前做出的。

响应提交可能由于原因[导致响应提交](https://stackoverflow.com/questions/11305563/cause-of-servlets-response-already-committed/11305612#11305612)

# c++ - 是否有 std 或 boost 容器可以避免其 insert 和 find 方法之间的竞争条件？

> ID：11305507
> 
> 赞同：2
> 
> 时间：2012-07-03T06:23:15.197
> 
> 标签：c++, thread-safety, containers

每个线程可以使用“插入”函数将对象插入容器（最多一次）。此后，线程可能会尝试使用“get”函数访问该对象。因此，当被同一线程使用时，'insert' 和 'get' 之间没有竞争。但是，当另一个线程调用“get”时，另一个线程可能会尝试插入自己的对象

我需要一个容器，这种情况不需要任何同步方法。

执行之间的线程数可能会有很大差异。

```
class Object;
class Container<Object>;

Container<Object> g_container;

void insert(int threadId)
{
    ScopedLock<Mutex> lock(insertMutex);
    Object obj;
    g_container[threadId] = obj;
}

Object get(int threadId)
{
    return g_container[threadId];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:58:56.547

您可以使用容器指针向量。每个线程管理自己的容器实例，并将其注册到容器指针数组中。

```
template <typename T>
struct Container {
    Mutex insertMutex;
    ContainerType<T> container;
    int index;
    void insert (T &obj) {
        ScopedLock<Mutex> lock(insertMutex);
        container.insert(obj);
    }
    T get () {
        return *container.begin();
    }
    void register_container () {
        if (index != 0) return;
        if (counter == MAX_THREADS) throw 0;
        index = ++counter;
        ScopedLock<Mutex> lock(registerMutex);
        containers.push_back(this);
    }
    static std::vector<Container *> containers;
    static Atomic<int> counter;
    static Mutex registerMutex;
};

template <typename T>
std::vector<Container<T> *> Container<T>::containers;

template <typename T>
Atomic<int> Container<T>::counter;

template <typename T>
Mutex Container<T>::registerMutex; 
```

现在，您可以遍历`Container<T>::containers`以访问所有容器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T07:21:40.277

您正在寻找的东西通常称为“无锁数据结构”。

我理解你为什么认为你需要一个无锁容器，但我几乎可以向你保证你不需要。他们通常比他们的价值更麻烦。您应该只有一个互斥锁来管理对普通容器的所有访问。锁定要插入容器的互斥锁。锁定互斥体以从容器中删除。并在读取（或迭代）容器之前锁定互斥锁。

以下是 C++ 标准委员会主席 Herb Sutter 的一些有益讨论：

[http://www.drdobbs.com/cpp/lock-free-code-a-false-sense-of-security/210600279](http://www.drdobbs.com/cpp/lock-free-code-a-false-sense-of-security/210600279)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T07:46:25.183

+1 詹姆斯布洛克。

但这听起来更像是您希望每个线程都有一个容器，但是是互斥的，并且锁定/解锁互斥锁很便宜，因为 99.9% 的时间操作第一次成功。但是“主”线程确实有能力在检查其他线程时偶尔暂停它们。

如果每个线程只有一个对象，容器就会消失。只需锁定对象。不要担心锁定的成本，除非它是一个经过验证的性能问题。在这种情况下，问题不在于移除锁，而仅仅是减少它们的使用频率。所以保持对象锁定，每百次左右才解锁一次。必要时结合条件变量。

# html - 如何在迭代中动态设置元素样式？

> ID：11305508
> 
> 赞同：0
> 
> 时间：2012-07-03T06:23:15.903
> 
> 标签：html, css, iteration

如何在迭代中动态设置元素样式

在 test.phtml 页面中

```
<?php foreach($tests => $test) { ?>
    <li class="<?php echo $test['class'] ?>">
    <a href="#" title="">
        Test Instance
    </a>
    <style type="text/css">
        li.<?php echo $test['class'] ?> a:hover {
        color: <?php echo $test['color'] ?>;
        background-color: <?php echo $test['bgColor'] ?>;
        }
    </style>
    </li>
<?php } ?> 
```

样式标签出现在页面中。

```
<li class="third-item">
    <a href="#" title="">
        Test Instance
    </a>
    <style type="text/css">
        li.third-item a:hover {
        color: #498995;
        background-color: #dbe7ea;
        }
    </style>
</li> 
```

但是，这些样式在网页中不起作用。

请帮我解决这个问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:32:35.900

您应该在 htmldocument 的 head-section 中定义内部样式。访问[http://www.w3schools.com/css/css_howto.asp](http://www.w3schools.com/css/css_howto.asp)。
您可以使用循环为头部和后面的标记定义变量，并在正确的位置回显它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:40:26.543

您可以像这样使用内联样式标签。

```
<li style="color:<?php echo $test['color']; ?>;background-color: <?php echo $test['bgColor'] ?>;"><a>Test</a></li> 
```

我已经修改了你的代码检查它。

```
 <?php foreach($tests => $test) { ?>
 <style type="text/css">
            li.<?php echo $test['class'] ?> a:hover {
            color: <?php echo $test['color'] ?>;
            background-color: <?php echo $test['bgColor'] ?>;
            }
        </style>
        <li class="<?php echo $test['class'] ?>">
        <a href="#" title="">
            Test Instance
        </a>
        </li>
    <?php } ?> 
```

# java - 变量Java中的引用（地址）存储

> ID：11305509
> 
> 赞同：0
> 
> 时间：2012-07-03T06:23:37.867
> 
> 标签：java, eclipse, object

如何将一个对象或变量的地址存储在 Java 中的另一个对象中。就像我们在 C++ 中所做的那样

int a=&b; // b 也是 int

如果我想在 Java 中通过引用将引用类型对象传递给任何方法，我该怎么做，因为默认情况下它们是按值传递的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T06:25:30.103

You can't, basically. *Everything* is passed by value in Java, and there's no way of changing that.

The closest you can come is to create your own generic mutable wrapper type, or use an array of length 1\. The wrapper approach makes it much clearer what you're doing, but it's less efficient. You can use [`AtomicReference<V>`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicReference.html) as a wrapper type if you want, although its use *implies* that you're concerned about concurrency when you probably aren't.

For wrappers of primitive types, you could either use the `Integer`, `Long` etc classes, or you could write an individual specific wrapper type for each primitive. (Again, the latter would be slightly more efficient.)

Fundamentally though, you should *try* to design your code not to need this. I *very* rarely find it a useful technique. If you find yourself wanting to do it very often, you may be "thinking" in a different language...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:27:38.293

You can not use addresses in Java. There is simply no such ability. All things are passed by value. When you want to pass an object to be mutated you have several ways:

a) Pass an array:

```
int [] valueArray = new int[1];
valueArray[0] = <your value>; 
```

b) Pass a mutable wrapper, which you shoud write by your self.

c) Pass an input int and retur a new value:

```
int a = 5;
a = sqr(a); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T06:54:17.800

从 C++ 到 java 是有区别的。尽管在 java 中使用 Object 的地址不是一个好习惯，但有一些方法可以获取逻辑地址。

[http://javapapers.com/core-java/address-of-a-java-object/](http://javapapers.com/core-java/address-of-a-java-object/)

我希望这能帮到您。

# opencv - 在 opencv 中使用 cvCountNonZero 时出错

> ID：11305512
> 
> 赞同：2
> 
> 时间：2012-07-03T06:23:51.547
> 
> 标签：opencv, contour

我正在尝试使用openCV（使用C）计算从Canny边缘图像中检索到的轮廓中非零像素的数量。我正在使用 cvFindNextContour 来查找使用轮廓扫描仪检索到的后续轮廓。

但是当我在轮廓上使用 cvCountNonZero 时，会出现错误：

```
Bad flag (parameter or structure field) (Unrecognized or unsupported array type)
in function cvGetMat, C:\User\..\cvarray.cpp(2881) 
```

我的代码是：

```
cvCvtColor(image, gray, CV_BGR2GRAY);
cvCanny(gray, edge, (float)edge_thresh, (float)edge_thresh*4, 3);

sc = cvStartFindContours( edge, mem,
                          sizeof(CvContour),
                          CV_RETR_LIST,
                          CV_CHAIN_APPROX_SIMPLE,
                          cvPoint(0,0) );

while((contour = cvFindNextContour(sc))!=NULL)
{
               CvScalar color = CV_RGB( rand()&255, rand()&255, rand()&255 );
               printf("%d\n",cvCountNonZero(contour));
               cvDrawContours(final, contour, color, CV_RGB(0,0,0), -1, 1, 8, cvPoint(0,0));

} 
```

任何形式的帮助都将受到高度赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:27:36.490

cvCountNonZero(CvArr*) 用于查找数组或 IplImage 中非零的数量，但不适用于 CvSeq* 轮廓类型。这就是错误来的原因。这里是问题的解决方案。

```
 CvRect rect = cvBoundingRect( contour, 0);
        cvSetImageROI(img1,rect);
        cout<<cvCountNonZero(img1)<<endl;
        cvResetImageROI(img1);
//where img1 is the binary image in which you find the contours. 
```

代码可以用以下方式解释：

1.首先在每个轮廓周围制作一个矩形区域。

2.将图像 ROI 设置为该特定区域。

3.现在使用 cvCountNonZero(); 函数查找区域中非零的数量。

4.重置图像ROI。

祝您编码愉快。

# mysql - How to import large sql file in phpmyadmin

> ID：11305516
> 
> 赞同：96
> 
> 时间：2012-07-03T06:24:39.127
> 
> 标签：mysql, phpmyadmin

I want to import a sql file of approx 12 mb. But its causing problem while loading. Is there any way to upload it without splitting the sql file ?

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-07-03T06:48:24.133

尝试根据您的操作系统的口味从 mysql 控制台导入它。

```
mysql -u {DB-USER-NAME} -p {DB-NAME} < {db.file.sql path} 
```

或者如果它在远程服务器上，请使用 -h 标志来指定主机。

```
mysql -u {DB-USER-NAME} -h {MySQL-SERVER-HOST-NAME} -p {DB-NAME} < {db.file.sql path} 
```

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2014-07-10T00:49:05.760

你必须做的3件事：

在`php.ini`您的 php 安装中（注意：取决于您是否需要 CLI、apache 或 nginx，找到正确的 php.ini 进行操作）

```
post_max_size=500M

upload_max_filesize=500M

memory_limit=900M 
```

或设置其他值。

**如果您安装了 apache，则**重新启动/重新加载apache；如果您使用 nginx，则为 nginx 重新启动/重新加载 php-fpm。****

 ****远程服务器？**

也会增加`max_execution_time`，因为上传文件需要时间。

**NGINX 安装？**

您将必须添加：`client_max_body_size 912M;`在块`/etc/nginx/nginx.conf`中`http{...}`

* * *

## 回答 #3

> 赞同：67
> 
> 时间：2013-11-12T07:12:40.577

编辑位于 phpmyadmin 目录中的 config.inc.php 文件。就我而言，它位于`C:\wamp\apps\phpmyadmin3.2.0.1\config.inc.php`.

找到上面的行并将`$cfg['UploadDir']`其更新为`$cfg['UploadDir'] = 'upload';`

然后，在 phpmyadmin 目录中创建一个名为 'upload' 的目录（对我来说， at `C:\wamp\apps\phpmyadmin3.2.0.1\upload\`）。

然后将您尝试导入的大型 SQL 文件放入新`upload`目录中。现在，当您进入 phpmyadmin 控制台中的 db 导入页面时，您会注意到一个以前不存在的下拉菜单 - 它包含您刚刚创建的上传目录中的所有 sql 文件。您现在可以选择它并开始导入。

如果您没有在 Windows 上使用 WAMP，那么我相信您可以轻松地将其适应您的环境。

参考：[http ://daipratt.co.uk/importing-large-files-into-mysql-with-phpmyadmin/comment-page-4/](http://daipratt.co.uk/importing-large-files-into-mysql-with-phpmyadmin/comment-page-4/)

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2015-07-07T16:05:05.947

针对 LINUX 用户的解决方案（使用 sudo 运行）

创建“上传”和“保存”目录：

```
mkdir /etc/phpmyadmin/upload
mkdir /etc/phpmyadmin/save
chmod a+w /etc/phpmyadmin/upload
chmod a+w /etc/phpmyadmin/save 
```

然后编辑 phpmyadmin 的配置文件：

```
gedit /etc/phpmyadmin/config.inc.php 
```

最后为“上传”和“保存”目录添加绝对路径：

```
$cfg['UploadDir'] = '/etc/phpmyadmin/upload';
$cfg['SaveDir'] = '/etc/phpmyadmin/save'; 
```

现在，只需将文件放到`/etc/phpmyadmin/upload`文件夹中，然后您就可以从 phpmyadmin 中选择它们。

[![在此处输入图像描述](../Images/36ef49296f41211cccd9c3e6738f6b93.png)](https://i.stack.imgur.com/DCvjq.png)

希望这有帮助。

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2014-03-10T07:15:45.703

只需一行就完成了（确保 mysql 命令可作为全局命令使用，或者只需转到 mysql 安装文件夹并进入 bin 文件夹）

```
mysql -u database_user_name -p -D database_name < complete_file_path_with_file_name_and_extension 
```

这里

*   `u`代表用户
*   `p`代表密码
*   `D`代表数据库

---不要忘记在`<`数据库名称后添加符号---

带有名称和扩展名的完整文件路径可以是

`c:\folder_name\"folder name"\sql_file.sql`

---如果您的文件夹和文件名包含空格而不是使用双引号将它们绑定---

提示和注意：您可以在之后写入密码，`-p`但不建议这样做，因为它会显示给当时正在观看您屏幕的其他人，如果您不在那里写入，它会询问您何时按回车执行命令。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2017-01-15T05:43:13.343

创建一个 zip 或 tar 文件并在 phpmyadmin 中上传就是这样..！

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2014-08-07T09:44:12.880

`.sql`通过在文件中具有以下配置，我能够导入一个大`httpd.conf`文件：

```
Alias /phpmyadmin "C:/xampp/phpMyAdmin/"
<Directory "C:/xampp/phpMyAdmin">
    AllowOverride AuthConfig
    Require all granted

    php_admin_value upload_max_filesize 128M
    php_admin_value post_max_size 128M
    php_admin_value max_execution_time 360
    php_admin_value max_input_time 360
</Directory> 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2012-07-03T06:40:02.750

您必须编辑 php.ini 文件。更改以下内容`upload_max_filesize` `post_max_size`以适应您的文件大小。

尝试运行`phpinfo()`以查看其当前值。如果您不能随意更改 php.ini 文件，请直接尝试 [ini_set()](http://php.net/manual/en/function.ini-set.php)

如果这也不是一个选项，您可能想尝试一下[bigdump](http://www.ozerov.de/bigdump/)。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2018-03-27T18:24:13.587

好的，您使用 PHPMyAdmin，但有时最好的方法是通过终端：

*   连接到数据库：（`mysql -h localhost -u root -p`为用户和数据库位置切换 root 和 localhost）
*   从转储开始导入：`\. /path/to/your/file.sql`
*   去喝杯咖啡，吹嘘自己，因为你使用终端。

就是这样。请记住，如果您在远程服务器中，则必须将 .sql 文件上传到某个文件夹。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2016-11-04T12:18:57.017

[我不明白为什么没有人提到最简单的方法....只需使用http://www.rusiczki.net/2007/01/24/sql-dump-file-splitter/](http://www.rusiczki.net/2007/01/24/sql-dump-file-splitter/)拆分大文件， 然后执行 vie mySQL admin从具有结构的文件开始的单独生成的文件

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2016-03-08T11:47:54.667

为此，您必须编辑`php.ini`文件，如果您使用的是 ubuntu 服务器，这是链接[Upload large file in phpMyAdmin](http://www.technologiespost.com/2013/04/how-to-increase-phpmyadmin-upload-limit_8.html)可能会对您有所帮助。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2020-09-19T10:39:58.380

PHPmyadmin 也接受 gzip 格式的压缩文件，因此您可以 gzip 文件（如果没有，请使用[7Zip ）并上传压缩文件。](https://www.7-zip.org/download.html)由于它是一个文本文件，它将具有良好的压缩比。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2015-06-19T16:59:29.917

我偶然发现了一篇文章，这对我来说效果最好

1.  使用您喜欢的代码编辑器打开 phpmyadmin 目录中的 config.inc.php 文件。在您本地的 MAMP 环境中，它应该位于此处：

硬盘 » 应用程序 » MAMP » bin » config.inc.php

2.  搜索该短语`$cfg[‘UploadDir’]`- 它看起来像这样：

`$cfg['UploadDir'] = '';`

3.  将其更改为如下所示：

`$cfg['UploadDir'] = 'upload';`

4.  然后，在该 phpmyadmin 目录中，创建一个新文件夹并将其命名为上传。

5.  获取您尝试导入的大型 .sql 文件，并将其放入新的上传文件夹中。

6.  现在，下次您将数据库导入 phpMyAdmin 时，您将在“要导入的文件”部分的标准浏览区域正下方看到一个新的下拉字段。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2019-04-23T21:33:22.817

在 MAMP 中，您可以通过以下方式加载大文件：

1.  在此目录 /MAMP/bin/phpMyAdmin/"folderName" 中创建一个新文件夹

2.  然后编辑“/MAMP/bin/phpMyAdmin/config.inc.php”第 531 行：

    ```
     $cfg['UploadDir']= 'folderName'; 
    ```

3.  将您的 .sql 或 .csv 文件复制到此文件夹中。

4.  现在您将在“PhpMyAdmin”中有另一个选项： 从 Web 服务器上传目录中选择 newFolder/：您可以选择您的文件并导入它。

    您现在可以加载任何文件！

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2018-10-24T09:46:46.757

一种解决方案是使用命令行；

`mysql -h yourhostname -u username -p databasename < yoursqlfile.sql`

只需确保明确说明要导入的**SQL文件的路径即可。**

就我而言，我使用了这个；

`mysql -h localhost -u root -p databasename < /home/ejalee/dumps/mysqlfile.sql`

瞧！你已准备好出发。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2018-01-03T02:30:54.363

共享主机的答案。最好使用这个我刚刚用来将 300mb 数据库文件导入我的服务器的小脚本。该脚本称为大转储。

[提供在资源有限的服务器上导入大型数据库的脚本](http://www.ozerov.de/bigdump/)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2015-06-23T06:11:21.513

上传大文件的最佳方法不使用 phpmyadmin 。导致 phpmyadin 首先使用 php 上传类上传文件，然后执行导致其超时的大部分时间发生的 sql。

最好的方法是：进入 wamp 文件夹>bin>mysql>bin 目录然后写下这一行

**mysql -u root -p listnames < latestdb.sql** 这里 listnames 是数据库名称，首先请创建空数据库， latestdb.sql 是您的数据所在的 sql 文件名。

但一件重要的事情是您的数据库文件是否有 unicode 数据。您必须在任何一行之前打开您的 latestdb.sql 文件和一行。该行是：

**设置名称 utf8;** 然后你的命令模式运行这个脚本代码

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2020-07-04T12:32:56.133

我制作了一个 PHP 脚本，旨在导入由 phpmyadmin 生成的大型数据库转储。它叫做 PETMI，你可以在这里[[project page]](https://desbest.com/projects/petmi) [[gitlab page]](http://gitlab.com/desbest/petmi)下载它。它已经用 1GB 的数据库进行了测试。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2012-07-03T06:38:25.663

更改您的服务器设置以允许大于 12 mb 的文件上传，您应该没问题。通常将服务器设置设置为 5 到 8 mb 用于文件上传。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-10-18T04:53:55.730

```
/Applications/XAMPP/xamppfiles/etc/php.ini 
```

首先找到这个位置->在记事本或崇高文本中打开php.ini文件然后在php.ini文本中找到这个“post_max_size，upload_max_filesize，memory_limit”并更改大小如下

```
post_max_size=450M

upload_max_filesize=450M

memory_limit=700M 
```

**注意：在执行此操作之前，请在 xampp 或 wamp 中停止 phpmyadmin 并执行上述方法，然后 startall（xampp 或 manager-osx）它将完美运行。然后你就可以在 phpmyadmin 中上传大文件了。谢谢**

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-11-21T12:45:07.360

首先，将您的 mysql 数据库复制到本地磁盘 C:\ 以便轻松定位文件，然后打开命令提示符。

同时，导航到 mysql bin 文件夹，例如，如果您使用的是 xampp，请运行或键入下面的代码。

cd/ 这带你到本地磁盘指针
cd xampp 这带你到 xampp 文件夹
cd mysql 这带你到 mysql 文件夹
cd bin 这带你到 bin 文件夹

并运行下面的代码

mysql -u dbusername -p -D dbname < c:\yourdbtoupload.sql

这将提示输入密码，如果您不使用密码，请输入您的密码或单击输入按钮

[![在此处输入图像描述](../Images/3ada187863ebac78411f54e8a36758df.png)](https://i.stack.imgur.com/OOVoR.png)

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2017-11-29T08:43:06.283

1.  在文本编辑器（如记事本）中打开您的 sql 文件
2.  全选 -> 复制
3.  转到 phpMyAdmin，选择您的数据库并转到 SQL 选项卡
4.  将您复制的内容粘贴到剪贴板
5.  它可能会弹出一个javascript错误，忽略它
6.  执行**

# javascript - What's a regular expression to break a query string where variables may contain '&'?

> ID：11305518
> 
> 赞同：-1
> 
> 时间：2012-07-03T06:25:15.070
> 
> 标签：javascript, regex, web

How can a JavaScript regular expression be written to separate a URI into query string variables, where the variables itself might contain the '&' character?

I'm currently using the following code- but if any of the variables contain an & embedded it won't capture the rest of that variable. How can this be alleviated?

```
function uriParameters() {
  var vars = {};
  var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
    vars[key] = value;
  });
  return vars;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T06:37:37.920

简单的问题：您对此有何期望？

```
a=b&c&d=e 
```

是吗 ？

```
a=b&c, d=e     //or 
a=b  , c , d=e 
```

**因此，如果**您没有*名称集*，则存在歧义，并且您的问题无法解决。

**更新：**如果查询字符串只包含`name=value`对，并且没有单个`name`参数，那么您可以通过以下脚本提取这些对：

```
 function getUriParameters( uri ){
     //Some sequence of chars that can't be matched in query string
     var SYN = ",,,";
     var vars = {};
     uri.split("=")
        .map(function(value){    //Replacing last '&' by SYN value
            return value.replace(/&([^&]*)$/,SYN+'$1');
        })
        .join("=")               //Restoring uri
        .split(SYN)              //
        .forEach(function(v){    //Storing 'key=value' pairs
             vars[v.split('=')[0]] = v.split('=')[1];
             //       key                 value
        });
     return vars;
 }
 //Usage-> getUriParameters("a=b&c&d=e")
 //Sample
 console.log( JSON.stringify(getUriParameters("a=b&c&d=e")) );
 //output -> {"a":"b&c","d":"e"} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T06:38:17.630

`&`是一个特殊字符，其目的是将 url 分解为多个变量。如果它是一个值，它会被编码。

另外，我会查看这个答案以获得处理参数的完整函数：[How can I get query string values in JavaScript?](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)

# rest - Jersey client doesn't follow redirects

> ID：11305520
> 
> 赞同：0
> 
> 时间：2012-07-03T06:25:17.523
> 
> 标签：rest, jersey, jax-rs

I have "users" resource defined as follows:

```
@Path("/api/users")
public class UserResource {

    @POST
    @Consumes(MediaType.APPLICATION_JSON)
    public Response addUser(User userInfo) throws Exception {
                String userId;
        User existing = ... // Look for existing user by mail
        if (existing != null) {
            userId = existing.id;
        } else {
            userId = ... // create user
        }
        // Redirect to the user page:
        URI uri = URI.create("/api/users/" + userId);
        ResponseBuilder builder = existing == null ? Response.created(uri) : Response.seeOther(uri);
        return builder.build();
    }

    @Path("{id}")
    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public User getUserById(@PathParam("id") String id) {
        return ... // Find and return the user object
    }
} 
```

Then, I'm trying to test user creation using Jersey client:

```
ClientConfig clientConfig = new DefaultClientConfig();
clientConfig.getFeatures().put(JSONConfiguration.FEATURE_POJO_MAPPING, Boolean.TRUE);
clientConfig.getFeatures().put(ClientConfig.PROPERTY_FOLLOW_REDIRECTS, Boolean.TRUE);
Client client = Client.create(clientConfig);
client.addFilter(new LoggingFilter(System.out));

User userInfo = UserInfo();
userInfo.email = "test";
userInfo.password = "test";
client.resource("http://localhost:8080/api/users")
    .accept(MediaType.APPLICATION_JSON)
    .type(MediaType.APPLICATION_JSON)
    .post(User.class, userInfo); 
```

I get the following exception:

> SEVERE: A message body reader for Java class com.colabo.model.User, and Java type class com.colabo.model.User, and MIME media type text/html; charset=iso-8859-1 was not found

And this is the trace of the HTTP request:

```
1 * Client out-bound request
1 > POST http://localhost:8080/api/users
1 > Accept: application/json
1 > Content-Type: application/json
{"id":null,"email":"test","password":"test"}
1 * Client in-bound response
1 < 201
1 < Date: Tue, 03 Jul 2012 06:12:38 GMT
1 < Content-Length: 0
1 < Location: /api/users/4ff28d5666d75365de4515af
1 < Content-Type: text/html; charset=iso-8859-1
1 < 
```

Should Jersey client follow redirect automatically in this case, and properly unmarshall and return a Json object from the second request?

Thanks, Michael

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-19T06:33:54.657

我遇到了同样的问题并通过遵循客户端过滤器解决了它

```
package YourPackageName;

import javax.ws.rs.client.ClientRequestContext;
import javax.ws.rs.client.ClientResponseContext;
import javax.ws.rs.client.ClientResponseFilter;
import javax.ws.rs.core.Response;
import java.io.IOException;
import java.io.InputStream;

public class RedirectFilterWorkAround implements ClientResponseFilter {
    @Override
    public void filter(ClientRequestContext requestContext, ClientResponseContext responseContext) throws IOException {
        if (responseContext.getStatusInfo().getFamily() != Response.Status.Family.REDIRECTION)
            return;

        Response resp = requestContext.getClient().target(responseContext.getLocation()).request().method(requestContext.getMethod());

        responseContext.setEntityStream((InputStream) resp.getEntity());
        responseContext.setStatusInfo(resp.getStatusInfo());
        responseContext.setStatus(resp.getStatus());
    }
} 
```

现在在您创建客户端的其他课程中

```
Client client = ClientBuilder.newClient(); 
```

将此过滤器类应用为

```
client.register(RedirectFilterWorkAround.class); 
```

这与 Jersey 2.x 一起工作在 SO 上找到了这些指针：p

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T13:51:59.740

跟随重定向意味着跟随[30x](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3)状态代码重定向。您所拥有的是[201](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.2)响应，这不是重定向。如果返回 201，您可以编写一个将跟随位置标头的[ClientFilter 。](https://jersey.java.net/nonav/apidocs/1.17/jersey/com/sun/jersey/api/client/filter/ClientFilter.html)

# html - 多文件选择表单域

> ID：11305521
> 
> 赞同：-1
> 
> 时间：2012-07-03T06:25:24.340
> 
> 标签：html

据我所知，纯 html 或 javascript 不允许我在一个字段中上传多个文件（图像）（如果我错了，请纠正我）。

这在 html5 或除 flash 之外的任何其他方式中是否可行？

我想让我的用户能够一次选择最多 5 张图片并将它们全部上传。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T06:28:17.523

使用[`multiple`](http://www.w3.org/TR/html5/common-input-element-attributes.html#attr-input-multiple)属性。

```
<input type="file" name="myFiles" multiple> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T06:29:15.740

这对我有用：

```
<input size="40" type="file" name="_attachments[]" multiple="multiple"/> 
```

# javascript - jQuery 三点插件但可扩展

> ID：11305528
> 
> 赞同：2
> 
> 时间：2012-07-03T06:25:49.277
> 
> 标签：javascript, jquery, summarization

是否有任何 jQuery 插件可以总结我的文字，即：

```
 123456789 
```

进入

```
 1234... 
```

但是，当我单击这三个点时，它将展开并显示：

```
 123456789 
```

没有插件 css 和 jquery 是受欢迎的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:39:09.790

有几个插件可以做到这一点，而且非常简单，您也可以创建自己的插件。

但是，从别人那里拿来工作，这里有一对：

*   [jQuery 扩展器插件](http://plugins.learningjquery.com/expander/demo/index.html)
*   [Jquery 插件：阅读更多](http://rockycode.com/blog/jquery-plugin-readmore/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T06:46:31.203

纯 CSS 解决方案：

```
.truncate {
    width: 250px; /* TODO: set as needed */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.truncate:hover {
    white-space: normal;
    overflow: visible;
    text-overflow: inherit;
} 
```

您还可以通过以下方式安装一些可以通过点击执行的操作：

```
$(".truncate").click(function () { $(this).addClass("noTruncate"); } 
```

然后更改`.truncate:hover`为`.noTruncate`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T20:34:32.710

这是一种非破坏性的、jQuery 绑定和 CSS 执行的技术。

考虑到这个 SCSS/LESS：

```
.collapsable {
  margin-bottom: 10px; /* your <p> margin-bottom */
  line-height: 20px; /* your <p> line-height */

  p {
    line-height: inherit;
    margin-bottom: inherit;

    &:last-child {
      margin-bottom: 0;    
    }
  }

  &.collapsed {
    position: relative;
    overflow: hidden;

    p {
      margin: 0;
    }

    .expand-link-container {
      position: absolute;
      bottom: 0; right: 0;
      display: block;

      line-height: inherit;
      padding: 0 2px 0 5px;

      background-color: #FFF;

      box-shadow: -5px 0 5px 0 white;
    }
  }

  .expand-link-container {
    display: none;
  }
} 
```

而这个jQuery：

```
function collapseHTML(shownLines, expanderLink){

  // Configuration
  var shownLines   = typeof(shownLines) === "undefined" ? 4 : shownLines,
      expanderLink = typeof(expanderLink) === "undefined" ? "[...]" : expanderLink;

  $('.collapsable').each(function(){

    // If current collapsable has already been collapsed once, skip
    if( $(this).find('.expand-link-container').length > 0 ) return false; 

    // Compute max-height from line-height and shownLines
    var lineHeight = $(this).find('p').first().css('line-height');
        maxHeight  = parseInt(lineHeight, 10) * shownLines;

    // If the current div needs collapsing
    if( $(this).height() > maxHeight) {

      $(this)
        // Collapse it
        .addClass('collapsed')
        .css('max-height', maxHeight)

        // Append expander link
        .find('p:first-child').append(
          '<div class="expand-link-container">' +
          '  <a href="#">' + expanderLink + '</a>' +
          '</div>')

        // Bind click to expander link
        .find('.expand-link-container a').click(function(e){
          e.preventDefault();
          $(this).closest('.collapsable')
            .removeClass('collapsed')
            .css('max-height', '');
        });

    }

  });

} 
```

在 javascript 中的任何地方调用`collapseHTML()`都会导致所有 div.collapse 折叠它们的 HTML 内容。

[JSfiddle](http://jsfiddle.net/rPTBY/6/)中的示例

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T06:43:25.857

您可以使用`substr`

更新小提琴 - [http://jsfiddle.net/GC2qC/1/](http://jsfiddle.net/GC2qC/1/)

```
var ttext = $('span').text(); //Store value

$('span').text($('span').text().substr(0, 4)).append('...'); //Substring

$('body').on('click', 'span', function(){ //Display complete text
    $(this).text(ttext);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T06:48:34.757

我之前使用过 Summary 插件（[http://plugins.learningjquery.com/summarize/index.html](http://plugins.learningjquery.com/summarize/index.html)）。但是我不知道它是否适用于您正在使用的 jQuery 版本。

# c# - UPDATE 语句中未使用的参数：LINQ to SQL

> ID：11305531
> 
> 赞同：1
> 
> 时间：2012-07-03T06:25:57.893
> 
> 标签：c#, .net, vb.net, linq, linq-to-sql

我有如下生成的 SQL 语句。请注意，参数@p1 和@p2 根本没有使用，也不需要。为什么会来？我们怎样才能删除它们？

注意：对于所有列，UpdateCheck 都是从不。

注意：数据库已正确更新。

问题

```
UPDATE [dbo].[BankAccount]
SET [Status] = @p3
WHERE [BankAccountID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10000]
-- @p1: Input NChar (Size = 10; Prec = 0; Scale = 0) [Fixed     ]
-- @p2: Input NChar (Size = 10; Prec = 0; Scale = 0) [Savings   ]
-- @p3: Input NChar (Size = 10; Prec = 0; Scale = 0) [FrozenFA] 
```

自动生成的类

```
[global::System.Data.Linq.Mapping.TableAttribute(Name="dbo.BankAccount")]
[InheritanceMapping(Code = "Fixed", Type = typeof(FixedBankAccount), IsDefault = true)]
[InheritanceMapping(Code = "Savings", Type = typeof(SavingsBankAccount))]
public partial class BankAccount : INotifyPropertyChanging, INotifyPropertyChanged 
```

桌子

```
CREATE TABLE [dbo].[BankAccount](
[BankAccountID] [int] NOT NULL,
[AccountType] [nchar](10) NOT NULL,
[OpenedDate] [datetime] NULL,
[Status] [nchar](10) NULL,
[AccountOwnerID] [int] NULL,
CONSTRAINT [PK_BankAccount] PRIMARY KEY CLUSTERED 
(
[BankAccountID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

代码

```
public class LijosSimpleBankRepository : ILijosBankRepository
{
    public System.Data.Linq.DataContext Context
    {
        get;
        set;
    }

    public List<DBML_Project.BankAccount> GetAllAccountsForUser(int userID)
    {
        IQueryable<DBML_Project.BankAccount> queryResultEntities = Context.GetTable<DBML_Project.BankAccount>().Where(p => p.AccountOwnerID == userID);
        return queryResultEntities.ToList();
    }

    public List<T> GetAllAccountsofType<T>() where T : DBML_Project.BankAccount
    {
        var query = from p in Context.GetTable<DBML_Project.BankAccount>().OfType<T>()
                    select p;

        List<T> typeList = query.ToList();
        return typeList;

    }

    public virtual void UpdateAccount(DBML_Project.BankAccount bankAcc)
    {
        //UPDATE statement will be called only if there has happened a change
        Context.SubmitChanges();
    }

}

namespace ApplicationService_Bank
{
public class BankAccountAppService
{
    public RepositoryLayer.ILijosBankRepository AccountRepository { get; set; }

    public void FreezeAllAccountsForUser(int userId)
    {
        IEnumerable<DBML_Project.BankAccount> accounts = AccountRepository.GetAllAccountsForUser(userId);
        foreach (DBML_Project.BankAccount acc in accounts)
        {

            string getTypeResult = Convert.ToString(acc.GetType());

            acc.Freeze();
            AccountRepository.UpdateAccount(acc);
        }

    }

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:38:28.357

所以它包括鉴别器值作为参数？大概在某些情况下，它会在与继承相关的更新中*使用*它们（也许作为并发检查的一部分，尽管看起来您已经禁用了它），并且在这种情况下忽略它们*真的很难而且不值得*在不需要它的地方，或者只是：一个错误爬进来。无论哪种方式，它都不会造成任何伤害，除了使查询稍微大一点。不足以引起注意。

# javascript - 获取保存函数实例的变量的名称，在函数内部，

> ID：11305537
> 
> 赞同：1
> 
> 时间：2012-07-03T06:26:22.450
> 
> 标签：javascript

嗯，我不知道更好的标题，
我想知道是否有办法做某事。像这样：

```
function myFunc() {
    //do some Stuff...
   this.myMethod = function(x) {
    //do some more Stuff
    var nameofthevariable = myVar//somehow get the Variables name
    myVar.somePropertie = "SomeOtherStuff";
   }
}
myVar = new myFunc();
myVar.myMethod(x) 
```

*   有没有办法从函数内部获取 Name 或 Var 本身，它拥有哪个实例？所以我可以放回数据，方法创建到变量中，而不将它作为参数传递给函数或方法=）

感谢您的任何回答

# 回答

感谢您的回答=），啊，这很可悲
问题`this`是我有一个对象，
该对象的属性创建了一个实例`myFunc`并执行`myMethod()`
它应该添加一个新的属性`myObj`，所以我的输出`myMethod`与实例分开`myFunc()`

```
function myFunc() {
    //do some Stuff...
   this.myMethod = function(x) {
    //do some more Stuff
    var nameofthevariable = myObj//somehow get the Variables name
    myObj.somePropertie = "SomeOtherStuff";
   //and here i could do
   this.Parent.somePropertie = "SomeOtherStuff";
   }
}
myObj = {}
myObj.myProp = new myFunc();
//i could do:
myObj.myProp.Parent = myObj
//
myObj.myProp.myMethod(x) 
```

但是然后我可以将`myObj`作为参数传递给`myMethod`我想去的对象我想添加的东西，两次获得变量名，

我认为，`this`在这种情况下不起作用，因为我无法访问比实例更高级别的变量`myFunction`

## 你的编辑

哦，是的，谢谢=）在真正的代码中它是一个“特权”函数，我可以调用该方法，
我将在问题中对其进行编辑，
感谢您指出这一点，我什至没有意识到在此处的问题中编写此代码时.
它工作得很好，除了我没有找到方法，动态地将数据放回持有实例的对象”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T06:31:31.963

您无法获取变量的名称，但您似乎在问如何`myMethod()`将属性添加到调用`myVar`实例`myVar`的位置 - 在这种情况下 using将起作用：`myFunc``myMethod()``this`

```
function myFunc() {
    //do some Stuff...
   this.myMethod = function(x) {
      //do some more Stuff
      this.somePropertie = "SomeOtherStuff";
   }
}
myVar = new myFunc();
myVar.myMethod(x) 
```

请注意，您定义`myMethod()`它的方式是一个只能从内部访问的私有函数- 使用您需要使其成为属性`myFunc()`的语法来调用它（所以我也改变了这一点）。`myVar.myMethod()`

函数内的值`this`取决于函数的调用方式。当您`myFunc()`使用`new`运算符调用时，JS 设置`this`为新创建的实例。`myVar.myMethod()`当您使用“点”语法调用方法时， JS 设置`this`为`myVar`.

有关`this`我建议阅读[MDN`this`文章](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this)的更多信息。

# ruby-on-rails - 资产管道无法用于生产，尝试了一切

> ID：11305538
> 
> 赞同：0
> 
> 时间：2012-07-03T06:26:23.167
> 
> 标签：ruby-on-rails, asset-pipeline

我在 heroku 上有一个 rails 3.2 应用程序。我已经尝试了我能找到的一切来尝试解决 javascripts 没有在生产模式下加载的事实。不过在开发中一切正常。此外，在部署到 heroku 时，预编译失败。但是，当我查看 prod 中的源代码时，我可以清楚地看到 javascripts 文件 (/assets/application-32fdbd115c5d59c7be2876c103063600.js) 正在加载并且有内容。

我已经尝试了所有我能想到和读过的设置。我不太确定该怎么做。这是我目前在 production.rb 中的设置：

```
config.cache_classes = true
  config.consider_all_requests_local       = false
  config.action_controller.perform_caching = true
  config.serve_static_assets = false
  config.assets.compress = false
  config.assets.compile = true
  config.assets.digest = true

  config.i18n.fallbacks = true
  config.active_support.deprecation = :notify 
```

在 environment.rb 中：

```
# Load the rails application
require File.expand_path('../application', __FILE__)

# Initialize the rails application
App::Application.initialize! 
```

应用程序.rb：

```
require File.expand_path('../boot', __FILE__)

require "rails/all"

if defined?(Bundler)
  # If you precompile assets before deploying to production, use this line
  Bundler.require(*Rails.groups(:assets => %w(development test)))
  # If you want your assets lazily compiled in production, use this line
  # Bundler.require(:default, :assets, Rails.env)
end

module App
  class Application < Rails::Application
config.encoding = "utf-8"

    # Configure sensitive parameters which will be filtered from the log file.
    config.filter_parameters += [:password]

    # Enable escaping HTML in JSON.
    config.active_support.escape_html_entities_in_json = true
config.active_record.whitelist_attributes = true

    # Enable the asset pipeline
    config.assets.enabled = true

    # Version of your assets, change this if you want to expire all your assets
    config.assets.version = '1.0' 
```

和我的宝石文件：

```
gem 'rails', '3.2.6'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'pg'
gem 'mysql2'
gem 'thin'
gem 'activerecord-postgresql-adapter'
gem 'devise'
gem 'paperclip', '~> 3.0'
gem 'haml'
gem 'activeadmin'
gem "meta_search", '>= 1.1.0.pre'
gem 'aws-sdk', '~> 1.3.4'
gem 'acts_as_list'
gem 'stripe'
gem 'sass-rails', '~> 3.2.3'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'coffee-rails', '~> 3.2.1'
  gem 'twitter-bootstrap-rails'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

group :development do
  gem 'debugger'
end 
```

我所做的一切似乎都无法让它在我的本地机器或 heroku 上的生产模式下工作。但是，它在开发中工作得很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:06:01.920

我终于想出了如何解决这个问题，虽然我不知道修复它有多好。基本上，问题在于将 .js 文件压缩到 application.js 中会导致问题。在 production.rb 我把这个：

```
 config.serve_static_assets = false

  # Compress JavaScripts and CSS
  config.assets.compress = false

  # Don't fallback to assets pipeline if a precompiled asset is missed
  config.assets.compile = true

  # Generate digests for assets URLs
  config.assets.digest = true

  config.assets.debug = true 
```

这解决了这个问题。但是，现在它列出了所有资产文件，而不是 application.js。我不确定这是否存在任何长期问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:03:45.080

在您的生产盒上，您是否尝试过：`RAILS_ENV rake assets:precompile`

# python - 从 *.sql 文件自动恢复数据库

> ID：11305539
> 
> 赞同：1
> 
> 时间：2012-07-03T06:26:47.210
> 
> 标签：python, mysql, database, repository, backup

我正在尝试编写一个 python 脚本来恢复我们的数据库。我们将所有表（单独）存储在存储库中。由于键入“source table1.sql, source table2.sql,..”会很麻烦，我编写了一个脚本来自动执行此操作。

我找到了使用 Popen 的解决方案。

`process = Popen('mysql %s -u%s -p%s' % (db, "root", ""), stdout=PIPE, stdin=PIPE, shell=True) output = process.communicate('source' + file)[0]`

该方法似乎工作得很好，但是，对于每个表，它都会提示我输入密码。如何绕过它以使其仅提示输入一次密码或让子进程从配置文件中读取密码？

有一个更好的方法吗？我尝试使用 Windows 批处理脚本来执行此操作，但正如您所料，这比使用 python 灵活得多（例如）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T19:58:34.583

由于显然您的密码为空，请删除 -p 选项， -p 没有密码会使 mysql 提示

```
from subprocess import Popen, PIPE

process = Popen('mysql %s -u%s' % (db, "root"), stdout=PIPE, stdin=PIPE, shell=True)
output = process.communicate('source' + file)[0] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T08:01:55.447

为了防止将密码暴露给有权查看正在运行的进程的任何人，最好将密码放在配置文件中，并从命令行调用：

配置文件：

```
[client]
host=host_name
user=user_name
password=your_pass 
```

然后命令行：

> mysql --defaults-extra-file=your_configfilename

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-03T07:32:08.950

好吧，你可以在从文件中读取它之后在命令行中传递它

```
with open('secret_password.txt', 'r') as f:
    password = f.read()
process = Popen('mysql %s -u%s -p%s' % (db, "root", password), stdout=PIPE, stdin=PIPE, 
```

否则，您可以调查 pexpect，它可以让您与流程进行交互。从配置文件（如 ConfigParser）中读取或简单地将其设置为 python 模块并将密码作为变量导入的其他替代方法。

# http-headers - Jmeter error 404

> ID：11305541
> 
> 赞同：3
> 
> 时间：2012-07-03T06:26:49.490
> 
> 标签：http-headers, jmeter, fiddler

I am trying to load test a webapp, which has following functonality
1\. Login in app (setting some cookie variables )
2\. Serach customer with some parameter
3\. Get detail of particular customer
4\. Logout from webapp
When i am running Jmeter i am getting status code 404 Any reference or help will be appriciated.

After googling i found 4** says you have sent bad request. To check what request has been sent i am using fiddler and capturing original request (which is working from browser ) and request sent by Jmeter , I am comparing data under *Inspector* tab in *Headers* in fiddler, Is this right way to resolve the issue of 4**. What else i can do to fix this issue ?

Screen shots attached ![Proxy Configuration](../Images/b6c64aa670c799321500221e09bcc17d.png)![SuccessfullLogin](../Images/6272cbd2cf0af2a57448184e25164c40.png)![After login faliure](../Images/86d7be6f03893a43dd13afb70346052d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-06T11:18:46.703

我认为，HTTP 标头管理器和 HTTP cookie 管理器必须在 Recording Controller 之前推送。否则，在没有这些标头或 cookie 信息的情况下发出请求。

如果你做 localhost 测试应该在 cookie 管理器配置域
localhost:8080 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T01:57:38.763

您可以在查看结果树中看到请求/响应。只需分别单击选项卡请求或响应数据。如果您收到 404，则响应数据选项卡可能会包含 404，其中包含（希望）有关无效或缺失值的信息。

# oracle - 使用 Spring jdbctemplate 调用返回游标的 oracle 函数

> ID：11305543
> 
> 赞同：3
> 
> 时间：2012-07-03T06:26:57.383
> 
> 标签：oracle, spring, cursor

嗨，我正在使用 spring jdbctemplate 来调用一个接受整数输入的 oracle 函数。

```
Oracle function is :
    FUNCTION get_key_types (type_id IN integer)
  RETURN tcur_key_types_det
IS 
  lv_cur   tcur_key_types_det;
 BEGIN
  IF type_id IS NULL
  THEN
     RAISE KEY_ERROR;
  ELSE
     OPEN lv_cur FOR
          SELECT   key_criteria_cd,
                   key_type_name,
                   KEY_COLUMN_TXT,
                   data_type_cd
            FROM   key_criteria
           WHERE   criteria_type_id = type_id
        ORDER BY   key_type_name;
  END IF;
RETURN lv_cur;
END get_key_types; 
```

我有一个从 Class StoredProcedure 扩展的 Java 类，它传递和整数参数来调用 oracle 函数，如下所示。

```
public class KeyTypeService extends StoredProcedure{
public KeyTypeService(DataSource dataSource,String sqlString) {
    setDataSource(dataSource);
    setFunction(true);
    setSql(sqlString);
    declareParameter(new SqlParameter("type_id",Types.INTEGER));
    declareParameter(new SqlOutParameter("functionName",OracleTypes.CURSOR,new KeyTypeMapper()));
    compile();
}

public Map execute(int category_id) {
    Map<String, Object> inputs = new HashMap<String, Object>();
    inputs.put("type_id", category_id);
    Map output = execute(inputs);
    return output;     
} 
```

}

我如下调用 oracle 函数。

```
int i = 60;
KeyTypeService keyTypeService = new KeyTypeService((DataSource)c.getBean   ("DataSource"),"get_key_types"); 
map = keyTypeService.execute(i); 
```

我收到以下错误，表明我没有传递预期的正确数据类型。

PLS-00306：调用“get_key_types”时参数的数量或类型错误 ORA-06550：第 1 行，第 7 列：PL/SQL：语句被忽略

任何帮助将不胜感激..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:06:16.120

由于我的评论是正确的：

out 参数必须先出现。

Spring 文档可能没有明确讨论顺序，但参数顺序必须与在没有 spring 的情况下调用 pl/sql 函数时的顺序相同。IE：

```
out = call pacakge.function(in) 
```

# java - War文件即使在爆炸版本中也会压缩资源文件

> ID：11305556
> 
> 赞同：0
> 
> 时间：2012-07-03T06:27:57.207
> 
> 标签：java, spring, war, wav, appfuse

我将我的 Spring 应用程序打包到一个 war 文件中以部署到我的 tomcat 服务器。当我将战争文件放在 tomcat6/webapps 文件夹中时，它会自动爆炸，但我的一些资源文件仍然保持压缩状态。

例如，我在 src/main/resources 文件夹中有一个 sinewave.raw 和一个 audio.wav 文件。这些文件在war 文件的WEB-INF/classes/ 文件夹中可用，但它们仍被压缩并且已损坏。

有没有更好的方法可以打包我的项目或存储我的资源文件，以便在部署它们时不会损坏它们。

# c# - 将结构从 c# 传递到 C dll

> ID：11305557
> 
> 赞同：1
> 
> 时间：2012-07-03T06:28:11.117
> 
> 标签：c#, c, pinvoke, structure

我正在尝试学习足够的 C#，以便我可以通过引用 C DLL 来传递结构；但它永远不会到达“cFunction”。正如您在 cFunction 中看到的，我明确地将 streamSubset 值设置为 44；但回到 c# 部分，它不会返回“44”。这是C代码：

```
typedef struct s_mPlot
{
    double      price[100];
    int         streamSubset;
} mPlot;

extern "C" __declspec( dllexport )  
void cFunction(mPlot *Mplot){
    Mplot->streamSubset = 44;} 
```

// 这是c#代码

```
 using System;
    using Vibe.Function;
    using System.Runtime.InteropServices;
    [StructLayout(LayoutKind.Sequential)]
    public class MPLOT 
    {
        [MarshalAs(UnmanagedType.ByValArray, SizeConst = 100)]
        public double []    price;
        public int          streamSubset;
     } 

namespace Vibe.Indicator{
public class myIdx : IndicatorObject {

    [DllImport("C:\\Users\\joe\\mcDll.dll", CharSet = CharSet.Auto)]
    public static extern void cFunction(
    [In, MarshalAs(UnmanagedType.LPStruct)]  MPLOT  mPlot );
    public myIdx(object _ctx):base(_ctx){}
    private IPlotObject plot1;

    protected override void Create()
    {
        MPLOT mPlot         = new MPLOT();
        mPlot.streamSubset = 2; 
        cFunction(mPlot);

        if (mPlot.streamSubset == 44)
             go();  
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:14:32.717

我可以看到以下内容：

1.  您几乎肯定需要在属性中指定`cdecl`调用约定。`DllImport`添加`CallingConvention=CallingConvention.Cdecl`.
2.  我相信这`UnmanagedType.LPStruct`增加了一层额外的间接性。但是您传递的`class`是一个引用类型的 C#。这意味着您将指针传递给指针。那是太多的间接级别。首先完全删除`[In, MarshalAs(UnmanagedType.LPStruct)]`。然后你的代码应该可以工作。如果你切换到一个结构而不是一个类，`MPLOT`那么你需要通过`ref`来获得间接。

我想我会有这样的代码：

```
[StructLayout(LayoutKind.Sequential)]
public struct MPLOT 
{
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 100)]
    public double []    price;
    public int          streamSubset;
} 

[DllImport("dllname.dll", CallingConvention=CallingConvention.Cdecl)]
public static extern void cFunction(
    ref MPLOT mPlot
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:34:46.980

尝试明确指定调用约定：

```
 [DllImport("C:\\Users\\joe\\mcDll.dll", CallingConvention=CallingConvention.Cdecl CharSet = CharSet.Auto)] 
```

VC 默认使用调用约定导出`cdecl`，但默认`DllImport`使用`stdcall`。因此，您必须至少明确指定其中之一，或者更好地同时指定两者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T06:44:19.297

替换`[In, MarshalAs(UnmanagedType.LPStruct)]`为`ref`。

# c# - 查看项目/解决方案的所有项目引用的工具

> ID：11305562
> 
> 赞同：2
> 
> 时间：2012-07-03T06:28:19.687
> 
> 标签：c#, .net

我有一个解决方案文件，其中包含 30 多个项目。不同的项目正在引用其他项目。

我想在图表中查看不同项目对其他项目的引用。（很难展开每个项目的“参考”节点并检查依赖关系）

有什么工具可以为我生成这个图表吗？

阿图尔·苏雷卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:37:01.167

你在使用 Visual Studio 吗？最终版本具有生成依赖图

# exception - Servlet“响应已提交”的原因

> ID：11305563
> 
> 赞同：21
> 
> 时间：2012-07-03T06:28:28.920
> 
> 标签：exception, servlets, response

在 servlet 中遇到此异常的常见可能性是什么 - 响应已提交？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-03T06:33:38.930

由于以下原因，响应被提交：

*   因为响应缓冲区已达到最大缓冲区大小。这可能是由于以下原因：

    ```
     > the bufferSize in JSP page has reached.You can increase the JSP buffer size 
        in page directive. See here, 

       <%@ page buffer="5kb" autoFlush="false" %>

      > the server default response max buffer size has reached.You can increase    
        the server default max buffer size.

        ServletRespnse.setBufferSize() 
    ```

*   代码的某些部分在响应上调用了flushed，即调用了方法`HttpServletResponse.flushBuffer()`。

*   代码的某些部分已刷新`OutputStream`or `Writer`，即调用方法`HttpServletResponse.getOutputStream().flush()`或 `HttpServletResponse.getWriter().flush()

*   如果您已转发到另一个页面，该页面的响应既已提交又已关闭。例如，当 response.sendRedirect() 被调用时，响应被提交。

# android - Robotium waitForView 消失？

> ID：11305566
> 
> 赞同：0
> 
> 时间：2012-07-03T06:28:45.080
> 
> 标签：android, robotium

我正在使用robotium 3.1，我想等待视图消失，有什么方法可以轻松做到这一点吗？我目前的方式涉及一个丑陋的繁忙循环，其中包括让人不开心的睡眠。

```
To clarify what I'd like to happen:
waitForView(<View>) //The view appears
//The view is visible for a few seconds
waitForViewNotThere(<View>) //waits until the view has disappeared 
```

出现的视图也不包含任何文本等。非常感谢任何输入。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-19T16:40:19.930

这是如何：

```
final TextView helloWorldText = solo.getText("Hello world!");

    solo.waitForCondition(new Condition() {
        @Override
        public boolean isSatisfied() {
            return helloWorldText.getVisibility() == View.INVISIBLE;
        }
    }, 10000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:14:20.010

无论你做什么，你都可能会在循环中进行某种睡眠。（如果您查看机器人源，它也使用睡眠）。您可以通过在等待 Ui 线程空闲的仪器上使用 waitforidlesync 方法将它们保持在最低限度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T08:05:33.753

如果您想等待视图消失，请使用`solo.waitForDialogToClose(long timeout)`.
参数： timeout - 等待的时间量（以毫秒为单位）。
返回：如果对话框在超时之前关闭，则返回 true；如果未关闭，则返回 false。

# cakephp - 在 JS Helper CakePHP 中手动触发事件

> ID：11305567
> 
> 赞同：6
> 
> 时间：2012-07-03T06:29:12.450
> 
> 标签：cakephp, cakephp-2.1, cakephp-2.2, ajaxhelper

我陷入了困境。我正在使用 JS 助手。我使用了以下代码。

```
<?php $this->Js->get('#client_id')
        ->event('change', $this->Js->request(array('action' => '../ajax/get_client_location_and_process'),
                   array('update' => '#client_location_process',
                     'async' => false, 
                     'dataExpression' => true,
                     'method' => 'post',
                     'evalScripts' => true,
                     'data' => $this->Js->serializeForm(array('isForm' => True, 'inline' => True))
                     )
                   )
        ); 
```

我想在页面加载时触发更改事件。如果我使用的是 document.ready 方法，那么它不起作用。而且我找不到可以在控件上显式触发某些事件的 JS Helper 方法。请建议代码如何在我需要时在表单元素上执行类似 JQuery trigger() 的功能。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-20T14:22:04.957

由于您已经`.trigger()`在 jQuery 中找到了相关信息，因此您可以将它与您的视图代码一起使用：

```
<?php 
    // Your view code
?>
<script>$('#client_id').trigger('change');</script> 
```

或者，如果您仍然喜欢通过 PHP 来做，您也许可以制作自己的助手，例如：

```
<?php 
class ArunjsHelper extends AppHelper {
    public $helpers = array('Html');

    function trigger($element, $event, $options = array()) {
        return $this->Html->scriptBlock("$('$element').trigger('$event');");
    }
} 
```

添加`ArunjsHelper`到`$helpers`控制器：

```
<?php
class SomeController extends Controller {
    public $helpers = array('Arunjs');

    // Your controller code
} 
```

然后您可以从视图中调用它：

```
<h1>Hello</h1>
<p>Your usual view HTML code</p>

<?php // Trigger the change event ?>
<?php echo $this->Arunjs->trigger('#client_id', 'change'); ?> 
```

# iphone - 如何知道 UITextView 是否有焦点

> ID：11305571
> 
> 赞同：26
> 
> 时间：2012-07-03T06:29:19.347
> 
> 标签：iphone, objective-c, ios

我知道将`becomeFirstResponder`焦点设置在控件上的方法，但是如何知道该控件（例如`UITextView`）当前是否正在关注它？

编辑：问题是我想（例如）在 UITextView 接收焦点时更改它的背景颜色，我应该把 isFirstResponder 调用准确地放在哪里？在这种情况下我应该使用通知吗？

非常感谢。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-03T06:36:22.677

```
if([txtView isFirstResponder]){
     //Has Focus
} else {
     //Lost Focus
} 
```

这是 UITextView 的委托方法，

```
- (BOOL)textViewShouldBeginEditing:(UITextView *)aTextView{
    //Has Focus
    return YES;
} 
```

这是失去焦点

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text{
    if ([text isEqualToString:@"\n"]){
        //Lost Focus
        [textView resignFirstResponder];
    }
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-03-17T09:18:33.077

使用 UITextField 委托方法。当 textField 获得焦点时（成为第一响应者）

`- (void)textFieldDidBeginEditing:(UITextField *)textField;`会被解雇，

当它失去焦点时

`- (void)textFieldDidEndEditing:(UITextField *)textField;`将被解雇。

# c# - 有什么方法可以从远程机器访问 GSM 调制解调器

> ID：11305574
> 
> 赞同：1
> 
> 时间：2012-07-03T06:29:43.150
> 
> 标签：c#, serial-port

我有一个内置于 asp.net 的应用程序 csharp，它通过在 GSM 硬件的串行接口上**​​使用 AT 命令来发送 SMS 警报。**到目前为止，由于调制解调器已物理插入机器，因此一切正常。我们正在将应用程序部署在无法物理插入 GSM 的远程机器上。

如果我为其分配了实时 IP，有什么方法可以访问远程放置的机器上的 GSM 调制解调器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T06:35:14.103

GSM 调制解调器在 IP 上没有获得 ATCommands。您需要访问 COM 端口才能向 GSM 调制解调器发送命令。您可以运行 Windows 服务/应用程序/Web 服务，您将在其中发送消息，并将通过 Windows 服务/应用程序/Web 服务发送到调制解调器。

网络服务可能是一个解决方案。由于您已经开发了一个与 GSM 调制解调器一起使用的应用程序，因此您需要调用一个 Web 服务，该服务可能具有与调制解调器对话的代码或可以将消息传递给您现有的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T06:41:39.290

看看 sourceforge 上的[**com0com**](http://com0com.sourceforge.net/)项目。它提供虚拟 COM 端口和子项目[**hub4com**](http://com0com.cvs.sourceforge.net/%2acheckout%2a/com0com/hub4com/ReadMe.txt?revision=RELEASED)，它甚至允许您通过 TCP/IP 进行 COM 通信。

# linq - 是否可以在两个特定对象之间进行迭代？

> ID：11305576
> 
> 赞同：1
> 
> 时间：2012-07-03T06:29:47.813
> 
> 标签：linq, loops

假设我有一个清单：-

```
var animals = new[] {"ant", "bear", "bee", ...... "monkey", ...... "zebra"}; 
```

在蜜蜂和猴子之间进行迭代的最简单方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T06:32:26.357

使用[`SkipWhile`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.skipwhile.aspx)和[`TakeWhile`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.takewhile.aspx)扩展方法

```
var myAnimals = animals.SkipWhile(a => a != "bee").TakeWhile(a => a != "monkey").ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:04:32.670

经过多次咬牙切齿，头发拉扯并将我的头撞到墙上之后，我决定以创建自己的迭代器的简单方法来做。

```
public static class LinqExtensions {
    public static IEnumerable<T> InRange<T>(this IEnumerable<T> list, T first, T last) {
        int i = 0;

        while (list.Count() > i && ! list.ElementAt(i).Equals(first))
            ++i;

        while (list.Count() > i && ! list.ElementAt(i).Equals(last))
            yield return list.ElementAt(i);

        if (list.Count() > i && list.ElementAt(i).Equals(last))
            yield return list.ElementAt(i);
     }
} 
```

现在以下工作完美： -

```
foreach (var x in animals.InRange("bee", "monkey")) {
    ....
} 
```

# wpf - 禁用元素时按钮上的图像变灰（简单而美观的方式）

> ID：11305577
> 
> 赞同：21
> 
> 时间：2012-07-03T06:29:55.467
> 
> 标签：wpf, image, xaml, button, command

当按钮被禁用时，我想使我的图像（在按钮上）变灰。当我在按钮上有文本（无图像）时，文本显示为灰色（图像作为按钮内容，它们不会显示为灰色）。有没有简单又漂亮的方法来做到这一点？

这是我的 xaml 文件：

```
<Window x:Class="WpfApplication2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <ToolBarTray VerticalAlignment="Top" Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" IsLocked="true" Grid.Row="0">
            <ToolBar Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" Band="1" BandIndex="1">
                <Button Command="{Binding Button1}" RenderOptions.BitmapScalingMode="NearestNeighbor">
                    <Button.Content>
                        <Image Source="open.ico"></Image>
                    </Button.Content>
                </Button>
                <Button Command="{Binding Button2}" RenderOptions.BitmapScalingMode="NearestNeighbor">
                    <Button.Content>
                        <Image Source="open.ico"></Image>
                    </Button.Content>
                </Button>
            </ToolBar>
        </ToolBarTray>
    </Grid>
</Window> 
```

这是我的文件后面的代码：

```
public partial class MainWindow : Window
{
    private RelayCommand _button1;
    private RelayCommand _button2;

    public MainWindow()
    {
        InitializeComponent();
        DataContext = this;
    }

    public ICommand Button1
    {
        get
        {
            if (_button1 == null)
            {
                _button1 = new RelayCommand(Button1E, Button1C);
            }
            return _button1;
        }
    }

    public ICommand Button2
    {
        get
        {
            if (_button2 == null)
            {
                _button2 = new RelayCommand(Button2E, Button2C);
            }
            return _button2;
        }
    }

    public void Button1E(object parameter)
    {
        Trace.WriteLine("Button 1");
    }

    public bool Button1C(object parameter)
    {
        return true;
    }

    public void Button2E(object parameter)
    {
        Trace.WriteLine("Button 2");
    }

    public bool Button2C(object parameter)
    {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-06T06:19:37.400

As Thomas Lebrun says in his post [How to gray the icon of a MenuItem ?](http://weblogs.asp.net/thomaslebrun/archive/2009/03/03/wpf-how-to-gray-the-icon-of-a-menuitem.aspx) the best way at the moment is probably to create a little class, AutoGreyableImage, which allow you to have an image that will be turn in gray automatically when the control is deactivated.

Here is how you can use it:

```
<MenuItem Header="Edit">
    <MenuItem x:Name="miPaste"
              Header="Paste">
        <MenuItem.Icon>
            <local:AutoGreyableImage Source="pack://application:,,,/Images/Paste.png"
                                                   />
        </MenuItem.Icon>
    </MenuItem>
</MenuItem> 
```

And here is the implementation:

```
/// <summary>
/// Class used to have an image that is able to be gray when the control is not enabled.
/// Author: Thomas LEBRUN (http://blogs.developpeur.org/tom)
/// </summary>
public class AutoGreyableImage : Image
{
    /// <summary>
    /// Initializes a new instance of the <see cref="AutoGreyableImage"/> class.
    /// </summary>
    static AutoGreyableImage()
    {
        // Override the metadata of the IsEnabled property.
        IsEnabledProperty.OverrideMetadata(typeof(AutoGreyableImage), new FrameworkPropertyMetadata(true, new PropertyChangedCallback(OnAutoGreyScaleImageIsEnabledPropertyChanged)));
    }
    /// <summary>
    /// Called when [auto grey scale image is enabled property changed].
    /// </summary>
    /// <param name="source">The source.</param>
    /// <param name="args">The <see cref="System.Windows.DependencyPropertyChangedEventArgs"/> instance containing the event data.</param>
    private static void OnAutoGreyScaleImageIsEnabledPropertyChanged(DependencyObject source, DependencyPropertyChangedEventArgs args)
    {
        var autoGreyScaleImg = source as AutoGreyableImage;
        var isEnable = Convert.ToBoolean(args.NewValue);
        if (autoGreyScaleImg != null)
        {
            if (!isEnable)
            {
                // Get the source bitmap
                var bitmapImage = new BitmapImage(new Uri(autoGreyScaleImg.Source.ToString()));
                // Convert it to Gray
                autoGreyScaleImg.Source = new FormatConvertedBitmap(bitmapImage, PixelFormats.Gray32Float, null, 0);
                // Create Opacity Mask for greyscale image as FormatConvertedBitmap does not keep transparency info
                autoGreyScaleImg.OpacityMask = new ImageBrush(bitmapImage);
            }
            else
            {
                // Set the Source property to the original value.
                autoGreyScaleImg.Source = ((FormatConvertedBitmap) autoGreyScaleImg.Source).Source;
                // Reset the Opcity Mask
                autoGreyScaleImg.OpacityMask = null;
            }
        }
    }
} 
```

Here is the result:

![Result of applying class to perform grayscale rendering when disabled](../Images/83b8d88c8cdcc90aaf68320d59c631f3.png)

[Sources](http://weblogs.asp.net/thomaslebrun/archive/2009/03/03/wpf-how-to-gray-the-icon-of-a-menuitem.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-03T08:15:16.717

您可以[使用像素着色器](http://neverindoubtnet.blogspot.co.uk/2009/05/pixelshader-that-means-business.html)自动执行此操作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-08-26T17:16:01.570

或通过附加属性相同。

```
<Image behaviors:GrayoutImageBehavior.GrayOutOnDisabled="True" Source="/WpfApp;component/Resources/picture.png" /> 
```

灰度图像行为：

```
public class GrayoutImageBehavior
{
    public static readonly DependencyProperty GrayOutOnDisabledProperty = DependencyProperty.RegisterAttached("GrayOutOnDisabled", typeof(bool), typeof(GrayoutImageBehavior), new PropertyMetadata(default(bool), OnGrayOutOnDisabledChanged));
    public static void SetGrayOutOnDisabled(Image element, bool value) { element.SetValue(GrayOutOnDisabledProperty, value); }
    public static bool GetGrayOutOnDisabled(Image element) { return (bool)element.GetValue(GrayOutOnDisabledProperty); }

    private static void OnGrayOutOnDisabledChanged(DependencyObject obj, DependencyPropertyChangedEventArgs args)
    {
        Image image = (Image) obj;
        image.IsEnabledChanged -= OnImageIsEnabledChanged;

        if ((bool)args.NewValue)
            image.IsEnabledChanged += OnImageIsEnabledChanged;

        ToggleGrayOut(image); // initial call
    }

    private static void OnImageIsEnabledChanged(object sender, DependencyPropertyChangedEventArgs args)
    {
        var image = (Image)sender;
        ToggleGrayOut(image);
    }

    private static void ToggleGrayOut(Image image)
    {
        try
        {
            if (image.IsEnabled)
            {
                var grayImage = image.Source as FormatConvertedBitmap;
                if (grayImage != null)
                {
                    image.Source = grayImage.Source; // Set the Source property to the original value.
                    image.OpacityMask = null; // Reset the Opacity Mask
                    image.Opacity = 1.0;
                }
            }
            else
            {
                var bitmapImage = default(BitmapImage);

                if (image.Source is BitmapImage)
                    bitmapImage = (BitmapImage) image.Source;
                else if (image.Source is BitmapSource) // assume uri source
                    bitmapImage = new BitmapImage(new Uri(image.Source.ToString()));

                if (bitmapImage != null)
                {
                    image.Source = new FormatConvertedBitmap(bitmapImage, PixelFormats.Gray32Float, null, 0); // Get the source bitmap
                    image.OpacityMask = new ImageBrush(bitmapImage); // Create Opacity Mask for grayscale image as FormatConvertedBitmap does not keep transparency info
                    image.Opacity = 0.3; // optional: lower opacity
                }
            }
        }
        catch (Exception ex)
        {
            LogicLogger.WriteLogEntry("Converting image to grayscale failed", LogLevel.Debug, false, ex);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-07-01T13:50:53.523

[Thomas Lebrun](http://weblogs.asp.net/thomaslebrun/wpf-how-to-gray-the-icon-of-a-menuitem)的 AutoGreyableImage 的更完整版本。对于任何有兴趣的人，我开始使用 Thomas Lebruns 类并遇到了几个空引用异常，并且发现如果先设置 isEnabled 属性然后再设置源，则不会禁用图像。

所以这是最终为我成功的课程。À 建议，您当然可以在其中添加不透明度问题，但我决定将其留给图像周围的 xaml。

```
using System;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media.Imaging;
using System.Windows.Media;

namespace MyDisabledImages
{
    /// <summary>
    /// Class used to have an image that is able to be gray when the control is not enabled.
    /// Based on the version by Thomas LEBRUN (http://blogs.developpeur.org/tom)
    /// </summary>
    public class AutoGreyableImage : Image
    {
        /// <summary>
        /// Initializes a new instance of the <see cref="AutoGreyableImage"/> class.
        /// </summary>
        static AutoGreyableImage()
        {
            // Override the metadata of the IsEnabled and Source property.
            IsEnabledProperty.OverrideMetadata(typeof(AutoGreyableImage), new FrameworkPropertyMetadata(true, new PropertyChangedCallback(OnAutoGreyScaleImageIsEnabledPropertyChanged)));
            SourceProperty.OverrideMetadata(typeof(AutoGreyableImage), new FrameworkPropertyMetadata(null, new PropertyChangedCallback(OnAutoGreyScaleImageSourcePropertyChanged)));
        }

        protected static AutoGreyableImage GetImageWithSource(DependencyObject source)
        {
            var image = source as AutoGreyableImage;
            if (image == null)
                return null;

            if (image.Source == null)
                return null;

            return image;
        }

        /// <summary>
        /// Called when [auto grey scale image source property changed].
        /// </summary>
        /// <param name="source">The source.</param>
        /// <param name="args">The <see cref="System.Windows.DependencyPropertyChangedEventArgs"/> instance containing the event data.</param>
        protected static void OnAutoGreyScaleImageSourcePropertyChanged(DependencyObject source, DependencyPropertyChangedEventArgs ars)
        {
            AutoGreyableImage image = GetImageWithSource(source);
            if (image != null)
                ApplyGreyScaleImage(image, image.IsEnabled);
        }

        /// <summary>
        /// Called when [auto grey scale image is enabled property changed].
        /// </summary>
        /// <param name="source">The source.</param>
        /// <param name="args">The <see cref="System.Windows.DependencyPropertyChangedEventArgs"/> instance containing the event data.</param>
        protected static void OnAutoGreyScaleImageIsEnabledPropertyChanged(DependencyObject source, DependencyPropertyChangedEventArgs args)
        {
            AutoGreyableImage image = GetImageWithSource(source);
            if (image != null)
            {
                var isEnabled = Convert.ToBoolean(args.NewValue);
                ApplyGreyScaleImage(image, isEnabled);
            }
        }

        protected static void ApplyGreyScaleImage(AutoGreyableImage autoGreyScaleImg, Boolean isEnabled)
        {
            try
            {
                if (!isEnabled)
                {
                    BitmapSource bitmapImage = null;

                    if (autoGreyScaleImg.Source is FormatConvertedBitmap)
                    {
                        // Already grey !
                        return;
                    }
                    else if (autoGreyScaleImg.Source is BitmapSource)
                    {
                        bitmapImage = (BitmapSource)autoGreyScaleImg.Source;
                    }
                    else // trying string 
                    {
                        bitmapImage = new BitmapImage(new Uri(autoGreyScaleImg.Source.ToString()));
                    }
                    FormatConvertedBitmap conv = new FormatConvertedBitmap(bitmapImage, PixelFormats.Gray32Float, null, 0);
                    autoGreyScaleImg.Source = conv;

                    // Create Opacity Mask for greyscale image as FormatConvertedBitmap does not keep transparency info
                    autoGreyScaleImg.OpacityMask = new ImageBrush(((FormatConvertedBitmap)autoGreyScaleImg.Source).Source); //equivalent to new ImageBrush(bitmapImage)
                }
                else
                {
                    if (autoGreyScaleImg.Source is FormatConvertedBitmap)
                    {
                        autoGreyScaleImg.Source = ((FormatConvertedBitmap)autoGreyScaleImg.Source).Source;
                    }
                    else if (autoGreyScaleImg.Source is BitmapSource)
                    {
                        // Should be full color already.
                        return;
                    }

                    // Reset the Opcity Mask
                    autoGreyScaleImg.OpacityMask = null;
                }
            }
            catch (Exception)
            {
                // nothin'
            }

        }

    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-12-06T06:07:03.650

我已经更改了 GrayoutImageBehavior，这样就不会有灰色图像的内存泄漏，这是当用户将图像“启用”属性从 true 更改为 false 时引起的，反之亦然。我添加了 DependencyProperty 来保存灰色图像和灰色图像不透明蒙版。

```
 public class GrayoutImageBehavior
 {
     public static readonly DependencyProperty GrayOutOnDisabledProperty = DependencyProperty.RegisterAttached("GrayOutOnDisabled", typeof(bool), typeof(GrayoutImageBehavior), new PropertyMetadata(default(bool), OnGrayOutOnDisabledChanged));
     public static void SetGrayOutOnDisabled(Image element, bool value) { element.SetValue(GrayOutOnDisabledProperty, value); }
     public static bool GetGrayOutOnDisabled(Image element) { return (bool)element.GetValue(GrayOutOnDisabledProperty); }

     private static DependencyProperty GrayImageProperty = DependencyProperty.RegisterAttached("GrayImage", typeof(FormatConvertedBitmap), typeof(GrayoutImageBehavior));
     private static void SetGrayImage(Image element, FormatConvertedBitmap value) { element.SetValue(GrayImageProperty, value); }
     private static FormatConvertedBitmap GetGrayImage(Image element) { return (FormatConvertedBitmap)element.GetValue(GrayImageProperty); }

     private static DependencyProperty GrayImageOpacityMaskProperty = DependencyProperty.RegisterAttached("GrayImageOpacityMask", typeof(Brush), typeof(GrayoutImageBehavior));
     private static void SetGrayImageOpacityMask(Image element, Brush value) { element.SetValue(GrayImageOpacityMaskProperty, value); }
     private static Brush GetGrayImageOpacityMask(Image element) { return (Brush)element.GetValue(GrayImageOpacityMaskProperty); }

     private static void OnGrayOutOnDisabledChanged(DependencyObject obj, DependencyPropertyChangedEventArgs args)
     {
         Image image = (Image)obj;
         image.IsEnabledChanged -= OnImageIsEnabledChanged;

         if ((bool)args.NewValue)
             image.IsEnabledChanged += OnImageIsEnabledChanged;

         ToggleGrayOut(image); // initial call
     }

     private static void OnImageIsEnabledChanged(object sender, DependencyPropertyChangedEventArgs args)
     {
         var image = (Image)sender;
         ToggleGrayOut(image);
     }

     private static void ToggleGrayOut(Image image)
     {
         try
         {
             if (image.IsEnabled)
             {
                 var grayImage = image.Source as FormatConvertedBitmap;
                 if (grayImage != null)
                 {
                     image.Source = grayImage.Source; // Set the Source property to the original value.
                     image.OpacityMask = null; // Reset the Opacity Mask
                     //image.Opacity = 1.0;
                 }
             }
             else
             {
                 FormatConvertedBitmap grayImage = GetGrayImage(image);
                 Brush grayOpacityMask = GetGrayImageOpacityMask(image);

                 if(grayImage == null)
                 {
                     var bitmapImage = default(BitmapImage);

                     if (image.Source is BitmapImage)
                         bitmapImage = (BitmapImage)image.Source;
                     else if (image.Source is BitmapSource) // assume uri source
                         bitmapImage = new BitmapImage(new Uri(image.Source.ToString()));

                     if (bitmapImage != null)
                     {
                         grayImage = new FormatConvertedBitmap(bitmapImage, PixelFormats.Gray32Float, null, 0); // Get the source bitmap
                         SetGrayImage(image, grayImage);
                         grayOpacityMask = new ImageBrush(bitmapImage); // Create Opacity Mask for grayscale image as FormatConvertedBitmap does not keep transparency info
                         SetGrayImageOpacityMask(image, grayOpacityMask);
                         //image.Opacity = 0.3; // optional: lower opacity
                     }
                 }

                 image.Source = grayImage;
                 image.OpacityMask = grayOpacityMask;
             }
         }
         catch (Exception ex)
         {
             //LogicLogger.WriteLogEntry("Converting image to grayscale failed", LogLevel.Debug, false, ex);
         }
     }
 } 
```

# java - 使用 JBoss 创建 HTML 报告？

> ID：11305580
> 
> 赞同：0
> 
> 时间：2012-07-03T06:30:06.867
> 
> 标签：java, html, jboss, report

是否有任何库（内置或第三方）可以使用 JBoss 应用快速轻松地编写 .html 报告？

我有一个要在不同表中显示的数据库中的实体列表。需要有一些东西，比如报告中的链接从报告的某些部分到其他部分，排序/分页，以及一些漂亮的 CSS 来使报告漂亮会很好。

我有一个以编程方式生成 .html 和 .css 的现有应用程序，但由于数据量很大（在某些情况下为 124Mb），.html 的写入时间太长（40 多分钟）并且经常冻结浏览器。所以我正在寻找替代方案。

我想一种解决方案是编写 JSF 表单，用 bean 数据填充丰富的表，但我不确定这是否是最好的方法。

回复高度评价！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:50:37.063

你看过[JQuery](http://jquery.com/)吗？它提供了大量插件来实现分页、表格、排序等，听起来它可能非常适合您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T03:35:16.427

[JasperReports](http://www.jasperforge.net/projects/jasperreports)是开源的、灵活的，非常适合我的需求（我正在使用 xml 数据进行报告，一个简单的转换将非常适合 JSXML 格式以这种方式生成报告）。

# css - 浮动问题：左

> ID：11305584
> 
> 赞同：3
> 
> 时间：2012-07-03T06:30:24.773
> 
> 标签：css, css-float

我有一个 php 页面，它显示来自数据库的用户配置文件。

我对每个个人资料都有一个班级“成员”的划分。

如果我对 .member 类使用 float-left，则配置文件的内容划分不会扩展，并且配置文件会显示在容器外。您可以在以下屏幕截图中看到。

[http://s14.postimage.org/failytjs1/With_Float.png](http://s14.postimage.org/failytjs1/With_Float.png)

但是，如果我不对 .member 类使用 float-left，则配置文件的内容划分会根据 php 扩展，并且配置文件会显示在容器内。您可以在以下屏幕截图中看到。

[http://s14.postimage.org/owc6f4axt/Without_Float.png](http://s14.postimage.org/owc6f4axt/Without_Float.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T06:33:33.927

将 a 添加到具有类 'member'`overflow: hidden;`的 s 的父元素。`div`如果父元素有高度，则移除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:28:23.880

你也可以使用`<div style="clear: both;"></div>`

# ruby-on-rails - 带布尔值的 Rails 范围

> ID：11305587
> 
> 赞同：9
> 
> 时间：2012-07-03T06:31:02.630
> 
> 标签：ruby-on-rails, rails-activerecord

当您在带有 Active Record 的 Rails 中使用布尔值并询问 (say)`visible?`时，它会检查该列是否`true`存在。如果是`false`或`nil`，`visible?`将返回`false`。

您如何确定布尔值的范围以询问该`?`方法是否会返回 false？我有这个：

```
scope :visible, where(hide: [nil, false]) 
```

但我想知道是否有更清洁的方法。有没有一种方法可以在不明确同时说明`nil`and的情况下编写此范围`false`？如果我们在相反的情况下，我们可以写

```
scope :invisible, where(hide: true) 
```

这看起来更干净。**可见**范围的最佳代码是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-03T08:08:59.887

我会去：

```
scope :visible, -> { where(hide: false) }
scope :invisible, -> { where(hide: true) } 
```

在 SQL`NULL`中表示缺失或未知的值，因此严格来说，记录`hide = NULL`既不可见也不不可见。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-03T07:33:50.050

在列上使用默认值。这有两个好处：您的数据库中只有两个可能的值，使您的代码更容易。布尔值不是真就是假，不是 nil，不是可能，不是 foobar。真假。“我宁愿避免让数据库严格地为假/真”是布尔列的一个没有实际意义的论点。

如果您需要超过 2 个状态，请使用状态机或类似的东西 - 那么它不再是布尔列/状态。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-03T05:50:08.113

与 Stefan 的答案几乎相同，有点简化：

```
scope :visible, where(hide: false)
scope :invisible, where(:hide) 
```

它适用于 PostgreSQL，但我不确定它是否适用于其他数据库。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-08T19:22:15.347

从 Rails 4 开始，您可以这样做：

```
# This will give you any hidden records
scope :invisible, -> { where(hide: true) }

# And this will give you any records that aren't hidden – whether nil *or* false
scope :visible, -> { where.not(hide: true) } 
```

* * *

尽管 Tanel 的回答实际上并没有回答手头的问题，即*“什么是可见范围的最佳代码？”* ，我肯定会附和他所说的布尔列应该始终是`true`or `false`。

实际上，任何数据库都不应允许将列声明为or`boolean`以外的任何内容，因为否则，它不是真正的*boolean*。但这是一个单独的蠕虫罐头。:-D`true``false`

# linux - linux中的jobs和ps命令有什么区别？

> ID：11305588
> 
> 赞同：10
> 
> 时间：2012-07-03T06:31:04.507
> 
> 标签：linux, unix

请问unix操作系统下jobs和ps这两个命令显示信息的区别？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-03T06:42:02.250

`jobs`是一个内置的外壳。它告诉您当前 shell 正在管理的作业。它可以为您提供 shell 内部的信息，例如作业编号（您可以在快捷方式中使用，如`fg %2`）和在变量扩展之前出现的原始命令行。

`ps`是一个外部命令，可以告诉您系统上运行的所有进程。（默认情况下，它只显示一个小子集，但可以选择显示更大的进程集。）它不知道外壳内部的东西。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-03T06:43:13.920

工作：显示当前居住在此终端中的工作作为示例 ->

```
gedit &
jobs 
```

这将显示你 gedit 正在运行 atm。

如果你关闭终端，gedit 也会死掉，你可以使用它，`disown`这样它就不会死掉。

`ps`是完全不同的东西，它是一个进程表显示工具。

# iphone - 如何从 Coredata iphone 应用程序中获取唯一值？

> ID：11305590
> 
> 赞同：0
> 
> 时间：2012-07-03T06:31:22.510
> 
> 标签：iphone, ios, core-data, entities

对 Coredata 存储不太熟悉。我想为一个`single person and retrieve the data of a selected person`. 像我一样，我将值存储在 coredata 表中，如下所示，

```
ID     Name    Date                 Report                  Status
1      Gopi    31 June 01.90pm      ABCD                    Y
2      Robot   27 June 2 am         hdfsdfk                 N
1      Gopi    31 June 02.00pm      fsdjk                   N
2      Robot   29 June 3am          eyrwruo                 Y
1      Gopi    1 July 3pm           rweyskd                 Y
1      Gopi    2 July 2pm           ABCD                    N
2      Robot   1 July 2.40pm        eirwierundfs            Y
3      John    2 July 10am          fewyrhhskd              Y
3      John    3 July 11am          sdkfksjfnvmnfks         N 
```

在我的第一个视图控制器中，我想在 tableview 中显示这样的细节，

```
Gopi            2 July 2pm     >
ABCD            Y 
Robot           1 July 2.40pm  >
eirwierundfs    Y
John            3 July 11am    >
sdkfksjfnvmnfks Y 
```

`When the user selects Gopi, It will navigate to another view controller with table view and they can view all records of named Gopi`. 而且我还想从实体中删除选定的用户详细信息。谁能帮我从 Coredata 获取唯一的用户详细信息？

我已将值存储在 coredata 实体中，并从实体中检索了所有行。但是，现在正在努力从实体中获取所选人员数据的唯一值。请你帮助我好吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T06:41:36.600

从核心数据中获取记录时添加这两行

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"Name==%@",str];
 //  Give your attribute name instead of "name"
 //  In str give the name "gopi" (for your case)  or whatever you want    

[fetchRequest setPredicate:predicate];
//set predicate to your fetch request 
```

然后执行 fetch 请求

# ruby - 在 emacs 中即时缩进 ruby 代码

> ID：11305600
> 
> 赞同：6
> 
> 时间：2012-07-03T06:32:26.983
> 
> 标签：ruby, emacs

如何让 Emacs 自动重新缩进 Ruby 代码？

例如，在 Emacs 中使用 this，

```
def hello
  puts "hello"
  en 
```

在我输入“d”后，我希望它变成这个，

```
def hello
  puts "hello"
end 
```

这是 Vim 中的默认设置，但如何在 Emacs 中实现呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T12:15:35.383

`ruby-electric`是旧闻。Emacs 24 有一个内置的次要模式`electric-indent-mode`，称为自动在某些字符后插入换行符，您当然可以将`RETURN`键重新映射到`newline-and-indent`（默认情况下它仅映射到缩进）。在 Emacs 24 中，您可以获得匹配的分隔符，`electric-pairs-mode`并且`ruby-end`模式会在需要时自动`end`为您插入。您可以查看[prelude-ruby.el](https://github.com/bbatsov/prelude-modules/blob/master/prelude-ruby.el)了解更多详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T06:44:08.597

如果您添加[ruby](https://github.com/qoobaa/ruby-electric) ​​-electric （也是[Rinari](http://rinari.rubyforge.org/)的一部分），您将获得以下信息：

*   编写“class”、“def”、“module”等时正确缩进“end”。
*   键入开头的分隔符时匹配分隔符。

如果你不想添加额外的模式，`end`一旦你按下 就会正确缩进`Enter`。或者您按`Tab`重新缩进当前行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T15:29:58.193

尝试[自动缩进模式](https://github.com/mlf176f2/auto-indent-mode.el)！

1.  Return 自动适当缩进代码（如果启用）
2.  粘贴/拉动适当缩进
3.  杀戮线将取消不需要的空间（如果启用）
4.  在访问文件时，适当缩进，但不要保存。（假装什么都没发生，如果启用）
5.  保存时，可选择取消标记，删除尾随空格，并明确缩进文件（如果启用）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-25T03:43:48.590

它不起作用，因为 Ruby 不知道您是否要键入以“end”开头的任何变量的“end”。所以打字`Tab`重新缩进是必要的。以下配置对我来说效果很好。

```
; auto indent                                                                                                                                                                                                       
(define-key global-map (kbd "RET") 'newline-and-indent)
(add-hook 'ruby-mode-hook (lambda () (local-set-key "\r" 'newline-and-indent))) 
```

# iphone - 我可以通过（10,10,320,312）等坐标裁剪图像吗？

> ID：11305606
> 
> 赞同：0
> 
> 时间：2012-07-03T06:32:51.917
> 
> 标签：iphone, ios, crop

目标：缩放后如何裁剪图像。我可以在（10,10,320,312）等预定义坐标处缩放后裁剪图像吗？我的 UIImageView 有这个尺寸吗？

我有一个`UIImageView`，`UIScrollView`我可以放大我的图像。当我按下`cropButton`正在显示的图像时，我希望在缩放后被`UIImage`裁剪。我想要图像的大小等于`UIImageView`大小。

谢谢 ！！

缩放前 缩放
![缩放前](../Images/3a9b1268e4287a5c996fdf4fead302f4.png) 和裁剪后 ![缩放和裁剪后](../Images/85dede7b9f5f2f3820f5bde737cb190f.png)

我的代码在这里。

```
-(void)cropButtonClicked
{   
    //Calculate the required area from the scrollview
    CGRect visibleRect;
    float scale = 1.0f/scroll.zoomScale;
    visibleRect.origin.x = scroll.contentOffset.x * scale;
    visibleRect.origin.y = scroll.contentOffset.y * scale;
    visibleRect.size.width = scroll.bounds.size.width * scale;
    visibleRect.size.height = scroll.bounds.size.height * scale;

    UIImage *image = [self imageByCropping:imageView.image toRect:visibleRect];

    imageView.image=image;

}

- (UIImage*)imageByCropping:(UIImage *)myImage toRect:(CGRect)cropToArea{
CGImageRef cropImageRef = CGImageCreateWithImageInRect(myImage.CGImage, cropToArea);
UIImage* cropped = [UIImage imageWithCGImage:cropImageRef];

CGImageRelease(cropImageRef);
return cropped;
}
I use this logic.. Am I RIGHT? (May be i have to check my ScrollView programming) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T07:10:32.040

愿这段代码为你使用完整..!!

```
CGSize itemSize = CGSizeMake(newWidth, newHeight);<br>
UIGraphicsBeginImageContextWithOptions(itemSize, NO, 0);<br>
CGRect imageRect = CGRectMake(0, 0, newWidth, newHeight);<br>
[image drawInRect:imageRect];<br>
UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();<br>
UIGraphicsEndImageContext(); 
```

# android - 检查选项卡上的互联网连接单击android？

> ID：11305609
> 
> 赞同：-4
> 
> 时间：2012-07-03T06:33:30.167
> 
> 标签：android

我想检查设备中标签栏上的互联网连接，如果我的设备连接到 wifi 或移动网络，那么它应该进一步调用 api，否则应该显示一个对话框，请检查您的互联网连接，并且应用程序应该保持在同一页面上. 请帮助任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T06:42:07.183

```
private boolean isNetworkAvailable() {
    ConnectivityManager connectivityManager 
          = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();
    return activeNetworkInfo != null;
} 
```

这是在 android 中检查互联网连接的示例代码。

您可能还需要添加用户权限

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

如果您想检查建立了哪个连接，请使用此代码段

```
private boolean networkConnection() {
    boolean wifiConnection = false;
    boolean mobileConnection = false;

    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo[] netInfo = cm.getAllNetworkInfo();
    for (NetworkInfo ni : netInfo) {
        if (ni.getTypeName().equalsIgnoreCase("WIFI"))
            if (ni.isConnected())
                wifiConnection = true;
        if (ni.getTypeName().equalsIgnoreCase("MOBILE"))
            if (ni.isConnected())
                mobileConnection = true;
    }
    return wifiConnection || mobileConnection ;
} 
```

# c# - 如何检测父表单取消 FormClosing 事件？

> ID：11305614
> 
> 赞同：3
> 
> 时间：2012-07-03T06:33:43.037
> 
> 标签：c#, winforms, event-handling, childwindow, formclosing

我从主表单打开了一个子表单，如下所示：

```
var cf = new ChildForm { Owner = this };
cf.Show(); 
```

然后子窗体在另一个线程上进行一些绘图。

当用户试图关闭主窗体时——如果子窗体已打开——则[`FormClosing`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formclosing.aspx)首先触发一个事件`ChildForm`，然后在主窗体中引发相同的事件。在发生`FormClosing`事件时，子窗体停止其绘图线程。

当主窗体包含未保存的数据时，用户可能会尝试关闭主窗体。然后，主窗体的事件处理程序会向它们显示警告“*数据未保存。取消关闭？ ”。*`FormClosing`然后他们可以取消保存（即主窗体的事件处理程序`Cancel`在对象上设置标志）。[`FormClosingEventArgs`](http://msdn.microsoft.com/en-us/library/system.windows.forms.formclosingeventargs.aspx)`FormClosing`

但是，到那时，子窗体的`FormClosing`事件已经被引发，并且它将停止其绘图线程。子窗体不知道它现在应该继续绘制（好像什么都没发生一样）。

是否可以从子窗体中检测到`FormClosing`事件已被主窗体取消？当用户被要求在主窗体中保存数据时，我仍然想停止重绘线程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:49:49.347

我会提供一个基于接口的解决方案。如果应用程序可以关闭，您可以通过这种方式轻松管理统一的方式。通过以下实现，父窗体负责询问子窗口是否准备好关闭，子窗体执行必须执行的任何操作并回复主窗口。

假设我有接口`IManagedForm`：

```
interface IManagedForm
{
    bool CanIBeClosed(Object someParams);
} 
```

两种形式 (`Form1`和`ChildForm`) 都会实现它。

请注意，对于此示例，我`ChildForm`以这种方式实例化：

```
ChildForm cf = new ChildForm() { Owner = this, Name = "ChildForm" };
cf.Show(); 
```

首先是**接口的实现`Form1`**：

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
{
    object someArgsInterestingForTheMethod = new object();

    e.Cancel = !((IManagedForm)this).CanIBeClosed(someArgsInterestingForTheMethod);
}

// Ask the ChildForm it is done. If not the user should not leave the application.
public bool CanIBeClosed(object someParams)
{
    bool isOKforClosing = true;

    var cf = this.Controls["ChildForm"] as IManagedForm;

    if (cf != null)
    {
        isOKforClosing = cf.CanIBeClosed(someParams);
        if (!isOKforClosing)
        {
            MessageBox.Show("ChildForm does not allow me to close.", "Form1", MessageBoxButtons.OK);
        }
    }
    return isOKforClosing;
} 
```

最后你**`ChildForm`的接口实现**看起来像这样：

```
private void ChildForm_FormClosing(object sender, FormClosingEventArgs e)
{
    object someArgsInterestingForTheMethod = new object();

    e.Cancel = !((IManagedForm)this).CanIBeClosed(someArgsInterestingForTheMethod);
}

public bool CanIBeClosed(object someParams)
{
    // This flag would control if this window has not pending changes.
    bool meetConditions = ValidateClosingConditions(someParams);
    // If there were pending changes, but the user decided to not discard
    // them an proceed saving, this flag says to the parent that this form
    // is done, therefore is ready to be closed.
    bool iAmReadyToBeClosed = true;

    // There are unsaved changed. Ask the user what to do.
    if (!meetConditions)
    {
        // YES => OK Save pending changes and exit.
        // NO => Do not save pending changes and exit.
        // CANCEL => Cancel closing, just do nothing.
        switch (MessageBox.Show("Save changes before exit?", "MyChildForm", MessageBoxButtons.YesNoCancel, MessageBoxIcon.Question))
        {
            case DialogResult.Yes:
                // Store data and leave...
                iAmReadyToBeClosed = true;
                break;
            case DialogResult.No:
                // Do not store data, just leave...
                iAmReadyToBeClosed = true;
                break;
            case DialogResult.Cancel:
                // Do not leave...
                iAmReadyToBeClosed = false;
                break;
        }
    }
    return iAmReadyToBeClosed;
}

// This is just a dummy method just for testing
public bool ValidateClosingConditions(object someParams)
{
    Random rnd = new Random();
    return ((rnd.Next(10) % 2) == 0);
} 
```

希望它足够清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T06:38:24.093

好吧，Yes/NO/Cancel 的*决定性*逻辑转移到了一些中心类。*Child*和*Parent*
中的 任何一个`FormClosing`都调用相同的函数。

 **自然地，为了获得良好的用户体验，如果从两个`FormClosing`函数调用函数，则必须以仅执行一次事件的方式对其进行管理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T07:06:39.873

MSDN 将 FormClosing 事件解释为在窗体关闭之前调用的事件。继续说，对于 MDI，所有子窗体 FormClosing 事件都在调用父窗体 FormClosing 事件之前调用。

所以这意味着，当在主窗体上按下关闭按钮时，它会为所有子窗体引发 FormClosing 事件。所以子窗体应该判断它是否准备好关闭，并相应地设置取消属性。当为主窗体引发事件时，它应该已经设置为取消。

即使在主窗体上引发了关闭事件，主窗体也不应该决定子窗体。

如需进一步阅读，

[MSDN 上 Form.FormClosing 事件的解释](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formclosing "MSDN 上的 Form.FormClosing 事件")

[解释如何使用取消属性](http://msdn.microsoft.com/en-us/library/system.componentmodel.canceleventargs.cancel "MSDN 上的 CancelEventArgs.Cancel")**

# php - php mysql中的db连接错误

> ID：11305615
> 
> 赞同：-2
> 
> 时间：2012-07-03T06:33:43.493
> 
> 标签：php, mysql

请通过链接

[http://amymcnamara.com/fortest.php](http://amymcnamara.com/fortest.php)

这里这个错误给出：

无法通过套接字 '/var/run/mysqld/mysqld.sock' 连接到本地 MySQL 服务器 (2)

为什么这个错误是给的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:36:44.130

这意味着 '/var/run/mysqld/mysqld.sock' 不存在。最有可能的是，mysqld 已关闭或使用另一个套接字来接受连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:30:36.990

这个错误

```
Warning: mysql_connect() [function.mysql-connect]: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) in /nfs/c09/h01/mnt/130514/domains/amymcnamara.com/html/fortest.php on line 2
Could not connect: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) 
```

通常在您为数据库连接提供错误的域名或用户名或密码时发生，因此请检查您的连接，我认为有错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T06:44:10.953

你需要有mysqld.sock文件，这个文件是mysql开机时生成的。或者只是在文件夹中创建名为“mysqld.sock”的空文件 - /var/run/mysqld/

# android - MapView 旋转/方向问题

> ID：11305617
> 
> 赞同：-1
> 
> 时间：2012-07-03T06:33:57.673
> 
> 标签：android, android-mapview, android-orientation

我正在研究 MapActivity，在地图的顶部、底部和侧面有一些额外的字段。所有这些 View 组件都在一个 main.xml 文件中可用。对于这两个方向，我都有 layout-land 和 Portrait 目录，这两个文件夹都包含具有相同 ID 的 main.xml。

我在 androidManifest.xml 中使用了 android:ConfigChaneg，并且我覆盖了**onConfigChange(Configuration newConfig)方法**

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
    if(newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
        setContentView(R.layout.main);
    }
    else if(newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {
        setContentView(R.layout.main);
    }
} 
```

但是现在当屏幕旋转/改变方向时出现异常。**MapActivity 只能有一个 MapView**如何解决这个问题，请指导我。

提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:58:32.120

在这里，如果您想在一种模式下修复屏幕，您可以在活动添加属性 android:screenOrientation="portrait" 的清单文件中修复屏幕，或者在这里当您的 onConfigurationChanged 在这里以两种模式重新启动所有进程时

# extjs - 将值保存到数据库 - 逻辑错误

> ID：11305621
> 
> 赞同：0
> 
> 时间：2012-07-03T06:34:35.510
> 
> 标签：extjs, extjs4, extjs-mvc, extjs4.1

在下面的示例中，当我们单击按钮时，所有表单数据（包括`KEY-VALUE`）都将传递给 php 文件以保存在数据库中。抓取`KEY-VALUE`是由`var form = this.up('form').getForm();`语句完成的。

**更新 3**

```
Ext.define ('Mycomp.model.MyClass',{
    extend: 'Ext.data.Model',

    fields:['textfieldone']

}); 
```

==================================================== =======================

**更新 2**

当用户单击一个按钮时，我会显示具有一个文本字段和一个按钮的视图（如以下代码所示）。用户将输入一些值并单击按钮，用户在文本字段中输入的值应保存在数据库中（`Store`有指向 PHP 代码路径的链接）

控制器

```
Ext.define('Mycomp.controller.MyClass',{
    extend: 'Ext.app.Controller',

    stores:['MyClass'],
    models:['MyClass'],
    views:['MyClassView'],
    init: function(){
        this.control({          
            'myclassview button[action=save]': {
                click: this.myMethod
            }
        });         
        },
        myMethod: function(button,record) {
               var win    = button.up('window'),
               form   = win.down('form'),
               record = form.getForm().getRecord(),
               values = form.getForm().getValues();
               console.log (values);
               console.log (record);
               record.getRecord().set(values);         
           win.close();
           this.this.getMyClassStore().sync(); 
    }
}); 
```

看法

```
Ext.define('Mycomp.view.user.MyClassView', {
    extend: 'Ext.window.Window',
    alias: 'widget.myclassview',
    initComponent: function() {
        this.items = [
            {
                xtype: 'form',
                items: [
                    {
                        xtype: 'textfield',
                        name : 'textfieldone',
                        fieldLabel: 'Contact Person Name'
                    }
                ]
            }
        ];
        this.buttons = [
                        {
                            text: 'Save',
                            name:'save',
                            action: 'save'
                        }
                    ];
        this.callParent(arguments);
    }
}); 
```

店铺

```
Ext.define('Mycomp.store.Myclass',{
    extend:'Ext.data.Store',
    model:'App.model.Myclass',

    proxy: {
        actionMethods : {
            create : 'POST'
        },
        type: 'ajax',
        url : '/savetodb.php'

    }

}); 
```

==================================================== ==============================

**更新 1**

```
 ....  this.buttons = [
                            {
                                text: 'Save',

                                action: 'save'
                            }, ... 
```

店铺

```
Ext.define('Mycomp.store.Myclass',{
    extend:'Ext.data.Store',
    model:'App.model.Myclass',

    proxy: {
        actionMethods : {
            create : 'POST'
        },
        type: 'ajax',
        url : '/savetodb.php'

    }

}); 
```

控制器

```
this.control({

            'mycalssform button[action=save]': {
                click: this.myMethod
            }
        });

        },

        myMethod: function(button, record) {

               var win    = button.up('window'),
               form   = win.down('form'),
               record = form.getRecord(),
               values = form.getValues();
               console.log (record);
      console.log (values );

           record.set(values);
           win.close();
           this.this.getmyClassStore().sync(); 
```

FIREBUG OUT PUT >> 它说 RECORD IS UNDEFINED 。为什么是这样 ？

```
undefined

Object { textfileldone="hello", textfileldtwo="bever", more...}

record is undefined
[Break On This Error]   

record.set(values); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:24:05.090

为了将表单“绑定”到记录，您需要创建一个新模型实例并调用`form.loadRecord()`- 只有在这样做之后您`form.getRecord()`才能工作。

或者（如果您只使用新记录形成表格，这将是合适的），您可以在保存并设置其值时简单地创建一个新模型记录。

沿着这些路线的东西将创建一个新的模型记录：

```
var iStore = this.getmyClassStore();
var iModel = iStore.model; 
var iNewRecord = iModel.create(); 
```

然后您可以执行：

```
iValues = form.getValues();
iNewRecord.set( iValues ); 
```

然后您需要将新记录添加到商店：

```
iStore.add( iNewRecord ) 
```

所以你的代码应该是这样的：

```
 myMethod: function(button, record) {

           var win    = button.up('window'),
               form   = win.down('form'), 
               values = form.getValues(),
               store = this.this.getmyClassStore(),
               model = store.model,
               record = model.create();

               record.set( values );
               store.add( record );
               win.close();
               store.sync(); 
    } 
```

# c# - 如何在日期（WebForm）中设置日期选择器的格式？

> ID：11305622
> 
> 赞同：0
> 
> 时间：2012-07-03T06:34:35.920
> 
> 标签：c#, asp.net, datepicker

我正在使用`Jquery`日期选择器

```
<p>Date: 
   <input id="datepicker" ClientIDMode="Static" type="text" runat="server" /> 
   g.Date = datepicker.Value; 
```

任何人都可以指导我如何使用 c# 为 VS 的日期选择器设置日期格式

我想将 18/01/2011 的格式设置为 2011 年 1 月 18 日。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:40:10.180

您应该有兴趣设置[`CustomFormat`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.customformat.aspx)datetimepicker 以满足您的需要

```
dateTimePicker.Format = DateTimePickerFormat.Custom;
dateTimePicker.CustomFormat="MMMM dd,yyyy" 
```

如果是 JQuery，请尝试这些行

```
$("#datepicker").datepicker({dateFormat: 'format here'}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:36:44.417

您可以使用以下

```
 datetimePicker.CustomFormat = "MMMM dd, yyyy" 
```

适用于各种自定义格式

> [自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

# bash - 通过并行运行 4 个进程来完成 21 个进程的 Bash 脚本

> ID：11305627
> 
> 赞同：1
> 
> 时间：2012-07-03T06:34:58.280
> 
> 标签：bash

我是脚本新手。我有 21 个目录要压缩并复制到另一个位置。我想并行运行 4 个进程，如果一个进程完成，则启动另一个进程。同样明智的 21 个目录应该完成。

我从以下帖子中得到了一些想法。 [bash 脚本来检查正在运行的进程](https://stackoverflow.com/questions/2903354/bash-script-to-check-running-process)

我需要添加这个，如果正在运行的服务数量 < 4，则启动另一个进程。

请帮我解决这个问题。

我的脚本如下。这里我使用 ping 命令来测试进程。如果这是有效的，我可以安排它来复制命令。

工作.sh

```
#!/bin/bash

cat my.txt |while read line
do
 run_count=`ps eax | grep ping | grep -v grep | wc -l`
 if [ 4 -gt ${run_count} ]
 then
  /home/cms.sh $line &
 fi
done 
```

cms.sh

```
#!/bin/bash
value=$1
cmd=ping
host=yahoo.com

$cmd -c $1 $host >> log-$1.txt 
```

我的.txt

```
100
250
150
174
182
140
320
139
150
120
110 
99
156
180
230
132
123
119
156
149
162 
```

如果我运行它，它将开始使用 my.txt 中的前 4 行运行 4 个进程。完成最初的 4 个进程后，它将不会继续保留 my.txt 中的值。

请让我知道我在哪里做错了。

先感谢您！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T07:34:46.030

由于您是脚本新手，请查看`xargs -P`. 即使您没有并行运行进程，它也是一个值得熟悉的命令，并且它更有可能预先安装在您的系统上，而不是`parallel`Mat 指出的答案中提到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T23:13:44.983

有：用于这种目的的[`pbzip2`并行bzip2压缩。](http://linux.die.net/man/1/pbzip2)此外，7z 有多线程选项，但我没有尝试过

我通常使用这种设置：

```
tar -cp somedir_tobackup/ | pbzip2 | mbuffer -m 180M | netcat <host> <port> 
```

显然，您可以使用 cpio 代替，删除 mbuffer，先保存到本地存档文件，然后使用 rsync 等等，但想法就在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-17T22:26:22.617

使用 GNU Parallel 你可以：

```
cat my.txt | parallel /home/cms.sh 
```

观看介绍视频以进行快速介绍：[https ://www.youtube.com/playlist?list=PL284C9FF2488BC6D1](https://www.youtube.com/playlist?list=PL284C9FF2488BC6D1)

浏览本教程 ( [http://www.gnu.org/software/parallel/parallel_tutorial.html](http://www.gnu.org/software/parallel/parallel_tutorial.html) )。你爱你的命令行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-17T22:43:03.620

在“do”之后需要第二个循环，该循环重复休眠 1 秒钟，直到没有 4 个进程在运行，然后它会跳出循环并启动一个新进程，然后再从控制文件中读取另一行。像这样的东西：

```
#!/bin/bash

while read line
do
   while :
   do
      run_count=`ps eax | grep  ping | grep -v grep | wc -l`
      [ 4 -gt ${run_count} ] && break;
      sleep 1
   done
   ./somejob $line &
done < my.txt 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-04T22:41:17.313

我认为你有四核，因此有 4 个进程。错误的解决方案。相反，计算核心数量（这样它可以扩展到双核、四核、6 核等，而无需手动更改进程变量）。这个例子是我能并行运行 bash 的最好例子。它是通过将任务划分为获得的核心数量、克隆获得`script.cfg`的核心数量、在后台运行它们来完成的。这样，每个核心将仅压缩这些文件夹的一部分。

假设创建一个文件夹`bash`。在里面，创建其他 2 个文件夹（`backup`和`directory`）。将这 21 个文件夹放入`directory`. 创建 2 个文件（使`.sh`文件可执行）。

启动.sh

```
#!/bin/bash
date=$(date '+%d_%B_%Y')
mkdir backup/$date
cores=$(ls  /proc/acpi/processor/ | wc -l)
cd directory
ls > ../list.result
cd ..
file_lines=$(cat list.result | wc -l)
let "split_lines=$file_lines/$cores"
let "split_lines=$split_lines+1"
split -d --lines=$split_lines list.result CPU
for script in `seq 1 $cores`
do
    let sufix=script-1
    cat script.cfg > "CPU0$sufix.script"
    chmod +x CPU0$sufix.script
    sed -i 's/filenumber/CPU0'$sufix'/g' CPU0$sufix.script
    ./CPU0$sufix.script &
done
exit 
```

和 script.cfg

```
#!/bin/bash
date=$(date '+%d_%B_%Y')
lenght=$(cat filenumber |wc -l)
counter=1
for x in `seq 1 $lenght`
do
    value="directory/"$(sed "${x}!d" filenumber)
    tar -zcvf $value.tar.gz $value
    mv directory/*.tar.gz backup/$date
done
rm *.script CPU* list.result
exit 
```

文件夹中的所有文件`directory`将使用 CPU 中的所有内核压缩并移动到备份文件夹。此技术以 100% 运行所有内核，因此请注意 CPU 温度。

# c++ - xxxxxx.exe 不是有效的 Win32 应用程序

> ID：11305633
> 
> 赞同：42
> 
> 时间：2012-07-03T06:35:14.170
> 
> 标签：c++, c, windows, visual-studio-2012

我在 Visual Studio 2012 RC 中有小型 C/C++ 项目

此应用程序解析 argv，然后调用另一个 .exe 文件`ShellExecute`

我的应用程序在 Windows7 上运行完美，但在 Windows XP x86 上运行不是有效的 Win32 应用程序错误。

我用多线程（/MT）和Win32平台编译它

这是我的#includes

```
#include <string>
#include <iostream>
#include <Windows.h>
#include <fstream>
#include <cstdio>
#include <vector>
#include <windowsx.h>
#include <shlobj.h>
#include <stdio.h>
#include <tchar.h>
#include <direct.h> 
```

谢谢

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-02-07T15:03:08.330

现在是 2013 年 2 月，我现在可以通过设置以 VS2012 中的 XP 为目标：

**项目属性 -> 常规 -> 平台工具集**：

**Visual Studio 2012 - Windows XP (v110_xp)**

您必须在您的应用程序中重新分发 msvcp110.dll 库等，这些库位于此处：`"<Program Files>\Microsoft Visual Studio 11.0\VC\redist\x86\Microsoft.VC110.CRT\"`

* * *

使用 Visual Studio 2015 更新 2015 年 8 月

现在似乎有很多选择。我能够使用**Visual Studio 2015 - Windows XP (v140_xp)**设置在 VS2015 中编译应用程序。为了让它在 Win XP 上实际运行，我必须部署（与应用程序一起复制）*msvcr100.dll*用于发布版本，*msvcr110.dll*和*msvcr100d.dll*用于调试版本（注意数字 100 和 110 存在差异，还有调试库*msvcr100d .dll*可能无法再分发） [![使用 Visual Studio 2015 面向 Windows XP](../Images/a453ee6b6e842faa25acac039ec8970a.png)](https://i.stack.imgur.com/fkqsm.png)

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-07-03T06:37:15.920

VS 2012 应用程序无法在 Windows XP 下运行。

请参阅此[VC++ 博客](http://blogs.msdn.com/b/vcblog/archive/2012/06/15/10320645.aspx)，了解为什么以及如何使其工作。

从 2013 年 2 月开始，它似乎得到支持/可能。请参阅[下面的 noelicus 答案](https://stackoverflow.com/a/14754251/551045)以了解如何。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-02-27T17:22:14.007

虽然选择的答案是正确的，然后 noelicus 给出了关于 v110_xp 平台工具集的正确更新，但还有一个问题可能会导致这种行为。

mahesh 在他的评论中已经发布了关于问题的说明，我想强调这一点，因为我花了几天的时间挣扎然后自己找到它。

因此，如果您在“配置属性 -> 链接器 -> 系统 -> 子系统”中有一个空白，您仍然会在 XP 和 Win2003 上收到“无效的 Win32 应用程序”错误，而在 Win7 上它可以正常工作而不会出现这个烦人的错误。一旦我放置了子系统：控制台，错误就消失了。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-07T08:32:02.007

至少有两种解决方案：

1.  您需要安装 Visual Studio 2010，然后从 Visual Studio 2010，查看 -> 解决方案资源管理器 -> 右键单击​​您的项目 -> 从上下文菜单中选择属性，您将获得窗口“您的项目名称”属性页 -> 配置属性 -> 常规 -> 平台工具集，选择“Visual Studio 2010 (v100)”。
2.  您需要在Visual Studio 2012 中[使用 C++ 定位的 Windows XP](http://blogs.msdn.com/b/vcblog/archive/2012/10/08/10357555.aspx)中描述的[Visual Studio 2012 更新 1](http://www.microsoft.com/visualstudio/eng#downloads+d-visual-studio-2012-update)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-14T12:52:56.513

对我来说，这有帮助： 1\. 配置属性/常规/平台工具集 = Windows XP (V110_xp) 2\. C/C++ 预处理器定义，添加“WIN32” 3\. 链接器/系统/最低要求版本 = 5.01

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-29T02:59:57.453

在运行使用静态版本的**Qt 5.7.0** (MSVC 2013)构建的应用程序时，我在**Windows XP**上遇到了同样的问题。

 **将以下行添加到项目的**.pro**文件中解决了它：

```
QMAKE_LFLAGS_WINDOWS = /SUBSYSTEM:WINDOWS,5.01 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-06-01T15:56:24.273

我相信如果您的项目所针对的框架版本未安装在您要部署到的服务器上，我相信也会引发此错误。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-10-09T14:08:52.970

我在 powershell 中启动 VS2013 32 位控制台应用程序时遇到了这个问题，在 cmd 中启动它并没有出现这个问题。**

# android - 应用程序出错并强制关闭

> ID：11305639
> 
> 赞同：0
> 
> 时间：2012-07-03T06:35:25.687
> 
> 标签：android, html, cordova

在我的 android phonegap 应用程序中，有时我会收到应用程序错误

***请注意****，从一页移动到另一页时出现此错误*

```
 **"A network error occurred.(file:///android_asset/www/home/home.html?userid=91)"** 
```

并且应用程序被强制关闭。请指导我解决这个问题。我还附上了屏幕截图。它在 android 4.x 版本中出现

![崩溃的图像](../Images/6c78dd04db39f1a145144ff64c20254b.png)

**更新**

```
$.ajax({
                cache: false,
                async: true,
                type: "POST",
                dataType: "json",
                url:url +"Status",
                data: '{"NO" : "' + no}',
                contentType: "application/json;charset=utf-8",
                success: function (r) 
                {
                     window.open("../index/index.html?id="+id);
                },
                error: function (e) 
                {
                    alert("No Network");
                }
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:23:39.657

在通过 URL 传递参数时，Android 4.x 操作系统中存在一个错误：

[https://code.google.com/p/android/issues/detail?id=17535](https://code.google.com/p/android/issues/detail?id=17535) [https://code.google.com/p/android/issues/detail?id=17327](https://code.google.com/p/android/issues/detail?id=17327)

# sql-server - MSSQL 服务器连接超时 groovy grails 应用程序

> ID：11305641
> 
> 赞同：1
> 
> 时间：2012-07-03T06:35:29.663
> 
> 标签：sql-server, grails

我有一个在 grails(1.1.1) 上用 groovy 开发的应用程序。我在 datasource.groovy 代码片段中使用了 MySQL 服务器的休眠启用池配置数据源，如下所示-

```
hibernate {
cache.use_second_level_cache=true
cache.use_query_cache=true
cache.provider_class='com.opensymphony.oscache.hibernate.OSCacheProvider'
}

environments {
development {
    dataSource {
                    logSql = true
        dbCreate = "update" // one of 'create', 'create-drop','update'
                    url = "jdbc:mysql://<dev-server-ip>:3306/<db-name>"                        
    }
}
test {
    dataSource {
        dbCreate = "update"
                    url = "jdbc:mysql://<test-server-ip>:3306/<db-name>"                        
    }
}
production {
    dataSource {
        dbCreate = "update"         
                    url = "jdbc:mysql://<prod-server-ip>:3306/<db-name>"                        
    }
} 
```

用于连接到另一个 MS SQL Server 2005。我定义了一个具有以下连接设置的服务类

```
 def connection = Sql.newInstance(
        "jdbc:sqlserver://<mssql-db-server-ip>;databaseName=<db-name>",
        '<username>',
        '<password>',
        'com.microsoft.sqlserver.jdbc.SQLServerDriver') 
```

我知道这个连接不是池连接。并在我每次使用此连接检索数据时创建会话。那么，是否有任何机制可以在服务类中创建池连接？

当我使用此 ms sql 服务器连接从服务类运行查询以选择数据查询时

```
String pullData() {
    def userId = "sample_user"
def testData = connection.firstRow("select distinct (COLUMN_NAME1+' > '+replace(COLUMN_NAME2,' > ', '>')+' > '+COLUMN_NAME3+' > '+COLUMN_NAME4+' > '+EMAIL) testRow from VIEW_NAME where lower(substring(EMAIL,1,(select charindex('@',EMAIL))-1 )) = lower(?)",[userId])

def myStringList = testData.testRow.split(' > ')
def myTestDataList = myStringList[4].split('@')
def email = myTestDataList[0]
return email
} 
```

我有一个例外。堆栈跟踪是

```
org.codehaus.groovy.runtime.InvokerInvocationException: java.lang.reflect.UndeclaredThrowableException
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at jcifs.http.NtlmHttpFilter.doFilter(NtlmHttpFilter.java:125)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Thread.java:636)
Caused by: java.lang.reflect.UndeclaredThrowableException
at PullDataService$$EnhancerByCGLIB$$881a39b3.pullData(<generated>)
at PullDataService$$FastClassByCGLIB$$f8a1c77f.invoke(<generated>)
at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:149)
... 33 more
Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: Connection timed out
at com.microsoft.sqlserver.jdbc.SQLServerConnection.terminate(SQLServerConnection.java:1368)
at com.microsoft.sqlserver.jdbc.SQLServerConnection.terminate(SQLServerConnection.java:1355)
at com.microsoft.sqlserver.jdbc.TDSChannel.write(IOBuffer.java:1548)
at com.microsoft.sqlserver.jdbc.TDSWriter.flush(IOBuffer.java:2368)
at com.microsoft.sqlserver.jdbc.TDSWriter.writePacket(IOBuffer.java:2270)
at com.microsoft.sqlserver.jdbc.TDSWriter.endMessage(IOBuffer.java:1877)
at com.microsoft.sqlserver.jdbc.TDSCommand.startResponse(IOBuffer.java:4403)
at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.doExecutePreparedStatement(SQLServerPreparedStatement.java:386)
at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement$PrepStmtExecCmd.doExecute(SQLServerPreparedStatement.java:338)
at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:4026)
at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1416)
at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:185)
at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:160)
at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.executeQuery(SQLServerPreparedStatement.java:281)
at PullDataService.pullData(PullDataService.groovy:38)
at PullDataService$$FastClassByCGLIB$$7ff09ca7.invoke(<generated>)
at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:149)
... 40 more 
```

请帮助我，我受了很长时间的痛苦。任何建议都是可观的。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T23:02:20.073

我可以看到有几件事会减慢此查询的速度。主要是您根据一堆不同的字段创建一个字符串列并在其上调用 distinct。Distinct 不需要，因为您只使用第一个结果，并且不需要其他列，因为您只关心电子邮件。考虑这样的事情：

```
 def userId = "sample_user".toLowerCase()
    def testData = connection.firstRow("select top 1 EMAIL as email" +
             " from VIEW_NAME" +
             " where lower(EMAIL) like ?",[userId + "@%"])
    def email = testData?.email?.split('@')[0]
    return email 
```

由于 like 子句，它仍然可能很慢，但应该比使用 distinct 快得多。

您可能需要考虑在您的视图/基础表中添加一列，以便在电子邮件地址列中有一个单独的用户 ID 列。

# jquery - 如何使用jquery设置顶部父元素的样式

> ID：11305643
> 
> 赞同：2
> 
> 时间：2012-07-03T06:35:29.940
> 
> 标签：jquery

我想要样式顶级父级，它应该是动态的。我只想要风格的顶级父母。我们可以添加更多的父 div，但样式应该反映到 div。用 jquery 可以吗？

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript" src="jquery-1.7.2.js"></script>
<script type="text/javascript">

$(function(){
    $('.text').parent().css('background-color','red')
})

</script>
</head>
<body>

<div>
    <div>
        <div class="menu">
            <div class="text">hiiii</div>
        </div>
    </div>
</div>

</body> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T06:43:17.240

根据您所说的“顶级父级”的含义，您可能需要`parents`带有选择器的功能`"div"`：

```
$(function(){
    $('.text').parents("div").last().css('background-color','red');
}); 
```

请注意，这仅在`$('.text')`仅匹配一个元素时才能按预期工作。如果匹配多个，则需要一个循环，例如：

```
$(function(){
    $('.text').each(function() {
        $(this).parents("div").last().css('background-color','red');
    });
}); 
```

...将每个匹配项的“顶级父级”设置`.text`为红色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:43:13.330

你可以这样做：

```
$('.text').parents('div:last').css('background-color','red')​; 
```

`.parents()`以从内到外的顺序返回祖先，因此您可以加上`:last`选择器来获取最外层的父级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T06:43:39.913

我认为您想要当前所选元素中的最高级别元素。您可以使用`.parents()`来获取 div 的所有父级，直到`body`和`html`。

```
$(".text").parents()
[
<div class=​"menu" style=​"background-color:​ red;​ ">​…​&lt;/div>​, 
<div>​…​&lt;/div>​, 
<div>​…​&lt;/div>​, 
<body>​…​&lt;/body>​,
<html>​…​&lt;/html>​
]

parents = $(".text").parents();
var rootElement = $(parents[parents.length-3]) 
```

我这样做`-3`是因为我不包括`body`and `html`（也就是说`-2`，数组是基于 0 的，所以减去另一个）。你不能做这个减法并指定一个选择器`.parents("div")`，也只能得到最后一个。你需要知道根元素是什么类型的元素。

# asp.net-mvc - Windsor 和 ThreadPool.QueueUserWorkItem：“HttpContext.Current 为空。PerWebRequestLifestyle 只能在 ASP.Net 中使用”

> ID：11305647
> 
> 赞同：0
> 
> 时间：2012-07-03T06:36:01.883
> 
> 标签：asp.net-mvc, multithreading, asp.net-mvc-3, castle-windsor, threadpool

我正在尝试增强 in proc MVC 缓存以提供旧值，同时触发新线程来填充新值。

如果我删除该行，则以下代码“有效”：

```
ThreadPool.QueueUserWorkItem(delegate 
```

“工作”是指发出触发缓存重新加载的请求的客户端被阻止，直到刷新缓存，但所有其他客户端继续加载影子版本。

理想情况下，我希望处理发生在后台，并且触发缓存刷新的客户端使用该请求的卷影副本。当线程完成后他们发出未来的请求时，他们将获得新的缓存值。

我的解决方案严重依赖 Castle 作为 DI 框架。我相信我遇到的问题与城堡中的生活方式有关。错误信息是：

**HttpContext.Current 为空。PerWebRequestLifestyle 只能在 ASP.Net 中使用**

当它试图解析所需的组件时，异常发生在长时间运行的进程（*getCacheItem() ）的深处。*

我的缓存方法如下：

```
public T GetShadow<T>(string key, Func<T> getCacheItem, int timeOut)
{
    if (Exists(key))
    {
        _log.Info("Shadow: Returning item from Cache: " + key);
        return (T)HttpContext.Current.Cache[key];
    }

    var shadowKey = key + "-shadow";

    if (Monitor.TryEnter(GetKeyLock(key)))
    {
        ThreadPool.QueueUserWorkItem(delegate
        {
            try
            {
                var item = getCacheItem(); // Long running query

                // Replace the cache entry
                HttpRuntime.Cache.Insert(key, item, null,
                                    DateTime.UtcNow.AddMinutes(
                                           timeOut), Cache.NoSlidingExpiration);

                // And add its shadow for subsequent updates
                HttpRuntime.Cache.Insert(shadowKey, item, null,
                                    DateTime.UtcNow.AddMinutes(timeOut * 2), Cache.NoSlidingExpiration);
            }
            finally
            {
                Monitor.Exit(GetKeyLock(key));
            }
        });
    }

    while (!Exists(shadowKey))
    {
        Thread.Sleep(500);
    }

    return (T)HttpContext.Current.Cache[shadowKey];
} 
```

所以我的问题是，我是否在 MVC3 中正确地创建了线程？

在这种情况下，是否有更好的方法来启动线程，不会导致 Windsor 由于 PWR 生活方式而引发异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T06:40:50.803

> 所以我的问题是，我是否在 MVC3 中正确地创建了线程？

不，您`HttpContext.Current`在 ASP.NET 应用程序的后台线程中使用。您的问题与 Windsor 或 ASP.NET MVC 无关。这只是你不能做的事情，因为后台线程（顾名思义）可以在任何用户 HTTP 上下文之外的后台运行。所以试图在这样的线程中访问这个上下文没有任何意义。

由于设计为独立于 ASP.NET 使用的新[MemoryCache](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache.aspx)类，您可以使用 .NET 4.0 中的新缓存功能。

# javascript - 从 Sench Touch 2 的视图中调用控制器 javascript 函数

> ID：11305651
> 
> 赞同：0
> 
> 时间：2012-07-03T06:36:30.297
> 
> 标签：javascript, touch, extjs

我正在关注 miamicoder 的 sencha touch 2 教程并取得了巨大成功（http://miamicoder.com/2012/how-to-create-a-sencha-touch-2-app-part-2/），但是因为我仍然是新手，我的 javascript 知识限制了我一些东西。

我想要做的是调用存储在控制器中的 javascript 函数，但将其传递给局部变量。这是我在初始化我的一个视图时声明的代码：

```
var geo = Ext.create('Ext.util.Geolocation', {autoUpdate: false, listeners: {
            locationupdate: function(geo) {
                console.log('Got location: ',geo);
                findCurrentAddress(geo,"txtFrom");
            },
            //locationerror: {fn: this.onGotLocation, scope: this }
            locationerror: function(geo, bTimeout, bPermissionDenied, bLocationUnavailable, message) {
                alert("deal with this later")
            }
        }
    });
    geo.updateLocation(); 
```

然后 findCurrentAddress 定义为：

```
function findCurrentAddress(geo, txt){
  alert("do some stuff with the geo object");
} 
```

如何将此功能移至控制器并使其仍可访问此视图？就像本教程对上面提供的链接上的 onNewButtonTap 事件所做的那样。

最终结果是一样的，但我想保持清洁，但不妨碍功能。

我试着做：

```
locationupdate: {fn: this.onGotLocation, scope: this } 
```

并在控制器中连接必要的代码，除了我丢失了具有纬度/经度属性的地理对象（至少，我不知道如何传递它！）

非常感谢任何帮助/提示/指针！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:34:06.120

简单的答案 - 不要这样做。您不会从视图中调用控制器的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T01:36:15.347

为什么不从视图中触发和事件并在控制器中订阅该事件？

像这样的东西：

```
...
locationupdate: function(geo) {
    console.log('Got location: ',geo);
    this.fireEvent('get_loc_update', geo); //this refers to your instance of Ext.util.Geolocation
},
... 
```

并在控制器中监听你的 get_loc_update 事件（或任何你称之为的），这将传递地理对象

# xcode4.3 - Adhoc 安装失败 - handle_install: API 失败

> ID：11305652
> 
> 赞同：1
> 
> 时间：2012-07-03T06:36:40.300
> 
> 标签：xcode4.3, provisioning, adhoc

我遇到了 Adhoc 配置文件的问题，我无法在我的客户 iPad 上使用 adhoc 配置文件安装我部署的应用程序，这发生在我将 xcode 从 4.2 升级到 4.3.3 之后，设备日志是：

```
Jul  3 09:08:38 unknown installd[1300] <Error>: entitlement 'get-task-allow' has value not permitted by a provisioning profile
Jul  3 09:08:38 unknown installd[1300] <Error>: entitlement 'application-identifier' has value not permitted by a provisioning profile
Jul  3 09:08:38 unknown installd[1300] <Error>: entitlement 'get-task-allow' has value not permitted by a provisioning profile
Jul  3 09:08:38 unknown installd[1300] <Error>: entitlement 'application-identifier' has value not permitted by a provisioning profile
Jul  3 09:08:38 unknown installd[1300] <Error>: entitlement 'get-task-allow' has value not permitted by a provisioning profile
Jul  3 09:08:38 unknown installd[1300] <Error>: entitlement 'application-identifier' has value not permitted by a provisioning profile
Jul  3 09:08:38 unknown installd[1300] <Error>: entitlement 'get-task-allow' has value not permitted by a provisioning profile
Jul  3 09:08:38 unknown installd[1300] <Error>: entitlement 'application-identifier' has value not permitted by a provisioning profile
Jul  3 09:08:38 unknown installd[1300] <Error>: entitlement 'get-task-allow' has value not permitted by a provisioning profile
Jul  3 09:08:38 unknown installd[1300] <Error>: entitlement 'get-task-allow' has value not permitted by a provisioning profile
Jul  3 09:08:38 unknown installd[1300] <Error>: entitlement 'application-identifier' has value not permitted by a provisioning profile
Jul  3 09:08:38 unknown installd[1300] <Error>: 00281000 verify_signer_identity: Could not copy validate signature: -402620394
Jul  3 09:08:38 unknown installd[1300] <Error>: 00281000 preflight_application_install: Could not verify executable at /var/tmp/install_staging.BQH85j/foo_extracted/Payload/My app.app
Jul  3 09:08:38 unknown installd[1300] <Error>: 00281000 install_application: Could not preflight application install
Jul  3 09:08:40 unknown installd[1300] <Error>: 00281000 handle_install: API failed
Jul  3 09:08:40 unknown installd[1300] <Error>: 00281000 send_message: failed to send mach message of 71 bytes: 10000003
Jul  3 09:08:40 unknown installd[1300] <Error>: 00281000 send_error: Could not send error response to client 
```

我已经删除了所有配置文件，从计算机中清理它，重新启动计算机，然后从门户下载它们，同样的问题。我已经通过使用 textEdit 打开配置文件并检查了`get-task-allow`布尔值，它被设置为 false。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T06:39:14.230

使用开发证书部署应用程序，然后使用分发证书将其存档时会出现问题。我已经检查了它们，现在一切顺利。希望能帮助其他人面临这个问题。

谢谢你。

# iphone - iOS 使用 coredata 更新实体的属性

> ID：11305657
> 
> 赞同：0
> 
> 时间：2012-07-03T06:37:00.103
> 
> 标签：iphone, sqlite, core-data, ios5, iphonecoredatarecipes

这是我使用核心数据更新表的代码

```
NSEntityDescription *entityDesc=[NSEntityDescription entityForName:@"UsageData" inManagedObjectContext:context];
NSFetchRequest *request=[[NSFetchRequest alloc] init];
NSPredicate *predicate=[NSPredicate predicateWithFormat:@"(member_id=Null)"];
[request setPredicate:predicate];
[request setEntity:entityDesc];
UsageData *matches;
NSError *error;

NSArray *objects=[context executeFetchRequest:request error:&error];
NSLog(@"Object count===%d",[objects count]);

for(int i=0;i<[objects count];i++)
{
    matches=[objects objectAtIndex:i];
    UsageData *data=(UsageData *)matches;
    NSLog(@"Data before===%@",data);
    [data setMember_id:memberKey]; 
```

// [data setValue:memberKey forKey:@"member_id"];

```
 [context save:&error];

    NSLog(@"Data after====%@",data);
    data=nil;
}

entityDesc=nil;
request=nil;
matches=nil;
error=nil;
objects=nil; 
```

我也想将这些更改保存到数据库中，日志给出了正确的想法，但我的本地 sqlite 数据库没有更新，有人知道吗？提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T09:50:03.603

您是否将数据保存回数据库，例如

```
 [document saveToURL:document.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:NULL]; 
```

?

# java - 如何从 Web 模块使用 @WebServiceRef 注入 EJB

> ID：11305660
> 
> 赞同：1
> 
> 时间：2012-07-03T06:37:16.190
> 
> 标签：java, web-services, jakarta-ee, glassfish, ejb

我有一个 JEE6 应用程序，带有一个 ejb 和一个 web 模块，在 GlassFish 3.1.1 上运行现在我想通过将它（作为会话 Bean）注入几个托管 Bean 来访问一个 WebService (JAX-WS)。

```
@Stateless
public class AnyService implements AnyServiceLocal {

    @WebServiceRef(wsdlLocation = "META-INF/wsdl/AnyService/Any.wsdl")
    private AnyService service;
    @Override
    public String findLastname(Integer key) {
        Any port = service.getAnyPort();
        AnyPerson sp = port.findAnynumber(key);
        return sp.getLastname();
    }

} 
```

当我尝试访问它时：

```
@ManagedBean
@SessionScoped
public class UserBean {

    @EJB
    private AnyServiceLocal any;
    public void findLastname() {
        name = any.findLastname(Integer.valueOf(key));
    }
} 
```

我会得到这些例外

```
WARNUNG: A system exception occurred during an invocation on EJB AnyService method public java.lang.String de.mizui.anytest.ejb.bean.AnyService.findLastname(java.lang.Integer)
javax.ejb.EJBException
        at com.sun.ejb.containers.BaseContainer.processSystemException(BaseContainer.java:5193)
        at com.sun.ejb.containers.BaseContainer.completeNewTx(BaseContainer.java:5091)
        at com.sun.ejb.containers.BaseContainer.postInvokeTx(BaseContainer.java:4879)
        at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:2039)
        at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:1990)
        at com.sun.ejb.containers.EJBObjectInvocationHandler.invoke(EJBObjectInvocationHandler.java:213)
        at com.sun.ejb.containers.EJBObjectInvocationHandlerDelegate.invoke(EJBObjectInvocationHandlerDelegate.java:79)
        at $Proxy430.findLastname(Unknown Source)
        ..blabla..
Caused by: javax.xml.ws.soap.SOAPFaultException: java.lang.NullPointerException
        at com.sun.xml.ws.fault.SOAP11Fault.getProtocolException(SOAP11Fault.java:193)
        at com.sun.xml.ws.fault.SOAPFaultBuilder.createException(SOAPFaultBuilder.java:134)
        at com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:123)
        at com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:93)
        at com.sun.xml.ws.client.sei.SEIStub.invoke(SEIStub.java:144)
        at $Proxy431.findEmployeenumber(Unknown Source)
        at de.mizui.anytest.ejb.bean.AnyService.findLastname(AnyService.java:25)
        ..blabla..
Caused by: javax.xml.ws.WebServiceException: java.lang.NullPointerException
        at com.sun.enterprise.security.jmac.provider.config.PipeHelper.makeFaultResponse(PipeHelper.java:321)
..blabla..
Caused by: java.lang.NullPointerException
        at com.sun.xml.ws.tx.coordinator.CoordinationManager.lookupOrCreateCoordinator(CoordinationManager.java:175)
    (somewhat shortened..) 
```

但是当我直接从 UserBean 中访问 WS 时，它就可以工作了。期待您的想法 :)

*耶，我的第一篇文章^^

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T07:48:08.133

我有解决办法！与 Web 服务的事务必须是原子的，例如依赖注入。但它试图将请求嵌套到注入事务中（hihi this rhymes），所以它不再是原子的了。您可以使用注释绕过特定方法：

```
@Stateless
@LocalBean
public class AnyServices{

    @WebServiceRef(wsdlLocation = "META-INF/wsdl/AnyService/Any.wsdl")
    private AnyService service;

    @TransactionAttribute(TransactionAttributeType.NOT_SUPPORTED)
    public String findLastname(Integer key) {
        Any port = service.getAnyPort();
        AnyPerson sp = port.findAnynumber(key);
        return sp.getLastname();
    }

} 
```

<3

# iphone - 从 .txt 文件中删除重复条目 - Objective C

> ID：11305662
> 
> 赞同：0
> 
> 时间：2012-07-03T06:37:24.883
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有以下`eeee.txt`文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
    <dict>
            <key>aa</key>
            <string>2012-06-29 17:12:45</string>
    </dict>
    <dict>
            <key>bb</key>
            <string>2012-06-29 17:12:59</string>
    </dict>
    <dict>
            <key>bb</key>
            <string>2012-06-29 17:13:03</string>
    </dict>
    <dict>
            <key>bb</key>
            <string>2012-06-29 17:13:06</string>
    </dict>
</array>
</plist> 
```

在这里，我想删除重复的条目`bb`并将它们替换为最新的`bb`条目，即最后一个（因为它是最新`timestamp`的条目`2012-06-29 17:13:06`）。我想再次将其写入我的`eeee.txt`文件。我怎样才能做到这一点 ？？谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:46:22.870

Load this file into an NSDictionary using "dictionaryWithContentsOfFile:", then create a new NSMutableDictionary and load each entry into it while checking for duplicates. If you need this written back as a text file, use NSDictionary's "writeToFile:atomically:" method.

# jquery - 如何在 JEditable 中设置 textarea 的属性值？

> ID：11305664
> 
> 赞同：1
> 
> 时间：2012-07-03T06:37:41.493
> 
> 标签：jquery, jeditable

我使用 textarea 元素，我需要将 'wrap' 属性设置为 'soft'。所以，现在我正在尝试编辑库：

```
 textarea: {
        element : function(settings, original) {
            var textarea = $('<textarea />');
            if (settings.rows) {
                textarea.attr('rows', settings.rows);
            } else if (settings.height != "none") {
                textarea.height(settings.height);
            }
            if (settings.cols) {
                textarea.attr('cols', settings.cols);
            } else if (settings.width != "none") {
                textarea.width(settings.width);
            }
            textarea.attr('wrap', 'soft');
            $(this).append(textarea);
            return(textarea);
        }
    }, 
```

但它不起作用。请告诉我，我该怎么做？谢谢你。

# c++ - 用于 chrome 扩展本机客户端的 C++ 中的嵌入式 http 服务器

> ID：11305668
> 
> 赞同：0
> 
> 时间：2012-07-03T06:37:59.260
> 
> 标签：c++, google-chrome-extension, embeddedwebserver, google-nativeclient

我试图找到一些示例，这些示例可以为我提供一些关于如何在 chrome 扩展中创建 http 服务器的指示，但没有任何运气。有谁知道如何启动 NPAPI、NACL http 服务器？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:33:24.443

简短的回答：不可能。

如果您想在本地计算机上打开一个端口以允许连接，那么 Web 安全模型不允许这样做。NaCl 以与 JavaScript 相同的权限运行，没有额外的漏洞。但是，您可以在启动时为 chrome 指定额外的标志，以从 NaCl 获得更多权限，例如打开调试端口，或访问原始网络套接字。

如果您想“模拟”一个 HTTP 服务器以使您的扩展程序在离线时继续使用它，那么使用 PostMessage API 会更容易。

# php - 如何检查图像源是否存在

> ID：11305669
> 
> 赞同：0
> 
> 时间：2012-07-03T06:38:04.107
> 
> 标签：php, image

我的服务器空间有限。因此，我正在寻找一种将图像 URL 连接到我的网站的替代方法，例如产品图像。

我想做的是输入一个 URL，然后在不刷新整个页面的情况下加载图像。

这是我的想法：

输入“任何网址”然后提交

```
if url is image and existing {
    display the image
}
else if (url is a non-image) or (url is image but not existing) {
    display a default image
} 
```

我试过`getimagesize`了，但是太重了。`curl`在我的服务器上不起作用，所以我想做的是使用 jQuery 或 JavaScript 或其他东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:27:44.680

目前我正在使用这样的东西：

HTML

```
<img src="http://www.yoursite.com/img/someimage.jpg" onerror="NoImage(this);"> 
```

Javascript部分：

```
<script type="text/javascript">     
    function NoImage(p){
        p.src="http://www.yoursite.com/img/nopic.gif";
    }
</script> 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:55:37.427

使用 fopen 检查该图像是否存在，您不必阅读全部内容

[http://www.astro.keele.ac.uk/oldusers/rno/Computing/File_magic.html](http://www.astro.keele.ac.uk/oldusers/rno/Computing/File_magic.html)

（你应该限制可能的 url 导致从其他页面窃取 auf 带宽 - 并且可能是由该图像引起的一些版权问题）

# android - 访问 Running 服务并调用其方法？

> ID：11305671
> 
> 赞同：8
> 
> 时间：2012-07-03T06:38:20.830
> 
> 标签：android, background-service

我已经创建了一个现在在后台发送位置的服务

> 我想在我的**ACTIVITY中创建一个****方法**，它将访问当前运行的服务实例并调用它的方法

 **说位置服务有 Methode

```
SendLocation()
{
/// to do 
} 
```

现在在活动 A 中：

> **Service s = getCurrentRunningServiceInstance // 类似这样**

并调用它的方法

```
s.SendLocation(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T06:46:16.487

您不能`Service`直接在 a 上调​​用方法。您需要做的是`bind`对`Service`.

在您的`Service`, 覆盖`onBind()`并让它返回一个有效的`IBinder`然后以客户端/服务器方式使用它。

请参阅[服务](http://developer.android.com/guide/components/services.html)文档，特别是有关[创建绑定服务](http://developer.android.com/guide/components/services.html#CreatingBoundService)的文档以及[绑定服务](http://developer.android.com/guide/components/bound-services.html)的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T06:43:47.490

不建议调用服务的方法，而是按照以下步骤操作

1）在Activity中创建一个BroadcastReciever。

2）从服务位置改变时，发送带有位置附加信息的广播意图，

3）在Activity中从Receiver监听它并相应地更新activiy。**

# google-chrome - chrome没有在flash中显示视频

> ID：11305675
> 
> 赞同：0
> 
> 时间：2012-07-03T06:38:34.090
> 
> 标签：google-chrome, flash

我不明白。我正在尝试在我的网站上嵌入视频。在所有浏览器（甚至 IE8）上都可以完美运行，但不能在 chrome 上运行...在使用 windows 7 的多台机器上测试

这是嵌入代码：

```
<object height="226" id="ce_93792260" width="400">
<param name="movie" value="http://current.com/e/93792260/en_US" />
<param name="wmode" value="transparent" />
<param name="allowfullscreen" value="true" />
<param name="allowscriptaccess" value="always" />
<embed allowfullscreen="true" allowscriptaccess="always" height="226" 
src="http://current.com/e/93792260/en_US" type="application/x-shockwave-flash" width="400" wmode="transparent">
    </embed></object> 
```

你可以在这里看到页面上的嵌入：[http ://www.radicalislam.org/videos/american-born-baptist-now-ruthless-islamic-terrorist](http://www.radicalislam.org/videos/american-born-baptist-now-ruthless-islamic-terrorist)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T07:44:14.003

找到了解决方案。需要删除文件 gcswf32.dll 之前不要忘记关闭 chrome。

来源：http: [//community.spiceworks.com/how_to/show/2004](http://community.spiceworks.com/how_to/show/2004)

# mysql - 如何填写联接表？

> ID：11305676
> 
> 赞同：0
> 
> 时间：2012-07-03T06:38:42.423
> 
> 标签：mysql, jointable

我是 mySQL 的新手。我从两个表创建了一个连接表：

```
students
===============================
id(auto)
name

homeworks
===============================
id(auto)
description

students_homeworks
===============================
idStudentHomework(auto)
idStudent
idHomework 
```

学生应在我的网站上填写表格并提供他的姓名和作业说明。据我所知，然后我会在我的 php 代码中查询数据库，并将 student.name 和 homework.description 插入到相应的表中。但是我应该如何填写 student_homeworks 表？我应该再次查询这两个表并找到 ID，然后填充连接表吗？（我用谷歌搜索但刚刚发现如何创建连接表和 SQL JOIN 命令）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T06:42:20.443

如果学生和作业 id 是自动递增的，您可以使用函数[LAST_INSERT_ID](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id) 来确定先前插入的记录的 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:44:24.230

```
1\. insert into student(name) values ('john')
2\. select max(id) from student
3\. insert into homeworks(description) values ('maths')
4\. select max(id) from homeworks
5\. insert into students_homeworks (idStudent, idHomework) values(1, 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T06:45:21.123

如果作业描述是用户填写的文本框。无需为它创建单独的表。

如果用户有固定值（例如，下拉列表），您只需创建单独的作业描述。

# c - C printf 在输出中间放置一个制表符

> ID：11305677
> 
> 赞同：-3
> 
> 时间：2012-07-03T06:38:43.457
> 
> 标签：c, printf, whitespace

有问题的代码是：

```
frac = i & 0x007FFFFF;
nanBit = (frac & 0x00400000)>>22;
exp = (i & 0x7F800000)>>23;
sign = (i & 0x80000000)>>31;
printf("SignBit %d, expBits %d, fractBits 0x%08X\n", sign, exp, frac); 
```

在 expBits 之后、exp %d 之前输出一个制表符。即使我出于某种原因复制并粘贴了代码，也会出现这样的标签：

```
printf("SignBit %d, expBits %d, fractBits 0x%08X\n", sign, exp, frac); 
```

虽然实际代码如下所示：

```
printf("SignBit %d, expBits %d, fractBits 0x%08X\n", sign, exp, frac); 
```

编辑：我注意到该选项卡实际上甚至没有显示在帖子中，仅显示在编辑器中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T06:44:09.393

您的源代码中有一个实际的选项卡。它恰好与一个制表位对齐，因此它在您的编辑器中只有一个空格。请您的编辑搜索标签。

# asp.net - 下拉列表的必填字段验证器 动态

> ID：11305678
> 
> 赞同：1
> 
> 时间：2012-07-03T06:38:47.217
> 
> 标签：asp.net

```
<asp:DropDownList ID="ddTitle" runat="server" DataTextField="TitleName" DataValueField="TitleId"ValidationGroup="t1">
</asp:DropDownList>
<asp:RequiredFieldValidator runat="server" ID="ReqDropDnw" ControlToValidate="ddTitle" Display="Dynamic" ValidationGroup="t1" InitialValue="<-- Select Title-->" ErrorMessage="Please Select Title">
</asp:RequiredFieldValidator> 
```

我用过这个，但它不起作用，我可以有一个合适的解决方案
吗？我的下拉列表是动态的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:15:16.283

从数据库绑定数据后，您可以使用添加一个空项目到列表中，例如：

```
ddTitle.Items.Insert(0, ""); 
```

现在必填字段验证器将适用于此下拉列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:46:00.703

像这样使用...

```
<asp:DropDownList ID="ddl" runat="server">
<asp:ListItem Text="Select One" Value=""></asp:ListItem>
<asp:ListItem Text="abc" Value="1"></asp:ListItem>
<asp:ListItem Text="xyz" Value="2"></asp:ListItem>
</asp:DropDownList> 
```

现在您可以为此下拉列表使用必填字段验证器.....

# opengl - AMD 硬件上的基本 Spotlighting GLSL 片段程序

> ID：11305682
> 
> 赞同：0
> 
> 时间：2012-07-03T06:38:57.867
> 
> 标签：opengl, glsl, gpu, amd-processor

我编写了一个 GLSL 片段程序，它可以绘制多个灯光，其中一些带有聚光灯效果（即，带有 GL_SPOT_DIRECTION 的 glLightfv 和带有 GL_SPOT_EXPONENT 的 glLightf）。该计划的相关摘录如下：

```
float light_spot(gl_LightSourceParameters light) {
    float dot_LD = dot( normalize(vec_vertex_eye_i-light.position.xyz), normalize(light.spotDirection) );
    float coeff = 1.0 - (1.0-dot_LD)/(1.0-light.spotCosCutoff);
    return (dot_LD>light.spotCosCutoff) ? pow(coeff,light.spotExponent) : 0.0;
} 
```

除了“vec_vertex_eye_i”之外，所有变量都是不言自明或[记录](http://mew.cx/glsl_quickref.pdf)在案的，它是来自顶点着色器的不同 vec3，其中它设置为 (gl_ModelViewMatrix*gl_Vertex).xyz。

该程序在 NVIDIA 硬件上完美运行（在 NVIDIA GeForce 8400M GS 和 NVIDIA GeForce GTX 580M 上测试），但在 AMD 卡（特别是 ATI Mobility Radeon HD 4250）上给出错误结果。

我的问题是，在 glEnable 或其他需要做的特殊配置方面，我是否可能缺少任何东西。AMD 卡有新的驱动程序，我宁愿认为聚光灯是一个不太可能被破坏的相当重要的功能。着色器编译得很好。我在这里想念什么？

# c# - silverlight 在 localhost 和 machinename 之间有区别吗？

> ID：11305686
> 
> 赞同：0
> 
> 时间：2012-07-03T06:39:15.173
> 
> 标签：c#, sql, silverlight-4.0, iis-7.5

我使用 SQL Server Express 2008 R2 在 Windows Server 2008 R2 上将 Silverlight Web 应用程序部署到 IIS 7.5。如果我通过 localhost:port 或 ip:port 连接到应用程序，我可以登录。

当我通过它的机器名 (srv_dev:port) 访问 web 应用程序时，我无法登录。

如果我调试 xap，SilverlightApplication\Service References\Service ReferencesMembership\Reference.cs 中会出现以下错误

```
public SilverlightApplication.ServiceReferenceMembership.User EndGetUserByUserName(System.IAsyncResult result) {
            object[] _args = new object[0];
            SilverlightApplication.ServiceReferenceMembership.User _result = ((SilverlightApplication.ServiceReferenceMembership.User)(base.EndInvoke("GetUserByUserName", _args, result)));
            return _result;
        } 
```

通信异常 - 远程服务器返回错误：未找到。

应用程序使用带有 asp.net 成员表的自定义成员提供程序。

我必须配置一些东西吗？站点绑定是：

键入主机名端口 IP 地址绑定信息

http 无 3130 * 无

net.pipe 无 无 无 本地主机

net.msmq 无 无 无 本地主机

为什么 Silverlight 的 localhost / machinename 之间存在差异？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:44:52.940

这是 Silverlight 的`404 Not Found`回应版本。

通常当我看到那个错误时，我总是发现我忘记修复我的服务引用的端点地址，它一直指向本地主机而不是服务的远程地址。

# php - PHP简单的html dom破坏缩进

> ID：11305687
> 
> 赞同：0
> 
> 时间：2012-07-03T06:39:20.430
> 
> 标签：php, dom, simple-html-dom

我正在使用 PHP 简单的 html dom 来编辑一些 html 文件。问题是当我保存时，它会删除所有回车符。我怎样才能保存它们？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T06:54:49.173

API 文档没有显示它们，但是`file_get_html`函数`str_get_html`有一堆额外的有趣参数，只需打开`simple_html_dom.php`：

```
function file_get_html(
  $url, $use_include_path = false, $context=null, $offset = -1,
  $maxLen=-1,
  $lowercase = true,
  $forceTagsClosed=true,
  $target_charset = DEFAULT_TARGET_CHARSET,
  $stripRN=true,
  $defaultBRText=DEFAULT_BR_TEXT)

function str_get_html(
  $str,
  $lowercase=true,
  $forceTagsClosed=true,
  $target_charset = DEFAULT_TARGET_CHARSET,
  $stripRN=true,
  $defaultBRText=DEFAULT_BR_TEXT) 
```

也许你可以设置`$stripRN`为 false，否则会这样做`simple_html_dom->prepare()`：

```
//before we save the string as the doc...  strip out the \r \n's if we are told to.
if ($stripRN) {
    $str = str_replace("\r", " ", $str);
    $str = str_replace("\n", " ", $str);
} 
```

# android - Sprite Jump 在我的游戏和引擎中

> ID：11305689
> 
> 赞同：-1
> 
> 时间：2012-07-03T06:39:29.243
> 
> 标签：android, andengine

嗨，我已经在 Android 的 andengine 中开始了一个游戏，我想在一个精灵上应用一个跳跃功能，这就像一些抛射运动，向上和向前也是如此。我已应用移动修饰符来获得该功能。但这不是抛射运动。

我怎样才能做到这一点，而我的精灵通过再次点击它不能再次跳跃，直到它完成它跳跃。我不想在场景触摸上使用延迟功能。任何帮助。

```
final Entity playerEntity = move;
final float jumpDuration = 1;
final float startX = playerEntity.getX();
final float jumpHeight = 60;
move.getTextureRegion().setFlippedVertical(true);
final MoveModifier jumpForwardUp = new MoveModifier(jumpDuration/2, startX, startX - jumpHeight, playerEntity.getY(), playerEntity.getY() + 130);
final MoveModifier jumpForwardDown = new MoveModifier(jumpDuration/2, startX - jumpHeight, startX, playerEntity.getY() + 130, playerEntity.getY() + 170);
final SequenceEntityModifier modifier = new SequenceEntityModifier(jumpForwardUp ,jumpForwardDown);
playerEntity.registerEntityModifier(modifier); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T06:43:23.510

尝试使用and 来完成一些真正的物理工作，`JumpModifier`查看并浏览一些示例代码。`Box2d Extension``AndEngine``AndEngine`

**编辑：**

`AndEngine`有修饰符列表。`JumpModifier`是其中之一。保持一个类级别或项目级别`flag`，即`true`您的对象处于跳转状态并且`false`对象处于正常状态。

每个修饰符都采用`IModifierListner`set that `flag`to `true`in `onStart`of的对象并将其`IModifierListner`设置为`false`at `onEnd`of `IModifierListner`。在每次点击时检查这`flag`是否很`true`简单`return`并且什么也不做。

# wpf - 通过 Xaml 调用不同程序集的枚举值时缺少资源

> ID：11305695
> 
> 赞同：-1
> 
> 时间：2012-07-03T06:40:12.437
> 
> 标签：wpf, xaml, exception, resources, enums

我有两个程序集
1\. MyProj.GUI 2\. MyProj

在`MyProj` 我定义的 `enum MergeAction {ApplyTarget, ApplyToWorkingCopy, Ignore};`
中`MyProj.GUI`，我有一个用于 Combobox 的 Xaml，如下所示：

`xmlns:Merge="clr-namespace:Megatec.EB2UDF.Merge;assembly=Megatec.EB2UDF"`

```
<DataTemplate DataType="{x:Type Merge:DifferenceViewModel}">
  <ComboBox SelectedValue="{Binding Path=MergeAction}">
    <ComboBox.Items>
      <Merge:MergeAction>Ignore</Merge:MergeAction>
      <Merge:MergeAction>ApplyToWorkingCopy</Merge:MergeAction>
      <Merge:MergeAction>ApplyToTarget</Merge:MergeAction>
    </ComboBox.Items>
  </ComboBox>
</DataTemplate> 
```

当我打开窗口时，我得到异常 `System.Resources.MissingManifestResourceException`
找不到任何适合指定文化或中性文化的资源...

没有`ComboBox.Items`标签...一切都很酷...

这是为什么？
我究竟做错了什么？

编辑：

从 Xaml 中多次调用程序集（即使是同一个对象）
示例

```
 <ribbon:Button Label="Send Change"  CommandParameter="{x:Static Merge:MergeAction.ApplyToTarget}" Command="{Binding ApplyActionCommand}">
     <ribbon:Button.ImageSourceLarge>
        <BitmapImage UriSource="/Images/MAIL.png" />
     </ribbon:Button.ImageSourceLarge>
 </ribbon:Button> 
```

但**只有**ComboBox 会出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:04:09.530

好吧，找到了解决方案：

我对 WPF 很感兴趣，所以我不知道它为什么起作用，但它确实起作用了！

我这样添加了`ItemTemplate`一个`ComboBox`：

```
<ComboBox SelectedValue="{Binding Path=MergeAction}">
  <ComboBox.Items>
    <Merge:MergeAction>Ignore</Merge:MergeAction>
    <Merge:MergeAction>ApplyToWorkingCopy</Merge:MergeAction>
    <Merge:MergeAction>ApplyToTarget</Merge:MergeAction>
  </ComboBox.Items>
  <ComboBox.ItemTemplate>
    <DataTemplate>
      <TextBlock Text="{Binding}"></TextBlock>
    </DataTemplate>
  </ComboBox.ItemTemplate>
</ComboBox> 
```

现在一切都很酷..

但是，...我不明白为什么？

# c# - 如何在 RunTime C# 上创建新类

> ID：11305696
> 
> 赞同：1
> 
> 时间：2012-07-03T06:40:15.853
> 
> 标签：c#, class, runtime

我有这样的xml文件

```
<Student>
    <column Type="String">Name</column>
    <column Type="Int32">Age</column>
 </Student> 
```

我正在使用 VS2008。我不知道运行时的列。即额外的列可以添加到 xml 文件中。

现在我的问题是如何创建这个类并将这个类型（创建的类）存储在（C#）Generics.ie List 等中。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:44:21.207

这真的很难；如果您绝对想将其*作为运行时类*，则必须查看`TypeBuilder`等。坦率地说，除非您已经熟悉它，或者这*非常*重要，否则可能不值得。尤其重要的是：您不能真正针对此类对象进行编码，除了`object`.

您最好的选择可能是使用某种 DOM（`XmlDocument`等`XElement`）来读取数据，但可能会填充到`DataTable`. 我不是`DataTable`常规代码的忠实拥护者，但它确实存在，并且非常适合这种情况。

```
XmlDocument doc = new XmlDocument();
doc.LoadXml(xml);
DataTable table = new DataTable();
foreach(XmlElement child in doc.DocumentElement.SelectNodes("column"))
{
    table.Columns.Add(child.InnerText, ParseType(child.GetAttribute("Type")));
}
....
static Type ParseType(string type)
{
    switch(type)
    {
        case "String": return typeof(string);
        case "Int32": return typeof(int);
        default: throw new NotSupportedException(type ?? "(null)");
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-03T06:48:02.890

首先创建一个名为 Student 的类并使其可序列化，然后添加 2 个属性 Name 和 Age。

然后将xml提供给这个函数

```
public static Object XMLStringToObject(string xml, Type objectType)
{
    object obj = null;
    XmlSerializer ser = null;
    StringReader stringReader = null;
    XmlTextReader xmlReader = null;
    try
    {
        ser = new XmlSerializer(objectType);
        stringReader = new StringReader(xml);
        xmlReader = new XmlTextReader(stringReader);
        obj = ser.Deserialize(xmlReader);
    }
    catch
    {
        //Do nothing for now
    }
    finally
    {
        xmlReader.Close();
        stringReader.Close();
    }
    return obj;
} 
```

还有更多更小的序列化函数，但这只是为了快速向你展示如何序列化你的对象，因为通常你会使用`XMLStringToObject<T>`

# c++ - 64 位 NoBarrier_Store() 未在此平台上实现

> ID：11305698
> 
> 赞同：0
> 
> 时间：2012-07-03T06:40:39.337
> 
> 标签：c++, tcmalloc

“此平台上未实现 64 位 NoBarrier_Store()” 我在 win7 上使用 tcmalloc 和 vs2005。我的应用程序中有两个线程，一个执行 malloc()，另一个执行 free()。当我的应用程序启动时，tcmalloc 会打印这个。调试后，我发现以下函数无法在 _WIN32 上运行，

```
// Return a suggested delay in nanoseconds for iteration number "loop"
static int SuggestedDelayNS(int loop) {
  // Weak pseudo-random number generator to get some spread between threads
  // when many are spinning.
  static base::subtle::Atomic64 rand;
  uint64 r = base::subtle::NoBarrier_Load(&rand);
  r = 0x5deece66dLL * r + 0xb;   // numbers from nrand48()
  base::subtle::NoBarrier_Store(&rand, r);

  r <<= 16;   // 48-bit random number now in top 48-bits.
  if (loop < 0 || loop > 32) {   // limit loop to 0..32
    loop = 32;
  }
  // loop>>3 cannot exceed 4 because loop cannot exceed 32.
  // Select top 20..24 bits of lower 48 bits,
  // giving approximately 0ms to 16ms.
  // Mean is exponential in loop for first 32 iterations, then 8ms.
  // The futex path multiplies this by 16, since we expect explicit wakeups
  // almost always on that path.
  return r >> (44 - (loop >> 3));
} 
```

我想知道如何在win32上避免这种情况。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:54:23.220

它似乎在使用没有内存屏障的原子加载和存储。在某些多 CPU 系统上可能会使这项工作更快一些。

在 x86 上，我们没有这些类型的操作。系统中的其他核心始终可以看到加载和存储。缓存同步是在硬件中实现的，不能被程序控制。

也许`Atomic`使用的库具有没有 NoBarrier 前缀的加载和存储操作？改用那些。

# forms - freemarker 选择标签

> ID：11305701
> 
> 赞同：0
> 
> 时间：2012-07-03T06:41:02.170
> 
> 标签：forms, struts2, freemarker

有没有办法检查 <@s.select 标签> 内的 freemarker <#if> 条件？

例如我需要类似的东西

```
<@s.select id="myId" 
        name="travellerModif[2].type"
        value="${modifiedTraveller.type}"
        list="personTypeOpt" listKey="code" listValue="label"
       <#if modifiedTraveller.modifType == "SUPPRESS">cssClass="hidden"</#if>/> 
```

但这让我犯了错误：

```
 Encountered: &quot;#&quot; (35), after : &quot;&quot; in 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:22:24.697

如果默认`cssClass`值为`""`（或任何已知值），则可以使用布尔格式：

```
<@s.select
        ...
        cssClass=(modifiedTraveller.modifType == "SUPPRESS")?string("hidden", "") /> 
```

否则，您必须使用两个@s.select 调用并将它们放入#if/#else。

# python - Python将非统一行放入字典

> ID：11305702
> 
> 赞同：0
> 
> 时间：2012-07-03T06:41:05.077
> 
> 标签：python, file, dictionary, readline

输入文件如下所示：

```
A 3.00 B 4.00 C 5.00 D 6.00
E 3.20 F 6.00 G 8.22
H 9.00 
I 9.23 J 89.2
K 32.344 
```

我希望字符成为字典中的键，而浮点数是值。

这是我到目前为止的非工作失败。

```
def main():
   #Input File
   reader = open('candidate.txt', 'r'

   my_dictionary = {}
   i=0
   for line in reader.readlines():
      variable = line.split(' ')[i]
      value = line.split(' ')[i+1]
      my_dictionary[variable]= value
      i+=2

      print my_dictionary

if __name__ == '__main__':
  main() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T06:47:07.350

```
s='''A 3.00 B 4.00 C 5.00 D 6.00
E 3.20 F 6.00 G 8.22
H 9.00 
I 9.23 J 89.2
K 32.344
'''

s=s.split()
d=dict(zip(s[::2], s[1::2]))
print d 
```

* * *

在上下文中：

```
my_dict = dict()
for line in reader.readlines():
    pairs = line.split()
    for key, value in zip(pairs[::2],pairs[1::2]):
        my_dict[key] = value # strip() not needed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:38:16.230

```
with open('candidate.txt', 'r') as reader:
    print dict(zip(*[iter(reader.read().split())]*2)) 
```

`With`打开的文件流将`reader`其`read`称为一个整体，然后`split`按空格将其分段。现在我们有一个单词列表，我们将其转换为一个`iter`ator 并将其放入一个列表中并乘以它`2`来生成一个包含两个相同迭代器的列表。这些被`zip`输入成对作为离子的输入`dict`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T07:02:09.540

这是一个使用迭代器的解决方案，它对流进行操作（因此不依赖于首先读取整个输入）：

```
from itertools import izip

def group(iterable, n):
    """Yield iterable's items n at a time"""
    args = [iter(iterable)]*n
    return izip(*args)

def dictize(stream):
    r = {}
    for line in stream:
        for k,v in group(line.split(), 2):
            r[k] = v
    return r

from StringIO import StringIO

testinput = """A 3.00 B 4.00 C 5.00 D 6.00
E 3.20 F 6.00 G 8.22
H 9.00 
I 9.23 J 89.2
K 32.344"""

teststream = StringIO(testinput)

print dictize(teststream) 
```

如果您可以使用字典推导，则可以用`dictize`单行替换该函数：

```
print {k:v for line in teststream for k,v in group(line.split(),2)} 
```

# dll - VB6 应用程序中的非 activeX DLL 无法在 Outlook 2010 中加载

> ID：11305705
> 
> 赞同：2
> 
> 时间：2012-07-03T06:41:23.627
> 
> 标签：dll, com, vb6, outlook

我有一个使用非 activeX DLL（非注册）的 VB6 应用程序。

它是通过经典`Public Declare Function "Function Name" Lib "Library.DLL"`语法声明的。

在我的开发机器 (XP) 上它工作正常，但是当我部署到 Vista 或 Win7 时，我经常收到运行时错误 48 - 找不到相关 DLL 的文件。

我尝试将该 DLL 复制到我能想到的每个目录，包括测试机器上的每个环境路径和应用程序路径。

这些都是 32 位测试环境，因此不是 SysWow64 问题。

有问题的应用程序是 Outlook COM 插件，这可能是一个问题。

我设法在 Win7 上安装了 VB6，并且能够运行一个利用这个 DLL（在 Outlook 进程之外）的小型示例应用程序，所以我知道它可以工作，前提是 DLL 位于应用程序路径中。如果我`App.Path`在测试环境中运行它时从我的 DLL 中调用它，毫无疑问，我的安装目录会显示，但是 DLL 在那里。

我尝试关闭 UAC。我尝试使`App.Path`目录权限对所有人开放，但仍然没有骰子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:20:41.783

根据您提供的详细信息，将 DLL 放置在标准[加载项位置](http://support.microsoft.com/kb/286897)的路径中似乎会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:15:06.140

我相信 DLL 搜索首先查找的是加载 EXE 的目录，因此不会使用您的 DLL 的 App.Path。

您确定您尝试将此 DLL 安装到 System32 中吗？进入Windows？

除此之外，您应该能够为调用代码（如果我在关注您，则为 VB6）创建一个 PATH（混乱）或隔离清单，指定 DLL 重定向到相对路径（即带有您的 VB6 代码的文件夹下的子文件夹在里面）。

请参阅[动态链接库搜索顺序](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682586%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T09:16:27.497

您可能需要检查 DLL 自身的依赖关系。如果它无法加载有问题的 DLL 或依赖链深处的某些 DLL 20 级别，您将收到相同的错误。

# ruby-on-rails - Rails - 添加一个下拉选择以使用 db update on change 进行索引

> ID：11305706
> 
> 赞同：0
> 
> 时间：2012-07-03T06:41:26.187
> 
> 标签：ruby-on-rails, database, select, drop-down-menu

我之前在表单中添加了下拉选择，但无法让它们在索引视图中工作。我已经阅读了有关此的 API，但无法正常工作。

基本上，我在索引视图中有一个所有任务的列表。我在迁移中将数据库中的默认值设置为“否”。我希望能够遍历所有任务并显示一个下拉选择，其中包含选项 no、yes 和部分。然后我希望能够让数据库在选择时更新该任务的字段。

我无法让下拉菜单工作 - 每当我尝试使用 task.select 时，它都会说 select 是一种私有方法。抱歉，我对 Rails 还很陌生 - 任何人都可以提供的任何帮助都会很棒！如何使下拉菜单起作用，如何确保在更改值时更新数据库？

谢谢！

查看代码（这是我到目前为止所拥有的） - 任务/索引：

```
<table class="table table-striped table-bordered">
  <tr>
    <th>Name</th>
    <th>Category</th>
    <th>Notes</th>
    <th>Completed?</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @tasks.each do |task| %>
  <tr>
    <td><%= task.name %></td>
    <td><%= task.category %></td>
    <td><%= task.notes %></td>
    <td><%= task.select :complete, ['No','Yes','Partly'], :selected => 'No' %></td>
    <td><%= link_to 'Show', task %></td>
    <td><%= link_to 'Edit', edit_task_path(task) %></td>
    <td><%= link_to 'Delete', task, confirm: 'Are you sure?', method: :delete %></td>
  </tr>
<% end %>
</table> 
```

更新：

经过更多研究，我更改了代码行：

```
<td><%= task.select :complete, ['No','Yes','Partly'], :selected => 'No' %></td> 
```

到：

```
<% form_for task do |f| %>
    <td><%= select :task, :complete, [ ["Yes",2], ["Partly",1], ["No",0]] %></td>
<% end %> 
```

当我尝试加载页面时，这已经停止抛出错误，但是，“表单”应该在哪里 - 并且源代码中没有任何内容，这些行被跳过。如何将此表格显示出来，如何在更改选择时将其更改数据库？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:45:54.007

我认为您正在寻找的是一个form_for，然后是一个f.select。您需要先创建表单，然后 f.select 是下拉菜单。像这样的东西：

```
form_for task do |f|
  f.select("task", "category", Post::CATEGORIES, {:include_blank => true})
end 
```

将 Post::CATEGORIES 替换为下拉列表的选项列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:41:04.673

假设`Post::CATEGORIES = ["No", "Yes", "Partly"]`

这取决于您`task.category`在数据库中的存储方式。

**如果是 (0, 1, 2) 中的整数**

```
form_for task do |f|
  f.select :category, Post::CATEGORIES.map { |c| [c, Post::CATEGORIES.index(c)] }, :selected => task.category, :include_blank => true
end 
```

**如果是 ("No", "Yes", "Partly") 中的字符串**

```
form_for task do |f|
  f.select :category, Post::CATEGORIES, :selected  => task.category, :include_blank => true
end 
```

为了能够对您的模型进行更改，您当然需要以某种方式提交表单。您可以对所有记录使用一种表格：

1.  一个提交按钮：您需要更改表单和更新控制器以接收多个任务
2.  每个任务的表单带有多个提交按钮：您的用户每次更改类别时都需要提交
3.  每次用户更改类别时使用 AJAX 提交。

祝你好运

# c++ - 使用比较运算符比较数组

> ID：11305718
> 
> 赞同：1
> 
> 时间：2012-07-03T06:42:07.857
> 
> 标签：c++, arrays

这只是一个小问题，更多的是为了理解数组的使用而不是解决一个难题。

我目前有一个由四个整数（邻居）组成的数组，我想将其与一组其他数组（在其他任何地方都不存在 - 我不需要存储它们）进行比较。我想知道四个数组 Neighbors 中的哪一个是相同的。作为一个不知道更好的人，我的第一次尝试是这样做：

```
if (Neighbors == {1, 1, 0, 0})
{
    //code...
}
else if (Neighbors == {0, 1, 1, 0})
{
    //code...
}
else if (Neighbors == {0, 0, 1, 1})
{
    //code...
}
else if (Neighbors == {1, 0, 0, 1})
{
    //code...
} 
```

如您所见，整数的顺序很重要。但是，上面返回的编译器错误是关于在花括号标记之前需要主表达式。

所以相反，我尝试了这个：

```
int Sets[4][4] = { {1, 1, 0, 0}, {0, 1, 1, 0}, {0, 0, 1, 1}, {1, 0, 0, 1} };
if (Neighbors == Sets[0])
{
    //code...
}
else if (Neighbors == Sets[1])
{
    //code...
}
else if (Neighbors == Sets[2])
{
    //code...
}
else if (Neighbors == Sets[3])
{
    //code...
} 
```

这里发生的情况是，即使`Neighbors = {0, 1, 1, 0}`（例如）`Neighbors == Sets[1]`返回 false。

现在，在这样做并想知道为什么之后，我记得数组变量基本上是指向序列中第一个元素的指针。正确的？所以我想我明白了为什么上面的代码不起作用 - 我正在比较两个内存地址，而不是两个数组。所以我写了这段代码，它工作得很好：

```
 for (int ii = 0; ii < 4; ++ii)
    {
        bool Same = true;
        for (int jj = 0; jj < 4; ++jj)
        {
            if (Neighbors[jj] != Set[ii][jj])
            {
                Same = false;
            }
        }

        if (Same == true)
        {
            //code...
        }
    } 
```

我想知道的是是否有一种方法可以在不经过两个 for 循环的情况下比较这样的数组。看起来应该比这更简单。我知道当你只有 4 个值时，for 循环并不是特别密集，但我仍然认为确定两个数组是否包含相同的信息会更容易。如果每个数组都是一个连续的内存块，我会认为您可以只查看这两个块并检查它们是否相同（这基本上是 for 循环正在做的事情，尽管这需要手动执行）。

那么有没有办法直接比较数组的内容，最好用一行代码呢？如果不是，为什么不呢？我想了解这个问题背后的科学。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T06:54:12.247

做到这一点的 C++iest 方法是使用[std::equal](http://en.cppreference.com/w/cpp/algorithm/equal)：

```
#include <algorithm> 
```

使用 C++11：

```
if (std::equal(begin(Neighbors), end(Neighbors), begin(Sets[0]))
{ /* then they're equal */ } 
```

使用 C++03：

```
if (std::equal(Neighbors, Neighbors + 4, Sets[0]))
{ /* then they're equal */ } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T06:51:34.393

您已标记问题 C++。这意味着您应该使用`std::vector`. 它已经重载[`operator==`](http://en.cppreference.com/w/cpp/container/vector/operator_cmp)了你想要的（对于两个向量）。

您还可以将[`std::equal`](http://en.cppreference.com/w/cpp/algorithm/equal)or[`std::lexicographical_compare`](http://en.cppreference.com/w/cpp/algorithm/lexicographical_compare)用于您有迭代器的任何东西，包括原始数组。

当然你也可以重载`operator==`其他的东西。不幸的是，您不能为原始数组重载它，因为仅当至少一个参数是类（或结构）类型时才允许重载运算符。但是您可以覆盖它以将向量与数组进行比较。就像是：

```
template<typename T, typename Alloc, size_t S>
bool operator==(std::vector<T, Alloc> v, const T (&a)[S])
{
    return v.size() == S && std::equal(v.begin(), v.end(), a);
} 
```

（这引用了未降级为指针的数组，以首先检查它的声明大小，因此是安全的）

当然，所有这些方法都有一个隐藏在内部的循环，用于逐个比较元素。但你不必写它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T06:44:31.437

你可以使用`memcmp`函数。如果数组相等，则返回 0。这是一个描述：[http ://www.cplusplus.com/reference/clibrary/cstring/memcmp/](http://www.cplusplus.com/reference/clibrary/cstring/memcmp/)

# javascript - 在长按 iOS 上显示菜单 - Phonegap

> ID：11305719
> 
> 赞同：1
> 
> 时间：2012-07-03T06:42:09.940
> 
> 标签：javascript, iphone, cordova

我是phonegap的新手。我有一个排列为网格（3 * 5）的图像列表。我需要的是当长按此图像（网格）时应显示一个弹出窗口。我该如何实施？谁能帮我解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T12:19:57.880

您可能想要实施 jQuery Mobile 来解决您的问题...

```
$( "img.galleryImage" ).on( 'taphold', function() {
    //Do your stuff here...
}); 
```

[在这里](http://api.jquerymobile.com/taphold/)查看 jQuery Mobile 文档。

您还可以设置调用操作的持续时间。

# spring - 能够避免多次加载同一个弹簧文件

> ID：11305731
> 
> 赞同：2
> 
> 时间：2012-07-03T06:43:14.430
> 
> 标签：spring

当将一个大的 spring 文件分解为较小的配置文件时，我们有时会错误地导入同一个文件两次。虽然大多数时候这不是问题，但当您涉及命名空间处理程序和自动代理时，它就会成为问题。在许多情况下，存在 InstanceAlreadyExistsException 和双重代理。有没有一种方法可以强制加载具有名称的文件一次且仅加载一次。如果没有现成的方法，有人可以指出我可以提出一个可以做到这一点的补丁的起点吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:13:58.827

我的一位同事指出，在[SPR-1142](https://jira.springsource.org/browse/SPR-1142)中提出了一些可以做到这一点的东西。

# sql - 如何解决sql作业中的登录问题？

> ID：11305734
> 
> 赞同：0
> 
> 时间：2012-07-03T06:43:20.143
> 
> 标签：sql, sql-server

我已经配置了一个 sql 作业，它备份数据库，然后在另一个步骤中将它们传输到远程位置。在命令提示符下，我的命令工作正常，但是当我在作业中安排这个时，我发现了错误：

**以用户管理员身份执行。登录失败 未知用户名或错误密码。0文件已复制。进程退出代码 0。步骤成功。**

我想解决这些问题，我也希望如果确实被转移，那么作业应该报告失败，但它不会显示任何此类消息。

我只想在没有文件被复制时，即 0File(s) 被复制。它应该通知失败的工作。

谢谢

尼特什·库马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:59:53.073

一种方法是使用 a`Script Task`检查是否有要复制的文件。如果有，则该过程可以继续，如果没有，则该步骤可能导致错误。你通过添加来做到这一点

> Dts.TaskResult = (int)ScriptResults.Failure;

到脚本任务逻辑的结尾。

无论如何，我不知道你的包装设计，所以可能有更合适的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T05:34:19.727

问题已解决。由于远程位置文件夹是共享的，并且每个人都可以访问。我的命令在命令提示符下运行良好，甚至任何用户都能够在该位置创建自己的文件，并且还能够从该位置删除文件。

该问题与用户有关。我的工作由**servername\administrator**执行，并且 由于发生密码错误错误而更改了远程位置**管理员密码。**我告诉我的 IT 团队这个问题，他们将服务器密码重置为旧密码，我的工作开始正常工作。

问题解决了。

我只是想知道我的 sql 作业如何在我浏览我的作业脚本时验证服务器登录，但发现没有任何关于身份验证的帮助。

谁能给我解释一下。

谢谢

尼特什·库马尔

# ios - UIImageView 在更新 UILabel 时消失

> ID：11305741
> 
> 赞同：2
> 
> 时间：2012-07-03T06:43:54.563
> 
> 标签：ios, xcode, uiimageview, uibutton, uilabel

我有一系列 UIButtons 用于更新几个 UILabel 并启动对象从屏幕外到屏幕上的动画。进展是这样的。按钮 1 和 2 是可见的，当用户按下按钮时，UILabel 会更新，并且新的 UIImageView 会在屏幕上显示动画。这在第一次迭代中运行良好，在第二轮中，隐藏的按钮 3 和 4 变得可见。一旦用户选择按钮 3 或 4，另一个 UIImageView 应该动画到屏幕上（在其他图像的顶部......“堆叠”它们）。正在发生的是 UIImageView 在用户按下按钮 1 或 2 后动画，消失，并且没有动画。仅当 UILabel 必须根据按钮选择进行更新时才会发生这种情况。在 UILabel 中不需要更新，动画效果很好。

相关代码：

```
-(IBAction)didTapSizeButton:(id) sender {

if ([sender tag] == 1) {
    sizeLabel.text = @"12 oz";
}
else if ([sender tag] == 2) {
    sizeLabel.text = @"24 oz";
}

if (coasterTwo.center.x != 150) {

    [UIView animateWithDuration:0.35
                          delay:0
                        options:(UIViewAnimationOptionCurveEaseOut)
                     animations:^{
                         coasterTwo.center = CGPointMake(150, 220);

                     } completion:^(BOOL finished) {

                     }];

}

containerOne.hidden = NO;
containerTwo.hidden = NO;

}

-(IBAction)didTapContainerButton:(id)sender {

if ([sender tag] == 3) {
    containerLabel.text = @"Bottle";
}

else if ([sender tag] == 4) {
    containerLabel.text = @"Can";
}

if (coasterTwo.center.x == 150 && coasterThree.center.x != 150) {

    [UIView animateWithDuration:0.35
                          delay:0
                        options:(UIViewAnimationOptionCurveEaseOut)
                     animations:^{
                         CGPoint center = coasterThree.center;
                         center.x += 305;
                         coasterThree.center = center;

                     }
                     completion:^(BOOL finished){

                     }];

}

} 
```

一旦我返回更新 UILabel，UIImageViews 显然会重置到它们的起始位置......我只是不知道如何防止这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:03:01.690

我的一个学生也发生了同样的事情。为了证明你不会发疯...尝试在 iOS 5.x 模拟器中运行它（并希望观察到所需的行为）。

对于 iOS 6，你要么必须为你的 UIView 编写一些状态保存代码——或者——如果你还没有爱上它们并且认为没有它们就活不下去——摆脱在通过在文件检查器中取消选中“使用自动布局”来查看 xib 文件。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T17:25:29.770

必须有一些简单的东西。正如我所说，代码`didTapContainerButton`似乎很可疑（每次你点击它`coasterThree`都会向右移动 305 个点），但上面没有显示任何内容会*导致*`coasterTwo`消失。唯一会这样做的是，如果 (a) 某些 IB 链接被弄乱了（尽管尚不清楚当您按下按钮 3 或 4 时这会如何导致图像消失）；(b) 您没有显示的代码可能会隐藏它；或（c）您的窗口上有一些隐藏它的其他控件（我肯定见过更新标签导致它被带到前面的情况，掩盖它后面的东西......你可以通过以下方式诊断它使标签具有透明背景，明确地将图像移动到前景，或者尝试将 alphas 设置为 0.5，以便在调试时可以看穿东西）。

要诊断第一种可能性，您必须将您的项目上传到 DropBox 或其他东西，我们可以看看它（如果您愿意这样做......如果没有，请复制您的项目，摆脱任何机密/专有信息，然后上传）。

要诊断第二种可能性，您可以使用视图控制器的 .m 文件的完整代码更新您的问题。

要诊断这第三种可能性，您可以确保在制作图像动画之前将其向前移动（在制作过山车三动画之前，请执行此操作`[self.view bringSubviewToFront:coasterThree];`）。您还可以确保`backgroundColor`所有控件（如果您有任何已在 IB 中添加的容器 UIViews，它们也是）是透明的`[UIColor clearColor]`。您也可以，仅出于诊断目的，暂时降低 alpha 以便您可以看穿它们（因此，如果有任何东西阻挡了其他东西（您可以在 IB 中执行此操作，单击主 UIView 背景，按`command`+`A`选择所有控制，并将 alpha 更改为 0.5)。

底线，我会追求选项 3，如果你没有运气，要么分享你的项目，要么分享一个全面的代码示例。如果你觉得这样做不舒服，我可能会建议你扔掉你的旧 NIB 并从头开始重建它（以防你有什么奇怪的东西）或者开始构建一个全新的测试项目，你可以在其中逐步重新实现你的用户界面，看看你是否能找出哪里出了问题。

但是没有什么与 UIImageViews 动画和设置 UILabel 文本值不一致的地方。下面我有两个按钮的代码，两个动画开和关的图像，以及一个更新的标签，一切都很好。（我有信心危机：我开始担心与 UILabel 和动画有一些奇怪的交互。） 叹息。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    CGPoint center;

    self.label.text = @"";

    // move image 1 (dog image) off screen to the left

    center = self.image1.center;
    center.x = -0.5 * self.view.frame.size.width;
    self.image1.center = center;
    self.image1.hidden = YES;

    // move image 2 (cat image) off screen to the right

    center = self.image2.center;
    center.x = 1.5 * self.view.frame.size.width;
    self.image2.center = center;
    self.image2.hidden = YES;

    // Do any additional setup after loading the view.
}

// if you hit button 1 (dog) button, change label, and animate the dog image on and cat image off

- (IBAction)button1:(id)sender 
{
    self.label.text = @"Dog";

    self.image1.hidden = NO;

    [UIView animateWithDuration:0.5 
                     animations:^{
                         CGPoint center;

                         // move image 1 (dog image) onscreen

                         center = self.image1.center;
                         center.x = 0.5 * self.view.frame.size.width;
                         self.image1.center = center;

                         // move image 2 (cat image) off screen to the right (if it's not there already)

                         center = self.image2.center;
                         center.x = 1.5 * self.view.frame.size.width;
                         self.image2.center = center;
                     }];
}

// if you hit button 2 (cat) button, change label, and animate the dog image off and cat image on

- (IBAction)button2:(id)sender 
{
    self.label.text = @"Cat";

    self.image2.hidden = NO;

    [UIView animateWithDuration:0.5 
                     animations:^{
                         CGPoint center;

                         // move image 1 (dog image) off screen to the left

                         center = self.image1.center;
                         center.x = -0.5 * self.view.frame.size.width;
                         self.image1.center = center;

                         // move image 2 (cat image) on screen

                         center = self.image2.center;
                         center.x = 0.5 * self.view.frame.size.width;
                         self.image2.center = center;
                     }];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T07:07:51.040

我建议使用静态 UIView commitAnimations 方法，因为您不需要完成块：

```
[UIView beginAnimations:nil context:nil];
//Code for changing frames / alpha / anything else that is animatable
[UIView commitAnimations]; 
```

试试这个，看看是否有帮助。

# c++ - 我在 C++ 中得到错误未解决的重载函数类型

> ID：11305742
> 
> 赞同：2
> 
> 时间：2012-07-03T06:43:56.897
> 
> 标签：c++, boost

为什么会有这样的代码：

```
boost::bind (SomeFunc<float>, function arguments go here); 
```

产生这个错误：

```
no matching function for call to bind(<unresolved overloaded function type> 
```

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T06:47:10.753

可能是您的函数`SomeFunc<float>`重载，在这种情况下`boost::bind`无法处理。您必须实施手动解决方案，请参阅[此处](http://www.boost.org/doc/libs/1_50_0/libs/bind/bind.html#err_overloaded)了解更多详细信息：

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T06:52:35.743

如果不明确，您需要使用 a`static_cast`告诉编译器选择哪个重载，例如：

```
#include <boost/bind.hpp>

void foo(int) {}
void foo(double) {}

int main() {
  boost::bind(static_cast<void(*)(int)>(&foo), _1);
} 
```

有时*“未解决的重载函数类型”*可能意味着“没有一个重载是可行的”，在这种情况下，您需要弄清楚为什么它不能使用任何重载并修复它。

# php - 需要将日期放在引号内

> ID：11305752
> 
> 赞同：0
> 
> 时间：2012-07-03T06:44:31.333
> 
> 标签：php

我正在尝试将日期传递给计算一个人年龄的函数。但是，数据库中的日期是 Ymd 格式，我需要以“Ymd”格式传递它。我尝试过字符串连接，但失败了，可能是因为它只是使用减号（-）运算符来操作数字。请让我知道如何做同样的事情。

我在 $dob 变量中获取 DOB，并将其传递给 CalculateAge($dateofbirth) 函数

这是代码：

```
function CalculateAge($BirthDate)
{
        // Put the year, month and day in separate variables
        list($Year, $Month, $Day) = explode("-", $BirthDate);

    //echo $Year;       

        $YearDiff = date("Y") - $Year;
        // If the birthday hasn't arrived yet this year, the person is one year younger
        if(date("m") < $Month || (date("m") == $Month && date("d") < $Day))
        {
                $YearDiff--;
        }
    if(date("m") > $Month || date("m") == $Month)
        $MonthDiff = date("m") - $Month;
    else
        $MonthDiff = 12 - $Month + date("m");

    $age = $YearDiff + $MonthDiff/12;
        return $age;
}
$dob = mysql_query("SELECT date_of_birth FROM kids_informations WHERE user_id = '$usid'");  
$rs = CalculateAge($dob); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:47:36.863

用这个：`echo date("\"Y-m-d\"");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:54:25.710

这可能会奏效-

```
$result = mysql_query("SELECT date_of_birth FROM kids_informations WHERE user_id = '$usid'");  

while($row = mysql_fetch_array($result))
{
   $dob = $row['date_of_birth'];
}

$dob = "\"".$dob."\"";

$rs = CalculateAge($dob); 
```

# php - codeigniter 视图未在带有参数的构造函数中加载

> ID：11305756
> 
> 赞同：0
> 
> 时间：2012-07-03T06:44:46.683
> 
> 标签：php, codeigniter, openx

我正在尝试使用参数 $data 从构造函数加载视图。早些时候它工作正常，现在突然停止工作。下面是代码：

## 权限错误查看

```
 <table width="100%" border="0" cellpadding="0" cellspacing="0">
              <tr>
                <td width="6" align="left" valign="top" background="<?php echo base_url();?>images/bg/topbg.gif"><img src="<?php echo base_url();?>images/bg/top-left.gif" width="5" height="34" /></td>
                <td height="34" align="left" valign="middle" background="<?php echo base_url();?>images/bg/topbg.gif" class="heading">Access Forbidden</td>
                <td width="6" align="right" valign="top" background="<?php echo base_url();?>images/bg/topbg.gif"><img src="<?php echo base_url();?>images/bg/top-right.gif" width="5" height="34" /></td>
              </tr>
              <tr>
                <td align="left" valign="top" background="<?php echo base_url();?>images/bg/main-content-bg-left.gif">&nbsp;</td>
                <td height="165" valign="top"  bgcolor="#FFFFFF" class="leftredheading"><div style="margin:30px auto;padding-left:15px"><? if(isset($sn_error)) echo $sn_error;?></div></td>
                <td align="right" valign="top" background="<?php echo base_url();?>images/bg/main-content-bg-right.gif">&nbsp;</td>
              </tr>
              <tr>
                <td align="left" valign="bottom" background="<?php echo base_url();?>images/bg/bottom-bg.gif"><img src="<?php echo base_url();?>images/bg/bottom-left-corner.gif" width="5" height="5" /></td>
                <td valign="top" background="<?php echo base_url();?>images/bg/bottom-bg.gif"></td>
                <td align="right" valign="bottom" background="<?php echo base_url();?>images/bg/bottom-bg.gif"><img src="<?php echo base_url();?>images/bg/bottom-right-corner.gif" width="5" height="5" /></td>
              </tr>
            </table>

Template code:

<?php $this->load->view('includes/login/header'); ?>
<table width="100%" border="0" cellpadding="0" cellspacing="0" bgcolor="#e7e7de">
  <tr>
    <td width="18"><img src="<?php echo base_url();?>images/bg/zero.gif" width="18" height="1" /></td>
    <td width="191"><img src="<?php echo base_url();?>images/bg/zero.gif" width="191" height="1" /></td>
    <td width="18"><img src="<?php echo base_url();?>images/bg/zero.gif" width="18" height="1" /></td>
    <td width="100%">&nbsp;</td>
    <td width="161"><img src="<?php echo base_url();?>images/bg/zero.gif" width="18" height="1" /></td>
    <td width="191"><img src="<?php echo base_url();?>images/bg/zero.gif" width="191" height="1" /></td>
    <td width="18"><img src="<?php echo base_url();?>images/bg/zero.gif" width="18" height="1" /></td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td align="left" valign="top"><table width="191" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td background="<?php echo base_url();?>images/bg/left-menu-white-bg.gif"> <?php $this->load->view('includes/login/top_right'); ?> </td>
      </tr>
      <tr>
        <td height="50" background="<?php echo base_url();?>images/bg/left-menu-white-bg.gif">&nbsp;</td>
      </tr>
      <tr>
        <td background="<?php echo base_url();?>images/bg/left-menu-white-bg.gif"><table width="166" border="0" align="center" cellpadding="0" cellspacing="0">
          <tr>
            <td align="left" valign="top"><img src="<?php echo base_url();?>images/bg/needhelp-top.gif" width="166" height="7" /></td>
          </tr>
          <tr>
            <td align="center" valign="top" bgcolor="#F8F7EC"> <?php $this->load->view('includes/login/bottom_right'); ?>
                <br /></td>
          </tr>
          <tr>
            <td align="left" valign="top" bgcolor="#F8F7EC"><img src="<?php echo base_url();?>images/bg/needhelp-bottom.gif" width="166" height="7" /></td>
          </tr>
        </table>
          <br /></td>
      </tr>
      <tr>
        <td background="<?php echo base_url();?>images/bg/left-menu-white-bg.gif"><table width="191" border="0" cellspacing="0" cellpadding="0">
          <tr>
            <td height="6" align="left" valign="top"><img src="<?php echo base_url();?>images/bg/left-bttom.gif" width="6" height="6" /></td>
            <td width="100%" background="<?php echo base_url();?>images/bg/leftbottom.gif"></td>
            <td height="6" align="right" valign="top"><img src="<?php echo base_url();?>images/bg/right-bttom.gif" width="6" height="6" /></td>
          </tr>
        </table></td>
      </tr>
    </table>
         <br /></td><td>&nbsp;</td>
    <td valign="top"  <? if($main_content != 'dashboard' || $main_content == 'publisher_dashboard') { ?> colspan="3" <? } ?>><?php $this->load->view($main_content); ?></td>
    <td>&nbsp;</td>
    <? if($main_content == 'dashboard' || $main_content == 'publisher_dashboard') { ?>
    <td align="right" valign="top"> <?php $this->load->view('includes/login/left'); ?>
    </td>
    <? } ?>
    <td>&nbsp;</td>
  </tr>
</table>
<?php $this->load->view('includes/login/footer'); ?> 
```

在上面的代码中，我正在检查登录用户是否具有访问权限，然后通过 if case 块中的错误执行 else 部分。

在 IF 情况下，它会加载错误模板。

请有人帮我尽快解决上述问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:23:48.733

打电话`parent::__construct()`，不是`parent::Controller()`。

编辑：

在明确使用 CodeIgniter 1.7.1 并显示视图本身之后，这是您的问题：

您的视图尝试回显`$error`而不是`$sn_error`. 如果您不传递`$data`给视图，则`$sn_error`（已检查）未设置并且不会发生该错误 - 这就是在这种情况下加载视图的原因。

# c# - 从代码后面调用驻留在类中的 Linq To SQL 查询。

> ID：11305761
> 
> 赞同：1
> 
> 时间：2012-07-03T06:45:09.943
> 
> 标签：c#, asp.net, linq-to-sql

我正在使用`ASP.NET Web Forms/C#`。我有一个页面`Customer.aspx`。我创建了`CustomerBLL`类，我计划在其中使用`Linq To SQL`查询来执行所有`database`相关任务。

考虑这个例子。这是`GetDateFormat()`在我的`CustomerBLL`类中调用的一个方法，它从 .Here 中返回日期格式。这`database`是代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data;

namespace CwizBankApp
{
    public class CustomerBLL
    {
        public string GetDateFormat()
        {
            using (var db = new DataClasses1DataContext())
            {
                var format = db.CODEs.Where(code => code.NAME.Equals("dateformat")).SingleOrDefault();  
                return format.DRNAME;   
            }
        }

    }
} 
```

从`code behind`我在这样的另一个函数中调用这个函数。

```
public void RetrieveDateFormat()
        {
            //In this function we retrieve the date format
            //from the database to identify if it is british or american

           var format = CustomerBLL.GetDateFormat();  

            //The global variable gDateFormat stores the format
           if (format != null)
           {
               Global.DateFormat = format;
           } 
```

我正在调用函数并首先存储结果，然后检查它是否为空。我应该这样做还是应该检查`CustomerBLL.cs`文件本身是否为空？

有什么更好的方法来做到这一点。我调用函数的方式是否`GetDateFormat()`可行。

`Linq`这种在此类文件中维护查询然后调用它们的`code behind` 方法是否被认为是一种好习惯？

有人能告诉我我是否朝着正确的方向前进吗？

欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:00:21.480

这里有几个很好的例子，说明如何将存储库粘贴与 Web 表单一起使用

[http://msdn.microsoft.com/en-us/library/ff649690.aspx](http://msdn.microsoft.com/en-us/library/ff649690.aspx)

[http://forums.asp.net/t/1808905.aspx/1?Repository+Architecture+Using+WebForm+in+C+With+N+Tier+Architechure](http://forums.asp.net/t/1808905.aspx/1?Repository+Architecture+Using+WebForm+in+C+With+N+Tier+Architechure)

[http://code.google.com/p/nhibernate-repository-example/](http://code.google.com/p/nhibernate-repository-example/)

[http://www.expertblogon.net/post/2011/11/23/CSharp-Repository-Pattern-Design-Patterns-in-Action.aspx](http://www.expertbloggingon.net/post/2011/11/23/CSharp-Repository-Pattern-Design-Patterns-in-Action.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T06:46:56.130

Your way of calling the function is ok. However, you should check for null within CustomerBLL.cs.

# c - 为什么共享库路径在可执行文件中硬编码？

> ID：11305767
> 
> 赞同：4
> 
> 时间：2012-07-03T06:45:40.097
> 
> 标签：c, linux, gcc

最近我得到了一个测试二进制文件。当我使用 objdump 检查它时，我观察到它包含硬编码的库路径。为什么需要像这样对路径进行硬编码？路径不应该取自 SHELL 环境变量或 -L 参数吗？

> objdump -p 测试程序

输出包括共享库的硬编码路径：

```
....
  NEEDED      /home/test/lib/liba.so
  NEEDED      /home/test/lib/libb.so
  NEEDED      /home/test/lib/libc.so
.... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T07:21:07.097

这可能是因为这三个`.so`文件在构建测试程序的主机上没有 SONAME。告诉构建它的人用其他两个类似的方式重建它`liba.so`，`-Wl,soname,liba.so`然后重新链接主程序。

# wcf - 同时使用其余端点和肥皂端点时。我需要将肥皂设为默认值吗？

> ID：11305769
> 
> 赞同：0
> 
> 时间：2012-07-03T06:45:48.177
> 
> 标签：wcf, web-services, rest, soap, service

我需要使用soap端点作为默认端点，因为我不需要打扰现有用户。我应该在配置中做哪些更改？

我有两个端点，一个用于肥皂，一个用于休息服务。我尝试创建两个单独的服务，但仍然没有工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:24:36.820

这是一个示例：

```
<endpoint address="json/mycontract" behaviorConfiguration="webBehavior" binding="webHttpBinding" contract="MyContract" />
<endpoint address="soap/mycontract" binding="basicHttpBinding" contract="MyContract" /> 
```

从客户端的角度来看，没有默认端点之类的东西。客户端确实使用所需的端点来使用服务合同。

# jquery - Safari 使用 jquery mobile 和 ZEND 会话缓存 html 页面

> ID：11305771
> 
> 赞同：0
> 
> 时间：2012-07-03T06:45:53.510
> 
> 标签：jquery, zend-framework, jquery-mobile, safari, browser-cache

嗨，我有以下 php 代码

```
 if($this->sess->loggedIn == 1){
      $this->_redirect("Queue/index");
 } 
```

我在这里做的是检查如果用户登录并按下后退按钮。我再次将他发送到主页。这适用于除 safari 之外的所有浏览器，但 safari 执行所有服务器端代码而不是重定向。如果我刷新页面，重定向也可以工作，因为我的会话已设置。我认为 safari 从缓存中加载页面。有没有办法解决这个问题。我正在使用 jquery 手机

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:27:55.360

我按照这两个步骤解决了这个问题

1.  将 Safari 更新到最新版本

添加

```
<body onunload=""> 
```

这将阻止浏览器缓存页面

# java - 通过 JSON 将 Android 应用程序连接到 Java 服务器

> ID：11305773
> 
> 赞同：0
> 
> 时间：2012-07-03T06:45:58.737
> 
> 标签：java, android, json, http

我正在创建一个 android 应用程序，它在 MSSQL 数据库中存储诸如“名称”“纬度”“经度”之类的数据。

我打算将 android 应用程序连接到服务器，然后连接到 mssql 数据库服务器。

我已经很好地建立了 Java -> MSSQL 连接，并且可以毫无问题地读取/写入数据。

现在我希望能够在 java 服务器和 android 应用程序之间发送/接收这些对象。

我创建了“file.json”并将其存储在包含以下内容的 Web 服务器上：

```
{"name":"shopname","address":"123 fake street","type":"unknown", "notes":"service is really good."} 
```

我可以毫无问题地将这些数据拉回到一个对象中。

我的问题是：

如何让 java 服务器将此数据提供给我的 android 应用程序？我希望能够使用：

```
URL objectGet = new URL("http://10.0.1.8/file.json");
    URLConnection yc = objectGet.openConnection();
    BufferedReader in = new BufferedReader(
            new InputStreamReader(
            yc.getInputStream())); 
```

接着

```
DataObject objs = gson.fromJson(in, DataObject.class); 
```

设置它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:01:59.537

请参考我在这篇文章中的回答。[为什么在android中的json解析中返回空值？](https://stackoverflow.com/questions/11293331/why-null-value-returns-in-json-parsing-in-android/11293894#11293894)

这可能会对您有所帮助。最好的方法是：

*   使用 read() 函数连接到服务器并从服务器获取 JSON 字符串
*   使用 GSON fromJson 函数将读取的数据解析到您的对象实例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-24T17:53:15.900

要测试您的应用程序，您可以通过 IIS 或 Apache 在您的开发机器上托管服务，然后通过

```
http://10.0.2.2/file.json 
```

10.0.2.2 是主机环回接口的特殊别名（即开发机器上的 127.0.0.1）

请参阅： 官方文档中的[仿真器网络地址空间](http://developer.android.com/tools/devices/emulator.html#networkaddresses "网络地址空间")

# c++ - C++ 通过引用和强制转换传递对象

> ID：11305776
> 
> 赞同：2
> 
> 时间：2012-07-03T06:46:03.477
> 
> 标签：c++

我有一个基类的对象，它实际上指向这样的派生类

```
Base *b = new Derived() 
```

我想知道的是，是否可以通过引用某个函数来传递基类指针，该函数可以将对象转换回派生类。像这样的东西

```
Dummy_cast_fn(&b) // casts b to derived class 
```

调用后`Dummy_cast_fn`，`b`应该有 Derived 类的完整副本（没有切片）。

**编辑** 由于使用了指针，我不明白没有切片的部分。我的问题是派生类是从对共享库的函数调用返回的，我无权访问派生类的 .h 文件。我所拥有的唯一信息是 Derived 基于 Base 类。我可以访问 Base.h，因此我可以实例化 Base 的对象，但是当我尝试访问在 Derived 中定义但不在 Base 中定义的函数时出现问题。所以我想知道是否可以将 Base 类型转换为 Derived 类型，然后我将能够访问 Derived 中定义的函数，而不是 Base 中定义的函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T06:54:47.233

只要`b`是指向 a 的指针或引用`Derived`，您始终可以：

1.  向下转换为`Derived`.
2.  只要`Base`您使用`b`.

也就是说，决定你能做什么的`b`是它的静态类型，在这种情况下是`Base`. 但是，由于它实际上指向 a `Derived`，因此您始终可以向下转换它。然而，要将它用作 a `Derived`，您必须有一个类型也是`Derived`如此的变量。

所以，如果 的目的`Dummy_cast_fn`只是为了修复某些东西`b`——那是没用的。如果一个对象被切片，没有什么可以修复它。但是在您的情况下，没有切片，因为您使用的是指针。

根据问题的编辑进行编辑：

首先，你的`Derived`对象没有被切片。让我们把它从桌面上拿下来。您有一个指向完整的指针`Derived`（假设这是您传递的内容），但您只能在使用指针`Base`时访问它的部分。`Base`现在，您说您没有 的定义`Derived`。这意味着您将无法向下转换为该类型，因为编译器不知道它是如何定义的。没有铸造将在这里工作。`sum`如果没有`Derived`' 定义，则没有合法的 C++ 方式可以调用该函数。

我确实想知道为什么作者在`Derived`没有提供定义的情况下向您提供了文档。使用这种多态性，提供者通常让用户拥有一些“接口”，而将实际类型留作内部实现细节。`Derived`如果你因为没有它的定义而不能使用，那么让你拥有它的文档是没有意义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T06:49:57.367

您不能将 a 更改`Base*`为 a `Derived*`，但您可以使用 a指向 a指向`Derived*`的对象：`Base*``dynamic_cast`

```
Derived* d = dynamic_cast<Derived*>(b);
if (d) {
  // cast was succesful
} else {
  // cast failed, 
  // e.g. because b* does not point to a Derived* but some other derived type
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T06:52:37.423

你不能改变你的类型，`Base* b`但是你可以创建一个新的指针

```
 Derived* p = static_cast<Derived*>(b); 
```

并使用它。一旦`b`被声明，`Base*`你就不能修改它的类型。您也可以使用`dynamic_cast`，尽管这比较慢并且可能不是绝对必要的（尽管我不能肯定地说 - 这取决于您的要求）。而且，如果您正确使用虚函数，您甚至可能根本不需要进行任何强制转换——这是多态性的目的之一

# object - 如何在 Lua 中为对象添加属性？

> ID：11305777
> 
> 赞同：1
> 
> 时间：2012-07-03T06:46:04.977
> 
> 标签：object, lua

我正在尝试为我创建的对象添加一个属性。在这里我创建了鸟类展示对象，但我想为这些鸟类添加一个像 typeOfBird 这样的特殊属性，然后我想达到那些像 bird.typeOfBird 这样的属性。我怎样才能做到这一点？

```
 module(...,package.seeall)

  function new(params)
  local bird=display.newImage(params.img,params.x,params.y)

  function bird:touch(event)
local t = event.target
local phase = event.phase

if "began" == phase then
    -- Make target the top-most object
    local parent = t.parent
    parent:insert( t )
    display.getCurrentStage():setFocus( t )

    t.isFocus = true
elseif t.isFocus then
    if "moved" == phase then
        t.x = event.x
        t.y = event.y 
    elseif "ended" == phase or "cancelled" == phase then
        display.getCurrentStage():setFocus( nil )
        t.isFocus = false
    end
   end

 return true
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T07:01:56.020

看起来鸟对象已经是简单的 lua 表，因此您可以正常获取和设置值。因此，例如，您可以添加如下行：

```
if self.typeOfBird == "gull" then ... end 
```

和

```
self.typeOfBird = "parrot" 
```

到你的`bird:touch`功能。

或者

```
bird.typeOfBird = "gull" 
```

在你的`new`功能中。

# sql-server - 如何在 SQL Server 2008 r2 管理工作室中复制现有数据库？

> ID：11305778
> 
> 赞同：2
> 
> 时间：2012-07-03T06:46:11.420
> 
> 标签：sql-server, sql-server-2008-r2

我正在尝试复制现有数据库，该数据库存在于 SQL Server 2008 r2 管理工作室中，包括数据。

是否有任何选项可以在管理工作室中复制数据库？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T06:48:00.937

在对象资源管理器中右键单击数据库 -> 任务 -> 复制数据库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-06T08:17:41.287

您还需要确保 SQL 代理 (SQL Server Agent (MSSQLSERVER)) 服务正在运行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T21:22:36.910

**右键**单击要导出的数据库。然后从选项中选择任务，现在您可以**导出**数据，也可以生成可以在另一台服务器上运行的**脚本。**

对于生成脚本，选择它，向导将打开。然后决定要保存脚本的位置。

您必须提醒您必须点击**高级按钮**并选择数据类型以选择选择**架构和数据**以在数据库中获取数据，否则它将仅选择数据库的结构。

# zend-framework - ZF-Autoloader not working in UnitTests on Ubuntu

> ID：11305780
> 
> 赞同：2
> 
> 时间：2012-07-03T06:46:22.467
> 
> 标签：zend-framework, phpunit, command-line-interface, zend-autoloader

i got a problem regarding Unit-testing a Zend-Framework application under Ubuntu 12.04\. The project-structure is a default zend application whereas the models are defined as the following

```
./application
  ./models
    ./DbTable
      ./ProjectStatus.php (Application_Model_DbTable_ProjectStatus)
    ./Mappers
      ./ProjectStatus.php (Application_Model_Mapper_ProjectStatus)
    ./ProjectStatus.php   (Application_Model_ProjectStatus) 
```

The Problem here is with the Zend-specific autoloading. The naming convention here appears that the folder **Mappers** loads all classes with **_Mapper** but not **_Mappers**. This is some internal Zend behavior which is fine so far.

On my windows machine the phpunit runs without any Problems, trying to initiate all those classes.

On my Ubuntu machine however with jenkins running on it, phpunit fails to find the appropriate classes giving me the following error

```
Fatal error: Class 'Application_Model_Mapper_ProjectStatus' not found 
in /var/lib/jenkins/jobs/PAM/workspace/tests/application/models/Mapper/ProjectStatusTest.php
on line 39 
```

The error appears to really be that the Zend-Autoloader doesn't load from the ubuntu machine, but i can't figure out how or why this works. The question remains of why this is. I think i've double checked every point of contact with the zend autoloading stuff, but i just can't figure this out. I'll paste the - from my point of view relevant snippets - and hope someone of you has any insight to this.

**Jenkins Snippet for PHPUnit**

```
 <target name="phpunit" description="Run unit tests with PHPUnit">
   <exec executable="phpunit" failonerror="true">
     <arg line="--configuration '${basedir}/tests/phpunit.xml' --coverage-clover '${basedir}/build/logs/clover.xml' --coverage-html '${basedir}/build/coverage/.' --log-junit '${basedir}/build/logs/junit.xml'" />
   </exec>
 </target> 
```

**./tests/phpunit.xml**

```
<phpunit bootstrap="./bootstrap.php">
   ... this shouldn't be of relevance ...
</phpunit> 
```

**./tests/bootstrap.php**

```
<?php
// Define path to application directory
defined('APPLICATION_PATH')
    || define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../application'));

// Define application environment
defined('APPLICATION_ENV')
    || define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') : 'testing'));

// Ensure library/ is on include_path
set_include_path(implode(PATH_SEPARATOR, array(
    realpath(APPLICATION_PATH . '/../library'),
    get_include_path(),
)));

require_once 'Zend/Loader/Autoloader.php';    
Zend_Loader_Autoloader::getInstance(); 
```

Any help will be appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:55:24.763

我实际上认为问题在于您的“模型/映射器”文件夹。它应该是“模型/映射器”（全部小写），并解释为什么它可以在 Windows 而不是 Linux 上工作。

从 Zend_Application_Module_Autoloader 类可以看出：

```
$this->addResourceTypes(array(
            'dbtable' => array(
                'namespace' => 'Model_DbTable',
                'path'      => 'models/DbTable',
            ),
            'mappers' => array(
                'namespace' => 'Model_Mapper',
                'path'      => 'models/mappers',
            ), 
```

但是，根据我之前的回答，我仍然相信您需要引导应用程序才能自动添加所有默认资源

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T07:42:56.117

从采埃孚手册：

> **创建模型和数据库表**
> 
> 在我们开始之前，让我们考虑一些事情：这些类将放在哪里，我们将如何找到它们？我们创建的默认项目实例化了一个自动加载器。我们可以将其他自动加载器附加到它，以便它知道在哪里可以找到不同的类。通常，我们希望将各种 MVC 类分组在同一棵树下——在本例中为 application/——并且通常使用公共前缀。
> 
> **Zend_Controller_Front**有一个“模块”的概念，它们是单独的迷你应用程序。模块模仿 zf 工具在 application/ 下设置的目录结构，并且假定其中的所有类都以一个公共前缀开头，即模块名称。application/ 本身就是一个模块——“默认”或“应用程序”模块。因此，我们需要为该目录​​中的资源设置自动加载。
> 
> **Zend_Application_Module_Autoloader**提供将模块下的各种资源映射到适当目录所需的功能，并提供标准命名机制。默认情况下，在 bootstrap 对象的初始化过程中会创建一个类的实例；默认情况下，您的应用程序引导程序将使用模块前缀“Application”。因此，我们的模型、表单和表格类都将以类前缀“Application_”开头。

由于 Zend_Application_Module_Autoloader 是默认加载的，因此您只需要按照此答案中的示例引导您的应用程序（您不必运行前端控制器）。

如果您不想引导您的应用程序，您可以通过自己初始化 Zend_Application_Module_Autoloader 来缩短资源加载：

```
$autoloader = new Zend_Application_Module_Autoloader(); 
```

从代码中可以看出，此类的 __construct 调用了 initDefaultResourceTypes()，其中包含您正在寻找的所有好处：

```
class Zend_Application_Module_Autoloader extends Zend_Loader_Autoloader_Resource
{
    /**
     * Constructor
     *
     * @param  array|Zend_Config $options
     * @return void
     */
    public function __construct($options)
    {
        parent::__construct($options);
        $this->initDefaultResourceTypes();
    }

    /**
     * Initialize default resource types for module resource classes
     *
     * @return void
     */
    public function initDefaultResourceTypes()
    {
        $basePath = $this->getBasePath();
        $this->addResourceTypes(array(
            'dbtable' => array(
                'namespace' => 'Model_DbTable',
                'path'      => 'models/DbTable',
            ),
            'mappers' => array(
                'namespace' => 'Model_Mapper',
                'path'      => 'models/mappers',
            ),
            'form'    => array(
                'namespace' => 'Form',
                'path'      => 'forms',
            ),
            'model'   => array(
                'namespace' => 'Model',
                'path'      => 'models',
            ),
            'plugin'  => array(
                'namespace' => 'Plugin',
                'path'      => 'plugins',
            ),
            'service' => array(
                'namespace' => 'Service',
                'path'      => 'services',
            ),
            'viewhelper' => array(
                'namespace' => 'View_Helper',
                'path'      => 'views/helpers',
            ),
            'viewfilter' => array(
                'namespace' => 'View_Filter',
                'path'      => 'views/filters',
            ),
        ));
        $this->setDefaultResourceType('model');
    }
} 
```

在 tests/bootstrap.php 中仅引导您的应用程序而不运行前端控制器：

```
<?php
// Define path to application directory
defined('APPLICATION_PATH')
    || define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../application'));

// Define application environment
defined('APPLICATION_ENV')
    || define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') : 'testing'));

// Ensure library/ is on include_path
set_include_path(implode(PATH_SEPARATOR, array(
    realpath(APPLICATION_PATH . '/../library'),
    get_include_path(),
)));

require_once 'Zend/Loader/Autoloader.php';  

$config = array(
    APPLICATION_PATH . '/configs/application.ini'
);

// Create application, bootstrap, and run
$application = new Zend_Application(
    APPLICATION_ENV,
    array('config' => $config)
);

$application->bootstrap(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T08:02:32.400

由于传统的 Autoloader 不起作用，我尝试手动执行任何 Zend 应用程序会执行的操作。这是`bootstrap.php`最终解决的问题

```
<?php    
// Define path to application directory
defined('APPLICATION_PATH')
    || define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../application'));

// Define application environment
defined('APPLICATION_ENV')
    || define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') : 'testing'));

// Ensure library/ is on include_path
set_include_path(implode(PATH_SEPARATOR, array(
    realpath(APPLICATION_PATH . '/../library'),
    get_include_path(),
)));

require_once 'Zend/Loader/Autoloader.php';
require_once 'Zend/Loader/Autoloader/Resource.php';
$resources = new Zend_Loader_Autoloader_Resource(array(
  'namespace' => 'Application',
  'basePath'  => APPLICATION_PATH
));

$resources->addResourceType('form','forms','Form');
$resources->addResourceType('model','models','Model');
$resources->addResourceType('dbtable','models/DbTable','Model_DbTable');
$resources->addResourceType('mapper','models/Mappers','Model_Mapper'); 
```

逻辑通常是 Zend 自己应该弄清楚的。事实上，它是在我在 Windows 上运行的本地开发机器上执行的。然而，在 ubuntu 上，我需要变得具体。

知道为什么会很有趣。如果有人可以向我解释原因，那么我可能最终会给你正确的答案;）

# javascript - event is not defined firefox

> ID：11305784
> 
> 赞同：0
> 
> 时间：2012-07-03T06:46:36.023
> 
> 标签：javascript, javascript-events

> **Possible Duplicate:**
> [Javascript Error in FireFox Not in IE and Chrome](https://stackoverflow.com/questions/11256257/javascript-error-in-firefox-not-in-ie-and-chrome)

i have a JavaScript function which is in my Javacaleder.js file for Calender. This calender works fine in IE and chrome but not working in FF. It shows error in Error console.. " Event is not defined " It shows error in event.clientX; line below is the function..any help is appreciated.. below function is called like this...

```
 objDiv.style.left = GetControlLeftPosition_jScript() + "px";

function GetControlLeftPosition_jScript() {
var controlLeft = event.clientX;
var pageWidth = document.body.clientWidth;
var spaceinRight = parseInt(pageWidth) - parseInt(controlLeft);
if (spaceinRight > 220) {
    return controlLeft
}
else {
    return parseInt(pageWidth) - 220;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:51:51.073

用户单击文本框旁边的按钮，然后显示日历。好的。您的按钮单击处理程序将接收事件对象作为第一个参数。在那里，你有你的事件对象！

检查它是否`undefined`，如果是，您可能正在运行旧版本的 IE。在这种情况下，使用`window.event`

```
function buttonClickHandler(event) {
    var eventObj = event || window.event;
    objDiv.style.left = GetControlLeftPosition_jScript(eventObj) + "px";
}

function GetControlLeftPosition_jScript(eventObj) {
   var controlLeft = eventObj.clientX;
   //  ... remaining code. 
```

也就是说，我建议您使用一个库来抽象这些问题，而是为您提供一个 api。像 jQuery 或 Mootools 或 dojo 或任何你喜欢的东西。

# ios - iOS > possible play a partially downloaded video?

> ID：11305785
> 
> 赞同：3
> 
> 时间：2012-07-03T06:46:43.140
> 
> 标签：ios, video, asihttprequest

Say we are downloading a large video - its 50Mb - but only 25Mb has downloaded so far - is it possible to start playing the video before its completely downloaded?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:53:16.070

我将假设您正在为您的视频使用 MPMoviePlayerController ...

MPMoviePlayerController 有一个 loadState 属性，您可以使用[此通知](https://developer.apple.com/documentation/mediaplayer/mpmovieplayerloadstatedidchangenotification)对其进行监视。检查视频是否已下载到*可播放范围*，然后播放。

```
//Begin observing the moviePlayer's load state.
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayerLoadStateChanged:) name:MPMoviePlayerLoadStateDidChangeNotification object:moviePlayer];

- (void)moviePlayerLoadStateChanged:(NSNotification *)notification{
    //NSLog(@"State changed to: %d\n", moviePlayer.loadState);
    if(moviePlayer.loadState == MPMovieLoadStatePlayable && [videoIndicator isAnimating]){
        //if load state is ready to play
        [videoIndicator stopAnimating];//Pause and hide the indicator
        [self.contentView addSubview:[moviePlayer view]];
        [moviePlayer setFullscreen:YES animated:YES];
        [moviePlayer play];//play the video
    }

} 
```

这一点非常重要：如果您尝试下载超过 10 分钟的视频，您将需要使用[HTTP Live Streaming](https://developer.apple.com/streaming/)。

# asp.net-mvc - How Decode HTML in MVC with RAZOR

> ID：11305787
> 
> 赞同：3
> 
> 时间：2012-07-03T06:46:44.680
> 
> 标签：asp.net-mvc, razor

I'm using MVC 3 and Razor as View Engine, for my understanding HTML tags are decoding by default to prevent XSS attacks or similar. (I'm also using MS XSS 4.2.1 Library)

I have a View showing some data

```
<div class="display-label">Code</div>
<div class="display-field">
    @Html.DisplayFor(model => model.Code).
</div> 
```

Model.Code is HTML code for some Banners, I need to display the HTML on the page DECODED. My question: How can I decode the HTML for just `model.Code` living the rest ENCODED?

Thanks for your help

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T06:50:20.810

To display raw html use

```
@Html.Raw(model.Code) 
```

Be extremely careful though

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-07T08:07:07.680

用途是`@MvcHtmlString.Create(@Model.OurVision)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T06:51:30.763

您可以使用原样输出数据而无需编码：

```
@Html.Raw(model.Code) 
```

# python - Pickle incompatibility of numpy arrays between Python 2 and 3

> ID：11305790
> 
> 赞同：176
> 
> 时间：2012-07-03T06:46:56.757
> 
> 标签：python, python-3.x, pickle

I am trying to load the MNIST dataset linked [here](http://deeplearning.net/tutorial/gettingstarted.html) in Python 3.2 using this program:

```
import pickle
import gzip
import numpy

with gzip.open('mnist.pkl.gz', 'rb') as f:
    l = list(pickle.load(f))
    print(l) 
```

Unfortunately, it gives me the error:

```
Traceback (most recent call last):
   File "mnist.py", line 7, in <module>
     train_set, valid_set, test_set = pickle.load(f)
UnicodeDecodeError: 'ascii' codec can't decode byte 0x90 in position 614: ordinal not in range(128) 
```

I then tried to decode the pickled file in Python 2.7, and re-encode it. So, I ran this program in Python 2.7:

```
import pickle
import gzip
import numpy

with gzip.open('mnist.pkl.gz', 'rb') as f:
    train_set, valid_set, test_set = pickle.load(f)

    # Printing out the three objects reveals that they are
    # all pairs containing numpy arrays.

    with gzip.open('mnistx.pkl.gz', 'wb') as g:
        pickle.dump(
            (train_set, valid_set, test_set),
            g,
            protocol=2)  # I also tried protocol 0. 
```

It ran without error, so I reran this program in Python 3.2:

```
import pickle
import gzip
import numpy

# note the filename change
with gzip.open('mnistx.pkl.gz', 'rb') as f:
    l = list(pickle.load(f))
    print(l) 
```

However, it gave me the same error as before. How do I get this to work?

* * *

[This is a better approach for loading the MNIST dataset.](http://scikit-learn.org/stable/modules/generated/sklearn.datasets.fetch_mldata.html)

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-07-03T15:48:53.900

这似乎是某种不兼容。它试图加载一个“binstring”对象，该对象被假定为 ASCII，而在这种情况下它是二进制数据。如果这是 Python 3 unpickler 中的错误，或者是 numpy 对pickler 的“滥用”，我不知道。

这是一种解决方法，但我不知道此时数据有多大意义：

```
import pickle
import gzip
import numpy

with open('mnist.pkl', 'rb') as f:
    u = pickle._Unpickler(f)
    u.encoding = 'latin1'
    p = u.load()
    print(p) 
```

在 Python 2 中将其取消腌制然后重新腌制只会再次产生相同的问题，因此您需要将其保存为另一种格式。

* * *

## 回答 #2

> 赞同：150
> 
> 时间：2016-12-28T17:17:30.340

如果您在 python3 中遇到此错误，则可能是 python 2 和 python 3 之间的不兼容问题，对我而言，解决方案是`load`使用`latin1`编码：

```
pickle.load(file, encoding='latin1') 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-02-03T03:49:37.137

这似乎是 Python 2 和 Python 3 之间的不兼容问题。我尝试加载 MNIST 数据集

```
 train_set, valid_set, test_set = pickle.load(file, encoding='iso-8859-1') 
```

它适用于 Python 3.5.2

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-03T06:57:55.663

由于迁移到 unicode，2.x 和 3.x 之间的 pickle似乎[存在一些兼容性问题。](http://bugs.python.org/issue6784)您的文件似乎是用 python 2.x 腌制的，在 3.x 中解码它可能很麻烦。

我建议使用 python 2.x 解开它并保存为在您使用的两个版本中播放得更好的格式。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-10-28T17:12:29.747

我只是偶然发现了这个片段。希望这有助于澄清兼容性问题。

```
import sys

with gzip.open('mnist.pkl.gz', 'rb') as f:
    if sys.version_info.major > 2:
        train_set, valid_set, test_set = pickle.load(f, encoding='latin1')
    else:
        train_set, valid_set, test_set = pickle.load(f) 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-11-28T21:28:20.717

尝试：

```
l = list(pickle.load(f, encoding='bytes')) #if you are loading image data or 
l = list(pickle.load(f, encoding='latin1')) #if you are loading text data 
```

从`pickle.load`方法的文档中：

可选的关键字参数是 fix_imports、encoding 和 errors，用于控制对 Python 2 生成的 pickle 流的兼容性支持。

如果 fix_imports 为 True，pickle 将尝试将旧的 Python 2 名称映射到 Python 3 中使用的新名称。

编码和错误告诉 pickle 如何解码 Python 2 腌制的 8 位字符串实例；这些默认分别为“ASCII”和“严格”。编码可以是“字节”，以将这些 8 位字符串实例读取为字节对象。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-13T20:18:23.127

有 hickle 比 pickle 更快更容易。我试图在泡菜转储中保存和阅读它，但是在阅读时出现了很多问题并浪费了一个小时，尽管我正在处理自己的数据以创建聊天机器人，但仍然没有找到解决方案。

`vec_x`并且`vec_y`是 numpy 数组：

```
data=[vec_x,vec_y]
hkl.dump( data, 'new_data_file.hkl' ) 
```

然后你只需阅读它并执行操作：

```
data2 = hkl.load( 'new_data_file.hkl' ) 
```

# ios - 如何知道文本的方向？

> ID：11305791
> 
> 赞同：4
> 
> 时间：2012-07-03T06:46:59.533
> 
> 标签：ios, uitextview

在输入 UITextView 时，我需要根据键盘的语言知道文本的方向。例如，如果用户正在输入英文，则方向将是“从左到右”，如果用户正在输入阿拉伯语，则方向将是“从右到左”。我毫无疑问地需要这个值，并避免对每种语言及其文本方向之间的匹配进行硬编码。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T06:54:40.043

[从UITextInput 协议](https://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextInput_Protocol/Reference/Reference.html)中检查这个方法：

```
- (UITextWritingDirection)baseWritingDirectionForPosition:(UITextPosition *)position inDirection:(UITextStorageDirection)direction 
```

这将返回一个表示书写方向的常量（例如，从左到右或从右到左）

UITextView 实现了这样的协议。

# jquery - jquery - 事件侦听器：为什么只有一个脚本有效？

> ID：11305792
> 
> 赞同：2
> 
> 时间：2012-07-03T06:47:01.580
> 
> 标签：jquery

我正在运行 rails 3.1 并在文件 /app/assets/javascripts/procedures.js 中有以下 jquery 脚本。

```
$(document).ready(function(){
  $('.unselected').click(function() {
    $(this).removeClass('unselected');
    $(this).addClass('selected');
  });

  $('.selected').click(function() {
    $(this).removeClass('selected');
    $(this).addClass('unselected');
  });
}); 
```

第一个操作按预期工作（选择），但取消选择不起作用。

另一方面，此脚本按预期工作。

```
$(document).ready(function(){
  $('.tile').click(function () {
    if ($(this).hasClass('selected')) {
      $(this).removeClass('selected');
      $(this).addClass('unselected');
    } else if ($(this).hasClass('unselected')) {
      $(this).removeClass('unselected');
      $(this).addClass('selected');
    }   
  }); 
}); 
```

是因为仅在脚本首次运行时才分配事件侦听器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T06:52:59.207

因为 Jquery 将事件绑定到元素 on`document.load()`并且当您将类更改为`unselected`then 这并不意味着您已将事件与该元素绑定。

尝试这个

```
$(document).ready(function(){
  $('body').on('click','.unselected',function() {
    $(this).removeClass('unselected');
    $(this).addClass('selected');
  });

  $('body').on('click','.selected',function() {
    $(this).removeClass('selected');
    $(this).addClass('unselected');
  });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T06:53:02.800

在绑定到该单击处理程序后将类添加`.unselected`到元素不会影响具有该类的新元素。您必须使用 jQuery`.on()`绑定到`.unselected`当前和未来的所有元素。[http://api.jquery.com/on/](http://api.jquery.com/on/)

将您`.click()`的 s 更改为这样，对于`.selected`和`.unselected`：

```
$(document).on("click",".unselected",function(){
    // toggle your classes here
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T06:53:20.397

Document.Ready 在 Document 加载后立即执行。

我不确定，但是这个特定的问题表明，是的，document.ready 中的函数是在 DOM 加载后立即定义的。现在，当 DOM 加载时，它只会找到“未选择”的 div。因此，它将相应的函数绑定到这个类。另一方面，它无法找到“已选择”的 div，因此无法将绑定函数绑定到此类。

如果它是正确的，我会要求任何专家证明这个答案是正确的。否则告诉什么是对的！

# html - 如何在 h:panelgrid 中的两个特定列之间留出空格

> ID：11305794
> 
> 赞同：0
> 
> 时间：2012-07-03T06:47:08.877
> 
> 标签：html, css, jsf-2

```
<h:panelGrid columns="4">
<f:facet name="header">
 <h:outputText value="Customer   Information"/>
</f:facet>

<h:outputLabel value="Title" /><h:outputText  value="#{addProductBean.title}"/>

<h:outputLabel style="width: 80px" value="Date of Birth" />
<h:outputText   id="dateofbirth" value="#{addProductBean.dateOfBirth}" size="10"  maxlength="100"/>

<h:outputLabel value="First Name" /><h:outputText id="firstname" value="#  {addProductBean.firstName}" size="10" maxlength="100"/>

<h:outputLabel value="Gender" /><h:outputText id="gender" value="#{addProductBean.gender}" size="10" maxlength="100"/>

<h:outputLabel value="Last Name" /><h:outputText id="lastname" value="#{addProductBean.lastName}" size="10" maxlength="100"/>

</h:panelGrid> 
```

在上面我希望标题 dateofbirth 和其他类似字段之间有一个空格是可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:09:01.487

您可以使用 columnClasses 为每列定义样式

```
<h:panelGrid columns="4" columnClasses="a,b,c,d">

    .a{
        width:80px;
     }
     ..... 
```

# javascript - 从 JavaScript 字符串中删除零宽度空格字符

> ID：11305797
> 
> 赞同：80
> 
> 时间：2012-07-03T06:47:13.750
> 
> 标签：javascript, unicode

我接受用户输入（JS 代码）并实时执行（处理）它们以显示一些输出。

有时代码有那些零宽度的空格；这真的很奇怪。我不知道用户是如何输入的。例子：`"(​$".length === 3`

我需要能够从我的 JS 代码中删除该字符。我该怎么做？或者也许还有其他方法可以执行该JS代码，以便浏览器不考虑零宽度空格字符？

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-07-03T06:58:01.740

Unicode 具有以下零宽度字符：

*   U+200B 零宽度空间
*   U+200C 零宽度非连接 Unicode 代码点
*   U+200D 零宽度连接符 Unicode 代码点
*   U+FEFF 零宽度不间断空格 Unicode 代码点

要从 JavaScript 中的字符串中删除它们，您可以使用简单的正则表达式：

```
var userInput = 'a\u200Bb\u200Cc\u200Dd\uFEFFe';
console.log(userInput.length); // 9
var result = userInput.replace(/[\u200B-\u200D\uFEFF]/g, '');
console.log(result.length); // 5 
```

请注意，还有更多符号可能不可见。[例如ASCII 的](http://en.wikipedia.org/wiki/Control_character#In_ASCII)一些控制字符。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-10-19T13:50:22.807

我遇到了一个问题，一些不可见的字符正在破坏我的 JSON 并导致**Unexpected Token ILLEGAL**异常导致我的网站崩溃。

这是我使用 RegExp 变量的解决方案：

```
 var re = new RegExp("\u2028|\u2029");
    var result = text.replace(re, ''); 
```

有关 Javascript 和零宽度空间的更多信息，您可以在此处找到： [零宽度空间](https://en.wikipedia.org/wiki/Zero-width_space)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-07-26T12:50:14.820

```
str.replace(/\u200B/g,''); 
```

200B 是零宽度空间 8203 的十六进制。用空字符串替换它以删除它

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-03T06:54:12.853

```
[].filter.call( str, function( c ) {
    return c.charCodeAt( 0 ) !== 8203;
} ); 
```

过滤每个字符以删除 8203 字符代码（零宽度空格 unicode 数字）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-06T21:44:29.527

如果您尝试在 JavaScript 中执行此操作，请尝试[此 regex](https://regex101.com/r/qU1AMb/1)。

```
/([\u200B]+|[\u200C]+|[\u200D]+|[\u200E]+|[\u200F]+|[\uFEFF]+)/g 
```

```
submit.onclick = evt => {
  const stringToTrim = stringValue.value;
  zeroWidthTrim(stringToTrim);
}

/**
 * Given a string, when it has zero-width spaces in it, then remove them
 *
 * @param {String} stringToTrim The string to be trimmed of unicode spaces
 *
 * @return the trimmed string
 *
 * Regex for zero-width space Unicode characters.
 *
 * U+200B zero-width space.
 * U+200C zero-width non-joiner.
 * U+200D zero-width joiner.
 * U+200E left-to-right mark.
 * U+200F right-to-left mark.
 * U+FEFF zero-width non-breaking space.
 */
function zeroWidthTrim(stringToTrim) {
  const ZERO_WIDTH_SPACES_REGEX = /([\u200B]+|[\u200C]+|[\u200D]+|[\u200E]+|[\u200F]+|[\uFEFF]+)/g;
  console.log('stringToTrim = ' + stringToTrim);
  const trimmedString = stringToTrim.replace(ZERO_WIDTH_SPACES_REGEX, '');
  console.log('trimmedString = ' + trimmedString);
  return trimmedString;
};
```

```
<form runat="server">
  <input name="stringValue" id="stringValue" type="text" placeholder="enter your string" value="[&#x200b;&#x200c;]" />
  <input type="button" value="remove zero-width characters" id="submit" />
</form>
```

（运行上面的代码片段后，将`stringToTrim`值和`trimmedString`值粘贴到[regex101 测试窗口](https://regex101.com/r/qU1AMb/1)中，您将看到 Unicode 字符已从`trimmedString`值中消失。）

# perl - Perl base64 返回不同的

> ID：11305798
> 
> 赞同：2
> 
> 时间：2012-07-03T06:47:23.460
> 
> 标签：perl, base64

当我运行 Perl base64 时，它返回的字符串与返回的字符串（[在线编码系统](http://www.opinionatedgeek.com/dotnet/tools/base64encode/ "在线编码系统")）不同。这可能是什么原因？

这就是我获取图像的 base64 的方式。

```
use MIME::Base64;

open (IMAGE, "C:\\wamp\\www\\image.png") or die "$!";
$raw_string = do{ local $/ = undef; <IMAGE>; };
$encoded = encode_base64( $raw_string ); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T06:50:35.397

You're missing

```
binmode(IMAGE); 
```

# c# - 在asp.net中克服发送电子邮件延迟的方法

> ID：11305802
> 
> 赞同：2
> 
> 时间：2012-07-03T06:47:42.887
> 
> 标签：c#, asp.net

我添加了一个评论框，每次用户添加新评论时，我都会调用插入处理程序将其应用到数据库中。我喜欢这里是快速完成的事情。

我现在想做的是每次插入新评论时都发送，没有延迟。

所以我添加了**SmtpClient**并在同一个插入处理程序上使用**SendAsync**发送邮件。这对我来说还不够好，因为即使是最简单的电子邮件正文（“hello world”）也需要 5 秒才能回复！**也许我需要添加一个新线程？**

有没有其他方法可以克服发送电子邮件的延迟？我想创建一个新的处理程序，它将在插入处理程序的**onComplete**上运行，它将调用另一个处理程序，该处理程序将在后台发送邮件，用户不会注意到。这个问题可能是垃圾邮件，但一遍又一遍地重新调用同一个处理程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:52:08.120

有无数种方法可以解决这个问题，但我的方法一直是使用完全不同的定时进程或服务，它可以直接从数据库中读取数据，并独立于 ASP.NET 应用程序发送电子邮件。

在理想的大型应用程序中，您将在接收端使用带有 MSMQ - [Microsoft 消息队列之类的单独进程。](http://en.wikipedia.org/wiki/Microsoft_Message_Queuing)

**编辑：**

好的，所以在网上有几个地方提到了另一种方法（我强烈反对使用它，因为它非常脆弱），但基本上它涉及创建一个 ASP.NET 网络服务，其中包含您发送电子邮件的代码和使用 jQuery 调用该服务。所以你最终会得到一个像这样声明的网络服务

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
[System.Web.Script.Services.ScriptService]
public class EmailSender : System.Web.Services.WebService
{
    [WebMethod]
    public void SendEmail(string email, string message)
    {
        //Send my email
    }
} 
```

在提交或表单回发时，您会按照这些方式调用它。

```
$.ajax({
    type: "POST",
    contentType: "application/json; charset=utf-8;",
    url: "EmailSender.asmx",
    data: JSON.stringify({ email: "mail@email.com",
        message: "this is a test message"
    }),
    dataType: "json",
    success: function (data, textStatus, jqXHR) {
        //Do success stuff
    },
    error: function (jqXHR, textStatus, errorThrown) {
        //Do error stuff
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:01:54.570

我在一个项目中遇到了同样的问题。我对这个问题的解决方案是让一个单独的 SMTP 服务器运行，并为我的主页提供一个取件位置，以转储任何必须发送的电子邮件。这样做时，从 ASP .Net 端即时创建电子邮件。然后 SMTP 服务器处理实际的发送过程。

这确保了我的网页快速响应，并且我不会一次性发送太多电子邮件，以至于我的 SMTP 服务器被其他 SMTP 服务器列入黑名单。

[http://msdn.microsoft.com/en-us/library/system.net.mail.smtpdeliverymethod.aspx](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpdeliverymethod.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T07:58:04.673

也许您可以使用此代码，即 SendMailMessageAsync() 方法。这是来自 BlogEngine 的源代码。

```
public static string SendMailMessage(MailMessage message)
{
    if (message == null)
    {
        throw new ArgumentNullException("message");
    }

    StringBuilder errorMsg = new StringBuilder();

    try
    {
        message.IsBodyHtml = true;
        message.BodyEncoding = Encoding.UTF8;
        var smtp = new SmtpClient(Settings.Instance.SmtpServer);

        // don't send credentials if a server doesn't require it,
        // linux smtp servers don't like that 
        if (!string.IsNullOrEmpty(Settings.Instance.SmtpUserName))
        {
            smtp.Credentials = new NetworkCredential(yourusername, yourpassword));
        }

        smtp.Port = Settings.Instance.SmtpServerPort;
        smtp.EnableSsl = Settings.Instance.EnableSsl;
        smtp.Send(message);
    }
    catch (Exception ex)
    {
        errorMsg.Append("Error sending email in SendMailMessage: ");
        Exception current = ex;

        while (current != null)
        {
            if (errorMsg.Length > 0) { errorMsg.Append(" "); }
            errorMsg.Append(current.Message);
            current = current.InnerException;

            Logger.Error("Error sending email in SendMailMessage.", ex);
        }
    }
    finally
    {
        // Remove the pointer to the message object so the GC can close the thread.
        message.Dispose();
    }

    return errorMsg.ToString();
}

public static void SendMailMessageAsync(MailMessage message)
{
    ThreadPool.QueueUserWorkItem(delegate { SendMailMessage(message); });
} 
```

# jquery - 分配在外部 js 文件中不起作用

> ID：11305806
> 
> 赞同：0
> 
> 时间：2012-07-03T06:48:15.227
> 
> 标签：jquery

朋友们，我为自动完成创建了一个新的 js 文件。除了一行“receiveingAutocompleteData = data.autcompleteData;”外，一切正常 右侧的值未分配给左侧。

```
var ArrayAutocomplete = [];
var receivingAutocompleteData ;
function AutoComplete1(txtBoxName, idField, fieldName) {
debugger;
ArrayAutocomplete = [];

var selectedReqType = $("#" + txtBoxName).val();

$("#" + txtBoxName).unautocomplete();
$("#" + txtBoxName).val("");

$("#" + txtBoxName).val("Loading...........");
$("#" + txtBoxName).attr("disabled", true);

// var rea=  "<%= Url.RouteUrl(new { controller = "Request", action =   "AutoSelectionDataForRequestType"}) %>";
var rea = getURL(fieldName);
$.post(rea, {}, function (data) {
    debugger;
    receivingAutocompleteData = data.autcompleteData;
    jQuery.each(receivingAutocompleteData, function (i, val) {
        if (val.Name != "")
            ArrayAutocomplete.push(val.Name + '|' + val.ID);
    });
    ArrayAutocomplete.sort();

    //   alert(ArrayAutocomplete.length);
    //  alert(ArrayAutocomplete);
    $("#" + txtBoxName).autocomplete(ArrayAutocomplete, {

        minChars: 0,
        max: ArrayAutocomplete.length,
        autoFill: true,
        mustMatch: true,
        matchContains: false,
        multipleSeparator: ',-',
        scrollHeight: 220,

        formatItem: function (data, index, max) {
            return data[0];
        },
        formatMatch: function (data, index, max) {
            return data[0];
        }, formatResult: function (data, index, max) {
            return data[0];
        }
    }).result(function (event, data, formatted) {
        if (data)
            $("#" + idField).val(data[1]);
        else
            $("#" + idField).val('-1');
    });
    $("#" + txtBoxName).val("");
    $("#" + txtBoxName).attr("disabled", false);
    $("#" + txtBoxName).Watermark("--Select--");

    if (selectedReqType != '')
        $("#" + txtBoxName).val(selectedReqType);
   }); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:51:29.970

jQuery 使用 content-type 标头来确定返回数据的类型。由于大多数服务器不发送，`application/json`因此您必须指定“json”作为数据类型（第 4 个参数`$.post`）

你也可能有错字

我认为应该是

```
data.autocompleteData 
```

代替

```
data.autcompleteData 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:51:57.453

是什么`data`？

可能你刚刚打错了`receivingAutocompleteData = data.autcompleteData;`; 正确的字段名称是“data.aut **o** completeData;”。

# actionscript-2 - 如何使用动作脚本创建步进函数（执行下一步然后停止）？

> ID：11305813
> 
> 赞同：0
> 
> 时间：2012-07-03T06:48:43.200
> 
> 标签：actionscript-2

我想创建一个步进函数，按下它会执行下一步然后停止。我在 AS2 中的一个简单按钮上编写了这段代码。

`on(release){var test:Number = currentFrame; _root.gotoAndPlay(++test); _root.stop(); }`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:08:48.323

I think you could write it this way :

```
on(release){
  _root.gotoAndStop(_root.currentFrame + 1);
} 
```

# xcode - 如何修复编译器错误

> ID：11305814
> 
> 赞同：1
> 
> 时间：2012-07-03T06:48:46.120
> 
> 标签：xcode, cocoa, gcc

全部，我在我的 XCode 项目中单独使用 .h 文件创建了 .mm 文件，并将以下代码放在那里：

```
#pragma once
class Speech
{
public:
    Speech();
private:
    NSSpeechSynthesizer *m_speech;
}; 
```

和

```
#import <AppKit/NSSpeechSynthesizer.h>
#include "speech.h"

Speech::Speech()
{
     m_speech = [NSSpeechSynthesizer new];
} 
```

在编译期间，我收到一个错误：“ISO C++ 禁止声明没有类型的 NSSpeechSynthesizer”。

我需要以某种方式包含 NSSpeechSynthesizer.h 文件，但无论我尝试了什么 - 没有任何效果。

有人可以帮忙吗？

[编辑] 看来我需要以某种方式使 XCode 中的标头路径可用，或者只是让 XCode 知道我将使用适当的框架.. [/EDIT]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:00:10.413

尝试前向声明`NSSpeechSynthesizer`，就像使用纯 Objective-C 解决方案一样：

```
#pragma once
class NSSpeechSynthesizer;    // Added
class Speech
{
public:
    Speech();
private:
    NSSpeechSynthesizer *m_speech;
}; 
```

# iphone - 在加载视图中创建视图并设置它的框架，但框架自动更改

> ID：11305818
> 
> 赞同：1
> 
> 时间：2012-07-03T06:49:27.517
> 
> 标签：iphone, ios, uiview

为什么视图的框架自动改变了？

看到这个代码：

```
- (void)loadView{
    UIScrollView *sv = [[UIScrollView alloc] initWithFrame:CGRectMake(-10,0,340,480)];
    self.view = sv;
    NSLog(@"sv frame = %@", NSStringFromCGRect(self.view))
}

- (void)viewWillAppear{
  NSLog(@"view frame = %@", NSStringFromCGRect(self.view));
} 
```

在我的演示输出中：sv frame = {{-10, 0}, {340, 480}}

视图框架 = {{0, 0}, {320, 480}}

应该是：view frame = {{-10, 0}, {340, 480}}

但在 PhotoScroller 演示（2010 WWDC 104）中，它是正确的。太奇怪了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T06:54:11.197

以这种方式更改这两种方法：

```
- (void)loadView{
   UIScrollView *sv = [[UIScrollView alloc] initWithFrame:CGRectZero];
   self.view = sv;
}

- (void)viewWillAppear:(BOOL)animated {
   self.view.frame = CGRectMake(-10,0,340,480);
} 
```

编辑：必须在至少`viewWillAppear:`和稍后`UIViewController`的事件生命周期中设置几何。自动调整蒙版大小也可以更改几何形状。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:35:50.677

```
- (void)loadView
{    
    UISCrollView *scrollView = [[UIScrollView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
    self.view = scrollView;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-03T11:06:08.277

尝试这个：

```
- (void)loadView{
    UIView *view=[[UIView alloc] initWithFrame:CGRectMake(0,0,320,480)];
    UIScrollView *sv = [[UIScrollView alloc] initWithFrame:CGRectMake(-10,0,340,480)];
    [view addSubview:sv];
    sv.autoresizingMak=UIViewAutoresizingMaskFlexibleWidth|UIViewAutoresizingMaskFlexibleHeight;
    self.view = view;
} 
```

# javascript - 如何阻止回发运行我的 JavaScript 代码

> ID：11305819
> 
> 赞同：0
> 
> 时间：2012-07-03T06:49:28.300
> 
> 标签：javascript, postback

我有一个 javascript 代码，它是一个名为 startLoop() 的小函数，这就是函数

```
function startLoop() {
            if (myInterval > 0) clearInterval(myInterval);  // stop
            myInterval = setInterval("doSomething()", iFrequency);  // run
    } 
```

该函数由客户端的 Devexepress 按钮调用。

```
<dx:ASPxButton ID="btnliveTrackSubmit" runat="server" Text="Live Track" AutoPostBack="False">
<ClientSideEvents Click="startLoop()" />
</dx:ASPxButton> 
```

这个函数应该只在我点击 btnliveTrackSubmit 按钮时执行。

但是发生了什么事，如果我单击任何其他将执行回发的服务器端按钮，此功能将执行。

我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:23:08.253

这就是我解决它的方法:)

```
<dx:ASPxButton ID="btnliveTrackSubmit" runat="server" Text="Live Track">
                                                                                                                            <ClientSideEvents Click="function(s, e) { startLoop(); }" />
                                                                                                                            </dx:ASPxButton> 
```

# asp.net - IIS HTTP 错误 500.19

> ID：11305821
> 
> 赞同：30
> 
> 时间：2012-07-03T06:49:34.900
> 
> 标签：asp.net, iis

我第一次在我的计算机上安装了 IIS（直到现在我使用的是 express 版本），但它不能正常工作。当我尝试点击页面时，它返回此错误，我不知道如何解决：

> 错误摘要
> HTTP 错误 500.19 - 内部服务器错误
> 无法访问请求的页面，因为该页面的相关配置数据无效。
> 详细错误信息
> 模块 IIS Web 核心
> 通知 BeginRequest
> 处理程序 尚未确定
> 错误代码 0x8007000d
> 配置错误
> 配置文件 \?\D:\2008\abcd.Website\web.config
> 请求的 URL http : // localhost:80/abcd.Website
> 
> 物理路径D:\2008\ManagerAnticriza.Website
> 登录方法尚未确定
> 登录用户尚未确定

谁能帮我？安装 IIS 后有没有办法配置它？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-03-08T15:16:52.667

这个问题花了我一天中最好的时间来解决，因为我在办公室的另一台机器上运行完全相同的代码。

事实证明，我缺少 IIS 中的一些功能，而我执行的 web.config 正在寻找这些功能。我缺少身份验证功能和 URL 重写模块，因此 IIS 认为我的 web.config 格式不正确。

互联网上有类似的答案提到了 URL Rewrite 模块，所以我先看看那里。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-29T18:29:12.840

安装 iis 重写模块在这里帮助了我。

[无法访问请求的页面，因为该页面的相关配置数据无效错误](https://stackoverflow.com/questions/9216158/the-requested-page-cannot-be-accessed-because-the-related-configuration-data-for)

-海军

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-08T15:34:35.883

我见过的解决方案都没有为我工作，但我最终将其归结为 WSUS（Windows 服务器更新服务）和它定义压缩的方式之间的冲突。我的应用程序池需要允许 32 位应用程序，这导致了问题。在我的情况下，错误消息中列出的模块是 DynamicCompression 模块，我在这里找到了解决方案，所以我发布它以防它帮助其他人。

[https://community.sophos.com/kb/en-us/111319](https://community.sophos.com/kb/en-us/111319)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-14T18:23:36.113

下载安装`.NET CORE Hosting Bundle`即可解决问题。

这对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T07:18:26.027

> 因为该页面的相关配置数据无效

这是因为您`web.config`的格式不正确，或者没有正确的读取权限。

错误详情： http: [//support.microsoft.com/kb/942055](http://support.microsoft.com/kb/942055)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-29T17:42:23.323

尝试将应用程序池更改为 v2.0

[看这里](https://i.stack.imgur.com/UqYUG.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-05T18:19:16.920

在 DotNet Core 中，我可以通过从 web.config 文件中直接运行 dotnet 命令来解决问题。

```
<aspNetCore processPath="dotnet" arguments=".\MyCompany.Service.dll" stdoutLogEnabled="false" stdoutLogFile=".\logs\stdout" hostingModel="inprocess" /> 
```

翻译成

```
dotnet ./MyCompany.Service.dll 
```

# vb.net - 将数字格式化为罗马数字？

> ID：11305822
> 
> 赞同：1
> 
> 时间：2012-07-03T06:49:35.833
> 
> 标签：vb.net, number-formatting

是否可以使用 Format 函数以罗马数字显示整数？

```
For Counter As Integer = 1 To 10
   Literal1.Text &= Format(Counter, "???")
Next 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-01T09:19:59.873

这是我在[http://www.source-code.biz/snippets/vbasic/7.htm上找到的](http://www.source-code.biz/snippets/vbasic/7.htm)

（最初由**Christian d'Heureuse**先生在 VB 中编写）

我将其转换为 VB.net：

```
 Private Function FormatRoman(ByVal n As Integer) As String
      If n = 0 Then FormatRoman = "0" : Exit Function
      ' there is no Roman symbol for 0, but we don't want to return an empty string
      Const r = "IVXLCDM" ' Roman symbols
      Dim i As Integer = Math.Abs(n)
      Dim s As String = ""

      For p As Integer = 1 To 5 Step 2
         Dim d As Integer = i Mod 10
         i = i \ 10
         Select Case d ' format a decimal digit
            Case 0 To 3 : s = s.PadLeft(d + Len(s), Mid(r, p, 1))
            Case 4 : s = Mid(r, p, 2) & s
            Case 5 To 8 : s = Mid(r, p + 1, 1) & s.PadLeft(d - 5 + Len(s), Mid(r, p, 1))
            Case 9 : s = Mid(r, p, 1) & Mid(r, p + 2, 1) & s
         End Select
      Next

      s = s.PadLeft(i + Len(s), "M") ' format thousands
      If n < 0 Then s = "-" & s ' insert sign if negative (non-standard)
      FormatRoman = s
   End Function 
```

我希望这对其他人有帮助。

干杯 - 戴夫。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T06:57:07.877

不，没有标准的格式化程序。

如果您阅读[有关罗马数字的维基百科，](http://en.wikipedia.org/wiki/Roman_numerals)您会发现有多种格式化罗马数字的方法。因此，您将不得不编写自己的方法，我们[使用其他人的代码](https://stackoverflow.com/questions/7040289/converting-integers-to-roman-numerals)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-19T17:26:32.433

我编写的这段代码可以完美运行到一百万。您可以使用它，但请不要将其设为您自己的。

```
Public NotInheritable Class BRoman
'Written by Bernardo Ravazzoni
Public Shared Function hexRoman(ByVal input As Integer) As String
    Return mainROMAN(input)
End Function
Private Shared Function mainROMAN(ByVal input As Integer) As String
    Dim under As Boolean = udctr(input)
    Dim cifretotali As Integer = input.ToString.Length
    Dim output As String = ""
    Dim remaning As String = input
    Dim cifracor As Integer = cifretotali
    While Not cifracor = 0
        output = output & coreROMAN(division(remaning, remaning), cifracor)
        cifracor = cifracor - 1
    End While
    If under Then
        output = "-" & output
    End If
    Return output
End Function
Private Shared Function coreROMAN(ByVal num As Integer, ByVal pos As Integer) As String
    Dim output As String = ""
    Debug.WriteLine(num)
    Select Case num
        Case 1 To 3
            output = say(num, getStringFor(True, pos))
        Case 4
            output = getStringFor(True, pos) & getStringFor(False, pos)
        Case 5 To 8
            output = getStringFor(False, pos) & say(num - 5, getStringFor(True, pos))
        Case 9, 10
            output = say(10 - num, getStringFor(True, pos)) & getStringFor(True, pos + 1)
    End Select
    Return output
End Function
Private Shared Function getStringFor(ByVal first As Boolean, ByVal index As Integer) As String
    Dim output As String = ""
    index = index * 2
    If first Then
        index = index - 1
    End If
    output = rGetStringFor(index)
    Return output
End Function
Private Shared Function rGetStringFor(ByVal index As Integer) As String
    Dim output As String = ""
    Dim sy As Integer
    If index < 8 Then
        output = rrGetStringFor(index)
    Else
        sy = index \ 6
        output = say(sy, rrGetStringFor(8)) & rrGetStringFor(((index - 2) Mod 6) + 2) & say(sy, rrGetStringFor(9))
    End If
    Return output
End Function
Private Shared Function rrGetStringFor(ByVal index As Integer) As String
    Dim output As String = ""
    Select Case index
        Case 1
            output = "I"
        Case 2 '8
            output = "V"
        Case 3 '9
            output = "X"
        Case 4 '10
            output = "L"
        Case 5 '11
            output = "C"
        Case 6 '12
            output = "D"
        Case 7 '13
            output = "M"
        Case 8
            output = "["
        Case 9
            output = "]"
    End Select
    Return output
End Function
Private Shared Function division(ByVal inputs As String, ByRef resto As String) As Integer
    resto = ""
    If inputs.Length > 1 Then
        resto = inputs.Substring(1)
    End If
    Dim output As Integer = Integer.Parse(StrReverse(inputs).Substring(inputs.Length - 1))
    Return output
End Function
Public Shared Function say(ByVal index As Integer, ByVal letter As String) As String
    Dim output As String = ""
    While Not index = 0
        output = output & letter
        index = index - 1
    End While
    Return output
End Function
Public Shared Function udctr(ByRef num As Integer) As Boolean
    Dim und As Boolean = (num < 0)
    If und Then
        num = 0 - num
    End If
    Return und
End Function
End Class 
```

使用函数 hexRoman，如下例所示：

```
msgbox(Broman.hexRoman(50)) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-09-05T23:37:09.130

```
Public Class RomanNumber
    Public Shared Function FromNumber(val As Byte) As String
        Return GetNumberToRoman(val)
    End Function
    Public Shared Function FromNumber(val As SByte) As String
        Return GetNumberToRoman(val)
    End Function
    Public Shared Function FromNumber(val As Int16) As String
        Return GetNumberToRoman(val)
    End Function
    Public Shared Function FromNumber(val As Int32) As String
        Return GetNumberToRoman(val)
    End Function
    Public Shared Function FromNumber(val As UInt16) As String
        Return GetNumberToRoman(val)
    End Function
    Public Shared Function FromNumber(val As UInt32) As String
        Return GetNumberToRoman(val)
    End Function
    Public Shared Function ToByte(val As String) As Byte
        Return GetNumberFromRoman(val)
    End Function
    Public Shared Function ToSByte(val As String) As SByte
        Return GetNumberFromRoman(val)
    End Function
    Public Shared Function ToInt16(val As String) As Int16
        Return GetNumberFromRoman(val)
    End Function
    Public Shared Function ToInt32(val As String) As Int32
        Return GetNumberFromRoman(val)
    End Function
    Public Shared Function ToUInt16(val As String) As UInt16
        Return GetNumberFromRoman(val)
    End Function
    Public Shared Function ToUInt32(val As String) As UInt32
        Return GetNumberFromRoman(val)
    End Function
    Private Shared Function GetNumberToRoman(val As Integer) As String
        Dim v As String = ""
        Do While val > 0
            If val >= 1000 Then
                v &= "M" : val -= 1000
            ElseIf val >= 900 Then
                v &= "CM" : val -= 900
            ElseIf val >= 500 Then
                v &= "D" : val -= 500
            ElseIf val >= 400 Then
                v &= "CD" : val -= 400
            ElseIf val >= 100 Then
                v &= "C" : val -= 100
            ElseIf val >= 90 Then
                v &= "XC" : val -= 90
            ElseIf val >= 50 Then
                v &= "L" : val -= 50
            ElseIf val >= 40 Then
                v &= "XL" : val -= 40
            ElseIf val >= 10 Then
                v &= "X" : val -= 10
            ElseIf val >= 9 Then
                v &= "IX" : val -= 9
            ElseIf val >= 5 Then
                v &= "V" : val -= 5
            ElseIf val >= 4 Then
                v &= "IV" : val -= 4
            Else
                v &= "I" : val -= 1
            End If
        Loop
        Return v
    End Function
    Private Shared Function GetNumberFromRoman(val As String) As Object
        Dim v As Integer = 0
        If val.Contains("IV") Then v += 4 : val = val.Replace("IV", "")
        If val.Contains("IX") Then v += 9 : val = val.Replace("IX", "")
        If val.Contains("XL") Then v += 40 : val = val.Replace("XL", "")
        If val.Contains("XC") Then v += 90 : val = val.Replace("XC", "")
        If val.Contains("CD") Then v += 400 : val = val.Replace("CD", "")
        If val.Contains("CM") Then v += 900 : val = val.Replace("CM", "")
        For Each c As Char In val
            If c = "I" Then v += 1
            If c = "V" Then v += 5
            If c = "X" Then v += 10
            If c = "L" Then v += 50
            If c = "C" Then v += 100
            If c = "D" Then v += 500
            If c = "M" Then v += 1000
        Next
        Return v
    End Function
End Class 
```

# c# - 如何检查是基类对象还是派生对象？

> ID：11305825
> 
> 赞同：6
> 
> 时间：2012-07-03T06:49:48.513
> 
> 标签：c#, .net, oop

我有一`BankAccount`堂课。`FixedBankAccount`并`SavingsBankAccount`由此衍生。
如果收到的对象不是派生对象，我需要抛出异常。我有以下代码。

```
IEnumerable<DBML_Project.BankAccount> accounts = AccountRepository.GetAllAccountsForUser(userId);
foreach (DBML_Project.BankAccount acc in accounts)
{
    string typeResult = Convert.ToString(acc.GetType());
    string baseValue = Convert.ToString(typeof(DBML_Project.BankAccount));

    if (String.Equals(typeResult, baseValue))
    {
        throw new Exception("Not correct derived type");
    }
}

namespace DBML_Project
{

public  partial class BankAccount
{
    // Define the domain behaviors
    public virtual void Freeze()
    {
        // Do nothing
    }
}

public class FixedBankAccount : BankAccount
{
    public override void Freeze()
    {
        this.Status = "FrozenFA";
    }
}

public class SavingsBankAccount : BankAccount
{
    public override void Freeze()
    {
        this.Status = "FrozenSB";
    }
}

} // namespace DBML_Project 
```

还有比这更好的代码吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-03T06:53:03.443

你应该使用[`Type.IsAssignableFrom`](http://msdn.microsoft.com/en-us/library/system.type.isassignablefrom.aspx)

```
if (acc.GetType().IsAssignableFrom(typeof(BankAccount)))
    // base class
else
    // derived 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T06:53:39.340

将 BankAccount 类声明为 Abstract。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T06:54:58.137

使用`Type.IsSubclassOf`方法。有关更多信息，请查看[此](http://msdn.microsoft.com/en-us/library/system.type.issubclassof.aspx)

```
foreach (DBML_Project.BankAccount acc in accounts)
{
    if (!acc.GetType().IsSubclassOf(typeof(DBML_Project.BankAccount))
    {
        throw new Exception("Not correct derived type");
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-03T08:46:38.977

我会定义一个接口（类似于 IAccettableBankAccount，但您知道您的域，因此您应该能够找到更好的名称）并让 FixedBankAccount 和 SavingsBankAccount 实现它。那么您的测试将只是：

```
if (!acc is IAccettableBankAccount)
{
     throw new Exception("Not correct derived type");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T06:53:42.663

您可以直接检查类型：

```
 var accounts = AccountRepository.GetAllAccountsForUser(userId);
    if (accounts.Any(acc => acc.GetType() == typeof(DBML_Project.BankAccount))) {
        throw new Exception("Not correct derived type");
    } 
```

将类声明为抽象类也可能有所帮助，但我不知道这是否适合您的情况。

# c# - How to convert .WSQ FingerPrint Image File to .BMP FIle in C#

> ID：11305829
> 
> 赞同：0
> 
> 时间：2012-07-03T06:50:06.760
> 
> 标签：c#, fingerprinting

Is there a way to convert a .wsq fingerprint image file to a bitmap image (bmp) file?

sample .wsq fingerprint image file is here

[http://www.mediafire.com/download.php?qbwy76rmc666dbr](http://www.mediafire.com/download.php?qbwy76rmc666dbr)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T07:29:23.247

我曾经不得不使用一个名为 iwsq 的实用程序从 wsq 文件中提取位图。不幸的是，它只是二进制文件，来源未知，也没有源代码。

搜索 iwsq会找到[这个存档](http://www.math.wustl.edu/~victor/software/wsq/index.html)，您可以直接从 c# 调用它作为可执行文件。

SourceForge 上还有[FFPIS 项目](http://ffpis.sourceforge.net/)。它自 2004 年以来一直没有更新，但链接可能会提供更多代码。

[WSQ Image Library](http://www.cognaxon.com/index.php?page=wsqlibrary)是一个带有价格标签的 WSQ 相关的 SDK。

[NIST](http://www.nist.gov/itl/iad/ig/nbis.cfm)还提供了一些[下载资料和源代码](http://www.nist.gov/itl/iad/ig/nigos.cfm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T16:09:23.277

您可以将[JNBIS](http://code.google.com/p/jnbis/)用于 Java 或[Wsq2Bmp](http://www.codeproject.com/Tips/429481/Wsq-to-Bmp-converter)用于 .NET

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-16T21:31:15.180

我在这里围绕 NBIS 实现提供了一个 .NET 包装器（编码/解码、Windows 窗体和 Wpf 图像）：[https ://github.com/odalet/Delta.Imaging/tree/master/Delta.Wsq](https://github.com/odalet/Delta.Imaging/tree/master/Delta.Wsq)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-10T09:19:23.087

我们已经在 J​​ava 中实现了这个实用程序（将 .WSQ 指纹文件转换为 .BMP），并将其作为 Web 服务提供。您可以免费使用它： http: [//leversystems.com/products/fiss/](http://leversystems.com/products/fiss/)。C# 和 Java 中也提供了有关如何使用此服务的示例代码。

# sharepoint-2010 - Sharepoint OOB download web service

> ID：11305833
> 
> 赞同：0
> 
> 时间：2012-07-03T06:50:28.757
> 
> 标签：sharepoint-2010

I've a Mobile device client to Sharepoint 2010 site . I want to implement resumable download on Mobile device through out of box sp webservices.

Is there any way it can be done using OOB web services or do i need to write a customised SP web service by implementing IHttpHandler interface as i know HTTP supports Accept-Range ,eTag header .

If it possible using OOB web service ,How it can be achieved ...

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T07:03:46.847

仅当服务器支持 HTTP 范围请求时，才可能进行可恢复下载。您也可以为 sharepoint 的 BLOB 对象尝试基于磁盘的缓存。

请参考这个帖子

[SharePoint 2010 / IIS 7.5 字节范围请求响应整个文件](https://stackoverflow.com/questions/3571115/sharepoint-2010-iis-7-5-byte-range-request-responds-with-entire-file)

如果你能做到这一点，也请在这里发布。我也在寻找这个的解决方案。

# iphone - Adding an image to a UITableViewCell using plist

> ID：11305837
> 
> 赞同：1
> 
> 时间：2012-07-03T06:50:51.393
> 
> 标签：iphone, objective-c, xcode, uitableview, plist

I am getting a list of categories and showing them in a tableView using plist.I am also using plist to store the names of images and showing the images in cell.imageView.so far its working fine but if i am trying to add a new category i am getting a problem to add the image.I guess it is some problem with the array as the error am getting is about the beyond bounds.

```
- (void)viewDidLoad
{

//Reading data from plist.
self.categoryFile = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/Categories"];
if(![[NSFileManager defaultManager] fileExistsAtPath:self.categoryFile])
{
    self.categoryFile = [[NSBundle mainBundle]pathForResource:@"Categories" ofType:@"plist"];
}
self.categoryList = [[NSMutableArray alloc]initWithContentsOfFile:self.categoryFile];

//get list of images from a plist
NSString *imageNames = [[NSBundle mainBundle]pathForResource:@"ImagesNames" ofType:@"plist"];
self.imagesList = [[NSMutableArray alloc]initWithContentsOfFile:imageNames];
[toolbar release];
[self.imagesList release];
[super viewDidLoad];
}
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [self.categoryList count];
}
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
if(!cell){
    cell = [[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]autorelease];
}
cell.textLabel.text = [self.categoryList objectAtIndex:indexPath.row]; 
```

//this is where am getting the error.

```
cell.imageView.image = [UIImage imageNamed:[self.imagesList objectAtIndex:indexPath.row]];
return cell;
}
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
if(buttonIndex == 1)
{
    UITextField *newCategoryName = [alertView textFieldAtIndex:0];
    NSInteger section = 0;
    NSInteger row = 0;
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:row inSection:section];
    NSString *extraContent = newCategoryName.text;
    [[self categoryList]insertObject:extraContent atIndex:row];
    [self.categoryList writeToFile:self.categoryFile atomically:YES];
    NSArray *indexPathsToInsert = [NSArray arrayWithObject:indexPath];
    [[self tableOfCategories]insertRowsAtIndexPaths:indexPathsToInsert withRowAnimation:UITableViewRowAnimationRight];
    NSLog(@"%@",newCategoryName.text);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:04:49.137

根据您的问题，我猜您正在 plist 中添加类别，但您没有更新 plist 中的 ImageNames。因为对于行数，您正在使用这样的代码..

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [self.categoryList count];
} 
```

在上面的代码中，因为您正在根据类别增加行。但是 imagesList 中的项目数少于 categoryList，因为您只增加了 Category。

# visual-studio - Make Resharper's quick documentation standard in Visual Studio 2008

> ID：11305838
> 
> 赞同：1
> 
> 时间：2012-07-03T06:50:58.570
> 
> 标签：visual-studio, resharper

I recently found out about my Resharpers plugin function "Quick Documentation". This function is pretty damn sweet because it shows much more detailed code documentation than VS2008 standard layout and it also nicer to look at. I love using it, but the problem is that I have to press Ctrl+Q every time to view it.

Is there any way to overwrite the VS2008 popup code documentation with Resharper's quick documentation?

I have looked in several forums, including Jetbrian's but have not found anything to confirm nor deny if it is possible.

*PS. If you know how to do it in VS2010 aswell it would be sweet to, though not my priority at the moment.*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:53:59.983

不这样做有2点：

1.  通常，弹出窗口应显示文档摘要。否则，弹出窗口将太大而无法舒适使用
2.  ReSharper 插入标准的 VS 弹出窗口。在 VS2008 中，弹出窗口只能包含纯文本 - 弹出窗口中的高级标记功能仅在 VS2010 之后出现

# jpa - PlayFramework : Display data from 2-table join, having 2 different bean

> ID：11305839
> 
> 赞同：1
> 
> 时间：2012-07-03T06:51:00.357
> 
> 标签：jpa, join, playframework, javabeans

I have 2 tables and 2 beans, these beans mapped with tables.
Table - Bean :
m_student - MStudentBean.java
m_book - MBook.java

Now, I have to display data like
student_id , student_name , student_contact + book_nums , book_names.

For this I have to join both tables and then display the data. I want to know that how to return data in views -
I can make new bean and then populate data in bean using join query & return this bean for display. Is it good idea to make new bean here ?
OR
I can make list where based on student_id populate both tables data in respective bean and then add both bean in list and then return this list for display.
How to do this in playframework.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:51:08.920

上述问题的有用链接 -

[http://www.java2s.com/Code/Java/JPA/OneToManyMappedBy.htm](http://www.java2s.com/Code/Java/JPA/OneToManyMappedBy.htm)

[http://viralpatel.net/blogs/hibernate-one-to-many-annotation-tutorial/](http://viralpatel.net/blogs/hibernate-one-to-many-annotation-tutorial/)

# jquery - 在选定的菜单项上添加一个类

> ID：11305842
> 
> 赞同：2
> 
> 时间：2012-07-03T06:51:18.677
> 
> 标签：jquery, css

我有一个菜单。

```
 <div id="ReportMenu" class="left-box" style = "width: 250px;">
            <p class="section-title">
               <span>Select Report : </span>
            </p>
               <ul id="left-box" class="menu-left-box">
                    <li id="menu_1" class="selected"><a href="#"  onclick="getPartial(1);">A</a></li>
                    <li id="menu_2"><a href="#" onclick="getPartial(2);">B</a></li>
                    <li id="menu_3"><a href="#" onclick="getPartial(3);">C</a></li>
                    <li id="menu_4"><a href="#" onclick="getPartial(4);">D</a></li>                      
    </ul>   
     </div> 
```

当用户单击该菜单项时，我需要将菜单项设为粗体。当用户单击其他菜单项时，应删除前一个菜单项上的类。我将不得不在 getPartial() 方法中编写 Jquery 代码。

我怎样才能做到这一点？

谢谢，马库斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T07:21:05.200

嗨，现在你可以`jquery`像这样使用函数

**现场演示** [http://jsfiddle.net/Ef365/1/](http://jsfiddle.net/Ef365/1/)

**HTML**

```
<div id="ReportMenu" class="left-box" style = "width: 250px;">
            <p class="section-title">
               <span>Select Report : </span>
            </p>
               <ul id="left-box" class="menu-left-box">
                    <li><a href="#">A</a></li>
                    <li><a href="#">B</a></li>
                    <li><a href="#">C</a></li>
                    <li><a href="#">D</a></li>                      
    </ul>   
     </div> 
```

**CSS**

```
.selected{
font-weight:bold;
    font-size:45px;

} 
```

**jQuery**

```
$(document).ready(function() {

        $("#left-box > li").click(function(){
        $("#left-box > li").removeClass('selected');
            $(this).addClass('selected');

        })

}); 
```

**现场演示** [http://jsfiddle.net/Ef365/1/](http://jsfiddle.net/Ef365/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T06:57:27.333

```
function getPartial(variable)
{$(".menu-left-box li").css("font-weight","normal");
$(".menu-left-box li:eq("+(variable-1)+")").css("font-weight","bold");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T07:15:39.710

尝试这个。

```
function getPartial(n) {
    $(".menu-left-box li a").css("font-weight","normal");
    $(this).css("font-weight","bold");
} 
```

# php - 从mysql查询中选择单行并将其保存到变量

> ID：11305843
> 
> 赞同：0
> 
> 时间：2012-07-03T06:51:21.110
> 
> 标签：php, mysql, select

如何从 mysql 查询中选择一行并将其保存到变量中。这是我目前使用的完整代码：

```
 <?php
    header('Content-Type: text/html; charset=utf-8');
    include 'config.php';

    // Connect to server and select databse.
    mysql_connect("$dbhost", "$dbuser", "$dbpass")or die("cannot connect");
    mysql_select_db("$dbname")or die("cannot select DB");

    $IND=$_POST['id'];

    $IND = stripslashes($IND);
    $IND = mysql_real_escape_string($IND);

    $sql = "select * from table where IND='$IND'";
    $result=mysql_query($sql);

       $row = mysql_fetch_array($result);
      $number = $row['number'];

    // Mysql_num_row is counting table row
    $count=mysql_num_rows($result);

    if ($count == 1) {
       $message = mysql_fetch_assoc($result);
        $message['status'] = 'ok';
        $message = array($message);

    } else {
         $message = mysql_fetch_assoc($result);
        $message['status'] = 'error';
        $message = array($message);
    }

    header('Content-Type: application/json');
        print '{"key":'. json_encode($message) .'}';
?> 
```

但是当我使用`$row = mysql_fetch_array($result); $number = $row['number'];`JSON 编码的 $message 时显示未定义。

那么如何从 mysql 查询中选择一条记录并使我的所有其余代码也可以工作呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:26:15.537

将变量声明`$message`为`array`，然后声明条件`assign`中的值`if`。尝试如下：

```
$message=array();
$count=mysql_num_rows($result);

    if ($count == 1) {
       $message = mysql_fetch_assoc($result);
        $message['status'] = 'ok';
        $message = array($message);

    } else {
         $message = mysql_fetch_assoc($result);
        $message['status'] = 'error';
        $message = array($message);
    } 
```

# javascript - 动画不透明度弄乱了我的文字

> ID：11305844
> 
> 赞同：4
> 
> 时间：2012-07-03T06:51:22.997
> 
> 标签：javascript, jquery, css

我正在尝试创建以下效果：当我将**鼠标悬停**在我的链接上时，该链接会改变颜色，这部分工作但我的代码的问题是当我悬停时我看不到我的文本。我知道我可以通过将图像添加到我的跨度和锚标记来解决这个问题，而且我也知道有一个可以为颜色设置动画的插件，但是***如果可能***的话，我想在没有背景图像和插件的情况下解决这个***问题***。那可能吗？
我创建了这个[FIDDLE](http://jsfiddle.net/kyWth/3/)让你看到我的问题。

我的代码：

```
$(document).ready(function () {
    $('.link').hover(function () {
        var heightCheck = $(this).outerHeight();
        //alert(heightCheck);
        $(this).stop().animate({
            opacity: 0
        }, 1000);
        $('.yellow').height(heightCheck);
        $('.yellow').css({
            'margin-top': -heightCheck
        });
    }, function (heightCheck) {
        $(this).stop().animate({
            opacity: 1
        }, 1000, function () {
            $('.yellow').css({
                'margin-top': +heightCheck
            });
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T07:24:38.287

好吧，您已经在使用 jQuery，为什么不使用 jQuery UI（您引用的插件）并使用一个元素完成所有操作。

想一想，你会记得`.yellow`每次想要这样的链接时都包含那个额外的跨度吗？

另外，为什么不使用渐进增强并使用 CSS 来完成这一切呢？你甚至可以为 IE 做一个 jQuery 后备？

请参阅我附加的小提琴。

[http://jsfiddle.net/nzcGy/3/](http://jsfiddle.net/nzcGy/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T07:05:28.010

如果我了解您在这里要实现的目标，那么这似乎可以通过一行 CSS 来解决。例如..

```
.link:hover { background-color: yellow;} 
```

您看不到文本的原因是导致 opacity: 0 使其不可见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T07:25:48.437

我玩弄不透明度来得到这个结果，现在看起来好多了[http://jsfiddle.net/kyWth/37/](http://jsfiddle.net/kyWth/37/)链接的不透明度和跨度不透明度现在都设置为 0.5。离你想要的很近吗？

**更新在这里**[http://jsfiddle.net/kyWth/39/](http://jsfiddle.net/kyWth/39/)对您的代码进行了更改，效果很好，您也不需要跨度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T07:21:15.947

更改它，以便将灰色背景颜色应用于 li 样式而不是链接本身。取消 .link 的动画不透明度线。

也许是这样的？[http://jsfiddle.net/5bXHW/](http://jsfiddle.net/5bXHW/)

# python - 如何将系统调用输出重定向到字符串

> ID：11305847
> 
> 赞同：0
> 
> 时间：2012-07-03T06:51:29.753
> 
> 标签：python, unix, system-calls

> **可能重复：**
> [管道子流程标准输出到变量](https://stackoverflow.com/questions/4514751/pipe-subprocess-standard-output-to-a-variable)

我正在运行一个 python 程序：

```
import os
os.system("ls") # ls command runs on the terminal 
```

要将输出存储在文件中：

```
os.system("ls > a.txt") 
```

我需要的是，它将输出存储在一些临时字符串中。那可能吗 ？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T07:02:16.303

```
import subprocess
output = subprocess.Popen(["ls"], stdout = subprocess.PIPE, stderr = subprocess.STDOUT).communicate()[0] 
```

在这里，您运行外部命令并将命令的 the和strewams`ls`重定向到变量。`stderr``stdout``output`

`stdout`必须使用参数和函数指定流必须重定向的`stderr`位置`Popen`。

# redirect - 用于查询字符串的 nginx 位置正则表达式

> ID：11305851
> 
> 赞同：6
> 
> 时间：2012-07-03T06:51:41.730
> 
> 标签：redirect, url-rewriting, nginx, webserver

我想将使用 perticuler 查询字符串直接发送到我的服务器的任何内容重定向到同一域中的其他位置。

如果用户来到

```
http://www.mydomain.com/?abc=js9sd70s 
```

我想将其重定向到

```
http://www.mydomain.com/otherpath/?abc=js9sd70s 
```

查询字符串`?abc=js9sd70s`应该与新 url 相同。

请建议 nginx 配置文件。

我已经尝试了以下代码的大部分替代方案。通过保留'\'之前？和 = 符号。

```
 location ~ /?abc=.* {
                rewrite ^/(.*)$ http://www.mydomain.com/otherpath/$1 permanent;
        } 
```

请建议我这个位置更改。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-03T12:21:49.227

简短的回答，试试这个配置：

```
location = / {
    if ( $arg_abc ) {
        rewrite ^ /otherpath/ permanent;
    }
} 
```

# java - 使用带有 EJB3 和 Postgres 的 SERIAL 和 BIGSERIAL

> ID：11305856
> 
> 赞同：1
> 
> 时间：2012-07-03T06:51:59.053
> 
> 标签：java, ejb, ejb-3.0, postgresql-9.1

如何在 ejb3 和 PostgreSQL 中使用 Serial 和 bigSerial？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:10:12.257

假设当您说 EJB3 时，您打算使用[Java Persistence API (JPA)](http://en.wikipedia.org/wiki/Java_Persistence_API)，它是 Java EE 5 中 EJB3 规范的一部分，并在 Java EE 6 中分离为 JPA 2：

使用`Integer`or `Long`（通常`@Column`的注释）和[`@GeneratedValue`](http://docs.oracle.com/javaee/6/api/javax/persistence/GeneratedValue.html)带有 . 的注释来映射它[`@SequenceGenerator`](http://docs.oracle.com/javaee/6/api/javax/persistence/SequenceGenerator.html)。

假设您的`serial`or`bigserial`列是一个标识列，并且您使用的是 Java EE 6 中的 JPA 2，您将编写如下内容：

```
@Entity
@Table(name = "thetable")
public class TheTable implements Serializable {

    @Id
    @SequenceGenerator(name="tablename_id_seq", sequenceName="tablename_id_seq", allocationSize=1)
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator="tablename_id_seq")
    @Basic(optional = false)
    @NotNull
    @Column(name = "id", updatable=false)
    private Integer id;

    // other columns...

    // then accessors ("getters and setters")

} 
```

如果是 BigSerial，则使用`Long`代替`Integer`，否则无需更改。

我没有检查以上内容在 EJB3 中包含的原始 JPA 的 Java EE 5 中是否有效。如果您需要在 Java EE 5 上支持 JPA1，您可能需要进行更多检查。如果您必须支持 Java EE 5，我建议您从 JPA 的*JSR* [220 规范](http://jcp.org/aboutJava/communityprocess/final/jsr220/index.html)开始，但最好还是迁移到 JPA2 和 Java EE 6 容器。

 *请注意，*应该*可以简单地使用`GenerationType.IDENTITY`并避免为每个实体手动定义序列。不幸的是，至少对于 Hibernate，它假设您想对*所有*表使用全局“休眠”序列，这很愚蠢。

`allocationSize=1`很重要。令人沮丧的是，JPA 指定最小 fetch 大小为 50，并期望序列在`nextval()`被调用时以 50 的跳跃递增。除非您的序列是这样定义的，否则您将得到重复的键错误。

您将需要一个`META-INF/persistence.xml`文件来启用 JPA。对实体的访问是通过[`EntityManager`](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html)您从 中获取的，[`EntityMangerFactory`](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManagerFactory.html)或者更常见的是通过使用[`@PersistenceContext`](http://docs.oracle.com/javaee/6/api/javax/persistence/PersistenceContext.html). 请参阅 JPA 文档和关于 'net.

大多数应用程序服务器都带有 JPA 实现。Glassfish 3 附带 EclipesLink 和 JBoss AS 7 附带 Hibernate 4。请参阅应用程序服务器的文档和 JPA 规范。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T11:14:09.723

GenerationType.IDENTITY 适用于连续剧

`CREATE TABLE vmb_mails (ID SERIAL PRIMARY KEY ,TITLE TEXT ........`

 `````
@Entity
@Table(name="vmb_mails")
@NamedQueries(
    @NamedQuery(name="getAllMails",query="SELECT  m from Mail m ORDER by m.entDate DESC ")
)
//@SequenceGenerator(name="Mails_Seq_Gen",sequenceName="vmb_mails_seq",allocationSize=1)
public class Mail implements Serializable
{
    private long id;
    private String title;
    private String fromAddr;

    public Mail()
    {

    }
    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    @Column(name="ID")
    public long getId() {
        return id;
    }
    public void setId(long id) {
        this.id = id;
    }

........... 
`````*

# css - 如何更改 Bootstrap 下拉列表的形式？

> ID：11305858
> 
> 赞同：3
> 
> 时间：2012-07-03T06:52:01.093
> 
> 标签：css, twitter-bootstrap, drop-down-menu

我需要更改下拉列表的形式。

我有什么：http: [//jsfiddle.net/gnEAe/5/](http://jsfiddle.net/gnEAe/5/)

这是我想做的说明：http: [//imgur.com/PI0j9](http://imgur.com/PI0j9)

我用这个css改变了边界：

```
 .nav
 .dropdown-menu {
-webkit-border-radius: 0px;
-moz-border-radius: 0px;
border-radius: 0px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T07:40:04.443

对 JSFiddle 有一点麻烦，并想出了这个。由于睡眠不足，这并不令人惊奇，但这是一个开始。希望这对您有所帮助。

**CSS：**

```
.container {
  border-bottom: 1px solid #FFF;
}
ul.nav li.dropdown:hover ul.dropdown-menu {  
  display:block;    
  margin: 0px 0px 0px 10px;
  border-bottom: 1px solid #000;  
  border-left: 1px solid #000;
  border-right: 1px solid #000;
  border-top: none;
  border-top-left-radius:0px;
}
.navbar .dropdown-menu:before, .navbar .dropdown-menu:after {
  border:none;   
}
.navbar .nav > li > a {
  margin: 0px 10px;
  border-top: 1px solid #FFF;  
  border-left: 1px solid #FFF;
  border-right: 1px solid #FFF;
  border-top-right-radius: 5px;
  border-top-left-radius: 5px;
  color: #000;
  text-shadow:none;
}
.navbar .nav > li > a:hover, .navbar .nav > li > a:active{
  border-top: 1px solid #000;  
  border-left: 1px solid #000;
  border-right: 1px solid #000;
  border-top-right-radius: 5px;  
  border-top-left-radius: 5px;
  color: #000;
  text-shadow:none;
}
a.menu:after, .dropdown-toggle:after {
    content: none;
} 
```

**HTML：**

```
<div class="navbar ">
     <div class="container">
        <ul class="nav pull-left">

          <li><a href="index.html"><b>Home</b></a></li>

          <li class="dropdown">
            <a href="#" class="dropdown-togle" data-toggle="dropdown">
            <b>Download</b>
            <b class="caret"></b></a>
          <ul class="dropdown-menu">
          <li><a href="#">Link</a></li>
            <li><a href="#">Link2</a></li>
            </ul>
            </li>
          <li><a href="faq.html"><b>F.A.Q.</b></a></li>
          <li><a href="#" onclick="openWin()"><b>Support</b></a>
          </li>     
        </ul>
    </div> 
```

这里也是一个用于实时预览的 JSFiddle 版本。

[http://jsfiddle.net/KckU3/1/](http://jsfiddle.net/KckU3/1/)

问候

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T16:33:41.273

这是一个似乎可以为您提供所需样式的设置：

```
.nav-tabs a { 
    color: #000; 
}
.nav-tabs a:hover {
    color: #444;
}
.nav-tabs {
    border-bottom: none;
}
.nav-tabs .dropdown-menu {
    margin: -1px 0 0;
    z-index: 999;
    -webkit-border-top-right-radius: 4px;
       -moz-border-radius-topright: 4px;
            border-top-right-radius: 4px;
}
.nav-tabs > li > a {
    position: relative;
    z-index: 1000;
}
.nav-tabs > li > a:hover {
    border-color: transparent;
    background: transparent;
}
.nav-tabs > li.dropdown.open > a {
    border-color: #000 #000 #fff;
    background: #fff;
}
.dropdown-menu {
    border-color: #000;
}
.nav li.dropdown.open .caret, .nav li.dropdown.open.active .caret, .nav li.dropdown.open a:hover .caret {
    border-top-color: #000;
    border-bottom-color: #000;
} 
```

[**http://jsfiddle.net/JR9sd/**](http://jsfiddle.net/JR9sd/)

获得正确的菜单轮廓的关键是调整`z-index`选项卡和下拉菜单的选项卡，使选项卡位于其下拉菜单的顶部。通过`border-bottom-color`将活动选项卡设为白色，您可以有效地隐藏下拉菜单的顶部边框。

# ruby-on-rails - 使用范围之类的关联

> ID：11305863
> 
> 赞同：0
> 
> 时间：2012-07-03T06:52:38.443
> 
> 标签：ruby-on-rails, activerecord, arel

如果我有以下课程

```
class User
    has_many :documents
end

class Document
    belongs_to :user
end 
```

我希望能够做到以下几点

```
User.where("id > 200").documents 
```

应该生成类似的 SQL

```
select * from documents
join users on documents.user_id == users.id
where users.id > 200 
```

但是activerecord并不是那么聪明。期望开箱即用是一件不合理的事情吗？

== 一个可能的抗 DRY 解决方案 ==

```
class User
    has_many :documents
    def self.documents
        Documents.joins(:users).merge(self.scoped)
    end
end 
```

但这不是很干，因为它似乎复制了我已经定义的关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:28:23.627

No you can't do that with ActiveRecord. Rule of thumb - the class you start calling methods on, is the one that the returning objects are. So doing User.whatever will always return User objects. This pretty much eliminates the possibility to do what you want.

If you want to get Document objects, you need to start querying for them on the Document class instead. You could always define you user specific scopes in the User model and reuse them in your Document model for the sake of DRY.

```
class User < ActiveRecord::Base
  scope :foo, where("users.id > 200")
end

class Document < ActiveRecord::Base  
  belongs_to :user

  scope :bar, joins(:user).merge(User.foo)  
end 
```

This effectively lets you use the scope defined in User (and which is user specific) in your Document model. I would also claim in that User.where("id > 200").documents makes less sense than Document.where("users.id > 200") (join skipped intentionally).

So I personally think you are just trying to approach this issue from the wrong end :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:59:49.687

尝试这个：

```
Document.joins(:user).where('user.id > ?', 200) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T07:38:57.233

对于您的示例类，您只需查询 表`user_id`中的字段`documents` ：

```
Document.where("user_id > 200") 
```

# git - 签出其他分支时，Git fetch/rebase master 分支

> ID：11305864
> 
> 赞同：4
> 
> 时间：2012-07-03T06:52:43.900
> 
> 标签：git, branch, git-pull, git-checkout

目前，当我在本地功能分支上工作以获取最新更改时，我需要执行以下操作：

```
git checkout master
git fetch
git rebase
git checkout my-feature
git rebase master 
```

有没有更简单的解决方案，只需将更改拉到主分支而不切换到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:12:15.437

我认为 Git 将始终切换到`master`幕后执行变基（考虑到`rebase`从目标分支的结帐开始：
请参阅 " [`git rebase`，跟踪 ' `local`' 和 ' `remote`'](https://stackoverflow.com/questions/3051461/git-rebase-keeping-track-of-local-and-remote/3052118#3052118) "）。

您只需使用快捷方式[`git pull --rebase`](http://git-scm.com/docs/git-pull)：

```
git pull --rebase master:master
git checkout my-feature
git rebase master 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T07:47:44.737

我认为您可以只执行 a ，`git fetch`然后执行一个`git rebase origin/master`That 应该将您的主题分支重新定位为 master 。不知道提取是否真的有必要。

# jquery - jQuery 图像转换

> ID：11305872
> 
> 赞同：0
> 
> 时间：2012-07-03T06:53:32.420
> 
> 标签：jquery

我似乎无法理解我必须在这里做什么。我正在尝试创建一个简单的图像幻灯片，并试图弄清楚如何使它工作。它没有通过我的 for 循环，我不明白为什么。这是我的代码的一个小提琴：http: [//jsfiddle.net/xnEGt/](http://jsfiddle.net/xnEGt/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:15:13.310

这里：http: [//jsfiddle.net/xnEGt/6/](http://jsfiddle.net/xnEGt/6/)

什么问题：

1.  图片必须首先通过 CSS 隐藏，只有第一张图片可见
2.  通过使用 for 循环，所有图像将只显示一次。请注意， .delay() 不会影响循环，因此所有迭代都将立即进行
3.  您可以通过使用 setTimeout 的递归实现来解决此问题
4.  `.get(0)`和`.get(1)`选择器也错了，`nth-child(i)`改用。

    ```
    var slideCount = $('.slider div.slide').length;
    nextPic(0);

    function nextPic(i){

        var next = (i+1)%(slideCount+1);

        $('.slider div:nth-child('+i+')').fadeOut(100);
        $('.slider div:nth-child('+next+')').fadeIn(100);  

        setTimeout(function(){nextPic(next);},1000);
    } 
    ```

    或者使用`.get()`选择器的更紧凑的实现：http: [//jsfiddle.net/xnEGt/7/](http://jsfiddle.net/xnEGt/7/)

# c# - 选择新表后加载操作失败 - 取消选择后再次工作

> ID：11305873
> 
> 赞同：0
> 
> 时间：2012-07-03T06:53:34.410
> 
> 标签：c#, oracle, odp.net, visual-studio-lightswitch

我目前在将 Visual Studio LightSwitch 2010 与 Oracle 数据库和 ODP.NET 结合使用时遇到了一个非常奇怪的问题。

到目前为止，我已将所有必要的表格添加到 LightSwitch 应用程序中，并为所有表格创建了屏幕——它可以正常工作。

然后我从 Oracle 数据库中添加/选择了一个新表 - 让我们称之为`errorcodes`- 并遇到了问题。只要我让`errorcodes`表被选中，我总是会收到错误消息：

> 查询“dtFacilities_All”的加载操作失败。远程服务器返回错误：NotFound。

有趣的是，在我选择新表**之前**`dtFacilities_All`，它一直有效。设施的屏幕是您启动应用程序时的第一个屏幕 - 如果我选择另一个第一个屏幕，我会在新启动屏幕的表格中遇到相同的错误。

 **当我取消选择`errorcodes`表格时，一切都会再次正常运行。似乎它与`errorcodes`桌子本身有关 - 但我不知道是什么。

该表`errorcodes`有一个主键集，所以这不是问题。

我希望有一个人可以帮助我。

*堆栈跟踪*

```
 {System.ServiceModel.CommunicationException: The remote server returned an error: NotFound. ---> System.Net.WebException: The remote server returned an error: NotFound. ---> System.Net.WebException: The remote server returned an error: NotFound.
   at System.Net.Browser.BrowserHttpWebRequest.InternalEndGetResponse(IAsyncResult asyncResult)
   at System.Net.Browser.BrowserHttpWebRequest.<>c__DisplayClassa.<EndGetResponse>b__9(Object sendState)
   at System.Net.Browser.AsyncHelper.<>c__DisplayClass4.<BeginOnUI>b__0(Object sendState)
   --- End of inner exception stack trace ---
   at System.Net.Browser.AsyncHelper.BeginOnUI(SendOrPostCallback beginMethod, Object state)
   at System.Net.Browser.BrowserHttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelAsyncRequest.CompleteGetResponse(IAsyncResult result)
   --- End of inner exception stack trace ---
   at System.ServiceModel.DomainServices.Client.WebDomainClient`1.EndQueryCore(IAsyncResult asyncResult)
   at System.ServiceModel.DomainServices.Client.DomainClient.EndQuery(IAsyncResult asyncResult)
   at Microsoft.LightSwitch.ClientGenerated.Implementation.DomainContextClient.EndQueryCore(IAsyncResult asyncResult)
   at System.ServiceModel.DomainServices.Client.DomainClient.EndQuery(IAsyncResult asyncResult)
   at System.ServiceModel.DomainServices.Client.DomainContext.CompleteLoad(IAsyncResult asyncResult)} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:15:57.617

对此进行更新：

该表`errorcodes`包含一个名为 ISLOSS 的列。该列的类型为`NUMBER(1,0)`- LightSwitch 将其作为布尔值正确映射到实体中。当我将该列的数据类型更改为`NUMBER(2,0)`一切正常时。

似乎 lightswitch 对此数据类型 ( `NUMBER(1,0)`) 有问题。但我真的不知道如何解决它 - 将数据类型更改`NUMBER(2,0)`为只是一个临时的。解决方法..**

# powershell - 闭包编译器和 PowerShell - 如何在控制台中“静音”警告？

> ID：11305874
> 
> 赞同：0
> 
> 时间：2012-07-03T06:53:35.870
> 
> 标签：powershell, google-closure-compiler

我正在尝试从 PowerShell 内部运行 Closure Compiler：

```
& $javaPath -jar $closurePath --js $jsCombinedPath --js_output_file $jsMinifiedPath 
```

它将缩小的文件写入控制台`$jsMinifiedPath` *并*在控制台中输出。如果有警告，那么它也会将它们扔到控制台中。

有没有办法阻止它写入控制台？我试过了

```
& $javaPath -jar $closurePath --js $jsCombinedPath --js_output_file $jsMinifiedPath  | out-null 
```

但它不起作用（我是 PowerShell 的新手，所以我不确定这是否正确）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:06:19.523

验证 $jsMinifiedPath 不为空。如果是，编译器将继续使用标准输出。

# jquery - Python Pyramid 视图中的异常管理

> ID：11305878
> 
> 赞同：3
> 
> 时间：2012-07-03T06:54:00.097
> 
> 标签：jquery, python, forms, exception-handling, pyramid

我正在编写 Python Pyramid 项目，我使用 jQuery 和 jquery.form.js。我希望我的观点能够同时处理 HTTP 和 AJAX 帖子（我不确定这是否是最好的主意，但这可能是这里另一个问题的内容）。

现在我`self.request.session.flash()`在发送 HTTP POST 并发生错误时用于错误通知。但是当发布 Ajax 时，我会返回 HTTPOk() 或 HTTPServerError() 响应，这样我就可以轻松地向用户显示错误消息：

```
$('.ajax_form').ajaxForm({
    error: function(xhr, textStatus, err){
        $('.ajax_messages>.alert').hide().siblings('.alert-error').show().children('p').text(xhr.responseText);
    },
    success: function(responseText, statusText, xhr){
        $('.ajax_messages>.alert').hide().siblings('.alert-success').show().children('p').text(xhr.responseText);
    }
}); 
```

但正如[Loïc Faure-Lacroix](https://stackoverflow.com/a/11297263/1145266)建议的那样，我可以为 Ajax 和 HTTP 请求发送 dict，这样可以简化代码。

什么是更好的主意？抛出异常时我应该从视图中返回什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T17:47:47.647

这个想法是返回一个包含您想要在 json 响应中的值的字典。此 dict 可以通过 json 或您的模板呈现。在错误情况下，您可以将响应状态设置为 500。如果您所做的一切都是相同的（json 和 html 需要相同的数据，相同的响应代码），这将有效。否则你的生活会很艰难，最好把它分开。

```
@action(name='ftp', renderer='templates/ftp.pt')
@action(xhr=True, renderer='json', name='ftp')
def ftp_ajax(self):
    log.debug('View: %s', 'ftp (ajax)')

    if 'form.submitted' in self.params:
        try:
            self.config.save(self.params)
        except:
            request.response.status = 500
            return {'status': 'error', 'error_msg': 'some error'}
        else:
            return {'status': 'success'}

    request.response.status = 400
    return {'status': 'error', 'error_msg': 'invalid request'} 
```

您所要做的就是确保您的模板可以处理 'status' 和 'error_msg' 字段，然后一切顺利。同样，这仅在模板的要求是您为 json 返回的内容的子集时才有效。

# c# - 在 Text-to-Speech C# 应用程序中操作“speaker voicer”

> ID：11305879
> 
> 赞同：0
> 
> 时间：2012-07-03T06:54:01.920
> 
> 标签：c#, .net, text-to-speech

我正在开发 C# 中的文本转语音应用程序。如何通过 C# API 配置其音调？或者，我是否需要为该功能下载库？例如：`Microsoft Sam`的声音，现在我也想配置一个自定义声音。

有可能吗？'SpeechSynthesizer' 是这样做的关键之一吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:23:26.700

看看[这个](https://stackoverflow.com/questions/11130935/are-there-any-other-text-to-speech-voices-for-net)关于改变声音的质量保证。如果您安装了多个语音，您根本无法使用 C# 来操作语音，除非告诉它使用哪种语音。[您可以使用语音合成标记语言 (SSML)](http://www.w3.org/TR/speech-synthesis11/)调整语音的某些特征，例如音高和韵律，但这些都是更细微的变化，不会改变整体语音。要修改语音，您需要安装一个与您正在使用的 TTS 引擎兼容的语音。这些语音包带有预先录制的您感兴趣的语音音素。一些公司，如[Nuance](http://www.nuance.com/for-business/by-product/automotive-products-services/vocalizer-for-automotive/index.htm)，会为您创建自定义语音，但这非常昂贵。

# php - 带有jquery的选择选项中的php post方法

> ID：11305880
> 
> 赞同：-1
> 
> 时间：2012-07-03T06:54:09.447
> 
> 标签：php, jquery, mysql, html

php代码

```
if(empty($_POST) === false)
{
    $required_fields = array('s_group', 's_choice');
    foreach($_POST as $key=>$value)
    {

        if(empty($value) && in_array($key, $required_fields) === true)
        {
            $error = 'All * fields are required';
            break 1;
        }

    }

    if(empty($error) === true)
    {
        echo $_POST['s_group'];
        echo $_POST['s_choice'];
        echo $_POST['choice1'];
        echo $_POST['choice2'];
    }
}

echo $error; 
```

这是html代码

```
<form action="create_room.php" method="post" name="form1">
<select name="s_group">
    <option value=""><-- Please Select Item --></option>
    <?
    $strSQL = "SELECT * FROM room_group_options ORDER BY op_id";
    $objQuery = mysql_query($strSQL);
    while($objResult = mysql_fetch_array($objQuery))
    {
    ?>
    <option value="<?=$objResult["op_id"];?>"><?=$objResult["group"];?></option>
    <?
    }
    ?>
  </select>

  <script src="http://code.jquery.com/jquery-latest.js"></script>

 <p>Number of Choice :
 <select id="pagelist" name = "s_choice">
     <option value=""><-- Please Select Item --></option>
     <option value="twoChoices">2 Choices</option>
     <option value="threeChoices">3 Choices</option>
     <option value="fourChoices">4 Choices</option>
     <option value="fiveChoices">5 Choices</option>
 </select>

 <div id="twoChoices" style="display:none">

  Insert your choice<br>
  1:<input type="text" name="choice1" /><br />
  2:<input type="text" name="choice2" /><br /> 

 </div>

 <div id="threeChoices" style="display:none">

    Insert your choice<br>
    1:<input type="text" name="choice1" /><br />
    2:<input type="text" name="choice2" /><br /> 
    3:<input type="text" name="choice3" /><br /> 

 </div>

  <script language="javascript">
  $("#pagelist").change(function()
  {
    var viewID = $("#pagelist option:selected").val();
    $("#pagelist option").each(function()
    {
        var hideID = $(this).val();
        $("#"+hideID).hide();
    });
    $("#"+viewID).show();   
  });
</script>

<input type="submit" name "submit" value="Create">
</form> 
```

我是 PHP 新手。填写所有空白后，选择选项并点击提交按钮，来自 s_group 和 s_choice 的值在 $_POST 但没有出现choice1 和choice2。

我怎样才能得到这些价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:03:14.837

仅创建文本输入按钮 Choice1、choice2 ... 的一个实例，并在更改页面列表时通过 javascript 隐藏/显示单个文本输入。你会在你的帖子中得到你的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T07:05:09.840

重写以下代码
插入您的选择

```
1:<input type="text" name="choice1" value = ""/><br />
2:<input type="text" name="choice2" value = ""/><br /> 
```

```
Insert your choice<br>
1:<input type="text" name="choice3" value = ""/><br />
2:<input type="text" name="choice4" value = ""/><br /> 
3:<input type="text" name="choice5" value = ""/><br /> 
```

并且不要重复您的选择名称。使您的 javascript 显示/隐藏 pagelist 更改上的选择 3、选择 4 和选择 5 按钮。

# android - 如何从 instanceiteItem() 函数启动新 Activity 实现 ViewPagerTabProvider

> ID：11305885
> 
> 赞同：0
> 
> 时间：2012-07-03T06:54:15.603
> 
> 标签：android, tabs, android-viewpager

我想在 instantiateItem() 函数下启动新活动。我对这个函数的理解是它只允许在这个函数本身下添加 TextView。是否可以在函数下方创建新的活动或意图？代码描述如下。

```
@Override
public Object instantiateItem(View container, int position) {

    RelativeLayout v = new RelativeLayout(mContext);

    TextView t = new TextView(mContext);
    t.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
            LayoutParams.FILL_PARENT));
    t.setText(mData[position]);
    t.setTextSize(30);
    t.setGravity(Gravity.CENTER);

    v.addView(t);

    ((ViewPager) container).addView(v, 0);

    return v;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:22:57.243

如果你想为每个页面设置不同的布局，那么你可以做这样的事情，在`instantiateItem`

```
View parent_view = null;

        if (position == 0) {
            parent_view = getViewForPageOne();

        } else if (position == 1) {
            parent_view = getViewForPageTwo();

        .........

        ((ViewPager) collection).addView(parent_view, 0);
        return parent_view;

    } 
```

和

```
private View getViewForPageOne(){
        View v = getLayoutInflater().inflate(R.layout.layout_page_one, null);
         TextView whatText =(TextView) v.findViewById(R.id.idOfTextView);
         whatText.setText("Page One");
         ....
         ....

         return v;
    } 
```

# asp.net - asp.net 应用程序中的角色库访问控制

> ID：11305896
> 
> 赞同：0
> 
> 时间：2012-07-03T06:54:58.347
> 
> 标签：asp.net, security

我想在 asp.net 应用程序中实现角色库访问控制。是否有任何预定义的东西。

我想要什么，我有不同的表单，不同的权限，用户对不同的表单有不同的访问权限。例如，User1 对 A 表单具有选择和编辑权限，但 User2 对 A 表单仅具有选择权限。在我的应用程序中，我想为用户设置动态权限。

请帮帮我。我不知道如何在 asp.net 中实现 RBAC。

如果您向我提供一些示例代码，那么这将对我有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T06:58:02.327

您可以查看[Membership 和 Role providers](http://weblogs.asp.net/scottgu/archive/2006/02/24/ASP.NET-2.0-Membership_2C00_-Roles_2C00_-Forms-Authentication_2C00_-and-Security-Resources-.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:05:27.343

您可以在 BlogEngine.NET 的源代码中找到一个不错的 RBAC 设计。注意它的成员资格和角色提供者，还有 Right 类和 Security 类。

[http://blogengine.codeplex.com/](http://blogengine.codeplex.com/)

# php - PHP 版本的 Python Clint 命令行工具？

> ID：11305900
> 
> 赞同：0
> 
> 时间：2012-07-03T06:55:28.550
> 
> 标签：php

是否有任何 PHP 库提供与 Kenneth Reitz 的Python [clint](https://github.com/kennethreitz/Clint)库类似的功能，尤其是缩进和颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:59:36.307

试试这个：

[https://github.com/maximebf/ConsoleKit](https://github.com/maximebf/ConsoleKit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T07:02:11.900

Symfony 项目包含一个非常好的[控制台组件](http://symfony.com/doc/master/components/console.html)，可以独立使用。

它用于微框架[Cilex](https://github.com/Cilex/Cilex)，看看可能会很有趣。

# php - 在codeigniter中从数据库中填充下拉列表

> ID：11305905
> 
> 赞同：1
> 
> 时间：2012-07-03T06:56:13.610
> 
> 标签：php, codeigniter

我在该表中有一个表有 3 个字段（类别 1，类别 2，类别 3）。现在我想填充下拉列表，如果下拉一个选择，下拉 2 值将从数据库中生成。谁能帮我。

我的控制器

```
 $this->load->model('quiz_mode');
            $arrStates = $this->quiz_mode->get_unique_catg1();

            foreach ($arrStates as $states)
            {
                $arrFinal[$category->category1 ] = $category->category1 ;
            }
            $data['category2'] = $arrFinal;
      function ajax_call() 
    {

        //Checking so that people cannot go to the page directly.
        if (isset($_POST) && isset($_POST['category1']))
        {

            $catogory = $_POST['category1'];
            $arrcategory = $this->sampl_mode->get_cities_from_catgo1($catogory);

            foreach ($arrcategory as $category)
            {
               $arrFinal[$category->category2] = $category->category2;
            }

            //Using the form_dropdown helper function to get the new dropdown.
            print form_dropdown('category2',$arrFinal);
        }
        else
        {
            redirect('logged_in_user'); //Else redire to the site home page.
        }
    } 
```

我的模特

```
function get_unique_catg1()
{

    $query = $this->db->query("SELECT DISTINCT category1  FROM sampl_table");

    if ($query->num_rows > 0) {
        return $query->result();
    }
}
    function get_cities_from_catgo1($category) {
    $query = $this->db->query("SELECT category2  FROM sampl_table WHERE category2 = '{$category}'");

    if ($query->num_rows > 0) {
        return $query->result();
    }
} 
```

我的观点

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
    <title>untitled</title>

        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function () {

                $('#catgo1-dropdown').change(function () {
                    var selCat1 = $('#catgo1-dropdown').val();
                    console.log(selCat1);
                    $.ajax({
                        url: "<?php echo base_url();?>index.php/sample/ajax_call", //The url where the server req would we made.
                        async: false,
                        type: "POST", //The type which you want to use: GET/POST
                        data: "category1="+selCat1, //The variables which are going.
                        dataType: "html", //Return data type (what we expect).

                        //This is the function which will be called if ajax call is successful.
                        success: function(data) {
                            //data is the html of the page where the request is made.
                            $('#cotegory').html(data);
                        }
                    })
                });
            });
        </script>
</head>

    <body>
    <div id="wrapper">
                <div id="catgo1-dropdown"><?php print form_dropdown('category1'); ?></div>
                <div id="cotegory2"></div>

            </div>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T07:20:40.630

有一个非常简单的解决方案

首先只显示第一个下拉列表
，然后当用户选择某个值时，通过 ajax 将其发送到控制器方法，该值将被接收并传递给模型。
在模型中应该有条件查询它将获取结果
然后返回控制器调用视图并将查询结果传递给它
您的视图应该包含此代码

```
<?php
foreach($queryresult as $row)
{
?>
<option value = "<?php echo $row->id?>"><?php echo $row->value;?</option>
<?php
}
?> 
```

在您第一次查看有下拉列表的位置时，它应该包含以下代码

```
<select name = "first_drop_down" id = "first_drop_down" onchange = "calljavascriptfunction();">
<?php foreach($first_drop_down_values as $row){?>
<option value = "<?php echo $row->id?>"><?php echo $row->value;?</option>
<?php}?> 
```

和

```
 <select name = "second_drop_down" id = "second_drop_down" >
 <option value = "0">please select first dropdown</option>
 </select> 
```

和ajax功能

```
function calljavascriptfunction(){

  $.ajax({
     type : 'POST',
     data : 'first_drop_down_id='+ $('#first_drop_down').val(),
     url : 'controller/method',
     success : function(data){
                 $('#second_drop_down').val(data);
     }
 });
} 
```

完成了，这也是一个教程

[http://mikeheavers.com/index.php/site/code_single/dynamic_dependent_dropdown_filtering_with_codeigniter_and_jquery](http://mikeheavers.com/index.php/site/code_single/dynamic_dependent_dropdown_filtering_with_codeigniter_and_jquery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-22T13:58:04.310

我`.html(msg);`在下拉菜单的 div 容器上使用

```
 <script type="text/javascript">
    $(document).ready(function() {  
    $('[name="wilaya"]').change(function () {  
            var input= this.value;
            //alert(input);
            $.ajax({
            url: "<?php echo base_url();?>/register/ajax_call",
            data: "input="+input
            })
            .done(function( msg ) {
            $(".commune").html(msg);
            }); }); 
      }); 
    </script> 
```

和控制器 Register.php 方法`ajax_call()`

```
public function ajax_call(){

if (isset($_REQUEST['input']))
        {
        //  echo("hello");
        $input = $_REQUEST['input'];
        $this->load->model('Pro_model');
        $commune=$this->Pro_model->get_dropdown_commune($input);
        //print_r($commune);
        //$this->load->view('registerpro_view', $commune); 
       echo form_dropdown('commune', $commune, 'Adrar');
        }

} 
```

并在模型端 Pro_model.php

```
function get_dropdown_commune($input)
{
$this->db->from('ea_commune');
$this->db->where('id_wilaya', $input);
$this->db->order_by('id');
$result = $this->db->get();
$return = array();
if($result->num_rows() > 0) {

foreach($result->result_array() as $row) {
$return[$row['id']] = $row['label_commune'];
}
}

        return $return;

} 
```

# security - 使用活动目录授权，但不永久加入域

> ID：11305910
> 
> 赞同：0
> 
> 时间：2012-07-03T06:56:57.840
> 
> 标签：security, authentication, active-directory

我有一个在 Windows 服务器上使用活动目录授权的网站

为了使用活动目录，操作系统必须加入活动目录域

现在，由于一些安全问题，服务器的管理员不想永久加入域

有没有办法以编程方式加入域，当网站需要授权用户，然后连接到域，授权后，断开与域的连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T03:03:03.697

如果您真的想以编程方式加入域，可以查看此[SO 帖子](https://stackoverflow.com/questions/4183759/programmatically-join-windows-machine-to-ad-domain)。

另一种选择是在绑定到 Active Directory 时提供用户名和密码，但这意味着您需要找到一种方法来安全地存储用户名和密码。[您可以使用DPAPI](http://msdn.microsoft.com/en-us/library/ms995355.aspx)安全地存储它们

# php - php中的日期和时间函数

> ID：11305911
> 
> 赞同：-2
> 
> 时间：2012-07-03T06:57:00.763
> 
> 标签：php, date, time

我需要得到 +7 天的结果，为此我做到了：

```
<?php 
echo "Today is ".date('Y-m-d H:i:s'); 
echo "<br/>";
echo "After 7 days: ".strtotime('+7 day');
?> 
```

如何以可读的形式格式化 +7 天的结果。例如：23-05-2012 10:09:03

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T06:59:12.137

用这个

```
echo date('Y-m-d H:i:s',strtotime('+7 day')); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T06:59:25.287

这边走：

```
echo "Today is ".date('Y-m-d H:i:s'); 
echo "<br/>";
echo "After 7 days: ".date('Y-m-d H:i:s',strtotime('+7 day')); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T06:03:09.097

您想计算从今天起 7 天的日期。

有几种方法可以解决 - 第一种方法是执行以下操作：

echo $after7days = date('Ymd H:i:s', time() + 60 * 60 * 24 * 7);

基本上，你取当前时间戳，以秒为单位，加上 60 * 60 * 24 * 7，即一周的秒数。

另一种方法是：

$after7days = strtotime("+7 天");

结果将完全相同，$after7days 的值将等于从现在开始一周后的时间戳，但它使用 PHP 自己的 strtotime() 函数。

当然，如果您需要以易于阅读的格式输出日期，您可以执行以下操作：

echo date('Ymd H:i:s',$after7days);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T07:00:20.663

结合这两个功能。

```
date('Y-m-d H:i:s', strtotime('+7 days')); 
```

[`date()`](http://www.php.net/manual/en/function.date.php)接受第二个参数，您可以在其中传递应该使用的 unix 时间戳。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T07:00:57.777

要在 php 中格式化日期，请使用该[`date`](http://php.net/manual/de/function.date.php)函数（您已经在代码中使用过它）。

像这样使用它：

```
echo "After 7 days: ".date('d-m-Y H:i:s',strtotime('+7 day')); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-03T07:01:01.200

您可以使用[strftime](http://php.net/manual/en/function.strftime.php)函数根据语言环境设置将 unix 时间戳格式化/转换为本地时间/日期。

# c++ - 复制构造函数中的类型

> ID：11305915
> 
> 赞同：0
> 
> 时间：2012-07-03T06:57:09.240
> 
> 标签：c++

> **可能重复：**
> [复制初始化和直接初始化在 C++ 中有区别吗？](https://stackoverflow.com/questions/1051379/is-there-a-difference-in-c-between-copy-initialization-and-direct-initializati)

```
Class A
{
public:
   //some member function call
private:
   int x;
   char a;
};
int main()
{
   A a;
   A b;
} 
```

嗨，当我调用或初始化上述类的对象时，你能告诉我这些之间的区别吗

```
A a(b);
A a=b;
a=b; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T06:59:17.317

前 2 行调用复制构造函数，因为正在构造对象。最后一行将调用等号运算符来执行赋值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T07:00:10.497

```
A a(b);
A a = b; 
```

这些使用隐式生成的[复制构造函数](http://en.wikipedia.org/wiki/Copy_constructor)。

```
a = b; 
```

这个使用[赋值运算符](http://en.wikipedia.org/wiki/Assignment_operator_%28C%2B%2B%29)，它**不是初始化**，因为它不创建`A`对象：它只是给现有对象一个新值。

复制构造函数将有一个签名，例如

```
A(const A&); 
```

和赋值运算符

```
A& operator=(const A&); 
```

由于您的类不提供这些，因此编译器会合成它们并仅复制数据成员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T06:59:58.693

由于您的类没有任何显式复制构造函数，所有上述语句都会导致浅拷贝。

如果您声明了一个复制构造函数并重载了 = 运算符，那么

A a(b) 和 A a= b 将导致调用复制构造函数和

a= b 将导致调用 = 重载运算符

阅读[本文](http://www.learncpp.com/cpp-tutorial/911-the-copy-constructor-and-overloading-the-assignment-operator/)以获得更多理解

# java - 使用别名换出 bean 时找不到占位符

> ID：11305916
> 
> 赞同：3
> 
> 时间：2012-07-03T06:57:09.827
> 
> 标签：java, spring, javabeans, alias

[作为这篇关于 bean 别名的帖子](https://stackoverflow.com/questions/9124982/how-to-set-the-dynamically-a-bean-reference-in-spring)的后续

我正在尝试使用别名来做与上述帖子类似的事情，以便使用属性交换 bean 引用（字面意思与上述帖子的目的相同）。

但是，当我尝试它时，我得到了原因：**java.lang.IllegalArgumentException：无法解析占位符'crypto.provider'**

如果我使用委托将相同的占位符作为构造函数参数传递，它可以正常工作。下面是代码

```
#property file
crypto.provider = safenet 
```

应用程序上下文.xml

```
<beans>
    <alias name="${crypto.provider}" alias="defaultProvider" />
</beans> 
```

类：

```
@Component ("caesar")
public class CaesarCipherEncryptionProvider implements EncryptionProvider{
//implementation here
}

@Component ("safenet")
public class SafenetEncryptionProvider implements EncryptionProvider{
//implementation here
} 
```

测试用例

```
public class SafeNetEncryptionProviderTest extends AbstractIntegrationTest {

    @Autowired
    @Qualifier("defaultProvider") // note: Intellij can't find this bean
    private EncryptionProvider provider;

    @Test
    public void testEncryptDecrypt() throws Exception{
        String plaintext = "every.other.email.address.is.shorter.than.this.email.address" +
                "@long-email-addresses-incorporated.home-of-the-extra-long-email-addresses.com" +
                ".just.kidding.this.domain.is.really.German.de";
        byte[] plainTextAsBytes = plaintext.getBytes("UTF-8");

        byte[] encrypted = provider.encrypt(plaintext);
        String decrypted = provider.decrypt(encrypted);

        assertFalse(Arrays.equals(plainTextAsBytes, encrypted));
        assertEquals(plaintext, decrypted);
    }
} 
```

# c# - WCF Restful Service：正文编码自动更改？

> ID：11305921
> 
> 赞同：0
> 
> 时间：2012-07-03T06:57:46.750
> 
> 标签：c#, wcf, rest, .net-4.0

我有这样的 WCF 服务：

```
[ServiceContract]
public class SomeService
{
    [WebInvoke(UriTemplate = "/test", Method = "POST")]
    public string Test()
    {
        using (var reader = OperationContext.Current.RequestContext.RequestMessage.GetReaderAtBodyContents())
        {
            var content = reader.ReadOuterXml().Replace("<Binary>", "").Replace("</Binary>", "");
            return content;
        }
    }
} 
```

并且有一个这样的配置文件：

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="Project.SomeService">
        <endpoint address="" binding="webHttpBinding" contract="Project.SomeService"
                  bindingConfiguration="webHttpBinding_SomeService" behaviorConfiguration="endpointBehavior_SomeService" />
      </service>
    </services>
    <bindings>
      <webHttpBinding>
        <binding name="webHttpBinding_SomeService">
          <security mode="None"></security>
        </binding>
      </webHttpBinding>
    </bindings>
    <behaviors>
      <endpointBehaviors>
        <behavior name="endpointBehavior_SomeService">
          <webHttp helpEnabled="true" defaultOutgoingResponseFormat="Json" />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

* * *

但是当我使用 fiddler 和这个 url 来调用它时`POST`：

```
http://localhost:1111/SomeService.svc/Test 
```

与身体：

```
asdasd 
```

它反而返回`YXNkYXNk`，为什么会这样？

我的代码是 C#，框架 4，在 VS2010Pro 中构建。

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T07:05:04.570

*某些东西*是对结果或请求进行 base64 编码。ASCII 字节的`asdasd`输出与`YXNkYXNk`base64 编码时一样。

目前尚不清楚您是如何提供正文的，但我建议您使用[WireShark](http://wireshark.org)或[Fiddler](http://fiddlertool.com)查看确切的请求/响应，以确定发生 base64 编码的位置，然后找出原因，然后修复它。

编辑：现在我仔细查看了您的代码，看起来相当清楚。

您的请求可能包含*二进制*数据——这就是为什么您`Binary`在 XML 中有一个标签的原因。您决定忽略这一点，只将二进制数据的 XML 表示视为文本 - 但您不应该这样做。二进制数据通过 base64 以 XML 表示。所以，你应该：

*   将 XML 解析为*XML，*而不是将外部 XML 获取为字符串，然后执行字符串操作
*   `Binary`以字符串形式获取标签的内容
*   用于`Convert.FromBase64String`获取原始二进制数据
*   *如果您认为*二进制数据最初是文本，请使用`Encoding.GetString`将其转换回来

# java - 我在这段代码中嵌入了一个倒数计时器，但它没有

> ID：11305930
> 
> 赞同：0
> 
> 时间：2012-07-03T06:58:04.953
> 
> 标签：java, android, countdowntimer, post-increment

```
package com.android.tapme;

import android.os.Bundle;
import android.app.Activity;
import android.widget.*;
import android.view.*;

public class TapMe extends Activity {

private int countValue=0;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_tap_me);
    checkTapValue();
}
private void checkTapValue()
{
    Button tapButton=(Button)findViewById(R.id.tapButton);
    tapButton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            countValue++;
            TextView textView;
            textView = (TextView) findViewById(R.id.textView1);
            textView.setTextSize(40);
            textView.setText(Integer.toString(countValue)); 
        }
    });     

}
@Override
protected void onResume()
{
    super.onResume();
    checkTapValue();
}
} 
```

现在是 XML 文件。textView1 是按钮被点击的次数。timeElapsed 用于倒计时显示。事情是当我实现一个倒数计时器时它没有显示。我检查了所有小错误，比如显示器和背景的颜色是否相同；一切似乎都很好。可悲的是，我删除了倒数计时器的代码而没有备份。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#000000" >

<Button
    android:id="@+id/tapButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:layout_marginTop="186dp"
    android:padding="15dp"
    android:text="@string/tap_me"
    android:textSize="32dp" />

<TextView
    android:id="@+id/timeElapsed"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/tapButton"
    android:layout_marginTop="14dp"
    android:padding="@dimen/padding_medium"
    android:textColor="#FFFFFF"
    tools:context=".TapMe" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView2"
    android:layout_centerHorizontal="true"
    android:padding="@dimen/padding_medium"
    android:textColor="#FFFFFF"
    tools:context=".TapMe" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:16:08.587

尝试这个，

**您必须以preIncrement**方式`++countValue`或如下方式递增值

1.  `countValue = countValue + 1;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:02:49.827

你想这样做..

```
 countValue = countValue++; 
```

或者

```
++countValue 
```

您使用的运算符是后增量，即先分配然后递增..所以您的值（ 0 ）首先被分配，然后它被递增并丢失..您的变量值永远保持为零..

# c# - VWD2010 *.aspx.design.cs 文件无法正确自动生成

> ID：11305933
> 
> 赞同：0
> 
> 时间：2012-07-03T06:58:36.740
> 
> 标签：c#, visual-studio-2010, umbraco, login-control, loginview

昨天我开始编写 C# 以便为 Umbraco 开发用户控件，我遇到了一个众所周知的问题，我收到错误“当前上下文中不存在 * 名称”。我找到了针对该特定问题的无数答案，例如：

[修复 Web Developer Express 中的“名称在当前上下文中不存在”错误](https://stackoverflow.com/questions/6747551/fixing-name-does-not-exist-in-the-current-context-errors-in-web-developer-expr)

[当前上下文中不存在标签](https://stackoverflow.com/questions/6008588/label-doesnt-exist-in-the-current-context)

[http://forums.asp.net/t/1006588.aspx/1?The+name+xxx+Does+Not+Exist+in+the+Current+Context](http://forums.asp.net/t/1006588.aspx/1?The+name+xxx+Does+Not+Exist+in+the+Current+Context)

...等等等等。

然而，这些问题都没有帮助我解决我的问题，我仍然把头撞在墙上。

然后我发现我的标签及其控件会被我的 *.apsx.cs 文件发现，**只要我不将它们放在任何非 asp:-tag 中！**

我正在尝试使用自定义模板制作自定义登录控件，因为我需要 -tag。此外，我将它放在 LoginView 控件内部。

```
<asp:LoginView ID="MemberValidation" runat="server"> 
   <AnonymousTemplate>
     <asp:Login ID="MemberLogin" runat="server" OnLoggedIn="MemberLogin_OnLoggedIn">
        <LayoutTemplate>
           <asp:Literal ID="InformationMessage" runat="server"></asp:Literal>
        </LayoutTemplate>
   </AnonymousTemplate>
   <LoggedInTemplate>...</LoggedInTemplate>
</asp:LoginView> 
```

我的 LiteralControl（以及我拥有的所有其他 LiteralControls - 这只是一个小例子）没有自动注册到 *.aspx.design.cs 文件中，因此，在我的 *.aspx.cs 文件中无法访问它，但是如果我删除标签和标签，我的 LiteralControl 弹出。

但是，我需要这两个标签才能使代码按我的意愿运行，所以我的问题仍未解决：我能做什么？它是一个错误吗？

提前致谢， Brinck10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:41:03.687

如果我正确理解了您的问题，则 .cs 不能直接访问 Literal 控件，只要它放在`AnonymousTemplate`or`LayoutTemplate`标记内即可。

如果这是正确的，那是因为这些标签中的任何东西都是（正如你已经猜到的那样）模板并且不代表实际的运行时实例，并且编译器不能保证这些模板将被显示（例如用户已登录，所以`LoggedInTemplate`是而是显示），因此不会将这些控件自动公开给 .cs。

事实上，.cs 文件中唯一可以立即看到的就是`LoginView`控件。因此，要访问模板中的控件，您必须在运行时使用类似于以下的代码“找到”它们：

```
if (!User.Identity.IsAuthenticated)
{
    Login memberLogin = (Login)this.MemberValidation.FindControl("MemberLogin");
    Literal informationMessage = (Literal)memberLogin.FindControl("InformationMessage");
    informationMessage.Text = "Hello World";
} 
```

# android - 面向 Android 用户的公共 SQLite 数据库

> ID：11305937
> 
> 赞同：0
> 
> 时间：2012-07-03T06:58:59.550
> 
> 标签：android, database, sqlite

如果我使用 SQLite 创建一个 android 数据库，它将是本地的，仅适用于存储数据库的手机？

以及如何创建可以从不同手机使用和更新的数据库？例如，我有在线朋友的数据库，如果有人打开程序，那么它会在表中存储一个条目，所有用户的朋友都可以看到？

也许，一些关于创建远程数据库的教程（如果包含的数据库不是公共的）。我搜索了谷歌，但我发现的唯一内容是简单的数据库教程，据我推测，这些教程存储在手机内存中，这意味着只能通过特定手机访问。

提前谢谢你，
丹尼尔斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:03:31.950

如果你想拥有一个多人可以连接的远程数据库，你必须设置 MySQL 或类似的东西。那时，您必须设置某种可以连接的 API，然后您还必须担心访问控制。

我看到的最常见的一个是 PHP 前端，因此整个数据库连接在此处运行 HTTP 示例：[PHP API](http://www.helloandroid.com/tutorials/connecting-mysql-database)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:08:51.253

我相信有一种方法可以按照您的要求进行操作。您可以创建一个与本地数据库通信的 Web 服务，并使用同步将本地数据库的数据存储在在线数据库中。在线数据库不需要在 SQLite 中。

# django - 使用屏幕运行 django 定义启动 cron 作业

> ID：11305940
> 
> 赞同：0
> 
> 时间：2012-07-03T06:59:14.320
> 
> 标签：django, cron, gnu-screen

我想在启动时运行我的开发 django 服务器，所以我定义了以下 cron 作业：

```
@reboot screen -d -m django-admin.py runserver 192.168.0.28:8000 
```

但它没有用。

真正有趣的是，当我直接复制/粘贴到终端并执行它时，它工作得很好。

我什至尝试过这样的事情：

```
@reboot cd /home/ubuntu && /usr/bin/screen -d -m /usr/bin/python /usr/local/bin/django-admin.py runserver 192.168.0.28:8000 &> /home/ubuntu/cron.err 
```

为了确保我没有在错误的位置使用一些未定义的命令并检查了 cron.err 文件的内容，但它是空的。

而且（当然）当我直接从控制台触发它时，它会立即工作。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:39:38.770

如果您尝试在特定时间从 cron 运行它，它会起作用吗？例如：

```
50 12 2 8 * /usr/bin/screen -dmS set_from_cron 
```

# c# - DevExpress gridview如何编辑不可见列

> ID：11305941
> 
> 赞同：0
> 
> 时间：2012-07-03T06:59:16.680
> 
> 标签：c#, asp.net, devexpress

我正在使用 devexpress gridview，我想编辑不可见的列。

这是我的网格视图的一部分；

```
<dx:GridViewDataComboBoxColumn FieldName="COSTCENTERID" Visible="False"
                VisibleIndex="7">
</dx:GridViewDataComboBoxColumn> 
```

如您所见，可见属性设置为 False，因此它不会出现在表单上。我尝试添加 DataItemTemplate 和 EditTemplate 标签，但没有成功。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:20:16.387

将`EditFormSettings`Visible 设置为 True 应该可以解决您的问题

```
<EditFormSettings Visible="True" /> 
```

也看看[这个样本](http://www.devexpress.com/Support/Center/e/E256.aspx)

# php - 上传 .html 文件时从 html 中删除 Script 标签

> ID：11305944
> 
> 赞同：0
> 
> 时间：2012-07-03T06:59:30.757
> 
> 标签：php, javascript, jquery, html

我给了一个浏览按钮来上传文件。我想在上传 .html 文件并上传 html 文件时删除脚本标签及其内容。

如果有人有解决方案，请建议我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:06:52.563

在客户端..您可以将 html 附加到`iframe`

然后，尝试类似..

```
$(..documentElement).find('script').remove();

var htmlContent = $(..documentElement).html(); 
```

然后将 html 传递到服务器端。没试过，只是一个建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:21:33.770

```
 class html
{
    var $dir;
    var $rootdir;
    var $name;
    var $dirname;
    var $url;
    var $time;
    var $dirtype;
    var $nametype;

    function html($nametype='name',$dirtype='year',$rootdir='html')
    {
        $this->setvar($nametype,$dirtype,$rootdir);
    }

    function setvar($nametype='name',$dirtype='year',$rootdir='html')
    {
      $this->rootdir=$rootdir;
      $this->dirtype=$dirtype;
      $this->nametype=$nametype;
    }

    function createdir($dir='')
    {
        $this->dir=$dir?$dir:$this->dir;

        if (!is_dir($this->dir))
        {
            $temp = explode('/',$this->dir);
            $cur_dir = '';
            for($i=0;$i<count($temp);$i++)
            {
                $cur_dir .= $temp[$i].'/';
                if (!is_dir($cur_dir))
                {
                @mkdir($cur_dir,0777);
                }
            }
        }
    }

    function getdir($dirname='',$time=0)
    {
        $this->time=$time?$time:$this->time;
        $this->dirname=$dirname?$dirname:$this->dirname;

        switch($this->dirtype)
        {
        case 'name': 

        if(empty($this->dirname))
           $this->dir=$this->rootdir;fenzu.qqq80.com
        else
           $this->dir=$this->rootdir.'/'.$this->dirname;
        break;
        case 'year':
        $this->dir=$this->rootdir.'/'.date("Y",$this->time);
        break;

        case 'month':
        $this->dir=$this->rootdir.'/'.date("Y-m",$this->time);
        break;

        case 'day':
        $this->dir=$this->rootdir.'/'.date("Y-m-d",$this->time);
        break;
        }

        $this->createdir();

        return $this->dir;
    }

    function geturlname($url='')
    {
        $this->url=$url?$url:$this->url;

        $filename=basename($this->url);
        $filename=explode(".",$filename);
        return $filename[0];
    }

    function geturlquery($url='')
    {
        $this->url=$url?$url:$this->url;

        $durl=parse_url($this->url);
        $durl=explode("&",$durl[query]);
        foreach($durl as $surl)
        {
          $gurl=explode("=",$surl);
          $eurl[]=$gurl[1];
        }
        return join("_",$eurl);
    }

    function getname($url='',$time=0,$dirname='')
    {
        $this->url=$url?$url:$this->url;
        $this->dirname=$dirname?$dirname:$this->dirname; 

        $this->time=$time?$time:$this->time;

        $this->getdir();

        switch($this->nametype)
        {
        case 'name':
        $filename=$this->geturlname().'.htm';
        $this->name=$this->dir.'/'.$filename;
        break;

        case 'time':
        $this->name=$this->dir.'/'.$this->time.'.htm';
        break;

        case 'query':
        $this->name=$this->dir.'/'.$this->geturlquery().'.htm';
        break;

        case 'namequery':
        $this->name=$this->dir.'/'.$this->geturlname().'-'.$this->geturlquery().'.htm';
        break;

        case 'nametime':
        $this->name=$this->dir.'/'.$this->geturlname().'-'.$this->time.'.htm';
        break;

        }
        return $this->name;
    }

    function createhtml($url='',$time=0,$dirname='',$htmlname='')
    {
        $this->url=$url?$url:$this->url;
        $this->dirname=$dirname?$dirname:$this->dirname;
        $this->time=$time?$time:$this->time;

        if(empty($htmlname))
            $this->getname();
        else
            $this->name=$dirname.'/'.$htmlname;

        $content=file($this->url) or die("Failed to open the url ".$this->url." !");;
        $content=join("",$content);
        $fp=@fopen($this->name,"w") or die("Failed to open the file ".$this->name." !"); 

        if(@fwrite($fp,$content))
        return true;
        else
        return false;
        fclose($fp);
    }

    function deletehtml($url='',$time=0,$dirname='')
    {
        $this->url=$url?$url:$this->url;
        $this->time=$time?$time:$this->time;

        $this->getname();

        if(@unlink($this->name))
        return true;
        else
        return false;
    }

    /**
     * function::deletedir()
     * 删除目录
     * @param $file 目录名(不带/)
     * @return
     */
     function deletedir($file)
     {
        if(file_exists($file))
        {
            if(is_dir($file))
            {
                $handle =opendir($file);
                while(false!==($filename=readdir($handle)))
                {
                    if($filename!="."&&$filename!="..")
                      $this->deletedir($file."/".$filename);
                }
                closedir($handle);
                rmdir($file);
                return true;
            }
            else
            { 

                unlink($file);
            }
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T07:03:28.713

您可以分别使用`.replace`或`preg_replace`用于 Javascript 和 PHP。

您的正则表达式模式将是`<script.*</script>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T07:15:31.073

1.  上传文件
2.  读取文件的文本`fread()`
3.  编辑包含文件文本的变量，从变量中删除`<script>`- 使用这个：[从 HTML 内容中删除脚本标记](https://stackoverflow.com/questions/7130867/remove-script-tag-from-html-content)
4.  将新文本写入文件`fwrite()`

# javascript - JQuery - 无法动态添加 SELECT 选项

> ID：11305952
> 
> 赞同：1
> 
> 时间：2012-07-03T07:00:00.093
> 
> 标签：javascript, android, html, jquery-mobile, cordova

我在动态添加 OPTIONS 到 SELECT 标记时遇到问题。

这是我的 Job.html 代码：

```
<body onload="javascript:onPageLoad();">
<div id="JobForm" data-role="page"> 
    <div class="logoHeader"><img src="images/header.png" /></div> 
    <div data-role="header" data-position="fixed">
        <h1>Load<span id="JobHeader"></span></h1>
    </div>  
    <div class="lineBreak20"></div>
    <div class="rightContent divContent">Welcome<em id="lblName"></em></div>
    <div class="lineBreak40"></div>
    <div class="boldText divContent">Please select the Job</div>
    <div class="lineBreak20"></div>
    <div class="roundBox">
        <table>
                <tr>
                <td class="tdLabel">Job No: </td>
                <td><select id="ddJNo" class="fieldWidth" data-mini="true"></select>
                </td>
            </tr>
            <tr>
                <td></td>
                <td><button id="btnLd" type="submit" data-theme="a" data-inline="true" data-mini="true">Load</button></td>
            </tr>
         </table>
    </div>
</div> 
   </body> 
```

Javascript是：

```
 function onPageLoad() {
var lsJobs= window.localStorage.getItem("jobs");
var arrJobs= lsJobs.split(",");
for (var i=0;i< arrJobs.length;i=i+2)
{
    if((arrJobs[i]!=""))
    {
    $("#ddJNo").append("<option value='"+ arrJobs[i] +"'>" + arrJobs[i+1] + "</option>");
    }
}
document.getElementById("lblName").innerHTML =window.localStorage.getItem("name");
 } 
```

代码中是否有任何错误？这里的问题是当我单击选择选项时，下拉列表未显示。请分享您使用 JAVASCRIPT 或 JQUERY 动态实现 SELECT 选项的想法。

**更新：**但是将 window.localStorage 内容放在警报对话框中时，它工作正常。我认为JS函数有问题。请帮我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T07:02:54.267

试试这个，

```
var newOption = $("<option />");
$("#ddlJobNo").append(newOption);

newOption.val(arrJobs[i]); 
newOption.html(arrJobs[i+1]); 
```

[请参见此处](http://jsfiddle.net/mrobin/k5cv5/)的示例。

# jsp - 在过滤器中捕获和替换 JSP 响应

> ID：11305956
> 
> 赞同：0
> 
> 时间：2012-07-03T07:00:24.363
> 
> 标签：jsp, servlet-filters

我正在尝试编写一个 servlet 过滤器，它在某些条件下将读取 JSP 文件返回的 HTML 响应并处理它（使用 XHTML 解析器）并在最终将其返回给浏览器之前对其进行一些修改（基本上我是尝试实现全局更改以避免不得不单独修改数百个 JSP）

我正在使用Tomcat。我首先为 HttpServletResponse 和 ServletOutputStream 提供了一个包装器，然后再将它们传递回过滤器链。但是，我收到“IllegalStateException：getOutputStream() 已被调用以获取此响应”。每当我们的一个标签库尝试使用“this.pageContext.getOut()”返回的编写器进行编写时，似乎就会发生这种情况，所以我猜 Tomcat 使用的响应/编写器/输出流没有使用我通过的包装器类过滤器。

有什么建议么？还是有更好的方法来完成我想做的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:14:12.857

我认为响应是在您传回修改后的 XML 之前提交的。

要了解提交响应的原因，[请看这里](https://stackoverflow.com/questions/11305563/cause-of-servlets-response-already-committed/11305612#11305612)

如果您不想让响应提交，您应该做以下两件事：

*   增加页面指令中的 JSP 缓冲区大小

    **<%@ 页面缓冲区="5kb" autoFlush="false" %>**

*   增加服务器默认的最大缓冲区大小。

    **ServletRespnse.setBufferSize()**

# javascript - jQuery 改进表迭代器

> ID：11305961
> 
> 赞同：2
> 
> 时间：2012-07-03T07:00:47.347
> 
> 标签：javascript, jquery

我有一个表格，每一行都包含一个单元格，里面是复选框和该复选框的标签。

我正在尝试根据输入的文本隐藏行。

基本上这是名称列表，我想过滤/隐藏那些不包含输入文本的名称。

这是我的功能：

```
$(function () {
$('#user_name').keyup(function () {
    if ($.trim($('input#user_name').val()) == '') {
        $('table.myList >tbody >tr').each(function (index, value) {
            $(this).css("display", "block");
        });
    } else {
        $('table.myList >tbody >tr').each(function (index, value) {
            if ($(this).find('td > label').length > 0) {
                if ($(this).find('td > label').html().toLowerCase().indexOf($.trim($('input#user_name').val()).toLowerCase()) >= 0) {
                    $(this).css("display", "block");
                } else {
                    $(this).css("display", "none");
                }
            }
        });
    }
});
}); 
```

此代码有效，如果我的表有 40 条记录，它的速度很快，但是当我将列表增加到 500 时，它会变慢并在一段时间后使我的浏览器崩溃。

我正在寻找一种方法来改进此代码以更快地工作。

这是模型代码的链接：http: [//jsfiddle.net/gGxcS/](http://jsfiddle.net/gGxcS/)

==更新==

这是我基于@scessor 和@nnnnnn 的答案的最终解决方案：

```
$(function () {

var $tableRows = $('table.myList tr');
var lastInput = '';

$('#user_name').keyup(function () {
    var sValue = $.trim($('input#user_name').val());
    if(lastInput==sValue) return;
    if (sValue == '') {
        $tableRows.show();
    } else {
        $tableRows.each(function () {
            var oLabel = $(this).find('label');
            if (oLabel.length > 0) {
                if (oLabel.text().toLowerCase().indexOf(sValue.toLowerCase()) >= 0) {
                    $(this).show();
                } else {
                    $(this).hide();
                }
            }
        });
        lastInput=sValue;
    }
});

$('img.removeSelections').click(function () {
    $('table.myList input[type="checkbox"]').prop("checked", false);
})
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T07:11:42.427

你能测试这段代码（有很多元素）吗？

```
$(function () {
    $('#user_name').keyup(function () {
        var sValue = $.trim($('input#user_name').val());
        if (sValue == '') {
            $('table.myList tr').show();
        } else {
            $('table.myList tr').each(function() {
                var jThis = $(this);
                var oLabel = jThis.find('label');
                if (oLabel.length > 0) {
                    if (oLabel.text().toLowerCase().indexOf(sValue.toLowerCase()) >= 0) {
                        jThis.show();
                    } else {
                        jThis.hide();
                    }
                }
            });
        }
    });
}); 
```

*   不要两次调用具有相同参数的函数（例如`$.trim($('input#user_name').val());`）。
*   使用短选择器。
*   仅在必要时使用每个 jquery（例如这里不需要：）`$('table.myList >tbody >tr').each(function (index, value) {`。

=== 更新 ===

如果有人坚持`backspace`long，它将`tr`一次又一次地设置所有 s 可见。为了防止这种情况，您可以检查最后一个值是否等于当前值。如果是真的，什么也不做。

=== 更新 ===

要取消选中所有复选框，这取决于您的 jQuery 版本。

使用 jQuery 1.6 及更高版本：
`$('table.myList input[type="checkbox"]').prop("checked", false);`
之前：
`$('table.myList input[type="checkbox"]').attr("checked", false);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T07:29:46.203

我建议你缓存你的 jQuery 对象——假设你想在每次击键时处理我会在 keyup 处理程序之外缓存表行对象。此外，当您可以在外部调用一次时，不要在`.each()`循环内部调用函数 - 例如，无需`$.trim($('input#user_name').val()).toLowerCase()`在每次`.each()`迭代时都调用它们。

```
$(function () {
    var $tableRows = $('table.myList >tbody >tr');

    $('#user_name').keyup(function () {
        var searchStr = $.trim($('input#user_name').val()).toLowerCase();
        if (searchStr === '') {
            $tableRows.css("display", "block");
        } else {
            $tableRows.each(function (index, value) {
                var $this = $(this),
                    $label =$this.find('td > label');
                if ($label.length > 0) {
                    if ($label.html().toLowerCase().indexOf(searchStr) >= 0) {
                        $this.css("display", "block");
                    } else {
                        $this.css("display", "none");
                    }
                }
            });
        }
    });
}); 
```

演示：http: [//jsfiddle.net/gGxcS/3/](http://jsfiddle.net/gGxcS/3/)

# python - Python，Tkinter：如何在可滚动画布上获取坐标

> ID：11305962
> 
> 赞同：7
> 
> 时间：2012-07-03T07:00:52.870
> 
> 标签：python, canvas, tkinter, scrollbar, coordinates

我有一个带有滚动条的 Tkinter 画布，还有一些项目，当我单击它们时，它应该返回坐标。（使用 Python。）

这适用于最初在窗口中可见的对象。但是，当我向下滚动并且画布上更下方的项目进入视图时，单击时我没有得到它们的画布坐标，而是窗口坐标。

我找不到有关如何获取绝对坐标的信息，所以我想知道这里是否有人知道该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T12:23:39.980

[在此处](http://effbot.org/tkinterbook/canvas.htm#coordinate-systems)查看画布小部件的文档。

> 要将窗口坐标转换为画布坐标，请使用`canvasx`和`canvasy`方法。

`find_closest()` [这是一个示例回调函数，它转换窗口的 x 和 y 坐标并通过方法](http://effbot.org/tkinterbook/canvas.htm#Tkinter.Canvas.find_closest-method)打印最接近该位置的项目。

```
def callback(event):
    canvas = event.widget
    x = canvas.canvasx(event.x)
    y = canvas.canvasy(event.y)
    print canvas.find_closest(x, y) 
```

# localization - 在 Android 中无法正确呈现印地语字符

> ID：11305971
> 
> 赞同：0
> 
> 时间：2012-07-03T07:01:53.553
> 
> 标签：localization, rendering

我想在 Android 中测试印度语言的本地化。以下是 values 文件夹中的文件 string.xml

```
<string name="app_name">नमस्ते</string>   
<string name="text_a">परिक्षण&lt;/string> 
```

我正在使用 AndroidHindi.ttf 字体。

我想在 adnroid 中以印地语显示特定文本，但在运行时我得到未呈现的文本。

我应该包含哪个特定的库才能正确显示它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T10:59:25.180

您必须下载您的语言字体文件（.ttf）并放入资产文件夹。

```
Typeface tf = Typeface.createFromAsset(getAssets(), "fonts/Akshar.ttf");               
TextView tv = (TextView) findViewById(R.id.CustomFontText);
tv.setTypeface(tf);
tv.setText("Seasonal messages like welcome (நல்வரவு) is used in Kolam. Volunteering to draw kolam at temple is sometimes done when a devotee's"); 
```

[资源](https://stackoverflow.com/questions/10635516/android-tamil-font-between-english-word)

# mongodb - mongodb：当显示表时，显示错误未捕获的异常：错误：{“$err”：“assertion db/pdfile.h:259”}

> ID：11305975
> 
> 赞同：1
> 
> 时间：2012-07-03T07:01:59.780
> 
> 标签：mongodb, mongodb-query

我想在数据库中显示表，但它显示错误，如

```
dxt:PRIMARY> show tables
Tue Jul  3 14:58:46 uncaught exception: error: { "$err" : "assertion db/pdfile.h:259" } 
```

问题是什么？

谢谢你 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:00:34.270

您是否突然关机或面临崩溃？如果 .ns 文件丢失，您能否检查您在 dbpath 中指定的文件夹。此文件包含查询所需的所有元数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:20:24.680

听起来您的数据库以某种方式损坏了。类似于[这里](https://groups.google.com/forum/?fromgroups#!topic/mongodb-user/jA-RhdMfM7Y)的问题。您可以尝试运行修复，但请注意它会删除损坏的数据：

```
db.repairDatabase() 
```

# mysql - JPA 不允许由多个表中的列组成的实体？

> ID：11305977
> 
> 赞同：1
> 
> 时间：2012-07-03T07:02:09.797
> 
> 标签：mysql, hibernate, jpa

我知道这没有任何意义，因为许多教程都指出您可以使用 SecondaryTable 注释，但是它在休眠中不起作用。我有这样的架构：

```
@Entity
@Table(name="server")
@SecondaryTable(name="cluster", pkJoinColumns = { @PrimaryKeyJoinColumn(name = "uuid", referencedColumnName = "cluster_uuid") })
public class Server {
    @Id
    @Column(name = "uuid")
    private String uuid;

    @Column(name = "cluster_uuid")
    private String clusterUuid;

      @Column(name = "ip", table="cluster")
      private String ip;
..... }

@Entity
@Table(name = "cluster")
public class Cluster {
    @Id
    @Column(name = "uuid")
    private String uuid;

    @Column(name = "ip")
    private String ip;

.....
} 
```

Server.clusterUuid 是 Cluster.uuid 的外键。**我希望通过将 Server.clusterUuid 加入 Cluster.uuid 来获得从 Cluster 获取 ip 列的服务器实体。**

然后我遇到了一个休眠异常：

> 引起：org.hibernate.AnnotationException：SecondaryTable JoinColumn 不能在 org.hibernate.cfg.annotations.EntityBinder.bindJoinToPersistentClass(EntityBinder) 引用 org.hibernate.cfg.annotations.TableBinder.bindFk(TableBinder.java:402) 的非主键.java:620) 在 org.hibernate.cfg.annotations.EntityBinder.createPrimaryColumnsToSecondaryTable(EntityBinder.java:612)

我看到很多人都遇到过这个问题。但是 Hibernate 的 bugzilla 中的第一个错误是 2010 年，我很惊讶它已经存在了两年多，因为这应该是一个基本功能。有一些帖子说 JPA 规范只允许主键进行映射，但是，我从 JPA wikibook 得到以下信息

> JPA 允许将多个表分配给单个类。可以使用 @SecondaryTable 和 SecondaryTables 注释或元素。默认情况下，@Id 列假定在两个表中，因此辅助表的 @Id 列是表的主键**和第一个表的外键**。如果第一个表的@Id 列的名称与@PrimaryKeyJoinColumn 不同，则可以用于定义外键连接条件。

非主键显然没问题。然后我很困惑为什么 Hibernate 没有解决这个问题，因为它似乎很容易通过 join 子句实现。

有人知道如何克服这个问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:05:43.987

我不太明白你的设置。

`@SecondaryTable`用于将单个实体存储在多个表中，但在您的情况下，不同实体之间存在多对一关系（每个实体都存储在自己的表中），并且应该这样映射：

```
@Entity 
@Table(name="server") 
public class Server { 
    @ManyToOne
    @JoinColumn(name = "cluster_uuid")
    private Cluster cluster;
    ...
} 
```

# spring - @Transactional+spring+hibernate 不起作用

> ID：11305979
> 
> 赞同：0
> 
> 时间：2012-07-03T07:02:11.533
> 
> 标签：spring, hibernate, transactional

我的背景：

```
`<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:jdbc="http://www.springframework.org/schema/jdbc"
    xsi:schemaLocation="
        http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">
    <context:annotation-config />
    <context:component-scan base-package="com.globerry.project.domain" />
    <context:component-scan base-package="com.globerry.project.dao" /> 
    <context:component-scan base-package="com.globerry.project.service" />

        <!-- Файл с настройками ресурсов для работы с данными (Data Access Resources) -->
        <tx:annotation-driven transaction-manager="transactionManager" /> 
    <!-- Менеджер транзакций -->

    <!-- Настройки бина dataSource будем хранить в отдельном файле -->
  <bean id="propertyConfigurer"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
        p:location="classpath:/META-INF/jdbc.properties" />

    <!-- Непосредственно бин dataSource -->
    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource"
        p:driverClassName="com.mysql.jdbc.Driver" 
        p:url="${jdbc.databaseurl}"
        p:username="${jdbc.username}" 
        p:password="${jdbc.password}" />

    <!-- Настройки фабрики сессий Хибернейта -->
    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean"
        p:packagesToScan="com.globerry.project.Dao">

        <property name="dataSource" ref="dataSource" />
        <property name="configLocation">
            <value>classpath:hibernate.cfg.xml</value>
        </property>
        <property name="configurationClass">
            <value>org.hibernate.cfg.AnnotationConfiguration</value>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.current_session_context_class">thread</prop>
                <prop key="hibernate.transaction.factory_class">org.hibernate.transaction.JDBCTransactionFactory</prop> 
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLInnoDBDialect</prop>
                <prop key="hibernate.connection.charSet">UTF-8</prop>
            </props>
        </property>
    </bean>

    <bean id="transactionManager" 
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>
</beans>`

---------- 
```

我的道课

```
`
@Repository
public class CityDao implements ICityDao {

    @Autowired
    SessionFactory sessionFactory;
@Override
    @Transactional(readOnly=true)
    public City getCityById(int id) {
        City city = (City) sessionFactory.getCurrentSession().get(City.class, id);
        Hibernate.initialize(city.getEvents());
        return city;
    }
}
`

---------- 
```

我的道法有问题。

```
getCityById(int id). 
```

休眠抛出异常

```
org.hibernate.HibernateException: get is not valid without active transaction
        at org.hibernate.context.ThreadLocalSessionContext$TransactionProtectionWrapper.invoke(ThreadLocalSessionContext.java:341)
        at $Proxy36.createQuery(Unknown Source)
        at com.globerry.project.dao.CityDao.getCityById(CityDao.java:290)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
        at $Proxy34.getCityById(Unknown Source)
        at com.globerry.project.dao.CityDaoTest.LazyTest(CityDaoTest.java:274)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
        at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
        at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
        at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
        at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28) 
```

com.globerry.project.dao.CityDaoTest.LazyTest() 标记为事务性。CityDao 自动接线。我看到了很多例子，导入所有 nessasary 库，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:28:18.707

OK, so i will just give you y configuration:

In folder WEB-INF i have 2 files:

1) hibernate-context.xml

content:

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="
            http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
            http://www.springframework.org/schema/tx 
            http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-3.0.xsd
            ">

    <context:property-placeholder location="/WEB-INF/spring.properties"/>

    <!-- Enable annotation style of managing transactions -->
    <tx:annotation-driven transaction-manager="transactionManager"/>
    <!-- <tx:annotation-driven/> -->

    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean"
          p:dataSource-ref="dataSource"
          p:configLocation="${hibernate.config}"
          p:packagesToScan="com.rasp.lta"/>

    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="${app.jdbc.driverClassName}"/>
        <property name="url" value="jdbc:mysql://{url to database}"/>
        <property name="username" value="{user name}"/>
        <property name="password" value="{password}"/>
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager"
          p:sessionFactory-ref="sessionFactory">
        <qualifier value="transactionManager"/>
    </bean>

</beans> 
```

2) hibernate.cfg.xml

content:

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
    <session-factory>
        <property name="hibernate.dialect">org.hibernate.dialect.MySQL5InnoDBDialect</property>
        <property name="show_sql">true</property>
        <!--<property name="create">update</property>-->
    </session-factory>
</hibernate-configuration> 
```

Then in WEB-INF i have folder: spring in which there is file root-context.xml, the content is:

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <!-- Root Context: defines shared resources visible to all other web components -->

    <import resource="../hibernate-context.xml"/>
</beans> 
```

Additionally to have transaction in whole project, you should add to web.xml:

```
<filter>
    <filter-name>hibernateFilter</filter-name>
    <filter-class>org.springframework.orm.hibernate3.support.OpenSessionInViewFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>hibernateFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<filter>
    <filter-name>encoding-filter</filter-name>
    <filter-class>
        org.springframework.web.filter.CharacterEncodingFilter
    </filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
    <init-param>
        <param-name>forceEncoding</param-name>
        <param-value>true</param-value>
    </init-param>
</filter> 
```

And in the end in controller:

```
 @Service("linkAddress")
@Transactional
public class LinkAddressService {

    @Resource(name = "sessionFactory")
    private SessionFactory sessionFactory;

    public List<LinkAddressEntity> linkAddressEntityList(String linkList){

        Session session = sessionFactory.getCurrentSession();

           List<LinkAddressEntity> linkAddressList = (List<LinkAddressEntity>) session.getNamedQuery(LinkAddressEntity.QUERY_IN)
                                                                                                    .setString("id", linkList).list();

        return linkAddressList;

    }

} 
```

I hope it will be helpfull.

# java - 如何为 Android Google Analytics 添加页面标题参数

> ID：11305985
> 
> 赞同：4
> 
> 时间：2012-07-03T07:02:38.563
> 
> 标签：java, android, ios, google-analytics

我正在尝试为我们的 Android 应用程序配置 Google Analytics。

工作正常，所有活动都显示为页面。我感兴趣的是添加页面标题，以便我可以看到带有标题的活动。

我确信这很容易，但我无法弄清楚正确的语法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-22T07:50:10.850

```
Tracker t = GoogleAnalytics.getInstance(context).newTracker(trackingId);
 t.setScreenName("Your Screen Name");

 t.setTitle("Your Page Title"); // This is the code to set Page Title.

 t.send(new HitBuilders.AppViewBuilder().build()); 
```

# php - 与 Facebook 分享视频

> ID：11305987
> 
> 赞同：0
> 
> 时间：2012-07-03T07:02:52.617
> 
> 标签：php, facebook

我的网页中有一个嵌入视频（.flv 文件），我想将此视频分享到 facebook。如果我将此 url 分享到 facebook，它只会显示 url 并转到我的网页，但我不想要这个，我只是想在 facebook 上播放我的视频。有可能吗？帮助是非常可观的。

# 我的嵌入代码

```
<embed width="610" height="468" flashvars="file=616.flv" allowfullscreen="true" wmode="opaque" allowscriptaccess="always" src="player.swf" id="embedPlayer616"> 
```

谢谢，VKS

# c# - 从 C# 中的树视图中获取数据

> ID：11305995
> 
> 赞同：0
> 
> 时间：2012-07-03T07:03:13.873
> 
> 标签：c#, winforms, treeview, .net-2.0, checkbox

**解释：**

编码：

```
 for (int i = 0; i < d.Count; i++) //loop for Product
            {
                TreeNode node = new TreeNode(((string[])d[i])[0]);
                thisForm.NewBKMTreeView.Nodes.Add(node); //add Product as Parent Node

                for (int j = 0; j < b.Count; j++) //loop for Item
                {
                    if (((string[])d[i])[1] == ((string[])b[j])[0]) //compare if ProductID from arrayList d same with ProductID from arrayList b
                    {
                        node.Nodes.Add(((string[])b[j])[2]); //add Item as Child Node
                    }
                }
            } 
```

从上面的代码。

**d**是包含 2 个字符串的*数组列表。*

```
string[0]       string[1]
ProductName     ProductID
-----------    -----------
  Food             001
  NotFood          002 
```

**b**也是包含 3 个字符串的*数组列表*

```
string[0]      string[1]      string[2]
ProductID      itemID          itemName
  001            X101            Soup
  001            X102            Bread
  002            G111            Pen
  002            G212            Book
  002            G222            Ruler 
```

**将 ProductName 添加为父节点的代码：**

```
TreeNode node = new TreeNode(((string[])d[i])[0]); 
```

**(((string[])d[i])[0])**持有 ProductName

**将 itemName 添加为子节点的代码：**

```
node.Nodes.Add(((string[])b[j])[2]); 
```

**(((string[])b[j])[2])**保存 itemName

运行上面的代码后。arrayList 中的对象将显示在 Treeview 中

```
+Food
 - Soup
 - Bread
+NotFood
 - Pen
 - Book
 - Ruler 
```

**问题 ：**

树视图是**带有复选框**的树视图。所以用户可以检查他想要的项目。并将项目复制到另一个地方。我这里有一些问题。**用户在节点检查时如何获取 itemID？**

我想要 itemID 来获取用户检查的项目以从数据库中获取数据并将其复制到另一个引用 itemID 的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:06:48.097

我认为您应该从树节点的标签属性中存储`item id`您需要的信息或任何其他信息。`item`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:18:24.157

您应该将数据库数据转换为对象：

```
public class MyNode
{
    public MyNode Parent { get; set; }
    public ObservableCollection<MyNode> Children { get; set; }
    public string ItemId { get; set; }
    // ...
} 
```

如果要更改父级，只需将新父级分配给 childrends 父级属性。更新父级和新父级的子级列表。

# android - 用于显示来自 xml 源的唯一值的 Android 列表视图

> ID：11305997
> 
> 赞同：1
> 
> 时间：2012-07-03T07:03:16.223
> 
> 标签：android, xml, listview

对于 Android 应用程序，我从 XML 源获取数据，如下所示：

```
<item>
     <description>product description A </description>
     <category>categoryA</category>
</item>
<item>
     <description>product description B </description>
     <category>categoryB</category>
</item> 
```

我想在列表视图中显示所有类别值。当用户单击一个类别时，显示该类别的所有描述值。

为此，我需要提取所有类别值，删除重复项，按字母顺序对它们进行排序并在列表视图中使用。最简单的方法是什么？如果我编写自己的函数，它会进入很多循环。有没有更简单的方法来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:19:54.963

更简单的方法`"remove the duplications"`

```
ArrayList<String> entries;
entries=new ArrayList<String>();
if(!entries.contains("this entry")){
entries.add("this entry");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:55:45.083

我认为您应该使用 sax 解析器来检索每个元素并将其放入 HashMap 以便不允许重复的 Key 值，然后您可以使用该 Map 来填充您的列表。

如果您想按类别过滤，一个有趣的选项是在您的应用程序中使用解析的数据填充一个数据库，以便您可以使用光标进行过滤、搜索和查询 :)

[萨克斯解析器](http://www.jondev.net/articles/Android_XML_SAX_Parser_Example)的一个例子