# StackOverflow 问答 10978000-10978999

# c# - NetDataContractSerializer 和 CLR 类型

> ID：10978000
> 
> 赞同：2
> 
> 时间：2012-06-11T10:02:12.773
> 
> 标签：c#, netdatacontractserializer

对于下面的 NetDataContractSerializer msdn 状态

“只有当序列化和反序列化端共享相同的 CLR 类型时，才能使用 NetDataContractSerializer”。

我的理解是，如果我使用 NetDataContractSerializer 在 .net4.0 中序列化文件，然后我将所有代码转移到 .net4.5，那么即使代码相同，使用 .net 4.0 的文件也不会被反序列化。

如果我的理解有误，请纠正我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:44:19.187

这取决于类型。`NetDataContractSerializer`基于类型的完整类型名称，可能使用程序集全名限定。例如，这段代码：

```
List<string> list = new List<string>();
list.Add("joe");
list.Add("sam");

NetDataContractSerializer ser = new NetDataContractSerializer();
using (FileStream stream = File.OpenWrite("test.xml"))
{
    ser.Serialize(stream, list);
} 
```

使用 CLR 2 编译将产生：

```
<ArrayOfstring z:Id="1" z:Type="System.Collections.Generic.List`1[[System.String, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]]" z:Assembly="0" xmlns="http://schemas.microsoft.com/2003/10/Serialization/Arrays" xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns:z="http://schemas.microsoft.com/2003/10/Serialization/"><_items z:Id="2" z:Size="4"><string z:Id="3">joe</string><string z:Id="4">sam</string><string i:nil="true"/><string i:nil="true"/></_items><_size>2</_size><_version>2</_version></ArrayOfstring> 
```

并且使用 CLR 4 编译的相同将产生：

```
<ArrayOfstring z:Id="1" z:Type="System.Collections.Generic.List`1[[System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]]" z:Assembly="0" xmlns="http://schemas.microsoft.com/2003/10/Serialization/Arrays" xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns:z="http://schemas.microsoft.com/2003/10/Serialization/"><_items z:Id="2" z:Size="4"><string z:Id="3">joe</string><string z:Id="4">sam</string><string i:nil="true"/><string i:nil="true"/></_items><_size>2</_size><_version>2</_version></ArrayOfstring> 
```

如您所见，它们不兼容，因为它们包含`System.String`' 程序集限定的全名。所以这将取决于你做什么，但很有可能它不会按原样工作。我手头没有 4.5 的设置，但你可以直接测试它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-11T10:20:50.693

由于 DotNet 基于 COM 技术，我相信 dotnet 4.0 和 dotnet 4.5 是二进制兼容的，这意味着它们具有相同的 CLR 类型并且将被反序列化。

你可以看看这里：[MSDN blog on compatibility of Framework 4.5](http://blogs.msdn.com/b/dotnet/archive/2011/09/26/compatibility-of-net-framework-4-5.aspx)

# typo3 - 提取外部链接的 URL 以用作常量

> ID：10978001
> 
> 赞同：0
> 
> 时间：2012-06-11T10:02:17.160
> 
> 标签：typo3, typoscript

我已经定义了一些外部链接来存储其他页面可以链接到的 URL。这样，后端用户对 URL 的更改会在整个站点范围内反映出来。

我希望将这些 URL 提取为文本以将它们放入时事通讯中，因为这比通过网站重定向更好。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:40:41.733

您可以在 rte 链接对话框中使用占位符（我假设您使用 rte 编写时事通讯），然后在自定义挂钩中替换此占位符（搜索`contentPostProc-all`）。在那里，您可以阅读您的打字稿配置或从任何其他地方（自己的数据库表、csv 等）。

您也可以使用[浏览链接对话框挂钩](http://forge.typo3.org/issues/32809)来添加您的自定义链接。选择最适合您的。

# html - 多个 html 作为输出和一个 xsl

> ID：10978002
> 
> 赞同：0
> 
> 时间：2012-06-11T10:02:19.933
> 
> 标签：html, xml, xslt, hyperlink

我正在使用 XSLT 将 XML 转换为 HTML。的输出应该有 2 个相互链接的 HTML 文件。在第一个 html 中将有一个数据列表，一旦我单击特定数据，我应该在其他 html 文件中获取该特定数据的详细信息。我需要为此使用 xslt。

我使用 Saxon 生成多个 html，但我能够执行链接功能。关于如何做到这一点的任何想法？

我的输入看起来像这样

```
<a:file>
<a:id>33</a:id>
<a:name>hello</a:name>
<a:school>mumbai public</a:school>
<a:marks>80</a:marks>
</a:file> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:09:29.827

好吧，Saxon 9 或任何 XSLT 2.0 处理器都可以使用一个样式表生成多个结果文档，至于链接两个文档，这没有什么困难，您只需使用带有链接到另一个文档`a`的属性的 HTML 元素。`href`

如果您需要有关特定数据的帮助，请发布一个小而有代表性的 XML 输入示例以及您要创建的 HTML。

[编辑]

假设您有一个包含其中几个`a:file`元素的输入文档，并且您想要创建一个主 HTML 文档，列出所有`a:names`指向单独文件的链接，列出您可以解决的详细信息，如下所示：

```
<xsl:template match="/">
  <xsl:apply-templates select="//a:file" mode="doc"/>
  <html>
    <head>
      <title>Example</title>
    </head>
    <body>
      <h1>Data list</h1>
      <ul>
        <xsl:apply-templates select="//a:file"/>
      </ul>
    </body>
  </html>
</xsl:template>

<xsl:template match="a:file">
  <li>
    <a href="{a:id}.html">
      <xsl:value-of select="a:name"/>
    </a>
  </li>
</xsl:template>

<xsl:template match="a:file" mode="doc">
  <xsl:result-document href="{a:id}.html">
    <html>
      <head>
        <title>Details of <xsl:value-of select="a:name"/></title>
      </head>
      <body>
        <table>
          <thead>
            <tr>
             <xsl:apply-templates mode="thead"/>
            </tr>
          </thead>
          <tbody>
            <tr>
             <xsl:apply-templates mode="doc"/>
            </tr>
          </tbody>
        </table>
      </body>
    </html>
  </xsl:result-document>
</xsl:template>

<xsl:template match="a:file/*" mode="doc">
  <td>
    <xsl:value-of select="."/>
  </td>
</xsl:template>

<xsl:template match="a:file/*" mode="thead">
  <th>
   <xsl:value-of select="local-name()"/>
  </th>
</xsl:template> 
```

未经测试，但应该给你一个想法。如果您需要更多帮助，请显示您的输入和所需输出的更多详细信息，我必须制作主要 HTML 结果（在此处使用列表）和详细信息文件（在此处使用表格）的格式。

[编辑 2] 假设完整的输入样本是

```
<a:files xmlns:a="http://example.com/a">
<a:file>
<a:id>33</a:id>
<a:name>hello</a:name>
<a:school>mumbai public</a:school>
<a:marks>80</a:marks>
</a:file>
</a:files> 
```

完整的样式表示例是

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:a="http://example.com/a"
  exclude-result-prefixes="a"
  version="2.0">

<xsl:template match="/">
  <xsl:apply-templates select="//a:file" mode="doc"/>
  <html>
    <head>
      <title>Example</title>
    </head>
    <body>
      <h1>Data list</h1>
      <ul>
        <xsl:apply-templates select="//a:file"/>
      </ul>
    </body>
  </html>
</xsl:template>

<xsl:template match="a:file">
  <li>
    <a href="{a:id}.html">
      <xsl:value-of select="a:name"/>
    </a>
  </li>
</xsl:template>

<xsl:template match="a:file" mode="doc">
  <xsl:result-document href="{a:id}.html">
    <html>
      <head>
        <title>Details of <xsl:value-of select="a:name"/></title>
      </head>
      <body>
        <table>
          <thead>
            <tr>
             <xsl:apply-templates mode="thead"/>
            </tr>
          </thead>
          <tbody>
            <tr>
             <xsl:apply-templates mode="doc"/>
            </tr>
          </tbody>
        </table>
      </body>
    </html>
  </xsl:result-document>
</xsl:template>

<xsl:template match="a:file/*" mode="doc">
  <td>
    <xsl:value-of select="."/>
  </td>
</xsl:template>

<xsl:template match="a:file/*" mode="thead">
  <th>
   <xsl:value-of select="local-name()"/>
  </th>
</xsl:template>

</xsl:stylesheet> 
```

然后当我从命令行使用 Saxon 9.4 HE 时，`java -jar saxon9he.jar input.xml sheet.xsl -o:result.html`我得到两个结果文件，当然主要是`result.html`，另一个`33.html`如下所示：

```
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Example</title>
   </head>
   <body>
      <h1>Data list</h1>
      <ul>
         <li><a href="33.html">hello</a></li>
      </ul>
   </body>
</html>

<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Details of hello</title>
   </head>
   <body>
      <table>
         <thead>
            <tr>

               <th>id</th>

               <th>name</th>

               <th>school</th>

               <th>marks</th>

            </tr>
         </thead>
         <tbody>
            <tr>

               <td>33</td>

               <td>hello</td>

               <td>mumbai public</td>

               <td>80</td>

            </tr>
         </tbody>
      </table>
   </body>
</html> 
```

因此，就文件数量以及浏览器内部的链接而言，这对我来说都很好。

# batch-file - 检查转储结果

> ID：10978006
> 
> 赞同：0
> 
> 时间：2012-06-11T10:02:42.153
> 
> 标签：batch-file, mysqldump

我有一个启动这个 MySQL 命令的脚本：

```
mysqldump -u login -ppass --routines --triggers --databases db >> dump.sql 
```

它工作正常，但我想检查转储的结果以防出现错误。

例如，如果基座停止或关闭，则会显示错误。如何将错误代码存储在变量中以检查它（例如使用`if`语句）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:38:28.810

好的，发现了！

```
mysqldump -u login -ppass --routines --triggers --databases db >> dump.sql
if errorlevel 1 (echo Dump failed) else (echo Dump success) 
```

# jquery - 使用 .delay 将事件与 jquery 链接

> ID：10978007
> 
> 赞同：1
> 
> 时间：2012-06-11T10:02:42.543
> 
> 标签：jquery

我试图让一系列 jQuery 事件正常工作，所以大概我做错了什么。

我试图让 gif 图像出现在 div 内，停留几秒钟，然后淡出并在 div 内显示不同的随机图像。

由于涉及到 cookie，这有点复杂，但我似乎可以使用该功能。

此时，gif图像和随机图像同时出现，然后同时淡出。我无法弄清楚为什么会发生这种情况，因为我正在链接事件并在它们之间使用 .delay 。

我的js是：

```
{
    $(document).ready(function() {
        var images = ['1.gif', '2.gif', '3.gif', '4.gif'];
        var COOKIE_NAME = 'lucykydip_cookie';
        jQuerygo = jQuery.cookie(COOKIE_NAME);
        $("a.start").click(function() {
            $("a.start").hide();
            if (!jQuerygo) {
                $.cookie(COOKIE_NAME, 'ld_cookie');
                $('#luckydip').css("background-image", "url(ajax-loader.gif)").delay(5000).fadeOut("slow").delay(5000).html('<img src="' + images[Math.floor(Math.random() * images.length)] + '" style="width: 82px; height:82px; display: block;" />');

            }

            else {

                $('#luckydip').append('<p>Sorry, our records show that you have already received a voucher code!</p>');
} 
```

感谢您的帮助！

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T10:06:19.583

`.delay()`只影响动画队列。该`.html()`命令忽略这些延迟。

`.show()`因此，您可以使用在显示动画完成后执行的回调函数：

[http://api.jquery.com/show/](http://api.jquery.com/show/)

> .show( 持续时间 [, 回调] )
> 
> 持续时间 一个字符串或数字，确定动画将运行多长时间。
> 
> 回调 动画完成后调用的函数。

```
.delay(5000)
.show(1, function(){ $(this).html("Hello World"); }) 
```

# ios - iOS：在核心数据谓词中使用 @min 和 @max

> ID：10978010
> 
> 赞同：7
> 
> 时间：2012-06-11T10:02:47.843
> 
> 标签：ios, core-data

我有一个核心数据实体`Client`，它有一个`discount`属性。我想以最小的折扣获取客户。

我正在使用以下内容`NSPredicate`：

```
[NSPredicate predicateWithFormat:@"@min.discount"]; 
```

但是，我收到以下错误：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Unable to parse the format string "@min.discount"' 
```

什么做错了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T10:25:55.480

我认为不`NSPredicate`支持这样的函数，除非它是布尔谓词表达式的一部分（即涉及“大于”之类的东西）。

您应该阅读[此 CoreData 文档](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreData/Articles/cdFetching.html#//apple_ref/doc/uid/TP40002484-SW6)，其中提供了一些示例，特别`max`是用作示例：

> 要创建和使用表达式描述，需要遵循许多步骤。
> 
> 首先，您需要创建表达式（的实例`NSExpression`）来表示您感兴趣的值的键路径，并表示您要应用的函数（例如 max: 或 min:）：
> 
> ```
> NSExpression *keyPathExpression = [NSExpression expressionForKeyPath:@"salary"];
> NSExpression *maxSalaryExpression = [NSExpression expressionForFunction:@"max:"
>                                                   arguments:[NSArray arrayWithObject:keyPathExpression]]; 
> ```
> 
> 有关受支持功能的完整列表，请参阅`expressionForFunction:arguments:`。
> 
> 然后创建表达式描述并设置其名称、表达式和结果类型。
> 
> 名称是将在字典中用于返回值的键。如果要检索多个值（例如 Employee 表中的最大和最小薪水），则每个表达式描述的名称对于给定的获取请求必须是唯一的。
> 
> ```
> NSExpressionDescription *expressionDescription = [[NSExpressionDescription alloc] init];
> [expressionDescription setName:@"maxSalary"];
> [expressionDescription setExpression:maxSalaryExpression];
> [expressionDescription setExpressionResultType:NSDecimalAttributeType]; 
> ```
> 
> 最后，您将请求的属性设置为仅获取表达式表示的属性：
> 
> ```
> [request setPropertiesToFetch:[NSArray arrayWithObject:expressionDescription]]; 
> ```

# c# - 如何在不最大化表单的情况下获得最大化的客户端大小？

> ID：10978011
> 
> 赞同：0
> 
> 时间：2012-06-11T10:02:58.180
> 
> 标签：c#, winforms

如何在`Form`最大化而不最大化的情况下获得客户端大小？

例如，我想创建一个`Bitmap`与最大化`Form`的客户端大小相同的大小，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T10:07:04.757

尝试

```
Screen.FromControl(this).GetWorkingArea(); 
```

计算大小（没有任务栏）然后减去 Forms ClientSize / Size 之间的差异。希望有效，没有测试过。

**更新：**

有点hacky，但我尝试了它并且它有效。

```
 var frm = new Form();
        frm.Opacity = 100;
        frm.WindowState = FormWindowState.Maximized;
        frm.Show();

        while (!frm.IsHandleCreated)
            System.Threading.Thread.Sleep(1);

        var result = frm.ClientSize;
        frm.Close();
        return result; 
```

**更新2：**

这是一个更好的解决方案。我禁用窗体的绘制，最大化它，获取客户区，将其恢复正常并返回结果。效果很好，没有闪烁什么的。

```
 private static Size GetMaximizedClientSize(Form form)
    {
        var original = form.WindowState;
        try
        {
            BeginUpdate(form);

            form.WindowState = FormWindowState.Maximized;
            return form.ClientSize;

        }
        finally
        {
            form.WindowState = original;   
            EndUpdate(form);
        }
    }

    [DllImport("User32.dll")]
    private extern static int SendMessage(IntPtr hWnd, uint msg, IntPtr wParam, IntPtr lParam);

    private enum Message : int
    {
        WM_SETREDRAW = 0x000B, // int 11
    }

    /// <summary>
    /// Calls user32.dll SendMessage(handle, WM_SETREDRAW, 0, null) native function to disable painting
    /// </summary>
    /// <param name="c"></param>
    public static void BeginUpdate(Control c)
    {
        SendMessage(c.Handle, (int)Message.WM_SETREDRAW, new IntPtr(0), IntPtr.Zero);
    }

    /// <summary>
    /// Calls user32.dll SendMessage(handle, WM_SETREDRAW, 1, null) native function to enable painting
    /// </summary>
    /// <param name="c"></param>
    public static void EndUpdate(Control c)
    {
        SendMessage(c.Handle, (int)Message.WM_SETREDRAW, new IntPtr(1), IntPtr.Zero);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T10:05:23.423

试试下面的链接，

[http://msdn.microsoft.com/en-us/library/system.windows.forms.screen.workingarea%28VS.71%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.screen.workingarea%28VS.71%29.aspx)

# c++ - C++：OpenMP 共享内存保护

> ID：10978012
> 
> 赞同：6
> 
> 时间：2012-06-11T10:03:03.827
> 
> 标签：c++, multithreading, parallel-processing, openmp, shared-memory

如果我使用一个共享变量，比如说一个双精度变量，来计算程序执行过程中的某种总和。无论如何，这是否容易受到不稳定操作的影响？我的意思是，是否有可能多个内核以异步方式访问此变量并导致不稳定的结果？

例如：这是一个全局变量：

```
double totalTime = 0; 
```

并且在每个核心中调用一个命令：

```
totalTime += elapsedTime; 
```

最后一个操作/语句通过获取 totalTime 的值执行，将其放入 CPU 寄存器，然后进行加法运算。我可以想象多个核心会在同一时刻采用相同的值，然后添加新的 elapsedTime，然后由于延迟，存储在 totalTime 中的值将被错误的值覆盖。那可能吗？我该如何解决这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T10:05:42.513

显然，此操作不是线程安全的，因为正如您自己提到的，它涉及多个汇编指令。事实上，openMP 甚至对这种操作都有一个特殊的指令。

您将需要`atomic`编译指示来使其成为“原子”：

```
#pragma omp atomic
totalTime += elapsedTime; 
```

请注意，`atomic`仅当您对内存位置进行一次更新时才有效，例如添加、增量等。

如果您有一系列需要原子化的指令，则必须使用该`critical`指令：

```
#pragma omp critical
{
    // atomic sequence of instructions
} 
```

**编辑**：这是来自“snemarch”的一个很好的建议：如果您`totalTime`在并行循环中反复更新全局变量，您可以考虑使用该`reduction`子句来自动化该过程并使其更加高效：

```
double totalTime = 0;

#pragma omp parallel for reduction(+:totalTime)
for(...)
{
    ...
    totalTime += elapsedTime;
} 
```

最后`totalTime`将正确包含本地`elapsedTime`值的总和，而无需显式同步。

# jquery - 谷歌浏览器中的花式盒子

> ID：10978016
> 
> 赞同：0
> 
> 时间：2012-06-11T10:03:31.077
> 
> 标签：jquery, jsp, fancybox

我在我的应用程序中使用 spring 框架、java 和 jsp。我在我的应用程序中使用 Fancy 框弹出。在需要的地方，我使用一个类来调用它。它适用于 Mozilla Firefox，但在 Google Chrome 中，多个弹出表单加载就像滚动幻灯片一样。可以做些什么来避免多种形式？

```
 $(".feedbackPopup").fancybox({
                'width'             : '38%',
                'height'            : '65%',
                'min-height'        : 180,
                'autoScale'     : false,
                'transitionIn'      : 'none',
                'transitionOut'     : 'none',
                'hideOnOverlayClick' : false,
                'type'          : 'iframe'
            });

         $(".registerPopup").fancybox({
                'width'         : '40%',
                'height'        : '70%',
                'min-height'        : 180,
                'autoScale'     : false,
                'transitionIn'      : 'none',
                'transitionOut'     : 'none',
                'hideOnOverlayClick' : false,
                'type'              : 'iframe'
            });
        });
</script> 
```

我的应用程序的菜单栏上有 3 个图标，即反馈、登录和注册。，我使用以下语法调用

```
<div class="feedback">
 <a rel="tooltip" title="Feedback"  href="doFwdController.html"  class="txtdark_link feedbackPopup"><img src="images/feedback-icon.png" border="0" /></a>
</div>
<div class="login">
 <a  class="txtdark_link loginPopup" rel="tooltip" title="Login"  href="doLogin.html" ><img src="images/login-icon.png" border="0"  /></a>
</div> 
```

类似地注册..它对firefox浏览器非常有效......但是当我在chrome上使用相同的..ex：如果我首先调用登录并滚动表单，其他两个同时被调用并变成3的幻灯片形式..如何防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T16:34:25.370

`rel`当元素共享相同的属性时，它们将绑定到 fancybox 库。除非您对 有特定用途`rel="tooltip"`，否则可以尝试将其删除。

# connection-string - 在应用程序配置文件中找不到名为“MyApplicationEntities”的连接字符串

> ID：10978017
> 
> 赞同：52
> 
> 时间：2012-06-11T10:03:33.787
> 
> 标签：connection-string, database-migration, entity-framework-4.3

我只是安装 EF 4.3 并尝试通过迁移升级我的项目。但是我在尝试`add-migration initial`通过包管理器控制台执行我的项目时遇到问题。

它现在抛出任何异常`No connection string named 'MyApplicationEntities' could be found in the application config file.`

现在我的配置拥有一切

```
<connectionStrings>
<add name="MyApplicationEntities" 
     connectionString="metadata=res://*/DataModel.csdl|res://*/DataModel.ssdl|res://*/DataModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=localhost;initial catalog=MyApplicationEntitiesDB;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&quot;" 
     providerName="System.Data.EntityClient" /> 
```

我不确定问题是什么，是 EF 4.3 中的错误还是我做的不对。

我认为[这篇文章](https://stackoverflow.com/questions/7493337/entity-sqlce-cant-find-connection-string-in-app-config-file)已经解决了这个问题，但还没有完全解决。

任何人都得到了答案。

欣赏三杰。

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-06-11T11:42:20.197

啊，一不小心就想到了。

我不得不删除

```
public MasterEntities()
    : base("name=MyApplicationEntities")
    //      ^^^^^
{
} 
```

到

```
public MasterEntities()
    : base("MyApplicationEntities")
{
} 
```

EF 4.3 不喜欢调用连接字符串`name=xxxxx`

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-05-06T14:50:23.227

Sanj 指出的解决方案是您需要将连接字符串从数据库项目的 App.config 复制到 Web 项目的 web.config。我不确定为什么上述答案被标记为正确。我将此添加为答案而不是评论，以便未来的读者会发现这一点。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2014-01-28T19:32:30.203

我遇到了同样的错误，但我已经有一个带有正确连接字符串名称和正确声明的 DbContext 的 web.config 文件。但是，我注意到当我使用 -Verbose 运行 add-migration 时，它会将“启动项目”声明为与包含我的上下文的项目不同的项目。所以我更改了启动项目，重新运行了添加迁移，一切正常！！

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-06-16T06:09:49.590

确保您的 statup 项目配置文件具有连接字符串。此[链接](http://debugmode.net/2014/09/10/no-connection-string-named-could-be-found-in-the-asp-net-mvc-application-config-file-solved/)可能会对您有所帮助。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-05-18T20:50:04.237

我也有这个问题并解决了

1.  选择正确的`StartUp project`.
2.  在包管理器控制台上重新运行命令。

事情按预期进行。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-11-08T07:57:29.923

我也遇到了类似的异常。AppConfig 最初是在我们生成实体模型的项目中创建的。但是，如果您正在使用其他项目（我的解决方案中有几个项目）执行应用程序，则需要将 AppConfig 包含在正在执行的项目中。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-10-21T13:01:05.113

```
 1\. ctor => Context

   public MasterEntities()
    : base("ConnectionStringName")
{
}

 2\. config file

   <add name="ConnectionStringName"
      connectionString="Data Source=.;Initial Catalog=DatabaseName;User Id=sa; Password=YourPass;"
      providerName ="System.Data.SqlClient" />

 3\. in Sulation Exporer right click the project and select 'Set as
    startup project'

 4\. in PackageManagerConsole Change Default Project to Your Project of
    context class.

 5\. then:

add-migration new 
```

> 或将 ConnectionString 添加到工作项目的配置文件中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-23T19:02:37.573

就我而言，我有两个项目：

[![在此处输入图像描述](../Images/2d2537eb656e11970ca85f1c07c07729.png)](https://i.stack.imgur.com/V9veS.png)

我只需要将连接字符串从 DAL App.Config 项目复制到 WPF App.Config 项目

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-10-17T16:55:43.727

对于因为在 Visual Studio 中使用 WPF 时遇到此错误而到达这里的任何人，*请*查看这篇文章： [Does MVVM stop the ability for the Visual Studio Designer to show xaml?](https://stackoverflow.com/questions/43640361/does-mvvm-stop-the-ability-for-the-visual-studio-designer-to-show-xaml/43642741#comment91374664_43642741)

# authentication - 网络服务认证

> ID：10978019
> 
> 赞同：0
> 
> 时间：2012-06-11T10:03:37.397
> 
> 标签：authentication, web

假设我们有两个网页位于两台不同的服务器上——比如服务器 A 和服务器 B

现在，有没有一种方法可以帮助服务器 A 上的网页，确定它收到的请求来自服务器 B 上的指定网页？

我们不能在这里使用令牌，因为会话变量是无用的，因为所涉及的两个网页位于两个不同的服务器上。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T10:18:10.207

简单的方法，您可以在服务器 A 上的网页的 url 请求中发送信息，这些信息可以在服务器 B 页面上以某种方式进行散列，可以在 A 上使用，以确保散列信息有效并确认有效的重定向。

# c - 为 Windows 编译 SQLite（64 位）

> ID：10978020
> 
> 赞同：10
> 
> 时间：2012-06-11T10:03:43.387
> 
> 标签：c, windows, sqlite, gcc, 64-bit

我有 MinGW，我希望将[SQLite 合并源](http://www.sqlite.org/download.html)编译成 64 位 dll。我对这种编译还很陌生，到目前为止我的努力都失败了。（我首先开始使用 autoconf 合并，并在 Linux 上使用了 configure & make 工具。但显然这对 Windows 二进制文件不起作用。）

无论如何，有人告诉我我需要以下预处理器定义：

> 以下是我用于 64 位版本构建的编译器预处理器定义：
> 
> *   WIN64 NDBUG
> *   _视窗
> *   _USRDLL
> *   NO_TCL
> *   _CRT_SECURE_NO_DEPRECATE
> *   线程安全=1
> *   TEMP_STORE=1
> *   SQLITE_MAX_EXPR_DEPTH=0
> 
> 以下是我用于 32 位发布版本的编译器预处理器定义：
> 
> *   WIN32
> *   NDBUG
> *   _视窗
> *   _USRDLL
> *   NO_TCL
> *   _CRT_SECURE_NO_DEPRECATE
> *   线程安全=1
> *   TEMP_STORE=1
> *   SQLITE_MAX_EXPR_DEPTH=0

我不知道把这些放在哪里。我最终做了一个有根据的猜测，制作了一个名为 sqlite3w64.h 的新文件（为了整洁）并粘贴在以下内容中：

```
#define WIN64 NDEBUG
#define _WINDOWS
#define _USRDLL
#define NO_TCL
#define _CRT_SECURE_NO_DEPRECATE
#define THREADSAFE 1
#define TEMP_STORE 1
#define SQLITE_MAX_EXPR_DEPTH 0 
```

然后我使用以下命令编译了源代码：

```
gcc sqlitew64.h sqlite3.h sqlite3ext.h shell.c sqlite3.c -o sqlite_x64.dll 
```

结果是一个 733KB 的 DLL 文件。好的！它真的有效吗？是不是疯了——我得到了一个 BadImageFormatException。然后我还尝试使用相同的方法进行 x86 编译。再一次，我得到了一个 733KB 的 DLL 文件（这很奇怪？），再一次，我得到了一个 BadImageFormatException。

帮助。

### 更新

改用以下命令：

```
gcc -shared -DWIN64 -DNDEBUG -D_WINDOWS -D_USRDLL -DNO_TCL -D_CRT_SECURE_NO_DEPRECATE -DTHREADSAFE=1 -DTEMP_STORE=1 -DSQLITE_MAX_EXPR_DEPTH=0 -I. shell.c sqlite3.c -o sqlite_x64.dll -Wl,--out-implib,sqlite3.a 
```

生成一个 740KB 的 DLL 文件，它仍然给出 BadImageFormatException。

### 最终更新

原来我的 MinGW 版本只有 32 位。获得 64 位版本之后，我就可以制作 64 位的 SQLite。添加标志 -m64 将编译器设置为 64 位模式。

64 位：

```
gcc -shared -DWIN64 -DNDEBUG -D_WINDOWS -D_USRDLL -DNO_TCL -D_CRT_SECURE_NO_DEPRECATE -DTHREADSAFE=1 -DTEMP_STORE=1 -DSQLITE_MAX_EXPR_DEPTH=0 -m64 -I. shell.c sqlite3.c -o sqlite3_x64.dll -Wl,--out-implib,sqlite3_x64.a 
```

32 位：

```
gcc -shared -DWIN32 -D_WINDOWS -D_USRDLL -DNO_TCL -D_CRT_SECURE_NO_DEPRECATE -DTHREADSAFE=1 -DTEMP_STORE=1 -DSQLITE_MAX_EXPR_DEPTH=0 -m32 -I. shell.c sqlite3.c -o sqlite3_x86.dll -Wl,--out-implib,sqlite3_x86.a 
```

MinGW-64 预编译：http: [//sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win64/Automated%20Builds/mingw-w64-bin_i686-mingw_20111220.zip/download ?use_mirror=ignum](http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win64/Automated%20Builds/mingw-w64-bin_i686-mingw_20111220.zip/download?use_mirror=ignum)

安装说明：[http ://code.google.com/p/tonatiuh/wiki/InstallingMinGWForWindows64](http://code.google.com/p/tonatiuh/wiki/InstallingMinGWForWindows64)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T10:14:52.740

您正在编译为 EXE。将其称为 DLL 不会神奇地*使其*成为 DLL。

您需要将[特殊的链接器选项](http://www.mingw.org/wiki/sampleDLL)传递给 gcc 以使其创建 DLL。引自 Mingw 网站：（有点^(，我用 gcc 替换了 g++）)

```
gcc -c -DBUILDING_EXAMPLE_DLL example_dll.cpp
gcc -shared -o example_dll.dll example_dll.o -Wl,--out-implib,libexample_dll.a 
```

该页面还解释了您希望 DLL 导出的函数必须使用`__declspec(dllexport)`. （再往下，有一个关于如何将所有全局函数导出到 DLL 的示例，就像在 Unix 中通常发生的那样。）

gcc的**-Wl**参数告诉 gcc 将进一步的参数**--out-imlib,libexample_dll.a**传递给链接器。

我还会*100%*确定构建的 DLL 实际上是 64 位 DLL 而不是 32 位 DLL。你有什么方法可以检查吗？在 Linux 上，您可以运行“文件”命令。

您还可以尝试将`-m64`选项添加到 gcc 命令行，这将*强制*gcc 以 amd64 目标为目标。

如果*这*不起作用，则您可能完全使用了错误的编译器。确保您拥有[Mingw 工具链的 x86_64/amd64 版本](http://mingw-w64.sourceforge.net/)。安装就像[找到正确的 ZIP、解压缩并设置路径](http://sourceforge.net/apps/trac/mingw-w64/wiki/Downloading%20and%20installing%20MinGW-w64)一样简单。

如果所有这些都失败了，或者如果您只是想验证一个假定正确编译的设置，请在此处或[从此处尝试](http://sqlite.phxsoftware.com/)[预编译的 64 位二进制文​​件](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T10:21:35.030

在您的情况下，这个单一的链接和编译命令会起作用：

```
g++ -shared
-DWIN64
-DNDEBUG
-D_WINDOWS
-D_USRDLL
-DNO_TCL
-D_CRT_SECURE_NO_DEPRECATE
-DTHREADSAFE=1
-DTEMP_STORE=1
-DSQLITE_MAX_EXPR_DEPTH=0
-I.
shell.c sqlite3.c
-o sqlite_x64.dll
-Wl,--out-implib,libsqllite_x64.dll.a 
```

编译和链接阶段将立即执行。可以在命令行上添加定义。头文件不需要编译，但需要将当前目录作为头文件搜索目录传递，并指定dll和导入文件的名称。

# .net - 由 STS IssuedToken 保护的 WCF 服务 - 配置问题

> ID：10978022
> 
> 赞同：0
> 
> 时间：2012-06-11T10:04:00.873
> 
> 标签：.net, wcf, web-services, wcf-binding, wcf-security

我正在尝试创建一个使用 STS IssuedToken 保护的 WCF dotnet 服务。STS 由 X509 保护。

以下是依赖方的配置，我正在使用自定义绑定。我是否需要在自定义绑定的发行者中添加身份？

我的行为配置对吗？请帮忙。

```
<?xml version="1.0"?>
 <configuration>
 <system.serviceModel>
 <services>
   <service name="EnterpriseServices.X509.EchoService">
     <endpoint address="" binding="customBinding" bindingConfiguration="stsBinding" contract="EnterpriseServices.IEchoService"/>
   </service>
 </services>

<bindings>    
  <customBinding>
    <binding name="stsBinding">
      <security authenticationMode="IssuedToken" securityHeaderLayout="Lax" requireDerivedKeys="false" >
        <issuedTokenParameters keyType="SymmetricKey" tokenType="http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1" >
          <issuer address="http://sts_hostname/SenderVouches.svc/app">
          </issuer>
          <issuerMetadata address="http://sts_hostname/SenderVouches.svc/mex"></issuerMetadata>
        </issuedTokenParameters>
      </security>
      <httpTransport></httpTransport>
    </binding>
  </customBinding>
</bindings>

<behaviors>
  <serviceBehaviors>
    <behavior>
      <serviceDebug includeExceptionDetailInFaults="true"/>
      <serviceCredentials>   
        <issuedTokenAuthentication certificateValidationMode="None" revocationMode="NoCheck">
          <allowedAudienceUris>
            <add allowedAudienceUri="https://rp_hostname/"/>
          </allowedAudienceUris>
        </issuedTokenAuthentication>
        <clientCertificate>
          <authentication certificateValidationMode="None" revocationMode="NoCheck"/>
        </clientCertificate>
      </serviceCredentials>
    </behavior>
  </serviceBehaviors>
 </behaviors>
 </system.serviceModel>
</configuration> 
```

以下是在服务器端收到的异常。从 Metro-java 客户端访问，它是使用服务提供的 wsdl 生成的。

```
 <E2ETraceEvent xmlns="http://schemas.microsoft.com/2004/06/E2ETraceEvent">
    <System xmlns="http://schemas.microsoft.com/2004/06/windows/eventlog/system">
    <EventID>131075</EventID>
    <Type>3</Type>
    <SubType Name="Error">0</SubType>
    <Level>2</Level>
    <TimeCreated SystemTime="2012-06-11T13:49:34.3816111Z" />
    <Source Name="System.ServiceModel" />
    <Correlation ActivityID="{d15dc2ee-5be8-4a1f-8690-748979c0a0e3}" />
    <Execution ProcessName="w3wp" ProcessID="944" ThreadID="8" />
    <Channel />
    <Computer>CH10</Computer>
    </System>
    <ApplicationData>
    <TraceData>
    <DataItem>
    <TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Error">
    <TraceIdentifier>http://msdn.microsoft.com/en-US/library/System.ServiceModel.Diagnostics.ThrowingException.aspx</TraceIdentifier>
    <Description>Throwing an exception.</Description>
    <AppDomain>/LM/W3SVC/3/ROOT-1-129838961736527071</AppDomain>
    <Exception>
    <ExceptionType>System.ServiceModel.ProtocolException, System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
    <Message>There is a problem with the XML that was received from the network. See inner exception for more details.</Message>
    <StackTrace>
    at System.ServiceModel.Channels.HttpRequestContext.CreateMessage()
    at System.ServiceModel.Channels.HttpChannelListener.HttpContextReceived(HttpRequestContext context, Action callback)
    at System.ServiceModel.Activation.HostedHttpTransportManager.HttpContextReceived(HostedHttpRequestAsyncResult result)
    at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.HandleRequest()
    at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.BeginRequest()
    at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.OnBeginRequest(Object state)
    at System.Runtime.IOThreadScheduler.ScheduledOverlapped.IOCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* nativeOverlapped)
    at System.Runtime.Fx.IOCompletionThunk.UnhandledExceptionFrame(UInt32 error, UInt32 bytesRead, NativeOverlapped* nativeOverlapped)
    at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP)
    </StackTrace>
    <ExceptionString>System.ServiceModel.ProtocolException: There is a problem with the XML that was received from the network. See inner exception for more details. ---&gt; System.Xml.XmlException: The body of the message cannot be read because it is empty.
       --- End of inner exception stack trace ---</ExceptionString>
    <InnerException>
    <ExceptionType>System.Xml.XmlException, System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
    <Message>The body of the message cannot be read because it is empty.</Message>
    <StackTrace>
    at System.ServiceModel.Channels.HttpRequestContext.CreateMessage()
    at System.ServiceModel.Channels.HttpChannelListener.HttpContextReceived(HttpRequestContext context, Action callback)
    at System.ServiceModel.Activation.HostedHttpTransportManager.HttpContextReceived(HostedHttpRequestAsyncResult result)
    at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.HandleRequest()
    at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.BeginRequest()
    at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.OnBeginRequest(Object state)
    at System.Runtime.IOThreadScheduler.ScheduledOverlapped.IOCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* nativeOverlapped)
    at System.Runtime.Fx.IOCompletionThunk.UnhandledExceptionFrame(UInt32 error, UInt32 bytesRead, NativeOverlapped* nativeOverlapped)
    at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP)
    </StackTrace>
    <ExceptionString>System.Xml.XmlException: The body of the message cannot be read because it is empty.</ExceptionString>
    </InnerException>
    </Exception>
    </TraceRecord>
    </DataItem>
    </TraceData>
    </ApplicationData>
    </E2ETraceEvent> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:25:57.293

我将从向服务器添加一些跟踪开始，这可能会帮助您找出问题所在。

将此添加到您的服务器应用程序配置中：

```
 <system.diagnostics>
    <sources>
      <source name="Microsoft.IdentityModel" switchValue="Verbose">
        <listeners>
          <add name="xml" type="System.Diagnostics.XmlWriterTraceListener"
               initializeData="c:\temp\WIF.svclog" />
        </listeners>
      </source>
      <source name="System.ServiceModel.MessageLogging" switchValue="Verbose">
        <listeners>
          <add name="xml" type="System.Diagnostics.XmlWriterTraceListener"
               initializeData="c:\temp\WCF.svclog" />
        </listeners>
      </source>
    </sources>
    <trace autoflush="true" />
  </system.diagnostics> 
```

然后在此处发布服务器创建的异常。

# python - 在python中的类的函数中添加一行代码

> ID：10978023
> 
> 赞同：0
> 
> 时间：2012-06-11T10:04:02.633
> 
> 标签：python, python-2.7

例如

```
class abcd(base_class):
    def test1(self,list_of_ids):
        ###some other statements
        return list_of_ids 
```

这是基类..我无法编辑。所以需要继承类，需要`list(set(list_of_ids))`在test1()中加一行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T10:22:43.970

如果我正确理解你的问题，创建一个子类，调用父类的方法，并修改输出：

```
class Modifiedabcd(abcd):
    def test1(self, list_of_ids):
        ###some other statements
        temp = super(Modifiedabcd, self).test1(list_of_ids)
        return list(set(temp)) 
```

# perl - 在 mod_perl 下使用 NYTProf 和 Mason

> ID：10978026
> 
> 赞同：2
> 
> 时间：2012-06-11T10:04:08.750
> 
> 标签：perl, apache, mod-perl2, mason

我正在尝试分析一个基于 HTML::Mason 编写的 Web 应用程序，我设法设置了分析器，但它似乎没有拾取组件内的代码。有没有办法使用 NYTProf 来分析 Mason 应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:17:17.367

我意识到您正在 mod_perl 下部署此应用程序，但处理此问题的一种方法是在 Plack 下部署，然后使用[Plack::Middleware::Debug::Profiler::NYTProf](https://metacpan.org/module/Plack%3a%3aMiddleware%3a%3aDebug%3a%3aProfiler%3a%3aNYTProf)。我还没有为 Mason 应用程序这样做，但让一些 CGI::Application 代码在 Plack 下运行几乎是微不足道的。一旦您能够在 Plack 下进行部署，您就可以访问许多出色的中间件组件以进行调试。如果您可以在对应用程序本身进行少量更改或不更改的情况下执行此操作，您仍然可以继续在 mod_perl 下部署到生产环境，但在开发中使用 Plack 开发诸如 NYTProf 之类的东西。

编辑：我现在看到我应该指出你在[Devel::NYTProf::Apache](https://metacpan.org/module/Devel%3a%3aNYTProf%3a%3aApache)。

# ruby - Windows 'choice' 命令弄乱了 Ruby 'gets' 方法

> ID：10978037
> 
> 赞同：6
> 
> 时间：2012-06-11T10:04:40.240
> 
> 标签：ruby, windows, batch-file

打开`irb`并

1.  类型`gets`。它应该可以正常工作。
2.  然后尝试`system("choice /c YN")`它应该按预期工作。
3.  现在再试`gets`一次，它的行为很奇怪。

有人能告诉我这是为什么吗？

编辑：为了澄清“奇怪”行为，它允许我输入 for `gets`，但不显示字符，我必须按两次 enter 键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:56:44.147

终端输入输出处理是黑暗而神秘的艺术。任何试图`bash`在 Windows 中`PowerShell`通过彩色输出工作的人都`ssh`知道这一点。*（而且各种快捷键习惯，比如 Ctrl+Backspace 只会让事情变得更糟。）*

问题的可能原因之一是特殊字符处理。那里的每个终端都可以以多种不同的模式键入字符，并且它会解析自己的输出以搜索某些字符序列以切换状态。

Fe[在这里](http://ascii-table.com/ansi-escape-sequences.php)可以找到ANSI转义码序列，这是不同类型终端之间可能支持的标准之一。

看到了`Esc[5;45m`吗？这将使所有以下输出在洋红色背景上闪烁。而且还有更多类似的东西。

因此，从字面上看，您的问题的答案是-您的`choice`命令使用特殊的转义序列使输出模式混乱，而 ruby​​ 在终端操作的怪异特殊模式下会中断。

但更有用的是[HighLine gem 文档](http://highline.rubyforge.org/doc/)的链接。[当可以使用大约 12 个 LOC](https://gist.github.com/botimer/2891186)来实现相同的行为时，为什么人们可能想要实现特定于平台和突兀的行为？*对 Gist 的所有尊重都**归于 botimer**，我只是通过搜索偶然发现了他的代码。*

# android - 将edittext限制为单行

> ID：10978038
> 
> 赞同：348
> 
> 时间：2012-06-11T10:04:44.337
> 
> 标签：android, android-edittext

可能重复：[android-singleline-true-not-working-for-edittext](https://stackoverflow.com/questions/6909245/android-singleline-true-not-working-for-edittext)

```
<EditText 
    android:id="@+id/searchbox"  
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:lines="1"
    android:scrollHorizontally="true"
    android:ellipsize="end"
    android:layout_weight="1"
    android:layout_marginTop="2dp"
    android:drawablePadding="10dp"
    android:background="@drawable/edittext"
    android:drawableLeft="@drawable/folder_full"
    android:drawableRight="@drawable/search"
    android:paddingLeft="15dp"
    android:hint="search...">
</EditText> 
```

我想让上面`EditText`只有一行。即使用户按下“输入”，光标也不应该下到第二行。任何人都可以帮我这样做吗？

* * *

## 回答 #1

> 赞同：621
> 
> 时间：2012-06-11T10:12:26.263

使用`android:maxLines="1"`和`android:inputType="text"`

您忘记了[android:maxLines](https://developer.android.com/reference/android/widget/TextView.html#attr_android:maxLines)属性。并参考[android:inputType](https://developer.android.com/reference/android/widget/TextView.html#attr_android:inputType)用你的例子，下面会给出这个结果：

```
<EditText 
    android:id="@+id/searchbox"  
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:maxLines="1"
    android:inputType="text"
    android:scrollHorizontally="true"
    android:ellipsize="end"
    android:layout_weight="1"
    android:layout_marginTop="2dp"
    android:drawablePadding="10dp"
    android:background="@drawable/edittext"
    android:drawableLeft="@drawable/folder_full"
    android:drawableRight="@drawable/search"
    android:paddingLeft="15dp"
    android:hint="search...">
</EditText> 
```

* * *

## 回答 #2

> 赞同：216
> 
> 时间：2015-04-23T00:34:54.297

不推荐使用`android:singleLine="true"`。

只需添加您的输入类型并将 maxline 设置为 1，一切都会正常工作

```
android:inputType="text"
android:maxLines="1" 
```

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2013-05-05T03:51:13.497

`android:singleLine`现在已弃用。从[文档](http://developer.android.com/reference/android/R.attr.html#singleLine)中：

> **此常量在 API 级别 3 中已弃用。**
> 
> 此属性已弃用。改用`maxLines`更改静态文本的布局，并使用`textMultiLine`inputType 属性中的标志代替可编辑的文本视图（如果同时提供了 singleLine 和 inputType，则 inputType 标志将覆盖 singleLine 的值）。

因此，您可以设置`android:inputType="textEmailSubject"`或任何其他与字段内容匹配的值。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2014-07-26T12:10:30.253

您必须在 xml 中的 EditText 中添加这一行：

```
android:maxLines="1" 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2016-03-29T14:23:55.170

```
android:maxLines="1"
android:inputType="text" 
```

添加上面的代码以在布局中的 EditText 标记中添加一行。

```
android:singleLine="true" is deprecated 
```

> 此常量在**API 级别 3中****已弃用**。
> 
>  **此属性已弃用。改用 maxLines 来更改静态文本的布局，并使用 inputType 属性中的 textMultiLine 标志代替可编辑的文本视图（如果同时提供了 singleLine 和 inputType，则 inputType 标志将覆盖 singleLine 的值）。**

 *** * *

## 回答 #6

> 赞同：13
> 
> 时间：2016-06-02T06:26:32.283

现在`android:singleLine`属性已被弃用。请将这些属性添加到您`EditText`的`EditText`单行中。

```
android:inputType="text"
android:imeOptions="actionNext"
android:maxLines="1" 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2012-06-11T10:12:47.253

我过去已经这样做了`android:singleLine="true"`，然后为“enter”键添加了一个侦听器：

```
((EditText)this.findViewById(R.id.mytext)).setOnKeyListener(new OnKeyListener() {

    public boolean onKey(View v, int keyCode, KeyEvent event) {

        if (event.getAction() == KeyEvent.ACTION_DOWN && keyCode == KeyEvent.KEYCODE_ENTER) {
            //if the enter key was pressed, then hide the keyboard and do whatever needs doing.
            InputMethodManager imm = (InputMethodManager)context.getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(getApplicationWindowToken(), 0);

            //do what you need on your enter key press here

            return true;
        }

        return false;
    }
}); 
```

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2016-09-18T20:34:23.780

这将适用于 EditText：

```
android:inputType="text" 
```

然后我会为输入文本设置一个最大长度：

```
android:maxLines="1" 
```

这些是现在需要的 2 个。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2012-06-11T10:10:08.903

包括 `android:singleLine="true"`

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2016-03-06T12:47:56.207

每个人都在展示 XML 方式，除了一个人展示了调用 EditText 的 setMaxLines 方法。但是，当我这样做时，它没有用。对我有用的一件事是设置输入类型。

```
EditText editText = new EditText(this);
editText.setInputType(InputType.TYPE_CLASS_TEXT); 
```

这允许 AZ、az、0-9 和特殊字符，但不允许按 Enter。当您按下回车键时，它将转到下一个 GUI 组件（如果适用于您的应用程序）。

您可能还想设置可以放入该 EditText 的最大字符数，否则它将把右边的任何内容推离屏幕，或者只是开始拖离屏幕本身。你可以这样做：

```
InputFilter[] filters = new InputFilter[1];
filters[0] = new InputFilter.LengthFilter(8);
editText.setFilters(filters); 
```

这会将 EditText 中的最大字符数设置为 8。希望这一切对你有所帮助。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2016-03-01T10:43:31.953

以编程方式：

```
textView.setMaxLines(1); 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2012-06-11T10:13:04.923

采用

```
android:ellipsize="end"
android:maxLines="1" 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2014-04-10T14:24:12.360

为了限制您只需将单行选项设置为“true”。

```
android:singleLine="true" 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2018-06-26T01:56:23.780

请尝试此代码

```
android:inputType="textPersonName" 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2012-06-11T10:13:32.927

使用下面的代码而不是您的代码

```
<EditText 
    android:id="@+id/searchbox"  
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:maxLines="1"
    android:inputType="text"
    android:scrollHorizontally="true"
    android:ellipsize="end"
    android:layout_weight="1"
    android:layout_marginTop="2dp"
    android:drawablePadding="10dp"
    android:background="@drawable/edittext"
    android:drawableLeft="@drawable/folder_full"
    android:drawableRight="@drawable/search"
    android:paddingLeft="15dp"
    android:hint="search..."/> 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2013-06-16T23:37:22.093

@Aleks G OnKeyListener() 工作得非常好，但我从 MainActivity 运行它，因此不得不稍微修改它：

```
EditText searchBox = (EditText) findViewById(R.id.searchbox);
searchBox.setOnKeyListener(new OnKeyListener() {

    public boolean onKey(View v, int keyCode, KeyEvent event) {

        if (event.getAction() == KeyEvent.ACTION_DOWN && keyCode == KeyEvent.KEYCODE_ENTER) {
            //if the enter key was pressed, then hide the keyboard and do whatever needs doing.
            InputMethodManager imm = (InputMethodManager) MainActivity.this.getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(searchBox.getApplicationWindowToken(), 0);

            //do what you need on your enter key press here

            return true;
        }

        return false;
    }
}); 
```

我希望这可以帮助任何尝试这样做的人。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2014-11-10T20:44:00.417

同样重要的是要注意属性 android:inputType 是否为**textMultiLine**。如果是这样，属性 android:singleLine、android:imeOptions、android:ellipsize 和 android maxLines 将被忽略，并且您的 EditText 无论如何都会接受 MultiLines。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-01-20T11:20:53.637

将此行添加到您的编辑文本

安卓：inputType="文本"

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2017-10-20T17:57:13.723

```
android:imeOptions="actionDone" 
```

为我工作。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2013-10-12T10:12:14.947

`android:singleLine="true"`现在已[折旧](http://developer.android.com/reference/android/R.attr.html#singleLine)，因此 请使用

# 安卓：m​​axLines="1"

改用 maxLines 来更改静态文本的布局，并使用 inputType 属性中的 textMultiLine 标志代替可编辑的文本视图（如果同时提供了 singleLine 和 inputType，则 inputType 标志将覆盖 singleLine 的值）。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-10-02T11:39:29.470

在 XML 文件中在编辑文本中添加此属性

```
 android:maxLines="1" 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-07-31T03:31:45.183

您必须在 EditText 中添加这一行

```
android:maxLines="1" 
```

还有一件事，不要忘记设置 `android:inputType`（无论你想要什么，短信，电话......，但你必须设置它）

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-11-01T04:02:27.413

在 XML 文件中。只需添加

安卓：m​​axLines="1"

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2020-09-29T08:06:51.990

对我来说，我是这样做的，转到 xml 文件中的 textView 并添加这两行

` android:maxLines="1"

安卓：inputType="文本"`**

# powershell - Powershell，从html文件中删除文本行

> ID：10978039
> 
> 赞同：1
> 
> 时间：2012-06-11T10:04:44.337
> 
> 标签：powershell, lines

我在 html 文件中有一些报告。我需要将它们放在excel中并进行一些更改，所以我认为我可以使用powershell预先进行这些更改。有些行在固定的位置，有些则不是，所以我需要通过让脚本识别模式来删除它们。

从顶部开始的固定线路：12-14、17、19、25-27、30-32、40-42 从底部开始的固定线路：3-13、48-60

我需要查找和删除的模式是：

```
<td align="center">random string</td>
<td align="left">random string</td>
<td align="left">random string</td>
<td align="left">random string</td>
<td align="right">random string</td> 
```

对于我发现的固定线路，我可以这样做：

```
(gc $maindir\Report23.HTML) | ? {(12..14) -notcontains $_.ReadCount} | out-file $maindir\Report23b.HTML 
```

它在删除第 12-14 行时起作用，但我需要将其余的固定行号放在同一命令中，我似乎无法弄清楚如何。输出文件的文件大小也是原始文件的两倍，我觉得这很奇怪。我尝试使用 set-content 生成接近原始文件大小但在某些部分破坏文本编码的文件。

我不知道如何去识别模式虽然......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T10:24:11.417

你不能做这样的事情：

```
$lines = 12..14
$lines += 17
$lines += 25..27
$lines += 30..32
$lines += 40..42 
```

然后在 where 子句中使用该数组：

```
? {$lines -notcontains $_.ReadCount} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:49:09.170

输出文件的文件大小是原始文件的两倍，因为原始文件可能是 ASCII 编码的，而新文件默认是 Unicode 编码的。尝试这个：

```
$length = (gc $maindir\Report23.HTML).length
$rangefrombottom = ($length-60)..($length-48)+($length-13)..($length-3)
$rangefromtop = 12..14+17,19+25..27+30..32+40..42
(gc $maindir\Report23.HTML) | ? {$rangefromtop -notcontains $_.ReadCount} | ? {$rangefrombottom -notcontains $_.ReadCount} | out-file -encoding ASCII $maindir\Report23b.HTML 
```

# c++ - 在类中复制和存储 LPTSTR 会导致崩溃

> ID：10978040
> 
> 赞同：0
> 
> 时间：2012-06-11T10:04:44.773
> 
> 标签：c++, winapi

我正在尝试复制 LPTSTR 并将该字符串作为成员变量存储在对象中。但是我复制 LPTSTR 的尝试似乎失败了，当我访问/打印复制的 LPTSTR 的值时，我遇到了程序崩溃。

是否可以复制 LPTSTR 并将其存储在我下面的班级中，还是只使用 TCHAR* 更好？

```
class Checkbox
{
   private:
      LPTSTR text;
      HWND hwnd;

   public:
      Checkbox(HWND nHwnd, LPTSTR nText)
      {
        lstrcpy(checkText, text); 
      }

      void print()
      {
        // Causes a crash
        MessageBox(hwnd, text, text, MB_OK);
      }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:09:38.883

LPTSTR 只是一个指针。因此，您需要在使用它之前注意分配内存。TCHAR* 也是如此。或者，如果您不得不担心 unicode 字符串，您可以使用 wstring。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:36:25.597

就像其他答案所说的那样，您需要先为“LPTSTR 文本”分配内存，然后才能使用它。

获取要复制的字符串的长度（strlen 应该这样做），然后像这样分配内存：

```
text = TCHAR[length]; 
```

您可以为您的类声明一个解构器，以在程序结束或程序离开类实例的范围时删除分配的内存。

```
~CheckBox()
{
if (text)
delete[] text;
} 
```

您还应该创建另一个不带参数的构造函数，将文本设置为 NULL；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T10:07:55.207

您复制到一个*未初始化*的指针，这将覆盖内存中的一些随机区域。您需要先为指针分配内存，并记住在不再需要时释放内存。

# ruby-on-rails - Resque 工作人员无法正常启动

> ID：10978044
> 
> 赞同：7
> 
> 时间：2012-06-11T10:04:51.473
> 
> 标签：ruby-on-rails, devise, resque

我使用设计，我可以发送带有 resque 的邮件。我使用这个 wiki： [如何：在后台发送设计电子邮件（Resque、Sidekiq 和 Delayed::Job）](https://github.com/plataformatec/devise/wiki/How-To%3a-Send-devise-emails-in-background-%28Resque,-Sidekiq-and-Delayed%3a%3aJob%29)

我有工作在排队，但没有工人。我必须创建任务还是工人？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-11T21:39:26.730

好的，尝试将其添加到您的 Rakefile 中：

```
require 'resque/tasks' 
```

然后运行你的工作：

```
QUEUE=* rake resque:work 
```

# asp.net-mvc - 无论如何让 mvc 框架验证我的操作参数，就像 ModelState.IsValid

> ID：10978049
> 
> 赞同：4
> 
> 时间：2012-06-11T10:05:00.780
> 
> 标签：asp.net-mvc

我有一个动作，想对参数做一些简单的检查

```
ActionResult Test([Range(0,10)] int i)
{
  // ModelState.IsValid is always true, i want it to be false if i > 10 or i < 0
} 
```

无论如何要解决这个问题或解决它或 MVC 提供的任何替代方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:47:02.273

我想在给你一些替代选项之前检查数据注释属性定义。我惊讶地看到它的`AttributeUsage`定义是这样的，你也可以应用到方法参数上，不幸的是它没有像我自己尝试的那样工作。虽然我不确定他们为什么允许此参数作为方法参数（我认为它有效但不起作用）

关于替代选项，你可以试试这个，

```
public ActionResult Test(int i)
{
   var rangeAttr = new RangeAttribute(0, 10);

   if(!rangeAttr.IsValid(i))
     ModelState.AddModelError(i.ToString(), rangeAttr.FormatErrorMessage("i"));       
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:09:48.920

在 mvc 中，最合适的方法是在你的模型中简单地放置一个属性

```
 [Range(0,10)]
 public int yourproperty{ get; set; } 
```

阅读此 [http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-6](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T10:10:18.963

如果超出该范围，您可以创建自己的错误，这会使 IsValid 为假。

所以例如你可以做类似的事情

```
 if(i < 0 || i > 10)
        ModelState.AddModelError("Range", "Invalid Range"); 
```

我相信这应该有效。

# jsf-2 - 将行添加到 rich:datatable 几秒钟（通知）

> ID：10978050
> 
> 赞同：0
> 
> 时间：2012-06-11T10:05:10.263
> 
> 标签：jsf-2, richfaces

我正在使用richFaces - rich:dataTable。我需要删除一些行，然后在新行（在广告之后）显示几秒钟的通知，然后它（带通知的行）将消失。

在 JSF 中，我无法为我的表提供唯一 ID 或名称，因此我不知道如何在 DOM 中找到它。也许那时我可以添加一些 jQuery 行代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:03:25.787

正如我所说，您可以执行以下操作：

```
<h:form id="myForm">
    <h:dataTable id="dtMyData" value="#{bean.lstData}" var="data">
        <!-- column definitions -->
    </h:dataTable>
</h:form> 
```

呈现的 HTML 就像

```
<form id="myForm">
    <table id="myForm:dtMyData">
        <!-- rows auto generated -->
    </table>
</form> 
```

你可以使用最简单的 JS 在你的 DOM 中找到它

```
document.getElementById('myForm:dtMyData') 
```

此外，您可以使用`<rich:dataTable>`标签组件代替，`<h:dataTable>`不会有任何问题。

您可以使用 JavaScript/jQuery 自己“删除”行，或者仅通过删除列表中的项目并使用`<a4j:commandButton render="dtMyData">`（而不是您可以使用的命令按钮`<a4j:commandLink>`）重新呈现数据表。

要在触发 ajax 操作后向用户显示消息，可以使用以下 Richfaces 代码：

```
<a4j:status onstop="Richfaces.showModalPanel('mdpMessage')" />
<rich:modalPanel id="mdpMessage" resizeable="false" zindex="5000"
        minHeight="30" minWidth="10" height="70" width="150">
        <f:facet name="header">
            <h:outputText value="Operation Results" />
        </f:facet>
        <h:outputText value="Messages" />
        <!-- you can add your h:messages here -->
        <a4j:commandButton value="Close"
            onclick="Richfaces.hideModalPanel('mdpMessage')" />
</rich:modalPanel> 
```

# google-maps - 我可以暂时禁用 Google Maps V3 中标记的渲染吗？

> ID：10978053
> 
> 赞同：1
> 
> 时间：2012-06-11T10:05:21.450
> 
> 标签：google-maps, google-maps-api-3, performance

我有一张地图，在某些时候我画了大约 14000 个标记。如果地图的边界设置为绘制标记的整个区域，则绘制标记需要很长时间（大约 8 秒）。但是如果我放大到一个很少/没有标记的区域，那么绘制 14000 个标记会非常快，比如 2-3 秒。

我认为这是因为最耗时的过程是将标记图标实际绘制到图块上，并且由于一次添加一个标记，因此地图在很短的时间内被渲染了很多次。

因此，我想知道是否可以在添加图标时禁用地图更新/渲染，然后在添加所有图标时重新启用它。

欢迎任何具有类似效果的解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:25:02.940

渲染时间会减少，因为当您放大得更紧时，api v3 不会添加 14 000。它只添加当前边界中的标记以及边缘周围的瓦片层缓冲区中的标记（可能是一个或两个瓦片）。

我对你的意思有点困惑，但也许你只想在地图已经加载后添加标记：

```
google.maps.event.addListenerOnce(map,'tilesloaded',addMarkersFunction); 
```

话虽如此，14 000 个标记是很多标记。当你有这么多时，聚类标记甚至不再是我认为可选的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T11:18:49.887

是的，您可以创建很多标记，而不是将它们与地图相关联。然后，对它们中的每一个调用 setMap() 函数。

您也只能在当前范围内执行此操作。

您是否考虑过使用标记聚类来减少标记的数量？

查看您的代码会很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T13:25:10.257

尝试使用[Google Maps API v3 Utility Library中的](http://code.google.com/p/google-maps-utility-library-v3/)[MarkerManager](http://code.google.com/p/google-maps-utility-library-v3/source/browse/tags/markermanager/)库。它是为此类问题而设计的。虽然文档的方式不多，但源代码中有几个有用的示例和大量注释。

# c# - 何时检查和何时不检查 ModelState.IsValid

> ID：10978061
> 
> 赞同：3
> 
> 时间：2012-06-11T10:06:04.833
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-2

我正在使用 ASP.NET MVC2。
我喜欢如何注释模型的字段并检查`ModelState.IsValid`.

检查它的明显原因是在进行验证时，但如果新的验证规则应用于模型，您是否应该始终检查它？
这样你就不会忘记/需要检查控制器是否检查`IsValid`.

是否有理由不在所有情况下都进行此检查？也许就在控制器动作有副作用（数据库写入等）时？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T10:25:05.537

> 但是如果新的验证规则应用于模型，您是否应该始终检查它？

您应该**始终**进行此检查，否则您最终会保留没有有效状态的模型。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T10:25:37.977

通常，在 asp.net-mvc 中，传递给动作的模型是*视图模型*，它们包含所有且仅包含动作所需的*数据*。如果该数据无效，从理论上讲，操作应该无法完成其工作。

`ModelState.IsValid`确保行动所需的所有数据都处于良好状态，可以采取行动。我看不出您*不想*验证该数据的原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T10:28:26.080

在尝试使用模型中收集的数据做某事之前，您应该始终检查模型是否有效。这首先是验证的目的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-15T23:41:57.447

看起来很明显，但我会试一试。当您不**发布模型时，****无需检查**模型状态。常见的场景是当您从服务中获取数据并在 get 操作上显示时。

# php - 覆盖 Joomla 组件模板

> ID：10978067
> 
> 赞同：1
> 
> 时间：2012-06-11T10:06:46.503
> 
> 标签：php, joomla, joomla-template

我正在使用此 URL 来访问组件的原始 HTML：

```
/index.php?option=com_downloadform&tmpl=component 
```

然而，它也返回文档类型、标题标签、头部标签等。

有没有办法只返回和之间的`<body>`内容`</body>`？

谢谢，

伊恩

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T11:05:14.960

在您的模板文件夹中，创建一个文件（例如 raw.php）并仅在该文件中放置：

```
<jdoc:include type="component" /> 
```

然后，您可以使用**/index.php?option=com_downloadform&tmpl=raw**访问组件的原始输出。链接中的 tmpl 参数必须是不带扩展名的文件名。

# java - Hadoop map reduce 总是写入相同的值

> ID：10978068
> 
> 赞同：3
> 
> 时间：2012-06-11T10:06:50.513
> 
> 标签：java, hadoop, mapreduce

我正在尝试运行一个简单的 map reduce 程序，其中 mapper 为同一个键写入两个不同的值，但是当我到达 reducer 时，它们最终总是相同的。

这是我的代码：

```
public class kaka {

public static class Mapper4 extends Mapper<Text, Text, Text, Text>{
    public void map(Text key, Text value, Context context) throws IOException, InterruptedException {
        context.write(new Text("a"),new Text("b"));
        context.write(new Text("a"),new Text("c"));
    }
}

public static class Reducer4 extends Reducer<Text,Text,Text,Text> {
    public void reduce(Text key, Iterable<Text> values, Context context) throws IOException, InterruptedException {
        Vector<Text> vals = new Vector<Text>(); 
        for (Text val : values){
            vals.add(val);
        }

        return;
    }
}
public static void main(String[] args) throws Exception {
    //deleteDir(new File("eran"));//todo
    Configuration conf = new Configuration();
    conf.set("mapred.map.tasks","10"); // asking for more mappers (it's a recommendation)
    conf.set("mapred.max.split.size","1000000"); // set default size of input split. 1000 means 1000 bytes. 

    Job job1 = new Job(conf, "find most similar words");
    job1.setJarByClass(kaka.class);
    job1.setInputFormatClass(SequenceFileInputFormat.class);
    job1.setMapperClass(Mapper4.class);
    job1.setReducerClass(Reducer4.class);
    job1.setOutputFormatClass(SequenceFileOutputFormat.class);
    job1.setOutputKeyClass(Text.class);
    job1.setOutputValueClass(Text.class);
    FileInputFormat.addInputPath(job1, new Path("vectors/part-r-00000"));
    FileOutputFormat.setOutputPath(job1, new Path("result"));
    job1.waitForCompletion(true);
    System.exit(job1.waitForCompletion(true) ? 0 : 1);
}

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T10:20:34.433

在迭代减速器中的值时，您被 objext 重用所吸引。很久以前有一个 JIRA 补丁来提高效率，这意味着传递给 mapper 的 Key / Value 对象和传递给 reducer 的 Key / Value 对象始终是相同的底层对象引用，只是那些对象的内容每次迭代都会改变。

在添加到向量之前修改您的代码以复制该值：

```
public static class Reducer4 extends Reducer<Text,Text,Text,Text> {
    public void reduce(Text key, Iterable<Text> values, Context context) throws IOException, InterruptedException {
        Vector<Text> vals = new Vector<Text>(); 
        for (Text val : values){
            // make copy of val before adding to the Vector
            vals.add(new Text(val));
        }

        return;
    }
} 
```

# jquery - 我如何向这个 jQuery 插件模式添加方法？

> ID：10978070
> 
> 赞同：5
> 
> 时间：2012-06-11T10:06:54.273
> 
> 标签：jquery, plugins

我正在使用以下代码作为我正在为一个项目开发的插件的基础 - 它来自 Smashing Magazine 上的一篇文章，位于此处，标题为“轻量级开始”：

[http://coding.smashingmagazine.com/2011/10/11/essential-jquery-plugin-patterns/](http://coding.smashingmagazine.com/2011/10/11/essential-jquery-plugin-patterns/)

到目前为止，它对我的​​目的一直运行良好，但本文的其余部分偏离了主题，并讨论了我认为我需要 jQuery UI 库的 jQuery UI 小部件，但我真的不想使用这些小部件。

```
/*!
 * jQuery lightweight plugin boilerplate
 * Original author: @ajpiano
 * Further changes, comments: @addyosmani
 * Licensed under the MIT license
 */

// the semi-colon before the function invocation is a safety
// net against concatenated scripts and/or other plugins
// that are not closed properly.
;(function ( $, window, document, undefined ) {

    // undefined is used here as the undefined global
    // variable in ECMAScript 3 and is mutable (i.e. it can
    // be changed by someone else). undefined isn't really
    // being passed in so we can ensure that its value is
    // truly undefined. In ES5, undefined can no longer be
    // modified.

    // window and document are passed through as local
    // variables rather than as globals, because this (slightly)
    // quickens the resolution process and can be more
    // efficiently minified (especially when both are
    // regularly referenced in your plugin).

    // Create the defaults once
    var pluginName = 'defaultPluginName',
        defaults = {
            propertyName: "value"
        };

    // The actual plugin constructor
    function Plugin( element, options ) {
        this.element = element;

        // jQuery has an extend method that merges the
        // contents of two or more objects, storing the
        // result in the first object. The first object
        // is generally empty because we don't want to alter
        // the default options for future instances of the plugin
        this.options = $.extend( {}, defaults, options) ;

        this._defaults = defaults;
        this._name = pluginName;

        this.init();
    }

    Plugin.prototype.init = function () {
        // Place initialization logic here
        // You already have access to the DOM element and
        // the options via the instance, e.g. this.element
        // and this.options
    };

    // A really lightweight plugin wrapper around the constructor,
    // preventing against multiple instantiations
    $.fn[pluginName] = function ( options ) {
        return this.each(function () {
            if (!$.data(this, 'plugin_' + pluginName)) {
                $.data(this, 'plugin_' + pluginName,
                new Plugin( this, options ));
            }
        });
    }

})( jQuery, window, document ); 
```

我现在需要为此添加一个方法，但我对如何做到这一点一无所知。

该方法需要以这样一种方式工作，即插件在页面上创建的实例可以通过控制台调用具有值的方法动态更改属性（最终这将通过其他进程发生，但控制台是现在很好）。

我将如何修改上面的代码以允许这样做？还是我在叫错树？

任何帮助将不胜感激，复杂的 JavaScript 有时会让我在黑暗中迷失方向，但我喜欢尽可能地尝试“最佳实践”。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-11T10:34:08.140

jQuery 文档强烈建议通过将字符串传递给主插件方法来调用插件方法。这是为了防止`$.fn`命名空间被插件的方法弄得杂乱无章。所以你做这样的事情：

```
$.fn.yourPlugin = function(options) {
    if (typeof options === "string") {
        //Call method referred to by 'options'
    } else {
        //Setup plugin as usual
    }
}; 
```

在您的模式中，您已经有一个完美的地方来定义您的方法：`Plugin.prototype`. 例如，要添加一个`changeColor`方法：

```
Plugin.prototype.changeColor = function(color) {
    $(this.element).css("color", color);
} 
```

注意使用`$(this.element)`. 这是因为在`Plugin`构造函数`element`中定义了一个属性，并且将应用插件的元素分配给它：

```
this.element = element; 
```

那是实际的 DOM 元素，而不是 jQuery 对象，因此需要在其上调用 jQuery。

所以现在你有了一个方法，你需要添加一个机制来调用它。遵循 jQuery 文档的建议：

```
$.fn[pluginName] = function ( options ) {
    return this.each(function () {
        if (typeof options === "string") {
            var args = Array.prototype.slice.call(arguments, 1),
                plugin = $.data(this, 'plugin_' + pluginName);
            plugin[options].apply(plugin, args);
        } else if (!$.data(this, 'plugin_' + pluginName)) {
            $.data(this, 'plugin_' + pluginName,
            new Plugin( this, options ));
        }
    });
}; 
```

然后，您可以`changeColor`像这样调用该方法：

```
$("#example").defaultPluginName("changeColour", "red");​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

这是[一个工作示例的小提琴](http://jsfiddle.net/yucCG/)。您可能需要围绕方法调用代码添加一些检查，以确保插件实际上已在您调用它的元素上实例化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:10:25.843

利用

```
Plugin.prototype.reset = function () {

};
Plugin.prototype.destroy = function () {

}; 
```

等等。添加任意数量的选项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T10:12:24.937

最好从源头开始，而不是从您难以理解的样板开始：

[http://docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)

# mysql - 插入的动态sql不起作用

> ID：10978071
> 
> 赞同：-7
> 
> 时间：2012-06-11T10:06:56.360
> 
> 标签：mysql, database

```
CREATE PROCEDURE P1 (
    IN input TEXT
    , IN `delimiter` VARCHAR(10)
    , IN `column1` VARCHAR(10)
    , IN `value1` VARCHAR(10)
    )
BEGIN

    SET @a = column1;
    SET @b = value1;

    select @a,@b;

    SET @c = CONCAT('INSERT INTO SplitValues2(',@a,') VALUES (',@b,')');

    select @c;
    PREPARE stmt FROM @c;

    select stmt;
    EXECUTE stmt;

 END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:21:23.557

您正在将未引用的字符串连接到准备好的语句中。假设一个调用`P1`如下：

```
CALL P1('qux', 'foo', 'bar'); 
```

然后`@c`将包含以下字符串：

```
INSERT INTO SplitValues2(foo) VALUES (bar) 
```

这可能不是您想要的，因为它引用了一个名为的列`foo`和一些名为`bar`. 您可以考虑使用 MySQL 的[`QUOTE()`](http://dev.mysql.com/doc/en/string-functions.html#function_quote)函数来正确引用字符串值：

```
SET @c = CONCAT('INSERT INTO SplitValues2(',@a,') VALUES (',QUOTE(@b),')'); 
```

或者更好的是参数化您准备好的语句中的变量，以便在执行时传递它们：

```
SET @c = CONCAT('INSERT INTO SplitValues2(',@a,') VALUES (?)');
PREPARE stmt FROM @c;
EXECUTE stmt USING @b; 
```

请注意，既不能参数化 SQL 标识符（例如列名），也不能使用[`QUOTE()`](http://dev.mysql.com/doc/en/string-functions.html#function_quote). 因此，为了避免 SQL 注入攻击，应该手动引用和转义：

```
SET @c = CONCAT('INSERT INTO SplitValues2(`',REPLACE(@a,'`','``'),'` VALUES (?)'); 
```

# ios - 在没有池的情况下自动释放 - 没有启动新线程

> ID：10978072
> 
> 赞同：0
> 
> 时间：2012-06-11T10:07:02.617
> 
> 标签：ios, ios5, memory-leaks, static, nsautoreleasepool

> objc [23601]：__NSCFSet 类的对象 0x12b090f0 自动释放，没有适当的池 - 只是泄漏 - 在 objc_autoreleaseNoPool() 上中断以进行调试

为什么下面的代码部分会打印上面的泄漏错误？

```
+ (BOOL)getSkipFlag
{

    NSUserDefaults* defs = [NSUserDefaults standardUserDefaults];
    if ( ![defs objectForKey:_BOOK_ID] )
    {
        [defs setObject:@"yyyy" forKey:_BOOK_ID];

        [defs synchronize];
    }

    if ( ![[defs objectForKey:_BOOK_ID] isEqualToString:@"xxxx"] )
    {
        return NO;
    }

    return skipFlag;
} 
```

用法

```
if ( ![ClassXYZ getSkipFlag] )
.... 
```

我不使用新线程，所以我不应该设置新的自动释放池。

注意：`NSString *temp = [[NSBundle mainBundle] pathForResource:_CONFIG_PLIST ofType:@"plist"];`- 会打印与我使用 iOS 5.1 相同的错误

感谢您的任何见解。

更新：ClassXYZ.m ...静态布尔skipFlag = NO;

设置器：+ (void)setSkipFlag:(BOOL)boolValue { skipFlag = boolValue; }

用法：[ClassXYZ setSkipFlag:YES];

用于静态 void convert_uri_to_file_name(struct mg_connection *conn, const char *uri, char *buf, size_t buf_len)

奥马尔你对它的使用地点有一个很好的看法。事实证明，例如，如果我使用 ClassXYZ 自己的实例方法，它就可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:21:44.927

通常，主线程的自动释放池将在`main`函数的第一行创建。在函数之前运行的任何东西`main`都会看到自动释放池不存在。

`+load`函数是导致泄漏的原因之一，因为它在函数之前`main`运行。如果是这种情况，请考虑`+initialize`改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T06:51:31.727

只是出于好奇，如果您将函数调用放在`@autorelease`该日志中应该消失

# c# - 从 wpf 中的单独文件加载控件样式

> ID：10978079
> 
> 赞同：19
> 
> 时间：2012-06-11T10:07:31.307
> 
> 标签：c#, .net, wpf

我的 Windows.Resources 添加了以下样式

```
<Window.Resources>
...
<!--A Style that extends the previous TextBlock Style-->
<!--This is a "named style" with an x:Key of TitleText-->
<Style BasedOn="{StaticResource {x:Type TextBlock}}"
   TargetType="TextBlock"
   x:Key="TitleText">
<Setter Property="FontSize" Value="26"/>
<Setter Property="Foreground">
 <Setter.Value>
  <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
    <LinearGradientBrush.GradientStops>
      <GradientStop Offset="0.0" Color="#90DDDD" />
      <GradientStop Offset="1.0" Color="#5BFFFF" />
    </LinearGradientBrush.GradientStops>
  </LinearGradientBrush>
  </Setter.Value>
</Setter>
</Style> 
...
</Window.Resources> 
```

我的 xaml 代码中有很多这样的样式，我想将每个组件样式保存到一个额外的文件（不是外部文件）中。例如，与 TextBlocks 相关的所有样式都应该在一个名为`TextBlockStyles.xaml`

我将如何在 wpf 中执行此操作？

如何在我的项目中链接样式？

提前致谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-11T10:16:26.343

您使用合并的资源字典

在你 app.xaml 你会使用

```
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary 
                Source="/Your.Assembly.Name;component/TextBlockStyles.xaml"/>
            ... other dictionaries here
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

或直接进入 UserControl 将是

```
<UserControl.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary 
                Source="/Your.Assembly.Name;component/TextBlockStyles.xaml"/>
            ... other dictionaries here
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</UserControl.Resources> 
```

如果文件位于同一程序集和项目的根目录中，或者将资源字典放入文件夹中，则可以缩短`Source="..."`为。`Source="TextBlockStyles.xaml"``Source="Styles\TextBlockStyles.xaml"``Styles`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-05-23T17:25:39.017

`MyView.xaml`用例：您有一个使用按钮调用的用户控件。您想使用外部 XAML 文件设置按钮样式。

* * *

在`MyView.xaml`：

```
<User Control ...namespaces...>
    <UserControl.Resources>
        <ResourceDictionary>
            ...converters...

            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="MyButton.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>

     ...the rest of the control...
</UserControl> 
```

在`MyButton.xaml`：

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:MSDNSample">

    <Style x:Key="FooButton" TargetType="{x:Type Button}">
        <Setter Property="Background" Value="Pink" />
    </Style>
</ResourceDictionary> 
```

回到`MyView.xaml`（“控件的其余部分”）：

```
<Button Style="{StaticResource FooButton}">
    Hello World
</Button> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-07-26T11:47:37.297

在**解决方案资源管理器**中右键单击您的**项目**选择**添加**然后单击**资源字典...** 选择名称并添加到您的项目。打开**App.xaml在****应用程序**标记 中添加此代码

```
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="YourStyle.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

在 YourStyle.xaml 中：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:local="clr-namespace:APPNAME">
    <Style x:Key="ButtonStyle" TargetType="{x:Type Button}">
        <Setter Property="Background" Value="Pink" />
    </Style>
</ResourceDictionary> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T12:12:06.477

您正在寻找动态资源。最好的方法是在资源中加载和标记字典。应用程序或在控制页面上。这是一个很好的示例。

[http://blogs.msdn.com/b/wpfsdk/archive/2007/06/08/defining-and-using-shared-resources-in-a-custom-control-library.aspx](http://blogs.msdn.com/b/wpfsdk/archive/2007/06/08/defining-and-using-shared-resources-in-a-custom-control-library.aspx)

```
<ResourceDictionary>

  <ResourceDictionary.MergedDictionaries>

    <ResourceDictionary Source="Dictionary1.xaml"/>

  </ResourceDictionary.MergedDictionaries>

</ResourceDictionary> 
```

this.Resources.MergedDictionaries.Add(Smyresourcedictionary);

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-17T18:03:32.763

简单地，转到`MaindWindow.xaml`您想要包含外部文件中的资源的窗口（例如：），并使用[MergedDictionaries](https://docs.microsoft.com/en-us/dotnet/framework/wpf/advanced/merged-resource-dictionaries)原则来引用该文件：

```
<Window x:Class="UseMergedResource.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="MainWindow"
        Height="600"
        Width="600">
  <Window.Resources>

    <!-- DECLARING MERGED DICTIONARY --> 
    <ResourceDictionary>
      <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source='Merged/BrushResources.xaml' />
      </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
    <!----------------------------------> 

  </Window.Resources>

  <StackPanel>
    <Rectangle Width='200'
               Height='100'
               Fill='{StaticResource PrimaryBrush}' /> <!-- USAGE HERE -->
  </StackPanel>
</Window> 
```

> 从上面`Merged/BrushResources.xaml`是资源文件的位置，它位于名为`Merged`.

现在，如果您想知道外部文件中的声明语法应该是什么，请检查：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                                        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <!-- Location for application brushes -->
    <SolidColorBrush x:Key='BorderBrush'
                                     Color='Orange' />
    <SolidColorBrush x:Key='HighLightBrush'
                                     Color='LightBlue' />
    <SolidColorBrush x:Key='PrimaryBrush'
                                     Color='Pink' />
    <SolidColorBrush x:Key='AccentBrush'
                                     Color='Yellow' />

</ResourceDictionary> 
```

> 如果您想通过所有应用程序（在所有窗口中可见）使资源可用，请在`App.xaml`资源部分中声明。

# android - 在 android 应用程序中处理 AsynTask 的结果

> ID：10978089
> 
> 赞同：1
> 
> 时间：2012-06-11T10:08:10.200
> 
> 标签：android, android-asynctask

我有一个安卓应用程序。

我需要在单独的任务上执行代码，因为它对我来说是 android.os.NetworkOnMainThreadException 。

**这是我的代码：**

```
 public class AccesoCuentaActivity extends Activity{
   public void validacion(View v) throws IOException, XmlPullParserException
{
    try {
    String usuario=((EditText)findViewById(R.id.etUsu)).getText().toString();
    String pass=((EditText)findViewById(R.id.etPass)).getText().toString();
    String[] pars = new String[2];

             String[] = new String[2];
             pars[0] = usuario;
    pars[1] = pass;
            new ValidacionThread().execute(pars);
             Intent intent=new Intent(this, MainActivity.class);
    intent.putExtra("idBoton",12);
    intent.putExtra("usuario",usu);
    startActivityForResult(intent, 0);          

} } 
```

**任务：**

```
public class ValidacionThread extends AsyncTask<String, Void, Usuario> {

    private final String NAMESPACE = "http://webservices.pcp/";
    private final String URL = "http://127.0.0.1:8080/webServices/pcpWS?wsdl";
    private final String SOAPACTION = "";
    private final String METHOD = "ValidarUsuario";

    protected Usuario doInBackground(String[] pars) {

               String user = pars[0];
               String password = pars[1];
                SoapObject request = new SoapObject(NAMESPACE, METHOD); 
                SoapSerializationEnvelope sobre = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                sobre.dotNet = false;       
                request.addProperty("login", user);        
                request.addProperty("password", password); 
                sobre.setOutputSoapObject(request); 

                HttpTransportSE transporte = new HttpTransportSE(URL);        
                try {
                    transporte.call(SOAPACTION, sobre);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (XmlPullParserException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                SoapObject resultado = null;
                try {
                    resultado = (SoapObject)sobre.getResponse();
                } catch (SoapFault e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                Usuario usu = new Usuario();
                usu.IdUsuario= resultado.getProperty(0).toString();
                usu.Nombre = resultado.getProperty(1).toString();
                usu.Apellidos = resultado.getProperty(2).toString();
                usu.Rol = resultado.getProperty(3).toString();   
                usu.Centro=resultado.getProperty(4).toString();
                return usu;     

}
       protected void  onPostExecute(ValidacionThread vt) {

        }
} 
```

它给了我两个问题：

1) 在 AccesoCuentaActivity 类中：

我想将变量“usuario”返回保存在**ValidationThread.doInBackground()**中。但是我该怎么做呢？

事实上，如果我只是写： new **ValidacionThread().execute(pars);** 它告诉我变量 "usu" (intent.putExtra("usuario",usu);) 尚未初始化

while with code (in main code) **Usuario usu = new ValidacionThread().execute(pars);** 它说**类型不匹配**

2）`doInBackground()`在线eclipse给出**警告**：可变参数方法应该只覆盖或被其他可变参数方法覆盖，不像`ValidacionThread.doInBackground(String[])`和`AsyncTask<String,Void,Usuario>.doInBackground(String...)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:34:59.780

由于这是异步任务，您需要为该数据创建返回方式。我建议创建一个界面，如：

`interface{ public void parseData(Usuario data); }`

并在您的活动类中实现它。

然后，我会将活动实例传递给构造函数中的该异步任务。

然后在您的 ValidationThread 中：

`protected void onPostExecute(Usuario vt) { activityInstance.parseData(vt); }`

至于第二部分，将 String[] 更改为 String..

# objective-c - Objective-C 通用 getter 方法

> ID：10978093
> 
> 赞同：1
> 
> 时间：2012-06-11T10:08:18.523
> 
> 标签：objective-c, getter-setter

当我像下面这样声明我的属性时，我需要使用 getter 属性覆盖多个属性的 getter 方法。我希望我所有属性的 getter 与获取这三个属性的代码的方法相同。

```
@property (nonatomic,strong, getter=getObject) (NSString*) obj1;
@property (nonatomic,strong, getter=getObject) (NSString*) obj2;
@property (nonatomic,strong, getter=getObject) (NSString*) obj3; 
```

虽然，我需要在我的 getObject 方法中知道当前正在询问哪个属性。是否有可能在 getObject 方法的实现中知道当前正在询问哪个对象？我希望下面的 %@ 代码返回 obj1、obj2 或 obj3。

```
-(NSString*) getObject{ 

   NSLog(@"the property requested is: %@", ?????)

} 
```

关于如何做到这一点的任何想法？

非常感谢！雷诺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:11:40.587

这是不可能的。

当您定义您的`getter`方法时，编译器会将请求转换`myObject.obj3`为简单`[myObject getObject]`的 . 此时，您已经丢失了有关调用哪个属性的信息。

您应该为每个属性定义一个不同的 getter，任何共享或重复的代码都可以进入一个私有方法，例如`getObject:`：

```
- (NSString *)getObject:(NSString *)propertyName {
    // ...
}

- (NSString *)obj1 {
    return [self getObject:@"obj1"];
}

- (NSString *)obj2 {
    return [self getObject:@"obj2"];
}

// ... 
```

# windows-phone-7 - WP7 电话联系人图片 Uri

> ID：10978094
> 
> 赞同：0
> 
> 时间：2012-06-11T10:08:27.900
> 
> 标签：windows-phone-7, isolatedstorage

我正在开发一个 windows phone 7 应用程序，我需要在 ListBox 中显示联系人图像，并在另一个 UI 页面上显示用户所选图像的图像控件和显示列表，并将其维护在独立存储中以稍后显示相同的列表，我知道它无法将图像直接保存到 IsolatedStorage 中，因此我想将 Image Uri 作为字符串存储在 IsolatedStorage 中，并在以后需要显示它们时引用这些图像。

# javascript - jqgrid reloadGrid 事件监听器

> ID：10978095
> 
> 赞同：1
> 
> 时间：2012-06-11T10:08:29.423
> 
> 标签：javascript, json, jqgrid

我正在使用 jqgrid，我正在触发`reloadGrid`一些事件。

我只想处理该`reloadGrid`事件，以便我能够`userData`从重新加载的事件中获取。为此，您可能会建议我使用`loadComplete`，但`loadComplete`在第一次加载网格时被称为事件。但我只想听`reloadGrid`事件。

我尝试了以下但无法实现我想要的。

```
if($('#table').trigger('reloadGrid').length>0)
{
var userData = $('#table').jqgrid('getGridParam', 'userData');
//here the userData is old data not the reloaded one.
} 
```

任何人都可以建议我解决任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:11:07.797

为什么不这样做：

```
// to trigger the event
$('#table').trigger('reloadGrid');  

// to listen to the event
$('#table').on('reloadGrid', function() {
   var userData = $('#table').jqgrid('getGridParam', 'userData');
   //here the userData is old data not the reloaded one.
}) 
```

您使用触发事件并使用... [docs for](http://api.jquery.com/on/) [here](http://api.jquery.com/on/)`.trigger()`收听事件`.on()`[`.on()`](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:17:41.373

我已经解决了这个问题。

有一个全局变量为

```
var loadedonce = false; 
```

在`loadComplete`监听器中完成了以下操作。

```
loadComplete: function(data){
if(!loadedonce){
//some manupulations
loadedonce = true;
}
else{
var userData = $('#table').jqgrid('getGridParam', 'userData');
//this userData has the latest data i needed
}
} 
```

如果有人有更好的解决方法，请分享...

# c# - Regex.Match 无法正常工作

> ID：10978096
> 
> 赞同：0
> 
> 时间：2012-06-11T10:08:36.810
> 
> 标签：c#, regex, .net-4.0

我有一个完全像这样定义的字符串扩展：

```
public static string GetStringBetween(this string value, string start, string end)
{
    start = Regex.Escape(start);
    end = Regex.Escape(end);

    GroupCollection matches = Regex.Match(value, start + @"([^)]*)" + end).Groups;

    return matches[1].Value;
} 
```

但是当我这样称呼时：

```
string str = "The pre-inspection image A. Valderama (1).jpg of client Valderama is not...";
Console.WriteLine(str.GetStringBetween("pre-inspection image ", " of client")); 
```

它不写任何东西。但是当str值是这样的时候：

```
string str = "The pre-inspection image A. Valderama.jpg of client Valderama is not..."; 
```

它工作正常。为什么会这样？

我的代码是 C#，框架 4，在 VS2010 Pro 中构建。

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:11:26.543

因为您指定排除`)`正则表达式捕获组中`[^)]`的字符：`@"([^)]*)"`

并且由于`)`出现在第一个字符串:`Valderama (1).jpg`中，它将无法匹配。

你可能想要`@"(.*)"`。

# html - 用 Java 中的 HTML 实体替换字符

> ID：10978098
> 
> 赞同：5
> 
> 时间：2012-06-11T10:08:47.280
> 
> 标签：html, jakarta-ee, escaping, html-entities

我想在过滤器内的 HTML 响应中用它们各自的 HTML 实体替换某些字符。字符包括`<`, `>`, `&`. 我不能使用`replaceAll()`它，因为它会替换所有字符，即使是那些属于 HTML 标记的字符。

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-11T10:21:15.327

在 Java 中，您可以尝试 Apache Commons Lang (legacy v2) [`StringEscapeUtils.escapeHtml()`](https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringEscapeUtils.html#escapeHtml(java.lang.String))。或使用 commons-lang3: [`StringEscapeUtils.escapeHtml4()`](https://commons.apache.org/proper/commons-lang/javadocs/api-3.4/org/apache/commons/lang3/StringEscapeUtils.html#escapeHtml4(java.lang.String))。

^(请注意，这也会转换`à`为`&agrave;`& 这样的。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T10:11:06.060

如果您正在使用诸如 JSTL 之类的技术，您可以简单地打印出使用的值`<c:out value="${myObject.property}"/>`，它将自动转义。

该属性`escapeXml`是`true`默认的。

> `escapeXml`- 确定`<,>,&,',"`结果字符串中的字符是否应转换为其对应的字符实体代码。默认值为`true`。

[http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-17T21:15:23.457

在 Spring 生态系统中开发时，可以使用`HtmlUtils.htmlEscape()`方法。

如需完整的 apidocs，请访问[https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/util/HtmlUtils.html](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/util/HtmlUtils.html)

# javascript - Wordpress - jQuery UI 无法加载

> ID：10978100
> 
> 赞同：0
> 
> 时间：2012-06-11T10:08:48.900
> 
> 标签：javascript, jquery, html, wordpress, jquery-ui

我正在构建一个 WordPress 主题，它将很快需要 jQuery UI（只是核心和效果，不包括 CSS）（http://hildasjcr.org.uk）。我正在使用我自己构建的 jQuery 和 jQuery UI，因为我需要使用 jQuery Effects 并且我喜欢“$”符号。我已将脚本包含在 functions.php 中，如下所示：

```
function my_scripts_method() {
    wp_deregister_script( 'jquery' );
    wp_register_script( 'jquery', get_template_directory_uri() . "/js/jquery-1.7.2.min.js");
    wp_enqueue_script( 'jquery' );
    wp_deregister_script( 'jqueryui' );
    wp_register_script( 'jqueryui', get_template_directory_uri() . "/js/jquery-ui-1.8.21.custom.min.js");
    wp_enqueue_script( 'jqueryui' );
    wp_register_script( 'footer', get_template_directory_uri() . "/js/footer.js");
    wp_enqueue_script( 'footer' );
}

add_action('wp_enqueue_scripts', 'my_scripts_method'); 
```

它给出了以下 HTML 代码（剥离到相关位）：

```
<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
    <meta charset="UTF-8" />
    <title>Current Students</title>
    <link rel="stylesheet" type="text/css" media="all" href="http://hildasjcr.org.uk/wp-content/themes/hildas/style.css" />
    <script type='text/javascript' src='http://hildasjcr.org.uk/wp-content/themes/hildas/js/jquery-1.7.2.min.js?ver=3.3.2'></script>
    <script type='text/javascript' src='http://hildasjcr.org.uk/wp-content/themes/hildas/js/jquery-ui-1.8.21.custom.min.js?ver=3.3.2'></script>
    <script type='text/javascript' src='http://hildasjcr.org.uk/wp-content/themes/hildas/js/footer.js?ver=3.3.2'></script>
</head> 
```

不幸的是，jQuery UI 似乎已加载但无法使用 - jQuery 运行良好，但 jQuery UI 函数均未定义。

我什至可以在 Chrome 的开发人员工具面板中看到 jQuery UI，并阅读其中的代码。

那么，出了什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:41:03.533

问题在于 HTML5 Boilerplate，它是页面的基础。jQuery 被第二次包含在页脚中，并且 jQuery 的两个实例彼此不喜欢。

# javascript - 确定使用 JavaScript（或 jQuery）点击了地图 (imageMap) 中的哪个区域

> ID：10978103
> 
> 赞同：10
> 
> 时间：2012-06-11T10:08:58.570
> 
> 标签：javascript, jquery, html

我正在为一个客户端编写一个模型（使用 HTML、JS/jQuery）和 CSS，其中涉及一个应用了 Map 的单个图像（界面的）。由于某些原因，我不会解释单击某个区域时执行的包含动画的动作，然后更改图像`src`（因此它看起来像是在界面之间移动），然后我将不同的图像映射应用于图像（也许我应该说`<img>`标签）

客户要求这个，我知道这看起来很疯狂，但我没有任何模型工具来执行动画等...

我注意到了一种模式，我可以重构我的代码，以便更容易扩展和维护。但是我想知道，假设我有以下 HTML：

```
<img src="claas_ipad3.jpg" USEMAP="#claas_ipad3" width="1130" height="871" alt="" border="0" id="mainPage">
    <map name="claas_ipad3">
      <area shape="rect" coords="181,249,255,341" href=""  alt="" id="Contacts">
      <area shape="rect" coords="345,251,454,341" href=""  alt="" id="Appointments">
      <area shape="rect" coords="533,256,576,311" href=""  alt="" id="Maps">
      <area shape="rect" coords="686,255,785,344" href=""  alt="" id="Tasks">
      <area shape="rect" coords="835,246,973,348" href=""  alt="" id="Products">
      <area shape="rect" coords="176,412,278,513" href=""  alt="" id="Reports">
      <area shape="rect" coords="330,411,457,513" href=""  alt="" id="PriceTable">
      <area shape="rect" coords="502,399,637,518" href=""  alt="" id="SalesCycle">
      <area shape="rect" coords="677,398,808,519" href=""  alt="" id="MetaData">
      <area shape="rect" coords="844,408,970,510" href=""  alt="" id="Settings">
      <area shape="rect" coords="173,545,283,662" href=""  alt="" id="Vids">
      <area shape="rect" coords="328,558,461,652" href=""  alt="" id="Web">
      <area shape="rect" coords="491,559,626,666" href=""  alt="" id="Files">
    </map> 
```

如果单击了某个区域，我是否可以确定使用 JavaScript 或 jQuery？然后我可以识别 ID 并执行正确的操作。我目前拥有的是很多不同的条件，比如......

```
 $("#Contacts").click(function(event){
            event.preventDefault();

            // okay lets show the contacts interface
            $("#mainPage").fadeOut(300, function(){
                $(this).attr('src','claas_ipad3_1.jpg').bind('onreadystatechange load', function(){
                    if (this.complete){
                        $(this).fadeIn(300);
                        $(this).attr('USEMAP','#claas_ipad_1');
                    }
                    });
                });
            }); 
```

但是，如果我知道单击了哪个区域（通过确定 id），我可以将数组值应用到通用函数中，而不是专门绑定到地图区域。

我在想我可以确定被点击的 id 是这样的：

```
$(this).live('click', function () {
    alert($(this).attr('id')); 
}); 
```

但是这会影响我的整个页面，这不是问题，但我知道它不会起作用。

对不起，如果我没有很好地解释自己或者我的措辞很差。如果需要，我可以扩展或改写。

谢谢

**更新**

我已经解决了这个问题，如果我将 ID 应用到 Map 使用以下将返回 ID

```
 $("#Map1 area").click( function () {
        alert($(this).attr('id')); // this
    }); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T10:16:03.567

有不同的方法。我想最简单的是这个：

```
$("map[name=claas_ipad3] area").live('click', function () {
    alert($(this).attr('id')); 
}); 
```

请注意，从 jQuery 1.7 开始，不推荐使用 .live() 方法，您应该使用 .on() 附加事件处理程序：

```
$("map[name=claas_ipad3] area").on('click', function () {
    alert($(this).attr('id')); 
}); 
```

# random - Windows 批处理文件 - 在一个文件夹中选择（最多）四个随机文件

> ID：10978107
> 
> 赞同：1
> 
> 时间：2012-06-11T10:09:19.290
> 
> 标签：random, batch-file, for-loop, variable-expansion, delayedvariableexpansion

正如标题所说，我正在尝试从一个文件夹中选择最多四个随机文件（壁纸），以进行进一步处理。该文件夹不包含子文件夹，只有 *.jpg's、*.bmp's 和 *.png's（它*可能*包含 Thumbs.db 文件，但我已经处理好了）。

我读了所有用`for`循环的文件，制作类似于数组的文件，然后*我想*运行另一个`for`循环以制作将作为选择文件的索引的随机数。

```
setlocal enabledelayedexpansion
set "wps=1 2 3 4"
set /a ind = 0

for /f "tokens=* delims=" %%g in ('dir C:\Wallpapers /a:-h-s /b /s') do (
    set /a ind += 1
    set "!ind!=%%g"
)

for %%g in (%wps%) do (
    set /a "num = (((!random! & 1) * 1073741824) + (!random! * 32768) + !random!) %% %ind% + 1"
    echo Wallpaper %%g is #!num! - Title: "!!num!!"
) 
```

当然，回显的行只是输出`Wallpaper 1 is #118 - Title: "118"`而不是`Wallpaper 1 is #118 - Title: "C:\Wallpapers\Miami Skyline.jpg"`.

所以我的具体问题是：**如何在`for`循环内双重扩展变量？**

[注#1：创建随机数的行需要很长，因为它提供了良好的随机值分布]
[注#2：我需要`wps`这样存储，因为有时我可能只需要三张壁纸，而不是必须按数字顺序]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:40:57.347

转移！num！FOR 变量的值:-)

```
for %%N in (!num!) do echo Wallpaper %%g is #%%N - Title: "!%%N!" 
```

一些额外的指针：

*   如所写，您的 DIR 命令包括文件夹。您需要添加`/A-D`选项

    `dir C:\Wallpapers /a:-h-s-d /b /s`

*   您的数字变量名称适用于您现有的代码。但是，如果您尝试使用正常扩展来访问它们，您将会遇到麻烦，因为`%1%`它将作为第一个批处理参数而不是环境变量进行扩展。在一般实践中，您应该避免以数字开头的环境变量。你可以使用：

    `set wp!ind!=%%g`
    `...`
    `echo Wallpaper %%g is #!num! - Title: "!wp%%N!`

*   您可以通过在循环底部而不是顶部递增计数器来使数组基于 0。然后你不需要在你的随机数上加一。（这个提示是微不足道的。更多的是风格问题。）

*   你不需要两者`"tokens=*"`和`"delims="`。我推荐后者。`"delims="`将保留整个字符串。在去除前导空格和制表符*后将*`tokens=*`保留整个字符串。文件名可以以空格开头。

**   如果任何文件名包含`!`字符，您的代码将失败。`%%g`由于延迟扩展，感叹号将在扩展期间损坏。通过切换延迟扩展和使用 FOR 变量来跨 ENDLOCAL 屏障传输值，这很容易解决。* 

 *这是包含所有建议的代码

```
@echo off
setlocal disableDelayedExpansion
set "wps=1 2 3 4"
set /a ind = 0

for /f "tokens=* delims=" %%g in ('dir C:\Wallpapers /a:-h-s-d /b /s') do (
  setlocal enableDelayedExpansion
  for %%N in (!ind!) do (
    endlocal
    set "wp%%N=%%g"
  )
  set /a ind += 1
)

setlocal enableDelayedExpansion
for %%g in (%wps%) do (
  set /a "num = (((!random! & 1) * 1073741824) + (!random! * 32768) + !random!) %% %ind%"
  for %%N in (!num!) do echo Wallpaper %%g is #%%N - Title: "!wp%%N!"
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:57:24.387

您可以使用另一个 FOR 像 dbenham 建议的那样，或者您可以使用`CALL`

```
call echo Wallpaper %%g is #!num! - Title: "%%!num!%%" 
```

A`CALL`第二次扩展一行，但只有百分比扩展，既不延迟也不 FOR 循环扩展在该行的第二次重新解析中起作用。

**编辑：**这仅适用于 num 的内容不以数字开头的情况。

但是您可以使用`cmd /c`第二次扩展，然后它也适用于数字名称。

```
cmd /c echo Wallpaper %%g is #!num! - Title: "%%!num!%%" 
```*

# javascript - jquery - 自动完成网址

> ID：10978117
> 
> 赞同：1
> 
> 时间：2012-06-11T10:09:56.767
> 
> 标签：javascript, jquery, jquery-ui, jquery-autocomplete

我在我的 Web 应用程序中使用 jQuery 自动完成功能。我遵循了这个[http://jqueryui.com/demos/autocomplete/#remote-jsonp](http://jqueryui.com/demos/autocomplete/#remote-jsonp)当它发送建议请求时，它发送到不同的 url 而不是我在`$.ajax()`url中给出的那个

这是jQuery代码：

```
$("#add-keywords").autocomplete({
    source: function( request, response ) {
        var q = $("#add-keywords").val();
        $.ajax({
            url: "keywords_suggestions/",
            dataType: "json",
            data: {
                  query: q
            }
            });
        },
        minLength: 2,
        select: function( event, ui ) {
            log( ui.item ?
                "Selected: " + ui.item.label :
                "Nothing selected, input was " + this.value);
        }
}); 
```

我正在使用 Django 进行服务器端脚本。它实际上必须要请求这个 url`http://127.0.0.1:8000/keywords_suggestions`但它请求这个 url`http://127.0.0.1:8000/information/?query=web`为什么会这样？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T10:16:24.840

要么它不喜欢 URL，要么给定的 URL 不存在无论如何尝试`/`在 url url 之前放置一个：“ `/keywords_suggestions/`”也许这会有所帮助。

否则，如果您的函数无意中触发了同一站点上的不同自动完成功能，请查看它 - 正如您所说的那样，它将转到一个不同的 url，然后指定`->`尝试找出它是什么类型的 url - 以及它如何可能被重定向到那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T06:27:37.467

我遇到了同样的问题，并通过加载最新的 jquery 和 jqueryUI 文件来解决它。

```
<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="http://code.jquery.com/ui/1.10.4/jquery-ui.js"></script> 
```

早些时候，我只使用从某个网站获取的 autocomplete.min.js。可能这就是问题所在

# css - "0" vs "none" 作为 css 属性值

> ID：10978118
> 
> 赞同：14
> 
> 时间：2012-06-11T10:09:59.620
> 
> 标签：css

`0`当我想在 css 中删除某些内容时，我通常将其作为值。例如：

```
border: 0;
background: 0; 
```

`0`和有什么区别`none`吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-11T10:18:15.563

`border`当与和等复合样式一起使用时`background`，这些值将对应于不同的属性。

`border: 0`将设置`border-width: 0`而`border: none`将设置`border-style: none`。

`background: 0`将设置`background-position: 0`而`background: none`将设置`background-image: none`。

所以，有区别。在边框的情况下，差异不会产生任何视觉差异，因为两者都删除了边框，但对于背景，如果您还设置任何其他背景属性，它会产生差异。

# javascript - 将鼠标单击和鼠标悬停事件附加到 Bing 地图图钉不起作用

> ID：10978122
> 
> 赞同：0
> 
> 时间：2012-06-11T10:10:13.057
> 
> 标签：javascript, bing-maps

我在地图上有多个引脚，每个引脚都有两个与之关联的事件（鼠标单击和鼠标悬停）。但只有鼠标悬停在触发而不是点击。下面是我正在使用的代码。

```
//Creating the pushpin
var pin = new Microsoft.Maps.Pushpin(loc);
    pin.Description = "Some address";

    Microsoft.Maps.Events.addHandler(pin, 'mouseover', function(e){
         if (e.targetType == 'pushpin') {
         self.bingInfobox.setLocation(e.target.getLocation());
         self.bingInfobox.setOptions({
             visible: true, title: e.target.Title, description:  e.target.Description });
           }       
    });

    Microsoft.Maps.Events.addHandler(pin, 'click', function(e){
         if (e.targetType == 'pushpin') {

           // some functionality..
         }   
    }); 
```

请建议..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-16T09:15:36.567

4年...可耻的没有人回答。

本质上，鼠标悬停事件正在触发，并且您的信息框正在弹出。*它可能会在*引脚上弹出。

因此，当您单击时，您单击的是信息框而不是图钉本身，因此不会触发图钉点击事件。

根据地图上发生的情况，有多种选项可供选择以解决问题：

确保 pin 层 z-index 高于 infobox 层（当然，信息框最终可能会部分隐藏在层中的其他 pin 后面）。

向信息框选项添加偏移量以将其从引脚上移开。

自定义您的信息框，以便您可以控制它的外观和位置 - 确保点击可以看到图钉。

其他选择我确定。然而，至少，覆盖很可能是问题的根源。

# javascript - 如何获取表格内的所有单选按钮？

> ID：10978123
> 
> 赞同：2
> 
> 时间：2012-06-11T10:10:16.333
> 
> 标签：javascript, radio-button

我在表中有一组单选按钮以及该表中的其他输入，我无法通过 id 或名称或标签名称获取单选按钮，如果可能的话，我想按类型获取它们，因为 id 和名称是由 JSF 自动生成的，我不想改变它。

所以要求是：只获取表格内的所有单选按钮（不是所有输入），以便我可以循环它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T10:28:53.723

我希望只有一组单选按钮。在这种情况下，这样的事情会有所帮助：

```
var inputs = yourForm.elements;
var radioes = [];
for (var i = 0; i < inputs.length; ++i) {
    if (inputs[i].type == 'radio') {
        radioes.push(input[i]);
    }
}​ 
```

如果有不止一组单选按钮，更好的方法是将字典`name`作为键，值作为组中的单选按钮数组。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T10:34:08.377

我知道这个问题没有提到[jQuery](http://jquery.com/)，但我只是想证明它的简单性；请将此视为“嘿，看看 jQuery 多棒”的卖点。

```
// look how pretty I am
var radioButtons = $('table#MyTableId input[type="radio"]'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T10:29:53.123

鉴于您的表单名称是`yourForm`... ( `<form name = "yourForm">`) ... 一个简单的方法就是解析所有表单元素并检查类型，如下所示：

```
var your_namespace = {};
your_namespace.your_function = function() {
    var l = document.yourForm.elements.length;
    for (i=0; i<l; i++) {
        var type = yourForm.elements[i].type;
        if (type=="radio") alert("Form element " + i + " is a radio!");
    }   
} 
```

您可以使用元素 ID 做很多其他事情，而不是提醒您。

使用 MooTools 或 JQuery 等框架时，您可以更轻松地使用这种方式。

# java - 迭代器和 listIterator() 有什么区别？

> ID：10978126
> 
> 赞同：1
> 
> 时间：2012-06-11T10:10:25.157
> 
> 标签：java, list, iterator

> **可能重复：**
> [Iterator 和 Listiterator 之间的区别？](https://stackoverflow.com/questions/10977992/difference-between-iterator-and-listiterator)

最近，在浏览javadocs时，我在List接口中发现了两个方法：**iterator()**和**listIterator()**。除了返回类型不同，这两种方法还有什么不同？下面是这两种方法的 java 文档。

```
// List Iterators
/**
 * Returns a list iterator over the elements in this list (in proper
 * sequence).
 *
 * @return a list iterator over the elements in this list (in proper
 *         sequence)
 */
ListIterator<E> listIterator(); 
```

和

```
/**
 * Returns an iterator over the elements in this list in proper sequence.
 *
 * @return an iterator over the elements in this list in proper sequence
 */
Iterator<E> iterator(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T10:13:08.713

[ListIterator](http://docs.oracle.com/javase/7/docs/api/java/util/ListIterator.html)是一个扩展[Iterator](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html)的子类。

ListIterator允许[双向](http://docs.oracle.com/javase/7/docs/api/java/util/ListIterator.html)遍历，而不仅仅是检查是否有更多元素 ( `hasNext()`) 并获取下一个元素 ( `next()`)。它维护一个光标位置并调用`next()`并将`previous()`更改该位置并返回相关值。 [ListIterator](http://docs.oracle.com/javase/7/docs/api/java/util/ListIterator.html)还允许添加 ( `add(E e)`) 条目，并将条目 ( `set(E e)`) 设置到基础列表（与仅允许删除的 Iterator 不同）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T10:17:55.530

使用 ListIterator，您可以向前和向后遍历列表，而使用 Iterator 只能向前遍历。另一方面，ListIterator 仅用于列表，但 Iterator 用于映射、集合和列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T10:13:45.077

[列表迭代器](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ListIterator.html)：

ListIterator 没有当前元素；它的光标位置总是位于调用previous()返回的元素和调用next()返回的元素之间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T10:14:22.303

[ListIterator](http://docs.oracle.com/javase/6/docs/api/java/util/ListIterator.html)只是普通[Iterator](http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html)的扩展，允许您在任一方向遍历列表，在迭代过程中修改列表，并获取迭代器在列表中的当前位置。

# jquery - 如何检测是否已应用 jQuery .append

> ID：10978134
> 
> 赞同：2
> 
> 时间：2012-06-11T10:10:43.880
> 
> 标签：jquery

我有如下附加代码：

```
if (json.expData[i] != null) {
    $('#text' + i)
    .append("<br><br><img src='/balloon.png'>" + json.expData[i]);
} 
```

当用户单击按钮时，此代码将运行并附加。但是，如果用户再次单击该按钮，它会再次附加，依此类推。

有什么方法可以检测到数据已经被附加，并且只有在第一次添加时才添加？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:14:18.840

您可以在元素上存储一个布尔属性，例如`data-isappended`.

```
if (json.expData[i] != null) {
    var $text = $('#text' + i);
    if (!($text.data("isappended"))){
       $text.append("<br><br><img src='/balloon.png'>" + json.expData[i]);
       $text.data("isappended", true);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:13:12.520

检查里面是否有`img`标签`#text`，应该这样做

```
if ($('#text' + i).find('img').length > 0) 
{
    $('#text' + i).append("<br><br><img src='/balloon.png' />" + json.expData[i]);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T10:32:37.673

如果您没有任何其他`id`包含 contains的元素，`#text`那么您可以这样尝试：

```
if( $('[id^=text]').length ) { // if some element with id text exists 

} else { // not exists

} 
```

# android - sqlite 数据库更新

> ID：10978136
> 
> 赞同：4
> 
> 时间：2012-06-11T10:11:05.180
> 
> 标签：android, sqlite

有没有一种简单的方法可以在 android 中更新 sqlite 中的表？（就像内置方法中的单行）？我有一个包含几列的表，主要是一列。我想按主键搜索，然后更新表中的一行。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-11T10:16:34.280

要使用来自 android 的预定义**更新**方法，请按如下方式使用：

```
ContentValues args = new ContentValues();
args.put("col_name", "new value");

db.update("table_name", args, String.format("%s = ?", "primary_column"),
           new String[]{"primary_id"}); 
```

或者作为单行运行，使用这个（不推荐）：

```
db.execSQL("UPDATE table_name SET col_name='new_value' WHERE
           primary_column='primary_id'"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-11T10:20:18.037

阅读[SQLiteDatabase.update的文档](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#insert%28java.lang.String,%20java.lang.String,%20android.content.ContentValues%29)

你应该得到这样的结果：

`affected = db.update(TABLE_NAME, values, where, whereArgs);`

**UDPATE**

不惜一切代价避免使用容易出错的语法进行原始查询。我在这里看到很多答案使用了很多`'"' + SOMETHING + "'"`......这是非常糟糕的做法，您将花费所有时间在难以找到或完全浪费时间的地方寻找错误。

如果您必须使用原始查询，请尝试使用 String.format 形成它们以避免危险的调试会话和偏头痛。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-11T10:18:16.203

你可以`rawQuery`这样使用：

```
cur = mDb.rawQuery("update " + TABLE_NAME
+ " set column1=mango where id='" + _id + "'",null); 
```

* * *

在哪里

*   `cur`是*`Cursor`*对象
*   `TABLE_NAME`是*`NAME OF THE TABLE`*
*   `_id`是*`name of the column`*（仅示例）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T10:20:02.443

那么你应该已经知道你的主键是什么了。

```
dbHelper.getWritableDatabase();
ContentValues values = createContentValues(profileVo);
db.update(ProfileVO.TABLE_NAME, values, ProfileVO.COLUMN_ID + "=" + profile.getId(), null) 
```

这是一个很好的教程[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T10:18:01.653

答案是：

[http://www.sqlite.org/lang_update.html](http://www.sqlite.org/lang_update.html)

和

[SQLiteDatabase.rawQuery(...)](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#rawQuery%28java.lang.String,%20java.lang.String%5B%5D%29)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-11T10:20:54.360

试试这个：

```
public void updateFunction(int id) {
            String updateStmnt  = "UPDATE  YOUR_TABLE SET YOUR_COLUMN = "
                    + id;
            database.execSQL(updateStmnt);
        } 
```

希望它会有所帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-01T20:27:06.233

使用`database.update`使其变得简单，如下所示：

```
ContentValues values = new ContentValues();
    values.put(MySQLiteHelper.COLUMN_NAME, name);
    values.put(MySQLiteHelper.COLUMN_JOB, job);
    values.put(MySQLiteHelper.COLUMN_DATE_START, date_start);
    database.update(MySQLiteHelper.TABLE_EMPLOYEES, values, MySQLiteHelper.COLUMN_ID+"="+id, null); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-29T19:06:13.990

我知道这有点老了，但万一有人需要另一种方式：

```
public boolean updateNote(Note note) {
    SQLiteDatabase db = notesDbHelper.getWritableDatabase();

    ContentValues contentValues = new ContentValues();
    contentValues.put(NotesDbContract.NoteEntry._ID, note.getId());
    contentValues.put(NotesDbContract.NoteEntry.COLUMN_NAME_TITLE, note.getTitle());
    contentValues.put(NotesDbContract.NoteEntry.COLUMN_NAME_DSECRIPTION, note.getDescription());

    int result = db.update(NotesDbContract.NoteEntry.TABLE_NAME,
            contentValues,
            NotesDbContract.NoteEntry._ID + "=?", new String[]{String.valueOf(note.getId())}
    );
    db.close();

    return result > 0;
} 
```

# qt - Posix 信号和 qt 库

> ID：10978149
> 
> 赞同：0
> 
> 时间：2012-06-11T10:11:49.103
> 
> 标签：qt, signals

Qt 中是否有一个包含 posix 信号库的信号类（用于捕获 SIGSEV、SIGABT 等的信号库）？我正在编写一个 qt 应用程序，如果没有必要，我宁愿避免混淆两个信号系统。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T10:51:09.773

Qt 的信号和posix 信号是完全不同的东西。它们之间唯一的“混淆”是在人脑中，因为它们碰巧用同一个词命名。没有合理的方法可以将两者“混淆”，除非您自己感到困惑。

Qt 包装 posix 信号没有多大意义，因为它们不是跨平台的。在 Windows 上最接近 posix 信号的是 AIO 回调，因为它们也是真正的异步 IIRC。

# javascript - 从 JavaScript 访问元素的 CSS 样式属性的正确方法是什么？

> ID：10978152
> 
> 赞同：1
> 
> 时间：2012-06-11T10:11:59.993
> 
> 标签：javascript, css, firefox, dom, webkit

以下 JavaScript 代码在基于 WebKit 的浏览器中完美运行，但在 Firefox 中无法运行：

```
canvas.style['left'] = "50%";
canvas.style['margin-left'] = "-" + (width / 2) + "px"; 
```

在 Firefox 中检查元素，我可以看到上面的代码成功设置了属性，但是由于某种原因`left`，该元素没有属性。`margin-left`

看来我一定做错了什么，这并不奇怪，因为我无法弄清楚从 JavaScript 访问（读取或设置）CSS 样式属性的正确方法是什么。我刚刚找到了一些使用这种表示法的示例，并尝试遵循它们，结果好坏参半。

从 JavaScript 访问元素的 CSS 样式属性的正确/符合标准的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:12:00.930

经过一番摸索，我发现了以下基本事实，这些事实对于大多数 JavaScript 人员来说肯定是不费吹灰之力的，但我想我的困惑在 JavaScript 新手中并不少见。

*   **JavaScript 中的所有对象都是关联数组。**

可以通过以下两种方式之一访问对象属性：

```
var o = new Object();
o.prop = "A string";
o['prop']; // => "A string" 
```

虽然可以将对象用作“普通”关联数组并使用带有任意字符串的键：

```
o.['another-prop'] = 4 // Perfectly valid 
```

在这样做时，您将创建一个无法通过点符号访问的属性：

```
o.another-prop // Parsed as `o.another` minus `prop` 
```

这大概是以下原因：

*   **从 JavaScript 访问时，DOM 样式属性使用 camelCase。**

我使用的是 CSS 中使用的连字符属性名称。这些在我测试的所有基于 WebKit 的浏览器中都有效，但这似乎只是因为 WebKit 是宽容的。

* * *

据我所知，从 JavaScript 访问 CSS 样式属性的正确方法是将属性名称转换为驼峰式大小写，然后使用点表示法或括号内的关联数组表示法。在 Firefox 中不起作用的行变为

```
canvas.style['marginLeft'] = "-" + (width / 2) + "px"; 
```

或者

```
canvas.style.marginLeft = "-" + (width / 2) + "px"; 
```

这适用于我测试过的所有浏览器，但如果我所说的内容不正确或不符合标准，我很想听听。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:25:51.713

删除带有大写字母的破折号和下一个单词，margin-left 到 marginLeft 等

```
 obj.style.marginLeft = '10px'; 
```

# facebook - 黑莓FB共享问题：内存不足

> ID：10978153
> 
> 赞同：0
> 
> 时间：2012-06-11T10:12:00.777
> 
> 标签：facebook, memory-management, blackberry, share

我正在使用 Blackberry Facebook SDK (FacebookBlackBerrySDK-v0.8.25.jar) 为我的应用程序集成 Facebook。我正在使用以下代码。

```
ApplicationSettings as = new ApplicationSettings(NEXT_URL, APPLICATION_ID, APPLICATION_SECRET, PERMISSIONS);
          Facebook fb = Facebook.getInstance(as);

          try{

             FBUserDetails fbUserDetails = FBUserDetails.getInstance();

             String prevUserDatails = fbUserDetails.getFBData();           

             User user = fb.getCurrentUser();

             if(prevUserDatails != null && !prevUserDatails.equals("") && user.getEmail().equals(prevUserDatails)){

                if(Dialog.ask(Dialog.D_YES_NO,"Do you want to post using FB account " + prevUserDatails + "?",Dialog.YES)==Dialog.NO){
                    fb.logout(true);
                    user = fb.getCurrentUser();
                }    
             }

             if(user!= null){

                fbUserDetails.persist(user.getEmail());

                String result = user.publishStatus(decodedText);
                if ((result != null) && !result.trim().equals("")) {
                    Dialog.alert("Successfully posted to Facebook.");                   
                } else {
                    Dialog.alert("Share Failed.");
                }

             }else
                Dialog.alert("user is equal to null.");

          }catch(FacebookException fe){
              fe.printStackTrace();
          } 
```

当我在 Blackberry Strom 9300（操作系统版本 6.0.0.526）中测试应用程序时，它第一次运行正常。但是当我要在短时间内再次分享相同的文本时（很明显，发布会失败），系统给出“您设备上的可用内存不足。关闭以下一些项目。” 我被迫关闭了应用程序。谁能告诉我上面的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:38:51.920

我的 Webworks Blackberry 版本也有同样的问题。我第一次开始使用该应用程序时运行良好，但是当我开始处理该应用程序上的其他页面时，我收到一个弹出窗口，告诉我“设备内存太低 - 请关闭以下项目”。然后应用程序图标变为看起来像文件夹的东西。

我做了一些研究，这似乎是 Blackberry OS 6 上的一个持续存在的问题。删除应用程序并重新安装它无济于事，重新启动应用程序也无济于事。

查看此链接以查看与低设备内存相关的更深层次问题

[http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Device-memory-is-Low-issue-for-an-WebWork-app/td-p/1166441/page/16](http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Device-memory-is-Low-issue-for-an-WebWork-app/td-p/1166441/page/16)

# javascript - 从具有相同父级的单独 iFrame 更改 iFrame 源？

> ID：10978162
> 
> 赞同：0
> 
> 时间：2012-06-11T10:12:44.907
> 
> 标签：javascript, html, button, iframe

这是我完整的最新代码，但不起作用。这是主窗口 HTML

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Website</title>
<link rel="stylesheet" type="text/css" href="css/main.css" />
</head>

<body background="core_rec/web_res/cf2.jpg">
<center>
<table width="720" cellpadding="0" cellspacing="0" border="0">
<tr>
<td width="180"><img src="core_rec/logos/metaltop.png" /></td>
<td colspan="3"><img src="core_rec/web_res/title.png" align="bottom"/></td>
</tr>
<tr>
<td width="180"><img src="core_rec/logos/metalbottom.png" /></td>
<td width="70"><center><font id="menutext">Menu</font></center></td>
<td width="100"><center><font id="menutext">Info</font></center></td>
<td width="200"><center><font id="menutext">Products/Services</font></center></td>
<td width="170"><center><font id="menutext">Contact</font></center></td>
</tr>
</table>
<br /><br />
<table height="80%" width="720">
<tr>
<td width="140"><iframe src="iframes/menus/main.html" width="140" id="sidebar"></iframe></td>
<td width="540"><iframe src="iframes/bodies/main/main.html" width="540" name="bodyframe" id="bodyframe"></iframe></td>
</tr>
</table>
</center>
</html> 
```

这是菜单/main.html。它包含按钮。

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>iFrame Main</title>
<link rel="stylesheet" type="text/css" href="../../css/main.css" />
</script>
</head>

<body bgcolor="#000000">
<center>
<font id="sidebartext">
Main<br /><br />
Other Feeds<br /><br />
<button onclick="parent.document.getElementById('bodyframe').src='../bodies/main/othersites.html'">Other Sites</button><br /><br />
</font>
</center>
</body>
</html> 
```

每当我按下菜单框架上的按钮时，主体框架都不会改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:40:39.327

你拼错了`getElementById`：最后一个字母`d`不应该是大写的。

而不是`window.document.getElementById`你可以写`document.getElementById`，因为`window`是浏览器javascript中的全局对象（至少，每个窗口/（i）帧的全局对象）

[http://jsfiddle.net/kNrVL/](http://jsfiddle.net/kNrVL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T20:07:08.257

确保在简单的服务器上运行它并进行测试。许多浏览器在 iframe 方面都有限制。

如果使用file://协议，很多文件都不能正常工作，如果直接打开html文件（即：不通过服务器）就会使用该协议。

# c# - 如何让 SimpleLucene.Net 与 Azure 一起工作

> ID：10978170
> 
> 赞同：0
> 
> 时间：2012-06-11T10:13:13.783
> 
> 标签：c#, asp.net, .net, lucene, lucene.net

我们在整个应用程序中使用 SimpleLucene 进行搜索。一切正常。我们将我们的应用程序上传到 azure 并且它工作正常，但是，每次我进行任何更改并且必须重新上传到 Azure 时，我都必须重新创建索引以确保它是最新的。我想将我的 Azure 索引移动到 azure 上的 Blob 存储，但是我不知道如何让 Azure Lucene Directory 与 SimpleLucene 一起使用。示例代码将不胜感激。

我正在建立这样的索引。

```
var path = @"my path to the index";
var indexWriter = new SimpleLucene.Impl.DirectoryIndexWriter(new System.IO.DirectoryInfo(path), true);
var definitions = GetDefinitions().ToList();

using (var indexService = new SimpleLucene.Impl.IndexService(indexWriter))
{
     try
     {
         indexService.IndexEntities(definitions, new DefinitionsIndexDefinition());
     }
     catch { }
} 
```

如何从 Azure Blob 存储创建 indexWriter？我知道我可以使用 AzureDirectory dll，但它不适用于 SimpleLucene

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:48:36.787

我会说 Simple Lucene 可能不是与 Windows Azure 一起使用的好选择，因为我不确定它是否具有将索引存储在 Windows Azure Blob Storage 上的代码。您确定它可以保存到 Windows Azure Blob 存储上的索引吗？

我使用[Lucene.NET for Windows Azure](http://code.msdn.microsoft.com/windowsazure/Azure-Library-for-83562538)，您可以通过设置 Azure Blob Storage 直接在 Windows Azure Blob 存储上存储索引

步骤 1：配置 Azure Blob 存储

```
<configuration>
  <appSettings>
    <!-- azure SETTINGS -->
    <add key="BlobStorageEndpoint" value="http://YOURACCOUNT.blob.core.windows.net"/>
    <add key="AccountName" value="YOURACCOUNTNAME"/>
    <add key="AccountSharedKey" value="YOURACCOUNTKEY"/>
  </appSettings>
</configuration> 
```

步骤 2：使用 IndexWriter 在 Azure Blob 存储上存储索引：

```
AzureDirectory azureDirectory = new AzureDirectory("TestCatalog");
IndexWriter indexWriter = new IndexWriter(azureDirectory, new StandardAnalyzer(), true);
Document doc = new Document();
doc.Add(new Field("id", DateTime.Now.ToFileTimeUtc().ToString(), Field.Store.YES, Field.Index.TOKENIZED, Field.TermVector.NO));
doc.Add(new Field("Title", “this is my title”, Field.Store.YES, Field.Index.TOKENIZED, Field.TermVector.NO));
doc.Add(new Field("Body", “This is my body”, Field.Store.YES, Field.Index.TOKENIZED, Field.TermVector.NO));
indexWriter.AddDocument(doc);
indexWriter.Close(); 
```

因此，如果您决定将 Lucene.net 用于 Windows Azure，那将是相对更容易和最好的做法。

# python - 计算数组列表的概率时出错

> ID：10978171
> 
> 赞同：2
> 
> 时间：2012-06-11T10:13:15.600
> 
> 标签：python, arrays, numpy

可以通过简单地将每个元素的值除以所有数组元素的总和来为数组的每个元素分配一个概率。我正在尝试使用 python 来处理一长串 numpy 数组。我的代码：

```
def calc_probs(self, array_list):

    for array in array_list:
        buffer=array.astype("float")
        s=sum(buffer)
        for e in np.nditer(buffer, op_flags=["readwrite"]):
            e/=s
        self.probs.append(buffer) 
```

这段代码应该可以工作。事实上，当它输入到 IPython 的交互模式中时它正在工作。结果就是我想要的结果。但是，如果我将代码保存到文件中并运行，我总是会收到以下 ValueError：

> ValueError：具有形状 () 的不可广播输出操作数与广播形状不匹配 (10)

我不明白为什么会发生此错误，尤其是从文件运行时。任何人都可以向我解释并帮助解决问题吗？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T14:44:30.830

`sum`is `__builtin__.sum`，它不知道如何对 NumPy 数组求和，所以只返回数组不变。发生错误是因为您试图将奇异矩阵`e`除以 10x10 矩阵`s`。

你想要`s = np.sum(buffer)`。

整个代码可以简化为：

```
self.probs.append(array / np.sum(array)) 
```

# c# - 从 C# 停止执行 tf.exe (TFS)

> ID：10978181
> 
> 赞同：2
> 
> 时间：2012-06-11T10:13:57.670
> 
> 标签：c#, tfs, processstartinfo

我需要从 TFS 获取修订号，如果我从进程运行 tf.exe，进程会停止。如果我从命令提示符运行相同的命令，它可以工作吗？

```
int revision;

var repo = "path to repo"

var psi = new ProcessStartInfo("cmd", @"/c ""C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\tf.exe"" properties $/MYProject -recursive /version:W")
{
    UseShellExecute = false,
    ErrorDialog = false,
    CreateNoWindow = false,
    WorkingDirectory = repo,
    RedirectStandardOutput = true,
    RedirectStandardError = true
};

using (var p = Process.Start(psi))
{
    p.WaitForExit();
    if (p.ExitCode != 0)
    {
        using (var standardError = p.StandardError)
        {
            Console.WriteLine(standardError.ReadToEnd());
        }
    } 
    else
    {
        using (var standardOutput = p.StandardOutput)
        {
            revision = int.Parse(standardOutput.ReadToEnd());
        }
    }
} 
```

**编辑：**

我做了这个，工作，我应该去吗？

```
public int GetLatestChangeSet(string url, string project)
{
    var server = new TeamFoundationServer(new Uri(url));
    var version = server.GetService(typeof(VersionControlServer)) as VersionControlServer;

    var items = version.GetItems(string.Format(@"$\{0}", project), RecursionType.Full);
    return items.Items.Max(i => i.ChangesetId);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:22:15.393

您最好使用以下名称空间，其中包含实现该目标所需的所有内容

```
Microsoft.TeamFoundation.VersionControl.Client 

//this is just an example 

using Microsoft.TeamFoundation.Client;
using Microsoft.TeamFoundation.VersionControl.Client;

TfsTeamProjectCollection tpc = new TfsTeamProjectCollection(new Uri("http://myserver:8080/"));
VersionControlServer sourceControl = tpc.GetService<VersionControlServer>();
return sourceControl.GetLatestChangesetId(); 
```

[http://msdn.microsoft.com/en-us/library/ms228232(v=vs.80](http://msdn.microsoft.com/en-us/library/ms228232(v=vs.80) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:16:39.520

发生错误是因为您的`StandardOutput`流缓冲区已满并因此阻塞。要阅读标准输入/输出，建议订阅该[`OutputDataReceived`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.outputdatareceived.aspx)事件。或者，启动另一个线程以不断地从`StandardOutput`流中读取数据。

有关[完整的代码示例，请参阅 OutputDataReceived 事件文档中的示例](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.outputdatareceived.aspx)。

更好的解决方案是使用 Massimiliano Peluso 建议的 TFS API。但这是您的方法失败的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T13:30:57.927

我最终得到了这个使用本地工作区修订的解决方案

```
public class ReadTfsRevisionTask : Task
{
    public override bool Execute()
    {
        try
        {
            ChangesetId = GetLatestChangeSet(Server, Project);
            return true;
        }
        catch
        {
            return false;
        }
    }

    private int GetLatestChangeSet(string url, string project)
    {
        project = string.Format(@"$/{0}", project);

        var server = new TeamFoundationServer(new Uri(url));
        var version = server.GetService<VersionControlServer>();

        var workspace = version.QueryWorkspaces(null, WindowsIdentity.GetCurrent().Name, System.Environment.MachineName).First();
        var folder = workspace.Folders.First(f => f.ServerItem == project);

        return workspace.GetLocalVersions(new[] { new ItemSpec(folder.LocalItem, RecursionType.Full) }, false)
            .SelectMany(lv => lv.Select(l => l.Version)).Max();
    }

    [Required]
    public string Server { get; set; }

    [Required]
    public string Project { get; set; }

    [Output]
    public int ChangesetId { get; set; }

} 
```

# php - json jquery 发布请求

> ID：10978193
> 
> 赞同：0
> 
> 时间：2012-06-11T10:14:54.457
> 
> 标签：php, jquery, ajax

```
<script type="text/javascript">
    $(document).ready(function() {
        $("a").click(function() {

            var content = $('#content').html();

            var data = {"content":content};

            $.ajax({
                type: "POST",
                dataType: "json",
                url: "ajax.php",
                data: {content:content},
                success function (data) {
                    alert('Hello!');
                }

            });

        });

    });        
</script>

<div id="content"><?php echo $content; ?></div> 
```

ajax.php

```
echo json_encode($_POST['content']); ?> 
```

什么都没有发生......我真正想要实现的是获取那个警报框并获取返回数据，但是我迷失了，因为我没有收到任何错误或什么也没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:04:14.137

成功后你错过“：”

```
<script type="text/javascript">
    $(document).ready(function() {
        $("a").click(function() {

            var content = $('#content').html();

            var data = {"content":content};

            $.ajax({
                type: "POST",
                dataType: "json",
                url: "ajax.php",
                data: {content:content},
                success: function (data) {
                    alert('Hello!');
                }

            });

        });

    });        
</script>

<div id="content"><?php echo $content; ?></div> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-11T12:21:53.203

正如@sofl 所说，如果您将其更改为`success:function (data) {`它将起作用！

请记住，`$("a")`单击`$("a").click(function() {`链接标签（如`<a href"">`.

如果您使用的输入 ou 按钮带有`class="a"`则应将代码更改为`$(".a").click(function() {`

`.`（只需在前面添加一个`a`）

PS：如果您使用的是链接，则应将其设置`href=""`为`href="#"`工作。

# mysql - 年底用Mysql

> ID：10978195
> 
> 赞同：5
> 
> 时间：2012-06-11T10:15:08.930
> 
> 标签：mysql, sql

我想从 MySQL 获取给定日期的周数和年份，并遵循以下规则：

*   如果日期是在年底，但在下一年的第一周，我需要返回 1 作为周数。
*   如果日期在年初，但在上一年的最后一周，我需要返回 52（或 53）作为周数。

我已经阅读了 MySQL 中的 week 函数，但我无法得到我想要的结果。

[日期和时间功能：`WEEK(date[,mode])`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_week)

我在法国日历上，所以我必须从星期一开始一周，第一周是今年第一周超过 3 天。

因此我只能使用选项 1 和 3。

当我编写以下查询时：

*   选择周('2012-12-31', 3)，结果为1

*   选择周（'2012-12-31', 1），结果为 53

当我在 2016 年 1 月 1 日测试时：

*   选择周（'2016-1-1', 3），结果为 53

*   选择周('2016-1-1', 1)，结果为0

选项 1 不能使用，因为我无法检测到 2012-12-31 是在明年。

可以使用选项 3，但我有两个逻辑：如果 weeknumber = 1 和 month = 12，year + 1 并且如果 weeknumber = 53 和 month = 1 然后 year - 1

有人有更好的解决方案吗？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:47:35.907

好的，我想我明白你现在想要做什么。

正如文档所说：

> 我们决定返回 0，因为我们希望函数返回“给定年份的周数”。</p>

如果您想要该周所在年份的周数，他们建议使用该[`YEARWEEK()`函数](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_yearweek)，该函数采用与以下相同的模式参数`WEEK()`：

> 如果您希望根据包含给定日期的一周的第一天的年份来评估结果...使用以下`YEARWEEK()`函数：

```
 mysql> SELECT YEARWEEK('2000-01-01');
         -> 199952
 mysql> SELECT MID(YEARWEEK('2000-01-01'),5,2);
         -> '52' 
```

因此，您将使用一些示例：

```
mysql> SELECT MID(YEARWEEK('2012-1-1',3),5,2)
         -> '52'
mysql> SELECT MID(YEARWEEK('2012-12-31',3),5,2)
         -> '01' 
```

# maven - 用于 telnet 连接的 Ant 脚本

> ID：10978200
> 
> 赞同：2
> 
> 时间：2012-06-11T10:15:30.630
> 
> 标签：maven, ant, telnet

如何使用 ant 进行 telnet 连接并在目标机器上执行命令？或者我应该改用 maven 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:27:26.937

ant [telnet](http://ant.apache.org/manual/Tasks/telnet.html)任务可以为您做到这一点。

# ruby-on-rails - 如何在 Rails 中测试文件上传以进行集成测试？

> ID：10978202
> 
> 赞同：6
> 
> 时间：2012-06-11T10:15:34.187
> 
> 标签：ruby-on-rails, integration-testing, fixtures

我做了一些这样的集成测试：

```
 def user.excel_import
          fixture_excel = fixture_file_upload('goodsins.xls', 'text/xls')
          post excel_import_goods_ins_goods_ins_path, :dump=> {:excel_file=>fixture_excel}, :html => { :multipart => "true" }
          assert_response :redirect
          assert_redirected_to goods_ins_path
       end 
```

但是当我运行测试时，据说：goodins.xls 文件不存在。仅供参考：我将文件放在名为 fixtures 的文件夹中。

任何的想法？非常感谢你

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T13:06:54.650

这里的注释：http: [//apidock.com/rails/ActionController/TestProcess/fixture_file_upload](http://apidock.com/rails/ActionController/TestProcess/fixture_file_upload)表明您需要在路径或文件名之前包含一个斜杠。

试试看`fixture_file_upload('/goodsins.xls', 'text/xls')`是否有帮助。

fixture_file_upload 来源：

```
# File actionpack/lib/action_controller/test_process.rb, line 523
def fixture_file_upload(path, mime_type = nil, binary = false)
  if ActionController::TestCase.respond_to?(:fixture_path)
    fixture_path = ActionController::TestCase.send(:fixture_path)
  end

  ActionController::TestUploadedFile.new("#{fixture_path}#{path}",
    mime_type, binary)
end 
```

来自问题所有者的更新：

解决方案：

添加`include ActionDispatch::TestProcess`到`test_helper.rb`

# bash - bash：从三行中提取2个信息

> ID：10978206
> 
> 赞同：1
> 
> 时间：2012-06-11T10:15:48.373
> 
> 标签：bash

我在解析日志文件时遇到问题...这是一个日志文件示例（在现实生活中包含 bash 颜色代码）：

```
foo completely unintresting line bar
foo [INFO] [#############] bar 
foo [INFO] [#######______] bar 
```

我需要部分“[#############]”和“[####### **__** ]”。为了获得这些信息，我删除了一些无趣的行：

```
CMD_TAIL=`tail -n 3 server.log | sed -r "s/\x1B\[([0-9]{1,3}((;[0-9]{1,3})*)?)?[m|K]//g" | grep -E '\[INFO\] \[[#_]+\]'` 
```

但是如果我“走” CMD_TAIL 我会得到这个（空格替换为换行符）：

```
1: foo :2
1: [INFO] :2
1: [#############] :2
1: bar :2
... 
```

如何获得完整的行，以便提取所需的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:42:06.163

如果您在类似 bash 的外壳中，请尝试在循环之前将内部字段分隔符设置为换行符：

```
IFS=$'\n'
for TAIL in $CMD_TAIL; do
    echo "1: $TAIL :2"
done 
```

# android - 安卓手机屏幕灯亮或灭会影响网络状态吗？

> ID：10978211
> 
> 赞同：1
> 
> 时间：2012-06-11T10:16:18.857
> 
> 标签：android, ussd

对于安卓手机，开屏或关屏对网络状态有影响吗？

当手机灯熄灭或手机被锁定时，我无法运行某些与网络相关的 USSD。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T10:24:09.500

不，它不会影响它。当屏幕关闭时，电子邮件会通过。

我正在运行一个版本的 CyanogenMod，它在屏幕关闭时断开了 WIFI，但那是一个自定义 ROM

# php - 使用 ImageMagick 从 PDF 创建图像...高效

> ID：10978212
> 
> 赞同：0
> 
> 时间：2012-06-11T10:16:20.477
> 
> 标签：php, wordpress, pdf, imagemagick, jpeg

我正在使用 ImageMagick 创建已上传 PDF 的微小 JPG 缩略图。代码工作正常。这是一个 WordPress 小部件，尽管这不一定是 WordPress 特定的。

我不熟悉 ImageMagick，所以我希望有人能告诉我这是否看起来很糟糕或者没有遵循某种最佳实践，或者我是否冒着使服务器崩溃的风险。

具体来说，我的问题是：

*   该图像是否已缓存，或者服务器是否必须在每次有人查看该页面时重新生成该图像？如果它*没有*被缓存，那么确保服务器不必重新生成缩略图的最佳方法是什么？
*   我尝试为 ImageMagick 创建一个单独的文件夹 (/thumbs) 以将所有图像放入其中，而不是将 WP 上传文件夹与 PDF 图像混淆。尽管我的测试环境中的文件夹有 777 权限，但它一直抛出权限错误。为什么？源/目标目录是否必须相同？
*   我在这里做的事情是否不正确/效率低下需要改进？

整个小部件都在 Pastebin 上：http: [//pastebin.com/WnSTEDm7](http://pastebin.com/WnSTEDm7)

相关代码：

```
<?php

if ( $url ) {       
    $pdf = $url;
    $info = pathinfo($pdf);
    $filename =  basename($pdf,'.'.$info['extension']);

    $uploads = wp_upload_dir();
    $file_path = str_replace( $uploads['baseurl'], $uploads['basedir'], $url );
    $dest_path = str_replace( '.pdf', '.jpg', $file_path );
    $dest_url = str_replace( '.pdf', '.jpg', $pdf );

    exec("convert \"{$file_path}[0]\" -colorspace RGB -geometry 60 $dest_path"); ?>
    <div class="entry">
        <div class="widgetImg">
            <p><a href="<?php echo $url; ?>" title="<?php echo $filename; ?>"><?php echo "<img src='".$dest_url."' alt='".$filename."' class='blueBorder' />"; ?></a></p>
        </div>

        <div class="widgetText">
            <?php echo wpautop( $desc ); ?>

            <p><a class="downloadLink" href="<?php echo $url; ?>" title="<?php echo $filename; ?>">Download</a></p>
        </div>
    </div>
    <?php }
?> 
```

如您所见，该小部件抓取附加到正在查看的当前页面的任何 PDF，创建 PDF 第一页的图像，存储它，然后以 HTML 链接到它。

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:39:06.870

当您保存为 jpg 时，请尝试将 -define 添加到您的代码中：

```
exec("convert -define jpeg:size=60x60 \"{$file_path}[0]\" -colorspace RGB -geometry 60 $dest_path"); ?> 
```

60x60 是图像的最终尺寸 - 它所做的只是读取足够的数据来创建图像，从而加快读取过程。

调整保持纵横比然后裁剪为 60x60

```
exec("convert -define jpeg:size=60x60 \"{$file_path}[0]\" -colorspace RGB -thumbnail 60x60 -gravity center -crop 60x60+0+0 +repage $dest_path"); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:25:35.470

所以我认为 ImageMagick*是*在每个页面视图上重新生成缩略图。带有此小部件的页面将需要额外的几秒钟才能加载。

所以，它现在做一个简单的检查，看看缩略图是否已经存在：

```
if ( !file_exists( $dest_path ) ) {
    exec("convert \"{$file_path}[0]\" -colorspace RGB -geometry 60 $dest_path");
}; 
```

加载大约需要 5 秒的页面现在需要 2-3 秒。

无论如何，我仍然很想知道是否有任何 PHP 人认为这可以做得更好。

希望这段代码可以帮助某人。

# c - 从 8 位数据中去除 C 中的奇偶校验位，后跟 1 个奇偶校验位

> ID：10978215
> 
> 赞同：1
> 
> 时间：2012-06-11T10:16:24.470
> 
> 标签：c, parity

我有一个包含 8 位数据的位缓冲区，后跟 1 个奇偶校验位。这种模式会重复。缓冲区当前存储为八位字节数组。

示例（p 是奇偶校验位）：

0001 0001 p000 0100 0p00 0001 00p01 1100 ...

应该成为

0001 0001 0000 1000 0000 0100 0111 00 ...

基本上，我需要剥离每第九位才能获得数据位。我怎样才能做到这一点？

这与某个时候在这里提出的[另一个问题](https://stackoverflow.com/questions/6538039/strip-parity-bits-in-c)有关。

这是在 32 位机器上，因此相关问题的解决方案可能不适用。最大可能位数为 45，即 5 个数据八位字节

这是我到目前为止所尝试的。我创建了一个“布尔”数组，并根据八位字节的位集将位添加到数组中。然后，我查看数组的每第九个索引并通过它。然后将剩余的数组向下移动一个索引。然后我只剩下数据位了。我在想可能有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:51:47.197

您拥有一组位的想法很好。只需通过 32 位数字（缓冲区）实现位数组。

要从缓冲区中间删除一点：

```
void remove_bit(uint32_t* buffer, int* occupancy, int pos)
{
    assert(*occupancy > 0);
    uint32_t high_half = *buffer >> pos >> 1;
    uint32_t low_half = *buffer << (32 - pos) >> (32 - pos);
    *buffer = high_half | low_half;
    --*occupancy;
} 
```

向缓冲区添加一个字节：

```
void add_byte(uint32_t* buffer, int* occupancy, uint8_t byte)
{
    assert(*occupancy <= 24);
    *buffer = (*buffer << 8) | byte;
    *occupancy += 8;
} 
```

从缓冲区中删除一个字节：

```
uint8_t remove_byte(uint32_t* buffer, int* occupancy)
{
    uint8_t result = *buffer >> (*occupancy - 8);
    assert(*occupancy >= 8);
    *occupancy -= 8;
    return result;
} 
```

您必须安排调用以使缓冲区永远不会溢出。例如：

```
buffer = 0;
occupancy = 0;
add_byte(buffer, occupancy, *input++);
add_byte(buffer, occupancy, *input++);
remove_bit(buffer, occupancy, 7);
*output++ = remove_byte(buffer, occupancy);
add_byte(buffer, occupancy, *input++);
remove_bit(buffer, occupancy, 6);
*output++ = remove_byte(buffer, occupancy);
... (there are only 6 input bytes, so this should be easy) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T10:48:34.593

在伪代码中（因为您没有提供任何证明您已经尝试过的东西），为了简单起见，我可能会这样做：

*   将数据（包括奇偶校验位）作为*位流查看*
*   虽然还有一些位要读取：
    *   读取接下来的 8 位
    *   写入输出
    *   再读一点，然后丢弃

这“让你振作起来”，不再担心读取字节，这不再是一个有用的操作，因为你的字节与你想要丢弃的位交错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T10:36:06.133

[我已经编写了辅助函数来读取未对齐的位缓冲区（这是用于 AVC 流，请参见此处](https://github.com/noirotm/flvmeta/blob/master/src/avc.c)的原始源）。代码本身是 GPL，我在这里粘贴有趣的（修改过的）位。

```
typedef struct bit_buffer_ {
  uint8_t * start;
  size_t size;
  uint8_t * current;
  uint8_t read_bits;
} bit_buffer;

/* reads one bit and returns its value as a 8-bit integer */
uint8_t get_bit(bit_buffer * bb) {
  uint8_t ret;
  ret = (*(bb->current) >> (7 - bb->read_bits)) & 0x1;
  if (bb->read_bits == 7) {
      bb->read_bits = 0;
      bb->current++;
  }
  else {
      bb->read_bits++;
  }
  return ret;
}

/* reads up to 32 bits and returns the value as a 32-bit integer */
uint32_t get_bits(bit_buffer * bb, size_t nbits) {
  uint32_t i, ret;
  ret = 0;
  for (i = 0; i < nbits; i++) {
    ret = (ret << 1) + get_bit(bb);
  }
  return ret;
} 
```

您可以使用如下结构：

```
uint_8 * buffer;
size_t buffer_size;
/* assumes buffer points to your data */

bit_buffer bb;
bb.start = buffer;
bb.size = buffer_size;
bb.current = buffer;
bb.read_bits = 0;

uint32_t value = get_bits(&bb, 8);
uint8_t parity = get_bit(&bb);

uint32_t value2 = get_bits(&bb, 8);
uint8_t parity2 = get_bit(&bb);

/* etc */ 
```

我必须强调，这段代码非常完美，必须实施适当的边界检查，但它在我的用例中运行良好。

我将其作为练习留给您使用它来实现适当的位缓冲区读取器以获得灵感。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T13:19:35.223

这也有效

```
void RemoveParity(unsigned char buffer[], int size)
{
    int offset = 0;
    int j = 0;

    for(int i = 1; i + j < size; i++)
    {
        if (offset == 0)
        {
            printf("%u\n", buffer[i + j - 1]);
        }
        else
        {
            unsigned char left = buffer[i + j - 1] << offset;
            unsigned char right = buffer[i + j] >> (8 - offset);
            printf("%u\n", (unsigned char)(left | right));
        }
        offset++;
        if (offset == 8)
        {
            offset = 0;
            j++; // advance buffer (8 parity bit consumed)
        }
    }
} 
```

# jquery-tokeninput - TokenInput - 从多个搜索字段中获取值

> ID：10978218
> 
> 赞同：0
> 
> 时间：2012-06-11T10:16:32.890
> 
> 标签：jquery-tokeninput

我正在使用 Loopj 的 TokenInput，它工作正常。

我在同一页面上有三个搜索框 - 一个用于三个不同的搜索属性，每个都有自己的外部数据源（在本例中，按船名、船级和船型搜索）。当然，有三个“提交”按钮，每个搜索框一个。

**我的问题**：单击任何“提交”按钮仅返回其自己的搜索框的值（基于包含的脚本，请参阅下文）。我想要的是单击*任何*按钮并获取*所有*搜索框的值，以便我可以创建一个 MySQL 查询。

```
<script type="text/javascript">
  $(document).ready(function() {
    $("input[type=button]").click(function () {
      alert("Would submit: " + $(this).siblings("input[type=text]").val());
    });
});
</script> 
```

注意：这个[较早的问题“在一个页面上的多个输入上使用 tokeninput jquery 插件”。](https://stackoverflow.com/questions/6092279/using-tokeninput-jquery-plugin-on-more-than-one-input-on-a-page)似乎相关，但该问题的答案并未解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T06:00:31.430

经过一些进一步的测试，我已经找到了答案，为了完整起见，我将其包含在此处。不幸的是，这凸显了我对编码知之甚少......

1.  javascript“警报”脚本是一个红鲱鱼。它不会神奇地凭空获得令牌值。令牌值已存储在相关输入字段中。

2.  “提交”按钮是一个红鲱鱼。那是因为他们是“。他们只是在那里触发javascript警报，他们不能提交表单。

3.  **你需要一个表格！**“TokenInput”演示展示了插件的工作原理，但它们旨在以形式使用。

4.  我在页面顶部添加了一个表单域，在页面`</form>`底部添加了一个关闭表单域 ( )。结果是我的三个搜索框都在表单内。请注意，该操作是检索相同的页面和 method = post。

    ```
    `<form id="myshiptype" name="pixsearchform" action="<?php echo $_SERVER[REQUEST_URI]; ?>" method="post" >` 
    ```

5.  我将示例输入“名称”字段从“blah”更改为更有意义的内容——shipid、classid 和 typeid。

6.  `<input type="Submit" />`我在表单底部添加了一个提交按钮（种类繁多）。`<input type="submit" id="update" name="update" value="Update search" />`

7.  我在页面中添加了一些调试代码，以在单击提交按钮后显示输入字段的值。

    ```
    <?php 
    $postvalues = "";
    if ($_POST) {
    $kv = array(); 
    foreach ($_POST as $key => $value) {
    $kv[] = "$key=$value";
    } 
    $postvalues = join("&", $kv);
    }
    echo "post values are ".$postvalues;
    ?> 
    ```

8.  这是调试示例 - “post values are shipid=34&classid=&typeid=677,638&update=Update search”

下一步是使表单适应 Ajax，并禁用表单中的“Enter”键（当用户在空搜索中按 Enter 时）。

# php - PHP:file_get_contents() 错误

> ID：10978220
> 
> 赞同：1
> 
> 时间：2012-06-11T10:16:39.417
> 
> 标签：php, json, file-get-contents

我正在使用 file_get_contents 读取 json 数据。

我的代码是：

```
 //echo $json_url;
    $json_data = file_get_contents($json_url); 
```

我很惊讶，变量 $json_data 返回空值。当我回显变量 $json_url 时，它会显示正确的 url。当我在浏览器中手动输入 url 时，Tt 也会显示 json 记录。

这里有什么错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:21:14.530

网址是什么？

> [笔记：](http://php.net/manual/en/function.file-get-contents.php)
> 
> 如果您要打开带有特殊字符（例如空格）的 URI，则需要使用 urlencode() 对 URI 进行编码。

此外，是否启用了 url fopen 包装器？

> [小费](http://php.net/manual/en/function.file-get-contents.php)
> 
> 如果启用了[fopen 包装器](http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)，则 URL 可以用作此函数的文件名。

[但是，如果您启用错误报告](https://stackoverflow.com/questions/845021/how-to-get-useful-error-messages-in-php)，您将看到请求失败的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:18:53.347

尝试先对 url进行[urlencode](http://www.php.net/manual/en/function.urlencode.php)

```
$json_data = file_get_contents(urlencode($json_url)); 
```

# silverlight - 在 silverlight 中控制滑块值更改事件

> ID：10978221
> 
> 赞同：0
> 
> 时间：2012-06-11T10:16:44.897
> 
> 标签：silverlight, events, slider

我在 Silverlight 3.0 应用程序中有一个子窗口。在那个应用程序中，我有一个滑块。每当我滑动滑块时，Slider_ValueChanged 事件会在一秒钟内触发超过 30 次。我想控制触发的事件数量？我正在使用这样的滑块：

`<Slider Grid.Row="3" Height="17" HorizontalAlignment="Left" Margin="188,0,0,20" ValueChanged="sliderValueChanged" MouseLeftButtonUp="Slider_MouseLeftButtonUp" Name="Slider" VerticalAlignment="Top" Visibility="Collapsed" Width="456" Orientation="Horizontal" Background="Black" SmallChange="5" LargeChange="5" />`

事件 sliderValueChanged 需要一点时间来执行。所以我只想减少对该事件的调用次数。

编辑：实际上我的问题是在子窗口中我正在绘制多个波形。不加载波形，滑块工作正常（空屏幕）但是当我在屏幕上加载波形时它不能正常工作。（而不是显示它跳跃的连续平滑运动。）我没有得到实际上是什么问题？以及如何克服它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:43:39.823

获取您的`sliderValueChanged`事件以保存当前（最新）滚动值并使用计时器定期检查该数字的更改（例如每秒 30 帧或每秒 60 帧）。

Silverlight 中的默认值为每秒 60 帧，[但可以更改](http://msdn.microsoft.com/en-us/library/cc838147%28v=vs.95%29.aspx)。您的更新越接近刷新率，它就会显得越流畅。

# wpf - 扩展时未显示 WPF 扩展器验证错误

> ID：10978222
> 
> 赞同：6
> 
> 时间：2012-06-11T10:16:53.640
> 
> 标签：wpf, validation, mvvm, expander, idataerrorinfo

使用 MVVM。我有一个`DataTemplate`用于显示每个对象中带有一些控件的扩展器。

```
<DataTemplate>
    <Expander ExpandDirection="Down" IsExpanded="False">
        <Expander.Header>
            <TextBlock>
                <TextBlock.Text>
                    <MultiBinding StringFormat="Platform Group {0} {1}">
                        <Binding Path="PlatformGroupCode"/>
                        <Binding Path="PlatformGroupName"/>
                    </MultiBinding>
                </TextBlock.Text>
            </TextBlock>
        </Expander.Header>
        <vw:PlatformGroup HorizontalAlignment="Left"/>
    </Expander>
</DataTemplate> 
```

该视图内部是绑定到这 2 个属性的 2 个文本框。我`IDataErrorInfo`在我的 VM 中使用来进行验证，并且我在我的主要应用程序资源中有一种样式来将错误消息显示为工具提示：

```
<Style TargetType="{x:Type TextBox}">
    <Style.Triggers>
        <Trigger Property="Validation.HasError" Value="true">
            <Setter Property="ToolTip" Value="{Binding RelativeSource={x:Static RelativeSource.Self},Path=(Validation.Errors).CurrentItem.ErrorContent}"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

添加新组时，2 个属性具有默认值，这是无效的，因此我希望文本框为红色以提示用户输入数据。如果 Expander 的 IsExpanded 设置为 true，则此方法有效。但如果它是假的，我必须扩展并更改其中一个文本框中的值，以便显示红色边框和工具提示。

我不想将扩展器设置为展开，因为最终会有很多控件。如何在扩展器展开后立即显示红色边框？更好的是，有没有办法让新添加的扩展器展开（当用户添加新组时，我正在将 PlatformGroupviewModel 添加到`observablecollection`PlatformGroupviewModels 中）？

编辑更多细节：顶级视图：

```
 <StackPanel Orientation="Vertical">
        <ScrollViewer VerticalScrollBarVisibility="Auto" MaxHeight="630">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="5*" />
                    <ColumnDefinition Width="5*" />
                </Grid.ColumnDefinitions>
                <StackPanel Orientation="Vertical" Grid.ColumnSpan="2" Grid.Row="1" HorizontalAlignment="Stretch">
                    <Expander ExpandDirection="Down" IsExpanded="True" Header="Header" HorizontalAlignment="Stretch" Name="expHeader" VerticalAlignment="Top">
                        <vw:Header DataContext="{Binding HeaderVM}"/>
                    </Expander>
                    <Expander ExpandDirection="Down" IsExpanded="True" Header="Platform Groups" HorizontalAlignment="Stretch" Name="expPlatformGroups" VerticalAlignment="Top">
                        <AdornerDecorator>
                            <vw:PlatformGroups DataContext="{Binding PlatformGroupsVM}"/>
                        </AdornerDecorator>
                    </Expander>
                </StackPanel>
            </Grid>
        </ScrollViewer>
</StackPanel> 
```

PlatformGroups 视图：

```
 <StackPanel Orientation="Vertical" HorizontalAlignment="Stretch" Margin="10,10,10,10">
    <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch" Margin="0,10">
        <Label Content="Number of platform groups" VerticalAlignment="Center"/>
        <vw:IntegerInput MinValue="0" MaxValue="50" MaxLength="2"  Text="{Binding Path=NumPlatformGroups, Mode=TwoWay,ValidatesOnDataErrors=True}" HorizontalAlignment="Left" VerticalAlignment="Center"/>
    </StackPanel>
    <ItemsControl IsTabStop="False" ItemsSource="{Binding PlatformGroups}" Margin="20,10" VirtualizingStackPanel.IsVirtualizing="True" VirtualizingStackPanel.VirtualizationMode="Recycling">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <VirtualizingStackPanel />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Expander ExpandDirection="Down" IsExpanded="False">
                    <Expander.Header>
                        <TextBlock>
                            <TextBlock.Text>
                                <MultiBinding StringFormat="Platform Group {0} {1}">
                                    <Binding Path="PlatformGroupCode"/>
                                    <Binding Path="PlatformGroupName"/>
                                </MultiBinding>
                            </TextBlock.Text>
                        </TextBlock>
                    </Expander.Header>
                    <AdornerDecorator>
                        <vw:PlatformGroup HorizontalAlignment="Left"/>
                    </AdornerDecorator>
                </Expander>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
        <ItemsControl.Template>
            <ControlTemplate>
                <Border BorderThickness="{TemplateBinding Border.BorderThickness}" Padding="{TemplateBinding Control.Padding}"
        BorderBrush="{TemplateBinding Border.BorderBrush}" Background="{TemplateBinding Panel.Background}" SnapsToDevicePixels="True">
                    <ScrollViewer VerticalScrollBarVisibility="Auto" MaxHeight="400" CanContentScroll="True" Padding="{TemplateBinding Control.Padding}" Focusable="False">
                        <ItemsPresenter SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" />
                    </ScrollViewer>
                </Border>
            </ControlTemplate>
        </ItemsControl.Template>
    </ItemsControl>
</StackPanel> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T11:33:11.497

根据[这篇](http://karlshifflett.wordpress.com/2008/02/19/wpf-validation-errors-disappear-inside-tabcontrol-when-switching-tabitems/)`Expander`文章，将您的内容包装在 an 中`AdornerDecorator`应该可以解决这个问题 -

```
<DataTemplate>
    <Expander ExpandDirection="Down" IsExpanded="False">
        <Expander.Header>
           ...
        </Expander.Header>

        <AdornerDecorator>
            <vw:PlatformGroup HorizontalAlignment="Left"/>
        </AdornerDecorator>

    </Expander>
</DataTemplate> 
```

另一个确认这一点的 SO 线程 - [WPF 验证问题（IDataErrorInfo）和标签聚焦](https://stackoverflow.com/questions/2355661/problem-with-wpf-validationidataerrorinfo-and-tab-focusing?rq=1)

此连接错误还提到了其他一些解决方法 -

[来回切换选项卡时，TabControl 无法正确显示验证错误信息](http://connect.microsoft.com/VisualStudio/feedback/details/295933/tabcontrol-doesnt-display-validation-error-information-correctly-when-switching-tabs-back-and-forth)

# python - Python 中的 SerialTimeoutException 未按预期工作

> ID：10978224
> 
> 赞同：4
> 
> 时间：2012-06-11T10:17:09.867
> 
> 标签：python, serial-port

有时我没有通过串行接口获取任何数据，我想通过以下方式捕获这种异常情况：

```
ser          = serial.Serial(3)
ser.baudrate = 115200
timeout      = 1

while (some condidion)
  try:
    dump = ser.read(40)
  except ser1.SerialTimeoutException:
    print('Data could not be read')

ser.close() 
```

但是，当我运行这个程序时，当缓冲区中没有数据并且我陷入无限循环时，永远不会捕获到异常。有人知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T10:22:30.210

我什至不知道那个例外。查看[API 文档](http://pyserial.sourceforge.net/pyserial_api.html)后，您会发现此异常仅适用于`write()`.

如果你`read()`，你只会有一个缩短甚至空的输出。

这仅适用于您以超时打开连接的情况。类似的东西`serial.Serial(3, timeout=.1)`。

# workflow - 通过 API 将参数传递给 CRM 2011 工作流

> ID：10978236
> 
> 赞同：3
> 
> 时间：2012-06-11T10:18:10.103
> 
> 标签：workflow, dynamics-crm, dynamics-crm-2011, crm

我有一个具有“提示和响应”对话框的工作流程。我可以使用 API 从 API 运行工作流，`ExecuteWorkflowRequest`但如何为提示和响应输入提供值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T13:34:16.463

工作流不带参数。

对话框带有参数，这些参数通常是从其他对话框或查询中传递过来的。

我唯一能做的就是将父工作流中的相关实体作为主要实体传递给子工作流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T12:42:36.540

我将收回我之前的回答，转而支持@Grigory。

[从 SDK 中](http://msdn.microsoft.com/en-us/library/gg334463.aspx)查看此页面

> **注意**由于对话过程的交互性质，您无法使用 Microsoft Dynamics CRM SDK 运行对话。对话框只能通过 Microsoft Dynamics CRM Web 应用程序运行，并且在 Microsoft Dynamics CRM for Microsoft Office Outlook with Offline Access 中不受支持。

* * *

~~我不知道答案，但我相当有信心这是：~~

 ~~*   可能的
*   不支持（因为SDK中*没有记录）*~~ 

如果*我*真的需要找出答案，那么我会编写一个插件来探索在内部触发工作流时会发生什么（这假设这样的消息是通过插件管道触发的——不一定是正确的假设）。

~~我会在消息的所有阶段注册这个插件（我假设），然后`Execute`使用调试日志记录或交互式调试会话（附加到异步服务）来检查（`InputParameters`希望）在CRM 运行具有参数的工作流。我希望其中一个 PropertyBags 将包含某种参数。`OutputParameters``ExtensionData``ExecuteWorkflowRequest`~~

# c# - 函数参数：IEnumerable、ICollection 还是数组？

> ID：10978238
> 
> 赞同：6
> 
> 时间：2012-06-11T10:18:15.390
> 
> 标签：c#, .net, parameters

如果我有一个接受某种类型集合的函数，我应该使用什么参数类型？
我以前假设`IEnumerable`是默认值，但我想知道这是否正确，如果正确，为什么。
`ICollection`也似乎是一个有效的候选人（由于它的名字），但我得到的印象是 IEnumerables 对用户更友好。
我认为查看框架为我们提供的示例将是一个好主意，但我发现类似`String.Join`, 要求字符串数组。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-11T10:21:22.020

您选择对客户影响最小但允许您完成工作的那个。如果您可以摆脱`IEnumerable<T>`over `ICollection<T>`，那么您应该使用它，因为这为您的 API 的客户端提供了更大的灵活性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T10:24:55.223

IEnumerable 比 ICollections 更受欢迎。 [这](https://stackoverflow.com/a/3559957/881798)是对您问题的慷慨回答。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T10:29:25.823

接口主要用作函数中的参数或返回类型，以支持`I`设计`SOLID`原则（Interface Segregation Principle），使转换更容易，支持将多个具体类型传递给接口参数，并从客户端隐藏（封装）实际参数类型你的公共职能。

*   关于`IEnumerable`：

非常基本，它暴露了枚举器，它支持对非泛型集合的简单迭代。

```
[ComVisibleAttribute(true)]    
public interface IEnumerable 
```

*   这是关于`ICollection`：

ICollection 接口扩展了 IEnumerable；IDictionary 和 IList 是扩展 ICollection 的更专业的接口。IDictionary 实现是键/值对的集合，如 Hashtable 类。IList 实现是值的集合，其成员可以通过索引访问，如 ArrayList 类。一些限制对其元素的访问的集合，例如 Queue 类和 Stack 类，直接实现了 ICollection 接口。如果 IDictionary 接口和 IList 接口均不满足所需集合的要求，则改为从 ICollection 接口派生新的集合类以获得更大的灵活性。

```
[ComVisibleAttribute(true)]
public interface ICollection : IEnumerable 
```

*   这里是关于`IList`接口：

    [ComVisibleAttribute(true)] 公共接口 IList : ICollection, IEnumerable

MSDN 中有关 IList 的更多信息： `IList`是`ICollection`接口的后代，是所有非泛型列表的基本接口。IList 实现分为三类：*只读、固定大小和可变大小*。无法修改只读 IList。固定大小的 IList 不允许添加或删除元素，但允许修改现有元素。可变大小的 IList 允许添加、删除和修改元素。

**小费：**

> 如果您只想支持`foreach`您的集合参数，`IEnumerable`就足够了。如果您还希望支持从集合中添加和删除项目，这`IList`是更好的选择。

**建议：** 这篇博文：[**IEnumerable、ICollection、IList 比较**](http://rbovill.blogspot.in/2008/02/ienumerable-icollection-ilist-compared.html)肯定会帮助您做出更好、更准确的决定。

此外，请查看[**本文**](http://www.informit.com/guides/content.aspx?g=dotnet&seqNum=722)以了解 IList 和 IEnumerable 的性能和其他比较。

# mongodb - MongoDB ODM SELECT COUNT(*) 等效项

> ID：10978242
> 
> 赞同：14
> 
> 时间：2012-06-11T10:18:31.583
> 
> 标签：mongodb, doctrine-odm

我想知道是否有相当于 MySQL-Query 的：

```
 SELECT COUNT(*) FROM users 
```

在 MongoDB ODM 中？

这可能有效：

```
$qb = $this->dm->createQueryBuilder('Documents\Functional\Users');
$qb->select('id');   
$query   = $qb->getQuery();
$results = $query->execute();
echo $query->count(); 
```

但是，如果数据库中有更复杂的文档，那么不是所有的 ID 都会返回，这将如何影响性能。我不想为了获得计数而发送太多数据。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-12-14T22:45:36.877

一个小小的贡献：

如果您以这种方式运行计数：

```
$count = $this->dm->createQueryBuilder('Documents\Functional\Users')
         ->getQuery()->execute()->count(); 
```

Doctrine 运行这个查询：

```
db.collection.find(); 
```

但是，如果代码如下：

```
$count = $this->dm->createQueryBuilder('Documents\Functional\Users')
         ->count()->getQuery()->execute(); 
```

在这种情况下，教义运行此查询：

```
db.collection.count(); 
```

我不知道性能是否有改善，但我认为最优化

我希望这会有所帮助

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-06-13T20:09:42.903

```
$count = $this->dm->createQueryBuilder('Documents\Functional\Users')
             ->getQuery()->execute()->count(); 
```

以上将为您提供用户集合中的文档数量。有问题的查询不会返回所有文档然后计算它们。它为集合生成一个游标，并从那里知道计数。仅当您开始遍历游标时，驱动程序才会开始从数据库中提取数据。

一个方便的性能操作符是**eagerCursor(true)**，它将在水合之前检索查询中的所有数据并关闭游标。如果您知道要获取的数据并且您将在查询后完成它，请使用此选项。

[急切光标](http://doctrine-mongodb-odm.readthedocs.org/en/latest/reference/eager-cursors.html)

如果你有你知道你将迭代的引用。对它们使用**prime(true)**方法。

[主要的](http://doctrine-mongodb-odm.readthedocs.org/en/latest/reference/priming-references.html)

如果要返回所有元素的原始数据，可以在查询中使用**hydrate(false)**方法来禁用水合系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-19T06:37:03.207

对于 Doctrine ODM 2，您可以将查询类型切换为`count`before call `getQuery`：

```
 return $this->createQueryBuilder()
        ->field('storage')->equals($storage)
        ->field('priority')->in($priorities)
        ->count()
        ->getQuery()
        ->execute(); 
```

# gcc - GCC 创建新的 PASS

> ID：10978243
> 
> 赞同：1
> 
> 时间：2012-06-11T10:18:44.627
> 
> 标签：gcc

我正在尝试在 gcc-4.1.2 中编写新的 GCC 通行证。这是我的第一次尝试，我正在尝试打印 gcc 正在编译的函数的代码行。所以我添加了以下代码。请注意，如果我删除 execute_gimple_manipulation 方法中的代码，则不会出现问题：

```
gcc/gcc-4.1.2 1223> cat gcc/gimple-manipulation.c
#include "config.h"
#include "system.h"
#include "coretypes.h"
#include "tm.h"
#include "ggc.h"
#include "flags.h"
#include "tree.h"
#include "basic-block.h"
#include "tree-flow.h"
#include "tree-pass.h"
#include "tree-dump.h"
#include "timevar.h"
#include "diagnostic.h"
#include "cfgloop.h"
#include "tree-scalar-evolution.h"
#include "tree-ssa-propagate.h"
#include "tree-chrec.h"

static void execute_gimple_manipulation (void);
static bool gate_gimple_manipulation (void);

/*-------------------------
  The main driver function.
 -------------------------*/
static void execute_gimple_manipulation (void)
{
  basic_block bb = ENTRY_BLOCK_PTR;
  int bbcounter=0, stmtcounter;
  tree stmt;
  block_stmt_iterator si;

  /* traverse each basic block and print all statements  */

  FOR_EACH_BB (bb){ /* in any order */

    bbcounter++;
    printf("\n-> entering bb # %d (internal #: %d)\n", bbcounter, bb->index);

    stmtcounter=0;

    for(si = bsi_start(bb); !bsi_end_p(si); bsi_next(&si)){
      stmtcounter++;
      printf("   encountering statement #%2d: ", stmtcounter);
      stmt = bsi_stmt(si);
      print_generic_stmt (stderr, stmt, 0);
    }
  }
}

/* ------------------------------------------
   Return true if we should execute our pass.
   ------------------------------------------*/
static bool
gate_gimple_manipulation (void)
{
/*    return (flag_unit_at_a_time != 0  && flag_ipa_gimple_manipulation
           Don't bother doing anything if the program has errors.
          && !(errorcount || sorrycount));*/
  return (/*optimize >= 1*/
          /* Don't bother doing anything if the program has errors.  */
          /*&&*/ !(errorcount || sorrycount));
}
struct tree_opt_pass pass_gimple_manipulation =
{
   "gm_pass_simple",             /* name */
   gate_gimple_manipulation,     /* gate */
   execute_gimple_manipulation,  /* execute */
   NULL,                         /* sub */
   NULL,                         /* next */
   0,                            /* static pass number */
   0,                            /* tv_id */
   PROP_cfg | PROP_ssa | PROP_alias,                            /* properties required */
   0,                            /* properties provided */
   0,                            /* properties destroyed */
   0,                            /* todo_flags start */
   TODO_dump_func,                            /* todo_flags finish */
   0                             /* letter */
}; 
```

根据 make，我的新代码编译运行良好：

```
gcc -c   -g -O2 -DIN_GCC   -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -pedantic -Wno-long-long -Wno-variadic-macros -Wold-style-definition -Wmissing-format-attribute    -DHAVE_CONFIG_H -I. -I. -I../.././gcc -I../.././gcc/. -I../.././gcc/../include -I../.././gcc/../libcpp/include     ../.././gcc/gimple-manipulation.c -o gimple-manipulation.o 
```

但编译过程进一步失败：

```
gcc/gcc-4.1.2/host-x86_64-unknown-linux-gnu/gcc/xgcc -Bgcc/gcc-4.1.2/host-x86_64-unknown-linux-gnu/gcc/ -B/usr/local/x86_64-unknown-linux-gnu/bin/ -B/usr/local/x86_64-unknown-linux-gnu/lib/ -isystem /usr/local/x86_64-unknown-linux-gnu/include -isystem /usr/local/x86_64-unknown-linux-gnu/sys-include -O2  -O2 -g -O2  -DIN_GCC    -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -Wold-style-definition  -isystem ./include  -fPIC -g -DHAVE_GTHR_DEFAULT -DIN_LIBGCC2 -D__GCC_FLOAT_NOT_NEEDED  -msse -c \
                ../.././gcc/config/i386/crtfastmath.c \
                -o crtfastmath.o
../.././gcc/config/i386/crtfastmath.c:110: internal compiler error: Segmentation fault
Please submit a full bug report,
with preprocessed source if appropriate.
See <URL:http://gcc.gnu.org/bugs.html> for instructions.
make[2]: *** [crtfastmath.o] Error 1
make[2]: Leaving directory `gcc/gcc-4.1.2/host-x86_64-unknown-linux-gnu/gcc'
make[1]: *** [all-gcc] Error 2
make[1]: Leaving directory `gcc/gcc-4.1.2'
make: *** [all] Error 2
gcc/gcc-4.1.2 1223> 
```

任何帮助 - 为什么会出现问题以及如何实现目标？

# jquery - qtip - 如何 - 内容：{“将一些文本添加到”attr：'id'}，

> ID：10978246
> 
> 赞同：1
> 
> 时间：2012-06-11T10:18:58.317
> 
> 标签：jquery, attr, qtip

我有这个为我的 qtip 工作

```
 /* required for qtip crests to crests */
        var countyCrest =   {
                content: {
                    attr: 'id'
                },
                position: {
                    target: 'mouse',
                    adjust: {
                        mouse: true,
                        y: +10
                    }
                },
                style: {
                    classes: 'ui-tooltip-tipsy ui-tooltip-shadow',
                    tip: true
                }
        };/* end for qtip crests to crests */ 
```

我想在每个属性之前添加“Co.”：'id'。我尝试了各种版本

```
content: {
            "Co. "+attr: 'id'
}, 
```

这是行不通的。谁能指出我正确的方向？蒂亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:20:31.687

更好的是如下：

```
var temp = {};

temp['Co. ' + attr] = 'id'; 
 var countyCrest =   {

     content: temp,
    ...
} 
```

**[演示](http://jsfiddle.net/Qxk6k/)**

* * *

### 笔记

您尝试的属性的字符串连接`Object`是不可能的。

* * *

### 如果您想要像@Christoph 这样的答案，那么您不需要连接，只需像这样写

```
content: {
            attr: 'Co.id'
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T10:48:52.677

除了这个事实，我看不到`attr`content 属性（[Documentation](http://craigsworks.com/projects/qtip/docs/reference/#content)）的选项（可能是另一个版本或其他），我想它应该是：

```
content: {
            attr: 'Co.'+'id'
}, 
```

`id`（属性中不允许有空格）而不是

```
content: {
            "Co. "+attr: 'id'
}, 
```

因为您不想更改选项的名称（已固定`attr`），而是更改它的值。

# java - 如何使用 Oauth2.0 从 Google Plus API 获取联系人

> ID：10978249
> 
> 赞同：2
> 
> 时间：2012-06-11T10:19:08.090
> 
> 标签：java, jakarta-ee, google-api, google-plus, google-api-java-client

我已经使用 oauth2.0 获得了访问令牌。如何获取该用户的联系人列表。

任何人都可以粘贴一些示例代码或有关如何从 google plus API 获取联系人列表的任何建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T18:46:09.897

到目前为止，Google plus API 只出售公开暴露的用户数据。您将无法使用 Plus Scope 获取任何私有数据。您最好的选择是通过将其添加到您的范围来使用 google-contacts-api。

编辑：看起来谷歌现在发布了一个加号 API。请参考评论

# c# - Windows Phone 媒体元素错误 3123

> ID：10978250
> 
> 赞同：1
> 
> 时间：2012-06-11T10:19:21.150
> 
> 标签：c#, silverlight, windows-phone-7, mediaelement

我正在以编程方式在 wp7 应用程序中创建一个媒体元素，然后我将它作为一个孩子添加到一个可见的网格中。问题是我收到此错误消息（在 MediaFailed 事件处理程序内）“3123 发生错误。”。

这是使用的网址：[http](http://www.educationalquestions.com/video/ELL_PART_5_768k.wmv) ://www.educationalquestions.com/video/ELL_PART_5_768k.wmv 。

关于问题根源的任何想法（我有`ID_CAP_MEDIALIB`能力集以及`ID_CAP_NETWORKING`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-05T00:01:09.377

我在我的 WP8、Windows Phone 8 项目上遇到了同样的问题 - 这是由于我`ID_CAP_MEDIALIB_PLAYBACK`从 WMAppManifest.xml 文件中删除了该功能...

尽管我会将它附加到这种情况下，因为这是我发现此错误代码的第一个问题......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:26:26.087

当使用 mosync 创建 windows phone 应用程序时，在幕后初始化了几个模块：其中一个是使用 VideoBrush 的 CameraModule，其源是使用 PhotoCamera 设置的。因为 VideoBrush 基于 MediaElement 并且在 wp7 应用程序中只能使用一个 MediaElement，所以第二个（我的）不起作用。CameraModule 初始化中的解决方法解决了我的问题。

# firebug - OpenLayers 会在中心放置另一个标记，当没有询问时

> ID：10978253
> 
> 赞同：0
> 
> 时间：2012-06-11T10:19:34.400
> 
> 标签：firebug, openlayers, center, markers

我已经构建了一个地理编码器来放大到 nominatim 的边界框指定它的位置。它还在该点的中心放置了一个标记，以便人们可以看到街道的确切位置。

问题是当您在平移地图后放大或缩小另一个标记时，它会在中心再次创建另一个标记，该标记未在萤火虫中定义，它仍然说只有一个标记，这是正确的最后一次地理编码器搜索的位置。

我还记录了地理编码器功能，以查看在放大/缩小时是否调用了它，而事实并非如此。

这是地理编码器功能：

```
 codeAddressLocation: function(address) {    
    // street_number                    huisnummer
    // route                            straatnaam
    // locality                         plaatsnaam
    // administrative_area_level_2      gemeente
    // administrative_area_level_1      provincie
    // country                          land
    // postal_code_prefix               postcode (4 cijfers)
    if (address.length < 10)
        return;
    var site_points = new Array();
    var lon = '';
    var lat = '';
    input = address.replace(" ", "+");
    $.getJSON('http://nominatim.openstreetmap.org/search?q=' + input + '&format=json&addressdetails=1', function(data) {
        if (data != ""  ) {
            var bbox = '';
            $.each(data, function(key,value) {
                bbox = value.boundingbox;
            });
            var point = myLib.transform(bbox[0], bbox[2]);
            var point2 = myLib.transform(bbox[1], bbox[3]);
            if (tbMap.map.layers.length > 2 && tbMap.map.layers[2].CLASS_NAME == "OpenLayers.Layer.Markers") {
                var markerLayer = tbMap.map.layers[2];
                markerLayer.markers = new Array();
                var size = new OpenLayers.Size(21,35);
                var offset = new OpenLayers.Pixel(-(size.w/2), -size.h);
                var icon = new OpenLayers.Icon('http://clipartist.info/RSS/openclipart.org/2011/May/28-Saturday/squat_marker_purple-555px.png', size, offset);
                markerLayer.addMarker(new OpenLayers.Marker(tbMap.map.getCenter(),icon));
            } else {
                var markers = new OpenLayers.Layer.Markers("Markers");
                tbMap.map.addLayer(markers);
                var size = new OpenLayers.Size(21,35);
                var offset = new OpenLayers.Pixel(-(size.w/2), -size.h);
                var icon = new OpenLayers.Icon('http://clipartist.info/RSS/openclipart.org/2011/May/28-Saturday/squat_marker_purple-555px.png', size, offset);
                markers.addMarker(new OpenLayers.Marker(tbMap.map.getCenter(),icon));
            }

            // Zet de punten in een array
            site_points.push(point);
            site_points.push(point2);
            // return lonlat;
            var linear_ring = new OpenLayers.Geometry.LinearRing(site_points);
            tbMap.map.zoomToExtent(linear_ring.getBounds());
        }
    });
} 
```

它在这里被调用：

```
$('#autosuggest').click(function() {
  // two options 1) unchecking: remove all coordinateSensitive events
  //             2) checking: add coordinateSensitive events

  if(!$(this).prop('checked')) {
    $(".coordinateSensitive").unbind('keyup');
    $(".coordinateSensitive").unbind('blur');
  } else {
    tbGeocoder.codeAddressLocation($("#address").val() + '+' + $("#housenr").val() + '+' + $('#city').val());
    $('.coordinateSensitive').keyup( function() {
        getCoordinates($(this));
    });

    $('.coordinateSensitive').blur( function() {
        getCoordinates($(this));
    });
  }
});
function getCoordinates(field) {
  var input = $("#address").val() + '+' + $("#housenr").val() + '+' + $('#city').val();
  tbGeocoder.codeAddressLocation(input);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:05:10.730

我不得不将标记函数重写为一个单独的函数：故障出现在以下部分：markerLayer.markers = new Array();

这就是现在对我有用的方法：

```
var tbGeocoder = {
markers: null,
features: new Array(),

addMarker: function (lat, lng) {
    // Check of er al een marker is
    for (i = 0; i < tbMap.map.layers.length; i++) {
        if (tbMap.map.layers[i].CLASS_NAME == "OpenLayers.Layer.Markers") {
            tbMap.map.layers[i].clearMarkers();
        }
    }

    // Feature aanmaken
    var feature = new OpenLayers.Feature(this.markers, new OpenLayers.LonLat(lat, lng));
    var marker = feature.createMarker();

    // Markerlayer toevoegen en de marker toevoegen
    tbMap.map.addLayer(myLayers.markers);
    var layer = tbMap.map.layers.length - 1;
    tbMap.map.layers[layer].addMarker(marker);
    this.features.push(feature);
},
codeAddressLocation: function (address) {
    if (address.length < 10) return;
    var site_points = new Array();
    var lon = '';
    var lat = '';
    input = address.replace(" ", "+");
    $.getJSON('http://nominatim.openstreetmap.org/search?q=' + input + '&format=json&addressdetails=1', function (data) {
        if (data != "") {
            var bbox = '';

            // Haal de boundingbox op
            bbox = data[0].boundingbox;

            // Zet een marker in het midden van de map
            tbGeocoder.addMarker(tbMap.map.getCenter().lon, tbMap.map.getCenter().lat);

            // Maak een boundingbox voor de zoom
            var point = myLib.transform(bbox[0], bbox[2]);
            var point2 = myLib.transform(bbox[1], bbox[3]);

            // Zet de punten in een array
            site_points.push(point);
            site_points.push(point2);

            // Linear ring maken om een in een box te zoomen
            var linear_ring = new OpenLayers.Geometry.LinearRing(site_points);
            tbMap.map.zoomToExtent(linear_ring.getBounds());
        }
    });
}
}; 
```

# javascript - 动态更新网页上的图表

> ID：10978256
> 
> 赞同：1
> 
> 时间：2012-06-11T10:19:49.970
> 
> 标签：javascript, graph

我有一个页面，我定期从数据库中获取数据。该数据被描述为图表。在每个时期，我想用新数据更新图表。这意味着我不想替换旧图，而是扩展它。例如，我使用当前正在显示的折线图。当新数据进入时，我希望图表中的线条扩展以表示新数据，但之前的线条应该保持原样。哪个 JavaScript 图形 API 可以提供此功能？谷歌图表可以吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T18:31:34.387

好吧，不管你喜不喜欢，你都在编写一个实时 Web 应用程序进程：D

以下是您的解决方案：

***纯 JavaScript***

*   如果您想使用图书馆：

我强烈推荐使用[APE](http://www.ape-project.org/)库。正如我之前多次说过的，它是一个用于开发实时 Web 应用程序的强大框架。
另一个很好的解决方案是 HTML5 的 websockets。它很棒，但不是跨浏览器。

*   如果您不想使用图书馆：

您可以定期向您的服务器发送 AJAX 请求，以检查是否有任何更新可用于您的数据。

***使用第三方插件***

最简单和最常见的解决方案是 Adob​​e Flash 的`XMLSocket`API。
您也可以使用 Silverlight，但您知道，这不值得（我的意思是开发时间）。

* * *

**编辑：**

哦，差点忘了说，这种编程风格（在没有用户交互/意识的情况下更新数据）被称为[彗星编程](http://en.wikipedia.org/wiki/Comet_%28programming%29)，所以如果你需要一个关键字来进一步搜索这个主题，请使用这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T19:07:17.090

我同意 3p3r，并且可以详细说明库的实现。

您可能要记住的一个主题是数据绑定。这是 MVC 系统（如主干.js）常用的过程。这个概念是当检测到数据更改时，模型（数据）会自动更新到视图中。

数据绑定不仅在 MVC 中可用，它还可以在 ExtJS 等库的图形小部件中使用。使用库可以大大减少开发中的维护开销并避免常见的复杂情况。

其他可以轻松合并数据绑定过程的库有：D3、HighCharts 和 Raphael。

一切顺利！纳什

# git - 扩展 Git 功能

> ID：10978257
> 
> 赞同：24
> 
> 时间：2012-06-11T10:19:50.180
> 
> 标签：git

我想知道是否有一种简单的方法来扩展 Git 命令。

所以我可以创建如下命令：

```
git my-custom-made-extension --my-options <my-other-arguments> 
```

在一个完美的世界里，我可以用任何我喜欢的语言来完成它，并且我可以很容易地将我的定制扩展添加到任何开发环境中。

比方说，像Vim中对[插件的支持？](http://www.installationwiki.org/Installing_Vim_Scripts)

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-11T10:21:39.260

正如您[在源代码](https://github.com/git/git/blob/master/git.c)中看到的那样`execv_dashed_external`，如果您发出命令`git-my-custom-made-extension`，那么 git 将使用别名：

*   `git my-custom-made-extension ...`→`git-my-custom-made-extension ...`
*   `git help my-custom-made-extension`→`man git-my-custom-made-extension`

“扩展 git”没有什么特别之处。只需像往常一样构建一个程序，并确保名称以`git-`.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-11T10:19:50.647

## 现实生活中的例子

环顾四周，有很多扩展 Git 命令行的项目：

*   `git-wtf`（用 Ruby 编写）使用 brew 或手动安装将可执行文件放入`/usr/bin`（或者是`/usr/local`吗？）。并且似乎 Git 有一种机制，它知道当你编写`git wtf`它时，它实际上是在寻找 PATH 中名为`git-wtf`.
*   `git-annex`（用haskell写的）有更复杂的味道。但即使它使用 Cabal 进行安装（如果你没有它，它有很长的依赖项列表），它似乎使用与 git-wtf 相同的基本原理。（Git 会在您编写时在可执行路径中找到它`git annex`）
*   `git-flow`（用 shell 编写）使用 brew/macport/apt-get/wget+bash 自行安装。而且，它似乎再次使用了相同的机制。

## 解决方案 （？）

因此，当然可以编写自己的自定义脚本，然后通过将其放置在 PATH 变量中列出的任何路径中来使其可用。

但据我所知，有一些缺点......

## 已知的问题

### 文档

您并没有真正扩展 Git，因此某些命令不起作用：

```
$ git help wtf
No manual entry for git-wtf
$ git wtf --help
No manual entry for git-wtf
$ git wtf -h # the only command which works...
Usage: git wtf [branch+] [options]
... 
```

我没有在 git-annex 上尝试过，所以他们可能已经解决了这个问题，但是 git-flow 和 git-wtf 遵循这种行为。

**编辑**：`git help`回退到手册页，所以这一点有点不相关（Thx Eric）。

### 安装过程

Brew、macports 和 apt-get 的安装非常棒。但是没有全球公认的向 Git 添加功能的方式。更具体地说，您没有安装“插件”的平台独立方式。也许`make`会成功，但即便如此，您也必须自己编写安装脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T15:21:46.400

您可能想要手动或使用`git config`. [手册页](http://git-scm.com/docs/git-config)详细介绍了这一点。一个非常基本的例子是这样的：

```
git config --global alias.log1 "log --oneline" 
```

# machine-learning - Libsvm 预计算内核

> ID：10978261
> 
> 赞同：11
> 
> 时间：2012-06-11T10:19:57.990
> 
> 标签：machine-learning, scikit-learn, libsvm

我正在使用带有预计算内核的 libsvm。我为示例数据集 heart_scale 生成了一个预先计算的内核文件并执行了函数`svmtrain()`。它工作正常并且支持向量被正确识别，即类似于标准内核。

但是，当我尝试运行时`svmpredict()`，它为预先计算的模型文件提供了不同的结果。在挖掘代码后，我注意到该`svm_predict_values()`函数需要支持向量的实际特征，这在预计算模式下不可用。在预计算模式下，我们只有每个支持向量的系数和索引，这被误认为是它的特征`svmpredict()`。

这是一个问题还是我错过了什么。

（请让我知道如何`svmpredict()`在预计算模式下运行。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T21:36:29.297

测试集向量 x 和每个训练集向量之间的核评估值应用作测试集特征向量。

以下是 libsvm 自述文件中的相关行：

> xi 的新训练实例：
> <label> 0:i 1:K(xi,x1) ... L:K(xi,xL)
> 
> 任何 x: <label> 0:?的新测试实例 1:K(x,x1) ... L:K(x,xL)

libsvm 自述文件是说，如果你有 L 个训练集向量，其中 xi 是一个训练集向量，其中 i 来自 [1..L]，以及一个测试集向量 x，那么 x 的特征向量应该是

<x 的标签> 0:<任意数字> 1:K(x^{test},x1^{train}), 2:K(x^{test},x2^{train}) ... L:K (x^{test},xL^{train})

其中 K(u,v) 用于表示以向量 u 和 v 作为参数的核函数的输出。

我在下面包含了一些示例 python 代码。

原始特征向量表示和预计算（线性）内核的结果并不完全相同，但这可能是由于优化算法的差异。

```
from svmutil import *
import numpy as np

#original example
y, x = svm_read_problem('.../heart_scale')
m = svm_train(y[:200], x[:200], '-c 4')
p_label, p_acc, p_val = svm_predict(y[200:], x[200:], m)

##############
#train the SVM using a precomputed linear kernel

#create dense data
max_key=np.max([np.max(v.keys()) for v in x])
arr=np.zeros( (len(x),max_key) )

for row,vec in enumerate(x):
    for k,v in vec.iteritems():
        arr[row][k-1]=v
x=arr

#create a linear kernel matrix with the training data
K_train=np.zeros( (200,201) )
K_train[:,1:]=np.dot(x[:200],x[:200].T)
K_train[:,:1]=np.arange(200)[:,np.newaxis]+1

m = svm_train(y[:200], [list(row) for row in K_train], '-c 4 -t 4')

#create a linear kernel matrix for the test data
K_test=np.zeros( (len(x)-200,201) )
K_test[:,1:]=np.dot(x[200:],x[:200].T)
K_test[:,:1]=np.arange(len(x)-200)[:,np.newaxis]+1

p_label, p_acc, p_val = svm_predict(y[200:],[list(row) for row in K_test], m) 
```

# iis-5 - ASP.NET - 当前身份 (Machine\ASPNET) 没有对 'c:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files' 的写入权限

> ID：10978262
> 
> 赞同：-1
> 
> 时间：2012-06-11T10:20:01.297
> 
> 标签：iis-5

我在我的 Win XP 专业开发机器上遇到了这个问题。我的应用程序在虚拟目录上。

当前标识 (MachineName\ASPNET) 没有对“c:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files”的写入权限。

到目前为止，我已经完成了以下操作。

```
 1\. Must Not Use Simple File Sharing. After Changing Settings, Pls Reboot.

               Open your My Computer, the on menu, select Tool >> Folder Option the Select View Tab,

               Uncheck Use Simple File Sharing

  2  Adding User Permission

             When you create virtual directory on IIS, the actual folder you used with it must have access permission

             To do this, follow:

            select the properties of your actual folder, then select Sharing Tab
            select option Share This Folder
            specify the ShareName (commonly folder name itself)
            then select Security tab, you will see the Group and Username listed there.
            to add ASPNET just click ADD
            pop up window will appear "Select User or Group"
            Click Advance  and Click Find Now
            All Users and Group will be listed there, try to find ASPNET and select OK
            you will going to back on Security tab and select something like "RAD/ASPNET", under that you will see "Permission for ASP.NET"
            for the last step, check Full Control under Allow Column, then OK

3 I Have tried, the aspnet_regiis exe in the framework folder! 
```

仍然不起作用，请任何其他选项或建议..

**更新：我的硬盘已完全加密。它有什么影响吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:23:33.297

加密不应该影响。

尝试在文件 Windows 资源管理器中转到 C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files 并授予对 ASPNET 和网络帐户的所有访问权限。

# java - 代码中的小故障

> ID：10978264
> 
> 赞同：2
> 
> 时间：2012-06-11T10:20:14.620
> 
> 标签：java, swing, jfreechart, actionlistener, jfilechooser

**下面的代码用于创建折线图。我能够在 TextArea 中显示整数，但我无法在文本文件中显示整数上方的句子。我该如何纠正这个程序？**

文本文件的屏幕截图如下所示。

我希望文本文件的前三行也打印在 TextArea 中。

![在此处输入图像描述](../Images/85ae61e67fc60c5b603197057d894e55.png)

```
import java.awt.BorderLayout;   
import java.awt.Component;
import java.awt.GridLayout;
import java.awt.event.*;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import javax.swing.JButton;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.WindowConstants;
import org.jfree.chart.*;
import org.jfree.chart.plot.*;
import org.jfree.data.xy.*;

public class Pio {
  static JFrame frame1 = new JFrame("Graph");
      static String URL = null;
      static JTextArea txt = new JTextArea();
      static JPanel panel = new JPanel();
 public static void main(String[] args) throws IOException {

   JButton but = new JButton("Open file");

    ![enter image description here][2]

    panel.add(but);    

    frame1.add(panel, BorderLayout.WEST);

   frame1.setVisible(true);

frame1.setSize(1000,400);

    but.addActionListener(new ActionListener()

                        {

                         public void actionPerformed(ActionEvent e) 

                         {

                         JFileChooser chooser = new JFileChooser();

                         int ret = chooser.showDialog(null, "Open file");

                         if (ret == JFileChooser.APPROVE_OPTION)

                           {

                             File file = chooser.getSelectedFile();

                             URL = file.getAbsolutePath();

                           }

                         File f = new File(URL);

                            FileReader inputF = null;

                        try {

                    inputF = new FileReader(f);

                           }
                            catch (FileNotFoundException e1) {
                                                                e1.printStackTrace();

                                                 }

                            BufferedReader in = new BufferedReader(inputF);

                             int[] a = new int[100];

                                       int[] b = new int[100];

                                        String s=null;
                    try {

                                       s = in.readLine();

                                    } 

                                 catch (IOException e1) {

                                     e1.printStackTrace();

                                    }

                               int i = 0;

                             while (s != null && i < 100)

                                            { // your arrays can only hold 1000 ints

                                        String pair[] = s.split(" ");

                                        a[i] = Integer.parseInt(pair[0]);

                                        b[i] = Integer.parseInt(pair[1]);

                                            i++; // don't forget to increment

                                            try {

                                                s = in.readLine();

                                            }

                                          catch (IOException e1) {
                                                                                  e1.printStackTrace();
                                    }
                                }

                            try {

                                in.close();

                                    } 

                                      catch (IOException e1) {
                                                                           e1.printStackTrace();

                                }

                        System.out.println("the output of the file is " + f);

                            XYSeries data = new XYSeries("Line Graph");

                            int n = a.length;

                            for (int j = 0; j < n; j++) {

                                    data.add(a[j], b[j]);

                            }

                            XYDataset xY = new XYSeriesCollection(data);

                                 JFreeChart chart=ChartFactory.createXYLineChart(

                                      "line graph",

                                            "Cycles",

                                           "Temperature",

                                                xY,

                                           PlotOrientation.VERTICAL,

                                           true,

                                          true,

                                           true);

                               ChartPanel p=new ChartPanel(chart);

                                p.setVisible(true);

                                p.setLocation(100,100);

                                p.setSize(500,500);

                              frame1.add(p,BorderLayout.EAST);

                                         }
                        });
            }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T10:49:08.107

1.  什么都没有`JTextArea`，使用构造函数[JTextArea(int rows, int columns)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextArea.html#JTextArea%28int,%20int%29)

2.  put `JTextArea`to the `JScrollPane`, this `JScrollPane`put 或 the `EAST`or`WEST`区域

3.  放在或区域`JPanel`_ `JButton`_`SOUTH``NORTH`

4.  如果`ChartPanel`不返回任何`PrefferedSize`（我怀疑），或者此值不正确，则设置为 own `PrefferedSize`，放入`ChartPanel`该`CENTER`区域

5.  如您所见，任何有关的代码行`setSize`已`JFrame`在`BorderLayout`API中实现

6.  使用`pack()`而不是`setSize()`

7.  `setLocation()`如果需要

8.  （您的代码逻辑）中的最后一行`ActionListener`代码必须是

    框架.验证（）；frame.repaint(); 框架.pack();

9.  以这种形式（您的代码逻辑）`Swing GUI`在`FileIO`不负责任的情况下`Mouse and Key Events`，包装`FileIO`到`Runnable#Tread`或`SwingWorker`用于将这个漫长而艰巨的任务重定向到后台任务

10.  创建`ChartPanel`为局部变量 (as `JFram`e) 和`ActionListener`必须的第一行代码

.

```
frame.remove(ChartPanel); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T10:59:28.010

两个显示两个组件，您可以使用 JSplitPane。

将数据加载到数组中时，将其附加到 JTextArea（示例代码中的 area1）

```
final JTextArea area1 = new JTextArea();
...
area1.append("X=" + a[i] + " Y=" + b[i] + "\n"); 
```

然后，不要将图表添加到框架中，而是将图表和 TextArea 都添加到 JSplitPane

```
ChartPanel p = new ChartPanel(chart);
JSplitPane splitpane = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT);
frame1.add( splitpane , BorderLayout.CENTER );
splitpane.add(p);
splitpane.add(area1);
pane.validate();
frame1.validate();
frame1.repaint(); 
```

![使用中的 JSplitPane](../Images/9b01ac3cfbb541011791fd602dc8db3e.png)

附加数据的 JTextArea 使用

```
 area1.append("Creating a line graph\n");
  area1.append("Selected file " + f + "\n");
  while (s != null && i < 100) { // your arrays can only hold 1000 ints
    String pair[] = s.split(" ");
    try{
      a[i] = Integer.parseInt(pair[0]);
      b[i] = Integer.parseInt(pair[1]);
      area1.append("X=" + a[i] + " Y=" + b[i] + "\n");
    } catch (NumberFormatException e) {
       area1.append(s + "\n");
    }
    try {
      s = in.readLine();
      i++; // don't forget to increment
    } catch (IOException e1) {
      e1.printStackTrace();
    }
  }
  area1.append("Finished reading data\n");
  ... 
```

在此示例中，我假设标头将失败`parseInt`并且（如果确实如此）附加 String `s`。

![文本区域](../Images/340622bee3d98d7c153f2b8fd5887934.png)

# android - Android Phonegap 滑动类型

> ID：10978279
> 
> 赞同：3
> 
> 时间：2012-06-11T10:20:57.537
> 
> 标签：android, cordova

我正在 Android Phonegap 中开发一个应用程序。我需要在我的应用程序中应用 swype。如何申请？任何人都请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T19:44:24.587

您可以使用 jGestures jQuery 库 (http://jgestures.codeplex.com/)，或 jQuery mobile 或其他库来处理手势事件。

然后，如果你使用 jGestures，你会像这样 jQuery('#swipe').bind('swipedown',eventHandler);

我正在使用这个库，它处理手势的速度非常快。

您也可以下载仅用于触摸事件的解耦 jQuery Mobile 库。

# java - 我可以覆盖子类中的休眠注释映射吗？

> ID：10978281
> 
> 赞同：1
> 
> 时间：2012-06-11T10:20:59.117
> 
> 标签：java, hibernate

我有一个像这样的实体：

```
@Entity
@Table(name = "A")
@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)
Class A {
  private Set<B> setOfB;
  @ManyToMany
  public Set<B> getSetofB() {...};
 } 
```

现在我需要缓存`Set<B> setOfB`，但是我不能修改类`A`，但是我可以`A`在我的应用程序中子类和使用子类，是否可以在子类中添加
`@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)` for `Set<B>`？如果我直接在我的子类中添加它，它会给我一个错误说：

> org.hibernate.DuplicateMappingException：重复集合角色映射

我不知道我是否可以覆盖 Hibernate 中 sublcas 中成员的映射。

# twitter - “Sneak peak”推特账号是如何运作的？

> ID：10978282
> 
> 赞同：2
> 
> 时间：2012-06-11T10:21:12.457
> 
> 标签：twitter

因此，当我在 Failblog 上浪费时间时，我偶然发现了[这个 Twitter 帐户。](http://twitter.com/#!/StealthMountain)我对此非常感兴趣。它的工作方式是每当有人在推文中包含字符串“sneak peak”时，这个人就会发推文“我认为你的意思是“偷看”。正如我自己在推特上发布“Sneak peak”并在几秒钟内得到回复时发现的那样，它是自动化的：

![在此处输入图像描述](../Images/a58f0c831f512289d0d43e0895981622.png)

所以我的问题是，这是怎么做到的？

1.  当有人发布包含特定字符串的内容时，您能以某种方式收到通知吗？考虑到当有人在推特上发布您的用户名时已经发生了这种情况，因此在技术上是可行的。
2.  或者这个人是否有一台计算机一直在运行，每隔几秒就在 Twitter 上搜索字符串？
3.  或者两者都有可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:28:59.080

不确定 1)，但 2) 可以使用搜索 API 轻松管理：

[http://search.twitter.com/search.atom?q=sneak%20peak](http://search.twitter.com/search.atom?q=sneak%20peak)将为您提供最近包含“潜行高峰”的推文。（包括推文时间）

然后程序可以回复这些人，并保持推文的时间，以免向程序已经发推文的人发推文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T15:55:51.140

这几乎可以肯定使用[Twitter Streaming API](https://dev.twitter.com/docs/streaming-apis)。

> Twitter 提供的流式 API 集使开发人员可以低延迟地访问 Twitter 的全球推文数据流。流式客户端的正确实现将推送消息，指示推文和其他事件已发生，而不会产生与轮询 REST 端点相关的任何开销。

因此，某处有一台服务器不断流式传输 Twitter API，[并针对特定术语进行过滤](https://dev.twitter.com/docs/api/1/post/statuses/filter)。

每当服务器看到一条新推文通过流传输时，它就会自动发布响应。

所以，回答你的问题：

1) 是的。

2）是的，但它不是不断轮询，它是自动接收数据。

# javascript - iPad悬停/点击问题

> ID：10978288
> 
> 赞同：0
> 
> 时间：2012-06-11T10:21:24.997
> 
> 标签：javascript, iphone, ipad, safari, mobile-safari

我的 HTML 代码为；

```
<a href="someTarget.html" class="menuLink">Link</a> 
```

现在之前的 JS 代码是；

```
$(".menuLink").mouseover(function(){
    //code for show() submenu
}

$(".menuLink").mouseout(function(){
    //code for hide() submenu
} 
```

我正在 iPad 上对此进行测试，上面的代码在 iPad 上运行良好（即在第一次点击时，它会触发悬停事件并显示子菜单，并且只有在下一次点击时才会触发点击事件或转到目标链接）

出于某种原因（向主菜单添加延迟），我不得不按如下方式更新代码；

```
$this.hover(
    function(){ // over
        $this.data("timer", setTimeout(show, 500));
    },
    function(){ // out
        $this.data("timer", setTimeout(hide, 500));
    }
) 
```

所以问题如下；在第一次点击链接时，它会立即将用户带到目标 URL（而不是之前的 2 次点击以悬停/单击）

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:13:41.053

移动设备不支持鼠标悬停事件，也不支持双击事件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:31:54.963

jQuery[文档](http://api.jquery.com/hover/)说这`$(selector).hover(handlerIn, handlerOut)`只是使用`$(selector).mouseenter(handlerIn).mouseleave(handlerOut)`.

这意味着没有`mouseover()`/`mouseout()`事件绑定到该对象，并且移动浏览器可能无法正确处理其他 2 个事件（即`mouseenter()`/ `mouseleave()`）。

尝试将您的代码替换为：

```
$this.mouseover(function(){ // over
        $this.data("timer", setTimeout(show, 500));
    }).mouseout(function(){ // out
        $this.data("timer", setTimeout(hide, 500));
    }
) 
```

让我知道这是否有用。

# php - Symfony 管理生成器 - 显示 Doctrine Collection

> ID：10978292
> 
> 赞同：0
> 
> 时间：2012-06-11T10:21:31.060
> 
> 标签：php, symfony1, symfony-1.4

在我的模型中，我有：

```
 * @method Doctrine_Collection getComments() Returns the current record's "Comments" collection 
```

默认如果我生成管理员，那么这不会显示在列表中。如果在 generator.yml 中：

```
config:
  actions: ~
  fields:  ~
  list:    
    display: [id, title, comments]
  filter:  ~
  form:    ~
  edit:    ~
  new:     ~ 
```

然后这个给我看

```
<pre> Doctrine_Collection data : Array( ) </pre> 
```

而不是评论列表。

我知道 - 我可以从缓存中获取文件并显示这个，但也许这只有**generator.yml**才有可能？例如，如果我有一对多的关系，那么这会告诉我这个名字。

我不想为此使用缓存！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:51:13.083

除了显示计数之外，还有另一种方法。

您可以在 generator.yml 中添加一个部分：

```
 list:
    display: [id, description, public, _comments] 
```

然后在您的部分（`_comments.php`）中，您可以调用关系并显示您想要的任何内容（添加样式、其他信息等）：

```
<?php
  // note that you will need to change the $object
  echo $object->getComments()->count();
?> 
```

在另一种方式中，在编辑视图中列出所有评论可能很有用。在您的 generator.yml 中：

```
 form:
    # don't forget to add others fields
    display: [_comments] 
```

然后在你的部分：

```
<ul>
  <?php foreach($form->getObject()->getComments() as $comment): ?>
    <li><?php echo $comment->getBody() ?></li>
  <?php endforeach; ?>
</ul> 
```

如果你想将两者结合在同一个部分中（不要忘记重命名`$object`）：

```
<?php if(isset($form)): ?>

  <ul>
    <?php foreach($form->getObject()->getComments() as $comment): ?>
      <li><?php echo $comment->getBody() ?></li>
    <?php endforeach; ?>
  </ul>

<?php elseif(isset($object)): ?>

  <?php
    // note that you will need to change the $object
    echo $object->getComments()->count();
  ?>

<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T10:57:49.663

你可以使用一个函数来解决你的问题。

例如，在我的`generator.yml`

```
 list:    
    display: [id, description, public, nbQuestions] 
```

nbQuestions 是一个函数`Object.class.php`

```
public function getNbQuestions() {
    return $this->getQuestion()->count();
} 
```

管理生成器将自动调用对象类中的“getYouField”方法。因此，您可以描述一个为您的学说集合返回长字符串的函数。

# sql - 为每个用户 ORACLE 指定一些元素

> ID：10978295
> 
> 赞同：1
> 
> 时间：2012-06-11T10:21:35.310
> 
> 标签：sql, oracle

我有一个表格，其中包含每个用户的注释，如下所示：

```
user_id    note_id
-------    -------
      1       1232
      1       1246
      1       1223
      2       3342
      2       2134
      3       3212
      3       1243
    ...        ... 
```

现在我想实现一个排序机制，它允许用户以用户指定的方式排列这些注释，以便最终表格看起来像这样：

```
user_id    note_id  note_order
-------    -------  ----------
      1       1232          1
      1       1246          2
      1       1223          3
      2       3342          1
      2       2134          2
      3       3212          1
      3       1243          2
    ...        ...        ... 
```

当然，在添加此列之后，它具有 NULL 值，并且不允许我在数据库中创建更多序列。ORACLE 中有什么方法可以实现这个目标吗？

我希望 order 列中的值从 1 开始到每个用户的注释数，并且最好在一个更新语句中执行此操作。如果以这种方式不可能，那么 PL/SQL 循环的最佳构造是什么，或者有没有其他有效的方法可以做到这一点？

期待任何可能的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T10:23:38.940

您不需要存储此值，您可以在检索期间简单地生成它。

```
select user_id,
       note_id,
       row_number() over (partition by user_id order by note_id)
from your_table 
```

如果你真的需要更新表，你可以这样做：

```
merge into your_table ut
using (
  select rowid, 
         row_number() over (partition by user_id order by note_id) as rn
  from your_table
) t on (ut.rowid = t.rowid)
when matched then update
  set order_column = rn; 
```

请注意，您不能创建列`order`，因为这是保留字（实际上您可以使用双引号，但我强烈建议不要这样做）。

# php - silverstripe，如何使用 doPublish()

> ID：10978297
> 
> 赞同：1
> 
> 时间：2012-06-11T10:21:46.023
> 
> 标签：php, publishing, nested, silverstripe, data-objects

我正在与 SilverStripe 合作，并且正在制作新闻页面。我使用 DataObjectAsPage 模块（[http://www.ssbits.com/tutorials/2012/dataobject-as-pages-the-module/](http://www.ssbits.com/tutorials/2012/dataobject-as-pages-the-module/)），当我使用管理员发布新闻站点时，我得到了它的工作。现在我想使用 DataObjectManager 模块而不是管理模块来管理我的新闻项目。但这就是问题所在。在草稿模式下一切正常，我可以制作一个新的新闻站点，它会显示在草稿中。但是当我想发布一个新站点时，它不会以实时或发布模式出现。

我正在使用以下表：
-Dataobjectaspage 表、
-Dataobjectaspage_live 表、
-NewsArticle 表、
-NewsArticle_Live 表

文章已在 Dataobjectaspage 表和 NewsArticle 表中发布时插入...但不是在 _Live 表中...

似乎在“发布”时未使用 doPublish() 函数。所以我正在尝试使用以下内容：

```
function onAfterWrite() {
    parent::onAfterWrite();   
    DataObjectAsPage::doPublish();
} 
```

但是当我使用它时，它会出现错误： [这是这张图片](http://i.imgur.com/pSDtR.png)

它似乎处于一个循环中......我有 NewsArticle.php 文件，我在其中使用了这个函数：

```
 function onAfterWrite() {
    parent::onAfterWrite();   
    DataObjectAsPage::doPublish();
} 
```

此函数调用 DataObjectAsPage.php 文件并使用以下代码：

```
function doPublish() {
        if (!$this->canPublish()) return false;

        $original = Versioned::get_one_by_stage("DataObjectAsPage", "Live", "\"DataObjectAsPage\".\"ID\" = $this->ID");
        if(!$original) $original = new DataObjectAsPage();

        // Handle activities undertaken by decorators
        $this->invokeWithExtensions('onBeforePublish', $original);
        $this->Status = "Published";
        //$this->PublishedByID = Member::currentUser()->ID;
        $this->write();
        $this->publish("Stage", "Live");

        // Handle activities undertaken by decorators
        $this->invokeWithExtensions('onAfterPublish', $original);

        return true;
    } 
```

然后它转到 DataObject.php 文件并使用 write 函数（）：

```
public function write($showDebug = false, $forceInsert = false, $forceWrite = false, $writeComponents = false) {
    $firstWrite = false;
    $this->brokenOnWrite = true;
    $isNewRecord = false;

    if(self::get_validation_enabled()) {
        $valid = $this->validate();
        if(!$valid->valid()) {
            // Used by DODs to clean up after themselves, eg, Versioned
            $this->extend('onAfterSkippedWrite');
            throw new ValidationException($valid, "Validation error writing a $this->class object: " . $valid->message() . ".  Object not written.", E_USER_WARNING);
            return false;
        }
    }

    $this->onBeforeWrite();
    if($this->brokenOnWrite) {
        user_error("$this->class has a broken onBeforeWrite() function.  Make sure that you call parent::onBeforeWrite().", E_USER_ERROR);
    }

    // New record = everything has changed

    if(($this->ID && is_numeric($this->ID)) && !$forceInsert) {
        $dbCommand = 'update';

        // Update the changed array with references to changed obj-fields
        foreach($this->record as $k => $v) {
            if(is_object($v) && method_exists($v, 'isChanged') && $v->isChanged()) {
                $this->changed[$k] = true;
            }
        }

    } else{
        $dbCommand = 'insert';

        $this->changed = array();
        foreach($this->record as $k => $v) {
            $this->changed[$k] = 2;
        }

        $firstWrite = true;
    }

    // No changes made
    if($this->changed) {
        foreach($this->getClassAncestry() as $ancestor) {
            if(self::has_own_table($ancestor))
            $ancestry[] = $ancestor;
        }

        // Look for some changes to make
        if(!$forceInsert) unset($this->changed['ID']);

        $hasChanges = false;
        foreach($this->changed as $fieldName => $changed) {
            if($changed) {
                $hasChanges = true;
                break;
            }
        }

        if($hasChanges || $forceWrite || !$this->record['ID']) {

            // New records have their insert into the base data table done first, so that they can pass the
            // generated primary key on to the rest of the manipulation
            $baseTable = $ancestry[0];

            if((!isset($this->record['ID']) || !$this->record['ID']) && isset($ancestry[0])) {  

                DB::query("INSERT INTO \"{$baseTable}\" (\"Created\") VALUES (" . DB::getConn()->now() . ")");
                $this->record['ID'] = DB::getGeneratedID($baseTable);
                $this->changed['ID'] = 2;

                $isNewRecord = true;
            }

            // Divvy up field saving into a number of database manipulations
            $manipulation = array();
            if(isset($ancestry) && is_array($ancestry)) {
                foreach($ancestry as $idx => $class) {
                    $classSingleton = singleton($class);

                    foreach($this->record as $fieldName => $fieldValue) {
                        if(isset($this->changed[$fieldName]) && $this->changed[$fieldName] && $fieldType = $classSingleton->hasOwnTableDatabaseField($fieldName)) {
                            $fieldObj = $this->dbObject($fieldName);
                            if(!isset($manipulation[$class])) $manipulation[$class] = array();

                            // if database column doesn't correlate to a DBField instance...
                            if(!$fieldObj) {
                                $fieldObj = DBField::create('Varchar', $this->record[$fieldName], $fieldName);
                            }

                            // Both CompositeDBFields and regular fields need to be repopulated
                            $fieldObj->setValue($this->record[$fieldName], $this->record);

                            if($class != $baseTable || $fieldName!='ID')
                                $fieldObj->writeToManipulation($manipulation[$class]);
                        }
                    }

                    // Add the class name to the base object
                    if($idx == 0) {
                        $manipulation[$class]['fields']["LastEdited"] = "'".SS_Datetime::now()->Rfc2822()."'";
                        if($dbCommand == 'insert') {
                            $manipulation[$class]['fields']["Created"] = "'".SS_Datetime::now()->Rfc2822()."'";
                            //echo "<li>$this->class - " .get_class($this);
                            $manipulation[$class]['fields']["ClassName"] = "'$this->class'";
                        }
                    }

                    // In cases where there are no fields, this 'stub' will get picked up on
                    if(self::has_own_table($class)) {
                        $manipulation[$class]['command'] = $dbCommand;
                        $manipulation[$class]['id'] = $this->record['ID'];
                    } else {
                        unset($manipulation[$class]);
                    }
                }
            }
            $this->extend('augmentWrite', $manipulation);

            // New records have their insert into the base data table done first, so that they can pass the
            // generated ID on to the rest of the manipulation
            if(isset($isNewRecord) && $isNewRecord && isset($manipulation[$baseTable])) {
                $manipulation[$baseTable]['command'] = 'update';
            }

            DB::manipulate($manipulation);

            if(isset($isNewRecord) && $isNewRecord) {
                DataObjectLog::addedObject($this);
            } else {
                DataObjectLog::changedObject($this);
            }

            $this->onAfterWrite();

            $this->changed = null;
        } elseif ( $showDebug ) {
            echo "<b>Debug:</b> no changes for DataObject<br />";
            // Used by DODs to clean up after themselves, eg, Versioned
            $this->extend('onAfterSkippedWrite');
        }

        // Clears the cache for this object so get_one returns the correct object.
        $this->flushCache();

        if(!isset($this->record['Created'])) {
            $this->record['Created'] = SS_Datetime::now()->Rfc2822();
        }
        $this->record['LastEdited'] = SS_Datetime::now()->Rfc2822();
    } else {
        // Used by DODs to clean up after themselves, eg, Versioned
        $this->extend('onAfterSkippedWrite');
    }

    // Write ComponentSets as necessary
    if($writeComponents) {
        $this->writeComponents(true);
    }
    return $this->record['ID'];
} 
```

看看 $this->onAfterWrite();
它可能会转到我自己在 NewsArticle.php 上的函数，然后开始循环！不过我不确定，所以我需要一些帮助！！

有谁知道如何使用 doPublish() 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T10:08:50.450

发生这种情况的原因是在 DataObjectAsPage::publish() 方法中，它正在调用 ->write() - 第三个代码示例的第 11 行。

所以它会调用 ->write()，在 ->write() 结束时调用 onAfterWrite() 方法，该方法调用 publish()，然后再次调用 write()。

如果您删除已添加的 onAfterWrite() 函数，它应该会按预期工作。

DataObjectAsPage 上的 doPublish() 方法将为您处理从 Stage 到 Live 的发布。

# java-me - 如何从 pointerPressed() 方法显示新的 Canvas？

> ID：10978300
> 
> 赞同：1
> 
> 时间：2012-06-11T10:22:00.527
> 
> 标签：java-me, midp, lcdui

在画布上有一个图像，并且在图像的某些部分触摸，我希望从 pointerPressed() 方法中启动一个新的画布。

是否可以？到目前为止，我已经完成了以下工作：

```
 protected void pointerPressed(int x, int y){          
        if ((x>=164 && x<=173)&&(y>=24 && y<=36)){               
            disp.setCurrent(new elementDetails());
        }
    } 
```

课程如下：

```
//class to show detailed information of elements
class elementDetails extends Canvas{
    private Image elmDtlImg;
    public elementDetails(){
        try{
            elmDtlImg = Image.createImage("/details.jpg");
        }
        catch(IOException e){
            System.out.println("Couldn't load Detailed Info image" + e.getMessage());
        }               
    }

    public void paint(Graphics g){
        //set the drawing color to white
        g.setGrayScale(255);
        //draw a big white rectangle over the whole screen (over the previous screen)
        g.fillRect(0, 0, getWidth(), getHeight());
        g.drawImage(elmDtlImg, 0, 0, 20);
    }
} 
```

当我运行上面的代码时，什么也没有发生。我的意思是说当前图像不会更改为我试图在画布中显示的新图像。

我的应用程序在指针按下事件后继续运行。它不会崩溃。它正确地向我显示了图像其他部分的坐标。我想要实现的是；当我单击/触摸图像的某些特定点时，它应该加载一个新画布来代替旧画布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T05:56:30.757

***通过调用 Display.setCurrent() 方法使画布可见***。您可以***从 MIDlet 中检索 Display 并将其传递给您的画布***，然后使用它。我希望这段代码对您有所帮助：

//MIDlet:

```
public class MyMIDlet extends MIDlet{
    ...
    final Canvas1 c1;
    final elementDetails c2;
    ...
    public MyMIDlet(){
        c1 = new Canvas1(this);
        c2 = new elementDetails();
    }
    ...
} 
```

//画布1：

```
public class Canvas1 extends Canvas{
    MyMIDlet myMidlet;
    Display disp;

...
/**
*constructor
*/
public Canvas1(MyMIDlet myMidlet){
    this.MyMIDlet = myMidlet;
    disp = myMidlet.getDisplay();
}
...
public void paint(Graphics g){
    g.setColor(255,255,255);
    g.drawString("canvas1", 0, 0, 0);
}
...

protected void pointerPressed(int x, int y){          
    if ((x>=164 && x<=173)&&(y>=24 && y<=36)){               
        disp.setCurrent(myMidlet.c2);
}
} 
```

//显示元素详细信息的类

```
class elementDetails extends Canvas{
    private Image elmDtlImg;
    public elementDetails(){
        try{
            elmDtlImg = Image.createImage("/details.jpg");
        }
        catch(IOException e){
            System.out.println("Couldn't load Detailed Info image" + e.getMessage());
        }               
    }
public void paint(Graphics g){
    //set the drawing color to white
    g.setGrayScale(255);
    //draw a big white rectangle over the whole screen (over the previous screen)
    g.fillRect(0, 0, getWidth(), getHeight());
    g.drawImage(elmDtlImg, 0, 0, 20);
}
} 
```

# html - 字体在 PDF 和 HTML 中的显示方式不同

> ID：10978303
> 
> 赞同：2
> 
> 时间：2012-06-11T10:22:14.050
> 
> 标签：html, pdf, fonts, itextsharp

我目前正在开发一个将 HTML 转换为 PDF 的网络应用程序（我正在使用 iTextSharp 进行转换）。我注意到字体有问题。当我在 HTML 和 PDF 中生成 12px 的字体时，显示是不同的。PDF 中的字体看起来更大。

我希望 HTML 尽可能接近 PDF，有没有办法进行类似的显示？为什么 PDF 中的字体要大得多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:41:06.707

你有没有试过`.em`，`.pt`而不仅仅是`.px`

```
p{font-size:1em}
p{font-size:1pt}
p{font-size:1px} 
```

也尝试添加`line-spacing`. *iTextSharp*：_

```
styles.LoadTagStyle("span", "size", "1em");
styles.LoadTagStyle("span", "size", "1pt");
styles.LoadTagStyle("span", "size", "1px"); 
```

# c# - ASP NET c#在浏览器中单击后退按钮后禁用自动回发

> ID：10978304
> 
> 赞同：0
> 
> 时间：2012-06-11T10:22:15.070
> 
> 标签：c#, asp.net, autopostback, .net

我的 asp 页面中有一个列表框，当用户单击任何项​​目时，该页面将重定向到其他页面。为此，我使用了 SelectedIndexChanged 事件，但它没有触发，因此我将列表框的 autopostback 属性更改为 true。现在一切都很好，除了当我在浏览器中单击后退按钮时，它会重定向到第一页，而不是回到最后一页，因为列表框的选定索引。有什么建议么？谢谢，橡树

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:27:12.413

您应该验证`IsPostBack`页面的属性。如果`!IsPostBack`做你的工作。

# javascript - 在生成的 jpg 之上使用 CSS3 过滤器拍摄图像的快照

> ID：10978306
> 
> 赞同：1
> 
> 时间：2012-06-11T10:22:17.230
> 
> 标签：javascript, html, css

因此，我正在尝试使用`getusermedia()`API 从用户网络摄像头捕获快照。然后，我将 CSS3 过滤器添加到该快照中。

我想做的是将其保存为 jpg，其中包含我添加到该图像的所有样式。基本上是对该特定样式的 div/图像进行截图。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:45:55.310

我在我的一个项目上做过。但遗憾的是，您必须为此使用服务器端（我为此使用了php GD lib），只需转发用户添加到图片的所有设置并在服务器端执行相同操作。

[http://vintagejs.com/](http://vintagejs.com/)是一个很好的开源 (https://github.com/rendro/vintageJS) 项目，它可能以更好的方式做到了，但我不确定。

# algorithm - 如何找到多面体的边和面？

> ID：10978309
> 
> 赞同：3
> 
> 时间：2012-06-11T10:22:32.353
> 
> 标签：algorithm, math

我有一系列多面体顶点。如何：

1.  检查它是否是凸的？
2.  在凸的情况下找到它的边缘和面？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T11:10:04.913

Quickhull 算法适用于寻找 3D 点云的凸包。如果凸包包含数组中的所有点，那么您可以使用此点集构建凸多面体。

Quickhull 的正确实现还将找到生成的凸多面体的面

# javascript - 在自定义对象中实现事件

> ID：10978311
> 
> 赞同：11
> 
> 时间：2012-06-11T10:22:37.690
> 
> 标签：javascript, dom-events

我想要的是一个提供一些事件的自定义对象。例如：

```
var CustomObjectTextChangedEventName = 'textChanged';
var CustomObject = function () {
    var _this = this;
    var _text = "";

    _this.OnTextChanged = document.createEvent("Event");
    _this.OnTextChanged.initEvent(CustomObjectTextChangedEventName, true, false);

    _this.ChangeText = function (newText) {
        _text = newText;
        fireTextChanged();
    };

    function fireTextChanged() {
        _this.dispatchEvent(_this.OnTextChanged);
    }
} 
```

使用该事件的代码如下所示：

```
myCustomObject = new CustomObject();
myCustomObject.addEventListener(CustomObjectTextChangedEventName, handleTextChanged, false); 
```

如您所见...在JS中使用事件的默认方式，但我无法使其工作...

目前我的问题是我的对象没有实现`addEventListener`and `dispatchEvent`，但是这个函数通常是从“元素”实现的......

我可以以某种方式使它们可用还是我必须自己实现它们？我必须如何实施它们？

我必须实现自己的事件处理吗？（有一个处理程序的内部列表，一个“添加”和“删除”处理程序函数，并在我想触发事件时触发每个处理程序）？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-11T11:17:39.013

The `addEventListener` function is a method of `Element` class. One way is to make `CustomObject` inherit from `Element` like this:

```
CustomObject.prototype = Element.prototype; 
```

The problem is that `Element` class may have different implementations among different browsers. So for example firing events may not be easy (see [this post](https://stackoverflow.com/questions/2490825/how-to-trigger-event-in-javascript)).

So I advice doing this by yourself. It is not difficult, try something like this:

```
var CustomObject = function () {
    var _this = this;
    _this.events = {};

    _this.addEventListener = function(name, handler) {
        if (_this.events.hasOwnProperty(name))
            _this.events[name].push(handler);
        else
            _this.events[name] = [handler];
    };

    _this.removeEventListener = function(name, handler) {
        /* This is a bit tricky, because how would you identify functions?
           This simple solution should work if you pass THE SAME handler. */
        if (!_this.events.hasOwnProperty(name))
            return;

        var index = _this.events[name].indexOf(handler);
        if (index != -1)
            _this.events[name].splice(index, 1);
    };

    _this.fireEvent = function(name, args) {
        if (!_this.events.hasOwnProperty(name))
            return;

        if (!args || !args.length)
            args = [];

        var evs = _this.events[name], l = evs.length;
        for (var i = 0; i < l; i++) {
            evs[i].apply(null, args);
        }
    };
} 
```

Now using it is as simple as:

```
var co = new CustomObject();
co.addEventListener('textChange', function(name) {
    console.log(name); 
});
co.fireEvent('textChange', ['test']); 
```

This is a basic solution. You may want to alter it, but I think you should grasp the idea.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T11:33:20.607

我不确定是否 100%，但接下来是我对这个问题的旧研究的结果：

*   你不能以某种方式提供这个。
*   您可以简单地实现自己的逻辑。为此，您可以使用 MDN [element.removeEventListener](https://developer.mozilla.org/en/DOM/element.removeEventListener)文章中存在的代码，只需稍作改动。下面是来自 MDN 链接的复制\过去的代码：

* * *

```
// code source: MDN: https://developer.mozilla.org/en/DOM/element.removeEventListener
// without changes
if (!Element.prototype.addEventListener) {  
  var oListeners = {};  
  function runListeners(oEvent) {  
    if (!oEvent) { oEvent = window.event; }  
    for (var iLstId = 0, iElId = 0, oEvtListeners = oListeners[oEvent.type]; iElId < oEvtListeners.aEls.length; iElId++) {  
      if (oEvtListeners.aEls[iElId] === this) {  
        for (iLstId; iLstId < oEvtListeners.aEvts[iElId].length; iLstId++) { oEvtListeners.aEvts[iElId][iLstId].call(this, oEvent); }  
        break;  
      }  
    }  
  }  
  Element.prototype.addEventListener = function (sEventType, fListener /*, useCapture (will be ignored!) */) {  
    if (oListeners.hasOwnProperty(sEventType)) {  
      var oEvtListeners = oListeners[sEventType];  
      for (var nElIdx = -1, iElId = 0; iElId < oEvtListeners.aEls.length; iElId++) {  
        if (oEvtListeners.aEls[iElId] === this) { nElIdx = iElId; break; }  
      }  
      if (nElIdx === -1) {  
        oEvtListeners.aEls.push(this);  
        oEvtListeners.aEvts.push([fListener]);  
        this["on" + sEventType] = runListeners;  
      } else {  
        var aElListeners = oEvtListeners.aEvts[nElIdx];  
        if (this["on" + sEventType] !== runListeners) {  
          aElListeners.splice(0);  
          this["on" + sEventType] = runListeners;  
        }  
        for (var iLstId = 0; iLstId < aElListeners.length; iLstId++) {  
          if (aElListeners[iLstId] === fListener) { return; }  
        }       
        aElListeners.push(fListener);  
      }  
    } else {  
      oListeners[sEventType] = { aEls: [this], aEvts: [ [fListener] ] };  
      this["on" + sEventType] = runListeners;  
    }  
  };  
  Element.prototype.removeEventListener = function (sEventType, fListener /*, useCapture (will be ignored!) */) {  
    if (!oListeners.hasOwnProperty(sEventType)) { return; }  
    var oEvtListeners = oListeners[sEventType];  
    for (var nElIdx = -1, iElId = 0; iElId < oEvtListeners.aEls.length; iElId++) {  
      if (oEvtListeners.aEls[iElId] === this) { nElIdx = iElId; break; }  
    }  
    if (nElIdx === -1) { return; }  
    for (var iLstId = 0, aElListeners = oEvtListeners.aEvts[nElIdx]; iLstId < aElListeners.length; iLstId++) {  
      if (aElListeners[iLstId] === fListener) { aElListeners.splice(iLstId, 1); }  
    }  
  };  
} 
```

*   我认为您需要更改的只是替换`Element.prototype`为`CustomObject.prototype`. 为了支持`dispathEvent`您必须添加`CustomObject.prototype.dispatchEvent = runListener;`代码行。也可以更好地将这段代码包含在闭包函数中；

我没有在我的应用程序中对此进行测试，但也许这可以帮助你。

**更新：** 下一个链接指向包含`XObject()`支持事件添加/删除和调度事件的类的代码源。包括测试示例。所有代码均基于上述答案。 [http://jsfiddle.net/8jZrR/](http://jsfiddle.net/8jZrR/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T13:09:10.903

我已经使用来自怪异的代码改进了我的示例。我仍然会将事件处理部分提取到“基类”中......也许还有更多时间=）

还有一个使用 jQuery 的示例！

```
<!doctype html>
<html lang="en">
<head>    
    <title>Custom Events Test</title>    
    <meta charset="utf-8">    
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>    
    <script>
        /* jQuery

        var CustomObjectTextChangedEventName = 'textChanged';
        var CustomObject = function () {
            var _this = this;
            var _text = "";

            _this.ChangeText = function (newText) {
                _text = newText;
                fireTextChanged();
            };

            function fireTextChanged() {
                $(_this).trigger(CustomObjectTextChangedEventName, _text);
            }
        }

        var myCustomObject;
        $(document).ready(function () {
            myCustomObject = new CustomObject();
            $(myCustomObject).bind(CustomObjectTextChangedEventName, handleTextChanged);
        })

        function handleTextChanged(event, msg) {
            window.alert(msg);
        }

        function buttonClick() {
            var newText = document.getElementById('tbText').value;

            myCustomObject.ChangeText(newText);
        }

        */

        var CustomObjectTextChangedEventName = 'textChanged';
        var CustomObject = function (alias) {
            var _this = this;
            var _events = {};
            var _text = "";

            _this.Alias = alias;

            _this.OnTextChanged = document.createEvent("Event");
            _this.OnTextChanged.initEvent(CustomObjectTextChangedEventName, true, false);

            _this.ChangeText = function (newText) {
                var args = new TextChangedEventArgs();
                args.OldText = _text;
                args.NewText = newText;

                _text = newText;
                fireEvent(CustomObjectTextChangedEventName, args);
            };

            _this.addEventListener = function (name, handler) {
                if (_events.hasOwnProperty(name))
                    _events[name].push(handler);
                else
                    _events[name] = [handler];
            };

            _this.removeEventListener = function (name, handler) {
                /* This is a bit tricky, because how would you identify functions? 
                This simple solution should work if you pass THE SAME handler. */
                if (!_events.hasOwnProperty(name))
                    return;

                var index = _events[name].indexOf(handler);
                if (index != -1)
                    _events[name].splice(index, 1);
            };

            function fireEvent(name, args) {
                if (!_events.hasOwnProperty(name))
                    return;

                var evs = _events[name], l = evs.length;
                for (var i = 0; i < l; i++) {
                    evs[i](_this, args);
                }
            }
        }

        var TextChangedEventArgs = function () {
            var _this = this;

            _this.OldText = null;
            _this.NewText = null;
        }

        var myCustomObject;
        var myCustomObject2;
        window.onload = function () {
            myCustomObject = new CustomObject("myCustomObject");
            myCustomObject.addEventListener(CustomObjectTextChangedEventName, handleTextChanged);

            myCustomObject2 = new CustomObject("myCustomObject2");
            myCustomObject2.addEventListener(CustomObjectTextChangedEventName, handleTextChanged);
        };

        function handleTextChanged(sender, args) {
            window.alert('At ' + sender.Alias + ' from [' + args.OldText + '] to [' + args.NewText + ']');
        }

        function buttonClick() {
            var newText = document.getElementById('tbText').value;

            myCustomObject.ChangeText(newText);
        }

        function buttonClick2() {
            var newText = document.getElementById('tbText2').value;

            myCustomObject2.ChangeText(newText);
        }
    </script>
</head>
<body>
    <input type="text" id="tbText" />
    <input type="button" value="Change" onclick="buttonClick();" />

    <input type="text" id="tbText2" />
    <input type="button" value="Change" onclick="buttonClick2();" />
</body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-15T01:21:55.160

用法：[jsfiddle](https://jsfiddle.net/ha2z7wwa/7/ "jsfiddle")

这是一种幼稚的方法，但可能适用于某些应用程序：

```
CustomEventTarget.prototype = {

    'constructor': CustomEventTarget,

    on:   function( ev, el ) { this.eventTarget.addEventListener( ev, el ) },
    off:  function( ev, el ) { this.eventTarget.removeEventListener( ev, el ) },
    emit: function( ev ) { this.eventTarget.dispatchEvent( ev ) }

}

function CustomEventTarget() { this.eventTarget = new EventTarget } 
```

# blackberry - 如何以编程方式从另一个应用程序退出黑莓应用程序？

> ID：10978317
> 
> 赞同：0
> 
> 时间：2012-06-11T10:23:17.790
> 
> 标签：blackberry

如何以编程方式从另一个应用程序退出黑莓应用程序。

例如，在黑莓中，我安装了两个应用程序，而不是我需要从第一个应用程序退出第二个应用程序或从我的应用程序退出到另一个应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:18:15.860

`GlobalEventListener`恕我直言，最干净的方法是在要关闭的应用程序中实现接口。然后，从调用应用程序发送一个包含您自己的一些自定义代码的全局事件，并让监听应用程序以受控方式自行关闭。

例子：

在您要关闭的应用程序中：

```
 public class YourCustomApp extends UiApplication implements GlobalEventListener {
            public static final long PID = <unique id for your app here>;
            public static final int CLOSE_APP_CODE = <your code here>;

            public void eventOccurred(long pid, int msgCode, int data1, Object object0, Object object1) {
                if(pid == PID){
                    switch(msgCode){
                        case CLOSE_APP_CODE:
                            controlledClose(); //This method could be, System.exit(0) if no other action is required
                            break;
                    }
                }
            }

        } 
```

在调用应用程序中：

```
 ApplicationManager.getApplicationManager().postGlobalEvent(PID, CLOSE_APP_CODE, 0, null, null); 
```

在第二个代码片段中，您应该将 int 和 long 代码替换为正确的代码。调用应用程序应传递正确的值。您还可以将代码放在库中，让两个应用程序都使用那里的值。确保 PID 在系统范围内是唯一的，这样它就不会与系统中的其他应用程序发生冲突。一个好的做法是使用应用程序的完整包名，然后在 Eclipse 插件中右键单击 ->“将字符串转换为长字符串”。

更新：
hacky 方式：您可以尝试使用 EventInjection 从您的应用程序中注入可以关闭某个应用程序的组合键。例如，相机应用程序在按下 ESC 键时会自行关闭。所以我们可以尝试用这行来关闭它：

```
EventInjector.invokeEvent( new EventInjector.KeyCodeEvent(EventInjector.KeyCodeEvent.KEY_DOWN,Characters.ESCAPE, 0)); 
```

这种方法极其不可靠。有时，它不起作用，您可能需要通过`Thread.sleep`在每个注入事件后添加短调用来微调注入。或者您可能需要从 Ui 线程调用注入代码。

请记住为您的应用分配密钥注入的权限。

# android - 我如何在android中设置imageview运行时的样式

> ID：10978319
> 
> 赞同：1
> 
> 时间：2012-06-11T10:23:24.280
> 
> 标签：android, view

我可以设置这样的样式

```
ImageView
android:id="@+id/blah"
style="@style/mystyle"
/> 
```

但是有没有办法在运行时为视图设置样式？喜欢

```
ImageView iv = (ImageView)findViewById(...);
iv.setStyle(R.style.myotherstyle); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:27:17.693

没有 `setStyle()`方法，因为在视图初始化后您无法更改样式。

* * *

检查这个： [View.setStyle() 方法在哪里？](http://groups.google.com/group/android-developers/browse_thread/thread/88c53b8c790a750d)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T10:33:06.877

不，不幸的是，没有办法在运行时更改样式。您最好的选择是在运行时一次设置一个单独的属性（填充/边距/宽度/等）。

# .htaccess - 在 htaccess (mod_rewrite) 中传递的持久查询字符串

> ID：10978320
> 
> 赞同：0
> 
> 时间：2012-06-11T10:23:25.113
> 
> 标签：.htaccess, mod-rewrite, seo

我遇到的问题是查询字符串通过重定向持续存在。即，每当我尝试重定向类型的 URL 时

```
RewriteRule ^oldsite/product/productname.aspx http://subdomain.newsite.com/product [L,R=301] 
```

这完美地工作 - 没有问题。

但是，当我尝试使用任何带有查询字符串的东西时，例如：

```
RewriteRule ^oldsite/product/productname.aspx?=QUERYSTRING http://subdomain.newsite.com/product [L,R=301] 
```

重定向有效，但是当我使用标头检查器检查它时，我最终得到以下结果：

```
http://subdomain.newsite.com/product?=QUERYSTRING 
```

即 - 它从旧 URL 传递查询字符串，我不希望它传递。

我检查了一堆资源，但似乎找不到一个简单的解决方案。方参数括号中是否缺少我的标志？（对不起，如果我使用了错误的术语，mod_rewrite 的新手。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:08:33.540

如果你附加一个 ? 到您的目标 URL，查询字符串将从重定向中删除：

```
RewriteRule ^oldsite/product/productname.aspx http://subdomain.newsite.com/product? [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:13:45.193

是的，只要您没有对它进行任何修改（例如，新 URL 没有查询字符串），即使在重定向时，查询字符串也会自动复制到新 URL。

**例如：** `/register` -> --即使原始 URL 是;`/login.php?action=register`结果也始终是; **但是**对于->查询字符串总是会被复制过来，所以会变成.`/login.php?action=register``/register?say=bla-bla`**`/register``/login.php``/register?say=bla-bla``/login.php?say=bla-bla`**

 ****那么，需要做什么呢？**您需要提供一些查询字符串——在您的情况下，查询字符串应该为空。

**怎么做？**只需`?`在新 URL 的末尾添加：

```
RewriteRule ^oldsite/product/productname.aspx http://subdomain.newsite.com/product? [L,R=301] 
```**

# mysql - 如何使用 MySQL 将会话变量与 IN 子句一起使用？

> ID：10978321
> 
> 赞同：0
> 
> 时间：2012-06-11T10:23:26.743
> 
> 标签：mysql, variables, session-variables

我想知道会话变量如何`IN`使用 MySQL 处理子句。

我自己尝试过，但严重没有成功。

带有会话变量的查询

```
SET @concat_var := (SELECT GROUP_CONCAT(player_id) FROM tableB where id = 1);
// result 88,89
SELECT @concat_var;
SELECT player_id FROM tableA WHERE player_id IN (@concat_var); 
```

查询输出（*不准确*）

```
player_id 
88 
```

（*需要结果*）

```
player_id 
88 
89 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T17:43:17.880

`FIND_IN_SET()`是这个问题的答案

```
SET @concat_var := (SELECT GROUP_CONCAT(player_id) FROM tableB where id = 1);
SELECT @concat_var;
SELECT player_id FROM tableA WHERE FIND_IN_SET(player_id,@concat_var); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:27:11.370

据我所知，这是不可能的（**编辑**：事实证明@QueryMaster 能够证明它实际上是可能的，尽管使用 MySQL 专有扩展）按照您尝试的方式进行操作，因为`@concat_var`实际上的值是单个字符串，因此您的最后一个查询实际上等效于`SELECT player_id FROM tableA WHERE player_id IN ('88,89')`（MySQL 将`'88,89'`通过解析字符串的整数前缀来强制转换为数字上下文，因此`88`）。

但是，应该可以执行以下操作：

```
SELECT player_id
FROM tableA
WHERE player_id IN (
    SELECT player_id
    FROM tableB
    WHERE id = 1
) 
```

或几乎等效的（可能表现更好，因为它不涉及子查询）：

```
SELECT player_id
FROM tableA
JOIN tableB USING (player_id)
WHERE tableB.id = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T10:29:15.177

`@concat_var`包含字符串`'88,89'`。所以：

```
SELECT player_id FROM tableA WHERE player_id IN (@concat_var); 
```

正在执行：

```
SELECT player_id FROM tableA WHERE player_id IN ('88,89'); 
```

由于`player_id`是整数类型，MySQL 通过将字符串与浮点数[进行比较来执行查询：](http://dev.mysql.com/doc/en/type-conversion.html) `player_id`

```
SELECT player_id FROM tableA WHERE player_id IN (88.0); 
```

因此，这就是您看到报告的错误结果的原因。

您应该改为使用连接：

```
SELECT player_id FROM tableA JOIN tableB USING (player_id) WHERE tableB.id = 1; 
```

# facebook - Facebook 喜欢按钮会快速连续执行“喜欢”和“不喜欢”操作。脚本有时会给出“FB.init 已被调用”

> ID：10978322
> 
> 赞同：0
> 
> 时间：2012-06-11T10:23:28.063
> 
> 标签：facebook, button, joomla, facebook-like, addthis

就像标题用户一样，我的网站上的“赞”按钮无法正常工作。当他们点击时，起初该按钮似乎可以工作，但很快就会“未点击/不喜欢”。

这是一个示例链接：[http ://www.lostradone.it/archivio-news/47-politica/2843-schittulli-duro-con-la-politica-nazionale-abbiamo-solo-yes-men](http://www.lostradone.it/archivio-news/47-politica/2843-schittulli-duro-con-la-politica-nazionale-abbiamo-solo-yes-men)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T15:34:47.143

该问题与 Joomla 组件（系统语言）有关，该组件将错误的 url 传递给 Facebook Like 按钮，并添加了语言代码后缀。

当 facebook 尝试获取 url 时，会出现 404 错误，因此按钮无法正常工作。禁用语言插件后，按钮开始正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T17:02:08.250

当 Facebook 将您的网站放在某种索引上时，就会发生这种情况，这很可能是因为在短时间内有很多链接/不喜欢操作。

您可以等待它自行消失——但我发现通过 Facebook 帮助部分中的一些问题通知表发送消息有时会有所帮助（不要问我在哪里，四处看看）。通常你不会得到答案，但我已经做过两次了，两次错误都很快消失了……</p>

# php - 每个会话需要单个弹出窗口

> ID：10978324
> 
> 赞同：0
> 
> 时间：2012-06-11T10:23:35.737
> 
> 标签：php

无论访问了多少页面，我都希望弹出广告只对任何访问者显示一次。所以我使用了这段代码，但我发现这段代码会为每个访问的页面弹出一个新广告。我该如何纠正它？：

```
<?php if(!isset($_COOKIE['ad_zedo'])) {

 setcookie('ad_zedo',1);
?>
<script language="JavaScript">
var zflag_nid="1185"; var zflag_cid="3307"; var zflag_sid="823"; var zflag_width="1"; var zflag_height="1"; var zflag_sz="15";
</script>
<script language="JavaScript" src="http://d8.zedo.com/jsc/d8/fo.js"></script>

<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:26:54.917

cookie 即将到期，因为您尚未设置到期时间。设置到期时间，如：

```
setcookie('ad_zedo',1, time()+60*60*24*30); // 30 days 
```

从[手册](http://php.net/manual/en/function.setcookie.php)：

> **到期**
> 
> 如果设置为 0 或省略，cookie 将在会话结束时（浏览器关闭时）过期。

另外，不要忘记设置 cookie 会发送 HTTP 标头，因此在使用`setcookie()`.

* * *

您还可以将标志存储在 PHP 会话中而不是 cookie 中。这样做意味着弹出窗口将显示新的 PHP 会话何时启动（其到期时间由您的服务器配置定义）。

```
<?php if(!isset($_SESSION['ad_zedo'])) {

 $_SESSION['ad_zedo'] = true;
?> 
```

你需要`session_start()`在每一页上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:50:12.457

好的，正如 MrCode 已经说过的那样：您应该使用 Sessions，例如，您的代码将遵循 - 未经测试但应该做的事情......

```
<?php 
session_start();
if(!isset($_SESSION['ad_zedo'])) {
$_SESSION['ad_zedo'] = true;
?>
<script language="JavaScript">
var zflag_nid="1185"; var zflag_cid="3307"; var zflag_sid="823"; var zflag_width="1";      var zflag_height="1"; var zflag_sz="15";
</script>
<script language="JavaScript" src="http://d8.zedo.com/jsc/d8/fo.js"></script>

<?php
}
?> 
```

K 这应该有魔力;)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T10:55:11.920

在页面的开头调用 setcookie，在任何输出或标题发送到服务器之前，否则永远不会设置 cookie：

```
<?php 
    $showadzedo = false;
    if(!isset($_COOKIE['ad_zedo'])) { $showadzedo = true; setcookie('ad_zedo',1); } 
?>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>

[...]

<?php if($showadzedo) { ?>
    <script language="JavaScript">
    var zflag_nid="1185"; var zflag_cid="3307"; var zflag_sid="823"; var zflag_width="1"; var zflag_height="1"; var zflag_sz="15";
    </script>
    <script language="JavaScript" src="http://d8.zedo.com/jsc/d8/fo.js"></script>
<?php } ?> 
```

# java - 在 Java 中，“调用上下文”（以及其他一些术语）是什么意思？

> ID：10978329
> 
> 赞同：3
> 
> 时间：2012-06-11T10:24:00.983
> 
> 标签：java, static-analysis

我试图了解 Java 字节码/源代码的静态分析。

这些术语经常出现，我无法在 Internet 上找到令人满意的定义：

1.  上下文（非）敏感分析
2.  调用上下文
3.  主动呼叫站点
4.  点对点分析

任何人都可以用外行术语详细说明上述术语在 Java 上下文中的含义。在 Google 上搜索“上下文”“编程”会找到关于上下文相关语法、语言理论等的内容，但不是我需要的定义（除非它们的意思相同）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:06:16.480

*   **调用上下文**：在分析某个位置的代码时，直接（假定）调用者的代码或更一般地说，导致此的一组（假定）调用者的代码。

*   **主动呼叫站点**：专注于直接呼叫者的“呼叫上下文”的一种变体。

*   **上下文敏感分析**：在考虑特定调用上下文的代码位置对代码属性的分析。进行这种分析的原因是属性通常更加详细和精确。

*   **上下文不敏感分析**：对代码位置的分析，考虑到*所有*可能的调用上下文。这样做是因为它比上下文相关的分析更容易实现；它的缺点是答案通常不那么精确。

*   **指向分析**：为每个指针分配确定（从而访问和更新）程序中该指针可以选择的实体集的分析。通常，感兴趣的实体由代码中的一组分配点表示，例如，任何实体的分配都可能发生在堆上或局部块中的每个位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T16:27:18.707

指向分析（或 Java 上下文中的引用分析）将尝试在编译时推断指针在运行时可能指向的所有对象。这是合理的，但也是近似的。

A context-sensitive (CS) points-to analysis takes into account the calling context of a function while analyzing a function. For the program below, a CS points-to analysis can infer that x and z have different points-to information, i.e., they point to different objects, if y and w point to different objects.

```
main() {
    x = foo(y);
    z = foo(w);
}

foo (a) {
    return a;
} 
```

In contrast, a context-insensitive (CI) analysis would not distinguish between the calling contexts and (imprecisely, but soundly) infer that x and z may alias (or may point to the same object).

Calling context is a sequence of call-sites in which the current (invocation of current) function appears. In the example, foo has two calling contexts, one at the first call-site from main and the second at line 2 of main. Active call-site is the one which you are analyzing.

# javascript - 如何在html页面的head部分动态调用css路径

> ID：10978332
> 
> 赞同：0
> 
> 时间：2012-06-11T10:24:08.140
> 
> 标签：javascript, css

我想要 HTMl 页面头部的 css 路径，路径应该来自外部 JS 文件，因为我想添加多个 no。的CSS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:27:09.927

```
function addCSS() {
        var headtg = document.getElementsByTagName('head')[0];
        if (!headtg) {
            return;
        }
        var linktg = document.createElement('link');
        linktg.type = 'text/css';
        linktg.rel = 'stylesheet';
        linktg.href = 'CSS/RoundCorners.css';
        linktg.title = 'Rounded Corners';
        headtg.appendChild(linktg);
    } 
```

来源： http: [//www.devcurry.com/2009/07/how-to-add-css-link-programmatically.html](http://www.devcurry.com/2009/07/how-to-add-css-link-programmatically.html)

# java - 无法同时发送 ListBox 和文件

> ID：10978335
> 
> 赞同：1
> 
> 时间：2012-06-11T10:24:19.630
> 
> 标签：java, gwt, servlets, gwt2, formpanel

嗨，我正在使用 GWT 使用 servlet 发送文件。

最初我试图只向服务器发送文件。那工作得很好。

现在在 af ormPanel 中，我添加了 3 个列表框。

```
private ListBox propertyNamelist = getListBox("propertyName");
    private ListBox propertyTypeList = getListBox("propertyType");
    private ListBox propertyValueList = getListBox("propertyValue");

private ListBox getListBox(String name){

            listbox = new ListBox();
            listbox.setName(name);

        return listbox;
    } 
```

然后将其添加到 FormPanel。

```
formPanel.setWidget(propertyNamelist);
formPanel.setWidget(propertyTypeList);
formPanel.setWidget(propertyValueList);
formPanel.submit(); 
```

**在服务器端。**

```
try {

        ServletFileUpload upload = new ServletFileUpload();

        FileItemIterator iterator = upload.getItemIterator(request);
        while (iterator.hasNext()) {
            FileItemStream item = iterator.next();
             stream = item.openStream();

            if (item.isFormField()) {
                log.warning("Got a form field: " + item.getFieldName());
                System.out.println(" chk fg " +item.getFieldName() +"  =  "+ Streams.asString(item.openStream()));

            } else {

                log.warning("Got an uploaded file: " + item.getFieldName()
                        + ", name = " + item.getName());
                fileName = item.getName();
                mimetype = item.getContentType();

            }
        }

    }catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

输出 ：

```
WARNING: Got a form field: propertyValue
Jun 11, 2012 11:37:55 AM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: /UploadFileServlet: org.apache.commons.fileupload.FileItemStream$ItemSkippedException
 chk fg propertyValue  =  motivation 
```

根据我的动机是 listbox 的第一个值`PropertyValue`，其中列表框中的值更多。

并且应该显示更多的列表框。

我无法理解这正在发生。

**注意：**我无法通过 RPC 发送列表框，因为这些列表框与要发送到服务器和服务器到外部存储库的文件相关。

有人请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:44:14.350

正如它的名字所暗示`setWidget`的那样，它`FormPanel`替换了`FormPanel`小部件的内容。

您想将多个小部件放入`FormPanel`中，因此请使用中间容器（例如 a `FlowPanel`）将您的小部件放入：

```
// put all widgets together in some container (you can have a more complex layout)
FlowPanel container = new FlowPanel();
container.add(fileUpload);
container.add(propertyNameList);
container.add(propertyTypeList);
container.add(propertyValueList);

// set the container as the content of the form, so named form widgets will get
// their value sent to the server.
formPanel.setWidget(container); 
```

# java - 我应该使用大写命名来声明 java 常量变量吗？

> ID：10978338
> 
> 赞同：11
> 
> 时间：2012-06-11T10:24:27.353
> 
> 标签：java, eclipse, coding-style, naming-conventions

我的问题：常量 Java 变量（在方法内）的名称应该大写吗？

我一直觉得

a）如果一个变量永远不会改变，它应该被声明为final（以显示/强制它不会改变）b）它应该以大写命名

但是，我在 Eclipse 中注意到，当将变量（在方法内）更改为最终/常量时，随后将其重构/重命名为如下所示：

```
final int NODE_COUNT = 3; 
```

我收到以下警告：

> 不鼓励使用此名称。按照惯例，局部变量的名称应该以小写字母开头。

这让我想知道大写规则是否不适用于这种情况（即方法中的最终变量）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T10:32:01.140

在方法中没有常量，只有局部变量，可以是`final`. 因此，使用以小写开头的普通 camelCase 非常适合那里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T10:27:03.523

类常量也应该是`static`（使它们成为类级别而不是实例级别），在这种情况下，Eclipse 不会警告您使用大写字母。

不过，方法常量应该有以小写字母开头的标识符，所以我同意你的结论。

# php - PHP 获取/发布保护（wordpress）

> ID：10978340
> 
> 赞同：-2
> 
> 时间：2012-06-11T10:24:52.027
> 
> 标签：php, post, get, protection

我有这个功能代码来尝试为 GET 获得更多保护。

（例如`index.php?name=eval(base64_decode(EVIL+CODE))`）

```
global $user_ID; 

    if($user_ID) {
                if(!current_user_can('administrator')) {
                        if (strlen($_SERVER['REQUEST_URI']) > 255 ||
                                stripos($_SERVER['REQUEST_URI'], "eval(") ||
                                stripos($_SERVER['REQUEST_URI'], "CONCAT") ||
                                stripos($_SERVER['REQUEST_URI'], "UNION+SELECT") ||
                                stripos($_SERVER['REQUEST_URI'], "base64")) {
                                        @header("HTTP/1.1 414 Request-URI Too Long");
                                        @header("Status: 414 Request-URI Too Long");
                                        @header("Connection: Close");
                                        @exit;
                        }
                }
        } 
```

我可以添加什么来帮助保护 POST ？（尽可能多地 - 不可能完全密封 - 我知道）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:15:58.623

不是一个真正的答案，但评论的信息太多了。

我将根据您的[最后评论](https://stackoverflow.com/questions/10978340/php-get-post-protection-wordpress#comment14356679_10978340)在这里写下我的答案：

> @PeeHaa 我知道他们老了。我知道一些漏洞已经修复。我正在运行 200 多个站点，其中一些可以追溯到 2008 年并使用插件或片段。（如 phpthumb（旧版本））不太安全。对不起，我不明白为什么这个问题是一个糟糕的问题——因为方法/代码不好，或者因为为 get/post 添加新的安全层的想法太糟糕了？如果是代码，那么请有人教我如何正确地做到这一点，如果这个想法太可怕了-请解释原因。我现在所得到的只是反对票:-)

那个代码是非常可怕的 imo，不应该是你应该使用的东西。只有在评论中您才注意到您想要保护 WP 安装的事实。这是您的问题/标签中缺少的一条非常重要的信息。

无论如何，如上所述，代码非常可怕，但由于我从未使用过 WP（对于可怕的代码问题），我不会评判。但我会告诉你我认为该代码有什么不好的地方：

```
global $user_ID; 
```

使用`global`关键字是一个坏习惯恕我直言。如有可能，请记住新代码。现在该`if`声明：

我不知道`strlen($_SERVER['REQUEST_URI']) > 255`应该防止什么，但这可能是 WP 或某些插件在某些时候搞砸的事实。

```
stripos($_SERVER['REQUEST_URI'], "eval(") 
```

上面看起来并不奇怪，因为只有当你执行来自客户端的代码时才会出现问题（这是你永远不会做的事情（除非你使用了一些非常错误的 WP 插件））~~，但这也只是完全错误。`stripos()`也可能返回`0`，这将是虚假的。所以那个检查**可能**没用。我对wordpress的了解不够，也不知道这样的事情是否可行：~~

 ~~```
http://your-domain/eval(insert malicious code here) 
```~~ 

~~`REQUEST_URI`总是以`/`. 关于那些错误被抑制的标题的最后一件事。我怀疑当[标头已经发送](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)时它可以防止错误。在这种情况下会发生什么。检查是否仍然有效。~~

 ~~您可以做的最好的事情是升级 WP 和插件或摆脱烂插件。那将是理想的。但是，正如您所说，您有 200 次安装，这可能在短期内无法完成。因此，您可能必须对确实像这样的代码进行排序以“修复”任何问题。

为了在未来获得更好的答案，您可能会考虑在您的问题中提供更多详细信息（例如，您正在尝试预防 WP 安装的事实）。我也认为这仍然是一个非常广泛的问题。通常最好问一个*具体*的问题。~~

# ios - 用于 iCloud 的大量 UIDocuments

> ID：10978341
> 
> 赞同：2
> 
> 时间：2012-06-11T10:24:52.550
> 
> 标签：ios, memory-management, synchronization, icloud, uidocument

我有一个带有 iCloud 同步的项目，但它根本无法正常工作。首先，我得到一组更改的对象，然后将它们转换为 CSV 字符串（这将是云中 UIDocuments 的内容），然后将它们上传到 iCLoud。如果我有少于 400 个对象，一切都很好，但如果我有更多 - 应用程序挂起。

我尝试使用本地自动释放池，我已将大数组拆分为较小的数组。但这没有帮助。

将大量 UIDocuments 上传到 iCloud 的最佳方式是什么？我的上传方法：

```
- (void)pushChangesToCloud:(NSArray *)changedObjects {

    for (ObjectClass *someObject in changedObjects) {
        NSURL *pathToSyncDoc = [[self urlForDocumentsFolderIniCloud] URLByAppendingPathComponent:someObject.name];

        CustomUIDocument *syncDoc = [[[CustomUIDocument alloc] initWithFileURL:pathToSyncDoc] autorelease];
        //   converting object to CSV string
        NSString *csvContents = [SomeClass convertObjectToCSV:someObject];      
        syncDoc.documentContent = csvContents;

        [syncDoc saveToURL:[syncDoc fileURL] 
          forSaveOperation:UIDocumentSaveForCreating 
         completionHandler:^(BOOL success) {
             if (success) {
                 NSLog(@"YAY!");
             } else {
                 NSLog(@" D: "); 
             }
         }];
    }
} 
```

在此先感谢并为我的英语感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:32:09.550

感谢@Eimantas 的帮助，我终于找到了我的问题。他对超载队列的看法是正确的。由于“saveToUrl:forSaveOperation:completionHandler:”是 i/o 操作，队列创建了很多线程（对于每个 UIDocument）并且应用程序挂起。

我在自定义 UIDocument 中重载了“saveToUrl:forSaveOperation:completionHandler:”方法（以避免在并发线程中保存文档）：

```
- (void)saveToURL:(NSURL *)url forSaveOperation:(UIDocumentSaveOperation)saveOperation completionHandler:(void (^)(BOOL))completionHandler {
NSError *contentsError = nil;
NSError *attributesError = nil;
NSError *savingError = nil;

[self writeContents:[self contentsForType:self.fileType error:&contentsError] andAttributes:[self fileAttributesToWriteToURL:url forSaveOperation:saveOperation error:&attributesError] safelyToURL:url forSaveOperation:saveOperation error:&savingError];

NSLog(@"SAVING ERRORS: contents error - %@, attributes error - %@, saving error - %@",[contentsError localizedDescription],  [attributesError localizedDescription], [savingError localizedDescription]);
} 
```

然后我使用自己的串行队列来执行所有保存操作。首先，您需要像 iVar 一样添加它：

```
dispatch_queue_t mySerialQueue; 
```

然后在 init 方法中创建它：

```
myCustomQueue = dispatch_queue_create("com.whatever.MyAwesomeQueue", DISPATCH_QUEUE_SERIAL); 
```

用它来保存：

```
dispatch_async(mySyncQueue, ^{
    // do saving stuff
}); 
```

然后在 dealloc 中释放它：

```
dispatch_release(mySyncQueue); 
```

在此更改后，我没有任何问题。

希望这可以帮助！（对不起我的英语：>）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-26T19:48:11.483

Dmitry，您覆盖 saveToURL: 的方式是不安全的。UIDocument saveToURL 的默认实现将使用文件协调来确保无处不在的守护进程知道您在写入磁盘的内容和时间。您的实现不进行文件协调，除非您在 writeContents:, 中进行文件协调（您不应该这样做）。

请参阅 UIDocument 的 saveToURL 文档的讨论部分：[https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIDocument_Class/UIDocument/UIDocument.html#//apple_ref/occ/instm/UIDocument/saveToURL： forSaveOperation:completionHandler](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIDocument_Class/UIDocument/UIDocument.html#//apple_ref/occ/instm/UIDocument/saveToURL:forSaveOperation:completionHandler) :

# java - 线程“主”java.security.AccessControlException 中的异常：访问被拒绝（java.util.PropertyPermission * 读、写）

> ID：10978343
> 
> 赞同：6
> 
> 时间：2012-06-11T10:24:57.320
> 
> 标签：java, exception

我正在尝试运行在 java rmi 中开发的桌面应用程序。当我尝试在 Eclipse 中执行此应用程序时，出现以下错误。请任何人帮助我提前谢谢。

```
Exception in thread "main" java.security.AccessControlException: access denied (java.util.PropertyPermission * read,write)
    at java.security.AccessControlContext.checkPermission(Unknown Source)
    at java.security.AccessController.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkPropertiesAccess(Unknown Source)
    at java.lang.System.getProperties(Unknown Source)
    at .HeadOfficeManager.Manager.main(Manager.java:103) 
```

这是代码。

```
public static void main(String args[])
{
    Manager frame = new Manager();
    frame.setVisible(true);
    // frame.show(); old 1.4

    // Create and install a security manager
    if (System.getSecurityManager()== null)
    {
        System.setSecurityManager(new RMISecurityManager());
    }
    try
    {
        Properties prop = System.getProperties();
        String httpPath = prop.getProperty("HTTPPath");
        new ClassFileServer(80, httpPath);
    }
    catch (IOException e)
    {}

    try
    {
        java.rmi.registry.LocateRegistry.createRegistry(1099);
        System.out.println("RMI registry ready.");
    }
    catch (Exception e)
    {
        System.out.println("Exception starting RMI registry:");
        e.printStackTrace();
    }
    try
    {
        RMIHandler = new ManagerRMIHandler();

        // Bind the remote object's stub in the registry
        Registry registry = LocateRegistry.getRegistry();
        registry.rebind("HeadOfficeManager", RMIHandler);

        System.err.println("Server ready");
    }
    catch (Exception e)
    {
        System.err.println("Server exception: " + e.toString());
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-12T12:22:43.577

1.  右键单击eclipse中的应用程序，然后单击运行配置。
2.  将虚拟机参数添加为 `-Djava.security.policy =java.policy.applet`.
3.  创建一个文件，命名为`java.policy.applet`.
4.  在该文件中添加以下行。

    ```
    grant  
    {  
        permission java.security.AllPermission;  
    }; 
    ```

5.  保存并运行应用程序。

这将为您的 Java 应用程序提供所有安全权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T11:00:43.317

你已经安装了一个 SecurityManager，但你没有在你的 .policy 文件中给自己足够的权限来执行你的代码。异常告诉您缺少哪些权限，但可能还有更多。使用 -Djava.security.debug=access,failure 运行您的应用程序以查看还有哪些其他安全问题。

但这里真正的问题是为什么是安全经理？如果您正在使用 RMI 代码库功能，则从 RMI 的角度来看，您只需要在 RMI 服务器中使用它。否则你应该考虑删除它。

此外，您必须将结果存储在`createRegistry`不会被垃圾收集的地方，例如静态变量中。一旦你这样做了，这个`getRegistry()`电话就是多余的。

# c# - 在 ASP.NET 中的页面重定向之前执行长时间运行的方法

> ID：10978344
> 
> 赞同：3
> 
> 时间：2012-06-11T10:25:02.387
> 
> 标签：c#, asp.net, multithreading

我有一种数据密集型方法，可能需要几分钟。这是一些代码：

```
Data.Common.Documents.Regenerate();
Response.Redirect("~/Members/ManageDocs.aspx"); 
```

在后台线程中执行此方法的最简单方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T10:33:33.627

请注意，如果您的应用程序域被 IIS 回收，您将丢失线程及其相关的所有内容。但是，如果您对此感到满意，则可以使用[TPL (.NET 4)](http://msdn.microsoft.com/en-us/library/dd460717.aspx)：

```
Task.Factory.StartNew(() => Data.Common.Documents.Regenerate()); 
```

那是假设您不必等待完成，因为在这种特殊情况下，这会破坏后台处理的意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T10:36:05.863

如果需要很长时间，请不要在 asp.net 中执行此操作。将处理移至 Windows 服务或计划作业。Asp.net 不是为长时间运行的作业而设计的。

如果你必须使用 asp.net；您可以将代码重构为 Redirect without a `ThreadAbortException`，刷新输出，然后继续执行此操作

```
Response.Redirect("~/Members/ManageDocs.aspx", false);
Response.Flush();
Data.Common.Documents.Regenerate(); 
```

# java - File#delete 不删除文件

> ID：10978349
> 
> 赞同：0
> 
> 时间：2012-06-11T10:25:07.727
> 
> 标签：java, io

我需要删除一个包含一些文件的目录。我正在使用以下代码：

```
public static void delete(File f) {
  if (f.isDirectory()) {
    for (File c : f.listFiles()) {
      delete(c);
    }
  }
  f.setWritable(true);
  f.delete();
} 
```

由于某种原因，目录中的某些文件，因此该目录不会被删除。这种行为的可能原因是什么，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:28:18.973

假设您对该目录具有写入权限，则可能是该文件在某处打开。尝试删除未正确关闭的文件是导致奇怪的删除失败的常见原因。程序存在后，您发现可以删除该文件。

# wpf - 棱镜错误：区域管理器不包含该区域

> ID：10978352
> 
> 赞同：0
> 
> 时间：2012-06-11T10:25:18.217
> 
> 标签：wpf, prism

我正在使用 prism 4 框架开发 WPF 桌面应用程序。在我的应用程序中，我显示了一个员工列表，当从列表中选择一个时，所选员工的详细信息显示在详细信息区域中。在用于响应员工选择事件的控制器中，我有以下代码用于注入 EmployeeDetailsVeiw。

```
 IRegion employeeDetailsVeiwRegion = this.regionManager.Regions["EmployeeDetailsVeiwRegion"];
    EmployeeDetailsView view = employeeDetailsVeiwRegion.GetView("EmployeeDetailsVeiw") as EmployeeDetailsView;
    if(view == null)
    {
        view = this.container.Resolve<EmployeeDetailsView>();
        employeeDetailsVeiwRegion.Add(view, "EmployeeDetailsVeiw");
    } 
```

我已将该区域定义为

```
 <ContentControl Name="EmployeeDetailsVeiwRegion" Margin="16" Grid.Row="1"
              prism:RegionManager.RegionName="EmployeeDetailsVeiwRegion"/> 
```

但是当我运行代码时，我不断收到错误

```
 The region manager does not contain the EmployeeDetailsVeiwRegion region 
```

## 尝试的解决方案

我已经尝试了其他堆栈中提出的解决方案，而不是犁帖子，例如这里[的链接](https://stackoverflow.com/a/2163627/1047522)和其他帖子，但它对我不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T23:48:11.053

终于让它工作了。我在 ContentControl 上设置了区域管理器，该区域管理器包含我的演示者类（在我的情况下为 EmployeePage）承包商中的区域。

```
IRegionManager regionManager = ServiceLocator.Current.GetInstance<IRegionManager>();
regionManager.Regions.Remove("EmployeeDetailsViewRegion");
RegionManager.SetRegionManager(this.EmployeeDetailsContentControl, regionManager); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-11T14:59:49.303

尝试：

```
this.regionManager.RegisterViewWithRegion("EmployeeDetailsVeiwRegion",
    typeof(EmployeeDetailsView)); 
```

# google-app-engine - 带有 Eclipse 的 Google App Engine 使用 Google Datastore

> ID：10978353
> 
> 赞同：1
> 
> 时间：2012-06-11T10:25:18.670
> 
> 标签：google-app-engine, google-cloud-datastore, gwt-rpc

我已经使用 JDO 将我的数据存储在 Google Datastore 上，用于使用 GWT 使用 Eclipse 用 Ja​​va 编写的应用程序。它使 GWT RPC 调用以下服务功能：

```
 public String greetServer(String mail,String pass) 
{
    User e;
    PersistenceManager pm1 =JDOHelper.getPersistenceManagerFactory().getPersistenceManager();
    try
    {
        e = pm1.getObjectById(User.class, mail);
    }finally {
        pm1.close();
    }
    if(e.getPassword()==pass)
    {
    return "valid";
    }
    else
        return "invalid";

}
public String UserRegister(String data[])
{

    PersistenceManager pm2 = JDOHelper.getPersistenceManagerFactory().getPersistenceManager();
     Date d1=new Date();
     User u1=new User(data[0],data[1],data[2],data[3],d1);

    try {
        pm2.makePersistent(u1);
    } finally {
        pm2.close();
    }
    return "done";
} 
```

我一直在日志中收到以下错误

javax.servlet.ServletContext 日志：分派传入 RPC 调用 com.google.gwt.user.server.rpc.UnexpectedException 时出现异常：服务方法'public abstract java.lang.String com.google.gwt.sample.login.client.GreetingService .UserRegister(java.lang.String[])' 抛出了一个意外的异常：javax.jdo.JDOFatalUserException: No PersistenceManagerFactory 可通过属性资源“”配置或找不到命名的 PMF 或名为“”的持久性单元。

请尽快提供帮助。

# graphviz - 具有多个边（来自不同节点）到具有相同标签的一个节点的简写

> ID：10978355
> 
> 赞同：8
> 
> 时间：2012-06-11T10:25:21.003
> 
> 标签：graphviz, dot

我知道我可以做类似的事情

```
a -> z [label="XXX"];
b -> z [label="XXX"];
c -> z [label="XXX"];
d -> z [label="XXX"]; 
```

但是有没有办法做类似的事情

```
a,b,c,d -> z [label="XXX"]; 
```

输出与上面的代码相同？它真的会让我的点源更简单:)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-11T12:20:02.113

你几乎在那里：

```
{a;b;c;d} -> z [label="XXX"]; 
```

做你正在寻找的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-30T16:41:27.607

要回复您的评论，以下是跨多个边缘分布标签（或颜色或其他属性）的方式：

```
subgraph
{
    edge [label="Hello"];
    {a,b,c,d} -- z;
} 
```

# java - Java 异常处理（以 json 为例）

> ID：10978357
> 
> 赞同：2
> 
> 时间：2012-06-11T10:25:26.380
> 
> 标签：java, exception-handling

首先，我想说我很抱歉给这样一个模棱两可的标题......

我想知道如何在以下场景中处理异常......我有一个 Struts 操作，它从 EJB 接收字符串：

```
try{       
  JSONObject data = new JSONObject(result);   //result is String 
  String gatewayId = data.getString("gatewayId");
  session.setAttribute("gatewayId", gatewayId);
}catch(Exception e){
  System.out.println(e.getMessage());
} 
```

**编辑** 进口是：

```
import org.apache.struts2.json.*;
import org.json.*; 
```

如果 A json 是：

```
{"gatewayId":100, "mask":4} 
```

如果 B json 是：

```
{"success":false, "errorDesc":"bla bla"} 
```

如果 **gatewayId**在 JSON 中，我没有问题，但问题是从 EJB 接收的 JSON 可以（但不是必须）具有该键：值对。

如果有一个**Boolean JsonObject.hasString()**方法，由于首先在 if/else if 语句中检查字符串的存在，我不会有任何异常，但是这样我就无法避免异常......

我认为我可以做的第一件事是根据异常类型使用不同的 catch 块，但似乎所有异常都是通用**JSONException**类型，而且我不应该将任何 JSON 处理代码放在 catch 块中，因为该代码可以也会抛出它的异常。

请记住，我不是在这里寻找我的 JSON 问题的确切解决方案，而是在您没有帮助您避免异常的功能时如何解决此类问题的一般解释......

我希望我的问题是有道理的......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T10:30:36.317

尝试

```
data.has("gatewayId"); 
```

这会有所帮助。

# jquery - jquery UI 选项卡设计不好用

> ID：10978364
> 
> 赞同：0
> 
> 时间：2012-06-11T10:25:51.723
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

我正在尝试使用链接[http://jqueryui.com/demos/tabs/manipulation.html中的 jquery UI 选项卡功能](http://jqueryui.com/demos/tabs/manipulation.html)

我所做的是将网页中的源代码复制到我电脑中的 html 文件中。还添加了相应的 css 和 js 文件并将它们链接到索引页面。bt 似乎 css 部分存在问题，因为我的页面中的设计不正常。问题似乎与文件 jquery.ui.all.css

其内容是

```
/*!
* jQuery UI CSS Framework 1.8.21
*
* Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* http://docs.jquery.com/UI/Theming
*/
 @import "jquery.ui.base.css";
 @import "jquery.ui.theme.css"; 
```

Nw 我的页面看起来像我附上的屏幕截图......列表样式似乎没有工作......![在此处输入图像描述](../Images/4d05a2631b1c18049930b156273d81ba.png)

事情是如何`@import`运作的？这可能是问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T10:42:43.807

我认为您在 html 中缺少以下 css 文件。

[http://jqueryui.com/themes/base/jquery.ui.tabs.css](http://jqueryui.com/themes/base/jquery.ui.tabs.css)

@import 用于链接 HTML 文件中的 css 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:49:44.267

正在使用的样式表用于`@imports`导入 2 个其他样式表。然后从正在导入的这些样式表之一中导入更多样式表。所以你需要所有这些才能让这个演示工作。

我建议从 jQueryUI 下载其中一个主题，因为它们不使用`@imports`并且具有所有样式。

或者，使用 CDN 访问 javascript 和 css 文件。我使用[Microsoft CDN](http://www.asp.net/ajaxlibrary/cdn.ashx#jQuery_UI_Releases_on_the_CDN_1) 你可以在你的项目中添加一个链接到：

```
<script src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.20/jquery-ui.min.js"></script> 
```

进而

```
<link rel="stylesheet" type="text/css" href="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.20/themes/black-tie/jquery-ui.css" /> 
```

# android - 如何在闹钟中设置消息？

> ID：10978367
> 
> 赞同：1
> 
> 时间：2012-06-11T10:25:58.400
> 
> 标签：android

> 在警报应用程序中，用户为警报消息提供输入字符串并设置警报。我可以设置和收听警报。但是如何显示用户设置的消息？已设置多次设置警报，我如何显示该特定警报的相应消息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:05:25.383

您的 BroadcastReceiver 中应该有一个 onReceive(Context context, Intent intent) 函数。它看起来像：

```
public void onReceive(Context context, Intent intent) {   
    PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
    PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, ""); // Second argument is an arbitrary String tag
    wl.acquire();

    // Put YOUR code here (between WaitLocks)
    String userInputtedString = intent.getBundleExtra("UserText")
    Toast.makeText(context, userInputtedString, Toast.LENGTH_LONG).show();

    wl.release();
} 
```

为了获得该捆绑包，您必须在创建警报时额外传递一个意图

```
Intent intent = new Intent(context, AlarmNotification.class);
intent.putExtra("UserText", userInputedString);
PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, intent, 0); 
```

我只是展示了一个 Toast 消息的示例，但您也可以将其更改为 Notification 或 AlertDialog。让我知道这是否有帮助。

# c - “无用的类型限定符”错误

> ID：10978370
> 
> 赞同：5
> 
> 时间：2012-06-11T10:26:09.083
> 
> 标签：c, struct

我使用以下代码收到以下错误。我试图找出问题出在谷歌上，但我没有发现任何有用的东西。

```
Compiling /home/tectu/projects/resources/chibios/ext/lcd/touchpad.c
In file included from /home/tectu/projects/resources/chibios/ext/lcd/touchpad.c:1:0:
/home/tectu/projects/resources/chibios/ext/lcd/touchpad.h:17:1: warning: useless type qualifier in empty declaration [enabled by default] 
```

这是第 12 行到第 17 行的代码`touchpad.h`：

```
volatile struct cal {
    float xm; 
    float ym; 
    float xn; 
    float yn; 
}; 
```

这是我在里面使用这个结构的方式`touchpad.c`：

```
static struct cal cal = { 
    1, 1, 0, 0  
}; 
```

谁能给我看灯？:D

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T10:28:53.383

`volatile`作为限定词可以应用于结构的特定实例。
您将其应用于无用的类型，并且编译器正确指出了它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-11T10:30:08.840

`volatile`限定变量，而不是类型。

正在做：

```
static volatile struct cal {
    float xm; 
    float ym; 
    float xn; 
    float yn; 
} cal; 
```

将是合法的，如下所示：

```
struct cal {
    float xm; 
    float ym; 
    float xn; 
    float yn; 
};

static volatile struct cal cal; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-11T10:28:12.673

关键字对`volatile`对象有意义。不是类型定义。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-11T10:29:10.860

你不会得到错误，只是一个警告。

这适用于你如何声明你的`struct cal`: 它本身不是 volatile ；volatile 仅适用于具体的变量定义。

所以在`static struct cal cal`，你的变量`cal`只是`static`，但不是`volatile`。

从这个意义上`volatile`说，正如警告所说，声明是无用的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T11:27:03.703

volatile 键工作应与实变量一起使用，而不是与类型定义一起使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-07T16:47:27.017

您不能将`volatile`限定符附加到`struct`声明中。

但是，与其他答案相反，您实际上可以在`volatile`类型上使用限定符，但*不能*在**structs**上使用。如果使用`typedef`，则可以为结构创建 volatile 类型。

在下面的示例中，`Vol_struct`实际上并不像发帖人的问题那样易失。但是`Vol_type`会在没有进一步限定的情况下创建 volatile 变量：

```
/* -------------------------------------------------------------------- */
/* Declare some structs/types                                           */
/* -------------------------------------------------------------------- */

/* wrong: can't apply volatile qualifier to a struct
   gcc emits warning: useless type qualifier in empty declaration */
volatile struct Vol_struct
{
    int x;
};

/* effectively the same as Vol_struct */
struct Plain_struct
{
    int x;
};

/* you CAN apply volatile qualifier to a type using typedef */
typedef volatile struct
{
    int x;
} Vol_type;

/* -------------------------------------------------------------------- */
/* Declare some variables using the above types                         */
/* -------------------------------------------------------------------- */
struct Vol_struct g_vol_struct;                     /* NOT volatile */
struct Plain_struct g_plain_struct;                 /* not volatile */
volatile struct Plain_struct g_vol_plain_struct;    /* volatile */
Vol_type g_vol_type;                                /* volatile */ 
```

# java - 如何从 Web 应用程序中读取文本文件

> ID：10978380
> 
> 赞同：5
> 
> 时间：2012-06-11T10:26:51.420
> 
> 标签：java, file, war

我正在编写一个 Jersey Restful 服务，通过一个 war 文件部署在 Tomcat 上。

该服务需要读取 3 个文本文件中的数据。文本文件需要存在于文件系统上或从类路径中读取。我试图从文件系统和类路径中读取数据，但都没有工作。无论哪种方式，我都会很高兴-没关系。

如果要使用以下代码，有人可以告诉我将指定的文本文件放在哪里以便代码拾取文件吗？

```
BufferedReader br = new BufferedReader(new InputStreamReader
(this.getClass().getClassLoader().getResourceAsStream("myfile.txt"))); 
```

我得到一个空指针异常。

如果我要从文件系统中读取文件，请使用以下代码，我应该将文件放在我的 Jar 中的什么位置？

```
FileInputStream fs = new FileInputStream("myFile.txt");
DataInputStream is = new DataInputStream(fs);
BufferedReader br = new BufferedReader(new InputStreamReader(is)); 
```

我收到 FileNotFound 异常。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T21:34:08.543

我将我的文本文件复制到`WEB-INF/classes`文件夹中并使用`this.getClass().getClassLoader().getResourceAsStream("/myfile.txt")`它并且它有效。

谢谢大家。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T12:32:15.453

Java中有一个类似的线程[——Java Web 应用程序中文件的相对路径](https://stackoverflow.com/questions/2395737/java-relative-path-of-a-file-in-a-java-web-application)。

如果你想实时知道目录，可以访问类[ServletContext](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html)方法。我相信该方法`getContextPath`可能对您有用。

# css - 在向下滑动导航菜单上实现圆角

> ID：10978390
> 
> 赞同：0
> 
> 时间：2012-06-11T10:27:43.757
> 
> 标签：css, navigation, rounded-corners, slidetoggle

我正在研究你可以[在这里](http://monthlymixup.com/mixups/june_2012/test.html)看到的下拉菜单。`ul#navigation`我在和上都有圆角`ul.subnavigation`。当子菜单向下滑动时，可以看到底部的边框`ul.subnavigation`与 的内容重叠`ul#navigation`，当我希望它顺利向下滑动时，没有“闪烁”。我知道这个问题是由圆角引起的。我需要在菜单下拉时`ul.subnavigation`覆盖底部的圆角，而不会看到双边框底部问题。`ul#navigation`我希望这很清楚！代码如下。

谢谢，

缺口

**HTML**

```
<ul id="navigation">
    <li class="dropdown"><a href="#">menu</a>
        <ul class="sub_navigation">
            <li><a href="#">home</a></li>
            <li><a href="#">help</a></li>
            <li><a href="#">disable tips</a></li>
        </ul>
    </li>
</ul> 
```

**查询**

```
$('.dropdown').hover(function() {
    $(this).find('.sub_navigation').slideToggle();
});​ 
```

**CSS**

```
ul#navigation, ul.sub_navigation {
    margin:0;
    padding:0;
    list-style-type:none;
    min-width:100px;
    background-color: white;
    font-size:15px;
    font-family: Trebuchet MS;
    text-align: center;
    -khtml-border-radius: 0 0 5px 5px;    
    -moz-border-radius: 0 0 5px 5px;
    -webkit-border-radius: 0 0 5px 5px;
    border-radius: 0 0 5px 5px;
    border:1px black solid;
    border-top:none;
}

ul.sub_navigation {
    margin-left:-1px;
    position: absolute;
    top:28px;
}

ul#navigation {
    float:left;
    position:absolute;
    top:0;
}

ul#navigation li {
    float:left;
    min-width:100px;
}

ul.sub_navigation {
    position:absolute;
    display:none;
}

ul.sub_navigation li {
    clear:both;
}

 a,
 a:active,
 a:visited {
    display:block;
    padding:7px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:36:39.830

为什么要放置子菜单？删除其上的定位并隐藏它直到悬停触发。

检查[这个小提琴](http://jsfiddle.net/2qsWa/)。

# ruby-on-rails - 如何在 Rails 3 中将数据从一个表插入到另一个表

> ID：10978391
> 
> 赞同：0
> 
> 时间：2012-06-11T10:27:43.857
> 
> 标签：ruby-on-rails

我有一个带有 id 、 name 、 e-mail 等的 User 表...

我想将当前登录的用户 ID 传递到另一个表 Post 中，以便每个帖子都包含相应的用户 ID。

控制器端

```
**app/controller/post_controller.rb**

    class PostController < ApplicationController
      def index
       @post=Post.new
       @posts=Post.all
      end

      def create
       @post=Post.new(params[:post])
       respond_to do |format|
       if @post.save
          format.html { redirect_to :controller=>"post" ,:action=>"index" }
         format.json { render json: @post, status: :created, location: @post }
         #redirect_to :controller=>"post" ,:action=>"index"
        else
         format.html { redirect_to :controller=>"home" ,:action=>"index" }
         format.json { render json: @post, status: :created, location: @post }
       end  
      end
      end 
```

查看零件

```
**app/views/post/questions.html.erb**

<%=form_for :post do |f| %>

  <table>
    <tr>
        <td>
            Title:<%=f.text_field :title %>
        </td>
    </tr>
    <tr>
        <td>
            <h3>Question</h3>
        </td>
    </tr>
    <tr>
        <td>
            <%=f.text_area :body %>
        </td>
    </tr>
    <tr>
        <td>
            Tag:<%=f.text_field :tag %>
        </td>
        </tr>
    <tr>
        <td>
            <h3><%= f.submit "Post Your Question" %></h3>
        </td>
    </tr>
  </table>
<%end%> 
```

Post 表包含用户 ID、标题、正文、标签

当用户成功登录时，我已将用户 ID 值存储在会话中............

请告诉我如何将 id 字段添加到 Post 表中.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T10:44:56.160

在 create 方法中，而不是 this`@post=Post.new(params[:post])`将其更改为 this

```
@post=Post.new(params[:post]).merge(user_id: current_user.id) 
```

你会很高兴的

# c# - Postsharp 在使用 Microsoft 报告查看器时导致错误

> ID：10978392
> 
> 赞同：1
> 
> 时间：2012-06-11T10:27:46.907
> 
> 标签：c#, reportviewer, postsharp

在我的项目中，我使用了两个不同版本的 MicrosoftReportViewer（版本 9 和 10）并通过外部别名声明它们。

似乎 PostSharp 在编译时会导致问题，从而导致在运行时出错。

这是我尝试显示报告时的错误：

找不到方法：“Microsoft.Reporting.WebForms.ReportDataSourceCollection Microsoft.Reporting.WebForms.LocalReport.get_DataSources()”。

如果我在运行时停用 PostSharp，错误仍然存​​在，但如果我完全停用 PostSharp，那么即使编译，报告也可以正常工作。

以下是我如何应用我的方面：

```
[assembly: ClickLogger("Click Events", AttributeTargetMembers = "*Click", AttributePriority = 1)]
[assembly: ParamValueChangedLogger("Value changed events", AttributeTargetMembers = "*ValueChanged", AttributePriority = 1)]
[assembly: ParamValueChangedLogger("Value changed events", AttributeTargetMembers = "*CellValueChanged", AttributeExclude = true, AttributePriority = 2)]
[assembly: CellValueChangedLogger("Cell value changed events", AttributeTargetMembers = "*CellValueChanged", AttributePriority = 1)]
[assembly: DataAdapterLogger("Data Adapter call events", AttributeTargetTypes = "*.Data*", AttributeTargetMembers = "get_Adapter", AttributePriority = 1)]
[assembly: DataAdapterLogger("Data Adapter call events", AttributeTargetMembers = "SaveToDB", AttributeExclude = true, AttributePriority = 2)] 
```

有人遇到过这个错误或知道该怎么做吗？

如果您需要更多信息，请随时询问。

提前感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:12:56.077

这可能是 PostSharp 的错误。最好的办法是将其报告给[http://www.sharpcrafters.com/forum](http://www.sharpcrafters.com/forum)并附上一个重现该问题的简单项目。

# android-fragments - 类中的 getapplication() 扩展片段或 asynchtask

> ID：10978393
> 
> 赞同：3
> 
> 时间：2012-06-11T10:27:50.310
> 
> 标签：android-fragments, android

类中没有 getapplication() 扩展片段和 asynchtask ，我只有上下文如何获取应用程序

因为我需要调用全局变量

```
GlobalVariables appState = (GlobalVariables) getApplication();

Encounter EncounterObject = appState.encounters.get(position); 
```

在这些课程中的任何一个

```
ackage com.appnetics;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.StatusLine;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONObject;

import android.app.Application;
import android.app.ProgressDialog;
import android.content.Context;
import android.os.AsyncTask;

/*
 * onPreExecute()- create the progress bar dialog. 
 * doInBackground()- start the new thread.
 * onPostExecute()- dismiss the progress bar dialog.
 * */
  class EncounterBackgroundWorker extends AsyncTask<Void, Void, Void> {

      ProgressDialog connectionProgressDialog;

         private Context context;

         public EncounterBackgroundWorker(Context Context  )
         {
           this.context=Context;

          }

      @Override
      protected void onPreExecute() {

          connectionProgressDialog = new ProgressDialog(context);
          connectionProgressDialog.setCancelable(false);
          connectionProgressDialog.setCanceledOnTouchOutside(false);
          connectionProgressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
          connectionProgressDialog.setMessage("Uploading Leads...");
          connectionProgressDialog.show();
      }
      @Override
      protected Void doInBackground(Void... params) {
        try {
            // Call the Encounter web service 
            String Result = null;

            StringBuilder URL = new StringBuilder();

            URL.append("http://163.121.237.103/ali");//this.URL.getText()
            URL.append("/Service.svc/ReturnEncounter");

            /*URL.append("http://192.168.254.31:90/Service.svc/Login/");
            URL.append(username.getText());
            URL.append("/");
            URL.append(password.getText());

            finalResult.setText(  URL.toString() ) ;*/
            ///////////////////////////// 
            HttpClient client = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(
                    URL.toString() );

            try {
                HttpResponse response = client.execute(httpGet);
                StatusLine statusLine = response.getStatusLine();
                int statusCode = statusLine.getStatusCode();
                if (statusCode == 200) {
                    HttpEntity entity = response.getEntity();
                    InputStream content = entity.getContent();
                    BufferedReader reader = new BufferedReader(
                            new InputStreamReader(content));

                    // Read the JSON 
                    Result = reader.readLine();

                    // Convert the string to Array

                    GlobalVariables appState = new GlobalVariables();

                    appState.encounters =new ArrayList<Encounter>(); 

                    JSONArray array=new JSONArray(Result);

                    // Loop through and fill 
                    for(int i=0;i<array.length();i++){

                        JSONObject elem=(JSONObject)array.get(i);
                        Encounter encounter=new Encounter();

                        encounter.PatientID=elem.getInt("PatientID");
                        encounter.PatientName = elem.getString("PatientName");

                        encounter.NOKName= elem.getString("NOKName");
                        encounter.ReferalName= elem.getString("ReferalName");

                        encounter.bookingDate= elem.getString("bookingDate");
                        encounter.Onclogist= elem.getString("Onclogist");
                        encounter.EncounterStatus= elem.getString("EncounterStatus");

                        encounter.EncounterType= elem.getString("EncounterType");
                        encounter.Regieme= elem.getString("Regieme");

                        appState.encounters.add(encounter);
                    }

                } else {
                     Result = "error";
                }
            } catch (ClientProtocolException e) {
                 Result = "error";
                e.printStackTrace();
            } catch (IOException e) {
                 Result = "error";
                e.printStackTrace();
            }

    } catch (Exception e) {
      e.printStackTrace();
    }

          return null;
      }        
    @Override
      protected void onPostExecute(Void result) {
        connectionProgressDialog.dismiss();
      }
  }

---------------- and I call it in --------------

/*
 * This class to provide the code for the Chemo unit screen that will be used
 * 
 * */

package com.appnetics;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewGroup.LayoutParams;
import android.widget.LinearLayout;
import android.widget.ListView;
import android.widget.TextView;

public class ChemoUnit  extends Fragment {

    /*The main controls*/
    TextView Patient, Nok ,  Referrer , Oncologist = null ;
    ListView MainGrid ;

    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

         View view = inflater.inflate(
                    R.layout.chemounit,
                    container,
                    false);
        // Intialize the Controls
         Patient = ((TextView) view.findViewById(R.id.Patient));
         Nok = ((TextView) view.findViewById(R.id.Nok));
         Referrer = ((TextView) view.findViewById(R.id.Referrer));
         Oncologist = ((TextView) view.findViewById(R.id.Oncologist));

        //Intialize the record Grid
         LinearLayout formLayout = (LinearLayout)view.findViewById(R.id.ChemoUnitGrid);
        formLayout.removeAllViews();

        MainGrid = new ListView(getActivity().getApplicationContext());              
        MainGrid.setVisibility(ListView.VISIBLE);
         LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
                 LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
         params.gravity = Gravity.RIGHT;
         MainGrid.setLayoutParams(params);

         //1\. set the header 

         ViewGroup header = (ViewGroup)inflater.inflate(R.layout.chemounitgridheader, MainGrid, false);
         MainGrid.addHeaderView(header, null, false);

         //2\. Call the web Service 

         new EncounterBackgroundWorker( getActivity() ).execute();

         MainGrid.setAdapter(new Encounteradapter(view.getContext(), null));
        // Finally add it 

         formLayout.addView(MainGrid);

         // Return the Result 
        return inflater.inflate(R.layout.chemounit, container, false);
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T10:31:13.933

采用：

```
getActivity().getApplication(); 
```

# java - 停止/启动网络连接

> ID：10978394
> 
> 赞同：1
> 
> 时间：2012-06-11T10:27:53.367
> 
> 标签：java

我有一种从 URL 下载文件的方法。我需要编写单元测试用例来恢复下载，那么有没有办法禁用/启用网络连接，以便恢复下载方法可以调用？

我的下载方法如下：

```
public String download(LatestVersionInfo info) throws FileNotFoundException, XMLStreamException,NoSuchAlgorithmException, MalformedURLException {       
        boolean isCached = checkCache(info, location);
        String filePath = null;
        RandomAccessFile randomAccessFile = null;
        InputStream inputStream = null;
        if (!isCached) {
            try {
                createLocation();
                int responseCode = 0;
                HttpsURLConnection connection = getSSLCertificate(info
                        .getLatestVersionUrl().toString());
                connection.setRequestMethod("GET");
                connection.setRequestProperty("Range", "bytes=" + downloaded
                        + "-");
                connection.connect();
                responseCode = connection.getResponseCode();
                if (responseCode / 100 != 2) {
                    error();
                }
                int contentLength = connection.getContentLength();
                if (contentLength < 1) {
                    error();
                }
                if (size == -1) {
                    size = contentLength;
                    stateChanged();
                }
                randomAccessFile = new RandomAccessFile(
                        getDownLoadPath(info.getLatestVersionUrl()), "rw");
                randomAccessFile.seek(downloaded);
                inputStream = connection.getInputStream();
                while (status == DOWNLOADING) {
                    byte buffer[];
                    float finalSize = size - downloaded;
                    if (finalSize > MAX_BUFFER_SIZE) {
                        buffer = new byte[(int) finalSize];
                    } else {
                        buffer = new byte[MAX_BUFFER_SIZE];
                    }
                    int read = inputStream.read(buffer);
                    if (read == -1)
                        break;

                    randomAccessFile.write(buffer, 0, read);
                    downloaded += read;
                    stateChanged();
                }

                if (status == DOWNLOADING) {
                    status = COMPLETE;
                    stateChanged();
                }

            } catch (Exception e) {
                e.printStackTrace();
            } finally {
                try {
                    if (randomAccessFile != null)
                        randomAccessFile.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
                try {
                    if (inputStream != null)
                        inputStream.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }

            }           
        }
        return filePath;
    } 
```

有什么方法可以**禁用/启用网络连接**，以便可以调用恢复下载方法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:22:00.457

看起来您正在尝试在连接失败后恢复，而不是以某种方式暂停底层 TCP 传输（这会更难）。

所以你可以`HttpsURLConnection`中途杀死（从一个单独的线程）。如果将 放在`HttpsURLConnection connection`字段中，其他线程可以调用`connection.getInputStream().close()`，这将导致连接“失败”。

# php - 如何通过电子邮件获取错误日志？

> ID：10978397
> 
> 赞同：-2
> 
> 时间：2012-06-11T10:28:04.883
> 
> 标签：php, codeigniter

在 codeigniter 中，我想通过电子邮件接收错误日志。例如，如果我的网站上出现任何错误消息，我想收到一封有关它的电子邮件。

我怎样才能实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T10:35:00.780

创建自定义错误处理程序：http: [//php.net/manual/en/function.set-error-handler.php](http://php.net/manual/en/function.set-error-handler.php)

这样你就可以对错误做任何你想做的事情......电子邮件，写入日志等......

# spring-mvc - Spring MVC：为什么我的 sf:errors 被忽略了？

> ID：10978399
> 
> 赞同：0
> 
> 时间：2012-06-11T10:28:12.163
> 
> 标签：spring-mvc, bean-validation

我已经在 Spring MVC 应用程序中正确设置了 Hibernate Validator。bean 已验证，但我无法显示错误。

在我的 JSP 页面中，我有以下行：

```
<sf:errors path="*" cssClass="errors" element="div" /> 
```

当我运行页面并使用 chrome 的检查器检查它时，没有 div （或任何）元素来保存这些错误。它完全被忽略了。这很奇怪，因为以下行在同一个 JSP 中被正确解析为 html 表单：

```
<sf:form method="post" modelAttribute="tsCommand"> 
```

这是我用于弹簧形式的 taglib：

```
<%@ taglib prefix="sf" uri="http://www.springframework.org/tags/form"%> 
```

任何想法可能出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:07:39.993

您的语法是正确的，我不确定 "element=\"div\"" 属性。

您的控制器必须看起来像这样：

```
public void handleActionRequestInternal(@ModelAttribute("tsCommand") @Valid TsCommand tsCommand, BindingResult result, @ModelAttribute ModelMap model) throws Exception { 
```

和你的背景：

```
<bean id="annotationMethodHandlerAdapter"
    class="org.springframework.web.portlet.mvc.annotation.AnnotationMethodHandlerAdapter">
    <property name="webBindingInitializer">
        <bean id="configurableWebBindingInitializer"
            class="org.springframework.web.bind.support.ConfigurableWebBindingInitializer">
            <property name="validator">
                <ref bean="validator" />
            </property>
        </bean>
    </property>
</bean>
<bean id="validator"
    class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean" /> 
```

有了这个，一切都会好的；）

# android - 大本营和 OAuth

> ID：10978404
> 
> 赞同：1
> 
> 时间：2012-06-11T10:28:28.297
> 
> 标签：android, oauth-2.0, basecamp

我正在为新的 Basecamp 开发 Android 客户端。

我在Integrate.37signals.com 注册了我的应用程序[并将](http://integrate.37signals.com) 重定向URI 设置为`newbcamp://success`

现在我收到这样的错误：

```
Provided redirect_uri is not approved 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:42:31.370

现在您可以使用[Google Play Services](https://developers.google.com/android/google-play-services)来处理**OAuth 2.0 Authentication**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-08T06:22:13.893

我在授权时遇到了同样的错误。[我发现我的 redirect_uri http://testapp.com/](http://testapp.com/)末尾有斜线。它在删除最后一个斜杠（[http://testapp.com](http://testapp.com)）后工作。

我认为 Basecamp 应该涵盖这种缺陷，因为[http://testapp.com/](http://testapp.com/)相当于[http://testapp.com](http://testapp.com)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T12:19:27.257

通常在 OAuth 中，您在向 37signals 注册应用时提供的 URL 与您在请求中需要提供的 URL 相同

# java - Android - 使用 LinearLayout 制作 ScrollView

> ID：10978405
> 
> 赞同：4
> 
> 时间：2012-06-11T10:28:30.683
> 
> 标签：java, android, graphics, menu, scrollview

我想在里面制作一个带有 LinearLayout 的 ScrollView。线性布局包含 6 个具有背景 CYAN、BLUE、CYAN、BLUE 等的视图......这是代码：

```
public class TouchActivity extends Activity
{
    TouchedView TouchView;

    public void onCreate(Bundle icicle) 
    {
        super.onCreate(icicle);

        TouchView = new TouchedView(this);
        TouchView.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT , LayoutParams.WRAP_CONTENT) );

        //setContentView(TouchView);
        setContentView(TouchView.ViewLayout);
    }

    class TouchedView extends ScrollView
    {
        LinearLayout ViewLayout;
        ListElement Elem1;
        ListElement Elem2;
        ListElement Elem3;
        ListElement Elem4;
        ListElement Elem5;
        ListElement Elem6;

        public TouchedView(Context context) 
        {
            super(context);

            ViewLayout = new TableLayout(TouchActivity.this);
            ViewLayout.setOrientation(LinearLayout.VERTICAL);

            Elem1 = new ListElement(TouchActivity.this , "CYAN");
            Elem1.setLayoutParams(new TableLayout.LayoutParams(LayoutParams.MATCH_PARENT , 100 ) );
            Elem2 = new ListElement(TouchActivity.this , "BLUE");
            Elem2.setLayoutParams(new TableLayout.LayoutParams(LayoutParams.MATCH_PARENT , 100 ) );
            Elem3 = new ListElement(TouchActivity.this , "CYAN");
            Elem3.setLayoutParams(new TableLayout.LayoutParams(LayoutParams.MATCH_PARENT , 100 ) );
            Elem4 = new ListElement(TouchActivity.this , "BLUE");
            Elem4.setLayoutParams(new TableLayout.LayoutParams(LayoutParams.MATCH_PARENT , 100 ) );
            Elem5 = new ListElement(TouchActivity.this , "CYAN");
            Elem5.setLayoutParams(new TableLayout.LayoutParams(LayoutParams.MATCH_PARENT , 100 ) );
            Elem6 = new ListElement(TouchActivity.this , "BLUE");
            Elem6.setLayoutParams(new TableLayout.LayoutParams(LayoutParams.MATCH_PARENT , 100 ) );

            ViewLayout.addView(Elem1);
            ViewLayout.addView(Elem2);
            ViewLayout.addView(Elem3);
            ViewLayout.addView(Elem4);
            ViewLayout.addView(Elem5);
            ViewLayout.addView(Elem6);

            setFillViewport(false);
            setContentView(ViewLayout);

        }

    }

    class ListElement extends View
    {
        public ListElement(Context context , String TypeName) 
        {
            super(context);

            if(TypeName.compareTo("CYAN") == 0) this.setBackgroundColor(Color.CYAN);

            if(TypeName.compareTo("BLUE") == 0) this.setBackgroundColor(Color.BLUE);    
        }
    }
} 
```

结果是6个视图太大而不能包含在LinearLayout中：

[http://img513.imageshack.us/img513/5406/androidbadscrollview2.jpg](http://img513.imageshack.us/img513/5406/androidbadscrollview2.jpg)

但是，如果我评论`setContentView(TouchView.ViewLayout);`并且我取消评论`//setContentView(TouchView);` 我的活动应该填充 ScrollView 而不是`LinearLayout`但不幸的是我什么都看不到。

请注意，`ScrollView`包含由`LinearLayout`设置的`setContentView(ViewLayout);`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T10:33:56.367

见[http://www.vogella.com/articles/Android/article.html#gridlayout_scrollview](http://www.vogella.com/articles/Android/article.html#gridlayout_scrollview)

您可以声明任何您想要的孩子，而不是 TextView。
重要的是您的滚动视图只有一个子项（即线性布局）。
此外，您应该始终在 xml 中编码尽可能多的布局！

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/LinearLayout01"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/TextView01"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="This is a header">
        </TextView>

    </LinearLayout>

</ScrollView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T15:10:48.970

我主要做了两个错误：

第一个是传递一个 TableLayout 参数而不是 LinearLayout 参数，我的意思是：

```
Elem1.setLayoutParams(new TableLayout.LayoutParams(LayoutParams.MATCH_PARENT , 100 ) ); 
```

其次扩展一个 ScrollView 似乎不是一件好事。因此，解决方案是创建一个内部带有 LineraLayaout 的简单 ScrollView 对象。

这是**工作代码**：

```
public class TouchActivity extends Activity
{

    public void onCreate(Bundle icicle) 
    {
        super.onCreate(icicle);

        ScrollView MainView;
        LinearLayout ViewLayout;

        ListElement Elem1;
        ListElement Elem2;
        ListElement Elem3;
        ListElement Elem4;
        ListElement Elem5;
        ListElement Elem6;

        MainView = new ScrollView(this); 

        ViewLayout = new LinearLayout(this);
        ViewLayout.setOrientation(LinearLayout.VERTICAL);
        ViewLayout.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT , LayoutParams.WRAP_CONTENT) );

        Elem1 = new ListElement(this , "CYAN");
        Elem1.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT , 100 ) );
        Elem2 = new ListElement(this , "BLUE");
        Elem2.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT , 100 ) );
        Elem3 = new ListElement(this , "CYAN");
        Elem3.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT , 100 ) );
        Elem4 = new ListElement(this , "BLUE");
        Elem4.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT , 100 ) );
        Elem5 = new ListElement(this , "CYAN");
        Elem5.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT , 100 ) );
        Elem6 = new ListElement(this , "BLUE");
        Elem6.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT , 100 ) );

        ViewLayout.addView(Elem1);
        ViewLayout.addView(Elem2);
        ViewLayout.addView(Elem3);
        ViewLayout.addView(Elem4);
        ViewLayout.addView(Elem5);
        ViewLayout.addView(Elem6);    

        ViewLayout.requestLayout();
        MainView.addView(ViewLayout);
        setContentView(MainView);

    }

    class ListElement extends View
    {
        public ListElement(Context context , String TypeName) 
        {
            super(context);

            if(TypeName.compareTo("CYAN") == 0) this.setBackgroundColor(Color.CYAN);

            if(TypeName.compareTo("BLUE") == 0) this.setBackgroundColor(Color.BLUE);    
        }
    }
} 
```

# c# - Azure 发布错过了引用项目引用的程序集

> ID：10978408
> 
> 赞同：1
> 
> 时间：2012-06-11T10:28:49.800
> 
> 标签：c#, deployment, reference, azure, dependencies

我正在尝试将我的解决方案部署到 Azure，但它不起作用。它指出我缺少依赖项。这是正确的，因为我通过远程桌面进行了查找。我错过了 Azure 项目的引用项目的引用程序集，即：

Azure 项目包含项目 A 作为 webrole。项目 A 引用了项目 B。项目 B 通过 Castle Windsor 链接到项目 A（弱耦合）。项目 B 引用了一个外部项目 (NHibernate)。

外部项目的程序集未打包和发布。尽管在项目 B 上将它们设置为“Copy Local = true”，但它们在服务器上却丢失了。

我无法想象唯一的方法是将项目 A 的所有引用添加到项目 B 来解决这个问题，对吗？你能给我一个解决方案吗？

编辑 13:51：看起来 NHibernate.ByteCode.Castle 程序集是唯一没有被打包的程序集。强耦合程序集 NHibernate 正在使用该程序集。现在参考轨迹如下：

Azure -> Project A --（弱耦合）-> Project B -> NHibernate

Azure -> Project A --(弱耦合)-> Project B -(弱耦合)--> NHibernate.ByteCode.Castle

为什么要复制 NHibernate.ByteCode.Castle nog？我还得到了由 NHibernate 包添加的其他几个库（例如 Iesi.Collections），它们已正确打包。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T16:40:51.643

发生此类问题时已经发生了几起事件，以下讨论显示了如何解决此问题：

[MSBuild (TFS) 中的 Nhibernate.Bytecode.Castle 问题](https://stackoverflow.com/questions/2058990/problem-with-nhibernate-bytecode-castle-in-msbuild-tfs)

# c# - 使用 3 个嵌套循环计算简单的 255 X 255 矩阵时太耗时

> ID：10978422
> 
> 赞同：0
> 
> 时间：2012-06-11T10:29:31.810
> 
> 标签：c#, multidimensional-array

这是一个制作 255 X 255 矩阵的简单程序。里面的逻辑很简单，但是在 c# 中执行时，需要很长时间（大约 25 分钟）。我无法弄清楚问题所在。请帮忙。

```
int height = croppedArray.GetLength(1);
int width = croppedArray.GetLength(0);
for (int i = 0; i <= 255; i++)
{
    for (int j = 0; j <= 255; j++)
    {
        A = 0;
        for (int n = 0; n < height ; n++)
        {
            for (int m = 0; m <width-1; m++)
            {
                int fmn = croppedArray[m, n];

                int fmxn = croppedArray[m+1,n];

                if (fmn == i && fmxn == j)
                    A++;

            }
        }

        q_zero[i, j] = A;

    }
} 
return q_zero; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:44:17.440

逻辑的“复杂性”很少占用 CPU 时间。编写足够复杂的逻辑以使用可测量的 CPU 时间是非常困难的。真正让代码运行缓慢的是循环。在这种情况下，内部循环中逻辑的复杂性无关紧要，因为对于 256x256 矩阵的每个元素（即 65,536 次），您正在查看`croppedArray`. 尽管查看每个元素相当简单，但您却做了 64k 次！

幸运的是，当您只需要 2 个时，看起来您有 4 个嵌套循环。与其为 的每个元素迭代整个 2D 矩阵一次`q_zero`，您可以将`q_zero`其用作一大堆累加器。只需遍历 2D 矩阵一次，`q_zero`当你看到它时增加适当的元素。

这个怎么样：

```
int height = croppedArray.GetLength(1);
int width = croppedArray.GetLength(0);

for (int n = 0; n < height; n++)
{
    for (int m = 0; m < width - 1; m++)
    {
        int fmn = croppedArray[m, n];
        int fmxn = croppedArray[m+1,n];

        if (fmn >= 0 && fmn <= 255 && fmxn >= 0 && fmxn <= 255)
            q_zero[fmn, fmxn]++;
    }
}

return q_zero; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:44:14.427

如果我理解您正确编程 i, j 循环是不必要的。以下代码应该是等效的并且性能要好得多：

```
 int height = croppedArray.GetLength(1); 
        int width = croppedArray.GetLength(0); 
        for (int n = 0; n < height ; n++) 
        { 
             for (int m = 0; m <width-1; m++) 
             { 
                int i= croppedArray[m, n]; 
                int j = croppedArray[m+1,n]; 

                if (i >= 0 && i <=255 && j >=0 && j <= 255) 
                {
                    q_zero[i, j]++; 
                } 
            } 
        }  
        return q_zero; 
```

# python - 将@user 与正则表达式匹配

> ID：10978425
> 
> 赞同：1
> 
> 时间：2012-06-11T10:29:57.567
> 
> 标签：python, regex, twitter

如何匹配以、、或开头`@`和结尾的单词？`;``.``:`

单词可以包含任何字母数字字符，并且可以包含下划线。

我想出了`^@([a-zA-Z0-9_])*[:;, ]$`似乎仅适用于单个单词的句子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T10:31:43.180

只需卸下锚`^`，`$`您就可以开始了。

如果您不想匹配 中的空字符串`"Example @ nothing"`，您可能需要指定“1 个或多个限定符”`+`而不是`*`. IE`@([a-zA-Z0-9_]+)[:;, ]`

限制为 1-15 个字符的用户名可以通过替换来完成`*`，`{1,15}`即`@([a-zA-Z0-9_]{1,15})[:;, ]`。

如果你想得到 @ 符号加上结束字符作为结果，`@[a-zA-Z0-9_]{1,15}[:;, ]`就足够了。

如果您只想捕获名称，则可以使用此`@([a-zA-Z0-9_]{1,15})[:;, ]`

如果令牌位于字符串的末尾并且没有特殊字符，并且您想要捕获它，您可能需要修改`[:;, ]`为`(?:[:;, ]|$)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T10:37:20.233

`^`匹配字符串的开头（或行，在多行模式下），而`$`匹配结尾，因此您需要摆脱它们：

```
>>> import re
>>> sentence = "foo bar @match don't match @success;"
>>> re.findall('@([a-zA-Z0-9_])*[:;, ]', sentence)
['h', 's'] 
```

它只捕获最后一个字母，因为限定符 (the `*`) 在匹配捕获的括号之外。把它移进去，你会得到：

```
>>> re.findall('@([a-zA-Z0-9_]*)[:;, ]', sentence)
['match', 'success'] 
```

如果您也想捕获 @ 和尾随字符，只需将它们也移动到括号内：

```
>>> re.findall('(@[a-zA-Z0-9_]*[:;, ])', sentence)
['@match ', '@success;'] 
```

正如对该问题的评论中所述，您可能希望也可能不希望将其限制为一定数量的字符：

```
>>> sentence = "foo bar @match don't match @somereallylongnamehere @success;"
>>> re.findall('(@[a-zA-Z0-9_]{1,15}[:;, ])', sentence)
['@match ', '@success;'] 
```

（当然，长度限制可以添加到前面的任何表达式中，而不仅仅是最后一个）。

# .net - 双向实体或循环依赖项的 WCF DataContract 序列化

> ID：10978429
> 
> 赞同：3
> 
> 时间：2012-06-11T10:30:32.370
> 
> 标签：.net, wcf, datacontractserializer

我正在实现一个示例 WCF 服务以了解如何`DataContractSerializer`序列化双向实体。我有以下数据合同。

```
[DataContract]
public class Process
{
    [DataMember]
    public string ProcessName { get; set; }
    [DataMember]
    public string Memory { get; set; }
    [DataMember]
    public User UserOfProcess { get; set; }
}

[DataContract]
public class User
{
    [DataMember]
    public string UserID { get; set; }
    [DataMember]
    public string UserName { get; set; }
    [DataMember]
    public List<Process> ProcessesOfUser { get; set; }
} 
```

正如您可能注意到的那样，`User`有 number of`Process`并且 each`Process`又`User`与它相关联。

```
 [OperationContract]
  User GetUser(); 
```

当我从 WCFTestClient 运行此方法时，我得到一个异常，这是可以理解的，因为每当我们在 User 中序列化 ProcessOfUser 时，它都会再次序列化 User。

为了避免这种情况，我从Process[DataContract] 中**的 UserOfProcess 中删除了 DataMember 属性。**它工作正常。

**我的问题是**，
1.这是解决这个问题的正确方法，还是`Is there some other way to this`？我还找到了`[IgnoreDataMember]`避免其序列化的属性。
2\. 我可以通过`[DataMember]`编程方式添加或删除属性吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T10:35:17.830

您可以使用[[IsReference]](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractattribute.isreference%28v=vs.95%29.aspx)属性告诉 WCF 解决循环依赖关系。

但是，在我自己在业务对象上使用它之后，我遇到了太多复杂情况，最终改用显式 DTO，并有效地完成了你所做的事情并省略了循环引用。当 DTO 转换回业务对象时，我在客户端再次连接引用。

IsReference 对于简单的对象图应该没问题。

**编辑**：关于 D​​TO

正如我所说，我最初通过网络对域对象进行了序列化，但最终变得过于混乱。

首先，因为我还序列化了那些相同的对象以实现持久性，所以我最终遇到了冲突的序列化需求，但主要是因为 DataContractSerializer 不调用构造函数，所以你不能保证你的对象是有效的。我最终拥有了`[OnDeserialized]`确保成员不为空等的大型方法。由于 WCF 序列化对象图的方式，对集合成员执行此操作引起了巨大的头痛。

使用 DTO 可以让这一切都消失，并公开一个非常干净的对象，准确地显示服务中发生了什么。你得到一个 DTO，然后可以在知道一切就绪而不是处于某种奇怪的半序列化状态的情况下进行映射。如果您的域对象真的很简单，您可能会侥幸成功，但在给我带来痛苦之后，我个人不会推荐它。

DTO 非常简单：

```
[DataContract]
public class UserProcessesDTO
{
    [DataMember] public string       UserID          { get; set; }
    [DataMember] public string       UserName        { get; set; }
    [DataMember] public ProcessDTO[] Processes       { get; set; }
}

[DataContract]
public class ProcessDTO
{
    [DataMember] public string       ProcessName     { get; set; }
    [DataMember] public string       Memory          { get; set; }
} 
```

我所有的收藏现在都像简单的数组一样通过网络传输。业务对象中的字典等在客户端被干净地构建，而不是试图序列化它们。

# mysql - mysql用if语句连接三个表

> ID：10978432
> 
> 赞同：0
> 
> 时间：2012-06-11T10:30:36.427
> 
> 标签：mysql, join

我有一个有效的查询

```
SELECT *
FROM the_index AS t1
LEFT JOIN table_2 AS t2 ON (t1.activity_id = t2.id) 
LEFT JOIN table_3 AS t3 ON (t1.activity_id = t3.id)
ORDER BY t1.id; 
```

这工作正常，但我想用一些 if 语句修改它..

```
SELECT *
FROM the_index AS t1
LEFT JOIN table_2 AS t2 ON (t1.activity_id = t2.id)     <---- If t1.event = '2'
LEFT JOIN table_3 AS t3 ON (t1.activity_id = t3.id)     <---- If t1.event = '3'
ORDER BY t1.id; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:34:40.407

只需使用这个：

```
LEFT JOIN table_2 AS t2 ON (t1.activity_id = t2.id AND t1.event = '2')
LEFT JOIN table_3 AS t3 ON (t1.activity_id = t3.id AND t1.event = '3') 
```

请注意，这仅在使用 LEFT JOIN 时才有效。不适用于 INNER JOIN。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:34:52.697

你的意思是

```
SELECT *
FROM the_index AS t1
LEFT JOIN table_2 AS t2 ON (t1.activity_id = t2.id AND t1.event = '2')
LEFT JOIN table_3 AS t3 ON (t1.activity_id = t3.id AND t1.event = '3')
ORDER BY t1.id; 
```

警告：这明显违反了 MySQL 的建议，即不要将 WHERE-like 子句放入连接中。

# python - 更改 matplotlib.pyplot text() 对象属性

> ID：10978440
> 
> 赞同：11
> 
> 时间：2012-06-11T10:31:32.020
> 
> 标签：python, animation, plot, matplotlib

我有一个`matplotlib.pyplot`在循环中更新以创建动画的图表，使用我从[另一个答案](https://stackoverflow.com/a/10896688/711017)中获得的这种代码：

```
import matplotlib.pyplot as plt    
fig, ax = plt.subplots()    
x = [1, 2, 3, 4] #x-coordinates
y = [5, 6, 7, 8] #y-coordinates

for t in range(10):
    if t == 0:
        points, = ax.plot(x, y, marker='o', linestyle='None')
    else:
        new_x = ... # x updated
        new_y = ... # y updated
        points.set_data(new_x, new_y)
    plt.pause(0.5) 
```

现在我想`plt.text()`在情节上放一个显示已经过去的时间。然而，将`plt.text()`语句放入循环中会在*每次*`text`迭代时创建一个新对象，并将它们全部放在彼此之上。所以我必须在第一次迭代时只创建一个对象，然后在后续迭代中修改它。不幸的是，我在任何文档中都找不到如何在创建此对象的实例（它是一个对象）后修改其属性。有什么帮助吗？*`text``matplotlib.text.Text`*

 ** * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-11T12:10:54.630

与`set_data`您可以使用的类似`set_text`（请参阅此处的文档： http: [//matplotlib.sourceforge.net/api/artist_api.html#matplotlib.text.Text.set_text](http://matplotlib.sourceforge.net/api/artist_api.html#matplotlib.text.Text.set_text)）。

所以首先

```
text = plt.text(x, y, "Some text") 
```

然后在循环中：

```
text.set_text("Some other text") 
```

在您的示例中，它可能如下所示：

```
for t in range(10):
    if t == 0:
        points, = ax.plot(x, y, marker='o', linestyle='None')
        text = plt.text(1, 5, "Loops passed: 0")
    else:
        new_x = ... # x updated
        new_y = ... # y updated
        points.set_data(new_x, new_y)
        text.set_text("Loops passed: {0}".format(t))
    plt.pause(0.5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:11:56.753

```
import matplotlib.pyplot as plt
import numpy as np

fig, ax = plt.subplots()

x = [1, 2, 3, 4]
y = [5, 6, 7, 8]

for t in range(10):
    plt.cla()
    plt.text(4.6,6.7,t)
    x = np.random.randint(10, size=5)
    y = np.random.randint(10, size=5)

    points, = ax.plot(x, y, marker='o', linestyle='None')
    ax.set_xlim(0, 10)     
    ax.set_ylim(0, 10) 
    plt.pause(0.5) 
```

注意`plt.cla()`通话。它清除屏幕。*

# php - kohana 验证规则与语言文件

> ID：10978441
> 
> 赞同：0
> 
> 时间：2012-06-11T10:31:37.180
> 
> 标签：php, internationalization, kohana

我有一个由 kohana 提供支持的网站，并且我使用语言文件来发送语言消息。在模型中我进行验证，并且我有一个“匹配”规则。这是一个：

```
 ->rule('email2',  'matches', array('email'); 
```

在语言文件中我这样做：

```
 'email2.matches' => 'message here.', 
```

但我收到错误消息：电子邮件：必须与电子邮件相同：而不是“此处的消息。”。

我哪里错了？这件事有记录吗？

多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:52:02.430

验证错误使用独立于 i18n 的消息。您需要自己制作`messages/validation.php`，并包括

```
<?php

return array(
    'email2' => array(
        'matches' => 'Message here',
    ),
); 
```

# android - 如何从 imageview 设置壁纸

> ID：10978442
> 
> 赞同：1
> 
> 时间：2012-06-11T10:31:37.973
> 
> 标签：android, android-imageview, wallpaper, android-gridview

我仍然找不到设置从 ImageView 获取的图像的墙纸的方法。任何人都可以告诉我从 android ImageView 设置手机壁纸的方法吗？

这是我的代码：

# 图像视图布局：

```
<ImageView
    android:contentDescription="My Wallpaper"
    android:id="@+id/full_image_view"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:saveEnabled="true"
    /> 
```

# 图像视图上的活动

请注意，显示的图像是用户单击项目后`FullImageActivity`从图像中获取的。`GridView`

```
public class FullImageActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.full_image);

    // get intent data
    Intent i = getIntent();

    // Selected image id
    int position = i.getExtras().getInt("id");
    ImageAdapter imageAdapter = new ImageAdapter(this);

    ImageView imageView = (ImageView) findViewById(R.id.full_image_view);
    imageView.setImageResource(imageAdapter.mThumbIds[position]);
}
} 
```

我想在用户触摸屏幕后从上述活动中的图像设置壁纸，我会弹出询问用户是否要将其设置为壁纸。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:35:12.213

您需要创建一个位图，然后将其设置为壁纸

```
 Bitmap mBitmap = BitmapFactory.decodeResource(getResources(), IMAGE_ID);
            WallpaperManager myWallpaperManager = WallpaperManager
                    .getInstance(getApplicationContext());

            try {
                myWallpaperManager.setBitmap(mBitmap);
                Toast.makeText(SetWallPaper.this, "Wallpaper set",
                        Toast.LENGTH_SHORT).show();
            } catch (IOException e) {
                Toast.makeText(SetWallPaper.this,
                        "Error setting wallpaper", Toast.LENGTH_SHORT)
                        .show();
            } 
```

其中 IMAGE_ID 是可绘制对象的资源 ID，例如 R.drawable.imagename

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T10:48:25.243

无论我在我的应用程序中使用什么，我都发布了我的代码。我还从中`GridView`选出任何图像时都从中获取图像。那将设置为墙纸。

但是，我的代码似乎只是不同。我从来没有用过任何`ImageView`

**MainActivity.this**

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    GridView gridview = (GridView) findViewById(R.id.gridview);
    gridview.setAdapter(new ImageAdapter(this));

    gridview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {

            ImageAdapter i = (ImageAdapter)parent.getAdapter();                
            Bitmap mBitmap = BitmapFactory.decodeResource(getResources(),(int)i.getItemId(position));

            WallpaperManager myWallpaperManager = WallpaperManager.getInstance(getApplicationContext());

            try {
                myWallpaperManager.setBitmap(mBitmap);
                Toast.makeText(MainActivity.this, "Wallpaper set", Toast.LENGTH_SHORT).show();
            } catch (IOException e) {
                Toast.makeText(MainActivity.this, "Error setting wallpaper", Toast.LENGTH_SHORT).show();
            }
        }
    });
}

public class ImageAdapter extends BaseAdapter {
    private Context mContext;

    public ImageAdapter(Context c) {
        mContext = c;
    }

    public int getCount() {
        return mThumbIds.length;
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return mFullSizeIds[position];
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;

        if (convertView == null) {  
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(300, 250));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
        } else {
            imageView = (ImageView) convertView;
        }

        imageView.setImageResource(mThumbIds[position]);

        return imageView;
    }

    // references to our images
    private Integer[] mThumbIds = {
            R.drawable.wallpaper1t, 
            R.drawable.wallpaper2t, 
            R.drawable.wallpaper3t, 
            R.drawable.wallpaper4t, 
            R.drawable.wallpaper5t, 
            R.drawable.wallpaper6t, 
            R.drawable.wallpaper7t, 
            R.drawable.wallpaper8t
    };

    private Integer[] mFullSizeIds = {
            R.drawable.wallpaper1, 
            R.drawable.wallpaper2, 
            R.drawable.wallpaper3, 
            R.drawable.wallpaper4, 
            R.drawable.wallpaper5, 
            R.drawable.wallpaper6, 
            R.drawable.wallpaper7, 
            R.drawable.wallpaper8
    };
} 
```

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/gridview"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:numColumns="auto_fit"
    android:verticalSpacing="10dp"
    android:horizontalSpacing="10dp"
    android:stretchMode="columnWidth"
    android:gravity="center"/> 
```

也许，这可以帮助你很多。

# android - Android EditTextView 上的自动完成掩码

> ID：10978443
> 
> 赞同：0
> 
> 时间：2012-06-11T10:31:39.607
> 
> 标签：android, android-layout, android-edittext

我需要一个方法。请帮帮我。

我正在开发一个应用程序，我需要从用户那里获取价格作为输入。我需要带有自动完成掩码的 EditTextView。

就像用户想要输入 100500 一样，会自动将一个字符串替换为输入值，即 $100,500.00

我认为这足以解释我实际需要什么。请就此向我提出建议。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:10:09.970

您可以在 EditText 上添加一个 TextWatcher，如下所示。在 onTextChanged 方法中，您需要分析和修改用户当前输入（在 CharSequence 中），然后更新您的 EditText (text.setText("yourModifiedText"))

```
EditText text = (EditText) findViewById(R.id.YOUR_ID);
text.addTextChangedListener(textWatcher);

private TextWatcher textWatcher = new TextWatcher() {

  public void afterTextChanged(Editable s) {
  }

  public void beforeTextChanged(CharSequence s, int start, intcount, int after) {
  }

  public void onTextChanged(CharSequence s, int start, int before,
          int count) {

  }
} 
```

# python - Python GTK3 Evince 查看器 - 如何重新加载文档？

> ID：10978447
> 
> 赞同：2
> 
> 时间：2012-06-11T10:31:55.957
> 
> 标签：python, pdf, gtk

这是从[这里开始](https://stackoverflow.com/questions/8942604/embed-evince-python-gi)的后续行动。我正在尝试重新加载 pdf 文件。基本上我想观看 pdf 文件，当它发生变化时，在查看器中重新加载它。我找不到任何有关 python+gtk3 和 evince 的文档。

```
#!/usr/bin/env python

from gi.repository import Gtk, Gdk
from gi.repository import EvinceDocument
from gi.repository import EvinceView
import os,sys

if (len(sys.argv) is not 2):
    print "Usage: "+sys.argv[0]+" file.ext"
    sys.exit(0)
else:
    docFile=os.path.abspath(sys.argv[1])

#==========================================================
# Evince viewer class
class EvinceViewer:

    #------------------------------------------------------
    # constructor to build GUI and hook up function
    def __init__(self):

        # create main window
        self.window = Gtk.Window()
        # set title, size, position
        self.window.set_title("Evince")
        self.window.set_default_size(800,600)
        # connect destroy and delete events to quit
        self.window.connect('destroy', Gtk.main_quit)
        self.window.connect('delete-event', 
                Gtk.main_quit)
        self.window.connect("key-press-event", 
                self.keypress)

        # scrolled window for the viewer
        scroll = Gtk.ScrolledWindow()
        self.window.add(scroll)

        # evince document
        EvinceDocument.init()
        doc = EvinceDocument.Document.factory_get_document(
                'file://'+docFile)
        # evince view
        self.view = EvinceView.View()
        # evince model
        self.model = EvinceView.DocumentModel()
        self.model.set_document(doc)
        self.view.set_model(self.model)

        # add to scroll window
        scroll.add(self.view)
        self.window.show_all()
        self.fullscreen=False

    #------------------------------------------------------
    # handling keyboard events
    def keypress(self,widget,event):
        keyname = Gdk.keyval_name(event.keyval)
        ctrl = event.state & \
                Gdk.ModifierType.CONTROL_MASK

        if ctrl:

            if keyname=='r':
                self.view.reload()

            elif keyname == 'Return':
                if self.fullscreen == False:
                    self.fullscreen=True
                    self.window.fullscreen()
                else:
                    self.fullscreen=False
                    self.window.unfullscreen()

            elif keyname=='q':
                Gtk.main_quit()

    def main(self):
        Gtk.main()

if __name__ == "__main__":
    evinceViewer = EvinceViewer()
    evinceViewer.main() 
```

重新加载功能似乎没有完成这项工作。出了什么问题？调用它时，文档查看器会显示 pdf 文件的混乱版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T03:59:04.130

根据[http://git.gnome.org/browse/evince/tree/libview/ev-view.c](http://git.gnome.org/browse/evince/tree/libview/ev-view.c)，`ev_view_reload`只`ev_view_reload_page`重绘页面；他们没有完成重新阅读文档。在您的情况下，如果您在不让库知道的情况下更改文件，它将假定文件没有更改并尝试使用内存中的引用表来呈现文档，从而导致其行为不正常。如果您更改文档，您将不得不重新加载文档本身。

为此（第 63-64 行）：

```
if keyname=='r':
    self.model.get_document().load('file://'+docFile) # <- ADD THIS LINE
    self.view.reload() 
```

这实际上会导致库完全重新读取 PDF 文件的内容。

# cakephp-1.3 - CakePHP 路由 URL

> ID：10978448
> 
> 赞同：1
> 
> 时间：2012-06-11T10:32:00.063
> 
> 标签：cakephp-1.3

我想添加功能来检查会话 ao。我创建了一个函数，就像`checkSession`在我的`app_controller`. 现在，应用程序第一次加载时会重定向到*admin/users/login* 页面。

在这个登录表单中，如果我插入正确的数据，那么它会重定向到我的应用程序主页。成功登录后，我的用户 admin 前缀`application.so`我想重定向到*localhost/appName/admin*所以我编写了以下代码：

```
$this->redirect(Router::url("/admin",true)); 
```

它在本地工作正常，但是当我将它上传到服务器上时，它会显示错误，例如

```
Warning (2): Cannot modify header information - headers already sent by (output started at /Applications/MAMP/htdocs/pms/app/controllers/users_controller.php:192) 
```

192行的代码是

```
$this->redirect(Router::url("/admin",true)); 
```

你能建议我它的替代选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T22:19:38.540

> “警告（2）：无法修改标头信息 - 标头已发送（输出开始于 /Applications/MAMP/htdocs/pms/app/controllers/users_controller.php:192）”

当您打印某些内容然后尝试设置标头（例如用于重定向的 Location 标头）时，会出现“标头已发送”消息。只需确保在调用 $this->redirect 方法之前没有向浏览器发送任何内容（打印）。

# ruby-on-rails - Ruby on Rails：选择除一个以外的所有 id

> ID：10978450
> 
> 赞同：2
> 
> 时间：2012-06-11T10:32:09.977
> 
> 标签：ruby-on-rails, ruby, request

我想选择除第一个之外的所有 id。
User.find(:all) 调用所有 id，但我怎样才能例外？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T10:51:35.077

通过单个查询：

```
User.offset(1).pluck(:id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:38:20.280

会给你除了第一个之外的所有 id

```
User.where(:_id.ne => User.first.id).map(&:_id) 
```

# java - 尝试在 Eclipse 中更改 Appengine JAVA SDK

> ID：10978451
> 
> 赞同：0
> 
> 时间：2012-06-11T10:32:10.850
> 
> 标签：java, eclipse, google-app-engine, eclipse-plugin, google-app-engine-patch

我已将 Eclipse 插件升级到 3.7，将 JAVA SDK 升级到 1.6.6。我注意到一些问题，所以我试图回到 1.6.5 但 Eclipse 插件总是将 1.6.6 jar 复制到 WEB-INF。我必须做什么才能强制插件更改为 1.6.5？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T01:34:17.607

您是否尝试过手动删除新的 JAR，然后将旧的 JAR 复制到您的`WEB_INF/lib`.
插件在编译过程中会自动在库中添加新的 JAR 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:09:20.007

右键单击顶级文件夹并选择应该是最后一件事的属性。查看 Java Build Path 并单击 Libraries 选项卡。您可以从那里配置项目使用的 SDK。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T11:51:05.313

转到“帮助”-“关于 Eclipse”-选择“安装详细信息”-选择“安装历史记录”选项卡

它将显示最近安装的历史记录。

在那里，您可以选择“删除”或“还原”已完成的安装。

# iphone - 从另一个应用程序（如电子邮件/网络浏览器）启动 iPad 应用程序

> ID：10978452
> 
> 赞同：1
> 
> 时间：2012-06-11T10:32:13.460
> 
> 标签：iphone, objective-c, ios, xcode, ipad

如何从另一个原生 iPad 应用程序（例如电子邮件或网络浏览器）启动我的 iPad 应用程序。我对目标 C 很陌生。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T10:33:30.153

您正在寻找的是所谓的`Custom URL Scheme`应用程序。您可以在此处找到更多信息和有关如何完成此操作的精彩文章：

[http://mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html](http://mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)

# php - 如何从数据库中选择随机 ID，不包括已删除的 ID？

> ID：10978454
> 
> 赞同：2
> 
> 时间：2012-06-11T10:32:26.273
> 
> 标签：php, mysql, codeigniter, random

我有一个“横幅”表，其中包含图像名称和图像文件的路径，每次访问者导航到另一个页面时都会随机查看这些文件。

横幅表由banner_id（auto_increment、unique、primary、tinyint）、banner_name（varchar）和banner_path（varchar）字段组成。

横幅表可通过控制面板进行编辑。新的横幅将被添加，一些横幅将在一段时间后被删除，并且可能会被更新。一般的 CRUD 操作，你知道的...

现在......因为我的目标是随机显示横幅，我需要一个随机数生成器函数，它可以排除特定的横幅。

为了更清楚，

假设我的表如下所示：

```
banner_id     banner_name     banner_path
---------     ------------    ------------
1             First Banner    first_banner.jpg
2             Second Banner   second_banner.jpg
3             Third Banner    third_banner.jpg 
```

我可以通过使用这样的 PHP 函数轻松获取随机 ID：`mt_random(1, 3);`

可是等等。如果我删除这些横幅之一怎么办？

```
banner_id     banner_name     banner_path
---------     ------------    ------------
1             First Banner    first_banner.jpg
3             Third Banner    third_banner.jpg 
```

在这种情况下，当随机输出变为“2”时，会发生什么？没有“2”banner_id'd 行？所以我必须从随机生成器编号范围中排除 DELETED id。这会是最好的做法吗？如果是这样，我该怎么做？

我完全愿意接受任何有助于我做我想做的事情的新想法。

请帮我解决这个问题...

谢谢

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:44:09.530

```
SELECT FLOOR(RAND() * COUNT(*)) INTO @offset FROM banners;
SELECT * FROM banners LIMIT @offset, 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:38:02.887

为什么不直接选择随机行而不是使用 PHP 来选择要显示的随机 ID？

```
SELECT * FROM `banners` ORDER BY RAND() LIMIT 0,1; 
```

如果你有一个 ID 数组要排除

```
SELECT * FROM `banners` 
WHERE `banner_id` NOT IN (/* array values*/) 
ORDER BY RAND() LIMIT 0,1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T10:38:49.857

假设你可以忍受小比赛窗口，你可以做

```
SELECT FLOOR(RAND()*COUNT(*)) AS bannercount FROM banners; 
```

并将其放入`$bannercount`，下一次运行

```
SELECT * FROM banners ORDER BY banner_id LIMIT $bannercount,1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T10:39:05.877

您将从可用的 id 创建一个数组并从该数组生成随机数

# jsf-2 - 通过重定向的方式处理 viewExpiredexception

> ID：10978457
> 
> 赞同：1
> 
> 时间：2012-06-11T10:32:40.000
> 
> 标签：jsf-2

我一直在尝试缓存和处理`viewExpiredexception`如果抛出 `viewExpiredexceptionviewExpiredexception 的位置，我编写了一个自定义 viewExpiredexception 处理程序，它假设重定向回抛出异常的页面，我还在会话中插入一个布尔值，用于redicted 页面显示“页面已刷新”消息。

下面是我的 ViewExpiredException 处理程序的相关部分：

```
 public void handle() throws FacesException {
            for (Iterator<ExceptionQueuedEvent> i = getUnhandledExceptionQueuedEvents().iterator(); i.hasNext();) {
                ExceptionQueuedEvent event = i.next();
                ExceptionQueuedEventContext context = (ExceptionQueuedEventContext) event.getSource();
                Throwable t = context.getException();
                if (t instanceof ViewExpiredException) {
                    ViewExpiredException vee = (ViewExpiredException) t;
                    FacesContext fc = FacesContext.getCurrentInstance();
                    Map<String, Object> requestMap = fc.getExternalContext().getRequestMap();
                    NavigationHandler nav =  fc.getApplication().getNavigationHandler();
                    try {
                        requestMap.put("currentViewId", vee.getViewId());
                        HttpServletRequest orgRequest = (HttpServletRequest) fc.getExternalContext().getRequest();
                        fc.getExternalContext().redirect(orgRequest.getRequestURI());
                        Map<String, Object> sessionMap = FacesContext.getCurrentInstance().getExternalContext().getSessionMap();
                        sessionMap.put("refreshedMaxSesion",true);
                        fc.renderResponse();
                    }
                    catch(IOException e){   }
                    finally {   i.remove(); }
                }
            }
            // here queue will not contain any ViewExpiredEvents, let the parent handle them.
            getWrapped().handle();
      } 
```

和导航案例

```
 <navigation-rule>
              <navigation-case>
               <from-outcome>/app/ord1</from-outcome>
               <to-view-id>/jsp/orderHist.jsp</to-view-id>
               <redirect />
              </navigation-case>
            </navigation-rule> 
```

我在上述方面的成功有限，它在某些情况下会起作用，但在其他情况下，页面根本不会重定向。它主要在 chrome 中工作，但在 IE 中它根本不起作用。

我尝试进行一些更改，例如使用

```
 HttpServletResponse response = (HttpServletResponse) fc.getExternalContext().getResponse();
       response.sendRedirect(vee.getViewId()); 
```

但我收到了 500 个错误页面，但有例外说`View must Exists...`，所以我停止尝试先找出我做错了什么。如何归档 ViewExpiredException 并将重定向回引发错误的页面的目标？

我在 myFaces (2.1.7) 和 richFaces (3.3.3) 上。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:12:05.167

MyFaces 社区内部已经完成了一些工作，以优雅的方式处理 ViewExpiredException。MyFaces Core 中已经解决了一些问题（请参阅[MYFACES-3530](https://issues.apache.org/jira/browse/MYFACES-3530)和[MYFACES-3531](https://issues.apache.org/jira/browse/MYFACES-3531)）也许你应该在[这里](https://repository.apache.org/content/groups/snapshots/org/apache/myfaces/core/)尝试最新的快照。

# facebook - 发布到 facebook 链接

> ID：10978461
> 
> 赞同：1
> 
> 时间：2012-06-11T10:32:51.260
> 
> 标签：facebook, post

我有一个游戏网站，我想从我的游戏网站发布到 Facebook。

我环顾四周，我只能找到您可以共享链接。但我希望我的按钮发布类似“**我刚刚在 Blahblahland 杀死了 John Smith** ”之类的内容。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:36:02.960

你需要看看 Open Graph 的故事。

[http://developers.facebook.com/docs/bestpractices/creating-actions-objects/](http://developers.facebook.com/docs/bestpractices/creating-actions-objects/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:37:50.657

使用`Graph API`和 POST a`Post object`到`feed`User 对象的连接。

或者有，`stream.publish`但听说它很快就会贬值。

此链接可能会对您有所帮助。[关联](http://www.terabug.com/publish-site-content-to-facebook-wall-publish-wall-post-publish-stream-js-api-tutorial/)

# c# - Linq - 无法隐式转换类型'IEnumerable >' 到 'IEnumerable<.XElement>'

> ID：10978471
> 
> 赞同：2
> 
> 时间：2012-06-11T10:33:31.750
> 
> 标签：c#, linq, c#-4.0, linq-to-xml

我收到以下错误：

```
Cannot implicitly convert type 'System.Collections.Generic.IEnumerable<System.Collections.Generic.IEnumerable<System.Xml.Linq.XElement>>' to 'System.Collections.Generic.IEnumerable<System.Xml.Linq.XElement>'. An explicit conversion exists (are you missing a cast?) 
```

我不明白为什么。在这里，您有我的代码，我在其中尝试获取属性与以下相同的`DataContainer`元素：`Name``name.key`

```
 XDocument xml = XDocument.Load(name.Value);
 IEnumerable<XElement> columns = from d in xml.Descendants("DataContainer")
                         where (d.Attribute("Name").Value.Equals(name.Key))
                         select d.Descendants("ArrayOfColumn"); 
```

这里有我的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<DataContainers>
    <DataContainer xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" Name="IRS vs E3M" Currency="EUR">
        <ArrayOfColumn Name="Maturite" isData="false">
            <Line Value="1Y" />
            <Line Value="2Y" />
            <Line Value="3Y" />
            <Line Value="4Y" />
            <Line Value="5Y" />
            <Line Value="6Y" />
            <Line Value="7Y" />
            <Line Value="8Y" />
            <Line Value="9Y" />
            <Line Value="10Y" />
            <Line Value="15Y" />
            <Line Value="20Y" />
            <Line Value="30Y" />
            <Line Value="40Y" />
            <Line Value="50Y" />
            <Line Value="60Y" />
        </ArrayOfColumn>
        <ArrayOfColumn Name="Value" isData="true">
            <Line Value="EURAB3E1Y" />
            <Line Value="EURAB3E2Y" />
            <Line Value="EURAB3E3Y" />
            <Line Value="EURAB3E4Y" />
            <Line Value="EURAB3E5Y" />
            <Line Value="EURAB3E6Y" />
            <Line Value="EURAB3E7Y" />
            <Line Value="EURAB3E8Y" />
            <Line Value="EURAB3E9Y" />
            <Line Value="EURAB3E10Y" />
            <Line Value="EURAB3E15Y" />
            <Line Value="EURAB3E20Y" />
            <Line Value="EURAB3E30Y" />
            <Line Value="EURAB3E40Y" />
            <Line Value="EURAB3E50Y" />
            <Line Value="EURAB6E60Y" />
        </ArrayOfColumn>
    </DataContainer>
</DataContainers> 
```

有人可以帮助我并解释为什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T10:38:20.123

问题是您`d`是后代的集合，然后您正在过滤它们并从通过过滤器的任何后代中提取更多后代。

即使您的过滤器只匹配一个元素，系统仍会将其视为一个集合。如果你知道只有一个结果，那么你可以`.Single()`在拉后代之前使用 d 上的方法。例如：

```
XDocument xml = XDocument.Load(name.Value); 
IEnumerable<XElement> columns = xml.Descendants("DataContainer") 
                                   .Where(d => d.Attribute("Name").Value.Equals(name.Key)) 
                                   .Single()
                                   .Select(d => d.Descendants("ArrayOfColumn")); 
```

我已将其更改为方法链接，因为它为此更好地流动。另请注意，可以将 where 表达式放入单个方法中，但是这样看起来更清楚。

# tiles - Ray Wenderlich 的 A* 寻路教程

> ID：10978472
> 
> 赞同：1
> 
> 时间：2012-06-11T10:33:33.180
> 
> 标签：tiles, path-finding, a-star, multi-level

我是 Ray Wenderlich 教程的忠实粉丝，如果您还没有看过它们，请查看它们。我正在使用他的 A* 寻路游戏开发游戏。我喜欢你互动的方式，但我不知道如何制作这个多层次的。我开发了更多关卡并将它们保存为正确的 .TMX 格式，但是我无法理解如何将其链接到 Xcode。

提前谢谢你。

# django - 用 curl 附加多个查询字符串变量

> ID：10978474
> 
> 赞同：28
> 
> 时间：2012-06-11T10:33:33.557
> 
> 标签：django, curl, tastypie

当我尝试在我的 ModelResource 中使用 authentication = ApiKeyAuthentication() 时，我不断收到 401 响应。我查看了[Django Tastypie: How to Authenticate with API Key](https://stackoverflow.com/questions/7814128/django-tastypie-how-to-authenticate-with-api-key)，他使用 get 参数解决了他的问题。如果我尝试使用获取参数，它会选择用户名而不是 api_key！

**这适用于浏览器**

```
http://127.0.0.1:8000/api/v1/spot/8/?username=darren&api_key=9999d318e43b8055ae32d011be5b045ad61dad50 
```

**在终端中通过 curl 发送不会获取 api_key 参数**

```
curl --dump-header - http://127.0.0.1:8000/api/v1/spot/8/?username=darren&api_key=9999d318e43b8055ae32d011be5b045ad61dad50 
```

为什么当使用 curl 并附加 2 个查询字符串参数`?username=darren&api_key=9999d318e43b8055ae32d011be5b045ad61dad50`时，它只拾取第一个。这不是正确的方法吗？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-06-11T13:56:59.933

在命令行中键入`&`意味着在后台运行前面的命令（感谢@Maccesch），因为这之后的任何内容`&`都被视为新命令。

尝试将 url 用引号括起来。

`curl --dump-header - "http://127.0.0.1:8000/api/v1/spot/8/?username=darren&api_key=9999d318e43b8055ae32d011be5b045ad61dad50"`

# c#-4.0 - XSLT 应用于外部 CSV 文件，如何？

> ID：10978477
> 
> 赞同：0
> 
> 时间：2012-06-11T10:34:00.390
> 
> 标签：c#-4.0, xslt

我有一些代码加载到 xml 文件中，并使用“XslCompiledTransform”对其应用 XSLT。我现在需要更改代码，因为输入文件可能不是 XML，也可能是 CSV 文件。我有一个 XSLT，可以将 CSV 转换为我想要的格式，但它使用硬编码路径。我遇到的问题是输入文件名会改变，所以我可以在名称中使用宽卡吗？其次，在代码中，我可以将文件作为字符串传递给 XSLT 对象并让结果落在底部吗？我一直在做一些谷歌搜索，但没有找到任何代码来做到这一点。甚至可能吗？

这是我正在使用的 XSLT。不是硬编码的路径和文件名。

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:fn="fn"
    exclude-result-prefixes="xs fn">

<xsl:output indent="yes" encoding="US-ASCII"/>

<xsl:param name="pathToCSV" select="'file:///C:/Downloads/inputcsv.csv'"/>

<xsl:function name="fn:getTokens" as="xs:string+">
    <xsl:param name="str" as="xs:string"/>
        <xsl:analyze-string select="concat($str, ',')" regex='(("[^"]*")+|[^,]*),'>
            <xsl:matching-substring>
                <xsl:sequence select='replace(regex-group(1), "^""|""$|("")""", "$1")'/>
            </xsl:matching-substring>
        </xsl:analyze-string>
</xsl:function>

<xsl:template match="/" name="main">
    <xsl:choose>
        <xsl:when test="unparsed-text-available($pathToCSV)">
            <xsl:variable name="csv" select="unparsed-text($pathToCSV)"/>
            <xsl:variable name="lines" select="tokenize($csv, '&#xD;')" as="xs:string+"/>
            <xsl:variable name="elemNames" select="fn:getTokens($lines[1])" as="xs:string+"/>
            <root>
                <xsl:for-each select="$lines[position() > 0]">
                    <row>
                        <xsl:variable name="lineItems" select="fn:getTokens(.)" as="xs:string+"/>

                        <xsl:for-each select="$elemNames">
                            <xsl:variable name="pos" select="position()"/>
                            <column>
                                <xsl:value-of select="$lineItems[$pos]"/>
                            </column>
                        </xsl:for-each>
                    </row>
                </xsl:for-each>
            </root>
        </xsl:when>
        <xsl:otherwise>
            <xsl:text>Cannot locate : </xsl:text><xsl:value-of select="$pathToCSV"/>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:47:58.700

那么 XslCompiledTransform 是一个 XSLT 1.0 处理器，因此使用 XslCompiledTransform 无法使用 XSLT 2.0 功能`unparsed-text`，您需要使用 Saxon 9 或 XmlPrime 或 AltovaXML 用于 XSLT 2.0。

然后您可以将一个参数传递给您发布的样式表，因为它具有全局`xsl:param`命名`pathToCSV`，您如何传递该参数取决于您要使用的 XSLT 处理器的 API（或者如果您只想执行它的命令行参数，来自命令行的样式表）。

# mysql - MYSQL - 将结果集 A 添加到结果集 B？请看我的例子

> ID：10978481
> 
> 赞同：0
> 
> 时间：2012-06-11T10:34:30.810
> 
> 标签：mysql, join

我有两个mysql表。

它们以这种方式布置：

```
user_info

id | emailContact
_______________________
 1 | person@example.com
 3 | anotherPerson@example.com

user_biz_info

id | emailContact
_________________________
 8 | business@example.com
 9 | anotherBusiness@example.com 
```

我将使用什么样的连接来创建这样的信息结果集：

```
id | emailContact
________________________________
1 - person@example.com
3 - anotherPerson@example.com
8 - business@example.com
9 - anotherBusiness@example.com 
```

我尝试了以下方法：

```
SELECT p.id, p.emailContact, b.id, b.emailContact
FROM user_info p, user_business_info b 
```

但似乎这是一种不正确的做法。

有人可以在此建议正确的方法，或者可能将我指向一些涵盖此类 mysql 连接的教程的方向，因为这是我认为在这种情况下需要的。

感谢您花时间阅读我的问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:36:12.290

使用[`UNION`](http://dev.mysql.com/doc/en/union.html)：

```
SELECT id, emailContact FROM user_info
UNION ALL
SELECT id, emailContact FROM user_business_info 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T10:36:44.400

使用 UNION

例如

```
SELECT p.id, p.emailContact FROM user_info p
UNION
SELECT b.id, b.emailContact FROM user_business_info b 
```

# visual-studio-2010 - 使用 .Net 框架动态生成状态机

> ID：10978483
> 
> 赞同：1
> 
> 时间：2012-06-11T10:34:34.417
> 
> 标签：visual-studio-2010, .net-4.0, workflow, workflow-foundation-4, state-machine

我正在尝试使用状态机（.Net 框架 4.0 更新 1）对给定问题建模，并且想知道是否可以在运行时向状态机添加新状态？

我想将街道结构建模为状态机。用户将在地图上定义他的目的地，我想将其用作状态机的状态。

任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T22:04:58.947

这是@RonJacobs 的一篇博客文章，他在其中创建了一个库原型，可以更直接地做到这一点——你可能想看看。

[http://blogs.msdn.com/b/rjacobs/archive/2011/06/08/creating-a-state-machine-in-code.aspx](http://blogs.msdn.com/b/rjacobs/archive/2011/06/08/creating-a-state-machine-in-code.aspx)

这是他的一篇博客文章，它正在代码中创建工作流，状态机不会有太大不同，它只是在根目录下利用不同的访问器。

[http://blogs.msdn.com/b/rjacobs/archive/2011/06/22/authoring-activities-in-code-or-xaml.aspx](http://blogs.msdn.com/b/rjacobs/archive/2011/06/22/authoring-activities-in-code-or-xaml.aspx)

这是另一个显示如何从数据库加载工作流的方法。

[http://blogs.msdn.com/b/rjacobs/archive/2011/06/15/how-to-load-wf4-workflow-services-from-a-database-with-iis-appfabric.aspx](http://blogs.msdn.com/b/rjacobs/archive/2011/06/15/how-to-load-wf4-workflow-services-from-a-database-with-iis-appfabric.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T21:02:14.257

如果你想编辑你的状态机然后启动它的新实例，没问题。在代码中添加所需的状态和转换，然后使用新的工作流定义启动新实例。

如果您需要编辑已在运行的状态机的定义，则需要使用动态更新功能（在 .NET 4.5 中，目前处于 Beta 版）之类的功能。

# java - 唤醒睡眠分离的java进程

> ID：10978486
> 
> 赞同：0
> 
> 时间：2012-06-11T10:34:55.997
> 
> 标签：java, linux, process, cpu, scheduling

我写了一个 Java 程序，它分析其他程序。执行可能需要很长时间（= 天）。现在（三天后），我遇到了问题，我的程序/进程正在休眠（S）。它仍然分配了 50% 的内存，有时它会打印新的输出，但*top*显示时间必须为 0% CPU。

我使用*jstack*来确定仍然有可运行的线程。因此，这似乎不是一个死锁问题。我不知道，为什么进程没有得到更多的cpu时间。我偶然发现了从 0 到*-10*的 java 进程的好处，但什么也没发生。

更多详细信息：该进程在 linux 服务器上运行：Ubuntu 10.04.4 LTS。*我从screen*开始我的过程。所以，我不必一直登录。

```
screen -S analyse ant myParameters 
```

服务器几乎无事可做。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:23:42.977

以调试模式启动您的程序。然后，您可以使用任何 Java 调试器附加到它并检查它在做什么。

# matlab - 如何在matlab中选择每一行作为一个元素

> ID：10978495
> 
> 赞同：0
> 
> 时间：2012-06-11T10:35:26.130
> 
> 标签：matlab

我在 matlab 中有一个函数，它接受一个 nx1 矩阵。

我有一个 nx2 暗淡的矩阵 X

如何将矩阵 X 发送到 X 的每一行作为元素的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:38:44.533

如果我理解正确，你必须做类似的事情

```
for i=1:size(X,1)

  f(X(i,:)');

end 
```

这意味着您将每一行`f`按顺序传递给函数，转置为列向量。

相反，如果您想`X`对行进行线性化，则必须执行以下操作：

```
Xlin = reshape(X',numel(X),1);
f(Xlin); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T10:45:11.603

[有关索引矩阵的信息和示例，请查看 MathWorks 网站上的MATLAB](http://www.mathworks.co.uk/company/newsletters/articles/Matrix-Indexing-in-MATLAB/matrix.html)文章中的此矩阵索引。要从矩阵中选择行，您可以执行以下操作：

```
>> m = rand(5, 2)

m =

    0.8147    0.0975
    0.9058    0.2785
    0.1270    0.5469
    0.9134    0.9575
    0.6324    0.9649

>> m(1,:)        

ans =

    0.8147    0.0975

>> m(end,:)      

ans =

    0.6324    0.9649 
```

矩阵的第一个索引对应于*行*，第二个索引对应于*列*。这里`:`作为第二个索引选择适当行的所有列。如果您有一个函数`func`，并且上面的矩阵`m`，您可以将每一行传递`m`给`func`如下：

```
for i = 1:length(m)
    func(m(1,:)')
end 
```

注意转置，它将每一行转换`m`为一个`2x1`数组，即一个列向量，而不是一个行向量。

# gdb - 如何使用 gdb 捕获程序的“退出”

> ID：10978496
> 
> 赞同：10
> 
> 时间：2012-06-11T10:35:29.500
> 
> 标签：gdb

我正在调试一个相当复杂的项目，我有它的源代码，目前我需要知道守护进程在某些情况下退出时的堆栈跟踪，但是遍历整个代码非常耗时，我想使用 gdb 来帮助这个，但是像“catch exit”这样的命令不起作用，它告诉我“Catch of exit not yet implemented”，所以谁能告诉我如何使用 gdb 来捕捉守护进程的退出事件？谢谢你。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-05-01T14:59:25.877

```
(gdb) catch syscall 60
Catchpoint 3 (syscall 'exit' [60])
(gdb) catch syscall 231
Catchpoint 4 (syscall 'exit_group' [231]) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-11T15:14:26.810

`exit`我认为只是为,`_exit`和设置断点`abort`应该会让你走得很远。

# c# - 无法使用 [] 将索引应用于“方法组”类型的表达式

> ID：10978497
> 
> 赞同：0
> 
> 时间：2012-06-11T10:35:29.810
> 
> 标签：c#, c#-4.0

查询执行后，我需要获取的结果是 UserNames 部分。

我收到一个错误：无法使用 [] 将索引应用于“方法组”类型的表达式

```
public class ProcessInput
{
    string connectionString = (string)ConfigurationSettings.AppSettings["myConString"];
    private string msg_arr;
    string username = null;

    private void MooseSeenInput(string MobileNo, string Date, string odd, params Array[] msg_arr)
    {
        SqlConnection conn = new SqlConnection(myConString);
        conn.Open();
        SqlCommand com = new SqlCommand("SELECT * FROM Users as users WHERE UserName=@UserName AND State!='1' AND State!='4'", conn);
        com.Parameters.AddWithValue("@UserName", UserName);
        // com.ExecuteNonQuery();
        using (SqlDataReader reader = com.ExecuteReader())
        {
            if (reader.HasRows)
            {
                while (reader.Read())
                {
                    String UserNames = (reader.Read["users"]);
                }
            }
        }
    }
} 
```

错误发生在以下行：

```
String UserNames = (reader.Read["users"]); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T10:38:00.530

采用

```
 String UserNames = reader.GetString(0); 
```

正如@leppie 在其评论中指出的那样，您还可以使用字段名称作为索引器
所以假设该字段被命名`users`，您也可以这样写：

```
 String UserNames = reader["users"].ToString(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T10:38:01.403

很确定你只是想做：

```
String UserNames = reader["users"] as string; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-11T10:41:35.923

您的错误是编译器错误，因为您试图将索引语法应用于方法调用，在 C# 中涉及括号。

确实公开了一个索引器`SqlDataReader`，但它在阅读器本身上，而不是方法成员：

```
string username = (string)reader["users"]; 
```

这就是我倾向于设计这段代码的方式：

```
using (SqlDataReader reader = com.ExecuteReader())
{
    int userOrd = reader.GetOrdinal("users");

    while (reader.Read())
    {
        string username = reader.GetString(userOrd);
    }
} 
```

请注意，在迭代未知数量的记录之前，我会向读者询问序数。这有两个好处：

1.  我已经缓存了一次序数并多次使用它，这有助于提高性能。
2.  我***没有****对序数进行硬编码*，因此如果有人要更改存储过程/脚本中结果集中的列位置，我的代码将继续工作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-11T10:41:14.940

```
String UserNames;
if(reader["users"]!=null)     
UserNames = (string)reader["users"];//or reader["users"].ToString(); 
```

# sql - 使用左外连接获取记录

> ID：10978500
> 
> 赞同：-2
> 
> 时间：2012-06-11T10:35:44.540
> 
> 标签：sql, sql-server-2008

我有两个表格，如下所示

```
 Table A                Table B             Table C              
  =============          ==============        =========
    Id    Name           Id   AId  CId         Id   Name 
    1     A              1    1    1           1    x
    2     B              2    1    1           2    y
    3     C              3    2    1           3    z 
    4     D              4    2    3           4    w
    5     E              5    3    2           5    v 
```

现在我想要表 A 的所有记录，其中表 B 的 ID 列 CId 匹配，其中 CId = 1。

所以输出应该如下所示：

```
Id Name CId
1   A   1 
2   B   1
3   C   1
4   D   Null
5   E   Null 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T10:43:44.240

这可以满足您的要求：

```
SELECT
A.Id,
A.Name,
CASE B.CId WHEN 1 THEN 1 ELSE NULL END AS CId
FROM
A LEFT JOIN B ON A.Id = B.Id 
```

~~这与 LEFT JOINing 无关。您也可以使用 INNER JOIN 来做到这一点。当您不希望出现 CId 列的 3 和 2 时，您仍然必须使用 WHERE 进行过滤，因此 Id 为 4 和 5 的行不会出现，这不是您想要的。~~

**编辑：**

鉴于此测试数据：

```
create table A (Id int, Name varchar(5));
insert into A values 
(1, 'A'),
(2, 'B'),
(3, 'C'),
(4, 'D'),
(5, 'E');

create table B (Id int, AId int, CId int);
insert into B values
(1,1,1),
(2,1,1),
(3,2,1),
(4,2,3),
(5,3,2); 
```

我的查询**没有**给出笛卡尔积。在投票之前阅读并尝试。无论如何，我不清楚你想要实现什么，现在我加入了 AId 列并使用这个查询：

```
SELECT DISTINCT
A.Id,
A.Name
, CASE 
WHEN B.CId > 1 THEN 1 
WHEN B.CId = 1 THEN 1
ELSE NULL END AS CId
FROM
A LEFT JOIN B ON A.Id = B.AId 
```

它还提供了正确的输出，就像之前的第一个一样。如果这仍然不是您想要的，那么您的测试数据是错误的，或者我绝对不明白。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-11T10:42:26.720

尝试这样的事情：

```
SELECT TableA.Id, TableA.Name, TableB.CId
FROM TableA 
LEFT OUTER JOIN TableB ON TableA.Id = TableB.CId 
WHERE TableB.CId = 1 
```

希望这可以帮助。

**编辑：如果您将 TableA 的 ID 列与 TableB 的 ID 列匹配，而****不是 TableB 的 CId 列**
，则可以实现您想要的输出。试试下面我在我的电脑上测试过的，并给你你需要的类似输出。

 **```
select TableA.Id, TableA.Name, TableB.CId  
from TableA 
left outer join TableB on TableA.Id = TableB.Id 
and TableB.CId in 
(
select TableB.CId  
from TableB 
left outer join TableC on TableB.CId = TableC.Id 
WHERE TableB.CId = 1 
) 
group by TableA.Id, TableA.Name, TableB.CId 
```

如果我猜对了请告知。检查列名。**

# java - NoSuchProviderException：带有 log4j SMTP 附加程序的 smtp

> ID：10978501
> 
> 赞同：1
> 
> 时间：2012-06-11T10:35:47.520
> 
> 标签：java, log4j, jms, jakarta-mail, slf4j

出现异常时，我正在使用 log4j 发送电子邮件。下面是我的 log4j 属性文件配置。

```
log4j.rootLogger=WARN, R, email
log4j.appender.R=org.apache.log4j.ConsoleAppender
log4j.appender.R.layout=org.apache.log4j.PatternLayout
log4j.appender.R.layout.ConversionPattern=%d{HH:mm:ss} %-5p [%c{1}]: %m%n
log4j.appender.email=org.apache.log4j.net.SMTPAppender
log4j.appender.email.BufferSize=10
log4j.appender.email.SMTPHost=myhost.com
log4j.appender.email.From=abc@some.com
log4j.appender.email.To=abc@some.com
log4j.appender.email.Subject=Error
log4j.appender.email.layout=org.apache.log4j.PatternLayout 
```

我的是 maven 项目，我添加了 mail.jar、activation.jar 和 smtp.jar 的依赖项。但是在**应用程序服务器启动**本身我得到以下错误：

```
[ERROR] log4j:ERROR Error occured while sending e-mail notification.
[ERROR] javax.mail.NoSuchProviderException: smtp
[ERROR]     at javax.mail.Session.getService(Session.java:782)
[ERROR]     at javax.mail.Session.getTransport(Session.java:708)
[ERROR]     at javax.mail.Session.getTransport(Session.java:651)
[ERROR]     at javax.mail.Session.getTransport(Session.java:631)
[ERROR]     at javax.mail.Session.getTransport(Session.java:686)
[ERROR]     at javax.mail.Transport.send0(Transport.java:166) 
```

我在这里想念什么吗？错误的根本原因是什么？是因为**SMTP 主机名不正确**吗？还是因为任何缺失/冲突的依赖关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:21:52.733

您不需要 smtp.jar 和 mail.jar - smtp.jar 中的所有内容也在 mail.jar 中。摆脱 smtp.jar，虽然我怀疑这会解决你的问题。

此外，请确保您的类路径中没有任何其他带有 JavaMail 类的 jar 文件，例如 javaee.jar 或 j2ee.jar。

这很可能是某种类路径问题。JavaMail 使用类加载器来查找配置提供程序的配置文件，例如“smtp”。如果类加载器不正确地处理资源查找，则可能会出现此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-21T17:17:25.687

将您的 JavaMail 升级到 1.5.3，其中包含对[Bug 6668 -skip unusable Store and Transport classes的](https://kenai.com/bugzilla/show_bug.cgi?id=6668)[修复](https://java.net/projects/javamail/sources/mercurial/revision/680)。从错误报告中：

> 在复杂的类加载情况下，JavaMail 类可能有多个副本。一个副本定义的 Store 或 Transport 可能会被另一个副本加载，但由于它们位于不同的 ClassLoader 中，因此无法使用。在这种情况下，JavaMail 应该跳过不可用的类并尝试从另一个 ClassLoader 加载该类。
> 
> 例如，在 GlassFish 中，如果应用程序包含 JavaMail 类，应用程序类加载器被配置为优先使用应用程序类而不是系统类，并且应用程序服务器本身在应用程序的上下文中运行时尝试使用 JavaMail，则可能会发生这种情况。

[您可以从JavaMail 参考实现](https://java.net/projects/javamail/pages/Home)主页下载最新的快照和官方版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:56:26.813

您可能希望导出 smtp.jar 以供您的 webapp 使用。

# jsf-2 - MyFaces 测试框架不适用于 JSF 2.1

> ID：10978502
> 
> 赞同：0
> 
> 时间：2012-06-11T10:35:49.143
> 
> 标签：jsf-2, junit4

我们有很多使用 Myfaces Test Framework for JSF 2.0 的测试。 [http://myfaces.apache.org/test/index.html](http://myfaces.apache.org/test/index.html)

问题是我们不能让它与 JSF 2.1 一起工作。有谁知道解决方法或解决方法？

当我们运行测试时，我们得到以下错误：`java.lang.IllegalStateException: Application was not properly initialized at startup, could not find Factory: javax.faces.application.ApplicationFactory`

不过，它适用于 jsf 2.0。

我们代码中的一个典型用例：

```
// code block;
assertFalse("Error message not expected. ", facesContext
            .getMessages().hasNext()); 
```

JSF 2.1 有一些语法更改，所以我猜这就是问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:04:15.420

MyFaces Test 2.0 适用于 2.0 和 2.1。事实上，MyFaces 2.1 使用 myfaces-test20-1.0.4 作为测试依赖，在代码中你可以找到很多使用该库的测试。

# zend-framework - Zend pdf原点坐标

> ID：10978504
> 
> 赞同：1
> 
> 时间：2012-06-11T10:35:54.460
> 
> 标签：zend-framework, pdf

我正在使用 zend pdf 将一些元素绘制到我现有的 pdf 文件中，但是我有一些问题。有时，原点坐标位于 pdf 的左下角，有时位于左上角。

我该如何管理？

我可以用新的坐标原点覆盖我现有的 pdf 文件吗？

# java - Java Try/Catch 块的基准测试

> ID：10978508
> 
> 赞同：8
> 
> 时间：2012-06-11T10:36:11.480
> 
> 标签：java, try-catch

我知道在执行程序时进入 catch 块有一些显着的成本，但是，我想知道进入 try{} 块是否也有任何影响，所以我开始在谷歌中寻找答案，有很多意见，但没有基准测试全部。我找到的一些答案是：

1.  [Java try/catch 性能，是否建议将 try 子句中的内容保持在最低限度？](https://stackoverflow.com/questions/4280831/java-try-catch-performance-is-it-recommended-to-keep-what-is-inside-the-try-cla)
2.  [尝试 Catch 性能 Java](https://stackoverflow.com/questions/8255878/try-catch-performance-java)
3.  [Java try catch 块](https://stackoverflow.com/questions/5158665/java-try-catch-blocks)

但是他们没有用事实回答我的问题，所以我决定自己尝试一下。

这就是我所做的。我有一个这种格式的 csv 文件：

`host;ip;number;date;status;email;uid;name;lastname;promo_code;`

其中 status 之后的所有内容都是可选的，甚至没有相应的 ; ，所以在解析验证以查看值是否存在时，我想到了 try/catch 问题。

我在公司继承的当前代码是这样做的：

```
StringTokenizer st=new StringTokenizer(line,";");  
String host = st.nextToken();
String ip = st.nextToken();
String number = st.nextToken();
String date = st.nextToken();
String status = st.nextToken();                             
String email = "";
try{
    email = st.nextToken();
}catch(NoSuchElementException e){
    email = "";
} 
```

它使用 uid、name、lastname 和 promo_code 重复对电子邮件所做的操作。

我将所有内容更改为：

```
if(st.hasMoreTokens()){
    email = st.nextToken();
} 
```

事实上它执行得更快。解析没有可选列的文件时。以下是平均时间：

```
 --- Trying:122 milliseconds
 --- Checking:33 milliseconds 
```

但是，这让我感到困惑，也是我要问的原因：当使用 CSV 的所有 8000 行中的可选列的值运行示例时，if() 版本的性能仍然优于 try/catch 版本，所以我的问题是

**try 块真的对我的代码没有任何性能影响吗？**

此示例的平均时间为：

```
--- Trying:105 milliseconds
--- Checking:43 milliseconds 
```

有人可以解释这里发生了什么吗？

非常感谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-11T10:40:04.520

是的，try（在 Java 中）对性能没有任何影响。编译器不会为 try 块生成 VM 语句。它只是记录 try 块处于活动状态的程序计数器，并将此信息附加到类文件中的方法。然后，当抛出异常时，VM 展开堆栈并在每一帧检查该帧中的程序计数器是否在相关的 try 块中。这（连同构建堆栈跟踪）非常昂贵，因此捕获成本很高。但是，尝试是免费的:)。

尽管如此，对常规控制流使用异常并不是一个好习惯。

您的代码执行得更快的原因可能是捕获的成本非常高，以至于它超过了通过简单的尝试替换检查所节省的时间。

Try catch can be faster in code where the catch is triggered not very often, e.g., if you go into the try 10000 times but only catch once, the try method would be faster than the if-check. Still, this is no good style and your way of explicitly checking for more tokens is to be preferred.

# macos - CFBundleCopyExecutableURL 不返回绝对 URL

> ID：10978512
> 
> 赞同：3
> 
> 时间：2012-06-11T10:36:16.163
> 
> 标签：macos, cocoa, macos-carbon

CFBundleCopyExecutableURL 函数有时会返回绝对 URL，有时则不会。如果在 CFBundleCopyExecutableURL 之前调用 CFBundleCopyExecutableArchitectures，则 url 是绝对的（为什么？）。如何强制此函数始终返回绝对 URL？谢谢。

```
text getBundleExeutableUrl(text bundlePath)
{
    CFURLRef url = CFURLCreateFromFileSystemRepresentation(0,
        (char*)bundlePath.c_str(), bundlePath.length(), false);
    CFBundleRef bundle = CFBundleCreate(0, url);
    CFBundleCopyExecutableArchitectures(bundle); // this is necessary to get absolute path
    CFURLRef exeUrl = CFBundleCopyExecutableURL(bundle);
    CFStringRef srExe = CFURLCopyFileSystemPath(exeUrl, 0);
    text bundleExe = srExe;
    CFRelease(srExe);
    CFRelease(exeUrl);
    CFRelease(url);
    CFRelease(bundle);
    return bundleExe;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:34:32.923

在您的源代码中，添加这个额外的行，它是指[`CFURLCopyAbsoluteURL`](http://developer.apple.com/library/mac/documentation/CoreFoundation/Reference/CFURLRef/Reference/reference.html#//apple_ref/c/func/CFURLCopyAbsoluteURL)

```
CFURLRef exeUrl = CFBundleCopyExecutableURL(bundle);
CFURLRef absoluteURL = CFURLCopyAbsoluteURL(exeURL);
CFStringRef srExe = CFURLCopyFileSystemPath(absoluteURL, 0);
CFRelease(absoluteURL); // don't forget to release what you create 
```

" `CFURLCopyAbsoluteURL`" 会将相对 URL 转换为绝对 URL。

您的代码中可能还应该有一些错误检查行（例如，在继续之前确保 URL 不为 NULL 等）。

另外，我想提到的一种风格是对象和变量声明（例如您的“ `text`”）通常大写（例如“ `CFStringRef`”、“ `NSString`”等）。参数和变量名称以小写字母开头。此外，“ `text`”令人困惑。只需称其为“ `CFStringRef`”即可。

# c# - “ListViewItemPlaceholderBackgroundThemeBrush”在哪里？

> ID：10978519
> 
> 赞同：6
> 
> 时间：2012-06-11T10:36:37.193
> 
> 标签：c#, xaml, microsoft-metro, resourcedictionary, .net-4.5

我无法理解 Windows 8 Metro 应用程序中的一种样式定义。

当你用 VS 创建一个 Metro 风格的应用程序时，还有一个名为

> 常见的

创建的。在这个文件夹里面有一个文件叫做

> 标准样式.xaml

现在以下代码段来自该文件：

```
<!-- Grid-appropriate 250 pixel square item template as seen in the GroupedItemsPage and ItemsPage -->
<DataTemplate x:Key="Standard250x250ItemTemplate">
    <Grid HorizontalAlignment="Left" Width="250" Height="250">
        <Border Background="{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}">
            <Image Source="{Binding Image}" Stretch="UniformToFill"/>
        </Border>
        <StackPanel VerticalAlignment="Bottom" Background="{StaticResource ListViewItemOverlayBackgroundThemeBrush}">
            <TextBlock Text="{Binding Title}" Foreground="{StaticResource ListViewItemOverlayForegroundThemeBrush}" Style="{StaticResource TitleTextStyle}" Height="60" Margin="15,0,15,0"/>
            <TextBlock Text="{Binding Subtitle}" Foreground="{StaticResource ListViewItemOverlaySecondaryForegroundThemeBrush}" Style="{StaticResource CaptionTextStyle}" TextWrapping="NoWrap" Margin="15,0,15,10"/>
        </StackPanel>
    </Grid>
</DataTemplate> 
```

我在这里不明白的是静态资源定义，例如边界

```
Background="{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}" 
```

*这与您如何使用模板、绑定和资源无关。*

**这个ListViewItemPlaceholderBackgroundThemeBrush**在哪里？

非常感谢您的帮助。

迪米

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T15:43:38.600

在 Windows 8 客户预览版中，您可以在以下位置找到包含资源定义（包括 ListViewItemPlaceholderBackgroundThemeBrush）的文件：

C:\Program Files (x86)\Windows Kits\8.0\Include\winrt\xaml\design\themeresources.xaml

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-28T12:04:32.183

这是微软文档中应该包含的令人难以置信的令人沮丧的事情之一，但（还没有）。

ListViewItemPlaceholderBackgroundThemeBrush 是系统画笔资源之一。它由 Metro “Light” 或 “Dark” 主题（无论您为应用选择哪个）定义。

您可以在 Blend 中查看系统画笔的完整列表。（不幸的是，我还没有找到在代码中枚举它们的任何方法。似乎没有任何编程方式来检查主题资源。）

这里有一些步骤可以让您进入完整列表。（当然，如果您已经熟悉 Blend，可以将这些步骤缩写。）

1.  打开表达式混合。
2.  创建一个新项目，然后选择 XAML（Windows Metro 风格）> 空白应用程序 (XAML)，然后单击确定。
3.  在设计图面上单击以选择网格。（在左下角的“对象和时间线”停靠窗口中，“[网格]”行将突出显示。）
4.  在右上角的属性停靠窗口中，找到“画笔”类别。
5.  就在“背景：无刷”的下方，有一排五个按钮。单击最右侧的按钮（“画笔资源”）。

系统刷资源列表将出现在列表框中。

![在此处输入图像描述](../Images/1f8eccc0a6f375533ecbef5c18c9054d.png)

# c# - 如何在 ASP.NET SQL 中查询 DateTime 大于哪里？

> ID：10978520
> 
> 赞同：0
> 
> 时间：2012-06-11T10:36:37.593
> 
> 标签：c#, asp.net, sql, sqldatasource

在我的 asp.net 项目中，我使用 SQLDataSource 连接到数据库，我想使用过去 7 天的 DateTime 字段（PublishDate）过滤行

（所以我看到 PublishDate 大于 DateTime.Now - 7 天的书籍）

你可以在屏幕截图中看到我到目前为止所拥有的

如何在查询中执行此操作（不使用代码来遍历行并比较日期时间）？

![在此处输入图像描述](../Images/f8095a9f242b584ecd91c4c61f4a1b87.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:42:02.870

添加以下 WHERE 子句

```
WHERE Books.PublishedDate > DATEADD (d, -7, DATEDIFF(dd, 0, GETDATE())) 
```

就在订购之前。

出于性能原因，我建议将`PublishedDate`其编入索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T10:42:35.923

如果 PublishDate 是 DATETIME 并且您只存储日期信息，或者如果您的列数据类型是 DATE (SQL 2008)，这将起作用：

```
select a.firstName, a.lastName, b.Name, b.PicturePath, b.PublishDate
from authors a
join books b on a.authorID = b.AuthorsID
where b.PublishDate > getdate() -7
order by b.PublishDate 
```

但是，如果您正在存储时间信息并且只想比较日期信息，则必须从左侧或右侧 + 1 天截断时间：

对于 SQL 2008：

```
select a.firstName, a.lastName, b.Name, b.PicturePath, b.PublishDate
from authors a
join books b on a.authorID = b.AuthorsID
where cast(b.PublishDate as Date) > getdate() -7
order by b.PublishDate 
```

对于 SQL 2005 及以下版本：

```
select a.firstName, a.lastName, b.Name, b.PicturePath, b.PublishDate
from authors a
join books b on a.authorID = b.AuthorsID
where b.PublishDate > DATEADD (d, -8, DATEDIFF(dd, 0, GETDATE())) 
order by b.PublishDate 
```

有几种截断时间的方法：

```
select convert(varchar, getdate(), 101)
select DATEADD (d, 0, DATEDIFF(dd, 0, GETDATE())) 
```

请参阅此 SO 问题以了解截断时间： [Best approach to remove time part of datetime in SQL Server](https://stackoverflow.com/questions/1177449/best-approach-to-remove-time-part-of-datetime-in-sql-server)

要包括第 7 天，只需将 > 更改为 >=

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T10:43:27.490

您可以使用 TSQL DATEDIFF 函数，例如：

```
SqlCommand comm=new SqlCommand("SELECT * FROM Borrow WHERE DATEDIFF(day,StartDate,EndDate) > 7"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T10:46:42.430

听起来您只需要在查询中添加 WHERE 子句：

```
WHERE PublishDate >= Getdate() -7 
```

该`Getdate()`函数返回日期和时间。因此，如果您的 PublishDate 没有时间，您将需要在查询中对此进行计划。

您可以使用以下方法删除时间：

```
WHERE PublishDate > DATEADD (d, -7, DATEDIFF(dd, 0, GETDATE())) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-11T10:47:55.410

可能你想这样做：

```
select Authors.firstName,Authors.lastName,Books.Name,Books.PicturePath,
Books.PublishDate,
From Authors inner join Books
on Authors.authorId = Books.AuthorId
WHERE Book.PublishDate >= GETDATE() - 7
order by Books.PublishDate 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-11T10:49:54.583

当您使用查询设计器时，您可以在过滤器字段中传递过滤器。查询设计器。就像在过滤框 <'05/20/2012' 中发布数据一样，或者您可以在那里提供 sql server 的 getdate() 功能。然后减去你想要的日子。

# wordpress - 在 Wordpress 插件中获取 post-id

> ID：10978524
> 
> 赞同：1
> 
> 时间：2012-06-11T10:36:57.753
> 
> 标签：wordpress, plugins

我正在尝试在我的自定义 wordpress 插件中获取帖子 ID，并且我正在使用以下代码：

```
global $post;
$current_page_id = $post->ID;
var_dump($current_page_id); 
```

但没有任何成功。随着`var_dump`我接听每一个电话`null`。比，如果我添加到模板中，则输出有效：

```
add_action('wp_footer', 'test');
function test() {
    global $post;
    $current_page_id = $post->ID;
} 
```

我想在我的插件中实现的是将当前的帖子 ID 传递给我的一个函数。所以像：

```
my_function($base_url, array('variable_to_post' => $post->ID)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-11-08T08:12:17.060

如果您需要从 wordpress 插件获取帖子 ID，您可以在`wp`操作挂钩中运行您的插件，以访问全局`$wp_query`对象。

这是简单的测试解决方案。

```
<?php
/*
Plugin Name: Plugin Name
Plugin URI:
Description: Plugin Description
Version: 1.0.0
Author:
Author URI:
*/

if (!defined('WPINC')) {
    die;
}

/**
 * Class MyPlugin
 */
class MyPlugin {
    private $postId;

    /**
     * MyPlugin constructor.
     * @param $wp_query
     */
    public function __construct($wp_query) {
        if ($wp_query && $wp_query->post) {
            $this->postId = $wp_query->post->ID;
        }
    }

    /**
     * Get Post Id
     * @return mixed
     */
    public function getPostId() {
        return $this->postId;
    }
}

/**
 * Start plugin
 */
add_action('wp', function () {
    global $wp_query;
    $myPlugin = new MyPlugin($wp_query);
    echo $myPlugin->getPostId();
}); 
```

希望这对某人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-22T18:48:38.347

当您在插件中使用它时，这是可能的：

```
add_action('wp_head','getPageId'); 
```

并声明以下函数：

```
function check_thankyou(){
    if(!is_admin()){
        global $wp_query;
        $postid = $wp_query->post->ID;
        echo $postid;
    }
} 
```

# oracle - 在oracle上使表中的行只读？

> ID：10978525
> 
> 赞同：3
> 
> 时间：2012-06-11T10:37:18.550
> 
> 标签：oracle, oracle10g

我有一张有很多行的表。
出于测试目的，我的同事也使用同一张桌子。问题是他有时会删除我正在测试的行，有时会删除我。
那么在 oracle 中有什么方法可以使某些特定的行只读，因此其他人不应该删除和编辑它？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T13:14:44.627

有许多不同的方法可以解决这个问题。

正如[孙子所说](http://www.quotationspage.com/quote/24268.html "引自《孙子兵法》")，最好的办法是您和您的同事使用不会发生冲突的数据集。

例如，也许您每个人都可以在本地 PC 上拥有自己的数据库实例；这是否适合取决于许多因素，其中最重要的是您与 Oracle 的许可安排。或者，您可以在共享数据库中拥有单独的模式；根据您的应用程序，您可能需要同义词或特殊连接词。

另一种方法：每个人都构建自己的数据集，称为测试夹具。这是一个很好的策略，因为测试只有在针对已知状态运行时才真正有效；如果我们对数据的存在或不存在做出假设，我们的测试结果有多有效？关键是，测试应该自己清理，删除在夹具中创建的任何数据以及运行测试。使用这种策略，您需要就每个团队成员的 ID 范围达成一致：他们只能将其范围内的记录用于测试或开发工作。

我更喜欢这种方法，因为它们并没有真正改变应用程序的工作方式（可以说，除了使用不同的模式和同义词）。可以使用更严厉的方法。

如果您有企业版，则可以使用行级安全性来保护您的记录。这是最后一点的延伸：您将需要一种机制来识别*您的*记录，以及一些基础设施来识别会话中的所有权。但是除了阻止其他用户删除您的数据之外，您还可以阻止他们插入、更新甚至查看您的 ID 范围内的记录。 [了解更多](http://docs.oracle.com/cd/B28359_01/server.111/b28337/tdpsg_securing_data.htm#CIHBBEDB)。

一个较轻的解决方案是[使用 AB Cade 建议的触发器](https://stackoverflow.com/a/10978675/146325)。您仍然需要识别您的记录和连接的人（因为可能不时*您*仍想删除您的记录。

最后一个策略：把你的球带回家。使表格处于您想要的状态并进行数据泵导出。为了额外的报复，您可以在此时截断表格。然后，只要您想使用该表，您就可以运行数据泵导入。这将重置表的状态，清除所有现有数据。这只是创建自己的数据的测试脚本的极端版本​​。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T10:48:15.110

您可以创建一个触发器来防止删除某些特定行。

```
CREATE OR REPLACE TRIGGER trg_dont_delete
   BEFORE DELETE
   ON <your_table_name>
   FOR EACH ROW
BEGIN
   IF :OLD.ID in (<IDs of rows you dont want to be deleted>) THEN
       raise_application_error (-20001, 'Do not delete my records!!!');
   END IF;
END; 
```

当然你可以让它更聪明——让`if`语句依赖`user`，或者从另一个表中获取记录ID等等。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-11T10:58:17.210

Oracle 支持行级锁定。您可以阻止其他人删除您正在使用的行。为了更好地了解[这个链接](http://docs.oracle.com/cd/B19306_01/server.102/b14220/consist.htm#sthref2078)。

# logging - 有没有办法在 WIX 设置期间找到正在应用的产品版本号？

> ID：10978527
> 
> 赞同：0
> 
> 时间：2012-06-11T10:37:19.923
> 
> 标签：logging, msbuild, wix

我有一个 wix 项目，并且正在通过从 wixproj 文件传递​​的属性更改产品版本。

我的 wxs 文件会是这样的

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
  <Product Id="7a224f9a-0627-4848-8b9e-f037cb409fc6" UpgradeCode="42c97588-6c36-40ef-aeb0-290aaffd6456" Version="$(var.ProductVersion)" Language="1033" Name="Myproj" Manufacturer="My Organization"> 
```

我将版本传递为 $(var.Productversion)。在我的 wixproj 中，我正在传递这个变量，如下所示。

```
<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0">
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">x86</Platform>
    <ProductVersion>3.0</ProductVersion>
    <SchemaVersion>2.0</SchemaVersion>
    <Version Condition=" '$(Version)' == '' ">1.0.0.5</Version>
    <OutputType>Package</OutputType>
    <WixTargetsPath Condition=" '$(WixTargetsPath)' == '' ">$(MSBuildExtensionsPath)\Microsoft\WiX\v3.x\Wix.targets</WixTargetsPath>

  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|x86' ">
    <OutputPath>bin\$(Configuration)\</OutputPath>
    <IntermediateOutputPath>obj\$(Configuration)\</IntermediateOutputPath>
    <DefineConstants>ProductVersion=$(Version)</DefineConstants>
  </PropertyGroup> 
```

我通过 Msbuild 传递这个 $version number 属性。但不知何故，该值没有更新。

在 Msbuild 日志文件中，我无法跟踪这一点。有什么方法可以确定版本号是否取自正确的位置并具有我给定的值？

在 wix 中我们是否可以显示正在传递的值？我尝试使用 wixproj Afterbuild target ，显示的数字（2.20.1.2）在 Msi 中没有更新（它是 2.20.1.1）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T03:46:56.023

如果您`AssemblyVersion.wxi`的项目中使用了某个文件，则可以从该文件中的 MSBuild 文件更新相同的产品版本。然后通过引用`$(var.ProductVersion)`将引用该文件中的相同内容。

如果这对您来说不是很清楚，如果需要，我可以详细说明。

# jquery - 在包含多个空格的 ul 中附加 li

> ID：10978529
> 
> 赞同：1
> 
> 时间：2012-06-11T10:37:25.460
> 
> 标签：jquery

我想追加`<li>`使用`<ul>`jQuery。我已经使用以下行成功完成了它：

```
var ChosedItem = $("#chosedItem");
ChosedItem.append('<li id=' + $(this).attr('id') + ' limit=' + $(this).attr('limit') + ' ><span>' + $(this).children(0) + '</span></li>'); 
```

在此，`#chosedItem`是`<ul>`存在的 div id

但在我的情况下的问题是，如果我的`<li>`项目包含空格，那么它不会添加`[0]th`到孩子的位置之后，因为我使用的是`chlidren(0)`. 我可以使用什么来代替`children(0)`添加`<li>`包含多个空格的项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T10:41:44.003

尝试这个

```
$('#chosedItem').children().filter(function(){    

  if($(this).text().split(' ').length > 2) //Elements with two or more space will be returned
     return $(this);

}).append('<li id=' + $(this).attr('id') + ' limit=' + $(this).attr('limit') + ' ><span>' + $(this).children(0) + '</span></li>'); 
```

# android - TextServicesManager 在索尼平板电脑中不起作用

> ID：10978532
> 
> 赞同：1
> 
> 时间：2012-06-11T10:37:33.447
> 
> 标签：android, android-4.0-ice-cream-sandwich

我正在使用如果安装在 ICS 中需要使用默认字典的自定义键盘，我在模拟器上检查了它的工作正常，但现在安装在索尼平板电脑 S 中，SpellCheckerSession 总是返回 null。

```
final TextServicesManager tsm = (TextServicesManager) getSystemService(
                    Context.TEXT_SERVICES_MANAGER_SERVICE);

            SpellCheckerSession mScs;
            mScs = tsm.newSpellCheckerSession(null, null,new SpellCheckerSessionListener() {

                public void onGetSuggestions(final SuggestionsInfo[] arg0) {
                    final StringBuilder sb = new StringBuilder();
                    for (int i = 0; i < arg0.length; ++i) {
                }                                       

                    Log.i("OnGetSuggestion","Suggestion Returned :: "+sb.toString());
                }
            }, true); 
```

# ruby - 在 Ruby 中执行 XMLHttpRequest 的最简单方法是什么？

> ID：10978533
> 
> 赞同：0
> 
> 时间：2012-06-11T10:37:35.587
> 
> 标签：ruby, screen-scraping

我想在 Ruby 中做一个 XMLHttpRequest POST。我不想使用像 Watir 这样的框架。像机械化或斯克鲁比之类的东西就可以了。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T23:28:23.437

机械化：

```
require 'mechanize'
agent = Mechanize.new
agent.post 'http://www.example.com/', :foo => 'bar' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-15T19:28:49.107

'net/http' 示例，（ruby 1.9.3）：

您只需将 XMLHttpRequest 的附加标头添加到您的 POST 请求中（见下文）。

```
require 'net/http'
require 'uri'  # convenient for using parts of an URI

uri = URI.parse('http://server.com/path/to/resource')

# create a Net::HTTP object (the client with details of the server):
http_client = Net::HTTP.new(uri.host, uri.port)

# create a POST-object for the request:
your_post = Net::HTTP::Post.new(uri.path)

# the content (body) of your post-request:
your_post.body = 'your content'

# the headers for your post-request (you have to analyze before,
# which headers are mandatory for your request); for example:
your_post['Content-Type'] = 'put here the content-type'
your_post['Content-Length'] = your_post.body.size.to_s
# ...
# for an XMLHttpRequest you need (for example?) such header:
your_post['X-Requested-With'] = 'XMLHttpRequest'

# send the request to the server:
response = http_client.request(your_post)

# the body of the response:
puts response.body 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T10:43:45.503

XMLHTTPRequest 是一个浏览器概念，但既然您问的是 Ruby，我假设您想要做的只是模拟来自 ruby​​ 脚本的此类请求？为此，有一个名为[HTTParty](https://github.com/jnunemaker/httparty)的 gem ，它非常易于使用。

这是一个简单的例子（假设你有 gem - 安装它`gem install httparty`）：

```
require 'httparty'
response = HTTParty.get('http://twitter.com/statuses/public_timeline.json')
puts response.body, response.code, response.message, response.headers.inspect 
```

# json - 在 J2ME 中解析 json 时出错

> ID：10978536
> 
> 赞同：4
> 
> 时间：2012-06-11T10:37:46.990
> 
> 标签：json, java-me

我在 Eclipse 中运行 Java ME 应用程序。我的 pp 中有 JSON 代码，我也有 json.jar lib，但是当我运行应用程序时，出现这样的错误。

```
Uncaught exception: java.lang.NoClassDefFoundError: org/json/me/JSONObject
 - parsing.Parsing$1.run(), bci=88 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T16:12:40.973

看起来您的 json.jar 库未与您的应用程序代码捆绑在一起。json.jar 中的内容必须在最终的应用程序 jar 文件中可用。

如果您使用的是 Eclipse Pulsar，请务必在 Project .. Properties .. Java Build Path .. Order and Export 选项卡中检查此库。

# python - Python：唯一单词及其降序频率

> ID：10978546
> 
> 赞同：2
> 
> 时间：2012-06-11T10:38:43.167
> 
> 标签：python, word, unique, frequency

我正在为一个涉及字符、单词及其相对频率等的各种统计信息的 Python 类做一个非常简单的作业问题。目前我正在尝试分析一个文本字符串并获取每个唯一单词的列表文本后跟它的使用次数。我对 Python（或任何语言）的了解非常有限，因为这是一门入门课程，因此只提供了以下代码：

```
for k in (""",.’?/!":;«»"""):
    text=text.replace(k,"")
text=text.split()
list1=[(text.count(text[n]),text[n]) for n in range(0,len(text))]
for item in sorted(list1, reverse=True):
    print("%s : %s" % (item[1], item[0])) 
```

不幸的是，这会打印出文本的每个单词（按出现顺序），然​​后是它的频率 n, **n 次**。显然这是非常没用的，我想知道是否可以在我已经编写的内容中添加一些漂亮的代码，以使每个单词只出现在这个列表中一次，然后最终按降序排列。我见过的所有其他类似问题都使用了很多我们没有学过的代码，所以我认为答案应该相对简单。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T10:43:32.863

看看[`collections.Counter`](http://docs.python.org/library/collections.html#counter-objects)。您可以使用它来计算您的词频，它会帮助您按排序顺序打印出列表，使用`most_common`方法。

（没有示例代码，因为这是一个[家庭作业问题](https://meta.stackexchange.com/a/10812/140890)，您必须自己做*一些*工作）。

# android - 中心文本android按钮

> ID：10978550
> 
> 赞同：29
> 
> 时间：2012-06-11T10:38:59.923
> 
> 标签：android, gravity

我的问题很简单。如何将文本集中在android中的按钮上？我尝试将填充设置为 0，将重力设置为中心，但是当我运行它时，结果仍然是文本是水平居中但不是垂直的。文本有点移到底部。

```
<Button
    android:id="@+id/btnSame"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_marginBottom="10dip"
    android:layout_marginLeft="10dip"
    android:layout_marginRight="10dip"
    android:background="@drawable/layout_button_different"
    android:gravity="center_vertical|center_horizontal"
    android:height="30dp"
    android:padding="0dip"
    android:text="@string/equals"
    android:textColor="@drawable/layout_button_different"
    android:textSize="50dp"
    android:width="70dp" /> 
```

我也相关：在活动中我这样做：

```
btnEquals.setCompoundDrawablesWithIntrinsicBounds(null,getResources().getDrawable(R.drawable.up2), null, null);
btnEquals.setPadding(0, 5, 0, 0);
btnEquals.setTextSize(15); 
```

这有效，但在此之后我设置了这个：

```
btnEquals.setCompoundDrawables(null, null, null, null);
btnEquals.setPadding(0, 0, 0, 0); 
```

结果是垂直对齐错误。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2014-06-19T10:19:00.567

这很容易，你可以这样说：

```
android:textAlignment="center" 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-11T10:50:38.007

由于您选择的尺寸，您现有的布局不能希望使文本居中。您已将按钮高度设置为`30dp`并且您的 textSize 为`50dp`，无论出于何种原因，Android 都无法处理该问题并将文本居中。如果你让你的按钮更大或者你的文本更小，你会发现居中是有效的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-27T02:54:21.723

需要考虑三个系统。xml 布局设计器、模拟器和真机。如果您指定gravity="center"，按钮中的文本将如下所示。在 xml 布局设计器中，看起来最左边的字母位于按钮的中心，但其余字母位于右侧。（看起来不正确）在模拟器中，文本在中心显示得很好。（正确）在电话中，文本在中心显示得很好。（正确的）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-28T03:02:05.330

您可以在布局 xml 代码中将此行添加到您的 Button 中：

```
android:gravity="center" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-20T23:08:57.260

您也可以在 setPadding 中使用负数。如果您的字体很大而您的按钮很小，这可能会有所帮助。如果仍然偏离中心，请尝试将顶部或底部设置为更负数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-28T15:03:23.403

您只需将**layout_height**设置为**wrap_content**并将**padding**属性更改为您想要的任何值

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-10-08T10:11:06.917

```
<Button
                android:id="@+id/AnswerE"
                style="@style/defaultbuttonstyle"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="center"
                android:onClick="AnswerCheck"
                android:text=" E "
                android:textStyle="bold" /> 
```

这对我有用

# javascript - knout.js 中 $parent 的访问索引

> ID：10978551
> 
> 赞同：90
> 
> 时间：2012-06-11T10:39:01.290
> 
> 标签：javascript, knockout.js, jquery-templates

在 knockout.js 2.1.0 中，在使用 foreach 绑定的模板中，您可以通过 $index() 函数访问当前项目的索引。在嵌套的 foreach 绑定中，有没有办法从模板访问 $parent 的索引？

假设我有这样的数据结构：

```
var application = {
  topModel: [
    {
      {subModel: [{'foo':'foo'}, { 'bar':'bar'}]}, // this has top:0 and sub:0
      {subModel: [{'foo2':'foo2'}, { 'bar2':'bar2'}]} // this has top:0 and sub:1
    },
    {
      {subModel: [{'foo':'foo'}, { 'bar':'bar'}]} // this is top:1 sub:0
    },
    {
      {subModel: [{'foo':'foo'}, { 'bar':'bar'}]} // this is top:2 sub:0
      {subModel: [{'foo':'foo'}, { 'bar':'bar'}]} // this is top:2 sub:1
    },
    ...
    ]}; 
```

有了这个，我想打印每个模型的路径，使用索引：[topModel-index subModel-index]，这样输出将类似于：

```
[0 0]
[0 1]
[1 0]
[2 0]
[2 1]
... 
```

我已经使用 foreach 绑定了模型，但我不知道如何在 subModel 的上下文中访问 topModel 的索引。下面的示例显示了我尝试过的一种方法，但它不起作用，因为我不知道如何访问 $parent 引荐来源网址的索引。

```
<!--ko foreach: topModel -->
<!--ko foreach: subModel -->
  [<span data-bind="text: $parent.index()"></span>
  <span data-bind="text: $index()"></span>]
<!--/ko-->
<!--/ko--> 
```

应该打印出：0 1, 0 2, 1 0, 1 1, 1 2, 2 0, 2 1, ...

* * *

## 回答 #1

> 赞同：190
> 
> 时间：2012-06-13T10:56:58.430

访问父对象的索引使用

```
$parentContext.$index() 
```

而不是

```
$parent.index() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-16T07:15:40.250

你能找到的最简单的方法是下载 chrome 的“knockout context”。这向您显示了哪些数据绑定到了哪些元素，还可以让您查看该特定绑定元素的可用函数/变量。对于此类情况，这是一个了不起的工具。

# java - 调用类 org.glassfish.ejb.startup EjbDeployer 加载方法时出现异常

> ID：10978554
> 
> 赞同：1
> 
> 时间：2012-06-11T10:39:25.287
> 
> 标签：java, eclipse, jakarta-ee, ejb, glassfish-3

调用类 org.glassfish.ejb.startup EjbDeployer 加载方法时出现
异常此异常是在带有 glassfish 的 eclipse indigo 中使用 TimerService scheduleexpression 的结果
它在部署时出现错误
任何人都可以帮助我

# ruby-on-rails - render :update 给出 MissingTemplate 错误

> ID：10978555
> 
> 赞同：1
> 
> 时间：2012-06-11T10:39:26.547
> 
> 标签：ruby-on-rails

如果验证失败，我正在尝试让非模型 form_for 重新加载。包含表单的页面 (app/views/sites/devices.html.erb) 包含将表单加载为模板的代码

```
<div id="site-device-form">
   <%= render partial: "shared/site_device_form", locals: {site: @site, site_device: @site_device} %>
 </div> 
```

然后表单作为呈现的部分显示为内联：

```
<%= form_for(:site_device, :url => {:controller=>"site_devices", :action=>"create"}) do |f| %>
  <tr>
    <%= f.hidden_field :site_id, :value => site.id %>
    <!-- etc -->
  </tr>
<% end %> 
```

所以表单最初是从 SitesController 页面实例化的，但是当它创建一个 SiteDevice 时，表单会调用 SiteDevicesController#create 方法来创建页面。

SiteDevice 有一些验证码——如果它失败了怎么办。我试图让页面重新加载，所以表单代码只是重新显示（一旦重新显示工作，我们将得到显示的错误）

```
 if @site_device.save
     flash[:notice] = 'SiteDevice was successfully created.'
     format.html { redirect_to(@site_device) }
  else
     #re-render form
     format.html { render(:update) do |page|
                      page[:site-device-form].replace_html partial: 'shared/site_device_form'
                   end  }
  end 
```

根据我的理解， render(:update) 应该渲染块，传入页面模板。但我得到的是一个 ActionView::MissingTemplate 错误：

```
ActionView::MissingTemplate (Missing template site_devices/update, application/update with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. Searched in:
* "/home/ruby/frontier_development/Frontier/app/views" 
```

任何想法这里出了什么问题？如何让渲染：根据我给它的部分更新 div-id

谢谢，

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:28:58.313

据我记得并且可以告诉，render :update 是一种执行脚本块（rjs）的方法，我不确定你真的想走那条路。因此，根据我们的评论，我假设您可能想要在重新渲染模板时执行以下操作来显示您的 div。

```
<% if @some_flag %>
  <div id="site-device-form">
     <%= render partial: "shared/site_device_form", locals: {site: @site, site_device: @site_device} %>
   </div>
<% end %> 
```

然后在您的控制器操作中，您想要**重新渲染该操作**（这可能是创建中的“新”和更新中的“编辑”）：

使用“新”模板进行创建：

```
def create
  ...
  if @site_device.save
     ...
  else
    #set the flag for the view and re-render the template
    format.html { 
       @some_flag = true
       render action: "new"
     }
  end
end 
```

使用“编辑”模板进行创建：

```
def update
  ...
  if @site_device.update_attributes(...)
     ...
  else
    #set the flag for the view and re-render the template
    format.html { 
       @some_flag = true
       render action: "edit"
     }
  end
end 
```

这只是要点......它可能会帮助您走上正确的轨道（如果我正确理解了您的问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:03:36.267

如果您要更新现有记录（不是新记录），您希望改为呈现`edit`模板。

对于新记录，您将呈现`new`模板。

所以替换`render(:update)`为`render(:new)`，你应该很高兴。

希望有帮助。

# javascript - 我想使用 javascript 更改 css 样式

> ID：10978557
> 
> 赞同：0
> 
> 时间：2012-06-11T10:39:33.103
> 
> 标签：javascript

我想根据用户要求附加字体样式并在 textarea 中输入。我试过了，但我的脚本不工作......

```
function run() {
var fontType = document.getElementById("font_type").value;
var fontSize = document.getElementById("font_size").value;

var textArea = document.getElementById("msg");
//alert(fontType+fontSize);

textArea.style.font-size = fontSize ;
textArea.style.font-family = fontType;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:40:45.517

请尝试以下操作：

```
textArea.style.fontSize = fontSize ;
textArea.style.fontFamily = fontType; 
```

否则，您的 JavaScript 将被评估为：

```
textArea.style.font - size = fontSize;
textArea.style.font - family = fontType; 
```

...这没有*任何*意义（因此抛出 a `ReferenceError: Invalid left-hand side in assignment`）。

当更改 JavaScript ( ->等)中的所有样式属性时，这种转换 ( `something-something`to ) 是一致的。`somethingSomething``border-radius``borderRadius`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T10:40:52.510

尝试：

```
textArea.style.fontSize = fontSize ;
textArea.style.fontFamily = fontType; 
```

# nopcommerce - 在 nopcommerce 中托管已发布的网站

> ID：10978559
> 
> 赞同：2
> 
> 时间：2012-06-11T10:39:41.170
> 
> 标签：nopcommerce

我正在使用 NopCommerce2.2 在电子商务网站上工作。我通过在 dotnet 面板的 wwwroot 中复制完整的源代码来托管该网站。它工作正常。但是尺寸很大。大约是 700MB。所以我发布了 Nop.Web 及其管理。该站点在使用 IIS7 的 localhost（即本地服务器）中运行良好。但是当我将内容直接复制到全局服务器中的 wwwroot 时，它被重定向到错误页面`errorpage.htm?aspxerrorpath=/`而不是站点。任何人都可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-05T05:00:18.627

将您的网站（所有文件夹和内容）从开发计算机复制到远程托管计算机（服务器）上的应用程序文件夹。

确保远程主机上的 bin 文件夹包含与开发计算机上相同的 dll 文件。

复制您的数据

如果您的应用程序包含数据或数据库。例如 SQL Server Compact 数据库（App_Data 文件夹中的 .sdf 文件），请考虑以下内容：

您想将测试数据发布到远程服务器吗？

很可能不是。

如果您的开发计算机上有测试数据，它可能会覆盖远程托管计算机上的生产数据。

如果您必须复制 SQL 数据库（.sdf 文件），也许您应该删除数据库中的所有内容，然后将空的 .sdf 文件从开发计算机复制到服务器。

而已。祝你好运 ！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-21T04:36:23.177

```
You need to follow the following steps as I mentioned 
```

下面是发布 NopCommerce 应用程序网站的步骤：

步骤：1 - 发布 Nop.Web 项目。

步骤：2 - 发布 Nop.Admin 项目。

转到您的发布创建的发布文件夹

步骤：3 - 从管理中剪切所有 dll 并将所有 dll 粘贴到 bin 文件夹中，该文件夹位于整个项目的主 bin 文件夹中。

第 4 步 - 从您的源项目和 App_Data 文件夹 Settings.txt 和 InstalledPlugins.txt 复制两件事，这两个文件未在您的发布文件中发布，因此将这两个文件粘贴到 App_Data 的发布文件夹中。（您需要根据您的数据库主机更改 Setting.txt 中的连接字符串）。

步骤：5 - 现在您需要从源文件夹中复制整个插件文件夹（但请记住，您需要从 Presentation 文件夹中复制此插件文件夹，而不是从解决方案文件所在的主源中复制。）。

步骤：6 - 现在您的发布已经准备好。（现在您可以在托管服务器上部署）

# vba - 使用 VBA 转换为句子大小写

> ID：10978560
> 
> 赞同：6
> 
> 时间：2012-06-11T10:39:45.643
> 
> 标签：vba, vba, excel

我一直在谷歌上一页又一页地浏览，在这里寻找这个看似简单的请求的解决方案，但无济于事。有谁知道使用[vba](/questions/tagged/vba "显示标记为“vba”的问题")将字符串转换为句子大小写的可靠方法？

理想情况下，我会将它构建成一个子而不是一个函数，因此从 GUI 调用它更容易。

作为参考，我想要：

> 这是一个又长又丑的大写句子。请立即修改我。

成为：

> 这是一个长而丑陋的大写句子。请立即修改我。

转换为 Title Case 我发现非常简单（因为有一个内置函数），但转换为句子 case 确实非常困难。

我尝试了以下一些方法，但每次都出现错误：

*   [http://www.vbforums.com/showthread.php?t=536912](http://www.vbforums.com/showthread.php?t=536912)
*   [http://vbamacros.blogspot.com/2007/09/sentence-case.html](http://vbamacros.blogspot.com/2007/09/sentence-case.html)

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T10:20:40.140

您可以使用 RegExp 更有效地运行解析

像这样的东西

```
Sub Tested()
    Call ProperCaps("HERE IS A LONG, UGLY UPPERCASE SENTENCE. PLEASE AMEND ME IMMEDIATELY." & vbCrLf & "next line! now")
End Sub

Function ProperCaps(strIn As String) As String
    Dim objRegex As Object
    Dim objRegMC As Object
    Dim objRegM As Object
    Set objRegex = CreateObject("vbscript.regexp")
    strIn = LCase$(strIn)
    With objRegex
        .Global = True
        .ignoreCase = True
         .Pattern = "(^|[\.\?\!\r\t]\s?)([a-z])"
        If .test(strIn) Then
            Set objRegMC = .Execute(strIn)
            For Each objRegM In objRegMC
                Mid$(strIn, objRegM.firstindex + 1, objRegM.Length) = UCase$(objRegM)
            Next
        End If
        MsgBox strIn
    End With
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-28T13:15:47.663

谢谢你，有用的代码。为什么VB有正确的案例而不是句子的案例很奇怪。为了我的目的，我已经对其进行了调整，因为如果前面有空格，原版不会将第一个字母大写，希望你不介意我分享我的一些更改。

为了删除句子开头或结尾的任何不需要的空格，我添加了另一个从上面调用的函数。

```
Public Function DblTrim(vString As String) As String
Dim tempString As String
tempString = vString

Do Until Left(tempString, 1) <> " "
   tempString = LTrim(tempString)
Loop
Do Until Right(tempString, 1) <> " "
   tempString = RTrim(tempString)
Loop

DblTrim = tempString

End Function

Public Function ProperCaps(strIn As String) As String
    Dim objRegex As Object
    Dim objRegMC As Object
    Dim objRegM As Object
    Set objRegex = CreateObject("vbscript.regexp")
    strIn = DblTrim(strIn)
    strIn = LCase$(strIn)

    With objRegex
        .Global = True
        .ignoreCase = True
         .Pattern = "(^|[\.\?\!\r\t]\s?)([a-z])"
        If .test(strIn) Then
            Set objRegMC = .Execute(strIn)
            For Each objRegM In objRegMC
                Mid$(strIn, objRegM.firstindex + 1, objRegM.Length) = UCase$(objRegM)
            Next
        End If
        ProperCaps = strIn
    End With
End Function 
```

您可以调用 ProperCaps(Yourstring) 以将第一个字母作为大写字母取回句子，并删除所有空格。

您还可以使用 DblTrim(Yourstring) 删除字符串前后的所有空格（不改变句子大小写），无论有多少空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-30T11:54:44.577

我知道这是一篇旧文章，只是一个使用内置函数的简短代码，供某人参考（这是不言自明的）。要删除多余的空格，如果需要，请使用修剪功能将整个文本换行。

```
Public Function SentenceCase(Text As String) As String
    SentenceCase = UCase(Mid(Text, 1, 1)) & LCase(Mid(Text, 2))
End Function 
```

# c# - 使用用户定义的转换时的数据丢失处理。C＃

> ID：10978563
> 
> 赞同：-3
> 
> 时间：2012-06-11T10:40:06.443
> 
> 标签：c#, casting

出于教育目的，我在选角方面做了很多事情（可能从未使用过）。其中之一引导我找到我不喜欢的解决方案。

假设，我有 2 节课：

```
class ClassA
{
    public int MyInt;
    public string MyString;
}

class ClassB
{
    public int SomeInt;
} 
```

现在我想将 ClassA 隐式转换为 ClassB。为此，我可以写：

```
public static implicit operator ClassB(ClassA obj1)
{
    ClassB obj2 = new ClassB();
    obj2.SomeInt = obj1.MyInt;

    return obj2;
} 
```

但是有`MyString`迷路的可能，这是绝对不允许的。为了解决这个问题，我在转换中添加了：

```
if (obj1.MyString != null)
   throw new DataLostException(); 
```

这工作正常，但必须有更简单的解决方案。我的问题是，如何以更简单的方式处理这种数据丢失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:43:55.420

您正在有效地执行我所说的向上转换，但没有常规继承模型（因为常规向上转换将是 B 扩展 A）。Upcasts 会导致数据范围变窄。如果你向上推荐一个较少特色的课程，那么你期望你会得到更少的信息，这就是它的工作原理。如果您使用 A 类，则不必关心 mystring，因为 A 类没有 mystring。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T10:45:16.503

你的解决方案是正确的。这种数据丢失是创建用户定义的转换运算符时的“默认行为”，这是该语言的一种相对高级的使用。

两个类之间没有继承关系，框架也无法知道该字符串与另一个类之间的关系。谁知道呢，它可能是一条在新环境中完全不需要的诊断信息。

# php - Drupal 6：以编程方式为 OG 创建节点..！

> ID：10978564
> 
> 赞同：0
> 
> 时间：2012-06-11T10:40:30.703
> 
> 标签：php, drupal, drupal-6

我正在通过获取电子邮件以编程方式为门户创建节点。但是我这里有一个情况。

我有一些 Organic 小组，每个 OG 都有自己的内容类型。一开始我想为每个 OG 使用不同的邮箱。

现在的问题是..如何将按程序创建的节点分配给特定的 OG ？

注意：- 我可以根据邮件主题创建不同类型的节点。

请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:33:25.483

当您创建节点对象时，将其 og_groups 属性设置为您希望它所在的组的所有 nid 的数组。例如，如果您有一个 nid 为 4 的组，并且您希望您的节点在该组中，请先执行此操作调用 node_save 就可以了。

```
$node->og_groups = array(4); 
```

保存该节点后，它应该在具有 nid 4 的 og 中。

# debugging - NTP - 调试奇怪的偏移统计

> ID：10978571
> 
> 赞同：2
> 
> 时间：2012-06-11T10:41:04.470
> 
> 标签：debugging, offset, ntp

**设置**

我有一个设置有 2 个路由器，它们充当 NTP 客户端（Meinberg NTP）的 NTP 服务器，安装在网络上的测试服务器上。我一直在与两台服务器同步，但在遇到奇怪的行为后，我切换到只使用一个 NTP 服务器进行同步，以便能够调试我似乎遇到的问题。

看来，偏移量在白天会发生很大变化，并且其值介于（+10ms 和 -150ms）之间。这远远超出了我们设置所需的值，最多只有几毫秒。

**统计截图**

我已将 NTP 客户端配置为删除带有统计信息的日志文件，然后我使用图形点打印工具创建了一些随时间推移的偏移、抖动等图表。下面显示了今天日志文件的平均时间：

![在此处输入图像描述](../Images/82cf4f876319a19076105b0a696bbb27.png) *概览统计*

以下是偏移图、延迟、色散和抖动图：

![在此处输入图像描述](../Images/e0b49c714be7da38a1afdc450d7a3671.png) *抵消*

![在此处输入图像描述](../Images/8e9d1fbf78e97a29e6eb052ab785791c.png) *延迟*

![在此处输入图像描述](../Images/790b7e3fa76511f53ffe00b1c760f463.png) *分散*

![在此处输入图像描述](../Images/1ffd39fe5a76e95a4616e2494ae9e4ef.png) *抖动*

**我的观察**

今天似乎有四次在图表上出现了一些显着的峰值。并且每次出现尖峰时，该偏移量似乎是同步的，达到了几毫秒的偏移量。但后来它似乎又飘走了。

NTP 客户端已经运行了一周，所以我希望可以完成任何初始校准。

有没有人有能力指出这种行为的一些明显原因？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:46:48.990

我发现，我正在与之同步的 NTP 服务器会根据服务器上的负载延迟响应。在更正此问题以使 NTP 服务器具有更高的优先级后，问题就消失了。

# jdo - 如何在 SpringSource 工具套件项目中启用 Datanucleus 支持

> ID：10978573
> 
> 赞同：0
> 
> 时间：2012-06-11T10:41:14.583
> 
> 标签：jdo, spring-roo, datanucleus

我有一个 Spring Roo 项目，我必须在其中使用 mongoDB，使用 datanucleus 和 JDO。当我从以下命令生成所有类时，我发现所有注释都是从 JPA 获取的。

```
//create top level package
project --topLevelPackage com.testproject2 --projectName TestProject2

//persistence setup
persistence setup --provider HIBERNATE --database MYSQL --databaseName "users" --hostName "127.0.0.1" --userName "root" --password "password"

//typical security
typicalsecurity setup 
```

我应该如何在我的项目中使用 datanucleus 支持？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:00:16.360

Spring Roo JIRA 上的简单搜索给出了 [https://jira.springsource.org/browse/ROO-2889](https://jira.springsource.org/browse/ROO-2889)

所以 Spring 人们仍然没有添加对 JDO 的支持。建议你投票。显然，您可以使用具有 JDO 持久性的 JPA 注释类，但是 JPA 注释仅表示 JDO 可用的东西的一个子集

# logging - 使用 NLog 有没有办法在尾随点之前记录记录器的名称？

> ID：10978575
> 
> 赞同：4
> 
> 时间：2012-06-11T10:41:20.607
> 
> 标签：logging, nlog

我有一个场景，如果我可以在尾随点字符**之前记录记录器的名称，我可以减少配置文件中的目标数量。**

使用`${logger:shortName=true}`它可以呈现记录器的短名称，即根据定义[，在尾随点字符之后的部分](http://nlog-project.org/wiki/Logger_layout_renderer)。但是我要记录的是点字符之前的部分。

例如，我可能使用 的记录器名称`MyNamespace.MyClass`，使用`${logger:shortName=true}`我会得到 的值，`MyClass`但我看不到获取 的值的方法，就像`MyNamespace`使用`${logger:shortName=false}`返回的全名一样`MyNamespace.MyClass`。

所以我想知道这是否可能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T17:14:30.627

我建议编写一个自定义包装器 LayoutRenderer，如下所示：

```
using NLog.Config;
using NLog.LayoutRenderers;

namespace NLog.LayoutRenderers.Wrappers
{
    [LayoutRenderer("loggerprefix")]
    [ThreadAgnostic]
    public sealed class LoggerPrefixRendererWrapper : WrapperLayoutRendererBase
    {
        protected override string Transform(string text)
        {
            return text.Substring(0,text.LastIndexOf('.'));
        }
    }
} 
```

这个想法是您可以`logger`像这样将这个包装器应用到 LayoutRenderer：

```
${loggerprefix:${logger}} 
```

Transform 方法应该接收记录器的全名（如果您使用类名作为记录器名称，则为完全限定的类名）。在 Transform 内部，只需将“文本”的内容（即记录器名称）返回到最后一个，但不包括最后一个`'.'`.

您还必须在 NLog 配置中添加对程序集的引用。

```
 <extensions>
    <add assembly="MyAssembly"/>
  </extensions> 
```

我基于您可以在[NLog 存储库](https://github.com/jkowalski/NLog/tree/master/src/NLog/LayoutRenderers/Wrappers)中找到的 WrapperLayoutRenderers 。

祝你好运！

# python - Python函数问题

> ID：10978576
> 
> 赞同：1
> 
> 时间：2012-06-11T10:41:22.870
> 
> 标签：python, python-3.x

嗨，我是一个正在学习 Python 的初学者，我在书中偶然发现了这个示例，由于某种原因，当我自己尝试相同的代码时，我没有收到相同的输出？请帮忙...

```
def tester(start):
    state = start
    def nested(label):
        nonlocal state
        print(label, state)
        state += 1
    return nested

>>> F = tester(0)
>>> F('spam')
spam 0
>>> F('ham')
ham 1
>>> F('eggs')
eggs 2 
```

每次运行该函数时，我的结果都不会增加 + 1，这本书有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:45:15.180

[为我工作](http://ideone.com/Q2JaD)。你确定你使用的是python 3吗？`nonlocal`是 python 3 的功能，在 python 2.x 中不起作用*。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:45:50.057

[https://stackoverflow.com/a/1261961/778858](https://stackoverflow.com/a/1261961/778858)总结了一下。基本上 python 从 2.~ 到 3.0 >= 发生了很大变化，你最终会遇到这样的问题。将本书开头所说的内容与他们正在使用的版本进行比较，并将其与您自己的版本进行比较。

# sql - 多表连接查询的最佳实践

> ID：10978577
> 
> 赞同：2
> 
> 时间：2012-06-11T10:41:30.133
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

表结构如下：

```
Table1 (ID int, value1 int,...)

ID       Value1
----    --------
1        10
2        20
5        12

Table2 (ID int, value2 int,...)

ID       Value2
----    --------
1        13
3        24
4        11

Table3 (ID int, value3 int,...)
ID       Value3
----    --------
4        150
5        100 
```

我的预期输出如下。

```
ID       Value1        Value2        Value3
----    --------      --------      --------
1         10            13             NULL
2         20            NULL           NULL
3         NULL          24             NULL
4         NULL          11             150
5         12            NULL           100 
```

应该注意的是，上面的表格很大，我希望有最好的表现。

我的查询建议如下：

```
Select ID, 
       SUM(Value1) AS Value1, 
       SUM(Value2) AS Value2,
       SUM(Value3) AS Value3 
From (
    Select ID, Value1 , NULL as value2, NULL as value 3
    From Table1

    Union ALL

    Select ID, NULL , value2, NULL
    From Table2

    Union ALL

    Select ID, NULL, NULL, value 3
    From Table3
    )Z
Group By Z.ID 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T10:45:49.450

假设每个 id 只有一个值，这应该可以解决问题：

```
SELECT aux.ID, t1.Value1, t2.Value2, t3.Value3
FROM 
(SELECT ID FROM Table1
 UNION
 select ID FROM Table2
 UNION
 SELECT ID FROM Table3) aux
LEFT OUTER JOIN Table1 t1 ON aux.ID = t1.ID
LEFT OUTER JOIN Table2 t2 ON aux.ID = t2.ID
LEFT OUTER JOIN Table3 t3 ON aux.ID = t3.ID 
```

* * *

如果您有多个值：

```
SELECT aux.ID, SUM(t1.Value1) as 'Value1', SUM(t2.Value2) as 'Value2', SUM(t3.Value3) as 'Value3'
FROM 
(SELECT ID FROM Table1
 UNION
 select ID FROM Table2
 UNION
 SELECT ID FROM Table3) aux
LEFT OUTER JOIN Table1 t1 ON aux.ID = t1.ID
LEFT OUTER JOIN Table2 t2 ON aux.ID = t2.ID
LEFT OUTER JOIN Table3 t3 ON aux.ID = t3.ID
GROUP BY aux.ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:02:10.330

我最初写了与 aF 相同的答案。上面做了。所以，删除它，并使用不同的方法。

这里，

> *   第一个查询从 table1 中获取所有信息
> *   第二个查询从 table2 跳过中获取所有信息
> *   那些已经存在于 table1 3rd 查询中的所有剩余都跳过了上述两个查询中的那些。

```
 SELECT T1.ID, T1.VALUE1, T2.VALUE2, T3.VALUE3 --all T1
  FROM TABLE1 T1
      LEFT JOIN TABLE2 ON T1.ID=T2.ID
      LEFT JOIN TABLE3 ON T1.ID=T3.ID
UNION
  SELECT T2.ID, T1.VALUE1, T2.VALUE2, T3.VALUE3 --all T2 where T1 is NULL
  FROM TABLE1 T2
      LEFT JOIN TABLE1 ON T2.ID=T1.ID
      LEFT JOIN TABLE3 ON T2.ID=T3.ID
  WHERE T1.ID IS NULL
UNION
  SELECT T3.ID, T1.VALUE1, T2.VALUE2, T3.VALUE3 --all T3 where T1 is NULL AND T2 IS NUL
  FROM TABLE1 T3
      LEFT JOIN TABLE1 ON T3.ID=T1.ID
      LEFT JOIN TABLE2 ON T3.ID=T2.ID
  WHERE T1.ID IS NULL
        AND T2.ID IS NULL 
```

# xslt - 在 xslt 的子节点中定义带前缀的命名空间

> ID：10978583
> 
> 赞同：0
> 
> 时间：2012-06-11T10:42:00.997
> 
> 标签：xslt, xml-namespaces

有没有办法使用 xslt.xml 在 xml 的子节点中定义（带前缀的命名空间）。所以我的命名空间也适用于它的后代，我有使用

```
<xsl:element name="abc" namespace="{$prmPafNamespace}"> 
```

但它创建默认命名空间。

当我像下面这样使用它时

```
<xsl:element name="paf:abc" namespace="{$prmPafNamespace}">
    <xsl:element name="paf:child_abc"/>
</xsl:element> 
```

然后它给出了'paf'未定义的错误，如何解决这个问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:21:35.493

您需要在每个元素上定义命名空间，例如

```
<xsl:element name="paf:abc" namespace="{$prmPafNamespace}">
    <xsl:element name="paf:child_abc" namespace="{$prmPafNamespace}"/>
</xsl:element> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:07:44.400

您可以尝试向`xmlns:paf="{$prmPafNamespace}"`文档/元素添加属性，但我不确定它是否适用于动态命名空间 URI。

# hadoop - 如何使用 testNG 在 Java 中运行 MapReduce 程序？

> ID：10978585
> 
> 赞同：0
> 
> 时间：2012-06-11T10:42:04.973
> 
> 标签：hadoop, testng

我有一个基于 Hadoop 的 MapReduce 程序。我知道如何使用 ${hadoop_home}/bin/hadoop jar 命令运行它。

但是，我想用 testNG 运行这个程序。我应该怎么做才能用 hadoop 开始一个 testNG 案例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:28:51.183

如果您正在寻找一个单元测试框架，请查看[mr-unit (Apache)](http://mrunit.apache.org/)。您可以将驱动程序代码包装在 JUnit 或假设 TestNG 中（免责声明 - 我只使用过 JUnit）。

这允许您通过映射器或缩减器推送值并断言特定的输出/计数器出来了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:09:22.480

终于弄明白了，关键是classpath的设置。

除了**hadoop-core-.jar之外，** **${hadoop_home}/share/hadoop/lib/**下的所有 jar 文件， ${hadoop_home}/share/hadoop/lib/ **jsp-/ 下**的 jar 文件，以及其他 jar 文件是程序代码依赖，"${hadoop.home}/conf", **"${hadoop.home}/share/hadoop"**和MR程序本身必须编译打包成Jar文件并添加到运行时类路径中。

这样设置完成后，调用MR方法的testNG测试用例就可以正常运行了。

# asp.net - 如何在 SDL Tridion 中使用 XSLT 将站点地图 XML 文件转换为面包屑？

> ID：10978587
> 
> 赞同：2
> 
> 时间：2012-06-11T10:42:09.077
> 
> 标签：asp.net, xslt, tridion, tridion-2011

我有一个站点地图的 XML 文件，它是：

```
<?xml version="1.0" encoding="utf-8"?>
<siteMap>
  <siteMapNode url="/" title="Home" tcmId="tcm:142-2-4">
    <siteMapNode url="/controls" title="Controls" tcmId="tcm:142-1131-4" type="structure group" />
    <siteMapNode url="/css" title="CSS" tcmId="tcm:142-1134-4" type="structure group" />
    <siteMapNode url="/js" title="JS" tcmId="tcm:142-1133-4" type="structure group" />
    <siteMapNode url="/xslt" title="XSLT" tcmId="tcm:142-1132-4" type="structure group"   />
    <siteMapNode url="/mobile" title="Mobile" tcmId="tcm:142-1165-4" type="structure group" />
    <siteMapNode url="/mobilebiscuitml" title="Mobile BiscuitML" tcmId="tcm:142-1180-4" type="structure group" />
    <siteMapNode url="/system" title="system" tcmId="tcm:142-136-4" type="structure group">
    <siteMapNode url="/system/captcha" title="Captcha" tcmId="tcm:142-260-4" type="structure group" />
    <siteMapNode url="/system/communicator" title="Communicator" tcmId="tcm:142-201-4" type="structure group" />
    <siteMapNode url="/system/errorpages" title="Error Pages" tcmId="tcm:142-322-4" type="structure group" />
    <siteMapNode url="/system/includes" title="includes" tcmId="tcm:142-138-4" type="structure group" />
    <siteMapNode url="/system/masterpages" title="Master Pages" tcmId="tcm:142-139-4" type="structure group" />
    <siteMapNode url="/system/outboundemail" title="Outbound Email" tcmId="tcm:142-199-4" type="structure group" />
    <siteMapNode url="/system/SiteEdit" title="SiteEdit" tcmId="tcm:142-214-4" type="structure group" />
    <siteMapNode url="/system/ui_widgets" title="UI Widgets" tcmId="tcm:142-320-4" type="structure group" />
    <siteMapNode url="/system/webtemplates" title="Web Templates" tcmId="tcm:142-333-4" type="structure group" />
    <siteMapNode url="/system/xml" title="Xml" tcmId="tcm:142-141-4" type="structure group" />
  </siteMapNode>
  <siteMapNode url="/App_GlobalResources" title="Website Labels" tcmId="tcm:142-295-4" type="structure group" />
    <siteMapNode url="/Bpo.aspx" title=" BPO" tcmId="tcm:142-10830-64" type="page" />
    <siteMapNode url="/Careers.aspx" title=" Careers" tcmId="tcm:142-10692-64" type="page" />
    <siteMapNode url="/bpoHitech.aspx" title=" Hitech" tcmId="tcm:142-10710-64" type="page" />
    <siteMapNode url="/news.aspx" title=" News" tcmId="tcm:142-10868-64" type="page" />
    <siteMapNode url="/ISD.html" title="ISD" tcmId="tcm:142-11027-64" type="page" />
    <siteMapNode url="/Services.aspx" title="Services" tcmId="tcm:142-10681-64" type="page" />
    <siteMapNode url="/Knowledge.aspx" title="Knowledge" tcmId="tcm:142-11170-64" type="page" />
  </siteMapNode>
</siteMap> 
```

到目前为止我所做的：在 PT DWT TBB 的脚本标签中创建一个函数。其中，pageload() { id="@@Page.ID@@" } 这个 TBB 继承了一个（.cs 文件），其中我在一个类中定义了一个 id 属性。创建此类类型的对象并访问该属性。将此属性用作 XSLT 参数并通过 xsl 应用转换。

任何其他建议都会很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T14:31:31.240

Manoj，下面的 XSL 可能会有所帮助。我没有对此进行测试，但在过去的一些项目中使用它，xml 结构略有不同，但下面的代码片段应该可以帮助您朝着正确的方向前进。

```
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
     <xsl:template match="/">
        <xsl:for-each select="//siteMapNode[@title = '<<Controls>>']">  ---> Node title of the current page
            <div id="breadcrumb">
                <xsl:for-each select="ancestor::siteMapNode"> --> selects the parent and loop through.. 
                    <a href="@url"><xsl:value-of select="@title"/></a> &gt; --> breadcrumb separator ">"
                </xsl:for-each>
                <xsl:value-of select="@title"/>
            </div>
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T11:10:42.393

你考虑过这个吗？： http: [//msdn.microsoft.com/en-us/library/x20z8c51.aspx](http://msdn.microsoft.com/en-us/library/x20z8c51.aspx)

# php - php - 简单的缓存功能 - 每小时检索一次数据

> ID：10978592
> 
> 赞同：2
> 
> 时间：2012-06-11T10:42:28.200
> 
> 标签：php

我想用 php 设置一个简单的缓存功能。我希望脚本从某个地方获取数据，但不是在每个页面视图中都执行此操作，而是每小时执行一次。

我知道我可以有一个每小时运行一个 php 脚本的 cron 作业。

但我想知道这是否可以在没有 cron 的情况下实现，就在基于获取（或缓存）的数据创建页面的 php 脚本中。我真的在寻找最简单的解决方案。不一定要准确

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T11:03:36.710

我也会使用 APC，但无论哪种情况，您仍然需要一些逻辑。PHP中的基本文件缓存：

```
if (file_exists($cache_file) and time() - filemtime($cache_file) < 3600)
{
    $content = unserialize(file_get_contents($cache_file));
}
else
{
    $content = your_get_content_function_here();
    file_put_contents($cache_file, serialize($content));
} 
```

如果 $content 不是字符串（例如数组或对象），您只需要序列化/反序列化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T10:48:13.457

为什么不使用 APC ？
你可以做

```
apc_store('yourkey','yourvalue',3600); 
```

然后您可以使用以下方法检索内容：

[apc_fetch();](http://it.php.net/manual/en/function.apc-fetch.php)

# c++ - Magick++ makefile 不起作用，但看似相同的命令行选项有效

> ID：10978595
> 
> 赞同：0
> 
> 时间：2012-06-11T10:42:44.413
> 
> 标签：c++, makefile, g++, imagemagick

我一直在使用 makefile 来编译程序，而我刚刚开始使用 image magick 库，显然我做错了什么。

我添加的行是：`Magick++-config --cppflags --cxxflags --ldflags --libs`

这是我的makefile，在运行make时我被告知（链接器？）找不到Magick++.h

```
CFLAGS = -g -fPIC

SOURCES= $(wildcard *.cpp)

OBJECTS=$(patsubst %.cpp, %.o, $(SOURCES))

TARGET=$(lastword $(subst /, ,$(realpath .)))

LINKS= -lcprocessing -lglut -lGLU -lGL

all: $(TARGET)
    @echo $(TARGET) built

$(TARGET): $(OBJECTS)
    @g++ $(CFLAGS) $(LINKS) -o $@ $(OBJECTS) `Magick++-config --cppflags --cxxflags --ldflags --libs`

clean:
    rm -rf $(OBJECTS) $(TARGET) 
```

但是，运行：

```
g++ -lcprocessing -lglut -lGLU -lGL `Magick++-config --cppflags --cxxflags --ldflags --libs` Spot.cpp -o Spot 
```

编译和工作正常。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:05:46.530

Makefile 和控制台上的输出`Magick++-config`不同的可能性很大（因为该输出*应该*为编译器提供适当的选项，例如在哪里可以找到头文件）。

修改 Makefile 以便打印输出`Magick++-config`（使用您提供的选项），并将其与您在命令行上获得的输出进行比较。

如果您正在寻找快速修复，请将反引号中的命令手动替换为您在命令行上获得的（显然是功能性的）输出。

# jquery - 使用 jQuery 表单插件提交表单后禁用输入

> ID：10978596
> 
> 赞同：0
> 
> 时间：2012-06-11T10:42:45.307
> 
> 标签：jquery

我的 HTML 要点（我在同一页面上有多个表单）

```
<tr>
    <form method="post" class="save-form" id="93">
        <td>
            <a href="#" class="edit">Edit</a> <input type="submit" value="save" name="save" class="save hidden" />
        </td>
        <td class="center gray">
            <input type="text" value="234" name="views" />
        </td>
    </form>
</tr> 
```

我正在使用[jQuery 表单插件](http://jquery.malsup.com/form/#html)。

```
$('.save-form').each(function() {
    $(this).ajaxForm({
        beforeSubmit: function() {
            //
        },
        success: function(data) {
            //
        }
    });
});

$('.save-form').submit(function() { 
    $(this).parent().find('a.edit').show();
    $(this).parent().find('input.save').hide();
 // $(this).parent().find('input').attr('disabled', 'disabled');
}); 
```

所有这一切都很好。

但我想将所有内容`$('.save-form').submit(function() {`从`success:`. 我无法用我拥有的 HTML 弄清楚它..

我还想`save`在提交表单后禁用输入。如果我尝试 with `$('.save-form').submit(function() {`，它会禁用输入，但不会提交输入数据 - 我认为是因为输入在处理之前被禁用。如果从内部禁用`success:`它应该可以工作，但我也无法弄清楚。

如何处理表单然后禁用输入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:48:26.110

检查这个：http: [//jsfiddle.net/niski/JjBTk/](http://jsfiddle.net/niski/JjBTk/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T10:49:53.937

我会说，你应该这样尝试：

```
$('.save-form').each(function() {
    var form = this;
    $(this).ajaxForm({
        beforeSubmit: function() {
            $(form).parent().find('input.save').attr('disabled', 'disabled');
        },
        success: function(data) {
            $(form).parent().find('a.edit').show();
            $(form).parent().find('input.save').hide();
        }
    });
}); 
```

# flash - 从 843 以外的端口提供策略文件时，Flash 二进制套接字连接失败

> ID：10978597
> 
> 赞同：4
> 
> 时间：2012-06-11T10:42:54.807
> 
> 标签：flash, apache-flex, actionscript

我正在尝试在 Flash 中设置一个二进制套接字连接到服务器，而不是提供 swf 的服务器。按照 Adob​​e 关于套接字策略文件的文档，我从目标服务器的 843 端口提供此文件：

```
<!DOCTYPE cross-domain-policy SYSTEM "http://www.adobe.com/xml/dtds/cross-domain-policy.dtd"> 
<!-- Policy file for xmlsocket://socks.mysite.com --> 
<cross-domain-policy>  
    <allow-access-from domain="*" to-ports="6666" />  
</cross-domain-policy> 
```

然后我使用以下 AS3 代码连接到 6666 端口：

```
sock.addEventListener(Event.CLOSE, closeHandler);
sock.addEventListener(Event.CONNECT, connectHandler);
sock.addEventListener(IOErrorEvent.IO_ERROR, ioErrorHandler);
sock.addEventListener(SecurityErrorEvent.SECURITY_ERROR, securityErrorHandler);
sock.addEventListener(ProgressEvent.SOCKET_DATA, socketDataHandler);
sock.connect('myserver', 6666); 
```

这完美地工作。但是当我尝试从 843 以外的端口提供策略文件时，事情变得很糟糕。如果我将策略文件服务器设置为在端口 6669 上侦听，并在尝试连接之前更改我的 Flash 代码添加此调用：

```
Security.loadPolicyFile("xmlsocket://myserver:6669"); 
```

..那么连接将只工作大约一半的时间，如果没有，我会收到安全错误#2048。我已经检查了这些情况，策略文件服务器甚至没有收到来自客户端的返回 xml 文件的请求。

从 843 或 6669 提供服务时，服务器代码完全相同。我检查了在 xml 字符串之后发送的空字节，并且我还使用 Adob​​e 的示例策略文件服务器进行了尝试，结果相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:13:20.877

使用网络分析工具后，我找到了答案：结果 Flash 不会关闭从失败请求到 843 的套接字，即使在 3 秒超时之后也是如此。

套接字需要几秒钟才能完全关闭。如果您在此期间尝试重新建立连接，即使您使用不同的浏览器窗口，它也会失败。

# macos - OSX Option/Alt as Meta：有没有办法在标准 Emacs 24 中移植或使用 emulate-mac-keyboard-mode？

> ID：10978598
> 
> 赞同：4
> 
> 时间：2012-06-11T10:42:55.473
> 
> 标签：macos, emacs, aquamacs

Emacs 24.1 刚刚发布，我再次倾向于使用“真正的”Emacs（Cocoa GUI 版本，来自[http://emacsformacosx.com](http://emacsformacosx.com)）而不是 Aquamacs。让我留在 Aquamacs 的唯一原因[是](http://www.emacswiki.org/emacs/MetaKeyProblems)：

> 在 AquamacsEmacs 中，Option (Alt) 映射到 Meta - 然而，由于 Option 用于在各种键盘上输入大量非 ASCII 字符，例如 ü 或 £，因此默认情况下优先使用特殊字符输入法。您可以在选项菜单中取消选择“选项键仅生成特殊字符”以将选项用作 Meta，或者将变量 mac-command-modifier 设置为 'meta - 当然，您将失去功能。如果您使用非英语键盘布局，模拟模式可能正是您想要的。虽然它们将 Option 键映射到 Meta，但它们将允许您直接使用 Option 键输入许多常用字符（[、]、{、}、\ 等），就像您在其他情况下一样。您可以在选项 → 选项键菜单中找到它们 - 或使用例如 Mx emulate-mac-german-keyboard-mode。

[这个问题](https://stackoverflow.com/questions/500602/os-x-terminal-meta-key-alt-functionality-at-the-same-time)谈到了同样的问题，其中一个答案是“使用 Aquamacs”。

所以在 Aquamacs 中，我可以使用 Option 键作为 Meta 并且一切都很好，我可以使用 option(alt)-8 键入 eg [ 并且当我将其添加到我的 .emacs 中时仍然使用 alt 作为 meta：

```
(setq emulate-mac-finnish-keyboard-mode t) 
```

但是有什么方法可以在 Emacs 24 中使用这个特性呢？有没有人尝试过将 emulate-mac-‌​keyboard-mode.el 移植到标准 Emacs？

*不， cmd 作为 meta 对我来说不是一个选择。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:39:13.253

> 有没有人尝试过将 emulate-mac-‌​keyboard-mode.el 移植到标准 Emacs？

我还没有测试过它，但是你链接的问题的[这个答案](https://stackoverflow.com/a/7284152/606705)声称已经做到了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T11:09:59.417

我没有使用 Emacs，但是当我尝试为 VIM 重新映射某些键时，我遇到了一些接线问题。我终于发现这些问题是由 Terminal.app 引起的，因为它不知何故没有通过一些关键事件。然后我切换到 iTerm2，它还具有一些附加功能，例如无需插件的 X11 鼠标事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T20:59:44.033

我使用[EmacsForMacosx](http://emacsformacosx.com/)。这声称是纯 gnu emacs。

您要求的选项很容易通过`customize-group` `ns`

（据我所知，命名来自 NextStep，它有点像是 OSX 的前身）

我个人将`fn` 密钥设置为，`meta`因为我在 emacs 中几乎不使用它。并保持`alt`mac使用的状态。您还可以将左右交替设置为不同的功能 - 例如 Windows 键盘上的德语。

# objective-c - 如何配置 CocoaPods 以使用 https://github.com/RestKit/cocoa-oauth 而不是过时的？

> ID：10978600
> 
> 赞同：4
> 
> 时间：2012-06-11T10:43:03.710
> 
> 标签：objective-c, ios, xcode4, automatic-ref-counting, restkit

在启用 ARC 的新创建的 Xcode 项目中，有警告消息`RKRequest.m`：

```
Semantic Issue:
Instance method '-hostAndPort' not found (return type defaults to 'id')
Semantic Issue:
Class method '+URLRequestForPath:PUTParameters:scheme:host:consumerKey:consumerSecret:accessToken:tokenSecret:' not found (return type defaults to 'id')
Semantic Issue:
Instance method '-hostAndPort' not found (return type defaults to 'id')
Semantic Issue:
Class method '+URLRequestForPath:POSTParameters:scheme:host:consumerKey:consumerSecret:accessToken:tokenSecret:' not found (return type defaults to 'id')
Semantic Issue:
Instance method '-hostAndPort' not found (return type defaults to 'id') 
```

这是`Podfile`：

```
platform :ios

dependency 'Facebook-iOS-SDK', '1.2'
dependency 'RestKit', '0.10.1' 
```

和：

```
cocoapods (0.6.0.rc2) 
```

如何修复警告？

**更新：**

经过进一步调查，似乎 CocoaPods 依赖于一个过时的`cocoa-oauth`库，这[在本期](https://github.com/CocoaPods/Specs/issues/246)中有描述。于是问题就变成了：

*   如何配置 CocoaPods 以使用[https://github.com/RestKit/cocoa-oauth](https://github.com/RestKit/cocoa-oauth)而不是过时的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T18:58:04.500

将此添加到您的 .m 源

```
#import < RestKit/RestKit.h > 
```

和 lib 到你的项目

见相关

[RestKit/RestKit.h 文件未找到错误 - 版本 0.10.0](https://stackoverflow.com/questions/10168610/restkit-restkit-h-file-not-found-error-version-0-10-0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T06:11:40.437

我对cocoapods一无所知，但我知道你的警告。这些警告意味着在标头中找不到您尝试发送对象的消息。

这可能意味着几件事：

```
- the header file is not in the search path of your build settings. 
- the header file does not exist.
- the header file is not included in your project.
- the methods do not exist at all or do not exist in your header. 
```

确保您正在导入 RKRequest.h 文件并且该文件位于搜索路径中。请记住，如果 RKRequest.m 是框架或库的一部分，您的项目仍然需要标头。

# mysql - 在mysql中存储固定数量的项目

> ID：10978601
> 
> 赞同：0
> 
> 时间：2012-06-11T10:43:07.783
> 
> 标签：mysql, sql, database-design

我将以固定值和固定顺序存储抽奖号码 (1-60)。

> 一个抽签有 4 个号码，
> 另一个抽签有 6 个号码
> ，另一个抽签有 2 个号码

我的想法是在单独的 sql 表中分离每种绘制类型。问题是，将数字存储在由分隔符分隔的单列中是否是最佳选择......

```
ID(int) | numbers(varchar) 
```

还是将每个数字存储在单独的列中？

```
ID(int) | num1(tinyint) | num2(tinyint) | num3(tinyint) | num4(tinyint) 
```

我不需要在存储数字时搜索它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:46:50.557

单独的列（[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T10:48:46.757

如果您不需要搜索数字（即查找具有特定数字的抽奖），那么我会将数字存储在同一字段中。

**澄清**

他自己说过，他只是存储数据，不需要对其进行任何操作。这些数据是什么并不重要。它恰好在 2 到 6 个数字之间，但这无关紧要。除非出于某种原因需要，否则没有理由将它们放在单独的列中。

我要做的是只使用一张表，三列：id，draw_type，numbers

使用 3 个不同的表（每个表有 3 到 7 列）要容易得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T15:59:45.647

如果您不需要单独搜索或单独检索它们，那么从数据库的角度来看，它们只是一个不透明的“blob”，将它们存储到单个字段中不会违反[原子性](http://en.wikipedia.org/wiki/1NF#Atomicity)和 1NF原则.

**但是**，仅仅因为现在是这样，并不意味着将来不会改变。所以至少使用第二个选项。此外，这将允许 DBMS 强制执行**域的完整性**并确保这些实际上是数字和任何字符串。

但是，为了让您的数据适应未来，我会更进一步并使用以下结构：

![在此处输入图像描述](../Images/64d54d9ac580d61327285f386fb2e803.png)

除了以统一的方式处理数字并避免许多 NULL 之外，它还允许您轻松更改最大值。如果有必要的话。我怀疑在这种结构中查询也会更容易。

顺便说一句，如果没有`(other fields)`并且没有至少一个数字就不能存在平局，那么您可以完全放弃 DRAW 表而只使用 DRAW_NUMBER。

# regex - 需要覆盖之前写的重写规则

> ID：10978602
> 
> 赞同：0
> 
> 时间：2012-06-11T10:43:25.800
> 
> 标签：regex, .htaccess, url-rewriting

我在 htaccess 文件中有一些重写规则。我还在研究它，所以有些事情我不确定。基本上我希望所有页面（除了 /register 页面）都像这样重写：[http](http://www.example.com/about) ://www.example.com/about -> [http://www.example.com?page=about](http://www.example.com?page=about)

为了做到这一点，我写了这条规则：

```
RewriteRule ^([a-z-_1-9]+)+/?$ ./?page=$1&%{QUERY_STRING} [L] 
```

然后我在上面的那个下面写了这个规则，认为它会覆盖它，但它没有......

```
RewriteRule ^register/?$ ./?page=login&option=register 
```

所以去 /register 会给我一个 404。但是，如果我注释掉第一条规则，那么注册页面就可以工作。我在想它会像 CSS 一样工作，在下面写一个新规则会优先。我怎样才能做到这一点，你如何覆盖以前编写的重写规则？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:54:35.857

.htaccess 不是 CSS——尤其是涉及到 mod_rewrite 指令/规则时。

规则从上到下执行。因此 -**将更具体的规则放在顶部，然后将更通用的规则放在底部**。

在你的情况下：

```
RewriteRule ^register/?$ ./?page=login&option=register [L]
RewriteRule ^([a-z-_1-9]+)+/?$ ./?page=$1&%{QUERY_STRING} [L] 
```

# eclipse-plugin - 自动升级 Eclipse (Lotus Notes 8.5.2) 插件

> ID：10978605
> 
> 赞同：0
> 
> 时间：2012-06-11T10:43:30.713
> 
> 标签：eclipse-plugin, lotus-notes, auto-update

我正在尝试为 Lotus Notes 8.5.2 提供自动更新功能。该插件正在 Eclipse 3.4.2 下开发。到目前为止，我还没有设法通过连接到 Lotus Notes API 找到一种标准方法。我想到的是以下两种方法。

*   使用 Eclipse p2 SDK 在运行时执行自动升级（在插件的早期启动时，更新程序将检查新版本并更新插件）。此条目描述了方法-> [http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Fguide%2Fp2_api_overview.htm](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Fguide%2Fp2_api_overview.htm)。不幸的是，SDK 不是 Eclipse 3.4.2 的一部分，我没有设法在 3.4.2 中使用这种方法。

*   使用关闭 Lotus Notes 的外部进程，从 Lotus 的插件目录中删除旧版本的插件，将新版本复制到插件目录，再次启动 Lotus Notes 并终止该进程。

第二种方法似乎合理，但需要在自动升级过程中关闭 Lotus Notes。所以我的问题是 - 是否有任何类似于上述第一个或任何其他 Lotus Notes 标准程序的方法？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T07:01:19.890

阅读小部件目录。它会做你想做的事。

[http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.help.domino.admin85.doc/H_MANAGING_CLIENTS_USING_WIDGETS_AND_THE_WIDGETS_CATALOG_OVER.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.help.domino.admin85.doc/H_MANAGING_CLIENTS_USING_WIDGETS_AND_THE_WIDGETS_CATALOG_OVER.html)

不过，在任何插件更新后，您仍然需要重新启动客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:30:12.027

感谢西蒙的建议-我找到了使用这篇文章中的建议的更直接的方法-> [http://www.eclipsezone.com/eclipse/forums/t97689.html](http://www.eclipsezone.com/eclipse/forums/t97689.html) 并添加了配置操作（IConfigureFeatureOperation）进行更新Lotus Notes 的 platform.xml 文件中的功能版本。以下是说明该方法的示例片段：

```
 String updateSiteUrl = configuration.getUpdateSiteUrl();

        IProgressMonitor monitor = new NullProgressMonitor();
        ISite updateSite = SiteManager.getSite(new URL(updateSiteUrl),
                monitor);
        IFeatureReference[] siteFeatures = updateSite
                .getFeatureReferences();
        ILocalSite localSite = SiteManager.getLocalSite();

        List<IInstallFeatureOperation> installOps = new ArrayList<IInstallFeatureOperation>();
        List<IConfigFeatureOperation> configOps = new ArrayList<IConfigFeatureOperation>();

        IConfiguredSite[] configuredSites = localSite
                .getCurrentConfiguration().getConfiguredSites();

        for (IConfiguredSite configuredSite : configuredSites) {

            IFeatureReference[] localSiteFeatures = configuredSite
                    .getConfiguredFeatures();

            for (IFeatureReference siteFeature : siteFeatures) {
                for (IFeatureReference localSiteFeature : localSiteFeatures) {

                    VersionedIdentifier featureVi = siteFeature
                            .getVersionedIdentifier();
                    VersionedIdentifier localFeatureVi = localSiteFeature
                            .getVersionedIdentifier();

                    if (featureVi.getIdentifier().equals(
                            localFeatureVi.getIdentifier())) {

                        if (featureVi.getVersion().isGreaterThan(
                                localFeatureVi.getVersion())) {

                            installOps
                                    .add(OperationsManager
                                            .getOperationFactory()
                                            .createInstallOperation(
                                                    configuredSite,
                                                    siteFeature
                                                            .getFeature(monitor),
                                                    null, null, null));

                            configOps
                                    .add(OperationsManager
                                            .getOperationFactory()
                                            .createConfigOperation(
                                                    configuredSite,
                                                    siteFeature
                                                            .getFeature(monitor),
                                                    null, null));
                        }
                    }
                }
            }
        }

        if (installOps.size() > 0) {

                // install new feature
                for (Iterator<?> iter = installOps.iterator(); iter
                        .hasNext();) {
                    IInstallFeatureOperation op = (IInstallFeatureOperation) iter
                            .next();
                    op.execute(monitor, null);
                }

                // configure new feature
                for (Iterator<?> iter = configOps.iterator(); iter
                        .hasNext();) {
                    IConfigFeatureOperation op = (IConfigFeatureOperation) iter
                            .next();
                    op.execute(monitor, null);
                }

                localSite.save();} 
```

# rad - JAR 在 EAR 模块组件 RAD 8 中添加为 .ejb-client

> ID：10978608
> 
> 赞同：1
> 
> 时间：2012-06-11T10:43:43.787
> 
> 标签：rad, ejb-2.x

我在 Windows XP 上使用 Rational Application Developer v8.0.4。

我有一个 ejb 应用程序 A。我正在尝试将应用程序 A 添加到应用程序 B 的 EAR 模块组件中（这将创建包含 A.jar 作为客户端 EJB JAR 的 b.ear）。但问题是我尝试将项目 B 添加为右键单击 B --> 单击属性 --> 单击部署组件 --> EAR 模块组件部分 --> 单击添加 --> 选择项目- -> 选择项目 B。

通过这样做，项目 B 作为 B.ejb-client 而不是 B.jar 添加到项目 A。任何人都可以帮助我为什么会这样？

# jquery - Jquery 工具选项卡速度

> ID：10978611
> 
> 赞同：0
> 
> 时间：2012-06-11T10:43:51.523
> 
> 标签：jquery, tabs, customization, slideshow

我正在尝试控制 Jquery 工具选项卡滑块的速度，但无法使其正常工作。我不确定我在这里做错了什么......

我尝试了以下代码，但没有奏效......

```
$(function() {
      $(".slidetabs").tabs(".images > div", {

    // enable "cross-fading" effect
    effect: 'fade',
    fadeOutSpeed: "slow",
    // start from the beginning after the last tab

    rotate: true,

   // Autoplay doesn't work               
   autoPlay: true,  
   interval: 3000     

    // use the slideshow plugin. It accepts its own configuration
    }).slideshow();

}); 
```

[http://jsfiddle.net/shavindra/j7UcM/9/](http://jsfiddle.net/shavindra/j7UcM/9/)

所以我尝试了这个......它有效但我无法控制间隔

```
$(".slidetabs").data("slideshow").play({

      // interval configuration doesn't work    
      interval: 3000
     }); 
```

文档在这里：http: [//jquerytools.org/documentation/tabs/slideshow.html](http://jquerytools.org/documentation/tabs/slideshow.html)

JSfiddle 链接在这里[http://jsfiddle.net/shavindra/j7UcM/10/](http://jsfiddle.net/shavindra/j7UcM/10/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T17:01:08.737

您必须像这样设置此值：

```
$(".slidetabs").tabs(".images > div.slidebox", {

    // enable "cross-fading" effect
    effect: 'fade',
    fadeOutSpeed: "slow",
    //fadeOutSpeed: 200,

    // start from the beginning after the last tab
    rotate: true,
    autopause: false
// use the slideshow plugin. It accepts its own configuration
}).slideshow(
    {autoplay: true, interval: 7000} // SET INTERVAL HERE
); 
```

# git - 如何不使用多个分支的 rebase

> ID：10978613
> 
> 赞同：3
> 
> 时间：2012-06-11T10:43:58.687
> 
> 标签：git, git-branch, git-rebase

我在一个同时使用多个分支的项目中使用 git，即：

```
A ---- B ---- C
 \       \
  \       ---- D
   ---- E 
```

根据情况使用每个命名项目（即我需要同时访问 A、B 和 D...）。当我修改代码时，我会在我能做到的更高相关分支（主要是 A）中进行修改，然后将每个分支重新定位到新的“A”以传播差异。

由于我被告知这是一个坏习惯，因为它会产生推/拉问题，现在我必须在我的项目中添加一个新的维护者，我想有另一种方式来做我想做的事。

有人建议我做条件编译，这是我早期开发的方式，但是现在我有很多分支（目前大约 10 个）并且代码变得非常难以阅读，这就是我来这个分支解决方案的原因...

Cherry-picking 看起来很棒，但是每次提交都会进行 10 次提交，并且我们失去了 B 是 A 的孩子这一事实的“视觉”表示......

任何其他想法，建议？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T15:59:55.997

只需使用“git merge”而不是“git rebase”。

假设一个错误出现在图表的分支 A 中。它是显示错误的最上游分支，因此这就是您要修复的。你检查它，编写修复代码，测试修复，并确认它在 A 上有效。然后，当你想在其他任何地方传播它时，你：

1.  结帐 B 并将 A 合并到 B 中。
2.  检出 E 并将 A 合并到 E 中。
3.  签出 C 并将 B 合并到 C 中。
4.  签出 D 并将 B 合并到 D 中。

如果问题首先出现在 B 中，您将检查 B、编写修复代码、测试修复，然后只执行步骤 3 和 4。

[在此页面上搜索“向上合并”以获取更多信息。](http://www.kernel.org/pub/software/scm/git/docs/v1.7.3/gitworkflows.html)

这确实会导致许多合并操作，如果您修复 A（10 个后代分支的父分支），则在您的示例中为 10 个，但这也是您可以使用的最合理的工作流程，不会 a) 使您的协作者发疯，因为重新提交的提交不断被推送到远程，并且b）不会完全破坏您将分支合并到另一个的能力。

*b)*顺便说一句，这就是为什么你不想要 'git cherry-pick' 的原因。当然，Cherry-pick 会将您的更改集从 A 传播到 10 个其他分支，但它会在它使用的每个不同分支中更改该提交的 SHA1 哈希。例如，如果您在以后将 B 合并到 A 中，那么您最终会得到冗余的历史记录：它们所做的更改集是相同的，但具有完全不同的 SHA1 哈希值。有时这并不是什么大不了的事，但是[如果您将其编入您的工作流程中，它将以悲惨的方式使您失望。](https://stackoverflow.com/a/10819041/877115)冗余的合并历史也会破坏 'git bisect' 和 'git rebase'，并且几乎无法阅读。对于这个分支模型，尽可能避免使用“git cherry-pick”。

# c# - 如何扩展现有的 ContextMenuStrip？

> ID：10978623
> 
> 赞同：0
> 
> 时间：2012-06-11T10:44:26.607
> 
> 标签：c#, contextmenustrip

我的应用程序的每个工作区控件都有一个共同点`ContextMenuStrip`。这`ContextMenuStrip`包含 4 个项目（“前移”、“后移”和“删除控件”）。

现在我想为一个控件扩展它。此控件上有一个`DataGridView`，我想要一个附加项目来删除选定的`DataGridViewRow`.

这是我试过的代码：

```
 private void extendContextMenuOfDataGridViewRow (DataGridViewRow row) {
        ContextMenuStrip ctx = new ContextMenuStrip();
        foreach (ToolStripMenuItem item in this.ContextMenuStrip.Items) {
            ctx.Items.Add(item);
        }
        ctx.Items.Add(new ToolStripSeparator());
        ToolStripMenuItem ctxDeleteRow = new ToolStripMenuItem("Delete row");
        ctxDeleteRow.Name = "ctxDeleteRow";
        ctxDeleteRow.Click += new EventHandler(ctxDeleteRow_Click);
        ctx.Items.Add(ctxDeleteRow);

        row.ContextMenuStrip = ctx;
    } 
```

`foreach`将循环的第一项添加到`ctx.Items`调试器后，整个方法将离开整个方法，而第一项在 common 中丢失`ContextMenuStrip`。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T10:52:14.297

我已经很久没有使用 WinForms 了，但是你确定你可以一次将同一个`Row`对象分配给两个不同`Strip`的 s 吗？

```
foreach (ToolStripMenuItem item in this.ContextMenuStrip.Items) {
    ctx.Items.Add(item);
} 
```

我严重怀疑这是否应该按设计工作，因为一行必须与其父级“对话”，并且通过将其添加到另一个条带中，恐怕您正在重新分配父级。

相反，我会在公共菜单中添加一个项目，但**其`Visible`属性为`false`**.
然后我会捕捉菜单打开事件并在目标是`DataGridViewRow`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:51:34.637

如果您想扩展某些控件的功能，您可以

a) 创建一个扩展方法

```
public void DoSomething(this MyExtendedControl mec, DataGridViewRow row)
{
} 
```

b）创建一个从您不满意的控件继承的新类（甚至创建一个全新的控件），当您可以根据需要覆盖/添加东西时

看你的具体需求，看你的描述看不懂。。。

# excel - 双击打开 Excel 工作簿时未加载 Excel 2010 插件

> ID：10978625
> 
> 赞同：2
> 
> 时间：2012-06-11T10:44:33.380
> 
> 标签：excel, load, vsto, add-in

我为 Excel 2010 编写了一个加载项。如果我从“开始”菜单打开 Excel，它工作正常。但是，如果我双击 Excel 工作簿，就无法加载 AddIn。我查了一下，没有涉及`ThisAddIn.cs`到方法。`InternalStartup()`有人可以帮助我吗？谢谢！

但是从命令行“excel.exe table1.xlsx”打开文件有效！

# google-maps - Google Maps API V3，在画圈时，Chrome 中的预期令牌 ILLEGAL

> ID：10978627
> 
> 赞同：0
> 
> 时间：2012-06-11T10:44:55.673
> 
> 标签：google-maps, google-maps-api-3

刚开始在我们的 Google Maps API 页面之一中遇到错误。它一直运行良好，上周运行良好，但我今天早上对其进行了测试，但它在 Chrome 中无法运行。

页面链接：

[http://www.stroud.gov.uk/whereilive/index.asp?uprn=010014280260&postcode=GL5+4UB&page=planning](http://www.stroud.gov.uk/whereilive/index.asp?uprn=010014280260&postcode=GL5+4UB&page=planning)

地图上应该有许多标记和一个圆圈，但这些没有出现。我在控制台中收到以下错误：

```
Uncaught SyntaxError: Unexpected token ILLEGAL maps.gstatic.com/cat_js/intl/en_gb/mapfiles/api-3/9/2/%7Bcommon,map,util,infowindow,marker,poly%7D.js:6 
```

看这个指向这个谷歌函数：

```
google.maps.__gjsload__('poly', 'function... 
```

我的第一个想法是“我没有画任何多边形/线等”，但后来我意识到我正在画一个圆圈。这发生在使用标准 google.maps.Circle 函数的 whereilive_google_maps_live_v3.js 中第 263 行的 DrawCircle 函数中。

如果我删除对 DrawCircle 的调用，则页面加载并显示标记。

这只发生在 Chrome 中。还在 IE9/8/7、Firefox 13、Opera 和 Safari 中进行了测试，一切正常并绘制圆圈。

代码没有改变，直到上周末在包括 Chrome 在内的所有浏览器中都可以正常工作。

其他人是否有同样的问题或任何想法？

干杯，

麦克风

# php - 使用 PHP 驱动程序的 Mongo 不同排序查询

> ID：10978629
> 
> 赞同：0
> 
> 时间：2012-06-11T10:45:06.003
> 
> 标签：php, mongodb

从 PHP Mongo 驱动程序发出简单查询时遇到一些问题。这是外壳查询：

```
db.testing.distinct('summary.type').sort(); 
```

根据文档，我可以`db->command`使用 distinct 查询。这是我尝试过的：

```
$all_types = $db->command(
      array(
             "distinct"      => "summary.type",
             "key"           => "summary.type"
      )
);

var_dump($all_types); 
```

但是，我没有得到我期望的数据，而是得到一个带有索引的游标，`stats`我 在做什么错`nscanned`？`nscannedObjects`

谢谢， **ns**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:22:20.203

命令不返回 MongoCursor 对象，但始终只返回一个文档。就像`findOne()`. 在此返回的文档中，`values`返回数组中的数组元素包含所有结果的数组：

```
<?php
$m = new Mongo; $c = $m->demo->pubs; $c->drop();

$c->insert( array( 'name' => 'Betsy Smith',   'city' => 'London' ) );
$c->insert( array( 'name' => 'London Tavern', 'city' => 'London' ) );
$c->insert( array( 'name' => 'Lammars',       'city' => 'Manchester' ) );
$c->insert( array( 'name' => 'Weatherspoons', 'city' => 'Coventry' ) );

$r = $m->demo->command( array(
    'distinct' => 'pubs',
    'key' => 'city',
    'query' => array( 'name' => array( '$ne' => 'Weatherspoons' ) )
) );
var_dump( $r['values'] );
?> 
```

返回：

```
array(2) {
  [0] =>
  string(6) "London"
  [1] =>
  string(10) "Manchester"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T15:27:28.913

您要查找的结果实际上在`values`命令响应的键中。如果您查看 的整个输出`var_dump()`，您会看到`values`、`stats`（您提到的）和的键`ok`。

在 JavaScript 控制台上，集合的`distinct()`帮助函数实际上会为您处理展开，您可以在查看源代码时看到：

```
> db.testing.distinct
function (keyString, query) {
    var res = this._distinct(keyString, query);
    if (!res.ok) {
        throw "distinct failed: " + tojson(res);
    }
    return res.values;
} 
```

另外，我相信您在通过 PHP 驱动程序发出的命令中存在错误。该`distinct`选项应该引用集合名称，并且`key`应该引用字段名称。有关这方面的更多信息，请参阅[Distinct 文档](http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Distinct)。

# java - 带有随机填充的 Java DES 加密

> ID：10978630
> 
> 赞同：0
> 
> 时间：2012-06-11T10:45:10.353
> 
> 标签：java, encryption, des

我需要在java中使用DES算法加密和解密文件，我需要在加密期间在文件字之间填充一些随机字符，并且我需要在使用程序解密期间将它们删除，这样即使有人获得了密钥和加密文件，如果不使用我的程序，他们将无法获取内容，有什么方法可用。为达到这个。

将不胜感激您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:49:56.697

仅当文件或填充的长度已知时，才能删除随机填充。

您必须确保解密文件的人知道其中一个或另一个，并且对所有其他人隐藏。这远非微不足道。它也不是必需的，因为无论如何您都必须对密钥保密，因此添加长度只会增加额外的工作量。使用 PKCS7 进行填充，并集中精力保护密钥的机密性。

# java - 如何正确使用 StringBuilder 而不是过长的方法

> ID：10978632
> 
> 赞同：0
> 
> 时间：2012-06-11T10:45:11.600
> 
> 标签：java

我想知道如何`StringBuilder`正确使用，因为我当前的方法（[http://pastebin.com/VHjM0KeQ](http://pastebin.com/VHjM0KeQ)）太长了，我确定我可以做一个循环或字符串生成器我只是不确定如何到，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:55:48.067

除了 0 个参数和超过 20 个参数的情况外，其他情况几乎相同，您可以轻松地使用 a`StringBuilder`和循环将单词添加到文本中。

像这样：

```
if (args.length == 0) {
    player.sendMessage(ChatColor.DARK_RED + "Usage: /pm <Target> <Message>");
} else if (args.length > 20) {
    player.sendMessage(ChatColor.DARK_RED + "Error: Maximum of 20 words.");
} else {
    StringBuilder sb = new StringBuilder();
    sb.append(ChatColor.DARK_AQUA).append("[PM] ");
    sb.append(player.getName() + " > " + targetPlayer.getName());
    sb.append(ChatColor.WHITE);
    for (final String word : args) {
        sb.append(word).append(' ');
    }
    sb.setLength(sb.length - 1);
    targetPlayer.sendMessage(sb.toString());
} 
```

我使用了一个数组循环，因为它在这里工作得很好。代替

```
for (final String word : args) {
    sb.append(word).append(' ');
} 
```

你也可以写

```
for (int i = 0; i < args.length; i++) {
    sb.append(args[i]).append(' ');
} 
```

您可能会更好地理解第二种解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:56:12.160

您的代码会因使用 StringBuilders 而略有改进，这是真的：

```
targetPlayer.sendMessage(ChatColor.DARK_AQUA + "[PM] " 
+ player.getName() + " > " + targetPlayer.getName() 
+ ChatColor.WHITE + " " + args[0]) 
```

应改为：

```
targetPlayer.sendMessage(
    new StringBuilder()
    .append(ChatColor.DARK_AQUA).append("[PM] ")
    .append(player.getName()).append(" > ")
    .append(targetPlayer.getName()).append(ChatColor.WHITE)
    .append(' ').append(args[0]).build()); 
```

注意：编译器会在内部为您执行此操作，因此不会有太多的性能提升。但是，您的代码将更容易调试，因为编译后的代码将与源代码保持一致。否则，当您调试时，您将不断跳入`StringBuilder.append()`源代码中没有的调用。

但是我在您的代码中看到的主要问题是您应该将许多 if() 子句更改为 switch 语句：

```
switch(args.length){
 case 0: dosomething(); break;
 case 1: doSomethingElse();break;
 default: doSomethingEntirelyDifferent();break;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T11:04:02.777

尝试这样的事情

```
if(args.length == 0) {
    player.sendMessage(ChatColor.DARK_RED + "Usage: /pm <Target> <Message>");
} else if(args.length > 20 && player.getServer().getPlayer(args[0]) != null){
    player.sendMessage(ChatColor.DARK_RED + "Error: Maximum of 20 words.");
} else {
    StringBuilder argsConcat= new StringBuilder();
    for(int i;i<args.length;i++) {
        argsConcat.append(" "+args[i]);
    }## Heading ##
    targetPlayer.sendMessage(ChatColor.DARK_AQUA + "[PM] " + player.getName() + " > " +        targetPlayer.getName() + ChatColor.WHITE + argsConcat.toString());
} 
```

# apache-flex - 将融合图试用版导入 Adob e Flash Builder

> ID：10978635
> 
> 赞同：0
> 
> 时间：2012-06-11T10:45:28.217
> 
> 标签：apache-flex, fusioncharts

我已经安装了 Adob​​e Flash Builder 并在我的 windows PC 上下载了融合图表的试用版。如何将融合图导入 Flash Builder？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:02:51.933

要在 Flash Builder 中构建基于 ActionScript 3 的项目，您需要一个名为 - [FusionCharts for Flex](http://www.fusioncharts.com/extensions/adobe-flex/)的专用产品。

[FusionCharts for Flex 文档](http://docs.fusioncharts.com/flex/charts/)让您知道如何[安装](http://docs.fusioncharts.com/flex/charts/Contents/installation_types_flashBuilder4.html).

# javascript - 按两次播放时动画行为怪异

> ID：10978640
> 
> 赞同：0
> 
> 时间：2012-06-11T10:45:50.923
> 
> 标签：javascript, raphael

我创建了一个前进和后退的简单矩形动画。问题是，如果我按两次启动按钮，它的行为会很奇怪。如果我按两次开始，我希望动画从第一个位置开始。

有小费吗 ？

```
 function moveRect1()
        {       
            // Reverse.uppfÖrande
            if( xEnd == 150 )
                xEnd = 50;
            else
                xEnd = 150;

            // x heter x på rektanglar. Vänstra övre hörnet.
            rect1.animate( {x: xEnd},                       // det/de attribut som ska animeras, och till vilket värde.
                            1000,                                   // tid
                            "Sine",                         // Ease funktion
function (){ moveRect1(); } // 
        ); // end animation

        } 
```

链接到动画

[http://www.pixeltouch.no/multimedia/labb3/svg.php](http://www.pixeltouch.no/multimedia/labb3/svg.php)

# asp.net - ItextSharp 401 错误（图像问题）

> ID：10978642
> 
> 赞同：0
> 
> 时间：2012-06-11T10:45:56.873
> 
> 标签：asp.net, asp.net-mvc-3, itextsharp, http-status-code-401

我在 MVC3 中使用 iTextSharp 时遇到了一些问题。

我正在创建一个带有一些图像的页眉/页脚，它在本地工作正常但是当我将它上传到我的服务器时它返回一个 401：

> 远程服务器返回错误：(401) Unauthorized。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Net.WebException：远程服务器返回错误：（401）未经授权。

我的页眉/页脚代码：

```
public override void OnEndPage(iTextSharp.text.pdf.PdfWriter writer, iTextSharp.text.Document document)
    {

        //Include the header image
        //System.Web.HttpContext.Current.Server.MapPath("/image.jpg");

        iTextSharp.text.Image HeadImg = iTextSharp.text.Image.GetInstance(HttpContext.Current.Server.MapPath("/image.jpg"));
        HeadImg.ScalePercent(50f);
        HeadImg.SetAbsolutePosition(document.PageSize.Width - 60f - 72f, document.PageSize.Height - 36f - 216.6f);

        //Include the footer image/text
        iTextSharp.text.Image FootImgMS = iTextSharp.text.Image.GetInstance(HttpContext.Current.Server.MapPath("/image.jpg"));
        FootImgMS.ScalePercent(50f);

        iTextSharp.text.Image FootLeftImg = iTextSharp.text.Image.GetInstance(HttpContext.Current.Server.MapPath("/image.jpg"));
        FootLeftImg.ScalePercent(50f);

        Phrase FootText = new Phrase("Phone: " + Tel, FontFactory.GetFont("verdana", 10));

        Paragraph LeftFoot = new Paragraph();
        LeftFoot.Add(new Chunk(FootLeftImg, 0, 0));
        LeftFoot.Add(new Chunk(Chunk.NEWLINE));
        LeftFoot.Add(new Phrase(FootText));

        //Create header table
        PdfPTable PDFTab = new PdfPTable(1);

        //Create footer table
        PdfPTable PDFFootTab = new PdfPTable(2);

        //Create header cell
        PdfPCell PDFCell1 = new PdfPCell(HeadImg);
        PDFCell1.Border = 0;

        //create footer cells
        PdfPCell PDFFootCell1 = new PdfPCell(LeftFoot);
        PDFFootCell1.PaddingTop = 35;
        PdfPCell PDFFootCell2 = new PdfPCell(FootImgMS);
        PDFFootCell1.Border = 0;
        PDFFootCell2.Border = 0;
        PDFFootCell1.HorizontalAlignment = Element.ALIGN_LEFT;
        PDFFootCell2.HorizontalAlignment = Element.ALIGN_RIGHT;

        //Add cells to tables
        PDFTab.AddCell(PDFCell1);
        PDFTab.TotalWidth = document.PageSize.Width;
        PDFFootTab.AddCell(PDFFootCell1);
        PDFFootTab.AddCell(PDFFootCell2);
        PDFFootTab.TotalWidth = document.PageSize.Width - 80;

        //Write out header table
        PDFTab.WriteSelectedRows(0, -1, 0, document.PageSize.Height, writer.DirectContent);

        //Write out footer table
        PDFFootTab.WriteSelectedRows(0, -1, 40, 60, writer.DirectContent);

        //set pdfContent value
        pdfContent = writer.DirectContent;

        pdfContent.MoveTo(30, document.PageSize.Height - 145);
        pdfContent.LineTo(document.PageSize.Width - 40, document.PageSize.Height - 145);

    } 
```

我几乎可以肯定它与图像有关，但我无法弄清楚它应该是什么。

任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:24:08.060

假设您的图像位于 Web 应用程序的根目录，请尝试在应用程序相对路径前设置一个波浪号：

```
iTextSharp.text.Image HeadImg = iTextSharp.text.Image.GetInstance(HttpContext.Current.Server.MapPath("/image.jpg")); 
```

变成

```
iTextSharp.text.Image HeadImg = iTextSharp.text.Image.GetInstance(HttpContext.Current.Server.MapPath("~/image.jpg")); 
```

# jquery - 在响应页面上重复加载 AJAX 内容

> ID：10978643
> 
> 赞同：0
> 
> 时间：2012-06-11T10:45:59.383
> 
> 标签：jquery, ajax, responsive-design

我有以下网站[http://rangeessentials.petersenuploads.co.uk/](http://rangeessentials.petersenuploads.co.uk/)

当屏幕宽度超过一定尺寸（480px）时，页面使用稍微修改的响应式框架通过 AJAX 加载辅助内容。但是，如果您将屏幕调整为较窄的宽度并刷新然后使其变宽，则会加载重复的内容。我正在检查是否加载了内容（查看 init.js），但它似乎被忽略了。我不知道发生了什么事。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:01:56.137

这是因为`$.ajax`是异步的。例如，根据服务器端函数的速度，在函数添加内容和类`loadLeftAux()`之前会触发多次。`success`在第一个 ajax 调用返回它的响应并添加内容之前，if 语句将不起作用。添加内容后，您已经开始了更多的 ajax 调用，这些调用将完成并添加更多内容。

您需要做的是，在发送新请求之前，您必须确定是否有 ajax 调用正在运行。

# android - 不希望提供发送 mms 的选项

> ID：10978644
> 
> 赞同：0
> 
> 时间：2012-06-11T10:46:06.173
> 
> 标签：android, android-intent, mms

我的应用程序中有一个要求，我必须在单击按钮时发送彩信。当我单击按钮时，它会提示选择使用哪个应用程序来完成电子邮件或消息传递操作。我希望它默认通过消息打开。我搜索了很多，但没有得到任何答案。下面，我发布我的代码：

```
public class MMSActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Button mms = (Button)findViewById(R.id.mms);
    mms.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            sendMMS();
        }
    });
}

public void sendMMS() {
    Intent in = new Intent(Intent.ACTION_SEND);
    in.putExtra("sms_body", "some text");
    in.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(new File(Environment.getExternalStorageDirectory()
            .getAbsolutePath().toString()+"/diplomat/ALEXANDRA-1339242345022.jpg")));
    in.setType("image/jpeg");
    startActivity(in);
    Log.d("MMS", "SendMMS called");
}
} 
```

我什至尝试将类设置为 android.telephony.SmsMessage 但它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:32:46.730

> 我希望它默认通过消息打开

首先，不清楚您认为“消息传递”是什么。我假设您指的是 Android 开源项目 (AOSP) MMS 客户端。

其次，许多设备没有这个应用程序。欢迎设备制造商使用他们希望使用的任何 MMS 客户端，可能是也可能不是 AOSP 客户端。

第三，欢迎用户安装和使用他们从 Play 商店或其他地方获得的自己的 SMS/MMS 客户端。通过说用户不应该在这件事上做出选择，你是在说你比你的用户更重要。您的用户往往会不同意。

请允许您的用户使用他们希望使用的任何 MMS 客户端，并且至少有一个实际存在的客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T05:12:22.343

如果您要发送图像。

```
Intent sendIntent = new Intent(Intent.ACTION_SEND); 
        sendIntent.setClassName("com.android.mms", "com.android.mms.ui.ComposeMessageActivity");
        sendIntent.putExtra("sms_body", "some text"); 
        sendIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("file:///sdcard/image_4.png"));
        sendIntent.setType("image/png");
        startActivity(sendIntent);; 
```

# asp.net - FileUpload.HasFile 始终保持错误（我使用的是 Ajax）

> ID：10978645
> 
> 赞同：1
> 
> 时间：2012-06-11T10:46:15.190
> 
> 标签：asp.net, html, vb.net, visual-studio-2010, ajaxcontroltoolkit

我正在使用 VB.Net 作为脚本语言在 APS.Net 中编写一个简单的页面。在这个页面中，我有两个文本框和相关按钮来完成从用户那里获取输入的工作。

该表单提示用户输入图像标题、要上传的图像（使用 ASP AjaxControlToolkit FileUpload 控件）和搜索标签列表，以便将来研究此图像。

我已经研究了三个多小时并尝试了许多在线发布的不同解决方案，但我仍然无法修复 FileUpload.HasFile = False 问题。即使在选择要上传的文件后，此条件也始终为假。

我知道已经发布了许多类似的问题，但我已经尝试了这些解决方案，但我仍然无法解决它。

如果有人能帮我解决这个问题，那就太好了。

我正在使用 MS SQL 数据库，但在此页面中我没有做任何与数据库相关的事情，因为我还没有完成验证和输入。

请从以下位置下载代码文件：

[http://www.mediafire.com/?ae1jq33zkj50tt7,olcmd5yct3tz52m,7lm3a9syplfdec6](http://www.mediafire.com/?ae1jq33zkj50tt7,olcmd5yct3tz52m,7lm3a9syplfdec6)

如果您需要其他任何东西，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T05:25:40.427

[你需要的就在这里！](http://www.c-sharpcorner.com/uploadfile/prathore/fileupload-control-in-update-panel-using-Asp-Net-ajax/)结帐这个，你可能会从这里得到一些帮助。

如果您喜欢，请将此标记为答案。:)

# java - 使用java将一个文件的内容引用到另一个文件中

> ID：10978646
> 
> 赞同：1
> 
> 时间：2012-06-11T10:46:19.090
> 
> 标签：java, file

在java中使用文件操作，我可以将一个文件的内容复制或附加到另一个文件中；但是，我的情况有点不同。我不想将文件的内容复制或附加到另一个文件中。我想将一个文件的内容引用到另一个文件中。

我需要一些在 Java 中对我[有用的东西。](http://en.wikipedia.org/wiki/Transclusion)我需要能够随时包含或排除文件的内容，而不是每次使用文件操作手动添加或删除内容。

顺便说一句，我的文件是纯txt文件。如何在 java 中执行此任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:49:39.823

我认为解决这种要求的最优雅的方法是看看像[Velocity](http://velocity.apache.org/)或[FreeMarker](http://freemarker.sourceforge.net/)这样的模板技术。两者都应该具有对文件包含的本机支持。

# cocoa-touch - 我想知道如何创建一个 popOver 菜单，当用户点击特定行时，它会作为另一个 popOver 菜单的子菜单滑入..？

> ID：10978647
> 
> 赞同：0
> 
> 时间：2012-06-11T10:46:21.243
> 
> 标签：cocoa-touch, ipad, uipopovercontroller

我想知道如何创建一个 popOver 菜单，当用户点击特定行时，它会作为另一个 popOver 菜单的子菜单滑入..？

popOver 包含称为成分的项目列表。当用户点击 popOver 上的特定项目时，另一个 popOver 应该从它与分类列表一起滑出。我知道如何创建弹出框，但我不知道如何创建这样的东西，因为我是 iPhone 和 iPad 的新手。谢谢

我创建并通过以下代码满足了我的要求。但我想创建像 www.opcenterllc.com -> testimonials 这样的弹出窗口

此代码可能看起来效率不高。但我尽可能地尝试了。

-(void)popOverMenu {

```
 ingrediant=[[NSArray alloc]initWithObjects:@"ingrediant1",@"ingrediant2",@"ingrediant3",@"ingrediant4",@"ingrediant5", nil];

    firstViewController=[[UIViewController alloc]init];
    firstViewController.contentSizeForViewInPopover=CGSizeMake(300, 400);
    navigationController=[[UINavigationController alloc]initWithRootViewController:firstViewController];
    popOverController=[[UIPopoverController alloc]initWithContentViewController:navigationController];

    tblView=[[UITableView alloc]initWithFrame:CGRectMake(20.0, 10.0, 260, 360) style:UITableViewStylePlain];
    tblView.dataSource=self;
    tblView.delegate=self;
    tblView.autoresizesSubviews=YES;

    UILabel *label1=[[UILabel alloc]initWithFrame:CGRectMake(3, 3, 120, 40)];
    label1.text=@"Ingredients";
    label1.textColor=[UIColor whiteColor];
    label1.backgroundColor=[UIColor clearColor];
    label1.textAlignment=UITextAlignmentCenter;

    UIBarButtonItem *rightbar=[[UIBarButtonItem alloc]initWithCustomView:label1];

    UIBarButtonItem *backBarButton=[[UIBarButtonItem alloc]initWithTitle:@"close" style:UIBarButtonItemStylePlain target:self action:@selector(close:)];

    firstViewController.navigationItem.leftBarButtonItem=rightbar;
    firstViewController.navigationItem.rightBarButtonItem=backBarButton;

    [firstViewController.view addSubview:tblView];

    [popOverController presentPopoverFromRect:Button.frame inView:scrollView permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

}

并且在

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath { UITableViewCell *tblView2=[tableView cellForRowAtIndexPath:indexPath];

```
 secondViewController.contentSizeForViewInPopover=CGSizeMake(300, 400);  
   [[secondViewController navigationItem]setTitle:@"Classified"];
    UIBarButtonItem *closeButton=[[UIBarButtonItem alloc]initWithTitle:@"close" style:UIBarButtonItemStyleBordered target:self action:nil];
    secondViewController.navigationItem.rightBarButtonItem=closeButton;

    [secondViewController.view addSubview:tblView2]; 
    [firstViewController.navigationController pushViewController:secondViewController animated:YES];
    [tblView2 reloadData]; 
```

}

ARC 在我的应用程序中启用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:34:50.537

听起来您想[`UINavigationController`](http://developer.apple.com/library/iOS/#documentation/UIKit/Reference/UINavigationController_Class/Reference/Reference.html)在弹出框内使用 a 。这将允许您“推送”新项目，从而导致您想要的标准从右到左滑入行为。

# python - Google App Engine：如何在不存在列的查询中获取数据

> ID：10978651
> 
> 赞同：0
> 
> 时间：2012-06-11T10:46:45.517
> 
> 标签：python, google-app-engine, transactions, google-cloud-datastore

假设我有以下查询

```
MyModel.all().filter('transfered !=', True).fetch(limit = limit) 
```

在数据存储中传输的列值不正确的情况下，它可以正常工作。但在我的收藏中，有些记录没有转移列。我怎样才能从我的收藏中搜索这些行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:00:46.037

恐怕这是不可能的。索引仅存储对给定属性有值的实体的引用。

我建议你做几件事。

1.  重新处理数据以向所有缺少该值的实体（可能是有效值之一）添加某种标记值。标记值可以是 None，这与没有值不同。

2.  在属性上设置一个默认值，例如 None，以便您可以查询没有显式值的项目，如果这在您的应用程序中有意义的话。这可以防止未来实体没有值集的可能性。

# ruby-on-rails-3 - Rails 3.2.2 查询子子属性通知

> ID：10978653
> 
> 赞同：0
> 
> 时间：2012-06-11T10:46:54.677
> 
> 标签：ruby-on-rails-3, activerecord

目前有一个非常低效的视图部分，它按预测分数列出用户组。

组控制器

```
def show

  @sfs_ordered = ScoreFootballSimple.order("home_score DESC, away_score ASC")
  @live_games = Game.find(:all, :conditions => ['kickoff <  ?  AND completed != true AND game_state is NOT NULL', Time.now]) 
```

group#show（相关部分）

```
<% @live_games.each do |game| %>
  <% @sfs_ordered.each do |sfs| %>
    <% got_this_score = Array.new %>
    <% game_points = nil %>
    <% @group.members.each do |member| %>
      <% if pred = member.prediction_set.predictions.where('game_id = ?',game.id).first %>
        <% game_points = pred.points if !pred.points.nil? && pred.score_type == sfs.score_type %>
        <% got_this_score << member.user.user_detail.display_name if pred.score_type == sfs.score_type %>
      <% end %>
    <% end %>
    <% if got_this_score.count > 0 %>
      <tr><td><%= sfs.home_score %>-<%=sfs.away_score%></td>
      <td><% if !game_points.nil? %>
            <div class="preds-show-points-div"><%= game_points %>pts</div>
          <% else %>
             -
          <% end%></td>
       <td><%= got_this_score.to_sentence %></td></tr>
     <% end%>
  <% end %>
<% end %> 
```

显然，这是循环中的循环，这意味着对于每个@sfs_ordered（大约 50 条记录），它正在迭代每个组成员（对于大约 5000 个最大的组），这意味着页面需要几秒钟才能加载。

不要激怒我，这是展示它的外观的 POC，但它暴露了我在 ActiveRecord 方面的能力不足。现在我可以创建用户、预测集等的哈希值，但我想知道是否有人可以指出我使用 Rails 查询更精确地选择信息的更好方法。

实体关系是这样的

*   **组**有很多**成员**
*   **成员**属于**User**和**PredictionSet**
*   **PredictionSet**有很多**Prediction**
*   **Prediction**属于**Game**和**ScoreType**
*   **ScoreTypeSimple**有一个**ScoreType**

预测分数在**ScoreTypeSimple**中- 这就是我希望列表组织的方式

例如 1:1 - Joe、Fred 和 Jane 1:0 - Sue、Dave 和 Helen

然后我想为**Group** .member.prediction_set.prediction 获取**Group** .member.user.name - 其中 prediction.game.id == game.id AND score_type == sfs.score_type

我知道我可以通过纯 SQL 连接和 IN 以及构建散列来改进这一点，但我想知道是否有人可以给我任何指示，如果有一种 Rails/Ruby 有效的方法来做到这一点。我知道答案可能在 lambda 中，但我的 ActiveRecord 知识在这里已经达到了极限！

感激地收到任何帮助。

彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:30:48.007

您可能会从预先加载中受益，因为您正在显示所有一些关联的对象。这是使用`.includes`关系上的方法完成的。例如，您的视图适用于组的所有成员，因此当您从数据库中获取组时（我没有在您的代码中看到执行此操作的行，但它可能看起来像

```
@group = Group.where('some condition').first 
```

如果你改用这个：

```
@group = Group.includes(:members => [:user]).where('some condition').first 
```

然后加载组、所有成员及其所有用户对象是 3 个数据库查询，而不是（在 5000 个成员的极端情况下）10,001 个。

我会说这充其量只是您解决方案的一小部分，但它可能会有所帮助。

编辑：[这是 RailsCast 急切加载，并且有一些文档大约在](http://railscasts.com/episodes/22-eager-loading)[这个页面](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)的一半。

# .net - Resharper 和 .less 文件 - “转到文件成员”导航是否适用于较少的文件？

> ID：10978659
> 
> 赞同：3
> 
> 时间：2012-06-11T10:47:13.423
> 
> 标签：.net, resharper, less

我无法让 ReSharper**转到文件成员**导航来处理 .less 文件。根本不显示任何成员。在 css 和所有其他文件上工作正常 - 只是不是 .less 文件。

任何人都可以确认它对他们有效。

干杯，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:52:24.410

值得一提的是，R# 7 仍然无法提供支持，但他们的[SDK 可以添加对其他语言](http://blogs.jetbrains.com/dotnet/2012/07/resharper-7-whats-inside/)的支持：

> **SDK 支持为新语言开发 ReSharper 支持。**这不是你的典型销售功能，甚至不是开箱即用的东西，但实际上你看看有多少人投票支持 ReSharper 中的 F#、CoffeeScript 或 LESS 支持，你会发现看到这个有可能使 ReSharper 成为 .NET 平台上的多语言开发的一个很好的工具基础。

[他们的问题跟踪器上](http://youtrack.jetbrains.com/issue/RSRP-215161)的功能请求目前有 251 票。

**如果这是您希望**在 R# 的未来版本中看到的内容，请权衡一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T11:13:23.037

看起来不是这样：http: [//blogs.jetbrains.com/dotnet/2011/06/preventing-items-from-being-analyzed-in-resharper/](http://blogs.jetbrains.com/dotnet/2011/06/preventing-items-from-being-analyzed-in-resharper/)

> 随着 ReSharper 6 的即将发布以及对 JavaScript 和 CSS 的支持，我们有一些人问我们如何防止 ReSharper 6 检测某些不受支持的文件中的问题，例如 .less。

# .net - 列表、数组还是其他什么？

> ID：10978662
> 
> 赞同：4
> 
> 时间：2012-06-11T10:47:25.487
> 
> 标签：.net, arrays, list, data-structures, f#

我需要一个能够改变元素值的动态长度数据结构。元素的顺序并不重要。

*   如果我使用数组，我可以修改我的元素，但是长度有问题。解决方案是创建一个大小正确的新数组，每次都将所有元素复制到新数组中。这不是一个好主意，因为元素的数量经常变化。

*   使用泛型列表比较好，但是修改过程真的很复杂：首先我需要删除我要更改的元素——泛型列表似乎没有简单的“删除”/“删除”方法，所以我尝试了“过滤器”，然后将修改后的元素添加到头部。它可以工作，但是对于如此简单的事情来说有点太复杂了。

是否有允许我动态更改长度和修改元素的数据结构，例如可修改列表或动态大小的数组？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T11:00:11.550

使用[ResizeArray](http://msdn.microsoft.com/en-us/library/ee353447.aspx)。[它是 CLI 类型List(T)](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)的缩写，它提供您需要的功能，例如[Remove](http://msdn.microsoft.com/en-us/library/cd666k3e.aspx)。

来自 MSDN 库：

> List(T) 类是 ArrayList 类的通用等价物。它使用一个数组来实现 IList(T) 泛型接口，该数组的大小根据需要动态增加。
> 
> Contains、IndexOf、LastIndexOf 和**Remove**等方法对列表元素使用相等比较器。类型 T 的默认相等比较器确定如下。如果类型 T 实现了 IEquatable(T) 泛型接口，则相等比较器是该接口的 Equals(T) 方法；否则，默认的相等比较器是 Object.Equals(Object)。
> 
> BinarySearch 和 Sort 等方法对列表元素使用排序比较器。类型 T 的默认比较器确定如下。如果类型 T 实现了 IComparable(T) 泛型接口，则默认比较器是该接口的 CompareTo(T) 方法；否则，如果类型 T 实现非泛型 IComparable 接口，则默认比较器是该接口的 CompareTo(Object) 方法。如果类型 T 没有实现任何接口，则没有默认比较器，并且必须显式提供比较器或比较委托。
> 
> **List(T) 不能保证被排序。**在执行需要对 List(T) 进行排序的操作（例如 BinarySearch）之前，您必须对 List(T) 进行排序。
> 
> 可以使用整数索引访问此集合中的元素。此集合中的索引是从零开始的。
> 
> List(T) 接受空引用（在 Visual Basic 中为 Nothing）作为引用类型的有效值并允许重复元素。

中的一个例子`F#`：

```
open System

// an integer list
let intList =
    let temp = new ResizeArray<int>() in
    temp.AddRange([| 1; 2; 3 |]);
    temp

// print each int using the ForEach member method
intList.ForEach( fun i -> Console.WriteLine(i) )

// unpack items from the resize array
let itemOne = intList.Item(0)
let itemTwo = intList.[1] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T11:01:05.583

我建议使用[ResizeArray](http://msdn.microsoft.com/en-us/library/ee353447.aspx)。它基本上是[System.Collections.Generic.List<'T>](http://msdn.microsoft.com/en-us/library/ee353447.aspx)如果元素的数量经常变化，它非常适合使用。

```
// Add items to a ResizeArray based on a condition
let filterRange predicate (i, j) =
    let results = ResizeArray(j-i+1) // reserve enough memory
    for k = i to j do
        if predicate k then results.Add(k)
    results 
```

`arr.[idx] <- e`关于您的第二个问题，您仍然可以使用与 with 一样的语法`Array`。

为避免复杂的操作，您可以在[F# PowerPack的](http://fsharppowerpack.codeplex.com/)[ResizeArray 模块](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/fsharp.powerpack/microsoft.fsharp.collections.resizearray.html)`ResizeArray`中使用高阶函数。这些函数会创建新的 s，因此性能并不理想。`ResizeArray`

```
// Use high-order functions to update items
let changeOneToThree (a: ResizeArray<_>) =
   ResizeArray.map (fun x -> if x = 1 then 3 else x) a 
```

但是，您始终可以从那里开始并通过改变 current 进行优化`ResizeArray`。

# java - 如何在 TextArea 中显示文本文件的内容

> ID：10978663
> 
> 赞同：0
> 
> 时间：2012-06-11T10:47:33.673
> 
> 标签：java, swing, jtextarea, jfilechooser

使用 JFileChooser 时如何在 TextArea 中显示文本文件的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:54:16.917

*   你必须阅读官方的 Oracle 的[JTextArea 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/textarea.html)

*   特别是方法[JTextArea.read(fileSelectedFromJFileChooser)](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#read%28java.io.Reader,%20java.lang.Object%29)，在这种情况下可能是正确的方法

*   请查看阅读、[编写和创建文件教程](http://docs.oracle.com/javase/tutorial/essential/io/file.html)

在这里找到一个示例程序，为您提供帮助，但如果要读取的文件很长，请始终使用[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)的帮助：

```
import java.io.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class ReadFileExample
{
    private BufferedReader input;
    private String line;
    private JFileChooser fc;

    public ReadFileExample()
    {
        line = new String();
        fc = new JFileChooser();        
    }

    private void displayGUI()
    {
        final JFrame frame = new JFrame("Read File Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        final JTextArea tarea = new JTextArea(10, 10);      

        JButton readButton = new JButton("OPEN FILE");
        readButton.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent ae)
            {
                int returnVal = fc.showOpenDialog(frame);

                if (returnVal == JFileChooser.APPROVE_OPTION) {
                    File file = fc.getSelectedFile();
                    //This is where a real application would open the file.
                    try
                    {
                        input = new BufferedReader(
                                new InputStreamReader(
                                new FileInputStream(
                                file)));
                        tarea.read(input, "READING FILE :-)");      
                    }
                    catch(Exception e)
                    {       
                        e.printStackTrace();
                    }
                } else {
                    System.out.println("Operation is CANCELLED :(");
                }
            }
        });

        frame.getContentPane().add(tarea, BorderLayout.CENTER);
        frame.getContentPane().add(readButton, BorderLayout.PAGE_END);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new ReadFileExample().displayGUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T21:05:53.540

您的问题不清楚，但我假设您想将 JTextArea 添加到 JFileChooser 以便它可以像文件预览面板一样工作。

您可以使用[setAccessory()](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFileChooser.html#setAccessory%28javax.swing.JComponent%29)方法将 JTextArea 添加到 JFileChooser。

[JFileChooser 上的](http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html)本教程展示了如何在附件显示文件中的图像而不是文件中的文本时执行类似的操作。

您需要小心处理不包含文本的文件，或者太大的文件，或者由于权限而无法打开的文件等。要正确处理需要付出很多努力。

# javascript - 如何在更新面板中检查和停止 Updateprogress 的多个回发

> ID：10978665
> 
> 赞同：0
> 
> 时间：2012-06-11T10:47:37.370
> 
> 标签：javascript, asp.net, updatepanel, updateprogress

我正在为我的网页中的更新面板使用更新进度控件。我为 updateprogress 指定了一个条件，即只有当它获得相应的回发元素时才应该加载。只有当只有一个回发元素时它才能正常工作。如何检查页面中的其他回发元素并启用 updateprogress 控件。我的代码为

```
<style type="text/css">
        .Background
        {
            position: fixed; left: 0; top: 0; z-index: 10; width: 100%;height: 100%;
            filter: alpha(opacity=40);
        }
    </style>
    <script type="text/JavaScript" language="JavaScript">    
        function pageLoad() {    
            var manager = Sys.WebForms.PageRequestManager.getInstance();    
            manager.add_endRequest(endRequest);    
            manager.add_beginRequest(OnBeginRequest);    
        }    
        function OnBeginRequest(sender, args) {    
            var postBackElement = args.get_postBackElement();    
            if (postBackElement.id == 'Button1') {    
                $get('UpdateProgress1').style.display = "block";    
            }
                $get('ParentDiv').className = 'Background';    
        }    
        function endRequest(sender, args) {    
            $get('ParentDiv').className = '';    
        }  </script> 
```

我的 aspx 代码为

```
 <asp:ScriptManager ID="ScriptManager1" runat="server" />
         <asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click" />
        <div id="ParentDiv">
            <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
            <ContentTemplate>
                <td height="403">
                    <iframe id="IFOEvent" name="InIframe" scrolling="auto" runat="server"
                        width="75%" height="203" class=""></iframe>
                </td>
            </ContentTemplate>
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="Button1" />
            </Triggers>
        </asp:UpdatePanel>
        </div>
    <asp:UpdateProgress ID="UpdateProgress1" runat="server" AssociatedUpdatePanelID="UpdatePanel1">
        <ProgressTemplate>
            <div id="IMGDIV" align="center">
                <img src="Images/loading.gif" alt="" /><br />          
                </div>
            </ProgressTemplate>
        </asp:UpdateProgress> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:12:30.667

你有不止一种方法可以做到这一点。为什么不这样做，

*   将一组 id 推送到数组

*   在回发期间检查元素是否在数组中

*   作为常规异步回发处理

    ### 代码

`function pageLoad() { var manager = Sys.WebForms.PageRequestManager.getInstance(); manager.add_endRequest(endRequest); manager.add_beginRequest(OnBeginRequest); }`

`function OnBeginRequest(sender, args) { var map = ["Button1", "Button2", "Button3"]; var postBackElement = args.get_postBackElement(); if (map.indexOf(postBackElement.id) !== -1) { $get('UpdateProgress1').style.display = "block"; } $get('ParentDiv').className = 'Background'; }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:05:39.920

设置一个变量并改变它的值 end Request 方法例如

```
var temp = 0; 
```

函数 endRequest(sender, args) {
if(temp == 0) {
$get('ParentDiv').className = '';
温度++；} 其他 { 温度 = 0; } }

您还可以使用隐藏文件来设置值。

# crash - XCode 4.3.2 iOS 5.1.1 应用程序在启动时崩溃

> ID：10978666
> 
> 赞同：0
> 
> 时间：2012-06-11T10:47:41.073
> 
> 标签：crash, code-signing, jailbreak

我已经在`SDKSettings.plist`. 做了不要代码签名的事情，我可以构建项目。它完美地安装在我的越狱设备上（没有错误）；但是当我想运行它时，它会立即跳出应用程序！（运行时崩溃）我在另一台运行 iOS 5.0 的 iPod Touch 上安装了具有相同文件的相同应用程序，它运行良好。所以问题似乎出在 5.1.1 版本上。（iGuess）我不知道如何使这项工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T13:01:47.580

答案是使用[JailCoder](http://www.jailcoder.com)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T03:40:48.357

我一直在这个问题上上下下，我想我有你的解决方案。是的，如果你想从 Xcode 4.3 部署和调试，你必须有最低级别的假代码签名。在 Xcode 中重新打开代码签名并按照[此处](http://androidnirvana.comule.com/wordpress/2012/05/building-apps-for-ios-5-1-with-xcode-4-3-2-without-code-signing-and-developer-provisioning-profile/)的基本说明进行操作。不要担心 -gta 代码签名标志并将以下内容用于您的 ldid3.py 脚本（另一个根本不起作用）：

```
!/usr/bin/python
from sys import argv
from subprocess import call, check_call
from os.path import basename, splitext, join
from tempfile import NamedTemporaryFile

app = argv[-1]
obj_path = join(app, splitext(basename(app))[0])
with NamedTemporaryFile() as f:
    f.write("""
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
  <dict>
    <key>get-task-allow</key>
    <true/>
  </dict>
</plist>\n""")
    f.flush()
    check_call(['/usr/local/bin/ldid', '-S' + f.name, obj_path]) 
```

我不必执行 tdmtanf 步骤，但这可能是因为我安装了 appsync。

# asp.net - ASP.NET - Server.HtmlEncode 将哪些字符编码为命名字符实体

> ID：10978673
> 
> 赞同：4
> 
> 时间：2012-06-11T10:48:03.963
> 
> 标签：asp.net, html, character-encoding, webforms, w3c

Server.HtmlEncode 将哪些字符编码为命名字符实体？

到目前为止，我只发现`&lt; &gt; &amp; and &quot;`肯定不止这些？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T11:35:34.653

这是 的代码`HtmlEncode`，所以在这里你可以看到他们是如何做到的。

```
public static unsafe void HtmlEncode(string value, TextWriter output)
{
    if (value != null)
    {
        if (output == null)
        {
            throw new ArgumentNullException("output");
        }
        int num = IndexOfHtmlEncodingChars(value, 0);
        if (num == -1)
        {
            output.Write(value);
        }
        else
        {
            int num2 = value.Length - num;
            fixed (char* str = ((char*) value))
            {
                char* chPtr = str;
                char* chPtr2 = chPtr;
                while (num-- > 0)
                {
                    chPtr2++;
                    output.Write(chPtr2[0]);
                }
                while (num2-- > 0)
                {
                    chPtr2++;
                    char ch = chPtr2[0];
                    if (ch <= '>')
                    {
                        switch (ch)
                        {
                            case '&':
                            {
                                output.Write("&amp;");
                                continue;
                            }
                            case '\'':
                            {
                                output.Write("&#39;");
                                continue;
                            }
                            case '"':
                            {
                                output.Write("&quot;");
                                continue;
                            }
                            case '<':
                            {
                                output.Write("&lt;");
                                continue;
                            }
                            case '>':
                            {
                                output.Write("&gt;");
                                continue;
                            }
                        }
                        output.Write(ch);
                        continue;
                    }
                    if ((ch >= '\x00a0') && (ch < 'Ā'))
                    {
                        output.Write("&#");
                        output.Write(ch.ToString(NumberFormatInfo.InvariantInfo));
                        output.Write(';');
                    }
                    else
                    {
                        output.Write(ch);
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-09T20:34:47.120

.NET 4 和 4.5 也对单引号进行编码，这似乎不在答案中

# php - PHP cURL is it possible to pass a multi-associative array?

> ID：10978676
> 
> 赞同：1
> 
> 时间：2012-06-11T10:48:15.877
> 
> 标签：php, post, curl

Is it possible to send a multi-associative array to a page using cURL in php?

I am able to pass an array, but the following happens:

```
 // Open Connection
    $ch = curl_init();

    // Set the URL
    curl_setopt($ch, CURLOPT_URL, $this->config['submission']['eyerys']);

    // Set the number of fields being sent:
    curl_setopt($ch,CURLOPT_POST,count($this->call['info']));

    // The string to send:
    curl_setopt($ch,CURLOPT_POSTFIELDS,$string);

    // Return transfer:
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

    // SSL verification:
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);

    // Execute the post:
    $result = curl_exec($ch);

    $this->pre($result);

    // Close connection:
    $curl_close($ch); 
```

I get the following output:

```
 Array
 (
        [info] => Array
        [answers] => Array
        [errors] => Array
 ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:51:02.193

Nope, since curl cannot know how you want to encode it. Not every server-side language/framework uses the same way. I think PHP is the only language where the user can create an array by simply sending data with keys containing `[]`. For example. in the python world one would just send the same value twice and then use a different function (such as `.getlist('key')` - depends on the framework though) to access the array instead of just a single value.

If you have control over the remote script, consider using something standardized such as JSON. Instead of sending a formencoded POST string either send a pure JSON body or a single formencoded POST value containing the JSON.

If you don't, you'll most likely have to encode the POST data on your own.

# vba - 将字典作为参数传递

> ID：10978681
> 
> 赞同：2
> 
> 时间：2012-06-11T10:48:29.150
> 
> 标签：vba, dictionary

我想将字典作为参数传递。我的代码可能看起来有点奇怪，但我还是会展示它：

```
Sub get_Insurers_Dictionary()

Dim cInsurers               As c_Insurers
Dim myDictionary            As Scripting.Dictionary

Set cInsurers = New c_Insurers

Set myDictionary = New Scripting.Dictionary
Set myDictionary = cInsurers.Get_Parameters_Dictionary(cInsurers, myDictionary)

End Sub 
```

然后在 c_Insurers 类中：

```
Public Function Get_Parameters_Dictionary(cInsurers As c_Insurers, myDictionary As Dictionary) As Dictionary

Dim oSheet                      As Excel.Worksheet
Dim cParameters                 As c_Parameters

Set oSheet = ThisWorkbook.Sheets("Parameters_Insurers")
oSheet.Activate

Set cParameters = New c_Parameters
Set cParameters = cParameters.Get_Parameters(cParameters, oSheet)

Me.fPartner_ID_Col = cParameters.get_Header_Cols(oSheet, cParameters.fMax_Col, "INSURER_ID")
Me.fPartner_Name_Col = cParameters.get_Header_Cols(oSheet, cParameters.fMax_Col, "INSURER_NAME")
Me.fCountry_Col = cParameters.get_Header_Cols(oSheet, cParameters.fMax_Col, "COUNTRY")

For lcnt = 1 To UBound(cParameters.fArray)
    myDictionary.Add cParameters.fArray(lcnt, Me.fPartner_ID_Col), Me.Get_Parameters_Class(cInsurers, cParameters, lcnt)
Next lcnt

Set Get_Parameters_Insurers = myDictionary
Set cParameters = Nothing

End Function 
```

除了看似复杂的代码，我的问题很简单：甚至可以添加一个类对象作为项目吗？（我还不习惯使用字典）。我的字典在 c_insurers 类中填写，但是当我回到 get_Insurers_Dictionary 时为什么它是空的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:13:45.210

您可以将您喜欢的任何内容添加到字典中，它的行为与您预期的不同，因为您将字典传递给`Get_Parameters_Dictionary`但在填充后您永远不会返回它，而是将其分配给其他东西；`Set Get_Parameters_Insurers = myDictionary`.

这意味着`Set myDictionary = cInsurers.Get_Parameters_Dictionary(cInsurers, myDictionary)`重置`myDictionary`为 `Nothing`（因为未分配的返回类型）。

您需要进入`Set Get_Parameters_Dictionary = myDictionary`或`Get_Parameters_Dictionary()`……不打扰；字典是引用类型，所以之后：

```
Set myDictionary = New Scripting.Dictionary
cInsurers.Get_Parameters_Dictionary cInsurers, myDictionary 
```

`myDictionary`将反映在 中所做的更改`Get_Parameters_Dictionary`。

# php - PHP多文件上传

> ID：10978683
> 
> 赞同：-2
> 
> 时间：2012-06-11T10:48:37.323
> 
> 标签：php, file, upload

是的，我知道有数百个类似的问题，但我没有找到有效的答案......问题是：我要上传多个文件......正确的方法应该是这样的：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>

<body>
<form enctype="multipart/form-data" method="post" action="?u=1">
 <input  type="file" name="myFile[]" />
 <input  type="file" name="myFile[]" />
 <input  type="file" name="myFile[]" />
<input type="submit" value="Upload!" name="submit"/>
</form>
<?
if ($_GET['u']){
foreach ($_FILES["myFile"]["error"] as $key => $error) {
 if ($error == UPLOAD_ERR_OK) {
   $tmp_name = $_FILES["myFile"]["tmp_name"][$key];
   $name = $_FILES["myFile"]["name"][$key];
   // here we move it to a directory called data
   // you can move it wherever you want
   move_uploaded_file($tmp_name, "/data/$name");
 } else {
   // an error occurred, handle it here
 }
}
}

if (!$_FILES){
    echo 'WTF?? No files sent?? There\'s a problem! Let\' hope that stack overflow will solve it!';
}
?>

</body>
</html> 
```

输出是：

```
Notice: Undefined index: myFile in C:\xampp\htdocs\php\prova.php on line 18

Warning: Invalid argument supplied for foreach() in C:\xampp\htdocs\php\prova.php on line 18 
```

没有文件发送？？有问题！如何访问从数组输入标签上传的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T17:14:39.163

我认为使用`$_POST`OR`$_FILES`而不是`$_GET['u']`从提交中进行验证，可以解决问题......

您也可以使用`<input type="file" name="myFile[]" multiple />`一次而不是`<input type="file">`多次选择多个文件。

**注意：**检查 php.ini 的以下设置：（根据需要编辑，保存并重新启动服务器）

1.  文件上传 = 开
2.  upload_max_filesize = 2M（默认情况下它的 2 MB 文件限制！！！如果文件大小 > 2MB，则会发生与您的完全相同的错误）
3.  post_max_size = 8M（默认情况下 post 变量限制为 8 MB。根据您的要求更改...）
4.  upload_tmp_dir = "c:/tmp" (提供对临时 opload 目录的读/写权限)

通过上述更改和设置，这在我的 wamp 服务器中可以正常工作......祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-09T13:13:46.743

好吧，上传文件的最简单方法是假装只有一个文件，然后对所有其他文件重复此过程，您所要做的就是为您的输入命名。我建议使用多文件输入：

```
<input type="file" name="file[]" id="file" multiple> 
```

然后，您可以使用简单的 for 处理上传：

```
if(isset($_FILES['file']['tmp_name']))
            {
//set upload directory
                $target_dir = "uploads/";
                $num_files = count($_FILES['file']['tmp_name']);
                for($i=0; $i < $num_files;$i++)
                {
                    if(!is_uploaded_file($_FILES['file']['tmp_name'][$i]))
                    {
                        $messages[] = 'No file uploaded';
                    }
                    else
                    {
                        if(@copy($_FILES['file']['tmp_name'][$i],$target_dir.'/'.$form['name']->getData()."/".$_FILES['file']['name'][$i]))
                        {
                            $messages[] = $_FILES['file']['name'][$i].' uploaded';
                        }
                        else
                        {
                            $messages[] = 'Uploading '.$_FILES['file']['name'][$i].' Failed';
                        }
                    }
                }
            } 
```

您可以使用 copy 或 move_uploaded_file 将文件移动到您的目录。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-11T11:49:43.693

我检查了您的代码，发现将行：更改
`move_uploaded_file($tmp_name, "/data/$name");`为
`move_uploaded_file($tmp_name, "data/$name");`
[将绝对路径更改为相对路径] 可以解决问题。现在它工作正常，在我的本地服务器上。那应该为你解决它。

**礼貌**：[http ://forums.whirlpool.net.au/archive/788971](http://forums.whirlpool.net.au/archive/788971)

# c# - 如何将 T-SQL SELECT 转换为 C# 变量

> ID：10978685
> 
> 赞同：0
> 
> 时间：2012-06-11T10:48:48.963
> 
> 标签：c#, asp.net, sql-server-2008

我正在使用 SQL Server 2008 R2 和 C# ASP.NET 4

我有一个名为 myTable 的简化表，包括以下列：Col1、Col2、Col3、Col4

```
CREATE TABLE [dbo].[myTable](
    [Col1] [int] NULL,
    [Col2] [int] NULL,
    [Col3] [nvarchar](50) NULL,
    [Col4] [int] NULL
) ON [PRIMARY]
GO
INSERT [dbo].[myTable] ([Col1], [Col2], [Col3], [Col4]) VALUES (0, 0, N'@', 0)
INSERT [dbo].[myTable] ([Col1], [Col2], [Col3], [Col4]) VALUES (1, 2, N'c', 4)
INSERT [dbo].[myTable] ([Col1], [Col2], [Col3], [Col4]) VALUES (11, 22, N'cc', 44) 
```

（原表要宽得多）

如何将`SELECT`两列（或 20 或 200）列转换为 C# 变量或变量数组/列表，或任何其他将有效或优于类似的东西：

```
object obj = new object();
string sql = "SELECT Col2, Col3 FROM myTable WHERE Col1=0";
using (SqlConnection conn = new SqlConnection(mySqlCalss.DatabaseConnectionString() ))
            {
                SqlCommand cmd = new SqlCommand(sql, conn);
                cmd.Connection.Open();
                obj = cmd.ExecuteNonQuery();
            } 
```

在某种程度上我可以使用类似的东西：

```
int myVar1 = (int)ojb[0];
string myVar2 = (string)obj[1]; 
```

然后：

```
lblMyASPlable1.Text = myVar1.ToString();
lblMyASPlable2.Text = myVar2; 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T10:50:48.787

您正在使用“ExecuteNonQuery”，它执行它在锡上所说的并且不像查询（即选择）那样执行。试试 ExecuteReader。

```
SqlDataReader reader = cmd.ExecuteReader();
while (reader.Read())
{
    Console.WriteLine(String.Format("{0}", reader[0]));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T10:52:52.407

使用阅读`DataReader` [查看 Datareader 的实际应用](http://msdn.microsoft.com/en-us/library/haa3afyz%28v=vs.71%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T10:53:31.427

您可能想研究像[dapper这样的 MicroORM](https://code.google.com/p/dapper-dot-net/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T10:51:38.803

你需要`SQLDataAdapter`

```
DataTable table = new DataTable();
string sql = "SELECT Col2, Col3 FROM myTable WHERE Col1=0";
using (SqlConnection conn = new SqlConnection(mySqlCalss.DatabaseConnectionString() ))
{
   SqlCommand cmd = new SqlCommand(sql, conn);
   cmd.Connection.Open();
   SqlDataAdapter adapter = new SqlDataAdapter(cmd);
   adapter.Fill(table);                
} 
```

和

```
int myVar1;
string myVar2;
if(table.Rows.Count>0)
{
  myVar1 = (int)table.Rows[0]["Col2"];
  myVar2 = (string)table.Rows[0]["Col3"];
} 
```

# android - 是否可以与 Android 上的 Secure Element Applet 通信？

> ID：10978687
> 
> 赞同：2
> 
> 时间：2012-06-11T10:48:57.170
> 
> 标签：android, nfc

据我了解，谷歌将任何涉及安全元素的开发限制在“受信任的”开发人员身上。但是，我想知道的是是否可以在没有任何特殊权限的情况下与已安装的小程序进行通信（也许 root 是可以接受的）。

例如，假设那里有一个万事达卡小程序，是否可以向它发送各种 APDU 命令？我不想访问或更改 UICC 上的任何数据，我只是想“使用”存储在其上的应用程序。另一个必须这样做的应用程序的一个示例是 Google Wallet，因为它与安全元件上的其他“小程序”通信。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T03:13:20.770

有点。在 4.0.4 中有允许与安全元件通信的包和密钥的白名单。如果您将您的应用程序/证书添加到列表中，您应该能够连接。但是，第三方应用程序很可能需要身份验证，如果您没有正确的安全通道密钥，您将无法连接到小程序。你想做什么？

参考类似问题并提供更多详细信息：[ICS 4.0.4 上的安全元素访问控制](https://stackoverflow.com/questions/10494726/secure-element-access-control-on-ics-4-0-4/)

# database - 需要支持设计数据库

> ID：10978688
> 
> 赞同：0
> 
> 时间：2012-06-11T10:49:01.477
> 
> 标签：database, database-design

案例：网上建立小团体、俱乐部系统。每个俱乐部只有一个名字和一些成员。

有几种类型的会员资格。可以简单地以普通会员的身份加入，也可以是总裁、秘书或任何其他类型的会员。

一个人可以是许多不同俱乐部的成员，并且每个俱乐部都有不同的会员类型。

我需要设计一个简单的数据库来保存与俱乐部、用户和所持有的会员资格相关的信息。

为了有一个规范化的数据库，我有三个表——俱乐部、会员和会员。俱乐部 - id，姓名会员 - id，姓名（普通，总裁，秘书等）会员 - id，姓名，联系信息，会员ID

我不确定如何在这些表之间建立关系！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:54:31.180

只需添加一个类似于

```
users_clubs:

uc_id | club_id | user_id | membership_id 
```

# android - 对话框中的样式titleDivider

> ID：10978692
> 
> 赞同：18
> 
> 时间：2012-06-11T10:49:10.620
> 
> 标签：android, dialog, divider

我想知道如何在对话框中摆脱（或更改颜色）titleDivider。它是蜂窝+设备上显示的对话框标题下方的蓝线。

![烦人的标题分隔线](../Images/fe36e2b949df44b4c651b663c3fa4c1a.png)

我想这是来自 SDK 的相关布局，但由于没有样式属性，我不知道如何设置它的样式。如果我尝试使用 findViewById 则没有 android.R.id.titleDivider

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:fitsSystemWindows="true">
    <TextView android:id="@android:id/title" style="?android:attr/windowTitleStyle"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:minHeight="@android:dimen/alert_dialog_title_height"
        android:paddingLeft="16dip"
        android:paddingRight="16dip"
        android:gravity="center_vertical|left" />
    <View android:id="@+id/titleDivider"
            android:layout_width="match_parent"
            android:layout_height="2dip"
            android:background="@android:color/holo_blue_light" />
    <FrameLayout
        android:layout_width="match_parent" android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="vertical"
        android:foreground="?android:attr/windowContentOverlay">
        <FrameLayout android:id="@android:id/content"
            android:layout_width="match_parent"
            android:layout_height="match_parent" />
    </FrameLayout>
</LinearLayout> 
```

我试图覆盖在我的 theme.xml 中仅引用 dialog_title_holo.xml 的 dialogTitleDecorLayout，但没有成功。错误是：

> 错误：错误：找不到与给定名称匹配的资源：attr 'dialogTitleDecorLayout'。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-12-31T09:26:51.207

要获得对`titleDivider`of的引用`AlertDialog`以更改其颜色：

```
int divierId = dialog.getContext().getResources()
                .getIdentifier("android:id/titleDivider", null, null);
View divider = dialog.findViewById(divierId);
divider.setBackgroundColor(getResources().getColor(R.color.creamcolor)); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-04-12T00:44:25.887

You need to implement

```
myDialog = builder.create();
myDialog.setOnShowListener(new OnShowListenerMultiple());

//----------------------------
//Function to change the color of title and divider of AlertDialog
public static class OnShowListenerMultiple implements DialogInterface.OnShowListener {
    @Override
    public void onShow( DialogInterface dialog ) {
        if( !(dialog instanceof Dialog) )
            return;

        Dialog d = ((Dialog) dialog);
        final Resources resources = d.getContext().getResources();
        final int color = AppUtility.getColor( resources, R.color.defaultColor );

        try {
            int titleId = resources.getIdentifier( "android:id/alertTitle", null, null );
            TextView titleView = d.findViewById( titleId );
            titleView.setTextColor( color );
        }
        catch( Exception e ) {
            Log.e( "XXXXXX", "alertTitle could not change color" );
        }

        try {
            int divierId = resources.getIdentifier( "android:id/titleDivider", null, null );
            View divider = d.findViewById( divierId );
            divider.setBackgroundColor( color );
        }
        catch( Exception e ) {
            Log.e( "XXXXXX", "titleDivider could not change color" );
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-11T11:29:13.157

我通过使用 DialogFragment.STYLE_NO_TITLE 主题解决了这个问题，然后在对话框布局中伪造标题栏。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-01-20T18:51:15.417

这是我解决这个问题的方法（感谢[http://joerg-richter.fuyosoft.com/?p=181](http://joerg-richter.fuyosoft.com/?p=181)）：

**MyDialogBu​​ilder.class**

```
public class MyDialogBuilder extends android.app.AlertDialog.Builder {

public MyDialogBuilder(Context context) {
    super(context);
}

@NonNull
@Override
public android.app.AlertDialog create() {
    final android.app.AlertDialog alertDialog = super.create();

    alertDialog.setOnShowListener(new DialogInterface.OnShowListener() {
        @Override
        public void onShow(DialogInterface dialog) {
            int titleDividerId = getContext().getResources()
                    .getIdentifier("titleDivider", "id", "android");

            View titleDivider = alertDialog.findViewById(titleDividerId);
            if (titleDivider != null) {
                titleDivider.setBackgroundColor(getContext().getResources()
                        .getColor(R.color.alert_dialog_divider));
            }
        }
    });

    return alertDialog;
}
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-11T10:55:59.433

利用

```
 <View android:id="@+id/titleDivider"
        android:layout_width="match_parent"
        android:layout_height="2dip"
        android:background=#CC3232 /> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-01-25T05:57:56.177

在写之前`dialog.show()`，写：

```
int divierId = dialog.getContext().getResources().getIdentifier("android:id/titleDivider",   null, null);
View divider = dialog.findViewById(divierId);
if(divider!=null){
divider.setBackgroundColor(getResources().getColor(R.color.transparent));} 
```

在**colors.xml 中**：

```
<color name="transparent">#00000000</color> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-12-31T08:08:09.390

如果您不想使用默认样式，请不要使用 AlertDialog。您可以使用带有对话框主题的活动（使用您的自定义布局）。

```
<activity android:theme="@android:style/Theme.Dialog"> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-12-17T15:58:07.470

你的想法是正确的。但是，您要查找的**dialogTitleDecorLayout**是私有资源，因此您无法以正常方式访问它。但是您仍然可以使用 * 语法访问它：

```
<item name="*android:dialogTitleDecorLayout">@layout/dialog_title</item> 
```

将此添加到我自己的样式中，只需将 dialog_title.xml 复制到我的应用程序并稍作更改即可解决我的问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-12-31T08:14:57.717

你可以像这样制作一个自定义对话框：

```
 Dialog dialog = new Dialog(this);
    dialog.setContentView(R.layout.custom_dialog);
    Button okay = (Button) dialog.findViewById(R.id.button1);
    okay.setOnClickListener(new OnClickListener() {

         public void onClick(View arg0) {

           // do your work
         }
    }); 
```

在布局中设置自定义标题不要使用android

```
 dialog.setTitle(); 
```

和你的 custom_dialog.xml

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:android1="http://schemas.android.com/apk/res/android"
   android:id="@+id/layout_root"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="vertical"
   android:padding="10dp">

  <TextView
      android:id="@+id/textView1"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:textColor="#ffffff"
      android:textSize="40sp" 
      android:text="Hello"/>

    <Button
        android:id="@+id/button1"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="150dp"
        android:text="OK" />

    </RelativeLayout> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-12-31T08:16:34.073

如果我猜对了，“删除蓝线”意味着删除对话框标题和正文之间的边框。该边框来自 Holo 主题，因此在不使用自定义布局的情况下无法删除它。

使用以下内容创建一个名为 custom-dialog.xml 的文件（这只是一个示例..根据需要修改它）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/general_dialog_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/dialogTopImage"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="0.12"
        android:padding="10dp" />

    <LinearLayout
        android:id="@+id/dialogLine"
        android:layout_width="fill_parent"
        android:layout_height="3dp"
        android:background="@drawable/green_btn"
        android:orientation="vertical" />

    <TextView
        android:id="@+id/dialogText"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="0.32"
        android:padding="5dp"
        android:text=""
         />

    <LinearLayout
        android:id="@+id/general_dialog_layout"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_gravity="center"
        android:layout_marginBottom="5dp"
        android:layout_weight="0.11"
        android:gravity="center"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/dialogButton"
            android:layout_width="100dp"
            android:textSize="8pt"
            android:layout_height="wrap_content"
            android:layout_marginRight="10dp"
            android:background="@drawable/green_btn"
            android:gravity="center"
            android:text="Ok" />

</LinearLayout> 
```

如您所见，我使用的资源和东西不在您的项目中，但您可以安全地删除它们。在我的情况下，结果或多或少是以下一个，顶部有一个图像，我将以编程方式在代码中设置。

![简单截图](../Images/0876ccb078d64c751d7ee34bd334a53d.png)

要创建对话框，请使用以下内容：

```
private Dialog createAndShowCustomDialog(String message, Boolean positive, Drawable d, View.OnClickListener cl, String text1) {

    final Dialog dialog = new Dialog(this);
    dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    dialog.setContentView(R.layout.general_dialog_layout);
    // BIND
    ImageView image = (ImageView) dialog.findViewById(R.id.dialogTopImage);
    TextView text = (TextView) dialog.findViewById(R.id.dialogText);
    Button button = (Button) dialog.findViewById(R.id.dialogButton);
    LinearLayout line = (LinearLayout) dialog.findViewById(R.id.dialogLine);

    // SET WIDTH AND HEIGHT
    DisplayMetrics displaymetrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
    int width = (int) (displaymetrics.widthPixels * 0.85);
    int height = (int) (displaymetrics.heightPixels * 0.60);
    WindowManager.LayoutParams params = getWindow().getAttributes();
    params.width = width;
    dialog.getWindow().setLayout(width, height);

    // SET TEXTS
    text.setText(message);
    button.setText(text1);

    // SET IMAGE
    if (d == null) {
        image.setImageDrawable(getResources().getDrawable(R.drawable.font_error_red));
    } else {
        image.setImageDrawable(d);
    }

    // SET ACTION
    if (cl == null) {
        button.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                dialog.dismiss();
            }
        });
    } else {
        button.setOnClickListener(cl);
    }

    // SHOW
    dialog.show();
    return dialog;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-12-31T08:09:58.947

你看[这个](http://developer.android.com/reference/android/app/AlertDialog.html#setCustomTitle%28android.view.View%29)吗，有一个 pcecial 图书馆，你可以在[那里](https://github.com/inmite/android-styled-dialogs)看。最后一个[链接](https://stackoverflow.com/a/15285514/1703318)会解决你的问题

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-12-31T08:12:28.927

这些是无法通过控制兄弟来隐藏的。我遇到了同样的问题。您唯一能做的就是创建自己的 CustomDialog

[这是一个示例应用程序](http://www.mkyong.com/wp-content/uploads/2012/03/Android-Custom-Dialog-Example.zip)

下载看看设计模式，就很简单了

这是一个关于制作自定义对话框[的教程](http://www.mkyong.com/android/android-custom-dialog-example/)

重要的部分是创建 DialogObject 后不要通过 setTitle() 设置标题在 CustomLayout 中创建 TextView 并从 findViewByID() 调用它并设置标题

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-07-04T14:48:59.470

这个在一些 4.x 设备上进行了测试：

```
 TextView title = (TextView)getWindow().getDecorView().findViewById(android.R.id.title);
    ((ViewGroup)title.getParent()).getChildAt(1).setVisibility(View.GONE); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-01-25T06:02:04.993

在colors.xml中：

```
<color name="transparent">#00000000</color> 
```

在对话框中：

int divierId = dialog.getContext().getResources().getIdentifier("android:id/titleDivider",null, null);

查看分隔符 = d.findViewById(divierId); divider.setBackgroundColor(getResources().getColor(R.color.transparent));

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-10-11T18:34:32.380

为了完全隐藏默认的蓝线（假设你在`DialogFragment`）：

```
 Dialog dialog = getDialog();
    if (dialog != null) {
        final int dividerId = dialog.getContext().getResources()
                .getIdentifier("android:id/titleDivider", null, null);
        View divider = dialog.findViewById(dividerId);
        if  (divider != null) {
            divider.setBackground(null);
        }
    } 
```

# python - Django Haystack - 无需搜索查询即可显示结果？

> ID：10978695
> 
> 赞同：10
> 
> 时间：2012-06-11T10:49:35.373
> 
> 标签：python, django, search, solr, django-haystack

即使尚未插入搜索查询，我也想显示与所选方面匹配的所有结果。类似于一些商店应用程序的工作方式，例如亚马逊

`e.g. Show all products which are "blue" and between $10-$100.`

如果未指定搜索查询，Haystack 不会返回任何值。

有什么想法可以绕过它吗？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-06-13T08:04:40.413

如果有人还在寻找，干草堆代码中建议了一个简单的解决方案：

[https://github.com/toastdriven/django-haystack/blob/master/haystack/forms.py#L34](https://github.com/toastdriven/django-haystack/blob/master/haystack/forms.py#L34)

```
class SearchForm(forms.Form):
    def no_query_found(self):
    """
    Determines the behavior when no query was found.

    By default, no results are returned (``EmptySearchQuerySet``).

    Should you want to show all results, override this method in your
    own ``SearchForm`` subclass and do ``return self.searchqueryset.all()``.
    """
    return EmptySearchQuerySet() 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-24T08:15:44.163

## 为什么没有结果？

我想您正在使用类似于大海捞针[入门文档](http://django-haystack.readthedocs.org/en/v1.2.6/tutorial.html#setting-up-the-views)中的搜索模板。如果没有查询，此视图不会显示任何内容：

```
{% if query %}
    {# Display the results #}
{% else %}
    {# Show some example queries to run, maybe query syntax, something else? #}
{% endif %} 
```

第二个问题是默认搜索表单的`search()`方法实际上并不搜索任何内容，除非有查询。

## 获得结果

为了解决这个问题，我使用了自定义搜索表单。这是一个简短的示例：

```
class CustomSearchForm(SearchForm):
    ...
    def search(self):
        # First, store the SearchQuerySet received from other processing.
        sqs = super(CustomSearchForm, self).search()

        if not self.is_valid():
          return sqs

        filts = []

        # Check to see if a start_date was chosen.
        if self.cleaned_data['start_date']:
            filts.append(SQ(created_date__gte=self.cleaned_data['start_date']))

        # Check to see if an end_date was chosen.
        if self.cleaned_data['end_date']:
            filts.append(SQ(created_date__lte=self.cleaned_data['end_date']))

        # Etc., for any other things you add

        # If we started without a query, we'd have no search
        # results (which is fine, normally). However, if we
        # had no query but we DID have other parameters, then
        # we'd like to filter starting from everything rather
        # than nothing (i.e., q='' and tags='bear' should 
        # return everything with a tag 'bear'.)
        if len(filts) > 0 and not self.cleaned_data['q']:
            sqs = SearchQuerySet().order_by('-created_date')

        # Apply the filters
        for filt in filts:
            sqs = sqs.filter(filt)

        return sqs 
```

另外，不要忘记更改视图：

```
{% if query or page.object_list %}
    {# Display the results #}
{% else %}
    {# Show some example queries to run, maybe query syntax, something else? #}
{% endif %} 
```

实际上，视图代码有点骇人听闻。它不区分没有结果的无查询搜索和没有参数的搜索。

干杯!

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-11T12:11:28.113

查看[SearchQuerySet](http://django-haystack.readthedocs.org/en/latest/searchqueryset_api.html#searchqueryset-api)。

如果在 SearchIndex 中定义了颜色和价格，这应该是可能的：

```
sqs = SearchQuerySet().filter(color="blue", price__range=(10,100)) 
```

[`models(Model)`](http://django-haystack.readthedocs.org/en/latest/searchqueryset_api.html#SearchQuerySet.models)您可以通过添加到 SearchQuerySet将查询限制为某些模型。因此，如果您想将查询限制为模型 Item 使用：

```
sqs = SearchQuerySet().filter(color="blue", price__range=(10,100)).models(Item) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T08:24:41.190

如果不存在查询字符串，则以下表单显示所有结果。现在您可以添加自定义过滤器。

```
from your_app.forms import NonEmptySearchForm
url(r'^your_url$', 
SearchView(template='search.html',searchqueryset=sqs,form_class=NonEmptySearchForm), name='haystack_search'), 
```

# 表格.py

```
#Overridding because the default sqs is always none if no query string is present
class NonEmptySearchForm(SearchForm):
    def search(self):
        if not self.is_valid():
            return self.no_query_found()
        sqs = self.searchqueryset.auto_query(self.cleaned_data['q'])
        if self.load_all:
            sqs = sqs.load_all()
        return sqs 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-28T11:22:50.620

Sumpy Joe Pete 的回答非常准确，但正如他所提到的，模板`if query or page.object_list`检查有点被黑了。解决这个问题的更好方法是创建你自己的`SearchForm`，如果它是空的，它仍然会找到一些东西`q`- 不会重新发布 - 并使用以下内容自定义`SearchView`：

```
class MySearchView(SearchView):
    def get_query(self):
        query = []

        if self.form.is_valid():
            for field in self.form:
                if field.name in self.form.cleaned_data and self.form.cleaned_data[field.name]:
                    query.append(field.name+'='+str(self.form.cleaned_data[field.name]))

        return ' AND '.join(query) 
```

在大多数情况下，您甚至不会使用该`query`值，因此您也可以快速检查是否设置了任何字段并返回`True`或类似的东西..或者当然您可以以任何方式修改输出想要（我什至不能 100% 确定我的解决方案适用于所有字段类型，但你明白了）。

# netbeans - 用于运行当前正在编辑的文件的 NetBeans 键盘快捷方式

> ID：10978703
> 
> 赞同：2
> 
> 时间：2012-06-11T10:50:07.340
> 
> 标签：netbeans, netbeans-7

是否有运行当前正在编辑的文件的 NetBeans 快捷方式？或者有没有办法制作一个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T12:30:35.057

`shift-f6`会做的。`ctrl-f6`如果您的测试遵循 nb 用于测试的约定，将为当前文件运行相应的测试。

它在运行菜单下，称为“运行文件”

# c++ - C++中的环形数据结构

> ID：10978707
> 
> 赞同：0
> 
> 时间：2012-06-11T10:50:42.913
> 
> 标签：c++, linked-list, circular-buffer

> **可能重复：**
> [C++ 是否存在循环列表的标准实现？](https://stackoverflow.com/questions/947489/does-a-standard-implementation-of-a-circular-list-exist-for-c)

我正在寻找一种访问行为“类似环形”的数据结构，因此如果我增加迭代器并达到结尾，它将被重置为开头。如果我添加数据，大小应该会增加。

```
void ++(iterator& it, datastructure& data)
{       
    ++it;   // should have checked if it is already the end
    if( it == data.end() && data.size() )
    {
         it = data.begin();
    }
} 
```

我认为`boost::circular_buffer`这不是我要找的，因为插入的行为是环状的。我的名单应该被允许无限增长。

有没有一种标准的方法呢？我可以很容易地找到解决方法，但很好奇是否存在这样的东西。一个链表，其末端总是连接到第一个元素或类似的元素。

**更新**

如`s3rius`建议的那样，我查看了一个类似的问题，并且有一个示例如何为此类事情编写自己的迭代器。我会试试这个，也投票赞成关闭。

# oracle - JBOSS 7.0 WebProfile 配置Oracle 11g 驱动

> ID：10978709
> 
> 赞同：2
> 
> 时间：2012-06-11T10:50:49.683
> 
> 标签：oracle, jboss, datasource

我已经用一个新模块配置了 JBOSS 数据源：

```
<?xml version="1.0" encoding="UTF-8"?>
<module xmlns="urn:jboss:module:1.0" name="com.oracle.jdbc">
  <resources>
    <resource-root path="ojdbc6.jar"/>
  </resources>
  <dependencies>
    <module name="javax.api"/>
  </dependencies>
</module> 
```

在文件夹 %JBOSS_HOME%\modules\com\oracle\jdbc\main

我将驱动程序本身也放入“主”文件夹：ojdbc6.jar

然后我用驱动程序配置一个数据源：

```
<datasource jndi-name="java:/jdbc/MyPool" pool-name="MyPool" enabled="true" jta="true" use-java-context="true" use-ccm="true">
        <connection-url>jdbc:oracle:thin:@my.server.com:1521:mydbname</connection-url>
        <driver>oracle</driver>
        <security>
            <user-name>myusername</user-name>
            <password>mypassword</password>
        </security>
    </datasource>
    <drivers>
        <driver name="oracle" module="com.oracle.jdbc"><xa-datasource-class>oracle.jdbc.OracleDriver</xa-datasource-class></driver>
    </drivers> 
```

当我启动应用程序服务器时，我收到错误：

**新的缺失/不满足的依赖项：service jboss.jdbc-driver.oracle（缺失）**

配置文件似乎很好，可能是JBOSS或Oracle驱动程序的版本有问题？

谢谢

# winforms - 如何将列表数据显示到 datagridview 中？

> ID：10978715
> 
> 赞同：1
> 
> 时间：2012-06-11T10:51:15.217
> 
> 标签：winforms, datagridview

我正在尝试将数据列表绑定到数据网格，但做不到。我在这里给出我的代码。

我做了一个这样的课程：

```
public class Book
{
    int bookID;
    string bookName;
    string athourName;

    public Book(int BookID, string BookName, string AuthorName)
    {

        bookID = BookID;
        bookName = BookName;
        athourName = AuthorName;

    }
} 
```

在表单加载事件下，我编写了以下代码：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        Book Book1 = new Book(001, "Java", "Harbart");
        Book Book2 = new Book(002, "C", "Balaguru");

        string[] BookArray = new string[10];

        BookArray[0] = Book1.ToString();
        BookArray[1] = Book2.ToString();

        List<Book> Obj = new List<Book>();

        Obj.Add(Book1);
        Obj.Add(Book2);

        dataGridView1.DataSource = Obj;
    } 
```

这不会给出任何错误，但也不会在数据网格中显示任何数据。我有一种感觉，我在两者之间缺少了一些东西。澄清如何将数据绑定到数据网格将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T16:01:39.157

`DataGridView`需要公共属性来自动生成其列。它不适用于公共或私有字段。

将您的课程更改为：

```
public class Book
{
    public int bookID { get; set; }
    public string bookName { get; set; }
    public string athourName { get; set; }

    public Book(int BookID, string BookName, string AuthorName)
    {
        bookID = BookID;
        bookName = BookName;
        athourName = AuthorName;
    }
} 
```

它使用自动属性，但您当然也可以使用普通语法。

# jquery - Jqgrid 自定义验证在 mvc3 中不起作用

> ID：10978720
> 
> 赞同：2
> 
> 时间：2012-06-11T10:51:43.273
> 
> 标签：jquery, json, asp.net-mvc-3, jqgrid

我的代码：自定义验证功能错误请帮助>>>>

自定义验证函数无法返回值，json 函数仍在工作但无法返回值

```
<script type="text/javascript">

    $(document).ready(function () {

$.getJSON("/ChequeBookReceipt/getChequeType/", function (data) {
            setupGrid(data.item);
        });

        function reload(result) {
            $("#listChequeBook").trigger("reloadGrid");
        }
    });

    function setupGrid(data) {
        var success = false;
        var message = 'success';
        var item = data;
        jQuery(document).ready(function () {

            /*Begin Grid*/
            $("#listChequeBook").jqGrid({
                url: '/ChequeBookReceipt/GetChequeBookGrid/',
                datatype: 'json',
                mtype: 'GET',
                data: $(this).serialize(),
                colNames: ['Cheque Type', 'Book number', 'First Leaf Number', 'Last Leaf Number'],

                colModel: [

                         { name: 'chequeType', index: 'chequeType', editrules: { required: true }, width: 150, editable: true, sortable: false, sorttype: "text", edittype: "select", editoptions: { value: item }, formatter: "select", width: "200px" },
                         { name: 'bookNumber', index: 'bookNumber',
                             editrules: { integer: true, required: true, custom: true,
                                 custom_func: function (value, colname) {

                                     $.ajaxSetup({ cache: false });
                                     $.getJSON("/ChequeBookReceipt/IsUniqueBookNumber/", { value: value, colname: colname }, function (data) {

                                         if (data != null) {
                                             //alert(data.success + " - " + data.message);
                                              return [data.success, data.message];

                                         }

                                     });

                                 }
                             }, formoptions: { elmsuffix: ' *' }, sortable: false, width: 100, editable: true, sorttype: "text", width: "100px"
                         },
                         { name: 'firstLeafNumber', index: 'firstLeafNumber', editrules: { integer: true, required: true }, formoptions: { elmsuffix: ' *' }, sortable: false, width: 100, editable: true, sorttype: "text", width: "100px" },
                         { name: 'lastLeafNumber', index: 'lastLeafNumber', editrules: { integer: true, required: true}, sortable: false, width: 100, editable: true, sorttype: "text", width: "100px" }

                    ],
                rowNum: 10,
                rowList: [10, 20, 30],
                //     loadonce: true,
                ignoreCase: true,
                autowidth: true,
                sortname: 'bookNumber',
                sortorder: "asc",
                pager: jQuery('#pagerChequeBook'),
                viewrecords: true,
                caption: "Cheque Book",
                editurl: "/ChequeBookReceipt/UpdateChequeBookGrid/",
                //                onSelectRow: function (id) {
                //                    if (id && id !== "") {
                //                        jQuery('#listChequeBook').editRow(id, true);
                //                    
                //                    }
                //                },
                beforeRequest: function () {
                    $.getJSON("/ChequeBookReceipt/getChequeType/", function (data) {
                        item = data.item;

                        // setupGrid(data.item);
                    });
                }

            });
            jQuery("#listChequeBook").jqGrid('navGrid', "#pagerChequeBook", { edit: false, add: false, del: true, search: false, refresh: false },
             { reloadAfterSubmit: true });
            $("#listChequeBook").jqGrid('inlineNav', '#pagerChequeBook', { addParams: { addRowParams: {
                "keys": true, "aftersavefunc": function () { var grid = $("#listChequeBook"); reloadgrid(grid); }
            }
            }, editParams: { "aftersavefunc": function () { var grid = $("#listChequeBook"); reloadgrid(grid); } }

            });

            function reloadgrid(grid) {
                //   grid.trigger("reloadGrid");
                grid.setGridParam({ datatype: 'json', page: 1 }).trigger('reloadGrid');
            }

            /*End Grid*/

        });
    }

</script> 
```

自定义验证功能错误请帮忙

请帮忙

# javascript - 使用函数原型的 javascript 继承问题

> ID：10978725
> 
> 赞同：4
> 
> 时间：2012-06-11T10:51:50.753
> 
> 标签：javascript

我想在js中使用继承概念，所以我所做的是

```
function myGarage(x) {
        var _x = x;
        Object.defineProperty(this, "BenZ", {
            get: function () {
                return _x;
            },
            set: function (value) {
                _x = value;
            },
            enumerable: true,
            configurable: true
        });
    }
    myGarage.prototype = new MyCar();
    function MyCar() {
     var _x =0;
        Object.defineProperty(this, "Audi", {
            get: function () {
                return _x;
            },
            set: function (value) {
                _x = value;
            },
            enumerable: true,
            configurable: true
        });
    } 
```

在此之后，我在那里创建了实例`myGarage`。

```
 var g1 = new myGarage(true);
        var g2 = new myGarage(false);
        var g3 = new myGarage("null"); 
```

这里的问题是当我设置奥迪的`g1.Audi = 10;`所有其他实例时将保存样本值`myGarage`

（例如）

```
 g1.Audi = 10;
    var a = g2.Audi // a is 10
    var b = g3.Audi; // b is 10 
```

但我将值设置为 g1。

我需要的是其他实例必须保持默认值或未定义

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T11:17:20.450

首先，车库不会从汽车继承，而是会持有许多汽车实例。

其次，您没有使用 javascript 对象模型，而是使用闭包。在闭包模型中，对象不拥有“它的数据”，而是被视为数据真正所有者的闭包的哑存储。使用闭包模型，您会失去继承等功能。

要使用继承，你会喜欢：

```
function MyCar() {
    this.Audi = 0;
}

MyCar.prototype = {
             //Todo: name the method properly
    setAudi: function(audi) {
        this.Audi = audi; //Do bunch of other stuff here
    },

    constructor: MyCar
};

function MyGarage(x) {
    this.Benz = x;
}

MyGarage.prototype = Object.create( MyCar.prototype );

MyGarage.prototype.constructor = MyGarage;

MyGarage.prototype.garageMethod1 = function() {

};

var g1 = new MyGarage(null),
    g2 = new MyGarage(false),
    g3 = new MyGarage(true);

    console.log( g1.Benz, g2.Benz, g3.Benz );
    //null false true 
```

上面有一些样板文件，可以通过许多库来缓解。我没有什么特别的建议。

更多关于 javascript 的对象模型：[https ://developer.mozilla.org/en/JavaScript/Guide/Details_of_the_Object_Model](https://developer.mozilla.org/en/JavaScript/Guide/Details_of_the_Object_Model)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:57:19.200

检查 John Resig 的这个简单的 javascript 继承，你会发现它很神奇： [http ://ejohn.org/blog/simple-javascript-inheritance/](http://ejohn.org/blog/simple-javascript-inheritance/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T13:25:43.700

试试下面的代码，效果很好，

```
$(document).ready(function () {

        var g1 = new MyGarage(true);
        var g2 = new MyGarage(false);
        var g3 = new MyGarage("null");
        g1.Audi = 10;
        var a = g2.Audi
        var b = g3.Audi;

    });
    function MyCar() {
        var _x = 1;
        Object.defineProperty(this, "Audi", {
            get: function () {
                return _x;
            },
            set: function (value) {
                _x = value;
            },
            enumerable: true,
            configurable: true
        });
    }
    function MyGarage(x) {
        MyCar.apply(this, arguments);
        var _x = x;
        Object.defineProperty(this, "BenZ", {
            get: function () {
                return _x;
            },
            set: function (value) {
                _x = value;
            },
            enumerable: true,
            configurable: true
        });
    }
    MyGarage.prototype = new MyCar(); 
```

# c# - 在 VSTO for Word 中完全隐藏内容控制

> ID：10978728
> 
> 赞同：0
> 
> 时间：2012-06-11T10:52:04.813
> 
> 标签：c#, ms-word, vsto, office-2010, word-contentcontrol

我有一个 Office 2010 项目，我在其中使用内容控件在 Word 文档中隐藏/显示内容（表格、文本块、图像等 - 表格中的内容控件、单元格中的 cc、图像周围的 cc、文本块周围等）。用户可以单击 ActionsPane 控件按钮来隐藏/显示内容。

我的问题是，我想完全隐藏内容控件，但出于某种原因，在某些情况下，将范围设置为 -1/+1 以获取内容控件本身并没有帮助。如果我通过 mouseselection 选择它，它仍会显示在活动文档中。幸运的是没有它的内容。我希望内容控件完全隐藏，以便不再选择或看到它。也在页眉/页脚部分。

我意识到的最奇怪的现象是包含在内容控件中的表格。它被它的文本内容隐藏了，但它留下了一个没有文本内容的新行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:03:29.950

玩弄

```
range.SetRange(range.Start - 1, range.End + 2) 
range.Move(WdUnits.wdParagraph, -1) 
```

做的工作...

# java - Spring 3.1.1 和缓存配置问题

> ID：10978731
> 
> 赞同：8
> 
> 时间：2012-06-11T10:52:17.657
> 
> 标签：java, eclipse, spring, caching, jakarta-ee

我正在测试 Spring 缓存，这是我的上下文文件

```
<beans xmlns="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:cache="http://www.springframework.org/schema/cache"
    xsi:schemaLocation=
    "http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache.xsd">

    <cache:annotation-driven cache-manager="simpleCacheManager"/>

    <bean id="simpleCacheManager" class="org.springframework.cache.support.SimpleCacheManager">
        <property name="caches">
            <set>
                <bean class="org.springframework.cache.concurrent.ConcurrentCacheFactoryBean">
                    <property name="name" value="alfresco"/>
                </bean> 
                <bean class="org.springframework.cache.concurrent.ConcurrentCacheFactoryBean">
                    <property name="name" value="alfresco_article"/>
                </bean> 
                <bean class="org.springframework.cache.concurrent.ConcurrentCacheFactoryBean">
                    <property name="name" value="alfresco_action"/>
                </bean>
            </set>
        </property>
    </bean> 
```

我添加了所有必需的库，但是我无法验证该库，因为 Eclipse 仍然告诉我缺少 AOPAlliance.jar 和 org.springframework.context-3.1.1.RELEASE.jar。

错误是：

在这一行发现了多个注解：class org.springframework.cache.concurrent.ConcurrentCacheFactoryBean not found。

已解决更改为 org.springframework.cache.concurrent.ConcurrentMapCacheFactoryBean

但是，调用 url 会发生这种情况：

```
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from class path resource [configuration-context.xml]; nested exception is java.lang.NoClassDefFoundError: org/springframework/aop/config/AopNamespaceUtils
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause

org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from class path resource [configuration-context.xml]; nested exception is java.lang.NoClassDefFoundError: org/springframework/aop/config/AopNamespaceUtils
    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:412) 
```

aop-alliance.jar 和 org.springframework.aop-3.1.1.RELEASE.jar 都在类路径中。

有什么线索吗？

谢谢，
安德里亚

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-11T11:07:13.877

仔细检查 org.springframework.context-3.1.1.RELEASE.jar 确实在类路径中。Eclipse 验证和这个问题的错误点。

更新：我已经检查过了，你是对的。`ConcurrentCacheFactoryBean`自 3.1.0.M1 起似乎已被删除，并且可能`ConcurrentMapCacheFactoryBean`在同一个包中被替换。我还没有在发行说明中找到任何证据。但是，如果您将缓存的 bean 类名更改为`ConcurrentMapCacheFactoryBean`，它似乎工作正常。

```
<bean class="org.springframework.cache.concurrent.ConcurrentMapCacheFactoryBean">
    <property name="name" value="alfresco"/>
</bean> 
```

**UPDATE2：是的，确实`ConcurrentCacheFactoryBean`已[重命名](https://build.springsource.org/browse/SPR-MASTER-19/commit)为`ConcurrentMapCacheFactoryBean`.** 他们只是没有时间更新教程。

# javascript - JavaScript 中绘制路径点的简化/减少

> ID：10978732
> 
> 赞同：3
> 
> 时间：2012-06-11T10:52:18.397
> 
> 标签：javascript, math, canvas, drawing

我们正在开发适用于 iOS 和 android 的绘图应用程序。我正在使用三次二次曲线来绘制平滑曲线，因为三次贝塞尔曲线在移动设备（主要是垫）上绘制速度很慢。

绘制带有很多点的长二次曲线在焊盘中仍然很慢，所以我试图减少我必须在画布上绘制的点以加快绘制速度。

我试过了，

1.  Catmull-Rom 样条
2.  拉默-道格拉斯-普克

但它们适用于三次曲线，而不适用于四次曲线。

四边形曲线是否也有任何算法或技术？可以进行任何其他优化以加快路径绘制吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T18:03:06.750

您可以递归地细分样条线段，直到它们几乎是一条直线。

> ****如果***maxDepth* ≤ 1**或**Polyline-Length( *C* ) ≤ 1px**或**StraightLineMeasure( *C* ) < ϵ则**开始****函数**Subdivide( *C* : Curve, *maxDepth* : int )**然后****返回**List-Single( *C* ) **end** *C1* , *C2* ← Split( *C* )**返回**List-Concat（细分（*C1*，*maxDepth* - 1），细分（*C2*，*maxDepth* - 1））**结束****

 *********其中
*Polyline-Length*计算由控制点形成的折线的长度。
*对于直线， StraightLineMeasure*返回零，对于几乎直线返回一个小数字。
*Split*返回两组控制点，每组代表原始曲线的一半。

B样条线很[容易细分（pdf）](http://www.mpi-inf.mpg.de/~ag4-gm/slides/b-splines.pdf)。

* * *

![截屏](../Images/327be18c89639aeb3d1197bddc93b9fa.png)

[（点击这里查看演示）](http://jsfiddle.net/h6X5m/1/)

这是javascript中的一个实现：

```
$(function() {
    var canvas = document.createElement('canvas');
    document.body.appendChild(canvas);

    var ctx = canvas.getContext('2d');
    ctx.fillStyle = '#f00';
    ctx.strokeStyle = '#f00';
    ctx.lineWidth = 1;

    var segments = BSplineSegment.FromBSpline([
        new Vector(10, 10),
        new Vector(110, 10),
        new Vector(110, 110),
        new Vector(10, 110),
        new Vector(10, 10),
        new Vector(110, 10),
        new Vector(110, 110)
        ]);

    for (var i = 0; i < segments.length; i++) {
        var subsegments = segments[i].subdivide(30);
        for (var j = 0; j < subsegments.length; j++) {
            var bss = subsegments[j];
            ctx.fillRect(bss.p1.x, bss.p1.y, 1, 1);
        }
    }

    var segment = new BSplineSegment(
        new Vector(110, 10), new Vector(210, 10),
        new Vector(110, 110), new Vector(210, 110));
    subsegments = segment.subdivide(50);
    for (var j = 0; j < subsegments.length; j++) {
        var bss = subsegments[j];
        ctx.fillRect(bss.p1.x, bss.p1.y, 1, 1);
    }
});

function Vector(x, y) {
    this.x = x;
    this.y = y;
}

Vector.prototype = {
    lengthSquared: function() {
        return this.x * this.x + this.y * this.y;
    },
    length: function() {
        return Math.sqrt(this.lengthSquared());
    },
    add: function(other) {
        return new Vector(this.x + other.x, this.y + other.y);
    },
    sub: function(other) {
        return new Vector(this.x - other.x, this.y - other.y);
    },
    mul: function(scale) {
        return new Vector(this.x * scale, this.y * scale);
    },
    div: function(scale) {
        return new Vector(this.x / scale, this.y / scale);
    },
    cross: function(other) {
        return this.x * other.y - this.y * other.x;
    },
};

function BSplineSegment(p0, p1, p2, p3) {
    this.p0 = p0;
    this.p1 = p1;
    this.p2 = p2;
    this.p3 = p3;
};

BSplineSegment.FromBSpline = function(pts) {
    var n = pts.length;
    var segments = [];
    for (var i = 3; i < n; i++) {
        segments.push(new BSplineSegment(pts[i - 3], pts[i - 2], pts[i - 1], pts[i]));
    }
    return segments;
};

BSplineSegment.prototype = {
    polylineLength: function() {
        return this.p2.sub(this.p1).length();
    },
    straightLineMeasure: function() {
        var det0 = this.p1.cross(this.p2);
        var det1 = det0 + this.p2.cross(this.p0) + this.p0.cross(this.p1);
        var det2 = det0 + this.p2.cross(this.p3) + this.p3.cross(this.p1);
        return (Math.abs(det1) + Math.abs(det2)) / this.p2.sub(this.p1).length();
    },
    split: function() {
        var p0 = this.p0.add(this.p1).mul(0.5);
        var p1 = this.p0.add(this.p1.mul(6)).add(this.p2).mul(0.125);
        var p2 = this.p1.add(this.p2).mul(0.5);
        var p3 = this.p1.add(this.p2.mul(6)).add(this.p3).mul(0.125);
        var p4 = this.p2.add(this.p3).mul(0.5);
        return [new BSplineSegment(p0, p1, p2, p3), new BSplineSegment(p1, p2, p3, p4)];
    },
    subdivide: function(maxLevels) {
        if (maxLevels <= 0 || this.polylineLength() < 1.0 || this.straightLineMeasure() < 1.0) {
            return [this];
        }
        else {
            var children = this.split();
            var left = children[0].subdivide(maxLevels - 1);
            var right = children[1].subdivide(maxLevels - 1);
            return left.concat(right);
        }
    }
};​ 
```*********

# jquery - jquery - 动态操作DOM后可调整大小不起作用

> ID：10978733
> 
> 赞同：0
> 
> 时间：2012-06-11T10:52:34.967
> 
> 标签：jquery, jquery-ui, jquery-resizable

就我而言，我有一些 div 和 img 标签。我仅将可拖动和可调整大小的操作应用于 div 元素。

在其中一项功能中，我们具有“删除元素”功能，可动态删除所选元素。一切正常，在删除函数调用之后，我再次对事件绑定进行操作，以便可调整大小和可拖动可以再次工作。Draggable 工作正常，但**调整大小不能..**

我尝试了许多组合，例如调用 resizable("destroy").resizable()，但没有任何效果。运行时从 dom 生成的 html 看起来有点奇怪。

当我删除图像并且页面上存在dragClass div时出现问题。然后，dragClass div 不会变得可调整大小。请提出一些想法来解决这个问题。

这是**[jsFiddle 演示](http://jsfiddle.net/maximus392/eWQwb/2/)**链接。

这是示例：-

```
 <div id="ParentDIV" style="margin-left:200px; width:800px; height:500px; background:lightgray;">                    
           <div class="dragClass"><p>Drag me around!</p></div>
           <br /><br />
           <img class="dragImgClass" src="logo3.JPG" />
           <br /><br />
           <img class="dragImgClass" src="logo4.JPG" />
       </div>
        <br /><br />
        <input id="Btn4" type="button" onclick="deleteObj();" value="Remove Element" /> 
```

js:-

```
 $(function () {
            BindEvtHandlers();         

        });      //End of DOM Ready

        function BindEvtHandlers() {            
            $(".dragImgClass").draggable({ delay: 100, containment: "#ParentDIV", scroll: false })
                              .on("click", selectAction);

            $(".dragClass").draggable({ delay: 100, containment: "#ParentDIV", scroll: false })
                           .resizable()
                           .on("dblclick", editAction)
                           .on("click", selectAction)
                           .on("blur", "textarea", blurAction); 
           }

        function selectAction() {
            var $this = $(this); //get current obj.                     

            if ($this.get(0).tagName == "IMG")
                $('body').data('CBO', $this.attr('src'));
            else
                $('body').data('CBO', $this.find('p').html());

            $('body').data('selObj', $this);    
            $this.fadeTo('slow', 0.3);             
           }

        function deleteObj() {
            var $selObj = $('body').data('selObj');
            alert($selObj.outerHtml());           

            var cont = $('#ParentDIV').html();
            cont = cont.replace($selObj.outerHtml(), "");
            $('#ParentDIV').html(cont);

            $(".dragImgClass").draggable({ delay: 100, containment: "#ParentDIV", scroll: false })
                              .on("click", selectAction);

            $(".dragClass").resizable('destroy');
            $(".dragClass").draggable({ delay: 100, containment: "#ParentDIV", scroll: false })
                           .resizable()
                           .on("dblclick", editAction)
                           .on("click", selectAction)
                           .on("blur", "textarea", blurAction); 
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:03:11.537

我找到了简单的解决方案。在 deleteObj fn 中，只需在第一行之后添加一行，然后从 fn 中删除其余代码。

```
$selObj.remove(); 
```

这将从 DOM 树中删除元素，而不是进行字符串操作。

# ruby - 即使满足先决条件，如何强制执行 Rake 中的任务？

> ID：10978735
> 
> 赞同：3
> 
> 时间：2012-06-11T10:52:41.300
> 
> 标签：ruby, makefile, rake, pipeline

即使已经满足先决条件，是否有任何方法可以强制在 Rake 中执行任务？

我正在寻找 GNU/make 的 --always-make 选项的等效项（[http://www.gnu.org/software/make/manual/make.html#Options-Summary](http://www.gnu.org/software/make/manual/make.html#Options-Summary)）

示例 Rakefile：

```
file "myfile.txt" do
    system "touch myfile.txt"
    puts "myfile.txt created"
end 
```

--always-make 选项如何工作：

```
# executing the rule for the first time creates a file:
$: rake myfile.txt 
myfile.txt created

# executing the rule a second time returns no output 
# because myfile.txt already exists and is up to date 
$: rake myfile.txt

# if the --always-make option is on, 
# the file is remade even if the prerequisites are met
$: rake myfile.txt --always-make
myfile.txt created 
```

我正在运行 Rake 版本 0.9.2.2，但在 --help 和手册页中找不到任何选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:17:27.603

如果我对您的理解正确，您可以使用[`Rake::Task`](http://rake.rubyforge.org/classes/Rake/Task.html).

```
task "foo" do
  puts "Doing something in foo"
end

task "bar" => "foo" do
  puts "Doing something in bar"
  Rake::Task["foo"].execute
end 
```

当你运行时`rake bar`，你会看到：

```
Doing something in foo
Doing something in bar
Doing something in foo 
```

如果您使用`Rake::Task`，它将在不检查任何先决条件的情况下执行。如果这对您没有帮助，请告诉我。

# c# - 向 ExpandObject 成员变量添加属性？

> ID：10978738
> 
> 赞同：2
> 
> 时间：2012-06-11T10:52:54.203
> 
> 标签：c#

我发现这个线程对此进行了一些讨论：[Is it possible to add attributes to the generated members of an ExpandoObject instance?](https://stackoverflow.com/questions/5766777/is-it-possible-to-add-attributes-to-the-generated-members-of-an-expandoobject-in)

但它似乎只专注于电网。

我花了大约 1 个小时在谷歌上寻找这个也没有任何运气。谁能至少确认它是否可以完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:04:33.577

您可以创建一个接口并将属性添加到接口。

比使用 Improptu：[http ://code.google.com/p/impromptu-interface/](http://code.google.com/p/impromptu-interface/)

```
IMyInterface instance = Impromptu.ActLike<IMyInferface>(myexpando); 
```

# regex - RewriteRule 上的 Apache 正则表达式，“或”语法

> ID：10978739
> 
> 赞同：4
> 
> 时间：2012-06-11T10:53:01.547
> 
> 标签：regex, apache

当 url 以“word1”或“word2”结尾时，我厌倦了在第一个斜杠之前获取所有字符串，并且我使用以下代码：

```
RewriteRule ^(.+)/word1|word2/?$            index.php?query=$1 [NC] 
```

我对两端有“word1”的url没有任何问题，但是如果url以“word2”结尾，Apache不会向“query”变量返回任何值

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T10:55:08.613

您需要对表达式中的交替进行分组：

```
^(.+)/(?:word1|word2)/?$ 
```

如果没有分组，您的表达式意味着：

`^(.+)/word1` **或者** `word2/?$`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T10:56:30.470

利用：

```
RewriteRule ^(.+)/(word1|word2)/?$ 
```

# android - 录制的视频无声播放

> ID：10978746
> 
> 赞同：1
> 
> 时间：2012-06-11T10:53:48.477
> 
> 标签：android, media-player, video-capture

我按照[这个](http://www.codeproject.com/Articles/107270/Recording-and-Playing-Video-on-Android)来录制视频。我使用以下编码播放录制的视频..

> url = "file:///mnt/sdcard/CaptureVideo/1510402819.3gpp"

```
Intent i = new Intent(Intent.ACTION_VIEW);
i.setDataAndType(Uri.parse(url), "video/*");
startActivity(i); 
```

我试过用 mp4 和 mp3 格式还是听不到声音。. .

**注意：如果我直接播放录制的视频听不到声音..** 任何人帮助我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:04:44.910

尝试这个 ：

```
Intent movieIntent = new Intent();
movieIntent.setAction(android.content.Intent.ACTION_VIEW);
movieIntent.setDataAndType(Uri.fromFile(file), "video/*");
startActivity(movieIntent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:53:17.513

如下设置 AudioSource 和 Audio Encoder，

```
recorder.setVideoSource(MediaRecorder.VideoSource.DEFAULT);
recorder.setAudioSource(MediaRecorder.AudioSource.DEFAULT);
recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
recorder.setVideoEncoder(MediaRecorder.VideoEncoder.DEFAULT);
recorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT); 
```

# jquery - 阻止本地日期选择器显示

> ID：10978747
> 
> 赞同：0
> 
> 时间：2012-06-11T10:53:52.393
> 
> 标签：jquery, jquery-mobile, datepicker, datebox

我正在尝试使用 datebox 插件 (http://dev.jtsage.com/jQM-DateBox/) 在我的 jquerymobile 应用程序中生成一些自定义数据选择器框。

我打电话给 tham 使用：

```
<input type="date" id="dateOfBirth" data-role="dateBox" data-theme="d" data-options ='{"mode": "flipbox", "focusMode": true ,"useClearButton": true, "centerWindow": true}' 
```

我的问题是，如果我使用特定按钮打开日期框，它会打开正常，但是如果我打开按下 texbox（它应该可以工作，因为我有 focusMode：true）它会打开日期框和本机 datepicker .

我已经尝试过，就像在 jquerymobile 文档中为 select (date-native-menu: false) 所建议的那样，但它不起作用。我也不知道如何将它用于输入而不是选择。

另一方面，如果我使用正常的弹出方法（而不是 centerWindow: true），问题就会消失，但我想使用居中的方法。

提前致谢

# json - Jackson 反序列化 - 包含 ArrayList

> ID：10978748
> 
> 赞同：4
> 
> 时间：2012-06-11T10:53:55.420
> 
> 标签：json, jackson

再会，

我目前正在尝试使用 Jackson（与 Jersey）使用生成 JSON（用 .NET 编写）的 REST 服务进行集成。JSON 由可能的错误消息和对象数组组成。下面是由 Jersey 的日志过滤器返回的 JSON 示例：

```
{
    "error":null,
    "object":"[{\"Id\":16,\"Class\":\"ReportType\",\"ClassID\":\"4\",\"ListItemParent_ID\":4,\"Item\":\"Pothole\",\"Description\":\"Pothole\",\"Sequence\":1,\"LastEditDate\":null,\"LastEditor\":null,\"ItemStatus\":\"Active\",\"ItemColor\":\"#00AF64\"}]"
} 
```

我有两个类来表示类型（外部 ListResponse）：

```
public class ListResponse { 

    public String error;    
    public ArrayList<ListItem> object;  

    public ListResponse() { 
    }
} 
```

和（内部 ListItem）：

```
public class ListItem {
    @JsonProperty("Id")
    public int id;      
    @JsonProperty("Class")
    public String classType;
    @JsonProperty("ClassID")
    public String classId;  
    @JsonProperty("ListItemParent_ID")
    public int parentId;    
    @JsonProperty("Item")
    public String item; 
    @JsonProperty("Description")
    public String description;

    @JsonAnySetter 
    public void handleUnknown(String key, Object value) {}

    public ListItem() {
    }
} 
```

调用并返回 JSON 的类如下所示：

```
public class CitizenPlusService {
    private Client client = null;   
    private WebResource service = null;     

    public CitizenPlusService() {
        initializeService("http://localhost:59105/PlusService/"); 
    }

    private void initializeService(String baseURI) {    
        // Use the default client configuration. 
        ClientConfig clientConfig = new DefaultClientConfig();      
        clientConfig.getClasses().add(JacksonJsonProvider.class);                       

        client = Client.create(clientConfig);

        // Add a logging filter to track communication between server and client. 
        client.addFilter(new LoggingFilter()); 
        // Add the base URI
        service = client.resource(UriBuilder.fromUri(baseURI).build()); 
    }

    public ListResponse getListItems(String id) throws Exception
    {           
        ListResponse response = service.path("GetListItems").path(id).accept(MediaType.APPLICATION_JSON_TYPE, MediaType.APPLICATION_XML_TYPE).get(ListResponse.class);                                  
        return response;            
    }
} 
```

这里重要的调用是 getListItems 方法。在测试工具中运行代码，会产生以下结果：

```
org.codehaus.jackson.map.JsonMappingException: Can not deserialize instance of java.util.ArrayList out of VALUE_STRING token
at [Source: java.io.StringReader@49497eb8; line: 1, column: 14] (through reference chain: citizenplus.types.ListResponse["object"]) 
```

请协助。

问候，卡尔 - 彼得迈耶

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T08:41:59.293

您可能缺少[@JsonDeserialize](http://jackson.codehaus.org/1.1.2/javadoc/org/codehaus/jackson/map/annotate/JsonDeserialize.html)属性，因为类型信息在运行时会在泛型中丢失。如果可以的话，你也应该避免使用集合的具体类。

```
public class ListResponse { 

    public String error;

    @JsonDeserialize(as=ArrayList.class, contentAs=ListItem.class)
    public List<ListItem> object;  

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-24T08:47:27.083

您的问题是“对象”属性值是字符串而不是数组！该字符串包含一个 JSON 数组，但 Jackson 需要一个本机数组（不带引号）。

我遇到了同样的问题，我创建了一个自定义反序列化器，它将一个字符串值反序列化为所需类型的通用集合：

```
public class JsonCollectionDeserializer extends StdDeserializer<Object> implements ContextualDeserializer {

  private final BeanProperty    property;

  /**
   * Default constructor needed by Jackson to be able to call 'createContextual'.
   * Beware, that the object created here will cause a NPE when used for deserializing!
   */
  public JsonCollectionDeserializer() {
    super(Collection.class);
    this.property = null;
  }

  /**
   * Constructor for the actual object to be used for deserializing.
   *
   * @param property this is the property/field which is to be serialized
   */
  private JsonCollectionDeserializer(BeanProperty property) {
    super(property.getType());
    this.property = property;
  }

  @Override
  public JsonDeserializer<?> createContextual(DeserializationContext ctxt, BeanProperty property) throws JsonMappingException {
    return new JsonCollectionDeserializer(property);
  }

  @Override
  public Object deserialize(JsonParser jp, DeserializationContext ctxt) throws IOException, JsonProcessingException {
    switch (jp.getCurrentToken()) {
      case VALUE_STRING:
        // value is a string but we want it to be something else: unescape the string and convert it
        return JacksonUtil.MAPPER.readValue(StringUtil.unescapeXml(jp.getText()), property.getType());
      default:
        // continue as normal: find the correct deserializer for the type and call it
        return ctxt.findContextualValueDeserializer(property.getType(), property).deserialize(jp, ctxt);
    }
  }
} 
```

请注意，如果值实际上是数组而不是字符串，则此反序列化器也将起作用，因为它相应地委派了实际的反序列化。

在您的示例中，您现在必须像这样注释您的集合字段：

```
public class ListResponse { 

    public String error;    
    @JsonDeserialize(using = JsonCollectionDeserializer.class)
    public ArrayList<ListItem> object;  

    public ListResponse() {}    
} 
```

应该就是这样。

注意：JacksonUtil 和 StringUtil 是自定义类，但您可以轻松替换它们。例如通过使用`new ObjectMapper()`and `org.apache.commons.lang3.StringEscapeUtils`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-08T22:14:49.350

注册子类型有效！

```
@JsonTypeInfo(use=JsonTypeInfo.Id.NAME, include=JsonTypeInfo.As.PROPERTY, property="type")
public interface Geometry {

}

public class Point implements Geometry{
 private String type="Point";
  ....
}
public class Polygon implements Geometry{
   private String type="Polygon";
  ....
}
public class LineString implements Geometry{
  private String type="LineString";
  ....
}

GeoJson geojson= null;
ObjectMapper mapper = new ObjectMapper();
mapper.disable(DeserializationConfig.Feature.FAIL_ON_UNKNOWN_PROPERTIES);
mapper.registerSubtypes(Polygon.class,LineString.class,Point.class);
try {
    geojson=mapper.readValue(source, GeoJson.class);

} catch (IOException e) {
    e.printStackTrace();
} 
```

# automation - STAF/STAX 在自动化中的使用

> ID：10978750
> 
> 赞同：1
> 
> 时间：2012-06-11T10:54:00.033
> 
> 标签：automation, automated-tests

上周我一直在探索 STAX/STAF。
它用于测试自动化执行，有点类似于 Hudson。
我想知道它可以用于哪种类型的测试。即功能测试，负载测试等，
功能自动化测试基本上取决于框架，即它们如何运行，失败或通过时的返回状态是通过框架。
我们如何将其与像 STAF 这样的测试自动化框架集成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T20:10:20.327

我已经使用 STAF/STAX 超过 4 年了。

优点：

*   开源
*   跨平台
*   并发执行
*   可扩展（即您可以编写自己的服务）
*   IBM 通过 STAF 网站提供的体面支持

缺点：

*   有时马车
*   难以诊断问题
*   编写 STAX 脚本既笨拙又丑陋（即通过 XML 标记和嵌入式 jython 编写脚本）

我发现 STAF/STAX 对系统测试很有用。例如，它使您能够在一个系统上启动服务器并在另一个系统上启动客户端，然后测试它们的交互。如果您需要测试跨平台或多语言绑定，这也很有帮助。我还喜欢它既可以在大型网络系统中使用，也可以在个人桌面上使用的事实。

另一方面，我可能会避免将它用于单元测试，或者相对简单且可以在单个系统上运行的测试。我可能会为此使用特定于语言的单元框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T07:13:49.390

STAF 无法与 Hudson 相提并论。

当我查看 Hudson/Jenkins 和 Buildbot 之类的东西时，我看到的 GUI 强调调度、查看正在发生的事情、完成的事情以及进展情况。

另一方面，STAF 更像是分布式环境上的 QA 框架的管道。它有助于启动进程、收集日志、锁定资源等。

# c# - 旋转边框不会改变窗口大小

> ID：10978751
> 
> 赞同：2
> 
> 时间：2012-06-11T10:54:00.820
> 
> 标签：c#, wpf

我尝试旋转 a`Border`并`MainWindow`根据旋转占用的新空间更改他的大小`Border`。我已经设置`SizeToContent="WidthAndHeight"`，但是当我旋转边框时窗口大小不会改变。

我是否需要以编程方式为 MainWindow 设置`Width`and`Height`或者这可以通过其他方式更改 xaml 代码来实现？

我的xml代码：

```
<Window x:Class="MyClass.MainWindow"
        WindowStyle="None" AllowsTransparency='True' 
        Topmost='False' Background="Transparent"  ShowInTaskbar='False' 
        SizeToContent="WidthAndHeight" WindowStartupLocation="Manual">
    <Border Name="MyBorder" 
            BorderBrush="Transparent"
            Background="Transparent"
            HorizontalAlignment="Left" 
            VerticalAlignment="Top"
            RenderTransformOrigin="0.5,0.5">
    </Border>
</Windows> 
```

我的`c#`代码`Window_KeyDown`：

`# RotateTransform rt = new RotateTransform()`在类级别声明。

```
if (e.Key == Key.I)
                {
                    if (rt.Angle + 1 < 360)
                    {
                        rt.Angle += 1;                    
                    }
                    else
                    {
                        rt.Angle = 0;                   
                    }    

                MyBorder.RenderTransform = rt;
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T10:59:37.283

使用`LayoutTransform`代替`RenderTransform`

来自 MSDN：[转换概述](http://msdn.microsoft.com/en-us/library/ms750596.aspx)

> *   LayoutTransform – 在布局传递之前应用的转换。应用变换后，布局系统会处理元素变换后的大小和位置。
>     
>     
> *   RenderTransform – 修改元素外观但在布局传递完成后应用的变换。通过使用 RenderTransform 属性而不是 LayoutTransform 属性，您可以获得性能优势。

*例子*

```
<Border Name="MyBorder"  
        BorderBrush="Transparent" 
        Background="Transparent" 
        HorizontalAlignment="Left"  
        VerticalAlignment="Top" 
        RenderTransformOrigin="0.5,0.5">
    <Border.LayoutTransform>
        <RotateTransform Angle="90"/>
    </Border.LayoutTransform>
</Border> 
```

所以在你的情况下

```
RotateTransform rt = new RotateTransform(0.0, 0.5, 0.5);
private void Window_KeyDown(object sender, KeyEventArgs e)
{
    if (e.Key == Key.I)
    {
        if (rt.Angle + 1 < 360)
        {
            rt.Angle += 1;
        }
        else
        {
            rt.Angle = 0;
        }
        MyBorder.LayoutTransform = rt;
    }
}} 
```

# linux - 查找文件列表，创建目录并在linux中复制这些文件

> ID：10978756
> 
> 赞同：1
> 
> 时间：2012-06-11T10:54:34.853
> 
> 标签：linux, cp

例如，我想从不同的目录复制“file-to-be-copied.txt”

```
/home/user1/file-to-be-copied.txt
/home/user2/file-to-be-copied.txt
/home/user3/file-to-be-copied.txt 
```

然后根据用户账号新建一个目录

```
/home/user4/user1/
/home/user4/user2/
/home/user4/user3/ 
```

然后将“file-to-be-copied.txt”复制到新创建的目录中

```
/home/user4/user1/file-to-be-copied.txt
/home/user4/user2/file-to-be-copied.txt
/home/user4/user3/file-to-be-copied.txt 
```

我所知道的是应该使用 bash 脚本来完成，但我不知道如何。这是我去的地方

```
find /home . "file-to-be-copied.txt" | xargs -i mkdir ... cp {} ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:52:59.133

不需要 find，更重要的是：没有 xargs（这对于 find 几乎总是多余的，因为 find 有 -exec）。

```
cd /home
cp --parents user?/file-to-be-copied.txt user4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T10:59:17.620

```
for f in $(/usr/bin/find '/home' -name 'file-to-be-copied.txt'); do
  tmpname=${f%/*}
  dirname=${tmpname##*/}
  /bin/mkdir -p $dirname && /bin/cp -p $f $dirname
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T14:15:35.780

这是我使用的代码。

```
 for f in $(find '/home' -name 'file-to-be-copied.txt')
      do
        tmpname=${f%/*}
        dirname=${tmpname##*/}
        mkdir -p /home/user4/$dirname && /bin/cp -p $f /home/user4/$dirname

        echo $f copied to /home/user4/$dirname
      done 

```

# python - 启动 lamson 作为进程

> ID：10978759
> 
> 赞同：1
> 
> 时间：2012-06-11T10:54:58.317
> 
> 标签：python, smtp, lamson

我可以从我的 python 代码中以编程方式启动 lamson SMTP 服务器吗？

它可以从命令行启动为：

```
lamson start 
```

但是，我想使用多进程包从代码中启动它

```
from multiprocessing import Process

   def f(name):
      # what to put here

if __name__ == '__main__':
   p = Process(target=f, args=('bob',))
   p.start()
   p.join() 
```

在 f 函数中添加什么来启动 lamson 服务器

如何做到这一点？

谢谢

# iphone - 核心绘图 CPTScatterPlot '折线图' 未显示

> ID：10978763
> 
> 赞同：2
> 
> 时间：2012-06-11T10:55:09.793
> 
> 标签：iphone, objective-c, ios, core-plot

所以我的问题很简单。我正在尝试将我的图表从条形图切换到折线图，但我的折线图没有显示/绘图。我对我的 CPTBarPlot '条形图' 使用了类似的代码，并且这个绘图/显示正确。

我正确绘制的条形图代码是：

```
CPTBarPlot *barPlot             = nil;    
barPlot                         = [CPTBarPlot tubularBarPlotWithColor:[CPTColor colorWithComponentRed:0.9294f green:0.3960f blue:0.5921f alpha:1.0f] horizontalBars:NO];
barPlot.fill                    = [CPTFill fillWithColor:[CPTColor colorWithComponentRed:0.9294f green:0.3960f blue:0.5921f alpha:1.0f]];
barPlot.opacity                 = 0.8f;
barPlot.dataSource              = self;
barPlot.delegate                = self;
barPlot.baseValue               = CPTDecimalFromString(@"0");
barPlot.barOffset               = CPTDecimalFromFloat(0.50f);

switch (graphType) {
    case kWeightThreeMonth:
    {
        barPlot.identifier  = [GraphsViewController threeMonthBarPlotIdentifier];
    }
        break;

    case kWeightSixMonth:
    {
        barPlot.identifier  = [GraphsViewController sixMonthBarPlotIdentifier];
    }
        break;

    case kWeightNineMonth:
    {
        barPlot.identifier  = [GraphsViewController nineMonthBarPlotIdentifier];
    }
        break;  
    default:
        break;
} 
barPlot.barCornerRadius         = 2.0f;
barPlot.lineStyle               = nil;
[lineGraph addPlot:barPlot toPlotSpace:plotSpace]; 
```

我没有显示的线图代码是：

```
// Create a blue plot area
CPTScatterPlot *boundLinePlot   = [[[CPTScatterPlot alloc] init] autorelease];
CPTMutableLineStyle *lineStyle  = [CPTMutableLineStyle lineStyle];
lineStyle.miterLimit            = 1.0f;
lineStyle.lineWidth             = 3.0f;
lineStyle.lineColor             = [CPTColor redColor];
boundLinePlot.dataLineStyle     = lineStyle;
switch (graphType) {
    case kWeightThreeMonth:
    {
        boundLinePlot.identifier  = [GraphsViewController threeMonthBarPlotIdentifier];
    }
        break;

    case kWeightSixMonth:
    {
        boundLinePlot.identifier  = [GraphsViewController sixMonthBarPlotIdentifier];
    }
        break;

    case kWeightNineMonth:
    {
        boundLinePlot.identifier  = [GraphsViewController nineMonthBarPlotIdentifier];
    }
        break;  
    default:
        break;
} 

boundLinePlot.dataSource    = self;
boundLinePlot.delegate      = self;
[lineGraph addPlot:boundLinePlot toPlotSpace:plotSpace];

// Do a blue gradient
CPTColor *areaColor1        = [CPTColor colorWithComponentRed:0.3 green:0.3 blue:1.0 alpha:0.8];
CPTGradient *areaGradient1  = [CPTGradient gradientWithBeginningColor:areaColor1 endingColor:[CPTColor clearColor]];
areaGradient1.angle         = -90.0f;
CPTFill *areaGradientFill   = [CPTFill fillWithGradient:areaGradient1];
boundLinePlot.areaFill      = areaGradientFill;
boundLinePlot.areaBaseValue = [[NSDecimalNumber zero] decimalValue];

// Add plot symbols
CPTMutableLineStyle *symbolLineStyle = [CPTMutableLineStyle lineStyle];
symbolLineStyle.lineColor   = [CPTColor blackColor];
CPTPlotSymbol *plotSymbol   = [CPTPlotSymbol ellipsePlotSymbol];
plotSymbol.fill             = [CPTFill fillWithColor:[CPTColor blueColor]];
plotSymbol.lineStyle        = symbolLineStyle;
plotSymbol.size             = CGSizeMake(10.0, 10.0);
boundLinePlot.plotSymbol    = plotSymbol; 
```

我在这里错过了什么吗？考虑到条形图正常工作，我认为数据源等都将以相同的方式工作。我只是想从条形图切换到折线图。

任何帮助将非常感激。

亲切的问候，丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:58:24.240

您可能需要重新加载绘图数据。尝试这样做：

```
[lineGraph reloadData] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:34:26.940

这其实是我自己的错。

在数据源方法中；

```
-(NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot
-(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index 
```

我正在做一个 If 语句；

```
if ( [plot isKindOfClass:[CPTBarPlot class]] ){ 
```

当然，我使用的是 CPTScatterPlot，所以我的代码没有被调用。多哈。

# java - 在 Java (Android) 中连接到 IOCP 服务器

> ID：10978765
> 
> 赞同：0
> 
> 时间：2012-06-11T10:55:13.043
> 
> 标签：java, android, client, iocp

我想用安卓做一个在线游戏。

我打算通过 C++ 制作带有 IOCP 模型的服务器。这应该可以正常工作，问题出在客户端。
C++ 中的 IOCP 客户端示例使用`WSASyncselect`或`WSAEventSelect`.

我找不到任何与异步套接字一样工作的 Java 示例。

**问题：**

1.  `WSASyncselect()`Java中有类似的东西吗？
2.  如果不是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T10:09:24.130

Java 7“NIO.2”类的 JDK 7 Windows 实现

*   [异步套接字通道](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/AsynchronousSocketChannel.html)

*   [异步服务器套接字通道](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/AsynchronousServerSocketChannel.html)

*   [异步文件通道](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/AsynchronousFileChannel.html)

    在幕后[调用 Windows“重叠 IO”API](http://en.wikipedia.org/wiki/Overlapped_I/O)的 WSA[...] 函数。

有关更深入的信息，请查看包含[实现 .java 源](http://hg.openjdk.java.net/jdk8/tl-gate/jdk/file/d7ed56d57d97/src/windows/classes/sun/nio/ch/)以及它们相应的[.c 本机源和 JNI 绑定](http://hg.openjdk.java.net/jdk8/tl-gate/jdk/file/d7ed56d57d97/src/windows/native/sun/nio/ch/) 的 OpenJDK 存储库文件夹。

# php - Symfony2 食谱从 DB 教程加载用户 - 缺少存储库类

> ID：10978766
> 
> 赞同：1
> 
> 时间：2012-06-11T10:55:13.950
> 
> 标签：php, symfony

我正在尝试按照 Symfony2 食谱教程从数据库加载用户。

本教程假设您有 ACME/UserBundle 而我的安装没有，但我只是假设我可以自己制作（它不像我需要在某个地方下载的插件包吗？）。

我创建了一个包 UserBundle 并从教程的实体 User 中复制粘贴了代码（[这里](http://symfony.com/doc/current/cookbook/security/entity_provider.html)的第一个代码框）。

这条线似乎对我不利：

```
 @ORM\Entity(repositoryClass="Mycompany\UserBundle\Entity\UserRepository") 
```

我得到的错误信息是：

```
Fatal error: Class 'mycompany\UserBundle\Entity\UserRepository' not
found in /var/www/mycompany/vendor/doctrine/lib/Doctrine/ORM/EntityManager.php
on line 578 
```

所以我要么假设我不能只创建自己的 UserBundle（很奇怪，因为我认为这是一个关于如何做到这一点的教程，而不是如何安装一个插件），或者他们认为我知道我需要以某种方式注册entityRepositories 中的实体以某种方式？

如果任何 symfony 的资深人士能在这方面启发我，我将不胜感激。到目前为止，我真的很喜欢我所学到的关于 Symfony2 的一切，但我在这里学得有点慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:11:07.577

听起来您没有用户存储库类，这与用户实体类是分开的。它位于实体文件夹中，但会是 UserRepository.php，看起来像：

```
namespace Mycompany\UserBundle\Entity;

use Symfony\Component\Security\Core\User\UserInterface;
use Symfony\Component\Security\Core\User\UserProviderInterface;
use Symfony\Component\Security\Core\Exception\UsernameNotFoundException;
use Symfony\Component\Security\Core\Exception\UnsupportedUserException;
use Doctrine\ORM\EntityRepository;
use Doctrine\ORM\NoResultException;

// Implements userproviderinterface so we can use the user entity for authentication
// Extends entityrepository so that it gets methods definded there
class UserRepository extends EntityRepository implements UserProviderInterface {

  //  This function is called when a user tries to login, the below lets the user use their username or email for username
  public function loadUserByUsername($username) {
    $user = $this->createQueryBuilder('u')
            ->select('u, r')
            ->leftJoin('u.roles', 'r')
            ->where('u.username = :username OR u.email = :username')
            ->setParameter('username', $username)
            ->getQuery();
    try {
      $user = $user->getSingleResult();
    } catch (NoResultException $exc) {
      throw new UsernameNotFoundException(sprintf('Unable to find an active UserBundle:User object identified by %s', $username));
    }
    return $user;
  }
  // 
  public function refreshUser(UserInterface $user) {
    $class = get_class($user);
    if (!$this->supportsClass($class))
      throw new UnsupportedUserException(sprintf('instances of class %s are not supported', $class));
    return $this->loadUserByUsername($user->getUsername());
  }

  public function supportsClass($class) {
    return $this->getEntityName() === $class || is_subclass_of($class, $this->getEntityName());
  }

} 
```

这个类在你正在做的教程后面可用[http://symfony.com/doc/current/cookbook/security/entity_provider.html](http://symfony.com/doc/current/cookbook/security/entity_provider.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:00:53.397

您应该能够使用该`doctrine:generate:entities`命令生成正确的类。[（书中记载。）](http://symfony.com/doc/current/book/doctrine.html#custom-repository-classes)

我认为您的命令应如下所示：

```
php app/console doctrine:generate:entities User 
```

# unit-testing - CruiseControl.net 上 Jetbrains dotCover 的 MsBuild 任务

> ID：10978767
> 
> 赞同：1
> 
> 时间：2012-06-11T10:55:19.817
> 
> 标签：unit-testing, msbuild, cruisecontrol.net, dotcover

[我们正在使用 CruiseControl.net，如果JetBrains dotCover](http://www.jetbrains.com/dotcover/)计算的总测试覆盖率低于某个数字 X ，我会尝试使构建失败。

有为此的 MsBuild 任务吗？我只能找到使用 TeamCity 的示例，而我们不是。:( 生成报告并从中读取覆盖百分比值是我唯一的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:18:19.620

我有一个官方确认 dotCover MsBuild 任务还没有完成，我希望这可以帮助那些没有时间寻找它的人：

> 发件人：支持 - Fedor Buyvol-Kot [mailto:support@jetbrains.com] 发送时间：2012 年 6 月 11 日 17:55 抄送：support@jetbrains.com 主题：回复：[dotCover - 技术支持]
> 
> 你好，
> 
> 此功能已在我们的计划中，但目前尚无对其实施的准确估计。欢迎您在我们的错误跟踪器中监控其状态：http: [//youtrack.jetbrains.com/issue/DCVR-2386](http://youtrack.jetbrains.com/issue/DCVR-2386)
> 
> 问候。

# python - 在 python opencv 中无法访问 GetCaptureProperty 或任何类似函数

> ID：10978768
> 
> 赞同：5
> 
> 时间：2012-06-11T10:55:33.560
> 
> 标签：python, opencv

我在 opencv 2.3 和 2.4 中尝试了很多组合来获取视频的帧数，但没有任何结果。似乎它根本不存在。

```
stream = cv.VideoCapture(avsfilename) #stream.isOpened() returns True, everything's ok
framecount = cv.GetCaptureProperty(stream, CV_CAP_PROP_FRAME_COUNT) #no
framecount = cv.GetCaptureProperty(stream, cv.CV_CAP_PROP_FRAME_COUNT) #no
framecount = stream.get(cv.CV_CAP_PROP_FRAME_COUNT) #no
framecount = stream.get(CV_CAP_PROP_FRAME_COUNT) #no 
```

“模块”对象没有属性“CV_CAP_PROP_FRAME_COUNT”

有人通过类似的东西吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T11:15:28.157

你必须小心你的`cv2`和`cv`进口，这两个工作：

```
import cv2
import cv2.cv as cv

#Using cv2:
stream = cv2.VideoCapture(filename)
print stream.get(cv.CV_CAP_PROP_FRAME_COUNT)

#using cv:
stream = cv.CaptureFromFile(filename)
print cv.GetCaptureProperty(stream, cv.CV_CAP_PROP_FRAME_COUNT) 
```

# batch-file - 批处理文件将文件（name_date）从 FTP 服务器复制到本地目录？

> ID：10978769
> 
> 赞同：0
> 
> 时间：2012-06-11T10:55:34.593
> 
> 标签：batch-file

我想创建一个批处理文件，包括以下功能：

```
Connection to a FTP server
Copying the files from there to a local directory (just today file named: product_yyyymmdd_hour.csv) 
```

到目前为止，我还没有对批处理文件做过那么多，所以如果你能帮助我，那就太好了。我知道有 ftp 命令，并且我知道如何在 ftp 上连接，但不幸的是我不知道如何复制这些文件。当天我必须只复制今天的文件。例如：Product_20120611_1233.csv Product_20120612_1115.csv 等。源文件夹和目标文件夹每天都一样，只是文件名不同。非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T15:34:30.167

如果要批量指示今天的日期，则必须先对其进行格式化。这取决于您在计算机上使用的日期格式。

例如，在意大利格式中，它将是 dd/MM/yyyy，在美国格式中，它将是 MM/dd/yyyy。

意大利语：

```
SET "day=%date:~-10,2%"
SET "month=%date:~-7,2%"
SET "year=%date:~-4%"
SET "dateStamp=%year%%month%%day%" 
```

美国人：

```
SET "day=%date:~-7,2%"
SET "month=%date:~-10,2%"
SET "year=%date:~-4%"
SET "dateStamp=%year%%month%%day%" 
```

完成此操作后，您可以通过几种方式指定文件名，例如

```
SET "fileName=Product_%dateStamp%_*.csv" 
```

现在，您可以通过以下方式进行复制：

```
FOR %%f IN (%yourPath%\%fileName%) DO (
    COPY %%f %whereToCopy%
) 
```

我不知道它在 ftp 脚本中是如何工作的，但您可以随时更改您找到的脚本。

# javascript - 如何解决两个jquery冲突？

> ID：10978770
> 
> 赞同：5
> 
> 时间：2012-06-11T10:55:37.803
> 
> 标签：javascript, jquery, jquery-ui

我有一个页面，其中包含用于窗帘效果的 jquery 和其他用于滑块的页面。我面临的问题是我的两个 jquery 不能一起工作。我该怎么办？

我的示例代码是

```
 <!-- for slider -->
<script src="images/jquery-latest.js" type="text/javascript"></script>
<script src="images/jquery.bxslider2.min.js" type="text/javascript"></script>
<script src="images/scripts.js" type="text/javascript"></script>

    <!-- for curtain -->
<script type="text/javascript" src="js/jquery-1.3.2.js"></script>
<script src="js/jquery.easing.1.3.js" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-11T11:00:38.303

首先，尝试使用[当前的 jQuery 版本（1.7.2）](http://code.jquery.com/jquery-1.7.2.min.js)，看看这两个脚本是否都可以工作。

如果没有，请考虑使用与当前 jQuery 版本兼容的东西——如果需要 jquery 1.3，它很长时间没有更新。

如果你真的需要两个脚本并且都需要不同的 jQuery 版本，那么你需要这样做：

```
<script src=".../jquery-1.3.2.js"></script>
<script src="script-that-needs-132.js"></script>
<script>var jQuery132 = $.noConflict(true);</script>
<script src=".../jquery-1.7.2.js"></script> 
```

要使用旧的 jQuery，然后使用它包装代码，如下所示：

```
(function($){
    // here $ points to the old jQuery
})(jQuery132); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T10:57:00.733

删除其中一个，最好是这个`<script type="text/javascript" src="js/jquery-1.3.2.js"></script>`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T10:58:19.200

您可以使用

```
 <script type="text/javascript" language="javascript">
    var jq = jQuery.noConflict();
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T10:58:01.187

You can't/shouldn't include two different versions of jQuery. Stick to one (the most recent one should be the best choice). If your desired plugin does only support a very ancient version like 1.3 is, then you should choose a more recent one or start fiddling around in the code.

# java - 无法在 eclipse Version: 3.2.1 中查看 Stack Trace 控制台。

> ID：10978775
> 
> 赞同：2
> 
> 时间：2012-06-11T10:55:55.143
> 
> 标签：java, eclipse, stack, stack-trace

如果这是一个非常愚蠢的问题，请帮助我并原谅我。

我无法在 eclipse 中查看 Stack Trace 控制台。我打开了控制台窗口，它出现在窗口的底部。我尝试使用 CVC 控制台的控制台窗口中时髦的“+ 窗口”按钮更改为 Java Stack Trace 控制台，但它仍然坚持使用 CVS 控制台。因此，我无法查看控制台程序的堆栈跟踪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:41:57.683

堆栈跟踪控制台设计用于手动粘贴堆栈跟踪，而不是显示正在运行的程序的堆栈跟踪输出。您需要应用程序的普通控制台（尝试 Ctrl-3，然后键入“控制台 - 常规”）。

此外，Eclipse 3.2.1 很古老，因此您应该尝试升级。

# ms-access - 从宏调用的函数的 VBA 错误处理

> ID：10978777
> 
> 赞同：1
> 
> 时间：2012-06-11T10:56:09.473
> 
> 标签：ms-access, ms-access-2007, vba, ms-access-2010

在访问数据库中，我有一个在启动时调用的小函数，它注册了一个用于生成条形码的软件。

如果未安装该软件，则 Microsoft 会访问运行时错误，因此我想添加一些适当的错误处理，以告知用户导致问题的原因。

此函数在启动时从宏中调用，并且正在使数据库崩溃，而不是错误处理正常工作。

我的错误处理不正确吗？

```
Public Function LicenseTBarCode()
On Error GoTo Err_LicenceTBarCode

Dim TB As New TBarCode10
TB.LicenseMe "<EXPUNGED>", eLicKindSite, 1, "<EXPUNGED>", eLicProd1D
Set TB = Nothing
Exit Function

Err_LicenceTBarCode:
MsgBox "TBarcode Software is not installed. Please contact the database administrator.", vbExclamation, Error
DoCmd.Quit
End Function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T11:38:34.333

更改您的代码以使用后期绑定：

```
Public Function LicenseTBarCode()
On Error GoTo Err_LicenceTBarCode

    Dim TB 
    Set TB = CreateObject("TBarCode10.TBarCode10")
    TB.LicenseMe "<EXPUNGED>", eLicKindSite, 1, "<EXPUNGED>", eLicProd1D
    Set TB = Nothing
    Exit Function

Err_LicenceTBarCode:
    MsgBox "TBarcode Software is not installed. Please contact the database administrator.", vbExclamation, Error
    DoCmd.Quit
End Function 
```

为了使其正常工作，您确实需要对所有 TBarCode 代码使用后期绑定，包括您可能正在使用的任何其他 TBarCode 对象。如果您还不熟悉后期绑定，一开始理解起来可能会有些困难，尤其是在您使用任何使用工厂模式的类时。

使用后期绑定，您将取消选中对 DLL 的引用，然后您的代码需要编译而不会出现错误。使用后期绑定进行开发可能具有挑战性，因为您将无法访问 IntelliSense。最好使用 Early Binding 进行开发，然后稍后将您的代码转换为 Late Binding。

后期绑定丢失的另一件事是在原始对象中定义的任何常量。您必须自己创建这些。根据您需要使用的数量以及您需要在哪里使用它们，创建一个模块来保存这些常量可能是最简单的。你真的只需要在你的代码中实际使用的常量。

```
Global Const eLicKindSingle = 1 'Single license for exactly one computer
Global Const eLicKindSite = 2 'Site license for an arbitrary number of computers within one site (or one facility) at one legal address
Global Const eLicKindDeveloper = 3 'Developer license for redistribution to 3rd party
Global Const eLicKindWeb = 3 'Web-server license 

Global Const eLicProd1D = 32 '(1D codes)
Global Const eLicProd2D = 33 '(2D codes) 
```

或者，您可以只使用常量包含的值。例如：

```
TB.LicenseMe "<EXPUNGED>", 2, 1, "<EXPUNGED>", 32 
```

此外，据我所知，后期绑定不适用于 ActiveX 控件。ActiveX 控件本质上是早期绑定的。

还有另一种方法可以处理这个问题。我使用一个“starter”数据库文件来处理主数据库的一些先决条件。此入门数据库不使用任何引用。它只检查文件系统以查看是否安装了正确的文件。如果不是，它会弹出一个带有正确错误/警告的消息框，然后它要么运行主数据库文件，要么选择不运行它，具体取决于您写入其中的逻辑。这是避免使用后期绑定的一种方法。

# jquery - jquery允许取消提交后提交表单

> ID：10978784
> 
> 赞同：0
> 
> 时间：2012-06-11T10:56:37.900
> 
> 标签：jquery, forms, submission

我有一个 jquery 函数，它控制表单的所有必填字段都已填写，如果其中一个必填字段为空，它将取消提交。

取消表单提交工作正常，问题是当我在提交失败后提交表单时它仍然取消表单提交，当它应该允许提交时，因为所有表单都正确填写，这里是代码：

-Cancel 是一个布尔值，指示是否填写了所有表单字段。

```
 if (cancel) 
    {
        $('#form_login').submit(function () 
        { 
            return false;   
        }); 
    }
    else
    {

        $('#form_login').submit(function () 
        { 
            return true;
        }); 
    }; 
```

我究竟做错了什么 ？？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:00:28.757

您最好从提交方法中调用您的验证代码。例如，一个执行一些验证并返回 true 或 false 的方法。您可以将该值作为提交方法返回值返回。

例如：

```
$('#form_login').submit(function ()  
{  
   return isMyFormValid();    
});

function isMyFormValid(){
  //return true or false depending on some conditions.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:13:26.353

问题是您多次将函数附加到表单的提交事件。第一次，当验证失败时，`return false;`附加该方法，然后每次提交表单时都会调用此函数，即使您稍后附加另一个函数（当验证成功时）。

你想做的是：

```
$('#form_login').submit(function() {
    //define the value of 'cancel' here
    return cancel;
} 
```

如果您已经将函数附加到提交事件并想要覆盖它，则必须首先删除已附加的函数：

```
$('#form_login').off('submit'); 
```

然后附加新功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T11:23:21.197

[试试api](http://api.jquery.com/submit/)的建议怎么样：

```
$('#form_login').submit(function () 
{ 
        if (cancel) {return false;} 
        return true;    
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T11:04:41.437

```
if(cancel) {
   $('#form_login').submit();
} else {
  return false;
} 
```

# java - Android 多币种格式化

> ID：10978785
> 
> 赞同：0
> 
> 时间：2012-06-11T10:56:50.240
> 
> 标签：java, android, enums

我在一个枚举中有几种货币，如下所示：

```
public enum Currencies{USD, LVL, EUR;} 
```

然后是一个条目列表（属于 Item 类），每个条目都有多个（长类型）上述货币之一。现在我想尽可能有效地形成这个数字。

到目前为止我所做的是创建一个函数

```
public String getFormatedSum(){
    NumberFormat mCurrencyFormatter = NumberFormat.getCurrencyInstance();
    mCurrencyFormatter.setCurrency(Currency.getInstance(getCurrency().toString()));
    return mCurrencyFormatter.format(getSum()); 
} 
```

where`getCurrency()`将货币作为特定项目的字符串返回。

现在我知道这可行，但我也怀疑应该有更好的方法来做到这一点。我曾想过在地图中实例化格式化程序，然后检索我需要的格式化程序并进行格式化，但`NumberFormat`该类似乎是静态的。

任何提示，或者我这样做对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:03:43.780

首先，您的 getCurrency 方法也许可以（通过查找或直接返回 a `Currency`（也许它已经这样做了）。

`NumberFormat`不是静态的，但有一个静态工厂方法用于创建实例。您可以将实例保存在`Map`：

```
Map<Currency, NumberFormat> formatters = new HashMap<>();
...

NumberFormat getCurrencyFormatter(Currency currency) {
    NumberFormat result = formatters.get(currency);
    if (result == null) {
        result = NumberFormat.getCurrencyInstance();
        result.setCurrency(currency);
        formatters.put(currency, result);
    }
    return result;
} 
```

# c# - Ionic zip 抛出内存不足异常

> ID：10978786
> 
> 赞同：-2
> 
> 时间：2012-06-11T10:56:56.293
> 
> 标签：c#, windows, logging, zip, utilities

我使用 ionic zip (version-1.9.1.8) 来压缩一些文件..我通常有总和为 2 到 3 GB 的大文件...这个 ionic zip 在我的系统中工作正常，但是当我在另一台用户机器上使用它时（ONSITE )...这个 ionic zip 抛出异常如下。两个系统的配置是相同的。

```
Exception details:
******************
[6/11/2012 01:21:38:812]
 System.OutOfMemoryException: Exception of type 'System.OutOfMemoryException' was thrown.
   at Ionic.Zip.ZipEntry._WriteEntryData(Stream s)
   at Ionic.Zip.ZipEntry.Write(Stream s)
   at Ionic.Zip.ZipFile.Save()
   at Ionic.Zip.ZipFile.Save(String fileName)
   at MyCode.SaveZipFile()

[6/11/2012 01:21:38:828]

System.NullReferenceException: Object reference not set to an instance of an object.
   at Ionic.Zlib.ParallelDeflateOutputStream._Flush(Boolean lastInput)
   at Ionic.Zlib.ParallelDeflateOutputStream.Close()
   at Ionic.Zlib.ParallelDeflateOutputStream.Dispose()
   at Ionic.Zip.ZipFile.Dispose(Boolean disposeManagedResources)
   at Ionic.Zip.ZipFile.Dispose()
   at Mycode.SaveZipFile()
   at Mycode.SaveLogs() 
```

有人可以帮我找到这些问题的原因..？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T17:26:34.983

您需要显示代码。如果您的应用程序正在压缩到内存流中，它将容易受到内存不足的影响。这将是您的应用程序中的问题，而不是库中的问题。

另外 - 我从堆栈跟踪中看到它正在使用并行 deflater。这会以运行时换取内存。如果您有内存问题，您可以禁用并行压缩，并使用更少的内存。

在您的代码中通过以下方式执行此操作：

```
 zip.ParallelDeflateThreshold = -1; 
```

另请参阅有关此功能的文档： http: [//cheeso.members.winisp.net/DotNetZipHelp/html/0988edb5-1d59-2875-8e77-ad195601cbce.htm](http://cheeso.members.winisp.net/DotNetZipHelp/html/0988edb5-1d59-2875-8e77-ad195601cbce.htm)

# java - 如何在java中的类之间共享变量

> ID：10978788
> 
> 赞同：0
> 
> 时间：2012-06-11T10:57:05.653
> 
> 标签：java, android

> **可能重复：**
> [在 Android 中的活动之间传递数据](https://stackoverflow.com/questions/2965109/passing-data-between-activities-in-android)

所以我有两个活动，我需要在第一个活动中保存一个变量，并在第二个活动中使用它。谁能帮我？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T11:03:29.247

使用这样的东西：

```
 Intent intent = new Intent(this, ClassImCalling.class);
    intent.putExtra("variable", myvariable);
    startActivityForResult(intent, int_identifier); 
```

在另一个活动中：

```
 intent = getIntent();
    var=intent.getStringExtra("variable"); 
```

返回调用它的活动（意图与上面的 getIntent() 相同）：

```
 setResult(RESULT_OK, intent);
    finish(); 
```

当您返回第一个活动时：

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == int_identifier) {
        if (resultCode == RESULT_OK) {
            Do suff
        }else if(resultCode == RESULT_CANCELED){
            Action was cancelled :(
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T11:03:26.233

把事情简单化。在一个类中，您在另一个类中设置变量的值，使用该类的实例来获取它。

```
public class Activity1 {       

   private String var;

   public Activity1() {
      setVar("some_value");
   }

   public String getVar() {
      return this.var;
   }

   public void setVar(String var) {
      this.var = var;
   }
}

public class Activity2 {
   public void doSmth() {
      Activity1 a = new Activity1();
      String varValue = a.getVar();

   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T11:01:48.907

第一个活动：

```
 ....
    Intent intent = new Intent(this, SecondActivity.class);
    intent.putExtra(Consts.EXTRA_EDIT_MODE_KEY, 123);
    ....
    intent.putExtra(_some_key_, _some_data_);
    intent.putExtra(_some_key_, _some_data_);
    startActivity(intent); 
```

第二活动：

```
 ..... 
    Intent intent = getIntent();
    int mode = intent.getIntExtra(Consts.EXTRA_EDIT_MODE_KEY, -1);
    ...... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T11:11:52.367

据了解，您的要求是在多个 Activity 类中使​​用变量值。因为它们的意思是它们是 JAVA 类，所以您可以为您的任务使用静态变量。

假设您有这样的课程，

```
public class Activity1 extends Activity{
static String name="abc";
} 
```

如果您想在其他类中使用该名称变量，您可以使用，

```
public class Activity2 extends Activity{
String name2=Activity1.name;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T11:44:52.393

您可以使用 Bundle 对象在 2 个活动之间共享一个变量。这就是我使用它的方式：

(1) 首先，将变量作为额外的变量放入包中。假设您在 FirstActivity 中有变量，并且您想将其发送到 SecondActivity，那么这是放置它的方式（在 FirstActivity 中）：

```
 String variableValue="x";  // it holds some value which you want to pass to SecondActivity.
        Intent secondIntent = new Intent(view.getContext(), SecondActivity.class);
        Bundle bundleObj = new Bundle();
        bundleObj.putString("variableName", variableValue);
        secondIntent.putExtras(bundleObj);
        startActivityForResult(secondIntent, 0); 
```

(2) 这是我们在 SecondActivity 中获取它的方式（在 onCreate() 方法中）：

```
 Bundle extras = getIntent().getExtras();
        String variableValue = extras.getString("variableName");

** Similarly you can pass the integer and other datatyped values as well. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-11T11:19:56.533

如果我们使用共享偏好，我们可以在任何活动中使用这个值。

这是 ManageSharesPrefs 中的代码：

```
SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
        SharedPreferences.Editor prefsEditor = myPrefs.edit();
        prefsEditor.putString(MY_NAME, "Sai");
        prefsEditor.putString(MY_WALLPAPER, "f664.PNG");
        prefsEditor.commit(); 
```

并将值检索为

```
SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
        String prefName = myPrefs.getString(MY_NAME, "nothing");
        String wallPaper = myPrefs.getString(MY_WALLPAPER, null); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-11T11:13:28.143

将变量设为静态，因为它由所有类共享。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-11T11:01:39.273

我猜这是一种方法：

```
class Class1 {
   private int someValue = 0
   void doSomething(Class2 anotherObj) {
       this.someValue = 1;
       anotherObj.setValue(this.someValue);
   }
} 
```

还有很多其他方法：）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-11T11:03:02.757

您可以使用 intent.putExtra(yourData); 将第一个活动数据传递给第二个活动；

# python - Python：在python中创建子进程的子进程的问题

> ID：10978794
> 
> 赞同：1
> 
> 时间：2012-06-11T10:57:46.677
> 
> 标签：python, queue, subprocess, multiprocessing

我在 python 中有两个文件，proc1.py 和 proc2.py，两者都是一个生产者，多个消费者场景的实现。proc1 主要创建子进程。在每个子进程中，它调用 proc2。proc2 在其代码中也创建了子进程。从命令行执行时，proc2.py 可以正常工作。但是当从 proc1 调用时，我得到了错误

```
Traceback (most recent call last):
  File "./proc2.py", line 20, in proc2WorkerFunc
    elem = q.get(block = False)
  File "/usr/lib64/python2.6/multiprocessing/queues.py", line 103, in get
    if not self._poll(block and (deadline-time.time()) or 0.0):
IOError: [Errno 9] Bad file descriptor 
```

我曾尝试在网上搜索，但到目前为止还没有任何线索。关于我做错了什么的任何想法？Proc1.py 是

```
def workerFunc(q):                                                                   
  while True:                                                                        
    try:
      elem = q.get(block = False)                                                    
      print elem
      subprocess.call(["./proc2.py"])                                                
      time.sleep(0.5)
    except Queue.Empty:
      print "Queue is empty"                                                         
      return                                                                         
    except:
      print "Exception happened"
      tb = traceback.format_exc()                                                    
      print tb                                                                       
      return                                                                         

if __name__ == '__main__':
  q = multiprocessing.Queue()                                                        
  for i  in range(1):                                                                
    q.put('Hello')                                                                   

  num_workers = 1                                                                    
  workers = []
  for i in range(num_workers):
    qWorker = multiprocessing.Process(target=workerFunc, args=(q,))                  
    qWorker.start()
    workers.append(qWorker)                                                          

  for worker in workers:                                                             
    worker.join()
  print "proc 1 has finished" 
```

proc2.py：

```
def proc2WorkerFunc(q):
  while True:
    try:
      print q.qsize()
      elem = q.get(block = False)
      print elem
      time.sleep(0.5)
    except Queue.Empty:
      print "Queue is empty"
      return
    except:
      print "Exception happened"
      tb = traceback.format_exc()
      print tb
      return

if __name__ == '__main__':
  proc2Q = multiprocessing.Queue()
  for i  in range(100):
    proc2Q.put('World')

  num_workers = 10
  workers = []
  for i in range(num_workers):
    qWorker = multiprocessing.Process(target=proc2WorkerFunc, args=(proc2Q,))
    qWorker.start()
    workers.append(qWorker)

  for worker in workers:
    worker.join() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:25:28.480

不确定，但是由于您似乎在 linux 机器上运行 Python 2.6，并且代码对我有用（使用 Windows 机器和 Python 2.7.3），因此您可能会遇到[这个错误](http://bugs.python.org/issue5155)。

顺便说一句，您使用的是哪个 python 版本？

# objective-c - 从 NSString 中删除 "\n"

> ID：10978795
> 
> 赞同：12
> 
> 时间：2012-06-11T10:57:48.357
> 
> 标签：objective-c, nsstring

我的 json 正在返回这个：

> 地址=》城市路129号
> 
> \n肖尔迪奇
> 
> \n伦敦 EC1V 1JB";

我想删除“\n”。因为我想在一行中显示它。

我试过以下：

```
NSString * newReplacedString = [string stringByReplacingOccurrencesOfString:@"\n" withString:@""];

NSString * newReplacedString = [string stringByTrimmingCharactersInSet:[NSCharacterSet newlineCharacterSet]]; 
```

两者结果相同：

**结果**

> 密歇根大道北 900 号
> 
> 芝加哥
> 
> 伊利诺伊州 60611

如果我试过这个

```
NSString *s = [string stringByReplacingOccurrencesOfString:@"\n" withString:@"\\n"]; 
```

**结果**

> 密歇根大道北 900 号
> 
> \n芝加哥
> 
> \n伊利诺伊州 60611

请建议。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-11T11:06:09.680

试试看 ：

```
NSString *address = @"129 City Road \nShoreditch \nLondon EC1V 1JB";    
address = [address stringByReplacingOccurrencesOfString:@"\n" withString:@""];
address = [address stringByTrimmingCharactersInSet:[NSCharacterSet newlineCharacterSet]]; 
```

这有效，我得到了如下输出：

```
129 City Road Shoreditch London EC1V 1JB 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-11T11:11:24.273

看起来 the`\n`在你的字符串中是一个字面意思而不是换行符，那么你需要转义`\`，比如`\\n`：

```
NSString * newReplacedString = [string stringByReplacingOccurrencesOfString:@"\\n" withString:@""];

NSString * newReplacedString = [string stringByTrimmingCharactersInSet:[NSCharacterSet newlineCharacterSet]]; 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-05-13T10:17:10.700

```
NSString *newString = [str stringByReplacingOccurrencesOfString:@"\r\n" withString:@""]; 
```

对于那些可能正在寻找答案的人。尝试上述一次。它对我有用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-11T11:17:59.433

Priyanka Use Following code to remove new lines.

```
-(NSString *)stringByRemovingNewLinesAndWhitespace {

// Pool
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

// Strange New lines:
//  Next Line, U+0085
//  Form Feed, U+000C
//  Line Separator, U+2028
//  Paragraph Separator, U+2029

// Scanner
NSScanner *scanner = [[NSScanner alloc] initWithString:self];
[scanner setCharactersToBeSkipped:nil];
NSMutableString *result = [[NSMutableString alloc] init];
NSString *temp;
NSCharacterSet *newLineAndWhitespaceCharacters = [NSCharacterSet characterSetWithCharactersInString:
                                                  [NSString stringWithFormat:@" \t\n\r%C%C%C%C", 0x0085, 0x000C, 0x2028, 0x2029]];
// Scan
while (![scanner isAtEnd]) {

    // Get non new line or whitespace characters
    temp = nil;
    [scanner scanUpToCharactersFromSet:newLineAndWhitespaceCharacters intoString:&temp];
    if (temp) [result appendString:temp];

    // Replace with a space
    if ([scanner scanCharactersFromSet:newLineAndWhitespaceCharacters intoString:NULL]) {
        if (result.length > 0 && ![scanner isAtEnd]) // Dont append space to beginning or end of result
            [result appendString:@" "];
    }

}

// Cleanup
[scanner release];

// Return
NSString *retString = [[NSString stringWithString:result] retain];
[result release];

// Drain
[pool drain];

// Return
return [retString autorelease]; 
```

}

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-24T07:35:12.210

```
NSString *data= [str stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-11T11:02:10.050

要删除“\n”，请执行以下操作

```
//Str contains your json value
NSString *str;
NSString *newString = [str stringByReplacingOccurrencesOfString:@"\n" withString:@""]; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-11T11:11:47.747

```
NSString *newString = [[myString componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]] componentsJoinedByString:@" "]; 
```

[重复](https://stackoverflow.com/questions/1807803/removing-new-line-characters-from-nsstring)。在此处检查答案。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-11T11:01:44.280

这对我有用：

```
NSString *s = [@"900 N Michigan \nAvenue \nChicago \nIllinois 60611" stringByReplacingOccurrencesOfString:@"\n" withString:@""];
NSLog(@"%@", s); //900 N Michigan Avenue Chicago Illinois 60611 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-11T11:04:49.957

它的工作

```
NSString *address = @"129 City Road"
    "\nShoreditch"
    "\nLondon EC1V 1JB";

    address = [address stringByReplacingOccurrencesOfString:@"\n" withString:@""];
    NSLog(@"address--%@",address); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-11T11:10:43.670

你 `[string stringByReplacingOccurrencesOfString:@"\n" withString:@""]`说的不行。。

你试过“\r”

```
 [string stringByReplacingOccurrencesOfString:@"\r" withString:@""] 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-07-08T00:24:29.863

在 Swift 2.2 中：让 newWord = address.stringByReplacingOccurrencesOfString("\n", withString: "")

# php - 如何使用标头定位到错误 GET 值的默认位置

> ID：10978798
> 
> 赞同：1
> 
> 时间：2012-06-11T10:57:51.317
> 
> 标签：php, header

我试图在接收到 GET 值时将我的 php 标头定位到特定位置，如果该值不正确，它将定位到默认位置，如 home.php

这是我到目前为止所做的

```
<?php
// Check which page is queried

if(isset($_GET['page'])){
    $got = $_GET['page'];
}
else {
    $got = 'home';
}

// Now goto that location

if(header('Location: '.$got.'.php')){
    header('Location: '.$got.'.php');
}
else {
    header('Location: home.php');
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T11:01:29.440

您可能正在寻找[file_exists](http://php.net/file_exists) () 函数。

你会做这样的事情；

```
$got = 'home';
if(isset($_GET['page']))
{
  if(file_exists($_GET['page'].".php"))
  {
    $got = $_GET['page'];
  }

}

header('Location: '.$got.'.php');
exit; 
```

**编辑** 您最好将允许用户查看的页面列入白名单：

```
$got = 'home';
$whitelist = array('contact', 'about', 'blog', ...); // could come from your database
if(isset($_GET['page']))
{
  if(file_exists($_GET['page'].".php") && in_array($_GET['page'], $whitelist))
  {
    $got = $_GET['page'];
  }

}

header('Location: '.$got.'.php');
exit; 
```

这可确保只有您允许的视图才能被访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T11:00:32.717

```
if (file_exists( $got . '.php') {
  header('Location: '.$got.'.php');  
} else {
  header('Location: home.php');
} 
```

但最好创建一个可用页面的白名单，因为这样的代码容易受到标头注入的攻击

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T11:02:29.987

检查文件是否存在

```
if (file_exists($got . ".php") 
{
    header('Location: ...');
    exit;
}
else
{
    header('Location: ...');
    exit;
} 
```

显然，您需要确保之前没有发送过标头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T11:09:24.940

试试这个，它会在您白名单（动态）的目录中搜索您的所有 php 页面，然后将其与 get 请求进行比较，以查看该页面是否在您的 pages 目录中。如果是，那么它会加载它，否则它会加载你的 home.php

```
$page = array();
$it = DirectoryIterator($dir);

foreach ($it as $page) {
    $pages[] = $page;
}

if (isset($_GET['page']) && in_array($_GET['page'], $pages)
    header("Location: " . $pages[$_GET] . ".php"); // or require_once $page . '.php';
else
    header("Location: home.php"); // or require_once "home.php"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T11:00:59.943

也许您必须使用[file_exists](http://ua.php.net/manual/en/function.file-exists.php)？

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-11T11:02:22.703

使用[curl](http://www.php.net/manual/en/book.curl.php)检查请求是否返回 HTTP 200

```
$http = curl_init($url);
// do your curl thing here
$result = curl_exec($http);
$http_status = curl_getinfo($http, CURLINFO_HTTP_CODE);
if($http_status != 200)
{
    $url = "/home.php";
}
header('Location: '.$url); 
```

# wordpress - Wordpress 选择页面

> ID：10978800
> 
> 赞同：0
> 
> 时间：2012-06-11T10:58:12.840
> 
> 标签：wordpress

我正在尝试加载特定于页面的内容。我知道使用`<?php if(is_front_page() ) : ?>`的是首页我将如何选择 /teams/ 或 /groups/ 之类的页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:02:27.870

```
<?php if(is_page('teams') ) : ?> 
```

或者

```
<?php if(is_page('teams','groups') ) : ?> 
```

查看更多： [http ://codex.wordpress.org/Conditional_Tags#A_PAGE_Page](http://codex.wordpress.org/Conditional_Tags#A_PAGE_Page)

# mysql - 有没有人找到一种将 BSON ObjectId 值存储在 SQL 数据库中的有效方法？

> ID：10978807
> 
> 赞同：3
> 
> 时间：2012-06-11T10:58:25.143
> 
> 标签：mysql, mongodb, migration, bson

我们正在将一些数据从 MySQL 迁移到 Mongo，并且一直在向我们的一些数据库表中添加额外字段，以获取迁移数据对象的[ObjectId](http://www.mongodb.org/display/DOCS/Object+IDs#ObjectIDs-TheBSONObjectIdDatatype)值。

目前我们将它们存储为 varchar(24) latin1_general_ci 可以正常工作。

然而，为了有效的存储/索引，我们可能应该转换回 12 字节的二进制值。不幸的是，MySQL 似乎只[支持最多 8 个字节的本机整数](http://dev.mysql.com/doc/refman/5.5/en/storage-requirements.html)。还有另一种选择 - 也许是二进制？

**更新**：我正在从 MySQL 迁移，但目前只有某些表。所以我首先在某个表的 Mongo 中复制对象。然后我回到 MySQL 中剩下的任何其他表，这些表具有对旧 MySQL 表 ID 的外键引用，并添加一个新的引用字段来存储 Mongo 对象的 ID。然后我将删除原始参考字段 BIGINT。

**更新 2：**我提出这个问题的原因是，在我们移动其他数据之前可能还要再过 12 个月（或永远不会），所以在此之前它会对实时 Web 应用程序产生性能影响。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T11:52:33.317

12 字节无符号整数的范围是`0..79228162514264337593543950335`（最多 29 位）；根据文档（您引用的相同 URL），`DECIMAL`/`NUMERIC`列将每组九个 base10 数字打包成四个字节（`floor(29 / 9) * 4 = 3 * 4 = 12`前 27 个数字加起来字节），其余 2 个数字占用一个额外字节，最多 13 个字节列的存储空间`DECIMAL(29)`。

或者，您可以将它们存储为`BINARY(12)`.

# gwt - （浏览器）弹出窗口中的 Gwt > openid

> ID：10978808
> 
> 赞同：1
> 
> 时间：2012-06-11T10:58:26.307
> 
> 标签：gwt, openid

目前，我有一个基于 GWT 的应用程序“/app.htm”

它显示一个 openId 登录按钮，该按钮执行

> `Window.Location.assign("/openidServlet?return=/app.htm")`

这个 servlet 准备了一些东西来调用 google 的 openid 页面，然后返回返回 url。这是可行的，但 app.html 也会显示谷歌地图，并且在重新加载时很重。

我想在新窗口（一种弹出窗口）中执行此操作以避免重新加载“app.htm”

在一个完美的世界中，当 openid 窗口关闭时，它会向 app.htm 发送一些内容以说“准备好，再次进行 loginRpc 查询”

我已经尝试过这样做，`Frame`但我得到了

> `Refused to display document because display forbidden by X-Frame-Options`

使用 gwt2.4 和 NO gae

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:18:38.000

您想使用[OpenID UI Extension](http://openid.net/2009/05/14/google-and-janrain-release-support-for-the-openid-user-interface-extension/)。JavaScript 中有可用的[示例代码](http://code.google.com/p/step2/source/browse/code/java/trunk/example-consumer/src/main/webapp/popuplib.js)，应该相对容易移植到 GWT（或者更容易包装，使用 JSNI）。

基本上，它用于`window.open()`在弹出窗口中启动 OpenID 签名过程，并监视窗口对象`window.open()`（`com.google.gwt.user.client.Window#open`由`return_to`如果您愿意，页面可以包含一个自动关闭窗口的脚本）。
当弹出窗口关闭时，您可以重试您的请求，如果您检测到用户仍未登录，则可能会再次启动签名过程。

他们似乎没有使用它，但我想你可以从`return_to`页面使用（并通过 JSNI`window.opener`公开一些*回调方法：* [https ://developers.google.com/web-toolkit/doc/latest /DevGuideCodingBasicsJSNI#calling](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI#calling) )

# plsql - plsql developer 9.0 插件

> ID：10978810
> 
> 赞同：0
> 
> 时间：2012-06-11T10:58:33.527
> 
> 标签：plsql, formatting, plsqldeveloper

我的工作是在 PLSQL Developer 9.0.6.1665 中编写 plsql 代码。我必须遵循许多格式标准，这些标准无法使用 PL/SQL 美化器选项来完成。

然后我计划为我的自定义格式编写一个插件。在插件中，我打算在按下空格或回车键时抓取事件，以便当我键入“包”和命中空格时，它将更改为 PACKAGE。同样，当我写“插入表名”然后按回车键时，光标位置将设置在“o”以下。但似乎plsql开发人员没有提供事件函数来获取按键事件。我该如何解决这个问题？

任何其他关于自定义代码格式的建议（除了 PL/SQL Beautifier 提供的）也将受到欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T15:07:19.187

你可能想研究一下 Autohotkey——它不仅可以做你想做的事情，而且可以提示输入参数等，如果你愿意，你还可以用它编写完整的程序。它的好处是它可以在任何程序中使用，而不仅仅是 PL/SQL Developer。

[http://www.autohotkey.com/](http://www.autohotkey.com/)

# python - 'in' 运算符与 boost::python

> ID：10978814
> 
> 赞同：0
> 
> 时间：2012-06-11T10:58:58.307
> 
> 标签：python, dictionary, operators, boost-python

我有一个包含 , 方法（以及和）的类`.def`，`__getitem__`其`__setitem__`行为`keys`类似于`items`字典，其中键是字符串。

但是，`in`运算符的行为与预期不同：

```
>>> myObject=MyClass()
>>> 'abc' in myObject.keys()
False
>>> 'abc' in myObject
ArgumentError: Python argument types in
    MyClass.__getitem__(MyClass, int)
did not match the C++ signature:
    __getitem__(MyClass {lvalue}, std::string) 
```

当我使用密钥时，为什么 python 试图用 调用`__getitem__`？`int``str`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:24:37.703

看起来

```
'abc' in myObject 
```

被评估为：

```
for i in myObject:
    if myObject[i] == 'abc':
        return true 
```

哪里`i`是整数。

尝试实现`__contains__(self, value)`魔术方法。

# iphone - 如何在iphone应用程序中为pdf中的文本提供空间

> ID：10978816
> 
> 赞同：0
> 
> 时间：2012-06-11T10:59:16.557
> 
> 标签：iphone, xcode

我在 iphone 应用程序中创建了一个 pdf 我想给一些空间然后显示文本

像

现在文本看起来像这样

这是第一次测试

我希望上面的文字应该从这里开始

```
 This is the first test 
```

那么如何在下面制作这个 spce 是文本显示的代码

```
 CGRect renderingRectNext = CGRectMake(kBorderInset + kMarginInset, kBorderInset + kMarginInset + 70.0, pageSize.width - 2*kBorderInset - 2*kMarginInset, stringSizeNext.height);

 [textToDrawTwo drawInRect:renderingRectNext 
                 withFont:fontNext
            lineBreakMode:UILineBreakModeWordWrap
                alignment:UITextAlignmentLeft]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:11:01.943

不太确定我是否理解你的问题，从我收集到的你想要`skip lines`在呈现的文本中。如果您添加`\n`到您的字符串，它将跳到下一行。

```
textToDrawTwo = @"\n\nThis is the first test"; 
```

bove 将在实际文本之前生成一个带有 2 行跳过的字符串。

希望这可以帮助。

**编辑：**此外，如果你不想重新创建一个`tab`类似的句子，在文本行之前有空格，你会做这样的事情。

```
textToDrawTwo = [NSString stringWithFormat:@"    %@",textToDrawTwo]; 
```

# oracle - Oracle UCM - 创建自定义服务

> ID：10978820
> 
> 赞同：0
> 
> 时间：2012-06-11T10:59:40.497
> 
> 标签：oracle, oracle11g, oracle-ucm

我有一个要求，我需要将一些内容（文档）合并到一个文档中并将其发送回前端 ADF 应用程序供用户下载。我正在尝试创建一个自定义服务，它将接受数组列表形式的参数 - 类似于 ["Doc,ContentID1,ContentID 2","Document,ContentID3,ContentID4"], DOc 和 Document 将是合并文档的名称和 ContentID1、ContentID2 将是要合并的内容并形成一个新文档“Doc”，而 ContentID3、ContentID4 将被合并并形成一个新文档“Document”，这两个文档都将被发送回应用程序。

如果我创建一个自定义服务，我可以在哪里定义它将接受什么类型的参数。任何帮助/指针表示赞赏。TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T17:04:28.007

服务的参数类似于标准的 html GET 参数，即它们只是字符串（所以答案是否定的，你不能“定义它将接受什么类型的参数”——它们*总是*字符串）。一旦服务被调用，所有参数都在 m_binder 中可用。

在您的情况下，调用如下：

```
http://<ucm_host>/<ucm_instance>/idcplg?IdcService=MEGE_DOCUMENTS&merge1=docName1,contentId1,contentId2&merge2=docName2,contentId1,contentId2 
```

将使用 m_binder 中的 2 个参数（merge1 和 merge2）运行自定义服务 MEGE_DOCUMENTS。你可以像这样得到它们：

```
String parameter1 = m_binder.getLocal("merge1");
String parameter2 = m_binder.getLocal("merge2"); 
```

之后 parameter1 将具有值“ *docName1,contentId1,contentId2* ”和 parameter2 -“ *docName2,contentId1,contentId2* ”

* * *

因此，如果该服务应该独立运行（例如，从浏览器/作为单独的服务）-恐怕您将不得不遍历参数。例如，像这样（我知道这很丑，但在你的情况下你只能这样做）：

```
Map<String, String> params = new HashMap<String,String>(); 
String prefix = "merge"; 
int index = 1; 
boolean hasMoreParams = true; 

while(hasMoreParams) { 
    String paramName = prefix + index;
    if(m_binder.m_localData.containsKey(paramName)) {
        String paramValue = m_binder.getLocal(paramName); 
        params.put(paramName, paramValue); 
        index++; 
    } else { 
        hasMoreParams = false; 
    } 
} 
```

* * *

如果您的服务将被其他服务/过滤器使用（即仅从 java 代码调用*）*，您可以在服务调用之前将任何 java 对象（例如 HashMap）放入活页夹的本地数据中，然后使用它：

```
m_binder.m_localData.put(<Object>, <Object>); 
```

不要将 m_localData 与 m_binder.putLocal() 混淆。m_localData 是一个属性变量（HashTable 的扩展）。putLocal() 是一种只有一个 String 参数的方法。

# asp.net - 'Microsoft.PointOfService.Management.Explorer' 的类型初始化程序引发异常

> ID：10978821
> 
> 赞同：0
> 
> 时间：2012-06-11T10:59:50.110
> 
> 标签：asp.net, c#-4.0

我正在创建一个将在本地计算机上运行的 Web 应用程序。我正在尝试在打印按钮上编写代码。

初始化 new`PosExplorer()`时出现错误：

> 'Microsoft.PointOfService.Management.Explorer' 的类型初始化程序引发了异常。”。
> 
> 在内部异常中：“此方法显式使用 CAS 策略，该策略已被 .NET Framework 淘汰。出于兼容性原因，为了启用 CAS 策略，请使用 NetFx40_LegacySecurityPolicy 配置开关。”

我已经为 .net 1.12 安装了 microsoft POS，并且还尝试 `NetFx40_LegacySecurityPolicy enabled="true"`在文件中使用，但它们都没有解决我的问题。`web.config``devenv.exe.config`

我正在使用vs 2010。

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T12:38:40.317

通过添加解决了该问题

```
<runtime>
<NetFx40_LegacySecurityPolicy enabled="true"/> 
```

进入路径 C:\Program Files\Common Files\microsoft shared\DevServer\10.0\WebDev.WebServer40.exe

并重启开发环境。谢谢

# cocoa - 选择时更改了 NSTextFieldCell 的文本属性

> ID：10978822
> 
> 赞同：1
> 
> 时间：2012-06-11T10:59:50.280
> 
> 标签：cocoa, nstextfieldcell, fieldeditor

我有一个表格视图，在该表格视图上选择一行的一列将调用重写方法

```
- (void)selectWithFrame:(NSRect)inCellFrame inView:(NSView *)inControlView editor:(NSText *)textObj delegate:(id)anObject start:(NSInteger)selStart length:(NSInteger)selLength {
  // here do some text positioning
         [super selectWithFrame:inCellFrame inView:inControlView editor:textObj delegate:anObject start:selStart length:selLength];
} 
```

我还返回单元格的字段编辑器，如下所示：

```
- (NSTextView *)fieldEditorForView:(NSView *)inControlView {
   MYTextView* fieldEditor = [[[MYTextView alloc] initWithFrame:NSZeroRect] autorelease];
   return fieldEditor;
} 
```

选择单元格时，单元格内的文本会更改其属性。就像，字体大小、字体、字体样式等会相应地发生变化，当文本处于选择模式时，我似乎无法控制它。即使在选择之后我也不想更改其字体属性如何避免文本属性的这种更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:57:06.217

调用`-[super selectWithFrame:...]`方法后，将反映文本属性的更改。解决方案如下：

```
- (void)selectWithFrame:(NSRect)inCellFrame
                 inView:(NSView *)inControlView
                 editor:(NSText *)textObj
               delegate:(id)anObject
                  start:(NSInteger)selStart
                 length:(NSInteger)selLength {
    // here do some text positioning

    [super selectWithFrame:inCellFrame
                    inView:inControlView
                    editor:textObj
                  delegate:anObject
                     start:selStart
                    length:selLength];

    NSMutableAttributedString* text = [textObj textStorage];

    NSMutableParagraphStyle *alignmentStyle = [[NSParagraphStyle defaultParagraphStyle] autorelease];
    [alignmentStyle setAlignment:NSLeftTextAlignment];

    NSDictionary* attributes = [NSMutableDictionary dictionary];
    [attributes setValue:[NSFont boldSystemFontOfSize:[NSFont systemFontSize]] forKey:NSFontAttributeName];
    [attributes setValue:leftAlignmentStyle forKey:NSParagraphStyleAttributeName];

    [text setAttributes:attributes range:NSMakeRange(0, [text length])];
} 
```

# javascript - 为什么 setSelectionRange 不能在 android 2.3 平台浏览器上运行

> ID：10978825
> 
> 赞同：2
> 
> 时间：2012-06-11T11:00:09.257
> 
> 标签：javascript, android

代码就像[这个jsfiddle](http://jsfiddle.net/nicaia/wJVx9/4/)
代码在桌面浏览器上工作正常。
但在 android 2.2 或 2.3 浏览器中它有一些错误。
首先，您使用 setSelectionRange 设置选择，您可以检查 selectionStart 和 selectionEnd ，它看起来工作正常。
但是当您检查 selectionStart 或 selectionEnd 时，它看起来好像从未设置过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T16:10:59.587

将较旧的 android 浏览器的 setSelectionRange 包装在一个间隔为 0 的 setTimeout 中应该可以工作。但是它似乎不适用于 Android 3 或更高版本。

请参见此处：[setSelectionRange 解决方法不适用于 android 4.0.3](https://stackoverflow.com/questions/12009015/setselectionrange-workaround-doesnt-work-for-android-4-0-3)

高温高压

# javascript - javascript 代码首先使用 setTimeout 工作，但随后崩溃或不起作用？

> ID：10978826
> 
> 赞同：4
> 
> 时间：2012-06-11T11:00:11.080
> 
> 标签：javascript, ajax, facebook, api, settimeout

我的代码在最初的几分钟内工作，然后我的页面崩溃或之后它不起作用 - 它有时还会说我的内容应该在哪里“未定义”，我的代码有什么问题？

```
$(document).ready(function(){
    test();
});

function test(){
    $.getJSON("http://graph.facebook.com/http://xzenweb.co.uk?callback=?", 
         function(data) {
         var name = data["shares"];
            var dataString = 'shares='+name;

            $.ajax({
                type: "POST",
                url: "index.php",
                data: dataString,
                cache: false,

                success: function(html)
                {
                $("#content").html(html);
                }
            });
            return false;  
         }); 
    setTimeout("test()",5000);
 } 
```

php代码：

```
if(isset($_POST["shares"])) {
    echo $_POST["shares"];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:44:09.663

或者，使用 .done、.fail 和 .always 可能是个好主意。并在 .always 中执行 setTimeout（无论请求是成功 - 完成，还是错误 - 失败。）

```
$(document).ready(function(){
  test();
});

function test(){
  $.getJSON("http://graph.facebook.com/http://xzenweb.co.uk?callback=?", 
     function(data) {
       var name = data["shares"];
       var dataString = 'shares='+name;
       $.ajax({
         type: "POST",
         url: "index.php",
         data: dataString,
         cache: false
      })
      .done(function(html) { $("#content").html(html); })
      .always(function() { setTimeout(test,5000); })
   }); 
 } 
```

或者在 ajax 内部，您可以使用 complete 设置超时（以确保即使发生错误也会调用它），如下所示：

```
$.ajax({
         type: "POST",
         url: "index.php",
         data: dataString,
         cache: false,
         success: function(html) {
           $("#content").html(html);
         },
         complete: function() {
           setTimeout(test,5000);
         }
      }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:20:10.543

试试这个 - 注意我只在成功运行后调用超时：

另请注意，您可能会遇到允许的通话次数限制

```
$(document).ready(function(){
  test();
});

function test(){
  $.getJSON("http://graph.facebook.com/http://xzenweb.co.uk?callback=?", 
     function(data) {
       var name = data["shares"];
       var dataString = 'shares='+name;
       $.ajax({
         type: "POST",
         url: "index.php",
         data: dataString,
         cache: false,
         success: function(html) {
           $("#content").html(html);
           setTimeout(test,5000);
         }
      });
   }); 
 } 
```

* * *

这是对 json 循环的测试，直到数量更改或 10 次调用（因为用户可能已经共享）

```
<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf8-8">
  <title></title>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
  <script>
  var savedData ="";
  var cnt = 10;
  $(document).ready(function(){
  test();
});

function test(){
  $.getJSON("http://graph.facebook.com/http://xzenweb.co.uk?callback=?", 
     function(data) {
       var shares = data["shares"];
// change this line to 
// $("#content").html(shares);
// when you are happy
       $("#content").html(cnt + ":"+shares+" - "+new Date());
       if (cnt > 0) {
         if (savedData == "" || savedData == shares ) {
           setTimeout(test,1000);
         }
       }
       savedData = shares;
       cnt--
  });
}

  </script>
  </head>
  <body>
<div id="content"></div>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T11:49:49.213

这是我从上面的评论中建议的代码。

```
var timeout; // create a variable named `timeout` assign nothing to it.

$(document).ready(function(){ // I really don't see the point in $(document).ready, if you include your code in the body of the document this should not be needed.
    test();
});

function test(){
    $.getJSON("http://graph.facebook.com/http://xzenweb.co.uk?callback=?", 
         function(data) {
         var name = data["shares"];
            var dataString = 'shares='+name;

            $.ajax({
                type: "POST",
                url: "index.php",
                data: dataString,
                cache: false,

                success: function(html)
                {
                    $("#content").html(html);
                },
                complete: function(xhr, status) { // I run after success and error callbacks have fired.
                   clearTimeout(timeout); // I clear any timeouts assigned to timeout variable. (these are denoted with an integer ID)
                   timeout = setTimeout(test , 5000); // knowing there is no longer a timeout waiting to fire, I can re-assign a timeout to the variable.
                }
            });
            return false;  
         }); 
} 
```

我已经对代码进行了更多评论，以帮助澄清正在发生的事情。

可以在[此处](http://api.jquery.com/jQuery.ajax/)
阅读有关 jQuery.ajax 的更多信息 您还应该在此处阅读 setTimeout 的[机制](https://developer.mozilla.org/en/DOM/window.setTimeout)

# backbone.js - 使用 Twitter Bootstrap 和 Backbone.js 构建的网格

> ID：10978829
> 
> 赞同：7
> 
> 时间：2012-06-11T11:00:17.433
> 
> 标签：backbone.js, twitter-bootstrap

是否有使用 Twitter Bootstrap（表格）和 Backbone.js 构建的简单模块化网格，提供 ajax 加载、排序、分页和内联编辑等功能？

到目前为止，我找到了一些解决方案，但没有一个符合这个要求：- [http://datatables.net/media/blog/bootstrap_2/](http://datatables.net/media/blog/bootstrap_2/) -> Twitter Bootstrap & jQuery DataTables。我不喜欢这样，因为所有的网格逻辑（用户界面/模型）都已经实现到一个大的、紧密耦合的文件（jquery.dataTables.js）中 - [http://teleological.github.com/slickback/](http://teleological.github.com/slickback/) -> SlickGrid （jQuery 支持的数据网格）和主干。我也不喜欢这个，因为首先它使用了一个抽象层来与 Backbone (slickback.js) 集成，其次，ui 混合在 Slickback 和 SlickGrid 之间，并且不能轻易地适应 Twitter Boostrap 表。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-11T13:57:06.407

找到了 :) 它叫做 Recline.js [http://reclinejs.com](http://reclinejs.com)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-05T16:55:34.743

在骨干网和引导程序上尝试[bbGrid 。](https://github.com/direct-fuel-injection/bbGrid)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-30T14:01:38.213

[Fuel UX](http://exacttarget.github.com/fuelux/#datagrid)提供了一个简单的引导风格的数据网格。数据存储机制非常简单，如果需要，您可以使用主干实现它。我希望它对你有帮助。

# python - 在 Python 3 中比较字符串

> ID：10978832
> 
> 赞同：-1
> 
> 时间：2012-06-11T11:00:29.990
> 
> 标签：python, parsing, semantics, repeat

我正在编写这个 Python 小程序，它将在 www.fmylife.com 网站上获得新帖子，我希望这个程序能够打印这些新帖子。即使我刚刚开始，这也是一项简单的任务，但由于某种原因，我无法让代码停止打印同一篇文章。

```
import urllib.request,time

def getFml():
    rawfml = urllib.request.urlopen("http://www.fmylife.com")
    refml = rawfml.read()
    fml = refml.decode("utf8")
    rawfml.close()
    return fml
def parseFml(fml):
    fml=fml.split('Today,')
    fml=fml[1]
    for char in fml:
        if char in '0123456789<>/="#()-;:"\',':
            fml=fml.replace(char,'')
    fml=fml.split('FMLapdiv')
    fml=fml[0]
    fml=fml.split('aa')
    fml=''.join(fml)
    return fml
    listy=   ['date','left_parta','votej','idvotea','onclickvote','jTipa','comments','right_partp','fmllink','clear','post','hrefwork','class','dyn','javascript','div','classright_partp','hrefmiscellaneous','classdyncomments''div','article','idpa','classclear','classpost','hreflove','classfmlling','FMLap','classdate','classleft_parta','id_','nameresume','classjTipa','span','classdyn-commentsspan','classright_partpspan','classdyn-vote-j','idcotea','hrefjavascript;:','classfmllink','href']
for x in range(len(listy)):
    fml=fml.replace(listy[x],'')
    return fml
oldfml=''
count=0
while True:
    fml=getFml()
    fml=parseFml(fml)
    count=count+1
    if count>1:
        oldfml=fml

    if oldfml == fml:
        time.sleep(300)
    else:
        print('Today,'+fml)
        time.sleep(300) 
```

我的预期输出是获取帖子（我做了）并打印它。这很好用。唯一的问题是我只希望它打印一次帖子，当它定期在网站上检查时，它会打印多次，我不知道为什么。提前感谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:32:57.570

在这部分代码中：

```
while True:
    fml=getFml()
    fml=parseFml(fml)
    count=count+1
    if count>1:
        oldfml=fml
    if oldfml == fml:
        ... 
```

在检查它们的相等性`oldfml=fml` **之前**分配。因此，它们**总是**相等的。

我建议进行以下修复：

```
while True:
    if count>1:
        oldfml=fml
    count=count+1
    fml=getFml()
    fml=parseFml(fml)
    if oldfml == fml:
        ... 
```

这样一来，`oldfml`其实就老了。

# blackberry - PhoneGap 1.8 BlackBerry - 无法找到 ID 为 org.apache.cordova 的功能

> ID：10978834
> 
> 赞同：2
> 
> 时间：2012-06-11T11:00:36.993
> 
> 标签：blackberry, cordova, blackberry-webworks

我正在用 ant 在 OSX 10.7 上构建。我已经检查过我有良好的 JAVA (1.6.0) 版本等。我似乎无法运行 PhoneGap 1.8 或 1.7 的示例。这是我输入**ant blackberry build**后终端的输出：

```
Buildfile: /Users/me/blackberry 1.8/sample/build.xml

blackberry:
build:
generate-cod-name:
     [echo] Generated name: CordovaSample.cod
clean:
   [delete] Deleting directory /Users/me/blackberry 1.8/sample/build
package-app:
    [mkdir] Created dir: /Users/me/blackberry 1.8/sample/build/widget
     [copy] Copying 8 files to /Users/me/blackberry 1.8/sample/build/widget
      [zip] Building zip: /Users/me/blackberry 1.8/sample/build/CordovaSample.zip
build:
     [exec] [INFO]    Populating application source
     [exec] [INFO]    Parsing config.xml
     [exec] [WARN]    Build ID set in config.xml [version], but signing key file was not found: author.p12
     [exec] [WARN]    Build ID set in config.xml [version], but no signing password was provided [-g]. Bar will be unsigned
     [exec] [INFO]    Generating output files
     [exec] [ERROR]   Failed to find feature with id: org.apache.cordova 
```

我已经在我下载并安装的 BlackBerry webworks SDK (10) 中放置了 bbwp 文件的正确链接。我把它放在**project.properties**中。

```
blackberry.bbwp.dir=/rim 
```

我仍然收到错误：**无法找到具有 id: org.apache.cordova 的功能**

**回答：**我找到了解决方案。我安装了旧版本的 BlackBerry webworks (2.3)。您可以在此处找到旧版本：[旧 webworks 版本](https://bdsc.webapps.blackberry.com/html5/download/previousversions)

# php - 是否有用于纠正语法的 PHP 库？

> ID：10978844
> 
> 赞同：12
> 
> 时间：2012-06-11T11:01:07.570
> 
> 标签：php

是否有用于处理字符串和纠正语法的 PHP 库？我正在创建一个应用程序，其中用户始终输入数据而不使用大写字母等。

是否有一个库来处理这种事情，或者我最好只做它，以便每个句号后的第一个字母是一个大写字母并称之为一天？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-08T05:38:14.013

希望这会帮助任何走进这里的人..

[Gramk php](https://github.com/markfullmer/grammark)是检查语法的 PHP 库之一

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-11T11:07:27.873

[http://www.languagetool.org/](http://www.languagetool.org/)

[http://www.afterthedeadline.com/](http://www.afterthedeadline.com/)

# java - Java 反射构造函数命令

> ID：10978845
> 
> 赞同：0
> 
> 时间：2012-06-11T11:01:21.563
> 
> 标签：java, reflection, constructor

类构造的顺序是否在反射中返回不同的结果？

我在使用反射时遇到问题。这是一个例子：

```
public class A{
    public A()
    {
        do something here
    }
    public A(int i)
    {
        do something here
    }
} 
```

然后，在另一个类中，我使用反射通过 getConstructors() 方法获取构造函数。但问题就在这里。它只返回带参数的构造函数。

所以我修改了代码并将constructos的顺序更改为：

```
public class A{
    public A(int i)
    {
        do something here
    }
    public A()
    {
        do something here
    }

} 
```

然后，它正确返回了两个构造函数。

另一个有趣的点是 OpenJDK 在两个示例中都能正常工作，但 Sun JDK 却不行。我有很多这样的类，SunJDK 在其中一些工作得很好，而在另一些则错了。很奇怪。

任何原因？

编辑：这是一个大项目，这里是一些反射代码

```
Constructor<?>[] constructors = handlerClass.getDeclaredConstructors();
for (Constructor<?> constructor : constructors) {
    Class<?>[] parameterTypes = constructor.getParameterTypes(); 
```

System.out.println("-" + constructor.toString());

```
 if (nonConnection == true && parameterTypes.length == 0) {
        return constructor;
    } else if (parameterTypes.length > 1) {
        continue;
    } else if (parameterTypes.length == 1) {
        Class<?> parameterType = parameterTypes[0];
        if (TableManipulator.class.isAssignableFrom(parameterType))
        {
            return constructor;
        }
    }
} 
```

handlerClass 是从中获取构造函数的类。

附言。我看了一下字节码，除了构造函数的顺序之外，字节码是相同的。

编辑：我在 getParameterTypes() 之后添加了一个 System.out 来显示构造函数。它只显示了一个具有旧顺序的构造函数....，但显示了两个具有新顺序的构造函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:11:01.027

如果你有

```
public class A{
    private /* or non-public */ A()
    {
        do something here
    }
    public A(int i)
    {
        do something here
    }
} 
```

而你使用 getConstructors，只有第二个显示。

如果您使用[getDeclaredConstructors()](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getDeclaredConstructors%28%29)您将获得所有这些。我会尝试这种方法，看看它是否能解决您的问题。

* * *

编辑：我会检查你没有

```
public class A {
    public A A() // not a constructor
    {
         // do something
    }
    public void A() // not a constructor
    {
         // do something
    }
} 
```

* * *

你能去掉`nonConnection`吗？如果为 false，则不会返回默认构造函数。

# iphone - 如何在 iOs 中平滑 UIImageView 的边缘

> ID：10978847
> 
> 赞同：1
> 
> 时间：2012-06-11T11:01:31.603
> 
> 标签：iphone, uiimageview, cgaffinetransform

> **可能重复：**
> [旋转 UIImageView 的任何快速而肮脏的抗锯齿技术？](https://stackoverflow.com/questions/1136110/any-quick-and-dirty-anti-aliasing-techniques-for-a-rotated-uiimageview)

我想在我的 iPhone 和应用程序中更改 UIImageView 的角度，我使用了以下代码：

```
previewImg.transform = CGAffineTransformMakeRotation(atan2(y2-y1,x2-x1)); 
```

我让它工作了，图像在下面。

![在此处输入图像描述](../Images/2d7915960b6fd894297167c12ecf5631.png)

在图像中，图像的边缘不平滑。有什么方法可以使边缘平滑吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T11:05:27.793

以前有人问过这个问题，在这里查看这篇文章，[旋转 UIImageView 的任何快速而肮脏的抗锯齿技术吗？](https://stackoverflow.com/questions/1136110/any-quick-and-dirty-anti-aliasing-techniques-for-a-rotated-uiimageview)

话虽如此，最佳解决方案是在图像周围创建一个 1px 的透明边框。

**更新**：这是一个将透明边框添加到 a 的辅助方法`UIImage`，从这里引用：http: [//vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/](http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/)

```
- (UIImage *)transparentBorderImage:(NSUInteger)borderSize {
// If the image does not have an alpha layer, add one
UIImage *image = [self imageWithAlpha];

CGRect newRect = CGRectMake(0, 0, image.size.width + borderSize * 2, image.size.height + borderSize * 2);

// Build a context that's the same dimensions as the new size
CGContextRef bitmap = CGBitmapContextCreate(NULL,
                                            newRect.size.width,
                                            newRect.size.height,
                                            CGImageGetBitsPerComponent(self.CGImage),
                                            0,
                                            CGImageGetColorSpace(self.CGImage),
                                            CGImageGetBitmapInfo(self.CGImage));

// Draw the image in the center of the context, leaving a gap around the edges
CGRect imageLocation = CGRectMake(borderSize, borderSize, image.size.width, image.size.height);
CGContextDrawImage(bitmap, imageLocation, self.CGImage);
CGImageRef borderImageRef = CGBitmapContextCreateImage(bitmap);

// Create a mask to make the border transparent, and combine it with the image
CGImageRef maskImageRef = [self newBorderMask:borderSize size:newRect.size];
CGImageRef transparentBorderImageRef = CGImageCreateWithMask(borderImageRef, maskImageRef);
UIImage *transparentBorderImage = [UIImage imageWithCGImage:transparentBorderImageRef];

// Clean up
CGContextRelease(bitmap);
CGImageRelease(borderImageRef);
CGImageRelease(maskImageRef);
CGImageRelease(transparentBorderImageRef);

return transparentBorderImage;
} 
```

# silverlight - 当 tabitem 不可见时绑定（文化）不起作用

> ID：10978858
> 
> 赞同：0
> 
> 时间：2012-06-11T11:02:27.287
> 
> 标签：silverlight

在 Silverlight 中：

在 tabControl 中使用时，我遇到了绑定问题。我使用 NO-NB 文化，这意味着小数点分隔符是 , （逗号）而不是 。（点）与 US-EN 相同。只要选项卡可见，绑定就可以正常工作。如果我选择另一个选项卡，然后将数据保存到数据库（使用 EF），则文本 1,25 将转换为 125.00 并按原样存储在数据库中。

我在构造函数中设置了 this.Language .... 以确保设置了正确的文化。而且，如上所述，它在选项卡可见时起作用。

还有其他人遇到过这个问题并有解决方案吗？

编辑：我意识到仅在切换选项卡时也会发生这种行为。框架中似乎存在一个错误，该错误会重置或不考虑 currentCulture 或 CurrentUIculture。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:31:45.763

我找到了问题和解决方案。当文本框驻留在 ChildWindow 中的 tabItem 上时，它不会继承语言设置。我从程序和设置后打印了一些调试消息：

```
this.Language = System.Windows.Markup.XmlLanguage.GetLanguage(System.Threading.Thread.CurrentThread.CurrentCulture.Name); // nb-no 
```

在 ChildWindow 构造函数中并设置：

```
tabItem.Language = System.Windows.Markup.XmlLanguage.GetLanguage(System.Threading.Thread.CurrentThread.CurrentCulture.Name); // nb-no 
```

TextBox 仍然是 en-us 而不是 nb-no。因此设置：

```
textBox.Language = System.Windows.Markup.XmlLanguage.GetLanguage(System.Threading.Thread.CurrentThread.CurrentCulture.Name); 
```

像魅力一样工作。我认为这是 Silverlight 框架中的一个错误。

# gwt - 在生产环境中的浏览器控制台中启用 GWT 日志 - 开销？

> ID：10978861
> 
> 赞同：0
> 
> 时间：2012-06-11T11:02:35.613
> 
> 标签：gwt

我想在生产模式下在我的 GWT 应用程序中启用一些跟踪日志。日志被写入浏览器控制台并由每个用户操作触发。

我想知道这是否会导致诸如增加浏览器内存之类的问题，甚至可能导致崩溃？支持的浏览器是否保持日志历史记录的最大限制，还是我应该处理它？

我正在使用 java.util.logging。

谢谢

# c# - C#/Visual Studio 的 JDT 等效项

> ID：10978862
> 
> 赞同：0
> 
> 时间：2012-06-11T11:02:44.810
> 
> 标签：c#, java, eclipse, visual-studio, eclipse-jdt

我正在寻找与Visual Studio for C# 中的[JDT等效的东西。](http://www.eclipse.org/jdt/)一般来说，我想用一个插件来扩展 Visual Studio 来分析 C# 源代码。那么我应该寻找什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:07:02.207

您正在寻找[Visual Studio SDK](http://msdn.microsoft.com/en-us/library/bb166441%28v=vs.100%29.aspx)，特别是[Visual Studio 集成 SDK](http://msdn.microsoft.com/en-us/library/bb165336)部分。您可能会发现对 Visual Studio 可扩展性 (VSX) 的引用——它们是同一回事。

[VSX学习站点](http://msdn.microsoft.com/en-us/vstudio/vextend.aspx)有一些链接可以帮助您入门，尤其是“[入门](http://msdn.microsoft.com/en-us/vstudio/ff677564)”部分。[您可以在文档](http://msdn.microsoft.com/en-us/library/ae3cxw0w)中找到详细的覆盖范围。

**编辑：**

如果您正在寻找一个插件来分析您的代码并且不介意购买它，那么 Resharper 是最佳选择。Resharper 有自己的 SDK，允许您为其创建插件。

如果你想创建自己的代码分析插件，你将不得不做一些工作。VS 不包含任何解析或分析支持。这将与 Project Roslyn 一起提供，希望在 .NET 4.5 RTM 之后不久。现在它在 CTP 中，很可能会被取消。

有一些工具可以帮助进行分析。ANTLR 有一个针对 C#[的 .NET 发行版.Net。](http://www.antlr.org/wiki/display/ANTLR3/Antlr3CSharpReleases)[Mono.Cecil](http://www.mono-project.com/Cecil)是一个检查 IL 代码的 Mono 库，是几乎所有 .NET 反编译器的基础。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T11:37:46.163

我不太确定您在寻找什么，但[ReSharper](http://www.jetbrains.com/resharper/)会在很多方面为您提供帮助。

取自他们的网站：

> ReSharper 是一个著名的生产力工具，它使 Microsoft Visual Studio 成为一个更好的 IDE。全球数以千计的 .NET 开发人员想知道，如果没有 ReSharper 的代码检查、自动重构、超快导航和编码帮助，他们将如何生活。

以下是关于分析能力的一些话：

> C#、VB.NET、XAML、ASP.NET、ASP.NET MVC、JavaScript、CSS 和 XML 中的动态代码质量分析。如果您的解决方案包含错误或可以改进的代码，ReSharper 会立即告诉您。

我是一名狂热的 Java 开发人员，我使用来自 JetBrains 的 IntelliJ IDEA，后者也开发了 ReSharper。ReSharper 从 IntelliJ 获得了很多好处，当您像我现在一样使用 VS 时使用它真的很棒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T12:18:19.057

您可能可以像@maba 建议的那样查看 ReSharper。但是 ReSharper 不是免费的。

如果您正在寻找免费的东西，您有多种选择，

*   NRefactory 来自 SharpDevelop 和 MonoDevelop，[http://community.sharpdevelop.net/blogs/danielgrunwald/archive/2011/09/19/sharpdevelop-5-nrefactory-5-semantic-highlighting.aspx](http://community.sharpdevelop.net/blogs/danielgrunwald/archive/2011/09/19/sharpdevelop-5-nrefactory-5-semantic-highlighting.aspx)
*   来自 Microsoft 的 Roslyn，[http://www.microsoft.com/en-us/download/details.aspx?id= 27746](http://www.microsoft.com/en-us/download/details.aspx?id=27746)

基于它们，您可以编写提供与 ReSharper 或 JDT 类似功能的 Visual Studio 插件。

NRefactory 5 和 Roslyn 都处于积极开发阶段，因此它们都还没有准备好投入使用。

# sql-server - 在 TRIGGER 上发送邮件会阻止插入发生（并且电子邮件不会发送）

> ID：10978863
> 
> 赞同：0
> 
> 时间：2012-06-11T11:02:51.907
> 
> 标签：sql-server, email, triggers

我在 INSERT 上有一个简单的触发器

```
ALTER TRIGGER [dbo].[SendErrorEmail]
   ON  [dbo].[tblNewErrorLog]
   FOR INSERT
AS 
BEGIN   

    EXEC msdb.dbo.sp_send_dbmail 
        @profile_name='myprofile',
        @recipients='me@me.com',
        @subject='error in the database',
        @body = 'check it out'

END 
```

*   如果我使用 Management Studio 手动添加一行，一切都很好，添加了行的电子邮件已发送。
*   如果通过服务记录错误，则什么也没有。没有电子邮件，没有新行。
*   如果我删除触发器 - 事情按预期工作，添加行。
*   如果我保留触发器，但删除电子邮件 SP，就可以了。添加了新行。

那么，错误显然与电子邮件有关，也许是安全性？我已经尝试登录服务用于连接数据库的凭据，如果我手动添加一行，它就可以工作。

我也有点担心，即使邮件没有发送，插入也会失败，这是为什么呢？

关于从哪里开始排除故障的想法是最受欢迎的。

谢谢！

编辑：从代码常规 Tidy up 中删除了 try catch

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:24:14.757

触发器在对过程没有 EXECUTE 权限的上下文中执行`msdb.dbo.sp_send_dbmail`。您很可能陷入了受限`EXECUTE AS`沙箱，请参阅[了解执行上下文](http://msdn.microsoft.com/en-us/library/ms187096%28v=sql.105%29.aspx)。这将与您描述的问题完全一样：它适用于 SSMS，但不适用于您的应用程序。

有关如何使用代码签名为在 EXECUTE AS 上下文沙箱中运行的代码授予执行权限的示例，请参阅[从激活的过程调用另一个数据库中的过程。](http://rusanu.com/2006/03/07/call-a-procedure-in-another-database-from-an-activated-procedure/)

如果代码没有在 EXECUTE As 下运行，那么只是一个简单的权限问题。您可以向`sp_send_dbmail`应用程序使用的服务帐户授予 [msdb] 访问权限和 EXECUTE 权限，也可以再次使用上述代码签名。

# c++ - std::string 使用的空闲内存

> ID：10978864
> 
> 赞同：8
> 
> 时间：2012-06-11T11:02:53.747
> 
> 标签：c++, linux, stdstring

我有一个`struct`看起来像这样的：

```
struct queue_item_t {
    int id;
    int size;
    std::string content;
}; 
```

我有一个`std::vector< queue_item_t >`从数据库查询中填充了许多这些的内容。

处理每个项目时，会从磁盘读取文件并将其内容放入`content`字符串成员中。该项目被处理（`content`被解析），我`.clear()`在字符串上执行，以免耗尽我所有的内存。

但是，这似乎并没有释放内存。我正在处理数十万个项目，最终，内存使用量将超出可用范围，并且应用程序被 Linux 杀死，原因是“内存不足”。

如何释放这些字符串使用的内存？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-11T11:04:23.470

std::string 和 std::vector 在 clear() 中不改变容器容量（=> 不释放容器内存）。每当需要压缩时（通常不需要），都应该使用下面的临时对象技巧。

```
my_queue_item.content.clear(); // clear
std::string(my_queue_item.content).swap(my_queue_item.content); // compact 
```

当需要清理+压缩时，上面的代码可以变得更简单：

```
std::string().swap(my_queue_item.content); 
```

一些字符串实现是写时复制的。这样的字符串，当从多个地方引用时，会在写入时重新分配内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T11:06:14.617

`clear`不会释放字符串的**所有**内存（可能只是缓冲区）。它只会将字符串设置为空字符串。

如果你*可以*调用`clear`字符串，为什么不重用它呢？因此，无需创建新的`queue_item_t`，只需将其字符串成员替换为新值即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-18T12:55:28.180

要释放内存，您可以这样做：

```
my_queue_item.content = "";
my_queue_item.content.shrink_to_fit(); 
```

该方法`shrink_to_fit()`将很好地释放内存并为新值`my_queue_item.content`（在这种情况下为 15 个字节）分配足够小的空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T11:09:53.053

`clear`可能不会释放内存。它会在逻辑上将字符串设置为空字符串，但可能不会影响已分配的内存。

如果您正在将更多数据读入相同的`queue_item_t`，它应该替换以前的字符串内容。

你确定你没有泄露`queue_item_t`自己吗？

# android - 使用服务完成此任务

> ID：10978867
> 
> 赞同：0
> 
> 时间：2012-06-11T11:03:03.040
> 
> 标签：android, service

我试图搜索许多讨论线程，但我不清楚这件事。作为新手，我无法理解一半的事情，因此我要问直接的问题。

对于我的应用程序，当单击最后一个按钮（开始分析按钮）时，我希望启动一个服务，服务内部要完成的分析大约需要 2-3 分钟，一旦分析完成，我希望服务自动启动我的主要活动中的结果活动页面。

怎样才能完成这项任务？而且我还想知道应用程序是否会在后台运行并且在暂停时不会被android自动关闭？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:46:45.050

Android服务的定义是它可以在后台运行，没有UI。所以是的，这是可能的。但是，Service 本身不会自动在后台运行（它在主线程上运行）。相反，您想要做的可能是这样的：

*   有一个服务来侦听启动操作的意图。
*   当您的用户单击按钮时，将意图发送到该服务。
*   该服务将启动一个新的后台线程，做一些工作一段时间。
*   完成工作后，Service 将启动一个新的 Activity。[（像这样..）](https://stackoverflow.com/questions/3606596/android-start-activity-from-service)

请*注意*，如果用户不使用您的应用程序，则启动新 Activity 被认为是非常糟糕的做法。如果您正在使用聊天应用程序并且随机应用程序开始接管，那就太可怕了......相反，一个更好的主意是在某处粘贴一个标志，然后在`onResume()`您的其他 Activity 的处理程序中，检查任务是否完成，如果所以将用户发送到另一个活动。

# algorithm - 必须实现Shunting-yard算法，需要帮助理解

> ID：10978868
> 
> 赞同：4
> 
> 时间：2012-06-11T11:03:06.027
> 
> 标签：algorithm, shunting-yard

我正在尝试实现一个没有括号的[Shutting-yard](https://en.wikipedia.org/wiki/Shunting-yard_algorithm)算法，但我无法理解它。我试过维基百科，但条目真的很糟糕。我在实现代码时应该没有什么问题，但如果我不明白，我就无法实现它。

现在：这个算法是如何工作的？

以下是我的理解：

*   从左到右，所有数字都添加到输出队列中，所有操作数都添加到堆栈中。到达末尾后，您将弹出所有操作数并将它们添加到输出中

    ```
    Expression: 2+5*4+3/5   ( = 2+20+0.6 = 22.6 )

    Stack: +*+/             ( -> top )

    OutputQueue: 5 3 4 5 2  ( -> exits) 
    ```

现在我弹出堆栈并将其添加到队列中

```
 OutputQueue: (insert ->) + * + / 5 3 4 5 2   ( -> exit) 
```

据我了解，表格应该是：25435/+*+

让我们尝试解决它：

```
 5/3 ~ 1.6 + 4 ~= 5.6 * 5 ~= 28 + 2 ~= 30 (or 30.3 recurring .3 if you insist) 
```

**编辑：**我确信我在这里使用的[反向波兰符号](https://en.wikipedia.org/wiki/Reverse_Polish_notation)是正确的，所以这不应该是问题。

我知道我在做一些愚蠢的事情，但对于我的一生，我无法弄清楚。

我认为如果有人能指出我的逻辑中的错误，那将很有帮助，因为算法应该很好，因为它来自维基百科，而且我看到其他人向我指出了它。所以它必须是好的，我只是在某个地方搞砸了。

是队列吗？我很确定我可以很好地处理[逆波兰符号](https://en.wikipedia.org/wiki/Reverse_Polish_notation)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T11:41:46.313

你理解错了 ：

```
Expression: 2+5*4+3/5 
```

对于每个令牌：

```
 token : 2
    outputqueue 2
    stack

    token : +
    outputqueue 2
    stack +

    token : 5
    outputqueue 25
    stack +

    token : "*" 
    "*" has higher predencence as "+", so we push into the stack
    outputqueue 25
    stack +*

    token : 4
    outputqueue 254
    stack +*

    token : "+"
    "+ "has lower predencence as "*", we pop "*" from the stack.
    "+" has same predecence as "+", so we pop "+" from the stack then add the current  token "+" in the stack
    outputqueue 254*+
    stack +

    token : 3
    outputqueue 254*+3
    stack +

    token : "/"
    "/" has lower predencence as "+", we push "/" into the stack
    outputqueue 254*+
    stack +/

    token : 5
    outputqueue 254*+35
    stack +/ 
```

表达式结束，出栈：

```
output 254*+35/+ 
```

* * *

计算 ：

```
5*4 = 20
2+20 = 22
3/5 = 0.6
22 + 0.6 = 22.6 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T11:38:39.503

我不太确定您想要的算法是否如此简单 - 您是否阅读了您链接到的整个 wiki 文章？具体来说，请参阅“[算法详细信息](https://en.wikipedia.org/wiki/Shunting-yard_algorithm#The_algorithm_in_detail)”部分，其中很多涉及运算符优先级，我认为您在当前的实现中将其丢弃。我的建议是按照要点（并根据需要与下面的示例进行比较）一次一步地浏览该部分，以尝试为该问题提出适当的形式。一旦你这样做了，它应该有望帮助你对算法的总体理解。

# python - 当且仅当 Python 不存在文件时，才安全地创建文件

> ID：10978869
> 
> 赞同：100
> 
> 时间：2012-06-11T11:03:11.377
> 
> 标签：python

我希望根据该文件是否已经存在来写入文件，只有在它不存在时才写入（实际上，我希望继续尝试文件，直到找到不存在的文件）。

以下代码显示了一种潜在攻击者可以插入符号链接的方式，正如本文所建议的那样[，](https://stackoverflow.com/a/85237/709852)在文件测试和正在写入的文件之间。如果代码以足够高的权限运行，这可能会覆盖任意文件。

有没有办法解决这个问题？

```
import os
import errno

file_to_be_attacked = 'important_file'

with open(file_to_be_attacked, 'w') as f:
    f.write('Some important content!\n')

test_file = 'testfile'

try:
    with open(test_file) as f: pass
except IOError, e:

    # Symlink created here
    os.symlink(file_to_be_attacked, test_file)

    if e.errno != errno.ENOENT:
        raise
    else:
        with open(test_file, 'w') as f:
            f.write('Hello, kthxbye!\n') 
```

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-06-11T11:53:15.560

**编辑**：另见[Dave Jones 的回答](https://stackoverflow.com/a/18474773/220155)：从 Python 3.3 开始，您可以使用`x`标志`open()`来提供此功能。

**原答案如下**

是的，但不使用 Python 的标准`open()`调用。您需要[`os.open()`](http://docs.python.org/library/os.html#os.open)改用它，它允许您为底层 C 代码指定标志。

特别是，您想使用`O_CREAT | O_EXCL`. `open(2)`在`O_EXCL`我的 Unix 系统上的手册页中：

> 确保此调用创建文件：如果此标志与 一起指定`O_CREAT`，并且路径名已经存在，`open()`则将失败。如果未指定，则的行为`O_EXCL`未定义。`O_CREAT`
> 
> 当指定这两个标志时，不遵循符号链接：如果路径名是符号链接，则`open()`无论符号链接指向何处都会失败。
> 
> `O_EXCL` 只有在内核 2.6 或更高版本上使用 NFSv3 或更高版本时，才在 NFS 上受支持。在不提供 NFS`O_EXCL`支持的环境中，依赖它来执行锁定任务的程序将包含竞争条件。

所以它并不完美，但 AFAIK 是最接近避免这种竞争条件的方法。

编辑：使用`os.open()`而不是其他规则`open()`仍然适用。特别是，如果您想使用返回的文件描述符进行读取或写入，您还需要`O_RDONLY`、`O_WRONLY`或`O_RDWR`标志之一。

所有`O_*`标志都在 Python 的`os`模块中，因此您需要`import os`使用`os.O_CREAT`等。

### 例子：

```
import os
import errno

flags = os.O_CREAT | os.O_EXCL | os.O_WRONLY

try:
    file_handle = os.open('filename', flags)
except OSError as e:
    if e.errno == errno.EEXIST:  # Failed as the file already exists.
        pass
    else:  # Something unexpected went wrong so reraise the exception.
        raise
else:  # No exception, so the file must have been created successfully.
    with os.fdopen(file_handle, 'w') as file_obj:
        # Using `os.fdopen` converts the handle to an object that acts like a
        # regular Python file object, and the `with` context manager means the
        # file will be automatically closed when we're done with it.
        file_obj.write("Look, ma, I'm writing to a new file!") 
```

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2013-08-27T20:26:09.073

作为参考，Python 3.3`'x'`在函数中实现了一个新模式[`open()`](http://docs.python.org/3/library/functions.html#open)来覆盖这个用例（仅创建，如果文件存在则失败）。请注意，`'x'`模式是自行指定的。在 a中使用`'wx'`results是多余的（如果调用成功，您唯一能做的就是写入文件；如果调用成功，它就不会存在）：`ValueError``'w'`

```
>>> f1 = open('new_binary_file', 'xb')
>>> f2 = open('new_text_file', 'x') 
```

对于 Python 3.2 及以下版本（包括 Python 2.x），请参阅[接受的答案](https://stackoverflow.com/a/10979569/1459019)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-14T04:19:22.660

如果文件不存在，此代码将轻松创建一个*文件。*

```
import os
if not os.path.exists('file'):
    open('file', 'w').close() 
```

# jquery - jQuery: prop vs attr ... 澄清

> ID：10978870
> 
> 赞同：8
> 
> 时间：2012-06-11T11:03:20.127
> 
> 标签：jquery, html

*请注意，这不是[.prop() 与 .attr()](https://stackoverflow.com/questions/5874652/prop-vs-attr)的重复；该问题是指 prop 与 attr 的基本功能，而此问题是特定于它们作为 setter 的差异。*

在尝试缩小应该使用 .prop() 设置的内容，以及在创建新元素时应该通过 .attr() 设置的内容时，在使用 jQuery 1.7.2 的测试中，我发现 prop 大约快 2.5 倍，所以似乎更可取。

我能找到的使用 attr 设置的唯一列表为 attr 提供了这些：

> accesskey, align, background, bgcolor, class, contenteditable, contextmenu, data-XXXX, draggable, height, hidden, id, item, itemprop, spellcheck, style, subject, tabindex, title, valign, width

1.  这是否完整（即，不在该列表中的任何内容 - 例如 min、max、step 等 - 都应该使用 prop）？

2.  在测试中，其中一些在使用 prop 设置时似乎工作正常。测试上面的列表，我用 prop 设置以下内容没有问题：

    > id、类、对齐、contenteditable、可拖动、隐藏、拼写检查、tabindex、标题

3.  是否有某种原因，对于“使用 attr 设置的东西在使用 prop 设置时仍然有效”的列表，为什么它仍然应该使用 attr 设置？如果不是，那么在创建基础时性能提高 250%`<div id="foo" class="bar" draggable="true" title="zipzap">`对我来说似乎很好...... :)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-27T02:52:19.557

我在网上找不到任何完整的清单。每个给出任何类型列表的人都只是复制 jQuery 1.6 博客文章中给出的部分列表。关于#3，Starx 在他对此处答案的评论中谈到了这一点。 [http://timmywillison.com/](http://timmywillison.com/)通过体面的讨论进行了更详细的讨论。MDN 和 W3C 规范还提到，属性中有各种接口，可以将它们设置为属性（[https://developer.mozilla.org/en/DOM/element](https://developer.mozilla.org/en/DOM/element)），尽管 MDN 实际上并没有列出哪个那些是。MDN 确实提到使用属性接口作为 setter 比使用 getAttribute 更脆弱：

“虽然这些接口通常由大多数 HTML 和 XML 元素共享，但对于 DOM HTML 规范中列出的特定对象，还有更专业的接口。但是请注意，这些 HTML 接口“仅适用于 [HTML 4.01] 和 [XHTML 1.0]文档，并且不保证可以与任何未来版本的 XHTML 一起使用。”HTML 5 草案确实声明它的目标是向后兼容这些 HTML 接口，但在谈到它们时说“一些以前被弃用、支持不佳、很少使用或考虑的特性不必要的已被删除。“可以通过完全迁移到 DOM XML 属性方法（例如 getAttribute()）来避免潜在的冲突。”

但是，现在似乎可以安全地假设在 Firefox 和 Chrome 中呈现的任何 HTML5 文档类型页面已经处于“已弃用、支持不佳”等接口已被删除的环境中。

因此，我使用 boolean、string 和 int 值针对每种 HTML 元素类型测试了每个属性以及 jQuery 博客中提到的非属性属性。

使用 1.7.2 和 1.8pre，无论你调用 .prop() 还是 attr()，jQuery 在内部都会实际使用 .prop：

```
async, autofocus, autoplay, checked, controls, defer, disabled, hidden, loop,
multiple, open, readonly, required, scoped, selected 
```

对于 HTML 元素（此处不考虑窗口、文档等），jQuery 不会设置以下任何属性，除非您使用 .attr()：

```
accept-charset, accesskey, bgcolor, buffered, codebase, contextmenu, datetime,
default, dirname, dropzone, form, http-equiv, icon, ismap, itemprop, kind, 
language, list, location, manifest, nodeName, nodeType, novalidate, pubdate, 
radiogroup, seamless, selectedIndex, sizes, srclang, style, tagName 
```

最后，jQuery 将使用 .prop() 或 .attr() 设置以下属性列表。在上面的第一个列表中，jQuery 总是使用 .prop()，不管你使用的是 .attr() 还是 .prop()。对于此列表中的属性，jQuery 使用您使用的任何属性。如果你使用 .prop()，jQuery 使用 .prop()，反之亦然。无论哪种情况，结果都是一样的。所以忽略任何潜在的语义考虑，只是关于 prop() 比 .attr() 快约 2.5 倍，jQuery 1.6.1 博客文章建议使用 .attr()，但可以使用 .prop() 代替，性能显着提高：

```
accept, action, align, alt, autocomplete, border, challenge, charset, cite, 
class, code, color, cols, colspan, contenteditable, coords, data, defaultValue, 
dir, draggable, enctype, for, headers, height, hidden, high, href, hreflang, 
id, keytype, label, lang, low, max, maxlength, media, method, min, name, 
optimum, pattern, ping, placeholder, poster, preload, readonly, rel, required, 
reversed, rows, rowspan, sandbox, scope, shape, size, span, spellcheck, src, 
srcdoc, start, step, summary, tabindex, target, title, type, usemap, value, 
width, wrap 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T11:08:26.117

试着用简单的术语来理解这一点。

`.attr()`给出元素的属性. 在页面上加载该属性时。

`.prop()`, 给出元素的属性,

*   这可以是一个元素的状态，就像在复选框的情况下，它可以被选中或取消选中。
*   或者，它可以修改元素的属性，因为默认状态。

这个[问题](https://stackoverflow.com/questions/5874652/prop-vs-attr)有你需要知道的所有差异。通常，在使用 DOM 操作部分时，您需要属性而不是属性。TJ的[回答确实清楚了这个概念。](https://stackoverflow.com/a/5884994/295264)

# sonarqube - 声纳 - 报告最活跃编辑的文件？

> ID：10978879
> 
> 赞同：1
> 
> 时间：2012-06-11T11:03:51.477
> 
> 标签：sonarqube

我想在声纳中为最活跃的编辑文件创建一个报告。我环顾四周，但找不到一个插件来做到这一点。任何建议，将不胜感激。

如果相关，我的团队使用 AccuRev for SCM 和 Sonar v2.14

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:50:13.410

不幸的是，目前没有满足您需求的插件（至少我知道没有）。

我本可以建议您根据 SCM 活动插件生成的指标开发自己的插件，但不支持 Accurev，因此您必须从头开始：-/

# javascript - 如何在基于 JS 的聊天室中找到用户的 IP？

> ID：10978881
> 
> 赞同：2
> 
> 时间：2012-06-11T11:04:03.450
> 
> 标签：javascript

在基于 javascript 的聊天室中查找用户 IP 的算法或代码是什么？

登录到一个这样的房间，我被告知有人知道我的 IP 以及我正在使用的操作系统，只需在原始站点代码中插入一个简单的基于 JS 的代码，而没有任何非法行为.....

帮帮我，我只是好奇。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T11:06:57.460

他很可能插入了一个`<img>`指向脚本的标签，该脚本显示了请求者的 IP 和用户代理。这实际上是论坛签名等中的一个常见笑话，以混淆不知情的人。

[![](../Images/850cc5011558f40e428f8724c576d92d.png)](https://i.stack.imgur.com/jEMjg.png)
[（来源：[danasoft.com](http://www.danasoft.com/vipersig.jpg)）]

除非脚本正在记录 IP 或者他正在监视脚本所在服务器的日志文件，否则他实际上无法看到您的 IP 地址。

# .net - 使用 CodeDom 实例化非原始类型

> ID：10978882
> 
> 赞同：1
> 
> 时间：2012-06-11T11:04:16.030
> 
> 标签：.net, instantiation, codedom

我正在尝试使用 CodeDom 来实例化 System.Drawing.Font 的实例，但我不知道如何创建新类型，特别是对于 FontFamily 和 FontStyle 参数。

如果我执行以下代码：

```
CodeExpression[] parms = new CodeExpression[3];

parms[0] = new CodePrimitiveExpression(((System.Drawing.Font)value).FontFamily.Name);
parms[1] = new CodePrimitiveExpression(((System.Drawing.Font)value).Size);
parms[2] = new CodePrimitiveExpression(((System.Drawing.Font)value).Style);

codeObjectCreateExpression = new CodeObjectCreateExpression("System.Drawing.Font", parms); 
```

我收到一个错误

> 无效的原始类型：System.Drawing.FontStyle。考虑使用 CodeObjectCreateExpression。

通过阅读，我知道我必须使用`CodeObjectCreateExpression`来创建一个类型的实例，但我不确定如何将[除原语之外的任何东西](http://msdn.microsoft.com/en-us/library/system.codedom.codeprimitiveexpression.aspx)分配给它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:44:09.533

如果你想使用任何对象，那么你就不能这样做（至少在不使用序列化之类的技巧或使用反射访问私有字段的情况下不能这样做）。这是因为必须将 CodeDOM 树翻译成 C#（或另一种 .Net 语言）。CodeDOM 不知道如何编写代码来构造该对象（它应该调用构造函数吗？哪个？还是工厂方法？或其他什么？）。

但是，如果只是`enum`s (like `FontStyle`) 有问题，则可以像访问类型`static`上的字段一样获取它的值`enum`：

```
new CodeFieldReferenceExpression(
    new CodeTypeReferenceExpression("System.Drawing.FontStyle"),
    ((System.Drawing.Font)value).Style.ToString()) 
```

# r - 如何比较两个数据框？

> ID：10978895
> 
> 赞同：7
> 
> 时间：2012-06-11T11:05:04.557
> 
> 标签：r, dataframe

我有两个数据框，每个数据框都有两列（例如，x 和 y）。我需要比较两个数据帧并查看 x 或 y 中的任何值或 x 和 y 中的任何值在两个数据帧中是否相似。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-11T12:49:14.020

使用`all.equal`功能。它不对数据帧进行排序。它会简单地检查每个单元`data frame`格与另一个单元格中的相同单元格。你也可以使用`identical()`函数。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-11T12:07:10.113

没有一个例子，我不能确定我理解你想要什么。但是，我认为你想要这样的东西。如果是这样，几乎可以肯定有更好的方法来做同样的事情。

```
a <- matrix(c(1,2,
              3,4,
              5,6,
              7,8), nrow=4, byrow=T, dimnames = list(NULL, c("x","y")))

b <- matrix(c(1,2,
              9,4,
              9,6,
              7,9), nrow=4, byrow=T, dimnames = list(NULL, c("x","y")))

cc <- matrix(c(NA,NA,
              NA,NA,
              NA,NA,
              NA,NA), nrow=4, byrow=T, dimnames = list(NULL, c("x","y")))

for(i in 1:dim(a)[1]) {
for(j in 1:dim(a)[2]) {
if(a[i,j]==b[i,j]) cc[i,j]=a[i,j]
}
}

cc 
```

编辑：2013 年 1 月 8 日

以下行将告诉您两个矩阵之间哪些单元格不同：

```
which(a != b, arr.ind=TRUE)

#      row col
# [1,]   2   1
# [2,]   3   1
# [3,]   4   2 
```

如果两个矩阵 a 和 b 相同，则：

```
which(a != b)

# integer(0)

which(a != b, arr.ind=TRUE)

# row col 
```

编辑 2012 年 1 月 9 日

以下代码演示了行名称对 的影响`identical`，`all.equal`以及`which`何时通过子集第三个数据框创建两个数据框之一。如果正在比较的两个数据帧之间的行名称不同，则既不`identical`也不`all.equal`返回`TRUE`。但是，`which`仍然可以用于比较列`x`和`y`两个数据框之间的情况。`NULL`如果为要比较的两个数据帧中的每一个设置行名称，则两者`identical`都`all.equal`将返回`TRUE`.

```
df1 <- read.table(text = "
     group  x  y 
       1   10 20
       1   10 20
       1   10 20
       1   10 20
       2    1  2
       2    3  4
       2    5  6
       2    7  8
", sep = "", header = TRUE)

df2 <- read.table(text = "
     group  x  y 
       2    1  2
       2    3  4
       2    5  6
       2    7  8
", sep = "", header = TRUE)

# df3 is a subset of df1

df3 <- df1[df1$group==2,]

# rownames differ between df2 and df3 and
# therefore neither 'all.equal' nor 'identical' return TRUE
# even though the i,j cells of df2 and df3 are the same.
# Note that 'which' indicates no i,j cells differ between df2 and df3 

df2
df3

all.equal(df2, df3)
identical(df2, df3)
which(df2 != df3)

# set row names to NULL in both data sets and
# now both 'all.equal' and 'identical' return TRUE.
# Note that 'which' still indicates no i,j cells differ between df2 and df3

rownames(df2) <- NULL
rownames(df3) <- NULL

df2
df3

all.equal(df2, df3)
identical(df2, df3)
which(df2 != df3) 
```

# sql - 用于从 SQL 语句中捕获表名和别名的正则表达式

> ID：10978900
> 
> 赞同：1
> 
> 时间：2012-06-11T11:05:31.373
> 
> 标签：sql, regex

我需要一个正则表达式来从如下表达式中提取表名和别名：

```
INNER JOIN dbo.table1 t ON t.x = table n.y
INNER JOIN table2 on table2.x = table n.y
INNER JOIN table3 t3 on t3.x = tablen.y 
```

从上面的查询中，我想捕获：

```
(Table Name, Alias)
table1, t
table2, " " <-- No alias specified so blank or null
table3, t3 
```

请注意，指定表的方法有以下几种：

1.  有或没有所有者，例如 dbo.table1
2.  有或没有别名

无论如何，我只关心表名和别名。

万一有所不同，查询将针对 SQL Server 数据库，我将在 C# 应用程序中使用它。

我熟悉遍历 Regex Match Collection 的 Matches 以及 RegEx 组。我只是在使用正确的 RegEx 表达式而苦苦挣扎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:09:28.663

你可以使用：

```
(?i)\bJOIN\s+([\w.]+)(?:\s+(?!ON\b)(\w+))? 
```

但请注意，这可能会产生无效结果，例如，如果您引用了具有匹配内容的字符串。在这种情况下，最好使用适当的 SQL 解析器而不是正则表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T11:11:41.787

您假设正则表达式足够强大，可以解析像 SQL 这样的上下文无关语言。

它不是。

你需要重新考虑你的策略，因此你的问题，完全。

我会在一个公认的解析器生成器中寻找一个 SQL*解析器*，例如 YACC/Bison、ANTLR、JavaCC、...

# specflow - 等效于在场景之后运行的背景

> ID：10978903
> 
> 赞同：9
> 
> 时间：2012-06-11T11:05:55.087
> 
> 标签：specflow, gherkin

我是 SpecFlow 的新手，正在为不同角色类型的经过身份验证的用户设置许多测试功能/场景。我通过 Coypu 的浏览器自动化来做到这一点。

所以我在功能中有一个后台步骤来设置该角色类型的用户的登录。

```
Background:
    Given I am logged in as a ...some role I'm interested in... 
```

在功能中的每个场景之后，我想再次注销用户（否则后台中的登录步骤将不适用于下一个场景——我在测试之间保持相同的 Coypu 浏览器实例打开）。

我找到了`[AfterScenario]`我可以使用的注释，但由于它适用于所有功能的所有场景（据我所知......），它会影响未经身份验证的用户的场景。

我可以`[AfterScenario]`使用`[Scope(Feature="Some Feature")]`我相信的范围，但我预计必须在我正在测试的大量功能之前和之后登录/注销，而且我并不热衷于用一堆魔术字符串指定所有这些.

所以我想知道是否可以在功能文件中放入一些东西，类似于背景，但要在该功能的每个场景*之后运行。*（或者，也许我为每个场景登录/注销的方式不是处理事情的最佳方式？）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-11T11:28:47.080

specflow 中没有“Postground”功能，但是您可以通过[标签过滤](https://github.com/techtalk/SpecFlow/wiki/Hooks)实现类似的功能。

在我们的大多数项目中，我们使用标签来标记具有特定设置/拆卸逻辑的场景。然后我们使用 BeforeScenario/AfterScenario 钩子来执行逻辑：

```
[BeforeScenario("authentication")]
public void BeforeAuthenticationScenario()
{
    //...
}    

[AfterScenario("authentication")]
public void AfterAuthenticationScenario()
{
    //...
} 
```

您可以标记单个场景或整个功能：

```
@authentication
Feature: Some feature requires authentication

@authentication
Scenario: Some scenario requires authentication 
```

因此，在您的代码中，您将只有一个魔术字符串“身份验证”，而在您的功能中，您可以使用标签以声明方式应用自定义逻辑。

# python - 在python中将字符串转换为字典

> ID：10978908
> 
> 赞同：3
> 
> 时间：2012-06-11T11:06:25.157
> 
> 标签：python, python-2.3

我有以下字符串：

```
str = "{application.root.category.id:2}" 
```

我想将以上内容转换为 python 中的字典数据类型，如下所示：

```
dict = {application.root.category.id:2} 
```

我尝试使用 eval() ，这是我得到的错误：

> AttributeError：java包'application'没有属性“root”

我当前的 python 是 <2.3 ，我无法将 python 更新到 >2.3 。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T11:13:20.680

Python 字典的键不必是字符串；因此，当您编写时，如果它是一个字符串，则`{a: b}`需要引号。`a`（`{1:2}`例如，将*整数*1 映射到整数 2。）

所以你不能只是传递你必须传递的东西`eval`。你需要自己解析它。（或者，如果碰巧更容易，请更改生成它的任何内容以在键周围加上引号。）

究竟如何解析它取决于您的字典实际上可能是什么样子；例如，值本身可以是字典，还是它们总是数字，还是什么？这是一个简单且可能过于粗略的方法：

```
contents = str[1:-1]        # strip off leading { and trailing }
items = contents.split(',') # each individual item looks like key:value
pairs = [item.split(':',1) for item in items] # ("key","value"), both strings
d = dict((k,eval(v)) for (k,v) in pairs) # evaluate values but not strings 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T11:13:59.797

首先，'dict' 是类型名称，因此不适合变量名称。

以下，完全按照你的要求......

```
a_dict = dict([str.strip('{}').split(":"),]) 
```

但是，如我所料，如果您想向字典添加更多映射，则需要采用不同的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-22T10:58:50.147

假设我有一个字符串

```
str='{1:0,2:3,3:4}'
str=str.split('{}')
mydict={}
for every in str1.split(','):
    z=every.split(':')
    z1=[]
    for every in z:
        z1.append(int(every))
    for k in z1:
        mydict[z1[0]]=z1[1] 
```

输出： `mydict {1: 0, 2: 1, 3: 4}`

# c# - 使用 Selenium for C# 登录 Facebook

> ID：10978912
> 
> 赞同：3
> 
> 时间：2012-06-11T11:06:43.903
> 
> 标签：c#, facebook, selenium, fitsharp

我一直在玩 Selenium C# 框架并尝试登录 Facebook，但没有任何运气。

这是我到目前为止所得到的（基于这篇文章：[Testing a Facebook Connect application using Selenium?](https://stackoverflow.com/questions/8845614/testing-a-facebook-connect-application-using-selenium/8867886#8867886)）。我无法让它工作。

```
ISelenium sel = new DefaultSelenium("localhost", 4444, "*chrome", "http://facebook.com");
public void LoginWithEmailAndPassword(string email, string pass)
{
    sel.Start();
    sel.Open("http://www.facebook.com");
    sel.ClickAt("//img[\\@alt='Facebook']", "User clicks on Facebook Login");
    sel.WaitForPopUp("", "3000");
    sel.SelectPopUp("");
    sel.Type("email", email);
    sel.Type("pass", pass);
    sel.KeyPress("pass", "\\13");
    sel.SelectWindow("null");
} 
```

因此，如果有人可以为我提供一些如何执行此操作的示例代码，或者指导我朝着正确的方向前进，我们将不胜感激。

**解决**

通过使用 Firefox Selenium 插件的记录功能，我得到了 id 和我需要让它工作的功能。登录按钮似乎需要一个 XPath 定义，我也是从 Selenium IDE 获得的。

```
ISelenium sel = new DefaultSelenium("localhost", 4444, "*chrome", "http://facebook.com");
public void LoginWithEmailAndPassword(string email, string pass)
{
    sel.Start();
    sel.Open("/");
    sel.Type("id=email", email);
    sel.Type("id=pass", pass);
    sel.Click("//label[@id='loginbutton']/input");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:24:01.077

尝试使用 WebDriver：

```
IWebDriver driver = new FireFoxDriver();
driver.GoToUrl("www.facebook.com");

var element = driver.FindElement(By.Id("email"));
element.SendKeys(email);
...
element = driver.FindElement(By.Id("submit button id"));
element.Click(); 
```

此[链接](http://blog.stuartfleming.co.uk/selenium/getting-started-with-selenium-2-0-webdriver-and-csharp/)可以帮助您入门。

# c++ - 检查 CWinApp 是否存在

> ID：10978914
> 
> 赞同：0
> 
> 时间：2012-06-11T11:06:51.123
> 
> 标签：c++, windows, mfc

我有一个经过编程和使用的流程

```
CWinApp(
   LPCTSTR lpszAppName = NULL 
); 
```

我知道 lpszAppName。

通过使用 lpszAppName，我想检查这个 WinApp 进程是否存在。我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:23:20.607

使用命名互斥锁：

在程序开始时：

```
HANDLE hMutex = CreateMutex(NULL, TRUE, "Your program name");
if (GetLastError() == ERROR_ALREADY_EXISTS)
{
    // Process already running.
    CloseHandle(hMutex);
}
else
{
    // No process running.
} 
```

在程序结束时：

```
if (hMutex)
{
    CloseHandle(hMutex);
    hMutex = NULL;
} 
```

# javascript - 访问和修改 iframe 内容，postMessage 与 jQuery.contents()

> ID：10978919
> 
> 赞同：0
> 
> 时间：2012-06-11T11:07:10.903
> 
> 标签：javascript, jquery, postmessage

这是可能的

`$('#iframe_id').contents().find('.stuff_to_modify).addClass('whatever');`

但是也可以使用[window.postMessage](http://postmessage.freebaseapps.com/)事件，通过从 iframe 向脚本发送 do_something 消息，该脚本在收到消息时进行修改（添加该类）。

我想知道我应该走哪条路，这两种方法有什么区别（缺点，优点）。

jQuery 方法看起来更好，因为我不再需要在 iframe 中包含任何脚本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T11:14:11.537

[window.postMessage](https://developer.mozilla.org/en/DOM/window.postMessage)和您提供的 jQuery 示例之间的主要区别在于， postMessage 支持跨域通信。

这意味着，如果托管 iframe 的父页面来自域 A，而 iframe 的内容来自域 B，则 postMessage 允许您进行通信，而 jQuery 方法将导致安全错误。

您提供的链接是浏览器的 window.postMessage 实现的 java 脚本包装器，并回退到不支持它的浏览器的窗口位置哈希轮询。其他好处列在您的链接本身中。

因此，如果这两个页面来自同一个来源，即来自同一个域，那么您可以使用 jQuery 方法本身。如果它来自两个不同的来源，您可能必须使用 JS 包装器。

# jquery - 推特引导。删除中间的空格 列中的元素

> ID：10978921
> 
> 赞同：2
> 
> 时间：2012-06-11T11:07:14.707
> 
> 标签：jquery, css, ruby-on-rails, ruby-on-rails-3, twitter-bootstrap

我正在尝试使用 ruby​​-on-rails 在 Twitter Bootstrap 中以类似 pinterest 的方式（带有空缺描述的无限 5 列墙）创建空缺列表的框架。

但我有一个问题 - 行的元素之间有空格，就像这里：http: [//i.imgur.com/m9Z5U.png](http://i.imgur.com/m9Z5U.png)

我需要删除这些空格以显示连续的画布。

我用来生成墙的代码：

```
<div class="row">
  <% @employer_vacancies.reverse.each do |employer_vacancy| %>
    <div class="span2 hero-unit left">
      <h2 style="margin-bottom:0px !important";> 
        <%= employer_vacancy.vacancy_title %>  
      </h2>     
      <br>
      <%= employer_vacancy.vacancy_description %>
     </div>
  <% end %>
</div> 
```

我相信它可以通过 JavaScript 甚至 CSS 来实现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T11:12:02.460

如果列数是可变的，CSS 就无法做到这一点，并且您需要它在所有常见的浏览器中都可以工作。

相反，使用 jQuery Masonry： http: [//masonry.desandro.com/](http://masonry.desandro.com/)

还有一个无框架版本，Vanilla Masonry：http: [//vanilla-masonry.desandro.com/](http://vanilla-masonry.desandro.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T11:12:05.250

看看[jQuery Masonry](http://masonry.desandro.com/)。

# python - 如何使用 selenium 2 检查网页上是否存在某些文本？

> ID：10978923
> 
> 赞同：24
> 
> 时间：2012-06-11T11:07:29.110
> 
> 标签：python, automated-tests, selenium-webdriver

嗨，我正在使用 selenium 对网页进行自动化测试。我正在使用 selenium 2 和 python，并且只想在这个框架中得到答案。那么如何检查是否存在某些文本？我试过资产等于，​​但它不起作用？

```
assertEquals(driver.getPageSource().contains("email"), true); 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2017-01-30T08:28:54.457

对于那些仍然感兴趣的人：

**通用解决方案**

```
if text in driver.page_source:
    # text exists in page 
```

**单元测试**：

```
assertTrue(text in driver.page_source) 
```

**pytest**：

```
assert text in driver.page_source 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-06-20T09:03:44.343

您可以使用`driver.page_source`一个简单的正则表达式来检查文本是否存在：

```
import re    
src = driver.page_source
text_found = re.search(r'text_to_search', src)
self.assertNotEqual(text_found, None) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-06-16T08:53:16.883

你可以尝试类似的东西

```
browser = webdriver.Firefox()
browser.get(url)
WebDriverWait(browser, 10).until(EC.element_to_be_clickable((By.LINK_TEXT, 'some link text'))) 
```

基本上上面几行启动 Firefox，导航到指定的 url，使浏览器保持 10 秒，加载一些 url，然后查找特定的链接文本，如果没有找到链接文本，则触发 TimeoutException。

请注意使用的括号数量，如果括号数量与上述不对应，您将遇到错误。

为了能够运行上述语句，必须声明以下内容

```
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC 
```

这使用“element_to_be_clickable” - 可以在此处找到等待条件的完整列表：[Selenium Python：等待](https://selenium-python.readthedocs.io/waits.html)

# shell - 在 Shell 脚本变量中搜索字符串

> ID：10978924
> 
> 赞同：3
> 
> 时间：2012-06-11T11:07:35.273
> 
> 标签：shell, unix

我有一个 shell 脚本变量

```
$a = "Hello i am pass" 
```

`pass`现在我想在变量中搜索“ ” `$a`。

```
if ["$a" == "pass"]; then
echo "`Success`" 
else 
echo "`fail`"
fi 
```

请给我用于搜索 pass 关键字以在上述代码中使用的 shell 脚本。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-11T11:36:40.477

试试这个，

```
#!/bin/bash
a="Hello i am pass";
if [ `echo $a | grep -c "pass" ` -gt 0 ]
then
  echo "Success"
else
  echo "Fail";
fi 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T11:31:13.667

```
flag=`echo $a|awk '{print match($0,"pass")}'`;

if [ $flag -gt 0 ];then

    echo "Success";
else
    echo "fail";

fi 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-06-25T10:12:18.347

这是一种更紧凑的编写方式：

```
echo "$a" | grep "pass" && echo "Found." || echo "Not found." 
```

您可以使用大括号来输入多个指令，而不是简单的`echo`：

```
echo "$a" | grep "pass" && {echo "Found.";exit 0} || {echo "Not found.";exit 1} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-05T11:25:56.113

今天我使用扩展选择参数并使用执行 shell 进行字符串匹配。如果有人会发现同样的问题，任何人都可以使用它

```
if [ `echo $test| grep -c "abc" ` -gt 0 ] 
```

然后回显“成功”，否则回显“失败”；菲

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-16T23:58:11.970

试试这个

```
a="Hello I am Pass"; 
a1="Hello, Passed my First Attempt" 
a2="Passed in First Attempt"

if [[ ${a,,} =~ 'pass' ]]; then echo 'Success'; else echo 'First Attempt in Learning'; fi 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-21T19:55:51.357

短命令：

```
OPC="test"
PROD="This is a test"
[[ ${PROD,,} =~ $OPC ]] && echo -n 1 || echo -n 0 
```

当在“PROD”中找到“OPC”时，答案将是“1”。

# http - 如何在tomcat中记录/调试错误请求？

> ID：10978929
> 
> 赞同：6
> 
> 时间：2012-06-11T11:07:50.360
> 
> 标签：http, tomcat, tomcat6, bad-request

在我们的系统（封闭系统，tomcat 6 中的 java web 应用程序作为服务器，java fat 客户端）中，我们的客户端偶尔会显示“400 - 错误请求”响应。我想在服务器端调试它，但由于请求似乎无效，我在任何地方都看不到它们。我为完整的 tomcat 主机配置了 AccessLogValve，但请求没有出现在那里。我什至没有在 catalina.out 中看到任何内容。

我很想记录这些请求，甚至更好的是根据某些标准转储请求。

有任何想法吗？

我的 server.xml 看起来像这样：

```
<Server port="8005" shutdown="SHUTDOWN">
  <Listener className="org.apache.catalina.core.AprLifecycleListener" SSLEngine="off" />
  <Listener className="org.apache.catalina.core.JasperListener" />
  <Listener className="org.apache.catalina.core.JreMemoryLeakPreventionListener" />
  <Listener className="org.apache.catalina.mbeans.ServerLifecycleListener" />
  <Listener className="org.apache.catalina.mbeans.GlobalResourcesLifecycleListener" />
  <Listener className="org.apache.catalina.mbeans.JmxRemoteLifecycleListener"
rmiServerPortPlatform="9098"
rmiRegistryPortPlatform="9099"
useLocalPorts="true" />
  <Service name="Catalina">
    <Connector port="8020" protocol="HTTP/1.1" redirectPort="8010" connectionTimeout="20000" />
    <Engine name="Catalina" defaultHost="localhost" jvmRoute="cc1">
      <Host name="localhost" appBase="webapps" unpackWARs="true" autoDeploy="false"
         deployOnStartup="true" xmlValidation="false" xmlNamespaceAware="false">
        <Valve className="org.apache.catalina.valves.AccessLogValve"
               directory="logs" prefix="access_log."
               suffix=".txt" pattern="combined" resolveHosts="false" />
      </Host>
    </Engine>
  </Service>
</Server> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:30:14.607

很久以前 - 但无论如何：Tomcat有不同的阀门可能有助于实现这一目标：http: [//tomcat.apache.org/tomcat-6.0-doc/config/valve.html#Request_Dumper_Valve](http://tomcat.apache.org/tomcat-6.0-doc/config/valve.html#Request_Dumper_Valve)

另一种选择是 tcpdump，因为它是 HTTP 和响应代码，似乎可以过滤导致此问题的原始请求。

# iphone - UITapGestureRecognizer 不会在 UIView 子类上启动

> ID：10978931
> 
> 赞同：7
> 
> 时间：2012-06-11T11:08:04.813
> 
> 标签：iphone, objective-c, ios5, uiview, uigesturerecognizer

我创建了 UIView 的自定义子类，因为我需要覆盖 drawRect 方法。我尝试向它添加一个 UITapGestureRecognizer ，但这对我不起作用。在这里，我的 ViewController 的代码：

```
MyCustomView *customView = [[MyCustomView alloc] initWithFrame:CGRectFrame(0, 30, 30, 30)];
[customView setUserInteractionEnabled:YES];

UITapGestureRecognizer *tapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(doSomething)];
[customView addGestureRecognizer:tapGestureRecognizer]; 
```

我不明白为什么当我触摸我的 UIView 子类对象时，手势识别器没有启动。

非常感谢提前！

**解决了！**

我的视图在 UIImageView 上，而 UIImageView 没有`userInteractionEnabled`设置为 YES。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-11T12:01:13.813

**解决了！**

我的视图在 UIImageView 上，而 UIImageView 没有`userInteractionEnabled`设置为 YES。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:13:05.750

确保将其显示在某处 ( `addSubview`)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T11:51:34.717

还要确保 userInteractionEnabled 设置为 true。如果这是真的，请发布创建和连接手势识别器的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T12:00:34.017

在要添加的子视图上将 UserInteractionEnable 检查设置为 true，并在选择器方法中，将对象与它一起传递，即

```
UITapGestureRecognizer *tapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(doSomething:)]; 
```

并使选择器方法为

```
-(void) doSomething:(UITapGestureRecognizer *)gesture; 
```

如果您仍有问题，请告诉我。谢谢！

# javascript - 如何快速加载 Visualforce 页面？

> ID：10978933
> 
> 赞同：0
> 
> 时间：2012-06-11T11:08:13.900
> 
> 标签：javascript, ajax, salesforce, apex-code, visualforce

在这里，我正在使用 Jquery Tab 从 href 加载 Visualforce 页面。现在，当我单击该选项卡页面时，加载良好，但所有链接都禁用了几秒钟。完全加载页面需要一些时间。我在这里提供我的代码。所以请建议我如何快速加载该页面？？？还有一件事我想问的是我想加载图像仍然页面正在加载，当整个页面加载时，加载图像后应该禁用。

```
<div class="demo">
 <div id="tabs">
    <ul>
      <li><a href="/apex/page1?id=001A000000iTVx9">Account</a></li>
      <li><a href="/apex/page2?id=001A000000iTVx9">Transaction</a></li>
      <li><a href="/apex/page3?id=001A000000iTVx9" >Dispute</a></li>
      <li><a href="/apex/page4?id=001A000000iTVx9" >Notes</a></li>
    </ul>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T23:45:36.003

You could try adding `cache="true"` in the `<apex:page>` tags, but if I recall correctly this is `true` by default. The thing is for each page there's a lot of extra javascript files to load etc., and I suspect those get pulled down each time by the plugin you're using.

If you put standard pages into tabs are they any faster? If not, I'd say there's not much you can do, if so, then maybe it's something specific to your pages.

# android - Android SMS 不向国际发送

> ID：10978935
> 
> 赞同：0
> 
> 时间：2012-06-11T11:08:20.423
> 
> 标签：android, sms, telephonymanager

我住在土耳其。我可以使用这种方法向本地号码发送短信：

```
public void sendSMS(String phoneNumber, String message) {
Log.i("NO", phoneNumber);
        PendingIntent sentPI = PendingIntent.getBroadcast(this, 0, new Intent(
                SENT), 0);

        PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
                new Intent(DELIVERED), 0);

        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);

    } 
```

但是当我将号码更改为国际号码时，短信似乎像以前一样发送，但没有到达那个国际号码。我也没有任何例外。

注意：我尝试过从 Android 默认消息传递应用程序手动发送。那时收到消息。所以我不认为这是因为运营商。

你怎么看？这怎么可能？

更新：尝试向朋友的希腊号码发送短信，收到短信。问题继续与伊拉克号码。如果您有非土耳其语、非希腊语号码并希望成为志愿者，请给我发送包含您的号码的消息/邮件，以便我与您核对。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:39:12.520

经过几次测试，结果证明代码没有问题，至少在 Android 部分是这样。这是因为目标设备上的短信接收器软件，这意味着我肯定会发送短信。

谢谢

# javascript - 如何使用 Google Maps JavaScript API v3 加载地图

> ID：10978936
> 
> 赞同：0
> 
> 时间：2012-06-11T11:08:25.380
> 
> 标签：javascript, android, google-maps, google-maps-api-3

如何在任何 Android 应用程序中使用 Google Maps JavaScript API v3。请有人发布一些链接以获取指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:15:21.447

看看[这个](https://developers.google.com/maps/articles/android_v3)，它非常详细地完成了所有步骤

[如何更改视图](https://stackoverflow.com/questions/6471357/changing-streetview-satellite-google-maps-android)

# jquery - 检查用户使用的浏览器类型

> ID：10978940
> 
> 赞同：0
> 
> 时间：2012-06-11T11:08:45.907
> 
> 标签：jquery, html, internet-explorer, firefox, google-chrome

我有一个网站，其中包含一些 jQuery 动画、命令等。它在 Google Chrome 和 Firefox 中运行完美，但在 IE 中却是一个真正的痛苦。

是否可以在我的网页开头插入代码（在加载其他任何内容之前）以检查用户正在使用的浏览器，如果是 IE，则会弹出一个警告框让他（好心）考虑切换到 Firefox 或 Chrome？

**信息**：我对 .NET、PHP 或其他服务器端语言一无所知（到目前为止并不真正需要它）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T05:52:42.143

为什么不只使用 IE-only IF 命令（其他浏览器将它们视为注释）？：

`<!--[if IE]><div id="ie-warning">Please switch browsers!</div><![endif]-->`不需要 JS

对于版本：

`<!--[if IE lte 7]>Your IE is version 7 or lower<![endif]-->`(IE 小于或等于 7) `<!--[if IE gte 8]>Your IE is version 8 or higher<![endif]-->`(IE 大于或等于 8)

对不起，如果我遗漏了什么，但我认为这会奏效。

更多信息： http: [//msdn.microsoft.com/en-us/library/ms537512 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms537512(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T11:10:15.127

你可能想看看这个...... [http://api.jquery.com/jQuery.browser/](http://api.jquery.com/jQuery.browser/)

我用过这是我的一些网页/网站...

```
if (!$.browser.mozilla || jQuery.browser.msie) {

// do something....

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T11:11:24.523

使用 jQuery.browser 属性

参考链接

[http://api.jquery.com/jQuery.browser/](http://api.jquery.com/jQuery.browser/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T11:12:05.147

如果您已经在使用 jQuery，则可以在实现[jQuery.browser](http://api.jquery.com/jQuery.browser/)时使用它来检测浏览器：

浏览器信息：

```
<script>
jQuery.each(jQuery.browser, function(i, val) {
  $("<div>" + i + " : <span>" + val + "</span>").appendTo( document.body );
});
</script> 
```

（示例取自[手册](http://api.jquery.com/jQuery.browser/)）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T11:12:14.240

这不是一个好的解决方案，但您可以设置一个变量`isIE = true`，如条件注释。

# networking - iperf 如何计算吞吐量和抖动？

> ID：10978942
> 
> 赞同：5
> 
> 时间：2012-06-11T11:08:55.883
> 
> 标签：networking, bandwidth

我读过 iperf 基本上会尝试尽可能快地通过连接发送尽可能多的信息来报告所达到的吞吐量。该工具在确定两台机器之间的链接可以提供的数据量时特别有用。

是否可以通过发送常规数据来收集相同的结果，就像不测试数据一样？

我想做的是这个；在前台发送数据而在后台收集统计信息（吞吐量和抖动）。

那么谁能告诉我 iperf 如何计算这两个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T07:19:44.397

这是我发现的最接近的东西

[http://openmaniak.com/iperf.php](http://openmaniak.com/iperf.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-10T18:21:23.343

我有关于 iperf 如何工作的类似问题。请参阅以下帖子，我在其中进行了一些研究并给出了概述。

[iperf 如何计算网络统计信息](https://stackoverflow.com/questions/37063074/how-iperf-calculates-network-statistics)

通常，在 iperf 中，它在发送方的有效负载中嵌入时间戳和序列号。当接收器接收到数据包时，它会提取这些内容并计算统计信息。您可以在帖子中找到更多详细信息。

# mysql - 如何知道mysql表中插入的第一个值

> ID：10978954
> 
> 赞同：0
> 
> 时间：2012-06-11T11:10:08.853
> 
> 标签：mysql

好的，我有一个包含多个值的表。现在我想知道哪个元组是最旧的（插入表中的所有元组中的第一个）。有什么办法知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:11:50.680

根据您的表结构，您有多种选择。由于缺少这一点，因此很难为您提供帮助。我的猜测是按时间戳或 id 排序并得到最旧的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:31:16.013

实现此目的的最佳方法是，如果您的表中有一个`datetime`或`timestamp`列，其中包含记录插入的日期。然后，您可以参考该日期列并获取最旧的记录。

其他方式，可能不准确；是按有限制的字段排序；像

```
SELECT   *
FROM     your_table
WHERE    value='value1'
ORDER BY field1 
LIMIT    1 
```

# c# - XML 的 ORM 框架

> ID：10978955
> 
> 赞同：1
> 
> 时间：2012-06-11T11:10:13.037
> 
> 标签：c#, xml, orm, xml-serialization

我总是必须编写一个 XML 序列化程序类，以便在我使用 XML 文件作为结构化信息存储的不同应用程序中将数据保存到磁盘。

有没有一种工具可以提供 XML 结构的示例，它会生成一个 c-sharp 类来处理这种 xml 结构？

例如，我想使用“项目”的 XML 存储

```
<projectsInfo>
    <projectTypes>
        <Type>super</Type>
        <Type>best</Type>
    </projectTypes>

    <projects>
        <project>
              <name>One</name>
              <p-type>best</p-type>
        </project>
    </projects>    
</projectsInfo> 
```

它会生成一个支持 Linq-to-XML 的类来添加/远程类型和项目实例。

也许这已经是我不知道的常见解决方案，或者每个人都在使用内存对象的内置 XML 序列化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:16:51.057

c# has the `XmlSerializer` class that is designed to serialise objects to XML files. You can simply annotate your class with various attributes to format the XML. (eg `[XmlElement]`,`[XmlAttribute]` etc.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T11:23:23.883

如果您有 XSD，则可以使用在 Visual Studio 命令行中打开的 xsd.exe 生成它。

更多信息： http: [//msdn.microsoft.com/en-us/library/x6c1kb0s (VS.71).aspx](http://msdn.microsoft.com/en-us/library/x6c1kb0s(VS.71).aspx)

这将自动从 XSD 生成类，并且可以从 XML 生成 XSD。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T11:24:22.370

您可以使用 Visual Studio 提供的 XSD 实用程序基于您的 xml 文件生成类/模式。一旦有了类，就可以使用 XmlSerializer 将文件序列化/反序列化为类的实例。LINQ 将使用实现的类中的任何属性`IEnumerable<T>`（任何集合）。
使用 .net 4，您还可以使用[dynamic](http://blogs.msdn.com/b/csharpfaq/archive/2009/10/19/dynamic-in-c-4-0-creating-wrappers-with-dynamicobject.aspx)关键字来构建动态 xml 包装器，但我不确定它是否太舒服/有用

# blackberry - 如果 edifield 为空，则获取 NullPointerException 以显示状态（或）警报

> ID：10978958
> 
> 赞同：0
> 
> 时间：2012-06-11T11:10:27.550
> 
> 标签：blackberry, dialog, status

我想为我的编辑字段执行验证。所以我正在编写验证`ButtonField`。`setChangeListener`方法。如果`editField`为空并且单击按钮时，我必须显示该字段为空。为了显示我尝试使用`status.show()`和`dialog.alert()`方法的消息。但两者都在生成一个`NullPointerException`. 问题是什么？任何人都可以帮助解决这个问题还是有其他解决方案可以解决这个问题？

我这样写我的代码：

```
btnencrypt = new ButtonField("Encrypt");
        btnencrypt.setChangeListener(new FieldChangeListener() {

            public void fieldChanged(Field field, int context) {
                // TODO Auto-generated method stub

                //getphonenos();
                System.out.println("savedPhone no are in compose encrypt:"+savedphoneno);
                encryptClicked= true;

                if (savedphoneno.equals("")) { **Getting the exception here....**

                    Dialog.alert("Please select valid contact");     
                } else {
                    if (!(savedphoneno.equals(""))) {

                        if (edmsg.getText().toString().trim().equals("")) {
                            Dialog.alert("Please enter message");

                        }else {

                            int index = savedphoneno.indexOf(",");
                            if (index < 0) {
                                encryptBTNClicked = true;
                                try {
                                    base64msgString = encrypt(savedphoneno);
                                } catch (CryptoException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                } catch (IOException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                }
                                edencryptmsg.setText(base64msgString);
                            } else {
                                //encryptTV.setText("");
                                edencryptmsg
                                .setText("Sending data to multiple receipients,"
                                        + "can't show the encrypted msg,as it varies");
                                //edencryptmsg.setTextColor(Color.MAGENTA);
                            }
                            btnencrypt.setEnabled(false);
                            btnclear.setEnabled(false);
                        }

                    }

                }
            }

        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:23:30.043

我有一个有用的方法，我将它放入我的 StringUtils 类中，用于检查字符串是否有效。

```
/**
 * Tests if a string is a non-null, non-empty string. This can be called to
 * determine if the string should be displayed, or not.
 * 
 * @param text
 *        String to test.
 * @return
 *         If <code>text</code> is <code>null</code>, returns
 *         <code>false</code>. <br>
 *         If <code>text</code> is an empty string (""), returns
 *         <code>false</code>. <br>
 *         Else returns <code>true</code>.
 */
public static boolean isNonBlankString(String text)
{
    // null text -> false
    if (text == null)
        return false;

    // empty text -> false
    if ("".equals(text))
        return false;

    return true;
} 
```

这将帮助您回答 Rupak 的问题。

# java - Java如何对BigDecimal值进行操作

> ID：10978960
> 
> 赞同：-3
> 
> 时间：2012-06-11T11:10:37.373
> 
> 标签：java, algorithm, bigdecimal

鉴于以下条件：

*   两个 BigDecimal 值：**b1**和**b2**；
*   **x** - 整数；
*   **b1 > b2** ;

我需要找到

**x**的最小值使得

**b2 * x > b1**

例如，如果所有值 - 整数，则：

```
 if ( b1%b2 == 0 ) {
   x = b1/b2;
 } else {
   x = b1/b2 +1; 
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:12:59.220

查看[BigDecimal 类的 API](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html)。您会发现名称如 的方法[`add(BigDecimal)`](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html#add%28java.math.BigDecimal%29)，每个基本运算符都有一个。使用这些方法。

例如：

```
if(b1.divide(b2).equals(BigDecimal.ZERO)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T11:18:43.287

你可以使用

```
BigInteger x = b1.divide(b2, 0, RoundingMode.CEILING).toBigInteger() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T11:21:51.767

尝试：

```
 BigDecimal bd1= .....;
    BigDecimal bd2= .....;

    BigDecimal tmp = bd2;
    int x = 0;
    while(tmp.compareTo(bd1) < 1){
        x++;
        tmp = bd2.multiply(new BigDecimal(x));
    }
    System.out.println("!!!!!!!!!!! " + x); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T11:31:24.010

像这样的东西？

```
 BigDecimal b1 = new BigDecimal(41);
        BigDecimal b2 = new BigDecimal(10);
        BigDecimal xBigDec;
        BigInteger xBig;
        int x;
        if(BigDecimal.ZERO.equals(b2)){
            if(BigDecimal.ZERO.compareTo(b2)>0){
               x = 0;
            }else{
              //Can't do!
            }
        }else{
            xBigDec = b1.divide(b2);
            xBig = (xBigDec).toBigInteger();
            //you need to expand for negatives here
            if(xBig.compareTo(BigInteger.valueOf(Integer.MAX_VALUE))>0){
                x = Integer.MAX_VALUE;
            }else{
                x = xBig.intValue();
                if(b2.multiply(new BigDecimal(x)).equals(b1)){
                    x++;
                }
            }
        } 
```

# c# - 支持多平台的 WCF Restful 服务文件上传

> ID：10978961
> 
> 赞同：1
> 
> 时间：2012-06-11T11:10:37.223
> 
> 标签：c#, android, iphone, .net, wcf

谁能告诉我如何创建一个 WCF Rest 服务，通过它我可以使用 android、iphone 和 WP7 将文件上传到服务器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T14:29:00.157

感谢您的帮助，我能够为多个平台创建文件上传 wcf 休息服务。

```
public void FileUpload(string fileName, Stream fileStream)
{
    FileStream fileToupload = new FileStream("c:\\FileUpload\\" + fileName, FileMode.Create);

    byte[] bytearray = new byte[10000];
    int bytesRead, totalBytesRead = 0;
    do
    {
        bytesRead = fileStream.Read(bytearray, 0, bytearray.Length);
        totalBytesRead += bytesRead;
    } while (bytesRead > 0);

    fileToupload.Write(bytearray, 0, bytearray.Length);
    fileToupload.Close();
    fileToupload.Dispose();
}

[ServiceContract]
public interface IImageUpload
{
    [OperationContract]
    [WebInvoke(Method = "POST", UriTemplate = "FileUpload/{fileName}")]
    void FileUpload(string fileName, Stream fileStream); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T11:20:32.970

任何`Rest service`都可以使用 Android、iphone 和 WP7 访问。

一种选择是使用`WCF`or创建一个 Rest POST 服务`MVC`，并将图像`data`作为 base64 字符串。

# c# - ASP.NET work and PDF

> ID：10978973
> 
> 赞同：1
> 
> 时间：2012-06-11T11:11:14.213
> 
> 标签：c#, asp.net, pdf

I want to use PDF file in the webpage. I want the PDF to open in a part of the Page. What code can I use? Can I use Panel?
I know how to open the PDF in full webpage but I want to open the PDF in part of the page. :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T11:16:04.807

You could render pdf file on part of your page using [object](http://www.w3schools.com/tags/tag_object.asp) or [iframe](http://www.w3schools.com/tags/tag_iframe.asp) HTML tags.

# php - 需要在mongo中使用php的map reduce函数

> ID：10978975
> 
> 赞同：0
> 
> 时间：2012-06-11T11:11:22.257
> 
> 标签：php, mongodb, mapreduce

在php中需要mongo的map reduce函数

这是我的 mongo 结构

```
[_id] => MongoId Object (
    [$id] => 4fcf2f2313cfcd2454500000d
)
[id] => 454
[table] => people
[news] => Array (
    [03-06-2012] => 2
    [04-06-2012] => 3
    [05-06-2012] => 5
    [06-06-2012] => 4
) 
```

在这里，我尝试用下面的代码对数组新闻求和，

```
 $map = new MongoCode('function() { emit(this.news, 1); }');
    $reduce = new MongoCode('function(previous, current) {
                    var count = 0;
                    for (index in current) {
                        count = count + current[index];
                    }
                    return count;
                }');

    $sales = $db->command(array(
        'mapreduce' => 'mycollection',
        'map' => $map,
        'reduce' => $reduce,
        'query' => array('table' => 'people'),
        'out'  => 'news'
    ));

    //pr($sales);exit;

    $users = $db->selectCollection($sales['result'])->find();

    foreach ($users as $user) {
        //echo "{$user['_id']} had {$user['value']} sale(s).\n";
        pr($user);
    } 
```

什么时候`pr($user)`

```
Array
(
    [_id] => Array
    (
        [04-06-2012] => 0
        [08-06-2012] => 2
        [11-06-2012] => 6
    )

    [value] => 39540
) 
```

我预计值将是 8 而不是 39540。

如何更正此函数以及如何将字段总和作为“新闻”的数组总和添加到原始集合（mycollection）？

我不熟悉 mongo 中的 map reduce 功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T23:45:50.583

调用 时`emit()`，第一个参数是您将要减少的键（或分组，对于本示例）。第二个参数是为该键发出的值，可以是任何值。`news`对于您的示例，您可能意味着使用文档的 ID 作为键来发出字段中所有值的总和：

```
var map = function() {
    var total = 0;
    for (count in this.news) {
        total += count;
    }
    emit(this._id, total);
} 
```

在这种情况下，可以使用占位符 reduce 函数（因为每个发出的键都是唯一的，所以几乎不需要做任何缩减）：

```
var reduce = function(key, values) {
    var total = 0;
    values.forEach(function(v) { total += v; });
    return total;
} 
```

[但是，正如我在Google Group 帖子](https://groups.google.com/d/topic/mongodb-user/s1BJq7ftcnw/discussion)中提到的，您最好使用纯 PHP 执行此操作：

```
$cursor = $collection->find(array(), array('news' => 1));
$cursor->snapshot();

foreach ($cursor as $document) {
    $collection->update(
        array('_id' => $document['_id']),
        array('$set' => array('sum' => array_sum($document['news']))),
        array('multiple' => false)
    );
} 
```

使用 map/reduce，您仍然需要检查其结果并更新您的记录。这将避免通过 Mongo 执行 JavaScript 的需要，并且应该具有更高的性能。如果您可以使用 $inc`news`在每个文档修改字段时更新总和，那就更好了。上面的代码片段对于初始化集合中的字段仍然有用`sum`，或者如果事情与每个文档的增量不同步，则可以纠正任何漂移。

注意：请参阅文档中的[snapshot()](https://groups.google.com/d/topic/mongodb-user/s1BJq7ftcnw/discussion)以了解上述示例中该方法调用背后的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:03:54.970

虽然 jmikola 的回答给了我处理 mongo map reduce 函数的正确轨道。

我添加这个答案是为了帮助未来的访客。

以下`map-reduce`功能完全符合我的要求。这会将新闻字段中的所有值加到`news`命令中创建的新集合中，方法是添加 ( `"out" => "news"`)。

**Map-Reduce 函数**

```
$map = new MongoCode('function() {
            var total = 0;
            for (count in this.news) {
            total +=  this.news[count];
            }
            emit(this._id, {id: this.id, total: total});
        }');
$reduce = new MongoCode('function(key, values) {
            var result = {id: null, total: 0};
            values.forEach(function(v) {
            result.id = v.id;
            result.total = v.total;
             });
            return result;
        }');

$sales = $db->command(array(
    'mapreduce' => 'mycollection', // collection name
    'map' => $map,
    'reduce' => $reduce,
    'query' => array('table' => 'people'),
    "out" => "news" // new collection name
)); 
```

结果将与实际文档`news`的总和一起收集`total``id`

**输出**

```
[_id] => MongoId Object (
    [$id] => 4fd8993a13cfcd4e42000000
)
[value] => Array (
    [id] => 454
    [total] => 14
) 
```

# javascript - 使用 javascript 和图形 api 将照片发布到 facebook 页面

> ID：10978976
> 
> 赞同：0
> 
> 时间：2012-06-11T11:11:22.723
> 
> 标签：javascript, html, facebook, facebook-graph-api

我正在使用 Facebook JavaScript sdk 将照片发布到一些粉丝页面。这是我的代码

```
<form enctype="multipart/form-data" method="post"  action="https://graph.facebook.com/<page_id>/feed" target="ifram_name">
      <input name="source" type="file" style="font-size:13px;" />
      <input type="hidden" name="to" value="113342002047830"/>
      <input type="hidden" name="access_token" value="user_accesstoken"/>
      <input type="hidden" name="type" value="photo" />
</form> 
```

它说“**缺少消息或附件**”。

我也尝试将“action”更改为“https://graph.facebook.com//feed”，但照片随后会上传到用户的相册。

谁能告诉我的代码中缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:58:06.673

您应该使用`photos`连接[`user`](https://developers.facebook.com/docs/reference/api/user/#photos)，[`page`](https://developers.facebook.com/docs/reference/api/page/#photos)或[`album`](https://developers.facebook.com/docs/reference/api/album/#photos)（不是`feed`）并`access_token`为用户/页面提供活动。

```
<form action="https://graph.facebook.com/PAGE_ID/photos"
      method="post" enctype="multipart/form-data">
  <input name="source" type="file">
  <input type="hidden" name="to" value="113342002047830"/>
  <input type="hidden" name="access_token" value="user_accesstoken"/>
</form> 
```

您可以在（岁）博客文章中阅读更多详细信息[How-To: Use the Graph API to Upload Photos to a user's profile](https://developers.facebook.com/blog/post/498/)。

请注意，这将上传文件，但您的应用程序/代码不会收到通知，用户将看到如下响应：

```
{
   "id": "1001207389476"
} 
```

如果不希望这样做，请使用服务器端技术上传照片。另一种选择是使用带有`url`参数的 JS-SDK：

```
FB.api('/PAGE_ID/photos', 'post', {
  url: 'http://example.com/image.png',
  message: 'Upload demo'
}, function(response){
  if (response && response.id)
    console.log('Photo uploaded', response.id);
}); 
```

**更新：**
请注意，您应该使用页面`access_token`才能发布到页面的墙上，如果您提供用户照片，则无论参数`access_token`如何都会上传到用户的应用程序相册。有关如何获取for 页面的详细信息，`to`请参阅[Authenticating as a Page 。](https://developers.facebook.com/docs/authentication/pages/)`access_token`

# asp.net-mvc - 本地化的 scriptbundle 解决方案

> ID：10978979
> 
> 赞同：11
> 
> 时间：2012-06-11T11:11:32.947
> 
> 标签：asp.net-mvc, localization, bundling-and-minification, asp.net-optimization

您好我目前正在使用带有 System.Web.Optimization 的 asp.net MVC 4 rc。由于我的网站需要根据用户偏好进行本地化，因此我正在使用 jquery.globalize 插件。

我非常想继承 ScriptBundle 类并根据`System.Threading.Thread.CurrentThread.CurrentUICulture`. 看起来像这样：

```
bundles.Add(new LocalizedScriptBundle("~/bundles/jqueryglobal")
                             .Include("~/Scripts/jquery.globalize/globalize.js")
                             .Include("~/Scripts/jquery.globalize/cultures/globalize.culture.{0}.js", 
                                       () => new object[] { Thread.CurrentThread.CurrentUICulture })
                    )); 
```

例如，如果 ui 文化是“en-GB”，我希望拾取以下文件（当然缩小，如果可能的话也缓存，直到脚本文件或 currentui 文化改变）。

*   “~/Scripts/jquery.globalize/globalize.js”
*   "~/Scripts/jquery.globalize/globalize-en-GB.js" <-- 如果此文件在服务器文件系统上不存在，则回退到 globalize-en.js。

我尝试使用以下内容重载 Include 方法，但这不起作用，因为它不是根据请求进行评估，而是在应用程序启动时进行评估。

```
public class LocalizedScriptBundle : ScriptBundle
{
    public LocalizedScriptBundle(string virtualPath)
        : base(virtualPath) { 
    }

    public Bundle Include(string virtualPathMask, Func<object[]> getargs) {
        string virtualPath = string.Format(virtualPathMask, getargs());
        this.Include(virtualPath);
        return this;
    }

} 
```

谢谢

康斯坦丁诺斯

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T22:47:04.807

没错，bundle 应该只在应用启动前配置。否则，在多服务器场景中，如果对捆绑包的请求被路由到为页面提供服务的服务器之外的另一台服务器，则不会找到对捆绑资源的请求。

那有意义吗？基本上，您的所有捆绑包都需要提前配置和定义，而不是根据每个请求动态注册。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-05T15:10:37.390

看看：[https ://stackoverflow.com/questions/18509506/search-and-replace-in-javascript-before-bundling](https://stackoverflow.com/questions/18509506/search-and-replace-in-javascript-before-bundling)

我这样编码以满足我的需要：

```
public class MultiLanguageBundler : IBundleTransform
{
    public void Process(BundleContext context, BundleResponse bundle)
    {
        var content = new StringBuilder();
        var uicult = Thread.CurrentThread.CurrentUICulture.ToString();

        var localizedstrings = GetFileFullPath(uicult);
        if (!File.Exists(localizedstrings))
        {
            localizedstrings = GetFileFullPath(string.Empty);
        }

        using (var fs = new FileStream(localizedstrings, FileMode.Open, FileAccess.Read))
        {
            var m_streamReader = new StreamReader(fs);
            var str = m_streamReader.ReadToEnd();

            content.Append(str);
            content.AppendLine();
        }

        foreach (var file in bundle.Files)
        {
            var f = file.VirtualFile.Name ?? "";

            if (!f.Contains("localizedstrings"))
            {
                using (var reader = new StreamReader(VirtualPathProvider.OpenFile(file.VirtualFile.VirtualPath)))
                {
                    content.Append(reader.ReadToEnd());
                    content.AppendLine();
                }
            }
        }

        bundle.ContentType = "text/javascript";
        bundle.Content = content.ToString();
    }

    private string GetFileFullPath(string uicult)
    {
        if (uicult.StartsWith("en"))
            uicult = string.Empty;
        else if (!string.IsNullOrEmpty(uicult))
            uicult = ("." + uicult);

        return Kit.ToAbsolutePath(string.Format("~/Scripts/locale/localizedstrings{0}.js", uicult));
    }
} 
```

# ruby-on-rails - 提交到同一页面时如何添加到 Rails 会话？

> ID：10978980
> 
> 赞同：1
> 
> 时间：2012-06-11T11:11:38.220
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我需要一行中的多个表单页面，每个表单都提交到同一个索引页面。根据输入字段的验证方式，每次提交都会显示不同的视图。

控制器：

```
class FormsController < ApplicationController
    include FormsHelper

    def index
        #if we know what view to show, show it, else show first view in the flow
        if(!session.has_key?(:flow_page))
            set_flow_page
        end

        # if form was submitted, I want to add this pages submit data to what I already have in session[:quote]
        if(params.has_key?(:form))
            temp = params[:form]
            form = session[:quote]
            form.merge(temp)
            #session[:quote].deep_merge!(session[:temp])
        end

        # other stuff
        if params[:back] == "Back" && params[:flow][:previous_page] != "refused"
            session[:flow_page] = params[:flow][:previous_page]
        end

        if params[:next] == "Next"
            session[:flow_page] = params[:flow][:next_page]
        end

    end

end 
```

有人能告诉我如何将每个视图中的表单数据添加到 session[:quote] 中，而不会每次都覆盖整个块吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:22:49.840

不确定您要做什么，但假设您想保留表单的历史记录，这些表单在提交时遇到了相同的方法。要使下面的代码正常工作，您需要为每个表单添加带有 UID 的隐藏表单字段。将该字段命名为“form_name”

```
 # init form cache, if not initiated before
  session[:quote] = {} unless session.has_key(:quote)

  # keys to be excluded
  filter_out = [:form_name,:controller, :action]

  # store to cache, with form UID / we filter out params we don't need
  session[params[:form_name]] = params.dup.keep_if { |k,v| !filter_out.include?(k) } 
```

# java - 创建 bean 时出错...无法加载 JDBC 驱动程序类 [oracle.jdbc.driver.OracleDriver]

> ID：10978983
> 
> 赞同：4
> 
> 时间：2012-06-11T11:11:48.397
> 
> 标签：java, spring, jdbc

我已经编写了代码以在 Spring 上使用 JDBC 运行查询，但出现异常（见下文）

这是我的 context.xml

```
 <bean id="dataSource" 
       class="org.springframework.jdbc.datasource.DriverManagerDataSource">
   <property name="driverClassName" value="oracle.jdbc.driver.OracleDriver"/>
   <property name="url" value="jdbc:oracle:thin:@Mohsen-PC:1521:mydb"/>
   <property name="username" value="system"/>
   <property name="password" value="123"/>    
 </bean>

 <bean id="lobHandler" class="org.springframework.jdbc.support.lob.OracleLobHandler">
   <property name="nativeJdbcExtractor" ref="nativeJdbcExtractor"/>
 </bean>

 <bean id="nativeJdbcExtractor" 
     class="org.springframework.jdbc.support.nativejdbc.CommonsDbcpNativeJdbcExtractor"/>

 <bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
   <property name="dataSource" ref="dataSource"/>
 </bean>
</beans> 
```

main.java

```
import javax.sql.DataSource;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import org.springframework.jdbc.core.JdbcTemplate;

class Main {

  public static void main(String args[]) throws Exception {

    ApplicationContext ac = new ClassPathXmlApplicationContext("context.xml");

    DataSource dataSource = (DataSource) ac.getBean("dataSource");

    JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);

    System.out.println(jdbcTemplate.queryForList("select EMPLOYEE_ID from EMPLOYEE", 
                                                  Long.class));
  }
} 
```

我看到的例外是：

```
Exception in thread "main" org.springframework.beans.factory.BeanCreationException: 
  Error creating bean with name 'dataSource' defined in class path resource [context.xml]: 
  Error setting property values; nested exception is 
  org.springframework.beans.PropertyBatchUpdateException; nested PropertyAccessExceptions (1) are:
  PropertyAccessException 1: org.springframework.beans.MethodInvocationException: 
  Property 'driverClassName' threw exception; nested exception is 
  java.lang.IllegalStateException: Could not load JDBC driver class 
  [oracle.jdbc.driver.OracleDriver] at 
  org.springframework.beans.factory.support.
                             AbstractAutowireCapableBeanFactory.applyPropertyValues(
                                                AbstractAutowireCapableBeanFactory.java:1396) 
```

编辑：削减堆栈跟踪的其余部分，因为上述异常足以说明问题。

这里出了什么问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-11T11:17:15.847

Looks like you are missing the oracle jdbc driver in your classpath. Please download the jar file from [this path](http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html) and add this to your classpath.

EDITED
Spring jdbc is a template layer which works on top of the raw jdbc layer. It just provides us some utility methods to make the database access easier. This layer internally needs the jdbc layer to work so which every database you want to connect to that database's driver also has to be included, in your case you need to include Oracle driver.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T11:18:28.170

看起来带有 JDBC 驱动程序的（Oracle 提供的）jar 文件不在您的类路径中。

请注意堆栈跟踪的部分内容：“IllegalStateException：无法加载 JDBC 驱动程序类 [oracle.jdbc.driver.OracleDriver”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-30T04:46:25.003

在我的情况下，问题已解决，将范围设置为`runtime`：

```
 <dependency>
        <groupId>com.microsoft.sqlserver</groupId>
        <artifactId>mssql-jdbc</artifactId>
        <version>7.0.0.jre8</version>
        <scope>runtime</scope>
    </dependency> 
```

参考：[我什么时候需要具有运行时范围的 Maven 依赖项](https://stackoverflow.com/a/45843082/3908401)

# sms - 修改 ASN.1 BER 编码的 CDR 文件

> ID：10978989
> 
> 赞同：1
> 
> 时间：2012-06-11T11:12:13.013
> 
> 标签：sms, voice, asn.1, tibco, telecommunication

我正在处理一些 CDR（通话详细记录）。我不知道它到底是哪个文件？但我认为这是“ASN.1”格式的 BER 编码文件。现在我的问题是我想修改这些文件中的一些数据，但我不知道我可以使用哪个编辑器或解码器来修改这些文件。我搜索了很多，发现了很多 ASN.1 Decorder 以及 ASN.1 BSR 查看器/编辑器，但没有人允许我想要执行的操作。

此 CDR 应包含客户详细信息、电话号码、电信服务（电话、SMS、MMS）等。

CDR 名称之一是 - GGSN01_20120105000102_56641-09-12-01-09%3A30 并且文件类型是 - 文件

没有其他信息可用。当我在一些文本编辑器中打开这个文件时，它会显示一些矩形和一些文本数据。

任何电信的人都可以帮助我。我是电信领域的新手。

请询问您是否需要更多信息。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:28:40.750

您需要了解 ASN.1 和 BER 才能正确编辑您的文件。BER 是一种二进制格式，而不是 ASCII 文本，因此是您在文本编辑器中看到的。只有在不更改字符串长度的情况下，即使修改任何嵌入的纯文本也是安全的；BER 使用编码长度的嵌套结构，因此字符串值长度的变化需要调整封闭结构的编码长度。此外，为了真正了解您的数据是什么，您需要知道描述它的 ASN.1（定义描述编码数据的类型）。

您可以使用[ASN.1 editor](http://www.obj-sys.com/asn1-viewer.php)之类的工具，但如果没有必要的背景知识，我认为它对您没有太大帮助。[您可以点击此资源页面](http://www.obj-sys.com/resources.php)上的各种链接以获取有关 ASN.1 的更多信息。（完全披露：我目前是 Obj-Sys 员工）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T18:42:26.347

寻找像 enber 和 unber 这样的工具，它们是作为调试工具提供的，费用是 Lev Walkin 的 asn.1-compiler。至少你从他们那里得到了文本格式。

系统解决方案当然是编写一个程序来读取 BER 文件，应用 schnages，然后写出更改后的 BER 文件。为此，您需要您的 CDR 格式的 ASN.1-Specification 文件（通常可以在标准的规范中找到，例如您正在使用的 IMS）一个 asn1 编译器，例如 Lev's 和一些编程技能。

# asp.net - 缓存项目损坏或混淆

> ID：10978991
> 
> 赞同：0
> 
> 时间：2012-06-11T11:12:23.783
> 
> 标签：asp.net, caching

我对一个缓存了多个对象的网站有一个非常奇怪的问题。我们有很多缓存数据表、字符串、布尔值和其他东西，以便在以后的请求中快速获取。

有时我们会收到一个周期性错误，看起来某些缓存项已经混淆了。这种情况的一个例子是，当一段代码从缓存中获取一个 DataTable，然后尝试访问该 DataTable 的某个列时。然后我们看到一个黄色的死屏，除了“找不到列 [ColumnName]”，其中“ColumnName”当然是应该在 DataTable 中的某个列名。当我用一个自制的小工具检查缓存项时，我发现缓存项中有一个完全不同的 DataTable。几乎就像一些缓存项目被混淆了。

有人知道这是怎么发生的吗？

我们无法重现该错误。它以明显随机的间隔发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:59:31.757

## 什么问题

当您将项目添加到缓存时，您需要锁定创建它们并添加到缓存的进程。

首先让我们**澄清一下缓存是保留对您的数据的引用**，而不是克隆它们，下不知道什么不是那个数据！参考： http: [//msdn.microsoft.com/en-us/library/6hbbsfk6 (VS.71).aspx](http://msdn.microsoft.com/en-us/library/6hbbsfk6(VS.71).aspx)

其次澄清页面的默认**会话是锁定页面**并且通过使大部分请求安全，因为所有用户锁定直到页面完全加载和发送。

## 当它出现时

因此，当您尝试通过线程、处理程序或关闭会话的页面进行缓存时，可能会出现锁定问题。

## 如何锁定

如果你只使用一个池，那么简单`lock(object){}`可以工作，如果你使用多个池，那么你需要使用`mutex()`锁

如果您稍后更改它们并且仍然存在于缓存中，则需要锁定制作数据的完整过程，或者如果您克隆它们，则只锁定缓存引用。

例如，如果您从缓存中读取了一些数据，那么在您编辑它们时，如果其他人读取相同的缓存，它将获得损坏的数据，因为缓存为您提供了对它们的引用。

希望这一切都有帮助。

# php - Apple 使用 php 推送通知

> ID：10978995
> 
> 赞同：0
> 
> 时间：2012-06-11T11:12:35.907
> 
> 标签：php, apple-push-notifications

嗨，我有一个 PHP 脚本可以通过苹果推送通知服务器向设备发送推送通知。我想知道是否有任何方法可以在特定时间设置苹果推送通知，当时间发生时苹果将推送通知发送到设备。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:17:01.540

No. The notification will be pushed to the device as soon as possible. You can see all the possible parameters you can send [here](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html). If you want to schedule it for a certain time, you'll have to do that on your server and push it to Apple at that time.

# xquery - 在 Xquery 中使用 "And" 、 "Or" 运算符

> ID：10978998
> 
> 赞同：1
> 
> 时间：2012-06-11T11:12:57.407
> 
> 标签：xquery, xpath-2.0

让我们考虑一个例子，

```
<li>
    <div id="comments-list-245667" class="comments yui-u">
        <h3><span class="fn n">Ram</span></h3>
    </div>
    <div id="comments-list-245687" class="comments yui-u">
        <h3><span class="fn n"><a href='http://www.xyz.com' rel='external nofollow' class='url url'>laxman</a></span></h3>
    </div>
 </li> 
```

现在如何使用“and”或“or”运算符从节点获取“Ram”和“laxman”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T04:02:27.837

**使用**：

```
/*/*/h3/(span[not(*)] | span/a)/string() 
```

这会产生一个字符串值的序列，其中每个`span`没有元素子元素，或者每个`a`是a 的子元素`span`和那个（`span`元素是元素的子`h3`元素，即顶部元素的孙子元素） XML 文档。

**顺便说一句，上面恰好也是一个纯 XPath 2.0 表达式**（XPath 2.0 是 XQuery 的一个子集）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:28:30.973

假设大写并不重要（在 XML 中，您有“laxman”，在您的问题“Laxman”中）并且您想要获取`<li>`s（否则，“and”将不合理，但如果您愿意，请移动一些轴步骤进/出谓词）。每条线都是一个替代品。

或者：

```
/li[.//h3//*[lower-case(.) = ("ram", "laxman")]]
/li[.//h3//*[lower-case(.) = "ram"] or .//h3//*[lower-case(.) = "laxman"]] 
```

和：

```
/li[.//h3//*[lower-case(.) = "ram"]][.//h3//*[lower-case(.) = "laxman"]]
/li[.//h3//*[lower-case(.) = "ram"] and .//h3//*[lower-case(.) = "laxman"]] 
```

第一个 or-alternative 展示了[XQuery 运算符的集合语义](https://stackoverflow.com/questions/9196310/semantics-of-and)。