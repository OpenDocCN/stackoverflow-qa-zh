# StackOverflow 问答 11257000-11257999

# php - 尝试从 php 代码通过 smpp 服务器发送短信时出现无效凭证错误

> ID：11257000
> 
> 赞同：1
> 
> 时间：2012-06-29T06:22:38.293
> 
> 标签：php, smpp

我们有一个 smpp 服务器

1.  IP地址
2.  用户名
3.  密码
4.  端口号

在将这些详细信息输入代码并尝试发送短信时，我们收到以下错误消息：-

> Bind Transmitter PDU: 0 100 101 109 111 49 50 51 0 97 99 116 105 118 101 0 51 0 0 0 发送PDU, len == 36 发送PDU, header-len == 16 发送PDU, command_id == 2 试图读取PDU。读取 PDU：16 个字节。流 len：12 命令 id：2。命令状态：13。序列号：1。得到 CM_BIND_TRANSMITTER_RESP。警告：unpack() [function.unpack]：类型 a：输入不足，需要 1，在 /home/acftp052/public_html/smpp/smppclass.php 的第 580 行系统 id 中有 0：。收到的 PDU：€(0)(0)(2)(0)(0)(0)(13)(0)(0)(0)(1) 绑定到 SMPP 服务器时出错。无效证件？正在发送 PDU，len == 16 正在发送 PDU，header-len == 16 正在发送 PDU，command_id == 21 正在尝试读取 PDU。套接字已关闭。！！连接丢失。在 split_message 中。一条消息：30 PDU 规格：a1cca1cca14ccca1a1ccccca30。发送 PDU, len == 76 发送 PDU, header-len == 16 正在发送 PDU，command_id == 4 正在尝试读取 PDU。套接字已关闭。！！连接丢失。正在发送 PDU，len == 16 正在发送 PDU，header-len == 16 正在发送 PDU，command_id == 6 正在尝试读取 PDU。套接字已关闭。！！连接丢失。

我们能够从错误中推断出所提供的凭证是错误的。

我的疑问是：-

1.  连接到 smpp 服务器需要哪些详细信息。
2.  代码文件应该部署在 Smpp 服务器上还是可以部署到不同的服务器并尝试访问 smpp 服务器以发送消息。（我们确实尝试通过 filezilla 连接到 smpp 服务器，但没有成功）
3.  当我们尝试从系统向手机发送消息时，是从数字强制的。

请指导我们。我们被这个问题困住了，因为一周完成了我所知道的所有研究，但我只是走向死胡同，变得一片空白。

欢迎任何建议。

感谢和问候克里希南。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:00:57.473

我的答案基于 . [SMPP 3.4 规范](http://www.smsforum.net/SMPP_v3_4_Issue1_2.zip "SMPP 3.4 规范")

===

我假设您的设置如下所示：

1.  您正在开发 SMPP 客户端（又名 ESME）。
2.  您拥有到 SMPP 服务器（又名 SMSC）的连接信息。

***问题 1：连接到 smpp 服务器需要哪些详细信息。***

ESME 至少需要以下内容才能连接到 SMSC（TCP 级别需要）​​：

1.  SMSC的IP
2.  SMSC港口

大多数 SMSC 还需要（但这不是强制性的）：

1.  system_id（作为用户名）
2.  密码

一些 SMSC 还需要：

1.  system_type（参见 SMPP 3.4 规范中的第 4.1.1 节）
2.  address_range（参见 SMPP 3.4 规范中的第 4.1.1 节）

***问题2：代码文件应该部署在Smpp服务器上还是可以部署到不同的服务器并尝试访问smpp服务器发送消息。（我们确实尝试通过filezilla连接到smpp服务器但不成功）***

SMSC（即SMPP服务器）和ESME（即SMPP客户端）不需要在同一个盒子上；如果你愿意，你可以做。唯一的要求是它们可以通过 TCP 连接。

我相信 FileZilla 是一个 FTP 客户端，它与 SMSC 无关。

***问题 3：当我们尝试从系统向手机发送消息时，来自数字强制。***

我假设您正在使用 SUBMIT_SM 发送消息（因为您尝试通过 BIND_TRANSMITTER 连接）。

在规范中，发件人**编号**称为**source_addr**（请参阅 SMPP 3.4 规范中的第 4.4.1/5.2.8 节）。大多数 SMSC 将需要**source_addr**，但这不是强制性的。

# php - Magento 仅显示 x 个属性，之后显示更多选项

> ID：11257002
> 
> 赞同：0
> 
> 时间：2012-06-29T06:22:43.830
> 
> 标签：php, magento

我还有一个问题，在我的网站上我有分层的水平导航。它工作得很好，但现在我已经修改了它。

对于某些产品类别，例如。12 个属性将出现在类别级别，但我只想显示 5 个属性，之后您必须单击显示更多选项。

我已经建立了一条断线，规定只有 5 个属性会显示，所以只剩下显示更多选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:22:31.333

我认为最简单的方法是将这些附加链接放在单独的`<div />`或其他元素中并将其设置为`display: none;`样式。然后我会使用一个简单的 JavaScript 代码在点击`Show more`链接时显示它们，例如

```
 <a href="javascript:void(0)" id="show-more-link">Show more</a>
<div style="display:none;" id="other-attributes">(the content)</div>
<script type="text/javascript">
//use prototype for this matter
$('show-more-link').observe('click', function(){
  if ($('other-attributes')).visible() { //hide
    $('other-attributes').hide();
    this.update('Show more');
  } else {
    $('other-attributes').show();
    this.update('Show less');
  }
  return false;
});
</script> 
```

我还没有测试过，但我认为这样的东西应该可以工作。

# android - 异步任务抛出 ConCurrent 修改异常？

> ID：11257003
> 
> 赞同：1
> 
> 时间：2012-06-29T06:22:45.170
> 
> 标签：android, google-maps

在放大或缩小后，我在放大和缩小谷歌地图时调用 AsyncTask，我们将此方法称为：-

```
public void doListing(String URL) {

    mapView.getOverlays().clear();
    ListURL = URL;
    System.out.println("Inside dolist methods----"+URL);
    Eyelidmessage("Loading...");

    if(currenttask == null)
    {
        currenttask = new Mapdatatask();

        currenttask.execute();
    }
    else if(currenttask != null && currenttask.getStatus()== AsyncTask.Status.FINISHED)
    {

        currenttask = null ;

        currenttask = new Mapdatatask();
        currenttask.execute();
    }
    else if(currenttask != null && currenttask.getStatus()== AsyncTask.Status.RUNNING)
    {
        Log.e("currenttask",""+currenttask.getStatus());
        currenttask.cancel(true);
        currenttask = null ;
        currenttask = new Mapdatatask();
        currenttask.execute();
    }
    else if(currenttask != null && currenttask.getStatus()== AsyncTask.Status.PENDING)
    {
        Log.e("currenttask",""+currenttask.getStatus());
        currenttask.cancel(true);
        currenttask = null ;
        currenttask = new Mapdatatask();
        currenttask.execute();
    }

} 
```

Mapdatatask() 是一个 AsyncTask 类作为：-

```
private class Mapdatatask extends AsyncTask<Void, Void, Integer> 
   {
    @Override
    protected void onPreExecute()
    {

        arrayList= new ArrayList<Applicationdataset>();
    }

    @Override
    protected Integer doInBackground(Void... params) {

        System.out.println("----ListURL IN doin Background-----"+ListURL);
        try 
        {
            StringBuilder sb=new StringBuilder();  
            URL sourceUrl=new URL(ListURL);

            InputStream inputStream=sourceUrl.openStream();  
             //add if necessary the PushBack measure to safeguard the intended purpose here if really happening  
            //that you can actually ascertain it by saving a local copy for inspection  
            BufferedReader br=new BufferedReader(new InputStreamReader(inputStream));  
            String line;  
            while ((line=br.readLine())!=null) {  
                sb.append(line+"\n");  
            }  
            br.close(); 

            SAXParserFactory spff=SAXParserFactory.newInstance();
            spff.setNamespaceAware(true); 
            SAXParser spp=spff.newSAXParser();
            XMLReader xr=spp.getXMLReader();
            myHandler=new ApplicationHandler();
            xr.setContentHandler(myHandler);
            System.out.println("resultttt-----"+sb.toString());
            xr.parse(new InputSource(new StringReader(sb.toString())));  
            //xr.parse(new InputSource(sourceUrl.openStream()));
            valueoftotal = ApplicationHandler.value;
            arrayList = myHandler.getParsedData();
            System.out.println("total value------"+valueoftotal);

        }
        catch(IOException e) {
            e.printStackTrace();
        } catch (SAXException e)
        {
            arrayList= new ArrayList<Applicationdataset>();

            try 
            {
                StringBuilder sb=new StringBuilder();  
                URL sourceUrl=new URL(ListURL);
                InputStream inputStream=sourceUrl.openStream();  
                //add if necessary the PushBack measure to safeguard the intended purpose here if really happening  
                //that you can actually ascertain it by saving a local copy for inspection  
                BufferedReader br=new BufferedReader(new InputStreamReader(inputStream));  
                String line;  
                while ((line=br.readLine())!=null) {  
                    sb.append(line+"\n");  
                }  
                br.close(); 
                inputStream.close();
                SAXParserFactory spff=SAXParserFactory.newInstance();
                spff.setNamespaceAware(true); 
                SAXParser spp=spff.newSAXParser();
                XMLReader xr=spp.getXMLReader();

                myHandler=new ApplicationHandler();
                xr.setContentHandler(myHandler);

                xr.parse(new InputSource(new StringReader(sb.toString())));  
                //xr.parse(new InputSource(sourceUrl.openStream()));
                valueoftotal = ApplicationHandler.value;
                arrayList = myHandler.getParsedData();
                //arrayList = myHandler.getParsedData();

            }
            catch(IOException e1) {
                arrayList.clear();
                e1.printStackTrace();
                Log.e("parse exception0"," dont know why");
                Log.e("XML Error ",e.toString());
            } catch (SAXException e1) 
            {
                arrayList.clear();
                Log.e("parse exception1"," dont know why");
                e1.printStackTrace();
            } catch (ParserConfigurationException e1) 
            {
                arrayList.clear();
                Log.e("parse exception2"," dont know why");
                e1.printStackTrace();
            } catch (ParseException e1) {
                Log.e("parse exception3"," dont know why");
                e1.printStackTrace();
            }

            e.printStackTrace();
        } catch (ParserConfigurationException e) {
            arrayList.clear();
            Log.e("parse exception2"," dont know why");
            e.printStackTrace();
        } catch (ParseException e) {
            arrayList.clear();
            Log.e("parse exception3"," dont know why");
            e.printStackTrace();
        }
        return 1;

    }

    @Override
    protected void onPostExecute(Integer result) 
    {

        if(valueoftotal!=null && !valueoftotal.equalsIgnoreCase(""))
        {
            if(Integer.parseInt(valueoftotal) > 0 && Integer.parseInt(valueoftotal) <= 100)
            {
                OverlayItem oi =null;
                if(myHandler.getParsedData()!=null)
                 {
                    myvectorlist = new Vector<ArrayList<Applicationdataset>>();
                    System.out.println(arrayList.size()+"++++++++++");
                    Map<Key, ArrayList<Applicationdataset>> mlistVector = groupTheList(arrayList);
                    myvectorlist = putIntoVector(mlistVector);
                    System.out.println("oh nioce----"+myvectorlist.size());
                 }
                linearbottom2.setClickable(true);
                mapOverlays.clear();
                //overlay.removeAll();
                overlay = new GoogleMapViewOverlay(drawable,mapView,activity);
                lineartabbar.setBackgroundResource(R.drawable.mapbar);

                if(myvectorlist != null && myvectorlist.size() > 1)
                 {
                    Applicationdataset data = null;
                    try {
                        for(int i = 0; i < myvectorlist.size(); i++)
                        { 
                                data = myvectorlist.get(i).get(0);
                                String latvalue = data.getLatitude().toString();
                                String lonvalue = data.getLongitude().toString();
                                System.out.println("+++1 hhh+++");
                                GeoPoint point = null;
                                try
                                {
                                    point = new GeoPoint((int)(Double.parseDouble(latvalue)*1E6),(int)(Double.parseDouble(lonvalue)*1E6));
                                }
                                catch (NumberFormatException e) 
                                {
                                    e.printStackTrace();
                                }

                                if(point != null)
                                {
                                    System.out.println("Above   size of arraylist---=="+overlay.size()+"======index of array"+i);
                                    if(overlay.size() == i)
                                    {
                                        oi = overlay.createItem(i);
                                    }
                                    if(i>overlay.size())
                                    {
                                        Log.e("Error-------------", "Overlay size= "+overlay.size() + " index = "+i);
                                        Log.e("Error-------------", "");

                                        continue;
                                    }

                                    System.out.println("size of arraylist---=="+overlay.size()+"======index of array"+i);

                                    if(overlay!=null && oi!=null)
                                    {
                                        overlay.addItem(oi);    
                                        if(myvectorlist.size() == 1)
                                        {
                                            mc.animateTo(point);
                                            mc.setCenter(point);
                                            mc.setZoom(16);
                                        }
                                    }
                                }
                        }//end for loop
                    } catch (Exception e) {
                            e.printStackTrace();
                    }

                    System.out.println("+++size of overlay++++ "+overlay.size());

                    mapOverlays.add(overlay);

                    mapView.invalidate();
                }

                textViewpopup.setText(valueoftotal+" listings found.");
                linearlayoutpopup.setVisibility(View.VISIBLE);
                RunAnimationslisting();

            }
            else if(Integer.parseInt(valueoftotal) > 100)
            {

                Eyelidmessage(valueoftotal+" listings found. \n Zoom-in, press the locate button below or select the refine button above to display fewer properties. ");
                lineartabbar.setBackgroundResource(R.drawable.mapwithoutlist);
                linearbottom2.setClickable(false);                  

            }
            else if(Integer.parseInt(valueoftotal) == 0)
            {
                GoneAnimations();
                lineartabbar.setBackgroundResource(R.drawable.mapwithoutlist);
                linearbottom2.setClickable(false);
                customizeDialog = new CustomizeDialog(activity);  
                customizeDialog.setTitle("Sorry");  
                customizeDialog.setMessage("No Listing Found");  
                customizeDialog.show();
            }
        }

        super.onPostExecute(result);
    } 
```

当我放大和缩小谷歌地图时很少会抛出这个异常异常堆栈跟踪如下： -

```
 06-29 10:27:26.100: E/AndroidRuntime(9683): FATAL EXCEPTION: main
  06-29 10:27:26.100: E/AndroidRuntime(9683): java.util.ConcurrentModificationException
 06-29 10:27:26.100: E/AndroidRuntime(9683):    at java.util.ArrayList$ArrayListIterator.next(ArrayList.java:573)
 06-29 10:27:26.100: E/AndroidRuntime(9683):    at com.rentfaster.home.GoogleMapView.groupTheList(GoogleMapView.java:2305)
06-29 10:27:26.100: E/AndroidRuntime(9683):     at com.rentfaster.home.GoogleMapView.access$1(GoogleMapView.java:2303)
06-29 10:27:26.100: E/AndroidRuntime(9683):     at com.rentfaster.home.GoogleMapView$Mapdatatask.onPostExecute(GoogleMapView.java:1416)
06-29 10:27:26.100: E/AndroidRuntime(9683):     at com.rentfaster.home.GoogleMapView$Mapdatatask.onPostExecute(GoogleMapView.java:1)
 06-29 10:27:26.100: E/AndroidRuntime(9683):    at android.os.AsyncTask.finish(AsyncTask.java:590)
 06-29 10:27:26.100: E/AndroidRuntime(9683):    at android.os.AsyncTask.access$600(AsyncTask.java:149)
06-29 10:27:26.100: E/AndroidRuntime(9683):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:603)
 06-29 10:27:26.100: E/AndroidRuntime(9683):    at android.os.Handler.dispatchMessage(Handler.java:99)
 06-29 10:27:26.100: E/AndroidRuntime(9683):    at android.os.Looper.loop(Looper.java:132)
06-29 10:27:26.100: E/AndroidRuntime(9683):     at android.app.ActivityThread.main(ActivityThread.java:4126)
06-29 10:27:26.100: E/AndroidRuntime(9683):     at java.lang.reflect.Method.invokeNative(Native Method)
06-29 10:27:26.100: E/AndroidRuntime(9683):     at java.lang.reflect.Method.invoke(Method.java:491)
06-29 10:27:26.100: E/AndroidRuntime(9683):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
 06-29 10:27:26.100: E/AndroidRuntime(9683):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
 06-29 10:27:26.100: E/AndroidRuntime(9683):    at dalvik.system.NativeStart.main(Native Method) 
```

我该如何处理这种情况，请任何人尽快帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T06:31:30.723

您可以将类的所有方法更改 **`Mapdatatask`**为同步方法，然后尝试。

例如从

```
protected Integer doInBackground(Void... params) {
....    
} 
```

到

```
protected synchronized Integer doInBackground(Void... params) {
....    
} 
```

对所有方法执行相同操作并再次检查。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T07:08:38.800

如果你调用 currenttask.cancel(true); 您还必须检查 doInBackground() 方法中的 isCancelled() 并停止方法执行。

即使您停止了之前的任务，您也需要同步访问您的列表。查看其他答案！

# iphone - 应用程序在 4.0 上崩溃，但在 5.0 上没有

> ID：11257006
> 
> 赞同：0
> 
> 时间：2012-06-29T06:23:01.240
> 
> 标签：iphone, objective-c, ios, xcode

我试图修复一个奇怪的错误。使用 IOS 4 的人在更新后甚至无法在我的应用程序崩溃之前启动它。IOS 5 设备运行良好。

我在上次更新中添加的东西是块。但是 block 应该可以在 ios4 上运行，对吧？

IOS 4.3 模拟器运行良好，但 4.2.1 3GS 在下面的 dispatch_async 代码上崩溃。

我知道这里没有太多信息，但任何建议都会被采纳。

提前致谢

```
1\.         
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND,0), ^(void) 
                       {
                           dispatch_async(dispatch_get_main_queue(), ^(void) 
                                          {

2\. 
    [UIView animateWithDuration:0.25f animations:^
     {
         myView.alpha = 0; 
     }]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T06:38:58.283

请参阅我对[这个问题的回答。](https://stackoverflow.com/a/11198977/1155387)问题是`DISPATCH_QUEUE_PRIORITY_BACKGROUND`。

# c# - 如何使用 C# 在多个目录中定位文件

> ID：11257011
> 
> 赞同：2
> 
> 时间：2012-06-29T06:23:47.950
> 
> 标签：c#, asp.net

我正在多个目录上搜索一个说“abc.txt”的文件。这些目录是逗号分隔的值，如

```
string paths= 'C:/hello,D:/Hello'; 
```

如何使用上述逗号分隔目录搜索“abc.txt”？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T06:26:01.033

您只需要在逗号上拆分字符串，然后使用`DirectoryInfo`该类依次搜索每个目录：

[http://msdn.microsoft.com/en-us/library/ms143327.aspx](http://msdn.microsoft.com/en-us/library/ms143327.aspx)

```
string paths= 'C:/hello,D:/Hello';
string[] pathList = paths.Split(',');
string searchPattern = "abc.txt";
foreach (string path in pathList)
{
    DirectoryInfo di = new DirectoryInfo(path);
    FileInfo[] files = di.GetFiles(searchPattern, SearchOption.TopDirectoryOnly);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T06:33:39.523

1.  您需要将字符串与逗号分开：

字符串路径='C:/hello,D:/Hello';

```
 string[] words = paths.Split(','); 
```

1.  现在您需要从每个字符串标记中获取目录字母

    foreach（单词中的字符串）{

string directoryName = word.Split(':/')[0];

字符串 searchString = word.Split(':/')[1];

}

现在编写搜索逻辑以在目录中搜索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T06:35:00.130

根据逗号拆分您的字符串，（我希望您的目录名称中没有任何逗号）

```
string[] directories = paths.Split(',');
var files = new List<string>();
foreach (string str in directories)
     {
       DirectoryInfo d = new DirectoryInfo(str);
       files.AddRange(Directory.GetFiles(d.FullName, "abc.txt", SearchOption.AllDirectories));
     } 
```

您的文件将包含具有完整路径的目录中的所有 abc.txt 文件

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T06:36:07.523

我不建议使用逗号分隔的列表，除非您对文件名有绝对控制权（我假设您没有，因为您需要搜索多个位置）。

请记住，文件名可以包含诸如“,”和“;”之类的字符 这将是分离列表的明显选择。如果您可以控制创建我建议使用管道字符（'|'）的列表，它是可读的并且它不能是文件名的一部分。

但是，如果您可以控制文件名，则可以像其他人已经建议的那样简单地使用 split 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T06:27:56.027

拆分您的文件夹字符串并搜索该目录

要搜索文件夹和文件，您可能想看看这里 [http://msdn.microsoft.com/en-us/library/dd997370.aspx](http://msdn.microsoft.com/en-us/library/dd997370.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-29T06:25:07.023

假设文件名或目录名中没有逗号

```
string paths= @"C:/hello,D:/Hello";

string multipaths = paths.Split(',');

foreach (string str in multipaths)
{
    string filepath = Path.Combine(str, "abc.txt");

   //Do what you want from these files.
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-29T06:25:59.653

你可以使用 split 方法

```
 string paths= 'C:/hello,D:/Hello';
    string[] words = paths.Split(',');
    foreach (string word in words)
    {
        SearchInDirectory(word)
    } 
```

# groovy - 在 Groovy 中获取由字符分隔的子字符串

> ID：11257014
> 
> 赞同：12
> 
> 时间：2012-06-29T06:24:09.327
> 
> 标签：groovy

考虑下面的字符串

```
String names = "Bharath-Vinayak-Harish-Punith" 
```

我想以仅包含**Bharath**的字符串形式获得输出。（字符串直到第一次出现“-”运算符）。任何人都可以告诉我，我们怎么能这样做？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-29T07:21:28.653

在一般情况下，我同意上`split`一个答案中的方法，但是，当只返回第一个字符串时，子字符串方法对程序员来说是相同的工作量（而且，对于非常大的字符串，计算工作量更少）：

```
String result = names.substring(0, names.indexOf('-')) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-29T07:41:28.933

如果您使用的是 Groovy 2.0（昨天发布），您可以执行以下操作：

```
String names = 'Bharath-Vinayak-Harish-Punith'
String result = names.takeWhile { it != '-' }
assert result == 'Bharath' 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-29T06:50:36.513

您可以使用拆分：

```
def theName = names.split(/-/)[0] 
```

split 返回一个 String 数组，然后获取第一个数组元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T10:05:16.567

```
def names= 'Bharath-Vinayak-Harish-Punith'   
assert "Bharath" == (names =~ /^(.*?)\-/)[0][1] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-17T10:56:01.240

如果您有可用的[Apache Commons Lang](https://commons.apache.org/proper/commons-lang/)库（它是各种其他框架的一部分，例如 Grails）：

```
 def result = StringUtils.substringBefore(names, '-') 
```

最好的问候， 比约恩

# javascript - 如何为 svg 元素赋予 hsl 颜色值

> ID：11257015
> 
> 赞同：14
> 
> 时间：2012-06-29T06:24:10.397
> 
> 标签：javascript, svg

我想问一下，如果已经读过可以为 svg 元素赋予 hsl 颜色值。但是当我这样尝试时

```
var color = hsl(0, 100%, 50%);

circle.attr("fill" , color); 
```

我收到一个错误“意外号码”

任何人都可以指导什么是正确的方法，并且 svg 也支持所有 hsl 颜色

谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-29T06:48:44.920

简单地

```
var color = hsl(0,100%,50%); 
```

line 表示，您使用, ,参数调用`hsl`函数，并将返回值分配给变量。`0``100%``50%``color`

您需要使用引号，并将颜色作为`string`：

```
 var color = "hsl(0, 100%, 50%)";

 circle.attr("fill" , color); 
```

有关更多信息`HSL`，请阅读[**此处**](http://www.w3.org/TR/css3-color/#hsl-color)。

并且不考虑 hsl 颜色是由`SVG`还是由其他元素使用的。它只是一种用于指定的语法`color`。

**更新：**要提供`color`可变随机行为，请尝试以下操作：

```
var color = "hsl("+[0,0,0].map(function(){   return Math.round(100*Math.random())+"%"; }).join(',')+")"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T06:49:39.057

好吧，我不知道您是否在那里使用了 JavaScript 库，但这对我来说似乎不是有效的 JS 语法。我试过这个，它似乎工作：

```
var color = "hsl(0, 100%, 50%)";    // use quotes around the value, since there's no hsl() function
circle.setAttribute("fill", color); // setAttribute(), not attr()
// this also works and is better than setAttribute()
circle.style.fill = "hsl(120, 50%, 50%)"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T06:59:13.903

Javascript 中没有称为 hsl() 的函数，fill 也不是属性。这是一种 CSS 样式。在 HTML 中尝试以下方式：-

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
    <circle cx="100" cy="100" r="50" style="fill:hsl(0, 100%, 50%);stroke-width:1;stroke:rgb(0,0,0)" />
</svg> 
```

此外，您似乎正在使用 jQuery 或其他类似的 Javascript 库，因此请尝试以下代码：-

```
var color = "hsl(0, 100%, 50%)";
circle.css("fill" , color); 
```

# linq - 使用基于值的 linq 比较两个列表

> ID：11257019
> 
> 赞同：1
> 
> 时间：2012-06-29T06:24:33.980
> 
> 标签：linq

我正在使用 silverlight 4。我有一个场景，我需要根据值比较两个列表。

```
 List<Option> lstoption1 = new List<Option>();
  Option opt = new Option();
  opt.OptionText = "Text1"; 
  lstoption1.add(opt)

  Option opt2 = new Option();
  opt2.OptionText = "Text2"; 
  lstoption1.add(opt2)

  Option opt3 = new Option();
  opt3.OptionText = "Text3"; 
  lstoption1.add(opt3)

  List<Option> lstoption2 = new List<Option>();
  Option opt = new Option();
  opt.OptionText = "Text1"; 
  lstoption2.add(opt)

  Option opt2 = new Option();
  opt2.OptionText = "Text4"; 
  lstoption2.add(opt2) 

  Option opt3 = new Option();
  opt3.OptionText = "Text3";
  opt3.OptionChecked = false; 

  lstoptions2.add(opt3) 
```

我需要根据**OptionText比较这两个列表**

```
 1) var sameentities= which entities exisits in both lists.

    ie : it should return entities that has OptionText as 
           **Text1 & Text3**

  2) var existinlst1= which entities  exists only in lstoptions1.

     ie : it should return entity that has OptionText as
           **Text2** 

  3) var notexistinlist1=which entities not exists only in lstoptions1.

      ie : it should return entity that has OptionText as
           **Text4** 
```

我为此使用了很多 for 循环，但我想使用 linq 以简单的方式完成它。

有什么简单的方法可以在 Silverlight 中使用**LINQ找到它们。**

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T06:27:26.440

假设正确设置了相等性：

> 1) var sameentities= 两个列表中都存在哪些实体。

```
var same = list1.Intersect(list2); 
```

> 2) var existslst1= 哪些实体仅存在于 lstoptions1。

```
var list1Only = list1.Except(list2); 
```

> 3) var notexistinlist1=哪些实体仅在 lstoptions1 中不存在。

```
var list2Only = list2.Except(list1); 
```

（我认为 - 你的描述不是很清楚。）

如果需要，您可以将自定义相等比较器传递给所有这些方法，以便仅通过选项文本进行比较。请注意，如果您只需要结果中的选项文本，您可以先投影它：

```
var text1 = list1.Select(x => x.OptionText);
var text2 = list2.Select(x => x.OptionText);
// Now use the same methods as before, but with text1 and text2 
```

# wordpress - 在发送标头之前在 wordpress 中设置 Cookie

> ID：11257025
> 
> 赞同：0
> 
> 时间：2012-06-29T06:25:16.753
> 
> 标签：wordpress, cookies, setcookie

好的，这就是我得到的问题，我收到标头已发送错误，因为我在发送标头后设置 cookie，但实际上我有一个通过 WordPress 中的 content-single.php 呈现的表单，我正在将表单提交给相同的页面然后使用表单值我将一些信息传递给位于主题的function.php文件中的函数，但是当我使用setcookie设置cookie时原因在于该函数它给了我错误....

我试着看看他们说使用的一些地方`ob_start();` `and ob_end_flush();`，在设置 cookie 之间我仍然遇到同样的问题......那么有什么办法可以设置 Cookie 吗？在 WordPress 发送标头信息之前？

PS：抱歉英语不好...

# search - 是否有搜索引擎 api 可以让我查看搜索的受欢迎程度？

> ID：11257030
> 
> 赞同：0
> 
> 时间：2012-06-29T06:25:49.553
> 
> 标签：search, search-engine, keyword

我有一些文字。

是否有任何 api 可以告诉我在*流行*的搜索引擎（如 google、yahoo 等）中搜索该文本的受欢迎程度。

即与所有其他单词和搜索相比，它的排名如何

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:10:42.253

当然，只需使用这个： [https ://developers.google.com/custom-search/v1/overview](https://developers.google.com/custom-search/v1/overview)

这是谷歌搜索API。

如果您想要定制解决方案，请付钱给某人。

# windows - 如何使用 windowsmediaplayer 组件在 Visual Basic 6 中呈现 rtsp:// 视频？

> ID：11257034
> 
> 赞同：0
> 
> 时间：2012-06-29T06:26:07.000
> 
> 标签：windows, vb.net, vb6, video-streaming

如何使用 Windows Media Player 组件在 Visual Basic 中播放 rtsp:// 视频？我已将组件添加到表单并将视频路径设置为 URL，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:48:44.447

也许 WMP 根本不支持您的流类型。

要检查您的播放器是否支持您的流，只需打开媒体播放器，按 Ctrl+U，然后在此处输入您的 rtsp URL。稍等片刻，如果没有播放，那么

1）您使用了旧的 WMP 组件。尝试找到更新的组件并使用它。2）找到K-Lite Codec Pack等编解码器，然后重试。我想这对你很有帮助。祝你好运 ;）

# java - Terracotta 和 Quartz 调度程序节点使用什么协议？

> ID：11257036
> 
> 赞同：2
> 
> 时间：2012-06-29T06:26:27.437
> 
> 标签：java, protocols, quartz-scheduler, terracotta, application-layer

我正在将 Quartz Scheduler 与 TerracottaJobStore 一起使用，并且试图找出调度程序节点和服务器使用哪种协议进行通信。

换一种说法，在 Web 应用程序设置中，浏览器（客户端）通过 TCP/IP 上的 HTTP 或 HTTPS 与 Apache（服务器）通信。石英和兵马俑的等价物是什么？

我知道 Quartz Scheduler 和 Terracotta Server 使用 TCP/IP，但是是否也使用了像 HTTP 这样的应用层协议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:26:13.180

您是否尝试将问题提交给 Terracotta？如果您使用的是 TerracottaJobStore，这意味着您（或您的组织）是付费客户！

# linux - 设置与taskset nt工作的亲和力

> ID：11257043
> 
> 赞同：1
> 
> 时间：2012-06-29T06:27:04.503
> 
> 标签：linux, ubuntu, process, affinity

当我想为这样的进程设置亲和力时：

```
sudo taskset -c 0 -p 30466 
```

我收到此错误：

```
taskset: executing -p failed: No such file or directory 
```

但是`top`命令显示进程正在执行。

**更新：**

命令

```
 sudo taskset -c -p 0 30466 
```

作品

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-22T11:18:56.230

正确的语法是`taskset -cp 0 30466`

老问题，但仍然查看了很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:07:53.283

出于某种原因，taskset 正在尝试执行 command `-p`，甚至没有尝试使用您指定的 PID 查找进程。

您使用的是哪个版本的任务集？你能检查`man taskset`一下你的版本是否支持`-p`？

# simplexml - 仅在 localhost/xampp 中发生 simplexml_load_file() 错误

> ID：11257045
> 
> 赞同：0
> 
> 时间：2012-06-29T06:27:12.263
> 
> 标签：simplexml, php

我在 PHP 脚本中遇到错误：

> simplexml_load_file() [function.simplexml-load-file]：I/O 警告：加载外部实体失败

问题是我只有在我运行脚本时才会收到此错误`localhost (XAMPP)`，当我在我的站点中运行它时，一切都变得很好。

所以我无法在 localhost 中测试代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T07:00:23.303

当我之前尝试在 HTTPS 网站上打开 XML 文件时，我得到了这个，结果发现我缺少 SSL。

您使用的是启用 SSL 的 XAMPP 版本吗？

# c++ - 在我的 linux 中，从 posix lib 或内核调用了哪个版本的 close()？

> ID：11257047
> 
> 赞同：1
> 
> 时间：2012-06-29T06:27:16.953
> 
> 标签：c++, c, linux, posix

当 I`man -a close`时，第一页是 POSIX 手册页，然后我有一个`close(2)`, （2 表示系统 api 或内核函数）。这意味着至少有 2 个版本的`close()`.

例如，这样的一段代码：

```
int fd = open("xxx");
........
close(fd);   -----here, which version is called,
                  is that one from the POSIX lib, or the raw system API? 
```

PS：因此我的 linux 系统包含一个用于大多数系统 API 调用的 POSIX 包装器，如何辨别我的代码是调用 POSIX lib 还是原始系统 API？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T06:45:22.213

POSIX 不是一个库，它是一个标准。手册页的 POSIX 版本告诉您 POSIX 标准所说的函数应该做什么（以及该页面基于哪个版本的 POSIX）。如果您只依赖本页中描述的行为，您的代码应该可以在所有实现 POSIX 标准的系统上运行（只要它们实现了足够的最新版本）。

手册页的 Linux 版本告诉您该函数在您的系统上实际执行的操作。在绝大多数情况下，此处描述的行为将是 POSIX 页面中描述的行为的超集，即 Linux 行为将遵循 POSIX 标准，但它也可能定义 POSIX 未定义的情况或函数可能接受POSIX 未强制要求的其他选项。

如果您依赖 POSIX 未指定的任何行为，您的代码可能仅适用于 Linux 系统。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T06:32:08.753

“这意味着至少有 2 个版本的 close()。”

不，这意味着关闭文档有 2 个版本。

# javascript - 如何在下一张幻灯片进入时停止幻灯片放映隐藏文本和图像跳到顶部？

> ID：11257049
> 
> 赞同：0
> 
> 时间：2012-06-29T06:27:21.553
> 
> 标签：javascript, jquery

此幻灯片放映同时与图像和文本完美运行，但是当您在底部滚动时出现问题，并且每次下一张幻灯片更改或出现然后它跳到顶部时，不知道为什么。

这是参考链接： http: [//new.kingspointcap.com/home](http://new.kingspointcap.com/home)

以下是js代码：

```
 /*----------Slideshow of text------------*/

var faderIndex = 2, //to keep track, also it will start from 1st because last value is 0
    faders = $('.fadeTxt'); //cache, so we won't have to walk the dom every time

function nextFade() {

    //fade out element over 3000 milliseconds, after which call a function
    $(faders[faderIndex]).fadeOut(6000, function () {

        //increase the index and do a check, so we won't overflow
        faderIndex++;
        if (faderIndex >= faders.length)
            faderIndex = 0;

        //fade in the next element, after which call yourself infinitely
        $(faders[faderIndex]).fadeIn(3000, nextFade);
    });
}
//get the ball rolling

nextFade();

/*----------Slideshow of text------------*/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T06:57:44.100

问题是，`fadeOut`动画以`display: none;`. 在这个`fadeOut`和下一个之间`fadeIn`，文档变小了，浏览器必须滚动。

设置包装器的`width`and （带有*横幅*的），例如：`height``div``id`

 *```
#banner {
    ...
    width: 100%;
    height: 174px;
} 
```

现在它应该可以工作了。*

# knockout.js - 多个下拉列表并在选择时删除可观察数组的值

> ID：11257050
> 
> 赞同：0
> 
> 时间：2012-06-29T06:27:22.397
> 
> 标签：knockout.js

我有一种情况，我的页面上有多个下拉菜单共享同一个可观察数组。可以说`5 dropdowns lists`，绑定到一个`observable array`of`[1,2,3,4,5]`和一个`optionsCaption`of `- Game -`。在他们选择一个值后，我希望其他下拉列表从他们的列表中删除该项目。因此，如果`dropdown 1`选中`2`，所有其他下拉菜单都会显示`1,3,4,5`，如果他们`- Game -`再次选择，所有 dropdwons 都会恢复到原来的状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T08:50:26.657

他们必须有不同的数据源，因为他们有不同的数据。我能想到的两种方法：

有一个包含所有选择的数组，以及每个选择的计算数组 - 每个包含选择数组的内容减去来自其他选择的选定选项。

您还可以将每个选择的选项设置为一个可观察的数组，然后在选择时，您使用所选项目对每个其他选项调用 remove，并将旧值推送到每个其他选择框。您可以通过订阅来实现这一点。

# google-plus-one - Google Plus 无法正确验证页面并在点击后显示红色三角形错误

> ID：11257053
> 
> 赞同：1
> 
> 时间：2012-06-29T06:27:44.483
> 
> 标签：google-plus-one

我正在尝试将 google-plus-one 集成到一个网站中……但是在单击 google plus 按钮后，它只显示粉红色三角形错误（除了顶层，它适用于所有子页面）。

这是一个例子： http: [//www.bigfunny.com/watch/15/i-beweave-hair-salon](http://www.bigfunny.com/watch/15/i-beweave-hair-salon)

如果有人知道为什么它不能在谷歌加世界中正常工作或验证......我全神贯注。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T22:25:48.640

所以我已经将该页面分解到最低限度，但仍然得到你得到的错误。我四处搜索，似乎大多数网站管理员的错误在几天后就消失了。我会查看谷歌网站管理员设置，看看周末会发生什么。

我无法让它在详细页面上工作，但根和 /about/ 页面的东西工作。

我也会在下面的链接上进行测试：

[谷歌加号按钮](http://www.google.com/webmasters/+1/button/)

# jquery - 在 IE 中无需重新加载页面即可更改 URL

> ID：11257058
> 
> 赞同：6
> 
> 时间：2012-06-29T06:28:28.443
> 
> 标签：jquery, ajax

我想避免页面加载，但 URL 应该更改并且在所有浏览器中都应该相同。我正在尝试使用带有 URL 更改的 Ajax 帖子。我搜索并发现可以使用 # 或 .pushstates()。

链接：[在浏览器中更改 URL，而不使用 JavaScript 加载新页面](https://stackoverflow.com/questions/136458/change-the-url-in-the-browser-without-loading-the-new-page-using-javascript)

我尝试使用 .pushstates() 但它在 IE < 10 中不起作用。我不想在 URL 中使用 # 。有没有办法在 IE 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T06:50:45.537

恐怕答案只是一个简单的不，没有办法在 IE 中实现这一点。

如果您想使用 URL 识别应用程序的不同资源而不重新加载页面，则必须接受使用哈希。

***注意***：哈希的语义正是为了识别同一页面内的不同资源，所以如果你不重新加载页面，使用哈希实际上可能是一件好事。

# struts2 - log4j 不需要框架日志 struts

> ID：11257059
> 
> 赞同：0
> 
> 时间：2012-06-29T06:28:32.597
> 
> 标签：struts2, log4j

我正在使用 NetBeans IDE 在 struts2 中创建一个 Web 应用程序。

现在，我需要在我的应用程序中使用 log4j，并且我已经在 WEB-INF/classes 下成功创建了 log4j.properties 文件。

这是我的 log4j.properties 文件：-

```
 # Define the root logger with appender file
        log4j.rootLogger = FATAL,FILE

        # Define the file appender
          log4j.appender.FILE=org.apache.log4j.FileAppender
          log4j.appender.FILE.File=F:\\Projects\\TinyStars\\NetbeansProject\\tinystarsbak\\web\\logs\\tinystar_log.out

         # Define the layout for file appender
        log4j.appender.FILE.layout=org.apache.log4j.PatternLayout
        log4j.appender.FILE.layout.conversionPattern=[%-5p][%d{dd-MM-yyyy  HH:mm:ss}]%m%n 
```

我已经使用适当的 log4j 层次结构（如调试、警告、错误等）记录了我的所有消息。

但随着我的日志消息，我还收到了数千个（可能与框架相关的）日志。这种行为使我的日志文件非常庞大。

除了我在我的应用程序中明确给出的内容之外，我严格不想要任何日志消息。

感谢帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T19:11:58.790

尝试这个：

```
# Define the root logger with appender file
log4j.rootLogger = WARN,FILE

log4j.logger.your.package=DEBUG 
```

它应该将默认日志级别设置为 WARN（即所有框架），以及您的包的 DEGUB 日志级别。

# javascript - 在 JavaScript 中将 JSON 对象转换为 CSV 格式

> ID：11257062
> 
> 赞同：52
> 
> 时间：2012-06-29T06:28:51.723
> 
> 标签：javascript, arrays, json, csv

我正在尝试将 JavaScript 对象集转换为 CSV 格式

[如果您将其放入在线 JSON 解析器https://jsonformatter.org/json-parser](https://jsonformatter.org/json-parser)，您可以了解我的 Javascript 对象

这就是我试图解决它的方式......但它失败了...... [http://jsfiddle.net/fHQzC/11/](http://jsfiddle.net/fHQzC/11/)

我正在尝试将与值“术语”和相应标题对应的整个值转换为 CSV 格式

的预期输出就像

```
Time,Dec 9, 2012 
News,Germany,election, Egypt,Revolution, Japan, Earthquake
Person,Obama, Beckham
Title,Pearce Snubs Beckham                                
Time,Dec 5, Birthday
Person, Lebron James
News,Italy,Euro 2012 Final
Title-Heats National Champions 
```

是否可以在 Excel 表格中下载 csv 文件，我在 Stackoverflow 中找到的那个文件对我并没有真正的用处...

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-29T06:34:01.810

你可以试试

```
$(document).ready(function () {

        // Create Object
        var items = [
              { name: "Item 1", color: "Green", size: "X-Large" },
              { name: "Item 2", color: "Green", size: "X-Large" },
              { name: "Item 3", color: "Green", size: "X-Large" }];

        // Convert Object to JSON
        var jsonObject = JSON.stringify(items);

        // Display JSON
        $('#json').text(jsonObject);

        // Convert JSON to CSV & Display CSV
        $('#csv').text(ConvertToCSV(jsonObject));
    }); 
```

和一个函数 ConvertToCSV

```
// JSON to CSV Converter
        function ConvertToCSV(objArray) {
            var array = typeof objArray != 'object' ? JSON.parse(objArray) : objArray;
            var str = '';

            for (var i = 0; i < array.length; i++) {
                var line = '';
                for (var index in array[i]) {
                    if (line != '') line += ','

                    line += array[i][index];
                }

                str += line + '\r\n';
            }

            return str;
        } 
```

[资源](http://www.zachhunter.com/2011/06/json-to-csv/)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2019-11-08T15:34:44.173

可能更优雅和最简单的解决方案

```
function convertToCSV(arr) {
  const array = [Object.keys(arr[0])].concat(arr)

  return array.map(it => {
    return Object.values(it).toString()
  }).join('\n')
}

console.log(
  convertToCSV(
    [
      {
        id: 1,
        name: 'Foo',
        timestamp: new Date()
      },
      {
        id: 2,
        name: 'Bar',
        timestamp: new Date()
      },
      {
        id: 3,
        name: 'Baz',
        timestamp: new Date()
      }
    ]
  )
)
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2017-10-26T07:32:26.370

这是我的解决方案

```
function arrayToCSV(objArray) {
     const array = typeof objArray !== 'object' ? JSON.parse(objArray) : objArray;
     let str = `${Object.keys(array[0]).map(value => `"${value}"`).join(",")}` + '\r\n';

     return array.reduce((str, next) => {
         str += `${Object.values(next).map(value => `"${value}"`).join(",")}` + '\r\n';
         return str;
        }, str);
 } 
```

例子：

```
let arr = [{name: "Essa", age: 25}];
console.log(arrayToCSV(arr)); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2020-11-20T11:52:32.567

这是一个类似于mightybruno's answer的解决方案，它处理包含逗号的字符串。其他答案似乎都没有考虑到这一点。

```
function objectsToCSV(arr) {
    const array = [Object.keys(arr[0])].concat(arr)
    return array.map(row => {
        return Object.values(row).map(value => {
            return typeof value === 'string' ? JSON.stringify(value) : value
        }).toString()
    }).join('\n')
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2020-11-03T13:14:21.547

下面的代码会将 JSON 数组转换并下载为 csv 作为文件。

```
 function exportJSONToCSV(objArray) {
    var arr = typeof objArray !== 'object' ? JSON.parse(objArray) : objArray;
    var str =
      `${Object.keys(arr[0])
        .map((value) => `"${value}"`)
        .join(',')}` + '\r\n';
    var csvContent = arr.reduce((st, next) => {
      st +=
        `${Object.values(next)
          .map((value) => `"${value}"`)
          .join(',')}` + '\r\n';
      return st;
    }, str);
    var element = document.createElement('a');
    element.href = 'data:text/csv;charset=utf-8,' + encodeURI(csvContent);
    element.target = '_blank';
    element.download = 'export.csv';
    element.click();
  } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-05-04T14:12:25.743

这是一个快速而肮脏的方法，但可能适用于大多数情况：

```
const headers = Object.keys(objAry[0])
console.log(headers.join())

objAry.forEach(r => console.log(
   Object.values(r)
   .map(c => Array.isArray(c)? `"${c.join()}"` : c)
   .join())
) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-09-18T00:31:44.863

类似于mightybruno的回答，但如果需要，这将允许单独访问标题和内容（通过将`join`语句移动到函数的后面）。

```
function objToCsv(data) {
    const headers = Object.keys(data[0]).join();
    const content = data.map(r => Object.values(r).join());
    return [headers].concat(content).join("\n");
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-09-01T19:13:50.263

使用 papaparse 库将 JSON 转换为 CSV，反之亦然。请参阅此链接 - [https://www.papaparse.com/](https://www.papaparse.com/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-01-20T08:55:03.840

这是我的解决方案

[https://jsfiddle.net/dhou6y3o/](https://jsfiddle.net/dhou6y3o/)

```
function iterateObject(obj) {
  var value = '', header = '';
          for (name in obj) {
            if (obj.hasOwnProperty(name)) {
              if (isObject(obj[name])) {
                var out = iterateObject(obj[name]);
                value += out.value;
                header += out.header;
              } else {
                value += removeNewLine(obj[name]) + '; ';
                header += name + '; ';
              }
            }
          }
  return {
    "value":value,
    "header":header
  };
}
function isObject(obj) {
  return (typeof obj === 'object');
}
function removeNewLine(item) {
  return item.toString().replace(/(\r\n|\n|\r)/gm,"");
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-07-06T18:28:31.987

```
 function objToCsv(arr) {
        let claves = Object.keys(arr[0]).sort();
        let rows = claves.join(";") + "\r\n";
        arr.forEach((row) => {
          let nrow = [];
          claves.forEach((clave) => {
            let valor = JSON.stringify(row[clave]);
            nrow.push(valor.split(";").join(" ").split(",").join(" "));
          });
          rows = rows + nrow.join(";") + "\r\n";
        });
        return rows;
    } 
```

# java - 使用 Spring Security 的 Spring RESTFul Webservice 安全客户端调用

> ID：11257063
> 
> 赞同：0
> 
> 时间：2012-06-29T06:28:54.610
> 
> 标签：java, spring, spring-security, restful-authentication, spring-ws

我将使用 Spring WS 开发一个 RESTFul Web 服务。该服务将接收一个 XML 作为请求，其中包含身份验证信息和请求信息。

我需要解析 XML 请求并获取这些身份验证详细信息并验证该请求。

如何使用 Spring Security 实现此功能？或者任何其他方式？

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:46:17.877

据我所知，您只能使用 Spring-WS 开发契约优先的 SOAP 服务。

> Spring Web Services 旨在促进契约优先的 SOAP 服务开发，允许使用操纵 XML 有效负载的多种方法之一创建灵活的 Web 服务

查看：[http ://static.springsource.org/spring-ws/sites/2.0/](http://static.springsource.org/spring-ws/sites/2.0/)

查看[此](http://static.springsource.org/spring/docs/3.0.0.M3/spring-framework-reference/html/ch18s02.html)页面以获取有关如何使用 Spring 3.x 创建 restful 服务的示例。

# android - java.lang.NoClassDefFoundError，而打开pdf

> ID：11257064
> 
> 赞同：1
> 
> 时间：2012-06-29T06:28:57.067
> 
> 标签：android, noclassdeffounderror, pdf-viewer

我正在尝试实现一个 pdf 查看器，该应用程序会检测存储在 sd 卡中的 PDF，如图所示。 [http://img225.imageshack.us/img225/3852/pdfs.png](http://img225.imageshack.us/img225/3852/pdfs.png)

但是当我点击任何文件来查看它时......错误。

这是 LOGCAT：

```
06-28 07:32:46.963: WARN/dalvikvm(330): Unable to resolve superclass of Lcom/example/trypdf/Second; (496)
06-28 07:32:46.983: WARN/dalvikvm(330): Link of class 'Lcom/example/trypdf/Second;' failed
06-28 07:32:46.983: ERROR/dalvikvm(330): Could not find class 'com.example.trypdf.Second', referenced from method com.example.trypdf.PDFViewerActivity.openPdfIntent
06-28 07:32:47.013: WARN/dalvikvm(330): VFY: unable to resolve const-class 419 (Lcom/example/trypdf/Second;) in Lcom/example/trypdf/PDFViewerActivity;
06-28 07:32:47.013: DEBUG/dalvikvm(330): VFY: replacing opcode 0x1c at 0x0002
06-28 07:32:47.013: DEBUG/dalvikvm(330): VFY: dead code 0x0004-000e in Lcom/example/trypdf/PDFViewerActivity;.openPdfIntent (Ljava/lang/String;)V
06-28 07:32:47.373: INFO/ActivityManager(59): Displayed activity com.example.trypdf/.PDFViewerActivity: 1665 ms (total 1665 ms)
06-28 07:32:52.593: DEBUG/dalvikvm(131): GC_EXPLICIT freed 1336 objects / 74064 bytes in 149ms
06-28 07:33:28.634: DEBUG/SntpClient(59): request time failed: java.net.SocketException: Address family not supported by protocol
06-28 07:33:55.655: DEBUG/AndroidRuntime(330): Shutting down VM
06-28 07:33:55.663: WARN/dalvikvm(330): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
06-28 07:33:55.684: ERROR/AndroidRuntime(330): FATAL EXCEPTION: main
06-28 07:33:55.684: ERROR/AndroidRuntime(330): java.lang.NoClassDefFoundError: com.example.trypdf.Second
06-28 07:33:55.684: ERROR/AndroidRuntime(330):     at com.example.trypdf.PDFViewerActivity.openPdfIntent(PDFViewerActivity.java:46)
06-28 07:33:55.684: ERROR/AndroidRuntime(330):     at com.example.trypdf.PDFViewerActivity.onListItemClick(PDFViewerActivity.java:41)
06-28 07:33:55.684: ERROR/AndroidRuntime(330):     at android.app.ListActivity$2.onItemClick(ListActivity.java:321)
06-28 07:33:55.684: ERROR/AndroidRuntime(330):     at android.widget.AdapterView.performItemClick(AdapterView.java:284)
06-28 07:33:55.684: ERROR/AndroidRuntime(330):     at android.widget.ListView.performItemClick(ListView.java:3382)
06-28 07:33:55.684: ERROR/AndroidRuntime(330):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:1696)
06-28 07:33:55.684: ERROR/AndroidRuntime(330):     at android.os.Handler.handleCallback(Handler.java:587)
06-28 07:33:55.684: ERROR/AndroidRuntime(330):     at android.os.Handler.dispatchMessage(Handler.java:92)
06-28 07:33:55.684: ERROR/AndroidRuntime(330):     at android.os.Looper.loop(Looper.java:123)
06-28 07:33:55.684: ERROR/AndroidRuntime(330):     at android.app.ActivityThread.main(ActivityThread.java:4627)
06-28 07:33:55.684: ERROR/AndroidRuntime(330):     at java.lang.reflect.Method.invokeNative(Native Method)
06-28 07:33:55.684: ERROR/AndroidRuntime(330):     at java.lang.reflect.Method.invoke(Method.java:521)
06-28 07:33:55.684: ERROR/AndroidRuntime(330):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-28 07:33:55.684: ERROR/AndroidRuntime(330):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-28 07:33:55.684: ERROR/AndroidRuntime(330):     at dalvik.system.NativeStart.main(Native Method)
06-28 07:33:55.693: WARN/ActivityManager(59):   Force finishing activity com.example.trypdf/.PDFViewerActivity
06-28 07:33:56.213: WARN/ActivityManager(59): Activity pause timeout for HistoryRecord{44fe47a0 com.example.trypdf/.PDFViewerActivity} 
```

我几乎尝试了所有方法：

*   创建一个新项目并复制类。
*   使用其他目标 (APIS lvl10),(2.2,_lvl8)。
*   清洁和建造
*   重置亚行。
*   使用从其他站点下载的 PDFViewer 库。

但我总是得到同样的错误：

```
06-28 07:32:46.983: ERROR/dalvikvm(330): Could not find class 'com.example.trypdf.Second', referenced from method com.example.trypdf.PDFViewerActivity.openPdfIntent
06-28 07:33:55.684: ERROR/AndroidRuntime(330): java.lang.NoClassDefFoundError: com.example.trypdf.Second 
```

在这里你还可以看到我的两个类，以及 MANIFEST。

PDFViewerActivity.java

```
 package com.example.trypdf;

import java.io.File;
import java.io.FilenameFilter;

import com.example.trypdf.Second;
import net.sf.andpdf.pdfviewer.PdfViewerActivity;
import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.os.Environment;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class PDFViewerActivity extends ListActivity {

    String[] pdflist;
    File[] imagelist;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.main);

        File images = Environment.getExternalStorageDirectory();
        imagelist = images.listFiles(new FilenameFilter() {
            public boolean accept(File dir, String name) {
                return ((name.endsWith(".pdf")));
            }
        });
        pdflist = new String[imagelist.length];
        for (int i = 0; i < imagelist.length; i++) {
            pdflist[i] = imagelist[i].getName();
        }
        this.setListAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, pdflist));
    }

    protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        String path = imagelist[(int) id].getAbsolutePath();
        openPdfIntent(path);
    }

    private void openPdfIntent(String path) {
        try {
            final Intent intent = new Intent(PDFViewerActivity.this, Second.class);
            intent.putExtra(PdfViewerActivity.EXTRA_PDFFILENAME, path);
            startActivity(intent);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

二.java

```
 package com.example.trypdf;

import net.sf.andpdf.pdfviewer.PdfViewerActivity;
import net.sf.andpdf.pdfviewer.R;
import net.sf.andpdf.pdfviewer.R.drawable;
import net.sf.andpdf.pdfviewer.R.id;
import net.sf.andpdf.pdfviewer.R.layout;
import android.os.Bundle;

public class Second extends PdfViewerActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
    }

    public int getPreviousPageImageResource() {
        return R.drawable.left_arrow;
    }

    public int getNextPageImageResource() {
        return R.drawable.right_arrow;
    }

    public int getZoomInImageResource() {
        return R.drawable.zoom_in;
    }

    public int getZoomOutImageResource() {
        return R.drawable.zoom_out;
    }

    public int getPdfPasswordLayoutResource() {
        return R.layout.pdf_file_password;
    }

    public int getPdfPageNumberResource() {
        return R.layout.dialog_pagenumber;
    }

    public int getPdfPasswordEditField() {
        return R.id.etPassword;
    }

    public int getPdfPasswordOkButton() {
        return R.id.btOK;
    }

    public int getPdfPasswordExitButton() {
        return R.id.btExit;
    }

    public int getPdfPageNumberEditField() {
        return R.id.pagenum_edit;
    }
} 
```

显现

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.trypdf"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
 <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name="com.example.trypdf.PDFViewerActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
        android:name="com.example.trypdf.Second"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T06:49:22.153

要解决此问题，您需要：

1.  在项目中创建一个名为“libs”的文件夹。2 将项目所需的库导入到这个新文件夹中。2.1。要导入它们：右键单击 libs 文件夹--> 导入--> 文件系统-> 选择 .jar 并接受。
2.  清理、构建和启动

资料来源：[Akki](https://stackoverflow.com/questions/9857539/noclassdeffounderror-when-googleanalyticstracker-getinstance/9857669#9857669)

# ios - 重初始化导致 UIView 动画在第一次尝试时没有动画？

> ID：11257069
> 
> 赞同：0
> 
> 时间：2012-06-29T06:29:09.307
> 
> 标签：ios, uiview, uiviewanimation

考虑到我的 _palette 的框架是这样的：

```
_palette.frame = CGRectMake(0,480,320,200); 
```

我在这里有这段代码可以向上/向下滑动 UIView：

```
if(![_pallete superview]) {
[self.view addSubview:_pallete];
[self.view insertSubview:_tempViewPaletteListener belowSubview:_pallete];

[UIView animateWithDuration:0.3 
                 animations:^{
                   _pallete.top -= kPaletteHeight;
                 } 
                 completion:^(BOOL isFinished) {

                 }];

 } else {

[UIView animateWithDuration:0.3 
                 animations:^{
                   _pallete.top += kPaletteHeight;
                 } 
                 completion:^(BOOL isFinished) {
                   [_tempViewPaletteListener removeFromSuperview];
                   [_pallete removeFromSuperview];
                 }];
 } 
```

* _tempViewPaletteListener 只是一个带有点击手势的视图，用于关闭调色板*

问题是当我第一次尝试在这里运行代码时，_palette 视图将立即僵硬地显示。我所期望的是，它应该向上滑动 _palette 视图。

虽然第一次尝试后效果很好

**更新：**

将问题标题从“UIView 动画在第一次尝试时没有动画？” 进入“重度初始化导致 UIView 动画在第一次尝试时没有动画？”

我上面的代码工作正常，只是在调用动画之前我布局了调色板视图并添加了[RSColorPicker](https://github.com/RSully/RSColorPicker)

```
- (void)layoutPaletteView {

  if(!_colorPicker && !_brightnessSlider) {

    // Create Color Picker and Brightness Slider
  }

  if(!_pallete) {
    // Style the Palette View and add color picker and brightness slider as subview
  }
} 
```

我注意到当我不添加颜色选择器而只添加一个普通视图来制作动画时，动画效果很好（当然就这么简单，它应该）..

问题是我猜颜色选择器的创建太重了，这就是它无法显示向上滑动动画的原因

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:01:27.910

正如 borrrden 在评论中所说，看起来没有动画可以显示，因为当您将 _pallete 添加到视图时，它已经处于完成的动画位置：试试这个：

```
if(![_pallete superview]) {
    _pallete.top += kPaletteHeight;

    [self.view addSubview:_pallete];
    [self.view insertSubview:_tempViewPaletteListener belowSubview:_pallete];

    [UIView animateWithDuration:0.3 
                     animations:^{
                         _pallete.top -= kPaletteHeight;
                     } 
                     completion:^(BOOL isFinished) {

                     }];

} else {

    [UIView animateWithDuration:0.3 
                     animations:^{
                         _pallete.top += kPaletteHeight;
                     } 
                     completion:^(BOOL isFinished) {
                         [_tempViewPaletteListener removeFromSuperview];
                         [_pallete removeFromSuperview];
                     }];
} 
```

# cuda - Simple multiplication on cuda GPU giving error

> ID：11257071
> 
> 赞同：0
> 
> 时间：2012-06-29T06:29:32.950
> 
> 标签：cuda, gpu, thrust

I am doing the following on the GPU

```
float decPart = valAtIndex - (int)valAtIndex;
int docID = decPart * numDocs; 
```

where valAtIdex if of type `float` and numDocs also of type `float`. For my case, decPart was 0.2 and numDocs was 10\. However, when I print docID, it is printed as 1 (it should be 2). Can somebody please tell me where am I making a mistake?

Below is the full method if it helps

```
__global__ 
void finalNc(float* scSortedCounts, int* pos, int* maxCountEx, float numDocs, 
             int lengthStreamCompacted, int* finalNc, int actualLengthPos, 
             float* val, int* docIndex, int* acV ,int* ptwrite,int* diff,
             int* posIndex)
{ 
    int index = blockDim.x * blockIdx.x + threadIdx.x; 
    if(index < lengthStreamCompacted){ 
        float valAtIndex = scSortedCounts[index]; 
        float decPart = valAtIndex - (int)valAtIndex; 
        int docID = decPart * numDocs; 
        int actualCount = (int)valAtIndex; 
        int placeToWrite = maxCountEx[docID] + actualCount; 
        if( index == (lengthStreamCompacted -1 )){ 
            finalNc[placeToWrite] = actualLengthPos - pos[index]; 
        }else{ 
            finalNc[placeToWrite] = pos[index + 1] + pos[index]; 
        } 
    } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T09:22:04.123

For the case you have mentioned, it appears that the result you are seeing is correct, and the source of your confusion is down to IEEE single precision representation of the intermediate results in your calculations (and perhaps rounding in printing or displaying of those intermediate results).

For the example you provide, a value of 0.2f is not *exactly* representable as a binary32 value. The two possible values are either

```
3E4CCCCC (1.99999988079071044921875E-1) 
```

or

```
3E4CCCCD (2.0000000298023223876953125E-1) 
```

If the first value was the actual value of `docID`, then the intermediate calculation you mention should produce 1 (which is what you observed). If it was second value, the result would be 2\. This is absolutely expected behaviour.

To illustrate the effect of IEEE rounding modes and help put your mind at ease that there is no error here, have a look at the following example code, which performs the calculation you are asking about with one of three possible `float` to `integer` conversions - plain truncation, IEEE 754 round towards minus infinity, and IEEE 754 round towards plus infinity. I have templated the kernel and run it for each case on a set of random float values between 1 and 10\. You can compile and run it for yourself and verify that the plain truncation (as in your code) really does work as intended, as well as the behaviour of the IEEE compliant "round up" and "round down" conversions on the output.

```
#include <thrust/host_vector.h>
#include <thrust/device_ptr.h>
#include <thrust/device_malloc.h>
#include <thrust/generate.h>
#include <cstdlib>
#include <cstdio>

template<int version>
__global__
void kernel(const float *inputs, int *outputs, int numDocs, int N)
{
    int index = blockDim.x * blockIdx.x + threadIdx.x; 

    if(index < N){ 
        float valAtIndex = inputs[index];
        int intPart;
        switch(version) {
            case 2:
                intPart = __float2int_ru(valAtIndex);
                break;
            case 1:
                intPart = __float2int_rd(valAtIndex);
                break;
            case 0:
            default:
                intPart = int(valAtIndex);
                break;
        }
        float decPart = valAtIndex - intPart;
        int docID = decPart * numDocs;
        outputs[index] = docID;
    }
}

inline float frand(){
    return 1.0f + 9.0f * ((float)rand()/(float)RAND_MAX);
}

int main(void)
{
    const size_t N = 100;
    const int numdocs = 10;

    srand(time(NULL));

    thrust::host_vector<float> values(N);
    thrust::host_vector<int> outputs(3*N);
    std::generate(values.begin(), values.end(), frand);

    thrust::device_ptr<float> in = thrust::device_malloc<float>(N);
    float * _in = thrust::raw_pointer_cast(in);
    thrust::copy(values.begin(), values.end(), in);

    thrust::device_ptr<int> out = thrust::device_malloc<int>(3*N);
    int * _out = thrust::raw_pointer_cast(out);

    kernel<0><<<1,128>>>(_in, _out, numdocs, N);
    kernel<1><<<1,128>>>(_in, _out+N, numdocs, N);
    kernel<2><<<1,128>>>(_in, _out+(2*N), numdocs, N);

    thrust::copy(out, out+3*N, outputs.begin());

    for(int i=0; i<N; i++)
        printf("%.10f %d %d %d\n", 
                values[i], outputs[i], outputs[N+i], outputs[2*N+i]);

    return 0;
} 
```

# php - oAuth，使用 WordPress 原生方法获取 Facebook 使用的数据？

> ID：11257075
> 
> 赞同：0
> 
> 时间：2012-06-29T06:29:44.187
> 
> 标签：php, facebook-graph-api, wordpress

我正在尝试在 wordpress 中使用 oauth 从 facebook 获取用户数据。我在插件文件中有以下代码，

```
class fb{
    function authenticate($req){
define('FACEBOOK_APPID','xxxxx'); // replace 123 with your app id
define('FACEBOOK_APPSECRET','xxxxxx'); // replace abc with your app secret
define('REDIRECTURI','http://test.name.com/index.php?request=facebookdata_Action'); 
   if ($_REQUEST['code'] != '') {
    if ($_REQUEST['state'] != '' && wp_verify_nonce($_REQUEST['state'], 'my-nonce')) {

        $api_url = sprintf("https://graph.facebook.com/oauth/access_token?client_id=%s&redirect_uri=%s&client_secret=%s&code=%s",
            urlencode(FACEBOOK_APPID),
            urlencode(REDIRECTURI),
            urlencode(FACEBOOK_APPSECRET),
            urlencode($_REQUEST['code'])
        );

        $response = wp_remote_request($api_url, array(
            'timeout' => 60,
            'sslverify' => false,
            'method' => 'GET'
        ));

        if( is_wp_error( $response ) ) {
          $messages['error'] = "There was an error.";
        } else {
            $args = wp_parse_args( wp_remote_retrieve_body($response), array() );
            //echo $args['access_token'];
            $messages['userdata'] = $args;
        }
    }
} else {
     $facebook_dialog_url = sprintf("https://www.facebook.com/dialog/oauth?client_id=%s&redirect_uri=%s&state=%s&scope=user_photos,email,user_birthday,user_online_presence",
        FACEBOOK_APPID,
        urlencode(REDIRECTURI),
        wp_create_nonce ('my-nonce')
     );
  $messages['url'] = trim($facebook_dialog_url);

}
     echo json_encode($messages);
       exit();
    }
} 
```

// 处理 AJAX 请求的函数

```
function Request_handler() {
if (isset($_REQUEST['request']) && ($_REQUEST['request'] == 'facebook_Action')) {
        // Otherwise display an error and exit the call
        $obj = new fb();
        echo $obj->authenticate($_REQUEST);
        exit();
    }   
} 
```

// 将处理程序添加到 init()

```
add_action('init', 'Request_handler'); 
```

当我单击按钮时，我`facebook_Action`使用将调用此`authenticate`函数的 ajax 调用它，最后我得到了`facebook url`. 我使用 window.location 重定向到 facebook 登录页面。

登录后，我被重定向到我的页面。我得到了访问令牌作为响应。我要求获取`email,gender,phone number`作为响应的用户数据。

请就此提出建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:25:06.700

我参考了这个[http://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/](http://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)

通过使用 access_token 找到了解决方案

```
// Attempt to query the graph:
  $graph_url = "https://graph.facebook.com/me?"
    . "access_token=" . $access_token;
  $response = curl_get_file_contents($graph_url);
  $decoded_response = json_decode($response);

function curl_get_file_contents($URL) {
    $c = curl_init();
    curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($c, CURLOPT_URL, $URL);
    $contents = curl_exec($c);
    $err  = curl_getinfo($c,CURLINFO_HTTP_CODE);
    curl_close($c);
    if ($contents) return $contents;
    else return FALSE;
  } 
```

# iphone - 访问上次收到的已关闭/忽略的推送通知

> ID：11257076
> 
> 赞同：1
> 
> 时间：2012-06-29T06:29:44.540
> 
> 标签：iphone, ios, ipad, push-notification

我成功地在我的设备上接收到警报类型的推送通知。

**1.活动状态或应用程序在前台**

正在调用应用程序的 didReceiveRemoteNotification 方法。在这里我可以访问收到的通知消息。

**2\. In-Active State OR App在后台**

推送通知的消息显示在带有“查看”和“关闭”按钮的警报框中。

一种。单击“查看”按钮后，将调用 didReceiveRemoteNotification 方法。我再次可以访问收到的通知消息。

湾。单击“关闭”按钮后，消息将消失。在这种情况下，我没有关于最后收到的推送通知的任何处理程序。

**3\. 应用不在后台或应用未运行**

与案例 2 相同。

**4\. iPhone 处于睡眠模式**

警报显示有消息，但没有“查看”或“关闭”按钮。

一种。在 UI 上，它将显示“Slide to View”。如果用户与手机交互，它将打开应用程序。我可以访问收到的通知消息。

湾。如果用户不进行交互并允许手机进入睡眠模式或手动将手机置于睡眠模式，则下次 iOS 会显示“滑动解锁”消息。在这里，我没有任何最后一个推送通知的处理程序。

如何访问案例 2.b 和 4.b 的最后一次推送通知，是否有任何我缺少实现的最佳调用方法。

编辑 1：下面是我的 appDelegate 代码

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    self.viewController = [[[Test1ViewController alloc] initWithNibName:@"Test1ViewController" bundle:nil] autorelease];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

    // For PUSH NOTIFICATION
    [[UIApplication sharedApplication] registerForRemoteNotificationTypes:
     (UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert)];

    if (launchOptions != nil)
    {
        NSDictionary* dictionary = [launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey];
        if (dictionary != nil)
        {
            NSLog(@"Launched from push notification: %@", dictionary);
        }
    }

    return YES;
}

- (void)application:(UIApplication*)application didReceiveRemoteNotification:(NSDictionary*)userInfo
{
    NSLog(@"Received notification: %@", userInfo);
    // Received Notification at here ....
    // Now based on response further to do ...
}

- (void)application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken
{
    NSLog(@"My token is: %@", deviceToken);
}

- (void)application:(UIApplication*)application didFailToRegisterForRemoteNotificationsWithError:(NSError*)error
{
    NSLog(@"Failed to get token, error: %@", error);
} 
```

谢谢，J61

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T06:35:01.100

操作系统会处理徽章。但是，如果用户关闭了您的推送通知，您的应用程序可以查看服务器上的消息并在错过任何用户关闭的通知时以适当的方式处理它。

取自[这里](https://stackoverflow.com/a/3589323/176248)，这是您可以处理通知的方式：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {
   // get state
   UIApplicationState state = [application applicationState];
   if (state == UIApplicationStateActive) {
      // App is in foreground
   } else {
      // App is suspended
   }

   application.applicationIconBadgeNumber = 0;
} 
```

* * *

**编辑：** 如果您想自动增加您的徽章编号，您需要自己跟踪计数。您可以在您的服务器上执行此操作。如果您的推送消息不包含徽章计数，[iOS 会将其从您的应用程序中删除](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)。

# iphone - 选择随机文本并将其设置为本地通知警报？

> ID：11257077
> 
> 赞同：0
> 
> 时间：2012-06-29T06:29:47.787
> 
> 标签：iphone, ios5, ios4, ios-simulator, uilocalnotification

我想在我的 iPhone 应用程序中发送本地通知。用户可以根据不同的类别设置通知和时间。类别是：-

1.  日常

2.  平日

3.  周末

4.  每逢星期一

5.  每逢星期二

6.  每个星期四

7.  每星期五

8.  每周六

9.  每个星期天。

对于每个类别，用户可以选择多个时间并为此设置本地通知。例如，如果我选择每日通知，我可以添加多个时间 10AM、11AM、12PM 等等。因此，用户每天可以设置的最大通知时间是 24 天（一天 24 小时）。在每个通知上，我需要获取随机/唯一文本并将其设置为本地通知警报。因此，如果用户选择所有这 9 个类别，那么他可以设置的最大通知是 24*9（每个类别 24）= 216。

所以我的问题是： -

1.  我可以设置 216 个本地通知来触发吗？

2.  如何获取随机文本并将其设置为本地通知警报，以便每次本地通知触发时都获得唯一文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T06:32:41.467

1.  不，您最多只能设置 64 个本地通知。本地和[推送通知编程指南](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/WhatAreRemoteNotif/WhatAreRemoteNotif.html#//apple_ref/doc/uid/TP40008194-CH102-SW1)指出：

    > 设备上的每个应用程序仅限于最快触发的 64 个预定本地通知。操作系统会丢弃超过此限制的通知。它将重复通知视为单个通知。

2.  您必须在安排通知之前设置文本，因此具有相同间隔（例如每天上午 10 点）的通知将具有相同的文本，直到您将其删除以添加另一个。

# grails - Grails IReport Jasper 返回空白页

> ID：11257078
> 
> 赞同：1
> 
> 时间：2012-06-29T06:29:51.863
> 
> 标签：grails, jasper-reports, ireport

我有这个问题必须在我的 grails 应用程序上显示我的 jasper 报告。在应用程序上，我使用以下命令安装了 jasper 插件：`grails> install-plugin jasper` 我创建了`sample.jrxml`具有以下上下文：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="student" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
    <property name="ireport.zoom" value="1.2100000000000002"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="79" splitType="Stretch">
            <staticText>
                <reportElement x="181" y="0" width="212" height="37"/>
                <textElement textAlignment="Center">
                    <font size="24"/>
                </textElement>
                <text><![CDATA[Portal Student List]]></text>
            </staticText>
        </band>
    </title>
    <columnHeader>
        <band height="26"/>
    </columnHeader>
    <detail>
        <band height="98" splitType="Stretch"/>
    </detail>
    <columnFooter>
        <band height="43" splitType="Stretch"/>
    </columnFooter>
    <pageFooter>
        <band height="54" splitType="Stretch">
            <staticText>
                <reportElement x="238" y="0" width="100" height="20"/>
                <textElement textAlignment="Center"/>
                <text><![CDATA[Copyright]]></text>
            </staticText>
        </band>
    </pageFooter>
</jasperReport> 
```

我正在使用 Jasper 标记`<g:jasperReport jasper="student" format="PDF"/>`或创建一个新的闭包来调用报告，该闭包将使用以下代码将 .pdf 文件直接显示到浏览器：

```
def report() {
        def reportDef = new JasperReportDef(folder: 'reports', name:'student.jrxml', fileFormat: JasperExportFormat.PDF_FORMAT)
        reportDef.contentStream = jasperService.generateReport(reportDef)

        response.contentType = reportDef.fileFormat.mimeTyp
        response.characterEncoding = 'UTF-8'
        response.outputStream << reportDef.contentStream.toByteArray()
} 
```

使用的任何一种方法都返回一个空白页。

我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:42:31.730

我可能必须解决此[链接](http://www.grails.org/plugin/jasper)中 Grails 提供的教程以及 Jasper 本身[在此处](http://svn.codehaus.org/grails-plugins/grails-jasper/)提供的示例。

# batch-file - 如何将参数数组传递给批处理文件？

> ID：11257079
> 
> 赞同：2
> 
> 时间：2012-06-29T06:30:01.117
> 
> 标签：batch-file

我有一个名为 Formalbuild.bat 的批处理文件，它将采用名为 componentName 的参数名称。

例如。我将构建不同的组件，如下所示。

```
 Formalbuild.bat ServiceComponent
    Formalbuild.bat DatamodelComponent
    Formalbuild.bat 
                ...
                ...
    Formalbuild.bat SomeXYZComponent 
```

是否可以创建组件名称数组并将一个组件传递给批处理文件以进行构建？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T07:32:31.960

由于只有组件名称发生变化，您可以使用`for`循环甚至更好的`for/f`循环。

```
FOR %%C in (ServiceComponent DatamodelComponent SomeXYZComponent ) do (
    call Formalbuild.bat %%C
) 
```

如果组件列表很长，您也可以将它们分成多行

```
FOR %%C in (ServiceComponent 
DatamodelComponent
component3
...
component_n
SomeXYZComponent ) do (
    call Formalbuild.bat %%C
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T06:31:37.160

一个简单的计数循环还不够吗？

```
for /l %%x in (1,1,N) do call Formalbuild.bat Component%%x 
```

替换`N`为那里的正确数字。

如果要在命令行上运行它，请使用

```
for /l %x in (1,1,N) do Formalbuild.bat Component%x 
```

而且由于您的问题中有一个 PowerShell 标记（尽管您从未提及它）：

```
1..N | %{Formalbuild.bat Component$_} 
```

像往常一样，用实际值替换 N。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T06:37:20.420

```
for %%a in (
    Component1
    Component2
    Component3
    ...
    ...
    ComponentN) do call :FormalBuild %%a

:FormalBuild
set THING_TO_BUILD=%1
REM call your build stuff here with %THING_TO_BUILD% identifying what you are building 
```

# image - flex，鼠标悬停/移出时更改按钮图像

> ID：11257080
> 
> 赞同：2
> 
> 时间：2012-06-29T06:30:04.797
> 
> 标签：image, apache-flex, button

使用以下代码，当鼠标悬停按钮时，我已经实现了图像更改。但是图像名称是硬编码的，在样式中指定。如何使其参数化？我想重用这个以图像名称作为输入参数的小实用程序。所有使用的图像（在我的例子中是 14 个图像）都将包含在 flex 项目中。我正在使用 flex 3

```
<mx:Style>  
    .myCustomButton {
        upSkin: Embed(source="jjyxfx.png");
        overSkin:Embed(source="cwgl.png");
       downSkin: Embed(source="cwgl.png");

    }
</mx:Style>

<mx:Button y="0" width="105" height="107" fillAlphas="[1.0, 1.0, 1.0, 1.0]" x="0" fillColors="[#3AA2D9, #3AA2D9]" styleName="myCustomButton" useHandCursor="true" buttonMode="true"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:37:11.203

我不相信你不能参数化 CSS 样式；所以你必须通过 ActionScript 设置样式：

```
public function setStylesOnButton(upSkinValue:String,overSkinValue:String,downSkinStyle:String):void{
  myButton.setStyle('upSkin',upSkinValue);
  myButton.setStyle('overSkin',overSkinValue);
  myButton.setStyle('downSkin',downSkinStyle);
} 
```

确保您的按钮有一个 ID，以便您可以在 ActionScript 中访问它：

```
<mx:Button id="myButton" y="0" width="105" height="107" fillAlphas="[1.0, 1.0, 1.0, 1.0]" x="0" fillColors="[#3AA2D9, #3AA2D9]" styleName="myCustomButton" useHandCursor="true" buttonMode="true"/> 
```

# php - Joomla 网站安全

> ID：11257083
> 
> 赞同：1
> 
> 时间：2012-06-29T06:30:12.437
> 
> 标签：php, security, joomla

我们如何保护我们的 Joomla 网站免受外部用户的侵害。

Joomla 中是否有任何安全功能可以防止外部用户对其进行黑客攻击。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-09T14:21:41.907

使用以下步骤：

更改默认数据库前缀 (jos_)

使用 SEF 组件

为每个文件夹和文件使用正确的 CHMOD。

密码保护您的管理区域。

使您的网站保持最新。

使用 .htaccess 文件来保护您的 Joomla。

密码 - 使用唯一且强密码。

安装 jSecure 身份验证插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T06:56:33.247

看看[phpids.org](http://phpids.org/) 作为一个入侵检测系统，它可以缓解基于 Web 的攻击。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T07:01:28.090

1.  所有网站都可能被黑客入侵，你能做的最好的就是积极应对那一天。
2.  阅读[Joomla！安全文档](http://docs.joomla.org/Security)
3.  最有效的漏洞利用已经通过`/administrator`，置于`/administrator`它自己的 authrealm 之下，并且只向受信任的用户提供该密码。（然后在每次`/administrator`用户离开时更改它。）
4.  使用带有更改令牌的[JSecure 。](http://extensions.joomla.org/extensions/access-a-security/site-security/login-protection/12254)
5.  将内容监控系统与连续备份系统一起运行，这样您就可以在被黑客入侵时最大限度地减少停机时间（这样您就可以快速收到问题通知，并可以快速恢复到工作状态）。（您可能需要调查[Akeeba](http://extensions.joomla.org/extensions/access-a-security/site-security/backup/1606)的自动备份）
6.  不要为管理员或超级管理员帐户使用明显的名称（例如 admin/superadmin/root 等），并在站点设置时禁用原始管理员帐户。
7.  正如 Joomla 的文档中所提到的，使用已安装的 Joomla! 让您的网站保持最新状态。版本和任何第三方扩展（特别是关注[易受​​攻击的扩展列表](http://docs.joomla.org/Vulnerable_Extensions_List)）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T08:54:15.533

我相信我在这里回答了这个问题。也可能对你有用

[Joomla！2.5.4 被黑：诊断有问题](https://stackoverflow.com/questions/11036763/joomla-2-54-hacked-having-trouble-with-diagnosis/11037642#11037642)

# opencv - 斑点的像素高度和宽度

> ID：11257084
> 
> 赞同：1
> 
> 时间：2012-06-29T06:30:22.427
> 
> 标签：opencv

我有一个带有一些斑点的图像。有些是一个像素点，有些不是。当我使用 cvBlobsLibs 查找一个像素点的高度和宽度时，它显示该值等于零。它是否正确？我尝试使用轮廓来填充一个点像素，但似乎也失败了。任何其他可以删除一个点像素甚至删除等于零的高度或宽度的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T10:28:05.660

我不确定为什么它的单个像素元素的面积为零。（我的想法说它应该是一个）。查看[`contourArea`](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=contourarea#contourarea). 它说，面积是使用 计算的`Green Formula`，因此面积和像素数可能不同。

其次，要去除这种噪声，您可以使用中值过滤器。我在下面使用 Python 展示了它。

输入图像：

![在此处输入图像描述](../Images/765f6c05daf05fedd971f06d3cef4b6a.png)

现在代码：

```
>>> img2 = cv2.imread('D:\Abid_Rahman_K\work_space\mask.png',0)

>>> contours,hierarchy = cv2.findContours(img,cv2.RETR_LIST,cv2.CHAIN_APPROX_SIMPLE) 
```

非零像素数：

```
>>> cv2.countNonZero(img2)
121 
```

现在应用 medianFilter 并再次检查非零像素的数量：

```
>>> blur = cv2.medianBlur(img2,5)
>>> cv2.countNonZero(blur)
0 
```

输出图像：

![在此处输入图像描述](../Images/69e45be0211b2957504196ea693e2641.png)

**编辑**：

如果图像有物体，它不会受到模糊的影响。

**输入图像：**

![在此处输入图像描述](../Images/5e850ef9ab30d63b969ac8e7de78faf2.png)

**输出图像：**

![在此处输入图像描述](../Images/299ca6941a9871981026d93e657fc875.png)

**在对此答案进行第二次评论后进行编辑。**

正如 Mizuki 评论的那样，在中值滤波之后，位置很近的对象有可能相互连接。为了理解这一点，我在这里给出了一张来自维基百科页面的图片。检查使用高半径中值滤波器后由黑线分隔的黄色对象如何连接。

![在此处输入图像描述](../Images/250446532d539221aa18f5cd8fc81422.png)

这是因为，中值滤波器使用一个窗口来计算该窗口中所有值的中值，并用该中值替换中心元素。随着窗口大小的增加，更多的元素用于计算中位数。因此，狭窄的间隙被消除了。

维基百科文章是一个很好的：[链接](http://en.wikipedia.org/wiki/Median_filter)

另请参阅此链接以获得简单的解释：[链接](http://www.markschulze.net/java/meanmed.html)

因此，为了避免这种情况，还有另一种称为腐蚀和膨胀的方法（均在 OpenCV 中实现）。简单地说，腐蚀减小了白色物体的大小，而膨胀增加了白色物体的大小。

所以侵蚀去除了小的白色像素，但它也减小了我们对象的大小。所以我们使用 dilate 来恢复它的大小。由于所有白噪声都已因侵蚀而被消除，因此它们不会在膨胀中返回。

这是去除噪音的好方法。

# ajax - 使用 Jquery 的 Ajax 请求错误

> ID：11257101
> 
> 赞同：0
> 
> 时间：2012-06-29T06:32:04.650
> 
> 标签：ajax, jquery

我在 Fb 和网站上有一个应用程序..

我正在发送 ajax 请求，但在 Fb 中它工作正常，但在我自己的网络中它什么也没显示。在 FireFug 控制台上，它显示为红色。

任何人都对此有想法

这里是申请链接

[脸书连结](https://www.facebook.com/7ElevenCanada/app_378477418868706)

和

[网页链接](http://www.slurpee.ca/application/www.slurpee.ca/711storelocator/)

在这里，当我们添加密码或城市时，然后单击查找。

它仅适用于 Facebook

有人告诉我确切的问题是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T06:43:25.557

[您正在向https://7elevenstores.ca/store_locator/getLatLng](https://7elevenstores.ca/store_locator/getLatLng)发出跨域 Ajax 请求

这就是请求失败的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T06:44:29.227

您收到以下错误消息：

```
XMLHttpRequest cannot load https://7elevenstores.ca/store_locator/getLatLng. Origin http://www.slurpee.ca is not allowed by Access-Control-Allow-Origin. 
```

这意味着，您正在尝试向另一个来源（另一个域）发出 XMLHttpRequest（ajax 请求）。这是不允许的。Ajax 请求只能转到加载页面的同一来源。

*   查看MDN上关于访问策略的这篇[文章](https://developer.mozilla.org/en/http_access_control)
*   还有[这篇](https://developer.mozilla.org/en/Same_origin_policy_for_JavaScript)关于 javascript 的同源策略的文章

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T06:45:02.383

我收到此错误：

```
XMLHttpRequest cannot load https://7elevenstores.ca/store_locator/getLatLng. Origin http://www.slurpee.ca is not allowed by Access-Control-Allow-Origin. 
```

我希望你知道原因。

# php - 无法使用 NuSoap 对 Web 服务进行简单调用

> ID：11257107
> 
> 赞同：1
> 
> 时间：2012-06-29T06:32:35.900
> 
> 标签：php, web-services, soap, wsdl, nusoap

这是我第一次使用 Web 服务和 NuSoap（以及整个 SOAP）。我正在尝试做的是一个非常简单的使用 NuSoap 的 CALL 函数，虽然看起来很简单，但我无法让它工作。

这是我的代码：

```
<?php
require_once('nusoap/lib/nusoap.php');

$url = "http://server10logic.com/WSAmib-0.1/services/comprobanteOperacion?wsdl";

try
{
    $client = new nusoap_client($url);
    $result = $client->call('listComprobanteOperacion');

}
catch (SoapFault $e)
{
    echo 'Error0'.$e->getMessage() . "\n";
}

echo '<pre>';print_r($result);
?> 
```

该代码的结果可以在这里看到：

[http://dev.etic.com.mx/bmv/test.php](http://dev.etic.com.mx/bmv/test.php)

非常欢迎任何帮助。如果您需要更多信息，请告诉我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T11:29:53.197

在创建客户端时，添加第二个`boolean`参数 ，`true`它告诉库您正在使用 WSDL 文件。

`$client = new nusoap_client($url, true);`

# cakephp - Cakephp：如何验证一个数组以确保它至少有五个或更多项目

> ID：11257108
> 
> 赞同：0
> 
> 时间：2012-06-29T06:32:38.663
> 
> 标签：cakephp, cakephp-2.1, cakephp-model

大家好，我的代码需要帮助。我有一个表格，学生可以选择他们获得的科目、分数和成绩。科目和成绩是一个下拉菜单，它们处于循环中。我希望学生至少输入五门科目，包括英语。每个主题都由一个主题代码引用。保存一组学生详细信息。你能帮我做这件事吗？

我的控制器功能如下

```
public function add($app_id = null) {
        if($app_id != null){

            if ($this->request->is('post')) {

        //saving the data in variables
                $applicant_id = $this->data    ['ApplicantOlevelQualification']['applicants_detail_id'];
            $centre_number = $this->data['ApplicantOlevelQualification']['centre_number'];
            $candidate_number = $this->data['ApplicantOlevelQualification']['candidate_number'];
            $exam_body_code = $this->data['ApplicantOlevelQualification']['exam_body_code'];
            $year_written = $this->data['ApplicantOlevelQualification']['year_written'];
        $sittings=$this->request->data['ApplicantOlevelQualification']['number_of_sittings'];
    //  debug($sittings);die();

        for ($i = 1; $i < sizeof($this->data['ApplicantOlevelQualification']['olevel_subject_code']); $i++) {

                if ($this->data['ApplicantOlevelQualification']['olevel_subject_code'][$i] != "") {
                    $this->ApplicantOlevelQualification->create();
                    $this->ApplicantOlevelQualification->id = null;
                    $this->ApplicantOlevelQualification->set(array(
                            'applicants_detail_id' => $app_id,
                            'olevel_subject_code' => $this->data['ApplicantOlevelQualification']['olevel_subject_code'][$i],
                            'grade' => $this->data['ApplicantOlevelQualification']['grade'][$i],
                            'centre_number'=> $centre_number, 
                            'candidate_number'=> $candidate_number, 
                            'exam_body_code'=> $exam_body_code,
                            'year_written'=> $year_written,

                        )
                    );

                    //$appeng = $this->ApplicantOlevelQualification->find('list',array('fields'=> array('olevel_subject_code','grade'), 'conditions'=>array('ApplicantOlevelQualification.olevel_subject_code'=>'8900',)));
                 //debug(($this->data->ApplicantOlevelQualification);die();
                 /*    if($appeng !="8900"){
                   $this->Session->setFlash(__('English is a prerequisite for application to procceed'));
                   $this->redirect(array('action' => 'add',$app_id));

                     }  */                   

                    if ($this->ApplicantOlevelQualification->save()) {      
                        $this->Session->setFlash(__('Your O\'level Qualifications have been saved'));
                    }   else {
                        $this->Session->setFlash(__('Your O\'level Qualifications failed to save.'));
                    }
                }
            } 
```

我的模型如下

```
public $validate = array(
'grade' => array(
        'notempty ddd' => array(
            'rule' => array('notempty'),
            //'rule' => '/^[A-Z]{1}$/i',
            'message' => 'Enter a valid grade, in capital letters!',
            //'allowEmpty' => false,
            //'required' => false,
            //'last' => false, // Stop validation after this rule
            //'on' => 'create', // Limit validation to 'create' or 'update' operations
        ),
    ),
'olevel_subject_code' => array(
        'numeric' => array(
            'rule' => array('numeric'),
            //'message' => 'Your custom message here',
            //'allowEmpty' => false,
            //'required' => false,
            //'last' => false, // Stop validation after this rule
            //'on' => 'create', // Limit validation to 'create' or 'update' operations
        ),
    ),
); 
```

目前，此代码捕获科目和成绩以及详细信息，而不检查学生是否输入了所需的最少 5 门科目及其成绩。如果可以，请你帮助我。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T07:28:13.207

您应该编写自己的[自定义验证规则](http://book.cakephp.org/2.0/en/models/data-validation.html#custom-validation-rules)。为此，请将其添加到`$validate`：

```
public $validate = array(
'grade' => array(
        'notempty' => array(
            'rule' => array('notempty'),
            'message' => 'Enter a valid grade, in capital letters!',
        ),
        'mycustomrule' => array(
            'rule' => array('mycustomgraderule'),
            'message' => 'One or more of your subjects do not have grades'
        )
    ),
'olevel_subject_code' => array(
        'numeric' => array(
            'rule' => array('numeric'),
        ),
    ),
); 
```

`mycustomgraderule`同一模型中的另一种方法实际上在哪里：

```
public function mycustomgraderule($check) {
//   Your logic here    
} 
```

此方法应`TRUE`在检查验证和`FALSE`未验证时返回。您可以对 执行相同的操作`olevel_subject_code`，但如果您希望验证输入的至少 5 个科目，以便每个科目都有一个输入的成绩，我建议您为两者创建一种方法并将其作为自定义验证规则`'olevel_subject_code'`放入`$validate`. $check 参数保存正在验证的字段的数据。在这个（以及每一个）自定义规则中，您可以使用模型的`$this->data`属性，该属性包含所有当前模型数据。

# function - JDBC Postgres 存储函数调用返回 setof 'myType'

> ID：11257110
> 
> 赞同：2
> 
> 时间：2012-06-29T06:32:47.100
> 
> 标签：function, postgresql, jdbc, callable

我正在尝试保护我的数据库免受 SQL 注入。我有许多返回 SETOF 我预定义数据类型的存储函数。例如：

```
create type userLoginUserIdPasswordReturnType as
(
  userId integer, -- user.id
  password text 
);

CREATE OR REPLACE FUNCTION "user_login_get_id_password"(usernameIn text)
returns setof userLoginUserIdPasswordReturnType as
$$
declare
    sql text;
begin
      sql =  'select id, cryptpwd from "user" where username = ' || usernameIn ||';';
      return query execute sql;
end;
$$ language 'plpgsql'; 
```

我现在想从我的 Java 前端调用这些存储过程。根据我的阅读，就 SQL 注入而言，使用 CallableStatement 更安全。这是我迄今为止所拥有的：

```
public ArrayList<String> userLoginGetIdPassword(String username){
        ArrayList<String> result = new ArrayList<String>();
        try{
            String commandText = "{call user_login_get_id_password(?)}";
            this.cstmt = this.myConnection.prepareCall(commandText);
            this.cstmt.setObject(1, username);
//          this.rs = this.cstmt.execute();
            this.rs = cstmt.executeQuery();
            while (this.rs.next()){
                result.add(this.rs.getString(1));
            }
        } catch (SQLException e){
            System.out.println("SQL Exception: ");
            e.printStackTrace();
        }
        return result;
    } 
```

如果我尝试使用 execute() 方法，它会要求我将 ResultSet rs 设置为布尔值。如果按原样运行 (executeQuery())，则在 ResultSet 中只能看到 returnType 的第一个字段 (userId)。

如果我这样调用存储过程：

```
public ArrayList<String> userLoginGetIdPassword(String username){
        ArrayList<String> result = new ArrayList<String>();
        try{
            String query = "select \"user_login_get_id_password\"('" + username + "');";
            System.out.println(query);
            this.stmt = this.myConnection.createStatement();
            this.rs = this.stmt.executeQuery(query);
            while (this.rs.next()){
                result.add(this.rs.getString(1));
            }
        } catch (SQLException e){
            System.out.println("SQL Exception: ");
            e.printStackTrace();
        }
        return result;
    } 
```

我得到正确的数据。

此外，如果有任何进一步的提示可以保护我的数据库免受 SQL 注入，请指出。我已经创建了应用程序将使用的特定 Postgres 角色，并实现了一个 ConnectionPool (c3p0) 来连接到我的数据库 - 应用程序将在本地网络上运行。我正在验证来自不同 Java Swing 组件的用户输入，以避免 SQL 注入攻击（注释 --、分号、* 和其他 SQL 命令，如 DELETE）。

任何意见都将受到欢迎。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:26:49.660

首先，PostgreSQL 不支持该`call`命令，这就是您的第一种方法失败的原因。

在第二种方法中，您将遇到两个问题。首先是SQL注入。使用标准绑定方法将解决该问题。你的第二个问题是你将很难从你的函数中解析数据，因为你已经调用了它。

更好的方法是

```
SELECT * FROM user_login_get_id_password(?) 
```

但是请注意，**您的函数内部可以进行 sql 注入。** 在您可以避免的范围内`EXECUTE`，这将保护您。如果必须使用执行，请将查询字符串更改为：

```
sql =  'select id, cryptpwd from "user" where username = ' || quote_literal(usernameIn); 
```

在执行查询中不需要终止分号。它会自动终止。不过，您确实需要调用 quote_literal（如果引用表/列名，请使用 quote_ident()）。

# windows - 如何对 Jan Berkel 的 android-plugin 进行更改和应用更改？

> ID：11257115
> 
> 赞同：1
> 
> 时间：2012-06-29T06:33:26.027
> 
> 标签：windows, scala, sbt, sbt-android-plugin

正如标题所说，我想知道如何将更改应用到[Jan Berkel 的 SBT Android Plugin](https://github.com/jberkel/android-plugin)。

我知道那里说什么...

```
$ git clone git://github.com/jberkel/android-plugin.git
$ cd android-plugin
$ sbt publish-local 
```

......我做到了，把这个放进去`/target/scala-2.9.1/sbt-0.11.3/`

```
/api/
/cache/
/classes/
/resource_managed/
/ivy-0.6.2-SNAPSHOT.xml
/sbt-android-plugin-0.6.2-SNAPSHOT.jar
/sbt-android-plugin-0.6.2-SNAPSHOT-javadoc.jar
/sbt-android-plugin-0.6.2-SNAPSHOT-sources.jar 
```

我的问题是，如何将这些更改应用到我当前的 SBT。

顺便说一句，我正在使用**Windows 7**（我知道，我知道......：D）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:09:07.320

在 publish-local 之后，您应该将它放在本地的 ivy 缓存中，并且可以使用它。你检查过里面有没有？

# silverlight - 如何在silverlight中打印多页

> ID：11257119
> 
> 赞同：1
> 
> 时间：2012-06-29T06:33:46.163
> 
> 标签：silverlight, c#-4.0, silverlight-5.0

如何在 Silverlight 中打印多页。实际上我在silverlight中有一个场景，我有按钮单击事件，我可以在其中打印单个页面中的所有内容并且所有多余的内容都被删除但我没有得到下一页打印

这是我的按钮点击事件

```
private void btnSubmitPrint_Click(object sender, RoutedEventArgs e)
            {
                _currentIndex = 0;

                 PrintDocument docprin = new PrintDocument();

                 docprin.PrintPage += new EventHandler<PrintPageEventArgs>(docprin_PrintPage);

                  string DocumentName = "Balaji";

                    docprin.Print(DocumentName);

             }

    //I Combine all the List into to a single string by using Linq

             void docprin_PrintPage(object sender, PrintPageEventArgs e)
            {
                string delimeter = "\n";

                    var checkval = ListOfPageComments.Select(i => i.Comment.Insert(100, Environment.NewLine));//This lINQ OPERATION
               var ListofPagecommentsAscending = from n in ListOfPageComments orderby n.Date descending select n;

     var CommentsLineBreaks = ListofPagecommentsAscending.Select(conmmentss =>
                   {
                       var retur = conmmentss;
                       if (conmmentss.Comment.Length > 100)
                       {
                           IEnumerable<string> spllitingvaluetoNewLine = (Enumerable.Range(0, conmmentss.Comment.Length / 100).Select(j => conmmentss.Comment.Substring(j * 100, 100)));
                           string RejoiningLinestoSingle = String.Join(" \n ", spllitingvaluetoNewLine);
                           conmmentss.Comment = RejoiningLinestoSingle;
                           return conmmentss;
                       }
                       return conmmentss;
                   });

               var delimitedcomments = CommentsLineBreaks.Select(i => i.Date + "\n" + i.Comment).Aggregate((i, j) => i + delimeter + j);

                string Printcomments = String.Join(delimeter, delimitedcomments);

              List<string> get = (Enumerable.Range(0, Printcomments.Length / 800).Select(j => Printcomments.Substring(j * 800, 800))).ToList();

//AFTER GETTING THE VALUE OF STRING I SPLIT THEM INTO A LIST 
                while (_currentIndex < get.Count())//lOOPING CONDITION TO PRINT MULTIPLE PAGES
                {
                    var pageRoot = new Canvas();
                    e.PageVisual = pageRoot;

                    _currentTop = PAGEMARGIN;
                    _availableSpace = e.PrintableArea.Height - PAGEMARGIN * 2;

                  //  var txt = new TextBlock { Text = Printcomments };

                    var txt = new TextBlock { Text = get[_currentIndex].ToString() };

                    if (ROWHEIGHT > _availableSpace)
                    {

                        e.HasMorePages = true;
                        break;

                    }

                    txt.SetValue(Canvas.TopProperty, _currentTop);
                    txt.SetValue(Canvas.LeftProperty, PAGEMARGIN);

                    _currentTop += ROWHEIGHT;
                    _availableSpace -= ROWHEIGHT;
                    pageRoot.Children.Add(txt);
                    _currentIndex++;

                }

           } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T09:00:14.340

[这里](http://mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2009/11/18/silverlight-4-rough-notes-printing.aspx)和[这里](http://gruchalski.com/2009/11/20/printing-data-on-multiple-pages-with-silverlight-4/)有两篇博文，更详细地描述了 Silverlight 的多页打印。

# php - 使用 pear 在 xls 文件中生成外部和内部链接

> ID：11257121
> 
> 赞同：0
> 
> 时间：2012-06-29T06:33:49.627
> 
> 标签：php, pear, spreadsheet, xls

我想用多张纸生成 xls 文件。所以，我从下面提到的链接中获得了帮助。

[http://pear.php.net/package/Spreadsheet_Excel_Writer](http://pear.php.net/package/Spreadsheet_Excel_Writer)

使用同一个教程文档，我能够在我的 xls 文件中创建多张工作表。即，在我的 test.xls 文件中，我能够创建 sheet1、sheet2、sheet2 等。

现在，我想在 sheet1 的内容中添加一个链接，以便 sheet2 显示数据。我正在通过 Worksheet::writeUrl 方法。但是，我没有在内容中添加链接。

**示例代码如下：**

```
require_once 'Spreadsheet/Excel/Writer.php';

$workbook = new Spreadsheet_Excel_Writer();

$workbook->send('test.xls');

$worksheet =& $workbook->addWorksheet('Report');
$worksheet1 =& $workbook->addWorksheet('John Smith');

$sheet = "John Smith";

$worksheet->write(0, 0, 'Name');
$worksheet->write(0, 1, 'Age');

$format =& $worksheet->writeUrl(1,0 ,"internal:".$sheet."!A1", $sheet);

$worksheet->write(1, 1, 30);
$worksheet->write(2, 0, 'Johann Schmidt');
$worksheet->write(2, 1, 31);
$worksheet->write(3, 0, 'Juan Herrera');
$worksheet->write(3, 1, 32);

$worksheet1->write(0, 0, 'Name');
$worksheet1->write(0, 1, 'Age');
$worksheet1->write(1, 0, 'aaaaaa');
$worksheet1->write(1, 1, 30);
$worksheet1->write(2, 0, 'bbbbb');
$worksheet1->write(2, 1, 31);
$worksheet1->write(3, 0, 'ccccc');
$worksheet1->write(3, 1, 32);

$workbook->close(); 
```

请帮我添加链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T06:40:36.630

您的工作表名称有一个空格，因此需要在超链接中引用。我不记得这是否意味着

```
'internal:John Smith'!A1 
```

或者

```
internal:'John Smith'!A1 
```

怀疑后者，但我还没有真正检查过

# hyperion - hyperion 中共享服务的替代名称

> ID：11257123
> 
> 赞同：-1
> 
> 时间：2012-06-29T06:33:53.417
> 
> 标签：hyperion, sharedservicesprovider, user-guide

我是 Hyperion 的新手，目前正在研究用户指南中的共享服务。我已经阅读了有关共享服务的信息，共享服务的任务是什么，我也经历过。现在我有一个问题是：

Hyperion 中共享服务的替代名称是什么。请回复我 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:27:37.083

共享服务没有替代名称。Shared Services 是一系列跨 Hyperion EPM 套件共享的服务，它们是 Foundation Services 模块的一部分。

[http://www.oracle.com/technetwork/middleware/bi-foundation/shared-services-100533.html](http://www.oracle.com/technetwork/middleware/bi-foundation/shared-services-100533.html)

# iphone - 以 24 - 12 小时格式 xcode 将 NSDate 设置为“TimePicker”

> ID：11257127
> 
> 赞同：1
> 
> 时间：2012-06-29T06:34:21.037
> 
> 标签：iphone, ios, xcode, nsdate, nsdateformatter

我正在使用一些 NSDate 对象，而且我使用的是 24 小时格式的 iPhone，所以当我测试我的应用程序时，一切都很顺利，但是，我的一个朋友在他的 iPhone 上尝试了该应用程序，但他使用了 12 小时格式，经过一番研究，我发现问题出在日期，我不知道为什么我用它来设置日期选择器和时间选择器，所以我从数据库中读取了一些值（是的，我已经检查了值并且它们是正确的，这不是值问题），所以所有这些数据都被格式化并作为 NSDate 放在一起，然后，我用我刚刚创建的这个日期设置日期选择器和时间选择器

```
NSDateFormatter *currentDate = [[[NSDateFormatter alloc] init] autorelease];
[currentDate setDateFormat:@"yyyy-MM-dd HH:mm"];
NSDate * startDate =[currentDate dateFromString:[NSString stringWithFormat:@"%d-%d-%d %d:%d",yearVal,monthVal,dayVal,hourVal,minVal]];
[datePicker setDate:startDate];
[timePicker setDate:startDate]; 
```

所以，yearVal、monthVal、dayVal、hourVal、minVal 都是 NSIntegers ......问题是，如果你的 iPhone/iPod 在你的时钟设置中使用 24 小时，它完全可以工作，但是，如果你使用 12 小时格式，它崩溃并显示此错误消息

```
> *** Assertion failure in -[UIDatePickerView _updateBitsForDate:forced:andReload:animateIfNeeded:], /SourceCache/UIKit/UIKit-1914.85/UIDatePicker.m:1200 2012-06-29
> 01:19:15.753 MyApp[1215:707] *** Terminating app due to uncaught
> exception 'NSInternalInconsistencyException', reason: 'Invalid
> parameter not satisfying: date'
> *** First throw call stack: (0x3710188f 0x34e06259 0x37101789 0x379403a3 0x31042807 0x30f616c5 0x30f61563 0x31042385 0xf48ef 0xf7bd3
> 0x30e0ec8b 0x30e1b1e9 0x30e1b059 0x30e1af3f 0x30e1a7c1 0x30e1a503
> 0x30e0eaff 0x30e0e7d5 0xdd945 0x30e8793d 0x30f01627 0x37972933
> 0x370d5a33 0x370d5699 0x370d426f 0x370574a5 0x3705736d 0x33816439
> 0x30e03cd5 0xd4cbb 0xd4c60) terminate called throwing an
> exception(gdb) 
```

因此，如果您对如何解决此问题有任何想法，我将不胜感激

哦，我已经读到 HH 以 24 小时格式返回小时数，嗯，我所有的应用程序都使用 HH，所以我不明白为什么我一直在我打印到的一些 NSLogs 中观看一些“am”或“pm”调试

提前致谢

哦，对不起，我几乎忘记了我是否评论了这些行

```
[datePicker setDate:startDate];
[timePicker setDate:startDate]; 
```

该应用程序不会崩溃，但当然，它不会显示我需要的时间和日期

注意：我需要使用 24 小时格式，如果我决定使用 am pm 选择格式，我将不得不更改我所有的应用程序，而且我没有足够的时间

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T18:03:29.867

看看这个：[查找用户是否更喜欢 12 / 24 小时制？](https://stackoverflow.com/questions/8520467/)…认为第二个答案可能最适合您。然后根据用户的设备使用 12 小时制还是 24 小时制，您可以相应地设置 [currentDate setDateFormat:....]。

如果你想要一个 12 小时时钟，那么设置 currentDate 如下：

```
[currentDate setDateFormat:@"yyyy-MM-dd h:mm:ss a"]; 
```

如果您想要 24 小时制时钟，请按如下方式设置 currentDate：

```
[currentDate setDateFormat:@"yyyy-MM-dd HH:mm"]; 
```

# php - IE 中的 HTML 问题

> ID：11257128
> 
> 赞同：7
> 
> 时间：2012-06-29T06:34:21.440
> 
> 标签：php, jquery, html, internet-explorer

我已经编写了一个用于登录的 html 代码，如下所示

```
<div id="wrapper">
<div id="page">
    <div class="aLogin">
        <label>User Name : </label>
        <input type="text" class="lname" />
        <label>Password : </label>
        <input type="password" class="lpwd" />
        <input type="submit" class="logSubmit" value="LOGIN" />
        <p class="lalert">test alert</p>
    </div>
</div> 
```

并编写了 jQuery 进行验证。它`<p class="lalert">test alert</p>`动态地替换了警报（这里我使用了）。
问题是，当我在 IE 中运行它时，警告消息显示了两次。但在其他浏览器中没有问题。

**jQuery**

```
$(document).ready(function(){
   $('.logSubmit').click(function(){
    var name = $('.lname').val();
    var pwd = $('.lpwd').val();
    $.post("/login.php",{name:name,pwd:pwd}).success(function(data){
        var obj = jQuery.parseJSON(data);
        $('.lalert').fadeIn('slow');
        if(obj.success == 1){
            $('.lalert').css('color','#067800');
            $('.lname').val('');
            $('.pwd').val('');
            $('.lalert').html(obj.msg);
        }else{
            $('.lalert').css('color','#CC0000');
            $('.lalert').html(obj.msg);
        }
    });
  });
}); 
```

**登录.php**

```
 <?php
   $name = $_POST['name'];
   $pwd = $_POST['pwd'];
   $err['success'] = 0;
   $err['msg'] = '';
   if($name != 'admin'){
   $err['msg'] = 'Invalid Name';
   }else if($pwd != 'admin'){
   $err['msg'] = 'Invalid Password';
   }else{
   $err['success'] = 1;
   $err['msg'] = 'Success';
   }
   echo json_encode($err);
?> 
```

我找不到为什么会这样。有谁能够帮我..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T05:09:11.933

嗨，您忘记写“return false”。

```
$('.logSubmit').click(function(){ 
    var name = $('.lname').val(); 
    var pwd = $('.lpwd').val(); 
    $.post("/login.php",{name:name,pwd:pwd}).success(function(data){ 
        var obj = jQuery.parseJSON(data); 
        $('.lalert').fadeIn('slow'); 
        if(obj.success == 1){ 
            $('.lalert').css('color','#067800'); 
            $('.lname').val(''); 
            $('.pwd').val(''); 
            $('.lalert').html(obj.msg); 
        }else{ 
            $('.lalert').css('color','#CC0000'); 
            $('.lalert').html(obj.msg); 
        } 
    }); 
      return false;
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:01:21.240

最后我得到了解决方案。问题是由于**Empty Text Node**引起的。IE8为标签 后的换行符生成**空文本节点。**`<input>,<select>,<img>`

我删除了标签后的空格，现在问题解决了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T08:53:36.767

尝试使用而不是使用`$('.logSubmit').click(function(){ ...}`

使用以下语法

```
$('.logSubmit').unbind('click').click(function(){ .....} 
```

这可能会解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T08:54:00.103

尝试添加**return false;** 到您的 .logSubmit -单击活页夹。此外，您可以尝试用 <button> 替换提交类型的输入，因为提交与表单（提交）相关，而您的情况并非如此。

# asp.net - Web 控件无法在相应的代码隐藏类中识别

> ID：11257130
> 
> 赞同：0
> 
> 时间：2012-06-29T06:34:45.383
> 
> 标签：asp.net

```
<%@ Page Title="Log In" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true" CodeBehind="Login.aspx.cs" Inherits="EQ.Account.Login" %>
<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
<h2>
    Log In
</h2>
<p>
    Please enter your Employee Code and password.
    If you don't have an account Please Contact your Manager.
</p>
<asp:Login ID="LoginUser" runat="server" EnableViewState="false" RenderOuterTable="false">
    <LayoutTemplate>
        <span class="failureNotification">
            <asp:Literal ID="FailureText" runat="server"></asp:Literal>
        </span>
        <asp:ValidationSummary ID="LoginUserValidationSummary" runat="server" CssClass="failureNotification" 
             ValidationGroup="LoginUserValidationGroup"/>
        <div class="accountInfo">
            <fieldset class="login">
                <legend>Account Information</legend>
                <p>
                    <asp:Label ID="UserNameLabel" runat="server" AssociatedControlID="UserName">Username:</asp:Label>
                    <asp:TextBox ID="txtUserName" runat="server" CssClass="textEntry"></asp:TextBox>
                    <asp:RequiredFieldValidator ID="UserNameRequired" runat="server" ControlToValidate="UserName" 
                         CssClass="failureNotification" ErrorMessage="User Name is required." ToolTip="User Name is required." 
                         ValidationGroup="LoginUserValidationGroup">*</asp:RequiredFieldValidator>
                </p>
                <p>
                    <asp:Label ID="PasswordLabel" runat="server" AssociatedControlID="Password">Password:</asp:Label>
                    <asp:TextBox ID="txtPassword" runat="server" CssClass="passwordEntry" TextMode="Password"></asp:TextBox>
                    <asp:RequiredFieldValidator ID="PasswordRequired" runat="server" ControlToValidate="Password" 
                         CssClass="failureNotification" ErrorMessage="Password is required." ToolTip="Password is required." 
                         ValidationGroup="LoginUserValidationGroup">*</asp:RequiredFieldValidator>
                </p>
                <p>
                    <asp:CheckBox ID="RememberMe" runat="server"/>
                    <asp:Label ID="RememberMeLabel" runat="server" AssociatedControlID="RememberMe" CssClass="inline">Keep me logged in</asp:Label>
                </p>
                <p>
                <asp:Label ID="lblErrorMessage" runat="server" CssClass="failureNotification" Visible="false" />
                </p>
            </fieldset>
            <p class="submitButton">
                <asp:Button ID="LoginButton" runat="server" CommandName="Login" Text="Log In" ValidationGroup="LoginUserValidationGroup" OnClick="LoginButton_Click"/>
            </p>
        </div>
    </LayoutTemplate>
</asp:Login> 
```

这是我的 ASP 页面，但在 CodeBehind 页面（即 Login.aspx.cs）中，当我尝试获取 lblErrorMessage、txtuserName 和 txtPassword 等控件的值时，我收到“错误 1 ​​名称 'txtUserName' 不存在于当前上下文 C:\Users\dsingh\Documents\Visual Studio 2010\Projects\EQ\EQ\Account\Login.aspx.cs 64 46 EQ"。等待是否有人会解决这个问题并指导我为什么它不能从后面的代码中识别控件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T06:42:58.177

要访问`UserName`文本框，您将使用 FindControl 方法遍历对象树。例如，

```
string myValue = (LoginUser.FindControl("UserName") as TextBox).Text; 
```

为了使生活更轻松并使代码更具可读性，您可以添加一个扩展方法来返回强类型控件。

```
// usage
var myControlUsingExtensionMethod = LoginUser.FindControl<TextBox>("UserName").Text;

public static class ControlExtensions
{
    public static T FindControl<T>(this Control control, string id) where T : Control
    {
        return control.FindControl(id) as T;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T06:43:51.460

我猜您使用的是 WebApplication 而不是网站，如果是这种情况，您需要在代码中声明控件，当您使用 Visual Studio 生成 ASPX 页面并且控件被声明时，这是自动为您完成的您使用属性创建一个服务器控件`ID`，这些控件在设计器文件中注册：

像这样的东西：

```
namespace WebApplication1 {

    public partial class DynamicControls {

        /// <summary>
        /// form1 control.
        /// </summary>
        /// <remarks>
        /// Auto-generated field.
        /// To modify move field declaration from designer file to code-behind file.
        /// </remarks>
        protected global::System.Web.UI.HtmlControls.HtmlForm form1;

        /// <summary>
        /// lblMessage control.
        /// </summary>
        /// <remarks>
        /// Auto-generated field.
        /// To modify move field declaration from designer file to code-behind file.
        /// </remarks>
        protected global::System.Web.UI.WebControls.Label lblMessage;
    }
} 
```

当您使用网站时，您不需要明确声明它们，该工作将在用户第一次访问您的网站时由 ASP.Net 编译器完成

这些文件是由 Visual Studio 自动创建的，您将在解决方案资源管理器中看到类似这样的内容：

![在此处输入图像描述](../Images/dc43c542be5f7092a4965f2776ba0425.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T07:24:38.233

`System.Web.UI.WebControls.Login`(asp:Login) 控件派生自该控件，`System.Web.UI.WebControls.CompositeControl`而`INamingContainer`.

当一个类实现 INamingContainer 时，它负责“跟踪”它的子控件。

对于这些类型的控件，子控件在后面的代码中是不能通过简单的引用其ID来访问的，因为子控件是由父控件动态创建的。相反，您必须使用父控件的`FindControl`方法来获取对它们的引用。

请参阅 Kane 关于如何使用 FindControl 的答案。

# php - 通过按钮（PHP）从子域移动到完整视图

> ID：11257131
> 
> 赞同：0
> 
> 时间：2012-06-29T06:34:50.020
> 
> 标签：php, mobile

如果您在移动网站上，我找到了一个链接到子域的脚本。但是我怎样才能在我的移动网站上有一个按钮来链接到 php 中的完整视图-非子域？

继承人的代码：

```
if(strstr($_SERVER['HTTP_USER_AGENT'], 'iPhone') ||
   strstr($_SERVER['HTTP_USER_AGENT'], 'Android')) {
   header('Location: http://m.ihreseite.ch');
   exit();
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T06:48:37.390

这可以给你一个想法。您可以将其基本设置为会话并获取此会话变量。如果访问者选择移动网站或真实网站，请检查每个页面。然后将他们重定向到他们想要浏览的网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T06:50:51.777

您可以设置一个变量来标记您希望留在整个站点上，然后将其保存在会话或 cookie 中。你可以在[前面的问题](https://stackoverflow.com/questions/11230892/allow-switch-from-mobile-site-to-full-site-with-jquery)（或[这个](https://stackoverflow.com/questions/5844966/view-full-site-mobile-site-option)问题）中看到一个相同的例子。

# database - 使用 pgAdmin 导出 Postgresql 表数据

> ID：11257132
> 
> 赞同：146
> 
> 时间：2012-06-29T06:34:54.540
> 
> 标签：database, postgresql, export, pgadmin

我正在使用 pgAdmin 版本 1.14.3。PostgreSQL 数据库版本是 9.1。

我获得了用于创建表的所有 Db 脚本，但无法导出表内的所有数据。找不到以 db 脚本形式导出数据的任何选项。

* * *

## 回答 #1

> 赞同：197
> 
> 时间：2015-03-25T02:53:55.987

1.  右键单击您的表并选择选项`Backup`..
2.  在文件选项上，设置文件路径/文件名并选择`PLAIN`格式
3.  忽略转储选项 #1 选项卡
4.  在转储选项 #2 选项卡中，检查`USE INSERT COMMANDS`
5.  在 Dump Options #2 选项卡中，检查`Use Column Inserts`是否需要插入中的列名。
6.  点击`Backup`按钮

* * *

## 回答 #2

> 赞同：159
> 
> 时间：2012-06-29T07:33:19.393

只需右键单击一个表并选择“备份”。弹出窗口将显示各种选项，包括“格式”，选择“普通”，然后您将获得普通 SQL。

pgAdmin 只是使用[pg_dump](http://www.postgresql.org/docs/current/interactive/app-pgdump.html)创建转储，当您想要纯 SQL 时也是如此。

它使用这样的东西：

> pg_dump --user 用户 --password --format=plain --table=tablename --inserts --attribute-inserts 等。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2018-02-02T00:42:05.170

在 pgAdmin4 中，右键单击表选择备份，如下所示

[![在此处输入图像描述](../Images/58cc329d536903c5f4c62a06ec763992.png)](https://i.stack.imgur.com/a8wty.png)

之后进入备份对话框，有**转储选项选项**卡，其中有部分查询，您可以选择**使用插入命令**，其中包括备份中的所有插入查询。

[![在此处输入图像描述](../Images/4bb4ec187ed52f2db76dd36f240e054e.png)](https://i.stack.imgur.com/ozvCQ.png)

# kinect - 使用 Microsoft Kinect SDK 跟踪使用旋转角度

> ID：11257135
> 
> 赞同：2
> 
> 时间：2012-06-29T06:35:05.853
> 
> 标签：kinect

我正在实现一个可以跟踪用户旋转的 WPF 应用程序。基本的想法是 kinect 被放置在一个固定的位置。用户来到 kinect 前面，他/她可以 360 度旋转。我想跟踪用户旋转了多少度。我使用以下方法对其进行跟踪。但似乎该功能不准确，当用户面对 0 度时，它显示为 180，并且它也给出了负值。

```
public static double GetShoulderRotation(this Skeleton skeleton)
    {
        Joint leftShoulder = skeleton.Joints[JointType.ShoulderLeft];
        Joint rightShoulder = skeleton.Joints[JointType.ShoulderRight];
        if (leftShoulder.TrackingState == JointTrackingState.NotTracked ||
            rightShoulder.TrackingState == JointTrackingState.NotTracked)
        {
            return Double.NaN;
        }
        else
        {
            return (Math.Atan2(
                rightShoulder.Position.Z - leftShoulder.Position.Z,
                leftShoulder.Position.X - rightShoulder.Position.X)*180.0/Math.PI);
        }
    } 
```

任何人都可以为此提供解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:12:09.903

我建议使用髋中心和脊柱之间的骨骼旋转。当一个人面向 Kinect 站立时，Hipcenter.Z-Spine.Z 为正值。当一个人侧身站立并面向左侧时，Hipcenter.X-Spine.X 为负值。使用 X 和 Z 值，很容易计算旋转角度。正弦肩关节可能会被 Kinect 身体的其他部位阻挡，我选择了臀部中心的骨骼到脊柱，它可以很好地跟踪我身体的旋转。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:36:00.337

尝试使用深度而不是计算度数。首先检测左右肩之间的距离（X轴）。然后在这个距离和角度之间创建一个比例。如果距离（我的意思是左右肩之间的距离）为最大且为正，则角度为 0。如果距离为最大且为负，则角度为 180。如果距离为最大/2 且为正，则角度为 45。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-17T22:55:28.423

我知道这是一个老问题，但我最近一直在为同样的问题而苦苦挣扎。我写了一个函数，可以跟踪两个关节之间的旋转角度。我试过左右臀部，效果很好。Mabe这对其他人会有所帮助。

一件事是它适用于两种方式的旋转角度<70度。如果角度较大，则难以适当地跟踪它。

这是我的解决方案。

```
 protected double TrackJointsRotation(KinectSensor sensor, Joint joint1, Joint joint2)
    {
        if (joint1.TrackingState == JointTrackingState.NotTracked
            || joint2.TrackingState == JointTrackingState.NotTracked)
            return double.NaN;

        var rightHip = sensor.CoordinateMapper.MapSkeletonPointToDepthPoint(joint1.Position, sensor.DepthStream.Format);
        var leftHip = sensor.CoordinateMapper.MapSkeletonPointToDepthPoint(joint2.Position, sensor.DepthStream.Format);

        return (Math.Atan(((double)rightHip.Depth - leftHip.Depth) / ((double)leftHip.X - rightHip.X)) * 180.0 / Math.PI);
    } 
```

# asp.net - 将此 SQL 查询转换为 LINQ to SQL

> ID：11257136
> 
> 赞同：1
> 
> 时间：2012-06-29T06:35:06.100
> 
> 标签：asp.net, linq, linq-to-sql

我正在尝试将此 SQL 查询转换为 L2S ..

```
SELECT TOP 5  vt.* 
FROM dbo.ADTEXP_RateDefinitions vt 
    JOIN
        (SELECT vLocationID FROM dbo.Vessel_Table WHERE iOwner=401) V
    ON vt.VesselID=V.vLocationID 
ORDER BY vt.RateAddedDate DESC 
```

感谢任何帮助或建议谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T07:15:15.897

试试这个。

```
 var result = (from vt in dbo.ADTEXP_RateDefinitions
    join V in (
        (from VT1 in dbo.Vessel_Table
        where
          VT1.iOwner==401
        select new {
          VT1.vLocationID
        })) on vt.VesselID equals V.vLocationID
    orderby
      vt.RateAddedDate descending
    select vt).Take(5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T07:00:42.667

```
(from vrt in _db.ADTEXP_RateDefinitions
join vt in _db.Vessel_table
on vrt.VesselId equals vt.locationId
where vt.iOwner == 401
select new
{
   VesselId = vrt.VesselId,
   Owner = vt.iOwner
}).Take(5) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T07:14:57.267

我认为是这样的：

```
(from vt in dbo.ADTEXP_RateDefinitions
from  v in (from vlt on dbo.Vessel_Table where vlt.iOwner=401 select vlt)
where vt.VesselID = v.vLocationID
orderby vt.RateAddedDate descending
select vt).Take(5); 
```

# symfony - 学说：映射：转换和学说： 映射：导入之间的区别

> ID：11257138
> 
> 赞同：5
> 
> 时间：2012-06-29T06:35:20.983
> 
> 标签：symfony, doctrine

我想为我的 symfony 应用程序从数据库中生成实体类。所以我遵循了以下三个步骤（来自[如何从现有数据库生成实体](http://symfony.com/doc/current/cookbook/doctrine/reverse_engineering.html)）

```
 1\. php app/console doctrine:mapping:convert yml ./src/Acme/BlogBundle/Resources/config/doctrine/metadata/orm --from-database --force

 2\. php app/console doctrine:mapping:import AcmeBlogBundle yml

 3\. php app/console doctrine:generate:entities AcmeBlogBundle 
```

为了了解这三个命令的工作原理，我刚刚从**./src/Acme/BlogBu​​ndle/Resources/config/doctrine/metadata/orm**中删除了所有文件。我在一张表中添加了一个字段。之后，我遵循了 command-2 和 command-3。

我检查了新字段的修改表的实体。新字段存在于实体中。

那么我们为什么要使用**doctrine:mapping:convert**命令来从现有数据库中生成实体呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T22:54:35.803

我不太明白你们在那里说什么，因为对我来说这 3 个命令是必需的并且它们之间是不同的。

如果你想自省数据库模式以生成所需的 symfony ORM 文件和实体，那么你必须使用 3 个命令。

这是他们的工作：1）

```
php app/console doctrine:mapping:convert yml ./src/< vendor>/< bundle_name>/Resources/config/doctrine/metadata/orm --from-database --force 
```

这会通过自省从数据库中构建实体映射文件。对于数据库上的每个表，这只会在以下位置生成一个 <entity>.orm.yml：

```
< proj_folder>/src/< vendor>/< bundle_name>/Resources/config/doctrine/metadata/orm/< entity>.orm.yml 
```

2)

```
php app/console doctrine:mapping:import < vendor>< bundle_name> annotation** 
```

为从 DB 自省的每个表生成实体类：

输出：`writing /var/www/html/< project_folder>/src/< vendor>/< bundle_name>/Entity/< entity>.php`

3)

```
php app/console doctrine:generate:entities < vendor>< nameBundle>** 
```

这只会为所有实体类属性生成 getter 和 setter。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T12:50:40.093

据我所知，正如我在[这篇文章](http://blog.alterphp.com/2011/06/some-tips-for-doctrine2-entities.html)中解释的那样，**mapping:convert 无法解析模型中关系的命名空间**。这就是为什么您需要处理映射：导入并获取最终映射文件。处理完mapping:import后，就可以删除`YourBundle/Resources/config/doctrine/metadata/orm`目录了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T07:27:10.030

一旦您生成了实体类，Doctrine 就足够智能，可以获取从实体类导入映射所需的所有信息，而不需要您在第一步中获得的类元数据。如果您删除了元数据和实体类，那么您将无法在不运行步骤 1 的情况下运行步骤 2。

# ipad - iPad 3 远程测试设备

> ID：11257139
> 
> 赞同：1
> 
> 时间：2012-06-29T06:35:28.753
> 
> 标签：ipad, testing, remote-access

我已经为 iPhone 开发了一个 iOS 5 应用程序，但 Apple 抱怨 iPad 3 上的一些非功能部件。在模拟器中一切正常，所以我需要在真正的 iPad 3 设备上进行测试。我查看了不同的在线远程设备提供商，但他们都只提供 iPad 2 设备。

有没有可以提供 iPad 3 的供应商？我记得有一个服务提供一堆 Apple 产品，但我不记得它的名称和地址。

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T01:42:43.450

我认为您应该尝试[浏览器堆栈](http://www.browserstack.com)

# jsp - 会话 Bean 和 JSP 会话

> ID：11257141
> 
> 赞同：0
> 
> 时间：2012-06-29T06:35:53.360
> 
> 标签：jsp, session, jakarta-ee, ejb

我正在阅读有关 EJB 会话 Bean 的信息。我主要在春季和网站上工作，我们将会话保持在正常会话对象中。会话 bean 的文档说，如果我有一个购物车，我使用会话 bean？这是否意味着我不需要处理 JSP 级别的会话？并且这个会话 bean 也可以用来维护用户会话吗？

我不同意我在上一段最后写的内容。不是重复代码和额外使用内存吗？

请解释这个我根本没有得到的概念。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T06:44:10.327

Servlet 中的会话，由 Servlet 容器通过 HttpSession 对象进行维护，HttpSession 对象是通过 request 对象获取的。您不能真正实例化一个新的 HttpSession 对象，它不包含任何业务逻辑，但更多的是存储对象的地方。

EJB 中的会话是使用 SessionBeans 维护的。您设计的 bean 可以包含业务逻辑，并且可以被客户端使用。您有两种不同的会话 bean：有状态和无状态。第一个以某种方式与单个客户端连接。它维护该客户端的状态，只能由该客户端使用，当客户端“死亡”时，会话 bean 将“丢失”。

无状态会话 Bean 不维护任何状态，并且不能保证同一个客户端将使用同一个无状态 bean，即使是一个接一个的两个调用。无状态会话 EJB 的生命周期与有状态会话 EJB 的生命周期略有不同。EJB Container 是否负责准确了解如何跟踪每个会话并将请求从客户端重定向到正确的会话 Bean 实例。这样做的方式取决于供应商，并且是合同的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T06:50:39.977

因此，可以将 EJB 定义为封装业务逻辑并处理事务和安全性的服务器端组件。它们还具有用于消息传递、调度、远程访问、Web 服务端点（SOAP 和 REST）、依赖注入、组件生命周期、带有拦截器的 AOP 等的集成堆栈。

会话 EJB 共有三种类型：

1.  **无状态：**会话 bean 不包含方法之间的会话状态，任何实例都可以用于任何客户端。
2.  **有状态**的：会话 bean 包含会话状态，必须为单个用户跨方法保留。
3.  **Singleton：**单个会话 bean 在客户端之间共享，支持并发访问。

在 Web 应用程序中，您通常会使用无状态 bean 来列出产品。然后，您将使用有状态 bean 将产品存储在购物车中。

希望这会有所帮助。

# c++ - 内存溢出？

> ID：11257146
> 
> 赞同：3
> 
> 时间：2012-06-29T06:36:33.120
> 
> 标签：c++, memory, com, java-native-interface

我有一个 c++ 方法（对于 java，jni），就像下面一样，当我从 java 重复调用这个（每 150 毫秒）时，大约在 4 小时后。内存溢出……

JNIEXPORT jint JNICALL Java_nc_mes_pub_hardware_PCI1761_readChanel (JNIEnv *, jobject, jint channel){

```
HRESULT hr ; 

CLSID   clsid;
hr = CLSIDFromProgID(L"AdvDIO.AdvDIOCtrl",   &clsid);

CComPtr<IAdvDIO>  advlib;

hr = advlib.CoCreateInstance(clsid);

if ( SUCCEEDED( hr ) )
{ 
    advlib->DeviceNumber = 0;

    if(advlib->DeviceNumber < 0){
        return -100;
    }
    int i =advlib->ReadDiChannel( channel );
    // advlib.Release();
    advlib = NULL;
    return i;
}
else
{
    return -1;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T06:48:51.410

问题是这行代码：

```
advlib = NULL; 
```

对象需要正确的`advlib`值才能完成其工作。通过销毁其值并将其设置为 NULL，它不能再释放正确的实例。

取消注释`advlib.Release()`可能会使其工作。但正确的解决方法是删除
`advlib = NULL;`并允许`CComPtr`完成其工作。

# php - MySQL对复杂多表查询的分页

> ID：11257149
> 
> 赞同：0
> 
> 时间：2012-06-29T06:36:50.910
> 
> 标签：php, mysql, pagination, wordpress

目前我正在运行这样的 MySQL 查询

```
$query = "
        SELECT 
        t1.id AS 'post_id',
        t1.post_title AS 'post_title',
        t1.post_status AS 'post_status',
        COUNT( t1.id ) AS 'row_count', //this one is not working
        COUNT( t2.tag_id ) AS 'link_count',
        GROUP_CONCAT( t2.tag_id) AS 'link_id',
        GROUP_CONCAT( t2.url) AS 'url',
        GROUP_CONCAT( t2.title) AS 'title',
        GROUP_CONCAT( t2.active) AS 'active',
        FROM $posts_table AS t1
        JOIN $tags_table AS t2 ON ( t1.id = t2.post_id )
        GROUP BY t1.id
        ORDER BY t1.id DESC
        LIMIT $start_from, $row_to_show;
    "; 
```

这个查询的每个部分都执行得很好，除了`COUNT( t1.id ) AS 'row_count',`行。

**我想计算在t1 表**中找到的总行数，但是当我转储数组时

```
$result = $wpdb->get_results($query);
var_dump($result->row_count); 
```

它给了我`NULL`。

如果我在循环中使用它

```
foreach ( $result as $result ){
    echo $result->row_count;
} 
```

`link_count`然后该值与下一行中声明的值相同，`COUNT( t2.link_id ) AS 'link_count',`给出了我想要的值。

请给我一些关于如何在此查询上使用分页（如 30 个结果中的 10 个）的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T08:26:44.397

我尝试了很多但没有成功，所以我为分页做了另一个单独的数据库查询。

```
$page_query = "
    SELECT p.id 
    FROM 
    $posts_table as p, 
    $tag_table as c
    WHERE p.id=c.post_id
    GROUP BY p.id
"; 
```

它给了我可以用于分页的总行数的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T07:24:43.847

我认为问题出在 GROUP BY 上。

试试这个查询：

```
$query = "
        SELECT 
        t1.id AS 'post_id',
        t1.post_title AS 'post_title',
        t1.post_status AS 'post_status',
        COUNT( t1.id ) AS 'row_count', 
        COUNT( t2.tag_id ) AS 'link_count',
        GROUP_CONCAT( t2.tag_id) AS 'link_id',
        GROUP_CONCAT( t2.url) AS 'url',
        GROUP_CONCAT( t2.title) AS 'title',
        GROUP_CONCAT( t2.active) AS 'active',
        FROM $posts_table AS t1, $tags_table AS t2 
        GROUP BY t1.id 
        HAVING t1.id = t2.post_id 
        ORDER BY t1.id DESC
        LIMIT $start_from, $row_to_show;
    "; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T07:25:29.060

一个 quesy like`COUNT( DISTINCT X ) .. GROUP BY X`总是会产生值 1，如果你跳过 DISTINCT，你会得到组合连接的数量

有一些方法可以在 mysql 中获取计数，但它更容易使用`mysql_num_rows()`或`count()`在 php 中。

```
$results = $wpdb->get_results($query);

foreach($results as $result)
{
    $result->row_count =  count($results);
    ...
} 
```

上面只显示获取的行数，如果你想要你需要使用的总数`SQL_CALC_FOUND_ROWS`和`mysql_num_rows()`

```
$query = "SELECT SQL_CALC_FOUND_ROWS ... 
```

和

```
$result_count = mysql_num_rows(); 
```

# javascript - 在运行时使用phonegap将url添加到iphone中cordova.plist文件中的白名单

> ID：11257150
> 
> 赞同：0
> 
> 时间：2012-06-29T06:37:00.360
> 
> 标签：javascript, iphone, ios, cordova

我正在 phonegap 中制作网站[http://www.turrg.com](http://www.turrg.com)的移动应用程序，它在 android 上一切正常，但如果是 iphone，我必须将 url 域名添加到 cordova.plist 文件中的白名单中。但是在站点数据来自不同的 2 个站点中，因此我必须将这些站点的域名添加到 cordova.plist 文件中的白名单中是否有任何解决方案可以让我动态地广告这些域名意味着当新域名出现时自动添加添加到turrg站点..在cordova.plist文件中添加域名，如下所示。

```
 <key>ExternalHosts</key>
       <array>
               <string>*.facebook.com</string>
       </array> 
```

当站点有新域名时，如何在该文件中自动添加这种类型的域名。请帮助我提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T07:18:56.367

使用允许所有 url 的通配符：

```
<key>ExternalHosts</key>
<array>
     <string>*</string>
</array> 
```

# apache - 使用查询字符串的手机 mod_rewrite

> ID：11257168
> 
> 赞同：2
> 
> 时间：2012-06-29T06:39:20.613
> 
> 标签：apache, .htaccess, mod-rewrite, mobile

我有一个网站，可以让我通过 URL 中的查询访问该网站的移动版本。

我想不通的是如何自动将移动用户重定向到这个版本（目前你必须添加'？useformat = mobile'才能查看）。

这是我当前的 htaccess 设置

```
RewriteEngine On

#MediaWiki short URL
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]

#Mobile - not working?
RewriteCond %{HTTP_USER_AGENT} "android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC]
RewriteRule ^([^/]*)$ /index.php?useformat=mobile&title=$1 [L]

#HTTPS redirect (site uses HTTPS)
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

对 mod_rewrite 来说有点新，之前没有做太多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:30:27.287

您需要将其添加到您的移动规则之上：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

您需要将移动规则移到 mediawiki 规则之上，因为它在应用移动规则之前进行了重写，然后您需要将 HTTPS 规则移到其之上。所以在一起，它应该看起来像这样：

```
RewriteEngine On

#HTTPS redirect (site uses HTTPS)
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}

#Mobile - not working?
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{HTTP_USER_AGENT} "android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC]
RewriteRule ^([^/]*)$ /index.php?useformat=mobile&title=$1 [L]

#MediaWiki short URL
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

# jquery - 滚动内部子 div

> ID：11257169
> 
> 赞同：0
> 
> 时间：2012-06-29T06:39:31.187
> 
> 标签：jquery, css, html, scroll

我创建了一个 div，该 div 有两个孩子，一个是`ul`另一个，`div`我想滚动该内部 div 和字体的元素以修复`ul`. 我无法`div`在内部添加任何其他内容`div`

**代码**

```
<div style="width: 200px; overflow-x: auto; ">
<ul>
    <li>Some data</li>
    <li>some more data </li>
</ul>
<div style="height: 70px; width: 500px">
    <img src="http://www.fiveriverstech.com/wp-content/themes/fiverivers/images/about_s.jpg">
    <img src="http://www.fiveriverstech.com/wp-content/themes/fiverivers/images/about_s.jpg">
    <img src="http://www.fiveriverstech.com/wp-content/themes/fiverivers/images/about_s.jpg">
    <img src="http://www.fiveriverstech.com/wp-content/themes/fiverivers/images/about_s.jpg">
    <img src="http://www.fiveriverstech.com/wp-content/themes/fiverivers/images/about_s.jpg">
    <img src="http://www.fiveriverstech.com/wp-content/themes/fiverivers/images/about_s.jpg">
    <img src="http://www.fiveriverstech.com/wp-content/themes/fiverivers/images/about_s.jpg">
    <img src="http://www.fiveriverstech.com/wp-content/themes/fiverivers/images/about_s.jpg">
</div>
</div>​ 
```

**[现场演示](http://jsfiddle.net/ranasaani/57wdH/81/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T06:44:57.967

```
<div style="width: 150px; overflow-x: auto;position:relative ">
    <ul style="position:fixed">
        <li>Some data</li>
        <li>some more data </li>
    </ul>
    <div style="height: 100px; width: 500px;margin-top:60px">
        <img src="http://www.fiveriverstech.com/wp-content/themes/fiverivers/images/about_s.jpg">
        <img src="http://www.fiveriverstech.com/wp-content/themes/fiverivers/images/about_s.jpg">
        <img src="http://www.fiveriverstech.com/wp-content/themes/fiverivers/images/about_s.jpg">
        <img src="http://www.fiveriverstech.com/wp-content/themes/fiverivers/images/about_s.jpg">
        <img src="http://www.fiveriverstech.com/wp-content/themes/fiverivers/images/about_s.jpg">
        <img src="http://www.fiveriverstech.com/wp-content/themes/fiverivers/images/about_s.jpg">
        <img src="http://www.fiveriverstech.com/wp-content/themes/fiverivers/images/about_s.jpg">
        <img src="http://www.fiveriverstech.com/wp-content/themes/fiverivers/images/about_s.jpg">
</div>
</div> 
```

[**演示**](http://jsfiddle.net/57wdH/88/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T07:23:08.823

嗨 Rana 检查一下我在你的代码中使用了**white-space:nowrap;** 财产。这个空白属性将以水平方式继续我们的内联元素......

**nowrap**是proptery **white-space**的值，这个nowwrap 值抑制元素中的所有换行符。

```
<div style="width: 250px; border:1px solid red; ">
    <ul>
        <li>Some data</li>
        <li>some more data </li>
    </ul>
  <div style="border:1px solid black;width:150px;height:70px;overflow-y:hidden;overflow-x:scroll; white-space:nowrap;">

        <img src="http://www.fiveriverstech.com/wp-content/themes/fiverivers/images/about_s.jpg">
        <img src="http://www.fiveriverstech.com/wp-content/themes/fiverivers/images/about_s.jpg">
        <img src="http://www.fiveriverstech.com/wp-content/themes/fiverivers/images/about_s.jpg">
        <img src="http://www.fiveriverstech.com/wp-content/themes/fiverivers/images/about_s.jpg">
        <img src="http://www.fiveriverstech.com/wp-content/themes/fiverivers/images/about_s.jpg">
        <img src="http://www.fiveriverstech.com/wp-content/themes/fiverivers/images/about_s.jpg">
        <img src="http://www.fiveriverstech.com/wp-content/themes/fiverivers/images/about_s.jpg">
        <img src="http://www.fiveriverstech.com/wp-content/themes/fiverivers/images/about_s.jpg">

</div>
</div> 
```

查看演示：- [http://jsbin.com/ovazol/edit#html,live](http://jsbin.com/ovazol/edit#html,live)

# iphone - 如何为自定义时间间隔重复本地通知

> ID：11257170
> 
> 赞同：-1
> 
> 时间：2012-06-29T06:39:35.177
> 
> 标签：iphone, uilocalnotification

> **可能重复：**
> [如何将本地通知重复间隔设置为自定义时间间隔？](https://stackoverflow.com/questions/4363847/how-to-set-local-notification-repeat-interval-to-custom-time-interval)

我想为自定义时间间隔（如 2 小时、3 小时）重复本地通知。

我知道如何使用 repeatInterval 进行本地通知。但通过使用它，我可以重复小时、天、周的通知。

我想重复间隔随机时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T06:50:28.167

你不能做自定义间隔。但是您可以创建一个循环以`UILocalNotification`在给定时间的自定义间隔之后添加。

您总是需要先删除所有通知，然后再阅读它们，否则您的用户将收到每个通知 x 次。

这样做的问题是 a) 它对性能不友好，b) 如果您在接下来的 2 周内添加自定义间隔，用户将被迫打开您的应用程序以重新创建通知。

**更新：**

> 设备上的每个应用程序仅限于最快触发的 64 个预定本地通知。操作系统会丢弃超过此限制的通知。它将重复通知视为单个通知。

# c# - DragEnter 和 GiveFeedback 之间的区别

> ID：11257178
> 
> 赞同：2
> 
> 时间：2012-06-29T06:40:02.713
> 
> 标签：c#

我正在尝试一些拖放功能，但无法辨别事件之间`Give Feedback`的区别。`Drag Enter`

在 上`Drag Enter`，我们检查它进入的元素是否可以接受将要被删除的对象并向用户显示某种预览。

同样，`Give Feedback`如果拖动的元素将被放置，也会向用户显示放置目标的预览。

这两者有什么区别？

`Drag Over`和 和有什么不一样`Drag Enter`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T09:15:30.180

正如文档`DragEnter`所说，

> `DragEnter`当用户在拖放操作期间第一次将鼠标光标拖到控件上时，将引发该事件。
> 
> [DoDragDrop](http://msdn.microsoft.com/ru-ru/library/system.windows.forms.control.dodragdrop.aspx)方法确定当前光标位置下的控件。然后它检查控件是否是有效的放置目标。
> 
> 如果控件是有效的放置目标，`GiveFeedback`则引发事件并指定拖放效果。

因此，不同之处在于`DragEnter`针对每个控件引发，并且`GiveFeedback`仅针对有效的放置目标引发。

`DragEnter`和之间的区别在于`DragOver`前者仅在鼠标进入控件时才被抬起，而后者可以在鼠标移到同一控件上时多次抬起。

[Control.DragEnter 事件](http://msdn.microsoft.com/ru-ru/library/system.windows.forms.control.dragenter.aspx)

# android - 在android应用程序中获取运行时错误

> ID：11257182
> 
> 赞同：0
> 
> 时间：2012-06-29T06:40:22.217
> 
> 标签：android, nullpointerexception, runtime-error

我是编程和安卓新手。我正在制作一个 android 应用程序，用于从 sd 卡读取二进制文件并将其内容绘制在 14 个图表上。我的代码有 534 行，所以我不能在这里发布。所以，下面给出的是我尝试运行应用程序时显示的 logcat。它一开始就要求强制关闭。我收到空指针异常以及其他错误。请指出我哪里出错了。谢谢你的时间。

```
06-29 10:53:02.895: D/AndroidRuntime(12035): Shutting down VM
06-29 10:53:02.895: W/dalvikvm(12035): threadid=1: thread exiting with uncaught  exception (group=0x40015560)
06-29 10:53:02.915: E/AndroidRuntime(12035): FATAL EXCEPTION: main
06-29 10:53:02.915: E/AndroidRuntime(12035): java.lang.RuntimeException: Unable to   start activity ComponentInfo{debug.namespace/debug.namespace.DebugActivity}:     java.lang.NullPointerException
06-29 10:53:02.915: E/AndroidRuntime(12035):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
06-29 10:53:02.915: E/AndroidRuntime(12035):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
06-29 10:53:02.915: E/AndroidRuntime(12035):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
06-29 10:53:02.915: E/AndroidRuntime(12035):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
06-29 10:53:02.915: E/AndroidRuntime(12035):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-29 10:53:02.915: E/AndroidRuntime(12035):    at android.os.Looper.loop(Looper.java:123)
06-29 10:53:02.915: E/AndroidRuntime(12035):    at android.app.ActivityThread.main(ActivityThread.java:3683)
06-29 10:53:02.915: E/AndroidRuntime(12035):    at java.lang.reflect.Method.invokeNative(Native Method)
06-29 10:53:02.915: E/AndroidRuntime(12035):    at java.lang.reflect.Method.invoke(Method.java:507)
06-29 10:53:02.915: E/AndroidRuntime(12035):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-29 10:53:02.915: E/AndroidRuntime(12035):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-29 10:53:02.915: E/AndroidRuntime(12035):    at dalvik.system.NativeStart.main(Native Method)
06-29 10:53:02.915: E/AndroidRuntime(12035): Caused by: java.lang.NullPointerException
06-29 10:53:02.915: E/AndroidRuntime(12035):    at debug.namespace.DebugActivity.onCreate(DebugActivity.java:258)
06-29 10:53:02.915: E/AndroidRuntime(12035):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-29 10:53:02.915: E/AndroidRuntime(12035):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
06-29 10:53:02.915: E/AndroidRuntime(12035):    ... 11 more
06-29 10:53:05.995: I/Process(12035): Sending signal. PID: 12035 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:47:18.363

然后插入

```
Log.d("=====","===== seriesrenderer1="+seriesrenderer1); 
```

在你的第 258 行之前。我认为它会变成空的。

如果是库代码，你可能没有在意图中传递一些参数。无论如何，找出 seriesrenderer1 来自哪里。最有可能的是，它为 null，因为未提供某些参数。

# php - PHP 和 HTML 表单问题

> ID：11257184
> 
> 赞同：1
> 
> 时间：2012-06-29T06:40:25.083
> 
> 标签：php, html

我的代码

```
 $show=mysql_query("SELECT * FROM room_group_options");
    while ($array = mysql_fetch_array($show))
    {
        $op_id = $array['op_id'];
        $group = $array['group'];
        echo "<form action = 'options.php' method = 'post'>";
        echo "$op_id <input type='hidden' name='op_id' value='$op_id'>";
        echo "<input type = 'text' name = 'group' value = '$group'>";

        echo "<input type='button' name='edit' value='edit'>";
        echo "<input type='button' name='del' value='delete'>";
        echo "</form><br>";

    }
    echo "<form action = 'options.php' method = 'post'>
          <input type = 'text' name = 'group'><br>
          <input type = 'submit' name = 'addgroup'></form>"; 
```

我是 PHP 新手，我希望那些“编辑”和“删除”按钮将 POST 请求发送到 options.php 页面，但是当我点击按钮时，使用此代码没有任何反应。我该如何解决这个错误？

第二种形式的选项现在还可以

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T06:47:40.120

1.  `<form>`在while循环外打开和关闭标签
2.  使用`<input type='submit'>`. 请参阅[此链接](https://stackoverflow.com/questions/547821/two-submit-buttons-in-one-form)以查看如何在一个表单中使用两个提交按钮
3.  最后正如[上面](https://stackoverflow.com/users/871050/truth)提到的，使用 PDO / MySQLi

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T06:45:34.763

您必须向按钮添加一些操作，即`<input type='button' name='edit' value='edit' onClick='edit()'>`. 当您单击它时，`edit()`将调用一个 javascript 函数。它应该`AJAX`对您的 php 页面有一些请求，[`POST`](http://api.jquery.com/jQuery.post/)或者[`GET`](http://api.jquery.com/jQuery.get/). 你可以使用[`jQuery`](http://jquery.com/)它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T06:57:36.797

您需要向按钮的 onclick 添加一个 javascript 函数来触发表单提交，或者将按钮类型从“按钮”更改为“提交”，以便它发布页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T07:07:40.717

更改`type='button'`为`type='submit'`。

您应该通过在末尾添加空格和斜杠来关闭输入标签。像这样：

```
<input type='text' name='username' /> 
```

我不知道您是想要多个表单还是只有 1 个表单。如果您想要 1 个表单，则将`<form></form>`标签放在 while 循环之外。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-06-29T06:45:16.497

```
echo "<form action = 'options.php' method = 'post'>";
$show=mysql_query("SELECT * FROM room_group_options");
while ($array = mysql_fetch_array($show))
{
    $op_id = $array['op_id'];
    $group = $array['group'];

    echo "$op_id <input type='hidden' name='op_id' value='$op_id'>";
    echo "<input type = 'text' name = 'group' value = '$group'>";

    echo "<input type='button' name='edit' value='edit'>";
    echo "<input type='button' name='del' value='delete'>";
}
echo "</form><br>";

echo "<form action = 'options.php' method = 'post'>
<input type = 'text' name = 'group'><br>
<input type = 'submit' name = 'addgroup'></form>"; 
```

尝试这样的事情。

# python - 使用 python 发送电子邮件

> ID：11257185
> 
> 赞同：3
> 
> 时间：2012-06-29T06:40:27.320
> 
> 标签：python, email, send

我正在尝试创建一个发送电子邮件的简单 python 脚本。我使用了以下代码：

```
import subprocess

params = {'from':    'from@example.com',
          'to':      'to@example.com',
          'subject': 'Message subject'}

message = '''From: %(from)s
To: %(to)s
Subject: %(subject)s

Message body

''' % params

sendmail = subprocess.Popen(['/usr/share/sendmail', params['to']])
sendmail.communicate(message) 
```

但是当我尝试运行它时，我收到以下错误消息：

```
Traceback (most recent call last):
  File "/home/me/test.py", line 15, in <module>
    sendmail = subprocess.Popen(['/usr/share/sendmail', params['to']])
  File "/usr/lib/python2.7/subprocess.py", line 679, in __init__
    errread, errwrite)
  File "/usr/lib/python2.7/subprocess.py", line 1249, in _execute_child
    raise child_exception
OSError: [Errno 13] Permission denied 
```

任何人都知道这个问题的解决方案，或者更好的代码？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T06:53:02.817

/usr/share/sendmail 非常不寻常 - 你确定你的 sendmail 二进制文件确实存在吗？通常它在`/usr/sbin/sendmail`.

如果我是你，我宁愿使用标准库[smptlib](http://docs.python.org/library/smtplib.html)而不是直接调用 sendmail。

您可以像这样使用它来发送消息：

```
 server = smtplib.SMTP('smtp.example.com')
 server.sendmail(fromaddr, toaddrs, msg)
 server.quit() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T06:54:59.217

如果您的邮件是直接配置的，您可以使用专用的邮件库，而不是调用特定的进程：

```
import smtplib
from email.mime.text import MIMEText

fp = open(textfile, 'rb')
# Create a text/plain message
msg = MIMEText(fp.read())
fp.close()

# Format headers
msg['Subject'] = 'My subject'
msg['From'] = 'from@from.fr'
msg['To'] = 'to@to.com'

# Send the message via Michelin SMTP server, but don't include the envelope header.
s = smtplib.SMTP('your mail server')
s.sendmail('from@from.fr', ['to@to.com'], msg.as_string())
s.quit() 
```

您在文档中有更多[python 电子邮件示例。](http://docs.python.org/library/email-examples.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T06:58:01.523

这是一些使用 smtplib 发送电子邮件的代码，并且可以执行 TLS/SSL

```
import smtplib
from email.MIMEText import MIMEText
from email.utils import parseaddr

class Mailer(object):
    def __init__(self, fromAddress, toAddress, password):
        self.fromAddress = parseaddr(fromAddress)[1]
        self.toAddress = parseaddr(toAddress)[1]
        self.password = password

    def send(self, subject, body):
        msg = MIMEText(body)
        msg["From"] = self.fromAddress
        msg["Reply-to"] = self.toAddress
        msg["To"] = self.toAddress
        msg["Subject"] = subject

        sender = msg["From"]
        recipient = msg["To"]

        messageText = "".join(str(msg))
        mxhost = self.lookup(sender) # lookup finds the host that you want to send to

        server = smtplib.SMTP(mxhost, 587) #port 465 or 587
        server.ehlo()
        server.starttls()
        server.ehlo()
        server.login(sender, self.password)
        server.sendmail(sender, recipient, messageText)
        server.close() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-16T12:29:15.033

这是我发送电子邮件的代码。

```
#coding: utf-8

import smtplib
from email.mime.text import MIMEText
from email.utils import formatdate

def send_mail(to_list,sub,content):
    mail_host="smtp.example.com"
    mail_user="nvi"
    mail_pass="password"
    mail_postfix="example.com"
    me=mail_user + '555' +"<"+mail_user+"@"+mail_postfix+">"
    msg = MIMEText(content, _subtype='plain', _charset='utf-8')
    msg['Subject'] = sub
    msg['From'] = me
    msg['To'] = to_list
    msg['Date'] = formatdate(localtime=True)
    msg['Bcc'] = '123@example.com'
    try:
        s = smtplib.SMTP()
        s.connect(mail_host)
        s.login(mail_user,mail_pass)
        s.sendmail(me, to_list, msg.as_string())
        s.close()
        return True
    except Exception, e:
        print e
        return False

if __name__ == "__main__":
    send_mail('my_email_address', 'subject', 'content') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-08T15:01:02.200

我的程序适用于 gMail，您可以尝试使用它来处理其他任何事情。您还可以发送短信。我在下面附上我的代码。

```
import smtplib
from email.mime.multipart import MIMEMultipart
from email.mime.text import MIMEText
from email.mime.base import MIMEBase
from email import encoders
Type = input("Enter 1 for eMail, 2 for SMS: ")
toaddr = 0
if Type=='1':
   toaddr = input("Enter to address: ")
else:
   Provider = input("1 for Sprint, 2 for AT&T, and 3 for Verizon: ")
   Mobile = input("Enter the mobile number: ")
   if Provider=='1': 
      toaddr = str(Mobile) + "@messaging.sprintpcs.com"
   if Provider=='2':
      toaddr = str(Mobile) + '@txt.att.net'
   if Provider=='3':
      toaddr = str(Mobile) + ''
   print (toaddr)      
head = input("Enter your subject: ")
body = input("Enter your message: ")
fromaddr = input("Enter the 'From Address'(example@gmail.com): ")
msg = MIMEMultipart()
msg['From'] = fromaddr
msg['To'] = toaddr
msg['Subject'] = head
password = input("Enter the from address password: ")
msg.attach(MIMEText(body, 'plain'))
server = smtplib.SMTP('smtp.gmail.com', 587)
server.starttls()
server.login(fromaddr, password)
text = msg.as_string()
server.sendmail(fromaddr, toaddr, text)
server.quit() 
```

我希望这有帮助。

# linux-kernel - Linux系统调用

> ID：11257186
> 
> 赞同：4
> 
> 时间：2012-06-29T06:40:27.503
> 
> 标签：linux-kernel, arm, embedded-linux

我能够执行系统调用调用并在内核中进行处理。但我还不清楚几件事。进入 swi 例程后，内核将用户模式寄存器保存在堆栈中。问题是-

1.  是谁的栈？（因为 swi 处理和相应的系统调用例程需要堆栈帧才能工作）

2.  如果是 Kernel 自己的堆栈，将从哪里获得分配的堆栈..？它会开始使用当前的堆栈吗？如果是，那么 current 可以是当时内核中可能正在执行的任何进程。这不会耗尽当前的堆栈吗？

3.  如果它在 swi 处理程序中使用当前正在执行的用户进程的堆栈，那么这将是内核现在正在访问的用户地址空间。这可能吗？由于内核可寻址内存在 1GB 以内（如果在 4GB RAM 内存系统中使用 1:3 的内核与用户地址空间比率）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T11:26:05.670

大多数 ARM 模式都有一个单独的堆栈。堆栈通常在重置处理程序后不久设置。从arch/arm/kernel/setup.c：

```
/*
 * setup stacks for re-entrant exception handlers
 */
__asm__ (
"msr    cpsr_c, %1\n\t"
"add    sp, %0, %2\n\t"
"msr    cpsr_c, %3\n\t"
"add    sp, %0, %4\n\t"
"msr    cpsr_c, %5\n\t"
"add    sp, %0, %6\n\t"
"msr    cpsr_c, %7"
    :
    : "r" (stk),
      "I" (PSR_F_BIT | PSR_I_BIT | IRQ_MODE),
      "I" (offsetof(struct stack, irq[0])),
      "I" (PSR_F_BIT | PSR_I_BIT | ABT_MODE),
      "I" (offsetof(struct stack, abt[0])),
      "I" (PSR_F_BIT | PSR_I_BIT | UND_MODE),
      "I" (offsetof(struct stack, und[0])),
      "I" (PSR_F_BIT | PSR_I_BIT | SVC_MODE)
    : "r14"); 
```

PS SVC 是 SWI 的当前名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:52:04.917

确实，堆栈特定于 ARM 模式。

> > 这是快速系统调用返回路径。我们在这里做的尽可能少，这包括将 r0 保存回 SVC 堆栈。

上述行在**entry-common.S**中引用。所以栈是SVC栈。（注：swi 被 svc 代替）。

# jquery - 如何组织用户的分享以轻松地向该特定帖子添加评论？

> ID：11257196
> 
> 赞同：0
> 
> 时间：2012-06-29T06:41:15.007
> 
> 标签：jquery, css

在一个项目中，我有一个用户流，每个人都可以分享和评论分享。我会在每个共享中即时添加评论。整体结构如下：
![在此处输入图像描述](../Images/67eb2fe28cfc9092e6aedb9bf5388860.png)

我最近听说使用数字作为 ID 根本不是一个好主意，因为 CSS 不支持它们。如果我将它更改为一个类，我会遇到一个新问题：我将无法识别点击了哪个帖子（如果 ID 不是数字，那么我将无法获得那个特定的共享 ID）。

我在 jQuery 中的代码如下所示：

```
$("div.comment").click(function(){ // Add comment link
            var jusid = $(this).attr('id');
            var content = "<textarea name='txtcomment' class='txtcomment' cols='67' rows='7'></textarea><button name='btncomment' class='btncomment'>Submit</button><div class='closecomment'>Close</div>";
            $("div#after"+jusid).html(content);
            $("div#after"+jusid).find('.txtcomment').focus();
        }); 
```

它实际上很纠结，我相信在不久的将来它会变得一团糟。做这个的最好方式是什么？如何没有 ID 编号，而且如何识别具有哪个 ID 编号的 div 已被单击？（我们需要为该特定共享添加该评论）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T06:47:39.767

您可以将帖子的 id 放在帖子内的一个隐藏字段中。这样，您将能够在单击帖子时检索帖子的 ID。

[编辑]

假设您有一个 html 结构，例如：

```
<div class='comment'>
  <input type='hidden' class='post_id' value='1'/>
</div>
<div class='comment'>
  <input type='hidden' class='post_id' value='2'/>
</div>
<div class='comment'>
  <input type='hidden' class='post_id' value='3'/>
</div> 
```

你可以让你的 jQuery 像这样：

```
$("div.comment").click(function(){
          var clicked_post_id = $(this).find('input.post_id').val();

          // Perform other operations with the above retrieved clicked_post_id

}); 
```

演示在[http://jsfiddle.net/7wCJK/2/](http://jsfiddle.net/7wCJK/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T09:10:18.043

如果我理解你是正确的，你不需要身份证来做到这一点。

示例 html：

```
<div>
    <h3>#1333</h3>
    <p>Lorem ipsum</p>
    <a class="comment" data-postid="1333">Add a comment</a>
</div>​ 
```

示例 Java 脚本：

```
$("a.comment").click(function() {
    var $this = $(this),
        isOpen = !$this.next().length,
        $textarea;

    if (!isOpen) {
        $this.next().focus();
        return;
    }

    $textarea = $("<textarea/>");

    $this.after(
        $textarea
            .after(
                $("<button/>")
                    .text("Submit")
                    .click(
                        {$textarea: $textarea, postId: $this.attr("data-postid")},
                        submitComment
                    )
            )
            .after(
                $("<button/>")
                    .text("Close")
                    .click(/* maybe do something here? */)
            )
    );

    $textarea.focus();
});

submitComment = function (event) {
    var message = event.data.$textarea.val(),
        postId = parseInt(event.data.postId, 10);

    alert("Do something with these:\nComment: " + message + "\nPost Id: " + postId);
}; 
```

​</p>

这将在单击的评论链接之后添加一个`textarea`和两个`buttons`（并关注`textarea`）。

品味风格:)

这是给你的[小提琴](http://jsfiddle.net/SAVRK/2/)。（更新）

# andengine - 当有重力（Box2D/AndEngine）时，如何让身体在屏幕上弹跳？

> ID：11257197
> 
> 赞同：0
> 
> 时间：2012-06-29T06:41:18.940
> 
> 标签：andengine, gravity, jbox2d

我已经做了很多搜索，并找到了多个关于反重力物体的建议，但似乎没有什么能正常工作。我有一个用地球引力创建的物理世界。用户点击屏幕并创建精灵/动态物体。然后这些由于重力而落到屏幕底部。我有另一个精灵/身体应该在屏幕上反弹，忽略重力并从已创建的精灵反弹。AndEngine 的 Box2D 似乎没有 setGravityScale() 所以我不能将重力设置为 0。创建附加到运动体的固定装置以确定哪一侧发生碰撞的问题是精灵是一个圆（不是很大交易），我不太明白它们是如何工作的。我看到我可能能够创建一个动态的身体，其恒力等于身体。getMass()*SensorManager.Earth 在 -y 方向并将弹性设置为 1，但没有办法获得完美的弹性碰撞。有人有什么完美的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T12:10:05.253

Box2D 中的碰撞从来都不是真正有弹性的，计算中的一些小错误往往会堆积起来，并且身体会失去能量。我想到了两种方法。

a）您可以将弹性设置为略高于 1

b) 你可以监测身体的动能，如果它低于某个阈值，稍微轻推一下

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T20:12:59.707

JohnEye 是正确的，只是没有我喜欢的那么丰富。在一个类似的问题中，我回答了这个问题：[如何在物体行进的方向上施加力（Box2D）？](https://stackoverflow.com/questions/11257462/how-do-i-apply-a-force-to-a-body-in-the-direction-it-is-traveling-box2d)

# jquery - jquery的切换

> ID：11257200
> 
> 赞同：0
> 
> 时间：2012-06-29T06:41:55.957
> 
> 标签：jquery, toggle, fade, slide

我正在制作一个 div 幻灯片功能。我想要一个 div 淡入淡出并在指定方向切换

比如我点击右btn，div会从左到右淡化，我点击左btn，div会从右到左淡化

这是我的半成品代码，div的位置不应该改变，只是让它像幻灯片一样消失 [http://jsfiddle.net/pL5g2/4/](http://jsfiddle.net/pL5g2/4/)

我的代码无法达到我的目的，因为我无法控制切换方向。有人有好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:15:14.807

我不知道我是否明白你的想法。我修改了如下代码

```
$.fn.slideFadeToggle = function(offset, speed, easing, callback) {
    return this.animate({
        opacity: 'toggle',
        width: 'toggle',
        left: offset
    }, speed, easing, callback);
};

// sample to use the above function.
$("#right").click(function() {
    $(".block").slideFadeToggle("+=50px", "slow");
});

$("#left").click(function() {
    $(".block").slideFadeToggle("-=50px", "slow");
});​ 
```

我创建了一个[演示](http://jsfiddle.net/guanxiaohua2k6/gDz74/)。请确认。

# android - 从drawable文件夹显示多个图像以查看android中的默认imageviewer

> ID：11257201
> 
> 赞同：1
> 
> 时间：2012-06-29T06:41:58.503
> 
> 标签：android

我想在 android 默认 imageviewer 中显示多个图像。我正在从 sdcard 到默认 android imageviewer 查看一个图像。如果不可能，我想从 drawable 文件夹中显示多个图像，或者如何从 sdcard 文件夹中查看图像，例如images 文件夹包含多个图像，以在 android 的默认 imageview 中查看所有图像。

这是从 sdcard 到 android 默认图像查看器的查看图像的代码：

```
 Intent intent = new Intent();
    intent.setAction(Intent.ACTION_VIEW);
    intent.setDataAndType(Uri.parse("file://" + "/sdcard/slide-4.jpg"), "image/*");
    startActivity(intent); 
```

我想显示的不仅仅是来自可绘制文件夹或任何 sdcard 文件夹或资产文件夹的图像，可以帮助我非常感激！

提前致谢！

# wpf - WPF中的字符串格式

> ID：11257206
> 
> 赞同：-1
> 
> 时间：2012-06-29T06:42:42.197
> 
> 标签：wpf, wpf-controls, string-formatting

我想从客户那里获取电话号码，但我希望它被视为`()__-__`类似格式，并且当客户输入数字时它不会消失，我希望得到的结果为`(555) 555-55`.

我该怎么做呢？我应该使用特定的控件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:35:02.050

你想要的是一个 MaskedTextBox 控件。没有一个开箱即用的，但如果你四处搜索，就会有很多。例如，查看[WPF 扩展工具包](http://wpftoolkit.codeplex.com/wikipage?title=MaskedTextBox)。

来自上面链接的带区号的美国电话号码的示例用法：

```
<xctk:MaskedTextBox x:Name="_maskedTextBox"
      Mask="(000) 000-0000" ValueDataType="{x:Type s:String}" /> 
```

这里，零表示所需的数字。如果没有任何数据，控件将呈现如下：

```
(___) ___-____ 
```

掩码中除特殊标记之外的任何字符都将呈现为掩码的文字部分，如上例中的括号。这是掩码标记的列表。[Source](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.mask.aspx)，它适用于旧的 Windows 窗体 MaskedTextBox 而不是 WPF，但工具包版本遵循相同的约定，与大多数其他 WPF 版本一样。

> `0` 数字，必填。该元素将接受 0 到 9 之间的任何单个数字。
> 
> `9` 数字或空格，可选。
> 
> `#` 数字或空格，可选。如果此位置在掩码中为空白，则会在 Text 属性中呈现为空格。允许使用加号 (+) 和减号 (-)。
> 
> `L` 信，必填。将输入限制为 ASCII 字母 az 和 AZ。这个掩码元素等价`[a-zA-Z]`于正则表达式。
> 
> `?` 字母，可选。将输入限制为 ASCII 字母 az 和 AZ。这个掩码元素等价`[a-zA-Z]?`于正则表达式。
> 
> `&` 字符，必填。如果 AsciiOnly 属性设置为 true，则此元素的行为类似于该`L`元素。
> 
> `C` 字符，可选。任何非控制字符。如果 AsciiOnly 属性设置为 true，则此元素的行为类似于该`?`元素。
> 
> `A` 字母数字，可选。如果将 AsciiOnly 属性设置为 true，那么它将接受的唯一字符是 ASCII 字母 az 和 AZ。
> 
> `a` 字母数字，可选。如果将 AsciiOnly 属性设置为 true，那么它将接受的唯一字符是 ASCII 字母 az 和 AZ。
> 
> `.` 小数占位符。实际使用的显示字符将是适合格式提供程序的十进制符号，由控件的 FormatProvider 属性确定。
> 
> `,` 千位占位符。实际使用的显示字符将是适合格式提供程序的千位占位符，由控件的 FormatProvider 属性确定。
> 
> `:` 时间分隔符。实际使用的显示字符将是适合格式提供程序的时间符号，由控件的 FormatProvider 属性确定。
> 
> `/` 日期分隔符。实际使用的显示字符将是适合格式提供程序的日期符号，由控件的 FormatProvider 属性确定。
> 
> `$` 货币符号。实际显示的字符将是适合格式提供程序的货币符号，由控件的 FormatProvider 属性确定。
> 
> `<` 降档。将后面的所有字符转换为小写
> 
> `>` 上移。将后面的所有字符转换为大写。
> 
> `|` 禁用之前的升档或降档。
> 
> `\` 逃脱。转义掩码字符，将其转换为文字。“\”是反斜杠的转义序列。

# android - android中的按钮点击动作？

> ID：11257210
> 
> 赞同：5
> 
> 时间：2012-06-29T06:43:13.660
> 
> 标签：android

我在android中有两个按钮。Btn1 和 Btn2。默认情况下我需要显示 Btn1，单击时我需要显示 Btn2 来代替 Btn1。再次单击 Btn2 时，应将其替换为 Btn2。请帮我举个例子..

我的代码：

```
btn1 = (ImageView) findViewById(R.id.firstbtn);

        btn2 = (ImageView) findViewById(R.id.secondbutton);
        btn2.setVisibility(ImageView.GONE);

        btn1.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

                btn2.setVisibility(ImageView.VISIBLE);
            }
        });

        btn2.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

                btn2.setVisibility(ImageView.GONE);

            }

        }); 
```

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T06:47:03.193

您可以使用相同的按钮并交替更改其标签，并且根据级别您可以进行检查并执行适当的工作。

根据您更新的代码了解您正在使用 ImageView 所以试试这个

```
 ImageView btn = (ImageView) findViewById(R.id.secondbutton);
    btn.setTag("1");//can use one empty String "" and null instead of "1" and "2" for optimization

        btn.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

                Object obj = v.getTag();

                if(obj instanceof String){
                     if("1".equals(obj)){
                         v.setTag("2");
                         //Your first button state 
                     }else if("2".equals(obj)){
                         v.setTag("1");
                         //Your second button state 
                     }

                } 
```

...

如果您的情况特定于两个按钮，那么您可以使用两个字符串比较操作

```
ImageView btn = (ImageView) findViewById(R.id.secondbutton);
  btn.setTag(null);

    btn.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {

            if(v.getTag() instanceof String){
                     v.setTag(null);
                     //Your first button state 
            } else {
                      v.setTag("");
                     //Your second button state 
            } 
```

如果你想让你的代码正常工作

```
btn1 = (ImageView) findViewById(R.id.firstbtn);

        btn2 = (ImageView) findViewById(R.id.secondbutton);
        btn2.setVisibility(ImageView.GONE);

        btn1.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

                v.setVisibility(ImageView.GONE);
                btn2.setVisibility(ImageView.VISIBLE);

            }
        });

        btn2.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

                v.setVisibility(ImageView.GONE);
                btn1.setVisibility(ImageView.VISIBLE);

            }

        }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T07:02:35.047

改变这个

```
btn2.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {

            btn2.setVisibility(ImageView.GONE);
        }

    }); 
```

经过

```
btn2.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {

            btn2.setVisibility(View.GONE);
            btn1.setVisibility(View.VISIBLE);
        }

    }); 
```

和这个

```
 btn1.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {

            btn2.setVisibility(View.VISIBLE);
        }
    }); 
```

经过

```
 btn1.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            btn1.setVisibility(View.GONE);
            btn2.setVisibility(View.VISIBLE);
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T06:50:30.553

您可以在布局中创建两个具有相同位置的按钮，然后您可以设置所需的每个按钮的可见性和操作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T06:50:44.530

可以使用方法 visible() 来修复其可见性。ToggleButton 或一个按钮并在单击事件上切换文本应该比两个按钮更好。

# mysql - 联合所有 where 日期子句

> ID：11257211
> 
> 赞同：1
> 
> 时间：2012-06-29T06:43:17.940
> 
> 标签：mysql, sql, sql-order-by, union-all, having-clause

我的查询

```
SELECT RoomType, date FROM Superior WHERE (date >= '2012-06-26'AND date < '2012-06-30')AND (Avail > '0')
UNION
SELECT RoomType, date FROM Deluxe WHERE (date >= '2012-06-26'AND date < '2012-06-30')AND (Avail > '0')
UNION
SELECT RoomType, date FROM SuperDeluxe WHERE (date >= '2012-06-26'AND date < '2012-06-30')AND (Avail > '0')
ORDER BY date
HAVING COUNT(date, INTERVAL 3 DAY) 
```

在'附近出现语法错误`HAVING COUNT(date, INTERVAL 3 DAY)`

我的目标是获得日期和可用性大于 3 天的房间类型的结果

** 在 2012 年 6 月 29 日的高级和豪华表中，Avail=0，对于 SuperDeluxe，所有日期均为 Avail

在这种情况下，我的结果应该只显示 SuperDeluxe 作为可用性，但

```
**RoomType**    **date**
Superior        2012-06-26
Superior        2012-06-27
Superior        2012-06-28
Deluxe          2012-06-26
Deluxe          2012-06-27
Deluxe          2012-06-28
SuperDeluxe     2012-06-26
SuperDeluxe     2012-06-27
SuperDeluxe     2012-06-28
SuperDeluxe     2012-06-29 
```

是的，它是 MySQL，我只是想向自己证明，我可以帮助我的叔叔完成这件事。如你所知，我不是一个季节性的，只是一个初学者。你猜对了，所有 3 个表都是模棱两可的。我有另一个字段可用，它跟踪可用房间的数量。预订完成后，它会自动计算可用房间。

我当前的查询正在使用房间类型的选项选择，它只能为每个查询生成房间类型的可用性。有了以上内容，我计划进行 1 次查询并生成日期范围内可用的任何房间类型。使用上述联合查询时遇到的问题，我得到的结果还包括可用性为 = 0 的范围内的日期之一

我正在尝试这样的事情

```
SELECT RoomType, COUNT( date )
FROM Superior
WHERE date >= '2012-06-26'
  AND date < '2012-06-30'
  AND Avail > '0'
UNION
SELECT RoomType, COUNT( date )
FROM Deluxe
WHERE date >= '2012-06-26'
  AND date < '2012-06-30'
  AND Avail > '0'
UNION
SELECT RoomType, COUNT( date )
FROM SuperDeluxe
WHERE date >= '2012-06-26'
  AND date < '2012-06-30'
  AND Avail > '0'
GROUP BY date
HAVING COUNT( 4 ) 
```

看来我越来越近了。我尝试了 MAX( date ) 它给出了有 4 行的日期，但它仍然显示 1 行 Avail > 0 的房间类型

我也试过 HAVING COUNT(DISTINCT date) =4 结果仍然显示字段日期，行数不等于 4

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T06:59:42.173

`HAVING`仅适用于`GROUP BY`（过滤组），但您没有组在玩。

您需要`WHERE`在每个选择中使用一个简单的子句，并且您可以订购一个包装选择：

```
select * from (
    SELECT RoomType, date 
    FROM Superior
    WHERE date >= '2012-06-26' 
    AND date < '2012-06-30'
    AND Avail > 3 -- specify avail range here
  UNION
    SELECT RoomType, date
    FROM Deluxe
    WHERE date >= '2012-06-26' 
    AND date < '2012-06-30'
    AND Avail > 3 -- specify avail range here
  UNION
    SELECT RoomType, date
    FROM SuperDeluxe
    WHERE date >= '2012-06-26' 
    AND date < '2012-06-30'
    AND Avail > 3 -- specify avail range here
) results
ORDER BY date 
```

我会认真考虑将数据合并到一个表中并添加一列来区分三种预订类型，而不是拥有更多表。它不仅会使您的查询更加合理，而且当您获得新的预订类型时，您不必创建另一个表。

# c# - 使用 newtonsoft 解析 JSON

> ID：11257212
> 
> 赞同：1
> 
> 时间：2012-06-29T06:43:21.713
> 
> 标签：c#, json, windows-phone-7, json.net

我正在从这个 google api 服务获得 json 响应，以从纬度和经度获取反向地理位置。

[http://maps.googleapis.com/maps/api/geocode/json?latlng=40.714224,-73.961452&sensor=true](http://maps.googleapis.com/maps/api/geocode/json?latlng=40.714224,-73.961452&sensor=true)

在响应 JSON 中有很多相同名称的 rack []。我如何用 newtonsoft 解析这个 JSON 来获取国家名称。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-29T08:13:08.960

```
WebClient wc = new WebClient();
var json = (JObject)JsonConvert.DeserializeObject(wc.DownloadString(url));

var country = json["results"]
                .SelectMany(x => x["address_components"])
                .FirstOrDefault(t => t["types"].First().ToString() == "country");

var name = country!=null ? country["long_name"].ToString() : ""; 
```

# android - 如何在 ImageView 上创建热点

> ID：11257215
> 
> 赞同：4
> 
> 时间：2012-06-29T06:43:30.723
> 
> 标签：android, android-ui

我想在单击时触发动画的图像视图上创建可单击/热点。我已经阅读了几篇文章，在 ImageView 上创建“热点”是实现此目的的方法，但我还没有找到任何工作示例来说明它是如何完成的。有人可以提供一个如何在 Imageview 上创建热点的小例子吗？

不确定这是否对设计有任何影响，但图像将位于 PagerAdapter 中，因此当用户滑动到下一页时图像名称会发生​​变化。

# c++ - 游戏引擎运行时解压

> ID：11257218
> 
> 赞同：7
> 
> 时间：2012-06-29T06:44:02.713
> 
> 标签：c++, compression

我一直在尝试找出游戏引擎如何处理资产压缩。显然，他们在构建游戏时会压缩所有资产。但是他们如何在运行时解压缩它们。我唯一能想到的就是解压缩到内存中，但这一定是非常占用内存的。如果他们在玩游戏时解压到硬盘上，文件夹会被填满吗？这听起来不是很有效。

在 c++ 中使用像 zlib（或任何其他）这样的库，这个运行时解压缩是如何完成的？

大卫

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-29T09:45:06.110

有点像这样，你有一个游戏有这么多的数据，它不适合合理的内存量，所以你不能一次将它们全部加载到内存中，所以你为你的数据定义了一些缓冲区用作缓存。

现在内存按速度从低到高的顺序是这样的：

*   DVD
*   硬盘
*   内存

理想情况下，您不必从 DVD 流式传输数据，但如果您必须制作控制台游戏，则需要考虑这一点。因此，对于这些可用存储空间中的每一个，您都定义了一个用作缓存的缓冲区。

当游戏引擎决定它可能需要一个资源时，它应该首先在最快的缓存中查看资源是否已经加载。如果是，那么您很幸运，您可以立即将其发送以进行抽奖。如果它不在最快的缓存中，则必须降低到硬盘驱动器缓存的级别。这是一个文件，您可以在其中保存已解压缩并准备加载到内存中的资产。如果最快的缓存没有被完全占用，那么您可以开始加载数据并在准备好时使用它。如果没有足够的空间，那么您必须先卸载其他资产，我建议您删除最近最少使用的资产，直到您有足够的空间来加载新资产。

现在，如果硬盘驱动器缓存没有加载数据，那么您必须再向下一层存档，您将需要使用 zip 格式来压缩它，因为 zip 文件格式不会强制您解压缩整个存档只能访问一个文件，因此您所要做的就是在存档中找到所述文件的偏移量并将其解压缩到硬盘驱动器缓存中。同样，如果缓存已满，您必须先卸载一些其他资产，我再次建议删除最近最少使用的资产，但如果您认为它会提高性能，您也可以尝试其他算法。

John Karmack 在 QuakeCon 2011 上做了一个主题演讲，他解释了整个过程，可能比我在一篇文章中解释得更好（以及其他很棒的事情），你可以在[这里找到](https://www.youtube.com/watch?v=4zgYG-_ha28)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T09:29:17.763

压缩可以在许多不同的层上以多种方式发生，何时、何地以及如何使用它完全取决于它的目的和目标是什么（压缩并不总是与节省磁盘空间有关）。

基本上，在顶层，所有资产都将/可以压缩到批量存档中（这会加快读取速度，因为从 HDD 中读取的内容更少，但是您为此牺牲了处理能力，与使用 DMA读取未压缩的文件，根本不使用 CPU），回读几乎总是内存到内存，回读到 HDD 会破坏性能并导致许多问题（在某些情况下是不可能的，例如在老一代游戏机上）。

第二层可以/可以在资产本身上完成，例如，可以以多种不同方式压缩纹理，但目前主要使用块压缩（S3TC/DXTn，BCn），因为硬件（或由驱动程序模拟），因此当它读取存档/磁盘时，无需进行进一步的解压缩。

压缩策略也因平台而异，尤其是在对内存布局非常敏感、资源有限和缓存小等的控制台上。

> 在 c++ 中使用像 zlib（或任何其他）这样的库，这个运行时解压缩是如何完成的？

通常，您希望使用存档的内存映射文件并直接解压缩到 RAM，这是一个很好的 AAA 存档系统示例，它有据可查，它是[MPQ 格式](http://en.wikipedia.org/wiki/MPQ)（暴雪娱乐使用，更多细节[在这里](http://www.zezula.net/en/mpq/mpqformat.html)），它使用各种压缩算法，例如暗黑破坏神 I 的 deflate、魔兽争霸 III 的 zlib、魔兽世界中的 bzip2，他们最近为 SCII 等新游戏添加了 LZ 和稀疏压缩。

Jan Wassenberg 的论文 ( `Optimizing File Accesses via Ordering and Caching`) 对文件管理进行了很好的细分，这可能也很有趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T06:53:16.867

> 游戏引擎处理资产压缩

有不同的游戏引擎资产，例如几何模型（三角剖分/多边形模型）、纹理等。每个资产类别都有不同的压缩策略。你可以说得更详细点吗 ？

对于模型压缩，[检查这个](http://www.cs.unc.edu/~isenburg/dissertation.pdf)

# java - GXT 3 更改标签样式（添加 css）

> ID：11257220
> 
> 赞同：0
> 
> 时间：2012-06-29T06:44:15.800
> 
> 标签：java, css, gwt, tabs, gxt

GXT 3 有一个功能，它在 tabpanel 中添加一个标签

```
 tabPanel.add(html, new TabItemConfig(title, true)); 
```

我必须更改此选项卡名称的样式以及内容。这些没有效果：

```
 tabPanel.setStyleName("tab-title", true);
           html.setStyleName("tab-title", true); 
```

TabItemConfig 没有改变样式的方法。如何实现？...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:12:44.833

我看到你已经找到了解决方案，但我把它留在这里，因为它很简单，可能会节省一些人的时间：

```
class StylableTabPanel extends TabPanel {
    public void applyTabStyles(Widget widget, String styles) {
        findItem(getWidgetIndex(widget)).applyStyles(styles);
    }
} 
```

然后：

```
tabPanel = new StylableTabPanel();
HTML shortText = new HTML("Lorem ipsum...");
tabPanel.add(shortText, "Short Text");
HTML longText = new HTML("<b>lorem ipsum dolor sit amet...</b>");
tabPanel.add(longText, "Long Text");
tabPanel.applyTabStyles(longText, "margin-left: 300px;"); 
```

# java - 使用 Hudson 和 Maven 构建时间戳？

> ID：11257224
> 
> 赞同：0
> 
> 时间：2012-06-29T06:44:48.473
> 
> 标签：java, maven, build, hudson

使用 Maven 和 Hudson 构建的项目中的构建时间从哪里设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:47:37.160

使用这个插件：

```
<plugin>
   <groupId>com.keyboardsamurais.maven</groupId>
   <artifactId>maven-timestamp-plugin</artifactId>
   <version>1.0</version>
   <configuration>
    <propertyName>timestamp</propertyName>
    <timestampPattern>dd.MM.yyyy HH:mm</timestampPattern>
   </configuration>
   <executions>
    <execution>
     <goals>
      <goal>create</goal>
     </goals>
    </execution>
   </executions>
  </plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:21:18.707

实际上，我发现这是在 Hudson 工作的机器上设置的时间。

# iphone - 视频播放时如何截屏？

> ID：11257226
> 
> 赞同：1
> 
> 时间：2012-06-29T06:45:02.060
> 
> 标签：iphone

视频播放时如何截屏？我使用 MPMoviePlayerController 进行视频播放。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T06:54:06.950

```
- (UIImage *) captureScreen 
{
    UIWindow *keyWindow = [[UIApplication sharedApplication] keyWindow];
    CGRect rect = [keyWindow bounds];
    UIGraphicsBeginImageContext(rect.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    [keyWindow.layer renderInContext:context];   
    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return img;
} 
```

# jquery - Nivo 滑块放大图像问题

> ID：11257231
> 
> 赞同：0
> 
> 时间：2012-06-29T06:45:18.317
> 
> 标签：jquery, nivo-slider

使用 Nivo Slider 时，它会将我的图像放大到原始大小的 2 倍左右，这会导致图片看起来很糟糕。我想知道他们是否可以解决这个问题。我的图像尺寸是`367 x 246 px`.

这是发生的情况的屏幕： ![在此处输入图像描述](../Images/5d567070ef9c90a424c6c12ae84be978.png)

这是我的带有一些 ERB 的 HTML：

```
<div class="slider-wrapper up-nivo">
  <div id="slider" class="nivoSlider">
    <%= image_tag "logo.JPG", alt: "" %>
    <%= image_tag "line.JPG", alt: "" %>
    <%= image_tag "game.JPG", alt: "" %>
    <%= image_tag "leaders.JPG", alt: "" %>
    <%= image_tag "crowdFacingJim.JPG", alt: "" %>
    <%= image_tag "band.JPG", alt: "" %>
  </div>
</div> 
```

然后这是我的CSS：

```
.nivoSlider {
    position:relative;
    width:100%;
    height:auto;
    overflow: hidden;
}
.nivoSlider img {
    position:absolute;
    top:0px;
    left:0px;
}
.nivo-main-image {
    display: block !important;
    position: relative !important; 
    width: 100% !important;
}

/* If an image is wrapped in a link */
.nivoSlider a.nivo-imageLink {
    position:absolute;
    top:0px;
    left:0px;
    width:100%;
    height:100%;
    border:0;
    padding:0;
    margin:0;
    z-index:6;
    display:none;
}
/* The slices and boxes in the Slider */
.nivo-slice {
    display:block;
    position:absolute;
    z-index:5;
    height:100%;
    top:0;
}
.nivo-box {
    display:block;
    position:absolute;
    z-index:5;
    overflow:hidden;
}
.nivo-box img { display:block; }

/* Caption styles */
.nivo-caption {
    position:absolute;
    left:0px;
    bottom:0px;
    background:#000;
    color:#fff;
    width:100%;
    z-index:8;
    padding: 5px 10px;
    opacity: 0.8;
    overflow: hidden;
    display: none;
    -moz-opacity: 0.8;
    filter:alpha(opacity=8);
    -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
    -moz-box-sizing: border-box;    /* Firefox, other Gecko */
    box-sizing: border-box;         /* Opera/IE 8+ */
}
.nivo-caption p {
    padding:5px;
    margin:0;
}
.nivo-caption a {
    display:inline !important;
}
.nivo-html-caption {
    display:none;
}
/* Direction nav styles (e.g. Next & Prev) */
.nivo-directionNav a {
    position:absolute;
    top:45%;
    z-index:9;
    cursor:pointer;
}
.nivo-prevNav {
    left:0px;
}
.nivo-nextNav {
    right:0px;
}
/* Control nav styles (e.g. 1,2,3...) */
.nivo-controlNav {
    text-align:center;
    padding: 15px 0;
}
.nivo-controlNav a {
    cursor:pointer;
}
.nivo-controlNav a.active {
    font-weight:bold;
} 
```

这是我的主题的CSS：

```
.up-nivo .nivoSlider {
    position:relative;
    background:#fff url(loading.gif) no-repeat 50% 50%;
    margin-bottom:50px;
    -webkit-box-shadow: 0px 1px 5px 0px #4a4a4a;
    -moz-box-shadow: 0px 1px 5px 0px #4a4a4a;
    box-shadow: 0px 1px 5px 0px #4a4a4a;
}
.up-nivo .nivoSlider img {
    position:absolute;
    top:0px;
    left:0px;
    display:none;
}
.up-nivo .nivoSlider a {
    border:0;
    display:block;
}

.up-nivo .nivo-controlNav {
    text-align: right;
    padding: 20px 0;
    line-height: 0;
    font-size: 0;
    color: transparent;
    margin-right: 2.5%;
    margin-top: -5%;
}
.up-nivo .nivo-controlNav a {
    display:inline-block;
    width:16px;
    height:16px;
    background:url(bulletFull.png) no-repeat;
    text-indent:-9999px;
    border:0;
    margin: 0 2px;
}
.up-nivo .nivo-controlNav a.active {
    background:url(bulletEmpty.png) no-repeat;
}

.up-nivo .nivo-directionNav a {
    display:block;
    height:80px;
    width:75px;
    text-indent:-9999px;
    border:0;
}
.up-nivo a.nivo-nextNav {
    background:url(arrowRight.png) no-repeat;
    background-position: 50% 50%;
    right:15px;
}
.up-nivo a.nivo-prevNav {
    background:url(arrowLeft.png) no-repeat;
    background-position: 50% 50%;
    left:15px;
}

.up-nivo .nivo-caption {
    font-family: Helvetica, Arial, sans-serif;
}
.up-nivo .nivo-caption a {
    color:#fff;
    border-bottom:1px dotted #fff;
}
.up-nivo .nivo-caption a:hover {
    color:#fff;
}

.up-nivo .nivo-controlNav.nivo-thumbs-enabled {
    width: 100%;
}
.up-nivo .nivo-controlNav.nivo-thumbs-enabled a {
    width: auto;
    height: auto;
    background: none;
    margin-bottom: 5px;
}
.up-nivoault .nivo-controlNav.nivo-thumbs-enabled img {
    display: block;
    width: 120px;
    height: auto;
} 
```

这是启动nivo的js：

```
$(window).load(function() {
    return $("#slider").nivoSlider({
      pauseTime: 10000,
      directionNav: true
    });
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T06:55:45.583

没有看到你的一些代码很难说。只是猜测我会建议您在通过 css 保存图像的容器上设置宽度。如果这不起作用（并且应该使用此插件的较新版本）设置图像本身的宽度。

* * *

**编辑：**您在滑块包装器和向上 nivo 中有 .nivoSlider。由于 nivoSlider 设置为 100% 宽度，因此它正在填充其所有容器。将其中一个的宽度设置为您需要的任何值（如果有一些填充或边距，367px 可能更多）。

您还应该设置每个图像的宽度和高度......这将有助于更快地呈现页面。

# php - 反向 htmlspecialchars

> ID：11257232
> 
> 赞同：39
> 
> 时间：2012-06-29T06:45:18.793
> 
> 标签：php, htmlspecialchars

这似乎是一个简单的问题，但我在档案中找不到它。

如何扭转 htmlspecialchars 的影响？

我试过这样的事情：

```
$trans_tbl = get_html_translation_table (HTML_ENTITIES);
$trans_tbl = array_flip ($trans_tbl);
$html = strtr ($html, $trans_tbl); 
```

但它没有用。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-06-29T06:46:52.430

利用`htmlspecialchars_decode()`

```
<?php
$str = "<p>this -&gt; &quot;</p>\n";

echo htmlspecialchars_decode($str);

// note that here the quotes aren't converted
echo htmlspecialchars_decode($str, ENT_NOQUOTES);
?> 
```

参考 - [PHP 官方文档](http://php.net/manual/en/function.htmlspecialchars-decode.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T06:47:00.057

你需要`htmlspecialchars_decode()`. 请参阅[有关此的 PHP 文档](http://php.net/manual/en/function.htmlspecialchars-decode.php)。

```
$html = htmlspecialchars_decode( $html, ENT_NOQUOTES ); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-15T16:37:11.457

例子 ：

```
echo htmlspecialchars_decode(htmlspecialchars('your "strange" text with characters like !"/$%?&*')) 
```

它会回显：您的“奇怪”文本带有像 !"/$%?&* 这样的字符

这是编码/解码的示例。有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T06:48:28.813

[据](http://in3.php.net/manual/en/function.htmlspecialchars-decode.php)我了解，您需要`htmlspecialchars_decode`-Docu

# c# - C#，如何在当前线程中找到在其他线程中创建的东西？

> ID：11257238
> 
> 赞同：3
> 
> 时间：2012-06-29T06:45:38.970
> 
> 标签：c#, multithreading

我正在用 c# 编写聊天客户端/服务器应用程序，但线程有问题。我写了这个简单的代码来显示我的问题。

我使用 thread_1 来显示 Form 但它只显示一秒钟（也许 thread_1 终止并关闭了 Form ，但我 IsAlive 说它还活着！）。Thread_2 尝试访问在主线程上创建的 texBox，但它向我显示：

> “跨线程操作无效：控件'textBox2'从创建它的线程以外的线程访问。”

我不知道如何解决第一个问题，但我用 BackgroundWorker 解决了第二个问题，但我喜欢用线程来解决。有什么办法吗？

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    Thread t1;
    Thread t2;

    private void button1_Click(object sender, EventArgs e)
    {

        t1 = new Thread(doThread1);
        t1.Name = "thread_1";

        t2 = new Thread(doThread2);
        t2.Name = "thread_2";

        t1.Start();
        t2.Start();

        MessageBox.Show(t1.IsAlive.ToString());
    }

    private void doThread1()
    {
        Form frm2 = new Form();
        frm2.Show();
    }

    private void doThread2()
    {
        try
        {
            for (int j = 10000; j > 0; j--)
                textBox.Text = j.ToString();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T07:17:08.747

正如 Linkerro 所提到的，你想取出你调用线程 1 的线程，因为你的 UI 在你启动时已经在一个线程中（所有程序都有一个它们启动的主线程）。不过，您走在正确的轨道上，您希望将任何长时间运行的任务放在单独的线程上，这样它就不会阻塞 UI。唯一的技巧是您不能直接从后台线程操作 UI 对象，它们必须从拥有它们的线程中操作（这是您收到的错误消息）。

幸运的是，在 .NET 中有一种非常简单的方法可以实现这一点。在 WPF 中，您使用 UiComponent.Dispatcher.Invoke()，而 Winforms 只使用 UiComponent.Invoke()。这允许您的后台线程跨步到 UI 组件所在的线程以更新它。

Invoke 接受一个代表您希望在 UI 线程上运行的操作的委托。在我的示例中，我传入了一个使用 lambda 表达式初始化的操作，不带参数也不返回任何值。

尝试这个

```
private void doThread2()
{
    try
    {
        for (int j = 10000; j > 0; j--)
        {
            textBox.Invoke(new Action(() =>
                textBox.Text = j.ToString()));
        }
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
    }
} 
```

* * *

这是一个完整的示例，说明如何使用 Tasks 执行此操作。您会在计数时看到您可以自由移动窗口并且它不会锁定。但是取出任务并离开循环，您将看到窗口如何冻结，因为循环会阻塞 UI 线程。

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Task.Factory.StartNew(() =>
        {
            for (int x = 0; x < 100000000; x++)
            {
                label1.Invoke(new Action(() =>
                    label1.Text = x.ToString()));
            }
        });
    }
} 
```

# cakephp - 如何在 cakephp 中选择复选框并发送电子邮件

> ID：11257239
> 
> 赞同：0
> 
> 时间：2012-06-29T06:45:43.753
> 
> 标签：cakephp

我使用 cakephp 创建了一个页面，并且每个字段都有复选框（该页面包含患者列表和每个患者的复选框）。现在我想选择几个患者并向选定的患者发送电子邮件。我的问题是如何将选定的患者链接到电子邮件选项卡。

如果您能给出详细的答案，将会很有帮助。谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:16:22.177

您可以使用以下代码：

```
<?php echo $this->Form->input('User.patient_email_ids][', array('multiple' => 'checkbox', 'options' => $checkbox_list));?> 
```

并且您的 $checkbox_list 数组变量应包含如下值：

```
$checkbox_list = array(
                       [abc@def.com] => patient1,
                       [ghi@jkl.com] => patient2
                      ); 
```

您可以将 $this->request->data['User']['patient_email_ids'] 传递给 $to(list of all recipients) 变量中的 Mail 组件。

# php - smarty 语法错误不能使用符号 []

> ID：11257244
> 
> 赞同：1
> 
> 时间：2012-06-29T06:46:19.617
> 
> 标签：php, arrays, smarty

这一行：

```
{$data["bank_data"]["Arrangement"]["id"]} 
```

返回以下错误：

> PHP (5.3.9) 错误 (E_USER_ERROR)：
> 文件：Smarty.class.php
> 行：1092
> 类型：Smarty 错误：[在 tke-g-admin_scopeofwork.tpl 第 10 行]：语法错误：无法识别的标签：$data["bank_data "]["排列"]["id"]（Smarty_Compiler.class.php，第 446 行）

这一行：

```
{$data.bank_data.Arrangement.id} 
```

不返回错误。它工作正常。

那么，为什么第一部分是错误的？如何使用`[]`访问数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:47:16.447

从您发布的错误来看，您使用的是 Smarty2。[文档](http://www.smarty.net/docsv2/en/language.syntax.variables.tpl)为您提供了两种访问数组的选项：

```
{* for string indexes *}
{$some.array.value}
{* for numeric indexes *}
{$some[0][1]} 
```

您可以使用变量来提供这样的索引

```
{assign var="key" value="array"}
{$some.$key.value} == {$some.array.value} 
```

使用该“技巧”，您还可以访问包含“特殊字符”的字符串索引，例如`.`,`[]`或`.`

 `* * *

Smarty3 以这种方式更灵活一些：

```
{$some.{"hello world"}.array["array"]['foo']} 
```

奇怪的`{$foo[bar]}`是没有正确解析（在 Smarty 3.1.10 中）。不过，把它放在待办事项列表上。`

# iphone - 从 iOS/iphone 应用程序对 php 脚本进行身份验证

> ID：11257245
> 
> 赞同：0
> 
> 时间：2012-06-29T06:46:20.267
> 
> 标签：iphone, objective-c, ios, xcode

这是我需要进行身份验证的php：

```
<?php

        $username=$_POST["m_username"];
        $password=$_POST["m_password"];
/*      
        $username=$_GET["m_username"];
        $password=$_GET["m_password"];
*/

?> 
```

我正在使用以下代码从我的 iPhone 应用程序进行身份验证。但它不是身份验证。我不知道它不起作用的问题是什么。它说发送了空参数/值。

```
NSString *urlAsString =[NSString stringWithFormat:@"http://www.myurl.com/abc/authenticate.php"];

NSURL *url = [NSURL URLWithString:urlAsString];

NSMutableURLRequest *urlRequest = [NSMutableURLRequest requestWithURL:url]; 

[urlRequest setTimeoutInterval:30.0f];

[urlRequest setHTTPMethod:@"POST"];

[urlRequest addValue:@"test" forHTTPHeaderField:@"m_username" ];

[urlRequest addValue:@"123" forHTTPHeaderField:@"m_password" ];

[[NSURLConnection alloc] initWithRequest:urlRequest delegate:self];

NSOperationQueue *queue = [[NSOperationQueue alloc] init];

[NSURLConnection sendAsynchronousRequest:urlRequest queue:queue completionHandler:^(NSURLResponse *response,NSData *data, NSError *error) {

    if ([data length] >0 && error == nil){

        html = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

        NSLog(@"HTML = %@", html);

        receivedData = [NSMutableData data];

    }
    else if ([data length] == 0 && error == nil){

        NSLog(@"Nothing was downloaded."); 

    }

    else if (error != nil){

        NSLog(@"Error happened = %@", error);
    } 
}];

// Start loading data
NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:urlRequest delegate:self];
if (theConnection) 
{
    // Create the NSMutableData to hold the received data
    receivedData = [NSMutableData data];

} 
else {
    // Inform the user the connection failed.

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T12:26:50.697

```
[urlRequest addValue:@"test" forHTTPHeaderField:@"m_username" ];

[urlRequest addValue:@"123" forHTTPHeaderField:@"m_password" ]; 
```

这是你的问题。您将值作为 HTTP 标头字段发送，而不是作为发布数据发送。发布数据进入请求正文，而不是标头。因此 PHP 不会将其视为传入的帖子字段以在`$_POST`数组中查看。（不过，这些字段可能会出现在`$_SERVER`数组中……我从未尝试过。无论如何，这不是发送帖子数据的首选方法。）

改为这样做：

```
NSString *myRequestString = @"m_username=test&m_password=123";
NSData *myRequestData = [NSData dataWithBytes: [myRequestString UTF8String] 
                                        length: [myRequestString length]];

[urlRequest setHTTPBody: myRequestData]; 
```

显然，您可以将其组合`myRequestString`为格式化的字符串，如果需要，可以删除用户提供的值。

另请注意，由于您访问的是非 SSL URL，因此这些数据将以明文形式发送，如今所有孩子都将其称为“坏主意”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:34:31.627

在 iPhone 中，您在 HTTP 标头中传递参数，但在 PHP 脚本中，您正在从 POST 数据中检索参数。尝试同步您的数据传输。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T07:05:26.597

尝试像这样调用你的 php 页面 url

[您的网址]?m_username=abc&m_password=abc 然后更改

```
$_POST['m_username'] to $_REQUEST['m_username'] 
and 
$_POST['m_password'] to $_REQUEST['m_password'] 
```

看看你得到了什么......如果 json 数据没问题，那么问题出在你的可可代码中。

祝你好运。

# objective-c - 如何在数据库中插入数据并从数据库中获取数据

> ID：11257252
> 
> 赞同：0
> 
> 时间：2012-06-29T06:46:56.210
> 
> 标签：objective-c, ios, sqlite

我是 iPhone 开发的新手。我正在制作一个应用程序，使用 sqlite3 作为数据库。我用 sqlite3 manager 3.9.5 创建了我的表，并在 appdelegete.m 文件中编写了代码复制数据库，并成功复制了数据库。

我在数据库中插入数据并使用主键成功插入，但是当我从数据库访问数据时，它发送 null 并且如果我打开我的数据库并打开我的表，它们不会显示我在表中输入的数据。这是我插入数据并从数据库获取数据的代码。

```
- (IBAction)addrecord:(id)sender {

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *path = [documentsDirectory stringByAppendingPathComponent:@"ebirthdaydatabase.sqlite"];
        if (sqlite3_open([path UTF8String], &database) == SQLITE_OK) {

            const char *sqlStatement = "insert into Name(name) VALUES(?)";
            sqlite3_stmt *compiledStatement;                
            if (sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK){
                NSLog(@"name.text :%@",name.text);

                sqlite3_bind_text(compiledStatement, 1, [name.text UTF8String], -1, SQLITE_TRANSIENT);
//                ShowContactsViewController *contact = [[ShowContactsViewController alloc]init];
//                contact.username = name.text;
//                [contact addarray:contact];

            }

            if(sqlite3_step(compiledStatement) != SQLITE_DONE ) {
                NSLog( @"Error: %s", sqlite3_errmsg(database) );
            } else {
                NSLog( @"Insert into row id = %lld", sqlite3_last_insert_rowid(database));
            }
            sqlite3_finalize(compiledStatement);

        sqlite3_close(database);
        }

 sqlite3 *database;
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *path = [documentsDirectory stringByAppendingPathComponent:@"ebirthdaydatabase.sqlite"];

    NSLog(@"%@",path);
    if (sqlite3_open([path UTF8String], &database) == SQLITE_OK) {

        const char *sql = "select name from Name";
        sqlite3_stmt *selectstmt;
        if(sqlite3_prepare_v2(database, sql, -1, &selectstmt, NULL) == SQLITE_OK) {

            while(sqlite3_step(selectstmt) == SQLITE_ROW) {

                //                NSInteger primaryKey = sqlite3_column_int(selectstmt, 0);
                //                Coffee *coffeeObj = [[Coffee alloc] initWithPrimaryKey:primaryKey];
                ShowContactsViewController *contact=[[ShowContactsViewController alloc]init];

                char *localityChars =( char *)sqlite3_column_name(selectstmt, 0);

                if (localityChars ==NULL)
                    contact.username = nil;
                else
                    contact.username = [NSString stringWithUTF8String: localityChars];

                //contact.username = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 1)];
                NSLog(@"%@",username);

                [showcontact addObject:contact];
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T08:06:15.277

该`sqlite3_column_name()`函数将返回列的名称，而不是内容。你想要`sqlite3_column_text()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T07:49:46.570

如果您无法解决问题，请使用一些经理。例如[https://github.com/misato/SQLiteManager4iOS](https://github.com/misato/SQLiteManager4iOS)

# python-3.x - 为什么这个切片没有输出？

> ID：11257262
> 
> 赞同：0
> 
> 时间：2012-06-29T06:47:40.040
> 
> 标签：python-3.x, slice

这是我的输入格式：

```
C234567890123456789012345678901234567890123456789012345678901234567890
CBD05-001-03         1001131452.60S1274819.69E 370584.88535135.6  74.8     
CBD05-001-03         1002131451.92S1274819.24E 370571.28535156.4  74.8 
```

我想根据固定的列范围分割成不同的字符串。如果列范围在第 12 到 20 列中的空格之前开始，这很好用，但如果切片只包含空格，那么我根本没有输出。谁能解释为什么会这样？

例如，如果我使用此代码

```
print (line[22:5])
print (line[0:30]) 
```

只有 0:30 切片打印：

```
C23456789012345678901234567890

CBD05-001-03         100113145

CBD05-001-03         100213145 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:58:40.453

```
print(line[22:5]) 
```

打印从字符 22 到但不包括字符 5 的字符。由于字符 5 在字符 22 之前，它不会打印任何内容。

# android - 是否可以像在 VLC 播放器中一样从视频中截屏？

> ID：11257269
> 
> 赞同：2
> 
> 时间：2012-06-29T06:48:29.360
> 
> 标签：android, screenshot

我在 android 中开发了一个包含视频的应用程序。现在我想从正在运行的视频中截取屏幕截图。我尝试了`SurfaceView`和`Bitmap`课程：

```
Bitmap image = Bitmap.createBitmap(width, height,Bitmap.Config.ARGB_8888); 
```

但它不起作用。如何获取正在运行的视频的屏幕截图？

# apache - 如果 IP 触及特定文件，如何阻止它

> ID：11257280
> 
> 赞同：2
> 
> 时间：2012-06-29T06:49:13.463
> 
> 标签：apache, nginx, ip

我有一个 wordpress 网站，即使我使用的是 disqus，我也经常收到很多垃圾邮件。什么是记录所有访问的 IP`wp-comments-post.php`并永久阻止它们（或立即阻止不记录）的好方法？删除/重命名文件可能是一个解决方案，但我想阻止它们，这样它们就不会回来了。我在 nginx 前面使用 apache 作为反向代理。我正在考虑通过 nginx/iptables 执行此操作，这样就不必再访问 apache。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T07:01:30.067

您可以使用 .htaccess 文件执行此操作

```
order allow,deny
deny from 192.168.44.201
deny from 224.39.163.12
deny from 172.16.7.92
allow from all 
```

或阻止一个范围

```
order allow,deny
deny from 192.168.
deny from 10.0.0.
allow from all 
```

甚至是 ISP

```
order allow,deny
deny from some-evil-isp.com
deny from subdomain.another-evil-isp.com
allow from all 
```

将 htaccess 文件放在包含您的文件的目录中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T11:26:55.347

我使用 lua 模块来阻止这些类型的用户，但它有点复杂。

您可以通过将以下位置块放在处理您的 php 的位置块之上或之内来简单地禁止访问该文件：

```
location ~* wp-comments-post\.php {
    return 403;
}
location ~* .+\.php {
    # PHP handling config
} 
```

或者

```
location ~* .+\.php {
    location ~* wp-comments-post\.php {
        return 403;
    }
    # PHP handling config for others
} 
```

# python - 无法加载存在的 python 扩展模块

> ID：11257284
> 
> 赞同：1
> 
> 时间：2012-06-29T06:49:35.380
> 
> 标签：python, python-import, python-extensions

我正在尝试使用 thanos，它在运行时创建一个扩展模块。Thanos 不断失败，因为它无法导入它在运行时创建的扩展。

我很困惑为什么会这样。

在运行时（编译后）“cutils_ext”目录包含`cutils_ext.so`

`import cutils_ext`有效，但`import cutils_ext.cutils_ext`失败了

```
ImportError: No module named cutils_ext 
```

我已经直接用imp进行了测试。说 cutils 是导入的 cutils_ext 包。当我做：

```
imp.find_module('cutils_ext', cutils.__path__) 
```

我再次得到：

```
ImportError: No module named cutils_ext 
```

我完全感到困惑。有没有办法调试这个？由于无法启动 python 解释器（使用 picloud），我无法在详细模式下运行 python，但是如果我可以在运行时启用详细，那将有所帮助（还没有弄清楚如何做到这一点）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T10:12:34.503

你能试试：

```
import cutils_ext
import cutils_ext.cutils_ext 
```

我不知道为什么，但有时我还必须导入一个模块才能导入其中的子模块。

或者也许，只是也许，第二个 cutils_ext 在第一个 cutils_ext 中根本不存在？

编辑：等一下..您能否发布您的文件夹结构以及 PYTHONPATH 包含的内容？

我猜你有类似的东西：

```
upper_folder (a folder)
    cutils_ext (folder)
        __init__.py (file)
        cutils_ext.so (obviously file) 
```

如果您的 PYTHONPATH 指向**upper_folder**，那么您应该能够执行您发布的操作请注意，如果您遇到这种情况，__ init __.py**必须**在那里。

但是，如果您的 PYTHONPATH 直接指向 cutils_ext 文件夹，那么我认为您只能导入文件，因此 cutils_ext.cutils_ext 对解释器没有意义（除非您在 cutil_ext.so 中有一个名为 cutils_ext 的变量......）

# php - URL参数中的PHP转义特殊字符

> ID：11257285
> 
> 赞同：2
> 
> 时间：2012-06-29T06:49:36.800
> 
> 标签：php, escaping

我努力删除通过 URL 传递参数时的特殊字符，以防入侵者注入，例如我有以下 URL：

```
www.sitename.com/people?job=manager 
```

我`alert`在参数之后添加了一个脚本，如下所示：

```
www.sitename.com/people?job=manager"/><script>alert%2844749%29<%2fscript> 
```

当我运行 URL 时，`alert`会弹出，这可能会导致通过这种技术检索站点信息的漏洞。我将使用`$_REQUEST`获取传递参数来生成结果。这是我可以在下面应用的任何逃避 URL 注入技术的方法吗？

```
$job = $_REQUEST["job"]; 
```

感谢您的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-11-13T15:09:09.473

您需要在所有变量上使用`htmlentities()`or `htmlspecialchars()`with`ENT_QUOTES`参数。

例如`$job`：

```
$job = htmlentities($_REQUEST["job"], ENT_QUOTES); 
```

不需要转义 url 参数中的特殊字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T06:55:06.933

您可以使用`strip_tags()`

```
<?php
$text = '<p>Test paragraph.</p><!-- Comment --> <a href="#fragment">Other text</a>';
echo strip_tags($text);
echo "\n";

// Allow <p> and <a>
echo strip_tags($text, '<p><a>');
?> 
```

或使用常规 Exp--

```
$data = preg_replace('/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi', '', $data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T06:56:26.660

使用[htmlspecialchars](http://php.net/manual/en/function.htmlspecialchars.php)转义特殊的 html 字符或使用[strip_tags](http://php.net/manual/en/function.strip-tags.php)从字符串中删除所有标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T06:57:55.403

首先[不要使用 $_REQUEST](https://stackoverflow.com/questions/1924939/php-request-vs-get-and-post)并且为了防止 CSRF 攻击，您可以使用`html_entities()`或`strip_tags()`.

如果您希望允许某些标签，您可以使用[HTML purifier](http://htmlpurifier.org/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T06:59:21.880

像这样的***网址***

```
www.sitename.com/people?job=manager"/><script>alert%2844749%29<%2fscript> 
```

本身不会做任何有害的事情。

像这样的 URL，像这样的*任何*值，**直接输出到 HTML**中当然会导致**HTML 注入**。这就是为什么你需要对它进行**HTML 转义**：

```
<?php $url = 'www.sitename.com/people?job=manager"/><script>alert%2844749%29<%2fscript>'; ?>

<a href="<?php echo htmlspecialchars($url, ENT_QUOTES); ?>">Click here</a> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-14T17:13:24.000

使用 urlencode 函数。访问[https://www.php.net/manual/en/function.urlencode.php](https://www.php.net/manual/en/function.urlencode.php)了解更多信息。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-12T15:31:56.600

相反，您可以使用以下代码直接[过滤](https://www.php.net/manual/de/book.filter.php)您的输入：

```
$job = filter_input(INPUT_GET, 'job', FILTER_SANITIZE_FULL_SPECIAL_CHARS); 
```

# java - 将 JLabel 放在 JPanel 之上

> ID：11257290
> 
> 赞同：2
> 
> 时间：2012-06-29T06:49:52.923
> 
> 标签：java, swing, jlabel, graphics2d, paintcomponent

当我运行我的代码时，我`JLabel`正在寻找`JPanel`. 为什么会这样？我必须在面板顶部显示标签。

## 代码

```
public class ColoredRect extends JPanel{

      public double x, y, width, height;  
      public JLabel name;

      public ColoredRect(double x,double y,String label)
      {
          name = new JLabel(label);
          this.x = x;
          this.y = y;
          this.width = 100;
          this.height =40;

          setLocation((int)x,(int)y);
          setSize((int)width,(int)height);
          setBackground(Color.red);

          add(name);
       }

       public void paintComponent(Graphics g) {
            // Draw all the rects in the ArrayList.
        super.paintComponent(g);  // Fills with background color, white.
        name.setForeground(Color.BLACK);
        name.setVisible(true);
        name.setLocation((int)x+3, (int)y+3);
        name.setSize(20, 20);
        name.repaint();
       }

       public void setnewPosition(double x, double y)
      {
          this.x =x;
          this.y =y;
          this.setLocation((int)x,(int) y);
          repaint();
      }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T07:37:57.250

您从未使用[setOpaque()](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#setOpaque%28boolean%29)方法将其值设置为 being `OPAQUE`。这里看看这个例子，看看你是如何在上面绘制`JPanel`和添加`JLabel`的。

```
import java.awt.*;
import javax.swing.*;

public class PanelPaintingExample
{
    private ColouredRectangle cRect, cRect1, cRect2;    
    private Rectangle rect;

    public PanelPaintingExample()
    {       
        rect = new Rectangle(0, 0, 200, 30);
    }

    private void displayGUI()
    {   
        JFrame frame = new JFrame("Panel Painting Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new FlowLayout(FlowLayout.LEFT, 5, 5));

        cRect = new ColouredRectangle(Color.RED, "LABEL 1"
                                               , Color.WHITE
                                               , rect);
        cRect1 = new ColouredRectangle(Color.BLUE, "LABEL 2"
                                               , Color.WHITE
                                               , rect);
        cRect2 = new ColouredRectangle(Color.MAGENTA, "LABEL 3"
                                               , Color.WHITE
                                               , rect);                                     

        frame.add(cRect);
        frame.add(cRect1);
        frame.add(cRect2);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new PanelPaintingExample().displayGUI();
            }
        });
    }
}

class ColouredRectangle extends JPanel
{
    private Color backColour;
    private Color foreColour;
    private String text;
    private Rectangle rect;

    private JLabel label;

    public ColouredRectangle(Color b, String text
                                     , Color f, Rectangle rect)
    {
        this.backColour = b;
        this.foreColour = f;
        this.text = text;
        this.rect = rect;

        label = new JLabel(this.text, JLabel.CENTER);
        label.setOpaque(true);
        label.setBackground(backColour);
        label.setForeground(foreColour);

        add(label);
    }

    @Override
    public Dimension getPreferredSize()
    {
        return (new Dimension(200, 30));
    }

    @Override
    public void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        g.setColor(backColour);
        g.fillRect((int)rect.getX(), (int)rect.getY()
                              , (int)rect.getWidth()
                              , (int)rect.getHeight());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T07:21:47.313

根据您要添加到 JLabel 的文本，您将标签的大小设置`paintComponent(Graphics g)`为 20 px 宽和 20 px 高。20 px 宽度不是很宽。如果标签文本长于几个字符，请尝试增加标签宽度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T07:40:37.230

我检查了整个代码并执行

实际上，标签位于 JPanel 的顶部，但是当您为“ColoredRect（）”调用/创建对象时，它的位置超出了 jpanel 边界，将参数传递为最小值

```
//pass the values and check it
ColoredRect(77,17,"string"); 
```

因为标签的位置是 x+3 并且 y+3 表示 77+3+标签宽度 20=100；x+3 表示 17+3+ 标签高度 20=40，

如果您将超过 77,17 的标签位置传递到面板边界之外

**或更改**

```
this.width = 1000;
this.height =500; 
```

# javascript - 带有月差的 JavaScript 日期计算

> ID：11257292
> 
> 赞同：0
> 
> 时间：2012-06-29T06:50:06.910
> 
> 标签：javascript, date

我想通过向特定日期添加几个月来计算新日期。

例如：

我有一个日期“06/30/2012”（2012 年 6 月 30 日）和几个月“2”或“3”个月。

现在我想要一个获取两个值并返回指定日期后 2 个月的日期的函数。

请告诉我如何实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T06:55:15.003

您可以尝试输入此代码，其中包含日期加法/减法所需的一切

```
Date.prototype.add = function (sInterval, iNum){
      var dTemp = this;
      if (!sInterval || iNum == 0) return dTemp;
      switch (sInterval.toLowerCase()){
        case "ms":
          dTemp.setMilliseconds(dTemp.getMilliseconds() + iNum);
          break;
        case "s":
          dTemp.setSeconds(dTemp.getSeconds() + iNum);
          break;
        case "mi":
          dTemp.setMinutes(dTemp.getMinutes() + iNum);
          break;
        case "h":
          dTemp.setHours(dTemp.getHours() + iNum);
          break;
        case "d":
          dTemp.setDate(dTemp.getDate() + iNum);
          break;
        case "mo":
          dTemp.setMonth(dTemp.getMonth() + iNum);
          break;
        case "y":
          dTemp.setFullYear(dTemp.getFullYear() + iNum);
          break;
      }
      return dTemp;
    }

    //sample usage
    var d = new Date();
    var d2 = d.add("d", 3); //+3days
    var d3 = d.add("h", -3); //-3hours
    var d4 = d.add("mo", 2); //+2 Months 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T06:55:18.423

解析出碎片并重建：

```
function addMonths(d, offset)
{
    return new Date(d.getFullYear(), d.getMonth()+offset, d.getDate());
}

var d = new Date();
console.log(d.toDateString());
// Thu Jun 28 2012

var twoMonthsFromNow = addMonths(d, 2);
console.log(twoMonthsFromNow.toDateString());
// Sun Aug 28 112 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T06:59:39.100

如果你想进入下个月的日子溢出，那么

```
var d = new Date(2012, 6-1, 30);
d.setMonth(d.getMonth()+3); 
```

如果你想留在新的一个月内，调整你的日期，然后

```
var d = new Date(2012, 6-1, 30);
var add_months = 8
var d2 = new Date(Math.min(new Date(d.getYear(), d.getMonth()+add_months+1, 0),
              new Date(d.getYear(), d.getMonth()+add_months, d.getDate()))) 
```

# c# - 如何在 C# 中合并两个表

> ID：11257304
> 
> 赞同：0
> 
> 时间：2012-06-29T06:51:10.350
> 
> 标签：c#

我在数据表合并中遇到了一些问题。当我合并两个表时

```
 DataTable table1 = dataGridView3.DataSource as DataTable;
            DataTable table2 = dataGridView2.DataSource as DataTable;
            table2.Merge(table1);
            dataGridView1.DataSource = table2; 
```

这样的代码输出

```
 firstname             last name         fullname

        ABC                   CDE
        ABC                   CDE
                                                MMMM
                                                MMMM 
```

* * *

```
 ABC                   CDE               MMMM
        ABC                   CDE               MMMM 
```

但我想显示最后两行的数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:04:22.670

只需创建一个新数据表并将两个数据表都添加到新数据表中

# delegates - 委托方法没有收到调用，从Layer到Scene类

> ID：11257309
> 
> 赞同：0
> 
> 时间：2012-06-29T06:51:46.403
> 
> 标签：delegates, cocos2d-iphone

我有一个“*场景*”类，它添加了几个图层。我想在游戏结束时从其中**一层添加最后一层**（以显示不同的分数）（因此该层将使用委托调用 Scene 类，并且 Scene 类应添加这个新层：“ LevelCompleteLayer”）。

但是 Scene 类中的方法没有收到调用。你知道为什么吗？其他代表（层之间）工作正常，但这个（从层到场景）没有。

这是代码：

```
//in Level1Scene.h :
@interface Level1Scene : CCScene <CompleteLayerDelegate>{

//in Level1Scene.mh :
@implementation Level1Scene
@synthesize levelComplete;

-(void)showLevelCompleteLayer {
    CCLOG(@"delegateCompleteLayer showLevelCompleteLayer!!!");//does not show up
    [self addChild:levelComplete z:5000];//is not added
}

-(id)init {
    if ((self = [super init])) {
        ScoreLayer *scoreLayer = [ScoreLayer node];
        layer = [[Level1Layer alloc] initWithBackgroundImage:background.backgroundImage];
        levelComplete = [[LevelComplete alloc] init];

        layer.delegate = scoreLayer;//works fine
        layer.delegateCompleteLayer = self; //does not respond
        scoreLayer.delegate = layer;//works fine
        //...
    }
    return self;
}

//in Level1Layer.m :
[delegateCompleteLayer showLevelCompleteLayer];

//in GameProtocols.h :
@protocol CompleteLayerDelegate
-(void)showLevelCompleteLayer;
@end 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T07:07:17.167

作为一种发现它为什么不起作用的方法，我建议：

1.  在执行的方法（我们称之为方法 A）中添加断点（或跟踪） `[delegateCompleteLayer showLevelCompleteLayer];`？

2.  如果被调用，则检查`delegateCompleteLayer`值；

3.  如果不是，则在应该调用方法 A 的方法中设置断点；

4.  （重复，类似于 2/3）。

编辑：

如果我理解正确，当您执行时，您`[delegateCompleteLayer showLevelCompleteLayer];`不会跳转到该方法，而是跳转到随机（或多或少）内存地址。

在我看来，这是对内存管理问题的暗示。当您从调用时，您似乎`delegateCompleteLayer`已成为垃圾。`showLevelCompleteLayer``Level1Layer`

您可以检查您的代码并确保正确保留了 delegateCompleteLayer 并且未提前调用其 dealloc 方法（在其中放置断点或跟踪）。

您可以尝试的另一件事是启用僵尸检测。请阅读[本文](https://stackoverflow.com/questions/5386160/how-to-enable-nszombie-in-xcode)以了解如何操作。

编辑2：

关于您与代表的第二次尝试，我认为当您这样做时：

> ```
>  //in the init :
>      [delegate startGame]; 
> ```

您`delegate`可能尚未设置（在`init`方法中），因此请解释为什么调用无效。

更一般地说，我建议您将 NSLog 跟踪放在所有`dealloc`方法中：

```
NSLog(@"DEALLOCATING OBJECT %@", [self description]); 
```

这样您就可以检测到任何不可预见的释放；以及在每次调用不起作用的委托之前：

```
NSLog(@"CALLING INTO DELEGATE %@", [YOUR_DELEGATE_HERE description]); 
```

检查您是否调用了正确的对象。

希望能帮助到你。

# actionscript-3 - 如何将影片剪辑中的对象相对于屏幕中心按顺序居中

> ID：11257311
> 
> 赞同：0
> 
> 时间：2012-06-29T06:51:57.463
> 
> 标签：actionscript-3, flash, animation, actionscript

我的问题是我的影片剪辑内的随机位置有一些影片剪辑实例`parent`，我希望能够`parent`通过移动父影片剪辑以特定顺序将这些影片剪辑中的每一个带到舞台中心。

我面临的问题是，一旦我将`parent`电影剪辑移动到舞台上的第一个孩子的中心，我如何继续通过移动来让下一个孩子在舞台上居中`parent`？

我希望能够通过 actionscript 做到这一点。

希望我的问题很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T00:44:35.170

if i was you i would center the parent on the stage, and then iterate through the children withing the parent, and center each one within the parent. then you would have both the parent and the children centers on the stage. you don't need to keep track of positions at all with this approach.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T12:39:55.387

When placing your movieclips randomly, register in an array their positions, and move the parent calculating the differences between their coordinates

# android - 我希望仅使用 nfc 标签打开一个 android 应用程序

> ID：11257314
> 
> 赞同：0
> 
> 时间：2012-06-29T06:52:10.893
> 
> 标签：android, nfc

我正在创建一个使用 nfc 签入的 Andriod 应用程序，可以说标签中的 url 是“http://examples.com”我希望打开一个应用程序，只有当我点击该标签时。

所以基本上我只会在我的 mainfest 中编辑意图过滤器。这样每次我点击具有该 url`http://developer.andriod.com/index.html`的标签时，应用程序就会打开

```
 <intent-filter>
           <action android:name="android.nfc.action.NDEF_DISCOVERED" />
                <category android:name="android.intent.category.LAUNCHER" />    
                    <data android:scheme="http"
                    android:host="developer.android.com"
                    android:pathPrefix="/index.html" />                    
    </intent-filter> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:29:14.093

我不熟悉 NFC，但在我看来，您应该执行以下步骤。您应该从 AndroidManifest.xml 意图过滤器中的主要活动中删除：

```
<intent-filter>
     <action android:name="android.intent.action.MAIN" />
     <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

因此，您的应用程序将不会在启动器中看到。之后，您应该添加一个从 NFC 运行的意图（在这里我无法帮助您如何执行此操作）。

# android - 如何在 android:label 中添加上标文本？

> ID：11257315
> 
> 赞同：1
> 
> 时间：2012-06-29T06:52:12.393
> 
> 标签：android, android-manifest

有什么方法可以在应用程序标签下的 android:label 中添加上标文本？我需要显示名称，例如：我的^(android)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T06:53:43.287

参考这个链接

[Android中的下标和上标字符串](https://stackoverflow.com/questions/3543454/subscript-and-superscript-a-string-in-android)

```
((TextView)findViewById(R.id.text)).setText(Html.fromHtml("X<sup>2</sup>")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T06:55:14.807

尝试使用[Html.fromHtml](http://developer.android.com/reference/android/text/Html.html)作为：

```
TextView txt=(TextView)findViewById(R.id.texta);
txt.setText(Html.fromHtml("My<sup>android</sup>")); 
```

# jquery - iMacro Firefox 插件和 JQuery 自动完成

> ID：11257316
> 
> 赞同：3
> 
> 时间：2012-06-29T06:52:14.590
> 
> 标签：jquery, jquery-autocomplete, imacros

尝试使用 iMacro Firefox 插件为站点记录脚本，如下所示：

[http://jquery.bassistance.de/autocomplete/demo/](http://jquery.bassistance.de/autocomplete/demo/)

问题是当我在录制脚本后尝试播放脚本时，JQuery AutoComplete 字段在脚本执行期间不起作用。

有人可以帮我吗？

此致。

# ruby-on-rails - Rails 3.1：无法在生产中的 ckeditor 中上传

> ID：11257318
> 
> 赞同：0
> 
> 时间：2012-06-29T06:52:43.060
> 
> 标签：ruby-on-rails, ckeditor

我在我的 rais 项目中使用 gem "ckeditor", "3.7.1"。

当我尝试在生产模式下在编辑器中上传图像时，我得到：

Errno::ENOENT in Ckeditor::PicturesController#create 没有这样的文件或目录 - 识别 -ping /tmp/mini_magick20120608-15825-1ekfs6o.png Rails.root: /home/deployer/projects/myproject

请求参数：{"upload"=>#>,"CKEditor"=>"post_content","CKEditorFuncNum"=>"2", "langCode"=>"ru", "authenticity_token"=>"KbonuQWYYv5Ti+mly7hqOVMpxmgCv4dQEgPuUXguutE="}

在开发中一切正常:(我试过回形针，有同样的情况 - 在开发中一切正常，在生产中 - 不起作用（但没有错误消息）。

Rails 3.1、Ubuntu 操作系统、Passenger 和 nginx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T09:08:33.270

解决方案非常简单:)

```
sudo apt-get install imagemagick 
```

# .net - 如何增加 MS Access 2007 数据库大小？

> ID：11257326
> 
> 赞同：5
> 
> 时间：2012-06-29T06:53:37.863
> 
> 标签：.net, database, ms-access, ms-access-2007

我开发了一个windows应用程序，后端数据库是Access 2007。听说Access 2007的最大限制是2GB。

现在我的问题是，有没有办法将大小增加到超出该限制？如何为应用程序创建多个数据库以增加大小和性能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T23:35:41.663

您可以将数据划分为一个或多个附加数据库文件，然后从主应用程序数据库创建指向附属表的链接。

尽管该策略可以让您使用存储在 Access 中的超过 2 GB 的数据，但这并不是一个好的选择。一个陷阱是你不能在不同的 db 文件中的表之间强制执行引用完整性。仅这一事实就可能使分区成为许多应用程序的非首发。

另一个问题是临时工作空间。当 db 引擎需要一个磁盘文件作为工作空间时，它使用一个临时文件。并且该临时文件也被限制为最大 2 GB。因此，如果您有 6 GB 的数据分布在 4 个 1.5 GB 的 db 文件之间，并且您需要做一些需要处理超过 2 GB 数据的事情，您可能会收到一条错误消息，抱怨磁盘空间不足。这并不意味着磁盘已满；这意味着所需的临时工作空间大于 2 GB。

过去实际上做过一次分区，我不想再做一次。要求 Access 管理这么多数据是不合理的。我不得不花太多时间等待它去做我要求的几乎任何事情。将这项工作卸载到功能更强大的数据库系统会更好。因此，这不仅是总存储容量的问题，而且是存储数据库如何应对大型数据集的问题。您的 Access 应用程序可能成为客户端服务器数据库的客户端。

我还认为您应该严格检查您存储的内容。例如，有些人喜欢存储图像。我不。相反，我将路径存储到图像文件。其他文件类型也一样。也许您可能会发现您可以在不存储 BLOB 的情况下生活，您可以轻松地将数据库大小减小到 2 GB 限制以下，并继续使用 Access 作为存储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T08:22:55.433

最大数据库大小为 2GB 减去系统对象所需的空间，但您可以尝试一种解决方法：拆分数据库。有关更多信息，请参阅：

[Office.com - 拆分 Access 数据库](http://office.microsoft.com/en-us/access-help/split-an-access-database-HA010342026.aspx)

[MS KB304932 - 如何手动拆分 Access 数据库](http://support.microsoft.com/kb/304932)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-03T06:12:43.373

当我的数据库在表中导入我的外部数据时达到 2GB 时，我遇到了同样的问题。我只是在设置中禁用缓存

转到文件 > 选项 > 当前数据库

在缓存 Web 服务和 Sharepoint 表下

选中“使用与 Microsoft Access 2010 及更高版本兼容的缓存格式”

选中“关闭时清除缓存”

选中“从不缓存”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-19T08:55:36.067

I had the same problem on a db that had a lot of input over 17 years and was closing on the 2GB limit.It was already split so nothing could be done there. In the end I found by fiddling with the biggest table that the problem was embedded JPG images of which there was a very large number - It was popular for example to use an embedded image of employees or workers in tables in access. The solution which I am now implementing is going well. All the picures are in a file anyway so devise a new form that uses hyperlink to link to the pictures with a little code. delete the embedded images in the backend.I have already simulated this on a DB copy. It reduces size from 1.6 GB to less than 300 MB- so befor resorting to SQL you could look at that as a solution

# javascript - 客户端 javascript 的错误记录

> ID：11257330
> 
> 赞同：27
> 
> 时间：2012-06-29T06:53:54.133
> 
> 标签：javascript, jquery, error-handling, stack-trace

我的项目包含很多带有表单的页面。这是银行CRM系统的后台，所以工作过程中的任何错误都会被捕获和调查。在服务器端，我们增强了 java 异常系统，但如果客户端发生错误 - javascript，我们现在得到的唯一信息是 IE 中的 js 错误窗口，或者有时是高级用户制作的页面截图。

Javascript 代码包含 Jquery 驱动的 UI 扩展和硬编码的内联事件处理程序和函数。

所以我问是否可以使用任何方法来捕获任何类型的 js 错误？一些额外的库或可以给我一个堆栈跟踪的东西，比如 Mozilla 中的 firebug 或 Chrome 中的 web-console？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-29T07:06:45.980

调查`window.onerror`。如果你想捕获任何错误，并将它们报告给服务器，那么你可以尝试一个 AJAX 请求，也许。

```
window.onerror = function(errorMessage, errorUrl, errorLine) {
    jQuery.ajax({
        type: 'POST',
        url: 'jserror.jsf',
        data: {
            msg: errorMessage,
            url: errorUrl,
            line: errorLine
        },
        success: function() {
            if (console && console.log) {
                console.log('JS error report successful.');
            }
        },
        error: function() {
            if (console && console.error) {
                console.error('JS error report submission failed!');
            }
        }
    });

    // Prevent firing of default error handler.
    return true;
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-06-25T01:26:48.143

免责声明：我是[Sentry](https://www.getsentry.com)的 CEO 和创建者，这是一个开源和付费服务，可为多种语言（包括 Javascript）提供崩溃报告。

捕获前端异常可能非常具有挑战性。技术已经变得更好（浏览器 JS 引擎），但仍有很多限制。

1.  您将需要一个服务器端日志记录端点。这有一些复杂性，因为它可能被滥用（即 PEN 测试人员可能会尝试暴露其中的漏洞）。您还需要在这里处理 CORS。我显然会为此推荐 Sentry，因为我们是同类中最好的，如果您愿意，您可以自己托管服务器（作为其开源）。
2.  实际捕获代码中的错误的实现非常复杂。`window.onerror`由于各种原因，您不能依赖（主要是因为浏览器历来在这里提供错误信息）。我们在[raven.js](https://github.com/getsentry/raven-js)客户端（基于 TraceKit）中所做的是修补许多函数以将它们包装在 try/catch 语句中。例如，`window.setTimeout`。有了这个，我们就可以安装错误处理程序，在大多数浏览器中生成完整的堆栈跟踪。
3.  您需要确保为代码生成源映射，并且处理数据的服务器支持它们。Sentry 通过自动抓取它们（通过标准）或允许您通过[API](https://gist.github.com/dcramer/619d53dabfbc2ed008a1)上传它们来做到这一点。没有这个，假设你正在缩小代码，事情变得几乎无法使用。
4.  最后一个主要问题是噪音。大多数浏览器扩展将直接注入您的脚本，因此您需要过滤掉噪音。我们通过两种方式解决这个问题：要忽略的模式黑名单（即“脚本错误”是最无用的），以及要接受的域白名单（即“example.com”）。我们发现两者的结合在消除大多数随机噪声方面足够有效。

在服务器上您应该注意的一些事项：

*   客户端有时会持续打开（即机器人或不良用户）并导致大量无用数据或简单的旧错误。
*   您的服务器应该能够处理这些事件的级联并优雅地失败。Sentry 通过速率限制和采样数据来做到这一点。
*   异常被本地化为浏览器语言，如果没有集中式数据库，您将不得不自己翻译它们（尽管它们的含义通常很明显）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T07:12:24.193

如果您想轻松实现，只需在您的应用程序中放置[这些](http://errorception.com)人的 javascript 代码。否则，如果你想实现一个，那么试试[这个](http://helephant.com/2007/05/12/diy-javascript-stack-trace/)来获取堆栈跟踪`window` `error`，你可以用它`ajax`来报告错误。跟踪 olark 报告的错误的[好方法](https://www.olark.com/spw/2012/03/dont-break-the-internet-with-your-javascript/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-01T17:28:23.817

[http://exceptionhub.com](http://exceptionhub.com) 应该是诀窍。 [http://errorception.com/](http://errorception.com/) 没有提供太多的调试信息，但看起来也不错。

proxino 似乎不知道他们在做什么，他们在他们的记录器代码中包含一个完整的 jQuery 来记录我上次检查时的错误事件。我不会相信一个对客户端 JavaScript 掌握得这么少的服务来记录我的 JavaScript 错误。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-09-09T20:23:08.137

如果您的网站使用 Google Analytics，您可以执行我的操作：

```
window.onerror = function(message, source, lineno, colno, error) {
  if (error) message = error.stack;
  ga('send', 'event', 'window.onerror', message, navigator.userAgent);
} 
```

对上面代码的几点评论：

*   对于现代浏览器，会记录完整的堆栈跟踪。
*   对于不捕获堆栈跟踪的旧浏览器，将记录错误消息。（根据我的经验，大多数是早期的 iO​​S 版本）。
*   还会记录用户的浏览器版本，因此您可以查看哪些操作系统/浏览器版本引发了哪些错误。这简化了错误优先级和测试。
*   如果您将 Google Analytics 与“analytics.js”一起使用，则此代码有效，[如下所示](https://developers.google.com/analytics/devguides/collection/analyticsjs/)。如果您改用“gtag.js”，[就像这样](https://developers.google.com/analytics/devguides/collection/gtagjs/)，您需要调整函数的最后一行。[详情请看这里](https://developers.google.com/analytics/devguides/collection/gtagjs/events)。

代码到位后，您可以通过以下方式查看用户的 Javascript 错误：

1.  在 Google Analytics 中，单击该`Behavior`部分，然后单击`Top Events`报告。
2.  您将获得一个事件类别列表。`window.onerror`在列表中单击。
3.  您将看到 Javascript 堆栈跟踪和错误消息的列表。`Secondary dimension`通过单击按钮并`Event Label`在出现的文本框中输入内容，为用户的操作系统/浏览器版本添加一列。
4.  该报告将如下面的屏幕截图所示。
5.  要将操作系统/浏览器字符串转换为更易于阅读的描述，我将它们复制粘贴到[https://developers.whatismybrowser.com/useragents/parse/](https://developers.whatismybrowser.com/useragents/parse/)

[![在此处输入图像描述](../Images/ecdc1a45e432eb40e802b2d07e6e3ad9.png)](https://i.stack.imgur.com/JsKeA.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-11-25T16:31:56.477

我推荐使用[JsLog.me](http://jslog.me)服务

除了错误和堆栈跟踪之外，它还可以捕获整个控制台输出。我们在项目中使用它，记录整个控制台日志有助于我们的 QA 团队记录问题再现方式。此外，它适用于大型 JSON 对象，例如 Chrome 控制台，并且具有搜索功能。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-08T14:40:00.337

[Atatus](https://www.atatus.com/)捕获 JavaScript 错误并捕获错误之前的用户操作。这将有助于更好地理解错误。Atatus 帮助您监控前端，不仅是错误，还有它的性能（真实用户监控）

[https://www.atatus.com/](https://www.atatus.com/)

免责声明：我是 Atatus 的一名网络开发人员。

# knockout.js - 使用 knockout.js 和可拖动更新样式“LEFT”

> ID：11257332
> 
> 赞同：1
> 
> 时间：2012-06-29T06:54:00.173
> 
> 标签：knockout.js

我想在拖动时更新左侧属性，但拖动时我的属性仍然显示 50。我知道我做的不对，有什么帮助吗？

```
games: ko.observableArray([
 { left: ko.observable(50) },
 { left: ko.observable(50) },
 { left: ko.observable(50) }
];

<div class="bracket-game" data-bind="bracketGameInit: { left: left }">

ko.bindingHandlers.bracketGameInit = {
        init: function (element, valueAccessor) {

            var values = ko.utils.unwrapObservable(valueAccessor());
            $(element).draggable();
            ko.bindingHandlers.style.update(element, function () { return { left: (values.left() + 'px') }; });

        }
    }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T11:38:10.150

我认为您会想要响应可拖动`drag`事件（或者`stop`如果您只想在最后更新它）。

也许是这样的：

```
ko.bindingHandlers.bracketGameInit = {
    init: function (element, valueAccessor) {
        var left = valueAccessor();

        $(element).draggable({
            drag: function(event, ui) {
                left(ui.position.left);
            }                    
        });
    },
    update: function(element, valueAccessor) {
        var left = valueAccessor();
        $(element).css("left", left());
    }
}; 
```

这是一个示例：http: [//jsfiddle.net/rniemeyer/Na8K7/](http://jsfiddle.net/rniemeyer/Na8K7/)

# nhibernate - 使用 NHibernate 处理并发写入

> ID：11257336
> 
> 赞同：0
> 
> 时间：2012-06-29T06:54:10.933
> 
> 标签：nhibernate, concurrency

我正在开发一个使用 Fluent NHibernate 编写的应用程序。这是一个 .Net MVC 应用程序，现在我遇到了以下问题：当两个用户执行相同的操作（即同时预订相同的约会）时，应用程序似乎没有足够快地进行检查以便查看时间段是否已被预订。

我对 NHibernate 的经验非常有限，我只能告诉你，此时 NHibernate Session 的事务隔离级别设置为 ReadCommitted；会话生命周期我假设它设置为 PerWebRequest（我还没有找到执行此操作的代码部分）。

我知道这是很少的信息，但任何人都可以请至少指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:25:37.697

NHibernate 文档有一整章专门介绍[乐观并发控制](http://nhibernate.info/doc/nh/en/index.html#transactions-optimistic)

简而言之，通过添加版本字段，NHibernate 可以自动检测代码是否试图修改在读取后被另一个会话更改的记录。之后，您可以重试、显示错误消息等。

# iphone - 获取特定单元格标签中的文本

> ID：11257337
> 
> 赞同：0
> 
> 时间：2012-06-29T06:54:11.643
> 
> 标签：iphone

我是 iphone 新手。我有一点疑问，那就是，

首先显示我的输出屏幕如下 ![这是我在模拟器中的输出](../Images/98f9af4c1ba619d31d1abb6e61b2d9e9.png)

在这里，当我单击导航栏中的 DownloadAll 按钮时。我必须获取具有图像下载的单元格中的名称。

如果有人知道这怎么可能，请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:05:22.963

您可以使用在 cellForRowAtIndexPath 中使用的相同条件来检查要显示下载或选中标记的图像。您可以使用相同的条件来获取名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T07:09:28.697

如果您在单击下载按钮时需要所有名称..那么您只需从数组中访问这些数据...您在表格视图中填充数据...

# model-view-controller - 放置表单验证的最佳位置在哪里

> ID：11257338
> 
> 赞同：2
> 
> 时间：2012-06-29T06:54:21.983
> 
> 标签：model-view-controller, zend-framework

好的，所以我来自 Flex/ActionScript 的背景，因为这个领域正在慢慢消亡，我认为是时候转向全职 PHP 了。
无论如何，我认为我对 Zend 框架有很好的理解（我工作的大多数地方都使用过它）。但是，他们主要将它用于表抽象类，所以这确实不是一个好的 MVC 实践，更像是 Model。
进行面试时，我几乎总是被问到表单验证在哪里进行。
现在我知道 zend 已经内置了表单验证器，我不是在谈论这个。
我说的是在视图中构建并提交给服务器的标准 HTML 表单。

我想知道的问题是，在控件中还是在模型中做得更好。

还有为什么要使用zend_form，对我来说，设计师似乎很难让它变得性感。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:02:40.553

如果您将验证器附加到表单元素，则表单在控制器中进行验证，并且可以使用简单的 if() 循环进行检查：

```
if($form->isValid($postData)) {
    //do some stuff
} 
```

[否则，您可以使用Zend_Filter_Input](http://framework.zend.com/manual/en/zend.filter.input.html)在控制器中验证简单的 html 表单或其他输入：

```
//set filters and validators for Zend_Filter_Input
    $filters = array(
        'id' => array('HtmlEntities', 'StripTags')
    );

    $validators = array(
        'id' => array('NotEmpty', 'Int')
    );

    //assign Input
    $input = new Zend_Filter_Input($filters, $validators);
    $input->setData($this->getRequest()->getParams());
if ($input->isValid()) {
//do some stuff
} 
```

无论哪种方式，您都希望至少在控制器中进行基本验证和过滤，以尝试防止跨站点脚本和 sql 注入。
如果需要，您始终可以在域模型中进行更深入的验证和过滤。

至于为什么要使用 Zend_Form，它并没有最初出现的那么糟糕。使用自定义消息附加验证器和过滤器的能力对某些人非常有用。装饰器虽然一开始很困难，但可以通过实践很好地使用。你也作弊，只使用[viewScript() 装饰器](http://framework.zend.com/manual/en/zend.form.standardDecorators.html#zend.form.standardDecorators.viewScript)（就像我通常做的那样）。viewScript 装饰器以更熟悉的形式提供了很多控制。

这是一个例子：

```
//The Form
class Application_Form_Search extends Zend_Form
{
    public function init() {
        $this->setMethod('POST');
        $this->setDecorators(array(
            array('ViewScript', array(
                    'viewScript' => '_searchForm.phtml'//the partial script used as a decorator
            ))
        ));
        // create new element
        $query = $this->createElement('text', 'query');
        // element options
        $query->setLabel('Search Keywords');
        $query->setAttribs(array('placeholder' => 'Artist or Title',
            'size' => 27,
        ));
        // add the element to the form
        $this->addElement($query);

        $submit = $this->createElement('submit', 'search');
        $submit->setLabel('Search Site');
        $submit->setDecorators(array('ViewHelper'));
        $this->addElement($submit);
    }
} 
```

部分脚本：

```
<article class="search">
    <form action="<?php echo $this->element->getAction() ?>"
          method="<?php echo $this->element->getMethod() ?>">
        <table>
            <tr>
                <th><?php echo $this->element->query->renderLabel() ?></th>
            </tr>
            <tr>
                <td><?php echo $this->element->query->renderViewHelper() ?></td>
            </tr>
            <tr>
                <td><?php echo $this->element->search ?></td>
            </tr>
        </table> 
    </form>
</article> 
```

正如您所看到的，这对于代码来说会更加熟悉，并且对于设计师来说更容易设计样式。

希望这有帮助，祝你好运...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:03:38.927

验证是模型的一部分，因为它知道验证某些实体但在控制器内部使用的业务逻辑。

Zend_Form 带有像 ViewScript 这样的装饰器，它使设计者能够让它变得性感，并使开发人员的验证、过滤、填充表单输入的工作变得轻而易举。

# iphone - XCode 4.2 点击按钮切换到另一个视图

> ID：11257339
> 
> 赞同：0
> 
> 时间：2012-06-29T06:54:25.047
> 
> 标签：iphone, objective-c, ios, xcode

在 Xcode 4.2 中，我知道可以使用故事板 segue 按下按钮转到另一个视图。

但是说我想要情节提要，但不使用segue push，而是编写我自己的按钮来显示另一个视图，怎么做？我必须包括导航控制器吗？

编辑：添加源代码

AppDelegate.h

```
//
//  AppDelegate.h
//  Sandbox1
//
//  Created on 6/29/12.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import <UIKit/UIKit.h>
#import "ViewController.h"

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) ViewController *viewController;
@property (nonatomic, retain) UINavigationController *navController;

@end 
```

AppDelegate.m

```
//
//  AppDelegate.m
//  Sandbox1
//
//  Created on 6/29/12.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import "AppDelegate.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize viewController;
@synthesize navController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary     *)launchOptions
{
    // Override point for customization after application launch.

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_iPhone"     bundle:nil];
    navController = [[UINavigationController alloc] initWithRootViewController:self.viewController];
    [self.window addSubview:[navController view]];
    [self.window makeKeyAndVisible];

    return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application
{
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
}

- (void)applicationWillTerminate:(UIApplication *)application
{
}

@end 
```

视图控制器.h

```
//
//  ViewController.h
//  Sandbox1
//
//  Created on 6/29/12.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import <UIKit/UIKit.h>
#import "CreateViewController.h"

@interface ViewController : UIViewController {
    CreateViewController *createViewController;
}

- (IBAction)clickButton:(id)sender;

@end 
```

视图控制器.m

```
//
//  ViewController.m
//  Sandbox1
//
//  Created on 6/29/12.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import "ViewController.h"

@implementation ViewController

- (IBAction)clickButton:(id)sender{
    if(!createViewController){
        createViewController = [[CreateViewController alloc] initWithNibName:@"CreateViewController" bundle:nil];
    }
    UIBarButtonItem *backBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStylePlain target:nil action:nil];
    self.navigationItem.backBarButtonItem = backBarButtonItem;
    [self.navigationController pushViewController:createViewController animated:YES];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

创建视图控制器.h

```
//
//  CreateViewController.h
//  Sandbox1
//
//  Created bon 6/29/12.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import <UIKit/UIKit.h>

@interface CreateViewController : UIViewController

@end 
```

创建视图控制器.m

```
//
//  CreateViewController.m
//  Sandbox1
//
//

#import "CreateViewController.h"

@implementation CreateViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

/*
// Implement loadView to create a view hierarchy programmatically, without using a nib.
- (void)loadView
{
}
*/

/*
// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad
{
    [super viewDidLoad];
}
*/

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:08:23.763

I think the button is in `FirstViewController`. If it is then implement -`(IBAction)clickButton` and write code and connect it to your bottom in Interface Builder(If you use Interface Builder) . write createViewController object and `#import <CreateViewController.h>` in FirstViewController.h and you should use `UINavigationController`.

In `FirstViewController.h`,

```
#import "CreateViewController.h"

@interface FirstViewController : UIViewController{

    CreateViewController *createViewController;
}
-(IBAction)clickButton:(id)sender;
@end 
```

In `FirstViewController.m`, you just add below method

```
 -(IBAction)clickButton:(id)sender{

if (!createViewController) {
                createViewController = [[CreateViewController alloc] initWithNibName:@"CreateViewController" bundle:nil];

            }

            UIBarButtonItem *backBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStylePlain target:nil action:nil];
            self.navigationItem.backBarButtonItem = backBarButtonItem;
            [backBarButtonItem release];
            [self.navigationController pushViewController:createViewController animated:YES];
} 
```

and in `AppDelegate.h`,

```
#import "FirstViewController.h"
@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) FirstViewController *viewController;
@property (nonatomic, retain) UINavigationController *navControl;
@end 
```

In `AppDelegate.m,`

```
@synthesize window;
@synthesize viewController;
@synthesize navControl;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil] autorelease];
    navControl = [[UINavigationController alloc] initWithRootViewController:self.viewController];
[self.window addSubview:[navControl view]];
    [self.window makeKeyAndVisible];
    return YES;
} 
```

# vim - 如何在 Vim 中逐行而不是逐段滚动屏幕？

> ID：11257342
> 
> 赞同：4
> 
> 时间：2012-06-29T06:54:36.643
> 
> 标签：vim, scroll, vi

Wrap 模式，如果一个段落有多行，当它到达顶部的窗口时，然后我按 Ctrl+E，这个段落将完全消失。有没有办法让它只减少顶行而不是整个段落？

由于画面变化太突然，我经常找不到位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T07:45:08.237

为了在包装中进行伪线处理，您可以更改：

```
 noremap j gj
 noremap k gk 
```

并添加

```
set scrolloff = 3   " so you always have 3 lines on bottom and top or 
set scrolloff = 999 " to have the cursor(line) always in the middle 
```

为了找到这个位置，把它放在你的`.vimrc`

```
set cursorline
if &term =~ "xterm\\|rxvt"
    " use a green cursor in insert mode
    let &t_SI = "\<Esc>]12;green\x7"
    " use an orange cursor otherwise
    let &t_EI = "\<Esc>]12;orange\x7"
    silent !echo -ne "\033]12;orange\007"
    " reset cursor when vim exits
    autocmd VimLeave * silent !echo -ne "\033]12;white\007"
    " use \003]12;gray\007 for gnome-terminal
endif 
```

它使光标在插入模式下变为绿色，否则变为橙色 - 这些`\<esc>]12;green\x7`只是告诉终端它应该这样做 - 用 australopithici 或其他语言，因为那是终端的旧版本;-)。

这在你的`.gvimrc`

```
highlight Cursor guifg=black guibg=DarkOrange
highlight iCursor guifg=black guibg=Green
set guicursor=n-v-c:block-Cursor
set guicursor+=i:ver100-iCursor
set guicursor+=n-v-c:blinkon0
set guicursor+=i:blinkwait0 
```

好吧，最后三行不是必需的，但我不喜欢眨眼

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T07:45:54.773

这个问题经常被问到，答案总是*“你不能”*。

可以通过“虚拟行”在一个换行中移动光标“虚拟行” `gj`，`gk`但它并不能真正帮助解决滚动问题：Vim 不能只显示`x`换行的“虚拟行”。

# java - Java EE 移动网站

> ID：11257343
> 
> 赞同：0
> 
> 时间：2012-06-29T06:54:40.023
> 
> 标签：java, html

是否可以制作一个移动网站，例如使用 java 的 jsp 或 servlet 使用 RMI 或类似的东西连接到 Java SE 应用程序服务器？

它需要登录，因为我会登录到连接到应用程序服务器并与服务器“对话”的小程序（它已经在运行并且可以工作）。

现在我想要的是我必须能够使用移动设备，即 sumsung 平板电脑或黑莓来查看移动网站，使用与小程序相同的详细信息登录，并且能够做一些与我相同的事情在applet中就能做到。

这可能吗？我会用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T07:03:17.120

是的你可以。一切都以完全相同的方式工作，因为在使用 JSP 时，您将在客户端站点获得一个普通的 HTML 页面。

您所要做的就是优化您的布局，使其在小屏幕上看起来不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T07:11:55.113

你的手机就像普通的 linux/windows 桌面一样。所有编程结构都将起作用。您还可以在 Internet 的某个位置使用 Java 服务器启动客户端套接字。

这样做，创建一个 ec2 ubuntu 服务器，使用安全组打开端口 23123，编写一段 java 服务器套接字代码，等待对 objectiostream 字符串对象的读取。

在您的 android 客户端上，在端口 23123 上打开一个连接到此服务器 ec2 dns 名称的套接字，并使用 objectiostream 发送字符串对象。

它对我有用，对你有用:)

# javascript - 在文本框的 Keypress 事件上更新 DIV 的 InnerHTML

> ID：11257345
> 
> 赞同：1
> 
> 时间：2012-06-29T06:54:45.190
> 
> 标签：javascript, html, onkeyup

我想要一个输入框，用户可以在其中添加或更改文本，同时（或在他们完成后），我想用他们刚刚输入的文本更新 div 内的文本。

这是我使用的代码

**JAVASCRIPT：**

```
<script language="javascript" type="text/javascript"> 
function change(boxid,divtoaffect) { 
content = document.getElementById("" + boxid + "").value; 
document.getElementById(divtoaffect).innerHTML = content; 
} 
</script> 
```

**HTML：**

```
<table border="0" cellpadding="5" cellspacing="0" style="border-bottom:1px solid black; border-right:1px solid black; border-left:1px solid black; border-top:1px solid black" width="50%">
<tr>
    <td >Name:<br/><input type="text" id="text1" onKeyPress="change('text1','output1')"  /></td>
    <td valign="bottom"><div id="output1" style="font-weight:bold;height:20px;"></div></td>
</tr>
<tr>
    <td>Designation:<br/><textarea id="text2" rows="1" onKeyPress="change('text2','output2')"></textarea></td>
    <td valign="bottom"><div  id="output2" style="height:40px;"></div> </td>
</tr>
<tr>
    <td>Address:<br/><textarea id="text3" rows="2" onKeyPress="change('text3','output3')"></textarea></td>
    <td valign="bottom"><div id="output3" style="height:50px;"></div></td>
</tr>
</table> 
```

这里的问题是当我在文本框中键入第二个单词时它会更新 DIV，即当我键入一个单词时它不会显示在 DIV 中，而当我键入第二个单词时它会显示 DIV 中的第一个单词.

![在此处输入图像描述](../Images/263ff1b4478aa05581b7a5407227198d.png)

![在此处输入图像描述](../Images/f434173cf77dc3e2a599a417c9dc592c.png)

而且当我在 Textarea 字段中按 Enter 时，在 DIV 中它继续在同一行上。这是图像 ![在此处输入图像描述](../Images/bc61c55ff1e9c52a31900f75379869e2.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T06:57:25.193

而不是`onKeyPress`，使用`onKeyUp`事件

编辑：扩展问题。

您需要将回车（+ 换行）转换为`<br />`标签。类似下面的东西（在行尾替换）

```
function change(boxid,divtoaffect) { 
  content = document.getElementById("" + boxid + "").value.replace(/\n/g, '<br>');
  document.getElementById(divtoaffect).innerHTML = content; 
} 
```

请注意，您可能需要替换`\r\n`(carriagereturn + linefeed) 而不是`\n`(linefeed)。下面的例子

```
content.replace(/\r\n/g, '<br>'); 
content.replace(/\n/g, '<br>'); 
```

# android - Maven Android SDK Deployer 运行命令“mvn install”错误：找不到属性文件

> ID：11257346
> 
> 赞同：0
> 
> 时间：2012-06-29T06:54:54.333
> 
> 标签：android, maven

Maven Android SDK Deployer 运行命令“mvn install”报错：

> 找不到属性文件

请告诉我为什么？如何修复错误？例如错误：

> 无法在项目 google-apis-4 上执行目标 org.codehaus.mojo:properties-maven-plugin:1.0-alpha-2:read-project-properties（默认）：
> 找不到属性文件：D:\ICSEclipse\android- sdk-windows\add-ons\addon-google_apis-google-4 \source.properties

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T21:51:53.380

Your issue is addressed right in the install instructions: [https://github.com/mosabua/maven-android-sdk-deployer#known-problems](https://github.com/mosabua/maven-android-sdk-deployer#known-problems)

In short, if you have and ADK that has been downloaded a long time ago and then updated you need to delete it completely and redownload it. The issue is a number of folder name changes between updates and the fact that de deployer only works with the newest naming scheme.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-16T14:48:08.100

接受的答案对我没有帮助，因为我刚刚下载了最新的 ADK 和最新的 sdk-deployer 并且仍然出现错误，没有任何旧版本。

当我解决这些问题时，我让它工作：

1.  第一个问题是我在安装 ADK 后没有安装所有平台和附加组件。这需要使用 SDK 管理器来完成。
2.  [在那之后，其中两个模块失败了，所以他们必须像这个 pull request](https://github.com/mosabua/maven-android-sdk-deployer/pull/196)中解释的那样被注释掉。
3.  然后它因 javadoc 错误而失败。这是由于 JDK 8，显然还不支持，为此我打开[了这个问题](https://github.com/mosabua/maven-android-sdk-deployer/issues/197)。使用 JDK 7 它可以工作。

# javascript - 从 Javascript 按钮单击引发 Flash 事件

> ID：11257348
> 
> 赞同：-1
> 
> 时间：2012-06-29T06:54:59.070
> 
> 标签：javascript, actionscript-3, flash

我的 JS 页面上有几个按钮。单击这些后，我需要在将调用弹出窗口的按钮下方的 flash swf 中引发事件。我能为此做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:08:09.257

我想你想要[ExternalInterface.addCallBack()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html#addCallback%28%29)。

此处的文档和示例：http: [//help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7cb2.html#WS5b3ccc516d4fbf351e63e3d118a9b90204-7ca7](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7cb2.html#WS5b3ccc516d4fbf351e63e3d118a9b90204-7ca7)

# android - 在列表视图中更改编辑文本的焦点 使用 SoftKeyBoard 中的下一个键

> ID：11257353
> 
> 赞同：3
> 
> 时间：2012-06-29T06:55:14.623
> 
> 标签：android

如何配置下一个按钮以将焦点更改为 ListView 连续行中的编辑文本。我不能使用 android:nextFocusDown="@+id/...." 因为编辑文本具有相同的 id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:08:26.500

试试这个，让我知道这是不是你想要的？

```
 <EditText android:layout_height="wrap_content"
    android:layout_width="fill_parent" 
    android:imeOptions="actionDone"
    android:singleLine="true" /> 
```

[actionDone imeOption 不适用于 Android 2.3 中的 EditText](https://stackoverflow.com/questions/5578991/actiondone-imeoption-doesnt-work-on-edittext-in-android-2-3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-18T10:21:50.287

要更改 ListView 行中 EditText 的焦点，您可以使用以下 XML 示例：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout         xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <EditText
        android:id="@+id/edit_1"
        android:nextFocusRight="@+id/edit_2"
        android:imeOptions="actionNext"
        />

    <EditText
        android:id="@+id/edit_2"
        android:nextFocusRight="@+id/edit_3"
        android:imeOptions="actionNext"
        />

   <EditText
        android:id="@+id/edit_3"
        android:nextFocusRight="@+id/edit_4"
        android:imeOptions="actionNext"
        />

   <EditText
        android:id="@+id/edit_4"
        android:nextFocusDown="@+id/edit_1"
        android:imeOptions="actionNext"
        />

</LinearLayout> 
```

# android - ListView.hasWindowFocus==true 但子视图 hasWindowFocus==false

> ID：11257357
> 
> 赞同：0
> 
> 时间：2012-06-29T06:55:28.357
> 
> 标签：android, focus, android-listview

有时我注意到，对于 View v

```
 - v.hasWindowFocus()==false
 - ((View)v.getParent()).hasWindowFocus())==true 
```

如果我正确理解文档，则永远不会是这种情况。

`v.getParent()`是 ListView 的（子类）

关于可能导致这种情况的任何想法？

[注意：我认为这 hasWindowFocus-mismatch 是此问题](https://stackoverflow.com/questions/11242226/successfully-posted-runnable-only-gets-executed-when-parent-is-invalidated)的根本原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:24:42.317

主要原因是 ListView 不喜欢具有视图数组的适配器。

所以问题是由类似的代码触发的

```
public View getView (int position, View convertView, ViewGroup parent)
{
    return _views[position];
} 
```

查看 ListView 代码（或者更确切地说它是父级 AbsListView.obtainView 方法）时，您会看到类似

```
 if (scrapView != null) {
        ...
        child = mAdapter.getView(position, scrapView, this);
        ...
        if (child != scrapView) {
            mRecycler.addScrapView(scrapView); 
```

可能会发生`getView(position,...)`使用 scrapView != _views[position] 调用的情况，因此 scrapView 将被回收。另一方面，很可能同一个视图也被再次添加到 ListView 中，导致视图出现奇怪的状态。

这应该在 ListView IMO 中修复。

# c++ - 类的独立名称

> ID：11257359
> 
> 赞同：0
> 
> 时间：2012-06-29T06:55:33.773
> 
> 标签：c++, lua

我们有 lua 类。

在 lua 类中有一个方法 registerFunc() 定义：

```
void lua::registerFun() {
    lua_register( luaState, "asd", luaApi::asd);
    lua_register( luaState, "zxc", luaApi::zxc);
} 
```

lua_register 是 lua 库的内置函数：http: [//pgl.yoyo.org/luai/i/lua_register](http://pgl.yoyo.org/luai/i/lua_register)

它将来自 luaApi 类的静态方法作为第三个参数。

现在有些程序员想要使用 lua 类，所以他不得不创建自己的类，并定义了静态方法，例如：

```
class luaApi {
public:
    static int asd();
    static int zxc();
}; 
```

现在是重点。我不希望（作为程序员）创建完全命名为“luaApi”的类，但例如 myClassForLuaApi。但是现在这是不可能的，因为它是明确写在代码中的——在 lua 类中：

```
lua_register( luaState, "asd", luaApi::asd); 
```

我将不得不将其更改为：

```
lua_register( luaState, "asd", myClassForLuaApi::asd); 
```

但我不想（假设程序员无法访问那里）。

如果还是看不懂，我就放弃了。:)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:02:58.110

您应该能够将任何方法作为第三个参数传递`lua_register()`，只要它有正确的签名（`int (*)(lua_State *L)`aka `lua_CFunction`）。它不必是类的静态成员，也可以是任何独立函数：

```
lua_register(luaState, "myFunction", &myFunction); 
```

如果这不满足你，你应该添加一些更大的代码，例如你的`lua`类。你如何添加新的调用实例`lua_register()`？你在使用一些预定义的宏吗？不能修改`lua`类里面的代码吗？后一种情况，除非你使用一些预处理器定义或宏来“弯曲”你的名字，否则你无能为力。

编辑：如果您希望您的`lua`类的用户能够注册他们自己的函数，那么您应该只允许他们将其作为参数传递给方法（基本上 Lua 也是这样做的）：

```
void lua::registerFunction(const char *name, lua_CFunction *call) {
    lua_register(luaState, name, call);
} 
```

如果您想抽象出 Lua 的状态对象，您也可以考虑使用自定义对象（具有`lua`对象以及所有参数并处理返回值）调用用户函数。

# javascript - 通过 App Store 更新基于 Cordova / Phonegap 的应用程序“崩溃”

> ID：11257363
> 
> 赞同：1
> 
> 时间：2012-06-29T06:55:46.850
> 
> 标签：javascript, ios, cordova, app-store

我们向 iTunes 发布了一个基于 Cordova 的应用程序版本，Apple 批准了它，一切都运行得非常好。

在开发了一些 UI 改进之后，我们决定发布应用程序的更新，Apple 再次批准了该更新。

现在我们有一个严重的问题。**如果用户从第一个版本升级到第二个版本，在初始启动时似乎没有执行任何 JavaScript（！）**给用户留下一个空白页面（完全关闭并重新打开应用程序确实可以解决问题，但用户对此感到很困惑，尽管我们的应用说明中有说明）。第二次打开一切正常！

如果用户进行全新安装，那么第一次一切正常。

这仅在从应用商店更新并且我们无法在本地复制/通过 xcode 部署时发生。

我最初的想法是“设备就绪”事件没有触发。我目前正在与 Apple 测试这个理论。

任何其他建议或帮助将不胜感激，因为这对我们来说是一个严重的现场问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:15:38.833

iOS > 5.1 和 Cordova < 1.7 中的错误：[https ://issues.apache.org/jira/browse/CB-347](https://issues.apache.org/jira/browse/CB-347)

# ruby-on-rails - rails 模型使用实例变量

> ID：11257367
> 
> 赞同：0
> 
> 时间：2012-06-29T06:56:08.330
> 
> 标签：ruby-on-rails, ruby, activerecord, model, callback

`@edit_id`我在 user_controller操作中创建了一个实例变量 ( ) `update`。

```
def update
  ......
  @edit_id = 1
  ......
end 
```

我在 user_model 中有一个 Active Record 回调

```
has_many :details
after_update :create_user_details
  ......
  private
  def create_user_details
     detail = user.details.build
     detail.edit_id = @edit_id
     #(this @edit_id is the user_controller update action 
     #created instance variable, but **@edit_id is nil**)
     detail.save
  end 
```

我如何在回调操作中使用实例变量

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T07:02:00.717

您不能在模型中使用控制器中的实例变量。
它们都是不同对象的不同实例，因此不共享实例变量。

您需要通过在它的实例中设置它来为您的模型提供这个值，如下所示：

```
model Foo
  attr_accessor :edit_id

  private
  def create_user_details
   detail = user.details.build
   detail.edit_id = edit_id
   detail.save
  end
end 
```

然后，在您的控制器中，您为模型指定值并保存它。

```
def update
  @foo = Foo.new
  @foo.edit_id = 1
  # Whatever other business logic you want to do
end 
```

# android - CursorIndexOutOfBoundsException 请求索引 0，大小为 0

> ID：11257369
> 
> 赞同：7
> 
> 时间：2012-06-29T06:56:23.297
> 
> 标签：android, database, sqlite, android-cursor

我正在尝试从数据库的某一行中获取文本。为此，我做了这个功能

```
public String getTranslation(long rowId) throws SQLException {    
    String str = null;
    Cursor mCursor = db.query(
        true, TABLE_LANGUAGE_FR, new String[] {
            KEY_ID_INTERFACE_TEXT, KEY_ITEM_NAME,KEY_FORM_LABEL_ID, KEY_FORM_RANK
        }, 
        KEY_FORM_LABEL_ID + "=" + rowId, null, null, null, null, null
    );

    if (mCursor != null) {
        mCursor.moveToFirst();
        str = mCursor.getString(mCursor.getColumnIndex(KEY_ITEM_NAME));
    }
    return str;
} 
```

我这样称呼它：

```
db = new DbAdapter(this);
db.createDatabase(); 
db.openDataBase();
String str = db.getTranslation(1706); 
```

我的桌子看起来像这样：

![在此处输入图像描述](../Images/4afb64569a3a0261a48be8ce145e94d8.png)

我收到此错误：

```
09:32:08.965    307 com.Orange  ERROR   AndroidRuntime  Caused by: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
09:32:08.965    307 com.Orange  ERROR   AndroidRuntime      at android.database.AbstractCursor.checkPosition(AbstractCursor.java:580)
09:32:08.965    307 com.Orange  ERROR   AndroidRuntime      at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:214)
09:32:08.965    307 com.Orange  ERROR   AndroidRuntime      at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:41)
09:32:08.965    307 com.Orange  ERROR   AndroidRuntime      at com.Orange.Database.DbAdapter.getTranslation(DbAdapter.java:141)
09:32:08.965    307 com.Orange  ERROR   AndroidRuntime      at com.Orange.Authentication.onCreate(Authentication.java:32) 
```

为什么我会收到此错误？我在这里做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-29T07:08:41.500

It would seem like you have an emtpy cursor. Instead of checking whether it is null try checkcing

```
if(mCursor.getCount() > 0)
{
  //do stuff
} 
```

try removing your where condition to make sure you actually get data when running the select statement. If you still get nothing you might have a typo in your tablenames, or failed to connect/create the database/tables.

```
Cursor mCursor = db.query("sys_interface_text", new String[] {
       "id_interface_text", "item_name","form_label_id", "form_rank"}, 
               "form_label_id = 1706", null, null, null,
       null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T08:26:15.770

尝试使用

```
while(cursor.moveToNext())
{
   if(cursor.isFirst())
   {
      //Your code goes here in your case
      return mCursor.getString(mCursor.getColumnIndex(KEY_ITEM_NAME));
   }
}
finaly
{
 if(mCursor!= null)
 {
   mCursor.close();
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T07:10:56.277

尝试更改此行

```
Cursor mCursor = db.query(true, TABLE_LANGUAGE_FR, new String[] {
           KEY_ID_INTERFACE_TEXT, KEY_ITEM_NAME,KEY_FORM_LABEL_ID, KEY_FORM_RANK}, 
                   KEY_FORM_LABEL_ID + "=" + rowId, null, null, null,
           null, null); 
```

经过

```
Cursor mCursor = db.query(TABLE_LANGUAGE_FR, new String[] {
           KEY_ID_INTERFACE_TEXT, KEY_ITEM_NAME,KEY_FORM_LABEL_ID, KEY_FORM_RANK}, 
                   KEY_FORM_LABEL_ID + "=" + rowId, null, null, null,
           null); 
```

并将其添加到 if 条件中

```
 return str; 
```

# c# - 将 TextBlock 从 StackPanel 顶部拖放到另一个

> ID：11257372
> 
> 赞同：0
> 
> 时间：2012-06-29T06:56:29.070
> 
> 标签：c#

我有一个 C# 应用程序，我在其中实现如下拖放功能；

```
<Grid>
        <StackPanel Orientation="Horizontal" Height="34" VerticalAlignment="Top">
            <TextBlock Text="This is satck panel 1" Padding="0, 10, 20, 10"/>
            <StackPanel Orientation="Horizontal" AllowDrop="True" DragEnter="StackPanel_DragEnter" DragLeave="StackPanel_DragLeave" DragOver="StackPanel_DragOver" Drop="StackPanel_Drop" MouseMove="StackPanel_MouseMove"  GiveFeedback="StackPanel_GiveFeedback" >
                <Border CornerRadius="1" BorderBrush="Black" BorderThickness="1">
                    <TextBlock Text="Text1"/>
                </Border>
            </StackPanel>
        </StackPanel>

        <StackPanel Orientation="Horizontal" Height="30" Margin="0,40" VerticalAlignment="Top">
            <TextBlock Text="This is stack panel 2" Padding="0,10,20,10"/>
            <Border CornerRadius="1" BorderBrush="Black" BorderThickness="1">
                <TextBlock Text="Text2"/>
            </Border>
    </StackPanel>

</Grid> 
```

我实际上要做的是用具有以下格式的每个项目填充一个列表框：

`StackPanel> <TextBlock> </TextBlock> **<StackPanel AllowDrop> <TextBlock /> </StackPanel>** </StackPanel>`

StackPanel`AllowDrop=True`应该接受 TextBlock drop（文本块可以从其他堆栈面板中删除）。如果 TextBlock 被放在 上`StackPanel AllowDrop=True`，它应该接受它作为它的子元素，并将 TextBlock 替换为拖动的 TextBlcok 所在的位置。我通过查看文档实现了这一点，但这不喜欢工作，因为我能够使用 DragEnter、Drag Leave 但不能删除文本框。

我还附上了我的简短示例项目（54 kB），我在其中实施了相同的操作，但这是行不通的。链接：[http ://www.mediafire.com/?ssvf95oa8bd5jh6](http://www.mediafire.com/?ssvf95oa8bd5jh6)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T06:58:51.690

也许这可以让你以正确的方式，当我需要将一行从一个网格拖放到第二个网格时，我做到了

[http://johnnblade.wordpress.com/2012/06/12/drag-and-drop-grid-control-row-devexpress-wpf/](http://johnnblade.wordpress.com/2012/06/12/drag-and-drop-grid-control-row-devexpress-wpf/)

# java - WEKA 为实例方法分类实例和分布

> ID：11257375
> 
> 赞同：2
> 
> 时间：2012-06-29T06:56:44.227
> 
> 标签：java, machine-learning, data-mining, weka

在 WEKA 中，当我尝试使用必须使用 SVM 使用经过训练的模型进行分类的实例来调试代码时，我看到首先我进入分类实例（）对测试实例进行分类，然后此方法调用 distributionforinstance（）方法. 在那里，在distributionforinstance() 方法中，我看到我们调用了classifyinstance() 方法。

这两种方法相互回调，这不是鸡蛋问题吗？这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:59:10.560

Rekin 的评论是正确的：

如果您只是从 派生，则继承了和`Classifier`的默认实现。您需要至少实现两者中的一个才能使其正常工作。`classifyInstance()``distributionforinstance()`

当您调试代码时，调试器可能会以某种方式跳转到抽象类`Classifier`而不是特定的 SVM 实现中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-08T11:10:04.353

大多数情况下（并非总是），distributionForInstance 用于回归研究，而 collectInstance 用于分类研究。当然distributionForInstance命令可以用于分类，但这需要几行代码。

我强烈阅读[这篇文章并](https://stackoverflow.com/a/45566505/7846405)[在您的本地环境](https://github.com/serengil/nn-weka/blob/master/nn/WekaSupervisedLearning.java)中运行这个 GitHub 项目。

# php - oauth 2.0 google + api 的 401 无效凭据，抛出 apiServiceException ..为什么会这样..？

> ID：11257377
> 
> 赞同：0
> 
> 时间：2012-06-29T06:56:54.600
> 
> 标签：php, oauth-2.0, google-plus

这就是我编码以通过谷歌验证用户并显示基本内容的方式。

使用谷歌验证用户时出错

> 错误：oauth 2.0 google + api 的凭据无效，抛出 apiServiceException

这是我的代码：

```
<?php
require_once 'google-api-php-client/src/apiClient.php';
require_once 'google-api-php-client/src/contrib/apiPlusService.php';
require_once 'google-api-php-client/src/contrib/apiOauth2Service.php';

session_start();

$client = new apiClient();

$client->setApplicationName('demo');
$client->setClientId('asd6354egfdgtdewd');
$client->setClientSecret('-ooRVhB5nbdsfisfgf7s6fsfsfj');
$client->setRedirectUri('http://demo.com');
$client->setDeveloperKey('HGFHJVhjb894rbbvjhdfjdsvkbdvdv');

$client->setScopes(array('https://www.googleapis.com/auth/plus.me',
                             'https://www.googleapis.com/auth/userinfo.email'));

$plus   = new apiPlusService($client);
$oauth2 = new apiOauth2Service($client);

if (isset($_REQUEST['logout']))
{
    unset($_SESSION['access_token']);
}

if (isset($_GET['code']))
{
    $client->authenticate();
    $_SESSION['access_token'] = $client->getAccessToken();
    header('Location: http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF']);
            # FIXME Is exit() missing?
}

if (isset($_SESSION['access_token']))
{
    $client->setAccessToken($_SESSION['access_token']);
}

if ($client->getAccessToken())
{
        $me   = $plus->people->get('me');
        $user = $oauth2->userinfo->get();

            $email = filter_var($user['email'], FILTER_SANITIZE_EMAIL);

            $optParams = array('maxResults' => 100);
        $activities = $plus->activities->listActivities('me', 'public',$optParams);

        $_SESSION['access_token'] = $client->getAccessToken();

    } else {

           $authUrl = $client->createAuthUrl();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-08T00:29:28.113

您必须在调用and`setAccessToken($token)`之前调用该函数。`$plus->people->get('me')``$user = $oauth2->userinfo->get()`

# android - 有没有办法使用 Scala 将两个或多个 .dex 文件合并为一个 .dex 文件？

> ID：11257378
> 
> 赞同：8
> 
> 时间：2012-06-29T06:56:55.070
> 
> 标签：android, scala, merge, dex, sbt-android-plugin

我正在对 Jan Berkel 的 SBT Android 插件进行一些黑客攻击，如果有一种方法可以将多个`.dex`文件合并到一个`.dex`包含所有文件的文件中，我正在徘徊。

例如，如果我有这个：

```
classes1.dex
classes2.dex
classes3.dex 
```

有没有办法使用 Scala（在某个可接受的时间）将它们合并到一个`classes.dex`文件中，该文件将包含所有 3 个文件并具有以下结构：

```
classes.dex
|-- classes1/...
|-- classes2/...
\-- classes3/... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T10:15:51.123

好吧，我好像发现了什么。

```
import com.android.dx.io.DexBuffer
import com.android.dx.DexMerger
import com.android.dx.merge.CollisionPolicy
...
val dexA = DexBuffer(File(classes1DexFilePath))
val dexB = DexBuffer(File(classes2DexFilePath))
val dexMerger = DexMerger(dexA, dexB, CollisionPolicy.FAIL)
val dexM = dexMerger.merge()
dexM.writeTo(File(classesDexFilePath)) 
```

任何人都可以验证这确实有效吗？

另外，如果这可行，那么合并超过 2 个 dex 文件应该与 Max(Max(A, B), C) 相同，前提是您编写一个带有原型的方法
`DexBuffer merge(DexBuffer dexA, DexBuffer dexB)`

资料来源：
[DexMerger](http://www.jarvana.com/jarvana/view/com/google/android/tools/dx/1.7/dx-1.7-javadoc.jar!/com/android/dx/merge/DexMerger.html)
[DexBuffer](http://www.jarvana.com/jarvana/view/com/google/android/tools/dx/1.7/dx-1.7-javadoc.jar!/com/android/dx/io/DexBuffer.html)
[CollisionPolicy](http://www.jarvana.com/jarvana/view/com/google/android/tools/dx/1.7/dx-1.7-javadoc.jar!/com/android/dx/merge/CollisionPolicy.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-27T04:24:09.897

我找到了一种不需要从源代码编译的方法，只需使用 SDK 编译的 jar。

```
java -cp dx.jar com.android.dx.merge.DexMerger output.dex input1.dex input2.dex 
```

dx.jar 位于 Android SDK 目录中，例如`android\sdk\build-tools\26.0.2\lib`. dex 文件有 64k 方法限制，所以一个 dex 文件不能容纳这么多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-25T05:31:37.120

它正在工作。r22就是用这种方式先将android-support-v4.jar和annotations.jar预dex成dex格式的。Ant 然后使用 dx.bat 将它们与已编译的 .class 文件合并。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-20T05:18:38.380

首先像 classes1.dex.zip、classes2.dex.zip、classes3.dex.zip 一样单独压缩它们，然后运行以下命令

```
java -jar dx.jar --dex --output=classes.dex.zip classes1.dex.zip classes2.dex.zip classes3.dex.zip 
```

而已。现在您在 classes.dex.zip 中有一个 classes.dex，其中 classes1.dex.zip classes2.dex.zip classes3.dex.zip 已合并。

# c++ - C 和 C++ 调用约定之间有什么区别？

> ID：11257383
> 
> 赞同：9
> 
> 时间：2012-06-29T06:57:32.987
> 
> 标签：c++, c, compiler-construction, linker, calling-convention

据我所知，调用约定取决于编译器和体系结构。但是 C 和 C++ 调用约定之间有什么明显的区别吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-29T07:01:24.830

> 但是 C 和 C++ 调用约定之间有什么明显的区别吗？

一般来说，没有。C++ 被有意设计为尽可能与 C 兼容，特别是它在所有系统上使用 C 应用程序二进制接口。

但是 C ABI 不能满足 C++ 需要的许多特性（特别是重载、命名空间和函数模板），因此 C++ 编译器对函数的名称进行了一些更改。这称为[名称修饰](http://en.wikipedia.org/wiki/Name_mangling)

因此，为了使 C 和 C++ 代码之间的函数调用能够正常工作，必须将此类函数声明为`extern "C"`禁用名称修饰并确保调用约定是 C 所期望的（但我希望后一个方面会自动出现，即使标准没有强制要求）。

C++ 还为C 中不存在的成员函数（有时称为[thiscall ）提供了](http://msdn.microsoft.com/en-us/library/ek8tkfbw%28v=vs.71%29.aspx)*额外的调用约定。但是自由函数使用与 C 相同的调用约定，无论是在给定系统上的哪一个。*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-29T08:53:38.387

这两个标准都没有要求 C 和 C++ 调用约定在给定编译器上相同，除了声明的 C++ 函数`extern "C"`必须使用与 C 函数相同的调用约定进行调用。

这就是为什么具有相同参数和返回类型的函数指针和带有 C 链接的函数指针具有不同类型的原因。当函数被调用时，编译器可以从类型知道调用它的调用约定，如果它们不同。

*在实践*中，我认为我从来没有故意处理过一个示例，该示例在具有和不具有 C 链接的自由函数之间使用不兼容的调用约定。通常，C++ 实现从它计划运行的系统的 ABI 中采用其调用约定，以便生成系统的其他用户可以根据 ABI 理解的可链接对象（可执行文件和库）。

这不是必需的——标准不关心是否存在系统 ABI，并且系统通常不关心如何在自包含的可执行文件中进行调用 [*]。除非有特殊的理由不这样做，否则这样做是明智的。给定系统上的系统 ABI 可能会或可能不会提及 C++——如果没有，那么 C++ 实现就非 C 链接函数而言是独立的，但正如我所说，制作可以实现的函数通常是明智*的*让 C 链接使用相同的调用约定，就好像它们确实有 C 链接一样。

我说“不兼容”而不是“不同”，因为当然有些东西在 C 调用约定中没有提到，但需要在 C++ 调用约定中指定。例如，如何传递指向成员函数的指针。很可能这*不是*由系统 ABI 确定的，因此留给 C++ 实现。这样做的原因是将指向成员函数的指针的实现留给 C++ 实现，而不是系统 ABI 做一些制造商认为是 C++ 编译器编写者的工作的事情。

不妨碍调用约定，请注意名称修饰在具有或不具有 C 链接的自由函数之间不可避免地是不同的。原因是 C++ 名称修改必须包含参数的类型（因为函数重载），而 C 名称修改不能（因为带有未指定参数的外部函数声明）。

[*] 虽然我已经看到使用“错误”调用约定确实会破坏事情的示例。ISTR 是一个 Windows 移动设备，如果您对堆栈的格式与操作系统预期的不同，那么某些硬件异常会取出设备，因为操作系统试图回溯有问题的线程的堆栈，但不能。因此，至少在 2005 年左右的那个操作系统版本上，如果您希望操作系统的诊断能够正常工作，那么您必须在内部使用 Windows 调用约定。或者无论如何，与堆栈帧格式有关的调用约定部分。当然，这完全是我们搞砸了，但我不知道我们是否可以通过安装我们自己的硬件异常处理程序来正确修复它，而不是通过不首先引起异常来解决它们。不过，这确实意味着用户模式进程可能会因堆栈溢出而轻易地关闭操作系统，而且调试我们的代码比在其他 Windows 上更难。所以我们稍微指责了操作系统。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-29T07:36:16.100

> 据我所知，调用约定取决于编译器和体系结构。

是的。

> 但是 C 和 C++ 调用约定之间有什么明显的区别吗？

更好的问题是“有什么相似之处吗？”

是的：

在 C++ 应用程序中声明`extern "C"`的函数与该架构上的 C 函数使用的调用约定相同。

您对调用约定所做的任何其他假设都是推测性的，并且可能碰巧是相同的，但您需要根据具体情况来担心这一点。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-29T07:25:22.853

在语言之间改变调用约定的整个概念超出了任何给定的语言（及其规范）。这就是它应该的样子，这些事情与任何名副其实的语言的规范无关。基本上，您是对的，它属于规范的特定实现领域 - 编译器架构。当然，给定语言的规范/标准中讨论的一些概念（如链接规范）会影响调用约定，但这不是*计划*中的结果。

ABI 的职责是将这些概念标准化/形式化，然后再一次，人们没有义务尊重这些概念（可能是因为实现的调色板变化很大）

确实，规范需要忽略参数的传递方式，无论是最终在堆栈还是寄存器上，两者的组合，分配顺序等。这是从事实现工作的人和设计人员的工作实际的硬件，更重要的是指令集。

**因此：**无论是标准化的 C 还是 C++，都对如何实现内容没有任何发言权。因此，语言必须没有固有的差异。仅在它们的应用方式上。这就是编译器架构的领域。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-02-12T23:18:09.293

没有 C 或 C++ 标准定义 ABI。这是一个有意的设计决策，它允许编译器编写者自由地创建尽可能高效的实现。

[随着时间的推移，称为cdecl](http://en.wikipedia.org/wiki/X86_calling_conventions#cdecl)的 C 调用约定已成为 x86 架构上的事实标准。在 AMD64 机器上运行的 C 代码有类似的事实[标准](http://en.wikipedia.org/wiki/X86_calling_conventions#x86-64_calling_conventions)，但它们在 UNIX 和 Windows 操作系统之间有所不同。

在 Unix 机器上，基于 Intel 发布的 Itanium C++ ABI，有一些朝着通用 C++ ABI 发展。但是，由于 C++ 的额外复杂性，同一编译器的不同[版本](http://gcc.gnu.org/onlinedocs/gcc/C_002b_002b-Dialect-Options.html)甚至[不同的编译器切换](http://gcc.gnu.org/onlinedocs/libstdc++/manual/abi.html)通常会产生符合不兼容 ABI 的机器代码。

通常可以依靠使用`extern "C" { ... }`来强制编译器使用事实上的 C ABI 实现函数，但 C++ 标准并不要求这样做。

如果您对当前 C++ ABI 的全面描述感兴趣，那么您应该查看 Agner Fog 的[“不同 C++ 编译器和操作系统的调用约定”](http://www.agner.org/optimize/)。

# iphone - 在 iPhone 中登录 Picasa

> ID：11257385
> 
> 赞同：0
> 
> 时间：2012-06-29T06:57:35.553
> 
> 标签：iphone, gdata-api, picasa

嗨，我是 iphone 应用程序开发的新手.. 目前我正在处理***Picasa 网络相册***..我在我的项目中集成得很好，但我陷入了传递用户凭据的情况......

我正在使用**GTMOAuth2ViewControllerTouch**来验证用户……所以当我使用 GTMOAuth 时，我只收到用户电子邮件……为了获取他的信息，我应该传递用户名和密码……

或者有什么方法可以获取用户相册...

到目前为止，我知道如果我们通过身份验证令牌，我们可以获得用户相册，但我无法获得身份验证令牌...所以请帮助解决这个问题..

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T00:17:19.010

由于您让用户使用 OAuth 2 登录，因此在使用照片 API 时不需要用户名和密码。

如果您使用 GData 库进行 Picasa 网络相册提取，只需将服务对象的授权方设置为 OAuth 2 身份验证对象，例如

```
[service setAuthorizer:auth]; 
```

[正如这里](http://code.google.com/p/gtm-oauth2/wiki/Introduction#Using_the_Authentication_Tokens)提到的。

# windows - 每台机器使用标准用户帐户安装

> ID：11257388
> 
> 赞同：0
> 
> 时间：2012-06-29T06:57:38.990
> 
> 标签：windows, wix, windows-installer, admin, wix3.5

我想知道使用标准用户帐户进行每台机器安装的可能性，当我想以标准用户身份登录每台机器安装时，安装程​​序要求我输入管理员密码，当我输入密码时开始安装我想知道这是管理员安装还是标准用户安装？

我可以做些什么来提升标准用户的权限，这样它就不需要管理员密码来检查标准用户是否可以进行每台机器的安装。

我问这个是因为互联网上给出了不同的东西，但没有一个对我有用。

如果我想在每台机器安装中添加一个附加功能，以便安装程序仅为标准用户安装而不是为管理员安装，该怎么办。

我正在使用 Wix 3.5 工具包来制作我的安装程序。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T11:56:36.420

你无法避免在某个时候提升。您可以提前提升以“宣传”安装，这允许标准用户以后不需要提升（服务会记住允许安装）。但为了对每台机器进行修改，Windows Installer 需要提升权限。

# sql - 在实践中多少个连接是可行的

> ID：11257389
> 
> 赞同：8
> 
> 时间：2012-06-29T06:57:39.797
> 
> 标签：sql, database, join, feasibility

这个问题可能更适合programmers.stackexchange。如果是，请迁移。

我目前正在思考典型数据模型的复杂性。每个人都知道数据模型应该被规范化，但是另一方面，规范化的数据模型将需要相当多的连接来重新组装数据。连接可能是昂贵的操作，具体取决于所涉及的表的大小。所以我想弄清楚的问题是，人们通常会如何进行这种权衡？即在实践中，在设计数据模型时，您会发现在典型查询中可以接受多少个连接？当计算单个查询中的多个连接时，这将特别有趣。

举个例子，假设我们有用户，他们拥有房屋，其中有房间，有抽屉，里面有物品。在上面解释的意义上，用用于用户、房屋、房间、抽屉和项目的表来简单地规范化这一点，稍后在获取属于某个用户的所有项目时，我需要加入五个表。这对我来说似乎非常复杂。

很可能还会涉及表格的大小。连接五个数据量很少的表并不像连接数百万行的三个表那么糟糕。还是这种考虑是错误的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T07:52:21.340

数据库规范化是有[原因的](http://en.wikipedia.org/wiki/Database_normalization#Objectives_of_normalization)，我已经看到有超过 20 个表和子查询的查询被连接在一起，很长一段时间都可以正常工作。我确实发现规范化的概念是一个巨大的胜利，因为它允许我将新功能添加到现有的工作应用程序中，而不会影响迄今为止的工作部分。

数据库具有不同的功能，可让您的生活更轻松：

*   您可以为最常用的查询创建视图（尽管这不是视图的唯一用例）；
*   一些 RDBMS 提供[公用表表达式](http://www.postgresql.org/docs/current/interactive/queries-with.html)(CTE)，允许您使用命名子查询以及递归查询；
*   一些 RDBMS 提供扩展语言（如 PL/SQL 或 PL/pgSQL），允许您开发自己的函数来隐藏架构的复杂性并仅使用 API 调用来操作数据。

不久前有一个相关的问题，关于[包含多个连接的 SQL 语句如何工作？](https://stackoverflow.com/q/11189714/1154462)也可能值得研究一下。

使用规范化数据库开发应用程序更容易，因为通过适当的方法，您可以通过视图/函数隔离您的架构，并使您的应用程序代码不受架构更改的影响。如果您选择非规范化设计，那么设计更改可能会影响您的大量代码，因为非规范化系统往往会以更改可能性为代价进行高性能优化。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-29T07:13:13.370

规范化数据库本身就是一种艺术形式。
如果你正确地构建你的连接，你只会抓住需要的列。
运行具有多个表的数百万条记录并仅加入所需字段的查询应该要快得多，然后如果您说一两个表包含所有记录，它会更快。在第二个示例中，您正在检索所有数据并对其进行排序将是一场编码噩梦。
MySQL 非常好只检索请求的数据。
仅仅因为查询很长并不意味着它更慢。
我见过超过 20 行非常快的查询语句。

对您编写的查询有信心，如果您不编写测试脚本，请自己尝试。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-29T07:11:42.703

完全规范化的数据模型在性能上具有更大的成本，但对变化更具弹性。为一个查询调整的一角钱的扁平数据模型会表现得更好，但是当规格发生变化时，您将不得不付出代价。

所以也许问题是您的数据模型（查询）的使用会发生很大变化吗？如果不; 不要对它们进行规范化，只针对特定查询调整它们（询问您的 DBA）。否则，如果您使用多个连接，请规范化并仅通过查询执行计划，我不能给您一个具体的数字。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-29T07:36:16.003

为了解决您的问题，答案在：

[http://en.wikipedia.org/wiki/Database_normalization](http://en.wikipedia.org/wiki/Database_normalization)

如果性能成为使用非规范化的问题，则可以解决这些问题。不应该预先考虑这一步（除非您已经有预期的负载）。在真正需要并基于测量值时进行非规范化。

# jsf-2 - 具有全局数据过滤功能问题的 Primefaces 数据表

> ID：11257395
> 
> 赞同：2
> 
> 时间：2012-06-29T06:57:59.520
> 
> 标签：jsf-2, primefaces

我正在使用带有过滤选项的 primefaces 数据表。我已经使用全局数据过滤功能检索数据表中的值列表。我已经通过数据表中的 selectBoolean 复选框选择了特定的行。如果不过滤行并选择复选框，则完成相应的选定值。但是当我通过过滤选项搜索特定值并选择行时，意味着默认情况下我只得到第一行值。例如，我从表中搜索最后一个值并选择该行，但我得到了第一行值。

jsf页面：

```
<p:dataTable emptyMessage="No values found with given criteria" id="ng1" var="ngo"
             widgetVar="ngoS" paginator="true" rows="15" paginatorPosition="bottom"
             value="#{approveControl.appNgo}"  paginatorAlwaysVisible="false">
    <f:facet name="header">  
        <p:outputPanel>  
            <h:outputText value="Search all fields:" />  
             <p:inputText id="globalFilter" onkeyup="ngoS.filter()" style="width:150px" />  
        </p:outputPanel>  
    </f:facet>

    <p:column filterBy="#{ngo.name}"   headerText="NgoName">  
        #{ngo.name}
    </p:column>  

    <p:column headerText="Email" filterBy="#{ngo.email_id}">  
        #{ngo.email_id}
    </p:column>  

    <p:column headerText="Select">
        <h:selectBooleanCheckbox id="list" value="#{approveControl.checked[ngo.ngo_id]}" />
    </p:column>

    <f:facet name="footer">  
        <h:inputHidden rendered="#{!approveControl.appNgo.isEmpty()}">
            <p:commandButton  value="Reject" onclick="onSubmit(#{approveControl.appNgo.size()});" />
        </h:inputHidden>
     </f:facet>  
</p:dataTable> 
```

我正在使用 Primefaces 3.0 和 jsf 2.0。我该如何解决。

# php - jquery-plugin-validation 错误信息位置

> ID：11257396
> 
> 赞同：0
> 
> 时间：2012-06-29T06:57:59.843
> 
> 标签：php, jquery, css, validation

我正在尝试使用[jquery 验证插件来验证表单](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

我的代码：[`source code`](http://jsfiddle.net/dduleep/Gzrub/4/)

每个验证错误消息视图仅在第一个字段前面。如何查看错误消息的正确位置（靠近现场）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T07:00:24.357

您的所有输入都具有相同的`id`属性。使它们对每个输入都是唯一的。

[js小提琴](http://jsfiddle.net/bTYP2/)。

# javascript - 使用模态叠加而不是 InfoWindow 的 GoogleMap

> ID：11257403
> 
> 赞同：2
> 
> 时间：2012-06-29T06:58:26.777
> 
> 标签：javascript, google-maps-api-3, overlay, infowindow

我想使用自定义信息窗口。没有箭头没有阴影，一个`panTo`。自定义 CSS 规则。现在我正在使用`Overlay`它们正在正确显示。但他们应该表现得像一个`InfoWindow`. 它们应该被关闭`onBlur`但覆盖不会发出任何此类事件。我应该挂上`onclick`事件`map`吗？或者有更好的解决方案。怎么`InfoWindow`工作？事件的`InfoWindow`Hooks`click`来自?`map`

# c# - 我将 IDictionaryEnumerator 设置为 ResourceReader.GetEnumerator，如何获取所有资源的列表？

> ID：11257406
> 
> 赞同：2
> 
> 时间：2012-06-29T06:58:36.507
> 
> 标签：c#

这是我的代码：

```
var assem = Assembly.GetExecutingAssembly();
var fs = assem.GetManifestResourceStream("res.resources");
var rr = new ResourceReader(fs);`
IDictionaryEnumerator dict = rr.GetEnumerator(); 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T07:20:25.040

您可以使用 LINQ 将您提供的数据转换为`ResourceReader`可能更易于使用的字典：

```
using System.Linq;
using System.Collections.Generic;

var assem = Assembly.GetExecutingAssembly();
var fs = assem.GetManifestResourceStream("res.resources");
var rr = new ResourceReader(fs);

Dictionary<string, object> data = rr
                .OfType<DictionaryEntry>()
                .Select(i => new { Key = i.Key.ToString(), value = i.Value })
                .ToDictionary(i => i.Key, i => i.value);

// Getting all resource names
IEnumerable<string> names = data.Keys;

// Getting all values
IEnumerable<object> values = data.Values; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T07:04:49.527

改编自[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.resources.resourcereader.aspx)：

```
var assem = Assembly.GetExecutingAssembly();
var fs = assem.GetManifestResourceStream("res.resources");
var rr = new ResourceReader(fs);`
IDictionaryEnumerator dict = rr.GetEnumerator();    
while (dict.MoveNext())
   Console.WriteLine("   {0}: '{1}' (Type {2})", 
                     dict.Key, dict.Value, dict.Value.GetType().Name);
rr.Close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T07:02:43.643

如果您想要程序集中所有资源的列表，请使用以下内容

```
var assem = Assembly.GetExecutingAssembly(); 
var resources = assem.GetManifestResourceNames(); 
```

# javascript - 如何从第二个打印页面开始打印网页页脚？

> ID：11257417
> 
> 赞同：1
> 
> 时间：2012-06-29T06:59:26.077
> 
> 标签：javascript, html, css, printing

我正在尝试使用 HTML 打印页面的页脚。但是，我需要页脚仅从第二页开始。生成的页数因文档而异。到目前为止，它要么出现在每一页中，要么出现在页面的末尾。

**JavaScript：**

```
if (lineNo > 35) {
    content += "<div id='print-footer' width=100%>";
    content += "<table cellspacing=0 cellpadding=0 width=100% border=0>";
    content += "<tr><td style='font-family: Times New Roman; font-size:12px;'>Ref No.: " + tranId + "</td></tr>";
    content += "</table>";
    content += "</div>";
} 
```

**HTML：**

```
<style type="text/css" media="print">

  div#print-footer {
    position: fixed;
    right: 14px;
    bottom: 0;
    background-color: white
  }

</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:39:41.587

隐藏第一页的页脚

```
div#print-footer:nth-of-type(1) {
     ... css for hiding the footer
} 
```

顺便说一句，您不应该使用`id='print-footer'`它，因为它看起来不止一次出现。在您的 CSS 中使用`class='print-footer'`并用`#`点替换`.`

**编辑：**添加另一个变量来跟踪页面。如果需要，您也可以将其用作页码。

创建一个用于打印的全局

```
pageNo = 1; 
```

并省略第一页的页脚

```
if (lineNo > 35) {
  if (pageNo > 1) {
    content += "<div id='print-footer' width=100%>";
    content += "<table cellspacing=0 cellpadding=0 width=100% border=0>";
    content += "<tr><td style='font-family: Times New Roman; font-size:12px;'>Ref No.: " + tranId + "</td></tr>";
    content += "</table>";
    content += "</div>";
  }
  pageNo++;
} 
```

**编辑2：**

对于第一个解决方案，[**这个 jsfiddle**](http://jsfiddle.net/WxLYu/)中的一个简单示例可以查看第一个`print-footer`是如何隐藏的

# oracle - 学习甲骨文

> ID：11257421
> 
> 赞同：1
> 
> 时间：2012-06-29T07:00:23.930
> 
> 标签：oracle

我是甲骨文的新手。过去 3 年我一直在使用 SQL-Server。我想学习 Oracle 中的基本数据库查询，创建函数、存储过程和数据库还原、备份和附加等操作。

我需要安装 Oracle 客户端或服务器吗？Oracle 10g 是一个不错的选择吗？Oracle 的任何教程或链接都会有很大帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T07:15:14.567

查看 oracle 站点上提供的精美材料： [http](http://www.oracle.com/pls/db112/homepage) ://www.oracle.com/pls/db112/homepage 从为期 2 天的文档开始。

为什么要用10g？11g 已经存在了将近 5 年。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T07:36:28.613

Oracle 文档在线。[在这里](http://www.oracle.com/pls/db112/homepage/)找到它。

11g 文档有一些很好的概述内容。每个人都应该阅读[概念指南](http://docs.oracle.com/cd/E11882_01/server.112/e25789/toc.htm)。然而，不耐烦的人应该直接跳到[2 天 DBA 指南](http://docs.oracle.com/cd/E11882_01/server.112/e10897/toc.htm)或[2 天开发人员指南](http://docs.oracle.com/cd/E11882_01/appdev.112/e10766/toc.htm)。

我建议你学习 11g，除非你有充分的商业理由来学习更历史的版本。您可以从[Oracle Technet](http://www.oracle.com/technetwork/database/enterprise-edition/downloads/112010-win32soft-098987.html)下载它。OTN 许可证允许我们安装 Oracle 软件以进行自学。因此，您可以在笔记本电脑上安装企业版来自学 Oracle，但不能使用它为客户构建系统。

# java - Jsoup 什么也没做

> ID：11257428
> 
> 赞同：-1
> 
> 时间：2012-06-29T07:00:53.630
> 
> 标签：java, android, html, jsoup

我在我的 xml 文件中设置了权限，据我所知，我正在一个新线程中运行连接。这个程序非常基础，我什么也得不到。

我想要程序做的就是从网站上读取所有的 HTML 代码。

我在这里有我的主要课程：

```
package com.example.beem;

import java.util.concurrent.Callable;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.support.v4.app.NavUtils;

public class Beamer extends Activity {

    Button checkbutton;
    TextView title;
    TextView status;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_beamer);

        checkbutton = (Button) findViewById(R.id.checker);
        title = (TextView) findViewById(R.id.title);
        status = (TextView) findViewById(R.id.status);

        checkbutton.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                status.setText("*click*");
                status.setText("loading");
                Callable <String> call = new threadWebRead();

                try {
                    String dub = call.call();
                    status.setText(dub);
                } catch(Exception e) {}         
            }
        });
    }
} 
```

我的实现可调用的类在这里：

```
package com.example.beem;

import java.util.concurrent.Callable;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

import android.util.Log;

public class threadWebRead implements Callable{

    public String call() throws Exception {

        // TODO Auto-generated method stub
        Document doc = 'Jsoup.connect("http://www.spring8.or.jp/ext/ja/status/text.html").get();
        String title = doc.title();

        return title;
    }
} 
```

`Jsoup`在我弄清楚如何阅读所有 HTML 之前，我只是想先看看是否会起作用，但似乎什么也没发生。事实上，我在这里尝试了很多从网站读取 HTML 的示例，但它们似乎都不起作用！有人说 `Jsoup`让事情变得更容易，但我没有任何运气。

编辑，事实上，我认为它实际上并没有成功地在线程中执行连接线。

一些帮助将不胜感激，谢谢。

来自应用程序的[日志。](http://justpaste.it/1381)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T21:15:25.690

Your problem is not related to the Jsoup.

```
try {
    Document doc = Jsoup.connect("http://www.spring8.or.jp/ext/ja/status/text.html").get();
    System.out.println(doc.title());
} catch (IOException e) {} 
```

This prints the correct title: "SPring8 status"

# r - R排序列

> ID：11257430
> 
> 赞同：1
> 
> 时间：2012-06-29T07:00:59.670
> 
> 标签：r

我有一个在 R 中加载了几列的文件。我想要实现的是根据每个列中的最小值对文件的列进行排序。例如

输入(minA=0,minB=3,minC=1)
ABC
4 8 1
2 3 4
0 3 1

输出
ABC
4 1 8
2 4 3
0 1 3

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T07:53:53.087

你可以[`apply()`](http://stat.ethz.ch/R-manual/R-devel/library/base/html/apply.html)这样试试：

```
mins <- apply(myData, 2, min)
o <- order(mins)
myData <- myData[,o] 
```

# java - java - 休眠保存并从数据库读取

> ID：11257431
> 
> 赞同：0
> 
> 时间：2012-06-29T07:01:00.587
> 
> 标签：java, hibernate

我是 Java 新手并使用休眠。

我在我的代码数据点实例中添加了：

```
Datapoint dp = new Datapoint();
dp.setDataset(dataset);
dp.setStation(station); 
```

我运行 dataset.getDatapointCount() 函数，该函数必须使用数据集 id 计算 dp：

```
public int getDatapointCount()
    {

        Criteria        crit = Database.getSession().createCriteria(Datapoint.class);

        crit = crit.add(Restrictions.eq("dataset", this));
        crit.setProjection(Projections.rowCount());

        Integer         result = (Integer)crit.uniqueResult();

        return result.intValue();
    } 
```

我得到了 0 个数据点。（运行完成后，我看到数据库中的新数据点）。

我添加了

```
 Database.getSession().flush(); 
```

在 getDatapointCount() 函数之前并真正返回新数字（例如 1000）

但在运行结束时，数据点没有保存在数据库中！

另外，如果我在 filush() 之后写了 getDatapointCount() 两次，我就进入了第一个

一次正确答案（1000），第二次没有正确答案（0）

有人能帮我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:57:48.777

你用的是什么值`FlushMode`？

未提交的事务可能是您的数据未保存到数据库的原因。

请参阅[休眠刷新模式文档](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/FlushMode.html)

# javascript - eval 的最大字符串长度

> ID：11257432
> 
> 赞同：4
> 
> 时间：2012-06-29T07:01:22.453
> 
> 标签：javascript, json, eval

我有一个长度为 65000 的字符串，需要对其进行`eval`编辑才能将其转换为 JSON 对象。
我收到意外的令牌错误。我想知道是否有任何最大字符串长度超过了`eval`不起作用的长度？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T07:03:26.463

您总是可以尝试通过 JSON 解析器运行它。

```
var obj = JSON.parse(str); 
```

# sql-server - 无法在 iis7 上的本地计算机上显示经典 asp 页面

> ID：11257442
> 
> 赞同：0
> 
> 时间：2012-06-29T07:02:06.170
> 
> 标签：sql-server, iis, asp-classic, connection-string

我是经典 asp 部署的新手。我已经在 windows7 的 iis7 上的本地机器上部署了我的经典 asp 项目。

当我从 iis 浏览我的网站时，它会显示主页，但是当我单击页面上的搜索按钮时，该按钮应重定向到**search.asp**，但该页面未显示，也未显示任何错误。
它显示`The website cannot display the page`.

sqlserver版本：2008

我的连接字符串：

```
MM_mtyadi_STRING.Open "Provider=SQLOLEDB;Data Source=.\SQLEXPRESS;Initial Catalog=MYDB;Integrated Security=True;" 
```

我的html代码是：

```
<a href="html/search.asp"><img src="images/search.gif" width=351 height=51 border="0"> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T00:01:04.217

如果你使用的是 IIS7 经典 asp 有自己的错误报告设置。在 IIS 管理器中，您必须双击 ASP 才能弹出属性页。

展开：调试属性：将向浏览器发送错误设置为：TRUE

这将为您提供详细的经典 asp 错误，您可以在其中了解您的代码在哪里被破坏。

# objective-c - 如何在 OSX 中创建 Helper 应用程序？

> ID：11257443
> 
> 赞同：3
> 
> 时间：2012-06-29T07:02:11.847
> 
> 标签：objective-c, cocoa

> **可能重复：**
> [如何在 Xcode 4 中协同设计和沙盒助手应用程序？](https://stackoverflow.com/questions/11231712/how-to-codesign-and-sandbox-helper-application-in-xcode-4)

这些天来，我在使用 OSX 应用程序的帮助程序时遇到了一些问题。我需要创建一个包 ID 与包含此帮助器的“父”应用程序不同的帮助器应用程序。

我很确定我所有的问题都与 Helper 的创建及其包含在 Main App 中有关。

我执行以下步骤：

1.  我创建了 2 个项目，一个用于 MainApp，一个用于 Helper

2.  我构建 HelperApp（及其代码符号和权利）

3.  我通过“捆绑阶段”中的“复制文件”将 Helper.app 文件添加到 MainApp

4.  我构建 MainApp（及其代码符号和权利）

最终应用程序按预期工作，但 HelperApp 的权利在验证 MainApp 存档期间会产生错误，因此我无法提交应用程序。

你觉得这些步骤怎么样？他们是正确的吗？Helper App 的权利和沙盒呢？

编辑---我使用 XCode 对我的应用程序进行 codosign，但我意识到许多开发人员使用`code sign`来自终端的命令。这可能是问题的一部分吗？

# android - 如何在android视频播放器上手动绘制圆形、矩形

> ID：11257444
> 
> 赞同：8
> 
> 时间：2012-06-29T07:02:16.447
> 
> 标签：android

我只想在android的视频播放器（视频播放时）上手动绘制圆形、矩形或其他东西。这可能吗？如果有任何代码示例更好。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:42:01.203

你的问题已经有了答案：

[看这里](https://stackoverflow.com/questions/2933882/how-to-draw-an-overlay-on-a-surfaceview-used-by-camera-on-android)

**从帖子中引用：**

> `SurfaceView``View`在这方面可能不像普通人那样工作。
> 
> 相反，请执行以下操作：
> 
> 1.  将您的`SurfaceView`内部 `FrameLayout`或`RelativeLayout`布局 XML 文件中，因为这两者都允许在 Z 轴上堆叠小部件
> 2.  将您的绘图逻辑移动到一个单独的自定义`View`类中
> 3.  将自定义 View 类的实例作为`FrameLayout`or 的子级添加到布局 XML 文件中`RelativeLayout`，但让它出现在`SurfaceView`
> 
> 这将导致您的自定义`View`类看起来漂浮在 `SurfaceView`.

还有一个您需要的示例项目

[看这里](https://github.com/commonsguy/vidtry/)

# c - PCM 下采样：输入帧/输出帧与缓冲区大小

> ID：11257447
> 
> 赞同：1
> 
> 时间：2012-06-29T07:02:42.250
> 
> 标签：c, pcm, resampling, downsampling

我有一个程序读取

```
4096 frames (16384 bytes)
16bit LE
48000 Hz
PCM 
```

每次从内核模块“读取”到一个 16384 字节的大缓冲区（= 从 ALSA 的环形缓冲区读取）。

每次“读取”后，我必须将 48 kHz 下采样到 44.1 kHz，并且输出必须更小/等于 4096 帧（流式传输到 Apple 的 Airport Express）。

它已经工作了，但是输出听起来“太快”并且“闪烁”（我认为是由于“读取”中的帧丢失，如下所述），然后有时会停止（我认为“太快”会导致“等待数据” ）。

对于重采样，我使用[libsamplerate](http://www.mega-nerd.com/SRC/api_full.html#Process)中的[src_process](http://www.mega-nerd.com/SRC/)（又名 Secret Rabbit Code）：

```
int src_process (SRC_STATE *state, SRC_DATA *data) ; 
```

具有以下参数：

```
 data_in       : A pointer to the input data samples.
  input_frames  : 4096
  data_out      : A pointer to the output data samples.
  output_frames : 4096
  src_ratio     : 44100 / 48000 -> 0,91875 
```

当我错过了 ALSA 内部环形缓冲区中的一些帧时，我的内核模块会告诉我，这会发生。

我缺少大约 100 帧/“读取”。

也许有人理解这个问题并可以说“4096 帧缓冲区太小”或其他内容。

同时我会重新检查我的代码。

# android - android 中的 System.exit()

> ID：11257449
> 
> 赞同：9
> 
> 时间：2012-06-29T07:02:46.857
> 
> 标签：android, system.exit

我知道不应该使用 system.exit(0) 。我已经阅读了很多教程，并说明了为什么不建议将它用于退出应用程序，而 finish() 是一个更好的选择，但在极少数情况下，当使用这种肮脏的解决方法时，我的主要问题是 **它是否会损害 android 设备或任何方面如果使用设备？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T07:17:00.673

简短的回答：不。

长答案：不，它不会损害设备或设备的任何方面。它只是从内存中删除应用程序并清理所有使用的资源。如果您打开了任何文件，它们可能会损坏，但文件系统不会。Android 应该释放您当时正在使用的所有资源（GPS、WiFi 等），但它们可能处于未定义状态。比较`System.exit()`应用程序崩溃的影响：这也不会影响您的设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T07:09:11.777

`System.exit(0)`由于以下原因，不建议在应用程序的“main”方法之外调用任何地方。

1.  这是重用代码的障碍。

2.  它使单元测试变得困难。例如，如果您的代码在某些测试执行某些错误处理时调用 System.exit，它将在遇到`System.exit(0)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T07:22:23.137

它不会损害您的设备。唯一棘手的一点是，由于异步意图广播/接收架构，Android 可以立即让您的应用恢复活力。假设您刚刚广播了您的应用程序的活动正在收听的内容。然后你退出。但是 android 会让你的应用恢复活力来处理广播。

# ios - xcode shortcut key import h file and add the Delegate methods

> ID：11257454
> 
> 赞同：2
> 
> 时间：2012-06-29T07:03:31.900
> 
> 标签：ios, objective-c, xcode, shortcut

I am new iOS development but I know android at eclipse. For example I am lack a package, I can use `ctrl`+`shift`+`o` to import the package,if there is shortcut key at Xcode can help to import the `.h` file. Because sometimes I do not know my methods from which `.h` file. you know when I add new Delegate to `.h` file,how to use shortcut key help me to add the need implement methods.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T07:05:43.683

You don't have that in Xcode, and honestly, at least in my perspective, I never really had the need to have it (and I am coming from an Android background). If you know what class you are using, you just have `#import` or `@class` it. I prefer this way because it makes you aware of the dependencies between classes.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T07:11:18.977

I don't know of any shortcut for that. But you can Option-Click the delegate in your source code to get QuickHelp and from there you can open the Documentation with a list of all the methods in the protocol.

And usually protocol methods start always the same. For instance UITableViewDelegate methods all start with `tableView:` (like `tableView:didSelectRowAtIndexPath:`). If you know that, and are only unsure about the rest, or the type of the parameters, you can simply start typing `-tableView` at the beginning of a line and XCode will list all the possible methods for you.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-30T09:09:22.023

A bit late, but a plugin will do the job for you:

[https://github.com/markohlebar/Peckham](https://github.com/markohlebar/Peckham)

# c++ - 如何找到一些宏的来源

> ID：11257455
> 
> 赞同：32
> 
> 时间：2012-06-29T07:03:46.453
> 
> 标签：c++, c, macros

定义宏的地方很多，当我们在自己的项目中定义宏时，很容易找到它们的定义位置。但是当我尝试学习一些著名的开源项目时，我经常被一个问题所困扰：在哪里可以找到宏的来源，如果我无法得到它的定义，我将无法理解其中的一些（例如其中一些）可以通过他们的名字猜到）。例如，来自 apache 的一些声明：

```
#if defined(__osf__) && defined(__alpha),

#elif defined(__NSIG) 
```

据我所知，我知道宏有一些可能的起源位置：

1.  从这个项目本身，在一些源文件中（这是最简单的，因为我们可以通过一些工具找到它）
2.  从一些第 3 个库的一些头文件中，我们可以 grep 它
3.  来自 c/c++ 标准头文件（它们在 linux 中的什么位置？）
4.  来自操作系统（它们在 linux 中的什么位置？）
5.  由配置工具自动生成（很苦，我不知道）
6.  从 gcc/g++ 之类的编译工具，或者在 makefile 中我们可以定义一些宏

我有一些问题要咨询：

1.  如何区分 os 定义和 gcc/g++ 定义和配置工具生成的宏？它们各自有什么特点吗？
2.  如何找到由 os 或标准 C 或编译器定义的源？例如，使用`grep`或`find`实用程序
3.  `__strange___`整机( ) 梳理找不到一个宏是什么意思`cd /;grep __strange___ -r`？

感谢您告诉它们的原理和区分它们的方法，并找到它们的来源！

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2015-05-07T10:51:22.937

找出宏在何处定义的一种简单、快速的方法是重新定义宏并检查编译器的警告/错误消息。

```
#include <windows.h>
#define min(a,b) nonsense

mintest.cpp(3) : warning C4005: 'min' : macro redefinition
    C:\Programme\Microsoft SDKs\Windows\v6.0A\include\windef.h(194) : see previous definition of 'min' 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-29T11:02:25.910

> 1.  如何区分 os 定义和 gcc/g++ 定义和配置工具生成的宏？它们各自有什么特点吗？

绝大多数是在某个头文件中定义的。`gcc -dN -E`可以在这里提供帮助。警告：如果您使用这种方法，您需要`gcc -dN -E`使用相同的包含路径、相同的`-D<name>`命令行选项、相同的环境变量（例如`CPATH`，...）来调用，就像您将源文件编译为目标文件时所做的那样。

> 1.  如何找到由 os 或标准 C 或编译器定义的源？例如，使用 grep 或查找实用程序

实时调频。阅读精美的手册。

> 1.  `__strange__`整机梳理找不到一个宏是什么意思`(cd /;grep __strange___ -r)`？

这可能只是意味着您的计算机上没有定义该符号。假设有问题的代码来自某个开源包，该包针对大量不同系统、不同编译器，其中一些不太符合 C++ 标准。典型的做法是`#ifdef __some_bizarre_os__`在代码的关键部分使用。该符号只会在运行 Bizarre OS 的机器上定义 - 而不是在你的机器上。

不幸的是，这不是唯一的情况。即使您的 grep 无法在任何地方找到该符号，也可以很好地定义该符号。makefile 可以连接两个字符串，`-D__str`并`ange__`形成编译器的单个命令行参数。该选项`-D__strange__`可能隐藏在 makefile 使用的环境变量之一中。某些项目要求的 ~/.tcshrc 文件可能非常复杂。

**更新**
`gcc -dM -E`显示宏的定义，但不显示它们的定义位置。一个更好的选择是使用`gcc -dN -E`然后过滤掉不以首字母开头的行`#`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-29T07:18:27.923

gcc 编译器定义的宏可以通过

```
gcc  -dM -E a.c 
```

除此之外，它们都来自包含的文件和来源。

如果找不到宏，则意味着条件将被评估为假。

您还可以使用 -v 选项，它显示它在哪里找到它的默认包含目录。

要找出宏来自哪个文件：

```
gcc -E $your_compile_options $your_c_file | \
egrep "^# " | grep -v '<'| cut -f 2 -d '"' | \
sort | uniq |
while read line
    do
            grep -l $your_macro $line
    done 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-09T07:53:58.567

正如其他人所说，应该使用`gcc`其中一个选项来**找出宏的定义位置**。这些选项不是由 输出的，因此必须使用[手册](http://gcc.gnu.org/onlinedocs/gcc-4.9.0/gcc/)，第[3.11](http://gcc.gnu.org/onlinedocs/gcc-4.9.0/gcc/Preprocessor-Options.html#Preprocessor-Options)章，搜索来阅读它们。`-d`**`gcc -v --help``-dCHARS`**

 **最后我的步骤是：

1.  利用`gcc ... -E -dD`
2.  在输出文件中找到定义
3.  向后搜索`#`（哈希和空格）以显示文件

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-29T07:45:52.500

看起来这些宏是编译常量。

使用这样的宏告诉编译器这部分代码需要编译，而这部分代码不需要编译，这是一个很好的做法。

如果您无法在项目工作区中搜索它们，那么您应该通过程序流程并确定您的应用程序需要哪一部分代码并定义相应的宏。

例如;

```
#ifdef (_CASE1_)

...
...
...

#elif (_CASE2_)

...
...
...

#endif 
```

现在在上面的例子中，如果`_CASE1_`你的应用程序需要下面的代码，那么你必须定义`_CASE1_`. 例如`#define _CASE1_`

希望能帮助到你...

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-29T07:30:44.613

如果您正在研究一些开源项目，我假设您已经对其进行了设置，以便您可以构建它。选择一个包含您要查找的宏的文件，然后使用您的编译器生成一个预处理文件。实际选项取决于您使用的编译器，它是 gcc 的 -E，您可以[在此处](http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html)找到更多信息。

请注意，您可能必须使用项目的构建系统来实际编译文件并查看预处理器运行成功所需的选项。

一旦你有你的预处理文件，只需搜索你的宏。有一些预处理器选项可以为每个包含的文件生成路径名。

更新：这种方法显然不起作用，因为您的宏由处理器扩展。所以，除非你能认出它的扩展形式或效果，否则它几乎没有用处。

可能更有用的是让编译器打印出包含文件的确切顺序。这是在 gcc 中使用 -H 选项实现的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-25T17:59:15.087

我通常觉得 Vim 就足够了：`CTRL-W CTRL-I`而且`[I`是我的最爱。（这些是各种标识符，并且`CTRL-W CTRL-D`仅`[D`适用于宏。）您可以键入`:help include-search`可用命令的整个列表。

要使这些工作正常，您应该`path`正确设置 Vim 中的选项。键入`:set path?`以查看您的当前设置。运行`gcc -v -E -x c++ - </dev/null`、查找`#include <...> search starts here:`并复制目录并将它们添加到您的`path`（在您的`.vimrc`）中。（我所做的是提取目录并将它们存储到 中的环境变量中`.bash_profile`，并在 my 中引用它`.vimrc`，如 中`set path=$INCLUDE_PATH`。）您可能还需要将任何特定于项目的包含目录添加到您的目录中`path`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-29T07:29:55.190

您应该使用像 Eclipse 这样的 IDE，您可以在其中简单地右键单击宏并单击打开声明，它会将您发送到文件并定义宏。

有时某些宏甚至没有在头文件中定义，因为它们作为标志提供给 gnu 编译器（例如：-DMYMACRO）。**

# android - 如何沿行进方向向身体施加力（Box2D）？

> ID：11257462
> 
> 赞同：5
> 
> 时间：2012-06-29T07:04:10.480
> 
> 标签：android, box2d, andengine

我正在使用 AndEngine/Box2d 开发游戏。我有一个在屏幕上弹跳的球。我已经通过施加相反的力成功地使它忽略了重力，但是即使弹性设置为1，它也会在初始冲动后减速。基本上我想：

if(speed < *a number* ) 在运动方向上施加力或冲量（哪个更好？）

我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T20:02:12.070

不幸的是，球正在与其他物体相互作用，因此设置速度不起作用，但我找到了解决方案！

使用力量和相当广泛的三角，我终于想出了：

```
private static class Ball extends Sprite  {
    Body body;

    public Ball(final float pX, final float pY, final ITextureRegion pTextureRegion, final VertexBufferObjectManager pVertexBufferObjectManager) {
        super(pX, pY, pTextureRegion, pVertexBufferObjectManager);
        body = PhysicsFactory.createCircleBody(mPhysicsWorld, this, BodyType.DynamicBody, PhysicsFactory.createFixtureDef(0, 1, 0));
        body.applyLinearImpulse(((float)5),(float) 5, body.getWorldCenter().x,  body.getWorldCenter().y);
        mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(this, body, true, true));
        scene.attachChild(this);
    }

    @Override
    protected void onManagedUpdate(final float pSecondsElapsed) {       
        body.applyForce(new Vector2(0,-SensorManager.GRAVITY_EARTH), new Vector2(body.getWorldCenter()));

        float vx = body.getLinearVelocity().x, vy = body.getLinearVelocity().y, vr=(float) Math.sqrt(vx*vx+vy*vy);
        float t= (float) Math.atan(Math.abs(vy/vx));
        if(vr<destroyerVelocity){
            if(vx>0&&vy<0)
                body.applyForce((float) ((destroyerVelocity-vr)*Math.cos(t)*body.getMass()), (float) (-(destroyerVelocity-vr)*Math.sin(t)*body.getMass()), body.getWorldCenter().x,  body.getWorldCenter().y);
            else if(vx>0&&vy>0)
                body.applyForce((float) ((destroyerVelocity-vr)*Math.cos(t)*body.getMass()), (float) ((destroyerVelocity-vr)*Math.sin(t)*body.getMass()), body.getWorldCenter().x,  body.getWorldCenter().y);
            else if(vx<0&&vy>0)
                body.applyForce((float) (-(destroyerVelocity-vr)*Math.cos(t)*body.getMass()), (float) ((destroyerVelocity-vr)*Math.sin(t)*body.getMass()), body.getWorldCenter().x,  body.getWorldCenter().y);
            else if(vx<0&&vy<0)
                body.applyForce((float) (-(destroyerVelocity-vr)*Math.cos(t)*body.getMass()), (float) (-(destroyerVelocity-vr)*Math.sin(t)*body.getMass()), body.getWorldCenter().x,  body.getWorldCenter().y);
        }
        if(vr>destroyerVelocity){
            if(vx>0&&vy<0)
                body.applyForce((float) (-(vr-destroyerVelocity)*Math.cos(t)*body.getMass()), (float) ((vr-destroyerVelocity)*Math.sin(t)*body.getMass()), body.getWorldCenter().x,  body.getWorldCenter().y);
            else if(vx>0&&vy>0)
                body.applyForce((float) (-(vr-destroyerVelocity)*Math.cos(t)*body.getMass()), (float) (-(vr-destroyerVelocity)*Math.sin(t)*body.getMass()), body.getWorldCenter().x,  body.getWorldCenter().y);
            else if(vx<0&&vy>0)
                body.applyForce((float) ((vr-destroyerVelocity)*Math.cos(t)*body.getMass()), (float) (-(vr-destroyerVelocity)*Math.sin(t)*body.getMass()), body.getWorldCenter().x,  body.getWorldCenter().y);
            else if(vx<0&&vy<0)
                body.applyForce((float) ((vr-destroyerVelocity)*Math.cos(t)*body.getMass()), (float) ((vr-destroyerVelocity)*Math.sin(t)*body.getMass()), body.getWorldCenter().x,  body.getWorldCenter().y);
        }
        super.onManagedUpdate(pSecondsElapsed);
    }
} 
```

本质上，它的作用是创建一个身体并对其施加冲动以使其移动（由于某种原因比力好得多）。每次更新时，都会施加与重力相反的力，以使球保持在空中（基本上是浮动的）。弹性设置为 1，因此碰撞几乎是完全弹性的。现在是棘手的部分：我计算了 x 和 y 速度（分别为 vx 和 vy）并使用它们来计算合成速度（vr）和它们行进的角度（t）。

如果 vr 小于我想要的速度（destroyerVelocity），则施加一个力将其撞回驱逐舰速度。由于 F=mv/t 并且我只使用 t=1，所以在一个方向上施加的力等于所需速度 - 实际速度 * x/y（即 cos/sin）* 物体的质量。如果物体沿 x 正方向和 y 负方向行进，则施加 (x,-y) 的力，依此类推。

为了使速度尽可能接近驱逐舰的速度，如果恰好大于驱逐舰的速度，我必须向相反方向施加一个力。这是以相同的方式完成的，只是使用了相反的力量。

运行结果速度的日志语句（destroyerVelocity 为 7），它的内容如下：6.900001、6.9995001、7.00028、7.13005、...

虽然球有时会飙升到 15 或 20，但通常只需要 2 或 3 圈就可以在 7 的 +- .5 范围内，这对我来说已经足够了！希望这可以帮助其他寻找相同事物的人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T07:27:16.747

要在移动方向上施加连续的力，您可以使用以下代码。

```
Vector2 velocity = this.getBody().getLinearVelocity();
        preX = velocity.x / (Math.abs(velocity.x));
        preY = velocity.y / (Math.abs(velocity.y));

        if (Math.abs(velocity.x) < 5) {
            this.body.setLinearVelocity(preX * 5, velocity.y);
        }
        if (Math.abs(velocity.y) < 5) {
            this.body.setLinearVelocity(velocity.x, preY * 5);
        } 
```

编辑 ：

```
currentVelocity = bulletBody.getLinearVelocity();

                    if (currentVelocity.len() < speed
                            || currentVelocity.len() > speed + 0.25f) {

                        velocityChange = Math.abs(speed
                                - currentVelocity.len());
                        currentVelocity.set(currentVelocity.x
                                * velocityChange, currentVelocity.y
                                * velocityChange);

                        bulletBody.applyForce(currentVelocity,
                                bulletBody.getWorldCenter());
                    } 
```

这是您必须在管理更新方法或更新处理程序中编写的另一个代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T16:10:32.557

如果球没有与其他任何东西相互作用，那么使用 SetLinearVelocity 应该没问题，它比计算力/脉冲 (C++) 更简单：

```
b2Vec2 currentDirection = body->GetLinearVelocity();
currentDirection.Normalize();
body->SetLinearVelocity( 5 * currentDirection ); 
```

需要注意的是，这只能在球自由运动时进行。如果它正好在从墙壁或世界上其他东西反弹的中间，这将导致问题。因此，在执行此操作之前，您需要确保它没有触及任何东西。如果 GetContactList() 返回 null 则主体没有接触任何东西。

这种调整应该足够便宜，可以在每个时间步中进行，但由于速度在再次击中某物之前不会改变，你甚至可以在反弹结束后只做一次。您可以使用接触侦听器并在 EndContact 回调中检查球是否仍在接触某物，如果没有，则在时间步结束后标记身体以进行调整。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T10:52:04.793

我在我的更新功能中使用它来保持球的速度。

```
 speed = ball.getLinearVelocity().length()
    maxSpeed = 10;

        if (speed > maxSpeed ){
            ball.setLinearDamping(0.5);
        }
        else if (speed < maxSpeed) {
            ball.setLinearDamping(0.0);
        }
        if (speed < maxSpeed ){

            var currentVelocity = ball.getLinearVelocity();

            currentVelocity.set(currentVelocity.x * 1.1, currentVelocity.y * 1.1);

            ball.applyForce(currentVelocity,ball.getWorldCenter());         
} 
```

# php - 如果第二个表中没有匹配项，则 PHP mySQL 获取数据

> ID：11257466
> 
> 赞同：0
> 
> 时间：2012-06-29T07:04:30.633
> 
> 标签：php, mysql

以下代码应该返回与另一个表中的参数匹配或根本不匹配 ID 的结果。

这是我的尝试，我不明白为什么它不起作用。它返回结果数的许多倍。

```
SELECT *
  FROM table2, table1
  WHERE table1.ID = table2.name 
        AND table1.value = 1 
        OR table1.ID != table2.name 
```

如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:07:27.313

Looks like you need some parenthesis

```
FROM table2, table1 WHERE (table1.ID = table2.name AND table1.value = 1) OR table1.ID != table2.name

FROM table2, table1 WHERE table1.ID = table2.name AND (table1.value = 1 OR table1.ID != table2.name) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T07:08:15.787

You can do two things:

*   A left outer join (or right)
*   Or a full outer join

Look to here for an explanation of them: [http://www.w3resource.com/sql/joins/perform-a-full-outer-join.php](http://www.w3resource.com/sql/joins/perform-a-full-outer-join.php)

```
SELECT *
  FROM table2, table1
  WHERE table1.ID = table2.name(+) 
        AND table1.value = 1 
```

An example up, there, untested but I think it'll work

# ruby-on-rails - Rails 3 - 使用嵌套资源提交表单时出现路由错误

> ID：11257467
> 
> 赞同：0
> 
> 时间：2012-06-29T07:04:43.357
> 
> 标签：ruby-on-rails, ruby, resources, nested

我对 Rails 完全陌生，在让我的嵌套资源/模型工作时遇到了很多麻烦。每当我尝试提交表单时，都会遇到路由错误。

```
No route matches {:action=>"show", :controller=>"tests", :test_suite_id=>#<Test id: 8, name: "1", test_type: "1", result_type: "1", input: "1", created_at: "2012-06-29 07:01:11", updated_at: "2012-06-29 07:01:11", date: "1", test_suite_id: 4>} 
```

有人可以向我解释为什么在异常输出中出现太多 test_suite_id 以及为什么操作是“show”而不是“index”？当我提交表单时，我想回到索引 /test_suites/:test_suite_id/tests。

以下是所有相关代码：

路线.rb

```
 resources :test_suites do
    resources :tests
  end 
```

测试控制器.rb

```
class TestsController < ApplicationController
    # GET /tests
    # GET /tests.json
    def index

        @testsuite = TestSuite.find(params[:test_suite_id])
        @tests = @testsuite.tests

        respond_to do |format|
            format.html # index.html.erb
            format.json { render json: @tests }
        end
    end

    # GET /tests/1
    # GET /tests/1.json
    def show
        @testsuite = TestSuite.find(params[:test_suite_id])
        @test = @testsuite.tests.find(params[:id])

        respond_to do |format|
            format.html # show.html.erb
            format.json { render json: @test }
        end
    end

    # GET /tests/new
    # GET /tests/new.json
    def new
        @testsuite = TestSuite.find(params[:test_suite_id])
        @test = @testsuite.tests.build

        #@test = Test.new
        @test.build_hardware
        @test.build_software

        respond_to do |format|
            format.html # new.html.erb
            format.json { render json: @test }
        end
    end

    # GET /tests/1/edit
    def edit
        @test = Test.find(params[:id])
    end

    # POST /tests
    # POST /tests.json
    def create

        @testsuite = TestSuite.find(params[:test_suite_id])
        @test = @testsuite.tests.build(params[:test])

        respond_to do |format|
            if @test.save
                flash[:notice] = "Test Added Succesfully"
                format.html { redirect_to [:test_suite, @test], notice: 'Test was successfully created.' }
                format.json { render json: @test, status: :created, location: @test }
                else
                format.html { render action: "new" }
                format.json { render json: @test.errors, status: :unprocessable_entity }
            end
        end
    end
end 
```

_form.html.erb

```
<%= form_for([:test_suite, @test], :action => "index") do |f| %>
  <% if @test.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@test.errors.count, "error") %> prohibited this test from being saved:</h2>

      <ul>
      <% @test.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  <br />
  <h2>Test information</h2>

  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label :test_type %><br />
    <%= f.text_field :test_type %>
  </div>
  <div class="field">
    <%= f.label :result_type %><br />
    <%= f.text_field :result_type %>
  </div>
  <div class="field">
    <%= f.label :date %><br />
    <%= f.text_field :date %>
  </div>
  <div class="field">
    <%= f.label :input %><br />
    <%= f.text_area :input %>
  </div>
    <% end %>
  </div>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

耙路线：

```
 test_suite_new GET    /test_suite/new(.:format)                            test_suite#new
    test_suite_tests GET    /test_suites/:test_suite_id/tests(.:format)          tests#index
                     POST   /test_suites/:test_suite_id/tests(.:format)          tests#create
 new_test_suite_test GET    /test_suites/:test_suite_id/tests/new(.:format)      tests#new
edit_test_suite_test GET    /test_suites/:test_suite_id/tests/:id/edit(.:format) tests#edit
     test_suite_test GET    /test_suites/:test_suite_id/tests/:id(.:format)      tests#show
                     PUT    /test_suites/:test_suite_id/tests/:id(.:format)      tests#update
                     DELETE /test_suites/:test_suite_id/tests/:id(.:format)      tests#destroy
         test_suites GET    /test_suites(.:format)                               test_suites#index
                     POST   /test_suites(.:format)                               test_suites#create
      new_test_suite GET    /test_suites/new(.:format)                           test_suites#new
     edit_test_suite GET    /test_suites/:id/edit(.:format)                      test_suites#edit
          test_suite GET    /test_suites/:id(.:format)                           test_suites#show
                     PUT    /test_suites/:id(.:format)                           test_suites#update
                     DELETE /test_suites/:id(.:format)                           test_suites#destroy
                root        /                                                    home#index 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T07:57:42.307

该错误是由这两行的不一致引起的：

`resources :test_suites do`

`<%= form_for([:test_suite, @test], :action => "index") do |f| %>`

`resources`（相对于）的使用`resource`意味着一个集合（相对于单一资源）。嵌套在其中的资源不属于集合，但它们必须属于集合中的特定成员。

在你的`form_for([:test_suite, @test])`你说你想要一个属于名为“test_suite”的单一资源的表单。

您要么需要将父资源更改为单数，要么传入特定`test_suite`实例（即：）`form_for([@a_test_suite_instance, @test])`。

# jsf-2 - 最佳 NUMBER_OF_VIEWS_IN_SESSION

> ID：11257469
> 
> 赞同：1
> 
> 时间：2012-06-29T07:04:52.957
> 
> 标签：jsf-2

我有一个基于向导的屏幕，允许用户转到下一页和上一页。在后面或后面，我提交页面并使用 @SessionScoped 托管 bean 将表单保存在会话中。如果我将 NUMBER_OF_VIEWS_IN_SESSION 保留为默认值 20，则功能可以正常工作，但将其减少到 10 以下会停止页面流（不显示错误）。这里有什么问题以及如何优化 NUMBER_OF_VIEWS_IN_SESSION 的大小？

```
 <context-param>
        <param-name>org.apache.myfaces.NUMBER_OF_VIEWS_IN_SESSION</param-name>
        <param-value>1</param-value>
 </context-param> 
```

我正在使用 MyFaces。

# validation - 返回 HTTP 409 是否适合验证检查？

> ID：11257470
> 
> 赞同：11
> 
> 时间：2012-06-29T07:04:53.353
> 
> 标签：validation, http, http-status-codes

我有一项服务，必须先检查一些验证规则，然后才能进行特定操作。

例如，如果未满足所有验证规则，则客户端不应生成可打印的报告。

但是，单个客户端可能没有所有必需的信息（该用户可能只能访问用于确定验证成功的数据子集），因此必须向服务器发送请求：基本上“是和“`thing`之间有效。`start``finish`

响应将是某种指示的令牌`VALID: FEEL FREE TO CONTINUE`，或者是验证失败原因的列表，可以呈现给用户。

很明显，成功的验证将返回一个`200 OK`. 但我不认为成功状态代码适用于验证失败。我倾向于 a `409 Conflict`，但我只用它来拒绝 a `PUT`or `POST`。由 a 指示验证失败是否有效（窃笑）`409`，还是有更好的方法？

注意：执行的操作不是在服务器上执行的，因此跳过此检查，只是尝试该操作，`403`在操作被禁止的情况下使用 a 不是一个选项。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-16T07:54:36.363

您已向服务器发送请求以执行验证。它已成功执行所述验证。从 HTTP 的角度来看，请求的格式很好，并且由服务器正确处理。

所以我会说返回任何 HTTP 错误代码都是不正确的。

* * *

这个答案继续受到反对，我不完全确定为什么（似乎没有反对者留下任何评论）。通过与 OP 的大量反复讨论，我们确定此请求/响应的*全部*目的是执行验证。服务器收到请求，执行请求执行的验证，并将验证过程的结果返回给调用者。

客户端发送此请求绝对没有问题。

服务器理解请求。

该请求是有效的（从 HTTP 的角度来看）。

服务器可以处理请求。

服务器执行了 100% 的预期活动，并返回处理请求后产生的结果。

这就是为什么，正如我所说，我不认为 HTTP 错误代码是合适的。

即假设服务器公开了一个验证电子邮件地址的端点（对于您希望说可以执行验证的任何特定形式）。它收到一个请求说“验证 abc@invalid.org”并产生一个响应说“我查看了这个电子邮件地址，我希望你告诉用户我无法获得无效的有效 DNS 响应.org”。如果人们认为这里的 200 响应不正确，我很想*了解*他们的推理。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-27T16:15:33.323

虽然它仍然在提议的标准中定义，但它是`422 Unprocessable Entity`一个适当的状态。

> 422（Unprocessable Entity）状态码意味着服务器理解请求实体的内容类型（因此 415（Unsupported Media Type）状态码是不合适的），并且请求实体的语法是正确的（因此是 400（Bad Request） ) 状态码不合适）但无法处理包含的指令。

> 例如，如果 XML 请求正文包含格式正确（即语法正确）但语义错误的 XML 指令，则可能会出现这种错误情况。

参考：

*   [https://www.rfc-editor.org/rfc/rfc4918#section-11.2](https://www.rfc-editor.org/rfc/rfc4918#section-11.2)
*   [http://developer.github.com/v3/#client-errors](http://developer.github.com/v3/#client-errors)
*   [https://stackoverflow.com/a/2657624/247702](https://stackoverflow.com/a/2657624/247702)
*   [http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#4xx_Client_Error](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#4xx_Client_Error)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-20T14:49:46.850

如果您的 HTTP 资源的状态是“介于开始和结束之间”以解释您在这个公认的较老问题上的话，我想投票支持返回状态 202。它的优势是 2--“成功" 类型响应，因此笨拙的客户端不会将其视为损坏的页面，并且它在 HTTP 1.1 规范中声明的用途听起来像您想要的（尽管许多状态代码定义非常模棱两可）。

[规格链接](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.3)

摘抄：

```
202 Accepted

The request has been accepted for processing, but the processing has not been 
completed. The request might or might not eventually be acted upon, as it 
might be disallowed when processing actually takes place...

The 202 response is intentionally non-committal. Its purpose is to allow a server 
to accept a request for some other process (perhaps a batch-oriented process 
that is only run once per day) without requiring that the user agent's 
connection to the server persist until the process is completed. The entity 
returned with this response SHOULD include an indication of the request's 
current status and either a pointer to a status monitor or some estimate of 
when the user can expect the request to be fulfilled. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-13T18:38:42.290

通常情况下，如果不确切知道您在做什么、如何以及为什么等，很难给出准确的建议。例如：

> 我有一项服务，必须先检查一些验证规则，然后才能进行特定操作。

该服务是否提供本地代码？如果是这样，您应该向本地代码抛出异常或返回正常的东西。
它是否与 API 请求相关联？如果从表面上看是这样，我不明白为什么您要在单独的 REST 调用上进行验证，而不是在一个请求中完成所有操作。

> 但是，单个客户端可能没有所有必需的信息（该用户可能只能访问用于确定验证成功的数据子集），因此必须向服务器发送请求：基本上“是在开始和结束之间有效的东西”。

例如，我正在做出假设，但是例如，如果他们拥有所有必要的数据等，您可以让他们提出他们会提出的请求，并在那时进行验证。

> 响应将是某种指示 VALID: FEEL FREE TO CONTINUE 的令牌，或者是验证失败原因的列表，可以呈现给用户。

这就是为什么我建议我所拥有的，因为您的上述要求是：

1.  向 API 发送请求，API 执行 Validation 并返回响应；
2.  如果响应显示有效，则用户发送下一个响应以执行实际操作；
3.  如果响应显示无效，那么用户必须做一些事情并重试，直到他们得到有效的响应，然后他们仍然必须做实际的事情；

选择：

1.  向 API 发送请求，执行验证，如果有效则执行此操作，否则返回指示无效状态的响应；
2.  用户进行更改，再次发送一个请求以进行验证和实际操作；

> 注意：执行的操作不是在服务器上执行的，因此跳过此检查，只是尝试该操作，在禁止操作的情况下使用 403 不是一个选项。

如果这不是任何类型的 pf 远程/API 请求，那么我建议不要使用 HTTP 代码。这都是在同一个代码库中完成的吗？如果是这样，您的验证中会出现异常或布尔值等，以便向用户提供消息。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-15T23:55:21.417

我认为，只要您没有将代码误用于非预期的内容，那么它实际上归结为偏好和意见。409 可能可以用于验证失败，尽管我认为我个人更喜欢 200 以验证错误作为响应。我认为这使开发人员更容易检查常见的通信错误，例如 401 或 500，并在他们不必担心验证他们发送的数据之前进行处理。

# ruby-on-rails - 如何在 Heroku 上自动运行 Queue_Classic（或任何）rake 任务？

> ID：11257472
> 
> 赞同：1
> 
> 时间：2012-06-29T07:05:03.050
> 
> 标签：ruby-on-rails, heroku

我有一个使用 Queue_Classic gem 的 Rails 3.2 应用程序，并部署在 Heroku 上。

目前我的排队作业没有得到处理，除非我`heroku run rake qc:work`在命令行中运行。

我添加了一个包含以下内容的 Procfile：

```
worker:  bundle exec rake qc:work 
```

`heroku run rake qc:work`但除非我手动运行，否则仍然没有处理队列。

我错过了什么？

这个应用程序使用了独角兽，这会产生影响吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:06:27.630

通常，您的工作人员独立于您的 Web 进程运行。要运行一个工作者，您需要将您的进程形式设置为运行 1 个工作者：

```
$ heroku scale worker=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:35:05.097

*确保在您的主 Rakefile 中包含 queue_classic 和 queue_classic/tasks。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T10:05:03.260

经过一番挖掘，我想出了以下解决方案。

我不确定这是否是最好的方法，或者当我们扩展 Web 进程等时它会如何表现，但它现在正在工作。

我像往常一样设置独角兽，包括

```
#Procfile
web: bundle exec unicorn -p $PORT -c ./config/unicorn.rb 
```

然后我添加了以下配置

```
#unicorn.rb
worker_processes 3 
timeout 30

@qc_pid = nil

before_fork do |server, worker|
  @qc_pid ||= spawn( "bundle exec rake qc:work" )
end 
```

# java - 动态编译java源代码和反射调用问题

> ID：11257473
> 
> 赞同：0
> 
> 时间：2012-06-29T07:05:03.523
> 
> 标签：java

我得到了以下从教程中复制的代码：

```
package com.tom.labs;

import java.io.IOException;
import java.lang.reflect.Method;
import java.net.URI;
import java.net.URISyntaxException;
import java.util.Arrays;

import javax.tools.JavaCompiler;
import javax.tools.JavaCompiler.CompilationTask;
import javax.tools.SimpleJavaFileObject;
import javax.tools.StandardJavaFileManager;
import javax.tools.ToolProvider;

public class CompilerTest {

    /**
     * @param args
     */
    public static void main(String[] args) throws Exception {
        String source = "public class Main { " +
                " public static void main(String[] args) {" +
                "   System.out.println(\"Hello World!\");" +
                " }" +
                " public static void test() { " +
                " System.out.println(\"Hello World!\");" +
                " } " +
                "}";
        JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
        StandardJavaFileManager fileManager = compiler.getStandardFileManager(null, null, null);
        StringSourceJavaObject sourceObject = new CompilerTest.StringSourceJavaObject("Main", source);
        Iterable fileObjects = Arrays.asList(sourceObject);
        CompilationTask task = compiler.getTask(null, fileManager, null, null, null, fileObjects);
        boolean result = task.call();
        if (result) {
            ClassLoader loader = CompilerTest.class.getClassLoader();
            Class<?> clazz = loader.loadClass("com.tom.labs.Main");
            Method method = clazz.getMethod("test", new Class<?>[] {});
            method.invoke(null, new Object[] {});
        }
    }

    static class StringSourceJavaObject extends SimpleJavaFileObject {
        private String content = null;
        public StringSourceJavaObject(String name, String content) throws URISyntaxException {
            super(URI.create("string:///" + name.replace('.', '/') + Kind.SOURCE.extension), Kind.SOURCE);
            this.content = content;
        }
        public CharSequence getCharContent(boolean ignoreEncodingErrors) throws IOException {
            return content;
        }
    }
} 
```

但是，它不起作用。出现错误：线程“main”中的异常 java.lang.NoSuchMethodException：com.tom.labs.CompilerTest 的 java.lang.Class.getMethod(Class.java:1622) 处的 com.tom.labs.Main.test()。主要（CompilerTest.java:38）

有人可以帮帮我吗？更新：

我打印出 getMethods 的输出： [public static void com.tom.labs.Main.main(java.lang.String[]), public final void java.lang.Object.wait(long,int) throws java.lang .InterruptedException, public final native void java.lang.Object.wait(long) throws java.lang.InterruptedException, public final void java.lang.Object.wait() throws java.lang.InterruptedException, public boolean java.lang.Object .equals(java.lang.Object), public java.lang.String java.lang.Object.toString(), public native int java.lang.Object.hashCode(), public final native java.lang.Class java.lang .Object.getClass(), public final native void java.lang.Object.notify(), public final native void java.lang.Object.notifyAll()]

很奇怪，里面没有方法测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:49:50.417

你的“来源”

```
String source = "public class Main { " +
                " public static void main(String[] args) {" +
                "   System.out.println(\"Hello World!\");" +
                " }" +
                " public static void test() { " +
                " System.out.println(\"Hello World!\");" +
                " } " +
                "}"; 
```

没有命名空间。您应该为其添加一个包关键字，或者更改

```
Class<?> clazz = loader.loadClass("com.tom.labs.Main"); 
```

至

```
Class<?> clazz = loader.loadClass("Main"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T03:16:42.250

首先，您应该将包名称添加到您的类名中。

除了包名，请检查生成的类是否放在你的类路径中。这可以通过在调用编译任务时添加类输出文件夹选项来完成：

CompilationTask task = compiler.getTask(null, fileManager, null, Arrays.asList("-d", ""), null, fileObjects);

有一个很棒但轻量级的库可以在一次调用中完成您的工作，并完全在内存中编译源代码和加载类，请访问：

[在使用 JavaCompiler 从另一个应用程序中编译类文件之后，我该如何运行它？](https://stackoverflow.com/questions/13119904/after-using-javacompiler-to-compiler-class-files-from-within-another-application)

# nokia - 是什么让 n900 如此特别？

> ID：11257474
> 
> 赞同：-1
> 
> 时间：2012-06-29T07:05:22.460
> 
> 标签：nokia, cpu-architecture, n900

是什么架构方面让这款手机如此独特？我的意思是，深刻的人说n900“不仅仅是一部手机”。我听说你甚至可以运行 ubuntu、backtrack 和其他你不能在（比如说）Android 手机上做的事情。请解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T07:09:21.627

当然，它在硬件上与目前市场上的其他智能手机并没有太大区别。

然而，它是唯一一款运行 Maemo 的键盘手机，这是一个成熟的 Linux 发行版（与 Android 不同，Android 几乎所有东西都被锁定了）。所以，基本上，N900 不仅仅是一部手机（就像你普通的 Android 智能手机一样），而是一个口袋里的基于 linux 的 PC。

# java - 将文件保存到 SD 卡

> ID：11257483
> 
> 赞同：1
> 
> 时间：2012-06-29T07:05:56.277
> 
> 标签：java, android

.txt 文件需要保存在 SD 卡中。

```
Save("n" + String.valueOf(key) + ".txt");

 private void Save(String FileName){
         File fileName = null;
         String sdState = android.os.Environment.getExternalStorageState();

         if (sdState.equals(android.os.Environment.MEDIA_MOUNTED)) {
             File sdDir = android.os.Environment.getExternalStorageDirectory();
             fileName = new File(sdDir, "FlyNote/"+FileName);
             } else {
                 fileName = context.getCacheDir();
             }
         if (!fileName.exists())
             fileName.mkdirs();
         try {
             FileWriter f = new FileWriter(fileName);
             f.write(editText2.getText().toString());
             f.flush();
             f.close();
         } catch (Exception e) {

         }
     } 
```

但在 SD 卡中的文件另存为文件夹。文件夹“n5.txt”和其他...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T07:10:36.853

采用

```
File  dir= new File(sdDir.getAbsolutePath(), "FlyNote");
dir.mkdirs(); //CREATE DIR HERE
File  file = new File(dir, FileName);//CREATE FILE HERE 
```

代替

```
fileName = new File(sdDir, "FlyNote/"+FileName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T07:14:03.587

当您测试存在时，您正在搜索是否`Flynote/Filename`存在，如果不存在，则使用`mkdirs`.

`fileName.mkdirs()`使用该文件的名称创建一个目录。因此，您会发现错误。你`mkdirs`应该只为`Flynote`而不是`Flynote/+FileName`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T07:14:45.630

试试这个，

如果您的目标是文件，为什么要使用“mkdir”使目录不是文件。

**这段代码是创建一个文件：**

```
File f = new File("/sdcard/n5.txt");
FileWriter fw = new FileWriter(f);
BufferedWriter bw = new BufferdWriter(fw);
bw.write("Hello"); 
```

**检查文件夹是否存在...**

```
File f = new File("/sdcard/myfolder");
if (f.exists()){

   // do what u want

   }
else{
       // doesnt exists
      } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T11:46:25.943

这里给出的大多数方法都很好......您也可以使用以下代码：

```
 public static void addToFile(String file,String message){

    try {
        FileOutputStream fos = new FileOutputStream(file,true);
        fos.write(("\n"+message).getBytes());
        fos.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

这里的“File”是一个包含文件路径的字符串，例如：File =“/sdcard/parentPath/FileName.txt”和“message”显然是您要输入文件的消息。（考虑到文件包含txt内容）

# c# - 多态性：ORM 实体是域实体还是数据实体？

> ID：11257484
> 
> 赞同：0
> 
> 时间：2012-06-29T07:06:04.410
> 
> 标签：c#, .net, nhibernate, linq-to-sql, domain-driven-design

我有一个 BankAccount 表。LINQ to SQL 生成一个名为“BankAccount”的类，如下所示。

```
[global::System.Data.Linq.Mapping.TableAttribute(Name="dbo.BankAccount")]
public partial class BankAccount : INotifyPropertyChanging, INotifyPropertyChanged 
```

现在，作为一个新手，我自己新创建了域对象。请参阅 IBankAccount 接口和 FixedBankAccount 类。关键是存在多态行为——IBankAccount 可以是 FixedBankAccount 或 SavingsBankAccount。

对于此示例的另一个问题，我有以下两条评论。

1.  @mouters：“你有存储库对象和域对象很奇怪——你的存储库不应该只返回域对象吗？”</li>
2.  @SonOfPirate：“存储库应该使用工厂来根据从数据存储中检索到的数据创建实例。”</li>

**问题**

1）我手动创建域实体。这是错误的方法吗？如果错了，LINQ to SQL 类如何处理多态性？如何将方法添加到这些类？

2）存储库应该如何使用工厂来根据从数据存储中检索到的数据创建实例？任何代码示例或参考？

3) 是否满足单一职责原则？

**代码**

```
public interface IBankAccount
{
    int BankAccountID { get; set; }
    double Balance { get; set; }
    string AccountStatus { get; set; }
    void FreezeAccount();
    void AddInterest();
}

public class FixedBankAccount : IBankAccount
{

    public int BankAccountID { get; set; }
    public string AccountStatus { get; set; }
    public double Balance { get; set; }

    public void FreezeAccount()
    {
        AccountStatus = "Frozen";
    }

}   

public class BankAccountService
{
    RepositoryLayer.IRepository<RepositoryLayer.BankAccount> accountRepository;
    ApplicationServiceForBank.IBankAccountFactory bankFactory;

    public BankAccountService(RepositoryLayer.IRepository<RepositoryLayer.BankAccount> repo, IBankAccountFactory bankFact)
    {
        accountRepository = repo;
        bankFactory = bankFact;
    }

    public void FreezeAllAccountsForUser(int userId)
    {
        IEnumerable<RepositoryLayer.BankAccount> accountsForUser = accountRepository.FindAll(p => p.BankUser.UserID == userId);
        foreach (RepositoryLayer.BankAccount oneOfRepositoryAccounts in accountsForUser)
        {
            DomainObjectsForBank.IBankAccount domainBankAccountObj = bankFactory.CreateAccount(oneOfRepositoryAccounts);
            if (domainBankAccountObj != null)
            {
                domainBankAccountObj.BankAccountID = oneOfRepositoryAccounts.BankAccountID;
                domainBankAccountObj.FreezeAccount();

                this.accountRepository.UpdateChangesByAttach(oneOfRepositoryAccounts);
                oneOfRepositoryAccounts.Status = domainBankAccountObj.AccountStatus;
                this.accountRepository.SubmitChanges();
            }

        }
    }

}

public interface IBankAccountFactory
{
    DomainObjectsForBank.IBankAccount CreateAccount(RepositoryLayer.BankAccount repositoryAccount);
}

public class MySimpleBankAccountFactory : IBankAccountFactory
{
    //Is it correct to accept repositry inside factory?
    public DomainObjectsForBank.IBankAccount CreateAccount(RepositoryLayer.BankAccount repositoryAccount)
    {
        DomainObjectsForBank.IBankAccount acc = null;

        if (String.Equals(repositoryAccount.AccountType, "Fixed"))
        {
            acc = new DomainObjectsForBank.FixedBankAccount();
        }

        if (String.Equals(repositoryAccount.AccountType, "Savings"))
        {
            //acc = new DomainObjectsForBank.SavingsBankAccount();
        }

        return acc;
    }
} 
```

* * *

**阅读**：

1.  [将 Linq 中的外键设置为 SQL](https://stackoverflow.com/questions/479791/setting-foreign-keys-in-linq-to-sql)

2.  [LINQ to SQL 中的多态关联](https://stackoverflow.com/questions/511092/polymorphic-associations-in-linq-to-sql)

3.  [DTO（linq2sql）和类对象之间的混淆！](https://stackoverflow.com/questions/1323070/confusion-between-dtos-linq2sql-and-class-objects)

4.  [LINQ-to-XYZ 多态性？](https://stackoverflow.com/questions/4467074/linq-to-xyz-polymorphism)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:07:06.840

1.  我不完全确定您对 LINQ to SQL 的要求是什么，但是手动创建域对象肯定不是错误的方法。如果您依赖它们生成代码，您将无法获得正确封装的域对象。
2.  您对工厂模式感到困惑。正如mouters 所指出的，您有两个代表同一事物的对象：

    RepositoryLayer.BankAccount

    DomainObjectsForBank.IBankAccount

只有在对象创建需要“策略”时才需要工厂。使用它们的一个经典案例是多态性和继承。您的帐户类有子类，因此有一个 AccountFactory 的案例。但是，情况过于复杂的地方是让存储库返回某种帐户数据对象，然后将其传递给工厂以将其转换为正确的子类域对象。相反，存储库应该从数据库中获取数据，将其传递给工厂，然后从工厂返回创建的域对象。例如：

```
public class AccountRepository : IAccountRepository
{
    public Account GetById(Guid id)
    {
        using (AccountContext ctx = new AccountContext())
        {
            var data = (from a in ctx.Accounts
                               where a.AccountId == id
                               select new { AccountId = a.AccountId, CustomerId = a.CustomerId, Balance = a.Balance, AccountType = (AccountType)a.AccountTypeId }).First();

            return _accountFactory.Create(data.AccountId, data.CustomerId, data.Balance, data.AccountType);
        }
    }

} 
```

**更新**：

我对 LINQ to SQL 的建议是：

1.  如果可以，请移至实体框架，因为它更高级并且现在得到更好的支持。
2.  不要将它生成的对象用作您的域对象。如果您查看上面的代码，我会从我的 ctx.Accounts 中查询数据并使用它来实例化我的域对象。根据我的经验，尝试使用 ORM 来构建域对象是有问题的：请参阅[Rich domain model with behavior and ORM](https://stackoverflow.com/questions/11222720/rich-domain-model-with-behaviours-and-orm/11224734#11224734)

# javascript - java script backspace and delete working in IE,not in FireFox

> ID：11257488
> 
> 赞同：1
> 
> 时间：2012-06-29T07:06:31.223
> 
> 标签：javascript, internet-explorer, firefox, google-chrome, backspace

I use the following function for decimal validation it was work fine in IE and Chrome not in FF.Backspace and delete key working in IE and Chrome.Not in FireFox

```
 $('.decimalValidate').live('keypress', function (e) {
        var decimalid = $(this).attr("id");
        var decimalval = $('#' + decimalid).val();

        var decimalvalidate = ApplyDecimalFilter(decimalval, e);
        if (decimalvalidate == false) return false;
    });

    function ApplyDecimalFilter(id, event)
        {
            try {
                return NewDecimalFilter(id, event);
            } catch (e) {
                alert(e.message);
            }
        }

    function NewDecimalFilter(o, event) {
            if (event.which > 47 && event.which < 58) {
                return true;
            }
            if (event.which == 50 ||(event.which == 8 || event.which == 46) && o.indexOf('.') == -1)  {
                return true;
            }
            return false;
        } 
```

this if condition not working in FireFox only.this is used to enter the only one dot symbol

```
if (event.which == 50 ||(event.which == 8 || event.which == 46) && o.indexOf('.') == -1)  {
                return true;
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:28:06.013

一般来说，这种类型的验证需要小心完成，因为文本可以通过键盘以外的方式更改为输入（例如，粘贴、文本拖动和上下文菜单中的删除选项）。提交表单时，限制键盘输入仍然需要进行适当的验证。

用于`keyCode`检测实际按下的键（通常在`keydown`或`keyup`而不是`keypress`）和`which`检测输入的字符（仅在`keypress`事件中）。一般来说，查看事件的`keyCode`属性不是一个好主意，`keypress`但对于删除和退格的情况，这很好：并非所有浏览器都会`keypress`为这些键触发事件，但对于那些触发事件，`keyCode`属性是一致的。

总结：更改`(event.which == 8 || event.which == 46)`为`(event.keyCode == 8 || event.keyCode == 46)`其余部分不变。

这是我见过的 JavaScript 关键事件的最佳参考：http: [//unixpapa.com/js/key.html](http://unixpapa.com/js/key.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-19T16:33:18.207

```
$('#Name_Var').keypress(function (event) {
    event = event || window.event;
    var charCode = event.which || event.keyCode;
    var charStr = String.fromCharCode(charCode);
    // FireFox key Del - Supr - Up - Down - Left - Right
    if (event.key !== undefined && event.charCode === 0) {
        return;
    }
    //Only Num
    if (!/^([0-9])*$/.test(charStr)) {
        event.preventDefault();
    }
    //Num and letters 
    if (!/^[a-zA-Z0-9]+$/.test(charStr)) {
        event.preventDefault();
    }
});
```

# jquery - jQuery解析多维数组

> ID：11257490
> 
> 赞同：1
> 
> 时间：2012-06-29T07:06:34.597
> 
> 标签：jquery, ajax, json

我正在向外部 php 文件发出 ajax 请求，然后返回一些 json。大多数 json 都是直截了当的，但我似乎无法弄清楚如何解析多维部分。

* * *

JSON：

```
{
    "success":"TRUE",
    "action":"JSON",
    "date":"06/29/12",
    "results":"true",
    "numResults":2,
    "0":[
        "id":1234,
        "name":"John Appleseed",
        "gender":"male",
        "average":2.5
    ],
    "1":[
        "id":5678,
        "name":"Jessica Smith",
        "gender":"female",
        "average":1.4
    ]
} 
```

jQuery：

```
$.ajax({
url: "searchController.php",
data: searchData,
type: "GET",
success:function(q) {
    if (q) { // Results
        $('#search .container .body .ajax .returnedHTML .loadingScreen').hide();                                
        var json = $.parseJSON(q);
        console.log(json);
        if (json.success == "true") {
            var numResults = json.numResults;
            if (numResults == 1) {
            $('#search .container .body .ajax .returnedHTML .content').contents().remove();
            var htmlString = '<div class="searchContent"><ul><li class="returnedResults '+json.type+'"><a href="/#!/'+json.type+'/'+json.id+'/"><div class="title">'+json.name+'</div><div class="body"><div class="quickview"><ul><li><div class="average">'+json.average+'</div><br><span>Average</span></li><li><div class="rates">'+json.numrates+'</div><br><span>Rates</span></li><li><div class="followers">'+json.followers+'</div><br><span>Followers</span></li></ul></div></div></a></li></ul></div>';
            $('#search .container .body .ajax .returnedHTML .content').append(htmlString);
            console.log(htmlString);                                          
        }
    }
}); 
```

* * *

如何解析 JSON，以便我可以访问所有数据，而不仅仅是第一维中的数据？我在这个网站上环顾四周，找不到任何有用和/或有用的东西。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T07:11:36.707

您的阵列位于`json[0]`和`json[1]`

```
 ...
for(var i in json) {
  if(!isNaN(i)) {
    ...
    refer to you variables as json[i].name, json[i].average, etc.
    ...
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T07:20:16.377

```
$.ajax({
url: "searchController.php",
data: searchData,
type: "GET",
success:function(q) {
    if (q) { // Results
        $('#search .container .body .ajax .returnedHTML .loadingScreen').hide();                                
        var json = $.parseJSON(q);
        console.log(json);
        if (json.success.toLowerCase() == "true") {
            ...                                  
        }
    }
});

for(var key in json){
    if(json.hasOwnProperty(key){
       console.log(key);
       console.log(json[key]);
    }    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T07:10:24.263

关于您的 JSON，您必须再次解析相同的内容，

```
var jsonArr1 = $.parseJSON(json.0);
var jsonArr2 = $.parseJSON(json.1); 
```

# linux - How do I spawn a new process while another process is running?

> ID：11257491
> 
> 赞同：2
> 
> 时间：2012-06-29T07:06:36.623
> 
> 标签：linux, shell, spawning

I am writing a shell script that will perform 2 tasks. One task will start up a program that must keep running continuously. Within the same script, the 2nd task is to be initiated that will start up another program. But when the first is running continuously, how can i start another within the same script ?

Thanks in advance.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T07:14:46.940

您可能正在寻找*背景*任务。通常，您会这样做：

```
sleep 30 &
sleep 30 &
jobs
echo 'Waiting for all jobs to complete.'
wait 
```

背景由行尾的**&**符号处理。

### 也可以看看

*   [http://www.gnu.org/software/bash/manual/html_node/Lists.html#Lists](http://www.gnu.org/software/bash/manual/html_node/Lists.html#Lists)
*   [http://www.gnu.org/software/bash/manual/html_node/Job-Control-Basics.html](http://www.gnu.org/software/bash/manual/html_node/Job-Control-Basics.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T07:10:40.597

在命令后添加 & 符号：

~$我的程序&

它将使程序在后台运行。

# blackberry - Unable to load image from url

> ID：11257497
> 
> 赞同：0
> 
> 时间：2012-06-29T07:06:56.073
> 
> 标签：blackberry, httpconnection

I cannot load the image from url and play into my listfield

`ImageLoader` class

```
public class Util_ImageLoader {
    public static Bitmap getImageFromUrl(String url) {
        Bitmap bitmap = null;

        try {
            String bitmapData = getDataFromUrl(url);
            bitmap = Bitmap.createBitmapFromBytes(bitmapData.getBytes(), 0,
                    bitmapData.length(), 1);
        } catch (Exception e1) {
            e1.printStackTrace();
        }

        return bitmap;
    }

    private static String getDataFromUrl(String url) {
        StringBuffer b = new StringBuffer();
        InputStream is = null;
        HttpConnection c = null;

        long len = 0;
        int ch = 0;

        try {
            c = (HttpConnection) Connector.open(url);

            is = c.openInputStream();
            len = c.getLength();
            if (len != -1) {
                for (int i = 0; i < len; i++)
                    if ((ch = is.read()) != -1) {
                        b.append((char) ch);
                    }
            } else {
                while ((ch = is.read()) != -1) {
                    len = is.available();
                    b.append((char) ch);
                }
            }

            is.close();
            c.close();

        } catch (IOException e) {
            e.printStackTrace();
        }

        return b.toString();
    }
} 
```

`ListField` class

```
image = new BitmapField(Util_ImageLoader.getImageFromUrl(
    "http://www.orientaldaily.com.my/images/articles/4_APRIL_BLACK_copy.jpg"),
    Field.FIELD_HCENTER | Field.FIELD_VCENTER);
row.add(image);
field = getField(3);
layoutChild(field, 100, 80);
setPositionChild(field, getPreferredWidth() - 105, 5); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T09:44:41.383

我相信Alan说他只需要支持OS 5.0及以上。如果这是真的，那么我**不**建议他费心构建连接*扩展*字符串，比如`";interface=wifi"`.

OS 5.0 添加了[ConnectionFactory 类](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/io/transport/ConnectionFactory.html)，这使得这变得更加容易。

BlackBerry 设备可以通过多种不同的网络*传输*之一发出网络请求。一些应用程序关心使用了哪些传输。其他应用程序只需要任何*可用的*传输。

有关使用`ConnectionFactory`第[一个可用传输](http://docs.blackberry.com/en/developers/deliverables/11938/CS_create_first_available_HTTP_connection_857706_11.jsp)[创建 a的示例，请参阅此示例`Connection`](http://docs.blackberry.com/en/developers/deliverables/11938/CS_create_first_available_HTTP_connection_857706_11.jsp)

有关更高级的示例，它显示使用`ConnectionFactory`指定[首先使用的传输列表，以及根本不使用的传输列表，请参阅此示例](http://supportforums.blackberry.com/t5/Java-Development/Sample-Code-Using-the-ConnectionFactory-class-in-a-BrowserField/ta-p/532860)。

在第二个示例中，代码使用 a `BrowserField`，而 Alan 没有使用。但是，他可以替换他的代码

```
c = (HttpConnection) Connector.open(url); 
```

有了这个

```
c = (HttpConnection) MyConnectionFactory.getConnection(url).getConnection(); 
```

[示例代码中显示](http://supportforums.blackberry.com/t5/Java-Development/Sample-Code-Using-the-ConnectionFactory-class-in-a-BrowserField/ta-p/532860)的`MyConnectionFactory`位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:27:20.263

您需要将连接扩展添加到您的网址。

就像如果 wifi 然后**";interface=wifi"**

```
Example: c = (HttpConnection) Connector.open(url+";interface=wifi"); 
```

使用完美的连接参数

```
c = (HttpConnection) Connector.open(url+getConnParam()); 
```

获取连接扩展的代码示例：

```
public static String getConnParam(){
        String connectionParameters = "";
        if (WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED) {
        // Connected to a WiFi access point
        connectionParameters = ";interface=wifi";
        } else {
        int coverageStatus = CoverageInfo.getCoverageStatus();
        ServiceRecord record = getWAP2ServiceRecord();
        if (record != null
        && (coverageStatus & CoverageInfo.COVERAGE_DIRECT) ==
        CoverageInfo.COVERAGE_DIRECT) {
        // Have network coverage and a WAP 2.0 service book record
        connectionParameters = ";deviceside=true;ConnectionUID="
        + record.getUid();
        } else if ((coverageStatus & CoverageInfo.COVERAGE_MDS) ==
        CoverageInfo.COVERAGE_MDS) {
        // Have an MDS service book and network coverage
        connectionParameters = ";deviceside=false";
        } else if ((coverageStatus & CoverageInfo.COVERAGE_DIRECT) ==
        CoverageInfo.COVERAGE_DIRECT) {
        // Have network coverage but no WAP 2.0 service book record
        connectionParameters = ";deviceside=true";
        }

    }
        return connectionParameters;
    } 
```

参考网址：

[http://www.blackberry.com/developers/docs/4.6.0api/javax/microedition/io/Connector.html#http](http://www.blackberry.com/developers/docs/4.6.0api/javax/microedition/io/Connector.html#http)

[http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800451/800563/What_Is_-_Different_ways_to_make_an_HTTP_or_socket_connection.html?nodeid=826935&vernum=0](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800451/800563/What_Is_-_Different_ways_to_make_an_HTTP_or_socket_connection.html?nodeid=826935&vernum=0)

# iphone - 如何在box2d中动态更改身体的组索引

> ID：11257502
> 
> 赞同：2
> 
> 时间：2012-06-29T07:07:03.580
> 
> 标签：iphone, objective-c, xcode, box2d-iphone

我是box2d的新手。我在box2d中开始了一个新游戏，并在世界上创建了5个动态物体。最初我需要防止它们之间发生碰撞。所以我将所有机构的组指数设为负数。触摸一个身体后，我想允许与那个身体发生碰撞。如何重置组索引。请帮忙..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T15:20:34.243

听起来你正在寻找类似的东西

```
b2Body *body = world->GetBodyList();
b2Filter filter = body->GetFilterData();
filter.maskBits = filter.maskBits | THE_RELEVANT_CATEGORY_BITS;
body->SetFilterData(&filter); 
```

这里的想法是，您可以获得任何对象的碰撞过滤数据，使用一些布尔逻辑将碰撞数据分配给 maskBits 字段，然后使用 SetFilterData 将新的碰撞数据应用到主体。THE_RELEVANT_CATEGORY_BITS 应该是枚举类型的元素，其中每个碰撞过滤类别由唯一的二进制整数表示。

查看 box2D 教程了解更多关于这个[http://www.iforce2d.net/b2dtut/collision-filtering](http://www.iforce2d.net/b2dtut/collision-filtering)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T07:49:53.320

如果您有超过 1 个身体装置，那么您可以使用这段代码

```
for (b2Fixture* fix = body->GetFixtureList(); fix; fix = fix->GetNext())
{
    b2Filter filter=  fix->GetFilterData();

    filter.groupIndex = 0;
    filter.categoryBits = 0x0004;
    filter.maskBits = 0x0002;
    fix->SetFilterData(filter);
} 
```

# jquery-mobile - HOw remove counter from Jquerymobile multiple select button

> ID：11257503
> 
> 赞同：0
> 
> 时间：2012-06-29T07:07:17.030
> 
> 标签：jquery-mobile

In multiple select ,once 2+ items are selected, a counter element with the total number of selected items will appear inside the button. How to remove the counter element from the button

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-01T16:14:42.573

老问题要回答。虽然，我在这里做了什么来隐藏它。应用了这个 CSS -

```
.ui-select .ui-li-count{
    display: none !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T07:51:01.793

我认为您应该在 Jqmobile 中进行多项选择...

下载 Jqmobile 和 Open 文档并参考...

[http://jquerymobile.com/demos/1.1.0/docs/forms/selects/custom.html](http://jquerymobile.com/demos/1.1.0/docs/forms/selects/custom.html)

# java - error on adding changeListener on JTextField

> ID：11257506
> 
> 赞同：1
> 
> 时间：2012-06-29T07:07:26.187
> 
> 标签：java, swing, compiler-errors, jtextfield, documentlistener

here my situation:

```
textField1.addChangeListener(new ChangeListener() {
        @Override
        public void stateChanged(ChangeEvent e) {
            textField1StateChanged(e);
        }
    }); 
```

the error said addChangeListener is undefined for the type JTextField. is there any thing else to import? (i'm a newbie in java) thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T07:12:01.277

你可能想试试这个：

```
// Listen for changes in the text
textField.getDocument().addDocumentListener(new DocumentListener() {
  public void changedUpdate(DocumentEvent e) {
      //your code
  }
  public void removeUpdate(DocumentEvent e) {
  }
  public void insertUpdate(DocumentEvent e) {
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T07:14:49.737

> 还有什么要进口的吗？

这与进口无关，[`JTextField`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextField.html)有可用的方法。那不是其中之一。

有关表中的详细信息，请参阅Swing 组件支持的[侦听器：Swing 组件支持的其他侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/eventsandcomponents.html#many)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T07:13:47.033

那是因为 JTextField 中没有这样的方法。相反，您需要做的是让您的类实现 ChangeListener，并实现该`stateChanged()`方法。在这里，您将从传入的 ChangeEvent 中获取触发事件的组件，并采取相应的行动。这是[文档](http://docs.oracle.com/javase/tutorial/uiswing/events/changelistener.html)中的一个示例：

```
class YourClass implements ChangeListener {
    public void stateChanged(ChangeEvent e) {
        if (e.getSource() instanceof JTextField) {
           JTextField source = (JTextField)e.getSource();
           if(!source.getValueIsAdjusting()) {
             // check if this is the component you want and respond to the event 
           }
        }    
    }
} 
```

# java - URLDecoder: Illegal hex characters in escape (%) pattern - For input string: ".P"

> ID：11257509
> 
> 赞同：5
> 
> 时间：2012-06-29T07:07:33.353
> 
> 标签：java

How do I properly decode the string which contains % in Java When I use `URLDecoder.decode()` i am getting the following error:

```
IllegalArgumentException: java.lang.IllegalArgumentException: URLDecoder: Illegal hex characters in escape (%) pattern - For input string: ".P"
    at java.net.URLDecoder.decode(Unknown Source) 
```

Is there anyway to bypass this special consideration. Or any idea on how to use % character?

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-08-21T07:50:56.090

如果只有`%`字符需要转义，Mark Byers 提供[的答案将正常工作，但如果 url 包含百分比编码的字符，则会失败。](https://stackoverflow.com/a/11257540/1283847)为了避免这种情况，需要做更多的工作。

在百分比编码（url-encoding）中，*只有* [保留](https://www.rfc-editor.org/rfc/rfc3986#page-12)和[未保留](https://www.rfc-editor.org/rfc/rfc3986#page-13)的字符不会被百分比编码。

```
Reserved chars:
╔═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╗
║ ! ║ # ║ $ ║ & ║ ' ║ ( ║ ) ║ * ║ + ║ , ║ / ║ : ║ ; ║ = ║ ? ║ @ ║ [ ║ ] ║
╚═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╝

Unreserved chars:
╔═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╗
║ A ║ B ║ C ║ D ║ E ║ F ║ G ║ H ║ I ║ J ║ K ║ L ║ M ║ N ║ O ║ P ║ Q ║ R ║
╚═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╝
╔═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╗
║ S ║ T ║ U ║ V ║ W ║ X ║ Y ║ Z ║ a ║ b ║ c ║ d ║ e ║ f ║ g ║ h ║ i ║ j ║
╚═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╝
╔═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╗
║ k ║ l ║ m ║ n ║ o ║ p ║ q ║ r ║ s ║ t ║ u ║ v ║ w ║ x ║ y ║ z ║
╚═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╝
╔═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╗
║ 0 ║ 1 ║ 2 ║ 3 ║ 4 ║ 5 ║ 6 ║ 7 ║ 8 ║ 9 ║ - ║ _ ║ . ║ ~ ║
╚═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╝ 
```

根据[RFC 3986](https://www.rfc-editor.org/rfc/rfc3986)百分比编码字符具有以下格式：`% + hex`. 因此，如果您想`%`在实际解码之前正确转义具有未转义字符的 url 而不会破坏整个 url，则只需替换那些`%`后面没有十六进制的符号。

使用正则表达式查找违反某些模式的子字符串非常容易。在这种情况下，模式将如下所示：

```
%(?![0-9a-fA-F]{2}) 
```

* * *

[样本：](http://ideone.com/n2Amyu)

```
class Main
{
    public static void main (String[] args) throws java.lang.Exception
    {
        String url = "http://example.com/test?q=%.P%20some%20other%20Text";
        url = url.replaceAll("%(?![0-9a-fA-F]{2})", "%25");
        System.out.println(url);
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-29T07:09:26.377

任何创建 URL 的人都应该通过写作对它进行百分比[编码](http://en.wikipedia.org/wiki/Percent-encoding)。`%``%25`

**示例无效 URL**

```
http://example.com/test?q=%.P

```

**示例有效 URL**

```
http://example.com/test?q=%25.P

```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-21T06:13:00.533

替换`%`为`%25`调用前`URLDecoder.decode`。

# asp-classic - 来自数据库连接的内部错误

> ID：11257512
> 
> 赞同：1
> 
> 时间：2012-06-29T07:07:45.773
> 
> 标签：asp-classic, vb6

我是asp的初学者，我在使用这段代码时遇到了麻烦。我已经尝试了很多次调试，但它仍然无法正常工作。当我运行代码时，它显示内部服务器错误 500。我不确定出了什么问题。如果我删除这段代码，它将起作用。有人可以帮助我并指出正确的方向吗？请？

```
<%
strSQL = "SELECT _id,name,price,out_of_stock FROM class_product WHERE purchase_form = 1 ORDER BY _rank ASC"

OpenMainConn()
set rsProducts = Server.CreateObject("ADODB.Recordset")
rsProducts.Open strSQL, MainDBConn
dim count
if not rsProducts.eof then
    dim exceptions
    while not rsProducts.eof
        count = count + 1
        exceptions = exceptions & "product" & count & ","
%>
<tr>
    <td>
        <%=(rsProducts("name"))%>
    </td>
    <td align="right">
        <%=(FormatCurrency(rsProducts("price"),2))%>
    </td>
    <td align="center">
    <% if rsProducts("out_of_stock") = 0 then %>
        <input type="text" class="input_text" style="width: 20px;" id="product<%=count %>" name="product<%=count %>" onchange="updateSub();" />
    <% else %>
        <img border="0" src="images/OUT-OF-STOCK.gif"/><input type="hidden" class="input_text" style="width: 20px;" id="product<%=count %>" name="product<%=count %>" onchange="updateSub();" />
    <% end if %>
        <input type="hidden" id="productDetails<%=count %>" name="productDetails<%=count %>" value="<%=(rsProducts("name") & "|" & rsProducts("price"))%>" />
    </td>
</tr>
<%
        rsProducts.movenext()
    wend
end if
rsProducts.Close()
set rsProducts = nothing
CloseMainConn()
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:23:15.123

您的主要问题在于您的数据库连接。

尝试使用以下方法绕过它（您可以调整）

```
'OpenMainConn() 
Set MainDBConn = Server.CreateObject("ADODB.Connection")
MainDBConn.open "Provider=SQLOLEDB.1;Password=ppppppppp;Persist Security Info=True;User ID=xxxxxx;Initial Catalog=Test;Data Source=123-AAAAA11111\SQLEXPRESS;" 
```

你也应该像下面这样关闭你的连接

```
If rsProducts.State = adStateOpen Then
   rsProducts.Close
End If
Set rsProducts = Nothing 
```

# c# - AutoCompleteExtender - Get Primary Key into HiddenField

> ID：11257513
> 
> 赞同：1
> 
> 时间：2012-06-29T07:07:48.737
> 
> 标签：c#, asp.net

I want to use autoComplete extender in a way similar to a dropDownList. Currently I have a dropdown List that holds a collection of companies. Selecting a company name enables me to get the value associated with the listItem.

I want to replace the dropDownList with autocomplete extender and place a text box. While typing user will be able to view the company. After selecting the company, I want to capture the value (such as company ID). I don't want this ID to be visible to user.

Please advice how to achieve this functionality with autoComplete extender.

# sql-server - The server principal “DevMe” is not able to access the database “CallManager” under the current security context

> ID：11257515
> 
> 赞同：0
> 
> 时间：2012-06-29T07:07:54.327
> 
> 标签：sql-server, sql-server-2008

I am trying to remove/ drop a users permissions but i keep getting the following error:

> The server principal “DevMe” is not able to access the database “CallManager” under the current security context.

My Stored proc to do this looks as follows:

```
USE [AuditIT]
GO
/****** Object:  StoredProcedure [dbo].[AdminDevUserDelete]    Script Date: 06/29/2012 08:54:27 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
--alter table AdminLog add HostName varchar(128) NULL DEFAULT HOST_NAME()

ALTER PROCEDURE [dbo].[AdminDevUserDelete]
    @SQLLoginName varchar(50) 
AS   

DECLARE @DatabaseName varchar(1000)

PRINT 'USE [master] DROP LOGIN [' + @SQLLoginName + ']'
EXEC ('USE [master] DROP LOGIN [' + @SQLLoginName + ']')

DECLARE CSDatabase CURSOR FOR 
    SELECT
        [Name]
    FROM
        [Master]..SysDatabases
    --WHERE
    --  --[sid] = 0x01
    --  [Name] NOT IN ('ReportSRV.Support','HelpDeskFacilities','QuestSoftware')
    ORDER BY
        dbid DESC
OPEN CSDatabase
FETCH NEXT FROM CSDatabase INTO @DatabaseName
WHILE @@FETCH_STATUS = 0
BEGIN
    EXEC ('SELECT [Name] FROM [' + @DatabaseName + ']..SysUsers WHERE [Name] = ''' + @SQLLoginName + '''')
    IF @@RowCount > 0
    BEGIN
        PRINT 'USE [' + @DatabaseName + '] DROP USER [' + @SQLLoginName +']'
        EXEC ('USE [' + @DatabaseName + '] DROP USER [' + @SQLLoginName +']')
    END
    FETCH NEXT FROM CSDatabase INTO @DatabaseName
END
CLOSE CSDatabase
DEALLOCATE CSDatabase 
```

**Could someone please explain how i could fix this problem?**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T07:39:47.577

*   不要手动引用名称，使用内置的[QUOTENAME](http://msdn.microsoft.com/en-us/library/ms176114.aspx)函数。您的代码[无法正确处理](http://xkcd.com/327/)包含嵌入`]`字符的数据库和用户名。`'`引号也是如此，再次使用 QUOTENAME （它可以同时引用`[`and `'`，请参阅链接的规范）。您的代码将中断包含 embeded 的名称`'`。
*   如果您使用 SQL 2005 及更高版本的动词，`DROP USER`则使用适当的目录视图：[`sys.database_principals`](http://msdn.microsoft.com/en-us/library/ms187328.aspx)和[`sys.databases`](http://msdn.microsoft.com/en-us/library/ms178534.aspx).
*   始终在区分大小写的排序服务器上测试您的代码。您的代码将中断，因为您对目录名称使用混合大小写。SQL 服务器名称都是*小写*的。

最后，导致您看到的错误的问题是什么？在您未发布的代码中，即您如何调用此存储过程。该错误表明您处于 EXECUTE AS 沙盒模式，请参阅[了解执行上下文](http://msdn.microsoft.com/en-us/library/ms187096%28v=sql.105%29.aspx)和[了解上下文切换](http://msdn.microsoft.com/en-us/library/ms191296%28v=SQL.105%29.aspx)。您需要正确地对[您的过程进行代码签名](http://rusanu.com/2006/03/01/signing-an-activated-procedure/)，以便它可以将上下文扩展到服务器级别（因为您正在接触任意数据库，所以跨数据库代码签名是不够的）。

顺便说一句，如果您不在 eXECUTE AS 上下文中，那么很简单，您无权访问相关数据库，因此这是一个无声的问题，因为您无权*做*您想做的事情。其他点仍然存在，并且考虑到正在尝试做的事情，正确等待获得此过程所需的权利仍然是使用代码签名......

更新：

您的 C# 代码也容易发生 SQL 注入……这真是一场火鸡射击。不要通过`procedure = dataBase + ".." + procedure`!!建立您的程序名称

# jquery - big image viewer size like 2529x3516

> ID：11257516
> 
> 赞同：0
> 
> 时间：2012-06-29T07:07:55.890
> 
> 标签：jquery, image, document, image-viewer

I working on a project where i have one thumbnail of a scan document and then i whant to click on this thumbnail and show the whole big picture of it and the user should pan, zoom etc on it.

The best viewer should be something like a PDF viewer but for images and online in the browser.

The big picture of the document is in sizes like 2529x3516 pixels.

Some ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:10:14.667

创建所需大小的模态窗口并将其内容保存在`img`文件中。给它，`overflow-auto`以便用户可以平移并查看整个图像`100%`。

您也可以使用 JavaScript 添加功能，只需调整属性`+`并让浏览器执行缩放。`-``width`

# ruby-on-rails - Why am I getting Gem::LoadError when requiring the clockwork gem?

> ID：11257517
> 
> 赞同：1
> 
> 时间：2012-06-29T07:07:59.693
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1, rubygems

I have a task which has to be run everyday. I will get just fetch the data from one table do some kind of computation and inserts into another table. I am using [this gem](https://github.com/tomykaira/clockwork)

But the its not work and I get a error message when I run "clockwork config/clock.rb" I got the following error

> .rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find clockwork (>= 0) amongst [abstract-1.0.0, actionmailer-3.2.3, actionmailer-3.0.7, actionpack-3.2.3, actionpack-3.0.7, activemerchant-1.12.0, activemodel-3.2.3, activemodel-3.0.7, activerecord-3.2.3, activerecord-3.0.7, activeresource-3.2.3, activeresource-3.0.7, activesupport-3.2.3, activesupport-3.0.7, acts_as_list-0.1.2, addressable-2.2.6, arel-3.0.2, arel-2.0.10, attr_required-0.0.5, attr_required-0.0.3, aws-s3-0.6.3, aws-s3-0.6.2, bcrypt-ruby-2.1.4, beanstalk-client-1.1.1, braintree-2.16.0, braintree-2.13.1, builder-3.0.0, builder-2.1.2, bundler-1.1.3, cancan-1.6.4, capistrano-2.12.0, chronic-0.6.7, coffee-rails-3.2.2, coffee-script-2.2.0, coffee-script-source-1.3.3, crack-0.3.1, daemons-1.1.8, daemons-1.1.4, delayed_job-2.1.4, delayed_job_web-1.1.2, delayed_job_web-1.1.1, devise-1.3.1, erubis-2.7.0, erubis-2.6.6, eventmachine-0.12.10, execjs-1.4.0, faker-0.9.5, faraday-0.8.1, faraday-0.8.0, faraday-0.7.5, fastercsv-1.5.5, fastercsv-1.5.4, fb_graph-2.4.17, fb_graph-2.4.11, fb_graph-1.7.1, garb-0.9.1, google-spreadsheet-ruby-0.3.0, google-spreadsheet-ruby-0.2.1, google_drive-0.3.0, haml-3.1.6, haml-3.1.4, hashie-1.2.0, highline-1.5.1, hike-1.2.1, httpauth-0.1, httpclient-2.2.5, httpclient-2.2.4, i18n-0.6.0, i18n-0.5.0, journey-1.0.4, jquery-rails-2.0.2, jquery-rails-0.2.6, jrails-0.6.0, json-1.7.3, json-1.6.6, json-1.5.1, json_pure-1.7.3, json_pure-1.6.6, json_pure-1.6.3, mail-2.4.4, mail-2.2.19, memcache-client-1.8.5, meta_search-1.0.1, mime-types-1.18, mime-types-1.17.2, multi_json-1.3.6, multi_json-1.3.2, multi_json-1.0.4, multipart-post-1.1.5, multipart-post-1.1.4, mysql2-0.2.18, mysql2-0.2.17, nested_set-1.6.4, net-scp-1.0.4, net-sftp-2.0.5, net-ssh-2.5.2, net-ssh-gateway-1.1.0, newrelic_rpm-3.4.0, newrelic_rpm-3.3.4.1, newrelic_rpm-3.3.1, nokogiri-1.5.4, nokogiri-1.5.0, oauth-0.4.6, oauth2-0.6.1, oauth2-0.5.2, omniauth-1.1.0, omniauth-1.0.1, omniauth-facebook-1.3.0, omniauth-facebook-1.2.0, omniauth-oauth2-1.0.2, omniauth-oauth2-1.0.1, omniauth-oauth2-1.0.0, orm_adapter-0.0.7, orm_adapter-0.0.5, paperclip-2.3.8, polyglot-0.3.3, rack-1.4.1, rack-1.2.2, rack-cache-1.2, rack-mount-0.6.14, rack-oauth2-0.14.4, rack-oauth2-0.6.6, rack-ssl-1.3.2, rack-test-0.6.1, rack-test-0.5.7, rails-3.2.3, rails-3.0.7, railties-3.2.3, railties-3.0.7, rake-0.9.2.2, rd_resource_controller-1.0.1, rd_unobtrusive_date_picker-0.1.0, rdoc-3.12, recaptcha-0.3.4, recaptcha-0.3.1, rest-client-1.6.1, restclient_with_cert-0.0.6, ruby-ole-1.2.11.3, rubygems-bundler-0.9.0, rvm-1.11.3.3, sass-3.1.19, sass-3.1.16, sass-rails-3.2.5, sinatra-1.2.8, spreadsheet-0.7.2, spreadsheet-0.6.8, spree-0.50.2, spree_api-0.50.2, spree_auth-0.50.2, spree_core-0.50.2, spree_dash-0.50.2, spree_promo-0.50.2, spree_sample-0.50.2, sprockets-2.1.3, sqlite3-1.3.6, sqlite3-1.3.5, stalker-0.9.0, starling-0.10.1, state_machine-0.9.4, stringex-1.0.3, thor-0.14.6, tilt-1.3.3, treetop-1.4.10, tzinfo-0.3.33, tzinfo-0.3.31, uglifier-1.2.4, warden-1.0.6, whenever-0.7.3, will_paginate-3.0.pre2, xml-simple-1.1.1, yaml_db-0.2.3, yaml_db-0.2.2] (Gem::LoadError)

Please do help me to crack this out

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T07:38:22.443

### 错误

该错误表示发条宝石不在加载路径中。

### 解决方案

如果这是一个 Rails 应用程序，请仔细检查项目的 Gemfile 中是否列出了 gem，并且已运行`bundle install`安装它。您还可以使用以下方法验证安装路径：

```
bundle list clockwork 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T19:47:43.467

您是否尝试使用确切的存储库？

我遇到了类似你的问题，我在 Gemfile 中解决了这个问题：

```
gem 'clockwork', :git => "https://github.com/tomykaira/clockwork.git" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T07:30:20.307

您的 Gemfile 中是否提供发条宝石？

```
宝石'发条'

```

# authentication - Symfony2：“如何创建自定义身份验证提供程序”时出现异常

> ID：11257522
> 
> 赞同：1
> 
> 时间：2012-06-29T07:08:17.477
> 
> 标签：authentication, symfony, provider

我是 Symfony2 的新手，需要创建自定义身份验证提供程序，所以我阅读了[如何创建自定义身份验证提供程序](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html "如何创建自定义身份验证提供程序")。我创建了所有类，以及[如何创建自定义用户提供程序中的自定义用户提供程序](http://symfony.com/doc/current/cookbook/security/custom_provider.html "如何创建自定义用户提供程序")，但我得到了这个异常：

```
RuntimeException: The parent definition "wsse.security.authentication.provider" defined for definition "security.authentication.provider.wsse.wsse_secured" does not exist. 
```

我从 Cookbook 复制/粘贴了所有类和配置部分，只更改了我的 Bundlename。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T20:33:57.043

您需要更新您的 config.yml 以包含在您的主应用程序包中的服务配置中

```
# app/config/config.yml
imports:
    - { resource: @AcmeHelloBundle/Resources/config/services.yml } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-22T11:59:10.683

正如上面评论中提到的 - 对于那些有同样问题的人，我认为 Reza Sanaie 的回答不是预期的解决方案。您最好检查您的 Bundle 中是否有文件*/DependencieInjection/Security/{Vendor}{YourBundleName}Extension.php*。该文件需要具有正确的文件名，并且该类将由 symfony2 内核自动执行。如果您查看此文件的类代码，您会看到类似

```
$loader->load('services.yml'); 
```

这将加载您的 services.yml 并且问题应该得到解决。

# ruby-on-rails - 红宝石 1.9.2 和轨道 2.3.2

> ID：11257529
> 
> 赞同：0
> 
> 时间：2012-06-29T07:08:46.697
> 
> 标签：ruby-on-rails

任何人都可以告诉我如何运行 ruby​​ 1.9.2 和 rails 2.3.2 它的要求...我安装了 ruby​​1.9.2，我的客户坚持让我使用 rails 2.3.2 所以我使用 ruby​​ gem 安装了 rails 服务器-v 选项，但服务器不是以它所说的 ruby​​ 脚本/服务器命令开头

```
C:\Documents and Settings\Tele\Desktop\rubygems-1.8.24\testapp>ruby script/serve
r
C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require':
cannot load such file -- script/../config/boot (LoadError)
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:i
n `require'
        from script/server:2:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:52:51.257

使用 RVM（Ruby 版本管理器），您可以无缝地管理您的 ruby​​ 和 rails 版本。

这是信息： [https ://rvm.io//](https://rvm.io//)

我认识数百名 Ruby 程序员，每个人都在使用它。在这一点上，它基本上是一个标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T20:06:21.260

最后我只是通过使用 Instant rails 和 gems 1.3.2 然后将我的 rails 版本升级到 2.3.2 以任何方式将我的 ruby​​ 版本妥协到 1.8.6

# java - Java排序算法字符串与数字

> ID：11257531
> 
> 赞同：0
> 
> 时间：2012-06-29T07:08:57.380
> 
> 标签：java, comparable

我有一个字符串列表。示例_1，示例_2，示例_3 ...示例_99 在这里排序的最佳算法是什么？

可以使用 Collat​​or 吗？这是我目前的程序，但我想可能有更好的方法：

```
public class Example implements Comparable<Example> {
    private final String id;

    public getId() {
        return id;
    }

    private Integer getIdNo() {
        try {
            return Integer.parseInt(getId().replaceAll("[\\D]", ""));
        } catch (NumberFormatException e) {
            return null;
        }
    }

    @Override
    public int compareTo(Example o) {
        if ((getIdNo() == null && getIdNo() != null) || (getProductFeatureId_sizeNo() < o.getProductFeatureId_sizeNo())) {
            return -1;
        } else if (o.getIdNo() == null || getIdNo() > o.getIdNo()) {
            return 1;
        }

        return 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T07:35:58.910

这是更好的选择 - [AlphanumComparator.java](http://www.davekoelle.com/alphanum.html)

复制代码以供参考 -

```
public class AlphanumComparator implements Comparator
{
    private final boolean isDigit(char ch)
    {
        return ch >= 48 && ch <= 57;
    }

    /** Length of string is passed in for improved efficiency (only need to calculate it once) **/
    private final String getChunk(String s, int slength, int marker)
    {
        StringBuilder chunk = new StringBuilder();
        char c = s.charAt(marker);
        chunk.append(c);
        marker++;
        if (isDigit(c))
        {
            while (marker < slength)
            {
                c = s.charAt(marker);
                if (!isDigit(c))
                    break;
                chunk.append(c);
                marker++;
            }
        } else
        {
            while (marker < slength)
            {
                c = s.charAt(marker);
                if (isDigit(c))
                    break;
                chunk.append(c);
                marker++;
            }
        }
        return chunk.toString();
    }

    public int compare(Object o1, Object o2)
    {
        if (!(o1 instanceof String) || !(o2 instanceof String))
        {
            return 0;
        }
        String s1 = (String)o1;
        String s2 = (String)o2;

        int thisMarker = 0;
        int thatMarker = 0;
        int s1Length = s1.length();
        int s2Length = s2.length();

        while (thisMarker < s1Length && thatMarker < s2Length)
        {
            String thisChunk = getChunk(s1, s1Length, thisMarker);
            thisMarker += thisChunk.length();

            String thatChunk = getChunk(s2, s2Length, thatMarker);
            thatMarker += thatChunk.length();

            // If both chunks contain numeric characters, sort them numerically
            int result = 0;
            if (isDigit(thisChunk.charAt(0)) && isDigit(thatChunk.charAt(0)))
            {
                // Simple chunk comparison by length.
                int thisChunkLength = thisChunk.length();
                result = thisChunkLength - thatChunk.length();
                // If equal, the first different number counts
                if (result == 0)
                {
                    for (int i = 0; i < thisChunkLength; i++)
                    {
                        result = thisChunk.charAt(i) - thatChunk.charAt(i);
                        if (result != 0)
                        {
                            return result;
                        }
                    }
                }
            } else
            {
                result = thisChunk.compareTo(thatChunk);
            }

            if (result != 0)
                return result;
        }

        return s1Length - s2Length;
    }
} 
```

**注意：如果你使用 java 1.5+，你应该生成这个类**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T07:23:43.163

```
private Integer getIdNo() {
        try {
            return Integer.parseInt(getId().replaceAll("[\\D]", ""));
        } catch (NumberFormatException e) {
            return 0;
        }
    }

@Override
public int compareTo(Example o) {
    if(o == null) {
        return 1;
    }
    return getIdNo().compareTo(o.getIdNo());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T07:31:32.820

要在@Jeshuruns 答案的基础上构建，您可以像这样跳过所有数字解析：

```
 @Override
  public int compareTo(Example o) {
      if (o == null) {
          return 1;
      }
      if (getId().length() != o.getId().length() {
          return (getId().length() - o.getId().length());
      } else {
          return getId().compareTo(o.getId());
      }
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T08:05:00.227

你可以写这样的东西。

```
public class Sorter implements Comparator<String>
{
   public int compareTo(String str1,String str2)
   {
       if( str1 == null )
       {
           return -1;
       }
       if( str2 == null )
       {
           return 1;
       }
       int val1 = Integer.parseInt(this.split("_")[1]);
       int val2 = Integer.parseInt(str.split("_")[1]);

       if(val1<val2)
       {
           return -1;
       }
       else if(val1 > val2)
       {
           return 1;
       }
       else
       {
           return 0;
       }
   }
} 
```

# ios - NSLog 和 LOG 的区别

> ID：11257532
> 
> 赞同：0
> 
> 时间：2012-06-29T07:09:02.073
> 
> 标签：ios, foundation

这两个命令之间确实存在什么差异。

```
NSLog(@"Hello World!!"); 
```

和

```
LOG(@"Hello World!!"); 
```

`NSLog`确实将消息显示到控制台，但`LOG`没有。那是`LOG`为了什么？提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T07:56:25.343

尝试命令 + 单击 LOG() 方法以转到它的定义。可能它是您项目中的自定义日志方法。

# tridion - 如何从 Tridion 中的模式对象中获取模式名称？

> ID：11257535
> 
> 赞同：5
> 
> 时间：2012-06-29T07:09:17.130
> 
> 标签：tridion, tridion-2011

作为将按钮实现到功能区工具栏的一部分。我需要 Button java 脚本文件中的模式名称。所以我试图使用以下命令来获取架构对象。

```
$display.getView().getItem().getSchema(); 
```

上面的命令将返回模式对象。但是如何从模式对象中获取模式标题。请帮我解决这个问题。提前致谢。早期反应表示赞赏。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T08:05:34.813

您需要通过在模式对象上调用 .load(true) 来加载项目信息。因为（显然）由于性能原因，并非所有信息都被加载。

由于 .load() 调用是异步的，因此您必须使用回调函数来“知道”加载何时完成。

您可以使用以下代码加载项目并读取它的属性（代码简化）：

```
var schemaObject = $display.getView().getItem().getSchema();
function loaded()
{
    alert(schemaObject.getTitle());
}
$evt.addEventHandler(schemaObject, "load", loaded);
schemaObject.load(true); 
```

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-07-10T11:33:04.317

使用以下命令可以访问架构名称。

```
$display.getView().getItem().getSchema().getStaticTitle(); 
```

感谢罗姆克斯的帮助。

嘿 Pufflin 我不是说这是唯一的解决方案。但是这个命令正在毫无延迟地工作。对不起，如果我伤害了任何人的感情。

# android - 在 android 上使用 nfc 从智能卡读取

> ID：11257538
> 
> 赞同：3
> 
> 时间：2012-06-29T07:09:23.407
> 
> 标签：android, nfc

我想问一个关于android的nfc相关问题！

首先，我创建了一个 java 应用程序来使用 java smartcardio api 读取我公司的员工通行证。我通过发送 APDU 命令并解析响应 APDU 来做到这一点。

现在，我需要在安卓手机上使用 NFC 来读取员工通行证。我用市场上的nfc阅读器读取了我的员工通行证，发现这是一张mifare经典1k卡。读者还向我展示了所有 16 个扇区的十六进制数据。显然，十六进制数据与我在 java 中使用 smartcardio api 时得到的十六进制数据非常不同。我是否在错误的位置寻找数据？有人可以指导我如何继续这样做吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T07:40:40.773

您的员工通行证可能包含 NFC 芯片，它可以同时执行[`IsoDep`](http://developer.android.com/reference/android/nfc/tech/IsoDep.html)和[`MifareClassic`](http://developer.android.com/reference/android/nfc/tech/MifareClassic.html)。您可以通过调用NFC Intent 中[`getTechList()`](http://developer.android.com/reference/android/nfc/Tag.html#getTechList%28%29)的对象来准确了解标签支持的内容。`Tag`

在您的应用程序中，您可以同时访问`IsoDep`和`MifareClassic`，但不能同时访问（`close()`在切换到另一种技术之前先调用）。`IsoDep`是可以在方法中使用 APDU 命令的技术`transceive()`。

# asp.net - Telerik rad 日期选择器在用户键入未来日期时显示错误消息

> ID：11257539
> 
> 赞同：4
> 
> 时间：2012-06-29T07:09:24.433
> 
> 标签：asp.net, validation, telerik, raddatepicker

我有一个`telerik:RadDatePicker`通过在后面的代码中将 MaxDate 设置为今天来限制用户选择未来日期。这工作得很好。但是当用户输入一个大于今天的日期时，它只会显示一个！在日期选择器中，如下所示：

![在此处输入图像描述](../Images/4cb569ea832cc618c1cae15640e044f9.png)

相反，我想向用户显示一条错误消息“不允许未来日期”我该如何实现？以下是现有代码：

```
<telerik:RadDatePicker CssClass="cssDate" ID="fromDate" runat="server" 
 Skin="Vista">
 <DateInput ID="DateInput1" runat="server" LabelCssClass="datePick" Skin="Vista">
  </DateInput>
 <Calendar ShowRowHeaders="false" ID="Calendar1" runat="server" UseRowHeadersAsSelectors="False" UseColumnHeadersAsSelectors="False"
ViewSelectorText="x" Skin="Vista">
</Calendar>
<DatePopupButton CssClass="rcCalPopup"></DatePopupButton>
 </telerik:RadDatePicker> 
```

以及我设置最大日期的代码：

```
 fromDate.MaxDate = DateTime.Now; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T06:56:45.787

经过几天的研究并询问爷爷谷歌，他向我提供了telerik官方论坛的链接，他们确认这是无法做到的。

[链接](http://www.telerik.com/community/forums/aspnet/calendar/raddatepicker-validate-manually-entered-value.aspx)到我想说的。

回复说“*实际上我们已经稍微修改了错误处理逻辑，因为我们最初的实现看起来不太直观。如果输入垃圾输入或选择了超出范围的日期，控件将在内部将其值设置为 null；可见输入字段不会清除其内容，但会以无效样式显示它们，直到输入有效值。但是，您仍然需要在输入组件的客户端 OnError 事件处理程序中处理可能的解析错误（您可以在此处找到另一个示例) 就好像输入不包含有效日期一样，它将向服务器发布空值，并且无法关闭此功能。* ”

希望这条信息对其他人有帮助:)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T13:34:59.703

例如，您可以通过不允许用户通过键入日期和仅使用日历控件来输入日期来解决此问题；

```
<telerik:RadDatePicker ID="dt" runat="server" 
                        EnableTyping="false" onkeydown="javascript:return false;" ...... /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-01T06:42:07.187

使用 OnError 逻辑...

```
function tbApplyTime2_dateError(sender, args) {

<DateInput ClientEvents-OnError="tbApplyTime2_dateError" /> 
```

处理进来的错误类型：

```
switch (args.get_reason()) {
            case Telerik.Web.UI.InputErrorReason.ParseError:
                validationMessageLabel.text('Invalid Date entered');
                break;
            case Telerik.Web.UI.InputErrorReason.OutOfRange:
                validationMessageLabel.text('Date must be after sent time');
                break;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-03T13:42:52.553

此代码有效，它显示一条警报消息，并在输入未来日期时将日期重置为其先前的值。

```
<script type="text/javascript">

    function ValidateDate(sender,args) {
        var datePicker = $find("<%=RadDatePicker1.ClientID%>");
        var todayDate = new Date("<%= System.DateTime.Today %>");
        todayDate.setHours(0, 0, 0, 0);

        if (args.get_newDate() > todayDate) {
            datePicker.set_selectedDate(args.get_oldDate());
            alert("Can not enter future dates.");
        }
    }

</script>

<telerik:RadDatePicker ID="RadDatePicker1"  runat="server" ClientEvents-OnDateSelected="ValidateDate">
    <Calendar ShowRowHeaders="false"></Calendar>
</telerik:RadDatePicker> 
```

# php - PHP：输出完成后继续

> ID：11257542
> 
> 赞同：0
> 
> 时间：2012-06-29T07:09:31.207
> 
> 标签：php, process

首先，我不是在寻找 ignore_user_abort。相反，我寻找一个函数来完成输出并将文档发送给用户。之后，我希望 php 脚本执行额外的过程，这需要几秒钟对用户没有影响，只有后台进程。

用户也没有理由等待此操作完成。输出已经准备好迎头赶上。PHP 是否提供关闭与用户的连接的功能，但在服务器上停留一段时间以完成工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:29:04.110

php-fpm You 的最佳功能之一是 fastcgi_finish_requests()。这将完成客户端的会话并在服务器端继续该过程。它也是消息传递的最佳用例，作为 cron 队列或延迟处理的替代方案。

但是，它仅限于 php-fpm！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:06:22.037

脚本运行后，将条目添加到队列表中。然后运行一个 cron 作业来处理队列，锁定记录，然后在处理它们时将其删除，因此如果您的 cron 重叠，它们不会两次执行相同的作业。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T07:13:49.317

您应该将您的工作分成 2 个文件，（一个具有初始处理，产生输出），第二个较重的文件需要几秒钟，但不应让用户等到完成。

然后，让浏览器使用 Ajax 或 hidden 调用它`iframe`。

您甚至可以让第二个脚本返回一个成功/失败通知，并使用 JavaScript 捕获它以通知用户，而不会影响他的实际初始输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T07:14:30.217

看起来你想要的是一些 ajax 的东西。如果您将响应发送回用户，则脚本将结束。但是使用 javascript，您可以启动对另一个 php 脚本的 ajax 调用，该脚本不会为用户更改任何内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T07:16:19.707

您可以尝试使用`curl();`ping localhost 并触发另一个脚本执行来运行您拥有的任何额外任务。

# java - 如何将接口名称动态传递给实现类

> ID：11257547
> 
> 赞同：-2
> 
> 时间：2012-06-29T07:10:17.353
> 
> 标签：java, osgi

如何在osgi中动态地将接口​​名称传递给实现类？

我需要一些在逻辑上意味着这样的东西：

```
// where the interface name is provided at runtime in Component.xml of declarative sevices in osgi
public class Foo implements <T> {
 // do something
} 
```

并且无论我传递什么接口名称，它都应该实现该接口（因为该类实现了我传递的接口的所有方法）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:22:10.543

你可以用 CGLIB 做各种疯狂的事情，但*大多数时候*你应该重新考虑你做事的方式，你可能会找到一个更简单的解决方案。

# jquery - jquery高亮效果

> ID：11257549
> 
> 赞同：0
> 
> 时间：2012-06-29T07:10:24.513
> 
> 标签：jquery, highlight, effect

我正在尝试找出在[http://www.w3schools.com/jquery/trysel.asp?filename=trysel_basic&jqsel=p.intro,%23choose](http://www.w3schools.com/jquery/trysel.asp?filename=trysel_basic&jqsel=p.intro,%23choose)上找到的 jquery 选择器测试的代码。

我收到错误：

> 未捕获的语法错误，无法识别的表达式：“h1”jquery.js:4241

当我在文本框中输入 h1 时，在 Chrome 开发人员工具中。右边它应该突出显示`<h1>`标签内的“欢迎来到我的主页”。

有人可以指出我要去哪里错了吗？谢谢你。

以下是我的代码：

```
<html>
<head>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $(":button").click(function(){
        var hl_str= '"'+$(":text").val()+'"';
        //document.write(hl_str);
        $(hl_str).effect("highlight",{color:"ff0000"},3000);
    });
})
</script>
</head>
<body>
<input type="text">
<input type="button" value="Edit and Click Me">
<h1>Welcome to My Homepage</h1>
<p class="intro">My name is Donald</p>
<p>I live in Duckburg</p>
<p>My best friend is Mickey</p>
Who is your favourite:
<ul id="choose">
<li>Goofy</li>
<li>Mickey</li>
<li>Pluto</li>
</ul>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T07:21:05.047

构建“hl_str”字符串时不需要引号。

尝试：

```
var hl_str = $(":text").val(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T07:27:21.113

我认为您只是不匹配某些对象。我建议您尝试使用 contains 来搜索值

```
jQuery('p:contains("Donald")').effect("highlight",{color:"#ff0000"},3000); 
```

[http://api.jquery.com/contains-selector/](http://api.jquery.com/contains-selector/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T07:35:30.410

`effect()`不是 jQuery 的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T07:59:38.843

我并不完美，但我认为这是一种可能的方法：

JS：

```
$("input[type=button]").click(function(){
        var hl_str = $("input[type=text]").val();   

    $('#mycontainer').find('*').contents().each(function() {
        if(this.nodeType == 3) {
            var txt = $(this).text().replace(hl_str, '<span class="effect">'+hl_str+'</span>');
            $(this).parent().html(txt);
        }
    });

}); 
```

CSS：

```
.effect{ color: #ff0000; } 
```

不起作用，就像您在此[演示](http://jsfiddle.net/svvhA/)中看到的那样，但这是一个初始点 ;-)

# c# - GMap.Net 不在控件中显示完整地图

> ID：11257550
> 
> 赞同：2
> 
> 时间：2012-06-29T07:10:24.413
> 
> 标签：c#, google-maps, gmap.net

我正在尝试制作一个能够显示地图的小型应用程序。我遇到了 GMap.Net，这对我的目的非常有用，只是地图没有完全显示在控件中。我附上一张图片，希望你能理解我的问题。

![在此处输入图像描述](../Images/932416d051fb1a354a559586705de498.png) 我的加载按钮代码是

```
private void button_Load_Click(object sender, EventArgs e)
        {
            MapControl.SetCurrentPositionByKeywords("Pakistan");
            MapControl.MapProvider = GMapProviders.BingHybridMap;
            MapControl.MinZoom = 3;
            MapControl.MaxZoom = 17;
            MapControl.Zoom = 5;
            MapControl.Manager.Mode = AccessMode.ServerOnly;

            GMapProvider.WebProxy = null;
            MapControl.Position = new PointLatLng(31.5758, 74.3269);

            GMapOverlay OverlayOne = new GMapOverlay(MapControl, "OverlayOne");

            OverlayOne.Markers.Add(new GMapMarkerGoogleRed(new PointLatLng(31.5758, 74.3269)));

            MapControl.Overlays.Add(OverlayOne);
        } 
```

另一个按钮没有像文本框那样实现。我用谷歌搜索了很多问题，但找不到解决方案，所以我的问题是，有没有办法用地图填充地图控制区域？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T07:20:15.567

您想设置`client Size`。这需要控制大小并分配给要呈现的客户端

```
Size siz = new System.Drawing.Size(MapControl.Width,MapControl.Height);
MapControl.ClientSize = siz; 
```

# javascript - 如何更改 Bootstrap 下拉列表的形式？

> ID：11257555
> 
> 赞同：0
> 
> 时间：2012-06-29T07:10:38.693
> 
> 标签：javascript, twitter-bootstrap

我正在使用 Twitter Bootstrap，我想让下拉列表看起来像这样：

![在此处输入图像描述](../Images/d1ee2e38c9aa97c63413c39a8fb553c1.png)

现在是默认情况下，如下所示：

[http://i.imgur.com/0zmyZ.png](https://i.imgur.com/0zmyZ.png)

这是html代码：

```
 <li class="dropdown">
          <a href="#" class="dropdown-togle" data-toggle="dropdown">
          <b>Download</b>
          <b class="caret"></b></a>
          <ul class="dropdown-menu">
          <li><a href="#">Link</a></li>
            <li><a href="#">Link2</a></li>
            </ul>
            </li> 
```

**已编辑 - 示例：http:** [//jsfiddle.net/gnEAe/2/](http://jsfiddle.net/gnEAe/2/)

我想，我应该在 dropdown.js 中覆盖一些东西还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:18:41.517

好的，我已经编辑了 jsfiddle ...

首先添加类测试 where

`<div class="navbar test">`

你也需要像这样添加css....

```
.test .dropdown-menu:after, .test .dropdown-menu:before {
    border:0 !important;
}

.test .dropdown-menu {
    left:-13px;
    border: 1px solid rgba(0, 0, 0, 0.2);
    border-top:none !important;
} 
```

这会给你我在说什么的基本概念...... [http://jsfiddle.net/gnEAe/3/](http://jsfiddle.net/gnEAe/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T07:18:48.240

事实上，您不需要在您的 javascript 中覆盖某些内容。但是你应该写一些 CSS 来设置你的列表样式。

这是样式列表的教程：

[http://css.maxdesign.com.au/listutorial/](http://css.maxdesign.com.au/listutorial/)

# c - 一旦我在 C++ 中使用宽字符串，程序就会崩溃

> ID：11257558
> 
> 赞同：1
> 
> 时间：2012-06-29T07:10:56.627
> 
> 标签：c, memory, lua, widestring

（由于我还没有足够的声望来回答我自己的问题，所以我先把它放在这里。我发布它时并没有想清楚。对我来说是凌晨 3 点，我没想到在别处寻找问题。

我正在制作另一个函数来在 lua 中动态添加一个对象，该对象有自己的消息要显示。这就是给我带来问题的那个，所以一旦我静态加载它就可以了。这确实是另一部分代码的问题。）

我在这里遇到了一个很奇怪的问题

我的 C++ 代码使用 lua（没有 boost 库），因此它可以从 lua 检索变量等，并且 lua 可以调用已注册的 C 函数。

现在我有两个版本的函数，一个用于 ANSI，另一个用于 Unicode（中文）。ANSI 版本似乎工作正常，并且不会中断。问题出在 unicode 版本上。

我设法解密了 ANSI 格式的 unicode，所以这一切都很好。现在的问题是它可以正常工作几次，但是当我多次重复相同的 lua 代码时，程序会崩溃。我仍然无法判断这是 lua 堆栈的问题还是只是内存的问题。

这是代码首先给出代码，这就是我将其缩小到的范围

```
int l_showMSG(lua_State *l)
{
    printf("showMSG::begin\n");

    SDL_SemWait(msgLock);
    char* fontname = (char*) lua_tostring(mainL,-1); lua_pop(mainL,1);
    wchar_t* txt = (wchar_t *) lua_tostring(mainL,-1);

    wstring msg = wstring(txt);  //this is the code that breaks

    lua_pop(mainL,1);
    SDL_SemPost(msgLock);
    printf("showMSG::done\n"); //it seens to get here or break in the line above depending on what I uncomment in my actual code o.o
    return 0;
} 
```

所以经过几个小时的 printf 和测试，我发现 wstring msg = wstring(txt) 是打破它的行。

我通过使用widestringstream解决了这个问题，至少在这里不会崩溃（尽管我仍然必须修复其他函数才能使用widestringstream才能工作，可能）

但是，一旦我添加了类似 wstring msg = buf.str() //buf 作为流的行，就会出现同样的问题。

所以我想知道，发生这种情况的原因可能是什么？当我在 Code::Blocks 中打开调试模式时它工作正常，但显然这不是一个好的解决方案，我在 Windows 中，所以我也不能使用 Valgrind，有什么建议吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T16:42:07.577

我终于找到了，所以这是由另一个问题引起的。我正在使用 lua 将一个对象动态添加到屏幕上，该对象进入一个单独的列表，所以当我访问这些单独列表中的元素时，某些地方可能会被覆盖，并且问题只会在稍后尝试显示文本时出现.

所以，是的，总有一些其他的可能性，哈哈

永远不要相信你在凌晨 3 点做的工作

# java - 多个配置文件中的数据库属性

> ID：11257567
> 
> 赞同：0
> 
> 时间：2012-06-29T07:11:49.597
> 
> 标签：java, hibernate, quartz-scheduler

在我们的 struts2 web 应用程序中，我们使用 Hibernate ORM 进行 DB 通信。我们在默认的 hibernate.cfg.xml 文件中配置了所有的连接属性。连接属性因环境而异，即，它们在本地开发系统、测试版、登台和现场直播中是不同的。

最近我添加了quartz.properties 文件，以便将计划的作业详细信息存储在数据库中。我在quartz.properties 中再次提供数据库属性，例如

```
#quartz table prefixes in the database

org.quartz.jobStore.tablePrefix = QRTZ_

org.quartz.jobStore.misfireThreshold = 60000

org.quartz.jobStore.isClustered = false

#The details of the datasource specified previously

org.quartz.dataSource.myDS.driver = com.mysql.jdbc.Driver

org.quartz.dataSource.myDS.URL = jdbc:mysql://localhost:3306/gsraisin

org.quartz.dataSource.myDS.user = root

org.quartz.dataSource.myDS.password = rootAdmin

org.quartz.dataSource.myDS.maxConnections = 20 
```

有没有办法我可以在单个位置使用属性，即如果可能在 hibernte.cfg.xml 中，然后对 Quartz 应用程序使用相同的详细信息。请相应地建议我。

# jquery - jquery 对话框没有第二次出现......？

> ID：11257568
> 
> 赞同：0
> 
> 时间：2012-06-29T07:11:52.477
> 
> 标签：jquery

我正在使用简单的模态窗口对话框弹出来显示一个表格。当我单击此表的单元格时，将出现另一个 jquery 对话框弹出，在此弹出窗口中我显示另一个表（动态内容）。现在的问题是，当我第一次访问它们但第二次在谷歌浏览器（版本 19.0.1084.56 m）中无法正常工作并且在 mozilla（13.0.1）中正常工作时，这两个 dilaog 都可以正常工作

```
 I am giving some code snippet if there is something wrong plz help me....
 //my first function which creates simple modal dialog on which i am writing content of another page dash.jsp (creating table )
      // Maptrans.jsp page
       function clicker1(){
                          alert("modal1");
                  var divString="<table>"+
                 "<tr>"+
                              "<td>
                                   <table>
                                        <div id='dash'></div>
                                  </table>
                             </td>"+
                         "</tr>
                 </table>";
                       alert("modal2");
                       $("#basic-modal-content").html(divString);
                       $("#basic-modal-content").modal();
                       alert("modal3");

    //Getting data of dash.jsp and write on dash div
               $.post("dash.jsp",function(data){
                       $("#dash").html(data);
               });

 // dash.jsp function called when i will click on cell of first table
    function access(test1,facilityName,status){
       alert("dialog1");
var divString="<table>"+
                      "<tr>"+
                          "<td >
                              <div id='rfidMove'><img src='img/basic/loader0.gi/></div>
                         </td>"+
        "</tr>
              </table>";

           alert("dialog2");

$("#rfi").html(divString);

$("#rfi").dialog({  
           width: '650',
           height: '500',
           zIndex : '3000',
           modal:true, 
           title: "RFID INVENTORY DETAIL",
           overlay: { opacity: 0.1, background: 'black'},
           open: function(event, ui) {
              $("#rfidMove").css("display", "");
           },
           close: function(event, ui){

            $("#rfi").dialog('destroy');

           }
  });

    alert("dialog3");

  $.post("RfidInventory.jsp?","container="+test1+"&facilityName="+facilityName+"&status="+status, function(data){

         alert("dialog4");

         $("rfidMove").css("display","none");
         $("#rfi").html(data);  

      });
 }

 // In both function i am getting alert before creation of dialog but after dialog creation code not....   
I have spent alot of time to figure it out but unable to  found any solution plz help ... Thanks 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:42:29.750

`$("#rfi").dialog('destroy');`每次对话框关闭时都需要吗？
我认为，最好在其他地方创建一次对话框，例如在表格单元格`jquery.ready()`中`.open()`单击时创建对话框。

**编辑：**
也许，你需要这样的东西：

```
$(function(){
    //construct dialog once in jquery.ready()
    $("#rfi").dialog({  
           width: 650,
           height: 500,
           zIndex : 3000,
           modal:true, 
           title: "RFID INVENTORY DETAIL",
           overlay: { opacity: 0.1, background: 'black'},
           open: function(event, ui) {
              $("#rfidMove").css("display", "");
           }
    });
}) 
```

**...**

```
function access(test1,facilityName,status){
       alert("dialog1");
       var divString="<table>"+
                      "<tr>"+
                          "<td >
                              <div id='rfidMove'><img src='img/basic/loader0.gi/></div>
                         </td>"+
        "</tr>
              </table>";

           alert("dialog2");

$("#rfi").html(divString);

    //reuse already created dialog
    $("#rfi").dialog('open');

    alert("dialog3");

  $.post("RfidInventory.jsp?","container="+test1+"&facilityName="+facilityName+"&status="+status, function(data){

         alert("dialog4");

         $("rfidMove").css("display","none");
         $("#rfi").html(data);  

      });
 } 
```

请修正你的缩进。看代码很痛苦:)

# c# - 单击 SolutionExplorer 节点扩展器时是否有任何事件？如何使用扩展器获得一个空的解决方案节点？

> ID：11257573
> 
> 赞同：0
> 
> 时间：2012-06-29T07:12:07.517
> 
> 标签：c#, .net, visual-studio-2010

我正在实现该功能，在 Visual Studio shell 的解决方案资源管理器中显示所有文件。不知何故，Visual Studio 已经实现了 NonMemberItems 的延迟加载。我也想实现同样的。但是，如果我创建一个空文件夹节点，则在单击时没有展开节点的扩展器（三角形图标或 + 号）。所以空的Foldernode没有扩展器？

1.  谁能告诉我如何实现这个？

2.  如何获取展开的可展开文件夹节点，我可以触发和事件，它将加载节点内的文件。

3.  如何获得扩展时可以触发的此类事件？（我知道有一个事件，比如双击节点等）

请任何人，如果有任何解决方案回复。

PS：我正在实施一个项目系统。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T08:51:22.620

根据您提供的更新，您正在使用 .NET Treeview 控件并尝试实现 treeview 节点的按需加载。许多第三方供应商，例如 Telerik、Syncfusion、Devexpress 等，都为 WF 和 WPF 提供了此功能。希望您在 WPF 平台上开发系统，您可以使用它们来实现这一点。在 MS Treeview 控件中，您可能需要解决方法来实现此行为。

[http://demos.telerik.com/silverlight/#TreeView/LoadOnDemand](http://demos.telerik.com/silverlight/#TreeView/LoadOnDemand)

[http://help.syncfusion.com/UG/User%20Interface/WPF/Tools/Documents/346318loadondemand.htm](http://help.syncfusion.com/UG/User%20Interface/WPF/Tools/Documents/346318loadondemand.htm)

# mysql - MySQL 和 MFC 捕获外键错误

> ID：11257575
> 
> 赞同：0
> 
> 时间：2012-06-29T07:12:27.257
> 
> 标签：mysql, mfc

我正在开发一个程序，它使用 MySQL 数据库和一些带有外键的表。我需要让用户从其他表引用的表中删除行，但是如果引用了该行，数据库自然不会让我这样做。

问题是，当发生这种错误时，我用来连接数据库的对象给出了一个令人讨厌的错误，我想做的是在不修改对象的情况下捕获这种异常，但是，如果可以的话一个问题。

有办法吗？

# joomla2.5 - Joomla Community Builder 多个注册表单

> ID：11257577
> 
> 赞同：0
> 
> 时间：2012-06-29T07:12:33.030
> 
> 标签：joomla2.5

我是 Joomla 的新手。我已经安装了社区构建器插件并创建了两个不同的登录页面和两个注册表单。现在我需要编辑登录和注册页面，以便更改字段。我还需要为两个注册表单提交设置两个不同的用户类型。

谁能帮我吗..

任何小的帮助都非常感谢提前..

干杯，拉达

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T13:03:45.563

有一种方法可以下载社区生成器 [http://www.joomlapolis.com/community-builder](http://www.joomlapolis.com/community-builder)

然后有一个名为 CB Multi Registration 的插件 [http://extensions.joomla.org/extensions/extension-specific/community-builder-extensions/community-builder-management/13451](http://extensions.joomla.org/extensions/extension-specific/community-builder-extensions/community-builder-management/13451)

目前该插件无法下载。我也在寻找它。以及获得多个注册表单的替代方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:29:13.807

你可以通过 chronoform 和 cummunity builder 来做到这一点

检查这个：[http ://back2dlab.com/tutorial/multi-page-forms-for-community-builder-joomla-registration](http://back2dlab.com/tutorial/multi-page-forms-for-community-builder-joomla-registration)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-24T09:20:55.697

Community Builder Profile Pro 正是您所需要的，它允许使用不同的注册表单创建 CB 配置文件类型。在这里查看[http://www.joomduck.com/extensions/community-builder-profile-pro](http://www.joomduck.com/extensions/community-builder-profile-pro)

# python-2.7 - 如何使用python在文件中获取35个字符以上

> ID：11257578
> 
> 赞同：0
> 
> 时间：2012-06-29T07:12:35.307
> 
> 标签：python-2.7

文件包含一些文本数据，希望从第 35 个字符开始获取字符

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T07:34:25.727

我相信您正在寻找文件的查找功能：

```
 f = open('data.txt','r')
 f.seek(34) 
 print f.read() 
```

# visual-studio-2010 - 从 Windows 上的密码保护目录中删除密码

> ID：11257579
> 
> 赞同：0
> 
> 时间：2012-06-29T07:12:35.630
> 
> 标签：visual-studio-2010, .htaccess, password-protection, plesk, .htpasswd

我已经从 Windows 服务器下载了完整目录...该目录是受密码保护的目录...由 Plesk Panel 配置以防止用户在没有密码的情况下访问 asp.net 网站。

我现在在 Visual Studio 上使用相同的代码文件，但是在浏览器上运行解决方案时，浏览器会询问网站的用户名和密码。虽然当我取消时，我仍然可以访问该页面。但是它在每次访问页面时要求输入用户名/密码。

我已经搜索了一些论坛上提到的 .htaccess 和 .htpasswd 文件以删除它..但不幸的是它不在目录中。

不知道为什么这要求用户 id 和密码以及如何删除它......有了这种东西，我也无法将网站发布到实时服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T14:05:25.180

检查是否有任何其他 url 引用的资源存储在服务器的密码保护文件夹中？如果有任何此类资源，请删除它们，或从本地系统加载它们，然后重试。

# bash - Bash 排序并跳过标题。

> ID：11257581
> 
> 赞同：4
> 
> 时间：2012-06-29T07:12:41.743
> 
> 标签：bash, sorting

我有一个脚本来对 for 循环中的某些列进行排序。我想在排序过程中跳过标题，但我失败了。这就是我所拥有的：

```
for i in file* 
do
  sort -k 1,1 -k 3,3n -t\; ${i} > h${i}
  rm ${i}
done 
```

如何在排序过程中跳过标题但将其保留在输出中？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-26T21:58:51.990

```
cat YOURFILE| (read -r; printf "%s\n" "$REPLY"; sort) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T07:17:25.300

标题是文件的第一行吗？如果是，请尝试下一个：

```
for i in file* 
do
  head -1 ${i} > h${i}
  sed 1d ${i} | sort -k 1,1 -k 3,3n -t\; >> h${i}
  rm ${i}
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T07:17:27.660

您可以在使用 sed 进行排序之前删除标题。*未经测试的代码。*

```
for i in file* 
do
  sed 1d ${i} | sort -k 1,1 -k 3,3n -t\; > h${i}
  rm ${i}
done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T06:22:49.357

这可能对您有用（GNU sed 和 Bash）：

```
sed -i '1{h;d};:a;$!{N;ba};s/.*/cat <<\\EOF|sort -k1,1 -k3,3n -t\\;\n&\nEOF/e;H;g' file* 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T12:17:55.963

```
for i in file* 
do
    awk 'NR==1;NR>1{print|"sort  -k 1,1 -k 3,3n -t\;"}' ${i} > $h{i} 
    rm ${i}
done 
```

# c# - ABCPDF 无法访问 FACILITY_INTERNET 中的 URL COM 错误 800c0019

> ID：11257582
> 
> 赞同：3
> 
> 时间：2012-06-29T07:12:46.383
> 
> 标签：c#, .net, abcpdf

我在带有 .net 4.0 的 win7 x32 上使用 ABCPDF v8.1.1.1。当我尝试在 https 上从 URl 打印页面时出现错误：

> “无法呈现 HTML。无法访问 FACILITY_INTERNET 中的 URL COM 错误 800c0019。驱动器无法定位磁盘上的特定区域或轨道。URL”

```
at WebSupergoo.ABCpdf8.Doc.AddUrl(String url, Boolean paged, Int32 width, Boolean disableCache)
   at WebSupergoo.ABCpdf8.Doc.AddImageUrl(String url, Boolean paged, Int32 width, Boolean disableCache) 
```

但是当我在 http 上打印时一切正常。谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:14:06.093

从 Rup 所说的关于这是一个 https 问题的猜测中，可能是服务器无法看到该页面。

请记住，如果这是在生产中，例如在实时服务器上，它是试图查看页面以将其添加到 pdf 链的服务器，获取您尝试查看的 URL 并将其加载到服务器浏览器上。

如果服务器位于 NAT 后面，则可能无法看到自己的公共 IP 地址，在这种情况下，您需要在服务器上的 hosts 文件中添加自定义条目。

文件位置 = C:\WINDOWS\system32\drivers\etc\hosts

条目应该看起来像......

```
# Added to resolve websites locally, instead of to their public IPs
127.0.0.1   www.yourdomain.com 
```

# java - Swing：操作后处理 JFileChooser 结果？

> ID：11257593
> 
> 赞同：0
> 
> 时间：2012-06-29T07:14:05.073
> 
> 标签：java, swing, action, jfilechooser

我想为 JFileChooser 按钮使用抽象操作，因为会有很多这样的按钮。

```
public class OpenFileAction extends AbstractAction {
JFrame frame;
JFileChooser chooser;

OpenFileAction(JFrame frame, JFileChooser chooser) {
    super("Open...");
    this.chooser = chooser;
    this.frame = frame;
}

public void actionPerformed(ActionEvent evt) {
    // Show dialog; this method does not return until dialog is closed
    chooser.showOpenDialog(frame);
}
}; 
```

显然我想将 JFileChooser 结果写入一个变量。操作完成后如何访问 e.getSource() ？这不起作用，因为它是在 FileChooser 对话框打开之前触发的：

```
 JButton btnNewButton_1 = new JButton(new OpenFileAction(new JFrame(), new JFileChooser(new File(".")) ) );
    btnNewButton_1.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            //process e.getSource() ?
        }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T07:47:03.020

我认为您所追求的是以下内容：

```
public abstract class OpenFileAction extends AbstractAction {
    JFrame frame;
    JFileChooser chooser;

    public OpenFileAction(JFrame frame, JFileChooser chooser) {
        super("Open...");
        this.chooser = chooser;
        this.frame = frame;
    }

    public void actionPerformed(ActionEvent evt) {
        int option = chooser.showOpenDialog(this.frame);
        if (option == JFileChooser.APPROVE_OPTION) {
            File selectedFile = chooser.getSelectedFile();
            doWithSelectedFile(selectedFile)
        }
    }

    /**
     * Method to override, which gets called with the selected file.
     */
    protected abstract doWithSelectedFile(File file);
}

...

OpenFileAction action = new OpenFileAction(frame, new JFileChooser(new File("."))) {
    @Override
    protected void doWithSelectedFile(File file) {
        // do what you want here
    }
};
JButton button = new JButton(action); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T07:26:25.410

这是您的代码更新，展示了如何解决这个问题。不需要您的动作侦听器，因为您已经`Action`在 J​​Button（它也是一个 ActionListener）上设置了一个。

```
import java.awt.Component;
import java.awt.event.ActionEvent;
import java.io.File;

import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.SwingUtilities;

public class TestFileChooser {

    public static class OpenFileAction extends AbstractAction {
        JFileChooser chooser;

        OpenFileAction(JFileChooser chooser) {
            super("Open...");
            this.chooser = chooser;
        }

        @Override
        public void actionPerformed(ActionEvent evt) {
            int retval = chooser.showOpenDialog((Component) evt.getSource());
            if (retval == JFileChooser.APPROVE_OPTION) {
                File selectedFile = chooser.getSelectedFile();
                JOptionPane.showMessageDialog((Component) evt.getSource(), "You have chosen " + selectedFile.getAbsolutePath());
            }
        }
    };

    protected void initUI() {
        JFrame frame = new JFrame("Test file chooser");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JFileChooser chooser = new JFileChooser(new File("."));
        JButton btnNewButton_1 = new JButton(new OpenFileAction(chooser));
        frame.add(btnNewButton_1);
        frame.setSize(600, 400);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestFileChooser().initUI();
            }
        });
    }
} 
```

[这是关于JFileChooser](http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html)的教程，它可能会提供更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T07:53:49.790

**编辑：**

以下代码适合您：

```
JButton openButton = new JButton();
openButton.addActionListener(new ActionListener(){
    public void actionPerformed(evt){
        final JFileChooser fileChooser = new JFileChooser();
        File openFile;
        if(fileChooser.showOpenDialog(frame) == JFileChooser.APPROVE_OPTION)
            openFile= fileChooser.getSelectedFile();
        //place your code here
    }
}); 
```

**或**（如果您绝对需要本地方法）

```
JButton openButton = new JButton();
openButton.addActionListener(new ActionListener(){
    public void actionPerformed(evt){
        final JFileChooser fileChooser = new JFileChooser();
        if(fileChooser.showOpenDialog(frame) == JFileChooser.APPROVE_OPTION)
            openButtonActionPerformed(fileChooser.getSelectedFile());
    }
});
openButtonActionPerformed(File openFile){
    //place your code here
} 
```

无需创建另一个类

# python - 为什么我在 python (sqlite3) 中出现语法错误？

> ID：11257594
> 
> 赞同：1
> 
> 时间：2012-06-29T07:14:06.330
> 
> 标签：python, sqlite

为什么我收到以下行的语法错误？

```
statement = self.sql.execute("DESCRIBE TEST") 
```

我收到以下错误：

sqlite3.OperationalError：在“DESCRIBE”附近：语法错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T07:16:38.920

`DESCRIBE`不是有效的 sqlite3 命令，请使用`.schema TEST`

# java - 如何使用apache poi在excel中将日期设置为类型日期？

> ID：11257595
> 
> 赞同：8
> 
> 时间：2012-06-29T07:14:11.173
> 
> 标签：java, excel, apache-poi

我正在使用 apache poi 3.8 创建一个 excel 文件。这个excel文件需要包含一些日期。

我正在尝试使用 excel 类型“日期”的格式将日期写入 excel 文件。但我总是得到一种“自定义”类型。我需要使用“日期”类型，因此它将根据用户设置进行本地化。

我尝试了以下方法：

[Apache poi 日期格式](https://stackoverflow.com/questions/9756748/apache-poi-date-format)

[Apache POI 将日期本地化为 Excel 单元格](https://stackoverflow.com/questions/10230204/apache-poi-localized-date-into-excel-cell)

但它不起作用。

这是我拥有的代码：

```
XSSFWorkbook wb = new XSSFWorkbook();
XSSFSheet sheet = wb.createSheet("new sheet");

XSSFDataFormat df = wb.createDataFormat();
CellStyle cs = wb.createCellStyle();
cs.setDataFormat(df.getFormat("d-mmm-yy"));

XSSFCell cell = sheet.createRow(0).createCell(0);

Calendar c = Calendar.getInstance();
c.set(2012,3-1,18);
cell.setCellValue( c.getTime() );

cell.setCellStyle(cs);

// Write the output to a file
FileOutputStream fileOut = new FileOutputStream("c:\\temp\\dates-sworkbook.xlsx");
wb.write(fileOut);
fileOut.close(); 
```

我应该使用哪种格式？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T10:54:43.190

*日期*是一种特殊的内置格式。如果你想明确地使用那个，那么你需要明确地选择它。（Excel 中使用的几乎所有格式都是自定义格式，以您指定的方式呈现，但也有一些特殊格式）

[POI 在BuiltinFormats](http://svn.apache.org/repos/asf/poi/trunk/src/java/org/apache/poi/ss/usermodel/BuiltinFormats.java)中有完整的特殊内置格式列表（比最近的 Excel 副本中的下拉列表中的格式列表要小得多！）。如果您确保设置其中之一，而不是您自己的自定义格式字符串，它的行为应该完全符合您的预期

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T11:37:39.617

真的不知道你是否已经解决了这个问题，但这里有一个可以解决它的代码。它实际上解决了我的问题。

```
CreationHelper createHelper = wb.getCreationHelper();
...
cs.setDataFormat(createHelper.createDataFormat().getFormat("yourformat")); 
```

取自 [http://poi.apache.org/spreadsheet/quick-guide.html#CreateDateCells](http://poi.apache.org/spreadsheet/quick-guide.html#CreateDateCells)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-15T09:19:31.143

我理解你的问题。我使用 Apache Poi 的 DateUtil 解决了。

```
Cell cell = yourRow.createCell(yourIndex);
cell.setCellValue(DateUtil.getExcelDate(yourDate); 
```

享受 ！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-30T21:11:34.183

使用以下方法解决：

```
DataFormatter fmt = new DataFormatter();
Object Excel1data=Excel.readExcel(Excel1, "Sheet3", rownumber, columnnumber1);
            String valueAsInExcel1 = fmt.formatCellValue((Cell) Excel1data);

            Object Excel2Data=Excel.readExcel(Excel2, "Sheet2", getrownumber, columnnmumber2);
            String valueAsInExcel2 = fmt.formatCellValue((Cell) Excel2Data);

            org.testng.Assert.assertEquals(valueAsInExcel1, valueAsInExcel2,"Incorrect data in RowNumber:"+getrownumber+" ColumnNumber:"+columnnmumber2);
            columnnumber1++; 
```

# java - 如何扫描包中的 Hibernate 实体而不是使用 hbm.xml？

> ID：11257598
> 
> 赞同：22
> 
> 时间：2012-06-29T07:14:22.667
> 
> 标签：java, spring, hibernate

`<context:component-scan>`我目前使用 Spring 3.1 和 Hibernate 4 通过是否有办法对标记的类`@Entity`而不是使用`configLocation`属性和文件执行相同的操作来扫描包中的 DAO 和服务`hbm.xml`？

```
<hibernate-configuration>
    <session-factory>
        <mapping class="com.example.model.User" />
            <!-- etc. -->
    </session-factory>
</hibernate-configuration> 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-29T07:23:40.807

```
<bean id="sessionFactory"
  class="org.springframework.orm.hibernate4.LocalSessionFactoryBean"
  p:dataSource-ref="dataSource"
  p:configLocation="WEB-INF/classes/hibernate.cfg.xml"
  p:packagesToScan="com.example.model"
/> 
```

将扫描模型包中的所有内容。我使用我的 cfg.xml 来包含 show_sql 和 hb2ddl.auto 等设置。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-29T07:27:43.320

您可以在 application context.xml 文件中执行类似操作来扫描所有注释类 -

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="lobHandler" ref="lobHandler"/>
<property name="packagesToScan">
    <list>
        <value>com.idc.scd.domain</value>
        <value>com.idc.scd.domain.dropdown</value>
        <value>com.idc.scd.domain.external</value>
        <value>com.idc.scd.domain.pk</value>
    </list>
</property>
    <property name="hibernateProperties">
      <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
            <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
        <prop key="hibernate.format_sql">${hibernate.format_sql}</prop>
        <prop key="hibernate.use_sql_comments">${hibernate.use_sql_comments}</prop>
        <prop key="hbm2ddl.auto">validate</prop>
        <prop key="hibernate.cache.use_query_cache">true</prop>
        <prop key="hibernate.connection.release_mode">after_statement</prop>
        <prop key="hibernate.cache.provider_class">net.sf.ehcache.hibernate.EhCacheProvider</prop>
        <prop key="hibernate.cache.use_second_level_cache">${hibernate.cache.use_second_level_cache}</prop>
        <prop key="hibernate.cache.use_structured_entries">${hibernate.cache.use_structured_entries}</prop>
        <prop key="hibernate.jdbc.fetch_size">${hibernate.jdbc.fetch_size}</prop>
        </props>
    </property>
</bean> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-29T07:24:59.680

您可以使用 Spring 的 mappingLocations 属性来指定 spring 将查找休眠映射文件的位置。

```
<property name="mappingLocations" value="classpath:com/example/model/hibernate/*.hbm.xml"/> 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-18T14:58:57.987

简化，您可以在配置文件“spring-servlet.xml”中使用如下代码：

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="configLocation">
            <value>classpath:hibernate.cfg.xml</value>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">${jdbc.dialect}</prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>
        <property name="packagesToScan" value="com.your.bean.package" />
    </bean> 
```

笔记：

*   “sessionFactory”中需要类 AnnotationSessionFactoryBean
*   带有带注释的类包的属性“packagesToScan”（或包列表 - 请参阅 Kumar 的示例来执行此操作）

# javascript - 使用 Jquery 多次单击提交按钮

> ID：11257603
> 
> 赞同：0
> 
> 时间：2012-06-29T07:14:37.003
> 
> 标签：javascript, jquery, html, yui

我希望我的 jquery 代码在以下表单内的提交按钮中单击多次。

我有一个 YUI 事件监听器跟踪提交事件，它每次都调用一个回调函数。如何单击一次并生成多个提交事件？

```
<!DOCTYPE html>
<html>
<head>
<style>

 button { margin:10px; }
 div { color:blue; font-weight:bold; }
 span { color:red; }
 </style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
 </head>
 <body>
<form class="forms" id="result_form" method="post" >
 <input type="submit" id = "click" value="Sum Result" ></input>
 </form>

 <button id = "B2">Button #2</button>

  <script>

  $("#click").click(function () {
  alert("Test");
  });

  $("#B2").click(function () {
  for(j=0;j<10;j++)
  $("#click").trigger('click');

   </script>

   </body>
   </html> 
```

在上面的代码中，当我单击 B2 时，我只收到一个警报，但是当我将提交放在表单之外时，我可以获得 10 个警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T07:17:46.487

您正在提交表单。结果是您离开了页面，因此您停止了所有脚本。由于您没有精确设置`action`表单的参数，它是当前页面，因此您只需在循环的第一次迭代中自行替换当前页面。

如果您想从一个页面发出多个请求而不重新加载，通常的解决方案是使用 ajax。

你可以例如做

```
for(j=0;j<10;j++) {
  $.ajax('someurl'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T22:58:08.647

您可以发布表单而无需使用 Ajax 重新加载页面。为此，您需要在提交表单时首先停止浏览器的默认行为。您可以通过调用`e.preventDefault()`提交事件来做到这一点。然后使用 ajax 并将表单序列化为数据。jQuery 和 YUI 都为此提供了实用程序：

```
// jQuery
$('#result_form').on('submit', function (e) {
  e.preventDefault();
  $.post('cmd/result', $(this).serialize());
});

// YUI
Y.one('#result_form').on('submit', function (e) {
  e.preventDefault();
  Y.io('cmd/result', {
    method: 'POST',
    form: { id: this }
  });
}); 
```

# jquery - 拦截点击提交按钮并检查表单jQuery的有效性

> ID：11257604
> 
> 赞同：4
> 
> 时间：2012-06-29T07:14:44.323
> 
> 标签：jquery, jquery-validate

我想在单击提交按钮时检查表单的有效性。如果它是有效的形式应该提交否则什么都不做。我尝试禁用提交按钮并单击检查有效性并启用它。但我发现这种方法有两个问题。1：在禁用按钮上未检测到点击 2：即使我设法检测到点击，我也可能最终陷入无限循环。启用按钮后的第二次单击将再次触发有效性检查，依此类推。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T07:20:31.757

你应该使用`event.preventDefault()`. 阅读：[http ://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

粗略的示例代码草案：

```
$('your-submit-button').click(function(event){
    if (! validate() ) {
        event.preventDefault();
        showErrors();
    }
}) 
```

您的验证功能在哪里`validate()`，如果验证失败，则返回 false。

**编辑：**
示例处理程序绑定到`click`事件，因为你想要

> 在单击提交按钮时检查表单的有效性

更好的做法是使用`.submit()`而不是`.click()`, 对任何类型的表单提交进行验证。我们的样本几乎保持不变：

```
$('#your-form-id').submit(function(event){
    if (! validate() ) {
        event.preventDefault();
        showErrors();
    }
}) 
```

# django - 自定义 Django 管理员更改密码页面

> ID：11257607
> 
> 赞同：5
> 
> 时间：2012-06-29T07:14:48.547
> 
> 标签：django, django-admin

我想拥有自己的自定义`change_password`页面，并且我已经在使用 Django 的管理员登录名（使用`from django.contrib.auth.decorators import login_required`）。
让管理员登录工作，但想更改`change_password`页面。

我怎么做？
我不确定如何链接到管理员登录，或者因为我想自定义我的 change_password，我也必须自定义我的管理员登录？

需要一些指导。谢谢...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-29T12:41:49.857

You can import the forms

`from django.contrib.auth.views import password_change`

If you look at Django's password_change view. You will notice that it takes it a view parameters which you can supply to customise the view to your own needs thus making your webapp more DRY.

```
def password_change(request,
                    template_name='registration/password_change_form.html',
                    post_change_redirect=None,
                    password_change_form=PasswordChangeForm,
                    current_app=None, extra_context=None):
    if post_change_redirect is None:
        post_change_redirect = reverse('django.contrib.auth.views.password_change_done')
    if request.method == "POST":
        form = password_change_form(user=request.user, data=request.POST)
        if form.is_valid():
            form.save()
            return HttpResponseRedirect(post_change_redirect)
    else:
        form = password_change_form(user=request.user)
    context = {
        'form': form,
    }
    if extra_context is not None:
        context.update(extra_context)
    return TemplateResponse(request, template_name, context,
                            current_app=current_app) 
```

Most notably, `template_name` and `extra_context` such that your view looks like this

```
from django.contrib.auth.views import password_change

def my_password_change(request)
        return password_change(template_name='my_template.html', extra_context={'my_var1': my_var1}) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T09:30:08.260

Django 的模板查找器允许您覆盖任何模板，在您的模板文件夹中只需添加您想要覆盖的管理模板，例如：

```
templates/
   admin/
      registration/
         password_change_form.html
         password_reset_complete.html
         password_reset_confirm.html
         password_reset_done.html
         password_reset_email.html
         password_reset_form.html 
```

# java - 从串口读取数据

> ID：11257611
> 
> 赞同：1
> 
> 时间：2012-06-29T07:15:01.140
> 
> 标签：java, serial-port

我有一个要求，我必须读取串行端口上的数据流。我正在使用 javax.comm API。

当我尝试列出端口时，使用下面的代码我从来没有得到任何端口列表。

```
portList = CommPortIdentifier.getPortIdentifiers();
System.out.println("start: "+portList.hasMoreElements()); 
```

它返回假。

如果我缺少任何东西，谁能帮助我？

* * *

我的 PS2 端口不在列表中。有没有其他方法可以列出 PS2 端口？

我的完整代码如下，

```
 while (portList.hasMoreElements()) {
       portId = (CommPortIdentifier) portList.nextElement();
       System.out.println("portid: "+portId.getName());
    } 
```

输出

```
portid: COM1
portid: COM3
portid: LPT1 
```

我的实际要求是读取 USB 端口上的数据。我在使用 JUSB 时遇到了问题，但它没有用。所以我决定让串口转USB转换器并在串口上读取。但是，市场上没有这种可转换的。

现在，想到另一项工作，我能够得到一个 PS2 到 USB 转换器。如果您能帮助我列出使用 Java 的 PS2 端口并对其进行读/写或在 Windows 平台上为相同的 API 建议一些 API，那就太好了。

非常感谢这方面的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T07:56:32.400

看看[RXTX](http://rxtx.qbang.org/wiki/index.php/Main_Page)。然后你可以使用类似的东西：

```
 CommPortIdentifier portIdentifier = CommPortIdentifier.getPortIdentifier("/dev/tty1");
 CommPort commPort = portIdentifier.open("owner-name", 2000);
 SerialPort serialport;
 if (commPort instanceof SerialPort) {
   serialPort = (SerialPort)commPort;
   serialPort.setSerialPortParams(rate, databits, stopbits, parity);
 }
 InputStream in = serialPort.getInputStream();
 OutputStream out = serialPort.getOutputStream(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T07:30:29.503

请看： [http](http://www.intellog.com/blog/?p=255) ://www.intellog.com/blog/?p=255和[http://www.coderanch.com/t/535173/Streams/java/CommPortIdentifier-getPortIdentifiers-empty](http://www.coderanch.com/t/535173/Streams/java/CommPortIdentifier-getPortIdentifiers-empty)（后者指向第一个)

Oracle 不提供 Windows 的二进制文件（假设您在 Windows 上）：[http ://www.oracle.com/technetwork/java/index-jsp-141752.html](http://www.oracle.com/technetwork/java/index-jsp-141752.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-05T03:29:31.647

我正在使用 ubuntu 并且我的计算机没有任何串行/并行端口，但我需要在其上进行开发。

在这种情况下，您需要模拟此端口。

我的答案：

[在ubuntu上用java进行串口识别](https://stackoverflow.com/questions/18669379/serial-port-identification-with-java-on-ubuntu/21567949#21567949)

# php - 如何从drupal的提交表单中获取php中的值

> ID：11257614
> 
> 赞同：0
> 
> 时间：2012-06-29T07:15:09.160
> 
> 标签：php, forms, drupal, post

我们有表单，我们需要通过编写的 php 代码访问值。但是 $_POST 在 drupal 中不起作用。

我们需要知道如何访问 php 中的所有提交值，请任何人帮助我们吗？...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T07:46:26.663

这是在 Drupal 中呈现并从 Drupal 读取的表单吗？然后使用[FAPI](http://api.drupal.org/api/drupal/includes!form.inc/group/form_api/7)很容易。您只需要向表单添加一个提交回调。

如果是你自己的模块形式，只需要创建另一个带`_submit`后缀的函数，比如`mymodule_form_function_submit`. 如果它是其他人的表单，您将需要实现[`hook_form_alter`](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_form_alter/7)并让它添加您的提交回调，如下所示：

```
function mymodule_form_alter(&$form, &$form_state, $form_id) {
  if ($form_id == 'the_form') {
    $form['#submit'][] = 'mymodule_the_form_submit';
  }
} 
```

然后简单地实现回调函数。

```
function mymodule_the_form_submit($form, $form_state) {
  die('My name is ' . $form_state['values']['name']);
} 
```

使用 Drupal 的内置表单 API 具有将验证与业务逻辑分开的额外好处。这意味着您还可以添加验证回调，就像添加提交一样。如果验证回调调用[`form_set_error()`](http://api.drupal.org/api/drupal/includes!form.inc/function/form_set_error/7)，那么您的提交回调甚至不会被调用，因此它可以安全地依赖于拥有正确的数据。

# iphone - iOS内存问题

> ID：11257615
> 
> 赞同：3
> 
> 时间：2012-06-29T07:15:11.823
> 
> 标签：iphone, ios

我正在运行一个应用程序，有时我们会收到“内存警告”，通过检查内存使用情况，我们发现我们使用了大约 14MB 的实际内存。但与此同时，在我们的系统中，还有其他应用程序使用了比我们更多的内存（例如 50MB 实际内存），但它们还活着，我们被杀死了。

我很好奇iOS是如何管理应用程序的，我们担心如果用户的手机里塞满了其他应用程序，我们的应用程序就会被杀死。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T07:37:47.863

我可能是错的，但从我看来，如果你的内存正在迅速扩展，你有更高的机会让你的应用程序被杀死。另一个应用程序的扩展速度可能比您的慢（内存使用/存活时间）。在它被杀死之前，我能够在一个应用程序中拥有 80mb 的实际内存。我猜有某种机制可以计算内存增长的速度并采取适当的行动。

# php - 将 AES 从 Coldfusion 解密为 PHP

> ID：11257620
> 
> 赞同：0
> 
> 时间：2012-06-29T07:15:24.100
> 
> 标签：php, coldfusion, aes, encryption

我使用以下方法在 ColdFusion 中加密了一个字符串：

```
<cfset strEnc=ToBase64(Encrypt("some text","123", "AES","Base64"))> 
```

我可以使用以下方法解密 ColdFusion 中的字符串：

```
<cfset strDec=ToString(Decrypt(ToBinary(strEnc), "123", "AES","Base64"))> 
```

但我无法`strEnc`在 PHP 中解密。我在 PHP 中发现了一些解密函数。但它们需要一个`iv`参数。谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T07:56:01.630

每种语言提供的本机方法在预期参数、参数和加密方法方面会有所不同。

为了能够以一种语言加密并以另一种语言解密，您需要使用“全球”安全工具 - 一种跨语言工作的工具。

我建议您查看 ESAPI（企业安全 API）[https://www.owasp.org/index.php/Category:OWASP_Enterprise_Security_API](https://www.owasp.org/index.php/Category:OWASP_Enterprise_Security_API)，这是一个由 OWASP（开放 Web 应用程序安全项目）创建的开源安全库) [https://www.owasp.org](https://www.owasp.org)

ESAPI 库 ( [https://github.com/damonmiller/cfesapi](https://github.com/damonmiller/cfesapi) ) 和 PHP 库 ( [http://code.google.com/p/owasp-esapi-php/](http://code.google.com/p/owasp-esapi-php/) )有一个 ColdFusion 特定的实现

由于两者都建立在相同的核心安全实践之上，因此各种方法的实现可以在您希望使用它们的任何平台/语言上运行。

ESAPI 本质上是使用一系列接口构建的，这些接口允许您选择和使用安全库的各个部分以满足您的需求。

看看 Encryptor，它提供了散列和加密数据的方法。如果您想走那么远，它还可以签名和盖章以添加额外的数据完整性检查。（这完全取决于您想深入到什么程度）。

ESAPI 本质上允许开发人员在库将从中读取的安全配置文件（一个简单的文本文件）中设置详细信息，例如哈希和盐密钥、加密密钥和其他详细信息。在这种情况下，您的 PHP 实现很容易与您的 ColdFusion 实现具有相同的安全细节，这意味着它们将共享相同的加密/哈希/盐等细节，因此会将相同的数据加密和解密为相同的值。

我没有在此评论中添加任何代码示例，但如果这听起来可以帮助您并满足您的要求，请查看上面提到的 ESAPI 库的链接。它很容易上手和学习，并且可以轻松完成您需要的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T11:03:36.847

```
$key = base64_decode($key);

$data = base64_decode($data);

echo mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $key, $data, MCRYPT_MODE_ECB); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T07:17:19.143

看看**[`base64_decode()`](http://php.net/manual/en/function.base64-decode.php)**和**[`aes_decrypt`](https://stackoverflow.com/questions/3422759/php-aes-encrypt-decrypt)**

# php - 如何使用 PHP Simple HTML DOM 解析器解析汉字？

> ID：11257624
> 
> 赞同：2
> 
> 时间：2012-06-29T07:16:01.797
> 
> 标签：php, parsing, simple-html-dom

我正在尝试使用简单的 HTML DOM ( [http://simplehtmldom.sourceforge.net](http://simplehtmldom.sourceforge.net) ) 解析一个中文网站，但面临的问题是所有解析的中文字符都变成了无法识别的符号。

例子：“星洲网”变成了“æ～Ÿæ´²ç¶²”

如何使用 Simple HTML DOM 解析 UTF-8 字符？或者我在编码中做错了什么？

下面是我的 PHP 编码：

```
<?php
require_once ("simple_html_dom.php");

$html = file_get_html("http://www.sinchew-i.com");
print $html->plaintext;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-04T07:36:48.407

```
header('Content-Type: text/html; charset=utf-8'); 
```

Check this [Handling unicode](http://kunststube.net/frontback/)

# zend-framework - Zend 框架中的样式表视图助手

> ID：11257626
> 
> 赞同：0
> 
> 时间：2012-06-29T07:16:08.770
> 
> 标签：zend-framework, zend-view, zend-layout

我想在 head 标签内附加 css 样式表，但被附加到 body 标签。这就是我所做的：我有一个控制器“国家”，动作为“索引”，我的视图是 index.phtml

index.phtml 包含：

```
<?php
 $this->headLink()->appendStylesheet($this->baseUrl().'/js/dojo-1.7/dojo/resources/dojo.css')
             ->appendStylesheet($this->baseUrl().'/js/dojo-1.7/dojox/grid/resources/claroGrid.css');
 echo $this->headLink(); 
```

这会导致样式表被附加到 body 标记内。我只希望将这些样式表附加到此操作中。我不想在我的 layout.phtml 中包含这个样式表我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T07:48:53.650

您所做的是正确的，但是您只是在添加样式表之后在您的视图中回显 headLink() ，这是在错误位置输出链接的原因。更改您的代码，以便您拥有：

在 index.phtml 中：

```
$this->headLink()->appendStylesheet($this->baseUrl().'/js/dojo-1.7/dojo/resources/dojo.css')
         ->appendStylesheet($this->baseUrl().'/js/dojo-1.7/dojox/grid/resources/claroGrid.css'); 
```

然后在 layout.phtml 中（在`<head>`您希望样式表链接出现的部分中）：

```
echo $this->headLink(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T07:31:02.180

您将其添加到不正确的位置。
如果您以这种方式从 .phtml 中添加样式表，那么您将位于文档的正文中。
要将样式表添加到单个页面的头部，请从控制器中的操作代码中添加样式表：

```
public function someAction() {
    $this->view->headLink()->appendStylesheet($this->baseUrl().'/js/dojo-1.7/dojo/resources/dojo.css');
} 
```

或者，如果您想为控制器的所有操作添加样式表，您可以在控制器的 init() 方法中使用相同的代码：

```
public function init() {
     $this->view->headLink()->appendStylesheet($this->baseUrl().'/js/dojo-1.7/dojo/resources/dojo.css');    
} 
```

如果需要覆盖当前样式表，可以使用 setStylesheet()，也可以使用 prependStylesheet() 或 appendStylesheet()。

祝你好运...

# mysql - DataMapper Time 属性在 MySQL 中转换为 DateTime

> ID：11257627
> 
> 赞同：1
> 
> 时间：2012-06-29T07:16:10.953
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, orm, datamapper

我在我的 Rails 应用程序中使用 DataMapper 作为 ORM。我已经定义了 Time 数据类型的属性如下

```
property :arrival_time, Time, :required => true 
```

DataMapper 将其作为 DateTime 存储在 MySQL 数据库中，因此存储的内容例如，2012-06-28 14:17:00。我只想在列中存储时间部分，例如 14:17:00。这可以做到吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:07:30.657

在创建表使用时

```
 t.time :arrival_time 
```

# javascript - 上传前预览 SWF 文件

> ID：11257630
> 
> 赞同：1
> 
> 时间：2012-06-29T07:16:19.563
> 
> 标签：javascript, html, flash, filereader

我正在创建允许用户上传 swf 文件的网站。我正在尝试添加一个在上传之前显示 swf 文件的功能，以便用户可以确认他/她是否上传了正确的文件。

我目前正在使用 FileReader::readAsDataUrl(file) 方法，但它不起作用。虽然它可以读取文件的内容，但似乎 Flash Player 无法正确解释数据。当您右键单击它时，它会显示“电影未加载”。

下面是生成的 html 代码表单 javascript。

```
<object width="350" height="350" type="application/x-shockwave-flash" data="<!--data-->">
    <param name="movie" value="<!--data-->">
    <param name="AllowScriptAccess" value="always">
</object> 
```

我尝试将数据和值部分更改为已上传到服务器的同一文件的 url，并且它有效。所以也许有一种不同的方式从本地电脑读取数据。

非常感谢任何反馈。

谢谢，艺人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:32:25.350

最后，在阅读了 File API 文档之后。我能够让它工作，但只能在本地电脑上而不是在服务器上。

我曾经`window.URL.createObjectURL(file)`获取文件的 url 并将其传递给 embed 元素的 src 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:05:54.073

```
<OBJECT classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0" WIDTH="320" HEIGHT="240" id="Yourfilename" ALIGN="">
    <PARAM NAME=movie VALUE="Yourfilename.swf"> 
    <PARAM NAME=quality VALUE=high> 
    <PARAM NAME=bgcolor VALUE=#333399>
    <EMBED src="Yourfilename.swf" quality=high bgcolor=#333399 WIDTH="320" HEIGHT="240" NAME="Yourfilename" ALIGN="" TYPE="application/x-shockwave-flash" PLUGINSPAGE="http://www.macromedia.com/go/getflashplayer"></EMBED> 
</OBJECT> 
```

试试这个，让我们知道

# php - 使用 CodeIgniter + MySql 进行表单验证不起作用

> ID：11257633
> 
> 赞同：0
> 
> 时间：2012-06-29T07:16:31.633
> 
> 标签：php, codeigniter, validation

我似乎无法使用 Codeigniter 进行表单验证。我尝试通过创建 My_Form_validation.php 来扩展 Form_validation 类，但没有成功。我现在正在尝试回调方法。我出现了一段时间的错误，但是它们是不正确的。

这是位于我的控制器中的代码：

```
 function create_user() {

    $this->load->library('form_validation');

    $validate = array(

        array(
            'field' => 'first_name',
            'label' => 'First Name',
            'rules' => 'trim|required|xss_clean'
        ),

        array(
            'field' => 'last_name',
            'label' => 'Last Name',
            'rules' => 'trim|required|xss_clean'
        ),

        array(
            'field' => 'username',
            'label' => 'Username',
            'rules' => 'trim|required|xss_clean|callback_user_exists'
        ),

        array(
            'field' => 'email_address',
            'label' => 'Email Address',
            'rules' => 'trim|required|valid_email|callback_email_exists'
        ),

        array(
            'field' => 'password',
            'label' => 'Password',
            'rules' => 'trim|required|min_length[5]|max_length[32]'
        ),

        array(
            'field' => 'password2',
            'label' => 'Confirm Password',
            'rules' => 'trim|required|matches[password]'
        )

    );

    $this->form_validation->set_rules($validate);

    if($this->form_validation->run() == FALSE) {

        $this->load->view('user/user-signup');      

    } else {

        $this->load->model('user_model');

        if($query = $this->user_model->create_user()) {

            $this->load->view('user/user-login');

        } else {

            $this->index();

        }

    }

}

function user_exists($username) {

    $this->load->model('user_model');
    $this->user_model->user_exists($username);
    $this->form_validation->set_message('user_exists', 'This username is already taken');

}

function email_exists($email) {

    $this->load->model('user_model');
    $this->user_model->email_exists($email);
    $this->form_validation->set_message('email_exists', 'This email is already in use');

} 
```

这是位于我的模型中的代码：

```
function create_user() {

    $insert_user = array(
        'first_name'    => $this->input->post('first_name'),
        'last_name'     => $this->input->post('last_name'),
        'username'      => $this->input->post('username'),
        'email_address' => $this->input->post('email_address'),         
        'password'      => md5($this->input->post('password'))                      
    );

    $insert = $this->db->insert('users', $insert_user);

    return $insert;

}

function user_exists($username) {

    $this->db->where('username', $username);
    $query = $this->db->get('users');

    if($query->num_rows > 0) {

        return true;

    } else {

        return false;

    }

}

function email_exists($email) {

    $this->db->where('email_address', $email);
    $query = $this->db->get('users');

    if($query->num_rows > 0) {

        return true;

    } else {

        return false;

    }

} 
```

我想通过检查数据库中是否已经存在用户名或电子邮件地址来进行验证，如果存在，用户将需要进行适当的更改。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T07:58:12.020

您的代码很难阅读，所以我将向您展示如何改进它。:)

在您的控制器中，您可以使用构造函数进行模型加载，而不是这两行：

```
$this->load->model('user_model'); 
```

像这样：

```
function __constructor() {
    parent::__constructor();

    $this->load->model('user_model');
} 
```

将您的 user_exists 回调更改为：

```
function user_exists($username) {

    $user_check = $this->user_model->user_exists($username);

    if($user_check > 0) {
        $this->form_validation->set_message('user_exists', 'This username is already taken');
        return FALSE;
    }
    else {
        return TRUE;
    }

} 
```

将您的 email_exists 回调更改为：

```
function email_exists($email) {

    $check_email = $this->user_model->email_exists($email);

    if($check_email > 0) {
        $this->form_validation->set_message('email_exists', 'This email is already in use');
        return FALSE;
    }
    else {
        return TRUE;
    }

} 
```

现在，回到您的模型并更改这两种模型方法：

```
function user_exists($username) {

    $this->db->where('username', $username);
    $query = $this->db->get('users');

    return $query->num_rows();

}

function email_exists($email) {

    $this->db->where('email_address', $email);
    $query = $this->db->get('users');

    return $query->num_rows();

} 
```

现在，您做错了，因为您不了解**模型**的含义。在模型方法中，您可以编写数据库查询...因此，如果您想创建一个用户，您应该在控制器中获取输入的信息，然后将它们传递给模型方法 create_user，如下所示：

控制器方法 create_user：

```
function create_user() {

    $this->load->library('form_validation');

    $validate = array(

        array(
            'field' => 'first_name',
            'label' => 'First Name',
            'rules' => 'trim|required|xss_clean'
        ),

        array(
            'field' => 'last_name',
            'label' => 'Last Name',
            'rules' => 'trim|required|xss_clean'
        ),

        array(
            'field' => 'username',
            'label' => 'Username',
            'rules' => 'trim|required|xss_clean|callback_user_exists'
        ),

        array(
            'field' => 'email_address',
            'label' => 'Email Address',
            'rules' => 'trim|required|valid_email|callback_email_exists'
        ),

        array(
            'field' => 'password',
            'label' => 'Password',
            'rules' => 'trim|required|min_length[5]|max_length[32]'
        ),

        array(
            'field' => 'password2',
            'label' => 'Confirm Password',
            'rules' => 'trim|required|matches[password]'
        )

    );

    $this->form_validation->set_rules($validate);

    if($this->form_validation->run() == FALSE) {

        $this->load->view('user/user-signup');      

    } else {
        $user_data['first_name'] = $this->input->post("first_name");
        $user_data['last_name'] = $this->input->post("last_name");
        $user_data['username'] = $this->input->post("username");
        $user_data['email_address'] = $this->input->post("email_address");
        $user_data['password'] = $this->input->post("password");

        if($query = $this->user_model->create_user($user_data)) {

            $this->load->view('user/user-login');

        } else {

            $this->index();

        }

    }

} 
```

模型的方法create_user：

```
function create_user($user_data) {

    return $this->db->insert("users", $user_data);

} 
```

就是这样，它会起作用的。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T07:42:26.753

你试过`is_unique[table_name.field_name]`规则吗？

例子：

```
$this->form_validation->set_rules('username', 'Username',
 'required|min_length[5]|max_length[12]|is_unique[users.username]');

$this->form_validation->set_rules('email', 'Email',
 'required|valid_email|is_unique[users.email]'); 
```

**更新**

如果你想使用回调函数，那么`user_exists`函数应该在控制器中，而不是在你提到的模型中。正确的定义方式是——

```
public function username_check($str)
{
    if ($str == 'test')
    {
        $this->form_validation->set_message('username_check', 'The %s field can not be the word "test"');
        return FALSE;
    }
    else
    {
        return TRUE;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T13:01:06.467

我曾经也有过一样的问题。回调函数的问题之一是它只能接受一个参数。检查表单中记录的唯一性时需要考虑两种状态。1) 您正在添加新记录 2) 您正在编辑现有记录。

如果您要添加新记录，则内置*is_unique*可以正常工作。如果您正在编辑现有记录*is_unique*不起作用，因为它会找到您正在编辑的记录并说表单数据不是唯一的。

为了解决这个问题，我使用了会话类，在运行验证脚本之前将其设置为案例 2，因此您需要知道您是在编辑现有记录还是添加新记录。为此，我只需在编辑表单时向表单添加一个隐藏输入，例如记录唯一 ID。
大概您的用户表中有一个唯一的用户 ID，例如，在运行验证之前设置它。

if($this->input->post('user_id')){$this->session->set_userdata('callback_user_id',$this->input->post('user_id'));}

然后在你的回调中，使用这种算法：

案例 1) 即 $this->session->userdata('callback_user_id') == FALSE 如果用户名是唯一的，则验证并返回 true。如果用户名不是唯一的，则返回 false 并带有验证消息用户必须是唯一的。

情况 2) 即，设置了 callback_user_id。如果用户名是唯一的，则验证并返回 true 如果用户名已经设置，并且该记录与 user_id 具有相同的 id，这意味着您正在更新相同的记录，并且可以验证。否则，另一条记录具有用户名，它应该无法通过验证。在模型中，我只有一个返回用户名唯一 ID 的方法。

运行验证后，取消设置 callback_user_id 会话变量可能是个好主意。对不起，我没有要粘贴的代码，但我认为这个描述应该对你有所帮助。

==== 现在编辑，我认为用新功能覆盖表单验证是要走的路。所以：有一个语言包条目，一个表单验证行和覆盖：这假设一个名为 ID 的字段被发布，该 ID 具有该行的 id。

```
$lang['form_validation_is_unique_not_current'] ='The {field} field must contain a unique value.';

array('field' => 'username', 'label' => 'lang:…username…', 'rules' => 'trim|required|min_length[2]|max_length[40]|is_unique_not_current[users.username]'),

class MY_Form_validation extends CI_Form_validation {

    function __construct($rules = array())
    {
        parent::__construct($rules);
        $this->_error_prefix = '<div class="alert alert-danger"><p>';
        $this->_error_suffix = '</p></div>';
    }
    public function is_unique_not_current($str, $field)
    {
        sscanf($field, '%[^.].%[^.]', $table, $field);
        $id = $this->CI->input->post('id');
        if($this->CI->input->post('field_name'))
        {
            return isset($this->CI->db)
                ? ($this->CI->db->limit(1)->get_where($table, array(
                    $field => $str,
                    'id <> ' => $id))->num_rows() === 0)
                : FALSE;
        }
        return FALSE;

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T07:52:46.360

像这样重写你的函数

```
function user_exists($username) {

$this->load->model('user_model');
$result = $this->user_model->user_exists($username);
if($result != NULL){
    $this->form_validation->set_message('user_exists', 'This username is already taken');
    return FALSE;
}else{
    return TRUE;
}
} 
```

您没有返回 true 或 false，因此它总是得到 xss_clea 返回的最后一个 true。

# sql-server-2008 - 描述直接输入到 sql server 2008 数据库的模式文件中

> ID：11257634
> 
> 赞同：1
> 
> 时间：2012-06-29T07:16:35.957
> 
> 标签：sql-server-2008, schema, data-dictionary

我的老板要求我为工程师找到一种简单的方法来输入大型数据库（sql server 2008）的实体和字段的描述，我很难理解他的要求。他提到有一种方法可以做到这一点，即“以特定语法直接在模式文件中输入描述，其他软件可以轻松提取以生成数据字典”。

他说这是他 7 / 8 年前所做的，这很容易

我在网上查看，向他展示了如何使用 SQL 语句来编辑实体和字段的外部属性，他说这不是他想要的，并且“这不是一种方便或快捷的方式”所以。

有人知道我老板在说什么吗？也许向我解释他在谈论什么样的模式文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-20T01:50:47.593

在架构定义方面，除了 sp_addextendedproperty 之外，我不知道 SQL Server 存在的任何方式。在 Enterprise Manager 中，过去如何输入描述更加明显。在 Management Studio 中，这真的不明显。如果您创建一个数据库图表，然后编辑表的自定义视图并将描述列添加到视图中，则可以更轻松地完成此操作。您还可以使用[http://www.sqldatadictionary.com](http://www.sqldatadictionary.com)之类的工具来快速编辑许多描述。

# android - 如何在android中的特定节点写入XML？

> ID：11257638
> 
> 赞同：1
> 
> 时间：2012-06-29T07:16:41.917
> 
> 标签：android, xml, xml-parsing

我有一个这样的 XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<Survey 
Name="Aerosmith's Survey" 
Id="S2"
UserId="Admin"
CreatedBy="Administrator"
cultureName="en-CA" 
numberOfQuestions="5"
completedPercent="0" 
createdTimeStamp="June 26, 2012 16:01" 
lastUpdatedTimeStamp="">
<Questions>
<Question
    id="q1"
    name="Question #1" 
    type="SingleChoice" 
    allowBackButton="false" 
    isRequired="true" 
    numLines="0" 
    questionIndex="1">
        <QuestionText>Who is your favourite Aerosmith's Member ?</QuestionText>
        <Answers>
            <Answer answerIndex="1" >Joey Kramer</Answer>
            <Answer answerIndex="2" >Steven Tyler</Answer>
            <Answer answerIndex="3" >Tom Hamilton</Answer>
            <Answer answerIndex="4" >Joe Perry</Answer>
            <Answer answerIndex="4" >Brad Whitford</Answer>
        </Answers>
        <Response respondedTimeStamp=""></Response>
        <OnChoice></OnChoice>
    </Question>
    <Question 
        id="q2"
        name="Question #2" 
        type="MultipleChoice" 
        allowBackButton="true" 
        isRequired="true" 
        numLines="0" 
        questionIndex="2">
        <QuestionText> Which is your favourite Aerosmith Song ?</QuestionText>
        <Answers>
            <Answer answerIndex="1" >Dream On</Answer>
            <Answer answerIndex="2" >Sweet Emotion</Answer>
            <Answer answerIndex="3" >Walk this way!!</Answer>
            <Answer answerIndex="4" >I Don't Want to Miss a Thing</Answer>
            <Answer answerIndex="5" >Jaded</Answer>
        </Answers>
        <Response respondedTimeStamp=""></Response>
        <OnChoice></OnChoice>
    </Question>
    <Question 
        id="q3"
        name="Question #3" 
        type="Date" 
        allowBackButton="true" 
        isRequired="true" 
        numLines="0" 
        questionIndex="3">
        <QuestionText>What is Your Date of birth?</QuestionText>
        <Answers></Answers>
        <Response respondedTimeStamp=""></Response>
        <OnChoice></OnChoice>
    </Question>
</Questions>
</Survey> 
```

现在在我的应用程序中，我使用了 SAX 解析器来读取这些内容。现在每个问题都有一个问题类型，您可以在我的 xml 中看到。

```
<Question
    id="q1"
    name="Question #1" 
    type="SingleChoice" 
    allowBackButton="false" 
    isRequired="true" 
    numLines="0" 
    questionIndex="1"> 
```

基于此，我在列表视图中填充了我的复选框。

现在我想做的是假设任何用户在标签中检查一个项目

```
<Response respondedTimeStamp=""></Response> 
```

我必须将时间戳和响应值写为该特定问题的文本。

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:25:12.613

您可以使用**[XStream](http://xstream.codehaus.org/%20XStream)**库将数据写入 xml。

# iphone - UIProgressView 未处理的颜色

> ID：11257639
> 
> 赞同：11
> 
> 时间：2012-06-29T07:16:49.857
> 
> 标签：iphone, uiprogressview

我有一个`UIProgressView`我想看起来像这个图像的。我已经设置了进度颜色，但我不确定设置未进度的颜色（图像中的白色）。

![在此处输入图像描述](../Images/1cb0dfed992955e425dd72bed9aacf7d.png)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-29T10:16:34.320

这是我自己在探索 UIProgressView 属性时发现的简单解决方案：

```
progressView.trackTintColor = [UIColor whiteColor]; 
```

# c# - 使用多个视图模型操作的命令

> ID：11257640
> 
> 赞同：0
> 
> 时间：2012-06-29T07:16:51.773
> 
> 标签：c#, wpf, mvvm

我正在通过 MVVM 模式设计 WPF 应用程序架构。现在我遇到以下情况：

```
class ParentViewModel : ViewModelBase<IParent>
{
    public ObservableCollection<ChildViewModel> Children { get; private set; }
}

class ChildViewModel : ViewModelBase<IChild>
{
    public ICommand ParentAndChildCommand { get; private set; }
}

class ParentAndChildCommand : ICommand
{
    public void Execute(object parameter)
    {
        // ParentViewModel.DoSomething(ChildViewModel);
    }

    public bool CanExecute(object parameter)
    {
        // return CanExecute(ParentViewModel, ChildViewModel);
    }
} 
```

到目前为止，我能看到的唯一解决方案是在 ParentViewModel 类中处理 ParentAndChildCommand 的 Executing 和 QueryCanExecute 事件。但我相信这种情况有更好的解决方案。请告知如何设计这样的逻辑。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T08:39:07.250

使用不同的 MVVM 框架更好地使用 ICommand 组织工作

示例： http: [//mvvmlight.codeplex.com/](http://mvvmlight.codeplex.com/)

# jquery - 使用 jQuery/ajax 选择表格行

> ID：11257643
> 
> 赞同：2
> 
> 时间：2012-06-29T07:17:02.107
> 
> 标签：jquery, ajax, html-table

当用户单击表格行时，我使用 jQuery 选择其中一个单元格中的链接。根据我的搜索，这是相当标准的。

```
$(document).ready(function () {
    $('table.timecarddetail tr').click(function () {
            var href = $(this).find("a").attr("href");
            if (href) {
                window.location = href;
            }
        });
    }); 
```

注意：table.timecarddetail 是表类。

嵌入的链接本质上是一个 ajax 调用，因此它不会进行完整的回发，并且页面不会刷新。我的问题是事件触发一次，但随后的点击被忽略。

技术细节：我使用的是VS2010，每个链接都指向传递记录ID的相同过程。模态弹出扩展器面板由该记录中的数据填充，然后使用 panel.show 显示。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:58:04.590

我过去在实现 JQueryUI 时遇到了同样的问题。脚本管理器在 ajax 回发后销毁 javascript。您可以通过将其包装在一个函数中并在 ajax 调用的开始和结束时调用它来解决这个问题

jQuery

```
$(document).ready(function () { 
    setRows();
});   

function setRows() {
$('table.timecarddetail tr').click(function () { 
        var href = $(this).find("a").attr("href"); 
        if (href) { 
            window.location = href; 
        } 
    }); 
} 
```

然后在你的页面中把它放在你的脚本管理器之后

```
<asp:ScriptManager runat="server">
</asp:ScriptManager>
<script type="text/javascript">
    var prm = Sys.WebForms.PageRequestManager.getInstance();
    prm.add_beginRequest(BeginRequestHandler);
    prm.add_endRequest(EndRequestHandler);
    function BeginRequestHandler(sender, args) {
        setRows();
    }
    function EndRequestHandler(sender, args) {
        setRows();
    }
</script> 
```

希望这可以帮助。

# jmx - 在 JBOSS AS 7.1.1 中使用 http/https 协议调用远程 MBean

> ID：11257646
> 
> 赞同：0
> 
> 时间：2012-06-29T07:17:12.757
> 
> 标签：jmx, jboss7.x, mbeans

一般来说，我们使用以下代码在 JBOSS AS 7.1.1 中调用 MBean，

```
JMXServiceURL serviceURL = new JMXServiceURL("service:jmx:remoting-jmx://(bind address to invoke):(default bind port is 9999)");
JMXConnector jmxConnector = JMXConnectorFactory.connect(serviceURL, null);
MBeanServerConnection connection = jmxConnector.getMBeanServerConnection();
ObjectName mbeanObject = new ObjectName(mBeanName);
connection.invoke(mbeanObject, methodToInvoke, params, signature); 
```

我们有一个需求，我们需要使用 http/https 协议调用远程 MBean。有没有办法在 JBOSS AS 7.1.1 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:44:51.697

先看看[Jolokia](http://www.jolokia.org/reference/html/protocol.html#exec)。但是如果你真的想实现一些自定义的东西，开发一个 servlet 或 web 服务并将其部署在远程服务器上，作为远程​​ MBean 的代理。

# c - 纯 C 中的 Knuth-Morris-Pratt 实现

> ID：11257652
> 
> 赞同：0
> 
> 时间：2012-06-29T07:17:42.587
> 
> 标签：c, algorithm, implementation, knuth-morris-pratt

我有下一个 KMP 实现：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int kmp(char substr[], char str[])
{
   int i, j, N, M;

   N = strlen(str);
   M = strlen(substr);

   int *d = (int*)malloc(M * sizeof(int));
   d[0] = 0;

   for(i = 0, j = 0; i < M; i++)
   {
      while(j > 0 && substr[j] != substr[i])
      {
         j = d[j - 1];
      }

      if(substr[j] == substr[i])
      {
         j++;
         d[i] = j;
      }
   }

   for(i = 0, j = 0; i < N; i++)
   {
      while(j > 0 && substr[j] != str[i])
      {
         j = d[j - 1];
      }

      if(substr[j] == str[i])
      {
         j++;
      }

      if(j == M)
      {
         free(d);
         return i - j + 1;
      }
   }

   free(d);

   return -1;
}

int main(void)
{
   char substr[] = "World",
      str[] = "Hello World!";

   int pos = kmp(substr, str);

   printf("position starts at: %i\r\n", pos);

   return 0;
} 
```

你可以在这里测试它：http: [//liveworkspace.org/code/d2e7b3be72083c72ed768720f4716f80](http://liveworkspace.org/code/d2e7b3be72083c72ed768720f4716f80)

它适用于小字符串，并且我已经用大循环对其进行了测试，这样一切都很好。

但是，如果我将要搜索的子字符串和完整字符串更改为：

```
char substr[] = "%end%",
str[] = "<h1>The result is: <%lua% oleg = { x = 0xa }
         table.insert(oleg, y) oleg.y = 5 print(oleg.y) %end%></h1>"; 
```

只有在第一次尝试之后，这个实现才会失败......

拜托，您能帮我修复 KMP 的实现，以使算法与字符串中的此类数据一起工作...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T10:07:52.073

在你偏离源头的地方，源头有

```
while(j>0 && p[j]!=p[i]) j = d[j-1];
    if(p[j]==p[i])
        j++;
        d[i]=j; 
```

当你有

```
while(j > 0 && substr[j] != substr[i])
{
    j = d[j - 1];
}
if(substr[j] == substr[i])
{
    j++;
    d[i] = j;
} 
```

被来源的缩进所欺骗。在源代码中，分支周围没有大括号`if()`，因此只有增量`j++;`由`if`;控制。`d[i] = j;`是无条件的。

然后，源有错误，可能是由于索引的不寻常使用。设置数组的正确方法是

```
int *d = (int*)malloc(M * sizeof(int));
d[0] = 0;

for(i = 1, j = 0; i < M; i++)
{
    while(j > 0 && substr[j-1] != substr[i-1])
    {
        j = d[j - 1];
    }

    if(substr[j] == substr[i])
        j++;
    d[i] = j;
} 
```

但这很令人困惑，因为这里的设置使用索引`i-1`and`j-1`以及`i`and`j`来确定`d[i]`. 通常的实现方式是不同的；它[在 C#](http://ru.wikibooks.org/wiki/%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B_%D1%80%D0%B5%D0%B0%D0%BB%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B8_%D0%B0%D0%BB%D0%B3%D0%BE%D1%80%D0%B8%D1%82%D0%BC%D0%B0_%D0%9A%D0%BD%D1%83%D1%82%D0%B0_%E2%80%94_%D0%9C%D0%BE%D1%80%D1%80%D0%B8%D1%81%D0%B0_%E2%80%94_%D0%9F%D1%80%D0%B0%D1%82%D1%82%D0%B0#.D0.A0.D0.B5.D0.B0.D0.BB.D0.B8.D0.B7.D0.B0.D1.86.D0.B8.D1.8F_.D0.B0.D0.BB.D0.B3.D0.BE.D1.80.D0.B8.D1.82.D0.BC.D0.B0_.D0.BD.D0.B0_.D1.8F.D0.B7.D1.8B.D0.BA.D0.B5_.D0.A1.23)中的实现方式。由于这是您在大多数来源中找到的形式，因此说服自己相信其正确性要容易得多。

# iphone - cocos- 2d：如何在视差层上滚动layer1

> ID：11257660
> 
> 赞同：0
> 
> 时间：2012-06-29T07:18:54.003
> 
> 标签：iphone, ios, cocos2d-iphone

我正在 cocos 2D 中创建游戏。

我有两层。第一层和第二层。

**第 1 层 - 大背景（背景图像大小 - 600 x 360）z:0
第 2 层 - 视差层（世界大小 - 1200 x 360）z:1** 

当我的第 2 层移动时，我只想让背景稍微滚动。

我应该怎么做才能实现上述目标？

我应该将**layer1**位置设置为**sprite 还是 layer2**位置，以便 layer 1 与 layer 2 同步。任何帮助或建议将不胜感激..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T16:09:59.910

我通过将视差层添加到世界大小来解决它:)

# ruby-on-rails - 我可以让带有嵌套形式的 Rails update_attributes 查找现有记录并添加到集合而不是创建新记录吗？

> ID：11257662
> 
> 赞同：3
> 
> 时间：2012-06-29T07:19:06.020
> 
> 标签：ruby-on-rails, has-many, no-duplicates

场景：我有一个 has_many 关联（Post 有很多作者），并且我有一个嵌套的 Post 表单来接受作者的属性。

我发现当我调用 post.update_attributes(params[:post]) 其中 params[:post] 是一个带有 post 和所有要添加的作者属性的哈希时，似乎没有办法让 Rails 只如果满足某些条件，则创建作者，例如作者的用户名已经存在。如果用户名在模型中具有唯一性验证，Rails 会做的只是失败并回滚 update_attributes 例程。如果没有，Rails 将添加一个新记录 Author，如果没有 id 的记录在哈希中。

现在我在 Post 控制器中的更新操作代码变成了这样：

```
def update
  @post = Post.find(params[:id])

  # custom code to work around by inspecting the author attributes
  # and pre-inserting the association of existing authors into the testrun's author
  # collection
  params[:post][:authors_attributes].values.each do |author_attribute|
    if author_attribute[:id].nil? and author_attribute[:username].present?
      existing_author = Author.find_by_username(author_attribute[:username])
      if existing_author.present?
        author_attribute[:id] = existing_author.id 
        @testrun.authors << existing_author
      end
    end
  end

  if @post.update_attributes(params[:post])
    flash[:success] = 'great!'
  else
    flash[:error] = 'Urgg!'
  end

  redirect_to ...
end 
```

有没有更好的方法来处理我错过的这个问题？

编辑：感谢@Robd'Apice 让我考虑覆盖默认的 authors_attributes= 函数，该函数代表我插入到模型中，我能够想出更好的东西：

```
def authors_attributes=(authors_attributes)
  authors_attributes.values.each do |author_attributes|
    if author_attributes[:id].nil? and author_attributes[:username].present?
      author = Radar.find_by_username(radar_attributes[:username])
      if author.present?
        author_attributes[:id] = author.id
        self.authors << author
      end
    end
  end
  assign_nested_attributes_for_collection_association(:authors, authors_attributes, mass_assignment_options)
end 
```

但是我对此并不完全满意，一方面，我仍然直接从调用者那里获取属性哈希，这需要了解这些哈希的逻辑是如何工作的（例如：id set or not set），以及两个，我正在调用一个适合此处的函数。如果有办法告诉“accepts_nested_attributes_for”只在不满足特定条件时创建新记录，那就太好了。一对一关联有一个 :update_only 标志，它执行类似的操作，但缺少一对多关系。

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T07:25:58.560

这种逻辑可能属于您的模型，而不是您的控制器。我会考虑重写`author_attributes=`默认为您的关联创建的方法。

```
def authors_attributes=(authors_attributes)
  authors_attributes.values.each do |author_attributes|
    author_to_update = Author.find_by_id(author_attributes[:id]) || Author.find_by_username(author_attributes[:username]) || self.authors.build
    author_to_update.update_attributes(author_attributes)
  end
end 
```

我还没有测试过该代码，但我认为应该可以。

编辑：要保留的其他功能`accepts_nested_Attributes_for`，您可以使用`super`：

```
def authors_attributes=(authors_attributes)
  authors_attributes.each do |key, author_attributes|
    authors_attributes[key][:id] = Author.find_by_username(author_attributes[:username]).id if author_attributes[:username] && !author_attributes[:username].present?
  end
  super(authors_attributes)
end 
```

如果该实现`super`不起作用，您可能有两个选择：继续对控制器中的属性哈希进行“处理”（但将其转换为控制器的私有方法以稍微清理一下），或者继续我的第一个解决方案是添加您从自己的代码中丢失的功能`:destroy => true`（`reject_if`这不会太难）。我可能会选择第一个选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T19:32:36.360

我建议使用表单对象，而不是尝试让 accept_nested_attributes 工作。我发现表单对象通常更干净、更灵活。看看[这个 railscast](http://railscasts.com/episodes/416-form-objects)

# java - 如何从单个文件中保存多个对象？

> ID：11257667
> 
> 赞同：0
> 
> 时间：2012-06-29T07:19:42.553
> 
> 标签：java, android, objectinputstream

我希望我的应用程序在本地存储多个对象以供以后使用。

现在，我的问题是我知道如何`ObjectInputStream`通过获取整个文件（federations.dat）来加载对象。有没有办法让我`object WHERE id = N`从“federations.dat”加载说？还是我必须为每个对象创建单独的文件？

这是我的加载方法：

```
public static Object load(Context ctx, String filename) throws FileNotFoundException 
{
    Object loadedObj = null;
    InputStream instream = null;

    instream = ctx.openFileInput(filename);

    try {
        ObjectInputStream ois = new ObjectInputStream(instream);
        loadedObj = ois.readObject();
        return loadedObj;

    } catch (StreamCorruptedException e) {
        e.printStackTrace();
        return null;
    } catch (IOException e) {
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }
    return null;
} 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T07:33:08.617

你可以这样用。。

```
ArrayList<Object> arrayList = new ArrayList<Object>();

Object obj = null;

while ((obj = ois.readObject()) != null) {
    arrayList.add(obj);
} 
```

您可以在您的方法上返回一个 ArrayList。

```
return arrayList; 
```

编辑：完整的代码是这样的..

```
public static ArrayList<Object> load(Context ctx, String filename) 
{
    InputStream fis = null;
    ObjectInputStream ois = null;

    ArrayList<Object> arrayList = new ArrayList<Object>();

    Object loadedObj = null;
    try {
        fis = ctx.openFileInput(filename);
        ois = new ObjectInputStream(fis);

        while ((loadedObj = ois.readObject()) != null) {
             arrayList.add(loadedObj);
        }
    } catch (Exception e) {
        e.printStackTrace();
        return null;
    } finally {
        if (null != ois) ois.close();
        if (null != fis) fis.close();
    }

    return arrayList;
} 
```

希望能帮助到你..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T08:02:12.940

@Jan 代码的扩展，解决了在`ois`抛出异常时保持打开的问题，以及一些小问题。

```
public static ArrayList<Object> load(Context ctx, String filename) throws FileNotFoundException {
    InputStream instream = ctx.openFileInput(filename);

    ArrayList<Object> objects = new ArrayList<Object>();

    try {
        ObjectInputStream ois = new ObjectInputStream(instream);
        try{
            Object loadedObj = null;
            while ((loadedObj = ois.readObject()) != null) {
                objects.add(loadedObj);
            }

            return objects;
        }finally{
            ois.close();
        }

    } catch (StreamCorruptedException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }
    return null;
} 
```

# javascript - 悬停图像时是否可以隐藏标题？

> ID：11257668
> 
> 赞同：3
> 
> 时间：2012-06-29T07:19:46.207
> 
> 标签：javascript, jquery, image, html, css

这是我的代码：

```
<img src="image.jpg" alt="" title="some title" /> 
```

当我悬停该图像时，会出现“某个标题”。有可能被隐藏吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T07:29:59.120

正如一些答案所指出的那样，它可以很容易地完成，但是知道你想对标题做什么，我会使用 data-* 自定义属性或使用 .data() 附加标题

```
<img src="image.jpg" alt="" data-title="some title" /> 
```

或者

```
$('img').data('title', 'some title'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T07:22:50.140

删除该属性很简单`title`，但“隐藏它”是不可能的（据我所知）；为了删除标题，以下应该可以工作，尽管目前未经测试：

```
$('img').hover(
    function(){
        $(this).data('originalTitle',$(this).title());
        $(this).removeAttr('title');
    },
    function(){
        $(this).attr('title',$(this).data('originalTitle');
    }); 
```

在上面我选择移动属性，然后在鼠标移出时替换它。

`title`要永久删除：

```
$('img').removeAttr('title'); 
```

参考：

*   [`attr()`](http://api.jquery.com/attr/).
*   [`data()`](http://api.jquery.com/data/).
*   [`hover()`](http://api.jquery.com/hover/).
*   [`removeAttr()`](http://api.jquery.com/removeAttr/).

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-12-19T11:02:16.880

如果只是悬停问题，您可以`pointer-events: none;`在图像上制作，它将解决问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-29T07:23:34.993

您可以将其移动到图像数据......然后返回。像那样

```
$('img').hover(
  function () {
    $(this).data('title',$(this).attr('title')).removeAttr('title');
  }, 
  function () {
    $(this).attr('title',$(this).data('title'));
  }
); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-29T07:23:10.403

是的！使用 jQuery，您可以在鼠标悬停时将其删除并在鼠标输出时再次添加 -

```
$(function(){
  var ttext;
  $('img').hover(function(){
    ttext = $(this).attr('title');
    $(this).removeAttr('title');
  },
  function(){
    $(this).attr('title', ttext);
  });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-29T07:22:45.843

不，不是。但是您可以将其替换为 JavaScript，或者将其留空。

jQuery 示例：

```
$('[title]').removeAttr('title'); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-29T07:23:46.440

有点搞笑的是，在 Stack Overflow 上，五个人可以同时给出相同的答案：P

```
$(function(){
    $('img').hover(function(){
        $(this).removeAttr('title');
    }, function(){
        $(this).attr('title','some title');
    });
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-06T17:32:30.870

我至少在 Chrome 上尝试并使用了 jQuery / jQuery UI：

1.  创建您想要（和不想要）有标题的对象。
2.  一旦所有这些项目都存在，添加一个工具提示。
3.  浏览所有您不希望工具提示以通常方式显示的项目，并将工具提示设置为`''`.

我的代码中的示例，在命名的 HTML 元素可用之后发生：

```
jQuery(document).tooltip();
for(var index = 0; index < sites.length; ++index) {
    jQuery('#' + sites[index][0]).attr('title', '');
} 
```

# javascript - 代理第 3 方脚本会引入 XSS 攻击吗？

> ID：11257672
> 
> 赞同：1
> 
> 时间：2012-06-29T07:20:08.373
> 
> 标签：javascript, security, proxy, xss

尝试通过[SSL](http://blog.cloudflare.com/56590463)或 SPDY 连接发送 3rd 方脚本是近来的热门话题。

来自第 3 方的代理脚本是否会改变浏览器中脚本的来源和沙盒，并引入受感染的第 3 方成为攻击媒介的风险？

如果是这样，如何避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:32:32.877

使用 3rd 方脚本一直是一个安全问题。代理不会改变这一点。

请记住，所有脚本都在您的页面上下文中运行，无论其来源如何。这就是为什么首先可以将 CDN 用于库的原因。例如，如果有人入侵了 ajax.googleapis.com，世界可能会遇到很多麻烦。

唯一的区别是在代理来自 http 主机的脚本时，您将绕过[混合内容安全警告。](http://i.msdn.microsoft.com/dynimg/IC310970.gif)

> 如果是这样，如何避免这种情况？

复制，不要代理。

# javascript - 无法将 div 内容动态复制到 dojo contentpane

> ID：11257673
> 
> 赞同：1
> 
> 时间：2012-06-29T07:20:11.823
> 
> 标签：javascript, html, dijit.layout

我正在尝试使用 javascript 动态创建内容窗格，并且我想将另一个 div 的内容复制到此内容窗格中。

我曾经`.innerHTML`复制内容，但它没有复制整个 div 内容。它就像屏幕截图一样复制。Javascript 功能和菜单无法正常工作。请帮忙。

```
//creating contentpane in javascript
    Tab = new dijit.layout.ContentPane({
                         id:"Tab",
                         title: "Tab",
                         content: document.getElementById('divID').innerHTML
                    });

    <div id="divID" style="display:none">   
    <div dojoType="dijit.form.DropDownButton" id="menuId">
    <div>Add</div>
    <div dojoType="dijit.Menu">                     
    <div dojoType="dijit.MenuItem" label="add rows" ></div>
    </div>
    </div>
    <table id="primaryTableId">     
    <thead id="invHeaderRow">
    <th id="Col1" class="col1">Col1</th>
    <th id="Col2" class="col2">Col2</th>
    </thead>
    <tbody id="DataRow">
    </tbody>
    </table>
    </div> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2018-09-05T06:25:10.387

使用 dojo 查询并将内容替换为内容：`query('#divID')`

“content: document.getElementById('divID').innerHTML” 改变或显示页面中的 HTML 文本，但它不响应由 javascript 创建的 HTML 内容，dojo 查询也处理该 HTML 内容

# ios - UIsearch栏没有将数据返回到表

> ID：11257681
> 
> 赞同：0
> 
> 时间：2012-06-29T07:20:44.957
> 
> 标签：ios, xcode, tableview, uisearchbar

编辑代码

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
   if (cell==nil) 
    cell=[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

if (isFiltered) {
   int rowCount=indexPath.row;
   Aves *filtrada=[filteredTableData objectAtIndex:rowCount];
   cell.textLabel.text=filtrada.name;
   NSLog(@"mostrando: ");
    }else {
        int rowCounter=indexPath.row;
        Aves *author=[theauthors objectAtIndex:rowCounter];
        cell.textLabel.text=author.name;
    }
NSLog(@"mostrando: ");
return cell; 
```

}

```
-(void)searchBar:(UISearchBar*)searchBar textDidChange:(NSString*)text
{
    if(text.length == 0)
    {
        isFiltered = FALSE;
    }
    else
    {
        isFiltered = true;
        int i;
        [filteredTableData removeAllObjects];
        for(i=0;[theauthors count]>i;i++)
        {
          Aves *name=[theauthors objectAtIndex:i];
            //NSLog(name.name);
            NSRange nameRange = [[name.name lowercaseString] rangeOfString:[text lowercaseString]];
            if(nameRange.length>0)
            {
                [filteredTableData addObject:name];
                NSLog(name.name);
            }
        }
        [self.tableView performSelectorOnMainThread:@selector(reloadData) withObject:nil waitUntilDone:NO];
    }
} 
```

编辑：经过一段时间的工作，我解决了一些问题。刚刚更新了我的代码，问题是 tableView 的重绘，其他一切正常。检查它并提出您的任何想法 plz ^^

再次感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:43:19.270

我假设您使用的是原型单元？我刚刚在我的一个项目中遇到了类似的问题。

当搜索结果被显示并被`tableView:cellForRowAtIndexPath:`调用时，表视图传递给属于搜索结果控制器的表，而不是你的主表视图。问题在于，搜索结果表格视图对表格的原型单元格一无所知，因此`dequeueReusableCellWithIdentifier:`返回 nil。但是仅仅分配/初始化一个 UITableCellView 不会给你一个原型单元，所以你在情节提要中布置的任何 UI 都不存在。

修复很简单：在`tableView:cellForRowAtIndexPath:`，不要调用`dequeueReusableCellWithIdentifier:`传入的tableview；只需在您的主表视图上调用它。所以基本上，只需改变这个：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell==nil) 
    cell=[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]; 
```

对此：

```
UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

不需要 nil 检查；Apple 的[Storyboards 发行说明](http://developer.apple.com/library/ios/#releasenotes/Miscellaneous/RN-AdoptingStoryboards/_index.html#//apple_ref/doc/uid/TP40011297-CH1-DontLinkElementID_5)说：

> dequeueReusableCellWithIdentifier: 方法保证返回一个单元格（前提是您已经定义了一个具有给定标识符的单元格）。因此，不需要像之前典型的 tableView:cellForRowAtIndexPath: 实现那样使用“检查方法的返回值”模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:37:32.797

用这个：

```
 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
   {
  //If the requesting table view is the search display controller's table view, return the count of the filtered list, otherwise return the count of the main list.

     if (isFiltered)
     {
       return [filteredTableData count];
     }
     else
     {
       return [theauthors count];
     }
  } 
```

替换方法：

```
 -(void)searchBar:(UISearchBar*)searchBar textDidChange:(NSString*)text
   {
     if(text.length == 0)
     {
       isFiltered = FALSE;
     }
     else
     {
      isFiltered = true;
      int i=0;
      [filteredTableData removeAllObjects];
      filteredTableData = [[NSMutableArray alloc] init];
      //for (Aves* name in theauthors)
      for(i=0;[theauthors count]>i;i++)
      {
        Aves *name=[theauthors objectAtIndex:i];
        NSRange nameRange = [[name.foodName lowercaseString] rangeOfString:[text lowercaseString]];

        if(nameRange.length>0)
        {
            [filteredTableData addObject:name];
            [self.tableView reloadData];
        }
       }
     }
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T08:50:58.470

如果（nameRange.location ==0），您的应用会点击此代码吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T09:10:01.953

更改代码片段

```
else
{
    isFiltered = true;
    int i=0;
    [filteredTableData removeAllObjects];
    filteredTableData = [[NSMutableArray alloc] init];
    //for (Aves* name in theauthors)
    for(i=0;[theauthors count]>i;i++)
    {
        Aves *name=[theauthors objectAtIndex:i];
        NSRange nameRange = [name.foodName rangeOfString:text ];

        if(nameRange.location ==0)
        {
            [filteredTableData addObject:name];
        }
        [self.tableView reloadData];
    }
} 
```

到

```
else
{
    isFiltered = true;
    int i=0;
    [filteredTableData removeAllObjects];
    //filteredTableData = [[NSMutableArray alloc] init]; not needed
    //for (Aves* name in theauthors)
    for(i=0;[theauthors count]>i;i++)
    {
        Aves *name=[theauthors objectAtIndex:i];
        NSRange nameRange = [name.foodName rangeOfString:text ];

        if(nameRange.location != NSNotFound)
        {
            [filteredTableData addObject:name];
        }
    }
    [self.tableView reloadData];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T09:13:30.100

终于修好了。这是我的工作代码，谢谢大家=）

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    cell=[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                reuseIdentifier:CellIdentifier];

    if (isFiltered==TRUE) {
        int rowCount=indexPath.row;
        //for (rowCount=0; rowCount<[filteredTableData count]; rowCount++) {
        Aves *filtrada=[filteredTableData objectAtIndex:rowCount];
        cell.textLabel.text=filtrada.name;
        //}

    }else if(isFiltered==FALSE) 
    {
        int rowCounter=indexPath.row;
        Aves *author=[theauthors objectAtIndex:rowCounter];
        cell.textLabel.text=author.name;
    }
    return cell; 
} 
```

> -(void)searchBar:(UISearchBar*)searchBar textDidChange:(NSString*)text {
> 
> ```
>  [filteredTableData removeAllObjects];
> 
> filteredTableData=[[NSMutableArray alloc]init ];
> 
> if(text.length == 0)
> {
>     isFiltered = FALSE;
> }
> else
> {
>     isFiltered = TRUE;
>     int i;
> 
>     for(i=0;[theauthors count]>i;i++)
>     {
>         Aves * filtrado=[[Aves alloc]init];
>         filtrado=[theauthors objectAtIndex:i];
>         //NSLog(filtrado.name);
>         NSRange nameRange = [[filtrado.name lowercaseString] rangeOfString:[text lowercaseString]];
>         if(nameRange.length>0)
>         {
>             [filteredTableData addObject:filtrado];
> 
>         }
>     }
>     [self.tableView performSelectorOnMainThread:@selector(reloadData) withObject:nil 
> ```
> 
> 等待直到完成：否]; } }

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T13:13:00.080

你可能想更换

```
UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];

cell=[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                            reuseIdentifier:CellIdentifier]; 
```

在你的 cellForRowAtIndexPath 中

```
UITableViewCell *cell=[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                            reuseIdentifier:CellIdentifier]; 
```

原因是您无论如何都没有使用出队的单元格。

# php - 调用一个非对象，实际上是一个对象

> ID：11257682
> 
> 赞同：-5
> 
> 时间：2012-06-29T07:20:57.453
> 
> 标签：php

我有 php 脚本的问题。问题是它告诉我，我正在调用非对象的函数，但对象存在。

脚本是：

```
if ($dcdt_sql['pdo']) {
try {
    $dbh = new PDO(
        'mysql:host='.$dcdt_sql[0].';dbname='.$dcdt_sql[3],
        $dcdt_sql[1],
        $dcdt_sql[2],
        array(
            PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8",
            PDO::ATTR_PERSISTENT => false
        )
    );
}
catch (PDOException $e) { die("PDO ERR: [".$e->getMessage()."]"); }
}
else { $dbh = DBManager::connect(); }

switch ($mode) {
case 'fetch_assoc':
    if ($dcdt_sql['pdo']) {
        try {
            $sth = $dbh->prepare($sqlQuery)->execute();
            $result = $sth->fetchAll(PDO::FETCH_ASSOC); // PROBLEM IS IN THIS LiNE
            $return = $result;
        }
        catch (PDOException $e) { die("PDO ERR: [".$e->getMessage()."]"); }
    }
    else {
        $result = $dbh->query($sqlQuery);
                    if (!is_object($result)) { die('DEBUG: Query error: ['.$sqlQuery.'] returned: ['.print_r($result,1).']'); }//DEBUG
        while ($row = $result->fetch_assoc()) {
            $list[] = $row;
        }
        $return = $list;
    }
break; 
```

问题是我评论它的地方，但它应该是一个调用函数的对象。所以我不明白。

我得到的错误：

致命错误：在第 102 行的 /usr/local/www/apache22/data/centrs/dc_elec/report.lib.inc 中的非对象上调用成员函数 fetchAll()

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T07:24:45.083

[http://sg.php.net/manual/en/pdostatement.fetchall.php](http://sg.php.net/manual/en/pdostatement.fetchall.php)

按照规定正确使用：

```
<?php
$sth = $dbh->prepare("SELECT name, colour FROM fruit");
$sth->execute();

/* Fetch all of the remaining rows in the result set */
print("Fetch all of the remaining rows in the result set:\n");
$result = $sth->fetchAll();
print_r($result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T07:24:29.670

execute 方法返回 TRUE 或 FALSE，而不是对象。尝试

```
$sth = $dbh->prepare($sqlQuery);
$sth->execute();
$result = $sth->fetchAll(PDO::FETCH_ASSOC); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T07:24:28.417

也许试试

```
$sth = $dbh->prepare($sqlQuery);
$sth->execute();
$result = $sth->fetchAll(PDO::FETCH_ASSOC); // PROBLEM IS IN THIS LiNE
$return = $result; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T07:26:01.227

尝试：

```
 $sth = $dbh->prepare($sqlQuery);
        $sth->execute();
        $result = $sth->fetchAll(PDO::FETCH_ASSOC); // PROBLEM IS IN THIS LiNE
        $return = $result; 
```

这应该可行，因为 execute 将返回一个布尔值，而不是对象本身。对代码的其余部分进行批评；当您使用对象时，请查看*多态性*，如果您将“肮脏的工作”放入专用对象中，则不需要那些 if/else 语句。

# c# - 为什么我不能在网格视图的行编辑命令上获得 e.RowIndex

> ID：11257684
> 
> 赞同：0
> 
> 时间：2012-06-29T07:21:06.487
> 
> 标签：c#, asp.net

我在asp中有一个网格，数据键说'job_no'，我提供了一个onrowedit事件并将事件参数像往常一样存储在'e'中，就像这样

```
 protected void gvDetails_RowUpdating(object sender, GridViewUpdateEventArgs e) 
```

但是当我尝试使用这样的行索引访问行的相关数据键值时，

```
int id = Convert.ToInt32(gvDetails.DataKeys[e.RowIndex].Value.ToString()); 
```

，它给了我一个错误，说“e”没有名为 RowIndex 的属性。

为什么会发生这种情况，还有其他方法可以获取当前编辑行的数据键值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T07:26:28.787

正确的一种如下：

```
int id = Int32.Parse(gvDetails.DataKeys[Int32.Parse(e.NewEditIndex.ToString())].Values["job_no"].ToString()); 
```

# xamarin.ios - Xcode 和 MonoDevelop 之间的连接断开了？

> ID：11257685
> 
> 赞同：0
> 
> 时间：2012-06-29T07:21:07.543
> 
> 标签：xamarin.ios

我是一个新用户，昨天有一个基本的主/详细信息应用程序正常工作，使用带有动态单元格的表格视图。但经过一些编辑后，Xcode 故事板和 MonoDevelop 之间的链接似乎部分断开了。我正在更改表格视图单元格的样式（例如添加或删除附件，将样式从“基本”更改为“左侧细节”），但是当我运行代码时，这些更改都没有任何影响。更重要的是，当我运行应用程序时，单元格是静态的，而不是 Xcode 中显示的动态内容。我已经在 MonoDevelop 中检查了 XML 格式的情节提要的内容，并且正在按预期进行更改。并非连接中的所有内容都已损坏，例如，如果我在导航栏中添加一个按钮，则在我运行应用程序时它会正确显示。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T22:20:05.050

经过更多的实验（并且不得不从头开始重建我的故事板），我相信我在 MonoDevelop 中发现了一个错误。它可以像这样重现：

1.  使用一个简单的工作应用程序（我使用[了“任务”示例](http://docs.xamarin.com/ios/tutorials/Working_with_Tables_and_Cells/Part_5_-_Using_XCode,_Interface_Builder,_and_Storyboards)）并打开情节提要。

2.  在 Xcode 中，从根视图控制器表视图中删除表视图单元格。

3.  想想“哎呀，我不想删除它”，所以*关闭 Xcode 而不保存*（我为此使用了红色的“LED”按钮）——这似乎是 Xcode 中的一个错误，而不是 MonoDevelop，因为没有提示在关闭前询问我是否要保存。

4.  从 MonoDevelop 解决方案视图再次打开故事板 - 表格视图单元格*仍然被删除*- 当然不应该是因为 Xcode 没有保存。

5.  现在尝试再次添加单元格，就像以前一样。即使它在 Xcode 中看起来完全正确，具有正确的 segue 并标记为原型单元，但在运行代码时它不会正常工作。

6.  此外，如果您添加一些代码以便 GetCell 返回一个基本单元格（因为 DequeueReusableCell 现在不会返回一个单元格），则详细视图中的单元格格式会被卡住 - 将其样式更改为“Right Detail”等运行时对应用程序没有影响，尽管在 XCode 中看起来非常好。

现在，我知道新用户很容易认为他们在代码中发现了错误，而实际上它只是以某种方式被滥用。因此，如果其他人可以在我向 Apple 和/或 Xamarin 报告之前检查我的发现，那就太好了。如果我是正确的，这是一个严重的错误，因为我发现的唯一解决方案，如果你没有某种源代码控制，就是从头开始重建你的故事板。

谢谢

# salesforce - 当证书包含在签名的 SAML 响应中时，为什么我需要与 SSO 的 SP 共享证书？

> ID：11257686
> 
> 赞同：1
> 
> 时间：2012-06-29T07:21:11.853
> 
> 标签：salesforce, x509certificate, saml, saml-2.0

我只是想知道在使用 Salesforce 实现 SAML SSO 时，我意识到我将证书上传到了 SP 端（即 Salesforce），但是当我们发送签名的 SAML 响应时，我可以看到它已经包含证书。

为什么要提前与 SP 共享证书？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:18:57.770

这一切都是为了在系统之间建立信任。如果您不提前向 SFDC 提供您的证书，他们怎么能相信您发送的消息实际上来自您的 IDP？如果没有提前获得您的证书，他们可以验证消息是否完整，但无法验证消息的实际生成者。当您在 SAML 响应中包含您的公钥时，他们可以检查它是否与您与他们共享的公钥相同，并且与您用于生成签名的公钥相同。

# c# - node.js 的 .net 本机扩展

> ID：11257690
> 
> 赞同：18
> 
> 时间：2012-06-29T07:21:22.037
> 
> 标签：c#, c++, .net, node.js, visual-c++

我想在 node.js 中使用 .net dll。这是否意味着我需要使用 'clr hosting' 让这些 dll 与 c/c++ 一起使用，a la

*   [.NET Framework 4 托管接口](http://msdn.microsoft.com/en-us/library/dd380851.aspx ".NET Framework 4 托管接口")或
*   [托管公共语言运行时](http://msdn.microsoft.com/en-gb/library/9x0wh2z3.aspx "托管公共语言运行时")

~~不幸的是，在 github 上[创建 nodejs 本机 .Net 扩展](https://github.com/saary/node.net/ "创建一个 nodejs 原生 .Net 扩展")的示例有点令人失望，只需向下滚动到最后一步~~

 ~~> 将“公共语言运行时支持”选项更改为无公共语言运行时支持~~ 

~~你知道我的意思。~~更正该文章正义：它建议将该选项更改为**仅针对该文件的`SharpAddon.cpp`**“无公共语言运行时支持” ，因此您添加的其他 .cpp 文件将启用 CLR 支持（CLR 项目的默认设置），这意味着实际上，您可以使用其他 .cpp 文件中的 .net dll。

这个问题实际上是[Using a .NET DLL in Node.js / serverside javascript](https://stackoverflow.com/questions/4653433)的副本，它是在甚至没有节点的本机 Windows 端口的时候编写的，所以时代可能已经改变，尽管谷歌让我怀疑它.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-09T04:21:05.200

**更新**`binding.gyp`：当文件设置正确时，node-gyp 可以自动执行以下手动步骤。有关此简化过程，请参阅[此答案](https://stackoverflow.com/a/38690005/709537)。

* * *

事实证明这很容易。在与 CLR 托管和将数据进出主机苦苦挣扎一段时间后，事实证明**您实际上可以为您的节点扩展启用 /clr 没有问题**（到目前为止）。就是这样：

*   按照[http://nodejs.org/api/addons.html](http://nodejs.org/api/addons.html)上的说明生成项目文件
*   在 Visual Studio 中打开生成的 .sln（我在 VS 2010 上）并在项目设置中启用 /clr
*   现在它可能无法构建，您必须让 - 在这种情况下实际上很有帮助 - 错误消息引导您找到与 /clr 冲突的标志

我必须更改以使其工作的标志：

*   禁用 /EHsc（C++ 异常）
*   禁用 /RTC1 和 /RTCsu
*   发布：将 /MT 更改为 /MD
*   调试：将 /MTd 更改为 /MDd
*   发布：将 /GR- 更改为 /GR

然后你可以像这样混合托管和非托管代码，引用你的 .net dll。

```
#pragma managed

#using <managed.dll>

void callManaged()
{
    managed::Class1^ c1 = gcnew managed::Class1();
    System::String^ result = c1->Echo("hola");
    System::Console::WriteLine("It works: " + result);
}

#pragma unmanaged

Handle<Value> Method(const Arguments& args) {
  HandleScope scope;
  callManaged();
  return scope.Close(String::New("world"));
} 
```

**更新**刚刚通过一个简单的方法发现了这个链接：http: [//joseoncode.com/2012/04/10/writing-your-first-native-module-for-node-dot-js-on-windows/](http://joseoncode.com/2012/04/10/writing-your-first-native-module-for-node-dot-js-on-windows/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-01T05:09:14.007

听起来 edge.js 是 iisnode 的作者的新答案：

[Edge.js](http://tjanczuk.github.com/edge/#/)支持使用 C# 和 .NET，而不是编写本机 node.js 扩展

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-24T03:44:16.430

这些天来，有[cmake-js](https://www.npmjs.com/package/cmake-js)和[node-addon-api](https://github.com/nodejs/node-addon-api)让事情变得更容易，加上 node-addon-api 的 ABI 意味着模块在使用较新版本的 Node.js 时不需要重新编译。

请参阅此答案以获取简短教程：[https ://stackoverflow.com/a/54339042/709537](https://stackoverflow.com/a/54339042/709537)

# android - 手机解锁时如何显示消息

> ID：11257691
> 
> 赞同：2
> 
> 时间：2012-06-29T07:21:27.160
> 
> 标签：android, android-layout, android-widget

我想制作一个应用程序，当用户解锁他/她的 Android 手机时会显示一条消息。我不知道这是否可能。

如果有人有办法做到这一点，请您指出正确的方向。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T07:40:01.067

只有**`android.intent.action.USER_PRESENT`**行动**`BroadcastReceiver`**足以做你需要的

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T07:29:02.720

是的，您可以通过`android.intent.action.USER_PRESENT`在 manifast 中注册为：

```
<receiver android:name=".unlockReceiver">
<intent-filter android:enabled="true" android:priority="90000" android:exported="false">
    <action android:name="android.intent.action.USER_PRESENT" />
    </intent-filter>
 </receiver> 
```

并在 unlockReceiver 显示消息为：

```
public class unlockReceiver extends BroadcastReceiver {
@Override
public void onReceive(Context context, Intent intent) {
if (intent.getAction() != null) {
    if( intent.getAction().equals(Intent.ACTION_USER_PRESENT)) {
       Toast msg = Toast.makeText(context,"hello User !!! :)", Toast.LENGTH_LONG);
        msg.show();
      }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T07:30:23.863

是的，你可以这样做

在你的清单文件中写下这个，

```
receiver android:name=".MyBroadCastReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />

            <category android:name="android.intent.category.HOME" />

            <action android:name="android.intent.action.SCREEN_ON" />
            <action android:name="android.intent.action.USER_PRESENT" />
        </intent-filter>
    </receiver> 
```

而 MyBroadCastReceiver 的实现是这样的

```
public class MyBroadCastReceiver extends BroadcastReceiver {

    Context mContext;

    @Override
    public void onReceive(Context context, Intent intent) {
        mContext = context;
        Toast.makeText(mContext, "Phone UNLOCKED", Toast.LENGTH_LONG)
                .show();

    }

} 
```

# php - ajax jQuery.post() 在调用函数后没有检索任何 json 值

> ID：11257693
> 
> 赞同：1
> 
> 时间：2012-06-29T07:21:43.473
> 
> 标签：php, ajax, json, post

我不知道出了什么问题，问题是我试图从 mysql 查询中返回值以在 html div （#receptor）中打印，但没有打印任何值，我试图在 make 之后进行调用对下面定义的外部函数的请求以打印 JSON 源，这就是我现在要做的：

**结果.php**

```
 <?php
    $library = "DbConnection.inc.php";
    if (is_readable($library)){
            require $library;}else{
            throw new RuntimeException("No se Pudo Incluir la ${library}");
    }

    $db = new DbConnection('localhost','root','','macrotelecom');

    switch (@$_REQUEST['action'])
    {
       case "consultar" :
        $db->connect();
        $data =  $db->getAllRows("SELECT * FROM Caracter");
        $db->disconnect();    
        echo json_encode($data);      
        exit;

    }

    ?>
    <!DOCTYPE html>
    <html>
    <head>
    <meta charset="utf-8" />
    <title></title>
    <script type="text/javascript" src='jquery-1.7.1.min.js' ></script>
    <script type="text/javascript">
    $(function(){ 
      $("#consultar").click(function(){
        $("#receptor").text("Consultando....");        
          $.post("result.php",{action:"consultar"}, respuesta,'json')
       });
    });

    function respuesta(arg){

       $("#receptor").html(arg.toSource());
    }
    </script>
    </head>
    <body>
        </br>
        <input type="button" id="consultar" value="consultar">
        <div id="receptor" style="border: solid 1px black; height: 100%; width: 100%;">

        </div>
    </body>
    </html> 
```

但是，如果我在 $.post 函数中进行调用，它可以工作，但我不想这样做：

```
 <?php
    $library = "DbConnection.inc.php";
    if (is_readable($library)){
            require $library;}else{
            throw new RuntimeException("No se Pudo Incluir la ${library}");
    }

    $db = new DbConnection('localhost','root','','macrotelecom');

    switch (@$_REQUEST['action'])
    {
       case "consultar" :
        $db->connect();
        $data =  $db->getAllRows("SELECT * FROM Caracter");
        $db->disconnect();    
        echo json_encode($data);      
        exit;

    }

    ?>
    <!DOCTYPE html>
    <html>
    <head>
    <meta charset="utf-8" />
    <title></title>
    <script type="text/javascript" src='jquery-1.7.1.min.js' ></script>
    <script type="text/javascript">
    $(function(){ 
      $("#consultar").click(function(){
        $("#receptor").text("Consultando....");        
          $.post("result.php",{action:"consultar"}, respuesta,'json')
       });
    });

    function respuesta(arg){

       $("#receptor").html(arg.toSource());
    }
    </script>
    </head>
    <body>
        </br>
        <input type="button" id="consultar" value="consultar">
        <div id="receptor" style="border: solid 1px black; height: 100%; width: 100%;">

        </div>
    </body>
    </html> 
```

怎么了，这让我发疯了，我无法理解为什么不打印值，我将 de 数据类型定义为 json 并且没有任何反应，我在调用“respuesta”中传递了参数，如 respuesta(data) 并且两者都没有，我希望有人可以帮帮我，我看不到解决方案。

如果您想进行本地测试，我将库代码用于我正在使用的数据库连接。

**数据库连接.inc.php**

```
 <?php
    class DbConnection {

      private $db_connection  = null;
      private $db_host     = '';
      private $db_user     = '';
      private $db_password = '';
      private $db_name     = '';
      private $errors      = array();

      public function __construct($db_host, $db_user, $db_password, $db_name)
      {
        $this->db_host     = $db_host;
        $this->db_user     = $db_user;
        $this->db_password = $db_password;
        $this->db_name     = $db_name;
      }

      public function connect()
      {
        if ( !$this->db_connection = @mysql_connect($this->db_host, $this->db_user, $this->db_password) ) {
          throw new RunTimeException("Couldn't connect to the database server");
        }
        if ( !@mysql_select_db($this->db_name, $this->db_connection) ) {
          throw new RunTimeException("Couldn't connect to the given database");
        }
        $this->executeQuery("SET CHARACTER SET 'utf8'");
      }

      public function disconnect(){
        if(mysql_close($this->db_connection)){
            return true;
        }
        return false;
      }

      public function getAllRows($sql)
      {
        if ( !$results = @mysql_query($sql, $this->db_connection) ) {
          throw new RunTimeException("Couldn't execute query: ". mysql_error($this->db_connection) );
        }

        $count = 0;
        $rows  = array();
        while ( $row = mysql_fetch_assoc($results) ) {
          $rows[] = $row;
          $count++;
        }
        return ($count)?$rows:false;
      }

      public function getOneColumn($sql)
      {
        if ( !$results = @mysql_query($sql, $this->db_connection) ) {
          throw new RunTimeException("Couldn't execute query: ". mysql_error($this->db_connection) );
        }

        $count = 0;
        $rows  = array();
        while ( $row = mysql_fetch_array($results) ) {
          $rows[] = $row[0];
          $count++;
        }
        return ($count)?$rows:false;
      }

      public function getArrayPair($sql)
      {
        if ( !$results = @mysql_query($sql, $this->db_connection) ) {
          throw new RunTimeException("Couldn't execute query: ". mysql_error($this->db_connection) );
        }

        $count = 0;
        $rows  = array();
        while ( $row = mysql_fetch_array($results) ) {
          $rows[$row[0]] = $row[1];
          $count++;
        }
        return ($count)?$rows:false;
      }

      public function getOneRow($sql)
      {
        if ( !$results = @mysql_query($sql, $this->db_connection) ) {
          throw new RunTimeException("Couldn't execute query: ". mysql_error($this->db_connection) );
        }

        if ( $row = mysql_fetch_assoc($results) ) {
          return $row;
        }
        return false;
      }

      public function getOneValue($sql)
      {
        if ( !$results = @mysql_query($sql, $this->db_connection) ) {
          throw new RunTimeException("Couldn't execute query: ". mysql_error($this->db_connection) );
        }

        if ( $row = mysql_fetch_array($results) ) {
          return $row[0];
        }
        return false;
      }

      public function executeQuery($sql)
      {
        if ( !@mysql_query($sql, $this->db_connection) ) {
          $this->errors[] = mysql_error($this->db_connection);
          return false;
        }
        return true;
      }

      public function getErrors()
      {
        return $this->errors;
      }

      public function getLastId()
      {
        return mysql_insert_id($this->db_connection);
      }

      public function countRows($table)
      {
        if (!is_string($table)) {
          throw new InvalidArgumentException("table_name isn't an string");
        }

        if ( !$results = @mysql_query("SELECT COUNT(*) as total FROM $table", $this->db_connection) ) {
          throw new RunTimeException("Couldn't execute query: ". mysql_error($this->db_connection) );
        }

        $count = mysql_fetch_array($results);
        $count = $count['total'];
        return ($count)?$count:0;
      }
    }

    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:32:10.437

你也可以用这个

```
var id=$("#id").attr("value");
$.getJSON("pages.php",{id:id},dates);
function dates(datos)
{

$("#list").html("Name:"+datos[1].name+"<br>"+"Last Name:"+datos[1].lastname+"           
 <br>"+"Address:"+datos[1].address);
} 
```

更多帮助你会在这里找到

[http://docs.jquery.com/Getjson](http://docs.jquery.com/Getjson)

希望这会有所帮助

# php - 将 JSON 解析为 mySQL

> ID：11257694
> 
> 赞同：1
> 
> 时间：2012-06-29T07:21:45.993
> 
> 标签：php, mysql, json

获取我的 PHP 脚本 JSON 字符串，如下所示（包含任何对象的数组）：

```
[
    {
        "source":"symbols/2/2.png",
        "ypos":133,
        "template":"8B82CA47-41D2-D624-D6A2-37177CD82F28",
        "rotation":0,
        "type":"MyImage",
        "width":252,
        "depth":5,
        "height":159,
        "xpos":581
    },
    {
        "source":"symbols/2/2.png",
        "ypos":175,
        "template":"8B82CA47-41D2-D624-D6A2-37177CD82F28",
        "rotation":0,
        "type":"MyImage",
        "width":258,
        "depth":3,
        "height":163,
        "xpos":214
    },
    {
        "color":"0",
        "ypos":468.38,
        "fontSize":28,
        "xpos":156.95,
        "rotation":0,
        "type":"MyTextArea",
        "width":268.05,
        "depth":7,
        "height":244.62,
        "fontFamily":"Verdana Bold",
        "template":"8B82CA47-41D2-D624-D6A2-37177CD82F28"
    }
] 
```

如何使用 mySQL 中的记录保存此数组中的每个 JSON 对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T07:46:30.333

尝试这个：

```
<?php
$json = '[
    {
        "source":"symbols/2/2.png",
        "ypos":133,
        "template":"8B82CA47-41D2-D624-D6A2-37177CD82F28",
        "rotation":0,
        "type":"MyImage",
        "width":252,
        "depth":5,
        "height":159,
        "xpos":581
    },
    {
        "source":"symbols/2/2.png",
        "ypos":175,
        "template":"8B82CA47-41D2-D624-D6A2-37177CD82F28",
        "rotation":0,
        "type":"MyImage",
        "width":258,
        "depth":3,
        "height":163,
        "xpos":214
    },
    {
        "color":"0",
        "ypos":468.38,
        "fontSize":28,
        "xpos":156.95,
        "rotation":0,
        "type":"MyTextArea",
        "width":268.05,
        "depth":7,
        "height":244.62,
        "fontFamily":"Verdana Bold",
        "template":"8B82CA47-41D2-D624-D6A2-37177CD82F28"
    }
]';
//create a DB connection
con = mysql_connect("localhost","username","password");
mysql_connect _db('your_database',$con);

$result = json_decode($json);
foreach($result as $key => $value) {
    if($value) {

            //how to use json array to insert data in Database
        mysql_query("INSERT INTO tablename (source, ypos, template) VALUES ($value->source, $value->ypos,$value->template)");
    }
    mysql_close($con);
} 
```

注意：但建议使用 PHP Data Objects(PDO) 进行数据库操作。[在这里](http://php.net/manual/en/ref.pdo-mysql.php)检查

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T07:24:47.397

使用 json_decode 然后使用数组的值构造一个插入语句

# c# - 如何在 C# 中使用 Microsoft.Office.Interop.Word 查找标题 1 下的段落？

> ID：11257700
> 
> 赞同：5
> 
> 时间：2012-06-29T07:22:24.277
> 
> 标签：c#, ms-word, office-interop

我是一个学习者`Microsoft.Office.Interop.Word`。考虑一下我有一个带有“Header1”样式标题的word文档，下面有一些“正常”样式的句子。现在我需要找到属于样式“标题 1”的那些行。这就是我的编码：

```
foreach (Microsoft.Office.Interop.Word.Paragraph paragraph in doc.Paragraphs)
{
    Microsoft.Office.Interop.Word.Style style = paragraph.get_Style() as Microsoft.Office.Interop.Word.Style;
    string styleName = style.NameLocal;
    string text = paragraph.Range.Text;
    if (styleName == "Heading 1")
    {
        MessageBox.Show("Sent lines :" + text.ToString()); //this will show all headings
    }
} 
```

如何显示这些标题下的所有行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T06:37:27.300

我想你想要这样的东西，假设我理解你的问题：

```
//get the 'next' paragraph but only if it exists
if (paragraph.Next() != null)
{
     MessageBox.Show("Next paragraph:" + paragraph.Next().Range.Text.ToString());
} 
```

# iphone - 将 html 文本添加到我的 UIWebView

> ID：11257703
> 
> 赞同：4
> 
> 时间：2012-06-29T07:22:42.303
> 
> 标签：iphone, objective-c, ios, uiwebview

我想将数据库中的文本添加到 UIWebView，但我遇到了一个无法处理的错误。

在我的 .h 中：

```
#import <UIKit/UIKit.h>

@interface readNotice : UIViewController {

IBOutlet UILabel *message;
IBOutlet UIWebView *body;
}

@property(nonatomic, retain)IBOutlet UILabel *message;
@property(nonatomic, retain)IBOutlet UIWebView *body;

-(void)getNoticeData:(NSString *)noticeID:(NSString *)noticeTitle;

@end 
```

在他们中：

```
@synthesize message,body;

-(void)getNoticeData:(NSString *)noticeID:(NSString *)noticeTitle {

//some taks not useful for this code

NSString *bodyText = [dict objectForKey:@"introtext"];

[body loadHTMLString: bodyText];
} 
```

我得到的错误：

```
No visible @interface for 'UIWebView' declares the selector 'loadHTMLString:' 
```

为什么会这样？先感谢您

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T07:30:29.277

尝试像这样使用

> NSString *html = @"应该是一半我希望答案只有 42";
> [webView loadHTMLString:html baseURL:nil];

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-29T07:26:25.560

正确的调用是`loadHTMLString:baseURL:`

# dns - 将子域转换为域名（子 TLD 与 TLD）

> ID：11257706
> 
> 赞同：0
> 
> 时间：2012-06-29T07:22:59.853
> 
> 标签：dns, hostname, tld

我编写了一个从主机名中“提取”域的函数。例如

```
www.domain.com -> domain.com
domain.net -> domain.net
www.domain.co.uk -> domain.co.uk
www.subdomain.domain.tx.us -> domain.tx.us 
```

等等。

但是我无法找到所有 subTDL 的列表。

对于 nominet.uk 等域，函数也会返回错误的结果

我可以在哪里找到所有这些建议？

或任何其他方式来执行相同的功能，但使用让说 DNS？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T11:14:04.420

使用 DNS（或任何其他算法）是不可能的，因为没有关于什么是“子域”的正式定义。

目前唯一实用的解决方案是可通过[http://publicsuffix.org/](http://publicsuffix.org/)获得的“公共后缀”列表。

此列表包含管理员已知的那些域，其中不同的子域被发布给不同的第三方。

它的主要用途是帮助实施跨域安全策略——例如，“foo.co.uk”的服务器不能在“co.uk”上设置域 cookie，然后将其提供给任何其他子域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:07:08.647

有描述所有子 TLD 的公开文件位于：

[http://mxr.mozilla.org/mozilla-central/source/netwerk/dns/effective_tld_names.dat?raw=1](http://mxr.mozilla.org/mozilla-central/source/netwerk/dns/effective_tld_names.dat?raw=1)

# c# - 以字段名称和方向为参数的构建器 orderinf 表达式

> ID：11257710
> 
> 赞同：0
> 
> 时间：2012-06-29T07:23:23.237
> 
> 标签：c#, linq, linq-to-sql, predicate

我使用这段代码（在stackoverflow上找到）生成一个“OrderBy”

```
static class BuilderOrder
{
    public static IOrderedQueryable<T> OrderBy<T>(this IQueryable<T> source, string property)
    {
        return ApplyOrder<T>(source, property, "OrderBy");
    }

    public static IOrderedQueryable<T> OrderByDescending<T>(this IQueryable<T> source, string property)
    {
        return ApplyOrder<T>(source, property, "OrderByDescending");
    }

    public static IOrderedQueryable<T> ThenBy<T>(this IOrderedQueryable<T> source, string property)
    {
        return ApplyOrder<T>(source, property, "ThenBy");
    }

    public static IOrderedQueryable<T> ThenByDescending<T>(this IOrderedQueryable<T> source, string property)
    {
        return ApplyOrder<T>(source, property, "ThenByDescending");
    }

    static IOrderedQueryable<T> ApplyOrder<T>(IQueryable<T> source, string property, string methodName)
    {
        string[] props = property.Split('.');
        Type type = typeof(T);
        ParameterExpression arg = Expression.Parameter(type, "x");
        Expression expr = arg;

        foreach (string prop in props)
        {
            // use reflection (not ComponentModel) to mirror LINQ
            PropertyInfo pi = type.GetProperty(prop);
            expr = Expression.Property(expr, pi);
            type = pi.PropertyType;
        }

        Type delegateType = typeof(Func<,>).MakeGenericType(typeof(T), type);
        LambdaExpression lambda = Expression.Lambda(delegateType, expr, arg);

        object result = typeof(Queryable).GetMethods().Single(
                method => method.Name == methodName
                        && method.IsGenericMethodDefinition
                        && method.GetGenericArguments().Length == 2
                        && method.GetParameters().Length == 2)
                .MakeGenericMethod(typeof(T), type)
                .Invoke(null, new object[] { source, lambda });
        return (IOrderedQueryable<T>)result;
    }
} 
```

我有这个对象：

```
public class Person : IPerson
{
    public int Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
}

public interface IPerson
{
    int Id { get; set; }
    string FirstName { get; set; }
    string LastName { get; set; }
} 
```

是这样使用的

```
private void Tri(IQueryable<IPerson> list, string field, string direction)
{
    if (direction.ToUpper() == "DESC")
    {
        return BuilderOrder.OrderByDescending(liste, field);
    }
    else
    {
        return BuilderOrder.OrderBy(liste, field);
    }
} 
```

问题，排序不起作用。我想要一种作为参数发送的方法，要排序的列表`IQueryable<IPerson>`，更好`IQueryable<T>`的，字段名（用于排序）和方向（asc/desc）

任何的想法 ？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:56:59.400

我可以相信它不起作用......因为你在一个 void 方法中工作，没有 ref 参数！

将您的方法 Tri （将其重命名为 SortBy 或一些英文名称会更好）在 BuilderOrder 类中，然后

```
public static IOrderedQueryable<T> SortBy(this IQueryable<T> queryable, string field, string direction)
{
    return (direction.ToUpper() == "DESC") 
       ? queryable.OrderByDescending(field)
       : queryable.OrderBy(field);
} 
```

你可以添加另一个：

```
public static IOrderedQueryable<T> SortThenBy(this IOrderedQueryable<T> orderedQueryable, string field, string direction)
{
    return (direction.ToUpper() == "DESC") 
       ? orderedQueryable.ThenByDescending(field)
       : orderedQueryable.ThenBy(field);
} 
```

# haskell - 如何获取 cabal-install Distribution.Client.IndexUtils

> ID：11257712
> 
> 赞同：2
> 
> 时间：2012-06-29T07:23:33.717
> 
> 标签：haskell, cabal, cabal-install

我试图添加.cabal 文件，但是`cabal-install`。`Cabal-install`

至少缺少以下依赖项：`Cabal-install -any`

为什么没有`cabal-install`？

`Distribution.Client.IndexUtils`那么除了嵌入 cabal-install 源，我怎么能得到呢？

也是`Distribution.Client.IndexUtils`。

或者也许我可以用一些东西来代替它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:26:42.710

不幸的是，`cabal-install`是一个提供可执行文件但没有库的包。因此，没有简单的方法可以使用`cabal-install`其他工具提供的功能。`cabal`一种常见的方法是编写调用二进制文件并查询它以获取信息的包装程序。

将某些功能`cabal-install`作为库提供是一个有效且合理的目标，但可能需要一段时间才能实现。

至于错误信息：如果一个包只安装一个可执行文件，它没有注册为 GHC 的库。因此，如果您将`cabal-install`其列为另一个包的依赖项，您将收到`cabal-install`缺少的错误消息（作为库）。

# sum - Jasper 报告每个组项的总和

> ID：11257717
> 
> 赞同：0
> 
> 时间：2012-06-29T07:23:46.997
> 
> 标签：sum, jasper-reports, each

我正在使用 Jasper Report 4.5
我的问题是我有员工名单及其每月减税额。

我需要一份报告，其中按月显示员工减税组，底部应显示每位员工的总减税（总和）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T16:42:22.770

这是您可以做到的一种方法。

1.  按月排序结果集，然后按员工排序。
2.  创建按月分组的第 1 级报告组 group1 和按员工分组的第 2 级组 group2。
3.  创建一个在 group1 上重置的 sum 变量。
4.  在 group2 的尾部打印总和。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T16:34:14.230

如果在您的详细信息部分中有多个员工/日期的记录，然后您希望在底部为每个员工提供总计，我认为最好的解决方案是使用子报告。

您可以创建一个显示每个员工总数的子报表。您可以将所需的任何参数从主报告传递到子报告。您可以将子报告放在报告的摘要部分（或可能是组页脚）中。

# c# - 如何在 C#、SharePoint 的文本文件中设置文本框中的内容？

> ID：11257722
> 
> 赞同：0
> 
> 时间：2012-06-29T07:24:26.657
> 
> 标签：c#, string, textbox, replace

我有一个文本文件，其中有一个类似 $variable 的词。我通读了一遍，看看里面是否有“$variable”。然后我想将单词“$variable”替换为文本框的内容，然后将文本写回同一个文本文件中。

如果我不断使用字符串，例如

```
string var = "hello"; 
```

有用。但是谁能告诉我如何使用文本框的内容来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:27:33.127

这可能会有所帮助：

如何写入文件 [http://msdn.microsoft.com/en-us/library/6ka1wd3w](http://msdn.microsoft.com/en-us/library/6ka1wd3w)

以及如何从文件中读取 [http://msdn.microsoft.com/en-us/library/db5x7c0d](http://msdn.microsoft.com/en-us/library/db5x7c0d)

并从文本框中获取值使用

```
string textValue = txtMyValue.Text; 
```

但然后使用你给你的文本框的名字

# android - 将 android 工具从 r19 更新到 r20 后，工作中的 android 项目停止工作

> ID：11257729
> 
> 赞同：0
> 
> 时间：2012-06-29T07:24:46.670
> 
> 标签：android, eclipse-adt, android-sdk-tools

我来到一个已经开发了很长时间的新项目。

我的同事拥有完全相同的代码库，但我必须安装 Eclipse 和 ADT 插件。我的同事有 r19 的 android 工具和 android 平台工具 r11。我有 android 工具 r20 和平台工具 r12。

现在我在运行软件后收到此错误消息。

```
java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{
com.project.package/com.project.package.MyActivity}: 
java.lang.ClassNotFoundException: 
com.project.package.MyActivity in loader dalvik.system.PathClass Loader 
```

所以我们的清单看起来像这样：

```
<application
    android:icon="@drawable/app_icon"
    android:label="@string/app_name"
    android:theme="@style/Theme.MyStyle" >
    <activity
        android:name=".MyActivity"
        android:label="@string/app_name"
        android:windowSoftInputMode="adjustResize"
        android:screenOrientation="portrait"
        android:configChanges="locale" > 
```

等等

我正在使用 Eclipse Classic Indigo (v. 3.8)。

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T21:26:28.963

更新到 SDK Tools r20 后，我遇到了完全相同的问题。然后我意识到我没有将 ADT 更新到 r20，一旦我这样做了，问题就消失了。

我正在使用靛蓝（3.7.2）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T18:07:57.643

尝试清理项目。我也有同样的问题，但是清理后就消失了。

# vb.net - 在表单中显示 DAO 表

> ID：11257731
> 
> 赞同：0
> 
> 时间：2012-06-29T07:24:48.247
> 
> 标签：vb.net, vb6, datagridview, dao, vb6-migration

我正在将旧的 VB6 应用程序升级到使用 DAO 连接到 Access 数据库的 VB.NET。我知道这是一项无可救药的过时技术，但考虑到更改为 ADO 的工作量，我决定继续使用 DAO，尽管在查找文档时遇到了挫折。

我的问题是我想让 DataGridView 反映数据库中的表。当然，我可以让自己的例程手动设置列并填充 DataGridView，但如果这是一种方式，我想使用 DataSource 属性或其他一些内置函数。我发现了一个看起来很有希望的论坛[帖子](http://www.vbforums.com/showpost.php?p=3926969&postcount=6)，但不幸的是我找不到提到的附件。

此外，如果有比 DataGridView 更适合此的其他控件，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:30:20.180

DAO 文档不难找到。安装 VB6 和 Microsoft Developer Network（VB6 附带的磁盘）。进入 VB6 IDE，查看代码，将光标放在 DAO 关键字上，按 F1。Presto - 有用的文档！如果您更喜欢在线参考，[Access 2007 中的 DAO 文档](http://msdn.microsoft.com/en-us/library/bb244865%28v=office.12%29)应该可以很好地满足您的需求。

那么您想将 DataGridViewTable 绑定到**DAO**表吗？好主意，但这是一个很大的问题。VB6 应用程序是否使用数据绑定？

*   如果是这样，您将很难将其迁移到 VB.Net。考虑在 VB.Net 替代品中转移到 ADO.Net。
*   如果没有，您可能可以通过 COM 从 VB.Net 使用 DAO，并且您可能会发现与 DAO 相关的 VB6 可以毫不费力地移植到与 DAO 相关的 VB.Net。我不知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:38:49.023

一种选择是使用 Code Complete 中的方法。在 VB.NET 用户界面和遗留数据访问代码（您的 DAO 代码）之间放置一个漂亮、干净的层。该层将获取通过 DAO 获取的数据并将其传输到 DataTable 对象中。然后，将 DataTable 发送到 UI 并将其用作 DataGridView 的 .DataSource 属性。

然而，老实说，因为这涉及为每个返回数据供您显示的 DAO 函数编写代码，所以我只是将您的数据访问例程重构为 ADO.NET。由于 DAO 如此、如此、如此古老，在我看来，创建一个“新”应用程序并使用这种过时的技术是不负责任的，即使它在技术上可以“工作”。

# android - 无法实例化 com.android.menubar.internal.MenuBarEnhancerCocoa

> ID：11257732
> 
> 赞同：9
> 
> 时间：2012-06-29T07:24:51.103
> 
> 标签：android, eclipse-plugin, android-ndk

我是android开发的新手，当我在mac OSx上使用eclipse juno创建一个新项目时，我在运行时遇到错误**无法实例化com.android.menubar.internal.MenuBarEnhancerCocoa**

是的，在布局文件上它还说**- 项目目标（Android 4.1）未正确加载**。

任何人都请帮助我如何摆脱这种情况。提前致谢..

是的，一切都已正确设置 SDK 和所有内容，因为整个设置在其他系统之一上正常运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T18:29:26.563

我有同样的问题，但设法解决它。com.android.menubar.internal.MenuBarEnhancerCocoa - 不在链接到 Eclipse 安装的 SDK 中（由于各种原因，我有多个 - 例如最新的 Eclipse 不支持 AppEngine）。我必须采取许多步骤来解决这个问题（所以其中任何一个都可能是实际的修复，或者组合可以解决问题）。这是一个清单：

1.  如果您已安装 Eclipse - 单击 Android SDK 管理器图标。确保它指向最新的 Android SDK（写作时为 R20）
2.  由于它是一个新的 Eclipse+SDK - 通过从 SDK 管理器中显示的目标列表中选择来添加构建目标。还添加了Android支持工具
3.  重新启动 Eclipse。当被问及他的工作空间时 - 创建一个新的。我认为我的一些问题将与旧项目有关。
4.  问题应该已经消失了。最后一件事是，一旦你创建了一个项目——检查你的证书是否过期。还有另一个关于更新调试证书的线程（删除位于 ~/.android/debug.keystore 中的密钥库，然后重新启动 Eclipse。）
5.  创建一个新的 AVD 目标。

希望这些东西有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:12:54.323

虽然它没有解决问题，但它可能还是有用的。[有源 MenuBarEnhancer 的网页，](http://source-android.frandroid.com/sdk/swtmenubar/src/com/android/menubar/MenuBarEnhancer.java)其中调用实例化 com.android.menubar.internal.MenuBarEnhancerCocoa 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T14:22:55.603

在我看来，com.android.menubar.internal.MenuBarEnhancerCocoa 只是为了让 android 应用程序在直接运行时感觉更好。然后首选项和关于将在应用程序菜单中。如果您从 Eclipse 运行 android sdk 管理器，则 Eclipse 将接管应用程序菜单的那部分。

# c++ - 异常规范和标准输入迭代器

> ID：11257736
> 
> 赞同：0
> 
> 时间：2012-06-29T07:25:11.853
> 
> 标签：c++

我有一个输入迭代器，它使用两个方法 getFirst 和 getNext。这两个函数都是 api 的一部分，理论上这些函数可能会因任何原因而失败。在这种情况下，我正在投射运行时异常。

我以前从未在 C++ 中使用过异常规范，但我想现在可能是开始的好时机。所以我的 Constructor 和 operator++ 函数可以指定它们可以引发运行时错误。

然后我在我的 vector.h 文件（std::vector）中进行了快速搜索，但我没有看到那里使用了 throw。怎么来的？

如果我已经到了迭代器的末尾并且我做了 *(i++) 应该有例外吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T07:29:16.527

> 如果我已经到了迭代器的末尾并且我做了 *(i++) 应该有例外吗？

是的，那是一个错误。

关于异常规范，最好指定您的方法何时不抛出。而不是相反。看看[这个](https://stackoverflow.com/q/2441886/400303)问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T07:33:58.433

迭代器实际上不知道它何时到达容器的末尾，因为 STL 迭代器不知道它们指向的容器。

因此，由于访问无效内存，尝试增加它并取消引用它“可能”抛出，但无法知道下一个索引是否有效。

# android - 使用 Google Drive SDK V2 枚举文件夹和文件

> ID：11257740
> 
> 赞同：9
> 
> 时间：2012-06-29T07:25:28.113
> 
> 标签：android, google-drive-api

我对[v2 Google Drive SDK](https://developers.google.com/drive/v2/reference)有点困惑。

似乎有两种方法可以检索有关文件和文件夹的信息。

[files.list](https://developers.google.com/drive/v2/reference/files/list)和[children.list](https://developers.google.com/drive/v2/reference/children/list)

使用`files.list`I 似乎无法将搜索范围缩小到特定文件夹中的文件，但使用`children.list`仅返回非常基本的文件信息，例如 ID。没有文件名。

看起来我必须检索一个孩子列表，然后为每个孩子执行一个请求以找出它的文件名，这似乎非常低效。

使用 Google Drive 枚举文件夹及其内容的正常\正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T00:10:03.610

**更新**——

现在可以通过`files.list`. 您可以将`q`参数与测试`parents`文件或文件夹的查询一起传递。

```
q='MYFOLDERID' in parents 
```

更多搜索参数和选项以及示例：[https ://developers.google.com/drive/search-parameters](https://developers.google.com/drive/search-parameters)

**原始答案**——

是的，这是正确的。我们正在寻求改进此功能，但不幸的是，您暂时无法使用此功能 - 抱歉。

如果要枚举所有文件和文件夹，更好的解决方案可能是获取平面列表，并使用`parents`文件中的数组来生成层次结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T06:32:24.877

[+1 返回children.list](https://developers.google.com/drive/v2/reference/children/list)的元数据（至少是文件名）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T18:11:27.093

另一种方法是使用带有查询表达式的 files.list 来限制父级。

```
q='id-of-parent' in parents 
```

这将为您提供与子集合相同的结果，但每个项目都有完整的元数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T10:26:59.383

如果要获取驱动器中的所有文件夹，请使用：

```
FileList folders=service.files().list().setQ("mimeType='application/vnd.google-apps.folder'").execute();
for(File fl: folders.getItems()){
     Log.v(TAG+" fOLDER name:",fl.getTitle());
} 
```

# c - 在 Ubuntu 上编译 C 程序的问题

> ID：11257742
> 
> 赞同：1
> 
> 时间：2012-06-29T07:25:40.537
> 
> 标签：c, ubuntu-10.10

我正在使用 Ubuntu 10.10 作为 VM，并且是新手。直到最近我还可以从终端轻松编译 C 程序。但是，当我现在尝试编译它们时，它会给出一条消息：

```
/usr/bin/ld: cannot find -lc 
collect2: ld returned 1 exit status 
```

我已经在网上搜索过它，但无法弄清楚出了什么问题。我知道它的答案一定很简单，但任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T08:04:51.533

安装必要的工具应该可以解决您的问题。尝试：

```
sudo apt-get install build-essential 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T17:07:31.810

您可能——我们大多数人都这样做——安装了 Ubuntu 桌面，但没有安装 Ubuntu 服务器。默认的 Ubuntu 桌面安装并没有提供很多工具。

所以从安装 build-essential 开始：

```
sudo apt-get install -y build-essential 
```

然后再次尝试编译。build-essential 包含执行基本编译所需的一堆组件。

对于我的工作，除了 build-essential 之外，我还必须安装其他库，例如 curses。但是，我必须先安装 build-essential，然后才能执行其他任何操作。

# asp.net-mvc-4 - AttributeRouting：为什么是我的 POST，而不是我的 PUT 路由？

> ID：11257749
> 
> 赞同：1
> 
> 时间：2012-06-29T07:26:25.347
> 
> 标签：asp.net-mvc-4, asp.net-web-api, attributerouting

> **可能重复：**
> [ASP.NET Web API 仅在某些服务器上为 PUT 返回 404](https://stackoverflow.com/questions/10099270/asp-net-web-api-returns-404-for-put-only-on-some-servers)

我创建了一个新的 ASP.Net MVC4 解决方案来使用新的 Web API 功能。我有一个从 ApiController 继承的控制器，并且我正在使用[AttributeRouting 项目](http://nuget.org/packages/AttributeRouting)（也许最好[在这里](http://www.strathweb.com/2012/05/attribute-based-routing-in-asp-net-web-api/)解释）来设置我的路由。

我为 POST 设置了以下方法：

```
[POST("bank/{id}")]
public void Post(int id, BankRequest bank)
{
    // Create a new Bank here
} 
```

当从[Fiddler](http://fiddler2.com/fiddler2/)调用它时，我可以在 Visual Studio 2012 中调试它，并看到一切都按预期工作。我可以看到 id 是正确的，并且 json 会自动正确序列化到我的 BankRequest 对象中。一切都很好，我想。GET 也可以按预期工作。

然后我有一个类似的 PUT 方法：

```
[PUT("bank/{id}")]
public void Put(int id, BankRequest bank)
{
    // Update a Bank here
} 
```

问题是我在调用它时收到 HTTP 404 Not Found 消息。我所做的只是发送**完全相同**的 url 和 json，只是从 POST 更改为 PUT。我在 Fiddler 中所做的只是从 POST 更改为 PUT，所以我的 url 和 json 被保留了。当我切换回 POST 时，它也可以正常工作。我不知道是花哨的 AttributeRouting 不起作用还是其他什么不正确。

有谁知道为什么？

请注意，我正在设置别人定义的 API，所以我必须支持 PUT。

# ios - 如何在 xcode 项目中发布树结构？

> ID：11257754
> 
> 赞同：1
> 
> 时间：2012-06-29T07:27:12.460
> 
> 标签：ios, xcode, chess

我使用 c 制作了一个树形结构，并用它来存储国际象棋游戏的一些动作。我的结构是

```
struct node{
        NSString *comment;
        NSString *move;
        struct node *variationLink;
        struct node *nextLink;
        struct node *goBack;
    }; 
```

我使用 malloc 创建节点。当游戏被更改或卸载时，我想释放树有没有办法在 dalloc 中做到这一点，或者我必须创建一个函数来到达每个节点并释放它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T07:45:23.110

为节点实现析构函数。

`free()`如果节点内的所有节点都只是链接，则用于主节点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T08:52:11.370

您需要创建一个递归释放结构的函数，例如：

```
void free_nodes(struct node *n)
{
    if (n != NULL)
    {
        free_nodes(n->nextLink);
        free_nodes(n->variationLink);
        [n->comment release];
        [n->move release];
        free(n);
    }
} 
```

然后从您的`dealloc`方法中调用它：

```
- (void)dealloc
{
    free_nodes(_root_node);
    [super dealloc];
} 
```

其他的建议：

*   您需要一个指向变体主线的链接，这相当于`goBack`指针，但用于变体。这将允许您横向回到任何节点的主线，因为目前没有办法完全横向执行您的树。
*   我会重命名为`goBack`,`prev`和`nextLink`,`next`但这真的取决于你。`variationLink``variation`
*   您需要使用内部格式存储移动，而不是`NSString`. 字符串应该只在显示期间生成（在视图的 draw 方法中）。这允许您实际使用移动数据，而不必再次解析字符串（非常昂贵），并且仅在显示期间进行字符串转换允许您根据用户偏好更改移动字符串的生成方式（短代数符号，长代数符号，坐标符号，使用块字符字体而不是字母等）。

**来自 OP 的问题后编辑**：为了让您的树存储多个变体，您需要创建变体的双向链接列表。因此该节点将成为两个双向链表的一部分。用 C++ 编写会有所帮助，但如果您使用的是 C，我会用 C 来展示它：

```
typedef struct node
{
    Move move;    // Holds the move (this can be done using a 32-bit unsigned integer).
    struct node *prev;
    struct node *next;
    struct node *variation;
    struct node *mainline;
    NSString *comment;
} Node; 
```

这里的`mainline`链接指向之前的变化，`NULL`如果这是主线移动的话。

移动 1.e4 e5 (1...Nf6 a4) (1...Nc6 b4) 2.Nc3 将使用这样的树进行保存（如果链接未显示在节点上，则它们是`NULL`）：

![在此处输入图像描述](../Images/e11f26bb8e86f42ba3f458f65e3540ec.png)

我在我正在开发的国际象棋程序中使用这种方法，它运行得很好。重新迭代；我将数据（此节点）与演示文稿（包含 UI 中显示的移动文本的字符串）分开。生成的移动字符串应该以完全不同的方式保存；也许是 Core Text，但我使用的是自定义方法。

# django - 堆叠内联，许多行在 Django 中崩溃

> ID：11257756
> 
> 赞同：1
> 
> 时间：2012-06-29T07:27:20.983
> 
> 标签：django, django-models, django-admin

当尝试在 Django 管理中导航到“添加演示文稿”时，我必须等待大约 1 分钟才能呈现响应。问题是我在数据库中有大约 500 张幻灯片，管理员正在选择所有幻灯片三个不同的时间来填写菜单。我的模型定义显然做错了，因为我不希望这么多的数据使我的服务器瘫痪。任何关于为什么我在定义关系或使用 django 管理员的方式中遇到此问题的可见性？

```
class PresentationTitle(models.Model):
    title = models.CharField(max_length=255)
    order_number = models.IntegerField(default=0)

    def __unicode__(self):
        return self.title

class PresentationUser(models.Model):
    user = models.OneToOneField(User)
    authorized_modules = models.ManyToManyField(PresentationTitle)

class Presentation(models.Model):
    title = models.ForeignKey(PresentationTitle)
    user = models.ForeignKey(PresentationUser)
    presentation_date = models.DateTimeField()

    def __unicode__(self):
        return self.title.title

class Slide(models.Model):
    ....

    submodule = models.ForeignKey(Submodule)

    presentation = models.ManyToManyField(Presentation, through='PresentationSlide')

    ...

    class Meta:
        order_with_respect_to = 'submodule'
        ordering = ['order']

class PresentationSlide(models.Model):
    presentation = models.ForeignKey(Presentation)
    slide = models.ForeignKey(Slide)
    slide_order = models.IntegerField() 
```

此外，我的管理员包含：

```
class PresentationSlideInline(admin.StackedInline):                                                                                                                                                       
    model = PresentationSlide 

class PresentationAdmin(admin.ModelAdmin):                                                                                                                                                                
    inlines = [PresentationSlideInline]   

admin.site.register(Presentation, PresentationAdmin) 
```

可以理解的是，从 中删除仅具有 PresentationAdmin`admin.site.register`会使其加载响应非常快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T20:56:03.733

解决了我的问题——还有另一个罪魁祸首： *django-debug-toolbar*

从我的设置中删除它后，演示文稿的管理面板有效加载。

感谢大家的关注和支持，当您遇到性能问题时，请小心分析附加组件。

# c# - 为什么允许我在此代码中放置和放大？

> ID：11257766
> 
> 赞同：2
> 
> 时间：2012-06-29T07:28:29.413
> 
> 标签：c#

我有这个示例代码：

```
 DirectoryEntry _entry = new DirectoryEntry(
                    connectionString,
                    this.userPrinicipalName,
                    this.password,
                    AuthenticationTypes.SecureSocketsLayer & AuthenticationTypes.Encryption); 
```

为什么我可以在最后一个参数中制作放大器？我习惯了 Java，我以前从未见过这种巫术，而且我是 C# 的新手——所以谁能告诉我它是什么以及我是如何被允许这样做的？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T07:30:55.220

这些可能是整数，所以你只是`and (&)`对它们的值进行二进制处理。

如果你有 1 和 2 结果将是 0 `01 & 10 = 00`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T07:59:27.873

没有其他人指出这一点，但是

```
AuthenticationTypes.SecureSocketsLayer & AuthenticationTypes.Encryption 
```

有点奇怪，因为 SecureSocketsLayer 和 Encryption 都是 2。

所以你不妨只放一个或另一个，而不是两个......

如果它们*不同*并且您*确实*想组合它们，则应使用 OR 运算符 |，而不是 AND 运算符 &。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T07:31:24.590

[AuthenticationTypes](http://msdn.microsoft.com/en-us/library/system.directoryservices.authenticationtypes.aspx)有一个[FlagsAttribute](http://msdn.microsoft.com/en-us/library/system.flagsattribute.aspx)。因此，您可以通过例如按位或运算将不同的枚举值组合成一个复合枚举值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T07:33:01.073

在此页面中[身份验证类型](http://msdn.microsoft.com/en-us/library/system.directoryservices.authenticationtypes.aspx "身份验证类型")。它说“这个枚举有一个 FlagsAttribute 属性，它允许按位组合其成员值。” 这意味着每个属性都有自己的位，因此位可以组合成多个属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T07:33:40.837

这很可能是一个具有 [Flags] 属性的枚举。此属性允许在枚举上使用位运算符。

# c# - ASP.NET MVC 路由：绕过路径的静态文件处理程序

> ID：11257768
> 
> 赞同：19
> 
> 时间：2012-06-29T07:28:39.653
> 
> 标签：c#, .net, asp.net-mvc, routes, httphandler

我一直在谷歌搜索和修补几个小时，并没有真正取得太大进展，所以希望这里有人可以提供帮助。

我正在尝试将所有请求发送到某个路径以由第 3 方组件处理。

**编辑**我需要对所有其他路径的所有请求才能正常运行。

我正在使用带有通配符映射的路由处理程序，如下所示：

```
routes.Add(new Route("pathiwant/{*EverythingElse}", new MyRouteHandler())); 
```

所有传统路由都正确转发到处理程序，该处理程序很好地转发到第 3 方组件。当我点击静态文件（.html、.txt 等）时，它们会被 StaticFile 处理程序而不是我的处理程序拾取，所以我试图像这样（简化）关闭 StaticFile 处理程序：

```
<system.webServer>
  <handlers>
    <remove name="StaticFile"/>
  </handlers>
</system.webServer> 
```

这会关闭 StaticFile 处理程序，但 MVC 仍然不会选择路由。

我不希望退回到创建自己的处理程序并注入 ASP 请求堆栈，因为似乎应该有一种 MVC 快乐的方式来执行此操作。

有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-29T08:06:41.583

这里有几个选项。

[http://www.hanselman.com/blog/BackToBasicsDynamicImageGenerationASPNETControllersRoutingIHttpHandlersAndRunAllManagedModulesForAllRequests.aspx](http://www.hanselman.com/blog/BackToBasicsDynamicImageGenerationASPNETControllersRoutingIHttpHandlersAndRunAllManagedModulesForAllRequests.aspx)

如果您真的希望所有请求都通过 asp.net 管道运行，那么您需要。

```
<system.webServer>
  <modules runAllManagedModulesForAllRequests="true" />
</system.webServer> 
```

**更新**

另一种选择，特别是如果您需要绕过静态处理程序被限制在您的站点的一个子集，是使用以下

```
 <add name="ApiURIs-ISAPI-Integrated-4.0"
     path="/subdirectory/*"
     verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS"
     type="System.Web.Handlers.TransferRequestHandler"
     preCondition="integratedMode,runtimeVersionv4.0" /> 
```

考虑到在 mvc 站点上，大多数静态文件是从几个众所周知的目录中处理的，这是一个更好的选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-26T10:00:03.560

最好的解决方案可能是使用[URL 重写器](http://managedfusion.com/products/url-rewriter/)将请求从原始 URL 代理到 MVC 友好的替代方案。

例如，假设您需要能够自动加载从数据库提供的内容中的相对 URL。

```
RewriteRule ^/load/(\d+)/rel(\?.*)? -   [L]
RewriteRule ^/load/(\d+)/(.*)$  /load/$1/rel?path=$2    [P,QSA,L,NC] 
```

这些规则将允许您设置两个 MVC 路由：

```
routes.MapRoute(
    "Load Item",
    "load/{itemId}",
    new { controller = "Load", action = "Index" }
    );

routes.MapRoute(
    "Load Relative Item",
    "load/{itemId}/rel",   //?path=
    new { controller = "Load", action = "Relative" }
    ); 
```

然后你的操作方法很简单：

```
 public ActionResult Index(int itemId) { ... }

 public FileStreamResult Relative(int itemId, string path) { ... } 
```

第一个重写规则是为了防止包含 /rel 的路径被重写；他们已经是他们的最终形式。第二个重写规则代理（而不是重定向）请求。

例如

```
/load/1234/file.xml 
```

变成

```
/load/1234/rel?path=file.xml 
```

代理请求而不是进行客户端重定向可以使嵌套的相对路径也能正常工作（并隐藏最终用户的秘密。）

# asp-classic - 我可以从 Windows 上运行的 ASP Classic / Javascript 连接到 CouchDB 吗？

> ID：11257769
> 
> 赞同：3
> 
> 时间：2012-06-29T07:28:53.390
> 
> 标签：asp-classic, couchdb, cloudant

[Cloudant](http://cloudant.com)提供托管的 CouchDB，具有免费的入门级别，每月允许 6GB 的 IO。适合学习 CouchDB 的开发人员。

由于 CouchDB 允许在 Javascript 中指定 map/reduce 函数，因此通过 Javascript 连接到它可能是有意义的，在 Classic ASP 中运行。

可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T07:34:21.373

是的，为什么不？

Cloudant 可通过 HTTP/REST 访问。那里没什么特别的。

ASP Classic / Javascript 可以使用 MSXML2.ServerXMLHttp 发送请求，这与在客户端 Javascript 上使用 XMLHttpRequest 的方式非常相似。

好的是 CouchDB 的 Javascript 库，它不假定它在浏览器中运行，也不在 Node 中运行，因为 ASP Classic 都不是。这是一个开始：

[https://gist.github.com/3016476](https://gist.github.com/3016476)

示例 ASP 代码：

```
 var creds = getCloudantCredentials("cloudantCreds.txt");
    var couch = new CouchDB(couchUrl);
    couch.connect(creds[0],creds[1]);
    var r = couch.listDbs();
    say("all dbs: " + JSON.stringify(r, null, 2));

    r = couch.view('dbname', 'baseViews', 'bywords',
                   { include_docs: false,
                     key: "whatever",
                     reduce:true} );
    say("view: " + JSON.stringify(r, null, 2)); 
```

这是您可以创建一组视图的方式：

```
function createViews(dbName, viewSet) {
    var r, doc,
        empty = function(doc) {
            if ( ! doc.observation || doc.observation === '') {
                emit(null, doc);
            }
        },
        bywordsMap = function(doc) {
            var tokens, re1,
                uniq = function(a) {
                    var o = {}, i = 0, L = a.length, r = [];
                    for (; i < L; i++) {
                        if (a[i] !== '' && a[i] !== ' ') {
                            o[a[i]] = a[i];
                        }
                    }
                    for (i in o) { r.push(o[i]); }
                    return r;
                };

            if ( doc.observation && doc.observation !== '') {
                tokens = uniq(doc.observation.split(/( +)|\./));
                if (tokens && tokens.length > 0) {
                    tokens.map(function(token) {
                        emit(token, 1);
                    });
                }
            }
        };

    viewSet = viewSet || 'baseViews';
    try {
        r = couch.deleteView(dbName, viewSet);
        doc = { views: { empty:   { map:stringRep(empty) },
                         bywords: { map:stringRep(bywordsMap)}}};
        r = couch.createView(dbName, viewSet, doc);
    }
    catch (exc1) {
        say ('createViews() failed: ' + JSON.stringify(exc1));
    }
}

function stringRep(fn) {
    return fn.toString()
        .replace(/[\s\t]*\/\/.*$/gm, '') // comments
        .replace(/\n */gm, ' ')
        .replace(/\r */gm, ' ')
        .replace(/\{ +/gm, '{')
        .replace(/ +\}/gm, '}');
} 
```

# python - 结合grid/pack Tkinter

> ID：11257771
> 
> 赞同：5
> 
> 时间：2012-06-29T07:28:58.537
> 
> 标签：python, tkinter, ttk

我知道过去有很多关于网格和包装的问题，但我只是不明白如何将两者结合起来，因为我很难在两个方向（行/列）上扩展我的“表格”。

我希望保持相同大小但始终保持在窗口底部的按钮。但是，我希望通过调整窗口大小来自动扩展“表格”，但似乎无法使其正常工作。将 'win1' 更改为 pack 的意义在于它保持中心位置，但仅此而已。

我知道我需要更改术语，如何使用 pack 实现相同的效果，例如粘性等。

代码如下（显示基本框架和几个小部件，不完整代码）：

```
root = Tk()  

win1 = Frame(root)
win1.pack()
win1.grid_columnconfigure(0, weight=1)
win1.grid_rowconfigure(1, weight=1)

frame_table = ttk.Frame(win1, style="Black.TLabel", relief='sunken', borderwidth=1)
frame_table.pack(row=2, column=0, padx=1, pady=1, sticky= "nsew")
frame_table.grid_columnconfigure(0, weight=1)
frame_table.grid_rowconfigure(1, weight=1)
text_table1 = Label(frame_table, text='Number1', bg='white', borderwidth=0)
text_table1.grid(row=1, column=0, sticky="nsew", padx=1, pady=1)
empty1 = Label(frame_table, bg='white', borderwidth=0)
empty1.grid(row=2, column=0, sticky="nsew", padx=1, pady=1)
text_table2 = Label(frame_table, text='Number2', bg='white', borderwidth=0, width=12)
text_table2.grid(row=1, column=1, sticky="nsew", padx=1, pady=1)
empty2 = Label(frame_table, bg='white', borderwidth=0)
empty2.grid(row=2, column=1, sticky="nsew", padx=1, pady=1)

frame_but = ttk.Frame(win1)
frame_but.grid(sticky=S, padx=1, pady=1)
frame_but.grid_columnconfigure(0, weight=1)
frame_but.grid_rowconfigure(1, weight=1)
but1 = ttk.Button(frame_but, text='Start', command=Start)
but1.grid(row=3, column=0, padx=2, pady=1, sticky="S") 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-29T11:31:56.780

您的第一个问题是主框架`win1`没有任何选项。默认情况下，它*不会*填充它所在的容器部分。因此，无论您对内部小部件做什么，整个东西都会堆叠锚定到窗口的顶部。那么，你应该做的第一件事就是告诉`win1`填充整个窗口（假设这实际上是你想要它做的）：

```
win1.pack(side="top", fill="both", expand=True) 
```

当您调整窗口大小时，这将导致此框架正确扩展和收缩。

第二个问题是您将第 0 行`win`的权重设为 1，但您将`frame_table`第 3 行的默认权重设为 0。我不知道这是否是故意的，但这就是保留标签的原因并且条目小部件粘在屏幕底部，因为空行 0`win1`正在扩大和缩小以占用额外的空间。

**如何学习布局你的小部件**

正确的调整大小行为很容易做到正确，但要*学习*如何做到正确却相当困难。我的建议是，准备一些纸和一支铅笔。画出应用程序的主要区域——每个区域都有不同的属性。例如，底部的一行应该留在底部（状态栏，或者可能是一排按钮）。也许顶部的某些东西（例如工具栏）应该留在顶部，等等。通常只有一个区域是可扩展的，尽管该可扩展区域本身可能分为两个或多个区域。

在这种情况下，我猜你有两个区域：一个表格和一排按钮。画出来很容易。接下来，为每个区域创建一个框架，每个区域*只*创建一个框架。给它们单独的背景颜色，并使用网格或包将它们放置在窗口中，无论哪一种都可以为您提供所需的调整大小行为。如果你有一个简单的布局（每个区域都是从上到下或从左到右），pack 非常棒，如果你真的有一个网格，grid 就很棒。使用这个，调整选项，直到你得到你想要的主要区域的行为。不同的颜色将帮助您查看哪些区域正在调整大小，哪些没有。

一旦您的主要区域工作正常，您就可以开始关注内部部分。再次拿出那支铅笔和纸，对每个子区域做同样的事情。画出内部区域，找出哪些会在容器内生长，哪些不会。也许只有一个主要的子区域，所以你可以跳过这部分。最后，如果您有子区域，请创建框架，再次为它们提供不同的颜色，以便您可以看到正在调整大小的内容。调整设置，直到一切都按照您想要的方式调整大小。起泡，冲洗，重复。

最后，您将无法再细分您的窗口。通常只有几个区域，所以这个过程很快。一旦您将程序的不同区域全部调整为您想要的大小，就该添加实际的小部件了。完成后，您可以返回并从框架中删除颜色。

这很简单，但需要有条不紊的方法。只是将一堆小部件放入一个框架中并尝试随机的事情以使其工作*不是*正确的方法。有条不紊，在纸上布置您的设计，转移到具有不同颜色的框架上，然后添加您真正的小部件并添加最后的润色。

# windows-7 - Windows7 忽略了部分路径（在我的例子中是 powershell）

> ID：11257772
> 
> 赞同：3
> 
> 时间：2012-06-29T07:29:00.943
> 
> 标签：windows-7, path

windows 7 不会激活 powershell 的路径。

1) C:\Windows\System32\WindowsPowerShell\v1.0 存在于我的路径中

```
 C:\GitRepository>path
PATH=C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;  C:\Windows\System32\WindowsPowerShell\v1.0; 
```

2) 不能从 cmd 隐式运行 powershell

```
 C:\GitRepository>powershell 
'powershell' is not recognized as an internal or external command, operable program or batch file. 
```

3）但它显式运行

```
 C:\GitRepository>c:\Windows\System32\WindowsPowerShell\v1.0\powershell
Windows PowerShell
Copyright (C) 2009 Microsoft Corporation. All rights reserved.

PS C:\Users\user\Androidwork\WebDevelopment\GitRepository> exit

C:\Users\user\Androidwork\WebDevelopment\GitRepository> 
```

任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T07:45:43.603

您的问题是 PowerShell 路径前面的空格。只需删除它们，即：

```
PATH=C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-21T18:14:25.930

我发现我安装的一个程序删除了 ; 在将 Powershell 路径与下一条路径分开的路径中。;C:\Windows\System32\WindowsPowerShell**v1.0\c:**\程序文件\其他程序。放置分号后，powershell.exe 成功启动。

# c - ctime() 返回一个字符串，为什么我们不需要 free() 这个字符串的内存？

> ID：11257774
> 
> 赞同：11
> 
> 时间：2012-06-29T07:29:11.660
> 
> 标签：c, string, memory-management, heap-memory, stack-memory

函数的原型`ctime`是

```
char *ctime(const time_t *timep); 
```

正如我们所见，它返回一个字符串。但是，刺痛在哪里？

以及为什么我们不应该释放字符串的内存

这是示例代码会收到很多错误消息

```
char *p;
p = ctime(...);
...
free(p); 
```

*** 检测到 glibc *** ./a.out: free(): 无效指针：0x00007f0b365b4e60 ***

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-29T07:34:24.020

它返回一个指向`static`缓冲区的指针，并且不能是`free()`d。从[man ctime](http://linux.die.net/man/3/ctime)：

> 四个函数 asctime()、ctime()、gmtime() 和 localtime() 返回指向静态数据的指针，因此不是线程安全的。

C99 标准，第*7.23.3.2 节 ctime 函数*声明调用`ctime(timer)`函数等效于`asctime(localtime(timer))`，并且`asctime()`实现（如同一文档中所示）等效于：

```
char *asctime(const struct tm *timeptr)
{
    static const char wday_name[7][3] = {
        "Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"
    };

    static const char mon_name[12][3] = {
        "Jan", "Feb", "Mar", "Apr", "May", "Jun",
        "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"
    };

    static char result[26];
    sprintf(result,
            "%.3s %.3s%3d %.2d:%.2d:%.2d %d\n",
            wday_name[timeptr->tm_wday],
            mon_name[timeptr->tm_mon],
            timeptr->tm_mday, timeptr->tm_hour,
            timeptr->tm_min, timeptr->tm_sec,
            1900 + timeptr->tm_year);

    return result;
} 
```

传递给的参数`free()`必须是调用返回的指针`malloc()`，`calloc()`或者`realloc()`只有，否则行为未定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T07:33:41.617

它指向静态数据并且没有 malloc'd。

# visual-studio - 无法连接到 Visual Studio 本地主机 Web 服务器

> ID：11257775
> 
> 赞同：0
> 
> 时间：2012-06-29T07:29:12.023
> 
> 标签：visual-studio, iis

当我尝试使用 Visual Studio 运行（F5）我的项目解决方案时出现此错误，然后我执行了以下步骤......

我只是从安装了 Visual Studio 的其他服务器复制然后将其粘贴到我的本地（c:\windows\microsoft.net\framework\v2.0.50727）webdev.webserver.exe 然后我尝试运行

**在 Cmd 提示中：**

c:\windows\microsoft.net\framework\v2.0.50727\WebDev.WebServer /?。

cd C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727--->aspnet_regiis -i 然后 iisrest

**结果：** 没有任何效果。我仍然遇到相同的错误...

**错误：** 当我尝试运行 aspnet_regiis -i 时，我遇到了一些错误，例如

设置检测到一些错误并要求我检查日志文件...从日志文件中我得到了一些失败状态，例如：

C:\Inetpub\wwwroot\wss\VirtualDirectories\47223\aspnet_client 2012-06-29 12:58:20 创建目录失败：C:\Inetpub\wwwroot\wss\VirtualDirectories\47223\aspnet_client：CreateDirectoryInternal 失败，HRESULT 80070003：'该系统找不到指定的路径。' 2012-06-29 12:58:20 创建客户端站点脚本目录列表失败：CreateSiteClientScriptDir 失败，HRESULT 80070003：'系统找不到指定的路径。'

你能指导我这件事吗......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:44:07.250

经过以上所有尝试后，我只是修复了我的 .Net Framework 2.0 并重新启动系统。现在它工作得很好。谢谢

# c# - 将组合框显示文本设置为 ObservableCollection 的属性

> ID：11257778
> 
> 赞同：4
> 
> 时间：2012-06-29T07:29:15.760
> 
> 标签：c#, wpf, xaml, .net-4.0

我有以下集合，我想将其绑定到组合框：

```
public ObservableCollection<Parameter> Values
{ get; set; }

public class Parameter
{
    public String Text { get; set; }
    public String Value { get; set; }
} 
```

我需要将组合框的显示文本绑定到 Parameter 类的 Text 属性，我尝试了以下方法但均无济于事：

```
<ComboBox ItemsSource="{Binding Values}" DisplayMemberPath="Parameter.Text"
<ComboBox ItemsSource="{Binding Values}" DisplayMemberPath="Parameter\Text"
<ComboBox ItemsSource="{Binding Values}" DisplayMemberPath="Text" 
```

当我尝试上面的 3 种方法时，[程序集名称].Parameter 显示在每个参数的组合框中。

上面的 2 种方法在组合框中不显示任何内容

```
<ComboBox ItemsSource="{Binding Values, Path=Text}"
<ComboBox ItemsSource="{Binding Values, Path=Values.Text}" 
```

而这个采用第一个参数的文本，将其拆分为字符并将每个字符显示为组合框中的**单独**项目：

```
<ComboBox ItemsSource="{Binding Values, Path=Values/Text}" 
```

![在此处输入图像描述](../Images/05d5bca8b3195049217baa6c1dce9c84.png)

**更新：**

这是所要求的完整 XAML 代码

```
<ListBox BorderBrush="{x:Null}" Grid.Column="0" Height="100" Grid.ColumnSpan="2" Grid.Row="1" ItemsSource="{Binding ItemParams}" ScrollViewer.VerticalScrollBarVisibility="Auto" Margin="2" HorizontalContentAlignment="Stretch">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="100" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <TextBlock TextTrimming="CharacterEllipsis" Grid.Column="0" Margin="2" Text="{Binding Name}" Background="{Binding ElementName=cmbColors, Path=SelectedItem}"/>
                <ComboBox ItemsSource="{Binding Values}" DisplayMemberPath="Text" SelectedIndex="0" HorizontalAlignment="Left" Grid.Column="1" Margin="2" Width="150" Name="cmbColors" >
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Grid.Column="1" Margin="2, 1" Text="{Binding}"/>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
            </Grid>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

**参数类：**

```
public class Params
{
    public Params(String name, ObservableCollection<Parameter> values)
    {
        Name = name;
        Values = values;
    }

    public String Name
    { get; set; }

    public ObservableCollection<Parameter> Values
    { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T07:38:48.660

正确的公式是您已经提到的公式之一：

```
<ComboBox ItemsSource="{Binding Values}" DisplayMemberPath="Text" 
```

请再次检查，如果它不起作用，请逐字发布 XAML。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T07:39:06.827

你可以直接做：

```
<ComboBox ItemsSource="{Binding Values}" DisplayMemberPath="Text" /> 
```

对于 WPF，ComboBox (ComboBoxItem) 的每个元素都是**T**类型的，因此它将在**T**上查找公共属性，这就是为什么只放置**Text**就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T08:13:13.260

必须简单地删除组合框项目模板或设置`Text="{Binding Text}"`

```
 <ComboBox.ItemTemplate> 
        <DataTemplate> 
            <TextBlock Grid.Column="1" Margin="2, 1" Text="{Binding}"/> 
        </DataTemplate> 
    </ComboBox.ItemTemplate> 
```

# android - Android OpenGL 导出到手机

> ID：11257781
> 
> 赞同：0
> 
> 时间：2012-06-29T07:29:30.190
> 
> 标签：android, opengl-es, galaxy

我刚刚完成了一个 Android 应用程序，其中包括一个 openGL 端和另一个具有布局的端。该项目是为 Android 2.2 创建的，它在 2.2 和 4 Android 设备模拟器上运行良好。当我将应用程序导出到 Galaxy Nexus 手机时， OpenGL 一侧是白色的。是否有另一种使用 OpenGL 导出应用程序的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:15:21.010

当我意识到图片不是 2 x 2 的幂时，问题就解决了。当它被修复时，它就像一个字符一样工作，

# c# - 在 Server 2008 SP2 上对 Win32_PageFileUsage 类运行 WMI 查询时发生内存泄漏

> ID：11257783
> 
> 赞同：0
> 
> 时间：2012-06-29T07:29:34.970
> 
> 标签：c#, wmi

针对 Win32_PageFileUsage 类运行 WMI 查询会导致内存泄漏。在我的情况下，它每 5 分钟对 200 台服务器进行一次。大约 3 小时后，内存泄漏接近 10 GB。我认为这与该事实有关，即页面文件不存在。值为“0”。这是我的代码：

```
...
ObjectQuery pageFileUsageQuery = 
        new ObjectQuery("SELECT AllocatedBaseSize, CurrentUsage FROM Win32_PageFileUsage");
m_PageFileUsageSearcher = new ManagementObjectSearcher(managementScope, pageFileUsageQuery);
...
var pageFileUsageCollection = m_PageFileUsageSearcher.Get();
double currentUsage = 0;
double maxSize = 0;

foreach (ManagementBaseObject managementBaseObject in pageFileUsageCollection)
{
        string result = managementBaseObject["CurrentUsage"].ToString();
        currentUsage += double.Parse(result);
} 
```

系统为 Windows Server 2008 SP2。也许有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:48:49.000

`ManagementObjectSearcher`实现`IDisposable`（`ManagementObjectCollection`和一样`ManagementBaseObject`）。你应该处理这些......也许有适当的`using`陈述。

```
ObjectQuery pageFileUsageQuery = 
        new ObjectQuery("SELECT AllocatedBaseSize, CurrentUsage FROM Win32_PageFileUsage");
using(m_PageFileUsageSearcher = new ManagementObjectSearcher(managementScope, pageFileUsageQuery))
{
    ...
    using(var pageFileUsageCollection = m_PageFileUsageSearcher.Get())
    {
        double currentUsage = 0;
        double maxSize = 0;

        foreach (ManagementBaseObject managementBaseObject in pageFileUsageCollection)
        {
            try
            {
                string result = managementBaseObject["CurrentUsage"].ToString();
                currentUsage += double.Parse(result);
            }
            finally
            {
                managementBaseObject.Dispose();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-14T12:04:22.297

根据 michael-graczyk 上面的评论，Dispose of ... 中有一个错误。</p>

调用**GC.WaitForPendingFinalizers() 一次就足以修复它**

虽然我们并不认为它真的是一个解决方案，只是一种解决方法。

# java - 带有 AutoIt 和 Jacob 库的 Java

> ID：11257784
> 
> 赞同：1
> 
> 时间：2012-06-29T07:29:41.483
> 
> 标签：java, eclipse, autoit, jacob

我正在尝试使用 Eclipse 将 AutoIt 与 Java 集成。我已经正确配置了项目和 java 构建路径 - 可能;)。问题是，当我尝试运行我收到的项目时，错误如下所示：

> 线程“主”com.jacob.com.ComFailException 中的异常：无法在 com.jacob.com.Dispatch.createInstanceNative(Native Method) 处共同创建对象 com.jacob.com.Dispatch.(Dispatch.java:99 ) at com.jacob.activeX.ActiveXComponent.(ActiveXComponent.java:58) at autoitx4java.AutoItX.(AutoItX.java:181) at com.mainPackage.windowsGUIHandler.bleble(windowsGUIHandler.java:23) at com.mainPackage.windowsGUIHandler .main(windowsGUIHandler.java:39)

我的代码看起来像这样（很简单，但足以运行和测试 AutoIT 是否有效）

```
package com.mainPackage;

import java.io.File;
import com.jacob.com.LibraryLoader;
import junit.framework.Assert;
import autoitx4java.AutoItX;

public class windowsGUIHandler {

public static void thisIsTestFunction() {
    File file = new File("lib", "jacob-1.17-M2-x64.dll");
    System.setProperty(LibraryLoader.JACOB_DLL_PATH, file.getAbsolutePath());
    LibraryLoader.loadJacobLibrary();

    AutoItX x = new AutoItX();
    String notepad = "Untitled - Notepad";
    String testString = "this is a test.";
    x.run("notepad.exe");
    x.winActivate(notepad);
    x.winWaitActive(notepad);
    x.send(testString);
    Assert.assertTrue(x.winExists(notepad, testString));
    x.winClose(notepad, testString);
    x.winWaitActive("Notepad");
    x.send("{ALT}n");
    Assert.assertFalse(x.winExists(notepad, testString));

}

public static void main(String[] args) {
    thisIsTestFunction();
}

} 
```

我做了一项研究，发现[这篇文章](http://netheadaches.wordpress.com/2012/04/22/jacob-cant-co-create-object/)描述了如果 eclipse 返回**Can't co-create object**但是当我输入 cmd 时该怎么做

> regasm /verbose /nologo /codebase C:\jacob-1.17-M2-x64.dll

执行此命令后，出现错误**RegAsm : error RA0000 : Failed to load 'C:\jacob-1.17-M2-x64.dll' 因为它不是有效的 .NET 程序集**

此外，我在安装了 JRE 和 JDK 6 x64 的 Windows 7 x64 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:18:07.177

您是在 32 位处理器机器上使用 Windows 7 32 位还是在 64 位机器上使用 Windows 7 64 位。

我尝试在带有 regsvr32 的 32 位处理器机器中在我的 Windows 7 32 位中注册 jacob-1.17-M2-x86.dll 并且它成功运行

但在我的另一台装有 Windows 7 64 位处理器的机器上，jacob-1.17-M2-x86.dll 或 jacob-1.17-M2-x64.dll 都没有成功注册。

我必须使用 AutoItX3.dll，它是通过最新的 AutoIT 安装下载的。

检查您的配置并尝试正确的文件并查看。

# php - 如何使用这种特定格式的数据，如笛卡尔？(php)

> ID：11257787
> 
> 赞同：1
> 
> 时间：2012-06-29T07:30:02.787
> 
> 标签：php, mysql, arrays, algorithm

我有一个名为“字段”的表的数据库。有一些表的字段。此表有列：ID 字段、ID 列、ID 行、值。如何从这些数据中制作双数组？

它应该是这样的：

```
array {

    array {field1, field2, emptyfield, field3 },
    array {fieldnext, valueoffield, field, emptyfield}
} 
```

数据库中的每个字段都有值、列 ID 和行 ID（如笛卡尔坐标系）。重要提示：如果任何字段不存在，函数应使用值“空字段”创建此字段

我创建了一些代码，但它不会用文本“空字段”填充空字段。我找不到这个问题的解决方案，我需要你的帮助:)

```
 //result is array made from db result
 //rows is output array

 for($i=0; $i<count($result); $i++) {

  if(!is_array($rows[$i2])) $rows[$i2]=array();

   if($result[$i]['id_row']==$result[$i-1]['id_row'] OR $i==0) {

     array_push($rows[$i2], $result[$i]['value']);       

   } else {

     $i2++;
     $rows[$i2]=array();

     array_push($rows[$i2], $result[$i]['value']);  
   }
 } 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:45:55.433

也许尝试添加该行

```
if(empty($result[$i]['value'])) $result[$i]['value'] = 'empty field'; 
```

在 for 循环块的顶部。

# css - 有推特引导模态比例吗？

> ID：11257788
> 
> 赞同：1
> 
> 时间：2012-06-29T07:30:10.007
> 
> 标签：css, twitter, modal-dialog

我正在使用来自 twitter bootsrap 的“高”模式。是否可以使用较低的分辨率进行缩放？如果我选择较低的分辨率，我将看不到整个模态。无论如何，我希望它适合屏幕。如果它不适合我希望它是可滚动的（实际上有时会发生 /max-height: 400px）。我唯一能做的就是调整最大高度吗？

```
.modal-body {
  max-height: 400px;
  padding: 15px;
  overflow-y: auto;
}

.modal {
  position: fixed;
  top: 30%;
  left: 50%;
  z-index: 1050;
  width: 750px;
  margin: -250px 0 0 -280px;
  overflow: auto;
  background-color: #ffffff;
  border: 1px solid #999;
  border: 1px solid rgba(0, 0, 0, 0.3);
  *border: 1px solid #999;
  -webkit-border-radius: 6px;
     -moz-border-radius: 6px;
          border-radius: 6px;
  -webkit-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);
     -moz-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);
          box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);
  -webkit-background-clip: padding-box;
     -moz-background-clip: padding-box;
          background-clip: padding-box;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-03T07:45:20.487

尽管建议的解决方案有效，但当您使用**position: absolute**时，如果窗口的滚动条低于该值（即顶部不在视线范围内），则模式会显示自身，然后滚动条会“跳”到它的顶部。

另一种选择是根据窗口的高度调整模式的高度。为此，只需添加以下规则：

```
/* Since the position of the modal is top: 10%, this rules guarantees that its
centered vertically */
div.modal.fade.in { height: 80%; }

/* This rule shows the footer at the bottom of the modal and sets its width
so it looks good */
div.modal div.modal-footer{
    position: absolute;
    width: 94%;
    bottom: 0px;
}

/* Finally, we set the bottom of the body so its above the footer 
and its top so its bellow the header of the modal */
div.modal div.modal-body{
    position: absolute;
    width: 94%;
    top: 50px;
    bottom: 60px;
} 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T07:55:52.363

```
.modal {
    position: absolute; 
} 
```

# c# - 如何处理 ASP.net Web 应用程序中的 PageRequestManagerTimeoutException？

> ID：11257798
> 
> 赞同：3
> 
> 时间：2012-06-29T07:30:28.707
> 
> 标签：c#, javascript, asp.net

我正在开发一个 ASP.NET Web 应用程序，该应用程序尝试通过登录服务器从远程服务器下载一些文件。当我尝试下载文件时，它适用于小文件，但下载 750 KB 的文件时显示以下异常。

![在此处输入图像描述](../Images/194a64910e65ad6dc997b255ddcc5819.png)

我正在定义`HTTPRequest Timout = System.Threading.Timeout.Infinite;`

我正在使用此代码从服务器读取文件

```
byte[] buffer = new byte[32768];
            using (Stream input = getResponse.GetResponseStream())
            {
                using (FileStream output = new FileStream(saveTo1, FileMode.OpenOrCreate))
                {
                    int bytesRead;

                    while ((bytesRead = input.Read(buffer, 0, buffer.Length)) > 0)
                    {
                        output.Write(buffer, 0, bytesRead);
                    }
                }
            } 
```

什么可能造成这个问题？

> 此外，当我单击`Ignore`或时`Continue`，它会进一步顺利地继续下载。我该如何克服这个问题？

提前致谢。:)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-29T07:47:11.907

如果需要处理超时异常，可以用javascript处理。将此添加到您的页面。

```
<script type="text/javascript">
Sys.WebForms.PageRequestManager.getInstance().add_endRequest(requestEndHandler );

// This function will handle the end request event
function requestEndHandler(sender, args) {
   if( args.get_error() ){
      document.getElementById("errorMessageLabel").innerText = 
         args.get_error().description;
       args.set_errorHandled(true);
   }
}

</script>
...

<span id="errorMessageLabel"></span> 
```

此外，如果您愿意，您可以通过 sdding`AsyncPostBackTimeOut="600"//Time`到您的脚本管理器来增加 AsyncPostBackTimeOut。：

```
<asp:ScriptManager ID="ScriptManager1" runat="server"

AsyncPostBackTimeOut="600" >

</asp:ScriptManager> 
```

# grails - 拦截 URL 不适用于 grails

> ID：11257801
> 
> 赞同：0
> 
> 时间：2012-06-29T07:30:33.810
> 
> 标签：grails, spring-security, intercept

我正在尝试使用 grails 中的拦截 URL 来保护某些页面。配置看起来像这样

```
 grails.plugins.springsecurity.securityConfigType = SecurityConfigType.InterceptUrlMap
 grails.plugins.springsecurity.interceptUrlMap = [
    '/dashBoard/superAdmin':['ROLE_SUPERADMIN'],
    '/dashBoard/config':['ROLE_PRODMANADMIN'],
    '/dashBoard/reports':['ROLE_PRODMANADMIN'],
    '/game/*/**':['ROLE_SUPERADMIN'],
    '/bet/*/**':['ROLE_SUPERADMIN'],
    '/payment/*/**':['ROLE_SUPERADMIN'],
    '/*/**': ['IS_AUTHENTICATED_FULLY'],
    '/*':['IS_AUTHENTICATED_FULLY'],
    '/js/**': ['IS_AUTHENTICATED_ANONYMOUSLY'],
    '/css/**':['IS_AUTHENTICATED_ANONYMOUSLY'],
    '/images/**': ['IS_AUTHENTICATED_ANONYMOUSLY'],
    '/favicon.ico': ['IS_AUTHENTICATED_ANONYMOUSLY'],
    ] 
```

但是当我尝试通过 ROLE_SUPERADMIN 登录时，我被重定向到拒绝页面。当我尝试打印当前登录用户的权限时，它会打印 ROLE_SUPERADMIN。如果我将 ROLE_SUPERADMIN 更改为 ROLE_ADMIN，它可以工作，但在这种情况下我必须使用 ROLE_SUPERADMIN。那么我做错了什么？我正在使用弹簧安全核心

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:40:21.533

Assign several roles to the user or map several roles to particular URL.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T12:28:06.590

所有的 url 都必须是小写的（即 'dashBoard' -> 'dashboard'）——你应该在启动时收到关于这个的警告。

# java - 使用java远程登录linux系统

> ID：11257808
> 
> 赞同：0
> 
> 时间：2012-06-29T07:31:21.223
> 
> 标签：java, linux

我想使用java远程登录linux系统，然后在该系统上执行“df -h”命令，我目前正在使用这个代码

```
 String[] cm = {
                       "ssh",
                       "root@192.168.1.10" ,
                       "df -h"

                       };

         try
          {
           Process q=  Runtime.getRuntime().exec(cm);
           q.waitFor();
          } 
```

一切正常，但问题是出现手动输入主机密码的弹出窗口...如何使用 java 代码自动输入密码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T07:38:59.560

放下我朋友的一切，使用华丽的 jsch： [http ://www.jcraft.com/jsch/](http://www.jcraft.com/jsch/)

但是，如果您坚持使用命令行工具，那么请使用[Apache Commons Exec](http://commons.apache.org/exec/tutorial.html)，它同时更加可靠、灵活和清晰。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T07:35:43.553

您可以适当地配置，`ssh`例如 thru `.ssh/config`，并且您可以在`.ssh/authorized_keys`. 仔细阅读一些好的 ssh 教程，例如[Linux 的 ssh 教程](http://support.suso.com/supki/SSH_Tutorial_for_Linux)和许多其他网页，甚至一些好的[ssh 书](http://www.snailbook.com/)。

请注意，您可能不需要成为 root 才能运行`df -h`命令，因此我建议避免为此目的成为远程 root。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T08:18:23.817

虽然不是最佳实践，但如果您真的希望按照要求通过 Java 进行操作，这是您问题的解决方案。

```
import java.io.InputStream;
import java.io.OutputStream;

public class Test {
  public static void main( String[] args ) throws Exception {
    String[] cm = {
        "ssh",
        "root@192.168.1.10" ,
        "df -h"
    };
    Process p = Runtime.getRuntime().exec( cm );
    InputStream in = p.getInputStream();
    OutputStream out = p.getOutputStream();
    out.write( "password".getBytes() );
  }
} 
```

如有必要，您可以根据从输入流中读取的内容来决定何时发送密码。

# gwt - 在 GWT 中的画布形状上单击侦听器

> ID：11257810
> 
> 赞同：0
> 
> 时间：2012-06-29T07:31:25.040
> 
> 标签：gwt, canvas

我想知道 GWT 是否提供了一些友好的机制来完成[这个演示](http://simonsarris.com/blog/510-making-html5-canvas-useful)所展示的内容。也许不拖，但我需要处理我之前在画布上绘制的形状的简单点击（可能是图像）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:19:38.047

这对于 GwtCanvas 和 HtmlCanvas 都是不可能的。您必须手动检测单击位置并将其与绘制形状的托管状态进行比较。

可能有一个图书馆，但我不能提供任何建议。

您还可以考虑 SVG，它*确实*支持绘制项目的事件处理程序。

# asp.net - 剃刀分配错误

> ID：11257811
> 
> 赞同：0
> 
> 时间：2012-06-29T07:31:27.287
> 
> 标签：asp.net, razor

```
if(Request.QueryString["UserId"] !== WebSecurity.CurrentUserId){
    Response.Redirect("~/AdminError");
} 
```

上面的表达有什么问题？请帮助它说

```
Compiler Error Message: CS1525: Invalid expression term '==' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:32:56.273

有一个额外的`=`标志。`!==`在 C# 中是不合法的，`!=`是。

编译器将此视为标记序列`!`（逻辑否定），`==`并抱怨否定运算符`==`没有意义。

# iphone - 应用程序在 assert() 上崩溃

> ID：11257813
> 
> 赞同：0
> 
> 时间：2012-06-29T07:31:32.023
> 
> 标签：iphone, objective-c, ios5, ftp

我正在使用 ftp 协议在服务器上发送扩展名为 .m4a 的音频文件，首先我将此文件存储到我的文档目录路径中。我在控制台中获得了文档目录路径，如下所示：

```
NSLog(@"filepath=%@",filePath);
assert([[NSFileManager defaultManager] fileExistsAtPath:filePath]); 
```

在 assert() 函数我的应用程序崩溃我不知道是什么原因。我的控制台如下：

```
filepath=/Users/macmini2/Library/Application Support/iPhone Simulator/5.1/Applications/B2CFB7FF-A4BF-4B83-8DD1-102C5680C16C/Documents/9_39.m4a
Assertion failed: ([[NSFileManager defaultManager] fileExistsAtPath:filePath]) 
```

如果您有任何解决方案，请提前提供thanx ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:44:02.500

您要查找的文件很可能不存在。

要进行双重检查，请输入：

```
ls "/Users/macmini2/Library/Application Support/iPhone Simulator/5.1/Applications/B2CFB7FF-A4BF-4B83-8DD1-102C5680C16C/Documents/9_39.m4a" 
```

在终端窗口中。

如果您遇到错误，请检查您的构建方式`filePath`。

如何使 9_39.m4a 文件在 iPhone 上可用？它是应用程序包的一部分吗？（您不应该在 Resources 文件夹中搜索它吗？）

# spring - Spring MVC 中的全局模型

> ID：11257815
> 
> 赞同：0
> 
> 时间：2012-06-29T07:31:35.190
> 
> 标签：spring, model-view-controller

我想将 map 作为属性添加到 spring 的 servlet 并获取其值，例如请求或会话模型中的属性（${map['key']}）。如何添加此地图？

找到一种方法作为拦截器。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:43:35.427

拦截器是预处理请求和全局应用逻辑的适当且预期的方式。它们类似于纯 servlet 环境中的过滤器，应该以同样的方式考虑。

创建您自己的拦截器并在其中为您的请求装饰或添加属性。

# java - 我可以将每个用于两个相同大小的数组吗

> ID：11257816
> 
> 赞同：5
> 
> 时间：2012-06-29T07:31:38.513
> 
> 标签：java, arrays

我有两个数组：

```
name[] and roll[] 
```

有没有办法为每个循环遍历两个数组。两个数组的大小保持不变。

我知道使用两个单独的循环，我们可以遍历并实际上在一个循环中也没什么大不了的，但我想要这样的东西：

```
for(String n:name,int r:roll){
  //blah blah
} 
```

请解释一下，谢谢..... Ankur

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T07:35:32.053

不，您将不得不使用老式的

```
for(int index = 0; index < name.length; index++) {
  //blah blah with name[index] and roll[index]
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T07:33:20.807

不，你不能用一个`for-each`循环遍历两个相同大小的数组。

如果你想在一个循环中迭代两个数组，那么你将不得不使用传统的 java`for`循环

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T07:38:58.217

```
for(int i=0,len=name.length; i<len; i++) {
     String n = name[i];
     int r = roll[i];
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-29T07:45:37.903

循环不公开索引（故意的`for...each`，实际上它甚至没有索引）。如果您真的很想使用自己的索引，则可以使用它，但是最好使用带有索引的老式 for 循环。

以下是使用自己的索引的方法：

```
{
    int index = 0;
    for(String name : names) {
        // roll[index];
        ++index
    }
} 
```

另请参阅[此](https://stackoverflow.com/a/477592/473637)答案。

# java - 直接启动其他应用程序

> ID：11257817
> 
> 赞同：1
> 
> 时间：2012-06-29T07:31:52.863
> 
> 标签：java, android, android-intent

我想直接从我的应用程序运行另一个应用程序（Polaris Office）。但它也应该直接打开一个 PDF 文件。

我尝试了以下代码：

```
File targetFile = new File("/mnt/sdcard/pdf.pdf");
Uri targetUri = Uri.fromFile(targetFile);

Intent intent = new Intent(Intent.ACTION_MAIN);
intent.setComponent(new ComponentName("com.infraware.PolarisOfficeForTablet",
                                      "com.infraware.viewer.UxViewerActivity"));
intent.setDataAndType(targetUri, "application/pdf");

startActivity(intent); 
```

知道我该怎么做吗？我当前的代码给出了错误消息：

> 原因：java.lang.SecurityException: Permission Denial:starting Intent { act=android.intent.action.MAIN dat=file:///mnt/sdcard/pdf.pdf typ=application/pdf cmp=com.infraware.PolarisOfficeForTablet /com.infraware.viewer.UxViewerActivity } 来自 ProcessRecord{40bc9598 10349:de.pixelstein.nativ/10099} (pid=10349, uid=10099) 未从 uid 10040 导出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:23:23.570

`AndroidManifest.xml`只有在其他应用程序中标记为已导出或已 `<intent-filter>`定义自动导出它们时，您才能启动其他应用程序的活动。

# qt - 黑莓10会支持Qt应用吗

> ID：11257821
> 
> 赞同：0
> 
> 时间：2012-06-29T07:32:14.607
> 
> 标签：qt, blackberry-10

诺基亚 QT 应用可以移植到黑莓 10 上吗？如果是这样，有什么优点和缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T07:59:26.657

是的，BB OS 10 将支持 Qt。[你可以在 BB GitHub 上](http://blackberry.github.com/)找到有用的信息

# moodle - 如何在不使用 Moodle 中现有模板的情况下创建反馈调查

> ID：11257825
> 
> 赞同：2
> 
> 时间：2012-06-29T07:32:33.353
> 
> 标签：moodle

我想针对课程和老师的反馈创建调查。Moodle 有一个收集学生反馈的工具：调查，但调查是 Moodle 开发人员已经开发的一组预定问题。

如何在不使用 Moodle 中现有模板的情况下创建反馈调查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T21:35:59.127

[反馈模块](http://docs.moodle.org/23/en/Feedback_module)呢？

如果这对你不起作用，请告诉我为什么，也许我想出了别的办法。

祝你好运！

# entity-framework - 实体框架、PostgreSQL、带有隐藏 xmin 列的乐观并发

> ID：11257826
> 
> 赞同：4
> 
> 时间：2012-06-29T07:32:46.490
> 
> 标签：entity-framework, postgresql, optimistic-concurrency

我正在针对 PostgreSQL 9.1 数据库使用实体框架（模型优先方法）。

您可能都知道每个表都有一个名为**xmin**的隐藏列，我将使用它来帮助 EF 在执行更新之前确定该行是否已更改。

我知道 PostgreSQL 的内部结构可能会发生变化，这对于生产代码来说可能根本不是一个好主意，但我想尝试一下。

手动更新模型以在一个表中包含此列并测试其行为所需的步骤是什么？

TIA。

**编辑 1**：这是我到目前为止的位置，使用带有自我跟踪实体的模型优先方法。

该模型已修改为：

```
CSDL : <Property Name="xmin" Type="Decimal" Nullable="false" Precision="15" Scale="0" ConcurrencyMode="Fixed" />
SSDL : <Property Name="xmin" Type="numeric" Nullable="false" Precision="15" Scale="0" StoreGeneratedPattern="Computed" /> 
```

xmin 列在 SELECT 上有效检索，然后在 UPDATE 期间使用：

```
UPDATE "schema"."mytable" SET "column1"=FALSE WHERE ("pk"=cast(7526 as numeric)) AND ("xmin"=cast(1185877 as numeric)) 
```

这里的问题在于 xmin 列上使用的演员表。它失败。到目前为止，我发现它根本不需要演员表。但我不确定如何告诉 EF 在查询此列时完全不使用强制转换。

顺便说一句，xmin 列数据类型是Npgsql ADO.NET 提供程序未知的**“xid” 。**

**编辑 2**：这是生成 SQL 文本的提供程序。查看提供程序代码后，我可以确认使用整数数据类型时没有强制转换。因此，我在实体中使用了一个整数来存储值并尝试选择和更新实体。它因并发异常而失败。

```
System.Data.OptimisticConcurrencyException: Store update, insert, or delete statement affected an unexpected number of rows (0). Entities may have been modified or deleted since entities were loaded. Refresh ObjectStateManager entries.
   at System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter)
   at System.Data.Objects.ObjectContext.SaveChanges(SaveOptions options) 
```

pgsql 日志如下：

```
CEST LOG:  instruction : BEGIN; SET TRANSACTION ISOLATION LEVEL READ COMMITTED;
CEST LOG:  instruction : UPDATE "schema"."mytable" SET "column1"=TRUE WHERE ("pk"=cast(7526 as numeric)) AND ("xmin"=1185882)
CEST LOG:  instruction : ROLLBACK 
```

嗯，检索受影响的行可能存在问题，因为如果手动执行相同的查询，我会更新一行...

**编辑 3**：我启用了 npgsql 调试日志。当 xmin 没有改变时，我有以下（**更新 1**）：

```
7/2/2012 12:00:38 PM    12380   Debug   Entering NpgsqlState.ProcessBackendResponses()
7/2/2012 12:00:38 PM    12380   Debug   Entering PGUtil.ReadString()
7/2/2012 12:00:38 PM    12380   Debug   Get NpgsqlEventLog.LogLevel
7/2/2012 12:00:38 PM    12380   Debug   String read: UPDATE 1. 
```

当它发生变化时，我有以下内容（**UPDATE 0**）：

```
7/2/2012 1:50:06 PM 12700   Debug   Entering NpgsqlState.ProcessBackendResponses()
7/2/2012 1:50:06 PM 12700   Debug   Entering PGUtil.ReadString()
7/2/2012 1:50:06 PM 12700   Debug   Get NpgsqlEventLog.LogLevel
7/2/2012 1:50:06 PM 12700   Debug   String read: UPDATE 0. 
```

但不幸的是，在这两种情况下我都有一个 OptimisticConcurrencyException ......

**编辑 4**：查看 npgsql 日志后，似乎实体框架在内部使用 DbCommand.ExecuteReader(CommandBehavior.SequentialAccess) 后跟 reader.Read() 来确定 UPDATE 语句影响了多少行。

我可能错了，但提供者在 ForwardsOnlyDataReader.Read() 期间返回 false，这可能是问题的根源。

**编辑 5**：这绝对是提供商问题（版本 2.0.11.93 和即将发布的版本 2.0.11.94）。

对于 INSERT 语句，提供程序仅在基础数据类型为 SERIAL (int) 或 BIGSERIAL (bigint) 时支持计算列。

对于 UPDATE 语句，提供程序不处理给定 DbUpdateCommandTree 的 Returning 属性。这意味着不会返回任何计算列。您必须在调用 SaveChanges() 后手动刷新实体对象。到目前为止，不支持乐观并发。

我将尝试在提供程序中实施最低限度的支持并随时通知您。

**编辑 6**： Returning 属性现在在我自己的提供程序版本中处理。我很乐意分享我的代码。不要犹豫，问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T18:01:12.960

`xmin`不太可能很快消失，并且可以用于实现一种简单形式的乐观并发控制更新。请注意，它在内部是一个*无符号*的32 位数字，因此不要尝试将其存储在有符号的 32 位字段中，否则它可能会工作一段时间然后坏掉。

只要您将其映射到适当的数据类型，预先阅读，将其包含在`WHERE`您的子句中`UPDATE`并在“未找到”条件下采取适当的措施，这非常简单。

# android - ViewPager 可以在自定义对话框中使用吗？

> ID：11257830
> 
> 赞同：2
> 
> 时间：2012-06-29T07:33:12.170
> 
> 标签：android, dialog, nullpointerexception, android-viewpager

我正在尝试在自定义对话框中使用 ViewPager ...可以使用吗？我在自定义对话框 xml 中使用 v4 支持库“android.support.v4.view.ViewPager”。

当我运行应用程序时，ViewPager 对象会抛出一个空指针异常。

请帮忙

我的自定义对话框 xml 文件如下：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:minWidth="300dp"
    android:minHeight="400dp"
    android:orientation="vertical" >

    <android.support.v4.view.ViewPager
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:id="@+id/myfivepanelpager"
        android:tag="test"/>
</LinearLayout> 
```

我在 viewpager 中添加了 5 个页面，我使用 PagerAdapter 添加了这些页面......

以下代码存在于主要活动 onCreate() 方法中：

```
Dialog d = new Dialog(this);
Window window = d.getWindow();
window.setFlags(WindowManager.LayoutParams.FLAG_BLUR_BEHIND, WindowManager.LayoutParams.FLAG_BLUR_BEHIND);
d.setTitle("Dialog");
d.setContentView(R.layout.dialog);

final MyPagerAdapter adapter = new MyPagerAdapter();
final ViewPager myPager = (ViewPager) findViewById(R.id.myfivepanelpager);
myPager.setAdapter(adapter);
myPager.setCurrentItem(2); 
```

在这里，我的寻呼机返回 null ......当我运行代码时，它显示 nullpointerexception

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T07:52:16.363

如果您有您的 ViewPager `R.layout.dialog`，那么您必须在初始化时提供您的视图对象的引用。像这样更改您的代码，

```
final ViewPager myPager = (ViewPager)d. findViewById(R.id.myfivepanelpager); 
```

像我在这里所做的那样添加对话框“d”的对象并检查。

# ssas - 分析服务自定义身份验证

> ID：11257833
> 
> 赞同：3
> 
> 时间：2012-06-29T07:33:29.190
> 
> 标签：ssas, olap-cube, custom-authentication

我为一家公司制作了一个 Web 应用程序，该应用程序允许用户输入他们公司已支付的所有发票。该公司在所有城市都有部门，用户只能看到与他们所在城市相关的数据。现在我设计了一个 OLAP 多维数据集，提供给他们分析数据。用户在应用程序上打开一个 Excel 数据透视表并连接到 SSAS，但他们可以访问整个数据。

我的问题是我如何才能通过 SSAS 仅显示与他们的城市相关的数据？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T18:10:45.413

Analysis Services 仅使用基于角色的安全性的 Windows 身份验证： . 有多种方法可以为分配给角色的 Windows 帐户配置按维度保护的安全性。请参阅此资源（它适用于 SSAS 2005 及更高版本）：

[http://www.ssas-info.com/analysis-services-articles/51-security/3351-how-to-setup-basic-dimension-security-in-ssas](http://www.ssas-info.com/analysis-services-articles/51-security/3351-how-to-setup-basic-dimension-security-in-ssas)

并查看更高级但更灵活的安全性： [http ://sqlbits.com/Sessions/Event10/Advanced_Security_with_Analysis_Services_Multidimensional](http://sqlbits.com/Sessions/Event10/Advanced_Security_with_Analysis_Services_Multidimensional)

# octave - 以八度编译 vlfeat mex：未定义符号

> ID：11257836
> 
> 赞同：2
> 
> 时间：2012-06-29T07:33:46.867
> 
> 标签：octave, mex, vlfeat

我希望这个问题不是很具体。我正在尝试为 octave 3.6.2 编译[vlfeat](http://www.vlfeat.org/)库。

它编译 mex 文件而没有错误。但是如果我执行

```
vl_setup
vl_demo 
```

我明白了

```
error: vl_demo_sift_basic: vl_sift.mex: failed to load: vl_sift.mex: undefined symbol: vl_sift_process_next_octave 
```

如果我改用 octave 3.4.3，则 mex 文件加载时不会出错。（但后来由于 matlab 函数在这个版本的 octave 中还没有实现，所以会出现其他错误。）

我不知道如何开始调查这个问题。出现此类错误消息的原因可能是什么？或者我能做些什么来进一步调查这个问题？

**更新：** 我做了更多的研究。但是我对链接和编译的过程不是很熟悉。

使用`ldd`我可以看到 vlfeat 共享库没有出现在列表中。使用`nm`符号显示为“U”表示未定义。但我认为图书馆应该链接。问题出在所有 mex 文件上。这是如何编译文件的一个示例。据我所见，该库已链接到 mex 文件。

```
CFLAGS="-std=c99 -Wall -Wextra -Wno-unused-function -Wno-long-long -Wno-variadic-macros    -DNDEBUG -O3  -I./toolbox" \
CXXFLAGS="" \
LDFLAGS=" -Wl,--rpath,\$ORIGIN/ -Wl,--as-needed -lpthread -lm -Lbin/glnxa64 -lvl" \
 mkoctfile \
       --mex  \
       "./toolbox/misc/vl_version.c" --output "toolbox/mex/octave/vl_version.mex" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T03:16:39.973

我遇到了同样的问题。以下作品：

1.  通过“nm libvl.so | grep vl_sift_process_next_octave”确保 vlfeat 动态库 - libvl.so 中缺少符号“vl_sift_process_next_octave 存在”。如果不是这样，你应该重建 vlfeat。

2.  如果是这样，请检查烦人的 mex 文件 vl_sift.mex 是否通过“readelf -d vl_sift.mex”正确引用了 libvl.so。动态部分中出现 libvl.so 条目或重建 mex 文件，通过“mkoctfile --mex -lvl ...”明确指定缺少so。

3.  现在还剩下最后一步。“libvl.so”应该对八度音程可见。使用ldconfig将libvl.so添加到so缓存中，通过“ldconfig -p | grep libvl.so”测试缓存中是否存在。就这些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T21:33:54.643

我也有同样的问题，使用 Octave 3.6.2 和 vlfeat 0.9.16。检查 octave.mak 并注意到 OCTAVE_MEX_FLAGS 为空，并且从未使用过 OCTAVE_MEX_LDFLAGS。因此，在 octave-mex-all 部分，我尝试使用 OCTAVE_MEX_LDFLAGS 更改 OCTAVE_MEX_FLAGS 。也就是说，我使用了：

```
 $(MKOCTFILE) \
       --mex $(OCTAVE_MEX_LDFLAGS) \
       "$(<)" --output "$(@)"
@rm -f $(<:.c=.o) 
```

然后我用 make all 重建，现在一切正常。但我没有试图进一步调查为什么会这样。

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-28T19:56:05.817

万一将来有人碰到这个线程，这个问题在 Octave 4.0.0 中仍然存在。按照此处的建议在编译库之前更改 make/octave.mak 解决了我的问题：[https](https://github.com/vlfeat/vlfeat/issues/18) ://github.com/vlfeat/vlfeat/issues/18 。应该设置 OCTAVE_MEX_LDFLAGS 而不是 OCTAVE_MEX_FLAGS。

```
# Linux on 32 bit processor
ifeq ($(ARCH),glnx86)
OCTAVE_MEX_LDFLAGS += -Wl,--rpath,\\\$$ORIGIN/
endif

# Linux on 64 bit processorm
ifeq ($(ARCH),glnxa64)
OCTAVE_MEX_LDFLAGS += -Wl,--rpath,\\\$$ORIGIN/
endif 
```

# python - python urllib2 在 6 次 GET 后卡住 5 秒，在每次 POST 后卡住 2 秒

> ID：11257843
> 
> 赞同：0
> 
> 时间：2012-06-29T07:34:09.450
> 
> 标签：python, performance, urllib2, pycurl

我有以下代码：

```
def whatever(url, data=None):   
    req = urllib2.Request(url)
    res = urllib2.urlopen(req, data)
    html = res.read()
    res.close() 
```

我尝试将它用于 GET ，如下所示：

```
for i in range(1,20):
    whatever(someurl) 
```

然后，在前 6 次行为正确后，它会阻塞 5 秒，并继续正常工作以进行其余 GET：

```
2012-06-29 15:20:22,487: Clear [127.0.0.1:49967]:   
2012-06-29 15:20:22,507: Clear [127.0.0.1:49967]:   
2012-06-29 15:20:22,528: Clear [127.0.0.1:49967]:   
2012-06-29 15:20:22,552: Clear [127.0.0.1:49967]:   
2012-06-29 15:20:22,569: Clear [127.0.0.1:49967]:   
2012-06-29 15:20:22,592: Clear [127.0.0.1:49967]:   
**2012-06-29 15:20:26,486: Clear [127.0.0.1:49967]:**   
2012-06-29 15:20:26,515: Clear [127.0.0.1:49967]:   
2012-06-29 15:20:26,555: Clear [127.0.0.1:49967]:   
2012-06-29 15:20:26,586: Clear [127.0.0.1:49967]:   
2012-06-29 15:20:26,608: Clear [127.0.0.1:49967]:   
2012-06-29 15:20:26,638: Clear [127.0.0.1:49967]:   
2012-06-29 15:20:26,655: Clear [127.0.0.1:49967]:   
2012-06-29 15:20:26,680: Clear [127.0.0.1:49967]:   
2012-06-29 15:20:26,700: Clear [127.0.0.1:49967]:   
2012-06-29 15:20:26,717: Clear [127.0.0.1:49967]:   
2012-06-29 15:20:26,753: Clear [127.0.0.1:49967]:   
2012-06-29 15:20:26,770: Clear [127.0.0.1:49967]:   
2012-06-29 15:20:26,789: Clear [127.0.0.1:49967]:   
2012-06-29 15:20:26,809: Clear [127.0.0.1:49967]:   
2012-06-29 15:20:26,828: Clear [127.0.0.1:49967]: 
```

如果使用`POST(with data={'a':'b'})`，则每个请求都会卡住 2 秒。我试过了`urllib2`，`pycurl`他们都给出了相同的结果。

有人对这种奇怪的行为有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:34:41.567

另一种提高性能的方法是使用线程：

```
import threading, urllib2
import Queue

def read_url(url, queue):
    data = urllib2.urlopen(url).read()
    print('Fetched %s from %s' % (len(data), url))
    queue.put(data)

def fetch_parallel():
    result = Queue.Queue()
    threads = [threading.Thread(target=read_url, args = (url,result)) for url in urls_to_load]
    for t in threads:
        t.start()
    for t in threads:
        t.join()
    return result

def fetch_sequencial():
    result = Queue.Queue()
    for i in xrange(1, 20):
        read_url("http://www.stackoverflow.com", result)
    return result 
```

给我 [在 0.2 秒内完成]。

**PS**如果您不需要列表，请使用`xrange`而不是`range`. [解释](https://stackoverflow.com/questions/135041/should-you-always-favor-xrange-over-range)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T07:56:39.620

问题出在 DNS 解析器中。

这是一个[很好的解释](https://bugs.launchpad.net/ubuntu/+source/eglibc/+bug/417757/comments/7)

您可以使用这样的工具[，](http://www.thekelleys.org.uk/dnsmasq/doc.html)因为我认为任何其他 DNS 解析器都可以解决问题。

# ios - 通过不同视图的按钮更新标签

> ID：11257848
> 
> 赞同：1
> 
> 时间：2012-06-29T07:34:29.427
> 
> 标签：ios, sdk, uibutton, uilabel, ios4

当它们都在不同类别的uiview控制器中时，如何通过按钮单击更新标签...单击按钮时，标签应该更新...我尝试了很多次..但它没有发生..

另一个问题是我的应用程序在模拟器中运行良好，但是当我在设备上运行时，动态创建的按钮（按钮图像）不可见，动作正在执行但图像丢失..我知道为什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T08:46:07.660

有几种方法可以在 iOS 中维护视图（实际上是视图控制器）之间的通信。对我来说最简单的是发送通知。您在要进行更改的视图中为通知添加观察者，然后从将触发更改的视图中发布通知。这样你就可以从 ViewController B 告诉 ViewController A *“东西准备好了，做出改变”*

当然，这需要创建您的接收器视图并且已经在监听通知。

在 ViewController B 中（发送者）

```
- (void)yourButtonAction:(id)sender
{
    [[NSNotificationCenter defaultCenter] postNotificationName:@"theChange" object:nil];
} 
```

在 ViewController A (receiver) 中添加观察者来监听通知：

```
- (void)viewDidLoad
{
    //.........
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(makeTheChange) name:@"theChange" object:nil];
} 
```

不要忘记删除它（在这种情况下，打开`dealloc`）

```
- (void)dealloc
{
     [[NSNotificationCenter defaultCenter] removeObserver:self name:@"theChange" object:nil];
     [super dealloc];
} 
```

最后，更新标签的方法

```
- (void)makeTheChange
{
    yourLabel.text = @"your new text";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T07:51:33.730

不确定这是否是一个好的解决方案，但是您可以在单击按钮时将文本存储在全局 NSString 中，然后在加载第二个视图时将该字符串放入您的标签中。

# clojure - 包含 google 依赖项的 clojurescript 错误

> ID：11257849
> 
> 赞同：3
> 
> 时间：2012-06-29T07:34:31.757
> 
> 标签：clojure, clojurescript

我有 cljs 页面，我需要一个 google 闭包依赖项 -

```
(ns pm.client.models
  (:require  [google.pubsub.PubSub :as pubsub])) 
```

这是我在加载 html 页面时看到的错误。错误记录在浏览器的 js 控制台中 -

```
goog.require could not find: goog.storage.mechanism.HTML5LocalStorage
goog.requireclient.js:96
(anonymous function)client.js:20191
client.js:98Uncaught Error: goog.require could not find: goog.storage.mechanism.HTML5LocalStorage
goog.requireclient.js:98
(anonymous function) 
```

我没有看到使用 cljs-build 编译 clojurescript 的任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-11T20:00:44.053

看起来您没有包含 HTML5LocalStorage 库的 Google Closure jar。

这可能是由于第三方 jar 路径的某些问题（不太可能，因为它是您的项目需要它）或因为路径（或名称）在版本中已更改。确保您没有引用来自开发版本的路径，而是实际使用最终版本。解压 jar 并用 grep 查看 HTML5LocalStorage 是否/在哪里。

# asp.net - 特殊字符在 Internet Explorer 上变成 � 符号

> ID：11257850
> 
> 赞同：0
> 
> 时间：2012-06-29T07:34:36.013
> 
> 标签：asp.net, internet-explorer, url, encoding, query-string

在一个 asp.net 项目中，我遇到了编码问题。除了 1 之外，所有页面都运行正常。当我尝试获取查询字符串参数时，一些特殊字符变成了符号。

我通过此处描述的[url 编码在 Firefox 和 Internet Explorer 中表现不同](https://stackoverflow.com/questions/8323009/url-encode-behaving-differently-in-firefox-and-internet-explorer)以及此处[http://blog.salientdigital.com/2009/06/06/special-characters-showing-up-as-a-question-mark-进行了所有操作黑色钻石内部/](http://blog.salientdigital.com/2009/06/06/special-characters-showing-up-as-a-question-mark-inside-of-a-black-diamond/)但它们不起作用。

为什么只有 1 个页面运行不正确，而其他页面运行没有任何问题？除 IE 之外的所有浏览器都运行完美，奇怪的是 IE 仅在 1 个 aspx 页面中引发错误。

# vba - 为什么我的 Html 到 Excel 转换在循环文件时使用 VBA 会随着时间的推移变慢？

> ID：11257852
> 
> 赞同：0
> 
> 时间：2012-06-29T07:35:07.550
> 
> 标签：vba, excel, excel-2007, file-conversion

我需要不时将html文件转换为excel。大约有 9000 个包含表格的 html 文件。

我发现使用 excel 2007 vba 转换它们很有用，并制作了一个宏来完成这项工作，我已经考虑到 excel 的一个错误，它会在 Workbooks 上停止宏。按下 SHIFT 键时打开功能，除此之外我禁用了警报、事件和屏幕更新，并使应用程序不可见，因为我不想在我做其他事情时打扰我。

```
'Declare API
Declare Function GetKeyState Lib "User32" _
(ByVal vKey As Integer) As Integer
Const SHIFT_KEY = 16

Function ShiftPressed() As Boolean
'Returns True if shift key is pressed
    ShiftPressed = GetKeyState(SHIFT_KEY) < 0
End Function

Sub ConvertHtmlToExcel()
    Dim wb As Workbook
    Dim strFile As String
    Dim strPath As String

    With Application
        .EnableEvents = False
        .DisplayAlerts = False
        .ScreenUpdating = False
        .Visible = False
    End With

    strPath = "c:\FolderToConvert\"
    strFile = Dir(strPath & "*.html")

    Do While strFile <> ""
        Do While ShiftPressed()
            DoEvents
        Loop
        Set wb = Workbooks.Open(strPath & strFile)
        strFile = Mid(strFile, 1, Len(strFile) - 5) & ".xls"
        wb.SaveAs strPath & strFile, XlFileFormat.xlWorkbookNormal
        wb.Close
        Set wb = Nothing
        strFile = Dir
    Loop

    With Application
        .EnableEvents = True
        .DisplayAlerts = True
        .ScreenUpdating = True
        .Visible = True
    End With
End Sub 
```

宏似乎很好，但是在运行时，我每分钟的转换率如下：

1.  40
2.  31
3.  25
4.  21
5.  19
6.  18

并且在 500 个文件转换后它现在一直在下降，其当前的速率是每分钟 8 个。

在 2359 个文件之后，速率降低到每分钟 2 个，在测试时我有 visible = true 并且看到打开工作簿需要更多时间。

所以问题似乎出在 Workbooks.Open 上，它在循环开始时尽可能快地工作，但在进一步的循环中它开始变慢。

有没有人偶然发现这个？有什么解决方法吗？我的代码缺少什么吗？有时宏仍然会停止执行，我假设该函数没有捕获 shift 键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:23:23.947

在 Excel 中没有覆盖“shift bypass”功能的标准方法（与 Access 中的“AllowByPassKey”属性相反）。如果您应用的代码有问题（我没有尝试过），您是否考虑过创建一个插件？

[http://msdn.microsoft.com/nl-nl/library/aa671739(v=vs.71).aspx](http://msdn.microsoft.com/nl-nl/library/aa671739(v=vs.71).aspx) 在微软网站上明确提到：

将 Excel 加载项与典型工作簿文件区分开来的几个特征：

*   用户不能使用 SHIFT 键绕过加载项中内置的事件。此功能可确保您在加载项中编写的任何事件过程都将在适当的时间运行。

关于速度：您似乎正确地为循环中的“工作簿”对象分配（.open）和释放（设置为空）内存，因此它在 RAM 中占用的内存在处理过程中不应增加或减慢。

这个有趣的线程可以提供一个解释：

[http://www.add-ins.com/support/out-of-memory-or-not-enough-resource-problem-with-microsoft-excel.htm](http://www.add-ins.com/support/out-of-memory-or-not-enough-resource-problem-with-microsoft-excel.htm)

“我们从上述测试中得出的结论是，VBA 加载项不会使用大量内存。工作簿是内存的主要用户。而 Excel 在关闭工作簿时不会释放所有内存。它支持一种关闭方法并在完成大量工作后重新启动 Excel。您应至少每两个小时关闭并重新打开 Excel 一次。

也许值得尝试每次设置一个新的应用程序并使用 application.quit，它会从内存中清除整个 Excel 应用程序。

```
 Dim appExcel As Excel.Application

 Set appExcel = CreateObject("Excel.Application")
 appExcel.Workbooks.Add
 'Do smtg
 appExcel.Quit 
```

希望这对你有用！有趣的问题！

# c# - SVN 错误：“svnadmin：E205000：参数太多”

> ID：11257853
> 
> 赞同：1
> 
> 时间：2012-06-29T07:35:09.393
> 
> 标签：c#, svn, process, svndump

我正在尝试使用 C# 代码备份我的存储库

```
 Process svnCommand = null;
        var psi = new ProcessStartInfo("svnadmin");
        psi.RedirectStandardOutput = true;
        psi.RedirectStandardError = true;
        psi.UseShellExecute = false;
        psi.Arguments= @"dump C:\Repositories\Myrepo > C:\temp\myrepodumpfile.dump";

        using (svnCommand = Process.Start(psi))
        {     
            var myoutput = svnCommand.StandardOutput;

            var myerror = svnCommand.StandardError;

            Debug.Write("Output :" + Environment.NewLine +
                Environment.NewLine + myoutput.ReadToEnd() +
                Environment.NewLine + "Error :" +
                Environment.NewLine + Environment.NewLine +
                myerror.ReadToEnd());

            svnCommand.Close();
        } 
```

当我从命令行使用转储命令时

`svnadmin dump C:\Repositories\Myrepo > C:\temp\myrepodumpfile.dump`

它工作正常，但是当我尝试通过上面给出的 C# 代码使用它时，它会给出错误

`svnadmin: E205000: Try 'svnadmin help' for more info`
`svnadmin: E205000: Too many arguments`

我的 SVN 信息：

SVN 版本 1.7.5 环境变量 aslo 设置（我可以直接从 cmd 使用 sv）

似乎无法弄清楚是什么问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T07:37:33.567

`>`是命令行的一个特性；从 C# 启动进程时不能使用它。

它的作用是`>`将进程写入 StandardOutput 的输出并将其写入文件。这也是你需要在你的程序中实现的，例如

```
var psi = new ProcessStartInfo("svnadmin");
psi.RedirectStandardOutput = true;
psi.RedirectStandardError = true;
psi.UseShellExecute = false;
psi.Arguments= @"dump C:\Repositories\Myrepo";

using (var svnCommand = Process.Start(psi))
{     
    var myoutput = svnCommand.StandardOutput;

    File.WriteAllText(@"C:\temp\myrepodumpfile.dump", myoutput.ReadToEnd());

    svnCommand.WaitForExit();
} 
```

# jquery - 获取 JSON 响应的总数

> ID：11257855
> 
> 赞同：1
> 
> 时间：2012-06-29T07:35:25.873
> 
> 标签：jquery, json

这可以在我开始循环之前在 jQuery 中快速完成吗？或者我是否还需要在数据响应中设置一个单独的组，其中总计数可以说..第一个变量？

常见的响应如下所示：

```
 [
   {"name":"Tu\u011Frul","surname":"Topuz","message":"Hello World"}
   ,{"name":"Tu\u011Frul","surname":"Topuz","message":"Hello World"}
 ] 
```

`2`但是我会使用 jQuery作为总数返回（在我遍历它们之前？）或者我需要做这样的事情吗？

```
 [
   {"total":"2"}
   ,{"name":"Tu\u011Frul","surname":"Topuz","message":"Hello World"}
   ,{"name":"Tu\u011Frul","surname":"Topuz","message":"Hello World"}
 ] 
```

这样做的最有效/常见（优化）方式是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T07:44:25.740

在 json 解码之后，您将获得一组对象（来自您发布的内容）。您始终可以访问该[`length`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/length)属性以获取总数。

当你得到这个数组时，我假设你已经能够将 json 响应解析为一个 JS 对象。您可以使用`dataType: 'json'`告诉 jQuery 为您自动执行此操作，或者您可以自己使用解析，[`jQuery.parseJSON()`](http://api.jquery.com/jQuery.parseJSON/)但如果您将标头设置`dataType:'json'`或设置为来自服务器，则这是必要的。`content-Type``application/json`

所以你可以做这样的事情

```
$.ajax({
      ....
      dataType: 'json',
      success(function(data){
         if(data){
          var total = data.length; 
         }
      }
 }); 
```

所以你不需要`total count`从服务器发回。您可以在获得响应后使用 JS 来获得它，这将使您更容易使用[`$.each`](http://api.jquery.com/jQuery.each/)整个数组包含相同类型的对象（没有任何特殊`{"total":"2"}`成员）来遍历该响应。

**注意：**该`length`属性是纯香草JS，它与`jQuery`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T07:43:09.833

在 javascript 中，您不操作 JSON（这是一种数据交换标准），而是操作 javascript 对象。

您通常使用

```
var data = JSON.parse(mystring) 
```

或者仅仅因为您`data`是 jquery ajax 调用的成功函数的参数：

```
 $.ajax(
      ....
      dataType:'json',
      success(function(data){
      }) 
```

解析后，您拥有的是一个 javascript 对象。

在您的情况下，它是一个数组，因此您可以进行标准操作：

```
var length = data.length;
var secondObject = data[1];
var firstObjectName = data[0].name;
///etc. 
```

# python - 我如何在python中使用json输出

> ID：11257860
> 
> 赞同：0
> 
> 时间：2012-06-29T07:35:45.040
> 
> 标签：python, json

我想弄清楚如何`json`在`python`. 这是网址：

[http://maps.googleapis.com/maps/api/distancematrix/json?origins=Vancouver+BC|Seattle&destinations=San+Francisco|Victoria+BC&mode=bicycling&language=fr-FR&sensor=false](http://maps.googleapis.com/maps/api/distancematrix/json?origins=Vancouver+BC|Seattle&destinations=San+Francisco|Victoria+BC&mode=bicycling&language=fr-FR&sensor=false)

谁的输出是这样的

```
{
  "status": "OK",
  "origin_addresses": [ "Vancouver, BC, Canada", "Seattle, État de Washington, États-Unis" ],
  "destination_addresses": [ "San Francisco, Californie, États-Unis", "Victoria, BC, Canada" ],
  "rows": [ {
    "elements": [ {
      "status": "OK",
      "duration": {
        "value": 340110,
        "text": "3 jours 22 heures"
      },
      "distance": {
        "value": 1734542,
        "text": "1 735 km"
      }
    }, {
      "status": "OK",
      "duration": {
        "value": 24487,
        "text": "6 heures 48 minutes"
      },
      "distance": {
        "value": 129324,
        "text": "129 km"
      }
    } ]
  }, {
    "elements": [ {
      "status": "OK",
      "duration": {
        "value": 288834,
        "text": "3 jours 8 heures"
      },
      "distance": {
        "value": 1489604,
        "text": "1 490 km"
      }
    }, {
      "status": "OK",
      "duration": {
        "value": 14388,
        "text": "4 heures 0 minutes"
      },
      "distance": {
        "value": 135822,
        "text": "136 km"
      }
    } ]
  } ]
} 
```

如何在 python 中打印此输出？
谁能帮我吗 ？
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T07:49:15.307

根据您的 Python 版本，导入 JSON 可能还不够。

如果您运行的 python 版本低于 2.6，则需要从命令行安装 simplejson。

> 点安装simplejson

之后，只需正常导入即可。

```
import simplejson as json 
```

以下应该在 Python 2.x 中工作。3.x 中存在一些差异，我将把它留作您的想象练习。

```
try:
    import json
except:
    import simplejson as json
url = "http://maps.googleapis.com/maps/api/distancematrix/json?origins=Vancouver+BC|Seattle&destinations=San+Francisco|Victoria+BC&mode=bicycling&language=fr-FR&sensor=false"
contents = urllib2.urlopen(url).read()
json_array = json.loads(contents)
print repr(json_array) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T07:39:28.167

```
>>> import json
>>> json.loads('["foo", {"bar":["baz", null, 1.0, 2]}]') 
```

[http://docs.python.org/library/json.html](http://docs.python.org/library/json.html)

# asp.net - 如果文件扩展名与我的条件不匹配，如何中断文件上传操作？

> ID：11257862
> 
> 赞同：0
> 
> 时间：2012-06-29T07:36:02.067
> 
> 标签：asp.net, jquery

我用 Web Handler 编写了一个上传文件的 jquery 代码。它工作正常，但我想检查文件的扩展名是否与我的条件不匹配，而不是它不允许上传文件..

这是我的代码

```
$(document).ready(function () {

            var button = $('#fuAttachment'), interval;
            $.ajax_upload(button, {
                action: 'FileUploader.ashx',
                name: 'myfile',
                onSubmit: function (file, ext) {
                    if (ext == "js") {
                        alert(ext);
                    }
                    //  this.disable();
                },
                onComplete: function (file, response) {
                    window.clearInterval(interval);
                    $('<li></li>').appendTo('.files').text(file);
                }
            });
            }); 
```

我得到了`ext`变量的扩展名。我也可以检查它，但如果文件包含该扩展名而不是想要中断上传操作。
我怎样才能做到这一点？？如果有人知道，请帮助我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T07:46:02.340

如果某些条件不满足，您可以`false`从函数返回以阻止文件上传：`onSubmit`

```
onSubmit: function (file, ext) {
    if (ext == "js") {
        // the extension of the selected file was .js => allow upload
        return true;
    }

    // the extension is not .js => don't do the upload
    return false;
} 
```

# html - 网页缩小时如何隐藏部分帖子标题？

> ID：11257864
> 
> 赞同：0
> 
> 时间：2012-06-29T07:36:11.077
> 
> 标签：html, css

我有一个帖子列表。

我想打印一些带有帖子标题的帖子内容

就像 GMAIL （旧设计）

```
$TopicTitle='social networks';
$SmallDescription='The ability to easily bookmark or share content on popular social media platforms';
echo '<p class="title">'.$TopicTitle.'</p>'.' - <span class="desc">'.$SmallDescription.'</span>';
//this will prints
//social networks - The ability to easily bookmark or share content on popular social media platforms 
```

它工作正常..

但...

如果用户有小显示器或将页面大小调整为小

该页面将不足以容纳大标题，因此它将有一个新的like

像这样

```
//social networks - The ability to easily bookmark or share content 
//on popular social media platforms 
```

会有新的线路！

所以，我想做一些专业的东西，比如 Gmail

当你缩小页面时，标题也在缩小，我不是指标题的大小，我是指标题本身，会变成这样

```
//social networks - The ability to easily bookmark or share content 
```

一些标题已被删除，我不知道他们是如何做到的，java 或 html！

我想做这个技巧来保存我设计的butey

如果你不理解我

请看这张照片

![在此处输入图像描述](../Images/d898ec11f7b72a8f41db9bae4daa9545.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:06:15.230

我不知道谷歌这样做的确切方式，但有很多可能的解决方案。这是我想到的一个：

首先，将标题的高度限制为与您的相同`line-height`并指定`overflow: hidden;`它们。然后可以选择用 . 替换您不想截断的空格`&nbsp;`。这样，当容器调整大小时，标题将换行到另一行不显示。

请参阅[this fiddle](http://jsfiddle.net/c2jwT/)进行演示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T08:16:24.877

看看[**jQuery ThreeDots 插件**](http://tpgblog.com/2009/12/21/threedots-the-jquery-ellipsis-plugin/)。

当它太长时，这会将**省略号放在文本行的末尾。**

省略号 =`...`

**例子：** `This virtual long text-line is really long with many charact...`

这是插件的[**演示页面**](http://theproductguy.com/threedots/threedots.demo.html)，其中包含许多实时示例！

# java - 默认 JBoss 7 连接池超时

> ID：11257869
> 
> 赞同：1
> 
> 时间：2012-06-29T07:36:19.003
> 
> 标签：java, jboss, datasource, connection-pooling

有谁知道使用连接池时 JBoss 7 中的默认连接超时是多少？

我的数据源是这样定义的

```
<?xml version = '1.0' encoding = 'UTF-8'?>
<datasources>
   <xa-datasource jndi-name="java:/xxxxx" pool-name="xxxxx"
                  enabled="true" use-java-context="false">
      <xa-datasource-class>oracle.jdbc.xa.client.OracleXADataSource</xa-datasource-class>
      <xa-datasource-property name="URL">
         jdbc:oracle:thin:@xxxxxxxxx:1521:xxxxxxxx
      </xa-datasource-property>
      <driver>oracle.jdbc.OracleDriver</driver>
      <new-connection-sql>select 1 from dual</new-connection-sql>
      <transaction-isolation>TRANSACTION_READ_COMMITTED</transaction-isolation>
      <xa-pool>
         <min-pool-size>1</min-pool-size>
         <max-pool-size>50</max-pool-size>
         <is-same-rm-override>false</is-same-rm-override>
         <interleaving>false</interleaving>
         <pad-xid>false</pad-xid>
         <wrap-xa-resource>false</wrap-xa-resource>
      </xa-pool>
      <security>
         <user-name>
            xxxxxxxx
         </user-name>
         <password>xxxxxxx</password>
      </security>
      <validation>
         <validate-on-match>true</validate-on-match>
         <background-validation>false</background-validation>
      </validation>
      <statement>
         <share-prepared-statements>false</share-prepared-statements>
      </statement>
   </xa-datasource>
</datasources> 
```

PS：我查询我的数据库并查看来自我的 JBoss 的连接，但无法弄清楚它如何创建新连接或何时使用池中的现有连接。大多数情况下，当 JBoss 服务器未被任何应用程序使用时，我有几个状态为 INACTIVE 的连接。

# javascript - 使用 MooTools 的 Jsonp 请求

> ID：11257872
> 
> 赞同：2
> 
> 时间：2012-06-29T07:36:30.943
> 
> 标签：javascript, json, mootools, jsonp

我正在学习 javascript，现在我正在使用一些 json 文件和 mootools。问题是我想在其他域上使用 json，所以我正在尝试使用 Jsonp。我正在尝试编写一些代码行，但我无法真正理解我在做什么，因为我不是一个真正的程序员（通常我在 C# 中编写几行代码，而不使用 json、xml 或任何类型的数据）。

那是我的代码：

```
function getSearchValue()
{
var searchvalue = getElementById('campo').value;
var firstparturl = "http://m.airpim.com/json/public/search?";
var lastparturl = "&k=&e=1";
var finalurl = firstparturl + searchvalue + lastparturl;
return finalurl;
}

var myRequest = new Request.JSONP
(
{url: getSearchValue(),
 onComplete: function(data) 
    {

        // Here I should save the json data in one array

    }
}).send(); 
```

我收到的数据是一个 json 对象？如果是，我怎样才能将它保存到一个数组中......我的意思是解析的 mootools 语法是什么？

# silverlight - 不使用调度程序时的奇怪行为

> ID：11257873
> 
> 赞同：0
> 
> 时间：2012-06-29T07:36:33.883
> 
> 标签：silverlight, windows-phone-7, multithreading

我知道每当您尝试从不同的线程访问 UI 元素时，我们都必须使用调度程序，但是今天我遇到了一些我想问的问题。假设我有一个列表，其中填充了 Row 类（自定义类）的对象，并且每一行都填充了 Cell（自定义类）。每个 Cell 都有一个属性 CellWidth。我在 ViewModel 中填充了一个列表，然后将其传递给 View，在其中我从 List 中创建 ObservableCollection。Grid 的宽度与 UI 中的 CellWidth 绑定。因此，如果我不使用 Dispatcher（在 ViewModel 中）设置宽度，Grid 会忽略绑定，但是如果我使用它，一切都会正常工作。（注意：不使用调度程序时不会引发异常）

问题是：为什么会这样？我认为调度程序解决的唯一问题是线程......

```
 public MainPageViewModel()
{
    IDataTableModel  Table1 = new ObservableCollection<Row>();
            setCellWidth(Table1);
}

private void setCellWidth(IDataTableModel model)
{
    List<double> Widths = new List<double>();
    //initializing Widths with values
    <...>
      Deployment.Current.Dispatcher.BeginInvoke(() =>
    {
        foreach(var item in model.Rows)
       {
           for(int i = 0; i<item.Cells.Count; i++)
           {
                item[i].CellWidth = Widths[i];
           }
       }
    });
} 
```

# java - 以通用方式调用具有不同参数的方法

> ID：11257874
> 
> 赞同：0
> 
> 时间：2012-06-29T07:36:44.297
> 
> 标签：java

我正在尝试编写一个通用代码，以便我可以**在运行时**使用不同数量和类型的参数调用方法。我可以使用从文件中读取的类和不同的方法，以及要传递给该特定方法的参数。

所以，这是一个包含不同类型值的对象数组 -

**Object[] args = new Object[]{"aString", 1, true};**

/* 基于 Object java.lang.reflect.Method.invoke(Object obj, Object... args) ，我写了如下方法 */

//"executingMethod" 引用了要执行的方法，可以从 Class.forName("ClassName").getDeclaredMethods(); 并为特定的方法遍历它。

**执行Method.invoke(methodClassObject, args);** //显然它不会执行，因为在运行时它不知道（不能向下转换）参数“类型”。

我不想在 executionMethod.invoke(..) 中传递 args[0]、args[1]、args[2]，因为在某些情况下，参数的数量可能会有所不同。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-11T20:36:26.613

这是处理该问题的一种方法：

创建如下界面

```
import java.util.ArrayList;
public interface ExecutableInterface {
    void executable(String methodName);
    String getExecutableMethod();
    void setParameters(ArrayList parameters);
    ArrayList getParameters();
} 
```

现在，在您希望可调用的类中，使其实现这些方法并使用可执行文件传递可调用方法并使用 setParameter 传递参数。

在运行时，您获取这些值并调用返回 getExecutableMethod 的可执行方法。与参数相同的方式。

# css - 如何让 display:inline-block 内联？

> ID：11257875
> 
> 赞同：0
> 
> 时间：2012-06-29T07:36:44.337
> 
> 标签：css

```
<ul class="random-list">
   <li>
       <div class="random-container">
           <div class="inline-block" style="vertical-align: top;">
               <img src="" />
           </div>
           <div class="inline-block" style="vertical-align: top;">
               <a href="">Name</a>
           </div>
       </div>
   </li>
</ul> 
```

和CSS：

```
.random-container {
    margin-bottom: 10px;
    width: 100%;
}
.inline-block {
    display: inline-block;
} 
```

结果：

![错误](../Images/c486a4478c4d7e16a890649efdc93f7f.png)

如何修复此错误：

![使固定](../Images/6f54386464b8fb63f3b86cb3c5c77e77.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T07:40:04.993

不如你根本不使用`inline-block`，并摆脱所有那些不必要的 div。

```
<ul class="random-list">
   <li>
       <img src="" />
       <a href="">Name</a>
   </li>
</ul> 
```

**[现场示例](http://dabblet.com/gist/3016529)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T07:51:09.783

你的屏幕上有足够的空间吗？您的代码适用于我，因为它适用于这个[小提琴](http://jsfiddle.net/vLUhL/2/)：

也就是说：另一个+1是真理的答案。没有必要使用`div`你当前正在使用的这么多 s。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T07:41:48.260

给两个元素一个 float: left 将是一个更好的选择。检查这个[小提琴](http://jsfiddle.net/vLUhL/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T07:57:24.570

```
<ul class="random-list">
   <li>
       <img src=""/>
       <a href="">Name</a>
   </li>
</ul>

#random-list
{
   float:left;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-29T07:43:28.097

嘿，现在根据你的设计

你给**li**属性 `display:block;`

像这样

```
li{
display:block;
} 
```

或这个

```
.random-list li{
display:block;
} 
```

现场演示[http://jsfiddle.net/GrZLW/](http://jsfiddle.net/GrZLW/)

# mysql - 仅使用表名的一部分运行 SHOW TABLES

> ID：11257877
> 
> 赞同：0
> 
> 时间：2012-06-29T07:37:17.597
> 
> 标签：mysql

我想在我的数据库中选择表，但不是所有表。名称的一部分类似于“tt”的表。

示例：表格列表：( `users`, `tt_content`, `contact`, `tt_sub`)

我想只选择`tt_content`and `tt_sub`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T07:40:54.940

`show tables like 'tt%';`应该这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T07:41:20.230

我将假设您使用的是 MySQL，因为这是我所知道的唯一使用该`SHOW TABLES;`命令的 DBMS。

在这种情况下，我认为您正在寻找：

```
 SHOW TABLES LIKE 'tt%'; 
```

# objective-c - 如何配置 RestKit errorMapping 以接受更复杂的响应？

> ID：11257878
> 
> 赞同：2
> 
> 时间：2012-06-29T07:37:31.563
> 
> 标签：objective-c, ios, restkit

`errorMapping`定义为：

```
[[[[RKObjectManager sharedManager] mappingProvider] errorMapping] setRootKeyPath:@"error"]; 
```

它适用于简单的错误消息作为字符串：

```
render status: :unprocessable_entity, json: { :error => 'cannot create topic' } 
```

但是，哈希响应失败：

```
render status: :unprocessable_entity, json: { :error => @topic.errors } 
```

并给出：

> W restkit.object_mapping:RKObjectMappingOperation.m:239:-[RKObjectMappingOperation transformValue:atKeyPath:toType:] keyPath''处的值转换失败。没有从“JKDictionary”转换为“NSString”的策略

有没有办法将 RestKit 配置`errorMapping`为接受哈希响应（并希望存储在 中`NSDictionary`）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T07:41:54.657

我假设您使用的是默认错误映射？这会将错误键路径映射到 RKErrorMessage 类。这个类需要一个 NSString，但你有一个 NSDictionary（JKDictionary，因为你正在使用 JSONKit，但仍然......）。

如果您不想修改服务器代码，可以在 iPhone 上创建自己的错误类并替换此默认映射。例如，您可以查看 RKErrorMessage.m 以及创建默认映射的 [RKObjectManager init]。

# java - 如何使用动态 id 获取这些输入字段

> ID：11257879
> 
> 赞同：1
> 
> 时间：2012-06-29T07:37:33.480
> 
> 标签：java, selenium-ide, selenium-firefoxdriver

我有一个网页，其中很少有文本字段需要使用 Selenium WebDriver 填充一些值。但是我无法使用 selenium 框架中提供的 API 获取这些项目，因为 ID 是动态变化的。

例如，其中一个文本字段具有以下 ID

```
<input id="order_unit_line_rate_806099_unit_price" type="text" value="" uniqueattr="Dynamic Site Accelerator / Dynamic Site Accelerator / Platform Fee / / Price" size="10" onchange="javascript:numberFormatValid('order_unit_line_rate_806099_unit_price', parseI18nNumber($('order_unit_line_rate_806099_unit_price').value, ',', '.'), 5, '.');" name="order_unit_line_rate[806099][unit_price]"> 
```

其中作为 id 一部分的数字 806099 对于每个新页面和每个新文本框都会有所不同。使用 findElements(By.id()) API 我没有任何运气。

有人可以建议任何方法来识别这些元素。

我使用 eclipse 作为编辑器，java 作为客户端驱动程序，selenium webDriver 作为自动化框架。

谢谢基兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:21:09.733

您可以使用 findElementsByTagName 然后遍历每个返回的元素，检查其 ID 与您的正则表达式：

```
public static WebElement findElementByRegexId(FindsByTagName ctx, String tagName, String regex) {
    List<WebElement> l = ctx.findElementsByTagName(tagName);
    for (WebElement e : l) {
        if (e.getAttribute("id").matches(regex)) {
            return e;
        }
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:24:41.120

您可以使用以下解决方案，而不是使用正则表达式

```
//input[contains(@name, 'order_unit_line_rate')] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T09:06:59.467

selenium API 还允许您传递 XPath 定位器，因此您可以尝试类似

```
findElements(By.xpath("//input[@uniqueattr=\"Dynamic Site Accelerator / Dynamic Site Accelerator / Platform Fee / / Price\"]")); 
```

有关更多详细信息，请参见[此处](http://seleniumhq.org/docs/03_webdriver.html#by-xpath)。

# java - 无法使用java显示拉丁字符

> ID：11257883
> 
> 赞同：0
> 
> 时间：2012-06-29T07:37:44.453
> 
> 标签：java, utf-8

我正在使用以下代码行来读取数据 frm db

```
ob = new String(loadBlob.toByteArray());
ob = Util.decrypt(Constants.ENCRYPTION_KEY, ob);
ob = new String(Base64.decodeBase64(ob.getBytes("UTF-8")), "UTF-8"); 
```

但在显示拉丁字符时显示为一个框。即使在 db 中，也可以使用正确的字符。

# asp.net - 在哪里存储站点设置：数据库？XML？配置？类文件？

> ID：11257886
> 
> 赞同：2
> 
> 时间：2012-06-29T07:37:58.623
> 
> 标签：asp.net, sql-server, web-config

我正在重建一个每天都有大量访问的新闻门户。重建此站点时的主要问题之一是最大限度地提高性能和速度。

话虽如此，我们已经做了很多事情，从缓存到其他各种措施来确保速度。

现在在项目即将结束时，我在存储对性能影响最小的站点设置方面遇到了两难境地。

站点设置将包括以下内容：域、DefaultImgPath、Google Analytics 代码、编辑的默认电子邮件以及更多动态设计/显示功能设置，例如特定 DIV 的背景颜色和链接的默认颜色等。

据我所知，我有 4 种选择来存储所有这些信息。

**数据库**：在数据库中存储常规设置并缓存它们可能是一种解决方案，但是，我想限制对数据库的访问，仅用于项目的必要和基本功能，这些功能通常是插入/更新/删除新闻项目、作者文章等。 .

**XML**：我可以将这些设置存储在一个 XML 文件中，但我以前没有做过这种事情，所以我不知道我将来会遇到什么样的问题（如果有的话）。

**配置**：我也可以将这些设置存储在 web.config

**类文件**：我可以在 SiteSettings 类中对所有这些设置进行硬编码，但由于站点管理员自己将能够编辑这些设置，这可能不是最佳解决方案。

目前，我更接近于选择 web.config，但让人们经常摆弄它是我不想要的。例如，如果不知何故，我错过了对某事的验证，并且它破坏了 web.config，整个站点都会崩溃。

我的担心基本上是，我无法预见使用上述任何方法的任何可能后果（或者还有其他方法吗？），我希望将这个问题交给更有经验的人来帮助我做出决定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T07:42:31.707

尝试使用此代码（全局参数化变量）

```
<appSettings>
    <add key="YourKey1" value="Your value 1" />
    <add key="YourKey2" value="Your value 2" />
</appSettings>

And this code for getting ( Add reference to System.Configuration, API configuration )

var yourValue1 = ConfigurationSettings.AppSettings["YourKey1"];
var yourValue2 = ConfigurationSettings.AppSettings["YourKey2"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T09:03:17.250

在这种情况下，我会选择 Db Server + Cache 解决方案。

我认为的原因是使用数据库，您可以存储有关每个配置更改的元信息。例如，存储以下信息可能会很好：

*   谁做的改变
*   变化是什么（旧值，新值）
*   什么时候做的改变
*   更改是否“活跃”

当您或站点管理员或任何设法破坏配置的人时，这使得将站点恢复到以前的配置状态变得更加容易。只需在站点工作的某个已知时间后停用所有更改并刷新缓存。

只是为了澄清我的意思：我不会有一个配置名称是主键/唯一的数据库表。相反，我将有一个代理键，并在配置设置更改时附加行。缓存版本将始终保存每个配置键的最新活动值。因此，在更改设置时，请将其作为新记录发送到数据库并更新缓存。

关于其他选择：

我不允许站点管理员更改 web.config 文件。那只是自找麻烦。

使用 SiteSettings 类文件也不能很好地工作，至少不能使用硬编码值。如果要预先设置更改以便即使在服务器重新启动后它们仍然处于活动状态，那么您仍然必须将该更改存储在其他地方。

使用自定义 Xml 文件（或通常是某种文件）可以工作。该文件可能包含我建议您在数据库版本中包含的相同信息。但为了处理可能的并发编辑，需要更加小心。

所以在我看来，存储在 db 中可能是最简单、最可靠的方式。

**编辑**：我在回答中假设有某种界面可以进行配置更新。也就是说，我假设更新应该可以“即时”进行，而无需重新启动应用程序。如果不是这种情况，并且没有用于更新 conf 数据的特定接口，则数据库版本可能不太可行，因为对于外行来说，手动更新 db 比简单地在磁盘上的某个位置编辑文件更困难。

**编辑 2**：我肯定会创建一个或几个类以便与缓存交互。可能我会创建一个`ConfSettings`具有命名属性的类（也许），可以初始化并存储在缓存中（缓存定义广泛 - Asp.Net 服务器缓存、应用程序范围、存储在静态类中等）。还有一个类（`ConfSettingsManager`或类似的）用于访问缓存对象、存储更新和刷新缓存对象等。

# android - 无法通过 System.secure 打开/关闭 GPS 和无线定位设置

> ID：11257888
> 
> 赞同：1
> 
> 时间：2012-06-29T07:38:19.967
> 
> 标签：android, gps, location, wireless

我想打开和关闭位置提供程序，即 GPS 和无线位置

我在清单中添加了权限

我更改无线位置设置的代码是...

> Settings.Secure.setLocationProviderEnabled(context.getContentResolver(), provider, true);

每当我运行此代码时，logcat 都会显示错误

logcat 输出

```
Caused by: java.lang.SecurityException: Permission denial: writing to secure settings requires android.permission.WRITE_SECURE_SETTINGS 
```

我搜索了这个，很多人说

WRITE_SECURE_SETTINGS 权限不适用于不属于固件的应用程序，因为安全设置旨在防止第三方应用程序修改

是真的吗，如果是的话我需要任何其他方法来实现这一点，

如果没有，那么如何使用它，我的代码中是否有任何错误......

提前致谢

**注意：**我在不同的类文件中定义了这个方法，并从 SERVICE 中调用它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:59:16.920

Android`Settings.Secure.setLocationProviderEnabled`不允许直接从任何其他应用程序调用设置。因此请尝试以这种方式检查或启用 gps：

```
private void isGPSEnable() {
        String str = Settings.Secure.getString(getContentResolver(),
                Settings.Secure.LOCATION_PROVIDERS_ALLOWED);
        Log.v("GPS", str);
        if (str != null) {
            return str.contains("gps");
        }
        else{
            return false;
        }
    } 
```

用于启用/禁用 GPS ：

```
private void turnGPSOnoff(){
     try
     {
     String provider = Settings.Secure.getString(getContentResolver(), Settings.Secure.LOCATION_PROVIDERS_ALLOWED);

     if(!provider.contains("gps")){
         final Intent poke = new Intent();
         poke.setClassName("com.android.settings", "com.android.settings.widget.SettingsAppWidgetProvider"); 
         poke.addCategory(Intent.CATEGORY_ALTERNATIVE);
         poke.setData(Uri.parse("3"));  //SET 3 for gps,3 for bluthooth
         sendBroadcast(poke);
     }
     }
     catch(Exception e)
     {
      Log.d("Location", " exception thrown in enabling GPS "+e);
     }
 } 
```

# batch-file - 复制到另一个文件夹并添加日期戳

> ID：11257895
> 
> 赞同：0
> 
> 时间：2012-06-29T07:38:54.037
> 
> 标签：batch-file, cmd

我一直在论坛上，似乎找不到我需要的东西，因为我对编写批处理文件完全陌生，所以我无法真正修改我找到的那些。

我需要一个文件，它将所有扩展名为 .dwg 的文件（或文件夹中的所有文件）复制到另一个文件夹，并在开头添加日期戳。关键是在主目录中只保留一组文件，并在存档文件夹中制作副本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T07:55:46.157

```
rem Get the current date
for /f "skip=1" %%x in ('wmic OS GET LocalDateTime') do if not defined LocalDateTime set LocalDateTime=%%x
set MyDate=%LocalDateTime:~0,8%

rem Create folder
set Folder=some\other\path\%MyDate%-archive
mkdir %Folder%

rem Copy files
copy *.dwg %Folder% 
```

**编辑：**如果您只想将日期添加到文件中，请改用以下内容：

```
for %%F in (*.dwg) do copy "%%F" "\some\other\path\%MyDate%_%%F" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T07:51:49.877

尝试这样的事情：

```
#!/bin/bash

TIMESTAMP=`date +%Y-%m-%d`
MYFOLDER=/archive

for DWGFILE in $( ls *.dwg )
do
   cp $DWGFILE $MYFOLDER/$TIMESTAMP-$DWGFILE
done 
```

# android - Android SDK 管理器未加载 API 级别 7

> ID：11257899
> 
> 赞同：1
> 
> 时间：2012-06-29T07:39:10.613
> 
> 标签：android, android-sdk-2.1

我是安卓新手。我已经安装了 installer_r18-windows ，在从 Eclipse==> windows 启动 sdk manager 时，它开始下载所有 api 级别，但我看不到 api 级别 7。有 8、10、13、15 个 api 级别。

两周前我用相同的安装程序创建了环境，但在不同的机器上。我不知道这次出了什么问题。

我已经在谷歌上花了几个小时但找不到任何东西。请帮忙

# java - Java中ipv6 Socket的权限被拒绝

> ID：11257901
> 
> 赞同：1
> 
> 时间：2012-06-29T07:39:23.097
> 
> 标签：java, permissions, ipv6

我在 ipv6 连接上有一个奇怪的问题。

我用 Java 写了一个简单的客户端服务器，它在 ipv4 中运行良好，但是当我尝试将它与 IPv6 地址一起使用时，我收到 *“java.net.SocketException: Permission denied”。*

如果我尝试在同一台机器客户端和服务器上运行，它也适用于 ipv4 和 ipv6，所以我认为这是一个操作系统问题。

一些信息：

Ping6 在机器之间工作 iptables 已停止 操作系统是 RedHat 6.2

有任何想法吗？谢谢

安东尼奥

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T07:42:59.703

我发现了问题。RHEL 上有两个默认运行的防火墙。我只是关闭了 IPv6 iptables。

*服务 ip6tables 停止*

# cloud - 云布局逻辑

> ID：11257902
> 
> 赞同：0
> 
> 时间：2012-06-29T07:39:24.603
> 
> 标签：cloud, cloud-hosting, paas

我是 PaaS/IaaS 开发人员。我正在尝试引入新算法来设计放置登录或资源管理逻辑。例如：我正在为用户创建 linux 实例，我想考虑内存 cpu 使用率 heapsize 所有这些因素并设计我的放置机制。如果实例失败，我也想重试。设计这个有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:03:11.987

正如 nmahee 建议的那样，您应该使用具有以下约束的 BinPacking 求解器： 1\. 支持多个维度（CPU、内存、磁盘空间等） 2\. 支持从当前分布开始的增量算法，结果为一个新的分布。与假设您从零开始的经典装箱不同。3\. 最佳解决方案与现有分布的最小变化之间的权衡。例如，如果添加了新资源，您是否应该移动现有资源以获得最佳解决方案？（在 PaaS 中，答案通常是否定的）。

对于通用 BinPacking 求解器，请查看 Drools。

对于（非常特别的）求解器，您可以查看 Cloudify 使用的引擎。当我们有时间时，我们可能会用流口水重写它。 [https://github.com/OpenSpaces/OpenSpaces/blob/master/src/main/java/org/openspaces/grid/gsm/machines/BinPackingSolver.java](https://github.com/OpenSpaces/OpenSpaces/blob/master/src/main/java/org/openspaces/grid/gsm/machines/BinPackingSolver.java)

这个求解器主要查看每台机器的可用容量、已用容量和所需容量的变化（容量是 cpu/memory/disk 的抽象 - 参见上面的 1）。使用的容量是现有的解决方案（见上面的 2）。该算法的另一个特点是它完全忽略了这台机器上的其他资源。如果这台机器上有其他资源，则由较小的可用容量值反映。基本上，我们为每个资源分别调用求解器，每次通过减少可用容量来屏蔽机器上的其余资源（参见上面的 3）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T22:09:11.597

看看装箱问题。它通常是一个 NP-Complete 复杂性问题。

# android - 类未找到异常 Android

> ID：11257903
> 
> 赞同：-2
> 
> 时间：2012-06-29T07:39:25.907
> 
> 标签：android, class

我对 Eclipse 有一个奇怪的问题。在我从 svn 更新我的应用程序后，应用程序崩溃并且我收到了该错误：

```
06-29 09:32:55.120: E/AndroidRuntime(13224): java.lang.RuntimeException: 
Unable to instantiate activity ComponentInfo{de.re.ab/de.re.ab.FerieActivity}:
java.lang.ClassNotFoundException: de.re.ab.FerieActivity 
```

看起来他正在子文件夹（？）中搜索类。请告诉我如何解决这个问题；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T08:34:39.677

有没有可能有人重命名了这个包？项目文件夹中的包名称是什么`gen`？

您是否尝试过运行“Android 工具”->“修复项目属性...”？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-25T01:52:16.283

尝试关闭并重新打开 Eclipse。我这样做了，它解决了这个问题。

# c# - 在桌面和 Surface (PixelSense) 1.0 上运行的 WPF 应用程序的约定

> ID：11257909
> 
> 赞同：8
> 
> 时间：2012-06-29T07:40:07.817
> 
> 标签：c#, .net, wpf, cross-platform, pixelsense

**编辑：**为避免混淆：这是关于以前称为或仍称为*Microsoft Surface 1.0*的表。这与以前称为*Microsoft Surface 2.0*的桌子无关，也与现在称为*Microsoft Surface*的平板电脑无关。**编辑结束**

我正在编写一个 WPF 应用程序，它既可以在桌面系统上运行，也可以在 MS Surface/PixelSense 1.0 上运行。**我正在寻找有关通常如何完成的约定。**

我知道平台之间存在一些差异，这就是为什么桌面版和 PixelSense 版本的基本 GUI 框架不同（在这种情况下，`Canvas`桌面版本`ScatterView`中的 a 和 PixelSense 版本中的 a 作为根 GUI 元素）。

但是，桌面版本中有许多基于 WPF 的用户控件/GUI 片段在 PixelSense 版本中的显示方式应该或多或少相同。

**不幸的是，标准的 WPF 控件似乎在 PixelSense 中不起作用。**为了对用户输入做出反应，`CheckBox`必须替换控件等控件，可以通过 PixelSense 上的这个小代码示例轻松验证：`SurfaceCheckBox`

```
var item = new ScatterViewItem();
var sp = new StackPanel();
item.Content = sp;
item.Padding = new Thickness(20);
sp.Children.Add(new CheckBox() { Content = "CheckBox" });
sp.Children.Add(new SurfaceCheckBox() { Content = "SurfaceCheckBox" });
myScatterView.Items.Add(item); 
```

显然，这意味着 WPF 用户控件无法在没有任何更改的情况下显示在 PixelSense 上，正如[Microsoft 在 PixelSense 表示层上的文档等资源中的声明所证实的那样，](http://msdn.microsoft.com/en-us/library/ff727733.aspx)[诸如与 WPF 树视图相关的这个](https://stackoverflow.com/questions/10277013/using-wpf-controls-in-a-surface-application)问题也提到了到，[这篇关于 PixelSense WPF 层的博文](http://surfacedeveloper.blogspot.de/2009/01/wpf-layer.html)或[这个关于如何为 PixelSense 重写 WPF 桌面应用程序的 SO 问题](https://stackoverflow.com/questions/2255277/rewriting-a-wpf-application-to-surface)。后一页甚至将所需的更改称为*最小*更改，但它们仍然是更改。

此外，[对如何在 PixelSense 上使用特定 WPF 桌面控件的这个 SO 问题的](https://stackoverflow.com/questions/4998967/how-to-use-avalonedit-in-microsoft-surface-application)反应意味着使用 .NET 4.0 可能会简化事情，但我认为 PixelSense **1.0** SDK 不支持 .NET 4.0（它是 .NET 3.5 -据我所知）。

作为一名软件工程师，我仍然不能同意使用相同的编程语言两次编写相同的 GUI 片段（包括在相同布局中具有相同数据模型行为的基本相同控件）的策略。这似乎是错误的。

因此，到目前为止，我发现了三种可能的解决方案：

*   为标准 WPF 编写 GUI 片段。然后使用脚本复制包含这些 GUI 片段的库，同时转换所有相关的 Xaml 文件（例如，使用 XSLT）以将标准 WPF 控件替换为`Surface*`对应的控件。
    **缺点：**
    *   每当 WPF 项目中的某些内容发生更改时，始终保持脚本正常工作和运行它们需要增加维护。
    *   此外，定义要考虑的 Xaml 文件以及要替换的控件（想想额外的第 3 方 PixelSense 控件......）可能最终会变得复杂。
    *   最后，生成的 PixelSense-Project 将是 WPF 项目的精确副本，除了 Xaml 文件，因此不能引入特定于 PixelSense 的代码（或者如果可以，这将使生成 PixelSense 项目的脚本更多复杂的）。
*   仅针对 PixelSense/Surface，并让桌面用户安装 Surface SDK。感谢用户[Clemens](https://stackoverflow.com/users/1136211/clemens)的建议！
    **缺点：**
    *   用户必须安装*Surface 1.0 SDK*，这在当前系统上是一项非常重要的操作：为了让*Surface 1.0 SDK*在 Windows 7 64 位机器上运行，必须执行[各种操作，例如修补 MSI 文件。](http://www.jimability.com/nl/wat-zeggen-we/2011/08/22/how-to-install-surface-sdk-1-0-sp1-on-windows-7-64-bit-and-visual-studio-2010/)
    *   PixelSense/Surface 1.0 模拟器是在台式计算机上运行 Surface 1.0 应用程序的唯一可能性。这个模拟器不是很好用，而且在某些系统上完全是错误的：在我的电脑上，它看起来像这样：（![越野车 Surface 1.0 模拟器](../Images/8bcbd1009231a5b37f249adbf7c189c1.png)输出只覆盖了模拟器窗口的 3/4，但输入在整个窗口中注册。即单击 Surface 模拟的右下角，我必须单击模拟器窗口的（显然是透明的）右下角。）
*   创建 GUI 时，不要显式使用标准 WPF 或 PixelSense 控件类，而是使用特定于平台的工厂来创建适当的控件类型。
    **缺点：**
    *   GUI 片段不能再用 Xaml 编写；至少大多数控件及其所有绑定都必须在 C# 代码中创建。

我目前倾向于第三种选择，因为独立于平台似乎是一个可以接受的价格。然而，我认为 WPF 是桌面和 PixelSense GUI 之间的连接元素，这应该是一个经常出现的问题，我想知道这是否以前没有解决过。所以，我在这里问：**这通常是怎么做的？**

PS：方向不是问题。上述 GUI 片段显示在 PixelSense 上的可旋转 ScatterViewItems 中，并在桌面上以正常的垂直方向显示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T13:29:47.317

让我们从回到 Surface 1.0 构建时的机器开始……

时间是2006年，Windows操作系统（甚至主流手机！）都没有多点触控的概念。没有 API 允许应用程序响应同时与多个控件交互的用户。现有 UI 框架中内置的输入路由、捕获和聚焦机制基本上都禁止多点触控以非蹩脚的方式工作。即使这些问题神奇地消失了，大多数应用程序仍然会在用户执行他们无法处理的事情时崩溃（例如同时单击“保存”和“退出”按钮），并且用户会非常暴躁，因为外观和现有应用程序/控件的感觉针对微小的鼠标光标而不是粗大的手指进行了优化。

因此，在 2006 年，我带领 Surface 团队在 WPF 之上创建了一个抽象层来解决所有这些问题……结果就是您所询问的 1.0 SDK。我们试图通过子类化现有 UI 控件而不是创建全新的层次结构来最小化您提到的软件工程问题（这个决定使开发 SDK*变得*更加困难）所以虽然您必须在每个平台上使用实例化不同的类，但在那之后在原始版本的控件中使用的事件和属性将按预期在 Surface 版本中工作。

快进到 2009 年……多点触控开始流行起来。Windows 7 添加了对多点触控的原生支持，但并未真正解决 UI 框架问题。

快进到 2010 年... WPF 和 Surface 团队合作采用 Surface 针对我列出的问题构建的许多解决方案，使它们适应 Win7 的本机触控堆栈，并将它们作为 WPF 4.0 的内置部分提供。 .. 这提供了多点触控输入路由、事件、捕获和焦点，但触控功能不能简单地添加到内置 WPF 控件中而不破坏大量现有应用程序。因此，Surface 团队发布了“Surface Toolkit for Windows Touch”，它提供了大多数 Surface 1.0 UI 控件的 WPF 4.0 兼容版本。但是 2006 年的 Surface 1.0 与这个新版本的 WPF 不兼容，因此虽然您最终可以为 Windows 和 Surface 构建杀手级触控体验，但您仍然无法 100% 共享您的代码。

快进到 2011... Surface 2.0（使用 PixelSense 技术的版本）发布。它使用新的 WPF 4.0 功能（不再需要 Surface 1 SDK 附带的许多 API），并包括本质上是适用于 Windows 的 Surface Toolkit 的更新版本，尽管现在控件已重新设计为地铁。最后，产品时间线已同步，您可以使用单个代码库为两个平台构建出色的触控体验。

好的，现在回到你现在的问题……你问的是 Surface 1.0，所以 2011 年的精彩并不能真正帮助你。不过，您*可以*利用 2010 年的东西：

1.  使用 WPF 4 API 和 Surface Toolkit for Windows Touch 构建您的应用程序
2.  编写一些代码来获取 Surface 输入事件并通过 WPF 4 的输入堆栈对其进行路由（执行此操作的能力不是很广为人知，但它是专门为这种类型的场景创建的）。

那么你是怎么做这些事情的呢？好问题。幸运的是，我的好友 Joshua Blake 有一篇博客文章以及一些可重用的代码来引导您完成它。看看[http://nui.joshland.org/2010/07/sharing-binaries-between-surface-and.html](http://nui.joshland.org/2010/07/sharing-binaries-between-surface-and.html)。

# windows-phone-7 - 下载托管在服务上的真字体文件 (.ttf) 并在运行时使用

> ID：11257915
> 
> 赞同：1
> 
> 时间：2012-06-29T07:40:41.530
> 
> 标签：windows-phone-7

我有一个托管在服务上的 True type 字体 (.ttf) 文件。我以字节数组的形式获得它。我需要在运行时在该文件中设置字体。

我在 Windows Phone 7 上遇到了这个问题，使用的服务是一个简单的 WCF 服务，它将 .ttf 文件作为字节数组提供。

这是我到目前为止所做的，但它似乎不起作用..：

```
 IsolatedStorageFile file = IsolatedStorageFile.GetUserStoreForApplication();
        string fontPath = string.Empty;
        string ss = string.Empty;

        IsolatedStorageFileStream fs = new IsolatedStorageFileStream("foo.ttf", System.IO.FileMode.Create, file);
        fs.Write(e.Result.byteArray, 0, e.Result.byteArray.Length);
        fs.Dispose();

        fs = new IsolatedStorageFileStream("foo.ttf", FileMode.Open, file);
        ss = fs.Name + @"#My Font";
        textBlock1.FontFamily = new System.Windows.Media.FontFamily(ss); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:57:54.437

我终于弄明白了。文本块有一个**FontSource**属性，它有一个以**STREAM**作为参数的构造函数。**.ttf**文件可以以**流**的形式从独立存储中读取。

然后可以将 FontFamily 设置为 .ttf 字体文件中存在的任何字体。

代码片段如下：

```
void ttlHost_FileStreamingCompleted(object sender, TTL_Host.FileStreamingCompletedEventArgs e)
{
        IsolatedStorageFile file = IsolatedStorageFile.GetUserStoreForApplication();
        FontSource mySource;
        byte[] MyFont;

        using (IsolatedStorageFileStream fs = new IsolatedStorageFileStream("foo.ttf", System.IO.FileMode.Create, file))
        {
            fs.Write(e.Result.byteArray, 0, e.Result.byteArray.Length);
        }

        MyFont = e.Result.byteArray;

        using (IsolatedStorageFileStream fileStream = file.OpenFile(""foo.ttf", FileMode.Open, FileAccess.Read))
        {
            using (StreamReader reader = new StreamReader(fileStream))
            {
                mySource = new FontSource(reader.BaseStream);
                myTextBlock.FontFamily = new FontFamily("My Font");
                myTextBlock.FontSource = mySource;
            }
        }

        myTextBlock.Text = "Changed Font";
} 
```

# ios - 为什么我的订阅的“分享您的信息”提醒显示的是发布者名称而不是应用名称？

> ID：11257923
> 
> 赞同：7
> 
> 时间：2012-06-29T07:41:53.503
> 
> 标签：ios, app-store, in-app-purchase, app-store-connect

我们正在整合一个报亭应用程序，并添加了免费订阅应用程序内购买。确认订阅警报与应用程序的名称一起显示。但是，“分享您的信息”警报显示以下内容......

[OUR COMPANY NAME] 的出版商想要您的姓名、电子邮件...

起初我认为这只是一个糟糕的语法，但我在其他应用程序中看到过，它应该显示应用程序名称，而不是发布者名称。我已经尝试在调试和临时运行中运行它，但我得到了相同的结果。

会不会是因为订阅仍处于“准备提交”状态并且它将在分发版本中得到修复？在解决此问题之前，我不希望提交应用程序。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T08:02:16.847

似乎只有在使用 App Store 的沙盒模式时才会发生这种情况。当使用生产版本发布时，它会自行更正。所有的压力都是白费的！我很惊讶这个错误从 Apple 的网络中溜走。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-08T19:01:49.417

当您处于沙盒模式时，此对话框始终出现 - 即使是现在，在 2015 年......即通过沙盒 IAP 测试员帐户或通过 TestFlight 进行测试时。

有一个手动开关，应用程序审查团队必须在应用程序审查后翻转以禁用对话框。如果应用上架后仍能看到，则需要向应用审核团队发送邮件。

我从自己使用具有自动续订订阅的生产力应用程序的经验中知道这一点。我在今年早些时候的[演讲](https://www.cocoanetics.com/2015/07/monetizing-your-apps-with-subscriptions/)中总结了这段经历；你可以在 YouTube 上观看。

# java - 如何检测 MotionEvent.ACTION_MOVE 何时完成

> ID：11257928
> 
> 赞同：8
> 
> 时间：2012-06-29T07:42:14.530
> 
> 标签：java, android, motion-detection

当用户停止在特定视图中移动时，我需要在我的应用程序中进行检测。我正在我的应用程序中创建类似于标记文本的内容，当用户触摸视图并在其上移动时可以进行交互。我需要在用户抬起手指后开始滚动视图。正如我注意到的那样，如果我将手指移过视图几秒钟，而当我抬起手指时，`MotionEvent.ACTION_UP`则不会调用。我捕获的最后一个事件是`ACTION_MOVE`. 那么如何检测用户在视图中移动几秒钟后抬起手指的时间呢？是否有某种功能可以检测到这一点？

这是我正在使用的代码：

```
txt.setOnTouchListener(new View.OnTouchListener() {
    @Override
    public boolean onTouch(View v, final MotionEvent event) {
        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                Log.e("","event down : "+event.getAction());
                handler.removeCallbacks(runnable);
                break;
            case MotionEvent.ACTION_UP:
                Log.e("","event up : "+event.getAction());
                if(myTimer!=null){
                    myTimer.cancel();
                }
                break;
            case MotionEvent.ACTION_MOVE:
                Log.d("","move");
                // handler.removeCallbacks(runnable);
                checkX();
                break;
        }
        return true;
    }
}); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-28T15:49:46.790

我认为该事件可能会`ACTION_CANCEL`在手势完成之前发送一个动作。或者，如果它拖到您正在检查的视图之外，它可能是`ACTION_OUTSIDE`.

确认/调试这一点的最佳方法是放入`Log.d()`语句，打印值，并检查事件结束`MotionEvent.getActionMasked()`后调用了哪些操作。`ACTION_MOVE`

# django - 带有 mysql (Cloud SQL) 的谷歌应用引擎是否支持 GIS？

> ID：11257930
> 
> 赞同：4
> 
> 时间：2012-06-29T07:42:21.343
> 
> 标签：django, google-app-engine, geodjango, google-cloud-sql

我试图在应用程序引擎和云 sql 站点上找到一些关于此的文档，但无论哪种方式都找不到任何引用它的东西。我知道您可以在他们的自定义 sql 选项上执行 GIS 查询，而且我知道 mysql 支持开箱即用的 GIS，但我也知道它需要一些 C 库，但支持有限。

更具体地说，我很想知道使用 mysql 的 geo-django 是否支持使用应用程序引擎/云 sql 组合的 gis。（或者如果他们的定制产品支持geodjango？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T04:41:24.983

不支持带有 Cloud SQL 的 GeoDjango。GeoDjango 依赖于应用引擎中不可用的几个库。任何依赖于的应用都会`django.contrib.gis.db.models`在应用引擎开发服务器中引发白名单错误。据推测，在实时应用程序引擎实例上会遇到等效错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T20:39:05.363

是的，Cloud SQL 确实支持[Spatial Queries](http://dev.mysql.com/doc/refman/5.5/en/gis-introduction.html)。我不知道它是否适用于 geodjango，但我不明白为什么它不会。

请记住，Mysql 地理空间查询需要 myisam 表。Myisam 表比 innodb 表更容易损坏，所以你应该非常小心使用它们。具体来说，如果您的数据经常更改，您应该期望有时必须从备份中恢复。在这种情况下，请考虑改用[搜索 API 进行地理空间查询](https://developers.google.com/appengine/docs/python/search/geopointclass)。如果数据不经常更改（例如，实体店定位器），myisam 表可能会正常工作。

# if-statement - itemTpl 配置 Sencha Touch 2 中的短 if 语句

> ID：11257934
> 
> 赞同：1
> 
> 时间：2012-06-29T07:42:33.797
> 
> 标签：if-statement, sencha-touch-2, itemtemplate

我想知道，是否可以在 Sencha Touch 的 List 的 itemTpl 配置中声明一个 if 语句（是否短）。

```
//My Model
Ext.define('ListItem', {
            extend: 'Ext.data.Model',
            config: {
                fields: ['number', 'someBoolean']
            }
        });
//The List
var MyList = Ext.create("Ext.List", {
        itemTpl : "{number} <br />"+
                    //THIS LINE BELOW IS WHAT ITS ALL ABOUT
                ("{someBoolean}")? + "The boolean was true" : +"It was false" ,
        store: oListStore,
    }); 
```

这会产生一个列表，其中填充了屏幕上代表 NaN 的项目。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T08:14:16.950

看看[Ext.XTemplate](http://docs.sencha.com/touch/2-0/#!/api/Ext.XTemplate)

这是一个例子

```
itemTpl: new Ext.XTemplate(
    '<p>Name: {name}</p>',
    '<p>Kids: ',
    '<tpl for="kids">',
        '<tpl if="age &gt; 1">',
            '<p>{name}</p>',
            '<p>Dad: {parent.name}</p>',
        '</tpl>',
    '</tpl></p>'
), 
```

希望这可以帮助

# html - 无法在 Internet Explorer 中使用 javascript 从 XML 文件中提取数据

> ID：11257936
> 
> 赞同：0
> 
> 时间：2012-06-29T07:42:45.437
> 
> 标签：html, xml

以下代码在 Firefox 中运行良好，但与许多其他东西一样，我无法让它在 Internet Explorer（任何版本）中运行。

有人可以帮忙吗？

```
<body>
   <script type="text/javascript">
        if (window.XMLHttpRequest)
            {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp=new XMLHttpRequest();
            }
        else
            {// code for IE6, IE5
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }
        xmlhttp.open("GET","messages.xml",false);
        xmlhttp.send();
        xmlDoc=xmlhttp.responseXML;

        var x=xmlDoc.getElementsByTagName("entry");
        for (i=0;i<x.length;i++)
            {
                document.write("<b>From:</b> ");
                document.write(x[i].getElementsByTagName("username")[0].childNodes[0].nodeValue);
                document.write("<br />");
                document.write("<b>Date:</b> ");
                document.write(x[i].getElementsByTagName("date")[0].childNodes[0].nodeValue);
                document.write("<br />");
                document.write("<b>Message:</b> ");
                document.write(x[i].getElementsByTagName("message")[0].childNodes[0].nodeValue);
                document.write("<br />");
                document.write("<br />");

            }
    </script>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:12:13.343

两个潜在的问题浮现在脑海中：

1.  也许您的 AJAX 通信失败了。在这种情况下，我强烈建议您使用[JQuery 之](http://api.jquery.com/category/ajax/)类的库来处理您的通信。那你就不用担心浏览器兼容性问题了

2.  其次，从服务器返回的数据不是用`content-type("application/xml")`. 如果不同的浏览器不能可靠地检测到内容类型并且知道它是您所期望的 XML，则它们的行为可能会有所不同。

**[编辑]**

这是我在 IE7 中测试的完整工作示例

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
   <title></title>
 </head>
 <body>
    <script type="text/javascript">
         if (window.XMLHttpRequest)
             {// code for IE7+, Firefox, Chrome, Opera, Safari
                 xmlhttp=new XMLHttpRequest();
             }
         else
             {// code for IE6, IE5
                 xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
             }
         xmlhttp.open("GET","messages.xml",false);
         xmlhttp.send();
         xmlDoc=xmlhttp.responseXML;

         var x=xmlDoc.getElementsByTagName("entry");
         for (i=0;i<x.length;i++)
             {
                 document.write("<b>From:</b> ");
                 document.write(x[i].getElementsByTagName("username")[0].childNodes[0].nodeValue);
                 document.write("<br />");
                 document.write("<b>Date:</b> ");
                 document.write(x[i].getElementsByTagName("date")[0].childNodes[0].nodeValue);
                 document.write("<br />");
                 document.write("<b>Message:</b> ");
                 document.write(x[i].getElementsByTagName("message")[0].childNodes[0].nodeValue);
                 document.write("<br />");
                 document.write("<br />");

             }
     </script>

     <div>Hi</div>

</body>
</html> 
```

并且测试数据`messages.xml`也位于我服务器的根目录

```
<?xml version="1.0"?>
<root>
    <entry>
        <username>A</username>
        <date>B</date>
        <message>C</message>
    </entry>
</root> 
```

这会产生以下输出

```
From: A
Date: B
Message: C

Hi 
```

IE 调试起来很痛苦，因为它的调试工具非常有限。我检查了 FireFox 的 FireBug 插件，发现我的 WAMP 服务器的内容类型是“application/xml”。

![内容类型=应用程序/xml](../Images/339e4c4a9d55cad2fae2cbaad4e8cd52.png)

您还应该通过验证器运行 XML 文档来确保它是有效的。

# playframework-2.0 - Ebean 没有创建 dbfile，我如何让它工作？

> ID：11257938
> 
> 赞同：0
> 
> 时间：2012-06-29T07:43:05.627
> 
> 标签：playframework-2.0, ebean

我有一个扩展 Ebean 模型的用户类。我在 application.conf 中定义了一个 dbfile，并通过启动 h2，它正在创建 dbfile。我的问题是：

我必须在数据库的 H2 控制台中手动创建我的用户表吗？还是 Ebean 自动创建它。如果 Ebean 有，我将如何以及在何处看到 DB 中的用户表？我有点困惑。。

感谢您提前澄清！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:16:38.803

你应该使用[进化](http://www.playframework.org/documentation/2.0.2/Evolutions)。

所以你必须在下创建一个 SQL 文件`conf/evolutions/default/1.sql`（假设在 application.conf 你的数据库是在“默认”下）。此文件必须包含您的`CREATE TABLE`语句，它将在 Play 启动时执行。

# javascript - MVC4部分视图javascript捆绑问题

> ID：11257940
> 
> 赞同：9
> 
> 时间：2012-06-29T07:43:15.333
> 
> 标签：javascript, asp.net-mvc-4, asp.net-optimization, bundling-and-minification

我正在使用 Visual Studio 11 开发一个项目 ASP.net 4、MVC4(RC)。我正在尝试渲染一个渲染局部视图的 MVC4 Razor 视图。我的部分视图需要一些 javascript。在我的部分视图中，当我将我的 javascript 包含在脚本部分中时，它似乎没有加载。

```
@section Scripts {
    <script type="text/javascript">
        $(function () {
            alert("test");
        });
    </script>
} 
```

如果我删除脚本部分，它会失败，因为在文档就绪代码运行时尚未加载 jquery 库（捆绑并呈现在我的 _Layout.cshtml 页面上）。

```
<script type="text/javascript">
    $(function () {
        alert("test");
    });
</script> 
```

_Layout 页面代码加载 jquery 库

```
@Scripts.Render("~/bundles/jquery")
@RenderSection("scripts", required: false) 
```

有谁知道这个的解决方案，还是我只是以错误的方式去做？它破坏了我的头！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T07:50:36.287

不要将脚本包装`document.ready`在部分中：

```
@section Scripts {
    <script type="text/javascript">
        alert("test");
    </script>
} 
```

啊，不要把脚本放在局部。Javascript 代码应放在单独的 javascript 文件中。如果您想在加载部分加载时执行一些 javascript，您只需将此脚本外部化为可重用的函数/插件，您可以在加载部分加载后调用该函数/插件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T05:34:46.437

终于让这个工作了。我从部分视图中删除了我的 javascript，并将其放置在脚本部分的父视图（不是部分）中。此脚本部分是在使用脚手架（创建）创建视图时自动创建的，并放置在页。为了让它工作，我必须把它移到页面的顶部——在调用渲染我的部分之前。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-23T16:35:31.447

[ClientDependency](https://github.com/Shazwazza/ClientDependency)正好解决了这个问题，并允许您将脚本引用添加到部分视图，这些视图会为您卷起并放置在页面末尾（或您指定的任何位置）。它还逐页处理捆绑、版本控制和缩小。

确保脚本引用在“父”视图而不是部分视图上的开销并没有真正困扰我，但是如果您有大量部分都需要它们自己的脚本和 CSS，则客户端依赖可能会有所帮助。

# android - 如何在android的包路径中打开pdf文件？

> ID：11257944
> 
> 赞同：5
> 
> 时间：2012-06-29T07:43:47.153
> 
> 标签：android

在我的应用程序中，我需要打开 pdf 文件。为此，我准备了打开 pdf 文件的代码。假设我的 pdf 文件在 sdcard 中，它工作正常。当我的应用程序从 sdcard 更改为应用程序路径时，即`/data/data/app.package/`它不工作。我得到了像这样的警报对话框 `Invalid file path`。请指导我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T07:51:10.133

根据[Android 文档](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

您可以将文件直接保存在设备的内部存储中。默认情况下，保存到内部存储的文件对您的应用程序是私有的，其他应用程序无法访问它们（用户也不能）。当用户卸载您的应用程序时，这些文件将被删除。

```
String string = "hello world!";

FileOutputStream fos = openFileOutput("HERE YOUR FILENAME", Context.MODE_PRIVATE);
fos.write(string.getBytes());
fos.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T07:54:14.860

您必须使 /data/data/app.package/file.pdf 可用于其他应用程序。

1) 使用 openFileOutput(fname, Context.MODE_WORLD_READABLE).close(); 在您的应用数据目录中创建共享文件。

2）使用Streams将pdf文件写入创建的文件（您可以通过openFileOutput写入流returnet而不是关闭它）

3）打开你的pdf文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T07:53:43.463

`/data/data/app.package/`是包私有的。要共享此 pdf，您可能必须将其移动到外部存储（您可以使用[getExternalFilesDir()](http://developer.android.com/reference/android/content/Context.html#getExternalFilesDir%28java.lang.String%29)）。此目录没有强制执行安全性。

# html - 是否有用于收据读取的 API？

> ID：11257945
> 
> 赞同：4
> 
> 时间：2012-06-29T07:43:52.203
> 
> 标签：html, mobile, jquery-mobile, computer-vision

我有一个关于我的第一个移动应用程序的想法，我正在考虑用 HTML5 + Jquery Mobile 制作它。核心功能是：

1.  能够为收据拍照
2.  将所有信息数字化。

我以前从未制作过移动应用程序，我不确定这是否可能。如果没有可用的 API，我将如何滚动自己的收据阅读器？谢谢！请让我知道我是否愚蠢。

编辑：我找到了一项服务，可以让我使用他们的应用程序为收据拍照（或通过电子邮件发送图片）并让它提取必要的信息。[http://www.proongo.com/b/receipt-reading.php](http://www.proongo.com/b/receipt-reading.php)。我不确定如何使用这项服务，但我明天会做更多的研究，并与你分享我的发现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T22:22:39.950

我发现了一个 OCR API 服务，它具有许多不同的按次付费业务模型，称为[OCRAPISERVICE](http://ocrapiservice.com/)。他们通过 PhoneGap 使用各种移动操作系统在 github 上托管了许多[示例。](http://ocrapiservice.com/documentation/)他们确实有一个免费试用模型，可让您提交 100 个请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-18T11:28:23.543

除了 Tesseract，所有大公司：谷歌、微软和 IBM 现在都有自己的 OCR API 产品。这些 API 提供了简单的图像到文本的 OCR 扫描，具有不同程度的准确度。我发现 Google Vision 是最准确的收据图片。不过，您仍然需要从半垃圾文本中提取数据。

如果您想要一个返回字段元数据的 API，例如：总金额、税额、日期和商家信息，您的应用程序可以直接在其中使用。查看[https://www.taggun.io](https://www.taggun.io)。我专门为此目的构建了 API。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-04T09:37:21.157

我想您需要将 OCR 应用于具有识别超市收据功能的软件解决方案。有许多开源 OCR 解决方案，例如 Tesseract 等。但是，它们针对的是一般 OCR。因此，您必须使用一些额外的工具来通过移动应用程序识别收据。

最近，我们开发了基于 Web 的收据识别应用程序。在这里您可以找到研究的一些细节：[http ://rnd.azoft.com/applying-ocr-technology-receipt-recognition/](http://rnd.azoft.com/applying-ocr-technology-receipt-recognition/)

# java - java.io.IOException：文档没有页面

> ID：11257946
> 
> 赞同：1
> 
> 时间：2012-06-29T07:43:58.553
> 
> 标签：java, google-app-engine, itext

我正在尝试创建一个名为内容 Hello World 的 PDF 并收到错误消息 `java.io.IOException`：文档没有页面。

这是我的 servlet 的代码：

```
package org.ritesh;

import java.io.ByteArrayOutputStream;
import java.io.IOException;

import javax.servlet.ServletOutputStream;
import javax.servlet.http.*;

import com.lowagie.text.Document;
import com.lowagie.text.DocumentException;
import com.lowagie.text.Paragraph;
import com.lowagie.text.pdf.PdfWriter;

@SuppressWarnings("serial")
public class PdfmakeServlet extends HttpServlet {
    public void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws IOException {
        resp.setContentType("application/pdf");

        Document document =new Document();
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            try {
                PdfWriter.getInstance(document, baos);
            } catch (DocumentException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            document.open();

                try {
                    document.add(new Paragraph("Hello WOrld "));
                } catch (DocumentException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            resp.setContentLength(baos.size());

            // write ByteArrayOutputStream to ServletOutputStream
            ServletOutputStream out = resp.getOutputStream();
            baos.writeTo(out);

            out.flush();
            out.close();
            document.close();
    }
} 
```

这是一个 GAE 应用程序，所以我添加了一个兼容的 iText 库，但收到此错误

```
java.io.IOException: The document has no pages.
    at com.lowagie.text.pdf.PdfPages.writePageTree(Unknown Source)
    at com.lowagie.text.pdf.PdfWriter.close(Unknown Source)
    at com.lowagie.text.pdf.PdfDocument.close(Unknown Source)
    at com.lowagie.text.Document.close(Unknown Source)
    at org.ritesh.PdfmakeServlet.doGet(PdfmakeServlet.java:48)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:122)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:78)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:369)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

我是 iText 的新手，谁能帮忙解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:04:39.130

我建议仅在文档关闭后将**ByeArrayOutputStream分配给 servlet OutputStream。**在**document.close()**指令之前，ByteArrayOutputStream 的大小为 0。

# css - 具有缩放功能的 css3 spritesheet

> ID：11257949
> 
> 赞同：1
> 
> 时间：2012-06-29T07:44:04.430
> 
> 标签：css, scaling, css-sprites

我在 Texture Packer 的帮助下生成了一个 CSS Spritesheet，它看起来像

```
.pirateSlotSprite {display:inline-block; overflow:hidden; background-repeat: no-repeat;background-image:url(../img/pirateSlotSprite.png);}
.backgroundps {width:800px; height:480px; background-position: -105px -304px}
.balanceBlockps {width:122px; height:61px; background-position: -0px -0px}

...more classes for each frame...

.lineControlps {width:113px; height:65px; background-position: -580px -0px}
.maxBetButtonps {width:115px; height:64px; background-position: -348px -0px} 
```

然后我将类应用`pirateSlotSprite`到`backgroundps`div (sav `bgDiv`) 以显示精灵表中的背景帧。到目前为止一切都很好。

`bgDiv`将在浏览器调整大小时调整大小，但背景图片保持静态而不会缩小/放大以适合 bgDiv。

所以我添加`background-size:100%`到`pirateSlotSprite`，但精灵被转移到不同的位置。我猜整个图像首先被缩小，然后`background-position:-105px -304px`在没有缩放位置值的情况下被应用。如果需要，我将分享图片以使问题更易于理解。

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T08:11:03.007

您误解了背景图像的工作方式。背景图像的定位使用像素或百分比。但是图像本身会以其真实的分辨率和纵横比显示（除非被 JavaScript 更改）。因此，当您调整浏览器窗口大小时，它们不会“缩放/拉伸”。

# php - echo 修剪字符串中间的多个空格

> ID：11257955
> 
> 赞同：4
> 
> 时间：2012-06-29T07:44:21.440
> 
> 标签：php, html, string, whitespace, echo

以下代码输出 ab：

```
$var="a   b"; // I inserted 3 white spaces, and HTML is rendering only one
echo $var; 
```

问题是，如果我将**$var**存储在表中，它将保留空格，并且在读取时将它们剥离。条带化数据在另一个表中更新时得到，导致两个表中的相同值不匹配。

我尝试了谷歌搜索，并在一个线程中发现了它的 HTML 行为方式。对我该如何解决这个问题有任何希望吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T07:56:47.110

正常的空白行为是将所有内容折叠到一个空格中。`white-space:`您可以通过将css 规则更改为`white-space: pre;`或来修改它`white-space: pre-wrap;`

有关详细信息，请参阅[https://developer.mozilla.org/en/CSS/white-space](https://developer.mozilla.org/en/CSS/white-space)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T07:46:22.790

大多数浏览器的 html 输出中会修剪多个空格，而不是 html 代码本身。如果你想渲染多个空格，你可以使用`str_replace(" ", "&nbsp;",$var)`它将告诉浏览器渲染每个空格字符。多个换行符也是如此，使用`nl2br()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T07:46:36.623

HTML 总是去除多余的空白字符（用于显示）。如果你想阻止这种使用`&nbsp;`。但是，听起来您正在使用它进行对齐。永远不要那样做！

如果文本发生变化怎么办？

# ios - UITableView Expanding Section 生成错误

> ID：11257962
> 
> 赞同：1
> 
> 时间：2012-06-29T07:44:57.303
> 
> 标签：ios, uitableview

我有一段扩展部分单元格行的代码。错误发生在 xtable 更新 [ **UIViewAnimation initWithView:indexPath:endRect:endAlpha:startFraction:endFraction:curve:animateFromCurrentPosition:shouldDeleteAfterAnimation:editing:]**

代码片段

```
 -(void)sectionHeaderView:(SectionHeaderView*)sectionHeaderView sectionOpened:(NSInteger)sectionOpened {

SectionInfo *sectionInfo = [self.sectionInfoArray objectAtIndex:sectionOpened];

sectionInfo.open = YES;

    NSInteger countOfRowsToInsert = 5;         
NSMutableArray *indexPathsToInsert = [[NSMutableArray alloc] init];
for (NSInteger i = 0; i < countOfRowsToInsert; i++) {
    [indexPathsToInsert addObject:[NSIndexPath indexPathForRow:i inSection:sectionOpened]];
}

NSMutableArray *indexPathsToDelete = [[NSMutableArray alloc] init];

NSInteger previousOpenSectionIndex = self.openSectionIndex;
if (previousOpenSectionIndex != NSNotFound) {

    SectionInfo *previousOpenSection = [self.sectionInfoArray objectAtIndex:previousOpenSectionIndex];
    previousOpenSection.open = NO;
    [previousOpenSection.headerView toggleOpenWithUserAction:NO];
    NSInteger countOfRowsToDelete = 5;    

    for (NSInteger i = 0; i < countOfRowsToDelete; i++) {
        [indexPathsToDelete addObject:[NSIndexPath indexPathForRow:i inSection:previousOpenSectionIndex]];
    }
}

// Style the animation so that there's a smooth flow in either direction.
UITableViewRowAnimation insertAnimation;
UITableViewRowAnimation deleteAnimation;
if (previousOpenSectionIndex == NSNotFound || sectionOpened < previousOpenSectionIndex) {
    insertAnimation = UITableViewRowAnimationTop;
    deleteAnimation =UITableViewRowAnimationBottom;
}
else {
    insertAnimation = UITableViewRowAnimationBottom;
    deleteAnimation = UITableViewRowAnimationTop;
}

// Apply the updates.
[xtable beginUpdates];
[xtable insertRowsAtIndexPaths:indexPathsToInsert withRowAnimation:insertAnimation];

 [xtable deleteRowsAtIndexPaths:indexPathsToDelete withRowAnimation:deleteAnimation];
[xtable  endUpdates];
self.openSectionIndex = sectionOpened; 
```

}

有什么可能是错的？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-25T13:36:33.733

在我的情况下帮助

```
-(CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section {
return 0;
} 
```

# java - 在wicket dropDownBox中选择项目时如何更改页面

> ID：11257966
> 
> 赞同：0
> 
> 时间：2012-06-29T07:45:13.857
> 
> 标签：java, wicket

在 dropdownBox 我有页面列表。当我选择一个时，我想去那个页面。

我应该如何实施它？我应该添加此代码，但我不知道应该怎么做**onUpdate**。我没有找到任何改变页面的方法

```
new AjaxFormComponentUpdatingBehavior() {

  private static final long serialVersionUID = 1L;

  @Override
  protected void onUpdate(AjaxRequestTarget target) {
  }
} 
```

更新：

当我尝试第一个响应时出现异常：

```
29 Jun 2012 10:07:01,772 ERROR [1215661@qtp-28488784-5] org.apache.wicket.DefaultExceptionMapper : Unexpected error occurred
org.apache.wicket.WicketRuntimeException: Method onRequest of interface org.apache.wicket.behavior.IBehaviorListener targeted at cz.isvs.reg.rob.monitor.web.BasePage$1 {event='onchange'} on component [DropDownChoice [Component id = vyjimkyPage]] threw an exception
    at org.apache.wicket.RequestListenerInterface.internalInvoke(RequestListenerInterface.java:270)
    at org.apache.wicket.RequestListenerInterface.invoke(RequestListenerInterface.java:241)
    at org.apache.wicket.request.handler.ListenerInterfaceRequestHandler.invokeListener(ListenerInterfaceRequestHandler.java:255)
    at org.apache.wicket.request.handler.ListenerInterfaceRequestHandler.respond(ListenerInterfaceRequestHandler.java:234)
    at org.apache.wicket.request.cycle.RequestCycle$HandlerExecutor.respond(RequestCycle.java:784)
    at org.apache.wicket.request.RequestHandlerStack.execute(RequestHandlerStack.java:64)
    at org.apache.wicket.request.cycle.RequestCycle.execute(RequestCycle.java:255)
    at org.apache.wicket.request.cycle.RequestCycle.processRequest(RequestCycle.java:212)
    at org.apache.wicket.request.cycle.RequestCycle.processRequestAndDetach(RequestCycle.java:283)
    at org.apache.wicket.protocol.http.WicketFilter.processRequest(WicketFilter.java:188)
    at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:244)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:440)
    at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)
    at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:943)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:756)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.wicket.RequestListenerInterface.internalInvoke(RequestListenerInterface.java:260)
    ... 27 more
Caused by: java.lang.IllegalStateException: Attempt to set model object on null model of component: vyjimkyPage
    at org.apache.wicket.Component.setDefaultModelObject(Component.java:3054)
    at org.apache.wicket.markup.html.form.FormComponent.setModelObject(FormComponent.java:1498)
    at org.apache.wicket.markup.html.form.FormComponent.updateModel(FormComponent.java:1059)
    at org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior.onEvent(AjaxFormComponentUpdatingBehavior.java:154)
    at org.apache.wicket.ajax.AjaxEventBehavior.respond(AjaxEventBehavior.java:184)
    at org.apache.wicket.ajax.AbstractDefaultAjaxBehavior.onRequest(AbstractDefaultAjaxBehavior.java:369)
    ... 32 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:49:23.327

你可以做这样的事情

```
 protected void onUpdate(AjaxRequestTarget target){
   target.prependJavaScript("window.location.href='"+urlFor(new YourPage())+'");
  } 
```

它将更改浏览器的 url 并因此重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:19:45.527

*AbstractSingleSelectChoice*组件（*DropDownChoice*的父级）不能使用*AjaxFormComponentUpdatingBehavior*。类 javadoc 将您*引向 AjaxFormChoiceComponentUpdatingBehavior*：

> 注意：此行为不适用于选项或组，为此使用 AjaxFormChoiceComponentUpdatingBehavior。

如果您使用 AjaxFormChoiceComponentUpdatingBehavior，您应该使用模型也是如此，因为它将执行字段转换、验证和推送到模型...请记住，您不关心值的 id，您可以简单地提供一个你以后永远不会读到的空模型。

最后，在 Wicket 中，您可以执行重定向，通过抛出*RedirectException （需要**Page*类和可选*PageParameters*的运行时异常）或需要字符串 url的*RedirectToUrlException来更新浏览器的 url：*

```
throw new RedirectToUrlException("http://www.supercoolwebsite.com/supercoolexternalpage"); 
```

对比

```
throw new RedirectException(SuperCoolWicketPage.class); 
```

# python - 连接一个销毁窗口的方法

> ID：11257971
> 
> 赞同：0
> 
> 时间：2012-06-29T07:45:30.093
> 
> 标签：python, gtk, pygtk

我有一个带有名为 openDialog 的 Gtk 按钮的主窗口。如果我单击此按钮，则会弹出另一个窗口（addName）。我想在我的主窗口文件 printHi. 当 addName 窗口被销毁时，我想运行这个 printHi 方法（在我的主窗口文件中）。

我试过这样的事情：

```
def on_addName_destroy():
    printHi() 
```

但它不起作用。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:38:17.697

您可以使用 的[`"delete-event"`](http://www.pygtk.org/docs/pygtk/class-gtkwidget.html#signal-gtkwidget--delete-event)信号`gtk.Widget`。也可以使用 的[`"destroy"`](http://www.pygtk.org/docs/pygtk/class-gtkobject.html#signal-gtkobject--destroy)信号`gtk.Object`。这是一个连接到两个信号的示例，尽管在您的情况下连接到其中任何一个就足够了。

```
#!/usr/bin/env python

import gtk

def on_addName_destroy(gtkobject, data=None):
    print "This is called later after delete-event callback has been called"
    print "Indication that the reference of this object should be destroyed"
    print "============================================"

def on_addName_delete(widget, event, data=None):
    print "This is called on delete request"
    print "Propagation of this event further can be controlled by return value"
    print "--------------------------------------------"
    return False

def show_popup(widget, data=None):
    dialog = gtk.Window(gtk.WINDOW_TOPLEVEL)
    dialog.set_size_request(100, 100)
    label = gtk.Label("Hello!")
    dialog.add(label)
    dialog.connect("delete-event", on_addName_delete)
    dialog.connect("destroy", on_addName_destroy)
    dialog.show_all()

window = gtk.Window(gtk.WINDOW_TOPLEVEL)
window.set_size_request(100, 100)
button = gtk.Button("Popup")
button.connect("clicked", show_popup)
window.add(button)
window.connect("destroy", lambda x: gtk.main_quit())
window.show_all()

gtk.main() 
```

希望这可以帮助！

# wpf - 绑定到 DataType 的 DataTemplate 的属性

> ID：11257972
> 
> 赞同：0
> 
> 时间：2012-06-29T07:45:30.910
> 
> 标签：wpf, xaml, binding, mvvm, mvvm-light

如何绑定到 DataTemplate 中的视图属性？这是我的代码。您可以在（网格第 2 列，第 0 行）中看到我尝试`MainWindow.xaml`从第 0 列 - 第 0 行绑定到 TreeView 中的选定项目，但这不起作用。

如果我将 TreeView 移动到`MainWindow.xaml`而不是使用 DataTemplate - 一切都按预期工作。

注意：存储库集合（`{Binding Repositories}`在 MainWindow.xaml 中的第 0 列第 0 行）是 RepositoryVM 实例的集合，其`Items`属性包含`ItemVM`实例的集合。此外，属性`Children`的`ItemVM`包含实例的集合`ItemVM`。

代码：

主窗口.xaml

```
 <Grid Margin="0">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="4" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>

        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <Border Grid.Column="0" Grid.Row="0" MinWidth="200" >
            <ContentControl Content="{Binding Repositories}"
                            ContentTemplate="{StaticResource WorkspaceTemplate}"/>

         </Border>

        <GridSplitter Grid.Column="1" 
                      ResizeDirection="Columns" 
                      ResizeBehavior="PreviousAndNext" 
                      Width="4"
                      Height="Auto"/>

        <Border Grid.Column="2" Grid.Row="0">
            <ContentControl Content="{Binding ElementName=repoTree, Path=SelectedItem}"/>
        </Border>

        <StatusBar Grid.ColumnSpan="3" Grid.Column="0" Grid.Row="1">
            <TextBlock Text="{Binding ElementName=repoTree, Path=SelectedItem}" />
        </StatusBar>
    </Grid> 
```

MainWindowResources.xaml

```
<DataTemplate DataType="{x:Type vm:ItemVM}">
    <vw:ItemView />
</DataTemplate>

<DataTemplate DataType="{x:Type vm:RepositoryVM}">
    <vw:RepositoryView />
</DataTemplate>

<DataTemplate x:Key="WorkspaceTemplate">
    <TabControl ItemsSource="{Binding}">
        <TabControl.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding DisplayName}" />
            </DataTemplate>
        </TabControl.ItemTemplate>
    </TabControl>
</DataTemplate> 
```

存储库视图.xaml

```
 <TreeView ItemsSource="{Binding Items}" x:Name="repoTree">
        <TreeView.ItemTemplate>
            <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                <TextBlock Text="{Binding Name}" />
            </HierarchicalDataTemplate>
        </TreeView.ItemTemplate>
    </TreeView> 
```

项目视图.xaml

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition />
        <ColumnDefinition />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition />
        <RowDefinition />
    </Grid.RowDefinitions>

    <TextBlock Grid.Column="0"
               Grid.Row="0" 
               Text="Name: " />
    <TextBlock Grid.Column="0"
               Grid.Row="1"
               Text="Type:" />
    <TextBox Grid.Column="1"
             Grid.Row="0" 
             Text="{Binding Name}"/>
    <TextBox Grid.Column="1"
             Grid.Row="1" />

</Grid> 
```

问题是 - 我怎样才能让我的绑定尝试`repoTree`工作并仍然使用 DataTemplate？

**更新：**

我在输出窗口中得到的错误是：

```
System.Windows.Data Error: 4 : Cannot find source for binding with reference 'ElementName=repoTree'. BindingExpression:Path=SelectedItem; DataItem=null; target element is 'ContentControl' (Name=''); target property is 'Content' (type 'Object') 
```

和状态栏一样，因为它是相同的绑定。

# iphone - 如何为多个值设置本地通知？

> ID：11257975
> 
> 赞同：0
> 
> 时间：2012-06-29T07:45:43.330
> 
> 标签：iphone, objective-c, ios, uilocalnotification

谁能告诉我如何在不同的时间为不同的值设置通知..

假设我有一个大小为 4 的数组，

例如数组 a={1,2,3};

我想要的是每小时后它会显示不同数组值的通知；

第一次显示“1”，一小时后显示“2”，第三小时显示“3”。

我实现的代码仅适用于一个值，如下所示...

```
NSDate *fireDate = [NSDate date];

NSArray *values= [NSArray arrayWithObjects:@"1", @"2", @"3", nil];

for (NSString *string in values ) 

{
    // create notification...

    localNotify.fireDate =[NSDate dateWithTimeIntervalSinceNow:[datePicker countDownDuration]];

    localNotify.alertBody = string;

    [[UIApplication sharedApplication] scheduleLocalNotification:localNotify];

    fireDate = [fireDate dateByAddingTimeInterval:67]; 

    [localNotify setApplicationIconBadgeNumber:[[UIApplication sharedApplication] applicationIconBadgeNumber]+1];

    NSLog(@"1");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T07:57:38.137

只需使用一个循环，例如：

```
NSDate *fireDate = [NSDate dateWithTimeIntervalSinceNow:[datePicker countDownDuration]];
for (NSString *string in values [NSArray arrayWithObjects:@"1", @"2", @"3", nil])
{
    // create notification...
    localNotify.fireDate = fireDate;
    localNotify.alertBody = string;
    [[UIApplication sharedApplication] scheduleLocalNotification:localNotify];
    fireDate = [fireDate dateByAddingTimeInterval:60 * 60]; // (1 hour)
} 
```

# java - 用于接收带有附件的电子邮件的 JAX-RS Web 服务

> ID：11257981
> 
> 赞同：1
> 
> 时间：2012-06-29T07:46:20.503
> 
> 标签：java, email, jakarta-mail, jax-rs, email-attachments

我正在创建一个可以接收电子邮件并将数据转发给客户端的 JAX-RS Web 服务。目前我可以处理简单的电子邮件。但我不知道如何为带有附件的电子邮件实现这一点。我知道它应该分两步完成。

1.  我的 JAX-RS 将附件从邮件服务器下载到我的服务器。
2.  将这些文件发送给客户端。

实施此的任何建议。

# php - 产品评论未显示在产品评论页面上

> ID：11257984
> 
> 赞同：3
> 
> 时间：2012-06-29T07:46:26.570
> 
> 标签：php, xml, magento

产品评论页面不显示产品评论 + 评论表格。它只发生在我的自定义主题中。如果我将主题更改为 Magento 的默认主题，则产品评论 + 评论表单将在产品评论页面上可见。

实际上，自定义主题中所做的更改是由另一个编码器完成的。所以，我不知道为什么会这样。

谁能指导我找到我应该在其中寻找解决方案的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T04:35:37.697

我已经解决了我的问题。

产品/view.phtml 丢失：

```
<?php echo $this->getChildHtml('product_additional_data') ?> 
```

问候！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T22:44:09.313

在产品页面详细信息中，您会看到“评价此产品”链接？

如果没有显示，请在 app/design/frontend/base/default/template/catalog/product 中的文件 view.phtml 中输入以下代码

```
<?php echo $this->getReviewsSummaryHtml($_product, 'short') ?> 
```

就我而言，我想在产品详细信息页面中仍然显示评论和评论表单，而不离开页面，然后在同一个文件 view.phtml 中添加以下代码

```
<?php echo $this->getChildHtml('product_review') ?> 
```

您也可以尝试在 app/design/frontend/base/default/template/review 中的 view.phtml 中添加上述代码

# django - Apache-Django WSGI 异常：ValueError：格式中的零长度字段名称

> ID：11257989
> 
> 赞同：1
> 
> 时间：2012-06-29T07:46:40.220
> 
> 标签：django, apache, mod-wsgi

我正在 Debian 系统上使用 apache2 + mod_wsgi 设置 django 服务器（1.4，python 2.7）。从 django 方面来看，一切正常，如果我运行 manage.py runserver，开发服务器会正​​确显示该站点，但是，当我尝试设置我的 apache 服务器以运行 WSGI 时，它无法显示 ValueError。

这是**mysite.wsgi**

```
ALLDIRS = ['/usr/local/lib/python2.7/site-packages']
# the above directory depends on the location of your python installation.
# if using virtualenv, it will need to match your projects locale.
import os
import sys
import site

os.environ['DJANGO_SETTINGS_MODULE'] = 'ggDatabase.settings'
prev_sys_path = list(sys.path)
sys.path.append("/usr/local/lib/python2.7")
path = "/home/acad/statsdb/src"
if path not in sys.path:
        sys.path.append(path)
        sys.path.append("/home/acad/statsdb/src/ggDatabase")
for directory in ALLDIRS:
        site.addsitedir(directory)
        new_sys_path = []
        for item in list(sys.path):
            if item not in prev_sys_path:
                new_sys_path.append(item)
                sys.path.remove(item)
                sys.path[:0] = new_sys_path

# change this depending on your project.

site.addsitedir("/home/acad/statsdb/src/ggDatabase/")

os.environ['PYTHON_EGG_CACHE'] = '/home/acad/.python-eggs'
os.environ['SETTINGS_MODULE'] = 'settings'
import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

这是**apache VirtualHost 配置**：

```
<VirtualHost 127.0.0.1:8000>
    ServerName mysite.com
    ServerAlias www.mysite.com
    <Directory /home/acad/statsdb/src/ggDatabase>
        Order deny,allow
        Allow from all
    </Directory>

    LogLevel warn
    CustomLog /var/log/apache2/mysite.com.access.log combined
    ErrorLog /var/log/apache2/mysite.com.error.log

    WSGIDaemonProcess mysite.com user=acad group=acad threads=25 python-path=/usr/local/lib/python2.7
    WSGIProcessGroup mysite.com
    WSGIScriptAlias / /home/acad/statsdb/src/ggDatabase/apache/mysite.wsgi

</VirtualHost> 
```

这是我在测试服务器上的确切配置，它在那里工作，但新服务器在尝试运行 wsgi 脚本时遇到问题：

```
[Fri Jun 29 09:38:14 2012] [error] [client 127.0.0.1] mod_wsgi (pid=26233): Target WSGI script '/home/acad/statsdb/src/ggDatabase/apache/mysite.wsgi' cannot be loaded as Python module.
[Fri Jun 29 09:38:14 2012] [error] [client 127.0.0.1] mod_wsgi (pid=26233): Exception occurred processing WSGI script '/home/acad/statsdb/src/ggDatabase/apache/mysite.wsgi'.
[Fri Jun 29 09:38:14 2012] [error] [client 127.0.0.1] Traceback (most recent call last):
[Fri Jun 29 09:38:14 2012] [error] [client 127.0.0.1]   File "/home/acad/statsdb/src/ggDatabase/apache/mysite.wsgi", line 31, in <module>
[Fri Jun 29 09:38:14 2012] [error] [client 127.0.0.1]     import django.core.handlers.wsgi
[Fri Jun 29 09:38:14 2012] [error] [client 127.0.0.1]   File "/usr/local/lib/python2.7/site-packages/django/core/handlers/wsgi.py", line 8, in <module>
[Fri Jun 29 09:38:14 2012] [error] [client 127.0.0.1]     from django import http
[Fri Jun 29 09:38:14 2012] [error] [client 127.0.0.1]   File "/usr/local/lib/python2.7/site-packages/django/http/__init__.py", line 11, in <module>
[Fri Jun 29 09:38:14 2012] [error] [client 127.0.0.1]     from urllib import urlencode, quote
 [Fri Jun 29 09:38:14 2012] [error] [client 127.0.0.1]   File "/usr/local/lib/python2.7/urllib.py", line 1228, in <module>
 [Fri Jun 29 09:38:14 2012] [error] [client 127.0.0.1]     _safe_map[c] = c if (i < 128 and c in always_safe) else '%{:02X}'.format(i)
 [Fri Jun 29 09:38:14 2012] [error] [client 127.0.0.1] ValueError: zero length field name in format 
```

这个错误太笼统了，我真的不知道可能出了什么问题。有任何想法吗？

提前致谢！

布鲁诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T20:03:47.063

解决了。如果有人有类似的错误，请确保打印 sys.version，您可能会发现（和我一样）wsgi 是在另一个已安装的 python 版本下配置的。

如果是这种情况，请使用 --with-python 选项重新安装 mod_wsgi。

# ios5 - 过滤实时摄像机源

> ID：11257991
> 
> 赞同：3
> 
> 时间：2012-06-29T07:46:52.300
> 
> 标签：ios5, uiimagepickercontroller, core-image, core-video

所以我一直在使用 UIImagepickercontroller 访问相机以进行照片和视频捕获，然后我想在这两个来源上应用过滤器，我成功过滤了令牌照片，但我无法找到其余的解决方案，我只需要是访问原始图像数据：相机正在显示的实时图像馈送，应用过滤器，然后显示过滤后的图像。任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T20:48:36.570

UIImagePickerController 不会为您提供对相机缓冲区的低级访问权限。

您应该设置一个 AVCaptureSession 并使用委托来处理 CMSampleBufferRef

看看 Apple 的 AVCam 和 SquareCam 演示，它们很好地介绍了视频捕捉。

[http://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html) http://developer.apple.com/library/ios/#samplecode/SquareCam/Introduction/Intro.html

一个更简单的解决方案是使用[https://github.com/BradLarson/GPUImage](https://github.com/BradLarson/GPUImage)

谢谢亚当

# arrays - drupal admin.inc，循环 list_modules 作为表单设置

> ID：11257992
> 
> 赞同：0
> 
> 时间：2012-06-29T07:47:01.790
> 
> 标签：arrays, forms, drupal, loops

我需要循环这个值

```
$blocks = array();

$blocks['list_modules'] 
```

有了这个：

```
$form['advanced']['custom_acc'] = array(
    '#type' => 'select',
    '#title' => t('module title'),
    '#options' => array(
      0 => t('No control'),
      1 => t('Controlled'),
      ),
  ); 
```

所以它应该变成*这样*

```
 while (list(, $value) = each($blocks)) {
        echo "

    $form['advanced']['custom_->blocks array value'] = array(
        '#type' => 'select',
        '#title' => t('->blocks array value'),
        '#options' => array(
          0 => t('No control'),
          1 => t('Controlled'),
          ),
      );
  ";
} 
```

但这当然行不通，有什么想法吗？我想我必须使用 foreach，我希望你能看到我想要实现的目标，

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T08:09:20.220

自己修好了:)

```
 $blocks = array();
$blocks = module_list();

foreach ($blocks as $key => $title) {

$form['advanced'][$title] = array(
    '#type' => 'select',
    '#title' => t($title),
    '#options' => array(
      0 => t('No control'),
      1 => t('Controlled'),
      ),
  );
} 
```

# php - 在php中获取url的最后一个参数

> ID：11257994
> 
> 赞同：4
> 
> 时间：2012-06-29T07:47:06.447
> 
> 标签：php, parameters

> **可能重复：**
> [提取 URI 上的最后一段](https://stackoverflow.com/questions/4928745/extracting-the-last-segment-on-an-uri)

我想获取 url 的最后一个参数，例如。

[http://www.youtube.com/embed/ADU0QnQ4eDs](http://www.youtube.com/embed/ADU0QnQ4eDs)

我有一个像上面一样的完整网址，我只想获取**PHP**的最后一个参数，即 **ADU0QnQ4eDs**

请帮忙

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-29T07:48:51.090

像这样的东西？

```
echo end(explode("/", $url)); 
```

如果启用了严格的错误报告，这将引发错误。为避免这种情况，请像这样拆分它们：

```
$parts = explode("/", $url);
echo end($parts); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-29T08:01:43.063

有一些功能。

```
$url      = 'http://www.youtube.com/embed/ADU0QnQ4eDs';
$url_path = parse_url($url, PHP_URL_PATH);
$basename = pathinfo($url_path, PATHINFO_BASENAME);

// $basename is "ADU0QnQ4eDs" 
```

请参阅[http://php.net/parse_url](http://php.net/parse_url)和[http://php.net/pathinfo](http://php.net/pathinfo)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T08:21:31.723

您在这里有一个可以轻松扫描的模式：

```
$interestedIn = sscanf($url, 'http://www.youtube.com/embed/%s'); 
```

不要让你的生活比它需要的更复杂。从技术上讲`substr`也可以，但是这个增加了更多的上下文。

# c# - LINQ to SQL“活动记录”和“工作单元”模式

> ID：11257999
> 
> 赞同：-3
> 
> 时间：2012-06-29T07:47:23.810
> 
> 标签：c#, .net, design-patterns, linq-to-sql, domain-driven-design

您能否列出使用 LINQ to SQL 演示以下两篇文章的参考文献？

1.  “活动记录”模式
2.  “工作单元”模式

当我搜索它们时，我得到的大多数示例都与 Asp.Net MVC 结合在一起。我不需要MVC。我正在寻找演示这两种模式的代码实现（在 LINQ to SQL 中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T08:27:14.183

我认为您将很难找到对这种想法的参考。

在某种程度上，LINQ to SQL 已经在幕后实现了这些模式。因此，我不确定将附加行为放在顶部会带来多少好处。

您是否有更多关于您要实现的目标的详细信息，这可能有助于获得更有用的答案？