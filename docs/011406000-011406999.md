# StackOverflow 问答 11406000-11406999

# c++ - 在一个字符串中定位多个类指针

> ID：11406001
> 
> 赞同：1
> 
> 时间：2012-07-10T02:56:52.513
> 
> 标签：c++

好的，这很难解释。我试图在这里写一个 100 行的解释，在我看到我失败后，我试图创建一个图像来更好地解释它，这也失败了[http://img208.imageshack.us/img208/7383/48821020.png](http://img208.imageshack.us/img208/7383/48821020.png)

这似乎是不可能的，因为它的复杂性极高。最原始的是，我需要为字符串的每个部分分配 ID。目前我可以为字符串示例分配 ID：

```
He: hey
She: Hi
He: What's up
She: Not much, you?
He: I'm fine, i'm selling a <Scale Armor> wanna buy it?
She: Next time maybe. 
```

我可以`What's up`使用该函数返回，`CString szText = GetTextAtLine(3);`因为`What's up`它位于聊天的第三行。每行都有一个Id，Id就是行号。每行还有一个指向名为 的类的指针`CItemElem`。CItemElem 包含有关项目的所有信息。

我使用以下函数定位指针`CItemElem *pItem = GetItemAtLineId(5)`，它将返回存储在行标识符`map<unsigned int,CItemElem*>mItemChat`所在位置`unsigned int`的指针。每次有人在聊天中交谈时，如果在聊天中输入了一个项目，则一个新元素会插入到 STL 映射中，并带有它的 line id。

```
CItemElem* CEditString::GetItemAtLineId( unsigned long uLine )
{

    for( map<unsigned int,CItemElem*>::iterator it = m_mItemChat.begin(); it != m_mItemChat.end(); ++it )
    {
        if( uLine == it->first )
            return( it->second );
    }

    return NULL;
} 
```

如您所见，我可以`CItemElem`通过行 ID 定位一个指针，但现在我的问题是我需要在字符串中定位多个项目，因为一次最多可以在一个句子中输入 3 个项目：

```
He: Hey guys i'm selling <Scale Boots> <Wooden Sword> <Water Helmet> cool items! 
```

目前，我一次只能在一个聊天语句中返回 1 个项目，因为我可以通过行 ID 找到该项目。过去几个小时我一直在敬酒，请启发我如何能够在同一个句子 ID 中返回多个项目。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T04:13:08.027

正如评论所建议的那样，使用向量`CItemElem*`作为映射中的值，或者编写另一个包装它的类以提高可读性，同时考虑到未来需要添加除`CItemElem`. 此外，如果字符串位置是查找项目所需的键，则`map`可以使用 a 代替 a `vector`。将跨越项目的每个字符串位置设置为指向该特定项目的指针，以便当您拥有鼠标悬停的字符串位置时可以轻松检索它。

```
class CLineElem
{

public:
void AddItemElem( CItemElem* pElem_i, int nStrPos_i );
CItemElem* GetItemElemAt( int nStrPos_i );
void RemoveAllItemElems();

private:
    map<unsigned int, CItemElem*> m_Elems;
}; 
```

然后`CLineElem*`在地图中使用`m_mItemChat`而不是`CItemElem*`

# mysql - 最小化 MySQL InnoDB 主键的脚本

> ID：11406004
> 
> 赞同：0
> 
> 时间：2012-07-10T02:57:42.200
> 
> 标签：mysql, innodb

我不知道用谷歌搜索什么来找到我想要的东西——我有一个从许多其他人那里导入的大型数据库，并且它的主键存在巨大差距。

数据库是 InnoDB，并且所有外键都设置正确（嗯......我希望，无论如何）。

有没有人知道一个脚本可以获取主键并将它们最小化，填补所有空白并更新 FK 条目？

（例如 PK 44、77、88 变为 1、2、3）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T03:27:04.767

我最终使用了类似的东西——Jonas T“插入一个新的 auto_increment 列并将其设置为主键。将一个新的外键列插入到子表中，并用它们的旧键值更新新的主键。”

在外键定义中，您有 ON DELETE，ON UPDATE。如果将 ON UPDATE 设置为 CASCADE（“ON UPDATE CASCADE”），主键上的 UPDATE 将“级联”到外键上的 UPDATE。

我的键都是 UNSIGNED int(11)，你必须使用你的，我使用 x 以便只需要更改表名才能在每个表上运行

简历是一张工作表，组织是我正在“最小化”的表

```
DROP TABLE cv;
CREATE TABLE cv (
  id int(11) UNSIGNED NOT NULL AUTO_INCREMENT, 
  cv int(11) UNSIGNED NOT NULL, 
  PRIMARY KEY(id)
);

INSERT INTO cv (cv)
  SELECT id FROM Organisation ORDER BY id;

UPDATE Organisation x
  LEFT JOIN cv ON cv.cv = x.id
  SET x.id = cv.id; 
```

# jquery - 使用 Jquery 在悬停时旋转

> ID：11406005
> 
> 赞同：1
> 
> 时间：2012-07-10T02:57:56.557
> 
> 标签：jquery, hover, rotation

我不知道如何设置只能在悬停时旋转的 jquery 旋转功能。

这是我正在使用的代码：

```
$('div.settingsButton').hover(function() {
    var angle = 0;
    setInterval(function() {
        angle += 4;
        $(this).rotate(angle);
    }, 50);
},
function() {
    var angle = 0;
    setInterval(function() {
        angle = 0;
        $(this).rotate(angle);
    }, 50);
}); 
```

旋转是在这里找到的插件： [http ://code.google.com/p/jqueryrotate/](http://code.google.com/p/jqueryrotate/)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-10T03:02:37.087

在您的计时器函数中，`this`不是 DOM 元素。您必须将其存储在变量中。此外，您应该[`clearInterval`](https://developer.mozilla.org/en/DOM/window.clearInterval)在您的`mouseout`功能中使用。

这是一些示例代码：

```
var timer;

$('div.settingsButton').hover(function() {

    var angle = 0,
        $this = $(this);

    timer = setInterval(function() {
        angle += 4;
        $this.rotate(angle);
    }, 50);
},
function() {

    timer && clearInterval(timer);
    $(this).rotate(0);
}); 
```

这是小提琴：http: [//jsfiddle.net/ptJuU/](http://jsfiddle.net/ptJuU/)

# algorithm - 3D 空间中的三角剖分

> ID：11406008
> 
> 赞同：1
> 
> 时间：2012-07-10T02:58:14.453
> 
> 标签：algorithm, triangulation

免责声明：这是上课的，但是我的想法很新鲜，并且非常感谢您朝正确的方向轻推。此外，这需要在原始 C 中实现，因此不能使用花哨的库。

我必须为潜艇编写一个搜索和救援模拟器，它必须找到一个随机放置在 MAX_XYZ (100000) 网格中的 3D 空间中的探针。我得到的唯一工具是“ping”，它将给出某个潜艇和探头之间距离的大小。目标是优化整个操作的成本，因此暴力尝试（例如查看每个坐标）将不起作用。因此，我在考虑三角剖分。

现在，这对我来说很有意义，放置三个潜艇，每个潜艇都使用他们的 ping 来获取它们与探头之间的距离。由于每个子之间的距离已知，因此很容易用它们构建四面体的底部，并且 ping 的结果将指向某个坐标，我遇到的问题是如何计算高程，或四面体的高度。

所以我的数据如下：

1.  潜艇之间的距离（矢量格式）
2.  每个潜艇之间的角度（很容易计算）
3.  每个子和探头之间的距离（从底部到峰值的 3 段）
4.  四面体的外 3 个表面中的每一个内的角度。

我试图找到与四面体顶点和每个顶点的相对角度的某种关系，但是我发现的所有东西都必须处理用等边三角形构建的四面体，这没有多大帮助。我的印象是这可以通过 trig 轻松解决，但要么我没有看到它，要么我需要更多的咖啡。

任何建议，将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T03:12:55.967

由于这是家庭作业，我会轻推一下。

通常这是[Multilateration](http://en.wikipedia.org/wiki/Multilateration)的主题。

> 多点定位是一种导航技术，它基于测量到在已知时间广播信号的已知位置的两个或多个站点的距离差异。与绝对距离或角度的测量不同，测量距离的差异会产生无限数量的满足测量的位置。当绘制这些可能的位置时，它们会形成一条双曲线。为了沿着该曲线定位准确位置，对不同的测站对进行第二次测量以产生第二条曲线，该曲线与第一条曲线相交。将两者进行比较时，会显示少量可能的位置，从而产生“修复”。

维基百科条目详细讨论了数学。

# matlab - matlab组合数组

> ID：11406017
> 
> 赞同：-3
> 
> 时间：2012-07-10T02:59:43.700
> 
> 标签：matlab

我在看一些 Matlab 代码（没有软件）。我想知道以下内容的作用：

```
d=[0 diff(fM)] 
```

其中 fM 本身就是一个数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T03:18:01.573

Octave 中的帮助文档`diff`（我认为 Matlab 等效的工作方式与任何其他 Matlab/octave 函数相同）

```
help diff
 `diff' is a function from the file /usr/share/octave/3.2.4/m/general/diff.m

 Function File:  diff (X, K, DIM)
 If X is a vector of length N, `diff (X)' is the vector of first
 differences  X(2) - X(1), ..., X(n) - X(n-1).

 If X is a matrix, `diff (X)' is the matrix of column differences
 along the first non-singleton dimension.

 The second argument is optional.  If supplied, `diff (X, K)',
 where K is a non-negative integer, returns the K-th differences.
 It is possible that K is larger than then first non-singleton
 dimension of the matrix.  In this case, `diff' continues to take
 the differences along the next non-singleton dimension.

 The dimension along which to take the difference can be explicitly
 stated with the optional variable DIM.  In this case the K-th
 order differences are calculated along this dimension.  In the
 case where K exceeds `size (X, DIM)' then an empty matrix is
 returned. 
```

所以基本上，`diff`返回一个带有`n - 1`条目的向量，发布的代码是创建一个新数组，在开头添加一个零，因此新的 diff 向量保持与输入向量相同的大小（也许结果向量将用于另一个例程假设输入向量长度进行计算，如果没有其余代码，这很困难），希望它有所帮助

# c++ - 需要 std::vector 优化

> ID：11406026
> 
> 赞同：0
> 
> 时间：2012-07-10T03:01:53.197
> 
> 标签：c++, std, c++builder

我写了一个使用`std::vector<double>`相当多的例程。它运行得相当慢，AQTime 似乎暗示我正在构建大量向量，但我不确定我为什么会这样。在某些情况下，我的示例运行迭代 10 次。每次迭代将 3 c 个约 400 个点的数组复制到向量中，并创建 3 个新的相同大小的向量用于输出。每个输出点可能是从 2 个输入向量中求和最多 20 个点的结果，最坏的情况是 10*400*3*2*20 = 480,000 次取消引用。令人难以置信的是，分析器表明某些 std:: 方法被调用了 4600 万次。我怀疑我做错了什么！

一些代码：

```
vector<double>gdbChannel::GetVector() {
   if (fHaveDoubleData & (fLength > 0)) {
      double * pD = getDoublePointer();
      vector<double>v(pD, pD + fLength);

      return v;
   } else {
      throw(Exception("attempt to retrieve vector on empty line")); ;
   }
}

void gdbChannel::SaveVector(GX_HANDLE _hLine, const vector<double> & V) {
   if (hLine != _hLine) {
      GetLine(_hLine, V.size(), true);
   }
   GX_DOUBLE * pData = getDoublePointer();
   memcpy(pData, &V[0], V.size()*sizeof(V[0]));
   ReplaceData();
}

///This routine gets called 10 times
 bool SpecRatio::DoWork(GX_HANDLE_PTR pLine) {
   if (!(hKin.GetLine(*pLine, true) && hUin.GetLine(*pLine, true) && hTHin.GetLine(*pLine, true))) {
      return true;
   }
   vector<double>vK = hKin.GetVector();
   vector<double>vU = hUin.GetVector();
   vector<double>vTh = hTHin.GetVector();

   if ((vK.size() == 0) || (vU.size() == 0) || (vTh.size() == 0)) {
      return true;
   }
   ///TODO: confirm all vectors the same lenghth
   len = vK.size();
   vUK.clear();  // these 3 vectors are declared as private class members
   vUTh.clear();
   vThK.clear();
   vUK.reserve(len);
   vUTh.reserve(len);
   vThK.reserve(len);

   // TODO: ensure everything is same fidincr, fidstart and length

   for (int i = 0; i < len; i++) {
      if (vK.at(i) < MinK) {
         vUK.push_back(rDUMMY);
         vUTh.push_back(rDUMMY);
         vThK.push_back(rDUMMY);
      } else {
         vUK.push_back(RatioPoint(vU, vK, i, UMin, KMin));
         vUTh.push_back(RatioPoint(vU, vTh, i, UMin, ThMin));
         vThK.push_back(RatioPoint(vTh, vK, i, ThMin, KMin));
      }

   }
   hUKout.setFidParams(hKin);
   hUKout.SaveVector(*pLine, vUK);
   hUTHout.setFidParams(hKin);
   hUTHout.SaveVector(*pLine, vUTh);
   hTHKout.setFidParams(hKin);
   hTHKout.SaveVector(*pLine, vThK);
   return TestError();
}

double SpecRatio::VValue(vector<double>V, int Index) {
   double result;
   if ((Index < 0) || (Index >= len)) {
      result = 0;

   } else {
      try {
         result = V.at(Index);
         if (OasisUtils::isDummy(result)) {
            result = 0;
         }
      }
      catch (out_of_range) {
         result = 0;
      }
   }
   return result;
}

double SpecRatio::RatioPoint(vector<double>Num, vector<double>Denom, int Index, double NumMin, double DenomMin) {
   double num = VValue(Num, Index);
   double denom = VValue(Denom, Index);
   int s = 0;
   // Search equalled 10 in this case
   while (((num < NumMin) || (denom < DenomMin)) && (s < Search)) {
      num += VValue(Num, Index - s) + VValue(Num, Index + s);
      denom += VValue(Denom, Index - s) + VValue(Denom, Index + s);
      s++;
   }
   if ((num < NumMin) || (denom < DenomMin)) {
      return rDUMMY;
   } else {
      return num / denom;
   }

} 
```

AQTime 的主要违规者是：

> std::_Uninit_copy >、double *、std::allocator > 3.65 秒和 115731 次命中
> 
> std::_Construct 1.69 秒和 46450637 次点击
> 
> std::_Vector_const_iterator >::operator !=1.66 秒和 46566395 次点击等等...

`std::allocator<double>::construct`,
`operator new`,
`std::_Vector_const_iterator<double, std::allocator<double> >::operator ++`,`std::_Vector_const_iterator<double, std::allocator<double> >::operator *` `std::_Vector_const_iterator<double, std::allocator<double> >::operator ==`

每个都被调用超过 4600 万次。

我显然做错了导致所有这些对象被创建。谁能看到我的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T03:21:34.313

这是因为您正在按值传递函数参数。每次`std::vector`按值传递 a 时，都必须制作向量的完整副本。

更改这些：

```
double SpecRatio::VValue(vector<double>V, int Index) {

double SpecRatio::RatioPoint(vector<double>Num, vector<double>Denom... 
```

至：

```
double SpecRatio::VValue(const vector<double> &V, int Index)

double SpecRatio::RatioPoint(const vector<double> &Num, const vector<double> &Denom... 
```

因为对于您的使用，您实际上不需要制作这些向量的单独副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T03:20:03.253

由于您传递和返回它们的方式（“按值”），您在几个地方复制向量的效率很低（“深度”）。例如，您的`VValue()`方法正在复制其向量参数，就像您的`RatioPoint()`方法一样，其中两个向量参数都（不必要地）被完整复制。相反，您可能希望将向量参数作为 a 传递`const vector<double>&`（即“通过引用”，就像您在 中所做的那样`SaveVector()`）。

此外，您的 GetVector() 方法可能会返回向量的副本，尽管如果编译器对其进行优化，这可能会避免（正如 walrii 在回复我最初的错误帖子时指出的那样）。如果您使用的是 C++-11，则可以返回一个可移动的（正如 walrii 也指出的那样）。如果没有这些，解决方案会有点棘手——您可能会考虑在堆上分配向量并返回一个共享或自动指针指向它。

# ruby-on-rails - 有多个编辑表单。需要修改更新方法和路由

> ID：11406037
> 
> 赞同：0
> 
> 时间：2012-07-10T03:03:37.960
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

我有一个包含姓名、电子邮件、密码和简历的用户模型。

我想要两种编辑表单。一个用于编辑电子邮件、简历，另一个用于密码。

所以我的问题实际上是两个部分。

A）如果`update_attributes`更新方法失败，如何呈现正确的页面，而不是仅仅`edit`. 这是我目前的更新方法。

```
def update
  if @user.update_attributes(params[:user])
    flash[:success] = "Profile updated"
    sign_in @user
    redirect_to @user
  else
    render 'edit'
  end
end 
```

B）我如何拥有类似于`/users/1/edit`change_password 方法的路线？所以我想要类似的东西`/users/1/change_password`。

* * *

B)`match '/users/:id/change_password', to: 'users#change_password'`完成了这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T03:57:11.893

`redirect_to edit_user_path(@user)`

应该管用。

另外，我会将您的 change_password 路由更改为：

```
resource :users do
  member do
    put 'change_password'
  end
end 
```

这是一种更符合 Rails 的做事方式。然后，你可以做

`redirect_to change_password_user_path(@user)`

# ruby - 如何使用鞋子自动制作流的宽度？

> ID：11406038
> 
> 赞同：1
> 
> 时间：2012-07-10T03:03:40.043
> 
> 标签：ruby, shoes

流或堆栈的宽度必须是数字，但如果我不知道流将有多宽，则流将变得尽可能宽。 如何使用Shoes（Ruby GUI Toolkit）自动使其与**子元素一样宽？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T03:06:16.947

这是动态内存分配。

如果没有更多关于您要达到的语言的信息，很难进一步帮助您。

@编辑

这是一本很好的读物…… [http://merbist.com/2010/07/29/object-allocation-why-you-should-care/](http://merbist.com/2010/07/29/object-allocation-why-you-should-care/) 这篇文章是 ruby​​ 中内存管理的速成课程。

# ios - 滑动uiview保持动画

> ID：11406043
> 
> 赞同：0
> 
> 时间：2012-07-10T03:04:29.317
> 
> 标签：ios, animation, uiview, cgrect

我想我将从代码开始......

```
- (void) mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view {
  DLog(@"annotation: %@", [[view annotation] title]);
  self.selectedAnnotation = [view annotation];
 [self.directionsView setHidden:NO];
 [UIView beginAnimations:@"slideup" context:NULL];
 self.directionsView.frame = CGRectOffset(self.directionsView.frame, 0, -self.directionsView.frame.size.height);
 [UIView commitAnimations];
} 
```

我有一张地图，用户可以在其中点击业务，然后从底部向上滑动 uiview“directionsView”。当不止一项业务被挖掘时，就会出现问题。视图不断攀升 49 像素。我如何防止这种情况发生？

我有另一种方法来定义取消选择业务时会发生什么，我尝试使用相同的动画方法，只是反向（使用 setHidden：YES），但没有运气:)

请帮忙漂亮吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:06:45.607

每次调用此方法时，都会从 self.directionView 的原点的 Y 分量中减去：

```
self.directionsView.frame = CGRectOffset(self.directionsView.frame, 0, -self.directionsView.frame.size.height); 
```

因此，如果您在没有其他任何东西重置视图位置的情况下点击多次，它将继续在其父视图中向上滑动（可能从屏幕顶部滑出，当我不小心这样做时，我总是觉得很有趣）。

最简单的解决方案是定义两个 CGRect，并根据您想要在屏幕上还是在屏幕外显示视图，直接将一个或另一个分配给 self.directionView.frame。您可以连续多次调用这些，并且效果不会像您的示例中那样累积。

```
CGRect onScreen = CGRectMake(x, y, l, w); //Fill in actual values
CGRect offScreen = CGRectMake(x, larger_value_of_y, l, w); //Again, use actual values 
```

您还可以将框架设置为其正常的“屏幕上”值，并调整 directionView 的 transform 属性，该属性也是可动画的。同样，您可以多次应用这些中的任何一个，并且效果不是累积的。

```
//on screen
self.directionsView.transform = CGAffineTransformIdentity; //"identity" meaning no change to position
//off screen
self.directionsView.transform = CGAffineTransformMakeTranslation(0, self.directionsView.bounds.size.height); //Shifts 0 pts right, and height pts down 
```

注意上面代码中“边界”的使用。当您更改变换时，框架变得未定义，因此当变换不是身份时，如果您尝试设置框架（或基于当前框架的任何其他计算），视图可能会意外移动。

（免责声明：从内存中键入的代码——未在 XCode 中测试。）

# javascript - 在Javascript中快速生成一定大小的垃圾数据

> ID：11406046
> 
> 赞同：1
> 
> 时间：2012-07-10T03:04:47.553
> 
> 标签：javascript, dynamically-generated

我正在用 Javascript 编写上传速度测试。我正在使用 Jquery（和 Ajax）将数据块发送到服务器，以便计算获得响应所需的时间。从理论上讲，这应该可以估计上传速度。

当然，为了满足用户的不同带宽，我会依次上传越来越多的垃圾数据，直到达到阈值持续时间。目前我使用以下函数生成垃圾数据，但是，生成兆字节数据时速度很慢。

```
function generate_random_data(size){
    var chars = "abcdefghijklmnopqrstuvwxyz";
    var random_data = "";
    for (var i = 0; i < size; i++){
        var random_num = Math.floor(Math.random() * char.length);
        random_data = random_data + chars.substring(random_num,random_num+1);
    }
    return random_data;
} 
```

实际上，我所做的只是生成一大块字节以发送到服务器，但是，这是我在 Javascript 中找出方法的唯一方法。

任何帮助，将不胜感激。

更新：我已经重新编写了我的代码，使其只是一个 10 字节字符串的重复，而不是一个完全随机的字符串。

```
function generate_random_data(attempt){
    var table = {
        '1':10, //10kb  
        '2':12, //40kb
        '3':14, //160kb
        '4':16, //640kb
        '5':18, //2.5Mb
        '6':20 //10Mb
    }
    var random_data = "abcdefghij";  //10 bytes
    for (i = 0; i < table[attempt]; i++){
        random_data += random_data;
    }
    return random_data; 
```

现在该函数接受尝试次数的参数（所以我的脚本第一次尝试上传它会做最小的文件，然后是下一个最小的文件，依此类推）。然后它得到一个 10 字节的字符串，然后不断地将它添加到自身，直到达到所需的长度。

这是最好的方法吗？有没有更好的办法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2018-08-26T08:59:54.427

如果您想生成要上传的数据，并且不关心它是*随机*的，那么有一种方法可以使用`Blob`对象来完成

```
// Size should be given in 'bytes'
function generate_random_data(size) {
    return new Blob([new ArrayBuffer(size)], {type: 'application/octet-stream'});
}; 
```

我最近用它来测试我的上传速度`http://httpbin.org/post`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-02-01T19:34:12.027

如果您正在寻找类似于[Jose Arandi 的答案，](https://stackoverflow.com/a/52024734/10380981)但对于 NodeJS，您可以使用[Buffer](https://nodejs.org/api/buffer.html#buffer_buffer)。

`Buffer.alloc(10)`给你 10 个零字节。`Buffer.allocUnsafe(10)`不初始化缓冲区，给你 10 个“随机”字节。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T03:35:12.107

只是一个评论......</p>

以下至少在 IE 中要快得多：

```
function generate_random_data1(size){
    var chars = 'abcdefghijklmnopqrstuvwxyz'.split('');
    var len = chars.length;
    var random_data = [];

    while (size--) {
        random_data.push(chars[Math.random()*len | 0]);
    }

    return random_data.join('');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T03:22:26.377

这里只是一个小想法，我们为什么要如此努力地使数据应该是随机的。您可以尝试发送大块的字符。说如果大小是 1000。你可以发送 'a...z' 37 次。这将加快数据的生成。最后你需要发送一些数据来检查速度而不是生成随机数据。您还可以考虑在字符中包含大写字母和数字，以进一步提高生成此数据的速度。

通过这样做，您将能够跳过所有在随机数据中查找和附加字符的调用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T03:11:38.587

您可以在页面上有一个变量，其中包含 1-100k 的硬编码数据，然后可能将其中一些块连接在一起。字符串连接可能会非常慢，因此您需要对其进行测试以查看它是否执行正常。

# ios - setZoomScale 不适用于 UIWebView

> ID：11406047
> 
> 赞同：0
> 
> 时间：2012-07-10T03:04:48.863
> 
> 标签：ios, uiwebview

我有一个图像，我在 web 视图中以 html 显示，我将 scalesPageToFit 设置为 yes，因为图像非常大.. 但这使图像太小，然后我尝试 setZoomScale 但这没有任何作用..

我希望有人可以帮我设置它，以便 UIWebView 内的图像更接近手机的宽度。

任何帮助将不胜感激这是我的代码。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    waffleSwapperWebView.scalesPageToFit = YES;
    waffleSwapperWebView.backgroundColor = [UIColor clearColor];
    waffleSwapperWebView.opaque = FALSE;

    NSString *path = [[NSBundle mainBundle] pathForResource:@"waffle-swapper" ofType:@"png"];
    [waffleSwapperWebView loadHTMLString:[NSString stringWithFormat:@"<html><body bgcolor=""white"" width=460><img src=\"file://%@\"></body></html>",path] baseURL:nil];

    [waffleSwapperWebView.scrollView setZoomScale:5.0];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:44:40.547

它适用于 ViewDidAppear：

```
- (void)viewDidAppear:(BOOL)animated
{
    [webView.scrollView setZoomScale:1.2 animated:TRUE];
    CGPoint top = webView.scrollView.contentOffset;
    top.y = 0;
    [webView.scrollView setContentOffset:top animated:FALSE];
} 
```

尝试在 webViewDidFinishLoad 中执行此操作，但由于某种原因尚未显示。

# xcode - 如何在不授予命令行访问权限的情况下授予朋友访问 git 存储库的权限？

> ID：11406048
> 
> 赞同：4
> 
> 时间：2012-07-10T03:04:52.890
> 
> 标签：xcode, macos, git, ssh

我的服务器上运行了一些 git 存储库，我想给一个朋友读/写访问权限。这很简单：我将他添加为用户，授予他 SSH 访问权限，并更改对存储库文件夹的权限。

一切正常；我可以**使用 Xcode**克隆 git 存储库并进行更改（`ssh://www.example.com/repo.git`）。但是，**我不希望他有命令行访问权限**。如果我没记错的话，Github 并没有给那些使用 SSH 的人提供命令行访问权限。

我正在使用雪豹服务器。这更像是服务器问题还是 git 问题？你知道从哪里开始吗？将用户设置`Login Shell`为`none`（而不是`/bin/bash`）会切断对所有内容的访问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T03:12:55.347

使用 Git 服务器软件是一个好主意，但如果您宁愿坚持使用普通 Git，则没有必要。

`git-shell`Git 附带的工具可以帮助您防止用户获得 shell 访问权限。简而言之，您可以将其设置为用户的登录 shell（替换 bash、csh 或类似的）。他们将能够运行标准的 Git 命令，但不能运行其他命令。

有关说明，请参阅在 Pro Git 中[设置服务器。](http://git-scm.com/book/en/Git-on-the-Server-Setting-Up-the-Server)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T03:10:54.363

尝试使用像 gitolite 这样的 git 服务器软件，它将提供对 git repo 的访问，但不提供 shell

# php - 如何动态加载已解析为 PHP 的 Javascript？

> ID：11406049
> 
> 赞同：2
> 
> 时间：2012-07-10T03:05:42.487
> 
> 标签：php, javascript, jquery

我希望动态加载已解析为 PHP 的 javascript，以便能够将 PHP 变量传递给 javascript，然后将此文件加载到主 PHP 文档中。我有一个名为 myscript.js.php 的文档，其中包含 javascript 和 PHP。我尝试使用 jQuery 的 getScript 将它加载到主文档中，如下所示：

```
$.getScript("myscript.js.php", function() {
                alert('loaded script.');
            }); 
```

此尝试失败 - 我假设是因为文件上的 .php 扩展名。反正有动态加载包含 PHP 的 javascript 吗？我有一些会话变量，我希望通过 javascript 传递这些变量，这些变量会经常更新，从而需要重新加载 javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T03:09:11.097

您将不得不使用 AJAX 来执行此操作。

您可以将 php 脚本输出的数据存储到数组中，在 php 中内爆数组，并回显内爆数组。

然后，您可以获取 ajax 函数返回的字符串并将其分解回一个数组，您将拥有您试图保存到变量的值。

您可以使用 jQuery 完成此操作：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T03:11:33.870

像这样动态创建 javascript 可能并不理想。您最好将原始数据从 php 打印到变量中，然后您的脚本可以使用这些数据：

```
<?php

$config = array(
  // values
);

?>

<script>var config = <?php json_encode($config); ?>;</script>
<script src="myscript.js"></script> <!-- uses config data --> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T03:20:20.537

您的代码看起来语法正确。你检查了ajax调用的状态吗？您必须在返回的 php 页面中设置一个标题，

```
header('Content-Type: text/javascript; charset=UTF-8'); 
```

因为否则 jquery 将抛出一个错误，因为它期望返回一个脚本文件并且标头与它不匹配。

看看这个.. [http://api.jquery.com/jQuery.getScript/#comment-104973932](http://api.jquery.com/jQuery.getScript/#comment-104973932)

# php - 与用户一起发送我自己的 $_POST 数据

> ID：11406050
> 
> 赞同：2
> 
> 时间：2012-07-10T03:06:07.073
> 
> 标签：php, mysql, html, forms, post

我有一个基本的 html 表单。当用户单击“提交”时，输入数据自然存储在 $_POST 数组中。

如果我想在 $_POST 中包含一些我自己的预定义数据怎么办？

例如，用户正在更新他们帖子的标题，当他们点击“提交”时，我也想发送他们的旧标题。

有任何想法吗？对不起，如果我不清楚...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T03:08:53.777

为什么要旧标题，不应该将旧标题保存在数据库中或其他什么地方吗？

但是对于您的问题，您可以添加一个隐藏字段。

```
<input type="hidden" name="old_title" value="<?php echo $old_value ?>" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T03:08:09.757

为什么不将其作为“隐藏”输入值发送？

```
<input type="hidden" name="old_value" value="something"> 
```

这样，在用户端看不到它，但它作为数据在他们端不可更改（除非他们打开像 Console 或 FF 的开发人员工具这样的 DOM 检查器）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T03:10:16.787

您可以在表单中使用隐藏字段。用户不会看到它，但它的内容会被提交。

```
<input type="hidden" name="h"/> 
```

您可以使用 jQuery 的 javascript 存储旧标题

```
$("idOfThefield").val(oldtitle); 
```

希望这可以帮助！

# javascript - 在 javascript 中从 wordpress 数据库中检索值

> ID：11406058
> 
> 赞同：2
> 
> 时间：2012-07-10T03:07:31.363
> 
> 标签：javascript, jquery, database, wordpress

所以我在我的数据库中创建了一个名为inspirationWall 的表，其id 和Visit_Count INT。并添加了 id=1 和 Visit_Count = 2 的行。

我试图在 wordpress 中检索 Visit_Count 中的值并在警报中显示该值以进行测试。

我一直在关注 word press codex 并使用了这个例子

```
<?php $user_count = $wpdb->get_var( $wpdb->prepare( "SELECT COUNT(*) FROM $wpdb->users;" ) ); echo "<p>User count is {$user_count}</p>";?> 
```

所以通过查看我的代码

```
var $inspirationWall_Count = 0;

$inspirationWall_Count = $wpdb->get_var( $wpdb->prepare( "SELECT Visit_Count FROM $wpdb-    >inspirationWall WHERE id=1;" ) );

alert($inspirationWall_Count); 
```

它似乎没有检索该值并将其保存到 $inspirationWall_Count 中。

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T03:16:18.517

你不能用 php 发出警报，你必须用 JS 来做，

你也不需要再次定义`var $inspirationWall_Count = 0;`它不能与 php 一起使用，

所以在这里你必须做的，

```
$inspirationWall_Count = 0;
$inspirationWall_Count = $wpdb->get_var( $wpdb->prepare( "SELECT Visit_Count FROM $wpdb-    >inspirationWall WHERE id=1;" ) );
echo '<script>alert('.$inspirationWall_Count.')</script>'; 
```

# iphone - 分数被覆盖 cocos2d

> ID：11406059
> 
> 赞同：0
> 
> 时间：2012-07-10T03:07:34.917
> 
> 标签：iphone, objective-c, xcode, ios5, cocos2d-iphone

高分根本没有留在屏幕上，所以最大的问题是我该怎么做，所以分数会一直留在屏幕上，直到被超过，并且会像高分一样更新分数。

几天前我听取了另一位用户的建议，这看起来很简单，但是当我尝试这样做时却没有成功。我尝试了几乎所有不同类型的组合，没有豆子。所以看起来我需要有人帮助指出错误。

在里面

```
 _oldScore = [[NSUserDefaults standardUserDefaults] integerForKey:@"score"]; 
 CGSize winSize = [[CCDirector sharedDirector] winSize];
    self.scoreLabel = [CCLabelTTF labelWithString:@"" dimensions:CGSizeMake(100, 50) alignment:UITextAlignmentRight fontName:@"Marker Felt" fontSize:32];
    _scoreLabel.position = ccp(winSize.width - _scoreLabel.contentSize.width, _scoreLabel.contentSize.height);
    _scoreLabel.color = ccc3(255,0,0);
    [self addChild:_scoreLabel z:1]; 
```

执行

```
 if (_score > _oldScore) {
      [[NSUserDefaults standardUserDefaults] setInteger:_score forKey:@"score"];          
       [_scoreLabel setString:[NSString stringWithFormat:@"score%d", _score]]; 
```

到目前为止，它运行良好，除了 oldscore 之外的所有内容都不会留在屏幕上。我想让玩家知道高分是多少。用户说使用不同的密钥创建一个新的 nsuserdefaults 来存储旧分数。这样，得分最高的旧分数将保留在屏幕上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:17:52.943

// 优先保存分数

```
int highScore  = yourGameScore;
[[NSUserDefaults standardUserDefaults] setObject:[NSNumber numberWithInt:highScore] forKey:@"score"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

// 从首选项中获取保存的值

```
highScore = [[[NSUserDefaults standardUserDefaults] objectForKey:@"score"] intValue ]; 
```

//给你的cocos2d标签设置分数值

```
[_scoreLabel setString:[NSString stringWithFormat:@"%d", _oldScore]]; 
```

# java - LWJGL 中的鼠标和纹理坐标系不匹配

> ID：11406064
> 
> 赞同：0
> 
> 时间：2012-07-10T03:07:58.600
> 
> 标签：java, lwjgl

除了说我的 LWJGL 似乎对鼠标和绘制纹理有不同的坐标系之外，我真的不确定如何对此进行扩展。似乎纹理具有将 (0, 0) 放在左上角的通常 Java2D 方式，而鼠标则采用更明智的方式将原点放在左下角。我已经检查了我的代码一堆，但我没有看到任何修改我读取它们的位置和我使用它们的位置之间的值。它让我陷入了一个循环，我无法弄清楚。

我会把所有涉及到鼠标输入和纹理绘制的代码贴出来给大家看看。

```
private static void pollHelpers()
{
    while(Mouse.next())
    {
       InputHelper.acceptMouseInput(Mouse.getEventButton(),
       Mouse.getEventX(), Mouse.getEventY());
    }
    while (Keyboard.next()) {           
       if (Keyboard.getEventKeyState()) {
           InputHelper.acceptKeyboardInput(Keyboard.getEventKey(), true);
       } else {
           InputHelper.acceptKeyboardInput(Keyboard.getEventKey(), false);
       }  
    } 
}

public static void acceptMouseInput(int mouseButton, int x, int y)
{
    for(InputHelper ie: InputHelper.instances)
    {
        if(ie.checkRectangle(x, y))
        {
            ie.sendMouseInputToParent(mouseButton);
        }
    }
}

private void sendMouseInputToParent(int mouseButton)
{
    parent.onClick(mouseButton);
}

public boolean checkRectangle(int x, int y)
{
    //y = InputManager.HEIGHT - y; See below for explanation

    return x > parent.getX() && x < parent.getX() + parent.getWidth() && 
    y > parent.getY() && y < parent.getY() + parent.getHeight();
} 
```

我把这行代码放进去是因为它暂时解决了坐标系问题。但是，我希望我的代码尽可能独立，因此我希望尽可能多地消除对其他类的依赖。

这些是触摸鼠标输入的唯一方法，据我所知，它们都没有改变任何东西，所以这里一切都很好。现在对于纹理方法：

```
public void draw()
{   
    if(!clicked || deactivatedImage == null)
    {
        activatedImage.bind();

        glBegin(GL_QUADS);
        {
            DrawHelper.drawGLQuad(activatedImage, x, y, width, height);
        }
        glEnd();
    } else {
        deactivatedImage.bind();

        glBegin(GL_QUADS);
        {
            DrawHelper.drawGLQuad(deactivatedImage, x, y, width, 
                                    height);
        }
        glEnd();
    }

}

public static void drawGLQuad(Texture texture, float x, float y, float width, float 
            height)
{
    glTexCoord2f(x, y);
    glVertex2f(x, y);

    glTexCoord2f(x, y + texture.getHeight());
    glVertex2f(x, y + height);

    glTexCoord2f(x + texture.getWidth(), y + texture.getHeight());
    glVertex2f(x + width, y +height);

    glTexCoord2f(x + texture.getWidth(), y);
    glVertex2f(x + width, y);
} 
```

老实说，我对这种方法中真正发生的事情一无所知，但我能够自己将它组合在一起并让它发挥作用。我的猜测是这就是问题所在。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T03:11:59.290

老实说，它看起来是对的。纹理和鼠标输入都从左上角的 (0,0) 开始，我对此 100% 确定。您是否尝试过记录鼠标 x 和 y？

# php - PHP JQuery：在哪里指定上传目标文件夹

> ID：11406069
> 
> 赞同：2
> 
> 时间：2012-07-10T03:08:31.350
> 
> 标签：php, jquery, uploadify

我有一个正在运行的[uploadify](http://www.uploadify.com/documentation/)脚本，基本设置。当我将图像的目标文件夹硬编码到其中时工作正常`uploadify.php`- 现在我想让该文件夹动态化。我该怎么做呢？

我有一个 PHP 变量`$uploadify_path`，其中包含我想要的文件夹的路径。我已经在uploadify.php 和check_exists.php 中切换了我的硬编码`$targetPath = path/to/directory`，`$targetPath = $uploadify_path`但它不起作用。文件上传动画运行，表示已完成，但目录仍为空。该文件也没有隐藏在其他地方。

我看到 Javascript 中有一个选项可以指定一个文件夹。我也试过这个，但没有用。

如果有人可以教我如何将这个可变目标传递给uploadify，我将不胜感激。

我包括我当前的检查代码（基本上是默认的）：

**Javascript**

```
<script type="text/javascript">
$(function() {

    $('#file_upload').uploadify({
        'swf'      : 'uploadify/uploadify.swf',
        'uploader' : 'uploadify/uploadify.php',
        // Put your options here
    });
});
</script> 
```

**上传.php**

```
$targetPath = $_SERVER['DOCUMENT_ROOT'] . $uploadify_path; // Relative to the root

if (!empty($_FILES)) {
    $tempFile = $_FILES['Filedata']['tmp_name'];
    $targetFile = $targetPath . $_FILES['Filedata']['name'];

    // Validate the file type
    $fileTypes = array('jpg','jpeg','gif','png'); // File extensions
    $fileParts = pathinfo($_FILES['Filedata']['name']);

    if (in_array($fileParts['extension'],$fileTypes)) {
        move_uploaded_file($tempFile,$targetFile);
        echo '1';
    } else {
        echo 'Invalid file type.';
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T03:13:27.527

**JS**

```
<script type="text/javascript">
    $(function() {

        $('#file_upload').uploadify({
            'formData' : {'path':'/file/path'},
            'swf'      : 'uploadify/uploadify.swf',
            'uploader' : 'uploadify/uploadify.php'
            // Put your options here
        });
    });
</script> 
```

**PHP**

```
$targetPath = $_SERVER['DOCUMENT_ROOT'] . $_POST['path']; // Relative to the root

if (!empty($_FILES)) {
    $tempFile = $_FILES['Filedata']['tmp_name'];
    $targetFile = $targetPath . $_FILES['Filedata']['name'];

    // Validate the file type
    $fileTypes = array('jpg','jpeg','gif','png'); // File extensions
    $fileParts = pathinfo($_FILES['Filedata']['name']);

    if (in_array($fileParts['extension'],$fileTypes)) {
        move_uploaded_file($tempFile,$targetFile);
        echo '1';
    } else {
        echo 'Invalid file type.';
    }
} 
```

# javascript - 如何取消绑定和重新绑定 on() 点击动画？

> ID：11406074
> 
> 赞同：2
> 
> 时间：2012-07-10T03:09:30.250
> 
> 标签：javascript, jquery, html

我有一个执行简单动画的递归循环。这些动画由 on page load & onclick of controls 控制`.carousel_item`。

**[现场样品 JSFIDDLES 单击此处](http://jsfiddle.net/VFqTW/27/)** *为简单起见而精简*

**问题：** 当重复点击同一个控件时，动画会一遍又一遍地触发。我希望动画每次只触发一次`carousel_item`。

**更新**我希望动画每次只触发一次`carousel_item`。并在单击以下内容时重置`carousel_item`。

示例：反复按 1 将反复触发动画。我希望第一次按下触发动画一次。Next User mashes 2 这将重新触发动画一次而不是重复。用户仍然可以再次按下 1，因为我只想防止糖化

从逻辑上讲，我看到单击解除绑定本身并在单击另一个时重新绑定，`.carousel_item` 这是我的逻辑；但是，我确信有更好的解决方案

```
var carItems = $('.carousel_item');
var sideitems = $('.side_item');
var x = false;
$(sideitems).hide();
fadeItem();

$(carItems).on({
    click: function () {

        $(sideitems).stop(true, true).animate({
            right: '4.5em'
        });
        $(sideitems).hide();

        fadeItem();

    },
    mouseenter: function () {

    },
    mouseleave: function () {

    }
});

function fadeItem() {
    $('.side_ul li:hidden:first').fadeIn(fadeItem).animate({
        right: '-4.5em'
    }, 150, function () {});;
}​ 
```

**HTML**

```
<div id="carousel" class="flexslider">
      <ul class="slides">
        <li class="carousel_item"> <img src="asset/img/1600/slide1_1600.jpg" /> </li>
        <li class="carousel_item"> <img src="asset/img/1600/slide2_1600.jpg" /> </li>
        <li class="carousel_item"> <img src="asset/img/1600/slide1_1600.jpg" /> </li>
        <li class="carousel_item"> <img src="asset/img/1600/slide2_1600.jpg" /> </li>
        <!-- items mirrored twice, total of 12 -->
      </ul>
    </div>

      <nav class="side_nav">
    <ul class="side_ul">
        <li class="side_item home"><div class="text_links"><a href="#">home</a></div></li>
        <li class="side_item document"><div class="text_links"><a href="#">docs</a></div></li>
        <li class="side_item video"><div class="text_links"><a href="#">video</a></div></li>        
        <li class="side_item programming"><div class="text_links"><a href="#">web</a></div></li>

    </ul>
  </nav> 
```

![在此处输入图像描述](../Images/21c01a5ad165e82e0a94cd0ec1eca3f2.png) **[现场样品 JSFIDDLES 点击这里](http://jsfiddle.net/VFqTW/27/)**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T03:21:25.847

**工作演示** [http://jsfiddle.net/ScbDG/2/](http://jsfiddle.net/ScbDG/2/)

您可以`.off`在点击事件后使用；[http://api.jquery.com/off/](http://api.jquery.com/off/) &`$(this)`将确保将其设置`off`为该特定对象。

好读：[在 jQuery 中删除事件处理程序的最佳方法？](https://stackoverflow.com/questions/209029/best-way-to-remove-an-event-handler-in-jquery)

希望这可以帮助，`:)`

**代码**

```
$(carItems).on({
     click: function () {

         $(sideitems).stop(true, true).animate({
             right: '4.5em'
         });
         $(sideitems).hide();

         fadeItem();
         $(this).off('click');

     },
     mouseenter: function () {

     },
     mouseleave: function () {

     }

 }); 
```

# html - 如何更改 iFrame“选择文件”上的光标

> ID：11406077
> 
> 赞同：1
> 
> 时间：2012-07-10T03:09:53.370
> 
> 标签：html, iframe, css

我正在使用 iFrame 来模拟`<input type="file">`. 这是它的作用：

1 - 一个链接显示说`"Choose your file"`。

2 - 用户单击链接，浏览其本地计算机上的文件。

3 - 当用户选择文件时，它会自动开始上传。

这很好用。但是，我无法控制光标的类型。我将如何强制光标成为指针？

[http://jsfiddle.net/4paY6/](http://jsfiddle.net/4paY6/)是以下代码的示例。

```
<html>
    <head>
        <style>
        .attach-file:hover {
            text-decoration: underline;
            cursor: pointer;
        }
        .attach-file {
            padding-left: 22px;
            background: url("{{ STATIC_URL }}images/new/attach-file.png") no-repeat 0 1px;
            color: #0BA5D9;
            position: relative;
            top: 0;
            left: 0;
        }
        form {
            float: right;
        }
        html, body {
            padding: 0;
            margin: 0;
            border: 0;
        }
        input[type="file"] {
            z-index: 999;
            opacity: 0.0; 
            line-height: 0; 
            position: absolute;
            position: fixed;
            font-size: 500px; 
            top: -100px; 
            left: -200px;

            -moz-appearance: none;
            white-space: nowrap;
            cursor: pointer;
            -moz-binding: none;
        }

        input[type="file"] > input[type="text"] {
          border-color: inherit;
          background-color: inherit;
          color: inherit;
          font-size: inherit;
          height: inherit;
        }

        /* button part of file selector */
        input[type="file"] > input[type="button"] {
            height: inherit;
            font-size: inherit;
        }
        input[type="file"]:hover {
            cursor: default;
        }
        * {
            overflow: hidden;
        }
    </style>
</head>
<body>

    <form method="post" action="." enctype="multipart/form-data" style="position: inline">
        <label style="overflow: hidden; position: relative;">
           <span class="attach-file">Attach File</a>
            <input type="file" name="attachment" />
        </label>
    </form>
</body> 
```

将鼠标悬停在 iFrame 上时，我需要添加或更改什么来模拟 Firefox 中的光标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T03:23:07.453

CSS

```
input[type="file"]:hover {
        cursor: default;
    } 
```

覆盖其他样式定义。删除它，你会得到指针光标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T03:36:01.717

如果您将不透明度设置为 1，您可以看到问题所在 - 输入占用了整个页面。如果将高度更改为 0px，它似乎可以按预期工作。请注意，您的跨度标签未正确关闭（您有 </a> 而不是 </span>）

# android - 在 Android 中读取特定文件夹中的内部文件

> ID：11406084
> 
> 赞同：1
> 
> 时间：2012-07-10T03:11:08.373
> 
> 标签：android, file

当然，这不是一个很难回答的问题，但我在实现这一点时遇到了一些麻烦。我的问题是：我需要读取（或列出）Android 内部存储中特定文件夹（例如“myFolder”，位于内部存储根目录中）内的文件。当然，这是可能的，但如何做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-10T03:50:44.870

要读取设备内的文件，您可以执行以下操作：

```
// gets the files in the directory
File fileDirectory = new File(Environment.getDataDirectory()+"/YourDirectory/");
// lists all the files into an array
File[] dirFiles = fileDirectory.listFiles();

if (dirFiles.length != 0) {
    // loops through the array of files, outputing the name to console
    for (int ii = 0; ii < dirFiles.length; ii++) {
        String fileOutput = dirFiles[ii].toString();
        System.out.println(fileOutput); 
    }
} 
```

如果您想从 SD 卡中取出文件，您只需更改`getDataDirectory`为`getExternalStorageDirectory`.

# python - 在python（大数据）中集成多个字典

> ID：11406085
> 
> 赞同：2
> 
> 时间：2012-07-10T03:11:24.307
> 
> 标签：python, memory, data-mining

我正在做一个大数据挖掘的研究项目。我目前已经编写了代码来将我拥有的数据组织到字典中。但是，数据量如此之大，以至于在形成字典时，我的计算机内存不足。我需要定期将我的字典写入主内存并以这种方式创建多个字典。然后我需要比较生成的多个字典，相应地更新键和值，并将整个内容存储在磁盘上的一个大字典中。知道如何在 python 中做到这一点吗？我需要一个可以快速将字典写入磁盘然后比较 2 个字典并更新密钥的 api。我实际上可以编写代码来比较 2 个字典，这不是问题，但我需要这样做而不会耗尽内存。

我的字典看起来像这样：“橙色”：[“这是一种水果”，“非常好吃”，...]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T03:29:51.533

同意 Hoffman：选择关系数据库。数据处理对于关系引擎来说是一项不寻常的任务，但相信它是在易于使用/部署和大型数据集的速度之间的一个很好的折衷。

我通常使用 Python 附带的 sqlite3，尽管我更经常通过[apsw](http://code.google.com/p/apsw/)使用它。像 sqlite3 这样的关系引擎的优势在于，您可以指示它通过连接和更新对您的数据进行大量处理，并且它会以非常明智的方式处理所需的所有内存/磁盘交换数据。您还可以使用内存数据库来保存需要与大数据交互的小数据，并通过“ATTACH”语句将它们链接起来。我以这种方式处理了千兆字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T03:14:20.477

您应该使用 PostgreSQL 等数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T03:34:40.110

首先想到 - 切换到 64 位 python 并增加计算机的虚拟内存设置；-)

第二个想法 - 一旦你有一个大字典，你可以对键进行排序并将其写入文件。写入所有数据后，您可以同时遍历所有文件，随时比较并写出最终数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T03:35:16.303

当您说“主存储器”时，您是指硬盘吗？计算机中只有一个内存系统。

[您可以使用pickle](http://docs.python.org/py3k/library/pickle.html)模块将 Python 数据对象写入文件。我不确定您是否可以将多个对象腌制到一个文件中，但这应该无关紧要。

```
import pickle

def dump_dict(dict, name):
    with open(name, 'wb') as file:
        return pickle.dump(file, dict)

def get_dict(name):
    with open(name, 'rb') as file:
        return pickle.load(file)

def get_key(key, *list_of_dicts):
    """The first argument is the key; any further args are interpreted as the names of
pickled dict files to check."""
    out = []
    for name in *list_of_dicts:
        with open(name, 'rb') as f:
            out.append(pickle.load(f).get(key)) # Add this dict's value, glossing over KeyErrors.
    return tuple(out) 
```

您当然可以找出其余部分并根据需要扩展功能。

# string - Powershell 和一些简单的字符串操作

> ID：11406089
> 
> 赞同：1
> 
> 时间：2012-07-10T03:12:03.447
> 
> 标签：string, powershell

需要一些帮助来构建一个 powershell 脚本来帮助进行一些基本的字符串操作。我知道足够多的 powershell 会遇到麻烦，但无法弄清楚使这项工作正常进行的语法或编码。

我有一个看起来像这样的文本文件 -

```
Here is your list of servers:
server1
server2.domain.local
server3
Total number of servers: 3 
```

我需要获取该文本文件并删除第一行和最后一行（始终是第一行和最后一行。）然后我需要每隔一行将其转换为 CSV 文件。

最终输出应该是一个看起来像这样的文本文件 -

```
server1,server2.domain.local,server3 
```

关于从哪里开始的任何建议？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T03:25:46.173

你可以试试 ：

```
$a = Get-Content C:\temp\M.TXT # Where M.TXT is your original file
$a[1..($a.count-2)] | % {$s=""} {$s+=$_+","}{$s.trim(",") | Out-File m.csv} # M.CSV is the result file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T04:23:56.903

这是其他几种方法。

```
(Get-Content foo.txt | Where {$_ -notmatch '^\s*$'} | Select -Skip 1 | 
     Select -Skip 1 -Last 2E9) -join ',' > foo.csv 
```

如果您碰巧拥有[PowerShell 社区扩展](http://pscx.codeplex.com)（用于 Skip-Object）：

```
(Get-Content foo.txt | Where {$_ -notmatch '^\s*$'} | 
     Skip-Object -First 1 -Last 1) -join ',' > foo.csv 
```

请注意，`Where {$_ -notmatch '^\s*$'}`消除了任何空白行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T06:46:59.563

您可以使用范围运算符：

```
$content = Get-Content D:\Scripts\Temp\test1.txt
$content[1..($content.count-2)] -join ',' | Out-File servers.txt 
```

最好导出到 csv 文件，以便您可以将其导入并在服务器名称上进行操作：

```
$content = Get-Content D:\Scripts\Temp\test1.txt
$content[1..($content.count-2)] | Select-Object @{Name='ComputerName';e={$_}} | Export-Csv servers.csv -NoTypeInformation 
```

# objective-c - 如何在没有重复符号错误的情况下跨静态库共享代码？

> ID：11406090
> 
> 赞同：3
> 
> 时间：2012-07-10T03:12:06.033
> 
> 标签：objective-c, xcode, architecture, linker

我是构建静态库的新手，想创建 2(+) 个库，每个库都有一些独特的代码和一些共享代码。我的意图是其他项目将链接这些静态库中的一个或多个。

```
Util.h/m  <-- Shared
ImplOne.h/m  <-- Unique to 'ImplOne'
ImplTwo.h/m  <-- Unique to 'ImplTwo' 
```

我正在使用 XCode 并通过构建和生成库`Util.m`，`ImplOne.m`在一种情况下，在另一种情况`Util.m`下`ImplTwo.m`。

当然问题是我现在不能一起使用这些库，因为它们会有重复的符号。对于这种情况，有什么更好的架构？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T03:33:12.250

我认为最干净的选择是为共享的`Utils.h/m`. 缺点是您的用户需要`utils`与`implone`和/或一起链接，并且`impltwo`为了将两个库链接在一起并需要使用相同版本的. 作为回报，库的源代码将保持干净整洁。`impoone``impltwo``utils`

另一种方法是使用宏来更改 中的函数和变量名称，`utils`以避免链接器错误。这样做最重要的后果是代码重复：两者`implone`都会`impltwo`链接不同名称的相同代码段。另一个是可读性：它会受到极大的影响，因为每个对函数的引用`utils`都需要包装在一个宏中。这使得第二种方法很脏，所以我肯定会建议制作`utils`一个单独的库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T03:39:11.827

我在当前的代码库中有类似的问题。我的解决方案类似于我写这篇文章时刚刚出现的答案，但我将把它留在这里作为比较/参考。

我有一个通用的静态库项目（我们称之为 libCommonBits.a）。我有第二个静态库，其中包含一些 UI 代码（我们称之为 libCommonUI.a），它也依赖于 libCommonBits.a。我的主应用程序需要使用这两个库。

我的解决方案是实际上不将 libCommonBits.a 链接到 libCommonUI.a。它可以很好地针对头文件进行编译，并且仅意味着我的主应用程序链接到两个静态库而不是一个。

我希望更多分发库的人采用这种方法。当您使用已经链接到通用库（JSONKit 或类似库）中的静态库时，会令人沮丧，并且您还在代码库中单独使用它。在这种情况下，符号重命名可能是唯一的解决方案。

# python - 使用 Selenium WebDriver 选择元素后跟文本

> ID：11406091
> 
> 赞同：6
> 
> 时间：2012-07-10T03:12:25.893
> 
> 标签：python, selenium, webdriver, selenium-chromedriver

我正在使用 Selenium WebDriver 和 Python 绑定来自动化一些单调的 WordPress 任务，到目前为止，它一直非常简单。我正在尝试选择一个复选框，但我可以识别它的唯一方法是通过它后面的文本。这是 HTML 的相关部分：

```
<li id="product_cat-52">
    <label class="selectit">
       <input value="52" type="checkbox" name="tax_input[product_cat][]" id="in-product_cat-52"> polishpottery
    </label>
</li> 
```

我在脚本中唯一能识别此复选框的信息是字符串“polishpottery”。有没有办法只知道后面的文本来选择该复选框？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T08:31:49.590

正如@sherwin-wu 已经说过的那样，您应该找到一种方法来根据 id 或 name 或 class（并且很可能是它们的组合）来选择所需的内容。在您的示例中，似乎有足够的可能性这样做，尽管我不知道页面的其余部分通常是什么样子。

话虽如此，可以按照您的要求使用 XPath 选择器，例如

```
driver.find_element_by_xpath("//li/label/input[contains(..,'polishpottery')]") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T03:51:47.583

正则表达式——可能不是最好的解决方案，但它应该可以工作。

```
import re

def get_id(str, html_page): # str in this case would be 'polishpottery'
    return re.search(r'<input[^<>]*?type="checkbox"[^<>]*?id="([A-Za-z0-9_ -]*?)"[^<>]*?> ?' + str, html_page).group(1)

id = get_id('polishpottery', html)
checkbox = driver.find_element_by_id(id)
checkbox.toggle()

# Or, more minimallistically:
driver.find_element_by_id(get_id('polishpottery', html)).toggle() 
```

输出：

```
>>> print(html)
<li id="product_cat-52">
    <label class="selectit">
       <input value="52" type="checkbox" name="tax_input[product_cat][]" id="in-product_cat-52"> polishpottery
    </label>
</li>
>>> get_id('polishpottery', html)
'in-product_cat-52' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T04:34:56.040

我建议尝试找到更多方法来选择复选框。例如，您可以使用 browser.find_element_by_id(id) 根据其 id 选择 li 标签。您还可以使用 browser.find_element_by_name(name) 根据名称进行选择。

或者，如果你真的不能，你可以使用 selenium + BeautifulSoup 选择文本。

```
soup = BeautifulSoup(browser.page_source)
text = soup.find('input', re.compile=" polishpottery")
checkbox = text.parent 
# it might not exactly be parent, but you can play around with
# navigating the tree. 
```

希望这可以帮助！

# vbscript - 根据 ComboBox 中的选择填充文本框

> ID：11406092
> 
> 赞同：2
> 
> 时间：2012-07-10T03:12:41.000
> 
> 标签：vbscript, combobox, textbox, outlook, outlook-2010

全部！我会尽量详细描述我的困境。我对 Visual Basic 有一点背景知识，但在 Outlook 2010 中没有真正的 VBA 或 VBscript 知识。我正在使用 Outlook 2010。我创建了一个自定义表单（这是我的第一次）。我有一个名为 ComboBox1 的组合框和一个名为 TextBox1 的文本框。我正在尝试使用基于从 ComboBox1 所做的选择的数字自动填充 TextBox1（例如，我从 ComboBox1 中选择值 1，而 TextBox1 填充为 124）。我尝试在 Visual Basic 编辑器（VBA 7.0 版）中使用此代码：

```
Sub popBox()
If ComboBox1 = "Value 1" Then
TextBox1 = "124"
End If
End Sub 
```

我的问题是我做错了什么？我应该使用 VBscript 编辑器，还是使用 VBA 是正确的做法？我要问的甚至可能吗？谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T01:39:41.803

今天早上真是太棒了！我发现了我的问题的解决方案。万一将来有人遇到这个问题，这就是我想出的：

```
Sub Item_CustomPropertyChange(ByVal Aircraft)

Set myInspector = Item.GetInspector
Set FormPage = myInspector.ModifiedFormPages("Form")
Set Aircraft = FormPage.Controls("Aircraft")
Set PartNumber = FormPage.Controls("PartNumber")
    Select Case Aircraft.Value
        Case "Value 1"
            PartNumber.Value = "124"
        Case "Value 2"
            PartNumber.Value = "125"
    End Select
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T05:17:10.370

右键单击您的表单并选择“查看代码”。现在，您应该可以从代码编辑器文本输入部分*正上方的下拉菜单中进行选择。*选择“ComboBox1”，然后从相邻的下拉菜单中选择“更改”。

编辑器应该为您创建一个名为“Private Sub ComboBox1_Change()”的例程。输入以下内容：

```
Private Sub ComboBox1_Change()
  Select Case ComboBox1.Value
    Case "Value 1"
      TextBox1.Caption = "124"
    Case Else
      TextBox1.Caption = ""
  End Select
End Sub 
```

您也可以将上述代码（只要您的组合框称为“ComboBox1”而您的文本框称为“TextBox1”）粘贴到表单的代码中，并获得相同的结果。让我知道你怎么去。

# c - 链接错误：在 Windows 7 上未定义对“MPI_Init”的引用

> ID：11406093
> 
> 赞同：2
> 
> 时间：2012-07-10T03:12:55.247
> 
> 标签：c, windows, linker, environment-variables, mpi

我正在使用 OpenMPI 库编写一个在 Windows 7 上运行的程序。我使用 C Free 4.0，Mingw 编译和构建。

编译没问题，但是当编译器链接对象时，会出现“未定义的引用 ...”错误。

我已经设置了环境：我将 OpenMPI lib、include 和 bin 文件夹添加到 C Free Build 目录中。我也将它们添加到 Windows 环境变量中。

但错误仍然发生。谁能告诉我如何解决它？非常感谢。

# websphere - 从 Websphere 中的 installedApps 路径中删除后，应用程序文件是否会从 dmgr 端同步？

> ID：11406096
> 
> 赞同：1
> 
> 时间：2012-07-10T03:13:22.343
> 
> 标签：websphere, websphere-7, websphere-6.1

您是否知道应用文件是否会从 dmgr 端同步并在我们从 installedApps 路径中删除后重新生成？

我最近从客户那里得到一个问题，即他们将一个图像文件上传到 WASNode**`installedApps`**应用程序路径**`manually`**中。之后，他们再次从**`installedApps`**应用程序路径中手动删除了该文件。但是在重新启动应用程序服务器进程后，该文件已在同一**`installedApps`**路径下重新生成。

所以我怀疑该文件可能已从 dmgr 节点重新同步，例如文件**`applications`**夹下的 app 文件。但是，首先，我没有在 DMGR**`applications`**文件夹的应用程序 ear 文件中看到该图像文件。此外，我自己做了一个测试，如果我从**`installedApps`**应用程序路径中删除了文件，即使节点同步完成，该文件也不会再重新生成。

那么有人知道为什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:09:14.037

这是所有产品内部，不能依赖。我的观察是安装应用程序会创建`DMGR_HOME/config/cells/CELL/applications/APP.ear/APP.ear`. 在节点同步期间，该文件被复制到每个节点代理中的相同位置，然后`NODE_HOME/installedApps/CELL/APP.ear`被删除，EAR 被重新扩展。

在您的示例中，您需要修改应用程序以便修改 EAR（例如，`AdminApp.update`或可能修改绑定），以便在同步节点时强制重新扩展 EAR。如果图像文件在 dmgr 中不存在，我不知道它会如何显示。

# android - TextView 上的 setText() 有时仅适用（Android）

> ID：11406102
> 
> 赞同：0
> 
> 时间：2012-07-10T03:14:02.700
> 
> 标签：android, text, textview

```
try {
    answerField.setText("Unscrambling...This may take a minute");
    BufferedInputStream(getAssets().open("wordlist.txt"));
    BufferedInputStream[] textfile = new BufferedInputStream[28];
    for(int i = 0; i<28; i++){
        textfile[i] = new BufferedInputStream(getAssets().open(i+1+".txt"));
        }
    answerField.setText(Unscramble.go(tField.getText()+"", textfile)); 
```

我的问题是 answerField.setText("Unscrambling...This may take a minute");

如果代码是原样，那么这一行将什么也不做，但是，如果我去掉代码的最后一行 answerField.setText(Unscramble.go(tField.getText()+"", textfile)); 它可以找到并且TextView说“Unscrambling ...这可能需要一分钟”

目标是让它在程序完成解密之前拥有该消息，然后它将产生结果。

任何帮助将不胜感激，因为我不知道我在做什么或为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T03:19:43.503

`setText`问题是 UI 在第一次调用和第二次调用之间没有更新。正如@AVD 提到的，一种解决方案是使用[`Toast`](http://developer.android.com/guide/topics/ui/notifiers/toasts.html).

我认为推荐的另一种解决方案是使用[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html). 这里的想法是将您的文本设置为 in 中的“Unscrambling”消息`onPreExecute`，然后在 中运行您的主要任务`doInBackground`，最后将文本设置为 in 中的`Unscramble.*`字符串`onPostExecute`。

我在上面提供的文档链接有一个很棒的`AsyncTask`代码，可以操纵它来处理任何事情。

# xml - 如何在 Java 中使用 DOM 获取子节点

> ID：11406105
> 
> 赞同：2
> 
> 时间：2012-07-10T03:14:28.273
> 
> 标签：xml, dom

我有这个 XML。

```
 <employees>
  <employee tag="FT" name="a">
     <password tag="1"/>
     <password tag="2"/>
</employee>
<employee tag="PT" name="b">
     <password tag="3"/>
     <password tag="4"/>
</employee>
</employees> 
```

我正在尝试获取每个员工的子节点并将子节点的标记值（即密码的标记值）放入列表中。

```
nl = doc.getElementsByTagName("employee");

for(int i=0;i<nl.getLength();i++){
 NamedNodeMap nnm = nl.item(i).getAttributes(); 
 NodeList children = nl.item(i).getChildNodes();
 passwordList = new ArrayList<String>();
 for(int j=0; j<children.getLength();j++){
   NamedNodeMap n = children.item(j).getAttributes();
   passwordTagAttr=(Attr) n.getNamedItem("tag");
   passwordTag=stopTagAttr.getValue();  
   passwordList.add(passwordTag);                   
   }
} 
```

当我调试时，我得到了 children = 4 的值。但我应该为每个循环得到 2 个请帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-10T03:26:00.873

`NodeList`返回的包含`getChildNodes()`子`Element`节点（在这种情况下这是您关心的）以及`Node`自身的属性子节点（您不关心）。

```
for(int j=0; j<children.getLength();j++) {
   if (children.item(j) instanceof Element == false)
       continue;

   NamedNodeMap n = children.item(j).getAttributes();
   passwordTagAttr=(Attr) n.getNamedItem("tag");
   passwordTag=stopTagAttr.getValue();  
   passwordList.add(passwordTag);                   
} 
```

# apache - 在 80 端口上运行 Apache

> ID：11406106
> 
> 赞同：0
> 
> 时间：2012-07-10T03:14:37.283
> 
> 标签：apache, http

我刚刚在我的 Windows 7 计算机上安装了 xampp win32 1.7.4。

当我尝试打开 Apache 服务器时，它说端口 80 很忙，因此我无法在我的计算机上运行 Apache 服务器。

我应该如何克服这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T03:22:03.897

这意味着另一个进程已经在侦听端口 80。要找出哪个进程，请在管理员模式下打开命令提示符并运行：

```
netstat -abn 
```

这应该告诉您每个端口上正在侦听的进程。然后，您应该能够停止此过程。它也可能是一项服务，在这种情况下，您可以从控制面板禁用该服务。

# php - symfony 2 形式的 getName 函数有什么作用

> ID：11406108
> 
> 赞同：8
> 
> 时间：2012-07-10T03:15:00.720
> 
> 标签：php, symfony

这是我的表单类

```
class CommentType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('user')
            ->add('comment')

        ;
    }

    public function getName()
    {
        return 'sample_staticbundle_commenttype';
    }
} 
```

我无法获得 getName 函数的作用

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T03:20:41.387

在为该表单呈现树枝模板时使用它。它允许您通过指定一个块来覆盖默认小部件，但仅适用于该特定表单，例如：

```
{% block sample_staticbundle_commenttype_widget %} 
```

# javascript - 在 div 中包装子元素的范围

> ID：11406109
> 
> 赞同：5
> 
> 时间：2012-07-10T03:15:08.077
> 
> 标签：javascript, jquery, list, children, wrapall

我试图在 div 中包装一系列子元素，以便分组操作它们；试图将每个组定位在不同的位置。场景是我有一个随机生成`li`标签的列表，无论出现多少标签，我都需要单独操作每组十个标签。

为了弄清楚这一点，我使用了一个书面清单：

```
$("ul li ul li:nth-child(n+11)").wrapAll("<span class='shift' />");
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div id="access">
  <div class="menu">
    <ul>
      <li>
        <p>Hello</p>
        <ul>
          <li>Stuff</li>
          <li>Stuff</li>
          <li>Stuff</li>
          <li>Stuff</li>
          <li>Stuff</li>
          <li>Stuff</li>
          <li>Stuff</li>
          <li>Stuff</li>
          <li>Stuff</li>
          <li>Stuff</li>
          <li>Stuff2</li>
          <li>Stuff2</li>
          <li>Stuff2</li>
          <li>Stuff2</li>
          <li>Stuff2</li>
          <li>Stuff2</li>
          <li>Stuff2</li>
          <li>Stuff2</li>
          <li>Stuff2</li>
          <li>Stuff2</li>
          <li>Stuff3</li>
          <li>Stuff3</li>
          <li>Stuff3</li>
          <li>Stuff3</li>
          <li>Stuff3</li>
          <li>Stuff3</li>
          <li>Stuff3</li>
          <li>Stuff3</li>
          <li>Stuff3</li>
          <li>Stuff3</li>

        </ul>
      </li>
    </ul>
  </div>
</div>
```

但这当然不是我需要的。

这是我现在正在处理的代码。

```
var count = $("ul li ul li").length;
for(var c = 11; c<=count;c+=10){
$("ul li ul li:nth-child(n+"+c+")").wrapAll("<span class='shift' />");
} 
```

这种工作，但它创建了班次类的嵌套实例。

我需要单独的包装 div。如果我要编写代码，它将是：

```
 $("ul li ul li:nth-child("+c+"<n<"+(c+10)+")").wrapAll("<span class='shift' />"); 
```

但显然那是行不通的。其他人以前做过这样的事情。搜索了一下没有成功。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T03:21:10.137

您可以尝试[.slice](http://api.jquery.com/slice/)方法：

```
// note: different from nth-child, slice is 0-based position
$("ul li ul li").slice(c, c+10).wrapAll("<span class='shift' />"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T03:22:46.063

```
var i=0;
$(".menu ul ul li:first-child").before("<div>");
$(".menu ul ul li").each(function(){
    i++;
    if(i % 10==0){
        $(this).after('</div><div>')
    }
});
$(".menu ul ul li:last-child").after("</div>"); 
```

# java - 访问 AppEngine 应用程序 ID

> ID：11406110
> 
> 赞同：4
> 
> 时间：2012-07-10T03:15:19.520
> 
> 标签：java, google-app-engine

appengine 中的应用 ID 在 appengine-web.xml 中配置：

```
<?xml version="1.0" encoding="utf-8"?>
<appengine-web-app xmlns="http://appengine.google.com/ns/1.0">
    <application>myid</application>
    <version>0-0-1</version>
</appengine-web-app> 
```

我们可以在 Java 中以编程方式访问应用程序 ID 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T03:49:18.920

您可以从[运行时环境文档](https://developers.google.com/appengine/docs/java/runtime#The_Environment)`SystemProperty.applicationId.get()`中获取应用程序 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-28T10:49:42.053

这里链接到官员文件

[https://cloud.google.com/appengine/docs/java/appidentity/#getting_the_application_id](https://cloud.google.com/appengine/docs/java/appidentity/#getting_the_application_id)

```
ApiProxy.getCurrentEnvironment().getAppId() 
```

# android - 将数据添加到列表并在网格中显示

> ID：11406116
> 
> 赞同：0
> 
> 时间：2012-07-10T03:16:22.037
> 
> 标签：android, list, listview, gridview

我对如何获取数据以在网格或多列列表视图中显示它有点困惑。这是我从数据源创建的列表；

我在将其放入网格时遇到问题。

谢谢你的帮助。

```
 private List<OReady> pOrders;

  OReady rOrders = new OReady();
  rOrders.setNumber("123");
  rOrders.setQty("5");
  rOrders.setAmount("9.00");
  pOrders.add(rOrders);

 gridView = (GridView) findViewById(R.id.gridView1);
 gridView.setAdapter(new OrdersAdapter(this, pOrders)); 
```

这部分给了我一个错误，任何日食建议只会产生更多错误。

这是我的 Ordersadapter。

```
 @SuppressWarnings("rawtypes")
 public class OrdersAdapter extends ArrayAdapter{
 private final Activity activity;
 private final List orders;

@SuppressWarnings("unchecked")
public OrdersAdapter(Activity activity, List objects) {
        super(activity, R.layout.pickup , objects);
        this.activity = activity;
        this.orders = objects;  
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T03:40:04.567

这是我用来创建列表视图的一个很好的链接。我认为它会帮助你很多。

[http://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

除此之外，是的，您可能希望创建一个类来存储数据。上面的教程有望回答您的所有问题。

# c++ - 如何在发布模式下使用宏重新定义函数？

> ID：11406120
> 
> 赞同：2
> 
> 时间：2012-07-10T03:16:55.773
> 
> 标签：c++, visual-c++, macros

使用 C++，我需要一个宏来替换一个函数，如果它在发布模式下运行，它什么都不做。因此，在调试模式下，该函数将被执行，但在发布模式下则不会。

像这样的东西：

```
static void foo(int,int)

#ifdef NDEBUG
#define foo(x,y)
#endif 
```

...并且函数体在单独的 .cpp 文件中定义并且是类的一部分，这就是为什么我认为这不起作用？

实际代码..

标题

```
static void ValidateInput(const SeriesID *CurrentSeries, const AEnum_TT_TICK_ROUND& roundType = TT_TICK_ROUND_NONE); 
```

.cpp

```
void TTBaseTick::ValidateInput(const SeriesID *CurrentSeries, const AEnum_TT_TICK_ROUND& roundType)
{
#ifndef _DEBUG
if (!CurrentSeries)
{
  throw TTTick::Ex(TTTick::SeriesNull);
}
else if (CurrentSeries->precision <= 0)
{
    throw TTTick::Ex(TTTick::PrecisionInvalid);
}
else if(!roundType.IsValidValue(roundType))
{
    throw TTTick::Ex(TTTick::InvalidParam);
}
#endif
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T03:33:09.717

```
static void foo(int,int); // declaration

// Definition in your cpp file.
void foo( int x, int y )
{
#ifndef NDEBUG
    // Code for debug mode
#endif
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T03:21:07.990

```
static void foo_(int, int);

#ifdef NDEBUG
#define foo(x,y)
#else
#define foo(x,y)   foo_(x,y)
#endif 
```

# php - Symfony2：在登录路由中使用前缀

> ID：11406121
> 
> 赞同：2
> 
> 时间：2012-07-10T03:17:05.733
> 
> 标签：php, symfony

我正在设置允许以下路由的路由：

```
/client_a/dashboard/
/client_b/dashboard/ 
```

我在我的中使用了一个`app/config/routing.yml`看起来像这样的前缀：

```
AcmeMainBundle:
    resource: "@AcmeMainBundle/Resources/config/routing.yml"
    prefix:   /{client} 
```

我遇到的问题是登录路由似乎有前缀问题。这是我`/Resources/config/routing.yml`正在导入主路由文件中的条目：

```
acme_login:
    pattern: /login/
    defaults: {_controller: AcmeMainBundle:Main:login }

acme_login_check:
    pattern: /login_check
    # defaults: This is not required since the Firewall will handle this

acme_logout:
    pattern: /logout/
    # defaults: This is not required since the Firewall will handle this 
```

登录页面显示正常，但在用户提交登录页面后，Symfony 会抛出错误说明：

```
Unable to find the controller for path "/client_a/login_check". Maybe you forgot to add the matching route in your routing configuration? 
```

在我看来，Symfony2 在内部安全路由和在 routing.yml 中使用前缀时遇到了困难。

有什么办法可以克服这个问题？

注意：解决此问题的一种方法是更改​​我的 routing.yml 文件中的所有路由以包含 {client} 参数。唯一的问题是，这是一个非常广泛的应用程序，包含大量路线。使用前缀可以创造奇迹，除了登录期间的安全处理。

谢谢，

JB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-10T03:31:30.913

您需要的可能解决方案是：

文件：src/Acme/CoreBundle/Twig/PathExtension.php

```
<?php

namespace Acme\CoreBundle\Twig\Extension;

use Symfony\Bundle\FrameworkBundle\Routing\Router;
use Symfony\Component\HttpKernel\Event\GetResponseEvent;
use Symfony\Component\HttpKernel\HttpKernel;

class PathExtension extends \Twig_Extension
{

    private $request;
    private $router;

    public function __construct(Router $router) {
        $this->router = $router;
    }

    public function onKernelRequest(GetResponseEvent $event) {
        if ($event->getRequestType() === HttpKernel::MASTER_REQUEST) {
            $this->request = $event->getRequest();
        }
    }

    public function getFunctions()
    {
        return array(
            'path_route' => new \Twig_Function_Method($this, 'getPath')
        );
    }

    public function getPath($name, $parameters = array())
    {
        $parameters = array_merge($parameters, [
            'client' => $this->request->get('client'),
        ]);

        return $this->router->generate($name, $parameters, false);
    }

    public function getName()
    {
        return 'twig_path_route_extension';
    }

} 
```

配置即服务：

文件：src/Acme/CoreBundle/Resources/config/services.yml

```
services:
    twig.path_route_extension:
        class: Acme\CoreBundle\Twig\PathExtension
        tags:
            - { name: twig.extension }
            - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest }
        arguments: [@router] 
```

设置您的路由选项：

文件：app/config/routing.yml

```
_acme_client:
    resource: "@AcmeCoreBundle/Resources/config/routing.yml"
    prefix:   /{client}/ 
```

然后你可以在模板和 routing.yml 中使用它，例如：

```
_acme_client_dashboard:
    path:     /dashboard
    defaults: { _controller: AcmeCoreBundle:System:dashboard } 
```

然后，在您的模板中，您可以使用：

```
<a href="{{ path_route('_acme_client_dashboard') }}">
  Link to Dashboard.
</a> 
```

参考：

[自动传递路径参数](https://stackoverflow.com/questions/13332115/pass-path-parameters-automatically)

[http://blog.viison.com/post/15619033835/symfony2-twig-extension-switch-locale-current-route](http://blog.viison.com/post/15619033835/symfony2-twig-extension-switch-locale-current-route)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T03:52:54.807

我认为您可能需要在这些路由上定义一个控制器`defaults: {_controller: AcmeMainBundle:Main:login }`。在默认情况下它不需要它们，因为防火墙在路由之前捕获它。但在这种情况下可能需要它来匹配前缀。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T02:28:55.860

经过相当多的研究和不同方面的尝试，目前在路由中使用动态前缀似乎没有好的解决方案。

问题似乎是安全包在路由发生之前执行其代码，因此前缀中的路由属性在 security.yml 中不可用，而是静态路径。这本身就引起了问题，因为 Symfony 然后抱怨缺少属性等。

所以，答案是，结合安全实现，以上是不可能的，至少不是我发现的方式。

# php - 使用 jquery.post 单向发送帖子

> ID：11406124
> 
> 赞同：1
> 
> 时间：2012-07-10T03:17:52.713
> 
> 标签：php, javascript, jquery, post

我有一个变量，我们将调用 test_string，我也分配了字符串“hello”。

```
var test_string = "hello"; 
```

我希望它以一种我尝试过的方式发布到 php 页面：

```
$.post('php_page.php', test_string); 
```

在 php_page.php 我使用：

```
$new_var = $_POST['test_string'];
echo $new_var; 
```

并且没有结果。我在 $.post() 中缺少什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T03:21:04.927

试试这个 - -

```
$.post('php_page.php', {test_string:test_string}); 
```

让我知道

**编辑我的工作代码**---

```
test.php

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
function handle(){
var test_string = "hello";
$.post('myphp.php', {'test_string':test_string},
function (result){
$("span").html(result);
});
}
</script>

</head>

<body>

<input type="button" onclick="handle();" value="Click" />
<span></span>

</body>
</html> 
```

> 我的php.php

```
<?php
$new_var = $_POST['test_string'];
echo $new_var; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T03:24:58.357

正如 swapnesh 暗示的那样，您缺少`$.post`将对象作为第二个参数的期望：

```
$.post('php_page.php', { objkey : objval }); 
```

然后在 PHP 中你用这个来检索它：

```
$val = $_POST['objkey']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T17:13:47.950

在 post 和 get 的 http 请求中，值作为名称/值对发送。在您的代码中，您缺少两件事。第一件事是您尝试仅发送数据而不将其分配给名称/值对。第二件事是您还没有编写捕获服务器响应的函数。

请尝试如下。

```
$.post('php_page.php', test_string: "hello", function(response) {
 alert(response);
}); 
```

# html - 有没有办法通过css更改wordpress中的网站标题url？

> ID：11406134
> 
> 赞同：0
> 
> 时间：2012-07-10T03:20:10.370
> 
> 标签：html, css, wordpress, wordpress-theming

我使用 wordpress.com 来托管我的博客。当您单击站点图像时，它会将您带回博客主页，而不是属于我的站点的主页。

我知道如何通过编辑器菜单使用已安装的 wordpress 进行更改。但是，我在 wordpress.com 上没有任何这些选项，但是，我可以通过 css 完全访问变异的东西。

有没有办法强制 CSS 为我进行更改。

```
<a href="http://blog.site.com/" title="site" rel="home">Site</a> 
```

但是，我希望它阅读

```
<a href="http://site.com/" title="site" rel="home">Site</a> 
```

回顾一下，我无法通过编辑器更改它。我改变这一点的唯一选择是通过 CSS。

我正在考虑使用这样的东西[来](http://www.cssportal.com/css-properties/text-replace.htm)替换 herf 中的文本。但我什至无法让它与示例文本一起使用。太感谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T03:24:11.757

否 - CSS 是一种只读方式来设置页面内容的样式，而不是更改内容本身（该标签是其中的一部分）。

# python - ImportError - Django 和 mod_wsgi

> ID：11406141
> 
> 赞同：1
> 
> 时间：2012-07-10T03:21:05.737
> 
> 标签：python, django, apache, wsgi

我正在尝试在 Fedora 16 机器上使用 Django 和 Apache 在本地设置 mod_wsgi。我遇到了错误：

```
ImportError: Could not import settings 'cat.settings' (Is it on sys.path?): No module named cat.settings 
```

我意识到对此还有其他一些问题-但他们的解决方案并未解决此错误。感谢您对消息的任何帮助或想法！

--

以下是对我的设置的一些见解：

*   在 localhost 收到 500 内部服务器错误。
*   我的目录是：/home/name/src/django/animals/cat（其中 cat 目录包含一个 __init__.py 和一个 settings.py 文件。
*   我在 cat 目录中有一个名为 catOne 的应用程序文件夹 - 它还包含一个 __init__.py 文件。
*   我的 wsgi 文件如下所示：

```
 import os
import sys

sys.path.append('/home/name/src/django/animals/cat')
sys.path.append('/home/name/src/django/animals')

sys.stderr.write('\n'.join(sys.path))

root = os.path.join(os.path.dirname(__file__), '..')
sys.path.insert(0, root)

packages = os.path.join(root, 'environ/lib/python2.7/site-packages')
sys.path.insert(0, packages)

os.environ['DJANGO_SETTINGS_MODULE'] = 'cat.settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

*   设置和init文件的权限是755，但我也试过777没有成功。

*   我的 sys.path 看起来像：

```
 /var/www
/usr/lib/python27.zip
/usr/lib/python2.7
/usr/lib/python2.7/plat-linux2
/usr/lib/python2.7/lib-tk
/usr/lib/python2.7/lib-old
/usr/lib/python2.7/lib-dynload
/usr/lib/python2.7/site-packages
/usr/lib/python2.7/site-packages/PIL
/usr/lib/python2.7/site-packages/gst-0.10
/usr/lib/python2.7/site-packages/gtk-2.0
/usr/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg-info
/home/name/src/django/animals/cat
/home/name/src/django/animals 
```

再次感谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T04:01:02.193

SELinux 导致访问文件出现问题。这可能不是最好的方法，但我通过编辑 /etc/selinux/config 文件完全禁用了它。将 SELINUX=enforcing 更改为 SELINUX=disabled。

同样，更改 SELinux 可能有更精细的控制，因此禁用后果自负。

# caching - 为什么 facebook 在 memcached 中使用 TCP 进行 SET 和 UDP 进行 GET

> ID：11406148
> 
> 赞同：7
> 
> 时间：2012-07-10T03:22:09.480
> 
> 标签：caching, memcached, key-value

我的问题是关于 memcached。Facebook 使用 memcached 作为其结构化数据的缓存，以减少用户的延迟。他们在 Linux 上使用 UDP 优化了 memcached 的性能。[http://www.facebook.com/note.php?note_id=39391378919](http://www.facebook.com/note.php?note_id=39391378919)

但有趣的是，他们仍然使用 TCP 进行设置操作，但使用 UDP 进行获取操作。

他们为什么要这样做？我的意思是为什么不使用 UDP 进行设置操作呢？由于减少了操作系统中需要维护的状态，UDP 比 TCP 具有更好的扩展性。

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-12-17T21:23:59.303

这句话几乎揭示了问题和解决方案：

> 虽然我们使用 TCP 提高了内存效率，但我们将 get 操作转移到 UDP 以减少网络流量并实现应用程序级的多获取流控制（并行获取数百个键）。

TCP 也是流控制，在 Memcache*多获取*的情况下，它是非常串行的。您打开连接（或将其池化），查询键列表，等待然后获取所有值列表的结果。*相反，他们在无连接并行 UDP get*之上自己实现了应用程序级别的流量控制。以下是我看到的 FB 大小软件的 UDP 优势：

*   无需打开连接、汇集它们、进行额外的往返、会话、握手、保持活动等；
*   多个分布式 Memcache 服务器和索引可以并行查询，这符合微服务和“微缓存”作为服务的精神；
*   可以多播 UDP 数据包以提供具有冗余、负载平衡、动态路由甚至分片的高可用性 - 第一个响应获胜！
*   个人*获取*超时和重试策略可以在应用程序级别实施；
*   只要有任何部分完整的数据可用，就可以执行逻辑 - 无需等待完整的*多获取*结果；

另一方面，我认为他们确实通过 TCP 写入以保持一致性。带有 memcached 的 TCP 提供了一个事务，其中发送请求，然后响应确认缓存更新。我想在 UDP 中重新实现它不会带来太多好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T14:56:48.493

每个 UDP 数据报包含一个简单的帧头，后面跟着与上述 TCP 协议格式相同的数据。在当前实现中，请求必须包含在单个 UDP 数据报中，但响应可能跨越多个数据报。（跨越多个数据报的唯一常见请求是巨大的多键`get`请求和`set` 请求，无论如何出于可靠性原因，这两者都更适合 TCP 传输。）

[https://github.com/memcached/memcached/blob/master/doc/protocol.txt](https://github.com/memcached/memcached/blob/master/doc/protocol.txt)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T19:56:41.743

我认为这是了解数据包丢失的最佳方法。例如，当您使用facebook聊天时，如果没有收到一个句子，您会明白但在Ymsg中您无法理解。

# php - php stream_socket_client - 只发送一个数据包

> ID：11406150
> 
> 赞同：0
> 
> 时间：2012-07-10T03:22:31.710
> 
> 标签：php, sockets

我有一个使用 TLS 和 C# 的客户端服务器应用程序，并且我需要使用 PHP 进行扩展。

我能够建立连接并接收一次数据，之后，服务器没有收到任何其他内容，并且 php 脚本到达末尾。

我的PHP代码如下：

```
$fp = stream_socket_client("tls://localhost:1776", $errno, $errstr, 30);

if (!$fp) {
    die("Unable to connect: $errstr ($errno)");
}

fwrite($fp, "Test1");
fwrite($fp, "Test2");

fclose($fp);
echo "DONE!"; 
```

我尝试了几种方法，但无论如何第二个 fwrite 永远不会到达服务器。我 100% 确定服务器不是问题，因为 C# 客户端的代码完全相同，并且运行完美。

谁能给我任何关于如何克服这个问题的提示？

感谢您的阅读和最好的问候。

# ios - UIbutton 短暂显示一个弹出标签，标签将显示在按钮的中间

> ID：11406152
> 
> 赞同：0
> 
> 时间：2012-07-10T03:22:42.070
> 
> 标签：ios, uibutton

如何创建一个 uibutton，它将简要显示一些文本的 uilabel，就像会出现然后消失的语音气泡。问题是气泡将是一个位于按钮框架之外的视图。

感谢您对此的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:52:54.917

在 .xib 文件中添加一个 UIButton 并给出一些名称。

在您的代码中添加以下方法。 `- (IBAction)bubbleButn:(UIButton *)btn`

然后右键单击该按钮并在菜单中查看“Touch Up Inside”部分。然后您可以单击并将最右边的圆圈拖动到 Xocde 的“占位符”部分中的文件所有者。然后你可以看到方法名称出现在一个菜单中。您可以从那里选择我们的方法。

接下来我们将实现我们的代码。

首先，您必须在 .h 文件中声明一个 UILabel。

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController {
    UILabel *bubbleLabel_;
}

@end 
```

然后在 .m 文件中实现按钮操作和标签设置。

```
- (IBAction)bubbleButn:(UIButton *)btn {
    float half = btn.frame.size.width/2;
    float yVal = btn.frame.size.height/2;
    if(bubbleLabel_) {
    /* 
     If you are using 'arc' no need of this statement
     add this in the dealloc method also.
     */
    [bubbleLabel_ release];
    bubbleLabel_ = nil;
}
    bubbleLabel_ = [[UILabel alloc] initWithFrame:CGRectMake(btn.frame.origin.x+half, btn.frame.origin.y+yVal, 40, 50)];                        
    bubbleLabel_.text = @"Hi";

    [self.view addSubview:bubbleLabel_];

    [self performSelector:@selector(hideBubble) withObject:self afterDelay:3];

}

- (void) hideBubble {
    [bubbleLabel_ removeFromSuperview];
} 
```

名为“Hi”的标签将显示 3 秒钟。

继续...

# objective-c - 如何从 interfacebuilder 访问 Window 的视图？

> ID：11406157
> 
> 赞同：1
> 
> 时间：2012-07-10T03:23:41.643
> 
> 标签：objective-c, xcode, cocoa, interface-builder

我正在尝试在 xcode 的界面构建器中为可可应用程序制作界面。我在 Interface builder 中创建的一个窗口的视图依赖于来自另一个视图的数据，因此有必要从必须传递数据的类中向该视图发送消息。但是，我似乎找不到从 nib 文件的所有者那里获取此视图对象的引用的方法。这里大致是我正在使用的代码：

```
controller = [[NSWindowController alloc] initWithWindowNibName:@"Somenibname"];
[[controller window] display];
theOtherView = [[[[controller window] contentView] subviews] objectAtIndex:1];
[theOtherView setObjectwhichneedstobemessaged:self];
[theOtherView sendAMessage:self]; 
```

此代码所在的对象永远不会收到消息。最初我实际上认为 contentview 是出现在界面生成器中的视图，并试图像这样获取对它的引用

theOtherView = [[[控制器窗口] contentView]];

但这也没有用。谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T03:45:35.443

听起来您可能需要更好地了解 View-Controller 结构如何与 nib 文件一起使用，并且如果没有更多代码/细节，很难确切知道您要做什么，但是解决问题的快速方法可能是使用NSNotification 而不是试图定位另一个视图并通过调用链发起消息发送。

您可以注册以处理来自接收视图的通知并从发起视图发送通知（如果您需要两种方式，反之亦然）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T04:13:02.917

阅读`IBOutlet`并考虑直接从 Interface Builder 链接您需要的视图。

例如，您的`NSWindowController`子类可能具有：

```
@interface MyWindowController : NSWindowController
{
  /* can also use more specific classes if you need them, e.g. NSButton if it's really an NSButton */
  IBOutlet NSView* firstViewIWant;
  IBOutlet NSView* secondViewIWant;
}
  . . .
@end 
```

您的实现可能有：

```
- (void)
windowDidLoad
{
  [super windowDidLoad];
  /* make sure the views were connected properly */
  assert(nil != firstViewIWant);
  assert(nil != secondViewIWant);
    . . .
} 
```

然后在 Interface Builder 中，将这些插座从“文件所有者”连接到您需要它们的确切视图。

# javascript - 管理要在 HTML5 Canvas 上绘制的 2D 数组中的文本映射

> ID：11406161
> 
> 赞同：22
> 
> 时间：2012-07-10T03:24:10.727
> 
> 标签：javascript, jquery, html, canvas

所以，我制作 HTML5 RPG 只是为了好玩。地图是一个`<canvas>`（512px 宽，352px 高 | 16 个图块，从上到下 11 个图块）。我想知道是否有更有效的方法来绘制`<canvas>`.

这是我现在的方式：

## 如何在地图上加载和绘制图块

使用这幅图块（32x32）绘制地图`Image()`。图像文件通过一个简单的`for`循环加载并放入一个名为`tiles[]`在使用时被绘制的数组中`drawImage()`。

首先，我们加载瓷砖......

![在此处输入图像描述](../Images/0a9817d23e42c1e1a7bf6aa545a427a9.png)

这是如何完成的：

```
// SET UP THE & DRAW THE MAP TILES
tiles = [];
var loadedImagesCount = 0;
for (x = 0; x <= NUM_OF_TILES; x++) {
  var imageObj = new Image(); // new instance for each image
  imageObj.src = "js/tiles/t" + x + ".png";
  imageObj.onload = function () {
    console.log("Added tile ... " + loadedImagesCount);
    loadedImagesCount++;
    if (loadedImagesCount == NUM_OF_TILES) {
      // Onces all tiles are loaded ...
      // We paint the map
      for (y = 0; y <= 15; y++) {
        for (x = 0; x <= 10; x++) {
          theX = x * 32;
          theY = y * 32;
          context.drawImage(tiles[5], theY, theX, 32, 32);
        }
      }
    }
  };
  tiles.push(imageObj);
} 
```

自然，当玩家开始游戏时，它会加载他们上次离开的地图。但在这里，它是一张全草地图。

现在，地图使用二维数组。这是一个示例地图。

```
[[4, 1, 4, 1, 4, 1, 4, 1, 4, 1, 4, 1, 1, 1, 1, 1], 
[1, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 1], 
[13, 13, 13, 13, 1, 1, 1, 1, 13, 13, 13, 13, 13, 13, 13, 1], 
[13, 13, 13, 13, 1, 13, 13, 1, 13, 13, 13, 13, 13, 13, 13, 1], 
[13, 13, 13, 13, 1, 13, 13, 1, 13, 13, 13, 13, 13, 13, 13, 1], 
[13, 13, 13, 13, 1, 13, 13, 1, 13, 13, 13, 13, 13, 13, 13, 1], 
[13, 13, 13, 13, 1, 1, 1, 1, 13, 13, 13, 13, 13, 13, 13, 1], 
[13, 13, 13, 13, 13, 13, 13, 1, 13, 13, 13, 13, 13, 13, 13, 1], 
[13, 13, 13, 13, 13, 11, 11, 11, 13, 13, 13, 13, 13, 13, 13, 1], 
[13, 13, 13, 1, 1, 1, 1, 1, 1, 1, 13, 13, 13, 13, 13, 1], 
[1, 1, 1, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 1, 1, 1]]; 
```

我使用简单的`if`结构得到不同的地图。一旦上面的二维数组`return`被绘制出来，每个数组中对应的数字就会根据`Image()`存储在里面进行绘制`tile[]`。然后`drawImage()`将发生并根据它`x`和`y`时间`32`进行绘制，以在正确的`x-y`坐标上进行绘制。

## 多图切换是如何发生的

在我的游戏中，地图需要跟踪五件事：`currentID`、`leftID`、`rightID`、`upID`和`bottomID`。

*   **currentID：**您所在地图的当前 ID。
*   **leftID：**`currentID`在当前地图左侧退出时要加载的 ID 。
*   **rightID：**`currentID`在当前地图右侧退出时加载什么ID 。
*   **downID：**`currentID`在当前地图底部退出时要加载的 ID 。
*   **upID：**`currentID`在当前地图顶部退出时要加载的 ID 。

需要注意的一点：如果`leftID`、`rightID`、`upID`或`bottomID`不是特定的，则表示它们是`0`. 这意味着他们不能离开地图的那一侧。这只是一种无形的封锁。

因此，一旦一个人离开地图的一侧，取决于他们退出的位置......例如，如果他们从底部退出，`bottomID`将`map`加载的数量并因此被绘制在地图上。

这是一个具有代表性的 .GIF，可帮助您更好地可视化：

![在此处输入图像描述](../Images/d577b149c2be8d3c4964cffe0dd080ca.png)

正如你所看到的，迟早我会处理很多地图，我会处理*很多*ID。这可能会变得有点混乱和忙碌。

明显的优点是它一次加载 176 个图块，刷新一个 512x352 的小画布，一次处理一张地图。缺点是 MAP id 在处理许多地图时有时可能会令人困惑。

## 我的问题

*   这是存储地图的有效方式（考虑到瓷砖的使用），还是有更好的方式来处理地图？

我在沿着一张巨大的地图思考。地图大小很大，而且都是一个二维数组。然而，视口仍然是 512x352 像素。

这是我（针对这个问题）制作的另一个 .gif 以帮助可视化：

![在此处输入图像描述](../Images/1c0d5b9185988f67288bb23931852442.png)

抱歉，如果您看不懂我的英语。请询问任何您无法理解的内容。希望我说清楚了。谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-10T04:12:19.667

好吧，这里有一些事情，所以我会按顺序回复它们。

* * *

## ...521 单独的 PNG 文件？

![在此处输入图像描述](../Images/f44bf086891a000ceb0fc20f6e8255d5.png)

使用一个。只有一个。也许*六*，上衣。想一想，你让每个客户端发出 500 次 GET 请求只是为了获取游戏的*图块*？那是疯子。

几乎每个主要站点都使用 spritemap 来减少请求。例如，Youtube 的所有按钮都使用了这张图片：

![在此处输入图像描述](../Images/8be93d3065cfd6c0eb87236d14c44f5e.png)

你也应该这样做。

* * *

从性能的角度来看，您将画布用作视口的概念是正确的。绝对不要让它比它需要的更大！

* * *

至于您的地图性能问题，巨型阵列应该可以开始。这是处理它的好方法，除非您的词非常非常大，否则我不会费心探索其他选择。如果它很大，您可能拥有 400x400（左右）的世界“块”，当您到达第 400 行时，您开始使用下一个数组的第 0 行。当然，任何时候“使用”的阵列最多为四个，当然，当您的英雄位于一个不错的旧[四个角落](http://en.wikipedia.org/wiki/File:Four_Corners.svg)之类的位置时。

玩家位置不会很难。如果他在 822、20 块，这意味着他在由`(2, 0)`（如果我们从 开始`(0, 0)`）表示的块中。具体来说，他将在该区块的第 22、20 个图块中。没有复杂的数学，没有 ID。无需跟踪 ID。您甚至不必跟踪哪个块是最后一个块。你可以只知道总地图大小是（比如说）1200x1200，如果他试图移动到（1201, 50），你甚至不必查看块是否`(4, 0)`存在。你马上就知道他不能在那里移动，地图只有 1200 格宽！

无论哪种方式，性能都应该很好，并且在您不必担心这个特定数组之前，它实际上将取决于大量其他事情。我的建议是在担心性能之前先考虑制作游戏。游戏变慢后重新审视性能。

一旦你开始表现，我会首先担心*除了*这个问题之外的所有事情。在画布游戏中，它真的不太可能成为瓶颈。从数组中读取速度很快。已经在内存中的大型数组应该很快。*应该没有*问题，在它真正出现之前，我不会花时间去期待它。

* * *

**编辑：**视口随播放器移动的示例：http: [//jsfiddle.net/kmHZt/10/](http://jsfiddle.net/kmHZt/10/)

# php - 如何修复 Websocket 握手代码？

> ID：11406164
> 
> 赞同：3
> 
> 时间：2012-07-10T03:24:44.383
> 
> 标签：php, google-chrome, websocket, phpwebsocket

这可能是一个熟悉的啜泣故事。但是那里有这么多，而且我是一个n00b，我找不到答案，所以如果你能帮助我，我希望你能帮助我。

所以，我正在使用 lemmingzshadow 的 phpwebsocket（如果你不熟悉，谷歌很容易提出这个问题）。据我所知，他发布的版本有一个错误，它不符合 Chrome 20.+ 现在使用的标准。它与握手和安全密钥有关，但这就是我坚持的地方。我知道我需要根据其他问题提供以下内容，希望您能帮助我理解并解决此问题：

Chrome 收到的标头是（已编辑；我显然将消息发布到服务器两次。）：

```
HTTP/1.1 101 Switching Protocols
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Accept: aWXrpLOnEm15mE8+w1zG05ad01k=
Sec-WebSocket-Protocol: QuatroDuo 
```

我的服务器收到的标头是：

```
Upgrade: websocket
Connection: Upgrade
Host: gumonshoe.net:8000
Origin: http://gumonshoe.net
Sec-WebSocket-Key: v3+iw0U78qkwZnp+RWTu3A
Sec-WebSocket-Version: 13
Sec-WebSocket-Extensions: x-webkit-deflate-frame 
```

我不认为cookies是必要的，如果我错了，请纠正我。

我讨厌做下一部分，但我认为将其全部粘贴总比什么都不做并且需要稍后再回来要好。这是读取和解释握手并发送新握手的代码部分。

有帮助：

```
<?PHP
private function handshake($data)
    {   
        $this->log('Performing handshake\r\n\r\n' . $data);  
        $lines = preg_split("/\r\n/", $data);

        // check for valid http-header:
        if(!preg_match('/\AGET (\S+) HTTP\/1.1\z/', $lines[0], $matches)) {
            $this->log('Invalid request: ' . $lines[0]);
            $this->sendHttpResponse(400);
            stream_socket_shutdown($this->socket, STREAM_SHUT_RDWR);
            return false;
        }

        // check for valid application:
        $path = $matches[1];
        $this->application = $this->server->getApplication(substr($path, 1));
            if(!$this->application) {
                $this->log('Invalid application: ' . $path);
                $this->sendHttpResponse(404);           
                stream_socket_shutdown($this->socket, STREAM_SHUT_RDWR);
                $this->server->removeClientOnError($this);
                return false;
            }

        // generate headers array:
        $headers = array();
        foreach($lines as $line)
        {
            $line = chop($line);
            if(preg_match('/\A(\S+): (.*)\z/', $line, $matches))
            {
                $headers[$matches[1]] = $matches[2];
            }
        }

        // check for supported websocket version:       
        if(!isset($headers['Sec-WebSocket-Version']) || $headers['Sec-WebSocket-Version'] < 6)
        {
            $this->log('Unsupported websocket version.');
            $this->sendHttpResponse(501);
            stream_socket_shutdown($this->socket, STREAM_SHUT_RDWR);
            $this->server->removeClientOnError($this);
            return false;
        }

        // check origin:
        if($this->server->getCheckOrigin() === true)
        {
            $origin = (isset($headers['Sec-WebSocket-Origin'])) ? $headers['Sec-WebSocket-Origin'] : false;
            $origin = (isset($headers['Origin'])) ? $headers['Origin'] : $origin;
            if($origin === false)
            {
                $this->log('No origin provided.');
                $this->sendHttpResponse(401);
                stream_socket_shutdown($this->socket, STREAM_SHUT_RDWR);
                $this->server->removeClientOnError($this);
                return false;
            }

            if(empty($origin))
            {
                $this->log('Empty origin provided.');
                $this->sendHttpResponse(401);
                stream_socket_shutdown($this->socket, STREAM_SHUT_RDWR);
                $this->server->removeClientOnError($this);
                return false;
            }

            if($this->server->checkOrigin($origin) === false)
            {
                $this->log('Invalid origin provided. : ' . $origin . ' Legal options were:');
                $gumk = 0;
                foreach(array_keys($this->server->getAllowedOrigins()) as $lo) {
                    $this->log( '[' . $gumk++ . '] : ' . $lo);
                }
                $this->sendHttpResponse(401);
                stream_socket_shutdown($this->socket, STREAM_SHUT_RDWR);
                $this->server->removeClientOnError($this);
                return false;
            }
        }       

        // do handyshake: (hybi-10)
        $secKey = $headers['Sec-WebSocket-Key'];
        $secAccept = base64_encode(pack('H*', sha1($secKey . '258EAFA5-E914-47DA-95CA-C5AB0DC85B11')));
        $response = "HTTP/1.1 101 Switching Protocols\r\n";
        $response.= "Upgrade: websocket\r\n";
        $response.= "Connection: Upgrade\r\n";
        $response.= "Sec-WebSocket-Accept: " . $secAccept . "\r\n";
        $response.= "Sec-WebSocket-Protocol: " . substr($path, 1) . "\r\n\r\n";     
        if(false === ($this->server->writeBuffer($this->socket, $response)))
        {
            return false;
        }
        $this->handshaked = true;
        $this->log('Handshake sent');
        $this->application->onConnect($this);

        // trigger status application:
        if($this->server->getApplication('status') !== false)
        {
            $this->server->getApplication('status')->clientConnected($this->ip, $this->port);
        }

        return true;            
    } 
```

收到以下错误，

```
Error during WebSocket handshake: Sec-WebSocket-Protocol mismatch 
```

由于我在此级别的服务器调试方面基本上没有经验，因此将不胜感激提供比将我链接到文档/规范更详细的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T04:41:50.143

如果你们中的任何一个人用头撞墙，这就是有问题的代码：

```
$response.= "Sec-WebSocket-Protocol: " . substr($path, 1) . 
```

我确信有一种方法可以实际设置所需/可能的协议，但我还不确定它们是什么；而且我不确定它是否对我的目的有必要。如果有人解释了协议切换的用途，我很乐意阅读它，但现在我只是将它从我的代码中删除。

很多谷歌搜索找到这个小问题。

我还在握手中转储了 pack(H*) 代码，根据我正在阅读的内容，这似乎没有必要。我不确定这是否有任何作用，但没有必要让程序正常工作。

# antlr - 如何摆脱ANTLR中我的字符串周围的“？

> ID：11406178
> 
> 赞同：0
> 
> 时间：2012-07-10T03:26:38.800
> 
> 标签：antlr, antlr3

当我使用这些规则获得令牌时

```
STRINGA :   '"' (options {greedy=false;}: ESC | .)* '"';
STRINGB :   '\'' (options {greedy=false;}: ESC | .)* '\''; 
```

它最终抓住`'text'`而不是仅仅`text`。我可以很容易地删除`'`and`'`我自己但想知道如何让 ANTLR 删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T03:32:06.607

一种方法是将字符串内容定义为单独的类别，例如

```
STRINGA : '"' STRINGCONTENTS '"';
STRINGB : '\'' STRINGCONTENTS '\''; 
```

然后捕获 STRINGCONTENTS 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T06:47:26.293

您将需要一些自定义代码。此外，您不应该在规则中使用`.`（点）：您应该明确定义要匹配*除***反斜杠**（假设这是您的`ESQ`开头）、**引号**和**换行符**之外的所有内容。

这样的事情会做到这一点：

```
grammar T;

parse
 : STRING EOF {System.out.println($STRING.text);}
 ;

STRING
 : '"' (ESQ | ~('"' | '\\' | '\r' | '\n'))* '"'
   {
     String matched = getText();
     StringBuilder builder = new StringBuilder();

     for(int i = 1; i < matched.length() - 1; i++) {
       char ch = matched.charAt(i);
       if(ch == '\\') {
         i++;
         ch = matched.charAt(i);
         switch(ch) {
           case 'n': builder.append('\n'); break;
           case 't': builder.append('\t'); break;
           default: builder.append(ch); break;
         }
       }
       else {
         builder.append(ch);
       }
     }

     setText(builder.toString());
   }
 ;

fragment ESQ
 : '\\' ('n' | 't' | '"' | '\\')
 ; 
```

如果您现在解析 input `"tabs:'\t\t\t'\nquote:\"\nbackslash:\\"`，控制台将打印以下内容：

```
标签：''
引用：”
反斜杠：\
```

为了保持语法简洁，您当然可以在自定义方法中移动代码：

```
grammar T;

@lexer::members {
  private String fix(String str) {
    ...
  }
}

parse
 : STRING EOF {System.out.println($STRING.text);}
 ;

STRING
 : '"' (ESQ | ~('"' | '\\' | '\r' | '\n'))* '"' {setText(fix(getText()));}
 ;

fragment ESQ
 : '\\' ('n' | 't' | '"' | '\\')
 ; 
```

# jquery - 找到具有最大左属性的 div

> ID：11406183
> 
> 赞同：0
> 
> 时间：2012-07-10T03:27:54.877
> 
> 标签：jquery

我正在使用以下代码：

```
var divWithTopLeft = null;
var maxLeft = 0;
$('.place').each(function(){
    left = this.style.left.replace('px','');
    if(left > maxLeft )
    {
         maxLeft = left;
         divWithTopLeft = this;
    }   
});
alert(divWithTopLeft.style.left); 
```

但是，它工作不正常。对于我的 makrup 它返回`85`。但是，有 220 或更多的 div。你能解释一下为什么吗？ [演示](http://jsfiddle.net/UAYWD/1/)
谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T03:30:46.527

您必须先将它们转换为数字：

```
var left = parseInt(this.style.left, 10); 
```

这是你的小提琴：http: [//jsfiddle.net/UAYWD/2/](http://jsfiddle.net/UAYWD/2/)

# javascript - 使用 NodeJS 从 HTML 中提取字符串

> ID：11406184
> 
> 赞同：0
> 
> 时间：2012-07-10T03:28:02.563
> 
> 标签：javascript, regex, node.js

这是html...

```
<iframe width="100%" height="166" scrolling="no" frameborder="no" 
src="http://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F11111111&amp;auto_play=false
&amp;show_artwork=true&amp;color=c3000d&amp;show_comments=false&amp;liking=false
&amp;download=false&amp;show_user=false&amp;show_playcount=false"></iframe> 
```

我正在使用 NodeJS。我正在尝试提取 trackID，在本例中`11111111`为`tracks%2F`. 执行此操作的最稳定方法是什么？

我应该使用正则表达式还是一些 JS 字符串方法，例如`substring()`or `match()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-11-04T16:58:48.740

**2019年更新...**

这建立在 blueiur 的答案之上，并更详细地介绍了解决方案。`JSDOM`使用前需要安装：

```
npm install jsdom 
```

现在，根据[文档](https://github.com/jsdom/jsdom)，您可以像这样实例化`JSDOM`：

```
const jsdom = require('jsdom');
const { JSDOM } = jsdom; 
```

您已经有了一些要解析的 html，我将使用您的示例并将其定义为模板文字：

```
const data = `<iframe width="100%" height="166" scrolling="no" frameborder="no" 
src="http://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F11111111&amp;auto_play=false
&amp;show_artwork=true&amp;color=c3000d&amp;show_comments=false&amp;liking=false
&amp;download=false&amp;show_user=false&amp;show_playcount=false"></iframe>`; 
```

这是有趣的部分......在 NodeJS 中解析 html：

```
const { document } = (new JSDOM(data)).window; 
```

这里发生了什么事？您正在使用提供的 HTML 创建一个新的 JSDOM 对象并获取该`document`属性的`window`属性。从这一点开始，您可以`document.getElementsByTagName()`像在浏览器中一样使用和其他类似的功能。

要继续您的具体示例，您希望提取文档`src`中 only 的属性。`iframe`有多种方法可以做到这一点。一个例子是使用`getElementsByTagName`这样的拉第一个`iframe`：

```
const src1 = document.getElementsByTagName('iframe')[0].src; 
```

现在我们有了`src`属性，我们可以将其拆分并处理`url`查询值。这是我们将使用`URL`NodeJS 附带的类的地方。根据[文档](https://nodejs.org/api/url.html)，我们可以通过创建 URL 对象并访问`searchParams`属性来获取搜索参数，如下所示：

```
const params = (new URL(src1)).searchParams; 
```

现在您已经将查询字符串作为一个`URLSearchParams`对象，您可以像这样访问单个术语：

```
const scURL = params.get('src'); 
```

如果您查看`scURL`now 的内容，您会发现它是作为查询传递的嵌入 url，因此我们可以用另一个`URL`对象解析它并提取如下`pathname`属性：

```
const src2 = (new URL(src2)).pathname; 
```

我们现在已经接近了，可以使用 JavaScript 的标准字符串函数将路径拆分为您想要的获取值：

```
const val = src2.split('/')[2]; 
```

并打印结果：

```
console.log(val); 
```

...产生此输出：

```
11111111 
```

总而言之，这是完整的代码：

```
const jsdom = require('jsdom');
const { JSDOM } = jsdom;

const data = `<iframe width="100%" height="166" scrolling="no" frameborder="no" 
src="http://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F11111111&amp;auto_play=false
&amp;show_artwork=true&amp;color=c3000d&amp;show_comments=false&amp;liking=false
&amp;download=false&amp;show_user=false&amp;show_playcount=false"></iframe>`;

const { document } = (new JSDOM(data)).window;

const src1 = document.getElementsByTagName('iframe')[0].src;

const params = (new URL(src1)).searchParams;

const scURL = params.get('src');

const src2 = (new URL(src2)).pathname;

const val = src2.split('/')[2];

console.log(val); 
```

随意巩固它并根据需要消除中间值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T03:39:23.820

如果你知道`tracks%2F`只会出现一次，你可以这样做：

```
var your_track_ID = src.split(/tracks%2F/)[1].split(/&amp/)[0]; 
```

可能有更好的方法，但这应该适合您的目的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T15:44:05.697

您可以使用节点模块 [url + jsdom + qs] 找到曲目

尝试这个

```
var jsdom = require('jsdom');
var url = require('url');
var qs = require('qs');

var str = '<iframe width="100%" height="166" scrolling="no" frameborder="no"'
  + 'src="http://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F11111111&amp;auto_play=false"'
  + '&amp;show_artwork=true&amp;color=c3000d&amp;show_comments=false&amp;liking=false'
  + '&amp;download=false&amp;show_user=false&amp;show_playcount=false"></iframe>';

jsdom.env({
  html: str,
  scripts: [
    'http://code.jquery.com/jquery-1.5.min.js'
  ],
  done: function(errors, window) {
    var $ = window.$;
    var src = $('iframe').attr('src');
    var aRes = qs.parse(decodeURIComponent(url.parse(src).query)).url.split('/');
    var track_id = aRes[aRes.length-1];

    console.log("track_id =", track_id);
  }
}); 
```

结果是：

> track_id = 11111111

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T05:52:04.827

使用正则表达式解析 HTML 通常是一个非常糟糕的主意，但这可能是可以原谅的。为了安全起见，我会寻找完整的 URL：

```
var pattern = /w\.soundcloud\.com.*tracks%2F(\d+)&/
  , trackID = (html.match(pattern) || [])[1] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T21:42:12.637

The Right™ way to to do this is to parse the HTML using some [XML parser](https://github.com/joyent/node/wiki/modules#wiki-parsers-xml) and get the URL that way and then use a reg-exp to parse the URL.

If for some reasons you don't have an infinite amount of time and energy, one of the proposed purely reg-exp solutions would work.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T05:00:58.903

如果曲目 ID 始终为 8 位并且 html 没有更改，您可以执行以下操作：

var trackId = html.match(/\d{8}/)

# javascript - jQuery停止在提交时隐藏div

> ID：11406187
> 
> 赞同：0
> 
> 时间：2012-07-10T03:28:36.427
> 
> 标签：javascript, jquery

我有一个简单的显示/隐藏 div 和 div 上的表单，但是当我提交表单时，div 在重新加载时再次隐藏，我如何停止这种行为？

脚本：

```
$(function() {
  $('.Mbox').hide().click(function(e) {
    e.stopPropagation();
  });      
  $("#Mbutton").click(function(e) {
    $('.Mbox').animate({ opacity: "toggle" });
    e.preventDefault();
  });

}); 
```

分区：

```
<li><div class="Mbox"><input type="text" id="conversation_username" class="span5"  name="conversation_participant[nome]" placeholder="Para: Nome"/>
 <%= text_area :message, :body, :class => "span5", :rows => 5, :placeholder => "Mensagem" %>
 <%= f.button "Send", :class => "botao" %></div></li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T03:47:37.623

听起来就像最初加载页面时，div 是隐藏的，然后单击以显示 div 并填写表单。在提交表单时，页面会重新加载，并且 div 会在您希望它仍然显示时重新加载为隐藏状态。

（假设最初隐藏的 div 是在 CSS 中控制的，因为我在提供的代码中的其他地方看不到它）

如果是这种情况，我认为您有两个选择..

1.  在服务器端处理它，在构建对表单提交的响应时，确保您正在更改要在返回的响应中显示的 div

2.  如果可能的话在客户端处理它，例如，如果表单在重新加载后显示填充的值，但在页面最初加载时从来没有值，你可以编写一些 JS 来显示 div 如果有值在形式。

如果您返回到具有相同数据的同一页面并希望它看起来一样，我还会考虑让页面在表单提交时不完全重新加载。也许您应该通过 AJAX 提交而不重新加载页面？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T03:37:09.640

如果我对您的理解正确，您正在尝试在提交表单后隐藏包装表单的 DIV，看起来好像您使它变得更加复杂，而不是需要。

```
$("#Mbutton").click({
     $(".Mbox").fadeOut(400);
}); 
```

单击#M按钮后，这应该会使 DIV .Mbox 淡出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T03:35:14.463

你太努力了哈哈

```
$(function() {
    $('.Mbox').hide();
    $("#Mbutton").click(function(e) {
        $('.Mbox').show();
    });
 }); 
```

好像^^会做你要求的，如果不解释更多

# c++ - 确定角度是否位于其他两个角度之间

> ID：11406189
> 
> 赞同：19
> 
> 时间：2012-07-10T03:29:17.277
> 
> 标签：c++, math, trigonometry

我试图弄清楚一个角度是否位于其他两个角度之间。我一直在尝试创建一个简单的函数来执行此操作，但我的任何技术都不适用于所有可能的角度值。

**你能帮我编辑我的函数以正确确定一个角度是否位于其他两个角度之间吗？**

![在此处输入图像描述](../Images/55edde8fe6decfc103078b8d4a87353b.png)

在上图中；我使用绿点作为中心点，然后确定每条线与绿点的角度。然后我计算黑点到绿点的角度。我正在尝试检查黑点的角度是否在两条线的角度之间**。**

*注意：就我而言；如果 2 个角度之间的差异 < 180 度并且 targetAngle 位于由这 2 个角度形成的空腔中，则称一个角度（targetAngle）位于其他 2 个角度之间。*

以下代码应该可以工作，但对于这些（确实位于角度之间）失败：
- is_angle_between(150, 190, 110)
- is_angle_between(3, 41, 345)

```
bool is_angle_between(int target, int angle1, int angle2) 
{  
  int rAngle1 = ((iTarget - iAngle1) % 360 + 360) % 360;  
  int rAngle2 = ((iAngle2 - iAngle1) % 360 + 360) % 360;  
  return (0 <= rAngle1 && rAngle1 <= rAngle2);  
}  

// Example usage  
is_angle_between(3, 41, 345); 
```

我尝试的另一种技术也不起作用：

```
int is_angle_between(int target, int angle1, int angle2)
{
  int dif1  = angle1-angle2;
  int dif2  = angle2-angle1;
  int uDif1 = convert_to_positive_angle( dif1 ); // for eg; convert -15 to 345
  int uDif2 = convert_to_positive_angle( dif2 );

  if (uDif1 <= uDif2) {
    if (dif1 < 0) {
      return (target <= angle1 && target >= angle2);
    }
    else return (in_between_numbers(iTarget, iAngle1, iAngle2));
  }
  else {
    if (dif2 < 0) {
      return (target <= angle1 && target >= angle2);
    }
    else return (in_between_numbers(iTarget, iAngle1, iAngle2));
  }

  return -1;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-10T11:13:35.177

```
bool is_angle_between(int target, int angle1, int angle2) 
{
  // make the angle from angle1 to angle2 to be <= 180 degrees
  int rAngle = ((angle2 - angle1) % 360 + 360) % 360;
  if (rAngle >= 180)
    std::swap(angle1, angle2);

  // check if it passes through zero
  if (angle1 <= angle2)
    return target >= angle1 && target <= angle2;
  else
    return target >= angle1 || target <= angle2;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-11-24T11:29:46.800

灵感来自关于[模算术中的区间](https://fgiesen.wordpress.com/2015/09/24/intervals-in-modular-arithmetic/)的帖子：

```
static bool is_angle_between(int x, int a, int b) {
    b = modN(b - a);
    x = modN(x - a);

    if (b < 180) {
        return x < b;
    } else {
        return b < x;
    }
} 
```

其中（在检查角度的情况下）`modN()`将被实现为

```
// modN(x) is assumed to calculate Euclidean (=non-negative) x % N.
static int modN(int x) {
    const int N = 360;
    int m = x % N;
    if (m < 0) {
        m += N;
    } 
    return m;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-08T18:42:48.193

```
void normalize( float& angle ) 
{
    while ( angle < -180 ) angle += 360;
    while ( angle >  180 ) angle -= 360;
}

bool isWithinRange( float testAngle, float a, float b )
{
    a -= testAngle;
    b -= testAngle;
    normalize( a );
    normalize( b );
    if ( a * b >= 0 )
        return false;
    return fabs( a - b ) < 180;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-10T04:17:30.263

如果角度 2 始终为 0，角度 1 始终介于 0 和 180 之间，这将很容易：

```
return angle1 < 180 && 0 < target && target < angle1; 
```

如果我正确阅读了要求。

但到达那里并不难。

```
int reduced1 = (angle1 - angle2 + 360) % 360; // and imagine reduced2 = 0
if (180 < reduced1) { angle2 = angle1; reduced1 = 360 - reduced1; } // swap if backwards
int reducedTarget = (target - angle2 + 360) % 360;
return reduced1 < 180 && 0 < reducedTarget && reducedTarget < reduced1; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-10T16:36:19.420

我以前通过比较角度来做到这一点。

![在此处输入图像描述](../Images/766c17864608cde4f731fb5cb2acb747.png)

在上面的草图中，当且仅当矢量 AD 将在 AB 和 AC 之间

```
angle BAD + angle CAD == angle BAC 
```

由于浮点数不准确，我先将它们四舍五入到小数点后 5 位，然后比较这些值。

所以归结为在两个向量之间有一个角度算法，`p`简单`q`地说如下：

```
double a = p.DotProduct(q);
double b = p.Length() * q.Length();
return acos(a / b); // radians 
```

我将把向量 DotProduct 和 Length 计算留作 google 搜索练习。您只需通过从另一个终端减去一个终端的坐标即可获得向量。

您当然应该首先检查 AB 和 AC 是平行还是反平行。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-23T21:41:52.837

这里所有的热门答案都是错误的。因此，我觉得我有必要发布一个答案。

我只是重新发布我在此处发布的答案的一部分：[https](https://stackoverflow.com/a/42424631/2642059) ://stackoverflow.com/a/42424631/2642059该答案还涉及您已经知道哪个角度是左侧和右侧的情况反射角。但是您还需要确定角度的哪一侧是哪一侧。

* * *

^(如果这些陈述中的任何一个为真，第)一个找到最左边的角度`angle1`是你的最左边的角度：

1.  `angle1 <= angle2 && angle2 - angle1 <= PI`
2.  `angle1 > angle2 && angle1 - angle2 >= PI`

为简单起见，假设你最左边的角度是*l*，你最右边的角度是*r*，你试图找出*g*是否在它们之间。

这里的问题是看起来。我们正在寻找基本上 3 个积极的案例：

1.  *l ≤ g ≤ r*
2.  *l ≤ g ∧ r < l*
3.  *g ≤ r ∧ r < l*

由于您正在计算角度的左侧和右侧，您会注意到这里有一个优化机会同时执行这两个过程。您的函数将如下所示：

```
if(angle1 <= angle2) {
    if(angle2 - angle1 <= PI) {
        return angle1 <= target && target <= angle2;
    } else {
        return angle2 <= target || target <= angle1;
    }
} else {
    if(angle1 - angle2 <= PI) {
        return angle2 <= target && target <= angle1;
    } else {
        return angle1 <= target || target <= angle2;
    }
} 
```

或者，如果您需要它，您可以扩展到这种噩梦般的情况：

```
angle1 <= angle2 ?
(angle2 - angle1 <= PI && angle1 <= target && target <= angle2) || (angle2 - angle1 > PI && (angle2 <= target || target <= angle1)) :
(angle1 - angle2 <= PI && angle2 <= target && target <= angle1) || (angle1 - angle2 > PI && (angle1 <= target || target <= angle2)) 
```

请注意，所有这些数学都假定您的输入是弧度并且在 [0 : 2π] 范围内。

[`Live Example`](http://ideone.com/iwbMqZ)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-07-19T10:33:14.973

是角A和B之间的角T，总是有两个答案：真假。

我们需要指定我们的意思，在这种情况下，我们正在寻找归一化的小扫掠角以及我们的角度是否在这些值之间。给定任意两个角度，它们之间存在一个反射角，T 的归一化值是否在该反射角内？

如果我们旋转 A 和 B 以及 T 使得 T = 0 并将 A 和 B 归一化到 +-半周（180° 或 2PI）内。那么我们的答案是 A 和 B 是否有不同的符号，并且是否在彼此的半周内。

如果我们从测试中减去角度，则添加 180°（因此 A 相对于 T+180）。然后我们通过 360 给我们一个介于 [-360°,360°] 之间的范围，我们添加 360° 并再次 mod（注意，您也可以检查它是否为负数，如果是，则添加 360），给我们一个值为肯定是[0°,360°]。我们减去 180°，得到一个相对于 T+180°-180° 又名 T 的 [-180°,180°] 之间的值。所以 T 现在是零角度，所有角度都在归一化范围内。现在我们检查以确保角度有符号变化并且它们之间的距离不超过 180°，我们就有了答案。

因为问题在 C++ 中提出：

```
bool isAngleBetweenNormalizedSmallSweepRange(int test, int a, int b) {
    int a_adjust = ((((a - test + 180)) % 360) + 360) % 360 - 180;
    int b_adjust = ((((b - test + 180)) % 360) + 360) % 360 - 180;
    return ((a_adjust ^ b_adjust) < 0) && ((a_adjust - b_adjust) < 180) && ((a_adjust - b_adjust) > -180);
} 
```

* * *

我们还可以做一些技巧来简化代码并避免任何不需要的模运算（请参阅下面的注释）。Normalize 会将角度 a 移动到相对于角度 t 的范围 [-180°,180°] 内。

```
int normalized(int a, int test) {
    int n = a - test + 180;
    if ((n > 360) || (n < -360)) n %= 360;
    return (n > 0)? n - 180: n + 180;
}

bool isAngleBetweenNormalizedSmallSweepRange(int test, int a, int b) {
    int a_adjust = normalized(a,test);
    int b_adjust = normalized(b,test);
    return ((a_adjust ^ b_adjust) < 0) &&
            ((a_adjust > b_adjust)? a_adjust-b_adjust: b_adjust-a_adjust) < 180;
} 
```

* * *

此外，如果我们可以确定范围是 [0,360]，我们可以使用更简单的 if 语句

```
bool isAngleBetweenNormalizedSmallSweepRange(int test, int a, int b) {
    int dA = a - test + 180;
    if (dA > 360) {
        dA -= 360;
    }
    int a_adjust = (dA > 0) ? dA - 180 : dA + 180;
    int dB = b - test + 180;
    if (dB > 360) {
        dB -= 360;
    }
    int b_adjust = (dB > 0) ? dB - 180 : dB + 180;
    return ((a_adjust ^ b_adjust) < 0)
            && ((a_adjust > b_adjust) ? a_adjust - b_adjust : b_adjust - a_adjust) < 180;
} 
```

[JS Fiddle 测试代码](https://jsfiddle.net/bb114azp/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-10T03:48:06.360

我从[这个](http://compsci.ca/v3/viewtopic.php?t=6034)线程中找到了这个引用：

> 如果点 P 在三角形 ABC 内，则
> 
> 面积 PAB+面积 PBC +面积 PAC=面积 ABC
> 
> 请注意，如果 P 在 AB、BC 或 CA 的边缘，则上述成立。但实际上，区域 PAB、PBC、PAC 之一是 0（所以只要确保你检查）。
> 
> 如果 P 在外部，则上述等式不成立...
> 
> 如何确定面积？您有两个选择：1）Heron 定理，涉及 sqrt，较慢 2）更优选的方式是叉积（或有效地，绝对值的一半（向下积的总和减去向上积的总和））
> 
> 例如，如果 A=(x1,y1) B=(x2,y2), C=(x3,y3) 面积= abs(x1*y2+x2*y3+x3*y1-x1*y3-x3*y2- x2*y1)/2
> 
> 你也可能要小心浮点错误......而不是检查严格的不等式，检查 abs(ba)

希望这会有所帮助

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-02-16T22:35:33.730

使用与您的问题类似的功能风格，我对以下方法很幸运：

```
 public static bool IsInsideRange(double testAngle, double startAngle, double endAngle)
    {
        var a1 = System.Math.Abs(AngleBetween(startAngle, testAngle));
        var a2 = System.Math.Abs(AngleBetween(testAngle, endAngle));
        var a3 = System.Math.Abs(AngleBetween(startAngle, endAngle));
        return a1 + a2 == a3;
    }

    public static double AngleBetween(double start, double end)
    {
        return (end - start) % 360;
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-03-08T07:53:18.573

我知道这篇文章很旧，但似乎没有一个公认的答案，我发现以下方法非常可靠。尽管它可能超出您的需要。它支持大于 180 度的角度范围（以及大于 360 度和负角度）。它还支持小数精度。

该方法使用此`normalize()`辅助函数将角度转换为正确的空间：

```
float normalize( float degrees )
{
  //-- Converts the specified angle to an angle between 0 and 360 degrees
  float circleCount = (degrees / 360.0f);
  degrees -= (int)circleCount * 360;
  if( 0.0f > degrees )
  {
    degrees += 360.0f;
  }
  return degrees;
} 
```

这是解决方案：

```
bool isWithinRange( float start, float end, float angle )
{
  if( fabsf( end - start ) >= 360.0f )
  {
    //-- Ranges greater or equal to 360 degrees cover everything
    return true;
  }

  //-- Put our angle between 0 and 360 degrees
  float degrees = normalize( angle );

  //-- Resolve degree value for the start angle; make sure it's
  //   smaller than our angle.
  float startDegrees = normalize( start );
  if( startDegrees > degrees )
  {
    startDegrees -= 360.0f;
  }

  //-- Resolve degree value for the end angle to be within the
  //   same 360 degree range as the start angle and make sure it
  //   comes after the start angle.
  float endDegrees = normalize( end );
  if( endDegrees < startDegrees )
  {
    endDegrees += 360.0f;
  }
  else if( (endDegrees - startDegrees) >= 360.0f )
  {
    endDegrees -= 360.0f;
  }

  //-- All that remains is to validate that our angle is between
  //   the start and the end.
  if( (degrees < startDegrees) || (degrees > endDegrees) )
  {
    return false;
  }

  return true;
} 
```

希望这可以帮助某人。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-02-09T18:49:18.990

如果您有角度 $$a$ 和 $b$，并且不想查看角度`x`是否在这些角度之间。

您可以计算 和 之间的`a->x`角度`a->b`。如果`∠a->x`小于`∠a->b`，则`x`必须介于`a`和之间`b`。

到角之间的距离，`a`和`b`

```
function distanceBetweenAngles(a, b) {
    distance = b - a;
    if (a > b) {
       distance += 2*pi;
    }
    return distance;
} 
```

然后你可以做

```
// Checks if angle 'x' is between angle 'a' and 'b'
function isAngleBetween(x, a, b) {
    return distanceBetweenAngles(a, b) >= distanceBetweenAngles(a, x);
} 
```

这假设您使用的是弧度，而不是度数。它删除了很多不必要的代码。

# emacs - 当我使用 sublime 和 emacs 作为 scala 的开发工具时，出现了一些错误

> ID：11406198
> 
> 赞同：1
> 
> 时间：2012-07-10T03:30:13.403
> 
> 标签：emacs, ensime

我用sublime打开ensime项目，ensime服务器启动正常。使用一段时间后，出现以下错误。

处理 RPC: (swank:completions D:\Scala\ensime\src\main\scala\Main.scala 52 0) Writing: 000086(:return (:abort 202 "格式错误的 swank:completions call: (swank:completions D:\ Scala\ensime\src\main\scala\Main.scala 52 0)") 21) 套接字读取器中的错误：java.io.EOFException：在套接字读取器中到达文件末尾。建立连接，创建处理程序...

* * *

当我使用 Emacs 时，从 emacs 内部，执行 Mx ensime。出现以下错误。

d:\myemacs.emacs.d\ensime>set CLASSPATH="d:\myemacs.emacs.d\ensime\bin\..\lib\ant-1.6.5.jar;d:\myemacs.emacs.d\ ensime\bin\..\lib\ant-1.8.1.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\ant-launcher-1.8.1.jar;d:\myemacs. emacs.d\ensime\bin\..\lib\asm-3.2.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\asm-commons-3.2.jar;d:\myemacs. emacs.d\ensime\bin\..\lib\asm-tree-3.2.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\backport-util-concurrent-3.1.jar;d :\myemacs.emacs.d\ensime\bin\..\lib\classworlds-1.1-alpha-2.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\critbit-0.0.4 .jar;d:\myemacs.emacs.d\ensime\bin\..\lib\ensime_2.9.2-RC1-0.9.3.RC4.jar;d:\myemacs.emacs.d\ensime\bin\.. \lib\ivy-2.1.0.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\maven-ant-tasks-2.1.0.jar;d:\myemacs.emacs.d\ ensime\bin\..\lib\maven-artifact-2.2.1.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\maven-artifact-manager-2.2.1.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\maven-error-diagnostics-2.2.1.jar;d:\myemacs。 emacs.d\ensime\bin\..\lib\maven-model-2.2.1.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\maven-plugin-registry-2.2.1 .jar;d:\myemacs.emacs.d\ensime\bin\..\lib\maven-profile-2.2.1.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\maven -project-2.2.1.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\maven-repository-metadata-2.2.1.jar;d:\myemacs.emacs.d\ensime\ bin\..\lib\maven-settings-2.2.1.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\nekohtml-1.9.6.2.jar;d:\myemacs.emacs。 d\ensime\bin\..\lib\org.eclipse.jdt.core-3.6.0.v_A58.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\org.scala-refactoring_2 .9.2-SNAPSHOT-0.5.0-SNAPSHOT.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\plexus-container-default-1.0-alpha-9-stable-1.jar;d :\myemacs.emacs.d\ensime\bin\..\lib\plexus-interpolation-1.11.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\plexus-utils-1.5.15.jar;d:\myemacs.emacs.d\ensime\ bin\..\lib\scala-compiler.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\scala-library.jar;d:\myemacs.emacs.d\ensime\bin\ ..\lib\scalariform_2.9.1-0.1.1.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\wagon-file-1.0-beta-6.jar;d:\myemacs. emacs.d\ensime\bin\..\lib\wagon-http-lightweight-1.0-beta-6.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\wagon-http-shared -1.0-beta-6.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\wagon-provider-api-1.0-beta-6.jar;d:\myemacs.emacs.d\ ensime\bin\..\lib\xercesMinimal-1.9.6.2.jar"1-0.1.1.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\wagon-file-1.0-beta-6.jar;d:\myemacs.emacs.d\ensime\bin \..\lib\wagon-http-lightweight-1.0-beta-6.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\wagon-http-shared-1.0-beta-6。 jar;d:\myemacs.emacs.d\ensime\bin\..\lib\wagon-provider-api-1.0-beta-6.jar;d:\myemacs.emacs.d\ensime\bin\..\ lib\xercesMinimal-1.9.6.2.jar"1-0.1.1.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\wagon-file-1.0-beta-6.jar;d:\myemacs.emacs.d\ensime\bin \..\lib\wagon-http-lightweight-1.0-beta-6.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\wagon-http-shared-1.0-beta-6。 jar;d:\myemacs.emacs.d\ensime\bin\..\lib\wagon-provider-api-1.0-beta-6.jar;d:\myemacs.emacs.d\ensime\bin\..\ lib\xercesMinimal-1.9.6.2.jar"

d:\myemacs.emacs.d\ensime>if "" == "" (设置 ENSIME_JVM_ARGS=-Xms256M -Xmx1512M -XX:PermSize=128m -Xss1M -Dfile.encoding=UTF-8 )

d:\myemacs.emacs.d\ensime>java -classpath "d:\myemacs.emacs.d\ensime\bin\..\lib\ant-1.6.5.jar;d:\myemacs.emacs.d\ ensime\bin\..\lib\ant-1.8.1.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\ant-launcher-1.8.1.jar;d:\myemacs. emacs.d\ensime\bin\..\lib\asm-3.2.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\asm-commons-3.2.jar;d:\myemacs. emacs.d\ensime\bin\..\lib\asm-tree-3.2.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\backport-util-concurrent-3.1.jar;d :\myemacs.emacs.d\ensime\bin\..\lib\classworlds-1.1-alpha-2.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\critbit-0.0.4 .jar;d:\myemacs.emacs.d\ensime\bin\..\lib\ensime_2.9.2-RC1-0.9.3.RC4.jar;d:\myemacs.emacs.d\ensime\bin\.. \lib\ivy-2.1.0.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\maven-ant-tasks-2.1.0.jar;d:\myemacs.emacs.d\ ensime\bin\..\lib\maven-artifact-2.2.1.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\maven-artifact-manager-2.2.1.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\maven-error-diagnostics-2.2.1.jar;d:\myemacs。 emacs.d\ensime\bin\..\lib\maven-model-2.2.1.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\maven-plugin-registry-2.2.1 .jar;d:\myemacs.emacs.d\ensime\bin\..\lib\maven-profile-2.2.1.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\maven -project-2.2.1.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\maven-repository-metadata-2.2.1.jar;d:\myemacs.emacs.d\ensime\ bin\..\lib\maven-settings-2.2.1.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\nekohtml-1.9.6.2.jar;d:\myemacs.emacs。 d\ensime\bin\..\lib\org.eclipse.jdt.core-3.6.0.v_A58.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\org.scala-refactoring_2 .9.2-SNAPSHOT-0.5.0-SNAPSHOT.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\plexus-container-default-1.0-alpha-9-stable-1.jar;d :\myemacs.emacs.d\ensime\bin\..\lib\plexus-interpolation-1.11.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\plexus-utils-1.5.15.jar;d:\myemacs.emacs.d\ensime\ bin\..\lib\scala-compiler.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\scala-library.jar;d:\myemacs.emacs.d\ensime\bin\ ..\lib\scalariform_2.9.1-0.1.1.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\wagon-file-1.0-beta-6.jar;d:\myemacs. emacs.d\ensime\bin\..\lib\wagon-http-lightweight-1.0-beta-6.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\wagon-http-shared -1.0-beta-6.jar;d:\myemacs.emacs.d\ensime\bin\..\lib\wagon-provider-api-1.0-beta-6.jar;d:\myemacs.emacs.d\ ensime\bin\..\lib\xercesMinimal-1.9.6.2.jar" -Xms256M -Xmx1512M -XX:PermSize=128m -Xss1M -Dfile.encoding=UTF-8 org.ensime.server.Server c:/Users/zxu /AppData/Local/Temp/ensime_port.5320 'java' 未被识别为内部或外部命令，可运行的程序或批处理文件。

进程*低级enime-server*异常退出，代码为1

* * *

这个问题困扰了我很久，这两个问题不解决我就睡不着了。谢谢！</p>

我的系统环境： OS: Window 7 64bit JAVA: 1.7 or 1.6 Scala: 2.9.1 final Sbt: 0.11.3 Ensime: ensime_2.9.2-RC1-0.9.3.RC4.tar.gz

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:52:13.273

尝试将 Java 的 bin 目录添加到 PATH 环境变量中。

# memory-management - 现代操作系统中内存分配和分页的区别

> ID：11406200
> 
> 赞同：2
> 
> 时间：2012-07-10T03:30:33.230
> 
> 标签：memory-management, operating-system, virtual-memory

我最近一直在研究操作系统，尤其是内存管理方面。但是，我不确定在[http://en.wikipedia.org/wiki/Memory_management](http://en.wikipedia.org/wiki/Memory_management)中找到的内存管理方案（例如内存池或伙伴系统）与虚拟内存组件（例如分页）之间有什么区别. 他们都完成相同的事情还是不同的事情？它们通常如何在现代操作系统中实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T03:36:28.210

它们是互补的。内存管理通常是指如何分配虚拟地址空间来保存程序中的对象。目标是减少碎片化。

虚拟内存是一个系统，它允许进程相信他们拥有比实际存在更多的内存，允许进程共享部分内存而不用担心保护其余部分等等。操作系统在这里的工作是决定哪些页面应该由物理内存支持，以及如何换出不使用的页面。

# javascript - 在 jQuery 中确定 PHP 的响应

> ID：11406202
> 
> 赞同：2
> 
> 时间：2012-07-10T03:30:56.383
> 
> 标签：javascript, jquery

总而言之，我有一个基本上会在上传完成时触发的功能。我在该函数中有以下代码：

```
onFinish: function (e, data) {
    console.log(data.result);
}, 
```

当我这样做时，我在控制台中得到以下响应：

```
[{
    "name": "1_3266_671641333369_14800358_42187036_5237378_n.jpg",
    "size": 35535,
    "type": "image\/jpeg",
    "url": "\/web\/upload\/1_3266_671641333369_14800358_42187036_5237378_n.jpg",
    "thumbnail_url": "\/web\/upload\/thumbnails\/1_3266_671641333369_14800358_42187036_5237378_n.jpg",
    "delete_url": "\/web\/upload.php?file=1_3266_671641333369_14800358_42187036_5237378_n.jpg",
    "delete_type": "DELETE",
    "upload_type": "video_montage"
}] 
```

我想获取其中的值`upload_type`并基于此执行一些操作，但我不确定如何从我的函数中获取此值。获得此信息的任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T03:37:28.537

`data.result`是一个数组，你需要先访问第一个元素，然后再访问`upload_type`。

尝试`console.log(data.result[0].upload_type);`

***更新：*** 如果data.result是字符串，需要先解析一下。试试

```
var result = JSON.parse(data.result); 
console.log(result[0].upload_type); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T03:36:35.380

您可以通过以下方式访问该`upload_type`属性：

```
onFinish: function (e, data) {
    var uploadType = data.result[0].upload_type;
}, 
```

`data.result[x]`指定在数组的 x 键中抓取对象。如果您的数组中有多个对象，那么您将利用 for 循环来迭代每个键。

要访问其他属性，您将遵循相同的原则。根据所需的操作，您将适当地处理数据。

编辑：以下返回什么？

```
var obj = data.result[0];
for(var item in obj){
   console.log(item + ': ' + obj[item]);
} 
```

演示：http: [//jsfiddle.net/yYHmQ/](http://jsfiddle.net/yYHmQ/)

# splunk - 如何提取正确的字段和计数以在 Splunk 中创建报告？

> ID：11406204
> 
> 赞同：1
> 
> 时间：2012-07-10T03:31:37.437
> 
> 标签：splunk

2012-06-21 23:59:33,902 [G4L11] 调试 - 审核|2012-06-21|23:59:33|4|11|IPM961|PSA Corpo|45|6900|644133||N|N|| |||||||||PCIU 4537852|PCIU 4537852||5||||||||| **是**|A|CL$TCS|Y|682|

我必须创建一个饼图来显示 YES 和 NO 的计数值。首先，我尝试通过 IFX 选项为 autocontirm YES 提取字段，但我得到的结果不正确。示例：总共有 2320 行（2054 为 YES，266 为 NO）但提取后，YES 计数为 2054（正确）但 NO 计数仅为 21。如何正确提取？请帮帮我，非常感谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T23:05:00.610

尝试以下正则表达式：

```
([^\|]+)\|[^\|]+\|[^\|]+\|[^\|]+\|[^\|]+\|$ 
```

# mysql - 查找跨多个表的记录的最小和最大日期

> ID：11406206
> 
> 赞同：4
> 
> 时间：2012-07-10T03:31:56.137
> 
> 标签：mysql, date, ifnull

我有 3 张桌子：

```
file_list => list of all files on web server  
stats_web => number of pageviews from public web  
stats_reg => number of pageviews from "registered users" 
```

我在[http://sqlfiddle.com/#!2/98c6a/1/0上有架构和一些示例数据](http://sqlfiddle.com/#!2/98c6a/1/0)

我正在尝试计算文件首次被公众或注册用户点击的日期。

当前 SQL 如下所示：

```
SELECT
    list.path,
    list.mod_date,
    IF(MIN(ifnull(web.hit_date, 0000-00-00)) < MIN(ifnull(reg.hit_date, 0000-00-00)), MIN(ifnull(web.hit_date, 0000-00-00)), MIN(ifnull(reg.hit_date, 0000-00-00))) AS 'min_date',
    IF(MAX(ifnull(web.hit_date, 0000-00-00)) > MAX(ifnull(reg.hit_date, 0000-00-00)), MAX(ifnull(web.hit_date, 0000-00-00)), MAX(ifnull(reg.hit_date, 0000-00-00))) AS 'max_date',    
    SUM(ifnull(web.pages, 0)) + SUM(ifnull(reg.pages, 0)) AS 'page_views'
FROM
    file_list list
    LEFT JOIN
         stats_web web ON list.path = web.path
    LEFT JOIN
         stats_reg reg ON list.path = reg.path
WHERE
list.path LIKE '/web/htdocs/%'
GROUP BY list.path; 
```

问题是，如果一条记录仅出现在一个统计表中，则最小日期始终为 0。这是因为 MIN 和 MAX 上的 ifnull() 但如果我不使用 ifnull() 那么 min 和 max日期返回 NULL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T03:38:36.770

您应该使用遥远将来的日期作为`ifnull`用于比较最小值的第二个参数。否则，第一个`null`将成为`0000-00-00`最小值，并且由于它是最早的日期，因此没有其他日期能够超过它成为最小值。

如果您将查询的第四行更改为

```
IF(MIN(ifnull(web.hit_date, 9999-12-31)) < MIN(ifnull(reg.hit_date, 9999-12-31)), MIN(ifnull(web.hit_date, 9999-12-31)), MIN(ifnull(reg.hit_date, 9999-12-31))) AS 'min_date' 
```

你应该得到正确的结果。

# jsf - 为什么 h:selectOneRadio 没有“名称”属性？

> ID：11406215
> 
> 赞同：0
> 
> 时间：2012-07-10T03:33:16.227
> 
> 标签：jsf, jsf-2, custom-component

我想用 SelectOneRadio 做一些疯狂的分组，所以我决定创建我自己的自定义组件，允许我指定标签的`name`属性`<input>`（如您所知，`name`这意味着单选按钮在同一个组中）。渲染器是正确的，所以我有一个`<input>`曾经像这样渲染的

```
<input name="myForm:test1" id="myForm:test1:0" value="0" type="radio"> 
```

现在像这样渲染

```
<input name="foo" id="myForm:test1:0" value="0" type="radio"> 
```

但是，当我提交表单时，EL 停止工作（对于 h:commandButton 和 p:commandButton 也是如此）。所以如果我有这个

```
<xxx:selectOneRadio id="test1" value="#{myBean.selectedFood}"> 
```

然后 EL 工作，`selectedFood`打印出更正的值，但如果我输入

```
<xxx:selectOneRadio id="test1" value="#{myBean.selectedFood}" groupId="foo"> 
```

这将`name=foo`在`<input>`标签中。然后EL绑定停止工作。`selectedFood`是`null`。

更有趣的是，如果我把这个

```
<xxx:selectOneRadio id="test1" value="#{myBean.selectedFood}" groupId="myForm:test1"> 
```

这`myForm:test1`是正确的客户端 ID，然后 EL 绑定再次工作，所以看起来不是我的代码使绑定停止工作。**JSF 是否需要客户端 ID`name`的标记属性？`input`**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:14:59.780

成为 HTTP 请求参数名称，这`name`必须用于收集提交的 HTTP 请求参数值。这默认为 JSF 组件客户端 ID，并且收集发生在（或自身）的`decode()`方法中。您还需要覆盖/实现of以更改获取请求参数值的方式。`Renderer``UIComponent``decode()``Renderer`

# scala - 演员没有反应

> ID：11406220
> 
> 赞同：1
> 
> 时间：2012-07-10T03:34:30.347
> 
> 标签：scala, actor, scala-2.9

看一下代码片段：

```
import scala.actors.Actor._

object ActorTest1 extends Application {
  val caller = self

  val badActor = actor {
     receive {
        case msg =>
          println(Thread.currentThread()+ " "+msg)
          caller ! "bbbb"
     }
  }

  badActor ! "aaaa"
  receive {
     case a: String => println(Thread.currentThread() + " " + a)
  } 
```

}

在 badActor 向发送者响应“bbbb”后，整个应用程序被阻塞。但如果我`caller ! "bbbb"`改为`sender ! "bbbb"`，它将起作用。

谁能解释为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T04:06:18.813

我认为您的调用者引用实际上是对自我的引用，它不是演员实例！:-)

相反，发件人是一个有效的实例，你可以在这里看到：http: [//doc.akka.io/docs/akka/snapshot/scala/actors.html](http://doc.akka.io/docs/akka/snapshot/scala/actors.html)

# sql - 如何使用 WHERE 子句调整 ActiveRecord（或直接 SQL）查询以在 JOIN 上包含零计数记录

> ID：11406221
> 
> 赞同：0
> 
> 时间：2012-07-10T03:34:35.713
> 
> 标签：sql, ruby-on-rails, activerecord

我有一个关于在 ActiveRecord 中形成查询的问题，但也为不熟悉 ActiveRecord 的人提供了 SQL。

我有以下模型类：

```
class Shoe < ActiveRecord::Base
  has_many :purchases

  def self.available_shoes
    #show all shoes that have been purchased less than num_in_stock
    num_in_stock = 3
    Shoe.includes(:purchases)
        .group("purchases.shoe_id")
        .having("COUNT(purchases.shoe_id) < ?", num_in_stock)
  end

  def self.available_shoes_for_user(user)
    #show all available_shoes that a user hasn’t already purchased
    Shoe.available_shoes.where("purchases.user_id != ?", user.id)
  end
end 
```

该方法`Shoe.available_shoes`按预期工作，因为它将返回所有购买次数少于库存数量的鞋子（在本例中为 3），包括购买次数为零的鞋子。

当我打电话时出现问题`Shoe.available_shoes_for_user(user)`，它会显示所有已购买的鞋子，但不显示购买量为零的可用鞋子。

我提取了下面的原始 SQL：

```
#Shoe.available_shoes
SELECT shoes.*, purchases.* FROM shoes LEFT OUTER JOIN purchases ON purchases.shoe_id = shoes.id GROUP BY shoe_id HAVING COUNT(purchases.shoe_id) < 3

#Shoe.available_shoes_for_user(User.find(5))
SELECT shoes.*, purchases.* FROM shoes LEFT OUTER JOIN purchases ON purchases.shoe_id = shoes.id WHERE (purchases.user_id != 5) GROUP BY shoe_id HAVING COUNT(purchases.shoe_id) < 3 
```

**问题 1：**我怎样才能`Shoe.available_shoes_for_user(user)`按预期工作（即显示所有购买次数少于 3 次（包括 0 次）且客户尚未购买的鞋子？

**问题2：**从长远来看，当有几十万/几百万只鞋子时，这个问题的最佳解决方案是什么？

提前致谢！

============================ **一个解决方案**（仅适用于 MySQL 而不是 PostgresSQL）感谢@Frederick Cheung 指路

```
class Shoe < ActiveRecord::Base
  has_many :purchases

  def self.available_shoes
    #show all shoes that have been purchased less than num_in_stock
    num_in_stock = 3
    Shoe.includes(:purchases)
        .group("purchases.shoe_id")
        .having("COUNT(purchases.shoe_id) < ?", num_in_stock)
  end

  def self.available_shoes_for_user(user)
    #show all available_shoes that a user hasn’t already purchased
    Shoe.available_shoes
         .joins("LEFT OUTER JOIN purchases purchased_by_user ON purchased_by_user.shoe_id = shoes.id AND purchased_by_user.user_id = '#{user.id}'")
         .where("purchased_by_user.id IS NULL")
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T08:01:00.250

如果没有购买鞋子，左连接意味着对于该鞋子，结果集的购买表中的所有列都将为 NULL。

您正在应用一个`where purchases.user_id != 5`子句来删除该用户的购买，但这也过滤掉了 NULL 行。您可以将该条件更改为

```
where purchases.id is null or purchases.user_id != 5 
```

但是我认为这仍然不能满足您的要求：如果该客户和其他客户购买了鞋子，这只会使报告的计数为 1 而不是 2，而不是完全删除该行

您可以通过第二次加入购买表来做到这一点

```
left outer join purchases on purchases.shoe_id = shoes.id
left outer join purchases purchased_by_user on purchased_by_user.shoe_id = shoes.id and purchased_by_user.user_id = 5 
```

然后，您的 where 子句只需要确保`purchased_by_user.id is null`，这表示数据库找不到具有该 user_id 的该鞋的购买

# php - 来自 2 个表的 MySql 会话

> ID：11406224
> 
> 赞同：0
> 
> 时间：2012-07-10T03:35:03.183
> 
> 标签：php, mysql, session, login

我将从 2 个表进行登录会话。如果用户名和密码匹配，则进行操作连接表。而不是从连接表中的所有字段进行会话。有人知道那个查询吗？

我一直在尝试但它不起作用：

```
$sql = "SELECT * FROM table1, table2 WHERE username='$username' && password='$password' && table1.FK = table2.PK)"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T03:41:50.170

尝试将你`&&`的 s换成`AND`s

如果这不起作用，您能否让我们知道您的查询的实际输出是什么？

# oracle - Oracle查询将结果行与另一行进行比较，如果找到匹配则输出

> ID：11406230
> 
> 赞同：1
> 
> 时间：2012-07-10T03:35:24.103
> 
> 标签：oracle, cursor, compare

我有一个数据集，我试图找到相互引用的结果。我有一个表，其中包含“应用程序”。应用程序涉及 2 方（人）。这些是“申请人”和“接收者”。

我需要了解如何获取“A”人是申请人和“B”人是接收人的数据，然后他们在哪里反向转发了另一个申请。因此，“B”人是申请人，“A”人是接收人。我需要将这两行都作为结果集中的 1 行返回。

我的数据结构如下所示：

```
Application ID, Applicant Name, Applicant DOB, Receiver Name, Receiver DOB
1, Bob SMITH, 12/06/1980, Joe SMITH, 10/10/1979
2, Joe SMITH, 10/10/1979, Bob SMITH, 12/06/1980
3, Betty DAVIS, 15/05/1986, Barry DAVIS, 29/07/1981
4, Barry DAVIS, 29/07/1981, Betty DAVIS, 15/05/1986 
```

如您所见，有 4 个应用程序，但实际上只有 2 个“交叉应用程序”。我试图让最终结果看起来像这样，显示独特的跨应用程序：

```
Application ID 1, Applicant Name 1, Applicant DOB 1, Receiver Name 1, Receiver DOB 1, Application ID 2, Applicant Name 2, Applicant DOB 2, Receiver Name 2, Receiver DOB 2
1, Bob SMITH, 12/06/1980, Joe SMITH, 10/10/1979, 2, Joe SMITH, 10/10/1979, Bob SMITH, 12/06/1980
3, Betty DAVIS, 15/05/1986, Barry DAVIS, 29/07/1981, 4, Barry DAVIS, 29/07/1981, Betty DAVIS, 15/05/1986 
```

我唯一可以比较两个应用程序的是名称和 DOB（这是对我的约束。这很烦人，因为有时人们拼写不同的名称或输入错误的 DOB）。我只想返回两个人都匹配的交叉应用程序。

我想我需要将行“N”加载到游标中，并将名称和 DOB 与数据集中的每一行（N+1 到 N+n）进行比较，如果找到任何匹配项，则将它们放入输出并移动到下一行。我不确定如何做到这一点，如果有人可以提供任何建议，我希望得到一些帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:00:12.367

请尝试以下

```
 SELECT A.Application_ID "Application ID1",
           A.Applicant_Name "Applicant_Name1",
           A.Applicant_DOB "Applicant_DOB1",
           A.Receiver_Name "Receiver_Name1",
           A.Receiver_DOB "Receiver_DOB1",
           B.Application_ID "Application ID2",
           B.Applicant_Name "Applicant_Name2",
           B.Applicant_DOB "Applicant_DOB12",
           B.Receiver_Name "Receiver_Name2",
           B.Receiver_DOB "Receiver_DOB2"

      FROM     Applications A, Applications B
      WHERE   A.Applicant_Name=B.Receiver_Name
      AND      B.Applicant_Name=A.Receiver_Name
                AND      B.Receiver_DOB =A.Applicant_DOB 
                AND      A.Receiver_DOB =B.Applicant_DOB; 
```

# node.js - javascript/socket.io -- 带有 twitter 问题的 Socket.IO 授权

> ID：11406233
> 
> 赞同：1
> 
> 时间：2012-07-10T03:35:58.193
> 
> 标签：node.js, socket.io

所以我编写了一个带有“授权”逻辑的 Socket.IO 应用程序，以确保用户在允许用户连接到 websocket 服务器之前登录到 Twitter。但我遇到的问题是，client.js 在用户单击 TWITTER LOGIN（io 授权检查）之前尝试执行 io.connect，但由于尚未通过身份验证，该操作失败。当用户最终单击 Twitter 登录并通过 OAuth 过程时，套接字不会连接，因为套接字身份验证逻辑已经从初始连接失败。

服务器.js

```
// routes
app.get('/auth/twitter', passport.authenticate('twitter'), function(req, res){});
app.get('/auth/twitter/callback', passport.authenticate('twitter', { failureRedirect: '/login' }), function(req, res){
    res.redirect('/authed');
});

// socket auth
parseCookie = require('connect').utils.parseCookie;
io.configure(function () {
io.set('authorization', function (data, accept) {
    if (data.headers.cookie) {
        data.cookie = parseCookie(data.headers.cookie);
        data.sessionID = data.cookie['session.sid'];
        sessionStore.get(data.sessionID, function (err, session) {
            if (err || !session || (typeof session.twitter.user == 'undefined')) {
                accept(null, false);
            }
            else {
                data.session = session;
                accept(null, true);
            }
        });
    }
    else {
        return accept(null, false);
    }
});

io.sockets.on('connection', function (socket) {
    console.log('authenticated!');
    socket.on('hooray', function(){
        console.log('client message received');
    });
}); 
```

客户端.js

```
var socket = io.connect(http://example.com); // connect to server.js code
socket.on('connect', function() {
    alert('client connected!');
    socket.emit('hooray');
});

// code for twitter link url for user to authenticate
<a href="www.example.com/twitter/auth">twitter login!</a> 
```

所以问题是......服务器端的“连接”和客户端的“连接”功能都没有运行，因为用户还没有登录到 Twitter。当用户最终登录时，套接字授权功能已经失败。

我怎样才能使客户端在用户实际登录之前不尝试连接？我是否将其保存在不同的文件中并稍后导入？我是否在授权函数中编写了一些服务器回调？我的 javascript 很弱，因为我正在与 socket.io 一起学习 javascript。请指教，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:53:03.217

如果您使用 ejs 进行渲染，代码将如下所示：

服务器.js

```
 app.get("/authed", function (req, res) {
      res.render("authed", {});
  }); 
```

布局.ejs

```
 <body>
    <div>
      <%- body %>
    </div>
  </body> 
```

索引.ejs

```
 <a href="www.example.com/twitter/auth">twitter login!</a> 
```

authed.ejs

```
 <script type="text/javascript" src="/socket.io/socket.io.js"></script>
  <script type="text/javascript">
  var socket = io.connect();
  socket.on('connect', function() {
     alert('client connected!');
     socket.emit('hooray');
  });
  </script>

  ...
  ...

  render whatever else 
```

希望这可以帮助。

# coding-style - Puppet：如果> 80个字符，如何将命令包装成两行？

> ID：11406234
> 
> 赞同：28
> 
> 时间：2012-07-10T03:36:00.890
> 
> 标签：coding-style, puppet

在 puppet 中，如果定义命令 > 80 个字符，我该如何换行成两行？

```
 exec { 'create_domain':
    command => "some command exceed 80 character...........................................................how to do how to do?.......",
  } 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-10T06:09:00.633

这有点难看，但如果字符串中的最后一个字符是 a`\`后跟换行符，那么该字符串将在下一行继续。我的`sample.pp`清单如下：

```
exec { 'wrapped_string_example':
  command => "/bin/echo 12345678901234567890123456789012345678901234567890\
wrapped > /var/tmp/test.txt";
} 
```

运行它`puppet apply sample.pp`会给出以下输出

```
$ puppet apply sample.pp
notice: /Stage[main]/Exec[wrapped_string_example]/returns: executed successfully
notice: Finished catalog run in 0.10 seconds 
```

并且 catting 创建的文件显示行已换行：

```
$ cat /var/tmp/test.txt 
12345678901234567890123456789012345678901234567890wrapped 
```

请参阅[https://github.com/puppetlabs/puppet/blob/9fbb36de/lib/puppet/parser/lexer.rb#L537](https://github.com/puppetlabs/puppet/blob/9fbb36de/lib/puppet/parser/lexer.rb#L537)（自 Puppet v2.7.0 起）

这也是一个已知问题：[http ://projects.puppetlabs.com/issues/5022](http://projects.puppetlabs.com/issues/5022)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-06-20T09:49:16.423

对于大块数据，heredocs 是处理 Puppet manifest 中长行的最佳方式。`/L`插值选项特别有用。`/L`导致`\`在行尾删除换行符。例如，以下内容符合您的预期，去除缩进和换行符，包括尾随换行符。

```
 sshkey { 'example.com':
    ensure  => present,
    type    => 'ssh-rsa',
    key     => @(KEY/L),
      RfrXBrU1T6qMNllnhXsJdaud9yBgWWm6OprdEQ3rpkTvCc9kJKH0k8MNfKxeBiGZVsUn435q\
      e83opnamtGBz17gUOrzjfmpRuBaDDGmGGTPcO8Dohwz1zYuir93bJmxkNldjogbjAWPfrX10\
      8aoDw26K12sK61lOt6GTdR9yjDPdG4zL5G3ZjXCuDyQ6mzcNHdAPPFRQdlRRyCtG2sQWpWan\
      3AlYe6h6bG48thlo6vyNvOD8s9K0YBnwl596DJiNCY6EsxnSAhA3Uf9jeKqlVqqrxhEzHufx\
      07iP1nXIXCMUV
      |-KEY
    target  => '/home/user/.ssh/authorized_keys',
  } 
```

或者要保留最后的换行符，请省略`-`结束文本之前的内容：

```
exec { 'create_domain':
  command => @(CMD/L),
    /bin/echo 123456789012345678901234567890123456789012345678901234567890123456\
    wrapped > /var/tmp/test.txt
    | CMD
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-03-06T21:54:13.883

从 Puppet 3.5 开始，您有几个我使用过的选项。Ruby 允许您在几行上连接字符串。

```
string = "line #1"\
         "line #2"\
         "line #3"

p string # => "line #1line #2line #3" 
```

另一种选择，从 Puppet 3.5 开始，他们添加了 HereDoc 功能。这将允许您将字符串放在源代码文件的一部分中，该部分被视为一个单独的文件。

```
$mytext = @(EOT)
    This block of text is
    visibly separated from
    everything around it.
    | EOT 
```

木偶文档在这里：[https ://docs.puppet.com/puppet/4.9/lang_data_string.html#heredocs](https://docs.puppet.com/puppet/4.9/lang_data_string.html#heredocs)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-31T20:12:11.310

如果您真的关心 80cols 的限制，您可以随时滥用模板来实现该目标

```
exec {'VeryLongExec':
    command => template("${module}/verylongexec")
 } 
```

然后将实际命令放入该模板文件中

学分应该归功于 Jan Vansteenkiste 来计算

# android - 在安卓手机上捕获系统音频

> ID：11406238
> 
> 赞同：2
> 
> 时间：2012-07-10T03:36:21.207
> 
> 标签：android, audio, stream, system, root

我想将我的 android 手机的所有音频流式传输到 PC。我知道用无根电话捕捉系统音频是不可能的。有根手机可以吗？有谁知道我如何实现这一目标？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-10T03:44:21.760

在用户空间或内核音频驱动程序中修改surfaceflinger，或在它们之间插入一些东西。

# javascript - jQuery/Ajax 内容更新器不断刷新

> ID：11406243
> 
> 赞同：0
> 
> 时间：2012-07-10T03:36:47.680
> 
> 标签：javascript, jquery, html

我有以下代码：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js"></script>
<script>
var auto_refresh = setInterval(function() {
    $('#loaddiv').fadeOut('slow').load('/resources/latest.php').fadeIn("slow");
}, 5000);
</script>
<div id="loaddiv" style="text-align:center">
<?php
    require_once("{$_SERVER['DOCUMENT_ROOT']}/resources/latest.php");
?>
</div> 
```

每次加载时，页面都会跳起来，这使得阅读更新的内容变得不可能，因为使用率更高，知道我该如何解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T20:23:50.307

替换`fadeIn`和以便在加载时`fadeOut`不将元素设置为。`fadeTo``display:none`

```
var auto_refresh = setInterval(function() {
    $( '#loaddiv' ).fadeTo('slow',0).load('/resources/latest.php').fadeTo("slow",1);
}, 5000); 
```

但是...如果您每 5 秒隐藏一次 div，那不会无论如何都会打断用户吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T03:39:33.773

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js"></script>
<script>
var auto_refresh = setInterval(function(){
$ ('#loaddiv').fadeOut('slow').load('/resources/latest.php').fadeIn("slow");
}, 5000);
</script>
    <div id="loaddiv" style="text-align:center">
        <?php
            require_once($_SERVER['DOCUMENT_ROOT']."/resources/latest.php");
        ?>
    </div> 
```

Idk 很多关于其他移动部分是什么，但有几个语法错误。

# ios - MPMoviePlayerViewController 挂在加载屏幕上

> ID：11406245
> 
> 赞同：1
> 
> 时间：2012-07-10T03:36:51.190
> 
> 标签：ios, xcode, video, mpmovieplayercontroller

我有在我的应用程序中记录屏幕的代码，然后我希望能够回放它。我已经用倒带，播放和快进按钮进入黑色加载屏幕，但它在加载时挂起，没有播放任何内容。

此代码播放剪辑：

-(IBAction)playMovie:(id)sender
{

```
MPMoviePlayerViewController *movieViewController = [[MPMoviePlayerViewController alloc] initWithContentURL:locationOfVideoURL];
movieViewController.moviePlayer.movieSourceType = MPMovieSourceTypeFile;
[self presentMoviePlayerViewControllerAnimated:movieViewController]; 
```

}

我相信这个问题与 locationOfVideoURL 变量有关。我能够打印它，它似乎应该工作。

这里打印出来：

file://localhost/Users/myusername/Library/Application%20Support/iPhone%20Simulator/5.1/Applications/[遗漏，个人信息]/Documents/Videoclip.mp4

有任何想法吗？任何帮助将不胜感激！谢谢你

编辑：视频剪辑的位置：

```
 NSString *outputPath = [[NSString alloc] initWithFormat:@"%@/%@",         [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0], @"Videoclip.mp4"];

      NSURL *outputURL = [[NSURL alloc] initFileURLWithPath:outputPath];
      NSLog(@"Completed recording, file is stored at:  %@", outputURL); 
```

# android - android中的简单标签

> ID：11406246
> 
> 赞同：0
> 
> 时间：2012-07-10T03:36:52.717
> 
> 标签：android, tabs

如何在没有任何意图或视图的 android 简单选项卡中实现（如 TabHost 中）？

我只需要标签标题并想听标签索引如何变化。

或者告诉我如何实现多位置开关。

UPD：我使用 api v14 和 ActionBar 选项卡已用于其他目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T03:56:24.327

最简单的解决方案（当然，在我看来）是简单地使用三个不同的 ImageViews 或 Buttons 来模仿“标签”。您可以根据需要将“未选择的选项卡”图像换成“选定的选项卡”图像。

据我所知，除了 TabHosts 和其他需要针对不同选项卡的活动、片段或视图的此类解决方案之外，没有简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T05:43:15.397

不久前我有一个类似的项目，我只需要监听选项卡的变化。这是谷歌的一个很好的例子：

```
public class MyPagerAdapter extends FragmentPagerAdapter
        implements TabHost.OnTabChangeListener, ViewPager.OnPageChangeListener {
    private final Context mContext;
    private final TabHost mTabHost;
    private final ViewPager mViewPager;

private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

private class TabInfo {
    @SuppressWarnings("unused")
    private final String tag;
    private final Class<?> clss;
    private final Bundle args;

    public TabInfo(String _tag, Class<?> _clss, Bundle _args) {
        tag = _tag;
        clss = _clss;
        args = _args;       
            }
}

private class DummyFactory implements TabHost.TabContentFactory {

    private final Context mContext;

    public DummyFactory(Context context) {
        mContext = context;
    }
    public View createTabContent(String tag) {
        View v = new View(mContext);
        v.setMinimumHeight(0);
        v.setMinimumWidth(0);
        return v;
    }

}
public MyPagerAdapter(FragmentActivity activity, TabHost tabHost, ViewPager viewPager) {
    super(activity.getSupportFragmentManager());

    mContext = activity;
    mTabHost = tabHost;
    mViewPager = viewPager;

    mTabHost.setOnTabChangedListener(this);
    mViewPager.setAdapter(this);
    mViewPager.setOnPageChangeListener(this);
}

public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args) {
    tabSpec.setContent(new DummyFactory(mContext));

    String tag = tabSpec.getTag();

    TabInfo tab = new TabInfo(tag, clss, args);
    mTabs.add(tab);
    mTabHost.addTab(tabSpec);
    this.notifyDataSetChanged();

}

@Override
public Fragment getItem(int i) {
    TabInfo tab = mTabs.get(i);
    Fragment fragment = Fragment.instantiate(mContext, tab.clss.getName(), tab.args);
    Log.d("DEBUG", "getItem from view pager called returning hash: " + fragment.hashCode());
    return fragment;
}

@Override
public int getCount() {

    return mTabs.size();
}

public void onPageScrollStateChanged(int arg0) {
    // TODO Auto-generated method stub

}

public void onPageScrolled(int arg0, float arg1, int arg2) {
    // TODO Auto-generated method stub

}

public void onPageSelected(int position) {
    // Unfortunately when TabHost changes the current tab, it kindly
    // also takes care of putting focus on it when not in touch mode.
    // The jerk.
    // This hack tries to prevent this from pulling focus out of our
    // ViewPager.
    TabWidget widget = mTabHost.getTabWidget();
    int oldFocusability = widget.getDescendantFocusability();
    widget.setDescendantFocusability(ViewGroup.FOCUS_BLOCK_DESCENDANTS);
    mTabHost.setCurrentTab(position);
    widget.setDescendantFocusability(oldFocusability);
}

public void onTabChanged(String tabId) {
    int position = mTabHost.getCurrentTab();

    mViewPager.setCurrentItem(position);

}
 } 
```

这里的相关部分是适配器实现`TabHost.OnTabChangeListener`并且在构造函数的主体中，相应地设置了 onTabChangedListener ( `mTabHost.setOnTabChangedListener(this)`)

您还会注意到内部类`DummyFactory`

```
private class DummyFactory implements TabHost.TabContentFactory {

    private final Context mContext;

    public DummyFactory(Context context) {
        mContext = context;
    }
    public View createTabContent(String tag) {
            View v = new View(mContext);
        v.setMinimumHeight(0);
        v.setMinimumWidth(0);
        return v;
    }
} 
```

用于`addTab`创建0`height`和`width`0 的内容视图，允许您在布局中的 TabHost 下添加实际内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T05:46:30.933

这是一个例子

假设 se01、se02 和 se03 是水平 LinearLayout 或 ScrollView 中的三个按钮（如果您想支持更多选项卡）。因此，您可以在每个按钮上设置 onClickListeners 并对其进行编程以在单击时切换到特定背景（这可能显示选项卡已被选中）。这是最简单的方法。这是一个代码片段，很容易理解。希望这可以帮助 ：-）

```
 //initialize the first button to be 'selected' when the activity is started by a background which is similar to the other buttons but shows the selected button/tab as highlighted.

    se01.setBackgroundResource(R.drawable.popup_full_dark2);
    lastClicked = (Button) findViewById(R.id.ph_s01);//this keeps a track of the last tab/button pressed
    toSe01();// a function which performs the changes to the view with respect to the tab selected

    //Listeners
    se01.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if (v.getId() != lastClicked.getId()) {
                lastClicked
                        .setBackgroundResource(R.drawable.popup_bottom_dark);//changes the background to show the tab is selected
                v.setBackgroundResource(R.drawable.popup_full_dark2);
                lastClicked = se01;
                s.startAnimation(new Animation9());
                toSe01();
                s.scrollTo(0, 0);
            }
        }
    });
    se02.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {

            // TODO Auto-generated method stub
            if (v.getId() != lastClicked.getId()) {
                lastClicked
                        .setBackgroundResource(R.drawable.popup_bottom_dark);
                v.setBackgroundResource(R.drawable.popup_full_dark2);
                lastClicked = se02;
                s.startAnimation(new Animation9());
                toSe02();
                s.scrollTo(0, 0);
            }
        }
    });
    se03.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {

            // TODO Auto-generated method stub
            if (v.getId() != lastClicked.getId()) {
                lastClicked
                        .setBackgroundResource(R.drawable.popup_bottom_dark);
                v.setBackgroundResource(R.drawable.popup_full_dark2);
                lastClicked = se03;
                s.startAnimation(new Animation9());
                toSe03();
                s.scrollTo(0, 0);
            }
        }
    }); 
```

# cordova - 如何在不使用插件的情况下创建跨平台标签栏？

> ID：11406248
> 
> 赞同：1
> 
> 时间：2012-07-10T03:37:06.910
> 
> 标签：cordova, tabbar

我正在使用 phonegap 开发跨平台应用程序。有什么方法可以在不使用插件的情况下创建类似于原生 iOS 应用程序的标签栏？如果没有，我应该如何进行跨平台开发？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T20:55:12.250

你可以看看 KendoUI (http://kendoui.c​​om)。它不是免费的（移动设备，我认为每个开发人员大约 200 美元），但它在 iOS、Android 和黑莓上做了一个非常好的跨平台 html/css/js 标签栏。

# php - 是否有任何用于复杂 Web 应用程序的 symfony2 教程

> ID：11406250
> 
> 赞同：2
> 
> 时间：2012-07-10T03:37:19.563
> 
> 标签：php, symfony

我必须在 symfony 2 中开发复杂的 Web 应用程序，我有 20 个数据库实体和多对多关系。

我是一位经验丰富的程序员，但我对这个 symfony 和 OOP 很陌生。

是否有任何教程可以让ii看到许多实体和存储库及其关系作为开始的示例

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T09:58:24.510

[KnpBundles.com](http://www.knpbundles.com)相当复杂，可以在[github](https://github.com/KnpLabs/KnpBundles)上找到。

[LilaConceptsBestPracticeBundle](https://github.com/LilaConcepts/LilaConceptsBestPracticeBundle)是另一个很棒的包，展示了 Symfony 2.1 的最佳实践（包括与 Travis CI、代码样式修复器、Composer 等的集成）。

我向所有正在寻找最佳实践的人（比如我）强烈推荐这些。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T04:37:26.193

我不知道任何非常复杂的 Symfony2 教程尚未公开，但这里有一些很好的教程帮助我在第一次学习 Symfony2 时开始：

1) Symblog：[http ://tutorial.symblog.co.uk/](http://tutorial.symblog.co.uk/)

2）Jobeet：[http ://sftuts.com/doc/jobeet/en/starting-up-the-project](http://sftuts.com/doc/jobeet/en/starting-up-the-project)

但我可能从阅读 symfony2 网站上的书籍/食谱中学到的最多：http: [//symfony.com/doc/current/book/index.html](http://symfony.com/doc/current/book/index.html)

Symfony2 是严格面向对象的，所以如果您是这个概念的新手，您可能还想阅读 OOP。

# json - 输出Json字符串？

> ID：11406254
> 
> 赞同：-2
> 
> 时间：2012-07-10T03:38:51.730
> 
> 标签：json, httpresponse

我只想创建以下 Json 输出作为 HttpResponse：

```
{ "status": "OK", "verified": true } 
```

但由于某种原因，不断出现错误。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-10T05:31:03.433

弄清楚了。我这样做了：

```
results= [{"status": "INVALID_REQUEST", "verified": False}]         
return HttpResponse(simplejson.dumps(results), mimetype='application/json') 
```

为什么这也行不通？

```
results= [{"status": "INVALID_REQUEST", "verified": False}]
output = serializers.serialize('json', results, indent=2)
return HttpResponse(output, mimetype='application/json') 
```

# android - android中的事件“滑动”

> ID：11406265
> 
> 赞同：-2
> 
> 时间：2012-07-10T03:40:04.337
> 
> 标签：android, android-layout, android-emulator, android-event

我想在用户触摸并向右滑动时设置事件 -> 向左：->“我要设置‘下一个’事件”，然后向左滑动 -> 向右：->“我要设置‘上一个’事件”。..在Linerlayout中你能帮帮我吗！非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T03:53:45.977

[我使用GestureDetector.OnGestureListener](http://developer.android.com/reference/android/view/GestureDetector.OnGestureListener.html)的 onFling 事件在 Cupcake (1.5) 的应用程序中实现了这一点。使用其中的结果可以告诉您用户在快速滑动时向哪个方向拖动手指，但缓慢的滑动动作效果不佳。该界面还支持许多其他手势，我相信其中一个会很好地满足您的需求。

幸运的是，现在还有一个 ViewPager 类（我认为）可以完全按照您的意愿进行操作。Android 开发者博客在[这里有一篇关于如何使用它的精彩文章](http://android-developers.blogspot.com/2011/08/horizontal-view-swiping-with-viewpager.html)。

# nlog - 如何覆盖默认的 nlog 配置？

> ID：11406268
> 
> 赞同：4
> 
> 时间：2012-07-10T03:40:24.303
> 
> 标签：nlog

我们发布了一个内部使用 nlog 的日志框架程序集。我们还在我们的程序集中提供了一个嵌入式 nlog 配置作为资源，并在启动时读取它（我们的包装器中的静态构造函数，它使用 XmlLoggingConfiguration 类包装了 nlog 包装器）。

我们现在希望开发人员能够通过外部文件为他们自己的记录器指定/覆盖其他配置（使用相同的 nlog 配置文件格式）。

我们可以吗：

*   请参阅我们嵌入式 nlog 配置文件中的包含文件？包含文件的路径是如何解析的？如果我们这样做，包含文件的内容是否会覆盖我们在启动时读取的嵌入式 nlog 配置的内容？
*   开发者可以使用nlog配置部分吗？本节的内容是否覆盖了我们以编程方式指定的默认配置？

还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-03T02:41:23.213

> 包含文件的路径是如何解析的？

您可以在包含的文件名中使用：

1.  `${baseDir}`布局渲染器，例如
2.  [nlog 变量](https://github.com/NLog/NLog/wiki/Configuration-file#variables)。

如果生成的文件名不是绝对的，它将与原始 NLog 配置所在的目录组合，但在您的情况下这可能为空，因此您仅限于前 2 个选项。

> 包含文件的内容会覆盖嵌入式 nlog 配置的内容吗？

不，此内容被添加到嵌入式配置的内容中。

> nlog 配置部分的内容是否会覆盖我们以编程方式指定的默认配置？

当您以编程方式设置配置时，您会覆盖之前设置的任何配置并禁用自动配置发现，包括来自应用程序配置文件或 NLog.config 的配置。

但是您可以在设置嵌入值之前第一次检查配置是否不为空。这将触发自动发现，如果找到任何日志记录配置，则返回值将非空。

# makefile - 考虑多个 autoconf 版本

> ID：11406269
> 
> 赞同：1
> 
> 时间：2012-07-10T03:40:26.160
> 
> 标签：makefile, gnu-make, autoconf

我有 3 个程序，其中两个需要较旧版本的 autoconf，其中一个需要较新版本。现在所有三个程序都在调用最新的 autoconf 版本。我相信我必须在前两个程序的 makefile 中修改 autoconf 的路径来解决这个问题，但它很可能是 aclocal.m4 或 configure.ac 。

gnu-make 中的哪个文件调用 autoconf？定义路径的位置和语法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T11:43:58.757

除非（在`autoconf`某些情况下）您编辑`configure.ac`. 您执行`autoconf`自己（直接或间接从`autoreconf`）从 生成`configure`脚本`configure.ac`。

`autogen.sh`一些程序还包括一个名为或`bootstrap`调用的脚本`autoconf`。只有在从源代码管理中检查程序时才需要这样做。

请注意，如果您只想编译程序而不进行编辑`configure.ac`，则甚至不需要`autoconf`安装。

我的建议是，如果您需要编辑`configure.ac`，请在编辑后手动调用所需的版本`autoconf`。或者考虑升级`configure.ac`以使用最新版本。我相信原程序的作者会感谢你的。

# codeigniter - 通过 codeigniter 制作博客

> ID：11406271
> 
> 赞同：1
> 
> 时间：2012-07-10T03:40:41.247
> 
> 标签：codeigniter

我目前正在开发一个 codeigniter 项目，现在我想要一个选项“博客”，用户可以在其中发布和评论。帖子可以包含图像、表格、不同的字体，类似的情况是用于评论。我是 web 开发的新手，只知道 php，它是一个框架。你能请任何人建议我，我该怎么办？

新的：

在这篇文章之后，我得到了一些好的建议，我决定使用富文本编辑器 tiny_mce，但我的运气不好，我又遇到了问题。我不能包含 tiny_mce 或包含它后不起作用。我按照他们的指示工作，但没有改变正常的 textarea 。我应该怎么办？

```
 <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
     <script  src="<?php echo base_url("js/jquery-1.7.2.min.js"); ?>" type="text/javascript" ></script>
      <script  src="<?php echo base_url("js/scripts/tiny_mce/tiny_mce.js"); ?>" type="text/javascript" ></script>

    <script type="text/javascript">
    tinyMCE.init({
        // General options
        mode : "textareas",
        theme : "advanced",
        plugins : "pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,wordcount,advlist,autosave",

        // Theme options
        theme_advanced_buttons1 : "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect",
        theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
        theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
        theme_advanced_buttons4 : "insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak,restoredraft",
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_statusbar_location : "bottom",
        theme_advanced_resizing : true,

        // Example content CSS (should be your site CSS)
    //  content_css : "css/content.css",

        // Drop lists for link/image/media/template dialogs
        template_external_list_url : "lists/template_list.js",
        external_link_list_url : "lists/link_list.js",
        external_image_list_url : "lists/image_list.js",
        media_external_list_url : "lists/media_list.js",

        // Style formats
        style_formats : [
            {title : 'Bold text', inline : 'b'},
            {title : 'Red text', inline : 'span', styles : {color : '#ff0000'}},
            {title : 'Red header', block : 'h1', styles : {color : '#ff0000'}},
            {title : 'Example 1', inline : 'span', classes : 'example1'},
            {title : 'Example 2', inline : 'span', classes : 'example2'},
            {title : 'Table styles'},
            {title : 'Table row 1', selector : 'tr', classes : 'tablerow1'}
        ],

        formats : {
            alignleft : {selector : 'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img', classes : 'left'},
            aligncenter : {selector : 'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img', classes : 'center'},
            alignright : {selector : 'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img', classes : 'right'},
            alignfull : {selector : 'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img', classes : 'full'},
            bold : {inline : 'span', 'classes' : 'bold'},
            italic : {inline : 'span', 'classes' : 'italic'},
            underline : {inline : 'span', 'classes' : 'underline', exact : true},
            strikethrough : {inline : 'del'}
        },

        // Replace values for the template plugin
        template_replace_values : {
            username : "Some User",
            staffid : "991234"
        }
    });
</script>

 </head>

 <body>
<form method="post" action="somepage">
    <div>
        <div>
        <textarea id="elm1" name="elm1" rows="15" cols="80" style="width: 80%"></textarea>
        </div>

        <br />
        <input type="submit" name="save" value="Submit" />
        <input type="reset" name="reset" value="Reset" />

      </div>
</form>

     </body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T04:16:25.627

这是一个[基本的博客教程](http://codeigniter.com/tutorials/watch/blog/)，也可以 [查看这个，](http://eeinsider.com/articles/building-with-codeigniter-adding-the-blog/)但是您可以使用 WordPress 使用带有 codeigniter 的博客，这里是关于将[WordPress 与 codeigniter](https://stackoverflow.com/questions/1253906/how-to-integrate-wordpress-template-with-codeigniter)集成的答案。

[关于 WordPress。](http://wordpress.org/about/)

希望能帮助到你。

# node.js - 摩卡失败，没有字符串差异，utf-8？

> ID：11406272
> 
> 赞同：0
> 
> 时间：2012-07-10T03:40:54.990
> 
> 标签：node.js, coffeescript, mocha.js

我有一个失败的摩卡测试，输出我的字符串并突出显示“实际”和“预期”......除了没有突出显示。

![没有突出显示](../Images/99720bbfdccc8e4e51d87ea48594659f.png)

经过一番猛烈抨击，我想我已经确定我的实际字符串包含一些完全对我隐藏的古怪 UTF-8 字符，而 Mocha 似乎不知道要突出显示它们。

我通过将我的预期值和实际值写入原始文本文件并将它们加载到[Kaleidoscope](http://www.kaleidoscopeapp.com/)中来解决这个问题，这表明它们通过突出显示单词之间的空格而有所不同。

![在此处输入图像描述](../Images/64827c9f80ecb513cf1ec11890e27ccd.png)

我尝试加载`utf8`库（在 npm 上）并使用 对其中一个字符串进行编码`utf8.encode str`，但仍然失败，但现在字符显示的不仅仅是空格，而且 Mocha 确实突出显示：

![一些突出显示](../Images/167d64e70d39365552f078456d1883a8.png)

但无论哪种方式，我的测试都失败了。我如何编码/解码/无论这些字符串，以便它们匹配并且我的测试通过？

顺便说一句，我在测试中使用的比较字符串如下所示：

![比较字符串](../Images/73109c3fa21ac076548b69409cac4856.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:10:17.597

确保您的文本编辑器将源代码保存为正确的 UTF-8，或者将这些复制/粘贴的字符转换为转义文字，因为 @loganfsmyth 正确注释。

# ios6 - 如何将 iOS6 应用程序与 FaceTime 集成？

> ID：11406273
> 
> 赞同：1
> 
> 时间：2012-07-10T03:40:58.267
> 
> 标签：ios6, facetime

我们如何在 iOS 6 中将我们的应用与 FaceTime 集成？有可用的 API 吗？是否可以将 FaceTime 集成到应用程序中，而无需使用类似的 url `facetime://`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T04:43:18.110

iOS SDK 中没有面向开发人员的方法来使用 FaceTime。您能做的最好的事情就是从您的应用程序中拨打电话，如下所示：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"facetime://tel-number"]]; 
```

# c# - 如何改进这个设计（模式）？

> ID：11406275
> 
> 赞同：2
> 
> 时间：2012-07-10T03:41:19.113
> 
> 标签：c#, design-patterns, strategy-pattern

我正在为数学问题创建一个软件。如你所知，数学问题有很多种。

在我的软件中，一些问题来自 Xml 文件（存储库），而另一些问题可以由工厂生成（随机数，你知道）。

例如，如果我正在创建二进制问题作为补充，如果我选择第一个选项，我可以有一个类来获取文件并选择其中的一些。或者，如果我选择第二个，我可以随机生成问题：

```
x = random.Next(y, z);
y = random.Next(y, z);

return new BinaryProblem(x, y); 
```

类似的东西。

所以我现在开发了这个设计，我想我已经建立了一个策略模式。

```
public interface IProblemService
{
    IEnumerable<Problem> GetProblems();
}

public class ProblemService : IProblemService
{
    private readonly IService service;

    public ProblemService(IService service)
    {
        this.service = service;
    }

    public IService Service
    {
        get { return service; }
    }

    public IEnumerable<Problem> GetProblems()
    {
        return this.service.GetProblems();
    }
}

/* =====================================================*/
CONCRETE CLASSES

public interface IService
{
    IEnumerable<Problem> GetProblems();
}

// When I want to generate random problems
public abstract class FactoryService : IService
{
    public IEnumerable<Problem> GetProblems();
    public abstract Generate();
}

// When I want to get problems through a XML file
public class RepositoryService : IService
{
    public abstract IEnumerable<Problem> GetProblems();
    void Submit(IEnumerable<Problem> problems);
} 
```

在服务中，我将 IService 设为公开，因为我需要知道该服务是工厂还是存储库。如果这将是一个存储库，我会向文件提交一些问题。

我不相信这个设计。我想我是多余的，这不是最好的方法。

你能给出你的意见或想法来改进它吗？

编辑：我对第一个选项的意思是：

```
 public IEnumerable<Problem> GetProblems()
    {
        if (model == null)
        {
            model = new List<Problem>();

            // Dummy Data.
            model.Add(new SimplifyProblem() { Id = "1", Expression = "8 ÷ 2 x 5 ÷ 10", Result1 = 2 });
            model.Add(new SimplifyProblem() { Id = "2", Expression = "20 ÷ 2 x 5 - 2", Result1 = 48 });
            model.Add(new SimplifyProblem() { Id = "3", Expression = "15 ÷ 5 + 3", Result1 = 6 });
            model.Add(new SimplifyProblem() { Id = "4", Expression = "6 + 4² ÷ 8 - 2", Result1 = 6 });
            model.Add(new SimplifyProblem() { Id = "5", Expression = "8 + 2 x 4", Result1 = 40 });
            model.Add(new SimplifyProblem() { Id = "6", Expression = "8 + 4 x (5 - 3)", Result1 = 16 });
            model.Add(new SimplifyProblem() { Id = "7", Expression = "8 - 3 + 5", Result1 = 10 });
            // ...
        }

        return model;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T04:00:28.510

我不知道为什么你有两个单独的接口，`IProblemService`并且`IService`; 对我来说，似乎他们做同样的事情。

我会将随机问题的生成（“工厂”部分）与实际返回问题的类（“存储库”部分）分开：

```
public interface IProblemRepository {
  IEnumerable<Problem> LoadProblems();
}

public class XmlProblemRepository : IProblemRepository {
  ...
}

public class InMemoryProblemRepository : IProblemRepository {
  private readonly IEnumerable<Problem> problems;

  public InMemoryProblemRepository(IEnumerable<Problem> problems) {
    this.problems = problems;
  }

  public IEnumerable<Problem> LoadProblems() {
    return problems;
  }
}

public class RandomProblemFactory {
  public IEnumerable<Problem> GenerateProblems(int count) {
    ...
  }
} 
```

然后您可以从 XML 文件加载：

```
repository = new XmlProblemRepository("problems.xml"); 
```

或者您可以使用工厂生成问题并从内存存储库中获取它们：

```
factory = new RandomProblemFactory();
problems = factory.GenerateProblems(10);
repository = new InMemoryProblemRepository(problems); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T04:10:52.407

看起来您希望有不同的问题来源（Xml 文件、数据库、内存）并使您的代码持久性无知。如果是这样，我不会`IService`在工厂类中实现接口。保留工厂仅用于随机问题生成。我将添加`Submit`到界面：

```
public interface IService
{
    IEnumerable<Problem> GetProblems();
    void Submit(IEnumerable<Problem>);
} 
```

该类`XmlRepositoryService`将从/到 XML 文件中获取/保存数据：

```
public class XmlRepositoryService : IService
{
    public IEnumerable<Problem> GetProblems()
    {
      //get the problems from the Xml file
    }

    public void Submit(IEnumerable<Problem> problems)
    {
      //save problems to the xml file
    }
} 
```

内存存储库类将存储问题列表：

```
public class MemoryRepositoryService : IService
{
    private List<Problem> problemList = new List<Problem>();

    public IEnumerable<Problem> GetProblems()
    {
      return problemList;
    }

    public void Submit(IEnumerable<Problem> problems)
    {
      problemList.AddRange(problems.ToList());
    }
} 
```

该类`ProblemFactory`将`GenerateRandom`只有方法：

```
public class ProblemFactory
{
  public static Problem GenerateRandom()
  {
    var x = random.Next(y, z);
    var y = random.Next(y, z);

    return new BinaryProblem(x, y);
  }
} 
```

要使用它，只需实例化一个存储库类，生成问题，将其添加到列表并将列表提交到存储库：

```
var problems = new List<Problems>();
var problem = ProblemFactory.GenerateRandom();
problems.Add(problem);
var repository = new MemoryRepositoryService(); //or XmlRepositoryService
repository.Submit(problems); 
```

# .net - .net 中不显示 Unicode 字符

> ID：11406280
> 
> 赞同：0
> 
> 时间：2012-07-10T03:41:52.513
> 
> 标签：.net, unicode

我有一个表，它在 sql 服务器中存储一些非英文字母作为 varchar。当我检索数据并将其显示在网格视图中时，它会显示我存储的确切字符。但是在某些机器中，这些值显示为方形符号，就好像它无法识别字体一样。

我该怎么做才能让它在所有机器上都可见。

我直接从填充 DataView 的查询结果中填充 gridview。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T03:49:16.670

正方形表示机器没有可以显示字形的可用字体。在 XP 上尤其常见，它附带的字体字形覆盖率很差。

您需要让管理员部署必要的字体。无法给您提示，您没有记录代码点。在 superuser.com 上询问

# javascript - Node.js 回调

> ID：11406282
> 
> 赞同：1
> 
> 时间：2012-07-10T03:42:20.077
> 
> 标签：javascript, node.js

我似乎无法掌握回调的概念。我以前没有和他们合作过，所以请耐心等待。为了弄湿我的手，我正在尝试使用zombie.js 登录推特。

这是一个例子：

```
var Browser = require("zombie");
var browser = new Browser({ debug: true})

browser.visit("https://mobile.twitter.com/session/new", function (callback) {
    browser.fill("username", "xxxxx");
    browser.fill("password", "xxxxx");
    browser.pressButton("Sign in", function (err, success) {
        if(err){
            console.log(browser.text('.message'));
            console.log('There has been a error: ' + err);
        }
        else{
            console.log('Worked!');
        }

    });
}); 
```

在 browser.pressButton 部分，它将确定我是否能够成功登录，具体取决于是否`.message`包含文本“在您的手机上打字很臭，我们知道！仔细检查您的用户名和密码，然后再试一次。”

但是，我不明白它如何确定触发回调`err`。如果`.message`html 中不存在，那么我想触发成功回调以移动到下一个函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T04:04:37.473

Zombie 用于回调的约定似乎来自 node.js，其中第一个参数是一个错误对象，它应该是`null`成功的，任何后续参数都是针对成功案例的。如果你定义了一个回调，你正在使用的库（在这种情况下是 Zombie）将在它们的异步操作完成时执行你的回调函数。当你的回调被调用时，它意味着“好的，一个操作已经完成，你现在可以处理你认为合适的结果”。您的代码需要查看第一个参数来确定操作是成功还是失败。

当您接受回调函数作为参数然后执行一些（可能是异步的）操作时，回调是您告诉调用库您已完成的方式，并再次使用第一个参数来区分错误和成功。

您的部分困惑可能来自于您的回调函数签名`browser.visit`错误这一事实。您需要命名第一个参数以清楚地表明它是这样的错误：

```
browser.visit("https://mobile.twitter.com/session/new", function (error, browser) { 
```

因此，在该匿名回调函数的主体中，如果僵尸无法加载该页面，则`error`参数将包含有关错误的信息。如果页面加载正确，`error`将为 null 并且`browser`第二个参数可用于进一步告诉僵尸在页面上做更多的事情。这就是僵尸所说的“我已经完成了`visit`手术，是时候让你处理结果了。”

`visit`不传递回调参数，您作为参数传递给`visit` **IS THE CALLBACK**的匿名函数。您可以这样编码以澄清（尽管没有人这样做）

```
browser.visit("https://mobile.twitter.com/session/new", function callback(error, browser) { 
```

所以当图书馆需要告诉你它已经完成时，这是一个回调。你不调用它。库调用它，您将代码放入其中。

另一方面，当您的代码执行异步操作时，您需要适当地调用作为函数参数接收到的回调，以告诉调用者您已完成以及失败是否成功。在这种情况下，您无需执行任何自己的异步代码，因此您无需调用任何回调函数。

# xml - 使用 PEM 密钥发布 XML 请求

> ID：11406283
> 
> 赞同：0
> 
> 时间：2012-07-10T03:42:28.500
> 
> 标签：xml, post, xml-serialization, rsa, pem

我正在使用 Burpsuite 通过 XML POST 请求测试 SSH 公钥凭据。本质上，我需要将 PEM 文件文本作为 XML 元素的一部分发送，如下所示：

```
<PEMKey>-----BEGIN RSA PRIVATE KEY-----MIICXAIBAAK etc...-----END RSA PRIVATE KEY-----
</PEMKey> 
```

如何正确地将 PEM 文件的内容格式化为要作为原始 XML 提交的字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:09:32.647

如果您需要保留空白，您可以使用

```
<PEMKey xml:space="preserve" xmlns:xml="http://www.w3.org/XML/1998/namespace">
-----BEGIN RSA PRIVATE KEY-----
...
-----END RSA PRIVATE KEY-----
</PEMKey> 
```

或再次以 base-64 编码整个文本。

# javascript - 确定并绑定点击或“触摸”事件

> ID：11406285
> 
> 赞同：30
> 
> 时间：2012-07-10T03:42:41.530
> 
> 标签：javascript, android, jquery, iphone, mobile

我正在使用下面的代码来绑定“click”或“touchstart”事件（使用 jQuery 的[`on(eventType, function() { ... })`](http://api.jquery.com/on/)）。

```
var what = (navigator.userAgent.match(/iPad/i)) ? 'touchstart' : 'click'; 
```

稍后的：

```
$foo.on(what, function() { ... }); 
```

...这适用于 iPad 和“其他一切”，但我担心上面的代码有“iPad 隧道视野”...

**我的问题：**

所有其他设备（例如，Android 平板电脑）是否具有类似命名的“touchstart”事件？如果是这样，我该如何改进上面的代码，以便我可以解释这些事件类型？

换句话说，我怎样才能在上面的代码中解释更广泛的触摸设备（不仅仅是 iPad）？

* * *

# 编辑#1

大家对此怎么看：

```
var foo = ('ontouchstart' in window) ? 'touchstart' : ((window.DocumentTouch && document instanceof DocumentTouch) ? 'tap' : 'click'); 
```

注意：以上大部分逻辑[来自 Modernizr here](https://github.com/Modernizr/Modernizr/blob/master/modernizr.js#L420-446)。

以上似乎适用于 Firefox/iPad ......目前我没有太多要测试的东西。

我喜欢上面的内容是我不是 UA 嗅探。:)

对所有其他触摸设备来说都是`tap`一个好的默认值吗？

* * *

# 编辑#2

这里有一些[有趣的信息](https://github.com/jquery/jquery-mobile/issues/854)，链接到这个：

[为移动 Web 应用程序创建快速按钮](https://developers.google.com/mobile/articles/fast_buttons)

确实不是一个直接的答案，但提供了开发人员在面对多个平台和设备的点击相关事件时所面临的情况的很多细节。

* * *

# 编辑#3

这里也有一些[很好的信息](http://backtothecode.blogspot.com/2009/10/javascript-touch-and-gesture-events.html)：

> ## Android 和 iPhone 触摸事件
> 
> Android 和 iPhone 版本的 WebKit 有一些共同的触摸事件：
> 
> ```
> touchstart - triggered when a touch is initiated. Mouse equivalent - mouseDown
> touchmove - triggered when a touch moves. Mouse equivalent - mouseMove
> touchend - triggered when a touch ends. Mouse equivalent - mouseUp. This one is a bit special on the iPhone - see below
> touchcancel - bit of a mystery 
> ```

看完之后，我想我会把上面的代码改成这样：

```
var foo = (('ontouchstart' in window) || (window.DocumentTouch && document instanceof DocumentTouch)) ? 'touchstart' : 'click'; 
```

当我第一次问我的问题时——除了 iPad/iPhone 之外无法访问任何东西——我认为`touchstart`这是一个 iOS 特定的事件；它现在看起来`touchstart`并且`click`将涵盖大部分（如果不是全部）触摸设备的基础。

* * *

# 2014 年 8 月更新：

如果有任何帮助，我在这里发布了一些实用程序类：

*   [mhulse / no-x.js](https://gist.github.com/mhulse/4704893)：

    > [no-js] [no-touch] JavaScript 实用程序，用于放入将添加的 HTML 模板`js`或`touch`用于 CSS 和/或 JS 的类。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-12T07:54:20.647

我强烈建议不要使用 UA 来确定您是否处于触摸环境中。

改用 Modernizr：http: [//modernizr.com/](http://modernizr.com/) 下面的代码可以识别除 windows phone 7 之外的任何东西，因为 windows phone 7 不会触发常规的浏览器触摸事件。但是 WP8 很可能会被正确识别。

```
if (Modernizr.touch){
   // bind to touchstart, touchmove, etc and watch `event.streamId`
} else {
   // bind to normal click, mousemove, etc
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-08-20T02:31:14.563

这可能对您有用：

```
var clickEvent = ((document.ontouchstart!==null)?'click':'touchstart');
$("#mylink").on(clickEvent, myClickHandler); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-16T06:51:24.637

iOS 和 Android 都有触摸事件，但 Windows 在 IE 中使用 MSPointer 事件。如果您想要跨设备解决方案，请尝试使用 pointer.js 或从中学习：

[https://github.com/borismus/pointer.js](https://github.com/borismus/pointer.js)

# c++ - 实现循环队列时出错？

> ID：11406287
> 
> 赞同：1
> 
> 时间：2012-07-10T03:43:02.647
> 
> 标签：c++, queue

我必须为班级实现一个循环队列。当我测试它时，程序正确地入队和出队。但是每当我创建一个新对象并将其设置为另一个对象时，一切都会正确打印出来，但它最终会崩溃，并出现错误：

```
Expression: _BLOCK_TYPE_IS_VALID(pHead -> nBlockUse) 
```

我运行了调试器，它说问题出在 Dequeue 函数的一行中。这是那个功能。

```
void CQUEUE::Dequeue()
{
if(Isempty())
{
    cout << "Queue is  empty, nothing to delete." << endl;
    return;
}

if((!Isempty()) && (front == back)) //When there is only 1 item in the queue
{                                   // front and back will point to the same node
    delete front;                   //but it wont be null because of that 1 item
    front = back = 0;   
    return;
}

qnode *p = front;
front = front -> next;
delete p;//<----------DEBUGGER POINTS HERE**************
front -> prev = back;
return;

} 
```

就像我说的，程序运行良好，直到我创建一个新对象并执行此操作

```
 CQUEUE j = k;//Any Enqueues and Dequeues after this work, but it crashes 
```

这是复制构造函数以防万一这是问题？

```
CQUEUE::CQUEUE(CQUEUE & original)//Will not compile if I put Const 
{                               //in the parameter for some reason
front = back = 0;           //So I took it out
(*this) = original;
front -> prev = back;
back -> next = front;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T04:21:48.240

在您的复制构造函数中，您执行以下操作：

```
(*this) = original; 
```

这意味着您的`front`指针`CQUEUE j`和`CQUEUE k`都指向*相同*的内存。

当`void CQUEUE::Dequeue()`同时调用`j`and`k`时，`delete p;` **双重**删除内存，导致崩溃。

此外，您的复制构造函数必须声明为`const`. `CQUEUE::CQUEUE(const CQUEUE& original)`. 没有更多代码很难说，但是在您的复制构造函数中，您需要制作指针的深层副本（使用分配内存`new`）。阅读[什么是三法则？](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)可能有帮助。

# android - 调整大小并使大小等于 0 GridLayout (android)

> ID：11406288
> 
> 赞同：1
> 
> 时间：2012-07-10T03:43:08.143
> 
> 标签：android, grid-layout

在我的应用程序中，我的 drawableTop 属性中有几个带有图像的按钮。此外，每个 Button 都有一个标签（文本）。

所有图像的尺寸相同：394 像素 X 336 像素。

我希望所有按钮在使用 GridLayout 时都具有相同的大小。另外，我不希望用户向下滚动以查看其余按钮。我希望所有按钮都放在一个屏幕上。

我正在尝试在这里执行此操作，但由于图像很大（我使用的是手机模拟器），用户需要向下滚动才能查看其余按钮，而且即使所有图像大小相同，按钮也不会'没有相同的大小。

这是我的代码（按钮名称和图像无关紧要，我只想为所有项目创建一个大小相同的 2X2 网格，根本不滚动）：

```
<?xml version="1.0" encoding="utf-8"?>
<GridLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:keepScreenOn="true" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:columnCount="2"
    android:rowCount="2" >
        <Button 
            android:id="@+id/this_is_a_test" 
            android:background="@layout/roundcorners"
            android:layout_gravity="fill"
            android:text="This is a test"
            android:textSize="20dip"
            android:textStyle="bold"
            android:textColor="#000000"
            android:drawableTop="@drawable/test">
        </Button>    

        <Button 
            android:id="@+id/this_is_a_test" 
            android:background="@layout/roundcorners"
            android:layout_gravity="fill"
            android:text="This is a test"
            android:textSize="20dip"
            android:textStyle="bold"
            android:textColor="#000000"
            android:drawableTop="@drawable/test">
        </Button>    

        <Button 
            android:id="@+id/this_is_a_test" 
            android:background="@layout/roundcorners"
            android:layout_gravity="fill"
            android:text="This is a test"
            android:textSize="20dip"
            android:textStyle="bold"
            android:textColor="#000000"
            android:drawableTop="@drawable/test">
        </Button>    

        <Button 
            android:id="@+id/this_is_a_test" 
            android:background="@layout/roundcorners"
            android:layout_gravity="fill"
            android:text="This is a test"
            android:textSize="20dip"
            android:textStyle="bold"
            android:textColor="#000000"
            android:drawableTop="@drawable/test">
        </Button>    

</GridLayout> 
```

请大家帮帮我好吗？

# .net - 来自程序集 Z 中类型 Y 的方法 X 没有实现

> ID：11406298
> 
> 赞同：5
> 
> 时间：2012-07-10T03:44:08.090
> 
> 标签：.net, asp.net-mvc-3, typeloadexception

我很迷茫！

我有一个解决方案，在发布和部署时会给我以下错误：

```
Exception information: 
Exception type: HttpException 
Exception message: Method 'GetDemosSubsidiaryById' in type 'DG.Crm.DataAccess.Crm2011WS.Repositories.ReferenceEntitiesRepository' from assembly 'DG.Crm.DataAccess.Crm2011WS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' does not have an implementation.
<stack trace> 
```

显然它构建得很好，并且该方法已实现并且肯定存在于库中。我使用反射器检查已部署的 DLL，我也看不到任何异常之处 - 存在类，存在类型，实现方法。它所抱怨的特定方法也没有被调用。

我已删除所有引用并在解决方案中阅读它们。

我`DG.Crm.DataAccess.Crm2011WS.Repositories.ReferenceEntitiesRepository`使用 Visual Studio 中的“实现接口”快捷方式重新创建了。

该解决方案在 Visual Studio 中加载并正常工作。

我在这里遗漏了什么，或者我在哪里可以找到更多信息？

编辑以添加解决方案结构：

![在此处输入图像描述](../Images/70a02352c2f22edac8225f47205a2a0b.png)

`2011WS`库实现了存在于库中的接口`Common`。然后两者都被 WebApps MVC Web 应用程序引用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-06T14:35:43.380

仅供参考......我有同样的错误。在我的情况下，结果证明程序集 B 被不在 GAC 中的程序集 A 引用。该错误表明程序集 A 存在问题，因此有点误导。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T11:57:17.123

原来 GAC 中有一个库的旧版本。我遇到的问题是冲突的库是 DTO 库，而不是错误中引用的库。

所以在我的例子中，要更加小心 GAC 中的内容！

# sql - 尝试使用 group by 和 union 执行计数总和

> ID：11406300
> 
> 赞同：0
> 
> 时间：2012-07-10T03:44:14.493
> 
> 标签：sql, oracle, count, group-by, union

我正在尝试使用联合对三个查询的计数求和。这些查询还包含其中的 group by 子句。以下是我写的查询：

```
select 
       extract(year from start_date), 
       extract(month from start_date),
       APPLICATION_TYPE,
       sum(TOTAL) as Overall_TOTAL
from (
select 
       extract(year from A.start_date) as Start_Year, 
       extract(month from A.start_date) as Start_Month,
       A.APPLICATION_TYPE as Type,
       count(A.TRANSACTION_NUMBER) as Total
from lnr_application A
where 
      A.START_DATE >= to_date('&sdate','DD/MM/YYYY')
      and A.START_DATE <= to_date('&edate','DD/MM/YYYY')  
      and A.permission_type = 'HRW'
      and A.status_cd in ('AP')
group by extract(year from start_date), extract(month from start_date), A.APPLICATION_TYPE
union all
select 
       extract (year from A.tstamp) as Start_Year, 
       extract (month from A.tstamp) as Start_Month, 
       A.application_type as Type,
       count(A.transaction_number) as Total
from lnr_application A
where 
      A.permission_type = 'HRW'
      and A.status_cd in ('RF')
      and trunc(A.tstamp) >= to_date ('&sdate','dd/mm/yyyy')
      and trunc(A.tstamp) <= to_date ('&edate','dd/mm/yy')
group by extract (year from A.tstamp), extract (month from A.tstamp), A.application_type 
union all
select 
       extract (year from A.tstamp) as Start_Year, 
       extract (month from A.tstamp) as Start_Month, 
       A.application_type as Type, 
       count(A.transaction_number) as Total
from lnr_application A
where 
      A.permission_type = 'HRW'
      and A.status_cd in ('CL')
      and trunc(A.tstamp) >= to_date ('&sdate','dd/mm/yyyy')
      and trunc(A.tstamp) <= to_date ('&edate','dd/mm/yy')      
group by extract (year from A.tstamp), extract (month from A.tstamp), A.application_type
) tmp
group by extract(year from start_date), extract(month from start_date), APPLICATION_TYPE
order by extract(year from start_date), extract(month from start_date), APPLICATION_TYPE 
```

当我执行查询时，我收到一条错误消息，它`Start_Date`是无效的标识符。如果我从顶部删除 sum 组件，即合并所有三个查询，我会得到以下结果：

```
2011    7   A   627 
2011    7   A   21 
2011    7   A   1 
2011    7   C   1585 
2011    7   C   1    
2011    7   I   1 
2011    7   I   154 
2011    7   I   3 
```

我想合计各个年份、月份和应用程序类型的计数总和，如下所示：

```
2011    7   A   649
2011    7   C   1586 
2011    7   I   158 
```

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:55:42.260

您可以将三个联合所有子查询合并到一个查询中，然后您不需要额外的内联视图，从而得到这个简单的查询：

```
select extract(year from a.start_date)
     , extract(month from a.start_date)
     , a.application_type
     , sum(a.total) as overall_total
  from lnr_application a
 where a.permission_type = 'HRW'
   and a.status_cd in ('AP','RF','CL')
   and a.tstamp between to_date('&sdate','dd/mm/yyyy') and to_date('&edate','dd/mm/yyyy') + interval '1' day - interval '1' second
 group by extract(year from a.start_date)
     , extract(month from a.start_date)
     , a.application_type
 order by extract(year from a.start_date)
     , extract(month from a.start_date)
     , a.application_type 
```

并通过使用 trunc(...,'mm') 而不是两次提取来进一步简化：

```
select extract(year from trunc(a.start_date,'mm'))
     , extract(month from trunc(a.start_date,'mm'))
     , a.application_type
     , sum(a.total) as overall_total
  from lnr_application a
 where a.permission_type = 'HRW'
   and a.status_cd in ('AP','RF','CL')
   and a.tstamp between to_date('&sdate','dd/mm/yyyy') and to_date('&sdate','dd/mm/yyyy') + interval '1' day - interval '1' second
 group by trunc(a.start_date,'mm')
     , a.application_type
 order by trunc(a.start_date,'mm')
     , a.application_type 
```

问候，
罗布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T03:55:06.817

在 union 的 SELECT 语句中，需要使用 Start_Year 和 Start_Month 而不是 EXTRACT 语句。此外，使用 Type 而不是 Application_Type。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T07:00:37.610

```
select 
       Start_Year, 
       Start_Month,
       APPLICATION_TYPE,
       sum(TOTAL) as Overall_TOTAL
from (
select 
       extract(year from A.start_date) as Start_Year, 
       extract(month from A.start_date) as Start_Month,
       A.APPLICATION_TYPE as Type,
       count(A.TRANSACTION_NUMBER) as Total
from lnr_application A
where 
      A.START_DATE >= to_date('&sdate','DD/MM/YYYY')
      and A.START_DATE <= to_date('&edate','DD/MM/YYYY')  
      and A.permission_type = 'HRW'
      and A.status_cd in ('AP')
group by extract(year from start_date), extract(month from start_date), A.APPLICATION_TYPE
union all
select 
       extract (year from A.tstamp) as Start_Year, 
       extract (month from A.tstamp) as Start_Month, 
       A.application_type as Type,
       count(A.transaction_number) as Total
from lnr_application A
where 
      A.permission_type = 'HRW'
      and A.status_cd in ('RF')
      and trunc(A.tstamp) >= to_date ('&sdate','dd/mm/yyyy')
      and trunc(A.tstamp) <= to_date ('&edate','dd/mm/yy')
group by extract (year from A.tstamp), extract (month from A.tstamp), A.application_type 
union all
select 
       extract (year from A.tstamp) as Start_Year, 
       extract (month from A.tstamp) as Start_Month, 
       A.application_type as Type, 
       count(A.transaction_number) as Total
from lnr_application A
where 
      A.permission_type = 'HRW'
      and A.status_cd in ('CL')
      and trunc(A.tstamp) >= to_date ('&sdate','dd/mm/yyyy')
      and trunc(A.tstamp) <= to_date ('&edate','dd/mm/yy')      
group by extract (year from A.tstamp), extract (month from A.tstamp), A.application_type
) tmp
group by Start_Year, 
       Start_Month,
       APPLICATION_TYPE
order by Start_Year, 
       Start_Month,
       APPLICATION_TYPE 
```

# c++ - 没有从 long unsigned int 到 long unsigned int& 的转换

> ID：11406304
> 
> 赞同：4
> 
> 时间：2012-07-10T03:44:22.367
> 
> 标签：c++, g++

当我尝试编译以下代码时，我收到错误消息*No known conversion for argument 2 from `long unsigned int`to ：`long unsigned int&`*

```
void build(int* &array, unsigned long& index) {
  if (index == 0)
    return;
  else {
    heapify(array, index);
    build(array, index-1);
  }
} 
```

有人可以解释为什么会发生这种情况，以及这个错误背后的逻辑是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T03:47:33.120

的第二个参数`build`需要一个引用（用 标记`&`）。引用有点像指针，因此您只能使用具有内存地址的实际变量。

这就是为什么你不能使用像`index-1`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T03:49:33.283

非常量引用只能绑定到 C++ 中的左值。`index-1`返回一个临时的，如果绑定到一个引用，它会立即超出范围，你会有一个悬空引用。一个 const 引用*可以*绑定到一个临时对象，它会将临​​时对象的生命周期延长到 const 引用的生命周期。因此，如果您可以更改`unsigned long&`为`const unsigned long&`它应该可以工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T03:49:47.683

的第二个论点`build`是对 的引用`unsigned long`。但是在递归调用中，您传递给它一个实际值（即“右值”）。

如果按如下方式重写函数，问题应该会消失。

```
void build(int* &array, unsigned long& index) {
   if (index == 0)
     return;
   else {
    heapify(array,index);
    index -= 1;
    build(array,index);
  }
} 
```

但请注意，这可能不是您想要的。的值`index`将在递归调用之前更改。您可能希望`index += 1`在调用后将其改回 ( )，具体取决于函数的总体用途。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T19:58:16.007

请参阅*The Design and Evolution of C++*，第 3.7 章，第 86 页，其中给出了以下示例：

```
void incr(int& rr) { rr++; }

void g()
{
    double ss = 1;
    incr(ss)     // note: double passed, int expected
                 // (fixed: error in Release 2.0)
} 
```

在 C++ 的第一个版本中，使用 value`int`创建了一个临时类型，然后该临时被传递给并且没有被修改。为了防止这种意外行为，更改了语言，以便临时（即未命名的变量）不能绑定到非常量引用，因为非常量引用参数通常意味着将修改参数以将信息传递回呼叫者。如果一个临时的被静默创建，调用者会丢失该信息，例如`double``1``incr``ss`

```
void* get_ptr(int& error);  // sets error=0 if returned pointer is valid

void g()
{
    unsigned err = 0;        // oops, wrong type
    void* p = get_ptr(err);  // uh-oh, error status stored in temporary
    if (err == 0)            // condition always true
        use_ptr(p);          // uh-oh! pointer may not be valid!
} 
```

如果一个非常量引用被允许绑定到一个临时对象，那么这个程序是危险的，因为`get_ptr(err)`会创建一个临时对象`int`，like `get_ptr(int(err))`，并在临时对象中设置错误状态，所以`err`即使出现问题，它仍然是零。

如果函数作者希望能够接受临时变量，因为参数不会用于将信息传递回调用者，那么函数可以按值获取参数：

```
void blah(int rr); 
```

或通过常量引用：

```
void blah(const int& rr); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-10T03:47:23.643

你的错误信息在哪一行？看起来你正在传递一个`long unsigned int`for 索引，当它需要一个`long unsigned int`引用时（换句话说，的地址`long unsigned int`）

# c - realloc 无效的旧大小

> ID：11406311
> 
> 赞同：5
> 
> 时间：2012-07-10T03:45:04.617
> 
> 标签：c, pointers, malloc, realloc

*免责声明：这是家庭作业。我正在尝试，不希望或不希望任何人为我做这件事。只是我会出错的几个指针（呵呵）将不胜感激。*

作业要求我创建一个`int*`包含 10 个元素的数组，然后尝试在其中插入一百万个整数。每次插入都会检查数组是否需要调整大小，如果需要，我会增加它的大小，以便它可以容纳更多元素。

当我插入 10,000 个元素时，它工作正常，但如果我尝试 100,000 个元素，我会收到以下错误：

```
*** glibc detected *** ./set2: realloc(): invalid old size: 0x00000000024dc010 *** 
```

这是我正在运行的代码。我已经评论了它，所以它很容易阅读。

```
void main()
{
    //begin with a size of 10
    int currentsize = 10;
    int* arr = malloc(currentsize * sizeof(int));       
    int i;

    //initalize with all elements set to INT_MAX
    for(i = 0; i < currentsize; i++) {
        arr[i] = INT_MAX;
    }

    // insert random elements
    for(i = 0; i < 100000; i++) {
        currentsize = add(rand() % 100,arr,currentsize);
    }

    free(arr);
}

/*
    Method resizes array if needed, and returns the new size of the array
    Also inserts the element into the array
*/
int add(int x, int* arr, int size)
{
    //find the first available location 
    int newSize = size;
    int i;
    for(i = 0; i < size; i++) {
        if (arr[i] == INT_MAX)
            break;
    }

    if (i >= size) {
        //need to realloc
        newSize++;
        arr = realloc(arr, newSize * sizeof(int) );     
    }

    arr[i] = x;

    return newSize;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T03:52:21.963

`arr`该错误可能是因为您在函数中正确使用了realloc来更改`add`，但是这个修改后的值在`add`返回时会丢失。因此，下一次调用`add`将收到旧的，现在不好的价值。

另外我不明白你为什么要使用`for`循环来搜索。您知道要在最后一个元素处添加，那么为什么要搜索呢？只需重新分配数组并将新值插入新插槽即可。

顺便说一句，我很确定您的老师正试图让您看到为每个成员重新分配会导致渐近运行时间问题。大多数实现`realloc`将使用此算法进行*大量*复制。这就是为什么实际程序将数组大小*增加*大于 1（通常为 1.5 或 2）而不是固定数量的原因。

通常的习惯用法是在结构中抽象可变大小数组：

```
typedef struct array_s {
  int *elts;
  int size;
} VARIABLE_ARRAY;

void init(VARIABLE_ARRAY *a)
{
  a->size = 10;
  a->elts = malloc(a->size * sizeof a->elts[0]);
  // CHECK FOR NULL RETURN FROM malloc() HERE
}

void ensure_size(VARIABLE_ARRAY *a, size_t size) 
{
  if (a->size < size) {

    // RESET size HERE TO INCREASE BY FACTOR OF OLD SIZE
    // size = 2 * a->size;

    a->elts = realloc(size * sizeof a->elts[0]);
    a->size = size;

    // CHECK FOR NULL RETURN FROM realloc() HERE
  }
}

// Set the i'th position of array a. If there wasn't
// enough space, expand the array so there is.
void set(VARIABLE_ARRAY *a, int i, int val)
{
  ensure_size(a, i + 1);
  a->elts[i] = val;
}

void test(void)
{
  VARIABLE_ARRAY a;

  init(&a);

  for (int i = 0; i < 100000; i++) {
    set(&a, i, rand());
  }

  ...

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T03:55:57.060

我会将`arr`to`add()`作为指针（指向指针）传递，以便可以在`add()`

```
int add(int x, int** arr, int size)
{
   // ...
   *arr = realloc(*arr, newSize * sizeof(int) );
} 
```

并称之为....

```
currentsize = add(rand() % 100, &arr, currentsize); 
```

请注意，您的代码（以及我建议的更改）没有进行任何错误检查。您应该检查 和 的[`malloc`](http://www.cplusplus.com/reference/clibrary/cstdlib/malloc/)返回[`realloc`](http://www.cplusplus.com/reference/clibrary/cstdlib/realloc/)值`NULL`。

# delphi - TeeChart 中的午夜穿越、轴边界和数据存储顺序

> ID：11406314
> 
> 赞同：1
> 
> 时间：2012-07-10T03:45:30.403
> 
> 标签：delphi, teechart

我有一个应用程序，它记录数据并使用 fastLine 系列在 TeeChart 中连续显示，时间作为 x 轴，使用...

```
Chart1.Axes.Bottom.DateTimeFormat:='hh:mm:ss'; 
```

数据以大约每秒一个点的速度添加，但我希望将显示的点数限制为最后添加的 MaxPoints（MaxPoints 是一个整数变量，可以随时由用户输入更新）。在显示 MaxPoints 后，数据应在添加时在屏幕上滚动，就像在条形图中一样。

我尝试了以下方法，其中 TheTime 是 Frac(Now) ......

```
procedure TGraphForm.AddPoints(TheTime,TheData : real);
begin
  Chart1.Series[0].AddXY(TheTime,TheData);
  while (Chart1.Series[0].Count > MaxPoints) do
    Chart1.Series[0].Delete(0);
end; 
```

这可以完美运行，直到午夜，显示冻结。我知道问题在于数据在添加时进行了排序，因此 Series[0].Delete(0) 删除了 x 值最小的数据，（即午夜过去时添加的最新数据，而不是最旧的数据添加到系列中的一条数据。

我尝试通过添加外部

```
var 
  DeleteIndex : integer 
```

并将程序更改为...

```
procedure TGraphForm.AddPoints(TheTime,TheData : real);
begin
  if TheTime >= Chart1.Series[0].MaxXValue then
    DeleteIndex := 0
  else
    inc(DeleteIndex);
  Chart1.Series[0].AddXY(TheTime,TheData);
  while (Chart1.Series[0].Count > MaxPoints) do
    Chart1.Series[0].Delete(DeleteIndex);
  end;
end; 
```

但这是一个可怕的“混乱”，因为当我经过午夜时 a) x 轴扩展以显示完整的 24 小时 b) 在最新点（靠近图表的最左侧）和午夜之前添加的最旧的剩余点（靠近图表的最右侧）。

替补...

```
procedure TGraphForm.AddPoints(TheTime,TheData : real);
begin
  if TheTime < Chart1.Series[0].MaxXValue then
    Chart1.Series[0].Clear;
  Chart1.Series[0].AddXY(TheTime,TheData);
  while (Chart1.Series[0].Count > MaxPoints) do
    Chart1.Series[0].Delete(0);
end; 
```

有效，但午夜前的点在午夜“丢失”，因为图表在清除后缓慢重新填充，这也不太理想。

最简单的“解决方案”是轴最小值和最大值是否可以跨越午夜边界，但似乎不可能将轴最大值设置为小于最小值。

我很想听听其他人可能遇到的任何替代解决方案来处理“午夜穿越”问题。

# matlab - Matlab并行for循环或Matlab开放池

> ID：11406317
> 
> 赞同：0
> 
> 时间：2012-07-10T03:46:55.003
> 
> 标签：matlab

我正在尝试进行一些计算，我想使用 parfor 或通过打开 matlabpool.. 并行执行它，因为当前的实现太慢了：

```
result=zeros(25,16000);
for i = 1:length(vector1) % length is 25

     for j = 1:length(vector2) % length is 16000 

              temp1 = vector1(i); 
              temp2 = vector2(j);
              t1 = load(matfiles1(temp1).name) %load image1 from matfile1
              t2 = load(matfiles2(temp2).name) % load image2 from matfile2
              result(i,j)=t1.*t2
    end
end 
```

它工作正常，但我真的很想知道是否有办法加快速度......提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:19:49.473

使用`parfor`循环并`matlabpool`一起打开。打开`matlabpool`MATLAB 会话可为您的 MATLAB 会话提供专用的工作程序，它可以使用这些工作程序运行您的`parfor`循环体。因此，您可以将代码更改为以下内容：

```
matlabpool open local 4 % or however many cores you have
parfor i = ...
   ...
end 
```

在并行运行代码之前，我绝对建议您使用[MATLAB 分析器](http://www.mathworks.com/help/techdoc/matlab_env/f9-17018.html)来确保您了解运行代码所花费的时间。（我有点惊讶将 in 提升`load`到`t1`外循环没有任何效果 - 因此分析器应该显示`load`调用与算法的其余部分相比花费的时间非常短）。

# winapi - Azure 运行本机 win32 代码？

> ID：11406318
> 
> 赞同：1
> 
> 时间：2012-07-10T03:47:20.307
> 
> 标签：winapi, azure, native

从这篇文章中我看到我们可以在 azure 中运行非托管代码。

[运行本机代码](http://msdn.microsoft.com/en-us/wazplatformtrainingcourse_windowsazurenativecodevs2010_topic2.aspx)

我的问题是我们是否可以访问 azure 中的所有 Win32 API，或者是否有任何限制。一般来说，在 azure 中运行非托管代码有任何限制（你们中的一些人可能遇到过）。

谢谢中古...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:01:27.177

大多数 Win32 API 都可以正常工作。但请注意，Windows Azure 是一个服务环境，因此通常调用 CreateWindowsEx 之类的 API 是没有意义的。

此外，默认情况下，仅安装核心操作系统组件。如果您希望使用它们（通过启动任务或自定义 VM 映像），请自行安装 ATL 等库。还请手动启用桌面体验以使用某些操作系统功能。根据我的经验，我尝试使用 Direct2D（处理图像，但不渲染它们）和 Media Foundation，它没有遇到任何问题。

此致，

明旭。

# javascript - 获取网格面板的单元格值。ExtJs

> ID：11406326
> 
> 赞同：0
> 
> 时间：2012-07-10T03:48:24.323
> 
> 标签：javascript, extjs

我有一个带有一些列的网格面板和`CheckboxSelectionModel`. 当我检查单行时，我想获取`id`单元格的值。

[![在此处输入图像描述](../Images/841c28624a881b4f11b1305a4638659b.png)](https://i.stack.imgur.com/jKOeL.jpg)

```
var sm = new Ext.grid.CheckboxSelectionModel({

    listeners: {
        selectionchange: function(sm) {
        alert('coucou : ' + sm.getSelected().id);
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T04:23:29.623

好吧，我是假人。获取`id`需要名称的单元格值

```
var sm = new Ext.grid.CheckboxSelectionModel({

      listeners: {
       selectionchange: function(sm) {
       alert('coucou : ' + sm.getSelected().get("id"));
      }
    }
}); 
```

# iphone - 将自定义开关添加到 iphone 视图

> ID：11406328
> 
> 赞同：0
> 
> 时间：2012-07-10T03:48:46.207
> 
> 标签：iphone, user-interface, custom-controls

我正在使用以下代码创建自定义开关：

```
UISegmentedControl* switchView=[[UISegmentedControl alloc] 
                                initWithItems:[[NSMutableArray alloc] initWithObjects:@"On",@"Off",nil]];
[switchView setFrame:CGRectMake(20,365,140,28)];
switchView.selectedSegmentIndex=0;
switchView.segmentedControlStyle=UISegmentedControlStyleBar;
[switchView setImage:[UIImage imageNamed:@"onSelected.png"] forSegmentAtIndex:0];
[switchView setImage:[UIImage imageNamed:@"off.png"] forSegmentAtIndex:1];
[switchView addTarget:self action:@selector(checkOnOffState:) forControlEvents:UIControlEventValueChanged]; 
```

我现在想将此控件添加到我的一个屏幕（我相信正确的术语是 ViewController？）。我将如何在 Xcode 4.3 中执行此操作？

我查看了其他一些帖子，但找不到任何有用的东西。例如，[如何向 iPhone 应用程序的 UI 添加自定义视图？](https://stackoverflow.com/questions/2823488/how-do-i-add-a-custom-view-to-iphone-apps-ui)提出了一些类似的建议 `[[myVC view] addSubview:myView];` 以及[如何在 iphone 中自定义 UISwitch 按钮？](https://stackoverflow.com/questions/5087546/how-to-customize-uiswitch-button-in-iphone)建议 `self.navigationItem.titleView=switchView;` 如果可能的话，您能否解释一下为什么这些方法不起作用？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T03:53:07.450

您需要为您的开关创建一个类，它是您的 UISegmentControl 的子类，否则您也可以直接在您的 vc 中添加此代码。

在其 initWithFrame 方法中添加此代码

然后在你的VC中使用它

```
-(void)viewDidLoad{
  urCustomSwitch  = [urCustomSwitch alloc] initWithFrame:CGRectMake(20,365,140,28)];
  [self.view addSubview:urCustomSwitch];
} 
```

如果您要创建自定义可重用类，这将满足您的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:10:13.537

如果您`UISegmentedControl`在`InterfaceBuilder`（.xib 文件）中添加此开关控件

这项任务对您来说会容易得多。

# jquery - jquery插件样板元素

> ID：11406336
> 
> 赞同：1
> 
> 时间：2012-07-10T03:49:54.520
> 
> 标签：jquery, boilerplate

我正在尝试使用 jquery-boilerplate-v3.1 开发插件，并且在“this”和“$(this)”之间感到困惑

```
 in the plugin 
    ...
    $.fn[pluginName] = function ( options ) {
    //alert($(this).toSource());
    return this.each(function () {
        if (!$.data(this, 'plugin_' + pluginName)) {
            $.data(this, 'plugin_' + pluginName, new Plugin( this, options ));
        }
    });
}; 
```

似乎`new Plugin(this, options)`没有返回 Plugin.prototype 上下文中的元素。

相反，我已将其修改为`Plugin($(this), options)`.

```
eg.
   $(function(){
     $('#container').myPlugin();
   }); 
```

如果不使用 $(this) 作为参数，我无法访问插件中的 this.element ， .toSource() return empty object `({})`。

我是否通过修改为 $(this) 或如何使用`this`参数访问#container 来做正确的方法。

TIA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T03:59:21.487

在插件中，`this`指的是您应用插件的 jQuery 对象，但在回调中`this.each()`，`this`指的是 jQuery 对象中的每个单个 DOM 元素。

所以，是的，您需要`$(this)`在循环中获取一个包含该元素的 jQuery 对象。

# wordpress - 在内部 wordpress 重写规则之前评估外部重写规则

> ID：11406343
> 
> 赞同：1
> 
> 时间：2012-07-10T03:51:14.810
> 
> 标签：wordpress, mod-rewrite, url-rewriting, rewrite

自从最近几天试图解决这个问题以来，我一直在拔毛：

我想从格式转换我的网址

```
http://example.com/prodsearch/category/tag1-tag2-tag3-tag4 
```

至

```
http://example.com/prodsearch/index.php?tag=tag1+tag2+tag3+tag4&cat=category 
```

首先，我在 .htaccess 中添加了以下规则

```
RewriteRule ^prodsearch/(.*)/(.*)-(.*)$ prodsearch/$1/$2+$3 [L]
RewriteCond %{REQUEST_URI} !^prodsearch/(.*?)/(.*)\-(.*)
RewriteRule ^prodsearch/(.*)/(.*)$ index.php?tag=$2&cat=$1 [R,QSA,L] 
```

这里 rule1 递归地将标签之间的所有 '-' 替换为 '+' 并且 rule2 会在标签之间没有更多的 '-' 时进行实际的重写（由 RewriteCond 检查）

这些规则实际上有效，但问题是它们重定向（通过 url 更改）到新的 url 模式，我不想要显式重定向。从最后一条规则中删除“R”标志后，整个事情停止工作，我开始在我的 wordpress 安装中获得 404 页。

有人可以解释为什么会发生这种情况以及如何在没有明确重定向的情况下做到这一点。

我也尝试将这些规则包含在 wordpress 中，希望当被 wordpress 规则调用时可以在没有重定向的情况下工作。我使用了以下 add_rewrite_rule() 调用：

```
add_rewrite_rule('prodsearch/(.*)/(.*)-(.*)$','price-list/$1/$2+$3','top');
add_rewrite_rule('prodsearch/(.*)/(.*)$','index.php?tag=$matches[2]&cat=$matches[1]','top'); 
```

现在 wordpress 将我的第一个规则检测为外部规则并将其刷新到 .htaccess 文件，这会破坏我的执行顺序，现在首先评估第一个规则 2（作为内部 wordpress 重写规则集的一部分），然后再执行规则 1，因此再次出现 404页。

是否可以告诉 wordpress 不要将我的第一条规则视为外部规则并且不要将其刷新到 .htaccess。

或者有没有人有任何想法让这种重写工作？非常感谢。

# android - 无法使用 jax.net.ssl.SSLsocketFactory 连接

> ID：11406348
> 
> 赞同：0
> 
> 时间：2012-07-10T03:52:08.053
> 
> 标签：android, gmail

使用代码，我在移动到收件箱时遇到错误。该代码之前工作过，但现在它给出了一个错误。我该如何纠正它？

代码与错误一起提供。这显示了 SSL 工厂错误。错误是：

```
07-10 09:16:25.404: W/System.err(1524): javax.mail.MessagingException: Couldn't connect using "javax.net.ssl.SSLSocketFactory" socket factory to host, port: imap.gmail.com, 993; Exception: android.os.NetworkOnMainThreadException;
07-10 09:16:25.404: W/System.err(1524):   nested exception is:
07-10 09:16:25.415: W/System.err(1524):     java.io.IOException: Couldn't connect using "javax.net.ssl.SSLSocketFactory" socket factory to host, port: imap.gmail.com, 993; Exception: android.os.NetworkOnMainThreadException
07-10 09:16:25.424: W/System.err(1524):     at com.sun.mail.imap.IMAPStore.protocolConnect(IMAPStore.java:571)
07-10 09:16:25.424: W/System.err(1524):     at javax.mail.Service.connect(Service.java:288)
07-10 09:16:25.434: W/System.err(1524):     at javax.mail.Service.connect(Service.java:169)
07-10 09:16:25.434: W/System.err(1524):     at com.mycomp.android.test.EmailManager.getMails(EmailManager.java:56)
07-10 09:16:25.454: W/System.err(1524):     at com.mycomp.android.test.New1$1.onClick(New1.java:70)
07-10 09:16:25.454: W/System.err(1524):     at android.view.View.performClick(View.java:4084)
07-10 09:16:25.454: W/System.err(1524):     at android.view.View$PerformClick.run(View.java:16966)
07-10 09:16:25.454: W/System.err(1524):     at android.os.Handler.handleCallback(Handler.java:615)
07-10 09:16:25.454: W/System.err(1524):     at android.os.Handler.dispatchMessage(Handler.java:92)
07-10 09:16:25.454: W/System.err(1524):     at android.os.Looper.loop(Looper.java:137)
07-10 09:16:25.454: W/System.err(1524):     at android.app.ActivityThread.main(ActivityThread.java:4745)
07-10 09:16:25.474: W/System.err(1524):     at java.lang.reflect.Method.invokeNative(Native Method)
07-10 09:16:25.474: W/System.err(1524):     at java.lang.reflect.Method.invoke(Method.java:511)
07-10 09:16:25.474: W/System.err(1524):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
07-10 09:16:25.474: W/System.err(1524):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
07-10 09:16:25.474: W/System.err(1524):     at dalvik.system.NativeStart.main(Native Method)
07-10 09:16:25.484: W/System.err(1524): Caused by: java.io.IOException: Couldn't connect using "javax.net.ssl.SSLSocketFactory" socket factory to host, port: imap.gmail.com, 993; Exception: android.os.NetworkOnMainThreadException
07-10 09:16:25.505: W/System.err(1524):     at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:178)
07-10 09:16:25.505: W/System.err(1524):     at com.sun.mail.iap.Protocol.<init>(Protocol.java:107)
07-10 09:16:25.514: W/System.err(1524):     at com.sun.mail.imap.protocol.IMAPProtocol.<init>(IMAPProtocol.java:104)
07-10 09:16:25.524: W/System.err(1524):     at com.sun.mail.imap.IMAPStore.protocolConnect(IMAPStore.java:538)
07-10 09:16:25.544: W/System.err(1524):     ... 15 more
07-10 09:16:25.544: W/System.err(1524): Caused by: android.os.NetworkOnMainThreadException
07-10 09:16:25.564: W/System.err(1524):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
07-10 09:16:25.564: W/System.err(1524):     at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
07-10 09:16:25.596: W/System.err(1524):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
07-10 09:16:25.604: W/System.err(1524):     at java.net.InetAddress.getByName(InetAddress.java:289)
07-10 09:16:25.614: W/System.err(1524):     at java.net.InetSocketAddress.<init>(InetSocketAddress.java:105)
07-10 09:16:25.614: W/System.err(1524):     at java.net.InetSocketAddress.<init>(InetSocketAddress.java:90)
07-10 09:16:25.624: W/System.err(1524):     at com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:233)
07-10 09:16:25.634: W/System.err(1524):     at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:163)
07-10 09:16:25.644: W/System.err(1524):     ... 18 more 
```

我的代码是：

```
package com.mycomp.android.test;

import java.io.IOException;
import java.util.Properties;
import javax.activation.DataHandler;
import javax.mail.Folder;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.Session;
import javax.mail.Store;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

public class EmailManager {
    private String stmpHost = "smtp.gmail.com";
    private String mailServer = "imap.gmail.com";
    private EmailAccount account;
    private Session smtpSession; 
    private Session imapSession; 

    private Folder inbox;
    private Store store;
    public EmailManager(String username, String password, String urlServer, String stmpHost, String mailServer) {
        account = new EmailAccount(username, password, urlServer);
        this.stmpHost = stmpHost;
        this.mailServer = mailServer;
        initProtocol();
    }
    private void initProtocol() {
        EmailAuthenticator authenticator = new EmailAuthenticator(account);

        Properties props1 = new Properties();  
        props1.setProperty("mail.transport.protocol", "smtps");  
        props1.setProperty("mail.host", stmpHost);  
        props1.put("mail.smtp.auth", "true");  
        props1.put("mail.smtp.port", "465");  
        props1.put("mail.smtp.socketFactory.port", "465");  
        props1.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");  
        props1.put("mail.smtp.socketFactory.fallback", "false");  
        props1.setProperty("mail.smtp.quitwait", "false");  
        smtpSession = Session.getDefaultInstance(props1, authenticator); 

        Properties props2 = new Properties();
        props2.setProperty("mail.store.protocol", "imaps");
        props2.setProperty("mail.imaps.host", mailServer);
        props2.setProperty("mail.imaps.port", "993");
        props2.setProperty("mail.imaps.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
        props2.setProperty("mail.imaps.socketFactory.fallback", "false");
        imapSession = Session.getInstance(props2);
    }   
    public Message[] getMails() throws MessagingException {
        store = imapSession.getStore("imaps");
        store.connect(mailServer, account.username, account.password);
        inbox = store.getFolder("Inbox");
        inbox.open(Folder.READ_ONLY);
        Message[] result = inbox.getMessages();

        return result;
    }
    public void close() {
        //Close connection 
        try {
            inbox.close(false);
            store.close();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }       
    }
    public synchronized void sendMail(String subject, String body, String sender, String recipients) throws Exception {  
        MimeMessage message = new MimeMessage(smtpSession);
        DataHandler handler = new DataHandler(new ByteArrayDataSource(body.getBytes(), "text/plain"));  
        message.setSender(new InternetAddress(sender));  
        message.setSubject(subject);  
        message.setDataHandler(handler);  
        if (recipients.indexOf(',') > 0)  
            message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(recipients));  
        else  
            message.setRecipient(Message.RecipientType.TO, new InternetAddress(recipients));  
        Transport.send(message);  
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:22:05.010

[如何修复 android.os.NetworkOnMainThreadException](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception) ？
原因是您尝试在 UI 线程中连接到网络，而 API 不允许这样做。每当您连接到网络时，请使用[AsyncTask 。](http://developer.android.com/reference/android/os/AsyncTask.html)在这种情况下，您应该将 EmailManager 类的构造函数放入 AsycnTask 的 doInBackground 中。

# objective-c - 解析没有顶级标签的 JSON

> ID：11406349
> 
> 赞同：0
> 
> 时间：2012-07-10T03:52:08.393
> 
> 标签：objective-c, django, json

我正在使用 django-piston 并在 Objective-C 中解析 JSON 输出，但是由于输出不包含任何顶级标签而遇到了一些麻烦。我遇到的每个示例都将数据解析为字典，然后根据 objectForKey:@"foo" 生成一个数组，但就我而言，我没有要解析的顶级文本。

这是活塞生成的 JSON：

```
[
{
    "text": "Pain Intensity", 
    "question_number": 1, 
    "id": 1
}, 
{
    "text": "Personal Care (washing, dressing, etc.)", 
    "question_number": 2, 
    "id": 2
}, 
{
    "text": "Lifting", 
    "question_number": 3, 
    "id": 3
}, 
{
    "text": "Walking", 
    "question_number": 4, 
    "id": 4
}, 
{
    "text": "Sitting", 
    "question_number": 5, 
    "id": 5
} 
```

]

我想要做的是最终得到一个包含 id、文本和问题编号属性的对象数组。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T04:00:16.603

我用过这个[库](http://code.google.com/p/json-framework/downloads/list) 。这是非常简单和有用的。对于教程，请查看此[站点](http://blog.zachwaugh.com/post/309924609/how-to-use-json-in-cocoaobjective-c)。

解析代码的示例是这样的，您只需要导入`"JSON.h"`文件：

```
 NSString *jsonPath = [[NSBundle mainBundle] pathForResource:FILE_NAME ofType:FILE_EXTENSION];
    NSString *jsonString = [NSString stringWithContentsOfFile:jsonPath encoding:NSUTF8StringEncoding error:nil];
    NSArray *jsonArray = [NSArray arrayWithArray:[jsonString JSONValue]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T04:10:06.117

如果您使用的是 iOS 5（适用于 iOS 应用）或 OS 10.7（适用于 Mac 应用），则 NSJSONSerialization 类内置于：

```
NSArray *parsedJSON = [JSONObjectWithData:myData options:myOptions error:&error]; 
```

只要 myData 对象（一个 NSData 实例）包含使用受支持的 JSON 编码之一的有效 JSON 字符串，并且该 JSON 字符串的顶级元素是一个数组，就像在您的示例中一样，这将起作用。

当您使用示例 JSON 字符串执行此操作时，您应该得到一个包含 5 个字典的 NSArray。所以你可以做这样的事情：

```
NSMutableArray *newArray = [[NSMutableArray alloc] init];
for (int i = 0; i < [parsedJSON count]; i++) {
    MyClass *newObject = [[MyClass alloc] init];
    NSDictionary *questionDict = [parsedJSON objectAtIndex:i];
    [myObject setText:[questionDict objectForKey:@"text"]];
    [myObject setQuestionNumber:[questionDict objectForKey:@"question_number"]];
    [myObject setID:[questionDict objectForKey:@"id"]];
    [newArray addObject:newObject];
} 
```

以上假设您已经定义了一个名为 MyClass 的类，其属性名为 text、questionNumber 和 id。

# c# - 在 MVC 中更新时出现乐观并发问题

> ID：11406352
> 
> 赞同：1
> 
> 时间：2012-07-10T03:52:21.517
> 
> 标签：c#, asp.net-mvc-3, entity-framework-4.1, automapper

在 MVC3，实体框架项目中，我在编辑视图中使用 ViewModel（和 AutoMapper 来映射对象）。

当调用`db.SaveChanges();`（在编辑视图中）给出错误时，

> 保存不为其关系公开外键属性的实体时发生错误。EntityEntries 属性将返回 null，因为无法将单个实体标识为异常源。通过在实体类型中公开外键属性，可以更轻松地在保存时处理异常。有关详细信息，请参阅 InnerException

内在的例外是，

> 存储更新、插入或删除语句影响了意外数量的行 (0)。自加载实体后，实体可能已被修改或删除。刷新 ObjectStateManager 条目。

我在网上搜索此错误消息，现在我猜这是**乐观并发问题，由***Post*模型中定义的一对多关系引起，

> Post.Postedby -> 用户
> 
> Post.Author -> 作者

（这可能是因为，我尝试更新的 Post 模型是分离的，并且在调用时没有现有值`SaveChanges`）

**楷模**

```
public class Post
{
    [Key]
    public int Id { get; set; }
    ...
    public virtual User PostedBy { get; set; }
    public virtual Author Author { get; set; }
}

public class User
{
    [Key]
    public virtual Guid UserId { get; set; }
    ...
    public virtual ICollection<Post> Posts { get; set; }
}

public class Author
{
    public int Id { get; set; }
    ...
    public virtual ICollection<Post> Posts { get; set; }
} 
```

**控制器**

```
[HttpPost]
public ActionResult Edit(PostEditViewModel postEditViewModel, FormCollection form)
{
    if (ModelState.IsValid)
    {
        var post = Mapper.Map<PostEditViewModel, Post>(postEditViewModel);
        db.Entry(post).State = EntityState.Modified;
        string authorId = form["AuthorId"];
        post.Author = GetAuthorById(Convert.ToInt32(authorId));
        post.PostedBy = GetUserByName(User.Identity.Name);
        db.SaveChanges();
        return RedirectToAction("Index");
     }
        return View(postEditViewModel);
 } 
```

请帮我解决这个问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T09:30:11.207

在编辑视图中添加这个解决了这个问题:)

```
@Html.HiddenFor(model => model.Id) 
```

从[这个 SO question中学到的](https://stackoverflow.com/questions/9775503/proper-way-to-update-entity-from-controller-edit-action/9775533#9775533)

# php - 如何在一页的不同部分之间发送消息？

> ID：11406354
> 
> 赞同：0
> 
> 时间：2012-07-10T03:52:30.003
> 
> 标签：php, html

基本上，在以下代码中：

```
<?php
$hostname = '';
$username = '';
$password = '';
$dbn = '';
try {
$dbh = mysqli_connect($hostname , $username, $password ,$dbn);
//echo 'Connected to database';
}
catch(PDOException $e)
{
echo $e->getMessage();
}
if (isset($_POST['formsubmitted'])) {
$fullname = $_POST['fullname'];
$username = $_POST['username'];
$email1 = $_POST['email1'];
$password1 = $_POST['password1'];
$dob = $_POST['dob'];
$query_verify_email = "SELECT * FROM User  WHERE Email = '$email1'";
$result_verify_email = mysqli_query($dbh, $query_verify_email);
if (!$result_verify_email) {//if the Query Failed ,similar to             if($result_verify_email==false)
echo ' Database Error Occured ';
}
if (mysqli_num_rows($result_verify_email) == 0) { // IF no previous user is using this     email .
// Create a unique  activation code:
$activation = md5(uniqid(rand(), true));
//$id= uniqid();
$query_insert_user = "INSERT INTO `User` ( `Name`, `Username`, `Email`, `Password`,     `DOB`, `Activation`) VALUES ( '$fullname', '$username', '$email1', '$password1', '$dob',     '$activation')";
$result_insert_user = mysqli_query($dbh, $query_insert_user);
if (!$result_insert_user) {
echo 'Query did not work ';
}
if (mysqli_affected_rows($dbh) == 1) { //If the Insert Query was successfull.
// Send the email:
$message = " To activate your account, please click on this link:\n\n";
$message .= 'http://website' . '/active.php?email=' . urlencode($email1) . "&key=$activation";
mail($email1, 'Registration Confirmation', $message, 'From: a@b.com');
// Flush the buffered output.
// Finish the page:
echo '<div class="success">Thank you for registering! A confirmation email has been     sent to '.$email1.' Please click on the Activation Link to Activate your account </div>';
} else { // If it did not run OK.
echo '<div class="errormsgbox">You could not be registered due to a system error. We     apologize for any inconvenience.</div>';
}
} else { // The email address is not available.
echo    '<div class="errormsgbox" >That email address has already been registered.
</div>';
}
mysqli_close($dbh);//Close the DB Connection
}// End of the main Submit conditional.
?>
<html>
<head>
</head>
<body>
    <form name="f1" action="Main.php" method="post">
        <p>Full name: <br/><input class="tb10" type="text" name="fullname" /></p>
        <p>Username: <br/><input class="tb10" type="text" id="username"     name="username" /><br/>
        <p>Email: <br/><input class="tb10" type="text" id="email1" name="email1" /></p>
        <p>Re-Enter Email: <br/><input class="tb10" type="text" name="email2" /></p>    <br/>
        <p>Password: <br/><input class="tb10" type="password" name="password1" /></p>
        <p>Re-Enter Password: <br/><input class="tb10" type="password" name="password2"     /></p><br/>
        <p>Date of Birth: <br/><input class="tb10" type="text" name="dob" /></br><img     src="img/calendar1.gif" alt="Calendar"     onclick="displayCalendar(document.forms[0].dob,'yyyy/mm/dd',this)"/></p><br/>
        <div class="submit">
            <input type="hidden" name="formsubmitted" value="TRUE" />
            <input type="submit" value="Submit" class="button" />
        </div>                  
    </form>
</body>
</html> 
```

问题是我想显示显示在正文部分顶部（在 html 部分之前）的消息。这意味着当用户完成注册时，将显示消息而不是正文部分中的字段（姓名、用户名、电子邮件......）。

为了说明这一点：

如果注册有效，我想要消息：

```
Thank you for registering! A confirmation email has been     sent to '.$email1.' Please click on the Activation Link to Activate your account 
```

出现在正文部分（而不是字段）。

我希望你能理解我的解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T03:56:26.480

`regSuccess`根据用户注册是否成功，您在 php 部分设置一个变量，让它成为true 到 false

然后在 html 部分，在一个条件中检查这个变量的值`if`并输出相应的 html。

```
<?php
if($regSuccess == TRUE) {
?>
    Thank you message
<?php
} 
else 
{ ?>
    the input fields
<?php 
} ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T03:59:05.263

利用[$_SESSION](http://us2.php.net/manual/en/session.examples.basic.php)变量来指示用户成功注册。您将在您的页面上启动一个会话，并在执行任何其他操作之前检查该值是否已设置。如果变量存在，则显示激活消息，否则提供注册字段并继续使用现有代码。

使用的原因`$_SESSION`是在页面请求之间保持状态信息。

```
<?php

session_start();

if(isset($_SESSION['registered_email'])){

//Display message indicating user has already registered
echo 'Thank you for registering! A confirmation email has been sent to '. $_SESSION['registered_email'] .' Please click on the Activation Link to Activate your account';

}else{

// The rest of your code
...
// set session variable to indicate the registration was successful
$_SESSION['registered_email'] = $email1;
...
}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T03:59:22.577

您可以创建一个变量来存储您的错误消息，而不是直接回显它。`<body>`并在验证发生错误时添加“IF”案例，回显错误，否则打印注册表单。

# sqlite - 更新或忽略 || 更新或替换

> ID：11406357
> 
> 赞同：0
> 
> 时间：2012-07-10T03:53:08.383
> 
> 标签：sqlite

我在 sqlite3 数据库上看到了很多关于 Insert 或 Replace 或 Insert 或 Ignore 的例子。但是当我只想更新和替换数据库中的相同值时，我不想插入新记录。或者忽略在数据库中找到的重复记录并更新其余值。

样本数据库

```
ID       Name        Number      Address    
1        John        81234999    Sans 
```

在这种情况下，假设我只更新数字并且地址保持不变。它应该更新并替换为相同的值。反之亦然，用于更新地址而不是数字。最后，一起更新号码和地址。好心提醒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:13:49.203

您可以更新单个列而不影响其他列。你问的是这个吗？

# scala - Squeryl ORM 使用 Long、bigint 和运算符失败？

> ID：11406358
> 
> 赞同：0
> 
> 时间：2012-07-10T03:53:26.213
> 
> 标签：scala, squeryl

Squeryl 只是今天没有它。我有一个令人讨厌的错误，到目前为止我没有成功解决。

Postgres 抛出的错误：

```
Caused by: java.lang.RuntimeException: Exception while executing statement : ERR
OR: operator does not exist: character varying = bigint
  Hint: No operator matches the given name and argument type(s). You might need
to add explicit type casts.
  Position: 722 
```

不知道为什么会抛出此错误，除了我将 Scala Long 存储在 bigint 字段中，然后对其运行查询。难道我做错了什么？

所有这些都在 Squeryl ORM 上运行，所以我 90% 确信我的类型是正确的。我的代码也可以编译。

# 编辑

这实际上是我用来查询的代码。不多...

```
from(DB.relays)(r =>
where((r.userId === userId))
select (r)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T04:57:58.533

我是一个可怕的人。

花了将近两个小时，但这一切都归结为有毒的数据库演变。

我不知道，我对它是如何消失的感到困惑，但那个`userId`专栏实际上是一个`text`字段。直到我开始打印表结构才发现错误。

我很震惊它是如何在没有被发现的情况下进入那里的，因为我疯狂地输入记录而没有错误。

# c++ - 为什么我的 HUD 没有在 OpenGL 中渲染？

> ID：11406361
> 
> 赞同：2
> 
> 时间：2012-07-10T03:53:45.753
> 
> 标签：c++, opengl, rendering, hud

我是 OpenGL 的新手，我一直在阅读 NeHe 的教程和其他各种网络资源，并且我正在测试一些东西以将文本渲染为一种 HUD，而不是其他所有东西。经过一个漫长的夜晚，我无法让它工作，我在这里找不到任何有效的解决方案，所以我想我会问。

我的代码：

```
GLvoid glLoadHUD(GLvoid)
{
    glPushAttrib(GL_LIGHTING_BIT |
                    GL_DEPTH_BUFFER_BIT |
                    GL_TEXTURE_BIT);

    glDisable(GL_LIGHTING);
    glDisable(GL_DEPTH_TEST);
    glDisable(GL_TEXTURE_2D);

    glMatrixMode(GL_PROJECTION);
        glPushMatrix();
            glLoadIdentity();
            glOrtho(0.0f, 1.0f, 0.0f, 1.0f, -1.0f, 1.0f);
            glRasterPos2f(0.1f, 0.6f);
            glColor3f(1.0f,1.0f,1.0f);
            glPrint("Test.");
            glRasterPos2f(0.0f, 0.0f);
        glPopMatrix();
    glMatrixMode(GL_MODELVIEW);
    glPopAttrib();

    glEnable(GL_TEXTURE_2D);
    glEnable(GL_LIGHTING);  
    glEnable(GL_DEPTH_TEST);
} 
```

这是渲染文本的代码，这是绘制场景的代码：

```
int DrawGLScene(GLvoid)                                         
{

glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); // Clears buffers
glLoadIdentity();

// If I put glLoadHUD(); here, it renders but the models render over it,
    //  which is useless.

for (xloop = 0; xloop < 3;)
{
    glLoadIdentity();
    glTranslatef(-4.0f+(float(xloop)*4.0f),0.0f,-12.0f);
    glCallList(dlstBox);    // This is the call to create a box.
    xloop++;
}

glLoadHUD();  // If I put it here though, it doesn't render at all.

return TRUE;
} 
```

预先感谢您提供的任何帮助，我知道我很年轻，我确信它正盯着我的脸，但这让我发疯，我不知道如何让它发挥作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T05:41:23.690

在`glLoadHud`场景的其余部分之后，您的`MODELVIEW`矩阵仍在堆栈上，并且您不会将其作为`glLoadHud`. 因此，`glTranslatef`当您绘制 hud 时，您在场景中积累的所有翻译仍然处于活动状态，这会将其翻译出您的可视窗口。

清除`MODELVIEW`矩阵作为开始的一部分，`glLoadHud`看看是否有区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T03:58:20.253

它可能在您的 z 剪辑内打印，因此不会显示在您的屏幕上。所以，稍微移出屏幕，看看它是否出现。

# asp.net - 以编程方式嵌套 ASP.NET 用户控件

> ID：11406362
> 
> 赞同：1
> 
> 时间：2012-07-10T03:53:48.263
> 
> 标签：asp.net, vb.net

我有一个用户控件，它以编程方式多次包含第二个用户控件，但最终结果是根本没有为控件生成任何 HTML。

默认.aspx

```
<%@ Page Language="vb" AutoEventWireup="false" CodeBehind="Default.aspx.vb" Inherits="TestApplication._Default" %>
<%@ Register TagName="Ten" TagPrefix="me" Src="~/Ten.ascx" %>

<html>
<head runat="server"></head>
<body>
    <form id="form1" runat="server">
        <me:Ten ID="thisTen" runat="server" />
    </form>
</body>
</html> 
```

十.ascx

```
<%@ Control Language="vb" AutoEventWireup="false" CodeBehind="Ten.ascx.vb" Inherits="TestApplication.Ten" %>

<asp:Panel ID="List" runat="server"></asp:Panel> 
```

十.ascx.vb

```
Public Class Ten
    Inherits System.Web.UI.UserControl
    Protected Sub Page_Init() Handles Me.Init
        For I As Integer = 0 To 11
            List.Controls.Add(New One(I.ToString))
        Next
    End Sub
End Class 
```

一.ascx

```
<%@ Control Language="vb" AutoEventWireup="false" CodeBehind="One.ascx.vb" Inherits="TestApplication.One" %>

<asp:Button ID="OneButton" Text="Press ME!" runat="server" /> 
```

一.ascx.vb

```
Public Class One
    Inherits System.Web.UI.UserControl
    Private _number As String
    Sub New(ByVal number As String)
        _number = number
    End Sub
    Protected Sub OneButton_Click(ByVal sender As Object, ByVal e As EventArgs) Handles OneButton.Click
        Dim script As String = "<script type=""text/javascript"">" +
                               "alert('Button " + _number + "');" +
                               "</script>"
        ScriptManager.RegisterStartupScript(Me, Me.GetType(), "ServerControlScript", script, True)
    End Sub
End Class 
```

**编辑：**

使用负载控制 (Ten.aspx)

```
Dim p() As String = {I.ToString}
Dim o As One = Me.LoadControl(New One("").GetType, p)
List.Controls.Add(o) 
```

**编辑2：**

```
Dim o As One = Me.LoadControl("~/One.ascx")
o._number = I.ToString
List.Controls.Add(o) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T04:12:27.940

我不会在 OnInit 事件中执行此操作，但这可能与您的问题有关，也可能无关。相反，我会在 OnLoad 事件中加载控件。

但是，使用`new`关键字通常不是加载用户控件的方式。对不起，但我只知道 C#，不知道确切的翻译：

在 C# 中：

```
One one = (One)this.LoadControl("~/Controls/One.ascx"); 
```

这在 VB.NET 中看起来正确吗？

```
Dim one As One = Me.LoadControl("~/Controls/One.ascx") 
```

您可能必须在加载控件后删除构造函数并设置属性。

# java - 如何停止数据库重试连接？使用 c3po

> ID：11406363
> 
> 赞同：6
> 
> 时间：2012-07-10T03:53:50.090
> 
> 标签：java, spring, c3p0

如何停止数据库重试连接？使用 c3po 即在我的应用程序中，当我获得数据库通信失败时，我想停止重试连接

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T03:59:23.123

[C3P0 文档](http://www.mchange.com/projects/c3p0/)

1.  在类路径的根目录中设置 c3p0.properties
2.  获取重试次数=1

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T12:44:12.690

正如 MJB 所说，将 c3p0 的配置参数 acquireRetryAttempts 设置为 1 将导致客户端仅在连接获取失败时遇到异常，而不是等待并重试。

如果您希望 c3p0 连接池在一轮获取失败后不再尝试连接到数据库（“一轮”由 acquireRetryAttempts 定义），请将配置参数 breakAfterAcquireFailure 设置为 true。（默认为 false，c3p0 将在新客户来电时再次尝试获取连接。）

[http://www.mchange.com/projects/c3p0/#acquireRetryAttempts](http://www.mchange.com/projects/c3p0/#acquireRetryAttempts)

[http://www.mchange.com/projects/c3p0/#breakAfterAcquireFailure](http://www.mchange.com/projects/c3p0/#breakAfterAcquireFailure)

# java - java.io.IOException：准备失败：状态=0x1

> ID：11406365
> 
> 赞同：1
> 
> 时间：2012-07-10T03:54:07.430
> 
> 标签：java, android

请帮助我解决此错误，我从过去 5 天开始尝试此问题，但无法解决。

由于 android 中的“文本讲话”没有暂停状态，我正在尝试使用 mediaplayer 来暂停和播放。

将文本字符串转换为 .3gp 格式并存储在 sdcard 中，直到这里它工作正常，但我在 mediaPlayer 中遇到问题，它抛出错误

```
07-10 09:12:12.279: D/(13589): temper destination file/mnt/sdcard/tmpaudio.3gp
07-10 09:12:12.279: I/TextToSpeech.java - synthesizeToFile(13589): synthesizeToFile text of length 256
07-10 09:12:12.479: D/MediaPlayer(13589): setDataSource(tmpaudio.3gp)
07-10 09:12:12.489: E/MediaPlayer(13589): error (1, -2147483648)
07-10 09:12:12.489: W/System.err(13589): java.io.IOException: Prepare failed.: status=0x1
07-10 09:12:12.489: W/System.err(13589):    at android.media.MediaPlayer.prepare(Native Method)
07-10 09:12:12.489: W/System.err(13589):    at net.sf.andpdf.pdfviewer.PdfViewerActivity$GraphView$2.onClick(PdfViewerActivity.java:651)
07-10 09:12:12.489: W/System.err(13589):    at android.view.View.performClick(View.java:2485)
07-10 09:12:12.489: W/System.err(13589):    at android.view.View$PerformClick.run(View.java:9080)
07-10 09:12:12.489: W/System.err(13589):    at android.os.Handler.handleCallback(Handler.java:587)
07-10 09:12:12.489: W/System.err(13589):    at android.os.Handler.dispatchMessage(Handler.java:92)
07-10 09:12:12.489: W/System.err(13589):    at android.os.Looper.loop(Looper.java:130)
07-10 09:12:12.489: W/System.err(13589):    at android.app.ActivityThread.main(ActivityThread.java:3683)
07-10 09:12:12.489: W/System.err(13589):    at java.lang.reflect.Method.invokeNative(Native Method)
07-10 09:12:12.489: W/System.err(13589):    at java.lang.reflect.Method.invoke(Method.java:507)
07-10 09:12:12.489: W/System.err(13589):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:875)
07-10 09:12:12.489: W/System.err(13589):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:633)
07-10 09:12:12.489: W/System.err(13589):    at dalvik.system.NativeStart.main(Native Method)
07-10 09:12:12.489: D/MediaPlayer(13589): start state 0
07-10 09:12:12.489: E/MediaPlayer(13589): start called in state 0
07-10 09:12:12.489: E/MediaPlayer(13589): error (-38, 0)
07-10 09:12:12.529: E/MediaPlayer(13589): Error (-38, 0) 
```

代码：

```
public void onClick(View v) {                   
    mediaPlayer = new MediaPlayer();
    if (mBtplay.getText().equals(getString(R.string.play_str))) {
        PdfReader reader = null;
        try {
            reader = new PdfReader(pdffilename);
        } catch (IOException e3) {
            // TODO Auto-generated catch block
            e3.printStackTrace();
        }
        int num = mPdfPage.getPageNumber();
        String str = null;
        try {
            str = PdfTextExtractor.getTextFromPage(
                                                   reader, num);
        } catch (IOException e2) {
            // TODO Auto-generated catch block
            e2.printStackTrace();
        }

        HashMap<String, String> myHashRender = new HashMap<String, String>();
        myHashRender.put(TextToSpeech.Engine.KEY_PARAM_UTTERANCE_ID, str);

        File appTmpPath = Environment.getExternalStorageDirectory();
        System.out.println(""
                           + appTmpPath.getAbsolutePath());
        appTmpPath.mkdirs();
        String tempFilename = "tmpaudio.3gp";

        final String tempDestFile = appTmpPath
            .getAbsolutePath() + "/" + tempFilename;
        Log.d("","temper destination file"+tempDestFile);
        mTts.synthesizeToFile(str, myHashRender,
                              tempDestFile);
        try {
            mediaPlayer.setDataSource(tempDestFile);
            mediaPlayer.prepare();
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        try{
            mediaPlayer.start();
        }catch(Exception e){
            System.out.println(""+e);

        }
    } else {
        try {
            Log.d("", "pause");

            mBtplay.setText(getString(R.string.pause_str));
            mediaPlayer.pause();
        } catch (Exception pa) {
            if (mediaPlayer != null) {
                mediaPlayer.stop();
                mediaPlayer.release();
            }

        }

    }   

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:17:22.263

我有几个建议给你。按照给定的顺序一一尝试。

1）在播放前检查您要播放的文件是否存在以及路径是否正确。

2) 尝试不同的音频格式，例如 mp3。

3）使用文件描述符而不是文件路径，即

```
FileInputStream fis = new FileInputStream(pathoffiletobeplayed);
mediaPlayer.setDataSource(fis.getFD()); 
```

4）打电话`reset()`之前`setDataSource()`。

1是强制性的。如果不成功，请尝试 2​​-3-4 的所有组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-05T15:37:04.407

1.  检查对媒体文件的引用是否正确释放。
2.  使用系统中存在的音频工具进行播放

# java - 用于将变量输入数组的for循环不起作用？

> ID：11406371
> 
> 赞同：0
> 
> 时间：2012-07-10T03:55:11.330
> 
> 标签：java, arrays

我正在尝试将 3 个不同的变量输入到 while 循环内的数组中，只要我没有为任何变量输入 stop 即可。如果第一个变量没有停止，while循环只假设让我输入第二个变量值，同样输入第三个变量值

现在，第一个循环运行良好，我可以输入所有 3 个变量，但是第二次和第三次，for 循环输出第一个变量，但不允许我在跳到第二个变量之前输入值。例如我的意思：

1.  名称：afasdf

2.  额外信息：afdsaf

3.  单价：123123214

4.  名称：额外信息：adflskjflk 也是，输入 Stop 也不会结束循环

5.  单位成本：123217

我知道当只有一个变量时这个循环有效，并且我尝试使用 for 循环而不是 while 循环，并添加了大量的 else 语句，但它似乎保持不变

我设置断路器的方式有问题吗？我设置最后一个断路器的方式（即使我为双变量设置 stop 也会停止）是否会弄乱 hte 循环的其余部分？

太感谢了

这是我的代码

```
ArrayItem s = new ArrayItem(); 

String Name = null, ID = null;  
double Money = 0;

boolean breaker = false;
while(breaker ==false)
{
   System.out.print("Name:" + "\t");
   Name = Input.nextLine();

   if(Name.equals("Stop")) //see if the program should stop
       breaker = true;

   System.out.print("Extra Info:" + "\t");
   Details = Input.nextLine();

   if(ID.equals("Stop")) 
       breaker = true;

   System.out.print("Unit Cost:" + "\t");
   Money = Input.nextDouble();

   // suppose to let me stop even if i input stop
   //  when the variable is suppose to be a double
   if(Input.equals("stop") || Input.equals("stop"))
      breaker = true;
   else
      s.SetNames(Name);

   s.SetInfo(Details);
   s.SetCost(Money);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T04:12:14.543

关于代码的几件事：`"Name:" + "\t"`可以简化 ot `"Name:\t"`。其余代码也是如此。在 Java 中，习惯上在第一个单词是小写的情况下使用驼峰式。例如，`s.SetMoney`将是`s.setMoney`。此外，变量遵循相同的规则 where `Money`would be`money`和`ID`will be `id`。如果您的老师以其他方式教您，请遵循他们的风格。

该循环也应该是一个 do-while 循环：

```
do
{
    // read each value in sequence, and then check to see if you should stop
    // you can/should simplify this into a function that returns the object
    // that returns null if the value should stop (requiring a capital D
    // double for the return type)

    if ( /* reason to stop */)
    {
        break;
    }

    s.setNames(name);
    s.setId(id);
    s.setMoney(money);

} while (true);

private String getString(Scanner input)
{
    String result = input.nextLine();

    // look for STOP
    if (result.equalsIgnoreCase("stop"))
    {
        result = null;
    }

    return result;
}

private Double getDouble(Scanner input)
{
    Double result = null;
    // read the line is a string looking for STOP
    String line = getString(input);

    // null if it's STOP
    if (line != null)
    {
        try
        {
            result = Double.parseDouble(line);
        }
        catch (NumberFormatException e)
        {
            // not a valid number, but not STOP either!
        }
    }

    return result;
} 
```

里面有很多概念，但是随着您的进步，它们应该会有所帮助。我会让你把碎片拼凑起来。

此外，您确实需要修复括号，但这不是唯一的问题。因为`Money`是 a `double`，所以您必须将值读取为 a `String`。我怀疑这`Input`是一个`Scanner`对象，所以您可以检查`Input.hasNextDouble()`它是否不是，然后您可以有条件地检查该`String`值以查看它是否“停止”（注意：您正在检查“停止”和“停止”，它们不相等）。您最后一次没有机会的检查将扫描仪与“停止”进行比较，这永远不会是真的。查看

```
System.out.print("Unit Cost:\t");

if (Input.hasNextDouble())
{
    Money = Input.nextDouble();

    // you can now set your object
    // ...
}
// it's not a double; look for "stop"
else if (Input.nextLine().equalsIgnoreCase("stop"))
{
    // exit loop
    break;
}

// NOTE: if it's NOT a double or stop, then you have NOT exited
//       and you have not set money 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T04:13:16.490

```
breaker = true;
while(breaker){
   Name = readInput("Name");
   Details = readInput("Details");
   Money = Double.parseDouble(readInput("Money"));

   if(Name.equals("stop") || Details.equals("stop"))
       breaker = false;
   else {
      // set ArrayItem
   }
}

private static String readInput(String title){
   System.out.println(title+":");
   //... read input
   // return value
} 
```

# iphone - 像核心动画老虎机一样在 z 轴上旋转

> ID：11406372
> 
> 赞同：5
> 
> 时间：2012-07-10T03:55:18.910
> 
> 标签：iphone, ios, xcode, core-animation

我可以通过这里的代码移动或动画我的 UIView：

```
- (void) makeAnim1{

    //downward animation 
    [UIView animateWithDuration:1.5
                          delay:0.15
                        options: UIViewAnimationCurveLinear
                     animations:^{
                         carousel.frame = CGRectOffset(carousel.frame, 0, 650);
                     }
                     completion:^(BOOL finished){ //task after an animation ends
                         [self performSelector:@selector(makeAnim1_1) withObject:nil afterDelay:2.0];
                         NSLog(@"Done!");
                     }];    
}

- (void) makeAnim1_1{

    //upward animation
    [UIView animateWithDuration:1.5
                          delay:0.1
                        options: UIViewAnimationCurveLinear
                     animations:^{
                         carousel.frame = CGRectOffset(carousel.frame, 0, -650);
                     } 
                     completion:^(BOOL finished){
                        NSLog(@"Done!");
                     }];    

} 
```

但它只会上下移动`UIView`。我怎样才能让它像一个旋转`Slot machine`但只包含一个图像或视图。就像在 z 轴上旋转一样。但是让它看起来包含不止一个图像。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:56:06.930

而不是更改`frame`动画块内部，而是更改`transform`. 变换可用于缩放、旋转和平移（移动）视图。您只能围绕 z 轴旋转，但这就是您所要求的。视图上的`transform`属性采用`CGAffineTransform`，如下所示：

```
// rotate pi/2 degrees clockwise
carousel.transform = CGAffineTransformMakeRotation(M_PI_2); 
```

* * *

*如果*你需要做更高级的变换，比如绕另一个轴旋转，那么你需要使用一点核心动画并设置视图层的变换属性（它需要 a`CATransform3D`而不是 a `CGAffineTransform`）。

与所有核心动画代码一样，您需要导入 QuartzCore.framework 并在代码中包含 QuartzCore/QuartzCore.h。

您正在做的上述动画是 UIView 动画，它们仅用于动画视图，但您要求的动画需要视图层的更高级动画。我建议您查看 CABasicAnimation 的文档并查看 iOS 的核心动画编程指南以了解更多信息。

您可以像这样为视图层的 x 旋转设置动画：

```
CABasicAnimation *slotAnimation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.x"];
[slotAnimation setToValue:[NSNumber numberWithFloat:M_PI_2]];
// animation customizations like duration and timing 
// that you can read about in the documentation 
[[carousel layer] addAnimation:slotAnimation forKey:@"mySlotAnimation"]; 
```

上面的代码确实会围绕 x 轴旋转视图，但如果没有透视，看起来会很傻（搜索“透视核心动画”，之前有人问过）。可能需要进行很多调整才能获得正确的外观，但这应该足以让您入门。

# c# - MVC .Net 4 Razor 使用问题 标签

> ID：11406376
> 
> 赞同：1
> 
> 时间：2012-07-10T03:56:22.697
> 
> 标签：c#, javascript, asp.net-mvc, razor

这是我的代码：

```
<text>
    <script type="text/javascript">    
    @foreach (var script in Model.Content.StartupScripts)
    {
        @script
    }    
    </script>
</text> 
```

@script 包含一个 javascript 脚本，但这会被 razor 渲染为：

```
 <script type="text/javascript">    
    {
            {
                var instanceId = &#39;blah&#39;;
                new RequestQueue(&#39; blah
       // etc 
```

所以......看起来标签不适用于@script变量，因为单引号被替换为'。我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T04:03:35.660

由于 MVC 会自动对所有输出进行编码，因此您需要强制它显示原始文本。您可以使用`@Html.Raw(script)`HTML 助手来做到这一点。

# python - Python mongoengine中没有重复的ListField

> ID：11406380
> 
> 赞同：11
> 
> 时间：2012-07-10T03:57:07.757
> 
> 标签：python, mongodb, unique, mongoengine

我一定错过了一些非常明显的东西。但我似乎找不到使用 mongoengine 来表示集合的方法。

```
class Item(Document):
    name = StringField(required=True)
    description = StringField(max_length=50)
    parents = ListField(ReferenceField('self'))

i = Item.objects.get_or_create(name='test item')[0]

i2 = Item(name='parents1')
i2.save()
i3 = Item(name='parents3')
i3.save()
i.parents.append(i2)
i.parents.append(i2)
i.parents.append(i3)
i.save() 
```

上面的代码将在 i1 的 parents 字段中为 i2 创建一个重复条目。您如何在 mongoengine 中表达类似外键的关系？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-10T15:26:38.127

您可以使用原子更新和 $addToSet 方法，而不是使用`append`然后使用并让 MongoEngine 将其转换为更新 - 请参阅[更新 mongoDB 文档](http://www.mongodb.org/display/DOCS/Updating)`save`

所以在你的情况下，你可以这样做：

```
i.update(add_to_set__parents=i2)
i.update(add_to_set__parents=i3)
i.update(add_to_set__parents=i2) 
```

支持`addToSet`且`each`当前不存在 - 请参阅：[https ://github.com/MongoEngine/mongoengine/issues/33](https://github.com/MongoEngine/mongoengine/issues/33)

**更新：**

[支持add_to_set](http://docs.mongoengine.org/guide/querying.html#atomic-updates)。

# ruby-on-rails - 在不复制部分的情况下渲染 STI 对象的干净方法？

> ID：11406383
> 
> 赞同：4
> 
> 时间：2012-07-10T03:57:45.497
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这是抛出我的完整错误轨道：

缺少带有 {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]} 的部分 publisher_groups/publisher_group。搜索: blah blah blah

在组织显示视图中：

```
<%= render @organization.groups %> 
```

在 /views/groups/_group.html.erb 中：

```
<p><%= group.name %></p>
<p><%= group.type %></p> 
```

关系存在于组模型和组织模型中。错误引用 PublisherGroup。Group 模型具有三种类型的 STI，到目前为止，除了指定类型之外什么都不做。由于所有 @organization.group 对象都是组的子类，我怎样才能让这个渲染正常运行？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-10T07:17:56.143

默认情况下，尝试渲染一个活动模型对象会尝试找到一个名为`table_name/class_name`

特别是对于 STI 层次结构，它将为每个类寻找不同的模板。这由`to_partial_path`返回部分路径的实例方法控制

如果您在组上覆盖该方法

```
def to_partial_path
  'groups/group'
end 
```

然后所有子类将使用相同的部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T04:00:03.810

我能想到的唯一一件事是，如果您的模型名为 publisher_group，它将检查这些文件夹。相反，您将使用团体作为惯例。如果不是这种情况，我建议直接指定路径作为一个简单的解决方案：

```
<%= render :partial => "publisher_groups/publisher_group", :collection => @organization.groups %> 
```

# regex - 批处理文件中的 FINDSTR 命令以显示变量输出

> ID：11406384
> 
> 赞同：1
> 
> 时间：2012-07-10T03:58:01.870
> 
> 标签：regex, file, batch-file, findstr

我想知道是否有人可以帮助我编写一个相对简单的批处理文件命令，我可以用它来建立我的批处理文件的其余部分。我在一个支持许多产品的支持小组中工作，其中有一个特别是我是唯一一个了解 XML 配置文件的人。我想要做的是以下内容：这是配置文件的摘录：

```
<!-- FILEDROP SETTINGS -->
  <!-- metadataType = X - XML; F - Flat file; E - embedded in filename; B - embedded PDF with bookmarks  -->
        <add key="metadataType" value="E" /> 
```

我要做的是创建一些用户可以运行的 GUI（批处理文件）。运行批处理文件时，将提示用户输入要搜索的文件的名称。在此示例中，文件名为 importer.config。我希望批处理文件搜索字符串

```
<add key="metadataType" value="E" /> 
```

在这种情况下，我希望它采用引号“E”之间的值并将某些内容输出到 DOS 窗口以让用户知道，该组件使用嵌入在文件名中的元数据。当然，如果值为 F，则此组件使用平面文件中的元数据....我只是想在感叹中将其拼写给用户，而不是让用户搜索这个大的大型配置文件，因为他们从来没有似乎知道去哪里找。

任何可以提供帮助的人都将是一个巨大的帮助，因为这将是我其余代码向用户显示值的基础。我认为使用正则表达式和 FINDSTR 可能是最好的，但我尝试了很多东西但无法让它工作

就像是：`(?<=<add key="metadataType" value=")\w`

这将查找我需要的字符串，然后获取后面的值（在这种情况下为 E）...我只是不知道如何写出将其存储在哪里或如何将其输出到不同的东西...任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T05:09:44.143

FINDSTR 的正则表达式支持受到严格限制，并且其中的内容不像您在传统实现中所习惯的那样工作。通过键入`help findstr`或`findstr /?`从命令窗口阅读文档。我还推荐阅读[Windows FINDSTR 命令有哪些未记录的功能和限制？](https://stackoverflow.com/q/8844868/1012053). 正则表达式奇怪的描述在答案的底部。

您可以下载并使用 awk、grep、sed 或 perl 之类的 Windows 版本。或者您可以使用 VBScript 或 JScript。

使用本机批处理解析 XML 是一场噩梦。您可以尝试以下方法。它不是很健壮，但在大多数情况下都可以使用：

```
@echo off
setlocal enableDelayedExpansion
for /f "delims=" %%A in ('findstr /rc:"\<add key=[\"\"]metadataType[\"\"] value=[\"\"]" "fileName.txt"') do set "ln=%%A"
set ^"ln=!ln:*"metadataType" value=!"
for /f delims^=^=^" %%A in ("!ln!") do set value=%%A
echo value=!value! 
```

# html - Horizontally aligning a list with 6 items?

> ID：11406387
> 
> 赞同：0
> 
> 时间：2012-07-10T03:58:19.267
> 
> 标签：html, css, list, css-float, inline

I can't seem to figure out how to get 6 list items (with spacing) to horizontally align evenly across the site. The width of the page is 1000px, this is what I have...

```
<ul id='mp_locations'>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
<style>
#mp_locations {
clear:both;
list-style:none;
padding:0;
margin:0;
width: 1000px;
}
#mp_locations li {
float:left;
width:180px;
list-style:none;
height:100px;
-moz-border-radius: 5px;
-webkit-border-radius: 5px;
border-radius: 5px;
background-color: #F5F5F5;
padding:0;
margin:0;
margin-left:10px;
width:15%;
}
#mp_locations li:first-child {
margin-left:0;
}
</style> 
```

The issue with this is that 15% is too small but 16% is too big. Since you can't do decimals (to the best of my knowledge) I can't set it to a set amount. So basically, how can I get 6 boxes to line up evenly across the page?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T04:02:32.940

Hey now define `with` of your **id** `#mp_locations li` `15.83%`

```
#mp_locations li {
width:15.83%;
} 
```

**live demo** [http://tinkerbin.com/kzx7nX9s](http://tinkerbin.com/kzx7nX9s)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T04:02:07.030

you can do decimals :) [http://www.secondpicture.com/tutorials/web_design/css_ul_li_horizontal_css_menu.html](http://www.secondpicture.com/tutorials/web_design/css_ul_li_horizontal_css_menu.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T04:10:20.670

there are two width rules in `#mp_locations li` you could change it to

```
#mp_locations li {
float:left;
width:156px;
list-style:none;
....
margin:0;
margin-left:10px; 
```

And I advice you to change the margin too: `margin: 0px 5px;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T04:14:48.013

dont repeat same style attribute un necessarily. you can get the desired output just by changing `margin-left` see below:

### css

```
#mp_locations {
clear:left;
list-style-type:none;
padding:0;
margin:0;
width: 1000px;
background-color:red;
overflow:hidden;
}
#mp_locations li {
float:left;
height:100px;
border-radius:5px;
background-color: #F5F5F5;
margin-left:8px;
width:16%;
display:inline;
}
#mp_locations li:first-child {
margin-left:0;
} 
```

### html

```
<ul id='mp_locations'>
<li>d</li>
<li>f</li>
<li>d</li>
<li>ff</li>
<li>fff</li>
<li>ddfdfdfd</li>
</ul> 
```

[Working DEMO](http://tinkerbin.com/Y1xEoi15)

# facebook - 如何检查用户是否喜欢一个网址

> ID：11406388
> 
> 赞同：3
> 
> 时间：2012-07-10T03:58:20.167
> 
> 标签：facebook, facebook-c#-sdk, facebook-fql

假设我们在链接“http://myshop.com/product/1”上放了like按钮

我们想检查用户是否点击了此链接“http://myshop.com/product/1”上的点赞。如果用户像这样点击。我们会给他一些折扣或给他一些奖励。

这个怎么做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T05:06:35.390

只要它是 Open Graph URL，您就可以查看[`url_like`](http://developers.facebook.com/docs/reference/fql/url_like/)表格

```
SELECT user_id FROM url_like WHERE user_id = me() and url="THE_URL_TO_CHECK" 
```

成功的 JSON 响应将包含 user_id，因此您只需放置一个条件函数以在执行查询后返回 true 或 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T08:46:22.570

您可以使用来自 facebook 的 Javascript SDK。您可以阅读用户的所有喜欢或要求特定页面：

```
FB.api("/me/likes/" + OBJECT_ID, function(response) {
  // Do some staff here with page data
})

FB.api("/me/likes/", function(response) {
  // Do some staff here with all pages data
}) 
```

您可以使用[Graph API 资源管理](http://developers.facebook.com/tools/explorer?method=GET&path=me/likes)器进行测试。

如果是您的情况，您需要知道 Facebook Open Graph 中的对象 ID。您可以在以下[站点中查看](http://developers.facebook.com/tools/debug/og/object?q=google.com)

# eclipse - 在不退出控制台的情况下停止执行

> ID：11406392
> 
> 赞同：0
> 
> 时间：2012-07-10T03:58:46.063
> 
> 标签：eclipse, r, statet

有谁知道如何在不退出 R 控制台的情况下停止程序执行？我可以打电话`q("no")`，但实际上我正在寻找类似于 throws 语句的东西来停止执行，但让控制台保持活动状态。返回？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T04:07:24.133

您可以使用[停止](http://stat.ethz.ch/R-manual/R-patched/library/base/html/stop.html)功能：

```
stop() 
```

# java - 如何在 GridBagLayout 中左对齐组件？

> ID：11406393
> 
> 赞同：3
> 
> 时间：2012-07-10T03:58:57.197
> 
> 标签：java, swing, gridbaglayout

![在此处输入图像描述](../Images/7aeb4a8943ad72d6f7d81c834b75de74.png)

上图中的每一行，都是使用 gridbaglayout 来放置组件的自定义组件。我试图避免按钮“Abc”之前的那个空间，我希望它完全推到左侧。如何使用 gridbaglayout 约束来实现这一点？

**编辑**添加源代码。

```
 gridBagConstraints = new GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = GridBagConstraints.NONE;
        gridBagConstraints.insets =  new Insets(11,0,0,0);
        add(abcButton,gridBagConstraints);
            gridBagConstraints = new GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = GridBagConstraints.NONE;
        gridBagConstraints.insets = new Insets(20, 10, 0, 0);
        add(comp1,gridBagConstraints);
        gridBagConstraints = new GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = GridBagConstraints.NONE;
        gridBagConstraints.insets = new Insets(20, 35, 0, 0);
        add(comp2, gridBagConstraints);
        gridBagConstraints = new GridBagConstraints();
        gridBagConstraints.gridx = 3;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.ipadx = 120;
        gridBagConstraints.ipady = 3;
        gridBagConstraints.fill = GridBagConstraints.NONE;
        gridBagConstraints.insets = new Insets(11,20, 0, 0);
        add(txtField1, gridBagConstraints);
    btnTxtField1.setMargin(new Insets(2, 1, 2, 1));
        gridBagConstraints = new GridBagConstraints();
        gridBagConstraints.gridx = 4;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.ipadx = 0;
        gridBagConstraints.fill = GridBagConstraints.NONE;
        gridBagConstraints.insets = new Insets(11, 0, 0, 0);
        add(btnTxtField1, gridBagConstraints);
    gridBagConstraints = new GridBagConstraints();
    gridBagConstraints.gridx = 5;
    gridBagConstraints.gridy = 0;
    gridBagConstraints.ipadx = 120;
    gridBagConstraints.ipady = 3;
    gridBagConstraints.fill = GridBagConstraints.NONE;
    gridBagConstraints.insets = new Insets(11, 0, 0, 0);
    add(txtField2, gridBagConstraints);
    gridBagConstraints = new GridBagConstraints();
    gridBagConstraints.gridx = 6;
    gridBagConstraints.gridy = 0;
    gridBagConstraints.ipadx = 0;
    gridBagConstraints.fill = GridBagConstraints.NONE;
    gridBagConstraints.insets = new Insets(11, 0, 0, 0);
    add(btnTxtField2, gridBagConstraints); 
```

添加权重后：

![在此处输入图像描述](../Images/d655566768d8239e298de8b4b819320f.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T04:38:39.973

您必须将锚设置为 GridBagConstraints.NORTHWEST 或类似的东西....

```
constraints.anchor = GridBagConstraints.WEST; 
```

# wcf - WCF - 未找到 System.Data.SqlServerCe

> ID：11406395
> 
> 赞同：0
> 
> 时间：2012-07-10T03:59:17.353
> 
> 标签：wcf, sql-server-ce, windows-ce

我正在尝试使用 WCF 将移动数据库与服务器数据库同步。我正在使用[本教程](http://mobileworld.appamundi.com/blogs/andywigley/archive/2008/12/08/building-a-sync-services-for-ado-net-solution-for-mobile-devices.aspx)。当我尝试调试时，我得到'**文件或程序集名称'System.Data.SqlServerCe，Version=3.5.0.0，Culture=neutral，PublicKeyToken=3BE235DF1C8D2AD3'，或其依赖项之一，未找到。**'。我尝试删除引用并再次添加，但仍然相同。

下面是 System.Sata.SqlServerCE 的屏幕截图。 ![在此处输入图像描述](../Images/db728ae321489c84efac1519ee7c69de.png)

# visual-studio-2010 - 无法使用 Visual Studio 2010 在 tfs 2012 中创建团队项目

> ID：11406400
> 
> 赞同：3
> 
> 时间：2012-07-10T03:59:41.573
> 
> 标签：visual-studio-2010, visual-studio, tfs, team-project

我安装了 TFS 2012 和 Visual Studio 2010。我已经创建了团队集合，但我无法创建团队项目。错误消息 {you don't have permission create team project} 但我将所有权限授予当前用户。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T06:16:05.190

当您使用较低版本的 Team Explorer 客户端时，某些管理活动将不起作用。您需要安装 Team Explorer 2012 或 Visual Studio 2012 来创建新的团队项目。

# javascript - JavaScript 单击时添加和删除类函数

> ID：11406403
> 
> 赞同：1
> 
> 时间：2012-07-10T04:00:15.483
> 
> 标签：javascript, jquery, html, css

基本上我有这个问题。我有一个手风琴，一次打开一个标题，我在添加标题右侧的打开/关闭图像时遇到问题。

到目前为止，我已经有了它，因此一旦您单击标题，它就会删除“打开”图像并为“关闭”图像切换另一个类。现在我基本上需要再次换掉这些类，以便如果您切换另一个标题，它会删除另一个图像并返回到原始图像。

这是我正在使用的代码。

**JavaScript**

```
<SCRIPT>
    $("#accordion > li").click(function () {
        $("#accordian li").removeClass("faq-header");
        $(this).addClass("faq-header2");
        if (false == $(this).next().is(':visible')) {
            $('#accordion > ul').slideUp(250);
            $('#accordion > ul').addClass('faq-header');
            $(this).removeClass("faq-header");
        }
        $(this).next().slideToggle(300);
    });

    $('#accordion > ul:eq(0)').show();
</SCRIPT> 
```

**CSS**

```
#accordion {
    list-style: none;
    margin-left:-38px;
}
#accordion ul:eq {
    background-image:url(../img/faq-open.gif);
    background-repeat:no-repeat;
    background-position:right;
    padding-right:20px;
}
#accordion li{
    display: block;
    background-color: #FFF;
    font-weight: bold;
    cursor: pointer;
}
.faq-header {
    text-align:left;
    background-image:url(../img/faq-close.gif);
    background-repeat:no-repeat;
    background-position:right;
    margin-right:20px;
}
.faq-header2 {
    text-align:left;
    background-image:url(../img/faq-open.gif);
    background-repeat:no-repeat;
    background-position:right;
    margin-right:20px;
}
#accordion ul {
    list-style: none;
    display: none;
}
#accordion ul li{
    font-weight: normal;
    cursor: auto;
    background-color: #fff;
    border-bottom:1px solid #999;
    margin-left:-38px !important;
} 
```

如您所见，我删除了一个课程并添加了另一个课程，`$("#accordian li").removeClass("faq-header");`并添加了以下内容`$(this).addClass("faq-header2");`

但是我现在需要在它不再是选定的部分后删除`.faq-header2`并重新添加。`.faq-header`这对我来说似乎并不难，但我只是不知道如何编码。应该是我认为的基本 if 功能......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T04:16:04.317

jQuery UI 手风琴是一个久经考验的跨浏览器小部件，可以打开和关闭图像（默认情况下在左侧，但更改 CSS 会将它们放在右侧）

按照[这里](http://jqueryui.com/demos/accordion/)

如果你不想使用它，我会用 toggleClass 来选择一个选项，[在这里](http://api.jquery.com/toggleClass/)

**编辑**

感谢您发布您的 HTML，我并不一定是指整个页面，只是为您提供手风琴功能的 HTML，但嘿，那很酷

不过，第一点，你的 HTML 似乎有点重，只是做手风琴。将 ul 放在 ul 中也不完全有效（它们倾向于放在 li 中，如下拉菜单样式）。此外，在所有这些 ul 和 li 中似乎没有多大意义，因为每个 ul 反正只有一个 li，看起来标签比你真正需要的要多得多。ul 和 li 往往带有很多默认样式（项目符号点、边距、填充、缩进等），这可能意味着需要更多的 CSS 来让它们显示你想要的方式。我会选择一个更简单的结构，让你更容易编写你的 jQuery。有点像这样

```
<div id="accordion">
    <h3>First header</h3>
    <div>First content</div>
    <h3>Second header</h3>
    <div>Second content</div>
</div> 
```

无论如何，这只是我的经验的评论。对于您手头的问题，这对我有用

```
 $("#accordion > li").click(function () {              
            var self = $(this);
            self.next('ul').slideToggle(300, function () {
                if ($(this).is(':visible')) {
                    self.removeClass('faq-header').addClass('faq-header2')
                }
                else {
                    self.removeClass('faq-header2').addClass('faq-header')
                }
            });
            self.siblings().removeClass('faq-header2').addClass('faq-header').next('ul').slideUp(250);
        }); 
```

toggleClass，虽然有用，但在您希望如何添加和删除类的情况下，可能没有我想象的那么有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-14T23:02:34.797

我认为该`toggle()`功能有点不直观。我通常使用我的 pwn 方法 replaceClass() 来做你想做的事：

```
void replaceClass(Object classList, String surrogateClass, String classToReplace); 
```

定义如下

```
function replaceClass(elementClassList, firstClass, secondClass) {
 if(elementClassList.contains(firstClass)){
 {
  elementClassList.remove(firstClass);
elementClassList.add(secondClass);
}
} 
```

# linux - 在内部服务的 tcp“长”连接和“短”连接之间进行选择

> ID：11406405
> 
> 赞同：3
> 
> 时间：2012-07-10T04:00:27.990
> 
> 标签：linux, sockets, tcp

我有一个应用程序，Web 服务器将一些请求重定向到后端服务器，后端服务器（Linux）将对 Web 服务器进行复杂的计算和响应。对于 web 服务器和后端服务器之间的 tcp 套接字连接管理，我认为有两个基本策略：

1.  “短”连接：即每个请求一个连接。这对于套接字管理来说似乎很容易，并简化了整个程序结构。在**接受**之后，我们只是得到一些线程来处理请求，最后**关闭**这个套接字。

2.  “长”连接：即一个tcp连接，可以有多个请求一个一个。似乎这种策略可以更好地利用套接字资源并带来一些性能提升（我不太确定）。**但**似乎这比“短”连接带来了很多复杂性。例如，由于现在 socket fd 可能被多线程使用，因此必须涉及同步。还有更多，socket失败过程，消息序列......

对这两种策略有什么建议吗？

**更新：** @SargeATM 的回答提醒我，我应该更多地了解后端服务。每个请求都是上下文无关的。后端服务可以根据单个请求消息进行计算。好像是…… 无国籍。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T04:18:15.247

在不涉及我认为严重影响此决定的后端架构的情况下，我更喜欢无状态“快速”请求/响应类型流量的短连接和有状态协议（如同步或文件传输）的长连接。

我知道建立新连接（如果它不是本地主机）有一些 tcp 开销，但这从来不是我必须在我的应用程序中优化的任何东西。

好的，我会稍微了解一下建筑，因为这很重要。我总是不是按请求而是按功能使用线程。所以我会有一个在套接字上监听的线程。另一个线程从所有活动连接中读取数据包，另一个线程进行后端计算，如果需要，最后一个线程保存到数据库。这使事情保持清洁和简单。易于测量、维护并在以后需要时进行优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:50:50.697

第三个选项呢……*没有联系！*

如果你的工作描述和工作结果都很小，UDP 套接字可能是个好主意。您需要管理的资源更少，因为无需将请求/响应绑定到文件描述符，这为您未来提供了一些灵活性。想象一下，你有更多的后端服务，并且想要做一些负载平衡——一个繁忙的服务可以将作业发送到另一个具有作业提交者的 UDP 地址的服务。后者只是等待结果，并不关心你在哪里执行任务。

显然，您必须处理丢失、重复和乱序的数据包，但作为奖励，您不必处理断开的连接。如果您可以将请求和响应放入一个 UDP 消息中，那么乱序数据包可能没什么大不了的，一些作业 ID 可以处理重复，并且丢失数据包......好吧，它们可以简单地重新发送;-)

考虑一下！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T12:56:18.040

嗯，你是对的。

持久连接的最大问题是确保应用程序从池中获得“干净”的连接。没有来自另一个请求的数据留下任何垃圾。

有很多方法可以解决这个问题，但最后最好关闭（）受污染的连接并打开新的连接，而不是尝试清理它......

# javascript - 通过 JavaScript 构造函数引入循环依赖

> ID：11406407
> 
> 赞同：2
> 
> 时间：2012-07-10T04:00:35.980
> 
> 标签：javascript, scope, circular-dependency

我有一个我正在开发的 javascript 应用程序，我正在动态构建一个动作树，我发现自己处于想要有目的地引入循环依赖的奇怪情况。经过最初的非常骇人听闻的尝试后，我发现 JavaScript 变量作用域实际上引入了一种非常合理的方法来解决这个问题。我仍然不是 JavaScript 方面的专家，所以我想获得一些关于最佳实践的意见。这是一段工作代码：

```
var Step = function(title, instructions, action) {
    this.title = ko.observable(title);
    this.instructions = instructions;
    this.action = action;
};

var Action = function(cancelText, cancelDescription, cancelStep, nextDescription, addText, addStep, continueText, continueStep) {
    this.cancelText = cancelText;
    this.cancelDescription = cancelDescription;
    this.cancelStep = cancelStep;
    this.nextDescription = nextDescription;
    this.addText = addText;
    this.addStep = addStep;
    this.continueText = continueText;
    this.continueStep = continueStep;
};

var PersonalStep = new Step(
    "Contact Information",
    "How can we contact you about your awesome assortment of vehicles? Fill out the form below",
    new Action(null, null, null, null, null, null, null, null)
);

var AddVehicleStep = new Step(
    "Additional Vehicle",
    "You have another car? Great, tell us about it too!",
    new Action("Cancel",
               "No, nevermind about this vehicle.",
               PersonalStep,
               "Add another vehicle?",
               "+ Add",
               AddVehicleStep, // This is the weird bit to me
               "No, continue on",
               PersonalStep)
    );

var VehicleStep = new Step(
    "Vehicle Details", 
    "Tell us about your primary vehicle by filling out the form below.",
    new Action(null, null, null,
               "Add another vehicle?",
               "+ Add",
               AddVehicleStep,
               "No, continue on",
               PersonalStep)
); 
```

因此，实际上，当用户在表单上选择“添加”操作时，AddVehicleStep 可以连续添加其他车辆。在大多数语言中（无论如何我都熟悉），AddVehicleStep 变量将无法从其自己的构造函数中解析。这对我来说很奇怪，我想更多地了解这个 JS 习语。有没有更好的方法来动态地做这样的对象树？

这也让我开始思考，我一直有目的地以相反的顺序声明我的步进变量，以便它们可以解析。我在自己的构造函数中引用变量的发现使我相信这不是必需的。但我只是测试了它，如果我在 VehicleStep 之后移动 AddVehicleStep var，VehicleStep 会得到`null`它的`action.addStep`. 有没有办法绕过这个限制，让我的变量以任何顺序声明？使用空白声明并稍后设置它们会起作用吗？例如

```
var a;
var b;

var a = new Step(b);
var b = new Step(b);
// a should now have the full instantiated object of b within it, right?
// (provided the step constructor assigned it, of course) 
```

这可能已经在其他地方得到了回答，我只是还没有找到关键字来提出它......

此外，我将这些步骤用作 Knockout.js 应用程序的一部分，该应用程序本质上是实现对话框/表单向导 - 我希望示例代码能够独立地提出难题，但以防你好奇。

**更新** 我昨晚在 JS 小提琴中工作。事实证明，在 jsfiddle 上的后续运行之间如何处理 js 内存，导致它在我一直在工作的特定窗口（Chrome，最新版本）中工作。但是，在新窗口或新浏览器中打开它会停止工作。

真正奇怪的部分是我无法在任何浏览器中复制该行为。也许我的一个编辑让它以不同的方式声明并以某种方式将它留在内存中。我真希望我能复制它，只是为了证明我没有疯...

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T05:15:31.887

看看下面的代码：

```
function b(data, ref) {
    alert("instantiated B with : " + data + " and "  + ref);
}

function c(ref){
    alert("instantiated C with : " + ref + " ... this doesnt work");
}

var a = new b('blah', new c(a)); 
```

'b' 已正确初始化。但是你在初始化'c'时得到的警告如下：

“实例化C：未定义......这不起作用”

这是因为在启动“c”时，“a”并未正确启动和引用。

试试 jsfiddle：

[http://jsfiddle.net/sNbm5/](http://jsfiddle.net/sNbm5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T06:20:51.210

由于步骤可以具有引用同一步骤的动作，我认为最简单的方法是让自己在构建步骤之后也添加动作。所以，像这样的东西。

```
var Step = function(title, instructions, action) {
    this.title = ko.observable(title);
    this.instructions = instructions;
    if (action === undefined) 
       this.action = null;  //action was not passed
    else
       this.action = action; 
};

//set the action after constructor invocation
Step.prototype.SetAction = function(action) {
    this.action = action;
};

var AddVehicleStep = new Step(
    "Additional Vehicle",
    "You have another car? Great, tell us about it too!"
    );
//AddVehicleStep is now instantiated with a new Step,
// so we can now set its action refering to that step 
AddVehicleStep.SetAction(new Action("Cancel",
               "No, nevermind about this vehicle.",
               PersonalStep,
               "Add another vehicle?",
               "+ Add",
               AddVehicleStep, // This is the weird bit to me
               "No, continue on",
               PersonalStep)); 
```

或者地狱，忘记方法，直接做

```
AddVehicleStep.action = new Action(...); 
```

但是，如果您开始这样做，您就失去了在不重写代码的情况下始终确定设置操作时会发生什么的能力。

为什么要这样做？您必须了解操作顺序以及它如何影响这里的事情。

在

```
a = b(c(a)) 
```

操作顺序是

1.  `c(a)`->`result1`
2.  `b(result1)`-> 结果2
3.  `a`获得价值`result2`

假设`a`（在本地范围内）之前未分配给，则`c(a)`等价于`c(undefined)`

# ruby-on-rails - Ruby 方法的测量和基准时间

> ID：11406410
> 
> 赞同：109
> 
> 时间：2012-07-10T04:00:48.447
> 
> 标签：ruby-on-rails, ruby, time, benchmarking, interpreter

如何在 Ruby 中测量一个方法和该方法中的各个语句所花费的时间。如果您看到以下方法，我想测量该方法所花费的总时间以及数据库访问和 redis 访问所花费的时间。我不想在每条语句之前都写 Benchmark.measure。ruby 解释器是否为我们提供了执行此操作的任何钩子？

```
def foo
# code to access database
# code to access redis. 
end 
```

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2015-03-20T12:26:32.140

最简单的方法：

```
require 'benchmark'

def foo
 time = Benchmark.measure {
  code to test
 }
 puts time.real #or save it to logs
end 
```

样本输出：

```
2.2.3 :001 > foo
  5.230000   0.020000   5.250000 (  5.274806) 
```

值是：cpu 时间、系统时间、总和实际经过的时间。

来源：[红宝石文档](http://ruby-doc.org/stdlib-1.9.3/libdoc/benchmark/rdoc/Benchmark.html)。

* * *

## 回答 #2

> 赞同：126
> 
> 时间：2012-07-10T04:10:09.997

您可以使用该`Time`对象。（[时间文档](http://www.ruby-doc.org/core-1.9.3/Time.html)）

例如，

```
start = Time.now
# => 2022-02-07 13:55:06.82975 +0100
# code to time
finish = Time.now
# => 2022-02-07 13:55:09.163182 +0100
diff = finish - start
# => 2.333432 
```

`diff`以秒为单位，作为浮点数。

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2016-10-13T18:30:33.680

## 使用`Benchmark`报告

```
require 'benchmark' # Might be necessary.

def foo
  Benchmark.bm( 20 ) do |bm|  # The 20 is the width of the first column in the output.
    bm.report( "Access Database:" ) do 
      # Code to access database.
    end

    bm.report( "Access Redis:" ) do
      # Code to access redis.
    end
  end
end 
```

这将输出如下内容：

```
 user     system      total        real
Access Database:    0.020000   0.000000   0.020000 (  0.475375)
Access Redis:       0.000000   0.000000   0.000000 (  0.000037)

<------ 20 -------> # This is where the 20 comes in. NOTE: This is not shown in output. 
```

*更多信息可以在[这里](http://ruby-doc.org/stdlib-2.0.0/libdoc/benchmark/rdoc/Benchmark.html#method-c-bm)找到。*

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2019-02-01T02:36:08.677

许多答案建议使用`Time.now`. 但值得注意的是，这`Time.now`可能会发生变化。系统时钟可能会漂移，并可能由系统管理员或通过 NTP 进行更正。因此，Time.now 可能会向前或向后跳，并给您的基准测试不准确的结果。

更好的解决方案是使用操作系统的单调时钟，它总是向前移动。Ruby 2.1 及更高版本通过以下方式提供访问权限：

```
start = Process.clock_gettime(Process::CLOCK_MONOTONIC)
# code to time
finish = Process.clock_gettime(Process::CLOCK_MONOTONIC)
diff = finish - start # gets time is seconds as a float 
```

[您可以在此处](https://archive.ph/DJ3VH)阅读更多详细信息。您还可以看到流行的 Ruby 项目 Sidekiq 切换到[单调时钟](https://github.com/mperham/sidekiq/commit/aa9745e9b29d408ac423356af50859cb9c382135)。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-04-17T06:24:36.727

再想一想，使用 Ruby 代码块参数定义**measure()**函数可以帮助简化时间测量代码：

```
def measure(&block)
  start = Time.now
  block.call
  Time.now - start
end

# t1 and t2 is the executing time for the code blocks.
t1 = measure { sleep(1) }

t2 = measure do
  sleep(2)
end 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-03-15T15:14:58.677

本着[wquist's answer](https://stackoverflow.com/a/11406469)的精神，但更简单一点，您也可以像下面这样：

```
start = Time.now
# code to time
Time.now - start 
```

# php - 如何在 symfony2 应用程序中管理角色

> ID：11406411
> 
> 赞同：0
> 
> 时间：2012-07-10T04:00:49.213
> 
> 标签：php, symfony

我有一个 Web 应用程序，其中有 5 个级别的用户，例如

1.  行政人员
2.  组织负责人
3.  本地公司负责人
4.  老师
5.  父母
6.  学生们

现在每个用户都将拥有不同的登录页面或或多或少的标签或功能。

现在我想知道是不是我只将其作为一个实体，然后在不同实体中扮演角色，以便我可以简化登录过程

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T06:58:27.857

您应该改用 twig 函数`is_granted()`并让 Security 组件处理角色。这有一些进步，例如嵌套角色定义。[您可以在http://symfony.com/doc/current/book/security.html#roles](http://symfony.com/doc/current/book/security.html#roles)找到更多信息。

我强烈建议你走这条路！

```
{% if is_granted('ROLE_ADMINISTRATOR') %}
    Do something
{% endif %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T04:18:49.060

这是您将如何进行的示例

你的控制器：

```
public function indexAction()
{
    $user = $this->container->get('security.context')->getToken()->getUser();

    return $this->render('YourBundle:Page:index.html.twig', array('user_role' => $user->getRole()));
} 
```

枝条：

```
{% if user_role == "administrator" %}
Menu 1, menu 2, menu3
{% elseif user_role == "organizationhead" %}
Menu 1, Menu 4
{% elseif user_role == "etc" %}
Menu 5
{% endif %} 
```

# sql - Oracle sql - 我们可以在同一个表中有 2 个唯一列吗

> ID：11406415
> 
> 赞同：1
> 
> 时间：2012-07-10T04:01:29.403
> 
> 标签：sql, oracle, spring

在我的 Web 应用程序中，我有客户姓名和客户电话号码。我应该多次允许同一个电话号码。但我不应该允许多次输入相同的客户名称。如果已有客户名为“Sean Patrick”，手机号码为“6039274849”。将来我不应该允许新用户使用相同的名称（'Sean Patrick'）。但我可以允许输入相同的手机号码（'6039274849'）。

假设表结构为

```
CUSTOMER TABLE

columns
CUSTOMER_ID UNIQUE
CUSTOMER NAME
CUST_MOB_NUMBER 
```

我正在使用 Spring ROO。我们将使用 HibernateJPA（aspectJ 代码）来处理与数据库相关的内容。

谁能告诉如何做到这一点。截至目前，我正在考虑制作 2 列 uique。有什么方法可以使 2 列一起唯一吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T04:38:03.870

假设这些需求是有意义的（说没有两个客户会拥有相同的名字是没有意义的——世界上有很多 John Smiths）。人们通常有多个手机号码。

您可以将`customer_id`和声明`customer_name`为唯一的（尽管`customer_id`几乎可以肯定应该将其声明为主键，而不仅仅是唯一的）

```
CREATE TABLE customer (
  customer_id      NUMBER PRIMARY KEY,
  customer_name    VARCHAR2(100) UNIQUE,
  cust_mob_number  VARCHAR2(20)
); 
```

您还可以将两列的组合声明为唯一

```
CREATE TABLE customer (
  customer_id      NUMBER PRIMARY KEY,
  customer_name    VARCHAR2(100),
  cust_mob_number  VARCHAR2(20),
  CONSTRAINT uk_name_and_number UNIQUE( customer_name, customer_mob_number )
); 
```

# javascript - Facebook 重定向到空白权限请求页面

> ID：11406416
> 
> 赞同：2
> 
> 时间：2012-07-10T04:01:38.137
> 
> 标签：javascript, facebook-graph-api, facebook-javascript-sdk

这是我的应用程序[http://kunwar.fantoon.com/fb/](http://kunwar.fantoon.com/fb/)，当我点击登录链接时，它会正确显示登录对话框，一旦登录它也会显示权限对话框，但是当我点击允许按钮时，它重定向到一个空白页。

如果我第二次点击登录按钮（这次我已经登录到 facebook 并授予了所有权限），那么它将重定向到具有此 url 的空白页面

[https://www.facebook.com/dialog/permissions.request?api_key=142710779172144&app_id=142710779172144&display=popup&fbconnect=1&locale=en_US&method=permissions.request&next=http%3A%2F%2Fstatic.ak.fbcdn.net%2Fconnect%2Fxd_proxy。 PHP％23CB％3Df1afe28ad8e3884％26origin％3Dhttp％253A％252F％252Fkunwar.fantoon.com％252Ff104828fb358e68％26relation％3Dopener％26transport％3Dpostmessage％26frame％3Df26d7271864ec8a％26result％3D％2522xxRESULTTOKENxx％2522＆return_session = 1＆范围=电子邮件％2Cuser_location％2Cfriends_birthday％ 2Cfriends_likes%2Cfriends_photos%2Cfriends_location%2Cfriends_hometown%2Cfriends_work_history%2Cfriends_education_history&sdk=joey&session_version=3](https://www.facebook.com/dialog/permissions.request?api_key=142710779172144&app_id=142710779172144&display=popup&fbconnect=1&locale=en_US&method=permissions.request&next=http%3A%2F%2Fstatic.ak.fbcdn.net%2Fconnect%2Fxd_proxy.php%23cb%3Df1afe28ad8e3884%26origin%3Dhttp%253A%252F%252Fkunwar.fantoon.com%252Ff104828fb358e68%26relation%3Dopener%26transport%3Dpostmessage%26frame%3Df26d7271864ec8a%26result%3D%2522xxRESULTTOKENxx%2522&return_session=1&scope=email%2Cuser_location%2Cfriends_birthday%2Cfriends_likes%2Cfriends_photos%2Cfriends_location%2Cfriends_hometown%2Cfriends_work_history%2Cfriends_education_history&sdk=joey&session_version=3)

早些时候，整个设置工作正常，但现在突然出现了这个问题。

我正在使用 javascript sdk 连接到 facebook，其代码可在[http://kunwar.fantoon.com/fb/js/fb_lib_common.js获得](http://kunwar.fantoon.com/fb/js/fb_lib_common.js)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:54:55.457

正如空白页面控制台日志上的错误状态：“不安全的 JavaScript 尝试”

将您的频道文件设置为`fb_lib_common.js`

```
 FB.init({
     appId  : 'YOUR APP ID',
     status: true, 
     cookie: true,
     xfbml: true, 
     oauth: true,
     channelUrl: 'http://www.yourdomain.com/channel.html' 
   }); 
```

对于[http://www.yourdomain.com/channel.html](http://www.yourdomain.com/channel.html)，添加以下内容，

```
<script src="//connect.facebook.net/en_US/all.js"></script> 
```

# actionscript-3 - 循环迭代器的动作脚本以更改影片剪辑名称

> ID：11406421
> 
> 赞同：0
> 
> 时间：2012-07-10T04:02:42.597
> 
> 标签：actionscript-3, flash-cs5, movieclip

我有一堆我在 Flash CS5 中创建的电影剪辑，都放在舞台上。我使用 ActionScript 3 使用代码动态控制它们中的每一个。但是我想使用 for 循环同时控制所有它们，并且只是更改每个元素的宽度，但它不起作用。

这是我的代码：

```
for(var i:Number = 0; i < 100; i++)
{
    leftBar+i.width = ( Math.round(channel.rightPeak * 1.1) ) + 60;
} 
```

所以我有 100 个酒吧，每个酒吧`leftBar`和他们的号码。所以 firstBar 是`leftBar1`, then`leftBar2`等等。但是我不能让它工作。我已经尝试过`"leftBar"+i`，`leftBari`但它们似乎都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:12:24.257

在循环中选择每个 MovieClip 的正确方法是：

```
this["leftBar" + i] 
```

新代码：

```
// Note: We've changed the initial value of i to 1 because you mentioned that
// your first MovieClip was called 'leftBar1' rather than 'leftBar0'.
for(var i:int = 1; i <= 100; i++)
{
    var current:MovieClip = this["leftBar" + i];
    current.width = Math.round(channel.rightPeak * 1.1) + 60;
} 
```

基本上，您想从使用方括号中选择属性`leftBar0`,`leftBar1`等。`this`这和这样做是一样的：

```
this.leftBar0 
```

也可以用于任何其他类的任何属性或方法：

```
// Example of Square Bracket notation.
var sprite:Sprite = new Sprite();

sprite["x"] = 10;
trace(sprite.x);

this["addChild"](sprite); 
```

# php - FileReference，直接发送到 PHP？

> ID：11406426
> 
> 赞同：0
> 
> 时间：2012-07-10T04:04:24.480
> 
> 标签：php, actionscript-3, file-upload, flash-builder, filereference

我希望能够将整个 FileReference 对象发送到 PHP 服务。

```
uploadTheVideoResult.token = uploadVideo.uploadTheVideo(mFileReference, nameTextInput.text); 
```

有没有办法做到这一点？

否则，将文件发送到 PHP 服务以进行上传的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:47:01.187

有两种方法可以实现这一目标。一种是使用 FileReference（参见[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html)）将文件上传到 php 页面，就像使用常规 html 上传一样。您可以查看[swfupload](http://code.google.com/p/swfupload/)以获得有关如何实现它的一些想法。

我最近开发了一种上传文件的新方法，它使用 FileReference 读取文件的二进制文件，并将文件与其他元数据（例如用户输入描述）作为 Flash 远程处理到服务器端。我发现这种方法实际上更直接。在服务器端，您可以使用任何支持 Flash 远程处理的 php 解决方案，例如[AMFPHP](http://sourceforge.net/projects/amfphp/)、[Cabron Connector](http://cabron.sourceforge.net/)或商业解决方案，例如[WebORB for php](http://www.themidnightcoders.com/products/weborb-for-php/)。

# eclipse - 创建 playN 项目

> ID：11406427
> 
> 赞同：0
> 
> 时间：2012-07-10T04:04:25.310
> 
> 标签：eclipse, playn

我在理解 playN 项目时遇到了一些问题，有人可以解释如何创建 playN 项目或指向一个有足够文档的链接。我使用了 playN 样本。它真的令人困惑。有人有一个链接，其中包含正确的 playN 文档吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T10:15:53.107

我相信可以根据本指南创建新的 playn 项目：[http ://code.google.com/p/playn/wiki/GettingStarted#Creating_a_new_project](http://code.google.com/p/playn/wiki/GettingStarted#Creating_a_new_project)

此外，这是一个相关问题：[Unable to create skeleton PlayN project in Eclipse](https://stackoverflow.com/questions/11357237/unable-to-create-skeleton-playn-project-in-eclipse)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:29:17.537

这里有一个很好的指南：

[http://www.thescreencast.com/2012/01/getting-started-with-playn-cross.html](http://www.thescreencast.com/2012/01/getting-started-with-playn-cross.html)

[http://www.thescreencast.com/2012/01/part-i-has-shown-how-to-install-and-use.html](http://www.thescreencast.com/2012/01/part-i-has-shown-how-to-install-and-use.html)

**还有一个我用过的更好的：**

[http://www.gamefromscratch.com/?tag=/PlayN](http://www.gamefromscratch.com/?tag=/PlayN)

**更新：安装指南**
[http://www.gamefromscratch.com/post/2011/11/06/GFS-PlayN-Installer%E2%80%93Super-detailed-installation-instructions.aspx](http://www.gamefromscratch.com/post/2011/11/06/GFS-PlayN-Installer%E2%80%93Super-detailed-installation-instructions.aspx)
[http://www.gamefromscratch.com /post/2011/10/13/Getting-started-with-PlayN.aspx](http://www.gamefromscratch.com/post/2011/10/13/Getting-started-with-PlayN.aspx)

**这里是 PlayN 自动安装程序！**
[http://www.gamefromscratch.com/downloads/PlayN/GFSPlaynInstaller.zip](http://www.gamefromscratch.com/downloads/PlayN/GFSPlaynInstaller.zip)

现在只需将 zip 文件解压缩到任何文件夹（请确保您解压缩，不要从 zip 运行）并运行 Install.cmd
现在只需回答几个是/否问题，并（可选）指向安装程序在您的 JDK 文件夹中，并告诉它您希望将 PlayN 安装在哪里。除了陷阱......在运行安装之前阅读下面的内容！
[指导](http://www.gamefromscratch.com/post/2011/11/06/GFS-PlayN-Installer%E2%80%93Super-detailed-installation-instructions.aspx)

# c# - 为什么无法在此 GridView 中更新数据

> ID：11406428
> 
> 赞同：2
> 
> 时间：2012-07-10T04:04:27.587
> 
> 标签：c#, asp.net, gridview

我是一名新的 ASP.NET 开发人员，并尝试使用 GridView 控件来显示数据库中员工表中的所有员工。我现在正在启用更新 GridView 中的信息。我面临以下问题，我不知道为什么：

**

> 除非指定了 UpdateCommand，否则数据源“SqlDataSource1”不支持更新。

**

仅供参考，我有以下数据库设计：

```
Employee Table: Username, Name, JobTitle, BadgeNo, IsActive, DivisionCode
Divisions Table: SapCode, DivisionShortcut 
```

*（IsActive 就像一个标志（位数据类型）来指示员工是否在分配中）*

ASP.NET 代码：

```
<asp:GridView ID="GridView1" runat="server" AllowSorting="True" 
            AutoGenerateColumns="False" DataKeyNames="Username" 
            DataSourceID="SqlDataSource1" BorderWidth="1px" BackColor="#DEBA84" 
             CellPadding="3" CellSpacing="2" BorderStyle="None" 
             BorderColor="#DEBA84" OnRowEditing="GridView1_RowEditing" 
             OnRowCancelingEdit="GridView1_RowCancelingEdit" 
             OnRowUpdating="GridView1_RowUpdating">
            <FooterStyle ForeColor="#8C4510" 
              BackColor="#F7DFB5"></FooterStyle>
            <PagerStyle ForeColor="#8C4510" 
              HorizontalAlign="Center"></PagerStyle>
            <HeaderStyle ForeColor="White" Font-Bold="True" 
              BackColor="#A55129"></HeaderStyle>
            <Columns>
                <asp:CommandField ButtonType="Button" ShowEditButton="true" ShowCancelButton="true" />

                <asp:TemplateField>
                    <ItemTemplate>
                        <%# Eval("DivisionShortcut")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:DropDownList ID="DivisionsList" runat="server" DataSourceID="DivisionsListDataSource"
                                            DataTextField="DivisionShortcut" DataValueField="SapCode"></asp:DropDownList>
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:BoundField DataField="Username" HeaderText="Network ID" ReadOnly="True" 
                    SortExpression="Username" />

                <asp:TemplateField>
                    <ItemTemplate>
                        <%# Eval("Name")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="txtEmployeeName" runat="server" Text='<%# Eval("Name")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField>
                    <ItemTemplate>
                        <%# Eval("JobTitle")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="txtJobTitle" runat="server" Text='<%# Eval("JobTitle")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField>
                    <ItemTemplate>
                        <%# Eval("BadgeNo")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="txtBadgeNo" runat="server" Text='<%# Eval("BadgeNo")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField>
                    <ItemTemplate>
                        <%# Eval("IsActive")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:CheckBox ID="isActive" runat="server" Text='<%# Eval("IsActive")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>

            </Columns>
        </asp:GridView>
        <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:UsersInfoDBConnectionString %>" 

            SelectCommand="SELECT     dbo.Divisions.DivisionShortcut, dbo.employee.Username, dbo.employee.Name, dbo.employee.JobTitle, dbo.employee.BadgeNo, dbo.employee.IsActive
FROM         dbo.Divisions INNER JOIN
                      dbo.employee ON dbo.Divisions.SapCode = dbo.employee.DivisionCode">
        </asp:SqlDataSource>

        <asp:SqlDataSource ID="DivisionsListDataSource" runat="server" 
            ConnectionString="<%$ ConnectionStrings:UsersInfoDBConnectionString %>" 
            SelectCommand="SELECT * FROM Divisions">
        </asp:SqlDataSource> 
```

代码隐藏：

```
//For updating the information in any row in the GridView
    protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        GridViewRow gvrow = GridView1.Rows[e.RowIndex];

        DropDownList DivisionsList = (DropDownList)gvrow.FindControl("DivisionsList"); 

        TextBox txtEmployeeName = (TextBox)gvrow.FindControl("txtEmployeeName");
        TextBox txtJobTitle = (TextBox)gvrow.FindControl("txtJobTitle");
        TextBox txtBadgeNo = (TextBox)gvrow.FindControl("txtBadgeNo");

        CheckBox isActive = (CheckBox)gvrow.FindControl("isActive");

        //For getting the ID (primary key) of that row
        string username = GridView1.DataKeys[e.RowIndex].Value.ToString();

        string name = txtEmployeeName.Text;
        string jobTitle = txtJobTitle.Text;
        string badgeNo = txtBadgeNo.Text;

        UpdateEmployeeInfo(username, name, jobTitle, badgeNo);
    }

    private void UpdateEmployeeInfo(string username, string name, string jobTitle, string badgeNo)
    {
        try
        {
            string connString = ConfigurationManager.ConnectionStrings["UsersInfoDBConnectionString"].ConnectionString;
            SqlConnection conn = new SqlConnection(connString);
            string update = @"UPDATE Employee SET Name = @Name, JobTitle = @JobTitle, 
                                                BadgeNo = @BadgeNo 
                            WHERE Username = @Username";
            SqlCommand cmd = new SqlCommand(update, conn);

            cmd.Parameters.AddWithValue("@Name", name);
            cmd.Parameters.AddWithValue("@JobTitle", jobTitle);
            cmd.Parameters.AddWithValue("@BadgeNo", badgeNo);
            cmd.Parameters.AddWithValue("@Username", username);

            conn.Open();
            cmd.ExecuteNonQuery();
            conn.Close();

            GridView1.EditIndex = -1;
            GridView1.DataBind();
        }
        catch (Exception ex)
        {
            throw ex;
        }
    } 
```

**那么你能帮我修改一下吗？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T04:15:22.577

`SqlDataSource`可以直接为您在数据库中进行更新。

您无需在行更新时捕获新值并自行进行更新。

为此，您需要设置`UpdateCommand`

例如：

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:UsersInfoDBConnectionString %>" 
    SelectCommand="SELECT dbo.Divisions.DivisionShortcut, dbo.employee.Username, dbo.employee.Name, dbo.employee.JobTitle, dbo.employee.BadgeNo, dbo.employee.IsActive
        FROM dbo.Divisions INNER JOIN dbo.employee
        ON dbo.Divisions.SapCode = dbo.employee.DivisionCode"
    UpdateCommand="UPDATE Employee SET Name = @Name, JobTitle = @JobTitle, BadgeNo = @BadgeNo
        WHERE Username = @Username">

    <UpdateParameters>
        <asp:Parameter Name="Name" Type="String" />
        <asp:Parameter Name="JobTitle" Type="String" />
        <asp:Parameter Name="BadgeNo" Type="String" />
        <asp:Parameter Name="BadgeNo" Type="String" />
        <asp:Parameter Name="Username" Type="String" />
    </UpdateParameters>               
</asp:SqlDataSource> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-10T04:26:39.663

你的错误真的说明了一切。[看看 UpdateCommand](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.updatecommand.aspx)。

在你`UpdateEmployeeInfo`的功能尝试：

```
SqlDataSource1.UpdateCommand =  @"UPDATE Employee SET Name = " + name + ", JobTitle = " + jobTitle + ", BadgeNo = " + badgeNo + " WHERE Username = " + username;
SqlDataSource1.Update(); 
```

注：未测试

# mysql - mysql似乎忽略了外键约束

> ID：11406430
> 
> 赞同：3
> 
> 时间：2012-07-10T04:04:51.437
> 
> 标签：mysql, foreign-keys

我只是在子表中对父表进行外键引用。当我尝试从父表中删除其引用存在于子表中的行时，令人惊讶的是它允许我删除它。我试图通过在删除限制上写入并且没有它来显式创建子表，但没有任何帮助。任何想法为什么会发生这种情况？下面是我在创建表时使用的代码。

```
CREATE TABLE region
(
id int PRIMARY KEY AUTO_INCREMENT,
name varchar(50) NOT NULL
);

CREATE TABLE aggregator
(
id int PRIMARY KEY AUTO_INCREMENT,
name varchar(50) NOT NULL
);

CREATE TABLE gateway
(
id int PRIMARY KEY AUTO_INCREMENT,
name varchar(50) NOT NULL,
region_id int ,
aggregator_id int ,
is_public boolean  DEFAULT 0 NOT NULL,
FOREIGN KEY (region_id) REFERENCES region(id),
FOREIGN KEY (aggregator_id) REFERENCES aggregator(id)
); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T04:10:15.563

父表和子表都需要是 INNODB 表。

尝试：

```
CREATE TABLE region
(
id int PRIMARY KEY AUTO_INCREMENT,
name varchar(50) NOT NULL
) ENGINE=INNODB;

CREATE TABLE aggregator
(
id int PRIMARY KEY AUTO_INCREMENT,
name varchar(50) NOT NULL
) ENGINE=INNODB;

CREATE TABLE gateway
(
id int PRIMARY KEY AUTO_INCREMENT,
name varchar(50) NOT NULL,
region_id int ,
aggregator_id int ,
is_public boolean  DEFAULT 0 NOT NULL,
FOREIGN KEY (region_id) REFERENCES region(id),
FOREIGN KEY (aggregator_id) REFERENCES aggregator(id)
) ENGINE=INNODB; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T04:11:20.503

意思是说如果删除父表，子表会自动删除？如果是，那么一旦通过级联规则。

# c# - 在 XML 文档中搜索

> ID：11406431
> 
> 赞同：1
> 
> 时间：2012-07-10T04:05:23.173
> 
> 标签：c#, xml, winforms, visual-studio-2008

在 XML 文档中搜索以根据搜索条件检索一个或多个记录的最佳方法是什么。欢迎提出建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T04:08:08.410

如果可能的话，我个人会使用 LINQ to XML。您的问题目前非常模糊，但例如，您可以写：

```
XDocument doc = XDocument.Load("test.xml");
var matches = doc.Descendants("Person")
                 .Where(x => (string) x.Attribute("Name") == "Jon")
                 .Where(x => x.Elements("Child").Count() >= 2); 
```

虽然您*可以*使用 XPath，但我通常不喜欢 - 它存在将一种语言嵌入另一种语言的所有正常问题，而使用 LINQ to XML 则您始终使用 C#，因此您无需学习新语法 - 只是相关方法在 LINQ to XML 库中。

LINQ to XML 还使命名空间处理变得简单，并且您不必担心转义值等，因为您的查询全部在代码中而不是在字符串中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T04:07:39.100

.net xml 文档对 xpath 有很好的支持。

它应该适用于您的大多数 xml 搜索。

查看[XPath 示例](http://msdn.microsoft.com/en-us/library/ms256086.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T05:10:30.507

`XPath`由*[XmlDocument.SelectNodes](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.selectnodes.aspx)*或*SelectSingleNode*使用，如下所示：

```
XmlDocument doc = new XmlDocument();
doc.Load("bookstore.xml");
XmlNode root = doc.DocumentElement;

// Add the namespace.
XmlNamespaceManager nsmgr = new XmlNamespaceManager(doc.NameTable);
nsmgr.AddNamespace("bk", "urn:newbooks-schema");

// Select and display the first node in which the author's 
// last name is Kingsolver.
XmlNode node = root.SelectSingleNode(
"descendant::bk:book[bk:author/bk:last-name='Kingsolver']", nsmgr);
Console.WriteLine(node.InnerXml); 
```

# php - 使用 PHP 框架（ZF，...）和 ORM（Doctrine，...）作为 PHP 扩展？

> ID：11406432
> 
> 赞同：0
> 
> 时间：2012-07-10T04:05:45.107
> 
> 标签：php, orm, frameworks

是否可以使用 php 框架（ZF，...）和 ORM（Doctrine，...）作为 PHP 扩展（如[Yaf](http://pecl.php.net/package/yaf)）？这种方法的优缺点是什么？

我想将第三方库打包成一个文件（如 .dll），以便可以轻松部署。也许产生了一些性能改进？

ZF 提供了很多必要的类，我如何使我的自定义构建 ZF 成为 PHP 语言的一部分（如 .net 类库）？在 php 应用程序的库文件夹中复制大量 .php 文件似乎并不直观。

# git - 有什么方法可以帮助恢复 git 中的部分历史提交？

> ID：11406434
> 
> 赞同：2
> 
> 时间：2012-07-10T04:05:56.060
> 
> 标签：git, git-revert

假设我在 git 存储库中有以下提交历史记录（所有更改都在一个文件上进行）

1.  删除函数`foo()`和`bar()`，修改函数`baz()`
2.  改变别的东西

现在我想重新添加功能`foo()`。我想要的是一种手动交互的方式来做到这一点。例如，编辑器以并排差异模式打开。一方面是提交 #1 之前的版本（包括功能`foo()`），另一方面是我的本地工作副本。这样我就可以将任何我想要的东西从历史端复制到工作副本端。

有没有`git`命令可以帮助我做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:43:16.800

这是一种解决方案，我可能会这样做：

```
# Stash any current modifications to be safe.
git stash

# Make a new commit that re-adds foo, bar and maz
git revert <sha of the commit with your function>

# Remove the commit you just created, but leave the file changes.
git reset HEAD^

# Interactively decide which chunks of code you actually want.
# Just follow the instructions, type '?' for help.
git add -p

# Commit all of the changes that you staged.
git commit

# Discard all the other stuff you didn't accept.
git checkout . 
```

# java - 谷歌appengine可以存储java对象POJO

> ID：11406436
> 
> 赞同：0
> 
> 时间：2012-07-10T04:06:01.330
> 
> 标签：java, google-app-engine

App Engine 可以存储诸如 ObjectOutputStream 之类的信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T04:42:39.863

当然，GAE 可以存储数据块。使用[Blob](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/Blob)存储高达 1Mb 的数据，使用[Blobstore](https://developers.google.com/appengine/docs/java/blobstore/overview)存储更大的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T04:34:21.637

GAE 确实支持 Blob 数据。但是有一些尺寸限制。这是[API文档](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/Blob)

但其他选择是使从 com.google.appengine.api.datastore.Entity 扩展的 POJO 是可序列化的，并且 GAE 可以存储信息。如果您正在寻找有关它的一些文档或信息，请查看此[内容](https://developers.google.com/appengine/docs/java/datastore/entities)。[可以在此处](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/Entity)查找有关扩展实体的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T10:17:06.913

```
 FileService fileService = FileServiceFactory.getFileService();

      // Create a new Blob file with mime-type "text/plain"
      AppEngineFile file = fileService.createNewBlobFile("text/plain");

      // Open a channel to write to it
      boolean lock = true;
      FileWriteChannel writeChannel = fileService.openWriteChannel(file, lock);

      MyObject obj = new MyObject();
      obj.name="testing now";
      ObjectOutputStream oos = new ObjectOutputStream(Channels.newOutputStream(writeChannel));
      oos.writeObject(obj);
      oos.flush();
      oos.close();
      // Now finalize
      writeChannel.closeFinally();

      // Later, read from the file using the file API
      FileReadChannel readChannel = fileService.openReadChannel(file, false);
      ObjectInputStream ooi = new ObjectInputStream(Channels.newInputStream(readChannel));
      resp.setContentType("text/plain");
      try {
        resp.getWriter().print(ooi.readObject().toString());
    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

这是将 POJO 保存到 blobstore 的代码。MyObject 需要实现 Serializable 接口。

# excel - 作为 SSIS 任务的一部分运行 Excel 宏

> ID：11406439
> 
> 赞同：2
> 
> 时间：2012-07-10T04:06:34.670
> 
> 标签：excel, ssis

我从来没有对 SSIS 做过很多繁重的工作，只是做一些非常简单的事情，所以我希望你能原谅我的无知。我有一个相当简单的包，可以将 Excel 中的数据提取到 SQL Server 中。它工作正常。我的问题是 Excel 文件中有一个宏可以更新来自网络服务的数据。那是我似乎无法访问的代码。那么我的问题是，我可以使用脚本任务打开 Excel 文件，运行宏，保存它，然后导入数据吗？

好的，所以在发布上述问题之前，我继续创建了一个脚本任务，该任务应该打开电子表格并运行宏。但是，当我运行它时，会出现错误，首先是：

```
System.IO.FileNotFoundException: Could not load file or assembly 'Microsoft.Office.Interop.Excel.Version=14.0.0.0.0 
```

我应该以不同的方式解决问题吗？有什么建议么？我真诚地感谢任何帮助。

谢谢，

缺口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:30:07.417

在运行包的机器上下载并安装[主互操作程序集。](http://www.microsoft.com/en-us/download/details.aspx?id=18346)我不确定许可协议是否允许您在服务器上安装程序集。这应该有望解决您的问题。

# jquery - 获取所有 这是一个 并发布值

> ID：11406443
> 
> 赞同：0
> 
> 时间：2012-07-10T04:06:55.273
> 
> 标签：jquery

所有，我有以下 PHP 代码：

```
$qry = "Select * from uploaded_files where user_id='$_SESSION[oml_user_id]' and upload_type='video_montage' order by sort ASC";
$result = mysql_query($qry);
$resultrows = mysql_num_rows($result);
if($resultrows>0){
?>
<ul class="gallery" id="video_gallery">
<?php
while($resultset = mysql_fetch_array($result)){
?>
<li id="<?php echo $resultset['file_id']; ?>"><a href="../upload/<?php echo $resultset['filename']; ?>"><img src="../upload/thumbnails/<?php echo $resultset['filename']; ?>" width="116" height="116" alt=""></a></li>
<?php
}
?>
</ul>
<button id="save_info">Save</button> 
```

我想要发生的是当我单击 save_info 按钮时，我想确定 li 的当前顺序以及与 ul 关联的它们的相应 ID。然后我希望能够只使用 .post 函数将它们提交给一个函数，以将这些值保存到我的数据库中。

如何确定我页面上 lis 的当前顺序和 ID？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T04:19:39.230

Well`$("#video_gallery li")`会给你一个 jQuery 对象，其中包含当前顺序中的所有 li 元素。然后，您可以遍历它们`.each()`并提取 id：

```
$("#save_info").click(function() {    
    var ids = [];
    $("#video_gallery li").each(function() {
        ids.push(this.id);
    });

    // do something with the ids, for example:
    $.post("test.php", { 'file_ids[]': ids });   
}); 
```

演示：http: [//jsfiddle.net/5f4kr/](http://jsfiddle.net/5f4kr/)

（或者，您可以使用各种其他 jQuery 方法，例如 ，`$.map()`但上述方法很简单。）

# asp.net-mvc - ASP.NET MVC3：System.Web.HttpException：请求在此上下文中不可用

> ID：11406444
> 
> 赞同：0
> 
> 时间：2012-07-10T04:07:18.447
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我开发了一个 asp.net mvc3 应用程序，它在 localhost 上运行良好，但是当我使用所有 .dll 在线托管时，它给出了错误

```
Server Error in '/' Application.

Request is not available in this context

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Web.HttpException: Request is not available in this context

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[HttpException (0x80004005): Request is not available in this context]
   System.Web.HttpContext.get_Request() +8828580
   atulitbaldhama.MvcApplication.Application_Start() in D:\2012\atulitbaldhama\atulitbaldhama\atulitbaldhama\Global.asax.cs:66

[HttpException (0x80004005): Request is not available in this context]
   System.Web.HttpApplicationFactory.EnsureAppStartCalledForIntegratedMode(HttpContext context, HttpApplication app) +9093225
   System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext context, MethodInfo[] handlers) +131
   System.Web.HttpApplication.InitSpecial(HttpApplicationState state, MethodInfo[] handlers, IntPtr appContext, HttpContext context) +194
   System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context) +339
   System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext) +253

[HttpException (0x80004005): Request is not available in this context]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9013676
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +97
   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +256

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.1 
```

我该如何解决？我已经尝试了很多

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:07:42.010

不确定这是否对某人有帮助.. 但我将应用程序池设置为 Classic .NET AppPool 并且错误消失了。

马丁

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T04:22:55.407

[这](https://stackoverflow.com/questions/2518057/request-is-not-available-in-this-context)适用吗？服务器显然是 IIS7，而您的本地主机可能是 IIS6。

从提到的链接引用：

> 此错误是由于 IIS7 集成管道中的设计更改导致 Application_Start 事件中的请求上下文不可用。当使用经典模式（在以前版本的 IIS 上运行时的唯一模式）时，请求上下文过去是可用的，即使 Application_Start 事件一直旨在作为应用程序生命周期中的全局且与请求无关的事件。尽管如此，由于 ASP.NET 应用程序总是由应用程序的第一个请求启动，因此过去可以通过静态 HttpContext.Current 字段访问请求上下文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-23T06:49:19.697

请用

```
 HttpContext.Current.Response.Redirect("PageName"); 
```

代替

```
Response.Redirect("PageName"); 
```

在你的代码中。

# javascript - 带有悬停状态问题的 Chrome 动画 CSS3 3D Cube

> ID：11406445
> 
> 赞同：0
> 
> 时间：2012-07-10T04:07:22.277
> 
> 标签：javascript, html, google-chrome, css, webkit-transform

首先，我从[http://www.paulrhayes.com/2009-07/animated-css3-cube-interface-using-3d-transforms/获得了这个很棒的 3D 立方体的代码](http://www.paulrhayes.com/2009-07/animated-css3-cube-interface-using-3d-transforms/)

我想要做的是在每个面上添加一些带有悬停状态的 div。到目前为止，它似乎大部分都在工作，但是，某些旋转状态会导致悬停状态在 Chrome 中失败（在 Mozilla 中工作正常）。这是我到目前为止所拥有的：http: [//jsfiddle.net/BUbeQ/1/](http://jsfiddle.net/BUbeQ/1/)

重现问题的最简单的箭头键操作：Down-Right 或 Down-Left-Left（注意：确保首先单击结果窗口内的任意位置，否则箭头键将不起作用）

任何有关如何使悬停状态始终有效的帮助将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-17T08:00:17.520

在提出问题时，这似乎是 chrome 中的一个错误。我在最新版本的 chrome (28.0.1500.95) 中没有看到任何问题

# php - 如何从img标签获取链接

> ID：11406453
> 
> 赞同：0
> 
> 时间：2012-07-10T04:09:04.437
> 
> 标签：php, regex, url, preg-match, image

```
$img = '<img src="http://some-img-link" alt="some-img-alt"/>';

$src = preg_match('/<img src=\"(.*?)\">/', $img);

echo $src; 
```

我想`src`从 img 标签中获取值，也许是 alt 值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T04:51:29.740

假设您总是得到问题中显示的 img html。

现在在正则表达式中，您提供了它的说法，在 src 属性之后，它给出了 img 的结束标记。但在字符串中也有一个 alt 属性。所以你也需要关心它。

```
/<img src=\"(.*?)\".*\/>/ 
```

如果你还要检查 alt 然后是正则表达式。

```
/<img src=\"(.*?)\"\s*alt=\"(.*?)\"\/>/ 
```

另外，您只是在检查其是否匹配。如果您需要获取匹配项，则需要向 preg_match 提供第三个参数，该参数将填充匹配项。

```
$img = '<img src="http://some-img-link" alt="some-img-alt"/>';
$src = preg_match('/<img src=\"(.*?)\"\s*alt=\"(.*?)\"\/>/', $img, $results);
var_dump($results); 
```

注意：上面给出的正则表达式不是那么通用，如果您可以提供将出现的 img 字符串，将提供更强大的正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T12:50:02.187

测试代码：

```
$ input=’&lt;img src= ”http://www.site.com/file.png” > ‘;
preg_match(“&lt;img.*?src=[\"\"'](?<url>.*?)[\"\"'].*?>”,$input,$output);
echo $output;   // output = http://www.site.com/file/png 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T06:23:51.827

```
 function scrapeImage($text) {
    $pattern = '/src=[\'"]?([^\'" >]+)[\'" >]/';
    preg_match($pattern, $text, $link);
    $link = $link[1];
    $link = urldecode($link);
    return $link;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T04:10:48.293

[如何使用 php 从 html 中提取 img src、title 和 alt？](https://stackoverflow.com/questions/138313/how-to-extract-img-src-title-and-alt-from-html-using-php)

请参阅这篇文章的第一个答案。

您将使用 preg_match，只是方式略有不同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T04:15:29.900

试试这个代码：

```
<?php
$doc = new DOMDocument();
$doc->loadHTML('<img src="" />');
$imageTags = $doc->getElementsByTagName('img');

foreach($imageTags as $tag) {
    echo $tag->getAttribute('src');
}
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T04:20:30.977

```
preg_match('/<img src=\("|')([^\"]+)\("|')[^\>]?>/', $img); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-10T06:21:54.163

你也可以使用这个库：[SimpleHtmlDom](http://simplehtmldom.sourceforge.net/)

```
<?php
$html = new simple_html_dom();
$html->load('<html><body><img src="image/profile.jpg" alt="profile image" /></body></html>');
$imgs = $html->find('img');
foreach($imgs as $img)
print($img->src);
?> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-11-21T04:47:12.937

您在上面已经有足够好的响应，但这里有另一个代码（更通用）：

```
function retrieve_img_src($img) {
  if (preg_match('/<img(\s+?)([^>]*?)src=(\"|\')([^>\\3]*?)\\3([^>]*?)>/is', $img, $m) && isset($m[4]))
    return $m[4];
  return false;
} 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-07-10T04:38:30.867

您可以使用 JQuery 获取 src 和 alt 属性

在标题中包含 jquery

```
 <script type="text/javascript" 
           src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js">
 </script> 
```

//HTML

//获取src和alt属性

```
<script type='text/javascript'>
 // src attribute of first image with id =imgId

 var src1= $('#imgId1').attr('src');
 var alt1= $('#imgId1').attr('alt');

 var src2= $('#imgId2').attr('src');
 var alt2= $('#imgId2').attr('alt');
</script> 
```

# asp.net-mvc-3 - 在 MVC3 Razor 视图引擎中显示自定义错误消息

> ID：11406456
> 
> 赞同：0
> 
> 时间：2012-07-10T04:09:17.417
> 
> 标签：asp.net-mvc-3

我有这样的设计视图：

![我的视图设计模式](../Images/a00fa5169a3417cf3a1b4478c915d3e2.png)

在这里，我在单击保存按钮时强加了一些条目验证，我想在预期的显示区域中显示错误消息。怎么可能？

我的控制器动作是：

```
 [HttpPost]
        public ActionResult Save(COA_ChartsOfAccount oCOA_ChartsOfAccount)
        {
            try
            {
                if (this.ValidateInput(oCOA_ChartsOfAccount))
                {
                    COA_ChartsOfAccount oParent = new COA_ChartsOfAccount();
                    oParent = oParent.Get(oCOA_ChartsOfAccount.ParentHeadID);
                    if (oCOA_ChartsOfAccount.IsChild)
                    {
                        oCOA_ChartsOfAccount.ParentHeadID = oParent.AccountHeadID;
                    }
                    else 
                    {
                        oCOA_ChartsOfAccount.ParentHeadID = oParent.ParentHeadID;
                    }
                    oCOA_ChartsOfAccount = oCOA_ChartsOfAccount.Save();
                    return RedirectToAction("RefreshList");
                }
                return View(oCOA_ChartsOfAccount);
            }
            catch (Exception ex)
            {                
                return View(oCOA_ChartsOfAccount);              
            }

        } 
```

注意：我想为错误消息显示制作通用的局部视图。（如异常错误消息、验证消息、各种用户通知消息）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T04:18:15.063

使用您当前的设置

显示错误消息

在您的控制器中：

```
catch (Exception ex)
        {                
            TempData["message"] = "Custom Error Messge";
            return View(oCOA_ChartsOfAccount);              
        } 
```

在您看来：

```
<div style="color: red;font-weight:900;">@TempData["message"]</div> 
```

# silverlight - UI和View在术语上的区别以及在什么场景下哪个是正确的

> ID：11406457
> 
> 赞同：1
> 
> 时间：2012-07-10T04:09:21.833
> 
> 标签：silverlight, model-view-controller, user-interface, mvvm, mvp

我很想知道“UI”和“View”这两个词之间是否有区别。我看到 UI 可以分为 GUI、语音用户界面、命令行用户界面。但在我们基于 MVC/MVVM/MVP 的项目中，我们多次将 UI 与 View 互换。我有点好奇为什么用两个不同的词来代表同一件事？或者正确的称呼方式是什么？（我知道很多人可能会说，它的“视图”，但仍然为什么我们使用行话 UI？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:27:46.053

当您从非常抽象的角度看待应用程序时，术语用户界面似乎是正确的术语。用户界面只是用户与之交互的应用程序的界面。

然而，这种观点更多地是一个技术术语。

正如您已经提到的，用户界面总结了用户可以用来与应用程序交互的一组非常通用的*东西。*视图是一种特定类型的 UI，即使用特定技术制作的图形用户界面。

# ruby-on-rails - Highcharts滚动条没有出现

> ID：11406458
> 
> 赞同：4
> 
> 时间：2012-07-10T04:09:30.773
> 
> 标签：ruby-on-rails, highcharts, ruby-on-rails-3.2

出于某种原因，Highcharts 的滚动条选项不适用于我的 Rails 3.2.1 应用程序。奇怪的是，一切看起来都与此完全相同：http: [//jsfiddle.net/highcharts/fj6d2/](http://jsfiddle.net/highcharts/fj6d2/)

...除了缺少滚动条。我的代码与上面的 jsfiddle 中显示的代码完全相同，该图出现在我的本地应用程序上，但缺少滚动条。

这是我本地应用程序中的代码，与 jsfiddle 中的代码相同：

```
var chart = new Highcharts.Chart({

chart: {
    renderTo: 'container'
},

xAxis: {
    categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
    min: 6
},

legend: {
    verticalAlign: 'top',
    y: 100,
    align: 'right'
},

scrollbar: {
    enabled: true
},

series: [{
    data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
}]
}); 
```

再次，图表显示，但只有滚动条没有。为什么滚动条不显示？有没有人在他们的 highcharts 图表中成功使用滚动条？我很想解决这个问题，我真的很困惑为什么它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T04:24:46.653

我发现出了什么问题。在我的本地应用程序中，我正在加载 highcharts.js 文件，而在 jsfiddle 中它正在加载 highstock.js。添加这个：

```
<script type="text/javascript" src="http://www.highcharts.com/js/highstock.js"></script> 
```

解决了这个问题。

# blackberry - RIM 中的 Android Toast 等价物是什么？

> ID：11406460
> 
> 赞同：0
> 
> 时间：2012-07-10T04:09:30.923
> 
> 标签：blackberry, status

在android中，有一个函数调用`Toast`，它立即显示而不涉及时间。我尝试在 RIM 中使用 Status，但它必须在 RIM 中运行，`invokeLater`并且不能将时间设置为小于 1 秒。所以它不能立即显示。

`Toast`任何其他与or相同的内置`Status`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T06:19:38.157

不，没有afaik。`Toast`是由 Android 以某种方式“发明”的。

以前的操作系统使用带有确认按钮的弹出框。A`Toast`几乎就像一个带有计时器的弹出框。

当然，@Signare 正确地为您在 BlackBerry 上“通常”执行的操作提供了通用替换。`Dialog.alert(String)`

如果你想要更“Androidy”的东西，这是我们想要在 Cobi 实现的东西，但由于处理客户端工作的时间限制，还没有实现。

`Toast`与“旧”的做事方式相比，有两个独特的方面：

1.  弹出窗口仅显示一小段时间
2.  弹出窗口根本不会阻止用户与背景屏幕交互

要创建弹出屏幕，请查看`PopupScreen`该类 - 然后传入您自己的将显示的布局管理器。

您可以在屏幕显示时启动计时器（我们尚未实现此功能），这可能会为您关闭屏幕。

至于不阻止用户——这是主要的区别——我不知道如果你使用这个`PopupScreen`类是否可以做到。也许如果您`PopupScreen`将所有按键都传递到底层屏幕，这可能是可能的。

在我们的一些应用程序中，我们有一个自定义字段，在我们的基本`MainScreen`子类中定义，可以定位在屏幕上的其余字段之上。这允许用户在显示字段时继续与屏幕交互。我现在不能在这里分享那个代码。

# c# - Linq 表达式中的条件

> ID：11406463
> 
> 赞同：1
> 
> 时间：2012-07-10T04:09:45.320
> 
> 标签：c#, sql, linq, linq-to-sql, linq-to-entities

我有一个连接两个表的 LINQ 表达式。我想有条件地检查另一个布尔值：（ *注意下面的文本`*********`）*

```
bool status = testfunc();

var List = 
    from t in Houses
    join k in Tbl_HouseOwner on t.HouseCode equals k.HouseCode
    where k.ReqCode== t.ReqCode 
    *********** if (status) { where k.Name.Contains(Name) } **********
    select new
    {
        ...
        name = k.Name,
        ...
    }; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T04:12:39.627

您可以使用`status`屏蔽条件，如下所示：

```
where k.ReqCode == t.ReqCode && (!status || k.Name.Contains(Name)) 
```

如果`status`是`false`，则 OR`||`将立即成功，并且 AND`&&`将为真（假设我们必须评估 OR `||`，AND 的左侧`&&`必须为真）。另一方面，如果`status`is ，则需要评估 the 才能完成条件评估。`true``k.Name.Contains(Name)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T04:18:27.407

dasblinkenlight 的答案（应该可以正常工作）的另一种选择是以编程方式构建查询。在这种情况下，您实际上是在更改连接的右侧，因此您可以使用：

```
IQueryable<Owner> owners = Tbl_HouseOwner;
if (status)
{
    owners = owners.Where(k => k.Name.Contains(Name));
} 
```

然后：

```
var query = from t in Houses
            join k in owners on t.HouseCode equals k.HouseCode
            where k.ReqCode == t.ReqCode
            select new { ... }; 
```

哪种方法最适合取决于您的方案。如果您想添加各种不同的查询过滤器，以编程方式构建它会更简洁 - 并使最终 SQL 对于任何给定查询更易于理解。对于一次性的，dasblinkenlight 的方法更简单。

另请注意，至少在 LINQ to Objects 中，加入*两*列会更有效：

```
var query = from t in Houses
            join k in owners 
            on new { t.HouseCode, t.ReqCode } equals new { k.HouseCode, k.ReqCode }
            select new { ... }; 
```

在任何转换为​​ SQL 的 LINQ 风格中，我希望这将通过数据库或查询转换进行优化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T07:17:03.590

我这样做：

```
 IQueryable<X> r = from x in Xs
                                  where (x.Status == "Active")
                                  select x;
        if(withFlagA) {
            r = r.Where(o => o.FlagA == true);
        } 
```

为了适合您的示例，首先您可以这样做：

```
 IQueryable<YourOwnerType> filteredOwners = Tbl_HouseOwner;
 if( status ) {
     filteredOwners = filteredOwners.Where( o => o.Name.Contains(Name) );
 } 
```

然后将*Tbl_HouseOwner*替换为*filtersOwners*。

```
var List = 
from t in Houses
join k in filteredOwners on t.HouseCode equals k.HouseCode
where k.ReqCode== t.ReqCode 
//Nothing here 
select new
{
    ...
    name = k.Name,
    ...
}; 
```

**现在，您可能知道这一点，但**这里的重点是最初的*.Where*没有“伸出”到数据库。*在您开始枚举它（例如 foreach）或调用像ToList()*、*First()*、*FirstOrDefault()*这样的方法之前，您的查询不会被执行。这意味着您可以在选择后调用*.Wheres*如果*您*愿意，最终查询仍然有效。

# javascript - 循环对象数组时无法调用公共方法

> ID：11406464
> 
> 赞同：1
> 
> 时间：2012-07-10T04:09:55.510
> 
> 标签：javascript

我开始在 JavaScript 中使用 OOP，我有一个简单的对象数组，我试图循环并在每个对象上调用一个方法，但是，当我在 Google Chrome 下运行它时，我得到以下JavaScript 调试器中的异常：

```
未捕获的类型错误：对象 0 没有方法“drawHisto”
```

下面的简化代码片段：

```
var histograms = [];
var h1 = null;
var h2 = null;
var h3 = null;

function Init() {
    h1 = new Histogram(canvas1, "red");
    h2 = new Histogram(canvas2, "blue");
    h3 = new Histogram(canvas3, "green");

    histograms = [ h1, h2, h3];
}

function Histogram(canvas, color) {
    // this is my constructor
}

Histogram.prototype.drawHisto = function() {
    // I will add code here to draw the histogram
}

function DrawHistograms() {
    for (var h in histograms) {
        h.drawHisto(); // Throws exception!
    }

    // h1.drawHisto() <--- this works
} 
```

知道我可能做错了什么吗？我已经稍微简化了这里的代码，所以如果你发现问题一定出在其他地方，我可以添加额外的上下文。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T04:13:51.590

JavaScript 中的`for in`循环不会遍历数组的值，而是遍历对象的键。像往常一样简单地使用`for`循环：

```
function DrawHistograms() {
    for (var i = 0; i < histograms.length; i++) {
        histograms[i].drawHisto();
    }
} 
```

或者，如果与 Internet Explorer 8 和更早版本的兼容性没有问题，您可以使用`Array.forEach`：

```
function DrawHistograms() {
    histograms.forEach(function(h) {
        h.drawHisto();
    });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T04:14:13.240

```
for (var h in histograms) {
    histograms[h].drawHisto();
} 
```

Javascript 中的 for-in-loop 一开始可能会令人惊讶：它不会遍历数组的*值，而是遍历**键*。对于直接数组，我倾向于更详细但更清晰的标准 for 循环：

```
for (var i = 0; i < histograms.length; i++) {
    histograms[i].drawHisto();
} 
```

有趣的事实时间！for-in-loop 可以很方便地迭代键值映射`{foo: 'bar', spam: 'eggs'}`，但要注意：它也会迭代继承的键。例如，如果某个 wiseguy 决定声明`Object.prototype.myMethod`，您会看到键`foo`、`spam`、 并`myMethod`出现。但是，该`hasOwnProperty`方法可以使循环安全：

```
for (var key in obj) {
    if(obj.hasOwnProperty(key)) {
         // proceed with confidence
    }
} 
```

# ravendb - 获得更大的计数会导致乌鸦索引统计

> ID：11406472
> 
> 赞同：1
> 
> 时间：2012-07-10T04:10:17.963
> 
> 标签：ravendb

我有一个索引，有一个转换：

```
docs.FeedPosts
    .SelectMany(doc => (doc.Labels).DefaultIfEmpty(), (doc, docLabelsItem1) => new {AnnouncementGuid = doc.AnnouncementGuid, CreationDateUtc = doc.CreationWhenAndWhere.Time, FeedOwner = doc.FeedOwner, Key = doc.Key, Labels_Text = doc.Labels
    .Select(label => label.Text), SequentialId = ((long)doc.SequentialId), SubjectGuid = doc.SubjectGuid, SubjectId = doc.SubjectId}) 
```

（转换）

```
results
    .Select(doc => new {doc = doc, tags = Database.Load(doc.Key)})
    .Select(__h__TransparentIdentifier1 => new {AnnouncementGuid = __h__TransparentIdentifier1.tags.AnnouncementGuid, AreCommentsLocked = __h__TransparentIdentifier1.tags.AreCommentsLocked, Author = __h__TransparentIdentifier1.tags.Author, Comments = __h__TransparentIdentifier1.tags.Comments, CreationWhenAndWhere = __h__TransparentIdentifier1.tags.CreationWhenAndWhere, FeedOwner = __h__TransparentIdentifier1.tags.FeedOwner, Key = __h__TransparentIdentifier1.tags.Key, Labels = __h__TransparentIdentifier1.tags.Labels, MessageBody = __h__TransparentIdentifier1.tags.MessageBody, SequentialId = __h__TransparentIdentifier1.tags.SequentialId, SubjectGuid = __h__TransparentIdentifier1.tags.SubjectGuid, SubjectId = __h__TransparentIdentifier1.tags.SubjectId}) 
```

这适用于查询数据。但是，如果我随后请求统计信息，我会返回错误的文档计数！（我将查询限制为 0 个结果，并请求 raven 统计信息）。

似乎是因为我的文档看起来像这样：

```
{
    Labels: [
    { Text: "label 1" }
    { Text: "label 2" }
    ]
} 
```

Raven 为这个文档生成了两个索引条目——如果我查看 raven 查询工具，第一个索引包含实际的索引数据，第二个索引文档完全是空的。

如果我在文档中有 3 个标签，它会生成 3 个索引结果……我的“计数”是应有的 3 倍。

这是怎么回事？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T08:13:51.340

我将您的索引翻译为查询语法，因为这样更容易查看：

```
from doc in docs.FeedPosts
from NOT_USING_THIS in doc.labels
select new 
{
    AnnouncementGuid = doc.AnnouncementGuid, 
    CreationDateUtc = doc.CreationWhenAndWhere.Time, 
    FeedOwner = doc.FeedOwner, 
    Key = doc.Key, 
    Labels_Text = doc.Labels.Select(label => label.Text), 
    SequentialId = ((long)doc.SequentialId), 
    SubjectGuid = doc.SubjectGuid, 
    SubjectId = doc.SubjectId}
} 
```

第二个 from 子句是您的索引中的 SelectMany()，您没有使用它的值如果您将其删除并在根对象之上工作，您将不会遇到此问题。

这方面的文档是： [http ://ravendb.net/docs/faq/skipped-results](http://ravendb.net/docs/faq/skipped-results)

# visual-studio-2010 - 从 Visual Studio 调试时 EmguCV 突然关闭

> ID：11406479
> 
> 赞同：0
> 
> 时间：2012-07-10T04:10:56.350
> 
> 标签：visual-studio-2010, visual-studio-debugging, emgucv

当我添加 Emgu.CV 参考

*   Emgu.CV.dll
*   Emgu.CV.UI.dll
*   Emgu.Util.dll

并尝试在 Visual Studio 2010 中调试（按 F5 键）然后应用程序突然关闭而没有任何警告或警报。

我的应用程序有一个 MainWindow 并打开一个新窗口，然后我尝试打开第二个窗口（包含 Emgu.CV.Capture）应用程序关闭而没有警告或抛出异常

# php - Silverstripe：我无法处理 Form 对象的子 URL。子网站模块

> ID：11406480
> 
> 赞同：1
> 
> 时间：2012-07-10T04:10:59.877
> 
> 标签：php, silverstripe

有点远射，但任何人都可以对此有所了解吗？

我最近安装了 subsites 模块以从单个安装运行多个站点，现在收到错误消息：“我无法处理 Form 对象的子 URL。” 当我尝试向图片库对象添加描述/标题时。我已删除子站点以验证是否是导致问题的原因。我正在使用 2.4

我可以很好地上传图像，但是在尝试从弹出窗口中保存描述时会出现问题。

我也尝试过使用默认字段，但这仍然给出了同样的错误。

我的代码：

```
<?php

class Gallery extends Page {

   public static $db = array( 
      'SummaryText'=>'Text', 
      'GalleryText'=>'Text' 
   ); 

   static $has_many = array( 
      'Photos' => 'GalleryPhoto' 
   ); 

   function getCMSFields() { 
      $fields = parent::getCMSFields(); 

      $manager = new ImageDataObjectManager( 
         $this, // Controller 
         'Photos', // Source name 
         'GalleryPhoto', // Source class 
         'Image' // File name on DataObject 
      ); 
      $manager->uploadFolder = $this->URLSegment; 

      $fields->addFieldToTab('Root.Content.Main', new TextField('SummaryText', 'Summary Text (Appears in the section preview)'), 'Content'); 
      $fields->addFieldToTab('Root.Content.Main', new TextField('GalleryText', 'Gallery Text (entering anything in here will overwrite any image Titles and Descriptions)'), 'Content'); 
      $fields->addFieldsToTab("Root.Content.Gallery", array($manager));             
      $fields->removeFieldFromTab('Root.Content', 'StyledText'); 
      $fields->removeFieldFromTab('Root.Content', 'Column2'); 
      $fields->removeFieldFromTab('Root.Content', 'Content'); 

      return $fields; 

   } 

} 
```

..

```
<?php

class GalleryPhoto extends Photo {

   public static $db = array( 
      'HTMLDescription'=>'HTMLText' 
   ); 

   static $has_one = array( 
      'Gallery' => 'Gallery' 
   ); 

   public function getCMSFields(){ 
      $fields = parent::getCMSFields(); 
      $fields->removebyname('Description'); 
      $fields->removebyname('Title'); 
      $fields->replaceField('HTMLDescription', new SimpleTinyMCEField('HTMLDescription')); 
      return $fields; 
   } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:40:15.040

我只是遇到了同样的错误，搜索了几个小时。这是 /framework/control/Session.php 的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T16:13:33.897

不幸的是，“我无法处理 Form 对象的子 URL。” 是一个非常通用的错误消息，根据我的经验，调试起来相当棘手。

老实说，在我看来，Subsites 模块并不是那么好，它可以工作，但它不是那么好，而且我猜它与其他模块并不真正兼容。

我可以想象你的错误的原因是因为 silverstripe 忘记了弹出窗口中的 SubsiteID 并且因为 SilverStripe 无法再找到你正在编辑的当前页面（因为它添加了一个过滤器 WHERE SubsiteID = x 到你所做的每个页面查询)

开始调试的一个地方是连接到 Subsite::currentSubsiteID() 并查看当您在弹出窗口中时它是否记得 SubsiteID

另外，当您收到错误消息时，调用的确切 url 是什么？

# java - glTexImage2D 中的 ByteBuffer.wrap() 导致过多的垃圾收集

> ID：11406481
> 
> 赞同：1
> 
> 时间：2012-07-10T04:11:04.690
> 
> 标签：java, android, opengl-es, garbage-collection, android-camera

我目前在 android GLSurfaceView() 中进行以下 openGL 调用 onDrawFrame()：

```
GLES20.glActiveTexture(GLES20.GL_TEXTURE0);
GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, cameraTexture[0]);
GLES20.glTexImage2D(GLES20.GL_TEXTURE_2D, 0, GLES20.GL_LUMINANCE, camPreviewSize.width, camPreviewSize.height, 0, GLES20.GL_LUMINANCE,     GLES20.GL_UNSIGNED_BYTE, ByteBuffer.wrap(yArray));
GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_LINEAR); 
```

我需要在每一帧都执行此操作（或类似的操作），因为我正在使用`setPreviewCallback()`相机内的 android 功能使用自定义回调方法处理来自 android 相机预览的实时提要，但我的垃圾收集绝对是疯狂的（以下重复关于每秒 10 次！）：

```
....

GC_FOR_ALLOC freed 1530K, 42% free 3671K/6307K, paused 18ms
GC_FOR_ALLOC freed 1530K, 42% free 3671K/6307K, paused 22ms
GC_FOR_ALLOC freed 1530K, 42% free 3671K/6307K, paused 25ms
GC_FOR_ALLOC freed 1530K, 42% free 3671K/6307K, paused 20ms
GC_FOR_ALLOC freed 1530K, 42% free 3671K/6307K, paused 20ms
GC_FOR_ALLOC freed 1530K, 42% free 3671K/6307K, paused 16ms
GC_FOR_ALLOC freed 1530K, 42% free 3671K/6307K, paused 22ms

.... 
```

`yArray`是一个字节数组，我将它包装到一个缓冲区中。我已经使用 DDMS 完成了分析，实际上大多数分配都是字节数组，从我对 wrap 函数所做的阅读来看，它似乎可能会在调用 wrap 时创建一个底层 byte[]，这将然后在用作纹理后由 GC 收集。

**如何减少分配次数？**我应该以某种方式通过 GL 调用进行更改吗？似乎我可以只是重用相同的字节数组，但我不确定如何。

任何帮助将不胜感激！这么多垃圾吓死我了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T18:10:48.323

有一个[有据可查的 android 错误](http://code.google.com/p/android/issues/detail?id=2794)与`setPreviewCallback()`导致过度垃圾收集的方法有关。此问题的解决方案是使用较新的方法，在该方法`setPreviewCallbackWithBuffer`中，您预先分配一个缓冲区，该缓冲区使用以下方法在每个帧上添加和重新添加`addCallbackBuffer`：

```
public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
...
  mCamera.addCallbackBuffer(callbackBuffer);
  mCamera.setPreviewCallbackWithBuffer(class that implements PreviewCallback);
...
} 
```

并且在 onPreviewFrame 函数中必须再次添加缓冲区：

```
public void onPreviewFrame(byte[] yuvArray, Camera camera) {
...
  camera.addCallbackBuffer(callbackBuffer);
...
} 
```

解决在 GL 调用中分配内存的最初怀疑`ByteBuffer.wrap()`：它不是。它实际上将使用底层数组（`yArray`在提供的代码中）并且不会分配新的内存来进行垃圾收集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T05:25:25.257

您`ByteBuffer`在每次调用时都会创建一个新实例`onDrawFrame`，这会立即成为垃圾并被收集。只有当数据的大小发生变化时才需要这个，因此纹理大小尺寸本身也发生了变化。我认为这不太可能。

预先分配`ByteBuffer`一次并通过批量方法更新其内容。

# symfony - Symfony 2 无法生成新的 bunlde

> ID：11406485
> 
> 赞同：1
> 
> 时间：2012-07-10T04:11:47.240
> 
> 标签：symfony, ubuntu, bundle

我刚刚加入 ServerGrove 并获得了 VPS。我安装了 Symfony 2 并将其解压到我的 www 文件夹中。我运行了这个命令`php app/console generate:bundle --namespace=Pixbelly/HomeBundle --format=yml`，但我收到了这个错误：

```
[InvalidArgumentException]
There are no commands defined in the "generate" namespace. 
```

我从 www/Symfony 运行了这个命令，但我不知道出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-21T19:18:40.463

检查您是否已安装并激活 SensioGeneratorBundle。

在 app/AppKernel.php 中

```
 $bundles = array(
        new Sensio\Bundle\GeneratorBundle\SensioGeneratorBundle(),
        ... 
```

就像在[http://symfony.com/doc/current/bundles/SensioGeneratorBundle/index.html](http://symfony.com/doc/current/bundles/SensioGeneratorBundle/index.html)

也许还检查您的composer.json：

```
 "require": {
        "sensio/distribution-bundle": "2.3.*", // here maybe newer version
        "sensio/generator-bundle": "2.3.*", // same thing
        ... 
```

然后清除缓存并执行

```
 composer update 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T16:45:55.323

请看这个视频，生成捆绑命令的正确语法（我使用的是 ubuntu 13.04 操作系统）是：

```
./app/console generate:bundle 
```

[http://symfony.com/blog/symfony2-getting-easier-interactive-generators](http://symfony.com/blog/symfony2-getting-easier-interactive-generators)

我希望上面的视频链接对你有用

很抱歉在这个旧帖子上回复，今天我遇到了同样的问题并找到了这个链接，我想我应该在这里提一下，将来可能对某人有用

# string - 池塘中的简单 Java 鱼乘以池塘中的鱼数

> ID：11406486
> 
> 赞同：0
> 
> 时间：2012-07-10T04:11:53.340
> 
> 标签：string, loops, nested-loops

我正在尝试将池塘中的鱼数增加到 43 条。

我不担心“坦克”，而是更担心将鱼乘以 43。

我有一个嵌套循环，它给了我 100 条鱼，但我不确定如何获得我需要的确切数量的鱼？

```
 for (int i=0; i<10; i++)
 { 

 for (int j=0; j<10; j++)
 { 

    System.out.print(" <#><");

 }

----------------------------------------------------
| <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< |
| <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< |
| <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< |
| <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< |
| <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< |
| <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< |
| <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< |
| <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< |
| <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< |
| <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< |
---------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:15:47.503

```
if( (i*10+j) < 43) {
   System.out.print(" <#><");
}
else{
System.out.print("     ");
} 
```

# jquery - jqPlot荧光笔改变x值

> ID：11406504
> 
> 赞同：3
> 
> 时间：2012-07-10T04:14:00.590
> 
> 标签：jquery, jqplot

我有一个 jqPlot 线图，我正在尝试研究如何自定义 X 值的荧光笔文本。

所以。我有以下内容：

```
var line1=[100, 68, 63, 36, 28];
var line2=[100, 71, 68, 42, 32];
var line3=[100, 60, 45, 15, 5];
var line4=[100, 76, 58, 22, 8];
var plot3 = $.jqplot('chart3', [line1,line2,line3,line4], {
axes:{
      xaxis: {
               ticks: [  [1, 'group1'], 
                         [2, 'group2'], 
                         [3, 'group3'], 
                         [4, 'group4'], 
                         [5, 'group5']
                      ],
               tickOptions:{
                      showGridline: false,
               },
            },
      yaxis:{
             label:'Percentage',
             labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
             min : 0,
             max : 100,
             pad : 0,
             numberTicks : 11,
            }
    }, 
```

哪个正确显示图形，X 轴读取 group1 group2 等...但是当我添加荧光笔选项并例如将鼠标悬停在 line1 tick 2 上时，框显示“2.0, 68”。我想做的是显示“group2, 68”。

我曾尝试使用 formatString 参数，但无法使其正常工作。

有人能指出我正确的方向吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T14:57:25.767

我可以想出一个解决方案，也许不是最好的，但考虑到您显示的代码，我可以很快想到最合适的解决方案。它涉及使用以下代码。基本上在每次鼠标移动时，`neighbour`不为空（这是用于显示荧光笔工具提示的条件）我正在将工具提示更改为我喜欢的工具提示。

```
$("#chart").bind('jqplotMouseMove', function(ev, gridpos, datapos, neighbor, plot) {
    if (neighbor) {
        $(".jqplot-highlighter-tooltip").html("" + plot.axes.xaxis.ticks[neighbor.pointIndex][1] + ", " + datapos.yaxis.toFixed(2) + " Oi");
    }
}); 
```

[有关工作代码示例，请参阅。](http://jsfiddle.net/Boro/xJdkJ/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T06:30:28.863

没有尝试，但这段代码似乎符合您的预期[https://gist.github.com/2422033](https://gist.github.com/2422033)

这是 JqPlot doc [highlighter plugin](http://www.jqplot.com/docs/files/plugins/jqplot-highlighter-js.html#%24.jqplot.Highlighter.tooltipAxes)上的链接。检查`tooltipAxes`物业

这里有一个关于在工具提示上显示系列名称的解决方案的链接，默认情况下不支持。检查评论 #1 [https://bitbucket.org/cleonello/jqplot/issue/109/enable-highlighter-tooltip-to-display-label-of-the-series-on#comment-65301](https://bitbucket.org/cleonello/jqplot/issue/109/enable-highlighter-tooltip-to-display-label-of-the-series-on#comment-65301)

# ios - iOS - 不能将 UIColor * 作为参数传递？

> ID：11406506
> 
> 赞同：0
> 
> 时间：2012-07-10T04:14:14.233
> 
> 标签：ios, draw, uicolor

我想将 UIColor * 作为参数传递，但我的程序在 [paramColour set] 处不断崩溃。我知道我可以传入一个字符串并从那里选择 UIColor 但我只是想知道为什么这不起作用。帮助将不胜感激。

```
- (void) drawRooftopAtTopPointof:(CGPoint)paramTopPoint
                      colour:(UIColor *)paramColour
                    lineJoin:(CGLineJoin)paramLineJoin{

/* Set the color that we want to use to draw the line */
[paramColour set];

/* Get the current graphics context */
CGContextRef currentContext = UIGraphicsGetCurrentContext();

/* Set the line join */
CGContextSetLineJoin(currentContext,
                     paramLineJoin);

/* Set the width for the lines */
CGContextSetLineWidth(currentContext,
                      3.0f);

/* Start the line at this point */
CGContextMoveToPoint(currentContext,
                     paramTopPoint.x - 10,
                     paramTopPoint.y + 8);

/* And end it at this point */
CGContextAddLineToPoint(currentContext,
                        paramTopPoint.x,
                        paramTopPoint.y);

/* Extend the line to another point to
 make the rooftop */
CGContextAddLineToPoint(currentContext,
                        paramTopPoint.x + 10,
                        paramTopPoint.y + 8);

/* Use the context's current color to draw the lines */
CGContextStrokePath(currentContext);

/* Draw the text in the rooftop using a black color */
[[UIColor blackColor] set];

} 
```

这是触发此绘图功能的视图中的drawRect。

```
- (void)drawRect:(CGRect)rect
{

for (int i=0; i < arrowsToDrawArray.count; i++)
{
    Arrow * arrowObj = [arrowsToDrawArray objectAtIndex:i];
    UIColor * colourOfArrow = [arrowObj colourOfArrow]; // colour determines whether right or wrong
    CGPoint p = [arrowObj arrowPlacement];

//    CGPoint p = [val CGPointValue]; 
    [self drawRooftopAtTopPointof:p colour:colourOfArrow lineJoin:kCGLineJoinMiter];
}
} 
```

这是箭头类的定义。

```
#import <UIKit/UIKit.h>

@class Arrow; 

@interface Arrow : NSObject
{
UIColor * colourOfArrow; 
CGPoint arrowPlacement; 
}
@property (nonatomic,retain) UIColor * colourOfArrow;
@property (nonatomic) CGPoint arrowPlacement; 

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:47:48.330

您好，感谢您的帮助，

我决定正确地使用构造函数和所有内容，这是新代码。似乎现在正在工作。

箭头.h

```
#import <UIKit/UIKit.h>

@class Arrow; 

@interface Arrow : NSObject
{
UIColor * colourOfArrow; 
CGPoint arrowPlacement; 
}
@property (nonatomic,strong) UIColor * colourOfArrow;
@property (nonatomic) CGPoint arrowPlacement; 

+ (Arrow *) createArrowWithColour :(UIColor *)paramColour andPosition :(CGPoint)      xPosition;

@end 
```

箭头.m

```
#import "Arrow.h"

@implementation Arrow
@synthesize colourOfArrow;
@synthesize arrowPlacement;

+ (Arrow *) createArrowWithColour :(UIColor *)paramColour andPosition :(CGPoint) xPosition
{
Arrow * tempArrow = [[Arrow alloc] init];
[tempArrow setColourOfArrow:paramColour];
[tempArrow setArrowPlacement:xPosition];

return tempArrow;
}

@end 
```

# objective-c - @property 目标-C

> ID：11406509
> 
> 赞同：2
> 
> 时间：2012-07-10T04:14:27.033
> 
> 标签：objective-c

我一直在关注一些教程，并且我对我的班级中的一个实例变量有疑问`@property`，这是另一个班级。

```
@interface Rectangle : NSObject{
    int width;
    int height;
    XYpoint *origin;
}

@property int width, height; 
```

我的`XYpoint`课程在另一个文件中，一切正常。但是在我一直关注的教程中，在主程序中，他们创建了一个“Rectangle *r”，并使用点语法和一个原始变量，就像这样：

```
r.origin = ****; 
```

我一直在寻找一种添加对象变量的方法，`@property`但我没有找到任何东西。我一直在尝试以多种方式添加它，但没有成功。我希望有人可以帮助我。

我尝试过添加另一个：

```
 "@property XYpoint *origin" and "@synthesize *origin" 
```

也没有星号，还有其他几种方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T04:23:30.007

您已经有一个实例变量`XYpoint *origin`，所以您想要创建一个由该实例变量支持的属性并合成它。我通常在 ivar 上使用下划线前缀，这样您就不会遇到令人困惑的阴影警告或意外引用错误的警告，但这取决于您。像这样的东西：

```
@interface Rectangle : NSObject {
    XYpoint *_origin;
}

@property (nonatomic, strong) XYpoint *origin;

@end

@implementation

@synthesize origin = _origin;

// rest of your class

@end 
```

现在使用该类时，您应该能够使用点语法引用该属性：

```
Rectangle *rect = [[Rectangle alloc] init];
XYpoint *pointFromRect = rect.origin; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T04:23:40.167

属性是objective-c 的基本组成部分，你应该在做任何其他事情之前掌握它们。你是否需要`*`你的财产取决于它是什么类型的变量。如果它是一个堆栈变量（struct、int、float 等），那么它通常不需要它。如果它是一个堆对象（任何类），那么它需要它。但是，您永远不需要`*`合成。此外，您不需要为它声明一个显式的 iVar，编译器会自动生成一个。这种情况已经有一段时间了。

阅读本-> [Objective-C 编程语言：声明的属性](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T04:25:13.413

使用@property 和@synthesize，您可以自动创建getter 和setter，以便您可以访问其他类的对象/变量。正如 wquist 所提到的，您的 @synthesize 不需要 asterix。看，您已经创建了宽度和高度的属性。他们有相同的目的，在其他类中访问。

# php - Facebook - How to request offline access to user_photos?

> ID：11406510
> 
> 赞同：0
> 
> 时间：2012-07-10T04:14:28.113
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

This is my current code to request permission to see email and user_photos

```
 'req_perms' => 'email,user_photos', 
```

I want to access user photos when the user is offline, I seem to remember this was possible but maybe I am wrong. Anyway if it's possible, how is it done?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T04:38:15.943

Hyunmin (in comments) has the right link.

As a very quick summary:

1.  log the user in normally; you'll get an access token. This may be a short lived or long lived (60 day) token - depends on login method being serverside or client-side (PHP or JS) but don't worry which you get.
2.  Note if you are worried: you can also check expiry if you like as the expiry is provided when you are given the access token. But I again skip this step.
3.  Once a day you can extend the token back ot the full 60 days. Simply call

    [https://graph.facebook.com/oauth/access_token](https://graph.facebook.com/oauth/access_token)?
    client_id=APP_ID& client_secret=APP_SECRET& grant_type=fb_exchange_token& fb_exchange_token=EXISTING_ACCESS_TOKEN

and you get back an access token (may or may not be the same). Just use/store this new access token in place of the old one.

Actually really simple - except for the bit of tracking the "once per day" upgrade bit. (And for now you can ignore this and call multiple times if needed - just slows things down fractionally.)

* * *

In response to comment - "how do you call that URL that gives you the token?"

You don't redirect the user as it's you that needs the response value, so you need to call it and handle it.

In PHP the simplest for testing (but not recommended) is to use

```
$response = file_get_contents($url); 
```

but on production systems you should usse CURL (as some production systems don't allow file_get_contents for external URLs). Either google for a CURL example, or you could tap into the makeRequest() function in the included facebook SDK libraries.

# icalendar - 如何在 iCalendar 中设置日期、时间和持续时间？

> ID：11406513
> 
> 赞同：0
> 
> 时间：2012-07-10T04:14:53.973
> 
> 标签：icalendar

我有这个事件：

```
BEGIN:VCALENDAR
PRODID:-//bashmoblie v0.1//NONSGML iCal Writer//EN
VERSION:2.0
CALSCALE:GREGORIAN
METHOD:PUBLISH
BEGIN:VEVENT
DTSTART:20120830T100000
DTEND:20121212T112000
DTSTAMP:20091130T213238Z
     UID:1285935469767a7c7c1a9b3f0df8003a@yoursever.com
     CREATED:20091130T213238Z
SUMMARY:Class: SOC 104  1 Lecture(1320)
LAST-MODIFIED:20091130T213238Z
     EQUENCE:0
     STATUS:CONFIRMED
SUMMARY:Class: SOC 104  1 Lecture(1320)
LOCATION:Title:  American Race Relations(Lecture)
TRANSP:OPAQUE
END:VEVENT
BEGIN:VEVENT
END:VCALENDAR 
```

它适用于日期范围和时间 08/30/2012 - 12/12/2012 和 10:00AM - 11:20AM。

我的实际要求是仅在数据范围 08/30/2012 - 12/12/2012 中将此事件设置为周二和周四。现在它每天都添加它一整天。我可以正确输入日期、时间和持续时间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T04:53:50.873

我认为您必须将重复规则（RRULE）添加到您的文件中。有关更多详细信息，您可以查看此[RRULE](http://www.kanzaki.com/docs/ical/rrule.html)。

# javascript - 在 body 上执行 DOM 操作时，DOMNodeInserted 的行为很奇怪

> ID：11406515
> 
> 赞同：0
> 
> 时间：2012-07-10T04:15:04.657
> 
> 标签：javascript, jquery, events, dom

以下代码用于在元素插入DOM 后对元素`DOMNodeInserted`执行 DOM 操作。`body`我知道`$(document).ready(function { });`足以完成这项工作，但我想测试该`DOMNodeInserted`事件。

```
<!DOCTYPE html>
<html lang="en">
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>
        function DOMmanipulation() {
            if (document.body) {
                document.removeEventListener('DOMNodeInserted', DOMmanipulation);
                // DOM manipulation start
                document.body.innerHTML = '<div class="wrapper">' + document.body.innerHTML + '</div>';
                // DOM manipulation end
            }
        }
        if (document.addEventListener) {
            document.addEventListener('DOMNodeInserted', DOMmanipulation);
        }
    </script>
</head>
<body>
    <p>Lorem ipsum dolor sit amet.</p>
</body>
</html> 
```

如您所见，DOM 操作是将所有`innerHTML`内容包装`body`到`<div class="wrapper"></div>`.

它确实有效。然而，奇怪的事情发生了。如果您使用 Firebug 或 Chrome 开发者工具检查被操纵的`body`，您会发现添加了一个神秘的元素。这是：

```
<div style="padding: 0px; margin: 1px 0px 0px; border: 0px none; visibility: hidden; width: 0px; height: 0px; position: static; top: 0px;"></div> 
```

尽管操作成功，但 Firebug 仍显示此错误：

*   未找到节点（jquery.min.js 第 2 行）

Chrome 开发人员工具显示此错误：

*   未捕获的错误：NOT_FOUND_ERR：DOM 异常 8（jquery.min.js 第 2 行）

但如果操作只是添加className，则没有错误：

```
document.body.className += ' js'; 
```

最奇怪的是，如果您删除 jQuery 引用，该事件将不起作用。这是否意味着本机`DOMNodeInserted`事件有时需要 jQuery 才能工作？

顺便说一句，如果 DOM 操作使用 jQuery 语法：

```
$('body').wrapInner('<div class="wrapper"></div>'); 
```

然后神秘元素变得更加诡异：

```
<div style="padding: 0px; margin: 1px 0px 0px; border: 0px; visibility: hidden; width: 0px; height: 0px; position: static; top: 0px; zoom: 1; ">
    <div style="position: absolute; top: 0px; left: 0px; width: 1px; height: 1px; padding: 0px; margin: 1% 0px 0px; border: 0px; visibility: hidden; ">
        <div style="position: relative; top: 0px; left: 0px; width: 1px; height: 1px; padding: 0px; margin: 0px; border: 5px solid rgb(0, 0, 0); display: block; overflow: hidden; ">
            <div style="padding: 0px; margin: 0px; border: 0px; display: block; overflow: hidden; "></div>
        </div>
        <table style="position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:5px solid #000;" cellpadding="0" cellspacing="0"><tbody><tr><td></td></tr></tbody></table>
    </div>
</div> 
```

综上所述，我们可以从上面的实验中看出三个问题：

*   添加了奇怪的元素
*   尽管 DOM 操作成功，但仍发生错误
*   `DOMNodeInserted`有时似乎需要 jQuery 才能工作

任何解释将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T05:53:45.477

jQuery 在加载后开始一些测试（未缩小版本中的第 1537 行）

```
// Run tests that need a body at doc ready
jQuery(function() {
var container, outer, inner, table, td, offsetSupport,
... 
```

为此，它添加了一个`div`带有一些样式的元素。那是你`mysterious`找到的元素。

由于您的事件处理程序，此元素被包装在另一个`div`. 在第 1654 行，jQuery 想要删除他们的测试元素

```
body.removeChild( container ); 
```

失败是因为`container`不再是 body 的子元素。

**编辑**
在您的示例中，您没有向 DOM 添加元素，因此事件无法触发；）

```
window.onload = function() {
    document.body.appendChild(document.createElement("div"));  // will fire DOMNodeInserted
} 
```

为什么它与 jQuery 一起“工作”？因为 jQuery 向 DOM 中添加了一个元素（神秘的测试元素）:)

# sql - SQL 服务器上运行缓慢的查询的警报

> ID：11406516
> 
> 赞同：0
> 
> 时间：2012-07-10T04:15:08.027
> 
> 标签：sql, sql-server, sql-server-2008, alert

我想创建一个运行查询的 SQL 作业，如果它需要一段时间才能向我发送电子邮件警报。任何想法如何做到这一点。我正在运行 SQL Server 2008。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T06:36:02.343

要测量特定查询的运行时间，您可以简单地在作业本身中捕获它，然后引发事件以触发代理失败警报，或者使用 dbmail 在 t-sql 中自己发送电子邮件：

```
declare @Elapsed int,
        @Start datetime = getdate();

--your query
waitfor delay '00:00:03'
--

select @Elapsed = datediff(ss, @Start, getdate());

raiserror('Query ran for %d sec(s)', 10, 1, @Elapsed) with nowait; 
```

这种方法的缺点是您必须实际完成查询才能测量运行时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T04:18:28.957

您可以安装[Nagios](http://www.nagios.org/)并编写一个测试来检查查询的运行时间，如果测试失败 - 向您发送电子邮件。我们曾经在我的公司做同样的事情，现在我们正在使用另一个（昂贵的）工具，称为[Event247](http://triggerplus.com/pages/en/products/event-management.php?lang=EN)

# android - Android 9 补丁工具：什么是新的布局边界功能？

> ID：11406521
> 
> 赞同：32
> 
> 时间：2012-07-10T04:15:35.913
> 
> 标签：android, nine-patch

我已经更新了 Android SDK 的 r20 并启动了 9 Patch 工具。

似乎有一个新功能 - 按住 Control 并单击添加了称为红色像素的布局边界。

我已经查看了[文档](http://developer.android.com/tools/help/draw9patch.html)，但它似乎已经过时了。

我的问题是，布局边界的用途是什么，使用它们的最佳方式是什么？

谢谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-07T22:15:20.630

编辑：在 Android 4.3（API 级别 18）中受支持。查看[wayne](https://stackoverflow.com/users/248002/wayne)的[更多最新答案](https://stackoverflow.com/a/18479445/517561)。

原文：它没有记录，因为它还不是操作系统的一部分，只是工具。Android 框架（从 Jellybean 4.1.1 开始）不使用用于设置布局边界的红色像素，因此此时不要设置它们。您可能会推测在图像上声明控件的布局边界应该是什么意思。并观看[http://android-developers.blogspot.com/](http://android-developers.blogspot.com/)以获取公告。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-08-28T04:26:14.897

它用于“光学边界布局”。更多细节可以在[Android 4.3 API 描述](http://developer.android.com/about/versions/android-4.3.html#OpticalBounds)中找到。摘抄：

> 对于包含九个补丁背景图像的视图，您现在可以指定它们应基于背景图像的“光学”边界而不是视图的“剪辑”边界与相邻视图对齐。
> 
> 例如，图 1 和图 2 均显示相同的布局，但图 1 中的版本使用剪辑边界（默认行为），而图 2 使用光学边界。由于用于按钮和相框的九个补丁图像包括边缘周围的填充，因此在使用剪辑边界时，它们似乎不会彼此对齐或与文本对齐。

# java - 启用后如何清除文本字段？

> ID：11406527
> 
> 赞同：0
> 
> 时间：2012-07-10T04:16:30.727
> 
> 标签：java, swing, textfield, jtextfield

文本字段被禁用并带有文本。

当我触摸一个按钮时，将启用文本字段进行编辑。

但是，我想在启用时清除文本字段。

一个限制是我不能向按钮添加任何其他侦听器。

有没有人可以回答我的问题？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T04:18:28.777

试试这个..

**在启用文本字段的按钮侦听器中**，在启用语句之后，只需添加`mytext.setText("");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T05:02:34.133

您可以附加一个属性侦听器并侦听“启用”事件

```
field.addPropertyChangeListener("enabled", listener); 
```

这根本不需要你搞乱这个领域......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T04:20:15.330

检查here，这是您问题的答案。你只需要一些修改...

[带有输入提示的 Java JTextField](https://stackoverflow.com/questions/1738966/java-jtextfield-with-input-hint)

# javascript - ExtJs 按钮焦点

> ID：11406528
> 
> 赞同：0
> 
> 时间：2012-07-10T04:16:32.287
> 
> 标签：javascript, button, extjs, internet-explorer-8, focus

我有一个带有文本字段和按钮的 ExtJs 表单。当我使用制表键聚焦表单中的元素时，光标移动到下一个字段，当涉及按钮时，焦点在 IE8 中不可见。对于用户来说，这将是一种误导，因为焦点在按钮上不可见。在 Firefox 中，焦点在按钮上可见。仅在 IE8 中发生这种情况有什么特殊原因吗？

我正在使用 ExtJs 3.3.4。

请帮助各位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:08:00.667

为此，我们需要为焦点按钮覆盖 extjs css，如下所示，

```
.x-btn BUTTON:focus { 
  outline: thin dotted invert;
} 
```

这是在 IE 和 Firefox 中的按钮上方显示一条矩形虚线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T00:02:13.407

就像在 IE 和 FF 中的魅力一样，但由于某种原因，大纲属性没有显示使用 Chrome，使用您的解决方案与其他 css 属性作为边框没有问题。

# git - Git签署除gpg之外的标签/提交

> ID：11406529
> 
> 赞同：0
> 
> 时间：2012-07-10T04:16:54.893
> 
> 标签：git, git-sign

在 Git 中，我们可以使用 Entrust Digital SW 代替 gpg 来签署标签和提交吗？

需要你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:18:09.733

我不相信`git tag -s`并`git tag -v`允许除 GPG 之外的任何密钥（但我可能是错的）。从手册页：

```
-s, --sign
    Make a GPG-signed tag, using the default e-mail address's key. 

-v, --verify
    Verify the gpg signature of the given tag names. 
```

那些书面的、带注释的标签，即那些使用`git tag -a <tagname>`允许任意消息生成的标签，就像提交一样。您没有理由不能将密钥粘贴到消息中，然后您的上游维护人员（或进行检查的任何人）只需手动验证密钥即可。您可以使用 获取消息`git show <tag>`，编写验证脚本应该不难。

# c++ - C++ 控制台应用程序运行

> ID：11406531
> 
> 赞同：1
> 
> 时间：2012-07-10T04:17:23.463
> 
> 标签：c++

我对编程很陌生，过去一周左右一直在学习 C++ 教程。今天，我决定在没有帮助的情况下制作自己的控制台应用程序，以确保我已经掌握了到目前为止所阅读的所有概念。该应用程序一开始会要求您将 5 个不同的单词放入一个 5 元素数组中。然后，您会看到一个菜单，其中提供 4 个选项：打印数组的内容、再次重新输入所有单词、仅编辑一个数组元素或退出应用程序。

当我选择“只编辑一个数组”选项时，应用程序会提供另一个菜单，要求您按“1”来打印数组，或者按任何其他键继续编辑。直接编辑选项会导致程序启动的混搭版本，使用“1”选项会导致混乱：http: [//i.imgur.com/3isTD.jpg](http://i.imgur.com/3isTD.jpg)。控制台继续在屏幕上打印与图片中的对象相似的对象约 5 秒钟，直到弹出窗口提示我结束进程。应用程序关闭后，我在输出日志中收到此信息：pastebin.com/KcRU56Tg

我的应用程序的源代码可以在这里找到：http: [//pastebin.com/vRUddYuK](http://pastebin.com/vRUddYuK)。我通常会尝试自己调试（过去一个半小时一直在调试），但我觉得这超出了我的想象。任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T04:25:08.797

`do { ... } while`进行迭代时应避免使用语句。像你一样犯逻辑错误太容易了。

请注意， PrintInv 正在执行它的 cout 语句 when `n == 5`，这是一个错误，因为 inv 只有索引的有效元素`0...4`。

重写你的迭代

```
for(int i=0;i < 5;++i) 
```

并且您的逻辑会更清晰，并且错误发生的可能性会更小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T04:23:04.327

您似乎将一个`n`等于 5 的值传递给`PrintInv`. 然后，您访问`inv[n]`，即 inv[5]，它超出了 5 元素数组的范围。不幸的是，这不会导致您的程序崩溃。相反，它只是转储大量内存，直到它碰巧来自随机 NULL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T04:46:19.207

你的变量`i`和`n`是多余的；您只需要其中一个变量。

当您调用等于 5的`PrintInv`函数并且数组的打印值超过数组末尾时，就会出现问题，因此您会看到正在打印的垃圾值。`n``PrintInv`

您应该将打印功能更改为如下所示：

```
// pass the array and the size of the array to your print function
void printInv(string inv[], int arrSize) {
   for(int i = 0; i < arrSize; ++i) { 
      cout << "Item " << (i + 1) << ": " << inv[i] << endl;
   }
} 
```

并像这样调用函数：

```
printInv(inv, 5); 
```

此外，变量应该在它们需要的范围内声明。您不需要在 main 函数的开头声明每个变量。

# audio - 声音云自定义播放器未播放

> ID：11406536
> 
> 赞同：1
> 
> 时间：2012-07-10T04:18:21.703
> 
> 标签：audio, streaming, audio-streaming, soundcloud

[我正在尝试按照此处](http://developers.soundcloud.com/docs/custom-player#)的说明设置示例 Sound Cloud 播放器。我最终得到一个如下所示的 index.html 页面：

```
<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>Sample SC</title>
    <link rel="stylesheet" href="css/sc-player-standard.css" type="text/css">
    <script type="text/javascript" src="http://code.jquery.com/jquery.js"></script>
    <script type="text/javascript" src="js/soundcloud.player.api.js"></script>
    <script type="text/javascript" src="js/sc-player.js"></script>
  </head>
  <body>
    <a href="http://soundcloud.com/matas" class="sc-player">My latest tracks</a>
  </body>
</html> 
```

当我加载页面时，一切看起来都是正确的并且看起来功能正常（即：您可以选择曲目，然后单击“播放”图标将其变为“暂停”图标，我可以看到封面艺术），但没有音频播放并且经过赛道的时间永远不会开始。我只是通过 python 服务器查看本地机器上的页面。还有什么我应该做的吗？

在此先感谢，
丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:30:13.703

你使用的是什么浏览器？我复制并粘贴了您的代码，并在 Mac OS X 上的 Safari、Firefox 和 Chrome 以及 iOS 上的 Safari 中进行了测试。试试这个版本，看看它是否适合你：

[http://dl.dropbox.com/u/14333604/demos/custom-player/index.html](http://dl.dropbox.com/u/14333604/demos/custom-player/index.html)

如果可行，请发表评论，我将用其他一些关于调试的想法来编辑我的答案。

# iphone - 如何将视频自动旋转为横向？

> ID：11406541
> 
> 赞同：1
> 
> 时间：2012-07-10T04:18:40.120
> 
> 标签：iphone, objective-c, video, xcode4.3

视频按钮位于导航栏的 ViewController 中，按下该按钮后，它将立即以纵向模式显示视频。如果我手动旋转它，它只会在风景中。如何在按下按钮后立即以横向模式观看视频？我需要 ViewController 处于纵向模式，只有视频处于横向模式。

这是 ViewController.m 文件：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

-(IBAction)backbutton
{
    ChapterTableViewController *chapterTable = [self.storyboard instantiateViewControllerWithIdentifier:@"chapterTable"];

    [self.navigationController presentModalViewController:chapterTable animated:YES];
}

-(IBAction)playvideo
{
    NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                        pathForResource:@"One Piece Episode 180" ofType:@"mp4"]];

    MPMoviePlayerViewController *playercontroller = [[MPMoviePlayerViewController alloc] initWithContentURL:url];

    [self presentMoviePlayerViewControllerAnimated:playercontroller];
    playercontroller.moviePlayer.movieSourceType = MPMovieSourceTypeFile;
    [playercontroller.moviePlayer play];
    playercontroller = nil;
} 

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:39:20.937

```
[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeRight animated:NO];

[[self view] setBounds:CGRectMake(0, 0, 480, 320)];
[[self view] setCenter:CGPointMake(160, 240)];
[[self view] setTransform:CGAffineTransformMakeRotation(M_PI / 2)]; 
```

对于全屏播放，请使用 MPMoviePlayerViewController，然后使用 MPMoviePlayerViewController 类上的“shouldAutorotateToInterfaceOrientation”方法使其以横向格式启动和播放。

它看起来像这样：

```
[yourInstanceOfMPMoviePlayerViewController shouldAutorotateToInterfaceOrientation: UIInterfaceOrientationLandscapeRight]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T05:50:54.313

请尝试这个 ViewController.m 以及这个 ViewController 被推送的视图

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-10T08:32:25.657

您可以选择他想在 ViewController 文件中以哪种模式录制视频的用户天气，然后您可以检查视频控制器中的以下情况，这样您就可以解决您的问题。这对我有用。

```
- (int)deviceOrientationDidChange
{   
    UIDeviceOrientation deviceOrientation = [[UIDevice currentDevice] orientation];
    int val;
    if (deviceOrientation == UIDeviceOrientationPortrait){
        orientation = AVCaptureVideoOrientationPortrait;
        val=1;
        NSLog(@"AVCaptureVideoOrientationPortrait");
    }
    else if (deviceOrientation == UIDeviceOrientationPortraitUpsideDown){
        orientation = AVCaptureVideoOrientationPortraitUpsideDown;
        val=2;
        NSLog(@"AVCaptureVideoOrientationPortraitUpsideDown");
    }

    // AVCapture and UIDevice have opposite meanings for landscape left and right (AVCapture orientation is the same as UIInterfaceOrientation)
    else if (deviceOrientation == UIDeviceOrientationLandscapeLeft){
        orientation = AVCaptureVideoOrientationLandscapeRight;
        val=3;
        NSLog(@"AVCaptureVideoOrientationLandscapeRight");

    }
    else if (deviceOrientation == UIDeviceOrientationLandscapeRight){
        orientation = AVCaptureVideoOrientationLandscapeLeft;
        val=4;
        NSLog(@"AVCaptureVideoOrientationLandscapeLeft");

    }
    return val;
    // Ignore device orientations for which there is no corresponding still image orientation (e.g. UIDeviceOrientationFaceUp)
} 
```

# javascript - 列出数组中的元素

> ID：11406544
> 
> 赞同：0
> 
> 时间：2012-07-10T04:19:03.787
> 
> 标签：javascript, arrays, json, recursion, hash

我正在尝试将值存储在 javascript 对象表示法中。我已经做了一些编程，并将所有出现的内容存储到一个用逗号分隔的字符串中，如果我试图查找的术语是一个数组，我会得到 [object object] 作为回报，因为它是一个数组。我想知道如何将该数组中的所有项目存储到一个用逗号分隔的变量中，例如，如果我选择“时间”，那么它应该返回`Dec 9, 1, 2012`

我到达的部分返回值，如果它是一个非数组，[http://jsbin.com/obehog/3/edit](http://jsbin.com/obehog/3/edit)

并且数组的深度可能会改变，在每种情况下都不相同。所以通过循环将不起作用..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T08:13:54.843

如果选择“时间”，则结果是一个数组，例如：

```
[[{
    "term": "Dec 9",
    "Dec_9": [{
        "count": 1,
        "term": "2012"
    }]
}]] 
```

如果你想要一个类似的结果`Dec 9, 1, 2012`，你需要一个将对象解析为字符串（或字符串数​​组）的方法，代码如下：

```
function valuesOfObj(obj, result) {
    result = result || [];
    if (typeof obj === 'object') {
        for (var k in obj) {
            if (obj.hasOwnProperty(k)) {
                arguments.callee(obj[k], result);
            }
        }
    } else {
        result.push(obj);
    }
    return result;
}

console.log(valuesOfObj([{
    "term": "Dec 9",
    "Dec_9": [{
        "count": 1,
        "term": "2012"
    }]
}]).join(', ')); // -> Dec 9, 1, 2012 
```

完整的[演示](http://jsbin.com/exuwet/edit#javascript,live)

顺便说一句，你做的很好，还有一些其他的实现，比如[jsonselect](http://jsonselect.org/#tryit)和[JSONQuery](https://github.com/jcrosby/jsonquery)，希望对你有用。

# php - 使用依赖于首先提交的另一个提交按钮

> ID：11406547
> 
> 赞同：0
> 
> 时间：2012-07-10T04:19:51.163
> 
> 标签：php, html, forms

我对 PHP 比较陌生，在一个不相关的领域工作了几年后，我回到了学校。我正在为我爸爸做一个外部项目，并且遇到了表面上看起来很容易解决但我似乎无法解决的问题。

在有问题的页面上，它显示了一个联赛中的球员名单和他们的得分。它下面的表格有一个文本框，允许您输入名称和三个按钮；第一个添加名称作为玩家（默认得分为 0），从玩家列表中删除该玩家，第三个用于调整该玩家的分数。我让前两个（“添加”和“删除”）按我的意愿工作，但是我遇到的问题是分数调整一个。

如果您单击“调整分数”按钮，它会显示一个新的文本框以输入分数以及另一个按钮以实际提交分数。问题是当您按下新按钮来调整分数时*没有任何*反应，此时我刚刚得到了一个测试“回声”语句，应该在提交时显示，但这并没有发生。下面是有问题的代码。关于如何解决的任何想法？感谢您的任何建议。

```
<html>
<head>
    <LINK REL="stylesheet" type="text/css" href="styles/footballTest.css" />
    <title>VFW Football testing</title>
</head>
<body>
    <?php
        $dbConnect = mysql_connect("localhost", "root","");
        $dbName = "vfwleaguetest";
        $getPlayers = "SELECT * FROM `players`";
        if(!$dbConnect)
        {
            echo "<p>Connection failed</p>";
        }   
        if(mysql_select_db($dbName, $dbConnect) === false)
        {
            echo "<p>Could not select the database ".$dbName ."<br/>".mysql_error($dbConnect)." </p>";
        }
        if(isset($_POST['submit']))
        {
            $name=@$_POST['nameAdd'];
            $playerAdd = "INSERT INTO `vfwleaguetest`.`players` (`playerName`, `seasonTotal`) VALUES ('".$name."', '0')";
            if(mysql_query($playerAdd, $dbConnect) === false)
            {
                echo "<p>Error adding player to database: ".mysql_error($dbConnect)."</p>";
            }
        }
        unset($_POST['submit']);
        if(isset($_POST['delete']))
        {
            $name= @$_POST['nameAdd'];
            $playerDelete = "DELETE FROM `vfwleaguetest`.`players` WHERE `players`.`playerName` = '".$name."'";
            if(mysql_query($playerDelete, $dbConnect) ===false)
            {
                echo "<p>Error deleting player to database: ".mysql_error($dbConnect)."</p>";
            }
            else
            {
                echo $name." successfully removed from player list";
            }
        }
        if(isset($_POST['adjust']))
        {
            ?>
            <br/>
            <input type='text' name='scoreAdjust' size=5 />&nbsp;
            <input type='submit' name='fixScore' value='new season total for <?php echo $_POST['nameAdd'];?>' />
            <?php
            if(isset($_POST['fixScore'])) //THIS IS WHERE THE PROBLEM SEEMS TO LIE
            {
                echo "after fixScore click";
                //add sql below
            }
        }   
    ?>
    <form name="players" action="" method="post">
    <?php
        $playerList = mysql_query($getPlayers, $dbConnect);
        echo "<table><th><tr>";
        echo "<td>Player name</td><td>Season total</td></tr></th>";
        while(($row = mysql_fetch_row($playerList)) != false)
        {
            echo "<tr><td>$row[0]</td><td>$row[1]</td></tr>";
        }
        echo "</table>";
    ?>
    Manage players&nbsp;<input type="text" name="nameAdd" />&nbsp;
<input type="submit" name="submit" value="add" />&nbsp;
<input type="submit" name="delete" value="delete" />&nbsp;
<input type="submit" name="adjust" value="adjust score" />
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:26:53.810

您的`<input>`元素`scoreAdjust`需要在`<form>`正在提交的元素内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T04:29:31.310

使用此代码：

```
 <br/>
            <form method="post">
                <input type='text' name='scoreAdjust' size=5 />&nbsp;
                <input type='submit' name='fixScore' value='new season total for <?php echo $_POST['nameAdd'];?>' />
            </form>
            <?php
            if(isset($_POST['fixScore'])) //THIS IS WHERE THE PROBLEM SEEMS TO LIE
            {
                echo "after fixScore click";
                //add sql below
            } 
```

对于要提交到 的字段`$_POST`，它需要在`form`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T04:31:48.020

问题是分数调整输入不符合格式：

```
<input type="text" size="5" name="scoreAdjust">
<input type="submit" value="new season total for aaa" name="fixScore"> 
```

你需要：

```
<form method="post" action=''>
  <input type="text" size="5" name="scoreAdjust">
  <input type="submit" value="new season total for aaa" name="fixScore">
</form> 
```

# php - 找出 html.tpl.php 中的父链接

> ID：11406550
> 
> 赞同：0
> 
> 时间：2012-07-10T04:20:10.783
> 
> 标签：php, html, api, drupal, background

有没有办法弄清楚html.tpl.php中父页面的标题是什么？我问是因为我根据页面上选择的父链接更改背景图片。希望有意义，网址是：http: [//quaaoutlodge.com/drupal-7.14/](http://quaaoutlodge.com/drupal-7.14/)

谢谢，罗恩

* * *

不知道如何做到这一点......不得不修改我的架构并采取必要的步骤来完成我想做的事情......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:10:06.383

PHP 是一种服务器端编程语言。当用户请求页面时，服务器为该页面执行 PHP 并将生成的 HTML 发送给用户。PHP 通信只能以这种方式发生。用户只能看到生成的 HTML。如果用户需要与 PHP 交互（例如更改页面输出），则用户必须发起另一个页面请求。

Javascript 是一种客户端编程语言。在正常的服务器环境中，Javascript 的执行只发生在用户的机器上（不在服务器上）。在 PHP 执行期间不会发生 Javascript 执行，因此您不能将 Javascript 代码与 PHP 代码混合。Rab 使用 Javascript 的建议没有回答您的问题，您对他的回复是试图将 Javascript 与 PHP 混合。

在 Drupal 术语中，您可以通过有组织的菜单访问站点上的节点集合。每当用户查看特定一级菜单项的子页面时，您都希望更改页面上的特定图像（我将假设 Quaaout Lodge 徽标）。例如，查看“我们的历史”或“到达这里”将加载（而不是默认的 Quaaout Lodge 徽标）以某种方式连接到“The Lodge”的父项的不同图像。

由于您似乎对 Drupal 不太熟悉，因此最简单的解决方案之一是将图像指定为`background-image`CSS 中的属性而不是`img`元素。每个页面都应该有一个应用于`body`其页面元素的唯一类属性。例如，在“我们的历史”页面上，应用于`body`元素的类之一是`page-node-7`. `page-node-7`不适用于 Drupal 中的任何其他页面。您可以快速查找每个页面的唯一类并添加 CSS 属性以更改每个页面`background-image`等。如果您想使用此方法但使其更简洁，您可以使用[Node Class 模块来改进它](http://drupal.org/project/node_class)将自定义类应用于每个页面。您可以为您在“The Lodge”菜单项下创建的每个页面添加一个“lodge-image”类。这将使内容编辑器可以更改特定页面的图像，而无需任何人直接修改 CSS。我假设（我可能错了）Drupal7 中的 Node Class 模块会将一个类添加到 body 元素以及节点的 HTML 容器中。

或者，更好的解决方案是使用 Drupal 模块根据某些菜单或路径条件选择徽标。这些仅在使用 Drupal 中的徽标配置选项（在外观设置中）设置图像时才有效。最合适的模块可能是[Logo Tool](http://drupal.org/project/logotool)，但它还没有为 Drupal7 开发，所以它还不是一个选项。Subsites[模块](http://drupal.org/node/1260500)有一个 Drupal7 版本正在开发中。通常不建议在生产站点上使用开发版本，但似乎值得一试。

其他一些*更好*但更困难的方法是：在 template.php 预处理函数中覆盖/设置徽标，编写一个新模块来设置徽标或创建自定义图像块（并向您的显示块的主题），自己将 Logo Tool 转换为 Drupal7，编写一个新模块来自动为页面的菜单祖先的 body 元素添加一个类属性（CSS 方法，除了创建菜单项之外不需要额外的操作），以及还有几个我能想到的。

所以你有很多选择。

# c# - 在一个类中处理多个方法的最佳方法是什么？

> ID：11406553
> 
> 赞同：1
> 
> 时间：2012-07-10T04:20:20.400
> 
> 标签：c#, oop, design-patterns

我正在用 C# 制作服务器，并且我有一个单例来处理数组中的所有登录用户。该数组是一个名为 UserSession 的类的数组。

这个 UserSession 类有一个在处理该用户传入数据包的单独线程上运行的方法。

好吧，考虑一下这段代码：

```
class UserSession
{
    public UserSession(TcpClient client)
    {
        var thread = new Thread(new ParameterizedThreadStart(HandleComm);
        thread.Start((object)client);
    }

    public void HandleComm(object tcpClient)
    {
        TcpClient client = (TcpClient)tcpClient;
        NetworkStream stream = client.GetStream();
        while(1 == 1)
        {
            byte[] buffer = new byte[4096];
            stream.Read(buffer, 0, buffer.Length);
            int testShort = Convert.ToInt32(buffer);
            switch((ActionEnum)testShort)
            {
                case ActionEnum.Something:
                    // here is my problem!
                    // do some more parsing of the message
                    this.DoSomething(SomethingStruct argument); // argument taken from the byte array
                    break;
                case ActionEnum.AnotherSomething:
                    // the same as before
                    break;
                // and this goes on and on
            }
        }
    }
} 
```

处理所有这些单独的枚举而不在该类上重复使用 80 多个方法的最佳方法是什么？（ActionEnum 是一个带有当前用户特定操作的枚举）。

我序列化了那个缓冲区，我只是让代码快速让你有一个想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:11:38.227

所以：你基本上试图这样做，所以将数字代码转换为方法的调用。

有些事情您无法获得，例如自动为您完成此转换。如果您改为传输方法的名称，则可以使用反射来查找该方法，然后调用它。因此，您必须做一些手动工作来建立映射。

你必须决定的是将数字映射到方法的最佳方式。

一种方法是您现在使用的方法。这里的映射发生在调度周期内（获取编号、翻译、调用）。问题是映射代码掩盖了调度代码。还涉及相当多的样板代码。

您可以使用命令模式和哈希映射的组合，如下所示：

在设置期间：

1.  为您的命令创建一个通用接口（或使用闭包，因为您使用的是 C#）
2.  创建一个实现接口 pr 的对象实例。您要映射的方法
3.  将其添加到哈希图中。

在调度循环中：

1.  取号
2.  在哈希表中查找数字
3.  如果找到，调用映射对象，否则失败

对于更灵活的方法，将数字视为必须处理的消息，并使用模式责任链。

命令模式[http://en.wikipedia.org/wiki/Command_pattern](http://en.wikipedia.org/wiki/Command_pattern)

责任链[http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T04:47:50.480

一如既往，有很多可能的答案。我在构建客户端/服务器游戏时遇到了这个问题。我从几十个用于动作/事件/消息的枚举开始，然后意识到当你进入大量动作时它不是很可持续。

所以这就是我用伪代码粗略地做的事情。

```
 NetworkClass 
    {
       RegisterChannel(objUsingChannel,typeOfChannel, callbackForChannel, expectedReturnType){/*...*/};

       PushChannelMsg(channelID, dataToSend)

       ReceiveMessageFromNetwork(msg){  Read data from network, which also contains channelID, and send it to any matching channelID}  
       //If there is no channel registered for a data that is received,  just ignore it
    }

EnemyTurretObject
{
   //Register the rotation channel and listen for rotation changes
   NetworkClass.RegisterChannel(this, channels.TurretRotated + this.ID, callback=HandleTurretRotated, doubleReturnType)

   HandleTurretRotated(double rot)
   {  rotate the turret  }
}

FriendlyTurretObject
{
   //Register two channels that we'll send data across
   NetworkClass.RegisterChannel(this, channels.TurretFired + this.ID, callback=null, MissleFiredData)
   NetworkClass.RegisterChannel(this, channels.TurretRotated + this.ID, callback=null, doubleDataType)

   FireMissle()
    {
       NetworkClass.PushChannelMsg(channels.TurretFired + this.ID, new MissleFiredData(x,y)) 
    }

    RotateTurret()
    {
      NetworkClass.PushChannelMsg(channels.TurretRotated + this.ID, newTurretRotationValue) 
    }

} 
```

我基本上避免了大量的枚举，并进行了更通用的设置，以便每个对象负责它自己的数据、通道等。这是一种更加灵活的方法，并且更改一个枚举并不会破坏一切。网络类甚至不需要知道正在发送的数据中有什么，它现在只是一个管道。

# javascript - 通用 HTML 表单验证，首选 jQuery

> ID：11406556
> 
> 赞同：0
> 
> 时间：2012-07-10T04:20:32.050
> 
> 标签：javascript, jquery, html, jquery-plugins

我想以最常见的方式进行表单验证。有没有这样的工具，也许是 jQuery 插件？

例如，对于以下规则：

1.  所有文本框不应为空
2.  如果选中“显示许可证”复选框，则也应选中“我接受”。

验证表达式将像 ' `input:text:[value=""], input:checkbox:checked#showlicense ? input:checkbox:unchecked#iaccept : nothing`'。

我很乐意在 jQuery 选择器上实现这一点（返回无效控件），但我不知道如何实现条件。

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T04:22:53.050

寻找 jquery validate 插件，它已经在那里了..

[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T04:27:13.640

```
function validate(){
var flag = true;
$('#yourformid > input').each(function(){
 if($(this).val() == ""){
   flag = false;
 }
});

if($('#showlicense ').is(':checked')){
   flag = false;
    if($('#iaccept').is(':checked')){
       flag = true;
    }

}
 return flag;

} 
```

用法

```
<form onsubmit="return validate()" ....> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T13:43:16.043

我发现 jQuery 选择器可以轻松定制：

[http://james.padolsey.com/javascript/extending-jquerys-selector-capabilities/](http://james.padolsey.com/javascript/extending-jquerys-selector-capabilities/)

我将根据返回“无效”控件的 :if-modified jQuery 选择器表达式创建自己的验证器。

# php - php中基于网络广播的网站

> ID：11406558
> 
> 赞同：0
> 
> 时间：2012-07-10T04:20:54.613
> 
> 标签：php, html, video-streaming, video-capture

我有一个客户的要求是他想要一个能够通过搜索流式传输上传视频的网站。最苛刻的要求是他们每周都会举办某些活动，并且他们希望将这些活动覆盖并记录在相机上，并且该视频应该在网站上实时可见。

我知道如何用 php 制作网站，但我不知道基于网络广播的网站的要求是什么，特别是摄像头和带宽要求。

```
Also what are the requirements and methods for a website which can stream videos uploaded on server.I am totally new to video streaming and don't know how to do it in php. 
```

请解释一下实现它的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:07:44.710

尝试 HTML5 网络摄像头捕获。

它在 Google IO 期间被突出显示。

我认为你需要谷歌的方法。我还没有真正使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-02T22:52:56.550

作为 Red5 的替代品，可能更适合您尝试做的事情是 Nginx-RTMP 模块。[https://github.com/arut/nginx-rtmp-module](https://github.com/arut/nginx-rtmp-module)如果您当前使用或可以使用 Nginx，该模块易于配置和使用。它可以通过 RTMP 接受实时视频并将其提供给 JWplayer 等基于 Flash 的播放器，同时创建 HTTP 实时流以在 Apple 设备（以及 ROKU 等其他设备）上播放。

我在几台服务器上设置了它，并且对结果非常满意。它通过 RTMP 接受视频，并且做得很好恕我直言。

使用 Nginx-RTMP，我使用运行 ffmpeg 的脚本将预先录制的文件“实时”流式传输到服务器。然后，当我们真的想要一个真正的实时视频源时，只需停止 ffmpeg 并使用运行 ffmpeg 的计算机（例如从带有视频源的工作室），或者使用手机或平板电脑上的 OSBroadcaster，从我们的实时位置进行流式传输，或者实际上任何可以通过 RTMP 流式传输视频的软件或应用程序。

您可以使用一些 PHP 后端自动执行所有这些操作，因此您预先录制的材料会自动存储在服务器上（Nginx-RTMP 也可以录制您的流）并在 HTML5 视频元素或基于 Flash 的视频中显示在适当的页面上播放器，或两者兼而有之。并且当实时提要实际上是实时的时，您可以让 PHP 在您的页面上显示一个播放器窗口来显示实时流。

当然，这被过度简化了，但希望你能对它的工作原理有所了解。

有关Nginx-RTMP 模块的更多信息，另请参阅[如何使用 nginx 设置您自己的私有 RTMP 服务器。](https://obsproject.com/forum/resources/how-to-set-up-your-own-private-rtmp-server-using-nginx.50/)

至于相机，这完全取决于情况，那是一个完全不同的领域。您可以使用网络摄像头，或通过 RTMP 流式传输的平板电脑/智能手机，或输入运行 RTMP 客户端流媒体（如 ffmpeg）的计算机的专业摄像头（我认为 VLC 也可以）。或者，Teradek 和其他一些公司制造了一些小硬件盒 (Teradek Vidiu)，您可以将其插入视频输入，然后他们将通过 RTMP 对视频进行编码和流式传输到您指定的任何服务器。

带宽取决于很多因素：您将拥有多少观众、视频质量和分辨率，以及您需要支持多少同步流（来自不同位置的多个直播流等）

您的上传带宽（相机到您的流媒体服务器）的范围可以从 100kbps 左右到几 Mbps，具体取决于您的视频要求。不过，举一个典型的例子，如果您以每秒 24-30 帧的速度流式传输标清视频，并使用像 h.264 这样的良好编解码器，您可以预期一个质量不错的流将占用大约 400-700kbps。它可能与此有很大不同，但这是一个很好的起点。如果您发送 720p30，您可能需要使用大约 1-1.5Mbps 左右。1080p30，可能是 1.5-3Mbps，超高清，5-6Mbps。但就像我说的那样，您选择的比特率将根据您的质量需求而有所不同。

然后，您流出的内容，将该速率乘以您想要支持的观众数量，再为您的上传流添加一个，您就拥有了所需的总带宽。还有其他事情需要考虑，但你有你的出发点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T17:47:20.753

我做了很多研究，发现我们必须使用闪存类型的服务器。为此，我们有 2 个选择：RED5 和 Flash。RED5 是开源的，而 Flash 不是免费的。对于此类网络广播，我们需要安装此类服务器，然后使用适当的 API 并将 Flash 播放器嵌入到您的网页中。这些特殊的服务器是必需的，因为我们需要在不刷新页面的情况下处理请求，然后动态加载内容。

# c++ - C++ 将数字转换为单词

> ID：11406559
> 
> 赞同：-1
> 
> 时间：2012-07-10T04:21:20.013
> 
> 标签：c++, digits

我认为我的逻辑是正确的，但是 while 无限循环，输出为零。这是我的代码：

```
int currentMSD, currentNum = num;
if (currentNum >= 0 && currentNum < 100) {
    currentMSD = 10;
} else if (currentNum >= 100 && currentNum < 1000) {
    b1 = b * msd;
    b2 = num3 - b1;
    num3 = b2;
    switch(b) {
        case 1:
            cout << "one ";
            break;
        case 2:
            cout << "two ";
            cout << "five ";
            break;
        case 6:
            cout << "six ";
            break;
        case 9:
            cout << "nine ";
            break;
        case 0:
            cout << "zero ";
          break;
        }
    }
    cout << '\n';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T04:28:43.897

您期望 250 之类的输出是什么类型的？“二五零”？

这是一个简单的例子：

```
#include <iostream>

const char* nums[] = {"zero", "one", "two", "three", "four", 
                      "five", "six", "seven", "eight", "nine"};

void getMSD(unsigned int num)
{
    unsigned int remainder = num % 10;
    unsigned int result = num / 10;

    if(result > 0)
        getMSD(result);

    std::cout << nums[remainder] << " ";
}

int main()
{
    getMSD(125); //prints "one two five"

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T04:33:42.123

在您的`getMSD`函数中，您需要检查个位：

```
int getMSD(int num) {
    int currentMSD, currentNum = num;

    if (currentNum < 10) {
        currentMSD = 1;
    } else if (currentNum >= 10 && currentNum < 100) {
        currentMSD = 10;
    } else if (currentNum >= 100 && currentNum < 1000) {
        currentMSD = 100;
    } else if (currentNum >= 1000 && currentNum < 10000) {
        currentMSD = 1000;
    }
    return currentMSD;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T04:36:00.340

问题是您没有在“getMsd”函数中检查 1 - 9 的数字。但是，我不建议您使用此逻辑，因为它不可扩展。我的意思是您不能将此代码用于 6 位数字

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T04:47:18.473

`getMSD()`功能有问题。用这个新的替换它

```
int getMSD(int num) {

int currentMSD = 1, currentNum = num;

if (currentNum >= 10 && currentNum < 100)
{
    currentMSD = 10;
}
else if (currentNum >= 100 && currentNum < 1000)
{
    currentMSD = 100;
}
else if (currentNum >= 1000 && currentNum < 10000)
{
    currentMSD = 1000;
}
return currentMSD;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T05:16:21.533

你犯了一个逻辑错误。根据您的逻辑，您有 250 作为输入，

```
msd = 100 , then b = 250/100 = 2.5 = 2 which should output 'two'
b1 = msd * b = 100 * 2 = 200
b2 = num - b1 = 250 - 200 = 50
num = b2 = 50
repeat
msd = 10, then b = 50/10 = 5 which should then output 'five'
b1 = msd * b = 50
b2 = num - b1 = 50 - 50 = 0 
```

如果输入为 250，但当您的输入为 205 时，此逻辑工作正常，它永远不会打印“零”，因为当您减去时，`num - b1` `205-200`您将得到 5。

就您的程序而言，您正在滥用`while`条件，因为根据您的条件，`while (num3 > 0)`此条件将永远不会打印最后一位。

希望你能明白我的意思。:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-18T09:46:56.353

做更多控制（美化）：

```
int getMSD(const int& num) {
   int currentMSD = 1;
   const int N = 3;  
   for(int j = 1, i = 1; j != N; ++j, i * 10) {
      if(num >= 10 * i && num < 100 * i) {
          currentMSD = 10 * i;
       }
   }          
   return currentMSD;
} 
```

# wpf - WPF调试数据绑定-附加到进程时VS2008输出窗口没有输出

> ID：11406560
> 
> 赞同：1
> 
> 时间：2012-07-10T04:21:34.020
> 
> 标签：wpf

朋友们 。我正在根据[此](http://bea.stollnitz.com/blog/?p=52)调试 WPF 数据绑定。我在我的 xaml 中添加了 PresentationTraceSources.TraceLevel。

```
<Window …
xmlns:diagnostics="clr-namespace:System.Diagnostics;assembly=WindowsBase"
/>

<TextBlock Text="{Binding Path=Caption, diagnostics:PresentationTraceSources.TraceLevel=High}" … /> 
```

如果我通过按 F5 在 VS2008 中启动我的 WPF 应用程序，在输出窗口中，我确实看到了数据绑定详细信息：

```
System.Windows.Data Warning: 47 : Created BindingExpression (hash=25209742) for Binding (hash=3888474)
…
System.Windows.Data Warning: 91 : BindingExpression (hash=25209742): GetValue at level 0 from Star (hash=31609076) using RuntimePropertyInfo(Caption): ‘ ‘
System.Windows.Data Warning: 71 : BindingExpression (hash=25209742): TransferValue – got raw value ‘ ‘
System.Windows.Data Warning: 78 : BindingExpression (hash=25209742): TransferValue – using final value ‘ ‘ 
```

但是如果我直接运行应用程序并附加 VS2008 来处理，输出窗口中没有数据绑定消息。

为什么当我附加到进程时这些跟踪消息不显示？如何获取这些数据绑定跟踪消息？

（在生产环境中，我的应用程序由另一个 exe 启动，我所能做的就是附加到进程）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T10:35:40.570

这纯粹是猜想。

当您使用 F5 从 Visual Studio 启动应用程序时，它有一个控制台输出窗口，并且可能在 PresentationTraceSources 初始化期间添加了一个默认 ConsoleTraceListener，它能够连接到 Visual Studio 输出控制台。

当您在调试器之外启动应用程序时，它可能不会/无法成功添加 ConsoleTraceListener，因为周围没有......因此，当您将进程附加到调试器时，WPF 数据绑定跟踪源不会重定向到输出窗口。

也许您可以在附加到进程后附加一个控制台侦听器。

```
System.Diagnostics.PresentationTraceSources.Refresh();
System.Diagnostics.PresentationTraceSources.DataBindingSource.Listeners.Clear();
System.Diagnostics.PresentationTraceSources.DataBindingSource.Listeners.Add(new ConsoleTraceListener());
System.Diagnostics.PresentationTraceSources.DataBindingSource.Switch.Level = System.Diagnostics.SourceLevels.Warning; 
```

最后，是否使用 Bea Stollnitz/Costa 文章中提到的 App.Config 将输出定向到文本文件？.... 那行得通吗？

在附加到进程之后，可能值得检查 System.Diagnostics.PresentationTraceSources.DataBindingSource.Switch.Level 的值。

这将更详细地介绍整个 TraceSources 机制：

[http://blogs.msdn.com/b/mikehillberg/archive/2006/09/14/wpftracesources.aspx](http://blogs.msdn.com/b/mikehillberg/archive/2006/09/14/wpftracesources.aspx)

# php - 在 Heroku 上为 PHP 运行新的 Relic

> ID：11406563
> 
> 赞同：2
> 
> 时间：2012-07-10T04:22:30.817
> 
> 标签：php, heroku, newrelic

所以我在[https://newrelic.com/docs/php/new-relic-for-php看到了 New Relic 的指南](https://newrelic.com/docs/php/new-relic-for-php)

我跑了 heroku run /etc/init.d/newrelic-daemon restart ，它显示：

```
 Running `/etc/init.d/newrelic-daemon restart` attached to terminal... up, run.1
    bash: /etc/init.d/newrelic-daemon: No such file or directory 
```

所以看起来代理守护进程没有通过安装 New Relic 插件安装。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T09:09:09.973

就此事联系了New Relic。看起来目前无法在 Heroku 上运行。

# iphone - 如何在目标 c 中编写自定义测试用例？

> ID：11406572
> 
> 赞同：1
> 
> 时间：2012-07-10T04:23:21.283
> 
> 标签：iphone, ios, unit-testing

我可以为目标 c 中的测试用例自定义我自己的自定义 stassert 语句吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:30:15.000

是的，你可以写它们。
阅读有关 GHUnit、OCUnit 和 OCMock 单元测试的信息。
阅读本教程[http://www.raywenderlich.com/3716/unit-testing-in-xcode-4-quick-start-guide](http://www.raywenderlich.com/3716/unit-testing-in-xcode-4-quick-start-guide)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T04:30:38.053

断言语句只是宏，所以没有理由不能自己编写。查看`SenTestCase_Macros.h`它们是如何实现的。如果它是您一直使用的东西，那么编写自己的自定义断言可能是值得的，但通常只编写自己的逻辑并像 nhahtdh 推荐的那样执行 STAssertTrue 会更容易。

如果我现在开始使用 iOS 单元测试，我会直接使用[Kiwi](https://github.com/allending/Kiwi)。它的语法比 SenTestingKit 好得多，并且编写自己的自定义高级匹配器要容易得多（编写一个简洁的小类，而不是一个难以理解的宏）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T07:25:57.570

如果您正在进行集成测试或涉及多个不同组件之间交互的测试，我知道很难确认某些行为是否发生 - 因为该行为可能被隐藏甚至没有记录在主代码中。

一种解决方案是编写代码来记录行为或向测试单元公开内部状态，并用于`#ifdef`包围这样的代码块。

您可以将预处理器宏添加到调试模式的应用程序目标（而不是测试目标）的构建设置中。不过，这可能是混淆的潜在来源。

# ios5 - 裁剪操作界面：在图像上绘制的用户可调整大小的矩形

> ID：11406573
> 
> 赞同：1
> 
> 时间：2012-07-10T04:23:23.907
> 
> 标签：ios5, user-interface, uiimageview, controls

我正在尝试找出一种`UIImage`在 Photoshop Express 中裁剪 a 的方法：

![在此处输入图像描述](../Images/1065730d38c57523ced97bab467e9a4a.png)

所以基本上你只需触摸并拖动角来调整矩形的大小，然后点击复选按钮并裁剪图像。现在我已经完成了裁剪部分 - 我制作了一种从 a 裁剪图像的方法，`CGRect`但是我遇到了这个可调整大小的矩形的问题。我尝试过的一切都没有奏效，这让我发疯，因为我知道这可能只是一件容易的事。有没有人做过这样的事情或知道网络上的一个例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T06:16:06.413

在这里你有你正在寻找的自定义控件的源代码。

[http://www.cocoacontrols.com/platforms/ios/controls/bjimagecropper](http://www.cocoacontrols.com/platforms/ios/controls/bjimagecropper)

我建议您浏览该网页[http://www.cocoacontrols.com](http://www.cocoacontrols.com)，您会发现大量的示例代码，其中大部分都有开放许可证，因此您可以在自己的应用程序中使用它。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-07T22:46:52.773

做了一个可能有用的项目。一探究竟：

[https://github.com/noripcord/Crop](https://github.com/noripcord/Crop)

# c - C函数内存分配

> ID：11406576
> 
> 赞同：3
> 
> 时间：2012-07-10T04:23:33.143
> 
> 标签：c, memory, memory-management

在 C 中，函数是在什么时间分配的，它在内存中的什么位置？

函数的内存是在第一次编译程序时分配的，还是在第一次看到函数调用时分配的？它是在堆栈上还是在代码段中分配的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T09:32:09.867

你的问题是个好问题，但要为一些额外的复杂性做好准备，因为其中一些东西会触及运行代码的 CPU 中的裸晶体管......

我选择惨败，试图将其浓缩为 4 种类型。

*   全局存储
*   代码存储
*   本地存储
*   动态存储

代码存储应该非常简单，所以我将其复杂化一点：一组思想被翻译成程序语言片段，此后称为“函数”，被翻译成一系列机器指令。

这些需要由处理器获取并执行，因此它必须位于 ROM 或 RAM 中……定义代码存储区域。即使函数被多次调用甚至递归调用，其代码也只有一个实例。

（让我们不要进入内联）

* * *

全局数据存储是 RAM，其中所有非函数声明的变量都可以存活（每个声明只有一个实例），加上声明为静态的变量（在函数内或函数外）。这些被绝对（或准）地址引用。

常量可能会或可能不会获得自己的 ROM 存储区域......它的编译器/优化特定。

* * *

函数的本地存储是一个用于参数/返回传递和局部变量的包（在其中声明，因此仅对其可见），并且对函数的每次调用都需要一个单独的包，以便每次调用都获得它的单独上下文。

通常（有一些令人难忘的例外）我们使用调用堆栈机制来堆积每个函数调用生成的几个本地存储区域。它越来越不确定，但你会发现这是一个随着内存地址递减而增长的堆栈帧。

因此，本地存储是编译器函数调用代码（为您自动完成）放置函数参数、被调用函数的返回占位符、调用函数的返回地址以及所有非静态（并优化为内部寄存器使用）变量。每个呼叫一个。引用这些局部变量和参数的函数代码将...err..通过堆栈指针加上偏移量来引用后者，一个指向当前堆栈帧结束地址的CPU寄存器（函数代码怎么可能否则知道内存地址？）。

调用函数涉及设置它的本地存储，最终将参数复制到其中（推入堆栈）并初始化一些本地，然后跳转到函数代码。Returning就是将被调用函数的返回值复制到caller-function的Local存储中，销毁被调用的-F本地存储，将Stack Pointer放在之前堆积的Local存储包的尾部，跳转到保存的caller下一条指令地址(弹出东西）。全部完成。

查看单个 C 进程的内存快照，您可以创建一个堆栈，其中包含多个底部堆积的本地存储区域，这些存储区域将按照特定程序执行的函数调用/返回模式阻止增长和收缩。

* * *

动态内存通常由 malloc 和 free 管理：您通过指针访问的内存块的增长地址堆栈的保持者。这形成了一个错误命名的堆区域（因为随着时间的推移，您很可能会得到一块瑞士奶酪，而不是堆）。

这些内存块可用于任何目的，挑战在于确保不会忘记释放它们，否则您将及时“泄漏”到调用堆栈中（很容易看出这将是多么具有破坏性）。

使用由 malloc/free 管理的动态内存需要一些额外的纪律，但对于避免巨大的本地或浪费的全局存储非常有用（在函数需要处理一堆数据并且可以被调用几次的情况下，或很少需要在内存中的大量数据）。

Dyn-memory 区域通常夹在 global 和 Stack 之间……一些嵌入式编译器会让你指定两者的大小。

Malloc 和 free 不是管理动态内存的唯一方法，我目前正在使用不需要 free() 的本土反向引用分配器。无纪律的代码，没有泄漏.... yaayy！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T04:28:20.357

C 函数的内存总是在函数加载到内存时从代码段分配。如果一个函数属于一个动态链接库，程序可以在任意时间加载和卸载它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-20T11:05:45.867

内联函数...

很好的解释...

我想提供有关未涵盖的内联函数的内存分配的详细信息。内联函数可以被认为是一个宏，其中对函数的调用被代码替换，并且还进行参数评估。在函数之前给出关键字 inline 不需要使其成为内联函数，它只是建议编译器这是内联的候选者。编译器最终选择这是否可以是内联函数。因此，内存分配类似于函数。

# xpages - 删除选定文档操作的翻译

> ID：11406578
> 
> 赞同：0
> 
> 时间：2012-07-10T04:23:46.280
> 
> 标签：xpages, xpages-ssjs

在“删除所选文档”操作中，可以指定确认消息，因此我可以用每种语言翻译此消息。但是，如果未选择任何文档，则会出现一个对话框，其中显示“请选择要删除的一个或多个文档。”消息。有什么办法可以翻译这条信息吗？

谢谢马里奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:34:59.267

以下是在 XPages 中设置翻译的一些说明：

[http://www-10.lotus.com/ldd/ddwiki.nsf/dx/UsingLocalizationOptions.htm](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/UsingLocalizationOptions.htm)

您可以将其与操作一起使用。发生的情况是您将拥有一个带有字符串的属性文件，这些将被翻译，然后将使用正确的。就像是：

```
<xp:eventHandler>
    <xp:this.action>
        <xp:actionGroup>
            <xp:confirm>
                <xp:this.message><![CDATA[#{javascript:
                    //where "strings" is a variable pointing to the resource bundle
                    strings.getString("confirm.message.delete");
                }]]></xp:this.message>
            </xp:confirm>

            ... delete code ...
        </xp:actionGroup>
    </xp:this.action>
</xp:eventHandler> 
```

# css - 新手 CSS - 两个盒子

> ID：11406580
> 
> 赞同：0
> 
> 时间：2012-07-10T04:24:08.077
> 
> 标签：css, position

我是 CSS 新手，我试图将两个透明框放在正确的位置上（垂直对齐），我尝试了很多解决方案，但现在我被卡住了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T04:31:51.033

好吧，您定义问题的方式对于您尝试做什么有很多争议，因为有许多方法比其他方法更适合取决于需要。除非另有定义，否则几乎所有内容都是透明的。

例如，您可以在一个盒子里有一个盒子

```
<div><div></div></div> 
```

这将使这些框出现在同一个地方。授予它你需要定义一个高度和宽度来给它一些尺寸。但在另一个之上。

还有另一个例子

```
<style>.layer{position:fixed;top:0;left:0;width:40px;height:40px;}</style>
<div class="layer" style="z-index:1;"></div>
<div class="layer" style="z-index:2;"></div> 
```

就代码的编写而言，这实际上是使 2 个元素并排排列，但内联样式 z-index 将使一个在另一个之上。但是还有更多的方法我敢肯定有些我什至想不到。但总的来说，这一切都取决于你的最终需求，从长远来看，什么更适合你。

***编辑*** 如果我通过你的评论理解你，那么你基本上想要我最初发布的第二个概念，当然改变了一点，所以它在右边而不是左边。如果是这种情况，请查看 jsfiddle.net 上的这个演示，看看这是否是您想要的。[http://jsfiddle.net/hEEGd/](http://jsfiddle.net/hEEGd/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T04:31:19.623

尝试将它们放入第三个容器盒中，并将其尺寸设置为：

*   高度：两个内框的高度之和（+1-2 px，如果其中任何一个有边框），

*   宽度：两个内盒宽度中的较长者（+1-2 px）。

然后为两个内盒设置“float:right”。

# android - 列表视图中的分隔符

> ID：11406587
> 
> 赞同：0
> 
> 时间：2012-07-10T04:25:33.090
> 
> 标签：android, listview

在我的应用程序中，我在列表视图中显示来自数据库的数据。列表视图就像显示 2 列。现在我想在这 2 列之间绘制一条水平线以显示 2 列是分开的。请帮助我。谢谢进步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T04:30:56.660

您必须维护单独的 xml 文件以显示列表视图项，在 List xml 文件中，在**textViews之间使用此水平和垂直视图**

所以对于水平分隔线使用这个代码

```
 <View 
          android:id="@+id/View01"
          android:layout_width="fill_parent"
          android:layout_height="2dp"
          android:background="#2B497B"
        /> 
```

和垂直分隔线

```
 <View 
          android:id="@+id/View02"
          android:layout_width="2dip"
          android:layout_height="fill_parent"
          android:background="#2B497B"
        /> 
```

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T04:43:51.300

![在此处输入图像描述](../Images/55f80dd54a6c04fccad064c08bdae4b2.png)

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

<LinearLayout 
        android:layout_weight="0.3"
        android:orientation="vertical"
        android:layout_width="0dp"
        android:layout_height="fill_parent">

         <TextView 
             android:padding="2dp"
             android:id="@+id/nameedit"
             android:textSize="15dp"
             android:layout_height="40dp"
             android:layout_width="fill_parent"
             android:layout_gravity="center"
             android:text="@string/search">
        </EditText>
         <View 
          android:id="@+id/View01"
          android:layout_width="fill_parent"
          android:layout_height="2dp"
          android:background="#2B497B"
        />
<TextView 
             android:id="@+id/header"
             android:layout_height="40dp"
             android:layout_width="fill_parent"
             android:textColor="#fff"
             android:textSize="15dp"
             android:gravity="center"
             android:text="@string/reports"/>
        <!-- <ListView android:id="@+id/namelist"
        android:cacheColorHint="#00000000"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:fadingEdge="none">
        </ListView> -->

    </LinearLayout>
    <View 
          android:id="@+id/View02"
          android:layout_width="2dip"
          android:layout_height="fill_parent"
          android:background="#2B497B"
        />

    <LinearLayout 
        android:layout_weight="0.7"
        android:orientation="vertical"
        android:layout_width="0dp"
        android:layout_height="fill_parent">

         <TextView 
             android:id="@+id/header"
             android:layout_height="40dp"
             android:layout_width="fill_parent"
             android:textColor="#fff"
             android:textSize="15dp"
             android:gravity="center"
             android:text="@string/reports"/>
         <View 
          android:id="@+id/View03"
          android:layout_width="fill_parent"
          android:layout_height="2dp"
          android:background="#2B497B"
        />

        <!-- <ListView android:id="@+id/reportslist"
        android:cacheColorHint="#00000000"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:fadingEdge="none"/> -->
        <TextView 
             android:id="@+id/header"
             android:layout_height="40dp"
             android:layout_width="fill_parent"
             android:textColor="#fff"
             android:textSize="15dp"
             android:gravity="center"
             android:text="@string/reports"/>

    </LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T05:30:33.753

在定义列表视图的 xml 文件中，为分隔线高度再添加一个参数：

```
 <ListView
            android:layout_marginTop="10dip"  
            android:layout_width="fill_parent" 
            android:layout_height="fill_parent"
            android:divider="@color/listDivider"
            android:dividerHeight="1dp"
            android:footerDividersEnabled="false"
            android:headerDividersEnabled="true"
            style="@style/listBackground" 
            android:id="@+id/list"/> 
```

这里的“listBackground”是我在 style.xml 文件中定义的自定义背景。而“listDivider”是我在 color.xml 中定义的分隔线的颜色，如下所示：

```
 <color name="listDivider">#cfcfcf</color> 
```

# android - 有多少种方法可以删除android上的通话记录？

> ID：11406588
> 
> 赞同：0
> 
> 时间：2012-07-10T04:25:36.550
> 
> 标签：android

我知道删除通话记录的唯一方法是使用 ContentResolver，例如：

```
getContentResolver().delete(Calls.CONTENT_URI, null, null); 
```

还有另一种方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T05:53:30.150

```
Uri uri = Uri.parse("content://call_log/calls");

int d  = getContentResolver().delete(uri, null, null); 
```

d 返回编号。删除的记录。

还要检查下面的代码

```
int res = Call_logs.this.getContentResolver().delete(android.provider.CallLog.Calls.CONTENT_URI,"_ID = "+ calls_id_list.get(i),null);
    if (res == 1) {
        // Log delete

    } else {
        // Log not Delete

    } 
```

这里的 calls_id_list 是一个呼叫日志 ID 的数组。

# c# - 后台工作人员和处置

> ID：11406589
> 
> 赞同：0
> 
> 时间：2012-07-10T04:26:29.670
> 
> 标签：c#, wpf, dispose

我有一个用户控件，用于重新启动应用程序的已安装服务。我正在使用后台工作人员来完成这项任务。

我正在使用 ServiceController 重新启动服务。在 DO_WORK 中，我编写了以下代码..

```
 serviceController.Refresh();

                if (serviceController.Status == ServiceControllerStatus.Running)
                {
                    serviceController.Stop();
                    serviceController.WaitForStatus(ServiceControllerStatus.Stopped, TimeSpan.FromMinutes(1));
                }

                serviceController.Start();
                serviceController.WaitForStatus(ServiceControllerStatus.Running, TimeSpan.FromMinutes(1)); 
```

现在，如果我关闭放置此用户控件的窗口，那么 serviceController 将被释放。

如果我重新启动了服务并且它仍处于启动阶段并且如果用户关闭了窗口，那么 serviceController 将被释放并且 do_work 将引发错误。

这个场景中的最佳实践应该是什么？

**更新：**我可以这样做吗？

```
 public void Dispose(bool disposing)
        {
            if (!this.isDisposed)
            {
                if (disposing)
                {
                    if (this.Worker != null)
                    {
                        this.Worker.DoWork -= this.Worker_DoWork;
                        this.Worker.RunWorkerCompleted -= this.Worker_RunWorkerCompleted;
                    }
                }
            }
         } 
```

# asp.net-mvc-3 - 设计问题 MVC 3 和表中的客户端数据收集

> ID：11406590
> 
> 赞同：0
> 
> 时间：2012-07-10T04:26:32.253
> 
> 标签：asp.net-mvc-3, design-patterns

我使用 Html.BeginForm 创建了一个简单的 Razor 视图。该表单包含一个从控制器填充的表。

为了保持客户端的所有内容，我创建了一个调用 javascript 的添加按钮，该按钮使用 html 输入将行添加到表中。我喜欢这种方法，因为它限制了对服务器的调用，并允许在保存之前取消所有更改。

我在想（似乎很无知）提交后我可以访问 html 表。情况似乎并非如此。那么我需要废弃我的设计（至少是添加功能）还是可以在控制器中引用表格（页面的 html）？如果我可以参考它，这是否会产生潜在的安全问题？

非常感谢任何帮助或在线示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:31:50.190

不是一个好方法！！但您可以使用 Request.Form 或 FormCollection 对象。

[如何从 HTTPPOST、字典或检索表单值？](https://stackoverflow.com/questions/5088450/simple-mvc3-question-how-to-retreive-form-values-from-httppost-dictionary-or)

阅读第二个答案，它可能有助于在 mvc 控制器中进行 googleing 以访问表单控件

# yahoo - 如何在 Yahoo Pipes 中添加一个不会被删除的空格？

> ID：11406595
> 
> 赞同：0
> 
> 时间：2012-07-10T04:27:13.553
> 
> 标签：yahoo, yahoo-pipes

我正在学习使用 Yahoo 管道创建 Twitter 机器人，这是[我的管道](http://pipes.yahoo.com/pipes/pipe.info?_id=501062fa434fa015fdb8ddbc32ee349b)。管道正在工作，但我在运行它时遇到了问题。这是结果示例：

> 关注 kami untuk mendapatkan cerita renungan kristen RT **@InggrianiVeeTiap** langkahku di atur oleh Tuhan:)

`@InggrianiVeeTiap`是错误的，正确的用户名是`@InggrianiVee`，并且`Tiap` 是推文的一部分。

我尝试在它们之间添加一个空格，这似乎可以正常工作，但是当我将管道保存在 Yahoo 中并尝试运行它时，它被删除了。

我如何保留空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:32:12.483

潜在的问题是您有一个带有空格的字符串生成器。该空间在开发时按预期工作，但在保存管道后被删除（或修剪）。

要转义空格以使其不会被删除，您可以使用`&#32;`空格代替（32 是空格的十进制 ASCII 代码）。

工作示例：[http ://pipes.yahoo.com/pipes/pipe.info?_id=9ad4bc3c1a7a6f2cb7823323f3e4323a](http://pipes.yahoo.com/pipes/pipe.info?_id=9ad4bc3c1a7a6f2cb7823323f3e4323a)

# c++ - DLL项目上的VC ++编译错误

> ID：11406598
> 
> 赞同：0
> 
> 时间：2012-07-10T04:27:24.153
> 
> 标签：c++, dll, compiler-errors

这是我的代码：

```
#include "stdafx.h"
#include <Windows.h>

extern "C" int __stdcall myfunction ();

BOOL WINAPI DllMain ( HINSTANCE hin, DWORD reason, LPVOID lpvReserved );

int __stdcall myfunction ()
{
      MessageBoxW(NULL,L"Question",L"Title",MB_OK);
      return 0;
}

BOOL WINAPI DllMain ( HINSTANCE hin, DWORD reason, LPVOID lpvReserved )
{
    return TRUE;
} 
```

当我编译显示这些错误：

> 错误 LNK2028: 对 simbol (token) 的引用未解析 (0A000027) "extern "C" int **stdcall MessageBoxW(struct HWND** *,wchar_t const *,wchar_t const *,unsigned int)" (?MessageBoxW@@$$J216YGHPAUHWND__@@PB_W1I@ Z) 在函数 "extern "C" int __stdcall myfunction(void)" (?myfunction@@$$J10YGHXZ)
> 
> 错误 LNK2019：外部符号“extern "C" int **stdcall MessageBoxW(struct HWND** *,wchar_t const *,wchar_t const *,unsigned int)" (?MessageBoxW@@$$J216YGHPAUHWND__@@PB_W1I@Z) 未在函数中使用“ extern "C" int __stdcall myfunction(void)" (?myfunction@@$$J10YGHXZ)

我不明白错误在哪里及其原因。如果有人可以帮我解决它，我会非常感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:20:35.907

谢谢大家，但问题是user32.lib。

```
#include "stdafx.h"
#include <Windows.h>

#pragma comment(lib,"user32.lib"); //Missing lib (No compile errors)

BOOL __stdcall DllMain(HINSTANCE hInst, DWORD dwReason, LPVOID lpReserved) {
    return  TRUE;
}

extern "C" __declspec(dllexport) void __stdcall SomeFunction() {
    MessageBoxA(NULL, "Hello", "HELLO", 0x000000L); //0x000000L = MB_OK
} 
```

我希望这会对像我这样的菜鸟有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T04:30:37.100

`extern "C"`需要在功能上，而不是定义上：

```
int __stdcall myfunction ();

extern "C" int __stdcall myfunction ()
{
      MessageBoxW(NULL, L"Question", L"Title", MB_OK);
      return 0;
} 
```

但是，`extern "C"`您可以将其包装在预解析器条件中，而不是全部附加：

```
int __stdcall myfunction ();

#ifdef __cplusplus
    extern "C" {
#endif

int __stdcall myfunction ()
{
      MessageBoxW(NULL, L"Question", L"Title", MB_OK);
      return 0;
}

#ifdef __cplusplus
    }
#endif 
```

# java - 使用我的 JAVA 代码获取多个 JFrame

> ID：11406600
> 
> 赞同：1
> 
> 时间：2012-07-10T04:27:32.047
> 
> 标签：java, swing, random, jframe

我知道; 这越来越糟糕，我确实试图想出一个可能的解决方案。基本上，当我的程序应该只打开一个而不显示任何我想要的随机数学问题时，它会打开多个小程序。这是我得到的代码：

```
package RandomMathGame;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class RandomMathGame {

    public static void main(String[] args) {
        RandomProblemGenerator randomProblems = new RandomProblemGenerator(10);
        final int numberProblems = 10;
        int correctScore = 0;
        JPanel panel = new JPanel();
        JPanel[] questionPanel = new JPanel[numberProblems];
        JPanel mainQuestionPanel = new JPanel();
        JPanel mainPanel = new JPanel();
       int answer;
        int correctAnswer;
        JLabel[] mathProblems = new JLabel[numberProblems];
        final JTextField[] mathAnswers = new JTextField[numberProblems];
        JLabel[] correctYesNo = new JLabel[numberProblems];
        final JLabel score = new JLabel(correctScore + "/10");
        JButton submit = new JButton("Submit");

        mainQuestionPanel.setLayout(new GridLayout(1, 10));

        for (int i = 1; i <= numberProblems; i++)
        {
            final int X = randomProblems.createNumberX();
            final int Y = randomProblems.createNumberY();

            mathProblems[i] = new JLabel("" + X + " * " + Y + " = ");
            mathAnswers[i] = new JTextField();

         String answerStr = mathAnswers[i].getText();

    if(answerStr.isEmpty()){

          correctYesNo[i] = new JLabel("Not a valid answer/answer field empty!");
    } else {

             answer = Integer.parseInt(mathAnswers[i].getText());
             correctAnswer = X * Y;

            if (answer == correctAnswer)
            {
                correctYesNo[i] = new JLabel("Correct answer; good job!");
                correctScore = correctScore + 1;
            }
            else
            {
               correctYesNo[i] = new JLabel("Incorrect answer; try again!");

            }
             questionPanel[i].add(mathProblems[i]);
             questionPanel[i].add(mathAnswers[i]);
             questionPanel[i].add(correctYesNo[i]);
             mainQuestionPanel.add(questionPanel[i]);
            }

        final int temp = correctScore;
      submit.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                score.setText("Score: " + temp + "/10");
            }
        });

        panel.add(submit);
        panel.add(score);
        mainPanel.setLayout(new GridLayout(1, 2));
        mainPanel.add(mainQuestionPanel);
        mainPanel.add(panel);
        JFrame gameFrame = new JFrame();
        gameFrame.setTitle("Random Math Game");
        gameFrame.setSize(1000, 1000);
        gameFrame.setVisible(true);
        gameFrame.setContentPane(mainPanel);

        }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T04:47:22.633

问题是`gameFrame`在 for 循环中创建（并显示）。`gameFrame`在创建对象之前尝试关闭循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T04:46:30.330

多个帧是由这个`for`循环引起的：

```
for (int i = 1; i <= numberProblems; i++)
{
... 
```

它在创建后关闭`JFrame`，因此它会生成多个。可能应该在这里关闭：

```
 final int temp = correctScore;
    submit.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            score.setText("Score: " + temp + "/10");
        }
    });
}  // <- CLOSE THE FOR LOOP HERE

panel.add(submit); 
```

不过，可能仍然会`ArrayIndexOutOfBoundsException`从循环中抛出（至少在我非常简短的实验中）。

这意味着您正在请求访问一个不存在的数组索引，例如您的数组有 4 个元素长，并且您想要 element `[16]`。如果我敢于解决这个问题，我认为它来自`i <= numberProblems`. 应该是`i < numberProblems`。

由于数组索引从 0 开始，最后一个元素将是`theArray.length - 1`，而不是`theArray.length`。

# java - 什么是 Play 中的请求响应周期

> ID：11406602
> 
> 赞同：2
> 
> 时间：2012-07-10T04:27:41.887
> 
> 标签：java, playframework

我刚刚开始研究play 2.0，虽然到目前为止它不是很复杂，但我没有得到非常基本的东西，即请求响应周期。我想要一个 JAVA Play 的请求响应周期的最小示例

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T09:34:25.683

Basically a request is handled by the HTTP router, which gets an url, eg: mydomain.com/details/. Then it tries to look this entry up in your **routes** config file. At the first matching line in the routes file, there's a corresponding method for that (a controller method), so it invokes the controller method, which will return an html response parameteriized by a view to be rendered.

**Simplified: request (url) -> find the route in routes table -> call static controller method -> return an html response with the view**

(also you can parameterize the url, eg: /details/12 and in the routes table: /details/:id, so you can pass the id to the controller method)

Another thing: it is also possible to do "reverse routing" which is parameterizing eg. a button to call a controller method directly, and it will find the corresponding url from the routes file

the official documentation is pretty good in this topic: [http://www.playframework.org/documentation/2.0.2/JavaRouting](http://www.playframework.org/documentation/2.0.2/JavaRouting)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T10:01:45.880

我想指出的是，如果你想通过 POST 传递数据，你必须将你的请求绑定到某个模型字段，然后在你的应用程序中检索传递的数据：像这样：

你的html：

```
<form action="/login" method="POST">
<input name="username"/>
...
</form> 
```

你的路线：

```
POST  /login      controllers.Application.login() 
```

你的申请：

```
public static Result login(){
Form<User> passedform = form(User.class).bindFromRequest();
if(passedform.hasErrors){
return badRequest("shit").as("text/plain");
} else {
User user = passedform.get();
System.out.print(user.username);
  }
} 
```

现在输出是您在输入字段中给出的用户名..这将以这种方式工作 python/django：

```
def login(request):
  print(request.POST.get('username')) 
```

:))) 但无论如何，游戏也很漂亮

希望我能帮助你

# android - 如何从 SD 卡播放视频文件

> ID：11406603
> 
> 赞同：-2
> 
> 时间：2012-07-10T04:27:54.650
> 
> 标签：android, media-player, android-videoview

我想在我存储在 sd 卡中的 android 模拟器上播放视频文件。这是我的代码..

```
public class AndroidVideoViewActivity extends Activity {

    private VideoView videoView=null;
    private String PATH="mnt/sdcard/bmxskills.3gp";
    private MediaPlayer mediaPlayer=null;
    private MediaController mediaController=null;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        VideoView videoView=(VideoView)findViewById(R.id.videoView);
        videoView.setVideoPath("mnt/sdcard/bmxskills.3gp");

        videoView.setMediaController(mediaController);
        videoView.requestFocus();
        videoView.start();

    }
} 
```

但是当我在模拟器上运行时它显示空白屏幕。请帮助。我添加了所需的权限，即互联网和外部存储。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T04:31:00.433

请检查[此链接](http://android-er.blogspot.in/2010/11/play-3gp-video-file-using-mediaplayer.html)

**或者**

代替`videoView.setVideoPath("mnt/sdcard/bmxskills.3gp");`

和`videoView.setVideoPath("/sdcard/bmxskills.3gp");`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T04:37:25.810

使用下面的代码。

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello"/>
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
        <VideoView
            android:id="@+id/myvideoview"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"/>
    </LinearLayout>
</LinearLayout> 
```

MainActivity.java

```
public class MainActivity extends Activity {

    String SrcPath = "/sdcard/Video/Android in Spaaaaaace!_low.mp4";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        VideoView myVideoView = (VideoView)findViewById(R.id.myvideoview);
        myVideoView.setVideoPath(SrcPath);
        myVideoView.setMediaController(new MediaController(this));
        myVideoView.requestFocus();
        myVideoView.start();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T04:34:14.910

您不应该在模拟器本身上测试正在运行的视频，如果您周围有设备，请改用它。Android 模拟器在正确处理视频方面非常糟糕，因此您可能会遇到很多通常不会出现在任何 Android 设备上的问题。

# javascript - 如何使链接充当文件输入

> ID：11406605
> 
> 赞同：44
> 
> 时间：2012-07-10T04:28:18.520
> 
> 标签：javascript, jquery, html, css

我有链接，

```
<a id="upload-file">Upload your photo</a> 
```

如果单击，我希望它充当浏览文件输入

```
<input id="upload-file" type="file"/> 
```

我将如何做到这一点？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-07-10T04:37:13.540

**HTML**

```
<input id="upload" type="file"/>
<a href="" id="upload_link">Upload your photo</a>​ 
```

**CSS**

```
#upload{
    display:none
} 
```

**JS**

```
$(function(){
    $("#upload_link").on('click', function(e){
        e.preventDefault();
        $("#upload:hidden").trigger('click');
    });
}); 
```

[**​演示。**](http://jsfiddle.net/7aGEv/3/)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2019-03-25T01:43:59.590

**仅 HTML**

这是一个非常简单的答案，它不使用 CSS、Javascript/jQuery 并且不依赖任何框架基础设施。

```
<label>
  <input type="file" style="display: none;">
  <a>Upload Photo link</a>
</label> 
```

甚至更简单

```
<label>
  <input type="file" style="display: none;">
  Upload Photo link
</label> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-10T04:32:32.247

以下将解决问题

html

```
<input id="upload-file" type="file"/>
<a id="fileupload">Upload your photo</a> 
```

css

```
#upload-file{
    display: none;
}​ 
```

js

```
$("#fileupload").click(function(){
    $("#upload-file").click();
});​ 
```

[http://jsfiddle.net/WXBKj/](http://jsfiddle.net/WXBKj/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-02-07T13:53:58.780

你可以在没有 Javascript 的情况下做到这一点。具有属性的跨浏览器解决方案`for`：

[演示](https://jsfiddle.net/j9pu8hgx/)

**HTML**

```
<label for="inputUpload" class="custom-file-upload">Upload your file</label>
<input id="inputUpload" type="file" /> 
```

**CSS**

```
#inputUpload {
    display: none;
}

.custom-file-upload {
    cursor: pointer;
    font-size: inherit;
    color: #0c090d;
}

.custom-file-upload:hover {
    text-decoration: underline;
} 
```

[演示](https://jsfiddle.net/j9pu8hgx/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-10T04:32:02.057

你可以有一个隐藏的`<input>`标签，然后你可以调用`$('#upload').click()`它来模拟点击。

或者，您可以拥有一个具有 id 的隐藏`<input>`标签，然后只需将标签属性添加到您的链接。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-03T13:54:52.437

在 Angular 6 中，你可以这样做，

```
<li class="list-group-item active cursor-pointer" (click)="file.click()">
    <i class="fas fa-cloud-upload-alt"></i> Upload <input type="file" #file hidden />
  </li> 
```

当你点击 li html 标签时，会触发输入按钮的点击。“**隐藏**”属性使不可见。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-10T04:31:53.103

编辑：

看到这个演示：http: [//jsfiddle.net/rathoreahsan/s6Mjt/](http://jsfiddle.net/rathoreahsan/s6Mjt/)

**查询：**

```
$("#upload").click(function(){
    $("#upload-file").trigger('click');
}); 
```

**HTML**

```
<a href="javascript:void(0)" id="upload">Upload your photo</a>
<input id="upload-file" type="file"/> 
```

**CSS**

```
#upload-file {
    display:none;
} 
```

**或者**

你可以使用这样的好插件：

[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2012-07-10T04:30:08.270

最好的一个 [http://valums.com/ajax-upload/](http://valums.com/ajax-upload/)

# objective-c - LLVM 4.0 可以在 Xcode 4.3 中使用吗？

> ID：11406611
> 
> 赞同：1
> 
> 时间：2012-07-10T04:28:59.353
> 
> 标签：objective-c, ios, xcode, llvm

换句话说，使用文字，但针对 iOS 5。

我知道[这一点](https://stackoverflow.com/questions/10064311/is-it-possible-to-use-nsarray-nsdictionary-and-nsnumber-literals-in-xcode-4?rq=1)，但该帖子不是决定性的。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-10T06:33:09.003

您可以切换编译器，但它并不像您想象的那样工作（我刚刚尝试过）。使用这种新语法对编译 SDK 有一些要求（即它可以在以前的 iOS 版本上工作，但您需要使用 iOS 6.0 SDK 编译它）。我不认为我现在可以在这里讨论它们，但它们在“Modern Objective-C”WWDC 2012 视频中有详细介绍。

基本上，您将拥有语法，但库不知道如何响应它。

不过还有另一种理论……我只是做得不对^^；

最后，您不必**使用**4.3 来部署到 5.x 应用程序。所以我的建议只是升级，它真的没有任何缺点（除非你很快部署一个应用程序，但在这种情况下，转换所有东西只是一件麻烦事，因为我假设你几乎完成了）。

**编辑**（2 个月后现在 iOS 6 是公开的）。您绝对可以使用类别来绕过新的objective-c 文字语法的SDK 要求。`NSArray`在和`NSDictionary`for`- (id)objectAtIndexedSubscript:(NSUInteger)idx`和`- (id)objectForKeyedSubscript:(id)key`分别添加只返回`objectAtIndex:`和的类别`objectForKey:`（这就是他们在 iOS 6 中所做的）。还 for`NSMutableArray`和`NSMutableDictionary`add 类别方法 for`- (void)setObject:(id)obj atIndexedSubscript:(NSUInteger)index`和`- (void)setObject:(id)obj atIndexedSubscript:(NSUInteger)index`分别简单地添加对象，如果它不存在，如果它存在则替换它。

一个问题：iOS 6 中的定义`YES`和`NO`更改以适应`NSNumber`. 因此，您需要执行以下操作：

```
#if __has_feature(objc_bool)
#undef YES //Before it was (BOOL)1
#undef NO //Before it was (BOOL)0

#define YES __objc_yes
#define NO __objc_no
#endif 
```

原因是在新语法中已经有一个`@( ... )`语法定义（装箱表达式），而旧定义将解决`@(BOOL)1`哪个是错误的。

# html - 在电子邮件正文中实现格式化（使用 html）

> ID：11406612
> 
> 赞同：0
> 
> 时间：2012-07-10T04:28:59.917
> 
> 标签：html, email, html-email

我正在尝试在电子邮件正文中实现格式设置，例如换行符等。为此，我使用以下代码：

```
<a href="mailto:someone@example.com?Subject=Hello%20again&body=Hi!!!Vin<br />/r/nSUB"> 
```

我尝试了 br,/n,/r 但所有三个都按原样呈现。有人能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:32:01.510

使用`%0D`（一个 URL 编码的回车）：

```
<a href="mailto:someone@example.com?Subject=Hello%20again&body=Hi!Vin%0DSUB"> 
```

# ffmpeg - 使用 ffmpeg 在给定时间从 flv 视频生成图像

> ID：11406613
> 
> 赞同：0
> 
> 时间：2012-07-10T04:29:23.370
> 
> 标签：ffmpeg

我在 ffmpeg 中使用以下命令来生成缩略图。它工作完美。

```
ffmpeg -i videofile.flv -an -ss 01:00:00 -an -r 1 -vframes 1 -y ".$outputdir."/".$groupid."_".$i.".jpg 
```

但问题是我必须生成缩略图的视频的搜索时间不同，而现在我正在使用一个运行速度非常慢的循环。我找到了原因，因为 ffmpeg 会为每个命令寻找给定的时间。我尝试分叉该过程，但没有效果。无论如何我可以优化命令以避免重复搜索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:11:36.713

试试这个：

```
ffmpeg -ss 01:00:00 -i videofile.flv .... 
```

用作`-ss`输入选项通常更快，但可能不太准确。FFmpeg 将立即先搜索，然后以您想要的`-ss`值开始解码；`-ss`但是，作为输出选项，它可能不准确，因为它会在您的`-ss`值之前额外解码所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:05:23.773

经过大量研究，发现这是不可能的。FFMPEG 应该考虑为此添加选项...它可以节省大量执行时间...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-22T08:29:31.500

如果您先定义 -i 再定义 -ss 或相反，它会产生很大的不同。有关更多信息，请查看这篇文章的答案：

[stack overflow.com 上的另一个问题：ffmpeg 奇怪的行为](https://stackoverflow.com/questions/6984628/ffmpeg-ss-weird-behaviour)

hth

# c# - 仅在我的应用程序中添加到 shell 上下文菜单

> ID：11406615
> 
> 赞同：4
> 
> 时间：2012-07-10T04:29:33.437
> 
> 标签：c#, menu, contextmenu, windows-shell

在我的 .NET Framework 4 应用程序中，我显示文件、文件夹和其他不属于文件系统的内容。对于文件和文件夹，我设法显示了该项目的 Windows Shell 上下文菜单，这要归功于[MSDN 上的这段代码](http://social.msdn.microsoft.com/Forums/en-US/showandtell/thread/3f553b23-fdb3-4355-8496-28a781b37f72)。（它仍然无法显示 Carbonite Shell Extension，但我离题了。）

我的挣扎是将我自己的子菜单添加到 Shell 上下文菜单中。我所有的研究都提到了所谓的 Shell *Extensions*，如果我理解正确的话，它是一个系统范围的变化。我只想在*从我的应用程序中访问 Shell 上下文菜单时添加它*。

无可否认，抓住稻草，我试图在上面的类`ShowContextMenu`方法中添加以下内容，就在它调用之后`QueryContextMenu`：

```
var mii = new MENUITEMINFO();
mii.cbSize = Marshal.SizeOf(mii);
mii.fMask = MIIM.SUBMENU | MIIM.STRING | MIIM.FTYPE | MIIM.ID;
mii.fType = MFT.BYPOSITION;
mii.wID = 0;
mii.hSubMenu = subMenu.Handle;
mii.dwTypeData = "Test";
var success = InsertMenuItem(pMenu, 0, true, ref mii); 
```

但没有“成功”。（`subMenu`是`System.Windows.Forms.ContextMenuStrip`我之前创建的。）

我的问题是：

1.  我是否正确，我正在尝试与创建 Shell 扩展不同？

2.  [根据这篇文章](http://blogs.msdn.com/b/codefx/archive/2011/03/27/writing-windows-shell-extension-with-net-framework-4-c-vb-net-part-4-context-menu-handler-with-menu-item-bitmaps.aspx)，这仍然被认为是托管代码的危险活动吗？

3.  一个人实际上是如何做到这一点的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T23:16:26.377

好的，看起来*可以*将自定义菜单项添加到 Windows Shell 上下文菜单中，就在您的应用程序中（无需执行任何影响整个 Windows 系统的操作）。下面是我所做的。请记住，此答案应在首先提到的 MSDN 代码的上下文中进行。这是链接：

[MSDN 上的 ShellContextMenu 类](http://social.msdn.microsoft.com/Forums/en-US/showandtell/thread/3f553b23-fdb3-4355-8496-28a781b37f72)

在那个类中，特别是 method`ShowContextMenu`是对 的调用`QueryContextMenu`，我了解到它的目的是用项目填充菜单——在这种情况下，是要显示其上下文菜单的文件/文件夹的适当 Windows Shell 菜单项。在那次调用之后，我添加了以下代码来添加子菜单和分隔符：

```
var mii = new MENUITEMINFO();
mii.fMask = MIIM.SUBMENU | MIIM.STRING | MIIM.FTYPE | MIIM.ID | MIIM.STATE | MIIM.BITMAP;
mii.fState = MFS.ENABLED;
mii.fType = MFT.STRING;
mii.wID = 0;    // Application-defined value that identifies the menu item.
mii.hSubMenu = **subMenu**.Handle;
mii.dwTypeData = Program.ShortTitle;
mii.cch = mii.dwTypeData.Length;
var bmp = new System.Drawing.Icon(ac.Properties.NeutralResources.MyAppIcon, 16, 16).ToBitmap();
this.hMyAppSubmenuIcon = bmp.GetHbitmap();
mii.hbmpItem = this.hMyAppSubmenuIcon;
mii.cbSize = Marshal.SizeOf(typeof(MENUITEMINFO));
var success = InsertMenuItem(pMenu, 0, true, ref mii);

mii = new MENUITEMINFO();
mii.fMask = MIIM.FTYPE;
mii.fType = MFT.SEPARATOR;
mii.cbSize = Marshal.SizeOf(mii);
success = InsertMenuItem(pMenu, 1, true, ref mii); 
```

**subMenu**的类型为`System.Windows.Forms.ContextMenu`。这样，整个上下文菜单有点混合，由托管和非托管菜单项组成。到目前为止，我认为这没有问题；它只是意味着必须以不同的方式处理两种类型菜单项的选择，如下所述......

将托管项插入菜单后，该`ShowContextMenu`方法调用`TrackPopupMenu`. 对于 Shell 菜单项，已编写的类负责处理它们的选择。对于我自己的菜单项，我不得不采取额外的步骤，因为 `TrackPopupMenu`它是一个 Windows API 函数，因此它不能很好地处理托管子菜单项的`Click`事件。您可以将`Click`事件处理程序连接到您的子菜单项，但是当从 Shell 上下文菜单中选择它们时，它们的`Click`事件不会触发。我仍然连接他们`Click`，因为有时我只是自己显示我的托管菜单。

为了响应来自 Shell 上下文菜单的托管菜单项选择，我使用了 的返回值`TrackPopupMenu`，它是所选菜单项的资源 ID。这就是事情变得有点迂回的地方。创建*托管*上下文菜单时，每个菜单项都有一个索引。您可以将此与 Windows API 函数[GetMenuItemID](http://pinvoke.net/default.aspx/user32/GetMenuItemID.html)一起使用，该函数返回菜单项的资源 ID。我从托管`ContextMenu`类继承并封装了一个`Dictionary`帮助我从这个资源 ID 映射到菜单项，以便稍后在调用`TrackPopupMenu`. 出于我的目的，这就是调用处理程序所需的全部内容，因为在我的应用程序中，我使用命令模式并将命令对象存储在菜单项的`Tag` 创建菜单时的属性。（一旦字典给了我正确的菜单项，我就可以通过从 中提取命令对象来执行相应的处理程序`Tag`）。

这已经运行了好几天了。如果有人看到漏洞，例如我应该清理的非托管资源，请提及。

# javascript - 让 Faye 在生产中正常工作（在开发中工作正常）

> ID：11406616
> 
> 赞同：0
> 
> 时间：2012-07-10T04:29:39.150
> 
> 标签：javascript, ruby-on-rails, railscasts, faye

这是基于 Ryan Bates Railscasts #260：[http ://railscasts.com/episodes/260-messaging-with-faye](http://railscasts.com/episodes/260-messaging-with-faye)

理想情况下，您希望拥有它，这样您就可以打开两个本地主机窗口，您可以在浏览器 1 中输入一些内容，它不仅会显示在那里，还会显示在浏览器 2 中。就像聊天程序 :)

所以，我可以在本地完成上面的^。当我在生产中尝试这个时，没有任何反应。

视频播放到一半时，Ryan 说您需要更新 application.html.erb 文件中的 URL。在视频（本地）中，它是

```
<%= javascript_include_tag "application", 'http://localhost:9292/faye.js' %> 
```

您会为您的 heroku 应用程序将其更改为什么？

```
http://herokuappname/faye.js 
```

不做任何事情。

我已经阅读了一些可以使用守护进程 gem 的帖子。但对于这样的事情来说，这似乎有点矫枉过正？

非常感谢任何输入！

# matlab - 在子图中保存条形图

> ID：11406617
> 
> 赞同：0
> 
> 时间：2012-07-10T04:29:59.457
> 
> 标签：matlab, save-as, subplot

我想将我在 MATLAB 中绘制的图形保存到`fig`文件中。目前我正在使用以下代码：

```
hf1 = figure();
p1=uipanel('Parent',hf1);
a1=subplot(2,1,1,'Parent',p1);
%b1=plot(a1,1:9);
b1=bar(a1,1:9);
a2=subplot(2,1,2,'Parent',p1);
b2=bar(a2,1:9);
%b2=plot(a2,1:9);
hf2 = figure('Visible', 'on');   
hAxes = copyobj(findobj(p1,'Type','Axes'), hf2);
saveas(hf2,'case2.fig','fig'); 
```

但后来我收到以下错误：

> ？？？在 15 处使用 ==> getProxyValueFromHandle 时出错 输入必须是有效句柄。
> 
> ==> plotedit 中的错误 91 [varargout{1:nargout}] = feval(args{:});
> 
> ==> specgraph.barseries.preserialize 中的错误 10 peerVals = plotedit({'getProxyValueFromHandle',hPeers});
> 
> ==> hgsaveStructDbl 中的错误在 81 olddata{i} = {hh,preserialize(hh)};
> 
> ==> hgsave 中的错误在 63 hgS = hgsaveStructDbl(h, SaveAll);
> 
> ==> saveasfig 中的错误 7 hgsave(h, name);
> 
> ==> saveas 中的错误 126 feval( ['saveas' 格式], h, name )
> 
> ==> 测试栏中的错误 11 saveas(hf2,'case2.fig','fig');

但是当我将代码中的替换为`bar`（`plot`我现在将它们注释掉^^）时，我可以成功保存该图。

我使用的版本是 MATLAB R2010a。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:52:07.020

尝试使用此代码

```
b=bar(a1,1:9,'hist'); 
```

代替

```
b=bar(a1,1:9); 
```

# php - 是否可以让 wordpress 用户知道他们已经阅读了哪些帖子？

> ID：11406618
> 
> 赞同：1
> 
> 时间：2012-07-10T04:30:00.763
> 
> 标签：php, mysql, database, wordpress

是否存在执行此操作的插件？如果没有，我理论上可以创建一个跟踪此类信息的 mysql 数据库吗？

例如，假设我有一个以用户名作为主键的表 post_views，并且每次用户来时，我都会检查该表中具有帖子 ID 的列是否存在值。

如果是，那么做一些事情......如果不是，那么，创建列并分配一个值 1 或其他东西。

这样的事情可行吗？对不起，我是一个mysql菜鸟。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T05:34:54.083

嗯，这是可行的，是的。

你可以：

1.  像每个人对 WP 所做的那样：在他们庞大的存储库中搜索一个插件并安装它。很有可能有些东西可以完全满足您的需要；
2.  对于登录用户：创建一个关系表，比如 users_posts

    ```
     id | user_id | post_id 
    ```

    在每个帖子视图中，将用户 ID 和帖子 ID 插入到此表中（如果您愿意，可以添加其他信息，例如阅读帖子的日期）。对该表的查询将告诉您用户打开的所有页面，或者相反，您可以检查该页面是否被该用户看到。从你所说的来看，这是一个比你想象的更可行的表模式；

3.  对于未登录的用户：在没有用户 ID 的情况下，您可以使用 cookie：在 cookie 中写入用户信息（IP、UserAgent 等）和帖子 ID；只要 cookie 没有被清除（或过期），您仍然会知道用户看到了什么。为了增加甜头：一旦用户登录，您就可以将此基于 cookie 的信息转换为第 2 点中的方法）。

    好吧，再想一想，cookie 不是必需的，您也可以在这里使用数据库，但是该表不会存储用户 ID，而是其他信息（您可以使用带有添加列的同一个表，或者专门为未登录的用户。我会选择后者）

    但请记住，IP、用户代理和此类其他信息不可靠，并且可能导致问题 - 第一个可以由不同的用户共享，第二个很容易被欺骗。最好的做法是忽略这一点 3) 并始终只跟踪登录用户，这样您就不会遇到问题。

# python - 大多数pythonic意味着找出一个列表中的元素是否不是另一个列表的成员

> ID：11406623
> 
> 赞同：1
> 
> 时间：2012-07-10T04:30:19.457
> 
> 标签：python

> **可能重复：**
> [从 2 个列表中获取差异。Python](https://stackoverflow.com/questions/5305164/get-difference-from-2-lists-python)

我有两个清单

```
rt = [1,2,3]
dp = [1,2] 
```

找出`rt`列表中`3`不是`dp`列表元素的最pythonic方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T04:34:18.873

```
>>> rt = [1,2,3]
>>> dp = [1,2] 
```

您可以使用集合：

```
>>> set(rt) - set(dp)
set([3]) 
```

或列表理解：

```
>>> [x for x in rt if x not in dp]
>>> [3] 
```

编辑： jamylak 指出你可以使用一个集合来提高成员查找的效率：

```
>>> dp_set = set(dp)
>>> [x for x in rt if x not in dp_set]
>>> [3] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T04:40:02.757

这些中的任何一个都可以：

```
set(rt).difference(set(dp)) 
```

或者

```
[i for i in rt if i not in dp] 
```

或者

```
set(rt) - set(dp) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-10T04:34:39.943

如果它们都是集合，您可以这样做：

```
set(rt) - set(dp) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-10T04:32:17.400

您可能正在寻找其中之一：

```
>>> rt = [1,2,3]
>>> dp = [1,2]
>>> set(rt).issubset(dp)
False
>>> 3 in dp
False 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-10T04:36:00.253

听起来你可能想要设置减法：

```
>>> rt = [1,2,3]
>>> dp = [1,2]
>>> set(rt) - set(dp)
set([3]) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T04:33:50.123

你想要什么有点模棱两可。你的意思是你想对照 dp 检查 rt 的每个元素？

```
for num in rt:
    if num in dp:
        print(num, 'is in dp!')
    else:
        print(num, 'is not in dp!') 
```

# html - HTML 5 替代 javascript 验证

> ID：11406624
> 
> 赞同：0
> 
> 时间：2012-07-10T04:30:28.817
> 
> 标签：html

我想知道 HTML5 验证是否已经可以用作 javascript 验证的替代品。

HTML 验证要容易得多，我想在我的网站中实现它，但我不确定它是否足够安全。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T04:33:15.787

HTML5 验证是[在多个浏览器中完全实现](http://www.quirksmode.org/html5/inputs.html#t12)的功能，但在许多旧版本的浏览器中并未完全实现，**特别是 IE <10、Safari（所有版本）以及旧版本的 Chrome、Firefox 和 Opera**。

但是，对于那些不支持它的浏览器，您应该考虑使用[诸如 Modernizr 之类的 Javascript polyfill，](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)以确保使用其他浏览器的用户也将验证他们的输入。（可能还有其他可用的 polyfill，但 Modernizr 是目前可用的最流行和最广泛的选项）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T04:34:42.463

查看此资源以获取 HTML5 验证（请参阅`required`属性）。它继续解释浏览器兼容性：

[http://diveintohtml5.info/forms.html](http://diveintohtml5.info/forms.html)

# entity-framework - 自跟踪实体和缺乏实体继承

> ID：11406625
> 
> 赞同：0
> 
> 时间：2012-07-10T04:30:29.050
> 
> 标签：entity-framework, self-tracking-entities

我的微不足道的 EDMX 有一个基本实体以及两个从它继承的实体......

```
 <>-------- UserEntity
EntityBase
        <>-------- CustomEntity 
```

...这会自动在生成的 ObjectContext 上创建三个 ObjectSet 属性...

```
public ObjectSet<EntityBase>   EntityBases {...}
public ObjectSet<UserEntity>   UserEntities  {...}
public ObjectSet<CustomEntity> CustomEntities  {...} 
```

……太好了。然后我可以在我的 Linq To 实体中使用这三个中的任何一个。我实际上想使用自我跟踪实体，因此将代码生成策略设置为无。然后添加自跟踪 T4 模板。但是新生成的ObjectContext只有以下...

```
public ObjectSet<CustomEntity> EntityBases {...} 
```

...但是 UserEntities 和 CustomEntities 的继承实体却无处可寻！自跟踪实体 T4 可以处理每种类型的表吗？一定可以吗？是什么赋予了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T08:52:27.157

那是正确的行为。您将`ObjectSet`仅获得基本类型，并且该集合也用于访问所有继承的类型。如果您只想获取`UserEntity`实例，您将使用`.OfType<UserEntity>()`扩展方法等。

# excel - 当单元格被公式更改时，VBA 代码不运行

> ID：11406628
> 
> 赞同：9
> 
> 时间：2012-07-10T04:30:39.360
> 
> 标签：excel, vba, worksheet

**工作表 A**具有从**工作表 B**收集的数据范围。**工作表 A**有一个宏，用于计算数据是否高于某个值，然后调用电子邮件模块向选定的用户发送电子邮件。

当在**工作表 A**上手动输入数据时，宏可以工作，但是当从**工作表 B**中提取数据时，它不会触发。

我不确定我需要在 VBA 代码中更改什么。

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Call MailAlert(Target, "B5:M5", 4) 
    Call MailAlert(Target, "B8:M8", 7) 
    Call MailAlert(Target, "B11:M11", 6)
    Call MailAlert(Target, "B14:M14", 2) 
    Call MailAlert(Target, "B17:M17", 4) 
    Call MailAlert(Target, "B20:M20", 1) 
    Call MailAlert(Target, "B23:M23", 3) 
    Call MailAlert(Target, "B26:M26", 1) 
    Call MailAlert(Target, "B29:M29", 5) 
    Call MailAlert(Target, "B32:M32", 1) 
    Call MailAlert(Target, "B35:M35", 7) 
    Call MailAlert(Target, "B38:M38", 20) 
    Call MailAlert(Target, "B41:M41", 0) 
End Sub

Private Sub MailAlert(ByVal Target As Range, ByVal Address As String, ByVal Value As Integer)
    If Target.Cells.Count > 1 Then Exit Sub
    If Not Application.Intersect(Range(Address), Target) Is Nothing Then
        If IsNumeric(Target.Value) And Target.Value > Value Then
        Call Mail_small_Text_Outlook
        End If
        Application.EnableEvents = True
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-10T08:39:19.733

要通过公式捕获更改，您必须使用`Worksheet_Calculate()`事件。为了理解它是如何工作的，让我们举个例子。

1.  创建一个新工作簿。
2.  在 Sheet1 单元格 A1 中，输入此公式`=Sheet2!A1+1`

现在在一个模块中粘贴此代码

```
Public PrevVal As Variant 
```

将此粘贴到工作表代码区域

```
Private Sub Worksheet_Calculate()
    If Range("A1").Value <> PrevVal Then
        MsgBox "Value Changed"
        PrevVal = Range("A1").Value
    End If
End Sub 
```

最后在`ThisWorkbook`代码区域粘贴此代码

```
Private Sub Workbook_Open()
    PrevVal = Sheet1.Range("A1").Value
End Sub 
```

关闭并保存工作簿并重新打开它。现在对 的单元格 A1 进行任何更改`Sheet2`。您会注意到您将收到消息框`MsgBox "Value Changed"`

**快照**

![在此处输入图像描述](../Images/198ee0469cb6dcbebf9f24b06ab7d796.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T05:02:22.957

worksheet_change 事件只会在手动用户更改时触发。我认为您最好的选择是将其作为工作表 B 上的工作表更改事件来实现，我假设用户输入更改正在发生。

如果这真的不适合您，我会建议一些替代方案，但我认为这可能是迄今为止最好的选择。

编辑：根据以下评论的另一个建议

ThisWorkbook 对象有一个事件 SheetChange，只要工作簿中的任何工作表发生更改，就会触发该事件。如果您可以确定将在每张 B 表上输入数据的范围，那么您可以像在原始代码中一样使用这些范围。

```
Private Sub Workbook_SheetChange(ByVal Sh As Object, ByVal Target As Range)
    If Not Sh Is Sheets("Worksheet A") Then
        If Intersect(Sh.Range("B1:B5"), Target) Then
            'Call MailAlert as required here
        ElseIf Intersect(Sh.Range("B10:B20"), Target) Then
            'Call MailAlert as required here
        Else ' Etc...
            'Call MailAlert as required here
        End If
    End If
End Sub 
```

让我知道情况如何。

# mysql - sql语句返回不匹配的结果

> ID：11406630
> 
> 赞同：1
> 
> 时间：2012-07-10T04:30:54.467
> 
> 标签：mysql, sql

我有两张桌子：水果和蔬菜水果如下：

```
id - name       - weight
0    apple        2
1    banana       4
2    strawberry   7
3    oranges      5 
```

蔬菜如下：id，名称，颜色，重量，维生素是字段/列

```
id - name     - color - weight - vitamins
0    tomato             1     
1    pumpkin            5  
2    eggplant           4 
```

我想返回左表（水果）上的重量不同的结果，在这种情况下它将是：苹果，草莓什么是最好的方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T04:37:46.413

Deepesh 的解决方案是完美的，但这里有一个使用左连接的解决方案：

[http://sqlfiddle.com/#!2/4bb74/2](http://sqlfiddle.com/#!2/4bb74/2)

```
SELECT fruit.*
FROM      fruit
LEFT JOIN vegetable ON vegetable.weight = fruit.weight
WHERE vegetable.id IS NULL 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T04:33:50.067

Select * from Fruits where weight not in（从蔬菜中选择重量）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T04:44:32.467

试试这个代码

```
 SELECT * FROM Fruits WHERE  NOT EXISTS (SELECT * FROM  vegetables WHERE  vegetables.weight = fruits.weight) 
```

# iphone - 以编程方式将端口从 iphone 转发到本地机器

> ID：11406632
> 
> 赞同：0
> 
> 时间：2012-07-10T04:30:59.237
> 
> 标签：iphone, ios, ios4

我想将一个端口从 iPhone 转发到本地机器，该 iPhone 连接到我的本地机器。请提出解决方案或从哪里开始

我已经尝试过[tcmportmapper](http://code.google.com/p/tcmportmapper/)和[asyncsocket](https://github.com/twyatt/asyncsocket-example)但我找不到正确的方法来做我想做的事。

任何指针？

# android - 在活动开始时验证错误

> ID：11406638
> 
> 赞同：-1
> 
> 时间：2012-07-10T04:31:32.987
> 
> 标签：android, jackson, verifyerror

按照[`WebView`文档](http://developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface%28java.lang.Object,%20java.lang.String%29)，我想注入一个公共 java 函数`webView`并使用 JavasSript 调用它，当该函数的形式为

```
public String myfunc(){ 
//....
} 
```

它可以工作，但是在使用`throws`关键字时会导致致命错误。

这是我的完整代码：

```
package com.arad.test1;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.Window;
import android.webkit.WebSettings.PluginState;
import android.webkit.WebView;
import android.widget.Toast;

import com.arad.test1.model.test;
import com.fasterxml.jackson.core.JsonGenerationException;
import com.fasterxml.jackson.databind.JsonMappingException;
import com.fasterxml.jackson.databind.ObjectMapper;

public class Test1Activity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.test);
        final WebView myWebView = (WebView) findViewById(R.id.webView1);
        myWebView.getSettings().setJavaScriptEnabled(true);
        myWebView.getSettings().setPluginState(PluginState.ON);
        myWebView.addJavascriptInterface(this, "appConnector");
        try {
            myWebView.loadDataWithBaseURL(
                    "file:///android_asset/",
                    convertStreamToString(getAssets().open(
                            "templates/test.html")), "text/html", "utf-8", "");
        } catch (IOException e) {
            Log.e("Test1", e.getMessage());
        }
    }

    public String load() {
        return generateJsonFromClass();
    }

    private String generateJsonFromClass() {
        try {
            ObjectMapper mapper = new ObjectMapper();
            test t = new test();
            String result = mapper.writeValueAsString(t);
            return result;
        } catch (JsonGenerationException e) {
            Log.e("Test1", e.getMessage());
            return "JsonGenerationException";
        } catch (JsonMappingException e) {
            Log.e("Test1", e.getMessage());
            return "JsonMappingException";
        } catch (IOException e) {
            Log.e("Test1", e.getMessage());
            return "IOException";
        }
    }

    private static String convertStreamToString(InputStream is) {

        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
        StringBuilder sb = new StringBuilder();

        String line = null;
        try {
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                is.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return sb.toString();
    }
} 
```

这是 DDMS 日志：

```
07-10 10:02:42.183: E/dalvikvm(20521): Could not find class 'com.fasterxml.jackson.databind.ObjectMapper', referenced from method com.arad.test1.Test1Activity.generateJsonFromClass 
07-10 10:02:42.183: W/dalvikvm(20521): VFY: unable to resolve new-instance 28 (Lcom/fasterxml/jackson/databind/ObjectMapper;) in Lcom/arad/test1/Test1Activity; 
07-10 10:02:42.183: D/dalvikvm(20521): VFY: replacing opcode 0x22 at 0x0000 
07-10 10:02:42.183: W/dalvikvm(20521): VFY: unable to resolve exception class 26 (Lcom/fasterxml/jackson/core/JsonGenerationException;) 
07-10 10:02:42.183: W/dalvikvm(20521): VFY: unable to find exception handler at addr 0xf 
07-10 10:02:42.183: W/dalvikvm(20521): VFY: rejected Lcom/arad/test1/Test1Activity;.generateJsonFromClass ()Ljava/lang/String; 
07-10 10:02:42.183: W/dalvikvm(20521): VFY: rejecting opcode 0x0d at 0x000f 
07-10 10:02:42.183: W/dalvikvm(20521): VFY: rejected Lcom/arad/test1/Test1Activity;.generateJsonFromClass ()Ljava/lang/String; 
07-10 10:02:42.212: W/dalvikvm(20521): Verifier rejected class Lcom/arad/test1/Test1Activity; 
07-10 10:02:42.212: W/dalvikvm(20521): Class init failed in newInstance call (Lcom/arad/test1/Test1Activity;) 
07-10 10:02:42.223: D/AndroidRuntime(20521): Shutting down VM 
07-10 10:02:42.223: W/dalvikvm(20521): threadid=1: thread exiting with uncaught exception (group=0x409c01f8) 
07-10 10:02:42.322: E/AndroidRuntime(20521): FATAL EXCEPTION: main 
07-10 10:02:42.322: E/AndroidRuntime(20521): java.lang.VerifyError: com/arad/test1/Test1Activity 
07-10 10:02:42.322: E/AndroidRuntime(20521): at java.lang.Class.newInstanceImpl(Native Method) 
07-10 10:02:42.322: E/AndroidRuntime(20521): at java.lang.Class.newInstance(Class.java:1319) 
07-10 10:02:42.322: E/AndroidRuntime(20521): at android.app.Instrumentation.newActivity(Instrumentation.java:1023) 
07-10 10:02:42.322: E/AndroidRuntime(20521): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871) 
07-10 10:02:42.322: E/AndroidRuntime(20521): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981) 
07-10 10:02:42.322: E/AndroidRuntime(20521): at android.app.ActivityThread.access$600(ActivityThread.java:123) 
07-10 10:02:42.322: E/AndroidRuntime(20521): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147) 
07-10 10:02:42.322: E/AndroidRuntime(20521): at android.os.Handler.dispatchMessage(Handler.java:99) 
07-10 10:02:42.322: E/AndroidRuntime(20521): at android.os.Looper.loop(Looper.java:137) 
07-10 10:02:42.322: E/AndroidRuntime(20521): at android.app.ActivityThread.main(ActivityThread.java:4424) 
07-10 10:02:42.322: E/AndroidRuntime(20521): at java.lang.reflect.Method.invokeNative(Native Method) 
07-10 10:02:42.322: E/AndroidRuntime(20521): at java.lang.reflect.Method.invoke(Method.java:511) 
07-10 10:02:42.322: E/AndroidRuntime(20521): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 
07-10 10:02:42.322: E/AndroidRuntime(20521): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 
07-10 10:02:42.322: E/AndroidRuntime(20521): at dalvik.system.NativeStart.main(Native Method) 
07-10 10:02:42.352: I/dalvikvm(20521): threadid=3: reacting to signal 3 
07-10 10:02:42.432: I/dalvikvm(20521): Wrote stack traces to '/data/anr/traces.txt' 
07-10 10:02:42.632: I/dalvikvm(20521): threadid=3: reacting to signal 3 
07-10 10:02:42.652: I/dalvikvm(20521): Wrote stack traces to '/data/anr/traces.txt' 
07-10 10:02:43.122: I/dalvikvm(20521): threadid=3: reacting to signal 3 
07-10 10:02:43.213: I/dalvikvm(20521): Wrote stack traces to '/data/anr/traces.txt' 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:04:57.423

将您的库文件夹名称从 lib 更改为 libs

[Android：jar 文件（LIB 或 LIBS）的文件夹名称是什么？](https://stackoverflow.com/questions/7185488/android-what-is-the-folder-name-of-the-jar-files-lib-or-libs)

# html-agility-pack - 如何在 HTML Agility Pack 中获得选择

> ID：11406649
> 
> 赞同：0
> 
> 时间：2012-07-10T04:32:26.200
> 
> 标签：html-agility-pack

我正在尝试获取特定网页的选择元素，但我无法做到这一点。

到目前为止，这是我的代码。我试图在网页中获取包含名称“postalDistrictList”的选择元素，但我的代码都不起作用。

我也试过 htmlweb.DocumentNode.SelectNodes("//select") 但这返回 null。

有谁知道我该怎么做？

```
 static void Main(string[] args)
        {
            HtmlNode.ElementsFlags.Remove("option");
            HtmlWeb htmlweb = new HtmlWeb();
            HtmlDocument html = htmlweb.Load("https://www.ura.gov.sg/realEstateWeb/realEstate/pageflow/transaction/submitSearch.do");

//            HtmlNode bodyNode = html.DocumentNode.SelectNodes("//select");
            HtmlNode bodyNode = html.DocumentNode.SelectSingleNode("/html/body");
            HtmlNode selectNode = html.GetElementbyId("postalDistrictList");
            HtmlNodeCollection selectNodes = html.DocumentNode.SelectNodes("//select[@name='postalDistrictList']");
//          HtmlNode selectNode = html.DocumentNode.SelectSingleNode("//select[@name='postalDistrictList']");
             HtmlNode node = selectNode;
//            foreach (HtmlNode node in selectNodes)
            {
                Console.Out.Write(node.Attributes["options"].Value);
                Console.Out.WriteLine();
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:38:16.710

试试 XPath //./select[@name='postalDistrictList']，即

```
HtmlNodeCollection selectNodes = html.DocumentNode.SelectNodes("//./select[@name='postalDistrictList']"); 
```

应该可以帮助您获得您正在寻找的选择元素的集合。

# c# - 文件系统观察程序路径不起作用

> ID：11406653
> 
> 赞同：0
> 
> 时间：2012-07-10T04:32:37.617
> 
> 标签：c#, asp.net, .net

我创建了 C# windows 服务来监视活动目录密码更改。每当密码更改时，该服务将调用 Web 服务并返回结果。如果服务返回不返回成功，则 filewatcher 目录为此创建一个文本文件；否则不是。当服务启动时，如果有任何待处理的请求，它将处理。

```
//Whenever file created... Synchronize the pending requests. When active direcory changes occur it will create files. If request is suucessfull delte the created file otherwise not 
```

当我改变`路径。Filewatchercreated 事件未触发。就像用任何其他名称 Data 或类似名称更改密码一样。如果有人可以请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:36:13.937

你记得在某处设置通知过滤器吗？

我看不到您在哪里创建了观察者，但可能是：

```
NotifyFilter = NotifyFilters.LastWrite | NotifyFilters.LastAccess | NotifyFilters.Attributes; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:15:47.997

过去我在使用 filewatcher 时遇到的所有烦人问题，比如这个，我已经在我的所有代码中取消了它，并返回到可信赖的旧计时器并轮询目录。它对我来说 100% 的时间都在工作，并在服务未运行时选择文件。我希望这会有所帮助。

# assembly - 如何在 x86（32 位）程序集中将无符号整数转换为浮点数？

> ID：11406654
> 
> 赞同：5
> 
> 时间：2012-07-10T04:32:49.283
> 
> 标签：assembly, x86, sse

我需要将 32 位和 64 位**无符号整数**都转换为 xmm 寄存器中的浮点值。有 x86 指令可以将有*符号整数*转换为单精度和双精度浮点值，但对于无符号整数则没有。

奖励：如何将 xmm 寄存器中的浮点值转换为 32 位和 64 位无符号整数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T01:09:27.027

这是 GCC 生成的内容。我将它们包装在函数中，但您可以轻松删除堆栈处理。并不是所有的都使用SSE来做实际的工作（ulonglong转换没有），如果你找到了相应的说明，请告诉我。Clang 生成的几乎相同。

```
% cat tofloats.c 
double ulonglong2double(unsigned long long a) {
    return a;
}
float ulonglong2float(unsigned long long a) {
    return a;
}
double uint2double(unsigned int a) {
    return a;
}
float uint2float(unsigned int a) {
    return a;
}
% gcc -msse4.2 -g -Os -c tofloats.c && objdump -d tofloats.o
00000000 <ulonglong2double>:
   0:   55                      push   %ebp
   1:   89 e5                   mov    %esp,%ebp
   3:   83 ec 10                sub    $0x10,%esp
   6:   8b 55 0c                mov    0xc(%ebp),%edx
   9:   8b 45 08                mov    0x8(%ebp),%eax
   c:   89 55 f4                mov    %edx,-0xc(%ebp)
   f:   85 d2                   test   %edx,%edx
  11:   89 45 f0                mov    %eax,-0x10(%ebp)
  14:   df 6d f0                fildll -0x10(%ebp)
  17:   79 06                   jns    1f <ulonglong2double+0x1f>
  19:   d8 05 00 00 00 00       fadds  0x0
  1f:   dd 5d f8                fstpl  -0x8(%ebp)
  22:   dd 45 f8                fldl   -0x8(%ebp)
  25:   c9                      leave  
  26:   c3                      ret    

00000027 <ulonglong2float>:
  27:   55                      push   %ebp
  28:   89 e5                   mov    %esp,%ebp
  2a:   83 ec 10                sub    $0x10,%esp
  2d:   8b 55 0c                mov    0xc(%ebp),%edx
  30:   8b 45 08                mov    0x8(%ebp),%eax
  33:   89 55 f4                mov    %edx,-0xc(%ebp)
  36:   85 d2                   test   %edx,%edx
  38:   89 45 f0                mov    %eax,-0x10(%ebp)
  3b:   df 6d f0                fildll -0x10(%ebp)
  3e:   79 06                   jns    46 <ulonglong2float+0x1f>
  40:   d8 05 00 00 00 00       fadds  0x0
  46:   d9 5d fc                fstps  -0x4(%ebp)
  49:   d9 45 fc                flds   -0x4(%ebp)
  4c:   c9                      leave  
  4d:   c3                      ret    

0000004e <uint2double>:
  4e:   55                      push   %ebp
  4f:   89 e5                   mov    %esp,%ebp
  51:   83 ec 08                sub    $0x8,%esp
  54:   66 0f 6e 45 08          movd   0x8(%ebp),%xmm0
  59:   66 0f d6 45 f8          movq   %xmm0,-0x8(%ebp)
  5e:   df 6d f8                fildll -0x8(%ebp)
  61:   c9                      leave  
  62:   c3                      ret    

00000063 <uint2float>:
  63:   55                      push   %ebp
  64:   89 e5                   mov    %esp,%ebp
  66:   83 ec 08                sub    $0x8,%esp
  69:   66 0f 6e 45 08          movd   0x8(%ebp),%xmm0
  6e:   66 0f d6 45 f8          movq   %xmm0,-0x8(%ebp)
  73:   df 6d f8                fildll -0x8(%ebp)
  76:   c9                      leave  
  77:   c3                      ret 
```

以下是奖励积分（转换为整数）：

```
% cat toints.c                                      
unsigned long long float2ulonglong(float a) {
    return a;
}
unsigned long long double2ulonglong(double a) {
    return a;
}
unsigned int float2uint(float a) {
    return a;
}
unsigned int double2uint(double a) {
    return a;
}
% gcc -msse4.2 -g -Os -c toints.c && objdump -d toints.o  
00000000 <float2ulonglong>:
   0:   55                      push   %ebp
   1:   89 e5                   mov    %esp,%ebp
   3:   53                      push   %ebx
   4:   83 ec 0c                sub    $0xc,%esp
   7:   d9 45 08                flds   0x8(%ebp)
   a:   d9 05 00 00 00 00       flds   0x0
  10:   d9 c9                   fxch   %st(1)
  12:   db e9                   fucomi %st(1),%st
  14:   73 0d                   jae    23 <float2ulonglong+0x23>
  16:   dd d9                   fstp   %st(1)
  18:   dd 4d f0                fisttpll -0x10(%ebp)
  1b:   8b 45 f0                mov    -0x10(%ebp),%eax
  1e:   8b 55 f4                mov    -0xc(%ebp),%edx
  21:   eb 13                   jmp    36 <float2ulonglong+0x36>
  23:   de e1                   fsubp  %st,%st(1)
  25:   dd 4d f0                fisttpll -0x10(%ebp)
  28:   8b 55 f4                mov    -0xc(%ebp),%edx
  2b:   8b 45 f0                mov    -0x10(%ebp),%eax
  2e:   8d 8a 00 00 00 80       lea    -0x80000000(%edx),%ecx
  34:   89 ca                   mov    %ecx,%edx
  36:   83 c4 0c                add    $0xc,%esp
  39:   5b                      pop    %ebx
  3a:   5d                      pop    %ebp
  3b:   c3                      ret    

0000003c <double2ulonglong>:
  3c:   55                      push   %ebp
  3d:   89 e5                   mov    %esp,%ebp
  3f:   53                      push   %ebx
  40:   83 ec 0c                sub    $0xc,%esp
  43:   dd 45 08                fldl   0x8(%ebp)
  46:   d9 05 00 00 00 00       flds   0x0
  4c:   d9 c9                   fxch   %st(1)
  4e:   db e9                   fucomi %st(1),%st
  50:   73 0d                   jae    5f <double2ulonglong+0x23>
  52:   dd d9                   fstp   %st(1)
  54:   dd 4d f0                fisttpll -0x10(%ebp)
  57:   8b 45 f0                mov    -0x10(%ebp),%eax
  5a:   8b 55 f4                mov    -0xc(%ebp),%edx
  5d:   eb 13                   jmp    72 <double2ulonglong+0x36>
  5f:   de e1                   fsubp  %st,%st(1)
  61:   dd 4d f0                fisttpll -0x10(%ebp)
  64:   8b 55 f4                mov    -0xc(%ebp),%edx
  67:   8b 45 f0                mov    -0x10(%ebp),%eax
  6a:   8d 8a 00 00 00 80       lea    -0x80000000(%edx),%ecx
  70:   89 ca                   mov    %ecx,%edx
  72:   83 c4 0c                add    $0xc,%esp
  75:   5b                      pop    %ebx
  76:   5d                      pop    %ebp
  77:   c3                      ret    

00000078 <float2uint>:
  78:   55                      push   %ebp
  79:   89 e5                   mov    %esp,%ebp
  7b:   83 ec 08                sub    $0x8,%esp
  7e:   d9 45 08                flds   0x8(%ebp)
  81:   dd 4d f8                fisttpll -0x8(%ebp)
  84:   8b 45 f8                mov    -0x8(%ebp),%eax
  87:   c9                      leave  
  88:   c3                      ret    

00000089 <double2uint>:
  89:   55                      push   %ebp
  8a:   89 e5                   mov    %esp,%ebp
  8c:   83 ec 08                sub    $0x8,%esp
  8f:   dd 45 08                fldl   0x8(%ebp)
  92:   dd 4d f8                fisttpll -0x8(%ebp)
  95:   8b 45 f8                mov    -0x8(%ebp),%eax
  98:   c9                      leave  
  99:   c3                      ret 
```

函数从堆栈中获取输入并通过堆栈返回。如果您需要在函数结束时将结果保存在 XMM 寄存器中，您可以使用 movd/movq 将它们从堆栈中取出到 XMM。如果函数返回双精度，则结果为 -0x8(%ebp)。如果是浮点数，则结果为 -0x4(%ebp)。Ulonglong 具有双精度数的长度，整数具有浮点数的长度。

### fistpll：使用截断存储整数

> FISTTP 使用截断（chop）作为舍入方式将 ST 中的值转换为有符号整数，将结果传输到目标，然后弹出 ST。FISTTP 接受字、短整数和长整数目标。

### fucomi：比较浮点值并设置 EFLAGS

> 对寄存器 ST(0) 和 ST(i) 的内容进行无序比较，并根据结果设置 EFLAGS 寄存器中的状态标志 ZF、PF 和 CF（见下表）。比较时忽略零符号，因此 –0.0 等于 +0.0。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T16:26:22.997

无耻地使用 Janus 答案作为模板（毕竟我真的很喜欢 C++）：

在 i7 上生成`gcc -march=native -O3`，所以这是最高和包括`-mavx`. `uint2float`反之亦然，正如预期的那样，长转换只有大于 2 ^(63) -1 的数字的特殊情况。

```
0000000000000000 <ulong2double>:
   0:   48 85 ff                test   %rdi,%rdi
   3:   78 0b                   js     10 <ulong2double+0x10>
   5:   c4 e1 fb 2a c7          vcvtsi2sd %rdi,%xmm0,%xmm0
   a:   c3                      retq   
   b:   0f 1f 44 00 00          nopl   0x0(%rax,%rax,1)
  10:   48 89 f8                mov    %rdi,%rax
  13:   83 e7 01                and    $0x1,%edi
  16:   48 d1 e8                shr    %rax
  19:   48 09 f8                or     %rdi,%rax
  1c:   c4 e1 fb 2a c0          vcvtsi2sd %rax,%xmm0,%xmm0
  21:   c5 fb 58 c0             vaddsd %xmm0,%xmm0,%xmm0
  25:   c3                      retq   

0000000000000030 <ulong2float>:
  30:   48 85 ff                test   %rdi,%rdi
  33:   78 0b                   js     40 <ulong2float+0x10>
  35:   c4 e1 fa 2a c7          vcvtsi2ss %rdi,%xmm0,%xmm0
  3a:   c3                      retq   
  3b:   0f 1f 44 00 00          nopl   0x0(%rax,%rax,1)
  40:   48 89 f8                mov    %rdi,%rax
  43:   83 e7 01                and    $0x1,%edi
  46:   48 d1 e8                shr    %rax
  49:   48 09 f8                or     %rdi,%rax
  4c:   c4 e1 fa 2a c0          vcvtsi2ss %rax,%xmm0,%xmm0
  51:   c5 fa 58 c0             vaddss %xmm0,%xmm0,%xmm0
  55:   c3                      retq   

0000000000000060 <uint2double>:
  60:   89 ff                   mov    %edi,%edi
  62:   c4 e1 fb 2a c7          vcvtsi2sd %rdi,%xmm0,%xmm0
  67:   c3                      retq   

0000000000000070 <uint2float>:
  70:   89 ff                   mov    %edi,%edi
  72:   c4 e1 fa 2a c7          vcvtsi2ss %rdi,%xmm0,%xmm0
  77:   c3                      retq 
```

# mysql - 使用 FIND_IN_SET 选择记录

> ID：11406655
> 
> 赞同：0
> 
> 时间：2012-07-10T04:32:50.597
> 
> 标签：mysql, select

我将复选框值作为逗号分隔值存储在数据库中，例如

```
Features

1,3,4

1,2,3,4,5

3,4,5,6 
```

现在在搜索时我需要根据用户选择复选框来选择记录，例如如果用户选择`1 and 6`需要获取匹配的记录。我将选中的复选框值作为数组，如`(0=>1,1=>6)`. 我不知道如何像这样循环`FIND_IN_SET(1,Features) OR FIND_IN_SET(6,Features)`

它必须像

```
SELECT * FROM table WHERE FIND_IN_SET(1,Features) OR FIND_IN_SET(6,Features) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T04:41:17.313

```
$str='%';
foreach($array as $val)
{$str.=$val.'%';}

SELECT * FROM table WHERE Features like $str 
```

更新：

```
$str='';
    foreach($array as $val)
    {$str.='or Feature like %'.$val.'%';}
$str[0]='';$str[1]='';

    SELECT * FROM table WHERE $str 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:01:49.603

我使用下面的代码修复了这样的查询`SELECT * FROM table WHERE FIND_IN_SET(1,Features) OR FIND_IN_SET(6,Features)`

```
if($selCount >1){
    foreach($luxPropFeatures as $val) {
      $str .="OR FIND_IN_SET('".$val."',LP.luxury_property_feature_id) ";
      $trimmed = ltrim($str, "OR"); 
      //$str[0]='';$str[2]='';
     }
}else{

    foreach($luxPropFeatures as $val) {
        $trimmed = "FIND_IN_SET('".$val."',LP.luxury_property_feature_id) ";
    }

} 
```

# python - python nltk从句子中提取关键字

> ID：11406657
> 
> 赞同：6
> 
> 时间：2012-07-10T04:33:06.340
> 
> 标签：python, nlp, nltk

> “我们要做的第一件事，就是杀了所有的律师。” -*威廉莎士比亚*

鉴于上面的引用，我想拔出`"kill"`和`"lawyers"`作为两个突出的关键词来描述句子的整体含义。我提取了以下名词/动词 POS 标签：

```
[["First", "NNP"], ["thing", "NN"], ["do", "VBP"], ["lets", "NNS"], ["kill", "VB"], ["lawyers", "NNS"]] 
```

我试图解决的更普遍的问题是将一个句子提炼成“最重要的”*单词/标签，以总结一个句子的整体“意义”*。

*注意吓人的引号。我承认这是一个非常困难的问题，目前很可能没有完美的解决方案。尽管如此，我有兴趣看到解决特定问题（提取`"kill"`和`"lawyers"`）和一般问题（总结关键字/标签中句子的整体含义）的尝试

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T02:10:16.037

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T05:06:50.063

一种简单的方法是保留NN、VB 等的[停用词](http://en.wikipedia.org/wiki/Stop_words "停用词")列表。这些是高频词，通常不会给句子添加太多语义内容。

下面的代码片段显示了每种单词标记的不同列表，但您也可以为动词和名词使用一个停用词列表（例如[这个](http://www.ranks.nl/resources/stopwords.html)）。

```
stop_words = dict(
    NNP=['first', 'second'],
    NN=['thing'],
    VBP=['do','done'],
    VB=[],
    NNS=['lets', 'things'],
)

def filter_stop_words(pos_list):
    return [[token, token_type] 
            for token, token_type in pos_list 
            if token.lower() not in stop_words[token_type]] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-18T11:21:17.080

在你的情况下，你可以简单地使用Python 的[Rake](https://github.com/fabianvf/python-rake)（感谢 Fabian）包来获得你需要的东西：

```
>>> path = #your path 
>>> r = RAKE.Rake(path)
>>> r.run("First thing we do, let's kill all the lawyers")
[('lawyers', 1.0), ('kill', 1.0), ('thing', 1.0)] 
```

例如，路径可以是[这个](https://github.com/fabianvf/python-rake/blob/master/stoplists/SmartStoplist.txt)文件。

但总的来说，你最好使用 NLTK 包来进行 NLP 用法

# java - 线程缺少来自其他线程的更新

> ID：11406666
> 
> 赞同：1
> 
> 时间：2012-07-10T04:33:53.587
> 
> 标签：java, multithreading

我在一个 java 程序中创建了三个线程。一个是主程序，另外两个是扩展 Thread 的两个类。主线程代表机器的控制器。另一个线程是执行器，第三个是传感器。控制器在其自己的类中设置变量，由执行器线程读取。执行器根据指令执行某些动作并更新自己的内部变量。这些依次由传感器线程读取，该线程读取执行器变量（代表现实世界的动作）并设置其自己的内部变量，这些变量又由控制器读取，我们已经完成了一个完整的循环。然后控制器根据新感知的世界等设置变量。

执行器处于一个永久循环中，每个循环中休眠 100 毫秒。传感器也处于一个永久循环中，每个循环休眠 20 毫秒。

该系统几乎可以工作。主循环将错过传感器的更新，除非我也为其添加睡眠。我现在的问题是为什么会这样？即使 sleep(0) 也会使系统正常工作。我已将语句放在 performJob(Job input) while 循环中。没有 sleep 调用的 java 主线程的行为与具有相同线程的线程有何不同？并发对我来说是一个相当新的主题。

这是我正在使用的代码：

主要的：

```
public class Main {
    public static void main(String[] args) {
        Controller Press = new Controller();

        Press.processUnits(1);  // no reset code at the moment, only use 1 at a time
        Press.shutdownThreads();
    }
} 
```

控制器：

```
import java.util.LinkedList;

public class Controller extends Thread {
    // Constants
    static final int STATE_WAITING          = 0;
    static final int STATE_MOVE_ARMS        = 1;
    static final int STATE_MOVE_PRESS       = 2;

    static final int LOADINGARM             = 2;
    static final int UNLOADINGARM           = 1;
    static final int NOARM                  = 0;        
    static final boolean EXTEND             = true;
    static final boolean RETRACT            = false;

    private enum Jobs {
        EXTENDRETRACT, ROTATE, MAGNETONOFF, PRESSLOWERRAISE
    }

    // Class variables
    private int currentState;

    // Component instructions
    private int armChoice = 0;
    private boolean bool = false;       // on, up, extend / off, down, retract

    private boolean[] rotInstr = {false, false}; // {rotate?, left true/right false}
    private boolean errorHasOccurred = false;
    private boolean pressDir = false;
    private Sensors sense = null;
    private Actuators act = null;
    private LinkedList<Job> queue = null;

    // Constructor
    public Controller() {
        act = new Actuators(0.0f, this);
        sense = new Sensors();

        act.start();
        sense.start();

        currentState = STATE_WAITING;
        queue = new LinkedList<Job>();
    }

    // Methods

    int[] getArmInstructions() {
        int extret = (bool) ? 1 : 0;
        int[] ret = {armChoice, extret};

        return ret;
    }

    boolean[] getRotation() {
        return rotInstr;
    }

    int getControllerState() {
        return currentState;
    }

    boolean getPressDirection() {
        return pressDir;
    }

    public boolean processUnits(int nAmount) {
        if (run(nAmount)) {
            System.out.println("Controller: All units have been processed successfully.");
            return true;
        } else {    // procUnits returning false means something went wrong
            System.out.println("Controller: An error has occured. The process cannot complete.");
            return false;
        }
    }

    /*
     * This is the main run routine. Here the controller analyses its internal state and its sensors
     * to determine what is happening. To control the arms and press, it sets variables, these symbolize
     * the instructions that are sent to the actuators. The actuators run in a separate thread which constantly
     * reads instructions from the controller and act accordingly. The sensors and actuators are dumb, they
     * will only do what they are told, and if they malfunction it is up to the controller to detect dangers or
     * malfunctions and either abort or correct.
     */

    private boolean run(int nUnits) {
        /*
        Here depending on internal state, different actions will take place. The process uses a queue of jobs
        to keep track of what to do, it reads a job, sets the variables and then waits until that job has finished
        according to the sensors, it will listen to all the sensors to make sure the correct sequence of events is
        taking place. The controller reads the sensor information from the sensor thread which runs on its own
        similar to the controller.

        In state waiting the controller is waiting for input, when given the thread cues up the appropriate sequence of jobs
        and changes its internal state to state move arms

        In Move arms, the controller is actively updating its variables as its jobs are performed,
        In this state the jobs are, extend, retract and rotate, pickup and drop.
        From this state it is possible to go to move press state once certain conditions apply

        In Move Press state, the controller through its variables control the press, the arms must be out of the way!
        In this state the jobs are press goes up or down. Pressing is taking place at the topmost position, middle position is for drop off
        and lower is for pickup. When the press is considered done, the state reverts to move arms,
        */

        //PSEUDO CODE:
        //This routine being called means that there are units to be processed

        //Make sure the controller is not in a blocking state, that is, it shut down previously due to errors
        //dangers or malfunctions

        //If all ok - ASSUMED SO AS COMPONENTS ARE FAULT FREE IN THIS VERSION
        if (!errorHasOccurred) {

            //retract arms
            currentState = STATE_MOVE_ARMS;
            queue.add(new Job(Jobs.EXTENDRETRACT, LOADINGARM, RETRACT));
            queue.add(new Job(Jobs.EXTENDRETRACT, UNLOADINGARM, RETRACT));
            performWork();
            //System.out.println("Jobs added");

            //while there are still units to process
            for (;nUnits != 0; nUnits--) {
                //move the press to lower position, for unloading
                currentState = STATE_MOVE_PRESS;

                //rotate to pickup area and pickup the metal, also pickup processed
                currentState = STATE_MOVE_ARMS;
                queue.add(new Job(Jobs.EXTENDRETRACT, LOADINGARM, EXTEND));
                queue.add(new Job(Jobs.EXTENDRETRACT, UNLOADINGARM, EXTEND));
                performWork();

                //retract and rotate
                queue.add(new Job(Jobs.EXTENDRETRACT, LOADINGARM, RETRACT));
                queue.add(new Job(Jobs.EXTENDRETRACT, UNLOADINGARM, RETRACT));
                performWork();

                //state change, press moves to middle position
                currentState = STATE_MOVE_PRESS;

                //state change back, put the metal on the press, drop processed and pull arms back
                currentState = STATE_MOVE_ARMS;
                queue.add(new Job(Jobs.EXTENDRETRACT, LOADINGARM, EXTEND));
                queue.add(new Job(Jobs.EXTENDRETRACT, UNLOADINGARM, EXTEND));
                queue.add(new Job(Jobs.EXTENDRETRACT, LOADINGARM, RETRACT));
                queue.add(new Job(Jobs.EXTENDRETRACT, UNLOADINGARM, RETRACT));
                performWork();

                //state change, press the metal in upper position
                currentState = STATE_MOVE_PRESS;

                //repeat until done
            }

            //unload final piece

            //move the press to lower position for unload

            //rotate and pickup processed piece

            //drop it off at unloading and wait for more orders
            currentState = STATE_WAITING;
        }

        return true;
    }

    private boolean performWork() {
        while (!queue.isEmpty()) {
                performJob(queue.removeFirst());
        }

        return true;
    }

    private boolean performJob(Job input) {
        //The purpose of this function is to update the variables and wait until they are completed

        // read in the job and check appropriate sensors
        boolean[] data = sense.getSensorData(); // LExt, LRet, UlExt, UlRet
        printBools(data);
        int Instruction = input.Instruction;
        boolean skipVars = false;

        if (input.Job == Jobs.EXTENDRETRACT) {
            if (currentState != STATE_MOVE_ARMS){
                System.out.println("Wrong state in performJob. State is "+currentState+" expected "+STATE_MOVE_ARMS);
                return false;
            }

            if ((Instruction == LOADINGARM) && (input.Bool)) skipVars = data[0];
            if ((Instruction == LOADINGARM) && (!input.Bool)) skipVars = data[1];
            if ((Instruction == UNLOADINGARM) && (input.Bool)) skipVars = data[2];
            if ((Instruction == UNLOADINGARM) && (!input.Bool)) skipVars = data[3];
        }

        if (!skipVars) {
            // if sensors not at intended values, update correct variables
            System.out.println("Controller: Did not skip vars");

            switch (input.Job) {
                case EXTENDRETRACT:
                    armChoice = (Instruction == LOADINGARM) ? LOADINGARM : UNLOADINGARM;
                    bool = input.Bool;  
                    break;

                case ROTATE:
                    break;

                case MAGNETONOFF:
                    break;

                case PRESSLOWERRAISE:
                    break;

                default: 
                    System.out.println("Default called in performJob()");
                    break;
            }
        }

        // listen to sensors until completed
        boolean done = false;

        System.out.println("Waiting for sensor data.");
        //System.out.print("Instruction is "+Instruction+" and bool is "); if (input.Bool) System.out.print("true\n"); else System.out.print("false\n");
        while (!done) {
            data = sense.getSensorData();

            // REMOVING THIS TRY STATEMENT BREAKS THE PROGRAM
            try {
                  Thread.currentThread().sleep(10);
            } catch (InterruptedException e) {
                System.out.println("Main thread couldn't sleep.");
            }

            // Check appropriate sensors
            if (input.Job == Jobs.EXTENDRETRACT) {
                if ((Instruction == LOADINGARM) && (input.Bool)) done = data[0];
                if ((Instruction == LOADINGARM) && (!input.Bool)) done = data[1];
                if ((Instruction == UNLOADINGARM) && (input.Bool)) done = data[2];
                if ((Instruction == UNLOADINGARM) && (!input.Bool)) done = data[3];

            }
        }

        // reset all variables
        armChoice = 0;
        bool = false;

        // when done return
        System.out.println("Finished "+input.Job);
        return true;
    }

    public void shutdownThreads() {
        sense.shutDown();
        act.shutDown();
    }

    private class Job {
        // Class variables
        Jobs Job;
        int Instruction;
        boolean Bool;   // used for directions, up/down, left/right, extend/retract

        // Constructor
        Job(Jobs newJob, int newInstruction, boolean dir) {
            Job = newJob;
            Instruction = newInstruction;
            Bool = dir;
        }
    }

    private void printBools(boolean[] input) {
        System.out.println();
        for (int i = 0; i < input.length; i++) {
            if (input[i]) System.out.print("true "); else System.out.print("false "); 
        }
        System.out.println();
    }
} 
```

执行器：

```
public class Actuators extends Thread {
    // Constants
    private final int ARM = 0, ROTATE = 0; // array indexes - which arm, rotate yes/no? 
    private final int DIR = 1, ROTDIR = 1; // array indexes - which direction ext/ret, rotate direction
    private final int EXT = 1;//, RET = 0;
    private final double ARM_SPEED = 5.0;

    // Class variables
    private Controller Owner = null;
    private boolean run = true;

    // Constructor
    Actuators(float nPos, Controller Owner) {
       Reality.changeAngle(nPos);
       this.Owner = Owner;
    }

    // Methods
    private void rotate(boolean dir) {
        float nAngle = dir ? 0.1f : -0.1f;
        Reality.changeAngle(nAngle);
    }

    public void run() {
        while (run) {
            try {
                sleep(100);
            } catch (InterruptedException e) {
                System.out.println("Actuators couldn't sleep");
            }

            // read variables in controller
            int nState = Owner.getControllerState();

            if (nState == Controller.STATE_MOVE_ARMS) {
                boolean[] rot = Owner.getRotation();

                if (rot[ROTATE]) { // Rotation?
                    rotate(rot[ROTDIR]); 
                } else { // or arm extensions
                    int[] instr = Owner.getArmInstructions();

                    if (instr[ARM] != Controller.NOARM) {   // 0 = no arm movement
                        //System.out.println("Actuator arm is "+instr[ARM]);
                        double dir = (instr[DIR] == EXT) ? ARM_SPEED : -ARM_SPEED;  // 1 = extend, 0 = retract
                        Reality.changeArmLength(instr[ARM], dir);
                    }
                }               
            }
        }
    }

    void shutDown() {
        run = false;
    }
} 
```

Reality 是一个由静态字段和方法组成的类，由执行器写入并由传感器读取。

```
public class Reality {
    // Constants
    static private final double EXTEND_LIMIT = 100.0;
    static private final double RETRACT_LIMIT = 0.0;

    // Variables
    private static float ArmsAngle = 0.0f;

    // Read by Sensor
    static double LoadingArmPos = 0.0;
    static double UnloadingArmPos = 0.0;

    // Methods

    static void changeAngle(float newAngle) {
        ArmsAngle = ArmsAngle + newAngle;

        if ((ArmsAngle < 0.0f) || (ArmsAngle > 90.0f))
            System.out.println("Reality: Unallowed Angle");
    }

    static void changeArmLength(int nArm, double dPos) {    // true = extend, false = retract
        switch (nArm) {
            case Controller.LOADINGARM:
                LoadingArmPos += dPos;
                checkArmPos(LoadingArmPos);
                break;

            case Controller.UNLOADINGARM:
                UnloadingArmPos += dPos;
                checkArmPos(UnloadingArmPos);
                break;

            default:
                System.out.println("Arm other than 2 (load) or 1 (unload) in changeArmLength in Reality");
                break;
        }
    }

    static float senseAngle() {
        return ArmsAngle;
    }

    static private boolean checkArmPos(double dPos) {
        // Allowed positions are 100.0 to 0.0
        if ((dPos > EXTEND_LIMIT) || (dPos < RETRACT_LIMIT)) {  
            System.out.println("Arm position impossible in reality. Is "+dPos);
            return true;
        } else {
            return false;
        }
    }
} 
```

最后是传感器：

```
public class Sensors extends Thread {
    // Constants
    private final double EXTENDED = 100.0;
    private final double RETRACTED = 0.0;
    private final double MARGIN = 0.1;

    // Class Variables
    private boolean run = true;

    // Read by Controller
    private boolean LoadingExtended = true;
    private boolean LoadingRetracted = true;
    private boolean UnloadingExtended = true;
    private boolean UnloadingRetracted = true;

    // Constructor
    Sensors() {         
        LoadingExtended = false;
        LoadingRetracted = true;
        UnloadingExtended = false;
        UnloadingRetracted = true;
    }

    // Methods
    boolean senseLoadingExtended() {
        return (Math.abs(Reality.LoadingArmPos - EXTENDED) < MARGIN);
    }

    boolean senseLoadingRetracted() {
        return (Math.abs(Reality.LoadingArmPos - RETRACTED) < MARGIN);
    }

    boolean senseUnloadingExtended() {
        return (Math.abs(Reality.UnloadingArmPos - EXTENDED) < MARGIN);
    }

    boolean senseUnloadingRetracted() {
        return (Math.abs(Reality.UnloadingArmPos - RETRACTED) < MARGIN);
    }

    // called by Controller
    boolean[] getSensorData() {
        boolean[] ret = {LoadingExtended, LoadingRetracted, UnloadingExtended, UnloadingRetracted};
        return ret;
    }

    // Sensor primary loop
    public void run() {
        while (run) {
            try {
                sleep(20);
            }
            catch (InterruptedException e) {
                System.out.println("Sensors couldn't sleep");
            }

            LoadingExtended = senseLoadingExtended();
            LoadingRetracted = senseLoadingRetracted();
            UnloadingExtended = senseUnloadingExtended();
            UnloadingRetracted = senseUnloadingRetracted();
        }
    }

    void shutDown() {
        run = false;
    }

} 
```

此版本中并未读取所有字段和函数。该程序是对以前主要使用函数调用的单线程应用程序的改造。为了便于阅读，我对代码进行了一些清理。即使不是最初的问题，也欢迎建设性的设计评论。发生了一些非常可疑的事情。我通常不是一个迷信的编码员，但我可以例如用 System.out.println() 调用替换睡眠调用，并且程序将运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:26:46.283

这里发生的很可能是内存一致性错误。当控制器类设置内部控制变量然后进入循环等待传感器时，它很可能会阻止执行器和传感器类正确更新控制器看到的读数，从而阻止控制器看到正确的值。通过将同步语句添加到从另一个类读取的所有函数中，问题得到了解决。我只能推测睡眠调用让控制器线程进入了某种同步块，这让其他线程对变量的更改变得可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T04:46:01.123

谷歌的“生产者消费者队列”。

除非您想要延迟、低效率和丢失数据，否则不要将 sleep() 用于线程间通信。有更好的机制可以避免 sleep() 并尝试直接从某些共享/锁定对象中读取有效数据。

如果您使用命令/请求/数据加载“通信”对象，将它们排队到其他线程并立即创建另一个通信对象以进行后续通信，您的线程间通信将快速且安全，没有 sleep() 延迟并且没有机会任何线程读取过时的数据或被另一个线程更改的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T04:44:47.457

您使用的是哪个 JVM？

作为快速解决方法，您可以为线程之间共享的字段设置 volatile。

还请查看演员的消息传递方法：http: [//doc.akka.io/docs/akka/snapshot/java/untyped-actors.html](http://doc.akka.io/docs/akka/snapshot/java/untyped-actors.html)

# c# - 在选择一个节点时折叠 TreeView 的其他节点

> ID：11406669
> 
> 赞同：1
> 
> 时间：2012-07-10T04:34:16.930
> 
> 标签：c#, winforms, visual-studio-2008, treeview

我在 * *winform*应用程序 *tion上有一个**树视图**控件。在这里，我想要做的是： *折叠他级别的所有其他节点并仅消耗选定的节点*。例如，假设场景： - 所有科目 + 计算机科学 + 数学

 ****根节点**是“**所有科目**”，两个**子节点**是**1)**计算机科学和**2)**数学。这两*个子节点还有更多的子节点*。

**当我选择计算机科学时，数学节点应该被折叠，计算机科学节点应该被展开。** 如何实现？欢迎提出实现这一目标的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:16:43.840

**编辑**（感谢*Hans Passant*） Handel`AfterSelect`或`BeforeSelect`事件，并折叠其他兄弟节点。像这样：

```
private void TreeViewAfterSelect(object sender, TreeViewCancelEventArgs e)
{
    foreach (TreeNode node in e.Node.Parent.Nodes)
    {
        if(node != e.Node)
            node.Collapse();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T05:07:28.767

检查树视图节点的方法`Collapse()`、`CollapseAll()`、`Expand()`和`ExpandAll()`。

```
treeView1.SelectedNode.Collapse(); 
```

阅读MSDN 上的[Collapse](http://msdn.microsoft.com/en-us/library/system.windows.forms.treenode.collapse%28v=vs.71%29.aspx)、[CollapseAll](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.collapseall.aspx)和[Expand](http://msdn.microsoft.com/en-us/library/system.windows.forms.treenode.expand.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-04T15:39:04.957

基于 Ria 的解决方案，我们可以使用递归折叠兄弟节点和每个兄弟节点的子节点。以下适用于 WPF：

```
 private void CollapseAll(ItemsControl Items, bool Collapse)
    {
        foreach (object obj in Items.Items)
        {
            ItemsControl ChildControl = Items.ItemContainerGenerator.ContainerFromItem(obj) as ItemsControl;
            if (ChildControl != null)
            {
                CollapseAll(ChildControl, Collapse);
            }
            TreeViewItem Item = ChildControl as TreeViewItem;
            if (Item != null) Item.IsExpanded = false;
        }
    }

    private void treeView1_SelectedItemChanged(object sender, RoutedPropertyChangedEventArgs<object> e)
    {
        TreeViewItem CurrentItem = (TreeViewItem)treeView1.SelectedItem;
        if (CurrentItem == null) return;
        if (!(CurrentItem.Parent is TreeViewItem)) return;
        TreeViewItem Parent = (TreeViewItem)CurrentItem.Parent;
        if (Parent == null) return;
        foreach (TreeViewItem TreeViewItem in Parent.Items)
        {
            if (TreeViewItem != CurrentItem)
            {
                CollapseAll(TreeViewItem, true);
                TreeViewItem.IsExpanded = false;
            }
        }
    }
} 
```**

# c++ - Lambda 捕获导致不兼容的操作数类型错误？

> ID：11406678
> 
> 赞同：7
> 
> 时间：2012-07-10T04:35:08.920
> 
> 标签：c++, lambda, c++11, clang

考虑以下代码：

```
main()
{
    bool t;
    ...
    std::function<bool (bool)> f = t ? [](bool b) { return b; } : [](bool b) { return !b; }; // OK
    std::function<bool (bool)> f = t ? [t](bool b) { return t == b; } : [t](bool b) { return t != b; }; // error
} 
```

当使用 Clang 3.1 编译时，非捕获 lambda 的分配有效，而具有捕获的分配失败：

```
main.cpp:12:36: error: incompatible operand types ('<lambda at main.cpp:12:38>' and '<lambda at main.cpp:12:71>')
        std::function<bool (bool)> f2 = t ? [t](bool b) { return t == b; } : [t](bool b) { return t != b; }; // error
                                          ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
```

为什么捕获相同的变量会导致 2 个 lambda 的类型不兼容？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-10T05:07:20.400

lambda 的类型是称为闭包类型的“唯一的非联合类类型”。每个 lambda 都被实现为不同的类型，在声明范围内是局部的，它有一个重载的 operator () 来调用函数体。

**示例**：如果你这样写：

```
auto a=[t](bool b){return t==b;};
auto b=[t](bool b){return t!=b;}; 
```

然后编译器编译这个（或多或少）：

```
class unique_lambda_name_1 
{
 bool t; 
public:
 unique_lambda_name_1(bool t_) t(_t) {}
 bool operator () (bool b) const { return t==b; }
} a(t); 
class unique_lambda_name_2
{
 bool t;
public: 
 unique_lambda_name_2(bool t_) t(_t) {}
 bool operator () (bool b) const { return t!=b; }
} b(t); 
```

a 和 b 具有不同的类型，不能在 ?: 运算符中使用。

但是，§5.1.2(6) 说，没有捕获的 lambda 的闭包类型有一个非显式的公共转换运算符，它将 lambda 转换为函数指针 - 非闭包可以实现为简单的函数。任何具有相同参数和返回类型的 lambda 都可以转换为相同类型的指针，因此可以将三元 ?: 运算符应用于它们。

**示例：**非捕获 lambda：

```
auto c=[](bool b){return b;}; 
```

是这样实现的：

```
class unique_lambda_name_3
{
 static bool body(bool b) { return b; }
 public:
 bool operator () (bool b) const { return body(b); }
 operator decltype(&body) () const { return &body; }
} c; 
```

这意味着这一行：

```
auto x = t?[](bool b){return b;}:[](bool b){return !b;}; 
```

实际上是这个意思：

```
// a typedef to make this more readable
typedef bool (*pfun_t)(bool); 
pfun_t x = t?((pfun_t)[](bool b){return b;}):(pfun_t)([](bool b){return !b;}); 
```

# ios - 基础 SDK 缺少 xcode 4.3.3

> ID：11406680
> 
> 赞同：1
> 
> 时间：2012-07-10T04:35:26.330
> 
> 标签：ios, xcode, simulator

我使用 OSX 10.7.4 、 Xcode 4.3.3 和 iPad iOS 5.1.1 。我已经在 iPad 上运行了我的应用程序，但该应用程序无法打开。我发现我的 Xcode 缺少基本 sdk。我也没有可以选择模拟器的文件夹。只有 MacOSX10.4u.sdk MacOSX10.5u.sdk MacOSX10.6u.sdk 的文件夹。我怎样才能完美地运行我的应用程序。

**更新：**

这就是问题

![在此处输入图像描述](../Images/555aa625c9cac390f42a86ca8811c062.png)

并且没有 iOS sdk

![在此处输入图像描述](../Images/3b2ea6ef19312754c6a748400244a901.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:37:31.783

前往您的项目设置，然后在“摘要”下将“部署目标”更改为您喜欢的任何内容（例如“5.0”）。如果这不起作用，请通过“产品”菜单选择“管理方案”，然后选择“立即自动创建方案”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T05:16:42.727

这是您的旧项目之一，还是您从其他地方获得的某个项目（甚至包括 Apple 提供的示例项目）？您可以通过选择左侧面板顶部的项目来修复此“缺少基础 SDK”（在此示例中，它是 Apple 的示例之一“Recipes”，然后单击“验证设置”按钮：

![在此处输入图像描述](../Images/3009be512b667e2fa1800805896c2e21.png)

完成此操作后，您可能会收到有关更新项目的消息。继续，你应该很好：

![在此处输入图像描述](../Images/40a7343e4990e3d676c2dc4b95f2e6f5.png)

如果您刚刚创建了项目，那么它就是另外一回事了。但这是“缺少基本 SDK”的最常见情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-11T00:24:02.220

我来这里寻找 XCode 3.2.6 的解决方案，但其他答案似乎并不适用。进一步的实验发现 Project -> Edit Active Target 然后在该页面上设置 Base SDK 正是我所需要的。希望这可以帮助下一个跌跌撞撞的人。

# javascript - Window.print() 不起作用

> ID：11406681
> 
> 赞同：1
> 
> 时间：2012-07-10T04:35:31.033
> 
> 标签：javascript, printing, window

为什么这不起作用？仅加载页面。不打印。在这里，我获取 iframe 的 src 并在新窗口中打开该 url。

```
var myDivObj = document.getElementById('resumedocument').src;
var someXml = '<html><title>Resume</title><body onload="window.print();"><iframe style="height: 1000px; width: 1260px;" src="' + myDivObj + '"/></body></html>';
var printwindow = window.open('', '_blank','fullscreen=yes');
printwindow.document.write(someXml);
printwindow.onload = function() {                               
   printwindow.self.focus();
   printwindow.self.print();
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T04:52:31.380

您不需要在 onload 中执行此操作，因为您正在执行自己的 document.write。以下代码作为示例：

```
 var someXml = '<html><body>Stuff</body></html>';
    var printwindow = window.open('', '_blank','fullscreen=yes');
    printwindow.document.write(someXml);
    printwindow.print(); 
```

我认为您的问题是加载文档时在 window.open 方法期间会触发 onload 。此时您的文档是''，因此没有处理程序。

要等待 IFRAME 加载，您需要将 onload 处理程序移到那里。例如：

```
 var someXml = '<html><body><iframe id=Frame width="800" height="800" src="http://jsfiddle.net" /></body></html>';
    var printwindow = window.open('', '_blank','fullscreen=yes');
    printwindow.document.write(someXml);
    printwindow.document.getElementById('Frame').onload = function () {
        printwindow.self.focus();
        printwindow.print();
    };​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T04:59:53.537

替换这一行：

```
printwindow.onload = function() {                               
    printwindow.self.focus();
    printwindow.self.print();
}; 
```

有了这条线：

```
printwindow.document.getElementsByTagName('iframe')[0].onload = function () {
    printwindow.self.focus();
    printwindow.print();
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T04:42:23.203

您是否尝试过没有自我，例如`printwindow.print()`？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T05:53:05.280

```
var url = document.getElementById('resumedocument').src;
var printwindow = window.open('', '', 'fullscreen=yes');
printwindow.document.write('<iframe width="100%" height="100%" onload="window.print()" src='+url+'></iframe>'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-20T21:09:32.223

注意[https://developer.mozilla.org/en-US/docs/Web/API/Window/print#Notes](https://developer.mozilla.org/en-US/docs/Web/API/Window/print#Notes)：

> 从 Chrome 46.0 开始，此方法被阻止在 中，`<iframe>`除非其沙盒属性值为`allow-modals`。

# android - Android调用finish()时如何保存和恢复Activity的状态？

> ID：11406686
> 
> 赞同：1
> 
> 时间：2012-07-10T04:36:19.653
> 
> 标签：android, android-activity, state

在Android中，从Activity A，如果我启动新的Activity B，Android会自动保存Activity A的所有状态。所以当我点击返回或者从Activity B调用finish()时，Activity A会恢复到我启动时的状态Activity B（例如：一个 ScrollView 在 Activity A 中的位置，或者 ProgressBar 的值）。在 Activity AI 中有一个 ProgressBar 显示某些任务的进度，然后如果我从 Activity B 回来，ProgressBar 会恢复并继续运行。

现在我想要的是，从活动 A 中，我将调用 finish()。如何像 Android 一样保存 Activity A 的所有状态（包括我上面描述的 ProgressBar），所以当我再次启动 Activity A 时，我可以像调用 finish() 之前那样恢复所有内容，并且我的 ProgressBar 继续运行？

我可以将 Activity A 推送到 Android 中的堆栈之类的东西，然后将其弹出吗？任何人都知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T04:51:08.440

不要在单击后退按钮时调用完成。

而是调用方法“moveTaskToBack(false)”。这将“最小化”您的应用程序。下次您打开应用程序时，应用程序会以之前的状态打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T04:42:13.110

的全部意义`finish()`在于说您的活动“已完成并且应该关闭”。如果你还没有完成，就不要打电话`finish()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T04:46:02.743

当您从 Activity A 转到 Activity B 时，Android 不会杀死 Activity A。Activity A 仍然存在于后台。但是，如果 Android 需要内存，它可以随时被杀死。

要保存活动的状态，您必须手动进行。

这是一个类似的问题，答案很好：[Saving Android Activity state using Save Instance State](https://stackoverflow.com/questions/151777/how-do-i-save-an-android-applications-state)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-28T14:09:50.943

如果你想完成你的活动然后再次启动它只是为了加载一些新的配置，你可以调用活动的**recreate()**方法而不是调用**finish()**。调用 recreate() 会调用 onSaveInstanceState() 和 onRestoreInstanceState()，帮助你恢复之前的配置。

您可以查看此答案以获取更多详细信息：[How do I restart an Android Activity](https://stackoverflow.com/questions/1397361/how-do-i-restart-an-android-activity)

# php - 使用 symfony2 和 php 在生产环境中使用学说 2 迁移是否安全

> ID：11406689
> 
> 赞同：8
> 
> 时间：2012-07-10T04:37:12.567
> 
> 标签：php, symfony, doctrine-orm

我正在构建一个复杂的应用程序，但我想知道在生产中使用原则迁移是否安全。

例如。该站点已使用 1 年，公司希望向用户表添加额外属性。

我是通过进入数据库还是通过学说迁移直接改变

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-10T04:41:29.847

这是迁移的预期用途*（和好处）*之一 - 快速准确地自动更改数据库。**是**的，它们可以并且在大多数情况下*应该*用于更新生产中的数据库。

**编辑：** [Symfony2 文档](http://symfony.com/doc/current/bundles/DoctrineMigrationsBundle/index.html#running-migrations-during-deployment)也清楚地解释了这是迁移的目的之一。

> 当然，编写迁移的最终目标是能够在部署应用程序时使用它们可靠地更新数据库结构。通过在本地（或在 beta 服务器上）运行迁移，您可以确保迁移按预期工作。
> 
> ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T04:43:41.890

是的，这将是安全的。

我只想在 User 实体中添加一个额外的属性。然后运行学说：生成：实体命令。那应该生成 get/set 方法。然后只需使用教义：模式：更新--force 更新您的数据库。那应该将它添加到您的数据库表中。

# iphone - 使用 MKReverseGeoCoder 时出错

> ID：11406691
> 
> 赞同：0
> 
> 时间：2012-07-10T04:37:18.537
> 
> 标签：iphone, ios, mapkit, mkreversegeocoder

当我们尝试使用 MKReverseGeoCoder 时总是出错，

"/SourceCache/ProtocolBuffer/ProtocolBuffer-47.1/Runtime/PBRequester.m:682 服务器返回错误：503

错误：错误域 = PBRequesterErrorDomain 代码 = 6001“操作无法完成。（PBRequesterErrorDomain 错误 6001。）”。

在搜索详细信息时，我们发现该错误是由于反向地理编码请求率增加所致。但是我们一次只发送一个请求，并确保请求计数更少。请解释错误背后的细节。我们使用了 CLGeoCoder，它运行良好。请提出一种解决 IOS 5.0 之前版本问题的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:45:26.603

我很确定这正在发生，因为您正在测试中，并且过多地使用反向地理编码器，而 Google 的服务器知道这一点。所以，它基本上已经阻止了你一段时间。稍后再试，看看它是否有效。

您需要确保每 60 秒调用地理编码器的次数不超过一次。

# android - Android：使用服务更改已关闭应用程序的变量（计数器）

> ID：11406695
> 
> 赞同：0
> 
> 时间：2012-07-10T04:37:28.940
> 
> 标签：android, service, sharedpreferences, android-contentprovider

堆栈溢出社区。

我有一个问题，从几天前开始我一直在尝试解决。

**我有一个在接收和发送消息的 Android 应用程序中运行的服务。对于这些消息，我有计数器来保存发送和接收的短信和错误的数量。**例如，当发送一条消息时，计数器加 1 并在屏幕上显示总数（在不可聚焦的编辑视图中）。

我做的另一件事是绑定我的服务，所以我可以根据需要打开或关闭它。**应用程序运行时一切正常，但如果完成，我的变量会丢失，但我需要以某种方式继续计算消息并在用户再次打开应用程序时显示值。我怎样才能做到这一点？**

我一直在使用共享首选项变量来保存这些数字和其他配置，但是当应用程序被终止时，这些数字无法继续增加。

当应用程序关闭时，我可以将计数器值保存在某处吗？我可以在应用程序关闭的情况下从服务访问共享首选项吗？如果我使用内容提供商怎么办？即使应用程序关闭，我可以从正在运行的服务访问它吗？

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:54:53.907

从服务访问共享首选项没有问题。因此，只需将变量保存在服务的 onDestroy() 方法中并重新加载它们 onCreate();

这应该可以获取偏好：

```
Context ctx = getApplicationContext();
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(ctx); 
```

这是一个很好的答案：[如何从 Android 中的 PreferenceActivity 获取 SharedPreferences？](https://stackoverflow.com/questions/2614719/how-do-i-get-the-sharedpreferences-from-a-preferenceactivity-in-android)

# symfony - 如何在 Symfony2 中将 `MyAcmeBundle:User` 解析为 `My\AcmeBundle\Entity\User`？

> ID：11406697
> 
> 赞同：3
> 
> 时间：2012-07-10T04:37:34.387
> 
> 标签：symfony, doctrine-orm, naming-conventions, shorthand

如何在 Symfony2 中将逻辑实体名称解析为完整的类名称？喜欢。`MyAcmeBundle:User`_`My\AcmeBundle\Entity\User`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T06:55:09.197

您可以从 EntityManager 获取 ClassMetadata，它将命名空间解析为完全限定的类名。

```
<?php
echo $manager->getClassMetadata('MyAcmeBundle:User')->getName(); 
```

# php - 逃避 MySQL 注入和过滤 XSS 攻击尝试的正确方法

> ID：11406700
> 
> 赞同：0
> 
> 时间：2012-07-10T04:37:54.280
> 
> 标签：php, mysql, security, filter, xss

我需要在这里检查一些东西，我知道它们会过滤掉一些代码，因为输入是在一行代码中获得的，这里我在获得代码后按顺序完成了它，这是否也可以接受？还是我必须想办法在一行中过滤和转义数据，同时获取数据？这是我正在谈论的内容的示例...

```
 // Get data and prevent XSS attack
  $user = htmlentities($_POST['email'], ENT_QUOTES, 'UTF-8');
  $pass = htmlentities($_POST['pass'], ENT_QUOTES, 'UTF-8');

  // MySQL Injection prevention
  $userdata = mysql_real_escape_string($user);
  $passdata = mysql_real_escape_string($pass); 
```

想法？

我在这里试图实现的关键目标是逃避 MySQL 注入尝试并防止 XSS 攻击

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T08:13:49.373

> 我在这里试图实现的关键目标是逃避 MySQL 注入尝试并防止 XSS 攻击

你不能同时做这两个。

SQL 转义需要在您创建包括文本字符串的 SQL 查询时发生。尽管您最好使用参数化查询（例如 mysqli 或 PDO），以便不必担心。

HTML 转义需要在您创建包含文本字符串的 HTML 标记时进行。尽管在理想情况下，您将使用默认情况下 HTML 转义的模板语言，因此您不必担心。

如果您在输入阶段而不是它们各自的输出阶段同时应用 HTML 转义和 SQL 转义，您将在数据库中获得 HTML 编码的数据，您将无法对（搜索、子字符串）应用一致的文本处理等），并且您将获得 SQL 编码的数据吐出到该值尚未经过数据库 I/O 周期的页面上（`O\\\\\\\\'Reilly`问题的原因。另外，您仍然会面临任何数据的风险没有经过输入路径——例如从数据库中获取一个字符串，处理它并将它返回到数据库，它不会有一个转义步骤，你又容易受到 SQL 注入的攻击。

两种转义方案都不适合一揽子应用到输入。输入过滤应该*只*用于阻止您不想处理的字符并执行业务规则。仅在将文本内容移动到新上下文时才进行输出转义 - 并尽可能使用防止您此时必须手动转义的框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T04:42:40.260

使用[是不够](http://ilia.ws/archives/103-mysql_real_escape_string-versus-Prepared-Statements.html)`mysql_real_escape_string`的。在某些情况下，可以利用无效的多字节编码来注入 SQL 攻击（与 不同`addslashes`，这种类型的攻击`mysql_real_escape_string`只有在连接字符串中的字符编码被覆盖时才会发生）。

在与 MySQL 交互时，您还应该使用[准备好的语句。](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)

关于 XSS，可以考虑集成[HTML Purifier](http://htmlpurifier.org/)。

> HTML Purifier 是一个用 PHP 编写的符合标准的 HTML 过滤器库。HTML Purifier 不仅会使用经过全面审核、安全且允许的白名单删除所有恶意代码（更广为人知的 XSS），它还将确保您的文档符合标准，这只有在全面了解 W3C 规范的情况下才能实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-10T07:54:03.740

我更喜欢使用函数来传递我的所有字符串。

```
function safe($value){ 
return mysql_real_escape_string($value);
} 
```

如果我想收集输入，我会这样做：

```
$name=safe($_POST['name']); 
```

# minix - _sendrec.s 中的说明

> ID：11406701
> 
> 赞同：1
> 
> 时间：2012-07-10T04:38:00.887
> 
> 标签：minix

我偶然发现了 src/lib/i386/rts/_sendrec.s 中的以下说明

一开始，写出以下语句。

```
SEND = 1

RECEIVE = 2

BOTH = 3

SYSVEC = 33

SRCDEST = 8
MESSAGE = 12 
```

我如何解释上述陈述？例如，SRCDEST = 8，我应该将其读取为 SRCDEST 的值为 8。如果是，则以下语句对我没有任何意义。如果不是，什么是 SRCDEST、MESSAGE 和 BOTH？它们是内置函数吗？如果是，它们在 .s 文件中的何处定义？

根据评论，`eax = dest-src`。dest 和 src 的值是多少？ `ebx = message pointer`. 这是否意味着 ebx 是对基指针的引用？至于`mov ecx, BOTH ! _sendrec(srcdest, ptr)`，这里到底发生了什么？如果有人能对以下陈述有所了解或指出一两个链接，我将不胜感激。已经在网上查找了几天，但没有运气找到信息。感谢您的时间。

```
__sendrec:

mov eax, SRCDEST(ebp)   ! eax = dest-src

mov ebx, MESSAGE(ebp)   ! ebx = message pointer

mov ecx, BOTH       ! _sendrec(srcdest, ptr) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T04:53:32.987

`SEND`、`RECEIVE`和`BOTH`是分别具有值 1、2 和 3 的常数。它们代表您正在执行的操作（1 表示“发送”，2 表示“接收”，3 表示“发送和接收”）。

`SRCDEST`和`MESSAGE`常量是存储代表源/目标和消息的值的堆栈上的偏移量。

`SYSVEC`是中断号。

# java - Java：如何在Java中的两个模式之间吐出一条线

> ID：11406709
> 
> 赞同：0
> 
> 时间：2012-07-10T04:39:05.090
> 
> 标签：java

我在获取与两种模式匹配的文本时遇到了一些问题，请帮帮我，这是我的问题和要求：

行：`selenium.TypeKeys("name=email", "raj@ymail.com");` 我的要求是从上面的行中获取 name=email，

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:14:06.033

这应该为您提供 和 之间的`"`值`,`。

```
line.substring(line.indexOf("(\""), line.indexOf(",")); 
```

# ios - 从多个 ViewController 引用的单个 iAd

> ID：11406713
> 
> 赞同：0
> 
> 时间：2012-07-10T04:39:29.097
> 
> 标签：ios, xcode, iad, adbannerview

我按照此处提供的说明在多个 VC 之间共享 iAd 内容：

[如何为 iAd 创建全局引用并在多个 Viewcontroller 中实现](https://stackoverflow.com/questions/10499703/how-to-create-a-global-reference-for-iad-and-implement-in-multiple-viewcontrolle)

但是，如果没有广告，我现在希望能够隐藏横幅，并在有广告时显示。我已经看到了如何在特定 VC 中执行此操作的编码，方法是使其成为 ADBannerViewDelegate 并实现几个使用动画块显示/隐藏的委托方法。

我的问题是 - 我是否可以让每个离散的 VC 成为 ADBannerViewDelegate 并向每个单独的 VC 添加委托方法，或者本着链接到问答的精神，是否可以只有一个 ADBannerViewDelegate 并实现一次委托方法？

谢谢托尼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:04:04.283

两者都是可能的和允许的。

拥有一个涵盖所有情况的方法的单一委托通常比让每个 ViewController 成为其自己的 ADBanner 委托更优雅的解决方案。

哪个最适合您取决于您​​现有的代码以及您可以轻松地将所需的广告行为抽象为跨多个 ViewController 工作。

# c# - 使用 Google Contacts Api 导入联系人 C#

> ID：11406714
> 
> 赞同：4
> 
> 时间：2012-07-10T04:39:37.660
> 
> 标签：c#, api, google-contacts-api

我正在使用[Google Contacts Api](https://developers.google.com/google-apps/contacts/v3/)。我不确定是否可以发送一个`Auth Token`作为参数。

```
string _token = _google.Token;
RequestSettings requestSettings = new RequestSettings("AppName",_token);
ContactsRequest contactsRequest = new ContactsRequest(requestSettings);

// Get the feed
Feed<Contact> feed = contactsRequest.GetContacts(); 
```

我得到`401 Unauthorised`了这个代码的响应，但是如果我将用户名和密码作为参数发送，我就能得到响应。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T14:53:52.527

哎呀，对不起，我第一次没有完全正确。我在一个真正的应用程序中使用这个代码，我只是在我的代码中做一些不同的事情，因为我不断地刷新令牌。
无论如何，这是正确的逻辑：

```
 // get this information from Google's API Console after registering your app
        var parameters = new OAuth2Parameters
        {
            ClientId = @"",
            ClientSecret = @"",
            RedirectUri = @"",
            Scope = @"https://www.google.com/m8/feeds/",
        };

        // generate the authorization url
        string url = OAuthUtil.CreateOAuth2AuthorizationUrl(parameters);

        // now use the url to authorize the app in the browser and get the access code
        (...)

        // get this information from Google's API Console after registering your app
        parameters.AccessCode = @"<from previous step>";

        // get an access token
        OAuthUtil.GetAccessToken(parameters);

        // setup connection to contacts service
        var contacts = new ContactsRequest(new RequestSettings("<appname>", parameters));

        // get each contact
        foreach (var contact in contacts.GetContacts().Entries)
        {
            System.Diagnostics.Debug.WriteLine(contact.ContactEntry.Name.FullName);
        } 
```

仅供参考，在您调用`GetAccessToken()`访问代码后，您的参数数据结构将包括`AccessToken`和`RefreshToken`字段。如果您存储这两个值，您可以在后续调用中将它们设置在参数结构中（允许您将来跳过请求授权），而不是`GetAccessToken()`简单地调用`RefreshAccessToken(parameters)`，您将始终可以访问联系人。说得通？在这里，看看：

```
 // get this information from Google's API Console after registering your app
        var parameters = new OAuth2Parameters
        {
            ClientId = @"",
            ClientSecret = @"",
            RedirectUri = @"",
            Scope = @"https://www.google.com/m8/feeds/",
            AccessCode = "",
            AccessToken = "",  /* use the value returned from the old call to GetAccessToken here */
            RefreshToken = "", /* use the value returned from the old call to GetAccessToken here */
        };

        // get an access token
        OAuthUtil.RefreshAccessToken(parameters);

        // setup connection to contacts service
        var contacts = new ContactsRequest(new RequestSettings("<appname>", parameters));

        // get each contact
        foreach (var contact in contacts.GetContacts().Entries)
        {
            System.Diagnostics.Debug.WriteLine(contact.ContactEntry.Name.FullName);
        } 
```

**编辑**：

```
 // generate the authorization url
            string url = OAuthUtil.CreateOAuth2AuthorizationUrl(parameters);

            // now use the url to authorize the app in the browser and get the access code
            (...)

            // get this information from Google's API Console after registering your app
            var parameters = new OAuth2Parameters
            {
                ClientId = @"",
                ClientSecret = @"",
                RedirectUri = @"",
                Scope = @"https://www.google.com/m8/feeds/",
                AccessCode = @"<from previous step>",
            };

            // get an access token
            OAuthUtil.GetAccessToken(parameters);

            // setup connection to contacts service
            var contacts = new ContactsRequest(new RequestSettings("<appname>", parameters));

            // get each contact
            foreach (var contact in contacts.GetContacts().Entries)
            {
                System.Diagnostics.Debug.WriteLine(contact.ContactEntry.Name.FullName);
            } 
```

# hadoop - 为什么在 Hadoop 中扩展 RecordReader 时要同步 close() 方法

> ID：11406726
> 
> 赞同：1
> 
> 时间：2012-07-10T04:41:05.493
> 
> 标签：hadoop, mapreduce

[我会在这里查看](https://github.com/alexholmes/hadoop-book/blob/master/src/main/java/com/manning/hip/ch3/json/JsonInputFormat.java)给定 alexhomes 的 hadoop-book 的示例

我不明白为什么 close 方法是同步的？为什么只有 close() 而没有其他方法？

```
public synchronized void close() throws IOException {
  reader.close();
} 
```

有人可以解释一下吗？这将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:08:23.400

正如我在书中提到的，我使用[ElephantBird](https://github.com/kevinweil/elephant-bird)项目的[LzoJsonRecordReader](https://github.com/kevinweil/elephant-bird/blob/master/core/src/main/java/com/twitter/elephantbird/mapreduce/input/LzoJsonRecordReader.java)类作为我的版本的基础，因为我想编写一个不需要 LZOP 压缩的类。ElephantBird 在他们的 RecordReader 中使用了同步关闭方法，因此也进入了我的版本。正如其他人所提到的，我知道没有理由在 MapReduce 中同步 close 方法。

# video-streaming - OpenFrameworks 视频流输入/输出

> ID：11406730
> 
> 赞同：0
> 
> 时间：2012-07-10T04:41:31.203
> 
> 标签：video-streaming, openframeworks

我正在开发 OpenFrameworks 中的一个项目，该项目需要双向计算两台机器之间的流式视频。

我什至不知道从哪里开始，而且通过搜索也找不到太多东西。例如 OfxOgg 看起来它只输出一个流。我也想知道这是否是我可以劫持网络插件来做的事情。如果有，是哪一个？

迷你更新：我正在研究 ofxFileTransfer。在阅读了有关人们尝试使用 MJPEG 的其他帖子后，我遇到了一篇文章，他们最终放弃了“视频”，只传输静止图像并以与文件传输一样快的速度交换缓冲区。这对我来说可能是一个不错的解决方案。也许。

不过，关于这个主题的一些建议会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:10:28.263

假设您可以在 OSX 上工作，一种可能的解决方案是使用[Siphon](http://syphon.v002.info/)到 Quartz Composer，然后在两台计算机 QC 补丁之间使用 1024 架构网络[发送/接收](https://1024d.wordpress.com/2010/06/18/_1024_network-sendreceive-quartzcomposer-plugin/)补丁，然后在第二台机器上使用 Siphon 回到 oF...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:43:55.883

这两台机器是在同一个地方还是你需要通过互联网流式传输？

如果它们在同一个地方，我建议使用 UDP 发送视频数据。openFrameworks 中已经有两个很好的例子，叫做`networkUdpSenderExample`和`networkUdpReceiverExample`。[你可以在这里](https://github.com/openframeworks/openFrameworks/tree/master/examples/addons)浏览他们的代码。他们只发送/接收字符串，但我认为用它发送视频并不难。

如果它们通过 Internet 连接，您可以尝试使用 TCP 的示例，但 TCP 的开销比 UDP 高。

# jquery - 取消表单提交

> ID：11406731
> 
> 赞同：2
> 
> 时间：2012-07-10T04:41:43.313
> 
> 标签：jquery, asp.net-mvc-3

在下面的代码中，我尝试关闭来自 jquery 的弹出表单，并且在我单击 no 按钮时不提交操作，并在单击 delete 时删除。它以前工作过，但现在即使我单击取消，表单也会提交给控制器并完成删除操作。出了什么问题？如何使取消按钮关闭弹出窗口但不提交。请帮助！

```
@using (Html.BeginForm())
        {
            <fieldset style="width:70%;">

                            @Html.Hidden("CnoType", Model.CnoType, Model)

                               <b> Description: </b>

                                @Html.DisplayFor(Desc=>Model.CNoDesc)<br />

                                <b> Prefix:</b>&nbsp;&nbsp;

                                @Html.DisplayFor(Prefix=>Model.CnoPrefix)<br />

                            <b>Is Enable</b> &nbsp;
                           @Html.CheckBox("IsEnable", Model.IsEnable, Model)

            </fieldset>

            <input id="btn" type="submit" value="Delete" />

             <button class="Close">Cancel</button>

        } 
```

这是我的jQuery

```
<script type="text/javascript">

            $.ajaxSetup({ cache: false });

            $(document).ready(function () {
                $(".openDialog").live("click", function (e) {
                    e.preventDefault();

                    $("<div></div>")
                    .addClass("dialog")
                    .attr("id", $(this)
                    .attr("data-dialog-id"))
                    .appendTo("body")
                    .dialog({
                        title: $(this).attr("data-dialog-title"),
                        minWidth: 500,
                        minHeight: 100,
                        resizable: false,
                        close: function () { $(this).remove() },
                        modal: true
                    })

                    .load(this.href);
                });

                $(".close").live("click", function (e) {
                    e.preventDefault();
                    $(this).closest(".dialog").dialog("close");
                });
            });

</script> 
```

e.preventDefault() 似乎不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T04:45:16.643

将此代码放入您的 jquery 页面加载方法中：

```
$(document).ready(function(){
     $(".Close").click(function(){
         $.colorbox.close();  // if you are using colorbox for generating the popup.
     });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T05:03:57.027

```
$(document).ready(function(){
     $(".Close").click(function(){
         return false;  //prevents default action (submit)
     });
}); 
```

或者

```
$(document).ready(function(){
     $(".Close").click(function(event){
         event.preventDefault();  //prevents default action (submit)
     });
}); 
```

# iphone - 如何在日历日期框中添加事件？

> ID：11406737
> 
> 赞同：1
> 
> 时间：2012-07-10T04:42:17.747
> 
> 标签：iphone

我必须在日历的日期框中显示事件，背景为颜色。但我不知道如何显示它。我必须使用什么？它的逻辑是什么？

# javascript - 单击图像，获取坐标并将它们保存在数据库中 JavaScript 和 Rails

> ID：11406741
> 
> 赞同：1
> 
> 时间：2012-07-10T04:42:40.533
> 
> 标签：javascript, ruby-on-rails, database, save, coordinates

我有一点 JS 和 rails 问题。我目前正在使用此代码用正方形标记图像：

```
<html>
<head>
<script language="JavaScript">
function point_it(event){
    pos_x = event.offsetX?(event.offsetX):event.pageX-document.getElementById("pointer_div").offsetLeft;
    pos_y = event.offsetY?(event.offsetY):event.pageY-document.getElementById("pointer_div").offsetTop;
    document.getElementById("cross").style.left = (pos_x-1) ;
    document.getElementById("cross").style.top = (pos_y-15) ;
    document.getElementById("cross").style.visibility = "visible" ;
    document.pointform.form_x.value = pos_x;
    document.pointform.form_y.value = pos_y;
}
</script>
</head>
<body>
<form name="pointform" method="post">
<div id="pointer_div" onclick="point_it(event)" style = "background-image:url(<%= asset_path 'mamma.jpg' %>);width:900px;height:720px;">
<img src=<%= asset_path 'point.gif' %> id="cross" style="position:relative;visibility:hidden;z-index:2;"></div>
You pointed on x = <input type="text" name="form_x" size="4" /> - y = <input type="text" name="form_y" size="4" />
</form> 
</body>
</html> 
```

它是这样工作的：有一张大图片（mamma.jpg），当我点击这张图片的任意位置时，脚本将在文本字段中显示下面的点击坐标。此外，我单击的图片上应该会出现一个正方形。

现在我有两个问题：1）正方形只是出现在图片的左上角，无论我点击哪里。有一个简单的解决方法吗？

2）我需要将坐标保存在数据库中，当我回想这个页面时，正方形应该出现在我最后一次单击图像的位置。图像是表单的一部分（我也使用 formtastic）。

现在我知道 Rails 是服务器端的，而 JS 是客户端的，我不能让它们直接通信，但也有简单的解决方法吗？还是我必须通过我的控制器来使这成为可能？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:02:57.603

使用已经可用的库来绘制矩形。

试试[JCrop](http://code.google.com/p/jcrop/)或[http://odyniec.net/projects/imgareaselect/](http://odyniec.net/projects/imgareaselect/)

查看[此](http://getspritexy.com)应用程序的源代码，它生成 x 和 y 以及 CSS sprite 的宽度和高度。

# java - 内部类和局部变量问题

> ID：11406742
> 
> 赞同：1
> 
> 时间：2012-07-10T04:42:40.617
> 
> 标签：java, swing, cardlayout, listselectionlistener

为项目编写程序。我需要使用 ListSelectionListener 来从 JList 中获取当前选择，以确定其他面板使用的 CardLayout 的当前卡片。如果不是直接使用 CardLayout 类的 show 方法从侦听器中更改当前卡片，我希望至少能够由侦听器创建一个带有选择名称的字符串。最简单的方法是什么，最终会导致当前卡被更改？非常感谢您的帮助！

来源：

```
import javax.swing.*;
import java.util.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.event.*;

public class ClientApp extends JFrame
{
    public static void main(String[] args)
    {
        new ClientApp();
    }

    public ClientApp()
    {
        this.setSize(750,380);
        this.setTitle("Honeydukes Muggle Ordering System");
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel infoPanel = new JPanel(new CardLayout());
        JPanel invntryPanel = new JPanel();

        //Creating the array for the invntryPanel Jlist

        String[] candy = {"Acid Pops", "Bat's Blood Soup",
                          "Bertie Bott's Every Flavour Beans",
                          "Blood-flavoured Lollipops",
                          "Cauldron Cakes", "Charm Choc",
                          "Chocoballs", "Chocolate Cauldrons",
                          "Chocolate Frogs", "Chocolate Skeletons",
                          "Chocolate Wands", "Choco-Loco", "Cockroach Clusters",
                          "Nougat", "Crystallised Pineapple",
                          "Drooble's Best Blowing Gum", "Exploding Bonbons",
                          "Toffees", "Fizzing Whizzbees",
                          "Fudge Flies", "Ice Mice",
                          "Jelly Slugs", "Liquourice Wands",
                          "Pepper Imps", "Peppermint Toads",
                          "Pink Coconut Ice", "Pixie Puffs",
                          "Pumpkin Fizz", "Salt Water Taffy",
                          "Shock-o-Choc", "Skeletal Sweets",
                          "Splindle's Lick'O'Rish Spiders",
                          "Sugar Quills", "Sugared Butterfly Wings",
                          "Toothflossing Stringmints", "Tooth-Splintering Strongmints",
                          "Treacle Fudge", "Chocolates", "Wizochoc"};
        JList candyList = new JList(candy);
        candyList.setVisibleRowCount(18);
        candyList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);

        ListSelectionListener sl = new ListSelectionListener() {
           public void valueChanged(ListSelectionEvent e) {
            if (e.getValueIsAdjusting() == false) {
                CardLayout.show(infoPanel, (String)candyList.getSelectedValue());
            }
           }
        };

        candyList.addListSelectionListener(sl);

        //Creating a scrollpane for the JList
        JScrollPane scroll = new JScrollPane(candyList, JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
                                             JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
        invntryPanel.add(scroll);

        //Creating the cards
        JPanel startCard = new JPanel(new BorderLayout());
        JPanel acidPopsCard = new JPanel();
        JPanel batsBloodSoupCard = new JPanel();
        JPanel bertieBottsCard = new JPanel();
        JPanel bloodPopsCard = new JPanel();
        JPanel cauldronCakesCard = new JPanel();
        JPanel charmChocCard = new JPanel();
        JPanel chocoballsCard = new JPanel();
        JPanel chocCauldronsCard = new JPanel();
        JPanel chocFrogsCard = new JPanel();
        JPanel chocSkeleCard = new JPanel();
        JPanel chocWands = new JPanel();
        JPanel chocolocoCard = new JPanel();
        JPanel roachClustersCard = new JPanel();
        JPanel nougatCard = new JPanel();
        JPanel crystalPineappleCard = new JPanel();
        JPanel droobleGumCard = new JPanel();
        JPanel explodeBonbonsCard = new JPanel();
        JPanel toffeesCard = new JPanel();
        JPanel fizzWhizCard = new JPanel();
        JPanel fudgeFliesCard = new JPanel();
        JPanel iceMiceCard = new JPanel();
        JPanel jellySlugsCard = new JPanel();
        JPanel liquorWandsCard = new JPanel();
        JPanel pepImpsCard = new JPanel();
        JPanel pepToadsCard = new JPanel();
        JPanel pinkCocoIceCard = new JPanel();
        JPanel pixiePuffsCard = new JPanel();
        JPanel pumpkFizzCard = new JPanel();
        JPanel saltTaffeyCard = new JPanel();
        JPanel shockChocCard = new JPanel();
        JPanel skeleSweetsCard = new JPanel();
        JPanel spindleSpidersCard = new JPanel();
        JPanel sugarQuillsCard = new JPanel();
        JPanel sugarWingsCard = new JPanel();
        JPanel flossMintsCard = new JPanel();
        JPanel splintMintsCard = new JPanel();
        JPanel treacleFudgeCard = new JPanel();
        JPanel chocolatesCard = new JPanel();
        JPanel wizochocCard = new JPanel();

        //Adding the cards to the infoPanel
        infoPanel.add(startCard, "Start");
        infoPanel.add(acidPopsCard, "Acid Pops");
        infoPanel.add(batsBloodSoupCard, "Bat's Blood Soup");
        infoPanel.add(bertieBottsCard, "Bertie Bott's Every Flavour Beans");
        infoPanel.add(bloodPopsCard, "Blood-flavoured Lollipops");
        infoPanel.add(cauldronCakesCard, "Cauldron Cakes");
        infoPanel.add(charmChocCard, "Charm Choc");
        infoPanel.add(chocoballsCard, "Chocoballs");
        infoPanel.add(chocCauldronsCard, "Chocolate Cauldrons");
        infoPanel.add(chocFrogsCard, "Chocolate Frogs");
        infoPanel.add(chocSkeleCard, "Chocolate Skeletons");
        infoPanel.add(chocWands, "Chocolate Wands");
        infoPanel.add(chocolocoCard, "Choco-Loco");
        infoPanel.add(roachClustersCard, "Cockroach Clusters");
        infoPanel.add(nougatCard, "Nougat");
        infoPanel.add(crystalPineappleCard, "Crystallised Pineapple");
        infoPanel.add(droobleGumCard, "Drooble's Best Blowing Gum");
        infoPanel.add(explodeBonbonsCard, "Exploding Bonbons");
        infoPanel.add(toffeesCard, "Toffees");
        infoPanel.add(fizzWhizCard, "Fizzing Whizzbees");
        infoPanel.add(fudgeFliesCard, "Fudge Flies");
        infoPanel.add(iceMiceCard, "Ice Mice");
        infoPanel.add(jellySlugsCard, "Jelly Slugs");
        infoPanel.add(liquorWandsCard, "Liquourice Wands");
        infoPanel.add(pepImpsCard, "Pepper Imps");
        infoPanel.add(pepToadsCard, "Peppermint Toads");
        infoPanel.add(pinkCocoIceCard, "Pink Coconut Ice");
        infoPanel.add(pixiePuffsCard, "Pixie Puffs");
        infoPanel.add(pumpkFizzCard, "Pumpkin Fizz");
        infoPanel.add(saltTaffeyCard, "Salt Water Taffy");
        infoPanel.add(shockChocCard, "Shock-o-Choc");
        infoPanel.add(skeleSweetsCard, "Skeletal Sweets");
        infoPanel.add(spindleSpidersCard, "Splindle's Lick'O'Rish Spiders");
        infoPanel.add(sugarQuillsCard, "Sugar Quills");
        infoPanel.add(sugarWingsCard, "Sugared Butterfly Wings");
        infoPanel.add(flossMintsCard, "Toothflossing Stringmints");
        infoPanel.add(splintMintsCard, "Tooth-Splintering Strongmints");
        infoPanel.add(treacleFudgeCard, "Treacle Fudge");
        infoPanel.add(chocolatesCard, "Chocolates");
        infoPanel.add(wizochocCard, "Wizochoc");

        //startCard building
        JLabel startLbl = new JLabel("<html><center>Welcome to the Honeydukes Muggle Ordering System!<br />Please select from one of our products to the left to begin!</center></html>");
        startCard.add(startLbl, BorderLayout.CENTER);

        this.add(invntryPanel, BorderLayout.LINE_START);
        this.add(infoPanel, BorderLayout.CENTER);
        this.setVisible(true);
    }
} 
```

错误：

```
ClientApp.java:54: error: local variable infoPanel is accessed from within inner
 class; needs to be declared final
                CardLayout.show(infoPanel, (String)candyList.getSelectedValue())
;
                                ^
ClientApp.java:54: error: local variable candyList is accessed from within inner
 class; needs to be declared final
                CardLayout.show(infoPanel, (String)candyList.getSelectedValue())
;
                                                   ^
ClientApp.java:54: error: non-static method show(Container,String) cannot be ref
erenced from a static context
                CardLayout.show(infoPanel, (String)candyList.getSelectedValue())
;
                          ^
Note: ClientApp.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
3 errors 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T04:58:47.987

我能想到几个方法。首先，将candyList的引用设为final

```
final JList candyList = new JList(candy); 
```

这应该允许内部类看到列表。就个人而言，我不喜欢这种方法，但这只是我。

您可能会尝试的另一件事是通过事件对象引用列表

```
ListSelectionListener sl = new ListSelectionListener() {
    public void valueChanged(ListSelectionEvent e) {
        JList candyList = (JList)e.getSource();
        if (e.getValueIsAdjusting() == false) {
            CardLayout.show(infoPanel, (String)candyList.getSelectedValue());
        }
       }
    }; 
```

或者构造一个新的内部类，可以将列表作为参数传递给它

```
public class MyInnerListener implements ListSelectionListener {

    private JList list;

    public MyInnerListener(JList list) {

        this.list = list;

    }
    public void valueChanged(ListSelectionEvent e) {
        if (e.getValueIsAdjusting() == false) {
            CardLayout.show(infoPanel, (String)list.getSelectedValue());
        }
    }

} 
```

只是一些想法；）

# c++ - 在 c++/cli 控制台应用程序中处理停止或退出事件

> ID：11406743
> 
> 赞同：0
> 
> 时间：2012-07-10T04:42:42.467
> 
> 标签：c++, .net, multithreading, event-handling, c++-cli

我在控制台应用程序中有以下代码，我使用 TCP/IP 连接连接到扫描设备，在建立连接后，我不断获得扫描测量结果。但我需要用户随时停止测量.

我正在考虑在控制台应用程序本身中完成它。我需要为此使用线程吗？如果用户在扫描进行时停止，我想完成特定扫描并在此之后退出（类似于锁）。我只是在学习 c++ 和 c++/cli ..任何建议都会有所帮助..谢谢

```
if (sopas.GetScanData(soScan) == true)
 {
 printf("Continuous Scanning Measurement \n");
 processcounter = ProcessScan(soScan,processcounter,gp,Background);
 } 
```

进程扫描的这个骨架是

```
unsigned int ProcessScan(const SLms100Scan& soScan,int iProcessedScanCount,FILE* gp,vector <double> &Background)
{
        static unsigned int ulDeg90_index = 0; // Calculated during init phase
    static unsigned int ulProcessedScanCounter = 0;
    int iDataCount = soScan.aDataChannel16.aFlexArrayData[0].aData.uiFlexArrayLength;

    int datalength = soScan.aDataChannel16.aFlexArrayData[0].aData.uiFlexArrayLength;
    vector <double> afXvalue(datalength);
    vector <double> afYvalue(datalength);

    pair<double,double> coord(int a,int b);
    vector< pair<double,double>> coordinates;

    int aiDataReal[80];
    int count;

    //Finding the blobs

    // Write hex values of data in to the file
    int success = 0;
    writefile(fname,soScan,success);
    if (success != 0)
        {
        printf("Error in printing the file");
        }

    blobdetector(soScan, iProcessedScanCount,Background,coordinates);
    // Read the hex value for XY co-ordinate calculation
    //readfile(fname,aiDataReal,idx,success);

    if (success == -1)
        printf("Error in reading the file");

    //calculation of Polar Coardinates to XY values
    findXY(soScan,afXvalue,afYvalue);

    //writing the XY values to the file
    writefile( wfname_XY,iDataCount,afXvalue,afYvalue,success);
    if (success == -1)
        printf("Error in printing the file");

    plotdata(afXvalue,afYvalue,coordinates,gp,iProcessedScanCount);

    if (!coordinates.empty())
        {
        //sendcoordinates(soScan,coordinates);
        writefile( "coordinates",soScan,coordinates);
        coordinates.clear();
        }

    iProcessedScanCount++;
    return iProcessedScanCount;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:59:44.920

一种简单的方法（在 Windows 上）是使用[`SetConsoleCtrlHandler`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685049%28v=vs.100%29.aspx)然后阻止终止，直到您完成工作，当然，如果`CTRL_CLOSE_EVENT`您在 Win7/Vista 上的时间有限。

您可以使用不同的机制来指示您的主程序完成它的工作。在我的例子中，我在主文件中使用了一个全局变量，通过引用我的内部循环并将其用作循环终止条件。但也可以通过其他方法来实现（`condition_variable`，...）

# iphone - 如何为特定日期举办活动？

> ID：11406754
> 
> 赞同：4
> 
> 时间：2012-07-10T04:44:03.357
> 
> 标签：iphone

事件详细信息应该存储在哪里？如何为我不知道的特定事件发出警报。请帮助提供代码或提供该类型示例的链接。预先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T04:52:45.320

您可以使用本地通知，这里有一些用于安排通知的示例代码。

```
- (void)scheduleNotification {

    UILocalNotification *notif = [[UILocalNotification alloc] init];

    //notification for 3 days
    notif.fireDate = [NSDate dateWithTimeInterval:60.0f*60.0f*24.0f*3.0f sinceDate:[NSDate date]];
    notif.timeZone = [NSTimeZone defaultTimeZone];
    notif.alertBody = @"We've missed you!";
    notif.alertAction = @"PLAY";
    notif.soundName = UILocalNotificationDefaultSoundName;
    notif.applicationIconBadgeNumber = 1;
    [[UIApplication sharedApplication] scheduleLocalNotification:notif];

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T04:54:59.360

您可以在 iPhone 程序中以编程方式为未来日期的事件安排提醒。这是一个示例项目，它将帮助您以编程方式在 iPhone 中安排活动。检查此链接。[https://developer.apple.com/library/ios/#samplecode/SimpleEKDemo/Introduction/Intro.html](https://developer.apple.com/library/ios/#samplecode/SimpleEKDemo/Introduction/Intro.html)

# mysql - 在现有的 mysql 表上应用全文索引

> ID：11406755
> 
> 赞同：0
> 
> 时间：2012-07-10T04:44:14.153
> 
> 标签：mysql, full-text-search

我在现有表的两个字段（标题、描述）上应用了全文索引。该表已经有 7000 - 8000 条记录。

搜索未按预期工作。即使我在搜索字段中提供了完整的标题，但我无法在顶部找到该记录，并且还有一些不相关的记录。

添加全文索引后是否需要重新插入表中的所有记录？或者可能是什么问题？

以下是供参考的查询：

```
SELECT * FROM f_table f WHERE MATCH (f.tit, f.des) AGAINST ('Rasta Man Vocal 4') 
```

它没有在顶部显示这张“Rasta Man Vocal 4”唱片。它排在第四位。以下是前四条记录的详细信息：

```
#  (tit)                (des)
---------------------------------------------------------------------------------
1) Rasta Vocal 1.wav    Male Rasta Vocal-Tune into the King
2) Rasta Jah DnB        Rasta Increase Come from Jah DnB Vocal Reggae
3) Rasta Man Vocal 2    Rasta Man Vocal 2 Download
4) Rasta Man Vocal 4    Rasta Man Vocal 4 Download 
```

它只是一个例子。

请帮忙，提前谢谢...

另一个问题：有没有办法让一个领域（tit）比其他领域（des）更偏爱？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:16:21.347

尝试这个：：

```
SELECT *,MATCH (f.tit, f.des) AGAINST ('Rasta Man Vocal 4') as relevance  FROM f_table f WHERE MATCH (f.tit, f.des) AGAINST ('Rasta Man Vocal 4') order by relevance desc 
```

# asp.net-mvc-3 - 在 c# 的 mvc3 下拉列表的每个选项中添加自定义点击事件

> ID：11406756
> 
> 赞同：0
> 
> 时间：2012-07-10T04:44:17.330
> 
> 标签：asp.net-mvc-3

我想在 mvc3 c# 中创建自定义下拉菜单，因此可以在下拉菜单的每个选项中添加点击事件。但我不希望有任何替代方法，如 jquery 或创建 for 循环来手动添加属性。有什么方法可以使用 htmlhelper 或基类创建自定义下拉列表。请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:03:48.563

假设这是您的下拉列表，那么您使用以下方式定义事件。

```
<%=Html.DropDownList("ddl", ViewData["MyList"] as SelectList, new { onchange = "this.form.submit()" })%> 
```

在您的 jquery 代码中：

```
$(document).ready(function() {
$("#ddl").change(function() {
    var strSelected = "";
    $("#ddl option:selected").each(function() {
        strSelected += $(this)[0].value;
    });
    var url = "/Home/MyAction/" + strSelected;

    $.post(url, function(data) {
        // do something if necessary
    });
});
}); 
```

# map - Bing.Maps Windows 8 的 MapPolyline 上缺少 StrokeThickness

> ID：11406760
> 
> 赞同：0
> 
> 时间：2012-07-10T04:44:48.990
> 
> 标签：map, bing, stroke

我使用折线在 Bing 地图（Metro 应用程序）上画圆，但它在地图上出现锯齿，不流畅。我认为它没有笔画厚度。

我该如何解决？谢谢

```
 MapShapeLayer shapeLayer = new MapShapeLayer();
    MapPolyline polyline = new MapPolyline();
    polyline.Locations = DrawMapsCircle(location, 1000);

    polyline.Color = Windows.UI.Colors.Red;
    polyline.Width = 1;

    shapeLayer.Shapes.Add(polyline);

    maps.ShapeLayers.Add(shapeLayer); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:55:50.813

尝试增加折线的宽度

```
polyline.Width = 5; 
```

# c# - 从回发的父窗口关闭子窗口

> ID：11406762
> 
> 赞同：1
> 
> 时间：2012-07-10T04:45:02.983
> 
> 标签：c#, javascript, asp.net

我需要关闭已由父窗口加载的子窗口。
通过 using`window.open()`方法打开子窗口。
我需要通过单击父窗口中的注销按钮或关闭按钮来关闭此子窗口。
我的代码：

```
 var childWin = [];
    //child window open event
    function child_open(url)
    {
        childWin[childWin.length] = window.open(url);
    }

    //a logout button or close button event
    function parent_close() 
    {
        for (i=0; i<childWin.length; i++) 
        {
            if (childWin[i] == null) return false;
            childWin[i].close();
        }
        window.close();
    } 
```

如果父窗口不回发到服务器，则此代码是可以的。当父窗口中发生回发时，变量（childWin）的值消失了，我无法通过此代码关闭子窗口。
问题是 -**想要关闭子窗口，即使是回发的父窗口。** 有解决方案吗？
感谢您的所有兴趣和回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:19:43.540

每次加载页面时，您的数组 childWin 都会被清除。因此，在回发后，数组中将没有任何内容。这就是为什么子窗口没有关闭的原因。

[这里](https://stackoverflow.com/questions/3184186/window-reference-after-parent-page-changed)提到了一种解决方法

尝试这样的事情[未经测试，不确定它会起作用，试一试:)]

**父窗口（所有页面）**

```
var childStatus = {}; 
```

**子窗口**

```
var timerHandler,
    windowName = window.name,
    popupHandle = "";

funciton ChildCallBack()
{
  try
  {
    if(popupHandle == "" || popupHandle == null)
    {
       popupHandle = window.opener.childStatus[windowName];
       //ChildCallBack(); // no need of ChilCallBack here, since we already have timer
    }
    else
    {
       window.opener.childStatus[windowName] = popupHandle;        
    }
  }
  catch(e)
  {
  }
}

timerHandler = window.setInterval(ChildCallBack, 500);

function window_onclose()
{
  try
  { 
    window.clearInterval(timerHandler);
    window.opener.childStatus[windowName] = null;
  }
  catch(e)
  {
  }
}

window.onclose = window_onclose; 
```

**Your Child 开窗功能**

```
//child window open event
    function child_open(url)
    {
        var winHandle = window.open(url, "GIVE SOME UNIQUE NAME FOR EACH WINDOW HERE");
        winHandle.popupHandle = winHandle;
    } 
```

**你的关闭按钮事件**

```
//a logout button or close button event
    function parent_close() 
    {
        for (var key in childStatus)
        {
            if (childStatus[key] != null) 
            {
              childStatus[key].close();
            }
        }
        window.close();
    } 
```

***查询的可能修复>> 但是，在回发 child 后，在 parent_close() 中发生错误（childStatus[key] 中的值不是对象，它不能执行 childStatus[key].close()）***

代替

```
timerHandler = window.setInterval(ChildCallBack, 100); 
```

和

```
if(popupHandle == "" || popupHandle == null)
{
   // get the popupHandle from parent window
   popupHandle = window.opener.childStatus[windowName];
   timerHandler = window.setInterval(ChildCallBack, 100);
} 
```

# php - 为什么有些人省略了 else 语句？

> ID：11406765
> 
> 赞同：1
> 
> 时间：2012-07-10T04:45:18.720
> 
> 标签：php, logic

假设我有这个功能：

```
function isValid($premise){
    if($premise == 'foo')
    {
        return true;
    }

    return false;
} 
```

正如你所看到的，else 语句被省略了，else 紧随其后的是 return 语句。为什么有些人会忽略它们？这是一种糟糕的编程习惯吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T04:47:06.517

无论是否缺少`else`. 这是风格和偏好的问题。

就我个人而言，我倾向于在 long 函数开始时检查某些条件时省略`else` *only 。*

我不认为这是不好的做法。在某些情况下，它会使代码更清晰。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T04:46:55.870

在这两种情况下，行为和运行时完全相同 - 这纯粹是一种风格选择。

也许试试[programmers.stackexchange.com](https://softwareengineering.stackexchange.com/)进一步讨论哪种风格更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T04:47:12.460

因为 return 终止/中断函数。

假设`if`条件执行然后它通过返回 true 来终止函数。如果`if`不运行，它将继续返回 false。

在您的代码中

```
function isValid($premise){
    if($premise == 'foo')
    {
        return true;//terminated the function and no more function is going to run
    }

    return false;//if it is running then it is very clear that if condition has not run because if it would have run then the if condition didn't run    } 
```

# entity-framework - 实体框架代码首先不拉导航属性

> ID：11406767
> 
> 赞同：1
> 
> 时间：2012-07-10T04:45:28.063
> 
> 标签：entity-framework, ef-code-first

我遇到了导航属性未加载的问题。我的所有其他实体都有相同的设置，但这是使用不是自然 FK（数字）并且不会级联的属性，它将由触发器处理。

```
Expression<Func<DivisionBracketGameParticipant, object>>[] includes2 = {
                                                                                       q => q.DivisionWinnerBracketGame,
                                                                                       q => q.DivisionLoserBracketGame
                                                                                   };
            var test = _divisionBracketGameParticipantsRepository.GetMany(includes2,
                                                                      q =>
                                                                      q.DivisionBracketGame.DivisionBracket.Division.
                                                                          EventId == eventId); 
```

**数据库模式**

```
DivisionBracketGame

Id
Number

DivisionBracketGameParticipant

Id
DivisionBracketGameId -> Id
DivisionBracketGameWinnerNumber -> Number
DivisionBracketGameLoserNumber -> Number 
```

**实体**

```
[Table("DivisionBracketGame", Schema = "GrassrootsHoops")]
    public class DivisionBracketGame : BaseEntity
    {
        public int Id{ get; set; }
        public int Number { get; set; }

        [InverseProperty("DivisionBracketGame")]
        public virtual ICollection<DivisionBracketGameParticipant> DivisionBracketGameParticipants { get; set; }

        [InverseProperty("DivisionWinnerBracketGame")]
        public virtual ICollection<DivisionBracketGameParticipant> DivisionWinnerBracketGameParticipants { get; set; }

        [InverseProperty("DivisionLoserBracketGame")]
        public virtual ICollection<DivisionBracketGameParticipant> DivisionLoserBracketGameParticipants { get; set; }
    }

[Table("DivisionBracketGameParticipant", Schema = "GrassrootsHoops")]
public class DivisionBracketGameParticipant : BaseEntity
    {
        public int Id{ get; set; }
        public virtual int DivisionBracketGameId { get; set; }
        public virtual int? DivisionWinnerBracketGameNumber { get; set; }
        public virtual int? DivisionLoserBracketGameNumber { get; set; }

        [ForeignKey("DivisionBracketGameId")]
        public virtual DivisionBracketGame DivisionBracketGame { get; set; }

        [ForeignKey("DivisionWinnerBracketGameNumber")]
        public virtual DivisionBracketGame DivisionWinnerBracketGame { get; set; }

        [ForeignKey("DivisionLoserBracketGameNumber")]
        public virtual DivisionBracketGame DivisionLoserBracketGame { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:48:41.650

EF 不会创建关系，`Number`因为它不是主键。主键是你`DivisionBracketGame`的`Id`所以两者`DivisionWinnerBracketGame`都是`DivisionLoserBracketGame`目标`Id`（不是`Number`）。

一对多关系要求主表中的列是唯一的 - 在您的情况下，该列应该是`Number`. 这可以通过使用主表中的主键或在该列上使用唯一索引在数据库中实现。EF 不支持唯一索引/候选键，因此在 EF 中建立一对多关系的唯一方法是通过主表的主键。

FK 值用于获取相关值，因此目前它可能会查找具有错误值的记录，因为它使用了错误的列。

# string - 将字节数组转换为十六进制十进制字符串

> ID：11406768
> 
> 赞同：1
> 
> 时间：2012-07-10T04:45:28.817
> 
> 标签：string, jsp, encode, hex

我写了一个简单的 JSP 登录页面。我收到了加密格式的密码。我正在解密它。所以只是为了尝试我正在加密一个示例字符串，所以它需要将字节数组编码为十六进制字符串，我试图在我的代码的最后一个语句中执行此操作。

```
<%@ page import="java.sql.*" %>
<%@ page import="java.io.*" %>
<%@ page import="java.security.*" %>
<%@ page import="javax.crypto.*" %>
<%@ page import="javax.crypto.spec.*" %>
<%@ page import="java.lang.*" %>

<HTML>
<HEAD>
<TITLE>Simple JSP/Oracle Query Example</TITLE>
</HEAD>
<BODY>

<%
   Class.forName("oracle.jdbc.OracleDriver");

   Connection conn = DriverManager.getConnection("jdbc:oracle:thin:@xxx:xxxx:xxxx","xxxxxx","xxxxxx");
                        // @//machineName:port:SID,   userid,  password

    Statement st=conn.createStatement();

    ResultSet rs=st.executeQuery("Select * from Cxxxxxxx");

    while(rs.next()){
        String name=rs.getString("user_id");
        String p=rs.getString("password");
        out.println(name+":"+p);
        out.println("</br>");

    String algorithm1 = "DES";//magical mystery constant
    String algorithm2 = "DES/CBC/NoPadding";//magical mystery constant
    IvParameterSpec iv = new IvParameterSpec( new byte [] { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 } );//magical mystery constant
    Cipher cipher;
    SecretKey key;
    String k="12345abc";
    key = new SecretKeySpec( k.getBytes("UTF-8"), algorithm1 );
    cipher = Cipher.getInstance( algorithm2 );

    String str="test4abc";

    cipher.init( Cipher.ENCRYPT_MODE, key, iv ); //normally you could leave out the IvParameterSpec argument, but not with Oracle

    byte[] bytes=str.getBytes("UTF-8");

    byte[] encrypted = cipher.doFinal( bytes );

    //Problem is in the statement BELOW --->
    String encoded = new String( Hex.encodeHex( encrypted ) );
    }
%>  
</BODY>
</HTML> 
```

我收到的错误是：

```
[jsp src:line #:48]
cannot resolve symbol symbol : variable Hex location: class _check1 String encoded = new String( Hex.encodeHex( encrypted ) ); 
```

我应该如何运行此语句或将 ByteArray 编码为 HexaDecimal String 的任何其他替代方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T04:50:33.467

如果`Hex`是这样，`org.apache.commons.codec.binary.Hex`那么您需要在 JSP 的顶部将其导入（或者您也可以这样做`org.apache.commons.codec.binary.Hex.encodeHex( encrypted )`）。绝对*不在*里面`java.lang.*`。谁告诉你这是不正确的。

另外，请，请，请不要将 Java 代码放在 JSP 文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T05:40:33.033

不久前我在使用 JSP 时遇到了类似的问题。错误已通过下载解决

```
org.apache.commons.codec.binary 1.5 binary 
```

并将其放在 lib 文件夹中。然后通过以下方式访问该功能：

```
org.apache.commons.codec.binary.Hex.encodeHex( encrypted )) 
```

这应该可以解决您的问题。

干杯!

# jquery - 单击按钮颜色不会改变

> ID：11406771
> 
> 赞同：0
> 
> 时间：2012-07-10T04:45:47.630
> 
> 标签：jquery, html, css, jquery-ui, jquery-mobile

我有以下 html 代码，我想更改按钮 onclick 的颜色。我使用`$("#submitButton").css("background-color","yellow");` 但它不会在点击时改变。

这是我的html代码

```
<!DOCTYPE html>
<html>
<head>

<link rel="stylesheet" href="jquery.mobile/jquery.mobile-1.1.0.css" />
<link rel="stylesheet" href="docs/assets/css/jqm-docs.css" />
<link rel="stylesheet" href="docsdemos-style-override.css" />

<script type="text/javascript" charset="utf-8" src="cordova-1.9.0.js"></script>

<script type="text/javascript" src="jquery.mobile/jquery-1.7.2.min"></script>
<script type="text/javascript" charset="utf-8" src="js/main.js"></script>

<script type="text/javascript">

            $( document ).bind( "mobileinit", function()
            {
                console.log("$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$");
                $.mobile.pushStateEnabled = false;
                $.mobile.defaultTransition = 'slideup';
            });

        </script>

<script type="text/javascript" src="jquery.mobile/jquery.mobile-1.1.0.js"></script>

</head>
        <body>

        <div data-role="page">

        <div data-role="header">
        <h1>Form Page</h1>
        </div><!-- /header -->

            <div data-role="content">   
            <form id="loginForm">

        <!--    Wrap Inputs in fieldcontain which will sort out borders and padding, can cause layout to break  -->
        <div data-role="fieldcontain">
        <label for="firstName"> Username: </label>
        <input type="text" name="username" value="" id="username" /> <!--   Use id and name values -->
        </div>  

        <div data-role="fieldcontain">
        <label for="password"> Password: </label>
        <input type="password" name="password" value="" id="password" /> <!--   Use id and name values -->
        </div>  

        <div data-role="fieldcontain">
        <label for="dob"> Date of birth: </label>
        <input type="password" name="dob" value="" id="dob" /> <!-- Use id and name values -->
        </div> 

        <div data-role="button">
        <input type="submit" data-role="button" value="Login" id="submitButton">
        </div>

        </form> 
        </div>

        <div data-role="footer">
        <h4>Footer content</h4>
        </div><!-- /footer -->

        </div>  

        <script type="text/javascript">

            $(function()
            {
                $('#submitButton').on('click', function(e)
                {
                    e.preventDefault();
                    $(this).css("background-color","yellow");
                    handleLogin();
                });
            });

        </script>   

        </body>
</html> 
```

单击提交按钮时，它会调用 handleLogin() 函数，但颜色不会改变。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T04:52:17.363

```
$(function() {
    $('#submitButton').on('click', function(e) {
        e.preventDefault();
        $(this).css("background-color","yellow");
        handleLogin();
    });
}); 
```

防止表单刷新页面，将代码放在 document.ready (the `$(function() {..code here..});`) 中，并记住包含 jQuery。

[小提琴](http://jsfiddle.net/aWTsS/1/)

**编辑：**

如果发布的新代码是您的整个文件，那么您没有 handleLogin 函数（除非它在外部文件中）？？？

在浏览器中打开控制台 (F12) 并检查是否有任何错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T04:52:19.083

是否正确包含 jQuery？因为它在我的 jsFiddle 中对我有用。[http://jsfiddle.net/jnaHB/](http://jsfiddle.net/jnaHB/)

提交请求时页面可能正在刷新？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T05:08:58.340

你`$('#submitButton').click(function()`应该在里面：

```
$(function() {
  /*Your function*/
}) 
```

**或者**

```
$(document).ready(function() {
/*Your function*/
}) 
```

**或者**

```
$(window).load(function() {
/*Your function*/
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T04:51:02.753

您正在使用提交按钮。这就是为什么单击提交按钮可能会由于表单提交而刷新页面的原因。您可以使用表单 onSubmit 事件而不是单击按钮。而且，如果您想查看背景颜色，请使用“return false;”。在您的函数中，否则它将再次提交表单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T04:54:40.560

首先，你没有包括 jquery ......

其次，您可以添加`return false;`事件回调，否则页面将刷新并且您将看不到任何内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T04:59:04.660

尝试 document.ready 中的代码

$(document).ready(function(){ $('#submitButton').click(function () { $("#submitButton").css("background-color", "yellow"); handleLogin(); }); })

# android - 添加新行时如何调整 ListView 的大小？

> ID：11406776
> 
> 赞同：1
> 
> 时间：2012-07-10T04:46:26.960
> 
> 标签：android, resize, android-listview

所以我有这个：

```
...<!--Stuff above-->
<ListView 
     android:id="@+id/reminders_list"
     android:layout_width="match_parent"
     android:layout_height="wrap_content"></ListView>
...<!--More stuff below--> 
```

我的问题是当我尝试添加更多行时它不起作用，因为如果没有更多空间，适配器不会添加更多视图。至少在这种情况下。这意味着我需要动态调整它的大小。问题是如何做到这一点？如果除了调整大小之外还有其他可能，我宁愿这样做。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T04:57:01.637

问题出在你的`android:layout_height="wrap_content"`

将高度设置为 wrap_content 将仅显示前三行，其余行将被忽略。尝试使其成为`android:layout_height="fill_parent"`

正如[Romain Guy](https://stackoverflow.com/questions/4270278/layout-width-of-a-listview)（曾在 UI 工具包上工作的 Google 工程师）在他的帖子中所说

通过将宽度设置为 wrap_content，您是在告诉 ListView 与最宽的子视图一样宽。因此，ListView 必须测量其项目并获取它必须在适配器上调用 getView() 的项目。这可能会发生多次，具体取决于布局传递的数量、父布局的行为等。

因此，如果您将 ListView 的布局宽度或布局高度设置为 wrap_content，ListView 将尝试测量附加到它的每个视图 - 这绝对不是您想要的。

请记住：避免始终为 ListViews 或 GridViews 设置 wrap_content，有关更多详细信息，请参阅此[Google I/O 视频](http://www.youtube.com/watch?v=wDBM6wVEO70&t=40m45s)谈论 listview 的世界

[将行动态添加到列表视图 Link_1](https://stackoverflow.com/questions/1917773/dynamic-listview-in-android-app)

[将行动态添加到列表视图 Link_2](https://stackoverflow.com/questions/4589518/android-adding-subrows-to-a-listview)

[将行动态添加到列表视图 Link_3](https://stackoverflow.com/questions/3255650/styling-added-rows-to-arrayadapter-listview-android)

[将行动态添加到列表视图 Link_4](https://stackoverflow.com/questions/1998483/listview-dynamic-add-item)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T04:59:46.057

当向 List Adapter 添加元素时，您需要调用它的`notifyDataSetChanged()`成员函数来通知任何附加的观察者（例如 ListView），数据已更改，并将导致其刷新。

# haskell - 直觉型理论的组合逻辑等价物是什么？

> ID：11406786
> 
> 赞同：87
> 
> 时间：2012-07-10T04:47:50.260
> 
> 标签：haskell, types, functional-programming, logic, agda

我最近完成了一门以 Haskell 和 Agda（一种依赖类型的函数式编程语言）为特色的大学课程，并且想知道是否可以用组合逻辑替换其中的 lambda 演算。使用 Haskell 似乎可以使用 S 和 K 组合器，从而使其无点。我想知道 Agda 的等价物是什么。即，可以在不使用任何变量的情况下制作一种与 Agda 等效的依赖类型函数式编程语言吗？

此外，是否有可能以某种方式用组合器代替量化？我不知道这是否是巧合，但通用量化例如使类型签名看起来像一个 lambda 表达式。有没有办法从类型签名中删除通用量化而不改变其含义？例如在：

```
forall a : Int -> a < 0 -> a + a < a 
```

不使用 forall 可以表达同样的事情吗？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-08-03T11:43:05.727

所以我想了更多，并取得了一些进展。`Set : Set`这是以组合风格对 Martin-Löf 令人愉快的简单（但不一致）系统进行编码的第一次尝试。这不是一个好的结束方式，但它是最容易开始的地方。这种类型论的语法只是带有类型注释、Pi 类型和全域集的 lambda 演算。

### 目标类型理论

为了完整起见，我将介绍规则。上下文有效性只是说您可以通过毗邻居住`Set`在 s 中的新变量来从空构建上下文。

```
 G |- valid   G |- S : Set
--------------     ----------------------------- x fresh for G
  . |- valid         G, x:S |- valid 
```

现在我们可以说如何在任何给定的上下文中为术语合成类型，以及如何将某物的类型更改为它包含的术语的计算行为。

```
 G |- valid             G |- S : Set   G |- T : Pi S \ x:S -> Set
------------------     ---------------------------------------------
  G |- Set : Set         G |- Pi S T : Set

  G |- S : Set   G, x:S |- t : T x         G |- f : Pi S T   G |- s : S
------------------------------------     --------------------------------
  G |- \ x:S -> t : Pi S T                 G |- f s : T s

  G |- valid                  G |- s : S   G |- T : Set
-------------- x:S in G     ----------------------------- S ={beta} T
  G |- x : S                  G |- s : T 
```

在与原始版本的一个小变化中，我使 lambda 成为唯一的绑定运算符，因此 Pi 的第二个参数应该是一个函数，计算返回类型取决于输入的方式。按照惯例（例如在 Agda 中，但遗憾的是在 Haskell 中没有），lambda 的范围尽可能向右扩展，因此当抽象是高阶运算符的最后一个参数时，您通常可以不加括号：你可以看到我做到了与 Pi。您的 Agda 类型`(x : S) -> T`变为`Pi S \ x:S -> T`.

（*题外话*。如果您希望能够*合成*抽象的类型，则需要在 lambda 上进行类型注释。如果您切换到类型*检查*作为您的操作方式，您仍然需要注释来检查 beta-redex 之类的`(\ x -> t) s`，因为您没有办法从整体中猜测部分的类型。我建议现代设计师检查类型并从语法中排除 beta-redexes。）

（*题外话*。这个系统是不一致的，因为它`Set:Set`允许对各种“骗子悖论”进行编码。当 Martin-Löf 提出这个理论时，吉拉德在他自己的不一致系统 U 中向他发送了一个编码。随后由于 Hurkens 的悖论是我们所知道的最整洁的有毒结构。）

### 组合器语法和规范化

无论如何，我们有两个额外的符号，Pi 和 Set，所以我们可能会管理一个包含 S、K 和两个额外符号的组合翻译：我选择 U 代表宇宙，P 代表产品。

现在我们可以定义无类型组合语法（使用自由变量）：

```
data SKUP = S | K | U | P deriving (Show, Eq)

data Unty a
  = C SKUP
  | Unty a :. Unty a
  | V a
  deriving (Functor, Eq)
infixl 4 :. 
```

`a`请注意，我已经包含了在此语法中包含由类型表示的自由变量的方法。除了对我来说是一种反射（每个名副其实的语法都是一个带有`return`嵌入变量和`>>=`执行替换的自由单子），它可以方便地表示转换过程中的中间阶段，并绑定到它们的组合形式。

这是标准化：

```
norm :: Unty a -> Unty a
norm (f :. a)  = norm f $. a
norm c         = c

($.) :: Unty a -> Unty a -> Unty a        -- requires first arg in normal form
C S :. f :. a $. g  = f $. g $. (a :. g)  -- S f a g = f g (a g)   share environment
C K :. a $. g       = a                   -- K a g = a             drop environment
n $. g              = n :. norm g         -- guarantees output in normal form
infixl 4 $. 
```

（读者的练习是为范式定义一个类型并锐化这些操作的类型。）

### 表示类型论

我们现在可以为我们的类型理论定义一个语法。

```
data Tm a
  = Var a
  | Lam (Tm a) (Tm (Su a))    -- Lam is the only place where binding happens
  | Tm a :$ Tm a
  | Pi (Tm a) (Tm a)          -- the second arg of Pi is a function computing a Set
  | Set
  deriving (Show, Functor)
infixl 4 :$

data Ze
magic :: Ze -> a
magic x = x `seq` error "Tragic!"

data Su a = Ze | Su a deriving (Show, Functor, Eq) 
```

我以 Bellegarde 和 Hook 方式（由 Bird 和 Paterson 推广）使用 de Bruijn 索引表示。该类型`Su a`比 多一个元素`a`，我们将其用作绑定器下的自由变量的类型，其中`Ze`作为新绑定的变量并`Su x`作为旧自由变量的移位表示`x`。

### 将术语翻译成组合器

完成后，我们获得了基于*括号抽象*的通常翻译。

```
tm :: Tm a -> Unty a
tm (Var a)    = V a
tm (Lam _ b)  = bra (tm b)
tm (f :$ a)   = tm f :. tm a
tm (Pi a b)   = C P :. tm a :. tm b
tm Set        = C U

bra :: Unty (Su a) -> Unty a               -- binds a variable, building a function
bra (V Ze)      = C S :. C K :. C K        -- the variable itself yields the identity
bra (V (Su x))  = C K :. V x               -- free variables become constants
bra (C c)       = C K :. C c               -- combinators become constant
bra (f :. a)    = C S :. bra f :. bra a    -- S is exactly lifted application 
```

### 键入组合器

翻译显示了我们使用组合子的方式，这为我们提供了关于它们的类型应该是什么的相当线索。`U`并且`P`只是设置构造函数，因此，编写未翻译的类型并允许 Pi 使用“Agda 表示法”，我们应该有

```
U : Set
P : (A : Set) -> (B : (a : A) -> Set) -> Set 
```

`K`组合器用于将某种类型的值提升为某个`A`其他类型的常量函数`G`。

```
 G : Set   A : Set
-------------------------------
  K : (a : A) -> (g : G) -> A 
```

组合器用于将`S`应用程序提升到一个类型上，所有部分都可能依赖于该类型。

```
 G : Set
  A : (g : G) -> Set
  B : (g : G) -> (a : A g) -> Set
----------------------------------------------------
  S : (f : (g : G) ->    (a : A g) -> B g a   ) ->
      (a : (g : G) ->    A g                  ) ->
           (g : G) ->    B g (a g) 
```

如果您查看 的类型`S`，您会发现它准确地说明了类型理论的*上下文*应用规则，因此这就是它适合反映应用构造的原因。这就是它的工作！

然后我们只申请封闭的东西

```
 f : Pi A B
  a : A
--------------
  f a : B a 
```

但有一个障碍。我在普通类型理论中编写了组合子的类型，而不是组合类型理论。幸运的是，我有一台可以进行翻译的机器。

### 组合型系统

```
---------
  U : U

---------------------------------------------------------
  P : PU(S(S(KP)(S(S(KP)(SKK))(S(KK)(KU))))(S(KK)(KU)))

  G : U
  A : U
-----------------------------------------
  K : P[A](S(S(KP)(K[G]))(S(KK)(K[A])))

  G : U
  A : P[G](KU)
  B : P[G](S(S(KP)(S(K[A])(SKK)))(S(KK)(KU)))
--------------------------------------------------------------------------------------
  S : P(P[G](S(S(KP)(S(K[A])(SKK)))(S(S(KS)(S(S(KS)(S(KK)(K[B])))(S(KK)(SKK))))
      (S(S(KS)(KK))(KK)))))(S(S(KP)(S(S(KP)(K[G]))(S(S(KS)(S(KK)(K[A])))
      (S(S(KS)(KK))(KK)))))(S(S(KS)(S(S(KS)(S(KK)(KP)))(S(KK)(K[G]))))
      (S(S(KS)(S(S(KS)(S(KK)(KS)))(S(S(KS)(S(S(KS)(S(KK)(KS)))
      (S(S(KS)(S(KK)(KK)))(S(KK)(K[B])))))(S(S(KS)(S(S(KS)(S(KK)(KS)))(S(KK)(KK))))
      (S(KK)(KK))))))(S(S(KS)(S(S(KS)(S(KK)(KS)))(S(S(KS)(S(KK)(KK)))
      (S(S(KS)(KK))(KK)))))(S(S(KS)(S(S(KS)(S(KK)(KS)))(S(KK)(KK))))(S(KK)(KK)))))))

  M : A   B : U
----------------- A ={norm} B
  M : B 
```

所以你有它，在它所有难以理解的荣耀中：一个组合表示`Set:Set`！

还是有点问题。系统的语法使您无法仅从术语中猜测`G`和`A`的`B`参数`S`以及类似的 。`K`相应地，我们可以通过算法验证*类型推导*，但我们不能像使用原始系统那样只对组合项进行类型检查。可能的工作是要求类型检查器的输入带有关于 S 和 K 使用的类型注释，有效地记录推导。但那是另一罐蠕虫......

**如果您有足够的热情开始，这是一个停下来的好地方。其余的都是“幕后”的东西。**

### 生成组合器的类型

我使用相关类型理论术语的括号抽象翻译生成了这些组合类型。为了展示我是如何做到的，并使这篇文章不完全没有意义，让我提供我的设备。

我可以编写组合器的类型，完全抽象它们的参数，如下所示。我使用了我方便的`pil`函数，它结合了 Pi 和 lambda 以避免重复域类型，并且相当有帮助地允许我使用 Haskell 的函数空间来绑定变量。也许您几乎可以阅读以下内容！

```
pTy :: Tm a
pTy = fmap magic $
  pil Set $ \ _A -> pil (pil _A $ \ _ -> Set) $ \ _B -> Set

kTy :: Tm a
kTy = fmap magic $
  pil Set $ \ _G -> pil Set $ \ _A -> pil _A $ \ a -> pil _G $ \ g -> _A

sTy :: Tm a
sTy = fmap magic $
  pil Set $ \ _G ->
  pil (pil _G $ \ g -> Set) $ \ _A ->
  pil (pil _G $ \ g -> pil (_A :$ g) $ \ _ -> Set) $ \ _B ->
  pil (pil _G $ \ g -> pil (_A :$ g) $ \ a -> _B :$ g :$ a) $ \ f ->
  pil (pil _G $ \ g -> _A :$ g) $ \ a ->
  pil _G $ \ g -> _B :$ g :$ (a :$ g) 
```

定义完这些后，我提取了相关的*开放*子术语并通过翻译运行它们。

### de Bruijn 编码工具包

以下是如何构建`pil`. 首先，我定义了一个`Fin`项目集类，用于变量。每个这样`emb`的集合在上面的集合中都有一个保留构造函数的 edding，加上一个新`top`元素，您可以将它们区分开来：该`embd`函数会告诉您一个值是否在`emb`.

```
class Fin x where
  top :: Su x
  emb :: x -> Su x
  embd :: Su x -> Maybe x 
```

当然，我们可以实例化`Fin`for`Ze`和`Suc`

```
instance Fin Ze where
  top = Ze              -- Ze is the only, so the highest
  emb = magic
  embd _ = Nothing      -- there was nothing to embed

instance Fin x => Fin (Su x) where
  top = Su top          -- the highest is one higher
  emb Ze     = Ze            -- emb preserves Ze
  emb (Su x) = Su (emb x)    -- and Su
  embd Ze      = Just Ze           -- Ze is definitely embedded
  embd (Su x)  = fmap Su (embd x)  -- otherwise, wait and see 
```

*现在我可以使用弱化*操作来定义小于或等于。

```
class (Fin x, Fin y) => Le x y where
  wk :: x -> y 
```

该`wk`函数应将 的元素嵌入`x`为 的*最大*元素`y`，以使 中的额外事物`y`更小，从而在 de Bruijn 索引项中更局部地绑定。

```
instance Fin y => Le Ze y where
  wk = magic    -- nothing to embed

instance Le x y => Le (Su x) (Su y) where
  wk x = case embd x of
    Nothing  -> top          -- top maps to top
    Just y   -> emb (wk y)   -- embedded gets weakened and embedded 
```

一旦你解决了这个问题，剩下的就是一点 rank-n skullduggery。

```
lam :: forall x. Tm x -> ((forall y. Le (Su x) y => Tm y) -> Tm (Su x)) -> Tm x
lam s f = Lam s (f (Var (wk (Ze :: Su x))))
pil :: forall x. Tm x -> ((forall y . Le (Su x) y => Tm y) -> Tm (Su x)) -> Tm x
pil s f = Pi s (lam s f) 
```

高阶函数不仅给你一个表示变量的术语，它给你一个*重载*的东西，它在变量可见的任何范围内成为变量的正确表示。也就是说，我不厌其烦地*按类型*区分不同范围的事实为 Haskell 类型检查器提供了足够的信息来计算转换为 de Bruijn 表示所需的移位。为什么要养一只狗并自己吠叫？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-20T20:22:37.023

我猜“括号抽象”在某些情况下也适用于依赖类型。在以下论文的第 5 节中，您会发现一些 K 和 S 类型：

离谱但有意义的巧合
依赖类型安全的语法和评估
Conor McBride，斯特拉斯克莱德大学，2010

将 lambda 表达式转换为组合表达式大致相当于将自然演绎证明转换为 Hilbert 样式证明。

# android - 根据android的电池电量数据绘制图表

> ID：11406788
> 
> 赞同：0
> 
> 时间：2012-07-10T04:47:55.680
> 
> 标签：android, android-layout, android-intent

我一直在开发一个应用程序来显示电池信息。我已经从电池管理器中获取了所有可能的信息，现在我想做的是根据电池电量与时间的关系绘制图表。为此，我的概念是使用 alammanager 对象来监控电池电量，我认为它不会起作用！任何人都可以帮助我提出一个好的概念！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:15:56.393

要首先显示图表，您必须听取电池电量，然后将每个更好的状态以及日期和时间保存在数据库中。有关电池监控的更多信息，您可以点击此[链接](http://developer.android.com/training/monitoring-device-state/battery-monitoring.html)

之后，您可以使用[achartengine](http://www.achartengine.org/)在 android 中创建图形。使用数据库值显示图形。

# java - Java EE 和 WebLogic 有什么关系？

> ID：11406789
> 
> 赞同：-2
> 
> 时间：2012-07-10T04:48:14.160
> 
> 标签：java, php, zend-framework, codeigniter

我知道这是一个愚蠢的问题。但是我在编程方面的知识确实非常有限。我在学校有编写 PHP 代码的经验，我知道有一个名为 codeigniter 的框架，其中包括用于促进 PHP 编程的非常基本的函数和库。

Java EE 对 Java 和 WebLogic 是否像 codeigniter 对 PHP 和一些基于 php 的 Web 应用程序（例如，论坛）？我的意思是，Java EE 是一个框架还是类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:11:08.493

Java EE 是一个标准。据此[_](http://www.oracle.com/technetwork/java/javaee/overview/index.html)

> Java Platform, Enterprise Edition (Java EE) 6 是企业 Java 计算的行业标准。利用新的轻量级 Java EE 6 Web Profile 创建下一代 Web 应用程序，以及 Java EE 6 平台的全部功能用于企业应用程序。开发人员将受益于更多注释、更多 POJO、简化打包和更少 XML 配置的生产力改进。

WebSphere Application Server、JBoss Application Server 等都是上述标准的实现。

谷歌确实有很大帮助，请在发布前查看它:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T04:59:41.400

Java EE 不是一个框架。它是用于 Web 开发过程的 java 的单独版本。对于部署（运行）Web 应用程序，我们需要一个服务器。Weblogic 是服务器之一。

# perl - 使用 WWW::Mechanize 在 perl 中抓取网站

> ID：11406791
> 
> 赞同：1
> 
> 时间：2012-07-10T04:48:35.243
> 
> 标签：perl, login, web, mechanize, scrape

我在 perl 中使用 WWW::Mechanize 进行网站抓取应用程序。

当我要通过 WWW::Mechanize 登录特定站点时，我遇到了一些困难。我已经浏览了一些 WWW::Mechanize 的例子。但我找不到我的问题。我在我的代码下面提到了。

```
#!/usr/bin/perl -w

use strict;
use WWW::Mechanize;
use HTTP::Cookies;
use Crypt::SSLeay;
my $agent = WWW::Mechanize->new(noproxy => 0);
$agent->cookie_jar(HTTP::Cookies->new());
$agent->agent('Mozilla/5.0');
$agent->proxy(['https', 'http', 'ftp'], 'http://proxy.rcapl.com:3128');
$agent->get("http://www.facebook.com");
my $re=$agent->submit_form(
        form_number => 1,
        fields      => {
            Email    => 'xyz@gmail.com',
            Passwd  =>'xyz'
        }
    );
print $re->content(); 
```

当我运行代码时，它说：

[发布https://www.facebook.com/login.php?login_attempt=1](https://www.facebook.com/login.php?login_attempt=1)时出错：未在 ./test.pl 第 11 行实现

任何人都可以告诉代码出了什么问题。我需要设置facebook发送登录的所有参数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:51:43.617

代理有问题：

```
Error GETing http://www.facebook.com: Can't connect to proxy.rcapl.com:3128 (Bad hostname) at so11406791.pl line 11\. 
```

该程序无需调用代理方法即可为我工作。删除这个。

# iis - gif 文件在 Windows azure 中出现 404 错误

> ID：11406793
> 
> 赞同：1
> 
> 时间：2012-07-10T04:49:03.563
> 
> 标签：iis, azure

我第一次在我的 Windows azure 中部署了一个`gif`文件，但它给出了 404 错误，我确定图像路径是正确的，并且同一文件夹中的**png文件正确显示**

远程机器中的 IIS 是否有任何特殊配置需要修复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:52:54.640

IIS 中不应有任何特殊配置来提供 GIF 文件。您是否能够远程桌面到机器并验证文件是否正确（您期望它们在哪里）？

# sorting - Crystal Reports 按运行总计排序

> ID：11406796
> 
> 赞同：0
> 
> 时间：2012-07-10T04:49:36.850
> 
> 标签：sorting, crystal-reports, cumulative-sum

如 Crystal Reports 帮助中所述，我使用公式创建了几个运行总计。但是，当我尝试使用我的组运行总计对报表进行排序时，它不会在排序专家中显示这些公式。

我认为这是因为我`WhilePrintingRecord`按照 CR 帮助中的说明在公式中使用了。

任何想法如何克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:12:35.207

发生这种情况是因为在打印时评估了 RunningTotals。直接的方法是使用视图或 SQL 表达式创建存储过程。在将该字段添加到报表后使用前 N/组排序。

# objective-c - 在另一个控制器的 viewDidDisappear 完成之前调用 viewWillAppear

> ID：11406797
> 
> 赞同：0
> 
> 时间：2012-07-10T04:49:41.560
> 
> 标签：objective-c, ipad, ios5, xcode4.3

我有 2 个视图控制器说 VC-1、VC-2。我通过导航堆栈在 VC-1 上显示了 VC-2。VC-1 有 textView，VC-2 有 webView。现在我需要在 VC-2 弹出后立即更新 VC-1 的内容。因此，我使用 VC-2 的 viewDidDisappear 方法来设置内容，并在 VC-1 的 viewWillAppear 中使用它来更新 textView（VC-1 的内容）。但是在 viewDidDisappear 完成之前，VC-1 的 viewWillAppear 被执行并且内容没有更新。我已经通过 NSLogging 检查了这一点。viewDidDisappear 有一些文件读取内容，所以我猜这是导致问题的原因。如何在 DidDisappear(VC-2) 完成后调用 WillAppear(of VC-1)？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T04:53:31.300

`-viewWillAppear:`在您的视图完全出现在屏幕上之前调用。`-viewDidDisappear:`在您的视图完全从屏幕上消失后调用。因此，在任何类型的动画转换中，例如导航堆栈弹出/推送，传入的 VC`-viewWillAppear:`必须在调用离开的 VC 之前`-viewDidDisappear:`被调用。这是完全正确的。

您可能应该接受您正在从事的工作`-viewDidDisappear:`并将其转移到其他`-viewWillDisappear:`地方。

# php - 当我使用 nginx 重写时，为什么 $_SERVER['SCRIPT_NAME'] 返回 'index.php'？

> ID：11406800
> 
> 赞同：1
> 
> 时间：2012-07-10T04:50:18.953
> 
> 标签：php, nginx, yii

我正在使用 YII 框架，在 Apache 服务器上一切正常，但在 Nginx 上却出错了。当我请求 URL www.test.com/index.php/a/b 时，$_SERVER['SCRIPT_NAME'] 返回 '/index.php' 这正是我需要的，但是当我请求 URL www.test 时。 com/a/b 被重写为同一个名为 'index.php' 的文件，$_SERVER['SCRIPT_NAME'] 变成了与 Apache 不同的 'index.php'。我的 nginx 配置如下：

```
server {
    set $host_path "/data/yii/application";
    access_log  off;

    server_name www.yii.com;
    root   $host_path;
    set $yii_bootstrap "index.php";

    charset utf-8;

    location / {
        index  index.html $yii_bootstrap;
        try_files $uri $uri/ $yii_bootstrap?$args;
    }

    location ~ ^/(protected|framework|themes/\w+/views) {
        deny  all;
    }

    #avoid processing of calls to unexisting static files by yii
    location ~ \.(js|css|png|jpg|gif|swf|ico|pdf|mov|fla|zip|rar)$ {
        try_files $uri =404;
    }

    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
    #
    location ~ \.php {
        fastcgi_split_path_info  ^(.+\.php)(.*)$;

        #let yii catch the calls to unexising PHP files
        set $fsn /$yii_bootstrap;
        if (-f $document_root$fastcgi_script_name){
            set $fsn $fastcgi_script_name;
        }

        fastcgi_pass   127.0.0.1:9001;
        include fastcgi_params;
        fastcgi_param  SCRIPT_FILENAME  $document_root$fsn;

        #PATH_INFO and PATH_TRANSLATED can be omitted, but RFC 3875 specifies them for CGI
        fastcgi_param  PATH_INFO        $fastcgi_path_info;
        fastcgi_param  PATH_TRANSLATED  $document_root$fsn;
    }

    location ~ /\.ht {
        deny  all;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:56:59.670

这部分是错误的：

```
set $yii_bootstrap "index.php";

location / {
    index  index.html $yii_bootstrap;
    try_files $uri $uri/ $yii_bootstrap?$args;
} 
```

它应该是：

```
location / {
    index  index.html index.php;
    try_files $uri $uri/ /index.php$uri?$args;
} 
```

另见： http: [//nginx.org/en/docs/faq/variables_in_config.html](http://nginx.org/en/docs/faq/variables_in_config.html)

--

而这部分：

```
location ~ \.php {
    fastcgi_split_path_info  ^(.+\.php)(.*)$;

    #let yii catch the calls to unexising PHP files
    set $fsn /$yii_bootstrap;
    if (-f $document_root$fastcgi_script_name){
        set $fsn $fastcgi_script_name;
    }

    fastcgi_pass   127.0.0.1:9001;
    include fastcgi_params;
    fastcgi_param  SCRIPT_FILENAME  $document_root$fsn;

    #PATH_INFO and PATH_TRANSLATED can be omitted, but RFC 3875 specifies them for CGI
    fastcgi_param  PATH_INFO        $fastcgi_path_info;
    fastcgi_param  PATH_TRANSLATED  $document_root$fsn;
} 
```

必须替换为：

```
location ~ ^(?<script>.+\.php)(?<pathinfo>.*)$ {
    try_files $script =404;

    fastcgi_pass   127.0.0.1:9001;
    include fastcgi_params;
    fastcgi_param  SCRIPT_FILENAME  $document_root$script;

    #PATH_INFO and PATH_TRANSLATED can be omitted, but RFC 3875 specifies them for CGI
    fastcgi_param  PATH_INFO        $pathinfo;
    fastcgi_param  PATH_TRANSLATED  $document_root$script;
} 
```

--

你应该避免这样的事情：

```
set $host_path "/data/yii/application";
root   $host_path; 
```

一定是：

```
root /data/yii/application; 
```

[http://nginx.org/en/docs/faq/variables_in_config.html](http://nginx.org/en/docs/faq/variables_in_config.html)

# android - 一个 NFC 标签上的 2 条 NDEF 消息/记录 - Android

> ID：11406804
> 
> 赞同：4
> 
> 时间：2012-07-10T04:50:51.153
> 
> 标签：android, nfc, ndef

有没有人尝试过 Android 默认行为，当在 NFC 标签上保存 2 个 NDEF 记录时，一个指向带有应用程序 .apk 的 URL，而第二个具有应用程序专有数据？

用例如下：当用户尚未安装应用程序时，设备启动 Google Play 或网络浏览器，用户可以下载应用程序。一旦用户安装了应用程序，它就会处理标签内容。两者都是分开工作的，但我没有在一个 NDEF 中尝试过 2 条 NDEF 消息或 2 条记录。有 2 条 NDEF 记录的经验吗？我可以自己尝试，但我想节省时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T01:04:11.090

Two NDEF messages is not supported by Android (and probably also not by other platforms). Multiple NDEF records in one NDEF message works fine. As noted in the comments, an Android Application Record (AAR) works perfectly. Just keep in mind not to put it as the first record of the message and add an intent filter that matches the first record of the message (otherwise your app will be launched with normal LAUNCHER_MAIN, without NDEF message, instead of NDEF_DISCOVERED with NDEF message.

A URL pointing to the app in the Play Store works usually fine, too, if your combine it with an Intent filter for that URL in the app itself. It works also on Android 2.3\. Keep in mind, though, that other apps beside the Play Store app and the browser may have a matching intent filter. You never have that problem with an AAR (but AAR is only supported since ICS).

# javascript - jQuery绑定ajax：成功在rails 3应用程序中无法用于新创建的（ajax）项目

> ID：11406805
> 
> 赞同：9
> 
> 时间：2012-07-10T04:50:56.263
> 
> 标签：javascript, jquery, ruby-on-rails, ajax

**编辑这篇文章是因为我发现问题实际上在于 rails 无法绑定到 ajax:success 函数。

***使用导轨 3.2.3

感谢您花时间阅读并尝试提供帮助。

我在ajax上添加了一个简单的淡出功能：成功删除项目，如下：

```
$(document).ready( jQuery(function($) {
    $('.delete').bind('ajax:success', function() {
        $(this).closest('div').fadeOut();
    });
}));
#For some reason had to pass the $ into the function to get it to work,
#not sure why this is necessary but doesn't work unless that is done. 
```

在此之后，我想在用户添加内容时使用不显眼的 jQuery 创建一个对象，并且在这些对象上也有有效的删除按钮。我创建了一个 create.js.erb 文件，该文件在创建新项目后调用 - 并且创建工作正常，但删除按钮无法访问 ajax:success 事件。

单击时它确实会从数据库中删除数据，但 .fadeOut 从未绑定到它，因此它不会消失。create.js.erb 如下：

```
#$("div").append(html) here, then call the function below to try and bind the ajax:success function
$('.delete').bind('ajax:complete', function() {
    $(this).closest('div').fadeOut();
}); 
```

如果我将其更改为绑定到 click 函数，它可以工作，但这并不能说明 ajax 调用失败：

```
#$("div").append(html) here, then call the function below to try and bind the ajax:success function
    $('.delete').bind('click', function() {
        $(this).closest('div').fadeOut();
    }); 
```

因此，在创建项目后，必须与 ajax:success 绑定。你们知道为什么会发生这种情况吗？我是否需要在 Rails 中做一些特别的事情来让新渲染的项目识别 ajax 事件？任何方向将不胜感激！

PS删除方法的控制器如下，以防任何人在那里检测到问题：

```
def destroy
    @user = User.find(params[:user_id])
    @item = @user.item.find(params[:id])
    @item.destroy

    respond_to do |format|
      format.html { redirect_to user_path(@user) }
      format.json { head :no_content }
      format.js { render :nothing => true }
    end
end 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-31T19:19:07.043

问题听起来像是在生成元素之前发生了绑定。尝试这个：

```
$(document).on('ajax:success', '.delete', function(e) {
    $(e.currentTarget).closest('div').fadeOut();
}); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-07T11:46:05.533

我遇到了同样的问题，因为我的表单处理程序方法返回了一个纯字符串。一定要渲染一些 jQuery 可以处理的东西：

```
def handle_form
  ...
  render :json => {:what => 'ever'}
  # or
  render :nothing => true
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-15T19:38:29.133

尽管这是一个老问题，但我有一个更新的答案来解决同样的问题。

从 1.9 版开始，jQuery 将不再将空响应（render nothing: true）视为成功/完成。这意味着在您的控制器中，您应该返回一个空的 JSON 对象。

`respond_to do |format| format.json { render: {}.to_json } end`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-15T19:40:46.970

我最近使用 Rails 3.2.3 做了类似的事情。我也用

```
$('#dialog-form').bind('ajax:success', function() {
}) 
```

它工作正常......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-29T23:02:41.670

通过 catch 检查您是否收到解析错误（或类似错误）`ajax:completed`。检查`status`那里的论点。就我而言，这是`parseerror`由于 mimetype 不匹配造成的。

您还可以在`jquery_ujs.js`.

另请参阅此问题[jQuery ajax request not triggering JS response](https://stackoverflow.com/questions/6919801/jquery-ajax-request-not-triggering-js-response-from-rails-controller)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-16T18:11:38.423

对我来说，这是因为我们使用的是 slim，模板是“name.slim”。如果我们将它们更改为“name.slim.html”，则 ajax:success 会正确触发。

我正在使用的解决方案是将格式添加到控制器中的渲染声明中。

所以我们有这样的东西：

```
render :new, layout: false, formats: [:html] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-12T23:38:31.320

即使这是一个老问题，没有一个答案真的对我有帮助，因为我有一个自定义确认对话框，并且 ajax:success 触发了完全不同的元素。

为了找到在这种情况下您的 ajax 触发了哪个元素，您可以首先使用代码：

```
$(document).on('ajax:success', 'a', function(evt, data, status, xhr) {
    $( ".log" ).text( "Triggered ajaxComplete handler." );
    // Check what is the value of $(this), and you will see what button has triggered the ajax success action, and you can start from there
}); 
```

# c++ - 我可以在 cgo 中使用 c++ 吗？

> ID：11406812
> 
> 赞同：8
> 
> 时间：2012-07-10T04:52:03.363
> 
> 标签：c++, go, cgo

是否可以在 cgo 中混入一些 C++ 代码？

我试过这个：

```
package main
/* 
    #include <iostream>

    extern "C" void test(const char* str)
    {
        std::cout << str;
    }
*/
// #cgo CFLAGS: -x c++
// #cgo LDFLAGS: -lstdc++
import "C"

func main() {
    C.test(C.CString("Testing!!!"))
} 
```

但我得到这些错误：

```
error: 'char* CString(_GoString_)' cannot appear in a constant-exp
error: 'void test(const char*)' cannot appear in a constant-expres
error: invalid conversion from 'char* (*)(_GoString_)' to 'long long int' [-fpermissive]
error: invalid conversion from 'void (*)(const char*)' to 'long long int' [-fpermissive] 
```

我正在使用 go1.0.2 和 MinGW-w64 4.7.1

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-10T05:59:02.930

@ehemient 在 Go 错误跟踪器中提供了指向此功能请求的链接。这反过来又提供了一个链接到[如何在 Go 中使用 C++？](https://stackoverflow.com/questions/1713214/how-to-use-c-in-go/1721230)在这里堆栈溢出。那里有一个很好的讨论，但对我来说，要点是：

1.  Go FAQ 的链接（[Do Go 程序与 C/C++ 程序链接吗？](http://golang.org/doc/go_faq.html#Do%5FGo%5Fprograms%5Flink%5Fwith%5FCpp%5Fprograms)）：

    > ... cgo 程序为“外部函数接口”提供了机制，以允许从 Go 代码安全调用 C 库。SWIG 将此功能扩展到 C++ 库。

2.  [Go 的 SWIG 文档](http://www.swig.org/Doc3.0/Go.html)的链接。

# mysql - MYSQL 从另一个表填充一个表

> ID：11406819
> 
> 赞同：1
> 
> 时间：2012-07-10T04:52:36.120
> 
> 标签：mysql

我有两张桌子

1.  question_bank(ques_id,问题,答案,a,b,c,d)
2.  random_question_bank(user_id,q1,q2,............,q20)

我已经填写了用户的 user_id。

现在，我想为每个 user_id 用 ques_id（随机）填充 q1,q2,.......q20。

请帮助代码。

```
$result_user = mysql_query("INSERT INTO random_question_bank(user_id) VALUES('".$_SESSION['user_id']."')");
if($result_user)
    echo('<br />user name inserted<br />');
$result = mysql_query("SELECT * FROM question_bank ORDER BY RAND() LIMIT 20");
$q = array();
$i = 1;
while($row = mysql_fetch_assoc($result))
{
    $sql = "INSERT INTO random_question_bank(q.'$i') 
         VALUES('".$row['ques_id']."')
        WHERE user_id ='".$_SESSION['user_id']."'";
    $result_ques = mysql_query($sql);
    $i++;
    if($result_ques)
         echo('<br />q'.$i.'<br />');
    $i++;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:52:31.017

请尝试以下代码：

```
$result_user = mysql_query("INSERT INTO random_question_bank(user_id) VALUES('".$_SESSION['user_id']."')");
if($result_user)
echo('<br />user name inserted<br />');
$result = mysql_query("SELECT * FROM question_bank ORDER BY RAND() LIMIT 20");    
$i = 1;
while($row = mysql_fetch_assoc($result))
{
    $sql = "Update random_question_bank set q.'$i' 
     ='".$row['ques_id']."' WHERE user_id ='".$_SESSION['user_id']."'";
$result_ques = mysql_query($sql);
$i++;
if($result_ques)
     echo('<br />q'.$i.'<br />');
$i++;
} 
```

据我所知，您不能将 where 子句与 insert 语句一起使用。希望它对你有用。

# javascript - 下划线作为 JavaScript 变量？

> ID：11406823
> 
> 赞同：37
> 
> 时间：2012-07-10T04:52:53.080
> 
> 标签：javascript

在[这篇文章](https://stackoverflow.com/questions/3504499/how-to-copy-table-row-with-clone-in-jquery-and-create-new-unique-ids-for-the-con)中，[Nick Craver](https://stackoverflow.com/users/13249/nick-craver)提供了一个他使用的答案：

```
function(_, id) 
```

此代码在使用它之前没有将下划线声明为变量。我在谷歌和这里的搜索只指向使用下划线作为前缀的引用，而不是作为变量本身。它有什么作用？我喜欢尼克的解决方案，但这有点困扰我。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-07-10T04:54:26.183

我已经看到用于表示该变量是“无关”变量的下划线。这意味着它无关紧要，根本不使用。

在您指出的情况下，它用于表示他的函数有两个参数，但他只需要第二个。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-10T05:00:24.357

下划线是一个[有效的 JS 变量名](https://developer.mozilla.org/en/JavaScript/Guide/Values,_Variables,_and_Literals#Declaring_variables)。上面示例中命名的参数`_`可以用作任何其他变量。

但是，它通常用于向代码的后续（人类）读者指示不会使用传入的任何内容。（不过，代码的作者可能是邪恶的/无知的并在函数中使用它）。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-04-18T16:05:07.097

作为初学者，我未能收集与此答案相关的许多方面，这些方面分散在评论和其他答案中。因此，我将尝试在下面合并它们：

首先，在上述代码中，下划线参数的使用如下：-

```
$(this).val('').attr('id', function(_, id) { return id + i }); 
```

从[这里](http://api.jquery.com/attr/#attr-attributeName-function)`attr`的函数的 jQuery 文档中，存在一个重载形式is 。在这种形式中被描述为`attr``.attr( attributeName, function )``function`

> 类型：函数（整数索引，字符串属性）

因此，它需要两个参数。但是，在我们的代码中，我们只需要`id`，它恰好是第二个参数。

现在，由于 JS 处理函数参数的方式，我们不能将其写为`function(id)`，因为 JS 会映射`id`到`index`（预期的第一个参数`function`）。因此，我们编写的函数需要有两个参数。

在这里，一个标准的约定开始发挥作用。[正如这里](https://stackoverflow.com/a/32198002/2869791)提到的，

> 下划线字符 (_) 用作指示未使用的函数参数的标准方式。

然而，这只是一个惯例，而不是一个规则。我们可以将未使用的参数命名为`index`或`unused`同样。那是，

```
$(this).val('').attr('id', function(unused, id) { return id + i }); 
```

将是一个有效的等价物。

因此，这种使用 _ 代替未使用参数的用法可以用于任何其他具有类似覆盖形式的 jQuery 函数。例如，在[这个](https://stackoverflow.com/a/36694281/2869791)答案中，我们可以看到下划线在调用中的用法`$.text()`。只是为了确认，有一个重写的形式，它接受一个带有两个参数的函数，如此[处](http://api.jquery.com/text/#text-function)`$.text()`所示。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-10T04:56:23.797

按样式，`_`通常用作占位符变量。一个不会真正在作用域中使用的变量。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-05-10T11:34:46.700

尽管所有答案都解释说**这是一种代码样式“hack”来指示未使用的参数**，但它通常是一种不好的做法（想法）。它将覆盖`_`在父作用域中声明的任何变量。这将阻止您使用定义的库`_`（例如 underscorejs）。它甚至不是某种优化，因为它无论如何都声明了一个变量。

您最好使用参数的描述性名称，并将其视为`_`常规变量。缩短变量名也被认为是不好的做法。所以，如果你打算使用这个“聪明的黑客”，请不要。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-12-04T15:37:22.400

正如之前所有其他海报所说，它可以被视为一个占位符，以防不希望使用它。我在 python 中看到过类似的东西，当一个函数可以返回多个值，但只有需要的值是明确定义的。

例如

```
 a, _, c = foo(bar) 
```

在这种情况下，'b' 的潜在返回值将被忽略（仍然可以通过 _ 访问），并且将使用 'a' 和 'c'。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-10T16:11:22.003

我在一些遗留代码中看到了这种模式（在 _ 未定义时中断），结果证明它应该使用这个库：

[https://underscorejs.org/](https://underscorejs.org/)

# tsql - 这是进行加权平均的正确方法吗？

> ID：11406825
> 
> 赞同：0
> 
> 时间：2012-07-10T04:52:53.840
> 
> 标签：tsql

这是我需要根据字段 KLA 作为权重将某些字段设为加权平均值的初始查询。KLA 是一个 varchar 字段。

```
select  eer.Market,    
    eer.KLA,
    eer.Term,
    case  scdesc when 'ics' then 'Act' else eer.ScDesc end as ScDesc,   
    eer.Term As Term_Anual,    
    eer.VaMonths,    
        eer.RentPrice,    
        eer.BuyPrice,          
    eer.TransactionID
from View1 eer
WHERE ((@Term = 'Long Term' and Term_Anual > 11)    
  OR (@Term = 'Short Term' and Term_Anual < 12))    
  and (ArchiveID in (@ArchiveID))
order by eer.market,
     eer.KLA,
     eer.ScDesc 
```

这是我第一次尝试做加权平均，所以有些事情我不确定。

所以我所做的是尝试通过使用连接来创建 CTE。

```
SELECT  [base].Market,
    [base].MSA,
    [base].ArchiveID,
    [base].TransactionID
    [base].ScDesc,
    SUM([base].KLA) * [weighted].KLA / SUM([weighted].KLA) as KLA,
    SUM([base].VaMonths) * [weighted].VaMonths / SUM([weighted].VaMonths) as VaMonths,
    SUM([base].RentPrice) * [weighted].RentPrice / SUM([weighted].RentPrice) as RentPrice,
    SUM([base].BuyPrice) * [weighted].BuyPrice / SUM([weighted].BuyPrice) as BuyPrice       
FROM View1 [base]
INNER JOIN
(
    select  eer.Market,    
        eer.KLA,
        eer.Term,
        case  scdesc when 'ics' then 'Act' else eer.ScDesc end as ScDesc,   
        eer.Term As Term_Anual,    
        eer.VaMonths,    
            eer.RentPrice,    
            eer.BuyPrice,          
        eer.TransactionID
from View2 eer
WHERE((@Term = 'Long Term' and Term_Anual > 11)    
  OR (@Term = 'Short Term' and Term_Anual < 12))    
  and (ArchiveID in (@ArchiveID))
order by eer.market,
     eer.KLA,
     eer.ScDesc
) as [weighted] 
```

此外，我不知道我应该在哪里或是否应该在两个查询中按 KLA 分组，我想也可以得到权重。

那么，就尝试使某些字段（具有 SUM 的字段）加权而言，这看起来是否正确？

我第一次需要一些手，因为我不确定我是否做对了。总和是在货币、数字等类型的字段中完成的，所以不要担心它们是否是正确的字段类型。[base] 的其余字段。没有加权，我不希望那些明显加权，所以在我的外部查询中直接选择它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-05T12:43:22.893

正如评论中的一些人所提到的，您的问题并不是特别清楚，但是如果您在表格中有一些`Value`和值：`Weight`

```
DECLARE @SampleData TABLE (
    Value DECIMAL(3,2),
    [Weight] DECIMAL(3,2)
)

INSERT INTO @SampleData
SELECT 6, 3
UNION
SELECT 4, 1
UNION
SELECT 9, 1
UNION
SELECT 5, 6
UNION
SELECT 3, 1
UNION
SELECT 1, 1
UNION
SELECT 3, 2
UNION
SELECT 4, 1 
```

您可以返回平均值（平均值）和加权平均值，如下所示：

```
SELECT  AVG(Value) AS Mean,
        AVG(Value * [Weight]) AS WeightedMean
FROM @SampleData 
```

# vim - Verilog 代码颜色丢失

> ID：11406828
> 
> 赞同：2
> 
> 时间：2012-07-10T04:53:26.650
> 
> 标签：vim, verilog

我正在使用 Linux 操作系统上的 gvim 编辑器开发 Verilog。由于系统故障，我丢失了一些文件。以前预定义的 verilog 代码变量过去是有颜色的，但现在不是。我怎样才能找回那些颜色？请帮忙 ！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T08:11:29.250

你只是不必打开语法。

```
:syntax on 
```

或将其添加到您的 vimrc 文件中

```
syntax on 
```

着色丢失可能是由于缺少 verilog 语法文件，我的可以在[这里](https://github.com/morganp/dotfiles/tree/master/vim/syntax)找到。[我这里](https://github.com/morganp/dotfiles/tree/master/vim/ftplugin)也有一个 ftplugin 。

我在[.vimrc](https://github.com/morganp/dotfiles/blob/master/dotfiles/.vimrc)中使用以下行来强制进行文件类型检测：

```
au BufNewFile,BufRead *.v,*.vh,*.args,*.f,*.verilog set ft=verilog 
```

# sql-server - Lync 数据库 - 移动用户与 PC 用户

> ID：11406831
> 
> 赞同：2
> 
> 时间：2012-07-10T04:53:41.410
> 
> 标签：sql-server, lync

祝大家好运，我正在寻找微软如何区分 Lync 数据库（不是 SDK 或 API！）中的移动和非移动订阅者/用户，有人能建议一个方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T01:47:14.190

查看池配置存储中的表“rtcdyn”。这是更详细地描述它的博客文章。如果我发现任何其他内容，我会将其附加到我的答案中。

[http://blog.insidelync.com/2011/04/the-lync-server-databases/](http://blog.insidelync.com/2011/04/the-lync-server-databases/)

# selenium-ide - Selenium IDE 1.8.1 和 Firefox 3

> ID：11406833
> 
> 赞同：0
> 
> 时间：2012-07-10T04:53:50.390
> 
> 标签：selenium-ide, firefox-3

Selenium IDE 1.8.1 是否与 Firefox 3.xy 兼容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:27:26.863

我不知道 Selenium IDE 1.8.1 但 Selenium IDE 1.8.0 需要 Firefox 3.5 或更高版本，[请参阅](http://mac.softpedia.com/get/Internet-Utilities/Selenium-IDE.shtml). 另外，[请参阅](http://code.google.com/p/selenium/wiki/SeIDEReleaseNotes)有关它的这些发行说明。此外，当 Firefox 13 今天可用时，您应该使用更高版本的 Firefox。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:07:02.897

Selenium IDE 1.8.1 与 Firefox 3 不兼容（我使用的是 FF 3.6.18）。Selenium IDE 1.7.2 与之兼容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T04:06:29.427

Selenium IDE 1.8.1 与 Firefox 3.5 不兼容

Selenium IDE 1.8.1 可用于更高版本的 FF。

# asp.net - 如何在不同的选项卡中区分会话？

> ID：11406837
> 
> 赞同：0
> 
> 时间：2012-07-10T04:54:08.263
> 
> 标签：asp.net, session-state

我想在同一个浏览器但在不同的选项卡中打开一个带有新会话的 asp.net 应用程序。如果可能，请告诉我解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:07:12.927

最简单的解决方案是配置会话不使用 cookie 作为会话标识符并使​​用客户端代码打开新窗口。要实现这种方法，您需要将web.config 文件中元素的`cookieless`属性设置为. 在这种情况下，请注意可用的副作用（来自 MSDN 的引用）：`session``UseUri`

> **注意** 当您配置启用 AJAX 的 ASP.NET 网站时，请仅对 cookieless 属性使用 UseCookies 的默认值。ASP.NET AJAX 客户端脚本库不支持使用 URL 中编码的 cookie 的设置。

之后，您可以使用 javascript 打开带有新会话的新选项卡，如下所示：

```
<form id="form1" runat="server">
Session Id:
<%= Session.SessionID %>
<hr />
<input type="button" value="Open New Tab" onclick="openNewTab()" />
<script type="text/javascript">
    function openNewTab() {
        window.open(location.protocol + "//" + location.host + "/Default.aspx", "_blank");
    }
</script>
</form> 
```

或者您可以实现不使用 cookie 作为会话标识符的自定义 SessionIDManager：[SessionIDManager 类](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionidmanager.aspx)

# c# - 如何限制用户只能使用 Linq To SQL 编辑他们的数据？

> ID：11406841
> 
> 赞同：2
> 
> 时间：2012-07-10T04:54:53.250
> 
> 标签：c#, asp.net, .net, linq-to-sql

**背景：** 我一直在使用 C# 在 ASP.NET 4.0 中开发一个小型概念验证 Web 应用程序，并且我一直在使用 Linq To SQL，因为它既快速又简单。我现在必须限制一个用户在同一个数据库中查看另一个用户的数据。所以我在我的大多数表格中添加了一个“帐户”列，我想在允许他们访问之前检查当前用户是否与他们正在查看/编辑的数据是同一帐户的成员。

**一种我不太满意的可能解决方案：** 我可以简单但痛苦地检查我所有的 Linq To SQL 查询并添加一个 if 语句来执行如下检查：

```
MyDataContext DB = new MyDataContext();
//get the current user's information from the DB
USER myUser = DB.USERs.Where(j => j.USR_EMAIL == User.Identity.Name).FirstOrDefault();
//get the object to edit
MYOBJECT myObject= DB.MYOBJECTs.Where(j => j.ID == IdFromQueryString).FirstOrDefault();
//compare the user's account with the object's account they are now trying to view
if(myUser.AccountID == myObject.AccountID)
{
    //display the object
}
else
{
    //display error message
} 
```

这将是整个应用程序中要做的大量工作，更不用说重复和出错的机会了。维护起来也很痛苦，如果我忘记为查询添加这个，我会留下一个安全漏洞。

**问题：** 有没有办法为每个表执行一次，每次我使用 Linq To SQL 进行查询时它都会自动检查？或者有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T05:22:40.870

您应该使用[存储库](http://msdn.microsoft.com/en-us/library/ff649690.aspx)模式而不是直接访问`Contest.Users`，而是始终访问`Repository.Users`。然后，您可以更改存储库以公开`Users`，`from u in InternalContext.Users where u.AccountId = currentAccountId select u`从而强制执行范围。巧合的是，这种技术[在 Rails 中被称为范围](http://railscasts.com/episodes/108-named-scope)......

下一个最好的方法是将[`DataLoadOptions`](http://msdn.microsoft.com/en-us/library/bb534361)lambda 过滤器与您的实体相关联，请参阅[如何：在 DataContext 级别进行过滤 (LINQ to SQL)](http://msdn.microsoft.com/en-us/library/bb386915.aspx)。您需要将此添加到您创建的每个上下文中。同样，重构代码以从方法中获取数据上下文（或者更好的是，实现存储库模式......）将有很大帮助。

最后，您可以在后端通过可更新的视图来实现它，[`context_info()`](http://msdn.microsoft.com/en-us/library/ms189252%28v=sql.105%29.aspx)但我强烈反对这样做。

PS。我希望您`account_id`在表上的每个聚集索引中都设置了最左边的键，并使实体`id`主键成为非聚集的，对吗？否则你的表现会下降。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T05:08:25.687

抱歉，这两个对象都有可用的 AccountID 吗？如果是这样，您有什么理由不能在他们的 Accountid 上加入他们？

```
var query = from o in DB.MYOBJECTs.Where(w => w.ID == IdFromQueryString)
            join u in DB.USERs.Where(w => w.USR_EMAIL = User.Identity.Name) on o.AccountID equals u.AccountID
            select o; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T05:04:11.723

两种可能的方法：

*   使用存储过程而不是直接查询来访问数据；仅授予用户对这些存储过程的权限（即没有对数据库的一般读取访问权限）并让存储过程强制执行访问限制。
*   通过单独的服务代理对数据库的所有访问 - 该服务是唯一对数据库具有一般访问权限的东西，并且可以强制执行访问限制。

这些从根本上与您当前包装每个查询的策略并无太大不同，但可能更易于管理。

# perl - Perl 输入参数

> ID：11406844
> 
> 赞同：2
> 
> 时间：2012-07-10T04:54:55.953
> 
> 标签：perl, command-line-arguments

> **可能重复：**
> [如何将命令行参数传递给 Perl 程序？](https://stackoverflow.com/questions/361752/how-can-i-pass-command-line-arguments-to-a-perl-program)

我有解析输入文件并输出 .stat 文件和 .csv 文件的代码。我需要编写什么代码才能从这样的命令提示符运行我的 Perl 脚本？

```
perl myprogram.pl -i "C:\temp\inputfile.txt" -o "C:\temp\myoutput.csv" -s "C:\temp\myoutput.stat" 
```

其中 -i 是输入文件（必需），-o 是 csv 的输出文件位置（必需），-s 是 .stat 文件的输出文件（可选）。我已经有了程序的代码，但需要实现参数，以便它们可以在命令行中运行。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T05:42:48.163

```
use Getopt::Long qw( GetOptions );

sub usage {
   print STDERR @_ if @_;
   print STDERR ...;
   exit(1);
}

sub help {
   print ...;
   exit(0);
}

my $input_qfn;
my $csv_qfn;
my $output_qfn;

GetOptions(
   "help|h|?" => \&help,
   "i=s"      => \$input_qfn,
   "o=s"      => \$csv_qfn,
   "s=s"      => \$stat_qfn,
) or usage();

defined( $input_qfn )
   or usage("-i option is required\n");
defined( $csv_qfn )
   or usage("-o option is required\n"); 
```

# image-processing - imagemagick中图像的边缘提取

> ID：11406845
> 
> 赞同：1
> 
> 时间：2012-07-10T04:54:57.863
> 
> 标签：image-processing, imagemagick, edge-detection

我正在 imagemagick 中进行图像处理，我有[这个](http://barafranca.nl/im-no-cheater)！要处理的图像。我对图像处理非常陌生，特别是 imagemagick，所以我不太了解它，但是我尝试通过应用不同的技术来解决这个问题，例如模糊、锐化、标记、使用不同蒙版值改变背景但没有用。请任何人告诉我，我应该应用哪些转换或技术来提取上图中的字符边缘。请在此处告知或提供任何资源的链接，我可以在其中阅读更多相关信息。我已经尝试阅读 IM 网站上的示例，但这一切都发生在我的脑海中。这方面的任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-03T06:55:56.413

我不知道如何下载您链接的图像。但是有很多方法可以在 ImageMagick 中创建边缘图像。

```
convert image -edge 1 result 
```

另见 [http://www.imagemagick.org/Usage/morphology/#difference](http://www.imagemagick.org/Usage/morphology/#difference) [http://www.imagemagick.org/Usage/convolve/#edgedet](http://www.imagemagick.org/Usage/convolve/#edgedet)

# opencv - 使用 OpenCV 生成 3d 点（假设正面平行配置）

> ID：11406849
> 
> 赞同：7
> 
> 时间：2012-07-10T04:55:58.797
> 
> 标签：opencv, 3d, depth

我目前正在尝试在 OpenCV 中生成给定立体图像对的 3D 点。据我所知，这已经做了很多。

我知道我将假设的立体声设置的外部参数是正面平行配置（真的，这还不错！）。我知道焦距，基线，并且我将假设主点作为图像的中心（我知道，我知道......）。

我使用 StereoSGBM 计算了一个伪像样的视差图，并按照 O'Reilly 的 Learning OpenCV 书对 Q 矩阵进行了手动编码，该书指定：

```
Q = [ 1 0 0      -c_x
      0 1 0      -c_y
      0 0 0      f
      0 0 -1/T_x (c_x - c_x')/T_x ] 
```

我认为 ( c_x, c_y ) 是主点（我在图像坐标中指定）， f 是焦距（我用 mm 描述）， T_x 是两个相机或基线之间的平移（我也以毫米为单位）。

```
int type = CV_STEREO_BM_BASIC;
double rescx = 0.25, rescy = 0.25;
Mat disparity, vdisparity, depthMap;

Mat frame1 = imread( "C:\\Users\\Administrator\\Desktop\\Flow\\IMG137.jpg", CV_LOAD_IMAGE_GRAYSCALE );
Mat frame1L = frame1( Range( 0, frame1.rows ), Range( 0, frame1.cols/2 ));
Mat frame1R = frame1( Range( 0, frame1.rows ), Range( frame1.cols/2, frame1.cols ));

resize( frame1L, frame1L, Size(), rescx, rescy );
resize( frame1R, frame1R, Size(), rescx, rescy );

int preFilterSize = 9, preFilterCap = 32, disparityRange = 4;
int minDisparity = 2, textureThreshold = 12, uniquenessRatio = 3;
int windowSize = 21, smoothP1 = 0, smoothP2 = 0, dispMaxDiff = 32;
int speckleRange = 0, speckleWindowSize = 0;

bool dynamicP = false;

StereoSGBM stereo( minDisparity*-16, disparityRange*16, windowSize,
    smoothP1, smoothP2, dispMaxDiff,
    preFilterCap, uniquenessRatio,
    speckleRange*16, speckleWindowSize, dynamicP );

stereo( frame1L, frame1R, disparity );

double m1[3][3] = { { 46, 0, frame1L.cols/2 }, { 0, 46, frame1L.rows/2 }, { 0, 0, 1 } };
double t1[3] = { 65, 0, 0 };
double q[4][4] = {{ 1, 0, 0, -frame1L.cols/2.0 }, { 0, 1, 0, -frame1L.rows/2.0 }, { 0, 0, 0, 46 }, { 0, 0, -1.0/65, 0 }};
Mat cm1( 3, 3, CV_64F, m1), cm2( 3, 3, CV_64F, m1), T( 3, 1, CV_64F, t1 );
Mat R1, R2, P1, P2;
Mat Q( 4, 4, CV_64F, q );

//stereoRectify( cm1, Mat::zeros( 5, 1, CV_64F ), cm2, Mat::zeros( 5, 1, CV_64F ),  frame1L.size(), Mat::eye( 3, 3, CV_64F ), T, R1, R2, P1, P2, Q ); 

normalize( disparity, vdisparity, 0, 256, NORM_MINMAX );
//convertScaleAbs( disparity, disparity, 1/16.0 );
reprojectImageTo3D( disparity, depthMap, Q, true );
imshow( "Disparity", vdisparity );
imshow( "3D", depthMap ); 
```

因此，我从 StereoSGBM 和 Q 矩阵中输入生成的视差图以获得 3D 点，然后将其写入 ply 文件。

但结果是这样的：http: [//i.stack.imgur.com/7eH9V.png](https://i.stack.imgur.com/7eH9V.png)

看起来很有趣，但不是我需要的:(。我在网上读到，在将视差图除以 16 后，它得到了更好的结果，而且确实看起来稍微好一点（实际上看起来好像有一台相机在拍摄！）。

如果您有兴趣，这是我的视差图：http: [//i.stack.imgur.com/lNPkO.png](https://i.stack.imgur.com/lNPkO.png)

我知道如果没有校准，它几乎不会看起来像最好的 3d 投影，但我期待一些……更好的东西。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-13T13:25:58.670

在正平行假设下，视差与 3D 深度的关系为：`d = f*T/Z`，其中`d`为视差，`f`为焦距，`T`为基线，`Z`为 3D 深度。如果将图像中心作为主点，则确定 3D 坐标系。那么对于一个像素`(px,py)`，它的 3D 坐标`(X, Y, Z)`是：

`X = (px-cx)*Z/f, Y = (py- cy)*Z/f, Z = f*T/d`,

其中`cx, cy`是图像中心的像素坐标。

您的视差图像看起来相当不错，它可以生成合理的 3D 点云。

[github](https://github.com/rookiepig/DisparityBrowser.git)上一个简单的视差浏览器。

# asp.net - ASP.NET MVC3：使用下拉列表的问题

> ID：11406850
> 
> 赞同：1
> 
> 时间：2012-07-10T04:56:10.650
> 
> 标签：asp.net, asp.net-mvc, drop-down-menu

我是 ASP.NET MVC 的新手，目前我的公司正在实施 ASP.NET MVC。我正在努力实现下拉列表。这是场景：我必须使用下拉列表、文本框和搜索按钮来获取所有查询。我有一个要在下拉列表中列出的项目列表。当我选择任何项目时，我必须在文本框中手动提供值，并且必须搜索并填充所有必需的信息（如果存在）。

例如：当我单击下拉列表时，它可能会列出员工姓名、员工 ID 等。如果我从下拉列表中选择员工姓名，那么我必须在文本框中提供姓名，例如 Marry Lieu 然后接下来我必须单击搜索按钮。此按钮应检查 Marry Lieu 的信息并显示在屏幕上。

如何在下拉列表、文本框和按钮之间进行映射，以便我可以在下拉列表中选择某些属性、要在文本框中输入的属性值、搜索信息并填充？

任何指导方针对我来说都很重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:08:20.743

我认为你可以使用一些 javascript 来完成这项任务。您可以使用 JQuery 将更改事件附加到选择。在这个例子中（http://api.jquery.com/selected-selector/）附加函数只是获取每个选定选项的文本并将它们写入“div”，但您可以使用其他一些逻辑创建自己的函数，例如我们通过 POST 查询获取信息到 mvc 控制器等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T09:10:47.740

好的，所以我在这里有点厚脸皮，并重用了 Darin Dimitrov 的部分答案：

关键区别是我们根据选定的下拉值有条件地搜索员工，例如 by-id 的 by-name

我只是想说明它如何在基本级别上工作，但我认为在适当的实现中，我不想将字符串文字用于标准列表，而是有一个对象来表示寻找员工的可能标准。

**包含标准属性的**搜索视图****

 **```
public class SearchViewModel
{
    // property used to represent the selected employees search critera field
    [DisplayName("Search by")]
    public string SelectedCriteria { get; set; }

    // property used to hold the list of possible criteria shown in the dropdown
    public IEnumerable<SelectListItem> Criteria { get; set; }

    // property used for the textbox 
    // ie the value to search against the criteria
    [DisplayName("Value")]
    public string CriteriaValue { get; set; }

    // property that will be populated after submitting the form
    // and contain the search results. I am using string for the
    // purpose of the demonstration but could be any arbitrary complex
    // view model depending on what your results contain
    public string SearchResult { get; set; }
} 
```

**家庭控制器**

```
public class HomeController : Controller
{
    public static List<string> CriteriaList
    {
        get 
        {
            return new List<string>() { "Employee Name", "Employee Id" };
        }
    }

    public ActionResult Index()
    {
        var model = new SearchViewModel
        {
            Criteria = CriteriaList.Select(e => new SelectListItem
            {
                Value = e,
                Text = e
            })
        };

        return View(model);
    }

    [HttpPost]
    public ActionResult Index(SearchViewModel model)
    {
        // at this stage we have the Selected Criteria and Criteria Value
        // we find the employee based on this criteria:

        Employee employee = null;

        switch (model.SelectedCriteria)
        {
            case "Employee Name":
                employee = _employeeRepository.GetByName(model.CriteriaValue);
                break;
            case "Employee Id":
                employee = _employeeRepository.GetById(model.CriteriaValue);
                break;
            default:
                break;
        }

        if (employee == null)
            model.SearchResult = "No results found for of your search";
        else
            model.SearchResult = string.Format("The Employee {0} was found",
                                               employee.Name);

        // we repopulate the criteria collection because only the selected
        // criteria was passed when the form was submitted
        model.Criteria = CriteriaList.Select(e => new SelectListItem
        {
            Value = e,
            Text = e
        });

        // we redisplay the view
        return View(model);
    }
} 
```

**~/Home/Index.cshtml**

```
@model SearchViewModel

@using (Html.BeginForm())
{
    <div>
        @Html.LabelFor(x => x.SelectedCriteria)
        @Html.DropDownListFor(
            x => x.SelectedCriteria, 
            Model.Criteria,
            new { id = "employee-criteria" }
        )
    </div>

    <div>
        @Html.LabelFor(x => x.CriteriaValue)
        @Html.EditorFor(x => x.CriteriaValue)
    </div>

    <button type="submit">Search</button>
}

<div id="results">
    @if (Model.SearchResult != null)
    {
        @Html.Partial("_Result", Model.SearchResult)
    }
</div> 
```

**~/Views/Home/_Result.cshtml**作为 Darin 的回答

```
@model string
<div>
    @Html.DisplayForModel()
</div> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-10T06:12:02.520

您可以使用视图模型：

```
public class SearchViewModel
{
    // property used to represent the selected employee id in the dropdown
    [DisplayName("Employee")]
    public string SelectedEmployeeId { get; set; }

    // property used to hold the list of employees shown in the dropdown
    public IEnumerable<SelectListItem> Employees { get; set; }

    // property used for the textbox
    [DisplayName("Name")]
    public string EmployeeName { get; set; }

    // property that will be populated after submitting the form
    // and contain the search results. I am using string for the
    // purpose of the demonstration but could be any arbitrary complex
    // view model depending on what your results contain
    public string SearchResult { get; set; }
} 
```

然后是控制器：

```
public class HomeController: Controller
{
    public ActionResult Index()
    {
        var model = new SearchViewModel
        {
            Employees = db.Employees.ToList().Select(e => new SelectListItem
            {
                Value = e.EmployeeId,
                Text = e.Name
            })
        };

        return View(model);
    }

    [HttpPost]
    public ActionResult Index(SearchViewModel model)
    {
        // at this stage we have the SelectedEmployeeId and SomeValue
        // properties passed => we do the search and set the results:

        model.SearchResult = "this is the result of your search";

        // we repopulate the Employees collection because only the selected
        // employee id was passed when the form was submitted
        model.Employees = db.Employees.ToList().Select(e => new SelectListItem
        {
            Value = e.EmployeeId,
            Text = e.Name
        });

        // we redisplay the view
        return View(model);
    } 
} 
```

接下来我们可以有一个`~/Views/Home/Index.cshtml`视图：

```
@model SearchViewModel
@using (Html.BeginForm())
{
    <div>
        @Html.LabelFor(x => x.SelectedEmployeeId)
        @Html.DropDownListFor(
            x => x.SelectedEmployeeId, 
            Model.Employees, 
            new { id = "employeesDdl" }
        )
    </div>

    <div>
        @Html.LabelFor(x => x.EmployeeName)
        @Html.EditorFor(x => x.EmployeeName)
    </div>

    <button type="submit">Search</button>
}

<div id="results">
    @if (Model.SearchResult != null)
    {
        @Html.Partial("_Result", Model.SearchResult)
    }
</div> 
```

接下来我们定义一个`~/Views/Home/_Result.cshtml`显示搜索结果的部分：

```
@model string
<div>
    @Html.DisplayForModel()
</div> 
```

然后，如果您想在下拉列表选择更改时在文本框中显示选定的员工姓名，您可以使用 jQuery 并订阅`.change()`此下拉列表的事件。因此，在单独的 javascript 中，我们可以输入以下内容：

```
$(function() {
    $('#employeesDdl').change(function() {
        var employeeName = $('option:selected', this).text();
        $('#EmployeeName').val(employeeName);
    });
}); 
```**

# java - android按钮在点击时放大

> ID：11406859
> 
> 赞同：1
> 
> 时间：2012-07-10T04:57:56.683
> 
> 标签：java, android, xml, button, onclick

我有一个程序，我想显示 2 个按钮，它们是指向左右的箭头。两者都是图像，我需要将它们放在我的计算器类型程序中。如果我点击右箭头，我希望涉及计算的字段增加，并且按钮变大。我有 6 张图片：一个小箭头（左右）、一个中号（左右）和一个大（左右）集合。我将如何创建这些按钮？

实验室作业的链接在这里：

[http://penguin.ewu.edu/cscd439/android/Summer_12/cscd439_l2.html](http://penguin.ewu.edu/cscd439/android/Summer_12/cscd439_l2.html)

我只是不明白如何从我下载的图像中创建一个按钮，以及如何在点击时更改图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:25:04.347

我假设您的箭头按钮是一个图像视图，其可绘制设置为小箭头按钮图像（位于您的 res/drawable 文件夹中）所以，您需要做的是将 onClickListener 注册到您的 imageView（箭头按钮） . 然后，在 onClick 函数中，执行所有必要的操作，例如将 imageView 的图像设置为新的大箭头并更新框中的文本。这应该很简单。

这是一个例子。我只是在脑海中写下这个，所以不要期望它完美地工作，但它应该让你知道该怎么做。

```
ImageView rightArrow = findViewById(R.id.yourArrowImageViewID);
rightArrow.setOnClickListener( new View.onClickListener(){

    @Override
    public void onClick(view v){
        v.setImageResource(R.drawable.largerArrow);
        YourTextView.setText(<larger tip percent>);
    }//end onClick
  }//end new View.onClickListener
);//end setOnClickListener 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T05:36:47.833

您可以在 android xml 文件中将 smallbutton 设置为图像按钮，然后在 onclick 之后，您可以通过以下代码将 smallbutton 替换为 largebutton。

```
 button = (ImageButton)findViewById(R.id.buttonsmall);

 bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.largebutton);

 button.setOnClickListener(new View.OnClickListener() {
     @Override
     public void onClick(View view) {
           button.setImageBitmap(bitmap);
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T05:46:11.837

如果您想增加按钮图像大小并在单击按钮时编辑文本字段大小，那么只需将较小的图像替换为您想要的更大尺寸的图像，就像这样

```
button1.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                 button1.setBackgroundResource(R.drawable.buttonimg);

                    edittext1.setBackgroundResource(R.drawable.edimg);
            }
        }); 
```

这里

buttonimg 和 edimg 是可绘制文件夹中的图像

# java - 池塘嵌套循环中的简单 java 鱼

> ID：11406861
> 
> 赞同：0
> 
> 时间：2012-07-10T04:58:00.580
> 
> 标签：java, if-statement, for-loop, nested-loops

下面的一段代码给了我很长的一条鱼：

```
<#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< (....up to 43 fish )

{
 for (int i=0; i<10; i++)
 { 

 for (int j=0; j<10; j++)
 { 
    if ( (i*10+j) < 43) 
    {
    System.out.print(" <#><");
    }

    else{
    System.out.print("     ");

   } 
```

我试图弄清楚如何将鱼限制在 10 x 10 的范围内，所以它看起来更像这样：

```
<#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#><
<#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#><
<#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#><
<#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#><
<#>< <#>< <#>< <#>< 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T05:01:06.203

```
for (int i=0; i<43; i++)
{ 
    if (i > 0 && i%10 == 0) 
        System.out.println();
    System.out.print(" <#><");
} 
```

`i % 10`是模运算。它除以`i`并`10`返回除法的其余部分。示例： if `i`is `17`then 结果将是`7`因为`17 / 10 = 1`with rest `7`。剩下的只有在 is 时`0`才会发生。`i``0,10,20,30,40`

并且是一项额外的检查，以防止在静止时`i > 0`从循环开始打印额外的行`i``0``0 / 10 = rest 0`

（`&&`如果**所有**条件都必须是`true`，
您可以将多个条件放在一起。`||`如果**其中一个**必须是，您可以将多个条件放在一起`true`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T05:01:49.187

`System.out.println();`在外循环的末尾添加一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T05:08:20.287

您缺少的是 System.out.println 。println 是指打印行。打印后光标移动到下一行。

```
 for (int i=0; i<10; i++) { 
      for (int j=0; j<10; j++) { 
          if ( (i*10+j) < 43)  {
             System.out.print(" <#><");
          }
          else {
             System.out.println("     ");
          }
      }
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T05:14:16.503

试试这个....

```
public class hi {

    public static void main(String[] args){
        int i=0;
        while (i<43){

              for (int j=0 ; j<10 ; j++){

               System.out.print(" <#><");

               }
              System.out.println();
              i++;
             }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-10T07:17:42.200

在同一代码中，以下修改将产生预期的输出。

```
for (int i=0; i<10; i++)
{ 
 for (int j=0; j<10; j++)
 { 
    if ( (i*10+j) < 43) 
    {
       System.out.print(" <#><");
    }

    else
    {
       System.exit(0);//if fishes exceeds 47 Exit
    }
 }
 System.out.println();//for new line after 10 fishes
} 
```

# java - 我现在正在使用 SAX 进行解析

> ID：11406862
> 
> 赞同：0
> 
> 时间：2012-07-10T04:58:11.747
> 
> 标签：java, parsing, sax

我正在尝试使用 SAX 解析 XML 文档。XML 文档如下所示：

```
<users>
    <row Id="-1" DisplayName="Apple">
    <row Id="1" DisplayName="Banana">
    <row Id="2" DisplayName="Orange">
</users> 
```

这是我的解析器类的摘录，它负责解析`row`元素：

```
class SAXParser extends DefaultHandler {

    static int i = 0;
    ArrayList<ArrayList<String>> ar = new ArrayList<ArrayList<String>>();
    ArrayList<String> id = new ArrayList<String>();

    public void startElement(String uri, String localName,
                             String qName, Attributes atts) {

        if (qName.equals("row")) {
                    int idx = 0;
                    id.add(idx, atts.getValue(0));
                    idx++;
                    id.add(idx, atts.getValue(3));
                    ar.add(i, id);
                    i++;
                    //idx = 0;
        }
    }

} 
```

如果我运行程序，我会在属性中得到以下结果`ar`，这不是我想要的：

```
[2,Orange,1,Banana,-1,Apple], [2,Orange,1,Banana,-1,Apple],
[2,Orange,1,Banana,-1,Apple], [2,Orange,1,Banana,-1,Apple] 
```

我想要的是在属性中有`Id`,`DisplayName`对，如下所示：`ar`

```
[-1, Apple], [1, Banana], [2, Orange] 
```

我做错什么了？我怎样才能达到预期的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:33:08.910

问题是您`id`只实例化列表一次，因此该列表将包含所有行的所有元素（标识符和显示名称）。

`ArrayList`您必须为每一对创建一个新的：

```
class SAXParser extends DefaultHandler 
{
    static int i = 0;
    ArrayList<ArrayList<String>> ar = new ArrayList<ArrayList<String>>();
    // ***** Instead of creating the list here *****
    // ArrayList<String> id = new ArrayList<String>();

    public void startElement(String uri, String localName, String qName, Attributes atts) {
        if (qName.equals("row")) {
            // ***** Move that line here: *****
            ArrayList<String> id = new ArrayList<String>();

            int idx = 0;
            id.add(idx, atts.getValue(0));
            idx++;
            id.add(idx, atts.getValue(3));
            ar.add(i, id);
            i++;
            //idx = 0;
        }
    }
} 
```

请注意，如果您按顺序将项目添加到列表中，则不必为每个添加指定索引，元素将按照添加的顺序放置。所以你的代码可以进一步简化：

```
public void startElement(String uri, String localName, String qName, Attributes atts) {
    if (qName.equals("row")) {
        ArrayList<String> id = new ArrayList<String>();
        id.add(atts.getValue(0));
        id.add(atts.getValue(3));
        ar.add(id);
    }
} 
```

# html - 任何可以解析 HTML 文件的类似服务的保管箱？

> ID：11406864
> 
> 赞同：1
> 
> 时间：2012-07-10T04:58:48.880
> 
> 标签：html, dropbox, ubuntu-12.04

我编写了一个 bash 脚本，将我的计算机当前的动态 IP 地址写入一个文件，我已设置为使用 ubuntu 上的 Dropbox 客户端同步到我的 Dropbox 帐户。我正在同步的文件是一个 HTML 文件，在解析时会显示一些静态文本和指向我计算机 IP 地址的链接。

Dropbox 允许创建指向该文件的静态链接并将其分发给任何人。但问题是，当我从任何地方打开该链接时，它首先显示下载此文件的链接，在重新加载页面时，它显示为带有所有这些 html 标记的文件文本......

我想将该保管箱文件解析为 html，以便打开该文件将显示一个网页，其中包含指向我当前 IP 地址的链接。

可以用 Dropbox 做到这一点吗？那怎么办？还有其他允许它的服务吗？如果是，那么他们是否为 ubuntu 提供客户端或需要为此编写一些代码..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T22:44:53.480

推断真正的问题是什么 - 您可能会查看动态 dns 服务。

[http://dnslookup.me/dynamic-dns/](http://dnslookup.me/dynamic-dns/)

如果您有自己的域，则可以对域中的主机进行 CNAME，例如对 ddns 服务的晦涩主机名“yourusername.ddns.example.com”说“home.example.com”。然后设置您的 bash 脚本以使 ddns 服务保持最新。

无需使用 html 文件，只需在链接中引用 home.example.com，它们将（几乎）总是指向正确的 IP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:56:18.490

您可以直接压缩 HTML 文件夹并将其放到[http://qwkbit.com/preview](http://qwkbit.com/preview)上，而不是保管箱，这样更快而且免费。

# jquery - jQuery Cycle One 寻呼机

> ID：11406878
> 
> 赞同：1
> 
> 时间：2012-07-10T05:00:22.797
> 
> 标签：jquery, slider, cycle

我在一页上有两个 jQuery 幻灯片 - 比如：

```
jQuery('#one').cycle({
    fit: 1,
    fx: 'custom',
    speed: 700,
    slideExpr: '.slider-one'
});

jQuery('#two').cycle({
    slideExpr: '.slider-two',
    animOut: { opacity: 0 },
    animIn: { opacity: 1 },
    fx: 'custom'
}); 
```

问题是我只想为这两个使用一个寻呼机。我尝试向每个类添加一个喜欢`.slider-nav`并使用：

```
$('.slider-nav').each(function() {
    $(this).cycle({
        prev: '.slider-prev',
        next: '.slider-next',
        timeout: 0
    });
}); 
```

但是，当我单击`prev`或时，似乎只更改了第一个滑块而不是第二个滑块`next`。我怎样才能控制两者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:16:35.553

[演示](http://jsfiddle.net/ankur20us/m9Mgy/10/)

查看演示，我使用了一个**prev**和**next**按钮使其工作

这是你想要的吗？

# windows-phone-7 - 从 json 文件中检索字典值

> ID：11406881
> 
> 赞同：0
> 
> 时间：2012-07-10T05:00:36.607
> 
> 标签：windows-phone-7

我正在尝试解析从文件流中获取的 json 文件。以下是我的 json 数据

```
{
   "appname":"sine",
    "taborder":  [
            "some",
            "thing",
            "is",
            "went",
            "wrong"  ]
} 
```

我将数据存储在字符串中并尝试反序列化数据。我正在尝试通过以下方式在警报框中显示键

```
 string jsonString = contents;//"{'Name':'Bill', 'Ag:53}";
 you deserializedUser = ReadToObject(jsonString);

 var str = deserializedUser.mainDict.Keys.ToArray();
 MessageBox.Show(str.ToString()); 
```

但是我将键值设为“null”，如何正确获取键值，请帮助我.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:11:54.877

我做了这个希望这有帮助

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
        {
    JavaScriptRequest obj= DeserializeJavaScriptRequest(typeof(JavaScriptRequest), Resource1.test) as JavaScriptRequest;
    MessageBox.Show(obj.appname +" | " + obj.taborder[0]);
}

public object DeserializeJavaScriptRequest(Type typedeserialize, string eValue)
        {

            Type t = typedeserialize;
        // Get constructor info.
        ConstructorInfo[] ci = t.GetConstructors();           
        object reflectOb = ci[0].Invoke(null);
        MemoryStream confirm_ms = new MemoryStream(Encoding.UTF8.GetBytes(eValue));
        DataContractJsonSerializer confirm_ser = new DataContractJsonSerializer(typedeserialize);
        reflectOb = confirm_ser.ReadObject(confirm_ms);
        confirm_ms.Close();

        return reflectOb;
    } 
```

我做了一堂课

```
 public class JavaScriptRequest
    {
        public string appname { get; set; }
        public string[] taborder { get; set; }
    } 
```

# c# - 如何检查电子邮件是否使用 C# MailMessage 发送

> ID：11406889
> 
> 赞同：2
> 
> 时间：2012-07-10T05:01:07.680
> 
> 标签：c#, asp.net, webforms, asp.net-mail

我正在使用下面的代码发送电子邮件，它在大多数情况下都可以正常工作，并且在测试期间我们发现有时它不会发送电子邮件。我如何更改此代码以检查电子邮件传递状态或字体任何其他故障。

```
 public static void SendEmail(string to, string subject, string message, bool isHtml)
        {
            try
            {
            var mail = new MailMessage();

            // Set the to and from addresses.
            // The from address must be your GMail account
            mail.From = new MailAddress("noreplyXYZ@gmail.com");
            mail.To.Add(new MailAddress(to));

            // Define the message
            mail.Subject = subject;
            mail.IsBodyHtml = isHtml;
            mail.Body = message;

            // Create a new Smpt Client using Google's servers
            var mailclient = new SmtpClient();
            mailclient.Host = "smtp.gmail.com";//ForGmail
            mailclient.Port = 587; //ForGmail

            // This is the critical part, you must enable SSL
            mailclient.EnableSsl = true;//ForGmail
            //mailclient.EnableSsl = false;
            mailclient.UseDefaultCredentials = true;

            // Specify your authentication details
            mailclient.Credentials = new System.Net.NetworkCredential("noreplyXYZ@gmail.com", "xxxx123");//ForGmail
            mailclient.Send(mail);
            mailclient.Dispose();
    }
                    catch (Exception ex)
                    {
    throw ex;
                        }
    } 
```

我知道 SMTP 负责发送电子邮件并且无法发送状态，但这是他们检查电子邮件发送状态的一种方法

**更新的代码**（这是正确的）

```
public static void SendEmail(string to, string subject, string message, bool isHtml)
{
    var mail = new MailMessage();

    // Set the to and from addresses.
    // The from address must be your GMail account
    mail.From = new MailAddress("noreplyXYZ@gmail.com");
    mail.To.Add(new MailAddress(to));

    // Define the message
    mail.Subject = subject;
    mail.IsBodyHtml = isHtml;
    mail.Body = message;

    // Create a new Smpt Client using Google's servers
    var mailclient = new SmtpClient();
    mailclient.Host = "smtp.gmail.com";//ForGmail
    mailclient.Port = 587; //ForGmail

    mailclient.EnableSsl = true;//ForGmail
    //mailclient.EnableSsl = false;
    mailclient.UseDefaultCredentials = true;

    // Specify your authentication details
    mailclient.Credentials = new System.Net.NetworkCredential("noreplyXYZ@gmail.com", "xxxx123");//ForGmail
    mailclient.Send(mail);
    mailclient.Dispose();
    try
    {
        mailclient.Send(mail);
        mailclient.Dispose();
    }
    catch (SmtpFailedRecipientsException ex)
    {
        for (int i = 0; i < ex.InnerExceptions.Length; i++)
        {
            SmtpStatusCode status = ex.InnerExceptions[i].StatusCode;
            if (status == SmtpStatusCode.MailboxBusy ||status == SmtpStatusCode.MailboxUnavailable)
            {
                // Console.WriteLine("Delivery failed - retrying in 5 seconds.");
                System.Threading.Thread.Sleep(5000);
                mailclient.Send(mail);
            }
            else
            {
                //  Console.WriteLine("Failed to deliver message to {0}", ex.InnerExceptions[i].FailedRecipient);
                throw ex;
            }
        }
    }
    catch (Exception ex)
    {
        //  Console.WriteLine("Exception caught in RetryIfBusy(): {0}",ex.ToString());
        throw ex;
    }
    finally
    {
        mailclient.Dispose();
    }

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-10T05:07:06.600

好吧，您将整个代码体包装在一个`try`带有空`catch`块的块中。因此，如果消息由于某种原因未能发送，您将**不知道**，因为您的函数将简单地返回。

如果您查看 MSDN 文档，[`SmtpClient.Send`](http://msdn.microsoft.com/en-us/library/swas0fwc.aspx)您会发现由于各种原因，它可能会抛出许多不同的异常。几个有趣的：

*   [`SmtpException`](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpexception.aspx)
*   [`SmtpFailedRecipientsException`](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpfailedrecipientsexception.aspx)

* * *

更新后的几点说明：

您可能不是要这样做：

```
mailclient.Send(mail);
mailclient.Dispose();
try
{
    mailclient.Send(mail);
    mailclient.Dispose();
} 
```

`mailclient`在尝试再次使用它之前，您正在处理它。

## `using`

`MailMessage`并且`SmtpClient`都实现[`IDisposable`](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)，因此将它们放在一个[`using`](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)块中是最佳实践（也是最简单的）：

```
using (var mail = new MailMessage())
using (var mailclient = new SmtpClient())
{
    // ...
} 
```

然后你就不必担心调用`Dispose()`你的`finally`块（那时你可能根本不需要它们）。

## `throw`

您可能知道，但没有意义：

```
catch (Exception ex)
{
    throw ex; 
} 
```

## `foreach`

```
for (int i = 0; i < ex.InnerExceptions.Length; i++)
{
    SmtpStatusCode status = ex.InnerExceptions[i].StatusCode;
    // ... 
} 
```

可以重写为：

```
foreach (var innerEx in ex.InnerExceptions)
{
    var status = innerEx.StatusCode;
} 
```

## `Thread.Sleep()`

如果此代码是面向用户的，您可能真的不想这样做，因为它会导致页面挂起 5 秒等待发送。在我看来，无论如何，您都不应该直接在网页代码中处理发送邮件，您应该将其排队等待后台任务发送。但这是一个完全不同的问题。

只需几件事即可帮助您成为更好的 C# 编码器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T05:35:32.707

> 听起来你在问是否有办法实时检查你的用户是否收到了消息。如果是这样，我建议你不要走这条路。虽然大多数时候电子邮件传递似乎是即时的，但在传递到收件人邮箱之前，它可能会延迟任意时间。

我建议您通过以下 asp.net 论坛链接：
[SMTP 服务器和电子邮件常见问题解答](http://forums.asp.net/p/1189023/2038523.aspx)
[发送电子邮件时发送通知不起作用](http://forums.asp.net/t/1111538.aspx)
[实施检查电子邮件是否发送的最佳实践](https://stackoverflow.com/a/3300366/770710)

**注意：** [没有可靠的方法来确定消息是否确实已送达。](https://stackoverflow.com/a/4973775/770710)

您已经询问过另一个 SO 线程：
[如何检查 MailMessage 是否在 .NET 中传递？](https://stackoverflow.com/questions/4973725/how-to-check-mailmessage-was-delivered-in-net)
[ASP.NET MVC 如何确定电子邮件是否没有到达收件人](https://stackoverflow.com/questions/3300307/asp-net-mvc-how-to-determine-if-the-e-mail-didnt-reach-the-receiver)

# php - 如何匹配多个数组？

> ID：11406891
> 
> 赞同：1
> 
> 时间：2012-07-10T05:01:44.587
> 
> 标签：php

我有多个嵌套数组：

```
array(
    [0]=>array('ID'=>123 ,'VALUE'=>value)
    [1]=>array('ID'=>124 ,'VALUE'=>value)
    )

array(
    [0]=>array('ID'=>123 ,'NAME'=>value)
    [1]=>array('ID'=>124 ,'NAME'=>value)
    [2]=>array('ID'=>125 ,'NAME'=>value)
    ) 
```

我必须找到匹配项，例如：

`if(ID=123)`我应该得到 ID、值和名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:06:20.110

在这种情况下，您会想要使用 PHP 内置的[多维数组功能](http://php.net/manual/en/language.types.array.php)：

```
$outputArray = array(); // Create an output array.

foreach ($array as $innerArray) // Assuming $array is an example of one of your arrays above.
// Iterate through each inner array in list and load it temporarily into $innerArray.
{
    if ($innerArray['ID'] == 123) // Your condition, checking for the value of key 'ID'.
    {
        $outputArray['ID'] = $innerArray['ID']; // The temporary inner array is loaded to the $outputArray variable.
        foreach ($innerArray as $name => $value) // Iterate through inner array.
        {
            if ($name !== 'ID') // If the key of the inner array is not 'ID' then handle this key => value pair.
            {
                $outputArray['Name'] = $name;
                $outputArray['Value'] = $value;
            }
        }
        break; // Break the loop if you know that there can be only 1 array with 'ID' => 123
    }
}

print_r($outputArray); // You can now access that particular array you wanted. 
```

如果您有多个数组实例，就像您的示例一样，您可能希望将所有这些数组加载到另一个主数组中，并编写另一个循环来环绕这个数组。

我编写的代码块处理您的数组示例的一个特定实例。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T05:12:54.600

[http://ideone.com/hiCRZ](http://ideone.com/hiCRZ)

```
$a = array(
    array('ID'=>123 ,'VALUE'=>'123 value'),
    array('ID'=>222 ,'VALUE'=>'222 value')
);

$b = array(
    array('ID'=>123 ,'NAME'=>'123 name'),
    array('ID'=>124 ,'NAME'=>'124 name'),
    array('ID'=>125 ,'NAME'=>'125 name')
);

$c = array();

foreach( $a as $row ){
  $c[ $row['ID'] ]['ID'] = $row['ID']; // stupid way to ensure target array :)
  $c[ $row['ID'] ] += $row;
}

foreach( $b as $row ){
  $c[ $row['ID'] ]['ID'] = $row['ID'];
  $c[ $row['ID'] ] += $row;
}

var_dump( $c ); 
```

结果：

```
array(4) {
  [123]=>
  array(3) {
    ["ID"]=>
    int(123)
    ["VALUE"]=>
    string(9) "123 value"
    ["NAME"]=>
    string(8) "123 name"
  }
  [222]=>
  array(2) {
    ["ID"]=>
    int(222)
    ["VALUE"]=>
    string(9) "222 value"
  }
  [124]=>
  array(2) {
    ["ID"]=>
    int(124)
    ["NAME"]=>
    string(8) "124 name"
  }
  [125]=>
  array(2) {
    ["ID"]=>
    int(125)
    ["NAME"]=>
    string(8) "125 name"
  }
} 
```

如果要查找 1 个 id 的数据：

```
$id = 123;
$result_row = array();

foreach( $a as $row ) if( $row['ID'] == $id ) {
  $result_row += $row;
}

foreach( $b as $row ) if( $row['ID'] == $id ){
  $result_row += $row;
}

var_dump( $result_row ); 
```

结果：

```
array(3) {
  ["ID"]=>
  int(123)
  ["VALUE"]=>
  string(9) "123 value"
  ["NAME"]=>
  string(8) "123 name"
} 
```

# android - 安卓设备的调试软件？

> ID：11406893
> 
> 赞同：2
> 
> 时间：2012-07-10T05:01:45.667
> 
> 标签：android

我无法使用 Eclipse 调试我的索尼爱立信 xperia x10，因为它无法识别设备驱动程序。我下载了一些驱动程序，但操作系统无法识别设备。我的操作系统是带有 service pack 3 的 windows XP。是否有任何可以安装到设备中并调试其他应用程序的 android 调试应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:11:27.863

adb 守护程序及其创建的进程作为比您可以安装的任何应用程序具有更高特权的用户标识运行。这允许在没有用户确认的情况下安装或删除包，以可调试应用程序包的用户 ID 运行东西等。

但是，出于许多目的，有一些解决方法：

*   您可以通过将应用程序通过电子邮件发送给自己或从私人网络服务器提供应用程序（使用适当的 mime 类型）或通过设备上运行的文件服务器将它们推送到外部存储，然后手动或使用 Intent 打开它们来安装应用程序。这些方法中的任何一种都需要交互式用户确认。

*   如果应用程序拥有相关的清单权限，您可以通过 ICS 从应用程序中读取 logcat 日志 - 例如，您可以设置具有该权限的 ssh 服务器并连接到设备以读取日志。显然，这在 Jellybean 中将不再有效

*   如果您可以通过某种方式（即使用应用程序而不是通过 adb）来 root 设备（即使用应用程序而不是通过 adb），则可以通过 tcp（即 wifi）设置永久 adb - 无需 root 的方法需要首先使 USB 连接正常工作，然后更改模式并拔掉插头。

您可能无法进行交互式调试，因此您需要使用日志消息等来跟踪内部状态；大多数时候这已经足够了。

* * *

但是，放弃使 USB adb 连接正常工作可能还为时过早。一个明显的答案是设置一个 linux 分区、虚拟机或备用机器。或者继续寻找windows驱动；它可能就在那里，并且很可能在某个地方的论坛上知道它。

此外，由于您正在运行 XP，您可能还没有纠结于是否需要签名驱动程序，因此可以将手机的 VID 十六进制编辑到原始 Android 开发人员手机的驱动程序（或其配置文件？）中.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T07:07:53.180

索尼爱立信 X10 驱动程序下载页面是：

*   [http://developer.sonymobile.com/wportal/devworld/downloads/download/dw-x10drivers](http://developer.sonymobile.com/wportal/devworld/downloads/download/dw-x10drivers)

xda-developers.com 上的一个帖子表明，这些 ADB 驱动程序可能无法在 Xperia X10 上开箱即用 - 您可能必须“修补”.inf 文件。来自[http://forum.xda-developers.com/showpost.php?p=25346573&postcount=6](http://forum.xda-developers.com/showpost.php?p=25346573&postcount=6)：

> 无法识别我的 XPeria X10 mini（MiniCM 和 nAa 内核）。
> 
> 我不得不将以下行添加到 sa0101usb.inf
> 
> ```
> %CompositeAdbInterface% = USB_Install, USB\VID_0FCE&PID_612E&MI_01 
> ```

您可能需要做类似的事情。

# facebook-graph-api - 使用 api 在 facebook 上发布所需的消息

> ID：11406898
> 
> 赞同：-1
> 
> 时间：2012-07-10T05:02:33.323
> 
> 标签：facebook-graph-api, restfb

我正在尝试通过 api 在 facebook 墙上发布消息。问题是当我通过 api 发布时，当我直接将链接粘贴为 facebook 状态时，它看起来会有所不同。我不确定我是否做错了什么。请指教。

我想作为示例发布的链接是[http://commondatastorage.googleapis.com/blood/2415012_26-May-2012](http://commondatastorage.googleapis.com/blood/2415012_26-May-2012)

我正在使用的代码类似于：

```
FacebookType publishMessageResponse =                             facebookClient.publish("me/feed", FacebookType.class,
Parameter.with("name", "Click here to Register as a Blood Donor"),
Parameter.with("picture", "http://commondatastorage.googleapis.com/blood/2415012_26-May-2012"),
Parameter.with("link", "http://links.sakshum.org/RegisterBloodDonor"),
Parameter.with("description", "Sakshum is a not for profit organization working in the field of child education and building an effective blood donor pool.")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:12:55.217

因为当您直接粘贴时，Facebook 会尝试推断元 OG 标签。

有关更多信息，请参阅调试器[http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fcommondatastorage.googleapis.com%2Fblood%2F2415012_26-May-2012](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fcommondatastorage.googleapis.com%2Fblood%2F2415012_26-May-2012)

> 推断属性：应显式提供“og:url”属性，即使可以从其他标签推断出值。
> 
> 推断属性：应显式提供“og:title”属性，即使可以从其他标签推断出值。
> 
> 推断属性：应显式提供“og:description”属性，即使可以从其他标签推断出值。... ETC

在 url 部分设置您的元标记，`<head>`您不必设置它。

在你的`<head>`

```
<meta property="og:url" content="http://commondatastorage.googleapis.com/blood/2415012_26-May-2012">
<meta property="og:title" content="Click here to Register as a Blood Donor">
<meta property="og:description" content="Sakshum is a not for profit organization working in the field of child education and building an effective blood donor pool.">
<meta property="og:image" content="http://YOURURL.COM/LINKTOIMG.jpg"> 
```

有关更多信息，`feed`请参阅[http://developers.facebook.com/docs/reference/api/user/#posts](http://developers.facebook.com/docs/reference/api/user/#posts)

# php - 如何在php聊天系统中管理多个用户？

> ID：11406902
> 
> 赞同：-4
> 
> 时间：2012-07-10T05:03:05.713
> 
> 标签：php, ajax

如何在基于 php-ajax 的聊天系统中管理多个用户？例如，我必须在服务器和 10 人从任何地方。我想管理这 10 人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T05:10:59.340

这是一个非常笼统的问题，但我很久以前就构建了其中一个，也许我记得的一些内容可以提供帮助：

*   您显然需要每个人的主键参考。
*   然后，我想我为每个当前对话（我不记得的每个人或对话）都有一个日志文件。
*   我有一个客户端 Javascript 超时循环请求对日志文件进行任何更改。如果有更改，它们将返回给该客户。
*   当聊天结束/窗口关闭时，日志被删除或下载或其他。
*   可能应该以某种方式限制系统以软化 DDOS 攻击

* * *

*编辑 - 第二点解释*

对话数据必须存储在某个地方。由于您无法通过浏览器访问用户的文件系统，因此您必须将所有内容存储在服务器上。选项位于文件或数据库中。然后，您必须将存储的数据与正确的对话对齐。

假设您选择“文件”，您可以为一个用户 => 多个对话或多个用户 => 一个对话组织它们（或一个大文件，我想，虽然那会很丑陋）。

# asp.net-membership - 在另一个站点中实施 Umbraco 会员提供程序

> ID：11406903
> 
> 赞同：4
> 
> 时间：2012-07-10T05:03:24.090
> 
> 标签：asp.net-membership, umbraco

我目前有一个带有会员设置的 Umbraco 4.7.1 网站，效果很好。

现在我想在另一个非 umbraco 站点中使用 umbraco 会员提供程序。我有一个客户拥有一些 .net 和经典的 asp 站点，他们想要一个单一的会员信息来源。

我还没有找到任何成功的实现或有效的例子..

有没有人可以分享，让这个工作？？？

我接近了，但是当我点击 asp.net 登录控件上的“登录”按钮时，我遇到了 stackoverflow 错误。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T06:08:50.780

这是我工作的 web.config 的片段

```
<connectionStrings>
<remove name="MySqlConnection" />
<add name="MySqlConnection" connectionString="server=localhost;database=MSSM;user id=db_user;password=password" providerName="System.Data.SqlClient"/> 
```

```
<membership defaultProvider="UmbracoMembershipProvider" userIsOnlineTimeWindow="15">
  <providers>
    <clear />
    <add name="UmbracoMembershipProvider"
         type="umbraco.providers.members.UmbracoMembershipProvider"
         enablePasswordRetrieval="false" 
         enablePasswordReset="false" 
         requiresQuestionAndAnswer="false" 
         defaultMemberTypeAlias="Another Type" 
         passwordFormat="Hashed" />
    <add name="UsersMembershipProvider" 
         type="umbraco.providers.UsersMembershipProvider" 
         enablePasswordRetrieval="false" 
         enablePasswordReset="false" 
         requiresQuestionAndAnswer="false" 
         passwordFormat="Hashed" />
  </providers>
</membership>
<roleManager enabled="true" defaultProvider="UmbracoRoleProvider">
  <providers>
    <clear />
    <add name="UmbracoRoleProvider" type="umbraco.providers.members.UmbracoRoleProvider" />
  </providers>
</roleManager>

<roleManager enabled="true" defaultProvider="UmbracoRoleProvider">
  <providers>
    <clear />
    <add name="UmbracoRoleProvider" type="umbraco.providers.members.UmbracoRoleProvider" />
  </providers>
</roleManager>

<appSettings>
<add key="umbracoDbDSN" value="server=localhost;database=MSSM;user id=db_user;password=password" /> 
```

下一个难题是将 umbracoSettings.config 文件从我的工作 umbraco 站点复制到我的 .net 站点下的“config”目录中。

```
/config/umbracoSettings.config 
```

现在它工作得很好..我的头会从所有的头部撞击中痊愈以使其正常工作..我希望这对某人有所帮助..

# android - 使用 HTML 的 android UI 设计

> ID：11406905
> 
> 赞同：0
> 
> 时间：2012-07-10T05:03:33.893
> 
> 标签：android

我在 webView 中使用 HTML 为 android 应用程序设计 UI。但我无法获得如何导航到“锚标记”中的另一个页面
我提供的链接以导航到在“assets/www”文件夹中创建的另一个 HTML 页面。

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:16:00.087

试试这个代码：

```
WebView view=(WebView) findViewById(R.id.w);
    String link = "<a href=\"www.google.com\">www.google.com</a><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><a name=\"link\"></a>Testing!";
    view.loadDataWithBaseURL("", link, "text/html", "UTF-8", ""); 
```

不要忘记在清单文件中添加**互联网权限。**

# python - 在 Django 查询集顶部返回完全匹配

> ID：11406906
> 
> 赞同：9
> 
> 时间：2012-07-10T05:03:40.150
> 
> 标签：python, django, django-queryset

我有一个名为“用户”的 django 模型，它存储了一些关于人的基本信息，即名字和姓氏。我目前在我的 django 模型中进行了简单的搜索，如果用户输入**名字**，django 查询集将返回前 10 个匹配项，按**姓氏**排序。

例如，目前，如果您搜索“Sam”，您可能会得到以下结果：

1.  山姆·雅培
2.  塞缪尔·贝克
3.  萨米·罗杰斯
4.  山姆·西蒙斯

代码很简单：

```
User.objects.filter(Q(first__istartswith=token)).order_by('last') 
```

但是，我想对此进行更改，以便首先返回任何**完全**匹配的名字，然后是其余结果。因此，如果有人输入“Sam”，结果应该是：

1.  山姆·雅培
2.  山姆·西蒙斯
3.  塞缪尔·贝克
4.  萨米·罗杰斯

（确切的名字首先匹配，按姓氏排序，然后是其余的匹配，按姓氏排序）。

我想把它变成 2 个查询集，然后只组合列表，但我想知道是否可以在 1 个查询中做到这一点，最好坚持使用基本的 django 查询集 API（而不是编写一次性查询）。有谁知道这样做的方法？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T17:52:00.620

我认为仅使用一个查询（至少使用 Django ORM）是不可能做到这一点的。

因此，您的 2 个查询应如下所示：

```
limit = 10
q1 = User.objects.filter(first__iexact=token).order_by('last')[:limit]
limit -= len(q1)
if limit:
    q2 = User.objects.exclude(pk__in=q1).filter(first__istartswith=token).order_by('last')[:limit]
else:
    q2 = []
users = list(q1) + list(q2) 
```

另一种方法是在 python 中过滤查询，但您必须获得所有结果，而不仅仅是最后 10 个：

```
query = User.objects.filter(first__istartswith=token).order_by('last')
exacts = [user for user in query if user.first == token]
others = [user for user in query if user.first != token]
users = exacts + others 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T18:02:18.740

```
# Get exact matches first
qs1 = User.objects.filter(first__iexact=token).order_by('last')

# get secondary results second
qs2 = User.objects.filter(first__istartswith=token).exclude(qs1).order_by('last')

result = itertools.chain(qs1, qs2) 
```

还请看一下这个问题，它比您可能需要的更深入：[如何在 Django 视图中组合 2 个或更多查询集？](https://stackoverflow.com/questions/431628/how-to-combine-2-or-more-querysets-in-a-django-view)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T19:25:11.743

这不是很漂亮，我个人建议使用搜索引擎，例如[django-haystack](http://haystacksearch.org/)，但是，如果您知道您使用的是什么数据库，您可以使用[QuerySet.extra](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.extra)添加一个字段来对记录进行排序：

```
extra = {'is_exact': "%s.first LIKE '%s'" % (User._meta.db_table, token)}
User.objects.filter(Q(first__istartswith=token)).extra(select=extra).order_by('-is_exact', 'last') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T05:56:04.017

我认为您实际上可能需要全文搜索来完成此操作。查看[djang-sphinx](https://github.com/dcramer/django-sphinx/)。

如果您的示例与您的完整用例一样复杂，您可以只处理用户代码中的排序和排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T05:23:49.010

您可以按多个属性排序。

```
User.objects.filter(Q(first__istartswith=token)).order_by('first', 'last') 
```

因此，您首先订购，`first`以便您的对象根据完全匹配和后续匹配获得过滤器。然后您再次订购`last`以根据姓氏排序。

# php - otf 到 gdf 用于 php

> ID：11406912
> 
> 赞同：1
> 
> 时间：2012-07-10T05:04:14.213
> 
> 标签：php, fonts, gd, truetype

嗨，我正在尝试使用**imagestring**函数。（我不能使用 imagettftext 函数）。问题是我想使用我自己的不是 gdf ​​格式的字体。所以我需要将我的字体（otf 或 ttf 格式）转换为 .gdf 字体格式。现在有人如何做到这一点？或者至少我可以将每个字符导出到单独的图像文件？

# ios - CGImageCreate 提供完全黑色或无图像或崩溃

> ID：11406914
> 
> 赞同：0
> 
> 时间：2012-07-10T05:04:39.430
> 
> 标签：ios, cgimageref, cgbitmapcontextcreate

一段时间以来，我一直在尝试执行以下操作，

*   玩家点击屏幕
*   获取玩家点击的像素值
*   循环遍历图像以找出哪些像素是相同的
*   具有相同值的像素具有 0 的 alpha 创建一个新图像和
*   将 UIImage 设置为新创建的
*   ...
*   利润

但它似乎就像标题所说的那样，完全黑屏，或者没有任何图像......可能会将所有 alpha 设置为 0，或者它会在此函数 CGSConvertBGRX8888toRGBA8888 附近的堆栈上因错误访问而崩溃

这是功能

```
+ (UIImage*)getRGBAsFromImage:(UIImage*)image atX:(int)xx andY:(int)yy 
```

{

```
// First get the image into your data buffer

CGImageRef imageRef = [image CGImage];

NSUInteger width = CGImageGetWidth(imageRef);
NSUInteger height = CGImageGetHeight(imageRef);
NSUInteger bitsPerComponent = CGImageGetBitsPerComponent(imageRef);
NSUInteger bitsPerPixel = CGImageGetBitsPerPixel(imageRef);
NSUInteger bytesPerRow = CGImageGetBytesPerRow(imageRef);
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

unsigned char *rawData = (unsigned char*) malloc(height * width * 4);

CGContextRef context = CGBitmapContextCreate(rawData, 
                                             width, 
                                             height,
                                             bitsPerComponent, 
                                             bytesPerRow, 
                                             colorSpace,
                                             kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);

CGContextClearRect(context, CGRectMake(0, 0, width, height));
CGContextDrawImage(context, CGRectMake(0, 0, width, height), imageRef);

//convert phone screen coords to texture coordinates.
xx *= width/320;
yy *= height/480;

int counter = 0;

// Now your rawData contains the image data in the RGBA8888 pixel format.
// Get the byteIndex of pixel tapped.

int byteIndex = (bytesPerRow * yy) + xx * bitsPerPixel;

CGFloat red   = (rawData[byteIndex]     * 1.0) / 255.0;
CGFloat green = (rawData[byteIndex + 1] * 1.0) / 255.0;
CGFloat blue  = (rawData[byteIndex + 2] * 1.0) / 255.0;
CGFloat alpha = (rawData[byteIndex + 3] * 1.0) / 255.0;
byteIndex += 4;

for(int x = 0; x < width; x++) 
{
    for(int y = 0; y < height; y++) 
    {
        byteIndex = ( width * y ) + x  * bitsPerPixel;

        CGFloat redVal   = ( rawData[byteIndex]     * 1.0) / 255.0;
        CGFloat greenVal = ( rawData[byteIndex + 1] * 1.0) / 255.0;
        CGFloat blueVal  = ( rawData[byteIndex + 2] * 1.0) / 255.0;
        CGFloat alphaVal = ( rawData[byteIndex + 3] * 1.0) / 255.0;
        byteIndex += 4;

        if( alphaVal != 0 )
        {
            if( redVal == red && greenVal == green && blueVal == blue )
            {
                rawData[byteIndex + 3] = 0; 
                counter ++;
            }
        }
    }
}

NSLog(@"Pixels amount: %i", counter);

CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, 
                                                          rawData, 
                                                          width*height*4, 
                                                          NULL);

CGImageRef newCGimage = CGImageCreate( width,  
                                       height, 
                                       bitsPerComponent, 
                                       bitsPerPixel,
                                       bytesPerRow,
                                       colorSpace, 
                                       kCGBitmapByteOrderDefault, 
                                       provider,
                                       NULL, NO, kCGRenderingIntentDefault );

UIImage *newImage = [UIImage imageWithCGImage:newCGimage];

CGDataProviderRelease(provider);
CGImageRelease(newCGimage);
CGContextRelease(context);
CGColorSpaceRelease(colorSpace);
free(rawData);

return newImage; 
```

}

我相当确定我通过一些测试获得了正确的像素并将选择的颜色输出到该部分似乎工作正常的视图，这似乎是我在编辑原始数据后创建图像时，至少那是我认为问题在于。

提前为任何帮助欢呼。

编辑：

我现在已经剥离了代码，所以基本上它所做的只是将 png 复制到原始数据并从中创建一个 UIImage 并设置它，基本上我应该得到完全相同的图像并且什么都不应该改变。但是这一次它只是消失了，无论是从 0 值还是由于 alpha 为 0 我不确定编辑的代码如下

```
// First get the image into your data buffer
CGImageRef imageRef = [image CGImage];

NSUInteger width = CGImageGetWidth(imageRef);
NSUInteger height = CGImageGetHeight(imageRef);
NSUInteger bitsPerComponent = CGImageGetBitsPerComponent(imageRef);
NSUInteger bitsPerPixel = CGImageGetBitsPerPixel(imageRef);
NSUInteger bytesPerRow = CGImageGetBytesPerRow(imageRef);
CGColorSpaceRef colorSpace = CGImageGetColorSpace(imageRef);
CGBitmapInfo imageInfo = CGImageGetBitmapInfo(imageRef);

unsigned char *rawData = (unsigned char*) malloc(height * width * 4);

CGContextRef context = CGBitmapContextCreate(rawData, 
                                             width, 
                                             height,
                                             bitsPerComponent, 
                                             bytesPerRow, 
                                             colorSpace,
                                             imageInfo);

//convert phone screen coords to texture coordinates.
xx *= (width/[[UIScreen mainScreen] bounds].size.width);
yy *= (height/[[UIScreen mainScreen] bounds].size.height);

NSLog(@"converted X pos: %i",xx);
NSLog(@"converted Y pos: %i",yy);

int counter = 0;

CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, 
                                                          rawData, 
                                                          width*height*4, 
                                                          NULL);
CGImageRef newCGimage = CGImageCreate( width,  
                                       height, 
                                       bitsPerComponent, 
                                       bitsPerPixel,
                                       bytesPerRow,
                                       colorSpace, 
                                       imageInfo, 
                                       provider,
                                       NULL, NO, kCGRenderingIntentDefault );

UIImage *newImage = [[UIImage alloc]initWithCGImage:newCGimage];

CGDataProviderRelease(provider);
CGImageRelease(newCGimage);
CGContextRelease(context);
free(rawData);

return newImage; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-22T23:53:24.527

在您的编辑帖子中，图像全黑，因为您没有对上下文做任何事情。您只需创建一个空白上下文并将其转换为图像。

另外，我让你的算法的主要部分更有效率。在遍历数组时，您总是希望将 for 循环按行优先顺序（在这种情况下，外部循环用于高度，然后内部循环用于宽度），以便索引计算更容易。

```
int byteIndex = (bytesPerRow * yy) + (xx * (bitsPerPixel / 8));  //you want bytes, not bits, so divide the bitsPerPixel by 8

//you don't need to do the "* 1.0 / 255.0" part if you are just
//going to compare the values with other values in the same 0-255 range.
//Only do it if something requires the values to be from 0-1 or if that
//is how you want it to print.
CGFloat red   = (rawData[byteIndex++];
CGFloat green = (rawData[byteIndex++];
CGFloat blue  = (rawData[byteIndex++];
CGFloat alpha = (rawData[byteIndex++];

//because the 2-dimensional data is in a 1-dimensional array,
//the lines wrap as they go down, so the data reads like a book
//with height = 0 at the top and width = 0 on the left.
//This for loop configuration allows for easy iteration by just
//incrementing the index while iterating.

byteIndex = 0;

for (int y = 0; y < height; y++)
{
    for(int x = 0; x < width; x++) 
    {
        //Incrementing byteIndex like this makes it go to the correct
        //position for the next loop cycle.

        //Do not multiply by one unless you want maximum readability.
        //If you were trying to get out of doing integer division,
        //multiplying by one isn't necessary because the 255.0 not an integer.
        //Because multiplying by one is executed at run-time, it hogs
        //the CPU for a little bit. To overcome this, cast if you really
        //have to, because casting is a compile time operation,
        //not a run-time one, giving more performance.

        CGFloat redVal   = rawData[byteIndex++];
        CGFloat greenVal = rawData[byteIndex++];
        CGFloat blueVal  = rawData[byteIndex++];
        CGFloat alphaVal = rawData[byteIndex++];

        //you can combine the if statements into one because of short-circuiting

        if( alphaVal != 0 && redVal == red && greenVal == green && blueVal == blue )
        {
            rawData[byteIndex-1] = 0; 
            counter ++;
        }
    }
} 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T02:38:12.053

好吧，我已经修复了它，按照其他示例有时只会让您花费一整天的时间试图找出您不想做的事情......无论哪种方式，上面的代码都很好......除了

```
for(int y = 0; y < height; y++) 
{
    byteIndex = ( width * y ) + x  * bitsPerPixel;

    CGFloat redVal   = ( rawData[byteIndex]     * 1.0) / 255.0;
    CGFloat greenVal = ( rawData[byteIndex + 1] * 1.0) / 255.0;
    CGFloat blueVal  = ( rawData[byteIndex + 2] * 1.0) / 255.0;
    CGFloat alphaVal = ( rawData[byteIndex + 3] * 1.0) / 255.0;
    byteIndex += 4;

    if( alphaVal != 0 )
    {
        if( redVal == red && greenVal == green && blueVal == blue )
        {
            rawData[byteIndex + 3] = 0; 
            counter ++;
        }
    }
} 
```

在我的像素检查中再次使用它之前，我正在增加字节索引，所以在测试之后移动它，这一切都很好。

至于图片显示问题，去掉“free(rawData);” 显然内存不喜欢被释放。

# cordova - Phonegap 网络意图

> ID：11406917
> 
> 赞同：0
> 
> 时间：2012-07-10T05:05:11.147
> 
> 标签：cordova

我必须在 Android 的 phonegap 中使用 webintent 发送电子邮件。我在以下代码中收到错误。我不明白如何在 index.html 文件中的脚本中调用该函数。我收到 json 异常。任何人都可以帮我解决这？？

WebIntent.java

```
 public class WebIntent extends Plugin {

        private String onNewIntentCallback = null;
        private static final String TAG = "Webintent";

        public PluginResult execute(String action, JSONArray args, String callbackId) {
            Log.d(TAG, "WebintentPlugin Called");
            try {

                  System.out.println("JSON11"+args);
                if (action.equals("startActivity")) {
                    if (args.length() != 1) {
                        return new PluginResult(PluginResult.Status.INVALID_ACTION);
                    }

                    // Parse the arguments

                    JSONObject obj = args.getJSONObject(0);

                    String type = obj.has("type") ? obj.getString("type") : null;
                    Uri uri = obj.has("url") ? Uri.parse(obj.getString("url")) : null;
                    JSONObject extras = obj.has("extras") ? obj.getJSONObject("extras") : null;
                    Map<String, String> extrasMap = new HashMap<String, String>();

                    // Populate the extras if any exist
                    if (extras != null) {
                        JSONArray extraNames = extras.names();
                        for (int i = 0; i < extraNames.length(); i++) {
                            String key = extraNames.getString(i);
                            String value = extras.getString(key);
                            extrasMap.put(key, value);
                        }
                    }

                    startActivity(obj.getString("action"), uri, type, extrasMap);
                    return new PluginResult(PluginResult.Status.OK);

                } else if (action.equals("hasExtra")) {
                    if (args.length() != 1) {
                        return new PluginResult(PluginResult.Status.INVALID_ACTION);
                    }
                    Intent i = ((DroidGap) this.ctx).getIntent();
                    String extraName = args.getString(0);
                    return new PluginResult(PluginResult.Status.OK, i.hasExtra(extraName));

                } else if (action.equals("getExtra")) {
                    if (args.length() != 1) {
                        return new PluginResult(PluginResult.Status.INVALID_ACTION);
                    }
                    Intent i = ((DroidGap) this.ctx).getIntent();
                    String extraName = args.getString(0);
                    if (i.hasExtra(extraName)) {
                        return new PluginResult(PluginResult.Status.OK, i.getStringExtra(extraName));
                    } else {
                        return new PluginResult(PluginResult.Status.ERROR);
                    }
                } else if (action.equals("getUri")) {
                    if (args.length() != 0) {
                        return new PluginResult(PluginResult.Status.INVALID_ACTION);
                    }

                    Intent i = ((DroidGap) this.ctx).getIntent();
                    String uri = i.getDataString();
                    return new PluginResult(PluginResult.Status.OK, uri);
                } else if (action.equals("onNewIntent")) {
                    if (args.length() != 0) {
                        return new PluginResult(PluginResult.Status.INVALID_ACTION);
                    }

                    this.onNewIntentCallback = callbackId;
                    PluginResult result = new PluginResult(PluginResult.Status.NO_RESULT);
                    result.setKeepCallback(true);
                    return result;
                } else if (action.equals("sendBroadcast")) 
                {
                    if (args.length() != 1) {
                        return new PluginResult(PluginResult.Status.INVALID_ACTION);
                    }

                    // Parse the arguments
                    JSONObject obj = args.getJSONObject(0);
                    System.out.println("JSON"+obj);
                    JSONObject extras = obj.has("extras") ? obj.getJSONObject("extras") : null;
                    Map<String, String> extrasMap = new HashMap<String, String>();

                    // Populate the extras if any exist
                    if (extras != null) {
                        JSONArray extraNames = extras.names();
                        for (int i = 0; i < extraNames.length(); i++) {
                            String key = extraNames.getString(i);
                            String value = extras.getString(key);
                            extrasMap.put(key, value);
                        }
                    }

                    sendBroadcast(obj.getString("action"), extrasMap);
                    return new PluginResult(PluginResult.Status.OK);
                }
                return new PluginResult(PluginResult.Status.INVALID_ACTION);
            } catch (JSONException e) {
                e.printStackTrace();
                return new PluginResult(PluginResult.Status.JSON_EXCEPTION);
            }
        }

        @Override
        public void onNewIntent(Intent intent) {
            if (this.onNewIntentCallback != null) {
                PluginResult result = new PluginResult(PluginResult.Status.OK, intent.getDataString());
                result.setKeepCallback(true);
                this.success(result, this.onNewIntentCallback);
            }
        }

        void startActivity(String action, Uri uri, String type, Map<String, String> extras) {
            Intent i = (uri != null ? new Intent(action, uri) : new Intent(action));

            if (type != null && uri != null) {
                i.setDataAndType(uri, type); //Fix the crash problem with android 2.3.6
            } else {
                if (type != null) {
                    i.setType(type);
                }
            }

            for (String key : extras.keySet()) {
                String value = extras.get(key);
                // If type is text html, the extra text must sent as HTML
                if (key.equals(Intent.EXTRA_TEXT) && type.equals("text/html")) {
                    i.putExtra(key, Html.fromHtml(value));
                } else if (key.equals(Intent.EXTRA_STREAM)) {
                    // allowes sharing of images as attachments.
                    // value in this case should be a URI of a file
                    i.putExtra(key, Uri.parse(value));
                } else if (key.equals(Intent.EXTRA_EMAIL)) {
                    // allows to add the email address of the receiver
                    i.putExtra(Intent.EXTRA_EMAIL, new String[] {"myemail.com"});
                } else {
                    i.putExtra(key, value);
                }
            }
            this.ctx.startActivity(i);
        }

        void sendBroadcast(String action, Map<String, String> extras) {
            Intent intent = new Intent();
            intent.setAction(action);
            for (String key : extras.keySet()) {
                String value = extras.get(key);
                intent.putExtra(key, value);
            }

            ((DroidGap) this.ctx).sendBroadcast(intent);
        }
    }
webintent.js

    var WebIntent = function() { 

    };

    WebIntent.ACTION_SEND = "android.intent.action.SEND";
    WebIntent.ACTION_VIEW= "android.intent.action.VIEW";
    WebIntent.EXTRA_TEXT = "android.intent.extra.TEXT";
    WebIntent.EXTRA_SUBJECT = "android.intent.extra.SUBJECT";
    WebIntent.EXTRA_STREAM = "android.intent.extra.STREAM";
    WebIntent.EXTRA_EMAIL = "android.intent.extra.EMAIL";

    WebIntent.prototype.startActivity = function(params, success, fail) {
        return cordova.exec(function(args) {
            success(args);
        }, function(args) {
            fail(args);
        }, 'WebIntent', 'startActivity', [params]);
    };

    WebIntent.prototype.hasExtra = function(params, success, fail) {
        return cordova.exec(function(args) {
            success(args);
        }, function(args) {
            fail(args);
        }, 'WebIntent', 'hasExtra', [params]);
    };

    WebIntent.prototype.getUri = function(success, fail) {
        return cordova.exec(function(args) {
            success(args);
        }, function(args) {
            fail(args);
        }, 'WebIntent', 'getUri', []);
    };

    WebIntent.prototype.getExtra = function(params, success, fail) {
        return cordova.exec(function(args) {
            success(args);
        }, function(args) {
            fail(args);
        }, 'WebIntent', 'getExtra', [params]);
    };

    WebIntent.prototype.onNewIntent = function(callback) {
        return cordova.exec(function(args) {
            callback(args);
        }, function(args) {
        }, 'WebIntent', 'onNewIntent', []);
    };

    WebIntent.prototype.sendBroadcast = function(params, success, fail) {
        return cordova.exec(function(args) {
            success(args);
        }, function(args) {
            fail(args);
        }, 'WebIntent', 'sendBroadcast', [params]);
    };

    cordova.addConstructor(function() {
        cordova.addPlugin('WebIntent', new WebIntent());
    });

index.html

<html>
  <head>
    <meta name="viewport" content="target-densitydpi=low-dpi; user-scalable=no" />
    <title>PhoneGap Events Example</title>
    <script type="text/javascript" charset="utf-8" src="cordova-1.8.0.js"></script> 
     <script type="text/javascript" charset="utf-8" src="webintent.js"></script>

      <script type="text/javascript" charset="utf-8">

         function onBodyLoad()
         {
         document.addEventListener("deviceready",onDeviceReady,false);
        }

   function onDeviceReady() {    
       window.plugins.WebIntent.startActivity('WebIntent', success, fail);

        }
        function success(e) {

        console.log("Success");
        }

        function fail(f) {
             console.log("Failure");
        }

    </script>
  </head>
  <body onload="onBodyLoad();">
    <h2>IMEI v1.5</h2>
    IMEI: <span id="imei"></span><br/>

  </body>
</html>

My error is-

07-10 10:23:12.180: W/System.err(536): org.json.JSONException: Value WebIntent at 0 of type java.lang.String cannot be converted to JSONObject
07-10 10:23:12.200: W/System.err(536):  at org.json.JSON.typeMismatch(JSON.java:100)
07-10 10:23:12.200: W/System.err(536):  at org.json.JSONArray.getJSONObject(JSONArray.java:484)
07-10 10:23:12.230: W/System.err(536):  at com.gsr.imei.WebIntent.execute(WebIntent.java:48)
07-10 10:23:12.240: W/System.err(536):  at org.apache.cordova.api.PluginManager$1.run(PluginManager.java:186)
07-10 10:23:12.240: W/System.err(536):  at java.lang.Thread.run(Thread.java:856)

can anyone help me??Thanks for any help.. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:11:43.650

```
window.plugins.WebIntent.startActivity('WebIntent', success, fail); 
```

应该是这样的地图对象：

```
window.plugins.WebIntent.startActivity({url: 'url here', type: 'type', extras: {}}, success, fail); 
```

## 编辑

使用此函数调用意图

```
function sendEmail(to, subject, body) { 
          var extras = {};
          extras[WebIntent.EXTRA_SUBJECT] = subject;
          extras[WebIntent.EXTRA_TEXT] = body;
          window.plugins.webintent.startActivity({
              url: to,
              action: WebIntent.ACTION_SEND,
              type: 'text/plain', 
              extras: extras 
            }, 
            function() {
                alert("mail sent");
            }, 
            function() {
              alert('Failed to send email via Android Intent');
            }
          ); 
    } 
```

它会打开带有所有已发送参数的邮件发送对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:09:47.753

您是否在项目中包含了 json.js 文件？请检查，我也遇到了同样的问题，并且在包含 json.js 文件后得到了解决。

# c# - 消息在公共交通中无法到达订阅者

> ID：11406920
> 
> 赞同：3
> 
> 时间：2012-07-10T05:05:26.327
> 
> 标签：c#, .net, rabbitmq, esb, masstransit

我有两个项目在不同的进程中运行，RMQ 部署在单独的机器上。

这是我的发布者代码

```
Bus.Initialize(config =>
            {
                config.UseRabbitMq();
                config.UseRabbitMqRouting();
                config.UseControlBus();
                config.EnableMessageTracing();
                config.EnableRemoteIntrospection();
                config.ReceiveFrom("rabbitmq://debug:debug@data.sampleserver.com:5672/bus/response-queue");
            });

            Console.ReadLine();

            int i = 0;

            while (i < 20)
            {
                i += 1;

                Console.WriteLine("Publishing...");
                Bus.Instance.Publish(new Message
                    {
                        Body = String.Format("Body = {0}", i)
                    });

                Console.ReadLine();
            }

            Console.ReadLine(); 
```

这是我的订阅者代码：

```
Bus.Initialize(config =>
            {
                config.UseRabbitMq();
                config.UseRabbitMqRouting();
                config.ReceiveFrom("rabbitmq://debug:debug@data.sampleserver.com:5672/bus/response-queue");
                config.UseControlBus();
                config.EnableMessageTracing();
                config.UseHealthMonitoring(10);
            });

            var service = HostFactory.New(config =>
            {
                config.SetServiceName("survey");
                config.SetDisplayName("survey");
                config.SetDescription("Survey service");

                config.Service<Service>(s =>
                {
                    s.ConstructUsing(sv => new Service(Bus.Instance));
                    s.WhenStarted(sv => sv.Start());
                    s.WhenStopped(sv => sv.Stop());
                });
            });

            Task.Factory.StartNew(() =>
            {
                try
                {
                    service.Run();
                }
                catch (Exception e)
                {
                    Console.WriteLine(e);
                }
            }); 
```

在服务器中，我有以下订阅：

```
public Service(IServiceBus serviceBus)
        {
            _serviceBus = serviceBus;
            _serviceBus.SubscribeHandler<Message>(Handle);
        }

        void Handle(Message message)
        {
            Console.WriteLine("Receive a new message with body {0}", message.Body);
        } 
```

当我通过发布者发送一组消息时，只有少数消息成功到达订阅者。他们中的大多数都属于响应队列错误。

我是新来的公共交通，我不明白里面发生了什么，也不明白我怎么能弄明白。

在这种情况下你有什么可以推荐的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T18:22:01.563

我注意到您示例中的发布者和订阅者正在侦听同一个队列。通常，您应该将每个端点放在一个单独的队列中。MassTransit 将负责根据类型路由消息。

# android-service - 语音识别即服务。（Android）

> ID：11406925
> 
> 赞同：1
> 
> 时间：2012-07-10T05:06:12.637
> 
> 标签：android-service, speech-recognition

我正在开发安卓应用程序。我的应用程序需要语音识别。但我需要语音识别作为服务。我已经创建了简单的语音识别，当我单击按钮时，它会启动识别器意图。它工作正常并给我输出。但是当用户单击按钮语音识别作为服务启动时我需要什么（在后台）。当用户开始指定它时，它启动识别器并给我输出。

我读了几个关于这个的问题，但没有得到这种功能的正确解决方案。有没有办法实现这一点。需要帮助...谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T15:16:51.670

有一些代码可以完全满足您的需要：

[https://github.com/gast-lib/gast-lib/blob/master/library/src/root/gast/speech/activation/SpeechActivationService.java](https://github.com/gast-lib/gast-lib/blob/master/library/src/root/gast/speech/activation/SpeechActivationService.java)

通过下载此[应用程序](https://play.google.com/store/apps/details?id=root.gast.playground)查看它的运行情况。

该代码是`Service`在后台运行的，用于监听用户的语音。当用户说出某个单词时，它会触发一个`Intent`. 听的时候`Service`也方便。`Notification`还有一些其他代码在[这里](https://github.com/gast-lib/gast-lib/blob/master/app/src/root/gast/playground/speech/SpeechActivationServicePlay.java)启动和停止它。

# vim - 什么是vim中行条带数据的有效排序宏？

> ID：11406926
> 
> 赞同：2
> 
> 时间：2012-07-10T05:06:17.070
> 
> 标签：vim

这是这个问题的扩展（我之前问过）：

[如何删除每隔一行，并在选择后粘贴已删除的结果？](https://stackoverflow.com/questions/11355690/how-to-delete-every-other-row-plus-paste-deleted-results-after-selection)

，但现在我想推广到 n-striped 数据

因此，这个问题的扩展将是——如何将其推广到非条带化数据集？

显然，上面的内容实际上是每隔一行进行 2 行去条带化，但是如果我们想有效地将​​下面这种模式中的数据排序为 3 行去条带呢？N行条纹？

前：

```
111
222
333
444
555
666 
```

之后的新功能（如果使用 2 条纹）：

```
111
333
555
222
444
666 
```

NEW AFTER（3条纹如下所示）：

```
111
444
222
555
333
666 
```

可能有一个算法名称；我在排序方面没有很强的背景，但它可能有一个名字——如果有人能澄清，请告诉我。

同样，带参数的宏（或不带参数）是我在这里尝试解决的问题。这在排序实用程序空间中也可能有效，但基于上一个问题的答案，我认为它在 vimscript 中是可行的。

所以我会为脚本设计的东西类似于（在数据上进行视觉线选择），然后调用一个用户宏函数，如

```
:'<','>' call Destripe(2)
:'<','>' call Destripe(3) 
```

其中唯一的参数描述了条带化。

如果我有 3 条数据，另一个例子（为了更清楚地说明我想要做什么）

之前（左）和之后（右）：

```
aaa        aaa
bbb        aaa
ccc        aaa
aaa        bbb
bbb        bbb
ccc        bbb
aaa        ccc
bbb        ccc
ccc        ccc 
```

带有 2 条数据的示例

之前（左）和之后（右）：

```
aaa        aaa
bbb        aaa
aaa        aaa
bbb        bbb
aaa        bbb
bbb        bbb 
```

感谢@lornix 的想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:14:53.547

```
"
function! Destripe(stripe) range
    call setpos('.',[0,a:firstline,1,0])
    let numlines=(a:lastline-a:firstline+1)/a:stripe
    let currentline=a:firstline+a:stripe-1
    while numlines > 0
        call setpos('.',[0,currentline,1,0])
        let currentline=currentline+a:stripe-1
        silent :.m$
        let numlines=numlines-1
    endwhile
endfunction
"
%call Destripe(2) 
```

在 111,222,333... 行列表中获取上述内容，得到以下内容：（加倍以节省空间）

```
111    111
222    333
333    555
444    777
555    999
666    222
777    444
888    666
999    888 
```

恐怕 3 和更高版本可能不会产生您要查找的内容，因为您没有指定从文件的当前（移位）内容或文件的原始内容中读取。（这有意义吗？）

如所写，它需要提供一个范围，'%' 或 '<,'> 或 line #'s。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T11:03:40.597

老实说，如果这不是经常做的事情，或者如果没有太多的条纹，我只需在命令行中输入以下内容（三个条纹）。也许你可以看到这是如何概括的。

```
:let @a = '' | let @b = ''
:g/^/ +d A | d B
:put a | put b 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T15:27:54.473

```
function! Destripe(stripe) range

let s:rowbeg=getpos("'<")[1]           
let s:rowend=getpos("'>")[1]           
let s:curSetLngth=s:rowend-s:rowbeg+1

let stripe=a:stripe
let s:rowend += 1            

while stripe >= 2

  let stripeMin1 = stripe - 1                 

  " clear register
  let @e=''                                   

  " delete last stripe and append
  " to the e register
  execute "let @a='".stripeMin1."j\"Edd'"     

  " count how many times to perform a-macro
  let s:stripesInSlctn = s:curSetLngth / stripe           

  "silent ":'<" 
  let s:count=0
  while s:count <= s:stripesInSlctn
    norm @a 
    let s:count = s:count + 1
    "dbg echo s:count s:stripesInSlctn s:curSetLngth stripe s:rowbeg s:rowend
  endwhile

  let s:curSetLngth -= s:stripesInSlctn + 1

  " rowend location
  let s:rowend -= s:count      
  execute s:rowend

  " e-register collected the stripes
  " so place at bottom of selection
  norm "ep
  execute s:rowbeg
  let stripe -= 1
  let s:stripesInSlctn -= 1
endwhile

endfunction 
```

如果有办法清理它，请告诉我；例如，由于我设置脚本的方式，它仅适用于视觉线选择。

要从命令行调用，请进行视觉线选择，然后

```
:'<,'> call Destripe(n) 
```

其中 n 是条纹的数量。

脚本有效执行以下 BEFORE (LHS) & AFTER (RHS)：

```
aaa        aaa
bbb        aaa
ccc        aaa
aaa
bbb        bbb
ccc        bbb
aaa        bbb
bbb 
ccc        ccc
           ccc
           ccc 
```

解决方案的一个潜在问题是去条化结果之间的空白始终存在。有人知道如何调试那个吗？在大多数情况下，这可以完成工作。感谢@lornix 的一些启发（我什至不知道如何在 vim 中编写脚本！，我也不知道如何将范围输入函数）。SO社区，如果您对我如何改进它有任何意见，我将不胜感激。

另一个需要考虑的问题是 norm 命令根本无法使用，因为它在“每一行”的基础上工作，而不是在第 n 行的基础上工作！所以基本上我希望有一种方法可以让 norm 在第 n 行上进行操作（在像我这里这样的乘法场景中很有用，或者你对每 3 行、每 4 行等感兴趣的情况）也许有一个特性我只是不使用的规范？

# struts2 - 在 Struts2 中配置 RunTimeException 类

> ID：11406929
> 
> 赞同：0
> 
> 时间：2012-07-10T05:06:33.997
> 
> 标签：struts2, runtimeexception

我的要求如下。我的应用程序建立在 Struts2 框架上并使用注释插件。当我得到任何`RunTimeException`我需要调用自定义类的方法时，该方法使用`e.printStackTrace()`方法打印错误堆栈。如何在我的应用程序中配置此类。我不想在我拥有的每一个动作中都使用 try 和 catch 块。

收到错误后，我想向`error.jsp`用户显示。但在我的 tomcat 控制台中，我想打印错误堆栈。如果有人有想法，请告诉我。

谢谢彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:06:47.110

我不确定注释，因为我使用它非常有限，但是可以在 .xml 的帮助下使用 struts.xml 文件轻松完成`ExceptionMappingInterceptor`。

您需要为此定义自定义堆栈并向 xml 文件添加一些参数以让 S2 处理未捕获的异常并同时将其记录在日志文件/控制台中

```
<interceptors>
  <interceptor-stack name="appDefaultStack">
    <interceptor-ref name="defaultStack">
     <param name="exception.logEnabled">true</param>
     <param name="exception.logLevel">ERROR</param>
    </interceptor-ref>
 </interceptor-stack>
</interceptors>

<default-interceptor-ref name="appDefaultStack" /> 
```

有关更多详细信息，请参阅[异常处理](http://struts.apache.org/2.3.1/docs/exception-handling.html)。我相信它可以很容易地转换为基于注释的解决方案，因为注释插件提供了可以在 XML 文件中完成的所有选项。

# ruby-on-rails - 在rails中使用模型中的回调对字段进行加密和解密

> ID：11406931
> 
> 赞同：0
> 
> 时间：2012-07-10T05:06:39.003
> 
> 标签：ruby-on-rails, model, callback

我使用 before_create 回调函数在保存之前加密电子邮件字段。同样，现在我想在模型中解密它们，然后再将其用于显示。

为此应该使用什么？

我可以使用 afer_save 回调方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T05:30:55.200

此处描述了类似的情况：http: [//api.rubyonrails.org/classes/ActiveRecord/Callbacks.html](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)

```
class BankAccount < ActiveRecord::Base
   before_save      EncryptionWrapper.new
   after_save       EncryptionWrapper.new
   after_initialize EncryptionWrapper.new
end

class EncryptionWrapper
  def before_save(record)
    record.credit_card_number = encrypt(record.credit_card_number)
  end

  def after_save(record)
    record.credit_card_number = decrypt(record.credit_card_number)
  end

  alias_method :after_find, :after_save

  private
    def encrypt(value)
      # Secrecy is committed
    end

    def decrypt(value)
      # Secrecy is unveiled
    end
end 
```

# javascript - 未呈现使用 raphael 的 SVG 文件

> ID：11406933
> 
> 赞同：0
> 
> 时间：2012-07-10T05:06:50.233
> 
> 标签：javascript, svg, raphael, vector-graphics

我有以下 SVG 文件。保存为 SVG 时渲染得很好，但是当我使用 raphael 使用[本](http://playground.mobily.pl/tutorials/building-an-interactive-map-with-raphael.html)教程绘制 svg 时，它不会显示。我认为这是因为规模或尺寸问题，但不知道如何解决。

```
 <?xml version="1.0" encoding="iso-8859-1"?>
    <svg version="1.1" baseProfile="full" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" preserveAspectRatio="xMinYMin meet" width="100%" height="100%" viewBox="79.553674 -31.027755 9.149489 5.259533">
    <g id="Cluster_region" style="display:inline;fill-rule:evenodd">
    <desc>Layer Cluster_region</desc>
    <path id="1" d="M83.502064,-28.809384 l -0.000769,-0.002363 0.0,0.012758 0.026895,-0.001343 0.04841,0.038272 -0.015368,0.026186 -0.021516,0.047001 0.023821,0.034243 0.016137,0.058416 0.055326,0.010743 0.019211,0.014771 0.011526,-0.0047 0.030737,-0.055729
     0.031505,-0.044987 0.015368,-0.015443 0.034579,-0.007386 0.01921,-0.016786 0.05379,-0.013428 0.027663,-0.019472 0.029968,-0.036258 0.024589,-0.003357 0.0,-0.038944 0.016906,-0.012086 0.021515,0.0 0.043032,0.03693 0.005379,-0.015444 0.022284,-0.008057
     0.016136,-0.024172 0.021516,-0.006043 -0.002305,-0.024171 0.017674,-0.010072 0.031505,-0.002014 0.031505,0.008728 0.026896,-0.020143 0.02382,-0.006714 0.037652,-0.116159 -0.015368,-0.015443 -0.037652,0.002685 -0.015369,-0.027529 0.013064,-0.046655
     -0.047642,-0.069791 0.039958,-0.046975 -0.067622,0.004026 -0.00922,-0.052343 -0.093748,0.002684 -0.03842,-0.033553 -0.067622,-0.010737 -0.073768,0.04429 -0.007684,0.042949 -0.099894,0.002684 -0.049178,0.036238 0.014599,0.032178 -0.00999,0.049204
     -0.041494,0.010785 -0.001537,0.014154 -0.006147,0.097734 -0.053021,0.047181 -0.063779,0.062011 0.005379,0.031679 -0.025358,0.008088 0.006916,0.031679 Z" style="fill:white;stroke:black;stroke-width:0.014477;"/>
    </g> 
```

**使用 Raphael：路径文件**

```
 <html>
<head>

   <script src="http://raphaeljs.com/raphael.js" type="text/javascript"></script>
   <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

   <script>
    var paths = {
        tp : {
              name : 'tp',
              path : 'M83.267697,-28.73143 l 0.047641,-0.012755 0.049948,0.006042 0.0,-0.018798 0.109115,-0.027525 -0.002306,-0.048336 0.023822,-0.040951 0.089136,-0.104058 0.023821,-0.012755 0.0,-0.111442 0.010759,-0.004384 0.036884,-0.040155 -0.113724,-0.032124  -0.036884,-0.04551 -0.063012,-0.056217 -0.023051,-0.065586 -0.089137,-0.137866 -0.050716,0.004015 -0.027664,-0.08031 -0.03842,-0.013385 -0.067618,-0.022047 -0.086064,0.0 -0.064544,-0.047786 -0.156764,-0.015929 -0.165976,-0.082298 -0.006148,-0.076989  -0.055328,0.010619 0.0,-0.037167 -0.064544,-0.090263 -0.04918,0.010619 -0.172124,-0.090262 -0.184424,-0.042477 0.003076,-0.108846 -0.05379,-0.063715 0.027664,-0.078981 -0.036116,-0.039822 -0.064548,0.05907 -0.15061,-0.080308 -0.0584,-0.009292  -0.067621,0.003318 -0.016905,-0.029866 -0.092978,-0.031858 -0.007684,0.03584 -0.051485,-0.019911 -0.003842,0.047787 -0.059168,0.018583 -0.034579,-0.033849 -0.029967,-0.018583 -0.027664,-0.002655 0.021516,0.031858 -0.026126,0.016592 0.006915,0.026651  0.023053,0.021305 -0.018442,0.089215 -0.041495,0.054595 -0.079915,0.037284 0.003049,0.075298 0.000025,-0.000031 0.0,-0.008286 0.000767,0.007312 -0.000767,0.000974 0.0,0.000633 -0.000025,-0.000602 -0.010733,0.01362 0.033042,0.013959 0.04841,0.003989  0.082989,0.009306 0.023053,0.039884 -0.012295,0.027254 -0.000768,0.05052 0.027663,0.005318 0.012294,-0.026589 0.030737,-0.019942 0.0584,0.0 0.003073,-0.009306 0.076075,-0.001994 0.019209,0.001994 0.026895,0.022607 0.089136,0.012032 -0.016904,0.110958  -0.038421,0.016042 -0.051485,0.107619 0.016138,0.05645 0.078377,0.022177 0.009221,0.045026 -0.023052,0.036961 0.026894,0.035618 -0.003073,0.096099 -0.042263,0.008064 -0.006916,0.045026 -0.057631,0.022177 -0.066084,-0.005377 -0.000769,-0.034273  -0.017674,-0.01008 -0.041494,0.015456 -0.017674,0.001344 -0.010757,0.016801 -0.063779,0.057123 0.028431,0.028225 -0.019978,0.022848 0.009988,0.058466 0.026896,-0.004032 0.013063,0.022849 0.04841,-0.003361 0.000769,0.021505 -0.017674,0.069219  0.096052,-0.004032 0.037653,0.020832 0.073768,0.011425 0.046105,0.035617 0.051484,-0.00336 0.059937,0.009408 0.01921,-0.01344 0.034579,-0.040994 0.035347,0.001344 0.029201,0.052418 0.029967,0.008065 0.040726,-0.053762 0.114495,-0.09946 0.039189,-0.00336  0.139852,0.028225 -0.022284,0.094755 0.049179,0.007393 0.066084,-0.020161 0.149072,0.056222 0.0438,0.052364 -0.005379,0.052364 0.031505,0.0 0.026127,0.033567 0.022284,0.000671 0.152915,-0.01007 0.042264,0.027525 0.099125,0.020812 0.037652,0.032224  0.030737,-0.002014 0.061474,0.023497 0.026126,-0.015441 0.034579,0.022154 Z'
        }

    }
   </script>

   <script>
    window.onload = function(){   
        var r = Raphael('map', 1200, 820),
                    // create a canvas object on which to draw our paths
            attributes = {
                fill: '#fff',
                stroke: '#3899E6',
                'stroke-width': 1,
                'stroke-linejoin': 'round'
            },
            // create 'attributes' object with parameters
            arr = new Array();

            for (var country in paths) {
                var obj = r.path(paths[country].path); 
                obj.attr(attributes);
            }
    }
   </script>
</head>
<body>
    <div id="map"></div>
</body>
</html> 
```

**但是，如果我使用以下路径，它将起作用：**

```
M83.502064,-28.809384 l -0.000769,-0.002363 0.0,0.012758 0.026895,-0.001343 0.04841,0.038272 -0.015368,0.026186 -0.021516,0.047001 0.023821,0.034243 0.016137,0.058416 0.055326,0.010743 0.019211,0.014771 0.011526,-0.0047 0.030737,-0.055729  0.031505,-0.044987 0.015368,-0.015443 0.034579,-0.007386 0.01921,-0.016786 0.05379,-0.013428 0.027663,-0.019472 0.029968,-0.036258 0.024589,-0.003357 0.0,-0.038944 0.016906,-0.012086 0.021515,0.0 0.043032,0.03693 0.005379,-0.015444 0.022284,-0.008057  0.016136,-0.024172 0.021516,-0.006043 -0.002305,-0.024171 0.017674,-0.010072 0.031505,-0.002014 0.031505,0.008728 0.026896,-0.020143 0.02382,-0.006714 0.037652,-0.116159 -0.015368,-0.015443 -0.037652,0.002685 -0.015369,-0.027529 0.013064,-0.046655  -0.047642,-0.069791 0.039958,-0.046975 -0.067622,0.004026 -0.00922,-0.052343 -0.093748,0.002684 -0.03842,-0.033553 -0.067622,-0.010737 -0.073768,0.04429 -0.007684,0.042949 -0.099894,0.002684 -0.049178,0.036238 0.014599,0.032178 -0.00999,0.049204  -0.041494,0.010785 -0.001537,0.014154 -0.006147,0.097734 -0.053021,0.047181 -0.063779,0.062011 0.005379,0.031679 -0.025358,0.008088 0.006916,0.031679 Z 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:55:16.523

您需要[`Paper.setViewBox()`](http://raphaeljs.com/reference.html#Paper.setViewBox)在 SVG 中进行设置。
它的作用类似于平移和缩放整个视图。否则你的路径只是越界，你看不到它。

* * *

为您提供更多教程/进一步阅读

*   [拉斐尔文献](http://raphaeljs.com/reference.html)
*   [Raphael JS 库简介](http://net.tutsplus.com/tutorials/javascript-ajax/an-introduction-to-the-raphael-js-library/)
*   [很多很多例子等等](http://www.irunmywebsite.com/raphael/additionalhelp.php)
*   [RaphaëlJs 教程](http://cancerbero.vacau.com/raphaeltut/)
*   [如何绘制路径](http://tutorials.jenkov.com/svg/path-element.html)（不是专门针对 Raphaël，而是针对 SVG）
*   [拉斐尔现场](http://craic.com/tutorials/javascript/raphael_live/raphael_live.html)

# r - 如何分解R中的日期数据？

> ID：11406935
> 
> 赞同：2
> 
> 时间：2012-07-10T05:07:16.797
> 
> 标签：r, datetime, lubridate

在 R 中，我得到日期的数据类如下：

```
20100701
20100702
20100703
20100704 
```

我如何将它们转换为以下形式：

```
2010 07 01
2010 07 02
2010 07 03 
```

年、月、日数据分3列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T05:47:47.623

如果您使用包，这非常简单`lubridate`：

```
library(lubridate)
x <- ymd(dates)
data.frame(y=year(x), m=month(x), d=day(x))
     y m d
1 2010 7 1
2 2010 7 2
3 2010 7 3
4 2010 7 4 
```

* * *

`lubridate`提供了一堆方便的函数来处理日期。在这个例子中：

*   `ymd()`将字符串转换为日期，猜测格式是什么。
*   `year()`提取年份
*   `month()`提取月份
*   `day()`提取一天

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T06:38:17.183

`lubridate`顺便提一下，这也可以通过函数`strptime`和包`format.POSIXct`来完成（尽管可能不如包方便） `base`：

```
x <- c(20100701,20100702,20100703,20100704)
strptime(x, format="%Y%m%d") -> y
data.frame(year=format(y,format="%Y"),month=format(y,format="%m"),day=format(y,format="%d"))
  year month day
1 2010    07  01
2 2010    07  02
3 2010    07  03
4 2010    07  04 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T05:12:58.200

一些虚拟数据：

```
dates <- c("20100701", "20100701", "20100701", "20100701") 
```

要获取日期：

```
library(lubridate)
ymd(dates)
Using date format %Y%m%d.
[1] "2010-07-01 UTC" "2010-07-01 UTC" "2010-07-01 UTC" "2010-07-01 UTC" 
```

要获取数据框，只需拆分字符串：

```
library(stringr)
data.frame(year=str_sub(dates, 1, 4), month=str_sub(dates, 5, 6), day=str_sub(dates, 7, 8))
  year month day
1 2010    07  01
2 2010    07  01
3 2010    07  01
4 2010    07  01 
```

# asp.net-mvc-3 - 如何在aspnet mvc中将部分视图呈现为javascript字符串

> ID：11406937
> 
> 赞同：2
> 
> 时间：2012-07-10T05:07:21.427
> 
> 标签：asp.net-mvc-3

我有以下部分“InfoWindowContent”视图。

```
 @model CasWeb.Models.ViewModels.AssetLocation
<div>
    <h2>@Model.Name</h2>
    <table>
        <tr>
            <td>
                Lat:
            </td>
            <td>@Model.Lat
            </td>
        </tr>
        <tr>
            <td>
                Lng:
            </td>
            <td>@Model.Lng
            </td>
        </tr>
    </table>
</div> 
```

我想用它作为谷歌地图信息窗口的内容。所以我一直在想这样的事情

```
//Get the content for info window for this asset from a a partial view
            var infoWindowContent@(asset.Name) = "@Html.Action("InfoWindowContent", @asset)";

            var infoWindow@(asset.Name) = new google.maps.InfoWindow({
                content: infoWindowContent@(asset.Name),
                maxWidth: 200
            }); 
```

我遇到的问题是java脚本抱怨有一个未终止的字符串文字，因为@html.Action方法返回包含所有换行符的部分视图，我最终得到java脚本代码，如：

```
var infoWindowContentd4444444 = "<div>
<h2>d4444444</h2>
<table>
    <tr>
        <td>
            Lat:
        </td>
        <td>43
        </td>
    </tr>
    <tr>
        <td>
            Lng:
        </td>
        <td>43
        </td>
    </tr>
</table> 
```

";

我可以通过从我的部分视图中删除所有换行符来解决这个问题，例如：

```
 @model CasWeb.Models.ViewModels.AssetLocation
<div><h2>@Model.Name</h2><table><tr><td>Lat:</td><td>@Model.Lat</td></tr><tr><td>Lng:</td><td>@Model.Lng</td></tr></table></div> 
```

但这很痛苦，而且很难维持。

有什么想法可以将部分视图呈现为 java 脚本字符串吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:57:49.297

最好再创建一个动作并从动作中返回 PartialViewResult。对此操作发出 Json 请求，并在 DIV 中附加 HTML 响应。请[在此处](https://stackoverflow.com/questions/11336349/how-do-i-refresh-html-action-from-a-controller/11338095#comment14957019_11338095)找到更多详细信息。

# java - java 套接字。服务器如何知道客户端关闭流

> ID：11406945
> 
> 赞同：1
> 
> 时间：2012-07-10T05:08:32.137
> 
> 标签：java, file, sockets, stream

我想用 java 写一个传输文件 socket-program 。但是我有问题，传输文件时如何取消。

当我在客户端关闭输入流时，服务器如何知道它关闭输出流。

这是我的代码：客户端

```
 try {
            byte[] data = new byte[1024];
            InputStream is = socket.getInputStream();
            FileOutputStream fos = new FileOutputStream(
                    "/mnt/sdcard/UML.doc");
            BufferedOutputStream bos = new BufferedOutputStream(fos);
            int total = 0;
            while ((count = is.read(data)) != -1 && !canceled) {
                total += count;
                publishProgress("" + (int) ((total * 100) / size));
                fos.write(data, 0, count);

            }

            if(canceled)
            {
                is.close();
                fos.close();
                //socket.close();
                pDialog.dismiss();
                File file = new File("mnt/sdcard/UML.doc");
                file.delete();

                canceled=false;

            }

        } catch (Exception e) {
            Log.e("Error: ", e.getMessage());
        } 
```

……

服务器

```
 BufferedInputStream bis = null;

                    bis = new BufferedInputStream(new FileInputStream(
                            myFile));

                    bis.read(mybytearray, 0, mybytearray.length);
                    os = s.getOutputStream();
                    int total = 0;

                    try {

                        os.write(mybytearray, 0, mybytearray.length);

                        // os.flush();
                    }
                    catch(SocketException e){
                        os.flush();
                        tv.setText("aaaaa");
                    } 
```

……

但是当我关闭输入流时没有显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:12:33.500

当客户端`InputStream`在传输过程中关闭 a 时，`SocketException`将在服务器端抛出 a。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T05:15:24.620

您可以在 try-catch 块中执行此操作。伪代码：

```
try{
    //your file transferring code here through socket output streams
} catch(SocketException e) {
    /* now as you are in this block you got a socket closed 
      Exception and your server now knows about it */
} 
```

# facebook - 设计错误？

> ID：11406947
> 
> 赞同：0
> 
> 时间：2012-07-10T05:08:38.220
> 
> 标签：facebook, bug-tracking

我订阅了开发者博客每周文摘，其中每周统计数据列出了报告、修复等的错误数量。“设计错误”是什么意思？我认为错误是无意的，这意味着代码在语法上是正确的，但会产生无意的结果。对我来说，这是一类新的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T05:11:15.357

这意味着错误，这些错误是“按设计”合理关闭的。

假设您已经填写了一个描述某些“奇怪”行为的“错误”（您认为是这样），但实际上它是故意的。

在这种情况下，错误已关闭并标记为“按设计”

第一个谷歌搜索示例：http: [//developers.facebook.com/bugs/316854721738536/](http://developers.facebook.com/bugs/316854721738536/)

如您所见 - 有人发现如果消息是由 3rd 方应用程序发布的 - 它缺少“分享按钮”。但它是故意以这种方式实现的，因此这种行为是“设计使然”而不是真正的错误。

# html - 属性选择器的特殊性是什么？

> ID：11406953
> 
> 赞同：24
> 
> 时间：2012-07-10T05:09:50.037
> 
> 标签：html, css, css-selectors, css-specificity

我想知道属性选择器的特殊性是什么。例如：

*   ID = 100 分
*   课程 = 10 分
*   html标签= 1分

例子：

```
/* this specificity value is 100 + 10 + 1 = 111 */
#hello .class h2 { } 
```

使用此 HTML：

```
<div class="selectform">
<input type="text" value="inter text">
<input type="text" value="inter text" class="inputag">
</div> 
```

这两个选择器中哪一个更具体？

```
.selectform input[type="text"] { }
.selectform .inputbg { } 
```

**检查演示** [http://tinkerbin.com/IaZW8jbI](http://tinkerbin.com/IaZW8jbI)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-10T05:13:25.507

属性选择器同样特定于类选择器。

在您的示例中，第一个选择器更具体，因为有一个额外的类型选择器`input`导致它击败第二个选择器。

每个选择器的特异性[计算](http://www.w3.org/TR/selectors/#specificity)如下：

```
/* 1 class, 1 attribute, 1 type -> specificity = 0-2-1 */
.selectform input[type="text"] { }

/* 2 classes                    -> specificity = 0-2-0 */
.selectform .inputbg { } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T05:23:06.160

一般来说，所有类型的选择器都是一样的；重要的是表达式中选择器的数量。所以 ID = 1，类 = 1，HTML 标签 = 1。

如果两个选择器具有相同的特异性，则 CSS 文件中更靠后的选择器“获胜”。因此，请确保您的 CSS 引用从通用到特定排序；像 jquery-ui.css 这样的库首先出现，而您的 CSS 文件紧随其后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-23T23:12:14.733

正如有人在这篇文章前面所说的那样“属性选择器与类具有相同的特异性”......从我的经验来看，这不是真的......我在输入 [type="text"] 之后使用了一个类名并且它不会覆盖以前的 CSS。这是违反直觉的，因为 input[type="text"] 听起来很宽泛。您必须使用一个 ID 来覆盖它，如果您正在为表单进行输入，那么无论如何您都应该有一个 ID 以正确连接标签。

# c# - 保存选中的框 C#

> ID：11406954
> 
> 赞同：0
> 
> 时间：2012-07-10T05:09:57.167
> 
> 标签：c#, forms

嗨，我正在制作一个表格，人们可以在其中选中复选框以查看他们已经阅读了哪些项目。如何在不为每个复选框经历大量循环的情况下保存复选框？（总共有 66 个盒子）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T05:14:59.147

您可以使用 Linq 优雅地遍历复选框：

```
var checkBoxes = Controls.OfType<CheckBox>();

foreach (var chk in checkBoxes)
{
    // Save state
} 
```

`Dictionary<string, bool>`保存状态的一种简单方法是使用控件名称作为键将选中状态置于 a中。将字典序列化为文件。

所以，

```
// Save state 
```

可能看起来像这样：

```
Dictionary<string, bool> state = new Dictionary<string, bool>();

var checkBoxes = Controls.OfType<CheckBox>();

foreach (var chk in checkBoxes)
{
    if (!state.ContainsKey(chk.Name))
    {
        state.Add(chk.Name, chk.Checked);
    }
    else 
    {
        state[chk.Name] = chk.Checked;
    }
} 
```

然后，只需`state`使用您最喜欢的支持通用字典的序列化程序进行序列化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T05:16:58.547

充实我所做的评论，假设所有复选框都在一个控件（表单或面板）上，我称之为“父级”。

```
 foreach (CheckBox child in parent.Controls)
    {
        if (child == null) // Skip children that are not Checkboxes
          continue;
        // Save the child Checkbox
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T05:14:38.710

您不能序列化表单。如果您有一个在选中或未选中复选框时跟踪的类运行，您可以将其序列化。然后反序列化它以重建表单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T05:16:10.250

您可以使用[CheckedListbox](http://msdn.microsoft.com/en-us/library/system.windows.forms.checkedlistbox.aspx)。通过使用[CheckedListBox.CheckedItems](http://msdn.microsoft.com/en-us/library/system.windows.forms.checkedlistbox.checkeditems.aspx)属性，您只能获取选中的项目。

```
private void WhatIsChecked_Click(object sender, System.EventArgs e) {
    // Display in a message box all the items that are checked.

    // First show the index and check state of all selected items.
    foreach(int indexChecked in checkedListBox1.CheckedIndices) {
        // The indexChecked variable contains the index of the item.
        MessageBox.Show("Index#: " + indexChecked.ToString() + ", is checked. Checked state is:" +
                        checkedListBox1.GetItemCheckState(indexChecked).ToString() + ".");
    }

    // Next show the object title and check state for each item selected.
    foreach(object itemChecked in checkedListBox1.CheckedItems) {

        // Use the IndexOf method to get the index of an item.
        MessageBox.Show("Item with title: \"" + itemChecked.ToString() + 
                        "\", is checked. Checked state is: " + 
                        checkedListBox1.GetItemCheckState(checkedListBox1.Items.IndexOf(itemChecked)).ToString() + ".");
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T05:17:19.287

您可以处理 CheckBox 的`CheckedChanged`事件并相应地更新您的局部变量（或列表）。这样，您将始终知道`CheckState`每个复选框，而不必每次都进行迭代。

```
 CheckBox box = new CheckBox();
    box.CheckedChanged += new EventHandler(box_CheckedChanged);

    // Event Handler
    void box_CheckedChanged(object sender, EventArgs e)
    {
        if (sender is CheckBox)
        {
            CheckBox cb = (CheckBox)sender;
            bool checkState = cb.Checked;
        }
    } 
```

希望能帮助到你...！！

# html - 添加徽标时导航栏中的项目向上移动

> ID：11406955
> 
> 赞同：1
> 
> 时间：2012-07-10T05:10:17.143
> 
> 标签：html, css, menu, navbar

我最近开始使用 Twitter Bootstrap。创建导航栏时，当我添加徽标时，我的登录项会向上移动，而不是居中。

这是在栏的最左侧添加徽标的外观（您看不到图片中的徽标）。我希望“登录”项目位于黑色导航栏的中间。有任何想法吗？它看起来像徽标将条向下拉伸，在下面留下黑色空间，这可能是我的垂直分隔线没有到达底部的另一个原因。

这是一张图片：http: [//i.imgur.com/hL3nQ.png](http://i.imgur.com/hL3nQ.png)

这是导航栏代码：

```
<div class="navbar navbar-fixed-top">
<div class="navbar-inner">
<div class="container"><!-- Collapsable nav bar -->
<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</a>

<!-- Your site name for the upper left corner of the site -->
<a class="brand"><img name="" src="logo.png"  alt=""></a>

<!-- Start of the nav bar content -->
<div class="nav-collapse"><!-- Other nav bar content -->

<!-- The drop down menu -->
<ul class="nav pull-right">
<li class="divider-vertical"></li>
<li class="drop down">
<a class="dropdown-toggle" href="#" data-toggle="dropdown">Log In <strong     
class="caret"></strong></a>
<div class="dropdown-menu" style="padding: 15px; padding-bottom: 0px;">
<!-- Login form here -->
<form action="CheckLogin.php" method="post" accept-charset="UTF-8">
<input id="username" style="margin-bottom: 15px;" type="text" name="username" size="30"
placeholder="Email"/>
<input id="password" placeholder="Password" style="margin-bottom: 15px;" 
type="password" name="password" size="30" />
<input id="user_remember_me" style="float: left; margin-right: 10px;" type="checkbox" 
name="user[remember_me]" value="1" />
<label class="string optional" for="user_remember_me"> Remember me</label>

<input id = "submit" name = "submit" class="btn btn-primary" style="clear: left; width:
 100%; height: 32px; font-size: 13px;" type="submit" value="Log in" />
</form>
</div>
</li>
</ul>
</div>
</div>
</div>
</div> 
```

编辑：添加这个 CSS 规则可以修复它，但是还有其他解决方案吗？

```
.nav li
{
padding-top:5px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:11:12.480

垂直居中是一种痛苦——有很多方法可以做到这一点，但对于你的情况来说它会不必要地复杂，所以不推荐。最好给导航一个固定的高度，然后明确地移动按钮或徽标（例如，按照您的建议使用顶部填充），以便一切都正确居中。

沿着这些思路还有其他可能的解决方案：

1.  使用不会在导航栏下延伸的较小版本的徽标图像。

2.  使用 CSS 将徽标图像的大小设置为明显小于当前的大小（高度：30px；）。

3.  使用 CSS 将导航设置为固定高度并添加溢出：隐藏，以便图像不会溢出。（高度：30px；溢出：隐藏；）。

# c# - 如何使用正则表达式查找单词的完全匹配但忽略带有介词的相同文本？C＃

> ID：11406961
> 
> 赞同：0
> 
> 时间：2012-07-10T05:10:47.690
> 
> 标签：c#, regex

嗨，我一直在使用 DXF 文件，但在正则表达式方面遇到了一些麻烦。我有一些这样的文字

```
 BODY
   123
   abc
   GR-BODY
   attrib
   AcdbLine 
```

我已经写了一些应该可以工作的正则表达式，但显然我仍然需要这个正则表达式的帮助

这是我的代码

```
string[] tmp = Regex.Split(originalString, @"(3DFACE|3DSOLID|ACAD_PROXY_ENTITIY|ARC|ATTDEF|ATTRIB|BODY|CIRCLE|DIMENSION|ELLIPSE|HATCH|HELIX|IMAGE|INSERT|LEADER|LIGHT|LWPOLYLINE|MLINE|MLEADERSTYLE|MLEADER|MTEXT|OLEFRAME|OLE2FRAME|POINT|POLYLINE|RAY|REGION|SEQEND|SHAPE|SOLID|SPLINE|SUN|SURFACE|TABLE|TEXT|TOLERANCE|TRACE|UNDERLAY|VERTEX|VIEWPORT|WIPEOUT|XLINE|LINE)", RegexOptions.None); 
```

我只想抓住 BODY 文本，但 GR-BODY 仍然包括在内，如何排除 GR-BODY？谢谢

编辑 1 对不起，我之前找错了代码

嗯我想要这样的输出

```
tmp[0] = BODY
tmp[1] = 123\nabc\nGR-LINE\nattrib\nAcdbLine 
```

因为我的代码只能这样

```
tmp[0] = BODY
tmp[1] = 123\nabc\nGR-
tmp[2] = BODY\nattrib\nAcdbLine 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:27:44.833

That regex statement should work. Try using **Regex.Matches** to return a **MatchCollection** instead.

```
 MatchCollection mc = Regex.Matches(originalString, @"(3DFACE|3DSOLID|ACAD_PROXY_ENTITIY|ARC|ATTDEF|ATTRIB|BODY|CIRCLE|DIMENSION|ELLIPSE|HATCH|HELIX|IMAGE|INSERT|LEADER|LIGHT|LWPOLYLINE|MLINE|MLEADERSTYLE|MLEADER|MTEXT|OLEFRAME|OLE2FRAME|POINT|POLYLINE|RAY|REGION|SEQEND|SHAPE|SOLID|SPLINE|SUN|SURFACE|TABLE|TEXT|TOLERANCE|TRACE|UNDERLAY|VERTEX|VIEWPORT|WIPEOUT|XLINE|LINE)", RegexOptions.None);
   string[] tmp = mc.Cast<Match>().Select(m => m.Value).ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T08:24:28.050

如果你的单词总是从一行的开头到结尾，那么告诉这个模式：

```
string[] tmp = Regex.Split(originalString, @"^(3DFACE|3DSOLID|ACAD_PROXY_ENTITIY|ARC|ATTDEF|ATTRIB|BODY|CIRCLE|DIMENSION|ELLIPSE|HATCH|HELIX|IMAGE|INSERT|LEADER|LIGHT|LWPOLYLINE|MLINE|MLEADERSTYLE|MLEADER|MTEXT|OLEFRAME|OLE2FRAME|POINT|POLYLINE|RAY|REGION|SEQEND|SHAPE|SOLID|SPLINE|SUN|SURFACE|TABLE|TEXT|TOLERANCE|TRACE|UNDERLAY|VERTEX|VIEWPORT|WIPEOUT|XLINE|LINE)$", RegexOptions.Multiline); 
```

这应该会给你你期望的输出。

`^`使用选项**时**匹配行首`Multiline`

`$`使用选项时匹配行**尾**`Multiline`

# javascript - jQuery：计算可见元素 - 效率/速度问题

> ID：11406964
> 
> 赞同：5
> 
> 时间：2012-07-10T05:11:07.770
> 
> 标签：javascript, jquery, children, visible

我有一些工作正常的代码，但它变得太慢了：

HTML：

我有一个包含大约 50 个`ul`元素的容器。每个`ul`元素都有一个`h4`标题，后跟一系列`li`元素。如果没有可见的线元素，该函数将隐藏标题。

Javascript/jQuery：

```
 function show_or_hide_headings() {
                $('#container').children('ul').each(function (i) {
                    var $this = $(this),
                        $h4 = $this.children(':first');
                    if ($this.children('li:visible').length) {
                        $h4.show();
                    } else {
                        $h4.hide();
                    }
                }); 
            } 
```

在我改变`li`元素的性质之前，它的工作非常可接受。每个`li`现在都是一个迷你桌子，包括`<table><tr><td>icon</td><td>text</td></tr></table>`. 现在需要 2 秒来处理，而之前它只需要不到半秒的时间。（该表用于停止图标下的文本换行。）

我承认我不太明白为什么在每个元素中添加额外的元素`li`会大大减慢 DOM 处理，因为我使用`.children`选择器只深入一层 DOM。

我也试过：

```
 $('#container').find('h4').each(function (i) {
                    var $this = $(this);
                    if ($this.siblings('li:visible').length) {
                       $this.show();
                    } else {
                       $this.hide();
                    }
                }); 
```

并`$('#container').children().children('h4')`为良好的措施。

同样值得注意的是，当`li`可见元素很多时，它比可见元素少时慢得多。然而，现在没有更多的行了，而不是它工作得很快（即，在表格被放入每一行之前）。

任何建议都非常感谢，但请不要要求我发布比我更多的代码:)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T05:33:50.543

尝试：

```
$('h4', '#container').css('display', 'none').filter(function() {
    return $(this).siblings('li:visible').length;
}).css('display', 'block'); 
```

但我同意 RobG，您的标记可能不正确。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T05:37:41.417

I suspect that determining if an element is visible or not is quite expensive. Consider instead adding and deleting a class to hide or show elements. Then you can select them directly based on the class, which will mostly be supported by a host *getElementsByClassName* or *querySelectorAll* method.

# c# - 网页中文本之间的空格问题

> ID：11406966
> 
> 赞同：2
> 
> 时间：2012-07-10T05:11:11.903
> 
> 标签：c#, regex, webpage

我试图使用正则表达式删除文本之间的空格。下面的输入字符串呈现在网页上。

```
string inputString = "あさ9：30 - よる10：00";
Regex Spaces = new Regex(@"\s+");
string s = Spaces.Replace(inputString, string.Empty); 
```

正则表达式模式不适用于输入字符串。9:30 和 10:00 之间的空间看起来不像是空白。不知道是什么样的空间。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T05:21:03.960

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-10T05:14:18.247

你有没有试过做一个简单的`replace(" ","")`？当正则表达式不起作用时，这通常对我有用。

# time - MDX：聚合使用命名集（过去 7 天）

> ID：11406968
> 
> 赞同：0
> 
> 时间：2012-07-10T05:11:25.583
> 
> 标签：time, mdx

我已经建立了一个 DataCalculation 维度，它应该有一个基于时间的计算。它应该为过去 7 天、并行期间等的每个度量值求和。我已经为过去 7 天建立了一个命名集：

```
CREATE  SET CURRENTCUBE.[Last 7 days]
AS {
StrToMember(Cstr("[Dmn_Dates].[date calc].&["+
Cstr(Format(Now(),"yyyy-MM-dd")) +"T00:00:00]"))
:
StrToMember(Cstr("[Dmn_Dates].[Date calc].&["+
Cstr(Format(Now()-7,"yyyy-MM-dd")) +"T00:00:00]"))
}; 
```

然后尝试在计算成员上使用它： create member currentcube.[Dmn_ DateTool].[Date Tool].[Last 7 Days_] as

```
aggregate(
{
StrToMember(Cstr("[Dmn_Dates].[date calc].&["+
Cstr(Format(Now(),"yyyy-MM-dd")) +"T00:00:00]"))
:
StrToMember(Cstr("[Dmn_Dates].[Date calc].&["+
Cstr(Format(Now()-7,"yyyy-MM-dd")) +"T00:00:00]"))
}
,([Dmn_ DateTool].[Date Tool].[regular],measures.LeadCounter))
, visible = 1; 
```

它不起作用。我得到的是一个计算出来的成员 [过去 7 天]，它显示的值与常规值相同。

感谢阅读直到这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:44:12.337

我会检查生成的集合有效性以及它是否包含正确的成员；某事喜欢：

```
select [Last 7 days] on 0 ... 
```

也许你必须颠倒 from/to : Now() - 7 : Now 而不是 Now() : Now() - 7 ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T06:28:39.383

当您在像 member1: member2 这样的表达式中使用[Range 运算符](http://msdn.microsoft.com/en-us/library/ms146001.aspx)时，member1 必须按层次顺序排在 member2 之前。否则范围运算符将返回一个空集。

此外，您必须确保您的表达式`StrToMember(Cstr("[Dmn_Dates].[date calc].&["+Cstr(Format(Now(),"yyyy-MM-dd")) +"T00:00:00]"))`真的返回一个现有成员： **null:null**返回空集。

# jakarta-ee - Weld TransactionServices，如何注册？

> ID：11406971
> 
> 赞同：1
> 
> 时间：2012-07-10T05:11:40.373
> 
> 标签：jakarta-ee, junit, cdi, jta, jboss-weld

我正在尝试使用 CDI/Weld 和 JEEUnit 进行 junit 测试。我在启动时收到此消息：

```
189 [main] INFO org.jboss.weld.Bootstrap - WELD-000101 Transactional services not available. Injection of @Inject UserTransaction not available. Transactional observers will be invoked synchronously. 
```

后来，当我打电话时，Entitymanager 失败了，`em.flush()`因为他们希望事务处于活动状态。是否有可用于 JUnit 测试的轻量级事务实现？

编辑：

我最终使用了 GuiceRunner。这非常简单...... [http://fabiostrozzi.eu/2011/03/27/junit-tests-easy-guice/](http://fabiostrozzi.eu/2011/03/27/junit-tests-easy-guice/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:25:25.913

要通过 INFO 消息，您需要在类路径中包含 jta api，但随后您将遇到实际上没有实时事务的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T06:16:10.297

您可以在单元测试中使用[openEJB](http://openejb.apache.org/)，这应该可以按预期工作。

***但是***：一旦您在测试中需要事务（又名“平台服务”），我就会开始将其称为*集成测试*——在这种情况下，我建议使用 [Arquillian](http://www.jboss.org/arquillian.html)进行轻量级的容器测试。您将能够针对*自己的基础设施*进行测试，并使用真实世界的设置，例如。交易。

**更新**：我忽略了您已经在使用 JEEUnit。这使我的答案非常过时...

# git - 如何在 GIT 中更新我的主题分支？

> ID：11406974
> 
> 赞同：1
> 
> 时间：2012-07-10T05:11:49.820
> 
> 标签：git, github, git-svn

我有 master 分支（它是工作副本），然后某个时间点我创建了另一个名为 topic 的分支并在其下工作。

但是昨天我确实在 master 分支上进行了 rebase。现在，当我构建我的项目时，它可以在 master 分支中构建，但不能在主题分支中构建。

谁能指导我有什么问题？有人建议我确实需要跟上最新的主题分支。没有把握; 在什么方面是最新的（主或远程）？我该怎么做？

我用谷歌搜索；但是，哪个命令会拯救我有意义吗？

我感谢你的 vm in adv。

详细说明：我的主分支（master_branch）是进化的；但是我的本地分支（topic_branch）确实只包含我所做的特定提交。因此，master 分支（master_branch）中的一些最新更改是与其他 repo 集成所必需的；因此我的构建在 topic_branch 中失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:20:22.623

好吧，您没有提供很多关于您的错误的信息，但是如果您成功地针对 master 重新设置基础，那么您的主题分支是最新的。但是最新的并不一定意味着工作，我的猜测是 master 分支中的最新更改与您的主题分支中的更改不兼容。因为主分支可以构建但主题分支不能，所以问题出在主题分支的某个地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:39:56.047

你说你“确实在主分支上变基”。如果您的意思是，在主分支上工作时，您运行了“git rebase $other_thing”，那么您可能需要切换到您的主题分支并在那里运行“git rebase master”。否则，您的主题分支将低于您的主分支。

# aix - AIX 是否有某种基于内存的存储引擎（解决方案）？

> ID：11406976
> 
> 赞同：-1
> 
> 时间：2012-07-10T05:11:53.397
> 
> 标签：aix

我想知道是否有任何解决方案或引擎可以用作 AIX 的基于内存的存储（类似 memcached）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-26T00:03:22.160

我已经为 AIX 编译了 memcached。还有redis。还有东京内阁。可能还有其他一些人。

AIX 没有任何“内置”功能。

# java - 什么是 Java bean？

> ID：11406977
> 
> 赞同：37
> 
> 时间：2012-07-10T05:11:55.367
> 
> 标签：java, javabeans

> **可能重复：**
> [豆子有什么意义？](https://stackoverflow.com/questions/4275897/whats-the-point-of-beans)

什么是javabean？它是干什么用的？还有哪些代码示例？我听说它用于与 getter 和 setter 方法有关的事情？我对 java bean 是什么以及你在哪里访问它感到很困惑。我用谷歌搜索了它，但找不到明确的答案。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-07-10T05:15:53.443

Java Bean 是一个普通的 Java 类，它具有私有属性及其公共 getter 和 setter 方法。

Java Beans 通常用作帮助类。

例子 -

```
public class User implements java.io.Serializable {

    private String name;
    private Integer age;

    public String getName(){
        return this.name;
    }

    public void setName(String name){
        this.name = name;
    }

    public Integer getAge(){
        return this.age;
    }

    public void setAge(Integer age){
        this.age = age;
    }
} 
```

实现`Serializable`不是强制性的，但如果您想将 Javabeans 持久化或传输到 Java 内存之外，例如在硬盘中或通过网络，实现是非常有用的。

[使用JavaBeans的地方？](https://stackoverflow.com/questions/1727603/places-where-javabeans-are-used)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-07-10T05:18:25.830

JavaBean 是 Java 的可重用软件组件。实际上，它们是用符合特定约定的 Java 编程语言编写的类。它们用于将许多对象封装到单个对象（bean）中，以便它们可以作为单个 bean 对象而不是多个单独的对象传递。JavaBean 是可序列化的 Java 对象，具有 0 参数构造函数，并允许使用 getter 和 setter 方法访问属性。

优点

*   一个 Bean 获得了 Java 的“一次编写，随处运行”范式的所有好处。
*   可以控制暴露给另一个应用程序的 Bean 的属性、事件和方法。
*   可以提供辅助软件来帮助配置 Bean。
*   Bean 的配置设置可以保存在持久存储中，并且可以在以后恢复。
*   一个 Bean 可以注册以接收来自其他对象的事件，并且可以生成发送给它的事件。

缺点

*   具有空构造函数的类可能会在无效状态下被实例化。如果这样的类是由开发人员手动实例化的（而不是由某种框架自动实例化），开发人员可能不会意识到他已将类实例化为无效状态。编译器无法检测到此类问题，即使已记录在案，也不能保证开发人员会看到文档。
*   必须为每个属性创建一个 getter 并为许多、大多数或所有属性创建一个 setter，这会产生大量的样板代码。

例子 ：

```
package beans;

/**
 * Class <code>PersonBean</code>.
 */
public class PersonBean implements java.io.Serializable {

    private String name;

    private boolean deceased;
    static final long serialVersionUID = 1L;

    /** No-arg constructor (takes no arguments). */
    public PersonBean() {
    }

    /**
     * Property <code>name</code> (note capitalization) readable/writable.
     */
    public String getName() {
        return this.name;
    }

    /**
     * Setter for property <code>name</code>.
     * @param name
     */
    public void setName(final String name) {
        this.name = name;
    }

    /**
     * Getter for property "deceased"
     * Different syntax for a boolean field (is vs. get)
     */
    public boolean isDeceased() {
        return this.deceased;
    }

    /**
     * Setter for property <code>deceased</code>.
     * @param deceased
     */
    public void setDeceased(final boolean deceased) {
        this.deceased = deceased;
    }
} 
```

参考[http://en.wikipedia.org/wiki/JavaBeans](http://en.wikipedia.org/wiki/JavaBeans)

根据@Andy 的评论，我接受我们应该声明serialVersionUID。根据[Java 文档](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/Serializable.html)

`If a serializable class does not explicitly declare a serialVersionUID, then the serialization runtime will calculate a default serialVersionUID value for that class based on various aspects of the class, as described in the Java(TM) Object Serialization Specification. However, it is strongly recommended that all serializable classes explicitly declare serialVersionUID values, since the default serialVersionUID computation is highly sensitive to class details that may vary depending on compiler implementations, and can thus result in unexpected InvalidClassExceptions during deserialization. Therefore, to guarantee a consistent serialVersionUID value across different java compiler implementations, a serializable class must declare an explicit serialVersionUID value. It is also strongly advised that explicit serialVersionUID declarations use the private modifier where possible, since such declarations apply only to the immediately declaring class--serialVersionUID fields are not useful as inherited members. Array classes cannot declare an explicit serialVersionUID, so they always have the default computed value, but the requirement for matching serialVersionUID values is waived for array classes.`

**如果您没有明确指定 serialVersionUID，则会自动生成一个值 - 但这很脆弱，因为它依赖于编译器实现。**

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-10T05:23:16.193

Well, the JavaBean API defines a number of conventions regarding to JavaBeans. According to Wikipedia:

> The required conventions are as follows:
> 
> *   The class must have a public default constructor (no-argument). This allows easy instantiation within editing and activation frameworks.
> *   The class properties must be accessible using get, set, is (used for boolean properties instead of get) and other methods (so-called accessor methods and mutator methods), following a standard naming convention. This allows easy automated inspection and updating of bean state within frameworks, many of which include custom editors for various types of properties. Setters must receive only one argument.
> *   The class should be serializable. It allows applications and frameworks to reliably save, store, and restore the bean's state in a fashion independent of the VM and of the platform.

Quite often, these are the most common types of classes that can be found in an application, as they can be used to model the data that is used. An example of such a bean can be seen below:

```
public class Person implements Serializable
{
  private String name;
  private boolean alive;

  public Person()
  {
    // constructor logic...
  }

  public String getName()
  {
    return name;
  }

  public void setName(String name)
  {
    this.name = name;
  }

  public boolean isAlive()
  {
    return alive;
  }

  public void setAlive(boolean alive)
  {
    this.alive = alive;
  }
} 
```

As you can see, properties are reflected in the getters and setters.

HTH

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T05:18:29.700

如果您在谈论**java-beans 而不是 EJB Beans**，那么这里是解释......

**1.** JavaBean 有一个不带参数的构造函数。

**2.** JavaBean 有一组属性。

**3.** JavaBean 具有允许访问其底层属性的访问器（getXxx，或布尔属性的 isXxx）方法和修改器方法（setXxx）。

**第三点说明了一个带有私有实例变量和公共 getter、setter 的 java 类。**

例如：

```
import java.util.Date;

public class User {
    private Date loginDate;
    private String name;
    private String password;

    public User() { }

    public Date getLoginDate() {
        return loginDate;
    }

    public String getName() {
        return name;
    }

    public String getPassword() {
        return password;
    }

    public void setLoginDate(Date loginDate) {
        this.loginDate = loginDate;
    }

    public void setName(String name) {
        this.name = name;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public void delete() {
        // code to delete user from database
    }

    public void update() {
        // code to update user in database
    }

    public static User getUser(String name) {
        // code returning a new User object
        // populated from the database
    }
} 
```

# java - 我在哪里可以看到我的程序中的日志

> ID：11406978
> 
> 赞同：1
> 
> 时间：2012-07-10T05:12:05.320
> 
> 标签：java, logging

我正在使用默认`java.util.Logging` [API](http://docs.oracle.com/javase/6/docs/api/java/util/logging/Logger.html)将信息打印到我的日志中。

```
Logger.getLogger(Datastore.class.getName());
logger.info("Registering "); 
```

其中 Datastore 是类的名称。但我无法找到日志的存储位置。我在 Windows 7 机器上运行，上面的程序是 servlet 的一部分。我为这个看似愚蠢的问题道歉，但有时这种微不足道的事情会极大地阻碍进展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:23:46.600

您可以向 Logger 添加一个处理程序，以指定日志的位置。

```
Handler handler = new FileHandler("DataStore.log");
Logger logger = Logger.getLogger(Datastore.class.getName());
logger.addHandler(handler);
logger.info("Registering "); 
```

记录器仅创建日志对象，但实际显示它的是处理程序。处理程序可以是从[Handler](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/logging/Handler.html)定义的任何子类。如果您使用 FileHandler，您应该阅读[FileHandler](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/logging/FileHandler.html)的 Java API 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T05:41:27.397

默认情况下，`java.util.logging.Logger`发送输出到控制台并且不打印到文件中。您必须向`java.util.logging.Handler`Logger 添加一个。下面是创建 HTML 处理程序的片段，TEXTFILE。希望这可以帮助。

```
package logging;

import java.io.IOException;
import java.util.logging.FileHandler;
import java.util.logging.Formatter;
import java.util.logging.Level;
import java.util.logging.Logger;
import java.util.logging.SimpleFormatter;

public class MyLogger {
    static private FileHandler fileTxt;
    static private SimpleFormatter formatterTxt;

    static private FileHandler fileHTML;
    static private Formatter formatterHTML;

    static public void setup() throws IOException {
        // Create Logger
        Logger logger = Logger.getLogger("");
        logger.setLevel(Level.INFO);
        fileTxt = new FileHandler("Logging.txt");
        fileHTML = new FileHandler("Logging.html");

        // Create txt Formatter
        formatterTxt = new SimpleFormatter();
        fileTxt.setFormatter(formatterTxt);
        logger.addHandler(fileTxt);

        // Create HTML Formatter
        formatterHTML = new MyHtmlFormatter();
        fileHTML.setFormatter(formatterHTML);
        logger.addHandler(fileHTML);
    }
} 
```

如需进一步参考，请阅读[本文](http://www.vogella.com/articles/Logging/article.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T05:18:36.383

检查 log4j 配置文件，该文件将包含更新日志位置的路径。[检查此以供参考](https://stackoverflow.com/questions/216781/log4j-configuring-a-web-app-to-use-a-relative-path)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T05:24:51.513

如果您没有 log4j 配置文件（假设 Logger 来自 log4j），事情会变得非常安静。

对于初学者，请尝试在 classes 目录的根目录中添加属性文件，例如：

```
# Set root logger level to DEBUG and its only appender to A1.
log4j.rootLogger=DEBUG, A1

# A1 is set to be a ConsoleAppender.
log4j.appender.A1=org.apache.log4j.ConsoleAppender

# A1 uses PatternLayout.
log4j.appender.A1.layout=org.apache.log4j.PatternLayout
log4j.appender.A1.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n 
```

来自[这里](http://logging.apache.org/log4j/1.2/manual.html)

# drupal - 如何将我的域指向 drupal 文件夹？

> ID：11406980
> 
> 赞同：-2
> 
> 时间：2012-07-10T05:12:27.743
> 
> 标签：drupal, dns, directory, point

我的网站是 www.minnerva.webege.com 我的域名是 minnerva.co.nr

在安装 drupal 期间，指南说我需要将我的域名指向 drupal 文件夹。检查[http://drupal.org/documentation/install/beginners](http://drupal.org/documentation/install/beginners) 在下载drupal下，第三个子点。我的 ISP 不允许我这样做，所以我搜索了一个免费域名并想继续。

我已经创建了一个 drupal 文件夹，但我不知道如何将我的域名指向该文件夹？请帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:17:54.787

只需将文件夹名称放在域名末尾即可。

> minnerva.co.nr/drupal_folder_name

# ios - 在 iOS 中切片图像

> ID：11406982
> 
> 赞同：2
> 
> 时间：2012-07-10T05:12:33.640
> 
> 标签：ios, image

我目前正在寻找一种将图像（例如从照片库中抓取的图像）切成许多不同矩形块的方法。有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T05:52:15.123

```
CGImageRef topLeftImageRef = CGImageCreateWithImageInRect(originalImage.CGImage, CGRectMake(0,0,originalImage.size.width/2,originalImage.size.height/2));

UIImage *topLeftImage = [UIImage imageWithCGImage:topLeftImageRef]; 
```

# python - 在脚本目录外的文件夹中打开 PIL Image

> ID：11406990
> 
> 赞同：0
> 
> 时间：2012-07-10T05:13:02.167
> 
> 标签：python, image, file-io, directory, python-imaging-library

我有一个 script.py 位于名为 subfolder1 的文件夹中。该文件夹位于名为 mainfolder 的文件夹中。主文件夹内还有另一个文件夹，称为 subfolder2。我希望 script.py 在 subfolder2 中打开图像并进行一些裁剪等，但我不知道如何正确获取目录。我试过了：

```
import os
rel = "../subfolder2/1.bmp"
impath = os.path.abspath(rel)
im = Image.open(impath) 
```

但是出现错误信息：

```
IOError: [Errno 2] No such file or directory: 'C:\\Users\\****\\Desktop\\mainfolder\\subfolder2\\1.bmp' 
```

顺便说一句，我正在使用 Windows。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T06:04:33.580

如果您的目录结构如下所示：

```
mainfolder/
    subfolder1/
        script.py
    subfolder2/
        1.bmp 
```

...然后你可以构造一个相对于`script.py`. 现在，您只使用相对于您启动 shell 命令的当前工作的路径。

你可以这样做：

```
import os
scriptDir = os.path.dirname(__file__)
impath = os.path.join(scriptDir, '../subfolder2/1.bmp') 
```

`__file__`是模块中的内置属性，它告诉您该模块的文件系统路径。

# android - 数据库中的语法错误

> ID：11406993
> 
> 赞同：-1
> 
> 时间：2012-07-10T05:13:22.300
> 
> 标签：android, database

在我的应用程序中，我创建了一个数据库（在使用组字段之前它工作正常）。现在我想再创建一个字段（称为组）。我创建了该字段。但显示以下错误：

```
android.database.sqlite.SQLiteException: near "group": syntax error: create table incomexpense(_id integer primary key autoincrement,price text not null,description text not null,quantity text not null,total text not null,category text not null,recurrence text not null,date text not null,group text not null); 
```

我的创建命令：

```
"create table incomexpense(_id integer primary key autoincrement,"+"price text not null,description text not null,"+"quantity text not null,"+"total text not null,"+"category text not null,"+"recurrence text not null,"+"date text not null,"+"group text not null);"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T05:15:31.640

`group`是一个关键字，因此不应在创建表时使用它。

# html - HTML 选择框列表大小计数

> ID：11406998
> 
> 赞同：1
> 
> 时间：2012-07-10T05:13:59.167
> 
> 标签：html, drop-down-menu

是否可以控制选择框下拉大小？实际上，一个名为**SIZE**的属性已经存在。但我的要求是，当我单击该选择框时，会填充选项，在该列表中我可以控制大小..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T05:58:02.193

试试这个。我想这就是你要找的。

```
<select name="select1" onmousedown="if(this.options.length>5){this.size=5;}" onchange="this.size=0;" onblur="this.size=0;" style="position: absolute">
<option>a</option>
<option>b</option>
<option>c</option>
<option>d</option>
<option>e</option>
<option>f</option>
<option>g</option>
<option>h</option>
<option>i</option>
<option>j</option>
<option>k</option>
<option>l</option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T05:26:31.357

使用它，您将能够限制大小。

```
<select name="select" id="select" size="2" >
<option>a</option>
<option>b</option>
<option>c</option>
<option>d</option>
<option>e</option>
</select> 
```