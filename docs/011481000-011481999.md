# StackOverflow 问答 11481000-11481999

# grails - 如何为 Grails 域类中的两个字段创建和异或验证？

> ID：11481000
> 
> 赞同：5
> 
> 时间：2012-07-14T04:20:38.553
> 
> 标签：grails, grails-domain-class, grails-validation

我有一个问题，我的域类有两个潜在的互斥外部键，一个序列号或一个旧的查找值。

由于我不确定任何给定条目将具有哪一个，因此我将它们设为可空并添加了自定义验证以确保我只有一个值。

```
package myproject 

class Sample {

    String information
    String legacyLookup
    String serialNumber

    static constraints = {
        information(nullable: true)
        legacyLookup(nullable: true)
        serialNumber(nullable: true)

        legacyLookup validator: {
            return ((serialNumber != null && legacyLookup == null) || (serialNumber == null && legacyLookup != null))
        }

        serialNumber validator: {
            return ((serialNumber != null && legacyLookup == null) || (serialNumber == null && legacyLookup != null))
        }
    }
} 
```

我创建了默认的 CRUD 屏幕并尝试为此域类创建一个条目

```
information: Blah Blah
serialNumber: 
legacyLookup: BLAHINDEX123 
```

这在验证器中死亡，并显示以下消息：

```
No such property: serialNumber for class: myproject.Sample 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-14T06:20:13.833

无需多次将每个属性都放在其中；实际上，您只需要其中一个实际受约束。此外，您不能只通过名称直接引用属性。有些对象传递给约束闭包，用于获取值（请参阅[文档](http://grails.org/doc/latest/ref/Constraints/validator.html)）。可能我发现的最简单的方法如下：

```
class Sample {
    String information
    String legacyLookup
    String serialNumber

    static constraints = {
        information(nullable: true)
        legacyLookup(validator: {val, obj->
            if( (!val && !obj.serialNumber) || (val && obj.serialNumber) ) {
                return 'must.be.one'
            }
        })
    }
} 
```

然后在 messages.properties 文件中有一个条目，如下所示：

```
must.be.one=Please enter either a serial number or a legacy id - not both 
```

或者您可以为每个条件提供单独的消息 - 两者都输入，或者两者都是空白的，如下所示：

```
legacyLookup(validator: {val, obj->
    if(!val && !obj.serialNumber) {
         return 'must.be.one'
    }
    if(val && obj.serialNumber) { 
         return 'only.one'
    }
}) 
```

然后在 message.properties 中有两条消息：

```
only.one=Don't fill out both
must.be.one=Fill out at least one... 
```

如果没有错误，您不需要从约束中返回任何内容......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T04:32:30.090

如果您想确保您拥有“一个且只有一个值”，另一种选择是创建一个名为的通用字段，该字段`serialNumberLegacyLookup`将同时代表`serialNumber`和`legacyLookup`字段。然后，您可以向名为的域类添加一个布尔字段，`legacyLookup`默认为`false`. 然后，您可以通过验证器运行该值并对其进行解析以查看它是“序列号”还是“旧版查找”值。如果该值原来是“旧版查找”值，那么您可以将`legacyLookup`布尔值设置为`true`. 我认为从 UI 的角度来看，这种方法不会令人困惑（用户只需填写一个字段，而不是两个条件字段）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-09-22T19:00:19.183

我遇到了同样的情况，我找到的解决方案是创建一个 getter 方法并为其添加一个约束。

```
package myproject 

class Sample {

    String information
    String legacyLookup
    String serialNumber

    def getTarget(){
        if (legacyLookup && !serialNumber) {
            return legacyLookup
        } else if (!legacyLookup && serialNumber) {
            return serialNumber
        } else {
            return null
        }
    }

    static constraints = {
        information(nullable: true)
        legacyLookup(nullable: true)
        serialNumber(nullable: true)
        target(nullable: false)
    }
} 
```

# c++ - 在 C++ 中拆分字符串

> ID：11481002
> 
> 赞同：0
> 
> 时间：2012-07-14T04:20:50.710
> 
> 标签：c++, string, split

> **可能重复：**
> [如何在 C++ 中拆分字符串？](https://stackoverflow.com/questions/236129/how-to-split-a-string-in-c)
> [C++ 拆分字符串](https://stackoverflow.com/questions/2727749/c-split-string)

如何在 C++ 中从文件中拆分一行，如下所示？

我想保存具有以下格式的游戏输出结果：

```
CFC 1 - 0 RES 
```

我有四个变量：

```
string team1;
string team2;
int goalst1;
int goalst2; 
```

如何拆分字符串，使每个对应部分都在上述四个变量中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T04:24:00.043

```
string team1;
string team2;
int goalst1;
int goalst2;
string dash;
std::cin >> team1 >> goalst1 >> dash >> goalst2 >> team2; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T04:23:57.360

你可以做这样的事情，这需要`#include <sstream>`：

```
char trash;

std::stringstream mystream(myInputString);

mystream >> team1 >> goalst1 >> trash>> goalst2 >> team2; 
```

或者

```
char trash;

std::stringstream mystream;
mystream << myInputString;

mystream >> team1 >> goalst1 >> trash>> goalst2 >> team2; 
```

编辑：这是更高级但有点整洁。将其粘贴在标题中：

```
#include <iostream>
#include <string>
#include <array>
#include <cstring>

template<class e, class t, int N>
std::basic_istream<e,t>& operator>>(std::basic_istream<e,t>& in, const e(&sliteral)[N]) {
        std::array<e, N-1> buffer; //get buffer
        in >> buffer[0]; //skips whitespace
        if (N>2)
                in.read(&buffer[1], N-2); //read the rest
        if (strncmp(&buffer[0], sliteral, N-1)) //if it failed
                in.setstate(in.rdstate() | std::ios::badbit); //set the state
        return in;
}
template<class e, class t>
std::basic_istream<e,t>& operator>>(std::basic_istream<e,t>& in, const e& cliteral) {
        e buffer;  //get buffer
        in >> buffer; //read data
        if (buffer != cliteral) //if it failed
                in.setstate(in.rdstate() | std::ios::badbit); //set the state
        return in;
}
template<class e, class t, int N>
std::basic_istream<e,t>& operator>>(std::basic_istream<e,t>& in, e(&carray)[N]) {
        return std::operator>>(in, carray);
}
template<class e, class t, class a>
std::basic_istream<e,t>& operator>>(std::basic_istream<e,t>& in, a& obj) {
        return in >> obj; //read data
} 
```

这允许您在流中执行字符串文字：

```
std::stringstream mystream(myInputString);

mystream >> team1 >> goalst1 >> '-' >> goalst2 >> team2; 
```

或者

```
std::stringstream mystream;
mystream << myInputString;

mystream >> team1 >> goalst1 >> '-' >> goalst2 >> team2; 
```

另请参阅：[sscanf() 的更安全但易于使用且灵活的 C++ 替代方案](https://stackoverflow.com/questions/9825768/safer-but-easy-to-use-and-flexible-c-alternative-to-sscanf#9832875)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T04:27:48.923

如果我做对了，您可能正在尝试从文件中读取。然后使用 ifstream，您可以像从 cin 这样的标准输入中读取文件一样读取文件。

IE

```
 ifstream myfile("filename"); 
```

现在使用 myfile 而不是 cin 运算符，你就完成了..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T15:16:12.680

我喜欢[`boost::split`](http://www.boost.org/doc/libs/1_50_0/doc/html/string_algo/reference.html#header.boost.algorithm.string.split_hpp)这样的工作：

```
#include <string>
#include <vector>

#include <boost/algorithm/string/split.hpp>

struct Result {
     std::string team1;
     std::string team2;
     unsigned goals1;
     unsigned goals2;
};

Result split(std::string const& s) {
    std::vector<std::string> splitted;
    boost::split(s, splitted, boost::token_compress_on);

    if (splitted.at(2) != "-") {
        throw runtime_error("The string format does not match");
    }

    Result r;
    r.team1 = splitted.at(0);
    r.team2 = splitted.at(4);
    r.goals1 = stoi(splitted.at(1));
    r.goals2 = stoi(splitted.at(3));

    return r;
} 
```

# c# - 为 Func 属性创建 xml 文档的推荐方法是什么

> ID：11481012
> 
> 赞同：3
> 
> 时间：2012-07-14T04:22:47.003
> 
> 标签：c#, properties, func, xml-documentation

在 c# 中记录类上的 Func 属性的参数和返回的推荐方法是什么，例如

```
public class Test
{
    /// <summary>
    /// A description of what AFunc is for.
    /// </summary>
    /// <remarks>
    /// Should I document the parameters and return here or somewhere else?
    /// </remarks>
    public Func<object, string[], bool> AFunc { get; set; }
} 
```

Visual Studio 2010 中的 Intellisense 不像为方法提供的那样在属性上提供参数或返回标记；这些仍然是最合适的标签吗？

编辑：

自从提出这个问题后，我[在 msdn 上的一些 xml 文档中](http://msdn.microsoft.com/en-US/library/5ast78ax%28v=vs.80%29)发现任何有效的 xml 都可以用来标记，所以我现在的想法是要么简单地使用参数并返回标签；或使用自定义标签并决定适当的命名？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T08:16:39.873

我建议不要依赖代码文档，而是从使您的代码对“最终开发人员”更友好开始。考虑将返回类型更改为友好命名的委托。

[http://msdn.microsoft.com/en-us/library/ms173171(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms173171(v=vs.100).aspx)

首先，这将使您的代码更加自我解释。然后，您可以使用代码文档来解释返回值的用途，而不是试图解释返回值的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T08:11:26.147

属性不使用参数，因为它们不带参数 - 您需要`typeparam`用于泛型参数。而不是`returns`，使用`value`.

# grails - 为什么我不能在 Grails 中导入这个 Groovy 库？

> ID：11481014
> 
> 赞同：1
> 
> 时间：2012-07-14T04:23:28.903
> 
> 标签：grails, groovy

我正在 grails 中创建一个服务类，它生成一个 JSON 结构并使用它对另一个服务进行 REST 调用。我正在尝试导入一些`groovy.json`类，如下所示：

```
import groovy.json.JsonBuilder
import groovy.json.JsonOutput

class SomeService {
  ...
} 
```

但是，我收到以下错误：

```
1: unable to resolve class groovy.json.JsonBuilder
  [groovyc]  @ line 1, column 1.
  [groovyc]    import groovy.json.JsonBuilder
  [groovyc]    ^ 
```

当我在 groovysh 中尝试时，似乎可以很好地导入这些类。我需要做什么才能在 Grails 中引入标准 Groovy JSON 库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T05:03:46.073

该类是在 Groovy 1.8 中引入的，直到 2.0.0+ 才在 Grails 中使用。您需要升级到 2.0.x+ 或使用不同的 JSON 库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T04:58:32.837

不知道为什么你不能导入这些类，但我不确定你是否真的需要它们。如果您只是想生成 JSON，那么创建一个 Groovy 映射可能是最简单的`render myMap as JSON`，当您使用`import grails.converters.JSON`.

[grails.converters.JSON](http://grails.org/doc/2.0.4/api/grails/converters/JSON.html)等价于[groovy.json.JsonOutput](http://groovy.codehaus.org/gapi/groovy/json/JsonOutput.html)

[grails.web.JSONBuilder](http://grails.org/doc/2.0.4/api/index.html?grails/web/JSONBuilder.html)等价于[groovy.json.JsonBuilder](http://groovy.codehaus.org/gapi/index.html?groovy/json/JsonBuilder.html)

# c# - 预期}出于某种原因

> ID：11481015
> 
> 赞同：-4
> 
> 时间：2012-07-14T04:23:51.690
> 
> 标签：c#

以下代码给了我这些错误，

} 预期的

类型或命名空间定义，或预期的文件结尾

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            Derpy merp = new Derpy();
            merp.OnDerp += new EventHandler(herp);
            void herp(object sender, EventArgs e)
            {

            }

        }

    }
} 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T04:39:04.517

**解决方案 1**：试试这个（匿名方法）：

```
merp.OnDerp += (sender, e) =>
    {
        // add your code here...
        // may be 
        // derpy = ((Derpy) sender);
        // be useful.
    }; 
```

* * *

**解决方案2**：最简单的方法：

```
 // add event handler
 merp.OnDerp += new EventHandler(herp); 
```

并使用它：

```
// this must be in class body. not in another method
void herp(object sender, EventArgs e)
{
    // add your code here...
} 
```

* * *

看到这些教训：

*   [代表和活动简介](http://www.csharp-station.com/Tutorial/CSharp/Lesson14)
*   [匿名方法如何使我受益？](http://www.csharp-station.com/Tutorial/CSharp/Lesson21)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T04:27:20.743

您收到错误是因为您试图在另一个函数中声明一个普通的命名函数，但 C# 仅支持在其他函数中声明的*匿名*函数。

要使用匿名函数：

```
private void button1_Click(object sender, EventArgs e)
{
  Derpy merp = new Derpy();
  merp.OnDerp += (sender, e) =>    
  {

  };
} 
```

或者将您的方法带到点击事件之外

```
private void button1_Click(object sender, EventArgs e)
{
  Derpy merp = new Derpy();
  merp.OnDerp += new EventHandler(herp);
}
void herp(object sender, EventArgs e)
{

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T04:26:08.887

这个：

```
private void button1_Click(object sender, EventArgs e)
{
    ...
    void herp(object sender, EventArgs e)
    {

    }
} 
```

您不能将命名函数嵌入到这样的另一个函数中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T04:28:19.937

权利将是

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            Derpy merp = new Derpy();
            merp.OnDerp += new EventHandler(herp);

        }
        private void herp(object sender, EventArgs e)
        {

        }

    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-14T04:26:22.710

看起来像代码

```
void herp(object sender, EventArgs e)
{
} 
```

也许最好成为一种方法本身。我不认为 C# 支持像 JavaScript 这样的方法中的方法

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-14T04:37:35.873

在您的代码中找到嵌套方法，而**C#**不支持它。

**利用：**

```
private void button1_Click(object sender, EventArgs e)
{
     Derpy merp = new Derpy();
     merp.OnDerp += new EventHandler(herp);

}

void herp(object sender, EventArgs e)
{

} 
```

# html - 在后端录制 HTML5 WebGL 的视频

> ID：11481023
> 
> 赞同：3
> 
> 时间：2012-07-14T04:25:46.460
> 
> 标签：html, node.js, webgl, backend

对于不支持 HTML5 WebGL 的浏览器，是否可以录制 HTML5 WebGL 视频播放的视频（包括声音）？例如，是否可以在后端以大多数浏览器/设备都能接受的格式记录 SeriouslyJS (http://seriouslyjs.org/) 内容？

我做了很多后端的事情，但从来没有涉及后端 GUI 的任何事情......我感谢任何人可以给我的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:24:55.940

这个问题的答案可能[在这篇博](http://www.oampo.co.uk/2011/01/exporting-video-from-webgl/)文中。作者使用 canvas.toDataURL() 方法将每一帧发送到他创建的一个简单的 node.js 实例。node.js 实例将每个帧保存为 PNG 文件。保存所有帧后，作者似乎使用[ffmpeg](http://ffmpeg.org/)之类的东西从图像中生成视频。然后，您可以将此视频作为实际动画的替代品。这是一个很好的解决方法，但似乎对作者来说效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T14:50:51.377

您可以使用截屏软件（例如[ScreenFlow](http://www.telestream.net/screen-flow/)）录制一个或多个静态视频，然后将其作为视频呈现给未启用的浏览器。在 JavaScript 方面，您需要“退回”到视频。伪代码随之而来：

```
var canvas = document.getElementByID('webgl-canvas');
var webgl = canvas.getContext("experimental-webgl");
if (!webgl) {
  /*
    create a <video> element and replace the <canvas>
    tag with it. Or, have the <video> tag already
    created and hidden with CSS, and display it at this
    time.
  */
} else {
  /*
    Proceed with the interactive, WebGL-enabled version.
  */
} 
```

但是，视频显然会受到技术的限制：它是一个预先录制的非交互式视频。为了实现伪交互风格（只要它像按钮一样简单，根据您的链接），您可以使用[HTML5 媒体 API](http://www.w3.org/TR/html5/media-elements.html#htmlmediaelement)在多个预先录制的视频之间动态切换，但我不知道这会有多好由于带宽和同步问题，在实践中工作。您可能希望在开始序列之前验证每个视频上的缓冲量是否可接受。

注意：上述提议假设至少支持 HTML5，即使代替 WebGL。如果您的目标是不支持 HTML5 的旧版浏览器，我认为您可能会遇到像 YouTube 视频这样简单的东西。

# java - ArrayList，我如何比较等？（爪哇）

> ID：11481031
> 
> 赞同：-3
> 
> 时间：2012-07-14T04:26:57.300
> 
> 标签：java

所以目前，我有一个 ArrayList 看起来像：

```
[ [id, type, name, $], [id, type, name, $], [id, type, name, $], [id, type, name, $]....] 
```

现在说如果我想比较索引 0 和 1，或者我想在逗号后添加另一个值：

[id, type, name, $, YOLO]

我该怎么做呢？谢谢！

编辑：这里有一些东西：

我正在从 Excel 中读取数据：

```
 for (int i = first; i <= last; i++) {
        Row row = sheet.getRow(i);
        Cell id = row.getCell(0);
        Cell type = row.getCell(1);
        Cell name = row.getCell(2);
        Cell $ = row.getCell(3);

    List temp = new ArrayList();
    temp.add(id);
    temp.add(type);
    temp.add(name);
    temp.add($);
  sData.add(temp);

} 
```

然后当您打印 sData 时，它会准确显示我之前所说的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T04:40:09.050

Java 中的 ArrayList 是保存对象集合的动态结构。

在您的情况下，我怀疑您有一个具有属性 id、type、name 和 $ 的对象，并且您使用 .add(Object) 方法将它们存储在 ArrayList 中。

您想要的是将另一个属性添加到您的对象并使用相同的方法将该对象添加到您的 ArrayList。

你说的关于比较索引的事情......（我想你的意思是每个对象的 id 变量）。好吧，这也很容易（假设您在对象中实现了适当的方法 - 假设变量 id 您应该有一个方法 setId 和 getId ...等）：

```
if(arrayList.get(0).getId == .... ){
    //do something
} 
```

更新

```
public class MyExcelRowObject {

    private String id;
    private String type;
    private String name;
    private String $;

    public MyExcelRowObject(){
        super();
    }

    public MyExcelRowObject(String id, String type, String name, String $) {
        this.id = id;
        this.type = type;
        this.name = name;
        this.$ = $;
    }

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getType() {
        return type;
    }

    public void setType(String type) {
        this.type = type;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String get$() {
        return $;
    }

    public void set$(String $) {
        this.$ = $;
    }

} 
```

这是对对象的操作

```
 //this is your Object's holder
    ArrayList<MyExcelRowObject> myList = new ArrayList<MyExcelRowObject> ();

    //here you manipulate your rows and add them to your MyExcelRowObject objects
    for (int i = first; i <= last; i++) {
        MyExcelRowObject tmpObj = new MyExcelRowObject();
        Row row = sheet.getRow(i);
        tmpObj.setId(row.getCell(0));
        tmpObj.setType(row.getCell(1));
        tmpObj.setName(row.getCell(2));
        tmpObj.set$(row.getCell(3));

        myList.add(tmpObj);
    }

    //here is how you manipulate your List objects
    if(myList.get(0).getId().equals(myList.get(1).getId())){
        //the  ids of first and second row are the same
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T04:40:13.037

如果您有一个 ArrayList 的 ArrayList，则可以执行以下操作以将元素添加到第一个列表：

`listOfLists.get(0).add("YOLO");`

比较这两个列表是另一回事......

您必须遍历两个列表并比较每个项目：

```
boolean listsAreEqual(List<Cell> listOne, List<Cell> listTwo)
{
    if (listOne.size() != listTwo()) {
        return false;
    }

    for (int i = 0; i < listOne.size(); i++) {
        if (! listOne.get(i).equals(listTwo.get(i)) {
            return false;
        }
    }

    return true;
} 
```

这假设您已经实现`equals`了`Cell`（无论是什么 - 在这里都不重要）。

*由于您的子列表*中的每个项目似乎都是 type `Cell`，因此您应该像这样定义您的列表：

`List<Cell> someList = new ArrayList<Cell>();`

这确保了每个元素都是相同的类型。

它将在编译时强制执行，这很好。

# mysql - 存储单向朋友关系的紧凑方式？

> ID：11481033
> 
> 赞同：0
> 
> 时间：2012-07-14T04:27:11.793
> 
> 标签：mysql, sql, database-design

我有一个mysql数据库。我有一张用户表。我想回答“一个用户是另一个用户的朋友吗？”的问题。这些是单向的朋友关系。我想我有两个选择，并且想要更高效的解决方案：

1）保留一张朋友关系表。两列：

```
username | friend_username
--------------------------
 mary        john
 mary        steve
 mary        kate
 ... 
```

回答友谊问题只需选择两列与用户名 1 和 2 匹配的计数。

2）再次包含两列的表：

```
username | friends_serialized
-----------------------------
mary       john,steve,kate, 
```

所以“friends_serialized”列包含一个（逗号）分隔的字符串。如果我想知道玛丽是否与某人成为朋友，我可以这样做：

```
select count from xxx where username="mary" AND friends_serialized LIKE "%,steve,%" 
```

（我不确定语法）。这真的会让我在第一次实施中赢得什么吗？它至少更紧凑，当我需要向用户提供朋友列表时，我可以在单个列中读取它，而不是选择所有匹配的列（如 #1 所示）。

我的问题：我正在运行一项游戏服务，用户可以在其中互相发送邀请来玩游戏。我想防止陌生人发送非朋友邀请。因此，我希望能够快速（紧凑地）查明向另一个用户发送邀请的用户是否实际上是共同的朋友。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T04:31:58.577

你*绝对*应该采用第一种方法。您的第二种方法甚至违反了关系数据库的第一范式（在单个字段中不存储多个值（在本例中为友谊）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T04:31:31.337

你提到的第一个是最好的答案。因为在第二个得到字符串后你必须分析它才能找到关于朋友的，但第一个更直接！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T04:31:57.923

使用 ID 而不是字符串。

创建联结表：

```
ID  PersonID FriendID
0    1        2
1    4        2
2    2        3
..... 
```

第 2 个人是第 1 个人和第 4 个人的朋友。第 3 个人是第 2 个人的朋友。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T04:38:53.130

使用第一个解决方案。创建一个表，例如：

```
CREATE TABLE friendships (
   user varchar(64) NOT NULL,
   friend varchar(64) NOT NULL,
   PRIMARY KEY (user, friend)
   FOREIGN KEY (user) REFERENCES users (user_name) 
      ON DELETE CASCADE ON UPDATE CASCADE,
   FOREIGN KEY (friend) REFERENCES users (user_name)
      ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB; 
```

如果您的表中不存在`friendships`两个用户名（`user`和） ，这将确保无法将行插入表中。此外，如果您删除一个用户，他们的所有友谊都会被删除。与更新用户名相同（如果您允许）。另外，由于那时友谊是单向的，并且给定的用户只能与另一个用户成为朋友一次，因此将两个列都设为您的.`friend``users``PRIMARY KEY`

然后，查找给定用户的朋友是一个非常简单的查询：

`SELECT friend FROM friendships WHERE user='username'`

# c# - 对在 C# 中编译 DLL 文件感到困惑

> ID：11481045
> 
> 赞同：-1
> 
> 时间：2012-07-14T04:29:06.660
> 
> 标签：c#, dll

我正在尝试制作一个 DLL，但我不明白如何将我的代码编译成 DLL。我有我的类库。当我准备好编译它时我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T04:38:49.293

你建造它。:-)

构建后它应该在您的 /bin 目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T04:51:09.543

在 上`SolutionExplorer`，右键单击您的项目并单击`Build`或`Rebuild`。

使用它：

1- 单击`Project`，然后单击`Add Reference`。

2- 单击`Browse`选项卡并找到要添加引用的 DLL。（可能在`/bin`项目目录中）

*如果要使用的 DLL 在同一个项目中，显然使用 Browse 是不好的形式。相反，右键单击`Project`，然后单击`Add Reference`，然后从 Project 选项卡中选择适当的类。*

3- 单击`OK`。

有关矿石信息，请参阅：[如何在 C# .NET 中创建类库](http://www.homeandlearn.co.uk/csharp/csharp_s16p1.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T04:42:53.260

通常，创建 .dll 所需要做的就是构建解决方案。Visual Studio 将在文件的 /bin 目录中为您创建文件。

如果您希望使用 VS 命令行制作 .dll，请参阅此演练： http: [//msdn.microsoft.com/en-us/library/3707x96z](http://msdn.microsoft.com/en-us/library/3707x96z(v=vs.100).aspx) (v=vs.100).aspx 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T04:44:20.643

基本上，您有几种可能的方法来构建您的解决方案

*   您可以使用 csc.exe（[在此处](http://msdn.microsoft.com/en-us/library/78f4aasd.aspx)阅读）
*   您只能使用您的 IDE。（在 VS 上按 F5）
*   您可以使用 MSBuild（阅读[此处](http://msdn.microsoft.com/en-us/library/0k6kkbsd.aspx)）
*   您可以使用 NAnt 进行构建（阅读[此处](http://nant.sourceforge.net/)）

# android - Android SIP API - 在 SipAudioCall.Listener.onRingingBack() 之后，如何听到任何等待的声音

> ID：11481046
> 
> 赞同：2
> 
> 时间：2012-07-14T04:29:37.033
> 
> 标签：android, api, sip

   我正在使用 Android 2.3+ API 开发一个 SIP 客户端应用程序，我可以使用 SipDemo 示例代码成功拨打和接听来电。但在同伴接听电话之前我什么也听不到。
   众所周知，当我们拨打普通的 GSM 电话时，在您呼叫的人接听您的电话之前，我们可以听到“DO..DO...DO”。
   现在让我向您展示我的 SipAudioCall.Listener 代码。我知道 SipAudioCall.Listener.onRingingBack 在对等方收到邀请时被调用，而 SipAudioCall.Listener.onCallEstablished 在对等方应答时被调用。
   我不知道在 SipAudioCall.ListeneronRingingBack 方法中做什么才能听到任何事情。当我打电话时，我的身边保持沉默，直到同伴接听我的电话......（对不起我的英语不好）

   提前致谢！

```
private final SipAudioCall.Listener sipAudioCallListener = new SipAudioCall.Listener(){

    @Override
    public void onRinging(SipAudioCall call, SipProfile caller) {
        Log.e(TAG, "onRinging caller="+caller.getUriString()+"; call="+call.getState()+"; caller="+caller.getUriString());
        super.onRinging(call, caller);
    }

    @Override
    public void onRingingBack(SipAudioCall call) {
        Log.e(TAG, "onRingingBack: call="+call.getState());
        super.onRingingBack(call);
    }

    @Override
    public void onCallEstablished(SipAudioCall call) {
        Log.e(TAG, "onCallEstablished: call="+call.getState());
        super.onCallEstablished(call);
    }

    @Override
    public void onCallEnded(SipAudioCall call) {
        Log.e(TAG, "onCallEnded: call="+call.getState());
        super.onCallEnded(call);
    }

    @Override
    public void onCallBusy(SipAudioCall call) {
        Log.e(TAG, "onCallBusy: call="+call.getState());
        super.onCallBusy(call);
    }

    @Override
    public void onCallHeld(SipAudioCall call) {
        Log.e(TAG, "onCallHeld: call="+call.getState());
        super.onCallHeld(call);
    }

    @Override
    public void onError(SipAudioCall call, final int errorCode, final String errorMessage) {
        Log.e(TAG, "###onError errorCode="+errorCode+"; errorMessage="+errorMessage);
        super.onError(call, errorCode, errorMessage);
    }

    @Override
    public void onChanged(final SipAudioCall call) {
        Log.e(TAG, "onChanged: call="+call.getState());
        super.onChanged(call);
    switch(call.getState()){
        case SipSession.State.OUTGOING_CALL:
        //making an outgoing call 
            break;
        case SipSession.State.OUTGOING_CALL_RING_BACK: 
        //peer receives ringing event, what can I do to hear any thing until peer answers the call??
        //...
            break;
        case SipSession.State.IN_CALL:
        //call established, it works fine.
            call.startAudio();
            call.setSpeakerMode(false);
            if(call.isMuted()){
                call.toggleMute();
            }
            break;
        case SipSession.State.READY_TO_CALL:
            break;
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T16:01:27.143

我希望你已经找到了解决方案。如果没有，请尝试以下操作：

使用`MediaPlayer`in`onRingBack()`方法并播放您自己的声音。确保`MediaPlayer`在呼叫建立后停止。在此示例中，我使用了放置在我的`raw`资源中的 MP3 文件。

```
SipAudioCall.Listener listener = new SipAudioCall.Listener() {

    @Override
    public void onCallEstablished(SipAudioCall call) {  
        mPlayer.stop();
        call.startAudio();
    }

    @Override
    public void onRingingBack (SipAudioCall call){
        MediaPlayer mPlayer = MediaPlayer.create(context, R.raw.phone_calling); 
        mPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
        mPlayer.setLooping(true);
        mPlayer.start();
    }

}; 
```

# grails - 如何永久删除默认的 Grails web-app 文件？

> ID：11481049
> 
> 赞同：5
> 
> 时间：2012-07-14T04:29:49.120
> 
> 标签：grails, grails-2.0

当我创建一个 Grails 应用程序时，它在目录中带有一些默认文件`web-app`：

```
$ 查找网络应用程序
网络应用
网络应用程序/CSS
网络应用程序/css/errors.css
网络应用程序/css/main.css
网络应用程序/css/mobile.css
网络应用程序/图像
网络应用程序/图像/apple-touch-icon-retina.png
网络应用程序/图像/apple-touch-icon.png
网络应用程序/图像/favicon.ico
网络应用程序/图像/grails_logo.jpg
网络应用程序/图像/grails_logo.png
网络应用程序/图像/leftnav_btm.png
网络应用程序/图像/leftnav_midstretch.png
网络应用程序/图像/leftnav_top.png
网络应用程序/图像/皮肤
网络应用程序/图像/皮肤/database_add.png
网络应用程序/图像/皮肤/database_delete.png
网络应用程序/图像/皮肤/database_edit.png
网络应用程序/图像/皮肤/database_save.png
网络应用程序/图像/皮肤/database_table.png
网络应用程序/图像/皮肤/exclamation.png
网络应用程序/图像/皮肤/house.png
网络应用程序/图像/皮肤/信息.png
网络应用程序/图像/皮肤/shadow.jpg
网络应用程序/图像/皮肤/sorted_asc.gif
网络应用程序/图像/皮肤/sorted_desc.gif
网络应用程序/图像/spinner.gif
网络应用程序/图像/springsource.png
网络应用程序/js
网络应用程序/js/application.js
```

（`META-INF`以及`WEB-INF`从输出中截取的文件夹）

这些文件在我的应用程序中造成混乱，并且还使用我可能想要用于我自己的资源的公共目录名称`css`、`images`和。`js`

过去我手动删除了这些，但在运行后它们会自行返回，`grails upgrade`并在此过程中覆盖我自己的文件。

我看不出有任何理由保留这些文件。有什么我想念的吗？如果没有，我怎样才能摆脱它们并确保它们永远不会回来？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T08:11:27.267

根据[Burt Beckwith](http://grails.1312388.n4.nabble.com/Should-I-and-how-do-I-permanently-get-rid-of-the-default-Grails-web-app-files-tp4631624p4631664.html)的说法，正确的解决方案是不使用`grails upgrade`. 显然，这不再是升级 Grails 应用程序的推荐方法，因为它实际上只做了两件重要的事情，那就是升级版本，然后清理应用程序，以便重新下载所有内容。

### 小升级

从该帖子中，较小版本更改的推荐过程是：

> 1.  编辑`application.properties`和更新版本。
> 2.  然后运行`grails clean`以清除过时的文件。
> 3.  最后运行`grails compile`，它会询问您是否要升级 Hibernate 和 Tomcat 插件（如果它们在 中列出`BuildConfig.groovy`）。
> 
> 您也可以手动删除文件夹下工作文件夹中的旧插件`$HOME/.grails`。

Burt 提供的另一个提示是：

> 如果添加`grails.project.work.dir = 'target'`到`BuildConfig.groovy`. 然后你所有的插件都会在那里，你可以删除整个目标文件夹，所有插件都将被重新安装和/或更新，所有的类都将被重新编译。

### 重大升级

主要更新（例如将 1.x 应用程序升级到 2.x 应用程序）的过程涉及更多一点：

> *   在新版本的 Grails 中创建一个新的空应用程序
> *   在旧版本的 Grails 中创建一个新的空应用程序
> *   将您当前的应用程序与空的旧版本应用程序进行比较 - 这将告诉您您删除、添加和更改的内容。复制新文件，删除应该删除的内容，然后重新进行您所做的更改。请务必阅读中间 Grails 版本的发行说明和升级信息，以便了解如何进行新更改 - 例如 DataSource.groovy 中的 HSQLDB -> H2 等。不要盲目地进行相同的更改。

希望这最终会记录在官方文档中，因为这是有道理的，因为升级过程太复杂而无法有效地自动化。

* * *

### 新应用

然而，这并没有解释如何处理新的应用程序。当然，您可以简单地删除所有 Grails 特定的文件（除非您使用脚手架，否则我建议您这样做）。

另一种选择是将所有 Grails 特定文件移动到某个子目录中，然后手动修改（和/或重命名）`main`布局、CSS 文件和资源链接以指向这些新位置。

如果您仍然想使用脚手架，我建议将`main.gsp`布局复制到`scaffolding.gsp`，并创建一个新的资源模块，仅用于包含所有默认 CSS 和 JS 要求的脚手架。然后运行[`grails install-templates`](http://grails.org/doc/latest/ref/Command%20Line/install-templates.html)，它将为您提供用于脚手架的基本视图模板。然后，您可以轻松更改布局并添加或更新正确的资源模块。

最后，一旦您以您想要的方式获得了基本应用程序，请将其压缩并保存以备后用。这至少是一种简单的方法，只需要做一次。

> **注意**安装模板后，
> 您可能不需要位于. 除非你知道你使用它们，否则它们应该被删除。`artifacts``war``src/templates`

* * *

最后一点，请确保您使用良好、强大的版本控制系统，例如 git 或 mercurial。如果您不小心运行，这将很容易查看已修改的内容`grails upgrade`，并丢弃或回滚您不想更改的文件。使用不错的 IDE 或 GUI，您通常只需单击几下即可解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:14:07.693

在 grails 项目的目录 scripts 下，您需要创建 _Events.groovy

升级脚本会触发 2 个事件，因此您可以复制现有文件，让脚本做他的事情并在最后替换那些文件。

所以它会给出类似的东西

```
eventStatusUpdate = { msg ->
    def listenMsg = "Please make sure you view the README for important information about changes to your source code."
    if(msg == listenMsg) {
        copy(todir: "<the dir you want to put your stuff>") {
            fileset(dir: "${basedir}/web-app") {
                include(name: "**/**")
                exclude(name: "WEB-INF/**")
                present(present: "srconly", targetdir: "${basedir}/web-app")
            }
        }
    }  
}

eventStatusFinal = { msg ->
    if(msg == "Project upgraded") {
        copy(todir: "${basedir}/web-app") {
            fileset(dir: "<the dir with your stuff...>") {
                include(name: "**/**")
                exclude(name: "WEB-INF/**")
                present(present: "srconly", targetdir: "${basedir}/web-app")
            }
        }
    }    
} 
```

# php - 单击按钮时加载评论

> ID：11481052
> 
> 赞同：1
> 
> 时间：2012-07-14T04:30:22.180
> 
> 标签：php

我正在开发 PHP 博客网站来学习 PHP 和 JAVASCRIPT 的 Perpose。现在我正在对帖子发表评论。这里我有一个问题。

```
$('.comment_button').live("click",function() 
{ 
var ID = $(this).attr("id");
var comment= $("#ctextarea"+ID).val();
var dataString = 'comment='+ comment + '&msg_id=' + ID;

if(comment=='')
{
alert("Please Enter Comment Text");
}
else
{
$.ajax({
type: "POST",
url: "comment_add.php",
data: dataString,
cache: false,
success: function(html){
$("#commentload"+ID).append(html);
$("#ctextarea"+ID).val('');
$("#ctextarea"+ID).focus();
 }
 });
}
return false;
});
$('.commentopen').live("click",function() 
{
var ID = $(this).attr("id");
$("#commentbox"+ID).slideToggle('slow');
return false;
}); 
```

我使用此 javascript 代码添加评论，但问题是当我从一台电脑登录时，我使用此代码发表评论，而不是其他用户的评论不显示...意味着单击评论后我只能显示我的评论...。 .

我的comment_add.php 是

```
$comment=htmlentities($comment);
$query = mysql_query("SELECT com_id,wall_msg FROM `wall_comment` WHERE u_id='$uid' and      wall_id='$msg_id' order by com_id desc limit 1 ") or die(mysql_error());
$result = mysql_fetch_array($query);
if ($comment!=$result['comment'])
{
$result2 = mysql_query("SELECT * FROM user_wall WHERE u_id=$uid");
 while($row = mysql_fetch_array($result2))
{
$u_name=$row['username'];
} 
$query = mysql_query("INSERT INTO `wall_comment` (wall_id,        wall_msg,wall_time,u_id,username) VALUES ('$msg_id', '$comment',now(),$uid,'$u_name')") or  die(mysql_error());
   $newquery = mysql_query("SELECT * FROM wall_comment  where wall_id='$msg_id' order  by com_id desc");
   $result = mysql_fetch_array($newquery);
   return $result;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T04:35:10.493

在您的第一个查询中，我的意思是

```
"SELECT com_id,wall_msg FROM `wall_comment` WHERE u_id='$uid' and      wall_id='$msg_id' order by com_id desc limit 1 
```

您对 1 条评论和 where 子句有限制：

```
WHERE u_id='$uid' 
```

仅显示当前用户评论。将它们更改为拥有用户的所有评论

# iphone - 如何从 iOS 框架中剥离或重命名符号？

> ID：11481059
> 
> 赞同：1
> 
> 时间：2012-07-14T04:31:33.973
> 
> 标签：iphone, objective-c, ios, c, linker-errors

我需要修复与[route-me](https://github.com/danielgard/route-me/commit/72120430d73e0c64cd043d7e169999c789392b35)链接的底层 iOS 框架中的错误，并且当我包含我得到的新代码时

```
ld: duplicate symbol _OBJC_METACLASS_$_RMProjection in frameworks/blah.framework/blah(RMProjection.o) and 
```

有没有办法从 blah.framework 中删除符号并改用我编译的代码？我知道：`strip -s <symbol file> -u <library>`但无法让它工作

还尝试了查找和替换

```
perl -n -p -e 's/RMProjection/XRMProjection/g' < frameworks/blah.framework/blah.bak > frameworks/blah.framework/blah 
```

在链接的二进制文件中，导致此错误：

```
ld: in frameworks/blah.framework/blah, file is universal but does not contain a(n) i386 slice for architecture i386 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T17:03:52.110

在终端中使用 lipo 命令。

# javascript - 如何在 Jquery-Tools 验证器中检查表单是否经过验证

> ID：11481062
> 
> 赞同：1
> 
> 时间：2012-07-14T04:31:44.413
> 
> 标签：javascript, jquery, jquery-tools

的返回值`$("#myform").validator()`是一个对象，[Jquery-Tools Validator](http://www.jquerytools.org/documentation/validator/index.html)中是否有类似 boolean的方法`$("#myform").isValid()`？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T04:52:59.627

`checkValidity`不是 jQuery 对象的方法。它是存储在您将验证器绑定到的表单（或输入）元素`validator`的元素中的实例的方法。[`.data`](http://api.jquery.com/data/)采用：

```
$('#myform').data("validator").checkValidity() 
```

获取表示表单有效性的布尔值。

[**小提琴**](http://jsfiddle.net/ult_combo/4hASg/)

# javascript - 捕获 iframe 异常

> ID：11481067
> 
> 赞同：11
> 
> 时间：2012-07-14T04:32:14.927
> 
> 标签：javascript, html, exception, iframe

当我`src`在 iframe 上设置属性时，有时会在控制台中记录一个错误（似乎是未捕获的异常），并且目标永远不会加载。

例如，如果我设置`myiframe.src = 'http://www.google.com'`，它永远不会加载，我的 Chrome 开发人员工具将记录以下消息：

```
Refused to display document because display forbidden by X-Frame-Options. 
```

我知道这个错误是什么，但我想捕获这个异常，以便在网站不想加载到 iframe 时处理它。

因为设置 iframe`src`是半异步的，所以我不能只用 try catch 围绕该行。

如何处理 iframe 错误？`iframe.onerror`并且`iframe.onabort`似乎也没有做到这一点。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-14T05:32:50.497

看一眼：

[https://developer.mozilla.org/en/DOM/window.onerror](https://developer.mozilla.org/en/DOM/window.onerror)

这本质上是一个全局的后备错误处理程序。谷歌一下以获取有关如何使用此方法的更多信息，但请注意，您必须解决这种方法的跨浏览器兼容性问题，尤其是 IE 浏览器系列。

这可能适用于 IFRAME 元素，也可能不适用于 YMMV。

**更新：**

看看这个问题。

[如何捕获所有 iframe 中的 JavaScript 错误（使用 window.error）？](https://stackoverflow.com/questions/1353664/how-to-catch-javascript-errors-in-all-iframes-with-window-error)

# asp.net-mvc - 不知道为什么我的 MVC Entity-Framework 应用程序无法在数据库中找到元素

> ID：11481069
> 
> 赞同：1
> 
> 时间：2012-07-14T04:32:17.890
> 
> 标签：asp.net-mvc, linq, entity-framework

刚刚在我的博客上发现了一些实时错误，我不知道它们为什么会发生。如果你想看到完整的大丑消息就去[这里](http://www.nerdlythings.com)

给我问题的代码是这样的：

```
 NerdlyContext db = new NerdlyContext();
    public IEnumerable<Post> GetIndexPage(int? page)
    {
        int pageSize = 5;
        int pageNumber = (page ?? 1);
        var posts = from p in db.Posts
                    where p.Published == true && p.Archived == false
                    orderby p.DateCreated descending
                    select p;
        var result = posts.ToPagedList(pageNumber, pageSize);
        return result;
    } 
```

我试图查看测试是我在做一个快速的 db.Posts.FirstorDefault() 以查看它是否得到任何东西，但它似乎根本没有击中我的数据库。我在SSMS中打开了数据库，所有数据都是一样的。我托管在 discountasp.net 上，并重新复制了确切的连接字符串，以确保没有意外更改。还是行不通。我最近所做的唯一更改是我尝试添加更多 dbset 项目，但是由于包管理控制台上的错误，所以我撤消了所有更改，重建了解决方案，现在我得到了这个..

# 更新

深入挖掘它实例化我的 DbContext 时，它说更改跟踪器正在引发错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T04:42:11.963

可能是连接字符串的问题。您是否在 DBContext 类的构造函数中指定了连接字符串，如下所示：

```
public class YourContext : DbContext 
        { 

            public YourContext () : base("YourConnection")
            {

            }

//DBSets here
        } 
```

“YourConnection”在 web.config 中设置：

```
<connectionStrings>
    <add name="YourConnection" providerName="System.Data.SqlClient" connectionString="....." />
  </connectionStrings> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T04:37:22.290

您的连接字符串是否正确？

你可以设置断点并检查 db.Posts 吗？您应该能够深入查看查询和连接字符串。也许这可以为您指明正确的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T05:25:14.497

好的，所以我和你们所有人都认为这是一个连接字符串问题。不过这些都很好。

1.  我最终做的是从项目中删除我以前的所有迁移类。
2.  从我的数据库中删除了 MigrationsHistory 文件夹。
3.  将迁移的配置更改为自动迁移
4.  重新运行更新数据库命令。（它给了我一个错误说帖子已经存在）
5.  然后完全没有信心，我重新运行它并繁荣，我的数据又回来了

那为什么它现在起作用了？我一点头绪都没有。。

# google-app-engine - 在 WSGI 中，如何区分空白和缺失的查询参数？

> ID：11481074
> 
> 赞同：0
> 
> 时间：2012-07-14T04:33:04.260
> 
> 标签：google-app-engine, wsgi

像这样的问题：

> [区分 ASP.NET MVC4 中的空参数和缺失参数](https://stackoverflow.com/questions/10241375/distinguish-between-null-and-missing-parameters-in-asp-net-mvc4)

...除了 WSGI。如何区分“无值”查询参数和不存在的查询参数。

根据[此文档](https://developers.google.com/appengine/docs/python/tools/webapp/requestclass#Request_arguments)，此代码：

```
value = self.request.get('n') 
```

..当查询参数不存在时返回空字符串。如果查询参数存在但没有值，它将返回什么，例如查询字符串`?n`？

我正在尝试对此进行测试，但老实说，我在使用 GAE 时遇到了麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T04:42:39.037

如[您链接的该文档](https://developers.google.com/appengine/docs/python/tools/webapp/requestclass#Request_get)中所述：

> 获取（参数名称，默认值=''）

指定`default_value`参数：

```
self.request.get('n', None) 
```

`None`如果参数`n`不存在（例如`?foo=bar`） ，将返回。如果参数存在但未指定值，您将得到一个空字符串（例如`?n=&foo=bar`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T05:06:47.653

我建议不要使用该`self.request.get`界面。它是对象周围的薄包装`request`，此时主要是为了与 webapp1 应用程序兼容。相反，`self.request.GET`用于查询参数和`self.request.POST`请求正文参数。它们都充当字典，因此如果键不存在，对它们进行索引`self.request.GET['foo']`将引发 a `KeyError`，而如果键不存在，则调用`self.request.GET.get('foo', default)`将返回`default`。

# php - 如何将 2 个数组合并为一个数组？

> ID：11481075
> 
> 赞同：1
> 
> 时间：2012-07-14T04:33:28.123
> 
> 标签：php

我有一个示例代码

```
$array1 = ("attr1", "attr2", "attr3");
$array2 = ("val1", "val2", "val3");
array = array_merge($array1, $array2); 
```

当我`print_r($array)`是结果是

```
array([0] => val1 [1] => val2 [2] => val3) 
```

如何将此错误修复为结果是：

```
array(['attr1'] => val1 ['attr2'] => val2 ['attr3'] => val3) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T04:36:07.843

```
<?php
$a = array('green', 'red', 'yellow');
$b = array('avocado', 'apple', 'banana');
$c = array_combine($a, $b);

print_r($c);
?> 
```

// 输出

```
Array
(
    [green]  => avocado
    [red]    => apple
    [yellow] => banana
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T04:37:26.813

我想你想要的是`array_combine()`。采用：

```
$array1 = ("attr1", "attr2", "attr3");
$array2 = ("val1", "val2", "val3");
$array = array_combine($array1, $array2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T04:38:18.840

不确定这是否只是您的错字，但是您需要将合并的数组放回另一个变量中...

```
$array3=array_merge($array1,$array2);
print_r($array3) 
```

编辑：其他人是对的，对不起，我没有很好地阅读你的问题。你想要array_combine。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T04:39:17.970

使用 array_combine()。
更多信息： http: [//php.net/manual/en/function.array-combine.php](http://php.net/manual/en/function.array-combine.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-14T09:54:22.807

```
$array1 = ("attr1", "attr2", "attr3");
$array2 = ("val1", "val2", "val3");
$array = $array1 + $array2 
```

十分简单

# postgresql - TypeError：create() 为关键字参数“上下文”获取了多个值

> ID：11481076
> 
> 赞同：2
> 
> 时间：2012-07-14T04:33:38.950
> 
> 标签：postgresql, openerp

我收到这样的错误：

> **TypeError: create() got multiple values for keyword argument 'context'**

这是代码：

```
mov_id = self.create(cr, uid, ids, {'so_ids':so, 'product_ids':product},context=context) 
```

有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T05:50:19.320

要创建记录，参数是 cursor、user_id、值字典和上下文。例如

```
mov_id = self.create(cr, uid, {'so_ids': so, 'product_ids': product},context=context) 
```

create 不带任何 id，如果您尝试使用复制，则使用

```
mov_id = self.copy(cr, uid, ids, {'so_ids':so, 'product_ids':product},context=context) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T05:21:34.300

> self.create(cr, uid, {'so_ids':"Test"}, context=context)

这是 create 方法的语法。

如果要添加'write_uid'，只需在创建方法的字典中添加 {'write_uid': ur_id} 即可。在创建方法中，不需要“id”或“id 列表”。

# objective-c - 如何在 Objective-C 中保持输出流打开？

> ID：11481077
> 
> 赞同：0
> 
> 时间：2012-07-14T04:33:40.763
> 
> 标签：objective-c, ios, cocoa, stream

我正在将数据写入事件内部的流：

```
- (void)stream:(NSStream *)stream handleEvent:(NSStreamEvent)eventCode 
```

如下（取自苹果的文档）：

```
case NSStreamEventHasSpaceAvailable:
    uint8_t *readBytes = (uint8_t *)[self.outData mutableBytes];            
    readBytes += byteIndex;            
    int dataLength = [self.outData length];            
    unsigned int length = ((dataLength - byteIndex >= 1024) ? 1024 : (dataLength - byteIndex));            
    uint8_t buffer[length];            
    (void)memcpy(buffer, readBytes, length);            
    length = [self.outputStream write:(const uint8_t *)buffer maxLength:length];            
    byteIndex += length;            
    break; 
```

但是，`NSStreamEventEndEncountered`当输出流中没有其他内容要写入时，会调用该事件，因此会丢弃输出流。我怎样才能保持这个流打开写作？根据[Apple 的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Streams/Articles/WritingOutputStreams.html)，此事件被正确调用，因为没有任何内容写入输出流。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T11:36:55.607

你有没有把你的流放在一个运行循环中？请参阅此处的示例：[http ://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server](http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T07:33:33.953

文档在这一点上并不清楚，但一个合理的解释是`NSStreamEventEndEncountered`当你写到它的容量时，流会发送。（不清楚的部分是这是否适用于所有流或仅适用[于您指定容量](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSOutputStream_Class/Reference/Reference.html#//apple_ref/occ/clm/NSOutputStream/outputStreamToBuffer%3acapacity%3a)的流。例如，基于文件的流可以`NSStreamEventEndEncountered`在文件所在的卷已满时发送。）

鉴于“容量”的定义是您不能写入更多内容，因此保持流在该点之后保持打开是没有意义的。即使您有更多字节要写入，流也没有地方放置它们。

# php - 关于 Webservice 及其功能

> ID：11481081
> 
> 赞同：-2
> 
> 时间：2012-07-14T04:35:08.763
> 
> 标签：php

我想学习如何在 php 中编写 web 服务。我是新手，我想知道如何开始以及从哪里开始请给一些提示。我想了解 Web Service 如何使用它以及如何在 PHP 中使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T04:42:52.933

您所说的“Web 服务”是什么意思？

尝试阅读这篇文章：[使用 PHP、MySQL、XML 和 JSON 创建基本 Web 服务](http://davidwalsh.name/web-service-php-mysql-xml-json)

我希望这将是一个好的开始。

# android - SMAATO 每次都显示相同的广告并且也不考虑 CLICKS : AIR For Android AS3

> ID：11481083
> 
> 赞同：0
> 
> 时间：2012-07-14T04:35:22.130
> 
> 标签：android, actionscript-3, click, ads

有人在 AIR for Android 应用程序中集成了 smaato 广告吗？我已经完成了，在测试模式下一切正常。但是当我使用我的应用 ID 时，它每次都会给出相同的广告，点击它时，它会导航到带有一个 url 但它为空白的浏览器。即使我出于测试目的而单击，smaato 仍然显示 0 click 的另一件事。有人有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:59:26.220

我建议通过发布者门户提交支持票，但这很可能与您的应用程序如何提供用户代理有关。没有“点击”，因为您没有使用与广告请求相同的信息（IP 地址和用户代理），因此系统将其标记为“欺诈”。

如上所述，如果您输入一张票并提供相关财产的发布商 ID 和广告空间 ID，我们可以进行进一步分析。

问候

# jquery - 保持点击对象的活动状态，忽略第二次点击

> ID：11481086
> 
> 赞同：1
> 
> 时间：2012-07-14T04:35:49.340
> 
> 标签：jquery

[http://jsfiddle.net/kfTFa/49/](http://jsfiddle.net/kfTFa/49/)

我正在尝试设置此功能（基本上是大正方形=这是您所在的那个+两个状态之间的动画）。默认状态是两个状态中较小的 8 个正方形，（较大的状态 = 类活动）文本区域为空。

1.  用户将鼠标悬停在任何项目上->
    *   正方形动画到更大的状态
    *   与悬停项目关联的文本在悬停时显示
2.  用户悬停在项目之外->
    *   文字消失
    *   square 恢复到默认状态大小
3.  用户点击 x 项 ->
    *   该项目的文本成为新的默认值
    *   square 保持活动状态（更大的尺寸）
4.  用户点击 y 项 ->
    *   上一个活动项目动画回到默认状态
    *   y 项目文本成为新的默认文本
    *   y 项目保持活动大尺寸状态

我几乎拥有它，唯一的问题是，如果您两次单击同一个项目，活动类最终会粘在它不应该的项目上。不能完全到达那里！

第二次单击可以不执行任何操作或将其取消设置为默认值（可能没有更好的方法）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T04:46:45.017

演示：http: [//jsfiddle.net/kfTFa/50/](http://jsfiddle.net/kfTFa/50/)

您可以简单地添加一个检查以查看它是否已经是活动项目。

`if($(this).hasClass("active")) return;`

# c++ - 使用 .app 包时无法加载图像

> ID：11481089
> 
> 赞同：0
> 
> 时间：2012-07-14T04:36:08.310
> 
> 标签：c++, xcode, macos, sdl

我正在尝试使用 Xcode 在 Mac OS X lion 中设置 SDL。到目前为止，除了加载图像之外，我似乎一切正常。（使用 SDL_image）我正在使用以下代码，当通过命令行编译代码而不是制作 .app 时，该代码将起作用，但在此 Xcode 设置中不起作用。

```
SDL_Surface* load_image( std::string filename ) 
{
    SDL_Surface* loadedImage = NULL;
    SDL_Surface* optimizedImage = NULL;

    loadedImage = IMG_Load( filename.c_str() );

    if( loadedImage != NULL )
    {
        optimizedImage = SDL_DisplayFormatAlpha( loadedImage );
        SDL_FreeSurface( loadedImage );
    } else {
        std::cout << "Error loading image: " << filename << " Error:"<< std::endl << SDL_GetError() << std::endl;
    }

    return optimizedImage;
} 
```

调用此函数时，我返回一个空指针，控制台显示：

```
Error loading image: puppy.png Error:
Couldn't open puppy.png 
```

我查看了捆绑包，puppy.png 已按预期放入 Resources 文件夹中。我也尝试过调用 load_image("../Resources/puppy.png") 或将puppy.png 移动到MacOS 文件夹中，但都没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T05:08:28.467

文件的路径名是相对于当前工作目录的，这在从 Xcode 或 Finder 启动的程序中是不可预测的（在 shell 中，它基于你上次运行的位置`cd`）。

除非函数的文档说它会在应用程序包中搜索文件名，否则您不能真正假设它会。相反，查看`NSBundle`类并使用这些方法自动找到位于资源等位置的文件的完整路径；然后在这种情况下将该完整路径传递给图像加载器。

# python - 机械化：跟随 div 内的链接

> ID：11481091
> 
> 赞同：1
> 
> 时间：2012-07-14T04:36:35.760
> 
> 标签：python, html, mechanize

使 Mechanize 跟随`br.follow_link`位于某个 div 内的链接（）的最 Pythonic 方式是什么？我知道如何在 BeautifulSoup 的帮助下做到这一点，但是有没有办法用 Mechanize 做到这一点？

示例 div：

```
<div id="blah_links">
 <a href="LINK1" class="active">1</a> |
 <a href="LINK2">2</a> |
 <a href="LINK3">3</a> |
 <a href="LINK4">NEXT</a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:29:42.997

我最近遇到了类似的问题，这就是我所做的

```
url = "www.somewhere.com"
br = mechanize.Browser()
br.open(url)

encoded_data = UnicodeDammit(br.response().read(),isHTML=True).unicode
parser = lxml_html.fromstring(encoded_data)

soup_xpath = "//div[@id='BODYCON']//a/@href"
valid_links = soup.xpath(soup_xpath)
links  = [ link for link if link.url in valid_links ] 
```

# mysql - 我应该在富文本编辑器编辑的 MySql 中存储什么类型的数据？

> ID：11481094
> 
> 赞同：1
> 
> 时间：2012-07-14T04:37:11.880
> 
> 标签：mysql, content-management-system, editor, blogs, richtext

我正在通过 php 和 MySql 构建我的博客，我想使用像 CKEditor 这样的富文本编辑器在后端编辑我的文章。那么我应该在 MySql 中存储什么类型的数据，只是文本，还是 BLOB？据我所知，富文本编辑器的结果是 html 类型的，所以如果我将它们存储为文本的“字符串”是否可以，这对于全文搜索会更好吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T05:03:08.207

HTML 只是文本，因此将其存储为 VARCHAR 或 TEXT。可以存储为字符串（提到的类型）。

您的全文搜索将通过索引得到改进。如果您存储 InnoDB 数据库引擎，则会丢失默认 MyISAM 支持的 FULLTEXT 类型索引，因此您需要确定您的数据库引擎。无论哪种方式，如果数据库索引适合内存，您将能够非常快速地搜索。

使用像 Sphinx 这样的第三方索引，全文搜索可能会更好。您可以做的另一件事是将文章中的每个字符串标记为单独的记录，并将“分数”匹配到您的查询（也拆分），但这与 Sphinx 等搜索引擎所做的相同并且效率更高。

# ruby-on-rails - 为什么`gem install rails`会失败？

> ID：11481097
> 
> 赞同：13
> 
> 时间：2012-07-14T04:37:34.267
> 
> 标签：ruby-on-rails, linux, rubygems, xubuntu

作为背景，这是我的环境：

```
vishal@dishDell:~$ gem env
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.24
  - RUBY VERSION: 1.9.3 (2011-10-30 patchlevel 0) [x86_64-linux]
  - INSTALLATION DIRECTORY: /usr/lib/ruby/gems/1.9.1
  - RUBY EXECUTABLE: /usr/bin/ruby1.9.1
  - EXECUTABLE DIRECTORY: /usr/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-linux
  - GEM PATHS:
     - /usr/lib/ruby/gems/1.9.1
     - /home/vishal/.gem/ruby/1.9.1
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

这就是我尝试运行时发生的情况`gem install rails`。

```
vishal@dishDell:~$ sudo gem install rails
[sudo] password for vishal: 
Building native extensions.  This could take a while...
ERROR:  Error installing rails:
    ERROR: Failed to build gem native extension.

        /usr/bin/ruby1.9.1 extconf.rb
/usr/local/lib/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError)
    from /usr/local/lib/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from extconf.rb:1:in `<main>'

Gem files will remain installed in /usr/lib/ruby/gems/1.9.1/gems/json-1.7.3 for inspection.
Results logged to /usr/lib/ruby/gems/1.9.1/gems/json-1.7.3/ext/json/ext/parser/gem_make.out 
```

我使用 安装了 Ruby 1.9.3 `apt-get`，并从 ruby​​gems.org 的 tarball 安装了 RubyGems。我应该怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-27T05:45:24.617

这适用于 Ubuntu 12.10：

```
sudo apt-get install ruby
sudo apt-get install ruby-dev
sudo apt-get install rubygems
sudo gem install rails 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-14T07:12:46.343

[正如另一个Stackoverflow 问题](https://stackoverflow.com/questions/7645918/require-no-such-file-to-load-mkmf-loaderror)中所指出的，检查您是否有 ruby​​-1.9-dev 或 ruby​​-1.9.3-dev 包。如果丢失，请安装它，然后尝试安装 rails。

此外，请查看[RVM](https://rvm.io/)以同时安装和管理多个 ruby​​ 版本。

# actionscript-3 - 所有 Flash 游戏都可以轻松移植到 adobe air 以在 ios 上部署吗？

> ID：11481099
> 
> 赞同：7
> 
> 时间：2012-07-14T04:37:54.237
> 
> 标签：actionscript-3, flash, air, adobe

所有 Flash 游戏都可以轻松移植到 adobe air 以在 ios 上部署吗？例如，如果我在 AS3 中开发了一个 2D 平台游戏，我是否可以使用 Adob​​e AIR 简单地重新打包以在 iOS 上部署，而无需修改代码库？

如果可能的话，我该怎么做？只是使用 AIR SDK 的 ADT 工具重新打包？

在我的游戏中，我使用鼠标和键盘来控制角色...英雄跟随鼠标光标并左键触发...这将如何转化为触摸？

我是 AIR 的新手，甚至还没有 iPhone。但我很想知道这些可能性。

任何帮助/提示/建议将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-14T05:29:38.513

任何 Flash 内容都可以使用 AIR 打包到 iOS、Android 和 BlackBerry。

在 Flash Professional 中，这可以通过更改发布设置来完成：

![发布设置](../Images/ad5b4b98c5f4c0d869ca930442c4a533.png)

以 AIR 3.3 为目标是最佳选择，iOS 性能更高。此 AIR SDK 可以覆盖到 Flash Professional 发布设置；或者，您可以使用 ADT 命令行打包程序。

下载 AIR 3.0 SDK。
确保 JRE，或使用来自 Flash Builder 的 JRE。
执行 adt 将 SWF 打包到 IPA：

```
adt -package -target [ipa-test | ipa-debug | ipa-app-store | ipa-ad-hoc]
    -keystore iosPrivateKey.p12 -storetype pkcs12 -storepass qwerty12
    -provisioning-profile ios.mobileprovision
    HelloWorld.ipa
    HelloWorld-app.xml
    HelloWorld.swf icons Default.png 
```

请务必注意，所有可执行代码必须驻留在单个 SWF 中才能在 iOS 平台上运行。不支持 SWFLoading 或执行代码的任何动态加载的 SWF。因此，将所有 Flash 链接到一个 SWF。

性能也是一个因素 - 输入帧上的繁重动画和矢量图形将需要针对移动平台进行优化。

每个设计都有很多方面需要考虑。

应用程序以每台设备的不同分辨率全屏运行。您可以利用优雅的动态调整大小系统来适应这些多个屏幕或针对每个应用程序指定特定的分辨率。

如果您现有的 Flash 项目的宽高比不兼容，则需要更新布局。

鼠标可以体面地转换为触摸，但有一些不直观的细微差别。例如，悬停通常很难在触摸中实现。同样，鼠标光标不会像将手放在游戏区域上进行触摸一样阻碍视图。

移动触摸设备增加了与可以利用的多点触摸和手势交互的能力。

可以激活屏幕键盘；但是，它将占用您的一部分视口，并且对于大多数游戏而言都难以与之交互。

您需要以一种与您的游戏玩法保持一致的方式来翻译键盘和鼠标事件。

参考：

*   [http://www.adobe.com/devnet/air/articles/packaging-air-apps-ios.html](http://www.adobe.com/devnet/air/articles/packaging-air-apps-ios.html)
*   [http://www.adobe.com/devnet/air/articles/packaging-air-apps-android.html](http://www.adobe.com/devnet/air/articles/packaging-air-apps-android.html)
*   [http://www.adobe.com/devnet/air/articles/packaging-air-apps-blackberry.html](http://www.adobe.com/devnet/air/articles/packaging-air-apps-blackberry.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T13:50:14.610

虽然这当然是可能的，但根据游戏的不同，您可能会注意到桌面设备和移动设备之间的性能差异，尤其是在有大量矢量动画、过滤器等的情况下。

[如果您想在移动设备上获得完美的性能，您应该使用Starling Framework](http://gamua.com/starling/)之类的东西重写您的应用程序。

# hibernate - java.lang.IndexOutOfBoundsException：索引：0，大小：0

> ID：11481100
> 
> 赞同：0
> 
> 时间：2012-07-14T04:38:01.273
> 
> 标签：hibernate, struts2, indexoutofboundsexception

我有一个表单，其中有一个文本字段。用户在文本字段中输入电子邮件地址，当用户提交表单时，`Action`该类从表中找到`uid`用户的并在 JSP 页面上显示为带有 的消息。我得到一个.`Users``uid``<s:actionmessage/>``IndexOutOfBoundsException`

我的 JSP 表单是：

```
<s:form action="okadddqs" method="post" cssClass="text">

   <s:textfield label="Your Email address " name="email"/>
   <s:submit value="Find Uid"/>
 </s:form> 
```

该类的代码`Action`是：

```
package com.rambo.action;

import beans.Users;
import com.opensymphony.xwork2.ActionSupport;
import java.util.ArrayList;
import java.util.List;
import java.util.StringTokenizer;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import org.hibernate.Session;

/**
 *
 * @author ROMO
 */
@ManagedBean
@SessionScoped
public class NewQuestion extends ActionSupport {

    private String email;

    private List<Users> ul = new ArrayList<Users>();

    public List<Users> getUl() {
        return ul;
    }

    public void setUl(List<Users> ul) {
        this.ul = ul;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }
/* i have used many where the getUid() and getEmail() even in the error and messages to find what the value it is getting on error.  */
    @Override
    public String execute() throws Exception {
        Session session = null;
        int d;
        try {
            session = HibernateUtil.getSessionFactory().getCurrentSession();
            session.beginTransaction();
            try {
                ul = (List<Users>) session.createQuery("from Users c where c.email = '" + getEmail() + "'");
                if (!ul.isEmpty()) {
                    d = ul.get(0).getUid();
                } else {
                    this.addActionError("Oops. Sorry. You are Not Allowed now. Please Try Again Later." + getEmail() + ","+ ul.get(0).getUid());
                    session.close();
                    return ERROR;
                }
            } catch (Exception e) {
                this.addActionError("Oops. There was an error." + getEmail() + ","+ ul.get(0).getUid());
                session.close();
                return ERROR;
            }
            session.getTransaction().commit();
        } catch (Exception e) {
            this.addActionError("Oops. An Error Encountered...! Email address " + getEmail() + ","+ ul.get(0).getUid()+" not registered. Try with your new email address.");
            session.close();
            return ERROR;
        }
        this.addActionMessage("Your Uid is : " + ul.get(0).getUid());
        return SUCCESS;
    }

   @Override
    public void validate() {
       if ( "".equals(getEmail()) || getEmail() == null ) {
            this.addActionError("Email is Compulsory to input..!" + getCname());
        } else if (getEmail().indexOf("@") < 0 || getEmail().indexOf(",") > 0 || getEmail().indexOf(".") < 0 || lastEmailFieldTwoCharsOrMore(getEmail()) == false) {
            this.addActionError("Please Input a valid email address." + getCname());
        }
    }
} 
```

当我删除所有 try catch 块时，我得到异常：

```
java.lang.ClassCastException: org.hibernate.impl.QueryImpl cannot be cast to java.util.List 
```

我已经用 POJO 正确地完成了 bean 和表的映射。有人可以指出错误吗？我正在使用带有 Struts 的 Hibernate。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T05:09:25.533

您的代码中的以下行不正确：

```
ul = (List<Users>) session.createQuery(
    "from Users c where c.email = '" + getEmail() + "'"
); 
```

[createQuery](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/Query.html)返回一个查询对象。如果您想要该查询的结果，请使用[Query.list()](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/Query.html#list%28%29)。

```
ul = (List<Users>) session.createQuery(
    "from Users c where c.email = '" + getEmail() + "'"
).list(); 
```

# html - 所有块都应该水平放置

> ID：11481105
> 
> 赞同：1
> 
> 时间：2012-07-14T04:38:39.917
> 
> 标签：html, css

在下面的小提琴中

[http://jsfiddle.net/Qv9uQ/](http://jsfiddle.net/Qv9uQ/)

我希望所有块 1、块 2、块 3、块 4 在同一行。我的表位置必须固定。它不应该改变我尝试使用 display:inline-block。它不工作。

如果我保持表格位置固定并设置边距表格位置也在改变..但我的表格必须固定。

您可以通过在小提琴中运行来尝试以下代码：

```
<div class="Box"  style="width: 15%; height: 67; overflow-n: scroll; display: inline-block;scrollbar-arrow-color: blue;
    scrollbar-face-color: #e7e7e7; scrollbar-3dlight-color: #a0a0a0; scrollbar-darkshadow-color: #888888">
        block 1
</div><br/>

<TABLE CLASS="BODY" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" RULES="NONE"> table 1 </TABLE>

    <div style="width: 20%; height: 67;display: inline-block;
        scrollbar-arrow-color: blue; scrollbar-face-color: #e7e7e7;
        scrollbar-3dlight-color: #a0a0a0; scrollbar-darkshadow-color: #888888">
       block 2
</div> <br/> 

    <table CLASS="BODY" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" RULES="NONE" > table 2</table>

    <div style="width: 22%; height: 67;  display: inline-block;
         scrollbar-arrow-color: blue; scrollbar-face-color: #e7e7e7;
        scrollbar-3dlight-color: #a0a0a0; scrollbar-darkshadow-color: #888888">
        block 3
    </div><br/>

        <table CLASS="BODY" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" RULES="NONE" > table 3</table>

    <div style="width: 25%; height: 67; display: inline-block;
         scrollbar-arrow-color: blue; scrollbar-face-color: #e7e7e7;
        scrollbar-3dlight-color: #a0a0a0; scrollbar-darkshadow-color: #888888">
        block 4
    </div><br/>​

 <table CLASS="BODY" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" RULES="NONE" > table 4</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T04:44:23.030

由于您说您不能更改 HTML 的顺序，因此您需要在`<divs>`. 给每个`<div>`一个`id`和设置`left`每个和`top: 0;`

*演示：http:* [//jsfiddle.net/ThinkingStiff/sZQNc/](http://jsfiddle.net/ThinkingStiff/sZQNc/)

### CSS：

```
<style>
    div {
        top: 0; 
        position: absolute; 
    }

    #block1 {
        left: 0;   
    }

    ​#block2 {
        left: 25%;    
    }

    #block3 {
        left: 50%;    
    }

    ​#block4 {
        left: 75%    
    }​
</style> 
```

# c - 本地指针存储在内存中的什么位置？

> ID：11481114
> 
> 赞同：6
> 
> 时间：2012-07-14T04:40:14.887
> 
> 标签：c, pointers

我是 C 的初学者。我有一个程序如下：

```
int main()
{
    char* func();
    char *c;
    c = func();
    printf("%s", c);
}

char* func()
{
    char *ptr = "OK";
    return ptr;
} 
```

众所周知，`ptr`是一个局部变量，`func()`是一个指针。范围是本地的。但是当`ptr`返回给调用者时`main`，它仍然有效，当`c`打印时，它打印“OK”。

这怎么可能？存储在哪个内存段中`ptr`；堆栈还是堆？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-06-10T10:06:37.207

这就是使用指针时发生的事情（请注意，指针就像名称所暗示的那样，就像手指指向某物一样）。

让我们分解您的代码并一点一点地理解它。在您的主函数中，您声明了一个字符指针 *c

```
char *c; 
```

然后你这样做了：

```
c = func(); 
```

它告诉 c 指针指向这个 func() 指向的任何东西。

让我们看看你的功能

```
char* func()
{
    char *ptr = "OK";
    return ptr;
} 
```

第一行再次声明一个字符指针 ptr，并将“OK”分配给该地址（注意：指针只是指向某个内存地址）。所以现在，该地址包含字符串“OK”（或更准确地说，是一个字符数组）。

然后你返回ptr，这是“OK”所在的地址。请注意，因为 ptr 是在 func() 中声明的，所以它是一个局部变量。因此，一旦返回，它就会从**堆栈**中删除（噗！消失了）。

但是，因为在您的 main() 中：

```
c = func(); 
```

变量 c 指向存储“OK”的地址。因此，即使变量 ptr 不再存在，变量 c 也知道它在哪里，并且仍然可以访问“OK”。

要回答您的问题：

*   ptr 存储在**堆栈中**
*   退出 func() 时 ptr 从堆栈中弹出

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-14T07:22:19.670

让我们暂时忘记堆栈/堆。让我们谈谈C。

局部变量`ptr`在外部不存在`func`，因此调用者*不能也不*应该*引用*它。

但是[C 不会*通过引用传递*](http://c-faq.com/ptrs/passbyref.html)。一切都是按值传递的。将存储的*值*`func`返回给它的调用者。就像您将返回一个或任何其他类型的*值一样。**`ptr`*`int`**

 **因此，对于您的示例，`ptr`' 值是名为 的字符串文字的地址`"OK"`。并且[字符串文字在程序的整个范围内都是有效的](https://stackoverflow.com/q/267114/274261)。所以`func`返回字符串文字的地址，允许在程序的任何地方取消引用。

更清楚地说，`func`相当于：

```
const char * func (void)
{
  return "OK";
} 
```

这就是为什么一切正常的原因。

了解以下内容也很有用：

```
const char * func (void)
{
  char *ptr = "OK";
  return ptr;
} 
```

这不是：

```
const char * func (void)
{
  char ptr[] = "OK";
  return ptr;
} 
```

这是不行的，因为*现在你要返回一个指向**本地*数组的指针`func`。

还有一个小点。应该是：`const char * func ()`，因为`"OK"`不允许修改。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-14T05:10:30.540

当您调用该函数时，它的所有局部变量和返回地址都会压入堆栈。所以 ptr 将在堆栈上，但在常量数据部分中是“OK”字符串。当您从. `func`_ _`ptr``c``ptr``c`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-14T04:43:59.367

文本`"OK"`存储在可执行文件的*常量数据*部分（在进程启动时加载到内存中）。尽管`ptr`它是一个局部变量，但编译器将其初始化为指向`"OK"`存储在别处的变量。当您返回`ptr`调用者时，指针仍然指向相同的`"OK"`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-27T07:55:14.633

如果您指的`OK`是存储字符串的位置，则它存储在内存的**代码部分**`ptr`并存储在**堆栈**中。

并且`OK`in 代码部分的位置仍然可以访问，因为它的地址正在由`func()`.

此外，代码部分是**只读**的。这就是为什么其他答案建议将您的函数声明为：

```
const char * func () 
```

这确保了返回地址指向的值不可修改。（指向常数的指针）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-15T10:31:05.597

ptr 本身在堆栈上是瞬态的，但它指向的不是。一种情况就像在您的 func() 中，哪个字符串文字存储在“常量数据区域”中，另一种情况是在堆上分配数据，即通过 malloc()，因此是全局的并且不会在堆栈时被销毁功能没了。

```
char* func()
{
        char* ptr;
        ptr = (char*)malloc(100);
        strcpy(ptr, "OK");
        return ptr;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-14T09:50:33.817

`char *ptr = "OK";`- 该语句将为变量分配 4 个字节（如果它是 32 位机器），`ptr`它将保存字符串字面量的地址`OK`。现在`ptr`有一个字符串的起始地址（4 字节）`OK`（实际上是 3 个字节，包括`\0`）。这 3 个字节的字符串`OK`将在文本段中，这是一个只读数据。你也不能修改。例如`ptr[0] = 'T'`，在这种情况下是不可能的。文本段中的字符串文字（3 个字节）将存在于整个进程的生命周期中。但是一旦控制从函数中出来`func`，那么分配给变量`ptr`以保存字符串文字地址的 4 个字节将被释放。`func`你也可以像下面这样编写你的函数

```
char* func()
{
    return "OK";
} 
```

如下更改您的功能

```
char* func()
{
    char ptr[] = "OK";
    return ptr;
} 
```

这次将为变量分配 3 个字节`ptr`以在本地存储字符串。此范围仅在功能范围内。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-14T05:58:18.737

`ptr` 保存`"OK"`常量数据段中数据的地址。那就是返回的地址。不是`ptr`So的地址即使`ptr`不复存在，`"OK"`继续存在**

# html - Bash：日期格式为 HTML5 日期时间

> ID：11481115
> 
> 赞同：1
> 
> 时间：2012-07-14T04:40:27.447
> 
> 标签：html, bash, date, date-formatting

`printf $(date +%F)``2012-07-14`根据[shell 脚本中的 YYYY-MM-DD 格式日期](https://stackoverflow.com/a/1401502/242933)打印。但是，如何`2012-07-14T16:39:57-08:00`根据[HTML5 datetime](http://dev.w3.org/html5/markup/datatypes.html#common.data.datetime)打印？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T05:05:59.700

HTML5 需要符合 RFC3339 标准，因此如果您使用的是 gnu 版本的 date，那么 --rfc-3339 扩展将打印您想要的内容

```
antonio@localhost:~$ date --rfc-3339=seconds
2012-07-14 12:57:14+08:00 
```

如果您使用的是 mac 或没有 gnu 版本，则：

```
[13:00] antonio@chimera:~>date +%FT%T%z       
2012-07-14T13:01:35+0800 
```

很接近，但没有雪茄，因为时区部分缺少“：”，所以如果你不想通过 sed、cut 等管道传输它，你可以通过询问日期来输出 UTC 时间并添加手动时区部分（显然 UTC 时间偏移量是 00:00，所以这将始终有效）

```
[13:01] antonio@chimera:~>date -u '+%FT%T+00:00'
2012-07-14T05:01:59+00:00 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T04:43:47.507

```
$ date +%FT%T%z
2012-07-14T00:42:52-0400 
```

我不确定如何在不使用字符串操作的情况下获得时区偏移中的冒号。

```
$ datetime=`date +%FT%T%z`
$ printf ${datetime:0:${#datetime}-2}:${datetime:${#datetime}-2}
2012-07-14T00:42:52-04:00 
```

# database-design - 超表数据库设计

> ID：11481116
> 
> 赞同：1
> 
> 时间：2012-07-14T04:40:28.777
> 
> 标签：database-design, nosql, hypertable

有人可以指点我在这里发布/pdf/explan，在那里我可以了解更多关于超表数据库设计的信息，我在谷歌上搜索过，但没有任何有用的东西出现

我遇到的主要问题是如何存储您“不能”表示为键值的数据。例如，假设我想跟踪用户评论，我可以简单地模仿关系数据库，生成新的评论密钥存储我需要的所有数据，然后对于产品 X 将所有评论的密钥以 json 格式存储到 x.reviews

我想出的另一件事是简单地使用 x.reviewKeys，然后为每个生成的评论推送新密钥作为该单元格的新版本，假设我可以存储同一单元格的无限数量的版本。

第二种方法对我来说似乎更合适，因为我将在代码中实现的所有工作都留给数据库。

有谁知道如何处理这个问题，或者更好的是谷歌如何用他们的 bigtable 处理这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T13:51:55.337

这“几个小时”搜索任何可能导致理解 Hypertable 数据库设计的东西绝对是不够的，但如果有人通过谷歌跑到这里，这就是起点

现在据我所知，你可以定义列族，说，`reviews`每个列族可以有无限数量的键，例如，如果你尝试存储用户数据，你可能会写这样的东西

`userKey:info`并具有多个属性，例如`name, address, email`...您只需定义该条目的键即可访问该信息，例如获取`address`您将`userKey:info:address`用作键的用户

使列族不同的一件事（如果我理解得很好）是您可以获得列族中的所有键，例如，如果您指定`userKey:info`您将获得`userKey:info:name, userKey:info:address, userKey:info:email`结果，这意味着存储我在问题中提到的所有评论您将创建新的列族并存储所有评论的键，最终会得到类似这样的东西`key:reviews:<review_ID>`，它将返回所有评论的 ID（如果您要求它返回键：评论），而不是简单地使用该 ID 来获取详细信息关于具体审查。

所以基本上就像您在列族信息中有属性名称、地址、电子邮件一样，在这里您将使用评论 ID 作为列属性。

现在至少部分确定我做对了，我还检查了 riak 数据库设计（键/值数据库与列数据库的超表不同？）并且似乎他们有桶作为列族的替代品，所以这至少似乎是正确执行

我不知道他们如何在内部实现这一点以使其高效，所以我必须检查一下，因为我总是在上面创建新帐户，所以我将无法更新这篇文章，但如果有人有更多信息发布重播/编辑这篇文章

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T11:58:30.460

因此，如果我理解正确，您有一个包含产品的表和另一个包含评论的表，它们有 1:n 的关系（每个产品可以有多个评论）？

一种方法是使用列限定符。

您的产品表有一个行键（即产品 ID），一些列标题、描述、制造商等。还有一列“评论”：

```
create table Products (title, description, manufacturer, reviews); 
```

对于评论，您可以创建一个唯一键，即行键的 GUID（或足够大的随机数或唯一时间戳；我将在我的示例中使用 GUID）：

```
create table Reviews (author, rating, text); 
```

要创建 1:n 关系，请将评论的行键插入“评论”列族作为限定符（不需要实际的单元格值，可以为空）：

```
INSERT INTO Reviews VALUES ("product-id", "reviews:1273-1234-234-123a", ""); 
```

并检索产品 123 的所有评论：

```
SELECT reviews FROM Products WHERE ROW = "123"; 
```

您甚至可以在“评论”上创建限定词索引以加快某些查询。

# javascript - 如何通过选择复选框和下拉列表来更改标签值

> ID：11481129
> 
> 赞同：0
> 
> 时间：2012-07-14T04:43:11.507
> 
> 标签：javascript, drop-down-menu, checkbox, textbox, onchange

我有 2 个复选框，其中一个包含一个包含 5 个元素的下拉列表。

*   复选框 A
*   复选框 B：下拉列表
*   文本框

首先要检查复选框B是否被选中，然后Textbox只能显示值，否则为空。其次，如果复选框 B 被选中并且下拉列表中的值被选中，那么文本框必须在更改时立即显示值。

```
<input type="checkbox" name="events" value="event02 />
Event 01
</input>
<br/>
<input type="checkbox" name="events" value="event02 />
Event 02:
<select name="selectOne" onchange="amount()">
    <option value="00" selected="selected">00</option>
    <option value="01">01</option>
    <option value="02">02</option>
    <option value="03">03</option>
    <option value="04">04</option>
    <option value="05">05</option>
    <option value="06">06</option>
    <option value="07">07</option>
</select>
<br/>
<input type="text" name="displayTxtBox" id="displayTxtBox" size="10" maxlength="50" value="" /> 
```

我不知道在Javascript中如何编写代码检测检测到的复选框B和下拉列表选择仅在文本框上显示值。

我认为它需要 onChange 和 Javascript 中的一些功能。

请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T05:34:50.630

给定更正的 HTML，添加了`id`属性和`label`元素，为各种表单元素提供额外的点击目标：

```
<input type="checkbox" id="input1" name="events" value="event01" />
<label for="input1">Event 01</label>
<br/>
<input type="checkbox" id="input2" name="events" value="event02" />
<label for="input2">Event 02</label>

<select name="selectOne">
    <option value="00" selected="selected">00</option>
    <option value="01">01</option>
    <option value="02">02</option>
    <option value="03">03</option>
    <option value="04">04</option>
    <option value="05">05</option>
    <option value="06">06</option>
    <option value="07">07</option>
</select>
<br/>
<input type="text" name="displayTxtBox" id="displayTxtBox" size="10" maxlength="50" value="" />​ 
```

以下 JavaScript 似乎适用于您的预期结果，尽管我并不完全确定您的意图：

```
function showAmount(el, selectEl, targetEl, clearOnUncheck) {
    /* the following is an optional, Boolean, variable, so a ternary
       conditional is used, which checks that 'clearOnUncheck' exists, 
       if it does then the variable is assigned its own value,
       if *not* then it's explicitly assigned the value of false
       note it's Boolean, *not* a string: don't quote this value */
    var clearOnUncheck = clearOnUncheck ? clearOnUncheck : false;
    if (!el || !selectEl || !targetEl) {
        // sanity checking, these are *required* arguments for the function
        return false;
    }
    // if the checkbox is checked, continue
    else if (el.checked) {
        /* assigning the conditions I'm testing to variables, so if conditions
           change they only have to be changed in one place */
        var index = selectEl.selectedIndex,
            textcontent = (typeof(el.textContent) != 'undefined');
        if (textcontent) {
            // up-to-date browsers
               /* sets the value of the text-input to be the string contained
                  within the selected option from the select element */
            targetEl.value = selectEl
                .getElementsByTagName('option')[index]
                .textContent;
        }
        else if (window.innerText) {
            // IE < 8
               // as above, but uses innerText for IE
            targetEl.value = selectEl
                .getElementsByTagName('option')[index]
                .innerText;
        }
    }
    /* if the checkbox is unchecked, and you've set the Boolean for the
       optional clearOnUncheck to true (remember, *not* a string, don't quote) */
    else if (!el.checked && clearOnUncheck) {
        /* if clearOnUncheck is true, the value is cleared from the text-input,
           if clearOnUncheck is set to false, or not-set, the text-box value
           persists after unchecking the checkbox */
        targetEl.value = '';
    }
}

// references to the elements
var input2 = document.getElementById('input2'),
    select = document.getElementsByName('selectOne')[0],
    textInput = document.getElementById('displayTxtBox');

// binding the function to the onchange event of the input2 and selectOne elements.
input2.onchange = function() {
    showAmount(input2, select, textInput, true);
};
select.onchange = function() {
    /* because the clearOnUncheck argument depends on the changing of the
       checkbox there's no point in passing it to the showAmount() function
       in the select's onchange event-handler */
    showAmount(input2, select, textInput);
};​ 
```

[JS Fiddle 演示`clearOnUncheck == true`](http://jsfiddle.net/davidThomas/TcMnv/)

[JS Fiddle 演示`clearOnUncheck == false`](http://jsfiddle.net/davidThomas/TcMnv/1/)

[`clearOnUncheck`未设置的 JS Fiddle 演示](http://jsfiddle.net/davidThomas/TcMnv/2/)

参考：

*   [`checked`](https://developer.mozilla.org/en/XUL/Attribute/checked).
*   [`document.getElementById()`](https://developer.mozilla.org/en/DOM/document.getElementById).
*   [`document.getElementsByName()`](https://developer.mozilla.org/en/DOM/document.getElementsByName).
*   [`document.getElementsByTagName()`](https://developer.mozilla.org/en/DOM/document.getElementsByTagName).
*   [`node.textContent`](https://developer.mozilla.org/en/DOM/Node.textContent).
*   [`selectedIndex`](https://developer.mozilla.org/en/XUL/Attribute/selectedIndex).
*   [三元/条件运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Conditional_Operator)。
*   [`typeof`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/typeof).

# php - PHP：获取比时间更新的文件的内容

> ID：11481133
> 
> 赞同：1
> 
> 时间：2012-07-14T04:44:00.740
> 
> 标签：php

目前我有一个 PHP 脚本，它提供中等数量（200 行）的文本。我想知道是否有可能获取比时间最新的文本文件的内容，也许是 PHP 的 filemtime() 进行最后一次修改。

是否可以以这种方式获取文本文件的内容？

编辑： filemtime() 是不合逻辑的，因为它在那之后没有任何更新。

为了清除它，我试图获取比时间更新的文本文件的所有内部内容。

示例：line1 在 time1 发布，line2 在 time2 发布，依此类推。我希望能够指定 time2 并获取比 time2 更新的文件的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T04:52:22.377

您需要为文件中的所有条目加上时间戳。然后使用标准`fopen()`/`fread()`函数，逐行读取内容。然后，您需要使用正则表达式匹配过滤时间`preg_match()`，并将其与您要查找的时间进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T04:48:29.670

您可以按照指示使用 filemtime() 或[stat()](http://us3.php.net/manual/en/function.stat.php)来确定特定文件的最后修改。有了这些信息，您就可以确定什么是最新文件并相应地提取内容。

您可以确定自上次访问以来文件的哪些内容是新内容的唯一方法是将以前的内容与最新内容进行比较，或者具有可用于区分内容过时的时间戳。

如果有某种方法可以在文件中插入时间戳，那么这将允许您确定在该给定点之前存在哪些内容。然后，您将使用正则表达式来过滤时间，以便仅在 X 时间之后检索数据。您将需要某种确定 X 的方法，这取决于您的体系结构，可能就像使用上次更新更新静态文件一样简单。然后，您将使用该值来确定哪些数据是“新的”。

第二种方法是在访问后归档文件，然后将以前的内容与当前内容进行比较，以确定哪些内容发生了变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T04:47:27.933

如果您的意思是“文件比某个时间更新的文件中的内容”，那么是的*。*你似乎已经回答了你自己的问题。`filemtime()`如果您关心修改时间，请使用，并将其与您感兴趣的时间进行比较。

如果您的意思是“文件中的*内容*比某个时间更新”，那么不，不是没有其他方法可以识别文件中的哪些内容比您感兴趣的时间更新。（例如，如果文件的每一行都以时间戳开始，指示该行的写入时间，您可以使用它。）这是因为文件系统通常不会跟踪文件中单个字节或行的时间戳。通常只有与整个文件关联的时间戳。

# visual-c#-express-2010 - Visual c# express 不打开 c# 项目

> ID：11481137
> 
> 赞同：0
> 
> 时间：2012-07-14T04:45:00.243
> 
> 标签：visual-c#-express-2010

我很高兴在 microsoft visual c# express 中制作了一个应用程序，直到我重新启动了我的电脑。重新启动后，我尝试打开同一个项目，它没有打开（什么也没说，只是没有打开任何东西）然后，我打开了visual c# express，搜索了这个项目，它打开了！！！但是现在每次我在 ac# 项目上工作时，我都必须先打开 Visual c# express，然后再查找项目。其他奇怪的事情是，视觉 c# 现在总是以管理员身份运行，所以每次我打开它时都会提示一个窗口，有人知道如何解决这个问题吗？泰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T01:09:51.417

嗯，我会尝试重新安装 C# express，看看是否能解决问题。如果不是，那么它可能是您的 UAC 级别的问题。由于 VS 正在运行自己的托管进程，因此它可能需要比获得的权限更多的权限，如果重新安装不起作用，请尝试删除 UAC 授权并运行 VS。如果在没有 UAC 的情况下运行不起作用，我会联系 Microsoft 支持。

如需帮助删除 UAC： [http ://sshguy.hubpages.com/hub/DIsable-UAC---Complete-Disabling-Tutorial](http://sshguy.hubpages.com/hub/DIsable-UAC---Complete-Disabling-Tutorial)

# objective-c - 使动画与声音同步

> ID：11481140
> 
> 赞同：0
> 
> 时间：2012-07-14T04:45:38.790
> 
> 标签：objective-c, xcode, cocoa-touch, animation

我创建了一组图像并使用以下方法对它们进行动画处理：

```
imageview.animationImages = images;

imageview.animationDuration = 1;

imageview.animationRepeatCount = 1;

[imageview startAnimating]; 
```

这`imageview`是一个指向 UIImageView 对象的指针，并且`images`是数组。我正在使用圆形矩形按钮来触发动画。当我在模拟器打开后第一次运行动画时......动画不与声音同步，但在我再次按下按钮时使用它一次后它会同步。知道为什么吗？我正在使用系统声音 API 播放短声音。我为声音创建了一个`id`，然后使用：

```
AudioServicesPlaySystemSound(soundID); 
```

我的猜测是，当我第一次触发动画时，模拟器需要一些时间来处理我正在使用的图像并构建数组。我总共使用了 45 张图片。因此，声音始终领先于动画图像。但是当我再次尝试时，图像已经被处理过，所以动画和声音都是同步的。但这只是一个猜测。我不知道该怎么办。如果你想看看这里的整个代码，它是：

```
-(IBAction)btnclicked:(id)sender { 
    NSMutableArray *images = [[NSMutableArray alloc]init]; //all alloc does is allocate memory. The -init method is crucial to actually initialize the object into a working state.
    for (int imagenumber = 1; imagenumber <= 45; imagenumber++) {
        NSMutableString *myString = [NSMutableString stringWithFormat:@"%i.png", imagenumber];
        [images addObject:[UIImage imageNamed:myString]];
    }
    CGRect frame = CGRectMake(0.0, 0.0, 320, 460);
    UIImageView *imageview = [[UIImageView alloc] initWithFrame:frame];
    imageview.contentMode = UIViewContentModeScaleToFill;
    imageview.animationImages = images;

    imageview.animationDuration = 3.2;

    imageview.animationRepeatCount = 1;

    [imageview startAnimating];

    [self.view addSubview:imageview];

    AudioServicesDisposeSystemSoundID(soundID);
    NSString *path = [[NSBundle mainBundle] pathForResource:@"giggity stick around" ofType:@"wav"];
    NSURL *url = [NSURL fileURLWithPath:path];
    AudioServicesCreateSystemSoundID((CFURLRef)url, &soundID);
    AudioServicesPlaySystemSound(soundID);
    [imageview release];

} 
```

只是为了避免任何混淆......我的图像被命名为 1.png、2.png 等等，这就是我在构建数组时使用迭代的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T06:05:20.327

最好的方法是创建一个播放声音的函数，如下所示：-(void)playSound，然后在您的按钮操作中，您应该编写一个指向 playSound 函数的链接：[self playSound]。这是一个简单的：

```
-(IBAction)XXX:(id)sender
{
    //your imagesArray
    [self playSound];
    imageview.animationDuration = 1;
    imageview.animationRepeatCount = 1;
    [imageview startAnimating];
}

-(void)playSound
{
    //yourcode for playing the sound
} 
```

希望它的帮助。

编辑：试试这个：

```
-(IBAction)btnclicked:(id)sender { 
NSMutableArray *images = [[NSMutableArray alloc]init]; //all alloc does is allocate memory. The -init method is crucial to actually initialize the object into a working state.
for (int imagenumber = 1; imagenumber <= 45; imagenumber++) {
    NSMutableString *myString = [NSMutableString stringWithFormat:@"%i.png", imagenumber];
    [images addObject:[UIImage imageNamed:myString]];
}
CGRect frame = CGRectMake(0.0, 0.0, 320, 460);
UIImageView *imageview = [[UIImageView alloc] initWithFrame:frame];
imageview.contentMode = UIViewContentModeScaleToFill;

    NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/giggity stick around.wav", [[NSBundle mainBundle] resourcePath]]];
soundPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:nil];
soundPlayer.volume = 1;
[soundPlayer play];    

imageview.animationImages = images;

imageview.animationDuration = 3.2;

imageview.animationRepeatCount = 1;

[imageview startAnimating];

[self.view addSubview:imageview];

} 
```

我使用 AVFoundation 播放音频，现在检查一下。

# c# - C# - DataGridView - 同一行上的图像和文本

> ID：11481142
> 
> 赞同：6
> 
> 时间：2012-07-14T04:46:07.590
> 
> 标签：c#, .net, winforms, datagridview

我在 DataGridView 上寻找类似的东西：

```
Image  | Text | 
Text   | Text |
Image  | Text 
```

基本上，我只希望图像单元格和文本单元格在同一行。我能够让它与不同的类型一起使用，例如：复选框、文本等……但我无法让它与图像一起使用。

我收到此错误：`Invalid Cast from 'System.String' to 'System.Drawing.Image'`

有人知道解决方案或对我应该如何做有建议吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-14T14:56:24.853

`DataGridViewImageColumn`在某些单元格中显示文本类型的列相对容易。

您需要做的就是将所需的单元格替换为`DataGridViewTextBoxCell`.

例如，如果我将以下图像列添加到我的网格中：

```
DataGridViewImageColumn imageColumn = new DataGridViewImageColumn();
imageColumn .Name = "ImageColumn";
imageColumn .HeaderText = "An Image!";
Image i = Image.FromFile(@"C:\Pictures\TestPicture.jpg");
imageColumn.Image = i;
dataGridView1.Columns.Add(imageColumn); 
```

您可以用这样的文本替换给定的单元格（在按钮处理程序中，但您也可以在数据绑定完成处理程序中的某处进行）。

```
private void button1_Click(object sender, EventArgs e)
{
    dataGridView1.Rows[3].Cells["ImageColumn"] = new DataGridViewTextBoxCell();
    dataGridView1.Rows[3].Cells["ImageColumn"].Value = "Some text!";  
} 
```

如果您想要不同的图像（您需要绑定到图像类型的属性）并且想要不同的文本，此解决方案会为您留下一些工作。由于图像列的 Value 属性是 Image 类型，因此您不能使用相同的绑定。

您可以制作自己的覆盖图像列来处理此问题，但这会有点工作，与简单地为您想要文本的单元格设置值相比，这可能不会为自己付出代价。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-07T14:15:42.417

我发现我必须处理`DataGridViewCellFormattingEventHandler`并分配图像`DataGridViewCellFormattingEventHandler`（它在退出时抛出异常）。

在`DataGridViewCellFormattingEventHandler`我分配`e->Value = System::Drawing::Image::FromFile("c:/Test.jpeg");`
或
`e.Value = System.Drawing.Image.FromFile("c:/Test.jpeg");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T10:44:19.550

如需更好的解决方案，请参阅此[Blogspot](http://csharpuideveloper.blogspot.com/2010/09/how-to-insert-image-with-text-in-one.html)帖子。

我为我的项目尝试了相同的解决方案，它运行良好，在我的数据网格单元格中显示 16X16 像素的图像，我在上面的`TextandImageColumn`类中编辑了函数：

```
protected override void Paint(Graphics graphics, Rectangle clipBounds,
    Rectangle cellBounds, int rowIndex, DataGridViewElementStates cellState,
    object value, object formattedValue, string errorText,
    DataGridViewCellStyle cellStyle,
    DataGridViewAdvancedBorderStyle advancedBorderStyle,
    DataGridViewPaintParts paintParts)
    {
        // Paint the base content
        base.Paint(graphics, clipBounds, cellBounds, rowIndex, cellState,
           value, formattedValue, errorText, cellStyle,
           advancedBorderStyle, paintParts);

        if (this.Image != null)
        {
            PointF p = cellBounds.Location;
            p.X += 0;
            p.Y += 4;

            graphics.DrawImage(this.Image, p);
        }
    } 
```

# javascript - 关闭servlet中的弹出窗口并刷新父窗口

> ID：11481146
> 
> 赞同：0
> 
> 时间：2012-07-14T04:46:50.147
> 
> 标签：javascript, servlets

我正在使用使用 Facebook 进行身份验证的 servlet 创建一个 Web 应用程序。因此，每当用户按下登录按钮时，我都会打开一个新的弹出窗口，用户在其中输入 Facebook 登录凭据，然后将其重定向到 servlet。在 servlet 中，我提取登录用户的信息并创建一个会话。创建会话后，我希望关闭此弹出窗口并将父窗口刷新到另一个位置。要打开弹出窗口，我使用以下脚本

```
function popitup(url) {
    newwindow=window.open(url,'name','height=200,width=150');
    if (window.focus) {newwindow.focus()}
return false;
} 
```

我想模仿 Facebook 点赞框在您点击赞但未登录时使用的相同机制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T04:56:39.663

也许将此代码添加到您的 servlet 页面并在单击按钮时调用该函数？

```
<script language="javascript">
function closeWin() {
   window.close();
}
</script>

<input type="button" onclick="closeWin;" /> 
```

可能会有一个安全弹出窗口警告您应用程序正在尝试关闭窗口并且您是否接受。我知道避免这种情况的唯一方法是引用'opener'，它是父窗口，可能会模糊弹出窗口，然后可能是打开页面的 onFocus() 它调用一个函数来关闭子窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T05:04:09.163

在弹出窗口中完成工作后，您应该调用 refreshParent()

```
<script language="JavaScript">

function refreshParent() {
  window.opener.location.href = window.opener.location.href;
  window.close();
}

</script> 
```

这将刷新父级并关闭弹出窗口。

不要忘记此代码应该在您的弹出窗口中，并且只有在弹出窗口中完成所有工作后才调用

# c# - 具有存储库模式的 DAL 和没有存储库模式的 DAL 的区别？

> ID：11481149
> 
> 赞同：1
> 
> 时间：2012-07-14T04:47:27.760
> 
> 标签：c#, entity-framework, design-patterns, repository-pattern

前段时间我开始使用 EF 作为 DAL，并且从教程和视频中了解了存储库模式和工作单元模式。

关于存储库，我了解到它是对 DAL 的抽象，它将业务逻辑与数据访问代码分开。此外，它避免了数据访问代码的声誉并有助于单元测试。

我了解存储库模式是制作 DAL 的一种特殊方式。但它带来了什么？我没有得到。我的困惑只是制作一个 DAL（一个单独的类库/项目），它也会带来这些好处（将数据访问逻辑与业务逻辑分开，保存数据访问代码的声誉，帮助单元测试等）。

可能我仍然缺少存储库模式的好处。请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T04:51:53.777

数据访问层应该处理数据库等数据源，但要实现[MSDN](http://msdn.microsoft.com/en-us/library/ff649690.aspx)描述的一些更高级别的目标，您需要存储库模式。

根据[MSDN](http://msdn.microsoft.com/en-us/library/ff649690.aspx)

> *   您希望最大限度地利用自动化测试的代码量，并隔离数据层以支持单元测试。
> *   您从多个位置访问数据源，并希望应用集中管理、一致的访问规则和逻辑。
> *   您希望为数据源实施和集中缓存策略。您希望通过将业务逻辑与数据或服务访问逻辑分开来提高代码的可维护性和可读性。
> *   您希望使用强类型的业务实体，以便您可以在编译时而不是在运行时识别问题。
> *   您希望将行为与相关数据相关联。例如，您想要计算字段或在实体内的数据元素之间实施复杂的关系或业务规则。
> *   您想应用域模型来简化复杂的业务逻辑。

# batch-file - 批处理文件调用子批处理文件传递n个参数并返回而不使用文件

> ID：11481150
> 
> 赞同：28
> 
> 时间：2012-07-14T04:47:33.160
> 
> 标签：batch-file

我正在寻找一种使用 Windows 批处理文件的方法，该文件调用传递 1-9 个参数和返回值（字符串）的子批处理文件，而无需将返回值保存到文件/等中。我将返回值保存到变量中，就像在 @FOR /F 中所做的那样

我看着

```
@FOR /F "tokens=*" %%i IN ('%find_OS_version%') DO SET OS_VER=%%i 
```

和

```
Call function/batch %arg1% %arg2% 
```

我没有看到如何设置来执行此操作

**编辑**：dbenham 有点回答我的问题。他的例子是在批处理文件主要部分和功能之间。我的问题是在两个不同的批处理文件之间。以 dbenham 为基础的答案是以下布局。

主批处理文件

```
CALL sub_batch_file.bat  return_here "Second parameter input"

REM echo is Second parameter input
ECHO %return_here%
REM End of main-batch file 
```

sub_batch_file.bat

```
@ECHO OFF
SETLOCAL

REM ~ removes the " "
SET input=%~2
(
    ENDLOCAL
    SET %1=%input%
)
exit /b
REM End of sub-batch file 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-07-14T18:09:18.847

通常批处理函数以两种方式之一返回值：

`EXIT /B n`1) 使用where n = some number可以通过错误级别返回单个整数值。

```
@echo off
setlocal
call :sum 1 2
echo the answer is %errorlevel%
exit /b

:sum
setlocal
set /a "rtn=%1 + %2"
exit /b %rtn% 
```

2）更灵活的方法是使用环境变量返回一个或多个值

```
@echo off
setlocal
call :test 1 2
echo The sum %sum% is %type%
call :test 1 3
echo The sum %sum% is %type%
exit /b

:test
set /a "sum=%1 + %2, type=sum %% 2"
if %type%==0 (set "type=even") else (set "type=odd")
exit /b 
```

存储答案的变量名可以作为参数传入！并且中间值可以从主程序中隐藏。

```
@echo off
setlocal
call :test 1 2 sum1 type1
call :test 1 3 sum2 type2
echo 1st sum %sum1% is %type1%
echo 2nd sum %sum2% is %type2%
exit /b

:test
setlocal
set /a "sum=%1 + %2, type=sum %% 2"
if %type%==0 (set "type=even") else (set "type=odd")
( endlocal
  set "%3=%sum%"
  set "%4=%type%"
)
exit /b 
```

有关最后一个示例如何工作的完整说明，请阅读 DOStips 上的这个出色的[批处理函数教程](http://www.dostips.com/DtTutoFunctions.php)。

**更新**

以上对于可以返回的内容还是有限制的。有关支持更广泛值的基于 FOR 的替代方法，请参阅[https://stackoverflow.com/a/8254331/1012053 。](https://stackoverflow.com/a/8254331/1012053)请参阅[https://stackoverflow.com/a/8257951/1012053](https://stackoverflow.com/a/8257951/1012053)，了解一种“神奇”技术，在任何情况下都可以安全地返回绝对长度 < ~8190 的任何值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-11T17:30:08.360

小**提示**

```
Setlocal EnableDelayedExpansion
IF 1==1 (
    CALL :LABEL
    echo 1: %errorlevel%
    echo 2: !errorlevel!
)
echo 3: %errorlevel%

:LABEL
EXIT /B 5 
```

输出将是：

```
1: 0
2: 5
3: 5 
```

*EnableDelayedExpansion*允许您使用！var_name！在执行时扩展 var，而不是解析时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T05:34:39.833

你错过了几件事：

*   使用反引号而不是单引号。
*   使用 tokens 命令在双引号内添加 usebackq。

这个字符`不是这个字符'

在美式英语键盘上，反引号是 shift-tilde，通常位于数字行中 1 的左侧。

```
@FOR /F "usebackq tokens=*" %%i IN (`%find_OS_version%`) DO SET OS_VER=%%i
```

# php - 我可以像这样链接“或”语句吗？

> ID：11481152
> 
> 赞同：1
> 
> 时间：2012-07-14T04:47:48.697
> 
> 标签：php

给定这些变量：

```
$bar = false;
$baz = false;
$boo = "hi there";
$jelek = false; 
```

当我`or`像这样链接在一起时：

```
$foo = $bar or
$foo = $baz or
$foo = $boo or
$foo = $jelek;

echo $foo; 
```

它回来了`hi there`！那么，这是正确的用法`or`吗？因为如果是这样，那就太性感了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T04:54:07.833

不幸的是，你*不能*在 PHP 中做你可以在 JavaScript 中做的事情：

```
var $foo = $bar || $baz || $boo; 
```

但是，您可以使用[链式三元运算符](http://ideone.com/s8iqK)：

```
$foo = $bar ? $bar : (
       $baz ? $baz : (
       $boo ? $boo : (
       NULL))); 
```

*这不是很好*，因为重复的变量名称，但它可以链接。

```
$foo = $a ? $a : (
       $b ? $b : (
       $c ? $c : (
       $d ? $d : (
       $e ? $e : (
       $f ? $f : (
       NULL)))))); 
```

* * *

或者，只需[将它们全部填充到列表中并循环遍历它](http://ideone.com/DZEVA)，获取找到的第一个真实值。

```
$foo = NULL;
foreach (array($bar, $baz, $boo) as $val) {
    if ($val) {
        $foo = $val;
        break;
    }
} 
```

这个选项，IMO，是迄今为止最易读、最容易维护和最容易理解的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T04:53:47.167

您不能`or`以这种方式使用，因为`or`只会返回一个布尔值。你可以用嵌套的三元运算符来做这件事，这很酷，但我很难称它为更清洁。我认为没有比您列出的第一种方法更好的方法了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T04:56:03.673

你不能使用`or`你想要的方式。但你可以这样做：

```
$foo = $bar ? $bar : (!$baz ? $boo : $baz); 
```

# knockout.js - knockout.js 通过 ko.computed 语句中的选定值使用 ko.observable

> ID：11481153
> 
> 赞同：1
> 
> 时间：2012-07-14T04:47:51.970
> 
> 标签：knockout.js

我试图通过一些困难的淘汰赛来实现以下目标：

1.  绑定一个选择表单元素......这有效
2.  通过 ko.observable 显示选定的选项...这有效
3.  在 ko.computed 变量中使用 #2 中的 ko.observable...我想不通。

到目前为止，这是我尝试的[小提琴。](http://jsfiddle.net/W2ABG/)有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T05:05:12.877

计算出的 observables 会立即被评估。当您`viewModel`在示例中的对象文字中创建变量时，它还不能在您的计算 observable 中使用。

几个选择。像这样写：

```
var viewModel = {
    optionValues: [10, 20, 30],
    selectedOptionValue: ko.observable()
};

viewModel.multipledValue = ko.computed(function(){
    return this.selectedOptionValue() * 3;
}, viewModel);

ko.applyBindings(viewModel);​ 
```

或者

```
var ViewModel = function() {
   this.optionValues = [10, 20, 30];
   this.selectedOptionValue = ko.observable();
   this.multipledValue = ko.computed(function(){
        return this.selectedOptionValue() * 3;
   }, this);

};

ko.applyBindings(new ViewModel()); 
```

此外，`selectedOptionValue`它是一个可观察的，因此您可以通过将其作为不带参数的函数调用来读取它的值，例如： `this.selectedOptionValue()`

# c++ - gcc 链接的默认库？

> ID：11481154
> 
> 赞同：23
> 
> 时间：2012-07-14T04:47:59.803
> 
> 标签：c++, c, linux, macos, gcc

假设我有一个非常简单的 C 文件（称为 foo.c）：

```
int main()
{
   printf("foo");
   return 0;
} 
```

现在我调用 gcc：

```
gcc foo.c 
```

当我调用 gcc 时（没有选项，如上例所示），默认链接了哪些库，它们位于何处？（在 Mac OS X 10.7 上）

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-14T05:11:24.300

`-v`选项将`gcc`导致它转储有关它将使用的默认选项的信息，包括库路径和默认库以及将链接的目标文件。

如果您提供该`-Wl,--verbose`选项，gcc 会将 传递`--verbose`给链接器，链接器将准确转储它正在寻找库的位置，包括失败和成功的搜索。

结合这两个选项，您将确切地看到链接了哪些库，以及链接它们的原因。

```
gcc -v foo.c -Wl,--verbose 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T04:49:26.747

ldd 二进制名称。[http://www.opennet.ru/man.shtml?topic=ldd&category=1&russian=2](http://www.opennet.ru/man.shtml?topic=ldd&category=1&russian=2)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-14T04:54:39.197

默认情况下，标准库是链接的。它们位于 linux 机器的 /usr 中

# javascript - 两次转义字符，java和javascript

> ID：11481161
> 
> 赞同：0
> 
> 时间：2012-07-14T04:50:13.640
> 
> 标签：javascript, jquery, escaping, liferay

我想在 JSF 中获取文本框的 ID 以将 keyup 事件与 jQuery 绑定。

我有`$('#A3023\\:formId\\:textboxId').live('keyup', function(){...});`javascript代码，它工作正常。但我必须在服务器端调用 JavaScript。

所以，我尝试使用`$('#A3023\\\\:formId\\\\:textboxId')` 双重转义`\`，但它不起作用。

我正在使用 liferay 调用 JavaScript

```
JavascriptContext.addJavascriptCall(FacesContext.getCurrentInstance(), 'script code'); 
```

我有一些测试`alert()`。它仍然有效，但没有任何 ID。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T06:32:56.800

在 JavaScript`\`中也是一个转义字符。因此，通过在 jQuery 选择器的字符串中添加双反斜杠，您实际上只是包含了一个文字单反斜杠字符——然后 jQuery 以某种方式将其解释为冒号/句点的内部转义字符。

现在，由于该`\`字符也是 Java 转义字符，这意味着要生成相同的字符串文字，您无需进行任何更改。

即将字符串传递`"$(\"#A3023\\:formId\\:textboxId\")"`到您的服务器端执行方法就足够了。

# c# - 正则表达式提取多个数字和浮点值

> ID：11481162
> 
> 赞同：0
> 
> 时间：2012-07-14T04:50:19.017
> 
> 标签：c#, regex

我是正则表达式的新手。我的字符串格式如下
：1）372 万人（国家排名：第 6）（2004 年估计）
2）10000 人（2007 年估计）

我想从这两种字符串中提取人口数和时间。如何在 C# 的正则表达式中做到这一点。还是我需要编写多个正则表达式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T05:25:20.027

这是一个起点：

```
(?<population>\d\(.\d+)?)  #capturing group named "population"
                           #that is a number, optionally followed by a
                           #decimal point and at least one number
\s*                        #followed by one or more spaces
(?<magnitude>thousand|(m|b)illion)? #optional capturing group named "magnitude"
                                    # that matches "thousand", "million", or "billion"
\s*                        #one or more whitespace characters
people                     #the literal "people"
.*                         #match any number of characters
\(                         #Find literal opening parentheses...
   (?<year>\d{4})          #...followed by a four-digit year...
\s                         #...followed by a space...
estimate\)                 #...followed by the phrase "estimate)"
\s*$                       #followed by optional whitespace
                           #and the end of the string 
```

显示用法的简单驱动程序：

```
class Program
{
/// Generate test strings
static IEnumerable<string> Generator()
{
    yield return "3.72 million people (country rank: 6th) (2004 estimate)";
    yield return "10000 people (2007 estimate)";
}

public static void Main()
{
    string expression = @"
(?<population>\d(.\d+)?)  #capturing group named 'population'
                           #that is a number, optionally followed by a
                           #decimal point and at least one number
\s*                        #followed by one or more spaces
(?<magnitude>thousand|(m|b)illion)? #optional capturing group named 'magnitude'
                                    # that matches 'thousand', 'million', or 'billion'
\s*                        #one or more whitespace characters
people                     #the literal 'people'
.*                         #match any number of characters
\(                         #Find literal opening parentheses...
   (?<year>\d{4})          #...followed by a four-digit year...
\s                         #...followed by a space...
estimate\)                 #...followed by the phrase 'estimate'
\s*$                       #followed by optional whitespace
                           #and the end of the string";

    RegexOptions options = 
        RegexOptions.IgnorePatternWhitespace // allow whitespace/comments
        | RegexOptions.IgnoreCase
        | RegexOptions.ExplicitCapture; // Only capture named groups

    Regex r = new Regex(expression, options);
    foreach (var test in Generator())
    {
        Match match = r.Match(test);
        if (!match.Success)
            Console.WriteLine("Could not match {0}", test);
        else
        {
            double population = double.Parse(match.Groups["population"].Value);
            if (match.Groups["magnitude"].Success) // magnitude is optional
                                                   // but if present, need to
                                                   // multiply population
            {
                switch (match.Groups["magnitude"].Value.ToLower())
                {
                    case "thousand": population *= 1000; break;
                    case "million": population *= 1E6; break;
                    case "billion": population *= 1E9; break;
                    default: throw new FormatException("Unexpected value in magnitude group");
                }
            }
            int year = int.Parse(match.Groups["year"].Value);
            Console.WriteLine("In {0}, population was {1} people.", year, population);
        }
    }
} 
```

输出：

```
In 2004, population was 3720000 people.
In 2007, population was 10000 people. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T05:52:54.230

尝试：

```
(?<number>\d+.\d*)(?: million)? people(?: \(country rank: 6th\))? \((?<year>\d+) estimate\) 
```

在[http://regexhero.net/tester/](http://regexhero.net/tester/)它给出了这个结果： ![在此处输入图像描述](../Images/bae6ebf87a22a026231c719ef2bd5e28.png)

在[http://myregextester.com/index.php](http://myregextester.com/index.php)你得到： ![在此处输入图像描述](../Images/4884a9aa331a6ca2c3dcceba8707e01b.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T05:20:06.383

如果您的目标是这种模式，请尝试下一个`Regex`：

```
[population/number and text] people [some text] ([date] estimate) 
```

正则表达式：

```
var match = Regex.Match(inputString, 
                        @"(?<number>[\.\d]+(\s+\w+)?)\s+people .+\((?<date>\d+)\s+estimate\)");

var population = match.Groups["number"].Value;
var date = match.Groups["date"].Value; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T05:24:14.897

您可能需要两个正则表达式，因为您想以不同的方式处理它们。我复制粘贴了你的整个两行，包括“1)”和“2)”。这是针对人口的（开头有一个空格）：

```
 \d+(?!\w)\.?(?=\d*)\d* 
```

一个空格后跟一个或多个数字，如果它后面没有字母，后跟一个或零个点，仅当下一个字符是一个或多个数字，后跟数字时才有效。至于像百万/千这样的词，你必须用零替换它们。

然后是日期部分：

```
(?:\()\d{4}(?!\d) 
```

匹配左括号而不记住它，如果第五件事不是数字，则后面跟着四个数字。

希望有帮助。老实说，我不太了解 c#，我在 JavaScript 中测试了这些。

编辑：其他人有更完整的答案，他们实际上是在 c# 中，去检查一下。

# ruby-on-rails - has_many 应该至少有两个条目，其中一个应该是 true

> ID：11481163
> 
> 赞同：1
> 
> 时间：2012-07-14T04:50:51.257
> 
> 标签：ruby-on-rails, validation, has-many

我有以下情况

用户可以创建一个问题

1.  选项中至少有 2 个答案
2.  其中一个必须标记为正确（答案的布尔字段为“is_correct”）

对于第一部分，我正在模型中尝试以下代码

“问题”模型

```
class Question < ActiveRecord::Base
  has_many :answers
  validate :at_least_two_answers

  private
    def at_least_two_answers
      if answers.size < 2
        errors[:base] << "Need at least 2 answers"
      end
    end
end 
```

“答案”模型

```
class Answer < ActiveRecord::Base
  belongs_to :question
end 
```

但我无法弄清楚如何为第二部分编写验证。我将非常感谢有关如何为此编写验证的任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T05:49:08.353

通过以下方式使您的错误消息更有意义：

```
count = answers.count { |a| a.is_correct? }
errors[:base] << (count == 0 ? "One answer should be correct" : "Only one answer can be correct") unless count == 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T18:54:47.773

谢谢您的帮助。计数的东西不起作用，因为我得到的`answers.count`是 0。（一定是因为尚未创建答案记录）

但是对您的答案几乎没有修改，我解决了这个问题。

```
validate :one_answer_right

def one_answer_right
  count = 0
  answers.each do |a|
    if a.is_correct?
      count += 1
    end
  end
  errors[:base] << (count == 0 ? "One answer should be correct" : "Only one answer can be correct") unless count == 1
end 
```

# jquery - 如何为 Jcrop 'setSelect' 选项指定自定义值？

> ID：11481164
> 
> 赞同：1
> 
> 时间：2012-07-14T04:51:00.637
> 
> 标签：jquery, jcrop

我无法理解 Jcrop 'setSelect' 选项。在 jCrop 网站上，它列出了一个示例

```
setSelect:   [ 100, 100, 50, 50 ] 
```

通常他们称之为

```
setSelect:   [ x, y, x2, y2 ] 
```

现在，在数学上，我假设这意味着图像左下角和右上角的坐标。也就是说，(x,y) 和 (x2,y2) 是坐标。但是他们给出的例子似乎表明它分别是右上角和左下角。这似乎很奇怪。无论如何，我试图概括 setSelect 功能，因为我可能不知道将被“jCropped”的照片的确切尺寸。这是我的代码，但它不起作用：

```
setSelect:   [ $('#cropbox').width()/4,
               $('#cropbox').height()/4,
               ($('#cropbox').width()/4)*3,
               ($('#cropbox').height()/4)*3] 
```

使用此代码时未选择任何内容。但是，当我使用示例代码`setSelect: [ 100, 100, 50, 50 ]`时，它可以工作。但我不想使用它，因为我不知道被裁剪照片的实际尺寸。为什么我的代码不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T05:28:53.433

我看了看这个 Jcrop 的东西。看起来当它计算这些值时，它期望它们被`Math.round()`编辑，可以这么说。[我整理了一个 jsFiddle，展示了需要完成的核心内容](http://jsfiddle.net/kLbVM/3/)。

另外，这是代码->

**jQuery** ->

```
var jcrop_api;
jcrop_api = $.Jcrop('#cropbox');
function getDimensions(){
  return [
    Math.round($('#cropbox').width() / 2),
    Math.round($('#cropbox').height()/2),
    Math.round($('#cropbox').width()/ 4),
    Math.round($('#cropbox').height()/4)
  ];
}
$(function(){
  $('#setSelect').click(function(){
    jcrop_api.setSelect(getDimensions());
  });      
}); 
```

**HTML 结构**->

```
<div id="cropbox">
   <img src="http://media.giantbomb.com/uploads/2/27962/1867070-illionois_state_bird_and_flower.jpg" />     
</div><br/>
<button id="setSelect"> Set Select </button> 
```

确保您包含此插件的相关 JS 和 CSS 文件，并且所有文件都应该是开箱即用的。

# mysql - 显示按列的数据

> ID：11481171
> 
> 赞同：0
> 
> 时间：2012-07-14T04:51:44.593
> 
> 标签：mysql

我的数据库中有数据

```
userid    module      course     total
  8      Biophysics     A          117
  8      BioPhysics     B           74
  8      BioPhysics     C          135 
```

我需要像这样的输出

```
userid      module       Courses        grade   
 8        BioPhysics    Course A: 117    250
                        Course B: 134  
                        Course C: 35 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T05:12:39.193

您要完成的是将`PIVOT`行数据“ ing”到单独的列中，这是 MySQL 不支持的功能，但是如果您事先知道要旋转的数据范围，您*可以*做的是***伪造***它成列。

* * *

## 你有几个选择：

您的示例具有**A**、**B**和**C**的`course`每个`userid -> module`组合。假设 in 中的值`course`只能是**A**、**B**或**C**：您可以对每个值进行*条件聚合，如下所示：*

```
 SELECT userid,
         module,
         MAX(CASE course WHEN 'A' THEN total END) AS A,
         MAX(CASE course WHEN 'B' THEN total END) AS B,
         MAX(CASE course WHEN 'C' THEN total END) AS C,
         SUM(total) AS grade
    FROM tbl
GROUP BY userid, 
         module 
```

您可以根据`CASE`需要添加任意数量的聚合（对于**D**、**E**、**F**等）。请记住，某些`userid -> module`组合可能具有`NULL`某些列，例如，如果它不包含带有`C`for的行`course`。

但是，如果您事先***不***知道值的范围（也许 可能有数百个不同的值`course`，您仍然可以将所有数据放在一行中，但它不会在单独的列中 - 它实际上是一个在单个列中连接字符串。这是通过使用来完成的`GROUP_CONCAT()`：

```
 SELECT userid,
         module,
         GROUP_CONCAT(CONCAT(course, ': ', total) SEPARATOR ' / ') AS coursetotals,
         SUM(total) AS grade
    FROM tbl
GROUP BY userid,
         module 
```

这会输出如下内容：

```
userid  |  module      |  coursetotals             |  grade
-------------------------------------------------------------
8       |  BioPhysics  |  A: 117 / B: 74 / C: 135  |  326 
```

* * *

## 这是两个选项的[SQL-Fiddle 演示](http://sqlfiddle.com/#!2/068de/2/0)

* * *

**编辑：**根据您的评论和编辑，这是新的解决方案：

```
SELECT 
    a.userid, 
    a.module, 
    CONCAT('Course ', course, ': ', total) AS Courses, 
    b.grade
FROM
    tbl a
INNER JOIN
(
    SELECT userid, module, SUM(total) AS grade
    FROM tbl 
    GROUP BY userid, module
) b ON a.userid = b.userid AND a.module = b.module 
```

# java - 使用小程序在java中绘制数学函数

> ID：11481173
> 
> 赞同：0
> 
> 时间：2012-07-14T04:52:03.840
> 
> 标签：java

我在我的 java 书中处理这个例子，它应该绘制一个数学函数并且它确实有效，但我不明白最后两行，有人可以向我解释一下吗？假设这`data`是一个双精度数组并保存某个“范围”的函数值，在这种情况下，范围是 -pi 到 pi。

这本书对这段代码有一个注释，我知道它在做什么，但我想知道为什么我们在这个循环中做最后两行。

```
// Scale and translate data values
for (int i = 0; i < d.width; i++) {
        double value = data[i];
        double k = (value - min) / (max - min);
        data[i] = d.height * (1 - k);
    } 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T05:10:01.353

当然。为了绘制图形，需要对函数的 y 值进行缩放，以使其适合绘制区域的高度。`k`它的缩放版本也在 0 到 1 的范围内 - 也就是说，`y`最小值将映射到 0，最大值将映射到 1。最后，通过转换`k`为 0 和 之间的值来找到要绘制的数据点`d.height`。

# c# - 如何使用 DropDownList 更新 GridView 中的此列？

> ID：11481175
> 
> 赞同：-1
> 
> 时间：2012-07-14T04:52:11.850
> 
> 标签：c#, asp.net, gridview, sql-server-2008-r2

我有以下数据库设计：

```
Employee Table: Username, Name, JobTitle, BadgeNo, IsActive, DivisionCode
Divisions Table: SapCode, DivisionShortcut 
```

我有一个 GridView，我用它来添加、删除和更新/编辑员工信息。此信息是员工用户名、姓名、徽章编号、职位名称、IsActive 和部门快捷方式。这些部门将列在 DropDownList 中，但我仍然无法更新此列，我不知道为什么。

**那么如何修复这个错误呢？我尝试了所有的可能性，但我仍然在苦苦挣扎**

ASP.NET 代码：

```
<asp:GridView ID="GridView1" runat="server" AllowSorting="True" 
            AutoGenerateColumns="False" DataKeyNames="Username" 
            DataSourceID="SqlDataSource1" BorderWidth="1px" BackColor="#DEBA84" 
             CellPadding="3" CellSpacing="2" BorderStyle="None" 
             BorderColor="#DEBA84" OnRowEditing="GridView1_RowEditing" 
             OnRowCancelingEdit="GridView1_RowCancelingEdit" 
             OnRowUpdating="GridView1_RowUpdating">
            <FooterStyle ForeColor="#8C4510" 
              BackColor="#F7DFB5"></FooterStyle>
            <PagerStyle ForeColor="#8C4510" 
              HorizontalAlign="Center"></PagerStyle>
            <HeaderStyle ForeColor="White" Font-Bold="True" 
              BackColor="#A55129"></HeaderStyle>
            <Columns>
                <asp:CommandField ButtonType="Image" ShowEditButton="true" ShowCancelButton="true"
                                EditImageUrl="Images/icons/edit24.png" UpdateImageUrl="Images/icons/update24.png" 
                                CancelImageUrl="Images/icons/cancel324.png" />

                <asp:TemplateField HeaderText="Division">
                    <ItemTemplate>
                        <%# Eval("DivisionShortcut")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:DropDownList ID="DivisionsList" runat="server" DataSourceID="DivisionsListDataSource"
                                          AutoPostBack="true" DataTextField="DivisionShortcut" DataValueField="SapCode"
                                          selectedValue='<%# Bind("DivisionShortcut") %>'>
                        </asp:DropDownList>
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:BoundField DataField="Username" HeaderText="Network ID" ReadOnly="True" 
                    SortExpression="Username" />

                <asp:TemplateField HeaderText="Name">
                    <ItemTemplate>
                        <%# Eval("Name")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="txtEmployeeName" runat="server" Text='<%# Bind("Name")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Job Title">
                    <ItemTemplate>
                        <%# Eval("JobTitle")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="txtJobTitle" runat="server" Text='<%# Bind("JobTitle")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Badge No.">
                    <ItemTemplate>
                        <%# Eval("BadgeNo")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="txtBadgeNo" runat="server" Text='<%# Bind("BadgeNo")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Is Active?">
                    <ItemTemplate>
                        <%# Eval("IsActive")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:CheckBox ID="isActive" runat="server" 
                                      Checked='<%# Eval("IsActive").ToString().Equals("True") %>'/>
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Delete?">
                    <ItemTemplate>
                        <span onclick="return confirm('Are you sure to Delete the record?')">
                            <asp:ImageButton ID="lnkB" runat="server" ImageUrl="Images/icons/delete24.png" CommandName="Delete" />
                        </span>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView>
        <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:UsersInfoDBConnectionString %>" 

            SelectCommand="SELECT     dbo.Divisions.DivisionShortcut,dbo.employee.DivisionCode dbo.employee.Username, dbo.employee.Name, dbo.employee.JobTitle, dbo.employee.BadgeNo, dbo.employee.IsActive
                FROM         dbo.Divisions INNER JOIN
                            dbo.employee ON dbo.Divisions.SapCode = dbo.employee.DivisionCode"
            UpdateCommand="UPDATE [employee] SET [Name] = @Name, [JobTitle] = @JobTitle, 
                                                [BadgeNo] = @BadgeNo WHERE [Username] = @Username"
            DeleteCommand="DELETE FROM [employee] WHERE [Username] = @Username">
            <UpdateParameters>
                <asp:Parameter Name="Name" Type="String"  />
                <asp:Parameter Name="JobTitle" Type="String" />
                <asp:Parameter Name="BadgeNo" Type="String" />
                <asp:Parameter Name="Username" Type="String" />
            </UpdateParameters>
            <DeleteParameters>
                <asp:Parameter Name="Username" Type="String" />
            </DeleteParameters>
        </asp:SqlDataSource> 
```

**在 GridView 之外，我有 DropDownList 的 SqlDataSource：**

```
<asp:SqlDataSource ID="DivisionsListDataSource" runat="server" 
    ConnectionString="<%$ ConnectionStrings:UsersInfoDBConnectionString %>" 
    SelectCommand="SELECT * FROM Divisions"
    InsertCommand="INSERT INTO [Divisions] ([SapCode], [DivisionShortcut]) VALUES (@SapCode, @DivisionShortcut)"
    UpdateCommand="UPDATE [Divisions] SET [DivisionShortcut] = @DivisionShortcut WHERE [SapCode] = @SapCode">
    <DeleteParameters>
        <asp:Parameter Name="SapCode" Type="Double" />
    </DeleteParameters>
    <InsertParameters>
        <asp:Parameter Name="SapCode" Type="Double" />
        <asp:Parameter Name="DivisionShortcut" Type="String" />
    </InsertParameters>
    <UpdateParameters>
        <asp:Parameter Name="DivisionShortcut" Type="String" />
        <asp:Parameter Name="SapCode" Type="Double" />
    </UpdateParameters>
</asp:SqlDataSource> 
```

代码隐藏：

```
//For editing any row in the GridView
    protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e) 
    {
        GridView1.EditIndex = e.NewEditIndex;
    }

    //For canceling any editng in any row in the GridView
    protected void GridView1_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
    {
        e.Cancel = true;
        GridView1.EditIndex = -1;
    }

    //For updating the information in any row in the GridView
    protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        GridViewRow gvrow = GridView1.Rows[e.RowIndex];

        DropDownList DivisionsList = (DropDownList)gvrow.FindControl("DivisionsList"); 

        TextBox txtEmployeeName = (TextBox)gvrow.FindControl("txtEmployeeName");
        TextBox txtJobTitle = (TextBox)gvrow.FindControl("txtJobTitle");
        TextBox txtBadgeNo = (TextBox)gvrow.FindControl("txtBadgeNo");

        CheckBox isActive = (CheckBox)gvrow.FindControl("isActive");

        //For getting the ID (primary key) of that row
        string username = GridView1.DataKeys[e.RowIndex].Value.ToString();

        string name = txtEmployeeName.Text;
        string jobTitle = txtJobTitle.Text;
        string badgeNo = txtBadgeNo.Text;
        string division = DivisionsList.Text;
        //string divisioncode = DivisionsList.SelectedValue;

        UpdateEmployeeInfo(username, name, jobTitle, badgeNo, division);
    }

    private void UpdateEmployeeInfo(string username, string name, string jobTitle, string badgeNo, string division)
    {
        string connString = ConfigurationManager.ConnectionStrings["UsersInfoDBConnectionString"].ConnectionString;
        SqlConnection conn = new SqlConnection(connString);
        string update = @"UPDATE Employee SET Name = @Name, JobTitle = @JobTitle, 
                            BadgeNo = @BadgeNo WHERE Username = @Username";

        SqlCommand cmd = new SqlCommand(update, conn);

        cmd.Parameters.AddWithValue("@Name", name);
        cmd.Parameters.AddWithValue("@JobTitle", jobTitle);
        cmd.Parameters.AddWithValue("@BadgeNo", badgeNo);
        cmd.Parameters.AddWithValue("@division", division);
        //cmd.Parameters.AddWithValue("@SapCode", divisioncode);
        cmd.Parameters.AddWithValue("@Username", username);
        //cmd.Parameters.AddWithValue("@IsActive", isActive.checked);

        try
        {
            conn.Open();
            cmd.ExecuteNonQuery();
            conn.Close();

            GridView1.EditIndex = -1;
        }
        catch (Exception ex)
        {
            throw ex;
        }
        finally
        {
            cmd.Dispose();
            conn.Close();
            conn.Dispose();
        }
        GridView1.DataBind();
    }

    //For deleting a row in the GridView
    protected void DeleteRecord(object sender, GridViewDeleteEventArgs e) 
    {
        string networkID = GridView1.DataKeys[e.RowIndex].Value.ToString();

        string connString = ConfigurationManager.ConnectionStrings["UsersInfoDBConnectionString"].ConnectionString;
        SqlConnection conn = new SqlConnection(connString);
        string deleteCommand = "DELETE employee where dbo.employee.Username = " + networkID;
        SqlCommand cmd = new SqlCommand(deleteCommand, conn);
        cmd.Parameters.AddWithValue("@username", networkID);
        try
        {
            conn.Open();
            cmd.ExecuteNonQuery();
            conn.Close();
        }
        catch (SqlException se)
        {
            throw se;
        }
        finally
        {
            cmd.Dispose();
            conn.Close();
            conn.Dispose();
        }
        GridView1.DataBind();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T05:03:27.970

我快速浏览了您的代码。

我不知道这是否是问题，但请注意删除员工的 SQL 语句是错误的。

```
string deleteCommand = "DELETE employee where dbo.employee.Username = " + networkID; 
```

您必须将关键字 FROM 与 DELETE 语句一起使用，并且不应将参数 networkId 附加到字符串中，而应将其添加为参数，就像对其他查询所做的那样：

```
string deleteCommand = "DELETE FROM Employee where dbo.employee.Username = @username"; 
```

# ruby-on-rails - 设计令牌身份验证 current_user 在 Heroku 上为零

> ID：11481181
> 
> 赞同：0
> 
> 时间：2012-07-14T04:53:09.423
> 
> 标签：ruby-on-rails, heroku, devise, null

我正在使用 devise 和 token_authenticable，它在本地工作得很好；但是，当我部署到 Heroku current_user 返回 nil 时，我收到以下错误：`NoMethodError (undefined method 'topics' for nil:NilClass)`执行时`current_user.topics`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T20:06:15.210

用户只是没有登录。

# c# - LINQ - 根据字段总和查找集合中的项目

> ID：11481182
> 
> 赞同：2
> 
> 时间：2012-07-14T04:53:30.360
> 
> 标签：c#, linq

这个问题有点难以解释，但我会尽量简短。

我有一种情况，我有一组键/值对，例如这个。

```
class Foo {
   int Number { get; set; }
   int Value { get; set; }
} 
```

所以我会像这样设置一个集合......

```
var collection = new List<Foo>{
   new Foo { Number = 1, Value = 1 },
   new Foo { Number = 2, Value = 2 },
   new Foo { Number = 3, Value = 3 },
   new Foo { Number = 4, Value = 4 }
}; 
```

所以我希望基本上能够找到所有先前值的总和小于或等于给定值的数字。例如 ...

如果给定值 3，则返回的 Number 应该是`collection[1]`。（`collection[0]`值为 1，`collection[1]`值为 2，总和为 3）

我可以使用几条不同的行来完成此操作，但我想知道 LINQ 是否能够以更简洁的方式完成此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T04:59:18.767

不，LINQ 不适合这样做。这是*可能*的，但您基本上必须使用该`Aggregate`函数并提供您自己的聚合创建委托。这样做要简单得多（更不用说更容易理解）：

```
int sum = 0;

foreach(var item in collection)
{    
    sum += item.Value;

    if (sum >= targetValue) return item;
}

return null; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T05:09:54.907

LINQ 通常不鼓励元素之间的相互依赖关系（在这种情况下，每个元素都需要对其之前的元素总和可见）。

编写一个循环来执行此操作要容易得多和清晰得多。您可以将其放在扩展方法后面以保持功能感：

```
public static Foo FirstBeyondSum(this IEnumerable<Foo> source, int value)
{
    var sum = 0;

    foreach(var item in source)
    {
        sum += item.Value;

        if(sum >= value)
        {
            return item;
        }
    }

    return null;
} 
```

用法：

```
var firstFooBeyond3 = foos.FirstBeyondSum(3); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T05:34:40.660

我不知道为什么人们一直告诉你 LINQ 不适合这个......

```
 var sum = 0;
    return collection.FirstOrDefault(item => (sum += item.Value) >= targetValue); 
```

也许一个 > 而不是 >= 取决于边缘情况，但你明白了......

或者：

```
return collection.FirstOrDefault(item =>
    {
        sum += item.Value;
        return (sum += item.Value) >= targetValue;
    }); 
```

如果您不喜欢 (sum += item.Value) >= targetValue hack...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T18:16:34.400

确切的问题是：

> 我可以使用几条不同的行来完成此操作，但我想知道 LINQ 是否能够以更简洁的方式完成此操作。

OP 已经通过*不*使用 LINQ 解决了这个问题，并且想知道是否有更好的 LINQ 解决方案。因此，他**希望**看到一个 LINQ 解决方案，这样他就可以评估它是否比不使用 LINQ 更好地解决了他的问题。

所以，这是我能想到的最好的 LINQ 解决方案。即使结果证明它比他的代码效率低，这仍然可以回答他的问题，即 LINQ 是否能够更简洁地做到这一点，从而回答他的确切问题。

此外，OP 可以评估是否使用 LINQ 的最佳方法是提供一个示例。我不明白他为什么不能使用 LINQ。

要从集合中获取项目：

```
var item = collection
    .Where((f,i) => value >= collection.Take(i + 1).Sum (c => c.Value))
    .Last(); 
```

如果您正在寻找该项目的索引：

```
var index = collection.IndexOf(
     collection.Where((f,i) => value >= collection.Take(i + 1).Sum (c => c.Value))
    .Last()); 
```

# java - FPS计数故障

> ID：11481183
> 
> 赞同：0
> 
> 时间：2012-07-14T04:53:45.633
> 
> 标签：java

我在我的游戏中添加了一个 fps 计数器，在我尝试添加它之前它运行良好，但现在它是一个白框，在控制台中它以惊人的速度打印 0 fps：

```
private void start() {
    if (running) {
        return;
    }
    running = true;

    thread = new Thread(this);
    thread.start();
    System.out.println("Error Free!");
}

public void stop() {
    if (!running) {
        return;
    }
    running = false;
    try {
        thread.join();
    } catch (Exception e) {
        e.printStackTrace();
        System.exit(0);
    }
}

public void run() {
    int frames = 0;
    double UnproccesedSeconds = 0;
    long PreviousTime = System.nanoTime();
    double SecondsPerTick = 1 / 60.0;
    int TickCount = 0;
    boolean Ticked = false;

    while (running) {
        long CurrentTime = System.nanoTime();
        long PassedTime = CurrentTime - PreviousTime;
        PreviousTime = CurrentTime;
        UnproccesedSeconds += PassedTime / 1000000000.0;

        while (UnproccesedSeconds < SecondsPerTick) {
            tick();
            UnproccesedSeconds -= SecondsPerTick;
            Ticked = true;
            TickCount++;
            if (TickCount % 60 == 0) {
                System.out.println(frames + "fps");
                PreviousTime += 1000;
                frames = 0;
            }
        }

        if (Ticked) {
            render();
            frames++;
        }
        render();
        frames++;
    }
}

private void tick() {
}

private void render() {
    BufferStrategy bs = this.getBufferStrategy();
    if (bs == null) {
        createBufferStrategy(3);
        return;
    }
    Screen.render();

    for (int i = 0; i < WIDTH * LENGTH; i++) {
        PIXELS[i] = Screen.PIXELS[i];
    }

} 
```

我查了一下，我找不到问题所在；如果有人能回复我，那就太棒了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T05:49:23.407

线程的优先级可能会干扰您的游戏输出管道。也就是说，计数器消耗了太多的运行时间，以至于引擎管道无法再跟上，这可能就是 FPS 报告为 0 的原因。

您可以尝试降低线程的优先级（当您创建它时）和/或在计算循环中的某个位置放置一个 Thread.yield。这确实意味着 FPS 计算将被分流到后面，但会允许游戏引擎正常运行（至少比以前更快）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T21:38:50.563

**如果有人在这里迷路了，那是错的=）**

***这条线***

```
while (UnproccesedSeconds < SecondsPerTick) {} 
```

***需要是***

```
while (UnproccesedSeconds > SecondsPerTick) {} 
```

# ios - 使用 Bonjour 发现 Android 设备

> ID：11481195
> 
> 赞同：1
> 
> 时间：2012-07-14T04:57:05.803
> 
> 标签：ios, cocoa-touch, bonjour

是否可以在 iOS 上使用 Bonjur 通过 wifi/3g 发现 android 设备

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T16:08:55.830

我觉得这有点烦人。实际上 bonjour 服务在苹果发布之前就已经存在。

它被称为 jmdns（[更多信息在这里](http://jmdns.sourceforge.net)）。

你可以在这里查看安卓版本： [androidjmdns](http://home.heeere.com/tech-androidjmdns.html)

完全兼容ios和android

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T00:44:42.760

Google Play 商店中有一个应用程序，Android NAS，我一直在使用它来将手机的外部存储显示为 Bonjour 设备。您甚至可以更改要显示的图标。我猜仍然存在一些开发问题，因为它有点小错误，但通常效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T05:18:03.440

不，Bonjour 仅适用于 iOS 设备和 Mac OS X。（它还可以安装在 Windows 上，但在 Android 上不支持。）

# actionscript-3 - 根据 Matrix 计算新 BitmapData 的大小

> ID：11481197
> 
> 赞同：4
> 
> 时间：2012-07-14T04:58:21.333
> 
> 标签：actionscript-3, matrix, image-manipulation

我正在尝试将 BitmapData 的内容绘制到另一个尚未创建的内容中。
但在绘制之前，我需要缩放和旋转图像，然后绘制它。
我的问题是我不知道转换后 BitmapData 的大小，所以我无法创建新的来绘制它。

这个方法说明了我的意思：

```
public function getTransformedBitmapData(origin:BitmapData):BitmapData
{
    var matrix:Matrix = new Matrix();

    // ajusting the anchor point and rotating
    matrix.translate(-origin.width / 2, -origin.height / 2);
    matrix.rotate(Math.PI / 4); // 45 deg
    matrix.translate(origin.width / 2, origin.height / 2);

    // scaling
    matrix.scale(1.5, 1.5);

    // Calculating the size of the new BitmapData
    var width:Number = 0; // I don't know this value!
    var height:Number = 0; // I don't know this value!

    // Creating and drawing (with transformation)
    var result:BitmapData = new BitmapData(width, height, true, 0);
    result.draw(origin, matrix);

    return result;
} 
```

有人知道我应该怎么做才能在转换后找出（计算）这个图像的大小？

* * *

这张图片说明了旋转的作用，以及我想知道的内容：

![在此处输入图像描述](../Images/b7adbf96889c4408ed0ba0f4737a4c17.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T05:27:21.440

好的，使用@ansiart 答案作为起点，我设法以这种方式计算尺寸：

```
public function getTransformedBitmapData(origin:BitmapData):BitmapData
{
    var matrix:Matrix = new Matrix();

    // ajusting the anchor point and rotating
    matrix.translate(-origin.width / 2, -origin.height / 2);
    matrix.rotate(Math.PI / 4); // 45 deg
    matrix.translate(origin.width / 2, origin.height / 2);

    // scaling
    matrix.scale(1.5, 1.5);

    // Finding the four corners of the bounfing box after transformation
    var topLeft:Point = matrix.transformPoint(new Point(0, 0));
    var topRight:Point = matrix.transformPoint(new Point(origin.width, 0));
    var bottomLeft:Point = matrix.transformPoint(new Point(0, origin.height));
    var bottomRight:Point = matrix.transformPoint(new Point(origin.width, origin.height));

    // Calculating "who" is "where"
    var top:Number = Math.min(topLeft.y, topRight.y, bottomLeft.y, bottomRight.y);
    var bottom:Number = Math.max(topLeft.y, topRight.y, bottomLeft.y, bottomRight.y);
    var left:Number = Math.min(topLeft.x, topRight.x, bottomLeft.x, bottomRight.x);
    var right:Number = Math.max(topLeft.x, topRight.x, bottomLeft.x, bottomRight.x);

    // Ajusting final position
    matrix.translate(-left, -top);

    // Calculating the size of the new BitmapData
    var width:Number = right - left;
    var height:Number = bottom - top;

    // Creating and drawing (with transformation)
    var result:BitmapData = new BitmapData(width, height, false, 0);
    result.draw(origin, matrix);

    return result;
} 
```

我认为这可能有点矫枉过正，但有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T05:35:51.640

无需计算新的位图大小。您可以创建与原始大小相同的新 bitmapData，并将其设置`transparency`为 true，并将`fillColor`参数设置为 0x00（这是 32 位图像上的 alpha 值）。这样，新的`bitmapData`将只填充转换后的对象，图像数据结构的其余部分不会受到影响。

或者还有另一种方法，通过将原始 bitmapData 与缩放比例相乘来定义占位符位图数据`width`大小`height`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T05:45:18.050

矩阵有一个 transformPoint 方法。这将使确定 topLeft/bottomRight 变得容易。

```
var matrix:Matrix = new Matrix();

// do stuff to matrix
var topLeft:Point   = matrix.transformPoint(new Point(0,0));
var bottomRight:Point   = matrix.transformPoint(new Point(width,height));

// determine bounds of rectangle based on points (note: bottomRight might be now the topLeft, so need to do testing 
```

但是，如果您要绘制到这个新位图中，请确保根据 tx/ty 进行偏移。

# php - PHP 和 MYSQL：使用 bcrypt 哈希并使用数据库验证密码

> ID：11481199
> 
> 赞同：7
> 
> 时间：2012-07-14T04:58:54.077
> 
> 标签：php, mysql, hash, passwords, bcrypt

我正在使用 Andrew Moore 先生的散列用户密码的方法（[How do you use bcrypt for hashing passwords in PHP?](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php/6337021)）。我所做的是我有一个注册页面，它使用

```
$bcrypt = new Bcrypt(12);
$pass = $_POST['password']; //register password field
$hash= $bcrypt->hash($pass);

// then inserts $hash into database with users registered email (I've checked my mysql database and it indeed has an hashed item 
```

然后我有一个登录页面，由电子邮件和密码字段组成。我的想法是电子邮件地址在我的数据库中是唯一的。所以考虑到这一点，我制作了一个脚本，它首先检查用户的电子邮件地址，然后如果有一个现有的，用这个验证哈希密码

```
$bcrypt = new Bcrypt(12);

$email = $_POST['email']; //from login email field
$pass_l = $_POST['password']; // from login password field
$hash_1= $bcrypt->hash($pass_1);

$chk_email= $dbh->prepare("SELECT password FROM table WHERE email = ?");
$chk_email -> execute(array($email));

while($row = $chk_email->fetch(PDO::FETCH_ASSOC)){
    $chk_pass = $row['password']; //inside a while loop to get the password
    $pass_isGood = $bcrypt->verify($hash_1, $chk_pass);
    var_dump($pass_isGood); // I'm getting false

} 
```

我不确定我做错了什么，我应该是真的。我已经将我的表域设置为`text`甚至`varchar(256)`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-14T18:56:22.790

使用[Andrew Moore 的类](https://stackoverflow.com/a/6337021/1068283)，您需要调用类`verify()`方法来验证用户的密码是否与哈希匹配。您传递给它的两个参数是用户输入的明文密码和您存储在数据库中的哈希值。

似乎您将第二个哈希密码传递给了`verify()`，这就是它不起作用的原因。传入明文密码作为第一个参数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T22:30:12.313

因此，为了明确并以@Michael的回答为基础（因为我也在查看[Andrew Mooore 的](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php/6337021#6337021)解决方案）：

而不是这个：

```
$hash_1= $bcrypt->hash($pass_1);
$chk_pass = $row['password']; //inside a while loop to get the password
$pass_isGood = $bcrypt->verify($hash_1, $chk_pass); 
```

你需要这个：

```
$pass_l = $_POST['password'];
$chk_pass = $row['password']; //inside a while loop to get the password
$pass_isGood = $bcrypt->verify($pass_l, $chk_pass);
//notice how 1st parameter of verify(is the text input and not its hashed form 
```

# php - 没有相关模型的PHP加载数据模型

> ID：11481202
> 
> 赞同：1
> 
> 时间：2012-07-14T04:59:23.837
> 
> 标签：php, yii, lazy-loading

在使用 Yii 的 CRUD 生成器 (gii) 并对生成的表单进行一些细微更改后，我收到了以下错误消息：

```
[14-Jul-2012 05:12:58 UTC] PHP Fatal error:  Allowed memory size of 134217728 bytes exhausted (tried to allocate 40 bytes) in D:\apps\trulabel\framework\db\ar\CActiveRecord.php on line 1794 
```

我相信我已经将问题缩小到试图从项目表中提取 22,000 行。对我来说似乎有点奇怪，因为我认为它可以毫无困难地处理这个问题。关于可能出现的问题或解决方法的任何建议？

形式：

```
<div class="form">
<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'spec-definition-form',
    'enableAjaxValidation'=>false,
)); ?>

    <p class="note">Fields with <span class="required">*</span> are required.</p>

    <?php echo $form->errorSummary($model); ?>

        <div class="row">
                <?php echo $form->labelEx($model,'labelTypeId'); ?>
        <?php echo $form->dropDownList($model, 'labelTypeId', CHtml::listData(LabelType::model()->findAll(), 'id', 'name')); ?>
                <?php echo $form->error($model,'labelTypeId'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'customer'); ?>
        <?php echo $form->dropDownList($model, 'customer', CHtml::listData(Tblarcustomer::model()->findAll(), 'Customer', 'Name')); ?>
        <?php echo $form->error($model,'customer'); ?>
    </div>

        <div class="row">
        <?php echo $form->labelEx($model,'item'); ?>
        <?php echo $form->dropDownList($model, 'item', CHtml::listData(TblimItem::model()->findAll(), 'Item', 'Item')); ?>
        <?php echo $form->error($model,'item'); ?>
    </div>

    <div class="row buttons">
        <?php echo CHtml::submitButton($model->isNewRecord ? 'Create' : 'Save'); ?>
    </div>

<?php $this->endWidget(); ?>

</div><!-- form --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T05:07:16.330

增加php的内存限制，它会解决你的问题。

您可以使用以下方法增加内存：

```
ini_set('memory_limit','16M'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T11:29:43.000

默认情况下 yii 在[调试模式下](http://www.yiiframework.com/doc/guide/1.1/en/basics.entry#debug-mode)运行，这会从你的 php 分配的内存中消耗更多的内存来生成内部日志。

您可以尝试通过注释该行来从您的应用程序根目录（index.php）中找到的 yii 条目条中将其关闭，因为“YII_DEBUG”的默认值为 false：

```
// remove the following lines when in production mode
defined('YII_DEBUG') or define('YII_DEBUG',true); 
```

# twitter-bootstrap - 如何在 Sinatra 项目中开始使用 Twitter Bootstrap 和 Sass？

> ID：11481203
> 
> 赞同：6
> 
> 时间：2012-07-14T04:59:27.690
> 
> 标签：twitter-bootstrap, sinatra, sass

我知道 Twitter Bootstrap 是用 Less 编写的，但也有很多 Sass 版本。我很难找出最好的使用方法以及如何设置我的 Sinatra 项目。

我希望我的资产在生产环境中进行预编译和指纹识别，但在开发中拥有未压缩的资产，以便我可以更轻松地调试（如 Rails 资产管道）。我尝试设置[bootstrap-sass](https://github.com/thomas-mcdonald/bootstrap-sass)，但它需要 Compass。但是当我拥有所有 twitter bootstrap mixin 时，我真的不需要指南针。我也很难配置它。

无论如何，关于我应该做什么的明确答案会有所帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T08:11:52.800

我只是在我的布局模板中为 .less 版本的引导程序或我重新编译的 .css 版本使用依赖于环境的标签：

```
<% if settings.development? %>
    <link rel="stylesheet/less" href="/less/style.less">
    <%= javascript_tag "/js/libs/less-1.2.1.min.js" %>
<% end %>

<% if settings.production? %>
    <%= stylesheet_tag "/css/mycss.css" %>
<% end %> 
```

这样，它只会向我显示开发中的即时版本，以及生产模式下的 .css 文件。当我部署时，我只是在命令行上编译样式表。

```
$ lessc public/less/style.less > public/css/mycss.css 
```

（在该示例中，我还使用[https://github.com/wbzyl/sinatra-static-assets/](https://github.com/wbzyl/sinatra-static-assets/)为生产的 css 文件添加时间戳。）

public/less/style.less 的开头是这样的：

```
 @import "bootstrap/bootstrap.less";

 @import "bootstrap/responsive.less"; 
```

所有引导 .less 文件都位于 public/less/bootstrap/

基本上只需将所有[https://github.com/twitter/bootstrap/tree/master/less](https://github.com/twitter/bootstrap/tree/master/less)放在那里。

然后，您可以开始自己在同一个文件中覆盖内容，导入您制作的其他文件，或编辑实际的核心引导文件 (:|)

如果您真的必须使用 sass（我不明白为什么会这样，请参阅评论），它并不像没有标准 .js 编译器可以轻松包含在您的布局中那么简单。

我想当你在开发模式下运行时，你可以尝试告诉 rack在你的 config.ru中使用[http://sass-lang.com/docs/yardoc/Sass/Plugin/Rack.html 。](http://sass-lang.com/docs/yardoc/Sass/Plugin/Rack.html)不过我从来没有尝试过，而且有一次我尝试使用 .less rack 插件时遇到了麻烦。

# linux - 多个命令 grep

> ID：11481204
> 
> 赞同：0
> 
> 时间：2012-07-14T04:59:29.297
> 
> 标签：linux, x86, grep

我想通过文件 gdb.txt 搜索以下汇编表达式：

```
 call DWORD PTR [EDI] 
```

但做

```
 grep -e "call DWORD PTR [EDI]" -f gdb.txt 
```

不返回任何东西。想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T05:01:58.453

您需要转义左括号，这是一个特殊的正则表达式字符。此外， -f 选项不会像您认为的那样做。您只需要在模式之后指定您的文件。此外，您甚至不需要-e。所以归结为：

```
grep "call DWORD PTR \[EDI]" gdb.txt 
```

# javascript - Javascript 相等

> ID：11481206
> 
> 赞同：4
> 
> 时间：2012-07-14T04:59:33.610
> 
> 标签：javascript

我一直在尝试理解 Javascript 的相等性。您能告诉我为什么以下行返回`false`吗？

```
alert((function a(){}) == (function a(){})) // false 
```

但是从下面的例子中可以看出return but `<`returns ，这意味着应该 return但它是。你有什么想法，为什么？`false``<=``true``==``true``false`

```
alert((function a(){}) < (function a(){})) // false
alert((function a(){}) > (function a(){})) // false
alert((function a(){}) <= (function a(){})) // true
alert((function a(){}) >= (function a(){})) // true 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T05:08:49.153

您正在使用`<`,比较两个对象`<=`，并且实际上将它们与可以转换为的字符串进行比较。

`"function a(){}" < "function a(){}"`是假的。

`"function a(){}" <= "function a(){}"`是真的。

***编辑：*** 为什么`(function a(){}) == (function a(){})`返回 false 是因为您与 比较相同类型`==`，所以它们不需要转换为字符串或数字来比较，它们是两个不同的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T05:01:56.567

一个鲜为人知的事实是 Javascript 相等运算符实际上是 === 而不是 ==。在函数上运行比较运算符时，您是在比较引用的值（内存中的位置）而不是函数本身。由于函数都是独立的对象，== 不会返回 true。

来自“Javascript - 权威指南” [http://docstore.mik.ua/orelly/webprog/jscript/ch05_04.htm](http://docstore.mik.ua/orelly/webprog/jscript/ch05_04.htm)

> 另一方面，对象、数组和函数通过引用进行比较。这意味着两个变量只有在它们引用同一个对象时才相等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T05:18:16.010

如果我们测试函数不相等，我们就会得到正确的结果。

```
alert((function a(){}) != (function a(){})) //true 
```

这是因为每个函数都是不同的对象，以及相等检查返回 false 的原因。

# java - 奇怪的 ArrayIndexOutOfBoundsException

> ID：11481207
> 
> 赞同：1
> 
> 时间：2012-07-14T04:59:39.880
> 
> 标签：java, android, indexoutofboundsexception

我遇到了一个非常奇怪的异常。它在这里运行良好，但我的客户一直遇到这个异常然后崩溃，我花了很多时间才弄清楚，但不幸的是到目前为止仍然没有运气，任何帮助将不胜感激！

这是代码：

```
protected void onPostExecute(List<File> result) {
    try {
        mBooks.clear();
        if (result != null) {
            ArrayList<BookInfo> newBooks = new ArrayList<BookInfo>();
            for (File f : result) {
                BookInfo bi = new BookInfo(BookCollections.this, f);
                if (!contains(bi)) {
                    newBooks.add(bi);
                }
            }
            mDB.insertBooks(newBooks);
            mBooks.addAll(newBooks);
            new AlertDialog.Builder(BookCollections.this)
                    .setTitle(newBooks.size() + " Books found!")
                    .setPositiveButton(android.R.string.ok, null)
                    .setView(
            new BookInfoList(BookCollections.this,
            newBooks)).show();
        }
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        mScanDlg.dismiss();
        notifyDataSetChanged();
    }
}

private boolean contains(BookInfo bi) {
    if (bi == null) {
        return true;
    }
    for (BookInfo book : mBooks) {
        if (book.equalTo(bi)) {
            return true;
        }
    }
    for (FolderInfo fi : mFolders) {
        if (fi.getBooks() != null) {
            for (BookInfo book : fi.getBooks()) {
                if (book.equalTo(bi)) {
                    return true;
                }
            }
        }
    }
    return false;
} 
```

请帮我。谢谢

这个异常（java.lang.ArrayIndexOutOfBoundsException）在

```
for (File f : result) {
    BookInfo bi = new BookInfo(BookCollections.this, f);
    if (!contains(bi)) {
        newBooks.add(bi);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T05:28:50.337

我注意到您的方法名称是 onPostExecute。这可能是一种处理网络请求的方法吗？如果是这样，那么当您的客户运行此代码时，它可能在多线程 Web 容器中运行。但是，您的集合[ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)不是线程安全的集合。这可能是它在您的开发（单线程）环境中工作但在繁忙的服务器上工作的原因。

考虑使用[Collections.synchronizedList()](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#synchronizedList%28java.util.List%29)方法来实例化您的 ArrayList。请务必遵循 API 文档中关于在同步块中进行迭代的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T13:39:37.990

最终发现这是一个普通`ArrayIndexOutOfBoundsException`的，在

```
BookInfo bi = new BookInfo(BookCollections.this, f); 
```

因为有另一个 for 子句的索引超出了边界。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T05:35:47.613

几天前我遇到的同样奇怪的行为，其中模拟器应用程序显示了完美的数据，但在设备中它显示了与 Arraylist 相同的概念我的建议是来自您的**PostExecute** 如果您在此之前没有添加任何内容，请删除此行ArrayList **mBooks**

```
mBooks.clear();  // remove this line 
```

并构建和清理它适用于你的项目，你遇到了不同的arraylist的相同问题并以这种方式进行排序

是的，你是对的，你的错误来自于此

```
 for (File f : result) {
                        BookInfo bi = new BookInfo(BookCollections.this, f);
                        if (!contains(bi)) {
                            newBooks.add(bi);
                        }
                    } 
```

首先在 Log as 中检查您的 arraylist 大小

```
 Log.d("Size",""+newBooks.size()); 
```

如果它大于 0 比感觉你的数组还有一件事是

**当通过contains**方法返回数据为**false时，根据您的****if**条件数据插入**newBooks**数组，更改您的方法**包含** bcz我认为您总是得到布尔值**true** ，因此对于该检查

 ******在登录为

```
Log.d("BooleanValue",""+newBooks.size()); 
```

在此之前 **if (!contains(bi))**来自日志输出的条件，您可以看到数据已插入 Arraylist 或未根据条件满足

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T01:10:00.093

1.  因为你有“mBooks.clear();” 在 onPoseExecute() 的第一行，语句

    ```
    for (BookInfo book : mBooks) {  
        if (book.equalTo(bi)) {  
            return true;  
        }  
    } 
    ```

    in`contains()`似乎没有任何意义。

2.  你确定与“FoldInfo fi”相关的书籍不会在外面改变吗？

    ```
    for (FolderInfo fi : mFolders) {  
            if (fi.getBooks() != null) {  
                for (BookInfo book : fi.getBooks()) {  
                    if (book.equalTo(bi)) {  
                        return true;  
                    }  
                }  
            }  
        } 
    ```

    我认为以下代码可能会更好：

    ```
    for (FolderInfo fi : mFolders) {  
        ArrayList<BookInfo> books = fi.getBooks();  
        if (books  != null) {  
            for (BookInfo book : books) {  
                if (book.equalTo(bi)) {  
                    return true;  
                }  
            }  
        }  
    } 
    ```

3.  当您使用 AsyncTask 并且某些代码（不是此 postexecute）在不同的线程中运行时，最好考虑使用一些锁来保护您`mBooks`的. `mFolders``mDB`******

# php - Slim 框架基础 URL

> ID：11481210
> 
> 赞同：8
> 
> 时间：2012-07-14T05:00:31.487
> 
> 标签：php, slim

我是 Slim 框架的新手。如何使用 Codeigniter 函数获取基本 URL `base_url()`？

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-14T05:37:05.363

您需要先手动设置基本网址，然后才能获得它，如下所示：

```
$app->hook('slim.before', function () use ($app) {
    $app->view()->appendData(array('baseUrl' => '/base/url/here'));
}); 
```

[http://help.slimframework.com/discussions/questions/49-how-to-deal-with-base-path-and-different-routes](http://help.slimframework.com/discussions/questions/49-how-to-deal-with-base-path-and-different-routes)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-01-21T10:05:35.417

使用 Slim v3，因为它实现了 PSR7，所以您可以获得 PSR7 Uri 对象并调用 Slim3 在其上添加的 getBasePath() 方法。简单地写：

```
$basePath = $request->getUri()->getBasePath(); 
```

来自[Slim v3 文档](http://www.slimframework.com/docs/objects/request.html#the-request-method "Slim v3 文档")：

> **基本路径**
> 
> 如果您的 Slim 应用程序的前端控制器位于文档根目录下的物理子目录中，您可以使用 Uri 对象的 getBasePath() 方法获取 HTTP 请求的物理基本路径（相对于文档根目录）。如果 Slim 应用程序安装在文档根目录的最顶层目录中，这将是一个空字符串。

请注意，getBasePath() 方法是由框架添加的，不是[PSR7 UriInterface](http://www.php-fig.org/psr/psr-7/#35-psrhttpmessageuriinterface)的一部分。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-24T19:04:48.403

在我们最近使用 Twig 的应用程序中，我们按如下方式分配 httpBasePath：

```
$view = $app->view()->getEnvironment();
$view->addGlobal('httpBasePath', $app->request->getScriptName()); 
```

该`addGlobal()`方法可能相当于`$app->view()->appendData()`，我不确定。

使用的好处`$app->request->getScriptName()`是我们不必手动设置文件夹名称或关心它是什么——一个开发人员可以拥有 repo `http://example.localhost`，另一个可以拥有它，`http://localhost/projects/slim`并且不需要配置。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-10-05T02:00:13.677

尝试在 index.php 中设置视图的基本 url

```
$app->hook('slim.before', function () use ($app) {
    $posIndex = strpos( $_SERVER['PHP_SELF'], '/index.php');
    $baseUrl = substr( $_SERVER['PHP_SELF'], 0, $posIndex);
    $app->view()->appendData(array('baseUrl' => $baseUrl ));
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-25T09:51:46.553

`{{ app.request.getRootUri }}`我可以使用（我正在使用 Twig 模板引擎）获取基本网址。顺便说一句，这与“SCRIPT_NAME”环境变量相同。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-23T17:16:44.763

如果您使用的是 TWIG，那么在 Slim v3 调用中 -

```
{{ base_url() }} 
```

或使用`{{ path_for('yourRouteName') }}`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-11T07:35:26.180

获取基本 url 的最简单方法是附加请求 url 和请求根 url，如下所示： `$req = $app->request; $base_url = $req->getUrl()."".$req->getRootUri()."/";`

# html - HTML 5 - 逐帧动画

> ID：11481213
> 
> 赞同：0
> 
> 时间：2012-07-14T05:01:06.917
> 
> 标签：html

我有一个逐帧动画，我想在 HTML 5 中重新创建。

例如，我有一个元素，例如一个球，以及像这样的关键帧：

```
var x = new Array(102,130,140,200);
var y = new Array(52,120,240,400);
var opacity = new Array(0,0.2,0.5,0.3); // I am assuming opacity goes from 0 to 1 
```

这四个位置代表关键帧 1、2、3 和 4 上球位置的 x、y 和不透明度。

例如，每 1/30 秒调用每个关键帧。要设置动画的元素，本例中的球，是一个 png 图像。

如何在画布上为那个球设置动画？

我找到了这段代码：

```
<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
      #myCanvas {
        border: 1px solid #9C9898;
      }
    </style>
    <script>
      window.requestAnimFrame = (function(callback) {
        return window.requestAnimationFrame || 
        window.webkitRequestAnimationFrame || 
        window.mozRequestAnimationFrame || 
        window.oRequestAnimationFrame || 
        window.msRequestAnimationFrame ||
        function(callback) {
          window.setTimeout(callback, 1 / 30);
        };
      })();

      function animate() {
        var canvas = document.getElementById("myCanvas");
        var context = canvas.getContext("2d");

        // update stage

        // clear stage
        context.clearRect(0, 0, canvas.width, canvas.height);

        // render stage

        // request new frame
        requestAnimFrame(function() {
          animate();
        });
      }

      window.onload = function() {
        animate();
      };

    </script>
  </head>
  <body>
    <canvas id="myCanvas" width="578" height="200"></canvas>
  </body>
</html> 
```

但是这段代码没有显示我将如何在其中包含一个动画对象......

我很感激任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T06:39:04.067

首先，您需要创建一个代表球的对象，然后 - 从我的角度来看 - 最佳做法是添加一些属性，如`x`和`y`坐标`velocity`等`mass`。您可以使用对象文字或单独分配每个属性来定义这些. 由你决定。这样，您就有了未来可重用性的基础。

这是您可以构建代码的可能性之一。我通过将渲染函数与初始化分开来稍微修改了原始函数。这仅用于优化问题。

```
function Ball(ctx, x, y, rad) {
    this.x = x;
    this.y = y;
    this.rad = rad;
    this.vx = 0;
    this.vy = 0;
    this.mass = 0;

    this.createBall = function() {
        ctx.fillStyle = '#rgba(38,85,139,1)';
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.rad, 2*Math.PI, false);
        ctx.closePath();
        ctx.fill();        
    };

    this.update = function() {
        context.clearRect(0, 0, canvas.width, canvas.height);

        if (this.x > canvas.width) {
            this.x = canvas.width - 1;
            this.vx *= -1;
        }            
        //...        
    };
}

var canvas = document.getElementById("myCanvas");
var context = canvas.getContext("2d");

function init() {    
    var numBalls = 100;
    var ballPool = [];
    var width = canvas.width;
    var height = canvas.height;
    var ball = new Ball(context, Math.random() * width, Math.random() * height,
                        (Math.random() * 10 - 5) + 2);

    for (var i = 0; i < 100; i++)
        ballPool.push(ball);        
      }
}

function animate() {
    var len = ballPool.length;
    var ball = null;

    for (var i=0; i < len; i++) {
        ball = Ball(ballPool[i]);
        ball.update();
    }
}

window.onload = init();     
requestAnimFrame(animate); 
```

**笔记**

我没有测试代码，我只是为了得到这个想法。一个旁注：我没有构建我的代码来使用关键帧，但也可以使用关键帧，只是你需要一个大的坐标池来实现更平滑的过渡。

# ruby - ruby 源代码中的范围类？

> ID：11481219
> 
> 赞同：0
> 
> 时间：2012-07-14T05:02:54.263
> 
> 标签：ruby

我在哪里可以找到`Range`Ruby 源代码中的类方法。我特别在寻找`Range#last`方法。红宝石-v MRI 1.9.2

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T05:30:25.850

你可以在这里找到 Ruby 源代码

[https://github.com/ruby/ruby/](https://github.com/ruby/ruby/)

它`range.c`的根目录中有一个。

对于`Range#last`源代码中的实现，我认为它在这里：

[https://github.com/ruby/ruby/blob/trunk/range.c#L602](https://github.com/ruby/ruby/blob/trunk/range.c#L602)

[http://www.ruby-doc.org/core-1.9.3/Range.html#method-i-last](http://www.ruby-doc.org/core-1.9.3/Range.html#method-i-last)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T09:50:04.363

就个人而言，我更喜欢看[Rubinius](http://Rubini.us/)的[源代码](https://GitHub.Com/Rubinius/Rubinius/)，因为我发现它比 YARV 的可读性*强得多。*您正在寻找的方法在[kernel/common/range.rb](https://GitHub.Com/Rubinius/Rubinius/blob/b9247312c0f92e1e881c30a8f6a2e826c7a8101d/kernel/common/range.rb#L126-127)中，它只是`@end`实例变量的 getter：

```
attr_reader :end
alias_method :last, :end 
```

`@end`实例变量在方法[`initialize`中](https://GitHub.Com/Rubinius/Rubinius/blob/b9247312c0f92e1e881c30a8f6a2e826c7a8101d/kernel/common/range.rb#L6-20)设置。换句话说：该`last`方法总是简单地返回您传递给的值`Range.new`。

请注意，在这种情况下，Rubinius 的实现符合 Ruby 1.8 语言规范，并且尚未更新到具有可选`count`参数的 Ruby 1.9 规范。

# jsf - JSF 模拟时钟

> ID：11481220
> 
> 赞同：1
> 
> 时间：2012-07-14T05:02:55.667
> 
> 标签：jsf, time

我是 JSF 的新手。我试图在我的一个 .xhtml 页面上显示一个模拟时钟。我希望它不依赖于 HTML、CSS 和/或 PrimeFaces 以外的任何东西。我没有找到一个简单的解决方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T18:32:30.940

您是对的，这不会是一个“简单的修复”，据我所知，在任何 JSF 组件库中都没有类似的东西。

由于这是一个非常特殊的需求，因此它可能不值得在 PrimeFaces 等组件库中进行维护。

但是，如果您决定使用像[Dojo Toolkit](http://dojotoolkit.org/)这样的 Javascript 库，您的运气会更好。他们实际上[在演示中有一个可以工作的模拟时钟](http://demos.dojotoolkit.org/demos/clock/demo.html)，带有可移动的指针。:)

# ajax - 如何针对 Google Apps Script ContentService 发出 XHR/ajax 请求？

> ID：11481222
> 
> 赞同：12
> 
> 时间：2012-07-14T05:03:10.277
> 
> 标签：ajax, google-apps-script, xmlhttprequest, cors

我有一个简单的 Google Apps Script ContentService，它会发出类似“Hello world Sat Jul 14 2012 14:17:21 GMT+1000 (EST)”的字符串，网址是[https://script.google.com/macros/s/AKfycbxbFFG95mi8PWVNCE8366XaxnXQrt6p7p3OWbclXch_bbWczQ /exec](https://script.google.com/macros/s/AKfycbxbFFG95mi8PWVNCE8366XaxnXQrt6p7p3OWbclXch_bbWczQ/exec)并且它对匿名开放。随意击打它。代码是：

```
function doGet() {
  var output = ContentService.createTextOutput()
      .setMimeType(ContentService.MimeType.TEXT)
      .setContent("Hello world " + new Date());
  Logger.log(output.getContent());
  return output;
} 
```

当我在浏览器中访问 URL 时，它会按预期返回字符串 (pass.png)。当我在 XHR（ajax 调用）中使用相同的 URL 时，它会失败并显示一个空错误。在 Chrome 的开发者工具中，重定向是 "(canceled)" (fail.png) 。这是重现失败的代码：

```
<!DOCTYPE html>
<html>
<head>
<script>
function loadXMLDoc() {
  xhr=new XMLHttpRequest();
  xhr.onreadystatechange=function() {
  if (xhr.readyState==4 && xhr.status==200) {
    document.getElementById("myDiv").innerHTML=xhr.responseText;
    }
  };
  xhr.open("GET","https://script.google.com/macros/s/AKfycbxbFFG95mi8PWVNCE8366XaxnXQrt6p7p3OWbclXch_bbWczQ/exec",true);
  xhr.send();
}
</script>
</head>
<body>

<h2>Using the XMLHttpRequest object</h2>
<div id="myDiv"></div>
<button type="button" onclick="loadXMLDoc()">Get Content via XHR</button>
</body>
</html> 
```

直接请求： ![直接请求通行证.png](../Images/804c21d539b69a3394e5efe208a9effc.png) XHR 请求： ![在此处输入图像描述](../Images/21de2abc7e384f58a14516a1a2999679.png) 我的问题（希望足够具体）：如何从 example.com 上的普通旧网页进行 XHR 调用，以从匿名 Google Apps Script ContentService 脚本中获取内容？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-15T02:22:54.977

我不确定这目前是否可行。我们考虑了 JSONP 方法（确实有效；我已经对其进行了测试），但我认为从未测试过针对 ContentService 的 XHR。我们可能需要为此设置 CORS 标头。请在问题跟踪器上提交功能请求，我们会看看是否可以完成。

# android - 如何在启动画面中显示一系列图像，每个图像之间有延迟？

> ID：11481228
> 
> 赞同：-2
> 
> 时间：2012-07-14T05:04:02.020
> 
> 标签：android

我在我的 Android 应用程序中实现了启动画面。

在那个初始屏幕中，我希望有 3 个动态显示的图像，一个接一个，中间有一个设定的延迟时间。

我怎么能做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T06:04:31.327

你可以试试这个代码，它可能对你有帮助......

你可以在runnable1、runnable2和runnabl3中设置你的背景图片资源......

```
package com.vc;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.widget.ImageView;

public class Splash extends Activity {
private final int FIRST_DELAY = 3000;
private final int SECOND_DELAY = 6000;
private final int THIRD_DELAY = 9000;

private Handler mHandler;
private ImageView mImageView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mImageView = (ImageView)findViewById(R.id.splash_imgeview);
    mHandler = new Handler();
    mHandler.postDelayed(image1Runnable, FIRST_DELAY);
    mHandler.postDelayed(image2Runnable, SECOND_DELAY);
    mHandler.postDelayed(image3Runnable, THIRD_DELAY);
}

Runnable image1Runnable = new Runnable() {
    @Override
    public void run() {
        mImageView.setBackgroundResource(R.drawable.icon);//First image icon
    }
};
Runnable image2Runnable = new Runnable() {
    @Override
    public void run() {
        mImageView.setBackgroundResource(R.drawable.icon);//Second image icon
    }
};
Runnable image3Runnable = new Runnable() {
    @Override
    public void run() {
        mImageView.setBackgroundResource(R.drawable.icon);//Third image icon
    }
};
} 
```

# web-scraping - 黑客新闻：如何提取评论层次结构

> ID：11481231
> 
> 赞同：0
> 
> 时间：2012-07-14T05:04:20.177
> 
> 标签：web-scraping

我试图解析论坛 news.ycombinator.com 上的评论线程。但是，在查看 html 之后，似乎没有嵌套注释的层次结构。这将使解析变得非常困难。例如，这是一个父评论及其子评论：

```
<!-- This part below draws the upvote/downvote images -->
<table border=0><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=0></td><td valign=top><center><a id=up_4241971 href="vote?for=4241971&dir=up&whence=%69%74%65%6d%3f%69%64%3d%34%32%34%31%37%38%34"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_4241971></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; ">

<!-- This part below is user/time and permalink info for a parent comment -->
<span class="comhead"><a href="user?id=JshWright">JshWright</a> 7 hours ago  | <a href="item?id=4241971">link</a></span></div><br>

<!-- This part below is actual Comment -->
<span class="comment"><font color=#000000>I just got my Verizon Galaxy S3, and ordered the 20-pack of NFC tags offered by <a href="http://tagsfordroid.com" rel="nofollow">http://tagsfordroid.com</a><p>I think I know what my Dad felt like when he got his first label printer... Within days it seemed like every object in his office was labeled...<p>I've got a tag in my car to automatically send my wife a "Headed home" SMS, a tag on my night stand to toggle between 'night' (silent) and 'day' (loud) volume settings, a tag by my back door to launch CardioTrainer when I go out for a run (this one may have crossed the "I've run out of ideas" line...). I'm using the keychain tag to dial a response number for the fire department I'm a member of.</font></span><p><font size=1><u><a href="reply?id=4241971&whence=%69%74%65%6d%3f%69%64%3d%34%32%34%31%37%38%34">reply</a></u></font></td></tr></table></td></tr>

<!-- This part below is upvote/downvote arrow for child of parent -->
<tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=40></td><td valign=top><center><a id=up_4242025 href="vote?for=4242025&dir=up&whence=%69%74%65%6d%3f%69%64%3d%34%32%34%31%37%38%34"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_4242025></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; ">

<!-- This part has user/time/permalink for child comment -->
<span class="comhead"><a href="user?id=msbmsb">msbmsb</a> 7 hours ago  | <a href="item?id=4242025">link</a></span></div><br>

<!-- This part is the content of the  child comment -->
<span class="comment"><font color=#000000>I did the same thing. Tag next to the entry-way light switch for changing to an "at-home" profile, tag next to the bed for switching between night mode and morning mode, tag at work, keychain tag for switching between car mode and quiet mode.<p>And profile switching is just the basics. You can have a tag that connects guests' NFC-enabled phones to your wifi without having to hand out the password, for instance.<p>NFC task launcher + tasker is an amazing combination that opens up all kinds of possibilities.</font></span><p><font size=1><u><a href="reply?id=4242025&whence=%69%74%65%6d%3f%69%64%3d%34%32%34%31%37%38%34">reply</a></u></font></td></tr></table></td></tr><tr><td> 
```

那么黑客新闻是如何存储评论的层次结构的，我在抓取他们的数据时如何复制它呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T05:12:14.923

在表格中，缩进由图像标签完成：

```
...<td><img src="http://ycombinator.com/images/s.gif" height=1 width=0></td>...
...<td><img src="http://ycombinator.com/images/s.gif" height=1 width=40></td>... 
```

大概您会阅读并解析这些内容。可以通过保留`width`值的内部堆栈来重建表示的实际线程。

# java - Spring 的上下文命名空间是如何工作的？

> ID：11481232
> 
> 赞同：4
> 
> 时间：2012-07-14T05:05:04.700
> 
> 标签：java, spring, xml-namespaces, applicationcontext, post-processing

例如，如果我在 application-context.xml 中声明：

```
<context:annotation-config/> 
```

我从[官方文档](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-annotation-config)中读到：

> 隐式注册的后处理器包括AutowiredAnnotationBeanPostProcessor、CommonAnnotationBeanPostProcessor、PersistenceAnnotationBeanPostProcessor，以及前面提到的RequiredAnnotationBeanPostProcessor。

但我想知道 Spring 是如何在幕后工作的，我认为这个 1-liner 被转换为文档中提到的后处理器的几个 bean 定义。

**但是，我的问题是，哪个 Spring 组件/类实现了这种*“从 1-liner 到多个 bean 定义的转换”*功能？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T05:56:41.967

如果您想知道 annotation-config 标记在幕后做了什么，请查看[AnnotationConfigBeanDefinitionParser](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/context/annotation/AnnotationConfigBeanDefinitionParser.html)

如果您想了解有关用于定义此类标签的一般机制的更多信息，请查看 spring 参考文档的[这一](http://static.springsource.org/spring/docs/2.5.x/reference/extensible-xml.html)部分。

您需要一个模式定义、一个[NameSpaceHandler](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/beans/factory/xml/NamespaceHandler.html)和一个[BeanDefinitionParser](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/beans/factory/xml/BeanDefinitionParser.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T06:53:23.330

gkamal 的良好参考。

发生的情况是 Spring 在应用程序启动时注册所有这些自定义名称空间，并且特定于名称空间的处理程序为自定义名称空间中的每个元素注册解析器。例如，这是我在自己的一个项目中所做的自定义命名空间：

[https://github.com/williewheeler/kite/blob/master/src/main/java/org/zkybase/kite/config/xml/KiteNamespaceHandler.java](https://github.com/williewheeler/kite/blob/master/src/main/java/org/zkybase/kite/config/xml/KiteNamespaceHandler.java)

请注意，NamespaceHandler 所做的只是为自定义命名空间注册一堆解析器。

然后，当 Spring 实际解析配置文件时，它会将自定义命名空间元素转换为您在问题中建议的 bean 定义。有时它只是一个非常简单的 bean 定义：

[https://github.com/williewheeler/kite/blob/master/src/main/java/org/zkybase/kite/config/xml/CircuitBreakerParser.java](https://github.com/williewheeler/kite/blob/master/src/main/java/org/zkybase/kite/config/xml/CircuitBreakerParser.java)

有时它是一大堆bean定义：

[https://github.com/williewheeler/kite/blob/master/src/main/java/org/zkybase/kite/config/xml/AnnotationConfigParser.java](https://github.com/williewheeler/kite/blob/master/src/main/java/org/zkybase/kite/config/xml/AnnotationConfigParser.java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-24T05:32:45.537

它有助于将来自单独文件中的 bean 定义的属性值外部化。

定义的属性在启动时解析。

占位符遵循这种风格 ${property-name}

# android - HtmlUnit NoClassDefFoundError

> ID：11481234
> 
> 赞同：1
> 
> 时间：2012-07-14T05:05:15.020
> 
> 标签：android, eclipse, htmlunit

我一直在使用 HtmlUnit（2.9 版）构建一个从网站获取数据的 android 应用程序。代码编译得很好，但是当我单击“登录”按钮时，它会崩溃，因为在到达 WebUnit 变量初始化时会抛出 NoClassDefFoundError。我已将罐子添加到`Project/lib`.

**相关代码：**

```
public void doLogin(View v) {
    if (uname.getText().toString() == "" || pass.getText().toString() == "") {

        makeToast("Missing at least one of the following: Username, Password");
        Log.e("RobloxApp", "Missing a username and/or password");
        return;         
    } else {                
            try {                   
                WebClient client = new WebClient();
                HtmlPage page = client.getPage(RbxRes.Urls.loginPage);

                HtmlInput unameInput = (HtmlInput)  page.getElementById(RbxRes.Elements.uNameId); 
                HtmlInput passInput  = (HtmlInput)  page.getElementById(RbxRes.Elements.passId);
                HtmlButton loginBtn  = (HtmlButton) page.getElementById(RbxRes.Elements.loginId);

                unameInput.setTextContent(uname.getText().toString());
                passInput.setTextContent(pass.getText().toString());
                loginBtn.click();

            } catch (Exception e) {
                Log.e("RobloxApp", "The following error occurred while trying to login: " + e.getMessage());
                makeToast("Error: Could not login");
                return;
            }
    } 
```

**日志输出：**

```
 07-14 04:38:46.357: E/AndroidRuntime(708): FATAL EXCEPTION: main
 07-14 04:38:46.357: E/AndroidRuntime(708): java.lang.IllegalStateException: Could not execute method of the activity
 07-14 04:38:46.357: E/AndroidRuntime(708):     at android.view.View$1.onClick(View.java:3044)
 07-14 04:38:46.357: E/AndroidRuntime(708):     at android.view.View.performClick(View.java:3511)
 07-14 04:38:46.357: E/AndroidRuntime(708):     at android.view.View$PerformClick.run(View.java:14105)
 07-14 04:38:46.357: E/AndroidRuntime(708):     at android.os.Handler.handleCallback(Handler.java:605)
 07-14 04:38:46.357: E/AndroidRuntime(708):     at android.os.Handler.dispatchMessage(Handler.java:92)
 07-14 04:38:46.357: E/AndroidRuntime(708):     at andr oid.os.Looper.loop(Looper.java:137)
 07-14 04:38:46.357: E/AndroidRuntime(708):     at android.app.ActivityThread.main(ActivityThread.java:4424)
 07-14 04:38:46.357: E/AndroidRuntime(708):     at java.lang.reflect.Method.invokeNative(Native Method)
 07-14 04:38:46.357: E/AndroidRuntime(708):     at java.lang.reflect.Method.invoke(Method.java:511)
 07-14 04:38:46.357: E/AndroidRuntime(708):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
 07-14 04:38:46.357: E/AndroidRuntime(708):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
 07-14 04:38:46.357: E/AndroidRuntime(708):     at dalvik.system.NativeStart.main(Native Method)
 07-14 04:38:46.357: E/AndroidRuntime(708): Caused by: java.lang.reflect.InvocationTargetException
 07-14 04:38:46.357: E/AndroidRuntime(708):     at java.lang.reflect.Method.invokeNative(Native Method)
 07-14 04:38:46.357: E/AndroidRuntime(708):     at java.lang.reflect.Method.invoke(Method.java:511)
 07-14 04:38:46.357: E/AndroidRuntime(708):     at android.view.View$1.onClick(View.java:3039)
 07-14 04:38:46.357: E/AndroidRuntime(708):     ... 11 more
 07-14 04:38:46.357: E/AndroidRuntime(708): Caused by: java.lang.NoClassDefFoundError: com.gargoylesoftware.htmlunit.WebClient
 07-14 04:38:46.357: E/AndroidRuntime(708):     at com rbx.robloxapp.Login.doLogin(Login.java:46)
 07-14 04:38:46.357: E/AndroidRuntime(708):     ... 14 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T05:42:57.537

您是否在 AndroidManifest.xml 中添加了您的库，例如`google map library <uses-library android:name="com.google.android.maps"/>`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T06:48:06.623

把你的罐子放进去，`libs`然后右键单击它并选择`Add to Build Path`

# shopify - Nodejitsu 部署后无法更改 nodify 应用程序 url

> ID：11481236
> 
> 赞同：0
> 
> 时间：2012-07-14T05:06:02.643
> 
> 标签：shopify, nodejitsu

编辑：所以看起来问题出在 URL 中的下划线。我用破折号（-）替换了它，它工作正常。

我的应用程序在本地主机上运行正常。

部署到 Nodejitsu 后，我试图从我的合作伙伴仪表板编辑应用程序并将“应用程序 URL”从

```
http://localhost:3000 
```

至

```
http://mdausmann.guidebyside_shopify.jit.su 
```

我在编辑页面上收到以下消息... 2 个错误禁止保存此 api 客户端

以下字段存在问题：

```
Callback url is invalid
Application url is invalid 
```

这对我来说似乎没有多大意义，因为它是一个有效的 url 并且是 up 等。我也尝试添加一个 :80 但这没有用。

有任何想法吗？迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T16:07:59.853

您的 URL 似乎不是 shopify 所期望的。它似乎起源于下划线。

例如，如果您将回调 URL 设置为

```
http://fabulous.dancing_pandas.com 
```

它行不通。但是，如果您将回调 url 设置为：

```
http://fabulous.dancingpandas.com 
```

一切都会好起来的。这是 Shopify 的一个错误，但我想解决方法是将您更改`guidebyside_shopify`为 guidebysideshopify 或类似的东西。这应该可以帮助您解决这个错误，直到它得到修复。

**编辑**

当我测试一些东西时出现了一个小错误。[在对ruby​​ URL 库](http://www.ruby-forum.com/topic/171362)进行一些研究后，我发现根据 RFC，下划线是不允许的。因此，您需要修复您的应用程序 URL，这不是 Shopify 中的错误。

# android - 适用于 Eclipse 的 Android ADT 11

> ID：11481240
> 
> 赞同：-2
> 
> 时间：2012-07-14T05:07:33.787
> 
> 标签：android, adt

> **可能重复：**
> [在哪里可以找到旧版本的 Eclipse ADT](https://stackoverflow.com/questions/4710107/where-can-i-find-older-versions-of-eclipse-adt)

我如何`ADT 11`为 Eclipse 下载 2011 年 6 月的 Android SDK。我知道最新的更好，但我是 Android 的初学者，我正在学习它的教程使用 ADT 11。我已经安装了`ADT 20`，但 xml 文件中的大部分内容和其他内容都已更改。而且我因此很难学习android。这是因为最新的`ADT`还是因为最新的变化`SDK`，所以我卸载了那个以安装以前的版本。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T05:12:42.273

转到`Window => Preferences => Install/Update`它将显示新对话框在新对话框中选择`Installation History`选项卡。在这里你可以看到更新和安装的列表和日期。选择要卸载的工具。

卸载后，添加 ADT 插件可以参考[https://stackoverflow.com/a/4710123/630668](https://stackoverflow.com/a/4710123/630668)答案。

# java - Java 正则表达式（无空格或 0-9）

> ID：11481250
> 
> 赞同：0
> 
> 时间：2012-07-14T05:10:02.193
> 
> 标签：java, regex, eclipse

通过问题输入报告所有者的名字作为字符串。

需要一个正则表达式来有条件地检查，以确保名字不包含任何数字字符，介于 0 到 9 之间的数字。如果包含，则必须删除它。名字也不能包含任何空格。

```
 do
    {
        System.out.println("Please enter your FIRST name:");
        firstName = keyboard.next();
        firstName= firstName.toUpperCase();
    }

    while( !firstName.matches("^/s^[a-zA-Z]+$/s"));

    System.out.println("Thanks " + firstName); 
```

* * *

```
Output
p
Please enter your FIRST name:
p p
Please enter your FIRST name:
Please enter your FIRST name: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T05:52:31.890

你把你的正则表达式弄糊涂了。试试这个：

```
while(!firstName.matches("^[^\\d\\s]+$")); 
```

正则表达式的`"^[^\\d\\s]+$"`意思是“非数字或空格，以及至少一个字符”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T05:16:14.527

如果要消除数字，只需强制：

```
\D* 
```

在你的匹配器中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T05:36:34.990

试试这个：`^[a-zA-Z,.'-]+$`。:D

此外，如果你想尝试你的正则表达式，[rubular.com](http://rubular.com/)是一个很好的地方：D

您使用了 Scanner#next，而不是 Scanner#nextLine。

来自 Scanner#next JavaDoc：

> 从此扫描器中查找并返回下一个完整的令牌。一个完整的标记前后是匹配分隔符模式的输入。

我相信这样一个分隔符是`\s+`：D

```
import java.util.Scanner;

public class FirstNameParser {

    public static void main(String[] args) {
        Scanner keyboard = new Scanner(System.in);
        String firstName = null;

        do {
            System.out.print("Please enter your FIRST name: ");
            firstName = keyboard.nextLine();
            firstName = firstName.toUpperCase();
        }

        while (!firstName.matches("^[a-zA-Z,.'-]+$"));

        System.out.println("Thanks " + firstName);

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T05:56:53.043

正如你`firstname`在大写和`matches`方法中匹配整个输入， `[A-Z]+`就足够了。

```
while( !firstName.matches("[A-Z]+")); 
```

或者

```
while( !firstName.matches("\\p{Lu}+")); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-14T11:57:17.420

尝试

```
firstName =  firstName.replaceAll("[\\d\\s]", "").toUpperCase(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T15:16:31.810

你可以试试这个。使用[Rubular.com](http://rubular.com/)创建它。这

```
Pattern nameRequirment = Pattern.compile("^((?!.[\\d\\s]).)*$");

while (!nameRequirement.matcher(myString).matches()){
  //... prompt for new name
} 
```

# linux - 如何为 IPtable 创建 URL 链

> ID：11481251
> 
> 赞同：-2
> 
> 时间：2012-07-14T05:10:02.563
> 
> 标签：linux, networking, netfilter

我想为 Iptable 创建链，它返回 URL 并从所有数据包中发布和获取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T09:11:28.903

我不相信[netfilter/iptables](http://www.netfilter.org/)通常知道 HTTP 等应用程序级协议。有一些有限的协议剖析支持用于在某些特定协议（例如 FTP）中进行连接跟踪，但仅此而已。在我看来，你有两个选择：

*   将您要检查的数据包重定向到[用户空间](http://linux.die.net/man/3/libipq)，您可以在其中拥有一个帮助进程来提取您需要的信息。但是，我不知道有任何现有的应用程序可以做到这一点，因此您可能必须自己编写它。

*   做理智的事情，只需使用数据包嗅探器，例如[Wireshark](http://www.wireshark.org/)或[tcpdump](http://www.tcpdump.org/)，最好使用仅允许 HTTP 流量通过的捕获过滤器。作为奖励，您可以获得比 HTTP 请求和 URL 更多的信息.​​.....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-08T15:41:46.673

（3年后，但我认为对其他人也有用）

准系统 iptables 与应用程序协议无关，但有[iptables 扩展](http://ipset.netfilter.org/iptables-extensions.man.html)

例如，查看扩展*字符串*和*u32*

# sql - 获取加入 DetailTable 的 MasterTable 金额的总和

> ID：11481269
> 
> 赞同：0
> 
> 时间：2012-07-14T05:13:00.990
> 
> 标签：sql, sql-server, tsql, join, sum

我有两张桌子：
**1\. Master**

```
| 身份证 | 姓名 | 金额 |
|-----|--------|--------|
| 1 | 一个 | 5000 |
| 2 | 乙 | 10000 |
| 3 | c | 5000 |
| 4 | d | 8000 |

```

**2\. 细节**

```
| ID |主ID| PID | 数量 |
|-----|--------|--------|------|
| 1 | 1 | 1 | 10 |
| 2 | 1 | 2 | 20 |
| 3 | 2 | 2 | 60 |
| 4 | 2 | 3 | 10 |
| 5 | 3 | 4 | 100 |
| 6 | 4 | 1 | 20 |
| 7 | 4 | 3 | 40 |

```

我想`sum(Amount)`从*加入**Deatil*的*Master*中选择**`Detail.PID in (1,2,3)`**

 **所以我执行以下查询：

```
SELECT SUM(Amount) FROM Master M INNER JOIN Detail D ON M.ID = D.MasterID WHERE D.PID IN (1,2,3) 
```

结果应该是***20000***。但我得到*40000*
看[这个小提琴](http://sqlfiddle.com/#!3/e71b2/1)。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T05:18:53.060

你得到的数量正好是两倍，因为详细表对于 WHERE 子句中的每个 PID 都有两次出现。

看[演示](http://sqlfiddle.com/#!3/e71b2/3/0)

采用

```
SELECT SUM(Amount) 
FROM Master M 
WHERE M.ID IN (
  SELECT DISTINCT MasterID
  FROM DETAIL
  WHERE PID IN (1,2,3) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T05:24:27.023

当所有列都在主表中时，将主表与详细信息连接起来的要求是什么。

此外，这些表上没有定义任何 FK 关系。查看您的数据，在我看来，MasterId 的详细信息表上应该有 FK。如果是这种情况，那么您根本不需要加入表格。

此外，如果您想确保在详细信息表中有记录需要求和的记录并且没有 FK 关系。然后你可以试试exists而不是join。**

# php - 使用 POST 数据登录 wordpress

> ID：11481271
> 
> 赞同：1
> 
> 时间：2012-07-14T05:13:21.847
> 
> 标签：php, wordpress, curl

我已经看过很多关于如何做到这一点的帖子，但我尝试过的任何事情似乎都不适用于我的情况。我期待着让它发挥作用而发疯。

我正在尝试从不同的 url 登录 wordpress 站点 A，因此当用户登录 wordpress 站点 B 时，他们会自动登录到 wordpress 站点 A。注意：这些站点位于同一服务器上，只是不同的 url。

我已经尝试过 CURL，并且一切正常（发送和接收数据），但是 cookie 似乎没有被正确存储，而且永远不会让我登录到该站点。我正在对密码进行安全保护，我刚刚将其删除以将其发布在这里

所以这里更详细地是我从（站点 B）发送 CURL 的代码

```
add_filter('wp_authenticate', 'send_login', 100, 3);
function send_login($username, $password) {
    // this filter is called on the log in page
    // make sure we have a username before we move forward
    if (!empty($username)) {

    //send login information to other sites
    $fields = array( 'username' => $username , 'password' =>   $password );
    echo "<br /> pwd: ". $fields['password'];
    $response = do_post_request('http://www.wordpressSiteA.com/wp-content/plugins/login-api/login.php' , $fields );
    echo $response;
    exit;  // i have this for testing purposes so i dont have to keep logging in and out to test
    return $user;
    }
    return $user;
}

 function send_data_to_sister_sites($url , $fields ) {
//url-ify the data for the POST
foreach($fields as $key=>$value) { $fields_string .= $key.'='.urlencode($value).'&'; }
rtrim($fields_string,'&');
$cookie = "cookie.txt";
//open connection
$ch = curl_init();
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_COOKIESESSION, true);
curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6");
curl_setopt ($ch, CURLOPT_TIMEOUT, 60);
curl_setopt ($ch, CURLOPT_COOKIEJAR, $cookie);
curl_setopt($ch, CURL_COOKIEFILE, '');
//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL,$url);
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,true);
curl_setopt($ch,CURLOPT_POST,count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);

//execute post
$result = curl_exec($ch);

//close connection
curl_close($ch);

return $result;
} 
```

然后这里是站点 A 上的 login.php 文件，我也发送 CURL 以登录用户

```
require_once("../../../wp-blog-header.php");
//check security of this request and check fields are sent properly
if (isset ($_REQUEST['username'] ) && isset($_REQUEST['password']) ) {
    $username = $_REQUEST['username'];
    $userinfo = get_user_by('login', $username);
    if ($userinfo) {

        //parse data and decrypt fields
        $password =  $_REQUEST['password'];

        $creds = array();
        $creds['user_login'] = $username;
        $creds['user_password'] = $password;
        $creds['remember'] = false;
        //log in user

        wp_signon($creds, true);
        wp_set_auth_cookie( $userinfo->ID );
        wp_set_current_user($userinfo->ID);

    //  global $current_user;
        //get_currentuserinfo();
    //  echo 'name: ' . $current_user->user_login . '<br />';
        if ( is_wp_error($user) )
           echo $user->get_error_message();
        echo "Success";
    } else {
        //no user found exit false
        echo "no user found";
    }
} else { echo "no paramters exist"; } 
```

我已经像这样从站点 A 定期运行这个脚本，它工作正常，用户登录。

www.wordpressSiteA.com/wp-content/plugins/login-api/login.php?username=username&password=password

然而，在 CURL 请求上似乎没有任何保存。谁能想到一些事情来帮助我朝着正确的方向前进。我太近了！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T05:18:45.713

像其他网络应用程序一样，word press 使用会话进行登录。并且在使用不同域时会话存在问题。它们不会发送到任何其他站点，甚至任何其他子域，更不用说另一个域了。所以尝试一种发送会话的方法！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T05:32:01.213

由于它们在同一台服务器上，因此可以在两个站点之间共享会话，但不能通过读取 cookie。例如，您可以在两个站点的数据库中存储会话 ID、IP 和上次访问时间，并在两个站点中读取该数据库表，如果相同的 IP 并且在短时间内访问并且没有注销，则基于该会话创建新会话id 并登录用户。这可能会为一些安全问题打开大门，但可以做到。

另请参阅：[在同一服务器上跨多个域的会话共享](https://stackoverflow.com/questions/4759312/session-share-across-multiple-domains-on-same-server)

# tfs - 如何让 tfs 使用 Web 部署发布特定文件夹

> ID：11481272
> 
> 赞同：1
> 
> 时间：2012-07-14T05:13:36.153
> 
> 标签：tfs, msbuild, webdeploy

我需要使用 tfs 构建将项目中的特定文件夹发布到我的网站。我知道 tfs 复制到一个放置文件夹，但是当我排队一个新的构建时，我还需要它来发布到我的 Web 服务器。无论如何我可以做到这一点吗？我目前在我的服务器上安装了 web deploy，并且我已经对其进行了测试并且知道它可以工作。这些会是某种类型的构建定义吗？我只能找到复制到 UNC 路径的示例定义。

# c - 需要处理查询时，C 秒计时失败？

> ID：11481274
> 
> 赞同：1
> 
> 时间：2012-07-14T05:14:40.600
> 
> 标签：c, linux, pthreads

我们在下面有一个代码，它每秒都在滴答作响，它工作得很好。当我们有 //select 和 insert 查询需要处理每一秒时，问题就开始了，我们注意到时间间隔在 1 到 10 秒之间。因此，我们实际上错过了一些要完成的处理。知道如何克服这个问题吗？是不是我们需要每秒创建一个单独的线程？谢谢。

```
void * reader_thread (void * arg) {
    while (1) {
        if (flag) {
            struct timeval tv;
            char timeBuf[10],secondBuf1[100],queryBuf1[500],queryBuf2[500];
            char buff[20] = {0};
            gettimeofday (&tv, NULL);
            //fprintf (stderr, "[%d.%06d] Flag set to 1 on ", tv.tv_sec, tv.tv_usec);
            tv.tv_sec -= 5;
            strftime(buff, 20, "%Y-%m-%d %H:%M:%S", localtime(&tv.tv_sec));
            printf("\nTime is %s", buff);

            //select and insert queries

            fprintf (stderr, " %s\n", buff);
            flag = 0;
        }
        usleep  (100); // will skew the processing but not signal delivery
    }
    return NULL;
}

void callback (int sig) {
    flag = 1; // this is the only thing the callback does
}

int main () {
    timer_t tid = 0;
    pthread_t thread;
    struct itimerspec it;
    char *localServer = "localhost", *remoteServer = "localhost";
                       char *localUser = "user1", *remoteUser = "user2";
                       char *localPassword = "****", *remotePassword = "*****";
                       char *localDatabase = "db1", *remoteDatabase = "db1";
                       localConn = mysql_init(NULL), remoteConn = mysql_init(NULL);
    if (!mysql_real_connect(localConn, localServer,
                         localUser, localPassword, localDatabase, 0, NULL, 0)) {
                      fprintf(stderr, "%s\n", mysql_error(localConn));
                      exit(1);
                   }   

    pthread_create (&thread, NULL, reader_thread, NULL);

    signal (SIGALRM, callback);

    it.it_value.tv_sec = 1;
    it.it_value.tv_nsec = 0;
    it.it_interval.tv_sec = 1;
    it.it_interval.tv_nsec = 0;
    timer_create (CLOCK_REALTIME, NULL, &tid);
    timer_settime (tid, 0, &it, NULL);

    while (1) sleep (100);
    return 0;
} 
```

编辑代码。

```
sigset_t sigset;
        sigfillset(&sigset);

        if (pthread_sigmask(
            SIG_BLOCK,
            &sigset,
            NULL))
        {
          perror("pthread_sigmask");
        }

    pthread_create (&thread, NULL, reader_thread, NULL);

    //sigset_t sigset;
    //sigemptyset(&sigset);
    sigaddset(&sigset, SIGALRM);

        if (pthread_sigmask(
            SIG_UNBLOCK,
            &sigset,
            NULL))
        {
          perror("pthread_sigmask");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T14:23:07.590

您可能希望以不同的方式进行设置：

1**在产生任何线程之前**，使用`pthread_sigmask()`使应用程序忽略所有信号。然后，此行为将被之后创建的任何线程继承，并使它们不会吃掉任何信号，因为只有主线程来处理它们（参见下面的步骤 2）。

2**在创建所有线程后，**再次使用`pthread_sigmask()`以使主线程接收`SIGALRM`和使用`sigaction()`（而不是`signal()`；另请参阅我对 OP 的评论）为`SIGALRM`.

**3为每个线程**声明一个标志。当前，重置标志的线程可能会在另一个线程启动之前执行此操作。

* * *

如果主线程不需要做任何事情（或者你不介意产生另一个线程）：或者使用安装信号处理程序`sigaction()`（如上面的步骤 2 所述），你可以使用类似`do { int sig = sigwaitinfo(...); ... } while (1);`的东西来拉取从排队并设置用于触发查询开始的标志。

* * *

**更新**：

关于如何使用`pthread_sigmask()`阻塞调用线程的**所有信号的示例：**

```
sigset_t sigset;
sigfillset(&sigset);

if (pthread_sigmask(
    SIG_BLOCK,
    &sigset,
    NULL))
{
  perror("pthread_sigmask");
} 
```

关于如何使用为调用线程`pthread_sigmask()`解除阻塞的示例：`SIGALRM`

```
sigset_t sigset;
sigemptyset(&sigset);
sigaddset(&sigset, SIGALRM);

if (pthread_sigmask(
    SIG_UNBLOCK,
    &sigset,
    NULL))
{
  perror("pthread_sigmask");
} 
```

有关更多详细信息，`pthread_sigmask()` 请参阅`man pthread_sigmask()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T06:01:14.150

只是一个建议 - 可能/可能不是您正在寻找的那个 - 您可以执行一些操作，例如继续将 select 和 insert 查询添加到 reader_thread 中的队列中，并为从队列中获取查询的函数设置一个单独的线程，实际上执行它们。

# python - Python：计算一个点符合曲线的概率

> ID：11481279
> 
> 赞同：4
> 
> 时间：2012-07-14T05:17:00.490
> 
> 标签：python, probability

有一种情况，给我一个总票数，以及累计售票数据如下：

```
Total Tickets Available: 300
Day 1: 15 tickets sold to date
Day 2: 20 tickets sold to date
Day 3: 25 tickets sold to date
Day 4: 30 tickets sold to date
Day 5: 46 tickets sold to date 
```

售出的票数是非线性的，有人问我如果有人打算在第 23 天买票，他得到票的概率是多少？

我一直在研究很多用于曲线拟合的库，比如 numpy、PyLab 和 sage，但我有点不知所措，因为统计数据不在我的背景中。给定这组数据，我如何轻松计算概率？如果有帮助，我还有其他位置的门票销售数据，曲线应该会有所不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T15:57:18.300

这个问题的最佳答案需要更多关于这个问题的信息——随着日期的临近（和割草量），人们是否更有可能买票？是否存在会暂时影响销售率的广告事件？等等。

但是，我们无法访问这些信息，所以我们假设，作为第一个近似值，门票销售率是恒定的。由于销售基本上是随机发生的，最好将它们建模为[泊松过程](http://en.wikipedia.org/wiki/Poisson_process)注意，这并不能说明许多人会购买多张票的事实，但我认为这不会对结果产生太大影响；也许真正的统计学家可以在这里插话。另外：我将在这里讨论恒定速率泊松过程，但请注意，由于您提到速率绝对不是恒定的，您可以将可变速率泊松过程作为下一步。

要对泊松过程建模，您只需要*平均*门票销售率即可。在您的示例数据中，每天的销售额为 [15, 5, 5, 5, 16]，因此平均价格约为每天 9.2 张门票。我们已经售出了 46 张门票，所以还剩 254 张。

从这里，很容易问，“给定 9.2 tpd 的速度，在 23 天内售出*少于*254 张门票的概率是多少？” *（忽略您不能*出售超过 300 张门票的事实）。计算它的方法是使用累积分布函数（有关泊松分布的 CDF，请参见[此处](http://en.wikipedia.org/wiki/Poisson_distribution)）。

平均而言，我们预计在 23 天后售出 23 * 9.2 = 211.6 张门票，因此在概率分布的语言中，*期望值*为 211.6。CDF 告诉我们，“给定期望值 λ，看到值 <= x 的概率是多少”。你可以自己做数学，也可以让 scipy 帮你做：

```
>>> import scipy.stats
>>> scipy.stats.poisson(9.2 * 23).cdf(254-1)
0.99747286634158705 
```

所以这告诉我们：**如果**门票销售可以准确地表示为泊松过程，并且**如果**平均门票销售率真的是 9.2 tpd，那么在 23 天后至少有一张门票可用的概率是 99.7%。

现在假设有人想带一组 50 位朋友，并且想知道如果他们在 25 天内购买了所有 50 张门票的概率（将问题重新表述为“如果我们预计平均卖出 9.2 * 25 张门票，那么卖出 <= (254-50) 票的概率？”）：

```
>>> scipy.stats.poisson(9.2 * 25).cdf(254-50)
0.044301801145630537 
```

所以 25 天后有 50 张票可用的概率约为 4%。

# asp.net-mvc - MVC：ActionLink 记住 ID 字段？

> ID：11481285
> 
> 赞同：1
> 
> 时间：2012-07-14T05:18:18.987
> 
> 标签：asp.net-mvc, asp.net-mvc-3

[这是早期 stackoverflow 问题（链接文本](https://stackoverflow.com/questions/10955466/actionlink-includes-current-id-in-url)）的后续。

如果您使用以 {id} 结尾的默认路由定义，那么如果您有一个 ActionLink，其目标与生成 ActionLink 所在页面的方法相同，则框架会自动在回调 url 中包含 id，即使您没有要求。

例如，如果您显示来自以下 URL 的页面：

```
http://www.somedomain.com/AController/SameMethod/456 
```

并且页面 cshtml 文件具有如下所示的 ActionLink：

```
@Html.ActionLink("some text", "SameMethod", ARouteValueDictionary, SomeHtmlAttributes) 
```

那么无论您是否在 ARouteValueDictionary 中包含“id”，它都会显示在生成的 URL 中。

仅当您回调到最初生成页面的相同方法时才会发生这种情况。如果您在同一个控制器上回调不同的方法，{id}​​ 字段不会插入到生成的 URL 中。

我不一定有这个问题。但我很好奇**为什么**设计师采用这种方法。

仅供参考，我发现此功能是因为我无意中在我的网站设计中依赖它。我必须将 ID 字段连同一堆其他信息一起传回服务器……只是我从未明确将 ID 信息添加到 RouteValueDictionary。但是因为我的大多数回调都是针对最初生成页面的相同操作方法，所以无论如何我都包含了信息。

当一个新组件（我确信它与已经工作的组件“基本相同”）失败时，您可以想象我的惊讶。但是由于新组件具有不同的目标操作方法，所以魔法消失了。

**编辑：**

修改了解释以阐明在生成的 URL 中包含 {id} 字段取决于调用与首先生成页面相同的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T07:10:37.033

> ...框架自动在回调 url 中包含 id，即使您没有请求它。

我更喜欢“环境”这个词而不是“自动”这个词。您可以将 URL 中已有的路由标记视为 HtmlHelper 和 UrlHelper 的“环境”。

> 但我很好奇为什么设计师采用这种方法。

考虑一个组合在一起的控制器，比如 5 个动作。这 5 个可能彼此有链接，但在组外没有很多链接。最简单的 Html.Action 重载只需要 2 个参数：要呈现的文本和动作名称。

这使得在这些视图中链接从一个动作到另一个动作的简写。由于它们都在同一个控制器上，并且该控制器已经在当前操作的路径中，因此当您未在辅助方法中指定控制器名称时，MVC 会重用此值。相同的行为扩展到 {id} 或您定义的任何其他路由标记。

# objective-c - 如何避免系统阻塞

> ID：11481286
> 
> 赞同：-1
> 
> 时间：2012-07-14T05:18:22.127
> 
> 标签：objective-c, macos

我使用下面的代码来执行我的程序

```
for(int i=0;i<100000000000000000000;i++)
{
//dosomething
} 
```

我想让计算机在处理时仍然响应用户交互以避免系统阻塞。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T05:22:09.417

您可以使用[Grand Central Dispatch](http://en.wikipedia.org/wiki/Grand_Central_Dispatch)。这就像 .NET 中的 BackgroundWorker/Task。[Ray Wenderlich](http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial)也有一个很棒的教程。

例如：

```
dispatch_queue_t q = dispatch_get_global_queue(0, 0);
dispatch_queue_t main = dispatch_get_main_queue();
dispatch_async(q, ^{
    // long running database operation
    dispatch_async(main, ^{

   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T05:23:02.933

用户界面在主应用程序线程上处理。看来您要的是多线程程序；在 Mac OS X 上有很多方法可以实现，包括直接使用 POSIX 线程（`pthread_create()`等）。

更多信息：http: [//developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Multithreading/Introduction/Introduction.html%23//apple_ref/doc/uid/10000057i-CH1-SW1](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Multithreading/Introduction/Introduction.html%23//apple_ref/doc/uid/10000057i-CH1-SW1)

# html - 标签中的Android phonegap 字切

> ID：11481291
> 
> 赞同：0
> 
> 时间：2012-07-14T05:19:24.493
> 
> 标签：html, label

海我在PhoneGap中有一个应用程序，用于设计我使用了html。我的标签有问题，当文本很长时，单词会被删掉。

我用自动换行打破了这个词

我的代码[http://jsfiddle.net/elakkiya/fvNte/](http://jsfiddle.net/elakkiya/fvNte/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T06:20:00.390

移除高度：30px；属性并确保关闭两个 div。

[http://jsfiddle.net/fvNte/1/](http://jsfiddle.net/fvNte/1/)

**更新：**问题是您将高度设置为小于容器，以便浏览器遵守。你可以写溢出：隐藏；使其保持您想要的大小，但在您指定的区域之外不显示任何文本，或者您可以

1）不设置高度 2）或者设置最小高度（min-height:30px;）

# c++ - C++ 我自己的文件名是什么？

> ID：11481292
> 
> 赞同：0
> 
> 时间：2012-07-14T05:19:35.517
> 
> 标签：c++, variables, system

我有一段调用系统命令的 C++ 代码。我想将我自己的 C++ 可执行文件的文件名传递给系统命令。有人知道该怎么做吗？因此，例如我的 C++ 代码被称为“switch-5”.. 我想要做的是这样的；

system("./script.sh switch-5");

有人有任何线索吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T05:21:18.840

您的可执行文件名称是 argv 中传递的第一个参数。

要对此进行测试，只需运行：

```
int main(int argc, char **argv)
{
   printf("My program name: '%s'\n", argv[0]);
   return 0;
} 
```

（我假设您知道如何将它与您的脚本名称结合起来以获取要传递给 system() 的字符串。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T05:22:15.590

`argv[0]`传递给 main 的是您的可执行文件的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T05:22:22.257

在应用启动期间将其存储在全局变量中：

```
static char *selfname;

int main(int argc, char **argv)
{
    selfname = argv[0];

    // etc.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T16:09:08.787

请注意，argv[0] 包含用于启动程序的确切内容，包括相对或绝对路径，例如：“./programname”。

# c# - 文件夹锁定程序

> ID：11481295
> 
> 赞同：1
> 
> 时间：2012-07-14T05:20:11.997
> 
> 标签：c#, .net-4.0, permissions, ntfs

我创建了一个应用程序，它将拒绝对文件夹的所有完全控制访问，直到有人使用正确的密码登录应用程序。我的锁定程序的来源是：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;
using System.Security.AccessControl;
using System.DirectoryServices;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            string Directoryd = "D:";
            string mydirectory = Directoryd + "\\" + "rs\\";
            if (!Directory.Exists(mydirectory))
            {
                Directory.CreateDirectory(mydirectory);
            }
            DirectoryInfo di = new DirectoryInfo(mydirectory);
            DirectorySecurity ds = di.GetAccessControl();

            ds.AddAccessRule(new FileSystemAccessRule(
                @"everyone",
                FileSystemRights.FullControl,
                AccessControlType.Deny));

            di.SetAccessControl(ds);
        }      
    }
} 
```

这将拒绝对文件夹 D:/rs/ 的所有访问我想到了一个脚本，它可以在按下按钮时解锁文件夹，如下所示：

```
private void login_Click(object sender, EventArgs e)
{
    string username = text1.Text;
    string password = text2.Text;
    if(username == "aname" && password == "password")
    {
        string Directoryd = "D:";
        string mydirectory = Directoryd + "\\" + "rs\\";
        if (!Directory.Exists(mydirectory))
        {
            Directory.CreateDirectory(mydirectory);
        }
        DirectoryInfo di = new DirectoryInfo(mydirectory);
        DirectorySecurity ds = di.GetAccessControl();

        ds.AddAccessRule(new FileSystemAccessRule(
            @"everyone",
            FileSystemRights.FullControl, 
            AccessControlType.Allow));

        di.SetAccessControl(ds);
    }
} 
```

但这显示访问被拒绝错误。如何避免这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T05:24:00.177

拒绝许可的优先级高于允许。您必须删除拒绝权限而不添加另一个权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-23T14:04:34.363

尝试替换这个：

```
ds.AddAccessRule(new FileSystemAccessRule(@"everyone", FileSystemRights.FullControl, AccessControlType.Allow));
di.SetAccessControl(ds); 
```

和

```
ds.AddAccessRule(new FileSystemAccessRule(@"everyone", FileSystemRights.FullControl, AccessControlType.Deny));
di.RemoveAccessRule(ds); 
```

希望这会有所帮助。

# parsing - Haskell：如何将 IO 输入字符串解析为 Float（或 Int 或其他）？

> ID：11481306
> 
> 赞同：16
> 
> 时间：2012-07-14T05:23:56.033
> 
> 标签：parsing, haskell, input, io, floating-point

我正在尝试制作一个程序，该程序采用用户通过键盘输入的浮点数并对其进行处理。

但是，每次我尝试将输入的字符串解析为浮点数时，我都会不断出错。我尝试过的每一种方法都无法让我获取用户输入的数据并将其转换为浮点数，而这正是我所需要的。

我的练习计划（不是我要解决的实际问题）是：

```
main = do
    putStrLn "Please input a number."
    inputjar <- getLine
    read :: read a => String -> a
    putStrLn( read inputjar :: Int) 
```

## 编辑

还有一个问题。

如何获取输入的字符串并将其转换为可以在计算中使用的内容？

例如，如何获取输入的字符串，以便可以执行以下操作：

```
(var + var) / 2 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-14T06:19:33.397

```
main = do
   putStrLn "Please input a number."
   inputjar <- readLn
   print (inputjar :: Int) 
```

这在某种程度上更好，因为它立即将我们正在读取的字符串修复为：

```
main = do
   putStrLn "Please input a number."
   inputjar :: Int  <- readLn
   print inputjar 
```

但它需要`{-#LANGUAGE ScopedTypeVariables#-}`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-14T13:47:18.890

`putStrLn`打印出`String`s，而不是`Int`s，所以有两种解决方案：

使用`print`，它打印任何实现`Show`：

```
main = do
    putStrLn "Please input a number."
    inputjar <- getLine
    let n = read inputjar :: Int
    print n 
```

..或调用您阅读`putStrLn`的原件`String`

```
main = do
    putStrLn "Please input a number."
    inputjar <- getLine
    let n = read inputjar :: Int
    putStrLn inputjar 
```

在后一个示例中，从未使用过 n，但大概您会在实际使用它之后编写一些代码。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-14T05:44:48.437

您`(read inputjar :: Int)`在代码中说，但您告诉我们您想阅读`Float`. 你没有定义`read`，把那条线去掉。您使用`putStrLn`以便可以打印出浮点数，但`putStrLn`需要 a `String`，因此您需要`show`该值。

```
main = do
    putStrLn "Please input a number."
    inputjar <- getLine
    putStrLn $ show (read inputjar :: Float) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-14T05:45:03.877

好吧，我猜

```
read :: read a => String -> a 
```

只是误会了吗？

无论如何，在 ghci 下，`:t putStrLn`显示：

```
putStrLn :: String -> IO () 
```

所以`putStrLn`只接受 String 作为它的第一个参数，所以如果你真的想：

```
putStrLn( show (read inputjar :: Int)) 
```

顺便说一句，`read inputjar :: int`是正确的，只有你的输出是错误的。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2015-03-01T23:07:55.237

这对我有用

```
import System.IO

getNum :: IO Integer 
getNum = readLn 

--call function like this
something <- getNum
--something is type Integer 
```

# jquery - jQuery脚本无法实现循环

> ID：11481313
> 
> 赞同：0
> 
> 时间：2012-07-14T05:24:48.297
> 
> 标签：jquery, loops

我试图让这个脚本循环，但我不能。

```
$(document).ready(function inout() {
    $('#review1').fadeIn(1500).delay(3500).fadeOut(1500);
    $('#review2').delay(3500).fadeIn(1500).delay(3500)
     }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T05:29:46.063

如果你想让 review1 淡入，然后淡出，然后 review2 淡入，然后淡出之间有延迟，你可以这样做；

```
$(document).ready(function inout() {
    function cycle() {
        $('#review1').fadeIn(1500).delay(3500).fadeOut(1500, function() {
            $('#review2').delay(3500).fadeIn(1500).delay(3500).fadeOut(1500, function() {
                setTimeout(cycle, 1500);
            });
        });
    }

    cycle();
}); 
```

这使用 jQuery 动画完成功能来链接单独的动画，以便一个在另一个完成后开始。这些是异步动画，因此您不能只使用正常的顺序编程。

# safari - 如何停止 Safari 在链接图像中为文本加下划线？

> ID：11481321
> 
> 赞同：2
> 
> 时间：2012-07-14T05:26:21.980
> 
> 标签：safari

我的网站中有链接到文本的图像。文本看起来像一个链接，当将鼠标悬停在图像上时，它会出现在屏幕上的固定位置，其下方有文字来描述它。我希望图像下的文本看起来很简单，没有下划线。它适用于 IE9、Chrome 和 Firefox，但不适用于 Safari。文本链接的 html 如下所示：-

```
 <p><a class="thumbnail" href="#thumb">Basil Thomas Stirratt<span><img src="images/basil     stirrat.jpg" width="200" height="299" alt="" /><br />Basil Thomas Stirratt<br />taken June 1940</span></a>, who was 18 at the time, had been......</p> 
```

CSS看起来像这样： -

```
.thumbnail{
background-color:#FFFF00;
position:static;
z-index: 0}

.thumbnail:hover{
background-color:#CCCCCC;
z-index: 50}

.thumbnail span{ /*CSS for enlarged image*/
position:fixed;
background-color:#99CCFF;
padding:5px;
left: -1000px;
border: 10px ridge #E0E0E0;
visibility: hidden;
text-decoration:none;
text-indent:0px;
font-family:"Lucida Sans Unicode", "Lucida Grande", sans-serif;
color:#000000;
text-align:center;
-moz-box-shadow: 3px 3px 8px #333333;
-webkit-box-shadow: 3px 3px 8px #333333;
box-shadow: 3px 3px 8px #333333;}

.thumbnail span img{ /*CSS for enlarged image*/
border-width: 0;
padding: 2px;} 
```

奇怪的是，我似乎不允许发布图像来证明问题。要查看这些图像的显示方式，请查看我的网站 [1]：[http](http://www.wellingtont2905.co.uk/story.html) ://www.wellingtont2905.co.uk/story.html ，查找黄色突出显示的文本并将光标悬停在它上面。

关于如何阻止 Safari 执行此操作的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T17:54:10.517

已经把问题整理好了。这与我想要的在我的文本中加下划线的正常链接有关。解决方案是将链接设置为深蓝色，将弹出图像的背景设置为相同的蓝色，然后将图像下方的文本颜色更改为白色。这意味着文本仍然带有下划线，但与背景颜色相同，因此您看不到下划线！这个对我有用！！

# c# - 覆盖 GetHashCode()

> ID：11481323
> 
> 赞同：20
> 
> 时间：2012-07-14T05:27:01.907
> 
> 标签：c#, hash, resharper, gethashcode

在[这篇文章中](https://stackoverflow.com/a/263416/859891%5D)，Jon Skeet 提到他通常使用这种算法来覆盖*GetHashCode()*。

```
public override int GetHashCode()
{
  unchecked // Overflow is fine, just wrap
  {
    int hash = 17;
    // Suitable nullity checks etc, of course :)
    hash = hash * 23 + Id.GetHashCode();
    return hash;
  }
} 
```

现在，我已经尝试过使用它，但是 Resharper 告诉我方法*GetHashCode()*应该只使用只读字段进行散列（尽管它编译得很好）。什么是一个好的做法，因为现在我真的不能让我的字段是只读的？

我尝试通过 Resharper 生成此方法，结果如下。

```
public override int GetHashCode()
{
  return base.GetHashCode();
} 
```

老实说，这并没有多大贡献...

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-14T06:18:31.897

如果您的所有字段都是可变的并且您必须实现`GetHashCode`方法，那么恐怕这是您需要的实现。

```
public override int GetHashCode() 
{ 
    return 1; 
} 
```

是的，这是低效的，但这至少是正确的。

问题是`GetHashCode`Dictionary 和 HashSet 集合正在使用它来将每个项目放入存储桶中。如果hashcode是根据一些可变字段计算出来的，而对象放入HashSet或Dictionary后，字段确实发生了变化，则无法再从HashSet或Dictionary中找到该对象。

请注意，所有对象都返回相同的 HashCode 1，这基本上意味着所有对象都被放入 HashSet 或 Dictionary 的同一个桶中。因此，HashSet 或 Dictionary 中始终只有一个桶。在尝试查找对象时，它将对唯一存储桶内的每个对象进行相等性检查。这就像在链表中进行搜索。

有人可能会争辩说，如果我们可以确保在将对象添加到 HashCode 或 Dictionary 集合之后字段永远不会更改，那么基于可变字段实现哈希码可能会很好。我个人的看法是，这很容易出错。两年后接管您的代码的人可能没有意识到这一点并意外破坏了代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-14T15:39:22.897

请注意，您的 GetHashCode 必须与您的 Equals 方法齐头并进。而且，如果您可以只使用引用相等（当您的类的两个不同实例可以相等时），那么您可以安全地使用从 Object 继承的 Equals 和 GetHashCode。这比简单地`return 1`从 GetHashCode 工作得更好。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-10-29T09:54:53.737

`GetHashCode()`我个人倾向于为没有不可变字段的类中的每个实现返回不同的数值。这意味着如果我有一个包含不同实现类型的字典，就有可能将不同类型的不同实例放入不同的存储桶中。

例如

```
public class A
{
    // TODO Equals override

    public override int GetHashCode()
    {
        return 21313;
    } 
}

public class B
{
    // TODO Equals override

    public override int GetHashCode()
    {
        return 35507;
    } 
} 
```

然后，如果我有,和其他类型的`Dictionary<object, TValue>`包含实例，则查找的性能将比所有实现返回相同数值的情况更好。`A``B``GetHashCode`

还应该注意的是，我使用素数来获得更好的分布。

根据评论，我在[这里](http://share.linqpad.net/fm6o4e.linq)提供了一个 LINQPad 示例，该示例演示了使用`return 1`不同类型和为每种类型返回不同值之间的性能差异。

# jquery - 菜单切换不起作用 jquery

> ID：11481325
> 
> 赞同：0
> 
> 时间：2012-07-14T05:27:28.413
> 
> 标签：jquery

单击`li`或`href`时，应打开菜单。它是一个水平菜单，其中包含一个`ul`和多个`li`'s `div`。可能可以用多个`ul`'s 来做到这一点，但我宁愿不这样做，因为它的代码太重了。

HTML

```
 <ul id="mainmenu" style="width:720px">

    <!-- 1Open -->
          <li id="mainmenudrop"><a href class="drop">helloooo</a>
             <div style="width:200px height:40px; background:#000000;">hmmmmfyhyf
</div>
         </li>
    <!-- 1 Close -->
    <!-- 2nd Open -->
         <li><a href="" class="drop">hello</a>
            <div style="width100px; height:40px; background:#000000;">
              yhythyytyt
              </div>
            </div></li> 
    <!-- 2nd Close --> 
</ul> 
```

jQuery：

```
$(function() {
    var toggleMenu = function(e) {
        var self = $(this),
            elemType = self[0].tagName.toLowerCase(),
            //get caller
            menu = null;
        if (elemType === 'a') {
            //anchor clicked, nav back to containing ul
            menu = self.parents('li').not('li#mainmenudrop');
        } else if (elemType === 'li') {
            //mouseleft ul, ergo menu is this.
            menu = self;
        }
        if (menu) {
            menu.hide('medium');
        }
        e.preventDefault();
        return false;
    };
    $(document).ready(function() {
        $('href.drop').click(function(e) {
            $('li#mainmenudrop li').show('medium');
            console.log('div clicked');
            e.preventDefault();
            return false;
        });
        $('li#mainmenudrop a').click(toggleMenu);
        $('li#mainmenudrop li').mouseleave(toggleMenu);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T07:02:21.223

你使这比它需要的要困难得多。

您的标记和 JS 也有问题

href.drop 应该是 a.drop

还有一个额外的关闭 div。

但除此之外，你不需要所有的 JS 代码

[http://jsfiddle.net/DTqDD/](http://jsfiddle.net/DTqDD/)

注意：您还需要为关闭 JavaScript 的用户提供某种类型的回退。

# asp.net-mvc-3 - 如何将此 asp.net 用户控件转换为在 MVC 3 中工作

> ID：11481330
> 
> 赞同：0
> 
> 时间：2012-07-14T05:28:59.510
> 
> 标签：asp.net-mvc-3, user-controls

我需要移植我的一个 asp.net 用户控件以在 MVC 3 中使用，但看起来 MVC 没有设置为支持用户控件。

我看到声称用户控件是 MVC 的反模式的帖子。我对关于我只需要移植这个用户控件的辩论不感兴趣，而不管你在那个所谓的围栏的哪一边。我也不认为这是一个 html 助手。由于失去可读性、智能感知支持和可维护性，将大量 javascript 放在双引号内作为助手的参数会否定任何好处。

该控件称为*ScriptCompressor*。它的目的是代替页面上的所有内联脚本标签。在渲染过程中，最终构成对动态页面的调用的所有内联 javascript 被组合并放置在页面底部/顶部的一个或两个脚本“包装器”中。该控制的重点是通过缩小和压缩所有内联脚本来减小页面大小并提高加载性能。不涉及视图状态，它只是输出一个脚本标签和 javascript。

如何在 MVC 3 Razor 页面中调用现有控件？

来自 ASP.net 用法的示例：

```
<uc:ScriptCompressor Compress="true">
    var myGlobalVar = "something";

</uc:ScriptCompressor>

<uc:ScriptCompressor Compress="true" UseReadyWrapper="true">
    var _registrationViewModel = new RegisterViewModel();
    ...
</uc:ScriptCompressor>

<uc:ScriptCompressor Compress="true" UseReadyWrapper="true">
    var _addNewUserViewModel = new AddNewUserViewModel();
    ...
</uc:ScriptCompressor> 
```

未压缩输出：

```
<script type="text/javascript">
var myGlobalVar = "something";
$(function () {
    var _registrationViewModel = new RegisterViewModel();
    var _addNewUserViewModel = new AddNewUserViewModel();
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T11:08:37.787

您可以结合使用 2 个自定义 HTML 帮助程序来替换现有的服务器端控件：

```
public static class HtmlExtensions
{
    private const string GlobalsQueueKey = "_globals_queue_";
    private const string ReadyWrapperQueueKey = "_ready_wrapper_queue_";

    [Obsolete("Don't use inline scripts, that's what javascript files are meant for. And yeah, there are pretty nifty javascript compressors out there. Not to mention that in ASP.NET MVC 4 there's the bundling and minification functionality built-in. So use this helper just for fun not in a real application that you intend to put in production.")]
    public static IHtmlString RegisterInlineScript(this HtmlHelper htmlHelper, bool compress, bool useReadyWrapper, Func<object, HelperResult> action)
    {
        var queueKey = useReadyWrapper ? ReadyWrapperQueueKey : GlobalsQueueKey;
        var queue = htmlHelper.ViewContext.HttpContext.Items[queueKey] as Queue<Func<object, HelperResult>>;
        if (queue == null)
        {
            queue = new Queue<Func<object, HelperResult>>();
            htmlHelper.ViewContext.HttpContext.Items[queueKey] = queue;
        }
        queue.Enqueue(action);

        return MvcHtmlString.Empty;                
    }

    [Obsolete("Don't use inline scripts, that's what javascript files are meant for. And yeah, there are pretty nifty javascript compressors out there. Not to mention that in ASP.NET MVC 4 there's the bundling and minification functionality built-in. So use this helper just for fun not in a real application that you intend to put in production.")]
    public static IHtmlString InlineScripts(this HtmlHelper htmlHelper)
    {
        var globalsQueue = htmlHelper.ViewContext.HttpContext.Items[GlobalsQueueKey] as Queue<Func<object, HelperResult>> ?? new Queue<Func<object, HelperResult>>();
        var readyWrapperQueue = htmlHelper.ViewContext.HttpContext.Items[ReadyWrapperQueueKey] as Queue<Func<object, HelperResult>> ?? new Queue<Func<object, HelperResult>>();
        if (!globalsQueue.Any() && !readyWrapperQueue.Any())
        {
            // Nothing to compress, nothing to output
            return MvcHtmlString.Empty;
        }

        var writer = htmlHelper.ViewContext.Writer;

        writer.Write("<script type=\"text/javascript\">");

        using (var globalsWriter = new StringWriter())
        {
            foreach (var item in globalsQueue)
            {
                item(null).WriteTo(globalsWriter);
            }
            var globals = globalsWriter.GetStringBuilder().ToString();
            writer.Write(Compress(globals));
        }

        using (var readyWrapperWriter = new StringWriter())
        {
            foreach (var item in readyWrapperQueue)
            {
                item(null).WriteTo(readyWrapperWriter);
            }

            var readyWrapper = readyWrapperWriter.GetStringBuilder().ToString();

            writer.Write(
                string.Format("$(function() {{{0}}});", Compress(readyWrapper))
            );
        }

        writer.Write("</script>");

        return MvcHtmlString.Empty;
    }

    private static string Compress(string script)
    {
        // TODO: wheel reinvention code from your existing
        // server side control to be put here to compress
        return script;
    }
} 
```

然后您可以在其中注册多个内联脚本的视图：

```
@Html.RegisterInlineScript(true, false, 
    @<text>
        var myGlobalVar = "something";
    </text>
)

@Html.RegisterInlineScript(true, true, 
    @<text>
        var _registrationViewModel = new RegisterViewModel();
    </text>
)

@Html.RegisterInlineScript(true, true, 
    @<text>
        var _addNewUserViewModel = new AddNewUserViewModel();
    </text>
) 
```

在你的`_Layout`输出中的某个地方：

```
@Html.InlineScripts() 
```

好的，现在为您的实际应用程序检查 ASP.NET MVC 4 中的捆绑和缩小支持：[http ://www.beletsky.net/2012/04/new-in-aspnet-mvc4-bundling-and.html](http://www.beletsky.net/2012/04/new-in-aspnet-mvc4-bundling-and.html)

# wso2 - 将 Wso2 HTTP 方法从 POST 更改为 GET

> ID：11481331
> 
> 赞同：3
> 
> 时间：2012-07-14T05:29:00.220
> 
> 标签：wso2, wso2esb

我如何使用 java 类调解器在 wso2 esb 中更改 HTTP 方法，目前我正在使用 mc.setDoingGET(false); mc.setDoingPOX(true); 我想向 ESB 发送一个 post 请求，然后通过 GET 发送到 web 服务，反之亦然，但上面的代码根本不起作用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T07:02:57.800

使用具有属性名称的属性中介：HTTP_METHOD 和 http 方法名称作为值（GET、POST 等）和范围作为“axis2”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-06T05:46:40.773

如果要在 java 类级别更改此属性，可以执行以下操作：

```
msgCtx.setProperty(Constants.Configuration.HTTP_METHOD, "GET"); 
```

# sql-server - sql事务不回滚

> ID：11481345
> 
> 赞同：2
> 
> 时间：2012-07-14T05:32:34.657
> 
> 标签：sql-server, commit, rollback

在transact-sql中，在“开始事务”和“提交事务”之间包含不同动作的目的是什么

我注意到，当函数中间抛出异常时，它不会回滚事务。如果发生错误，如何回滚事务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T06:22:45.623

使用 try 和 catch 进行正确错误处理的最佳方法。然后根据错误（如回滚 tran 等）在 catch 子句中执行操作。

但是，如果您根本不想更改代码。请在执行代码之前指定以下内容。

```
set xact_abort on 
```

这将导致事务自动回滚。但最好的解决方案是正确捕获和处理错误。

# c# - 使用 C# 在 LAN 中查找 Socket 服务器

> ID：11481347
> 
> 赞同：3
> 
> 时间：2012-07-14T05:32:53.720
> 
> 标签：c#, sockets, ip

**我用C#**编写了一个**套接字**程序

 **我测试了所有解决方案，所有解决方案都使用单个 IP 地址将客户端连接到服务器......

我想像局域网游戏一样做到这一点（客户端自动在局域网中查找服务器）

**我怎么能用 C# 做到这一点？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T05:48:52.270

萨拉姆 对于所有套接字连接，您必须有 2 个参数：

*   **目标服务器名称**（可以是**ip 地址**(IPV4/IPV6) 之类的`127.0.0.1` 或**主机名**之类的`http://stackoverflow.com`.
*   **目标服务器端口号**，例如：*25*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T05:39:58.263

`Socket.Connect`方法不仅使用 IP 地址将套接字连接到远程服务器。

该方法有许多不同版本，`Socket.Connect`采用不同的参数。其中一个版本需要一个远程主机名和一个端口来连接套接字。

请参阅[http://msdn.microsoft.com/en-us/library/d7ew360f.aspx](http://msdn.microsoft.com/en-us/library/d7ew360f.aspx)以供参考。

在任何情况下，要连接到远程服务器，您都需要服务器的 IP 地址（例如 10.4.5.66）或主机名（例如 google.com）**

# iphone - Localizable.strings 无法加载所有其他构建？

> ID：11481348
> 
> 赞同：12
> 
> 时间：2012-07-14T05:33:32.570
> 
> 标签：iphone, ios, xcode

我在 Cocoa 中内置的本地化系统遇到了一个奇怪的问题。我使用 genstrings 为我的项目创建了一个 localizable.strings 文件，该文件按预期在我的应用程序中加载和替换字符串。

但是，它似乎只适用于所有其他构建。我将使用 XCode 构建代码，在我的设备上对其进行测试，它会显示正确的字符串，没问题。然而，下一个构建将无法加载字符串文件（至少，这是我的假设。）这不是随机的，而是可以预见的每隔一个构建。我对 Localizable.strings 文件没有做任何花哨的事情。

我什至不知道从哪里开始诊断这个问题，我想知道是否有人有在 Cocoa 上进行本地化的经验。

我在整个代码库中使用 NSLocalizedString，如下所示：

```
NSLocalizedString(@"ReallyNewGame", @"Are you sure you want to start a new game?") 
```

我的 Localizable.strings 文件中的相应条目：

```
/* Are you sure you want to start a new game? */
"ReallyNewGame" = "Do you really want to start a new game?"; 
```

以下是我的 Info.plist 的相关部分：

```
<key>CFBundleDevelopmentRegion</key>
<string>English</string> 
```

以下是应用程序的每个其他构建发生的屏幕截图：

正确的： ![正确时的外观](../Images/c0b0fc51a8819219110702ccf44eadc2.png)

不正确： ![不正确时的外观](../Images/b6a4ac595baa3429c331fa93a3646b8d.png)

我很困惑为什么会发生这种情况。我没有对 Localizable.strings 文件手动执行任何操作，并且我已经在 XCode 上多次清理了我的项目。任何指向正确方向的指针将不胜感激。如果您需要更多信息，我将尝试提供。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T13:54:11.110

我不能给你一个直截了当的答案，但可以建议一些方法来进行。我现在实际上没有多语言应用程序，所以大部分是我通过阅读收集到的（我可能很快就会有一个，所以我对你的问题很感兴趣）：

1) Apple 已弃用 English.lproj 的用户，转而支持 en.lproj。在任何情况下，重要的是如果您使用“English”作为 CFBundleDevelopmentRegion 值，则文件夹命名为“English”而不是“en”。

2）您的字符串文件应该是 UTF16，并在文件检查器（Xcode 中最右侧的窗格）中注明

3）有一个很好的[previous question](https://stackoverflow.com/questions/5349066/how-to-localize-my-app-with-xcode-4)有一些图形指针，以确保您的本地化文件在Xcode中正确输入（所以Xcode知道那时，并且知道它必须处理它们）。

4）您的文件可能已损坏，资源指南说您可以在其上运行“plutil -lint Localizable.strings”以验证正确性

5) 作为旁注，许多人指出[Mac App Store App](http://www.delitestudio.com/our-apps/localizable-strings-merge/)是一个很好的实用程序来合并（而不是覆盖）字符串文件（当你添加时）。

6) 如果一切看起来还不错，则在应用首次启动时将以下内容添加到您的 AppDelegate “didFinishLaunchingWithOptions”（在顶部）：

```
NSBundle *bundle = [NSBundle bundleForClass:[self class]];
NSLog(@"Strings file: %@", [bundel pathForResource:@"Localizable" ofType:@".strings"]);
NSLog(@"Localizations: %@" [bundle localizations]);
NSLog(@"Local Dict: %@", [bundle localizedInfoDictionary]];
NSLog(@"localizedStringForKey: %@", [bundle localizedStringForKey:@"ReallyNewGame"value:@"WTF???" table:nil];
NSLog(@"Localized String: %@", NSLocalizedString(@"ReallyNewGame", @"Are you sure you want to start a new game?"));
exit(0); // just testing the above for now 
```

多次运行该应用程序。输出应该是一样的。如果它没有对此答案添加评论，我们可以进一步深入研究。如果它是相同的，那么在您的应用程序中进一步导致损坏。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-01T03:41:42.500

如果它对其他人有帮助：

我遇到了完全相同的问题：本地化的所有其他构建都不起作用。当我检查包内容时，我发现 en.lproj 中的 Localizable.strings 已损坏 - 该文件本应为 4k，但只有 76 个字节长。下一个版本的腐败消失了，然后又回来了，然后消失了……

原来，当我从另一个项目复制一个文件夹时，我已经将一个额外的 Localizable.strings 文件夹复制到了我的项目中。当我删除额外的 Localizable.strings 文件夹时，一切都神奇地起作用了。哇！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-13T22:12:05.480

**在以下情况下会出现此问题：**

*   你至少有两个文件 `*/<locale>.lproj/<table_name>.strings`，例如两个文件`*/en.lproj/Localizable.strings`
*   `*.strings`您的文件支持不止一种语言

您可能不会创建两个以上`.strings`同名的文件。当您使用其资源中包含文件的外部*库时，通常会发生此问题。**您的*`Localizable.strings`资源中可能有`Localizable.strings`文件- 这是 XCode 无法解决的冲突。

 ****TL; 博士；***一般提示：**如果您创建一个库**以供其他开发人员用作第三方代码，**而不是创建`Localizable.strings`文件并`NSLocalizedString()`在其中使用，创建自定义命名的可本地化字符串表（例如`MyLibName.strings`）并使用`NSLocalizedStringFromTable`.**

**问题示例及详细描述：**

我创建了一个“问题演示”存储库：[https ://github.com/kajot/LocalizedStringsMergingFailure](https://github.com/kajot/LocalizedStringsMergingFailure)

特别是每隔一次运行失败的测试：[https ://github.com/kajot/LocalizedStringsMergingFailure/blob/master/LocalizedStringsMergingFailureTests/LocalizedStringsMergingFailureTests.m](https://github.com/kajot/LocalizedStringsMergingFailure/blob/master/LocalizedStringsMergingFailureTests/LocalizedStringsMergingFailureTests.m)

```
│  ├── KJAppDelegate.h
│   ├── KJAppDelegate.m
│   ├── Localizations1
│   │   ├── de.lproj
│   │   │   └── Localizable.strings
│   │   └── en.lproj
│   │       └── Localizable.strings
│   ├── Localizations2
│   │   ├── de.lproj
│   │   │   └── Localizable.strings
│   │   └── en.lproj
│   │       └── Localizable.strings 
```

每次**OTHER**构建，XCode 都会`Localizable.strings`在包中创建一个损坏的文件。解决方案：不要为同一个目标创建/添加多个`LocalizedString`同名表。

`LocalizedString`table 是一组`*/<locale>.lproj/<tableName>.strings`文件。在上面的示例中，有两个表，每个都命名`Localizable`（表的默认名称）。

如果调用了一个表`Localizable`，您可以通过使用从表中获取本地化字符串

```
`NSLocalizedString(key, optionalComment)`. 
```

**解决方案：**

您可以合并这两个表（将对应的文件与相同语言的翻译连接起来）或更改其中一个表的名称。

第二种方法的示例（更改其中一个表的名称）：

```
│  ├── KJAppDelegate.h
│   ├── KJAppDelegate.m
│   ├── Localizations1
│   │   ├── de.lproj
│   │   │   └── Localizable.strings
│   │   └── en.lproj
│   │       └── Localizable.strings
│   ├── Localizations2
│   │   ├── de.lproj
│   │   │   └── NewTableName.strings
│   │   └── en.lproj
│   │       └── NewTableName.strings 
```

现在，您可以通过使用从新表 ( `NewTableName`) 中获取翻译，使用.`NSLocalizedStringFromTable(key, @"NewTableName", optionalComment)` 从“原始”表 ( `Localizable`) 中获取翻译`NSLocalizedString(key, optionalComment)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T06:03:24.807

其他线程可能会有所帮助...[一个iOS应用程序中的多个Localizable.strings文件](https://stackoverflow.com/questions/4811745/multiple-localizable-strings-files-in-one-ios-app)

再次，也许你可以清理然后从 xcode 构建应用程序......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T15:47:47.173

关于我的应用程序图标，我遇到了类似的问题。我的应用程序中有几个目标，并且都有不同的应用程序图标。由于某种原因，其中一个应用程序图标已损坏，因此我的所有目标都通过其他目标的应用程序图标切换。这很奇怪，因为一个目标不应该知道其他目标 app-icon，如果它不用于两个目标并在 xcode 中标记为两个目标。

我通过删除损坏的 png 并将其重新添加到项目中解决了这个问题。如果您使用 i18n 文件执行此操作，它也可能会有所帮助。但可以肯定的是，不仅要从 xcode 中删除引用，还要删除整个文件。最好是在一些外部编辑器（如 textwrangler）中打开文件，然后将文本复制到新文件中，然后改用它。

祝你好运。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T16:06:25.760

**你所经历**的行为****是完全正常的。**为什么？**

 *** * *

如果您检查这些行，原始宏定义的*相关部分*`NSLocalizedString`：

```
#define NSLocalizedString(key, comment) \
        [[NSBundle mainBundle] localizedStringForKey:(key) value:@"" table:nil] 
```

您可以看到该`comment`参数是欺骗性参数，**它从未使用过**。（仅供阅读代码的开发人员使用）

* * *

此外，如果您查看`NSBundle`类 Reference，您可以阅读以下有关方法返回值的有趣内容`-localizedStringForKey:value:table:`：

***返回值***

# **如果 value 是** `nil` **或空字符串，并且在表中未找到本地化字符串，则返回*key***。

这就是您取回*密钥*的原因，因为您的文件中可能没有此*密钥的价值。*`Localizable.string`

不幸的消息，但这是正常的。

* * *

**解决方案如下：**

```
NSLocalizedString(@"Are you sure you want to start a new game?", @""); 
```

并在您的`Localizable.string`文件中：

```
@"Are you sure you want to start a new game?" = "Do you really want to start a new game?"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-16T21:28:11.493

我刚刚发现了一些让我死去的东西！我有同样的问题：取决于 STRINGS 文件，有时它可以工作，有时不能/

我发现，如果 .strings 文件中的某些行以*双分号结尾*

```
;; 
```

下面的所有行都被忽略了！

例如： [![这很好用：如您所见， NSLocalizationString 命令正确替换了模板中的字符串](../Images/d6d8df07cd8d32e524c9e904fec155c8.png)](https://i.stack.imgur.com/jRQuK.png)

[![现在，注意双分号](../Images/c66684cdb391426e13ba22c16c23de3f.png)](https://i.stack.imgur.com/HFafZ.png)

上图效果很好：如您所见， NSLocalizationString 命令正确替换了模板中的字符串 但另一张图显示，在双分号之前，它将忽略所有内容。这是一团糟！没有资源编译错误，什么都没有。简直是噩梦！

希望它可以帮助人们不要失眠！***

# shell - 从 awk 退出主 shell 脚本

> ID：11481350
> 
> 赞同：2
> 
> 时间：2012-07-14T05:33:47.580
> 
> 标签：shell, awk

我有一个调用 jar 文件的 bash 脚本，如下所示：

```
awk -f fileformat.awk list.txt | while read arg1 arg2 arg3 arg4 arg5; do    
    java -jar /bin/2dbf.jar arg1 arg2 arg3 arg4 arg5

    if [[ ${?} -eq 0 ]]; then
        echo "2dbf.jar finished at: `date "+%F %T"`"
        echo "---------------------------------------------"
    else
        echo "exiting..."
        exit 10
    fi
done 
```

看起来像这样：如果该`fileformat.awk`行以开头`#`或没有 5 个字段退出程序。

```
{ 
    if (NF == 5 && $1 !~ /#.*/) {
        print $0 
    } else { 
        print "incorrect file format"
        "exit 1"
    }
} 
```

我想要的是`exit 1`在`awk`脚本中终止整个 shell 脚本。但实际上它没有，并且 jar 文件由于错误的选项而引发异常。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T05:52:00.673

因为您在 AWK 程序中`exit`使用引号，所以它正在生成一个子shell 并从中退出*。*并且因为您将错误消息打印到`stdout`，这会提供`while`循环。将您的 AWK 脚本更改为此，它应该可以工作：

```
{ 
    if (NF == 5 && $1 !~ /#.*/) {
        print $0 
    } else { 
        print "incorrect file format" > "/dev/stderr"
        exit 1
    }
} 
```

# android - Android SMS Intent 不发送完整消息，其他选项？

> ID：11481354
> 
> 赞同：0
> 
> 时间：2012-07-14T05:34:49.443
> 
> 标签：android, string, sms

我正在使用 Intent 从我的应用程序发送短信。SMS 从文本视图中提取具有“\n”和“\t”格式的字符串，以发送给用户选择的联系人。

**我的问题**是，当从一个设备发送到另一个设备时，SMS 只发送消息的前 15 个字符！当消息出现在第一个设备上时，它包含字符串中的所有字符。然后只有前 15 个字符被第二个设备接收。

```
 // SMS Activity
     public void sendSMS(View v) { 
         mess = ""+Summary.getText().toString();
         Uri uri = Uri.parse("smsto:"); 
         Intent txt = new Intent(Intent.ACTION_SENDTO, uri); 
         txt.putExtra("sms_body", mess); 
         startActivity(txt); 
   } 
```

这就是我为消息生成字符串的方式。文本视图也用于在应用程序中显示字符串。

```
 for(...){
   if{...}
   else{ 
       String beer = name[counter];
       int amount = amt[counter];
       inText += "x"+ amount+ "\t" + beer + "\n";
           }
           }
       Summary.setText(""+inText);
       mess = ""+Summary.getText().toString(); 
```

是否有其他方法可以通过短信发送此字符串？我知道我可以使用 SmsManager 做到这一点，但我希望能够使用电话消息系统（更容易，因为他们可以选择联系人）。我可以遵循任何示例吗？

我可以使用游标来获取字符串的信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T10:04:58.660

尝试添加`txt.setType("text/plain");`

这可能会解决您的问题。

# c# - 带有 ReliableSqlConnection 的 MiniProfiler

> ID：11481356
> 
> 赞同：4
> 
> 时间：2012-07-14T05:35:07.720
> 
> 标签：c#, asp.net-mvc-3, mvc-mini-profiler

嗨，我尝试按照 MiniProfiler 网站上的数据库分析说明来完成这项工作，但是我无法让它工作。

我想分析一个 ReliableSqlConnection 以在 Azure 中使用。

有谁知道如何做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-30T11:19:54.927

`ProfiledDbConnection`在这种情况下不能使用分析 SqlConnection 的常规方法（使用它来实例化 a ），因为`ReliableSqlConnection`实现`IDbConnection`但不扩展`DbConnection`。

但是，您应该仍然可以使用[`SimpleProfiledConnection`](https://github.com/MiniProfiler/dotnet/blob/d58d4ad41d4052ed02b13f644a72f24a87f9cf3b/StackExchange.Profiling/Data/SimpleProfiledConnection.cs)。您可以按如下方式实例化它：

```
using StackExchange.Profiling.Data;

ReliableSqlConnection conn = GetAzureConnection();
var profiledConn = new SimpleProfiledConnection(conn, MiniProfiler.Current); 
```

然后，您将能够使用所有 Db 命令来`ProfiledConn`代替您的`ReliableSqlConnection`，并分析所有 Db 命令。

[`SimpleProfiledCommand`](https://github.com/MiniProfiler/dotnet/blob/d58d4ad41d4052ed02b13f644a72f24a87f9cf3b/StackExchange.Profiling/Data/SimpleProfiledCommand.cs)您还可以通过使用非常相似的构造函数创建一个逐个命令来执行此操作。

# ruby - 安装 RVM 和 Ruby 1.9.3 后，每个 Bash 路径更改都会打印 RVM 初始化脚本

> ID：11481361
> 
> 赞同：1
> 
> 时间：2012-07-14T05:35:56.040
> 
> 标签：ruby, bash, osx-lion, rvm

我安装了最新的 RVM - Ruby 版本管理器 - 并在 OSX Lion 上使用 XCode 4.3.3 安装了 Ruby 1.8.7 和 1.9.3，`rvm install 1.9.3 --reconfigure --debug -C --enable-pthread --with-gcc=clang`因为由于 GCC 错误，常规方式不起作用。我确实遇到了一个错误`clang: error: unsupported option '--with-libyaml`，但是 Ruby 1.9.3 可以运行，并且我可以运行至少需要 1.9.2 的 WPScan。但是现在每次我运行一个命令来更改文件夹，比如`cd`我打印一个与 RVM 相关的长 Bash 脚本 - 请参阅[http://pastebin.com/UAm38Vcm](http://pastebin.com/UAm38Vcm)和： ![cd 命令后的 Bash 显示](../Images/18963557016779763f400686c463cd50.png)。

我怎样才能阻止它这样做？

**更新一**

在 Github 的 RVM 以及[https://github.com/wayneeseguin/rvm/issues/1039](https://github.com/wayneeseguin/rvm/issues/1039)添加了评论，但由于该问题不是 100% 相关的，并且我需要尽快解决这个问题，所以我在这里打开了一个线程更多数据。

**更新二**

我意识到 RVM 初始化脚本是正在打印的脚本：[https](https://github.com/wayneeseguin/rvm/blob/master/scripts/initialize) ://github.com/wayneeseguin/rvm/blob/master/scripts/initialize 。虽然不知道为什么..

**更新四**

我的`.bashrc`

```
# define aliases
alias sudo='sudo '
#alias ruby='ruby1.9'
alias apacherestart='sudo apachectl -k restart'

# define hist properties
HISTFILESIZE=1000000000
HISTSIZE=1000000

# define path to programs
PATH=/opt/local/bin:opt/local/sbin:/opt/subversion/bin:/opt/local/apache2/bin/:/opt/local/lib/python2.4/site-packages/django/bin:$PATH

# define manpath
MANPATH=/opt/local/share/man:$MANPATH

# export env vars
export HISTFILESIZE HISTSIZE PATH MANPATH
PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting 
```

我的`.bash_profile`

```
source ~/.bashrc
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" # Load RVM into a shell session *as a function* 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T06:43:22.020

你的`cd`命令不知何故变成了别名，或者创建了一个名为“cd”的函数。

您可以使用以下任一方法撤消这些操作：

```
unalias cd 
```

或者

```
unset -f cd 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T06:22:03.563

您应该能够暂时恢复

```
unalias cd 
```

看来您需要弄清楚您`.bashrc`的更改并恢复所有这些更改。如果安装脚本写得很好，它应该已经进行了备份，或者以某种方式记录了更改的内容。

# android - 来自 Go 的 Android API

> ID：11481362
> 
> 赞同：9
> 
> 时间：2012-07-14T05:36:01.687
> 
> 标签：android, go

我知道 Go 程序可以为 Android 编译。

如何在 Go 程序中使用 Android 特定 API，例如获取 GPS 坐标或使用默认浏览器打开 URL？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-14T09:36:06.333

恐怕目前几乎不可能。在“Meet the Go Team”I/O 会议上，Go 团队的人表示他们没有计划为 Go 添加 Android 支持。

我们现在拥有的只是 ARM 架构的编译器。不幸的是，这对于真正的 Android 应用程序几乎没有用，尽管可以从 Android 设备上的命令行启动此类程序。

大多数 Android 框架都是用 Java 编写的，因此要与它交互，您的代码应编译为 *.so 库，该库将通过 JNI 接口加载和调用。当前的 Go 编译器（gc，不确定 gccgo）是不可能的。

也许您可以使用 绑定到 Android NDK API `cgo`，这将允许您从 API 级别 9（Android 2.3）开始在 Go 中创建应用程序

**UPD**：您现在可以使用 Go 中的 JNI 并使用 golang.org/x/mobile 包自动创建 java 绑定。在 Go 1.4 中，它仍处于试验阶段，但计划将其包含在 Go 1.5 版本中。该软件包还提供了 GL、音频和用户输入的绑定（希望他们也会添加 iOS 支持，并且有一天会兼容 Android 和 iOS）。无论如何，这个包主要面向用 Go 编写游戏，而不是在 Android 上使用 Go 作为 Java 的替代品。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-04T14:20:15.090

看看我[从 Go 编程语言对 Android App 的](https://stackoverflow.com/questions/10095698/android-app-from-go-programming-language/18616207#18616207)回答。goandroid项目允许您通过 NDK 在 Go 中创建 Android 应用程序[。](https://github.com/eliasnaur/goandroid)

（免责声明：我是goandroid的作者）

**编辑**：正如评论中提到的，Go 1.5 增加了对纯 Go 或 Java 和 Go 混合的 Android 应用程序的官方支持。iOS 也有望在最终的 1.5 版本中及时发布。有关详细信息，请参阅[https://github.com/golang/mobile 。](https://github.com/golang/mobile)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-13T04:00:45.183

[GO 1.4 文档](https://golang.org/doc/go1.4#android)说，“Go 1.4 可以为运行 Android 操作系统的 ARM 处理器构建二进制文件。它还可以构建一个 .so 库，该库可以由 Android 应用程序使用移动子存储库中的支持包加载”

“golang.org/x/mobile/app”库中有[包应用程序](https://godoc.org/golang.org/x/mobile/app)选项，可让您编写适用于 Android（以及最终的 iOS）的应用程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-16T04:51:03.657

第 1 步：使用 Golang 创建一个独立于平台的 GUI 库，该库使用 OpenGL 进行绘图，并创建一个智能事件和数据绑定系统来编写应用程序。任何使用 OpenGL 的软件都将或多或少具有可移植性。本质上，用 Golang 重写 Kivy。

第 2 步：创建基于自省/反射的包装器，以使用类似于 PyJNIus（也是 Kivy 项目）的 Java 类。

第 3 步：更加努力，因为要达到 Kivy 的水平还有很多工作要做

第 4 步：利润

# ios - 如何将文本显示为流，例如示例应用程序“Text Transmuter”

> ID：11481366
> 
> 赞同：0
> 
> 时间：2012-07-14T05:37:13.437
> 
> 标签：ios

我看到应用程序“播放”了一个非常有趣的动画......这种类型的解决方案是什么？感谢您的帮助。

# twitter-bootstrap - Twitter Bootstrap，保持菜单与容器宽度对齐

> ID：11481367
> 
> 赞同：8
> 
> 时间：2012-07-14T05:37:37.047
> 
> 标签：twitter-bootstrap

我的问题是如何让导航内容与页面内容宽度对齐而不是 100%。我仍然希望黑色导航背景为 100%。您可以使用 navbar-fixed-top 来实现这一点，但我不希望我的 nav 固定。通常容器会为您执行此操作，但在这种情况下，它不会自动保留内容。

我有一个这样的导航菜单。

```
<div class="navbar">
  <div class="navbar-inner">
    <div class="container">

      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>

            <a class="brand visible-phone visible-tablet" href="#">Brand</a>

            <div class="nav-collapse">
                <ul class="nav">
                  <li class="active"><a href="#">Item 1</a></li>
                  <li><a href="#">Item 2</a></li>
                  <li><a href="#">Item 3</a></li>
                </ul>

            </div>

    </div>
  </div>
</div><!-- END .navbar --> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-15T04:03:54.703

我想通了，所以如果有人需要知道这里就是解决方案。我将整个导航包裹在#navbar-top id 中。建议这样做，这样您就不会全局覆盖 Bootstrap。

```
@media (min-width: 1200px) {
    #navbar-top .container {
        width:1170px;
    }   
}
@media (min-width: 979px) and (max-width: 1200px) {
    #navbar-top .container {
        width:960px;
    }   
}
@media (min-width: 768px) and (max-width: 979px) {
    #navbar-top .container {
        width:744px;
    }   
} 
```

即使导航栏不固定，这也会强制 .container 在每个分辨率下都有一个宽度。

# java - 将二维数组字符串转换为二维数组双精度

> ID：11481370
> 
> 赞同：1
> 
> 时间：2012-07-14T05:39:02.560
> 
> 标签：java, arrays, typeconverter, valueconverter

我有一个包含数值和字符串的数组。我想将该数组转换为双精度。我试过这个：

```
int tableStringLength=tableString.length;
double [][]tableDouble= null;

for(int i=0; i<tableStringLength; i++) {
    for(int j=0; j<tableStringLength; j++) {
        tableDouble[i][j]= Double.parseDouble(tableString[i][j]);
    }
} 
```

但是当我尝试在屏幕上显示时，它什么也不返回，不返回 null 或零。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T05:42:34.947

您没有实例化双数组：

```
double[][] tableDouble = new double[tableStringLength][tableStringLength]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T05:52:01.623

感谢所有回答的朋友，但在我问我的朋友之后，她建议使用

```
tableDouble[i][j]= Double.valueOf(tableString[i][j]).doubleValue(); 
```

它有效:)

# jquery - 如果 URL 中存在 GET 变量，如何使用 jQuery 制作 div 显示？

> ID：11481372
> 
> 赞同：0
> 
> 时间：2012-07-14T05:39:20.030
> 
> 标签：jquery, forms, get

我在 index.php 页面上有两个单独的表单：

```
<form action="search_results.php" method="get" id="search_housing_area">
  <input type="text" name="rent_housing" />
  <inout type="submit" name="search_housing" value="" />
</form>

<form action="search_results.php" method="get" id="search_rooms_area">
  <input type="text" name="rent_rooms" />
  <inout type="submit" name="search_rooms" value="" />
</form> 
```

当我提交其中任何一个表单时，网址显示为：

> [http://www.domain.com/search_results.php?rent_housing=1234&search_housing=](http://www.domain.com/search_results.php?rent_housing=1234&search_housing=)

或者

> [http://www.domain.com/search_results.php?rent_rooms=1234&search_rooms=](http://www.domain.com/search_results.php?rent_rooms=1234&search_rooms=)

在 search_results.php 页面上，我有两个 div，#housing_results 和 #rooms_results。默认情况下，它们都是隐藏的。如果 GET 变量“search_housing”存在，我想显示 div#housing_results，如果 GET 变量“search_rooms”存在，我想显示 div#rooms_results。

如果 url 中存在特定的 GET 变量，如何使用 jQuery 制作特定的 div 显示？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T05:48:03.830

```
<?php
 $disp_div=0;
if(isset($_GET['search_housing']))
{
   $disp_div=1;
}
else if(isset($_GET['search_rooms']))
{
  $disp_div=2;
}
?> 
```

**jQuery代码**

```
$(document).ready(function(){

var show=<?php echo $disp_div; ?>;

 if(show==1)
 {
   $('#div_search_housing').show();
 }
else if(show==2)
 {
   $('#div_search_rooms').show();
 }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T05:52:22.660

您可以使用`window.location`和搜索`query string`.

```
var winLoc = window.location.search;
//will output ?rent_rooms=1234&search_rooms= 
```

现在我们将删除 ?，拆分`&`符号上的字符串，并使其成为一个数组

```
winLoc = winLoc.replace('?', '').split('&');

var  ourStr = winLoc[1].replace('=', '');

switch(ourStr){
  case 'search_rooms':
    $('.switch').css('backgroundColor', 'red');
    break;
  case 'search_housing':
    $('.switch').css('backgroundColor', 'blue');
    break;       
} 
```

**[这是一个带有预定义字符串的工作 jsFiddle，例如](http://jsfiddle.net/sVJSA/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T05:47:48.103

这是一个纯 JS 解决方案。如其他答案中所述，还有一些方法可以使用 PHP 来做到这一点。

```
function stuff()
{
    var queryPairs = window.location.href.split('?').pop().split('&');
    for (var i = 0; i < queryPairs.length; i++)
    {
        var pair = queryPairs[i].split('=');
        if (pair[0] == 'search_housing')
        {
            $('#rooms_results').hide();
            $('#housing_results').show();
            return;
        }
        if (pair[0] == 'search_rooms')
        {
            $('#housing_results').hide();
            $('#rooms_results').show();
            return;
        }
     }
     // None of the two options exist in the query
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T05:52:23.030

您可以使用纯 JS：

```
function getParameterByName(name)
{
    name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
    var regexS = "[\\?&]" + name + "=([^&#]*)";
    var regex = new RegExp(regexS);
    var results = regex.exec(window.location.search);
    if(results == null)
    return "";
    else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
} 
```

从[这里](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)

所以在你的情况下应该是这样的：

```
if (getParameterByName('search_housing').length > 0) { ... } 
if (getParameterByName('search_rooms').length > 0)  { ... } 
```

# java - 如何使用 Rhino 库在 Java 中使用 javascript 代码？

> ID：11481375
> 
> 赞同：3
> 
> 时间：2012-07-14T05:40:01.570
> 
> 标签：java, javascript, gps, latitude-longitude, rhino

我正在开发一个 GPS 应用程序，我想根据 WGS84 基准将我的纬度和经度转换为 xy 坐标。我发现这个 js 页面可以做到这一点：[http](http://www.uwgb.edu/dutchs/usefuldata/ConvertUTMNoOZ.HTM) ://www.uwgb.edu/dutchs/usefuldata/ConvertUTMNoOZ.HTM 。我还看了其他计算器，但这个更准确。现在，如果您看到源代码，就会提供执行转换的功能。我用谷歌搜索了如何在 Java 中使用 js 代码，发现这个库可以用来做到这一点：[http](http://www.mozilla.org/rhino/) ://www.mozilla.org/rhino/ 。我将 jar 添加到我的 eclipse 项目中并从这里 (http://www.mozilla.org/rhino/examples.html) 运行示例，但无法弄清楚如何使用该页面源代码中的函数。

```
function GeogToUTM(){
    //Convert Latitude and Longitude to UTM
    Declarations();
    k0 = 0.9996;//scale on central meridian
    b = a*(1-f);//polar axis.
    //alert(a+"   "+b);
    //alert(1-(b/a)*(b/a));
    e = Math.sqrt(1 - (b/a)*(b/a));//eccentricity
    //alert(e);
    //Input Geographic Coordinates
    //Decimal Degree Option
    latd0 = parseFloat(document.getElementById("DDLatBox0").value);
    lngd0 = parseFloat(document.getElementById("DDLonBox0").value);
    latd1 = Math.abs(parseFloat(document.getElementById("DLatBox0").value));
    latd1 = latd1 + parseFloat(document.getElementById("MLatBox0").value)/60;
    latd1 = latd1 + parseFloat(document.getElementById("SLatBox0").value)/3600;
    if (parseFloat(document.getElementById("DLatBox0").value)<0){latd1=-latd1;}
    lngd1 = Math.abs(parseFloat(document.getElementById("DLonBox0").value));
    lngd1 = lngd1 + parseFloat(document.getElementById("MLonBox0").value)/60;
    lngd1 = lngd1 + parseFloat(document.getElementById("SLonBox0").value)/3600;
    if (parseFloat(document.getElementById("DLonBox0").value)<0){lngd1=-lngd1;}

    lngd=lngd0;
    latd=latd0;
    if(isNaN(latd)){
    latd = latd1;
    document.getElementById("DDLatBox0").value = Math.floor(1000000*latd)/1000000;
    lngd=lngd1;
    document.getElementById("DDLonBox0").value = Math.floor(1000000*lngd)/1000000;
    }

    if(isNaN(lngd)){lngd = latd1;}
        if(isNaN(latd)|| isNaN(lngd)){
        alert("Non-Numeric Input Value");
        }
    if(latd <-90 || latd> 90){
        alert("Latitude must be between -90 and 90");
        }
    if(lngd <-180 || lngd > 180){
        alert("Latitude must be between -180 and 180");
        }

    xd = lngd;
    yd = latd;
    DDtoDMS();
    //Read Input from DMS Boxes
    document.getElementById("DLatBox0").value = Math.floor(ydd);
    document.getElementById("MLatBox0").value = ym;
    document.getElementById("SLatBox0").value = Math.floor(1000*ys)/1000;
    document.getElementById("DLonBox0").value = Math.floor(xdd);
    document.getElementById("MLonBox0").value = xm;
    document.getElementById("SLonBox0").value = Math.floor(1000*xs)/1000;

    phi = latd*drad;//Convert latitude to radians
    lng = lngd*drad;//Convert longitude to radians
    utmz = 1 + Math.floor((lngd+180)/6);//calculate utm zone
    latz = 0;//Latitude zone: A-B S of -80, C-W -80 to +72, X 72-84, Y,Z N of 84
    if (latd > -80 && latd < 72){latz = Math.floor((latd + 80)/8)+2;}
    if (latd > 72 && latd < 84){latz = 21;}
    if (latd > 84){latz = 23;}

    zcm = 3 + 6*(utmz-1) - 180;//Central meridian of zone
    //alert(utmz + "   " + zcm);
    //Calculate Intermediate Terms
    e0 = e/Math.sqrt(1 - e*e);//Called e prime in reference
    esq = (1 - (b/a)*(b/a));//e squared for use in expansions
    e0sq = e*e/(1-e*e);// e0 squared - always even powers
    //alert(esq+"   "+e0sq)
    N = a/Math.sqrt(1-Math.pow(e*Math.sin(phi),2));
    //alert(1-Math.pow(e*Math.sin(phi),2));
    //alert("N=  "+N);
    T = Math.pow(Math.tan(phi),2);
    //alert("T=  "+T);
    C = e0sq*Math.pow(Math.cos(phi),2);
    //alert("C=  "+C);
    A = (lngd-zcm)*drad*Math.cos(phi);
    //alert("A=  "+A);
    //Calculate M
    M = phi*(1 - esq*(1/4 + esq*(3/64 + 5*esq/256)));
    M = M - Math.sin(2*phi)*(esq*(3/8 + esq*(3/32 + 45*esq/1024)));
    M = M + Math.sin(4*phi)*(esq*esq*(15/256 + esq*45/1024));
    M = M - Math.sin(6*phi)*(esq*esq*esq*(35/3072));
    M = M*a;//Arc length along standard meridian
    //alert(a*(1 - esq*(1/4 + esq*(3/64 + 5*esq/256))));
    //alert(a*(esq*(3/8 + esq*(3/32 + 45*esq/1024))));
    //alert(a*(esq*esq*(15/256 + esq*45/1024)));
    //alert(a*esq*esq*esq*(35/3072));
    //alert(M);
    M0 = 0;//M0 is M for some origin latitude other than zero. Not needed for standard UTM
    //alert("M    ="+M);
    //Calculate UTM Values
    x = k0*N*A*(1 + A*A*((1-T+C)/6 + A*A*(5 - 18*T + T*T + 72*C -58*e0sq)/120));//Easting relative to CM
    x=x+500000;//Easting standard 
    y = k0*(M - M0 + N*Math.tan(phi)*(A*A*(1/2 + A*A*((5 - T + 9*C + 4*C*C)/24 + A*A*(61 - 58*T + T*T + 600*C - 330*e0sq)/720))));//Northing from equator
    yg = y + 10000000;//yg = y global, from S. Pole
    if (y < 0){y = 10000000+y;}
    //Output into UTM Boxes
    document.getElementById("UTMzBox1").value = utmz;
    document.getElementById("UTMeBox1").value = Math.round(10*(x))/10;
    document.getElementById("UTMnBox1").value = Math.round(10*y)/10;
    if (phi<0){document.getElementById("SHemBox").checked=true;}
    //document.getElementById("UTMzBox1").value = utmz;
    //document.getElementById("UTMeBox1").value = Math.round(10*(500000+x))/10;
    document.getElementById("UTMLonZoneBox2").value = utmz;
    document.getElementById("UTMLatZoneBox2").value = DigraphLetrsE[latz];
    document.getElementById("UTMeBox2").value = Math.round(10*(x-100000*Math.floor(x/100000)))/10;
    document.getElementById("UTMnBox2").value = Math.round(10*(y-100000*Math.floor(y/100000)))/10;
//Generate Digraph
    MakeDigraph();
    document.getElementById("UTMDgBox2").value = Digraph;

}//close Geog to UTM
/////////////////////////////////////////////////////////////////////// 
```

我知道我不能按原样使用此功能，因为它嵌入在 HTML 中。但是我从来没有在 js 上工作过，所以如果我需要对代码做最少的更改，这对我来说会更容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T05:42:55.970

如果你只是想运行 JavaScript，而不特别关心使用 Rhino 还是更通用的 Java Scripting API，请参阅我写的以下博客文章：

[http://springinpractice.com/2012/05/13/how-to-run-javascript-from-java/](http://springinpractice.com/2012/05/13/how-to-run-javascript-from-java/)

如果事实上您出于某种原因想要实际的 Rhino 代码，这里有一些使用 Rhino 的示例代码：

[https://github.com/springinpractice/sip09/blob/03/src/main/java/com/springinpractice/ch09/comment/service/impl/RichTextFilter.java](https://github.com/springinpractice/sip09/blob/03/src/main/java/com/springinpractice/ch09/comment/service/impl/RichTextFilter.java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T09:27:07.100

您将不得不先询问是否可以使用它 - 但他说他通常很乐意允许人们使用他的作品。

所有对 document.getElementById 的调用都引用了 html 页面上的输入。您必须重写该函数，以便将这些变量传递给它 - 因为在运行它时您将无法访问 javascript dom。

您还必须弄清楚您希望它返回什么，它看起来像是在几个字段中显示计算值，因此您可能必须将字段名的映射返回到计算值 - 然后您将使用你的java程序中的结果。

您发布的脚本还引用了这些缺少的函数，因此您也必须找到它们，并将它们包含在您的脚本中：
MakeDigraph(); DDtoDMS(); 声明（）；

我建议您使用警报删除代码的验证位，然后处理这是您的 java 代码

它不会非常有效，但如果这无关紧要，那么祝你好运！

# paypal - 是否可以通过其他人的网关自动付款？

> ID：11481376
> 
> 赞同：0
> 
> 时间：2012-07-14T05:40:10.263
> 
> 标签：paypal, payment-gateway, credit-card, payment-processing

假设某个在线零售商使用 XYZ 银行的支付网关。是否可以使用脚本完成填写卡片详细信息并完成整个过程的工作？如果是，是否合法？

更新：为了让问题更清楚，我将给出一个场景。

假设我们谈论的零售商是亚马逊，我想使用卡/网上银行（不是 PayPal）。我希望能够使用一个脚本在亚马逊上下订单，该脚本可以完成我的购物车和付款的工作。说购物车的事情已经处理好了。我现在如何自动化付款流程？如果允许，那就是。卡详细信息等不是某些用户的，而是我自己的，所以我想这没有安全问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T05:50:14.453

支付 API 通常会支持这样的东西。例如，如果我们查看 Paypal 的[直接支付 api](https://www.paypal.com/cgi-bin/webscr?cmd=_dcc_hub-outside)，它们为您提供安全的方式将信用卡号码等传递给 Paypal 以处理付款。

如果您正在考虑这样做来处理经常性付款，那么您的做法是错误的。除非您符合 PCI-DSS，否则您不应存储任何信用卡详细信息。这需要大量的工作和审计，所以中小型公司做这件事有些少见。对于定期付款，将信用卡号存储在您的支付网关中（大多数应该提供这样做的方法），并且网关应该返回一个令牌来存储。每次您想为卡充电时，只需将令牌传递给您的网关即可。

* * *

**鉴于新信息：**

您要做的是使浏览器自动化（这是最好的方法）。您可以编写一个脚本连接到亚马逊、加载页面、填写 POST 变量、将其发回、获取结果等等，但它不是很健壮。例如，如果亚马逊更改了一些帖子变量的名称，甚至更改了标记，那么您的脚本就会失败。

最好的方法是使用浏览器自动化框架。[Selenium](http://seleniumhq.org/)可能是最受欢迎和最知名的。它通常用于自动化测试用户界面，但也可用于执行您建议的操作。您可以使用[Selenium IDE](http://seleniumhq.org/projects/ide/)（它是一个 Firefox 插件）来快速重现和重播记录的操作。对于更高级和高度可编写脚本的东西，请尝试[Selenium WebDriver](http://seleniumhq.org/projects/webdriver/)。

至于这是否合法，我不明白为什么如果你使用自己的信用卡不合法，什么不合法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T16:17:53.883

如果您使用自己的信用卡详细信息，则风险自负，因此法律问题极少。但是，为了让您高枕无忧，存储和传输 (SSL) 卡详细信息始终是一个好主意。但是，如果它面向更广泛的公众，您将需要查看 PCI 指南和匹配的类要求。

# java - 对象添加到数组

> ID：11481377
> 
> 赞同：0
> 
> 时间：2012-07-14T05:40:33.417
> 
> 标签：java, jakarta-ee, ejb

我有一个需要添加到数组列表的 EJB 对象。添加到数组后，列表中的所有对象都引用最后一个对象。

```
private @EJB
    JiraissueFacade jiraissueFacade;

for (MajorEvent mjrEvent : listOfMajorEvent) {
                System.out.println("Mjr evnet id"+mjrEvent.getJissueId());
                Jiraticket jiraticket_mjr = new Jiraticket();
                jiraticket_mjr =  jiraissueFacade.findByID(mjrEvent
                        .getJissueId());
                jiraticket_mjr.setSelected(mjrEvent.getFlag());

                System.out.println("Jiraticket pkey :"+jiraticket_mjr.getPkey());

                listOfJiraticket.add(jiraticket_mjr);
            } 
```

# 输出

当它在控制台中打印 pkey 时，它会打印单个对象，但是当我从“listOfJiraticket”中获取最终列表时，所有对象都指的是最后一个对象。如何纠正它？

# security - 将文件转换为高频声波，并将其转换回来

> ID：11481378
> 
> 赞同：1
> 
> 时间：2012-07-14T05:41:03.040
> 
> 标签：security

我读过一本关于黑客的小说。在书中我读到黑客将文件转换为高频声波，来自 POST 声音的哔哔声。他用手机录下来，然后在电脑上把声音文件重新转换成原始文件。我想知道该怎么做？借助什么软件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T07:44:33.493

正如@ViktorStolbin 所暗示的那样，尽管带有讽刺意味，您不能真的期望一定能够在现实生活中实现*虚构作品。*

但是，在这种特殊情况下，您所描述的至少在原则上是可能的。至于是否可以在哔声中以足够高的频率对信息进行编码，以使人耳无法察觉音调的不均匀性，这取决于扬声器和手机的分辨率和动态范围。（不幸的是，我认为一个简单的 PC 扬声器是不够的。）

我没有否决您的问题的原因是它暗示了一种重要的现实生活技术：电话调制解调器。如果您的年龄足以使用拨号互联网连接，您可能会记得出现的汩汩、嘶嘶声和哔哔声。实际上，这些是您所描述的一种形式：一台计算机将二进制数据转换为声音以通过电话线传输，另一台计算机将声音转换回二进制数据。

现代光纤收发器的工作方式类似，但通过调制光（电磁辐射）而不是声音（气压）。

我建议看看 Wikipedia，也许可以买一个便宜的调制解调器来做实验；一些老派的黑客行为没有错！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T06:10:16.010

我猜他使用的软件与发布文件的所有者用于对其进行编码的软件相同。我想知道为什么你对这样一个微不足道的黑客印象深刻。为什么未来主义、赛博朋克或普通动作小说中的其他精彩内容不会让您印象深刻？我的意思是当两名联邦调查局特工正在查看法律分辨率的灰度照片时，其中一个注意到角落背景中有一些微小的东西，他问另一个特工“你能放大这张照片吗？”。一键点击和voolia！他可以看到高分辨率，有时甚至可以看到可能由专业相机拍摄的彩色图像！然后他们拍下嫌疑人的脸，并在某个数据库中搜索数十亿张其他人脸，1秒钟后他们就得到了关于他的所有信息。然后他们按下一个按钮并使用一些“GPS全球监测系统” 还有一个“大哥监控系统”，他们已经知道他在哪里，上次吃饭是什么时候，账户里有多少钱。太棒了，伙计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-09T07:59:34.583

我认为现在这是可能的，目前有一个开发团队已经实现了安全登录，您可以查看此链接 [http://techcrunch.com/2013/09/09/slicklogin-wants-to-kill-the-通过向您的智能手机唱出无声歌曲来输入密码/](http://techcrunch.com/2013/09/09/slicklogin-wants-to-kill-the-password-by-singing-a-silent-song-to-your-smartphone/)

他们能够使用计算机扬声器的标准扬声器提供 InAudible 音频。

顺便说一句，如果您搜索磁卡的工作原理，它们只是转换为二进制数据并转换为十进制数据的声音。

# java - 将字节数组打印到热敏打印机 Java

> ID：11481390
> 
> 赞同：2
> 
> 时间：2012-07-14T05:43:14.090
> 
> 标签：java, zebra-printers

我正在使用 java 应用程序对 FedEx 进行 Web 服务调用，并尝试将标签打印到本地 USB 连接的热敏打印机。我将从 FedEx 获取字节数组作为响应，并希望将其打印到连接热敏打印机的客户端机器上

```
DocAttributeSet das = new HashDocAttributeSet();
PrintRequestAttributeSet pras = new HashPrintRequestAttributeSet();

PrintService ps = PrintServiceLookup.lookupDefaultPrintService();
DocPrintJob job = ps.createPrintJob();
Doc doc = new SimpleDoc(image, DocFlavor.BYTE_ARRAY.AUTOSENSE, das);    
job.print(doc, pras); 
```

非常感谢您的帮助，或者建议我/将我重定向到我可以找到解决方案的链接。

**更新：**我想通过基于 Web 的应用程序将 FedEx 标签打印到本地 USB 连接的热敏打印机上。

我有如上所述编写的服务器代码，我在本地打印标签时遇到问题。

上面的代码正在寻找连接在应用服务器上的打印机。

当客户端单击“打印标签”按钮时，FedEx 网络服务调用成功并正确返回 ZPLII 格式字节数组，但**“希望将此字节数组推送到客户端机器并打印到热敏打印机”**。

只有在从 FedEx 取回字节数组之后才能工作，然后我才能实现将字节数组带回打印机以在热敏打印机上打印。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:38:00.020

我使用[jZebra](http://code.google.com/p/jzebra)将其打印到本地 USB 连接的热敏打印机

这是我的代码。

在行动课

```
byte[] imageArr = ShipmentReply.getImage();
out = ServletActionContext.getResponse().getOutputStream();
out.write(imageArr);
out.flush(); 
```

在 jQuery 中

```
$.post("printFedexLabel", function(imageArr){
    printZebra(imageArr);
}); 
```

在 JSP 中

```
<applet name="jZebra" code="jzebra.PrintApplet.class" archive="${pageContext.request.contextPath}/jzebra.jar" width="1" height="1">
     <param name="printer" value="zebra">
</applet>

<script type="text/javascript">
   function printZebra(data) {
       var applet = document.jZebra;
       if (applet != null) {
          applet.append(data);
          applet.print();
    }
   }
</script> 
```

就是这样......它的工作真棒。如果有人需要有关此实施的更多信息，请告诉我。

# android - 如何添加和激活 PPTP 或 L2TP VPN 连接？

> ID：11481391
> 
> 赞同：1
> 
> 时间：2012-07-14T05:43:47.860
> 
> 标签：android

我正在开发一个基于 SIP 的应用程序来拨打和接听电话。在其中我需要访问 PPTP VPN 连接，因为在某些国家/地区 VOIP 和 SIP 被阻止。如果我使用 VPN 连接，那么即使 VOIP 和 SIP 在该国家/地区被阻止，呼叫也不会被阻止。那么如何添加新的 PPTP VPN 连接呢？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2019-05-01T20:11:12.820

打开网络和共享中心>>设置新连接或网络>>连接到工作场所>>创建新连接>>使用我的互联网连接vpn>>输入vpn并单击下一步

[![在此处输入图像描述](../Images/6a9aac06c4e70e434e0c98f403bd4592.png)](https://i.stack.imgur.com/DLBKG.png)

# c++ - 在 C++ 中，除法比乘法更昂贵吗？

> ID：11481394
> 
> 赞同：1
> 
> 时间：2012-07-14T05:44:50.153
> 
> 标签：c++, optimization

> **可能重复：**
> [我应该使用乘法还是除法？](https://stackoverflow.com/questions/226465/should-i-use-multiplication-or-division)
> [比较乘法和除法](https://stackoverflow.com/questions/10180143/compare-multiplication-and-division)

在 C++ 中，除法比乘法更昂贵吗？

我正在进行优化，出于某些比较原因，我可以将 B/alpha_B 转换为 B*alpha_A。我现在可以选择应该使用乘法还是除法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-14T06:07:44.493

这与 C++（或任何其他语言）无关，与底层处理器架构/实现有关。在大多数处理器系列上，除法通常比乘法慢 10 倍。

也就是说，除法指令的延迟现在很少是程序中的主要性能热点（当然，您的里程可能会有所不同）。用倒数乘法代替除法最有意义的地方是当您将向量除以常数因子（例如向量归一化、缩放、矩阵旋转）时。这也是流水线深度最能掩盖`div`指令延迟和内存带宽（假设大向量）可能成为吞吐量限制的地方。

简而言之，现在很少值得进行这些类型的微优化。编译器优化器很可能会识别出无论如何用乘法代替除法是有意义的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T06:00:15.117

我发现一个声称乘法更快的消息来源：

[http://simpletonprogrammer.blogspot.com/2012/01/assumed-optimization-floating-point.html](http://simpletonprogrammer.blogspot.com/2012/01/assumed-optimization-floating-point.html)

FMUL 和 FDIV 的时间安排似乎是相当确定的，至少对于列出的处理器而言。但是，其他处理器可能不同。换句话说，学会剖析。

# php - 如何在不使用 wget 的情况下在 codeigniter 中运行 cron 作业？

> ID：11481400
> 
> 赞同：2
> 
> 时间：2012-07-14T05:46:48.653
> 
> 标签：php, cron

我想在 CodeIgniter 中不使用 wget 来运行 cron 作业。我这样使用它：

```
*/1 * * * * wget  http://assurance.com/controller/function 
```

它成功运行，但我不想使用 wget。

还有其他方法可以运行此 CodeIgniter 脚本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T08:15:12.383

你可以尝试使用这样的东西：

```
* * * * * /usr/bin/php  /pathToTheApp/controller/function 
```

但当然`/usr/bin/php`应该是您的 PHP 二进制文件的路径，并且`pathToTheApp`应该是您的 CI 应用程序的**绝对路径。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T06:10:10.637

如果您在主机上具有本地 shell 访问权限，请将其添加到那里的 crontab 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-07T10:31:47.760

我最近需要做这件事，但找不到完整的解决方案。所以我会尝试在这里提供一个。

我使用“bash shell”是因为我想将我的控制器的命令行 (CLI) 调用转换为 http（注意：我使用的是 ubuntu/linux 服务器。

主要分为三个部分：

cron 调用

外壳脚本

控制器功能

* * *

克朗：

在您的服务器 cli 中键入以下内容以访问 crontab：crontab -e

然后添加您的 cron 调用：`* * * * * bash /path/to/script/test.sh`

（注意：我在我的站点根目录中创建了一个名为 cron 的文件夹，所以我的路径是：

/var/www/website/cron/test.sh

* * *

外壳脚本：

在我们创建的那个 cron 文件夹中，创建一个名为“test.sh”的文件

在文件中放置：

```
#!/bin/bash
cd /path/to/site
/usr/bin/php index.php controller function 
```

就是这样

cron 设置计时器以调用文件 shell 从 CLI 调用控制器

您现在可以在函数中使用 $this->input->is_cli_request() 来增加安全性。

```
public function cronTest()
{
    if($this->input->is_cli_request())
    {
        //code goes here;
    }        
} 
```

希望这可以帮助您节省一些时间，这比预期花费了我更长的时间:)

# jquery - 扩展 jQuery 问题

> ID：11481401
> 
> 赞同：1
> 
> 时间：2012-07-14T05:47:34.917
> 
> 标签：jquery

[https://www.verswerks.com/crowd_staffer/](https://www.verswerks.com/crowd_staffer/)
在该屏幕的右侧是我正在使用的内容。如果不拉动其余部分，我无法让标签独立移动。我知道这可能是因为他们包裹在 ul 中，但任何人都可以提出解决这个问题的方法吗？

```
#top_links{
font-family: 'Swanky and Moo Moo', cursive;
margin-right: 50px;
text-align: right;
}
ul#navigation {
position: fixed;
margin: 0px;
padding: 0px;
top: 30%;
right: 0px;
list-style: none;
z-index:9999;
}
ul#navigation li {
width: 100px;
height: 30px;
padding: 10px;
background: rgb(167,199,220); /* Old browsers */
background: -moz-linear-gradient(top,  rgba(167,199,220,1) 0%, rgba(133,178,211,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(167,199,220,1)), color-stop(100%,rgba(133,178,211,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  rgba(167,199,220,1) 0%,rgba(133,178,211,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  rgba(167,199,220,1) 0%,rgba(133,178,211,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  rgba(167,199,220,1) 0%,rgba(133,178,211,1) 100%); /* IE10+ */
background: linear-gradient(to bottom,  rgba(167,199,220,1) 0%,rgba(133,178,211,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#a7c7dc', endColorstr='#85b2d3',GradientType=0 ); /* IE6-9 */
-moz-border-radius:10px 0px 0px 10px;
-webkit-border-bottom-left-radius: 10px;
-webkit-border-top-left-radius: 10px;
-khtml-border-bottom-left-radius: 10px;
-khtml-border-top-left-radius: 10px;
-moz-box-shadow: 0px 4px 3px #000;
-webkit-box-shadow: 0px 4px 3px #000; 
box-shadow: 0px 4px 3px #000;
opacity: 0.6;
filter:progid:DXImageTransform.Microsoft.Alpha(opacity=60);
}
ul#navigation li a{ 
color: black; 
}
<nav id='top_links'>
Login | Contact us
</nav>
<section>
<ul id="navigation">
<li>Inspire!</li>
<li class="right_slideout"><a href="" title="Home">Home, back to our blah blah</a></li>
<li class="right_slideout"><a href="" title="About">About our blah blah</a></li>
<li class="right_slideout"><a href="" title="Search">Search for blah blah</a></li>
</ul>
</section>
        $(function() {
$('.right_slideout').hover(
function () {
$(this).animate({width:300},"fast");
},
function () {
$(this).animate({width:100},"fast");
}
);   
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T06:05:09.183

我找到了一个可行的解决方案。将此添加到您的 li css：

```
float: right;
clear: both; 
```

这会将单个 li 粘贴到右侧，并使用 clear 在另一行开始下一个 li。在 jsfiddle 和您的页面上测试并有效。

# c# - 如何将视频从视频游戏实时流式传输到另一台计算机？

> ID：11481414
> 
> 赞同：2
> 
> 时间：2012-07-14T05:50:03.813
> 
> 标签：c#, encoding, streaming, capture

我刚开始编写一个应用程序，我的想法是创建类似 StreamMyGame 但供个人使用的东西，已经有一个名为 Single Player Game Transmiter 的项目可以实现其中的一些（http://sourceforge.net/projects/spgt/files/ ）。

到目前为止，我没有编码也没有流式传输，我只是捕获视频并将其显示在我的应用程序窗口中。

那么我该如何处理编码/流式传输呢？我在想原始JPEG的UDP流将是最简单的路径，但我不确定。

另外，我该如何优化我目前拥有的东西？它可以很好地播放视频，但是在捕获游戏窗口时，它似乎不像原始视频那样活泼，我认为这可能是因为它在后台运行。这让我想到另一个问题，如何捕获具有指定标题的窗口而不是活动窗口？

[https://github.com/fr500/desktop_streamer](https://github.com/fr500/desktop_streamer)

**编辑**：

使用当前捕获方法的一些测试：

**视频播放器捕获 (960x720p)**

```
starting benchmark
================================================
looking for window: test.mp4
looking for window: test.mp4
looking for window: test.mp4
looking for window: test.mp4
looking for window: test.mp4
================================================
starting single thread capture only test

Time Elapsed: 19480 milliseconds
Frame Time: 32 milliseconds
Rough FPS: 30
Sleeping 2 seconds

starting single thread capture and save as bmp test

Time Elapsed: 19768 milliseconds
Frame Time: 32 milliseconds
Rough FPS: 30
Sleeping 2 seconds

starting single thread capture and save as jpg test

Time Elapsed: 28593 milliseconds
Frame Time: 47 milliseconds
Rough FPS: 20
Sleeping 2 seconds

starting dual thread capture only test

Time Elapsed: 19515 milliseconds
Frame Time: 32 milliseconds
Rough FPS: 30
Sleeping 2 seconds

starting quad thread capture only test

Time Elapsed: 19481 milliseconds
Frame Time: 32 milliseconds
Rough FPS: 30
Sleeping 2 seconds 
```

**孤岛危机 2 捕获 (1024x768p)**

```
starting benchmark
================================================
looking for window: Crysis 2 (TM)
looking for window: Crysis 2 (TM)
looking for window: Crysis 2 (TM)
looking for window: Crysis 2 (TM)
looking for window: Crysis 2 (TM)
looking for window: Crysis 2 (TM)
looking for window: Crysis 2 (TM)
================================================
starting single thread capture only test

Time Elapsed: 20003 milliseconds
Frame Time: 33 milliseconds
Rough FPS: 29
Sleeping 2 seconds

starting single thread capture and save as bmp test

Time Elapsed: 20105 milliseconds
Frame Time: 33 milliseconds
Rough FPS: 29
Sleeping 2 seconds

starting single thread capture and save as jpg test

Time Elapsed: 17353 milliseconds
Frame Time: 28 milliseconds
Rough FPS: 34
Sleeping 2 seconds

starting dual thread capture only test

Time Elapsed: 19991 milliseconds
Frame Time: 33 milliseconds
Rough FPS: 30
Sleeping 2 seconds

starting quad thread capture only test

Time Elapsed: 19983 milliseconds
Frame Time: 33 milliseconds
Rough FPS: 30
Sleeping 2 seconds 
```

将图像保存到 BMP 并不会真正增加任何开销，但保存为 JPG 确实让我了解了视频编码可能具有的开销。仍然最大的问题是获取帧本身，它现在太慢了，**无法跟上，因此丢失了一些帧**。如果可以以 60+ fps 的速度捕获帧，那么对于单人游戏来说，编码 + 流媒体延迟确实是可以管理的。

我将尝试使用 DX 钩子方法来获取帧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T09:14:34.070

我不确定性能/质量问题是否是在后台运行的影响，但是我会尝试回答您的问题。

**按名称捕获窗口**

我想您可以尝试使用`FindWindow`函数而不是`GetForegroundWindow`应用程序中使用的函数。它允许您通过标题获取窗口的句柄。为了做到这一点（在您发布链接的 desktop_streamer 项目中），请转到`ScreenCapture`课程并：

*   改变

    ```
    [DllImport("user32.dll")]
    private static extern IntPtr GetForegroundWindow(); 
    ```

    至

    ```
    [DllImport("user32.dll", SetLastError = true)]
    private static extern IntPtr FindWindow(string lpClassName, string lpWindowName); 
    ```

*   在`Capture`方法中更改行

    ```
    var foregroundWindowsHandle = GetForegroundWindow(); 
    ```

    至

    ```
    var foregroundWindowsHandle = FindWindow(null, "mywindowName"); 
    ```

我没有对此进行测试，所以如果您在运行代码时遇到任何问题，请告诉我，以便我们寻找解决方案。

有关`FindWindow`功能的更多信息，请查看此处：[http](http://www.pinvoke.net/default.aspx/user32.findwindow) ://www.pinvoke.net/default.aspx/user32.findwindow 。

**性能和图像质量**

在谈论性能时，您可能想尝试实时测量网络速度和延迟，然后使用这些信息来适当地调整图像质量（压缩级别和分辨率）。这会使传输的图像不时像素化，但会降低游戏延迟的影响。

您可能还想查看此页面，其中提供了两种屏幕捕获方法的一些性能比较：http: [//blog.bobcravens.com/2009/04/fastest-screen-capture-using-c-vista-vs -win7/](http://blog.bobcravens.com/2009/04/fastest-screen-capture-using-c-vista-vs-win7/)。它可以帮助您提高屏幕捕获过程的性能，但正如您所见，实现的帧速率仍然太低，无法提供高质量的游戏体验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-14T05:32:22.380

最近，我构建了一个名为 ScreenStreamer 的 golang 项目，它是一个将当前活动窗口（Linux 或 Windows）流式传输到其他设备（如手机或另一台 PC）的工具，如 MJPEG，它非常实时（延迟 < 100ms）

项目链接：[https ://github.com/fiefdx/ScreenStreamer](https://github.com/fiefdx/ScreenStreamer)

# php - Instantiating class method without instantiating the class in PHP no longer possible?

> ID：11481419
> 
> 赞同：5
> 
> 时间：2012-07-14T05:50:41.033
> 
> 标签：php, class, methods

I'm not sure if I'm losing it or what. I recently jumped back into PHP after a much needed break, and I'm trying to do something that I've always been able to do: call a public class method without instantiating the class. Example:

```
 class Utils 
  {
    public function getTime() 
    {
      return time();
    }
  }

  $time = Utils::getTime();
  echo $time; 
```

I used to do this all the time (about two or three years ago), but after hopping into PHP 5.3 on a new sandbox environment that I set up, I keep getting

```
 Fatal error: Call to undefined function getTime() in /mnt/richard/index.php on line 24 
```

Am I missing something silly here? Or is the use of public class methods without class instantiation a now deprecated feature in PHP? Oh how times have changed...

**My overall goal is to be able to create methods that belong to a grouped set of classes that can be called in the global scope within other methods and classes. Any help will be much appreciated. Thanks.**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-14T06:10:50.933

You shouldn't be calling instance methods as static ones on a class, even if PHP allows you to do so. When invoking:

```
 Utils::getTime(); 
```

you are calling an instance method from a static context. You should define `getTime` like this instead:

```
class Utils 
{
    public static function getTime() 
    {
       // You can't use $this in here. This is a static function. No instance exists.
       return time();
    }
} 
```

# c - 如何在 C 结构中使用函数指针？

> ID：11481423
> 
> 赞同：9
> 
> 时间：2012-07-14T05:51:59.097
> 
> 标签：c, data-structures, function-pointers

我想了解更多关于在 C 结构中使用函数指针作为模拟面向对象编程的一种方式，但在我的搜索中，我刚刚发现了这样的问题[，](http://ubuntuforums.org/showthread.php?t=680631)其中答案只是使用函数指针而不描述如何使用工作。

我最好的猜测是这样的

```
#include <stdio.h>
#include <stdlib.h>

struct my_struct
{
    int data;
    struct my_struct* (*set_data) (int);
};

struct my_struct* my_struct_set_data(struct my_struct* m, int new_data)
{
    m->data = new_data;
    return m;
}

struct my_struct* my_struct_create() {
    struct my_struct* result = malloc((sizeof(struct my_struct)));
    result->data = 0;
    result->set_data = my_struct_set_data;
    return result;
}

int main(int argc, const char* argv[])
{
    struct my_struct* thing = my_struct_create();
    thing->set_data(1);
    printf("%d\n", thing->data);
    free(thing);
    return 0;
} 
```

但这给了我编译器警告`warning: assignment from incompatible pointer type`，所以很明显我做错了什么。有人可以提供一个小而完整的例子来说明如何正确使用 C 结构中的函数指针吗？

我用 C 教的课甚至没有提到这些。这让我想知道这些是否真的被 C 程序员使用。在 C 结构中使用函数指针有哪些优点和缺点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-14T07:33:36.787

Andy Stow Away 给出的答案修复了我的编译器警告，但没有回答我的第二个问题。eddieantonio 和 Niklas R 对该答案的评论回答了我的第二个问题，但没有修复我的编译器警告。因此，我将它们汇集到一个答案中。

C 不是面向对象的，试图在 C 中模拟面向对象的设计通常会导致风格不佳。复制在结构上调用的方法，以便可以使用指向结构的指针来调用它们，就像我在我的示例中那样。（坦率地说，它违反了 DRY。）结构中的函数指针对于多态性更有用。例如，如果我有一个表示元素线性序列的通用容器的结构向量，则存储一个比较函数成员可能很有用，该成员是一个函数指针，以允许对向量进行排序和搜索。向量的每个实例都可以使用不同的比较函数。但是，对于对结构本身进行操作的函数，最好有一个在结构中不重复的单独函数。

这使得正确的答案变得更加复杂。如何编译我的上述示例是正确的吗？是如何重新格式化我上面的示例以使其具有良好的风格？还是像 C 程序员那样使用函数指针的结构示例是什么？在提出我的问题时，我没有预料到我的问题是错误的。为了完整起见，我将提供每个问题答案的示例。

# 修复编译器警告

```
#include <stdio.h>
#include <stdlib.h>

struct my_struct
{
    int data;
    struct my_struct* (*set_data) (struct my_struct*, int);
};

struct my_struct* my_struct_set_data(struct my_struct* m, int new_data)
{
    m->data = new_data;
    return m;
}

struct my_struct* my_struct_create()
{
    struct my_struct* result = malloc((sizeof(struct my_struct)));
    result->data = 0;
    result->set_data = my_struct_set_data;
    return result;
}

int main(int argc, const char* argv[])
{
    struct my_struct* thing = my_struct_create();
    thing->set_data(thing, 1);
    printf("%d\n", thing->data);
    free(thing);
    return 0;
} 
```

# 重新格式化样式

```
#include <stdio.h>
#include <stdlib.h>

struct my_struct
{
    int data;
};

void my_struct_set_data(struct my_struct* m, int new_data)
{
    m->data = new_data;
}

struct my_struct* my_struct_create()
{
    struct my_struct* result = malloc((sizeof(struct my_struct)));
    result->data = 0;
    return result;
}

int main(int argc, const char* argv[])
{
    struct my_struct* thing = my_struct_create();
    my_struct_set_data(thing, 1);
    printf("%d\n", thing->data);
    free(thing);
    return 0;
} 
```

# 在结构体中演示函数指针的使用

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

struct my_struct
{
    void* data;
    int (*compare_func)(const void*, const void*);
};

int my_struct_compare_to_data(struct my_struct* m, const void* comparable)
{
    return m->compare_func(m->data, comparable);
}

struct my_struct* my_struct_create(void* initial_data,
        int (*compare_func)(const void*, const void*))
{
    struct my_struct* result = malloc((sizeof(struct my_struct)));
    result->data = initial_data;
    result->compare_func = compare_func;
    return result;
}

int int_compare(const void* a_pointer, const void* b_pointer)
{
    return *(int*)a_pointer - *(int*) b_pointer;
}

int string_compare(const void* a_pointer, const void* b_pointer)
{
    return strcmp(*(char**)a_pointer, *(char**)b_pointer);
}

int main(int argc, const char* argv[])
{
    int int_data = 42;
    struct my_struct* int_comparator =
            my_struct_create(&int_data, int_compare);

    char* string_data = "Hello world";
    struct my_struct* string_comparator =
             my_struct_create(&string_data, string_compare);

    int int_comparable = 42;
    if (my_struct_compare_to_data(int_comparator, &int_comparable) == 0)
    {
        printf("The two ints are equal.\n");
    }

    char* string_comparable = "Goodbye world";
    if (my_struct_compare_to_data(string_comparator,
            &string_comparable) > 0)
    {
        printf("The first string comes after the second.\n");
    }

    free(int_comparator);
    free(string_comparator);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-14T06:08:46.757

在您的结构定义中，将其更改为

```
struct my_struct
{
    int data;
    struct my_struct* (*set_data) (struct my_struct*,int);
}; 
```

现在在 main 中使用上述函数指针作为

```
thing->set_data(thing,1); 
```

# php - 如何在php中打印shell命令的输出？

> ID：11481426
> 
> 赞同：0
> 
> 时间：2012-07-14T05:52:03.703
> 
> 标签：php, shell, unix, terminal

我想将一个名为的命令的输出打印`jnettop`到一个 html 文件中。

我非常熟悉`shell_exec()`和排序。但它不起作用，因为我使用的命令没有[此处](https://stackoverflow.com/questions/6653567/why-doesnt-exectop-work-on-linux)描述的 bash 模式，如 top 。

最终目标是拥有一个我去的站点，我看到 jnettop 通常会在终端中显示的信息。 [这](http://jnettop.kubs.info/wiki/)是[jnettops](http://jnettop.kubs.info/wiki/) wiki 页面的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-03T11:27:01.630

> 我使用的命令没有像 top 这样的 bash 模式

当然有：`jnettop --display text`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T08:57:45.040

您可以尝试[passthru()](http://www.php.net/manual/en/function.passthru.php)或[exec()](http://php.net/manual/en/function.exec.php)与输出参数 peresent。

# c - C 线性搜索误差

> ID：11481430
> 
> 赞同：0
> 
> 时间：2012-07-14T05:52:29.470
> 
> 标签：c, search

我的`lsearch`函数应该在我的数组中找到值 11。它没有，我不知道错误在哪里。为什么这段代码找不到值 11？

```
#include <stdio.h>
#include <string.h>
#define PF printf
int main() {
    int intcmp(void *ip1, void * ip2);
    void * lsearch(void *key, void *base, int n, int elemSize, 
                   int(* cmpfun)(void *, void *));
    int arr[] = {4, 6, 2, 3, 11, 22, 15};
    int n = sizeof(arr) / sizeof(int);
    int key = 11;
    int *found = lsearch(&key, &arr, n, sizeof(int), intcmp);
    PF("found=%p", found);
    return 1;
}
int intcmp(void *ip1, void * ip2) {
    int *p1 = ip1;
    int *p2 = ip2;
    return *p1 - *p2 == 0;
}
void * lsearch(void *key, void *base, int n, int elemSize, 
               int(* cmpfun)(void *, void *)) {
    int i;
    for(i = 0; i < n; i ++) {
        void *elemArr = (char *)base + i * elemSize;
        if(cmpfun(key, elemArr) == 0)
            return elemArr;
    }

    return NULL;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T06:00:16.053

您的代码中有一些奇怪之处（PF 以及函数在 main 中声明但全局定义的方式），但是，问题是您的逻辑如果在两个地方倒置。

```
if(cmpfun(key, elemArr) == 0)
        return elemArr; 
```

和：

```
return *p1 - *p2 == 0; 
```

当两个元素相等时，在心理上贯穿这一点。当数字实际上等于另一个时， == 表达式将返回 1。1 != 0 因此它不被认为是找到的。

通过那里的否定或`return *p1 - *p2;`直接否定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T06:23:49.567

我已经注释了下面的代码：

```
#include <stdio.h> 
#include <string.h> 

// This is bad practice. It makes your code less readable.
// I won't use it below.
#define PF printf 

// Declare this first so a prototype is not needed.
// You violated a C pattern by using `cmp` in the name.
// Comparison functions in C return <0, 0, >0, not a binary value.
// To wit, later you used the comparison correctly.  I've fixed the
// inconsistency.
int intcmp(void *vp1, void *vp2) 
{   // Most C styles have the brace on its own line, unlike Java. Roll with it.
    int *p1 = vp1, *p2 = vp2;
    return *p1 - *p2; 
}

// Search n elements of size elemSize in the array at 
// base in sequence using cmpfun on key, 
// to test for equality (cmpfun == 0).  Return a pointer 
// to the found element or NULL if none.
void *lsearch(void *key, void *base, int n, 
              int elemSize, int(* cmpfun)(void *, void *)) 
{ 
    int i; 

    for (i = 0; i < n; i++) { 
        void *elemArr = (char*)base + i * elemSize; 
        if (cmpfun(key, elemArr) == 0) 
            return elemArr;
    } 
    return NULL; 
}

int main() 
{   
    int arr[] = {4, 6, 2, 3, 11, 22, 15}; 
    int n = sizeof(arr) / sizeof(int); 
    int key = 11; 
    int *found = lsearch(&key, &arr, n, sizeof(int), intcmp); 
    printf("found=%p (%d)", found, *(int*)found); 
    return 0; // By convention zero corresponds to no error.
} 
```

# wpf - MVVM - 与 WPF 命令绑定标准有关

> ID：11481437
> 
> 赞同：0
> 
> 时间：2012-07-14T05:54:13.340
> 
> 标签：wpf, design-patterns, mvvm, commandbinding

我认为我对 MVVM 设计模型有很好的理解，但是我对 WPF、命令绑定以及我们应该如何使用它们有意见。

要将命令直接绑定到 XAML，我们需要在 ViewModel 中实现 ICommand 接口。现在，ICommand 接口是 PresentationCore.DLL 的一部分，如果我错了，请纠正我是 WPF 的一部分，而不是基本的 .NET 框架。

ViewModel 和 Model 的全部意义不在于它应该完全独立于 UI 吗？例如，如果我在 ViewModel 中实现 ICommand 并将其用作数据上下文以绑定来自 XAML 的命令，那么我的 ViewModel 是否依赖于 WPF 框架（特别是 PresentationCore.Dll）。

我的意思是，如果我要尝试在 Windows 窗体环境中使用我的模型和视图模型，我将不得不引用 PresentationCore.DLL，即使我不应该需要它，因为我使用的是 Windows 窗体而不是 WPF 框架.

这对我来说似乎有点奇怪，我在这里错过了什么吗？是否有另一种方法可以让我的模型和 ViewModel 完全独立于 UI 和 UI 框架，但仍然能够在 XAML 中使用 Command 绑定？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T06:20:48.953

MVVM 的目的是让视图只是一个视图，仅此而已。将 ICommands 放入视图模型有助于实现这一点，因为它将代码从视图中拉出。你会遇到问题的地方是如果你必须访问视图上不是依赖属性的东西，这意味着你不能绑定到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T06:34:33.977

我也遇到过这种问题，但不是在 wpf 中，而是在 POCO 课程中。我所做的是在两个不同的程序集中创建了两个部分类。就像您在 VM 项目中创建一个不依赖于 presentationcore.dll 的部分类，并在另一个实现 ICommand 内容的程序集（例如 WPFVM）中创建其部分类。现在，对于 Winforms 的东西，只将 VM 项目引用添加到 View 项目，对于 WPF 的东西，将 VM 和 WPFVM 的引用添加到 View 项目。我希望这将有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T06:54:11.133

在我看来，MVVM 非常受 WPF、Silverlight 的欢迎，因为它自然适合它。XAML 中的数据绑定概念允许使用单个属性（即 DataContext）来桥接视图和视图模型。由于您的逻辑不再与控件相关联，因此您可以获得更好的可测试性、设计代码分离和可维护性。您也可以在其他地方实现 MVVM 模式，但在 WPF 和 Silverlight 中，由于它的数据和命令绑定支持，它很容易适应。我在某处读过，不要虔诚地接受模式。它们旨在使您的生活更简单，而不是在遵循它时给您带来更多问题。对于 Winforms，我认为有更好的模式，如果您专注于重用业务逻辑，

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T10:37:55.697

这在 .NET 4.5 比较中发生了变化

*   [.NET 框架 4.5](http://msdn.microsoft.com/en-us/library/system.windows.input.icommand.aspx)
*   [.NET 框架 4](http://msdn.microsoft.com/en-us/library/system.windows.input.icommand%28v=vs.100%29.aspx)

# .net - 为什么放气会使我的数据更大？

> ID：11481438
> 
> 赞同：4
> 
> 时间：2012-07-14T05:54:28.680
> 
> 标签：.net, stream, compression, deflate

我想压缩一些数据，所以我想我会通过放气来运行流

它从 304 字节变为 578 字节。那是 1.9 倍大。我试图压缩它.....我在这里做错了什么？

```
using (MemoryStream ms2 = new MemoryStream())
using (var ms = new DeflateStream(ms2, CompressionMode.Compress, true))
{
    ms.WriteByte(1);
    ms.WriteShort((short)txtbuf.Length);
    ms.Write(txtbuf, 0, txtbuf.Length);
    ms.WriteShort((short)buf2.Length);
    ms.Write(buf2, 0, buf2.Length);
    ms.WriteShort((short)buf3.Length);
    ms.Write(buf3, 0, buf3.Length);
    ms.Flush();
    result_buf = ms2.ToArray();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T15:29:19.567

您的数据扩展程度是 DeflateStream 类中的一个*错误*。该错误也存在于 GZipStream 类中。请在此处查看我对此问题的描述：[为什么我的 C# gzip 生成的文件比 Fiddler 或 PHP 大？](https://stackoverflow.com/questions/11435200/why-does-my-c-sharp-gzip-produce-a-larger-file-than-fiddler-or-php/11435898#11435898).

不要使用 Microsoft 提供的 DeflateStream 类。改用[DotNetZip](http://dotnetzip.codeplex.com/)，它提供替换类。

当您尝试压缩不可压缩的数据时，它会略微膨胀，但只是一小部分。正确编写的 deflate 压缩器的最大扩展是 5 个字节加上百分之一的一小部分。 [zlib](http://zlib.net/)对不可压缩数据的扩展（原始 deflate 的默认设置）为 5 字节 + 输入大小的 0.03%。您的 304 字节（如果不可压缩）*应该*从像 Def​​lateStream 这样的原始 deflate 压缩器中以 309 字节的形式出现。对长度超过 5 或 6 个字节的内容进行 1.9 倍扩展是一个错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T05:58:30.250

您尝试压缩的数据可能实际上不可压缩（或者您一开始没有很多数据要压缩）。当数据中有重复时，压缩效果最好。

它可能更大，因为压缩方案正在添加用于解密流的元数据，但由于数据不可压缩或没有很多数据可供压缩生效，它实际上使情况变得更糟。

如果您执行压缩 zip 文件之类的操作，您会发现解压缩并不总是会使文件变小。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-14T05:59:18.957

小数据块通常最终会变大，因为压缩算法使用了一个添加到输出中的代码表，或者它需要更大的样本才能找到足够的样本来处理。

你没有做错什么。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-14T05:58:34.103

难道不应该

```
using (var ms = new DeflateStream(ms2, CompressionMode.Compress, true)) 
```

代替

```
using (var ms = new DeflateStream(ms, CompressionMode.Compress, true)) 
```

如果你想用 DeflateStream 装饰你的 MemoryStream，它应该是这样的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-14T15:37:18.377

您在评论中回答了自己的问题：

> 我不知道我改变了什么，但数据是在每次运行中随机生成的

随机数据*很难*压缩。一般来说，当数据中有很多模式（如字典或网站中的文本）时，它会很好地压缩。但压缩算法最糟糕的情况是当您面对随机数据时。真正随机的数据中没有任何模式；那么压缩算法怎么能期望能够压缩它呢？

接下来要考虑的是，某些压缩算法在存储数据方面存在开销。它们通常有一些标头位，后跟一些符号数据。对于随机数据，几乎不可能将数据压缩成其他形式，并且最终会在数据之间散布大量标头位，这些标头位除了说“以下数据就是这样表示”之外没有其他用途。

根据您的压缩格式，开销占总文件大小的百分比可能相对较小或较大。但是，无论哪种情况，您*都会*有开销使您的新文件比旧文件大。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-06T20:52:47.100

我没有发表评论的声誉，但是压缩性能比您预期的要差的原因*并不是*由于错误本身，而是由于专利错误：

> 压缩级别不如其他一些应用程序的原因是市场上最有效的压缩算法都受专利保护。另一方面，.net 使用非专利技术。

和

> 好吧，当我问同样的问题时（从 MS 的某个人那里）得到的解释是，这与微软无法在不修改 GZip 算法的情况下使用它有关；由于专利/许可问题。

[http://social.msdn.microsoft.com/Forums/fr-FR/c5f0b53c-a2d5-4407-b43b-9da8d39c01df/why-do-gzipstream-compression-ratio-so-bad?forum=netfxbcl](http://social.msdn.microsoft.com/Forums/fr-FR/c5f0b53c-a2d5-4407-b43b-9da8d39c01df/why-do-gzipstream-compression-ratio-so-bad?forum=netfxbcl)

> 最初我怀疑微软的 gzip 实现；我知道他们实施了 Deflate 算法，该算法不是最有效但没有专利。

[http://challenge-me.ws/post/2010/11/05/Do-Not-Take-Microsofts-Code-for-Granted.aspx](http://challenge-me.ws/post/2010/11/05/Do-Not-Take-Microsofts-Code-for-Granted.aspx)

# .htaccess - 需要帮助从链接中删除此部分 ( .php?number= )

> ID：11481440
> 
> 赞同：0
> 
> 时间：2012-07-14T05:55:13.840
> 
> 标签：.htaccess, mod-rewrite

需要帮助以使用 .htaccess`.php?number=`从链接中删除此部分`/`

旧链接

```
http://travelingasiapacific.com/grameenphone-mobile-phone-number-start-from.php?number=88%2001701000000 
```

需要看起来像

```
http://travelingasiapacific.com/grameenphone-mobile-phone-number-start-from/88%2001701000000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T07:55:00.660

好的，我以这种方式解决了这个问题：

```
RewriteEngine on
RewriteRule ^grameenphone-mobile-phone-number-start-from/(.*)$ grameenphone-mobile-phone-number-start-from.php?number=$1 [L] 
```

此代码用于调整链接大小

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

这部分用于从链接中删除 .php

# php - 哈希密码不匹配

> ID：11481443
> 
> 赞同：1
> 
> 时间：2012-07-14T05:56:57.413
> 
> 标签：php, hash, passwords

我正在使用以下功能。当我注册用户时，哈希似乎工作正常。当我尝试登录时，哈希不匹配。它有正确的散列，加上额外的散列。

有什么问题？

```
function salt($pass){
$salt = 'hello';
return hash('sha512', $pass.$salt);
}

function valid_credentials($user,$pass) {
$user = mysql_real_escape_string($user);
$pass = salt($pass);
$total = mysql_query("SELECT COUNT(`user_id`) FROM `users` WHERE `user_name` = '".$user."' AND `password` = '{$pass}' ");
return (mysql_result($total, 0) == '1' ) ? true : false;
}

function add_user($user, $pass) {
$user = mysql_real_escape_string(htmlentities($user));
$pass = salt($pass);
$time = now();
mysql_query("INSERT INTO `users` ( user_name, password, date_created ) VALUES ( '{$user}', '{$pass}', '{$time}' )");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T06:21:05.193

只需在将值插入 db 表之前和之后仔细检查返回的值。用修剪功能回应它。或使用 strcmp 使用生成的值检查插入到数据库中的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T06:03:02.307

我认为在您的验证代码中这一行：

```
$total = mysql_query("SELECT COUNT(`user_id`) FROM `users` WHERE `user_name` = '".$user."' AND `password` = '{$pass}' "); 
```

需要改成这样：

```
$total = mysql_query("SELECT COUNT(`user_id`) FROM `users` WHERE `user_name` = '".$user."' AND `password` = '".$pass."' "); 
```

现在它似乎正在检查密码列是否等于“{$pass}”。

# image - 从一组图像中检测明显不同的图像，例如使用 OpenCV 或 SimpleCV

> ID：11481445
> 
> 赞同：2
> 
> 时间：2012-07-14T05:57:38.413
> 
> 标签：image, opencv, computer-vision, motion-detection, simplecv

我有一晚通过网络摄像头拍摄的静止图像。大多数是相同的，因为图像中的照明是均匀的。然而，有些与其他的有很大不同——它们在框架中具有可见的人体运动。

如何**检测哪些图像明显不同**，以便将运动包含在其中？更好的是，有没有专门**检测运动**的方法？

我猜像 OpenCV 或 SimpleCV 这样的库可以轻松完成此任务，但我不限于使用这些库。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T09:12:28.360

在 SimpleCV 中，

```
cam = Camera()
prev = cam.getImage()
while True:
    current = cam.getImage()
    fs = current.findMotion(prev, method="LK")
    if fs: #if there's motion
        print "motion found"
    prev = current 
```

`Image.findMotion()`使用光流检测运动。你可以很容易地使用它。添加一些关于您期望多少运动的条件。

`fs.dx`并将`fs.dy`为您提供检测到运动的所有点。

我举了一个例子，我从相机获取输入并通过检测水平和垂直运动来控制 Banshee 媒体播放器。你可以在我的[GitHub 上](https://github.com/jayrambhia/SimpleCVexamples/blob/master/banshee_control.py)找到它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T09:14:00.220

您要查找的内容称为背景减法：

![图片取自网络](../Images/a561ebeeb606a426078155af8130847c.png)

*（图片来自[这篇文章](http://cnx.org/content/m19013/latest/)）*

看看[这个 SO 讨论](https://stackoverflow.com/questions/2026752/efficient-background-subtraction-with-opencv)。

OpenCV 中也有很多文章/示例，所以只需谷歌一下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T06:22:15.793

如果您拥有的第一张图像是相似的，您可以找到所有图像与第一张图像的绝对差异，并有一个阈值来找到显着不同的图像。同样在 openCV 中，为了检测视频中的运动，可以这样做： [http ://sundararajana.blogspot.in/2007/05/motion-detection-using-opencv.html](http://sundararajana.blogspot.in/2007/05/motion-detection-using-opencv.html)

# java - 如何通过java识别字符串中的键盘输入

> ID：11481447
> 
> 赞同：0
> 
> 时间：2012-07-14T05:57:50.130
> 
> 标签：java, string, jsp

我正在尝试为不了解 HTML 是什么的普通用户创建一个输入框，因此我尝试制作一些短代码，例如 ## '使文本居中'或 [[ '使其变为粗体'。我想实现这一点是用执行该特定任务的 html 代码替换这些特殊的预先确定的符号，这对于 java 专家来说应该是一件容易的事，但作为一个新手，我在做这件事时遇到了很多困难，我想知道如何在使用 java/jsp 在文本框中提供输入时识别文本/字符串之间出现的键盘字符（如“{、[、:、'等”），在我的应用程序中，我必须从键中识别此类输入板在文本字符串中，并用 html 代码替换它们。请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T06:50:46.290

如果您在用户键入时尝试替换这些字符，则必须使用`onKeyPressed`函数 ( `JavaScript` ) 检查每个键盘输入并将其替换为所需的 html 代码。

否则，您可能会将其转移到您的应用程序并在那里进行替换。

# zend-framework - Zend Framework - 注册表单，检查重复用户名的优雅方式？

> ID：11481448
> 
> 赞同：0
> 
> 时间：2012-07-14T05:58:15.013
> 
> 标签：zend-framework, user-registration

Zend Framework 是否提供了一种优雅的方式来检查用户名是否已存在于数据库中？

还是我唯一的选择是使用 php if/else 和 mysql select 语句的组合来编写验证器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T06:45:47.730

您可以添加一个验证器，如果用户名已经存在，它将检查数据库，如果存在，它将注意到用户。我假设您将 Zend_Form 和 Zend_Db_Table 与至少一个默认的 db 表数据库一起使用。

例如：

```
 $element = new Zend_Form_Element_Text('username');
    $element->setLabel('User:')
            ->addValidator(new Zend_Validate_Db_NoRecordExists('user', 'username'))
            ->setRequired(true);
    $this->addElement($element); 
```

您将向验证器传递 2 个参数，第一个是表名，第二个是您要检查的列。

而已！

# php - 使用 PHP/MySQL 的计算机数据 Web 应用程序

> ID：11481452
> 
> 赞同：-2
> 
> 时间：2012-07-14T05:58:40.610
> 
> 标签：php, mysql, web-applications

我想用 PHP/MySQL 制作一个计算机存储（在线）Web 应用程序......我的意思是我们可以保存计算机的所有数据及其所有配置、升级、发生的问题、已解决的问题和保修到期警报。 .

谁能给我一个示例链接，我可以从中获得一些想法（该示例可以在任何平台上）。我只是想通过它的工作能力..我通过谷歌，但没有任何价值..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T06:14:11.673

这家公司在他们的软件中做了类似的事情。它被称为资产管理。据我所知，它似乎是使用 PHP 和 Ajax 完成的。我建议研究 Ajax 以获取更多信息，因为您需要实时跟踪，我想。[http://www.dapperdesk.com/hd/logina.php](http://www.dapperdesk.com/hd/logina.php)

# c# - 如何合并和格式化 XML

> ID：11481458
> 
> 赞同：0
> 
> 时间：2012-07-14T05:59:53.390
> 
> 标签：c#

我有一个看起来与此类似的 xml

```
<Unit Name="ANES">
    <med>20% FAT EMULSION 250 ML BAG</med>
    <med>ACETAMINOPHEN INJ 1000 MG/ 100 ML VIAL</med>
    <med>ALBUMIN HUMAN, 5% 12.5 G/250 250 ML VIAL</med>
    <med>ALBUTEROL SULFATE (90 MCG/INH) 60 PUFF INHALER</med>
    <med>AMINOPHYLLINE INJ 250 MG/10 10 ML AMP</med>
    <med>ANESTHESIA KIT 1 EA MISC</med>
    <med>ATROPINE SULFATE INJ [ATRSG] 1MG/10ML 1 MG SYRG</med>
    <med>ATROPINE SULFATE INJ 0.4 MG/1 M 1 ML VIAL</med>
    <med>BENZOCAINE 60 ML SPRAY</med>
    <med>BUPIVACAINE 0.25% INJ 30 ML VIAL</med>
    <med>BUPIVACAINE IN DEXTROSE INJ 2 ML AMP</med>
</Unit>

<Unit Name="ICU">
    <med>0.9% NA CL IV [NS1000] 1000 ML BAG</med>
    <med>0.9% NACL 50 ML VIAL</med>
    <med>20% FAT EMULSION 250 ML BAG</med>
    <med>ACETAMINOPHEN 325 MG TAB</med>
    <med>ACETAMINOPHEN SOLUTION 650MG/20.3ML 650 MG CUP</med>
    <med>ACETAMINOPHEN SUPPOSITORY 650 MG SUPP</med>
    <med>ACETAMINOPHEN/CODEINE 300 MG/30 MG 1 TAB </med>
    <med>ALBUTEROL SULFATE INH SOLN (2.5 MG/3 ML) 2.5 MG AMPUL-NEB</med>
    <med>ATROPINE SULFATE INJ [ATRSG] 1MG/10ML 1 MG SYRG</med>
    <med>AVITENE 5 G CAN</med>
    <med>BICITRA ORAL SOLN 30 ML CUP</med>
    <med>BISACODYL SUPPOSITORY 10 MG SUPP</med>
    <med>BUTORPHANOL TARTRATE 1 MG/ML 1 ML VIAL</med>
    <med>BUTORPHANOL TARTRATE 2 MG/ML 1 ML VIAL</med>
    <med>CALCIUM GLUCONATE INJ[CG] 1 GM/10ML 10 ML 10MLVIAL</med>
    <med>CARBOPROST TRO (HEMABATE) 250 MCG/ML 1 ML AMP</med>
    <med>CEFAZOLIN SODIUM INJ (CEF1] 1 G VIAL</med>
    <med>CLINDAMYCIN PHOSPHATE/D5W 900MG/50ML PIGGYBACK</med>
    <med>CODEINE SULFATE  15 MG TAB</med>
    <med>DEXAMETHASONE PHOSPHATE [DECSG] 4 MG/ML 1 ML VIAL</med>
    <med>DIAZEPAM INJ 10 MG/2 ML 10 MG SYRIN</med>
    <med>DIPHENHYDRAMINE 50 MG/ML 50 MG VIAL</med>
    <med>DOCUSATE SODIUM 100 MG CAP</med>
    <med>EPHEDRINE SULFATE INJ 50 MG AMP</med>

      <med>EPINEPHRINE 1:1000 INJ *PF*  1 MG/ 1 ML AMPULE</med>
    </Unit>
<Unit Name="NICU">
        <med>0.9% NA CL IV [NS1000] 1000 ML BAG</med>
        <med>0.9% NACL 50 ML VIAL</med>
        <med>20% FAT EMULSION 250 ML BAG</med>
</Unit> 
```

我想要做的是读取 XML 中的值并将单位与药物合并。例如 ANES (20% FAT EMULSION 250 ML BAG) 也位于 ICU 和 NICU。当用户输入药物时，它将能够告诉他们药物的位置。我有一个可行的实现，但缺点是它真的很慢。所以我的问题是我可以做什么样的算法或排序来提高性能。我尝试过使用 linq（最终我得到了内存不足异常），使用字典被认为太慢了。我愿意接受任何想法或建议。该列表有大约 50 个站点，每个单元有 80-100 个 Meds。

编辑：这是一个 WPF 应用程序（C#）。xml 不在我手中，因为这是 API 提供的，所以我无法更改它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T06:38:40.593

将您的 XML 加载到`XDocument`并使用 LINQ to XML 来查询数据：

```
var doc = XDocument.Parse("your XML here");

var units = from u in doc.Elements("Unit")
            where u.Elements("med").Any(m => (string)m == "med you're looking for")
            select (string)u.Attribute("Name"); 
```

# c# - C# Windows Phone 7 LiveConnect 自动访问权限

> ID：11481462
> 
> 赞同：0
> 
> 时间：2012-07-14T06:00:48.220
> 
> 标签：c#, windows-phone-7, permissions

我使用 Microsoft Interactive SDK 登录 Windows Live。登录正常工作，如果用户已登录，则保留。但是权限必须在程序的所有运行中都可以访问...

我怎样才能让程序在第一次运行后访问权限？

# jquery - jQuery：.children()[index] 不允许函数调用

> ID：11481465
> 
> 赞同：2
> 
> 时间：2012-07-14T06:01:11.310
> 
> 标签：jquery, function, indexing, children

为什么这不起作用...

> > $('#parent').children()[3].html('内容');
> 
> **不起作用** TypeError: $("#parent").children()[3].html is not a function。

这是什么时候？

> > var x = $('#parent').children()[3].className;
> 
> **有用吗**

[在我现在捣碎的jsperf 测试](http://jsperf.com/lastchild-vs-child-class)中找到了一个示例

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-14T06:04:11.810

`$("#parent").children()[3]`给你一个原生的 DOM 对象，而不是 jQuery 对象，并且`html`不是 DOM 节点上的属性，而是`className`。用于`.innerHTML`获取内部 HTML。

[现场演示](http://jsfiddle.net/rajaadil/VUXyZ/1/)

```
alert($("#parent").children()[2].innerHTML); 
```

或者

```
alert( $("#parent").children().eq(2).html()); 
```

# keyboard - CTRL-UP 十六进制序列

> ID：11481467
> 
> 赞同：0
> 
> 时间：2012-07-14T06:01:22.073
> 
> 标签：keyboard, hex

`CRTL-UP`按键的十六进制序列是什么？例如`UP`- '0x1b, 0x5b, 0x41'。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T06:50:13.127

我写了一个简单的 Python 3 脚本来找出答案：

```
while True:
    print(" ".join("{:x}".format(ord(x)) for x in input())) 
```

我不得不关闭`Ctrl``Up`击键的标准“任务控制”快捷方式，但在这样做之后，我在 iTerm2 中得到以下信息：

```
$ python3 test.py
^[[A
1b 5b 41
^[[1;5A
1b 5b 31 3b 35 41 
```

前两行代表一个`Up`按键，而后两行代表一个`Ctrl``Up`. 您可以使用相同的程序找出任何其他击键的字符序列。

# entity-framework-4 - 通过集合列表将数据绑定到网格时出错

> ID：11481470
> 
> 赞同：0
> 
> 时间：2012-07-14T06:02:30.090
> 
> 标签：entity-framework-4, entity

我正在尝试将列表集合绑定到数据网格，但它给出了一个错误。

类型“System.Data.Objects.ObjectContext”在未引用的程序集中定义。您必须添加对程序集“System.Data.Entity，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”的引用。

数据层代码：

```
 public class Employees
 {
 public List<Employee> LoadEmployees()
     {
         try
         {
             EMployeeDB1Entities EE = new EMployeeDB1Entities();
             var Employees = EE.Employees.Where(p => p.Name.StartsWith("T"));
             return Employees.ToList();

            // var myCollection = new ObservableCollection<Employee>(this.LoadEmployees());

         }
         catch
         {
             return null;
         } 
```

}

UI层代码

```
 private void button1_Click(object sender, EventArgs e)
    {

        Employees E1 = new Employees();

        // error gives in below line.
        dataGridView1.DataSource = E1.LoadEmployees();

    } 
```

有什么解决办法？提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T06:15:06.187

该错误清楚地表明您在项目中缺少 System.Data.Entity 类的引用，您需要通过相同的简单过程添加它。右键单击 add reference ，然后单击 .Net 选项卡并从列表中选择 System.Data.Entity。

你会很高兴的。

# android - 如何在proguard中添加维生素？

> ID：11481472
> 
> 赞同：2
> 
> 时间：2012-07-14T06:02:53.510
> 
> 标签：android, jar, proguard

我正在使用 proguard。在我的应用程序中，我正在使用 vitamio。我如何将维生素线添加到 proguard。我尝试了 libraryjars 但没有修复。请解决这个问题。我的前卫：

```
-optimizationpasses 5
-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-dontpreverify
-verbose
-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class * extends android.app.backup.BackupAgentHelper
-keep public class * extends android.preference.Preference
-keep public class com.android.vending.licensing.ILicensingService

-keepclasseswithmembernames class * {
    native <methods>;
}

-keepclasseswithmembernames class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembernames class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T05:53:33.340

如何从 proguard 中忽略 Vitamio 库？

```
-keep class io.vov.utils.** { *; }
-keep class io.vov.vitamio.** { *; } 
```

# java - 如何使用 OpenCloud 在 Java 中生成标签云？

> ID：11481482
> 
> 赞同：12
> 
> 时间：2012-07-14T06:05:15.483
> 
> 标签：java, swing, api, tags, word-cloud

我正在寻找一个库来在 Java 应用程序中创建标签云，然后我找到[了 OpenCloud](http://opencloud.mcavallo.org/)。

我不想使用 Web 服务器，OpenCloud 需要它来获取输出，不是吗？有没有办法让 OpenCloud 在 Java/Swing 面板中工作？我想要一个独立应用程序的东西。如果这是不可能的，我还能在哪里寻找这样的 API？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-07-03T22:52:51.683

我用 Java 创建了词云库 Kumo（日语中的云）。奇怪的是，我一直很喜欢词云。:)

Kumo 可以生成 BufferedImages、图像文件（PNG、BMP 等），并且还有示例显示在 JPanel 中的用法。该项目是 mavenized 并在 Maven Central 中，以使集成更容易。以下是一些示例词云，更多示例在 Kumo 的 GitHub 页面：[https ://github.com/kennycason/kumo](https://github.com/kennycason/kumo)

[这里](https://github.com/kennycason/kumo/blob/master/kumo-core/output/jpanel_example.png)还有一个 JPanel 示例和[这里](https://github.com/kennycason/kumo/blob/master/kumo-core/src/test/java/com/kennycason/kumo/examples/JPanelDemo.java)的屏幕截图。

![在此处输入图像描述](../Images/19b98958873dba8fa7290f18f5630e98.png) ![在此处输入图像描述](../Images/2f984d95784e1c3b1c82cbb4ecd3fa4d.png) ![在此处输入图像描述](../Images/992b6c6019d98c1de93191ca0c576608.png) ![在此处输入图像描述](../Images/d503f1d8ddfbbbcf80ce0fa8ec770f70.png) ![在此处输入图像描述](../Images/b6a83e10e4bb2b454f9d6d4c423a83a0.png) ![在此处输入图像描述](../Images/6f07f88ae07ec94d63c70836ae80bbcc.png) ![在此处输入图像描述](../Images/4f46d19619d5592429f97e472d01aa09.png)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-14T09:34:24.040

实际上 OpenCloud 不需要 Web 服务器。只需使用 Swing 呈现而不是 HTML/JSP。这是一个小片段，展示了一个使用 OpenCloud 库的非常基本的 Swing 标签云。它可以改进，但它为您提供了要点：

```
import java.util.Random;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

import org.mcavallo.opencloud.Cloud;
import org.mcavallo.opencloud.Tag;

public class TestOpenCloud {

    private static final String[] WORDS = { "art", "australia", "baby", "beach", "birthday", "blue", "bw", "california", "canada", "canon",
            "cat", "chicago", "china", "christmas", "city", "dog", "england", "europe", "family", "festival", "flower", "flowers", "food",
            "france", "friends", "fun", "germany", "holiday", "india", "italy", "japan", "london", "me", "mexico", "music", "nature",
            "new", "newyork", "night", "nikon", "nyc", "paris", "park", "party", "people", "portrait", "sanfrancisco", "sky", "snow",
            "spain", "summer", "sunset", "taiwan", "tokyo", "travel", "trip", "uk", "usa", "vacation", "water", "wedding" };

    protected void initUI() {
        JFrame frame = new JFrame(TestOpenCloud.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel panel = new JPanel();
        Cloud cloud = new Cloud();
        Random random = new Random();
        for (String s : WORDS) {
            for (int i = random.nextInt(50); i > 0; i--) {
                cloud.addTag(s);
            }
        }
        for (Tag tag : cloud.tags()) {
            final JLabel label = new JLabel(tag.getName());
            label.setOpaque(false);
            label.setFont(label.getFont().deriveFont((float) tag.getWeight() * 10));
            panel.add(label);
        }
        frame.add(panel);
        frame.setSize(800, 600);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestOpenCloud().initUI();
            }
        });
    }

} 
```

此代码基于[OpenCloud 库的示例 1](http://opencloud.mcavallo.org/)

这是我得到的输出：

![Swing 标签云演示图](../Images/48d585f92c0f435f408ebc7a15a2063b.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-25T16:57:52.963

我使用 openCloud 创建简单的 java 词云，使用词频和/或对数似然值来调整词的权重（字体大小）。云使用随机颜色并提供简单的随机旋转。

Github 仓库[在这里](https://github.com/drelhaj/Java_WordCloud_LogLikelihood)

[英文样本](http://i.stack.imgur.com/3lmvP.png)

[阿拉伯语样本](http://i.stack.imgur.com/WuRli.png)

# php - 如何使网页上的图像网格可排序？

> ID：11481488
> 
> 赞同：0
> 
> 时间：2012-07-14T06:06:08.967
> 
> 标签：php, javascript, html, image, webpage

我想在网页上设置图像网格，并通过菜单选择的类别对它们进行排序。

最好在不刷新整个页面的情况下完成此操作，并且无需 javascript 或 jquery 即可完成。

例如，可能有 12 张图像，分为四类。该菜单将包括“类别 1”、“类别 2”等。通过单击这些选项之一，下面的图像将简单地重新排列，选定的分类图像位于顶部。

有没有一个简单的 php 脚本可以做到这一点？它会涉及在各种数组中设置图像吗？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T16:03:43.043

好吧，实际上可以在不刷新页面且不使用 JavaScript 的情况下执行此操作。这是它的工作原理（只是一个最小的例子）：

`iframe`在您的 HTML 页面中创建一个。将`iframe`显示菜单以及排序的图像。

```
<iframe src="content.php" width="300" height="100" border="1"></iframe> 
```

然后在`content.php`：

```
<form method="post" action="content.php">
<select name="select">
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>
</select>
<input type="submit">
</form>

<?php
if (isset($_POST["select"])) {
    // sort images however you want and echo them
    echo "Option ".$_POST["select"];
}
?> 
```

因此，在提交表单时，只会`iframe`重新加载（而不是整个页面）。

请注意，这只是一种解决方法。你想要达到的目标真的不应该那样做。JavaScript 肯定是更好的选择。

# c# - Windows 对话框的法语本地化

> ID：11481496
> 
> 赞同：0
> 
> 时间：2012-07-14T06:08:16.330
> 
> 标签：c#, .net

我的应用程序（使用 Winform C# 开发）支持本地化。我使用一些仅以英文显示的 Windows 对话框（如打印对话框、颜色对话框）。请让我知道是否有任何方法可以更改这些对话框的语言。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T06:14:34.953

您不必做任何事情，因为所有系统对话都应随着操作系统语言和文化设置而相应改变。

# django - Django - 在模板的for循环中迭代数字

> ID：11481499
> 
> 赞同：335
> 
> 时间：2012-07-14T06:08:51.260
> 
> 标签：django, for-loop, django-templates

我的 django 模板中有以下 for 循环显示天数。我想知道，是否可以在循环中迭代一个数字（在下面的情况下为 i）。还是我必须将其存储在数据库中，然后以days.day_number的形式查询？

```
{% for days in days_list %}
    <h2># Day {{ i }} - From {{ days.from_location }} to {{ days.to_location }}</h2>
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：783
> 
> 时间：2012-07-14T06:32:13.850

Django 提供了它。您可以使用：

*   `{{ forloop.counter }}`索引从**1**开始。
*   `{{ forloop.counter0 }}`索引从**0**开始。

在模板中，您可以执行以下操作：

```
{% for item in item_list %}
    {{ forloop.counter }} # starting index 1
    {{ forloop.counter0 }} # starting index 0

    # do your stuff
{% endfor %} 
```

更多信息：[对于 | 内置模板标签和过滤器 | Django 文档](https://docs.djangoproject.com/en/stable/ref/templates/builtins/#for)

* * *

## 回答 #2

> 赞同：124
> 
> 时间：2017-10-25T08:50:46.027

也可以使用这个：

```
{% if forloop.first %} 
```

或者

```
{% if forloop.last %} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2020-12-18T11:00:08.690

```
{% for days in days_list %}
    <h2># Day {{ forloop.counter }} - From {{ days.from_location }} to {{ days.to_location }}</h2>
{% endfor %} 
```

或者如果你想从 0 开始

```
{% for days in days_list %}
        <h2># Day {{ forloop.counter0 }} - From {{ days.from_location }} to {{ days.to_location }}</h2>
{% endfor %} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2021-05-12T02:58:11.573

从文档[https://docs.djangoproject.com/en/stable/ref/templates/builtins/#for](https://docs.djangoproject.com/en/stable/ref/templates/builtins/#for) 你可以找到它来计算你可以使用这样的计数器的项目

```
{% for job in jobs %}
<td>{{ forloop.counter }}</td>
<td>{{ job.title }}</td>
<td>{{ job.job_url }}</td>
{% endfor %} 
```

*   `{{ forloop.counter }}`从开始数`1`
*   `{{ forloop.counter0 }}`从开始数`0`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-08-24T09:59:33.693

这样做，

```
{% for days in days_list %}
    <h2># Day {{ forloop.counter }} - From {{ days.from_location }} to {{ days.to_location }}</h2>
{% endfor %} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-07-11T09:34:55.803

[Django HTML 模板目前不支持索引]，但你可以实现目标：

如果您在views.py 中的Dictionary 中使用**Dictionary**，则可以使用键作为索引进行迭代。例子：

```
{% for key, value in DictionartResult.items %} <!-- dictionartResult is a dictionary having key value pair-->
<tr align="center">
    <td  bgcolor="Blue"><a href={{value.ProjectName}}><b>{{value.ProjectName}}</b></a></td>
    <td> {{ value.atIndex0 }} </td>         <!-- atIndex0 is a key which will have its value , you can treat this key as index to resolve-->
    <td> {{ value.atIndex4 }} </td>
    <td> {{ value.atIndex2 }} </td>
</tr>
{% endfor %} 
```

否则，如果您在字典中使用**List**，则不仅可以控制第一次和最后一次迭代，还可以控制所有索引。例子：

```
{% for key, value in DictionaryResult.items %}
    <tr align="center">
    {% for project_data in value %}
        {% if  forloop.counter <= 13 %}  <!-- Here you can control the iteration-->
            {% if forloop.first %}
                <td bgcolor="Blue"><a href={{project_data}}><b> {{ project_data }} </b></a></td> <!-- it will always refer to project_data[0]-->
            {% else %}
                <td> {{ project_data }} </td> <!-- it will refer to all items in project_data[] except at index [0]-->
            {% endif %}
            {% endif %}
    {% endfor %}
    </tr>
{% endfor %} 
```

万一 ;）

// 希望已经涵盖了字典、列表、HTML 模板、For 循环、内循环、If Else 的解决方案。更多方法的 Django HTML 文档：[https ://docs.djangoproject.com/en/2.2/ref/templates/builtins/](https://docs.djangoproject.com/en/2.2/ref/templates/builtins/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-02T14:28:06.923

我想你可以像这样调用id

```
{% for days in days_list %}
    <h2># Day {{ days.id }} - From {{ days.from_location }} to {{ days.to_location }}</h2>
{% endfor %} 
```

# java - SQL 查询的问题

> ID：11481502
> 
> 赞同：1
> 
> 时间：2012-07-14T06:10:01.573
> 
> 标签：java, android, sql

我在使用 SQL 查询时遇到问题。问题是我正在查询企业名称的外部数据库，有些名称就像“玛莎”（包括撇号）。而且因为我是从一个 android 应用程序查询，查询字符串看起来像：

```
String query = "Select * from Advertiser where AdvName= '" + name + "';"; 
```

那么无论如何我可以忽略或更改查询中的撇号吗？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T06:14:59.890

这就是在执行参数化查询时应该始终使用准备好的语句的原因之一：

```
String sql = "select * from Advertiser where AdvName = ?";
PreparedStatement stmt = connection.prepareStatement(sql);
stmt.setString(1, name);
ResultSet rs = stmt.executeQuery(); 
```

JDBC 驱动程序将为您转义引号，这也将防止[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击。

当您必须多次执行相同的查询但使用不同的参数时，准备好的语句也具有性能优势。

[在JDBC 教程](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)中阅读有关预准备语句的更多信息。

旁注：您不应该`;`在查询末尾有 a 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T06:12:31.340

在 PLSQL 中，您应该在输入字段中使用 double `''`，意思是 Martha's => Martha's：

```
String query = "Select * from Advertiser where AdvName= 'Martha''s';"; 
```

**重要说明：**
出于安全目的（避免 sql 注入），您应该避免按照您的方式创建查询，最好使用准备好的语句并设置如下参数：

```
String query = "Select * from Advertiser where AdvName= ? ";
PreparedStatement  st   = conn.prepareStatement(query);
st.setString(1,name); 
```

# javascript - 诊断浏览器差异和问题的工具

> ID：11481505
> 
> 赞同：0
> 
> 时间：2012-07-14T06:10:35.910
> 
> 标签：javascript, html, css, firefox

有什么工具可以帮助发现例如 FF 渲染页面与 chrome ie 和 safari 不同的原因。我的问题只是主体左侧的图像仅在 FF 中被拉伸到页面的长度，而其他所有浏览器都可以完美呈现！

如果有人想看看区别

[http://tinyurl.com/7vkcvn5](http://tinyurl.com/7vkcvn5) 适用于除 FF 之外的所有内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T07:10:37.223

browserstack.com

和

勺子.net/浏览器

是我一直在使用的两个最好的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T06:15:57.613

有时我很幸运地通过验证器运行了一个显示怪癖的页面，只是为了检查没有错字或触发问题的东西。试试[http://validator.w3c.org/](http://validator.w3c.org/)。您的页面中有许多验证错误，因此可以解释渲染怪癖。（在我看来，有些人认为在某些情况下验证错误是可以的。我认为这并不是其中一种情况。）

可能无法回答您具体的对齐问题，但对于浏览器支持的差异，我通常会访问[http://quirksmode.org/](http://quirksmode.org/)和[http://caniuse.com/](http://caniuse.com/)。要找到修补浏览器差异的 polyfill，我通常会访问[http://html5please.com/](http://html5please.com/)。

# c++ - 将队列转换为堆栈？

> ID：11481509
> 
> 赞同：0
> 
> 时间：2012-07-14T06:11:45.930
> 
> 标签：c++, stack, queue

我有一个包含 n 个元素的队列，前面位于`0`. `0`我需要在顶部创建一堆这些数字。

它只能通过*EnQueue*、*DeQueue*、*Push*和*Pop*以及常量存储来完成。我不需要答案，而是想知道如何解决这个问题。

请不要为我回答这个问题，而只是尝试了解我是编程新手，并且可以使用一种可以完成的方法的想法。

*   这是一种类似河内塔的方法吗？
*   那只使用常量存储吗？

这不是家庭作业，我只需要一些关于如何进行的建议。我的第一个想法，反转队列然后推送它不起作用。我什至尝试勾勒出其他情况，但无济于事。然后我想知道是否将它们全部出列并推送，然后将它们全部弹出并入列，然后再次出列并推送。

*   这有效率吗？
*   这是否使用常量存储？

我仍在学习基本的编程概念。请友好一点！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T06:22:10.570

DeQueue 队列中的所有内容，立即将每个元素推送到 Stack。现在从 Stack 中弹出所有内容，立即 EnQueueing 到 Queue。现在队列中有什么？

假设您的 Queue 和 Stack 保存固定大小的项目，上述*ahem*子例程当然只使用恒定的额外存储：当每个项目从 Queue 传输到 Stack 时，只需要存储 1 个项目，反之亦然。

**编辑**：正如您所指出的，我的子程序反转了队列的内容。这样做之后，将队列再次排入堆栈以获得所需的结果是相当简单的。

而且，正如您所指出的，这需要传输`3n = O(n)`项目，`n`队列的初始大小在哪里。你能做得更好吗？我不这么认为，或者至少不是很明显。从某种意义上说，即使没有计数器（这会占用`O(log n) > O(1)`额外的存储空间），唯一合理的做法是将队列排入堆栈，反之亦然。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T06:32:16.023

### 我面临什么？

您面临的最大问题是您的两个容器彼此不直接兼容。

*队列*通常是 FIFO ¹容器，而*堆栈*是 LIFO ²。这意味着您不能仅将数据按顺序从*队列*复制到*堆栈*，因为这会使元素以*“错误”*的顺序出现（按照您的描述）。

另一个问题是没有好的方法（性能方面）来反转*队列*。*队列*是一个单向容器，在内部，一个元素只需要知道行中的下一个元素，而不是前一个元素。这意味着您不能从后面开始遍历*队列，并且该迭代始终为**O(n)*。

*你的stack*也有同样的问题。

> 前面描述的事情放在一起使这个问题变得相当乏味，尽管有一些解决方案它们并不总是最直接的。

* * *

### 有关如何解决此问题的提示..

您将需要某种中间状态来存储您的元素，或者我们可以使用容器的 LIFO/FIFO 属性来发挥我们的优势吗？

下面是一个实现您想要的实现，如果您不想知道问题的答案，请*不要*将鼠标悬停在这个灰色区域上。

它将需要一些额外的存储空间，因为在从一个容器复制到另一个容器期间将分配额外元素的空间。这是**不可避免**的，尽管存储空间是恒定的。

^(请记住，*复制初始化*可以通过使用*右值引用*进行优化，并在 C++11 中*移动。*)

> ^(*似乎无法在剧透中突出显示语法。*)
> 
> 示例实现可以在 [此处](http://ideone.com/A4ucq)找到。
> 
> 它利用*队列*是 FIFO 和*堆栈*LIFO 的事实，通过将数据*队列复制到堆栈*，然后*将堆栈复制到队列*，最后*再次排队到堆栈*，我们以符合您描述的方式有效地颠倒了元素的顺序。

* * *

^(**脚注**)^(^(1.)) ^(FIFO = 先进先出)^(^(2.)) ^(LIFO = 后进先出)

# configuration - 无法在伪模式下设置 Hadoop

> ID：11481510
> 
> 赞同：0
> 
> 时间：2012-07-14T06:11:53.107
> 
> 标签：configuration, hadoop

我已经在我的计算机上以伪分布式模式设置了 Hadoop。我按照“Hadoop - A Definitive Guide”一书附录 A 中的说明在伪分布式模式下设置 Hadoop。

但是，从以下程序的输出中，可以安全地推断出我的 Hadoop 正在运行到独立模式（即本地模式）。

```
public static void main(String[] args) {
    Configuration conf = new Configuration();
    System.out.println(conf);
    System.out.println(conf.get("fs.default.name"));
} 
```

输出：

```
Configuration: core-default.xml, core-site.xml
file:/// 
```

输出`file:///`代替`hdfs://localhost`. 但是，其中的属性`core-site.xml`已正确设置：

```
<configuration>
        <property>
                <name>fs.default.name</name>
                <value>hdfs://localhost/</value>
        </property>
</configuration> 
```

此外，当我从 Eclipse 提交测试作业时，它不会出现在 jobTracker 浏览器 UI 中，我在某处读到这是由于 Hadoop 以本地模式运行的事实。

请让我知道我的配置有什么问题以及如何启用伪分布式模式。为什么我不能`fs.default.name`用我在文件中指定的属性覆盖默认 XML 文件中的属性`core-site.xml`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T11:49:06.513

你是如何启动程序的？如果您不使用 bin/hadoop 脚本，则 conf/*.xml 中的配置文件将不在类路径中，因此其中的任何值都将被忽略。

您还应该使用 ToolRunner 启动器：

```
public class MyJobDriver extends Configured implements Tool {
  public static void main(String args[]) {
    ToolRunner.run(new MyJobDriver(), args);
  }

  public int run(String args[]) {
    Job job = new Job(getConf());
    Configuration conf = job.getConfiguration();

    System.out.println(conf);
    System.out.println(conf.get("fs.default.name"));

    return 0;
  }
} 
```

此代码中需要注意的其他一些要点：

*   请记住使用 getConf() 提供的配置创建您的作业 - 这允许您使用通用选项解析器来解析一些常见的命令行开关（-files、-jt、-fs、=Dkey=value 等）
*   如果您需要配置来设置一些自定义参数 - 使用 job.getConfiguration() 获取作业副本 - 因为 Job 在您构建它时会进行深层复制，并且在作业运行时不会应用对原始文件的任何更改

然后确保您的作业使用 bin/hadoop 脚本运行：

```
#> bin/hadoop MyApp.jar a.b.c.MyAppDriver 
```

如果您从 Eclipse 启动，请确保 $HADOOP_HOME/conf 文件夹位于类路径中，并且当 ToolRunner 创建配置对象时，将确保 xml conf 文件位于类路径中。

# php - strtr函数不起作用

> ID：11481511
> 
> 赞同：3
> 
> 时间：2012-07-14T06:12:14.347
> 
> 标签：php, replace, strtr

你好吗。希望好...

我面临以下代码的问题。该`strtr`功能不起作用。它不输出任何东西...

```
if ($translate == "DrChatrikWeb") {
$convertarray = array(
"~" => "~",
"!" => "!",
"@" => "@",
"#" => "#",
"$" => "$",
"%" => "%",
"^" => "^",
"&" => "&",
"*" => "*",
"(" => "(",
")" => ")",
"_" => "_",
"+" => "+",
"`" => "`",
"1" => "1",
"2" => "2",
"3" => "3",
"4" => "4",
"5" => "5",
"6" => "6",
"7" => "7",
"8" => "8",
"9" => "9",
"0" => "0",
"-" => "_",
"=" => "=",
"Q" => "ਥ",
"W" => "ੱ",
"E" => "ਓ",
"R" => "੍ਰ",
"T" => "ਠ",
"Y" => "ੈ",
"U" => "ੂ",
"I" => "ੀ",
"O" => "ੌ",
"P" => "ਫ",
"{" => "{",
"}" => "}",
"|" => "।",
"q" => "ਤ",
"w" => "ੱ",
"e" => "ੲ",
"r" => "ਰ",
"t" => "ਟ",
"y" => "ੇ",
"u" => "ੁ",
"i" => "ਿ",
"o" => "ੋ",
"p" => "ਪ",
"[" => ".",
"]" => "॥",
"\\" => "\\",
"A" => "ੳ",
"S" => "ੰ",
"D" => "ਧ",
"F" => "ਾਂ",
"G" => "ਘ",
"H" => "੍ਹ",
"J" => "ਝ",
"K" => "ਖ",
"L" => "਼",
":" => ":",
"\"" => "\"",
"a" => "ਅ",
"s" => "ਸ",
"d" => "ਦ",
"f" => "ਾ",
"g" => "ਗ",
"h" => "ਹ",
"j" => "ਜ",
"k" => "ਕ",
"l" => "ਲ",
";" => ";",
"'" => "'",
"Z" => "ਢ",
"X" => "ਯ",
"C" => "ਛ",
"V" => "ੜ",
"B" => "ਭ",
"N" => "ਂ",
"M" => "ੰ",
"" => ",",
">" => ">",
"?" => "?",
"z" => "ਡ",
"x" => "ਣ",
"c" => "ਚ",
"v" => "ਵ",
"b" => "ਬ",
"n" => "ਨ",
"m" => "ਮ",
"" => ",",
"." => "।",
"/" => "/",
"¡" => "ੴ",
"«" => "॥",
"¬" => "#",
"R" => "੍ਰ",
"•" => "•",
"»" => "।",
"Ã" => "ੴ",
"Å" => "ੴ",
"Ç" => "☬",
"È" => "ਸ਼",
"É" => "ਖ਼",
"Ê" => "ਗ਼",
"Ë" => "ਜ਼",
"Ì" => "ਫ਼",
"Î" => "੍ਯ",
"Ñ" => "#",
"Ò" => "॥",
"Ü" => "ਲ਼",
"ñ" => "੧",
"ò" => "੨",
"ó" => "੩",
"ô" => "੪",
"õ" => "੫",
"ö" => "੬",
"÷" => "੭",
"ø" => "੮",
"ù" => "੯",
"ú" => "੦",
"ƒ" => "ਨੂੰ",
"“" => "“",
"”" => "”",
"Í" => "੍ਵ",
);
$string = strtr($texttoreplace, $convertarray);
echo $string;
} 
```

该数组在旁遮普语中，即是一种印度语言......

# 这段代码运行良好......

```
$repp = array(
        "<br />" => " <br> ",
        " ," => " <punc>,</punc> ",
        " ." => " <punc>.</punc> ",
        " /" => " <punc>/</punc> ",
        " \\" => " <punc>\\</punc> ",
        " !" => " <punc>!</punc> ",
        " ?" => " <punc>?</punc> ",
        " :" => " <punc>:</punc> ",
        " ;" => " <punc>;</punc> ",
        " \"" => " <punc>\"</punc> ",
        " '" => " <punc>'</punc> ",
        " (" => " <punc>(</punc> ",
        " )" => " <punc>)</punc> ",
        " {" => " <punc>{</punc> ",
        " }" => " <punc>}</punc> ",
        " <" => " <punc><</punc> ",
        " >" => " <punc>></punc> ",
        " [" => " <punc>[</punc> ",
        " ]" => " <punc>]</punc> ",
        " &" => " <punc>&</punc> ",
        " $" => " <punc>$</punc> ",
        " @" => " <punc>@</punc> ",
        " #" => " <punc>#</punc> ",
        " %" => " <punc>%</punc> ",
        " ^" => " <punc>^</punc> ",
        " *" => " <punc>*</punc> ",
        " _" => " <punc>_</punc> ",
        " =" => " <punc>=</punc> ",
        " +" => " <punc>+</punc> ",
        " |" => " <punc>|</punc> ",
        " -" => " <punc>-</punc> ",
        "," => "<> <punc>,</punc> ",
        "." => "<> <punc>.</punc> ",
        "/" => "<> <punc>/</punc> ",
        "\\" => "<> <punc>\\</punc> ",
        "!" => "<> <punc>!</punc> ",
        "?" => "<> <punc>?</punc> ",
        ":" => "<> <punc>:</punc> ",
        ";" => "<> <punc>;</punc> ",
        "\"" => "<> <punc>\"</punc> ",
        "'" => "<> <punc>'</punc> ",
        "(" => "<> <punc>(</punc> ",
        ")" => "<> <punc>)</punc> ",
        "{" => "<> <punc>{</punc> ",
        "}" => "<> <punc>}</punc> ",
        "<" => "<> <punc><</punc> ",
        ">" => "<> <punc>></punc> ",
        "[" => "<> <punc>[</punc> ",
        "]" => "<> <punc>]</punc> ",
        "&" => "<> <punc>&</punc> ",
        "$" => "<> <punc>$</punc> ",
        "@" => "<> <punc>@</punc> ",
        "#" => "<> <punc>#</punc> ",
        "%" => "<> <punc>%</punc> ",
        "^" => "<> <punc>^</punc> ",
        "*" => "<> <punc>*</punc> ",
        "_" => "<> <punc>_</punc> ",
        "=" => "<> <punc>=</punc> ",
        "+" => "<> <punc>+</punc> ",
        "|" => "<> <punc>|</punc> ",
        "-" => "<> <punc>-</punc> "
    );
    $repps = strtr($texttoreplace, $repp);
    echo $repps; 
```

请帮忙..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T06:29:00.800

是这对导致问题，删除它并且它可以工作

```
"" => ",", 
```

正如手册所说：

**如果 replace_pairs 包含一个空字符串 ("") 的键，则将返回 FALSE。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T06:21:12.727

尝试这个：

```
$old_ch = array_keys($convertarray); 
$new_ch = array_values($convertarray); 
$string = str_replace($old_ch,$new_ch,$texttoreplace); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T06:17:27.717

来自[strstr](http://php.net/manual/en/function.strstr.php)函数手册页。

# 用法

```
string strstr ( string $haystack , mixed $needle [, bool $before_needle = false ] ) 
```

## 针

> 如果**needle**不是*字符串*，则将其**转换为整数**并用作字符的序数值。

读到这里，由于 your`$convertarray`不是字符串，因此尝试将其转换为整数值（失败，`strstr`不执行）。

# cordova - Sencha Touch 2 中的短信功能

> ID：11481512
> 
> 赞同：-1
> 
> 时间：2012-07-14T06:12:25.303
> 
> 标签：cordova, sencha-touch, extjs, sencha-touch-2

在我的 Sencha Touch 2 应用程序中，我有 SMS、电话、电子邮件功能。这些功能在 Android 中运行良好，我能够填充电话号码、电子邮件地址以及用户可见的正文内容。我已经在Phonegap中构建了它。除了在 iPad 中无法使用的 SMS 功能外，所有功能都可以正常工作。谁能告诉我为什么它不能在 iPad 上工作？iPad如何实现短信功能？

这是我的代码：

对于短信：

```
window.location = 'sms:' + '9035590355' + '?body=' + 'Hi hello'; 
```

对于电话：

```
window.location = 'tel:' + '9035590355'; 
```

对于电子邮件：

```
window.location = 'mailto:' + 'abcd@gmail.com' + '?subject=' + 'Update' + '&body=' + 'I sent you an email'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T09:04:21.490

我不认为 iPad 有 SMS 功能，即使是支持 3G 的机型...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T08:27:16.157

它不适用于 iOS，因为 sms:// url 方案不采用 iOS 的 body 参数。

请参阅[iPhone URL 方案](http://wiki.akosma.com/IPhone_URL_Schemes#SMS)

或者

请参阅[Apple Developer：iPhone URL 方案](http://developer.apple.com/library/ios/featuredarticles/iPhoneURLScheme_Reference/iPhoneURLScheme_Reference.pdf)

另外，我通常这样打开短信应用程序

```
window.location.href = 'sms://'; 
```

你能在iOS上试一试吗？

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-14T07:49:51.760

请试试这个

改变：

```
window.location = 'sms:' + '9035590355' + '?body=' + 'Hi hello'; 
```

至：

```
window.location.href('sms:9035590355?body=Hi hello') 
```

希望这可以帮助。;)

# xna - XNA 中的 Domino 2D 棋盘游戏

> ID：11481515
> 
> 赞同：-1
> 
> 时间：2012-07-14T06:13:21.373
> 
> 标签：xna, 2d

XNA 的新手。很想听听您对如何为我的 Domino 游戏设置课程的意见。到目前为止，我有一个“BonesSprite”类，其中包含第一个值、第二个值、方向、位置等字段。我在 LoadContent 方法上有代码，它为每个骨骼创建一个列表，如下面的代码所示。

```
 Background = Game.Content.Load<Texture2D>(@"Images\Wood"); 

//Load several different automated sprites into the list 
fichasList.Add(new Ficha(Game.Content.Load<Texture2D>(@"Images/46"), 
      10, Vector2.Zero, new Vector2(150, 150), 0, 0, true, true)); 
```

这就是我到目前为止所拥有的：http: [//i129.photobucket.com/albums/p239/itsshortforleo/Untitled-1copy.jpg](http://i129.photobucket.com/albums/p239/itsshortforleo/Untitled-1copy.jpg)

我还是想不出：

1.  如何为每个玩家处理 7 块骨头（我有一个空的 Player 类，我还不知道如何填充）
2.  如何将 7 个骨骼精灵放在棋盘上，以便只有玩家 1 可以看到他的骨骼，而其他玩家看不到
3.  如何单击一根骨头以在板上以正确的方向在另一根骨头旁边的确切位置上播放它
4.  当我将鼠标悬停在骨头上时如何突出显示它

在我开始设计课程之前，这个游戏对我来说似乎很简单。感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:59:42.440

只是一些想法供您考虑：

您可以简单地处理（1）和（2）。创建一个 Player 和 Bone 类。向骨骼添加一个字段“所有者”，以便您可以为其分配一个玩家。你没有写它是回合制的“热门座位”还是网络游戏，但是只要在循环中检查它们对应的“所有者”，你就会得到正确的骨骼来显示。这些是面向对象编程的基础知识，我建议您在开始游戏之前详细了解这些概念。它不会花费太多时间，但它会让你的生活更轻松。

(4) 首先考虑如何在点击时获得正确的骨骼识别。

正如其他人建议的那样，您也应该分开您的问题，（1）和（2）可以一起去，其他人不能。

# ruby-on-rails-3 - 在railscast之后保存相交表的麻烦

> ID：11481516
> 
> 赞同：1
> 
> 时间：2012-07-14T06:13:53.027
> 
> 标签：ruby-on-rails-3, nested-attributes, attr-accessor

我正在尝试创建此 railscast [http://railscasts.com/episodes/167-more-on-virtual-attributes?view=asciicast中概述的嵌套属性](http://railscasts.com/episodes/167-more-on-virtual-attributes?view=asciicast)

在我的示例中，我试图将活动与图像相关联，因此我的结构为`activity -> activity_image -> image`.

当我保存我的活动时，rails 会创建活动和图像，但我没有保存活动图像的相交表。当然，我从来没有真正告诉过 Rails 来保存它，但我关注的 railscast 也没有。

有什么方法应该在模型中定义吗？我做错了什么？

```
类 Activity > ActiveRecord::Base
    attr_accessible :title, :description, :activity_image_url

    属于_to：用户
    has_many :activity_images
    has_many :image_urls, :through => :activity_images

    #validates_presence_of :title, :description, :url

  attr_accessor :activity_image_url
  after_save :assign_image

  私人的
  def 分配图像
      如果@activity_image_url
          self.activity_image_url = ImageUrl.find_or_create_by_url(@activity_image_url)
      结尾
  结尾
结尾

```

# javascript - EJS 和 jquery 不加载 javascript 参考

> ID：11481518
> 
> 赞同：1
> 
> 时间：2012-07-14T06:14:15.927
> 
> 标签：javascript, jquery, node.js, ejs

这让我发疯。

我有一个带有 express 的节点应用程序。它提供了一个名为 index.ejs 的文件。

我想做的就是在这个页面上导入一个 javascript 文件（类似于 jquery）。但它不会把它拉起来，我要疯了（因为这应该很简单）。

在服务器端，我在一个名为 app.js 的文件中有此代码：

```
var express = require('express');
var app = express.createServer();
var hostName = (process.env.VCAP_APP_HOST || 'localhost');
app.listen( process.env.VCAP_APP_PORT ||  8000);
app.use(express.static(__dirname +  '/public/javascript/'));

//Create the view
app.set('views', __dirname + '/views');
app.set('view engine', 'ejs');
app.set('view options', { layout: false });
app.get('/', function(req, res){
    res.render('index.ejs', {
              item : "document.write('Hello World');"
    });
}); 
```

在 ejs 文件中，我有这个：

```
<html>
        <script>
        <%= item %>
    </script>

<a href="">Link</a>
<script type="text/javascript" src="/javascript/jquery.js"></script>
</html> 
```

我可以在控制台中看到脚本未加载（它显示错误）。但是对于我的生活，我无法弄清楚为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T06:22:49.007

您需要添加一个静态服务器来为您在“/”下的其他文件提供服务。目前，您的服务器只是响应发送到“/”（和视图）的请求。

将此行添加到您的快速设置之前`app.get`：

```
// DOCUMENT_ROOT should point to the directory that contains your javascript directory.
app.use(express.static(DOCUMENT_ROOT)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T06:50:30.723

当您的客户要求时`/javascript/jquery.js`，您的服务器将正在寻找`/public/javascript/javascript/jquery.js`，我很怀疑它会找到它。假设它`express.static()`实际上位于.`__dirname + '/public'``jquery.js``your_app/public/javascript`

# android - Android 项目重命名 - 现在不会启动

> ID：11481525
> 
> 赞同：0
> 
> 时间：2012-07-14T06:15:06.127
> 
> 标签：android, android-activity, launch

成功测试后，我尝试将我的项目/包从“测试...”重命名为更相关的名称。我尽可能使用各种 Eclipse 重构助手。现在，所有源文件的顶部似乎都有正确的包，清单似乎有正确的包名称等。我执行了“清理”。

一切似乎都很好。唯一的问题是它不会启动 - 甚至不会到达活动 onCreate() 处理程序。它在 AvtivityThread.performLaunchActivity(ActivityThread$ActivityRecord, Intent) 第 2417 行崩溃。

显然有些东西仍然有旧名称，但我找不到它。

有什么建议在哪里看/做什么？

根据要求：日志猫（控制台中没有任何内容）：

```
07-14 07:00:04.149: D/AndroidRuntime(347): >>>>>>>>>>>>>> AndroidRuntime START    <<<<<<<<<<<<<<<br>
07-14 07:00:04.149: D/AndroidRuntime(347): CheckJNI is ON<br>
07-14 07:00:04.389: D/AndroidRuntime(347): --- registering native functions ---<br>
07-14 07:00:04.830: D/ddm-heap(347): Got feature list request<br>
07-14 07:00:05.239: D/AndroidRuntime(347): Shutting down VM<br>
07-14 07:00:05.250: D/dalvikvm(347): DestroyJavaVM waiting for non-daemon threads to  exit<br>
07-14 07:00:05.250: D/dalvikvm(347): DestroyJavaVM shutting VM down<br>
07-14 07:00:05.250: D/dalvikvm(347): HeapWorker thread shutting down<br>
07-14 07:00:05.259: D/dalvikvm(347): HeapWorker thread has shut down<br>
07-14 07:00:05.259: D/jdwp(347): JDWP shutting down net...<br>
07-14 07:00:05.269: I/dalvikvm(347): Debugger has detached; object registry had 1 entries<br>
07-14 07:00:05.279: D/dalvikvm(347): VM cleaning up<br>
07-14 07:00:05.291: E/AndroidRuntime(347): ERROR: thread attach failed<br>
07-14 07:00:05.309: D/dalvikvm(347): LinearAlloc 0x0 used 629532 of 5242880 (12%)<br>
07-14 07:00:05.801: D/AndroidRuntime(355): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<<br>
07-14 07:00:05.809: D/AndroidRuntime(355): CheckJNI is ON<br>
07-14 07:00:06.049: D/AndroidRuntime(355): --- registering native functions ---<br>
07-14 07:00:06.490: D/ddm-heap(355): Got feature list request<br>
07-14 07:00:06.910: D/ActivityManager(52): Uninstalling process uk.co.nightshadearts.golfcaddy<br>
07-14 07:00:06.910: I/ActivityManager(52): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=uk.co.nightshadearts.golfcaddy/uk.co.nightshadearts.golfcaddy }<br>
07-14 07:00:06.969: D/AndroidRuntime(355): Shutting down VM<br>
07-14 07:00:06.969: D/dalvikvm(355): DestroyJavaVM waiting for non-daemon threads to exit<br>

07-14 07:00:07.009: E/AndroidRuntime(355): ERROR: thread attach failed<br>
07-14 07:00:07.009: D/dalvikvm(355): DestroyJavaVM shutting VM down<br>
07-14 07:00:07.009: D/dalvikvm(355): HeapWorker thread shutting down<br>
07-14 07:00:07.019: D/dalvikvm(355): HeapWorker thread has shut down<br>
07-14 07:00:07.019: D/jdwp(355): JDWP shutting down net...<br>
07-14 07:00:07.019: I/dalvikvm(355): Debugger has detached; object registry had 1 entries<br>
07-14 07:00:07.051: D/dalvikvm(355): VM cleaning up<br>
07-14 07:00:07.070: D/dalvikvm(355): LinearAlloc 0x0 used 639500 of 5242880 (12%)<br>
07-14 07:00:07.160: I/ActivityManager(52): Start proc uk.co.nightshadearts.golfcaddy for activity uk.co.nightshadearts.golfcaddy/uk.co.nightshadearts.golfcaddy: pid=362 uid=10031 gids={1015}<br>
07-14 07:00:07.309: D/ddm-heap(362): Got feature list request<br>
07-14 07:00:07.460: W/ActivityThread(362): Application uk.co.nightshadearts.golfcaddy is waiting for the debugger on port 8100...<br>
07-14 07:00:07.489: I/System.out(362): Sending WAIT chunk<br>
07-14 07:00:07.510: I/dalvikvm(362): Debugger is active<br>
07-14 07:00:07.750: I/System.out(362): Debugger has connected<br>
07-14 07:00:07.750: I/System.out(362): waiting for debugger to settle...<br>
07-14 07:00:07.951: I/System.out(362): waiting for debugger to settle...<br>
07-14 07:00:08.150: I/System.out(362): waiting for debugger to settle...<br>
07-14 07:00:08.350: I/System.out(362): waiting for debugger to settle...<br>
07-14 07:00:08.559: I/System.out(362): waiting for debugger to settle...<br>
07-14 07:00:08.759: I/System.out(362): waiting for debugger to settle...<br>
07-14 07:00:08.960: I/System.out(362): waiting for debugger to settle...<br>
07-14 07:00:09.187: I/System.out(362): waiting for debugger to settle...<br>
07-14 07:00:09.397: I/System.out(362): waiting for debugger to settle...<br>
07-14 07:00:09.609: I/System.out(362): waiting for debugger to settle...<br>
07-14 07:00:09.827: I/System.out(362): waiting for debugger to settle...<br>
07-14 07:00:10.039: I/System.out(362): waiting for debugger to settle...<br>
07-14 07:00:10.263: I/System.out(362): waiting for debugger to settle...<br>
07-14 07:00:10.479: I/System.out(362): debugger has settled (1449)<br>
07-14 07:00:10.681: E/gralloc(52): [unregister] handle 0x3fa718 still locked (state=40000001)<br>
07-14 07:00:17.029: W/ActivityManager(52): Launch timeout has expired, giving up wake lock!<br>
07-14 07:00:17.391: W/ActivityManager(52): Activity idle timeout for HistoryRecord{44f00a48 uk.co.nightshadearts.golfcaddy/uk.co.nightshadearts.golfcaddy}<br> 
```

来电：

```
GolfCaddy [Android Application]    
DalvikVM[localhost:8610]    
    Thread [<3> main] (Suspended (exception RuntimeException))    
        ActivityThread.performLaunchActivity(ActivityThread$ActivityRecord, Intent) line: 2417    
        ActivityThread.handleLaunchActivity(ActivityThread$ActivityRecord, Intent) line: 2512    
        ActivityThread.access$2200(ActivityThread, ActivityThread$ActivityRecord, Intent) line: 119    
        ActivityThread$H.handleMessage(Message) line: 1863    
        ActivityThread$H(Handler).dispatchMessage(Message) line: 99    
        Looper.loop() line: 123    
        ActivityThread.main(String[]) line: 4363    
        Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]    
        Method.invoke(Object, Object...) line: 521    
        ZygoteInit$MethodAndArgsCaller.run() line: 860    
        ZygoteInit.main(String[]) line: 618    
        NativeStart.main(String[]) line: not available [native method]    
    Thread [<13> Binder Thread #2] (Running)    
    Thread [<11> Binder Thread #1] (Running) 
```

回答：

实际上，我似乎已经解决了它，虽然我真的不知道我修复了什么。

在包重命名后，应用程序上的 nalextsc 的说明[将无法安装，](https://stackoverflow.com/questions/8624324/app-wont-install-after-package-rename)我执行了以下操作：

完全转储了错误的项目（删除了项目和文件树） - 幸运的是，我有常识，在我做任何事情之前已经复制了原件。

将原件复制回“工作台”下。

使用从现有源创建选项添加了一个新项目（原始名称）。

这让它恢复正常工作。

然后 rt clk on project 并选择 Android Tools >> Rename application package，让它做它想做的一切。

但是，在 src 下，包仍然具有旧名称。使用 Eclipse 重构以更改为新名称。

似乎仍然有效。所有 src 文件也有正确的包。

重命名（一个）活动 - 仍然有效。在那之后，只是在 XML 应用程序名称中添加了更多的内部代码修改。

结论：Android工具>>重命名应用程序包做了一些事情，但我不知道是什么。

道德：选择一个名字并在未来坚持下去。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T06:24:09.397

将清单中的包名称更改为

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
     package="com.org.xxx" // your packagename here..
    >
  </manifest> 
```

更改此 R.java 后将在新包下再次创建，然后您必须在所有活动中导入 R..

试试这个，它可能对你有帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T06:26:45.420

这就是我所做的。

在 Eclipse 项目“src”文件夹中，您将拥有一个名为“com.test...”的文件，将其重命名为新名称并单击 OK。然后所有文件都应该自动更新。至少它对我来说非常有效。

请记住，您还必须在 Android Manifest 中更改它。

# ruby-on-rails - 在 Rails 控制器上调用 create 方法会返回所有行

> ID：11481532
> 
> 赞同：0
> 
> 时间：2012-07-14T06:16:39.323
> 
> 标签：ruby-on-rails

我想调用 Rails 控制器的“create”方法来插入新记录。

调用`http://localhost:3000/books.json`using`HTTP POST`调用该`books#create`方法，并允许我插入一本新书。

这工作正常，但 JSON 响应返回数据库中存在的所有书籍。似乎`books#create`以某种方式调用也会调用`books#index`.

如何将 JSON 输出限制`books#create`为仅*最后插入的记录*而不是所有记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:53:26.203

成功创建记录后，您可以将其重定向到显示带有 id 的记录的页面，或者您可以有条件地调整索引方法，这意味着如果您将 id 传递给索引，它将仅显示该记录，否则显示所有可用记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T09:13:35.617

您可能正在使用 GET 请求调用路由。

尝试`curl -d '' http://localhost:3000/books.json`发出 POST 请求

如果这不起作用，则粘贴输出`rake routes`和`BooksController#create`操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T18:07:04.170

在路由中，您应该为 json 请求指定

```
resources :books , :format => 'json' 
```

# matlab - 是否可以创建不需要 Microsoft Visual C++ 运行时库的 win64 MEX 文件

> ID：11481538
> 
> 赞同：1
> 
> 时间：2012-07-14T06:17:30.950
> 
> 标签：matlab, visual-c++, mex, matlab-deployment, compiled

我正在尝试查看是否可以分发 MEX 文件，而无需最终用户安装 C++ 运行时库。当您使用 visual 2010 express 创建 MEX 时，Matlab 会发出以下警告：

* * *

警告：使用 Microsoft Visual C++
2010 生成的应用程序/组件要求 Microsoft Visual Studio 2010 运行时
库在用于部署的计算机上可用。
要重新分发您的应用程序/组件，请确保
部署机器具有这些运行时库。

* * *

是否有不需要在终端机器上安装运行时库的编译器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T10:00:33.990

是的，有：[MinGW(-w64) GCC](http://mingw-w64.sourceforge.net/)。它只链接到操作系统库 msvcrt.dll（当您使用该`-static`选项链接时），它不需要安装并且是 Windows 的一部分。

要让 Matlab 使用它，您需要跳过一些障碍。[这是一些信息](http://gnumex.sourceforge.net/)。忽略 Cygwin 的东西，并确保使用上面链接中针对 x64 Windows 的 MinGW-w64 工具链。注意我没有亲自测试过，但这是你最好的选择。Mathworks 也不支持它，因此您只能靠自己。

顺便说一句，安装[MSVC++2010 可再发行](http://www.microsoft.com/en-us/download/details.aspx?id=13523)组件有什么问题？对许可没有影响，运行 MEX 代码意味着安装了 Matlab。恕我直言，再安装一件小东西不会那么麻烦。

# javascript - Underscorejs 和 gettext 名称冲突

> ID：11481545
> 
> 赞同：0
> 
> 时间：2012-07-14T06:18:50.853
> 
> 标签：javascript, underscore.js, gettext

你如何为 _("") 混合 underscorejs 和 gettext？

你认为给 gettext 另一个函数名或重命名 underscorejs 更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T06:53:46.237

可以使用[Underscore 的`noConflict`](http://underscorejs.org/#noConflict)方法，例如：

```
// gettext is already loaded here,
// so _ variable points to Gettext instance

var underscore = _.noConflict(); 
```

`underscore`现在您可以从变量访问下划线的方法和从 .gettext 访问`_`。

**UPD：**对不起，误会了。就个人而言，我认为应该`_`为下划线保留并`gt`用于 Gettext。其背后的原因是使用下划线并将其视`_`​​为 JS 开发人员似乎更常见。

# java - 在java构造函数中提取日期

> ID：11481547
> 
> 赞同：0
> 
> 时间：2012-07-14T06:19:28.167
> 
> 标签：java, constructor

我需要从接收字符串变量的构造函数中验证日期 mm/dd。我尝试了几种方法都没有运气。最后我尝试将字符串转换为 ascii 并以这种方式验证，但也不起作用：

```
public Dated(String dateStr)
{
 this.dateStr = dateStr;
 for (int i = 0; i < dateStr.length(); i++)
 {
  char c = dateStr.charAt(i);
  asciiValues = (int) c;      // change each string character to ASCII value

 }

}

public void display()
{
    System.out.println(asciiValues);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T07:05:24.277

据我所知，您在解析字符串值时遇到了麻烦。正确的。

在 java 中，我们有很多可用的工具来验证这些事情。

我将使用`SimpleDateFormat`可以验证日期并将其转换为的实用程序`Date`类`String`

```
public class Dated{

  private SimpleDateFormat sdf = new SimpleDateFormat("MM/dd") // M --> Month; d--> Day

  public Dated(String dateStr) throws Exception{
    try{
      Date d = sdf.parse(dateStr);
      System.out.println( d );
    } catch (ParseException e) {
      // you can throw that exception just to 
      // avoid creating the object of this class
      throw e;
    }
  }
} 
```

但请记住，您没有验证闰年的日期，如`@JB Nizet`. 您也可以通过验证年份来克服这个问题。

在上面的代码中，如果您通过“02/29”，您将获得 3 月 1 日的日期。这是不正确的日期，因为 1970 年不是闰年。

所以我也会在我的日期验证中包含年份。

要添加年份，您可以将 SimpleDateFormat 更改如下。

```
private SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy"); // y --> Year 
```

# java - java中可克隆接口的用途是什么？

> ID：11481552
> 
> 赞同：7
> 
> 时间：2012-07-14T06:20:03.937
> 
> 标签：java, clone

实现可克隆接口有什么用，因为它是标记接口？

我总是可以在我的类中创建一个公共 Object clone() 方法。可克隆接口的实际目的是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-14T06:21:42.570

那是因为`clone()`如果`CloneNotSupportedException`您的对象不是`Cloneable`.

您应该查看方法的[文档`clone()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#clone%28%29)。

以下是`clone()`在类中声明方法的方式`Object`：

```
protected Object clone() throws CloneNotSupportedException 
```

笔记：

此外，它已经意识到它`Clone`被打破了。[SO中的这个答案](https://stackoverflow.com/a/2326801/738746)解释了为什么以及如何避免使用它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-14T06:22:14.053

制作`Cloneable`标记界面是一个错误。

也就是说，它所做的一件事是“启用” `clone()`in的默认实现`Object`。如果你不这样做，`implement Cloneable`那么调用`super.clone()`将抛出一个`CloneNotSupportedException`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-14T06:23:11.893

有人说这是从 C++ 中模仿复制构造函数的尝试，但这是 StackOverflow 上关于它的先前类似问题：[About Java cloneable](https://stackoverflow.com/questions/4081858/about-java-cloneable)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-14T06:23:14.783

目的在[javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/Cloneable.html)中指定。它是指定允许克隆这种类型的对象。

`clone()`如果您的类依赖于（由方法提供）的内置实现`Object.clone()`，则此标记接口*启用*逐字段克隆。（如果你在一个没有实现的对象上调用内置的 clone 方法`Cloneable`，你会得到一个`CloneNotSupportedException`。）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-14T06:28:15.963

clone() 方法的目的是创建调用它的对象的新实例（副本）。正如您在使用克隆方法的答案中看到的那样，您的类应该实现 Cloneable 接口。你可以选择如何实现 clone ，你可以为你的班级做浅拷贝或深拷贝。您可以查看示例[http://javapapers.com/core-java/java-clone-shallow-copy-and-deep-copy/](http://javapapers.com/core-java/java-clone-shallow-copy-and-deep-copy/)。

# php - 阻止直接访问 PHP 文件，只允许本地 javascript 访问它

> ID：11481555
> 
> 赞同：0
> 
> 时间：2012-07-14T06:20:22.553
> 
> 标签：php, header

我需要一种方法来阻止对 php 文件的所有访问，但允许向其发送 xmlhttp 请求的 javascript 文件。该 js 文件托管在我的服务器上，并且必须保留在我的服务器上才能正常工作

我有以下

```
header('Access-Control-Allow-Origin: *'); 
```

但这允许任何人访问它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T06:35:06.163

好吧，我认为这是不可能的。任何人都可以向您的服务器发出请求，但您的服务器会选择响应谁以及如何响应请求。现在，如果您只希望服务器响应您的 JS，那么您必须在从 JS 发出 HTTP 请求时通知服务器。如果不暴露您的 Javascript 文件的身份，则无法做到这一点，在此基础上您的 JS 可以被服务器识别。但是任何人都可以打开您的 JS 并阅读它并弄清楚您是如何提出请求并使用相同的东西。

一种可能的解决方案是，使用 header('Access-Control-Allow-Origin: *') 允许每个人向您的服务器发出请求，但在服务器端，在您的数据库中保留允许的域/来源列表可能使用或将要在其网站上使用您的 JS 文件的服务器。根据您获得的 AJAX 请求，您从数据库中检查是否允许请求的来源并做出相应的响应。现在，如果有人试图通过您的 JS 以外的任何其他方式请求您的 PHP 文件，则根据您数据库中的数据，您可以拒绝该请求或接受该请求。如果允许的用户/网站这样做，那么他们将故意弄乱自己的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T06:24:57.267

试试这个：

```
if (empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) <> 'xmlhttprequest') 
{ 
    die('direct access is not allowed'); 
} 
```

此外，您始终可以检查诸如 $_SERVER['HTTP_REFERER'] 之类的引荐来源网址，以确保只有您域中的脚本才能访问它。

# php - 通过发送 SOAP 请求实现 Air API

> ID：11481557
> 
> 赞同：3
> 
> 时间：2012-07-14T06:20:48.327
> 
> 标签：php, xml

我有一个 php 网站。这里我需要实现机票搜索和预订功能。为了做到这一点，我使用了来自 ARZOO 网站的付费 API……我从 ARZOO 获得了所有文档。我已经阅读了整个文档。医生说

```
"Accessing this service requires standard SOAP client. SOAP client should authenticate
itself through user name and password. Client should get their IPs registered with
Arzoo and get a user account created. The Arzoo web service provides a service
point URL. Web service clients should post SOAP request message as an attachment
for the desired response. The XML structure of different web services is discussed in
the respective documents." 
You can connect to Arzoo XML services with the following test service point URLs:-

FlightAvailability:http://<url>/DOMFlightAvailability?wsdl 
```

我认为需要通过肥皂发送请求是吗？但在空气可用性包含

```
Example Request Xml
<Request>
<Origin>BOM</Origin>
.............
.............
</Request> 
```

我使用了以下代码

```
$post_string.="<Request>";
$post_string.="<Origin>$from</Origin><Destination>$to</Destination>";
........
......

$post_string.="</Request>";
$path = ":http://<url>/DOMFlightAvailability?wsdl"; 

$ch = curl_init($path); 
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_string); //Send the data to the file
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers); 
$val = curl_exec($ch);
 $headers = curl_getinfo($ch);
 $errr=curl_error($ch); 
```

但它没有给出任何结果。文件说

```
RESPONSE XML:-
The response will be in <arzoo_response> </arzoo_response>. This contains the Request
also. 
```

我不知道肥皂。

我完全失望了。请帮我。我想我会在发布请求后得到一个 xml 响应。但是我将如何发布我的数据？

请回复

非常感谢，如果有人帮助我，非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-02-02T09:38:39.480

我在使用 SOAP CLIENT 时也遇到错误，但是当我使用 nusoap 时，它们会给我结果..如果您遇到 ip/password mismatch 之类的错误，则使用此代码，然后您将调用 arzoo 来验证您的 clientid 和 clientpassword

```
 <?php
  ini_set('max_execution_time','180');
    include 'lib/nusoap.php';
   $location_URL ='http://avail.flight.arzoo.com';
   $action_URL ='http://demo.arzoo.com/ArzooWS/services/DOMFlightAvailability?wsdl';
$Request = '<Request>
<Origin>BOM</Origin>
<Destination>DEL</Destination>
<DepartDate>2017-02-02</DepartDate>
<ReturnDate>2017-02-02</ReturnDate>
<AdultPax>1</AdultPax>
<ChildPax>0</ChildPax>
<InfantPax>0</InfantPax>
<Currency>INR</Currency>
<Clientid>Given by Arzoo.com</Clientid>
<Clientpassword>Given by Arzoo.com</Clientpassword>
<Clienttype>ArzooFWS1.1</Clienttype>
<Preferredclass>E</Preferredclass>
<mode>ONE</mode>
<PreferredAirline>AI</PreferredAirline>
</Request>';

$clientinfo = array('soap_version'=>SOAP_1_1,
'location' =>$location_URL,
'uri' =>$action_URL,
 'style' => SOAP_RPC,
 'use' => SOAP_ENCODED,
 'trace' => 1,
 );

 $client = new nusoap_client('http://demo.arzoo.com/ArzooWS/services/DOMFlightAvailability?wsdl', $clientinfo);
//print_r($client);
$result = $client->call('getAvailability', array($Request));
echo"<pre>";
print_r($result);
$clientInfo =simplexml_load_string(utf8_encode($result));
$flight = $clientInfo->Response__Depart->OriginDestinationOptions->OriginDestinationOption;
$error =$clientInfo->error__tag;
//echo $error;
var_dump($flight);
//exit;
//echo"<pre>";
//print_r($result);
//ECHO $error;
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-15T18:26:45.437

由于提到了它们，`standard SOAP client`并且您将 cURL 请求发送到永远不会给出任何响应的服务器。

```
$location_URL = "http://xx.xxx.xx.xxx/ArzooWS/services/DOMFlightAvailability";
$action_URL ="http://com.arzoo.flight.avail";

$client = new SoapClient('http://xx.xxx.xx.xxx/ArzooWS/services/DOMFlightAvailability?wsdl', array(
'soap_version' => SOAP_1_1,
'location' => $location_URL,
'uri'      => $action_URL,
'style'    => SOAP_RPC,
'use'      => SOAP_ENCODED,
'trace'    => 1,
));

try
{
    $result = $client->__call('getAvailability',array($req_int));
    $response= htmlentities($result);
} 
```

您可以使用 SOAP1.1 请求。

# android - 在 android 上使用 g-mail OAUTH 以编程方式发送带有附件的电子邮件

> ID：11481562
> 
> 赞同：0
> 
> 时间：2012-07-14T06:21:25.410
> 
> 标签：android, email

我希望我的 android 应用程序以编程方式向用户发送电子邮件。我从使用客户经理的用户那里获得了用户名和 OAUTH 信息。我不想弹出 gmail 客户端来发送电子邮件。

是否有用于执行此操作的开源库？

# ruby-on-rails - Ruby on Rails：rb_class_superclass 不在 msvcrt-ruby191.dll 中（ruby-prof 错误？）

> ID：11481563
> 
> 赞同：0
> 
> 时间：2012-07-14T06:21:28.640
> 
> 标签：ruby-on-rails, rake, bundler, rake-task, ruby-prof

所以，长话短说，我格式化并重新安装了我的操作系统，因此我的所有开发实用程序。git env 排序。DevKit 很好。狮身人面像/mysql 很好。捆绑安装完美。在我去 rake db:create 并构建我的数据库之前，一切都是肉汁。

环境：操作系统：Win7 64位Ruby192 gem -v 1.8.24 rails 3.1.3

现在的问题是，当我耙任何东西时，我会弹出一个窗口

```
ruby.exe - Entry Point Not Found

The procedure entry point rb_class_superclass could not be located in the dynamic link library msvcrt-ruby191.dll 
```

我试过干净安装 ruby​​，清除 gems 并重新安装。坚持下一步该做什么。

跟踪输出：

```
rake aborted!
no such file to load -- ruby/prof
C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler/runtime.rb:74:in `require'
C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler/runtime.rb:74:in `rescue in block in require'
C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler/runtime.rb:62:in `block in require'
C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler/runtime.rb:55:in `each'
C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler/runtime.rb:55:in `require'
C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler.rb:119:in `require'
E:/Documents/Websites/rails-app /trunk/config/application.rb:7:in `<top (required)>'
C:/Ruby192/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
C:/Ruby192/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
E:/Documents/Websites/rails-app/trunk/Rakefile:4:in `<top (required)>'
C:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25:in `load'
C:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25:in `load_rakefile'
C:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:501:in `raw_load_rakefile'
C:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:82:in `block in load_rakefile'
C:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
C:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:81:in `load_rakefile'
C:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:65:in `block in run'
C:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
C:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
C:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
C:/Ruby192/bin/rake:23:in `load'
C:/Ruby192/bin/rake:23:in `<main>' 
```

我已经看到了类似的问题，但针对 dll 中的不同行并与 sqlite3 相关。我根本没有使用 sqlite3。我在使用 mysql2 连接器的 mysql 上。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T07:57:56.200

我想我想通了。

在我替换的gemfile中：

```
gem "ruby-prof" 
```

和：

```
gem "ruby-prof", "0.10.8" 
```

突然之间，我开始讨论下一个问题，即指定我的 rake 版本。我认为这两个问题都与宝石和我的 ruby​​gems 版本之间的不兼容有关（我猜？？）。这是我在笔记本电脑环境、桌面环境和生产服务器之间看到的唯一区别。

无论哪种方式。排序！

# c - 为什么这个 C 程序在 while 循环之后不起作用？

> ID：11481564
> 
> 赞同：0
> 
> 时间：2012-07-14T06:21:40.743
> 
> 标签：c

我正在编写一个模拟[Monty Hall 问题](http://en.wikipedia.org/wiki/Monty_Hall_problem)的命令行 C 程序，但是我在代码的特定部分遇到问题，该程序只是提示用户输入他们想要打开的门的数字，它得到输入并确保它是有效的：

```
printf("Please enter the door you would like to choose! (Door 1, 2 or 3)\n\nDoor ");

char init_input[255];

int selection;
int valid_input = 0;
while(valid_input == 0)
{   
    gets(init_input);
    int len = strlen(init_input);
    while(len != 1)
    {
        printf("Please choose either door 1, 2 or 3\n\n");
        printf("Door ");
        gets(init_input);
        len = strlen(init_input);
    }
    int valid_input = 0;
    char input = init_input[0];
    switch(input)
    {
        case('1'):
        {
            selection = 1;
            valid_input = 1;
            printf("Door 1\n");
            break;
        }
        case('2'):
        {
            selection = 2;
            valid_input = 1;
            printf("Door 2\n");
            break;

        }
        case('3'):
        {
            selection = 3;
            valid_input = 1;
            printf("Door 3\n");
            break;

        }
        default:
        {
            printf("\nPlease choose either door 1, 2 or 3\n\nDoor ");
            break;
        }
    }
}

printf("\nYou chose Door %d, now I will reveal one of the doors that has a goat behind it:\n\n", selection); 
```

该程序运行良好，直到您输入任何有效的门号：1、2 或 3，它不会崩溃，但不会在 while 循环后打印所需的输出并继续执行程序。但是，当我输入一个有效数字时，会打印所选门的名称，这表明它与 switch 语句没有任何关系。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T06:38:20.623

您正在循环范围`valid_input`内进行遮蔽：`while`

```
int valid_input = 0;
while (valid_input == 0) {
    // ...
    int valid_input = 0;     // remove this
} 
```

当您在循环中写入或读取时`valid_input`，您正在从循环中声明的那个读取，而不是在它之外。所以，`valid_input`你的循环检查实际上永远不会改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T06:31:45.430

如果你想编程，你绝对应该学习使用调试器。如今，大多数编译器都有一个相当不错的编译器。单步执行您的代码。您应该能够确定哪里出错了。你可能还会学到一些关于你的代码的其他意想不到的东西。

我不能立即明白为什么在输入有效门号的情况下循环不会退出。但是，话又说回来，我不能 100% 确定到底在哪里看。

（顺便说一句，我已经创建了“蒙蒂霍尔问题”的测试程序。这是真的，原因如下：通过揭示其中一扇门，您将获得有关您没有选择的门的额外信息。但是，因为它们永远不会揭示您最初选择的门，您对那扇门一无所知。通过切换，您的获胜几率变为 1/2 而不是 1/3。）

# linux - linux opencv VideoCapture没有打开视频文件

> ID：11481566
> 
> 赞同：0
> 
> 时间：2012-07-14T06:21:44.300
> 
> 标签：linux, opencv, video-capture

我正在尝试打开视频文件 qith 视频捕获。我在VS10上编译过，没问题。但是当我在 linux (ubuntu 11.10) 上编译它并尝试运行它时，它没有打开文件，也没有给出任何错误或警告。

这是代码：

```
int main(int argc, char** argv)
{

if (argc < 2)
{
        std::cout << "Usage: " << argv[0] << " <input.avi>" << std::endl;
        exit(1);
    }

//  Video Capture:
VideoCapture capture(argv[1]);
if(!capture.isOpened())
{
    printf("Failed to open %s\nExiting ...\n",argv[1]);
    exit (1);
}

return 0;
} 
```

它总是输出“归档打开”。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T09:03:20.307

即使我有同样的问题。我没有正确配置ffmpeg。看看这个问题

[VideoCapture 在 OpenCV 2.4.2 中不起作用](https://stackoverflow.com/questions/11444926/videocapture-is-not-working-in-opencv-2-4-2/11465097#11465097)

您需要正确配置 ffmpeg。

对于 ffmpeg，

```
 ./configure --enable-gpl --enable-libfaac --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libtheora --enable-libvorbis --enable-libx264 --enable-libxvid --enable-nonfree --enable-postproc --enable-version3 --enable-x11grab 
make 
sudo make install 
```

# android - 启动时动态壁纸崩溃

> ID：11481568
> 
> 赞同：0
> 
> 时间：2012-07-14T06:21:58.767
> 
> 标签：android, live-wallpaper

我遵循了一个关于动态壁纸的教程，并且看到了其他开发人员在上面编写的代码，并且大多数都比我使用相同的代码更进一步。我只想显示带有一系列图像的动态壁纸，但它在启动时崩溃。这是我的带有堆栈跟踪和清单的代码。我需要为此设置一个xml布局吗？

```
package com.warzone.livewallpaper;

import android.os.Handler;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.view.SurfaceHolder;
import android.service.wallpaper.WallpaperService;

public class LiveActivity extends WallpaperService {

public void onCreate() {
    super.onCreate();
}

public void onDestroy() {
    super.onDestroy();
}

public Engine onCreateEngine() {
    return new WarEngine();
}

class WarEngine extends Engine {

    private final Handler handler = new Handler();
    private final Runnable drawRunner = new Runnable() {
        @Override
        public void run() {
            draw();
        }
    };
    private boolean visible = true;
    public Bitmap image1, image2, image3;

    WarEngine() {
        image1 = BitmapFactory.decodeResource(getResources(),
                R.drawable.wz0351);
        image2 = BitmapFactory.decodeResource(getResources(),
                R.drawable.wz0375);
        image3 = BitmapFactory.decodeResource(getResources(),
                R.drawable.wz0391);
    }

    public void onCreate(SurfaceHolder surfaceHolder) {
        super.onCreate(surfaceHolder);
    }

    @Override
    public void onVisibilityChanged(boolean visible) {
        this.visible = visible;
        if (visible) {
            handler.post(drawRunner);
        } else {
            handler.removeCallbacks(drawRunner);
        }
    }

    @Override
    public void onSurfaceDestroyed(SurfaceHolder holder) {
        super.onSurfaceDestroyed(holder);
        this.visible = false;
        handler.removeCallbacks(drawRunner);
    }

    public void onOffsetsChanged(float xOffset, float yOffset, float xStep,
            float yStep, int xPixels, int yPixels) {
        draw();
    }

    void draw() {
        final SurfaceHolder holder = getSurfaceHolder();

        Canvas c = null;
        try {
            c = holder.lockCanvas();
            if (c != null) {
                c.drawBitmap(image1, 0, 0, null);
                c.drawBitmap(image2, 0, 0, null);
                c.drawBitmap(image3, 0, 0, null);
            }
        } finally {
            if (c != null)
                holder.unlockCanvasAndPost(c);
        }

        handler.removeCallbacks(drawRunner);
        if (visible) 
        {
           handler.postDelayed(drawRunner, 1000); // delay 1 sec
        }

    }
} 
```

}

```
*07-14 02:10:50.524: E/AndroidRuntime(622): FATAL EXCEPTION: main
*07-14 02:10:50.524: E/AndroidRuntime(622): java.lang.RuntimeException: Unable to                                                                                                     instantiate activity ComponentInfo{com.warzone.livewallpaper/com.warzone.livewallpaper.LiveActivity}:java.lang.ClassCastException: com.warzone.livewallpaper.LiveActivity cannot be cast to android.app.Activity
*07-14 02:10:50.524: E/AndroidRuntime(622): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
*07-14 02:10:50.524: E/AndroidRuntime(622): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
*07-14 02:10:50.524: E/AndroidRuntime(622): at android.app.ActivityThread.access$600(ActivityThread.java:130)
*07-14 02:10:50.524: E/AndroidRuntime(622): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
*07-14 02:10:50.524: E/AndroidRuntime(622): at android.os.Handler.dispatchMessage(Handler.java:99)
*07-14 02:10:50.524: E/AndroidRuntime(622): at android.os.Looper.loop(Looper.java:137)
*07-14 02:10:50.524: E/AndroidRuntime(622): at android.app.ActivityThread.main(ActivityThread.java:4745)
*07-14 02:10:50.524: E/AndroidRuntime(622): at java.lang.reflect.Method.invokeNative(Native Method)
*07-14 02:10:50.524: E/AndroidRuntime(622): at java.lang.reflect.Method.invoke(Method.java:511)
*07-14 02:10:50.524: E/AndroidRuntime(622): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
*07-14 02:10:50.524: E/AndroidRuntime(622): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
*07-14 02:10:50.524: E/AndroidRuntime(622): at dalvik.system.NativeStart.main(NativeMethod)
*07-14 02:10:50.524: E/AndroidRuntime(622): Caused by: java.lang.ClassCastException: com.warzone.livewallpaper.LiveActivity cannot be cast to android.app.Activity
*07-14 02:10:50.524: E/AndroidRuntime(622): at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
*07-14 02:10:50.524: E/AndroidRuntime(622): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
*07-14 02:10:50.524: E/AndroidRuntime(622):     ... 11 more 
```

我的清单文件

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.warzone.livewallpaper"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".LiveActivity"
            android:label="@string/title_activity_live" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

这是布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:padding="@dimen/padding_medium"
    android:text="@string/hello_world"
    tools:context=".LiveActivity" /> 
```

我注意到 ClassCastException 但我不知道如何解决它。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T02:19:17.123

这里的问题是您的 LiveActivity 类不能作为 android 应用程序启动，因为它派生自 WallpaperService 而不是 Activity。
您可以在 android 开发者网站上获得有关服务和活动的更多信息。
[http://developer.android.com/](http://developer.android.com/)

我自己一直在网上学习教程，以下教程对我有用：http:
[//learnandroideasily.blogspot.kr/2013/07/android-livewallpaer-tutorial.html](http://learnandroideasily.blogspot.kr/2013/07/android-livewallpaer-tutorial.html)

# r - 通过具有不同 pch 值的条形图可视化数据（在列中）

> ID：11481576
> 
> 赞同：2
> 
> 时间：2012-07-14T06:22:36.363
> 
> 标签：r

可能很简单。但我不知道如何使用 R 绘制以下数据。基本上 x 轴具有类型（即*A、B、C、D*四个标签）。在图上，我想将数字（v1、v2、v3、v4）表示为点。例如，对于 A，在 y 轴上我想指向 99、110、150 和 170。此外，我需要为点使用不同的 pch 值。我尝试使用条形图，但我不确定如何在 A、B、C、D 类型下分配不同的 pch 值。请参见下图中 A 的点（99、110、150、170）。

```
Data:
  type A    B   C   D
  v1  99    227 295 503      
  v2  110   440 620 970
  v3  150   600 934 1330
  v4  170   650 1012 1390 
```

![在此处输入图像描述](../Images/e4aa6d5bfb5d07e7576e882f939c5e97.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T06:30:17.583

你在寻找这样的东西吗？

```
df = read.table(header=TRUE, text="type A    B   C   D
 v1  99    227 295 503      
 v2  110   440 620 970
 v3  150   600 934 1330
 v4  170   650 1012 1390")
stripchart(df[-1], pch=c(1, 2, 3, 4), vertical=TRUE) 
```

导致：

![在此处输入图像描述](../Images/e2f4822858134e09eb4a48c9a8e7c04a.png)

# 更新

对不起，我看错了第一个问题。试试这个：

```
df2 = data.frame(t(df[-1]))
names(df2) = df$type
df2$group = rownames(df2)
library(lattice)
stripplot(v1 + v2 + v3 + v4 ~ group, data=df2, pch=c(1, 2, 3, 4)) 
```

![在此处输入图像描述](../Images/f866caf7c9b9c7d9f56b156d405ef83e.png)

# java - 如何在play 2.0框架应用中根据性别和年龄显示头像？

> ID：11481577
> 
> 赞同：-4
> 
> 时间：2012-07-14T06:22:43.593
> 
> 标签：java, playframework, playframework-2.0

我正在用 java 开发一个 play 2.0 框架应用程序。我想根据他们的性别和年龄显示默认的个人资料图片，例如男人或女人或男孩或女孩的图片作为默认图片（如 Facebook 等）。

我将如何根据用户的属性为图像生成不同的 URL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T06:31:35.507

在您的用户模型中，有一个方法

```
public String getProfilePictureURL() {
    if ("male".equals(gender) && age >= 18) return "url for man image";
    else if ("male".equals(gender) && age < 18) return "url for boy image";    
    else if ("female".equals(gender) && age >= 18) return "url for woman image";
    else if ("female".equals(gender) && age > 18) return "url for girl image";
    else return null;
} 
```

我假设您的 User 模型类中有`gender`和`age`属性。确保输入正确

那么，在你看来，你可以说

```
<img src="@user.getProfilePictureURL()" /> 
```

# jquery - 输入文本字段 tp 接受无限字符

> ID：11481586
> 
> 赞同：1
> 
> 时间：2012-07-14T06:24:15.473
> 
> 标签：jquery, html

我正在研究wordpress。我有一个场景可以按邮政编码对帖子进行排序。我所做的是我将每个邮政编码都设为了一个类别。我的邮政编码列表非常长，包含超过 32369 个字符。当我将该文本粘贴到输入字段中时，它只是将文本撕成 32369 个字符。有什么解决办法吗。。由于它的所有 wordpress 默认设置，所以我无法通过更改代码将输入类型文本更改为 textarea，但是可以使用 jquery 解决方案。

我也尝试过其他输入文本框，但得到了相同的结果，即显示 32369 个字符，然后撕掉剩余的文本。

# gps - 为什么连接我的无线路由器后，定位很准确？

> ID：11481588
> 
> 赞同：0
> 
> 时间：2012-07-14T06:25:01.020
> 
> 标签：gps

如果我连接到我的无线路由器，定位会变得非常准确。但是，如果即使我靠近它也没有连接到无线，则定位不准确。我使用的是安卓 LG P-690 手机。

为什么连接到我的无线设备会给出更准确的结果？我的无线设备的位置是否已在 ISP 的某个数据库中注册，Android 如何访问该数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T22:15:27.913

是的，您的无线设备的位置已在某处注册。谷歌使用它来查找位置。您的无线设备可能已通过您自己的手机注册，在某些时候您获得了良好的 GPS 定位，而手机可以看到您的无线路由器，并且该信息被传输到谷歌以在该路由器上注册该 gps 位置。

# mysql - 基于子分组的最大值实现派生列

> ID：11481589
> 
> 赞同：0
> 
> 时间：2012-07-14T06:25:02.120
> 
> 标签：mysql

所以我有这个 MySQL 5.0.24 表

```
select state, county, population from state_pops order by state, county; 
```

产量

```
Arizona   Yapavai    4
Arizona   Pueblo     5
Arizona   Pinal      8
Arizona   Maricopa  13
Michigan  Lawson     3
Michigan  Maple      4
Michigan  Appleton   8
Texas     Richmond   5
Texas     Dupree     7
Texas     Brighton  10 
```

我需要确定哪个是每个州人口最多的县。

```
select state, county, max( population) from state_pops group by state order by state; 
```

产量

```
Arizona   Maricopa  13
Michigan  Appleton   8
Texas     Brighton  10 
```

简单的。但是现在我需要以某种方式标记每个州​​人口最多的县，同时列出所有州的所有县，就像这样

```
Arizona   Yapavai    4  NO
Arizona   Pueblo     5  NO
Arizona   Pinal      8  NO
Arizona   Maricopa  13  YES
Michigan  Lawson     3  NO
Michigan  Maple      4  NO
Michigan  Appleton   8  YES
Texas     Richmond   5  NO
Texas     Dupree     7  NO
Texas     Brighton  10  YES 
```

所以我需要以某种方式得出一个列，也许是某种形式的 CASE..WHEN 有什么想法吗？

TIA,

仍在学习的史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T06:37:33.303

您可以使用此解决方案：

```
SELECT a.state, 
       a.county, 
       a.population, 
       COALESCE(b.isMostPop, 'NO') AS flag
FROM state_pops a
LEFT JOIN
(
    SELECT state, MAX(population) AS maxpop, 'YES' AS isMostPop
    FROM state_pops
    GROUP BY state
) b ON a.state = b.state AND a.population = b.maxpop 
```

* * *

**查看[SQL-Fiddle 演示](http://sqlfiddle.com/#!3/912a6/1/0)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T06:42:09.857

用这个

```
select state, county, population,heaviest(state,conuty) from state_pops order by state, county; 
```

对于该功能，请执行以下操作：

```
 create function `heaviest`(`fstate` char(10),`fcounty` char(10))
 RETURNS char(3)

BEGIN

declare ans char(3);

if (select population from yourtable where state=fstate and county=fcounty)>=(select max(population) from yourtable group by state having state=fstate and count=fcount) then set ans='yes';

else set ans='no';

end if;

    return ans;

END;; 
```

# ios - Cocos2D 现实重力？

> ID：11481591
> 
> 赞同：1
> 
> 时间：2012-07-14T06:26:04.633
> 
> 标签：ios, cocos2d-iphone, gravity

我尝试了许多不同的技术来在我的游戏中应用逼真的重力功能，但到目前为止都没有运气。我计划为此提供*100 分赏金*，以供可以向我展示或（分享）一些将重力应用于 Cocos2D 中的 CCSprite 的代码的人。

到目前为止，我所做的只是丑陋或不切实际，我在许多不同的地方询问过最好的方法是什么，但我还没有找到任何好看的重力技术。

无论如何，任何人都可以提供一些技巧/想法或他们的方法，只将重力应用于 Cocos2D 中的 CCSprite**而不**使用物理引擎？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T06:55:45.440

无需显式使用任何物理引擎的有效方法是在更新循环中手动步进精灵的速度和位置。这本质上是欧拉积分。

```
// define your gravity value
#define GRAVITY -0.1

// define a velocity variable in the header of your Game class/CCSprite Subclass (neater)
float velocity_y;

-(void) update: (ccTime) dt
{
    // Step the y-velocity by your acceleration value (gravity value in this case)
    velocity_y += GRAVITY *dt; // drop the dt if you don't want to use it 

    // Step the position values and update the sprite position accordingly
    sprite.position.y += velocity_y* dt; // same here
} 
```

在上面的代码片段中，我定义了一个velocity_y 变量来跟踪我的精灵沿y 方向的当前速度。请记住在您的 init 方法中将此值初始化为 0。

接下来是欧拉的症结所在。在每个时间步：

1.  将你的速度乘以你的加速度（这是你的重力）乘以 dt 来找到你的新速度。
2.  通过新计算的速度值乘以 dt 来推进你的位置，以找到你的新位置。

您可以试验是否使用 delta-time（请参阅 LearnCocos2D 关于使用它的缺点的出色评论）是否适用于您的游戏。正如 LearnCocos2d 指出的那样，虽然乘以 delta-time 可以让您的对象运动更准确地考虑变化的帧速率，但避免在系统中断（新邮件、电池电量不足、广告弹出）的实时游戏中使用它可能是明智之举-out) 可能发生并随后导致游戏模拟向前跳跃以试图弥补。

因此，如果您要降低 dt，请记住相应地调整（缩小）您的 GRAVITY 值以保持正确的感觉，因为该值不再乘以 delta-time 的值（约为 1/60）。

附加提示：要应用脉冲来移动精灵（例如通过滑动），您可以通过更改velocity_x（如果有的话）和velocity_y 的值直接影响速度。

我在我的游戏中使用了这种方法，并且效果很好。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:39:44.997

这不是小事，您应该尝试查看其他帖子。我敢肯定其他人已经遇到过这个问题。试着看看：

*   [如何在没有物理引擎的情况下在 cocos2d 中模拟一个精灵的重力？](https://stackoverflow.com/questions/7162685/how-to-simulate-a-gravity-for-one-sprite-in-cocos2d-without-a-physics-engine)
*   [Cocos2D 重力？](https://stackoverflow.com/questions/8130808/cocos2d-gravity)

或者试试我们的好朋友谷歌：

*   [http://www.gamedev.net/page/resources/](http://www.gamedev.net/page/resources/) -> 到了*数学和物理*，然后*是基于 Verlet 的 2D 游戏物理方法*
*   [http://www.rodedev.com/tutorials/gamephysics/](http://www.rodedev.com/tutorials/gamephysics/)

无论如何，这里有一些提示：

Step 1, calculate the effective direction vectors Step 2, calculate velocity Step 3, project this velocity onto the two effective directions. Step 4, generate an equal and opposite force for the two direction and call this the “response force”.

# android - 重新组织不同文件夹中的活动

> ID：11481595
> 
> 赞同：1
> 
> 时间：2012-07-14T06:27:52.673
> 
> 标签：android, android-activity

我想更改我的 android 应用程序的结构以将活动放在名为活动的子文件夹中。所以，我的代码结构会变成

`com.example.myapp.activities.MainActivity`

并且所有活动都将驻留在**com.example.myapp.activities**

我该如何做到这一点？此外，必须在清单中进行哪些更改才能使其正常工作？我将如何从其他活动中访问其他活动类？

```
<activity
    android:name=".activities.MainActivity"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

编辑：我通过拖放文件夹中的活动来实现这一点，但现在我收到此错误`setContentView(R.layout.main);`：**无法解析 main 或不是字段**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T06:58:05.457

如果您将所有活动组织在同一个包中，那么您必须在清单文件中定义没有包声明的活动，例如

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.myapp.activities"
android:versionCode="1"
android:versionName="1.0" >

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" 
    android:name=".WorldClockApplication"

    <activity
        android:name=".WorldClockHomeActivity"
        android:label="@string/app_name" >
                  <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name=".AddLocationActivity"/>         
    <activity   android:name=".EditPreference"/>

</application>

</manifest> 
```

然后，您应该使用意图在另一个活动中调用该活动。考虑我从 WorldClockApplication 活动中调用 WorldClockHomeActivity 如下：

```
 Intent myIntent=new Intent(WorldClockApplication.this,WorldClockHomeActivity.class);
  startActivity(myIntent); 
```

然后清理，刷新你的项目，你的项目不会出错。如果出现错误

```
 setContentView(R.layout.main); 
```

这意味着您在清单文件中没有的 res/strings 或 res/layout 或 res/drawable 文件夹中有问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T06:32:21.280

如果您正在使用`Eclipse`在您的项目中创建一个新数据包并将您的活动文件拖放到其中。Eclipse 将负责所有必要的更改。

正如您在问题中发布的那样，更改位于您的目录结构和清单中。

活动可以`Intents`像往常一样通过`Intent(context, YourActivity.class)`;

不过，我不会移动这些活动，而是将**其他**Java 类组织在单独的包中。

# android - 服务器数据库更新时更新 sqlite 数据库

> ID：11481599
> 
> 赞同：8
> 
> 时间：2012-07-14T06:28:37.667
> 
> 标签：android

我正在更新使用 SQLITE db 的移动设备上的数据库，它应该随着服务器更新它的数据库即 wamp 服务器而更新。
任何人都可以向我提出有关如何实现这一目标的任何想法。
我不想读取整个服务器数据库，因为它会增加数据使用量，同时读取整个数据库只是为了进行一次更新或多次更新。更新在产品表中完成，服务器端仅更新价格字段。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T21:52:50.310

您可以在您的应用程序中定义一个服务，该服务会定期询问您的服务器数据库中是否有更新的数据。在服务器端，您可以实现一个 Web 服务，该服务将接收一个 json 对象，您将在其中放置当前日期、您想要检查更新的表名以及基于您的目的的其他信息。我会用一个例子更好地解释自己：1）当应用程序启动时，后台服务也会启动。该服务将查询（例如每 3 分钟一次）您的网络服务，以查看指定表是否有新的更新。2) 网络服务将接收您要检查的表名和日期时间，最好是 unix 时间戳。例如，您想查看 2012-08-20 22:00:00 之后表“产品”是否有新记录。您可以在应用程序中使用此信息创建一个 json 对象和一个 http 请求，并将其传递到服务器端。3）您的网络服务将响应您提供一个 json 数组，其中包含 2012 年 8 月 20 日 22:00:00 之后添加或修改的所有数据。当然，在服务器数据库中，您必须存储此信息（基本上每条记录都会有一个字段，其中包含第一次插入/最后一次修改的日期时间）
4) 然后您可以更新您的本地 sqlite 数据库。

可能这不是很有效，但它有效。

安德烈亚

# linux - 在 Amazon AWS 中部署 WAR 文件 - Tomcat 和 Apache HTTP 服务器冲突

> ID：11481604
> 
> 赞同：0
> 
> 时间：2012-07-14T06:30:24.573
> 
> 标签：linux, apache, amazon-ec2, tomcat6

我正在使用一个 Amazon Linux AMI 实例，并在其上部署了一个 war 文件。

![控制台](../Images/cd42d3dca79aa26904d80bdeeab389d5.png)

部署的war文件显示在tomcat6的'webapps'文件夹中。

真正的问题是——还安装了 Apache HTTP 2.2 服务器。

当我访问我的实例的 URL ( [http://ec2-107-20-92-32.compute-1.amazonaws.com](http://ec2-107-20-92-32.compute-1.amazonaws.com) ) 时，我看到了 Apache HTTP 2.2 Only 的默认页面，如果我没记错的话，在端口号 80 上工作。

现在，如何让我的 Apache HTTP 2.2 服务器与 tomcat6 通信以显示部署在 Tomcat 中的网站？

或者，还有其他替代方案吗？

（我使用 MacOS X 的终端连接到我的实例，并将 WAR 上传到 S3 以将其部署到 tomcat 中。）

蒂亚:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T15:28:35.360

除了 mac 的建议（关闭 Apache 并让 Tomcat 在端口 80 上侦听，或在 Apache 上配置 Tomcat 连接器），您还可以在 Apache 配置上设置一对`ProxyPass`/`ProxyPassReverse`指令，如[mod_proxy 文档](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)中的示例。

如果您决定遵循此建议，您的规则将如下所示（在`VirtualHost`端口 80 的侦听中）：

```
ProxyPass / http://ec2-107-20-92-32.compute-1.amazonaws.com:8080/
ProxyPassReverse / http://ec2-107-20-92-32.compute-1.amazonaws.com:8080/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T05:29:45.227

没有任何效果。我删除了该实例并在 Ubuntu 12.04 64 位实例上尝试了相同的操作，它工作正常。我不知道为什么它在 Amazon Linux AMI 中不起作用:(

# javascript - 它不是加在一起，而是连接

> ID：11481605
> 
> 赞同：-5
> 
> 时间：2012-07-14T06:30:26.757
> 
> 标签：javascript, concatenation, addition

> **可能重复：**
> [在 JavaScript 中进行简单的运输和处理计算](https://stackoverflow.com/questions/4606296/in-javascript-doing-a-simple-shipping-and-handling-calculation)

许多公司通常会收取购买的运费和手续费。创建一个网页，允许用户在文本框中输入购买价格，并包含一个计算运输和处理的 JavaScript 函数。向脚本添加功能，为任何小于或等于 25.00 美元的购买添加 1.50 美元的最低运费和手续费。对于任何超过 25.00 美元的订单，在总购买价格中增加 10% 的运费和手续费，但不包括 1.50 美元的最低运费和手续费。计算百分比的公式是价格 * 百分比 / 100。例如，计算 50.00 美元购买价格的 10% 的公式是 50 * 10 / 100，这会产生 5.00 美元的运费和手续费。在您确定订单的总成本（购买加上运输和处理）后，

```
<!DOCTYPE>
<html><head>
<title>Project Two</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />

<script type="text/javascript">
/*<CDATA[[*/
var salesPrice = window.prompt("Please Enter Purchase Price?", "");
minShipping = salesPrice * 1.50/100;
maxShipping = salesPrice * 10/100;
(salesPrice <= 25)? totalPrice = salesPrice + minShipping
    : totalPrice = salesPrice + maxShipping;
alert(totalPrice);
/*]]>*/
</script>
</head> 
```

我需要检查我的所有脚本并注意，我们仍在第 2 章，因此（如果）语句还不允许使用。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T06:41:28.370

首先，您的三元运算符似乎很重复。有一种方法可以使它更短：

```
totalPrice = salesPrice + ( salesPrice <= 25 ? minShipping : maxShipping ); 
```

然后，在使用关键字*之前*声明变量是一个好习惯。`var`在这种特殊情况下，建议是无用的，因为脚本将在全局范围内执行，因此您的所有变量最终都将是全局的。

您的脚本版本连接了结果，因为返回类型为`window.prompt`is `String`。当一个人试图将 a 添加`String`到 a`Number`时，后者只是被转换为 a`String`并发生连接。

您可以使用内置（或）函数或[添加加号](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Arithmetic_Operators#.2B_%28Unary_Plus%29)显式转换`String`为。`Number`[`parseInt`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)[`parseFloat`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseFloat)

```
<script type="text/javascript">
/*<CDATA[[*/
var salesPrice, minShipping, maxShipping, totalPrice;

salesPrice  = +window.prompt( 'Please Enter Purchase Price?', '' ),
minShipping = salesPrice * 1.5 / 100;
maxShipping = salesPrice * 10  / 100;

totalPrice  = salesPrice + ( salesPrice <= 25 ? minShipping : maxShipping );

alert( totalPrice );
/*]]>*/
</script> 
```

# html - 使两个 HTML 按钮并排显示

> ID：11481606
> 
> 赞同：8
> 
> 时间：2012-07-14T06:30:30.607
> 
> 标签：html, button

好吧，我不太熟悉 HTML，或者它如何与 CSS 结合在一起。我一直在研究如何让两个 HTML 按钮并排显示。这是我目前正在使用的代码。

```
<FORM METHOD="LINK" ACTION="LINK TO WEBSITE" target="_blank">
  <input type="submit" value="Forum Home Page">
</FORM>
<FORM METHOD="LINK" ACTION="LINK TO A DIFFERENT WEBSITE" target="_blank">
  <input type="submit" value="Skill Guides">
</FORM> 
```

不管我是把它们放在一个之后，还是在它们前面放置一个对齐。我似乎无法让他们挨着走。我希望有人可以轻松详细地帮助我。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-14T06:34:53.320

如果我理解正确，您可以附上以下 CSS：

```
form {
    display: inline;
} 
```

如图所示：http: [//jsfiddle.net/zcz3j/](http://jsfiddle.net/zcz3j/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T06:36:53.197

演示[http://jsfiddle.net/satinder_singh1/wr4Xv/1/](http://jsfiddle.net/satinder_singh1/wr4Xv/1/)

```
<div id="main">
<div class="floatdiv"><FORM METHOD="LINK" ACTION="LINK TO WEBSITE" target="_blank">
  <input type="submit" value="Forum Home Page">
</FORM></div>
<div class="floatdiv">
<FORM METHOD="LINK" ACTION="LINK TO A DIFFERENT WEBSITE" target="_blank">
  <input type="submit" value="Skill Guides">
    </FORM></div></div>​

<style type="text/css">
    #main
    {
    position:relative;
        width:200px;
    }

    .floatdiv
    {
    float:left;
        width=80px
    }
</style> 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-21T15:56:15.663

您也可以尝试将它们包装在表格标签中。这就是我解决类似问题的方法。桌子自动将它们并排放置。

# ios - 如何创建 CFArrayRef

> ID：11481610
> 
> 赞同：7
> 
> 时间：2012-07-14T06:31:35.883
> 
> 标签：ios, abrecordref

我正在尝试使用内置方法将一个 iPhone 联系人转换为 vCard。文档说要使用：

```
ABPersonCreateVCardRepresentationWithPeople(CFArrayRef people) 
```

...但我的委托方法给了我这个：

```
- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person; 
```

**我不知道如何`CFArrayRef`只用一个`ABRecordRef`.**

文档指出了我，`CFArrayCreate()`这让我更加困惑。我不知道足够的C来解决这个问题。我在 SO 中读到`NSArray`了一种叫做免费桥接的东西，应该可以互换，`CFArrayRef`但不太明白如何使用它，因为当我尝试交换它们时编译器会抱怨。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-14T06:39:23.603

免费桥接：

其中数组是一种类：NSArray

```
CFArrayRef arrayRef = (__bridge CFArrayRef)array; 
```

# php - php脚本执行繁重的脚本文件

> ID：11481613
> 
> 赞同：1
> 
> 时间：2012-07-14T06:31:43.590
> 
> 标签：php, apache, codeigniter

我有一个项目，我在名为 codeigniter 的 php 框架中开发。我有一个脚本文件，它为我的客户创建了 30,0000 个 pdf 的 db 记录。问题是我必须分块运行代码。因为它给出了错误，一些时间服务器超时，一些时间内存不同步，我通过更改 php.ini 修复了所有错误，但徒劳无功。因为我仍然必须使用 7000 偏移量的限制来分块制作 pdf。如果我增加限制偏移量，它将无法运行并给我错误。很难坐下多达 30,0000 条记录并在其上生成 pdf。我只希望我在一个块内运行。请给我解决方案。我真的需要它。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T06:42:19.390

我建议为此使用单独的 shell 脚本，或者如果您坚持使用 PHP 脚本，请像使用 shell 脚本一样使用它。您可以“触发并忘记”脚本，这样它就可以在后台运行，而不会影响其他任何东西，也不会占用您的 Web 应用程序的资源。那将是这样的：

```
shell_exec('yourscript.sh > /dev/null 2>/dev/null &'); 
```

或使用 php 脚本

```
shell_exec('php yourscript.php > /dev/null 2>/dev/null &'); 
```

请注意，在上面，我将 stdout 和 stderr 都重定向到 null。如果你不想要它们，你宁愿将它们重定向到其他地方。

# c# - Silverlight 主题：无法创建 DataForm 的实例

> ID：11481617
> 
> 赞同：0
> 
> 时间：2012-07-14T06:31:54.060
> 
> 标签：c#, silverlight, silverlight-toolkit, dataform

我是 Silverlight 的新手。我想在我的 Silverlight Web 应用程序中使用**DataForm 。**首先，当我使用*简单的*silverlight 应用程序时，它可以正常工作。然后我从微软网站下载了主题。我正在使用**Silverlight Navigation（Cosmopolitan 主题）**。当我使用这些主题时，我无法在我的应用程序中使用 DataForm。它给了我以下错误

```
The tag 'DataForm' does not exist in XML namespace 'http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit'.

Cannot create an instance of "DataForm". 
```

我尝试删除引用，然后从工具箱中拖放 DataForm。但这没有帮助。甚至 DataForm 本身也不在工具箱中。我右键单击并从“选择项目”菜单中添加它。

如何在我的应用程序中使用 DataForm？提前致谢

# python - 如何比较python中两个列表的值？

> ID：11481618
> 
> 赞同：2
> 
> 时间：2012-07-14T06:32:08.380
> 
> 标签：python, list

我想比较两个列表的值。

例如：

```
a = [1, 2, 3]
b = [1, 2, 3] 
```

我需要检查是否`a`相同`b`。我怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-14T06:33:06.600

```
a == b 
```

这是一个非常简单的测试，它检查所有值是否相等。

如果您想检查`a`和是否`b`都引用同一个列表，您可以使用`is`.

```
>>> a = [1, 2, 3]
>>> b = [1, 2, 3]
>>> a is b # a and b have the same values but refer to different lists in memory
False
>>> a = [1, 2, 3]
>>> b = a
>>> a is b # both refer to the same list
True 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-14T07:34:48.730

只需使用

```
a == b 
```

运算符`==`将比较 a 和 b 的值，无论它们是否引用同一个对象。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-14T07:28:13.173

@jamylak 的答案是我会选择的。但是，如果您正在寻找“几种选择”，这里有一堆：

```
>>> a = [1,2,3]
>>> b = [1,2,3]
>>> a == b
True 
```

或者

```
def check(a,b):
    if len(a) != len(b):
        return False
    for i in xrange(len(a)):
        if a[i] != b[i]:
            return False
    return True 
```

或者

```
>>> len(a)==len(b) and all((a[i]==b[i] for i in xrange(len(a))))
True 
```

或者

```
def check(a,b):
    if len(a) != len(b):
        return False
    for i,j in itertools.izip(a,b):
        if i != j:
            return False
    return True 
```

或者

```
>>> all((i==j for i,j in itertools.izip(a,b)))
True 
```

或（如果列表仅由数字组成）

```
>>> all((i is j for i,j in itertools.izip(a,b)))
True 
```

或者

```
>>> all((i is j for i,j in itertools.izip(a,b)))
True 
```

希望能满足你的胃口；]

# android - android ListView ,setSelection() 在 setFlags(...FULLSCREEN) 之后没有效果

> ID：11481627
> 
> 赞同：0
> 
> 时间：2012-07-14T06:33:09.690
> 
> 标签：android, listview, fullscreen

现在我遇到了这个问题：

1.  在我的 Asynctask 中，我在这个 Listview 上有一个 ProgressDialog，它会不断更新和自动滚动（我使用类似 mListview.setSelection(mData.size()-1); 来滚动它）

2.  我希望它在未完成或取消时全屏显示，我认为这很容易通过 Window dialogWindow = mProgressDialog.getWindow(); dialogWindow.setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

3.  我还希望它在完成后停止全屏显示（即我希望显示状态栏）。我还希望显示 Listview 中的第一项。

4.  -------------------- 这就是问题发生的时候。--------

我使用类似 dialogWindow.setFlags(0, WindowManager.LayoutParams.FLAG_FULLSCREEN);

它运行良好。出现状态栏。

然后我使用 mListview.setSelection(0)，我想它可以带给我第一个项目。

但是，它根本没有效果。知道这是如何发生或如何解决的吗？任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T06:44:25.020

你可以试试这个方法，也许对你有帮助。。

```
http://developer.android.com/reference/android/widget/ListView.html#smoothScrollToPosition(int)

public void smoothScrollToPosition (int position)

Since: API Level 8
Smoothly scroll to the specified adapter position. The view will scroll such that the         indicated position is displayed.

Parameters
position    Scroll to this adapter position. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-10T11:03:36.510

你必须使用

```
mListview.clearFocus(); 
```

打电话之前

```
mListview.requestFocusFromTouch();
mListview.setSelection(0); 
```

在 mListView 的 post 方法中。

# android - 如何在全屏模式下运行添加菜单到底部？

> ID：11481628
> 
> 赞同：2
> 
> 时间：2012-07-14T06:33:45.807
> 
> 标签：android, menu, android-actionbar, legacy

当我们决定升级我们的儿童绘画应用程序以支持 Android 3/4 同时保持对 Android 2.1 的支持时，我最近遇到了一个问题。但是很快就发生了一系列问题，用户给了我们差评，因为我们的应用现在顶部有操作栏——他们要求“全屏模式”回来！

所以现在我面临这个问题 - 我们需要目标 SDK > 10，但我们不想要操作栏。在搜索论坛时，我们看到一些 (@user1076637) 建议我们可以在“传统模式”下运行 (targetSdkVersion < 14) - 我们在 2013 年 11 月 12 日尝试删除 ActionBar (android:theme="@android: style/Theme.Holo.NoActionBar")，在我们的 Android 4 设备中找不到菜单。

有针对这个的解决方法吗？我们只是想要菜单按钮位于底部的传统模式？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T07:07:23.343

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);

    menu.add(0, ADD_CATEGORY_INDEX, 0, "Add").setIcon(
            android.R.drawable.ic_menu_add);
    return  true;
} 
```

# jquery - 页面手风琴标签

> ID：11481629
> 
> 赞同：0
> 
> 时间：2012-07-14T06:33:59.967
> 
> 标签：jquery

我得到了一个在 wordpress(cms) 中设计的网站..

![在此处输入图像描述](../Images/3d3082d6050d22365f3beba804fbe048.png)

这是手风琴菜单选项卡屏幕截图。

如屏幕截图所示，当您单击**Category A (2)**时，会列出其下的子类别。单击**Range 1**时，会列出其下的页面。

所以现在我需要的实际是..

单击**产品 A1**后，它应该展开并显示页面**产品 A1**的内容， 而不是在其他窗口或选项卡中，

我知道这可以通过手风琴标签来实现

但在手风琴标签的情况下，我只能在其中输入内容......而不是在其他页面中

```
 [accordion] content [/accordion]-->i want the content from page 
```

我必须使用一些 jquery 函数来实现这一点吗？还是有其他插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T07:17:39.433

```
$(document).ready(function () {
    $('#accordion').accordion({
        create: function (event, ui) {
            $('div#accordion > div').each(function () {
                var id = $(this).attr('id');
                $(this).load(id+'.html', function () {
                    $('#accordion').accordion('resize');
                });
            });
        }
    });
}); 
```

# c++ - LNK 2019 - 未解析的外部符号

> ID：11481633
> 
> 赞同：2
> 
> 时间：2012-07-14T06:34:45.320
> 
> 标签：c++, visual-studio

我收到以下链接错误。

```
1>------ Build started: Project: NowHook, Configuration: Debug Win32 ------
1>Compiling...

1>NowHook.CPP
1>Linking...

1>NowHook.obj : error LNK2019: unresolved external symbol __imp__VirtualProtect@16 referenced in function "void __cdecl 

1>NowHook.obj : error LNK2019: unresolved external symbol __imp__GetProcAddress@8 referenced in function "void __cdecl 

1>NowHook.obj : error LNK2019: unresolved external symbol __imp__LoadLibraryA@4 referenced in function "void __cdecl HookSend(void)" (?HookSend@@YAXXZ)

1>C:\Users\JAGAN\Documents\Visual Studio 2008\Projects\HookNow\Debug\NowHook.dll : 
fatal error LNK1120: 3 unresolved externals

1>Build log was saved at "file://c:\Users\JAGAN\Documents\Visual Studio 2008\Projects 
```

我包括了
1) 链接器/常规/附加库目录
2) 链接器/输入/附加依赖项

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T06:40:59.623

您的链接器/输入/附加依赖项中缺少 kernel32.lib

确保为“所有配置”和“所有平台”设置附加依赖项。

![在此处输入图像描述](../Images/1f4af1e4d0a80941127d40470af67da0.png)

# css - 保持绝对定位，可折叠的 div 在右下角滚动页面

> ID：11481636
> 
> 赞同：1
> 
> 时间：2012-07-14T06:35:30.843
> 
> 标签：css, layout, html, css-float

好吧，这将很难解释。我有一个带有两个可折叠菜单的页面。一个绝对位于左上角。当我折叠它时，剩余的内容都像预期的那样被挤压到左上角。

另一个菜单绝对位于右下角。当它展开时（加载页面时的默认状态），它位于右下角，距离右下角 5 个像素，正如预期的那样。但是，当我折叠它时，突然间剩余的内容从距底部和右侧 5 个像素处开始，然后从页面右侧和下方流出，扩展页面并导致滚动条。

期望的行为是将剩余内容压缩到页面的右下角，而不更改页面尺寸。

发布我的代码会很棘手，因为其中很多都是通过 JavaScript 动态生成的。

每个菜单由容器 div 内的两个子 div 组成。容器 div 绝对定位（左上角或右下角，取决于哪个菜单）。第一个子 div 是活动菜单选项卡的内容，向左浮动，顶部边距刚好足以将其放在菜单选项卡下。第二个子 div 是菜单选项卡。这个 div 是绝对定位的（以便让内容 div 在它后面流动）。选项卡 div 中的每个选项卡都向左浮动，因此我可以更动态地添加。

其中一个选项卡始终是“隐藏/显示”选项卡，基本上只是在菜单的内容 div 上切换显示：隐藏。

因此，据我了解，浮动内容 div 以某种方式阻止菜单从页面流出，并且当它“折叠”（即隐藏）时，没有什么可以阻止绝对定位的选项卡 div 从页面流出。

我想我会尝试将有问题的 div 和 css 代码撕掉到它自己的页面中，这样我就可以隔离行为，并发布一些连贯的代码。与此同时，任何建议都非常受欢迎。

谢谢！== 马特

PS 通常我会把菜单中的所有东西都放在相对位置。我在浮动内容 div 顶部使用绝对定位的 div 的原因是，我可以控制活动选项卡的底部是否看起来“连接”到内容 div。如果我有两个相对的 div 并且只是将选项卡 div 放在内容 div 的顶部，我无法在正确的位置删除内容 div 的黑色顶部边框，使其看起来像活动选项卡连接到它。如果有人可以想办法解决这个问题，同时仍然保持两个 div 的相对性，我也会为此感到沮丧。

我没有代表发布图片，所以这里有一些链接：

这是菜单扩展后的样子：http: [//theroach.net/igp_menutest/css_menus1.png](http://theroach.net/igp_menutest/css_menus1.png)

他们在这里被折叠： [http ://theroach.net/igp_menutest/css_menus2.png](http://theroach.net/igp_menutest/css_menus2.png)

这就是我想要的： [http ://theroach.net/igp_menutest/css_menus3.png](http://theroach.net/igp_menutest/css_menus3.png)

**更新**：我已经尽可能地从我的 JavaScript 中删除了菜单代码。这是一个带有工作代码的[JSFiddle 。](http://jsfiddle.net/bQ6vZ/)出于某种原因，onclick 事件在 JSFiddle 中不起作用，但它与我的测试页面中的代码完全相同，因此如果您无法使其在 JSFiddle 中起作用，请尝试[此链接](http://theroach.net/igp_menutest/)以查看行为。仅供参考，javascript 通常不依赖于巨大的 if-else 语句，我只是这样做了，所以我不必发布所有动态菜单生成代码。

PPS 我基本上只在 Chrome v20 中对此进行了测试，尽管我刚刚测试了 Firefox v13 和 IE9 并得到了相同的行为。我不太关心跨浏览器支持。此页面仅适用于使用最新最好的浏览器的人。

**UPDATE2**：更新的链接。添加了 jsfiddle 代码的相关部分以满足新的问题代码要求：

JS

```
function tab(id) {
        if(id == 'menuCtrlTab1') {
            toggle('menuCtrlTab1');
            toggle('menuCtrlTab2');
            hide('menuCtrlForm2');
            show('menuCtrlForm1');
        }
        else if(id == 'menuCtrlTab2') {
            toggle('menuCtrlTab1');
            toggle('menuCtrlTab2');
            hide('menuCtrlForm1');
            show('menuCtrlForm2');
        }
        else if(id == 'menuCtrlTabHide') {
            hide('menuCtrlTab1');
            hide('menuCtrlTab2');
            hide('menuCtrlFormDiv');
            hide('menuCtrlTabHide');
            show('menuCtrlTabShow');
        }
        else if(id == 'menuCtrlTabShow') {
            show('menuCtrlTab1');
            show('menuCtrlTab2');
            show('menuCtrlFormDiv');
            hide('menuCtrlTabShow');
            show('menuCtrlTabHide');
        }

        else if(id == 'menuInfoTab1') {
            toggle('menuInfoTab1');
            toggle('menuInfoTab2');
            hide('menuInfoForm2');
            show('menuInfoForm1');
        }
        else if(id == 'menuInfoTab2') {
            toggle('menuInfoTab1');
            toggle('menuInfoTab2');
            hide('menuInfoForm1');
            show('menuInfoForm2');
        }
        else if(id == 'menuInfoTabHide') {
            hide('menuInfoTab1');
            hide('menuInfoTab2');
            hide('menuInfoFormDiv');
            hide('menuInfoTabHide');
            show('menuInfoTabShow');
        }
        else if(id == 'menuInfoTabShow') {
            show('menuInfoTab1');
            show('menuInfoTab2');
            show('menuInfoFormDiv');
            hide('menuInfoTabShow');
            show('menuInfoTabHide');
        }
        else {

        }
}

function toggle(id) {
    if(activated(id)) {
        deactivate(id);
    }
    else {
        activate(id);
    }
}

function hide(id) {
    docAddClass(id, 'hidden');
}
function show(id) {
    docRemoveClass(id, 'hidden');
}

function activate(id) {
    docRemoveClass(id, 'inActive');
    docAddClass(id, 'active');
}
function deactivate(id) {
    docRemoveClass(id, 'active');
    docAddClass(id, 'inActive');
}

function activated(id) {
    var e = docGet(id);
    if(e.className.search('active') == -1) {
        return false;
    }
    return true;
}

function docGet(id) {
    return document.getElementById(id);
}
function docAddClass(id, classToAdd) {
    var e = docGet(id);
    if(e.className.length <= 0) {
        e.className = classToAdd;
    }
    else {
        if(e.className.search(classToAdd) == -1) {
            e.className = e.className + ' ' + classToAdd;
        }
    }
}

function docRemoveClass(id, classToRem) {
    var e = docGet(id);
    if(e.className.length > 0) {
        if(e.className.search(classToRem) != -1) {
            e.className = e.className.replace(classToRem, "");
        }
    }
} 
```

HTML

```
<!DOCTYPE html>
<html>
    <head>
        <title>Test</title>
        <meta name='Author' content='Matt Seng' />
        <meta name="Description" content="IGP" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" type="text/css" href="./style.css" media="screen" />
    </head>

    <body>

        <div id="menuDiv">
            <div id="menuCtrl">
                <div id="menuCtrlWrapper" class="menuWrapper">
                    <div id='menuCtrlFormDiv'>
                        <div id="menuCtrlForm1" class="menuForm">
                            Tab 1 contents<br>
                            Lorem ipsum dolor sit amet, consectetur<br>
                            adipiscing elit. Duis est orci, malesuada<br>
                            vitae pulvinar nec, varius id felis. Vivamus<br>
                            et accumsan dui. Donec a nisl id dui gravida<br>
                            porttitor. Integer sed turpis arcu. Curabitur<br>
                            nec dolor urna, ac molestie neque. Nunc ac<br>
                            augue non mi imperdiet semper.
                        </div>
                        <div id="menuCtrlForm2" class="menuForm hidden">
                            Tab 2 contents<br>
                            Lorem ipsum dolor sit amet, consectetur<br>
                            adipiscing elit. Duis est orci, malesuada<br>
                            vitae pulvinar nec, varius id felis. Vivamus<br>
                            et accumsan dui. Donec a nisl id dui gravida<br>
                            porttitor. Integer sed turpis arcu. Curabitur<br>
                            nec dolor urna, ac molestie neque. Nunc ac<br>
                            augue non mi imperdiet semper.
                        </div>
                    </div>
                    <div id="menuCtrlTabs" class="menuTabs">
                        <div id="menuCtrlTabShow" class="clickable tab showHide inActive hidden" onclick="tab(this.id);">
                            Show
                        </div>
                        <div id="menuCtrlTabHide" class="clickable tab showHide inActive" onclick="tab(this.id);">
                            Hide
                        </div>
                        <div id="menuCtrlTab1" class="clickable tab secondary  active" onclick="tab(this.id);">
                            1
                        </div>
                        <div id="menuCtrlTab2" class="clickable tab secondary inActive" onclick="tab(this.id);">
                            2
                        </div>
                    </div>
                </div>
            </div>
            <div id="menuInfo">
                <div id="menuInfoWrapper" class="menuWrapper">
                    <div id='menuInfoFormDiv'>
                        <div id="menuInfoForm1" class="menuForm">
                            Tab 1 contents<br>
                            Lorem ipsum dolor sit amet, consectetur<br>
                            adipiscing elit. Duis est orci, malesuada<br>
                            vitae pulvinar nec, varius id felis. Vivamus<br>
                            et accumsan dui. Donec a nisl id dui gravida<br>
                            porttitor. Integer sed turpis arcu. Curabitur<br>
                            nec dolor urna, ac molestie neque. Nunc ac<br>
                            augue non mi imperdiet semper.
                        </div>
                        <div id="menuInfoForm2" class="menuForm hidden">
                            Tab 2 contents<br>
                            Lorem ipsum dolor sit amet, consectetur<br>
                            adipiscing elit. Duis est orci, malesuada<br>
                            vitae pulvinar nec, varius id felis. Vivamus<br>
                            et accumsan dui. Donec a nisl id dui gravida<br>
                            porttitor. Integer sed turpis arcu. Curabitur<br>
                            nec dolor urna, ac molestie neque. Nunc ac<br>
                            augue non mi imperdiet semper.
                        </div>
                    </div>
                    <div id="menuInfoTabs" class="menuTabs">

                        <div id="menuInfoTabShow" class="clickable tab showHide inActive hidden" onclick="tab(this.id);">
                            Show
                        </div>
                        <div id="menuInfoTabHide" class="clickable tab showHide inActive" onclick="tab(this.id);">
                            Hide
                        </div>
                        <div id="menuInfoTab1" class="clickable tab secondary  active" onclick="tab(this.id);">
                            1
                        </div>
                        <div id="menuInfoTab2" class="clickable tab secondary inActive" onclick="tab(this.id);">
                            2
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script type='text/javascript' src='./script.js'></script>
    </body>
</html> 
```

CSS

```
/* removes the top and left whitespace */
* { margin:0; padding:0; }

/* ensure full screen */
html, body {
    width:100%;
    height:100%;
    font-family: "Courier New", Courier, monospace;
    font-size: 95%;
}

/* remove the scrollbars */
canvas {
    display:block;
}

#menuCtrl {
    position: absolute;
    margin: 5px;
}

#menuInfo {
    position: absolute;
    bottom: 0;
    right: 0;
    margin: 5px;
}

.menuWrapper {
}

.menuForm {
    float: left;
    margin-top: 22px;
    padding: 5px;
    background-color: white;
    border: 2px solid black;
    border-radius: 10px;
    border-top-left-radius: 0;
    box-shadow: 3px 3px 5px #333;
}

.menuForm table {
    padding-top: 3px;
}
.menuForm td, th {
    white-space: nowrap;
}
.menuForm th {
    text-align: left;
}

.menuTabs {
    position: absolute;
    white-space: nowrap;
    top: 0;
}

.menuTabs div.tab {
    float: left;
    height: 20px;
    min-width: 20px;
    margin: 0;
    padding: 0 5px 0 5px;
    text-align: center;
    background-color: white;
    border: 2px solid black;
    border-top-left-radius: 5px;
    border-top-right-radius: 5px;
}
.menuTabs div.secondary {
    border-left: 0px;
}
.menuTabs div.active {
    opacity: 1;
    border-bottom: 2px solid white;
}
.menuTabs div.active.showHide {
    border-bottom: 2px solid black;
}
.menuTabs div.inActive {
    opacity: .75;
    border-bottom: 2px solid black;
}

.clickable {
    cursor: pointer;
}
.visible {
    text-decoration: underline;
    text-decoration-color: black;
}
.invisible {
    text-decoration: line-through;
    text-decoration-color: red;
}
.hidden {
    display: none;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T09:37:37.197

请尝试以下方法：http: [//jsfiddle.net/bQ6vZ/1/](http://jsfiddle.net/bQ6vZ/1/)。

那是你想要的表现吗？

我添加了以下 CSS 规则：

```
#menuInfoWrapper.hidden {
    display: block;
}
#menuInfoWrapper.hidden #menuInfoTabs {
    top: auto;
    bottom: 0;
    right: 0;
} 
```

并在 JS 中添加了两行，即下图的`hide('menuInfoWrapper');`and`show('menuInfoWrapper');`行：

```
 else if(id == 'menuInfoTabHide') {
        hide('menuInfoTab1');
        hide('menuInfoTab2');
        hide('menuInfoFormDiv');
        hide('menuInfoFormWrapper');
        hide('menuInfoTabHide');
        show('menuInfoTabShow');
    }
    else if(id == 'menuInfoTabShow') {
        show('menuInfoTab1');
        show('menuInfoTab2');
        show('menuInfoFormDiv');
        show('menuInfoWrapper');
        hide('menuInfoTabShow');
        show('menuInfoTabHide');
    } 
```

希望这可以帮助。

# apache - 使用 Apache 服务器的 WebDAV 文件夹配额

> ID：11481639
> 
> 赞同：1
> 
> 时间：2012-07-14T06:37:18.657
> 
> 标签：apache, limit, webdav, quota

我正在尝试在我的 CentOS 服务器上设置一个 WebDAV 文件夹。我大部分都成功了。我的问题是我正在尝试在文件夹上设置大小限制（配额）。我找到了一个博客，其中详细说明了如何使用“DAVSATMaxAreaSize”命令来做到这一点。但是，当我重新启动 Apache 时，我收到错误消息：“无效命令 'DAVSATMaxAreaSize'，可能拼写错误或由未包含在服务器配置中的模块定义”。这是否意味着没有安装支持该命令的模块？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T13:08:49.110

你需要重新编译你的apache。

1.  [从http://www.geocities.jp/t_sat7/webdav/webdav.html](http://www.geocities.jp/t_sat7/webdav/webdav.html)下载补丁
2.  从 centos repos 下载 apache 的 rpm 源代码。用你下载的补丁修补它并重新编译apache。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T11:15:09.337

我在我的服务器上遇到了问题，`Ubuntu 12.04`但我不想重新编译我的`apache`. 我按如下方式“解决”了它：

1.  我使用 dd 创建了一个文件容器（100MB）：

    `dd if=/dev/zero of=/var/webdav-file-container bs=1048576 count=100`

2.  并在该容器中创建了一个文件系统：

    `mkfs.ext4 /var/webdav-file-container`

3.  然后我将此容器安装为我的共享文件夹：

    `mount /var/webdav-file-container /var/webdav-share`

因此，现在容器中的文件系统具有固定大小，apache 不能写入超过 100MB。唯一的问题是用户不知道该共享上还剩下多少空间。Windows 客户端报告它自己的系统驱动器的大小......

# matplotlib - 如何在 matplotlib 中一次分配多个标签？

> ID：11481644
> 
> 赞同：71
> 
> 时间：2012-07-14T06:38:13.697
> 
> 标签：matplotlib, label, legend

我有以下数据集：

```
x = [0, 1, 2, 3, 4]
y = [ [0, 1, 2, 3, 4],
      [5, 6, 7, 8, 9],
      [9, 8, 7, 6, 5] ] 
```

现在我绘制它：

```
import matplotlib.pyplot as plt
plt.plot(x, y) 
```

`.legend()`但是，我想用这个命令标记 3 个 y 数据集，这会在调用时引发错误：

```
lineObjects = plt.plot(x, y, label=['foo', 'bar', 'baz'])
plt.legend()

File "./plot_nmos.py", line 33, in <module>
  plt.legend()
...
AttributeError: 'list' object has no attribute 'startswith' 
```

当我检查`lineObjects`：

```
>>> lineObjects[0].get_label()
['foo', 'bar', 'baz']
>>> lineObjects[1].get_label()
['foo', 'bar', 'baz']
>>> lineObjects[2].get_label()
['foo', 'bar', 'baz'] 
```

## 问题

有没有一种优雅的方法可以通过使用该`.plot()`方法来分配多个标签？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-07-14T17:59:09.403

您可以遍历您的线对象列表，因此标签是单独分配的。带有内置 python`iter`函数的示例：

```
lineObjects = plt.plot(x, y)
plt.legend(iter(lineObjects), ('foo', 'bar', 'baz'))` 
```

**编辑：**更新到 matplotlib 1.1.1 后，看起来`plt.plot(x, y)`y 作为列表列表（由问题作者提供）不再起作用。`numpy.array`在将 y 传递为（假设 (numpy)[http://numpy.scipy.org/] 之前已导入）之后，仍然可以考虑在不迭代 y 数组的情况下绘制一步。

在这种情况下，使用`plt.plot(x, y)`（如果 2D y 数组中的数据排列为列 [axis 1]）或`plt.plot(x, y.transpose())`（如果 2D y 数组中的数据排列为行 [axis 0]）

**编辑2：**正如@pelson所指出的（见下面的评论），该`iter`功能是不必要的，一个简单的`plt.legend(lineObjects, ('foo', 'bar', 'baz'))`作品完美

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-07-15T15:54:13.707

无法直接将这两个数组相互绘制（至少版本 1.1.1），因此您必须循环遍历您的 y 数组。我的建议是同时遍历标签：

```
import matplotlib.pyplot as plt

x = [0, 1, 2, 3, 4]
y = [ [0, 1, 2, 3, 4], [5, 6, 7, 8, 9], [9, 8, 7, 6, 5] ]
labels = ['foo', 'bar', 'baz']

for y_arr, label in zip(y, labels):
    plt.plot(x, y_arr, label=label)

plt.legend()
plt.show() 
```

编辑：@gcalmettes 指出，作为 numpy 数组，可以同时绘制所有线（通过转置它们）。有关详细信息，请参阅@gcalmettes 答案和评论。

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2012-11-17T14:19:57.543

我遇到了同样的问题，现在我找到了一个最简单的解决方案！希望这对你来说还不算太晚。没有迭代器，只需将结果分配给结构...

```
from numpy import *
from matplotlib.pyplot import *
from numpy.random import *

a = rand(4,4)
a
>>> array([[ 0.33562406,  0.96967617,  0.69730654,  0.46542408],
   [ 0.85707323,  0.37398595,  0.82455736,  0.72127002],
   [ 0.19530943,  0.4376796 ,  0.62653007,  0.77490795],
   [ 0.97362944,  0.42720348,  0.45379479,  0.75714877]])

[b,c,d,e] = plot(a)
legend([b,c,d,e], ["b","c","d","e"], loc=1)
show() 
```

看起来像这样： ![在此处输入图像描述](../Images/0141e36194a0e93c28c3550c096711f0.png)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2020-05-28T22:07:16.207

目前最好的解决方案是：

```
lineObjects = plt.plot(x, y)  # y describes 3 lines
plt.legend(['foo', 'bar', 'baz']) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-14T13:15:14.070

您可以在绘制曲线时给出标签

```
import pylab as plt

x = [0, 1, 2, 3, 4]
y = [ [0, 1, 2, 3, 4], [5, 6, 7, 8, 9], [9, 8, 7, 6, 5] ]
labels=['foo', 'bar', 'baz']
colors=['r','g','b']

# loop over data, labels and colors
for i in range(len(y)):
    plt.plot(x,y[i],'o-',color=colors[i],label=labels[i])

plt.legend()
plt.show() 
```

![在此处输入图像描述](../Images/336409fce041ab9c902bb2aa22623190.png)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-11-09T12:36:09.747

# 在 numpy 矩阵图的情况下，为每列一次分配多个图例

我想根据绘制一个有两列的矩阵来回答这个问题。

假设您有一个 2 列矩阵`Ret`

然后可以使用此代码一次分配多个标签

```
import pandas as pd, numpy as np, matplotlib.pyplot as plt
pd.DataFrame(Ret).plot()

plt.xlabel('time')
plt.ylabel('Return')
plt.legend(['Bond Ret','Equity Ret'], loc=0)
plt.show() 
```

我希望这有帮助

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-11-11T03:23:55.843

当我在数组的列中有一组`x`值和多个值时，经常会出现这个问题。`y`我真的不想在循环中绘制数据，多次调用`ax.legend`/`plt.legend`并不是一个真正的选择，因为我想绘制其他东西，通常以同样烦人的格式。

不幸的是，[`plt.setp`](https://matplotlib.org/api/_as_gen/matplotlib.pyplot.setp.html)在这里没有帮助。在较新版本的 matplotlib 中，它只是将整个列表/元组转换为字符串，并将整个内容作为标签分配给所有行。

因此，我制作了一个实用函数来包装对`ax.plot`/`plt.plot`的调用：

```
def set_labels(artists, labels):
    for artist, label in zip(artists, labels):
        artist.set_label(label) 
```

你可以这样称呼它

```
x = np.arange(5)
y = np.random.ranint(10, size=(5, 3))

fig, ax = plt.subplots()
set_labels(ax.plot(x, y), 'ABC') 
```

这样您就可以将所有正常的艺术家参数指定为`plot`，而不必在代码中查看循环。另一种方法是将整个调用 plot 放入一个只解包标签的实用程序中，但这需要大量重复才能弄清楚如何解析多个数据集，可能具有不同数量的列，并分布在多个参数中，关键字或其他。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-05-25T09:04:18.943

我使用以下内容显示数据框的标签，而不使用数据框图：

```
lines_ = plot(df)
legend(lines_, df.columns) # df.columns is a list of labels 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-06-05T13:35:51.830

如果您使用的是 DataFrame，您还可以遍历要绘制的数据的列：

```
# Plot figure
fig, ax = plt.subplots(figsize=(5,5))
# Data
data = data
# Plot
for i in data.columns:
    _ = ax.plot(data[i], label=i)
    _ = ax.legend() 
plt.show() 
```

# shell - shell脚本中的算术语法错误

> ID：11481648
> 
> 赞同：1
> 
> 时间：2012-07-14T06:39:02.557
> 
> 标签：shell, ksh

Shell Script 中有一个工具，它在中心显示菜单并执行一些任务。运行脚本时出现此错误：

```
\007
In center function
COLUMNS : columns 142
2 : 13
/ShellsAndSQLs/task_menu: line 80:  (columns 142 - 13) / 2 : arithmetic syntax error 
```

此代码是从 solaris env 复制的，其中 echo $COLUMNS(why??) 显示空白值。当复制到 Redhat Env 时，将 echo $COLUMNS 显示为 142（应该全屏显示）。这是代码的相关部分：

```
#!/bin/ksh 

trap "tput sgr0; tput clear;" 1 2 3 4 5 6 7 8 10 11 12 13 14 15

if [ $# -ne 2 ]
then
    echo "Wrong parameters specified" >&2
    exit 1
fi

if [ "$COLUMNS" = "" ]
then
    echo "column in if"
    stty -a |
    awk -F \; '/columns/ { for (i = 1; i <= NF; i++) {
                               if ($i ~ "columns") {
                                   sub(" *columns *= *", "", $i);
                                   print $i;
                                   exit
                               }
                         }
             }' |
    read COLUMNS
fi

center()
{

 echo "In center function"
 echo "COLUMNS : $COLUMNS"
 echo "2 : ${#2}"
    n=$(( ($COLUMNS - ${#2}) / 2 ))
   #n=`expr $COLUMNS - ${#2} / 2`;
    echo "n is $n";
   echo "COLUMNS in center fun : $COLUMNS" ;
    tput cup $1 $n
    echo $_N $2 $_C
} 
```

我知道它不会进入 if 条件，因为 COLUMNS 不是空白的。此外，COLUMNS 可能会根据窗口的大小而有所不同。我该如何制作

```
n=$(( ($COLUMNS - ${#2}) / 2 )) 
```

工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T06:56:15.097

您`echo`和您的错误消息似乎掌握了线索：

```
COLUMNS : columns 142 
```

和

```
/ShellsAndSQLs/task_menu: line 80:  (columns 142 - 13) / 2 : arithmetic syntax error 
```

“列”（全部小写）从何而来？不知何故，您的变量正在添加一些文本。

这不会发生在我身上，`ksh`我看不到它在你的剧本中发生的地方。

# ios - 如何在我运行程序时将第二个选项卡视图设置为首先出现

> ID：11481651
> 
> 赞同：0
> 
> 时间：2012-07-14T06:39:20.077
> 
> 标签：ios

我有一个带有 3 个选项卡的选项卡视图控制器，将其设置为“是初始视图控制器”。第一个选项卡是我运行程序时看到的默认选项卡视图。

有没有办法让第二个标签首先出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T06:48:16.143

```
[theTabBar setSelectedItem:yourViewController]; 
```

请参阅[UITabBar 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBar_Class/Reference/Reference.html)

# c# - 为我的应用程序添加打印机

> ID：11481655
> 
> 赞同：0
> 
> 时间：2012-07-14T06:40:14.053
> 
> 标签：c#, network-printers

我想将我的应用程序的打印机添加到网络打印机列表中。我的意思是类似于 Adob​​e PDF 所做的事情。

我可以通过以下代码获取网络中的所有打印机：

```
// Use the ObjectQuery to get the list of configured printers
System.Management.ObjectQuery oquery =
new System.Management.ObjectQuery("SELECT * FROM Win32_Printer");

System.Management.ManagementObjectSearcher mosearcher =
new System.Management.ManagementObjectSearcher(oquery);

System.Management.ManagementObjectCollection moc = mosearcher.Get();

foreach (ManagementObject mo in moc)
{
    lstPrinter.Items.Add(mo["Name"]);
} 
```

我不知道我应该搜索什么才能找到这个。请帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T10:10:28.490

请参阅[命令行打印机控制](http://www.robvanderwoude.com/2kprintcontrol.php)。您可以通过以下方式运行此代码`Procces.Start(...)`：

```
rundll32.exe printui.dll,PrintUIEntry /? 
```

Microsoft 支持的此链接可能很有用：

*   [如何在 Windows XP 中添加无需用户交互的打印机](http://support.microsoft.com/kb/314486)

如果您坚持使用 WMI，[WMI Code Creator](http://www.microsoft.com/en-us/download/details.aspx?id=8572)工具可以帮助您。

# ruby-on-rails-3 - 默认活动记录存储会话超时

> ID：11481658
> 
> 赞同：2
> 
> 时间：2012-07-14T06:41:36.297
> 
> 标签：ruby-on-rails-3, session, activerecord, session-state, session-timeout

有人可以告诉我使用`activeRecord`商店时的默认超时时间是多少吗？

我不想“设置”超时，因为我希望它表现为会话 cookie。即：当用户关闭浏览器时过期，如果您手动设置过期日期，则不会发生这种情况。

当我关闭到期日期时，会话将在几个小时内的某个时间超时，而不会使用。为什么会这样？

所以我真正要问的是，当用户保持他/她的浏览器打开并且仅当他/她点击注销或关闭浏览器时会话是否可能完全不超时？牢记：

`activeRecord` `session_store`如果您在用户关闭浏览器时指定过期时间，cookie 不会被删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:10:50.143

我认为这里有两点，Session Timeout 和 Web Server 的 Page/HTTP Timeout。

据我了解，ActiveRecord 存储会话存储不会超时，除非用户离开页面。

或者，如果 Web 服务器在足够的空闲时间后决定断开连接，这反过来又否定了会话。

# sql - 这个数据库设计正确吗？

> ID：11481662
> 
> 赞同：3
> 
> 时间：2012-07-14T06:42:20.903
> 
> 标签：sql, database-design

我参加了一次面试，根据我的说法，它进行得很好，但根据面试官的说法却不是。他问了我几个我回答正确的问题和两个实践问题。其中之一与数据库有关。

问题是这样的

一所学校由几个班级组成，每个班级学习由几位老师教授的不同科目。您必须设计数据库，以便人们可以知道哪个老师教什么科目什么课程？

它看起来很简单，我设计了它。

就像是：

**教师桌**

```
|  ID    |  Teacher_Name    |
-----------------------------
|   1     |   Ankit         |
|   2     |   Jack          | 
```

**班级表**

```
 |  ID    |  class_Name      |
    -----------------------------
    |   1     |   First         |
    |   2     |   Second        | 
```

**主题表**

```
 |  ID    |  subject_Name    |
    -----------------------------
    |   1     |   English       |
    |   2     |   stats         | 
```

和一张主桌，将它们全部结合起来，并知道哪个老师教什么科目，哪个班级

**主表**

```
 |  ID     | Teacher_id  |  class_id |  subject_id  |
    ----------------------------------------------------
    |   1     |   1         |    1      |      1       |
    |   2     |   1         |    2      |      2       | 
```

只是为了弄清楚我做了什么......我什至为这个问题写了一个选择查询，即使他没有要求我这样做。

我只是 sql 的初学者，所以我不知道这是否正确，但根据我的说法，如果我需要对数据库进行更改，它非常有用。添加课程或主题的示例。

现在根据他的说法，这个设计根本行不通，他说我什至不应该认为自己是初学者，而是低于初学者的水平。

所以请善意地告诉我这对与否，如果不是，那么设计数据库的正确方法是什么。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T12:36:09.840

> 它看起来很简单

这可能是问题的一部分。大多数数据库问题*看起来*很简单。但实际上很少*有*非常简单的。

*   并非每位教师都有资格教授每所学校的所有科目。您可能需要一张表格，将教师与他们有资格教授的科目配对。
*   一些实体以他们的名义携带他们的完整身份证明。（主题似乎有；人们没有。）未能对“subject_name”提供唯一约束将是一个错误，无论该表是否具有 id 号（这可能很容易成为另一个错误）。
*   “大师”不是问题域中的术语。也就是说，如果您查看大学课程目录，您将找不到标题为“主章节”的章节或部分，或任何类似的内容。但是你 *会*发现一个部分告诉你每个学期提供哪个科目，
    这是一个线索。在大学里，并不是每个学期都提供所有课程。
*   您还需要对“master”表 {teacher_id, class_id, subject_id} 进行唯一约束。
*   在同一张表中，您需要在 {teacher_id, subject_id} 和 {class_id, subject_id} 上*重叠外键约束。*

我可以继续。但这就是为什么*我*不会雇用你的原因。

**你得到了模棱两可、不完整的要求。（这可能不是意外。）你没有做足够的事情来澄清它们。**

> 我只是 sql 的初学者

在某些时候，我们都是初学者。

他们想聘请初学者吗？如果不是，那可能是另一个问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-14T06:49:55.300

除了一个故障似乎很好，如果您将教师分配给具有错误科目的班级，则主表中的故障，您不能在数据库中对此进行限制，恕我直言，应该还有一个映射班级和科目的中间表IE `ClassSubjectMap`

```
 ----------------------------------------------------
      |  CSMapID |  class_id |  subject_id  |
      ----------------------------------------------------
      |   1     |    1      |      1       |
      ----------------------------------------------------
      |   2     |    2      |      2       |
      ---------------------------------------------------- 
```

然后在 Master 表中使用此映射 ID 将教师与学科进行映射，这样就无法将教师分配给工程类教授生物。除了这个其他表似乎很好。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-14T15:58:01.640

关于[**多值依赖和 4NF**](http://en.wikipedia.org/wiki/Fourth_normal_form)

![在此处输入图像描述](../Images/7923ac5bc65b588d213837ad5cf8af03.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T07:57:54.963

也许您不想明确存储有关特定教师可以教授哪些科目的信息。实际上，我们在教育过程中有一个真正的应用程序，我们不存储此类信息，而且我们还没有非常需要它来实现。所以我想你也可以不用它，因为你没有被要求限制用户将教师分配给科目和班级。

我认为您想要限制的是，对于特定班级的每个科目只有一名教师。所以我会选择一些简单的东西，比如名为“Courses”的表，列 {id,teacher_id,subject_id,class_id,term_num} 和对 {subject_id,class_id,term_num} 的唯一约束，将教师作为属性保留在这里。

# c# - 如果我的软件使用它，我是否必须在每个客户端上安装 sql server？

> ID：11481663
> 
> 赞同：14
> 
> 时间：2012-07-14T06:42:25.003
> 
> 标签：c#, .net, sql-server, deployment, runtime

如果我们用 c#（或基本上是 .Net）开发一些软件，我们不会将 Visual Studio 安装到任何客户端。客户端只需要安装所需的 .Net 框架（1.0、1.1、2.0、3.0 等），我们就可以开始了。

同样，如果我们在 VC2008 中制作应用程序，他只需要 Visual C++ 2008 运行时（可从 MS 站点免费获得，大约 4-5Mb）。所以，基本上，我们只需要*运行时环境*。但没有任何 SQL Server 2008 运行时（或者我不知道？）。

所以，我的问题是，如果我的软件使用的是 SQL Server 2008，客户端需要什么运行时（或其他任何东西）才能工作？

另外，还有一件事，我看到有一个 SQL Server express 版本，据说我可以在部署中使用它，但是如果我的软件只有 5、10 或 20Mb，我需要安装大约一个演出，这似乎有点沉重用户可以运行它。

最后，如果我使用的是 SQL Server 2008 Developer Edition（我是，或者企业版不确定）并且我在客户端上安装了 SQL Server express，如果我的软件使用了 express 中不支持的某些功能，它不会导致一些问题版？（比如数据库的数量，或并发连接，或任何东西）。

所以？它需要什么运行时？如果安装 sql server express 是唯一的选择，如果我使用的是 express 版本不支持的一些功能怎么办？当然，我不能继续在每个客户端上完整安装开发者版！

**编辑：**如果这有任何帮助，我当前的项目是一个图书馆管理系统，它将安装在客户端（我正在为其制作的图书管理员的计算机），所以这里没有服务器客户端的情况. 那我应该在他的电脑上安装sql express吗？此外，正如`YvesR`他在回答中指出的那样，该链接仅显示三个版本（主要版本），但[http://msdn.microsoft.com/en-us/library/cc645993%28v=SQL.110%29.aspx](http://msdn.microsoft.com/en-us/library/cc645993%28v=SQL.110%29.aspx)显示更多详细对比。那么，在我刚刚描述的这个特定场景中，如果我只是在客户端机器上部署和表达版本就足够了吗？

现在，关于我所说的某些功能在快速版中不可用， http: [//msdn.microsoft.com/en-us/library/cc645993](http://msdn.microsoft.com/en-us/library/cc645993%28v=SQL.110%29.aspx#CrossBoxScale) (v=SQL.110).aspx#CrossBoxScale 表明快速版是有限的到大小为 10Gb 的数据库，现在我知道在我上面描述的场景中已经足够了，但是如果在其他情况下我需要更多呢？比快递版不行，比我应该怎么部署？

最后，[http://www.microsoft.com/sqlserver/en/us/get-sql-server/how-to-buy.aspx](http://www.microsoft.com/sqlserver/en/us/get-sql-server/how-to-buy.aspx)显示了另外两个版本，Compact 和 Developer，我了解 developer，但这个紧凑版是什么? [更重要的是，为什么这里](http://msdn.microsoft.com/en-us/library/cc645993%28v=SQL.110%29.aspx)没有列出或列出这些？

**编辑 2：**它的 4Gb 是限制，而不是 10Gb。10Gb 在 SQL Server 2008 R2 Express 及更高版本中，4Gb 在 SQL Server 2008 Express 中。
marc_s：谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-14T06:51:47.777

如果您使用 SQL Server 数据库将数据持久保存在您的应用程序中，您需要

一种。客户端-服务器基础架构，您的客户端通过 LAN 连接到中央 SQL Server

湾。或使用客户端安装的 sql server 版本（我猜这是你想要的）。为此，您可以使用 SQL Server Express 版本或仅使用 MSDE（桌面版）。

有关更多详细信息，请参阅此博客文章[http://searchsqlserver.techtarget.com/tip/SQL-Server-2005-Express-vs-Desktop-Engine-MSDE](http://searchsqlserver.techtarget.com/tip/SQL-Server-2005-Express-vs-Desktop-Engine-MSDE)或谷歌，MS 本身提供了大量有关 MSDE 的信息。

编辑：自 2012 年以来不再有 MSDE，但 SQL Server 2012 Express 带来了类似于 MSDE 的模式。见这里： http: [//www.microsoft.com/sqlserver/en/us/editions/2012-editions/express.aspx](http://www.microsoft.com/sqlserver/en/us/editions/2012-editions/express.aspx)

正如您在此处看到的那样：http: [//www.microsoft.com/sqlserver/en/us/editions.aspx](http://www.microsoft.com/sqlserver/en/us/editions.aspx)，不应该有您使用的功能不适用于桌面应用程序恕我直言。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T06:51:34.627

好的，让我们备份一下。您是否要求每个软件客户端都拥有自己的本地数据库？如果是这种情况，则有更简单的方法可以在客户端上存储数据（我建议将序列化为文件作为一种方法）。

如果您的要求是让每个客户端都连接到中央数据库，那么除了 .net 核心库之外，您不需要任何运行时组件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-14T06:50:53.107

除了安装的 .NET 框架（所有 .NET 可执行文件都需要它）之外，数据库访问不需要客户端运行时。

如果您希望数据库与客户端免费选项驻留在同一台机器上，例如 SQL Server Express 或 SQLite。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T08:59:41.257

以下是 Windows 应用程序的两种方法：

1.  每个客户端将单独使用的桌面应用程序，无需将计算机分配为服务器。您只需要`SSMS`为您的客户安装和应用程序。更新/删除/插入操作将单独完成。

2.  Client-Server Approach, install `SSMS` and attach your DB on a computer. This computer will serve your clients as a server. Then install the exe file on any client computer, make sure the clients are connected to the server using the IP.

# php - 将值从 PHP 返回到 HTML

> ID：11481666
> 
> 赞同：-1
> 
> 时间：2012-07-14T06:43:04.557
> 
> 标签：php, html

编辑：我有两个文件，一个是 HTML，另一个是 PHP 脚本。我正在做一个简单的计算器。在我的 HTML 中，我有一个包含 4 个文本框的简单表单。第一个文本框是有一个数字。第二个文本框是要执行的操作。第三个文本框是第二个数字。第四个文本框就是答案。当用户单击计算按钮时，action 属性将 HTML 重定向到执行所有算法的 PHP 脚本。我希望 PHP 脚本将答案返回到我的 HTML 表单中的第四个文本框。

我怎样才能做到这一点？

这是我的 HTML 代码。

```
<!DOCTYPE html>
<html>
<head>
<meta name = "description" content = "This is a home page"/>
<meta name = "author" content = "William Salazar" />
<meta name = "keywords" content = "exercise for home page"/>
<title>Calculator</title>
</head>
<body>
    <fieldset>
        <legend>Calculator</legend>
        <form action = "calculate.php" method = "post">
            Please type in two numbers and an operation (ex: 2 + 3)<br/>
            <input type = "text" name = "fNum" size = "2"/>
            <input type = "text" name = "op" size = "2"/>
            <input type = "text" name = "sNum" size = "2"/>=
        <input type = "text" name = "ans" size = "2" readonly = "read" value = "<?php echo htmlspecialchars($ans);?>"/>
            <br/><br/>
            <input type = "submit" value = "Calculate"/>
        </form>
    </fieldset>
</body>
</html> 
```

这是我的 PHP 脚本的代码。

```
<?php
function addition()
{

    $sum = (float)$_POST['fNum'] + (float)$_POST['sNum'];
    $_POST['ans'] = (string)$sum;   
    "<form action ='CalculatorForm.php' method = 'post'>"
    "</form>"
}

    switch($_POST['op'])
    {
        case '+':           
            addition();         
        break;
        case '-':
            subtraction();
        break;
        case '*':
            multiplication();
        break;
        case '/':
            division();     
        break;
        case '^':
            power();
        break;
        default:
        break;
    }

?> 
```

当然，我还没有完成其他功能。我最初试图测试我的加法功能，如果可行，我将复制并粘贴代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T06:49:37.710

使用 AJAX 将数据从 HTML 发送到 PHP 并返回。
此外，您可以使用 Javascript 进行所有计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T07:57:20.883

如果这是一个家庭作业问题，请继续使用您的代码，否则使用 AJAX 或 JAVASCRIPT 解决方案。

一些提示，如果您希望继续使用经典的表单提交解决方案：

*   使用一页进行显示和计算，例如`calculator.php`。
*   将您的表单操作设置为同一页面，即`calculator.php`或删除调用同一页面的操作。
*   提交后，像上面一样进行计算，将结果传递给`$ans`，因为您使用此 var 来呈现表单。
*   如果您仍然有问题，请返回这里。

# java - 为什么多次添加同一个 JComponent 对象不能显示？

> ID：11481672
> 
> 赞同：4
> 
> 时间：2012-07-14T06:44:30.543
> 
> 标签：java, swing

例子：

```
public class JFrameTest {
  public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            JFrame frame = new JFrame();
            JButton button = new JButton("Hello!");
            frame.getContentPane().add(button);
            frame.getContentPane().add(button);
            frame.pack();
            frame.setVisible(true);
            frame.setLocationRelativeTo(null);
        }
    });
  }
} 
```

在上面的示例中，即使没有错误，也只添加了一次“按钮”对象。我问这个的原因是，我想在 JFrame 和 JDialog 上添加一个相同的 JPanel 对象（在某些表上双击以进行编辑/删除功能）。我可以通过拥有两个 JPanel 对象来解决它，但只是想知道为什么它不可能。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T06:53:50.787

正如您已经发现的那样，您只能在 Swing 层次结构中添加一次 Swing 组件。这在[“使用顶级组件教程”中有记录](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)

> 每个 GUI 组件只能包含一次。如果一个组件已经在一个容器中，并且您尝试将其添加到另一个容器中，则该组件将从第一个容器中删除，然后添加到第二个容器中。

不完全确定这个决定是否存在技术限制，但我可以想象，例如，[`getParent`](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#getParent%28%29)如果您能够将相同的组件添加到两个`Container`s ，该方法会产生奇怪的结果

# algorithm - 在 Haskell 中使用向量来提高性能

> ID：11481675
> 
> 赞同：25
> 
> 时间：2012-07-14T06:45:06.650
> 
> 标签：algorithm, haskell

我对 Haskell 很陌生，我有一个问题，即使用不纯（可变）数据结构可以提高性能。我试图将我听到的一些不同的东西拼凑起来，所以如果我的术语不完全正确，或者有一些小错误，请多多包涵。

为了具体说明，请考虑快速排序算法（取自 Haskell wiki）。

```
quicksort :: Ord a => [a] -> [a]
quicksort []     = []
quicksort (p:xs) = (quicksort lesser) ++ [p] ++ (quicksort greater)
    where
        lesser  = filter (< p) xs
        greater = filter (>= p) xs 
```

这不是“真正的快速排序”。“真正的”快速排序算法是就地的，但事实并非如此。这是非常低效的内存。

另一方面，可以在 Haskell 中使用向量来实现就地快速排序。[这个stackoverflow答案](https://stackoverflow.com/a/7833043/1525027)中给出了一个例子。

第二个算法比第一个快多少？大 O 符号在这里没有帮助，因为性能改进将来自更有效地使用内存，而不是更好的算法（对吗？）。我厌倦了自己构建一些测试用例，但我很难让事情运行起来。

一个理想的答案会给出一些关于是什么让就地 Haskell 算法在理论上更快的想法，以及一些测试数据集上运行时间的示例比较。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-14T16:14:45.413

> 另一方面，可以在 Haskell 中使用向量来实现就地快速排序。
> 
> 第二个算法比第一个快多少？

当然，这取决于实施。如下所示，对于不太短的列表，对可变向量或数组进行适当的就地排序比排序列表快得多，即使包括从列表到列表的转换时间（*并且该转换弥补了大部分时间*）。

但是，列表算法会产生增量输出，而数组/向量算法在完成之前不会产生任何结果，因此排序列表仍然是可取的。

我不确切知道链接的可变数组/向量算法做错了什么。但他们做错了事。

对于可变向量代码，它似乎使用了*盒装*向量，并且是多态的，两者都会对性能产生重大影响，尽管如果函数是`{-# INLINABLE #-}`.

对于`IOUArray`代码，好吧，它看起来很有趣，但速度很慢。它使用`IORef`,`readArray`和`writeArray`并没有明显的严格性。那么，它所花费的糟糕时间就不足为奇了。

使用, 对（单态）C 代码进行更[直接的翻译](http://www.haskell.org/haskellwiki/Introduction/Direct_Translation)`STUArray`，并使用包装器使其在列表中工作¹，

```
{-# LANGUAGE BangPatterns #-}
module STUQuickSort (stuquick) where

import Data.Array.Base (unsafeRead, unsafeWrite)
import Data.Array.ST
import Control.Monad.ST

stuquick :: [Int] -> [Int]
stuquick [] = []
stuquick xs = runST (do
    let !len = length xs
    arr <- newListArray (0,len-1) xs
    myqsort arr 0 (len-1)
    -- Can't use getElems for large arrays, that overflows the stack, wth?
    let pick acc i
            | i < 0     = return acc
            | otherwise = do
                !v <- unsafeRead arr i
                pick (v:acc) (i-1)
    pick [] (len-1))

myqsort :: STUArray s Int Int -> Int -> Int -> ST s ()
myqsort a lo hi
   | lo < hi   = do
       let lscan p h i
               | i < h = do
                   v <- unsafeRead a i
                   if p < v then return i else lscan p h (i+1)
               | otherwise = return i
           rscan p l i
               | l < i = do
                   v <- unsafeRead a i
                   if v < p then return i else rscan p l (i-1)
               | otherwise = return i
           swap i j = do
               v <- unsafeRead a i
               unsafeRead a j >>= unsafeWrite a i
               unsafeWrite a j v
           sloop p l h
               | l < h = do
                   l1 <- lscan p h l
                   h1 <- rscan p l1 h
                   if (l1 < h1) then (swap l1 h1 >> sloop p l1 h1) else return l1
               | otherwise = return l
       piv <- unsafeRead a hi
       i <- sloop piv lo hi
       swap i hi
       myqsort a lo (i-1)
       myqsort a (i+1) hi
   | otherwise = return () 
```

以及对未装箱向量的良好排序（Introsort，而不是快速排序）的包装器，

```
module VSort where

import Data.Vector.Algorithms.Intro
import qualified Data.Vector.Unboxed as U
import Control.Monad.ST

vsort :: [Int] -> [Int]
vsort xs = runST (do
    v <- U.unsafeThaw $ U.fromList xs
    sort v
    s <- U.unsafeFreeze v
    return $ U.toList s) 
```

我得到的时间更符合预期（**注意：**对于这些时间，在调用排序算法之前已经`deepseq`编辑了随机列表。没有它，转换为 an`STUArray`会慢得多，因为它会首先评估一长串 thunk确定长度[。vector](http://hackage.haskell.org/package/vector)`fromList`包的转换不存在这个问题。将 移到转换为，其他排序[和转换，在vector情况下]算法花费的时间要少一点，所以[vector](http://hackage.haskell.org/package/vector-algorithms)之间的区别[-algorithms](http://hackage.haskell.org/package/vector-algorithms)的 introsort 和快速排序变得更大一些。）：`deepseq``STUArray``STUArray`

```
list size: 200000                    -O2     -fllvm  -fllvm-O2
────────             ────────   ────────   ────────   ────────
Data.List.sort      0.663501s  0.665482s  0.652461s  0.792005s
Naive.quicksort     0.587091s  0.577796s  0.585754s  0.667573s
STUArray.quicksort   1.58023s  0.142626s  1.597479s  0.156411s
VSort.vsort         0.820639s  0.139967s  0.888566s  0.143918s 
```

没有优化的时代对`STUArray`. `unsafeRead`并且`unsafeWrite`必须内联才能快速。如果没有内联，您将获得每次调用的字典查找。因此对于大型数据集，我省略了未优化的方法：

```
list size: 3000000         -O2   -fllvm-O2
────────              ────────    ────────
Data.List.sort      16.728576s  16.442377s
Naive.quicksort     14.297534s  12.253071s
STUArray.quicksort   2.307203s   2.200807s
VSort.vsort          2.069749s   1.921943s 
```

您可以看到，如果操作正确，对可变未装箱数组进行就地排序比基于列表的排序要快得多**。**~~排序和未装箱可变向量上的排序之间的差异`STUArray`是由于算法不同还是这里的向量确实更快，我不知道。由于我从未观察到向量比`STUArray`s 更快²，我倾向于相信前者。~~`STUArray`快速排序和 introsort 之间的区别部分是由于[矢量](http://hackage.haskell.org/package/vector)包提供的更好的列表之间的转换，部分原因是不同的算法。

* * *

在[Louis Wasserman](https://stackoverflow.com/questions/11481675/using-vectors-for-performance-improvement-in-haskell/11485331#comment15168576_11483226)的建议下，我使用[矢量算法](http://hackage.haskell.org/package/vector-algorithms)包中的其他排序算法运行了一个快速基准测试，并使用了一个不太大的数据集。结果并不令人惊讶，良好的通用算法 heapsort、introsort 和 mergesort 都做得很好，时间接近未装箱可变数组上的快速排序（但当然，快速排序在几乎排序的输入上会降级为二次行为，而这些保证 O(n*log n) 最坏情况）。专用排序算法`AmericanFlag`和基数排序做得不好，因为输入不适合他们的目的（基数排序在较大范围的较大输入上会做得更好，因为它比数据所需的传递次数要多得多）。由于其二次行为，插入排序是迄今为止最糟糕的。

```
AmericanFlag:
list size: 300000         -O2  -fllvm-O2
────────             ────────   ────────
Data.List.sort      1.083845s  1.084699s
Naive.quicksort     0.981276s   1.05532s
STUArray.quicksort  0.218407s  0.215564s
VSort.vsort         2.566838s  2.618817s

Heap:
list size: 300000         -O2  -fllvm-O2
────────             ────────   ────────
Data.List.sort      1.084252s   1.07894s
Naive.quicksort     0.915984s  0.887354s
STUArray.quicksort  0.219786s  0.225748s
VSort.vsort         0.213507s   0.20152s

Insertion:
list size: 300000         -O2   -fllvm-O2
────────             ────────    ────────
Data.List.sort      1.168837s   1.066058s
Naive.quicksort     1.081806s   0.879439s
STUArray.quicksort  0.241958s   0.209631s
VSort.vsort         36.21295s  27.564993s

Intro:
list size: 300000         -O2  -fllvm-O2
────────             ────────   ────────
Data.List.sort       1.09189s  1.112415s
Naive.quicksort     0.891161s  0.989799s
STUArray.quicksort  0.236596s  0.227348s
VSort.vsort         0.221742s   0.20815s

Merge:
list size: 300000         -O2  -fllvm-O2
────────             ────────   ────────
Data.List.sort      1.087929s  1.074926s
Naive.quicksort     0.875477s  1.019984s
STUArray.quicksort  0.215551s  0.221301s
VSort.vsort         0.236661s  0.230287s

Radix:
list size: 300000         -O2  -fllvm-O2
────────             ────────   ────────
Data.List.sort      1.085658s  1.085726s
Naive.quicksort     1.002067s  0.900985s
STUArray.quicksort  0.217371s  0.228973s
VSort.vsort         1.958216s  1.970619s 
```

[结论：除非您有特定的理由不这样做，否则推荐使用vector-algorithms](http://hackage.haskell.org/package/vector-algorithms)中的一种良好的通用排序算法，以及在必要时从列表转换为列表的包装器，这是对大型列表进行排序的推荐方法。（这些算法也适用于盒装向量，在我的测量中比未盒装的向量慢大约 50%。）对于短列表，转换的开销会很大，以至于它不会支付。

* * *

现在，在@applicative 的建议下，看看[vector-algorithms](http://hackage.haskell.org/package/vector-algorithms) ' introsort 的排序时间，对未装箱向量的快速排序和改进的（无耻地窃取实现[`unstablePartition`](http://hackage.haskell.org/packages/archive/vector/0.9.1/doc/html/Data-Vector-Generic-Mutable.html#v:unstablePartition)）快速排序`STUArray`。

改进的`STUArray`快速排序：

```
{-# LANGUAGE BangPatterns #-}
module NQuick (stuqsort) where

import Data.Array.Base (unsafeRead, unsafeWrite, getNumElements)
import Data.Array.ST
import Control.Monad.ST
import Control.Monad (when)

stuqsort :: STUArray s Int Int -> ST s ()
stuqsort arr = do
    n <- getNumElements arr
    when (n > 1) (myqsort arr 0 (n-1))

myqsort :: STUArray s Int Int -> Int -> Int -> ST s ()
myqsort a lo hi = do
    p <- unsafeRead a hi
    j <- unstablePartition (< p) lo hi a
    h <- unsafeRead a j
    unsafeWrite a j p
    unsafeWrite a hi h
    when (j > lo+1) (myqsort a lo (j-1))
    when (j+1 < hi) (myqsort a (j+1) hi)

unstablePartition :: (Int -> Bool) -> Int -> Int -> STUArray s Int Int -> ST s Int
{-# INLINE unstablePartition #-}
unstablePartition f !lf !rg !v = from_left lf rg
  where
    from_left i j
      | i == j    = return i
      | otherwise = do
                      x <- unsafeRead v i
                      if f x
                        then from_left (i+1) j
                        else from_right i (j-1)

    from_right i j
      | i == j    = return i
      | otherwise = do
                      x <- unsafeRead v j
                      if f x
                        then do
                               y <- unsafeRead v i
                               unsafeWrite v i x
                               unsafeWrite v j y
                               from_left (i+1) j
                        else from_right i (j-1) 
```

[向量](http://hackage.haskell.org/package/vector)快速排序：

```
module VectorQuick (vquicksort) where

import qualified Data.Vector.Unboxed.Mutable as UM
import qualified Data.Vector.Generic.Mutable as GM
import Control.Monad.ST
import Control.Monad (when)

vquicksort :: UM.STVector s Int -> ST s ()
vquicksort uv = do
    let li = UM.length uv - 1
        ui = UM.unsafeSlice 0 li uv
    p <- UM.unsafeRead uv li
    j <- GM.unstablePartition (< p) ui
    h <- UM.unsafeRead uv j
    UM.unsafeWrite uv j p
    UM.unsafeWrite uv li h
    when (j > 1) (vquicksort (UM.unsafeSlice 0 j uv))
    when (j + 1 < li) (vquicksort (UM.unsafeSlice (j+1) (li-j) uv)) 
```

计时码：

```
{-# LANGUAGE BangPatterns #-}
module Main (main) where

import System.Environment (getArgs)
import System.CPUTime
import System.Random
import Text.Printf

import Data.Array.Unboxed
import Data.Array.ST hiding (unsafeThaw)
import Data.Array.Unsafe (unsafeThaw)
import Data.Array.Base (unsafeAt, unsafeNewArray_, unsafeWrite)
import Control.Monad.ST
import Control.Monad

import qualified Data.Vector.Unboxed as U
import qualified Data.Vector.Unboxed.Mutable as UM

import NQuick
import VectorQuick
import qualified Data.Vector.Algorithms.Intro as I

nextR :: StdGen -> (Int, StdGen)
nextR = randomR (minBound, maxBound)

buildArray :: StdGen -> Int -> UArray Int Int
buildArray sg size = runSTUArray (do
    arr <- unsafeNewArray_ (0, size-1)
    let fill i g
            | i < size  = do
                let (r, g') = nextR g
                unsafeWrite arr i r
                fill (i+1) g'
            | otherwise = return arr
    fill 0 sg)

buildVector :: StdGen -> Int -> U.Vector Int
buildVector sg size = U.fromList $ take size (randoms sg)

time :: IO a -> IO ()
time action = do
    t0 <- getCPUTime
    action
    t1 <- getCPUTime
    let tm :: Double
        tm = fromInteger (t1 - t0) * 1e-9
    printf "%.3f ms\n" tm

stu :: UArray Int Int -> Int -> IO ()
stu ua sz = do
    let !sa = runSTUArray (do
                st <- unsafeThaw ua
                stuqsort st
                return st)
    forM_ [0, sz `quot` 2, sz-1] (print . (sa `unsafeAt`))

intro :: U.Vector Int -> Int -> IO ()
intro uv sz = do
    let !sv = runST (do
            st <- U.unsafeThaw uv
            I.sort st
            U.unsafeFreeze st)
    forM_ [0, sz `quot` 2, sz-1] (print . U.unsafeIndex sv)

vquick :: U.Vector Int -> Int -> IO ()
vquick uv sz = do
    let !sv = runST (do
            st <- U.unsafeThaw uv
            vquicksort st
            U.unsafeFreeze st)
    forM_ [0, sz `quot` 2, sz-1] (print . U.unsafeIndex sv)

main :: IO ()
main = do
    args <- getArgs
    let !num = case args of
                 (a:_) -> read a
                 _ -> 1000000
    !sg <- getStdGen
    let !ar = buildArray sg num
        !vc = buildVector sg num
        !v2 = buildVector sg (foo num)
        algos = [ ("Intro", intro v2), ("STUArray", stu ar), ("Vquick", vquick vc) ]
    printf "Created data to be sorted, last elements %d %d %d\n" (ar ! (num-1)) (vc U.! (num-1)) (v2 U.! (num-1))
    forM_ algos $ \(name, act) -> do
        putStrLn name
        time (act num)

-- For the prevention of sharing
foo :: Int -> Int
foo n
    | n < 0 = -n
    | n > 0 = n
    | otherwise = 3 
```

结果（仅次）：

```
$ ./timeSorts 3000000
Intro
587.911 ms
STUArray
402.939 ms
Vquick
414.936 ms
$ ./timeSorts 1000000
Intro
193.970 ms
STUArray
131.980 ms
Vquick
134.979 ms 
```

`STUArray`正如预期的那样，在和未装箱的向量上几乎相同的快速排序几乎花费了相同的时间。（旧的快速排序实现比 introsort 慢约 15%。与上述时间相比，大约 70-75% 用于从列表转换到列表。）

在随机输入上，快速排序的性能明显优于 introsort，但在几乎排序的输入上，它们的性能会下降，而 introsort 不会。

* * *

¹ 用 s 使代码多态`STUArray`充其量是一件痛苦的事，用`IOUArray`s 做这件事并让排序和包装器`{-# INLINABLE #-}`在优化的情况下产生相同的性能 - 如果没有，多态代码会明显变慢。

² 使用相同的算法，当我比较时（不经常），两者在测量精度范围内总是同样快。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-14T11:03:11.953

没有什么比考试更好的了，对吧？结果并不令人惊讶：对于 range 中的随机整数列表`[0 .. 1000000]`，

```
list size: 200000         ghc              -O2     -fllvm  -fllvm-O2
────────                   ────────   ────────   ────────   ────────
Data.List.sort            0.878969s  0.883219s  0.878106s  0.888758s
Naïve.quicksort           0.711305s  0.870647s  0.845508s  0.919925s
UArray_IO.quicksort       9.317783s  1.919583s  9.390687s  1.945072s
Vector_Mutable.quicksort   1.48142s  0.823004s  1.526661s  0.806837s 
```

在这里，`Data.List.sort`就是它的本质，`Naïve.quicksort`是您引用的算法，`UArray_IO.quicksort`并且`Vector_Mutable.quicksort`取自您链接到的问题：[klapaucius](https://stackoverflow.com/a/7833043/745903)和[Dan Burton 的答案](https://stackoverflow.com/a/7719971/745903) ***，结果证明在性能方面非常不理想，看看[Daniel Fischer 可以做得更好](https://stackoverflow.com/a/11485331/745903)***，都包装以便接受列表（不确定我是否完全正确）：

```
quicksort :: [Int] -> [Int]
quicksort l = unsafePerformIO $ do
  let bounds = (0, length l)
  arr <- newListArray bounds l :: IO (IOUArray Int Int)
  uncurry (qsort arr) bounds
  getElems arr 
```

和

```
quicksort :: Ord a => [a] -> [a]
quicksort = toList . iqsort . fromList 
```

分别。

`Data.Vector`如您所见，在对随机生成的整数列表进行排序的速度方面，朴素算法与可变解决方案相差不远，`IOUArray`实际上*更糟*。测试是在运行 Ubuntu 11.10 x86-64 的 Intel i5 笔记本电脑上进行的。

* * *

*考虑到 ɢᴏᴏᴅ 可变实现毕竟仍然远远领先于此处比较的所有实现，因此以下内容并没有多大意义。*

请注意，这并不意味着一个好的基于列表的程序可以始终跟上其可变实现的等效程序，但 GHC 确实在使性能接近方面做得很好。此外，它当然取决于数据：这些时间是随机生成的要排序的列表包含 0 到 1000 之间的值，而不是上面的 0 到 1000000 之间的值，即有很多重复项：

```
list size: 200000         ghc               -O2      -fllvm  -fllvm-O2
────────                    ────────   ────────    ────────   ────────
Data.List.sort             0.864176s  0.882574s   0.850807s  0.857957s
Naïve.quicksort            1.475362s  1.526076s   1.475557s  1.456759s
UArray_IO.quicksort       24.405938s  5.255001s  23.561911s  5.207535s
Vector_Mutable.quicksort   3.449168s  1.125788s   3.202925s  1.117741s 
```

更不用说预排序的数组了。

非常有趣的是（只有在非常大的尺寸下才变得明显，这需要 rtsopts 来增加堆栈容量）是两个可变实现如何变得显着*变慢*`-fllvm -O2`：

```
list size: 3⋅10⁶        ghc      -O1   -fllvm-O1         -O2   -fllvm-O2
────────                    ────────    ────────    ────────    ────────
Data.List.sort            23.897897s  24.138117s  23.708218s  23.631968s
Naïve.quicksort           17.068644s  19.547817s  17.640389s  18.113622s
UArray_IO.quicksort       35.634132s  38.348955s  37.177606s  49.190503s
Vector_Mutable.quicksort  17.286982s  17.251068s  17.361247s  36.840698s 
```

对我来说，不可变实现在 llvm 上的表现更好似乎是合乎逻辑的（它不是在某种程度上做到了所有事情都是不可变的吗？），尽管我不明白为什么这只会在高度优化时对可变版本的放缓变得明显和大数据量。

* * *

## 测试程序：

```
$ cat QSortPerform.hs
module Main where

import qualified Data.List(sort)
import qualified Naïve
import qualified UArray_IO
import qualified Vector_Mutable

import Control.Monad
import System.Random
import System.Environment

sortAlgos :: [ (String, [Int]->[Int]) ]
sortAlgos = [ ("Data.List.sort", Data.List.sort)
            , ("Naïve.quicksort", Naïve.quicksort)
            , ("UArray_IO.quicksort", UArray_IO.quicksort)
            , ("Vector_Mutable.quicksort", Vector_Mutable.quicksort) ]

main = do
   args <- getArgs
   when (length args /= 2) $ error "Need 2 arguments"

   let simSize = read $ args!!1
   randArray <- fmap (take simSize . randomRs(0,1000000)) getStdGen

   let sorted = case filter ((== args!!0) . fst) sortAlgos of
        [(_, algo)] -> algo randArray
        _ -> error $ "Argument must be one of " 
                        ++ show (map fst sortAlgos)

   putStr "First element:  "; print $ sorted!!0
   putStr "Middle element: "; print $ sorted!!(simSize`div`2)
   putStr "Last element:   "; print $ sorted!!(simSize-1) 
```

它在命令行上采用算法名称和数组大小。运行时比较是用这个程序完成的：

```
$ cat PerformCompare.hs
module Main where

import System.Process
import System.Exit
import System.Environment
import Data.Time.Clock
import Data.List
import Control.Monad
import Text.PrettyPrint.Boxes

compiler = "ghc"
testProgram = "./QSortPerform"
flagOpts = [[], ["-O2"], ["-fllvm"], ["-fllvm","-O2"]]
algos = ["Data.List.sort","Naïve.quicksort","UArray_IO.quicksort","Vector_Mutable.quicksort"]

main = do
   args <- getArgs
   let testSize = case args of
         [numb] -> read numb
         _      -> 200000

   results <- forM flagOpts $ \flags -> do

      compilerExitC <- verboseSystem
              compiler $ testProgram : "-fforce-recomp" : flags
      when (compilerExitC /= ExitSuccess) .
         error $ "Compiler error \"" ++ show compilerExitC ++"\""

      algoCompare <- forM algos $ \algo -> do
         startTime <- getCurrentTime
         exitC <- verboseSystem testProgram [algo, show testSize]
         endTime <- getCurrentTime
         when (exitC /= ExitSuccess) .
            error $ "Program error \"" ++ show exitC ++"\""
         return . text . show $ diffUTCTime endTime startTime

      return . vcat right $ text(concat flags)
                          : text("────────")
                          : algoCompare

   let table = hsep 2 bottom
         $ vcat left (map text $ ("list size: "++show testSize)
                               : "────────"
                               : algos                          )
         : results

   printBox table

verboseSystem :: String -> [String] -> IO ExitCode
verboseSystem cmd args = do
   putStrLn . unwords $ cmd : args
   rawSystem cmd args 
```

# iphone - 将 TableView 单元拖放到 Tapkus 日历

> ID：11481678
> 
> 赞同：2
> 
> 时间：2012-07-14T06:45:30.650
> 
> 标签：iphone, ios, drag-and-drop, tapku

我已经使用左侧的 tapkus 库在滚动视图中添加了日历。我想从右边拖动单元格，如果我把它放在一个日期，那么它应该添加到那个日期。问题是我能够将单元格拖到一个日期，但我不知道我要添加到哪个日期。这是我的图像。

任何帮助将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:03:16.680

如果将带有日期的视图拖动到另一个对象，则可以将视图标签设置为日期。

如果我不正确，你能详细说明你的问题吗？

# matlab - Matlab中的MuPad

> ID：11481682
> 
> 赞同：-1
> 
> 时间：2012-07-14T06:46:04.313
> 
> 标签：matlab, math, cluster-analysis, sse

我有一个简单的问题想在 Matlab 中使用 MuPad 来计算它。我用笔和纸花了大约 1 个小时来计算它，但是如果它可以使用 MuPad 来解决，这对我来说很有趣。

我有 n 个数字，分为两组（p 和 q），每组都有一个平均值（Mp 和 Mq）。我有一个称为 SSE（平方误差和）的度量，它计算组中任意数字与其平均值之间的平方距离之和，`(sum (x[i]-Mp)^2 + sum (x[j]-Mq)^2`其中 i 在第一组循环，j 在第二组循环）。我的问题是关于如果我将两条记录的位置从它们的原始组交换到相邻组的度量值`( q <= xq,xp => p )`。请注意，交换后团体的方式也会改变。最终公式（基于笔和纸）如下：

```
d = xq - xp

deltaSSE = SSE1 - SSE2 = d(d (np + nq)/(np nq) -2 (Mq-Mp)) 
```

其中 np 和 nq 是组中的记录数，xq 和 xp 是考虑交换位置的两条记录，Mq 和 Mp 是对应的手段（交换前）。

我对 MuPad 最重要的问题是关于组中的记录数（它总是低于 10）。

谢谢您的帮助。

* * *

关于上述公式的示例：您有两组“1 2 3”和“4 5 6”。这种聚类的 SSE 是 1^2+0^2+1^2 + 1^2+0^2+1^2 = 4。现在我很想知道如果我交换 3 的位置，SSE 是什么和6，没有完整的计算。根据上式，d=6-3=3，np=nq=3，Mp=(1+2+3)/3=2，Mq=(4+5+6)/3=5，所以deltaSSE = 3(3(3+3)/(3*3)-2(5-2))=-12，即新SSE为4+12=16。我的问题是关于如何在不知道 MuPad 中数字的确切数量的情况下表示数字集群。已知组中元素数量的简单形式可以在 MuPad 中轻松求解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:50:38.453

也许你只需要表示一组数字就是计数、均值和方差。

```
Mp = SUM(x{i},i=1..np)/np
Sp = (SUM(x{i}^2,i=1..np)-np*Mp^2)/(np-1) 
```

用你的例子：

```
np = 3                                  nq = 3
Mp1 = (1.0+2.0+3.0)/3 = 2.0             Mq1 = (4.0+5.0+6.0)/3 = 5.0
Sp1 = ((1+2^2+3^2)-3*2^2)/(3-1)=1.0     Sq1 = ((4+5^2+6^2)-3*5^2)/(3-1)=1.0

SSE1 = (np-1)*Sp1 + (nq-1)*Sq1 = 4.0 
```

现在做一个改变`xp=3.0`，`xq=6.0`你有新的数量

```
d = xq - xp = 3.0

Mp2 = Mp1+d/np = 3.0                     
Sp2 = Sp1 + d*(2*(xp-Mp1)/(np-1)+d/np) = 7.0

Mq2 = Mq1-d/nq = 4.0
Sq2 = Sq1 + d*(2*(Mq1-xq)/(nq-1)+d/nq) = 1.0

SSE2 = (np-1)*Sp2 + (nq-1)*Sq2 = 16.0 
```

或者用一点代数

```
SSE2 - SSE1 = 2*d*(Mq1-Mp1)-d^2/np-d^2/nq = 12.0 
```

所以要做到这一切，你不需要跟踪所有的数字`x{i}`and `x{j}`，只需要跟踪它们的均值`Mp`&`Mq`和方差`Sp`& `Sq`。

# c++ - 如何判断一个模板类是否有某个成员函数？

> ID：11481684
> 
> 赞同：0
> 
> 时间：2012-07-14T06:47:42.150
> 
> 标签：c++, templates, c++11

> **可能重复：**
> [是否可以编写 C++ 模板来检查成员函数的存在？](https://stackoverflow.com/questions/257288/is-it-possible-to-write-a-c-template-to-check-for-a-member-functions-existenc)

我需要一种方法来确定模板类是否具有某些成员函数，以便我可以为函数调用不同的特化。例如，我有以下课程：

```
class A1 {
    void a() const { cout << "a1" << endl; }
};

class A2 {
    void a() const { cout << "a2" << endl; }
};

class B {
    void b() const { cout << "b" << endl; }
}; 
```

当我使用 A1 或 A2 的实例作为模板参数调用我的函数时，我想调用一个重载（可以利用`a()`），但如果它不存在，我可以不用它。

我正在查看标准和 Boost 类型特征库，但没有发现类似的东西。我基本上想要这样的东西：

```
template <class T>
typename enable_if<has_member<A, a>::value>::type
f(const T& t) {
    t.a();
}

template <class T>
typename enable_if<!has_member<A, a>::value>::type
f(const T&) {
    cout << "no a" << endl;
} 
```

问题是我不知道任何`has_member`类型特征，也不知道如何实现它。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-14T06:57:55.250

为该 [http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Member_Detector使用成员检测成语](http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Member_Detector)

# java - 需要了解核心java中的拳击

> ID：11481689
> 
> 赞同：0
> 
> 时间：2012-07-14T06:48:48.497
> 
> 标签：java, object, autoboxing

在下面的示例中，我无法弄清楚 int 7 如何被视为对象。

sifer(7) 被认为是方法 sifer(Object o)。我无法理解这是怎么发生的。在我的一本 java 参考书中，它说 Int 可以装箱为 Integer，然后“扩大”为对象。我不确定那是什么意思。

```
 >> Class A 
class A { }     

 >> Class B 

class B extends A { }   
 >> Class ComingThru  

public class ComingThru {  
   static String s ="-";    
static void sifer(A[] ...a2)  
{  
    s = s + "1";  
}

static void sifer(B[] b1)  
{
    s += "3";  
}
static void sifer(Object o)   
{
    s += "4";  
}      

   public static void main(String[] args)   {
        // TODO Auto-generated method stub

    A[] aa= new A[2];  
    B[] ba = new B[2];  

    //sifer(aa);  
    //sifer(ba);  
    sifer(7);
    System.out.println(s);  

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T06:54:04.367

由于没有`sifer(int)`方法，编译器将尝试找到“最接近的匹配”。在这种情况下，其他两种`sifer`方法将数组作为参数，而 int 显然不是。

最后一种方法，`sifer(Object)`可以应用于任何对象，包括一个`Integer`用于`sifer(7)`.

[实际情况稍微复杂一些](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.3)，JVM 会按以下顺序寻找匹配的方法：

> *   身份转换
>     *   在你的情况下：`sifer(int)`但没有这样的方法
> *   扩大的原始转换
>     *   在你的情况下：`sifer(long)`例如，但没有这样的方法
> *   扩大参考转换
>     *   在您的情况下：不适用， int 不是对象
> *   可选的装箱转换，然后是扩大的参考转换
>     *   在您的情况下，这就是正在发生的事情： int 被装箱为 Integer 被扩大到 Object
> *   一个拆箱转换（可选地后跟一个扩大的基元转换）
>     *   在您的情况下：不适用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T07:10:14.307

**1.**上面的代码提供了一个经典的**方法重载**示例，以及**Java 1.5带来的AutoBoxing和Auto-UnBoxing**，导致**手动**装箱和Unboxing很痛苦。

**2.** `The sifer(A[]... a2)`并且`sifer(B[] b1)`两者都在其参数中接受 Array 类型的 Arguments，这与 int 完全不匹配。所以现在我们只剩下`sifer(Object o)`.

**3.**现在`int`将转换为`Wrapper Object Integer`自动。

您可以通过在 snifer(Object o) 方法中执行此操作来验证它。

```
 o.getClass().getName(); 
```

有关详细信息，请参阅此链接：

[http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T06:50:49.900

`7`将被自动[装箱](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)`Integer``Object`

**另见**

*   [java: boolean instanceOf 布尔值？](https://stackoverflow.com/questions/3600686/java-boolean-instanceof-boolean)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T07:30:55.527

步骤如下-

1.  int (7) 被装箱成一个整数。
2.  Integer 引用扩大到 Object（因为 Integer 扩展了 Object）。
3.  sifer() 方法获得了一个实际上指向 Integer 对象的 Object 引用。

# python - PyDev 包资源管理器

> ID：11481703
> 
> 赞同：0
> 
> 时间：2012-07-14T06:51:00.740
> 
> 标签：python, eclipse, pydev

我刚刚使用 Java 将 PyDev 添加到了 My Eclipse Juno。不幸的是，当我在 Eclipse 中使用 Python 时，我无法更改包资源管理器的目录。如果有人可以指导我如何操作，我将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T15:19:40.073

您不需要“更改” PyDev 包资源管理器目录...在 Eclipse 中，事情以“项目”为中心，因此，您需要做的是链接/创建项目，它们应该出现在 PyDev 包资源管理器中。有关导入现有项目的详细信息，请参阅：[http ://pydev.org/faq.html#PyDevFAQ-HowdoIimportexistingprojects%2FsourcesintoPyDev%3F。](http://pydev.org/faq.html#PyDevFAQ-HowdoIimportexistingprojects%2FsourcesintoPyDev%3F)

# mips - MIPS 仿真入门

> ID：11481708
> 
> 赞同：0
> 
> 时间：2012-07-14T06:52:22.737
> 
> 标签：mips, emulation

我可以运行模拟器（s）（x）mips和mars，但我不知道如何制作程序。MIPS 程序集仿真没有“入门”。你能给我一个简单的程序，我只是把它放在盒子里运行吗？

![在此处输入图像描述](../Images/67f148377ea48114c64cba39a11ee97a.png)

![在此处输入图像描述](../Images/7252ac7136dc65d2337c328284eba864.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:21:55.043

这是切换`$t0`and`$1`和`$t2`and的值的代码`$t3`。使用任何编辑器将其粘贴到文件`swap.s`中，然后使用模拟器（mars、pcspim、qtspim）打开文件。

```
 .text
    .globl main
main:
    li  $t0, -10
    li  $t1, -31
    li  $t2, -10
    li  $t3, -31

    #swap

    xor $t0, $t0, $t1
    xor $t1, $t0, $t1
    xor $t0, $t0, $t1

    addu    $t2, $t2, $t3
    subu    $t3, $t2, $t3
    subu    $t2, $t2, $t3

    li  $v0, 10
    syscall 
```

你总是写：

```
.text
.globl main
main:

#code here

li  $v0, 10
syscall 
```

并从那里继续。

# javascript - 如何找到与特定类关联的所有 id

> ID：11481709
> 
> 赞同：0
> 
> 时间：2012-07-14T06:52:26.890
> 
> 标签：javascript, jquery

使用 jquery 如何找出与给定类关联的所有 id？

有什么帮助吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T06:56:13.080

循环遍历具有指定类的所有元素，并将它们的 ID 存储在一个数组中。见[jQuery`.each`](http://api.jquery.com/each/)

```
var ids = [];
$('.class').each(function() {
    if($(this).attr('id'))
        ids.push($(this).attr('id'));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T06:54:13.190

尝试这个

**[现场演示](http://jsfiddle.net/rajaadil/cXczN/)**

```
//This will give you ids of all the controls have the specified class
$('.className').each(function(){
    alert(this.id);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T07:00:56.010

使用 jQuery：

```
var ids = $(".class").map(function() { 
    return this.id.length > 0 ? this.id : null; 
}).get(); 
```

检查 id.length > 0 是否确保您不会从没有 id 的元素中清空字符串。

**演示：http:** [//jsfiddle.net/T8YuD/](http://jsfiddle.net/T8YuD/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T06:54:28.517

你可以像`$('#id.class')`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-14T06:55:51.393

```
function getIDs(className)
{
    var ids = [];

    $('.' + className).each(function()
    {
       var id = $(this).attr('id');
       if (id) ids.push(id);
    });
    return ids;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-14T06:59:27.013

```
 function getAllIds(className){
       var results = [];
       $(className).each(function(){
              results.push($(this).attr('id'));

       });
       return results;
   } 
```

# javascript - 如何在 jquery 确认对话框中使用回调

> ID：11481710
> 
> 赞同：0
> 
> 时间：2012-07-14T06:52:39.680
> 
> 标签：javascript, jquery, asp.net, ajax

**Javascript代码**

```
 function btnCancelClick()
                {
                    $("#dialog:ui-dialog").dialog("destroy");

                    $("#dialog-confirm").dialog({
                        resizable: false,
                        height: 140,
                        width: 400,
                        modal: true,
                        buttons: {
                            "Yes": function ()
                            {                       
                                $(this).dialog("close");
                                      //Yes callback
                            },
                            No: function ()
                            {                       
                                $(this).dialog("close");
                                    //No callback
                            }
                        }

                    });             
                } 
```

**aspx 代码**

```
 <div class="demo">
        <div id="dialog-confirm" title="Do you want to cancel the appointment?">
        </div>
    </div>

     <asp:Button ID="btnCancel" runat="server" Text="Cancel" CssClass="cssbutton"
                                        OnClientClick="return btnCancelClick();" OnClick="btnCancel_Server_Click" />
<asp:UpdatePanel ID="updatePanelTable" runat="server">
                        <ContentTemplate>
.
.
.

</ContentTemplate>
<Triggers>
                            <asp:AsyncPostBackTrigger ControlID="btnCancel" EventName="Click" />
                        </Triggers>
                    </asp:UpdatePanel> 
```

**服务器端代码：**

```
protected void btnCancel_Server_Click(object sender, EventArgs e)
    {
        //Server side code.
    } 
```

我使用 jquery 对话框来显示确认框。当单击按钮时，它总是触发按钮的服务器端事件。如果单击“否”，则必须在单击“是”时触发服务器端事件，然后返回 false。我在谷歌上搜索他们告诉我使用回调，因为我不知道如何在这种东西中使用回调。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T07:01:28.397

由于您可以在用户回答“是”或“否”时进行回调，因此您可以使用以下内容：

```
function btnCancelClick()
{
    $("#dialog:ui-dialog").dialog("destroy");
    $("#dialog-confirm").dialog({
        resizable: false,
        height: 140,
        width: 400,
        modal: true,
        buttons: {
           "Yes": function ()
           {                       
               $(this).dialog("close");
               //Yes callback
               callback();
           },
           No: function ()
           {                       
               $(this).dialog("close");
               //No callback
               callback();
           }
       }
   });

   function callback() {
       // whatever needs to be done once the user choose Yes or No
   }
} 
```

# mysql - 我怎么能.... SELECT *, lcase(name) AS name FROM table

> ID：11481711
> 
> 赞同：3
> 
> 时间：2012-07-14T06:52:56.717
> 
> 标签：mysql, sql

我想修改名称列并将其设为小写，但我也想选择所有其他列。有没有办法做到这一点而不必写每列的名称。

我正在尝试做这样的事情：

```
SELECT *, lcase(name) AS name FROM table; 
```

而不是写出所有列名，如下所示：

```
SELECT lcase(name) AS name, zip, address, age, birthday, etc FROM table; 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T07:01:41.290

你不能，但一种选择是使用视图：

```
create view table_with_lower_name as
select lcase(name) AS name, zip, address, age, birthday, etc 
from table; 
```

一旦定义（即这是一次性创建语句），您可以简单地使用：

```
select * from table_with_lower_name; 
```

使用视图时有一些注意事项，例如您无法`name`通过它们更新已修改的列（如此处），但它可能对您有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T06:56:26.340

您的代码段按原样工作！虽然`select *`被认为是不好的形式，并且可能会影响性能。

您可能还喜欢使用表别名来使其更清晰：

```
SELECT t.*, lcase(t.name) AS name FROM table t; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T06:57:15.980

不，除了明确列出所有列之外，没有选择所有列的表示法。

（实际上可以使用动态 SQL，但您*真的*不想这样做。）

# android - Android Viewpager 选项卡更新选项卡片段

> ID：11481715
> 
> 赞同：0
> 
> 时间：2012-07-14T06:53:40.413
> 
> 标签：android, android-fragments, android-tabhost, android-viewpager

我有一个在 CustomLoader 中抓取网页的活动。加载程序完成后，我想用检索到的数据更新 3 个选项卡的内容。

我正在使用 android dev samples 提供的示例代码来实现活动的 Viewpager/Tabs/Fragments。

当为选项卡创建片段时，正确调用了 onCreateView，视图上的所有小部件都正确定位并映射到变量。

但是，当我尝试从 Activity 中找到片段并调用片段上的方法来更新其内容时，变量为空。此外，调用 getView 也返回 null - 我从 TabsAdapter 检索的片段实例不是正确的实例化实例？

我已将代码缩减为单个选项卡片段，有问题的代码是来自 onLoaderFinished 的调用以更新片段。

所有 3 个选项卡片段都将使用来自单个加载器的数据填充，因此加载器位于活动上，而不是片段上。我只需要一种方法来告诉片段绘制他们的新数据。

```
public class InfoBloodStocksActivity extends SherlockFragmentActivity 
    implements LoaderManager.LoaderCallbacks<BloodStocksLoaderResponse> {

    TabHost mTabHost;
    ViewPager  mViewPager;
    TabsAdapter mTabsAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.info_bloodstocks_tabpager);

        mTabHost = (TabHost)findViewById(android.R.id.tabhost);
        mTabHost.setup();

        mViewPager = (ViewPager)findViewById(R.id.infoBloodStocksTabPager);
        mViewPager.setOffscreenPageLimit(3);

        mTabsAdapter = new TabsAdapter(this, mTabHost, mViewPager);

        mTabsAdapter.addTab(mTabHost.newTabSpec("Daily stock").setIndicator("Daily stocks"),
                InfoBloodStocksPageFragment.class, null);

        if (savedInstanceState != null) {
            mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab"));
        }

        loadStockDetailsFromWebsite();

    }

    private void loadStockDetailsFromWebsite() {
        // Prepare the loader.  Either re-connect with an existing one,
        // or start a new one.

        getSupportLoaderManager().initLoader(0, null, this);
    }

    @Override
    public Loader<BloodStocksLoaderResponse> onCreateLoader(int arg0, Bundle arg1) {
        // This is called when a new Loader needs to be created.  This
        // sample only has one Loader with no arguments, so it is simple.
        return new BloodStocksCustomLoader(this);
    }

    @Override
    public void onLoadFinished(Loader<BloodStocksLoaderResponse> loader, BloodStocksLoaderResponse response) {
        if (response.isNewStocksLoaded()) {

            InfoBloodStocksPageFragment fragment = (InfoBloodStocksPageFragment) mTabsAdapter.getItem(0);

            fragment.setNewImage(response.getDailyStocksImageURL());
        }
    }

    @Override
    public void onLoaderReset(Loader<BloodStocksLoaderResponse> arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putString("tab", mTabHost.getCurrentTabTag());
    }

    /**
     * This is a helper class that implements the management of tabs and all
     * details of connecting a ViewPager with associated TabHost.  It relies on a
     * trick.  Normally a tab host has a simple API for supplying a View or
     * Intent that each tab will show.  This is not sufficient for switching
     * between pages.  So instead we make the content part of the tab host
     * 0dp high (it is not shown) and the TabsAdapter supplies its own dummy
     * view to show as the tab content.  It listens to changes in tabs, and takes
     * care of switch to the correct paged in the ViewPager whenever the selected
     * tab changes.
     */
    public static class TabsAdapter extends FragmentPagerAdapter
            implements TabHost.OnTabChangeListener, ViewPager.OnPageChangeListener {

        private final Context mContext;
        private final TabHost mTabHost;
        private final ViewPager mViewPager;
        private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

        static final class TabInfo {
            private final String tag;
            private final Class<?> clss;
            private final Bundle args;

            TabInfo(String _tag, Class<?> _class, Bundle _args) {
                tag = _tag;
                clss = _class;
                args = _args;
            }
        }

        static class DummyTabFactory implements TabHost.TabContentFactory {
            private final Context mContext;

            public DummyTabFactory(Context context) {
                mContext = context;
            }

            @Override
            public View createTabContent(String tag) {
                View v = new View(mContext);
                v.setMinimumWidth(0);
                v.setMinimumHeight(0);
                return v;
            }
        }

        public TabsAdapter(FragmentActivity activity, TabHost tabHost, ViewPager pager) {
            super(activity.getSupportFragmentManager());

            mContext = activity;
            mTabHost = tabHost;
            mViewPager = pager;
            mTabHost.setOnTabChangedListener(this);
            mViewPager.setAdapter(this);
            mViewPager.setOnPageChangeListener(this);
        }

        public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args) {

            tabSpec.setContent(new DummyTabFactory(mContext));
            String tag = tabSpec.getTag();

            TabInfo info = new TabInfo(tag, clss, args);
            mTabs.add(info);
            mTabHost.addTab(tabSpec);

            notifyDataSetChanged();
        }

        @Override
        public int getCount() {
            return mTabs.size();
        }

        @Override
        public Fragment getItem(int position) {
            TabInfo info = mTabs.get(position);
            return Fragment.instantiate(mContext, info.clss.getName(), info.args);
        }

        @Override
        public void onTabChanged(String tabId) {
            int position = mTabHost.getCurrentTab();
            mViewPager.setCurrentItem(position);
        }

        @Override
        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
        }

        @Override
        public void onPageSelected(int position) {
            // Unfortunately when TabHost changes the current tab, it kindly
            // also takes care of putting focus on it when not in touch mode.
            // The jerk.
            // This hack tries to prevent this from pulling focus out of our
            // ViewPager.

            TabWidget widget = mTabHost.getTabWidget();
            int oldFocusability = widget.getDescendantFocusability();
            widget.setDescendantFocusability(ViewGroup.FOCUS_BLOCK_DESCENDANTS);
            mTabHost.setCurrentTab(position);
            widget.setDescendantFocusability(oldFocusability);
        }

        @Override
        public void onPageScrollStateChanged(int state) {
        }
    }  
} 
```

我正在从活动中调用 setNewImage 。

```
public class InfoBloodStocksPageFragment extends SherlockFragment {

    private ImageView mImageView;
    private ProgressBar mProgress;
    private TextView mTitle;
    private TextView mDescriptionText;

    private String mImageURL;

    private ImageLoader mImageLoader = ImageLoader.getInstance();

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.info_bloodstocks_page, container, false);

        mImageView = (ImageView)view.findViewById(R.id.bloodStocksPageImage);
        mProgress = (ProgressBar)view.findViewById(R.id.bloodStocksPageProgress);
        mTitle = (TextView)view.findViewById(R.id.bloodStockPageTitle);
        mDescriptionText = (TextView)view.findViewById(R.id.bloodStocksPageText);

        mProgress.setVisibility(View.VISIBLE);
        mDescriptionText.setVisibility(View.GONE);

        return view;
    }

    public void setNewImage(String imageURL) {

        // why is mImageView null here ?
        // why does getView() return null here ?

        View view = getView();
        mImageView = (ImageView)view.findViewById(R.id.bloodStocksPageImage);

        DisplayImageOptions displayImageOptions = new DisplayImageOptions.Builder()
            .showImageForEmptyUri(R.drawable.loading_stock_figures)
            .cacheOnDisc()
            .imageScaleType(ImageScaleType.EXACT)
            .build();

        mImageLoader.displayImage(imageURL, mImageView, displayImageOptions, new ImageLoadingListener() {

            @Override
            public void onLoadingStarted() {
                mProgress.setVisibility(View.VISIBLE);
            }

            @Override
            public void onLoadingFailed(FailReason failReason) {
                String message = null;
                switch (failReason) {
                    case IO_ERROR:
                        message = "Input/Output error";
                        break;
                    case OUT_OF_MEMORY:
                        message = "Out Of Memory error";
                        break;
                    case UNKNOWN:
                        message = "Unknown error";
                        break;
                }

                mProgress.setVisibility(View.GONE);
                mImageView.setImageResource(android.R.drawable.ic_delete);
            }

            @Override
            public void onLoadingComplete() {
                mProgress.setVisibility(View.GONE);
                Animation anim = AnimationUtils.loadAnimation(getActivity(), R.anim.fade_in);
                mImageView.setAnimation(anim);
                anim.start();
            }

            @Override
            public void onLoadingCancelled() {
                // Do nothing
            }
        });

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T22:14:04.433

我刚刚开始使用[http://square.github.com/otto/](http://square.github.com/otto/)来执行此操作。该站点上的文档应该足以让您开始使用它。

# android - 带有来自 Web 的数据的 Android AutoCompleteTextView 自定义下拉菜单

> ID：11481723
> 
> 赞同：1
> 
> 时间：2012-07-14T06:55:29.320
> 
> 标签：android, autocompletetextview

我让 AutoCompleteTextView 使用默认下拉菜单。我现在正试图弄清楚是否可以使用自定义下拉菜单来处理我的数据。我感觉很接近，但我无法让下拉菜单显示。这是我想要做的。

我创建了一个自定义适配器。

```
public class UserSearchAdapter extends ArrayAdapter<UserSearchItem> {

private Context context;
private LayoutInflater vi;
int count = 0;

public UserSearchAdapter(Context context) {
    super(context, 0, items);
    this.context = context;
    vi = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View v = convertView;

    final UserSearchItem i = items.get(position);
    if (i != null) {
        Log.d("adapter", "in here");
        UserSearchItem si = (UserSearchItem) i;
        v = vi.inflate(R.layout.user_search_item, null);
        final TextView title = (TextView) v
                .findViewById(R.id.tv_userSearchName);
        if (title != null)
            title.setText(si.userName);
    }

    return v;
} 
```

}

这是我的 UserSearchItem 类

```
public class UserSearchItem {

public final String userName;
public final String userId;
public final String userFBId;

public UserSearchItem(String userName, String userId, String userFBId) {
    this.userName = userName;
    this.userId = userId;
    this.userFBId = userFBId;
}

} 
```

这是我实现 AutoCompleteTextView 的地方

```
userSearch = (AutoCompleteTextView)findViewById(R.id.tv_UserSearch);
    AutoCompleteAdapter = new UserSearchAdapter(this);
    userSearch.setAdapter(AutoCompleteAdapter);
    userSearch.addTextChangedListener(this);

    @Override
public void afterTextChanged(Editable s) {
    if (shouldAutoComplete) {
        new DoAutoCompleteSearch().execute(s.toString());
    }
}

@Override
public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
        int arg3) {
    // TODO Auto-generated method stub

}

@Override
public void onTextChanged(CharSequence s, int start, int before, int count) {
    shouldAutoComplete = true;
    for (int position = 0; position < AutoCompleteAdapter.getCount(); position++) {
        if (AutoCompleteAdapter.getItem(position).userName.equalsIgnoreCase(s.toString())) {
            shouldAutoComplete = false;
            break;
        }
    }

}

 private class DoAutoCompleteSearch extends AsyncTask<String, Void, ArrayList<UserSearchItem>> {

    @Override
    protected ArrayList<UserSearchItem> doInBackground(String... params) {
        ArrayList<UserSearchItem> autoComplete = new ArrayList<UserSearchItem>();

        //get info from DB (userName, userId, userFbId)

                  UserSearchItem item = new UserSearchItem(userName, userId, userFbId);
                  autoComplete.add(item);
              }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return autoComplete;
    }

    @Override
    protected void onPostExecute(ArrayList<UserSearchItem> result) {
        AutoCompleteAdapter.clear();
        for (UserSearchItem s : result)
        {
            AutoCompleteAdapter.add(s);
        }
    }
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:04:06.637

如果您仍在寻找答案：在构造函数中使用您的数据填充适配器：

```
 UserSearchAdapter adapter = new UserSearchAdapter(this, data); 
```

并在您的适配器类中添加一个构造函数，如下所示：

```
 public class UserSearchAdapter extends ArrayAdapter<UserSearchItem> {

    private Context context;
    private LayoutInflater vi;
    int count = 0;
    private List<UserSearchItem> mItems;

    public UserSearchAdapter(Context context) {
        super(context, 0, items);
        this.context = context;
        vi = (LayoutInflater) context
              .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    }

    public UserSearchAdapter(Context context, List<UserSearchItem> items) {
       super(context, 0, items);
       this.context = context;
       vi = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
       mItems = items;

    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        final UserSearchItem i = mItems.get(position);
        if (i != null) {
           Log.d("adapter", "in here");
           UserSearchItem si = (UserSearchItem) i;
           v = vi.inflate(R.layout.user_search_item, null);
           final TextView title = (TextView) v
              .findViewById(R.id.tv_userSearchName);
        if (title != null)
            title.setText(si.userName);
     }

    return v;
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-08T04:55:38.863

```
## Initalization ##

AutocompleteTextview actv = (AutoCompleteTextView) view.findViewById(R.id.etSearchPlace);

## set list response of your web API in adapter ##

SpringArrayAdapter spinnerArrayAdapter = new CustomAdapter<String>(mcontext,android.R.layout.simple_spinner_item, nameList);

## set adapter to Autocomplete Textview ##

actv.setAdapter(spinnerArrayAdapter);

## set your drop down layout in custom adapter##
 public class CustomAdapter<T> extends ArrayAdapter<T> {
        public CustomAdapter(Context context, int textViewResourceId,
                             List<T> objects) {
            super(context, textViewResourceId, objects);

        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            View view = super.getView(position, convertView, parent);

            if (view instanceof TextView) {
                ((TextView) view).setTextSize(15);
                ((TextView) view).setTransformationMethod(null);
                Typeface typeface = ResourcesCompat.getFont(parent.getContext(), R.font.montesemibold);

                ((TextView) view).setTypeface(typeface);
            }
            return view;
        }
    } 
```

# objective-c - 在 iPad 上以纵向模式启动图像选择器

> ID：11481730
> 
> 赞同：1
> 
> 时间：2012-07-14T06:56:05.157
> 
> 标签：objective-c, ios, xcode, ipad

我正在使用以下代码在我的 iPad 应用程序（使用 Cocos2D）中启动图像选择器：

```
UIImagePickerController * imagePickerController = [[UIImagePickerController alloc] init];

if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) { 

    imagePickerController.sourceType = UIImagePickerControllerSourceTypeCamera;
    imagePickerController.showsCameraControls = YES;
    imagePickerController.cameraCaptureMode = UIImagePickerControllerCameraCaptureModePhoto;
    imagePickerController.delegate = self;
    imagePickerController.cameraDevice = UIImagePickerControllerCameraDeviceFront;
    [self.view addSubview:imagePickerController.view];
    [self presentModalViewController:imagePickerController animated:YES];

} 
```

我希望它一直以纵向模式启动，但它总是这样启动：

[![在此处输入图像描述](../Images/5924382f6a047f1e09da80253aab223b.png)](https://i.stack.imgur.com/cbCll.jpg)

图像以纵向显示，图像选择器 UI 处于横向模式。但是当我捕获图像时，它会顺时针旋转 90 度。

我希望图像选择器 UI 和拍摄的图像都处于纵向模式。我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T07:41:52.483

您需要做三件事：

1.  告诉呈现 imagePicker 的 viewController 只支持纵向。
2.  告诉 imagePicker 不要旋转实时摄像机源。
3.  取消旋转捕获的图像。

imagePicker 直接接收设备方向更改的通知。为了防止实时摄像头随设备旋转，您可以通过告诉 UIDevice 来阻止它接收这些通知，从而在 imagePicker 通过以下方式呈现后生成方向通知：

```
while ([currentDevice isGeneratingDeviceOrientationNotifications])
        [currentDevice endGeneratingDeviceOrientationNotifications]; 
```

你把它放在一个循环中的原因是因为 imagePicker 开始GeneratingDeviceOrientationNotifications，然后在它被关闭时结束它，使普通设备上的通知计数从 1 到 2 回到 1。

imagePicker 关闭后，您可以调用：

```
while (![currentDevice isGeneratingDeviceOrientationNotifications])
        [currentDevice beginGeneratingDeviceOrientationNotifications]; 
```

以便您的 ViewControllers 可以继续接收方向更改通知。

不幸的是，即使在关闭此功能后，图像仍会在捕获时使用正确的相机图像方向保存，因此在保存图像或对其进行任何操作之前，您必须通过手动反击来删除应用的方向转换：

```
-(UIImage *)turnMeAround:(UIImage *)image{
    CGAffineTransform transform = CGAffineTransformIdentity;
    CGFloat scale = [[UIScreen mainScreen] scale]; //retina
    CGSize size = CGSizeMake(image.size.width*scale,image.size.height*scale);
    switch (image.imageOrientation) {
        case UIImageOrientationUp:
            return image;
        case UIImageOrientationDown:
            size = CGSizeMake(size.height,size.width);
            transform = CGAffineTransformRotate(transform, M_PI);
            break;
        case UIImageOrientationLeft:
            transform = CGAffineTransformRotate(transform, -M_PI_2);
            break;
        case UIImageOrientationRight:
            transform = CGAffineTransformRotate(transform, M_PI_2);
            break;
    }
    CGContextRef context = CGBitmapContextCreate(NULL, size.width, size.height, CGImageGetBitsPerComponent(image.CGImage), 0, CGImageGetColorSpace(image.CGImage), CGImageGetBitmapInfo(image.CGImage));
    CGContextConcatCTM(context, transform);
    CGContextDrawImage(context, CGRectMake(0,0,size.width,size.height), image.CGImage);
    CGImageRef ref = CGBitmapContextCreateImage(context);
    UIImage *upsideRight = [UIImage imageWithCGImage:ref];
    CGContextRelease(context);
    CGImageRelease(ref);
    return upsideRight;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T17:07:57.247

非常感谢大家的帮助，但对我有用的方法如下：

所以我发现罪魁祸首是 Xcode 的 Cocos2D 模板。它在 RootViewController 中生成了以下代码：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

//
// There are 2 ways to support auto-rotation:
//  - The OpenGL / cocos2d way
//     - Faster, but doesn't rotate the UIKit objects
//  - The ViewController way
//    - A bit slower, but the UiKit objects are placed in the right place
//

#if GAME_AUTOROTATION==kGameAutorotationNone
//
// EAGLView won't be autorotated.
// Since this method should return YES in at least 1 orientation, 
// we return YES only in the Portrait orientation
//
return ( interfaceOrientation == UIInterfaceOrientationPortrait );

#elif GAME_AUTOROTATION==kGameAutorotationCCDirector
//
// EAGLView will be rotated by cocos2d
//
// Sample: Autorotate only in landscape mode
//
if( interfaceOrientation == UIInterfaceOrientationLandscapeLeft ) {
    [[CCDirector sharedDirector] setDeviceOrientation: kCCDeviceOrientationLandscapeRight];
} else if( interfaceOrientation == UIInterfaceOrientationLandscapeRight) {
    [[CCDirector sharedDirector] setDeviceOrientation: kCCDeviceOrientationLandscapeLeft];
}

// Since this method should return YES in at least 1 orientation, 
// we return YES only in the Portrait orientation
return ( interfaceOrientation == UIInterfaceOrientationPortrait );

#elif GAME_AUTOROTATION == kGameAutorotationUIViewController
//
// EAGLView will be rotated by the UIViewController
//
// Sample: Autorotate only in landscpe mode
//
// return YES for the supported orientations

return ( UIInterfaceOrientationIsLandscape( interfaceOrientation ) );

#else
#error Unknown value in GAME_AUTOROTATION

#endif // GAME_AUTOROTATION

// Shold not happen
return NO;
} 
```

在上面的代码中我改变了这个：

```
return ( UIInterfaceOrientationIsLandscape( interfaceOrientation ) ); 
```

对此：

```
return ( UIInterfaceOrientationIsPortrait( interfaceOrientation ) ); 
```

这解决了它。

# php - 如何在php中计算“时间前”

> ID：11481737
> 
> 赞同：1
> 
> 时间：2012-07-14T06:57:20.543
> 
> 标签：php

> **可能重复：**
> [PHP 如何查找自日期时间以来经过的时间？](https://stackoverflow.com/questions/2915864/php-how-to-find-the-time-elapsed-since-a-date-time)

我怎样才能得到前时间发布。以 2012-07-13 17:55:59 的 3 分钟前或超过 24 小时前和 2 天前为例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T07:02:40.600

```
<?php
function get_timeago( $ptime )
{
    $etime = time() - $ptime;

    if( $etime < 1 )
    {
        return 'less than 1 second ago';
    }

    $a = array( 12 * 30 * 24 * 60 * 60  =>  'year',
                30 * 24 * 60 * 60       =>  'month',
                24 * 60 * 60            =>  'day',
                60 * 60             =>  'hour',
                60                  =>  'minute',
                1                   =>  'second'
    );

    foreach( $a as $secs => $str )
    {
        $d = $etime / $secs;

        if( $d >= 1 )
        {
            $r = round( $d );
            return 'about ' . $r . ' ' . $str . ( $r > 1 ? 's' : '' ) . ' ago';
        }
    }
}
?>

Usage:   

   <?php 

     echo get_timeago( $timestamp );

   ?> 
```

也试试[strtotime()](http://php.net/manual/en/function.strtotime.php)

# haskell - 非确定性交错管道的来源

> ID：11481740
> 
> 赞同：5
> 
> 时间：2012-07-14T06:58:01.893
> 
> 标签：haskell, conduit

我希望看到源的不确定性交错操作，其类型签名如

```
interleave :: WhateverIOMonadClassItWouldWant m => [(k, Source m a)] -> Source m (k, a) 
```

用例是我有一个 p2p 应用程序，它维护与网络上许多节点的开放连接，并且它主要只是坐在那里等待来自其中任何一个节点的消息。当消息到达时，它并不关心它来自哪里，而是需要尽快处理该消息。从理论上讲，这种应用程序（至少在用于类似套接字的源时）可以完全绕过 GHC 的 IO 管理器并运行`select`/ `epoll`/etc。直接调用，但我并不特别关心它是如何实现的，只要它有效。

使用导管可以实现这样的事情吗？一种不太通用但可能更可行的方法可能是编写一个`[(k, Socket)] -> Source m (k, ByteString)`函数来为您处理所有套接字上的接收。

我注意到了`ResumableSource`管道中的操作，但他们似乎都想知道一个特定的`Sink`，这感觉有点像抽象泄漏，至少对于这个操作来说是这样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T18:45:49.010

stm-conduit 包提供了[mergeSources](http://hackage.haskell.org/packages/archive/stm-conduit/0.4.1/doc/html/Data-Conduit-TMChan.html#v%3amergeSources)，它执行与您正在寻找的内容相似但不相同的事情。这可能是一个很好的起点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T14:00:29.847

是的，有可能。

您可以通过分叉线程轮询一堆`Source`s 而不会阻塞，以轮询在每个线程中您与将输出发送到某个并发通道的`Source`a配对的位置：`Sink`

```
concur :: (WhateverIOMonadClassItWouldWant m) => TChan a -> Sink a m r 
```

...然后您定义`Source`从该通道读取的 a ：

```
synchronize :: (WhateverIOMonadClassItWouldWant m) => TChan a -> Source a m r 
```

请注意，这与仅分叉线程以轮询套接字本身没有什么不同，但对于`conduit`可能希望使用`Source`他们定义的 s 轮询套接字以外的其他事物的其他用户来说，这将是有用的，因为它更通用。

如果您将这些功能组合到一个函数中，那么调用的整体 API 将类似于：

```
poll :: (WhateverIOMonadClassItWouldWant m) => [Source a m r] -> m (Source a m r) 
```

...但如果你愿意，你仍然可以把那些`k`s 扔进去。

# java - 如何在不支持 GUI 的无头 Linux 上运行 Java GUI 应用程序？

> ID：11481742
> 
> 赞同：6
> 
> 时间：2012-07-14T06:59:18.663
> 
> 标签：java, linux, user-interface, curses, tui

我创建了一个在 Windows 中运行的 Java GUI 应用程序。现在我希望它在不支持 GUI 的无头 Linux 实例上运行。我想将 GUI 转换为 TUI。有没有办法可以替换一些类并通过 TUI 在 Linux 中运行。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T08:53:20.710

您可以使用 PeterMmm 的建议[http://www.pitman.co.za/projects/charva/index.html](http://www.pitman.co.za/projects/charva/index.html)

或者，您可以通过运行 X 服务器在本地计算机上运行 GUI，然后使用`ssh -X`. 这将在您的本地机器上显示 GUI，但程序实际上是在 linux 机器上运行的。

或者，您可以运行 XVFB 在 Linux 机器上伪造一个 GUI。您将无法看到 GUI 或以任何方式与其交互，但这对您来说可能无关紧要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-06T15:51:10.333

为了传播一个简单有效的解决方案，我复制了[@fossfreedom](https://askubuntu.com/users/14356/fossfreedom)在 SA "Ask Ubuntu" 上提供的答案：

```
sudo apt-get install xvfb 
```

然后：

```
xvfb :1 -screen 0 800x600x8 &
export DISPLAY=":1"
java application_name.jar 
```

或者

```
xvfb-run -a -e /tmp/some/log/file.log java -jar /home/user/somejava.jar 
```

-> 见：[https ://askubuntu.com/questions/50599/how-do-you-run-a-gui-application-without-gui-gui-application-as-daemon-on-headl](https://askubuntu.com/questions/50599/how-do-you-run-a-gui-application-without-gui-gui-application-as-daemon-on-headl)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T08:13:08.620

有一些适用于 Java 的 ncurses 实现，例如：[http ://www.pitman.co.za/projects/charva/index.html](http://www.pitman.co.za/projects/charva/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T21:01:24.617

如果您从另一台运行 X 的 Linux 机器连接到您的用户 ssh config ( `~/.ssh/config`)：

```
Compression yes
CompressionLevel 9
ForwardX11 yes
ForwardX11Trusted yes 
```

然后，当您登录到远程 Linux 机器时，您的 GUI 将被转发到本地屏幕。请注意，它可能很慢……特别是一些 AWT 应用程序即使在 LAN 上也很慢。

如果在 Windows 上，请安装[CygWin](http://cygwin.com/)及其 Xserver 组件。也`OpenSSH`可以有所帮助。当您要通过 CygWin 进行连接时`ssh`，请使用与上述相同的配置。当然，在连接到远程机器之前运行 Xserver。您也可以使用 Putty 连接到远程，但不要忘记在会话配置中启用 X11 转发和压缩。

远程机器必须已`xauth`安装 +`sshd`必须已`X11Forwarding`启用。如果确定`echo $DISPLAY`将显示`localhost:10`。

# blackberry - 黑莓中的 CP037 编码

> ID：11481746
> 
> 赞同：2
> 
> 时间：2012-07-14T06:59:36.243
> 
> 标签：blackberry, encoding, java-me

由于黑莓默认不支持[CP037 编码](http://en.wikipedia.org/wiki/EBCDIC_037)，有谁知道我是否可以使用任何现成的 libaray？我在网上看了看，似乎什么都看不到。自己写一个是唯一的选择吗？有没有人对如何做这样的事情有任何提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T19:36:51.067

编写自己的字节 -> 字符串解码器似乎非常简单，因为编码不超过 256 个字符。只需将[Wikipedia 中的表格](http://en.wikipedia.org/wiki/EBCDIC_037)转换为 switch 语句，并将生成的字符累积为字符串。

```
byte[] rawCP037data = getEbcdicDatabytes();
StringBuffer buf = new StringBuffer();
for(int i = 0; i < rawCP037data.length; i++) {
    buf.append(convertCP037toUnicodeChar(rawCP037data[i]));
}
String decodedString = buf.toString();

char convertCP037toChar(byte b) {
    switch (b) {
    case 0x99:
      return 'r';
    case 0xAB:  // upside down question mark
      return 0x00BF;
    // TODO! fill out the rest of the table here
    }
} 
```

# scala - 安全链接隐式转换

> ID：11481760
> 
> 赞同：1
> 
> 时间：2012-07-14T07:03:44.970
> 
> 标签：scala, implicit-conversion, implicits

您可以这样做以获取到链的隐式转换：

```
package language

object chainedImplicits {
  implicit def chainImplicits[A, B, C](a: A)(implicit conv1: A => B, conv2: B => C): C = conv2(conv1(a))
} 
```

但这显然不安全。

不过，我看不出这个版本有什么问题：

```
package language

package chainedImplicits {

  final class Chained[A, B] private[chainedImplicits] (val f: A => B)

  trait Low { this: `package`.type =>
    implicit def startChaining(implicit conv: A => B): Chained[A, B] = new Chained[A, B](conv)
    implicit def chainImplicits[A, B, C](implicit conv1: Chained[A, B], conv2: B => C): Chained[B, C] = new Chained(conv1.f andThen conv2)
  }

}

package object chainedImplicits extends Low {
  implicit def endChain[A, B](a: A)(implicit conv: Chained[A, B]): B = conv.f(a)
} 
```

这里有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:54:43.667

首先，我无法让您的第一个“显然不安全”的示例做任何事情：

```
import language.implicitConversions

object Test {
  implicit def chain[A, B, C](a: A)(implicit ab: A => B, bc: B => C): C = bc(ab(a))

  case class X()
  case class Y()
  case class Z()

  implicit def xy(x: X) = Y()
  implicit def yz(y: Y) = Z()

  val z: Z = X()
} 
```

...

```
type mismatch;
  found   : Test.X
  required: Test.Z
   val z: Z = X()
               ^ 
```

接下来，第二个示例中明显的“捕获”是它无法编译。你真的试过了吗？无论如何，在“修复”它之后，它仍然不能满足你的要求：

```
import language.implicitConversions

class Convert[A, B](val convert: A => B) extends AnyVal
trait Convert0 {
  implicit def convert[A, B](implicit ab: A => B): Convert[A, B] = new Convert(ab)
  implicit def convert[A, B, C](implicit ab: Convert[A, B], bc: B => C): Convert[A, C] = new Convert(ab.convert andThen bc)
}
object Convert extends Convert0 {
  implicit def convert[A, B](a: A)(implicit convert: Convert[A, B]): B = convert.convert(a)
}

object Test {
  case class X()
  case class Y()
  case class Z()

  implicit def xy(x: X) = Y()
  implicit def yz(y: Y) = Z()

  val z: Z = X()
} 
```

这给出了相同的类型不匹配错误。据我所知，如果你想隐式转换为链，你必须明确它：

```
import language.implicitConversions

object test {
  case class X()
  case class Y()
  case class Z()

  // anything convertible to X is convertible to Y
  implicit def xy[A <% X](x: A) = Y()

  // anything convertible to Y is convertible to Z
  implicit def yz[B <% Y](y: B) = Z()

  val z: Z = X()
} 
```

# cocos2d-iphone - 我的精灵身体怎么会跳跃并回到box2d中的原始位置

> ID：11481761
> 
> 赞同：0
> 
> 时间：2012-07-14T07:03:44.307
> 
> 标签：cocos2d-iphone, box2d-iphone

我的精灵怎么会跳回来回到原来的地方？我在 iphone 应用程序中使用 box2d 物理引擎。我正在使用冲动但无法正常工作。

有没有人知道逻辑或代码比告诉我。

```
-(void)jump
{
    b2Vec2 pos=ballbody->GetPosition();
 //   float vel=ballbody->GetAngularVelocity();
    double radian=atan2(pos.x+10, pos.y+10);
    float angle=CC_RADIANS_TO_DEGREES(radian);
    NSLog(@"Angle: %f",angle);
     float impulseFactor = 1.0;
   float force=ballbody->GetMass()*10;
    //force/=6.0;
    //b2Vec2 force=b2Vec2(0,50.0f);
  //  float apply=force*JUMP_IMPULSE*impulseFactor;
    ballbody->ApplyLinearImpulse(b2Vec2(angle,force), ballbody->GetWorldCenter());

 //  [self applyLinearImpulse:b2Vec2(0,[self mass]*JUMP_IMPULSE*impulseFactor) point:[self worldCenter]];

} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T10:38:41.667

1.  请检查是否设置了重力
2.  如果没有在您施加力的特定角度上设置重力。
3.  第三种情况是记下该位置...获取当前位置...获取角度....将线速度设置为该角度....继续检查位置，一旦到达该位置，将线速度设置为零.....（这听起来令人困惑，但我并没有完全理解你的问题，就像我理解的那样，我只能提供这么多的帮助）

# javascript - 预期的标识符、字符串或数字

> ID：11481766
> 
> 赞同：0
> 
> 时间：2012-07-14T07:04:05.810
> 
> 标签：javascript, jquery

我正在尝试在我的页面中实现一些网络摄像头 jquery 脚本/插件，在 Firefox 中它可以完美运行，在 IE 中我收到此错误：

预期的标识符、字符串或数字。第 151 行字符 13

这是以下部分：

```
 $.webcam._flash = $("#jquerywebcamflash");
    }
    else
    {
        $.webcam._flashready = true;
    }

    $.webcam._flash.flash(
        {
            src: 'jquerywebcamhelper.swf',
            width: $.webcam._width,
            height: $.webcam._height,
        },
        {
            version: 8
        }
    );
} 
```

第 151 行字符 13 将是这个：`},`

完整的 .js 可以在这里找到：[jquery.webcam.js pastebin.com](http://pastebin.com/7Uq1pWpZ)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-14T07:04:47.603

您必须从此行中删除逗号：

`height: $.webcam._height,`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T07:06:21.367

尝试删除尾随逗号：

```
$.webcam._flash.flash(
    {
        src: 'jquerywebcamhelper.swf',
        width: $.webcam._width,
        height: $.webcam._height
    },
    {
        version: 8
    }
); 
```

IE 不喜欢对象声明中多余的逗号。

# matplotlib - 为什么是两条曲线而不是一条？

> ID：11481768
> 
> 赞同：0
> 
> 时间：2012-07-14T07:04:28.310
> 
> 标签：matplotlib

我的目标是生成 Y 与 X 的图。当我运行以下命令时，我得到的是 X 的图和 Y 的图：

```
import numpy as np
import matplotlib.pyplot as plt
X = [x for x in np.arange(.8, 1.2, .05)]
Y = [getm(v) for v in X]
plt.plot(X, Y, '-o')
plt.xlabel('X')
plt.ylabel('Y')
plt.grid()
plt.savefig('test.png')
plt.show() 
```

我的脚本有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T15:35:11.007

您的函数 getm 的结果必须超过一个值。我使用以下代码进行验证：

```
import matplotlib.pyplot as plt
import numpy

x = numpy.arange(0.8, 1.2, 0.05)
y1 = [x_val**2 for x_val in x]
y2 = [ [x_val**2, x_val**3] for x_val in x]
y3 = [ [x_val**2] for x_val in x]

plt.subplot(131)
plt.plot(x, y1)
plt.subplot(132)
plt.plot(x, y2)
plt.subplot(133)
plt.plot(x, y3)

plt.show() 
```

结果如下： ![在此处输入图像描述](../Images/b5e5712151fd2f48d4a8d0ad60153063.png)

# visual-studio-2010 - 将我的项目包括 sql server 数据库和水晶报告作为设置 exe

> ID：11481769
> 
> 赞同：0
> 
> 时间：2012-07-14T07:04:29.973
> 
> 标签：visual-studio-2010

我使用 Visual Studio 2010（C# windows 应用程序）、sql server 2008 和 sap 水晶报告最后一版制作了一个项目。

我完成了我的项目，我想把它交给用户使用它，用户有一台带有操作系统 windows xp 的机器。

我可以在最终用户机器上安装我的应用程序吗？

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T07:15:33.397

对于您的数据库，这取决于您的项目以及您编写它的方式。但是要包括 sql server 和水晶报表，您可以使用设置工厂。从[这里下载](http://www.softpedia.com/get/Authoring-tools/Setup-creators/Setup-Factory.shtml)

# php - 使用 \n 在电子邮件中工作但不在购物车中的换行符

> ID：11481770
> 
> 赞同：0
> 
> 时间：2012-07-14T07:04:40.767
> 
> 标签：php, javascript, line-breaks

我正在使用下面的代码将复选框项目存储在 MySQL 数据库中。第三行是我需要在每个项目之间换行的地方。我尝试了`<br>`or `<br />`，即使它在标准页面的屏幕上看起来很棒，它实际上在电子邮件收据中显示`<br>`or `<br />`html 并且不做换行符。

```
for ($i=0; $i<count($_POST['swatchname']);$i++) {
  $swatchname.= $_POST['swatchname'][$i];
  $swatchname.="<br />";  
} 
```

在我的 javascript 发送电子邮件中，我一直在使用 \n 在电子邮件中进行换行，并且效果很好。

问题是.. 我将使用什么方法或字符在电子邮件和标准 html 页面上正确查看它？我不想用逗号列出项目。客户需要它列出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T07:11:44.113

您是否更改了电子邮件的标题，以便电子邮件客户端将其理解为 html 文档而不是常见的文本格式？

```
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n"; 
```

添加内容标题使电子邮件的行为类似于 html 页面，但只是一封电子邮件，因此客户端可以查看风格化的电子邮件

**编辑：**一些电子邮件客户端不接受 html 作为内容类型，但大多数主要的都接受

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T07:06:39.740

在电子邮件中使用 \n，在网站上查看时使用`nl2br`PHP 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T07:27:12.753

我找到了一个关于“序列化”的教程。

这是一种将复选框选择存储在数据库中的方法。遵循用户友好的教程。[http://evolt.org/node/60222/](http://evolt.org/node/60222/)

然后，在教程向我展示的地方，`print $variable.", ";` 我做了它，`print $variable."<br />";`以便它会在 html 页面上给出换行符。在它向客户发送电子邮件收据的页面上，我制作了它`print $variable."\n";`似乎正在处理电子邮件。

注意：请务必按照教程进行反序列化，否则您最终会看到看起来混乱的代码并认为出了点问题。还使用循环将每个复选框项目拉出。

# performance - Haskell 性能提升的简单技巧（关于 ProjectEuler 问题）？

> ID：11481773
> 
> 赞同：12
> 
> 时间：2012-07-14T07:05:30.707
> 
> 标签：performance, haskell

我是通过阅读和解决 Project Euler 问题来编程和学习 Haskell 的新手。当然，要提高这些问题的性能，最重要的是使用更好的算法。但是，我很清楚，还有其他简单且易于实施的方法来提高性能。粗略的搜索提出了[这个问题](https://stackoverflow.com/a/6964760/1525027)和[这个问题](https://stackoverflow.com/questions/3646330/how-to-improve-the-performance-of-this-haskell-program?rq=1)，它给出了以下提示：

*   使用 ghc 标志 -O2 和 -fllvm。
*   使用 Int 类型而不是 Integer，因为它是未装箱的（甚至是 Integer 而不是 Int64）。这需要键入函数，而不是让编译器即时决定。
*   使用 rem 而不是 mod 进行分区测试。
*   适当时使用[Schwartzian 变换](http://en.wikipedia.org/wiki/Schwartzian_transform)。
*   在递归函数中使用累加器（我相信是尾递归优化）。
*   记忆（？）

（一个答案还提到了工人/包装器转换，但这似乎相当先进。）

**问题：**在 Haskell 中可以进行哪些其他简单的优化来提高 Project Euler 风格问题的性能？是否有任何其他特定于 Haskell（或特定于函数式编程？）的想法或功能可用于帮助加快解决 Project Euler 问题的速度？相反，应该注意什么？有哪些常见但低效的事情需要避免？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-14T12:37:12.870

以下是我经常参考的 Johan Tibell 的一些不错的幻灯片：

[Haskell 性能模式](http://johantibell.com/files/haskell-performance-patterns.html#%281%29)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-14T12:30:32.190

一个简单的建议是使用`hlint`它是一个程序，它检查你的源代码并提出改进语法的建议。这可能不会提高速度，因为它很可能已经由编译器或惰性评估完成。但在某些情况下它*可能会对*编译器有所帮助。此外，它将使您成为更好的 Haskell 程序员，因为您将学习更好的做事方法，并且可能更容易理解和分析您的程序。

取自[http://community.haskell.org/~ndm/darcs/hlint/hlint.htm](http://community.haskell.org/~ndm/darcs/hlint/hlint.htm)的示例，例如：

```
darcs-2.1.2\src\CommandLine.lhs:94:1: Error: Use concatMap
Found:
  concat $ map escapeC s
Why not:
  concatMap escapeC s 
```

和

```
darcs-2.1.2\src\Darcs\Patch\Test.lhs:306:1: Error: Use a more efficient monadic variant
Found:
  mapM (delete_line (fn2fp f) line) old
Why not:
  mapM_ (delete_line (fn2fp f) line) old 
```

我认为你可以在 Project Euler 问题中做的最大的增加是理解问题并消除不必要的计算。即使您不了解所有内容，您也可以做一些小修复，这将使您的程序运行速度提高一倍。假设您正在寻找高达 1.000.000 的素数，那么您当然可以做到`filter isPrime [1..1000000]`. 但是如果你想一想，那么你就会意识到，上面没有偶数是素数，你已经删除了（大约）一半的工作。而是做`[1,2] ++ filter isPrime [3,5..999999]`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-14T07:38:51.783

Haskell wiki中有[相当大的部分是](http://www.haskell.org/haskellwiki/Performance)关于性能的。

一个相当普遍的问题是太少（或太多）严格性（上面性能页面的[通用技术部分中列出的部分涵盖了这一点）。](http://www.haskell.org/haskellwiki/Performance#General_techniques)懒惰太多会导致大量的thunk被积累，太严格会导致评估太多。

在编写尾递归函数（即带有累加器的函数）时，这些考虑尤其重要；并且，根据函数的使用方式，尾递归函数在 Haskell 中的效率有时低于等效的非尾递归函数，即使使用最优严格性注释也是如此。

此外，正如[最近的问题](https://stackoverflow.com/questions/11466284/how-is-this-fibonacci-function-memoized)所证明的那样，共享可以对性能产生巨大影响（在许多情况下，这可以被视为一种记忆形式）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-15T03:59:54.400

欧拉计划主要是为了找到解决问题的聪明算法解决方案。一旦你有了正确的算法，微优化就不会成为问题，因为即使是简单的或解释的（例如 Python 或 Ruby）实现也应该在速度限制内运行良好。您需要的主要技术是了解惰性评估，这样您就可以避免 thunk 堆积。

# c - 发送文件描述符时 sendmsg 不起作用

> ID：11481780
> 
> 赞同：1
> 
> 时间：2012-07-14T07:07:10.080
> 
> 标签：c, sockets, unix-socket

我正在使用 unix 域套接字在不同进程之间发送打开的文件描述符。Unix 域套接字工作正常，但是当我用来`sendmsg`发送文件描述符时发生了一些奇怪的事情。该函数在之后返回，`sendmsg`并且 sendmsg 不返回任何内容。然后 recvmsg 给出`Invalid Argument`错误。这是我的代码。

*客户端（发送文件描述符）：*

```
#include <stropts.h>
#include "accesories.c"
#include <fcntl.h>
#include <errno.h>
#include <string.h>
#include <sys/ioctl.h>
#include <sys/socket.h>
#include <sys/un.h>
#include <unistd.h>
#include <stdio.h>

#define CONTROLLEN  CMSG_LEN(sizeof(int))
static struct cmsghdr   *cmptr = NULL;  /* malloc'ed first time */

int send_err(int fd, int errcode, const char *msg);
int send_fd(int fd, int fd_to_send);

int main(int argc, char const *argv[])
{
    int fd_to_send;
    if((fd_to_send = open("vi",O_RDONLY)) < 0)
        printf("vi open failed");

    struct sockaddr_un address;
    int  socket_fd, nbytes;
    char buffer[256];

    socket_fd = socket(PF_UNIX, SOCK_STREAM, 0);
    if(socket_fd < 0)
    {
        printf("socket() failed\n");
        return 1;
    }

    /* start with a clean address structure */
    memset(&address, 0, sizeof(struct sockaddr_un));

    address.sun_family = AF_UNIX;
    snprintf(address.sun_path, sizeof(address.sun_path)-1, "./demo_socket");

    if(connect(socket_fd, (struct sockaddr *) &address, sizeof(struct sockaddr_un)) != 0)
    {
        printf("connect() failed\n");
        return 1;
    }

    nbytes = snprintf(buffer, 256, "hello from a client");
    write(socket_fd, buffer, nbytes);

    nbytes = read(socket_fd, buffer, 256);
    buffer[nbytes] = 0;

    printf("MESSAGE FROM SERVER: %s\n", buffer);

    //sending the file descriptor    
    printf("From send_fd %d \n",send_fd(socket_fd,fd_to_send));

    close(socket_fd);

    exit(0);

}

int send_err(int fd, int errcode, const char *msg)
{
    int     n;

    if ((n = strlen(msg)) > 0)
        if (write(fd, msg, n) != n)    /* send the error message */
            return(-1);

    if (errcode >= 0)
        errcode = -1;   /* must be negative */

    if (send_fd(fd, errcode) < 0)
        return(-1);

    return(0);
}

int send_fd(int fd, int fd_to_send)
{

    int temp;
    struct iovec    iov[1];
    struct msghdr   msg;
    char            buf[2]; /* send_fd()/recv_fd() 2-byte protocol */

    iov[0].iov_base = buf;
    iov[0].iov_len  = 2;
    msg.msg_iov     = iov;
    msg.msg_iovlen  = 1;
    msg.msg_name    = NULL;
    msg.msg_namelen = 0;
    if (fd_to_send < 0) {
        msg.msg_control    = NULL;
        msg.msg_controllen = 0;
        buf[1] = -fd_to_send;   /* nonzero status means error */
        if (buf[1] == 0)
            buf[1] = 1; /* -256, etc. would screw up protocol */
    } else {
        if (cmptr == NULL && (cmptr = malloc(CONTROLLEN)) == NULL)
            return(-1);
        cmptr->cmsg_level  = SOL_SOCKET;
        cmptr->cmsg_type   = SCM_RIGHTS;
        cmptr->cmsg_len    = CONTROLLEN;
        msg.msg_control    = cmptr;
        msg.msg_controllen = CONTROLLEN;
        *(int *)CMSG_DATA(cmptr) = fd_to_send;     /* the fd to pass */
        buf[1] = 0;          /* zero status means OK */
    }
    buf[0] = 0;              /* null byte flag to recv_fd() */
    printf("before sendmsg \n");
    if (temp = sendmsg(fd, &msg, 0) != 2)
    {
        printf("inside sendmsg condition %d\n",temp);
        return(-1);  
    }
    printf("after sendmsg %d\n",temp);
    return(0);

} 
```

*服务器（接收文件描述符）：*

```
#include <stropts.h>
#include "accesories.c"
#include <sys/ioctl.h>
#include <sys/un.h>
#include <sys/types.h>
#include <unistd.h>
#include <sys/socket.h>

#define MAXLINE 10
/* size of control buffer to send/recv one file descriptor */
#define CONTROLLEN  CMSG_LEN(sizeof(int))

static struct cmsghdr   *cmptr = NULL;      /* malloc'ed first time */

int recv_fd(int fd, ssize_t (*userfunc)(int, const void *, size_t));
ssize_t errcheckfunc(int a,const void *b, size_t c);
int connection_handler(int connection_fd);

int main(int argc, char const *argv[])
{
  struct sockaddr_un address;
  int socket_fd, connection_fd;
  socklen_t address_length;
  pid_t child;

  socket_fd = socket(PF_UNIX, SOCK_STREAM, 0);
  if(socket_fd < 0)
  {
    printf("socket() failed\n");
    return 1;
  } 

  unlink("./demo_socket");

  /* start with a clean address structure */
  memset(&address, 0, sizeof(struct sockaddr_un));

  address.sun_family = AF_UNIX;
  snprintf(address.sun_path, sizeof(address.sun_path)-1, "./demo_socket");

  if(bind(socket_fd, (struct sockaddr *) &address, sizeof(struct sockaddr_un)) != 0)
  {
    printf("bind() failed\n");
    return 1;
  }

  if(listen(socket_fd, 5) != 0)
  {
    printf("listen() failed\n");
    return 1;
  }

  while((connection_fd = accept(socket_fd, (struct sockaddr *) &address,&address_length)) > -1)
  {
    connection_handler(connection_fd);

    int fd_to_recv;
    fd_to_recv = recv_fd(socket_fd,&errcheckfunc);

    if(read(fd_to_recv,msgbuf,5) < 0)
      printf("message read failed");
    printf("message received:%s\n",msgbuf);

    close(connection_fd);
  }

  close(socket_fd);
  unlink("./demo_socket");

  return 0;
}

int recv_fd(int fd, ssize_t (*userfunc)(int, const void *, size_t))
{
  int             newfd, nr, status;
  char            *ptr;
  char            buf[MAXLINE];
  struct iovec    iov[1];
  struct msghdr   msg;

  status = -1;
  for ( ; ; ) 
  {
    iov[0].iov_base = buf;
    iov[0].iov_len  = sizeof(buf);
    msg.msg_iov     = iov;
    msg.msg_iovlen  = 1;
    msg.msg_name    = NULL;
    msg.msg_namelen = 0;
    if (cmptr == NULL && (cmptr = malloc(CONTROLLEN)) == NULL)
      return(-1);
    msg.msg_control    = cmptr;
    msg.msg_controllen = CONTROLLEN;
    if ((nr = recvmsg(fd, &msg, 0)) < 0) 
    {
      printf("recvmsg errrrror %d %d %s\n",nr,errno,strerror(errno));
      //perror("recvmsg errrrror");
    } else if (nr == 0) 
    {
      perror("connection closed by server");
      return(-1);
    }
    /*
    * See if this is the final data with null & status.  Null
    * is next to last byte of buffer; status byte is last byte.
    * Zero status means there is a file descriptor to receive.
    */
    for (ptr = buf; ptr < &buf[nr]; ) 
    {
      if (*ptr++ == 0) 
      {
        if (ptr != &buf[nr-1])
          perror("message format error");
        status = *ptr & 0xFF;  /* prevent sign extension */
        if (status == 0) 
        {
          if (msg.msg_controllen != CONTROLLEN)
          perror("status = 0 but no fd");
          newfd = *(int *)CMSG_DATA(cmptr);
        } else 
        {
          newfd = -status;
        }
        nr -= 2;
      }
    }
    if (nr > 0 && (*userfunc)(STDERR_FILENO, buf, nr) != nr)
      return(-1);
    if (status >= 0)    /* final data has arrived */
      return(newfd);  /* descriptor, or -status */
  }
}

ssize_t errcheckfunc(int a,const void *b, size_t c)
{
    return 0;
}

int connection_handler(int connection_fd)
{
  int nbytes;
  char buffer[256];

  nbytes = read(connection_fd, buffer, 256);
  buffer[nbytes] = 0;

  printf("MESSAGE FROM CLIENT: %s\n", buffer);
  nbytes = snprintf(buffer, 256, "hello from the server");
  write(connection_fd, buffer, nbytes);

  return 0;
} 
```

客户端输出：

```
MESSAGE FROM SERVER: hello from the server
before sendmsg 
```

甚至没有`inside sendmsg condition`和`after sendmsg`打印？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-03T10:00:21.103

*[由于将评论标记为答案的](https://meta.stackexchange.com/questions/82099/answering-comment-answered-questions)功能请求仍然被拒绝，因此我在此处复制上述解决方案。*

您对 recvmsg() 的调用试图从侦听套接字而不是连接的套接字接收数据，因为您的主循环将 socket_fd 传递给 recv_fd() 而不是 connection_fd。——马修·斯莱特里

# objective-c - 如何从 HEX 值计算 CRC-16？

> ID：11481782
> 
> 赞同：3
> 
> 时间：2012-07-14T07:07:23.280
> 
> 标签：objective-c, hex, crc, polynomial-math

在我的代码中，我需要为存储为 NSdata 的 HEX 值计算 CRC-16 16 位值，下面是在 c 中计算 CRC-16 的代码片段。

```
 void UpdateCRC(unsigned short int *CRC, unsigned char x)
{
  // This function uses the initial CRC value passed in the first
  // argument, then modifies it using the single character passed
  // as the second argument, according to a CRC-16 polynomial
  // Arguments:
  //   CRC -- pointer to starting CRC value
  //   x   -- new character to be processed
  // Returns:
  // The function does not return any values, but updates the variable
  // pointed to by CRC
static int const Poly = 0xA001;
int i;
bool flag;
*CRC ^= x;
for (i=0; i<8; i++)
// CRC-16 polynomial
{
  flag = ((*CRC & 1) == 1);
  *CRC = (unsigned short int)(*CRC >> 1);
  if (flag)
      *CRC ^= Poly;
  }
return; 
} 
```

保存十六进制值的 NSdata，如下所示

```
const char connectByteArray[] = {
    0x21,0x01,0x90,0x80,0x5F
};
NSData* data = [NSData dataWithBytes: connectByteArray length:sizeof(connectByteArray)]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T05:47:55.163

我使用以下 C 程序解决了，我希望它可以帮助某人..干杯！！！

```
#include <string.h>
#include <stdio.h>

const int order = 16;
const unsigned long polynom = 0x8005;
const int direct = 1;
const unsigned long crcinit = 0;
const unsigned long crcxor = 0;
const int refin = 1;
const int refout = 1;

// 'order' [1..32] is the CRC polynom order, counted without the leading '1' bit
// 'polynom' is the CRC polynom without leading '1' bit
// 'direct' [0,1] specifies the kind of algorithm: 1=direct, no augmented zero bits
// 'crcinit' is the initial CRC value belonging to that algorithm
// 'crcxor' is the final XOR value
// 'refin' [0,1] specifies if a data byte is reflected before processing (UART) or not
// 'refout' [0,1] specifies if the CRC will be reflected before XOR

// Data character string

const unsigned char string[] = {0x05,0x0f,0x01,0x00,0x00,0x99};

// internal global values:

unsigned long crcmask;
unsigned long crchighbit;
unsigned long crcinit_direct;
unsigned long crcinit_nondirect;
unsigned long crctab[256];

// subroutines

unsigned long reflect (unsigned long crc, int bitnum) {

    // reflects the lower 'bitnum' bits of 'crc'

    unsigned long i, j=1, crcout=0;

    for (i=(unsigned long)1<<(bitnum-1); i; i>>=1) {
        if (crc & i) crcout|=j;
        j<<= 1;
    }
    return (crcout);
}

void generate_crc_table() {

    // make CRC lookup table used by table algorithms

    int i, j;
    unsigned long bit, crc;

    for (i=0; i<256; i++) {

        crc=(unsigned long)i;
        if (refin) crc=reflect(crc, 8);
        crc<<= order-8;

        for (j=0; j<8; j++) {

            bit = crc & crchighbit;
            crc<<= 1;
            if (bit) crc^= polynom;
        }           

        if (refin) crc = reflect(crc, order);
        crc&= crcmask;
        crctab[i]= crc;
    }
}

unsigned long crctablefast (unsigned char* p, unsigned long len) {

    // fast lookup table algorithm without augmented zero bytes, e.g. used in pkzip.
    // only usable with polynom orders of 8, 16, 24 or 32.

    unsigned long crc = crcinit_direct;

    if (refin) crc = reflect(crc, order);

    if (!refin) while (len--) crc = (crc << 8) ^ crctab[ ((crc >> (order-8)) & 0xff) ^ *p++];
    else while (len--) crc = (crc >> 8) ^ crctab[ (crc & 0xff) ^ *p++];

    if (refout^refin) crc = reflect(crc, order);
    crc^= crcxor;
    crc&= crcmask;

    return(crc);
}

unsigned long crctable (unsigned char* p, unsigned long len) {

    // normal lookup table algorithm with augmented zero bytes.
    // only usable with polynom orders of 8, 16, 24 or 32.

    unsigned long crc = crcinit_nondirect;

    if (refin) crc = reflect(crc, order);

    if (!refin) while (len--) crc = ((crc << 8) | *p++) ^ crctab[ (crc >> (order-8))  & 0xff];
    else while (len--) crc = ((crc >> 8) | (*p++ << (order-8))) ^ crctab[ crc & 0xff];

    if (!refin) while (++len < order/8) crc = (crc << 8) ^ crctab[ (crc >> (order-8))  & 0xff];
    else while (++len < order/8) crc = (crc >> 8) ^ crctab[crc & 0xff];

    if (refout^refin) crc = reflect(crc, order);
    crc^= crcxor;
    crc&= crcmask;

    return(crc);
}

unsigned long crcbitbybit(unsigned char* p, unsigned long len) {

    // bit by bit algorithm with augmented zero bytes.
    // does not use lookup table, suited for polynom orders between 1...32.

    unsigned long i, j, c, bit;
    unsigned long crc = crcinit_nondirect;

    for (i=0; i<len; i++) {

        c = (unsigned long)*p++;
        if (refin) c = reflect(c, 8);

        for (j=0x80; j; j>>=1) {

            bit = crc & crchighbit;
            crc<<= 1;
            if (c & j) crc|= 1;
            if (bit) crc^= polynom;
        }
    }   

    for (i=0; i<order; i++) {

        bit = crc & crchighbit;
        crc<<= 1;
        if (bit) crc^= polynom;
    }

    if (refout) crc=reflect(crc, order);
    crc^= crcxor;
    crc&= crcmask;

    return(crc);
}

unsigned long crcbitbybitfast(unsigned char* p, unsigned long len) {

    // fast bit by bit algorithm without augmented zero bytes.
    // does not use lookup table, suited for polynom orders between 1...32.

    unsigned long i, j, c, bit;
    unsigned long crc = crcinit_direct;

    for (i=0; i<len; i++) {

        c = (unsigned long)*p++;
        if (refin) c = reflect(c, 8);

        for (j=0x80; j; j>>=1) {

            bit = crc & crchighbit;
            crc<<= 1;
            if (c & j) bit^= crchighbit;
            if (bit) crc^= polynom;
        }
    }   

    if (refout) crc=reflect(crc, order);
    crc^= crcxor;
    crc&= crcmask;

    return(crc);
}

int main() {

    // test program for checking four different CRC computing types that are:
    // crcbit(), crcbitfast(), crctable() and crctablefast(), see above.
    // parameters are at the top of this program.
    // Result will be printed on the console.

    int i;
    unsigned long bit, crc;

    // at first, compute constant bit masks for whole CRC and CRC high bit

    crcmask = ((((unsigned long)1<<(order-1))-1)<<1)|1;
    crchighbit = (unsigned long)1<<(order-1);

    // check parameters

    if (order < 1 || order > 32) {
        printf("ERROR, invalid order, it must be between 1..32.\n");
        return(0);
    }

    if (polynom != (polynom & crcmask)) {
        printf("ERROR, invalid polynom.\n");
        return(0);
    }

    if (crcinit != (crcinit & crcmask)) {
        printf("ERROR, invalid crcinit.\n");
        return(0);
    }

    if (crcxor != (crcxor & crcmask)) {
        printf("ERROR, invalid crcxor.\n");
        return(0);
    }

    // generate lookup table

    generate_crc_table();

    // compute missing initial CRC value

    if (!direct) {

        crcinit_nondirect = crcinit;
        crc = crcinit;
        for (i=0; i<order; i++) {

            bit = crc & crchighbit;
            crc<<= 1;
            if (bit) crc^= polynom;
        }
        crc&= crcmask;
        crcinit_direct = crc;
    }

    else {

        crcinit_direct = crcinit;
        crc = crcinit;
        for (i=0; i<order; i++) {

            bit = crc & 1;
            if (bit) crc^= polynom;
            crc >>= 1;
            if (bit) crc|= crchighbit;
        }   
        crcinit_nondirect = crc;
    }

    // call CRC algorithms using the CRC parameters above and print result to the console

    printf("\n");
    printf("CRC tester v1.1 written on 13/01/2003 by Sven Reifegerste (zorc/reflex)\n");
    printf("-----------------------------------------------------------------------\n");
    printf("\n");
    printf("Parameters:\n");
    printf("\n");
    printf(" polynom             :  0x%x\n", polynom);
    printf(" order               :  %d\n", order);
    printf(" crcinit             :  0x%x direct, 0x%x nondirect\n", crcinit_direct, crcinit_nondirect);
    printf(" crcxor              :  0x%x\n", crcxor);
    printf(" refin               :  %d\n", refin);
    printf(" refout              :  %d\n", refout);
    printf("\n");
    printf(" data string         :  '%s' (%d bytes)\n", string, strlen(string));
    printf("\n");
    printf("Results:\n");
    printf("\n");

    printf(" crc bit by bit      :  0x%x\n", crcbitbybit((unsigned char *)string, 6));
    printf(" crc bit by bit fast :  0x%x\n", crcbitbybitfast((unsigned char *)string, strlen(string)));
    if (!(order&7)) printf(" crc table           :  0x%x\n", crctable((unsigned char *)string, strlen(string)));
    if (!(order&7)) printf(" crc table fast      :  0x%x\n", crctablefast((unsigned char *)string, strlen(string)));

    return(0);
} 
```

# android - 如何从我的 android 设备而不是从 sdcard 获取所有图像和照片？

> ID：11481784
> 
> 赞同：7
> 
> 时间：2012-07-14T07:09:34.660
> 
> 标签：android, android-image, collect

我想从我的 android 设备中获取所有图像/照片/壁纸以及图像保存路径。

我已经实现了从 sdcard 收集图像的代码，如下所示：

```
String[] mProjection = {
    MediaStore.Images.Media._ID,
    MediaStore.Images.Media.DATA
};

mCursor = cr.query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
    mProjection,
    null,
    null,
    MediaStore.Images.Media.DEFAULT_SORT_ORDER); 
```

从上面的代码中，我只能从 sdcard 中检索图像。但是如果图像在设备手机内存中可用，那么我该如何检索图像/照片/壁纸？如果我使用 INTERNAL_CONTENT_URI 它不会返回 wallapers 信息其他图像信息

请任何人帮助我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:48:28.320

试试这个答案，这将起作用：

```
public static final int GALLERY_CODE = 322;

Intent intent = new Intent();
intent.setType("image/*");
intent.setAction(Intent.ACTION_GET_CONTENT);
startActivityForResult(Intent.createChooser(
    intent,
    "Select Picture"),
    GALLERY_CODE);

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
//Assinging on corresponding import
super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == GALLERY_CODE && resultCode == RESULT_OK) {
        Uri selectedImageUri = data.getData();
        selectedImagePath = getPath(selectedImageUri);

        try {

            //add logic for coping file

        } catch (Exception e) {
        }
    }
}

public String getPath(Uri uri) {
    String[] projection = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(uri, projection, null, null, null);

    int column_index = cursor
        .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);

    cursor.moveToFirst();
    return cursor.getString(column_index);
} 
```

# android - android api如何调用原生系统库？

> ID：11481788
> 
> 赞同：0
> 
> 时间：2012-07-14T07:10:22.590
> 
> 标签：android, api, java-native-interface, system

在 android.graphics.Typeface.java 中，调用本机函数（`nativeCreateFromAsset()`...），但我没有找到 System.loadLibrary（）。那么，它通过哪种方式加载本机库？

如果我想在我的应用中调用一个android系统原生的lib，比如libandroid_runtime.so，怎么办？我尝试使用 `System.loadLibrary("android_runtime")`但android_runtime 没有JNI_OnLoad()。

谢谢！

彭

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T07:29:21.427

请按照给定的链接步骤操作

[http://mindtherobot.com/blog/452/android-beginners-ndk-setup-step-by-step/](http://mindtherobot.com/blog/452/android-beginners-ndk-setup-step-by-step/) 另见 [http://psrdotcom.blogspot.in/2011/12/android-ndk-jni-windows- xp7-with-3264.html](http://psrdotcom.blogspot.in/2011/12/android-ndk-jni-windows-xp7-with-3264.html)

mysteps 还参见步骤 1 创建简单的 android 项目 步骤 2 创建 jni 文件夹 步骤 3 在 jni 文件夹中创建 2 个文件 Android.mk 和 ndkfoo.c 步骤 4 在两个文件中生成所需的代码 步骤 5 使用命令提示符生成库 步骤 6 项目路径直到 jni folde> 现在 ndk 路径，直到 ndk-build 步骤 7 ex。D:\New_Wok_2\Firstndk\jni>c:\android-ndk-r8\ndk-build 步骤 8 如果 c 文件正确，则生成 libsabc.so 文件 步骤 9 同样在项目刷新清理中，此处自动添加新的 libs、obj 文件夹

# android - 使用带有 WIFI 代理连接的 Android APP

> ID：11481792
> 
> 赞同：1
> 
> 时间：2012-07-14T07:10:48.457
> 
> 标签：android, proxy, client-server

> **可能重复：**
> [Android 应用程序如何决定是否要使用网络代理](https://stackoverflow.com/questions/9544582/how-android-application-decide-if-they-want-to-use-network-proxy-or-not)

我有一个客户端服务器应用程序，客户端将文件从安卓手机发送到亚马逊 ec2 上的服务器。

我想知道我是否可以使用这个应用程序并在客户端和服务器之间建立连接，即使客户端连接到的 WIFI 有一个代理（我有一个用户名和密码）。

如果没有，我应该怎么做才能让它工作？

顺便说一句，似乎有这个应用程序[proxydroid](https://play.google.com/store/apps/details?id=org.proxydroid&hl=en)。我的 android 版本是 2.3，似乎他们解决了 3.2 及更高版本，如下[所示](http://acer--uk.custhelp.com/app/answers/detail/a_id/12638/~/setting-proxy-settings-in-android-3.2)。还有其他建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T07:26:33.550

代理的目的是使用mac地址识别用户并允许用户通过身份验证过程，所以你不能指望匿名连接。否则我们应该依赖或为android编写应用程序

# jquery - 在 asp.net mvc 中处理 jquery 函数

> ID：11481793
> 
> 赞同：0
> 
> 时间：2012-07-14T07:11:06.547
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3

我添加了一个摇动动画类 (Css3)，当文本框为空时添加它，但它无法正常工作，因为 asp.net mvc 再次将用户重定向到主页。处理这件事的任何方法。

```
 public ActionResult Index()
    {
        return View();
    }

    [HttpPost]
    public ActionResult Index(string username, string password)
    {
        if (ModelState.IsValid)
        {
            return RedirectToAction("Index", "Product");
        }
        else
        {
            return RedirectToAction("Index","Home");
        }  
    } 
```

jQuery 函数

```
 $('#loginButton').click(function () {
    shaking();
});

function shaking() {
    if ($('#username').val() || $('#password').val()) {

    }
    else {
        $('#loginForm').addClass("shake");
        setTimeout(function () {
            $('#loginForm').removeClass();
        }, 2000);
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T07:32:25.087

您需要防止单击按钮时的默认操作，否则会导致提交表单（导致您注意到重定向）。如果将事件传递到函数中，`preventDefault()`如果未填写相关字段，则可以通过调用事件来阻止提交。

```
$('#loginButton').click(function (e) {
    shaking(e);
});

function shaking(e) {
    if ($('#username').val() && $('#password').val()) { // should be an && to check both
        // do something if both username and password filled in
    }
    else {
        e.preventDefault(); // prevent form from being submitted

        $('#loginForm').addClass("shake");
        setTimeout(function () {
            $('#loginForm').removeClass();
        }, 2000);
    }
};​ 
```

# joomla - 联系我们电子邮件 joomla 中的文章名称

> ID：11481797
> 
> 赞同：0
> 
> 时间：2012-07-14T07:11:47.873
> 
> 标签：joomla, joomla1.5

我正在为我的客户寻找一个棘手的要求的解决方案。场景是：

1.  网站包含课程，所有课程都添加为文章。
2.  每门课程都有一个（正如我已经告诉过的课程 = 文章）“查询这门课程”按钮，当点击该按钮时，它将带用户进入联系表格。

我想知道如何在该表单上显示该特定课程名称，并且我希望在用户点击提交按钮后将其名称发送到电子邮件中。是否有任何联系表单组件提供该功能。？

请帮我解决这个问题。我正在使用 Joomla 1.5

谢谢并恭祝安康

吉特什 KT

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T14:34:12.540

您可能必须编写或获取插件才能完成此操作。我在[JED找到了](http://extensions.joomla.org/extensions/content-sharing/articles-sharing)[Mail This Page](http://extensions.joomla.org/extensions/content-sharing/articles-sharing/7717)。不知道它是否会完全满足您的需求，但听起来足够接近，您可以对其进行修改以满足您的需求。

# linux - Yii / Linux 上的 Web 进程权限

> ID：11481799
> 
> 赞同：5
> 
> 时间：2012-07-14T07:11:59.730
> 
> 标签：linux, permissions, yii, gii

我是一个菜鸟，在 AWS 上浏览 Yii 教程。到目前为止，我已经能够启动并运行所有内容 - 包括 mysql 连接。但现在我正在使用 Gii 代码生成工具来帮助创建一些模型类。这样做时，我收到以下错误：

```
generating models/User.php
            Unable to write the file '/var/www/html/blog/protected/models/User.php'.
done! 
```

文档还告诉我：

```
Info: Because the code generator needs to save the generated code into files, it is
required that the Web process have the permission to create and modify the corresponding
 files. For simplicity, we may give the Web process the write permission to the whole
 /www/blog directory. Note that this is only needed on development machines when using Gii. 
```

这对我来说很有意义，我理解 Linux 权限的基本逻辑应用于用户和组......但不适用于进程。有人可以向我指出如何授予 Gii 进程对 webroot（在我的情况下为：/var/www/html/blog/）目录的写权限的入门吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T14:41:09.590

我授予所有用户以递归方式读取、写入和执行 webapp 文件的权限。

```
$sudo chmod -R og=rwx webapp_folder 
```

并解决了权限问题，但这可能不是最好的方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-14T17:11:41.643

Gii 使用由网络服务器用户生成的进程来读取和写入文件。正是这个用户需要写入文件的权限。在 Debian/Ubuntu 上，用户是`www-data`. 检查它适用于您的操作系统并授予该用户在该文件夹中的写入权限。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-01T21:22:28.053

在您的 httpd.conf 文件中有以下几行：

```
#
# If you wish httpd to run as a different user or group, you must run
# httpd as root initially and it will switch.
#
# User/Group: The name (or #number) of the user/group to run httpd as.
# It is usually good practice to create a dedicated user and group for
# running httpd, as with most system services.
#
User daemon
Group daemon 
```

httpd 的用户和组是“守护进程”。现在在终端中键入以下命令：

```
chown -R daemon:daemon /path/to/htdocs/directory 
```

有时这个命令必须在 type 之后执行

```
sudo su 
```

现在 Gii 可以使用 chmod 775 权限将文件写入受保护的文件夹

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-05T05:27:12.450

仅供参考，如果命令文件夹或由命令创建的目录，如您可以写入文件用户浏览器，反之亦然......但要访问 yii 的写入权限..

按照这个

```
sudo chmod -R 0777 your_project_name/ 
```

# ollydbg - [ARG.1] 在 ollydbg 中是什么意思？

> ID：11481804
> 
> 赞同：2
> 
> 时间：2012-07-14T07:12:43.680
> 
> 标签：ollydbg

我正在分析 ollydbg 中的程序，一些指令被反汇编为 [ARG.1]，例如：MOV ESI,[ARG.1]

我尝试在汇编书籍中搜索此命令，但似乎它仅用于 ollydbg 并且不是标准汇编代码。我对吗？这是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T07:16:43.693

我怀疑 ollydbg 试图通过对您的堆栈布局进行逆向工程来为您提供帮助，这`[ARG.1]`实际上是`[EBP+0x08]`或类似的——如果您在使用 C 调用约定调用的函数中，堆栈上的第一个参数。

有一段时间没有使用 ollydbg，我相信有一种方法可以说服 ollydbg 更准确地向您展示确切的操作码是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-09T20:47:45.070

您可以从以下位置关闭显示 ARG 和 LOCAL：选项 -> 调试选项 -> 分析 1 ->“在过程中显示 ARG 和 LOCAL”。

然后可以看到 ARG 和 LOCAL 的真实表示。

# php - 用于计数访问和重定向的 PHP 会话 if (session['visits']=1)

> ID：11481806
> 
> 赞同：3
> 
> 时间：2012-07-14T07:13:07.813
> 
> 标签：php, session, redirect

我正在尝试创建一个页面，如果您的用户第一次来，它会重定向到索引页面，但如果用户第二次来，页面不会重定向。我正在使用简单的 php 会话来计算访问次数，并使用 if 语句来检查条件：

```
<?php
session_start(); 
$_SESSION['views'] = $SESSION['views']+1;
if($SESSION['views'] = 1){
header("location:index.php");
}
?> 
```

问题是用零初始化数组，即

```
<?php    
$_SESSION['views']=0;
?> 
```

它既不像看起来那么简单，也没有那么难。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-14T07:16:08.047

用于`isset()`检查是否已创建密钥：

```
<?php
session_start();

if (!isset($_SESSION['views'])) { 
    $_SESSION['views'] = 0;
}

$_SESSION['views'] = $_SESSION['views']+1;

if ($_SESSION['views'] == 1) {
    header("location:index.php");
}
?> 
```

还要小心：您`if ($SESSION['views'] = 1)`将 key 设置为 1 而不是比较它，并且正确的超全局名称`$_SESSION`不是`$SESSION`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T07:20:23.680

首先（@nivrig 和 @Yan 不修复）

```
if($_SESSION['views'] = 1){
header("location:index.php");
} 
```

应该

```
if ($_SESSION['views'] == 1){ 
header("location:index.php");
} 
```

和@nivrig一起去他的例子是对的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T07:19:26.343

同意尼夫里格。检查会话是否已设置。

但是，您的代码中有几个语法错误：

确保您写的是 $_SESSION 而不是 $SESSION 并且当您使用 if 案例时，您必须使用 == 进行比较。单个 = 将为变量赋值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T07:21:04.523

由于您不想先初始化变量，因此请使用[isset()](http://us.php.net/isset)检查变量是否已设置且不为 NULL：

```
<?php

session_start(); 

if(isset($_SESSION['views'])){
    $_SESSION['views']++;
}else{
    $_SESSION['views'] = 0;
    header("location: index.php");
    exit();
}
?> 
```

如果您不关心用户访问该页面的次数，那么您可以简单地使用：

```
<?php

session_start(); 

if(!isset($_SESSION['views'])){
    $_SESSION['views'] = 0;
    header("location: index.php");
    exit();
}
?> 
```

第二种解决方案不担心增加数量，`views`只是检查该值是否已设置。如果尚未设置，则可以断言这是用户第一次访问该页面，然后设置变量并重定向用户。通过设置变量，您将确保用户在查看完页面后不会进入循环。这种方法应该更好地简化最初要求的事情。

还要确保`exit()`在重定向用户之后放置。这样可以确保在重定向用户时不会执行以下任何代码。

# oracle - 动态行到列更新

> ID：11481810
> 
> 赞同：0
> 
> 时间：2012-07-14T07:13:47.457
> 
> 标签：oracle

我有一个存储元数据信息的表 A (column_name,value)。
我有另一个表 B，它的列是 A 的行，还有一些额外的系统列。
例如，如果表 A 有两行`(empID,1)`，`(salary,200)`那么表 B 将如下所示`B(empid,salary,system_id,create_date,update_date)`。
我需要更新 B 并将 empid 设置为 1 并将工资设置为 200 的 pl/sql 过程。A 中的行和 B 中的列可以动态更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T07:43:51.017

从表 A 中获取列和值的列表，构建语句并立即执行：

```
declare
 cols varchar2(2000);
begin
 for a in (select * from a) loop
   cols := ','||a.column_name||'='||a.value||cols;
 end loop;
 cols:=substr(cols,2);
 execute immediate 'update b set '||cols;
end;
/ 
```

有关示例，请参见[http://www.sqlfiddle.com/#!4/f6976/8 。](http://www.sqlfiddle.com/#!4/f6976/8)

但是我想知道您将如何使用当前的数据库结构构建 where 子句。目前，您无法关联表 A 中的行来为表 B 构建 where 子句。

# core-data - 使用核心数据存储 NSOperation

> ID：11481811
> 
> 赞同：0
> 
> 时间：2012-07-14T07:14:01.663
> 
> 标签：core-data, persistence, nsoperation, nsoperationqueue

我需要添加持久性`NSOperationQueue`，以便用户可以关闭我的应用程序而不会丢失任何数据。我是核心数据的忠实粉丝，所以我正在寻找一种将我的`NSOperation`子类存储在核心数据上的方法。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T15:48:53.620

我不确定你的问题，但我会尽量给你一些提示。

是的，Core Data 可能是一种有效的方法。我不知道你为什么需要存储一个`NSOperation`.

相反，我可以建议的是安排您的模型来处理同步操作。特别是，我会为您需要与服务器同步的实体添加一个属性。例如，调用它，`isSync`并说它是一个`BOOL`值。

因此，当特定数据与服务器同步并且您收到了良好的响应时，您可以修改该属性以假定该`YES`值。这意味着已同步特定数据。换句话说，当一个对象（数据）没有同步时，它的`isSync`值为`NO`，否则为`YES`，如果你愿意，你可以删除它。

下次，您可以将`isSync`有价值的数据同步到`NO`. 它们尚未同步。其他元素已同步，您可以删除它们以节省设备空间。

要了解如何进行同步，我真的建议阅读这个 stackoverflow 主题[How to Sync iPhone Core Data with web server，然后推送到其他设备？](https://stackoverflow.com/questions/5035132/how-to-sync-iphone-core-data-with-web-server-and-then-push-to-other-devices).

此外，如果您处理操作，如果用户关闭了应用程序，您需要取消当前操作。[在NSOperations 队列和处理应用程序退出](https://stackoverflow.com/questions/1566230/queue-of-nsoperations-and-handling-application-exit)中可以找到一个非常有趣的讨论。

显然，可能还有其他解决方案可以实现这一目标，但我认为这可能是实现您想要做的事情的简单方法。

希望有帮助。

# macos - 如何在 Mac OSX 上查看加载的内核模块？

> ID：11481813
> 
> 赞同：13
> 
> 时间：2012-07-14T07:14:48.173
> 
> 标签：macos, bash, shell, linux-kernel

在 Linux 中，我们有`lsmod`. `lsmod`Mac中的等价物是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-14T07:21:52.923

如此处所述： [https ://developer.apple.com/library/mac/documentation/Porting/Conceptual/PortingUnix/compiling/compiling.html](https://developer.apple.com/library/mac/documentation/Porting/Conceptual/PortingUnix/compiling/compiling.html)

"`lsmod`在 Mac OS X 上不可用，但存在提供类似功能的其他命令。" 他们列出`kextutil`, `kextstat`, `kextload`, `kmodunload`（我认为他们的意思是`kextunload`）。这些命令`man`在 Mac OS X 上有页面。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-14T07:19:17.293

如果您想知道 MacOS 上加载了哪些内核扩展，请使用该`kextstat`命令。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-07-24T05:24:41.220

自 2021 年起， 、 、 和 的联机帮助页中`kextstat`提到`kextutil`它们`kextload`已`kextunload`被弃用，而是建议使用`kmutil`. 要复制 的行为`kextstat`，请使用`kmutil showloaded`。

# rss - 如何在 MediaWiki 中生成最近更改页面的 RSS 提要？

> ID：11481814
> 
> 赞同：1
> 
> 时间：2012-07-14T07:14:50.977
> 
> 标签：rss, mediawiki, wiki

我正在寻找创建（或查找）最近更改页面的 RSS 提要。special:RecentChanges&feed=rss 接近我需要的，但它返回指向更改摘要的链接，而不是指向已更改的实际页面的链接。我需要一个将实际页面的地址作为“链接”值的提要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:48:15.917

你不能得到 RSS，但是[MediaWiki API](https://www.mediawiki.org/wiki/API)可以返回你想要的，例如[这样](https://en.wikipedia.org/w/api.php?action=query&prop=info&inprop=url&generator=recentchanges&format=jsonfm)。

# magento - 在结帐/单页中找不到 Magento Secure Url 404 页面

> ID：11481821
> 
> 赞同：0
> 
> 时间：2012-07-14T07:15:49.653
> 
> 标签：magento, http-status-code-404

我有 magento 网站，我想设置安全 url。我已在安全 url 字段中从 admin->web 设置它，并将在前端使用安全 URL 设置为是。但是当我访问结帐/单页时，它给了我 404 Not Found。服务器找不到请求的页面。任何朋友有解决方案请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:20:21.060

确保您的 SSL 证书由 CA 签署，并且尚未过期。这可能是问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T00:57:08.920

尝试打开您的链接`index.php`，就像[这里](https://domain.com/index.php/customer/account/login/)一样。

如果有效，则重写问题。

如果您在 上`Centos`，您可能会找到`ssl.conf`，或检查`http.conf`哪个取决于您的操作系统。

在这里找到：

```
<Directory "/www/web_root">
    SSLOptions +StdEnvVars
    AllowOverride All
</Directory> 
```

确保`AllowOverride All`在里面。

然后重新启动服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T08:57:00.727

是本地主机、共享主机还是 VDS/VPS？我认为您没有在托管面板上为您的域设置 SSL。如果您使用 localhost，您应该生成证书并在您的域的虚拟主机设置中打开 SSL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-24T08:23:08.043

这也可能是您正在使用的文件夹的问题。如果您切换到 SSL，服务器将在 private_html 文件夹中查找受 SSL 保护的页面。如果您的网店位于 public_html 文件夹中，受 SSL 保护的页面将生成 404 错误。幸运的是，由于您使用了从 private_html 到 public_html 的符号链接，因此解决起来相对容易。我有使用 Direct Admin 的经验，这是通过在“使用从 private_html 到 public_html 的符号链接 - 允许 http 和 https 中的相同数据”的“域设置”下选择单选按钮来设置

# php - joomla meadowmart 更改列表产品视图

> ID：11481830
> 
> 赞同：0
> 
> 时间：2012-07-14T07:17:01.680
> 
> 标签：php, joomla, virtuemart

我正在处理的网站在[这里](http://www.jakovsistem.com/webshop/laptop-racunari)，使用 Joomla v1.5.23 和 Viruemart 1.1.9

我需要添加新的产品列表方式，以便客户可以更改视图。我不知道从哪里开始。我用谷歌搜索了很多，但对我来说仍然很困惑。

我是否必须制作新的模块、主题或模板，或者管理面板中有一些魔术按钮可以更改视图？你能给我一些教程的链接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T13:35:42.643

产品在 VM 中显示的方式是使用“flypages”（这就是您想要搜索的内容）。安装提供了一些示例（它们不是特别好），尽管它们让您了解如何修改页面的外观。您可以指定在链接中使用哪个 flypage，但我认为 VM 本身会根据产品所在的类别选择一个（一个产品也可以属于多个类别）。

# wpf - WPF MVVM 架构中的“服务登录”在哪里发生？

> ID：11481835
> 
> 赞同：0
> 
> 时间：2012-07-14T07:18:23.267
> 
> 标签：wpf, mvvm, model

我有一个 WPF 应用程序，我需要让它在启动时显示一个“登录”窗口，然后使用用户传递的凭据连接到 WCF 服务。

问题是 - 实际的“client.Open()”发生在哪里？

在 ViewModel 中还是在 Model 中？

我认为它应该发生在一个单独的类中，但应该由 ViewModel 或 Model 调用。

哪一个 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T04:03:24.973

嗨，是的，我完全误解了你的问题，对此感到抱歉。就像当用户单击 UI 上的登录按钮时，对应于该按钮的命令被触发并调用登录的 ViewModel 方法进一步调用客户端服务类（模型）方法，该方法进一步调用服务器端服务类方法，该方法进一步调用 BLL 方法进一步调用Login的Repository方法。链就像View=> VM => ClientSideService=>ServerSideService=>BLL=>Repository。但是，如果您想或可以直接从 ViewModel 调用 ServerSide 服务，您可以跳过 ClientSide 服务。“但应该由 ViewModel 或模型调用？”的答案。是他们被称为模型。我希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T07:58:29.523

嗨，如果我没有误解你的问题，你可以这样做

```
 public partial class App : Application
{
    void App_Startup(object sender, StartupEventArgs e)
    {
        // Application is running
        // Process command line args
        bool startMinimized = false;
        for (int i = 0; i != e.Args.Length; ++i)
        {
            if (e.Args[i] == "/StartMinimized")
            {
                startMinimized = true;
            }
        }

        // Create main application window, starting minimized if specified
        MainWindow mainWindow = new MainWindow();
        if (startMinimized)
        {
            mainWindow.WindowState = WindowState.Minimized;
        }
        mainWindow.Show();
    }
} 
```

并在 xaml 中绑定应用程序的 StartUp 事件

```
<Application 
```

xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" x:Class="SDKSample.App " Startup="App_Startup" />

这一切都发生在 App 类中。首先调用 Main 方法，然后创建 App 类的实例，然后调用关闭 App 的 Run 方法，此 Run 方法触发 Application_Startup 事件我希望这会有所帮助。

# php - 任何已知的 javascript/php 字典，如“word1”、“word2”？

> ID：11481837
> 
> 赞同：0
> 
> 时间：2012-07-14T07:18:37.470
> 
> 标签：php, javascript, dictionary, levenshtein-distance

就在最近，我正在查找[Levenshtein 算法](http://www.jslab.dk/articles/crude.google.like.did.you.mean.in.javascript)，搜索了一个小时后，我找不到像这样的 javascript 文件：

```
var dictionary =
    [
      'coke',
      'cokeman',
      'cokeney'
      ] 
```

有没有更快的方法来做到这一点？我还没有找到任何这样的文件，而且我听说这个功能有点慢。如果可以的话，我怎么能用 php 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T08:05:54.013

为了得到那个javascript文件，你可以运行`cat /usr/share/dict/words | sed "s/^.*$/\'&\'\,/g"`

用`/usr/share/dict/words`换行符分隔的wordfile替换。然后你所要做的就是添加`var dictionary = [`，`]`如果你喜欢的话，可以在最后加上一个分号。

# php - 从版本号中删除“.0”

> ID：11481840
> 
> 赞同：2
> 
> 时间：2012-07-14T07:19:04.330
> 
> 标签：php, string, statistics, version

我正在开发一个运行时智能软件程序。它收集程序的版本号，因此您可以查看每个版本号的统计信息。我遇到的问题是某些计算机正在发送实际版本号（即：0.4），而其他计算机正在发送错误的版本号（即：0.4.0）。我想知道如果我使用类似的东西是否可以：

```
$version = rtrim($version, ".0"); 
```

这是否可以解决这个问题，或者这只会在以后导致更多问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T07:22:14.413

这绝对会导致问题。`rtrim`如果这些字符以任何顺序出现在字符串的末尾，并且可能多次出现，则删除这些字符。所以`1.10` 会变成`1.1`但这些不一定是相同的版本。

在线查看：[ideone](http://ideone.com/2557G)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T07:27:08.363

如果有一个“实际版本”号码，你怎么称呼它，比如 5.0 ，你会怎么做？

我建议您改用正则表达式，可能是 preg_match() 函数：

```
$tokens=preg_match($version,'/^([0-9]+)\.([0-9]+)/',$tokens);
if (3=count($tokens))
     $actualVersion=sprintf('%s.%s',$tokens[1],$tokens[2]);
else $actualVersion=='?.?'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T07:35:59.237

根据*Mark Byers*的回答，您不能使用`rtrim()`.

我推荐`preg_replace()`：

```
$ver = '0.4.0';
$pattern = '/^([0-9.]+)\.0$/';
$replacement = '${1}';
echo preg_replace($pattern, $replacement, $ver); 
```

[**演示**](http://ideone.com/upmfD)

# mysql - 错误/usr/libexec/mysqld：写入文件'/var/run/mysqld/mysqld.pid'时出错（错误代码：28）

> ID：11481845
> 
> 赞同：1
> 
> 时间：2012-07-14T07:19:56.623
> 
> 标签：mysql, linux

目前我在 Linux Centos 上遇到了 mysql 的问题。它突然停止了。所以然后我尝试使用**service mysqld start**命令启动 mysql，它给出了错误 -

**尝试启动 MySQL 守护程序时发生超时错误。**

**我用tail -10 /var/log/mysqld.log**命令检查了日志，然后它显示 -

```
120714  6:48:02  InnoDB: Initializing buffer pool, size = 8.0M
120714  6:48:02  InnoDB: Completed initialization of buffer pool
120714  6:48:02  InnoDB: Started; log sequence number 0 2096665
120714  6:48:02 [ERROR] /usr/libexec/mysqld: Error writing file '/var/run/mysqld/mysqld.pid' (Errcode: 28)
120714  6:48:02 [ERROR] Can't start server: can't create PID file: No space left on device
120714 06:48:02 mysqld_safe Number of processes running now: 0
120714 06:48:02 mysqld_safe mysqld restarted
120714  6:48:03 [Note] Plugin 'ndbcluster' is disabled.
120714  6:48:03  InnoDB: Initializing buffer pool, size = 8.0M
120714  6:48:03  InnoDB: Completed initialization of b-bash-4.1 
```

我不明白为什么会这样。我是 Linux 和 mysql 的新手。请大家帮我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T07:22:18.573

键入“df -h”以查看 /var/ 挂载点上剩余多少空间，可能是 /var/ 中没有剩余空间？

# java - 选择JList中的多个数据时如何获取选择的索引号

> ID：11481846
> 
> 赞同：-1
> 
> 时间：2012-07-14T07:20:09.103
> 
> 标签：java, swing, return, jlist

```
 try{
    f = new ProjectFile();

    numProject = f.getOutput();

    String[] projectData = new String[numProject.length]; 
```

> //从另一个文件中检索数据并将标题存储到projectData

```
 for (int i = 0; i < projectData.length; i++) {
            projectData[i] = numProject[i].getProjectTitle();
        }

        listProject.setListData(projectData);
        System.out.println(listProject.getSelectedIndex());
}catch(Exception e){
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T07:21:46.717

使用[`getSelectedIndices()`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JList.html#getSelectedIndices%28%29)方法

```
public int[] getSelectedIndices()

Returns an array of all of the selected indices, in increasing order. 
```

# c# - 如何动态调用 TryParse？

> ID：11481853
> 
> 赞同：10
> 
> 时间：2012-07-14T07:21:45.107
> 
> 标签：c#, .net, type-conversion

有没有办法`TryParse`动态调用？一些：

```
public static bool TryParse<T>(string toConvert, out T result) 
```

当然可以为此使用 Typeonverters。但是，无效的转换会导致异常，我想摆脱它。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-14T07:35:41.283

`TryParse`您可以使用反射动态调用该方法。这样，如果转换失败，您将不会收到耗时的异常。

此方法是此方法的略微优化[版本](http://beaucrawford.net/post/Calling-TryParse-Dynamically.aspx)。

```
 //Try Parse using Reflection
public static bool TryConvertValue<T>(string stringValue, out T convertedValue)
{
    var targetType = typeof(T);
    if (targetType == typeof(string))
    {
        convertedValue = (T)Convert.ChangeType(stringValue, typeof(T));
        return true;
    }
        var nullableType = targetType.IsGenericType &&
                       targetType.GetGenericTypeDefinition() == typeof (Nullable<>);
    if (nullableType)
    {
        if (string.IsNullOrEmpty(stringValue))
        {
            convertedValue = default(T);
            return true;
        }
            targetType = new NullableConverter(targetType).UnderlyingType;
    }

    Type[] argTypes = { typeof(string), targetType.MakeByRefType() };
    var tryParseMethodInfo = targetType.GetMethod("TryParse", argTypes);
    if (tryParseMethodInfo == null)
    {
        convertedValue = default(T);
        return false;
    }

    object[] args = { stringValue, null };
    var successfulParse = (bool)tryParseMethodInfo.Invoke(null, args);
    if (!successfulParse)
    {
        convertedValue = default(T);
        return false;
    }

    convertedValue = (T)args[1];
    return true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T07:33:21.290

你可以这样写：

```
public delegate bool TryParser<T>(string input, out T result);

public static bool TryParse<T>
     (string toConvert, out T result, TryParser<T> tryParser = null)
{
    if (toConvert == null)
        throw new ArgumentNullException("toConvert");

    // This whole block is only if you really need
    // it to work in a truly dynamic way. You can additionally consider 
    // memoizing the default try-parser on a per-type basis.
    if (tryParser == null)
    {
        var method = typeof(T).GetMethod
                 ("TryParse", new[] { typeof(string), typeof(T).MakeByRefType() });

        if (method == null)
            throw new InvalidOperationException("Type does not have a built in try-parser.");

        tryParser = (TryParser<T>)Delegate.CreateDelegate
            (typeof(TryParser<T>), method);
    }

    return tryParser(toConvert, out result);
} 
```

然后这样称呼它：

```
int result;
bool success = TryParse("123", out result); 
```

我真的不推荐这个，除非你有一些需要它的场景。

# java - JSP - “<% ... %>” VS “<%= ... %>” 之间有什么区别

> ID：11481854
> 
> 赞同：7
> 
> 时间：2012-07-14T07:21:46.010
> 
> 标签：java, jsp, servlets, scriptlet

在使用`JSP`文件和 servlet 时，我遇到 `<% … %>`了`<%= … %>`.

两种情况有什么区别？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-14T07:23:47.153

`<%= … %>`将回显一个变量，其中 as`<% … %>`表示执行的脚本或某些代码。

以下是 jsp 文档的链接：

*   表达式（`<%= … %>`）：http: [//java.sun.com/products/jsp/tags/11/syntaxref11.fm4.html](http://java.sun.com/products/jsp/tags/11/syntaxref11.fm4.html)
*   小脚本（`<% … %>`）：http: [//java.sun.com/products/jsp/tags/11/syntaxref11.fm5.html](http://java.sun.com/products/jsp/tags/11/syntaxref11.fm5.html)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-14T19:21:37.180

```
<%= new java.util.Date() %> 
```

和

```
<% out.println(new java.util.Date()) %> 
```

Scriptlet 共有三种类型：

*   **<%= expression %> 形式的 Scriptlet 表达式**，被计算并插入到输出中
*   **<% code %> 形式的 Scriptlet**被插入到 servlet 的服务方法中
*   **<%! 形式的 Scriptlet 声明 代码 %>**插入到 servlet 类的主体中，在任何现有方法之外。例如：

    ```
    <%!

    public int sum(int a, int b) {

    return a + b;
    }

    %> 
    ```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-14T07:24:30.830

如果`<% ... %>`您要添加服务器端代码。如果`<%= ... %>`您要添加自动打印某些内容的服务器端代码。它可以被视为`<% out.print( something ) %>`.

# addthis - 删除 Addthis Counter 弹出窗口

> ID：11481861
> 
> 赞同：2
> 
> 时间：2012-07-14T07:22:31.570
> 
> 标签：addthis

我想要做的是防止计数器弹出显示点击。如果我尝试删除 onclick 事件，计数不再显示。

```
<div class="addthis_toolbox addthis_default_style ">

        <a class="addthis_button_facebook"></a>
        <a class="addthis_button_twitter"></a>
        <a class="addthis_button_compact"></a>
        <a class="addthis_counter addthis_bubble_style"></a>            
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T07:45:20.923

`#at20mc { display: none !important; }`在你的 CSS 中可能会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T17:05:08.627

这是可配置的：

```
addthis_config.ui_show_promo = false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-18T18:40:58.863

如果您使用的是默认样式按钮（右侧有计数器），您可以通过将其添加到您的 CSS 文件中来隐藏它：

```
.addthis_counter.addthis_pill_style.addthis_nonzero a.addthis_button_expanded {
    position: absolute !important;
    visibility: hidden !important;
} 
```

AddThis 代码插入带有 display: block !important; 的 CSS 所以我发现这是解决这个问题的最好方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-26T18:22:15.807

转到插件编辑器 & 只需注释掉 class="addthis_counter" 的 html 行

```
<!-- <a class="addthis_counter addthis_bubble_style"></a>--> 
```

# c# - 使用 Acrobat SDK 和 C#.net 读取 PDF 文件

> ID：11481862
> 
> 赞同：-1
> 
> 时间：2012-07-14T07:22:36.580
> 
> 标签：c#, pdf, acrobat-sdk

如何使用 Acrobat SDK 读取 pdf 文件？我不想要任何第三方工具/dll，如 iText 等。我需要通过 Acrobat SDK 阅读。我刚刚浏览了 adobe 网站，文档有点复杂，而且挖掘得很少。任何一位 Adob​​e SDK 专家都可以帮助我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:52:44.290

Acrobat SDK 带有一个基于 COM 的自动化接口。[阅读更多。](http://livedocs.adobe.com/acrobat_sdk/10/Acrobat10_HTMLHelp/IAC_API_OLE_Objects.103.2.html)

请参阅有关从 C# 调用 COM 的[SO 问题和答案。](https://stackoverflow.com/questions/469802/net2-0-c-sharp-interop-how-to-call-com-code-from-c)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-29T01:45:49.047

Adobe 的开发人员中心很有帮助。

转至： http: [//www.adobe.com/devnet/acrobat.html](http://www.adobe.com/devnet/acrobat.html)

也看看下面的链接

Acrobat XI 提示和技巧

[http://tv.adobe.com/show/acrobat-xi-tips-tricks/](http://tv.adobe.com/show/acrobat-xi-tips-tricks/)

# c# - 如何使用 GridView 中的 DropDownList 更新一列？

> ID：11481864
> 
> 赞同：0
> 
> 时间：2012-07-14T07:22:57.530
> 
> 标签：c#, asp.net, sql-server, gridview

我是一名新的 ASP.NET 开发人员，我正在努力使用 DropDownList 更新 GridView 中的列。具体来说，我有一个 GridView，我用它来添加、删除和更新/编辑员工信息。此信息是员工用户名、姓名、徽章编号、职位名称和部门快捷方式。这些部门将列在 DropDownList 中，但我仍然无法更新此列，我不知道为什么。

我有以下数据库设计：

```
Employee Table: Username, Name, JobTitle, BadgeNo, IsActive, DivisionCode
Divisions Table: SapCode, DivisionShortcut 
```

我编写了代码，在调试代码的过程中没有发现任何错误。但是，当我运行代码并从下拉列表中选择一个值时，该列没有更新，我不知道为什么。那么如何在 GridView 中更新此列？

ASP.NET 代码：

```
<asp:GridView ID="GridView1" runat="server" AllowSorting="True" 
            AutoGenerateColumns="False" DataKeyNames="Username" 
            DataSourceID="SqlDataSource1" BorderWidth="1px" BackColor="#DEBA84" 
             CellPadding="3" CellSpacing="2" BorderStyle="None" 
             BorderColor="#DEBA84" OnRowEditing="GridView1_RowEditing" 
             OnRowCancelingEdit="GridView1_RowCancelingEdit" 
             OnRowUpdating="GridView1_RowUpdating">
            <FooterStyle ForeColor="#8C4510" 
              BackColor="#F7DFB5"></FooterStyle>
            <PagerStyle ForeColor="#8C4510" 
              HorizontalAlign="Center"></PagerStyle>
            <HeaderStyle ForeColor="White" Font-Bold="True" 
              BackColor="#A55129"></HeaderStyle>
            <Columns>
                <asp:CommandField ButtonType="Image" ShowEditButton="true" ShowCancelButton="true"
                                EditImageUrl="Images/icons/edit24.png" UpdateImageUrl="Images/icons/update24.png" 
                                CancelImageUrl="Images/icons/cancel324.png" />

                <asp:TemplateField HeaderText="Division">
                    <ItemTemplate>
                        <%# Eval("DivisionShortcut")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:DropDownList ID="DivisionsList" runat="server" DataSourceID="DivisionsListDataSource"
                                          AutoPostBack="true" DataTextField="DivisionShortcut" DataValueField="SapCode"
                                          selectedValue='<%# Bind("DivisionShortcut") %>'>
                        </asp:DropDownList>
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:BoundField DataField="Username" HeaderText="Network ID" ReadOnly="True" 
                    SortExpression="Username" />

                <asp:TemplateField HeaderText="Name">
                    <ItemTemplate>
                        <%# Eval("Name")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="txtEmployeeName" runat="server" Text='<%# Bind("Name")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Job Title">
                    <ItemTemplate>
                        <%# Eval("JobTitle")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="txtJobTitle" runat="server" Text='<%# Bind("JobTitle")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Badge No.">
                    <ItemTemplate>
                        <%# Eval("BadgeNo")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="txtBadgeNo" runat="server" Text='<%# Bind("BadgeNo")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Is Active?">
                    <ItemTemplate>
                        <%# Eval("IsActive")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:CheckBox ID="isActive" runat="server" 
                                      Checked='<%# Eval("IsActive").ToString().Equals("True") %>'/>
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Delete?">
                    <ItemTemplate>
                        <span onclick="return confirm('Are you sure to Delete the record?')">
                            <asp:ImageButton ID="lnkB" runat="server" ImageUrl="Images/icons/delete24.png" CommandName="Delete" />
                        </span>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView>
        <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:UsersInfoDBConnectionString %>" 

            SelectCommand="SELECT     dbo.Divisions.DivisionShortcut,dbo.employee.DivisionCode dbo.employee.Username, dbo.employee.Name, dbo.employee.JobTitle, dbo.employee.BadgeNo, dbo.employee.IsActive
                FROM         dbo.Divisions INNER JOIN
                            dbo.employee ON dbo.Divisions.SapCode = dbo.employee.DivisionCode"
            UpdateCommand="UPDATE [employee] SET [Name] = @Name, [JobTitle] = @JobTitle, 
                                                [BadgeNo] = @BadgeNo WHERE [Username] = @Username"
            DeleteCommand="DELETE FROM [employee] WHERE [Username] = @Username">
            <UpdateParameters>
                <asp:Parameter Name="Name" Type="String"  />
                <asp:Parameter Name="JobTitle" Type="String" />
                <asp:Parameter Name="BadgeNo" Type="String" />
                <asp:Parameter Name="Username" Type="String" />
            </UpdateParameters>
            <DeleteParameters>
                <asp:Parameter Name="Username" Type="String" />
            </DeleteParameters>
        </asp:SqlDataSource> 
```

**在 GridView 之外，我有 DropDownList 的 SqlDataSource：**

```
<asp:SqlDataSource ID="DivisionsListDataSource" runat="server" 
    ConnectionString="<%$ ConnectionStrings:UsersInfoDBConnectionString %>" 
    SelectCommand="SELECT * FROM Divisions"
    InsertCommand="INSERT INTO [Divisions] ([SapCode], [DivisionShortcut]) VALUES (@SapCode, @DivisionShortcut)"
    UpdateCommand="UPDATE [Divisions] SET [DivisionShortcut] = @DivisionShortcut WHERE [SapCode] = @SapCode">
    <DeleteParameters>
        <asp:Parameter Name="SapCode" Type="Double" />
    </DeleteParameters>
    <InsertParameters>
        <asp:Parameter Name="SapCode" Type="Double" />
        <asp:Parameter Name="DivisionShortcut" Type="String" />
    </InsertParameters>
    <UpdateParameters>
        <asp:Parameter Name="DivisionShortcut" Type="String" />
        <asp:Parameter Name="SapCode" Type="Double" />
    </UpdateParameters>
</asp:SqlDataSource> 
```

代码隐藏：

```
//For editing any row in the GridView
    protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e) 
    {
        GridView1.EditIndex = e.NewEditIndex;
    }

    //For canceling any editng in any row in the GridView
    protected void GridView1_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
    {
        e.Cancel = true;
        GridView1.EditIndex = -1;
    }

    //For updating the information in any row in the GridView
    protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        GridViewRow gvrow = GridView1.Rows[e.RowIndex];

        DropDownList DivisionsList = (DropDownList)gvrow.FindControl("DivisionsList"); 

        TextBox txtEmployeeName = (TextBox)gvrow.FindControl("txtEmployeeName");
        TextBox txtJobTitle = (TextBox)gvrow.FindControl("txtJobTitle");
        TextBox txtBadgeNo = (TextBox)gvrow.FindControl("txtBadgeNo");

        CheckBox isActive = (CheckBox)gvrow.FindControl("isActive");

        //For getting the ID (primary key) of that row
        string username = GridView1.DataKeys[e.RowIndex].Value.ToString();

        string name = txtEmployeeName.Text;
        string jobTitle = txtJobTitle.Text;
        string badgeNo = txtBadgeNo.Text;
        string division = DivisionsList.Text;
        //string divisioncode = DivisionsList.SelectedValue;

        UpdateEmployeeInfo(username, name, jobTitle, badgeNo, division);
    }

    private void UpdateEmployeeInfo(string username, string name, string jobTitle, string badgeNo, string division)
    {
        string connString = ConfigurationManager.ConnectionStrings["UsersInfoDBConnectionString"].ConnectionString;
        SqlConnection conn = new SqlConnection(connString);
        string update = @"UPDATE Employee SET Name = @Name, JobTitle = @JobTitle, 
                            BadgeNo = @BadgeNo WHERE Username = @Username";

        SqlCommand cmd = new SqlCommand(update, conn);

        cmd.Parameters.AddWithValue("@Name", name);
        cmd.Parameters.AddWithValue("@JobTitle", jobTitle);
        cmd.Parameters.AddWithValue("@BadgeNo", badgeNo);
        cmd.Parameters.AddWithValue("@division", division);
        //cmd.Parameters.AddWithValue("@SapCode", divisioncode);
        cmd.Parameters.AddWithValue("@Username", username);
        //cmd.Parameters.AddWithValue("@IsActive", isActive.checked);

        try
        {
            conn.Open();
            cmd.ExecuteNonQuery();
            conn.Close();

            GridView1.EditIndex = -1;
        }
        catch (Exception ex)
        {
            throw ex;
        }
        finally
        {
            cmd.Dispose();
            conn.Close();
            conn.Dispose();
        }
        GridView1.DataBind();
    }

    //For deleting a row in the GridView
    protected void DeleteRecord(object sender, GridViewDeleteEventArgs e) 
    {
        string networkID = GridView1.DataKeys[e.RowIndex].Value.ToString();

        string connString = ConfigurationManager.ConnectionStrings["UsersInfoDBConnectionString"].ConnectionString;
        SqlConnection conn = new SqlConnection(connString);
        string deleteCommand = "DELETE employee where dbo.employee.Username = " + networkID;
        SqlCommand cmd = new SqlCommand(deleteCommand, conn);
        cmd.Parameters.AddWithValue("@username", networkID);
        try
        {
            conn.Open();
            cmd.ExecuteNonQuery();
            conn.Close();
        }
        catch (SqlException se)
        {
            throw se;
        }
        finally
        {
            cmd.Dispose();
            conn.Close();
            conn.Dispose();
        }
        GridView1.DataBind();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T08:03:49.323

`string division = DivisionsList.Text;`这是错误的，您必须传递 SapCode，因为 SapCode 是 Divison 表中的主键，它是Employees 表中的外键，因此您必须更新 Employee 表中的 SapCode。希望它会奏效。

```
protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    string division = DivisionsList.Value; // Hope that it will work
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-03T05:53:38.650

```
 protected void ddlGrdDtype_SelectedIndexChanged(object sender, EventArgs e)
    {
        DropDownList btn = (DropDownList)sender;
        GridViewRow row = (GridViewRow)btn.Parent.Parent;
        int i = row.RowIndex;

        Label lbl_LAId = (Label)grdAttendance.Rows[i].FindControl("lblLAId");
        Label lbl_AttendanceDate = (Label)grdAttendance.Rows[i].FindControl("lblAttendanceDate");
        lblAttandanceDate.Value = lbl_AttendanceDate.Text;
        Label lbl_WorkHrs = (Label)grdAttendance.Rows[i].FindControl("lblWorkHrs");
        Label lbl_Duties = (Label)grdAttendance.Rows[i].FindControl("lblDuties");
        DropDownList ddlGrdDtype = (DropDownList)grdAttendance.Rows[i].FindControl("ddlGrdDtype");
        lblLAId.Value = lbl_LAId.Text;

        UpdateDutyTypeOnSelection(lbl_LAId.Text, lbl_WorkHrs.Text, lbl_Duties.Text, ddlGrdDtype.SelectedItem.Text);
    } 
```

# objective-c - 自定义按钮标题标签的文本在点击时将自身设置回默认值

> ID：11481867
> 
> 赞同：0
> 
> 时间：2012-07-14T07:24:03.690
> 
> 标签：objective-c, ios, interface-builder, custom-controls

我的自定义按钮包含一个在滑动时更新的值。但是当我点击它时，它不会保留该值，而是设置回在 Interface Builder 中设置的默认值，或者通过`[button00 setText:@"default value" forState:UIControlStateNormal]`.

知道如何保持最新的更新值吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T07:51:15.443

不要修改标签文字；呼吁任何更新`setText:forState:`。`UIButton`

# arrays - 二维二进制矩阵中 1 的最大矩形

> ID：11481868
> 
> 赞同：16
> 
> 时间：2012-07-14T07:24:06.530
> 
> 标签：arrays, algorithm

在0-1矩阵中求1的最大面积是有问题的。在这个问题中，有两种情况：

1.  待测面积为正方形。DP很简单。

2.  待测面积为长方形。我无法为此想出最佳解决方案。

例子：

```
010101
101001
111101
110101 
```

最大的矩形面积为 4（第 3 行，第 5 列，第 3、4 行还有一个）。我们也可以得到所有这些矩形吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-14T09:49:28.350

我将逐步介绍一些增加难度/降低运行时复杂性的解决方案。

首先，蛮力解决方案。生成每个可能的矩形。您可以通过迭代每对点 (r1,c1) (r2,c2) 来做到这一点，其中 r1 ≤ r2 和 c1 ≤ c2 （可以用 4 个 for 循环完成）。如果矩形不包含 0，则将该区域与目前找到的最大区域进行比较。这是一个 O(R^3C^3)。

我们可以将有效矩形检查加速到 O(1)。我们通过执行 DP 来做到这一点，其中 dp(r, c) 存储矩形 ((1, 1), (r, c)) 中 0 的数量。

*   dp(r, 0) = 0
*   dp(0, c) = 0
*   dp(r,c) = dp(r−1,c)+dp(r,c−1)−dp(r−1,c−1)+(matrix[r][c]?0:1)

那么 ((r1, c1), (r2, c2)) 中 0 的个数为

*   nzeroes(r1,c1,r2,c2) = dp[r2][c2]−dp[r1 −1][c2]−dp[r2][c1 −1]+dp[r1 −1][c1 −1]

然后，您可以通过 nzeroes(r1,c1,r2,c2) == 0 检查矩形是否有效。

有一个使用简单 DP 和堆栈的 O(R^2C) 解决方案。DP 每列工作，通过查找一个单元格上方的 1 个单元格的数量直到下一个 0。dp 如下：

*   dp(r, 0) = 0
*   dp(r, c) = 0 如果矩阵[r][c] == 0
*   dp(r, c) = dp(r-1, c) + 1 否则

然后执行以下操作：

```
area = 0
for each row r:
  stack = {}
  stack.push((height=0, column=0))
  for each column c:
    height = dp(r, c)
    c1 = c
    while stack.top.height > height:
      c1 = stack.top.column
      stack.pop()
    if stack.top.height != height:
      stack.push((height=height, column=c1))
    for item in stack:
      a = (c - item.column + 1) * item.height
      area = max(area, a) 
```

也可以使用三个 DP 解决 O(RC) 中的问题：

*   h(r, c)：如果我们从 (r, c) 开始向上走，我们在第一个 0 之前找到多少个 1 单元格？
*   l(r, c)：我们可以将一个右下角为 (r, c) 且高度为 h(r, c) 的矩形向左延伸多远？
*   r(r,c)：我们可以将左下角位于 (r, c) 且高度为 h(r, c) 的矩形向右延伸多远？

三个递归关系是：

*   h(0, c) = 0
*   h(r, c) = 0 如果矩阵[r][c] == 0
*   h(r, c) = h(r-1, c)+1 否则

*   l(r, 0) = 0

*   l(r, c) = cp 如果矩阵[r-1][c] == 0
*   l(r, c) = min(l(r - 1, c), c - p) 否则

*   r(r,C+1) = 0

*   r(r,c) = pc 如果矩阵[r-1][c] == 0
*   r(r,c) = min(r(r - 1, c), p - c) 否则

其中 p 是前一个 0 的列，因为我们从左右填充 l，从左右填充 r。

那么答案是：

*   max_r,c(h(r, c) ∗ (l(r, c) + r(r, c) − 1))

这是因为观察到最大的矩形总是在所有四个边上都接触到 0（考虑到边缘被 0 覆盖）。通过考虑至少顶部、左侧和右侧接触 0 的所有矩形，我们覆盖了所有候选矩形。生成每个可能的矩形。您可以通过迭代每对点 (r1,c1) (r2,c2) 来做到这一点，其中 r1 ≤ r2 和 c1 ≤ c2 （可以用 4 个 for 循环完成）。如果矩形不包含 0，则将该区域与目前找到的最大区域进行比较。

注意：我根据我在[这里](https://olympiad.cs.uct.ac.za/old/camp1_2009/day2_camp1_2009_solutions.pdf)写的答案改编了上述内容 - 请参阅“本的妈妈”部分。在那篇文章中，0 是树。那篇文章也有更好的格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T08:35:22.847

我会尝试以下方法：

(1) 将矩阵分解为连通分量（通过 BFS）。

(2) 对于每个连通分量，寻找最大矩形。

要执行 (2)，我将首先查找垂直矩形：查找每个连续 (min_y, max_y) 的最大可能宽度，因此只需查看 min/连接组件的该行中最多为 1）。然后我会转置矩阵，并重复这个过程。

BFS 的总运行时间为 O(MxN)，然后每个连接的组件为 O(width^2 + height^2)，总共为 O(MXN + M^2 + N^2)。

我想知道什么是渐近最优解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-13T07:27:47.080

该问题可以简化为多次在直方图中找到最大矩形区域。

在每一行之后，您计算在该行之前构建的直方图，并计算该直方图中的最大面积矩形。

```
int maximalRectangle(vector<vector<char> > &mat) {
    int rows=mat.size();
    if(rows==0)return 0;
    int columns = mat[0].size();

    int temp[columns];
    for(int i=0;i<columns;i++){
        temp[i] = mat[0][i]-'0';
    }

    int maxArea=0;
    maxArea = max(maxArea,maxUtil(temp,columns));
    // cout<<"before loop\n";
    // print1d(temp,columns);
    for(int i=1;i<rows;i++){
        for(int j=0;j<columns;j++){
            temp[j] = (mat[i][j]-'0')?temp[j]+1:0;
        }
        // cout<<"after iteration : "<<i<<endl;
        // print1d(temp,columns);
        maxArea = max(maxArea,maxUtil(temp,columns));
        // cout<<"maxarea = "<<maxArea<<endl;
    }
    return maxArea;
} 
```

temp 是每个步骤中的直方图，maxutil 计算该直方图中的最大矩形面积。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-22T09:34:19.863

使用这种动态规划方法

*   该问题可以简化为多次在直方图中找到最大矩形区域。
*   在每一行之后，您计算在该行之前构建的直方图，并计算该直方图中的最大面积矩形。

**

```
import java.util.Scanner;

public class LargestRectInAmatrix {
    static int row, col, matrix[][];
    static int maxArea = 0;
    static int barMatrix[];
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        row = sc.nextInt();
        col = sc.nextInt();
        matrix = new int[row][col];
        barMatrix = new int[col];
        for(int i = 0; i < row ; i++) {
            for(int j = 0 ; j < col ; j++) {
                matrix[i][j] = sc.nextInt();
            }
        }
        startSolution();
        System.out.println(maxArea);
    }
    private static void startSolution() {
        for(int i = 0 ; i < row ; i++) {
            for(int j = 0 ; j < col ; j++) {
            if(matrix[i][j] == 0) {
                barMatrix[j] = 0;
            }
            else
                barMatrix[j]=barMatrix[j]+matrix[i][j];
            }
            int area = calculateArea(0, col-1);
            if(area > maxArea) {
                maxArea = area;
            }
        }

    }
    private static int calculateArea(int l,int h)
    {
        if(l > h) {
            return Integer.MIN_VALUE;
        }
        if(l == h) {
            return barMatrix[l];
        }
        int u = calMinimumIndex(l,h);
        return (max(calculateArea(l, u-1), calculateArea(u+1, h), barMatrix[u] * (h - l + 1)));
    }
    private static int max(int a, int b, int c) {
        if(a > b) {
            if(a > c) {
                return a;
            }
            else
                return c;
        }
        else
            if(b > c) {
                return b;
            }
            else
                return c;
    }
    private static int calMinimumIndex(int l, int h) {
        int min=Integer.MAX_VALUE;
        int min_index = 0;
        for(int i = l ; l <= h ; i++) {
            if(barMatrix[i] < min){
                min = barMatrix[i];
                min_index = i;
            }
        }
        return min_index;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-23T14:41:43.243

另一种更简单的方法是使用两个临时 M x N 数组来计算矩形的长度（行和列） - 即连续 1 的计数。遍历两个临时矩阵以找到最大重复长度（行和列）。

这是相同的代码。

```
int GetMaxRectangularArea(vector<vector<int>> & matrix, int nRows, int nCols)
{
    vector<vector<int>>  rowLengths(nRows, vector<int>(nCols));
    vector<vector<int>>  colLengths(nRows, vector<int>(nCols));

    // initialize first column of rowLengths with first column of matrix
    for (int i = 0; i < nRows; i++) {
        rowLengths[i][0] = matrix[i][0];
    }

    // initialize first row of colLengths with first row of matrix
    for (int j = 0; j < nCols; j++) {
        colLengths[0][j] = matrix[0][j];
    }

    // Compute row wise length of consecutive 1's in rowLengths
    for (int i = 0; i < nRows; i++) {
        for (int j = 1; j < nCols; j++) {
            if (matrix[i][j] == 1) {
                rowLengths[i][j] = 1 + rowLengths[i][j - 1];
            }
            else {
                rowLengths[i][j] = 0;
            }
        }
    }

    // Compute column wise length of consecutive 1's in colLengths
    for (int j = 0; j < nCols; j++) {
        for (int i = 1; i < nRows; i++) {
            if (matrix[i][j] == 1) {
                colLengths[i][j] = 1 + colLengths[i- 1][j];
            }
            else {
                colLengths[i][j] = 0;
            }
        }
    }

    // Now traverse the rowLengths array to find max length sub array
    int maxArea = 0;

    for (int j = nCols - 1; j >= 0; j--) {
        int currentArea = 0;
        int currentMax = -1;
        int repeats = 1;

        for (int i = nRows - 1; i >= 0; i--) {
            if (rowLengths[i][j] != currentMax) {
                if (currentMax != -1) {
                    currentArea = currentMax * repeats;

                    if (currentArea > maxArea) {
                        maxArea = currentArea;
                    }
                }

                currentMax = rowLengths[i][j];
                repeats = 1;
            }
            else {
                repeats++;
            }
        }

        currentArea = currentMax * repeats;

        if (currentArea > maxArea) {
            maxArea = currentArea;
        }
    }

    for (int i = nRows - 1; i >= 0; i--) {
        int currentArea = 0;
        int currentMax = -1;
        int repeats = 1;

        for (int j = nCols - 1; j >= 0; j--) {
            if (colLengths[i][j] != currentMax) {
                if (currentMax != -1) {
                    currentArea = currentMax * repeats;

                    if (currentArea > maxArea) {
                        maxArea = currentArea;
                    }
                }

                currentMax = colLengths[i][j];
                repeats = 1;
            }
            else {
                repeats++;
            }
        }

        currentArea = currentMax * repeats;

        if (currentArea > maxArea) {
            maxArea = currentArea;
        }
    }

    return maxArea;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-27T05:26:09.853

```
class GfG{
    public int maxArea(int a[][],int m,int n){
        if(a==null || m==0 || n== 0) return 0;
        m = a.length;
        n = a[0].length;
        int dp[] = new int[n+1];
        int height[] = new int[n];
        int p = 0;
        dp[p] = -1;
        int ans = 0;
        //System.out.println("1 ");
        for(int i = 0;i<m;i++){
            for(int j = 0;j<n;j++){
                if(a[i][j]==1){
                    height[j] += a[i][j];
                }
                else{
                    height[j] = 0;
                }
            }
            p= 0;
            //System.out.println("2 ");
           for(int j = 0;j<n;j++){
              while(p>0 && height[j] < height[dp[p]]){
                  int start =  dp[p-1];
                  ans = Math.max(ans,(j-start-1)*height[dp[p]]);
                  p--;
                  //System.out.println("1 ");
              } 
              dp[++p] = j;
           }
        }
        return ans;
    }
} 
```

# android - E/Trace(640)：打开跟踪文件时出错：没有这样的文件或目录 (2)

> ID：11481873
> 
> 赞同：5
> 
> 时间：2012-07-14T07:25:13.707
> 
> 标签：android

我安装了 Android SDK、JDK、Eclipse。我的项目名称是 Bible，我在 eclipse Bible 中构建。在模拟器中，此错误显示*“不幸的是，圣经已停止”*，而在 Logcat 中，此错误消息显示

```
E/Trace(640): error opening trace file: No such file or directory (2)
shuttind down VM 
```

我该如何解决这个问题？

**更新**：几分钟后，在 Logcat 中添加了此消息

```
com.example.bible Process Sending signal. PID: 623 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:00:02.153

在我的情况下，我想使用“GridView”，我必须启用“GPU 仿真”。这解决了问题。从“AVD Manager”中选择您想要启用“GPU 仿真”的 AVD。然后点击“编辑”。最后在“硬件”部分“新建”，然后从“属性”中选择“GPU 仿真”，单击“确定”。请注意从“GPU 仿真”下的值中选择“是”，然后按键盘的返回。最后“编辑 AVD”。

希望这会有所帮助，因为这个问题浪费了我的一些时间。

# c++ - 为在 OpenGL 中使用基本物理和渲染寻找一个好的形状类设计

> ID：11481876
> 
> 赞同：1
> 
> 时间：2012-07-14T07:26:01.623
> 
> 标签：c++, opengl, rendering, physics, shape

目前，我一直在研究一些OpenGL，我希望尽可能多地学习。现在我正在写一个形状类，我希望可以在我选择承担的其他项目中使用和派生它。然而，我已经意识到有一些我需要考虑的因素。其中之一是质量、体积和密度的集合——更重要的是它们如何应用于几何图元本身。

任何轴向对齐的球体或边界框都可能派生自此类，*以及*实际渲染到屏幕上的图元 - 2D 和 3D 类似。我希望看看是否有人可以给我一些关于如何编写一个好的 Shape 类而不需要“放弃答案”的指示。我需要某种方向。

我身边的两个主要资源是 Nicol Bolas（我想他的名字就是这样拼写的）[Learning Modern Graphics Programming](http://www.arcsynthesis.org/gltut/index.html)和[3D Math Primer for Graphics and Game Development](https://rads.stackoverflow.com/amzn/click/com/1556229119)一书。就渲染等方面的基础和高级概念而言，这些应该足够了。

不过，我目前正在寻找的是关于如何构建这个类的*指南。*我现在要做的最后一件事就是遵循教程，这些教程涉及从静态值在屏幕上绘制三角形，因为我只是那种学得不太好的人之一；我通过实施自己的方法并同时依赖其他信息来源来学习。

到目前为止，这就是我所拥有的（**注意**- 除了 ctor 和内联之外，这些方法都还没有实现）：

```
class Shape
    {
    public:
        Shape(float radius, glm::vec4 center_pos);
        virtual ~Shape(void) { }

        virtual void draw(void) = 0;
        void collide(Shape& s);
    public:
        inline void setRadius(float radius)
        {
            mRadius = radius;
            redetermineStructure();
        }

    public:
        glm::vec4 CenterPosition;
    protected:
        float mass(void);
        void redetermineStructure(void); //used to recalculate the dimensions and attributes of the primitive after a new value such as radius or position has been set.
    protected:
        float mRadius, mVolume, mDensity;
        glm::vec4 mLastPosition;
        int mHP;
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:41:20.853

除非你已经知道你需要什么（前期设计/原型设计），否则很难给出具体的答案。

如果你边做边学，那么我建议一个好的方法是编写一些简单的实现来利用你的形状类：

*   两个粒子之间的一维碰撞
*   粒子与平面之间的一维碰撞
*   钟摆
*   1 个形状和 1 个平面之间的 2D 碰撞（边界检查）
*   2 个形状/多个形状之间的 2D 碰撞（边界检查、动量传递）
*   与上述的 3D 碰撞

...这应该相当快地公开您的形状类将需要的各种成员函数和内部存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T17:09:44.723

我认为你在一节课上做得太多了。模块化对于处理复杂的系统非常有帮助。例如，我使用过的所有物理引擎（[bullet](http://bulletphysics.org/wordpress/)、[ode](http://www.ode.org/)和[box2d](http://box2d.org/)）都有用于物理体和碰撞几何的单独对象。

身体对象包含它的位置、方向、速度和质量信息。质量通常也是一个单独的对象，用于管理质量和转动惯量。然后身体用于确定系统中的力的加速度并及时整合系统。几何对象然后包含对象的形状作为网格或一些其他描述。它用于确定接触点。

如果您要绘制这些对象，我也会使用一个单独的模块来执行此操作。您可以将所有绘图信息和代码放在形状对象中，但事物的物理方面不需要了解对象纹理或照明信息。此外，您可能希望绘制与其物理表示不同的对象，这将使执行此操作更容易。

为什么你想要这种模块化的其他一些例子是

*   可以与其他物理对象碰撞但不受它们影响的静态对象，那么您可以使用没有相应身体对象的形状对象
*   如果您想更改某物的形状，只需切换它的几何成员比尝试将其信息复制到另一个对象要容易得多。
*   您最终可能会想要绘制根本不是物理的东西，因此有一个单独的绘图模块会很有帮助
*   如果您决定在某个时候切换渲染系统或使用 3rd 方物理引擎，那么如果您的所有代码都耦合在一个类中，那么这将比尽可能模块化的情况困难得多。

# android - xml 中的一些变量有一个“点”

> ID：11481879
> 
> 赞同：1
> 
> 时间：2012-07-14T07:26:32.450
> 
> 标签：android, xml, reference

我现在正在研究一个开源的 android 移动浏览器，请注意 xml 中的一些变量有一个“点”来定义一个长名称变量。如：

```
TextView android:id="@+id/BookmarksListActivity.EmptyTextView" 
```

我注意到参考`*.java is *BookmarksListActivity_EmptyTextView*`

使用这样的变量是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T07:30:17.603

我刚刚在我的项目中尝试了同样的方法并且它有效。我不知道为什么需要它，但它有效。

# node.js - 如何在 node.js 中查看函数体？

> ID：11481880
> 
> 赞同：17
> 
> 时间：2012-07-14T07:26:32.857
> 
> 标签：node.js

当我尝试显示功能时，我只会得到 [Function] ：

```
> var a = function(){ return 'toto'; }
undefined
> a
[Function]
> require('util').inspect(a)
'[Function]' 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-14T07:29:56.987

使用`toString`：

```
> var a = function(){ return 'toto'; }
undefined
> a.toString()
'function (){ return \'toto\'; }' 
```

# javascript - 时间选择器（开源）

> ID：11481885
> 
> 赞同：1
> 
> 时间：2012-07-14T07:27:13.143
> 
> 标签：javascript, jquery, html

[我正在尝试使用 jQuery 库（ ptTimeSelect](http://pttimeselect.sourceforge.net/example/index.html)）的开源时间选择器。我已将代码放在我的 php 文件的标题中，但是一旦我单击该字段以显示时间，它就不会出现。

要调用的标题：

```
<script src="js/jquery-1.7.2.min.js"></script>
<script src="js/jquery.ptTimeSelect.js"></script>
<link href="css/jquery.ptTimeSelect.css" rel="stylesheet" type="text/css">

$('#Time').ptTimeSelect({
popupImage: 'Select Time'
}); 
```

更新的正文代码：

```
<input name="Time" id="Time" class="jquery.ptTimeSelect"/> 
```

它确实显示了现在的时间。但模式是扭曲的。

或者任何人都可以建议是否有任何好的开源仅用于时间选择器。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T07:33:19.903

您不需要 onclick 事件，只需像这样使用它：

JS：

```
$(document).ready(function(){
  $('#time').ptTimeSelect({
    popupImage: 'Select Time'
  });
}); 
```

HTML：

```
<input name="Time" id="time" /> 
```

虽然没有使用插件，但希望我能有所帮助。

# c# - 当asp.net中发生页面刷新时，如何避免触发按钮单击事件？

> ID：11481891
> 
> 赞同：1
> 
> 时间：2012-07-14T07:28:22.037
> 
> 标签：c#, asp.net

> **可能重复：**
> [为什么在 ASP.NET 中刷新页面时会执行按钮单击事件？](https://stackoverflow.com/questions/2379720/why-in-asp-net-is-a-button-click-event-executes-when-page-is-refreshed)

我希望代码避免在页面刷新发生时触发按钮单击事件，我不能给出 response.redirect，因为在按钮单击事件发生后我有一些标签要显示。我有没有机会从 .cs 中的代码中找出页面是页面刷新的天气？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T07:56:35.123

您可以重定向到同一页面，通过查询字符串传递一些参数，表明操作已成功（或不成功），然后在标签中显示相应的消息。

我不建议使用会话状态方法，因为如果用户在同一页面上有多个选项卡，这可能会出现问题。

还要记住，如果您重新加载页面，这将是一个新请求，因此 Page.IsPostack 是无用的，因为它总是错误的。

# excel - 在excel vba中构造一个矩阵

> ID：11481892
> 
> 赞同：3
> 
> 时间：2012-07-14T07:28:36.520
> 
> 标签：excel, matrix, vba

我需要帮助构建 anxn 矩阵，其中 n 等于 t = 0, ..., 10 在时间 t 的剩余股票数量。最初，我总共有 10 只股票，我将随着时间的推移将它们一一丢弃过去。

矩阵的每个元素将等于 sigma(i) x sigma (j) x rho ，其中 sigma(i)=sigma(j) = 0.25 和 rho=0.2

我想做的最后一件事是将该矩阵乘以该矩阵的转置

我真的很困惑从哪里以及如何开始，非常感谢您的帮助

```
Sub Matrix() 
'Sigmai 'Sigmaj 'Rho 
    Dim Sigmai, Sigmaj, Rho As Single 
    Sigmai = Range("b12").Value 
    Sigmaj = Range("b13").Value 
    Rho = Range("b14").Value 
    Dim matrixelement(10, 10) As Single 
    For n = 1 To 10 
        For m = 1 To 10 
            matrixelement(n, m) = Sigmai * Sigmaj * Rho 
            Cells(n, m) = matrixelement(n, m) 
        Next m 
    Next n 
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T07:16:44.197

您的代码存在许多基本问题，您应该在继续之前解决这些问题。请参阅下面代码中的注释：

```
Sub Matrix()
    ' declare ALL your variables
    Dim n As Long, m As Long
    Dim ws As Worksheet

    ' specify type for all variables, otherwise they will be Variant
    Dim Sigmai As Single, Sigmaj As Single, Rho As Single

    ' Explicitly reference the required sheet
    Set ws = Sheet1 ' or ActiveSheet or whatever

    ' qualify range references with worksheet
    Sigmai = ws.Range("b12").Value
    Sigmaj = ws.Range("b13").Value
    Rho = ws.Range("b14").Value

    ' Specify required lower bound. Default base is 0
    Dim matrixelement(1 To 10, 1 To 10) As Single
    For n = 1 To 10
        For m = 1 To 10
            matrixelement(n, m) = Sigmai * Sigmaj * Rho
        Next m
    Next n

    ' return result to sheet in one go
    ws.Range("A1:J10") = matrixelement

End Sub 
```

为了

> > 我想做的最后一件事是将该矩阵乘以该矩阵的转置

部分，我不确定你到底在追求什么，但`MMULT`可能有用，例如

```
ws.Range("L1:U10") = Application.WorksheetFunction.MMult(matrixelement, matrixelement) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T20:43:15.493

您可以直接传递数组并将结果直接放到工作表中。一个工作表，如果实际上只是一个大的二维数组。

蚕食 Chris Neilsen 的代码：

```
Sub Matrix()
' declare ALL your variables
Dim n As Long, m As Long
Dim ws As Excel.Worksheet

' specify type for all variables, otherwise they will be Variant
Dim Sigmai As Single, Sigmaj As Single, Rho As Single

' Explicitly reference the required sheet
Set ws = Sheet1 ' or ActiveSheet or whatever

' qualify range references with worksheet
Sigmai = ws.Range("b12").Value
Sigmaj = ws.Range("b13").Value
Rho = ws.Range("b14").Value

For n = 1 To 10
    For m = 1 To 10
        ws.cells(n,m).value = Sigmai * Sigmaj * Rho
    Next m
Next n

End Sub 
```

有几件事我不明白：

*   如果 b12/b13/b14 都是常数，那么矩阵中的每个数字肯定都是相同的？！
*   如果每个数字都相同，那么乘以转置矩阵只会得到矩阵每个单元格中每个数字的平方？！

# android - android中的表格布局排列

> ID：11481895
> 
> 赞同：0
> 
> 时间：2012-07-14T07:29:25.257
> 
> 标签：android, android-layout

如何安排如下图所示的控件。

![在此处输入图像描述](../Images/ea8d543c57a9d14bf8f44d678e436c8d.png)

我已经尝试过使用下面的 xml 代码，

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/tableLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<TableRow
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="5dip" >

    <TextView
        android:id="@+id/textView1"
        android:text="Device Status"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <ToggleButton
        android:id="@+id/toggleButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:layout_column="2"
        android:textOff="Device Off"
        android:textOn="Device On" />       
</TableRow>

<TableRow
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="5dip" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_column="2"
        android:text="Save"
        android:onClick="onSaveButtonClick"
         />
</TableRow>    
  </TableLayout> 
```

但我得到了这样的结果（我需要设备状态和开/关之间的一些差距）

![在此处输入图像描述](../Images/47077d8c7845a09410370c74d700e2f1.png)

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T07:45:04.703

试试这个

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tableLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TableRow android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="5dip">
        <TextView android:id="@+id/textView1"
            android:layout_width="0dp"
            android:layout_weight="1"
            android:text="Device Status"
            android:textAppearance="?android:attr/textAppearanceLarge"/>
        <ToggleButton android:id="@+id/toggleButton1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:layout_column="2"
            android:textOff="Device Off"
            android:textOn="Device On"/>       
    </TableRow>
    <TableRow android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="5dip" 
        android:gravity="right">
        <Button android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_column="2"
            android:text="Save"
            android:onClick="onSaveButtonClick"/>
    </TableRow>    
</TableLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T07:53:19.337

用这个替换你的布局。

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/tableLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<TableRow
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="5dip" android:gravity="right" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:text="Device Status"
        android:layout_weight="1"
        android:textAppearance="?android:attr/textAppearanceLarge"  />

    <ToggleButton
        android:id="@+id/toggleButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:layout_column="2"
        android:textOff="Device Off"
        android:textOn="Device On" />       
</TableRow>

<TableRow
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="right"
    android:padding="5dip" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_column="2"
        android:text="Save"
        android:onClick="onSaveButtonClick"
         />
</TableRow>    
  </TableLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T08:09:12.337

试试这个：

将 android:layout_width="wrap_content" 更改为 android:layout_width="0dp" 并使切换按钮重力向右。

# mysql - SQL：不是特定年份

> ID：11481898
> 
> 赞同：0
> 
> 时间：2012-07-14T07:29:42.713
> 
> 标签：mysql, sql

例如，如果我有这样的表

```
----------------------
| id     | year      |
----------------------
| 1      | 01-JAN-95 |
| 2      | 01-JAN-96 |
| 3      | 01-JAN-97 |
| 4      | 02-JAN-97 |
| 5      | 03-JAN-97 |
---------------------- 
```

...我想选择不是 1997 年的所有内容，我该怎么做？

我知道我可以做到：

```
SELECT * FROM table WHERE year not like '%97'; 
```

但是有没有更有效的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T07:32:09.190

如果你的桌子很大，你可能想试试这个：

```
SELECT * FROM yourtable
WHERE datecol < '1997-01-01'
OR datecol >= '1998-01-01'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T07:31:03.873

`SELECT * FROM table WHERE YEAR(year) <> '1997'`

// 固定逻辑

# javascript - HTML 中的字符串何时需要转义？

> ID：11481901
> 
> 赞同：0
> 
> 时间：2012-07-14T07:30:23.993
> 
> 标签：javascript, jquery, html, dom, tags

在 HTML 中的几乎每个标签中，都必须对`<`(start tag) 和`&`(character escape) 等字符进行转义。

但是，在`<script>`标签内部，这似乎并不适用！例如，我可以在 HTML 中明确定义字符并使用 jQuery 检索它们`var my_unescaped_text = $('script[type="text/mytexttype"]');`

有没有其他标签可以做到这一点？有没有什么方法可以让我在不使用 javascript 的情况下让这种事情在`<pre>`标签中变得可见？（是的，我知道，这听起来绝对是一项艰巨的任务......）

`<input>`或者`<textarea>`标签呢？绝对可以将这些字符写在文本输入字段中，这**是**可见且可样式化的（这满足了我可能不清楚的目标）。还有别的事吗？我试图显示的文本（前 javascript 处理）是 Markdown 并且 a`<pre>`可能最适合它，尽管 a`<textarea readonly="readOnly">`可能看起来与`<pre>`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T07:33:05.080

将任意文本嵌入 HTML 时必须始终转义。

但是，[特殊规则](http://dev.w3.org/html5/spec/the-script-element.html#restrictions-for-contents-of-script-elements)适用于`<script>`标签的内容，它们允许`<` *在某些条件下*未转义，即它不是 a 的一部分`</script>`。`"<"`因此，在 JavaScript 中正确的编码是`"\u003c"`.

出于[安全原因](https://dvcs.w3.org/hg/content-security-policy/raw-file/tip/csp-specification.dev.html)，您首先不应该使用内联 JavaScript。相反，使用[`data-`属性](http://dev.w3.org/html5/spec/global-attributes.html#embedding-custom-non-visible-data-with-the-data-attributes)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T08:26:01.433

转义规则取决于 HTML 版本：XHTML 有自己的规则。决定您将使用哪个版本的 HTML，并从优秀的教程和参考资料中学习其规则。

关于详细问题：

1.  `script`与本期类似的另一个元素是`style`. 还有一个非标准但得到良好支持的`xmp`元素，可用于将 HTML 标记原样呈现为内容。
2.  不，您不能更改规则，以便例外（当它们适用时）适用`pre`于例如。
3.  `input`和元素在这`textarea`方面并不特殊。您可能被类似的测试误导了`<input value="a<b">`，它是有效的（XHTML 除外），因为`<`不需要在属性值中进行转义。或者通过类似 的测试`<input value="&">`，这是允许的（XHTML 除外），因为`&`后面没有名称字符。

要显示标记（包括 Markdown），推荐的方法是像往常一样转义每次出现的内容`<`和内容。`&`您可以出于其他原因（例如格式或逻辑）使用标记`code`和/或`pre`标记，但它们不会影响 HTML 解析或需要转义。如前所述，还有`xmp`，它类似于`pre`但不识别元素内的标记，将所有内容视为文本，除了结束标记`</xmp>`；但是同事、老板或老师可能会因为你使用它而责骂你。

# php - Plesk API PHP 脚本不会显示异常？

> ID：11481903
> 
> 赞同：0
> 
> 时间：2012-07-14T07:30:44.367
> 
> 标签：php, exception, xml-rpc, plesk

我修改了 Plesk 文档中的示例脚本以远程创建 A-Name 记录，但几周前放弃了它，因为它只是让人头疼。我现在又开始着手解决这个问题，但现在面临着完全相同的问题。示例脚本充满了 try/catch 和错误异常，但无论如何，当我运行脚本时，我得到的只是一个白页。

我也尝试在文档中添加一堆回声，但除非这些不在函数范围内，否则它们也不会打印出来。我只是在做一些非常愚蠢的事情，还是 Plesk 缺少什么？

```
<?php

/** Reports error during API RPC request */
class ApiRequestException extends Exception {}

function DNSCreateRequest()
{
    $xmldoc = new DomDocument('1.0', 'UTF-8');
    $xmldoc->formatOutput = true;

    // <packet>
    $packet = $xmldoc->createElement('packet');
    $packet->setAttribute('version', '1.6.3.0');
    $xmldoc->appendChild($packet);

    // <packet/dns>
    $dns = $xmldoc->createElement('dns');
    $packet->appendChild($dns);

    // <packet/dns/add_rec>
    $addrec = $xmldoc->createElement('add_rec');
    $dns->appendChild($addrec);

    // add_rec elements
    $addrec->appendChild($xmldoc->createElement('domain_name','domain.net'));
    $addrec->appendChild($xmldoc->createElement('type','A'));
    $addrec->appendChild($xmldoc->createElement('host','testdns'));
    $addrec->appendChild($xmldoc->createElement('value','127.0.0.1'));

    return $xmldoc;
}

/** Prepares CURL to perform the Panel API request */
function curlInit($host, $login, $password)
{
    $curl = curl_init();
    curl_setopt($curl, CURLOPT_URL, "https://{$host}:8443/enterprise/control/agent.php");
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($curl, CURLOPT_POST,           true);
    curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, false);
    curl_setopt($curl, CURLOPT_HTTPHEADER,
    array("HTTP_AUTH_LOGIN: {$login}",
        "HTTP_AUTH_PASSWD: {$password}",
        "HTTP_PRETTY_PRINT: TRUE",
        "Content-Type: text/xml")
    );

    return $curl;
}

/** Performs a Panel API request, returns raw API response text */
function sendRequest($curl, $packet)
{
    curl_setopt($curl, CURLOPT_POSTFIELDS, $packet);
    $result = curl_exec($curl);

    if (curl_errno($curl))
    {
        $errmsg  = curl_error($curl);
        $errcode = curl_errno($curl);
        echo "error message: " . $errmsg;
        echo "error code: " . $errcode;
        curl_close($curl);
        throw new ApiRequestException($errmsg, $errcode);
    }

      curl_close($curl);
      return $result;
}

/** Looks if API responded with correct data */
function parseResponse($response_string)
{
    $xml = new SimpleXMLElement($response_string);

    if (!is_a($xml, 'SimpleXMLElement'))
    {
        echo "Cannot parse server response: " . $response_string;
        throw new ApiRequestException("Cannot parse server response: {$response_string}");
    }

    return $xml;
}

/** Check data in API response */
function checkResponse(SimpleXMLElement $response)
{
    $resultNode = $response->dns->add_rec->result;

    // check if request was successful
    if ('error' == (string)$resultNode->status)
    {
        echo "The Panel API returned an error: " . (string)$resultNode->result->errtext;
        throw new ApiRequestException("The Panel API returned an error: " . (string)$resultNode->result->errtext);
    }
}

// int main()
$host = 'www.hostname.com';
$login = 'admin_user';
$password = '$password$';

$curl = curlInit($host, $login, $password);

try
{
    $response = sendRequest($curl, DNSCreateRequest()->saveXML());
    $responseXml = parseResponse($response);
    checkResponse($responseXml);
}
catch (ApiRequestException $e)
{
    echo $e;
    die();
}

// Explore the result
foreach ($responseXml->xpath('/packet/dns/add_rec/result') as $resultNode)
{
    echo "DNS id: " . (string)$resultNode->id . " ";
    //echo (string)$resultNode->data->gen_info->name . " (" . (string)$resultNode->data->gen_info->dns_ip_address . ")\n";
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:13:51.497

感谢 rdo 的评论，我能够确定它不会接受“domain_name”，而是想要一个“site-id”。一旦使用它，我的脚本就可以完美运行。

# jquery - JQuery 在 ASP.NET 中不起作用

> ID：11481910
> 
> 赞同：1
> 
> 时间：2012-07-14T07:31:33.827
> 
> 标签：jquery, asp.net

出于某种原因，我似乎无法让 jQuery 在我的 asp.net 页面中工作

我已经采购了 jQuery 库，但 document.ready 函数永远不会触发

我也尝试过 window.load 函数

```
 <html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Test Page</title>
<script src="script/jquery-1.7.2.js" type="text/javascript" />

<script type="text/javascript">

    $(document).ready(function () {
        alert('works');
    });
</script>
</head>
<body">

    <form id="form1" runat="server">
    <div>
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    </div>
    </form>
</body>
</html> 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-14T07:36:39.977

标签`"`中有一个`<body">`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-14T07:41:40.377

脚本标签应该像这样关闭：

```
 <script src="script/jquery-1.7.2.js" type="text/javascript"></script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T07:38:35.977

也许您没有正确设置脚本路径。要检查我是否会先尝试导入 Google 托管的 jQuery。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 
```

而且您确实需要明确关闭`</script>`标签

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T07:47:22.830

一旦我遇到同样的问题，但是当我使用 google ajax api 它对我有用。试试看

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" /> 
```

# css - 如何修复灯箱的宽度和高度

> ID：11481914
> 
> 赞同：0
> 
> 时间：2012-07-14T07:32:22.697
> 
> 标签：css

我正在使用灯箱幻灯片，灯箱的宽度和高度根据图像的宽度和高度而变化，我想固定灯箱的宽度和高度，使其不应该改变，请建议。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-14T07:39:23.013

通过 JQuery，您可以按照以下格式修复此问题，

```
$('.YOURCLASS').lightBox({
        maxHeight: SETMAXHEIGHT,
        maxWidth: SETMAXWIDTH
}); 
```

# ruby-on-rails - 如何防止 has_many 关联中模型的批量分配？

> ID：11481917
> 
> 赞同：0
> 
> 时间：2012-07-14T07:32:44.647
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我们的 rails 3.1.4 应用程序中有 user 和 user_position 。一个用户有很多 user_position，一个 user_position 属于一个用户。在用户模型中：

```
accepts_nested_attributes_for :user_positions, :allow_destroy => true
validates_presence_of :user_positions 
```

保存用户时，也会自动保存 user_positions。为了自动保存 user_positions，user 和 user_positions 中的大多数字段必须声明为`attr_accessible`. 这是`attr_accessible`用户模型：

```
attr_accessible :name, :login, :password_confirmation, :password, :user_positions_attributes 
```

这是 user_position 模型中的内容：

```
 belongs_to :user 
  attr_accessible :position  
  validates :position, :presence => true 
```

如您所见，这里的所有字段都可以批量分配。`:as => :admin`似乎在这里工作得不好。如何保护这些领域？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:24:24.100

如果您不在同一个调用中更改密码和其他易受攻击的字段，则无需将它们设置为 attr_accessible。所以，这应该工作：

```
user.user_positions.first.position = "some update"
user.save 
```

如果您在验证时保存失败，那么这是保存操作的问题，由于某种原因会更新密码。因此，如果它仍然存在，请将其粘贴到此处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T16:29:53.870

我们所做的是在 user 和 user_position 模型中添加相同的安全角色 :admin 到 attr_accessible。该更改允许我们创建和更新用户信息。它是否提供了防止不必要的批量分配的安全性？似乎确实如此。但是我们没有测试和验证它。

# c - 如果您的堆栈和堆是不可执行的，您的代码如何运行？

> ID：11481926
> 
> 赞同：25
> 
> 时间：2012-07-14T07:33:52.163
> 
> 标签：c, security, buffer-overflow

我读了一本关于缓冲区溢出的书，它建议下一步处理：

> 使堆栈（和堆）不可执行为现有程序提供了针对多种类型的缓冲区溢出攻击的高度保护。

但我不明白我们该怎么做 - 如果不在堆上或堆栈上，执行将在哪里发生？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-14T11:54:16.313

如果我正确理解了您的问题，则其他答案均未解决。答案是执行发生在代码部分，既不是堆栈也不是堆。在典型的分页内存系统中，来自程序文件（例如，Windows 中的 .exe）的代码被加载到可执行但只读的页面中。额外的可写（和可执行）页面被分配给堆栈和堆的进程。这里的建议是操作系统和硬件应该合作将这些页面标记为可写但不可执行（rgngl 的答案解释了如何在 Windows 中执行此操作）。

即使使用不可执行的堆和堆栈，仍然有可能使用 Alexey Frunze 的回答中提到的面向返回的编程进行利用，但是有一些保护技术甚至会阻碍这些，例如堆栈粉碎保护和地址空间布局随机化 - 请参阅[http://en.wikipedia.org/wiki/Return-to-libc_attack#Protection_from_return-to-libc_attacks](http://en.wikipedia.org/wiki/Return-to-libc_attack#Protection_from_return-to-libc_attacks)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-14T07:47:29.287

有所谓的“面向回报的编程”（AKA ROP）类型的漏洞利用。

攻击者找到了如何利用被利用的程序的不同部分制作他的恶意代码。

他在返回指令字节之前找到可用的字节序列（指令），这些字节序列可以对寄存器或内存进行有用的操作，例如将值移动到某个位置、添加值、比较值等。这些是漏洞利用获得的微子程序建造的。

然后通过利用代码错误，攻击者强制程序开始执行那些完成所有邪恶工作的微子程序链。

所以，现在好的代码变成了坏代码。堆栈或堆中没有执行任何操作。

还值得注意的是，在指令跨越多个字节且长度可变的 CPU 上，即使是指令一部分的立即指令操作数（IOW，数字常量）也可以成为代码，因此找到可用字节序列的机会高于在“更简单”的 CPU 上。

通常还可以构建恶意代码来更改内存保护，并且漏洞利用将不再受现有应用程序代码的限制。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-14T07:59:16.933

非常具体的例子：安排返回地址指向`system`和堆栈上的下一个槽（或传递寄存器拱上的第一个参数寄存器）作为指向字符串的指针`"/bin/sh"`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T07:43:53.653

这种保护是由操作系统提供的，不能在应用层完成。

请参阅维基百科文章，该文章还讲述了如何在 Windows 下启用它：[http ://en.wikipedia.org/wiki/Data_Execution_Prevention](http://en.wikipedia.org/wiki/Data_Execution_Prevention)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-08T10:47:30.050

您的代码在文本段中运行，而不是在堆栈或堆中（两者都用于数据存储）。所以组织是：

```
<highest addresses>
stack
...
heap
data section (initialized data & bss - uninitialized data) 
code section (text)
<lowest addresses> 
```

代码部分是可执行但不可变的。这篇维基百科文章有更多详细信息：[https ://en.wikipedia.org/wiki/Data_segment](https://en.wikipedia.org/wiki/Data_segment)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-14T07:36:01.253

您可以跳转到任何其他可执行段并运行您的邪恶代码...

毕竟，任何存储、内存上的所有数据都是位和位，都可以指令到cpu去执行。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-14T07:37:11.063

您可以使用溢出来覆盖函数的返回地址，该地址可以跳转到带有您的代码的某个已知地址。但是随后操作系统编写者通过随机化地址代码来响应...

# java - Java：无法在比较器中将对象转换为日期

> ID：11481927
> 
> 赞同：1
> 
> 时间：2012-07-14T07:34:16.530
> 
> 标签：java, date, object, casting

我正在尝试通过将 LinkedList myQueue 中的日期集合清空到 ArrayList myArrayList 中，通过比较器对其进行排序，然后遍历链表以将每个日期放回 myQueue 来对 LinkedList myQueue 中的日期集合进行排序。

一切正常，直到我出于某种原因将日期对象发送到我的比较器中将我创建的日期转换为比较器中的日期不起作用。

这是日期的格式：

```
 Thu Jul 30 00:00:00 JST 1908 
```

这是错误：

```
 Exception in thread "main" java.lang.ClassCastException: java.util.Date cannot be cast to Date
at DateComparator.compare(DateComparator.java:14)
at java.util.TimSort.countRunAndMakeAscending(Unknown Source)
at java.util.TimSort.sort(Unknown Source)
at java.util.TimSort.sort(Unknown Source)
at java.util.Arrays.sort(Unknown Source)
at java.util.Collections.sort(Unknown Source)
at QueueTest.main(QueueTest.java:76) 
```

这是我将 myQueue 中的所有对象放入 myArrayList 的位置：

```
 if (!myQueue.isEmpty()) {

            //Collections.sort(myQueue, new DateComparator());

            Object nextDate;

            ArrayList myArrayList = new ArrayList();

            while(!myQueue.isEmpty()){

                nextDate =  myQueue.removeFirst();

                myArrayList.add(nextDate);

            }

            Collections.sort(myArrayList, new DateComparator());

            Iterator it=myArrayList.iterator();

            while(it.hasNext()){

                myQueue.addLast(it.next());

            } 
```

这就是我的比较器中的问题所在：

```
 Date d1 = (Date) a;
    Date d2 = (Date) b; 
```

我刚开始在冲绳上计算机科学学校，除了我的狗之外，没有人可以真正谈论这个问题，因此感谢您的帮助。

//编辑：

这是我的教授要求我们用来创建日期对象的 Date() 超类：

```
public class Date {

    private static int numberDates=0;    

    public static final int VALID_START_YEAR=1584; 

    private int year;  
    private int month;
    private int day;

    public Date() {
    month = 1;
    day = 1;
    year = 1970;
    numberDates++;   
    }

    public Date(int newMonth, int newDay, int newYear) {
    month = newMonth;
    day = newDay;
    year = newYear;
    numberDates++;   
    }

    public Date( Date other) {
    month = other.month;
    day = other.day;
    year = other.year;
    numberDates++;  
    }

    public Date( String date) {
    java.util.StringTokenizer st = new java.util.StringTokenizer(date,"/");

    month = Integer.parseInt(st.nextToken()); //extract next token
    day =   Integer.parseInt(st.nextToken());
    year =  Integer.parseInt(st.nextToken());
    numberDates++;  
    }

    public int getYear() {
    return year;
    }

    public int getMonth() {
    return month;
    }

    public int getDay() {
    return day;
    }

    public String toString() {
    return(month + "/" + day + "/" + year);
    }

    public static int getNumberDates() {
    return numberDates;
    }

    public void increment() {
    day++;   //stub for the actual method to be written later...
    }

    public static void clearNumberDates() {
    numberDates = 0;
    }

    public static boolean isValidDay(int month, int day, int year) {

    return true; 
    }

    public boolean equals( Object other ) { 

    if ((other instanceof Date) && 
        ((((Date)other).year==year) &&
         (((Date)other).month==month) &&
         (((Date)other).day==day)))
        return true;
    else
        return false;   
    }

    public int hashCode() {

    return (year + month + day) % 101;  
    }

    public int compareTo( Date other ) {
    if (equals(other))   
        return 0;

    else if (year < other.year)
        return -1;
    else if (year > other.year)
        return 1;

    else if (month < other.month)
        return -1;
    else if (month > other.month)
        return 1;

    else if (day < other.day)
        return -1;
    else if (day > other.day)
        return 1;
    else      
        return 0;    
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T08:11:52.617

您的教授提供了一个名为的自定义类`Date`，它与`java.util.Date`. 所以你根本无法施放。如果您真的需要在这两种不同`Date`类型之间进行转换，那么您将不得不编写转换器。

最好的方法是`java.util.Date`从您的代码中删除导入并仅使用`Date`为此分配提供的类型。

可以按照您开始的方式对这些日期进行排序。您必须重新实现 DateComparator 才能使用自定义`Date`类而不是`java.util.Date`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T07:44:27.877

有时您应该在转换对象之前检查对象类型，使用以下代码：

`if (d1 instanceof Date) Date d1 = (Date) a;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T07:41:04.480

是的，您可以将日期投射到对象上。

我怀疑您可能在某处导入了 java.sql.Date，而冲突实际上是在 java.util.Date 和 java.sql.Date 之间。

恕我直言...

# android - android findviewbyid() 问题

> ID：11481929
> 
> 赞同：0
> 
> 时间：2012-07-14T07:34:21.150
> 
> 标签：android, xml

我有以下代码，我正在尝试从 main.xml 检索一个 id，但是 netbeans 显示一个错误，即找不到 id 变量。我看不出我做错了什么，这是代码

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

     <TextView
    android:layout_gravity="center"
    android:layout_width="wrap_content"
    android:layout_height="45px"
    android:text="Helllo mw "
    android:textColor="@color/aqua"
    android:id="@+id/my_id2"
    />

</LinearLayout> 
```

我正在尝试在代码中检索 id my_id2 代码

```
package bomb.com;

import android.app.Activity;
import android.os.Bundle;
import android.widget.Button;
import android.widget.TextView;
import android.widget.*;

public class MainActivity extends Activity
{
/** Called when the activity is first created. */

Button sup;
TextView uno;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    uno=(TextView)findViewById(R.id.my_id2);
}

} 
```

谢谢 ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T07:38:39.710

所以看起来是正确的，尝试再次*清理和重建*您的项目并重新启动`NetBeans`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T07:43:01.427

*   “清理”你的项目。
*   如果这不能解决问题，请确保您在其中包含正确的 xml 文件`setContentView()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T08:40:15.780

如果它在线显示错误

```
uno=(TextView)findViewById(R.id.my_id2);
```

比导入 R（带有保存类的包名称）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T07:40:00.143

尝试使项目干净，然后再次检查 id 值并保存 xml 文件

# android - 如何在android中支持不同的屏幕尺寸和不同的屏幕分辨率

> ID：11481938
> 
> 赞同：0
> 
> 时间：2012-07-14T07:36:23.870
> 
> 标签：android

我正在android中开发一个应用程序，我必须支持所有不同的屏幕尺寸和密度，比如更低、中和更高

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T08:30:36.283

要开发支持各种密度和分辨率的应用程序，我们应牢记以下几点：

(1) 将不同大小的图片（同名）按比例放在4个不同的文件夹中：

ldpi：mdpi：hdpi：xhdpi = 3：4：6：8

(2) 这些分辨率常用的尺寸有：

ldpi = 36 * 36 像素 mdpi = 48 * 48 像素 hdpi = 72 * 72 像素 xhdpi = 96 * 96 像素

但是您也可以使用您想要的图像尺寸。（只需尝试按照不同尺寸的比例。）在所有这些图像中，将自动选择适合设备密度的图像。

(3) 除此之外，您还可以通过编程方式获取设备的密度并相应地设置布局，如下所示：

```
 DisplayMetrics displayMetrics = new DisplayMetrics();
   getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);
   switch(displayMetrics.densityDpi){ 
    case DisplayMetrics.DENSITY_LOW: 
        // layout for small sized devices.
        break; 
    case DisplayMetrics.DENSITY_MEDIUM: 
        // layout for medium-sized devices.
        break; 
    case DisplayMetrics.DENSITY_HIGH: 
        // layout for big-sized devices.
        break; 
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T09:52:59.653

将以下代码写入您的 Androidmanifest.xml 文件

```
<supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true" /> 
```

# cakephp - 如何匹配cakephp中不存在于数据库中的字段

> ID：11481940
> 
> 赞同：0
> 
> 时间：2012-07-14T07:37:07.333
> 
> 标签：cakephp, controllers

当 new_password 和 confirm_password 字段不在数据库中时，如何匹配它们？

嗨...我想知道如何匹配我的字段“new_password”和“confirm_password”，它们不存储在数据库中，它们仅用于更改密码模块中的匹配目的。

我试过这个，但没有奏效：

```
if($this->data['User']['new_password'] != $this->data['User']['confirm_password'] ) {
  $this->Session->setFlash("New password and Confirm password field do not match");
} else {
  $this->data['User']['password'] = $this->data['User']['new_password'];
  $this->data['User']['id'] = $this->User->id;

  if($this->User->save($this->data)) {
    $this->Session->setFlash("Password updated");
    $this->redirect('/users/login');
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T16:46:42.077

你可以试试这个：

```
// check for empty value

if( !empty( $this->data['User']['new_password'] ) && !empty( $this->data['User']['confirm_password'] ) ) {

   if( $this->data['User']['new_password'] != $this->data['User']['confirm_password']) {

       $this->Session->setFlash("New password and Confirm password field do not match");

   } else {

       $this->data['User']['password'] = $this->data['User']['new_password'];
       $this->data['User']['id'] = $this->User->id;

       if( $this->User->save($this->data) ) {

          $this->Session->setFlash("Password updated");
          $this->redirect('/users/login');

       } else {

          $this->Session->setFlash('Password update fail');

       }
   }

} else {

   $this->Session->setFlash('Enter New password and Confirm password');

} 
```

# linq - LINQ to Entities 选择新建

> ID：11481945
> 
> 赞同：0
> 
> 时间：2012-07-14T07:37:52.397
> 
> 标签：linq, entity, executescalar

```
public static object ExecuteScalar(string SQL)
{
    try
    {
        var A = new EGModel.EGEntity().Connection;

        var command = ((EntityConnection)(A)).StoreConnection.CreateCommand();
        command.CommandType = System.Data.CommandType.Text;
        command.CommandText = SQL;
        if (((EntityConnection)(A)).StoreConnection.State == System.Data.ConnectionState.Closed)
            ((EntityConnection)(A)).StoreConnection.Open();

        return command.ExecuteScalar();
    }
    catch { return null; }
} 
```

* * *

```
public object MFICHE(int ID)
        {
            var i = from b in IConnection.EGEntity().fiche
                    where (m.ID== ID)
                    select new { b.Date, m.Name, Addresss = IConnection.ExecuteScalar("SELECT main.F_ADDRESS(4588)") };

            return i;
        } 
```

我收到错误：

LINQ to Entities 无法识别方法“System.Object ExecuteScalar(System.String)”方法，并且此方法无法转换为存储表达式。为什么我收到错误？

但是 Addresss = "ASASAS" 正在运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T08:10:35.657

问题是从您的查询生成的表达式树包含对您的`ExecuteScalar`方法的调用 - 实体框架表达式解析器对此一无所知。它不会*在*该方法内部查看它在做什么——它只知道调用存在，并且因为无法翻译而失败。

您通常不想为查询返回的每个结果执行单独的 SQL 语句吗？您有一个明显的“N+1 选择”问题。

如果您知道您只有一个结果（由于 ID 约束），您可以将相关数据提取到一个对象中，*然后*执行第二个查询：

```
public object MFICHE(int ID)
{
    var query = from b in IConnection.EGEntity().fiche
                where b.ID == ID
                select new { b.Date, b.Name };
    // You only expect a single result, right?
    var result = query.Single();
    // Shouldn't this be using something to do with the result?
    var address = IConnection.ExecuteScalar("SELECT main.F_ADDRESS(4588)");
    return new { result.Date, result.Name, Address = address };
} 
```

顺便说一句，在以 开头的类型中拥有静态方法是非常奇怪的`I`，这通常是一个接口。此外，此代码：

```
catch { return null; } 
```

太*可怕*了——你应该捕获*特定的*异常，记录它们，然后通常重新抛出它们。*就好像什么都没*出错一样继续下去几乎是不合适的。

# iphone - Xcode 的 git 存储库存储在哪里？为什么在我复制项目目录时会创建不同的存储库？

> ID：11481946
> 
> 赞同：3
> 
> 时间：2012-07-14T07:37:53.420
> 
> 标签：iphone, xcode, git

我正在使用 Xcode 的内置 git。

我认为我的项目目录只是存储库的工作副本。

我如何知道存储库的存储位置？

当我复制项目目录时，会自动为新项目目录创建一个新的不同存储库，而不是共享旧项目目录的存储库。
这很方便，但为什么会这样？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-16T02:07:58.417

`.git`Git 将存储库存储在工作目录的最顶层文件夹中。因此，如果您的代码位于 . 中`/Users/js/Code/MyProject`，则存储库位于`/Users/js/Code/MyProject/.git/`.

Git 鼓励每个存储库都包含一个“项目”。尽管*可以*将不共享任何历史记录的不相关分支存储在单个存储库中，但这是非常不标准的，并且可能会使其他人感到困惑。

将不相关的项目作为子目录存储在单个工作目录中也是*可能的，但不鼓励这样做。*这将使查看每个单独项目的历史变得困难，因为您必须检查每个单独的提交以确定它影响了哪个项目，并且合并将是彻头彻尾的**痛苦**。

# php - MVC，移动和桌面的不同内容

> ID：11481948
> 
> 赞同：0
> 
> 时间：2012-07-14T07:38:38.677
> 
> 标签：php, model-view-controller, mobile, controller, desktop

我有一个关于为移动和桌面开发的问题。
我需要为桌面提供移动和其他内容...想法如下：
**[移动]** 文本内容只有几个菜单项
**[桌面]**内容包含文本和图片，所有菜单项

都解决了这个问题，我有控制器识别请求的想法，然后它将加载**model_mobile** / **model_desktop**和**view_mobile** / **view_desktop** ......对吗？

基本上会在控制器中：

```
if ($ request-> ismobile () === true)
{
include 'model_mobile.php';
include 'view_mobile.php';
}
else
{
include 'model_desktop.php';
include 'view_desktop.php';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T13:52:40.533

表示逻辑是视图实例的权限（仅供参考，视图**不是**哑模板）。

仅仅因为您决定通过移动设备而不是桌面与站点交互并不会改变域业务逻辑。模型保持不变。此更改仅影响视图，并取决于您的视图编写得如何。基本上有两种选择：

1.  View 使用不同的桌面和移动模板；从模型层请求所需的信息；呈现模板。这取决于事实，即移动客户端和桌面客户端的大部分信息都是相同的。

2.  对于移动设备和桌面，您有不同的视图，并且已经知道每个视图可以使用哪些模板。在这种情况下，在使用模板渲染之前查看来自模型层的非常具体的信息的请求。

第二种方法对于高负载系统会更好（您可能会通过与存储进行更精确的交互来节省一点），但会带来一些代码重复。

当然，您可以在选项 nr.1 中提出如此精确的请求，但这需要有一个`if ($desktop) .. else`块重复整个视图，这将是一个明确的信号，即代码必须分成两个类并采用多态性。

**控制器呢？**

在这两个选项中，控制器保持不变。它仅通过更改视图状态（在第一种情况下）或决定将创建哪种类型的视图（在第二种情况下）来影响视图。

如果您需要对移动用户*隐藏*一些控制器操作（这已经通过使用不同的模板部分完成），您可以实现[某种 ACL](https://stackoverflow.com/a/9685039/727208)，它可以让您决定是否允许用户访问控制器上的特定方法。

当然，这一切都取决于你[对 MVC](https://stackoverflow.com/a/5864000/727208)的理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T07:43:36.940

我会这样做：

1.  在引导程序中，检测到它是一个移动请求
2.  将用户重定向到可能的`m.`子域
3.  `m.`子域被路由到特殊的移动控制器
4.  移动控制器实际上是相同的普通控制器，它只是用于移动设备的视图，并提供比普通控制器更多的有限功能。

应使用相同的模型以避免代码重复。

# android - 如何在不强制转换的情况下从 Bundle 中提取 HashMap？

> ID：11481962
> 
> 赞同：2
> 
> 时间：2012-07-14T07:41:30.940
> 
> 标签：android, casting, hashmap, bundle

在两个线程之间进行通信时，我使用消息来传输数据。就我而言，是一个 HashMap。现在在重建数据时，我收到有关未经检查的类型转换的警告。这对我来说意味着（作为java noob），我根本不应该这样做，对吧？但是将 HashMap 从包中取出的正确方法是什么？

```
 Bundle dataBundle = msg.getData();
Serializable result = dataBundle.getSerializable("data");
HashMap<String,String> output = (HashMap<String, String>) result; 
```

感谢任何指针！马库斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T07:47:54.803

所以用你的方法

```
getSerializable("data"); 
```

没有强制转换就没有办法做到这一点，因为`getSerializable`方法总是返回`Serializable`实例。

如果不进行强制转换，您可以使用`getParcelableExtra`该返回值`T`，但我对您的应用程序上下文一无所知，所以我不确定是否可以使用。

# css - 如何使用带有@font-face 的webfont

> ID：11481964
> 
> 赞同：7
> 
> 时间：2012-07-14T07:41:42.417
> 
> 标签：css, sencha-touch-2, font-face, webfonts

我想将应用程序中的字体更改为自定义字体，但以下代码不起作用：

```
@font-face 
{
font-family: "ArnoProBold"; 
src: url("resources/fonts/ArnoProBold.ttf");
}
@font-face 
{
 font-family: "ArnoProCaption"; 
 src: url("resources/fonts/ArnoProCaption.ttf");
}
@font-face 
{
 font-family: "Arn";
 src: url("resources/fonts/ArnoProLightDisplay.ttf");
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-14T07:58:44.543

嘿@Ritesh，请尝试这样的事情，

```
@font-face {
   font-family: 'ArnoProBold';
   src: url('resources/fonts/your_file.eot');
   src: url('resources/fonts/fonts?#iefix') format('embedded-opentype'),
        url('resources/fonts/your_file.woff') format('woff'),
        url('resources/fonts/your_file.ttf') format('truetype'),
        url('resources/fonts/your_file.svg#ArnoProBold') format('svg');
   font-weight: normal;
   font-style: normal;
} 
```

等等。

我希望这有帮助。:)

# objective-c - 如何使用 prepareForSegue 方法在目标视图中设置 UIStepper 值？

> ID：11481966
> 
> 赞同：1
> 
> 时间：2012-07-14T07:41:56.380
> 
> 标签：objective-c, ios, segue, uistepper

在我的呈现视图控制器中，我有以下 prepareForSegue 函数

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if([[segue identifier] isEqualToString:@"goToView2"]){
        ViewController2 *controller2 = [segue destinationViewController];
        controller2.multiplierStepper.value = 7.0;
        controller2.randomString = @"string set from Scene 1";
    }
} 
```

在 ViewController2 中有一个我的 UIStepper 值的出口和一个 NSString

```
@property (strong, nonatomic) IBOutlet UIStepper *multiplierStepper;
@property (strong, nonatomic) NSString *randomString; 
```

在 ViewController2.m viewDidLoad 中，我正在测试上面由呈现视图控制器设置的值

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.        
    NSLog(@"in viewDidLoad: self.multiplierStepper.value: %f", self.multiplierStepper.value);
    NSLog(@"in viewDidLoad: randomstring: %@", self.randomString);
} 
```

控制台输出非常适合 NSString，但 UIStepper 值始终显示在 Interface Builder (1) 中定义的初始值。

```
[10682:f803] in viewDidLoad: self.multiplierStepper.value: 1.000000
[10682:f803] in viewDidLoad: randomstring: string set from Scene 1 
```

答案可能非常明显，但我不知道如何从呈现视图控制器中设置目标视图控制器中步进器的值。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T08:30:01.193

不要在prepareForSeque方法中直接设置UIStepper的值，这样是不行的！

您必须声明一个包含该值的属性，然后在第二个控制器的 viewDidLoad 事件中设置步进器的值...

首先向您的第二个视图控制器 (ViewController2) 头文件声明一个附加属性：

```
@property (nonatomic) double stepperValue; 
```

然后设置属性值：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if([[segue identifier] isEqualToString:@"goToView2"]){
        ViewController2 *controller2 = [segue destinationViewController];
        controller2.stepperValue = 7.0;
        controller2.randomString = @"string set from Scene 1";
    }
} 
```

然后在目标 viewController (ViewController2) 中：

```
- (void)viewDidLoad
{
    multiplierStepper.value = [self stepperValue];
} 
```

* * *

## 笔记

请记住，最好的封装方式是将 IBOutlet 声明为类的私有成员，以避免类的客户端可以直接访问 IBOutlet；要将 IBOutlet 设为私有，您必须在 .m 文件的类扩展中声明它...

# html - 将旧的动态链接重定向到 SEO 友好的链接

> ID：11481969
> 
> 赞同：-1
> 
> 时间：2012-07-14T07:42:56.030
> 
> 标签：html, apache, .htaccess, sites

我的链接就像“ [http://www.shinylook.ro/product.php?id=58](http://www.shinylook.ro/product.php?id=58) ”，我像这样重写它们

```
"http://www.shinylook.ro/produs/58/saboti-dama/" 
```

使用此代码：

```
RewriteRule ^produs/([0-9]+)/([a-zA-Z0-9_-]+)\/ product.php?id=$1 [L] 
```

但我无法设法将旧链接重定向到新链接。如果有人将键入旧的，将被重定向到新的。

我试过这个：

```
RewriteRule ^product.php?id=$1 produs/([0-9]+)/([a-zA-Z0-9_-]+)\/  [L,R=301] 
```

但它不起作用。

我该如何解决这个问题？

编辑：

我设法编写了 PHP 代码...您可以在`www.shinylook.ro/redirect_old_links.php?id=44`.

但我无法解决 htaccess 重写代码以重定向到该文件...

我用了`RewriteRule ^product.php?id=([0-9]+) redirect_old_links.php?id=$1 [R=301,NC]`

但它不起作用。

编辑2：

我设法解决了这个问题...... htaccess 看起来像

```
RewriteCond %{ENV:REDIRECT_STATUS} !=200

RewriteCond %{QUERY_STRING} ^id=([0-9]+)$

RewriteRule ^product.php$ /redirect_old_links.php/ [L]
RewriteRule ^produs/([0-9]+)/([a-zA-Z0-9_-]+)\/$ product.php?id=$1 [L] 
```

PHP 代码如下所示：

```
<?
    include "_storescripts/connect_to_mysql.php";
    error_reporting(E_ALL);
    ini_set('display_errors', '1');

    if (isset($_GET['id'])) {
        $produs = $_GET['id'];

        $sql =  mysql_query("SELECT nume_produs FROM products WHERE id='$produs'"); // Chose the product

        // ------- We check if it exists ---------
        $existCount = mysql_num_rows($sql); // Count

        if ($existCount == 1) {
            while($row = mysql_fetch_array($sql)){
                $nume_brut = $row["nume_produs"];
                $nume = explode(" ", $nume_brut);
            }
            $nume_final = strtolower($nume[0]."-".$nume[1]);
            $name = urlencode($nume_final);
            header("location: http://www.shinylook.ro/produs/$produs/$name/", TRUE, 301);
        }
        else {
            echo ("This product id does not exist!");
            exit();
        }
   }
?> 
```

如果有人看到一些错误（我是这个领域的新手），我会很高兴听到它们并学习如何更好地做这件事......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T07:48:25.957

您可能希望将旧链接重定向到新 URL，以便人们在将新链接粘贴到博客等时使用它们。

使用`RewriteRule`s 时，Apache 无法猜测名称的其余部分以执行重定向的另一部分。

它可以删除它：
`produs/58/saboti-dama/ -> product.php?id=58`
但是它会在哪里再次获得名称以进行相反的操作？

为此，您应该编写一个`redirect_old_links.php`文件，该文件只会重定向到新位置： http:
[//php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

例子：

用户访问
`product.php?id=58`

`RewriteRule product.php?id=([0-9]+) redirect_old_links.php?id=$1 [L]`

在`redirect_old_links.php`：

```
mysql_select("SELECT name FROM PRODUCTS WHERE ID = ".$_GET["id"]);
// the above line is just so you get the point,
// please create a proper query with PDO and proper escaping

$id = urlencode($product_id);
$name = urlencode($product_name);

header("Location: produs/$id/$name/"); 
```

抱歉，我已经很久没有使用 PHP 了，你必须自己查看函数的文档，我不记得 mysql_select/fetch 过程。Urlencode 也可能是错误的。

但我希望你明白这一点。

# c# - 验证 ASCII 和特殊字符的键盘输入

> ID：11481971
> 
> 赞同：1
> 
> 时间：2012-07-14T07:43:22.200
> 
> 标签：c#, windows-phone-7, xaml

我的 windows phone 7 中有文本框。我想验证用户输入的普通字符或某些特殊字符或 ASCII。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T08:15:11.327

您可以通过执行以下操作来确定按下的键是字母、数字还是特殊字符：

```
private void textBox1_KeyPress(object sender, KeyEventArgs e)
{
  if (Char.IsLetter(e.KeyChar))
  {
    // The character is a letter
  }
  else if (Char.IsDigit(e.KeyChar))
  {
    // The character is a digit
  }
  else
  {
    // The character is a special character
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T09:49:48.723

我是这样做的。。

```
public int CountChars(string value)
        {
            int result = 0;
            foreach (char c in value)
            {
              if (c>127)
                {
                    result = result + 10; // For Special Non ASCII Codes Like "ABCÀßĆʣʤʥ"
                }

                else
                {
                    result++; // For Normal Characters Like "ABC"
                }
            }
            return result;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T07:45:13.447

简单地使用带有蒙版的蒙版文本框！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T16:18:20.523

您可以使用此函数获取有关 textBox 中文本的数据：

```
 private void validator(string value, out int letterCount, out int digitCount, out int specialCharCount)
        {
            letterCount=digitCount=specialCharCount=0;
            foreach (char c in value)
            {
                if (Char.IsLetter(c))
                    letterCount++;
                else if (Char.IsDigit(c))
                    digitCount++;
                else
                    specialCharCount++;

            }
        } 
```

称它为：

```
 int a, b, c;
 validator(textBox1.Text, out a, out b, out c); 
```

textBox1 是您的文本框。它将填充值`a,b,c`并使用这些值，您可以根据需要执行计算。

# oracle - oracle 中的表设计，如树视图

> ID：11481974
> 
> 赞同：0
> 
> 时间：2012-07-14T07:43:52.247
> 
> 标签：oracle, database-design

如何在 Oracle 中创建具有树视图设计的表。我不使用任何编程语言进行编码，例如我只想要表格设计

资本
- 股份
- 优先股

负债
- 担保贷款
- 无担保贷款
- 债券

资产
- 固定资产
- 有形资产

最重要的是在一张桌子上。

这里资本、资产和负债是表的主要字段，在这些字段下是子节点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T10:25:28.240

不清楚你所说的树设计是什么意思。您是指一种称为“泛化专业化”的设计模式吗？我的意思是，无担保贷款是负债的子类型，您的三个主要类别可以归为某个超类型。描述这种模式的另一种方式是“关系设计中的继承建模”。

如果是这样，那么 gen-spec 的表设计主题已经在 SO 中多次出现。

[表设计和类层次结构](https://stackoverflow.com/questions/4142536/table-design-and-class-hierarchies)

这是最好的文章之一，请按照指示将您带到 Martin Fowler 对对象关系不匹配的讨论。

[如何在关系数据库中进行继承建模？](https://stackoverflow.com/questions/1567935/how-to-do-inheritance-modeling-in-relational-databases)

# php - 如何确定从哪个 url 调用 PHP 标头

> ID：11481976
> 
> 赞同：0
> 
> 时间：2012-07-14T07:44:02.750
> 
> 标签：php, http-headers

我在[http://www.example.com/abc/def/a/](http://www.example.com/abc/def/a/)下有一个页面，用户可以在其中购买产品。对于营销活动（印刷纸），客户应输入较短的网址 [http://www.example.com/order/](http://www.example.com/order/)

当调用这个 url 时，服务器会执行这个脚本：

```
<?php
header("Location: http://www.example.de/abc/def/a/");
exit;
?> 
```

[http://www.example.com/abc/def/a/](http://www.example.com/abc/def/a/)下的页面包含一些信息（回扣代码等），这些信息应该只对来自[http://www.example.com/order/的用户可见](http://www.example.com/order/)

`$_SERVER['HTTP_REFERER']`从我读到的内容似乎不可靠。

我检查了`phpinfo();`是否有任何包含“订单”的信息变量，但我没有找到。

有可能还是您推荐另一种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T07:47:19.280

HTTP 是纯粹的*stateless-protocol*形式，因此您不会在协议本身中找到任何可以帮助您解决当前问题的内容。

使用`$_SESSION`在请求之间存储数据是最容易走的路线，也是我推荐的。

如前所述；由于用于传输信息的协议是*无状态*的，因此您别无选择，只能为您的 Web 应用程序创建一种方法来识别哪个用户完成了哪个请求。这是 php-sessions 解决的完美问题。

* * *

*   **[php.net - PHP：会话 - 手册](http://php.net/manual/en/features.sessions.php)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T07:51:55.520

正如您所发现的，HTTP Referer 以及所有其他标头很容易被伪造。我看到的唯一可靠的方法是在用户访问订单页面时记录用户，当他们访问该`/abc/def/a/`页面时，验证日志条目是否存在。这种日志可以存储在 中`$_SESSION`，但是请确保在使用多个服务器时进行正确的设置，以确保所有服务器共享相同的会话信息（您可以使用[redis 服务器来存储会话数据](http://redis4you.com/articles.php?id=001&name=Redis%20as%20session%20handler%20in%20PHP)）。

在订单页面：

```
session_start();
$_SESSION['order_visited'] = true; 
```

在回扣代码页上：

```
session_start();
if(!isset($_SESSION['order_visited']) || !$_SESSION['order_visited']) {
    header('Location: /order'); // Must visit order first
    die();
} 
```

# android - 如何开始为 Android 构建增强现实应用程序

> ID：11481977
> 
> 赞同：0
> 
> 时间：2012-07-14T07:44:03.670
> 
> 标签：android, augmented-reality

我是安卓新手。我需要制作一个与增强现实相关的应用程序，但我对这个概念一点也不熟悉。任何人都可以提供一个好的链接来开始吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T07:50:36.313

伟大的问题。增强现实意味着向用户显示有关他在哪里或做什么的附加信息。例如，假设您正在驾驶汽车，然后您会在汽车前玻璃上看到街道名称，您会看到交通信息、gps 信息和很多的东西。或者你在街上看到一个箭头指示你回家的路！！！这称为增强现实。看看这张[照片](http://www.blogcdn.com/www.autoblog.com/media/2010/08/01-augmented-630.jpg)或[这张](http://telematicsnews.info/wp-content/uploads/general/bmw%20aug%20real1.jpg)照片现在首先找出您可以根据您的应用程序向用户提供哪些附加信息。然后开始工作

# android - 如何获取另一个字符串数组引用的字符串数组？

> ID：11481990
> 
> 赞同：0
> 
> 时间：2012-07-14T07:45:27.283
> 
> 标签：android, arrays

例如，如果我有以下`String_Array`

```
<string-array name="recipe_ingredients">
    <item>@array/m1_ingredients</item>
    <item>@array/m2_ingredients</item>
</string-array> 
```

如何访问`@array/m1_ingredients`另一个`String`_Array的位置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T07:53:10.817

编辑：不，`StringArray`当然，a 的每个项目都必须始终是字符串。所以不可能是另一个`StringArray`

检查资源[文档](http://developer.android.com/guide/topics/resources/string-resource.html)，滚动到 StringArray

> 名称字符串。数组的名称。此名称将用作引用数组的资源 ID。

这是一个例子

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string-array name="planets_array">
        <item>Mercury</item>
        <item>Venus</item>
        <item>Earth</item>
        <item>Mars</item>
    </string-array>
</resources> 
```

> 此应用程序代码检索字符串数组：

```
Resources res = getResources();
String[] planets = res.getStringArray(R.array.planets_array); 
```

# eclipse - eclipse indigo java 透视图不可见

> ID：11481992
> 
> 赞同：1
> 
> 时间：2012-07-14T07:45:56.413
> 
> 标签：eclipse, ubuntu

我在 Ubuntu 12.04 LTS 上安装了 Eclipse 平台版本：3.7.2。我的 Ubuntu 软件中心显示已安装 Eclipse 可扩展工具平台和 Java IDE (eclipse 3.7.2-1)。还安装了 Eclipse 集成开发（eclipse-platform 3.7.2-1）。但是，当我启动 Eclipse 时，我无法获得 Java 透视图，也无法创建 Java 项目。当我单击 Open Perspective 时：我看到 CVS Repository Exploring、Debug、Resource（默认）和 Team Synchronizing。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T07:55:08.683

您可以单击打开透视图 > 其他并找到 Java 透视图。请参考这张图片： ![在此处输入图像描述](../Images/a0f39f38bc9e6d18b2f8c264be6f93bc.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T18:50:43.663

关闭 Eclipse 并`.eclipse`用另一个名称重命名主目录中的目录，例如`.eclipseSAVE`.

重新启动 Eclipse，您应该会找到 Java。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T14:45:26.760

首先，您不应该从任何 Linux 存储库或包管理器安装 Eclipse；只需直接从[Eclipse 网站](http://www.eclipse.org/downloads/)下载即可。还要确保您使用的是 Oracle JDK，而不是 gcj。在 gcj 下运行 Eclipse 报告了很多问题。要指定运行 Eclipse 的 JVM，请使用[eclipse.ini](http://wiki.eclipse.org/Eclipse.ini)

其次，您拥有的是*Eclipse 平台*，它不包含任何 IDE 功能；它只是构建 Eclipse 的基础平台（从 linux repo 获取 Eclipse 的另一个问题是您并不真正知道它们打包并交付给您的内容）。对于 Java 开发，您可能需要下载页面中的**Eclipse IDE for Java Developers**或**Eclipse IDE for Java EE Developers**软件包。

# php - HTMLFORM-PHP-如何正确使用日历控件作为日期选择器

> ID：11481993
> 
> 赞同：0
> 
> 时间：2012-07-14T07:46:21.277
> 
> 标签：php, html, calendar-control

我正在使用 html 和 php 创建网站。我有一个 html 格式的租赁表格，其中包含要出租的设备。在这里，我使用 php 插入元素。我的表格中有开始日期和结束日期。我想向用户展示从日历控件中选择他们的日期，这意味着日历图像将显示在开始日期文本框和结束日期附近。我从该站点下载了日历控件。现在我有日历控制代码，图像也。但我不知道如何在我的 html 表单和 php 文件中使用这些东西。我无法在文本框附近显示图像。请告诉我在哪里放置日历控件编码以及如何以正确的方式使用它。请帮助我验证开始和结束日期。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:41:53.350

这是***JQuery UI 日期选择器***（最简单的方法）：

[http://jqueryui.com/datepicker/#icon-trigger](http://jqueryui.com/datepicker/#icon-trigger)

它会将日历图标（buttonImage）与代码放在一起：

```
<script>
    $(function() {
        $( "#datepicker" ).datepicker({
            showOn: "button",
            buttonImage: "images/calendar.gif",
            buttonImageOnly: true
        });
    });
    </script> 
```

您可以从上面的链接下载示例页面源代码。恩乔伊。

# winforms - 如何仅从实体加载几个属性？

> ID：11481994
> 
> 赞同：0
> 
> 时间：2012-07-14T07:46:59.420
> 
> 标签：winforms, entity-framework-4

我正在使用 EF 4.0，并且从 DB 创建了 3 个实体。

在 DB 中，我有以下表格 Employee、Contact、Department。

员工表 -> EmployeeID,Name,Designation

ContactTable -> ContactID,Address,CellNo,EmployeeID(FK)

部门表 -> DepartmentID,Name,EmployeeID(FK)

从数据库转换为实体后，我得到以下实体

EmployeeObject -> EmployeeID、姓名、职务、联系人（另一个实体）、部门（另一个实体）。

直到这没关系，现在我想将员工绑定到数据网格，它也可以正常工作......我使用下面的代码来绑定员工进行记录......

代码工作完美，现在的问题是当我看到数据进入网格时，两个额外的列进入网格，联系人和部门。

请看图片

[单击此处查看结果网格的屏幕截图](https://picasaweb.google.com/111036459721552617166/July142012#5764920127191591394)

[实体模型图片](https://picasaweb.google.com/111036459721552617166/July14201202#5764920856118780386)

我只想绑定员工表中的记录，而不是实体（联系人和部门）中的对象。

# c# - 在文本框上强制大小写约束

> ID：11481999
> 
> 赞同：0
> 
> 时间：2012-07-14T07:47:38.407
> 
> 标签：c#, javascript, jquery

我有一个包含数据库中案例设置的文本框。如果数据库设置为大写，则文本框文本应转换为大写，如果设置为正确大小写，则文本框文本应转换为正确大小写。我在javascript的帮助下实现了这一点。

但是，我还有一个设置是 Upper Changeable，其中文本框文本转换为大写。但是如果用户不想要大写，他可以改变大小写。

```
 <script type="text/javascript">
   function toUpper(obj) {
       var mystring = obj.value;
       var sp = mystring.split(' ');
       var wl = 0;
       var f, f1, f2, r1, r2, r;
        if (document.getElementById('<%= hdnNameStyle.ClientID %>').value == "UC") {
         mystring = mystring.toUpperCase();
         obj.value = mystring;
     }
     if (document.getElementById('<%= hdnNameStyle.ClientID %>').value == "PC") {
         var word = new Array();
         for (i = 0; i < sp.length; i++) {
             f = sp[i].substring(0,1).toUpperCase();
             r = sp[i].substring(1);
             word[i] = f + r;
         }
         newstring = word.join(' ');
         obj.value = newstring;
     }
     if (document.getElementById('<%= hdnNameStyle.ClientID %>').value == "UG") {
         mystring = mystring.toUpperCase();
         obj.value = mystring;
     }
  } 
```

这是我尝试过的javascript，它工作正常。但是，如果 hdnNameStyle 值是 UG，为了进一步澄清，文本框文本将转换为大写，但如果用户不想要大写，他可以更改大小写。

如何让用户在javascript的帮助下改变大小写？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T08:35:36.587

无需更改文本本身，只需为其使用 CSS 类。

```
/* css */
.uppercase { text-decoration: uppercase }
.propercase { text-decoration: capitalize }

<!-- html -->
<p id="text">
    Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.
</p>
<input type="checkbox" onclick="toggleUppercase()" />

// javascript
function toggleUppercase() {
    var text = document.getElementById("text");
    if (text.className === "uppercase") {
        text.className = "propercase";
    } else {
        text.className = "uppercase";
    }
} 
```

有了这个，你应该能够得到一个可行的解决方案。