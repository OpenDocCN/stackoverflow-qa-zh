# StackOverflow 问答 10809000-10809999

# php - 如何向这个 PHP 数组添加 IE8 css hack？

> ID：10809002
> 
> 赞同：-1
> 
> 时间：2012-05-30T01:44:33.900
> 
> 标签：php, css

我需要更新一些预先存在的代码。

```
css => array(
    'body' => 'overflow-x:hidden;',
    '#wrapper' => 'width:500px;'
) 
```

我假设`=>`建议它以 PHP 格式完成。

我需要做的是添加一个 IE8 css hack，我试过这个但无济于事：

```
css => array(
    'body' => 'overflow-x:hidden;',
    '#wrapper' => 'width:500px;',
    '<!--[if IE 8]>#rightcol' => 'width:200px;<![endif]-->'
) 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T01:54:57.990

在您的 HTML 中，将您的开始正文标记从`<body>`, 更改为：

```
<!--[if IE 8]><body class="ie8"><![endif]-->
<!--[if ! IE 8]<!--><body><!--<![endif]--> 
```

然后你可以`.ie8`在任何 css 选择器之前放置以使其仅在 ie8 中工作：

```
css => array(
    'body' => 'overflow-x:hidden;',
    '#wrapper' => 'width:500px;',
    '.ie8 #rightcol' => 'width:200px;'
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T01:57:15.597

这个数组很可能被注入（从某种意义上说）到你的 css 代码中。如果您知道（通过查看**加载**的php 页面的源代码）是这种情况，那么那里的 HTML 注释对您不起作用，因为它会尝试在 css 部分中编写这些注释，这是无效的。

你需要让它为那个 IE8 条件重写一个重复的 css。所以你将拥有：

```
<style type="text/css">
/* this part is filled by your array values */
</style>

<!--[if IE 8]-->
<style type="text/css">
/* this part is the IE8 hack */
</style>
<!--[endif]--> 
```

这将需要并包含另一个**样式**标签。

# checkbox - 如何从多个复选框中提取值并将它们合并到 Infopath 上的 1 个 texbox 字段中？

> ID：10809010
> 
> 赞同：0
> 
> 时间：2012-05-30T01:45:35.790
> 
> 标签：checkbox, textbox, merge, infopath, infopath2010

我创建了一个 Infopath 2010 表单。它包含一些复选框，用户可以选择多个复选框，我想将这些值合并到 1 个文本框中。这是示例：

*   [ ] 值 1 <=这是复选框
*   [*] 值 2 <=这是复选框（选中）
*   [*] 值 3 <=这是复选框（选中）
*   [Value2、Value3 和一些手动添加的文本] <=这是我要合并值并将此值添加到数据库中的 1 列的文本框。

你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T16:31:45.303

您可以在复选框更改时运行的每个复选框都有一个规则。每个规则都会查找其他值和文本，按照您的需要将它们连接起来，并将最终文本框的值设置为该字符串。

# ios - 更改项目名称后，找不到版本设置

> ID：10809014
> 
> 赞同：0
> 
> 时间：2012-05-30T01:46:53.853
> 
> 标签：ios, xcode, build, version

使用适用于 iOS 的 XCode 4。我将程序的项目名称更改为更用户友好和可读的名称。我再也找不到版本设置了。
我需要更改其他设置以查看和编辑版本/构建吗？谢谢...瑞克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T02:36:39.677

我已经在 XCode 中尝试过并重命名该项目。Xcode 会自动要求您重命名目标等。之后，我仍然可以找到版本并构建目标摘要和信息。

我按以下方式重命名项目名称： 1\. 选择项目（顶行带有蓝色图标） 2\. 按 Enter 3\. 重命名 4\. 继续使用 xCode 建议重命名其他相关文件

我希望这有帮助

# couchapp - Couchbase Mobile (ios) 复制的数据量太大

> ID：10809018
> 
> 赞同：0
> 
> 时间：2012-05-30T01:48:07.853
> 
> 标签：couchapp, couchbase

我正在开发一款手机游戏，它在客户端上使用 Couchbase 移动版，并在 Iris Couch 上将数据存储在云上。为了让应用程序离线工作，每个用户在服务器上都有一个数据库，该数据库在设备上复制。除了一个细节之外，一切看起来都很有希望：当数据在 deice 上复制时，它会占用太多磁盘空间。例如，远程数据库包含 400 个文档，大约为 100 MB，设备上的复制数据库大约为 390 MB，文档数量相同。有没有人遇到过这样的问题？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T22:42:26.530

TouchDB 以与 CouchDB 完全不同的格式存储数据——它实际上写入 SQLite 表。另一个可能发挥作用的因素是 TouchDB 端缺乏快速压缩，CouchDB 最近添加了它并显着降低了其对磁盘的要求。

考虑到您的文档似乎相对较大，我怀疑您看到的差异可能主要是压缩与原始相关。如果您可以确定这确实是差异的来源，您可以尝试提交在 TouchDB 项目上实施类似压缩[的功能请求。](https://github.com/couchbaselabs/TouchDB-iOS/issues)

# opengl - LWJGL 3D采摘

> ID：10809021
> 
> 赞同：1
> 
> 时间：2012-05-30T01:48:49.763
> 
> 标签：opengl, lwjgl, picking

所以我一直在尝试理解 3D 拾取的概念，但由于我找不到任何视频指南或任何实际会说英语的具体指南，事实证明这非常困难。如果有人对 LWJGL 中的 3D 拾取经验丰富，您能否给我一个示例，逐行解释所有内容的含义。我应该提一下，我正在尝试将光线射出屏幕中心（而不是鼠标所在的位置），并让它检测到一个普通的立方体（以 6 个 QUADS 渲染）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T02:42:40.267

虽然我不是 3D 拾取方面的专家，但我以前做过，所以我会尝试解释一下。

你提到你想射一条射线，而不是按鼠标位置；只要这条射线平行于屏幕，这个方法仍然有效，就像它对随机屏幕坐标一样。如果不是，并且您实际上希望向某个方向射出光线，事情会变得有点复杂，但我不会（暂时）。

现在一些代码怎么样？

```
Object* picking3D(int screenX, int screenY){
    //Disable any lighting or textures
    glDisable(GL_LIGHTING);
    glDisable(GL_TEXTURE);

    //Render Scene
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glLoadIdentity();
    orientateCamera();

    for(int i = 0; i < objectListSize; i++){
        GLubyte blue = i%256;
        GLubyte green = min((int)((float)i/256), 255);
        GLubyte red = min((int)((float)i/256/256), 255);
        glColor3ub(red, green, blue);
        orientateObject(i);
        renderObject(i);
    }

    //Get the pixel
    GLubyte pixelColors[3];
    glReadPixels(screenX, screenY, 1, 1, GL_RGB, GL_UNSIGNED_BYTE, pixelColors);

    //Calculate index
    int index = pixelsColors[0]*256*256 + pixelsColors[1]*256 + pixelColors[2];

    //Return the object
    return getObject(index);
} 
```

代码注释：

*   screenX 是像素的 x 位置，screenY 是像素的 y 位置（在屏幕坐标中）
*   orientateCamera() 只需调用在场景中定位（和旋转）相机所需的任何 glTranslate、glRotate、glMultMatrix 等
*   orientateObject(i) 的作用与 orientateCamera 相同，但场景中的对象“i”除外
*   当我“计算索引”时，我实际上只是撤消在渲染期间执行的数学运算以取回索引

The idea behind this method is that each object will be rendered exactly how the user sees it, except that all of a model is a solid colour. Then, you check the colour of the pixel for the screen coordinate requested, and which ever model the colour is indexed to: that's your object!

I do recommend, however, adding a check for the background color (or your glClearColor), just in case you don't actually hit any objects.

Please ask for further explanation if necessary.

# php - 发布 HTML 标签时出现 403 禁止

> ID：10809022
> 
> 赞同：3
> 
> 时间：2012-05-30T01:49:03.187
> 
> 标签：php, forms, wysiwyg

我有一个表单，我正在使用 nicEdit WYSIWYG 并启用了以下按钮：

*   胆大
*   斜体
*   强调
*   无序列表

当其中任何一个用于无序列表时，我可以提交表单并处理对我的 SQL 数据库的更新。当文本字段使用 UL 时，我从服务器收到 403 Forbidden 错误。

表单代码如下：

```
<form action="actions.php?action=2" method="POST">
<p>How We Met Story</p>
<textarea name="area1" cols="50" id="area1"><?php echo html_entity_decode($row_rsHowWeMet['howWeMet']); ?></textarea>
<input name="websiteID" type="hidden" value="<?php echo $_GET['websiteID'] ?>" />
<p><input id="partyEntry" type="submit" name="Submit" value="Save Changes" /></p>
</form> 
```

处理表单的代码如下：

```
$myMessage = htmlentities($_POST['area1']);

$sql2 = "UPDATE `tools_wedWebHowWeMet` SET `howWeMet` = '" . $myMessage . "' WHERE websiteID = '" . $_POST['websiteID'] . "'";

if (!mysql_query($sql2,$con))
{
echo "failed";
die('Error: ' . mysql_error());
} 
```

任何想法为什么会发生这种情况？我已经进行了一些搜索，但没有找到可靠的答案。StackOverflow 上有另一个线程有一个非常相似的问题，但没有答案。非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T01:58:58.957

假设 POST 数组中的差异实际上只是它是否有标签（您应该通过实际检查 POST 并确保它实际上是相同的来验证这一点），我猜这与软件防火墙（403 错误提示问题可能出在服务器级别而不是 PHP 级别 - 尽管您可能有一个 PHP 文件故意发送 403 标头）。检查您是否打开了[ModSecurity](http://www.modsecurity.org/documentation/quick-examples.html)或类似的东西。我怀疑您可能需要重新配置服务器的防火墙，因为它们可以配置为拒绝特定标签等（具体来说，检查`SecFilter`设置）

# git - 有没有办法告诉詹金斯在克隆 Git 存储库方面已经走了多远？

> ID：10809030
> 
> 赞同：5
> 
> 时间：2012-05-30T01:50:32.417
> 
> 标签：git, jenkins

我现在在 Jenkins 中运行了一个构建，我可以在控制台输出中看到的是：

```
Started by user anonymous
Building in workspace /var/lib/jenkins/workspace/Main
Checkout:Main / /var/lib/jenkins/workspace/Main - hudson.remoting.LocalChannel@820ea4
Using strategy: Default
Cloning the remote Git repository
Cloning repository origin 
```

我知道这可能是因为 Git 进程尚未刷新其输出流；但这令人沮丧，因为如果我`git clone`从*终端*运行 a ，那么我可以清楚地看到实时更新的百分比，告诉我命令距离完成有多近。

没关系，除了：

1.  我需要尽快关闭这台机器。
2.  这个特定的 repo 需要*很长时间*才能克隆（比如一个多小时）。
3.  因此，如果克隆达到 90%，我想让它完成。如果它更像是 50%，那么我只想杀死构建并在早上重新开始。

有谁知道是否有可能以某种方式获得我渴望的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:34:00.823

*   [GIT插件的源代码](https://github.com/jenkinsci/git-plugin/blob/master/src/main/java/hudson/plugins/git/GitAPI.java.)
*   [GIT 克隆标志](http://man.he.net/man1/git-clone)

搜索 clone 并查看它在哪里检查 git 版本以确定它是否通过了 --progress 标志。如果您的构建已经开始，那么您无能为力，但对于将来的参考，这可能会有所帮助。

```
--progress
       Progress status is reported on the standard error stream by default
       when it is attached to a terminal, unless -q is specified. This
       flag forces progress status even if the standard error stream is
       not directed to a terminal. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:20:24.477

我看到了类似的症状，我发现它是由 Jenkins 的 Git 插件 clone() 方法中的工作区递归删除引起的（参见下面的代码片段）。就我而言，我们有许多共享单个自定义工作区的作业，因此删除调用需要数小时才能完成。删除自定义工作区后，克隆操作成功完成。

从[https://github.com/jenkinsci/git-plugin/blob/master/src/main/java/hudson/plugins/git/GitAPI.java](https://github.com/jenkinsci/git-plugin/blob/master/src/main/java/hudson/plugins/git/GitAPI.java)：

```
final String source = remoteConfig.getURIs().get(0).toPrivateString();

listener.getLogger().println("Cloning repository " + source);
final int[] gitVer = getGitVersion();

try {
    workspace.deleteRecursive();  // This line was taking forever
} catch (Exception e) {
    e.printStackTrace(listener.error("Failed to clean the workspace"));
    throw new GitException("Failed to delete workspace", e);
} 
```

（这应该是对上一个答案的评论，但我还没有代表发表评论。）

# iphone - iPhone通讯录中的联系人排序

> ID：10809034
> 
> 赞同：0
> 
> 时间：2012-05-30T01:51:12.927
> 
> 标签：iphone, objective-c, ios, ipad, abaddressbook

我有一个使用通讯录的应用程序。我正在尝试使用从地址簿中显示排序的姓名列表

```
sortedArray = [arr_contactList sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)]; 
```

然后当用户选择其中一个联系人时，会显示其电话号码。

我能够对 iPhone 通讯簿电话号码进行排序。

我使用以下对电话号码进行排序：

```
ABRecordRef source = ABAddressBookCopyDefaultSource(ab);
NSArray *thePeople = (NSArray*)ABAddressBookCopyArrayOfAllPeopleInSourceWithSortOrdering(ab, source, kABPersonSortByFirstName);

NSString *name;
for (id person in thePeople)
{
    name = (NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty);

    ABMultiValueRef phones = ABRecordCopyValue(person, kABPersonPhoneProperty);

    for(CFIndex j = 0; j < ABMultiValueGetCount(phones); j++)
    {  
        NSString* num = (NSString*)ABMultiValueCopyValueAtIndex(phones, j);

        CFStringRef locLabel1 = ABMultiValueCopyLabelAtIndex(phones, j);

        NSString *phoneLabel1 =(NSString*) ABAddressBookCopyLocalizedLabel(locLabel1);

        [tempPhoneArray addObject:num];        
    }       
} 
```

但我的实际问题是，我的名称数组中的联系人以列表顶部的特殊字符开头，当我选择电话号码时，排序的联系人列表以字母 A 开头。所以我得到了错误的电话号码。

我如何匹配这两种排序 - 名称排序和数字排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T02:16:29.567

在此示例中，您将创建 27 个数组，每个字母 1 个，但该概念可应用于特殊字符与大写/小写的任何检查。希望这可以帮助。

```
const int capacity = 27;    
NSMutableArray *subArrays = [NSMutableArray array];

//Prepopulate the subArray with 26 empty arrays
for(int i = 0; i < capacity; i++)
    [subArrays addObject:[NSMutableArray array]];
char currFirstLetter = 'a';

for(int i = 0; i < sortedArray.count; i++)
{
    NSString *currString = [[sortedArray objectAtIndex:i] lowercaseString];

    NSLog(@"%@", currString);
    NSLog(@"%c", [currString characterAtIndex:0]);
    NSLog(@"%c", currFirstLetter);

    if([currString characterAtIndex:0] == currFirstLetter)
    {
        //65 is the position of 'a' in the ascii table, so when we subtract 97, it correlates to 0 in our array.
        [[subArrays objectAtIndex:currFirstLetter-97] addObject:[sortedArray objectAtIndex:i]];
    }
    else if([currString characterAtIndex:0] < 65 || ([currString characterAtIndex:0] > 90 && [currString characterAtIndex:0] < 97) || [currString characterAtIndex:0] > 122)
    {
        //If it's a symbol (65-90 are uppercase, 97-122 are lowercase)
        [[subArrays objectAtIndex:26] addObject:[sortedArray objectAtIndex:i]];
        //Increment the letter we're looking for, but decrement the count to try it again with the next letter
    }
    else
    {
        currFirstLetter++;
        i--;
    }
} 
```

# xcode - Xcode 异常：“集合 <__NSArrayM: 0xb1a2970> 在被枚举时发生了变异”与可变数组

> ID：10809038
> 
> 赞同：0
> 
> 时间：2012-05-30T01:51:43.930
> 
> 标签：xcode, exception, nsmutablearray, sigabrt

我有三个类的问题。第一类称为`Player`。这个类`NSMutableArray`里面有一个叫做`units`. 该数组由类的对象组成`Unit`。反过来，这个类有一个`NSMutableArray`被调用的`bullets`. 它是这样工作的：

在某个时刻，该类`Player`（它可能只是`ViewController`相反）将一个对象添加到`units`. 然后，当初始化 的实例时`Unit`，由于上述原因，它会创建一个 NSTimer 负责每秒创建子弹。

问题是，在这中间的某个地方崩溃了`SIGABRT`，告诉我有一个例外，因为：`Collection <__NSArrayM: 0xb1a2970> was mutated while being enumerated.`另外，我拿走了产生子弹的线，它停止崩溃，证明这是问题所在。这意味着什么！

这是一些可能有效的可执行代码：

ViewController.h（而不是播放器）

```
@interface ViewController : UIViewController
{
    NSMutableArray *units;
    NSTimer *updateTimer;
}
-(void)Update; 
```

视图控制器.m

```
@implementation ViewController
//methods...

- (void)viewDidLoad
{
    //more default code

    //Initialized array and adds one object with the default constructor for simplicity
    units = [[NSMutableArray alloc] initWithObjects:[[Unit alloc] init], nil]
}

-(void)Update
{
    for(Unit *unit in units)
    {
        [unit Update];
        if(unit.deleteFromList)
            [units removeObject:unit];   
    }
}
//More methods
@end 
```

单位.h

```
@interface Unit : NSObject
{
    NSMutableArray *bullets;
    NSTimer *bulletTimer;
    boolean deleteFromList;
}

@property(readonly, assign)deleteFromList;

-(void)Fire;

-(void)Update; 
```

单位.m

```
@implementation Unit

@synthesize deleteFromList;

-(id)init
{
    if(self)
    {
        bullets = [[NSMutableArray alloc] init];
        bulletTimer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(fire) userInfo:NULL repeats:true];
        deleteFromList = false;
    }

    return self;
}

-(void)Fire
{
    [bullets addObject:[[Bullet alloc] init]];
}

-(void)Update
{
    for(Bullet *bullet in bullets)
    {
        [bullet Update];
        if(bullet.deleteFromList)
            [bullets removeObject:bullet];
    }

    if(certainCondition)
        deleteFromList = true;
} 
```

项目符号类将被省略，因为内容与发生的事情无关。此外，所有的类和构造函数都被缩短了，因为其余的对于这个例子是无用的

编辑：

我忘记添加的另一件事是，计时器是在我将要添加的更新方法中的 NSMutableArray 单元的枚举中创建的。我还向 Unit 和 Bullet 添加了一个变量，命令它删除。子弹更新改变了位置，也改变了 deleteFromList 变量

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T02:08:21.080

您不能在`NSMutableArray`for 循环或枚举时删除任何项目。

文档：[在枚举可变集合时修改它是不安全的。某些枚举器当前可能允许枚举已修改的集合，但不保证将来会支持此行为。](https://developer.apple.com/library/ios/#documentation/cocoa/reference/foundation/Classes/NSEnumerator_Class/Reference/Reference.html)

```
for(Bullet *bullet in bullets)
{
    [bullet Update];
    if(bullet.deleteFromList)
        [bullets removeObject:bullet];
} 
```

到

```
NSMutableArray *toRemove = [NSMutableArray array];
for(Bullet *bullet in bullets)
{
    [bullet Update];
    if(bullet.deleteFromList)
        [toRemove addObject:bullet];
}
[bullets removeObjectsInArray:toRemove]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T02:41:03.093

有两种简单的方法 - 一种是创建要删除的对象数组，另一种是迭代原始方式的副本。第二种技术可能更容易阅读。

### 方法一

```
NSMutableArray *toRemove = [NSMutableArray array];
for (Bullet *bullet in bullets)
{
    [bullet Update];
    if (bullet.deleteFromList)
    {
        [toRemove addObject:bullet];
    }
}
[bullets removeObjectsInArray:toRemove]; 
```

### 方法二

```
for (Bullet *bullet in [bullets copy])
{
    [bullet Update];
    if (bullet.deleteFromList)
    {
        [bullets removeObject:bullet];
    }
} 
```

第一种方法稍微冗长一些，但不会复制原始数组。如果原始数组非常大，并且出于性能/内存原因不想复制它，第一种方法是最好的。如果没关系（99% 的时间），我更喜欢第二种方法。

* * *

顺便说一句，您不应该在 Objective-C 中以大写字母开头方法名称，除非方法名称以缩写开头，例如`URL`，因此`[bullet Update]`应该真正重命名为`[bullet update]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T02:18:29.703

或者

```
NSIndexSet *indexSet = [units indexesOfObjectsPassingTest:^BOOL(Unit *udit, NSUInteger idx, BOOL *stop) {
    [unit Update];
    return unit.deleteFromList;
}];

[units removeObjectsAtIndexes:indexSet]; 
```

# twitter - 收集大量用户的关注者/朋友 ID - Twitter4j

> ID：10809040
> 
> 赞同：1
> 
> 时间：2012-05-30T01:52:01.077
> 
> 标签：twitter, social-networking, twitter4j

我正在研究一个分析社交网络中的关闭模式的研究项目。我的部分要求是收集受审查的数千名用户的关注者和关注者 ID。

我遇到了速率限制超过 350 个请求/小时的问题。只有 4-5 个请求，我的限制就超过了 - 即，当我收集的关注者数量超过 350 标记时。即，如果我有 7 个成员，每个成员有 50 个关注者，那么当我收集只有 7 个成员的关注者详细信息时，我的比率超过了。（7*50 = 350）。

我在这里在 stackoverflow 中找到了一个相关问题 -[使用 Twitter4j 获取关注者列表的最有效方法是什么？](https://stackoverflow.com/questions/8659209/what-is-the-most-effective-way-to-get-a-list-of-followers-using-twitter4j)

提到的解决方案是使用 lookupUsers(long[] ids) 方法，该方法将返回用户对象列表...但我在 API 中找不到特定“用户”对象的朋友/关注者的屏幕名称. 我在这里遗漏了什么.. 有没有办法有效地收集成千上万用户的朋友/追随者？

（现在，我正在使用标准代码 - Oauth 身份验证（达到 350 个请求/小时），然后调用 twitter.getFollowersIDs）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:18:02.217

使用有限数量的 API 调用来执行此操作相当简单。

它可以通过**两个**API 调用来完成。

假设你想[吸引我所有的追随者](https://dev.twitter.com/docs/api/1/get/followers/ids)

```
https://api.twitter.com/1/followers/ids.json?screen_name=edent 
```

这将返回多达 5,000 个用户 ID。

您**不需要 5,000 次调用即可查找它们！**

您只需将这些 ID 发布给[用户/查找](https://dev.twitter.com/docs/api/1/get/users/lookup)

然后，您将取回*所有*关注我的用户的*完整个人资料*- 包括屏幕名称。

# ruby-on-rails - 在 Rails 3 中使用 accept_nested_attributes_for 保存新记录

> ID：10809042
> 
> 赞同：2
> 
> 时间：2012-05-30T01:52:35.833
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我如何使用 Accept_nested_attributes_for 在 Rails 中保存多个新的相关对象？目前它只允许我保存一条新记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T02:42:23.490

您可以将其作为哈希数组传递，例如

```
Model.new(:nested_model_attributes=>{[0]=>{:param=>value},[1]=>{:param=>value}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T13:32:02.823

这是另一个例子。如果我有许多兄弟姐妹的录取模型，并且我有一个表格，我会在其中获取超过 1 个兄弟姐妹的详细信息。然后在控制器中我需要编写以下代码。

```
def new
    @admission = Admission.new()
    3.times { @admission.siblings.build }
end 
```

以下将是您的页面代码。

```
<%= form_for(@admission) do |f| %>
# fields of admission form
  <%= f.fields_for :siblings do |builder| %>
   # fields for siblings form
  <% end %>
<%= f.submit %> 
```

以下将是您的型号代码。

```
class Admission < ActiveRecord::Base
    has_many :siblings, :dependent => :destroy
    accepts_nested_attributes_for :siblings
end 
```

# asp.net-mvc-3 - 如何将新的元数据类添加到 MVC 项目？

> ID：10809044
> 
> 赞同：1
> 
> 时间：2012-05-30T01:53:41.323
> 
> 标签：asp.net-mvc-3

我正在尝试使用 EF 4.3 将 Metadata 部分类添加到现有 MVC，但我不知道在哪里添加该类。我将通过 DBFirstMVC 教程，它有`Blogs`,`Posts`和`Comments`. 我想为`Blog`类添加一些验证，在研究了如何做之后，我发现我应该添加一个新的 Partial Class`Blog`来装饰它 `MetadataType(typeof(BlogMetaData))]`

它应该在同一个命名空间中，`Blog`但是当我尝试将一个类添加到 Model 文件夹时，我得到一个弹出窗口，说它已经存在我想要覆盖它。如果我说不，我就无法创造它。元数据类的物理位置在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T03:06:12.083

您可以创建一个元数据文件夹并将文件放入其中，但请确保您保持相同的命名空间。位置并不重要。您实际上可以将文件命名为 BlogMetadata 并在其中包含您的部分声明和元数据类 - 有些人也选择这种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:54:28.643

好的，想通了。由于我仍在学习 MVC，我一定是前段时间从 DbContext 类中删除了构造函数，我想当我首先将它视为数据库时，这使得该项目成为 Code First 项目。当我回去观看 Julie Lermans的[视频](http://msdn.microsoft.com/en-us/data/gg702905)时，我在她的视频中看到了构造函数并将其添加到我的视频中，现在它工作得很好。这正是我删除的内容：

```
public DBFirstMVCContext()
        : base("name=BlogDataEntities")
    {
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        throw new UnintentionalCodeFirstException();
    } 
```

# javascript - 表单“提交”按钮文本（和宽度/高度/值）在按键时消失或更改 btn 值

> ID：10809048
> 
> 赞同：0
> 
> 时间：2012-05-30T01:54:17.443
> 
> 标签：javascript, jquery, html, forms

所以我遇到的问题是，长篇大论，我正在构建一个带有验证等的表单，没什么特别的，但是当单击“提交”按钮时，发生了一些我一生都无法解决的事情，弄清楚为什么。

最初，这个简单的 SUBMIT 按钮的 html 部分是这样的：

```
 <input type="submit" id="submit" value="Submit"/> 
```

在那个按钮上点击，其中一件事情发生了。

1.  按钮变得非常小，在幕后（萤火虫等）里面的文字消失了，在萤火虫检查时，代码看起来像这样

    **`<input type="submit" id="submit" value>`**

它完全去除了该表单元素属性的值部分。

或者

2.提交按钮“值”成为我的错误消息之一。例如，你会看到类似

```
<input type="submit" id="submit" value="oops, you forgot something"/> 
```

当用户忘记填写字段时，这是我的错误消息之一。

或者

1.  在Firefox上，即使在新页面加载/重新加载时，在该按钮上单击鼠标右键，当我右键单击它以选择“查看源代码”或“使用Fbug检查”时，该按钮变为绿色......相同正确满足参数时字段获得的绿色。

我已经停止搞砸了，因为这些很奇怪，所以我希望有人能帮我解决这个问题。到目前为止，它很糟糕。哈哈

这是js：

```
<script>

$('document').ready(function(e) {

//FORM VARS 
var firstName = $('#form-name');
var formEmail = $('#form-email');
var formSbj = $('#form-subj');
var formMssg = $('#form-mssg');
var mainF = $('#spForm');
var box = $("#box");
var addem = $('#addem');
var addemR = 8;
var formSubBtn = $('#submit');
var formFields = $('#spForm :input');

//FORM ERROR MESSAGES
var error_MK = 'oops, you forgot something';
var error_isntAnum = 'answer must be numerical please';
var error_numAddition = 'So whats 5 + 3 again???';
var finalCheck = false;
var pageErrorDiv = $('#gen_error');

//this one fires on click
function clearField(){
    if($(this).val() == this.defaultValue || $(this).val() == error_MK || $(this).val() == error_isntAnum || 
    $(this).val() == error_numAddition){
        this.value = '';
        //use this as a workaround for the disappearing "submit" text -->   formSubBtn.val('Submit');
    }
}
//this one fires on blur
function checkVals(){
    if($(this).val()==""){
        $(this).css("background-color","red");
        $(this).css("color","white");   
        $(this).val(error_MK);//error mssg

    } else {
        $(this).css("background-color","green");
        $(this).css("color","white");   
    }

}

//this one checks to see if the person can add lol...make sure its not a SPAM robot.
function checkAddem(){
    if(addem.val()== 'oops, you forgot something' || addem.val()=='AND THE TOTAL IS?'){
        addem.css('background-color','red');
        addem.css('color','white');
        addem.val(error_MK);    //error mssg
    } else if(isNaN(addem.val())){
        addem.css('background-color','red');
        addem.css('color','white');
        addem.val(error_isntAnum);//error mssg  
    } else if(addem.val() != addemR){
        addem.css('background-color','red');
        addem.css('color','white');
        addem.val(error_numAddition);//error mssg   
    }
}

formFields.click(clearField);
formFields.blur(checkVals);
addem.blur( checkAddem );

//FINAL CHECK b4 form submittal.
formSubBtn.bind('click', function(){

    //on click double check all fields
    if( firstName.val()=="" || firstName.val()=="ENTER YOUR NAME HERE" ||  firstName.val()== error_MK ||
    formEmail.val()=="" || formEmail.val()== error_MK || formEmail.val()=="ENTER YOUR EMAIL HERE" ||
    formSbj.val()=="" || formSbj.val()== error_MK || formSbj.val()=="SO WHAT DO YOU WANT TO CHAT ABOUT?" ||
    formMssg.val()=="" || formMssg.val()== error_MK || formMssg.val()=="ENTER YOUR MESSAGE HERE" ||
    addem.val() != addemR){
        pageErrorDiv.text("Information entered either no good or blah blah blah");
        return false;
    }else{

        return true;    
    }

});

});
</script> 
```

哦，附：所以你可以看到发生了什么，这是我的测试链接。

[http://somdowprod.net/4testing/spFormDev/spContForm](http://somdowprod.net/4testing/spFormDev/spContForm)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T01:57:50.383

听起来您的提交按钮正在被验证，这是有道理的，因为您选择它作为输入之一。代替

```
var formFields = $('#spForm :input'); 
```

尝试这个：

```
var formFields = $('#spForm :input').not('#submit'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T02:01:41.597

我只是快速浏览了一下，但这可能与它有关吗？

```
formFields.blur(checkVals); 
```

我猜 formFields 包含提交按钮，当您单击它时，提交按钮不会返回值，因此它注册了 checkVals 函数，其中包括：

```
$(this).val(error_MK);//error mssg 
```

这就是为什么您可能会收到错误消息的原因`oops, you forgot something`。

只是我的2美分...

# javascript - 事件监听器，定义 jQuery 时提醒

> ID：10809049
> 
> 赞同：1
> 
> 时间：2012-05-30T01:54:18.053
> 
> 标签：javascript, jquery

如何在 jQuery 加载并完全可用后创建警报？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T01:55:04.057

```
$(function(){
    alert("jQuery + DOM loaded.");
}); 
```

^(* *（jQuery 包含在 . 中后立即可用`<script>`。）*)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T02:00:50.623

如果您想知道`script`包含 jQuery 的元素何时完成加载...

```
document.addEventListener("load", function(event) {
    if (typeof jQuery == "function") {
        // jQuery is available.
    }
}); 
```

`script`在您的任何元素之前附加此事件侦听器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T02:05:31.253

我将向你展示如何做你想做的事，然后告诉你我的想法：

```
(function checkJquery() {
  if (typeof(jQuery) == 'undefined') {
    setTimeout(checkJquery, 500);
  }
  else {
    alert('jQuery is loaded.');
  }
})(); 
```

通常，当您使用 jQuery 时，您会将其包含`<script>`在`<head>`. 所有此类脚本都按照它们定义的顺序加载，因此如果您先加载它，它将可用于所有后续脚本。因此，您永远不需要检查它。

如果您发现自己在您的网站上使用了很多 javascript 功能，并且想确保检查所有模块依赖项，我建议您查看[RequireJS](http://www.requirejs.org)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T02:03:16.893

如果你还没有开始使用萤火虫。它非常有用。在 NET 选项卡中，您可以看到所有正在加载的文件、http 请求等所有内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T02:09:47.850

浏览器在解析文档时按照找到它的顺序执行 JS，包括外部脚本中的 JS。因此 jQuery 将在`<script>`包含它的元素之后立即加载并“完全可用”，您可以在该元素之后立即发出警报`<script>`：

```
<script type="text/javascript" src="jquery.js"></script>
<script>
   if (jQuery)
      alert("jQuery is now loaded");
</script> 
```

我已经包含了该`if (jQuery)`部分，因为如果 jquery.js 的路径不正确或出现其他问题以阻止文件加载，那么（显然）jQuery 将不可用。但在正常情况下，该`if`测试会成功。

如果您想实际操作页面上的 DOM 元素，那么您需要*在*这些元素之后、jQuery document.ready 处理程序或 onload 处理程序中包含执行此操作的脚本：

```
<script>
   $(document).ready(function() {
       alert("jQuery is loaded, and the DOM is ready too.");
   });
</script> 
```

# asp.net-mvc-3 - 从 IIS 日志中提取不同的 restful MVC 路由

> ID：10809056
> 
> 赞同：3
> 
> 时间：2012-05-30T01:55:06.587
> 
> 标签：asp.net-mvc-3, rest, fubumvc, iis-logs

我的商店在 IIS 7 上使用 MVC3/FUBU。我最近将一些东西投入生产，我想使用日志解析器从 IIS 日志中收集指标。我以前做过很多次，但是因为 MVC3 路由的形式是 /api/person//address/，所以日志将 /api/person/123/address/456 保存在 uritem 列中。

有人对如何从 IIS 日志中获取有关特定路由的数据有任何想法吗？

例如：像这样记录：

```
cs-uri-stem
/api/person/123/address/456
/api/person/121/address/33
/api/person/1555/address/5555 
```

输出如：总点击数 = 3

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T19:55:05.020

好的，我最终处理这个问题的方法是创建一个 HttpModule，它将从 HttpContext 中提取路由模式并作为 URL_PATTERN 放入服务器变量中。一旦它在 server_variables IIS 高级日志记录可以得到它并保存它。如果当前请求没有路由，它将只使用 url 的正常本地部分（因此它将匹配日志中的 cs-uri-stem）。

现在 sql/log 解析查询： select url_pattern,count(url_pattern) from (yourlogs) where timestamp between (start/end) group by url_pattern order by count(url_pattern) desc 将返回我的每个端点的命中数应用程序。

这显然可以在 fubu 行为中完成，但我们有一堆经典的 asp 和 MVC3 运行（我知道我知道......），这将处理所有这些。此外，您显然可以使用 RaiseTraceEvent 从模块中“发布”一个字段，然后 IIS 高级日志记录可以获取该字段，但它让我很想弄清楚它，所以我只是使用我所拥有的。

我已经在所有地方发布了这个问题，引用了 fubu 和 MVC3，但我几乎没有兴趣，这真的让我感到惊讶。如果您无法轻松确定正在使用的路线，人们如何在他们的日志中查找信息。

[https://gist.github.com/2854760](https://gist.github.com/2854760)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T02:17:23.847

您可以使用 Notepad++ 的正则表达式搜索功能。[这篇](http://www.gjbenterprises.com/tips/notepad-a-guide-to-using-regular-expressions-and-extended-search-mode)文章可能会有所帮助。

# cocoa - 更改 NSSearchField 中搜索按钮单元格的图像

> ID：10809057
> 
> 赞同：0
> 
> 时间：2012-05-30T01:55:14.057
> 
> 标签：cocoa, nstoolbar, nssearchfield

我有一个`NSToolbar`包含一个`NSSearchField`.

我已将搜索按钮单元格 (in `awakeFromNib`) 的图像更改为更准确地描述我在做什么的图像。

不幸的是，如果用户自定义工具栏，则会恢复默认图像。

我该如何 a) 阻止自定义，但仍允许用户选择图标和/或文本 b) 检测更改，以便我可以恢复所需的图标 c) 更改默认图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:06:53.640

也许 b

使用 NSToolbar Delegate 并实现

```
- (NSToolbarItem *) toolbar:(NSToolbar *)toolbar
      itemForItemIdentifier:(NSString *)itemIdentifier
  willBeInsertedIntoToolbar:(BOOL)flag 
```

在那里你可以归还你的自定义项目。

# android - 如何在android上获取EditText的背景颜色

> ID：10809058
> 
> 赞同：1
> 
> 时间：2012-05-30T01:55:17.047
> 
> 标签：android, android-edittext, drawable

我想获取EditText的颜色，可以通过setBackgroundColor设置，但是没有getBackgroundColor函数

我找到了这个

```
EditText edtxt;
edtxt.setBackgroundColor(Color.GREEN);
PaintDrawable drawable;
Log.d(TAG,"1");
drawable = (PaintDrawable)edtxt.getBackground();
if(drawable.getPaint().getColor()==(int)Color.GREEN).........
Log.d(TAG,"2"); 
```

但它不工作和崩溃

```
05-29 19:20:27.526: E/AndroidRuntime(20255): Caused by: java.lang.ClassCastException: android.graphics.drawable.StateListDrawable cannot be cast to android.graphics.drawable.PaintDrawable 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T03:34:20.103

这应该适用于 API 级别 11 及更高级别

```
ColorDrawable drawable = (ColorDrawable)edtxt.getBackground();
if(drawable.getColor()==(int)Color.GREEN)
System.out.println("It's Green"); 
```

如果您希望它在早期的 API 上使用，我建议您使用自定义`EditText`并覆盖该`setBackgroundColor(int color)`方法。

```
public class NewEditText extends EditText {
private int color;
public NewEditText(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
}

public NewEditText(Context context, AttributeSet attrs) {
    super(context, attrs);
    // TODO Auto-generated constructor stub
}

public NewEditText(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    // TODO Auto-generated constructor stub
}   

@Override
public void setBackgroundColor(int color) {
    // TODO Auto-generated method stub
    this.color=color;
    super.setBackgroundColor(color);
}

public int getBackgroundColor() {

    return color;
}
} 
```

现在在布局中使用：

```
<com.aneesh.mypackage.NewEditText
    android:layout_width="fill_parent"
    android:id="@+id/customview"
    android:layout_height="wrap_content"/> 
```

并且您的活动代码将更改为

```
NewEditText custView = (NewEditText)findViewById(R.id.customview);
custView.setBackgroundColor(Color.GREEN);
if(custView.getBackgroundColor()==(int)Color.GREEN)
  System.out.println("It's green"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T03:24:40.027

如果您在运行时设置颜色，最好保存某种标志（例如布尔值）以了解编辑文本的背景颜色。

# evolutionary-algorithm - 自适应与非自适应系统

> ID：10809062
> 
> 赞同：-1
> 
> 时间：2012-05-30T01:55:50.013
> 
> 标签：evolutionary-algorithm

假设有一个网站使用动态技术生成页面：ASP、JSP 等。

在非自适应网站中，我可能有类似if条件1的代码，然后生成页面A。如果条件2，生成页面B，依此类推。

在自适应系统中，类似的逻辑是什么？是否通过评估上下文、用户请求等（从某种意义上说，如果条件 1），解决方案是适应策略应该生成页面 A 以确保提供正确页面的目标是一致的，这是否正确？

如果您能帮助我了解差异/相似之处，我将不胜感激。黑克

PS我正在阅读有关自适应系统的信息，只需要指出这不是家庭作业问题:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:58:44.370

[您可以在IBM 站点上](http://www.research.ibm.com/autonomic/)的[自主计算](http://en.wikipedia.org/wiki/Autonomic_computing)中阅读更多关于自适应系统的信息。

> 愿景：系统根据管理员的目标进行自我管理。新组件的集成就像新细胞在人体中建立起来一样轻松。这些想法不是科幻小说，而是创建自我管理计算系统的重大挑战的元素。

# jasper-reports - JasperReports、子报表行高同步

> ID：10809064
> 
> 赞同：0
> 
> 时间：2012-05-30T01:56:06.127
> 
> 标签：jasper-reports, ireport, subreport

我有 2 个子报告，每个报告都包含将要成为结果表的一列的信息。由于有些条目很长，我给两个子报表的行设置了相同的通用高度大小，可以很好地应付匆忙，但现在它看起来很丑，所以他们希望我改变它。所以我想知道是否有办法协调两个子报表，以便给定条目的单元格最高的那个决定所有行的宽度，并将该信息发送到另一个子报表以调整同一条目的大小，就像它只会在一个子报表中的常规表上发生一样。如果这是可能的，还是我必须使用 iText 来实现它？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T02:34:31.240

我对 jasper 报告进行了很多工作，对此我进行了很多思考，但我无法给出如何让子报告传达部分高度的答案。我已经编写了一个关于使用 Java 类来定义可以设置和获取的静态高度的答案，但随后意识到除了高度的简单数值之外，您无法指定任何其他值，即无处可调用获取高度的方法。

因此，我有两个可能的建议，根据您报告的实施细节，它们可能有效，也可能无效。

第一个建议是尽可能使用单个报告，或者在两个子报告下方至少使用一个“底行”。

如果这不起作用，那么您可以尝试对两个子报表部分使用最小高度值，但使用“相对于最高对象”的拉伸类型。那么，虽然它们的高度可能不一样，但至少它们不会太大。再次取决于细节，这可能会完成您所需要的。

让我知道这是否有效，也许我可以想到别的。

# c# - 使用 EF 4.3 更新子集合 - 在 DB 中丢失关联

> ID：10809065
> 
> 赞同：0
> 
> 时间：2012-05-30T01:56:07.513
> 
> 标签：c#, entity-framework

这让我发疯了。我不确定还能尝试什么。这是我使用 EF 4.3 更新另一个对象中的对象列表的最新尝试。

该场景是用户向其 Tasks 属性中已有一个任务的应用程序添加了一个新任务。应用程序未附加到数据库上下文，因为它是在先前的逻辑/数据库调用中检索到的。这是类和属性：

```
public class Application : EntityBase
{
    public ObservableCollection<TaskBase> Tasks { // typical get/set code here }
} 
```

这是我更新列表的尝试。发生的情况是新任务被添加并且关联正确存在于数据库中。但是，未更改的第一个任务在数据库中删除了它的关联（它对应用程序的引用）。

**这是采用用户修改的应用程序的 Save() 方法：**

```
public void Save(Application newApp)
{
    Application appFromContext;

    appFromContext = this.Database.Applications
        .Include(x => x.Tasks)
        .Single(x => x.IdForEf == newApp.IdForEf);

    AddTasksToApp(newApp, appFromContext);
    this.Database.SaveChanges();
} 
```

**这显然是使用 EF 保存所必需的：**

```
private void AddTasksToApp(Application appNotAssociatedWithContext, Application appFromContext)
{
    List<TaskBase> originalTasks = appFromContext.Tasks.ToList();

    appFromContext.Tasks.Clear();

    foreach (TaskBase taskModified in appNotAssociatedWithContext.Tasks)
    {
        if (taskModified.IdForEf == 0)
        {
            appFromContext.Tasks.Add(taskModified);
        }
        else
        {
            TaskBase taskBase = originalTasks.Single(x => x.IdForEf == taskModified.IdForEf);  // Get original task
            this.Database.Entry(taskBase).CurrentValues.SetValues(taskModified);  // Update with new
        }
    }
} 
```

谁能明白为什么第一个任务会失去与数据库中的应用程序的关联？第一个任务通过上面代码中的 else 块。

接下来，我需要弄清楚如何删除一个或多个项目，但首先要做的是......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T02:29:55.810

经过不断的试验和错误，这似乎是有效的，包括删除任务。我想我会发布这个以防它帮助别人。我也希望有人告诉我，我让这变得比它应该的更复杂。在保存每个具有列表属性的对象时，这是一个繁琐且容易出错的代码。

```
private void AddTasksToApp(Application appNotAssociatedWithContext, Application appFromContext)
{
    foreach (TaskBase taskModified in appNotAssociatedWithContext.Tasks)
    {
        if (taskModified.IdForEf == 0)
        {
            appFromContext.Tasks.Add(taskModified);
        }
        else
        {
            TaskBase taskBase = appFromContext.Tasks.Single(x => x.IdForEf == taskModified.IdForEf);  // Get original task
            this.Database.Entry(taskBase).CurrentValues.SetValues(taskModified);  // Update with new
        }
    }

    // Delete tasks that no longer exist within the app.
    List<TaskBase> tasksToDelete = new List<TaskBase>();
    foreach (TaskBase originalTask in appFromContext.Tasks)
    {
        TaskBase task = appNotAssociatedWithContext.Tasks.Where(x => x.IdForEf == originalTask.IdForEf).FirstOrDefault();

        if (task == null)
        {                    
            tasksToDelete.Add(originalTask);
        }
    }

    foreach (TaskBase taskToDelete in tasksToDelete)
    {                
        appFromContext.Tasks.Remove(taskToDelete);
        this.Database.TaskBases.Remove(taskToDelete);
    }
} 
```

# iphone - AFNetworking + 缓存图像占位符

> ID：10809069
> 
> 赞同：1
> 
> 时间：2012-05-30T01:56:51.883
> 
> 标签：iphone, objective-c, ios5, afnetworking, nscache

简而言之，我正在寻找一种方法来使用以前缓存的图像作为我在 AFNetworking 的 UIImageView 类别中的占位符：

```
- (void)setImageWithURLRequest:(NSURLRequest *)urlRequest 
          placeholderImage:(UIImage *)placeholderImage 
                   success:(void (^)(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image))success
                   failure:(void (^)(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error))failure 
```

**示例用例**：

我有一个名为`Post`我从 API 响应中填充的模型：

```
@interface Post : NSObject
    @property ... NSString *smallImagePath;
    @property ... NSString *largeImagePath;
    @property ... NSString *description;       
@end 
```

我的第一个 ViewController 将为我的所有`Post`对象显示一个缩略图网格（通过 smallImagePath 属性检索）。点击缩略图会将您带到 DetailViewController，其中最终将显示大图像和描述。

由于我已经下载并缓存了小缩略图，我想在等待下载大图像时将其用作占位符。在这一点上，我不知道如何进入 AFImageCache，因为它不能公开访问。

我想到的一件事是将作为参数传递的 UIImage 存储在成功块中：

```
// add property to Post model
@property ... UIImage *smallImage;

success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {
    [self.post setSmallImage:image];
} 
```

然后我可以在下载大图像时直接使用该图像作为占位符。

我不确定通过保留对一堆 UIImage 的引用，这是否会对我的内存占用产生任何明显/负面影响。你能想出更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T06:22:38.207

最终实现了我最初的想法，即将图像作为属性存储在我的模型上。这样，当需要在加载较大图像时声明占位符时，我只需访问该属性。表现很棒。

# android - Android应用程序需要一个可旋转的圆圈。自定义对象或小部件？

> ID：10809070
> 
> 赞同：3
> 
> 时间：2012-05-30T01:57:00.217
> 
> 标签：android, widget, rotation

我需要为我的应用程序创建一个旋转并包含数据的圆圈。我应该为我的应用程序创建一个自定义对象还是应该制作一个应用程序内小部件？

在这个主题上，您如何在应用程序中引用小部件而不是 android 桌面的独立小部件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T04:44:39.863

这是一个可旋转的 LinearLayout，您可以将所有内容放入其中，如果您自定义它，您可以按度旋转它。使用 rotate() 方法旋转它并...

请享用！;)

```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Matrix;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.widget.LinearLayout;

public class RotateLinearLayout extends LinearLayout {

    private Matrix mForward = new Matrix();
    private Matrix mReverse = new Matrix();
    private float[] mTemp = new float[2];
    private float degree = 0;

    public RotateLinearLayout(Context context) {
        super(context);
    }

    public RotateLinearLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected void dispatchDraw(Canvas canvas) {

        try {
            if (degree == 0) {
                super.dispatchDraw(canvas);
                return;
            }
            canvas.rotate(degree, getWidth() / 2, getHeight() / 2);

            mForward = canvas.getMatrix();
            mForward.invert(mReverse);
            canvas.save();
            canvas.setMatrix(mForward); // This is the matrix we need to use for
                                        // proper positioning of touch events

            super.dispatchDraw(canvas);
            canvas.restore();
            invalidate();
        } catch (Exception e) {

        }

    }

    @Override
    public boolean dispatchTouchEvent(MotionEvent event) {
        if (degree == 0) {
            return super.dispatchTouchEvent(event);
        }
        // final float[] temp = mTemp;
        // temp[0] = event.getX();
        // temp[1] = event.getY();
        // mReverse.mapPoints(temp);
        // event.setLocation(temp[0], temp[1]);
        event.setLocation(getWidth() - event.getX(), getHeight() - event.getY());
        return super.dispatchTouchEvent(event);
    }

    public void rotate() {
        if (degree == 0) {
            degree = 180;
        } else {
            degree = 0;
        }
    }

} 
```

**更新：**

将此代码添加到您的 xml 布局中，并将您的视图（如 ImageView 或其他 LinearLayout）放入其中：

```
<org.mabna.order.ui.RotateLinearLayout  android:id="@+id/llParent"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center"
    android:gravity="center"
    android:orientation="horizontal" >

<ImageView
                        android:id="@+id/myImage"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_margin="5dip"
                        android:src="@drawable/main01" />

</org.mabna.order.ui.RotateLinearLayout> 
```

在 onCreate() 方法中：

```
llParent = (RotateLinearLayout) this.findViewById(R.id.llParent); 
```

在按钮的 onClickListener 中：

```
protected void btnRotate_onClick() {
        llParent.rotate();
    } 
```

**更新2：**

您可以在实际旋转之前使用动画进行旋转 ( `llParent.rotate();`)。它需要像 rotate_dialog.xml 这样的动画布局：

```
<?xml version="1.0" encoding="utf-8"?>

<rotate xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="1000" android:fromDegrees="-180" android:toDegrees="0"
    android:pivotX="50%" android:pivotY="50%" android:fillAfter="true" /> 
```

并在您的代码中：

```
protected void btnRotate_onClick() {
        // rotate 
        Animation rotateAnimation = AnimationUtils.loadAnimation(this,
                R.anim.rotate_dialog);
        llParent.startAnimation(rotateAnimation);
        llParent.rotate();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T04:13:21.397

有一种相当简单的方法可以从[`View`](http://developer.android.com/reference/android/view/View.html)类派生的自定义小部件制作旋转动画。创建视图并将其放置在布局中后，您可以调用`View.setAnimation(Animation)`or `View.startAnimation(Animation)`，在视图上提供 a[`RotateAnimation`](http://developer.android.com/reference/android/view/animation/RotateAnimation.html)来启动它。这是一个在 xml 中定义的旋转动画示例，可以使用`getResources().getAnimation(int)`.

```
<?xml version="1.0" encoding="utf-8"?>
<rotate xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromDegrees="float"
    android:toDegrees="float"
    android:pivotX="float"
    android:pivotY="float" /> 
```

# android - 关于自定义阵列适配器的几个问题

> ID：10809075
> 
> 赞同：0
> 
> 时间：2012-05-30T01:57:58.557
> 
> 标签：android, sqlite, android-arrayadapter

所以我在这里有点困惑......

我的代码从我的 sqlite 数据库中获取信息并填充一个列表，然后使用标准数组适配器显示该列表。我想要做的是让它在这个列表中，如果“完成”表行值为“是”，则行颜色为绿色

这是我正在使用的表的数据库结构：

```
 String CREATE_ACHIEVEMENTS_TABLE = "CREATE TABLE achievements ("
             + "id INTEGER PRIMARY KEY,"
             + "name VARCHAR,"
             + "type VARCHAR,"
             + "value VARCHAR,"
             + "completed VARCHAR"
             + ")"; 
```

这是我从数据库中获取列表的代码：

```
public ArrayList<String> getAchievements(Context context) {
    ArrayList<String> achievementList = new ArrayList<String>();
    String selectQuery = "SELECT * FROM achievements ORDER BY id asc";

    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    if (cursor != null) {
        if (cursor.moveToFirst()) {
            do {
                if (cursor.getString(4).equals("yes")) {
                    achievementList.add(cursor.getString(1)+" (completed)");
                }
                else {
                    achievementList.add(cursor.getString(1));
                }
            } while (cursor.moveToNext());
        }
    }
    else {
        achievementList.add(context.getResources().getString(R.string.na));
    }

    cursor.close();
    db.close();
    return achievementList;
} 
```

这是我的自定义阵列适配器：

```
public class AchievementAdapter extends ArrayAdapter<String> {
    private final Context context;
    private final String[] values;

    public AchievementAdapter(Context context, String[] values) {
        super(context, R.layout.achievements, values);
        this.context = context;
        this.values = values;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;

        if (row == null) {
            LayoutInflater inflater = (LayoutInflater)this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            row = inflater.inflate(R.layout.achievement_item, parent, false);
        }

        return row;
    }
} 
```

我真的不知道从这里去哪里。这是我的第一个 android 应用程序，我学到了很多东西，但我似乎无法弄清楚如何在自定义数组适配器方面实现这个简单的事情......我找到的所有教程都包含一堆我不想要的功能。如果列表项的“已完成”表值为“是”，我要做的就是将列表项的文本颜色设为绿色...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T02:21:31.773

首先，我建议使用 cursorAdapter 而不是 arrayAdapter。使用游标适配器，您将有一个指向数据库的指针，因此您可以从那里获取所有信息。

如果你这样做......你的适配器代码应该看起来像这样。

```
private class MyCursorAdapter extends CursorAdapter {

    public MyCursorAdapter(Context context, Cursor c) {
        super(context, c);
    }

    @Override
    public void bindView(View v, Context context, Cursor cursor) {
        if(cursor.getString(cursor.getColumnIndex("completed").equals("yes")){
            TextView tv = (TextView) v.findViewById(R.id.NAMEOFTEXTVIEW);
            tv.setTextColor(Color.GREEN);
        }
    }

    @Override
    public View newView(Context arg0, Cursor arg1, ViewGroup arg2) {
        LayoutInflater inflater = (LayoutInflater)this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        row = inflater.inflate(R.layout.achievement_item, parent, false);
        return row;
    }
} 
```

并且您使用以下命令创建适配器：

```
Cursor cursor = db.rawQuery(selectQuery, null);
mAdapter = new MyCursorAdapter(this, cursor); 
```

说了这么多......如果你想使用arrayAdapter并且只是改变textview，在getView中：

```
String item = (String) getItem(position);
if(item.contains("(completed)"){
    TextView tv = (TextView) row.findViewById(R.id.NAMEOFTEXTVIEW);
    tv.setTextColor(Color.GREEN);
} 
```

我应该注意，使用 cursorAdapter 你应该保持光标打开，并在 onStop 中关闭它（在 onRestart 中重新打开它）

# frontend - 使用border-radius具有不同半径的CSS3PIE元素角？

> ID：10809078
> 
> 赞同：0
> 
> 时间：2012-05-30T01:58:35.720
> 
> 标签：frontend, css, css3pie

我有一个元素，其中左上角和右下角的边框半径为 5，我正在尝试使其与 CSS3PIE 兼容。该文件指出

*仅支持简写版本；普通的border-top-left-radius 等属性不是。不过，速记语法确实支持每个角的不同半径。[关联](http://css3pie.com/documentation/supported-css3-features/)*

但是在示例中，它们恰好显示...

*边框半径：5px 10px 15px 20px；*

如何在 IE8 中显示具有不同半径的角的元素？

谢谢你。

```
a.navLink {
       -moz-border-radius: 5px 0 5px 0;
    -webkit-border-radius: 5px 0 5px 0;
            border-radius: 5px 0 5px 0;
    display: block;
    behavior: url('http://mydomain.com/css/PIE.htc');
    position:relative;
    z-index: 0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T12:42:49.923

添加`-pie-`前缀：

```
-pie-border-radius: 5px 0 5px 0; 
```

# data-binding - 同步来自不同视图模型的可观察对象的简单、干净的方法

> ID：10809085
> 
> 赞同：5
> 
> 时间：2012-05-30T01:59:38.590
> 
> 标签：data-binding, knockout.js, observer-pattern

假设我有两个视图模型，每个模型都有一个可观察的属性，代表不同但相似的数据。

```
function site1Model(username) {
    this.username = ko.observable(username);
    ....
}

function site2Model(username) = {
    this.username = ko.observable(username);
    ....
} 
```

这些视图模型是独立的，不一定相互链接，但在某些情况下，第三个视图模型会在它们之间创建链接。

```
function site3Model(username) = {
    this.site1 = new site1Model(username);
    this.site2 = new site2Model(username);
    // we now need to ensure that the usernames are kept the same between site1/2
    ...
} 
```

以下是我提出的一些选项。

1.  使用一个计算的 observable 读取一个并写入两个：

    ```
    site3Model.username = ko.computed({
        read: function() {
            return this.site1.username();    // assume they are always the same
        },
        write: function(value) {
            this.site1.username(value);
            this.site2.username(value);
        },
        owner: site3Model
    } 
    ```

    只要更改始终通过计算，这将使值保持同步。但是如果一个底层的 observable 被直接改变了，它就不会这样做。

2.  使用该`subscribe`方法相互更新：

    ```
    site3Model.site1.username.subscribe(function(value) {
        this.site2.username(value);
    }, site3Model);
    site3Model.site2.username.subscribe(function(value) {
        this.site1.username(value);
    }, site3Model); 
    ```

    只要值相同时可观察对象抑制通知，这就会起作用；否则你最终会陷入无限循环。您也可以更早地进行检查：`if (this.site1.username() !== value) this.site1.username(value);`这还有一个问题，即可观察对象必须简单（如果它们本身是可观察对象，它将无法正常工作`site1`）`site2`。

3.  用于`computed`进行订阅和更新：

    ```
    site3Model.username1Updater = ko.computed(function() {
        this.site1.username(this.site2.username());
    }, site3Model);
    site3Model.username2Updater = ko.computed(function() {
        this.site2.username(this.site1.username());
    }, site3Model); 
    ```

    这种格式允许我们拥有其他依赖项。例如，我们可以 make`site1`和`site2`observables 然后使用`this.site1().username(this.site2().username());`这种方法还需要检查相等性以避免无限循环。如果我们不能依赖 observable 来做到这一点，我们可以在计算中检查，但会在我们正在更新的 observable 上添加另一个依赖项（直到类似[`observable.peek`](https://github.com/SteveSanderson/knockout/pull/326)的东西可用）。这种方法也有一个缺点，就是最初运行一次更新代码来设置依赖关系（因为这就是`computed`工作方式）。

由于我觉得所有这些方法都有缺点，有没有另一种方法可以简单（少于 10 行代码）、高效（不运行不必要的代码或更新）和灵活（处理多个级别的 observables )?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T02:58:54.390

它并不完全是 10 行代码（尽管您可以根据自己的喜好对其进行精简），但对于这种情况，我在视图模型之间使用 pub/sub 消息。

这是我为它编写的一个小型库：[https ://github.com/rniemeyer/knockout-postbox](https://github.com/rniemeyer/knockout-postbox)

基本思想只是创建`ko.subscribable`和使用基于主题的订阅。该库将订阅扩展为添加`subscribeTo`和（发布`publishOn`和`syncWith`订阅主题）。这些方法将为可观察对象设置正确的订阅，以自动参与此消息传递并与主题保持同步。

现在您的视图模型不需要相互直接引用，并且可以通过 pubsub 系统进行通信。您可以在不破坏任何内容的情况下重构您的视图模型。

就像我说的那样，您可以将其精简到不到 10 行代码。该库只是添加了一些额外功能，例如能够取消订阅，能够控制发布实际发生的时间（equalityComparer），并且您可以指定一个转换以对传入的值运行。

随时发布任何反馈。

这是一个基本示例：http: [//jsfiddle.net/rniemeyer/mg3hj/](http://jsfiddle.net/rniemeyer/mg3hj/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T21:38:21.013

瑞安和约翰，谢谢你们的回答。不幸的是，我真的不想引入发布/订阅系统所需的全局命名系统。

瑞安，我同意这种`subscribe`方法可能是最好的。我已经组合了一组函数来处理订阅。我没有使用*扩展*，因为我还想处理可观察对象本身可能是动态的情况。这些函数接受可观察对象或返回可观察对象的函数。如果源 observable 是动态的，我将访问器函数调用包装在一个计算的 observable 中，以便拥有一个固定的 observable 来订阅。

```
function subscribeObservables(source, target, dontSetInitially) {
    var sourceObservable = ko.isObservable(source) 
            ? source 
            : ko.computed(function(){ return source()(); }),
        isTargetObservable = ko.isObservable(target),
        callback = function(value) {
            var targetObservable = isTargetObservable ? target : target(); 
            if (targetObservable() !== value)
                targetObservable(value);
        };
    if (!dontSetInitially)
        callback(sourceObservable());
    return sourceObservable.subscribe(callback);
}

function syncObservables(primary, secondary) {
    subscribeObservables(primary, secondary);
    subscribeObservables(secondary, primary, true);
} 
```

这大约是 20 行，所以我的少于 10 行的目标可能有点不合理。:-)

我修改了 Ryan 的邮箱示例来演示上述功能：http: [//jsfiddle.net/mbest/vcLFt/](http://jsfiddle.net/mbest/vcLFt/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T14:56:58.937

另一种选择是创建一个隔离的数据上下文来维护可观察的模型。视图模型都在数据上下文中查找它们的数据并引用相同的对象，因此当一个更新时，它们都会这样做。VM 依赖于数据上下文，但不依赖于其他 VM。我最近一直在这样做，而且效果很好。虽然，它比使用 pub/sub 复杂得多。

如果您想要简单的发布/订阅，您可以使用他提到的 Ryan Niemyer 的库或使用内置发布/订阅消息传递（基本上是信使或事件聚合器）的 amplify.js。两者都是轻量级且解耦的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-08T07:41:19.710

以防有人需要。另一种选择是创建参考对象/可观察对象。这也处理包含多个可观察对象的对象。

```
(function(){
    var subscriptions = [];

    ko.helper = {
        syncObject: function (topic, obj) {
            if(subscriptions[topic]){
                return subscriptions[topic];
            } else {
                return subscriptions[topic] = obj;
            }
        }
    };
})(); 
```

在您的视图模型中。

```
function site1Model(username) {
    this.username = syncObject('username', ko.observable());
    this.username(username);
    ....
}

function site2Model(username) = {
    this.username = syncObject('username', ko.observable());
    this.username(username);
    ....
} 
```

# mediawiki - 我们如何在 mediawiki 中获取语言模板

> ID：10809086
> 
> 赞同：0
> 
> 时间：2012-05-30T02:00:12.377
> 
> 标签：mediawiki

我正在学习 mediawiki，但我不知道如何翻译已创建和现有的页面。我在互联网上搜索了一些其他人告诉我，在您的页面中给出语法 {{languages}}，但我无法在 wiki 页面中获取语言模板，我不知道有人帮助我。如何翻译维基页面。请任何人为此逐步提供说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:24:31.847

我不确定我是否理解您的要求，但是您是否检查[了翻译扩展程序](http://www.mediawiki.org/wiki/Extension%3aTranslate)？

# javascript - 使用 javascript 禁用 AS2 嵌入的 FF 按键

> ID：10809089
> 
> 赞同：1
> 
> 时间：2012-05-30T02:00:32.707
> 
> 标签：javascript, firefox, actionscript-2, keyboard-events

对于 AS2，我需要允许用户按“Alt + N”以转到下一页，但问题是在 Windows 中，每当按下 Alt 时，它都会将焦点从 Flash 嵌入中移开，并且 keylistener 永远不会收到它。

研究做什么，似乎解决方案是使用Javascript禁用Firefox（它需要运行的浏览器）中的ALT键的默认操作。我不确定这是否是正确的道路，也不确定该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:32:54.067

好吧，您需要在闪存程序中使用外部接口；像这样的东西：

```
function keyCodeReceptor( code ){
  switch ( code ) {
    case 67:
      // go to the next page
      break;
    // add any other keys you need to bind to "Alt+key" combination
    default:
      break;
  }
}

flash.external.ExternalInterface.addCallback( 'doKey', null, keyCodeReceptor ); 
```

然后，您将需要在要嵌入对象的 HTML 中类似以下内容：

```
(function(){
  // Use the name or index of your embed here
  var flash = document.embeds[0];
  window.addEventListener( 'keydown', function( event ){
    if( event.altKey && event.keyCode == 67 ){
      event.preventDefault();
      event.preventCapture();
      event.preventBubble();
      flash.doKey(event.keyCode);
    }
  });
})(); 
```

此外，请确保嵌入的`allowScriptAccess`属性设置为`"always"`.

我只测试了这是 Firefox（最新，Mac 和 Windows），所以我完全不知道它是否适用于其他浏览器。希望这可以帮助！

# drupal-7 - Drupal 7实体查询生成器不提供返回值

> ID：10809090
> 
> 赞同：0
> 
> 时间：2012-05-30T02:00:48.263
> 
> 标签：drupal-7

```
$query = new EntityFieldQuery();
$query->entityCondition('entity_type', 'node')
->entityCondition('bundle', 'exclusion_lists');                 
$entity_type = 'node';
$result = $query->execute();

if (!empty($result[$entity_type])) {
$entities = entity_load($entity_type, array_keys($result[$entity_type]));
}

var_dump($entities->field_first_name); 
```

概念：本质上，我获取一个 CSV 文件，上传它，将内容读取到一个数组中，从 exclude_lists 内容类型中获取所有名字和姓氏，然后对其进行清理。我似乎无法从 $entities 变量中得到任何东西。我敢肯定这只是睡眠不足，等等，但我似乎无法弄清楚这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:38:52.547

相反，您可以`var_dump($entities)`通过变量查看数组的结构。那么可能您需要使用`field_get_items`来获取特定字段的值。

# proxy - 在 Eclipse RCP 中嵌入 Jetty

> ID：10809096
> 
> 赞同：1
> 
> 时间：2012-05-30T02:02:35.473
> 
> 标签：proxy, jetty, eclipse-rcp

我正在构建一个 RCP 应用程序，我需要在其中监视 http 流量并将其显示给用户。为此，我需要使用 Embeded Jetty 作为透明代理。

我尝试了所有方法，按照本[教程](http://blog.firdau.si/2009/11/06/embedding-jetty-server-in-eclipse-rcp/)进行操作，但一切都不起作用。我得到构建异常。我尝试将 Jetty jar 添加为外部依赖项，但仍然没有用。

将不胜感激任何帮助。另外请让我知道是否有任何其他方法可以在不使用码头的情况下实现这一目标。（我试过 Socks，但它与 RCP UI 线程冲突）谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:11:01.703

从广义上讲，您需要研究制作 eclipse 插件以及如何在 eclipse 插件项目中声明依赖项。您基本上要做的是仅在插件上下文中基于我们的码头嵌入式示例编写一些代码，因此当您的插件加载时它将触发码头服务器的启动。您将作为 osgi 包加载码头依赖项。请注意，在 juno 中，jetty 8.1.3 的大部分内容将默认可用。

它不是世界上最好的例子，但您可以查看我们的硬壳 wtp 插件以获得一些想法，至少关于如何使用 tycho 配置事物，也许还有一些组织位。

[http://git.eclipse.org/c/jetty/org.eclipse.jetty.wtp.git/](http://git.eclipse.org/c/jetty/org.eclipse.jetty.wtp.git/)

# php - 使用php填写下拉选择的值

> ID：10809102
> 
> 赞同：1
> 
> 时间：2012-05-30T02:03:27.170
> 
> 标签：php, mysql

我有一个下拉菜单，用户可以从中选择一个位置。这些是保存的设置，所以如果用户想要编辑这些设置，我希望之前保存的值填充列表。

位置及其 ID 是从名为 locations 的表中选择的，但是，只有位置保存在名为 userinfo 的表中。考虑到第一次在选择过程中使用了 id，我不确定如何再次填充选择列表。

这就是我现在可以简单地选择一个地点。我想用以前保存的位置填写。这是较大表单的一部分，因此没有表单标签。

```
<?
$sql = mysql_query("select locationsid,locationsName from locations"); 
$selection="";
while ($row=mysql_fetch_array($sql)){ 
   $id=$row["locationsid"]; 
   $locationName = $row["locationsName"]; 
   $selection.="<OPTION VALUE=\"$id\">".$locationName; 
}
?>
<!--select location - used for reach location -->
<h4>Nearest Location</h4>
<table>
<tr><td>Location:</td><td><select name ="location"><Option value="<? echo selection2; ?>">Choose Location<? echo $selection; ?></Select></td>
</table> 
```

我假设我必须查询数据库以获取保存的位置（在 userinfo 表中），然后从位置表中查找该位置的 ID。从这里开始，我不太确定如何将其填充到值选择字段中。

```
$locationLookup = mysql_query("select location from userinfo where userid = $userid");
$locationLookup = mysql_fetch_array($locationLookup);
$location = $locationLookup['location'];
$idlookup = mysql_query("select locationsID from locations where locationsName = '$location'");
$idlookup = mysql_fetch_array($locationid);
$idlookup = $locationid['locationsID']; 
```

那么，这会给我名称和 ID，我如何将其设置为选择列表中的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T02:18:02.357

得到后`$idlookup`：

```
$idlookup = $locationid['locationsID']; 
```

`while`在循环内使用它：

```
while ($row=mysql_fetch_array($sql)){ 
   $id=$row["locationsid"]; 
   $locationName = $row["locationsName"]; 
   $selected = ($id == $idlookup) ? 'selected="selected"' : '';
   $selection.="<OPTION " . $selected . " VALUE=\"$id\">".$locationName."</OPTION>";
} 
```

# xml - XSL 如果包含

> ID：10809103
> 
> 赞同：1
> 
> 时间：2012-05-30T02:03:31.553
> 
> 标签：xml, xslt

我正在研究一个 XSL 文件，如果相应的 XML 文件包含某个字符串，它将（除其他外）显示一个按钮。我似乎有一个问题，我让按钮一直显示（即使 XML 文件不包含我想要的值）或从不显示（即使 XML 文件确实包含值。XML 的部分我关心的文件是：

```
<sp_stList>
<sp_st>
<st_num>1234</st_num>
<feanme>FAKE</feanme>
<featyp>ST</featyp>
<dirsuf></dirsuf>
<dirpre></dirpre>
<lv_apt></lv_apt>
<mun>VAN</mun>
<msgs>
<msg filename="File.pdf">d:\folder1\fild.pdf</msg>
</msgs>
<spst_poly>0</spst_poly>
<mes_switch>X</mes_switch>
<cdts>20120103161202PS</cdts>
</sp_st>
</sp_stList> 
```

应该发生的是，当`<mes_switch>`包含 X 时，应该显示按钮。如果它是空白的或其中有另一个字符，那么它不应该显示该按钮。

我试过的代码是：

```
<a name="Info"></a>
    <xsl:if "contains(sp_stList/sp_st/mes_switch, 'X'))">
        <a href="#SpSt" style="color:orange" t:id="Spec_Sit_hdr">
            <img border="0" src="./file.jpg"></img>
        </a>
    </xsl:if> 
```

由于某种原因，这似乎行不通。您能提供的任何帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T02:30:41.390

```
<xsl:if "contains(sp_stList/sp_st/mes_switch, 'X'))"> 
```

**这是语法上非法的 XML（因此也是语法上非法的 XSLT 代码：**

1.  要评估的布尔表达式必须在`test`属性中指定——不存在这样的属性。

2.  有一个右括号没有对应的左括号。

**解决方案**：纠正这两个问题会导致工作代码：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:template match="/">
        <a name="Info"></a>
        <xsl:if test="contains(sp_stList/sp_st/mes_switch, 'X')">
            <a href="#SpSt" style="color:orange" id="Spec_Sit_hdr">
                <img border="0" src="./file.jpg"></img>
            </a>
        </xsl:if>
    </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<sp_stList>
    <sp_st>
        <st_num>1234</st_num>
        <feanme>FAKE</feanme>
        <featyp>ST</featyp>
        <dirsuf></dirsuf>
        <dirpre></dirpre>
        <lv_apt></lv_apt>
        <mun>VAN</mun>
        <msgs>
            <msg filename="File.pdf">d:\folder1\fild.pdf</msg>
        </msgs>
        <spst_poly>0</spst_poly>
        <mes_switch>X</mes_switch>
        <cdts>20120103161202PS</cdts>
    </sp_st>
</sp_stList> 
```

**产生了想要的正确结果：**

```
<a name="Info"/>
<a href="#SpSt" style="color:orange" id="Spec_Sit_hdr">
   <img border="0" src="./file.jpg"/>
</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-19T20:48:48.657

也许没有两个右括号，这将是一个开始。还使用：

测试=包含（...

比仅仅使用更好：

包含（...

你不太可能遇到问题

# magento - Magento 重复菜单

> ID：10809106
> 
> 赞同：0
> 
> 时间：2012-05-30T02:03:57.073
> 
> 标签：magento

嗨！

我的问题出在这个菜单中：cambuistore.com.br/loja/index.php/

我希望其他人解释为什么在这种情况下菜单重复，因为我只有一个：getChildHtml('topMenu') ?> 在我的 header.phtml

top.phtml & header.phtml - [http://snipt.org/ujiH2](http://snipt.org/ujiH2)

目录.xml - [http://snipt.org/ujiG8](http://snipt.org/ujiG8)

需要其他文件吗？

tks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T03:12:20.597

也许标题块在您的布局 XML 中定义了两次？

没有更多信息是不可能的。您能否编辑您的帖子以包含您的布局 XML 和您的 phtml 文件的内容？

编辑：谢谢

我查看了您链接的文件，但没有发现任何问题。我唯一能想到的可能是您的问题是您的 .xml 文件在其他地方引用“top.menu”并再次添加该块。

在 catalog.xml 你有这个：

```
<reference NAME="top.menu">
    <block TYPE="catalog/navigation" name="catalog.topnav" template="catalog/navigation/top.phtml"/>
</reference> 
```

top.menu 在 page.xml 中定义如下：

```
<block type="core/text_list" name="top.menu" as="topMenu" translate="label">
    <label>Navigation Bar</label>
</block> 
```

type: core/text_list 指的是app/code/core/Mage/Core/Block/Text/List.php 中的文件，它会遍历它的每个子块并一一呈现。

如果在您的 xml 中的其他地方（可能是 page.xml 或其他内容）您正在向 topMenu 添加一个 top.phtml 块，那么它将呈现两次。

让我知道你怎么去。

# python - 如何从 GUI 接收输入，应用功能，然后显示？

> ID：10809110
> 
> 赞同：3
> 
> 时间：2012-05-30T02:04:16.400
> 
> 标签：python, user-interface

我写了一个函数，它接收作为字符串的输入，修改它，然后输出一个字符串。我想通过添加一个图形用户界面来让我的非计算机精通的朋友可以使用它。我想要一些非常简单的东西：一个输入文本的框，一个在点击“Enter”的同时提交文本的按钮，然后是一个在我的函数修改后显示结果的地方。我只想要一种以普通人可以理解的方式接收输入并将输出写入 GUI 的方法。我没有使用 GUI 的经验。

### 更新

最后，我使用 XCode 创建 GUI，并[使用 PyObjC](http://pythonhosted.org/pyobjc/)以一种“前端-后端”设置将数据从 GUI 传递到 Python。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T03:35:07.863

如果您熟悉 C#，则可以使用 IronPython，只需导入表单库，通过放置 Lable、文本框和按钮制作简单的表单，然后在单击按钮时引用该文本框值。您可以使用 IronPython 获得 Python 的 WOW Gui

参考：[IronPython](http://ironpython.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T02:25:56.130

您可能有兴趣查看[http://zetcode.com/](http://zetcode.com/)

有一堆关于 wxPython、PyGTK 和 PyQt 的教程

它应该指导你。

霍尔迪

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T02:54:11.283

你的程序必须是python吗？（如标记）您的描述听起来像是一项非常简单的任务。在那种情况下，您是否考虑过 JavaScript + HTML？您的用户不需要下载和安装任何新的东西，而且大多数人都很好地掌握了如何创建/使用网页表单。

如果您致力于 Python 实现：有多种不同的 GUI 工具包（创建图形用户界面的方法），但您选择哪一种取决于您希望程序的外观、运行的操作系统，易于编程，以及多种因素。

您描述的小部件相当简单（文本框和按钮），您可以使用 Tk / Tkinter，python 的[“事实上的标准 GUI”](http://wiki.python.org/moin/TkInter)来实现您的目标。这个 GUI 工具包的优点是它在大多数操作系统上都与 python 捆绑在一起，因此（只要你的朋友安装了 python）他们就可以开始使用了。如果您没有构建复杂安装程序的经验，那么当您要求用户自行安装十几个模块时，您会发现他们会走神。TK 脚本也可以在任何操作系统上运行。

撇开方便不谈，Tkinter 的缺点是 Tk 是一个相当古老且有限的框架，在 python 中常见的形式，并且对于更复杂的程序工作可能会很痛苦。（一些在线教程有拼写错误，例如大小写混合或缺少引号）但是，对于您的任务，基本布局和代码非常简单：请参阅 TkDocs 站点以获取您可以修改的演示。 [http://www.tkdocs.com/tutorial/firstexample.html](http://www.tkdocs.com/tutorial/firstexample.html)

# python - 在具有复杂规则的数组中复制值的 Pythonic 方式

> ID：10809111
> 
> 赞同：1
> 
> 时间：2012-05-30T02:04:17.543
> 
> 标签：python

如果列`a`中的值为 1，则将 的值`b`复制到列中`c`，直到`a`为 -1。

在下面的示例中，`a`第 2 行中为 1，第 5 行中为 -1。然后将第`b`(13) 列中的第二个值从第 2 行复制`c`到第 5 列。

```
row a   b   c
1   0  12   0
2   1  13  13
3   0  15  13
4   0   2  13
5  -1  19  13
6   0  34   0
7   0  11   0
8   1  23  23
9   0  14  23
10 -1   9  23
11  0  18   0
12  0  19   0 
```

我已经使用 for 循环完成了此操作，但必须有一种更优雅的方式来执行此操作系列（我使用的是 pandas、numpy）。非常感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T02:23:52.990

这是一个确实使用`for`循环但非常简洁但仍然可以理解的解决方案。

我假设您将数据存储在`table`, `a`as中`table[:,0]`，并且`a`始终显示为 (1, -1)*，并穿插 0。

```
 starts = table[:,0] == 1
 ends = table[:,0] == -1
 for start, end in zip(starts.nonzero()[0], ends.nonzero()[0]):
     table[start:end+1,2] = table[start,1] 
```

我敢打赌，有一些奇特的方法可以摆脱这个循环，但我也敢打赌，很难说出发生了什么。

我同意其他所有人的观点，如果你发布你目前拥有的东西，从那里开始会有帮助。

# chat - AIML中的多行（单独的行）输出？

> ID：10809113
> 
> 赞同：0
> 
> 时间：2012-05-30T02:04:37.343
> 
> 标签：chat, chatbot, aiml

我希望用户提出问题，然后聊天机器人以不同的行但按顺序响应。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T11:44:20.183

根据解释器的不同，您可能能够使用 HTML 使用的换行标记。

```
 <br/> 
```

它们可以这样使用：

```
<category>
    <pattern>WHO INVENTED LINUX</pattern>
    <template>
        Linus Torvalds, along with many open source developers, and the Free Software Foundation, GNU invented Linux.<br/>
        Linus Torvalds invented Linux in 1991.
        <think>
            <set name="topic">computers</set>
        </think>
    </template>
</category> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-13T08:23:59.070

对于较新的 AIML 版本，考虑到这个问题的年龄和仍然相关性，
仍然有效，并且可以在模板中与它结合使用。但是，请注意这些响应（话语）将包含中断标签和其他内容，从而使上下文难以调试。

# sql - 使用 Distinct SUM 更新

> ID：10809117
> 
> 赞同：0
> 
> 时间：2012-05-30T02:05:38.293
> 
> 标签：sql, group-by, sum, distinct

我找到了一些很好的资源，这些资源表明我应该能够将选择查询与更新合并，但我就是无法理解正确的格式。

我有一个为我获取信息的 select 语句，我几乎想使用这些结果来更新与`accountID`select 查询中的匹配的帐户表。

这是选择语句：

```
SELECT DISTINCT SUM(b.workers)*tt.mealTax as MealCost,b.townID,b.accountID
FROM buildings AS b
INNER JOIN town_tax AS tt ON tt.townID = b.townID
GROUP BY b.townID,b.accountID 
```

所以简而言之，我希望将上述查询与以下内容合并：

```
UPDATE accounts AS a
SET a.wealth = a.wealth - MealCost 
```

`MealCost`选择查询的结果在哪里。我确信有一种方法可以将其合并为一个，我只是无法将这些点连接起来以使其始终如一地运行，而无需分成两个查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T02:22:48.330

首先，当你有一个 group by 时，你不需要 distinct。

其次，您打算如何将这两个结果联系起来？SELECT 查询为每个帐户返回多行（每个城镇一个）。据推测，accounts 表只有一行。假设您想要更新的平均 MealCost。

得到这个的选择查询是：

```
SELECT accountID, avg(MealCost) as avg_Mealcost
FROM (SELECT SUM(b.workers)*tt.mealTax as MealCost, b.townID, b.accountID
      FROM buildings AS b INNER JOIN
           town_tax AS tt
           ON tt.townID = b.townID
      GROUP BY b.townID,b.accountID
     ) a
GROUP BY accountID 
```

现在，要将其放入更新中，您可以使用如下语法：

```
UPDATE accounts
    set accounts.wealth = accounts.wealth + asum.avg_mealcost
    from (SELECT accountID, avg(MealCost) as avg_Mealcost
          FROM (SELECT SUM(b.workers)*tt.mealTax as MealCost, b.townID, b.accountID
                FROM buildings AS b INNER JOIN
                     town_tax AS tt
                     ON tt.townID = b.townID
                GROUP BY b.townID,b.accountID
               ) a
          GROUP BY accountID
         ) asum
    where accounts.accountid = asum.accountid 
```

这使用 SQL Server 语法，我相信它与 Oracle 和大多数其他数据库相同。Mysql 将“from”子句放在“set”之前，并允许在“update accounts”上使用别名。

# javascript - Javascript 在加载内容之前完全打开对话框

> ID：10809119
> 
> 赞同：0
> 
> 时间：2012-05-30T02:05:56.997
> 
> 标签：javascript

我有以下 javascript 在对话框中显示隐藏的 div，隐藏的 div 包含一个 TimyMCE 实例。我的问题是我无法输入 TinyMCE 文本区域，它被锁定或什么的。我认为问题是在加载 TinyMCE 之前需要完全加载对话框，我想 TinyMCE 是最重要的。

我可以编辑此代码，以便在 quictEditPanel 中加载 TimyMCE 之前完全加载 collorbox 吗？

```
<script type="text/javascript">
    $("#quictEdit").colorbox({
        width: "740px",
        inline: true,
        href: "#quictEditPanel"
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T02:09:13.750

```
$(document).ready(function() {
    $('#quictEdit').colorbox({
        width:"740px",
        inline:true,
        href:"#quictEditPanel"
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T02:10:42.393

你的问题是你在dom加载之前调用了元素ID，试试这个：

```
<script type="text/javascript">

  $(document).ready(function() {
    $("#quictEdit").colorbox({
      width: "740px",
      inline: true,
      href: "#quictEditPanel"
   });
 });
</script> 
```

# php - 对 REST 协议中的所有功能使用 POST

> ID：10809127
> 
> 赞同：0
> 
> 时间：2012-05-30T02:07:59.713
> 
> 标签：php

将 POST 用于 REST 中的所有内容是错误的吗？我知道 POST 用于更新和创建，但如果我也将它用于 SELECTS 和 DELETS 怎么办？我基本上需要的是一个可以对数据库进行 CRUD 操作的 Web 服务。我正在使用 PHP。另外，如果我使用查询字符串而不是使用 JSON 或 XML 来执行 POST 请求怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:16:11.760

是的，这是错误的。如果您将 POST 用于更新以外的任何事情，那么您实际上并没有遵循 REST 约定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:19:47.827

你可以用叉子喝汤，但为什么呢？无论如何，您可以使用任何方法，只是不要将其称为 REST 协议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-21T13:34:33.623

在这个 REST 教程中，该系列[的](http://rest.elkstein.org/)第 4 篇文章说：

> 对于创建、更新和删除数据，请使用 POST 请求。（如上所述，当需要复杂参数时，POST 也可用于只读查询。）

当然 GET 通常用于只读查询，所以放在一起，如果复杂性是默认假设，这是一种方便的假设，当没有说明复杂性和简单性之间的阈值时，那么这个人就足够权威了写一个关于 REST 的完整系列就是说可以发布所有内容。可能是缓存对各种 HTTP 动词的响应做出了一些假设，这可能是有益的，但如果您的应用程序没有从缓存中受益（实际上，可能会受到缓存的伤害，所以禁用它或做一些事情以使您的应用程序不会受到它的影响）然后我不知道是否有任何问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T07:15:37.650

> 将 POST 用于 REST 中的所有内容是错误的吗？

您不能将 POST 用于 REST 中的所有内容（例如，仅用于请求，而不用于响应），因此关于错误或正确的问题不是一个有效的问题。

> 我知道 POST 用于更新和创建，但如果我也将它用于 SELECTS 和 DELETS 怎么办？

它通常可以正常工作。

> 我基本上需要的是一个可以对数据库进行 CRUD 操作的 Web 服务。

没关系。

> 我正在使用 PHP。

那也很好。PHP hast 支持 HEAD、GET 和 POST 方法。对于 PUT 和 DELETE 方法，您需要进行更多编码。

> 另外，如果我使用查询字符串而不是使用 JSON 或 XML 来执行 POST 请求怎么办？

您使用查询字符串而不是 JSON/XML 请求正文。REST 没有指定协议，所以你可以做任何你喜欢的事情。在 PHP 中使用“查询字符串”可能是一个好主意，因为 PHP 支持那些开箱即用的。但这取决于您用于处理程序的内容或您想要支持的内容。

由于您的问题非常广泛，您可能需要先阅读一些关于 REST 的基本描述，以便更具体地提出：[REST 简介](http://www.infoq.com/articles/rest-introduction)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T07:15:18.540

如果您对所有操作都使用 POST，则不能再将其称为 REST。

所以这没有错，但也不是 REST :)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T07:23:30.480

将 POST 用于可重复的调用是错误的。

POST 调用永远不会被缓存，但您的选择调用应该是可缓存的（并且可重复），因此您不应该为它们使用 POST。

但是没有技术上的原因你不能通过 POST 强制所有内容，（特别是所有浏览器都不支持 DELETE），但这确实意味着缓存对你的任何调用都不起作用，而且你的用户可能如果已进行 POST 调用来创建网页，则无法在不要求确认页面重新加载的情况下刷新网页。

# loops - SAS 宏循环和虚拟变量

> ID：10809128
> 
> 赞同：0
> 
> 时间：2012-05-30T02:08:01.453
> 
> 标签：loops, macros, sas

我只想在有某个值时创建新的虚拟变量。

这是我的原始数据示例。

```
ID A1 A2... A10
1  10   1    5
2  20   8   4
...
... 
```

当这些属性中有特定值时，我想添加虚拟变量。例如，ID 1 主题有“10”，一个新变量，Add10 将是 1..

```
ID A1 A2.. A10 Add1..Add4 Add5...Add20

1  10   1.. 5  1  ...0   1  ...    0

2   20  8.. 4  0  ...1   0  ...     1

... 
```

这是我的代码..

```
%MACRO DO_LIST;
%DO I=1 %TO 20;

data aaaa;
set aa33; 
if A1 =i or
A2 =i or
A3 =i or
...
A10 =i then Add&I=I ;
RUN;
%END;  
%MEND DO_LIST;
%DO_LIST; 
```

但是，我的结果只有 Add20，这是最后一个变量。我觉得我在循环语句中出错了。你介意帮助我吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:21:02.977

现在，您始终使用与输入相同的数据集，`aaaa`并且您不会在每个循环中更改此数据集。因此，您将始终只获得 Add20，因为这是循环的最后一次迭代将执行的操作。

一个简单的解决方法是：

```
data append;
 set aa33;
run;

%MACRO DO_LIST;
%DO I=1 %TO 20;
data append; 
 set append;
 if A1 =i or
 A2 =i or
 A3 =i or
 .....
 A10 =i then Add&I=I ; 
RUN;
%END;
%MEND DO_LIST;
%DO_LIST; 
```

您几乎希望在每次循环运行时向数据集添加一列，而不是用原始数据集 ( `aa33`) 和仅当前迭代的结果完全替换它。

如果您知道最大 # 为 20，则以下内容应该在没有宏的情况下工作

```
data test;
 set aa33;
 array add[20] 1\. add1 - add20;
 array a[*] a:;

do i = 1 to dim(a);
  value = a[i];
  add[value] = 1;
end;
run; 
```

我认为这就是您要查找的内容，如果您至少填写示例的前两行，这会有所帮助。

# php - 徽章原因错误

> ID：10809131
> 
> 赞同：3
> 
> 时间：2012-05-30T02:08:22.793
> 
> 标签：php, mysql, html

我正在尝试在我们的系统上显示徽章，徽章是对用户的奖励/成就。他们在他们的个人资料上显示，有效的是图像/徽章显示，但徽章原因没有。

我试着这样做

```
<?
    $badgesql = mysql_query("select * from usr_badge where user = '$user'");
    $user2 = mysql_query("select * from usr_users where username = '$user'");
    $usr2 = mysql_fetch_array($user2);
    $vipsql = mysql_query("select * from usr_vip where userid = '$usr2[id]'");
    $vipcheck = mysql_num_rows($vipsql);
    $badgecheck = mysql_num_rows($badgesql);
    $checkit = $badgecheck + $vipcheck;
    if($checkit==0)
    echo("This user does not have any badges");
    else
    if($badgecheck!=0)
    {
    while($badge = mysql_fetch_array($badgesql))
    {
    echo('<a onclick="TINY.box.show({html:'Reason: '.$badge[reason].',animate:false,close:false,mask:false,boxid:'success',autohide:2,top:-14,left:-17})"><img src="'.$badge[badge].'" </a>');
    }
    }
    //Display VIP Badges
    if($vipcheck!=0)
    {
    $vipbadge = mysql_fetch_array($vipsql);
    $vip1 = mysql_query("select * from usr_vipdb where id = '$vipbadge[vipid]'");
    $vip2 = mysql_fetch_array($vip1);
        echo('<img src="'.$vip2[url].'" alt="This user is a VIP!" />');
    }
    ?> 
```

但上面的代码不起作用。当我尝试查看页面“解析错误：语法错误，/home/ ***** *** /public_html/memb.php 第 167 行中的意外 T_STRING”页面时，它给了我一个错误

有人可以告诉我我做错了什么或指出我正确的方向吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T02:12:37.037

开头的那条长线可能有问题——*这里*`echo`突出显示的语法被它破坏了，这表明你可能错误地匹配了引号或类似的东西。（把它拆开。把每个小段放在自己的行上。这样你就不会错过这个错误了。）

 *这是您当前的代码损坏，因为我相信解释器会解析它：

```
echo('<a onclick="TINY.box.show({html:'
Reason: '.$badge[reason].'
,animate:false,close:false,mask:false,boxid:
'success'
,autohide:2,top:-14,left:-17})
"><img src="
'.$badge[badge].'
" </a>'); 
```

请注意以裸词开头的行`Reason:`。既然这不是你得到的错误，也许我猜错了，但毫无疑问，你当前的代码太乱了。

我希望您在此处未显示的代码中清理您的输入 ( `$user`, `$usr2[id]`) 和存储的数据 ( `$badge[reason]`)，以防止[跨站点脚本漏洞](http://en.wikipedia.org/wiki/Cross-site_scripting)和[SQL 注入漏洞](http://en.wikipedia.org/wiki/SQL_injection)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T02:14:52.877

试试这个（固定的打开/关闭引号......我想）

```
<?
    $badgesql = mysql_query("select * from usr_badge where user = '$user'");
    $user2 = mysql_query("select * from usr_users where username = '$user'");
    $usr2 = mysql_fetch_array($user2);
    $vipsql = mysql_query("select * from usr_vip where userid = '$usr2[id]'");
    $vipcheck = mysql_num_rows($vipsql);
    $badgecheck = mysql_num_rows($badgesql);
    $checkit = $badgecheck + $vipcheck;
    if($checkit==0) {
        echo("This user does not have any badges");

    } else {
        if($badgecheck!=0)
        {
            while($badge = mysql_fetch_array($badgesql))
            {
                echo('<a onclick="TINY.box.show({html: "Reason: '.$badge[reason].'",animate:false,close:false,mask:false,boxid:"success",autohide:2,top:-14,left:-17})"><img src="'.$badge[badge].'" /></a>');
            }
        }
        //Display VIP Badges
        if($vipcheck!=0)
        {
            $vipbadge = mysql_fetch_array($vipsql);
            $vip1 = mysql_query("select * from usr_vipdb where id = '$vipbadge[vipid]'");
            $vip2 = mysql_fetch_array($vip1);
            echo('<img src="'.$vip2[url].'" alt="This user is a VIP!" />');
        }
    }
?> 
```*

# javascript - 上传时的默认文件格式。jQuery 或 Javascript

> ID：10809133
> 
> 赞同：1
> 
> 时间：2012-05-30T02:08:25.187
> 
> 标签：javascript, jquery, file-upload, default

你能告诉我（例如，谷歌不能），我是否可以设置文件上传的默认文件格式。

目前它允许上传所有文件（请参阅文件图像 *.*），但我想限制为特定的文件格式。

感谢所有帮助。

![在此处输入图像描述](../Images/8c152dad9279d729b7f156be6e23bba8.png)

环境：

没有 HTML5

后端：Struts

前端：jQuery-1.6.1

文件上传插件使用 iframe 上传文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T02:44:08.303

你可以用这个

```
<input type="file"  id="myfile" accept="image/gif, image/jpeg, image/png, image/jpeg" /> 
```

但使用这个。用户可以随时更改过滤器。此外，您应该使用 javascript 或 jquery 进行验证。

```
<script type ="text/javascript">
    var validFiles=["bmp","gif","png","jpg","jpeg"];//array of allowed extensions
        function OnUpload()
        {
          var obj = document.getElementById("myfile");
          var source=obj.value;
          var ext=source.substring(source.lastIndexOf(".")+1,source.length).toLowerCase();
          for (var i=0; i<validFiles.length; i++)
          {
            if (validFiles[i]==ext)
                break;
          }
          if (i>=validFiles.length)
          {
            alert("This not a valid file upload file with an extention of one of the following:\n\n"+validFiles.join(", "));
            return false;
          }
          return true;
         }
    </script> 
```

# c - K&R为什么要做&&，|| 逻辑与 &, | 按位，而不是相反？

> ID：10809138
> 
> 赞同：6
> 
> 时间：2012-05-30T02:09:11.657
> 
> 标签：c, language-design

我知道`==`选择它是为了相等和`=`赋值，因为他们认为人们做的赋值比检查相等——但他们肯定不认为会有比布尔逻辑更多的摆弄吗？

为什么不反过来，使用`&`并`|`成为逻辑运算符呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T02:42:35.543

从[马口中](http://cm.bell-labs.com/who/dmr/chist.html)：

> 在语言被命名后，快速的变化仍在继续，例如`&&`和`||`运算符的引入。在 BCPL 和 B 中，表达式的计算取决于上下文：在 if 和其他将表达式的值与零进行比较的条件语句中，这些语言对 and ( `&`) 和 or ( `|`) 运算符进行了特殊解释。在普通上下文中，它们按位操作，但在 B 语句中
> 
> ```
>  if (e1 & e2) ... 
> ```
> 
> 编译器必须评估`e1`，如果它不为零，则评估`e2`，如果它也是非零，则详细说明依赖于 if 的语句。需求递归地下降到`&`和 | `e1`和内的运算`e2`符 在这种“真值”上下文中，布尔运算符的短路语义似乎是可取的，但运算符的重载难以解释和使用。在 Alan Snyder 的建议下，我引入了`&&`and`||`运算符，使机制更加明确。

请记住，C 不是在真空中创建的。它的许多怪异之处可以追溯到 BCPL 和 B。

# sql-order-by - 使用 order by 推进 mysql 查询

> ID：10809141
> 
> 赞同：1
> 
> 时间：2012-05-30T02:09:22.267
> 
> 标签：sql-order-by

我使用 2 个表来组合数据，如下所示

```
SELECT name, price, MIN(price) AS minprice 
FROM c, cp 
WHERE c.id = cp.id 
GROUP BY id 
ORDER BY minprice = 0, minprice ASC 
```

例如：

```
id     name         price
 1     apple          0
 1     green apple    20
 2     orange         10
 3     strawberry     0 
```

由于组 1 的 minprice 上方的数据结果为 0 但我不希望最低价格为零，但如果我给出 minprice > 0 的条件，这是不正确的

我希望我的结果变成这样

```
2  orange         10 
1  green apple    20
3  strawberry      0 
```

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T03:37:57.363

这是答案：

```
SELECT 
    (
     SELECT name 
     FROM yourtable 
     WHERE price = _inner._MIN AND id = _inner.id LIMIT 1
    ) 
    AS _NAME, 
    _inner._MIN
FROM 
    (
     SELECT id, IFNULL(MIN(NULLIF(price, 0)),0) AS _MIN 
     FROM yourtable 
     GROUP BY id
    ) 
    AS _inner 
```

其中**yourtable**是您的表的名称。

`MIN(NULLIF(price, 0))`允许您在不计算零的情况下计算最小值。

`IFNULL(<...>,0)`这里只是意味着，我们需要一个真实的`zero`而不是`NULL`结果。

`LIMIT 1`如果我们有一个相同`id`但`price`不同的项目`names`。我认为，您可以自由删除此声明。

# ios - iOS未定义链接器ld错误

> ID：10809143
> 
> 赞同：2
> 
> 时间：2012-05-30T02:09:41.223
> 
> 标签：ios, xcode

我写了一个简单的函数，通过编译器而不是链接器。

知道为什么吗？

```
- (BOOL) connectedToWifi
{

    CFArrayRef myArray = CNCopySupportedInterfaces();
    // Get the dictionary containing the captive network infomation
    CFDictionaryRef captiveNtwrkDict = CNCopyCurrentNetworkInfo(CFArrayGetValueAtIndex(myArray, 0));

    NSLog(@"Information of the network we're connected to: %@", captiveNtwrkDict);

    NSDictionary *dict = (__bridge NSDictionary*) captiveNtwrkDict;
    NSString* ssid = [dict objectForKey:@"SSID"];

    if ([ssid rangeOfString:@"WXYZ"].location == NSNotFound || ssid == NULL)
    {
        return false;
    }
    else
    {
        return true;
    }
} 
```

这是我得到的错误：

```
Undefined symbols for architecture i386:
  "_CNCopySupportedInterfaces", referenced from:
      -[miApp_funcs connectedToWifi] in miApp_funcs.o
  "_CNCopyCurrentNetworkInfo", referenced from:
      -[miApp_funcs connectedToWifi] in miApp_funcs.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T18:18:19.983

以下是步骤-

1) 在导航区点击项目

2) 选择“目标”选项卡

3）点击“构建阶段”

4) 选择“将二进制文件与库链接”

5）然后您可以在该区域底部看到“+”按钮。您现在可以添加所需的 SystemConfiguration 框架。

```
#import <SystemConfiguration/SystemConfiguration.h> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T02:37:38.510

您必须链接到 和`#import <SystemConfiguration/SystemConfiguration.h>`才能访问 Captive Network (CN) 类和函数。

# javascript - 使用 Cordova (PhoneGap) 在 iOS 上显示联系人

> ID：10809145
> 
> 赞同：0
> 
> 时间：2012-05-30T02:10:17.850
> 
> 标签：javascript, ios, cordova

我正在开发一个 JQuery Mobile 应用程序。我想在 Cordova (PhoneGap) 的帮助下通过 AppStore 分发这个应用程序。我想要一个按钮，当用户点击它时，他们的联系人就会出现。当他们选择一个时，如果可能的话，我想获得与之关联的电子邮件地址。目前，我有以下内容：

```
<input id="viewButton" type="button" value="+" onclick="getContact();" />

<script type="text/javascript">
  function getContact() {
    var options = new ContactFindOptions();
    var fields = ["name", "emails"];
    navigator.contacts.find(fields, onSuccess, onError, options);
  }

  function onContactSuccess() {
    alert("Great");
  }

  function onContactError() {
    alert("oops");
  }
</script> 
```

令我惊讶的是，我没有看到联系人弹出窗口。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T04:35:46.837

您忘记更改 onSuccess 和 onError 方法名称。contacts.find 的实例构造函数应为：

```
navigator.contacts.find(fields, onContactSuccess, onContactError, options); 
```

# asp.net - ASP.NET 无法加载程序集

> ID：10809149
> 
> 赞同：11
> 
> 时间：2012-05-30T02:11:09.977
> 
> 标签：asp.net, dll

我的计算机崩溃了，我现在无法在 Visual Studio 2008 中启动我以前工作的 ASP.NET Web 应用程序——出现以下错误：

```
=== Pre-bind state information ===
LOG: User = Adam-PC\Adam
LOG: DisplayName = log4net
 (Partial)
LOG: Appbase = file:///C:/Users/Adam/Desktop/SV/sview/Src/StoredProcedureTest/SV.Common.Web/
LOG: Initial PrivatePath = C:\Users\Adam\Desktop\SV\sview\Src\StoredProcedureTest\SV.Common.Web\bin
Calling assembly : (Unknown).
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\Users\Adam\Desktop\SV\sview\Src\StoredProcedureTest\SV.Common.Web\web.config
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v2.0.50727\config\machine.config.
LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
LOG: Attempting download of new URL file:///C:/Users/Adam/AppData/Local/Temp/Temporary ASP.NET Files/root/b898aa04/e528dbc7/log4net.DLL.
LOG: Attempting download of new URL file:///C:/Users/Adam/AppData/Local/Temp/Temporary ASP.NET Files/root/b898aa04/e528dbc7/log4net/log4net.DLL.
LOG: Attempting download of new URL file:///C:/Users/Adam/Desktop/SV/sview/Src/StoredProcedureTest/SV.Common.Web/bin/log4net.DLL.
LOG: Using application configuration file: C:\Users\Adam\Desktop\SV\sview\Src\StoredProcedureTest\SV.Common.Web\web.config
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v2.0.50727\config\machine.config.
LOG: Post-policy reference: log4net, Version=1.2.10.0, Culture=neutral, PublicKeyToken=1b44e1d426115821
ERR: Failed to complete setup of assembly (hr = 0x80070057). Probing terminated.

Stack Trace: 

[FileLoadException: Could not load file or assembly 'log4net' or one of its dependencies. The parameter is incorrect. (Exception from HRESULT: 0x80070057 (E_INVALIDARG))]

[FileLoadException: Could not load file or assembly 'log4net, Version=1.2.10.0, Culture=neutral, PublicKeyToken=1b44e1d426115821' or one of its dependencies. The parameter is incorrect. (Exception from HRESULT: 0x80070057 (E_INVALIDARG))]
   System.Reflection.Assembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, Assembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection) +0
   System.Reflection.Assembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, Assembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection) +43
   System.Reflection.Assembly.InternalLoad(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection) +127
   System.Reflection.Assembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection) +142
   System.Reflection.Assembly.Load(String assemblyString) +28
   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +46

[ConfigurationErrorsException: Could not load file or assembly 'log4net, Version=1.2.10.0, Culture=neutral, PublicKeyToken=1b44e1d426115821' or one of its dependencies. The parameter is incorrect. (Exception from HRESULT: 0x80070057 (E_INVALIDARG))]
   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +613
   System.Web.Configuration.CompilationSection.LoadAllAssembliesFromAppDomainBinDirectory() +203
   System.Web.Configuration.CompilationSection.LoadAssembly(AssemblyInfo ai) +105
   System.Web.Compilation.BuildManager.GetReferencedAssemblies(CompilationSection compConfig) +178
   System.Web.Compilation.BuildProvidersCompiler..ctor(VirtualPath configPath, Boolean supportLocalization, String outputAssemblyName) +54
   System.Web.Compilation.ApplicationBuildProvider.GetGlobalAsaxBuildResult(Boolean isPrecompiledApp) +232
   System.Web.Compilation.BuildManager.CompileGlobalAsax() +51
   System.Web.Compilation.BuildManager.EnsureTopLevelFilesCompiled() +337

[HttpException (0x80004005): Could not load file or assembly 'log4net, Version=1.2.10.0, Culture=neutral, PublicKeyToken=1b44e1d426115821' or one of its dependencies. The parameter is incorrect. (Exception from HRESULT: 0x80070057 (E_INVALIDARG))]
   System.Web.Compilation.BuildManager.ReportTopLevelCompilationException() +58
   System.Web.Compilation.BuildManager.EnsureTopLevelFilesCompiled() +512
   System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters) +729

[HttpException (0x80004005): Could not load file or assembly 'log4net, Version=1.2.10.0, Culture=neutral, PublicKeyToken=1b44e1d426115821' or one of its dependencies. The parameter is incorrect. (Exception from HRESULT: 0x80070057 (E_INVALIDARG))]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +8921851
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +85
   System.Web.HttpRuntime.ProcessRequestInternal(HttpWorkerRequest wr) +259 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-30T11:34:11.490

答案是我不得不删除这个文件夹的内容：

C:/Users/Adam/AppData/Local/Temp/Temporary ASP.NET Files/root/

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-25T15:05:49.970

在 BSOD 之后，我有相同的错误代码，但在 VS 2010 中使用 AutoMapper.dll 用于 .Net 4.0 MVC 3 项目。我的解决方案是删除以下内容：

C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\temp

（这是在 Windows 7 x64 上）

似乎错误消息'绑定结果：hr = 0x80070057。参数不正确。当引用的 DLL 的临时副本因系统故障而损坏时，可能会导致此问题。解决方案是删除此临时副本。然后当你重新编译时，编译器会将原来的 DLL 重新复制到临时文件夹中。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-04-04T14:48:53.313

检查和删除路径的完整列表：

```
%LocalAppData%\Temp\Temporary ASP.NET Files\
%SystemRoot%\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\
%SystemRoot%\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\
%SystemRoot%\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\
%SystemRoot%\Microsoft.NET\Framework64\v2.0.50727\Temporary ASP.NET Files\ 
```

# iphone - 加载多个图像

> ID：10809150
> 
> 赞同：0
> 
> 时间：2012-05-30T02:11:16.153
> 
> 标签：iphone, ios, xcode

我用这个将我的图像保存在 NSDocumentsDirectory 中：

```
for (int i = 0; i < info.count; i++) {
    NSLog(@"%@", [info objectAtIndex:i]);
    NSString *savedImagePath = [documentsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"oneSlotImages%d.png", i]];
    ALAssetRepresentation *rep = [[info objectAtIndex: i] defaultRepresentation];
    UIImage *image = [UIImage imageWithCGImage:[rep fullResolutionImage]];
    NSData *imageData = UIImagePNGRepresentation(image);
    [imageData writeToFile:savedImagePath atomically:YES];       
} 
```

我很难将它们加载到数组中。我在网上搜索过这个。这个可以用`NSDocumentsDirectory`吗？

```
for(int i = 1; i <= 21; i++)
{
    [images addObject:[UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"Images%d.png", i] ofType:@"jpg"]]];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T02:15:43.187

这是您的实际代码吗？如果是这样的话，有（至少）两个问题。首先，文件名在保存和加载时略有不同。其次，您从捆绑包中加载图片，而不是从文档目录中加载图片。

您想以这种方式加载它们吗？

另请注意，如果您有 20 张全分辨率照片，那么将它们加载到 UIImages 数组中可能是一个糟糕的主意。它可能会因为内存不足而崩溃。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains( NSDocumentDirectory,    NSUserDomainMask ,YES );
NSString *documentsDir = [paths objectAtIndex:0];
for(int i = 1; i <= 21; i++)
{
  NSString *savedImagePath = [documentsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"oneSlotImages%d.png", i]];
  [images addObject:[UIImage imageWithContentsOfFile:savedImagePath]];
} 
```

# c++ - OpenGL片段着色器没有效果，如何判断错误？

> ID：10809151
> 
> 赞同：3
> 
> 时间：2012-05-30T02:11:21.163
> 
> 标签：c++, opengl, osx-lion

我正在运行 Mac OS X Lion，我正在尝试编写一个基本的 OpenGl 程序，但我的片段着色器无法正常工作。当我不包括它时，我得到了黑色三角形，但是当我这样做时，屏幕只是白色的。加载它也没有错误。调试此问题的最佳方法是什么？这是我的着色器：

顶点：

```
#version 120
attribute vec2 coord2d;
void main(void) {
    gl_Position = vec4(coord2d, 0.0, 1.0);
} 
```

分段：

```
#version 120
void main(void) {
    gl_FragColor[0] = 1.0;
    gl_FragColor[1] = 1.0;
    gl_FragColor[2] = 0.0;
} 
```

以及加载我从[本教程](http://en.wikibooks.org/wiki/OpenGL_Programming/Modern_OpenGL_Tutorial_02)中获得的着色器的代码。

编辑以添加更多信息

```
int init_resources()
{
    GLfloat triangle_vertices[] = {
        0.0f,  0.8f,
        -0.8f, -0.8f,
        0.8f, -0.8f,
    };
    glGenBuffers(1, &vbo_triangle);
    glBindBuffer(GL_ARRAY_BUFFER, vbo_triangle);
    glBufferData(GL_ARRAY_BUFFER, sizeof(triangle_vertices), triangle_vertices, GL_STATIC_DRAW);

    GLint link_ok = GL_FALSE;
    GLuint vs, fs;
    if ((vs = create_shader("vertShader.sh", GL_VERTEX_SHADER))   == 0) return 0;
    if ((fs = create_shader("fragShader.sh", GL_FRAGMENT_SHADER)) == 0) return 0;

    program = glCreateProgram();
    glAttachShader(program, vs);
    glAttachShader(program, fs);
    glLinkProgram(program);
    glGetProgramiv(program, GL_LINK_STATUS, &link_ok);
    if (!link_ok) {
        fprintf(stderr, "glLinkProgram:");
        print_log(program);
        return 0;
    }

    const char* attribute_name = "coord2d";
    attribute_coord2d = glGetAttribLocation(program, attribute_name);
    if (attribute_coord2d == -1) {
        fprintf(stderr, "Could not bind attribute %s\n", attribute_name);
        return 0;
    }

    return 1;
}

void onDisplay()
{
    glClearColor(1.0f, 1.0f, 1.0f, 1.0f);
    glClear(GL_COLOR_BUFFER_BIT| GL_DEPTH_BUFFER_BIT);

    glUseProgram(program);
    glEnableVertexAttribArray(attribute_coord2d);
    glBindBuffer(GL_ARRAY_BUFFER, vbo_triangle);
    glVertexAttribPointer(
                          attribute_coord2d, 
                          2,                 
                          GL_FLOAT,          
                          GL_FALSE,          
                          0,                 
                          0                  
                          );

    glDrawArrays(GL_TRIANGLES, 0, 3);

    glDisableVertexAttribArray(attribute_coord2d);
    glutSwapBuffers();
}

GLuint create_shader(const char* filename, GLenum type)
{
  const GLchar* source = file_read(filename);
  if (source == NULL) {
    fprintf(stderr, "Error opening %s: ", filename); perror("");
    return 0;
  }
  GLuint res = glCreateShader(type);

  glShaderSource(res, 1, source, NULL);
  free((void*)source);

  glCompileShader(res);
  GLint compile_ok = GL_FALSE;
  glGetShaderiv(res, GL_COMPILE_STATUS, &compile_ok);
  if (compile_ok == GL_FALSE) {
    fprintf(stderr, "%s:", filename);
    print_log(res);
    glDeleteShader(res);
    return 0;
  }

  return res;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T03:48:41.787

不得不添加 gl_FragColor[3] = 1.0; 因为我没有设置不透明度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T09:58:36.200

与此同时，您似乎找到了解决方案，但我想给您另一个提示，它最近对我很有帮助（对这一切也很陌生），特别是如果您在 Mac OS X 上工作：

我建议您安装“XCode 图形工具”（可从开发人员下载部分获得），这将极大地帮助您开发着色器，尤其是：

*   OpenGL Shader Builder，可帮助您开发和测试着色器

*   OpenGL Profiler 不仅可以帮助您分析应用程序，还可以查看加载了哪些资源等，在您的情况下：您可以设置断点以停止执行（例如在交换之前），然后查看加载的着色器，并在运行时修改它，看看改变有什么影响

这是 OpenGL Profiler 的用户指南： [https ://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/OpenGLProfilerUserGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40006475-CH1- DontLinkElementID_31](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/OpenGLProfilerUserGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40006475-CH1-DontLinkElementID_31)

希望有帮助

# c# - 如何在 Windows 窗体应用程序中创建表格？

> ID：10809154
> 
> 赞同：2
> 
> 时间：2012-05-30T02:12:11.470
> 
> 标签：c#, winforms

如何在 winforms 中创建一个表格，其中单个单元格看起来像这样： ![在此处输入图像描述](../Images/e4e7ff6fbf471501b62352cb3d9e22d7.png)

我一直在使用 tablelayoutpanel，但它只允许您每个单元格进行一个控制。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T02:21:33.123

模拟这一点的唯一方法是使用嵌套的表格布局面板。

要在示例中获得所需的输出：

```
TableLayout1: 1 Row, 2 Columns
TableLayout2 goes within column2 of TableLayout1: 3 Rows, 1 Column 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T03:08:07.543

总有办法让它发挥作用。从 WinForms 设计者看来，这可能不是很明显，但也不是太难。

尝试这个：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
  partial class Form_1:Form 
  {

    public Form_1()
    {
      InitializeComponent();

    }

    /// <summary>
    /// Required designer variable.
    /// </summary>
    private System.ComponentModel.IContainer components = null;

    /// <summary>
    /// Clean up any resources being used.
    /// </summary>
    /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
    protected override void Dispose(bool disposing)
    {
      if (disposing && (components != null))
      {
        components.Dispose();
      }
      base.Dispose(disposing);
    }

    private void InitializeComponent()
    {
      this.tableLayoutPanel1 = new System.Windows.Forms.TableLayoutPanel();
      this.panel4 = new System.Windows.Forms.Panel();
      this.panel3 = new System.Windows.Forms.Panel();
      this.panel2 = new System.Windows.Forms.Panel();
      this.panel1 = new System.Windows.Forms.Panel();
      this.tableLayoutPanel1.SuspendLayout();
      this.SuspendLayout();
      // 
      // tableLayoutPanel1
      // 
      this.tableLayoutPanel1.ColumnCount = 2;
      this.tableLayoutPanel1.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 25F));
      this.tableLayoutPanel1.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 75F));
      this.tableLayoutPanel1.Controls.Add(this.panel4, 3, 0);
      this.tableLayoutPanel1.Controls.Add(this.panel3, 2, 0);
      this.tableLayoutPanel1.Controls.Add(this.panel2, 1, 0);
      this.tableLayoutPanel1.Controls.Add(this.panel1, 0, 0);
      this.tableLayoutPanel1.SetRowSpan(this.panel1, 3);//This line is the key!!!!!
      this.tableLayoutPanel1.Dock = System.Windows.Forms.DockStyle.Fill;
      this.tableLayoutPanel1.Location = new System.Drawing.Point(0, 0);
      this.tableLayoutPanel1.Name = "tableLayoutPanel1";
      this.tableLayoutPanel1.RowCount = 3;
      this.tableLayoutPanel1.RowStyles.Add(new System.Windows.Forms.RowStyle(System.Windows.Forms.SizeType.Percent, 33.33333F));
      this.tableLayoutPanel1.RowStyles.Add(new System.Windows.Forms.RowStyle(System.Windows.Forms.SizeType.Percent, 33.33333F));
      this.tableLayoutPanel1.RowStyles.Add(new System.Windows.Forms.RowStyle(System.Windows.Forms.SizeType.Percent, 33.33333F));
      this.tableLayoutPanel1.Size = new System.Drawing.Size(527, 372);
      this.tableLayoutPanel1.TabIndex = 0;
      // 
      // panel4
      // 
      this.panel4.BorderStyle = System.Windows.Forms.BorderStyle.FixedSingle;
      this.panel4.Dock = System.Windows.Forms.DockStyle.Fill;
      this.panel4.Location = new System.Drawing.Point(134, 251);
      this.panel4.Name = "panel4";
      this.panel4.Size = new System.Drawing.Size(390, 118);
      this.panel4.TabIndex = 4;
      // 
      // panel3
      // 
      this.panel3.BorderStyle = System.Windows.Forms.BorderStyle.FixedSingle;
      this.panel3.Dock = System.Windows.Forms.DockStyle.Fill;
      this.panel3.Location = new System.Drawing.Point(134, 127);
      this.panel3.Name = "panel3";
      this.panel3.Size = new System.Drawing.Size(390, 118);
      this.panel3.TabIndex = 3;
      // 
      // panel2
      // 
      this.panel2.BorderStyle = System.Windows.Forms.BorderStyle.FixedSingle;
      this.panel2.Dock = System.Windows.Forms.DockStyle.Fill;
      this.panel2.Location = new System.Drawing.Point(134, 3);
      this.panel2.Name = "panel2";
      this.panel2.Size = new System.Drawing.Size(390, 118);
      this.panel2.TabIndex = 2;
      // 
      // panel1
      // 
      this.panel1.BorderStyle = System.Windows.Forms.BorderStyle.FixedSingle;
      this.panel1.Dock = System.Windows.Forms.DockStyle.Fill;
      this.panel1.Location = new System.Drawing.Point(3, 3);
      this.panel1.Name = "panel1";
      this.panel1.Size = new System.Drawing.Size(125, 366);
      this.panel1.TabIndex = 1;
      // 
      // Form1
      // 
      this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
      this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
      this.ClientSize = new System.Drawing.Size(527, 372);
      this.Controls.Add(this.tableLayoutPanel1);
      this.Name = "Form1";
      this.Text = "Form1";
      this.tableLayoutPanel1.ResumeLayout(false);
      this.ResumeLayout(false);

    }

    private System.Windows.Forms.TableLayoutPanel tableLayoutPanel1;
    private System.Windows.Forms.Panel panel1;
    private System.Windows.Forms.Panel panel3;
    private System.Windows.Forms.Panel panel2;
    private System.Windows.Forms.Panel panel4;
  }
} 
```

让它工作的关键是这一行：

```
this.tableLayoutPanel1.SetRowSpan(this.panel1, 3);//This line is the key!!!!! 
```

# javascript - 如何确保一个 javascript 函数适用于多个调用？

> ID：10809156
> 
> 赞同：0
> 
> 时间：2012-05-30T02:12:33.093
> 
> 标签：javascript, jquery, events

我有一个基本的搜索功能，我可以在其中将搜索查询输入到一个字段中，该字段将显示建议结果的下拉列表。我可以单击任何建议的结果，然后将该记录的值（存储在 MySQL 数据库中）插入到该字段中，正如我所期望的那样。但是，如果我在第一次运行脚本后立即尝试做同样的事情，那么它就不起作用了。但是，如果我重新加载页面，那么它将再次工作。换句话说，它会在我第一次运行脚本时起作用，但不会在脚本的后续运行中起作用，除非我重新加载页面。就好像通过运行脚本，它在第一次运行后“自行关闭”，而不是让我再次运行脚本。有任何想法吗？这是代码：

```
<script>
$(function(){ 
    var index = -1;
    $('#myID').keyup(function(e){
        if (e.keyCode == 38){ 
            index = (index == 0) ? 0 : index - 1;
            $('tr.myRow').removeClass('gray');
            $('tr.myRow:eq(' + index + ')').addClass('gray');
            return false;
        }
        else if (e.keyCode == 40){ 
            index = (index + 1 >= $('tr.myRow').length) ? $('tr.myRow').length - 1 : index + 1;
            $('tr.myRow').removeClass('gray');
            $('tr.myRow:eq(' + index + ')').addClass('gray');
            return false;
        }
        else
        {
            var str = $('#myID').val();
            mySearch(str);
        }
        index = -1;
    }); 
});
</script>

<script>
$(function(){
    $('#myID').keydown(function(e){
        if (e.keyCode == 13){
            var functionName = $('#pageSearch1 > tbody > tr.gray').attr("onclick");
            setTimeout(functionName, 0)
            $('#pageSearch').css({'visibility': 'hidden'});
            return false;
        }
    });
 });
</script> 
```

“onClick”属性是以下脚本：

```
function insertPageIDIntoHiddenField(pageID,pageName)
{
    $('tr#eventPageID td#loc input#locationID').val(pageID);
    $('tr#eventPageID td#loc input#myID').replaceWith('<input id="myID" class="event_form_long" type="text" name="location" value="'+pageName+'" autocomplete="off" />');
    $('tr#eventPageID td#loc input#myID').text(pageName);
    $('#pageSearch').replaceWith('<div id="pageSearch"></div>');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T04:31:35.217

我已经使用jquery的自动完成功能来实现按键的建议我希望这可以帮助你

```
$('#txtSearchText').autocomplete({
source: function(request, response) {
$.ajax({
url: SearchPath + "SearchWebService.asmx/GetUserList",
data: JSON2.stringify({ userName: $('#txtSearchText').val()}),
dataType: "json",
type: "POST",
contentType: "application/json; charset=utf-8",
dataFilter: function(data) { return data; },
success: function(data) {
response($.map(data.d, function(item) {
return {
value:item.UserName
}
}))
},
error: function(XMLHttpRequest, textStatus, errorThrown) {
alert(textStatus);
}
});
},
minLength: 1
}); 
```

# r - R：如何有条件地更改 ggplot 刻面图中使用的 3 个变量中的 1 个变量的值

> ID：10809157
> 
> 赞同：2
> 
> 时间：2012-05-30T02:12:33.497
> 
> 标签：r, ggplot2

问：如何防止在 ggplot2 构面图中仅显示三个不同变量之一的值 < 0，每个变量的大小都不同？

我制作了以下方面图。

![在此处输入图像描述](../Images/a2d2b6e3d5585437be475faa5c2a6759.png)

如您所见，绘制在 y 轴上的值对于每个变量都存在显着差异，但使用`scales = "free"`可以解决该问题。

我想通过限制比例或将小于零的值设置为零来抑制“profit_margin”方面（底部为蓝色）中小于零的值，但我无法弄清楚如何实现这一点。我可以直接删除数据框中的值，但我更愿意保持数据不变。我尝试在 scale_y_continuous() 中使用一个函数，但无法取得任何进展。

这是用于生成上述图的代码：

```
require(lubridate)
require(reshape2)
require(ggplot2)
require(scales)

## Create dummy time series data
set.seed(12345)
monthsback <- 12
startdate <- as.Date(paste(year(now()),month(now()),"1",sep = "-")) - months(monthsback)
mydf <- data.frame(mydate = seq(as.Date(startdate), by = "month", length.out = monthsback),
                   sales = runif(monthsback, min = 600, max = 800),
                   profit = runif(monthsback, min = -50, max = 80))
## Add calculation based on data
mydf$profit_margin <- mydf$profit/mydf$sales

## Reshape...
mymelt <- melt(mydf, id = c('mydate'))

## Plot
p <- ggplot(data = mymelt, aes(x = mydate, y = value, fill = variable)) +
     geom_bar(stat = "identity") +
     facet_wrap( ~ variable, ncol = 1, scales = "free")

print(p) 
```

这是我尝试使用函数并 lapply 将子零值设置为零：

```
require(lubridate)
require(reshape2)
require(ggplot2)
require(scales)

## Create dummy time series data
set.seed(12345)
monthsback <- 12
startdate <- as.Date(paste(year(now()),month(now()),"1",sep = "-")) - months(monthsback)
mydf <- data.frame(mydate = seq(as.Date(startdate), by = "month", length.out = monthsback),
                   sales = runif(monthsback, min = 600, max = 800),
                   profit = runif(monthsback, min = -50, max = 80))
## Add calculation based on data
mydf$profit_margin <- mydf$profit/mydf$sales

## Reshape...
mymelt <- melt(mydf, id = c('mydate'))

scales_function <- function(myvar, myvalue){
    mycount <- 1
    newval <- lapply(myvalue, function(myarg) {
        myarg <- ifelse(myvar[mycount] == "profit_margin", ifelse(myarg < 0, 0, myarg), myarg)
    }
                  )
    return(newval)
}

## Plot
p <- ggplot(data = mymelt, aes(x = mydate, y = value, fill = variable)) +
     geom_bar(stat = "identity") +
     facet_wrap( ~ variable, ncol = 1, scales = "free") +
     scale_y_continuous(breaks = scales_function(mymelt$variable, mymelt$value))

print(p) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T02:24:36.270

您可以保持数据不变，但只需绘制一个子集。

```
ggplot(data = subset(mymelt,!((variable == 'profit_margin') & value < 0)), 
       aes(x = mydate, y = value, fill = variable)) +
     geom_bar(stat = "identity") +
     facet_wrap( ~ variable, ncol = 1, scales = "free") 
```

或在通话中更换

```
ggplot(data = mymelt, aes(x = mydate, y = replace(value, (variable == 'profit_margin') & value <0, NA), fill = variable)) +
 geom_bar(stat = "identity") +
 facet_wrap( ~ variable, ncol = 1, scales = "free") +
 ylab('value') 
```

# asp.net - 如何在 Visual Web Developer 2010 中创建本地化

> ID：10809159
> 
> 赞同：1
> 
> 时间：2012-05-30T02:13:05.163
> 
> 标签：asp.net, localization, visual-web-developer-2010

我需要帮助如何在 Visual Web Developer 2010 中创建本地化？如果有人知道好的教程或其他有用的东西如何创建它。我尝试创建，但工具菜单中没有生成本地资源选项。我阅读了一些开发人员无法支持此选项的帖子。那么，如果有人可以通过建议帮助我该怎么做？tnx 提前

# javascript - 将 JavaScript 对象添加到多个数组

> ID：10809163
> 
> 赞同：4
> 
> 时间：2012-05-30T02:14:35.637
> 
> 标签：javascript, arrays, memory, hashcode

我有以下 JavaScripts 对象：

```
var foo = {"foofoo":value};
var bar = {"barbar":value2}; //and so on 
```

这些对象将被添加到几个数组中：

```
var container = [foo, bar, baz, etc];
var container2 = [foo, bar, glob, etc]; //and so on, for lots of containers. 
```

如果我有很多对象（例如 foo）放入这些数组中，那么使用某种哈希码表并通过某种 UID 存储对象是否有利？还是 JavaScript 的引用传递已经给了我这个特性？

[http://www.timdown.co.uk/jshashtable/](http://www.timdown.co.uk/jshashtable)似乎提供了这样的功能。

抱歉，我对 JavaScript 的了解不是很全面。

编辑：我想另一种更一般地重新表述这个问题的方法 - 是否存在哈希表对通过引用传递对象的语言（如 JavaScript）有用的情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T02:17:49.343

Javascript 对象总是通过引用传递；不可能无意中创建副本。

你没有什么可担心的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T02:18:59.077

`container[0].foofoo`您可以通过更改然后阅读它来轻松地测试它`container2[0].foofoo`。

它将显示值已更改，这意味着 JavaScript 使用对象引用。

# sencha-touch - 分组嵌套列表？

> ID：10809164
> 
> 赞同：2
> 
> 时间：2012-05-30T02:14:41.563
> 
> 标签：sencha-touch, sencha-touch-2

如何在 ST2 中创建分组嵌套列表，就像在带有 Storyboard 的 Xcode 中一样？我只需要根级别的组。这里有一些关于它在本机应用程序中的样子的想法。

[我在 Sencha 的 NestedList文档](http://docs.sencha.com/touch/2-0/#!/api/Ext.dataview.NestedList)中没有看到任何内容。

![在此处输入图像描述](../Images/212716265c0723ba19dbdb10d8ced30e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T22:29:58.360

在 ST2 中，NestedList 方法 getSubList() 现在是 getList()，它的工作方式略有不同。覆盖它以传播分组信息对我有用：

```
/**
 * Override Ext.dataview.NestedList.getList to propagate grouping info from
 * parent NestedList to List sublist.
 */
getList: function(node) {

    var list = this.callParent(arguments);

    list.grouped = this.grouped;
    list.store.setGrouper(this.getStore().config.grouper);

    return list;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T09:11:55.467

您可以查看 KitchenSink 示例（用户界面 -> 列表 -> 分组） [http://docs.sencha.com/touch/2-0/#!/example/kitchen-sink](http://docs.sencha.com/touch/2-0/#!/example/kitchen-sink)

这是一个简单的列表，只是在 store 中有一个 storers/grouper 属性：

```
Ext.create('Ext.data.Store', {
id: 'ListStore',
model: 'Contact',
sorters: 'firstName',
grouper: function(record) {
    return record.get('firstName')[0];
},
data: [... 
```

然后在列表项设置中调用它：

```
items: [{
            width: Ext.os.deviceType == 'Phone' ? null : 300,
            height: Ext.os.deviceType == 'Phone' ? null : 500,
            xtype: 'list',
            store: 'ListStore',
            itemTpl: '<div class="contact"><strong>{firstName}</strong> {lastName}</div>',
            grouped: true,
            indexBar: true
        }] 
```

希望它会有所帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T12:26:42.583

创建一个简单的分组列表并为组标题设置一个“点击”事件。在点击标题时，打开另一个面板并显示仅包含该组项目的列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T03:10:06.670

已经在 Sencha Touch 论坛上问过。

[http://www.sencha.com/forum/showthread.php?122238-Grouped-Nested-List](http://www.sencha.com/forum/showthread.php?122238-Grouped-Nested-List)。

# sql - 如何在组语句中获取单行值？

> ID：10809165
> 
> 赞同：0
> 
> 时间：2012-05-30T02:14:42.437
> 
> 标签：sql, database, oracle11g

我有两个表，`JobTable`并`EmployeeTable`带有以下数据：

员工表：

```
EmpId    Salary
1          10
2          20
3          30
4          40
5          50
6          60 
```

工作表：

```
JobId    EmpId
A          1
A          2
B          3 
B          4
C          5
C          6 
```

我需要一个 SQL 语句，它将返回`EmpId`每个 Job 的最低工资的 Employee 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:18:50.050

您可以`RANK()`像这样使用该功能：

```
WITH ranked AS (
  SELECT
    j.JobId,
    e.EmpId,
    e.Salary,
    RANK() OVER (PARTITION BY j.JobId ORDER BY e.Salary) AS rnk
  FROM JobTable j
  INNER JOIN EmployeeTable e ON j.EmpId = e.EmpId
)
SELECT
  JobId,
  EmpId,
  Salary,
FROM ranked
WHERE rnk = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T02:21:33.990

嗯，试试这个：

```
SELECT st.EmpID, min(st.salary) 
FROM SalaryTable st INNER JOIN JobTable jt ON st.EmpID=jt.EmpID 
WHERE jt.JobID = 'A' 
GROUP BY st.EmpID 
```

# r - 在ggplot2中为不同因素映射两种颜色美学

> ID：10809166
> 
> 赞同：2
> 
> 时间：2012-05-30T02:14:50.360
> 
> 标签：r, ggplot2

我正在尝试使用 ggplot 制作一个简单的字段图。现场设计的格式如下：

```
design <- data.frame(Genotype=rep(LETTERS[1:4], 4), Status=rep(c("P","N"), each=8),
                 Density=rep(c(40,80), each=4),
                 Row=rep(seq(1:4)),
                 Range=rep(1:4, each=4)) 
```

我想要一个映射到填充的地图和映射到的`Genotype`其他东西（理想情况下是亮度）`Density`。我最接近的是使用`alpha`，但它并不理想，因为它从非常低的 alpha 到非常高。在非常低的 alpha 下，很难看出填充是什么。

这是我目前情节的代码：

```
d.p <- ggplot(design, aes(Row, Range))
d.p1 <- d.p + geom_tile(aes(fill=Genotype, alpha=Density)) 
```

我一直在摆弄，`scale_fill_hue`但似乎无法让任何明智的事情发生。

提前致谢。

**编辑**

很抱歉，当我制作上面修复的可重现示例时，我意识到我遗漏了现实世界问题的一个基本方面。

正如下面所指出的，`alpha`可以映射到 Density，但我还需要区分`Status`. 孵化似乎是一个显而易见的解决方案，但我知道这不是一个选择。我可以手动分配相似的颜色（浅蓝色、深蓝色等），但我真的希望能够自动执行此操作，以便我可以为任何现场设计做到这一点。

任何想法表示赞赏，并为混淆感到抱歉！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T04:12:28.527

`Row`我将忽略并包含冗余信息的事实`Genotype`，并提供以下内容：

```
ggplot(design,aes(x = Row,y = Range)) + 
    geom_tile(fill = "transparent",colour = "black") +
    geom_point(aes(colour = Genotype,size = factor(Density),shape = Status)) + 
    scale_size_manual(values = c(3,6)) 
```

![在此处输入图像描述](../Images/d200a1bb4bdb0b9aa9aa0996d335e465.png)

但有些事情告诉我，你也不能这样做是有原因的。

# android - HTC Sense 3.6 不显示日历事件？

> ID：10809175
> 
> 赞同：0
> 
> 时间：2012-05-30T02:16:06.753
> 
> 标签：android, android-4.0-ice-cream-sandwich, htcsense, android-calendar

我有一个应用程序可以查询 Android 4.x 中的谷歌日历实例和事件 API。我已经在各种设备上对此进行了测试，它可以工作，但由于某种原因，它在 HTC Sense 3.6 (Android 4.0.3) 上不起作用。其他人可以确认这一点，或者有人知道发生了什么吗？

以下是适用于非 HTC Sense 设备的代码片段：

```
Cursor instances = Instances.query(
    context.getContentResolver(), 
    new String[]{Instances.EVENT_ID, Instances.BEGIN, Instances.END, Instances.SELF_ATTENDEE_STATUS}, 
    startTime, 
    startTime+lengthInMillis);
.
.
.
long eventId = instances.getLong(instances.getColumnIndex(Instances.EVENT_ID));
Cursor events = context.getContentResolver().query(
    ContentUris.withAppendedId(Events.CONTENT_URI, eventId),
    new String[] {Events._ID, Events.CALENDAR_ID, Events.TITLE, Events.DESCRIPTION, Events.EVENT_LOCATION, Events.ALL_DAY, Events.AVAILABILITY},
    null,
    null, 
    null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:43:02.950

显然 HTC Sense 3.6 不喜欢 Instances.query() API，所以我使用以下内容手动构建了 URI，一切正常。

```
 Uri.Builder builder = Instances.CONTENT_URI.buildUpon();
    ContentUris.appendId(builder, startTime);
    ContentUris.appendId(builder, startTime+lengthInMillis);
    Cursor instances = context.getContentResolver().query(
            builder.build(), 
            null, 
            null, 
            null, 
            null); 
```

# regex - 日语中的正则表达式（regex）

> ID：10809176
> 
> 赞同：19
> 
> 时间：2012-05-30T02:16:26.480
> 
> 标签：regex, unicode, multilingual

我正在学习英语的正则表达式（regex），虽然其中一些概念似乎适用于其他语言，如日语，但我觉得好像很多其他语言不会。例如，正则表达式的一个常见用途是查找一个单词是否包含非字母数字字符。我看不出这种技术以及其他技术如何适用于日语，因为不仅有三种书写系统，而且汉字也非常复杂，并且比字母数字字符的范围要大得多。我将不胜感激有关此主题的任何信息以及更多需要研究的领域，因为尽管我参加了许多日语课程，但我对该主题的了解很少。如果可能的话，我希望你的答案是使用 python 和 Java，因为这些是我熟悉的语言。感谢您的帮助。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-30T04:29:53.680

Python 正则表达式对 Unicode 功能提供有限的支持。Java 更好，尤其是 Java 7。

Java 支持 Unicode 类别。例如，`\p{L}`（及其简写，`\pL`）匹配任何语言的任何字母。这包括日语表意字符。

Java 7 支持 Unicode 脚本，包括日语文本通常由平假名、片假名、韩文和拉丁文组成的脚本。`\p{Han}`您可以使用、`\p{Hiragana}`、`\p{Katakana}`和匹配这些脚本之一中的任何字符`\p{Latin}`。您可以将它们组合在一个字符类中，例如`[\p{Han}\p{Hiragana}\p{Katakana}]`. 您可以使用大写字母`P`（如, `\P{Han}`）来匹配除汉字之外的任何字符。

Java 7 支持 Unicode 块。除非在 Android 中运行您的代码（脚本不可用），否则您通常应该避免使用块，因为它们不如 Unicode 脚本有用和准确。有多种与日语文本相关的块，包括`\p{InHiragana}`、`\p{InKatakana}`、`\p{InCJK_Unified_Ideographs}`、`\p{InCJK_Symbols_and_Punctuation}`等。

Java 和 Python 都可以使用 来引用单独的代码点`\uFFFF`，其中`FFFF`是任何四位数字。Java 7 可以引用任何 Unicode 代码点，包括那些超出基本多语言平面的代码点，例如使用`\x{10FFFF}`. `\U0010FFFF`Python 正则表达式不支持 21 位 Unicode，但 Python 字符串支持，因此您可以使用 eg （大写`U`后跟八个十六进制数字）在正则表达式中嵌入一个代码点。

Java 7`(?U)`或`UNICODE_CHARACTER_CLASS`标志使字符类速记像`\w`和`\d`Unicode 一样，因此它们将匹配日语表意字符等（但请注意，`\d`对于像一二三四这样的数字仍然不匹配汉字）。默认情况下，Python 3 使速记类能够识别 Unicode。`re.UNICODE`在 Python 2 中，当您使用or`re.U`标志时，速记类是 Unicode 感知的。

您是对的，并非所有正则表达式的想法都同样适用于所有脚本。有些东西（例如字母大小写）对日文文本没有意义。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-05-11T09:22:16.940

对于 Python

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

import re

kanji = u'漢字'
hiragana = u'ひらがな'
katakana = u'カタカナ'
text = kanji + hiragana + katakana

#Match Kanji
regex = u'[\u4E00-\u9FFF]+' # == u'[一-龠々]+'
match = re.search(regex, text, re.U)
print match.group().encode('utf-8') #=> 漢字

#Match Hiragana
regex = u'[\u3040-\u309Fー]+' # == u'[ぁ-んー]+'
match = re.search(regex, text, re.U)
print match.group().encode('utf-8') #=> ひらがな

#Match Katakana
regex = u'[\u30A0-\u30FF]+' # == u'[ァ-ヾ]+'
match = re.search(regex, text, re.U)
print match.group().encode('utf-8') #=>カタカナ 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-30T02:38:13.280

Java 字符类的功能类似于您正在寻找的东西。它们是以 \p [here](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)开头的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-09T12:41:06.830

在 Unicode 中，有两种方法可以对来自不同书写系统的字符进行分类。他们是

*   Unicode 脚本（脚本中使用的所有字符，无论 Unicode 代码点如何 - 可能来自不同的块）
*   Unicode 块（用于特定目的/脚本的代码点范围 - 可能跨越脚本，脚本可能跨越块）

这些之间的区别在官方 Unicode 网站的[这个网页上](http://unicode.org/reports/tr24/tr24-14.html#Scripts_and_Blocks)得到了更清楚的解释。

在 Java 中的正则表达式中匹配字符方面，您可以使用 Java 7 以来的任何一种分类机制。

这是语法，如Oracle 网站上[的本教程中所示：](https://docs.oracle.com/javase/tutorial/essential/regex/unicode.html)

**脚本：**

要么`\p{IsHiragana}`_`\p{script=Hiragana}`

**堵塞：**

要么`\p{InHiragana}`_`\p{block=Hiragana}`

请注意，在一种情况下是***"Is"***，在另一种情况下是***"In"***。

接受的答案中指示的语法`\p{Hiragana}`似乎不是一个有效的选项。我试了一下以防万一，但可以确认它对我不起作用。

# android - Android Mapview 捏视图不调用 OnZoomListener

> ID：10809181
> 
> 赞同：1
> 
> 时间：2012-05-30T02:17:35.917
> 
> 标签：android, android-mapview

我的地图视图有一个 OnZoomListener，每当缩放变化时都会调用它。每当底部的加号或减号按钮用于更改缩放时，这都适用。但是，如果用户使用捏拉缩放来放大或缩小，则永远不会调用侦听器。您对如何使捏缩放实际呼叫我的听众有任何建议吗？如果没有，您知道如何禁用地图视图的捏合缩放吗？谢谢。

编辑：我的自定义缩放监听器是这样添加的：

```
ZoomButtonsController zoomButton = myMapView.getZoomButtonsController();
zoomButton.setOnZoomListener(listener); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T03:11:12.303

问题是您将侦听器设置为缩放控件而不是地图，这就是为什么捏（即地图事件而不是缩放控制事件）不调用侦听器的原因。

处理此事件的唯一方法是实现自定义地图和自定义侦听器。

此链接包含您需要的示例和代码。

[带有事件的自定义 MapView](http://bricolsoftconsulting.com/2011/10/31/extending-mapview-to-add-a-change-event/)

# ember.js - 车把模板中的转义关键字

> ID：10809185
> 
> 赞同：2
> 
> 时间：2012-05-30T02:17:58.043
> 
> 标签：ember.js

我有一个对象集合（MyApp.instrsController，一个 ArrayController），每个对象都有一个名为“action”（浮点数）的属性，如何使用车把模板显示它？

以下是我尝试过的代码：

```
<ul>
{{#each MyApp.instrsController}}
   <li>{{action}}</li>
{{/each}}
</ul> 
```

但由于“动作”是一个“关键字”，它会引发 javascript 运行时错误“选项未定义”。

先谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T02:34:17.623

您可以通过在属性名称前加上 来手动指定您正在当前上下文中查找属性`this.`：

```
{{this.action}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T09:34:15.547

If you can't change the property name you can use a computed property in your model object, see [http://jsfiddle.net/pangratz666/4ZQM8/](http://jsfiddle.net/pangratz666/4ZQM8/):

**Handlebars**:

```
<script type="text/x-handlebars" >
    <ul>
        {{#each App.controller}}
            <li>{{actionProp}}</li>
        {{/each}}
    </ul>
</script> 
```

**JavaScript**:

```
App.Object = Ember.Object.extend({
    actionProp: function() {
        return this.get('action');
    }.property('action')
});

App.controller = Ember.ArrayController.create({
    content: [],

    addObj: function(number) {
        this.pushObject(App.Object.create({
            action: number
        }));
    }
}); 
```

* * *

If you don't have a custom model object, you can use a computed property on a CollectionView, see [http://jsfiddle.net/pangratz666/r6XAc/](http://jsfiddle.net/pangratz666/r6XAc/):

**Handlebars**:

```
<script type="text/x-handlebars" data-template-name="item" >
    {{actionProp}}
</script>​ 
```

**JavaScript**:

```
Ember.CollectionView.create({
    contentBinding: 'App.controller',
    itemViewClass: Ember.View.extend({
        templateName: 'item',
        actionProp: function(){
            return this.getPath('content.action');
        }.property()
    })
}).append(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T13:26:38.887

我严重建议您更改属性的名称。您正在花时间处理一个不是您的领域核心的问题。

雅尼。吻。

在编程中要学习的最大教训是如何完成工作，而不是如何操纵 javascript 以免对您使用保留关键字的行为嗤之以鼻。如果您没有看起来难以理解的脆弱解决方案，您以后会更快乐

由于这是一个浮点数，我可以建议您使用“actionLevel”吗？

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-04-05T14:05:31.143

只需使用model.property，例如：

```
{{input class="input-xlarge" value=model.content }} 
```

# php - php datetime 与我的 windows 系统不匹配

> ID：10809187
> 
> 赞同：5
> 
> 时间：2012-05-30T02:18:27.817
> 
> 标签：php

我曾经`date("Y-m-d H:i:s");`获取当前日期时间格式，但结果与我的 Windows 系统不匹配。

例子：

```
<?php
echo "Current date time: ".date("Y-m-d H:i:s")."<br />";
?> 
```

显示结果的示例代码：

> 当前日期时间：2012-05-30 01:58:21

但我的 Windows 系统日期时间是 2012-05-30 09:56:04

我已经尝试使用`date_default_timezone_set('Asia/Singapore')`函数来获取我的区域日期**时间并且它可以工作，但我希望它在我的 php.ini 中设置为默认值。**

例如：（**它的工作）**

```
<?php
date_default_timezone_set('Asia/Singapore');
echo "Current date time: ".date("Y-m-d H:i:s")."<br />";
?> 
```

我还尝试在`date.timezone = ""`更改为`date.timezone = "Asia/Singapore"`但不起作用的 php.ini 中设置默认值。

我使用 Windows 7 Home Premium 64 位和 php-5.3.13-Win32-VC9-x86。有谁知道如何匹配这些值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T02:23:26.623

*   您是通过网络服务器（例如 Apache）还是 CLI 运行该脚本？更改 php.ini 后需要重新启动 Apache。

*   您确定您正在编辑正确的 php.ini 文件吗？创建一个 phpinfo() 页面并在输出中验证 php.ini 文件的路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T03:18:05.000

`date_default_timezone_set`将取代 php 默认时区设置，无需重新启动任何东西。但在你的情况下它不起作用。这很奇怪。试试这个，因为这是我最后的手段：

```
<?php
header('Content-Type: text/plain');
//date_default_timezone_set('Asia/Singapore');
date_default_timezone_set('Etc/GMT+8');
echo date("Y-m-d H:i:s A T", time());
?> 
```

**更新：**

由于您需要的是默认的 php 时区和不使用的永久解决方案`date_default_timezone_set`，因此请按照以下几个简单步骤操作：

1.  `phpinfo.php`用一行内容创建一个文件`<?php echo phpinfo(); ?>`
2.  运行 http://localhost /phpinfo.php 并查找`Loaded Configuration File`. 示例值`C:\wamp\bin\apache\Apache2.2\bin\php.ini`
3.  `php.ini`用记事本打开上面的文件。查找`[Date]`并修改如下：

    ```
    [Date]
    ; Defines the default timezone used by the date functions
    ; http://php.net/date.timezone
    date.timezone = Asia/Singapore 
    ```

4.  保存并重新启动您的 apache。再次运行您的`datetime.php`. 或者，您也可以直接从`phpinfo.php`h1 标题下验证`date`，方法是确保默认时区读取为“亚洲/新加坡”，如下所示： ![在此处输入图像描述](../Images/6d6a1f280d7706c8b2274054aee53db8.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T02:19:37.463

您需要定义默认时区

```
date_default_timezone_set('Asia/Singapore'); 
```

**更新**：

更改 PHP ini 后您是否重新启动了服务器？

# google-calendar-api - 用于事件的 Google Calendar API v3 404

> ID：10809190
> 
> 赞同：1
> 
> 时间：2012-05-30T02:18:54.667
> 
> 标签：google-calendar-api

我尝试使用 Google Calendar v3 API 完成一项相对简单的任务，但我一直遇到 404 错误。我只需要访问一个日历（属于我的客户）并通过 Javascript 获取只读事件数据（仅使用带有 Ajax 调用的协议），所以我试图避免使用身份验证。

我通过转到日历共享设置单击“与他人共享此日历”然后选择“将此日历公开”来公开日历。但是，我唯一的公开选项是“仅查看空闲/忙碌（隐藏详细信息）。 "

意识到这一点后，我编辑了每个事件以专门将类型设置为“公共”。

现在，我可以从日历资源中获取 eventList，但是数组中的每个项目只有一些细节（见下文）。而且，当我尝试访问单个事件时，我得到一个 404。

尝试使用基本测试日历后，我相当确定日历共享设置是问题所在。我客户的日历和我使用的测试日历之间的主要区别在于，他的日历是 Google Apps for business 帐户的一部分，我很确定。

日历本身中是否有任何设置我可以编辑以使 API 工作而无需使用身份验证来访问数据？或者，在商业应用程序设置中是否有一个选项可以让我的客户更改？同样，我说的是仅使用 Javascript 在一个特定日历上执行 GET 请求，因此不需要进行身份验证。

我真的没有代码可以在这里显示，因为我只是通过 URI 获取数据；在 API 文档中使用资源管理器工具时，我遇到了同样的问题（404）。但是，正如您所料，当我使用该资源管理器工具进行身份验证时，事件显示没有问题。

eventList 中的示例项目：

```
  {
   “种类”：“日历#事件”，
   "id": "(idremoved)",
   “状态”：“确认”，
   “更新”：“2012-05-29T21：06：42.000Z”，
   “开始”： {
    “日期时间”：“2012-06-18T19:00:00-05:00”
   },
   “结尾”： {
    “日期时间”：“2012-06-18T21:00:00-05:00”
   },
   “知名度”：“公开”
  }

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T01:57:41.590

我正在使用以下内容来阅读 Google Apps for Education 日历，它具有与 Business 相同的 api 和安全限制。

拿到公共日历地址后，我决定解析完整版的日历而不是基础版：

[https://www.google.com/calendar/feeds/your_calendar_id_here%40gmail.com/public/full](https://www.google.com/calendar/feeds/your_calendar_id_here%40gmail.com/public/full)

从我所见，如果您的日历是公开的，那么您的活动也会是公开的。您需要确保只需粘贴 url 即可在浏览器中访问您的日历的公开内容。通过这样做来检查事件是否也是公开的。确保日历是公开的，但未选中“仅共享我的忙/闲信息（隐藏详细信息）”框

# python - __init__ 的变量范围

> ID：10809197
> 
> 赞同：2
> 
> 时间：2012-05-30T02:20:05.533
> 
> 标签：python

我只是想知道，为什么`__init__`不能从类中访问定义的变量？它是否应该在实例化期间执行，以便从外部访问？

```
>>> class a:
...     data = {}
... 
>>> a.data
{}
>>> class a:
...     def __init__(self):
...             self.data = {}
... 
>>> a.data
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: class a has no attribute 'data' 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-30T02:21:40.593

中定义的变量`__init__`是*实例*变量，根据定义，它们不能从类范围访问。这就是为什么它有效：

```
a().data # data is a member of an instance of class `a` 
```

...而这不起作用：

```
a.data   # data is not a member of the `a` class 
```

请注意，`__init__`（*初始化程序*`a`）在您通过调用创建新实例时运行，从那时`a()`起，在中定义的所有变量`__init__`都绑定到该特定实例`a`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T04:13:00.867

类是对象的蓝图。该`__init__`方法在每个对象上运行以设置其内容。你做了一个`__init__`说“每个`a`对象都应该从一个`data`属性开始”。

现在你想`data`通过`a`类本身来访问。

*`data`您希望收到*哪个对象*？为什么？`data`不是类本身的一部分。类`a`本身不同于任何给定`a`的对象，就像球不同于球的*概念*一样。一个球可以是蓝色的。球的概念不能。*

# facebook - 除了 WordPress 网站上的“点赞”和 FB 登录框不断弹出，Facebook 点赞框不会出现

> ID：10809208
> 
> 赞同：-1
> 
> 时间：2012-05-30T02:23:07.487
> 
> 标签：facebook, wordpress, login, facebook-like, facebook-likebox

任何帮助将不胜感激。先感谢您！

我使用 Facebook Developer 生成的代码并将代码插入到这个 WordPress 网站页面： http: [//www.stilehair.com/studio](http://www.stilehair.com/studio)代码如下。当我打开页面时，它看起来正确，**但是**当我单击“喜欢”按钮时，会出现一个弹出窗口并要求我登录 FB（即使我已经登录了 FB。）该框会摇晃并再次询问我，然后从不排除我正确的登录信息，也不排除“喜欢”。

*   这发生在我所有的浏览器、iphone 和 ipad 上。
*   所有软件都是最新的。
*   我已经清除了缓存'。
*   多次尝试更改代码和/或插入框的方法。
*   通过 FB 调试器运行它
*   在板上搜索答案，没有任何解决方案有效。

    ```
    <div id="fb-root"></div>
    <script type="text/javascript">// <![CDATA[
    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
    // ]]></script>

    <div class="fb-like-box" data-href="http://www.facebook.com/Stilehair" 
    data-width="292" data-colorscheme="dark" data-show-faces="false" 
    data-stream="false" data-header="false"></div> 
    ```

我研究了其他几个没有结果的问题来帮助纠正我的挑战。从我在 Facebook 和论坛上读到的所有内容来看，添加一个赞似乎是一件很容易的事情。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T03:42:50.710

我在我的客户 wordpress 网站上使用了这个代码。

```
<div id="fb-root"></div>
<script src="http://connect.facebook.net/en_US/all.js#xfbml=1"></script><fb:like href="<?php echo get_permalink(); ?>" show_faces="true" width="450" send="true"></fb:like> 
```

上面的代码在我所有客户的 wordpress 博客上都运行良好。例如查看任何帖子页面[[链接]](http://2experts.net)

# oracle - Oracle/Hibernate Like：查找仅包含单个 ';' 的字符串

> ID：10809212
> 
> 赞同：0
> 
> 时间：2012-05-30T02:24:06.193
> 
> 标签：oracle, hibernate

我正在尝试查找列中仅包含一个的所有记录`;` 。

例如

1.  一个;sdasd
2.  作为;dasd;dasd
3.  作为;dasd;das

只会`a;sdasd`被退回。

我已经尝试过`%;%`，但它会返回所有包含`;`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T03:52:11.207

```
SELECT id
  FROM your_table
 WHERE LENGTH(col) - LENGTH(REPLACE(col,';')) = 1; 
```

是一种解决方案。

另一个使用 REGEXP_LIKE：

```
WITH q AS (SELECT 1 ID, 'a;b;c;' str FROM dual
           UNION
           SELECT 2, ';abc' FROM dual
           UNION 
           SELECT 3, 'a;b;c;defg;h' FROM dual
           UNION
           SELECT 4, 'abcdefghi;' FROM dual
           UNION 
           SELECT 5, 'ab;cde' FROM dual
           UNION 
           SELECT 6, 'abcdef' FROM dual)
SELECT *
  FROM q 
 WHERE regexp_like(str,'^[^;]*;[^;]*$');

        ID STR
---------- ------------
         2 ;abc
         4 abcdefghi;
         5 ab;cde 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T09:29:39.873

其他可能性（不需要字符串操作）：

```
FROM your_table
   WHERE col like '%;%' AND INSTR(col, ';', 1) = INSTR(col, ';', -1) 
```

# python - 如何在python中跟踪方法执行

> ID：10809214
> 
> 赞同：0
> 
> 时间：2012-05-30T02:24:36.173
> 
> 标签：python, oop, method-resolution-order

我正在尝试从一些开源 python 项目中读取一些源代码，比如 ipython。我经常发现很难跟踪不同类中方法的执行流程，即使使用 eclipse 的调试工具并逐步执行代码。我不太清楚为什么代码会跳转到远相关类中的某些方法。

我知道它必须是继承层次结构，但我发现很难遵循。是否有任何工具可以帮助理解代码的执行方式？喜欢可视化不同方法的执行顺序？希望这不是一个完全幼稚的问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T02:25:59.007

跳转是由您的函数调用另一个函数引起的，该函数在 tern 调用另一个函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T02:29:21.320

麻省理工学院网站有一个程序可以跟踪执行并以图片显示它们，您可能会发现它很有用：http: [//people.csail.mit.edu/pgbovine/python/tutor.html#mode=edit](http://people.csail.mit.edu/pgbovine/python/tutor.html#mode=edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-14T17:03:23.137

我和你在同一条船上。最后我创造了自己的东西。也就是说，您可以使用许多内置方法，但这需要一些努力。一种这样的方法是设置*跟踪器*——在代码执行时对代码进行某种分析器。

**资源：**

```
import sys, inspect

class Tracer(object):

    def __init__(self):
        self.tracing_packages = []
        self.whitespace = '    '
        self.indent_lvl = 0

    def trace(self, frame, event, arg):
        # Module info
        mod = inspect.getmodule(frame)
        if mod:
            modpath = mod.__name__
        else:
            modpath = '<no module>'
        # Just return if not interested in package
        for to_trace in self.tracing_packages:
            if not modpath.startswith(to_trace):
                return self.trace
        # Other info
        fn_name = frame.f_code.co_name
        src_lines = inspect.getsource(frame).split('\n')
        src_line_start = src_lines[0]
        src_line_end = src_lines[-1]
        lineno = frame.f_lineno
        ws = self.whitespace
        # Printing
        if event == 'call':
            self.indent_lvl += 1
            print('%scallin: %s %s %s' % (self.indent_lvl*ws, modpath, fn_name, str(arg)))
        elif event == 'return':
            if isinstance(arg, object):
                ret = type(arg)
            else:
                ret = str(arg)
            print('%sreturn: %s' % (self.indent_lvl*ws, ret))
            self.indent_lvl -= 1
        return self.trace

    def watch_package(self, packname):
        self.tracing_packages.append(packname) 
```

**用法**

对于您的情况，您只需键入：

```
tracer = Tracer()
tracer.watch_package('IPython')
sys.settrace(tracer.trace) 
```

然后，如果您尝试运行一个函数，您将打印整个调用链，包括被调用的同一包中的任何其他函数。

**其他示例**

当我想了解特定功能或整个包的流程时，我会使用它。如果您想要整个包的俯视图，您还可以使用 pylint 的[pyreverse](http://www.pylint.org/)来创建 UML 图。

无论如何，这里是一个跟踪[PyOCD](https://github.com/mbedmicro/pyOCD)包的示例：

```
>>> import sys, inspect, pyOCD
>>> tracer = Tracer()
>>> tracer.watch_package('pyOCD')
>>> sys.settrace(tracer.trace)
>>> pyOCD.board.MbedBoard.listConnectedBoards()
    callin: pyOCD.board.mbed_board listConnectedBoards None
        callin: pyOCD.board.mbed_board getAllConnectedBoards None
            callin: pyOCD.interface.pyusb_backend getAllConnectedInterface
                callin: pyOCD.interface.pyusb_backend __init__ None
                    callin: pyOCD.interface.interface __init__ None
                    return: <type 'NoneType'>
                return: <type 'NoneType'>
                callin: pyOCD.interface.pyusb_backend start_rx None
                return: <type 'NoneType'>
            return: <type 'list'>

            ... 
```

# c# - C# vs C++ 通过引用处理

> ID：10809220
> 
> 赞同：2
> 
> 时间：2012-05-30T02:26:12.743
> 
> 标签：c#, c++, comparison, pass-by-reference, pass-by-value

这是书中的问题：

在函数中，按值传递参数和按引用传递参数有什么区别？说明c#ha在处理引用传递的方式上与c++相比的一个优势。

我知道按值传递参数和按引用传递参数的区别，但 c# 与 c++ 相比有什么优势？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T02:41:35.610

因为语法发生了变化，所以它不会改变概念。

话虽这么说，C# 唯一的“优势”是语法“更简洁”，因为您不需要了解所有指针引用和取消引用语法`& * ->`

# enums - 如何在freemarker中调用枚举的方法？

> ID：10809230
> 
> 赞同：2
> 
> 时间：2012-05-30T02:28:12.230
> 
> 标签：enums, freemarker

我有一个这样的枚举：

```
public enum Type{
    A("Title A"),
    B("Title B"),
    C("Title C"),
    D("Title D");

    private String title;

    private Relation(String title) {
        this.title = title;
    }

    public String getTitle() {
        return title;
    }
} 
```

我将 Title.D 作为类型放入 freemarker，如何访问 getTitle 方法？我尝试了 type.title 和 type.getTitle()，都不管用。有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-18T11:11:16.467

宇轩的评论暗示这个问题已经通过在项目中升级到更新版本的 Freemarker 来解决。我的假设是相关版本是[Freemarker 2.3.9](http://freemarker.org/docs/versions_2_3_9.html)。在这里，添加了 JDK1.5 枚举支持。

# php - array_flip 无法正常工作

> ID：10809233
> 
> 赞同：0
> 
> 时间：2012-05-30T02:28:19.887
> 
> 标签：php, arrays

我在 PHP 中有以下数组：

```
Array ( [0] => Email [1] => Email [2] => Email [3] => 
 Email [4] => Email [5] => Email [6] => Email [7] => Email ) 
```

当我尝试使用 array_flip 翻转它时，它只返回最后一个`[Email] => 7`，但是，它不显示其余的。我该如何解决

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T02:32:17.333

在 PHP 中，数组不能有重复的键。PHP 将获取最后一个键并丢弃其余键。

从[`array_flip()`](http://php.net/array_flip)手册：

> 如果一个值出现多次，则最新的键将用作其值，而其他所有键都将丢失。

# java - 替代泛型 Java 方法的非法下限？

> ID：10809234
> 
> 赞同：7
> 
> 时间：2012-05-30T02:28:24.957
> 
> 标签：java, generics, type-inference, lower-bound

我想做以下事情：

```
public class ImmutableList<T> {
  public <U super T> ImmutableList<U> add(U element) { ... }
} 
```

也就是说，给定一个 的不可变列表`T`，您可以将任何添加`U`到列表中以生成一个 的不可变列表`U`，其约束`U`必须是 的超类型`T`。例如

*   我可以将一只猴子添加到猴子列表中，从而产生一个新的猴子列表；
*   我可以将人类添加到猴子列表中，从而生成新的原始人列表（大概是猴子和人类的*最小上限*）；
*   我可以将一块岩石添加到原始人列表中，从而生成一个新列表`Object`（假设岩石和原始人没有其他共同祖先）。

这在理论上听起来不错，但根据 JLS，下限`U`是不合法的。我可以改写：

```
public class ImmutableList<T> {
  public ImmutableList<T> add(T element) { ... }
  public static <U> ImmutableList<U> add(ImmutableList<? extends U> list, U element) { ... }
} 
```

`U`以这种方式，编译器将正确推断列表的元素类型与我们要添加的元素类型之间的最小上限。这是合法的。它也很烂。比较：

```
// if 'U super T' were legal
list.add(monkey).add(human).add(rock);

// assuming 'import static ImmutableList.add'
add(add(add(list, monkey), human), rock); 
```

我是函数式编程的忠实粉丝，但我不希望我的 Java 代码看起来像 Lisp 方言。所以我有三个问题：

1.  **怎么回事？**为什么`<U super T>`绑定不合法？这个问题实际上已经在这里被问过（[“为什么 Java 类型参数不能有下限？”](https://stackoverflow.com/questions/4902723/why-cant-a-java-type-parameter-have-a-lower-bound)）但我认为这个问题的措辞有点混乱，那里的答案归结为“它不够有用”，我真的不买。

2.  [JLS 第 4.5.1 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.5.1)指出：“与在方法签名中声明的普通类型变量不同，使用通配符时不需要类型推断。因此，允许在通配符上声明下限。” 鉴于`static`上面的替代方法签名，编译器显然能够推断出它需要的最小上限，所以这个论点似乎被打破了。有人可以说不是吗？

3.  **最重要的是：**有人能想出一个合法的替代我的方法签名的下限吗？简而言之，目标是让调用代码看起来像 Java ( `list.add(monkey)`) 而不是 Lisp ( `add(list, monkey)`)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T06:27:13.050

您几乎可以做到，但 Java 类型推断的糟糕程度足以使其不值得。

```
public abstract class ImmutableList< T > {
    public interface Converter< U, V > {
        V convert( U u );
    }

    public abstract < U > ImmutableList< U > map( Converter< ? super T, ? extends U > cnv );

    public static class EmptyIL< T > extends ImmutableList< T >{
        @Override
        public < U > EmptyIL< U > map( Converter< ? super T, ? extends U > cnv ) {
            return new EmptyIL< U >();
        }
    }

    public static class NonEmptyIL< T > extends ImmutableList< T > {
        private final T tHead;
        private final ImmutableList< ? extends T > ltTail;
        public NonEmptyIL( T tHead, ImmutableList< ? extends T > ltTail ) {
            this.tHead = tHead;
            this.ltTail = ltTail;
        }
        @Override
        public < U > NonEmptyIL< U > map( Converter< ? super T, ? extends U > cnv ) {
            return new NonEmptyIL< U >( cnv.convert( tHead ), ltTail.map( cnv ) );
        }
    }

    public < U > ImmutableList< U > add( U u, final Converter< ? super T, ? extends U > cnv ) {
        return new NonEmptyIL< U >( u, map( cnv ) );
    }

    public static < V > Converter< V, V > id() {
        return new Converter< V, V >() {
            @Override public V convert( V u ) {
                return u;
            }
        };
    }

    public static < W, U extends W, V extends W > Converter< W, W > sup( U u, V v ) {
        return id();
    }

    static class Rock {}
    static class Hominid {}
    static class Human extends Hominid {}
    static class Monkey extends Hominid {}
    static class Chimpanzee extends Monkey {}

    public static void main( String[] args ) {
        Monkey monkey = new Monkey();
        Human human = new Human();
        Rock rock = new Rock();

        // id() should suffice, but doesn't
        new EmptyIL< Chimpanzee >().
            add( monkey, ImmutableList.< Monkey >id() ).
            add( human, ImmutableList.< Hominid >id() ).
            add( rock, ImmutableList.< Object >id() );

        // sup() finds the supremum of the two arguments' types and creates an identity conversion
        // but we have to remember what we last added
        new EmptyIL< Chimpanzee >().
            add( monkey, sup( monkey, monkey ) ).
            add( human, sup( monkey, human ) ). // add( human, sup( monkey, monkey ) ) also works
            add( rock, sup( human, rock ) );
    }
} 
```

您至少可以在编译时强制执行类型之间的可转换性，并且作为额外的好处，您可以定义自己的转换器，而不仅仅是子类化。但是您不能让 Java 弄清楚在没有转换器的情况下它应该使用适当的子类化转换器作为默认值，这会将我们带到您的原始 API。

# orchardcms - 具有多个查询的投影页面

> ID：10809238
> 
> 赞同：2
> 
> 时间：2012-05-30T02:28:46.970
> 
> 标签：orchardcms

我在果园 1.4。如何在投影页面中使用多个查询？它目前只支持一个查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T05:04:50.463

您可以使用投影小部件，也可以构建一个字段。

# python - TypeError：“str”对象不可调用（Django/Python）

> ID：10809240
> 
> 赞同：0
> 
> 时间：2012-05-30T02:29:17.173
> 
> 标签：python, django, fullcalendar

我正在尝试为我的应用程序构建一个 REST 类型的 JSON API，并且在我测试它时，当我点击我的页面的 URL 时，我不断收到一个神秘的错误。

**网址配置：**

```
url(r'^calendar/(?P<id>\d+)/(?P<year>\d+)/(?P<month>\d+)/$', 'calendar_resource'), 
```

**视图.py：**

```
def json_view(func):
    def wrapper(*args, **kwargs):
        result = func(*args, **kwargs)
        return HttpResponse(json.dumps(result), mimetype="text/json")
    return wrapper    

@json_view
def calendar_resource(request, id, month, year):
    if id != request.user.id:
        return HttpResponseForbidden()
    thisMonthEnd = datetime.datetime(year, month, calendar.mdays[month])
    thisMonthStart = datetime.datetime(year, month, 1)
    l = Lesson.objects.filter(student__teacher = request.user).filter(startDate__lte=thisMonthEnd).filter(endDate__gte=thisMonthSta‌​rt)
    lessonList = list(l)
    return lessonList 
```

我将 QuerySet 结果转换为列表，以便在将列表作为 JSON 传回以供 fullCalendar 处理之前对其执行更多操作（即插入不会在查询中返回的记录）。

ETA：这是导致我使用此实现的[原始问题。](https://stackoverflow.com/questions/1732452/django-ease-of-building-a-restful-interface)

**追溯：**

```
Environment:
Request Method: GET
Request URL: http://localhost:5678/calendar/1/2012/5/

Django Version: 1.3.1
Python Version: 2.6.5
Installed Applications:
['django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.humanize',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'lessons',
 'registration']
Installed Middleware:
('django.middleware.csrf.CsrfViewMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/usr/local/lib/python2.6/dist-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)

Exception Type: TypeError at /calendar/1/2012/5/
Exception Value: 'str' object is not callable 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T03:25:29.607

在您的 URLConf 中，它应该`'views.calender_resource'`不仅仅是`'calender_resource'`.

本质上，

```
urlpatterns = patterns('',

    url(r'^calendar/(?P<id>\d+)/(?P<year>\d+)/(?P<month>\d+)/$', 'APP_NAME.views.calendar_resource'),
) 
```

或者：

```
urlpatterns = patterns('APP_NAME.views',

    url(r'^calendar/(?P<id>\d+)/(?P<year>\d+)/(?P<month>\d+)/$', 'calendar_resource'),
) 
```

其中 APP_NAME 是该视图所属的应用程序的名称。

* * *

供[参考](https://docs.djangoproject.com/en/1.3/topics/http/urls/#url)：

```
url(regex, view, kwargs=None, name=None, prefix='') 
```

> 您可以使用 url() 函数而不是元组作为 patterns() 的参数。如果您想指定一个没有可选额外参数字典的名称，这很方便。例如：

```
urlpatterns = patterns('',
    url(r'^index/$', index_view, name="main-view"),
    ...
) 
```

> 这个函数有五个参数，其中大部分是可选的：

```
url(regex, view, kwargs=None, name=None, prefix='') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T03:22:14.620

你能提供完整的追溯吗？

到目前为止的问题：

1.  您不能`json.dumps`直接在模型实例列表中。如果你想要这样的转储，看看`django.core.serializers`

    ```
    from django.core.serializers.json import Serializer
    Serializer().serialize(Lesson.objects.filter(...)) 
    ```

2.  `'application/json'`是 json 的标准 mime 类型，而不是`'text/json'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T02:43:07.987

检查[字段查找语法](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#id4)。您需要将 kwargs 传递给`filter()`. 这意味着使用`__lt`类型语法而不是标准的 Python 比较运算符。

```
l = Lesson.objects.filter(student__teacher=request.user).filter(startDate__lte= thisMonth).filter(endDate__gte=thisMonthStart) 
```

# python - Scrapy +请求参数的变化

> ID：10809243
> 
> 赞同：1
> 
> 时间：2012-05-30T02:29:52.857
> 
> 标签：python, scrapy

我正在使用`Scrapy`爬网网站。我需要抓取的链接是`http://www.somesite.com/details.html?pageId=<some_integer_id>`. `some_integer_id`extends from `1`to的值`100`（不完全是 100）。我要做的是：

1.我创建一个函数来生成一个url列表：

```
def generateURLs(self):
    url_list = []
    for i in range(1, 101):
        url_list.append('http://www.somesite.com/details.html?pageId=%d' % i)
    return url_list 
```

2.使用此功能设置的值是`start_urls`这样的`Scrapy`：

```
def __init__(self):
    self.start_urls = self.generateURLs() 
```

当我只需要更改请求参数的值时，这是推荐的使用方法`Scrapy`还是有其他更好的方法可以做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T07:49:32.133

这种方法听起来不错，没有“黄金”方法。

但是，考虑到 Scrapy 调用 start_requests，您可以选择覆盖 start_requests，例如：

```
def start_requests(self):
    for i in range(1, 101):
        yield Request(url='http://www.somesite.com/details.html?pageId={0}'.format(i), callback=self.my_callback) 
```

效果是一样的，代码更少。

# ios - 尝试在 UIWebView 中加载 Facebook 评论插件

> ID：10809249
> 
> 赞同：5
> 
> 时间：2012-05-30T02:30:50.667
> 
> 标签：ios, facebook, uiwebview

我正在尝试在 iPhone 应用程序的 UIWebView 中查看 facebook-comments 插件。

我从 Facebook 的[iOS 教程](https://developers.facebook.com/docs/ios)开始，在那里我实现了单点登录。应用程序委托负责 Facebook 的单点登录，然后将我重定向到我的单视图控制器，该控制器显示标题栏和 UIWebView。

我使用一个名为“comments.html”的本地文件加载 webview，该文件已添加并复制到我的 bundle/project 目录中。

```
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"comments" ofType:@"html"] isDirectory:NO];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[webView loadRequest:request]; 
```

我的 html 文件是插件实现的基本版本，在[Facebook 评论插件](https://developers.facebook.com/docs/plugins/comments/)描述站点生成。我插入了一个网址并单击“获取代码”。我拿了他们提供给我的 HTML5 代码，并将其保存在一个 html 文件中

```
<html>
<body>
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>

    <div class="fb-comments" data-href="http://www.bombslo.com" data-num-posts="4" data-width="470"></div>

</body>
</html> 
```

UIWebView 在我的模拟器上加载得很好。我在我的设备上托管并启动了 html，它在 Safari 中加载良好。问题是**UIWebView 不会在嵌入式 UIWebView 中加载 Facebook 评论插件。**

需要注意的重要一点是，我没有得到一个空白屏幕。我看到两个动画加载栏，这是 Facebook 的典型。另请注意，Facebook 生成的代码有 HTML5 和 XFBML。我试过两者都用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T08:02:04.763

我遇到过同样的问题。但在与 Facebook iOS sdk 集成后，将以下语句放入 AppDelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
facebook = [[Facebook alloc] initWithAppId:@"your app id" andDelegate:self];
....
} 
```

它解决了我的问题。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T19:54:56.840

这个问题似乎可以通过在 js.src 中添加 http:// 来解决

尝试将 FB 脚本更改为此。

```
js.src = "http://connect.facebook.net/en_GB/all.js#xfbml=1"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T07:18:47.547

意外地调用提要对话框对我有用！我打了电话

```
[facebook dialog:@"feed" andDelegate:self]; 
```

关闭后，评论插件会正确加载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-03T13:10:52.250

我尝试了所有这些解决方案，但这些都不起作用。对我有用的**是**设置`UIWebView`. 根据问题的示例，假设我已将数据读入变量`htmlStr`，那么加载策略将如下所示

```
webview.loadHTMLString(htmlStr, baseURL: URL(string: "http://www.bombslo.com")!) 
```

这对我有用。

# java - solaris-sparc-64 的错误 maven appassembler generate-daemons

> ID：10809250
> 
> 赞同：0
> 
> 时间：2012-05-30T02:31:02.163
> 
> 标签：java, maven, appassembler

我正在使用 appassembler 为 solaris-sparc-64 生成 shell 脚本，但不知何故它失败了。它给出以下警告信息。

```
[WARNING] Lib file for wrapper-windows-x86-32 not found in map.
[WARNING] Lib file for solaris-sparc-32-exec not found in map.
[WARNING] Lib file for solaris-sparc-64-exec not found in map.
[WARNING] Exec file for wrapper-windows-x86-32 not found in map.
[WARNING] Exec file for solaris-sparc-32-exec not found in map.
[WARNING] Exec file for solaris-sparc-64-exec not found in map. 
```

它不会为 solaris 创建任何脚本文件。谁能帮帮我吗？

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>appassembler-maven-plugin</artifactId>
            <version>1.2.2</version>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>generate-daemons</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <daemons>
                    <daemon>
                        <id>app</id>
                        <mainClass>com.app.MainApp</mainClass>
                        <jvmSettings>
                            <extraArguments>
                                <extraArgument>-DENVIRONMENT=00</extraArgument>
                            </extraArguments>
                        </jvmSettings>
                        <platforms>
                            <platform>jsw</platform>
                        </platforms>
                        <generatorConfigurations>
                            <generatorConfiguration>
                                <generator>jsw</generator>
                                <includes>
                                    <include>linux-x86-32</include>
                                    <include>wrapper-windows-x86-32</include>
                                    <include>solaris-sparc-32-exec</include>
                                    <include>solaris-sparc-64-exec</include>
                                </includes>
                            </generatorConfiguration>
                        </generatorConfigurations>
                    </daemon>
                </daemons>
            </configuration>
        </plugin> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:04:30.037

我建议从配置中包含的平台中删除“-exec”部分和“wrapper-”前缀。此外，如果这些信息是从文档中提取的？如果是的话，如果您将[问题提交到跟踪系统](http://jira.codehaus.org/browse/MAPPASM)中，我将不胜感激。

# c# - c#在字符串中间插入字符串

> ID：10809252
> 
> 赞同：1
> 
> 时间：2012-05-30T02:31:08.107
> 
> 标签：c#, asp.net, html

我有一个很长的字符串。在对字符串进行数据绑定之前，我希望能够通过插入更多文本来修改字符串。例如，我有一个字符串，`<a href="/a/info/a.html"><img src="/userimage/imgs.jpg"/></a>`我需要在 /a 之前和 /userimage 之前插入[http://m.mydom.com 。](http://m.mydom.com)请注意，这将始终相同，因此可以肯定地说我要添加的字符串将是一致的。我想用 lamda 或只用 c# 来做这件事。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T02:42:01.907

如果您需要对页面上的所有相对路径执行此操作，则使用 C# 来完成此操作实际上并不是最好的工具。

HTML 带有一个名为[`base`（参见规范信息）](http://www.w3.org/TR/html401/struct/links.html#h-12.4)的元素，用于显式指定文档的基本 URI。如果您将 HTML 更改为以下内容：

```
<head>
    <base href="http://m.mydom.com">
</head>
<body>
    <a href="/a/info/a.html"><img src="/userimage/imgs.jpg"/></a>
</body> 
```

图像和锚点都将指向正确的基础。不相信我？看看这个[jsFiddle 展示了`base`](http://jsfiddle.net/WWxZF/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T02:38:46.623

你不能只使用[String.Replace](http://msdn.microsoft.com/en-us/library/system.string.replace.aspx)吗？

```
var s = "<a href=\"/a/info/a.html\"><img src=\"/userimage/imgs.jpg\"/></a>";
s.Replace("\"/a","\"http://m.mydom.com/a").Replace("\"/userimage", "\"http://m.mydom.com/userimage"); 
```

不是最好的方法，你总是可以使用正则表达式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T02:47:58.113

您可以使用一个简单的正则表达式：

```
var regex = new Regex("(?<=(src|href)=\")([^\"]*)");
var s = "<a href=\"/a/info/a.html\"><img src=\"/userimage/imgs.jpg\"/></a>";
Console.WriteLine(regex.Replace(s, "http://m.mydom.com$0")); 
```

`(?<=...)`是向后看；`$0`是捕获组`0`的内容，也就是替换前的链接内容。

# postgresql - Postgresql 复制 - 仅从数据库节点复制到主数据库

> ID：10809255
> 
> 赞同：0
> 
> 时间：2012-05-30T02:31:33.973
> 
> 标签：postgresql, replication

场景是这样的：我有几个，我们称它们为 POS。主服务器上有一个主数据库，用于保存来自每个 POS 的所有特定数据。最初让所有点都直接连接到主数据库以存储所有数据，但我们现在需要让 pos 工作，即使无法连接到主数据库服务器。

现在，我们正在尝试实现某种复制，使我们能够让单个 POS 将其数据保存到其数据库中，并在一段时间后将数据复制到主数据库，但仅复制到主数据库（而不是其他 POS 数据库） . 我们尝试使用 Bucardo，它可以工作，但是来自一个 POS 的数据被复制到所有节点（我认为是主-主复制）。

```
 mainDB
pos1  pos2 ...posn 
```

每个 pos db 只关心它的数据而不关心其他的数据，主 DB 关心来自每个节点的所有数据。

我不熟悉复制概念，并且无法理解此要求的正确设置。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:26:48.633

您需要做的是将表继承与 Slony、Bucardo 等结合起来。在这种情况下，每个 POS 都有一个它拥有的用于数据插入目的的表分区，它通过 Slony 复制数据（主从，POS 是主，合并的数据库是从）。

通过这种方式，您可能拥有表 invoice 和 invoice_lines。每个使用表继承*的每个 POS*在主数据库中都有一个子表。

# iphone - NSTimer 在另一个线程中不起作用

> ID：10809257
> 
> 赞同：1
> 
> 时间：2012-05-30T02:31:37.260
> 
> 标签：iphone, objective-c, multithreading

我有一个关于使用 NSTimer 的问题，代码如下，我已经简化了代码：

```
- (void) mainThreadFun
{
    [NSTimer scheduledTimerWithTimeInterval:0.02 target:self selector:@selector(test) userInfo:nil repeats:YES];

    dispatch_async(dispatch_get_global_queue(0, 0), ^{
           [NSTimer scheduledTimerWithTimeInterval:0.02 target:self selector:@selector(test1) userInfo:nil repeats:YES];
    });

} 
```

我发现 mainThread 中的 NSTimer 工作但另一个线程中的 NSTimer 没有工作。为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T03:07:22.357

您不能在 GCD 队列上使用[NSTimer 。](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/)NSTimer 需要一个[NSRunLoop](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSRunLoop_Class/)才能运行，而 GCD 队列没有 NSRunLoop。

如果你想要 GCD 队列的定时器功能，你应该使用[`dispatch_after()`](http://developer.apple.com/library/ios/documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html#//apple_ref/c/func/dispatch_after)一次性定时器，或者使用[dispatch_source](http://developer.apple.com/library/ios/documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html#//apple_ref/doc/uid/TP40008079-CH2-SW41)来重复定时器。

# encryption - VB.net 解密 rinjdael-128 加密字符串

> ID：10809258
> 
> 赞同：2
> 
> 时间：2012-05-30T02:31:43.727
> 
> 标签：encryption, aes, vb.net-2010

我正在编写一个 VB.Net 应用程序，它读取和解密来自 JSON Web 服务的响应。我有秘密密码，我可以使用在线解密工具等毫无问题地解密加密的字符串。但是，我还没有弄清楚如何在 VB.Net 中编写代码。

下面是从 JSON Web 服务返回的加密字符串示例：

```
CMc5uJdkccbwzT2EgWri+VFrgDGeAqWPx4W/+xgCLl9hiUzrQuTf/hNo9AP3aWmT+vQcH0yQxq6eRA9PafD+XCD3bYhiNjlSgjSefN3gkWinuj2d7sGFhVyjk75b+vM/RLUd9QgxjM4NgEgBHbXJjS3LEavblRXmXvtAvvx8ON+TE4I/8TpxoUsqKGahIBPWuXxRGlRHQmIqg1KOT61qVH9Vj/6A9yGFWH8m+IQKFHA+ZZ6dmkfnkd2vvq6eLPus/zs2l6uP2dnwupkdeB5XbEibRqK7KVJF9Bj+S6RFyqE4VfCD0ouMjQjLU7zcYvNGogUUwqrsecQ7aybJcptSMl572M4wCrEJ5zFveZHIfk7nocEXDxrmre5pw7X95Gj/d2Tpy0Gfe927/JT+fCv7YIitZXFyjLckCv4QtAMFxeZaA2YPNOBWKLoRlZfCczKuPT1IGj4FONVwdYWrb0nijRvvXBQCwfegXBgI7h3CU4Z+mSbChYQrNcHgZim0E608IVkeO3xyQyAj4KtnVXMU2fljP+2FxR8swsEUdhT/9fD6NFMrNA6y78InnLBokK4Sp/wnok55SqlPDeJcWeaXsK+4ih2ZvxwdoRSLo5vR9Me90Wlh7MUhZAs0LB+hBs+lVWwJfKbQgXRRIvZIIBiBHGQyQDSrfSMmXep9RnCdF5o+J/aXIEiL0SMGymvL2wyW6l9hBRw9ffRB6wLROfYUgUNUTZNJIoVX5NXzRizB6U62+vOajMYWwAJ0tVvvmAtqJ9hL3QGHYvL1jRl9t+xyksKaEoTMNXWSh3M+/2CIRxU8rZt4YrM1droN1xvan9x/f/KRJFn90dcYc1FGrhzaV4R1QoybJb4SaCn44GK+imfyQQbm92oqQVrLEtbUQrcX34kUgXZKMIXbCF7pcxwA9t44jL1vGxPzzhag0D2OIOL5PbxIxTucPm3Nq+BZxNZPX1Zqp1H7A0+fVFRw4VTb70yd5BvQEBQVA+jk1snBqiMF1zKo6vga5IUjwT+p9ibiSpFOewa8a7vlLUzbzz/NtK56h1+Q7hBZC5Bnb3ImAXfeaIWjd82gl8CSy+cvAChbA6AgiK4sgkqIGNl8MY4uhp1xx3sf5tZADYgeIMKdzsze0yzLJk9aZi7P3gAJTzQsM1zc1t6GW8dRUtOLs5puKmEhwIbY/aSYACklPILy3vOatTdWE0Pmgs8YxCUh0ssTwYUtaIbPI39BnXhKwS6mUqaXEkbUsEmQWShhBMjYln83uW8PgVEN1GTa2VgRhUQPW+Caps3vHCcCOdo4Y6qoQvOwF6GavSSki+zuRVh5eGyLT6gpVQgy1qzgDn7sQ5wAfQUFETQIpmK+Mc0VIh9bp0HiI3oYn3mbRVzAkxY46pr5zr3iafzQpPbXdZIILuYUQy4TkKOiCPtFGAdvhedR+E0vJ6f9iw4plnADPO9b+B8ku31gi0fPp621Z2fMwaePLQ9KNVZizS/fZd2Jl4q2K4VAzPCNGGmDnurnMJYmRfmL8ydJc8qZg+nYeN8jrdVU7vJ0t8VG7mlaV8wjvfxKqI5U5lb+Oqce2QGQPW9XSCXtaW7AQ1uZaa3my2PNyyFZm20L7tHEgTFteVLMdEB9r7NdHllLsoj0BBGGKpmLCPRFLJ7MMikmWbjaOdNfeVEMzsTeyTVtwwDiO/GgWlew3rQ4WrxffIncSM/YER7FIsaiUUXkfar7FRCdoH7UiDTMrr19BjK7m2VWlePlsPClS5TXFebFRQKgWUMfjVsyI99aN5xi7Jvlenh4HgdaeCup0L4nfPs9HqVJqC8Y2p2aR2k9+itLZxlQbtLoyTJpfpLxPNi+VFdjhQt7NXmr8TraKBMbCsvLrRcnMh5s00eATcdHJ0nuW+5Bmp7XmbyKXSKawFrQ73+Nrc4ttMW4A1NMywe17kvgI9jXALCxj2YU/hVUFL5sP3g6zoIRGT/rK0DXGYHjfcZG/infHePqCfU80hUUEugLbviNS81RJDLjEh25tx93bWULRRuSVRppBcvJCjyv/uVI3cLUo2un6L2ZhEop9ZcfPq7YoifSlY125M/n43GcjHd0WaC8YWbHe3L2FYtwwUeW/sKgVJl8tU8p9e+Aw7Y4CESX7C+f0DzYY+wfVOCc4HnGV1MieWFzFQIRL5iPJ/XOqpSfAgQP2cA+OztvgeB7uwNIOINXejrHezaM8bkVwlewC9uDf/zNA5uS7JTZtUWNzmUX2LuYVCwu6eZxilBjFBCG/M8fZWVs32CSbw80OrB+/kyo7hfGkYwu5BSV4HU4q3iaooaTFwTAN6yXiuoUrLVnc8yTGotsxHxeee9hEdDYKc/Z37MdG3tGWZrL9KxNTldWJGAkUfVg2rEaf4pwpuBS/LIiA3J0p/70MPDjiYYJ9oOYtRq1iNyFOus73rxO+NXP06xeY8yD+IN2gBhiVQQ8xzRN6orbJP5zikFvcgNXi4SrVvGlb/M7G5X7VFlzJU4gp6J9sxC9ctDUmour6nGxlaGUZ1FpATc7Iy4RqJrObi3Kh/zuIbMtrncCWw/K5bIbYOlg6/hhFqqNaCA0Nv0lIxy9tryBfbIMF4NLYZDFXID9s9KLRaccB6VnpTlEOc3snDKxWmXpH9cIqCX2oxuFxqLS4RN1f+NZ5tNFRv61Iq3z2ecQwtPKYWRd3XQgjjwn7jdL9jRrqFo8ZYGU9GF6HxuJmtitf2m3xcL5CQEyVtkGFJKJN+Ts1No5wSoYgTPzj+ZMGxrvrITXvnesahL/cFcWqr2X6GYJkFfTWIa5w2RwstBYJe9A1EOdTBxxmA/uaWlREtiaG24MsuCneCrL2FqoQwgfqhuB3qH07H2gIaTRbmHuwCk/DrYEs7YhJstb/SyQibtQA3NGc/V6QLy5cqH7hKSCa6+8tM+30VYOsfdYWaqoJfQcetKUWgSBrV2RJbFU+BdS2qy3KiI8rd+Q8W+KNLeQWr9xSpVL2tVsF8o0ks8tcwTv6yqehJtTwktxqIT6ys8Sd+M3t9Wsz5Aq4ot28AJ3obK2/k37YJvDsgwrNgNaJ3Z3/Ij501ZbMV1mJvbRMdomunIt0eI587l9vgWkJTl/TfUgg2nI/zaYG5yaHKm+BefdsCDQgtYjko0DGgBuk8a0TVkuBK45Rixpg/38s8OW6GYg2uQ8PP6Zi3tvYHmwFxj6e5BHfRhWyrc2LeDAT9eDPtpu8OWk1EZl2hmmETvD54tA3N27HlQg9IwUng60nNUoqzo8JHLIPG4OVrtuF3B5bE7m4ZGEe0NXU4MAGK/tNMyEX9FlYFBr4C+3xb1nnaLjE1Hwq/sS4nhePH2HHcFBvwI2owWxhNHrUSifY/HY4A9aA2L365cctJyHv7DyGz+xcWBc2Mf7LiMmmmlx+uCO74TM6aURXw7tcgA8AukhcPvFW9D5wPgHtFPdINMCoHKOIr61rElf7UHPlOa9LMOSmOX72D8MWewNo61bDkWW59z0glFaOo4STjOGyby4HdUjm/ZnPRiW9HDbCBmSBGE4xEVajyv96ZIKPHessJJhXc9yIeW4Be+Ca2x+vdjOpBIlYct9llqa3BrqlT1q7xKSRlY7XGa13PXtikosZWaspoyWy0ETe/zLvKUK23W8+RHs2b9s5oG92lWwh/nBV9REZcTLFwxd+9esNcaLISY1Lw0rijjCUxUW6L+XdsnvyQpP9ZyQo0r0EfhXhW1z52D+7cQ7JIbKqYjAWxTKgJLF64/NfYPhtqb4xI7tnjxcNqxyMlldAGcdce2oGyVBDpTHXdeB9a90yJUe2pLLGU2bFHd9FH3jWJwg/prT65tZlmNzNVO4tNg3e0BKeM6MTH2yaWwMOqtoWGAJTEPtK6MZZ6o6YYpK2NBzTMNRUHC0xFeuIokaMoqaiLsF2zPnp8PCUlzwkZss63m6VvRCOwgMCkFIFCUXNYi7WpjapociTTBbVlUyTuFPtMyk1HejhXwCuywCc0bglM1D5BT0mQ/BxJSJC8y1JVPKyUPtys0XDgtaRhoSKGLfO+VFbmIRkzFuj7aqGwa51wTBWQ8IRlFHD0U+nbcFOU7B9k4fHZa3PDByiE+82tAiBvIuVBUZXgyF08LyChR46a1HjRWna5setsDkaIDmeeErp8tmnOm5/PPKRFeGps3yDx6xcGwZATMjiPE14PEvKKmfNTs12CAR6thPW+/zCc5YJS1WUVs/1fnmZL8X+t60A1D0af95XuFYg6SWkul50SFpbPpCgL++0GOMcbABT5A1kqAce9WYGv9IL03kDbXQ/rZS9vgNit4ZDi1vOSHS5tbdGabr1SumiJgkb58S0cZ8+lpz8G1vr7mWwfdQcO+bA5o0VCUWoPnkWP8VCVu5o9k4hSTAptQ//6aHL3HF6FmEs+olYSr/9JPOgjxELbmHW47CqWypIbB9Lbr67FITWTxPFGqPQ+1/8BqMglg2/Pim69z2vAxLDQjS2NE0oM6fmq9xkSfErOWrduWSHRAGJMQ/3/qDWN0twvBPY9tMswIDHtMDZJzX8OMl2yd5KXPHqHzBvLnZ167C3NuV7OjxqjacjqawCem9df7fSiADJc+spSwC6fCHCAa05+8xtiHv6Xnm4ANvHRJ3rMLEhZU+JRxY/gJOj8ypiS1Scz1PrJWS9iTpzuuH1Fk/bz17cqpHcAWRyA3C11gz7fHLIXHW+zvXE18iCsbqL+oBcg1qLfxetAFV6ctNjaHGVcfhrvEEB0cFRYjnkG1JveFeXTaYUjB3AEP9+aKCScqPJ5Nme/kdPTlY5WQP3h5dWxmX9qO/LdQbxiFZBYUofQioCryWNvo6c/05QqSJZGydKprtRiMtORPilxXHm2rFFsszV4+4pCMTolRprVT/++SWX8DKFOf3LgeRPQTg+Y/OqpjRgeWZw5UhMI7nYCHQBoA2LkPsVQdZZvvksE9ziWumq4PkI9R36uMIY5iGXF92+0UV9LcMjMoOhseMjhYvfyi6IebQayAk5Tgh+vPjeadRHyMX9mlY5z6Gz584d8cGBlF+n4C00c3pY1csrBRJxgV1O6a3KEi6i5Eq+wWXF91hyxbaB5lHNDjmgLFxX4+JVq2ikiZfl69e1KgrTjhmCRou2p7urJ36XB3G6ipHg5Uk2VCyf18bGxr0cG+Oi3CoKB+lY9oNLCvNm8Ejw+vRQHBQfhB/k3Y279nvUXjb8iMHFpd0s0sOJXy+3YfSnogqt4slpsuBkJmW65ta59NFLkQK4jY+qdOF45JRbXFVzM2XuFgCykCA2++Di5mSij8HWPRJZ+maAvCc5GCwPqCKnn6IxhmGyvXytTTkfE9ysKOKcnurylum48tunCsQdvMxdKa8Mv2SXs9n7iCWXBjEGSy2oVgPxe6bHQScaknBeFckL/4XGAkkmv7k2SKkVxaDUsKH0d6qxHyPiP6igui0KUmPPl7tfTgqNlMPRFWtAc9P5l/+JzXMrIBSytamM/t7VZFvl1YTgLvi8G/oZUwCZs887ITurWQftvZjjYO/8Ff+jvxAZGljKJZwL1EUjLA6/wiZDEFyJ71/vh1bEzRte86cn6jMiywMvb8EUtblGVki2sLlo8hBC5/ddxTyogRICygAExsp3moDD3zDn91nOkAzmV0g6tya037yo1448Rl6Jb3SwAx66M+fL54c15fkKXrJWBivIBW1v5pia6gxIRNJbCqjnuqd6oOrmA2N1B36oFuA3bbPhHhWDyCqySGc2k89MkBaO4lZGYWLiLy+1iuVxdO5HRdBWh3vPx6QxlvTe+r3JunmAe15aWK9h2k+BTfT7xMQZWMCoXOZ1p45CoaC8vN2pZuolrLv1d2D5UIM9pGwduOpej0ppCWm0sAeIxbdWEGSTSCNdDK4nDzsiGpdt++1arHiWShrn0AcLQv95YG8elsD2qk9+9cSmddytp1MZFL1baaz4TiPDYDfTvr6wFlNWmx57xvo6zhqsE00Z2BoLFFMw5G7ZCBSnV+V91UQYtZpfdFFpU7gjGlkzMONAGrVUFeM+yLmstrAEltDDj0xLONrYplpQwW8xUGhP5id8aiNavMDyaV4CF4Ct16EcICXGhyMjAAQOEbnLtdYMAPoZ9klF2wXpwWmzdtata3s4lULb3fCZUhBRLAh1EFp2LMvKoriQxoe+CfrHv7omyLeFe1mbpogDLHz9KYFmGDCiSPnZS0ids9IlmV2Q78Xh9BGwQcgQ6w1fL4Taki5kgEv/BPAVTrlhLChLr0Q6/FeCdtEoM00C8TpXci2QIH9y/BCnjijy2jnb4qerGlVgPNqH+Iw5I7NihauVlEQaiGwOROPijaCY21T3NTeBLpSOX6OU1Pj4L4XBj5pD26sW2tUbPUTcpdSRB1dFvPVerAiduYsWabbP3IUENDOZa53h+4cwUOGuNZnbKz/VXQ+wFDw5XkEj8dJZWDB8WymvfKstwN+eTvVpDUroMJMlWrOv8ZnmNjUVMqqe5g4oJ8PWJQCgS29/I5UIgIcR4f347XY2m4Ybv9BLj8VOwIDv1VBdHYLqvS9USnOAiuosK2TPWEtaUPxbtuHZOz283D+El95y4IqInUw4NVmoFL9SpGCS1Inc1K6InGRKB8+EJjNEzxuwbEzv9h/lsIKy+ezfiTVTihu2mFMKktDvDXKFcryksZTEK7BxH3wBJuL1wyHaYXuX4mXxLAetp9KJAg+CgoZn2CqK0U7EnXotYqjShQXbxKw8EvBOuYBdA2ij13fv9NUpUG8mGksGHwHLwHynrQ506V7ucPUwoxnBjUOaIQwfp2k7fwHY7yXMeS+HlWhkyt5bjt7WGzFPY1QGqMphOgvMYzlK+0KCowqsfoB1wEhamDHqA1mkAVpo23lEfr6z72yF9302VTLfyKCZdehl3JguSAO+9SwYObs1ESdK3Ylsh+kkxLCmYZX5IfV4TEsQnzr8D8Mtj1jcl88JyQcDPDZ+NZFQuWTR1r3kpzfvEYOUYX+2uhkhzw6E/o5zIHtvxjcg82v6QQEcaAJyazo3wum0RBGVAKyv07GdvFUgsFwZu19oajxJ5Pkw+lJ9fhCT/8VRrlZCdbmmudr5refshuOGJP2D+4+4tv2EBt5tcKVYmLbdM/iyxk8ZdRA6xahl7xU/q59FHCxA3G0SnUk53pvqkgLBSmbaI0bmtipvyGSimmc6JDsAh3mc1RuPaZJcGuuMDJyX3tALq+vYxcpN/kNBkRSoWR7P6wyAnECSUC4+rgITCLRYlMRn/7DbFveAVinuNdlx7MAESKJxlS9ae9zBZeqcow57D6HtkeOn80sJ9RhEM8xrFjYJZzXvypMeLMngY8T3ugFY+W/iyYJL0ErOC2CzOa2c9+PpKpQWlmzAdxOUVc3vX0IC9VziRtJ3fI+/y8mWZwIsc7tSWn9xGcVNBdJNf0df4vWF+4BR4tyj5XYXJTSJvBbSrKp+sd/FCz4bOA4tuQ6wDUHORmuL4EXDejf9VWA6r/ZFPbNkjFB7NEe13oTrYjD+LI43YiIEVil682w5xPL2+d2J5RZBTwMCup/KqLCaPYUtp/iH3VZev69A8yUx3UbjFwSvTsvopSRacMIZB8uZgvJfE3IA6n7q7itrp16CFCvelkdoaiNsOblyMyU48SbC9UcLkDmlSreZMNOp1TxEUCT/Mi3IQTP7+crCm0x+brVfOYJDoUz0qtziH2abmQq9f6Eyr+Ktlz/DyTBp+MUenN6I5diGySdqE2Ck34UDbPqvzeQQAXDnRPaDb+YUx9ShN9yMZjX+7Wz9RBCh1R92ekFU5RtmwgySjK0ktBYNrKhDCjQejMP9Roa0rzEVNdpas9nkTWZmtEU89yq15u6eT/Lj97EhyKB97liVOnIFisUNkoUs8TYf+/un81/z0Ss+0rqIri7t/SwC1/QHySAIuwverin19NHfln6TXGvMRHQllK9LL/b+BkyE4bJafxC8tnJZNRRsajA7QBL1LTQh+3XyM7gQ1gLJDoK14gzIDoUkvVCwX66If3Sn9IpTwMtFzZyoRPf+yVBb45kbe/eWVfVSZ5AmnbI+fzX39cBQj4IO51MLxHtrUKAyy+jy/74aLkPQexXJjm9aP8dSeY6rhdtNusDkEe3aRDzdS8UtwvY3mXZlEv13Bg09A723e5qkWBqW1pmaoUFh6zG7KThfl52nq0vgNqWLSbVkMPJosSJ1Wd4K2RjF3mkNbYnuVr4qnYiU8mg1gI2f6H+tBImLvp8sv00+s5cRxyj594C6TgfFzfbuWHB7xce+Ng/5OCraAnjpL7sNqCABpE9P37yUXQStKN+KMCtj3MFfcRyGEqxg7qBqD2C5phtwUJz7UMych8BzOwzwKkH+0TJwLbmgxOyZGUvMIIVfUQf83PuyYFKY1zyqoMr06g2SfCbGbah89R+r5Nl9n/0ky2zLp9dKOiXxv/M2qzDEurBRVuvsnG4r7f2Wdq55RdqwsQjFPXiOFpxV1tX8P+LRD+24UtPeeXgRhM7cz48huNORQNvHQild1Bw6gDMxa7VutVMnZIgvge/EnRBlnOzu3QU8frYYKv9IkaWvoQ2Msr/uMK+7kganmhKAqoJiiRjA3Esrgy8KwfRKVzxMP8JB4K5M/riI4f7NFQeNLYXIWHQcfswm0+v8rXFGhMbvrQxMYq9k9ZDyN5HWZZs4MWkHyEhidqAGtnrVbHxgfI448FancR+doXaJPF3ROiKkyjJpHw16ceTAvpkfuYvSxos0HLADgE1GdCxRLnxJpbaF5WYOdmKzpgRGg3lTlQ5Vp/TUtMtOR+VYyGCXSrdo87MYeamyhBsavizjo8dE1S+EBeTlXKgzXvvzWAuWVgUxtJKMQA7u6/QEqaZq6U200+pyoy/jt4p2JZPzQJ7YCpdvIWwEZGQWBIM1Gd6qFUiG2dqncI4tV2V7TpRlPziG6bJIACcWnLaU2E34hgcDxt0M79JGX477RbNTKTgtYDtfjeenJklrV9aVl9SHmLtKpvEZ2q1oLbrxSQ5SolJms7OMIf8EGn19U8O6LtiajxKXhI2p0+xLOEJC3YDz7eNudhNIBGodiSlQEh1gQuYQCa7nBHEYtgUpz1QwXYwXP4VfdXq3fLqTUiNkc/Gz228OHfoLdLV1qwXoQV+bhlThNT7Hfftr/kJ7OI2dNAJuRYw+hQp7e/jrNdQg49nHnBjHAzl5wJYPC2SD32B7A0Eq202hVCGJ1Q15qZT1vf3abybdYPybS8mUzbDdyrj9BoSlnborboIxaVyax8bdB7e/EvURaIEAwgannHgg9svVHY6o0i0Bvzw9XOqZ/fot5c3UFGAowSqDOR2IrV3FDsMHYGR/gleUHSOekccqmozjqhWPtCupXsP+LZeIegbOI7unGC63UlS3IBxC6ZGVqJ/2H9IR/FAJMVrXQ8SFeg/I0hlX2bSZ2QSM4tJrwVCOBzTr6gYdcKo4awgsC/1bzpj275l8B7uZHUGb3+QKPQx7hAGb/B3HW6Aifvfmk6PYXYzdu1Rjhynb0PmfRqtiUrxghB03MPReJ51mUBA+ontmDdO4eAIHVBWQ7bxu1GSaEnBKIC+GnsvAuNbACl5FSO1FwB4khcwmPUQuAay1IAT3NgGBpgGU4mbrEt9v4mJZPbm67mYrUz614jCnWjM4oelGEJjyr1qspHtOjgTdE7vPOU2cIHgT22cSSoL0Y9NRWyrdYZSyEqR0ocjWlwwciPpNeqksecf4BGJ41itJd/w35CJgC6W3u1CBrjdYnfj2kg7+cmu5ozvVzVuOkgy85RjLABNvYBd3/JcTyOitDasKBtU7vNLmUwmSdmu8tJ4TyAcxbX7+6uSyCLoMq8sMFmxVQwUtxmiiPnknygLUbOU1DMM1KdHrSsR1/DxQnlnkaaBtTGC8knHetHwiAbX7w9EXYa4vSm4i6hgQx3MJvu/tVD2bRX+hiEqJ89gJ/2H0EA/UOnmAbHR5pdqgZSm+4xHpthzbxcLSsM+vyEfMSK3v/tN9umaB1w1jjJ00rpa7GEprlNN2SBEz0Voyvepb1PVP4X3DgXXazcNS2QAdKw/fHWHR0IFQO4pO/7mJCVmp72IB6OfRq2E9nxJNkSJUVTwUJrRNYwC+zc/6Ur4AB49bRy3Vl8Z5OOXYuI0jGNoa2n/NE7+6CDhndeJjYhCqogQmU0j2XqP+A8EnHwPcMpj+Q7/+f+rwIDEE0hzx8Ja/gH5BCFWG14KHGoo3di+oufYNx2E1L6lvBfUTi3DyUWkPOH3P/tDPMLodYtP75KZXon76Rrmuxgze9XUlZZSoC8D/BIMf3+gzyDC646S54vltAg4TtBiooxQ8WXfiFK8RtYUP6oRi0OH8zSTR0oxx6OMxLTNjgSEZViGEf8yKXZq8bnV1iEJelBfFEZdKpdJnthWXEpEoTYob4FlBD3VhYYquEeN+bzy1zijQ8DkYjblxrhZuPawlwN+BGCrmVxUcLn+R7xiq2BmT0/dPyDv6PD3gfMFa93OpoJzUoUropDHw04P23sqW37JaufQvNO4I1BwdAf9jFt6KOnmk2g2jLgd0heAv7PXMCDHdXzH2fZuDK8Oro1/XmHuPLDo1UE+DGxVV9rUUY7S/yau6EWGKFyme6GVcfKbQpcjmYPTXTH5Ri0sfsnNNgjI5Bzbf2GVxSo3Jhq3Mgle+5h6tjj1AQN1UWBju5b5WM3Jdp1DVCqwWpGiN1655JJRUdeu7N9UqmMqt+JtXWjm2Nj02Gh7z5F3p4KFHS83DHXmYlpKeGbnFZdzTQrdLZ6f6cmjC0+c2LvyQbcukorRKFD///QRIn7Umjx01yZJyTMa1FpQ2dhO2z90ofqwfybfXGZdwsRM/Ky1POj/aBXeEDzTQ8GP4QM+20IO2KdcBNSUdo514Yaequ78yWFmSGtUcO0Rt9gjFTNCMmdRzAIkCiw3xhgOza4y+hB+fU0Fs1ncl+6baP8lcL51Jv7EnGXCoADypHkoH4J+BqV1JuqqhcM8/yhl6QUboG1T4KjbF88f9pRNh3f+2PcViIpya8OzivXSx48XWjVp6RlZyFHCAaXhSsjZ4WllFGw4ZpyOdI1ShYrIFZ5/jbmrSc6ssnpa7CEU9PnH0HD/vHSAhMiKBMqQiYWS0cO4+8a8VEpAh727gx8AQe4GQ5Niz9kamwkxaDCtbLWj/Seof43DngutVTCCaMvq7Edna9/JDkJtZ5LpJGqBU5xz83QQWJ0dLEL+xhtMYIPKDM9b5rTij/plvc1ylzDbNSX+j1+QA8dSde2dkSW7CjcxwLQtZkmZs9eT2cqA7obgB88nSyyY07m4HrNNQ0xPFJqfXS/2CAl+AlDMfDZEtINL1r3nvvYWv8wkDIdaVLTpeYoxOWk7BMwN6qLRyyI53T7KMY69Ioud6xIN4/622oAuFw7N2SvNoeAbYDiKxFg3d/PIpUzX96tYKRLDFczWVW5pUd+wV4otKXOWzQD4Lnoh8fJ2lMXJib0aZRT9Hz/QCyk5SXRgboq+Jad60h3xWbPaiX7ZlPeGfkqgHje0WX3fB+wb8Uw05GzZMOiXtHYAHBk8UcDjFrWSSfMLI0NdK1RY/N0byvRPskDWZw15a14Aksp/aekTBc4rLeUkG8t3TSVyTJgTAzNCmcRVYp8GGBFtxw/1BxHyDT4JfkcpuSbCicMQMWuYyKrDFX7yva2VA/zQ7T42yfasY6634kla/iKz2lra3/LiQdGA9kk3Wjh9kncYicEpG8Yy/FMsxTw+tUAuEUjokdPVxeZWugrY6FaGq47uzWwhujXzwn+3IhiqJmVya1ZTKuwzhwpllA7yoVNHmwdy4c+c+/z5A4WgOkzjplyf8bCmgySoqHrtaeymGBRm9axIJQznaCJtlzUT4BYvrNs7CKauXlRhN+iwYC2VQM2LyGC0Mp1AtjsHgC9LYe9DDvOoX6aCZgqUPda1Ejq8XjYNuz7R0Hoz0UYuRzQjxr1uq/an4Nf8pe/ns9JuR0ajLIJQHWGZswPUYZl/83xTrDYs0+9Qr3690pvmmV4X2BSQdAcyyy+MPCNQHeZSam1bewqg4B6DJf/lEkM1N2W8RXrmLZbFu6Cg50Nh8mX8mnpWwNx82YpeF9tSCOymHHT2m3pvHrBBHg6AgNxgdnGtmaUfjz/E8aaBiOD89p6I7W82xgOJU0WBaOLE4m2mZ5ZVsoHLl4L0bopoEIktr7twBRLomO8Qq7niVrOC2oaolg7F1VOPTQ26W00v2Afj+t6m0sraD7oNKwboiHpOcmF4BiKlNWvDHWNcTGjP37UpKS5oHz8s/m6/PkKJbXaXr4YLByvRLsGtRvmtiQ77dT1iPcAurf/EiWu4YH0PH/G0god/YopEWKsf6egmYgo05Xp+2bR+t6zoF95bTFJRcgfDQlIBgGpXmZdqFpsA7PJnGDq6kcHzOZOeA+SlOXPGnzZ+Kbv6a4ZMfJ9BL4S+R01k63Ucaty96RSYsfEa8XnnMPRC0MV1wBSLX7sOFFDgi6K/5lgsLKeTVS5V/YPHORAcXCzvXmrbcKxv9GXAv/EFD60IImVdhR+ksDq/e8E0pzuRWYzOwaJLxhMbrKe5KZNtuURVJ8nkm67qghhMnzZgWemdUI76B+kWPE9YxVoKD4OrFdqAFoQftAwZq24538K63HgSpuSPsyI75MEIwY6LQHeJVDLb+cL60uYsEfspl07rqKyWOrnx4hPkkQZuZdyIEOR7J8h7J1/DzjGsFU/9jz1XE/+r4EPtk3rKGb/6BHAW+6DDr3BjQhJ1dJQyikcXXVwZ/p6CUgiwrWikdqePiYEZuDgaGWvQnD1lYh6fqeRkYI0VaqmwZLPKnU8a6Go59AfBKaA88x2eTCcc0a2R7sN7ctJdvG8puU+9PB2L3CWWceDefKHLPLWw3Pg3I33s3uzHpu+KbdYcKBgfqxCvu+XrZNQPUfWeXW3sW7w6wsXZqihbIibmEZcq2i1hDK+ZFryNtHiwDcxlQQ4IXwbhRpNG0D4C/pN+dqQPGLLM5MX2Fkn/x1P0gInUbmgvEunFwxfheI0F1pYkGul+wbWOnPmkA68q443WssdfxtM1HeR+5PnwOK+n5x7qUqZLw6OhQ9etbZ12lNYCw5hpaA2Z50IhQ3YNWI5CZ9mImxY8bWIGeb/Uy1hFo5P0OwdFWpkv/jK+GQp9+GVT7Rq3VIKLYcUZk/UC1Pi3a+nJnd0NXlYAoUd63nma05DWjO/mAx5SyrGqLk5ETuU0RCBS9JuOFqToq8mIx/Iu3YtZE7vyRGBuSP/PaHFzwdqzXEsQFgW+BS8AeFsNtlNduL3YukUT4MAMe/AwnxQ5KNc+S2Ke1WGUG3KOPUXN86N5jVEXE2V07B2VoZnkZS9OBe+/+sYWDMu95zptIWgcy+XiNTV6YgVeKsGdp3uPscpXWqBLjDKW3W0/oKLqzlybBwI7ozrm1zN4ezUBiC1C/qOxrHvhpYMHbFjiiqatWr+6SJj79NUczxaP7Lox4TnmFmZpCi4ohAMIflcz1tpq6T6eyvQkWzh2AbTjYN5etnp0XrB/LxJ5koUceZg94RMePHJuP+YRojuFNSuqAY7Q1WFwkvS6CDIiXa+aBz94eUNgr0aO0ik0KsL0SQxJ33nDTy1VjZblpg5o7Zf4umYLXkoS3J9sHqfIDcRff9fT/97wHQfWFhFVQ4CehANHyyPvXVn0TeFGnJLva4yMFkMxIwEznEMHYtvrs8NQiZr5k9uchGpPHISF7eX6QZVBWIBSKYLTdzsVELIRO6pQXRWaBgYYn4z+91x0Yf1pi5pFRizgkRxX1MlGY/i4l21vuF8NLFkc4sMxrtY1Hjc1h+wUmCnlYD88IGzEw7dWjO1/5iQReHJXxXEbIw0nAOKFBV7U8J07KIO9tcnHMmioTH7zj931TPh3Lkp3Ka38AAaKTMAPZgZw02cZ99xHFfPUI2yLq2LYo+DKzBY4d7Dyy9aW5Wn1Iglmm+O0CRAo2vR4Sxm3uw8Hvdvz9n1cbPGrmuxVO6X7zhG/x4zKPZz1A/MHrwyqaZueR5dGS0sHrOiQ8NxFC+cCGfzKkHlq4vmrIQoj1o+OxbYOj0BkyXIQjmIYRuMX2/uNPtbvrK1/jG78Wu74hHZpde8pRcemuhJ8VO2ttiiCIuEcs4g6/kuz7KIMurhsKj4J+5xR2RpFGKaqeQHYTxOB/UW08t02+PSIpZWRHFXogj7FOklpJq0Jo8k/BFoovZVWKzN0eFrV0lmcnquXkbTHtN4kptq1FYZybdyqj5B4n1XWqxgim3WZkUKJlpe8YPYt+1A+UKhRlMinvZXxnJxT6LXkVWNUdkz+6tVCHUY8Gz2YNV/JwQUYrc8DAsWELXDcHmNrHnFcfH5KdLEX/TfXw8s7mJzNe5war1EaLaCEAWyeuYPp0fMrIoIUU/muqwTmCbvGd6EcQD8QsfI438IGcyEQrQ+HseImHGfvDQiwVFfmc2rqLIf6Vm9J4D1W1EP/fKQnjT+CT9EIjoTAmBaW3dyfdefIUdCtQSbiqe+a9gcqQkWNguEuIJ/VwH9qm0tzZrldTDPayhts0NIxHY+AGjD9P8tIEeWX2QqHXRfJFQ6Mb30LULziwpEYCNvXQSO0c3FO2h5rmqK2xnYNm0X1ajyyv44dJFXUsWzbC/J/gP6BvnNUCkuSDRyOyFJrvMpKsE/SBSd6qhZO1HMxIdtjATdp0SMKJQMLJpCTOfVPP39KYp/YZoDdECx0wGdq/ksRtbl2RVIlatfLTG9FsbiZGMHbrToJczFO6iN6w2Dsptv/CHG8ZL7j2j1B7wkMajwLxDntRwxwSywx8+RFbNs4Naf9pmwtwqBOdDsh5Q0hKsvxcZVa+Aa+e9G4RWkRAE7nnSLd7fDV1EwyJc6ScP2WYF/s5RQPvdLJoGKAkgpCOwfeLaKzetyu4hUJDbs8ob8H6sPk+gVp5ZcoiEZG18f/gtXUqpZJE37f4qlIIRllwY6OMnUpWwKzRQ69HxRa0MZxvnWmrK1yVyaqYsB4RkZvkBJlnINmdAplKlXeeRqCjYze9VnIyhxCl+prYRDSX4xFZaVswce3OoaKezzToyqdmIDAx/J2PCpupXFYIxIJQxe5HpXBdI1JnnRmP6bUshCO3qK9q+Jxs0Ch2E7alsqOCPdsn/knvG06VYXEcRkbztP+am9hA3DgquETplscCEOykPKzKoa8ryUOa5f3q7B6PGEaRdTwSeqsgjtgrirDbTcAbF3n0LRe7mZA8/qWwOITnCzZyqr0wR6/qj/xwFzDdMJieP286AkneApyBJIkdAsq5aKagUkT4YNRZrCWngk3G2zs4CfSDx2EK1ZzIVGQijVOXpUAvCvJ6yNLTquustQ8ABJHCRe5IiEf7Qp0mzTBkttrwVogOXTz9xc8KMrdXJxyhiEgwRQ6dPPhXJSAgpDukJPgPOzWxIle/KdPo1tHKaoSeDX9AVucFavH/Guja90zoyRsTf51D/RmLt66ISlYuFp1RC0UmDmDRwxNxj4OaTlNIQn1UTxJm0VUPizVniVKhl8B76xnXO4CDxhm7GLOOvJ6hnuP23HaJ4NDRNc4oEMGbJ+pMI6eUz2lS71A0km5AyuhqynOW5C4Azc/5RqOvN+08VWOcZopvjPjnQ64eiUxR4xsElcRF1IcU4gS88odd+x6hg6ix7u9cdC4Zo3qtm39IlGN8QpmrdftAZ9wRoWm+X5JSnFZ896R2M9nAcNUJooogc2HCQF4ZSpitAgUqL4BbwNqLZw701y+YoT6Ne5zYVArfrUClacW3GKXdBqc8bnThKCh/RykKScKLnC9kw0w2EWZ7tWh3vMvMrX6il3a+NY+IPXnmogF06KtCemjrjh75NEx1ByZKHFSfN5pNeKFQJQ69g6565rCoA6M1kMCkuagzj1WpveYoJrRb2rQl/Fo1PnS3++Z66ue9FpDHWINSRY2f2UQA29Jtofu5ZYKD1iupAzASADDjIwKf1ni3BvN+aR+GibW8IALL/dewvlDskJd6x8R9rf3UBo8SfFolF2pWT6jXyD0x/OmNHxLUHBD1oGdjpBBeQDmdIzYJGNwTCZqAT2aytAv2rPH6P/anGlsZgxtvf8uapc3sn2CyoXxmDF4D7DAtdL/MA== 
```

钥匙：

> d40da16b8bc6b5e33ef3ae5f704edb2b

我知道这是 Rinjdael-128 加密，并且字符串需要进行 Base64 解码。我似乎无法弄清楚在 VB.Net 中执行此操作的代码。我已经在网上尝试了一些喜欢的例子，但我所做的一切都没有得到预期的结果。预期的 JSON 应该是 JSON 格式的字符串。

这是我最近一次失败的尝试：

```
Dim rmt As RijndaelManaged = New RijndaelManaged()

   Using rmt
       rmt.KeySize = 128
       rmt.Mode = CipherMode.CBC
       rmt.Padding = PaddingMode.ISO10126

       Dim ciphertext() As Byte = Convert.FromBase64String(json)

       Dim plaintext() As Byte = rmt.CreateDecryptor(Convert.FromBase64String(key), System.Text.Encoding.ASCII.GetBytes(InitialVector)).TransformFinalBlock(ciphertext, 0, ciphertext.Length)

       Dim decryptedtext As String = System.Text.Encoding.UTF8.GetString(plaintext)
                        Console.WriteLine(decryptedtext)
   End Using 
```

我将非常感谢任何人可以提供的任何见解或帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T00:12:19.183

答案是，在大多数情况下，与其说是在（字符）编码中的加密，不如说是在知道如何应用 IV 和填充。如果您更正密钥、IV 的编码并使用正确的填充，则消息应该解密。

这个答案或多或少总结了设法检索纯文本的评论中的建议；最重要的是，密钥是十六进制而不是 base64。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T02:05:33.303

我很久以前构建了这个dll。它适用于 Rijndael 解密。我希望这可以解决您的问题：

```
Imports Microsoft.VisualBasic
Imports System.Security.Cryptography
Imports System.IO
Imports System.Text
Imports Microsoft.Win32

Public Class GateKeeper

    Public Function Decipher(ByVal vstrStringToBeDecrypted As String, ByVal vstrDecryptionKey As String) As String

        Dim bytDataToBeDecrypted() As Byte
        Dim bytTemp() As Byte
        Dim bytIV() As Byte = {121, 241, 10, 1, 132, 74, 11, 39, 255, 91, 45, 78, 14, 211, 22, 62}
        Dim objRijndaelManaged As New RijndaelManaged
        Dim objMemoryStream As MemoryStream
        Dim objCryptoStream As CryptoStream
        Dim bytDecryptionKey() As Byte

        Dim intLength As Integer
        Dim intRemaining As Integer
        Dim intCtr As Integer
        Dim strReturnString As String = String.Empty
        Dim achrCharacterArray() As Char
        Dim intIndex As Integer
        Dim StripNullCharactersFunc As New StringHandler

        bytDataToBeDecrypted = Convert.FromBase64String(vstrStringToBeDecrypted)

        intLength = Len(vstrDecryptionKey)

        If intLength >= 32 Then
            vstrDecryptionKey = Strings.Left(vstrDecryptionKey, 32)
        Else
            intLength = Len(vstrDecryptionKey)
            intRemaining = 32 - intLength
            vstrDecryptionKey = vstrDecryptionKey & Strings.StrDup(intRemaining, "X")
        End If

        bytDecryptionKey = Encoding.ASCII.GetBytes(vstrDecryptionKey.ToCharArray)

        ReDim bytTemp(bytDataToBeDecrypted.Length)

        objMemoryStream = New MemoryStream(bytDataToBeDecrypted)

        Try

            objCryptoStream = New CryptoStream(objMemoryStream, _
               objRijndaelManaged.CreateDecryptor(bytDecryptionKey, bytIV), _
               CryptoStreamMode.Read)

            objCryptoStream.Read(bytTemp, 0, bytTemp.Length)

            objCryptoStream.FlushFinalBlock()
            objMemoryStream.Close()
            objCryptoStream.Close()

        Catch

        End Try

        Return StripNullCharactersFunc.StripNullCharacters(Encoding.ASCII.GetString(bytTemp))

    End Function

End Class

Imports Microsoft.VisualBasic
Imports System.Text.RegularExpressions

Public Class StringHandler

    'lets get rid oof spaces
    Public Function StripNullCharacters(ByVal vstrStringWithNulls As String) As String
        'This function removes spaces from strings

        Dim intPosition As Integer
        Dim strStringWithOutNulls As String

        intPosition = 1
        strStringWithOutNulls = vstrStringWithNulls

        Do While intPosition > 0
            intPosition = InStr(intPosition, vstrStringWithNulls, vbNullChar)

            If intPosition > 0 Then
                strStringWithOutNulls = Left$(strStringWithOutNulls, intPosition - 1) & _
                                  Right$(strStringWithOutNulls, Len(strStringWithOutNulls) - intPosition)
            End If

            If intPosition > strStringWithOutNulls.Length Then
                Exit Do
            End If
        Loop

        Return strStringWithOutNulls

    End Function

End Class 
```

# encryption - 保护和验证从服务器到客户端的数据

> ID：10809259
> 
> 赞同：2
> 
> 时间：2012-05-30T02:31:45.597
> 
> 标签：encryption, authenticity

我想将数据从服务器软件发送到客户端软件，以这样一种方式加密，即只有服务器（私有软件）可以加密该特定数据，但任何客户端都可以解密它。

起初我认为 RSA 将是一个解决方案，但据我了解，我想向后使用它：我可以使用服务器上的公钥加密数据，并使用私钥在客户端上解密。这可以正常工作，除非有人可以从私钥中导出公钥。那是对的吗？如果是这样，是否有其他选择？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T02:33:30.473

您要做的是对服务器发送的数据进行[数字签名。](http://en.wikipedia.org/wiki/Digital_signature)所有客户端都可以验证这个数字签名，以证明只有服务器可以创建它。

它的工作原理如下：您的服务器计算数据的哈希并使用服务器上的一些私钥（签名密钥）加密哈希。然后服务器将消息（纯文本）和哈希发送给客户端。当客户端获得这两条数据时，他们使用服务器的公钥（验证密钥）对加密的哈希进行解密。现在客户端可以自己计算纯文本消息的哈希值，并将其与服务器发送的哈希值进行比较。如果两个哈希值匹配，则客户端知道消息一定来自服务器，而不是其他任何人。

注意：您以纯文本形式发送消息，因此该系统没有保密性。这种签名机制只保证完整性和真实性。如果您还需要保密，您可以使用传统加密来加密消息，而不是以纯文本形式发送。

[TLS](http://en.wikipedia.org/wiki/Transport_Layer_Security)会做这类事情，因此您可以考虑将其用作数据通道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T08:20:10.950

您的要求几乎是 TLS 的单向身份验证模式（前 SSL）的教科书描述，也称为服务器端身份验证。基本上，这就是您每次访问 https 网站时都会发生的情况。

但是假设您了解 https，我想您尝试通信的不是 http 数据，而是其他一些协议。这就是 TLS 的亮点：它在传输层上实现，因此与任何应用程序数据协议无关，您可以通过 TLS 加密/身份验证的套接字发送任意数据。

TLS 经过实战考验，与安全传输协议一样好。您自己推出的任何东西都可能不太安全 - 安全协议设计是最难做好的事情之一。

# .net - 新的 .NET 应用程序 - 对简单数据库部署的建议？

> ID：10809261
> 
> 赞同：0
> 
> 时间：2012-05-30T02:32:17.770
> 
> 标签：.net, database, winforms, entity-framework, sql-server-ce

我可能即将着手编写一个非常小的 .NET Winforms 应用程序。应用程序是一个简单的计算器工具，将作为与其他实体产品捆绑在一起的赠品。应用程序将在客户端的电脑上独立安装和运行。它需要在同一台机器上安装一个非常简单的本地数据库，并且还需要安装在用户电脑上。

有人可以就db ..建议最佳选择：

*   部署简单
*   保持成本和许可低/零..即。用户或我无需购买数据库引擎。

Access 运行时有可能吗？SQL Server 似乎有点矫枉过正。

谢谢，

巴扎形式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:38:54.563

在最简单的情况下，XML/CSV 序列化工作正常。

SQLite 和 Berkeley DB 非常流行（后者被 subversion 使用）。

检查[嵌入式数据库](http://en.wikipedia.org/wiki/Embedded_database)页面以获取更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T08:12:15.340

我会推荐[SQLite](http://sqlite.org/)，

> SQLite 是一个实现自包含、无服务器、零配置、事务性 SQL 数据库引擎的软件库。SQLite 是世界上部署最广泛的 SQL 数据库引擎。

[这里](http://system.data.sqlite.org/)有一个官方的 ADO.net 适配器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T05:15:49.823

更新：经过大量调查、试验和错误，最终选择了**SQL Server Compact Edition 4.0 。**

原因：

*   这是免费的
*   它很轻
*   它与 Visual Studio 2010 集成
*   最重要的是，它**与 .NET LINQ to Entity Framework 技术集成**（此数据库的工具允许自动生成 edmx 文件 [实体数据模型]
*   很容易部署（即部署简单的dll文件）
*   久经考验

# c# - selenium 定位两个相同的控件

> ID：10809262
> 
> 赞同：0
> 
> 时间：2012-05-30T02:32:25.663
> 
> 标签：c#, javascript, selenium, clone

这里有两个名为 NEW 的链接。

```
< a href="#" onclick="CloneDiv('#Div1');return false;" class="smaller">NEW</a>

< a href="#" onclick="CloneDiv('#Div2');return false;" class="smaller">NEW</a> 
```

它们之间的区别在于 onclick 操作。

一个克隆一个名为 Div1 的 div。另一个克隆了一个名为 Div2 的 div。

如何找到克隆 Div1 的链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T02:42:23.937

尝试`"//a[@onclick='CloneDiv('#Div2');return false;']"`作为您的定位器

# java - 如何使 JScrollPane 适合我的 jTable？

> ID：10809263
> 
> 赞同：1
> 
> 时间：2012-05-30T02:32:36.583
> 
> 标签：java, swing, jtable, jlist, space

当 JScrollPane 与 JTable 一起使用时，我遇到了问题。我怎样才能使滚动窗格在 JTable 下方没有空格，如图所示

[![](../Images/f94c4a445275410d6242f7796980f88c.png)](https://i.stack.imgur.com/E2jlJ.jpg)

另外，我目前使用的 JTabPane 包含 2 个 JPanel，一个用于 JScrollPane，一个用于底部的 JList。这是做事的正确方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T03:00:15.753

[这里](https://stackoverflow.com/a/6524224/230513)[`setPreferredScrollableViewportSize()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#setPreferredScrollableViewportSize%28java.awt.Dimension%29)提到的方法在这种情况下可能很有用。

# javascript - Javascript：推入数组的对象相互覆盖？

> ID：10809264
> 
> 赞同：2
> 
> 时间：2012-05-30T02:32:46.457
> 
> 标签：javascript, arrays, google-maps, object, push

我有一个格式如下的对象：

```
var telemetry_data = {

  T36: [
    //Date, lat, long
    [20120516, 25.40294163, -80.46972051],
    [20120518, 25.40306787, -80.46967025],
    [20120521, 25.40234592, -80.46980265]
  ],

  T43: [
    [20120523, -25.4076545, -80.46945134],
    [20120525, -25.40761155, -80.46756243]
  ]
}; 
```

这显示了不同日期的不同动物 (T##) 的位置。我想在谷歌地图上放置一个标记，显示动物在特定日期的位置，以及一条多段线，显示它到达那里所遵循的路径。我在折线部分遇到问题。请看下文。一切似乎都可以正常工作，直到`path[tegu_name[j]].push(tegu_location);`，`path[tegu_name[j]]`看起来它只被最后一个位置覆盖，而不是被添加到数组中的位置。对于某些动物（T23、T34、T35、T36），尽管有正确的日期位置，但数组仍然完全是空的。有任何想法吗？我有一种感觉，我犯了一些愚蠢的错误，但我无法弄清楚。

直播：[http](http://crocdoc.ifas.ufl.edu/projects/tegumap/) ://crocdoc.ifas.ufl.edu/projects/tegumap/ （将日期更改为 5 月 18 日以通过多个位置运行这部分代码，您可以看到控制台打印对象只有一个位置 [从行776]。当前位置是紫色圆点）

完整的 JS：[http ://crocdoc.ifas.ufl.edu/projects/tegumap/js/tegumap.js](http://crocdoc.ifas.ufl.edu/projects/tegumap/js/tegumap.js)

```
//Telemetered tegus
var tegu_location;
var path = new Object();
var line = new Object();

//For each tegu
for (var j = 0; j < tegu_name.length; j++) {
    var tegu_key = telemetry_data[tegu_name[j]];
    //For each date
    for (var k = 0; k < tegu_key.length; k++) {
        path[tegu_name[j]] = new Array();
        if (tegu_key[k][0] <= date) {
            console.log("use point at date "+tegu_key[k][0]);
            tegu_location = new google.maps.LatLng(tegu_key[k][1], tegu_key[k][2]);
            path[tegu_name[j]].push(tegu_location);
        } else {
            marker = new google.maps.Marker({
              icon: point_tracked,
              shape: point_shape,
              map: map,
              position: tegu_location

            });
            marker_container.push(marker);

        } 
        console.log(path[tegu_name[j]]);
    }

    line[tegu_name[j]] = new google.maps.Polyline({
        path: path[tegu_name[j]],
        strokeColor: '#32cd32',
        strokeOpacity: 0.6,
        strokeWeight: 3
    });
    line[tegu_name[j]].setMap(map);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T03:30:21.153

看起来您的`path[tegu_name[j]] = ...`行 (755) 应该在循环*之外*`k`，否则在每次迭代时重新创建数组`k`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T03:51:41.313

不，使用该`.push()`方法不会覆盖任何内容。`path[tegu_name[j]] = new Array();`每次都会覆盖数组。

然而，还有一些其他的更正/简化。

*   `marker_container`是一个数组。不要在这里使用[for-in-loop](https://developer.mozilla.org/en/JavaScript/Reference/Statements/for...in)（changeDate 函数的开头）
*   `telemetry_data`是一个具有属性的对象。您应该在这里使用[for-in-loop](https://developer.mozilla.org/en/JavaScript/Reference/Statements/for...in)，而不是创建一个属性名称数组 ( `tegu_name`) 并对其进行迭代。

```
var tegu_location;
var path = new Object();
var line = new Object();

//For each tegu
for (var tegu in telemetry_data) {
    path[tegu] = new Array();
    //For each date
    for (var k = 0; k < telemetry_data[tegu].length; k++) {
        var keys = telemetry_data[tegu][k];
        if (keys[0] <= date) {
            console.log("use "+ tegu +" point ("+keys[1]+", "+keys[2]+") at date "+keys[0]);
            path[tegu].push(tegu_location = new google.maps.LatLng(keys[1], keys[2]));
        } else {
            if (tegu_location) {
                marker = new google.maps.Marker({
                  icon: point_tracked,
                  shape: point_shape,
                  map: map,
                  position: tegu_location
                });
                marker_container.push(marker);
            }
        } 
    }
    console.log(path[tegu]);

    line[tegu] = new google.maps.Polyline({
        path: path[tegu],
        strokeColor: '#32cd32',
        strokeOpacity: 0.6,
        strokeWeight: 3
    });
    line[tegu].setMap(map);
} 
```

# jquery - 使用 jquery 记住选择菜单选项

> ID：10809266
> 
> 赞同：0
> 
> 时间：2012-05-30T02:32:52.913
> 
> 标签：jquery

我有 4 个动态相关的选择菜单。菜单对应于州、县、地区、邻里。动态依赖是通过一个jQuery脚本来实现的。我想要完成的是让菜单记住用户为每个菜单选择的最后一个选项。所以我想如果我能抓住 url 参数就可以了。所以我用这种方式修改了脚本......

```
getCounty: function (results) {
    if(!results) return;
    var allCounties = $("<option value=\"All\">All Counties </option>");
    counties.html(results);
    counties.prepend(allCounties);
    var w = $.query.get("county_id");
    if(w) {
        counties.val(w).attr('selected', true);
    } else {
        counties.val("All").attr('selected', true);
    } 
```

功能是否`$.query.get`正确？我的代码还有什么问题吗？我不得不承认我不是 jQuery 专家......如果我输入代码就可以正常工作

```
counties.val(3).attr('selected',true) 
```

选择菜单的第三个选项被选中。

我通过使用解决了这个问题

```
function getUrlVars() {
  var vars = {};
  var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,   function(m,key,value) {
    vars[key] = value;
  });
  return vars;
} 
```

之后

```
 var county = getUrlVars()["county_id"];

  if (county)    
     counties.val(county).attr('selected',true);
  else 
      counties.val("All").attr('selected',true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T03:11:58.657

我不知道什么是“county_id”，但我想是另一个菜单，所以也许更好：

```
getCounty: function (results) {
if(!results) return;
var allCounties = $("<option value=\"All\">All Counties </option>");
counties.html(results);
counties.append(allCounties); ///The all option first
var w = $('#county_id :selected').val(); ///w is the value of option selected of other combo
counties.find('option[value='+w+']').attr('selected', 'selected'); ///this find a option with value W, if exist mark like selected
} 
```

# hadoop - 恢复 Hadoop 作业工作流

> ID：10809268
> 
> 赞同：0
> 
> 时间：2012-05-30T02:33:12.540
> 
> 标签：hadoop, restart

在我的应用程序中，我有一系列 5 个 Hadoop 作业，它们使用顺序链接在一起

`Job.waitForCompletion(false)`

现在，Hadoop 文档明确指出

```
...确保工作完成的责任
（成功/失败）完全取决于客户

```

现在，如果我的作业客户端程序崩溃，我如何确保作业客户端程序在重新启动时可以在崩溃点恢复？有什么方法可以查询 JobTracker 并获取特定作业的句柄，然后检查其作业状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:00:21.323

当客户端本身崩溃时，可以尝试以下方法：

Hadoop 提供了 JobClient，可用于跟踪集群中当前正在运行的作业。因此，当客户端重新启动时，可以使用以下 JobClient 方法：

*   jobsToComplete() - 获取未完成且未失败的作业
*   jobsToComplete() - 获取未完成且未失败的作业
*   getAllJobs()- 获取提交的作业。
*   getClusterStatus() - 获取有关 Map-Reduce 集群的状态信息。
*   submitJob(JobConf job)- 提交作业到 MR 系统，如果它失败了。

# android - android创建一个高分检查

> ID：10809271
> 
> 赞同：0
> 
> 时间：2012-05-30T02:33:43.260
> 
> 标签：android, arrays

我正在尝试创建某种循环来检查数组中的高分值，如果它高于其他一些值，则将其添加到数组中，然后将所有较低的值向下移动。

例如，数组被调用`Integer highScoreArray[12, 9, 8, 7]`并且其中有 4 个值。我有另一个数组，它保留了获得高分的相应日期，称为`String highDateArray["12/5/11", "3/4/11", "4,4/12", "6/6/10"]`.

我将如何向数组添加新值和相应的日期？即如果新值是“10”并且日期是“5/29/12”？

我不想使用 sort 命令，`highScoreArray[]`因为那样我将无法跟踪`highDateArray[]`. 我希望之后在两个单独的线性布局中对两列文本中的两个数组进行排序，所以试图将它们分开，我是否让这变得更加困难？

```
for (int i = 0; i < highScoreArray.length; i++) 
{
    if(newHighScore>=highScoreArray[i])
    {
        // DO SOMETHING   
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T02:48:04.497

如何使用[hashmap](https://stackoverflow.com/questions/780541/how-to-sort-hash-map)存储值和相应的日期？并使用值对它们进行排序？

希望这些链接对您有所帮助

[如何对哈希图进行排序](https://stackoverflow.com/questions/1993942/how-to-sort-hashmap)

[按键排序HashMap](https://stackoverflow.com/questions/5855783/sorting-hashmap-by-key)

[如何对地图进行排序](https://stackoverflow.com/questions/109383/how-to-sort-a-mapkey-value-on-the-values-in-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T02:49:40.550

您可以创建一个对象并实现 Comparable 以使其更容易。

```
public class HighScore implements Comparable {
    private int score;
    private Date date; // Or you can just use String

    //  Getters/Setters here
    ...

    public int compareTo(HighScore anotherScore) {
        //  Checking here
        //  Return 0 if this and anotherScore is same
        //  Return 1 if this greater than anotherScore
        //  Return -1 if this smaller than anotherScore
    }

} 
```

所以在你的循环中

```
for (int i = 0; i < highScoreArray.length; i++) {
    HighScore highScore = highScoreArray[i];
    if (newHighScore.compareTo(highScore) > 0) {
        //  Do something
    }
} 
```

# google-app-engine - AppEngine 数据存储区中的不等式过滤器

> ID：10809273
> 
> 赞同：7
> 
> 时间：2012-05-30T02:34:08.843
> 
> 标签：google-app-engine, google-cloud-datastore

我了解 Google AppEngine 每个查询仅支持一个不等式过滤器。此限制的解决方法是什么？有没有可以提供类似效果的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T06:08:26.663

实际上 GAE 支持多个不等式过滤器，只要它们[在同一个属性上](https://developers.google.com/appengine/docs/java/datastore/queries#Restrictions_on_Queries)。

此限制的解决方法是特定于数据的，例如，它取决于您的数据的结构以及您希望如何查询它。例如，对于地理搜索，正如@Dan Holevoet 提到的，有各种地理散列算法。基本上所有此类算法都涉及将多个属性组合为一个，同时量化属性（创建离散值）。例如，地理散列涉及将世界地图划分为固定大小的小区域（= 结合纬度/经度和量化），以便能够通过相等运算符进行搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T02:50:49.203

每个查询是否有一个不等式过滤器的解决方法取决于您查询的数据集的类型。

例如，如果您想使用纬度和经度地址查询位置数据，您通常需要查询两个属性（纬度和经度）的一系列值。但是，使用[geohash](http://en.wikipedia.org/wiki/Geohash)算法，您可以仅使用单个属性完成等效查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T11:40:21.000

当我解决这个问题时（例如搜索范围从 - 到），我使用带有单个不等式过滤器的查询。根据排序顺序（升序或降序），我选择上限或下限。之后，我以编程方式使用不在查询过滤器中的下限或上限过滤结果。

# django - 在 Django 模型中，访问外键是否比将外键存储到临时变量慢很多倍？

> ID：10809274
> 
> 赞同：1
> 
> 时间：2012-05-30T02:34:09.123
> 
> 标签：django, performance, django-models

例如模型：

```
类播放器（模型。模型）：
    Team = models.ForeignKey(Team)

```

从效率的角度来看，如果您多次访问玩家的“团队”，将团队存储在临时变量中是否更有效？

这是不是效率较低：

```
玩家 = Player.objects.get(id=1)
print "玩家是成员" + str(player.team)
player.team.printRoster()

```

比这个？：

```
玩家 = Player.objects.get(id=1)
临时=玩家.团队
print "玩家是成员" + str(temp.team)
temp.printRoster()

```

我觉得答案是否定的，它们都是一样的。但是听过同事的不同反馈，想客观的说一下。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T03:16:46.573

它[在此处](https://docs.djangoproject.com/en/dev/topics/db/queries/#caching-and-querysets)指定。

Django 为你缓存它。问题是您将如何处理这些“外键”引用。例如，如果您有一个模型的外键，其**unicode**方法访问另一个外键以打印“友好”的 unicode 字符串，这取决于您如何制作查询集，您可能会再次访问数据库。

让我举个例子来澄清一下：

```
class Player(models.Model):
    pname = models.CharField(max_length=20)
    team = models.ForeignKey('Team')

class Team(models.Model):
    tname = models.CharField(max_length=20)
    country = models.ForeignKey('Country')

    def __unicode__(self):
        return self.tname + u' is from ' + self.country.cname

class Country(models.Model):
    cname = models.CharField(max_length=10) 
```

当你这样做时：

```
player = Player.objects.get(name=u'Messi')
print player.team 
```

您将访问数据库 3 次，一次获取球员，一次获取球队，另一次获取国家/地区名称。如果我没记错的话，下次你做那个“打印”语句时，django 不会再次访问数据库（我可能错了，但我认为它是这样工作的）。

现在想象一下，您想为每个玩家都这样做，并且您有很多玩家。每个玩家要访问数据库 3 次，这可不是什么好事。如果您稍微更改您的查询，您可以对数据库执行相同的操作一次。您可以这样做：

```
players = Player.objects.all().select_related('team__country')
for player in players:
    print player.team 
```

我希望这可以帮助您了解查询集如何在 Django 上工作。尝试阅读我在此处链接的文档。一个可以帮助您衡量查询效率的优秀工具是[django_toolbar](http://pypi.python.org/pypi/django-debug-toolbar)。我强烈推荐它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T02:40:41.490

Django 为你缓存它，检查[代码](https://github.com/django/django/blob/master/django/db/models/fields/related.py#L354)。

您可以通过检查来确保这一点

```
>>> player.team is player.team 
```

# c# - 使用 MVVM 对集合进行 WPF 分组

> ID：10809278
> 
> 赞同：9
> 
> 时间：2012-05-30T02:34:24.653
> 
> 标签：c#, .net, wpf, mvvm, observablecollection

我对 WPF 和 MVVM 都是新手，所以如果这是一个愚蠢的问题，我会预先请求原谅。

问题：我正在尝试使用 MVVM 设计模式创建项目的分组列表。我可以用后面的代码来做，但更喜欢更优雅的解决方案。

细节

*   假设我有一组动物：马、狼、猴子、老虎、北极熊、斑马、蝙蝠等。
*   这些动物按大洲分组：北美洲、非洲、南极洲等。

目标：在包装面板中，我想创建分组切换按钮。例如，对于在北美发现的每一种动物，都会有一个带有 ToggleButtons 的“North America”GroupBox。接下来，会有一个标题为“Africa”的 GroupBox，组框内将是非洲的所有动物。

使用 MVVM 设计模式，我可以绑定到 ObservableCollection，并使用数据模板创建我需要的切换按钮。我苦苦挣扎的地方是我不知道如何对动物进行分组。我所需要的只是要遵循的指导方针。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-30T08:59:59.267

在视图中，将项目源设置为 CollectionViewSource，该集合本身绑定到 ViewModel 上的 Animals 集合。CollectionViewSource 可以分组，如下所示：

```
<CollectionViewSource.GroupDescriptions>
   <PropertyGroupDescription PropertyName="Continent" />
</CollectionViewSource.GroupDescriptions> 
```

您还需要在您拥有的任何项目控件上设置组样式 - 像这样

```
<ItemsControl.GroupStyle>
   <GroupStyle>
      <GroupStyle.HeaderTemplate>
         <DataTemplate>
            <TextBlock FontWeight="Bold" FontSize="15"
               Text="{Binding Path=Name}"/>
         </DataTemplate>
      </GroupStyle.HeaderTemplate>
   </GroupStyle>
</ItemsControl.GroupStyle> 
```

取自此页面上的示例 - [http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.groupstyle.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.groupstyle.aspx)

这就是设置 HeaderTemplate，但如果您稍微玩一下，您应该能够为每个组设置容器样式。

希望这可以帮助！

**更新：** 我对此不太确定，所以我对代码进行了快速的抨击。假设“切换按钮”是“单选按钮”，这就是我想出的：

```
<Grid>
    <Grid.Resources>
        <CollectionViewSource x:Key="Animals" Source="{Binding}">
            <CollectionViewSource.GroupDescriptions>
                <PropertyGroupDescription PropertyName="Continent" />
            </CollectionViewSource.GroupDescriptions>
        </CollectionViewSource>
    </Grid.Resources>

    <ItemsControl ItemsSource="{Binding Source={StaticResource Animals}}">
        <ItemsControl.GroupStyle>
            <x:Static Member="GroupStyle.Default" />
        </ItemsControl.GroupStyle>

        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <RadioButton Content="{Binding Name}" GroupName="{Binding Continent}" />
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</Grid> 
```

此外，您可以将每个组显示为 GroupBox，方法是将行替换为`<x:Static Member="GroupStyle.Default" />`：

```
<GroupStyle>
   <GroupStyle.ContainerStyle>
      <Style TargetType="{x:Type GroupItem}">
         <Setter Property="Template">
            <Setter.Value>
               <ControlTemplate>
                  <GroupBox Margin="10" Header="{Binding Name}">
                     <GroupBox.Content>
                        <ItemsPresenter />
                     </GroupBox.Content>
                  </GroupBox>
               </ControlTemplate>
            </Setter.Value>
         </Setter>
      </Style>
   </GroupStyle.ContainerStyle>
</GroupStyle> 
```

但是，单选按钮本身不会相互排斥（我想是因为它们被包装在 ListItem 控件中，或者其他使它们成为分组父级的单个子级的东西）。如果您想返回以获取更多信息，该代码是从 MSDN 中的 GroupStyle 条目中窃取/修改的（他们的示例具有显示/隐藏组的扩展器）：http: [//msdn.microsoft.com/en-us/library/system .windows.controls.groupstyle.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.groupstyle.aspx)

让我知道我是否完全错过了重点。

# ios - drawRect 圆和动画大小/颜色

> ID：10809280
> 
> 赞同：29
> 
> 时间：2012-05-30T02:34:55.457
> 
> 标签：ios, ios5, core-animation, quartz-graphics

我正在使用标准代码的`-drawRect:`方法画一个圆圈。但是，我想稍微脉冲（变大和变小）并用动画改变颜色填充的强度。例如，如果圆圈充满红色，我想给圆圈打脉冲，并随着脉冲动作及时使红色稍微变亮和变暗。对Core Animation没有太多经验我对如何做到这一点有点迷茫，所以任何帮助将不胜感激。`UIView``CGContextFillEllipseInRect()`

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-05-30T03:06:24.247

如果你不画圆圈，这会简单得多`drawRect:`。相反，将您的视图设置为使用 a `CAShapeLayer`，如下所示：

```
@implementation PulseView

+ (Class)layerClass {
    return [CAShapeLayer class];
} 
```

`layoutSubviews`每当它改变大小时（包括它第一次出现时），系统都会发送到您的视图。我们覆盖`layoutSubviews`以设置形状并为其设置动画：

```
- (void)layoutSubviews {
    [self setLayerProperties];
    [self attachAnimations];
} 
```

下面是我们如何设置图层的路径（它决定了它的形状）和形状的填充颜色：

```
- (void)setLayerProperties {
    CAShapeLayer *layer = (CAShapeLayer *)self.layer;
    layer.path = [UIBezierPath bezierPathWithOvalInRect:self.bounds].CGPath;
    layer.fillColor = [UIColor colorWithHue:0 saturation:1 brightness:.8 alpha:1].CGColor;
} 
```

我们需要将两个动画附加到图层 - 一个用于路径，一个用于填充颜色：

```
- (void)attachAnimations {
    [self attachPathAnimation];
    [self attachColorAnimation];
} 
```

下面是我们如何为图层路径设置动画：

```
- (void)attachPathAnimation {
    CABasicAnimation *animation = [self animationWithKeyPath:@"path"];
    animation.toValue = (__bridge id)[UIBezierPath bezierPathWithOvalInRect:CGRectInset(self.bounds, 4, 4)].CGPath;
    animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    [self.layer addAnimation:animation forKey:animation.keyPath];
} 
```

下面是我们如何为图层的填充颜色设置动画：

```
- (void)attachColorAnimation {
    CABasicAnimation *animation = [self animationWithKeyPath:@"fillColor"];
    animation.fromValue = (__bridge id)[UIColor colorWithHue:0 saturation:.9 brightness:.9 alpha:1].CGColor;
    [self.layer addAnimation:animation forKey:animation.keyPath];
} 
```

这两种`attach*Animation`方法都使用一个辅助方法来创建一个基本动画并将其设置为无限期地重复自动反转和一秒的持续时间：

```
- (CABasicAnimation *)animationWithKeyPath:(NSString *)keyPath {
    CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:keyPath];
    animation.autoreverses = YES;
    animation.repeatCount = HUGE_VALF;
    animation.duration = 1;
    return animation;
} 
```

# javascript - 根据条件插入元素

> ID：10809281
> 
> 赞同：2
> 
> 时间：2012-05-30T02:35:06.300
> 
> 标签：javascript, jquery

我想在检查条件后动态插入不同的 url

这是伪代码

```
If div.id = "abc" then
create url <a href="www.zzz.html"'>Cosmetics</a>');
Append url to div

else if div.id = "xyz" then
create url <a href="www.abc.html"'>LEather goods</a>');
Append url to div

else if div.id = "mno" then
create url <a href="www.kkk.html"'>Diapers</a>');
Append url to div 
```

等等。

我怎样才能用 JavaScript/jQUery 写这个。如果有 15 个这样的 If-Else 条件，如何有效地处理代码。

这段代码看起来不太好

```
if $("#abc) then

 var dynLink = $('<a href=zzz.html"'>Cosmetics</a>');
    $("#abc").append(dynLink);

else if $("#xyz")
 var dynLink = $('<a href=abc.html"'>LEather</a>');
    $("#xyz").append(dynLink); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T02:50:28.297

你可以试试这个：

```
var link = [
    ["#abc", "#wfh", "http://www.123.com", "Maine"],
    ["#123", "#qwe", "http://www.abc.com", "Texas"]
];

$.each(link, function(e) {
    $(link[e][0] + "," + link[e][1])
        .append("<a href='" + link[e][2] + "'>" + link[e][3] + "</a>");
});​ 
```

示例：http: [//jsfiddle.net/Yvuvh/5/](http://jsfiddle.net/Yvuvh/5/)

* * *

这只是简单地设置数组中的链接和标题，并且`for`循环正在搜索数组以查看它是否可以找到带有`div`其中任何一个的a `id`，如果可以，则附加适当的链接。

要添加更多，只需将另一个添加`array`到`link`数组中，如下所示：

```
var link = [
    ["#abc", "#wfh", "http://www.123.com", "Maine" ],
    ["#123", "#qwe", "http://www.abc.com", "Texas" ],
    ["#xyz", "#zyx", "http://www.yzx.com", "Mexico"]
];​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T02:46:07.887

```
if $("#abc) then

 var dynLink = $('<a href=zzz.html"'>Cosmetics</a>');
    $("#abc").append(dynLink);

else if $("#xyz")
 var dynLink = $('<a href=abc.html"'>LEather</a>');
    $("#xyz").append(dynLink); 
```

▲ 那*不是*有效的 JavaScript。

* * *

▼有*一堆*s的时候是[这样](https://developer.mozilla.org/en/JavaScript/Reference/Statements/switch)的：*`if-then`*

 *```
switch(div.id){
    case "abc":
        $('<a href="zzz.html">Cosmetics</a>').appendTo("div#whateveritis");
        break;
    case "xyx":
        $('<a href="abc.html">Leather</a>').appendTo("div#whateveritis");
        break;
    case "more more more":
        //same stuff here.
        break;
    default:
        //default
        break;
} 
```

对于初学者来说非常不言自明。`;)`

说真的，你应该开始浏览![MDN](../Images/c259873073a2aa2d63d9d3cfc9863a38.png) [MDN](https://developer.mozilla.org/en/JavaScript/)中的东西。它是 JavaScript 参考和演示（示例）的好地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T03:22:11.343

创建一个包含所有这些关系的对象，如下所示：

```
var links = {
    'abc': { link:'foo.html', text:'Foo Link' },
    'xyz': { link:'bar.html', text:'Bar Link' }
}; 
```

然后我们将添加几个`div`元素来测试它：

```
​&lt;div id="abc"></div>
<div id="xyz"></div>​​​​​​​​​​
<div id="foo"></div> 
```

最后是我们的 jQuery，它应该为我们添加一些链接：

```
$("div").append(function(){
    var link = links[this.id];
    return link ? $("<a>", { href:link.href, html:link.text }) : "n/a" ;
});​​​ 
```

这循环遍历我们所有的`div`元素，检查它们`id`是否在我们的`links`对象中找到。如果是，那么我们在其中放置一个`div`具有适当属性的链接。如果我们没有`id`在我们的对象中找到它，我们只需将“n/a”附加到`div`.

```
<div id="abc"><a href="foo.html">Foo Link</a></div>
<div id="xyz"><a href="bar.html">Bar Link</a></div>
<div id="foo">n/a</div> 
```

演示：http: [//jsfiddle.net/vFjSw/](http://jsfiddle.net/vFjSw/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T02:36:08.080

将 div.id 放入映射到目标 URL 的关联数组中，然后通过键查找。*如果*您只需为每次查找加载一次，则一个散列查找将击败线性数量的 if/else-if 比较......

无论微观性能如何，这让我觉得更“优雅”、可读或可维护。对我来说，make array v.run if/else if 哪个更快并不明显，你必须进行分析。但是，如果您 1) 必须针对时间进行优化，并且 2) 每次加载页面时只期望使用一次此代码，那么您能做的最好的事情就是将您期望的 url 放在 if/elif 块的顶部。请务必准确评论您正在这样做，以便未来的开发人员不会按字母顺序排列它们。*

# python - 带睡眠方法的发电机不能工作？

> ID：10809283
> 
> 赞同：0
> 
> 时间：2012-05-30T02:36:08.667
> 
> 标签：python

我正在制作一个斐波那契数列。每次我处理控制台（在 Windows 上）时，它运行得太快并且突然自行退出。

所以我`Time.sleep()`过去常常看看发生了什么事。这是来源：

```
 def fibo():
      pv1,pv2 = 0,1
      while True:
        yield pv2
        pv1,pv2=pv2,pv1+pv2
    import time
    f=fibo()
    for result in f:
      print(result,end=' ')
      time.sleep(0.5) 
```

我预计每 0.5 秒“1 1 2 3 ...”，但它永远不会起作用！没有 sleep 方法，它运行良好。我认为有一些东西，但我太无知了，不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T02:42:21.743

默认情况下，当标准输出到终端时，输出是行缓冲的。您可以通过手动刷新标准输出使您的代码按预期工作。这是您刷新标准输出的方式：

```
import sys  # probably near the top of the file
sys.stdout.flush()  # after printing 
```

# sql - SQL 列“Id”被指定了多次

> ID：10809288
> 
> 赞同：7
> 
> 时间：2012-05-30T02:37:08.350
> 
> 标签：sql, sql-server, tsql

> **可能重复：**
> [sql 2005 - 该列被多次指定](https://stackoverflow.com/questions/1058606/sql-2005-the-column-was-specified-multiple-times)

```
 SELECT TOP(20) * 
    FROM (SELECT * 
            FROM [3D_Benchmarks] 
            JOIN [3D_Slugs] ON [3D_Benchmarks].Id = [3D_Slugs].BenchmarkId) AS tb 
ORDER BY tb.FPS DESC; 
```

我得到这个错误：

> 为“tb”多次指定了“Id”列。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-30T02:59:36.183

而不是`select *`使用`select table.columnname`or `tablename.*`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T04:02:19.780

```
SELECT * 
            FROM [3D_Benchmarks] 
            JOIN [3D_Slugs] ON [3D_Benchmarks].Id = [3D_Slugs].BenchmarkId) AS tb 
```

3D_Benchmarks 有 id 列，3D_Slugs 也有 id 列。

例如：[3D_Benchmarks].id 作为辅助，3D_Slugs.id 作为出价

# vim - （Vim 键映射）可以在 Vim 中映射 '<' 或 '>' 吗？

> ID：10809291
> 
> 赞同：1
> 
> 时间：2012-05-30T02:37:20.613
> 
> 标签：vim

我想添加这样的键映射，例如：

```
nmap <C->> <C-W>+
nmap <C-<> <C-W>- 
```

但它似乎不起作用。语法有问题吗？我想知道“>”或“<”可以像普通字符一样使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T04:15:49.140

它与语法无关，但与以下之一有关：

1.  终端可以`<C-<>`发送`<`。
2.  如果有办法`<C-<>`从终端获取，vim 不知道。
3.  如果您在 GUI 中，则`<C-`组合的表示*可能无法*处理`<C-<>`，因为它知道的唯一键是从`<C-@>`(ctrl+0x40) 到`<C-_>`(ctrl+0x5F)，因为只有这些组合可能被转换为 ASCII 控制字符（带有 0x00-0x1F 的组合）代码）。`<`并且`>`都超出了这个范围。

另外：使用`nnoremap`，不`nmap`。你不需要在这里重新映射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T06:26:54.153

由于键盘输入在内部处理的方式，不幸的是，这在今天是不可能的，即使在 GVIM 中也是如此。这是一个已知的痛点，也是 vim_dev 和 #vim IRC 频道上各种讨论的主题。

一些人（最重要的是 Paul LeoNerd Evans）想要解决这个问题（即使是支持这个的终端中的控制台 Vim），并提出了各种建议，cp。[http://groups.google.com/group/vim_dev/browse_thread/thread/626e83fa4588b32a/bfbcb22f37a8a1f8](http://groups.google.com/group/vim_dev/browse_thread/thread/626e83fa4588b32a/bfbcb22f37a8a1f8)

但是截至今天，还没有补丁或志愿者出现，尽管许多人表示希望在未来的 Vim 8 主要版本中拥有它。

# sql - OPENXML T-SQL 未按预期工作

> ID：10809294
> 
> 赞同：1
> 
> 时间：2012-05-30T02:37:50.413
> 
> 标签：sql, sql-server, tsql, openxml

我正在编写一个采用 Xml 的存储过程，但是解析 Xml 的部分工作不正常。这是存储过程：

```
CREATE PROCEDURE [dbo].[SprocName]
    @Xml TEXT
AS

DECLARE @XmlHandle INT

DECLARE @Table TABLE
(
    Id INT
)

-- Process the xml for use
EXEC sp_xml_preparedocument @XmlHandle OUTPUT, @Xml

INSERT @Table 
SELECT 
    Id
FROM 
OPENXML(@XmlHandle, 'Ids', 2) 
WITH 
(
    Id INT
)

SELECT * FROM @Table

EXEC sp_xml_removedocument @XmlHandle 
```

以及调用代码和结果：

![OPENXML 问题](../Images/411c52c2b46332c4920afb5798e3dc20.png)

我似乎无法弄清楚问题是什么。我预计 1 和 2 将在临时表中，但正如您所见，我只有 1。现在，我调用 StackOverflow 的力量。用你的智慧祝福我！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T05:03:35.317

如果可能的话，避免使用 OPENXML 的东西——它很旧，它很吵，它会吞噬内存......

在 SQL Server 2005 及更高版本中使用内置的原生 XQuery 支持 - 使用它，您可以非常轻松地执行以下操作：

```
DECLARE @Table TABLE (Id INT)

DECLARE @Input XML = '<Ids><Id>1</Id><Id>2</Id></Ids>'

INSERT INTO @Table(Id)
    SELECT
        IdNode.value('(.)[1]', 'int')
    FROM
        @input.nodes('/Ids/Id') AS IdTbl(IdNode)

SELECT * FROM @Table 
```

这给你`1, 2`作为输出`@table`。无需打电话`sp_xml_preparedocument`-`sp_xml_removedocument`只需运行它！

# javascript - 验证后提交 Javascript 表单

> ID：10809295
> 
> 赞同：0
> 
> 时间：2012-05-30T02:37:55.097
> 
> 标签：javascript, html, validation

该脚本主要按我的意愿运行：未选中单选复选框时发出警报。但是，如果选择了所有按钮，我需要它提交的表单......这就是我挂断电话的地方。现在，如果选择了所有字段和按钮，那么我仍然会收到带有 var alertMsg 的警报。有任何想法吗？

```
function submitform() {
    var sizeChoice = ""
    var size = document.store.on1.length
    var fontChoice = ""
    var len = document.store.on2.length
    var materialChoice = ""
    var material = document.store.on3.length
    var treatmentChoice = ""
    var treatment = document.store.on4.length
    var a = document.forms["store"]["item_name"].value;
    var alertMsg = "Please Choose a:"
    for(i = 0; i < size; i++) {
        if(document.store.on1[i].checked) {
            sizeChoice = document.store.on1[i].value
        }
    }
    for(i = 0; i < len; i++) {
        if(document.store.on2[i].checked) {
            fontChoice = document.store.on2[i].value
        }
    }
    for(i = 0; i < material; i++) {
        if(document.store.on3[i].checked) {
            materialChoice = document.store.on3[i].value
        }
    }
    for(i = 0; i < treatment; i++) {
        if(document.store.on4[i].checked) {
            treatmentChoice = document.store.on4[i].value
        }
    }
    if(a == null || a == "") alertMsg += "\n" + "Name" + "\n";
    if(sizeChoice == "") {
        alertMsg += "Size" + "\n"
    }
    if(fontChoice == "") {
        alertMsg += "Font" + "\n"
    }
    if(materialChoice == "") {
        alertMsg += "Material" + "\n"
    }
    if(treatmentChoice == "") {
        alertMsg += "Treatment" + "\n"
    } {
        alert(alertMsg)
    };
    return false;
    document.forms["form"].submit();
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T02:41:28.367

在表单提交之前您有一个退货。这可能是问题的一部分。

此外，您在最后的 if 语句中缺少 else 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T02:50:18.177

无论您的验证如何，您都会返回 false 。更改代码的结尾：

```
if(treatmentChoice == "") {
    alertMsg += "Treatment" + "\n"
} {
      alert(alertMsg)
};
return false;
document.forms["form"].submit(); 
```

至：

```
if(treatmentChoice == "") {
    alertMsg += "Treatment" + "\n"
}
if(alertMsg.length > 16) {
    alert(alertMsg);
    return false;
} else {
    document.forms["form"].submit();
} 
```

长度检查检查 alertMsg 的最终值长度与您最初设置的长度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T02:41:54.150

您在表单提交行之前返回，所以它永远不会被调用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-30T02:41:05.293

```
var alertMsg = "";

//....

if(alertMsg) {
    alert("Please Choose a:" + alertMsg);
} else {
    document.forms["form"].submit();
} 
```

请添加`;`到每个声明中。

# c# - 数据库和域对象中的地址、时间、星期几

> ID：10809297
> 
> 赞同：0
> 
> 时间：2012-05-30T02:37:56.983
> 
> 标签：c#, sql, sql-server, database-design

我正在绘制一个非常小的数据库，并且有一些关于良好设计实践的设计问题。假设我有一张*餐厅*餐桌，一家餐厅有*地址*、*营业时间*和*特殊日*(MTuWThF)

1.  一家餐厅只有一个地址。我很想将所有相关的地址字段（Street 1、Street 2、City、State、ZIP）放入*Restaurant*表中，但我认为将其分解为自己的表将允许我在我的域中创建一个*Address*类对象，并且，如果我想更改稍后完成地址的方式，它可能会更容易。我通常认为 1:1 表格是不好的做法......

2.  *营业时间*是餐厅营业时间的 HH:MM 表示。我不需要完整的 DateTime 因为 Date 部分会被浪费。那么，varchar 是表示这一点的最佳方式吗？

3.  有一个*特殊的日子*（星期一、星期二等）我也想存储在我的模式中。将这一天存储为 varchar 是否有意义，或者有人会建议使用周日（1）、周一（2）......等创建一个参考表（有点像枚举）。并使用 int 来存储*特殊日*是哪一天？

    ```
    **DayOfWeek**
    Id (int)
    Day (varchar)

    **Service**
    Id (int)
    RestaurantId (int)
    DayOfWeekId (int)
    ... 
    ```

多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:45:28.713

> 我正在绘制一个非常小的数据库

因此，您的整个数据库很可能都适合缓存，因此几乎没有理由为了更好的 I/O 而垂直拆分表 - 不会有 I/O 可言。

> 1...

数据库应该关心数据，而不是它在客户端应用程序代码中的表示方式。我相信您将能够在代码中以可接受的方式使用地址，即使它不在单独的表格中。至少，您始终可以手动包装 ORM 生成的任何内容（或者首先不使用 ORM ;)）。

> 2...

好吧，一天有 24 * 60 = 1440 分钟，这可以轻松适应`smallint`.

如果您只想查询小时（或分钟），请将它们分开在两个`tinyint`字段中。

> 3...

使用单独的表和参照完整性。这样，您可以在一个地方更改哪一天是特殊的，它会自动“传播”到所有连接的行。如果您需要，您可以有多个特殊的日子。

OTOH，如果您*知道*您总会有一个特殊的日子，那么您可以创建一个“单例”表，其中一行仅包含那一天。在这种情况下，您实际上不需要任何 FK - 由于天数很少 (7)，因此仅通过 CHECK 约束来限制有效值是可行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T02:58:21.883

您要问的很多问题都归结为您认为它如何最适合您的需求。希望我在下面说的一些内容会很有用。

一对一的表不一定不好，事实上，它们有时用于对数据进行分区以提高检索效率。例如，如果有 10 个字段您经常使用，另外 25 个相对较大但您不经常使用，您可以将这 25 个放在另一个一对一的表中，这样数据库引擎就不会当您一直在使用 10 个字段时，您必须与他们打交道。

在你的情况下，我可以选择任何一种方式。除非您是经验丰富的开发人员，否则我建议您将地址字段放入餐厅餐桌。你不想多想。试图变得太花哨可能只会让你在可能永远不会发生的事情上浪费大量时间和精力。此外，如果您决定稍后更改地址表中的数据，老实说，仅在地址表上运行一些 ALTER TABLE 命令不会比直接在餐厅表上运行它们更容易。简而言之，请保持简单，除非您*知道*以后要更改它。

关于时间，一些数据库系统实际上支持 TIME 类型（带有日期）。例如，这里是[MySQL 的文档](http://dev.mysql.com/doc/refman/5.0/en/time.html)。另一种选择是仅使用标准 DATETIME，但以特定日期作为参考点。例如，1970 年 1 月 1 日。因此，如果要存储下午 3:30，请将其存储为“1970-01-01 15:30:00”。您可以在后端执行任何您想要仅显示时间部分的格式。这样做的一个优点是，如果您最终想在任何类型的计算中使用这些时间，将它们存储为 DATETIME 比存储为 VARCHAR 容易得多*。*例如，如果您想知道餐厅在某一天营业了多长时间，您可以使用以下内容：

```
SELECT `closetime` - `opentime` AS "openhours" FROM `restaurants`; 
```

至于存储一周中的某一天，老实说，我只是将其设为 TINYINT 并存储 1（星期日）到 7（星期六）。MySQL 具有返回 1 到 7 作为星期几的内置函数，我认为大多数数据库在这方面都是相同的。这将使在如下查询中更容易确定给定日期是否是“特殊”日子：

```
SELECT * FROM `restaurants` where DAYOFWEEK(?) = `special_day` 
```

大多数脚本语言会让您将其编译为准备好的查询，然后您可以非常有效地通过管道输入日期。

希望这会有所帮助并为您提供一些考虑。祝你的项目好运，日期和时间处理起来真的很麻烦，尤其是当你开始进入时间跨度等时。

# c - 类似 cscope 的工具来查找左值/右值实例

> ID：10809300
> 
> 赞同：0
> 
> 时间：2012-05-30T02:38:20.187
> 
> 标签：c, ctags, cscope

我正在寻找可以解析 C 代码主体的东西，并且像 cscope 一样，让我搜索符号。特别是，我希望能够得到一个列表，上面写着“在这些地方，foobar 被用作左值，而在这些地方，它被用作右值”。这似乎是一个非常有用的工具，除了 cscope 和 semantic-symref 之类的工具已经完成的工作之外，似乎并没有太多的工作，所以我想它已经存在了。可以？

# java - 接口设计：采用单个输入并返回多个输出的方法

> ID：10809301
> 
> 赞同：0
> 
> 时间：2012-05-30T02:38:31.660
> 
> 标签：java

我想收集关于哪个更好或更坏的反馈......

```
Function<I, O> {
  List<O> take( I );
} 
```

或者

```
Receiver<T> {
  void take( T );
}

Processor<I, O> {
   void processor( I, Receiver<O>> );
} 
```

我知道简单的答案是功能，但处理器确实有一些好处。

*   添加了传递作为内容过滤的接收器的能力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T03:15:48.790

没有明确的首选替代方案。这取决于用例。

正如您所指出的，选择前者的主要原因是简单。客户不必为了使用您的界面而实现任何东西。对于服务 API，Function 并不总是最佳选择，因为您可能*事先*不知道要回馈多少个 Os。

选择后者的主要原因是可扩展性。例如，您可能正在生成数百万个 O 对象，并且在返回任何内容之前尝试将它们全部填充到内存中是自杀的。然而，像处理器这样的回调模式很难硬塞到服务 API 中。

服务 API 的最佳选择是混合：

```
Function<I, O> {
  List<O> take( I, OToken );
} 
```

在其中您返回 O 的“页面”，从 OToken 开始，该 OToken 表示返回的最后一页的结尾。顺便说一句，如果您愿意返回`Iterator<O>`而不是`List<O>`.

# python - 字符串拆分问题

> ID：10809302
> 
> 赞同：6
> 
> 时间：2012-05-30T02:38:44.550
> 
> 标签：python, string, split

问题：通过作为列表传入的分隔符将字符串拆分为单词列表。

细绳：`"After the flood ... all the colors came out."`

期望的输出： `['After', 'the', 'flood', 'all', 'the', 'colors', 'came', 'out']`

我已经编写了以下函数 - 请注意，我知道有更好的方法可以使用一些内置函数的 python 来拆分字符串，但为了学习，我认为我会这样做：

```
def split_string(source,splitlist):
    result = []
    for e in source:
           if e in splitlist:
                end = source.find(e)
                result.append(source[0:end])
                tmp = source[end+1:]
                for f in tmp:
                    if f not in splitlist:
                        start = tmp.find(f)
                        break
                source = tmp[start:]
    return result

out = split_string("After  the flood   ...  all the colors came out.", " .")

print out

['After', 'the', 'flood', 'all', 'the', 'colors', 'came out', '', '', '', '', '', '', '', '', ''] 
```

我不明白为什么“出来”没有分成“来”和“出来”两个单独的词。好像两个单词之间的空白字符被忽略了。我认为输出的其余部分是垃圾，源于与“出来”问题相关的问题。

编辑：

我按照@Ivc 的建议提出了以下代码：

```
def split_string(source,splitlist):
    result = []
    lasti = -1
    for i, e in enumerate(source):
        if e in splitlist:
            tmp = source[lasti+1:i]
            if tmp not in splitlist:
                result.append(tmp)
            lasti = i
        if e not in splitlist and i == len(source) - 1:
            tmp = source[lasti+1:i+1]
            result.append(tmp)
    return result

out = split_string("This is a test-of the,string separation-code!"," ,!-")
print out
#>>> ['This', 'is', 'a', 'test', 'of', 'the', 'string', 'separation', 'code']

out = split_string("After  the flood   ...  all the colors came out.", " .")
print out
#>>> ['After', 'the', 'flood', 'all', 'the', 'colors', 'came', 'out']

out = split_string("First Name,Last Name,Street Address,City,State,Zip Code",",")
print out
#>>>['First Name', 'Last Name', 'Street Address', 'City', 'State', 'Zip Code']

out = split_string(" After  the flood   ...  all the colors came out...............", " ."
print out
#>>>['After', 'the', 'flood', 'all', 'the', 'colors', 'came', 'out'] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T02:49:38.890

您不需要内部循环调用。就这样就足够了：

```
def split_string(source,splitlist):
    result = []
    for e in source:
           if e in splitlist:
                end = source.find(e)
                result.append(source[0:end])
                source = source[end+1:]
    return result 
```

您可以通过在将 source[:end] 附加到列表之前检查它是否为空字符串来消除“垃圾”（即空字符串）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T02:59:40.060

你似乎在期待：

```
source = tmp[start:] 
```

修改`source`外部 for 循环正在迭代的那个。它不会 - 该循环将继续遍历您给它的字符串，而不是现在使用该名称的任何对象。这可能意味着您要处理的角色可能不在`source`.

不要尝试这样做，而是以这种方式跟踪字符串中的当前索引：

```
for i, e in enumerate(source):
   ... 
```

并且您要附加的内容将始终是`source[lasti+1:i]`，您只需要跟踪`lasti`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T11:53:40.230

我认为如果你使用正则表达式，如果你只想要上面给出的字符串中的单词，你可以很容易地得到它。

```
>>> import re
>>> string="After the flood ... all the colors came out."
>>> re.findall('\w+',string)
['After', 'the', 'flood', 'all', 'the', 'colors', 'came', 'out'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T03:29:10.987

为什么要做太多的事情，就这么简单，试试..
`str.split(strSplitter , intMaxSplitCount)` *intMaxSplitCount 是可选*
的在你的情况下，你也必须做一些 Houskeeping，如果你想避免......一个是你可以替换它，比如`str.replace(".","", 3)` *3 是可选的，它会仅替换前 3 个点*

所以简而言之，你必须遵循，
`print ((str.replace(".", "",3)).split(" "))` 它会打印你想要的

我执行了， [Just Check Here，...](http://ideone.com/scf3V)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T03:45:06.293

```
[x for x in a.replace('.', '').split(' ') if len(x)>0] 
```

这里 'a' 是您的输入字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T04:49:39.740

更简单的方法，至少看起来更简单..

```
import string

    def split_string(source, splitlist):
        table = string.maketrans(splitlist,  ' ' * len(splitlist))
        return string.translate(source, table).split() 
```

您可以签[出 string.maketrans](http://docs.python.org/library/string.html#string.maketrans)和[string.translate](http://docs.python.org/library/string.html#string.translate)

# ios - XCode 的 Other Linker Flags 中 all_load 的替代方案

> ID：10809304
> 
> 赞同：4
> 
> 时间：2012-05-30T02:38:49.090
> 
> 标签：ios, xcode

我正在将[Rdio](http://developer.rdio.com/docs/read/iOS)添加到我的 iOS 应用程序中，但我被困在安装的这一部分：

> 在项目构建信息中的 Other Linker Flags 下添加 -all_load

如果我添加了那个标志，那么另一个第三方库会中断给我错误消息：

> ld：在 /Users/josh/Projects/app/libs/libvt_universal.a(vw_ctype-3279EF26D0C25F3A.o) 和 /Users/josh/Projects/app/libs/libvt_universal.a(vw_ctype-34AB9EC0B46D954C.o) 中重复符号 _vw_chartype_table_p架构 i386

**有没有办法在不使用 -all_load 的情况下使用 Rdio 库？**例如，我试过`-force_load $(BUILT_PRODUCTS_DIR)/Rdio.framework`但似乎没有效果。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-01T13:34:18.730

force_load 正是您想要的 - 它允许您仅加载该框架而不会弄乱其他任何东西。问题在于确切的语法以及对设置的其他一些意外调整。

## -force_load 语法

*应该为您的目标文件*而不是框架提供强制加载的路径。

```
-force_load $(SOURCE_ROOT)/AppName/libs/Rdio.framework/Versions/Current/Rdio 
```

## 其他设置

1.  从`Rdio.framework`“Link Binary with Libraries”构建阶段中移除。
2.  从我的 LIBRARY_SEARCH_PATHS 中删除“/libs/Rdio.framework”

# c++ - C++ 和 OpenCV 中多个对象和原始类型的向量的向量

> ID：10809306
> 
> 赞同：0
> 
> 时间：2012-05-30T02:39:20.073
> 
> 标签：c++, object, opencv, vector, primitive-types

我正在使用 c++ 和 opencv lib 编写一个程序，我需要将数据存储在一个地方以方便临时（这样我就可以在不移动太多的情况下访问信息）而不是写入文件。

所以我想创建一个包含多个对象的向量（如 2 个 cv::Point3f 对象）和原子数据类型（int、int、float、Boolean）

这是否可以创建这些对象和原始类型的向量的向量？如果是，我该怎么做？如果没有，还有什么其他选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T05:14:38.737

我找到了解决方案。有兴趣的人：

```
#include "cv.h"
#include "highgui.h"
#include <stdio.h>
#include <iostream>
#include <vector>

#include <boost/tuple/tuple.hpp>
#include <boost/tuple/tuple_io.hpp>

int main()
{

    std::vector < boost::tuple <CvPoint3D32f, CvPoint3D32f, int, int, float, bool> > test12;

    test12.push_back(boost::make_tuple(cvPoint3D32f(2.0, 3.0, 1.2), cvPoint3D32f(2.5, 7.0, 5.2), 5, 1, 6.0, true));

    std::cout << boost::get<0>(test12[0]).z << std::endl;

    return 0;

 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T02:44:22.413

> **这是否可以创建这些对象和原始类型的向量的向量？如果是，我该怎么做？**

是的，可以有向量的向量，例如：

```
 // Vector length of 3 initialized to 0
   vector<int> myMatrix(3,0);

   // Vector length of 4 initialized to hold another
   // vector myMatrix which has been initialized to 0
   vector< vector<int> > myMatrix2(4, myMatrix);

   // Vector of length 5 containing two dimensional vectors
   vector< vector< vector<int> > > myMatrix3(5, myMatrix2); 
```

# actionscript-3 - 修改 flex spark 滚动条以逐页滚动，带缓动

> ID：10809316
> 
> 赞同：0
> 
> 时间：2012-05-30T02:40:31.593
> 
> 标签：actionscript-3, apache-flex, flex4.5, flex-spark

根据 Steven Shongrunden 的优秀文章[http://flexponential.com/2009/10/09/chang-the-position-of-the-scroll-bars-in-a-spark-list/](http://flexponential.com/2009/10/09/changing-the-position-of-the-scroll-bars-in-a-spark-list/) ，我已经修改了我的 VScrollBar 的滚动条皮肤所以只有向上和向下按钮，没有滚动条。

现在我想修改滚动条的行为，使其每次点击滚动一页。更好的是，我希望滚动动画带有缓动，即不是从一页跳到另一页，而是滚动动画。

ScrollBarBase [http://www.flex-component.com/asdoc/kcdualslider/spark/components/supportClasses/ScrollBarBase.html](http://www.flex-component.com/asdoc/kcdualslider/spark/components/supportClasses/ScrollBarBase.html)的文档建议了一些应该提供实现此目的的方法的方法，但我找不到如何使用这些出色的方法和属性的任何示例：

```
animatePaging(newValue:Number, pageSize:Number): 
  Animates the operation to move to newValue.

button_buttonDownHandler(event:Event): 
  Handles a click on the increment or decrement button      

button_buttonUpHandler(event:Event): 
  Handles releasing the increment or decrement button

decrementButton:Button
  An optional skin part that defines a button that, when pressed, steps the scrollbar up.

incrementButton:Button
  An optional skin part that defines a button that, when pressed, steps the scrollbar down. 
```

我的预感是我需要中断 decrementButton 和 incrementButton 的 button_buttonUp/DownHandlers 并调用 animatePaging，但我真的不知道该怎么做。尽管编写了大量的 AS3 并成功修改了很多皮肤，但这些火花皮肤对我来说真的很神秘。

期待任何见解！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:40:06.497

我找到了我的问题的解决方案。

我需要扩展 VScrollBar 类。一旦我这样做了，这就是覆盖 button_buttonDown/UpHandlers 的简单事情。

在我的皮肤中扩展了 VScrollBar 类后，我替换了

```
<my_namespace:CustomVScrollBar for  <s:VScrollBar 
```

这是我的 CustomVScrollBar 的要点。我正在使用 gs.TweenLite，但您可以为动画使用任何补间

```
package my_package {

    import flash.events.Event;
    import gs.TweenLite;
    import spark.components.VScrollBar;

    public class CustomVScrollBarextends VScrollBar
    {

        public function CustomVScrollBar()
        {
            super();
        }

        override protected function button_buttonDownHandler(event:Event):void {
            var valueTo:Number;
            if (event.target == incrementButton) {
                valueTo = Math.min(value+pageSize, maximum);
            } else if (event.target == decrementButton) {
                valueTo = Math.max(value-pageSize, minimum);
            }
            if (! isNaN(valueTo)) {
                TweenLite.to(this.viewport, .75, {verticalScrollPosition: valueTo});
            }
        }

        override protected function button_buttonUpHandler(event:Event):void {
            // 
            // nothing
        }

    }
} 
```

# html - webkit中奇怪的css边框行为

> ID：10809319
> 
> 赞同：0
> 
> 时间：2012-05-30T02:40:43.090
> 
> 标签：html, css, webkit

我有一个 css 元素，它的一侧有圆形边缘和一个边框，当我更改边框和圆形边缘所在的一侧时，它拒绝更新子元素的绝对位置，我不知道为什么？我已经在 2.3 android 浏览器和谷歌 Chrome 上测试过，都出现了同样的问题。奇怪的是，当我在谷歌浏览器中右键单击并进入“检查元素”时，它会更新位置，并将绝对元素正确地捕捉到右边？？？？

我对此感到非常困惑，这是一个 jsfiddle 链接，有什么想法可以解决这个问题吗？ [http://jsfiddle.net/yhT5n/1/](http://jsfiddle.net/yhT5n/1/)

原始来源：

html:

```
<div id="page" class="side_a">
    <div class="absl">&nbsp;</div>
</div>​ 
```

CSS：

```
#page{
    margin:30px;
    position:relative;
    display:block;
    width:100px;
    height:150px;
    background-color:gray;
    z-index:10003;
    -webkit-transition-property: width, height;  
    -webkit-transition-duration: 0.5s;
    border-radius: 15px;-moz-border-radius: 15px;    
    border-width:3px;
    border-top-style:none;
    border-right-style:none;
    border-bottom-style:none;
    border-left-style:none;
    border-color:#000;
}

#page.side_a{
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
    border-right-style:dashed;    
}
#page.side_b{
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
    border-left-style:dashed;
}
.absl{
    position:absolute;
    right:0px;
    top:20px;
    width:20px;
    height:20px;
    background:red;
} 
```

JS：

```
$('#page').live('click', function() {
    $(this).removeClass('side_a').addClass('side_b');
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T02:45:47.007

这是 Chrome 中的一个错误。强制页面重绘（通过缩放或任何其他方法）在正确的位置显示红色框。

不幸的是，我不知道有任何解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T12:41:47.387

## 破碎：http: [//jsfiddle.net/yhT5n/4/](http://jsfiddle.net/yhT5n/4/)

正如在这个小提琴中看到的，这个问题与圆角或虚线样式无关：

```
#page.a{ border-right:10px solid }
#page.b{ border-left: 10px solid } 
```

## 固定：http: [//jsfiddle.net/yhT5n/5/](http://jsfiddle.net/yhT5n/5/)

但是，您可以通过在切换时更改边框大小来“修复”它：

```
#page.a{ border-right:10px solid }
#page.b{ border-left: 11px solid } 
```

## 再次破碎：http: [//jsfiddle.net/yhT5n/6/](http://jsfiddle.net/yhT5n/6/)

如果我们将盒子尺寸模型更改为`border-box`，则上述“修复”不再有效：

```
#page  { box-sizing:  border-box }
#page.a{ border-right:10px solid }
#page.b{ border-left: 11px solid } 
```

## 替代修复：http: [//jsfiddle.net/yhT5n/7/](http://jsfiddle.net/yhT5n/7/)

这表明修复是通过调整对象大小来触发的。因此，您可以更改宽度以触发正确的行为：

```
#page  { box-sizing:  border-box }
#page.a{ border-right:10px solid; width:100px }
#page.b{ border-left: 10px solid; width:101px } 
```

…甚至[改变高度](http://jsfiddle.net/yhT5n/8/)：

```
#page  { box-sizing:  border-box; height:150px }
#page.a{ border-right:10px solid; }
#page.b{ border-left: 10px solid; height:151px } 
```

# javascript - 我可以覆盖 IE8 中的原型函数吗？

> ID：10809323
> 
> 赞同：2
> 
> 时间：2012-05-30T02:41:14.593
> 
> 标签：javascript, internet-explorer-8

当调用 Node.prototype.appendChild(obj) 时，我编写了以下代码来提醒消息。

```
var _appendChild = Node.prototype.appendChild;
Node.prototype.appendChild = function(object){
    alert("append");
    return _appendChild.apply(this,[object]);           ;
}; 
```

它在IE8中不起作用..

我已阅读此链接，其中回答说原型函数不能在 IE 中被覆盖

[如何覆盖 javascript 的 cloneNode？](https://stackoverflow.com/questions/10001694/how-do-i-override-javascripts-clonenode)

但我仍然想问是否有任何工作可以做我想做的事。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T02:48:06.247

在 IE8 中不能扩展 Node，但可以扩展 HTMLDocument.prototype 和 Element.prototype。

[Microsoft 文档的链接](http://msdn.microsoft.com/en-us/library/dd282900%28v=vs.85%29.aspx#domproto)

```
function _MS_HTML5_getElementsByClassName(classList){
    var tokens= classList.split(" ");
    var staticNodeList= this.querySelectorAll("." + tokens[0]);
    for(var i= 1; i<tokens.length; i++){
        var tempList= this.querySelectorAll("." + tokens[i]);           
        var resultList= new Array();
        for(var finalIter= 0; finalIter<staticNodeList.length; finalIter++){
            var found= false;
            for(var tempIter= 0; tempIter<tempList.length; tempIter++){
                if(staticNodeList[finalIter]== tempList[tempIter]){
                    found= true;
                    break;                      
                }
            }
            if(found){
                resultList.push(staticNodeList[finalIter]);
            }
        }
        staticNodeList= resultList;
    }
    return staticNodeList;
}

if(!document.getElementsByClassName && Element.prototype){
    HTMLDocument.prototype.getElementsByClassName= _MS_HTML5_getElementsByClassName;
    Element.prototype.getElementsByClassName= _MS_HTML5_getElementsByClassName;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T04:53:47.193

谢谢肯尼贝克

最后我发现我无法实现它只是因为它在怪癖模式下运行......我写了一个其他人可能感兴趣的例子。

```
var elementPrototype = typeof HTMLElement !== "undefined"
        ? HTMLElement.prototype : Element.prototype;

var _appendChild = elementPrototype.appendChild; 

elementPrototype.appendChild = function(content){
    //Do what you want-----

    alert("Append Child!");

    //---------------------
    return _appendChild(content);
} 
```

# facebook - 用于网站的 Facebook 和 Facebook SDK 有什么区别？

> ID：10809326
> 
> 赞同：0
> 
> 时间：2012-05-30T02:41:30.313
> 
> 标签：facebook, facebook-graph-api

用于网站的 Facebook 和 Facebook SDK 有什么区别？

我看到这两个一直被引用，这很令人困惑。

我的设置是一个客户端 javascript 应用程序，我想知道我应该使用哪个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T03:37:23.647

SDK 代表软件开发工具包。它是用于执行某些操作的工具集。

在 Facebook SDK 方面，有官方工具集

*   PHP
*   iOS
*   安卓
*   JavaScript

这些工具集使开发人员可以更轻松地与 Facebook API（应用程序编程接口）进行交互，这是 Facebook 允许开发人员与其部分数据进行交互的一种方式。

*Facebook for Websites*代表了使您的网站成为与 Facebook 相关的社交互动并通过这些社交互动推动增长的*想法。*这可以是 SDK（前面提到的工具集）或插件的形式。

利用*Facebook 平台*（包含所有工具集、插件和 API），您可以为您的网站提供更好的社交体验。这就是*Facebook for Websites*所代表的。

* * *

*因此，您有一个使用 JS SDK*（这是工具集）的客户端 Javascript 应用程序。现在，这可能是您网站的应用程序，在这种情况下，您正在尝试丰富体验，或者您只是为其他人制作应用程序，以使用您的应用程序丰富他们的网站/页面。

*   适用于您网站的应用程序？您正在使用 SDK，并且正在使用*Facebook for Websites的想法*
*   分发到其他网站/页面的应用程序？您正在使用 SDK 让他们有机会将*Facebook 用于他们的网站*

因此*，用于网站的 Facebook*表示在网站上使用该*平台*以获得更丰富的社交体验的宽松短语。

我建议你阅读这个页面，即使你没有得到所有东西，它会给你一个比你已经拥有的更好的主意

[http://developers.facebook.com/docs/guides/web/](http://developers.facebook.com/docs/guides/web/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T02:49:20.830

用于网站的 Facebook 用于在您的网站上启用某些 Facebook 功能，例如点赞按钮。它还允许您使用 facebook 登录和注册您的网站，就像打开 id 一样。这消除了您自己的用户登录和注册脚本的需要。它还允许您使用图 API，让您访问给定用户的完整社交图。

Facebook Javascript SDK 让您可以访问图形 API 和更多功能，例如 facebook 对话框和 REST API。此外，它还提供了一种用于呈现我们的社交插件的 XFBML 版本的机制，以及一种让 Canvas 页面与 Facebook 进行通信的方式。

我认为您应该考虑使用 Facebook Javascript SDK，因为它为您提供了更多功能。

# javascript - 在 JSON Object in Loop 中或以其他方式动态创建属性

> ID：10809331
> 
> 赞同：1
> 
> 时间：2012-05-30T02:42:04.700
> 
> 标签：javascript

我正在尝试按照 dojo 商店的预期创建一个如下所示的对象数组

```
[
    { "Column 1": "Value ...", "Column 2": "Value ...", "Column 2": "Value ...", ... },
    { "Column 1": "Value ...", "Column 2": "Value ...", "Column 2": "Value ...", ... },
    { "Column 1": "Value ...", "Column 2": "Value ...", "Column 2": "Value ...", ... },
    ...
] 
```

数组部分很简单，但是如何动态创建对象键部分呢？“第 1 列”等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T02:45:45.170

只是给个思路，

您可以使用关联数组下标访问对象属性，如下所示：

```
var a = {}
a["col 1"] = "some value"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T02:52:59.083

```
var myArr = [
  { "Column 1": "Value ...", "Column 2": "Value ...", "Column 2": "Value ...", ... },
  { "Column 1": "Value ...", "Column 2": "Value ...", "Column 2": "Value ...", ... },
  { "Column 1": "Value ...", "Column 2": "Value ...", "Column 2": "Value ...", ... },
]

var obj = {};
    obj['your_key'] = 'some value';
    obj['your_another_key'] = 'some other value';
    ...

myArr.push(obj); 
```

# c# - 当代码位于 Form1.Designer.cs 之外时，表格布局面板不会在屏幕上绘制（或工作）

> ID：10809338
> 
> 赞同：2
> 
> 时间：2012-05-30T02:42:40.397
> 
> 标签：c#, winforms, visual-studio-2010, user-interface, tablelayoutpanel

我正在使用 C# Forms 应用程序。

我已经将一个表格布局面板拖放到窗口中，然后在`Form1.Designer.cs`自动生成的文件之外动态添加组件，代码在 Form1.cs 文件中。

在那里，我用几个 for 循环添加了所有应该填充布局表的内容，这个成功完成了。

现在的问题是我还想动态创建表格布局，所以我所做的只是从设计器文件中复制并粘贴自动生成的代码，并从 [design] 中删除 d&d 表格布局。

这就是我为其他组件所做的，它已经无缝地工作了，现在，由于某种原因，这不起作用。

预期的结果将是（不可见的布局面板）在其中显示所有图像框。

输出仅显示一个空窗口。

代码如下：

```
private void paintLayoutTableOnScreen()
    {
        this.tableLayoutPanel = new System.Windows.Forms.TableLayoutPanel();
        this.SuspendLayout();
        // 
        // tableLayoutPanel
        // 
        this.tableLayoutPanel.ColumnCount = 6;
        this.tableLayoutPanel.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 16.66667F));
        this.tableLayoutPanel.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 16.66667F));
        this.tableLayoutPanel.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 16.66667F));
        this.tableLayoutPanel.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 16.66667F));
        this.tableLayoutPanel.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 16.66667F));
        this.tableLayoutPanel.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 16.66667F));
        this.tableLayoutPanel.Location = new System.Drawing.Point(12, 12);
        this.tableLayoutPanel.Name = "tableLayoutPanel";
        this.tableLayoutPanel.RowCount = 5;
        this.tableLayoutPanel.RowStyles.Add(new System.Windows.Forms.RowStyle(System.Windows.Forms.SizeType.Percent, 20F));
        this.tableLayoutPanel.RowStyles.Add(new System.Windows.Forms.RowStyle(System.Windows.Forms.SizeType.Percent, 20F));
        this.tableLayoutPanel.RowStyles.Add(new System.Windows.Forms.RowStyle(System.Windows.Forms.SizeType.Percent, 20F));
        this.tableLayoutPanel.RowStyles.Add(new System.Windows.Forms.RowStyle(System.Windows.Forms.SizeType.Percent, 20F));
        this.tableLayoutPanel.RowStyles.Add(new System.Windows.Forms.RowStyle(System.Windows.Forms.SizeType.Percent, 20F));
        this.tableLayoutPanel.Size = new System.Drawing.Size(992, 460);
        this.tableLayoutPanel.TabIndex = 0;
        this.tableLayoutPanel.Paint += new System.Windows.Forms.PaintEventHandler(this.tableLayoutPanel_Paint);
    } 
```

就在下面：

```
private System.Windows.Forms.TableLayoutPanel tableLayoutPanel; 
```

所以，我确定问题就在这里，因为在我更改代码位置之前，它正在打印以筛选图像框。所以问题应该存在，但以防万一：

我打电话`paintLayoutTableOnScreen()`给以下方式：

```
public Form1()
    {
        InitializeComponent();
        paintLayoutTableOnScreen();
        paintTablesInScreen();//This was already there and worked just fine.
    } 
```

`paintTablesInScreen()`执行以下操作：

```
private void paintTablesInScreen()
    {
        for (int i = 0; i < Info.NumberOfColumns; i++)
        {
            for (int j = 0; j < Info.NumberOfRows; j++)
            {
                drawTable(i, j);

            }
        }
    } 
```

和`drawTable()`：

```
private void drawTable(int column, int row)
    {
        int tableNumber = Info.TableNumber(column, row);

        this.pictureBox1 = new System.Windows.Forms.PictureBox();
        this.pictureBox1.Image = Image.FromFile("C:\\Users\\Trufa\\Documents\\Visual Studio 2010\\Projects\\Viernes 7\\table.png");
        this.pictureBox1.Location = new System.Drawing.Point(3, 3);
        this.pictureBox1.Name = "pictureBox" + tableNumber.ToString();
        this.pictureBox1.Tag = tableNumber.ToString();
        this.pictureBox1.Size = new System.Drawing.Size(128, 86);
        this.pictureBox1.SizeMode = System.Windows.Forms.PictureBoxSizeMode.StretchImage;
        this.pictureBox1.TabIndex = 0;
        this.pictureBox1.TabStop = false;
        this.pictureBox1.Click += new EventHandler(AnyPictureBoxClickHandler);

        this.pictureBox1.Paint+=new PaintEventHandler((sender, e) =>
        {
            e.Graphics.TextRenderingHint = System.Drawing.Text.TextRenderingHint.AntiAlias;
            e.Graphics.DrawString(tableNumber.ToString(), Font, Brushes.Black, 58, 20);
        });

        this.tableLayoutPanel.Controls.Add(this.pictureBox1, column, row);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T06:05:08.063

您没有将 TableLayoutPanel 添加到表单的控件中。即你想念：

```
this.Controls.Add(this.tableLayoutPanel); 
```

# java - 我可以将 cobertura 报告导出为 excel 文件吗？

> ID：10809340
> 
> 赞同：1
> 
> 时间：2012-05-30T02:42:58.243
> 
> 标签：java, ant, reporting, cobertura

上级想要一份单元测试覆盖率的报告。我们在蚂蚁脚本上有 cobertura。这将生成一个大的 html 文件列表。在构建服务器上运行 cobertura 让所有人都能看到会很棒，但我们还没有:(。

我的问题是，有没有一种简单的方法可以将 cobertura 报告导出为经理喜欢阅读的内容，特别是 Excel 表格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T03:39:32.487

没有开箱即用的方法可以做到这一点。最好的办法是在本地运行 Apache 并使用服务器提供 HTML 文件。您不需要外部构建服务器来执行此操作，您可以轻松地将其托管在 mac、linux 或 windows 开发盒上。

除此之外，如果你有一个团队，你真的应该设置一个构建服务器，你是否在某个地方运行了源代码控制？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T22:31:20.683

我建议安装[Sonar](http://www.sonarsource.org/)并配置您的构建以在那里发布它的代码覆盖率指标。运行 Sonar 的许多其他充分理由，实际上设置和集成非常容易。

以下答案解释了如何在 ANT 构建中集成 cobertura 和 Sonar：

[SONAR - 使用 Cobertura 测量代码覆盖率](https://stackoverflow.com/questions/7747587/sonar-measure-code-coverage-using-cobertura/7760960#7760960)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T23:57:02.487

好吧，这太糟糕了……在 Cobertura 中，您唯一的输出格式选择是 XML 或 HTML。

1.  HTML文件可以吗？这非常易读，您可以为他们打印出来。甚至可以将其嵌入电子邮件中。

2.  你在 XSLT 怎么样？Ant 中有一个 XSLT 任务。您可以使用 XSLT 将 XML 文件转换为可以在 Excel 中读取的逗号分隔值文件。

第二个没那么糟糕。[XSLT](http://www.w3schools.com/xsl/)不是一门难学的语言，使用 XSLT 翻译文件应该不会花费太长时间。我在 Ant 中做过几次。不足以真正擅长 XSLT，但有足够的时间知道学习如何做到这一点并不是一件坏事。

# dynamics-crm - 'where' 条件无效。实体成员正在调用无效的属性或方法。LINQ 查询错误

> ID：10809343
> 
> 赞同：3
> 
> 时间：2012-05-30T02:43:07.787
> 
> 标签：dynamics-crm, dynamics-crm-2011

我正在对 CRM 2011 运行 linq 查询，但我不断收到此错误：

'where' 条件无效。实体成员正在调用无效的属性或方法。

我的代码如下所示：

```
 try
        {

            string rsmName = "Bob Harrison";
            var linqQuery = (from r in gServiceContext.CreateQuery("opportunity")
                             join c in gServiceContext.CreateQuery("account") on ((EntityReference) r["accountid"]).Id equals c["accountid"] into opp
                             from o in opp.DefaultIfEmpty()
                             where ((EntityReference)r["ownerid"]).Name.Equals(rsmName)
                             select new
                                        {
                                            AccountId = !r.Contains("accountid") ? string.Empty : r["accountid"],
                                            Account = !o.Contains("name") ? string.Empty : o["name"]
                                        });

            ddlCustomer.DataSource = linqQuery;
            ddlCustomer.DataValueField = "AccountId";
            ddlCustomer.DataTextField = "Account";
            ddlCustomer.DataBind();
        }
        catch (Exception ex)
        {
        } 
```

知道如何解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:22:03.843

看起来 CRM Linq 提供程序的功能有限，查询过于复杂。尝试使用[FetchXml](http://msdn.microsoft.com/en-us/library/bb928434.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:28:43.127

问题不在于 Linq 提供程序，而在于`EntityReference`s. 不幸的是，没有关于它的文档，但我最好的猜测是，由于没有构造函数用于`EntityReference`获取名称，因此它通常为 null ，除非以其他方式填充。

但无论如何，这仍然可以通过[linq](/questions/tagged/linq "显示标记为“linq”的问题")完成，就像通过[fetchxml](/questions/tagged/fetchxml "显示标记为“fetchxml”的问题")完成一样——通过查询`SystemUser`表。见下文（您必须翻译为后期绑定）。

```
var linqQuery = from r in gServiceContext.OpportunitySet
                join c in gServiceContext.AccountSet on r.AccountId.Id equals c.AccountId into opp
                from o in opp.DefaultIfEmpty()
                where o.OwnerId.Id == gServiceContext.SystemUserSet.Single(y => y.FullName.Equals(rsmName)).SystemUserId
                select new
                {
                    AccountId = !r.Contains("accountid") ? string.Empty : r["accountid"],
                    Account = !o.Contains("name") ? string.Empty : o["name"]
                }; 
```

# objective-c - 在 Xcode 中创建和保存到文件时遇到问题

> ID：10809345
> 
> 赞同：0
> 
> 时间：2012-05-30T02:43:15.390
> 
> 标签：objective-c, xcode, file, save

我正在尝试运行一些示例代码，但在创建和保存到文件时遇到了问题。

这是我的代码：

```
-(IBAction) example
{
    NSFileManager *fm = [[NSFileManager alloc] init];
    NSURL *docsurl = [fm URLForDirectory:NSDocumentDirectory inDomain:NSUserDomainMask  appropriateForURL:nil create:YES error:nil];
    myfolder = [docsurl URLByAppendingPathComponent:@"MyFolder"];
    NSError * err = nil;
    BOOL ok = [fm createDirectoryAtURL:myfolder withIntermediateDirectories:YES attributes:nil error:&err];
    ok = [label.text writeToURL:myfolder atomically:YES encoding:NSUTF8StringEncoding error:nil];       
}

-(IBAction) load
{
    label2.text = [[NSString alloc] initWithContentsOfURL:myfolder
    encoding:NSUTF8StringEncoding error:nil];
} 
```

我希望它在我按下第一个按钮时将第一个标签的文本保存到文件中。当我按下第二个按钮时，我希望它读取文件中的内容并制作第二个标签文本。但是，当我按下第二个按钮时，第二个标签就变成了空白。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T05:25:05.907

我建议实际使用那些 NSError 对象。我还建议使用默认的 NSFileManager。

```
-(IBAction) example
{
    NSFileManager *fm = [NSFileManager defaultManager];
    NSError *error;
    NSURL *docsurl = [fm URLForDirectory:NSDocumentDirectory inDomain:NSUserDomainMask  appropriateForURL:nil create:YES error:&error];
    myfolder = [docsurl URLByAppendingPathComponent:@"MyFolder"];
    NSError * err = nil;

    if ([fm createDirectoryAtURL:myfolder withIntermediateDirectories:YES attributes:nil error:&err]) {
        if ([label.text writeToURL:myfolder atomically:YES encoding:NSUTF8StringEncoding error:&err]) {

        }
        else {
            NSLog(@"%@", err);
        }
    }
    else {
        NSLog(@"%@", err);
    }

}

-(IBAction) load
{
    NSError *err;
    if ([[NSString alloc] initWithContentsOfURL:myfolder
    encoding:NSUTF8StringEncoding error:&err]) {
        label2.text = [[NSString alloc] initWithContentsOfURL:myfolder
    encoding:NSUTF8StringEncoding error:nil];
    }
    else {
        NSLog(@"%@", err);
    }
} 
```

此代码不会按原样工作，但它会打印出您遇到的任何错误，这些错误应该可以帮助您解决问题。

# ncurses - NCurses：为什么 init_color 返回 OK 但仍未设置颜色？

> ID：10809350
> 
> 赞同：4
> 
> 时间：2012-05-30T02:44:06.680
> 
> 标签：ncurses, xterm

我正在尝试通过将值 COLOR_BLUE 设置为以下 rgb 值来将文本块的背景设置为红色：(1000, 0, 0)。如果我使用 Gnome 的“终端”应用程序，背景是正确的（红色），但如果我使用 KDE 的“Konsole”，则背景不正确（蓝色）。为什么是这样？以下代码将在 Linux 上使用 compile 行进行编译：

```
g++ filename.cpp -lcurses 
```

我通过以下方式将我的 TERM 类型设置为 xterm-256color：

```
export TERM=xterm-256color 
```

这是代码：

```
#include <ncurses.h>
#include <cassert>
#include <csignal>

static bool stop = false;

void sigAbortHandler(int _sig)
{
    stop = true;
}

int main(int _argc, char **_argv)
{
    signal(SIGABRT, &sigAbortHandler);

    WINDOW *window = initscr();

    if (!has_colors())
    {
        delwin(window);
        endwin();
        perror("You must enable colors in your console");
    }

    if (!can_change_color())
    {
        delwin(window);
        endwin();
        perror("Error: unable to change colors, "
               "trying setting your TERM type to enable colors");
    }

    assert(start_color() == OK);
    keypad(stdscr, TRUE);
    cbreak();
    noecho();
    curs_set(0);
    nodelay(window, true);

    int background = COLOR_BLUE;
    assert(init_color(background, 1000, 0, 0) == OK);
    int foreground = 2;
    assert(init_color(foreground, 0, 0, 0) == OK);
    int pair = 1;
    assert(init_pair(pair, foreground, background) == OK);
    assert(wattron(window, COLOR_PAIR(pair)) == OK);

    short r, g, b;
    color_content(background, &r, &g, &b);
    assert(mvwprintw(window, 10, 10, "color content: %d, %d, %d", r, g, b) == OK);
    assert(wrefresh(window) == OK);
    assert(wattroff(window, COLOR_PAIR(pair)) == OK);

    while (!stop)
    {
    }

    delwin(window);
    endwin();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-03-02T22:03:27.090

问题是 Konsole 没有实现您期望的功能。ncurses 只知道您配置的终端描述中的内容。没有通用的方法来检查它是否正确。的[返回值](http://invisible-island.net/ncurses/man/curs_color.3x.html#h2-RETURN-VALUE)部分`init_color`说

> **`init_color`**
> 如果终端不支持此功能，则返回错误，例如，如果**`initialize_color`**终端描述中缺少该功能。

大概你有类似的东西`TERM=xterm-256color`。ncurses 终端数据库有一个正确的[`konsole-256color`](http://invisible-island.net/ncurses/terminfo.src.html#tic-konsole-256color)，它（`infocmp`用于与 比较[`xterm-256color`](http://invisible-island.net/ncurses/terminfo.src.html#tic-xterm-256color)）在许多方面有所不同：

```
comparing xterm-256color to konsole-256color.
    comparing booleans.
    ccc: T:F.
    km: T:F.
    mc5i: T:F.
    comparing numbers.
    comparing strings.
    bel: '^G', NULL.
    cbt: '\E[Z', NULL.
    cnorm: '\E[?12l\E[?25h', '\E[?25h'.
    cvvis: '\E[?12;25h', NULL.
    dim: '\E[2m', NULL.
    el1: '\E[1K', NULL.
    enacs: NULL, '\E)0'.
    ich: '\E[%p1%d@', NULL.
    initc: '\E]4;%p1%d;rgb\:%p2%{255}%*%{1000}%/%2.2X/%p3%{255}%*%{1000}%/%2.2X/%p4%{255}%*%{1000}%/%2.2X\E\\', NULL.
    invis: '\E[8m', NULL.
    is2: '\E[!p\E[?3;4l\E[4l\E>', '\E[m\E[?7h\E[4l\E>\E7\E[r\E[?1;3;4;6l\E8'.
    kDC: '\E[3;2~', NULL.
    kEND: '\E[1;2F', NULL.
    kHOM: '\E[1;2H', NULL.
    kIC: '\E[2;2~', NULL.
    kLFT: '\E[1;2D', NULL.
    kNXT: '\E[6;2~', NULL.
    kPRV: '\E[5;2~', NULL.
    kRIT: '\E[1;2C', NULL.
    kb2: '\EOE', NULL.
    kent: '\EOM', NULL.
    kf13: '\E[1;2P', '\EO2P'.
    kf14: '\E[1;2Q', '\EO2Q'.
    kf15: '\E[1;2R', '\EO2R'.
    kf16: '\E[1;2S', '\EO2S'.
    kf25: '\E[1;5P', '\EO5P'.
    kf26: '\E[1;5Q', '\EO5Q'.
    kf27: '\E[1;5R', '\EO5R'.
    kf28: '\E[1;5S', '\EO5S'.
    kf37: '\E[1;6P', '\EO6P'.
    kf38: '\E[1;6Q', '\EO6Q'.
    kf39: '\E[1;6R', '\EO6R'.
    kf40: '\E[1;6S', '\EO6S'.
    kf49: '\E[1;3P', '\EO3P'.
    kf50: '\E[1;3Q', '\EO3Q'.
    kf51: '\E[1;3R', '\EO3R'.
    kf52: '\E[1;3S', '\EO3S'.
    kf61: '\E[1;4P', '\EO4P'.
    kf62: '\E[1;4Q', '\EO4Q'.
    kf63: '\E[1;4R', '\EO4R'.
    kind: '\E[1;2B', NULL.
    kri: '\E[1;2A', NULL.
    mc0: '\E[i', NULL.
    mc4: '\E[4i', NULL.
    mc5: '\E[5i', NULL.
    rmacs: '\E(B', '^O'.
    rmcup: '\E[?1049l', '\E[2J\E[?47l\E8'.
    rmm: '\E[?1034l', NULL.
    rs1: '\Ec', NULL.
    rs2: '\E[!p\E[?3;4l\E[4l\E>', '\E7\E[r\E8\E[m\E[?7h\E[?1;3;4;6l\E[4l\E>\E[?1000l\E[?25h'.
    sgr: '%?%p9%t\E(0%e\E(B%;\E[0%?%p6%t;1%;%?%p5%t;2%;%?%p2%t;4%;%?%p1%p3%|%t;7%;%?%p4%t;5%;%?%p7%t;8%;m', '\E[0%?%p6%t;1%;%?%p2%t;4%;%?%p1%p3%|%t;7%;%?%p4%t;5%;m%?%p9%t\016%e\017%;'.
    sgr0: '\E(B\E[m', '\E[0m\017'.
    smacs: '\E(0', '^N'.
    smcup: '\E[?1049h', '\E7\E[?47h'.
    smm: '\E[?1034h', NULL. 
```

如您所见`NULL`，Konsole 根本没有实现该功能。特别是，它对`initc`（您所询问的功能）没有任何作用。

进一步阅读：

*   [通过计数控件比较版本](http://invisible-island.net/xterm/xterm.faq.html#compare_versions)（xterm FAQ）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T20:45:08.920

您的意思是将背景设置为 COLOR_BLUE 吗？尽管进行了检查`can_change_color`，但似乎初始化颜色对 Konsole 没有影响，并且背景在 init_pair 处保持 COLOR_BLUE。

```
int background = COLOR_BLUE;
assert(init_color(background, 1000, 0, 0) == OK);
...
assert(init_pair(pair, foreground, background) == OK);
assert(wattron(window, COLOR_PAIR(pair)) == OK); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-02T20:03:23.910

看似相关的摘录`man init_color`：

```
The init_color routine changes the definition of a color.  ... The first
argument must be a legal color value; **default colors are not allowed here**.
(See the section Colors for the default color index.)
...
Colors
...
In <curses.h> the following macros are defined.  These are the default colors.
...
             COLOR_BLUE 
```

因此，这些行正在做一些根据文档不应该工作的事情，但在某些终端中可能并且确实可以工作：

```
int background = COLOR_BLUE;
assert(init_color(background, 1000, 0, 0) == OK);
int foreground = 2;
assert(init_color(foreground, 0, 0, 0) == OK); 
```

应该有 16 个预定义的颜色对（如果我们计算粗体颜色），因此使用对`16`而`17`不是`COLOR_BLUE`and`2`可能会起作用。

（不必`Konsole`检查这一点，但这可能是原因，或者至少值得指出。）

# sql-server-2008 - 从日期时间计算不同的小时

> ID：10809354
> 
> 赞同：2
> 
> 时间：2012-05-30T02:45:04.573
> 
> 标签：sql-server-2008, datepart

我正在使用 sql 数据库，我有问题。这是关于公共交通的，我有表格“交通事故”和“事故发生时间”列（日期时间）。我需要计算在特定时间发生了多少事故，以了解一天中最危险的部分。我知道如何将小时与日期时间分开，但问题是如何计算和排序。它应该是这样的：

***交通事故发生时间***

```
 2011-03-05 07:40:00.000,        
 2011-03-07 01:15:00.000,      
 2011-04-07 19:00:00.000,      
 2011-07-23 11:00:00.000,        
 2011-06-22 07:09:00.000,
 2011-03-08 07:14:00.000,
 2011-02-02 01:26:00.000 
```

***按小时排序事故***

```
7h- 3 accidents,
1h- 2 accidents,
6h- 1 accident,
etc… 
```

我的英语不是很完美，但我希望我足够清楚 :P 谢谢你，Urosh

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T03:02:46.153

尝试这样的事情：

```
WITH T as
(
 SELECT '2011-03-05 07:40:00.000' Col1 UNION ALL        
 SELECT '2011-03-07 01:15:00.000' Col1 UNION ALL  
 SELECT '2011-04-07 19:00:00.000' Col1 UNION ALL        
 SELECT '2011-07-23 11:00:00.000' Col1 UNION ALL          
 SELECT '2011-06-22 07:09:00.000' Col1 UNION ALL  
 SELECT '2011-03-08 07:14:00.000' Col1 UNION ALL  
 SELECT '2011-02-02 01:26:00.000' 
) 
```

假设 T 是您的表，Col1 是您的日期列。

```
SELECT DATEPART(hour,Col1) as Hour,COUNT(DATEPART(hour,Col1)) as Accidents FROM T
GROUP BY DATEPART(hour,Col1)
ORDER BY DATEPART(hour,Col1) 
```

结果：

```
Hour Accidents
1    2
7    3
11   1
19   1 
```

最好的祝福

# sql - SQL：将事件拆分为多行

> ID：10809355
> 
> 赞同：4
> 
> 时间：2012-05-30T02:45:25.967
> 
> 标签：sql, sql-server, sql-server-2008

在这里查看我的 SQLFiddle（[链接](http://sqlfiddle.com/#!3/aa394/1)）

在 SQL Server 2008 中，我有事件开始和结束时间表，如下图所示。

![在此处输入图像描述](../Images/7a283ade6596db0edb263d7c45f60d04.png)

我需要编写一个查询，让我能够弄清楚每个事件中有多少属于哪个工作班次。我们的轮班时间为 12 小时，从 06:00-18:00 和 18:00-06:00 开始。

查询应产生如下图所示的结果。

![在此处输入图像描述](../Images/9eb17cafb4e66eb2401a0a4b72d89c46.png)

由此，我可以计算出特定工作班次的总事件持续时间。

我该怎么做才能从第一张图像转到第二张图像？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T04:02:18.657

```
With Shifts As
  (
    Select 1 As Num
      , Cast('2012-05-01 6:00 AM' As datetime) As ShiftStart
      , DateAdd(hh,12,Cast('2012-05-01 6:00 AM' As datetime)) As ShiftEnd
    Union All
    Select Num + 1, ShiftEnd, DateAdd(hh,12,ShiftEnd)
    From Shifts
    Where ShiftEnd < '2012-05-30'
    )
  , Segments As
    (
    Select event_id
      , Case 
        When Shifts.ShiftStart > event_start Then Shifts.ShiftStart 
        Else event_start
        End As start_split_segment        
      , Case 
        When Shifts.ShiftEnd < event_end Then Shifts.ShiftEnd
        Else event_end
        End As end_split_segment          
      , Count(*) Over ( Partition By E.event_id ) As SegmentCount
    From events As E
      Join Shifts
        On E.event_start <= ShiftEnd
          And E.event_end > ShiftStart
      )
Select E.event_id, E.description, E.event_start, E.event_end
  , S.start_split_segment, S.end_split_segment
  , Case When SegmentCount > 1 Then 1 Else 0 End As is_split
  , NullIf(SegmentCount,1) As split_segments
From Segments As S
  Join events As E
    On E.event_id = S.event_id 
```

[SQL 小提琴版本](http://sqlfiddle.com/#!3/7a556/4)

在这个解决方案中，我生成了每个班次开始和结束日期的日历。`Where ShiftEnd < '2012-05-30'`您可以通过更改为更大的日期来扩展日历。请注意，如果最终轮班超过 50 次左右，则需要`Option(Maxrecursion 0);`在查询末尾添加以提高 SQL Server 的上限。

# mysql - MySQL, ORDER 不工作

> ID：10809356
> 
> 赞同：1
> 
> 时间：2012-05-30T02:45:37.683
> 
> 标签：mysql, sql-order-by

首先，我制作了一个简单的留言簿，现在我希望最后一条评论出现在网站的首位。我的计划是按日期或 ID 以降序对数据库中的行进行排序。这是代码片段：

```
mysql_query("SELECT * FROM `guestbook` ORDER BY `Date` DESC") or die("Mysql error: " . mysql_error()); 
```

此代码不会导致任何错误，但注释显示为第一次。我也从 phpMyAdmin 复制了代码，但结果是一样的。ID 的类型当然是 INT with `auto_increment`，而 Date 的类型是`VARCHAR`（我将日期和时间存储在一个变量中）。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T02:49:16.867

我希望您知道有一个完全可用的`DATETIME`字段，甚至`TIMESTAMP`可以返回格式化的日期？

除此之外，这几乎可以肯定是由于您的日期格式不是大端格式。

试试`ORDER BY id DESC`吧——它会快得多，因为它是唯一的（最好是主键）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T02:50:10.850

`Date`将列更改为`DATETIME`列类型，它将正确排序。

排序`VARCHAR`将取决于您存储数据的格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T02:50:12.497

试试这个：SELECT * FROM `guestbook`ORDER BY `ID`DESC

而不是您的日期，如果您希望您的日期顺序正确，请确保您的日期数据类型是日期时间。

最好的祝福

# c - 在 C 中初始化数组不起作用

> ID：10809366
> 
> 赞同：0
> 
> 时间：2012-05-30T02:46:00.517
> 
> 标签：c, multidimensional-array

我正在尝试用“。”填充存储在 2D 数组中的 12x12 板。特点。

```
void initializeBoard(char board[BOARD_SIZE][BOARD_SIZE]) {
   int i, j;
   for (i=0; i<BOARD_SIZE; i++) {
      for (j=0; j<BOARD_SIZE; j++) {
         board[i][j] = '.';
      }
   }
} 
```

然后打印：

```
void printBoard(char board[BOARD_SIZE][BOARD_SIZE]) {

   int i,j;

   for (i=0; i<BOARD_SIZE; i++) {
      for (j=0; j<BOARD_SIZE; j++) {
         printf(" %c", board[i][j]);
      }
      printf("\n");
   }
   printf("\n");

} 
```

它打印出一个空网格。看起来没有任何东西存储在 board[][] 中。请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T03:06:31.280

看起来你做的一切都很好，至少在你展示的代码片段中。当我运行以下程序时：

```
#include <stdio.h>

#define BOARD_SIZE 12

void initializeBoard(char board[BOARD_SIZE][BOARD_SIZE]);
void printBoard(char board[BOARD_SIZE][BOARD_SIZE]);

int main() {
    char board[BOARD_SIZE][BOARD_SIZE];
    initializeBoard(board);
    printBoard(board);
    return 0;
}

void initializeBoard(char board[BOARD_SIZE][BOARD_SIZE]) {
    int i, j;
    for (i=0; i<BOARD_SIZE; i++) {
        for (j=0; j<BOARD_SIZE; j++) {
            board[i][j] = '.';
        }
    }
}

void printBoard(char board[BOARD_SIZE][BOARD_SIZE]) {
    int i,j;
    for (i=0; i<BOARD_SIZE; i++) {
        for (j=0; j<BOARD_SIZE; j++) {
            printf(" %c", board[i][j]);
        }
        printf("\n");
    }
    printf("\n");
} 
```

我得到以下输出：

```
$ ./a.exe
 . . . . . . . . . . . .
 . . . . . . . . . . . .
 . . . . . . . . . . . .
 . . . . . . . . . . . .
 . . . . . . . . . . . .
 . . . . . . . . . . . .
 . . . . . . . . . . . .
 . . . . . . . . . . . .
 . . . . . . . . . . . .
 . . . . . . . . . . . .
 . . . . . . . . . . . .
 . . . . . . . . . . . . 
```

您必须以某种方式/某处宣布第二块板并将其传递给您的`printBoard()`函数。你能告诉我们更多的代码吗？

# php - 将 Android 设备上的数据库同步到远程主数据库

> ID：10809370
> 
> 赞同：0
> 
> 时间：2012-05-30T02:46:26.043
> 
> 标签：php, android, mysql, database, sqlite

我在 Android 设备上有一个 SQLite 数据库和一个 MySQL 远程主数据库。Android 设备用户可以修改（即添加、删除、修改）数据库记录。我想要的是在 Android 设备在线时自动将 Android 设备上的数据库同步到主数据库。同步主数据库上的记录后，应反映所有添加、删除或在某些情况下发生的修改。

好的，这就是我想做的事情。在我创建的 Databasehelper 类中，我将在每个方法中添加代码，以便每次调用方法并在本地 android 数据库中执行相应的查询时，执行的查询字符串将存储在一个简单的文本中文件。因此，本地数据库中可以不断发生更改，查询字符串将继续存储在文件中。它基本上会创建一个 SQL 转储（对吗？）。现在，当我在客户端编写我的 JDBC MySQL 连接代码时，我将让它一次从该文件中读取一行，并在主 MySQL 服务器上执行查询。听起来怎么样？我想它也可以删除。

但出现了以下疑问：

1) MySql 的 JDBC 连接器可以在 Android 设备上工作吗？我在网上浏览并找到了相互矛盾的答案。有人说这行不通。有人说您只需将外部 jar 文件 mysql-connector-java-3.0.17-ga-bin 添加到项目的构建属性中。对此真的很困惑。对PHP一无所知，所以我希望这可行。

2）连接后，我认为我不需要从 MySql 主数据库返回任何结果。我只需要执行存储在主数据库上的文本文件中的 sql 转储。听起来很容易对吧？

3) 现在换一种方式同步。我在 Sqlite 上发现的好处是即使它们也接受 SQL 查询。因此，对于另一种同步方式，我需要让 Android 设备下载特定文件夹中的 Sql Dump 文件，然后获取我创建的数据库适配器以从下载的文件中读取并执行查询。这听起来要困难得多。有什么想法吗？一件事是确定 SQLite 数据库不允许连接到远程服务器。

有些疑问可能看起来很糟糕，但我真的需要你们的帮助。如您所见，我是数据库中的菜鸟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:56:37.253

您可能会尝试的一种方法（在这里大声思考）是：

*   在每个表中包含一个客户端 ID，以跟踪它们位于哪个客户端设备，并将其作为唯一键的一部分（假设您有多个设备支持与服务器同步）
*   您还应该在每个数据库行上包含客户端同步状态，以便跟踪服务器更新是否成功
*   您还需要跟踪您的客户行是否在初始传输后更新
*   然后你能在连接时选择所有更新的客户端行到服务器吗

所有这一切都会变得*更加*复杂，如果

*   你想支持删除
*   你想要双向复制
*   你有更严格的性能要求

# c++ - 构建 gcc 4.7 后 Clang 3.2 构建损坏

> ID：10809371
> 
> 赞同：3
> 
> 时间：2012-05-30T02:46:43.327
> 
> 标签：c++, gcc, clang, gcc4.7

所以我知道 Clang（大部分时间）依赖于 Gnu 的 libstdc++3，但是在构建 gcc 4.7.0 之后（因为太棒了！）我似乎遇到了一个问题，clang 的所有路径都是错误的。我是否需要清理我的构建目录并从头开始clang，特别是它给了我缺少的错误位/c++config.h，尽管它在那里并且用gcc构建得很好

我在 Linux x86，Ubuntu 12.04

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T08:48:29.310

是的，GCC 的头文件和库的路径包括版本，在你的情况下是 4.7.0，所以你需要重建 clang`--with-gcc-toolchain=...`并重新安装它

# java - 在 Java 中获取当前活动文件（不是 Java 应用程序，例如 pdf）的完整路径

> ID：10809372
> 
> 赞同：2
> 
> 时间：2012-05-30T02:46:50.643
> 
> 标签：java

（活动 - 其窗口位于前台的文件。）

我正在解决一个问题，即实时提取当前活动 pdf (.pdf)、word (.doc、.docx) 或记事本 (.txt) 文件中的文本。我已经尝试过 JNA，并获得了活动文件名（例如，a.pdf）和 exe 名称，但没有文件路径（例如，C:/Desktop/.../a.pdf。）我需要完整的文件路径在这里，因为一旦我知道它的路径，我就可以读取相应的文件并提取其中的文本。（我不需要 exe 路径，例如 C:/Program Files/adobe.exe。）

我检查了 JNA 的文档，但没有找到可以提供当前活动文件（不是 Java 应用程序）路径的方法。

或者，我认为也许某些包可以提供当前文件/图标的完整路径（例如，我在打开它之前单击 a.pdf，我的鼠标将专注于 a.pdf。）我尝试了 JNI，但仍然没有找到了这样的方法。

您能否就如何使用 Java 获取当前活动文件（不是 Java 应用程序）的路径或如何获取鼠标焦点中当前文件/图标的路径提供一些建议？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T03:16:33.967

在 unix 上，您可以使用 lsof 命令获取进程打开的文件。我在 Windows 上搜索了一些类似的东西并想出了这个线程：

[如何确定特定文件是否在 Windows 中打开？](https://stackoverflow.com/questions/15708/lsof-equivalent-for-windows)

> 相当于 lsof -p pid
> 
> 是来自 sysinternals 句柄和 listdlls 的组合输出，即
> 
> 处理 -p pid
> 
> listdlls -p pid
> 
> 你可以用 sysinternals pslist 找出 pid

如果您不习惯 unix 术语，“pid”表示进程 ID，即标识每个进程的编号。找出 acrobat 的 pid，然后获取进程的句柄，您应该能够获取 acrobat 打开的所有文件。

免责声明：我是 Mac/Linux 用户，所以我没有尝试过上面的命令！

# iphone - Google Directions API 折线未添加到地图

> ID：10809373
> 
> 赞同：1
> 
> 时间：2012-05-30T02:46:58.440
> 
> 标签：iphone, objective-c, ios, mapkit, mkoverlay

我在使用 Google Directions API 时遇到问题。我正在获取 JSON 字符串并对其进行解析，得到 overview_polylines 字符串

```
NSString *allPolylines = [NSString stringWithFormat:[[[routes objectAtIndex:0] objectForKey:@"overview_polyline"] objectForKey:@"points"]]; 
```

这东西行得通。我无法将其添加到地图中。我正在使用这篇文章[http://iosguy.com/tag/directions-api/](http://iosguy.com/tag/directions-api/)这似乎正是我所追求的。

我已经实施了

```
-(NSMutableArray *)decodePolyLine:(NSString *)encodedStr 
```

方法，效果很好。我对结果进行了 NSLogged，它显示出来好像我正在输出 CLLocation 对象。

问题是我不能让它显示在地图上。这是下面的代码

```
 NSMutableArray *_path = [self decodePolyLine:allPolylines];
    NSInteger numberOfSteps = _path.count;

    CLLocationCoordinate2D coordinates[numberOfSteps];
    for (NSInteger index = 0; index < numberOfSteps; index++) {
        CLLocation *location = [_path objectAtIndex:index];
        CLLocationCoordinate2D coordinate = location.coordinate;

        coordinates[index] = coordinate;
    }

    MKPolyline *polyLine = [MKPolyline polylineWithCoordinates:coordinates count:numberOfSteps];
    [_mapView addOverlay:polyLine];
    [self mapView:_mapView viewForOverlay:polyLine]; 
```

我还尝试添加显式调用

```
[self mapView:_mapView viewForOverlay:polyLine]; 
```

这是：

```
- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay {
    MKPolylineView *polylineView = [[MKPolylineView alloc] initWithPolyline:overlay];
    polylineView.strokeColor = [UIColor redColor];
    polylineView.lineWidth = 1.0;

    return polylineView;
} 
```

最后一个方法被调用，我使用 NSLog 进行了检查，但地图上没有显示任何内容。

有什么想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:27:34.527

The code shown looks OK except that you're not supposed to call `viewForOverlay` directly.

The map view will call that delegate method when it needs to show the overlay.

The simplest reason it would not be calling the delegate method is that the map view's `delegate` property is not set.

If the `delegate` property is set, then verify that the coordinates are what you're expecting and also make sure they are not flipped (latitude in longitude and vice versa).

Another thing to check:
If `_mapView` is an IBOutlet, make sure it is actually connected to the map view in the xib.

# java - 如何在jsf页面上显示方法的输出

> ID：10809375
> 
> 赞同：-4
> 
> 时间：2012-05-30T02:47:44.883
> 
> 标签：java, jsf, jsf-2

我有一个返回字符串的方法。我想在我的 JSF 页面上显示它。我如何在不设置属性的情况下做到这一点，因为输出是基于方法输入生成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T04:10:04.097

您可以像这样在页面上显示一个字符串；

```
 <h:outputText value="#{backingBean.yourString}"/> 
```

# javascript - 遍历 xml 在 FF 中工作正常，但在 IE 中使用 jquery

> ID：10809377
> 
> 赞同：0
> 
> 时间：2012-05-30T02:47:54.030
> 
> 标签：javascript, jquery, xml

```
(function(){

var xmlString="<Family><people><title>News for Golf</title></people><people><title>News for NBA</title></people></Family>"

$(xmlString).find('people').each(function(){
alert($(this).html());
});

})(jQuery); 
```

上面的代码在 FF 上运行良好并给出

```
<title>News for Golf</title>
<title>News for NBA</title> 
```

但不是在 IE 中，任何人都可以建议 IE 的问题是什么，我需要与上面相同的输出。

另外，如果可能的话，我真正想要的是

```
 <people><title>News for Golf</title></people>
 <people><title>News for NBA</title></people> 
```

谢谢，债券

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T03:01:38.980

您没有将 XML 解析为 Jquery 将正确使用的格式。

请参阅：[http ://api.jquery.com/jQuery.parseXML/](http://api.jquery.com/jQuery.parseXML/)

你应该这样做：

```
var xmlstring = '<Family><people><title>News for Golf</title></people><people><title>News  for NBA</title></people></Family>'​​​​​​​​;
var xmlDoc = $.parseXML(xmlstring);
var $xml = $(xmlDoc);
var $people = $xml.find('people');
$.each($people,function(index,person){
    //Here person refers to the person node of the XML
}); 
```

# css - 重叠绝对层：点击后面的一层

> ID：10809382
> 
> 赞同：0
> 
> 时间：2012-05-30T02:48:18.783
> 
> 标签：css, position, layer, absolute

思路是这样的，黑色图层后面的红色方块应该是可点击的：

![在此处输入图像描述](../Images/263de1f549a57cc78a39b33fe99fdf71.png)

如果我应用 z-index，它不起作用，因为红色层在黑色层后面：

![在此处输入图像描述](../Images/900e23e4f801bd661ec57cdeef4d3800.png)

# windows - SetWindowRgn 冻结窗口

> ID：10809384
> 
> 赞同：0
> 
> 时间：2012-05-30T02:48:34.547
> 
> 标签：windows, visual-studio-2010, winapi, visual-c++

正如标题所说，在我调用 SetWindowRgn 后，我遇到了应用程序窗口冻结（不再绘制）的问题。我的源代码如下：

```
 void MakeHole() 
    {
      // This will make a hole you can see through for the MainToon window.
      HRGN thisHgrn = CreateRectRgn(10, 200, 300, 200);
      SetWindowRgn(hwndClientList[intMainToon], thisHgrn, TRUE);
    } 
```

我什至不太确定 SetWindowRgn 是我需要使用的代码。我想要完成的只是游戏窗口中的一个洞（透明块），以便我可以看穿它。在这一点上，项目中的其他代码都不是真正相关的。一切都按预期工作，只是在我调用 SetWindowRgn 之后，游戏窗口不再绘制。它看起来冻结了，但我仍然可以关闭窗口并且声音仍然清晰地播放。这是一个可视化 C++ 控制台应用程序，但我也看不出它有什么重要性。如果您需要更多信息，请告诉我。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T03:54:07.963

修复了以下代码的问题。

```
 void MakeHole()
    {
       // This will make a hole you can see through for the MainToon window.

       HRGN rgnOriginalWnd;
       HRGN rgnTheHole;
       HRGN rgnNewWnd;

       RECT rectDlg;
       GetWindowRect(hwndClientList[intMainToon], &rectDlg);

       rgnOriginalWnd = CreateRectRgn(0, 0, rectDlg.right - rectDlg.left, rectDlg.bottom - rectDlg.top);
       rgnTheHole = CreateRectRgn(10, 200, 350, 450);
       rgnNewWnd = CreateRectRgn(0, 0, 0, 0);

       CombineRgn(rgnNewWnd, rgnOriginalWnd, rgnTheHole, RGN_DIFF);
       SetWindowRgn(hwndClientList[intMainToon], rgnNewWnd, TRUE);

       DeleteObject(rgnOriginalWnd);
       DeleteObject(rgnTheHole);
       DeleteObject(rgnNewWnd);
    } 
```

# android - 手动选择布局集？

> ID：10809385
> 
> 赞同：-1
> 
> 时间：2012-05-30T02:48:47.800
> 
> 标签：android, multiscreen

在我的 xml 中，我设置了小、正常、大和默认布局。

我不想设置设备自动选择布局，但我想根据设备宽度的分辨率进行选择。

这是我的`manifest.xml`

```
 <supports-screens
    android:anyDensity="true"
    android:largeScreens="true"
    android:normalScreens="true"
    android:resizeable="true"
    android:smallScreens="true"
    android:xlargeScreens="true" >
</supports-screens> 
```

如何设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T04:35:27.393

在您的项目`res/`目录中，您将包含您支持的每种屏幕尺寸的布局文件夹。可能的文件夹名称是`layout-small`、`layout-normal`和。如果您省略一个或多个屏幕大小的文件夹，Android 将使用等于或小于该大小的下一个最近的文件夹，并且还建议您有一个简单称为“默认”的文件夹，可以用作捕获 - all（建议使用 this 而不是）。在每个文件夹中，您通常会放置一个特定于该屏幕大小的 xml 布局文件，并且所有文件都将具有完全相同的名称（例如、等）。`layout-large``layout-xlarge``layout``layout-small``layout-normal/my_layout.xml``layout-large/my_layout.xml`

在您`Activity`的`onCreate()`方法中，您将调用`setContentView(R.layout.my_layout)`，它会自动从与设备屏幕尺寸匹配的文件夹中选择正确的布局。

[这](http://developer.android.com/guide/practices/screens_support.html)是一个非常全面的文档，解释了为不同屏幕尺寸设计应用程序，包括上述信息。

# sql - 在 SQL 中使用日期逻辑

> ID：10809391
> 
> 赞同：1
> 
> 时间：2012-05-30T02:49:29.267
> 
> 标签：sql, sql-server, date, db2

我正在尝试包含遵循这种推理的日期逻辑：

```
SELECT * 
FROM OPENQUERY(ACLS_PROD, 'SELECT A182.BK_NUM as Bank,
A182.LN_NUM as Loan_Number,
A182.ACT_STA as Ln_Sta,
A182.NXT_PMT_DUE_DAT as Due_Date,
A182.CUR_LN_BAL as Balance,
A182.INS_REF_NUM as Debt_Can_Ref

FROM PZFRL.ALT0182 A182

WHERE A182.ACT_STA IN(''0'', ''1'', ''2'')
AND (A182.INS_REF_NUM IN(''SDC'', ''SDD'', ''SDU'', ''SLF'', ''SUF'', ''DSF'', 
''JDC'', ''JDD'', ''JDU'', ''JLF'', ''JDF'')
AND A182.NXT_PMT_DUE_DAT <= GETDATE())

ORDER BY A182.BK_NUM,
A182.LN_NUM

') 
```

在 SAS 中，您可以使用 TODAY() 来完成此操作。SQL 是否具有我可以实现的等效日期函数？当我使用 CURDATE() 和 GETDATE() 时，我在消息日志中收到以下错误：

链接服务器“ACLS_PROD”的 OLE DB 提供程序“MSDASQL”返回消息“[IBM][CLI Driver][DB2] SQL0206N“CURDATE”在使用它的上下文中无效。SQLSTATE=42703“。消息 7350，级别 16，状态 2，第 19 行无法从链接服务器“ACLS_PROD”的 OLE DB 提供程序“MSDASQL”获取列信息。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T03:04:16.563

在[DB2](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/index.jsp)`CURRENT DATE`中，称为（两个字）的“特殊寄存器”为您提供当前日期。

没有括号；刚刚`CURRENT DATE`到位`GETDATE()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T03:05:50.883

免责声明：我不是 DB2 开发人员；我以前从来没有对它运行过这么多的查询。

话虽如此，从您复制的错误消息来看，它看起来像是在尝试针对 DB2 数据库运行。因此，您可以只使用`current time`而不是 GETDATE() 吗？这是我在 Google 搜索[DB2 current date](http://www.ibm.com/developerworks/data/library/techarticle/0211yip/0211yip3.html)大约 15 秒后发现的内容。

希望有帮助，祝你好运。

# ninject - NInject：Get时如何传递参数 ()?

> ID：10809392
> 
> 赞同：30
> 
> 时间：2012-05-30T02:49:34.637
> 
> 标签：ninject

我正在使用附图来解释我的意思。

*   我有几个由 NInject 管理的课程。其中一些有一些单例实例，而另一些则在瞬态范围内。在图像中，蓝色矩形是单例，红色是瞬态。处理器依赖于其他类或实例。

*   我想每次都使用 kernel.Get 来获取处理器的实例。但是，每次我想为处理器使用的对象使用不同的值。请参阅图像中的 Action1 和 Action2。该代码不是真实的，仅用于此处的解释。

有没有现有的方式可以满足我的需求？![Get时传参数](../Images/6c6914c0872286ac6b6349553c4e3b4a.png)

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-30T17:56:09.217

鉴于您的处理器将这些依赖项作为构造函数中的参数，您应该能够传递构造函数参数。

```
var foo = new Ninject.Parameters.ConstructorArgument("foo", new Foo());
var bar = new Ninject.Parameters.ConstructorArgument("bar", new Bar());
var processor = kernel.Get<IProcessor>(foo, bar);

public Processor (Foo foo, Bar bar){
    this.foo = foo;
    this.bar = bar;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T01:31:32.893

使用 OnActivation() 函数可以在激活依赖项时挂钩事件。

# jsp - 在 requestScope 中连接字符串

> ID：10809393
> 
> 赞同：0
> 
> 时间：2012-05-30T02:49:36.727
> 
> 标签：jsp, jstl, concatenation, el

我的要求是在 requestScope 变量的末尾连接字符串。ex requestScope.value[bean.selected_value] 其中 bean.selected_value 是在循环期间要连接的值，并且值会根据选择进行更改。这是我的代码

```
<select class="formtext">
    <option value="">Select month</option>
    <c:set var="monthsCollection" value='${requestScope.Month + '_' + [bean.selectedvalue}' />      
    <c:if test="${!empty monthsCollection}">
    <c:forEach var="monthList" items="${monthsCollection}">
        <option value="<c:out value='${monthList}' />"
        <c:out value='${stationList}' />
        </option>
    </c:forEach>
    </c:if>
</select> 
```

感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:36:03.427

您不能在表达式中连接字符串。`+`运算符只能用于数字。您可以做的是在 的`value`属性中使用两个表达式`<c:set/>`：

```
<c:set var="myVar" value="${var1}${var2}"/> 
```

因此，在您的情况下，您应该使用：

```
<c:set var="monthsCollectionVarName" value="Month${bean.selectedvalue}" />
<c:set var="monthsCollection" value="${requestScope[monthsCollectionVarName]}" /> 
```

# iphone - 如何使用 touchxml 从 WSDL 文件中获取数据

> ID：10809399
> 
> 赞同：0
> 
> 时间：2012-05-30T02:50:11.530
> 
> 标签：iphone, objective-c, ios

我正在使用 TouchXML 解析 WSDL 文件，而且我是新手，有一个像这样的 NSString

`NSString *str = @"<soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"><soap:Body><ns1:createSessionResponse xmlns:ns1=\"http://soap.user/\"><ns1:out>9E0B34E6DFF7BF89</ns1:out></ns1:createSessionResponse></soap:Body></soap:Envelope>";`

如何在“ns:out”中获取字符串**9E0B34E6DFF7BF89**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T03:59:21.290

试试这个 ：

```
NSString *str = @"<soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"><soap:Body><ns1:createSessionResponse xmlns:ns1=\"http://soap.user/\"><ns1:out>9E0B34E6DFF7BF89</ns1:out></ns1:createSessionResponse></soap:Body></soap:Envelope>";
NSRange rr2 = [str rangeOfString:@"<ns1:out>"];
NSRange rr3 = [str rangeOfString:@"</ns1:out>"];
int lengt = rr3.location - rr2.location - rr2.length;
int location = rr2.location + rr2.length;
NSRange aa;
aa.location = location;
aa.length = lengt;
str = [str substringWithRange:aa];
NSLog(@"%@",str);  // 9E0B34E6DFF7BF89 
```

# mongodb - 使用 Spring Data 查找所有 mongo 查询

> ID：10809409
> 
> 赞同：4
> 
> 时间：2012-05-30T02:51:37.600
> 
> 标签：mongodb, spring-data

我正在使用 spring 数据和 mongo db 数据库开发后端。

我得到了以下课程

```
@Document
public class Place
{
    @Id
    private String id;
    @GeoSpatialIndexed
    private Double[] location;
    private int[] category;
    //gets and sets
} 
```

所以我想进行查询以获取具有所选类别的点附近的地方，所以我得到了这个：

```
public List<Place> getPlacesNear(Double[] location, int[] category){
        NearQuery geoNear = NearQuery.near(location[0],location[1],Metrics.KILOMETERS).maxDistance(KM_DISTANCE);
        Query categoryQuery = new Query(new Criteria("category").all(category));
        geoNear.query(categoryQuery);
        GeoResults<Place> geoNearResult = mongoTemplate.geoNear(geoNear, Place.class);
        //return results
} 
```

但这没有返回任何结果，我知道查询。

```
db.place.find( { category: { $all: [ categoryID, categoryID2 ] } } ); 
```

运行良好，geoNear 不是问题。

这是一个愚蠢的问题，但 Spring Data for Mongo 的文档和示例非常基础，任何帮助或一个好的教程或文档的链接都可能会有所帮助，谢谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T03:03:08.727

我发现了问题而不是通过

```
Query categoryQuery = new Query(new Criteria("category").all(category)); 
```

作为一个 int[] 类别，我传递了一个 idCategory,idCategory2

```
Query categoryQuery = new Query(new Criteria("category").all(idCategory,idCategory2)); 
```

而且效果很好:)

# cakephp - CakePHP“致命错误：在非对象上调用成员函数 getCoalitions()”

> ID：10809410
> 
> 赞同：0
> 
> 时间：2012-05-30T02:51:59.813
> 
> 标签：cakephp, cakephp-2.1, php

> **可能重复：**
> [调用非对象上的成员函数](https://stackoverflow.com/questions/254291/call-to-a-member-function-on-a-non-object)

我尝试从 CakePHP 应用程序的视图中调用模型中的辅助函数“getColition($id)”，但出现此错误：

```
Fatal error: Call to a member function getCoalition() on a non-object
in C:\xampp\htdocs\MyCakeApp\app\View\Candidates\index.ctp on line 32 
```

我认为这可能与常见的 MVC 有关，但我无法弄清楚。应用程序是一个小型的“选举”应用程序。任何一般的辅助功能都会出现类似的问题。

为什么我不能在模型中调用函数？模型是辅助功能的合适位置吗？

/app/Model/Candidate.php

```
<?php
/**
 * @property
 */
class Candidate extends AppModel {
    var $name = 'Candidates';

// THIS I WANT TO CALL
    public function getCoalition($id){
        $results = $this->Candidate->query("SELECT coalitions.name from candidates, coalitions where candidates.coalition_id = coalitions.id and candidates.id =$id");
        return $results;
    }
}
?> 
```

/app/Controller/CandidatesController.php

```
<?php
class CandidatesController extends AppController {

    public $helpers = array('Html', 'Form');
    public $components = array('Session');
    var $name = 'Candidates';

    public function index() { //index stuff... }
    public function add()  { //add stuff...}
    public function edit($id = null)  { //edit stuff...}
    public function delete($id)  { //delete stuff...}
}
?> 
```

/app/View/Candidate/index.ctp

```
<h1>Candidates</h1>
<p><?php echo $this->Html->link("Add candidate", array('action' =>'add'), array('class' => 'btn btn-primary')); ?></p>
<hr>
<table>
    <tr>
        <th>Name</th>
        <th>Coalition</th>
    </tr>
<?php foreach ($candidates as $candidate): ?>
    <tr>
        <td><?php echo $candidate['Candidate']['name']; ?></td>
        <td>
            <?php 
///////////////// THIS CREATES THE ERROR ///////////////// 
            echo $this->Candidate->getCoalition($candidate['Candidate']['coalition_id']);
            ?>
        </td>
        <td><?php 
        echo $candidate['Candidate']['votes'];
        echo $this->Html->link('Muokkaa', array('action' => 'edit', $candidate['Candidate']['id'])); 
         ?>    
    </td>
    </tr>
<?php endforeach; ?>
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T03:09:37.347

您不能在视图中使用模型。您需要做的是从控制器设置一个视图变量。

仔细看看你在做什么，你只需要增加递归级别，以便它返回带有候选人记录的 Colition 数据或使用 Containable。

```
$this->Candidate->find('all', array('conditions' => ..., 'recursive' => 2)); 
```

或者

添加 public $actsAs = array('Containable'); 到 AppModel 和

```
$this->Candidate->find('all', array('conditions' => ..., 'contain' => array('Colition')); 
```

候选人和Colition之间的关系是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T04:33:07.550

是表/字段

> 来自候选人、联盟的联盟名称

存在于数据库中？

# c# - C#通过for循环插入数组值

> ID：10809417
> 
> 赞同：2
> 
> 时间：2012-05-30T02:53:32.907
> 
> 标签：c#

**大家好**

我想要做的是调用“FillDeck”方法来用 52 个数组元素填充“deck []”。for 循环用于添加元素 - 出于测试目的，它只是添加来自 for 循环的 y+x 值。我所做的是使用变量“placement”来指示我的索引位置，然后增加放置变量，因此对于每次循环迭代，索引都会增加，从而将数组元素添加到该特定索引。但是，我得到了我想要弄清楚的 IndexOutOfRangeException。

注意：我不能自动为数组使用预定值，我必须调用一个方法，目的是将值添加到数组中。由于它是一个具有嵌套 for 循环来确定等级/花色的卡片组，因此将是解决此问题的好方法。

谢谢 =)

```
 static void Main(string[] args)
    {
        int [] deck = {};
        FillDeck(deck); // Error Here
    }
    public static void FillDeck(int[] deck)
    {
        int placement = 0;
        // 0 = Ace , 12 = King : 0 = Hearts, 1 = Diamonds, 2 = Clubs, 3 = Spades
        for (int x = 0; x < 13; x++)
            for (int y = 0; x < 4; ++y)
            {
                deck[placement] = x + y;// Error here
                ++placement;
            }

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T02:59:41.163

```
int [] deck = {} 
```

这将创建一个 size 数组`0`。
你不能在里面放任何东西。

您需要编写`new int[52]`（或其他适当的数字）来创建一个可以实际容纳事物的数组。

或者，您可以创建一个，它可以通过调用该方法`List<T>`扩展到任何（合理的）大小。`Add()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T03:05:44.203

当然有错误，数组初始大小为 0 意味着没有元素可以存储在其中。希望下面的代码可以帮助你：

```
 public static int[] FillDeck()
    {
        var deck = new List<int>();
        // 0 = Ace , 12 = King : 0 = Hearts, 1 = Diamonds, 2 = Clubs, 3 = Spades
        for (int x = 0; x < 13; x++)
            for (int y = 0; x < 4; ++y)
            {
                deck.Add(x + y);
            }

        return deck.ToArray();

    } 
```

# python - Python：使用每个索引的所有先前索引循环遍历列表

> ID：10809418
> 
> 赞同：0
> 
> 时间：2012-05-30T02:53:41.090
> 
> 标签：python, algorithm, loops

给定一个`n`长列表，例如`['animal', 'dog', 'golden retriever']`or `['food', 'dinner', 'pasta', 'white sauce', 'fetucci alfredo']`，我需要遍历数组并获取当前索引以及每个先前的索引。

有没有什么好的方法可以循环并执行此操作，以便仍然可以将任何长度的列表转换为：

```
stuff['food']
stuff['food']['dinner']
stuff['food']['dinner']['pasta']
stuff['food']['dinner']['pasta']['white sauce']
stuff['food']['dinner']['pasta']['white sauce']['fetucci alfredo'] 
```

我越来越深入到一个对象中，但是每个值可能存在也可能不存在，所以我需要在每个级别都停下来。即，`stuff['food']['dinner']`可能存在，但我可能仍然需要在晚餐中添加意大利面，在意大利面中添加白酱等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T03:08:44.907

这？

```
>>> lst = ['food', 'dinner', 'pasta', 'white sauce', 'fetucci alfredo']
>>> for i in range(len(lst)):
...   print lst[:i+1]
... 
['food']
['food', 'dinner']
['food', 'dinner', 'pasta']
['food', 'dinner', 'pasta', 'white sauce']
['food', 'dinner', 'pasta', 'white sauce', 'fetucci alfredo'] 
```

因此，在循环的每个“步骤”中，`lst[:i+1]`是您的“当前索引与所有先前的索引”，您可以随心所欲地使用它。

例如，您可以使用它来索引一些深度嵌套的分层字典：

```
d = mydict
for index in lst[:i+1]:
  d = d[index] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T03:13:37.823

我认为它就像一个树数据结构

```
test = ['animal', 'dog', 'golden retriever']
tree = {}
subtree = tree
for x in test:
    subtree = subtree.setdefault(x, {}) 
```

`tree`是_`{'animal': {'dog': {'golden retriever': {}}}}`

祝你好运！

# javascript - Javascript - onClick 事件

> ID：10809419
> 
> 赞同：1
> 
> 时间：2012-05-30T02:53:47.473
> 
> 标签：javascript, canvas, onclick

所以我目前在画布上有一张图片，我希望在您单击图片后重新加载页面。问题是，一旦调用“Go”函数，页面就会重新加载，而不是在单击事件启动时重新加载。这是代码的一部分。

```
function Go()
{
    myimage = new Image();
    myimage.src = "http://i.imgur.com/xcLDp.gif";

    ctx.drawImage(myimage, 294, 100);

    myimage.onClick = window.location.reload();
} 
```

我觉得我错过了一些微不足道的东西，任何帮助将不胜感激。

谢谢。

问候，

马特

编辑：为 Derek 添加。

> 嘿，德里克，我非常感谢您的帮助。因为我对编码还很陌生，所以我会和你一起成为真正的菜鸟。因此，我正在尝试实现您在我的测试网站上向我展示的演示代码， [但](http://imstupid.net/matt/sq/test/jquery.html)我得到的错误是“未捕获的 ReferenceError：$ 未定义”。
> 
> 现在我知道“$”是一个 jQuery 符号，现在我对编码/javascript 很陌生，所以想象一下我对 javascript 库 (jQuery) 有多么陌生。
> 
> 我已经下载了 jQuery 并将其放在同一目录中，然后将此行添加到 html：

```
<script src="jquery-1.7.2.js" type="text/javascript"></script> 
```

> 难道我做错了什么？为什么它没有在 jquery 库上使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T02:57:45.177

那是因为你`reload`立即打电话给`()`。

```
myimage.onClick = window.location.reload; 
```

***编辑：*** 并且您无法在图像上触发点击事件，您应该绑定到现有的 dom 元素，例如：

```
myimage.onload = function(){
  document.querySelector("canvas").addEventListener("click", window.location.reload);
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T03:00:31.187

“重装”其实是一种*错觉*。当你这样做

```
myimage.onClick = window.location.reload(); 
```

即刻`reload()`执行。

你真正打算做的是：

```
myimage.onClick = window.location.reload; 
```

但为什么是错觉呢？因为您甚至无法单击图像，因为它在*DOM*中不存在。该图像在您的 中`<canvas>`，因此它应该是：

```
document.querySelector("canvas").addEventListener("click",function(){
    location.reload();
}); 
```

您还必须计算指针是否在图像上方。见演示。

**演示：http:** [//jsfiddle.net/DerekL/QuAVc/](http://jsfiddle.net/DerekL/QuAVc/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T03:01:17.090

是的，确定你错过了什么，你必须通过 window.location.reload 作为回调（不要放括号），试试这个：

```
function Go() {
  myimage = new Image();
  myimage.src = "http://joinmissinglink.com/wp-content/uploads/2012/01/go-button5.jpg";

  ctx.drawImage(myimage, 294, 100);

  myimage.onClick = window.location.reload; //window.location.reload is a callback
} 
```

# git - 如何设置本地目录以镜像远程 git 存储库？

> ID：10809422
> 
> 赞同：1
> 
> 时间：2012-05-30T02:54:22.187
> 
> 标签：git, mirror, acceleration

这是情况。我在服务器 A 上有一个远程 git 存储库。此外，我必须在桌面 B 上使用此存储库中的相同源代码工作。由于访问服务器 A 的带宽有限，我想在桌面 B 上为存储库设置一个本地镜像。

现在，我已经通过以下方式设置了镜像存储库

```
git clone --mirror https://repository-on-server-a /local/repo/path.git 
```

我已经通过以下方式测试了本地存储库

```
git clone file://localhost/local/repo/path.git 
```

然后我修改了 crontab 来做

```
cd /local/repo/path git fetch -q 
```

每 5 分钟同步一次。它运作良好。

一开始，我正在考虑使用

```
git config --global url.file://localhost/local/repo/path.git.insteadOf https://repository-on-server-a 
```

让 git 从本地目录而不是远程仓库获取所有对象。但是，它不起作用。

我的问题是

1.  有没有一种简单的方法可以为远程 git repo 设置这样的本地镜像？
2.  如何处理'git push'？由于 insteadOf 将每次推送到本地目录，我如何将所有更改推送回服务器 A？

本地目录用于测试，但不是最终解决方案。稍后我将有另一个桌面 C 来从桌面 B 获取源代码。另一位同事也将加入我的行列。这意味着我们希望在桌面 B 中进行所有更改，以便为我们提供一些“中心”解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T03:15:04.780

镜子有什么用？您的本地 git 工作目录已经*是*源存储库的镜像；这就是 DVCS 的工作方式。我不明白在您的文件系统上创建第二个本地副本的好处。

**编辑** 如果您想使用您的存储库之一作为本地网络收集点，以在您的网络的其余部分和上游来源之间进行更改，那么 cron 作业就可以了。`push --mirror`在它完成它之后让它做一个`fetch -a`。

但是，我不会打扰代理/别名设置。只需让每个人都明确地克隆并推送到您的本地镜像；这样，如果他们出于某种原因需要到达真正的原点，就不会妨碍他们。他们甚至可以将两个 URL 都设置为远程，默认使用本地 URL，如果需要，可以通过远程名称使用真实的 URL。

# android - ReportContent 在 acra 中无法正常工作

> ID：10809423
> 
> 赞同：2
> 
> 时间：2012-05-30T02:54:28.880
> 
> 标签：android, acra

天，那里！

我添加了 acra 以获得有关应用程序崩溃的信息。首先，我尝试自定义报告内容（我需要 ReportField.PHONE_MODEL、ReportField.LOGCAT）。

```
@ReportsCrashes(
formKey = "dXXXXXXXXXXXXXXXXXXXXXQ", 
customReportContent = {ReportField.PHONE_MODEL, ReportField.LOGCAT}
) 
```

在我添加了权限 android.permission.READ_LOGS 和 android.permission.READ_PHONE_STATE 之后。结果，LOGCAT 完全写入 PHOME_MODEL ......

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-10T12:53:37.833

如果您想自定义报告内容，您必须使用自己的网站或提供 CouchDB 空间的付费服务之一（或者如果您有网站，也可以使用其他后端）

# java - 发送更改的哈希图，但使用 ObjectOutputStream 和 ObjectInputStream 获得相同的哈希图

> ID：10809424
> 
> 赞同：3
> 
> 时间：2012-05-30T02:54:31.530
> 
> 标签：java, hashmap, objectoutputstream, objectinputstream

```
public static void main(String[] args) throws Exception {
    Socket socket = new Socket("127.0.0.1", 2345);

    ObjectOutputStream oos = new ObjectOutputStream(socket.getOutputStream());
    Map<Integer, Integer> testMap = new HashMap<Integer, Integer>();

    testMap.put(1,1);
    oos.writeObject(testMap);
    oos.flush();

    testMap.put(2,2);
    oos.writeObject(testMap);
    oos.flush();

    oos.close();
}

public static void main(String[] args) throws Exception {
    ServerSocket ss = new ServerSocket(2345);
    Socket s = ss.accept();
    ObjectInputStream ois = new ObjectInputStream(s.getInputStream());

    System.out.println((HashMap<Integer, Integer>) ois.readObject());
    System.out.println((HashMap<Integer, Integer>) ois.readObject());

    ois.close;
} 
```

上面的代码来自两个文件。运行它们时，控制台会打印相同的结果：

```
{1=1}
{1=1} 
```

这怎么可能发生？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T02:58:39.493

ObjectOutputStream 会记住它已经写入的对象，并且在重复写入时只会输出一个指针（而不是再次输出内容）。这保留了对象身份，并且对于循环图是必需的。

所以你的流包含的基本上是：

*   HashMap A，内容为 {1:1}
*   指针：“再次HashMap A”

您需要在您的情况下使用新的 HashMap 实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T03:02:41.320

正如[Thilo](https://stackoverflow.com/a/10809442/758280)已经说过的，an`ObjectOutputStream`会缓存它已经写过的东西。您可以按照他的建议使用新地图，也可以清除缓存。

在调用[`ObjectOutputStream.reset`](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectOutputStream.html#reset%28%29)之间调用 to`writeObject`将清除缓存并为您提供最初预期的行为。

```
public static void main(String[] args) throws IOException,
        ClassNotFoundException {
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    try (ObjectOutputStream oos = new ObjectOutputStream(baos)) {
        HashMap<Integer, Integer> foo = new HashMap<>();
        foo.put(1, 1);
        oos.writeObject(foo);
        // oos.reset();
        foo.put(2, 2);
        oos.writeObject(foo);
    }

    ByteArrayInputStream bais = new ByteArrayInputStream(baos.toByteArray());
    try (ObjectInputStream ois = new ObjectInputStream(bais)) {
        System.out.println(ois.readObject());
        System.out.println(ois.readObject());
    }
} 
```

# networking - 如何使用特定端口将 url 请求重定向到 localhost

> ID：10809426
> 
> 赞同：0
> 
> 时间：2012-05-30T02:55:39.053
> 
> 标签：networking

如何重定向

**艺术家.org** :80到**localhost:9999**

修改主机文件是不够的，因为它不允许配置端口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T03:02:30.823

您可以使用 IPTables，[这](http://www.debuntu.org/how-to-redirecting-network-traffic-a-new-ip-using-iptables)是一个有关如何使用的链接

# c++ - GCC 可以从最终输出中消除什么样的死代码？

> ID：10809429
> 
> 赞同：19
> 
> 时间：2012-05-30T02:56:54.970
> 
> 标签：c++, c, templates, gcc, g++

我一直被告知编译器足够聪明，可以消除死代码。我正在编写的大部分代码在编译时都有很多已知信息，但代码必须以最通用的形式编写。我不知道任何程序集，所以我无法检查生成的程序集。在最终的可执行文件中可以有效地消除什么样的代码？

几个例子但不限于

```
f(bool b){
 if(b){
  //some code
 }else{
  //some code
 }
}
f(true);
//////////////////////////
template<bool b>
f(){
 if(b){
  //some code
 }else{
  //some code
 }
}
f<true>();
/////////////////////////// 
```

如果定义`f`在其他目标代码中并且被调用`f(true)`在主代码中怎么办？链接时间优化会有效消除死代码吗？促进死代码消除的编码风格/编译器选项/技巧是什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-30T03:13:58.807

通常，如果您使用标志进行编译，[则会`-O`打开](http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)以下标志：

```
 -fauto-inc-dec 
      -fcompare-elim 
      -fcprop-registers 
      -fdce  
      [...] 
```

`-fdce`代表死代码消除。我建议您编译您的二进制文件时使用或不使用（即通过明确关闭）此选项，以确保您的二进制文件是否按照您希望的那样优化。

阅读编译器的[不同阶段：](http://www.delorie.com/gnu/docs/gcc/gccint_30.html)

> *   SSA 积极的死代码消除。由 `-fssa-dce' 选项打开。这个过程执行消除被认为是不必要的代码，因为它对程序没有外部可见的影响。它以线性时间运行。

至于帮助链接器消除死代码，请通过[此演示文稿](http://elinux.org/images/2/2d/ELC2010-gc-sections_Denys_Vlasenko.pdf)。两个主要的收获是：

> 使用 -ffunction-sections -fdata-sections 编译您的模块——它没有任何缺点！
> 
> *   这包括静态库，而不仅仅是二进制文件——使您的库的用户可以从更有效的死代码删除中受益。
> *   用 --gc-sections 链接你的二进制文件，除非你必须链接到使用魔法部分的讨厌的第三方静态库。

您可能还想查看[这个 GCC 错误](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=42494)（了解可能会错过哪些优化机会以及原因）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-11T09:59:44.687

您的示例侧重于函数内部的死代码消除。

另一种类型的死代码消除是删除整个未使用的符号（函数或变量），可以通过以下方式实现：

```
-fdata-sections -ffunction-sections -Wl,--gc-sections 
```

如前所述：[如何使用 GCC 和 ld 删除未使用的 C/C++ 符号？](https://stackoverflow.com/questions/6687630/c-c-gcc-ld-remove-unused-symbols)

[默认情况下](https://gcc.gnu.org/onlinedocs/gcc-5.4.0/gcc/Optimize-Options.html)，这些标志在各种 GCC -O 级别（-O1、-O2 等）中未启用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-14T16:21:37.307

当我在这样的 if 表达式中使用模板参数常量时，dce（死代码消除）编译器（Linux 上的 GCC 4.8.1）标志没有帮助，O2、O3 优化也没有帮助。我不得不使用模板专业化包装器：

```
template<bool b>
f();

template<>
f<true>(){
  //some code on true condition
}

template<>
f<false>(){
  //some code on false condition
} 
```

也可以使用宏来避免编译未使用的代码分支，但这取决于编译器（无论是在代码中还是在预编译阶段处理宏）：

```
template<bool b>
f(){
 #if b
  //some code
 #elif
  //some code
 #endif  // b
} 
```

# android - 如何知道应用程序是从 google play 还是侧载安装的？

> ID：10809438
> 
> 赞同：68
> 
> 时间：2012-05-30T02:58:00.253
> 
> 标签：android, google-play, sideloading

我需要检测我的应用程序是从 google play 或其他市场安装的，我如何获得这些信息？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-05-30T03:03:27.260

该类`PackageManager`提供[getInstallerPackageName](http://developer.android.com/reference/android/content/pm/PackageManager.html#getInstallerPackageName%28java.lang.String%29)方法，该方法将告诉您安装您指定的包的包名。侧面加载的应用程序将不包含值。

**编辑**：请注意下面关于亚马逊应用商店的@mttmllns[回答。](https://stackoverflow.com/a/16862957/21126)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-05-31T17:43:18.417

仅供参考，[亚马逊](https://forums.developer.amazon.com/forums/thread.jspa?messageID=3679)商店的最新版本最终也将[`PackageManager.getInstallerPackageName()`](http://developer.android.com/reference/android/content/pm/PackageManager.html#getInstallerPackageName%28java.lang.String%29)与`"com.amazon.venezia"`Google Play 的`"com.android.vending"`.

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-07-23T09:15:31.770

我使用此代码检查构建是从商店下载还是侧载：

```
public static boolean isStoreVersion(Context context) {
    boolean result = false;

    try {
        String installer = context.getPackageManager()
                                    .getInstallerPackageName(context.getPackageName());
        result = !TextUtils.isEmpty(installer);
    } catch (Throwable e) {          
    }

    return result;
} 
```

科特林：

```
 fun isStoreVersion(context: Context) =
    try {
      context.packageManager
        .getInstallerPackageName(context.packageName)
        .isNotEmpty()
    } catch (e: Throwable) {
      false
    } 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-06-25T05:17:25.970

如果您正在寻找识别和限制侧载应用程序。谷歌已经提出了解决问题的解决方案。

您可以按照以下方式进行操作

项目`build.gradle`：

```
buildscript {
 dependencies {
  classpath 'com.android.tools.build:bundletool:0.9.0'
 }
} 
```

应用模块`build.gradle`：

```
implementation 'com.google.android.play:core:1.6.1' 
```

扩展应用程序的类：

```
public void onCreate() {
if (MissingSplitsManagerFactory.create(this).disableAppIfMissingRequiredSplits()) {
    // Skip app initialization.
    return;
}
super.onCreate();
..... 
```

}

通过这种集成，谷歌将自动识别是否缺少任何拆分 apk，并显示一个弹出窗口“**安装失败**”，它还会重定向到 Play 商店下载屏幕，用户可以通过 Google Play 商店正确安装该应用程序。

检查此[链接](https://developer.android.com/guide/app-bundle/sideload-check?hl=en-419)以获取更多信息。

希望这可以帮助。

# orchardcms - 根据分类术语搜索其他项目

> ID：10809439
> 
> 赞同：2
> 
> 时间：2012-05-30T02:58:20.333
> 
> 标签：orchardcms

我使用分类模块创建了一些术语。我在自定义内容类型中添加了分类字段。现在，在页面上，我想显示已用相同分类术语标记的其他项目，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T03:04:18.383

如果您知道术语名称，则可以使用以下查询 -

```
var _taxonomyService = WorkContext.Resolve<ITaxonomyService>();

var termContentItems = _taxonomyService.GetContentItems(termname)
                       .Where(c => c.ContentItem.ContentType == "YourContentTypeName")
                       .ToList(); 
```

# c - 使用 Visual Studio Express C++ 进行 C 编程的设置和配置？

> ID：10809444
> 
> 赞同：1
> 
> 时间：2012-05-30T02:59:02.523
> 
> 标签：c, visual-studio-2010, visual-c++

我想知道在使用 Microsoft VS Express 2010 编译器学习 C 时可以试验哪些配置和设置。如果我只是启动一个空项目并添加我的 .h 和 .c 文件，它适用于 C 文件。我不必将模式从 C++ 更改为 C，我可以编译一个可执行文件并从命令区域运行它。是否可以从 IDE 中启动需要命令行参数的项目？如果是，如何？我有一个模块化程序，它进行堆排序，从命令行获取一个列表参数。我可以从命令行调用命令行参数来运行它，但是下次我这样做时，我想从 IDE 中使用命令行参数启动我的程序。这可能吗？

```
#include <stdio.h>
#include <stdlib.h>

#include "sort.h"

/* argc kommer att innehålla antalet argument på kommandoraden
   argv är en vektor med argc strängar som representerar
   argumenten. Observera att första argumentet, argv[0], är
   programnamnet.
*/
int main(int argc, char *argv[]) {
  int *vector, n, i;

  if(argc > 1) {
    n = argc - 1;
    vector = (int *) malloc(n * sizeof(int));

    for(i = 0; i<n; i++)
      vector[i] = atoi(argv[i+1]);

    sort(vector, n);

    printf("Sorted input: %d", vector[0]);
    for(i = 1; i<n; i++)
      printf(" %d", vector[i]);
    printf("\n");

    free(vector);
    return 0;
  } else {
    fprintf(stderr, "Error: No input arguments.\n");
    printf("This program sorts number on the command line.\n");
    printf("Usage: %s n1 n2 n3 ...\n", argv[0]);

    return 1;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T03:04:18.230

IDE 可以使用命令行参数启动您的程序。

添加命令行参数：

1.  *在解决方案资源管理器*中右键单击您的解决方案。
2.  在侧边栏中选择*配置属性->调试*。
3.  将您一直使用的命令行参数添加到*命令参数*字段。

此外，如有必要，请在代码中设置断点以停止执行。

还有一件事：如果您单击*Command Arguments* 字段，或*Configuration Properties* GUI 中的大多数字段，您将获得一个带有文本区域的新对话框，用于编辑该字段。除此之外，您还会看到一个*Macros>>*按钮，其中显示了您可以在许多配置字段中使用的 IDE 宏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T03:06:35.337

右键单击项目，转到`Properties`.

1.  单击配置属性。
2.  C/C++
3.  先进的
4.  编译为 ( 改成`Compile as C code /TC`)

应用上述设置并将源文件更改为`.c`扩展名。

![在此处输入图像描述](../Images/1878af12e99c1f25dd66a56359b8dfb8.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T04:00:52.123

其他研究员已经指出了如何进行 IDE 更改：

当您使用 C++ (g++) 编译器进行编译并将“C”代码作为 C++ 项目的一部分时，您应该使用适当的宏来保护您的 C 代码。如下所示：

```
#ifdef __cplusplus
extern "C" {
#endif //__cplusplus

`your C Code here `

#ifdef __cplusplus
}
#endif //__cplusplus 
```

# android - @Smoke 在 Robotium 中的意义是什么？什么时候应该使用它？

> ID：10809445
> 
> 赞同：1
> 
> 时间：2012-05-30T02:59:07.753
> 
> 标签：android, unit-testing, robotium, android-testing

我是 Robotium 的新手，在`NotePadTest.java`示例中，我遇到了`@Smoke`注释。使用的目的是`@Smoke`什么？例如，我们`@Override`在重写方法或`@implements`实现接口的方法时使用。我的问题是为什么`@Smoke`？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T03:01:51.147

这是对[冒烟测试](http://en.wikipedia.org/wiki/Smoke_testing#Software_development)的参考。它应该是一组可以经常运行的快速测试，以便及早发现任何明显的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-21T10:45:32.730

冒烟测试是一个运行健全性检查的测试，以查看项目是否有资格进行其他测试。冒烟测试是没有开销的小型测试，因此我们可以在运行其他测试之前节省时间。

# objective-c - UITableView 显示额外的空白

> ID：10809452
> 
> 赞同：-1
> 
> 时间：2012-05-30T02:59:41.437
> 
> 标签：objective-c, ios, uitableview, whitespace

在我插入解析数据数组后，UITableView 在左侧显示了额外的空白区域。所以，我的问题是如何修剪 tableView 中的空白。我想我有空格，因为我解析的文本的 href 超链接在单元格中显示为空白。

这是我解析的 HTML 的一部分：

```
 <h3 style="clear:left"><a class="c4" href="http://www.website.ge/article-22624.html">
         Facebook - the text I have parsed </a></h3> 
```

这是我使用的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    NSError *error = nil;
    NSURL *url=[[NSURL alloc] initWithString:@"http://www.website.ge/news"];
    NSString *strin=[[NSString alloc] initWithContentsOfURL:url encoding:NSUTF8StringEncoding error:nil];

    HTMLParser *parser = [[HTMLParser alloc] initWithString:strin error:&error];

    if (error) {
        NSLog(@"Error: %@", error);
        return;
    }

    listData =[[NSMutableArray alloc] init];

    HTMLNode *bodyNode = [parser body];
    NSArray *dateNodes = [bodyNode findChildTags:@"span"];

    for (HTMLNode *inputNode in dateNodes) {
        if ([[inputNode getAttributeNamed:@"class"] isEqualToString:@"date"]) {
            //NSLog(@"%@", [inputNode contents]); 
            //[listData addObject:[inputNode contents]];
        }
    }    

    NSArray *divNodes = [bodyNode findChildrenOfClass:@"c4"];

    for (HTMLNode *inputNode in divNodes) {

           [listData addObject:[inputNode contents]];

            }

} 
```

在表格视图中，我在解析数据的开头看到了空格。它必须是被翻译成空格的超链接。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    static NSString *CellIdentifier = @"Cell";
    //here you check for PreCreated cell.
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    //Fill the cells...  
    cell.textLabel.textAlignment=UITextAlignmentLeft; // attempt to move it to the left

    cell.textLabel.text = [listData objectAtIndex: indexPath.row];
    //yourMutableArray is Array 
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T03:37:54.380

根据您的描述，我假设您在标签中显示的文本中有额外的空格。

如果是这种情况，请使用您创建的字符串，并在设置标签之前使用：

```
theStringToDisplay = [theStringToDisplay stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
theLabel.text      = theStringToDisplay; 
```

**EDIT now that you have supplied your code:**
In your case, I would use `stringByTrimmingCharactersInSet` when you are first setting the strings in your array:

```
NSArray *divNodes = [bodyNode findChildrenOfClass:@"c4"];
for (HTMLNode *inputNode in divNodes) {
    [listData addObject:[[inputNode contents] stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]];
} 
```

# tsql - T-SQL 计数返回所有记录而不是子集

> ID：10809455
> 
> 赞同：0
> 
> 时间：2012-05-30T03:00:16.133
> 
> 标签：tsql

试图找出这个愚蠢的语法问题

```
select distinct Count(Mgr) from CarsManager 
```

返回所有记录..应该是子集计数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T03:02:28.407

```
Select Mgr, Count(*)
From CarsManager
Group By Mgr 
```

您没有指定应进行的子集计数。鉴于您的示例，我认为它是`Mgr`列。

如果您寻求的是独特经理的数量，那么您可以这样做：

```
Select Count(Distinct Mgr)
From CarsManager 
```

**Count(*) 和 Count(SomeColumn) 之间的区别**

在评论中，您询问了`Count(*)`和之间的区别`Count(SomeCol)`。区别不在于性能，而在于逻辑。`Count(*)`计算行数，而不考虑列。`Count(SomeCol)`计算SomeCol 中*的非空*值。

[计数 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms175997.aspx)

> > COUNT(ALL expression) 计算组中每一行的表达式并返回非空值的数量。

在这种情况下`Count(SomeCol)`,`ALL`是隐含的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T03:02:08.603

你不能一次完成所有这些 - 你需要一个子查询：

```
SELECT count(*) FROM (SELECT DISTINCT Mgr FROM CarsManager) as tbl1 
```

# windows - 什么会导致 Windows InstallDate 发生变化？

> ID：10809457
> 
> 赞同：1
> 
> 时间：2012-05-30T03:01:07.620
> 
> 标签：windows, wmi

我想知道是否有任何可能导致 Windows 安装日期更改 - 特别是 Win32_OperatingSystem 类中的 InstallDate。我们使用 C# 中的 ManagementObjectSearcher 来获取各种系统信息以用于许可目的，并且在某些计算机上，Windows 安装日期已无明显原因更改。

我一直试图找出它从何处获取安装日期信息的确切位置，以便确定安装新的服务包或 .net 版本是否可能导致此问题，但无济于事。

不幸的是，我们甚至看不到它的变化，因为信息是散列的（好吧，我们可能会看到它已经变成了什么，但我们不得不再次打扰客户）。

我想可能发生的另一件事是日期时间从一种格式到另一种格式的转换可能由于某种原因而发生了变化，但我无法解决它是否可能。这就是我们正在做的事情：

```
ManagementObjectSearcher searcher = new ManagementObjectSearcher("SELECT * FROM Win32_OperatingSystem");
foreach (ManagementObject wmi_Windows in searcher.Get())
{                   
  try
  {
    s = wmi_Windows["InstallDate"].ToString();
    DateTime dc = ToDateTime(s);
    WindowsInfo.InstallDate = dc.AddTicks(-TimeZone.CurrentTimeZone.GetUtcOffset(DateTime.Now).Ticks).ToLocalTime().ToString();
     break;
   }
   catch (Exception ex)
   {
     //stuff here
   }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T03:56:19.000

[Win32_OperatingSystem](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394239%28v=vs.85%29.aspx) WMI 类的属性返回的值`InstallDate`是从 Key 中检索的，此 windows 注册表值存储为自 1970 年 1 月 1 日以来的秒数。如果您修改该 windows 注册表值，然后再次运行 WMI 查询，您将获取修改后的值。`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\InstallDate`

# ruby - 如何为对象数组编写 JSON 模式？

> ID：10809459
> 
> 赞同：23
> 
> 时间：2012-05-30T03:01:23.080
> 
> 标签：ruby, json, jsonschema

我的 JSON 字符串将被格式化为：

```
{
    "count":3,
    "data":[
        {
            "a":{"ax":1}
        },
        {
            "b":{"bx":2}
        },
        {
            "c":{"cx":4}
        }
    ]
} 
```

该`data`数组包含许多`a`and`b`和`c`。并且没有其他种类的物体。

如果`count==0`，`data`应该是一个空数组`[]`。

我正在使用[https://github.com/hoxworth/json-schema](https://github.com/hoxworth/json-schema)来验证 Ruby 中的此类 JSON 对象。

```
require 'rubygems'
require 'json-schema'

p JSON::Validator.fully_validate('schema.json',"test.json") 
```

是`schema.json`：

```
{
  "type":"object",
  "$schema": "http://json-schema.org/draft-03/schema",
  "required":true,
  "properties":{
     "count": { "type":"number", "id": "count", "required":true },
     "data": { "type":"array", "id": "data", "required":true,
       "items":[
           { "type":"object", "required":false, "properties":{ "a": { "type":"object", "id": "a", "required":true, "properties":{ "ax": { "type":"number", "id": "ax", "required":true } } } } },
           { "type":"object",  "required":false, "properties":{ "b": { "type":"object", "id": "b", "required":true, "properties":{ "bx": { "type":"number", "id": "bx", "required":true } } } } },
           { "type":"object",  "required":false, "properties":{ "c": { "type":"object", "id": "c", "required":true, "properties":{ "cx": { "type":"number", "id": "cx", "required":true } } } } }
       ]
     }
  }
} 
```

但这 for`test.json`将通过验证，而我认为它应该失败：

```
{
  "count":3,
  "data":[
      {
          "a":{"ax":1}
      },
      {
          "b":{"bx":2}
      },
      {
          "c":{"cx":2}
      },
      {
          "c": {"z":"aa"}
      }
   ]
} 
```

这`test.json`将失败，而我认为它应该通过：

```
{
  "count":3,
  "data":[
      {
          "a":{"ax":1}
      },
      {
          "b":{"bx":2}
      }
   ]
} 
```

似乎错误的模式正在验证`data`数组包含`a,b,c`一次。

正确的架构应该是什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-30T08:03:58.117

来自[JSON 模式规范](https://datatracker.ietf.org/doc/html/draft-zyp-json-schema-03#section-5.5)，第 5.5 节。项目：

> 当这个属性值是一个模式数组并且实例
> 值是一个数组时，实例数组中的每个位置必须符合
> 这个数组对应位置的模式。这
> 称为元组类型。

您的架构定义要求数组的前三个元素恰好是“a”、“b”和“c”元素。如果`items`留空，则允许任何数组元素。同样，如果`additionalItems`留空，则允许任何其他数组元素。

为了得到你想要的，你需要为 指定`"additionalItems": false`和`items`，我认为以下（从你的定义中有所缩短）应该可以工作：

```
"items": {
  "type": [
     {"type":"object", "properties": {"a": {"type": "object", "properties": {"ax": { "type":"number"}}}}},
     {"type":"object", "properties": {"b": {"type": "object", "properties": {"bx": { "type":"number"}}}}},
     {"type":"object", "properties": {"c": {"type": "object", "properties": {"cx": { "type":"number"}}}}}
  ]
} 
```

# mysql - 无法从终端连接到本地 Mysql

> ID：10809460
> 
> 赞同：0
> 
> 时间：2012-05-30T03:01:27.243
> 
> 标签：mysql, ruby-on-rails

注意：此问题答案的完整讨论位于下方评论部分的聊天链接中，位于提交的答案上方。

总结的答案在选中的答案中。

在为 mysql2 安装 gem 并成功完成之后，我输入

```
which mysql 
```

它返回

```
mysql: aliased to nocorrect mysql 
```

我不确定这意味着什么。

然后我输入

```
 mysql --version 
```

它输出

```
 mysql  Ver 14.14 Distrib 5.5.20, for osx10.7 (i386) using readline 5.1 
```

所以我知道mysql已安装。

最后，我想为我的 rails 应用程序配置一个数据库，因此，从我输入的正确目录中：

```
 mysql -u root -p 
```

它要求我输入密码，由于没有密码，我将其留空。它输出这个：

```
 ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) 
```

我一直在阅读解决方案，但我不明白其中任何一个。就像在 rails 框架文件中找到一个名为 my.cnf 的文件或一个名为 etc 的文件夹......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T03:07:37.527

它试图通过 unix 套接字而不是 tcp/ip 进行连接。尝试添加 -h 参数，例如

```
mysql -h localhost -u root -p 
```

**编辑：**请仔细阅读您的问题。安装“mysql”仅仅意味着你有一个客户端，而不是服务器本身。检查你是否安装了**mysqld**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T03:08:34.580

```
mysql --socket=/var/lib/mysql/mysql.sock -u root -p 
```

[也读这个](http://www.tech-recipes.com/rx/762/solve-cant-connect-to-local-mysql-server-through-socket-tmpmysqlsock/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T13:59:38.187

在处理此错误后，这最终允许我通过终端在我的 rails 应用程序中创建一个怪异的数据库。

我从这里下载了 mysql 的 .dmg 64 位版本：

[http://dev.mysql.com/downloads/mysql/](http://dev.mysql.com/downloads/mysql/)

然后我按照自述文件中的说明进行操作。那是最重要的部分。

感谢大家的帮助。

编辑：

自从mysql停止工作以来，这并没有完全回答我的问题。

安装 .dmg 版本后，我必须更新 bash_profile 文件。

这是说明的位置：

[我应该重新安装Mysql吗？](https://stackoverflow.com/questions/10844762/should-i-reinstall-mysql)

# bash - 使用 sed 将文件内容转换为方案列表

> ID：10809463
> 
> 赞同：2
> 
> 时间：2012-05-30T03:01:51.073
> 
> 标签：bash, parsing, sed, scheme

我想使用 sed 将 data.txt 转换为方案列表，格式如下：

- 具有相同起始编号的每一行都将被解析和组合，如下所示：

数据.txt

```
1,{},344.233
1,{2},344.197
2,{16},290.281
2,{18},289.093
3,{1},220.896 
```

foo.scm

```
(define v1 '(1 (() 344.233) ((2) 344.197))) ;; this is for first two lines starting with 1
(define v2 '(2 ((16) 290.281) ((18) 289.093))) ;; ... 2
(define v3 '(3 (() 237.558))) ;; ... 3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T03:32:21.813

我对方案一无所知，所以我可能会在 awk 而不是 sed 中执行此操作。

```
[ghoti@pc ~]$ cat data.txt 
1,{},344.233
1,{2},344.197
2,{16},290.281
2,{18},289.093
3,{1},220.896
[ghoti@pc ~]$ cat doit.awk 
#!/usr/bin/awk -f

BEGIN {
  FS=",";
  last1=1;
}

$1 != last1 {
  printf("(define v%.0f '(%.0f %s))\n", last1, last1, substr(sect,2));
  last1=$1; sect="";
}

{
  gsub(/[^0-9]/,"",$2);
  sect=sprintf("%s ((%s) %s)", sect, $2, $3);
}

END {
  printf("(define v%.0f '(%.0f %s))\n", last1, last1, substr(sect,2));
}

[ghoti@pc ~]$ ./doit.awk data.txt 
(define v1 '(1 (() 344.233) ((2) 344.197)))
(define v2 '(2 ((16) 290.281) ((18) 289.093)))
(define v3 '(3 ((1) 220.896)))
[ghoti@pc ~]$ 
```

它当然可以写得更紧密，但这可以完成工作。

**更新：（**根据评论）

```
[ghoti@pc ~]$ tail -1 data.txt 
3,{1,3,4},220.896
[ghoti@pc ~]$ diff -u doit.awk doitnew.awk 
--- doit.awk    2012-05-30 00:38:34.549680376 -0400
+++ doitnew.awk 2012-05-30 00:38:52.893810815 -0400
@@ -10,8 +10,15 @@
   last1=$1; sect="";
 }

+$2 !~ /}$/ {
+  while ($2 !~ /}$/) {
+    pos=match($0, /,[0-9,]+}/);
+    $0=substr($0, 0, pos-1) " " substr($0, pos+1);
+  }
+}
+
 {
-  gsub(/[^0-9]/,"",$2);
+  gsub(/[^0-9 ]/,"",$2);
   sect=sprintf("%s ((%s) %s)", sect, $2, $3);
 }

[ghoti@pc ~]$ ./doitnew.awk data.txt 
(define v1 '(1 (() 344.233) ((2) 344.197)))
(define v2 '(2 ((16) 290.281) ((18) 289.093)))
(define v3 '(3 ((1 3 4) 220.896)))
[ghoti@pc ~]$ 
```

这里发生了什么？

在我们添加的新块中，测试第二个字段是否以`}`. 如果没有，我们将循环直到它出现。对于循环的每次运行，我们将删除 之前的逗号`}`，用空格替换它。

有时，蛮力有效。:-P

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T05:22:03.660

在球拍（又名计划）中：

```
#lang racket

;; parse a line (we will join them later)
(define (line-parse l)
  (match (regexp-match #px"([0-9]+),\\{([0-9,]*)\\},([0-9.]+)" l)
    [(list dc first-num bracket-nums rest)
     (list (string->number first-num)
           (match bracket-nums
             ["" empty]
             [else (map string->number
                        (regexp-split #px"," bracket-nums))])
           (string->number rest))]
    [else
     (error "unexpected line format in line: ~s\n" l)]))

;; join together lines that start with the same number
(define (join-lines lines)
  (cond [(empty? lines) empty]
        [else (join-lines-of-n (first (first lines)) 
                               lines
                               empty)]))

;; gather together lines starting with 'n':
(define (join-lines-of-n n lines accum)
  (cond [(empty? lines)
         (list (cons n (reverse accum)))]
        [(equal? (first (first lines)) n)
         (join-lines-of-n n (rest lines) (cons (rest (first lines))
                                               accum))]
        [else
         (cons (cons n (reverse accum))
               (join-lines lines))]))

(define (dress-up line)
  (format "~a\n" `(define ,(format "v~s" (first line))
                  ',line)))

(display 
 (apply 
  string-append
  (map dress-up 
       (join-lines
        (map line-parse
             (sequence->list (in-port read-line))))))) 
```

将它保存为 rewrite.rkt，像这样运行它：

```
oiseau:/tmp clements> racket ./rewrite.rkt < foo.txt
(define v1 (quote (1 (() 344.233) ((2) 344.197))))
(define v2 (quote (2 ((16) 290.281) ((18) 289.093))))
(define v3 (quote (3 ((1) 220.896) ((4 5) 2387.278)))) 
```

...请注意，我在输入示例中添加了 {4,5} 行来测试您的扩展。

另外，请注意输出使用 (quote ...) 而不是 '(...)。这“应该可以正常工作”；也就是说，Scheme 阅读器为这两种形式生成相同的输出，并且生成的文件应该可以作为方案输入正常工作。

如果这是我的代码，我想我不会跳 (define v1 ...) 跳舞，而只是把它写成一大段数据，一个方案/球拍程序可以通过一次“读取”来吞食，但这是你的选择，不是我的。此外，您的规范中存在一些歧义：初始索引的唯一性；也就是说，您可能会“返回”到较早的行号。例如，当给定这个输入文件时，输出应该是什么：

```
3,{1},1.0
4,{1},1.0
3,{1},1.0 
```

?

另外，请注意，我删除了所有测试用例以使其看起来更短/更漂亮:)。

编辑：哦！相反，以这种方式收集线条。它实际上会慢一点，但它读起来更好：

```
#lang racket

;; parse a line (we will join them later)
(define (line-parse l)
  (match (regexp-match #px"([0-9]+),\\{([0-9,]*)\\},([0-9.]+)" l)
    [(list dc first-num bracket-nums rest)
     (list (string->number first-num)
           (match bracket-nums
             ["" empty]
             [else (map string->number
                        (regexp-split #px"," bracket-nums))])
           (string->number rest))]
    [else
     (error "unexpected line format in line: ~s\n" l)]))

;; does the line start with the number k?
(define ((starts-with k) l) (equal? (first l) k))

;; join together lines starting with the same thing:
(define (join-lines lines)
  (for/list ([k (remove-duplicates (map first lines))])
    (cons k (map rest (filter (starts-with k) lines)))))

(define (dress-up line)
  (format "~a\n" `(define ,(format "v~s" (first line))
                  ',line)))

(display 
 (apply 
  string-append
  (map dress-up 
       (join-lines
        (map line-parse
             (sequence->list (in-port read-line))))))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T10:45:46.893

这可能对您有用（GNU sed）：

```
 sed ':a;$!N;s/^\(\([^,])*\).*\)\n\2/\1/;ta;h;x;s/\n.*//;s/,{\([^}]*\)},\([^,]\+\)/ ((\1) \2)/g;s/,/ /g;s/^\([^ ]*\).*/(define v\1 '\''(&)) ;;...\1/p;x;D' file 
```

解释：

*   将类似的值减少到一行`:a;$!N;s/^\(\([^,])*\).*\)\n\2/\1/;ta`
*   复制模式空间 (PS) 以保留空间 (HS)。`h`
*   交换到 HS`x`
*   砍掉上一行。`s/\n.*//`
*   制定清单。`s/,{\([^}]*\)},\([^,]\+\)/ ((\1) \2)/g`
*   用空格替换任何剩余`,`的 '。`s/,/ /g`
*   用函数定义和注释包围列表并打印。`s/^\([^ ]*\).*/(define v\1 '\''(&)) ;;...\1/p`
*   换回PS。`x`
*   删除上一行并重复。`D`

# iisnode - 从 iisnode 访问 web.config 设置？

> ID：10809465
> 
> 赞同：10
> 
> 时间：2012-05-30T03:01:51.417
> 
> 标签：iisnode

如果我将设置添加到我的应用程序的 web.config 文件，是否有 API 可以从我的应用程序中读取设置，或者我是否必须使用 XML 库读取文件？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-30T04:51:52.750

没有特殊的 API 允许您将 web.config 读取到运行在 iisnode 中的 node.js 应用程序中。话说回来：

*   web.config 中 appSettings 部分的所有键/值对都将提升为 node.exe 进程的环境变量，因此您可以使用 process.env 访问它们，
*   从 iisnode v0.1.19 开始，除了 web.config 之外，还可以在 iisnode.yml 文件中指定配置设置；有关详细信息，请参阅[http://tomasz.janczuk.org/2012/05/yaml-configuration-support-in-iisnode.html](http://tomasz.janczuk.org/2012/05/yaml-configuration-support-in-iisnode.html)。

此示例显示了 web.config 中 appSettings 部分中提升的键/值对如何用作环境变量。在您的 web.config 文件中：

```
<configuration>
  <appSettings>
    <add key="abc" value="test" />
  </appSettings>
</configuration> 
```

在您的节点应用程序中：`console.log(process.env.abc); //--> test`

# tsql - 使用 sp_send_dbmail 中的变量执行查询时出错

> ID：10809466
> 
> 赞同：0
> 
> 时间：2012-05-30T03:01:59.583
> 
> 标签：tsql

我正在尝试将电子邮件单独发送到收件人列表。我收到错误：

```
Msg 22050, Level 16, State 1, Line 0
Error formatting query, probably invalid parameters
Msg 14661, Level 16, State 1, Procedure sp_send_dbmail, Line 478
Query execution failed: Msg 4104, Level 16, State 1, Server xxxxxx, Line 1
The multi-part identifier "email@example.com" could not be bound. 
```

这是我的代码的简化版本，假设 table1 是一个有效的现有表，并且 name 和 email 是现有列。

```
declare @current_mailaddress varchar(50), @query varchar(1000)
set @current_mailaddress = 'email@example.com'

set @query = 'select distinct name, email from table1 
              where email = ' + @current_email

exec msdb.dbo.sp_send_dbmail 
 @recipients = @current_email,
 @subject = 'test',
 @query = @query 
```

所以根据错误，格式（大概是@query）是错误的。我想不通。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:03:03.873

您需要将 的值`@current_email`放在引号中：

```
'SELECT ... WHERE email = ''' + @current_email + '''' 
```

要了解原因，请考虑在没有它的情况下您的查询当前的样子：

```
SELECT ... WHERE email = email@example.com 
```

每当您使用动态 SQL 时，如果遇到奇怪的错误，最好打印变量以进行调试；通常情况下，您构建的 SQL 字符串不是您所期望的。我建议了一种在另一个不相关的[答案](https://stackoverflow.com/questions/10739306/setting-variables-in-sql-functions-probs/10739598#10739598)中管理调试代码的简单方法。

# iphone - 使用 sortedArrayUsingDescriptors 后从 NSMutableArray 获取值

> ID：10809467
> 
> 赞同：1
> 
> 时间：2012-05-30T03:02:05.193
> 
> 标签：iphone, ios4, ios5, objective-c-2.0

我制作了一个包含纬度、经度和距离的 NSDictionary HospitalDictionary

```
NSMutableArray *HospitalArray = [NSMutableArray array];
NSDictionary *HospitalDictionary = [[NSDictionary alloc]init];

NSString *LATITUDE = @"latitude";
NSString *LONGITUDE = @"longitude";
NSString *DISTANCE = @"distance";

for (int i=0; i<=100; i++) { 
// calculations for coordinates and distance are done ....
HospitalDictionary = [NSDictionary dictionaryWithObjectsAndKeys:latitude, LATITUDE,
        longitude, LONGITUDE,[NSNumber numberWithInt:distanceInKm], DISTANCE, nil];

[HospitalArray addObject:HospitalDictionary];
{ 
```

然后使用以下代码数据很短

```
// These line are added to short the Dictionary added to Array List with the Key of Distance 
    NSSortDescriptor *distanceDescriptor = [[NSSortDescriptor alloc] initWithKey:DISTANCE ascending:YES];
    id obj;
    NSEnumerator * enumerator = [HospitalArray objectEnumerator];
    NSArray *descriptors = [NSArray arrayWithObjects:distanceDescriptor, nil];
    NSArray *sortedArray = [HospitalArray sortedArrayUsingDescriptors:descriptors];

    enumerator = [sortedArray objectEnumerator];
    // this will print out the shorted list for DISTANCE
    while ((obj = [enumerator nextObject])) NSLog(@"%@", obj);

    // this will return the object at index 1 
    NSLog(@"Selected array is %@",[sortedArray objectAtIndex:1]); 
```

这个的输出是 -

```
2012-05-30 08:24:42.784 Hospitals[422:15803] 
sorted array is 
{
    distance = 1;
    latitude = "27.736221";
    longitude = "85.330095";
} 
```

我只想获取 sortedArray 的 ObjectAtIndex:1 的纬度或经度。我怎样才能获得特定的价值，即。sortedArray 中的纬度不是完整列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T03:27:10.373

要访问数组中对象的属性/方法，可以使用如下内容：

```
NSLog(@"Latitude for object at index 1 is %@",[[sortedArray objectAtIndex:1] latitude]); 
```

# oracle - db-oracle 不刷新数据

> ID：10809476
> 
> 赞同：5
> 
> 时间：2012-05-30T03:02:50.630
> 
> 标签：oracle, node.js, connection-pooling

我正在使用 Node.js 开发一个简单的服务。它接收上传的文件，将它们存储在磁盘上，并在 Oracle 表上记录一些元数据。在这篇文章之后，我将`db-oracle`包与连接池一起使用：[http ://nodejsdb.org/2011/05/connection-pooling-node-db-with-generic-pool/](http://nodejsdb.org/2011/05/connection-pooling-node-db-with-generic-pool/)

但是，我注意到我插入的数据只有在连接池关闭空闲连接后才通过调用其`disconnect()`方法发送到 Oracle 数据库。

有没有办法在向我的客户发送“OK”信号之前刷新数据？它现在的工作方式，我的 web 服务或 Oracle 本身的崩溃可能会导致数据丢失，而我的服务的客户端不会知道它。实际上，我通过在一些上传后终止我的应用程序进程来测试这一点，并且数据确实丢失了。

这是代码的简化版本：

```
var express = require('express');
var app = module.exports = express.createServer();

app.post('/upload', handleUpload);

app.listen(4001, function(){
  console.log("Express server listening on port %d in %s mode", app.address().port, app.settings.env);
});

function handleUpload(req, res) {
  res.contentType('application/xml');

  var buf = '';
  req.on('data', function(chunk) { buf += chunk; });
  req.on('end', function() {
    saveUpload(req, res, buf);
  });
}

function saveUpload(req, res, buf) {
  if (buf.length == 0)
    return sendError(res, 'No data supplied', 422);

  var payload = new Buffer(buf, 'base64');

  files.save(payload, function(err, savedFile) {
    if (err)
      return sendError(res, 'Error while saving', 500);

    var obj = { ip: req.connection.remoteAddress, location: savedFile.path,
                created_at: new Date(), updated_at: new Date() };

    var fields = ['IP', 'LOCATION', 'CREATED_AT', 'UPDATED_AT'];
    var values = fields.map(function(v) { return obj[v.toLowerCase()] });

    pool.acquire(function(err, conn) {
      if (err)
        return sendError(res, err, 500);

      var q = conn.query().insert('FILES', fields, values);

      q.execute(function(err, result) {
        pool.release(conn);

        if (err)
          return sendError(res, err, 500);

        if (result.affected < 1)
          return sendError(res, 'Error saving the record', 500);

        // The next statement sends the final result to the client.
        // However, the new record was not yet flushed to the database.
        res.end('<ok />');
      });
    });
  });
}

function sendError(res, err, code) {
  console.log(err);
  res.send('<error>' + err + '</error>', code || 500);
} 
```

作为一种解决方法，我尝试实现一个假连接池并释放所有获取的连接，但现在我的应用程序因以下消息而死：`pure virtual method calledAbort trap: 6`

这是假的连接池：

```
var fakePool = {
  acquire: function(callback) {
    new oracle.Database(config.database).connect(function(err, server) {
      callback(err, this);
    });
  },
  release: function(conn) {
    conn.disconnect();
  }
}; 
```

需要明确的是，我不在乎假连接池，这只是一个肮脏的解决方法。我希望能够在将“OK”发送给我的客户*之前将数据刷新到 Oracle。*

顺便说一句，我还在他们的 Github 上开了一张票：[https ://github.com/mariano/node-db-oracle/issues/38](https://github.com/mariano/node-db-oracle/issues/38)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T14:41:35.683

您显然错过了事务提交。

node-db 不需要公开提交 API，因为在大多数 RDBMS（包括 Oracle）中，COMMIT 是一个有效的查询。由于该包允许执行任意查询，因此应该使用简单的 execute() 来完成提交/回滚

代码应更改如下：

```
pool.acquire(function(err, conn) {
  if (err)
    return sendError(res, err, 500);

  var q = conn.query().insert('FILES', fields, values);
  q.execute(function(err, result) {

    if (err || result.affected < 1 ) {
       pool.release(conn);
       return sendError(res, err, 500);
    }

    conn.query().execute("commit", function(err,result) {
      if (err) {
        pool.release(conn);
        return sendError(res, err, 500);
      }
      res.end('<ok />');
      pool.release(conn);
    });
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:28:54.740

这不是您问题的确切答案，但请查看[`node-oracle`](https://github.com/nearinfinity/node-oracle)package。它缺少连接池，但它的`commit`/`rollback`功能至少可以从代码中控制。而且您始终可以将其与[通用池解决方案（例如`node-pool`](https://github.com/coopernurse/node-pool).

# android - 使用 AchartEngine 的条形图

> ID：10809477
> 
> 赞同：3
> 
> 时间：2012-05-30T03:02:59.650
> 
> 标签：android, bar-chart, achartengine

我使用 aChartEngine 库创建了条形图。谁能帮助我如何增加条形的宽度并将条形定位在 X 轴的中心？

这是我的 BarGraph 类：

```
public class BarGraph {
public Intent getIntent(Context context){
     XYMultipleSeriesRenderer mrenderer = new XYMultipleSeriesRenderer();
     double[] range = {0,5,0,5};

        int[] y = {24,30,12};
        CategorySeries series1 = new CategorySeries("Today");
        CategorySeries series2 = new CategorySeries("Next day");
        CategorySeries series3 = new CategorySeries("2 days later");

        XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();

     for (int i=0;i<3;i++){
         switch(i){
         case 0:
                series1.add(y[0]);
                dataset.addSeries(series1.toXYSeries());
                break;
         case 1:
                series2.add(y[1]);
                dataset.addSeries(series2.toXYSeries());
                break;
         case 2:
                series3.add(y[2]);
                dataset.addSeries(series3.toXYSeries());
                break;
         }
     }

    XYSeriesRenderer renderer1 = new XYSeriesRenderer();
    renderer1.setColor(Color.GREEN);
    XYSeriesRenderer renderer2 = new XYSeriesRenderer();
    renderer2.setColor(Color.BLUE);
    XYSeriesRenderer renderer3 = new XYSeriesRenderer();
    renderer3.setColor(Color.RED);
        mrenderer.setAxisTitleTextSize(16);
        mrenderer.setChartTitleTextSize(20);
        mrenderer.setLabelsTextSize(15);
        mrenderer.setLegendTextSize(15);
        mrenderer.setBarSpacing(0);
        mrenderer.setXLabels(1);
        mrenderer.addXTextLabel(2.5, "Outstanding jobs");
        mrenderer.setMargins(new int[] {20, 30, 15, 0});
        mrenderer.setAxesColor(Color.WHITE);
        mrenderer.setChartTitle("Work per day");
        mrenderer.setXTitle("Days");
        mrenderer.setInitialRange(range, 1);
        mrenderer.setBarSpacing(1);
        mrenderer.setXAxisMin(0);
        mrenderer.setXAxisMax(5);
        mrenderer.setYAxisMin(0);
        mrenderer.setPanEnabled(false, false);
        mrenderer.setZoomEnabled(false, false);
        mrenderer.addSeriesRenderer(renderer1);
        mrenderer.addSeriesRenderer(renderer2);
        mrenderer.addSeriesRenderer(renderer3);
    Intent intent = ChartFactory.getBarChartIntent(context, dataset, mrenderer, Type.DEFAULT);
    return intent;  
}} 
```

这是我得到的条形图的屏幕截图， ![条状图](../Images/a949ad552ce54fc3c33d0b7059bcd2fc.png)

我需要这样的条形图

![条状图](../Images/9c958b2f13c8790536bebffcede6b3b4.png)

我怎样才能做到这一点？请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T09:19:55.277

如果你想设置条的宽度——

尝试这个...

```
 renderer.setBarSpacing(-0.7); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T08:48:33.397

我发现解决您的问题的唯一方法是一种非常丑陋的方法，但在他们改进 achartengine 中的颜色管理之前，它可能会尽可能好。

首先按照 larlins 的建议删除 for-case。

然后将空点添加到与其他系列中的填充点对应的其他系列中：

```
 series1.add(1,y[0]);
    series1.add(2,0);
    series1.add(3,0);
    dataset.addSeries(series1);
    series2.add(1,0);
    series2.add(2,y[1]);
    series2.add(3,0);
    dataset.addSeries(series2);
    series3.add(1,0);
    series3.add(2,0);
    series3.add(3,y[2]);
    dataset.addSeries(series3); 
```

还将 设置`BarSpacing`为 0 并将 设置`Type`为`Type.STACKED`而不是`Type.DEFAULT`。我认为如果您删除并将其`Label`更改`XTitle`为“杰出工作”会更好看

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T11:12:12.217

删除我认为不必要的 for 循环和 switch case。并添加两个空白类别系列，例如

```
 CategorySeries series(nameit) = new CategorySeries("");
 CategorySeries series(nameit) = new CategorySeries(""); 
```

一个放在 CategoriesSeries series1 之后，另一个放在 CategoriesSeries series2 之后。然后在 series1 和 series2 之后的两个位置添加零值，例如

```
 series(name it).add(0);
    dataset.addSeries(series(name it).toXYSeries()); 
```

渲染器也是如此：将两个 XYSeriesRenderer 设置为透明颜色，并将它们粘贴在 renderer1 之后，另一个在 renderer2 之后粘贴，如下所示

```
XYSeriesRenderer renderer(nameit) = new XYSeriesRenderer();
    renderer1.setColor(Color.TRANSPARENT);
XYSeriesRenderer renderer(nameit) = new XYSeriesRenderer();
    renderer1.setColor(Color.TRANSPARENT); 
```

看看你得到了你想要的魔法。干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T11:04:23.300

我得到了答案.... :) 我使用了 setBarspacing，但将值设置为 0 或 0.5... 可以移动图表，以便轻松查看值... :)

```
XYMultipleSeriesRenderer multiRenderer = new XYMultipleSeriesRenderer();         
        multiRenderer.setXLabels(0);  
        multiRenderer.setLabelsTextSize(15);
        multiRenderer.setBarSpacing(0.5);
        multiRenderer.setChartTitle("Commercial Complex APK"); 
        multiRenderer.setXTitle("Projects"); 
        multiRenderer.setYTitle("Variance");         
        multiRenderer.setZoomButtonsVisible(true); 
```

# internet-explorer-8 - 使用 jQuery 在 IE 8 中淡化动态 PNG

> ID：10809479
> 
> 赞同：0
> 
> 时间：2012-05-30T03:03:00.443
> 
> 标签：internet-explorer-8, png, iepngfix

我发现了一些关于修复 IE8 的 PNG 问题的黑客的帖子，但我似乎无法将它们中的任何一个调整到我的场景中。

我有四个使用 $.load() 动态生成的 PNG。它们淡入淡出，然后生成另外四个 PNG 并执行相同的操作。

在 IE8 中，图像的半透明部分具有黑色背景。

有没有一种方法可以在加载单个 PNG 时对它们运行 alpha 过滤器，而不是在 DOM 准备好时预先运行？

还有其他建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T03:05:07.180

您需要使用`AlphaImageLoader`过滤器（不是`<img src="..." />`）来显示图像。
即使在 IE 8 中，这对于让过滤器一起发挥作用也是必要的。

# ruby - 红宝石：雷神和 Httparty

> ID：10809482
> 
> 赞同：1
> 
> 时间：2012-05-30T03:03:40.230
> 
> 标签：ruby, httparty, thor

我试图在我的类*FindXYZ*中使用 HTTParty 来扩展 Thor，但它不起作用。我想做的就是在我的方法***xyz*****中使用 HTTParty get**来查询 couchdb

 *当我尝试运行时，我看到错误找不到**get**

```
require 'json'
require 'httparty'
require 'thor'

class FindXyz < Thor
  include Thor::Actions

  include HTTParty
    headers 'Accept' => 'application/json'
    server = '192.168.5.50:5984'
    user = 'uname'
    password = 'passo'

    couchdb_url = "http://#{user}:#{password}@#{server}"
    basic_auth user, password
    base_uri couchdb_url
    default_params :output => 'json'
    format :json

    desc "xyz", "Find scenarios that contains SSL"
    method_option :name, :aliases => "-t", :required => true
    method_option :location, :aliases => "-s",:required => true

    def xyz
      name = options[:name]
      loc = options[:location]
      file_path = File.join(loc, name)

      t_json = JSON.parse(File.read(file_path))

     t_json["ids"].each do |temp|
       path_to_doc = "/test123/#{temp}"
       response = get(path_to_doc)
       puts "Found => #{temp}" if response.to_s.include?('Birdy')
    end #close the loop
  end #close the method xyz
end #close class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T03:22:15.243

从课外尝试这种方式

```
puts FindXyz.get('....').inspect 
```

`HTTParty.get(...)`在 FinXyz 类里面*

# java - 关于 Widget 工具包的查询

> ID：10809483
> 
> 赞同：2
> 
> 时间：2012-05-30T03:03:48.457
> 
> 标签：java, user-interface, wxwidgets, desktop-application, widget

我需要为 Windows 创建一个桌面应用程序作为主要操作系统和 Linux 次要操作系统。我更喜欢的编程语言是 Java，因为大部分后端工作都是在 Java 中完成的。我检查了 Qt、Gtk+、wxWidgets，但无法得出哪个更好的结论。您能否建议截至今天哪个小部件工具包支持 Java？如果它不是开源的，它也很好。

另一个重要方面是我想知道该工具包是否会使用操作系统原生的 UI 创建或者它是否有自己的主题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T03:20:33.107

嗯，Java 中最著名的两个是 SWT 和 Swing。SWT 看起来更原生，因为它使用操作系统的小部件。Swing 会有自己的外观，但您可以让它模仿操作系统的外观。它们都可用于 Windows、Mac 和 Linux。

还有几个选项。您可以研究的一件事是 Jambi，它是 Qt 的 Java 绑定。它在它支持的所有平台上看起来都非常原生，并且再次支持 Windows、Mac 和 Linux。

您还可以使用 JNI 或 JNA 之类的工具获取其他工具包来使用 Java。查看[这个问题](https://stackoverflow.com/questions/3720563/access-c-shared-library-from-java-jni-jna-cni-or-swig)，了解最适合您的情况的问题。我敢打赌你可以很容易地让 GTK+ 与 JNA 一起工作，因为它纯粹是一个 C 接口，但我没有亲自尝试过。

# iphone - 显示 DetailViewController 时在哪里为 KVO 添加和删除观察者

> ID：10809498
> 
> 赞同：1
> 
> 时间：2012-05-30T03:06:32.550
> 
> 标签：iphone, key-value-observing

我有一个带有标注的 MKMapView。按下标注（详细信息披露指示器）按钮时，它会显示一个 detailViewController。我想为我的注释添加更改地图类型和图钉颜色的功能。所以我目前这样做：

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control {

    DetailMapViewController *destination = [[DetailMapViewController alloc] initWithNibName:@"DetailMapViewController" bundle:nil];
    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:destination];

    if ([destination  respondsToSelector:@selector(setDelegate:)]) {
        [destination setValue:self forKey:@"delegate"];
    }
    if ([destination respondsToSelector:@selector(setPlacemark:)]) {
        [destination setValue:_currentPlacemark forKey:@"Placemark"];
    }
    if ([destination respondsToSelector:@selector(setMapTypeAsNum:)]) {
        [destination setValue:[NSNumber numberWithInteger:self.mapView.mapType] forKey:@"mapTypeAsNum"];

        [destination addObserver:self forKeyPath:@"mapTypeAsNum" options:NSKeyValueObservingOptionNew context:NULL];
    }
    if ([destination respondsToSelector:@selector(setColorAsNum:)]) {
        [destination setValue:[NSNumber numberWithInteger:MKPinAnnotationColorPurple] forKey:@"colorAsNum"];

        [destination addObserver:self forKeyPath:@"colorAsNum" options:NSKeyValueObservingOptionNew context:NULL];
    }
    [self presentModalViewController:navController animated:YES];
} 
```

在我的 observeValueForKeyPath 方法中：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    DetailMapViewController *destination = (DetailMapViewController *)object;
    [destination removeObserver:self forKeyPath:@"mapTypeAsNum"];
    [destination removeObserver:self forKeyPath:@"colorAsNum"];

    if ([keyPath isEqualToString:@"mapTypeAsNum"]) {
        if ([object isKindOfClass:[DetailMapViewController class]]) {
            id mapType = [change objectForKey:NSKeyValueChangeNewKey];
            self.mapView.mapType = [mapType integerValue];
        }
    }
    else if ([keyPath isEqualToString:@"colorAsNum"]) {
        if ([object isKindOfClass:[DetailMapViewController class]]) {
            id pinColor = [change objectForKey:NSKeyValueChangeNewKey];
            MKPinAnnotationView *annotationView = (MKPinAnnotationView *)[self.mapView viewWithTag:10];
            annotationView.pinColor = [pinColor integerValue];
        }
    }
} 
```

这样做的问题是，如果我不更改 DetailViewController 中的引脚颜色或地图类型来调用 observeValueForKeyPath 方法，我最终会根据控制台泄漏观察信息。所以我想知道在这样的场景中我在哪里添加观察者和删除观察者。在过去使用 NSNotificationCenter 时，我会在 dealloc 中删除观察者，并在呈现与上述代码类似的 detailViewController 之前添加观察者。但是对于 KVO，我不确定它是如何工作的。有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T03:22:30.190

您应该在模态视图关闭之前停止观察。

完成此操作的最佳方法是让模态视图在准备好关闭时通知您的 MKMapView 控制器，并让 MKMapView 停止观察，然后关闭模态视图。

# php - 高难度算法：徽章平衡、数学分布

> ID：10809502
> 
> 赞同：1
> 
> 时间：2012-05-30T03:07:01.290
> 
> 标签：php, algorithm, math, logic

我有一个非常有趣的问题让我头疼。我正在开发一个由用户和奖励（称为徽章）组成的小型系统。根据以下标准授予用户一个特殊徽章：10 个青铜徽章、5 个银徽章和 1 个金徽章。这很简单，但是，如果用户有 8 个青铜徽章、7 个银徽章和 1 个金徽章，他可以将他的 2 个额外的银徽章用作铜徽章。

每当用户有可用的“更高”徽章来分发时，都会发生这种情况。再比如，如果他有 8 个铜徽章、4 个银徽章和 4 个金徽章，他可以将他的金徽章中的 2 个“转化”为铜，1 个转化为银，以获得特殊徽章。

我完全不知道该怎么做。我尝试过各种循环，ifs，但我永远无法正确分配。也许有人可以帮助我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T03:09:13.267

用户需要至少 1 个金徽章，至少 6 个银或金徽章，以及至少 16 个青铜、银或金徽章。

伪代码是

```
count(gold) >= 1
&& count(gold) + count(silver) >= 6
&& count(gold) + count(silver) + count(bronze) >= 16 
```

如果你还有可以换成金、银或铜牌的钻石奖牌，那么也包括它，比如

```
count(diamond) + count(gold) >= 1
&& count(diamond) + count(gold) + count(silver) >= 6
// etc 
```

或者你可以使用“奖牌等级”，这样你就可以做一些更简单的事情，比如

```
count(rank of gold or higher) >= 1
&& count(rank of silver or higher) >= 6
&& count(rank of bronze or higher) >= 16 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T03:24:17.710

```
$bank['g'] -= $price['g'];
$bank['s'] -= $price['s'];
$bank['b'] -= $price['b'];
if ($bank['b'] < 0) {
    $bank['s'] += $bank['b'];
    $bank['b'] = 0;
}
if ($bank['s'] < 0) {
    $bank['g'] += $bank['s'];
    $bank['s'] = 0;
}
if ($bank['g'] < 0) {
    //not enough cash
} else {
    //ok
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T03:36:43.743

一种方法是从“最高”徽章开始，减去所需的数字，然后将其余部分转换为下一个徽章。所以：

1.  拿走一枚金徽章。
2.  将所有剩余的金色徽章转换为银色。
3.  拿走五个银徽章。
4.  将所有剩余的银色徽章转换为青铜。
5.  拿走10个青铜徽章。

如果任何“带走”步骤失败，则他们没有资格获得徽章。这很简单，修改它以适应其他徽章数量或汇率是微不足道的。

# iphone - 关于iOS中PDF从一页到另一页的垂直滑动

> ID：10809512
> 
> 赞同：1
> 
> 时间：2012-05-30T03:08:26.203
> 
> 标签：iphone, ios, pdf

我正在开发一个可以在 iOS 中使用`CGPDFDocumentRef`.
现在我可以完美地显示一页PDF，但我不知道如何让它从一页到另一页垂直滑动。

谁能帮我？给我一个想法或样品，谢谢

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T05:42:11.543

这是您可以水平集成和实现 PDF 视图的最佳 PDF 库。

[https://github.com/vfr/Reader](https://github.com/vfr/Reader)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T05:02:37.100

在 WebViewViewController.xib 中添加 UIWebView 并连接它。实现与我发布的相同。

```
@interface WebViewViewController : UIViewController<TapDetectingWindowDelegate>
{

}
@property (strong, nonatomic) IBOutlet UIWebView *mWebView;

@end

@implementation WebViewViewController
@synthesize mWebView;

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSString *path = [[NSBundle mainBundle] pathForResource:@"EventHandlingiPhoneOS" 
                                                     ofType:@"pdf"];
    NSURL *url = [NSURL fileURLWithPath:path];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];

     [mWebView loadRequest:request];

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T04:32:21.947

为什么不`UIWebView`用于显示 PDF 文件？

它非常简单易用！

但是，如果您真的想制作自定义查看器，则可以使用`UIScrollView`它。

像这样：

```
UIScrollView *scroll = [[UIScrollView alloc] initWithFrame:CGRectMake(0,0,320,640)];
[self.view addSubview:scroll];
view1.frame = CGRectMake(0,0,320,640);
view2.frame = CGRectMake(0,320,320,640);
view3.frame = CGRectMake(0,640,320,640);
[scroll addSubview:view1];
[scroll addSubview:view2];
[scroll addSubview:view3];
scroll.contentSize = CGSizeMake(320, 960);
[scroll release]; 
```

# java - 在 JFrame 中使用坐标平面

> ID：10809514
> 
> 赞同：6
> 
> 时间：2012-05-30T03:08:35.267
> 
> 标签：java, swing, jframe, awt, coordinates

//我正在尝试学习如何在java中绘制对象。我在这方面做得越来越好，但是一旦我在屏幕上看到图像，我就很难处理它。我输入的数字对形状的结果没有意义。至少对我来说他们没有。在代数中，如果你在 x 轴上增加一个数字，它会向右移动，如果你在 y 轴上增加一个数字，它会向上移动。那不是这里发生的事情。谁能向我解释这是如何工作的？我还是java新手，所以解释和细节越多越好。我想在暑假里每天抽出几个小时来学习 Java，但有时会有点令人沮丧。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T06:52:04.797

这里`Co-ordinates`从`TOP LEFT SIDE`屏幕的 开始，随着 的值增加`X`，您将向 移动`RIGHT SIDE`，但随着 的值的增加`Y`，您将向 移动`DOWNWARDS`。这是一个小示例程序，您可以更好地理解这一点，只需在任意位置单击即可。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class DrawingExample
{
    private int x;
    private int y;
    private String text;
    private DrawingBase canvas;

    private void displayGUI()
    {
        JFrame frame = new JFrame("Drawing Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        canvas = new DrawingBase();
        canvas.addMouseListener(new MouseAdapter()
        {
            public void mouseClicked(MouseEvent me)
            {
                text = "X : " + me.getX() + " Y : " + me.getY();
                x = me.getX();
                y = me.getY();
                canvas.setValues(text, x, y);
            }
        }); 

        frame.setContentPane(canvas);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new DrawingExample().displayGUI();
            }
        });
    }
}

class DrawingBase extends JPanel
{
    private String clickedAt = "";
    private int x = 0;
    private int y = 0;

    public void setValues(String text, int x, int y)
    {
        clickedAt = text;
        this.x = x;
        this.y = y;
        repaint();
    }

    public Dimension getPreferredSize()
    {
        return (new Dimension(500, 400));
    }

    public void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        g.drawString(clickedAt, x, y);
    }
} 
```

# ruby-on-rails - Rails：注册后登录用户

> ID：10809518
> 
> 赞同：1
> 
> 时间：2012-05-30T03:09:36.030
> 
> 标签：ruby-on-rails, ruby-on-rails-3, authentication, ruby-on-rails-3.1

我想知道注册后立即登录用户的好方法是什么。我不需要电子邮件确认，因此用户没有理由不期望这会自动发生。

```
 def create
    @user = User.new(params[:user])

    respond_to do |format|
      if @user.save
        format.html { redirect_to welcome_url, notice: "Your user: #{@user.name} was successfully created! Please log in!" }
        format.json { render json: @user, status: :created, location: @user }
      else
        format.html { render action: "new" }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
    end
  end 
```

我看到的一个问题是我没有直接连接到 POST session#create 的路由。看起来我应该，但没有具体的路线

```
controller :sessions do
   get    'login'  => :new
   post   'login'  => :create
   delete 'logout' => :destroy
   get 'logout' => :destroy
end 
```

产量：

```
login GET    /login(.:format)                        sessions#new
      POST   /login(.:format)                        sessions#create
logout DELETE /logout(.:format)                       sessions#destroy
       GET    /logout(.:format)                       sessions#destroy 
```

供参考，这是我的会话#create 方法

```
def create
  user = User.find_by_name(params[:name])
  if user and user.authenticate(params[:password])
    session[:user_id] = user.id

    if session[:return_to]
      redirect_to session[:return_to]
      session[:return_to] = nil
      return
    end
    redirect_to eval("#{user.role}_url")

  else
    redirect_to login_url, alert: "Invalid user/password combination"
  end
end 
```

我可以直接从我的 user@create 控制器方法挂钩到我的 session#create 路由，就好像用户除了第一次登录一样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T03:38:20.660

You cannot redirect with post method. See [redirect_to using POST in rails](https://stackoverflow.com/questions/985596/redirect-to-using-post-in-rails). So your options are: 1\. Access the sessions model and create a record there from the users create method, or 2\. (Not recommended) Create a GET access to the sessions#login method. I hope this helps.

# salesforce - 链接到 Apex 方法的 CSRF 安全自定义按钮

> ID：10809520
> 
> 赞同：7
> 
> 时间：2012-05-30T03:09:41.523
> 
> 标签：salesforce, csrf, apex-code, visualforce

我正在寻找一种技术来从添加到 Opportunity 对象的自定义按钮执行 Apex 代码，以保护用户免受 CSRF 侵害​​。

当前使用的方法来自问题 -[自定义按钮或使用自定义控制器链接到 Visualforce 页面](https://stackoverflow.com/questions/8497442/custom-button-or-link-of-a-visualforce-page-with-a-custom-controller)。本质上：

1.  有一个机会自定义按钮，内容源设置为“Visualforce 页面”。
2.  此按钮的内容设置为 Visualforce 页面，该页面使用标准控制器的机会，输入了扩展 apex 类和该类中方法的操作
3.  操作方法将 PageReference 返回到另一个自定义 Visualforce 页面，包括添加带有商机 ID 的参数。
4.  第二个自定义 Visualforce 页面完成大部分实际工作，包括在将用户重定向回商机之前进行 Web 服务标注和执行 DML 操作。

这种方法的问题在于，第二个自定义 Visualforce 页面是通过 HTTP GET 检索的，从查询字符串中提取参数，并在没有 CSRF 保护的情况下执行更新/插入 DML 操作。Force.com 安全源代码扫描程序正在获取此信息。

我应该补充一点，此顶点代码同时部署为托管和非托管包，因此使用 PageReference 重定向到目标 Visualforce 页面的额外工作。这可确保在需要时添加命名空间前缀。

如何避免 CSRF 问题？

我不想在第二个visualforce页面中添加一个表单，他们必须按下一个按钮来启动进程（因此在回发中获取ViewStateCSRF保护）。从用户的角度来看，他们已经按下按钮来执行操作。

我之前在开发人员论坛上问过这个问题，但没有提出解决方案 - [Cross-Site Request Forgery (CSRF/XSRF) safe Custom Button action](http://boards.developerforce.com/t5/Visualforce-Development/Cross-Site-Request-Forgery-CSRF-XSRF-safe-Custom-Button-action/td-p/384149)

也许我应该尝试将代码从第二个视觉力页面的控制器中移出，并改为使用支架控制器的扩展？

我可以切换到 Apex Web 服务的 Javascript 回调（如[Call a apex method from a custom button](https://stackoverflow.com/questions/9714654/call-a-apex-method-from-a-custom-button)和[How invoke APEX method from custom button](https://stackoverflow.com/questions/8367822/how-invoke-apex-method-from-custom-button)中所建议的那样），但它看起来有点乱，我不确定我是否会只是打开了 Web 服务的另一个范围的安全问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T22:55:19.843

我通过 Salesforce 预订了合作伙伴安全办公时间，并直接与他们讨论了这个问题。

如果需要 CSRF 保护（即发布到 App Exchange），目前不支持我正在尝试做的事情。他们提出了两种替代方法：

1.  在触发敏感 Apex 代码的 Visualforce 页面中创建中间表单。因此选择了内置的 CSRF 保护。
2.  覆盖 Opportunity Detail 页面（使用 apex:Details 显示类似信息）。这个新的 Visualforce 页面将包含一个类似的表单回发到选项 1，以调用敏感的 APEX 代码并获得自动 CSRF 保护。

* * *

不使用自定义按钮的另一种方法是嵌入/内联 Visualforce 页面（请参阅[在标准布局上嵌入页面）](http://www.salesforce.com/us/developer/docs/workbook_vf/workbook_vf.pdf)，其中仅包含标准页面布局中所需的按钮。

嵌入的 Visualforce 页面必须使用标准对象控制器（在我的例子中为 Opportunity）才能出现在标准页面布局的可用 Visualforce 页面列表中。Visualforce 页面本身可以非常小，仅在`<apex:form>`. Visualforce 页面的标签也可以显示在页面布局中。

```
<apex:page id="embeddedPage" StandardController="Opportunity" extensions="OpportunityExtensionController" showHeader="false" standardStylesheets="true">
<apex:form >
    <apex:commandButton value="CSRF Safe Button" action="someMethodInTheExtensionClass" />
</apex:form> 
```

```
public with sharing class OpportunityExtensionController {

    private final Opportunity opportunityFromController;

    public OpportunityExtensionController(ApexPages.StandardController controller) {
        opportunityFromController = (Opportunity)controller.getRecord();        
    }

    public PageReference someMethodInTheExtensionClass() {

        // Perform directly here within the postback rather than redirecting to another page to prevent against XSRF

        System.debug('opportunityFromController.Id:' + opportunityFromController.Id);
    }
} 
```

这应该可以防止 CSRF，因为 commandButton 将拾取“com.salesforce.visualforce.ViewStateCSRF”隐藏输入，并在生成的 iframe 内将帖子发回服务器。

* * *

我已经[从具有 CSRF 保护的标准实体详细信息页面中提出了 Idea Invoking Apex 代码，](https://sites.secure.force.com/success/ideaView?id=08730000000hy8yAAA)以查看他们是否可以使用自定义按钮直接添加对此的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:07:32.210

为什么不首先使用 JavaScript 按钮来启动第二个页面？完全绕过第一页。

Salesforce 将在呈现之前将合并应用到脚本（因此您可以使用`{!Opportunity.Id}`在第二个 URL 中包含 opp id）并且您可以简单地将浏览器重定向到您的第二个页面。

# android - 我想使用 SDK v3.x 提供的 API，但要使 APK 可以在装有 Android v2.2/2.3/2.3.1 的设备上运行

> ID：10809522
> 
> 赞同：1
> 
> 时间：2012-05-30T03:09:58.623
> 
> 标签：android, sdk

我需要我的应用程序通过调用 3.0（级别 11）API View.setSystemUiVisibility(View.SYSTEM_UI_FLAG_HIDE_NAVIGATION) 来隐藏三星 9250/Galaxy Nexus 上的虚拟键，但我仍然需要我的 APK 可在装有 Android v2.2/2.3/2.31 的设备上运行。

也许我会用

```
int SDK_INT = android.os.Build.VERSION.SDK_INT;
if(SDK_INT >= 11) {
        getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_HIDE_NAVIGATION);
}else{
        //do nothing
} 
```

但是我应该在清单文件中做什么以及我应该使用哪个库来构建项目？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:21:32.250

谢谢您的帮助。

反射或包装类似乎太复杂了。

我只是使用 4.0 lib 来构建，设置

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="15"/> 
```

并使用

```
if(Build.VERSION.SDK_INT >= HIDENAVIGATION_MIN_SDK)  
   getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_VISIBLE); 
```

在 4.x 和 2.2/2.3 平台上似乎都可以。

但是我在Samsung Nexus(9250)上遇到了这个问题，即使调用getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_VISIBLE)，我可以得到1196*720，但实际上我需要1280*720。

[获得冰淇淋三明治的真实屏幕分辨率](https://stackoverflow.com/questions/8566322/get-the-real-screen-resolution-on-ice-cream-sandwich/10811640#10811640)

还有其他我们可以使用的 API 吗？

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T03:35:33.693

当然有几个选项可以支持不使用相同 API 的多个 Android 版本，一种是反射，另一种是使用包装类。支持多个平台版本是很常见的事情，这里有一篇相当全面的[文章](http://developer.android.com/resources/articles/backward-compatibility.html)。

要正确设置，`AndroidManifest.xml`您需要添加以下标签：

```
<uses-sdk
    android:minSdkVersion="4"
    android:targetSdkVersion="10"
    android:maxSdkVersion="10" /> 
```

其中最低 SDK 是您的应用程序支持的最低 SDK，而目标是您的应用程序已经过测试且您知道有效的最高 SDK。如果您真的不希望您的应用程序在某个 API 级别之上使用（可能您使用了较新版本不支持的已弃用方法），则最大 SDK 是可选的。

编辑：至于使用哪个库，请选择能够为您提供所需所有功能的最低版本。如果您需要仅在 API 级别 11 中可用的方法，请使用它。如果它最终高于您的“最低支持版本”，请记住非常仔细地测试早期版本。

# c# - 如何从 Sql Server 系统消息中获取返回值？

> ID：10809529
> 
> 赞同：6
> 
> 时间：2012-05-30T03:12:09.437
> 
> 标签：c#, sql, sql-server, smo

我正在尝试使用针对 sql server Express 的命令验证我刚刚在 c# 中完成的备份

```
 string _commandText =  string.Format("RESTORE VERIFYONLY FROM DISK = '{0}'", backupLocation);

 SqlDataReader _sqlDataReader = SqlHelper.ExecuteReader("BookssortedSQLDbConnection", CommandType.Text, _commandText); 
```

如果我在 SSMS 中执行命令，它会返回“文件 1 上的备份集有效。” 但是我怎样才能让这条消息回到我的代码中呢？

阅读器将无法工作，因为没有返回任何行。

注意：我已经尝试过 SMO.Restore 对象来尝试验证它，但它不起作用，这就是我这样做的原因。

```
_restore.SqlVerify(srv, out _errorMessage); //returns false even though bakcup is fine 
```

顺便说一句 - 接受建议，因为我认为这不是实现我想要做的事情的理想方式

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-30T05:13:44.807

信息性消息（严重性小于 10）和 PRINT 输出返回给客户端，并由实例作为`InfoMessage`事件引发。`SqlConnection`每个事件都包含一个`SqlError`对象集合（这与 中使用的类相同`SqlException.Errors`）。

这是一个显示连接状态更改、信息消息和异常的完整示例。请注意，我使用`ExecuteReader`而不是`ExecuteNonQuery`，但信息和异常结果是相同的。

```
namespace Test
{
    using System;
    using System.Data;
    using System.Data.SqlClient;

    public class Program
    {
        public static int Main(string[] args)
        {
            if (args.Length != 2)
            {
                Usage();
                return 1;
            }

            var conn = args[0];
            var sqlText = args[1];
            ShowSqlErrorsAndInfo(conn, sqlText);

            return 0;
        }

        private static void Usage()
        {
            Console.WriteLine("Usage: sqlServerConnectionString sqlCommand");
            Console.WriteLine("");
            Console.WriteLine("   example:  \"Data Source=.;Integrated Security=true\" \"DBCC CHECKDB\"");
        }

        public static void ShowSqlErrorsAndInfo(string connectionString, string query)
        {
            using (SqlConnection connection = new SqlConnection(connectionString))
            {
                connection.StateChange += OnStateChange;
                connection.InfoMessage += OnInfoMessage;

                SqlCommand command = new SqlCommand(query, connection);
                try
                {
                    command.Connection.Open();
                    Console.WriteLine("Command execution starting.");
                    SqlDataReader dr = command.ExecuteReader();
                    if (dr.HasRows)
                    {
                        Console.WriteLine("Rows returned.");
                        while (dr.Read())
                        {
                            for (int idx = 0; idx < dr.FieldCount; idx++)
                            {
                                Console.Write("{0} ", dr[idx].ToString());
                            }

                            Console.WriteLine();
                        }
                    }

                    Console.WriteLine("Command execution complete.");
                }
                catch (SqlException ex)
                {
                    DisplaySqlErrors(ex);
                }
                finally
                {
                    command.Connection.Close();
                }
            }
        }

        private static void DisplaySqlErrors(SqlException exception)
        {
            foreach (SqlError err in exception.Errors)
            {
                Console.WriteLine("ERROR: {0}", err.Message);
            }
        }

        private static void OnInfoMessage(object sender, SqlInfoMessageEventArgs e)
        {
            foreach (SqlError info in e.Errors)
            {
                Console.WriteLine("INFO: {0}", info.Message);
            }
        }

        private static void OnStateChange(object sender, StateChangeEventArgs e)
        {
            Console.WriteLine("Connection state changed: {0} => {1}", e.OriginalState, e.CurrentState);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T03:47:03.317

将 ssms 消息检索到前端应用程序非常困难。但是，您可以将消息写入文本文件，然后从文件中读取数据。

```
declare @cmd varchar(1000)

SET @cmd = 'osql -S YourServer -E -d YourDatabase -q "RESTORE VERIFYONLY FROM   DISK=''c:\yourBackup.bkp''" -o c:\result.txt'

EXEC master.dbo.xp_cmdshell @cmd 
```

您可以从您的应用程序中执行上述 sql 语句，然后从 result.txt 文件中读取结果

# css - cakephp 中的目录分隔符禁用我的 CSS

> ID：10809531
> 
> 赞同：0
> 
> 时间：2012-05-30T03:12:28.790
> 
> 标签：css, cakephp

是我得到的，每次我使用这个，

```
$certpath = APP."Plugin".DS."PaypalIpn".DS."Controller".DS."Certificates".DS; 
```

在我的代码中，它破坏了我的 CSS。好吧，不一定是废墟，但我的页面好像没有使用任何 CSS 来对齐或其他东西。

我需要那个 DS，因为我必须调用该目录中的文件

```
$encryption['cert_file'] = $certpath.$encryption['cert_file']; 
```

我试过这个：

```
$encryption['key_file'] = $certpath.DS.$encryption['key_file'];
$encryption['cert_file'] = $certpath.DS.$encryption['cert_file'];
$encryption['paypal_cert_file'] = $certpath.DS.$encryption['paypal_cert_file']; 
```

仍然没有运气。前两行以这种方式工作，但第三行则不然。

我尝试使用这些关键字进行谷歌搜索：

```
directory separator in cakephp ruins my css
uses of directory separator in cakephp
calling files using directory separator in cakephp 
```

但这些都没有帮助我。

DS 只是一个目录分隔符吧？什么可能是错的？

.......... 编辑部分

好吧，这是另一个问题，我从上一个问题中找到了罪魁祸首，但请解释一下它与我的问题有何关系。这是我的 PaypalHelper.php

```
<?php

$importConfig = array(
                'type' => 'File',
                'name' => 'PaypalIpn.ppcrypto',
                //'file' => CONFIGS .'paypal_ipn_config.php'
                'file' => APP."Plugin".DS."paypal_ipn".DS."libs".DS."ppcrypto.php"
            );
//... other codes
//..other functions

function button($title, $options = array(), $buttonOptions = array()) {
//..other codes

$certpath = APP."Plugin".DS."PaypalIpn".DS."Controller".DS."Certificates".DS;

//..other codes

}
?> 
```

看到这段代码了吗？

```
$importConfig = array(
                'type' => 'File',
                'name' => 'PaypalIpn.ppcrypto',
                //'file' => CONFIGS .'paypal_ipn_config.php'
                'file' => APP."Plugin".DS."paypal_ipn".DS."libs".DS."ppcrypto.php"
            ); 
```

和这个？

```
$certpath = APP."Plugin".DS."PaypalIpn".DS."Controller".DS."Certificates".DS;
$encryption['paypal_cert_file'] = $certpath.$encryption['paypal_cert_file']; 
```

$importConfig..这是错误的，因为它应该是

```
$importConfig = array(
                'type' => 'File',
                'name' => 'PaypalIpn.ppcrypto',
                //'file' => CONFIGS .'paypal_ipn_config.php'
                'file' => APP."Plugin".DS."PaypalIpn".DS."libs".DS."ppcrypto.php"
            ); 
```

..但是当我试图纠正它时， $encryption['paypal_cert_file'] 工作正常。它不会破坏/（禁用？？）我的CSS

我首先将其作为答案，但我相信我的脑海中仍然存在问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:01:35.537

我几乎可以肯定无论是错误还是错误，要么是致命错误，要么是某种其他错误输出弄乱了您的 HTML 输出。

有时即使启用了调试，错误也不会在屏幕上显示，您必须检查 HTML 源代码，特别是如果错误发生在`<head>`HTML 部分、Javascript 内部或关闭`>`标记之前。我建议当您修复错误时，它解决了您的问题。

我会仔细检查您是否启用了调试。请参阅cake 文档中的[CakePHP 核心配置](http://book.cakephp.org/2.0/en/development/configuration.html#cakephp-core-configuration)。

如果您已经解决了问题，但仍想知道是什么原因造成的，如果可能，请撤消您的更改并检查我上面提到的内容。除此之外，我在您的代码中没有立即看到任何可能导致问题的明显内容。

# php - 用于 PHP 的 jTables 过滤

> ID：10809533
> 
> 赞同：3
> 
> 时间：2012-05-30T03:12:47.217
> 
> 标签：php, jquery, mysql

jTable (www.jtable.org) 在其网站上对 Filtering 有很好的参考，但它是针对 ASP.NET 的。我要求它用于 PHP，但遗憾的是，除了示例 ASP.NET 服务器端文件之外，文档没有提及用于过滤的 API。

无论如何，jTables 使用：

```
//Re-load records when user click 'load records' button.
    $('#LoadRecordsButton').click(function (e) {
        e.preventDefault();
        $('#PeopleTableContainer').jtable('load', {
            Name: $('#Name').val(),
            Branch: $('#Branch').val()
        });
    }); 
```

我可以看到我可以使用名称和分支将值传递给服务器，但我不知道如何在 PHP 代码上捕获它，所以我可以`WHERE`在我的 mysql 代码上执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T04:54:35.160

```
//Load person list from server
$('#PeopleTableContainer').jtable('load', { Age: 78 });

//Get records from database
$result = mysql_query("SELECT * FROM people WHERE Age = '" . $_POST["Age"] . "';"); 
```

# c++ - CMarkup XML 处理

> ID：10809536
> 
> 赞同：1
> 
> 时间：2012-05-30T03:13:16.730
> 
> 标签：c++, visual-studio-2010, visual-c++

这是我的第一篇文章，如果我犯了错误，请见谅。我目前在我的 Visual C++ 2010 express 项目中使用 CMarkup，它是由 FirstObject 制作的 XML 修改器/解析器。当我尝试使用其函数 CMarkup::Load("Filename.xml") 加载 xml 文件时，一切编译正常，但我得到一个运行时错误，我认为这是一个错误的指针，但这是我不明白的！这是我使用的代码

```
g_XMLSeamanConversations.Load(MCD_T("SeamanVocabulary.xml"));
g_XMLSeamanConversations.FindElem(MCD_T("SeamanVocabulary"));
g_XMLSeamanConversations.IntoElem();
g_XMLSeamanConversations.FindElem(MCD_T("SeamanQuestions"));
g_XMLSeamanConversations.IntoElem(); 
```

当我的代码调用 Load(); 函数程序在此停止

```
template <class _T1, class _T2>
inline void _Param_Construct_aux(_T1* __p, const _T2& __val, const __true_type&) 
{
// We use binary copying for POD types since it results
// in a considerably better code at least on MSVC.
// This is the problem -----> *__p = _T1(__val);
} 
```

此“错误”代码位于“_Construct.h”中

在此之后我的代码将不会运行。如果有人能对此有所了解或编造故事，我将欠下巨额债务！先谢谢了！！！

编辑：好的，这是通话顺序

```
bool CMarkup::Load( MCD_CSTR_FILENAME szFileName )
{
if ( m_nDocFlags & (MDF_READFILE|MDF_WRITEFILE) )
return false;
if ( ! ReadTextFile(szFileName, m_strDoc, &m_strResult, &m_nDocFlags) )
return false;
return x_ParseDoc();
} 
```

然后

```
bool CMarkup::ReadTextFile( MCD_CSTR_FILENAME szFileName, MCD_STR& strDoc, 
MCD_STR* pstrResult, int* pnDocFlags, MCD_STR* pstrEncoding )
{
// Static utility method to load text file into strDoc
//
FilePos file;
file.m_nDocFlags = (pnDocFlags?*pnDocFlags:0) | MDF_READFILE;
bool bSuccess = file.FileOpen( szFileName );
if ( pstrResult )
*pstrResult = file.m_strIOResult;
MCD_STRCLEAR(strDoc);
if ( bSuccess )
{
file.FileSpecifyEncoding( pstrEncoding );
file.m_nOpFileByteLen = (int)((MCD_INTFILEOFFSET)
(file.m_nFileByteLen - file.m_nFileByteOffset));
bSuccess = file.FileReadText( strDoc );
file.FileClose();
if ( pstrResult )
*pstrResult += file.m_strIOResult;
if ( pnDocFlags )
*pnDocFlags = file.m_nDocFlags;
}
return bSuccess;
} 
```

然后

```
public:                         // Append, operator+=, push_back.

_Self& operator+=(const _Self& __s) { return append(__s); } 
```

然后

```
public:
_Self& append(const _Self& __s)
{ return _M_append(__s._M_Start(), __s._M_Finish()); } 
```

然后

```
template <class _CharT, class _Traits, class _Alloc>
basic_string<_CharT, _Traits, _Alloc>&
basic_string<_CharT, _Traits, _Alloc>::_M_append(const _CharT* __first,
const _CharT*     __last) {
if (__first != __last) {
size_type __n = __STATIC_CAST(size_type, __last - __first);
if (__n >= this->_M_rest()) {
size_type __len = _M_compute_next_size(__n);
pointer __new_start = this->_M_start_of_storage.allocate(__len, __len);
pointer __new_finish = _STLP_PRIV __ucopy(this->_M_Start(),
this->_M_Finish(),    __new_start);
__new_finish = _STLP_PRIV __ucopy(__first, __last, __new_finish);
_M_construct_null(__new_finish);
this->_M_deallocate_block();
this->_M_reset(__new_start, __new_finish, __new_start + __len);
}
else {
const _CharT* __f1 = __first;
++__f1;
_STLP_PRIV __ucopy(__f1, __last, this->_M_finish + 1);
_M_construct_null(this->_M_finish + __n);
_Traits::assign(*end(), *__first);
this->_M_finish += __n;
}
}
return *this;
} 
```

然后

```
template <class _RandomAccessIter, class _OutputIter>
inline _OutputIter __ucopy(_RandomAccessIter __first,
_RandomAccessIter __last,  _OutputIter __result)
{ return __ucopy(__first, __last, __result,
random_access_iterator_tag(),    (ptrdiff_t*)0); } 
```

然后

```
template <class _RandomAccessIter, class _OutputIter, class _Distance>
inline _OutputIter __ucopy(_RandomAccessIter __first, _RandomAccessIter __last,
_OutputIter __result, const random_access_iterator_tag &,    _Distance*) {
_OutputIter __cur = __result;
_STLP_TRY {
for (_Distance __n = __last - __first; __n > 0; --__n) {
_Param_Construct(&*__cur, *__first);
++__first;
++__cur;
}
return __cur;
}
_STLP_UNWIND(_STLP_STD::_Destroy_Range(__result, __cur))
_STLP_RET_AFTER_THROW(__cur)
} 
```

然后

```
template <class _T1, class _T2>
inline void _Param_Construct_aux(_T1* __p, const _T2& __val, const __true_type&) {
// We use binary copying for POD types since it results
// in a considerably better code at least on MSVC.
*__p = _T1(__val);
} 
```

最后

```
template <class _T1, class _T2>
inline void _Param_Construct_aux(_T1* __p, const _T2& __val, const __true_type&) {
// We use binary copying for POD types since it results
// in a considerably better code at least on MSVC.
*__p = _T1(__val);
} 
```

希望这可以帮助！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T23:36:46.657

这可能是Unicode集问题。试试这些选项

*   `MARKUP_STL`在预处理器部分使用
*   取消选中“从父级或项目默认值继承”
*   `UNICODE`复制除&以外的任何其他预处理器宏`_UNICODE`并将其与`WIN32,MARKUP_STL`
*   `MCD_T("")`从您自己的代码中删除并使用`.Load("filename.xml")`

那应该行得通。

# python - 布尔逻辑的使用：和/或和真/假

> ID：10809538
> 
> 赞同：0
> 
> 时间：2012-05-30T03:13:39.930
> 
> 标签：python, boolean

我正在使用 Python 学习基本的布尔逻辑。我理解相等运算符，但是当 ands 和 ors 被抛出时会感到困惑。例如，看看下面的代码：

```
people = 20
cats = 30
dogs = 15

if people < cats:
   print "too many cats! the world is doomed!"

if people == cats or dogs == cats:
   print "this is too hard" 
```

我理解第一个 if 语句及其打印的原因。我不知道如何评估第二个 if 语句。我怎么能改变它来打印那条线？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T03:16:19.637

`and`要求表达式中的***所有***部分都计算为`True`，以使整个表达式为`True`。

`or`不那么挑剔，只要表达式的***任何***部分计算为`True`整个表达式 is `True`。

在这种情况下，您可能会遇到**短路**一词。它只是意味着我们一旦确定表达式的结果就停止计算表达式。

因此，对于 a`and`我们可以在找到计算结果为 的部分后立即停止查看表达式的其余部分，`False`因为此时表达式永远无法计算为`True`。

同样，对于`or`，一旦我们找到 的部分`True`，我们就知道整个表达式将是`True`，并且没有理由进一步研究。

对于您发布的代码示例：

```
if people == cats or dogs == cats:
    print "this is too hard" 
```

如果其中任何一个或两者都 `people == cats`评估`dogs == cats`为`True`，则语句中的整个表达式`if`将变为`True`。由于它们*都不*`True`是 is ，因此语句中的表达式`if`失败，即 is `False`，并且不执行 print 语句。

最后，如果您想打印要执行的语句，您必须确保布尔表达式评估为`True`. 一种方法是更改​​为 to 的值， `dogs`因为`30`then`dogs == cats`将`True`足以生成整个表达式`True`并执行打印。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T03:17:31.347

OR 测试两个或一个陈述是否为真，AND 测试两个陈述是否为真。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T04:10:28.173

这`if`两个语句的评估方式相同。

```
if something:
    do_stuff 
```

如果`something`为 True，则`do_stuff`块运行 [1]。如果`something`不是 True 则该`do_stuff`块不运行。您的两个 if 语句之间的区别不是一个“工作方式不同”，而是它们运行在不同版本的`something`.

`and`并且`or`是取真值并计算新真值的二元运算。就像在`1 + 3`中一样`+`是一个二元运算，它接受数字`1`并`3`产生一个新的数字`4`。`a and b`取两个真值`a`并`b`产生一个新值。尽管我们可以拥有`x + y`or `x * y`，它从数字`x`and中产生不同的数字`y`，但我们可以拥有`a and b`or ，它从真值and`a or b`中产生不同的真值。`a``b`

但该`if`声明并不关心这一点。它不需要知道我们是**如何**得到它正在测试的真值的，它的工作方式完全相同。`and`并且`or`是完全独立的，它们只是组合真值以获得新值的方式。

* * *

`and`关于如何和工作的直觉`or`是基于我们在谈论可能对或错的事情时使用的一些方式`and`和英语。`or`

在“如果*下雨了*，那我就拿把伞”这句话中，“下雨了”部分是一个可能是真或假的条件，句子的其余部分是说如果它是真的会发生什么。用英语我也可以说“如果*下雨了* **，** *我想走路*，那我就拿把伞”；这将“正在下雨”和“我想走路”这两个单独的条件通过单词**and**组合成一个条件。这句话的意思是如果“正在下雨”和“我想走路”都是真的，我会得到一把雨伞；如果是晴天，那么我认为我不需要雨伞，如果我正在开车，那么我不在乎在我的房子和汽车之间被淋湿。

我也可以说“如果*正在下雨* **或者** *我想走路*，那么我会带把伞”。这句话的意思是，如果其中一个或两个条件都为真，我将得到一把雨伞。在这里我们可以猜测，如果下雨我想在当天晚些时候打伞，即使我不想走路，如果我想走路我想要一把伞，以防我走路的时候下雨，即使现在不下雨。

在编程和运算符中理解真值的最好方法`and`是`or`保持对英语的这种自然理解，`and`并`or`牢记在心。`and`这为您提供了一种快速理解涉及和的简单表达式的直观方式`or`。但是在编程的方式`and`和工作方式是形式化的，所以我们可以*准确地*`or`写下它们是如何工作的，而不管正常英语使用中的任何歧义或特殊情况。

 *`A and B`如果`A`为真且`B`为真，则为真，否则为假（如果其中一个为假`A`，则为`B`假）。`A or B`如果其中一个`A`或`B`为真，则为真（如果`A`为假且`B`为假，则为假，否则为真）。这是一个显示这一点的表格：

```
 A   |   B   |  A and B
------+-------+---------
True  | True  |   True
True  | False |   False
False | True  |   False
False | False |   False

  A   |   B   |  A or B
------+-------+--------
True  | True  |   True
True  | False |   True
False | True  |   True
False | False |   False 
```

* * *

[1] 事实上，这个故事比这要复杂一些（我的整个答案都是如此）。Python 中的大多数布尔运算（包括`if`语句和运算符`and`and `or`）不是对精确的真值进行操作，而是对“真实”值进行操作。简而言之，数字 0、空容器和字符串以及特殊值在您将它们提供给期望真值的操作时`None`就像`False`它们一样，而其他所有东西都像它们一样`True`。我们有时会使用术语“真实”或“虚假”来描述不一定`True`或`False`表现得好像真实的价值观。

同样，从现有真值产生新真值的操作，例如`and`但`or`不一定返回`True`or `False`，它们可能会返回您给它们的值，即上表要求的“真”或“假”。

但是，如果有人读到这篇文章是在学习用真值编程的早期阶段，我**强烈**建议你忽略这一点，只是认为自己在操纵`True`and `False`，同样不要担心“短路评估”和检查事物的顺序（如果只涉及真实`True`和`False`涉及，甚至在大多数情况下使用其他值时都无关紧要）。一旦你掌握了基础知识，就很容易扩展你对这些概念的理解。*

# c# - 为什么这些枚举不好

> ID：10809543
> 
> 赞同：1
> 
> 时间：2012-05-30T03:14:06.750
> 
> 标签：c#, .net, visual-studio, enums

在 Visual Studio 中——嗯，我使用的是 Visual Studio 11 Beta，所以这可能是问题所在——我认为我正在编写枚举代码。但是，虽然这有效：

![在此处输入图像描述](../Images/e43d4f8e0d18fdc63b9d63b63f042b3c.png)

这不起作用：

![在此处输入图像描述](../Images/4435f0e0a7ab8fa1100ff7fffe8c7981.png)

怎么了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T03:15:10.697

与 VS11 测试版无关。您只需在枚举名称前加上前缀：

```
return TriangleType.error; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T03:17:05.573

C# 是一种强类型语言。您在枚举值之前缺少枚举名称。这应该有效：

```
return TriangleType.error; 
```

等等...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T03:18:56.197

如果您想像第一个示例中那样执行并返回一个 int，您可以转换该值并仍然使用枚举“名称”，如下所示：

```
return (int)TriangleType.scalene; 
```

有关更多信息，请参阅[this](https://stackoverflow.com/questions/943398/enums-returning-int-value) other SO question。

# python - 如何在emacs中使ropemacs更快？

> ID：10809549
> 
> 赞同：5
> 
> 时间：2012-05-30T03:15:36.080
> 
> 标签：python, emacs, refactoring, rope

我在emacs中使用ropemacs和company-mode来完成代码。

但是，我经常发现ropemacs 很慢，例如，当我输入

```
import os
os. 
```

然后ropemacs会尝试对os模块下的方法做补全，这会使emacs卡住5~6秒。

有没有办法避免这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T21:36:12.290

似乎没有好的解决方案。我现在改用 pysmell。

# html - 100% 宽度的页眉和页脚

> ID：10809550
> 
> 赞同：2
> 
> 时间：2012-05-30T03:15:43.733
> 
> 标签：html, css, xhtml

我是 CSS 新手，正在使用 CSS 从头开始​​设计我的第一个网站（我最近从*上帝的爱中毕业，停止使用 html 来设计您的网站*生活方式）。

我想创建一个页面，其中页眉和页脚超出正文的宽度，并从页面的左到右完成。我已经启动了代码，但我被卡住了。页眉将有一个徽标和导航（我还没有编写导航代码，但这并不难），页脚将只有一行内容。

我在其他问题中查找了示例，答案都非常复杂，并且涉及滚动条之类的东西，这比我想要的要多。

任何有关如何做到这一点的建议将不胜感激！对不起，如果这是一个愚蠢的问题。谢谢。

**HTML**

```
<body>

<!-- begin wrapper -->
<div id="wrapper">

<!-- begin header -->
  <div id="header">
    <p>Content</p>
  </div>

<!-- begin navigation -->
  <div id="navigation">
    <ol>
    <li>Home</li>
    <li>Page 1</li>
    <li>Page 2</li>
    <li>Page 3</li>
    <li>Contact</li>
    </ol>
  </div>

<!-- begin content -->
  <div id="content">
    <h1>Heading</h1>
    <p>Content</p>
  </div>

<!-- begin footer -->
  <div id="footer">
    <p>Content</p>
  </div>

</div>

</body> 
```

**CSS**

```
@import url(http://fonts.googleapis.com/css?family=PT+Sans+Narrow);

#header {
    background: #636769;
}

#navigation {
}

body {
    font-family: 'PT Sans Narrow', sans-serif;
    font-size: 16pt;
    background: url(../images/texture.png);
}

#wrapper {
    width: 938px;
    margin: 0 auto;
    padding: 20px 20px;
    background: white;
}

#footer {
   background: #636769;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T03:20:17.927

如果您想要`#header`并`#footer`跨越整个页面，您还必须将它们移出`#wrapper`. 您可能还想指定高度，例如`height: 40px`.

您希望页眉和页脚在滚动时保持原位吗？如果是这样，请`position: fixed;`同时使用。然后，`#header`放在`top: 0px; left: 0px; right: 0px;`; 并`#footer`放上去`bottom: 0px; left: 0px; right: 0px;`。

你还有什么想做的，告诉我。我很乐意提供帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T03:23:18.473

由于您的 #wrapper 类包含整个页面，因此所有后续标签都将继承相同的值。如果您希望#header 或#footer 忽略这一点，那么您需要为这些类指定不同的值。尝试更改这些类以指定它们自己的宽度值（即`width: 938px;`），看看会发生什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T03:25:30.950

将`header`和`footer`div 拉到外部`wrapper`以使其适合页面的宽度。

```
<body>

<!-- begin header -->
  <div id="header">
    <p>Content</p>
  </div>

<!-- begin wrapper -->
<div id="wrapper">

<!-- begin navigation -->
  <div id="navigation">
    <ol>
    <li>Home</li>
    <li>Page 1</li>
    <li>Page 2</li>
    <li>Page 3</li>
    <li>Contact</li>
    </ol>
  </div>

<!-- begin content -->
  <div id="content">
    <h1>Heading</h1>
    <p>Content</p>
  </div>

</div>

<!-- begin footer -->
  <div id="footer">
    <p>Content</p>
  </div>

</body> 
```

# javascript - CSS：如何制作一个导航菜单，其下方有一个子导航菜单？

> ID：10809553
> 
> 赞同：0
> 
> 时间：2012-05-30T03:16:07.747
> 
> 标签：javascript, jquery, html, css

我现在有一个菜单，可以在这里找到... [http://jsfiddle.net/EUaNY/](http://jsfiddle.net/EUaNY/)

现在我想要一个与那个样式相同的子菜单，但直接显示在它的下方，并带有该特定链接的子项。请注意，此菜单以我的页面为中心，页面`margin: 0 auto;`宽度为`width: 978px;`。您可以在 .header-nav-menu 中看到这一点。抱歉，如果我没有包含一些我的 CSS 非常基本的内容。如果您有任何问题或任何问题，我将很乐意回答！谢谢！

顺便说一句，我宁愿不使用 Javascript，但如果有必要，那很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T04:09:24.550

我不确定您是否希望子菜单出现在悬停时，但是通过添加以下 2 个类使用直接 CSS 非常简单：

```
.header-nav-menu li > ul {
    display: none;
    position: absolute;
    width: 100%;
    padding: 4px 0;
    background: #3E0C0D;
}

.header-nav-menu li:hover > ul {
    display: block;
} 
```

这是您更新的 jsFiddle [http://jsfiddle.net/EUaNY/1/](http://jsfiddle.net/EUaNY/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T03:19:28.130

如果您的意思是您希望该标题中的每个项目都激发子项目出现在其下方（垂直或水平），那么严格使用 CSS 无法实现这一点。对不起。

在这种情况下，直接使用 Javascript 将比仅仅折腾一个 jQuery 库更复杂。像这个...

[http://www.webchief.co.uk/blog/simple-jquery-dropdown-menu/index.php](http://www.webchief.co.uk/blog/simple-jquery-dropdown-menu/index.php)

# c++ - 需要帮助理解结构，以及程序的一些错误

> ID：10809557
> 
> 赞同：1
> 
> 时间：2012-05-30T03:16:49.740
> 
> 标签：c++, struct, fractions

我不知道如何正确使用结构来实现计算分数的目标（这是必需的）。坦率地说，我不知道自己在做什么，这只是我在 C++ 中的第三堂课，我感到迷茫……这是分配给我们的任务

> 您的 enter() 函数接受来自用户的一小部分。如果可能，您的简化（）函数会简化它收到的分数。您的 display() 函数显示它收到的分数。
> 
> 您的全局函数使用 Fraction 类型。Fraction 类型将分数的分子和分母作为单独的数据成员保存。

这是我的程序，除了“ *cin* ”和“ *cout* ”和GCF函数由教授提供之外，只有主要的函数和结构之外的所有其他函数和结构都是我自己尝试做的**......**

 **```
 #include <iostream>
 using namespace std;

void entry (int a, int b);
void simplify (double c);
void display(int x, int y)

int main() 
{

    struct Fraction fraction;
         cout << "Enter a numerator: " << endl;
         cin >> fraction.num;
         cout << "Enter a denominator: " << endl;
         cin >> fraction.den;

     cout << "Fraction Simplifier" << endl;
     cout << "===================" << endl;

     enter(&fraction);
     simplify(&fraction);
     display(fraction);
 }

        struct Fraction {
                 int num;
                 int den;
                }

        struct Fraction fraction{
                 fraction.num;
                 fraction.den;
                }

        void display(int num, int den) {
                 cout << fraction.num << endl;
                 cout << fraction.den << endl;
                }

// Great Common Factor (Euclid's Algorithm), provided by Professor

int gcf( int num1, int num2 )

{

     int remainder = num2 % num1;
     if ( remainder != 0 )
      {
         return gcf( remainder,num1 );
       }
     return num1;
} 
```

这些是我的错误：

```
w2.cpp: In function 'int main()':   
w2.cpp: 14:  error: aggregate 'Fraction fraction' has incomplete type and cannot be defined 
w2.cpp: 23:  error: 'enter' was not declared in this scope   
w2.cpp: At global scope: w2.cpp:35: error: function definition does not declare parameters  
w2.cpp: In function 'void display(int, int)':   
w2.cpp: 41:  error: 'fraction' was not declared in this scope 
```

对于这篇很长的帖子，我深表歉意，但非常感谢任何和所有帮助。如果有人能指点我一本有用的 C++ 书，我可以在家里和/或在课堂上阅读（由于语言障碍，我不能很好地理解我的教授）也将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T03:28:37.690

让我们来看看这些：

```
error: aggregate 'Fraction fraction' has incomplete type and cannot be defined 
```

现在，在`main()`，你说`struct Fraction fraction;`。此时，您正在前向声明您的结构。它不完整，因此您不能像以前那样使用它。

你应该在`Fraction`之前定义你的整个结构`main()`。另请注意，`struct`in`struct Fraction fraction;`是不必要的，是从 C 中遗留下来的。

```
 error: 'enter' was not declared in this scope 
```

简单的。您已声明`entry()`最高，但您正在尝试使用`enter()`. 不多说了。

```
 At global scope: w2.cpp:35: error: function definition does not declare parameters 
```

现在这有点令人困惑。这是违规行：

```
struct Fraction fraction{ 
```

编译器如何看待这是一个返回 a 的函数`Fraction`，但它缺少其参数列表。我不确定您要使用此代码块做什么。

```
error: 'fraction' was not declared in this scope 
```

看起来您正在尝试使用在其他地方声明的对象。如果你想要一个 from `main()`，你必须将它作为参数传递。如果你想要一个全局变量`fraction`，你在全局空间中只需要：

```
Fraction fraction; 
```

这应该发生在`Fraction`结构之后。另请注意，由于 this 与 in 中的对象名称相同`main()`，因此`main()`阴影中的对象会隐藏此对象，如果您想从中访问全局对象，则`main()`需要使用`::fraction`.

我希望这有助于澄清一些理解。

我看到的其他一些错误是：

```
enter(&fraction); 
```

您将 a 传递`Fraction *`给需要两个`int`s 的函数。我想你会希望这个拿一个`Fraction &`。然后你可以像`enter (fraction);`让它修改传入的对象一样调用它。

```
simplify(&fraction); 
```

类似，但这个需要一个`double`. 我想你也会想要它`Fraction &`。

*   你的`entry`和`simplify`函数永远不会被定义，但你仍然尝试使用它们。
*   `display`应该采取 a`Fraction`以便打印它的部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T03:32:06.427

[推荐的 C++ 书籍列表。](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)搜索这个网站也有帮助。

在 C++ 中，结构（或类）和联合构成了用户定义数据结构的两种基本类型。用户定义的数据结构是您希望程序使用的某些东西的模型/蓝图（它可以是真实世界的数量或抽象概念）。所以，如果你想要一个结构来存储你朋友的名字，你可能会做这样的事情：

```
struct FriendName {
    std::string first, last;
}; // the semi-colon is required here 
```

`first`并且`last`是您的结构的成员。`std::string`是这些成员的类型，它告诉编译器你想要存储什么样的数据——这里的数据是我们使用库定义的适当类型的字符串。

一旦你定义了一个叫做 a 的东西，`FriendName`你就可以用它来存储数据并使用这些数据。但是，如果您再次尝试定义`FriendName`，编译器会报错。这就是您的代码正在发生的事情。

现在，为了使用这个数据结构，您需要创建一个对象（它是代表特定`FriendName`实例的内存区域）。您可以按如下方式创建对象：

```
FriendName fred; // note that I don't need to use struct FriendName 
```

你可以继续使用它作为：

```
fred.first = "Fred"; // write 'fred' object's first name
fred.last = "Flintstone"; 
```

对象名称用作标记，当与`.`运算符和成员名称结合使用时，您可以读取/写入该特定成员。

假设您想从控制台读取名称：在这种情况下，您会这样做：

```
FriendName wilma;
std::cin >> wilma.first >> wilma.last; // read in 'wilma' objects members one by one 
```

现在，那里有足够的东西让你开始！**

# c# - 如何为asp.net创建类库

> ID：10809559
> 
> 赞同：5
> 
> 时间：2012-05-30T03:17:01.170
> 
> 标签：c#

我是 ASP.NET 的新手。我对 ASP.NET 如何创建 Web 应用程序有一个大致的了解？但是在这里，我问这个问题是因为我想为我的编码应用最佳实践。所以，我想分离概念层，例如，我想创建检查会话的函数`page_load`，如果它为空而不是重定向到默认页面。我可以通过复制粘贴到每个新页面来做到这一点。但我想调用函数而不是复制/粘贴。

我正在考虑为数据访问创建库以及连接和进行数据操作。可能吗？

**我刚刚从谷歌搜索中找到了这篇文章：[Application Archi ...](http://www.simple-talk.com/dotnet/.net-framework/.net-application-architecture-the-data-access-layer/&ei=apHFT-yAMImOiAfR5szqAg&usg=AFQjCNHYqAt7BW8HKLd_88-1ltqxmNAIrQ&cad=rja)**

我可以使用这个概念吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T03:26:15.833

正确的。对于数据访问层，您可以创建一个`ClassLibrary`项目并将编译后的内容添加`dll`为项目的引用`WebApplication`。

这是一个[MSDN 链接](http://msdn.microsoft.com/en-us/library/cc668164.aspx)，其中包含有关如何执行此操作的步骤。

**注意：** 但理想情况下，您可以拥有另一个`ClassLibrary`业务逻辑层项目，您可以在其中引用您的数据访问层 dll；然后您可以将业务逻辑层 dll 添加到您的 Web 应用程序（这完全是为了实现松散耦合的架构和构建可扩展的软件；这再次取决于业务需求）

首先，这里是“ [Microsoft 应用程序架构指南](http://msdn.microsoft.com/en-us/library/ff650706.aspx)”的好读物

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T03:25:14.520

将类库添加到您的解决方案中，如下所示。然后你可以在类库的类中移动你的数据访问和数据操作代码。

将此类库项目的引用添加到您的 Web 应用程序。现在，您将能够在 Web 项目的类库中调用您在类中定义的函数。

VS 2010 添加类库..

![VS 2010 添加类库](../Images/499f78ecae929d2557ae4ca9bd8160a4.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T03:22:25.933

阅读

> 基本页面

从此基本页面继承您的所有页面。这将帮助您采用 OOP 方法，并为您省去以下麻烦

> 复制粘贴

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T03:20:13.963

绝对地。只需在 Visual Studio 中创建一个新的类库项目并在您的 ASP.Net 项目中引用它。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-30T03:19:36.640

创建一个基类，例如“MyAppPage”并覆盖 OnInit 事件。在 on init 事件中检查会话。如果为空，则重定向到您的登录页面，否则继续。使您的所有页面都派生自您的基类，而不是 System.Web.UI.Page。如果您也按照此操作进行用户控件，那将是一件好事。拥有你的基类总是好的。

# iphone - 为什么在objective-c中使用@class

> ID：10809562
> 
> 赞同：3
> 
> 时间：2012-05-30T03:17:25.400
> 
> 标签：iphone, ios, compiler-directives

> **可能重复：**
> [@class 我可以知道这个的正确用法吗](https://stackoverflow.com/questions/3653316/class-may-i-know-the-proper-use-of-this)

我想知道为什么使用@class。我有一个普遍的理解，它允许你访问你调用的那个类中的东西，但是我不知道它的好处..

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-30T03:19:43.823

该`@class`指令设置对另一个类的前向引用。它告诉编译器命名的类存在，所以当编译器到达，比如说一个`@property`指令行，不需要额外的信息，它假设一切都很好并继续前进。

例如，此代码本身可以正常工作：

```
#import <UIKit/UIKit.h>
#import "MyExampleClass"

@interface CFExampleClass : NSObject <SomeDelegate> {
}

@property (nonatomic, strong) MyExampleClass *example;

@end 
```

但是，假设我们想要避免循环包含这些头文件（EG`CFExampleClass`导入`MyExampleClass`和`MyExampleClass`导入`CFExampleClass`），那么我们可以使用它`@class`来告诉编译器`MyExampleClass`存在而没有任何抱怨。

```
#import <UIKit/UIKit.h>
@class MyExampleClass;

@interface CFExampleClass : NSObject <SomeDelegate> {
}

@property (nonatomic, strong) MyExampleClass *example;

@end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T03:20:34.310

@class 指令的存在是为了避免创建循环依赖。

例如，如果 A 类需要访问 B 类，而 B 类需要访问 A 类，那么您需要将 A 类导入 B，将 B 导入 A。
链接器将从 A 类转到 B 类，然后从 B 到 A，它有那个参考，并且会无限期地这样做。

相反，通过不导入类，您可以避免这个问题。

# .net - 默认 GroupBox ForeColor 的 RGB 是多少？

> ID：10809564
> 
> 赞同：1
> 
> 时间：2012-05-30T03:17:54.207
> 
> 标签：.net, winforms, visual-studio, groupbox

在 Visual Studio (WinForms) 中，当您将 GroupBox 控件拖到窗体上时，标题标签将获得默认颜色（蓝色）。现在我知道 Forecolor 属性显示为 "{Name=ControlText, ARGB=(255, 0, 0, 0)}" 但 Name=ControlText 对我来说没用，ARGB 也是如此，它恰好是黑色的.

它是什么深浅的蓝色？

我希望能够写作

```
myLabel.ForeColor = Color.FromArgb(?, ?, ?, ?); 
```

并获得完全相同的蓝色阴影。

（这当然不是火箭科学，但并不像看起来那么容易）。

编辑#1。根据一些答案，我将澄清并改写我的问题。我知道它与主题相关，GroupBox 的 ControlText 与标签的 ControlText 不同。我在使用“Windows XP”主题的 WindowsXP 上。那么，当使用 Windows XP 主题时，我如何找到应用于 GroupBox 的这种蓝色阴影（以 RGB 表示）？即是什么？? ? ? 价值观。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T04:18:57.063

这完全取决于用户当前的主题。在 Windows Classic 主题、所有 3 个标准 Windows XP Luna 主题、Aero 主题以及 Windows 8 中可能完全出现的其他内容中，组框标题使用了不同的颜色。更不用说它是用户可自定义的，这意味着他们甚至可能没有使用标准的主题颜色。

*因此，根据计算机上显示的*内容对 RGB 值进行硬编码不是一个好计划。这是确保您的应用程序会像拇指酸痛一样突出的好方法。因此，在这个问题的其他答案中建议的截取屏幕截图和采样像素颜色的策略是正确的。错误的次数多于正确的次数。

相反，您需要向系统询问此值以确保它与用户的当前配置相匹配。这可以分为两种一般可能性：

1.  用户打开了[视觉样式](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773187.aspx)（主题）服务，这意味着他们正在使用 Luna 或 Aero 之类的东西。

    在这种情况下，您需要查询 Visual Styles 服务以获取适当的颜色。使用命名空间中提供的托管包装器很简单[`System.Windows.Forms.VisualStyles`](http://msdn.microsoft.com/en-us/library/system.windows.forms.visualstyles.aspx)。例如，您可以编写以下代码（在 C# 中任意编写）：

    ```
    using System.Windows.Drawing;
    using System.Windows.Forms.VisualStyles;
    // ...
    var vsr = new VisualStyleRenderer(VisualStyleElement.Button.GroupBox.Normal);
    var groupBoxCaptionColor = vsr.GetColor(ColorProperty.TextColor); 
    ```

2.  用户*关闭*了视觉样式服务或它不可用（XP 之前的 Windows 版本），这意味着他们正在使用“Windows 经典”主题。

    在这种情况下，组框使用标准 3D（控制）颜色作为其标题，因此您可以简单地从[`System.Drawing.SystemColors`](http://msdn.microsoft.com/en-us/library/system.drawing.systemcolors.aspx)类中获取它。您要查找的属性称为`ControlText`：

    ```
    using System.Windows.Drawing;
    // ...
    var groupBoxCaptionColor = SystemColors.ControlText; 
    ```

[在实际应用程序中，您必须将这两种情况放在一起才能处理所有可能的客户端配置](https://stackoverflow.com/a/5141282/366904)。如果 Visual Styles 服务被关闭，第一个路由会爆炸，所以你需要先检查它（你可以通过查询[`Application.RenderWithVisualStyles`](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.renderwithvisualstyles.aspx)属性来做到这一点，如果它被关闭，则回退到第二种方法。类似于：

```
using System.Windows.Drawing;
using System.Windows.Forms.VisualStyles;

// ...

public Color GroupBoxCaptionColor
{
  get
  {
    // Test to see if Visual Styles are enabled.
    if (Application.RenderWithVisualStyles())
    {
      // If Visual Styles are enabled, use that color.
      var vsr = new VisualStyleRenderer(VisualStyleElement.Button.GroupBox.Normal);
      return vsr.GetColor(ColorProperty.TextColor);
    }
    else
    {
      // Otherwise, fall back to the Classic theme.
      return SystemColors.ControlText;  
    }
  }
} 
```

该`GroupBoxCaptionColor`属性将返回一个与*当前*用于组合框控件标题的颜色`Color`相对应的对象。从技术上讲，这个对象将具有 RGB 值，但您必须通过所有这些歌曲和舞蹈来确保您的应用程序使用的颜色始终与当前主题颜色同步。*`Color`*

 *一旦你了解了工作中的各种力量，它真的不会太复杂。除了乐趣还没有*完全*结束。您必须考虑是否要处理用户*在应用程序运行时*更改其系统主题的可能性。在这种情况下，*实际*组合框控件的标题颜色会发生变化，但您以编程方式确定的标题颜色将过时，匹配旧主题而不是新主题。

修复是监视[`SystemEvents.UserPreferenceChanged`](http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.userpreferencechanged.aspx)事件，当用户在控制面板中更改主题时会引发该事件。在该事件的处理程序方法中，您需要再次获取组框标题颜色，并更新可能正在使用它的任何 UI 元素。

值得特别注意的是，正如上面链接的文档所述，这是一个静态事件，这意味着您必须在应用程序关闭时分离事件处理程序，否则您可能会泄漏内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T03:39:43.720

检查当前 `ForeColor`GroupBox 的设置是什么，如果`ControlText`所有这些颜色都来自 Windows 主题。您可以使用`SystemColors`如下方式获取颜色，

```
myLabel.ForeColor = SystemColors.ControlText; 
```

请检查您是否可以从以下颜色中找到它。

如果你想获得金色，那么：`Color.Gold`

![在此处输入图像描述](../Images/be6374e598bcd575df707a173ffe74e8.png)

图片来自[这里](http://msdn.microsoft.com/en-us/library/system.windows.media.solidcolorbrush.color%28VS.95%29.aspx)*

# c++ - apache 服务器上的 fcgi 与 mod_fastcgi

> ID：10809568
> 
> 赞同：6
> 
> 时间：2012-05-30T03:18:30.640
> 
> 标签：c++, web-services, apache, cgi, fastcgi

我有一个我正在设置的 apache 服务器`fcgi`。我正在考虑是否必须设置量身定制的`mod_fastcgi`或普通的旧的`cgi-fcgi`。

`mod-fastcgi`似乎不支持 的“多路复用”功能`fcgi`，而我正在构建的 Web 服务是一个非常高流量的服务，每分钟有数千个调用，我希望尽快处理它们。

有什么建议或建议吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T22:05:37.397

确实，`mod_fastcgi`不支持多路复用。我想这是因为 Apache Web 服务器自己处理并发处理。您可能已经处理过它的各种多处理模型 (MPM)...

Apache 围绕提供的几个（请求）阶段进行了高度优化。各种模块可以挂在任何你喜欢的地方，这使得 Apache 成为一个优秀的服务器，可以直接将高性能和/或非常复杂的应用程序（例如，`c`在`mod_perl`. 但恕我直言，两者`mod_fastcgi`都`cgi-fcgi`仅用于提供响应和/或过滤器处理程序。因此; Apache 提供的许多强大功能（配置、映射、请求后日志记录和清理......）只是没有在这样的设置中使用。

因此; 如果您的应用程序是建立在 FGCI 之上的，我宁愿不推荐使用 Apache。尤其适用于高负载下的高性能应用；人们可能更喜欢更轻量但速度更快的 HTTP 守护程序。有很多替代品，例如`nginx`or `lighttpd`。通常人们会将它们用作 FCGI 进程、缓存、SSL 处理程序和日志记录提供程序的代理/平衡器。当然，阿帕奇也有能力完成这些任务，但这就像用直升机在十字路口指挥交通......

干杯!

# c - 如何在 C 中正确检查 strptime 的有效日期

> ID：10809569
> 
> 赞同：10
> 
> 时间：2012-05-30T03:18:38.613
> 
> 标签：c, validation, date, strftime, strptime

我正在执行以下操作来转换和检查日期，但是，我不确定为什么以下日期一直验证为真。

不会`%d`只检查`[01,31] + leading zeros`吗？有没有更好更准确的方法来做到这一点？

```
#include <time.h>
#include <stdio.h>
#include <stdlib.h>

int main () {
    struct tm tm; 

    char buffer [80];
    char *str = "29/Jan/2012";
    if (strptime (str, "%Y/%b/%d", &tm) == NULL)
        exit(EXIT_FAILURE);
    if (strftime (buffer,80,"%Y-%m-%d",&tm) == 0)
        exit(EXIT_FAILURE);

    printf("%s\n", buffer); // prints 29-01-20

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T03:28:35.953

它返回非 NULL，因为初始子字符串`29/Jan/20`与模式匹配（特别是与模式`20`中的最终匹配`%d`）。

如果`strptime()`返回 non- `NULL`，则返回一个指针，指向匹配模式的输入字符串部分之后的下一个字符。因此，在这种情况下，它将返回一个指向`'1'`日期字符串中字符的指针。

如果要确保输入字符串中没有任何剩余内容，则需要检查返回值是否指向输入字符串末尾的终止 null：

```
int main ()
{
    struct tm tm;

    char buffer [80];
    char *str = "29/Jan/2012";
    char *end = strptime(str, "%Y/%b/%d ", &tm);
    if (end == NULL || *end != '\0')
        exit(EXIT_FAILURE);
    if (strftime (buffer,80,"%Y-%m-%d",&tm) == 0)
        exit(EXIT_FAILURE);

    printf("%s\n", buffer); // prints 29-01-20

    return 0;
} 
```

请注意，我在`strptime()`模式中添加了一个尾随空格 - 这允许接受输入中的尾随空格。如果您不想允许，请使用您的原始模式。

# php - 在燃料 php 中设置 .htaccess 时返回 404

> ID：10809570
> 
> 赞同：0
> 
> 时间：2012-05-30T03:18:46.720
> 
> 标签：php, .htaccess

当我想在我的电脑上安装 fule php 时遇到问题，问题是当我设置 .htaccess 时，我找不到 404 页面，我在 apache 中设置了 modrewrite 就可以了。

这是我的 .htaccess 文件

```
<IfModule mod_rewrite.c>
    RewriteEngine on

    RewriteBase /public

    RewriteRule ^(/)?$ index.php/$1 [L]

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

我将我的代码放在目录 htdocs/myproject 中。

这是 myproject 目录的路径

```
 myproject/
  .htaccess
  fuel/
    app/
    core/
    packages/
  public/
    assets/
    index.php
  oil 
```

我现在不知道我只是按照[这一步](http://docs.fuelphp.com/installation/instructions.html#/configuration)会发生什么，但我没有得到正确的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T03:34:14.223

从您提供的链接

> 在这种情况下，您需要一个额外的 .htaccess 文件，您需要将其放置在文档根目录中，该文件会将请求重定向到站点根目录到您的公用文件夹，并修改重写以包含公用文件夹：

所以你需要在 myproject 文件夹中有一个 htacess 文件

htaccess 文件中的类似内容

```
RewriteRule ^(.*)$ public/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T03:42:01.687

我可以像这样通过更改 htaccess 来解决...谢谢zvaya ..你帮助我..

```
<IfModule mod_rewrite.c>
        RewriteEngine on

        RewriteBase /myproject/public

        RewriteRule ^(/)?$ index.php/$1 [L]

        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d

        RewriteRule ^(.*)$ index.php/$1 [L]
    </IfModule> 
```

# ios - Flipboard ipad app：右侧菜单面板滑动效果

> ID：10809575
> 
> 赞同：2
> 
> 时间：2012-05-30T03:19:19.377
> 
> 标签：ios, navigationcontroller, addsubview, popover

如何实现如下图的右面板滑动效果？单击左侧区域时，右侧面板被隐藏。

图片网址[http://cdn.thenextweb.com/wp-content/blogs.dir/1/files/2012/02/photo.png](http://cdn.thenextweb.com/wp-content/blogs.dir/1/files/2012/02/photo.png)

我认为

1.  它不是弹出框控制器。
2.  它是使用“addSubview”添加的视图吗？我不这么认为，因为它是一个导航控制器，似乎导航控制器中的视图无法使用addsubview添加
3.  它是模态视图吗？如果是，如何实现半透明背景？如果使用 UIModalPresentationCurrentContext 呈现模态视图，当 ipad 旋转时父视图不能旋转。

非常感谢任何帮助！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T04:59:17.700

这些都可能是高度定制的视图控制器和视图控制器容器。

您可以通过将视图控制器添加为另一个视图控制器的子级来完全控制视图控制器的呈现，并手动将它们的视图添加到视图树中——使用您选择的任何动画。

您看到的调光效果可以通过叠加“调光视图”来实现，例如黑色 50% 不透明视图。

# html - img 不会显示

> ID：10809582
> 
> 赞同：-1
> 
> 时间：2012-05-30T03:20:28.097
> 
> 标签：html, css, anchor, image

所以我很困惑，以前从未见过这样的事情发生。我有一个在 html 中显示 img 的简单链接。当我加载我的页面时，img 不显示。链接或 img 没有应用 CSS。这是我的代码，我只需要从某个地方开始，因为我不知道问题出在哪里。

```
<li>
    <a class="dropDownGif" id="dropDownGifLink" href="#"><img src="../../images/darr.png" /></a>
</li> 
```

编辑：当在 chrome 检查器中拉起时，链接将样式显示为 display:none; 但是，这在我的代码中没有写，当我放入 css 以确保它显示时，它仍然会自动更改为 display:none;。而且 img 路径是正确的，但不确定如何将其更改为绝对路径.. 感谢所有帮助！希望这个额外的信息有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T03:26:54.353

工作正常必须是图像的路径[http://jsfiddle.net/YuqVu/](http://jsfiddle.net/YuqVu/)

使用 Chrome 上的检查元素检查提供的图像及其位置。您可以右键单击->检查元素->单击资源

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T06:45:22.380

除非您应用某种样式，否则您的代码完全没有问题。问题一定是你的图像路径。

# drupal - 如何在 Drupal 6 上实现响应式主题？

> ID：10809586
> 
> 赞同：2
> 
> 时间：2012-05-30T03:21:08.327
> 
> 标签：drupal, drupal-6, drupal-theming

我需要在 Drupal 6 应用程序上实现响应式主题。

你怎么能做到这一点？有哪些可用的主题选项？最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T08:51:14.723

上面提到的选项（Zen、AdaptiveTheme 和 Omega）很棒，但它们需要您实现一个有成本的子主题 - 对于某些网站来说这是不合理的。

我也有很好的使用 Artisteer 为 Drupal 6 站点生成响应主题的经验 - [candida](http://candida.org.il)。响应性和 RTL 支持是自动的，但生成的代码并不小。但如果设计的独特性、低成本和实施速度很重要，这绝对应该被视为一种选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:10:37.797

[Zen](http://drupal.org/project/zen)和[AdaptiveTheme](http://drupal.org/project/adaptivetheme)都是具有 Drupal 6 版本的响应式基础主题。如果不想从头开始构建主题，最快的方法是使用其中一个作为基本主题。

# java - 实现二进制 I/O 的写入方法

> ID：10809587
> 
> 赞同：0
> 
> 时间：2012-05-30T03:21:09.180
> 
> 标签：java, io, binary

我正在尝试使用给定的标头编写读取和写入函数的 java 二进制 I/O。我得到了读取功能，但这里是写入功能的规范。

现在，使用`DataOutputStream`Java 标准库中的类，完成 write 方法，以便将指定的值写入`ArrayList<Object>`文件。该列表应该只包含`Integer`和`Double`对象 - 如果您遇到任何其他类型的对象，您应该抛出一个`IllegalArgumentException`（Java 标准库异常）。此外，应该只存在格式良好的`Integer`组`Double`，即一个`Integer`对象指定后面有多少`Double`对象。如果你有缺失或额外的`Double`值，你也应该抛出一个`IllegalArgumentException`. 您可以使用经过良好测试的读取方法来测试您的写入方法，并查看您是否获得了预期的结果。您可以通过构造来测试抛出 IllegalArgumentExceptions 的逻辑`ArrayList<Object>`具有意外类型或格式错误的 int-double 组的列表。

这是代码....

```
import java.io.*;
import java.util.ArrayList;

public class BinaryReader
{
   private String filename;
   private ArrayList<Object> list;

   public static ArrayList<Object> read(String fileName)
   {
      FileInputStream in = null;
      ArrayList<Object> list = new ArrayList<Object>();

      try
      {
         in = new FileInputStream(fileName);
      }
      catch(FileNotFoundException e)
      {
         System.out.println("File not found");
      }

      DataInputStream data = new DataInputStream(in);

      boolean read = true;
      int number = 0;
      double dbl = 0;

      while(read)
      {
         try
         {
            number = data.readInt();
         }
         catch(EOFException e)
         {
            System.out.println("Caught end of file exception");
            break;
         }
         catch(IOException e)
         {
            System.out.println("Caught");
         }

         list.add(number);

         for(int i = 0; i < number; i++)
         {
            try
            {
               dbl = data.readDouble();
            }
            catch(EOFException e)
            {
               System.out.println("Caught");
            }
            catch(IOException e)
            {
               System.out.println("Caught");
            }

            list.add(dbl);
         }
      }
      return list;
   }

   public static void write(String fileName, ArrayList<Object> list)
   {
      FileOutputStream out = null;

      try
      {
         out = new FileOutputStream(fileName);
      }
      catch(FileNotFoundException e)
      {
         System.out.println("file not found");
      }

      DataOutputStream data = new DataOutputStream(out);
      //int count = 0;
      try
      {//PROBLEM AREAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
         for(int i = 0; i < list.size(); i++)
         {
            data.writeInt((Integer)list.get(i));

            for(int j = 0; j < list.size(); j++)
            {
               data.writeDouble((Double)list.get(i));
            }
         }
      }
      catch(IOException e)
      {
         System.out.println("Caught");
      }

   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T03:28:57.873

可以使用 instanceof 来检查无效对象：

```
if((!(list.get(i) instanceof Integer) || !(list.get(i) instanceof Double)){
  throw new IllegalArgumentException("Only integer and Double Allowed");
} 
```

对于整数-双精度对检查，一旦你得到一个整数，将它的值视为预期计数，然后有一个实际计数，在你再次遇到整数之前的后续迭代中继续增加你的实际计数，当你再次遇到整数时检查是否实际计数 == 预期count 如果不是，则抛出异常，否则使用新的 Integer 值重新初始化 expectedCount。

# android - 不出现警报对话框

> ID：10809591
> 
> 赞同：0
> 
> 时间：2012-05-30T03:22:03.290
> 
> 标签：android, alert, timed

我有一个应用程序，当用户启动应用程序时，计时器就会启动。10 秒后`AlertDialog`会弹出一个说只有 15 秒的铰孔并显示一个计时器，14 秒后它会消失。这在应用程序的第一个活动时工作正常。如果用户从第一个`Activty`-->`TimedNotify` `Activity`计时器在 10 秒后停止。`onUserInteraction()`在`TimedNotify`计时器重新启动并且工作得很好。请帮助我了解我哪里出错了。

```
public class FirstActivity extends TimedNotify{
    @Override 
    public void onCreate(Bundle savedInstanceState) 
    {    
        super.onCreate(savedInstanceState);   
        setContentView(R.layout.timercheck);    
        final Button btnstart2 = (Button) findViewById(R.id.btn);

        btnstart2.setOnClickListener( new OnClickListener() {
            public void onClick(View v) {
                Intent intent = new Intent(FirstActivity.this,
                                       TimedNotify.class);
                 startActivity(intent);
            }
        });
    }
}

public class TimedAlert extends Activity 
{
    static CountDownTimer timer1, timer2;
    int flag = 0;
    protected static final String TAG = null;
    public static AlertDialog alert, alertdialog;
    private static Context context;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        final TextView mCounter1TextField = (TextView) findViewById (R.id.mCounter1TextField);

        // first timer set for 10sec
        timer1 = new CountDownTimer(10000, 1000) 
        {
            @Override
            public void onTick(long millisUntilFinished) 
            {
                Log.v(TAG, "timer1 ticking");
                mCounter1TextField.setText("Seconds left: "
                                            + formatTime(millisUntilFinished));
            }

            public void onFinish() {
                //after 10sec display alert box and show timer 
                Log.v(TAG, "timer1 finished");
                timer1.cancel();
                AlertDialog.Builder builder = new AlertDialog.Builder(
                                    TimedAlert.this);
                builder.setTitle("Session Time Out");
                builder.setMessage("00:15");
                builder.setPositiveButton("Resume", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog2,int iwhich)
                    {
                        Intent in = new Intent(TimedAlert.this,FirstActivity.class);
                        //in case there are many events ..the intent should be passed  to the last activity on clicking resume
                        in.setAction(Intent.ACTION_MAIN);
                        in.addCategory(Intent.CATEGORY_LAUNCHER);
                        onUserInteraction();
                    }
                });

                builder.setNegativeButton ("No", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog2,int iwhich)
                    {
                        timer2.cancel();
                        timer1.start();
                    }
                });

                alert = builder.create();
                alert.show();

                timer2 = new CountDownTimer(15000, 1000) 
                {
                    @Override
                    public void onTick(long millisUntilFinished)
                    {
                        Log.v(TAG, "timer2 ticking");
                        alert.setMessage("Your Session will expire in 5 minutes . Timleft00:"+  (millisUntilFinished / 1000));
                        mCounter1TextField.setText("Seconds left: "+  formatTime (millisUntilFinished));
                    }

                    //after 15 sec dismiss alert box
                    public void onFinish() {
                        Log.v(TAG, "timer2 finished");
                        timer2.cancel();
                        alert.dismiss();
                    }
                }.start();
            }
        }.start();
    }

    @Override
    public void onBackPressed() {
        Intent in = new Intent(TimedAlert.this, FirstActivity.class);
        startActivity(in);
    }

    public String formatTime(long millis) {
        String output = "00:00";
        long seconds = millis / 1000;
        long minutes = seconds / 60;
        seconds = seconds % 60;
        minutes = minutes % 60;
        String secondsD = String.valueOf(seconds);
        String minutesD = String.valueOf(minutes);

        if (seconds < 10)
            secondsD = "0" + seconds;
        if (minutes < 10)
            minutesD = "0" + minutes;
        output = minutesD + " : " + secondsD;
        return output;
    }

    public void onUserInteraction() {
        super.onUserInteraction();
        // Remove any previous callback
        try {
            Log.v(TAG, "user interacted");
            timer1.start();
            timer2.cancel();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        Log.v(TAG, "paused");
        onUserInteraction();
    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();

        Log.v(TAG, "resumed");
        onUserInteraction();
    }

    private void handleIntent(Intent intent) {
        timer1.start();
    }

    @Override
    protected void onStop() {
        // TODO Auto-generated method stub
        super.onStop();

        Log.v(TAG, "stopped");
        timer1.start();
    }

    @Override
    protected void onStart() {
        // TODO Auto-generated method stub
        super.onStart();
        Log.v(TAG, "started");
        timer1.start();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T05:01:22.103

好的，我注意到以下几点可能会对您有所帮助：

```
public void onClick(DialogInterface dialog2, int iwhich) {
    Intent in = new Intent(TimedAlert.this,
            FirstActivity.class);
    in.setAction(Intent.ACTION_MAIN);
    in.addCategory(Intent.CATEGORY_LAUNCHER);

    onUserInteraction();
} 
```

`startActivity(in);`设置完所有参数后你没有。

为什么 do`onPause()`和`onResume()`call `onUserInteraction()`，但`onStart()`又不`onStop()`呢？

实际上，您应该选择是否使用`onPause()`and `onResume()`only 或`onStart()`and `onStop()`。此外，`onPause()`还是`onStop()`不应该重新启动计时器？

进一步考虑您报告的问题，您说当您进行第二项活动时，您遇到了问题。[检查活动的生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)- 我怀疑可能发生的事情是您启动了活动的新实例。尝试将您的清单设置`android:launch mode="singleTask"`为用于您的活动。

# javascript - html 5 canvas javascript下雨动画（如何高效轻松实现！）

> ID：10809599
> 
> 赞同：9
> 
> 时间：2012-05-30T03:22:32.230
> 
> 标签：javascript, html, animation, html5-canvas

我在画布上尝试了这两种方法，但没有显示，我也怀疑它是否有效：/。我正在尝试从屏幕上下雨……想知道最有效的方法是什么。我是动画的初学者，非常感谢帮助。

我怀疑创建一个雨对象是最好的，每个对象的质量都是从屏幕上下来然后到顶部，然后是一个数组......也许是随机的 x 值，画布宽度和 y 值为 0 但我不知道如何实现。请帮忙！

```
 xofRain = 20;
        startY = 0;
        ctx.beginPath();
        ctx.moveTo(xofRain, startY);
        ctx.lineTo(xofRain, startY + 20);
        ctx.closePath();
        ctx.fillStyle = "black"; 
        ctx.fill();

     function rain(xofRain){

        startY = canvas.height();

        ctx.moveTo(xofRain, startY);
        ctx.beginPath();
        ctx.lineTo(xofRain, startY + 3);
        ctx.closePath();
        ctx.fillStyle = "blue"; 
        ctx.fill();
    } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-30T06:10:31.187

你的答案来了，这场雪雨是使用纯 HTML5 Canvas 制作的，用于实现此动画的技术称为“双缓冲动画”。首先了解什么是双缓冲动画技术是件好事。

双缓冲技术：这是一种先进的技术，可以使动画清晰并减少闪烁。在该技术中使用了 2 个 Canvas，一个显示在网页上以显示结果，另一个用于在支持的过程中创建动画屏幕。

这将如何帮助充分，假设我们必须创建一个移动次数非常多的动画，就像在我们的 Snow Fall 示例中，有许多 Flakes 以自己的速度移动，所以保持它们移动，我们必须改变位置每个薄片并在画布上更新它，这是一个相当繁重的处理过程。

所以现在不是直接在我们的页面画布上更新每个 Flake，我们将创建一个缓冲区画布，所有这些更改都在其中发生，我们只需在 30 毫秒后从缓冲区画布中捕获一张图片并将其显示在我们的真实画布上。

这样我们的动画就会很清晰，没有闪烁。所以这里有一个活生生的例子。

[http://aspspider.info/erishaan8/html5rain/](http://aspspider.info/erishaan8/html5rain/)

这是它的代码：

```
 <!DOCTYPE html>
    <html>
    <head>
    <meta charset=utf-8 />
    <title>HTML5 Rain</title>
    <!--[if IE]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <style>
      article, aside, figure, footer, header, hgroup, 
      menu, nav, section { display: block; }
    </style>
    <script type="text/javascript">
        var canvas = null;
        var context = null;
        var bufferCanvas = null;
        var bufferCanvasCtx = null;
        var flakeArray = [];
        var flakeTimer = null;
        var maxFlakes = 200; // Here you may set max flackes to be created 

        function init() {
            //Canvas on Page
            canvas = document.getElementById('canvasRain');
            context = canvas.getContext("2d");
            //Buffer Canvas
            bufferCanvas = document.createElement("canvas");
            bufferCanvasCtx = bufferCanvas.getContext("2d");
            bufferCanvasCtx.canvas.width = context.canvas.width;
            bufferCanvasCtx.canvas.height = context.canvas.height;

            flakeTimer = setInterval(addFlake, 200);

            Draw();

            setInterval(animate, 30);

        }
        function animate() {

            Update();
            Draw();

        }
        function addFlake() {

            flakeArray[flakeArray.length] = new Flake();
            if (flakeArray.length == maxFlakes)
                clearInterval(flakeTimer);
        }
        function blank() {
            bufferCanvasCtx.fillStyle = "rgba(0,0,0,0.8)";
            bufferCanvasCtx.fillRect(0, 0, bufferCanvasCtx.canvas.width, bufferCanvasCtx.canvas.height);

        }
        function Update() {
            for (var i = 0; i < flakeArray.length; i++) {
                if (flakeArray[i].y < context.canvas.height) {
                    flakeArray[i].y += flakeArray[i].speed;
                    if (flakeArray[i].y > context.canvas.height)
                        flakeArray[i].y = -5;
                    flakeArray[i].x += flakeArray[i].drift;
                    if (flakeArray[i].x > context.canvas.width)
                        flakeArray[i].x = 0;
                }
            }

        }
        function Flake() {
            this.x = Math.round(Math.random() * context.canvas.width);
            this.y = -10;
            this.drift = Math.random();
            this.speed = Math.round(Math.random() * 5) + 1;
            this.width = (Math.random() * 3) + 2;
            this.height = this.width;
        }
        function Draw() {
            context.save();

            blank();

            for (var i = 0; i < flakeArray.length; i++) {
                bufferCanvasCtx.fillStyle = "white";
                bufferCanvasCtx.fillRect(flakeArray[i].x, flakeArray[i].y, flakeArray[i].width, flakeArray[i].height);
            }

            context.drawImage(bufferCanvas, 0, 0, bufferCanvas.width, bufferCanvas.height);
            context.restore();
        }

    </script>
    </head>
    <body onload="init()">
      <canvas  id="canvasRain" width="800px" height="800px">Canvas Not Supported</canvas>
    </body>
    </html>
```

此外，如果您发现此帮助已满，请接受作为答案并弥补。o_O

干杯！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-20T10:54:56.693

我不确定什么是“最有效”。如果是我，我会在 WebGL 中进行，但我不清楚这是否有效。

无论哪种情况，我都会尝试使用无状态公式。可以说为每个雨滴创建和更新状态很慢。

```
const ctx = document.querySelector("canvas").getContext("2d");
const numRain = 200;

function render(time) {
  time *= 0.001;  // convert to seconds

  resizeCanvasToDisplaySize(ctx.canvas);

  const width = ctx.canvas.width;
  const height = ctx.canvas.height;
  ctx.fillStyle = "black";
  ctx.fillRect(0, 0, width, height);  

  resetPseudoRandom();

  const speed = time * 500;
  ctx.fillStyle = "#68F";
  for (let i = 0; i < numRain; ++i) {
    const x = pseudoRandomInt(width);
    const y = (pseudoRandomInt(height) + speed) % height;
    ctx.fillRect(x, y, 3, 8);
  }

  requestAnimationFrame(render);
}

requestAnimationFrame(render);

let randomSeed_ = 0;
const RANDOM_RANGE_ = Math.pow(2, 32);

function pseudoRandom() {
  return (randomSeed_ =
          (134775813 * randomSeed_ + 1) %
          RANDOM_RANGE_) / RANDOM_RANGE_;
};

function resetPseudoRandom() {
  randomSeed_ = 0;
};

function pseudoRandomInt(n) {
  return pseudoRandom() * n | 0;
}

function resizeCanvasToDisplaySize(canvas) {
  const width = canvas.clientWidth;
  const height = canvas.clientHeight;
  if (canvas.width !== width || canvas.height !== height) {
    canvas.width = width;
    canvas.height = height;
  }
}
```

```
body { margin: 0; }
canvas { width: 100vw; height: 100vh; display: block; }
```

```
<canvas></canvas>
```

请注意，我可以`ctx.moveTo(x, y); ctx.lineTo(x, y + 8);`对每一行使用，然后在循环结束时调用`ctx.stroke()`. 我没有这样做，因为我假设它的效率会低于使用`ctx.fillRect`. 为了让画布绘制线条，它实际上必须分配一个动态路径（您调用`ctx.beginPath`）。然后它必须记录您添加的所有行。然后它必须将这些线扩展为各种顶点以栅格化这些线。你基本上[可以在这里看到它使用的各种算法](https://mattdesl.svbtle.com/drawing-lines-is-hard)。相反，这一切都不必发生`ctx.fillRect`. 不必发生分配（不是说它们不会发生，只是说它们不必发生）。画布可以只使用一个预先分配的四边形并通过传递正确的矩阵来在 GPU 上绘制它，以绘制您要求的任何矩形。当然，调用`ctx.fillRect`200 次而不是`ctx.moveTo`, `ctx.lineTo`200s +`ctx.stroke`一次的开销可能更大，但这实际上取决于浏览器。

上面的雨可能是也可能不是足够好的降雨效果。那不是我发帖的真正目的。重点是效率。几乎所有具有某种下雨效果的游戏都为他们的下雨做了某种无状态公式。不同的公式会产生不同的或更少重复的雨。关键是它是无国籍的。

# mysql - 如何创建将在 MySQL 中插入大量文本特殊字符的查询

> ID：10809600
> 
> 赞同：1
> 
> 时间：2012-05-30T03:23:10.940
> 
> 标签：mysql, url, decode

**信息：**我正在使用 [ MySQL 5.5.16 ]-[ PHP 5.3.8 ]-[ jqSajax 1.0.2 ]-[ JQuery 1.2.2 ]

PHP、MySQL、Apache 和 HTML 标头是字符集 UTF-8

我已经为此工作了三天。

一个数据库：

tblitems InnoDB

tblarticles MyISAM 全文

**问题：**我无法通过简单的插入来插入大量文本，因为我有特殊字符“”“'' - ...</p>

**问题：**如何将大量文本插入带有特殊字符“”“'”的 LONGTEXT 字段 - ...

**搜索/尝试：**见下面的代码和底部的 MySQL 输出

在 Javascript AJAX 中编码 encodeURL()

decode IN PHP urldecode() 构建 SQL Query

**代码：**

**=========== 创建javascript ==========**

```
<?php //calls php function through jqsajax
    $strOnClickString = "$('#none').html(";
    $strOnClickString .=  '$.x_Add_Item(';
    //$strOnClickString .=  "$('#sel_txtPublication').val()"; //$strPublication
    $strOnClickString .=    "'Co-Worker Letters'"; //$strPublication
    $strOnClickString .=    ", $('#sel_txt_Title').val()";    //$strTitle
    $strOnClickString .=    ", $('#sel_txtMonth').val()";     //$strMonth
    $strOnClickString .=    ", $('#sel_txtYear').val()";      //$strYear
    $strOnClickString .=    ", $('#sel_txtAuthor').val()";    //$strAuthor
    $strOnClickString .=    ", encodeURI($('#strArticle').val())";       //$strArticle
    $strOnClickString .=    '))';   

echo Create_Input('button','Submit Text','10','btnSubmit','btnSubmit','onclick',$strOnClickString); ?> 
```

**========= PHP 创建 SQL ===========**

```
//=========================================================================
    function Add_Item($strPublication, $strTitle, $strMonth, $strYear, $strAuthor, $strArticle){
//=========================================================================
             $sql1 = "";
             $sql = "";

            $sql1 = "INSERT INTO `hwa_archive`.`tblarticles`";
            $sql1 .= "(`strArticle`)";
            $sql1 .= " VALUES (";
        if ($strArticle != 'ignore')
            {
            $sql1 .= '"' . urldecode($strArticle) . '", ';
            }
            $sql1 .= ")";
            $sql1 = str_replace('", )','" )',$sql1);
            $res2 = mysql_query($sql1);
            //$res2 = mysql_query('SELECT LAST_INSERT_ID()');           

            $intArticle_ID = mysql_insert_id();

            $sql = "INSERT INTO `hwa_archive`.`tblitems`";
            $sql .= "(`strPublication`, `strTitle`, `strMonth`, `strYear`, `strAuthor`, `intArticle_ID`)";
            $sql .= " VALUES (";
        if ($strPublication != 'ignore')
            {
            $sql .= "'$strPublication', ";
            }
        if ($strTitle != 'ignore')
            {
            $sql .= "'$strTitle', ";
            }
        if ($strMonth != 'ignore')
            {
            $sql .= "'$strMonth', ";
            }
        if ($strYear != 'ignore')
            {
            $sql .= "'$strYear', ";
            }
        if ($strAuthor != 'ignore')
            {
            $sql .= "'" . $strAuthor . "', ";
            }

        $sql .= "'$intArticle_ID', ";

            $sql .= ")";
            $sql = str_replace("', )","' )",$sql);
            $res2 = mysql_query($sql);

    Return $intArticle_ID .  "<br /><br />" . $sql .  "<br /><br />" . $sql1;       

    } 
```

**MySQL 输出：**

您在世界网络中的角色（必须是单引号'）

您在世界%u2019s 网络中的角色（%u2019 需要是一个单引号'）在 add_item 中没有解码

我希望这个信息不会矫枉过正。

# java - 重复调用 Java 函数

> ID：10809602
> 
> 赞同：3
> 
> 时间：2012-05-30T03:23:39.270
> 
> 标签：java

我不是 CS 专家，也不是 Java 专家，所以如果以下问题的答案很明显，请见谅：

我已经构建了一个类来处理向 HTTP 服务器发送查询、获取响应并将响应返回给调用者。

我的问题是这个；如果我调用该函数一次，并且响应需要很长时间，并且在延迟期间，我再次调用它，延迟的第一个调用会干扰第二个调用的执行吗？

应大众需求...这里有一些源代码：

```
package com.cambrothers.wms.module;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.URL;
import java.net.URLConnection;
import java.util.HashMap;

public class ServerComm {
public HashMap<String, String> sendData(String endpoint, String requestParameters){
    HashMap<String, String> response_data = new HashMap<String, String>();

    System.out.println("GetRequest");
    if (endpoint.startsWith("http://"))
    {
        // Send a GET request to the servlet
        try
        {

            // Send data
            String urlStr = endpoint;
            if (requestParameters != null && requestParameters.length () > 0)
            {
                urlStr += "?" + requestParameters;
            }
            URL url = new URL(urlStr);
            URLConnection conn = url.openConnection ();

            // Get the response
            BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
            StringBuffer sb = new StringBuffer();
            String line;
            while ((line = rd.readLine()) != null)
            {
                sb.append(line);
            }
            rd.close();
            String result = sb.toString();
            String[] values = result.split("&");
            String[] kp = null;
            for(int i =0; i < values.length ; i++){
                kp = values[i].split("=");
                response_data.put(kp[0], kp[1]);
            }

        } catch (Exception e)
        {
            e.printStackTrace();
        }
    }

    return response_data;
}
} 
```

小心

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T03:45:19.087

您所描述的复杂程度超过了典型的初学者到中级程序员在大学课程之外所承担的复杂程度，这很好。但是让我们看看你的问题意味着什么。

你说“我调用了那个函数一次，响应时间很长。” 所以我认为可以安全地假设您正在使用一个同步请求函数，该函数在响应从服务器返回之前不会返回。

然后你说“在延迟期间，我再次调用它”。这意味着您正在使用[threading](http://en.wikipedia.org/wiki/Thread_%28computing%29)，这是我在[此 SO answer](https://stackoverflow.com/a/9493446/960195)中详细描述的概念。如果您不熟悉，请立即停止，阅读线程并*真正理解它们*，然后再尝试编写您的问题描述的代码。熟悉的？继续阅读。

现在到你的实际问题。

> 延迟的第一个呼叫会干扰第二个呼叫的执行吗？

[不，从内核和 JVM 的角度来看](http://blogs.msdn.com/b/oldnewthing/archive/2011/05/12/10163578.aspx)不会有干扰，因为单独的线程是单独执行的。但是，从实际的角度来看，是否会有干扰完全取决于您的代码。 [线程安全](http://en.wikipedia.org/wiki/Thread_safety)是一个很大的话题，无法在单个 StackOverflow 答案中解释，但它是这里的关键。不过，我可以给出一些指示。请记住，这些指针指的是执行 HTTP 获取的函数。

1.  如果您的 HTTP 获取函数是[可重入](http://en.wikipedia.org/wiki/Reentrant_%28subroutine%29)的，它会自动成为线程安全的。要可重入，该函数不得引用任何可能发生变异的静态或全局数据，并且不得调用任何不可重入代码。您的函数很可能没有引用静态数据，但您使用的 HTTP 库不是可重入的，因此您的 HTTP 获取函数也不是可重入的。

2.  如果您的 HTTP 获取函数和/或其调用者使用正确的锁定（正确锁定通常是一个非常困难的问题，大学课程可能会花费两周的时间讲授锁定、避免死锁等），整个过程是线程安全的. 我知道“适当的锁定”被定义为“使进程线程安全的锁定”，所以这并不是很有帮助，但更有用的规则是锁定任何[关键部分](http://en.wikipedia.org/wiki/Critical_section)。如果两个线程可能访问（并且一个或两个线程可能会发生变异）共享资源，那么您需要锁定对该共享资源的访问。请注意，您不仅需要锁定对资源的写访问权限，还需要锁定读访问权限。

3.  如果您使用更奇特的结构，例如无锁数据结构，并且您显示了正确性，那么您的程序就是正确的。不过，这些更难做到。

请注意，如果您的所有程序数据和资源都是不可变的，则默认情况下所有函数都是可重入的，这意味着您的程序自动是线程安全的。在实践中，所有数据和资源都完全不可变的程序有一些不足之处，但是如果您将可变性限制在程序的一个小区域并证明该区域的线程安全性，那么您的整个程序仍然是线程安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T03:27:21.327

是和否。但我看到这是标记为 Java，假设您正在调用 HTTP Servlet？

应用程序服务器将产生/获取一个池线程来服务每个单独的调用/请求。

您的用户特定实现的其余部分（例如修改/访问静态对象）将确定您的新调用是否影响您以前的调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T03:27:22.963

```
will the delayed first call interfere with the execution of the second call? 
```

这完全取决于您的函数和服务器代码（HTTP 服务器）的实现。没有更多信息是不可能回答这个问题的。

# clojure - Clojure 扩展了哪些信息？真的给我吗？

> ID：10809614
> 
> 赞同：1
> 
> 时间：2012-05-30T03:25:31.140
> 
> 标签：clojure, protocols

我最近问为什么在 clojure 中不能完全实现接口和协议：

```
user=> (defprotocol P (foo [self]))
P
user=> (extend-type Long P)
nil
user=> (extends? P Long)
true
user=> (foo 1)
IllegalArgumentException No implementation of method: :foo of protocol: #'user/P found for class: java.lang.Long  clojure.core/-cache-protocol-fn (core_deftype.clj:527) 
```

并被告知这是出于互操作的原因，实际上这不会成为问题。当然。

但显然`extends?`真的没有告诉我协议和类之间的关系：正如`(extends? P C)`并不意味着我可以调用`foo`C 类的对象，`(not (extends? P C))`也不意味着我不能调用`foo`C 类的对象：

```
user=> (defprotocol P (foo [self]))
P
user=> (extend-type Object P (foo [self] 1))
nil
user=> (extends? P Long)
false
user=> (foo 1)
1 
```

现在我很困惑`extends?`应该给我什么信息...... `satisfies?`另一方面，正确处理第二种情况，但不是第一种。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T04:07:12.993

如有疑问，请检查代码:)。的实现`extends?`是这样的：

```
(defn extends? 
  "Returns true if atype extends protocol"
  {:added "1.2"}
  [protocol atype]
  (boolean (or (implements? protocol atype) 
               (get (:impls protocol) atype)))) 
```

所以它只是检查是否`atype`已经被协议扩展，并不意味着它已经实现了协议的所有方法。

这`:impls`是一个映射，其中键是扩展协议的类型，值是映射，它具有该类型协议的方法实现。

```
user=> (defprotocol hello (a [self]))
hello
user=> (:impls hello)
nil
user=> (extend-type String hello)   
nil
user=> (:impls hello)            
{java.lang.String {}}
user=> (extend-type String hello (a [self] 10)) 
nil
user=> (:impls hello)                          
{java.lang.String {:a #<user$eval613$fn__614 user$eval613$fn__614@1d978ea>}} 
```

另一方面，`satisfies?`您需要传递要检查协议的对象，而不是类型，`extends?`因此如果您查看`satisfies?`代码，则它要复杂`extends`一些，因为它必须检查的基类被协议扩展的对象。但是这两个函数都只是检查类型（或基类型）是否扩展了协议，并且它们不检查您是否实际实现了协议方法。

# python - Ploneformgen 动态填充选择字段

> ID：10809616
> 
> 赞同：1
> 
> 时间：2012-05-30T03:26:08.517
> 
> 标签：python, plone, zope, ploneformgen

我正在尝试通过动态填充选择字段来自定义 ploneformgen 表单。我需要解析文件系统上的文件并根据日期和时间选择某些选项。创建 python 脚本很简单，但是我在哪里放置脚本呢？

1.  据我了解，外部方法不是 plone 4 中的首选
2.  我试图通过 ZMI 添加一个 python 脚本，但后来我被受限 python 击中，我的脚本无法执行。
3.  我开发了一个插件并将其放在eggs文件夹中，然后编写了一个python脚本来调用插件中的代码，但不幸的是，我再次遇到与以前相同的错误“您没有足够的权限查看这个页”。据我了解，插件内的代码不受限制，或者？

实现表单定制的最佳选择是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T07:59:11.200

如果您使用了皮肤脚本，那么是的，它也作为受限 python 运行。它是 ZMI python 脚本的文件系统存储等价物。

最佳做法是使用[浏览器视图](http://collective-docs.readthedocs.org/en/latest/views/browserviews.html)；它只是一个可调用的对象，具有与之关联的请求和上下文：

```
from zope.publisher.browser import BrowserView

class MyBrowserView(BrowserView):
    def __call__(self):
        request = self.request
        context = self.context
        # Do something with the request and context 
```

在您的 configure.zcml 中注册：

```
<browser:view
    for="*"
    name="mybrowserview"
    class=".views.MyBrowserView"
    permission="zope2.Public"
    /> 
```

之后它将可`someobject/@@mybrowserview`用于 PloneFormGen。

但是，如果这是您为其创建自定义包的唯一内容，那么请务必使用外部方法。

# wpf - 当有人单击我的数据模板 WPF 中的按钮时，如何获取相应的数据项？

> ID：10809617
> 
> 赞同：0
> 
> 时间：2012-05-30T03:26:15.443
> 
> 标签：wpf, user-controls, wpf-controls, wpfdatagrid

我是 WPF 的新手，我需要制作应用程序来显示 Windows 中安装的所有程序。我找到了这个[布局](http://www.codeproject.com/Articles/15705/FishEyePanel-FanPanel-Examples-of-custom-layout-pa)并开始在鱼眼面板中工作，但问题是我想在布局中显示按钮而不是图像，所以我开始弄清楚如何做到这一点，我开始显示按钮而不是带有下一个代码的图片：

```
<Setter Property="ContentTemplate">
    <Setter.Value>
        <DataTemplate>
            <Button Margin="5" Padding="5" HorizontalContentAlignment="Center"
                    Command="{Binding Command}" Width="{Binding XPath=@Width}"
                    Height="{Binding XPath=@Height}" Content="App"/>
        </DataTemplate>
    </Setter.Value>
</Setter> 
```

我的问题是：如何将每个按钮绑定到相应的操作？我怎么知道按下了哪个按钮或按钮的 id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T03:41:05.030

你需要`TemplatedParent`在我的脑海中使用。该`TemplatedParent`属性为您提供了应用此模板的项目。使用此代码

```
 <Button Margin="5" Padding="5" HorizontalContentAlignment="Center"
         Command="{Binding RelativeSource={RelativeSource Mode=TemplatedParent} , Path=Command}"
         Width="{Binding XPath=@Width}" Height="{Binding XPath=@Height}"
         Content="App"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T04:33:20.497

参考以下，

[http://www.actiprosoftware.com/community/thread/3513/using-button-in-datatemplate-binding-command](http://www.actiprosoftware.com/community/thread/3513/using-button-in-datatemplate-binding-command)

# django - Django - 将额外的参数传递给upload_to可调用函数

> ID：10809620
> 
> 赞同：5
> 
> 时间：2012-05-30T03:26:36.953
> 
> 标签：django, django-models

我知道您可以使用upload_to 参数传递一个可调用函数来动态更改Django 模型中的FileFied/ImageField 等。

upload_to 调用的函数传递了 2 个变量，即未保存在数据库中的文件的实例（实例）和所述实例的文件名（文件名）。

如果我在模型中使用 ImageField 以及其他（Char 等）字段，是否可以将这些字段中的值获取到相同的可调用函数中。

例如。

```
class Badge(models.Model):

  def format_badge_name(instance, filename):
    _filetype = os.path.splitext(filename)[1]
    _category = 'foo'
    _name = os.path.splitext(filename)[0]
    _filename = "%s-%s-%s%s" % (_category, _name, 'private', _filetype)

    return "badges/%s" % _filename

  name = models.CharField(max_length=16, help_text="Name for Badge")
  file = models.ImageField(upload_to=format_badge_name) 
```

是否可以将 name (self.name?) 中的值传递给 format_badge_name？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-30T05:01:24.730

`instance`变量是`Badge()`实例。你可以像往常一样访问它的属性

```
def format_badge_name(instance, filename):
    instance.name
    instance.file
    ... 
```

您可以将 命名为`instance` `'self'`，这样可能更容易理解：

```
def format_badge_name(self, filename):
    self.name
    self.file
    ... 
```

# javascript - Asp.Net Page JavaScript 警报命令改变程序行为

> ID：10809623
> 
> 赞同：0
> 
> 时间：2012-05-30T03:26:55.417
> 
> 标签：javascript, asp.net, google-maps

我是 JavaScript 新手。

编写使用 GooogleMaps API 的脚本

工作正常。从数据库中获取纬度，制作标记，放在地图上。

决定将函数调用向上移动一个级别，（它在 PageMethod 调用的 OnSuccess 方法中）。停止工作。

放入警报以进行诊断。开始工作。

缩小到在调用函数 MakeLatLngs() 的顶部有警报。

无论警报是否存在或被注释掉，MakeLatLngs 代码似乎都会执行。只是地图显示带有警报语句，而不显示带有注释掉的警报语句。警报只是文本，不使用任何变量。所以我不知道这里发生了什么。

同样的事情也发生在绘制地图 DrawMap() 的函数中。我在函数开始时放置了一个信息警报，然后地图绘制了。把它放在外面，地图不会。

任何有关正在发生的事情的线索将不胜感激？

脚本如下。流程从脚本底部的函数 Initialise 开始。谢谢

```
 var myPositions = [];
     var myRoutes = [];
     var myString = [];
     var myLatLngs = [];
     var myTitles = [];
     var NumPoints;
     var map;
     var poly;
     var RouteName;
     var myMarkers = [];
     var myMapCentre = new google.maps.LatLng(-41.2954168187213, 174.767133718655);
     function DrawMap() {
         alert("Generating Points for " + RouteName);// Need this to display
         var thisLatLng = myLatLngs[0];

         var myOptions = {
             zoom: 8,
             center: thisLatLng,
             mapTypeId: google.maps.MapTypeId.ROADMAP
         };

         map = new google.maps.Map(document.getElementById('map_canvas'),
        myOptions);

         MakeMarkers();
         RouteLine();
     }

     function OnSuccess1(response) {
         myPositions = new Array();

         myString = response;

         NumPoints = response.length;
         for (var i = 0; i < NumPoints; i++) {
             myPositions[i] = response[i];

         }
     }
     function OnError1(response) {
     }

     function Marker()
     {
     this.meterId=0;
     this.latLng="";
     }
     function OnSuccess(response) {
         myPositions = new Array();

         myString = response;

         NumPoints = response.length;
         alert("Numpoints is " + NumPoints);
         for (var i = 0; i < NumPoints; i++) {
             myPositions[i] = response[i];

         }
         alert("Exiting OnSuccess");
         //MakeLatLngs(); //ORIGINAL POSITION OF LATLNG CALL
         return true;
     }

     function setRoute() {
     RouteName = prompt(' What route?', '');

     }

     function OnError(error) {
         alert("In Error");
     }
     function RouteLine() {
         var polyOptions = {
             strokeColor: '#000000',
             strokeOpacity: 1.0,
             strokeWeight: 3
         }
         poly = new google.maps.Polyline(polyOptions);
         poly.setMap(map);
         var path = poly.getPath();
         for (var i = 0; i < NumPoints; i++) {
             path.push(myLatLngs[i]);
         }

     }

     function MakeLatLngs() {
         alert("You need me now " );//Got to have this to display OK when called from LoadData
         myLatLngs = new Array();
         for (var i = 0; i < NumPoints; i++) {

             var sMarker = myPositions[i];

             var SeqPos = sMarker.indexOf(";");
             var latLngPos = sMarker.indexOf(";", SeqPos + 1);
             var marker = sMarker.substring(0, latLngPos);
             //alert("Marker is " + marker);
             //var Seq = sMarker.substring(latLngPos + 1, SeqPos - latLngPos);
             myTitles[i] = marker;
             //alert("MeterId is " + marker);
             var sLatLng = sMarker.substring(latLngPos + 1)
             //alert("SLatLng is " + sLatLng);
             var pos = sLatLng.indexOf(",");
             //alert("pos is " + pos);
             var sLat = sLatLng.substring(0, pos);
             //alert("sLat is " + sLat);
             var sLng = sLatLng.substring(pos + 1, sLatLng.length - 1);
             //alert("sLng is " + sLng);
             var lat = parseFloat(sLat);
             var lng = parseFloat(sLng);

             //alert("Lat is " + lat + " Long is " + lng);
             if (!isNaN(lng) && !isNaN(lat) && lat != 0 && lng != 0 ) {
                 var latlng = new google.maps.LatLng(lat, lng);
                 myLatLngs[i] = latlng;
             }

         }
         alert("Exiting MakeLatLngs")

     }

     function MakeMarkers() {

         for (var i = 0; i < NumPoints; i++) {
             var sTitle = "MyValue " + i;
             var marker = new google.maps.Marker({
                 position: myLatLngs[i],
                 map: map,
                 title: myTitles[i]
             });
         }
     }

     function LoadData() {

         setRoute();//Get the desired route from the user
         PageMethods.GetMarkers(RouteName, OnSuccess, OnError);
         MakeLatLngs(); //Works here ONLY WHEN AN ALERT IS FIRST LINE in FUNCTION. Orginal call was at end of OnSuccess
         //PageMethods.GetRouteBoundaries(OnSuccess1, OnError1);
         return false;
     }

     function initialize() {

         LoadData();
         DrawMap();
     }

     google.maps.event.addDomListener(window, 'load', initialize);//yes you do need this with or without <body onload="initialise"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T03:35:57.130

原因是您的*PageMethods.GetMarkers是异步的，因此在您调用**DrawMap*时尚未加载数据。我猜当您使用警报时，它会暂停执行足够长的时间以加载数据。将*DrawMap*方法放在页面方法的*OnSuccess*中，应该可以解决问题。

# c# - 我可以使用 Global.asax 的静态属性作为 log4net 记录器吗？

> ID：10809624
> 
> 赞同：0
> 
> 时间：2012-05-30T03:27:07.937
> 
> 标签：c#, asp.net, log4net

我想做这样的事情：

```
<script RunAt="server">

private static log4net.ILog _logger = null;
public static log4net.ILog Logger
{ get { return _logger; } }

protected void Application_Start(object sender, EventArgs e)
{
    // Code that runs on application startup
    log4net.Config.XmlConfigurator.Configure();
    _logger = log4net.LogManager.GetLogger("DtWebLogger");
}

....
</script> 
```

我想知道在此之后我可以在每个页面中使用相同的记录器对象。

那么，这可能吗？或者我在哪里可以即时创建 Logger 的全局实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T03:33:47.380

您不想要 Logger 的全局实例。相反，您希望每堂课一个。您要记录的每个类都应具有以下内容：

```
private static readonly log4net.ILog _logger = log4net.LogManager.GetLogger(typeof(MyClass)); 
```

类型信息用作记录器输出的一部分。您还可以创建自己的类来包装 ILog，并为您提供一个构造函数，该构造函数从 StackFrame 中提取当前类的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T03:33:26.350

您的 inited 是正确的，并且 log4net.LogManager.GetLogger 已经使用了一个实例，无需再次使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-02T12:05:07.503

您可以将其声明为属性并像这样使用：

```
private static readonly log4net.ILog Log = log4net.LogManager     
.GetLogger(.Reflection.MethodBase.GetCurrentMethod().DeclaringType); 
```

如前所述，您不需要全局记录器。声明嵌套范围。

# ruby-on-rails - 如何将这些对象分组到哈希中？

> ID：10809629
> 
> 赞同：0
> 
> 时间：2012-05-30T03:27:38.563
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有一个事件模式，其中有一个`datetime`名为`scheduled_time`. 我需要创建一个散列，其中具有某种格式的日期名称（'mon'、'tue' 等）作为键，并将当天发生的事件计数作为值。我怎样才能做到这一点？

```
{
    'mon' => 2,
    'tue' => 4,
    'wed' => 3,
    'thu' => 5,
    'fri' => 12,
    'sat' => 11,
    'sun' => 7,
} 
```

我正在使用 Rails 3.2.0 和 Ruby 1.9.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T03:47:45.147

最简单的方法是使用`count`一个`:group`选项：

```
h = Model.count(:group => %q{to_char(scheduled_time, 'dy')}) 
```

像往常一样，您要 GROUP BY 的特定功能取决于数据库；上面的[`to_char`](http://www.postgresql.org/docs/current/static/functions-formatting.html#FUNCTIONS-FORMATTING-TABLE)方法适用于 PostgreSQL，你可以使用 MySQL[`date_format`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)和[`lower`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_lower)：

```
h = Model.count(:group => %q{lower(date_format(scheduled_time, '%a'))}) 
```

对于 SQLite，您可能会使用[`strftime`](http://www.sqlite.org/lang_datefunc.html)格式`%w`，然后手动将数字转换为字符串。

请注意， using`Model.count(:group => ...)`会给你一个带有漏洞的哈希：如果那天表中没有任何条目，那么哈希将没有它的密钥。如果您真的一直想要七个键，那么创建一个带有零的哈希：

```
h = { 'mon' => 0, 'tue' => 0, ... } 
```

然后将`count`结果合并到其中：

```
h.merge!(Model.count(:group => ...)) 
```

# mongoid - 使用 mongoid 的 has_and_belongs_to_many 和 inverse_of 的权衡是什么

> ID：10809636
> 
> 赞同：7
> 
> 时间：2012-05-30T03:29:22.790
> 
> 标签：mongoid

在文档中它说你可以使用 inverse_of: nil 但并没有真正描述用例： http: [//mongoid.org/en/mongoid/docs/relations.html#has_and_belongs_to_many](http://mongoid.org/en/mongoid/docs/relations.html#has_and_belongs_to_many)

我假设它在一个对象有很多另一个对象的情况下很有用，所以你可以用 inverse_of nil 完全跳过那一侧并节省一些存储空间对吗？

例如：

```
class Post
  has_and_belongs_to_many :tags
end

class Tag
  has_and_belongs_to_many :posts, inverse_of: nil
end 
```

一个标签可能属于数百或数千个帖子，但一个帖子可能只有 5 个标签左右。

那么这是一个很好的用例吗？我想你仍然可以做

```
tag.posts 
```

等正常，主要的权衡是它改变了查询：

```
Post.find(tag.post_ids) 
```

进入

```
Post.where(tag_ids: tag.id) 
```

如果您在 tag_ids 上有一个索引，它似乎仍然会很快。所以也许最好的是：

```
class Post
  has_and_belongs_to_many :tags, index: true
end

class Tag
  has_and_belongs_to_many :posts, inverse_of: nil
end 
```

只是想检查一下我的想法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T07:27:49.117

你当然得到了正确的用例，但示例似乎被重新设计了。您的模型应如下所示：

```
class Post
  has_and_belongs_to_many :tags, inverse_of: nil, index: true
end

class Tag
  # you don't want this side as a tag can be related to 1000s of posts
end 
```

您可以使用帖子中的关联，但对于标签，您必须自己创建查询。

```
post.tags                    # get tags for a post
Post.where(tag_ids: tag.id)  # find posts for a tag 
```

# java - 如何创建一个可以在运行任务之前执行锅炉代码的执行器？

> ID：10809637
> 
> 赞同：1
> 
> 时间：2012-05-30T03:29:23.020
> 
> 标签：java

我正在尝试设置一个并发结构，其中应该在某种类型的任务之前执行一些样板代码（以检查前置条件）。换句话说，我想在 Executor 将任务出列之后，但在它调用 execute 之前运行代码。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T04:12:05.043

使用装饰器？

```
public class TestExecutor{
    public static void main(String[] args){
        Executor e = Executors.newCachedThreadPool();
        e = new PreconditionCheckerExecutor(e){
            @Override
            protected void checkPrecondition(Runnable command){
                //do some precondition
            }
        };
        e.execute(/*myRunnable1*/);
        e.execute(/*myRunnable2*/);

    }
}
abstract class PreconditionCheckerExecutor implements Executor
{
    private final Executor executor;

    PreconditionCheckerExecutor(Executor executor) {
        this.executor = executor;
    }

    @Override
    public void execute(Runnable command) {
        checkPrecondition(command);
        executor.execute(command);
    }

    protected abstract void checkPrecondition(Runnable command);
} 
```

您可以根据需要使其更具体（例如，通过 ExecutorService 替换 Executor）。

# ms-access - 用于插入参数查询的 trim 和 ucase 函数

> ID：10809642
> 
> 赞同：0
> 
> 时间：2012-05-30T03:30:51.000
> 
> 标签：ms-access

请给我 SQL 以将此参数附加查询中的文本转换为大写，并从前缀和后缀中删除空格。非常感谢你，纳撒尼尔

```
INSERT INTO tbl_New_part_ID_input ( new_part_ID ) 
```

SELECT [请以大写形式输入 part_ID] AS Expr1;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:22:05.733

您可以在查询中使用任何 SQL 或 VBA 函数。例如

```
PARAMETER new_part_ID  as String;
INSERT INTO tbl_New_part_ID_input ( Trim(UCase([new_part_ID])) ) 
```

# objective-c - 发布到 Facebook 新闻源 iOS

> ID：10809645
> 
> 赞同：0
> 
> 时间：2012-05-30T03:31:46.597
> 
> 标签：objective-c, ios, facebook, facebook-graph-api

谷歌搜索对我没有好处。

我想知道如何在不离开/退出应用程序的情况下使用 ARC、iOS 5 和 Storyboard 将 Facebook 发布到新闻源。

已经尝试过 developer.facebook.com 中的教程，但很难完成。

任何参考都可以。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:35:07.013

使用 Facebook SDK 并非易事。你需要花时间去理解它，或者只使用sharekit。将来，iOS 可能会像与 Twitter 一样合并 Facebook，但现在你必须去 GITHUB 并下载 Facebook iOS 代码和 hackbook 示例。[Facebook 的 iOS 开发者页面上的网页](https://developers.facebook.com/docs/mobile/ios/build/)是开始学习的地方。

如果您有足够的时间来刻录，您可以在几天内完成实施。关于 ARC，您需要在构建阶段设置 -fno-objc-arc 编译器标志，为非 ARC 的 Facebook .m 文件编译源代码。您自己的文件可以编写为 ARC 并与 ARC 之前的 FB 文件混合。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-30T04:21:00.500

这个[Facebook iOS 教程](https://developers.facebook.com/docs/mobile/ios/build/)基本上提供了使用 Facebook SDK 发帖所需的所有知识。如果您向下滚动一点，您将看到发布到新闻源的代码（提示：搜索 feedDialog）。

# linux - linux上的gui应用程序启动

> ID：10809653
> 
> 赞同：0
> 
> 时间：2012-05-30T03:32:55.940
> 
> 标签：linux, authentication

你在 linux 启动时添加应用程序是正确的。

但我的要求是不同的。

此时我可以在 linux 启动时执行我的应用程序。但它在出现 linux 身份验证窗口时开始。

但是我想在root用户通过输入用户名“root”和一些“密码”进行身份验证后启动我的应用程序。

我认为，为此我将不得不在 linux 身份验证脚本的脚本中执行我的应用程序。为此，我想要 linux h 中的 linux 脚本位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T03:34:47.660

[桌面应用程序自动启动规范](http://standards.freedesktop.org/autostart-spec/autostart-spec-latest.html)

> 通过将应用程序的 .desktop 文件放在 Autostart 目录之一中，应用程序将在用户登录后启动用户桌面环境期间自动启动。

# php - 是否可以在 Damn Vulnerable Web App 上进行 SQL 注入（高级）？

> ID：10809665
> 
> 赞同：3
> 
> 时间：2012-05-30T03:34:33.910
> 
> 标签：php, mysql

我搜索了整个谷歌，看看如何绕过以下内容（它来自 DVWA 的高级安全性）：

```
$id = $_GET['id']; 
    $id = stripslashes($id); 
    $id = mysql_real_escape_string($id); 

    if (is_numeric($id)){ 

    $getid = "SELECT first_name, last_name FROM users WHERE user_id = '$id'"; 
    $result = mysql_query($getid) or die('<pre>' . mysql_error() . '</pre>' ); 

    $num = mysql_numrows($result); 

    $i=0; 

    while ($i < $num) { 

        $first = mysql_result($result,$i,"first_name"); 
        $last = mysql_result($result,$i,"last_name"); 

        echo '<pre>'; 
        echo 'ID: ' . $id . '<br>First name: ' . $first . '<br>Surname: ' . $last; 
        echo '</pre>'; 

        $i++; 
    } 
} 
```

有可能破解吗？

对于那些不熟悉 DVWA 的人，这里有一个关于它的 youtube 视频： [http ://www.youtube.com/watch?v=oMV0JZVxvdQ](http://www.youtube.com/watch?v=oMV0JZVxvdQ)

另外，我的另一个担忧是中等水平。它确实`mysql_real_escape_string()`有效，但是当您从低级别使用相同的 SQL 注入并删除引号时，它会绕过保护。这是为什么？怎么这么容易绕过`mysql_real_escape string`？

中级的代码（简洁版）是这样的：

```
 $id = $_GET['id']; 
    $id = mysql_real_escape_string($id); 
    $getid = "SELECT first_name, last_name FROM users WHERE user_id = $id"; 
```

我想使用 PDO，因为它可能更安全。请让我知道您对此的看法。

提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T04:05:34.273

添加`is_numeric`不会使这很可能成为全面的 sql 攻击，但`is_numeric`不是很准确：

```
is_numeric('0xdeadbeef') // true
is_numeric('10e3') // true 
```

使用过滤器可能更好：

```
if (false !== ($id = filter_input(INPUT_GET, 'id', FILTER_VALIDATE_INT))) {
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T01:27:31.017

在中等级别只需使用：`1 and 1=1 order by X`.

作者的所有查询都是低级的，但是您可以将表名替换为十六进制代码`0x...`，例如`where table_name=0x12345`. 如果我们使用字符串 char 我们将有一个错误，因为这`'`是不允许的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T11:14:06.660

我有同样的问题。我也不知道怎么破解。

但我认为我对中等级别的问题有一个答案，我认为这是程序员的错误。

```
$getid = "SELECT first_name, last_name FROM users WHERE user_id = $id" 
```

请注意，在低级别和高级别中，您在 $id 中都有引号，而不是在 Medium 中......我认为这就是重点。如果你有这个：

```
$getid = "SELECT first_name, last_name FROM users WHERE user_id = '$id'" 
```

我很确定在中等级别绕过 mysql_real_escape 字符串不会那么容易。

换句话说，我很确定如果你没有在 High Level 中的引号，你也可以进行注入。

# jquery-mobile - JQM：具有数据角色页面的 Div 将位于其他元素之上

> ID：10809666
> 
> 赞同：0
> 
> 时间：2012-05-30T03:34:44.897
> 
> 标签：jquery-mobile, cordova

我使用 phonegap 为 ios 和 android 开发了一个应用程序。这是一个字典应用程序，它将在多个选项卡中显示结果（选项卡是一个 div，每个 div 将显示不同的内容）。我使用自己的代码，因此任何时候都只显示一个 div。现在我想包含 jquerymobile，以便在切换到其他 div 时可以应用动画/过渡。

所以我将 data-role="page" 添加到每个 div，我认为它会立即工作（如下面的示例代码）。但有些不对劲。

```
 <!DOCTYPE html> 
    <html> 
        <head> 
        <title>Page Title</title> 

        <meta name="viewport" content="width=device-width, initial-scale=1"> 

        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
    </head> 
    <body> 
    <table id="headergroup">
    <tr><td>
       <input>.........
       <img>.......
    </table>
<wrapper>
    <div data-role="page" id="tab1">
        <div data-role="header">
            <h1>Page Title</h1>
        </div>
        <div data-role="content">   
            <p>Page1 content goes here.</p>     
        </div>
        <div data-role="footer">
            <h4>Page Footer</h4>
        </div>
    </div>
    .........other div......
    <div data-role="page" id="tabN">
        <div data-role="header">
            <h1>Page Title</h1>
        </div>
        <div data-role="content">   
            <p>PageN content goes here.</p>     
        </div>
        <div data-role="footer">
            <h4>Page Footer</h4>
        </div>
    </div>
    </wrapper>
    <div id="footer>
     <img .......>
    </div>
    </body>
    </html> 
```

假设，我的应用程序应该只在包装器中显示 div(s)。但问题是，现在我的应用程序将在全屏和其他元素之上显示带有 data-role=page 的 div（我的应用程序页眉和页脚未显示）。

我的实现是否正确？我该如何克服这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:53:40.197

您可以在第一页上解决这个问题，但在您通过 JQM-Ajax（默认）加载的所有其他页面上，您只会从第一个（！） div-data-role="page" 中获取内容您正在加载的页面。其他所有内容（表、第 2、第 3 页 div 将不会被加载，因为它在 page-div 之外。

[查看有关页面解剖](http://jquerymobile.com/demos/1.1.0/docs/pages/index.html)和[链接页面](http://jquerymobile.com/demos/1.1.0/docs/pages/page-links.html)的 JQM 文档。

JQM 基于 page-divs，因此在您的代码中，page-div 将获得大多数“JQM 关注”，设置为全屏尺寸，并且当然会悬停在其他所有内容之上。

要使用 JQM，您可以选择

[单页](http://jquerymobile.com/test/docs/pages/page-template.html)布局 = 逐页
[多](http://jquerymobile.com/test/docs/pages/multipage-template.html)页布局 = 一个文档中包含多个页面。

由于您使用的是 Phonegap，我认为它最终会将所有内容捆绑到一个文件中，因此使用多页可能会更好。如果您需要从初始页面加载具有多个“嵌套页面”的文档，还有一个[子](https://github.com/ToddThomson/jQuery-Mobile-Subpage-Widget)页面小部件或[multiview 。](https://github.com/frequent/multiview)

# python - 在 Python 中显示所有父文件夹

> ID：10809668
> 
> 赞同：2
> 
> 时间：2012-05-30T03:34:53.913
> 
> 标签：python, tokenize

这属于为了回答而提出问题的类别（尽管如果答案比我的好，我会接受）

如何打印出给定子文件夹的所有父文件夹的绝对路径。鉴于以下

```
'/home/marx/Documents/papers/communism' 
```

返回

```
[
  '/',
  '/home',
  '/home/marx',
  '/home/marx/Documents',
  '/home/marx/Documents/papers',
  '/home/marx/Documents/papers/communism'
] 
```

**注意**代码不必检查文件是否存在，但如果有尾部正斜杠、周围的空格或两个并排的正斜杠，我不想要虚假输出

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T07:09:45.520

使用模块中的功能`os.path`- 它是平台独立的一件事，即相同的代码将适用于 Windows 路径（在 Windows 安装上运行时）。

使用`os.path.normpath()`优雅地处理重复和尾随路径分隔符以及包含“..”的路径。使用它而不是`os.path.abspath()`因为从非绝对路径上的不同目录运行时会得到不同的结果。

```
import os.path

def get_parents(path):
    parents = []
    path = os.path.normpath(path)
    while path:
        parents.insert(0, path)
        if path == '/':
            path = ''
        else:
            path = os.path.dirname(path)

    return parents

>>> print get_parents('')
['.']
>>> print get_parents('/')
['/']
>>> print get_parents('/////')
['/']
>>> print get_parents('/home/marx/Documents/papers/communism')
['/', '/home', '/home/marx', '/home/marx/Documents', '/home/marx/Documents/papers', '/home/marx/Documents/papers/communism']
>>> print get_parents('/home/marx/Documents/papers/communism/')
['/', '/home', '/home/marx', '/home/marx/Documents', '/home/marx/Documents/papers', '/home/marx/Documents/papers/communism']
>>> print get_parents('////home/marx////Documents/papers/communism/////')
['/', '/home', '/home/marx', '/home/marx/Documents', '/home/marx/Documents/papers', '/home/marx/Documents/papers/communism']
>>> print get_parents('home/marx////Documents/papers/communism/////')
['home', 'home/marx', 'home/marx/Documents', 'home/marx/Documents/papers', 'home/marx/Documents/papers/communism']
>>> print get_parents('/home/marx////Documents/papers/communism/////../Das Kapital/')
['/', '/home', '/home/marx', '/home/marx/Documents', '/home/marx/Documents/papers', '/home/marx/Documents/papers/Das Kapital']
>>> print get_parents('/home/marx////Documents/papers/communism/////../Das Kapital/')
['/', '/home', '/home/marx', '/home/marx/Documents', '/home/marx/Documents/papers', '/home/marx/Documents/papers/Das Kapital']
>>> print get_parents('/home/marx////Documents/papers/communism/////../Das Kapital/../../../../../../')
['/'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T06:48:48.753

应该处理几乎所有事情。

```
import os

def parents(x, sep = os.path.sep):
    x = os.path.normpath(x)
    if x == sep: # bail out if only leading '/'s
        return [x, ]
    elements = x.split(sep)
    res = list(sep.join(elements[:i]) for i in range(1, len(elements)+1))
    res[0] = sep # fix leading /
    return res

>>> x = '/home/marx/Documents///papers/communism/'
>>> parents(x) 
['/',
 '/home',
 '/home/marx',
 '/home/marx/Documents',
 '/home/marx/Documents/papers',
 '/home/marx/Documents/papers/communism'] 
```

**编辑：**正确处理“父母（'////'）”

**编辑：**通过添加可选参数“sep”来简化代码，并使用 normpath() （如另一个答案中所述）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T05:26:11.680

```
import os;
import sys;

def stripDoubleSlash(fullPath):
    if fullPath:
        replaced = fullPath.replace('//','/');
        if replaced.find('//') >= 0:
            return stripDoubleSlash(replaced);
        else:
            return replaced;
    return fullPath;
def printAllParents(fullPath):
    tokens = stripDoubleSlash(fullPath).rstrip('/').split('/');
    for i in xrange(0,len(tokens)):
        if i == 0 and not fullPath[0] == '/':
            print tokens[0];
        else:
            print '/'.join(tokens[0:i])+'/'+tokens[i];
if __name__ == '__main__':
    printAllParents(sys.argv[1] if len(sys.argv) > 1 else '/home/marx/Documents/papers/communism/'); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-30T03:36:23.570

这个最小块运行良好，但如果有多个并排的正斜杠会失败。

```
#!/usr/bin/env python

import os

def getParents ( path ):    
   parents = [ path ]
   while path != '/':
      path = os.path.dirname ( path )
      parents.append ( path )
   parents.reverse()
   return parents 

if __name__ == '__main__':
   print getParents ( '/home/marx/Documents/papers/communism' ) 
```

# python - 如何在python中使用正则表达式搜索重复的“+”号并避免多次重复错误

> ID：10809669
> 
> 赞同：1
> 
> 时间：2012-05-30T03:34:57.370
> 
> 标签：python, regex

在搜索“C++”时，我在这一行得到一个错误。

```
needles = "C++ Developer"
regal = re.compile(r"(%s)" % "|".join(needles), re.I)
# error: multiple repeat 
```

如何在不操纵针头的情况下避免上述错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T03:43:45.603

您正在寻找[`re.escape()`](http://docs.python.org/library/re.html#re.escape)转义纯文本中的所有元字符。

**编辑：**

```
>>> re.escape("C++ Developer")
'C\\+\\+\\ Developer'
>>> re.escape(r'\+*.][')
'\\\\\\+\\*\\.\\]\\[' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T03:39:10.727

如果要搜索加号，则必须按照编写的方式操作“needles”变量。只是逃避你的加号：

`needles = "C\\+\\+ Developer"`

# .htaccess - 未找到 Apache2 Mod 重写页面

> ID：10809671
> 
> 赞同：0
> 
> 时间：2012-05-30T03:35:17.050
> 
> 标签：.htaccess, mod-rewrite, apache2

很抱歉，我不确定如何用一句话来表达这个问题。

基本上，mod rewrite 适用于我们的 traq 页面（下面的代码块 1），但不适用于我们的 wordpress 页面（下面的代码块 2）。出于某种原因，如果我们实现自动生成的 Wordpress .htaccess 文件，页面会出现 Apache 的“找不到页面”错误（这意味着它根本不会访问 Wordpress 的索引页面）。

特拉克：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

WordPress：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
<IfModule> 
```

我们尝试注释掉 Wordpress 文件中的几行，并在我们认为可能导致问题的一件事或另一件事时更改各行。最后，除了 404 之外，我们的任何更改都没有显示任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T03:31:28.153

我们发现了问题。我们的服务器设置与发行版的 Ubuntu 非常相似，默认情况下，apache 包配置为允许使用 htaccess / mod-rewrite 覆盖，但不允许任何重写规则。我们必须将我们想要允许的规则添加到 apache 配置中。

# javascript - 正则表达式密码必须包含字母、至少一个特殊字符和至少一个数字？

> ID：10809672
> 
> 赞同：-1
> 
> 时间：2012-05-30T03:35:17.973
> 
> 标签：javascript, regex, passwords

我正在研究密码验证，我应该验证密码，只有当密码包含字母、至少一个特殊字符和至少一个数值时，它才会始终接受密码。

谁能帮我写这个脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T03:38:01.617

```
if(myPass.match(/\d/) && myPass.match(/[a-zA-Z]/) && myPass.match(/\W/))
//you're good to go 
```

//编辑第一个测试是否有任何数字，第二个查找所有字母字符，第三个查找“非单词”字符。这描述了您指定的三个类。如果您想测试最少数量的字符，您可以再添加一个测试，即

```
&& myPass.length > minimumLength 
```

# xml - RSS 自动发现

> ID：10809673
> 
> 赞同：9
> 
> 时间：2012-05-30T03:35:28.730
> 
> 标签：xml, html, rss, feed

我从事 Web 开发已有多年，但这是我第一次涉足 XML。我创建了一个 RSS 提要，但我不知道如何让浏览器“发现”我的提要并在地址栏中显示小 RSS 图标。有问题的网站是：[http](http://www.aurorafxstudios.com/blog) ://www.aurorafxstudios.com/blog ，我的 RSS 提要位于：[http](http://www.aurorafxstudios.com/blog/rss.php) ://www.aurorafxstudios.com/blog/rss.php ...任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T23:57:44.513

提要自动发现机制的“官方”版本可以在[http://www.rssboard.org/rss-autodiscovery](http://www.rssboard.org/rss-autodiscovery)找到。

假设您发布了一个或多个发现链接（MIME 类型取决于提要格式）：

```
<link rel="alternate" type="application/rss+xml" title="human-readable label" href="http://www.aurorafxstudios.com/blog/rss.php" /> 
```

您可以通过多种方式验证它的存在。例如，在 IE 9 中，您可以点击 Alt + T（工具）并验证您的发现链接是否列在*Feed Discovery*菜单选项下。

您的提要的许多消费者将通过提要阅读器检索它，其中大多数将接受您网站的 URL，并通过发现链接找到您发布的提要，然后将它们呈现给最终用户。您可以考虑使用提要阅读器来验证您的发现链接是否有效。

只要您遵循规范，我就不会担心您会看到不同浏览器表现出的各种行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T17:34:41.337

在“head”标签中添加以下内容。

```
<link rel="alternate" type="application/rss+xml" title="Name of Your Feed" href="http://www.aurorafxstudios.com/blog.xml" /> 
```

# haskell - Haskell 是一种托管语言吗？

> ID：10809674
> 
> 赞同：13
> 
> 时间：2012-05-30T03:35:29.360
> 
> 标签：haskell, ghc

我是 Haskell 的新手。一直困扰我的一件事是，Haskell 是像 Java 这样的托管（从 MS 借用的术语）语言还是像 C 这样的编译为本机代码？

GHC 页面说“GHC 将 Haskell 代码直接编译为本机代码或使用 LLVM 作为后端”。

在“编译为本机代码”的情况下，如果没有 JVM 之类的东西，垃圾收集之类的功能怎么可能实现？

/*更新*/

非常感谢您的回答。从概念上讲，请您帮忙指出我对 Haskell 中垃圾收集的以下理解中哪一个是正确的：

GHC 将 Haskell 代码编译为本机代码。在编译的过程中，会在原程序代码中加入垃圾回收例程吗？

或者

有一个程序与 Haskell 程序一起运行以执行垃圾收集？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-30T04:09:19.527

据我所知，术语“托管语言”特指以 .NET/公共语言运行时为目标的语言。所以不，Haskell 不是托管语言，Java 也不是。

关于 Haskell 被编译成什么：正如你引用的文档所说，GHC 将 Haskell 编译为本机代码。它可以通过直接发出本机代码或首先发出 LLVM 代码然后让 LLVM 将其编译为本机代码来实现。无论哪种方式，运行 GHC 的最终结果都是本机可执行文件。

除了 GHC 之外，还有其他 Haskell 实现——最著名的是 Hugs，它是一个纯解释器，从不产生可执行文件（本机或其他）。

> 如果没有 JVM 之类的东西，垃圾收集之类的功能怎么可能实现？

与 JVM 可能的方式相同：每次分配内存时，都会向垃圾收集器注册。然后不时地运行垃圾收集器，按照给定的垃圾收集算法的步骤运行。GHC 编译的代码使用分代垃圾回收。

* * *

回应您的编辑：

> GHC 将 Haskell 代码编译为本机代码。在编译的过程中，会在原程序代码中加入垃圾回收例程吗？

基本上。除了说“垃圾收集例程将被添加到原始程序代码中”可能会描绘错误的画面。GC 例程只是每个 Haskell 程序链接的库的一部分。编译后的代码只包含在适当位置对这些例程的调用。

基本上每次调用 malloc 时都调用 GC 的 alloc 函数。

只需查看 C 的任何 GC 库及其使用方式：您需要做的就是#include 库的标头并链接到库，并用 GC 库的 alloc 函数替换 malloc 的每个出现（并删除所有调用`free`）和 bam，你的代码是垃圾收集的。

> 有一个程序与 Haskell 程序一起运行以执行垃圾收集？

不。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-30T04:07:04.863

> Haskell 是否是托管（从 MS 借用的术语）语言，如 Java

GHC 编译的程序包括一个垃圾收集器。（据我所知，Haskell 的所有实现都包括垃圾收集，但这不是规范的一部分。）

> 还是像 C 这样的编译为本机代码？

GHC 编译的程序被编译为本机代码。Hugs 解释程序，并且不编译为本机代码。据我所知，还有其他几种实现都可以编译为本机代码，但我将它们单独列出，因为我对这个事实没有信心。

> 在“编译为本机代码”的情况下，如果没有 JVM 之类的东西，垃圾收集之类的功能怎么可能实现？

GHC 编译的程序包括一个运行时系统，它提供一些基本功能，如 M 到 N 绿色线程、垃圾收集和 IO 管理器。从某种意义上说，这有点像拥有“类似 JVM 的东西”，因为它提供了许多相同的功能，但在实现上却大不相同：所有架构都没有通用字节码（因此没有“虚拟机”） .

> 我对 Haskell 中垃圾收集的以下理解之一是正确的：
> 
> 1.  GHC 将 Haskell 代码编译为本机代码。在编译的过程中，会在原程序代码中加入垃圾回收例程吗？
> 2.  有一个程序与 Haskell 程序一起运行以执行垃圾收集？

情况1是正确的：运行时系统代码是在编译过程中添加到程序代码中的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-01-22T22:37:12.650

“托管语言”是一个超载的术语，所以这里是一个单词的答案，然后是一些关于（我）想到的通常不同含义的细节：

### 像在 CLR 目标中一样管理

**不**，Haskell 不会编译到 Microsoft CLI 的 IL。
好吧，我读到有一些解决方案*可以*做到这一点，但是 imo，不要.. CLR 不是为 FP 构建的，并且会严重缺乏优化，可能会产生研究语言性能。如果我个人真的很想以 CLR 为目标，我会使用 F#——它*不是*一种函数式语言，但它很接近。

注意这是术语“托管语言”的最准确和实际含义。接下来的意思是，好吧，错误的，但不幸的是，很常见。

### 像自动垃圾收集一样管理

**是**的，这几乎是必须的。我的意思是，超出规范：如果我们必须进行垃圾收集，它将破坏使我们在高海拔地区工作的功能主题，这是我们心爱的家园。

它还将强制执行杂质和内存模型。

### 管理为编译为由 VM 运行的字节码

**没有（通常）**。
这取决于你的后端：今天不仅我们有不同的 Haskell 编译器，一些编译器也有不同的后端——甚至还有 JavaScript 的后端！

因此，如果您确实想以 VM 为目标，您可以使用现有的/为其创建后端。但是 Haskell*不需要*它。因此，就像您可以编译为原生原始金属二进制文件一样，您也可以编译为其他任何内容。

与 C# ¹、VB.NET 等 CLR 语言相比，与 Java 等相比，您不必*针对*JVM、CLR、Mono 等，因为 Haskell 根本*不需要*VM。

GHC 就是一个很好的例子。当您在 GHC 中编译时，它不会将您直接编译为二进制，而是编译为一种称为 Core 的中间语言，然后从 Core 到 Core 优化一段时间，然后再转到另一种称为 STG 的语言，然后才继续编写代码一代（如果你告诉它，它可以停在那里）。²现在，您还可以使用它编译为 LLVM 字节码（经过一些很棒的优化）。借助 LLVM 后端，GHC 可以生成**速度**快得多的程序。有关它和 GHC 后端的更多信息，请访问[此处](https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/code-generators.html)。

下图说明了 GHC 编译管道，您可以[在此处](https://ghc.haskell.org/trac/ghc/wiki/Commentary/Compiler/HscMain)找到有关各个阶段的更多信息。

![GHC 编译管道](../Images/b4c5609ec35c7911637ebab2aa967937.png)

看到三个不同目标底部的叉子了吗？这些是我所指的后端。

* * *

¹一个未来的例外和一个有趣的事实：微软目前正在开发原生 .NET！巧妙地命名为：[Microsoft .NET Native](https://msdn.microsoft.com/en-US/vstudio/dotnetnative)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T06:15:46.290

对您而言，“托管语言”的定义特征是什么？您引用的短语“GHC 将 Haskell 代码直接编译为本机代码或使用 LLVM 作为后端”非常清楚 GHC 的作用，因此我怀疑困扰您的“歧义”是“托管语言”一词" 比 GHC 的文档中的要好。

> 在“编译为本机代码”的情况下，如果没有 JVM 之类的东西，垃圾收集之类的功能怎么可能实现？

您认为“像 JVM 之类的东西”究竟是如何实现垃圾收集等功能的？JVM 并不神奇，它只是一个和其他一切一样的程序。在*某种程度上*，您需要拥有本机代码才能让 CPU 执行它，因此很明显，像垃圾收集这样的功能在本机代码中**是可能的。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T04:12:51.837

对于您目前所处的位置，最好将 (GHC) Haskell 视为“托管”，但[GHC 编译到的平台](http://www.cminusminus.org/)不是其他任何目标。当然，它的意义远[不止](http://research.microsoft.com/apps/pubs/default.aspx?id=67083)[于此](http://research.microsoft.com/en-us/um/people/simonpj/papers/ext-f/tldi22-sulzmann-with-appendix.pdf)，但这是一个足够的解释，而不是更多的 Haskell 经验。

# python - Python中的媒体播放器

> ID：10809676
> 
> 赞同：2
> 
> 时间：2012-05-30T03:35:45.757
> 
> 标签：python, ubuntu, media-player

我想为 ubuntu 从头开始​​用 python 开发一个媒体播放器。请向我推荐一些可以使用的好库。知道从哪里开始也很有帮助。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T03:40:10.423

你可能想要[gst-python](http://gstreamer.freedesktop.org/modules/gst-python.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T03:43:26.210

这里有一些很好的例子：

1.  谷歌的python音频接口项目：

[http://code.google.com/p/py-audio/](http://code.google.com/p/py-audio/)

2\. Python Codec 注册表和基类：

[http://docs.python.org/library/codecs.html](http://docs.python.org/library/codecs.html)

3\. 这是 FFmpeg 的 python 包装器：

[http://code.google.com/p/pyffmpeg/](http://code.google.com/p/pyffmpeg/)

# javascript - 检测 html 元素中的用户选择

> ID：10809682
> 
> 赞同：5
> 
> 时间：2012-05-30T03:36:27.563
> 
> 标签：javascript, jquery

如何检测用户选择（用鼠标突出显示）是否在某个元素的内部/子元素中？

例子：

```
<div id="parent">
   sdfsdf
   <div id="container">
       some 
      <span>content</span>
   </div>
   sdfsd
</div> 
```

伪代码：

```
if window.getSelection().getRangeAt(0) is a child of #container
 return true;
else
 return false; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T03:41:03.013

使用 jQuery [on() 事件处理程序](http://api.jquery.com/on/)

```
$(function() {
     $("#container > * ").on("click", 
         function(event){
            return true;
         });
     });​ 
```

**编辑：http:** [//jsfiddle.net/9DMaG/1/](http://jsfiddle.net/9DMaG/1/)

```
<div id="parent">outside
    <div id="container">
        outside
        <span>first_span_clickMe</span>
        <span>second_span_clickMe</span>
    </div>
 outside</div>

$(function() {
   $("#container > span").on("click", function(){
       $('body').append("<br/>child clicked");
   });
});​ 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-09T18:54:22.107

好的，我设法以“肮脏”的方式解决了这个问题。该代码可以使用改进，但它为我完成了这项工作，我现在懒得改变它。基本上，我遍历选择的对象，检查它是否在某个时候到达具有指定类的元素。

```
 var inArticle = false;
    // The class you want to check:
    var parentClass = "g-body"; 

    function checkParent(e){
        if(e.parentElement && e.parentElement != $('body')){
            if ($(e).hasClass(parentClass)) {
                inArticle = true;
                return true;
            }else{
                checkParent(e.parentElement);
            }
        }else{
            return false;
        }
    }

    $(document).on('mouseup', function(){
        // Check if there is a selection
        if(window.getSelection().type != "None"){
            // Check if the selection is collapsed
            if (!window.getSelection().getRangeAt(0).collapsed) {
                inArticle = false;

                // Check if selection has parent
                if (window.getSelection().getRangeAt(0).commonAncestorContainer.parentElement) {
                    // Pass the parent for checking
                    checkParent(window.getSelection().getRangeAt(0).commonAncestorContainer.parentElement);
                };

                if (inArticle === true) {
                    // If in element do something
                    alert("You have selected something in the target element");
                }
            };
        }
    }); 
```

[JSFiddle](http://jsfiddle.net/6Psjq/)

# javascript - 对交互式地图应用程序有什么建议吗？

> ID：10809684
> 
> 赞同：1
> 
> 时间：2012-05-30T03:36:34.167
> 
> 标签：javascript, jquery, maps, openmap

我需要做类似的事情：

[基于 Flash 的交互式地图](http://www.mapsofworld.com/world-map-viewer.html)

我想知道您是否可以推荐一个好的图书馆或其他东西。JQuery 或 Javascript 会很好，但 Flash/Action Script 不是一个好的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:28:50.877

您可以为此使用基于 jQuery 的解决方案 - [jVectorMap](http://jvectormap.com)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T03:51:42.130

提供 Google 地图 API 以使用您自己的图像制作您自己的自定义地图

[http://forevermore.net/articles/photo-zoom/](http://forevermore.net/articles/photo-zoom/)

[http://www.maplib.net/](http://www.maplib.net/)

然后，您可以使用相同的 api 来检测会触发模式窗口的点击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T04:06:28.183

**[您可以在此处](http://blog.programmableweb.com/2007/05/30/44-mapping-apis/)拥有各种 44 个 Maping API**

当然 Flash/Action Script 不是一个好的选择，因为它占用大量资源并且总是比基于 JavaScript 和 AJAX 的解决方案慢。

**[这](https://developers.google.com/maps/articles/yourfirstmap)**是您设置地图的第一个教程（来自 Google 开发人员）。

最后，**[HERE](http://www.esri.com/mapping-for-everyone/index.html)**是用于在线创建地图的免费制图工具的集合。

希望这可以帮助 ：）

# java - 在 HashMap 中找不到自定义对象？

> ID：10809688
> 
> 赞同：1
> 
> 时间：2012-05-30T03:37:04.350
> 
> 标签：java, hashcode

嗨，我正在尝试学习 hashcode () 和 equals() 方法的用途。我尝试了以下程序。

```
import java.util.HashMap;

public class LearnHascode {

public String name;
public int age;
LearnHascode(String na)
{
    name = na;
}
public int hashCode()
{
    return name.hashCode();
}
public boolean equals(LearnHascode obj)
{
    return this.name.equals(obj.name);
}
public static void main(String[] args)
{
    HashMap h = new HashMap();
    LearnHascode ob1 = new LearnHascode("Prabha");
    LearnHascode ob2 = new LearnHascode("Prabha");

    h.put(ob1, v1);
    h.put(ob2, v2);

    System.out.println(h);
    System.(h.out.printlncontainsKey(new LearnHascode("Prabha")));

}

} 
```

输出 ：

```
{hash.LearnHascode@8ef7bdfc=Two, hash.LearnHascode@8ef7bdfc=one}
false 
```

我有两个疑问：

1）我认为 HashMap 将包含一个条目，因为两个对象（ob1 和 ob2）的 hascode 相同。谁能解释为什么HashMap中有两个条目？

2）为什么`System.(h.out.printlncontainsKey(new LearnHascode("Prabha")));` 返回false？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T03:39:03.040

您的`equals()`方法是错误的，这会破坏`HashMap`. to 的论点`equals()`始终是`Object`; 您必须检查`Object`它是什么类型并将其转换为方法的主体。

该`hashCode()`值用于将对象分类，但`equals()`用于确定两个对象是否实际上相同。您需要正确定义这两种方法才能`HashMap`开始工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-08T05:59:42.473

您没有正确实现 hashCode() 和 equals() 方法。

公共类员工{

```
private int empId;

private String empName;

public Employee(int id, String name){
    empId = id;
    empName = name;
}

public int getEmpId() {
    return empId;
}

public void setEmpId(int empId) {
    this.empId = empId;
}

public String getEmpName() {
    return empName;
}

public void setEmpName(String empName) {
    this.empName = empName;
}

public int hashCode(){
    System.out.println("In Hash Code");
    int hashCode = 20;
    hashCode *= this.empId;
    hashCode += this.empName.hashCode();
    return hashCode;
}

public boolean equals(Object obj){
    System.out.println("In equals");
    if(!(obj instanceof Employee)){
        return false;
    }
    Employee emp = (Employee) obj;
    return (emp.getEmpName().equals(this.getEmpName())) && (emp.getEmpId() == this.getEmpId());
} 
```

}

# windows - 适用于 Node.js 表存储的 Windows Azure SDK 批量更新

> ID：10809694
> 
> 赞同：4
> 
> 时间：2012-05-30T03:38:05.123
> 
> 标签：windows, node.js, sdk, azure

您好，我正在使用适用于节点的 Windows Azure SDK，但不知道如何使用此库进行批量更新：

[https://github.com/WindowsAzure/azure-sdk-for-node/blob/master/lib/services/table/batchserviceclient.js](https://github.com/WindowsAzure/azure-sdk-for-node/blob/master/lib/services/table/batchserviceclient.js)

因为我找不到任何关于如何做到这一点的例子。是否有人使用 tableService.js 文件的 isInBatch 属性进行批量更新、删除和插入？

任何帮助或建议将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T03:52:54.500

在 Windows Azure SDK for node [github repo](https://github.com/WindowsAzure/azure-sdk-for-node)中，查看下的博客示例`/examples/blog`。具体来说，[blog.js](https://github.com/WindowsAzure/azure-sdk-for-node/blob/master/examples/blog/blog.js)。在这里，您将看到示例代码，从第 91 行开始，在实体组事务中，一系列博客文章被写入同一分区：

```
 provider.tableClient.beginBatch();

  var now = new Date().toString();
  provider.tableClient.insertEntity(tableName, { PartitionKey: partition, RowKey: uuid(), title: 'Post one', body: 'Body one', created_at: now });
  provider.tableClient.insertEntity(tableName, { PartitionKey: partition, RowKey: uuid(), title: 'Post two', body: 'Body two', created_at: now });
  provider.tableClient.insertEntity(tableName, { PartitionKey: partition, RowKey: uuid(), title: 'Post three', body: 'Body three', created_at: now });
  provider.tableClient.insertEntity(tableName, { PartitionKey: partition, RowKey: uuid(), title: 'Post four', body: 'Body four', created_at: now });

  provider.tableClient.commitBatch(function () {
    console.log('Done'); 
```

请注意关于分区的要点。这是您可以在单个事务中写入多个实体的唯一方法：它们*必须*位于同一分区中。

**编辑**- 正如@Igorek 正确指出的那样，单个实体组事务仅限于 100 个实体。此外，交易的整个有效负载不得超过 4MB。有关实体组事务的所有详细信息，请参阅[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/windowsazure/dd894038.aspx)。

# java - 动态打印表格行

> ID：10809701
> 
> 赞同：0
> 
> 时间：2012-05-30T03:39:26.030
> 
> 标签：java, javascript, html, jsp, datatable

我必须在网页（jsp，jquery）中设计一个**表格，其中的****行应该根据用户的选择以任意数量显示，**即如果用户只想显示 10 行，页面应该只能显示10 行，如果用户只想显示 15 行，则页面应显示 15 行。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T03:40:21.607

有许多可用的 javascript 库，请参阅[datatables](http://datatables.net/) (javascript library)

检查[显示标签库](http://www.displaytag.org/1.2/)（服务器端库）

> 显示标签库是一个自定义标签的开源套件，它提供了可在 MVC 模型中工作的高级 Web 表示模式。该库提供了大量功能，同时仍然易于使用。

# sql - 如何显示空值属性？

> ID：10809706
> 
> 赞同：0
> 
> 时间：2012-05-30T03:40:19.240
> 
> 标签：sql, oracle, select, null

这是问题：

创建一个查询以列出在雇用任何文员之前加入该组织并且收入高于任何经理的所有员工。

这是我到目前为止所拥有的：

```
select ename
from emp
where hiredate<any(select hiredate from emp
where job='CLERK')
and job!='CLERK'
and sal>any(select sal from emp
where empno=super); 
```

- 但是其中一名员工没有主管（为空），因此它没有显示任何员工。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T03:57:40.487

像这样的东西？

```
SELECT ename
FROM   emp
WHERE  hiredate < ANY (
           SELECT hiredate
           FROM   emp
           WHERE  job = 'CLERK'
       )
   AND job <> 'CLERK'
   AND sal > ANY (
           SELECT sal
           FROM   emp
           WHERE  empno IN (
                      SELECT super
                      FROM   emp
                      WHERE  super IS NOT NULL
                  )
           ); 
```

是家庭作业吗？如果是，应该这样标记。

# eclipse - Eclipse 中的 xdebug Codeigniter

> ID：10809708
> 
> 赞同：1
> 
> 时间：2012-05-30T03:40:56.260
> 
> 标签：eclipse, codeigniter, xdebug

我安装了运行 Codeigniter 应用程序的 Xdebug 的 Eclipse Indigo。

应用程序运行正常，但所有变量（在调试器中）显示为未初始化

任何人都知道我是否需要配置一些东西才能让它工作？

普通的旧 PHP 文件可以正常工作。

* * *

Eclipse 靛蓝 3.7.2

适用于 PHP 5.3 VC9（32 位）的 Xdebug 2.2.0 Windows 二进制文件

代码点火器 2.1.0

谢谢 ！

# c - 如何打印带有嵌入空值的字符串，以便用“（null）”替换“\ 0”

> ID：10809711
> 
> 赞同：2
> 
> 时间：2012-05-30T03:41:16.513
> 
> 标签：c, printf, puts

我有一个使用 memcpy() 组成的字符串（扩展时）如下所示：

```
char* str = "AAAA\x00\x00\x00...\x11\x11\x11\x11\x00\x00..."; 
```

我想打印字符串中的每个字符，如果该字符为空，则打印出来`"(null)"`以替代“\0”。

如果我使用 puts() 或 printf() 之类的函数，它只会在第一个 null 处结束并打印出来

```
AAAA 
```

那么我怎样才能让它打印出实际的单词“（null）”而不将它解释为字符串的结尾呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T03:44:09.337

您必须自己进行映射。如果你愿意，那就是。在 C 中，字符串以空值结尾。因此，如果您使用诸如`printf`or之类的格式化输出函数`puts`并要求它打印一个字符串（通过格式说明符），它会在遇到第一个空值时立即`%s`停止打印。`str`C中没有`null`单词。如果你确切地知道你有多少个字符，`str`你不妨遍历它们并单独打印出这些字符，`0`用你选择的助记符代替。

草案说 7.21.6.1/8：

> **p**参数应该是一个指向 void 的指针。指针的值以实现定义的方式转换为打印字符序列。

但是，以下内容：

```
$ cat null.c
#include <stdio.h>
int main() {
 printf("%p\n", (void *)0);
} 
```

产生：

```
00000000 
```

在 gcc 4.6 和 clang 3.2 上。

然而，深入挖掘：

```
$ cat null.c
#include <stdio.h>
int main() {
 printf("%s\n", (void *)0);
} 
```

确实产生了所需的输出：

```
(null) 
```

在 gcc 和 clang 上。

请注意，该标准不强制要求：

> **s**如果不存在 l 长度修饰符，则参数应是指向字符类型数组的初始元素的指针。280) 数组中的字符被写入（但不包括）终止空字符。如果指定了精度，则写入的字节数不会超过这个数。如果未指定精度或大于数组的大小，则数组应包含空字符。

依靠这种行为可能会导致意外！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T03:45:02.560

而不是用 打印字符串`%s`，您必须想出一个`for`循环来检查 char 数组中的给定字符是否为 a 的条件`\0`，然后打印`NULL`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T03:57:40.490

来自[puts() 上的 C++ 参考](http://www.cplusplus.com/reference/clibrary/cstdio/puts/)（强调我的）：

> 将 str 指向的 C 字符串写入标准输出并附加换行符 ('\n')。**该函数从指定的地址 (str) 开始复制，直到到达终止空字符 ('\0')。这个最终的空字符不会复制到标准输出。**

要处理您拥有的数据，您需要知道长度。从那里，您可以简单地遍历字符：

```
/* ugly example */
char* str = "AAAA\x00\x00\x00...\x11\x11\x11\x11\x00\x00...";
int len = ...; /* get the len somehow or know ahead of time */
for(int i = 0; i < len; ++i) {
  if('\0' == str[i]) {
    printf(" (null) ");
  } else {
    printf(" %c ", str[i]);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T10:51:44.243

C 的关键基石之一是字符串以 '\0' 结尾。每个人都按照这个规则生活。所以我建议您不要将字符串视为字符串，而是将其视为字符数组。

如果您遍历数组并测试“\0”，则可以打印“（null）”来代替字符。这是一个例子。请注意，您`char * str`是使用 char 数组或在堆栈上创建的`malloc`。此代码需要知道实际的缓冲区大小。

```
char* str = "AAAA\x00\x00\x00...\x11\x11\x11\x11\x00\x00...";
int iStrSz = <str's actual buffer size>

int idx;

for(idx=0; idx<iStrSz; idx++)
{
   if('\0' == *(str + idx)
   {
      sprintf("%s", "(null)");
   }
   else
   {
      putchar(*(str + idx));
   }
}

printf("%s", "\n"); 
```

# eclipse - Eclipse 没有输出？

> ID：10809717
> 
> 赞同：5
> 
> 时间：2012-05-30T03:42:49.160
> 
> 标签：eclipse

尝试在 Eclipse 中运行我的 java 项目时，我看不到底部的输出选项卡。我只能看到问题、JavaDoc 和声明。不应该有一个输出吗？如果是这样，我该如何得到它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-30T03:44:38.723

Java 标准输出将显示在 Eclipse 的控制台中。如果找不到视图，可以通过以下步骤显示视图：

打开窗口 > 显示视图 > 控制台

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T03:50:09.833

否则您可以使用快捷方式`Alt+Shift+Q`，然后`C`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-18T06:57:34.570

有时控制台窗口可能**隐藏或停靠**在**`Package Explorer`**窗口（*最好*）或其他窗口后面。**最小化**包资源管理器或所有其他窗口，您将找到控制台窗口。

# mysql - 以可视方式将 MySQL 数据导出到不同的 Schema

> ID：10809719
> 
> 赞同：0
> 
> 时间：2012-05-30T03:42:55.837
> 
> 标签：mysql, ruby-on-rails, schema, legacy

我正在更新旧版 Rails 应用程序及其旧数据库。新应用程序遵循稍微不同的架构和命名约定，并且具有不同的关系类型。我需要从旧数据库中导出数据并将其映射到新命名的列和表。我意识到我可以手动写出`SELECT '...' AS '...'`所有内容，但我希望找到一个与两个数据库相关联的可视化映射器，甚至可能在两者之间有一个用于克隆数据的逻辑层。这主要是因为有很多桌子，而且我觉得在视觉上更容易跟踪正在发生的事情以及我可能错过或可能没有错过的内容。是否有人熟悉具有这种功能的软件（Windows 或 Linux）？

# android - 通过警报启动服务不起作用

> ID：10809720
> 
> 赞同：2
> 
> 时间：2012-05-30T03:43:11.600
> 
> 标签：android, service, broadcastreceiver, android-pendingintent, repeatingalarm

我有以下广播接收器，当手机启动（`Bootreciever.java`）时会被调用，并且我正在尝试使用重复警报启动间歇性运行的服务。

```
public void onReceive(Context context, Intent intent) {

    Toast.makeText(context,"Inside onRecieve() :D" , Toast.LENGTH_LONG).show();
    Log.d(getClass().getName(), "Inside onRecieve() :D");

    AlarmManager am = (AlarmManager) context
            .getSystemService(Context.ALARM_SERVICE);

    Intent i = new Intent(context, MyService.class);

    PendingIntent pi = PendingIntent.getBroadcast(context, 0, i, 0);

    am.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,
            SystemClock.elapsedRealtime() + 3000, 1000, pi);

} 
```

基本上，我设置了一个重复警报以触发 3 秒，然后每隔一秒触发一次。启动完成广播收到就好了 - 但服务没有启动。`MyService.java`看起来像这样：

```
public class MyService extends Service {

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {

        Toast.makeText(this, "Hello from MyService!", Toast.LENGTH_LONG);

        Log.d(getClass().getName(), "Hello from MyService!");

        stopSelf();

        return super.onStartCommand(intent, flags, startId);
    } 
```

启动服务时我做错了什么？

Logcat 没有告诉我任何事情，我在清单中定义了服务。就其本身`startService()`而言，该服务在 using 调用时有效，但在`PendingIntent`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T03:46:31.453

而不是`PendingIntent.getBroadcast()`使用`PendingIntent.getService()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T03:57:01.800

我认为你应该检查你的持续时间，因为 android 对经常触发的警报有点挑剔。为了启动服务，最好的方法是设置警报以将意图广播到广播接收器，然后让它启动您的服务。

示例 1 接收器：

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class QoutesReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        // log instruction
        Log.d("SomeService", "Receiving Broadcast, starting service");
        // start the qoute service

        Intent newService = new Intent(context, SomeService.class);
        context.startService(newService);
    }

} 
```

示例 2 设置警报的函数（此示例每 2 分钟运行一次）：

```
public void setAlarm(Context context) {

        // Get the current time
        Calendar currTime = Calendar.getInstance();

        // Get the intent (start the receiver) 
        Intent startReceiver = new Intent(context, MyReceiver.class);

        PendingIntent pendReceiver = PendingIntent.getBroadcast(context, 0,
                startReceiver, PendingIntent.FLAG_CANCEL_CURRENT);

        // call the Alarm service
        AlarmManager alarms = (AlarmManager) context
                .getSystemService(Context.ALARM_SERVICE);
        //Setup the alarm

        alarms.setRepeating(AlarmManager.RTC_WAKEUP,
                currTime.getTimeInMillis() + (2 * 60 * 1000), 2 * 60 * 1000,
                pendReceiver);
    } 
```

# c# - 使用 C# 将 XML 文件写入特定的 XML 结构

> ID：10809724
> 
> 赞同：3
> 
> 时间：2012-05-30T03:43:46.690
> 
> 标签：c#, xml, writexml

通常，我编写 XML 文件的代码是，

```
 XmlWriterSettings settings = new XmlWriterSettings();
    settings.Indent = true;
    XmlWriter writer = XmlWriter.Create("Products.xml", settings);

    writer.WriteStartDocument();

    writer.WriteComment("This file is generated by the program.");

    writer.WriteStartElement("Product");
    writer.WriteAttributeString("ID", "001");
    writer.WriteAttributeString("Name", "Keyboard");
    writer.WriteElementString("Price", "10.00");
    writer.WriteStartElement("OtherDetails");
    writer.WriteElementString("BrandName", "X Keyboard");
    writer.WriteElementString("Manufacturer", "X Company");
    writer.WriteEndElement();
    writer.WriteEndDocument();
    writer.Flush();
    writer.Close(); 
```

但是上面的代码给了我一个不同的 XML 结构，如果我需要如下给定结构的输出，如何编码，

```
<Books>
<Book ISBN="0553212419">
<title>Sherlock Holmes</title>
<author>Sir Arthur Conan Doyle</author>
</Book>
<Book ISBN="0743273567">
<title>The Great Gatsby</title>
<author>F. Scott Fitzgerald</author>
</Book>
<Book ISBN="0684826976">
<title>Undaunted Courage</title>
<author>Stephen E. Ambrose</author>
</Book>
<Book ISBN="0743203178">
<title>Nothing Like It In the World</title>
<author>Stephen E. Ambrose</author>
</Book>
</Books> 
```

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-30T03:54:03.340

正如所评论的那样，只需修改您已经编写正确元素的代码。

```
XmlWriter writer = XmlWriter.Create(@"Products.xml", settings);

writer.WriteStartDocument();

writer.WriteComment("This file is generated by the program.");

writer.WriteStartElement("Books");
writer.WriteStartElement("Book");
writer.WriteAttributeString("ISBN", "0553212419");
writer.WriteElementString("Title", "Sherlock Holmes");
writer.WriteElementString("Author", "Sir Arthur Conan Doyle");
writer.WriteEndElement();
writer.WriteEndElement();
writer.WriteEndDocument();
writer.Flush();
writer.Close(); 
```

洗涤，冲洗，重复。我建议编写一种方法来添加每本书。

**EDIT——**写书的方法

```
void WriteBookData(XmlWriter writer, string isbn, string title, string author)
{
    writer.WriteStartElement("Book");
    writer.WriteAttributeString("ISBN", isbn);
    writer.WriteElementString("Title", title);
    writer.WriteElementString("Author", author);
    writer.WriteEndElement();
}

XmlWriterSettings settings = new XmlWriterSettings();
settings.Indent = true;
using (XmlWriter writer = XmlWriter.Create(@"Products.xml", settings))
{
    writer.WriteStartDocument();

    writer.WriteComment("This file is generated by the program.");

    writer.WriteStartElement("Books");
    WriteBookData(writer, "0553212419", "Sherlock Holmes", "Sir Arthur Conan Doyle");
    writer.WriteEndElement();
    writer.WriteEndDocument();
    writer.Flush();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T04:01:26.693

你为什么不使用 Linq to XML 呢。它很简单，很容易理解

```
 string filename = string.Empty;
 XElement res= new XElement ("Books",new XElement ("Book",new XAttribute   ("ISBN","="+055321212),
            new XElement ("Title","Sherlock Homes"),
            new XElement ("author","Sir Arthur Conan")
            )
            );

        res.Save(filename); 
```

您可以使用 foreach 查找在上述语句中存储硬编码值

# android - 更新当前显示的选项菜单项

> ID：10809726
> 
> 赞同：0
> 
> 时间：2012-05-30T03:44:05.327
> 
> 标签：android, user-interface, menu

由于某些原因，某些菜单项被禁用，将在数据到达后启用。
这是我担心的情况：
当菜单**当前**向用户显示并且数据到达时，如何立即启用菜单项？

现在我只在 onPrepareOptionsMenu() 中启用/禁用菜单项，它仅在再次显示菜单时调用。仅供参考，我正在使用 android 2.x SDK

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T03:51:14.450

当调用 opPrepareOptionsMenu 时，它会获得对菜单的引用，因此您可以将此引用保存在变量中，并在数据准备好时再次添加或启用 de 选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T04:10:42.137

我已经这样做了，它工作正常。看看这段代码...

在创建菜单时，为每个菜单选项添加不同的组，以便您可以轻松地分别处理每个按钮。喜欢：我给你举个例子，保持和恢复按钮。一次只有一个按钮可以工作，所以这里是代码。

在你的课堂上声明这一点。

```
private static final int HOLD_CALL      = 0;
private static final int RESUME_CALL    = 1; 
```

在您的公共布尔 onCreateOptionsMenu(Menu menu) 中编写此代码

```
menu.add(0, HOLD_CALL, 0, "Hold Call");
menu.add(1, RESUME_CALL, 1, "Resume Call"); 
```

在您的公共布尔 onMenuOpened(int featureId, Menu menu) 中使用它

```
menu.setGroupEnabled(1, false);` 
```

上面的代码将禁用您的菜单选项。希望它会帮助你如果你仍然面临问题，那么让我知道我会尽力帮助你......

# jquery - 骨干木偶 CompositeView “事件僵尸”

> ID：10809728
> 
> 赞同：2
> 
> 时间：2012-05-30T03:44:37.057
> 
> 标签：jquery, backbone.js, underscore.js, marionette

我有一个使用 Backbone Marionette CompositeView 创建的相当简单的表。此表的唯一要求是它显示数据并允许用户通过单击标题行对其进行排序。对表格进行排序时，用于对标题列进行排序的列用类标记，以允许使用 CSS 显示箭头（例如，'class="sort asc"'）。

这就是问题所在：单击标题行时，传递给回调（通过 event.target）的元素不是 DOM 上的表的一部分。相反，使用 Chrome 的调试工具，似乎目标元素实际上是模板脚本块的一部分，而不是用户实际看到的元素。

我现在最好的解决方法是通过从模板中的克隆检索唯一信息来查找实际附加到 DOM 的元素。

这是复合视图代码（借自 Derick Bailey 的示例 Fiddle 之一）：

```
// The grid view
var GridView = Backbone.Marionette.CompositeView.extend({
    tagName: "table",
    template: "#grid-template",
    itemView: GridRow,

    events: {
        'click th': 'doSort'
    },

    doSort: function(event) {
        var target = $(event.target);
        this.collection.sortByField(target.data('sortby'));

        target.parent('tr').find('.sort').removeAttr('class');
        target.addClass('sort ' + this.collection.sortdir);
        debugger; // NOTE: no change to elements in the DOM. WTH?

        target = this.$('[data-sortby=' + target.data('sortby') + ']');
        target.parent('tr').find('.sort').removeAttr('class');
        target.addClass('sort ' + this.collection.sortdir);
        debugger; // NOTE: DOM updated.
    },

    appendHtml: function(collectionView, itemView) {
        collectionView.$("tbody").append(itemView.el);
    }
}); 
```

模板也很简单：

```
<script id="grid-template" type="text/template">
    <thead>        
        <tr>
            <th data-sortby="username">Username</th>
            <th data-sortby="fullname">Full Name</th>
        </tr>
    </thead>
    <tbody></tbody>
</script> 
```

可以在这里找到 Derek 的原始演示 Fiddle 的一个分支，用于演示问题：http: [//jsfiddle.net/ccamarat/9stvM/14/](http://jsfiddle.net/ccamarat/9stvM/14/)

我有点绕道。我的问题是，我似乎产生了某种僵尸视图；这是一个 jQuery/Backbone/Underscore 错误，还是我只是把这一切都搞错了？

** 编辑 ** 这是显示两个元素的不同父层次结构的控制台输出：

```
console.log(target, targetb):
    [<th data-sortby="username" class="sort asc">Username</th>] [<th data-sortby="username">Username</th>]

console.log(target.parents(), targetb.parents()):
    [<tr>…&lt;/tr>, <thead>…&lt;/thead>] [<tr>…&lt;/tr>, <thead>…&lt;/thead>, <table>…&lt;/table>, <div id="grid">…&lt;/div>, <body>…&lt;/body>, <html>…&lt;/html>]

console.log(target === targetb):
    false 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T17:44:48.260

我没有看到任何僵尸观点的证据。

我创建了代码的一个分支并添加了一些额外的日志记录来检查视图实例，但我没有看到任何僵尸。每次都使用相同的 GridView 实例。每次排序时，子视图都会正确关闭。

[http://jsfiddle.net/derickbailey/hadbf/4/](http://jsfiddle.net/derickbailey/hadbf/4/)

您看到的问题很可能是由使用`target = $(e.target)`和引起的`targetb = this.$(...)`。这是两个非常不同的语句，来自两个非常不同的 DOM 元素来源。

的第一个用途`target = $(e.target)`是直接从 DOM 运行。您正在单击的目标上运行一个选择器，它只是将该 DOM 元素包装在一个 jQuery 选择器对象中。

的第二个用途`targetB = this.$(...)`是使用 Backbone View's`$el`进行查找：`this.$el.find("...")`它将根据视图的 EL 返回结果。视图的 $eL 恰好包含属于 DOM 的元素。但是 $el 和事件不是同一个对象`e`，所以你永远不会`target === targetb`是真的。

...除非我完全误解了这个问题（在这一点上似乎很可能），我认为这里没有问题。

# asp.net-mvc-3 - mvc3 并非所有代码路径都返回一个值

> ID：10809730
> 
> 赞同：0
> 
> 时间：2012-05-30T03:44:49.007
> 
> 标签：asp.net-mvc-3

感谢您阅读本文。

编译时出现此错误：

'ASP.Helpers.Message.DisplayMessage(string, string)'：并非所有代码路径都返回值

我在 App_Code\Helpers\Message.cshtml 中有一个助手类，这是迄今为止的内容：

```
@functions{
 public static string DislayMessage(string x, string y)
  {
    IF ((x == "yes") && (y == "yes"))
     {
       return ("something");
     }
  }
} 
```

在另一个页面中，它被这样调用：

```
@{Helpers.Message.DisplayMessage("yes", "yes")} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T03:47:40.587

如果条件为假，你仍然需要返回一些东西。您可能希望在函数末尾返回 null 或其他内容，以便在所有情况下都返回某些内容。

```
public static string DislayMessage(string x, string y)
{
    IF ((x == "yes") && (y == "yes"))
    {
        return ("something");
    }

    // fallback case
    return string.Empty;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T03:48:42.080

因为**只有当您的 IF 条件为真**并且您提到您的函数将返回一个字符串（**您的返回类型**）时，您的方法才会返回某些内容。您最好添加一些东西以始终返回。

```
public static string DislayMessage(string x, string y)
{
    If ((x == "yes") && (y == "yes"))
     {
       return "something";
     }
     return "";
 } 
```

# java - HttpResponse 和 BufferedReader

> ID：10809731
> 
> 赞同：-1
> 
> 时间：2012-05-30T03:44:55.090
> 
> 标签：java, android, httpresponse, bufferedreader, http-get

我正在尝试读取缓冲区（android 应用程序）并将值设置为我的`TextView` `'httpStuff'`. 但我认为我没有从 URI 中得到一些响应。

我没有收到任何运行时错误。我尝试了许多相同逻辑的味道。似乎没有任何工作。

`INTERNET`清单中已经设置了权限。`SdkVersion="15"`. 有什么帮助吗？

```
HttpClient client = new DefaultHttpClient();
URI website = new URI("http://www.mybringback.com");
HttpGet request = new HttpGet();
request.setURI(website);
HttpResponse response = client.execute(request);
HttpEntity entity = response.getEntity(); 
InputStream is = entity.getContent(); 
BufferedReader in = new BufferedReader(new InputStreamReader(is));

httpStuf.setText( in.readLine()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T04:42:49.683

我认为你错过了 while 循环，而且，当你说 only 时`in.readLine()`，可能是它从响应中返回一个空行，尽管它有足够的数据。所以请确保完全像这样阅读阅读器并检查其内容.

```
while ((line = rd.readLine()) != null) {
    httpStuf.setText(line+"\r\n");
} 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T04:45:05.630

这段代码对我有用

```
 InputStream is = response.getEntity().getContent();
  String strResponse = inputStreamToString(is);

private String inputStreamToString(InputStream is)
{

    String line = "";
    StringBuilder total = new StringBuilder();
    // Wrap a BufferedReader around the InputStream
    BufferedReader rd = new BufferedReader(new InputStreamReader(is), 1024 * 4);
    // Read response until the end
    try
    {

        while ((line = rd.readLine()) != null)
        {
            total.append(line);
        }
    } catch (IOException e)
    {
        Log.e(TAG, "error build string" + e.getMessage());
    }
    // Return full string
    return total.toString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T04:39:36.477

尝试获取 and 的状态码，`response`然后可以与（[HTTP状态](http://developer.android.com/reference/org/apache/http/HttpStatus.html)）进行比较

`int responseCode=response.getStatusLine().getStatusCode()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T05:37:18.763

我正在使用这种方法来简单地捕获 HTTP 响应，它对我来说很好用。

```
public String httpGetResponse(String url) {
        try {
            Log.i("HTTP Request", "httpGet Request for : " + url);
            DefaultHttpClient client = new DefaultHttpClient();
            HttpGet get = new HttpGet(url);
            //get.setHeader("Connection", "keep-alive");

            HttpResponse response = client.execute(get);

            InputStream is = response.getEntity().getContent();
            BufferedReader bufferedReader = new BufferedReader(
                    new InputStreamReader(is));
            StringBuilder str = new StringBuilder();

            String line = null;

            while ((line = bufferedReader.readLine()) != null) {
                str.append(line + "\n");
            }
            return str.toString();
        } catch (Exception e) {
            Log.e("HTTP error", "Error in function httpGetResponse : "
                    + e.getMessage());
            return null;
        }
    } 
```

# c++ - linux内存分析工具

> ID：10809737
> 
> 赞同：0
> 
> 时间：2012-05-30T03:45:30.360
> 
> 标签：c++, c, linux, embedded-linux

> **可能重复：**
> [什么是 Linux 上易于使用的 C++ 分析器？](https://stackoverflow.com/questions/1168766/what-is-a-good-easy-to-use-profiler-for-c-on-linux)

是否有一些用于嵌入式 linux 的开源内存分析工具？我需要知道某个程序的内存消耗状态，所以我希望这个工具有一些功能，比如计算 malloc 使用了多少内存，pthreads 中使用了多少堆栈/堆，并显示共享库的内存使用情况。是否有一些工具可以合格。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T03:46:50.377

每个人都为此使用[valgrind 。](http://valgrind.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T03:49:58.343

以下是到目前为止我使用的一些内存分析调试工具：

1.  瓦尔格林德

2.  英特尔的 VTune

3\. IBM Rational Purify

# php - phpactiverecord 一对多关联

> ID：10809739
> 
> 赞同：0
> 
> 时间：2012-05-30T03:45:35.183
> 
> 标签：php, database, activerecord, associations

我正在为这个项目使用 phpactiverecord，我有这个数据库结构：

**表：票证、标签**

我目前正在为这两个表使用 has_many 关联：“票有很多标签”，但是我需要将每个标签分配给不同的票，如果没有具有不同 id 和 ticket_id 值的重复行，目前这是不可能的。

关于如何实现这一目标的任何想法？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T04:56:07.900

您需要创建额外的表

```
 table Label2Tickets (`label_id`, `ticket_id`, PRIMARY KEY (`label_id`, `ticket_id`)
 \* there you may store date of create, status and etc *\ 
 `created`, `status`, `user_id` ... ) 
```

并更新现有的 AR 并为此表创建新的 AR：

票有很多 Label2Tickets where Label2Tickets.ticket_id = Tickets.id 标签有很多 Label2Tickets where Label2Tickets.label_id = Labels.id

# javascript - 在 Node.js 中侦听 EADDRNOTAVAIL 错误

> ID：10809740
> 
> 赞同：41
> 
> 时间：2012-05-30T03:45:38.173
> 
> 标签：javascript, node.js

我在我的服务器中安装了 Nginx 和 Node.js。

当我尝试运行我的 node.js 文件时，我收到一个错误：

```
节点.js:201
        扔 e; // process.nextTick 错误，或第一次滴答时的 'error' 事件
              ^
错误：听 EADDRNOTAVAIL
    在 errnoException (net.js:614:11)
    在 Array.0 (net.js:689:28)
    在 EventEmitter._tickCallback (node.js:192:40)

```

我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-08-31T14:27:02.043

我遇到了这个问题，我认为这是一个*端口*问题，但结果是一个*IP*问题。

我的`HOST`环境变量指向一个静态 IP，而我的 Node 服务器正在监听该地址。在我的路由器回收的某个时候，它开始为我的机器分配一个新的 IP，并且我开始收到您发布的错误。通过更改我的服务器正在侦听的地址来修复它。

我的配置：

```
app.set('port', process.env.PORT || 3000);
app.set('host', process.env.HOST || '0.0.0.0');

http.createServer(app).listen(app.get('port'), app.get('host'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

确保您的主机正在访问您的机器。在任何情况下，正如@miltonb 建议的那样，环回应该始终有效：

```
app.set('host', '127.0.0.1'); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-05T00:46:09.393

我遇到了同样的错误，然后我更改了端口并开始工作

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-06T04:35:43.640

我认为你需要更多的上下文，比如你的一些代码。我猜你开始在网络服务器或套接字上监听？基于这个假设，当我在我的测试服务器上运行一个基本的 Web 服务器时，我会得到类似的结果，除非我使用 localhost 运行。

```
events.js:48
        throw arguments[1]; // Unhandled 'error' event
                   ^
Error: listen EADDRNOTAVAIL
    at errnoException (net.js:670:11)
    at Array.0 (net.js:756:28)
    at EventEmitter._tickCallback (node.js:190:38) 
```

尝试将 [hostname] 参数更改为 localhost：

```
var http = require('http');
http.createServer( function ).listen(8000, '127.0.0.1'); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-05T04:24:45.570

会不会是那个节点已经在运行服务器了？我收到了类似的错误，并在故障排除时发现了这一点。关闭以前的节点服务器解决了我的问题。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-08-22T20:20:25.720

对我来说，问题是我写的 IP 根本不存在 :) 通常在家里我有一个`192.168.x.x`IP，重新启动后我有一个不同的地址......当我尝试`gulp serve`我的应用程序时 - 它有一个配置用旧IP....

一如既往地`127.0.0.1`有效，但是当您想使用其他设备验证您的网站时，您想使用外部 IP `192.168.x.x`... 或类似的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-01T06:16:43.557

大多数情况下，它将是 IP 地址或主机名。原因是，node js 将其作为启动服务器的关键项。如果存在冲突或不正确的 IP 地址，则会出现此错误

错误：听 EADDRNOTAVAIL

希望这可以帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-11-09T04:02:58.067

对我来说，我遇到了同样的错误，当我检查我的配置时，我发现`host=127.0.0.0`会引发错误，因为它应该`127.0.0.1`是`127.0.0.0`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-13T06:40:53.047

当 'ip addr add i:p:v:6' 仍处于不确定状态或其他情况（刚刚执行/正在执行）时，也会发生这种情况，并且我认为界面还没有完全准备好收听并且仍在忙于添加新的 ipv6 地址。

使用 execSync [参见[https://nodejs.org/api/child_process.html#child_process_child_process_execsync_command_options]](https://nodejs.org/api/child_process.html#child_process_child_process_execsync_command_options])调用“睡眠”暂停 2 秒似乎允许听不错误错误：听 EADDRNOTAVAIL。

*[我认为这在 Ubuntu 上的 NodeJS 7.4.0 中确实是一个错误，因为在使用/侦听连接之前的那一刻创建 ipv4 地址不会发生这种情况。]*

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-09-07T19:09:20.700

例如，检查您的 IP`ipconfig`地址并添加任何端口`3004`。下面的代码终于为我工作了。如果您想从网络中的其他设备访问此服务器。或者只需将本地主机 ip 设置为`127.0.0.1`并从您的设备获取访问权限。

```
var server = require('http').createServer(app);
server.listen(3004, '192.168.x.x', function () {
  console.log("Listening on port 3000!");
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-02-01T21:07:53.417

```
var express = require('express');

var app = express();
app.set('port', process.env.PORT || 3000);
app.set('host', process.env.HOST || 'localhost');

app.listen(app.get('port'), function(){
  console.log('Express server listening on port ' + app.get('host') + ':' + app.get('port'));
}); 
```

为我工作。
它也适用于调试`localhost`和您的本地 IP，无需任何更改。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2018-02-26T07:50:05.770

就我而言，我通过检查目录 /tasks/options 来修复它

我发现 connect.js 文件的静态 IP 地址不正确。我只是将其更改为正确的，并且有效。

# html - css html 安全文件名 图片背景 vs 图片标签

> ID：10809741
> 
> 赞同：0
> 
> 时间：2012-05-30T03:46:10.423
> 
> 标签：html, css

嗨，最近我在我的代码中发现了这个错误。

这个链接“ [http://www.zendez.com/beta/files/retreatphotos/larges/idretreat70/Mayacamas Ranch, Calistoga, California_Paradise with a Purpose.jpg](http://www.zendez.com/beta/files/retreatphotos/larges/idretreat70/Mayacamas%20Ranch,%20Calistoga,%20California_%20Paradise%20with%20a%20Purpose.jpg) ”如果我使用它是安全的

```
<img scr="http://www.zendez.com/beta/files/retreatphotos/larges/idretreat70/Mayacamas Ranch, Calistoga, California_ Paradise with a Purpose.jpg"> 
```

但效果不好，至少如果我使用，图像不会显示

```
<div style="background:url(http://www.zendez.com/beta/files/retreatphotos/larges/idretreat70/Mayacamas Ranch, Calistoga, California_ Paradise with a Purpose.jpg)" style="width:100%; height:300px"></div> 
```

有谁知道为什么对 img 有效但对背景无效？任何建议都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T03:57:49.377

将网址更改为`http://www.zendez.com/beta/files/retreatphotos/larges/idretreat70/Mayacamas%20Ranch,%20Calistoga,%20California_%20Paradise%20with%20a%20Purpose.jpg`可能会起作用..

正如我在评论中所说，您的 url 没有正确[urlencoded](http://www.w3schools.com/tags/ref_urlencode.asp)。网址不允许有空格。我假设浏览器知道如何处理 img 标签的写得不好的 src 属性，但在 css 上失败，很可能是因为您没有将 url 封装在引号中，如下所示：

`background:url('http://www.zendez.com/beta/files/retreatphotos/larges/idretreat70/Mayacamas Ranch, Calistoga, California_ Paradise with a Purpose.jpg');`

无论哪种方式，尽量避免文件名中的所有空格，您最终会减少头痛。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T04:08:59.097

将您的网址放在引号中。那就是......你有：

```
background:url(http://yadda/yadda.jpg); 
```

将其更改为：

```
background:url('http://yadda/yadda.jpg'); 
```

当我这样做时，它对我有用，无论是空格还是替换为`%20`. 始终尝试使文件名保持简单。您的文件系统或编程环境可能对标点符号和空格处理不当。

无论如何，报价是你的朋友。

此外，请考虑将您的样式放入标签中，而不是将其嵌入到标签中。

```
<head>
<style type="text/css">
  .foo {
    background:url=('http://yadda/yadda.jpg') no-repeat;
  }
</style>
</head>

<body>
<p class="foo">Hello, world.</p>
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T04:03:19.400

您不应该在 div 中放置两个 Style 属性，因为最后一个样式可能无法正常工作。

# css - 在较低的 z-index 中较大的 z-index？

> ID：10809748
> 
> 赞同：2
> 
> 时间：2012-05-30T03:47:30.257
> 
> 标签：css

我似乎无法找到一种方法来`z-index`为具有低于`z-index`覆盖元素的父元素的元素分配更高的优先级。

考虑这个例子：

```
<div style="width: 100px; height: 100px; background: #F00; position: absolute; left: 0; top: 0; z-index: 1;">
    <div style="width: 50px; height: 100px; background: #00F; position: absolute; left: 50px; top: 0; z-index: 3;"></div>
</div>
<div style="width: 100px; height: 50px; background: #0F0; position: absolute; left: 0; top: 50px; z-index: 2;"></div> 
```

结果：

![在此处输入图像描述](../Images/4ca2927c1bc3299c299d637c774e5993.png)

预期结果：

![在此处输入图像描述](../Images/ad134a1a646695ca7a6939338c5fc3b8.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T03:53:33.013

您可以这样做，*但*前提是父级没有`position: relative`or`absolute`属性。因此，如果您`position: absolute`从第一个 div 中删除 ，它将按预期工作。

jsFiddle：http: [//jsfiddle.net/GEnHC/](http://jsfiddle.net/GEnHC/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T03:53:59.583

元素首先在每个级别上*排序*。所以它订购你的红色和绿色盒子，然后它订购你的红色盒子*里面*的蓝色盒子，它已经被确定在绿色盒子后面。没有办法解决这个问题。您必须考虑元素的替代布局，这将允许您想要的布局，例如简单地[从其 parent 中删除蓝色框](http://jsfiddle.net/TBWfZ/1/)。

# php - 如何使用 PDO::lastInsertId()？

> ID：10809752
> 
> 赞同：0
> 
> 时间：2012-05-30T03:47:46.837
> 
> 标签：php, pdo

```
$sql='INSERT INTO complaints(complaint_id) values(default)';
$db->query($sql,array());

//get newly added complaint_id

$complaint_id=$db->lastInsertId(); 
```

我使用上面的代码从投诉表中获取最后一个插入 ID。但它给出了一个错误，比如 `Fatal error: Call to undefined method EMMACore\Utils\DBConnection::lastInsertId() in /h...`有人可以告诉我我的应用程序有什么问题吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T04:00:26.520

在大多数情况下，PDO 实例是 的一个属性`EMMACore\Utils\DBConnection`，因此请查看源代码并找到它。

类似的东西：`$db->getDbh()->lastInsertId();`哪里`getDbh`（或类似的东西）返回 PDO 实例。

***编辑：***看到你的结果后`var_dump()`，这是肯定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T04:01:15.253

`class db extends PDO`

例如，您可以参考此链接[PHP PDO Wrapper Class](http://code.google.com/p/php-pdo-wrapper-class/)。

# asp.net-mvc - 将 web 从 asp.net 应用程序迁移到 MVC

> ID：10809753
> 
> 赞同：2
> 
> 时间：2012-05-30T03:47:51.230
> 
> 标签：asp.net-mvc, webforms, migration

我一直在从事基于 asp.net webforms 的 CMS 项目。它遵循简单的多层架构，并包含一个单独的 aspx 页面，其中以模块形式动态加载用户控件 (ascx)。

现在很多客户都要求在 MVC 中使用它。我想知道将其无缝转换为 MVC 是否可行。炒作是因为 MVC 是 dot not 的新范式，还是因为它确实产生了巨大的好处？

从 WebForms 迁移到 MVC 的最简单方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T03:53:56.573

您始终可以将现有的 ASP.NET Web 应用程序项目转换为包含 MVC 并使其成为混合应用程序。Scott Hanselman 写了一篇[简单的文章](http://www.hanselman.com/blog/IntegratingASPNETMVC3IntoExistingUpgradedASPNET4WebFormsApplications.aspx)来演示如何做到这一点。

如果您尝试将 MVC 添加到现有的 ASP.NET Web 应用程序，请查看此[链接](http://www.techiesweb.net/how-to-get-add-view-add-controller-menus-in-solution-explorer-when-converting-existing-asp-net-web-for-project-to-mvc/)。我在那里写了一个有用的提示，以便在解决方案资源管理器中引入 MVC 特定的上下文菜单（添加控制器/添加视图）。

以下声明纯属个人。（当然两者各有优缺点）

***就个人而言，如果我开始一个新项目，我会选择 MVC 而不是 webforms。因为我尝过。这是上瘾的**。:)* **我认为**我的 MVC 项目比 webforms 更干净。

# iphone - axisLabels 不显示事件 majorTickLocations 已设置

> ID：10809760
> 
> 赞同：0
> 
> 时间：2012-05-30T03:48:53.617
> 
> 标签：iphone, ios, core-plot

经过大量时间投入，我无法弄清楚我错过了什么。我遵循了许多与自定义标签相关的示例，但找不到答案。有什么问题？非常感谢您的帮助。

自定义标签定义：

```
NSMutableArray *customArray = [[NSMutableArray alloc] initWithCapacity:[xcLabels count]];
int idx = 0;
for (NSNumber *tickLocation in  xcLabels) {  
    CPTAxisLabel *iLabel = [[CPTAxisLabel alloc] initWithText:[xcLabels objectAtIndex:idx++] textStyle:x.labelTextStyle];
    iLabel.tickLocation = CPTDecimalFromInt(idx);
    iLabel.offset       = x.labelOffset + x.majorTickLength;
    iLabel.rotation = M_PI/2;
    [customArray addObject:iLabel];
    [iLabel release];
}
x.axisLabels = [NSSet setWithArray:customArray];
NSLog(@"x.axisLabels%@", x.axisLabels);
[customArray release]; 
```

主要Ticklocation定义：

```
 NSMutableArray *ticks = [[[NSMutableArray alloc] initWithCapacity:[xcLabels count]] autorelease];
for ( NSUInteger loc = 0; loc < [xcLabels count]; ++loc ) {
    [ticks addObject:[NSDecimalNumber numberWithUnsignedInteger:loc]];}
NSLog(@"tickLocations%@", ticks);
x.majorTickLocations =[NSSet setWithArray:ticks];
NSLog(@"x.majorTickLocations%@", x.majorTickLocations); 
```

数据定义

```
- (void) xLabels {
xcLabels = [[NSMutableArray alloc] initWithCapacity:[self.dataGraph count]];
for (int i = 0; i < [self.dataGraph count]; ++i) {
    NSNumber* nsValue = [self.dataGraph objectAtIndex:i];
    CGPoint point = [nsValue CGPointValue];
    NSLog(@"point.x%f", point.x);
    NSDate *xFecha = [[NSDate alloc] initWithTimeIntervalSinceReferenceDate:point.x];
    NSLog(@"xFecha%@", xFecha);
    NSDateFormatter* df = [[NSDateFormatter alloc] init];
    [df setDateFormat:@"dd-MM"];
    NSString *nstFecha = [df stringFromDate:xFecha];
    [df release];
    [xcLabels addObject:nstFecha];}} 
```

x.axisLabels 输出：

```
x.axisLabels{(
<<CPTAxisLabel: 0x6e7c250> {<<<CPTTextLayer: 0x6e7bf60> bounds: {{0, 0}, {35, 19}}> "14-01">}>,
<<CPTAxisLabel: 0x6e7c040> {<<<CPTTextLayer: 0x6e7da30> bounds: {{0, 0}, {35, 19}}> "28-01">}>,
<<CPTAxisLabel: 0x6e7dae0> {<<<CPTTextLayer: 0x6e7db10> bounds: {{0, 0}, {35, 19}}> "14-02">}>,
<<CPTAxisLabel: 0x6e7dbc0> {<<<CPTTextLayer: 0x6e7dbf0> bounds: {{0, 0}, {35, 19}}> "25-02">}>,
<<CPTAxisLabel: 0x6e7dca0> {<<<CPTTextLayer: 0x6e7dcd0> bounds: {{0, 0}, {35, 19}}> "14-03">}>,
<<CPTAxisLabel: 0x6e7dd80> {<<<CPTTextLayer: 0x6e7ddb0> bounds: {{0, 0}, {35, 19}}> "30-03">}>,
<<CPTAxisLabel: 0x6e7de60> {<<<CPTTextLayer: 0x6e7de90> bounds: {{0, 0}, {35, 19}}> "14-04">}>,
<<CPTAxisLabel: 0x6e7df40> {<<<CPTTextLayer: 0x6e7df70> bounds: {{0, 0}, {35, 19}}> "29-04">}>,
<<CPTAxisLabel: 0x6e7e020> {<<<CPTTextLayer: 0x6e7e050> bounds: {{0, 0}, {35, 19}}> "09-05">}>,
<<CPTAxisLabel: 0x6e7e100> {<<<CPTTextLayer: 0x6e7e190> bounds: {{0, 0}, {35, 19}}> "29-08">}>,
<<CPTAxisLabel: 0x6e7e200> {<<<CPTTextLayer: 0x6e7e230> bounds: {{0, 0}, {35, 19}}> "29-09">}>,
<<CPTAxisLabel: 0x6e7e2e0> {<<<CPTTextLayer: 0x6e7e370> bounds: {{0, 0}, {35, 19}}> "27-10">}>,
<<CPTAxisLabel: 0x6e7e3e0> {<<<CPTTextLayer: 0x6e7e410> bounds: {{0, 0}, {35, 19}}> "29-11">}>,
<<CPTAxisLabel: 0x6e7e4c0> {<<<CPTTextLayer: 0x6e7e550> bounds: {{0, 0}, {35, 19}}> "28-12">}> 
```

)}

x.majorTickLocations 输出

```
2012-05-29 22:21:46.960 AbcPrpk[8931:fb03] x.majorTickLocations{(
0,
13,
12,
11,
7,
6,
2,
1,
10,
9,
8,
5,
4,
3
)} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T01:26:30.923

您已将`tickLocation`所有自定义标签的 设置为零 (0)。`idx`在循环内递增。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T04:55:21.177

我在上面没有看到任何代码告诉我您的标签正在添加到视图树中（例如，[self addSubview:someLabel]）

您可以通过在任何标签上记录窗口属性的值来验证这是您的问题——如果它返回 nil，那么您的视图尚未添加到视图树中。

# php - 关于 json_encode 和 ajax 数据类型：“json”

> ID：10809761
> 
> 赞同：0
> 
> 时间：2012-05-30T03:48:55.323
> 
> 标签：php, javascript, json

在我的 ajax 代码中：

```
$.ajax({
        url: CI_ROOT + "isUserExist",
        type: "GET",
        data: {recepient: recepient},
        success: function(r) {
            console.log(r)
        }
}) 
```

给我一个输出**[{"records":"1"}][{"records":"1"}]**所以我通过在我的 ajax 代码中添加**dataType:"json"**将它解析为 json 。但是当我解析它时，它没有给我输出，而是在 try-catch-block 上出现错误。

如何让它显示为对象？在我的 PHP 代码中，我是这样做的：

```
 for ($i = 0; $i < count($matches[0]); $i++) {
     echo json_encode($this->searchmodel->doesUsersExists($matches[0][$i]));
 } //gets the user id of the user from a given string. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T03:52:45.110

将每个条目添加到一个数组中，然后对该数组进行 json 编码，而不是分别对每个条目进行 json 编码。如果您只调用一次 json_encode，您将获得有效的 JSON：

```
$result = array();
for ($i = 0; $i < count($matches[0]); $i++) {
     $result[] = $this->searchmodel->doesUsersExists($matches[0][$i]);
} //gets the user id of the user from a given string.

echo json_encode($result); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T03:50:10.567

那不是有效的 JSON。从您现有的结果中创建一个数组并对其进行*编码*。

# android - 将 EditText 中的文本保存到 Android 内部存储中

> ID：10809766
> 
> 赞同：0
> 
> 时间：2012-05-30T03:50:37.083
> 
> 标签：android, storage, android-edittext, filenotfoundexception, internal

所以我想保存用户在他们的 EditText 中写的任何内容，以便下次保存。这个完全相同的代码适用于 java 项目，但对于 Android 项目，它不起作用。

代码如下。

PrintWriter out = new PrintWriter("hi"); 总是给出 FileNotFoundException e。

在java项目中，这段代码 PrintWriter out = new PrintWriter("hi"); 创建一个名为“hi”的新文件，但 android 项目不生成新文件而是返回错误。当应用程序稍后再次打开时，它不会保存要打开的 EditText 中的字符串。

有没有人可以解决这个问题？

```
 public void onCreate(blablabla)
 {blablabla
   try {
        FileReader reader = new FileReader ("hi");
        Scanner in = new Scanner(reader);
        String line = in.nextLine();
        mEditText.setText(line);
        in.close();

    } catch (FileNotFoundException e) {
        mEditText.setText("");
        Toast.makeText(mContext, "null!!", Toast.LENGTH_SHORT).show();
    }

   @Override    
protected void onDestroy() 
{        
    super.onDestroy();        
    // The activity is about to be destroyed.  
    try {                           
        PrintWriter out = new PrintWriter("hi");
        out.write(mEditText.toString());
        out.close();
    } catch (FileNotFoundException e) {
        Toast.makeText(mContext, "Can't save", Toast.LENGTH_SHORT).show();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T07:42:02.813

可能是安卓权限问题。见[http://developer.android.com/guide/topics/manifest/manifest-intro.html#perms](http://developer.android.com/guide/topics/manifest/manifest-intro.html#perms)

或者更好地使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)？

# windows-server-2008-r2 - C 应用程序使用 GetOpenFileName 崩溃。DEP 停止崩溃

> ID：10809767
> 
> 赞同：1
> 
> 时间：2012-05-30T01:33:34.500
> 
> 标签：windows-server-2008-r2, c, winapi

我们有一个 C 应用程序，它使用 GetOpenFileName 通用对话框让用户选择一个文件。我们一直在 Windows2008R2 上发生崩溃。我发现如果我们在应用程序上放置 DEP 异常，崩溃就会停止

但是，我无法弄清楚我们做错了什么，或者我们可以做些什么来阻止崩溃。我把我们的代码放在下面。

```
typedef struct {
    OPENFILENAME    ofn;
    COUNT       nInternal;
    COUNT       nExternal;
    char        szDirName[_MAX_DIR];
    char        szFile[_MAX_PATH];
    char        szFileTitle[_MAX_PATH];
    char        szFilter[128];
} OPENFILENAMEINFO;

typedef OPENFILENAMEINFO FAR *LPOPENFILENAMEINFO;

LPOPENFILENAMEINFO RequestFileNameEx(HWND hDlg, LPSTR lpExt, BOOL bSave, LPSTR lpInit)
{

    LPOPENFILENAMEINFO lpFileNameInfo;
    int i;
    DWORD   dwError;
    DWORD   dwSize;
    LPSTR   lpDir;
    LPSTR   lpDrive;

    lpFileNameInfo = (LPOPENFILENAMEINFO)mballc(1,sizeof(OPENFILENAMEINFO));
    strcpy(lpFileNameInfo->szFilter,lpExt);

    for (i=0; lpFileNameInfo->szFilter[i] != '\0'; i++) {
        if (lpFileNameInfo->szFilter[i] == '|')
            lpFileNameInfo->szFilter[i] = '\0';
    }

    memset(&lpFileNameInfo->ofn, 0, sizeof(OPENFILENAME));

    lpFileNameInfo->ofn.lStructSize = sizeof(OPENFILENAME);
    lpFileNameInfo->ofn.hwndOwner       = hDlg;
    lpFileNameInfo->ofn.lpstrFilter = lpFileNameInfo->szFilter;
    lpFileNameInfo->ofn.nFilterIndex    = 1;
    lpFileNameInfo->ofn.lpstrFile       = lpFileNameInfo->szFile;
    lpFileNameInfo->ofn.nMaxFile        = sizeof(lpFileNameInfo->szFile);
    lpFileNameInfo->ofn.lpstrFileTitle  = lpFileNameInfo->szFileTitle;
    lpFileNameInfo->ofn.nMaxFileTitle   = sizeof(lpFileNameInfo->szFileTitle);

    lpFileNameInfo->ofn.lpstrInitialDir = _getcwd(lpFileNameInfo->szDirName, _MAX_DIR);

    if (bSave) {
        lpFileNameInfo->ofn.Flags           = OFN_SHOWHELP | OFN_PATHMUSTEXIST | OFN_OVERWRITEPROMPT | OFN_NOCHANGEDIR;
        dwError = GetSaveFileName(&lpFileNameInfo->ofn);
    } else {
        lpFileNameInfo->ofn.Flags           = OFN_SHOWHELP | OFN_PATHMUSTEXIST | (bDir==FALSE?OFN_FILEMUSTEXIST:0) | OFN_NOCHANGEDIR;
        dwError = GetOpenFileName(&lpFileNameInfo->ofn);
    }

    if (!dwError) {
        dwError = CommDlgExtendedError();
        if (dwError)
            ResourceHandleError(GETOPENFAIL, dwError);
        mbfree(lpFileNameInfo);
        return(NULL);
    }

    return(lpFileNameInfo);
} 
```

崩溃转储堆栈跟踪看起来像

```
0023:73E61FFF (0x080D7974 0x080D7970 0x078B62F0 0x00000000) msxml6.dll
0023:73E68165 (0x080D7970 0x080D78F0 0x078B62F0 0x080D78F0) msxml6.dll, DllCanUnloadNow()+22084 byte(s)
0023:73E67D08 (0x078B62F0 0x080D7970 0x00000000 0x080D78F0) msxml6.dll, DllCanUnloadNow()+20967 byte(s)
0023:73E6827A (0x080D78F0 0x080D7970 0x080D7950 0x59E489BA) msxml6.dll, DllCanUnloadNow()+22361 byte(s)
0023:73E68241 (0x080D7970 0x080D7950 0x59E489BA 0x00000000) msxml6.dll, DllCanUnloadNow()+22304 byte(s)
0023:73E69DDF (0x00000000 0x080D7950 0x00000000 0x0762FAE0) msxml6.dll, DllCanUnloadNow()+29374 byte(s)
0023:73E6BF9F (0x080D7970 0x080D7950 0x71932915 0x078B5E90) msxml6.dll, DllGetClassObject()+5125 byte(s)
0023:73E6BF83 (0x73E81B38 0x080D39C0 0x080D39C0 0x080D3980) msxml6.dll, DllGetClassObject()+5097 byte(s)
0023:73E6C318 (0x71932881 0x06148CB8 0x06148CB8 0x00000000) msxml6.dll, DllGetClassObject()+6014 byte(s)
0023:73E6CD18 (0x720B35A0 0x0762FBD8 0x06148CB8 0x0762FD68) msxml6.dll, DllGetClassObject()+8574 byte(s)
0023:73E78671 (0x720B35A0 0x0762FBD8 0x0762FD68 0x00000000) msxml6.dll, DllGetClassObject()+56023 byte(s)
0023:73E6AAE5 (0x73E6AC28 0x00000000 0x720B35A0 0x0762FBD8) msxml6.dll, DllCanUnloadNow()+32708 byte(s)
0023:74B0A0E1 (0x00000000 0x00000000 0x00000000 0x00000001) ole32.dll, CoCreateInstanceEx()+0915 byte(s)
0023:74B09FA1 (0x720B3614 0x00000000 0x00000017 0x00000000) ole32.dll, CoCreateInstanceEx()+0595 byte(s)
0023:74B09E25 (0x720B3614 0x00000000 0x00000017 0x00000000) ole32.dll, CoCreateInstanceEx()+0215 byte(s)
0023:74B09D86 (0x720B3614 0x00000000 0x00000017 0x00000000) ole32.dll, CoCreateInstanceEx()+0056 byte(s)
0023:74B09D3F (0x720B3614 0x00000000 0x00000017 0x720B35A0) ole32.dll, CoCreateInstance()+0052 byte(s)
0023:720B352B (0x0553A7C0 0x00000000 0x0070E2DC 0x0070E288) FunDisc.dll
0023:720B9470 (0x0553A7C0 0x00000000 0x00000001 0x00000001) FunDisc.dll, DllGetClassObject()+21871 byte(s)
0023:720C3B69 (0x00000001 0x0070E288 0x8007000E 0x00000000) FunDisc.dll, DllUnregisterServer()+20504 byte(s)
0023:720B75AA (0x73751590 0x00000000 0x00000001 0x00000000) FunDisc.dll, DllGetClassObject()+13993 byte(s)
0023:720B1CE9 (0x73751590 0x00000000 0x00000001 0x055874F8) FunDisc.dll
0023:720B1C39 (0x00709310 0x73751590 0x00000000 0x00000001) FunDisc.dll
0023:73752F84 (0x055E2F28 0x00709310 0x73751590 0x00000000) NetworkItemFactory.dll
0023:737530A5 (0x055E2F28 0x0762FF88 0x763643C0 0x055E2F28) NetworkItemFactory.dll
0023:73753144 (0x055E2F28 0x00000000 0x00000000 0x03EDFB9C) NetworkItemFactory.dll
0023:763643C0 (0x03EDFB9C 0x0762FFD4 0x77029EF2 0x03EDFB9C) SHLWAPI.dll, IUnknown_QueryService()+0346 byte(s)
0023:74C9339A (0x03EDFB9C 0x13BB74FB 0x00000000 0x00000000) kernel32.dll, BaseThreadInitThunk()+0018 byte(s)
0023:77029EF2 (0x763642ED 0x03EDFB9C 0xFFFFFFFF 0x770B736F) ntdll.dll, RtlInitializeExceptionChain()+0099 byte(s)
0023:77029EC5 (0x00000000 0x00000000 0x00000000 0x00000000) ntdll.dll, RtlInitializeExceptionChain()+0054 byte(s) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:16:44.547

我遇到了同样的问题，并通过 Synastry 找到了可能的解决方案

[http://social.msdn.microsoft.com/Forums/en-US/vcmfcatl/thread/5037519a-78e2-42f4-94cd-bbe88e0f16d6/](http://social.msdn.microsoft.com/Forums/en-US/vcmfcatl/thread/5037519a-78e2-42f4-94cd-bbe88e0f16d6/)

> 我们所有遭受这个问题的人在函数“CoUninitialize”中都有一个调用堆栈。该函数在 COM 的工作线程结束时自动调用。这个工作线程不是由用户直接创建的，但是当调用使用 COM 库的某些函数时，它会创建它（或它们）。wagscallion 和我通常将函数称为“GetOpenFileName”。我猜 GSansoucie 也调用了一些 COM 自动化函数。
> 
> 结束工作线程并被称为“CoUninitialize”是 COM 库的合法和正常行为。这不是原因。我们遇到的异常是由于 COM Server 仍在使用时未初始化而引起的。但是我们的（或至少我的）代码也是合法和适当的，除了一件事。我从未在我的代码中调用过“CoInitialize”或“CoInitializeEx”函数。
> 
> COM 库有一个内部计数（类似于引用计数器），它通过调用 CoInitialize 或 CoInitializeEx 递增，并通过调用 CoUninitialize 递减。但我没有调用任何初始化函数。虽然我没有调用它，但 GetOpenFileName 函数在 GetOpenFileName 的实现中为它的工作线程调用它。并且在函数返回后，工作线程会等待另一个 COM 作业一段时间。这就是为什么 GetOpenFileName 函数返回时不会立即发生异常的原因。但是工作线程决定自己结束，他们调用 CoUninitialize，现在 COM 库服务器的内部计数变为 0，并且 CoUninitialize 从内存中释放所有资源。
> 
> 但是在 GetOpenFileName 函数返回后，一些资源应该保留在内存中（我不能确定这一点，但如果这个假设不成立，我们将永远不会遇到异常）。为了保持它们不被释放，我们需要在程序的初始化中调用 CoInitialize 或 CoInitializeEx（MSDN 推荐后一种）。我们还需要在程序完成之前调用 CoUninitialize。
> 
> 简而言之，我们需要在程序开始时调用“CoInitialize”或“CoInitializeEx”，在程序结束时调用“CoUninitialize”。但是 MSDN 没有针对 GetOpenFileName 或任何其他使用 COM 库的函数对此进行描述。:-(
> 
> 就我而言，通过调用初始化程序和取消初始化程序，问题就消失了，现在一切正常。看看并将其应用于您的代码。如果您知道还有其他原因导致此异常，请也告诉我们。:-)
> 
> 感谢您的阅读。

对我自己来说，这不是解决方案，而是在哪里查看的提示。我在我的多线程应用程序中使用了 CoInitialize，它在内部使用 COINIT_APARTMENTTHREADED 调用 CoInitializeEx。我现在将呼叫从 CoInitialize(NULL) 更改为 CoInitializeEx(NULL, COINIT_MULTITHREADED) ，我的问题似乎消失了。

# admob - 如何将 GreyStripe 集成到带有自定义事件的 admob 中介中

> ID：10809768
> 
> 赞同：1
> 
> 时间：2012-05-30T03:50:48.023
> 
> 标签：admob, custom-event

我正在尝试将 GreyStripe（不受支持）集成到带有自定义事件的 admob 中介中，我还阅读了以下指南： [https ://developers.google.com/mobile-ads-sdk/docs/ios/mediation/ #customevents](https://developers.google.com/mobile-ads-sdk/docs/ios/mediation/#customevents)

但是对于初学者来说仍然很难理解，有没有人可以提供示例代码或一些教程。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T21:42:04.753

实施在某种程度上取决于网络，但这里有一个完整示例，说明如果尚未支持，您将如何通过自定义事件集成 AdMob 网络。

在您的中介展示位置中创建自定义事件：

*   标签 - blahblahblah（可以是任何字符串）
*   类名 - CustomAd（您的类的名称。在本例中为 CustomAd）
*   参数 - a1401234567890（在 AdMob 的情况下，您只需要您的发布商 ID。您可能希望在此处使用您自己的发布商 ID，这只是一个示例）

你的实现看起来像这样：

CustomAd.h

```
#import "GADCustomEventBanner.h"
#import "GADCustomEventBannerDelegate.h"
#import "GADBannerView.h"
#import "GADBannerViewDelegate.h"

@interface CustomAd : NSObject <GADCustomEventBanner, GADBannerViewDelegate> {
  GADBannerView *bannerView_;
}

@end 
```

CustomAd.m

```
#import CustomAd.h

@implementation CustomAd

// Will be set by the AdMob SDK.
@synthesize delegate;

- (void)dealloc {
  bannerView_.delegate = nil;
  [bannerView_ release];
  [super dealloc];
}

#pragma mark -
#pragma mark GADCustomEventBanner

- (void)requestBannerAd:(GADAdSize)adSize
              parameter:(NSString *)serverParameter
                  label:(NSString *)serverLabel
                request:(GADCustomEventRequest *)customEventRequest  {
  // Create the bannerView with the appropriate size.
  bannerView_ = [[GADBannerView alloc] initWithAdSize: adSize];

  // Set the delegate to listen for callbacks.
  [bannerView_ setDelegate:self];

  // Set the publisher ID for the banner.  This comes from server parameter
  // you provide when creating the custom event in mediation.
  bannerView_.adUnitID = serverParameter;

  // Let the bannerView know which UIViewController to restore after returning
  // from and ad click.  The UIViewController is available from
  // GADCustomEventBannerDelegate.
  bannerView_.rootViewController = [self.delegate viewControllerForPresentingModalView];

  // Create an ad request using custom targeting options from the custom event
  // request.
  GADRequest *request = [GADRequest request];
  [request setAdditionalParameters:[customEventRequest additionalParameters]];
  [request setBirthday:[customEventRequest userBirthday]];
  [request setGender:[customEventRequest userGender]];
  [request setTesting:[customEventRequest isTesting]];
  if ([customEventRequest userHasLocation]) {
    [request setLocationWithLatitude:[customEventRequest userLatitude] 
                           longitude:[customEventRequest userLongitude]
                            accuracy:[customEventRequest userLocationAccuracyInMeters]];
  }
  [bannerView_ loadRequest:request];
}

#pragma mark -
#pragma mark GADBannerView Callbacks

- (void)adViewDidReceiveAd:(GADBannerView *)adView {
  [self.delegate customEventBanner:self didReceiveAd:adView];
}

- (void)adView:(GADBannerView *)view
    didFailToReceiveAdWithError:(NSError *)error {
  [self.delegate customEventBanner:self didFailAd:error];
}

- (void)adViewWillPresentScreen:(GADBannerView *)adView {
  [self.delegate customEventBanner:self clickDidOccurInAd:adView];
  [self.delegate customEventBannerWillPresentModal:self];
}

- (void)adViewWillDismissScreen:(GADBannerView *)adView {
  [self.delegate customEventBannerWillDismissModal:self];
}

- (void)adViewDidDismissScreen:(GADBannerView *)adView {
  [self.delegate customEventBannerDidDismissModal:self];
}

- (void)adViewWillLeaveApplication:(GADBannerView *)adView {
  [self.delegate customEventBannerWillLeaveApplication:self];
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T06:59:52.760

我正在尝试为 Nexage 编写自定义事件，它不会删除旧视图并将新广告放在屏幕上。

```
static BOOL hasInitializedOnce;

@implementation NexageAdMobCustomEventBanner

@synthesize delegate, bannerView_;

- (void)requestBannerAd:(GADAdSize)adSize
          parameter:(NSString *)serverParameter
              label:(NSString *)serverLabel
            request:(GADCustomEventRequest *)request
{
    if (!hasInitializedOnce)
    {
        // Initialize Manager
        [[NexageManager sharedInstance] startUpWithDelegate:self
                                           mediationUrl:@"http://xxxxx.nexage.com"
                                                    dcn:@"xxxxxx"
                                             attributes:nil
                                               features:nil];
    [NexageManager sharedInstance].currentViewController = [self.delegate viewControllerForPresentingModalView];

    // Create banner and immediately get ad
    bannerView_ = [[NexageAdView alloc] initWithPosition:serverParameter frame:CGRectMake(0, 0, 320, 50)];
    [bannerView_ setIntervalTo:10];

    // Set it so that it won't call our Manager again
    hasInitializedOnce = YES;
    NSLog(@"Creating the Banner view for Mediation callback");
}
else
{
//        [bannerView_ rollover];
    NSLog(@"Rolling over the Banner view for Mediation callback");
}

}

- (void)adReceived:(UIView *)ad position:(NSString *)pos
{
    NSLog(@"Nexage Banner received!");
    [self.delegate customEventBanner:self didReceiveAd:ad];
}

- (void)adDidHide:(UIView *)adView
{
    NSLog(@"Called here...");
}

- (void)didFailToReceiveAd:(NSString *)position
{
    [self.delegate customEventBanner:self didFailAd:[NSError errorWithDomain:@"Nexage" code:200 userInfo:[NSDictionary dictionaryWithObjectsAndKeys:@"Not able to get a new Ad", NSLocalizedDescriptionKey, nil]]];
} 
```

# javascript - 无法在 Javascript 中进行递归调用

> ID：10809769
> 
> 赞同：2
> 
> 时间：2012-05-30T03:51:04.340
> 
> 标签：javascript

当我尝试运行该程序时，我在 Firefox 中收到错误消息：

> moveDate 在第 41 行未定义

（参考线`window.setTimeout("moveDate()",100);`.

任何想法为什么？我认为递归函数能够定义自己，然后调用自己。

```
function monthScroller(){
    document.getElementById("month").style.visibility = "visible";
    var x = 0;
    var y = 0;
    var dest_x = window.innerWidth/2;
    var dest_y = window.innerHeight/2;  
    var interval = 1;

    function moveDate() {
        if(x<dest_x){ x = x + interval;} 
        if(y<dest_y){ y = y + interval;}

        document.getElementById("month").style.top  = y+"px";
        document.getElementById("month").style.left = x+"px";

        if ((x+interval < dest_x) && (y+interval < dest_y)) {
                window.setTimeout("moveDate()",100);
        }
        else{
            name();
        }
    }
    moveDate();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T03:54:01.423

是的，他们是。然而，`window.setTimeout("moveDate()",100);`将在全局范围内评估该*代码字符串*`moveDate`-在那里找不到。相反，将函数引用传递给[`setTimout()`](https://developer.mozilla.org/en/DOM/window.setTimeout)：

```
 window.setTimeout(moveDate, 100); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T03:55:19.457

“moveDate”的范围在 monthScroller 方法内。monthScroller 函数括号之外的任何内容都看不到“moveDate”函数。所以......当 setTimeout 运行时，范围“窗口”和窗口在范围内没有名为“moveDate”的函数。您需要做的是将调用更改为以下内容：

```
setTimeout(moveDate,100); 
```

那应该对你有用。这样，您将 moveDate 函数/对象传递到 setTimeout。

# jquery-ui - 如何在 el 或标记名上不设置任何内容以使用 jquery ui 手风琴

> ID：10809771
> 
> 赞同：4
> 
> 时间：2012-05-30T03:51:10.467
> 
> 标签：jquery-ui, backbone.js, jquery-ui-accordion

jQueryUI 手风琴的结构是这样的，

```
<h2>title</h2><div>content</div> 
```

对于每个项目。我要做的是通过循环在我的主干视图中创建手风琴，但是主干为每个项目创建 div 标签，所以我有这样的 html 代码

```
<div><h2>title</h2><div>content</div></div> 
```

这使得 jQuery Accordion 控件无法正常工作，折叠和展开无法正常工作。如果我不能在 el 或标记名上设置任何内容，我认为这可以解决，但我无法找到。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T04:22:31.747

我认为您最好将手风琴留在一个视图中，然后在每个面板内有一个单独的视图。毕竟，`<h2>`s 是手风琴整体的控件，而不是特定面板的控件。

你会有一些像这样的每个面板视图：

```
var P = Backbone.View.extend({
    render: function() {
        // Add the panel's content to this.$el (which is a <div> by default).
        return this;
    }
}); 
```

然后是这样的手风琴视图：

```
var A = Backbone.View.extend({
    render: function() {
        var panels = [ ... ];
        for(var p, i = 0; i < panels.length; ++i) {
            p = new P({ ... });
            this.$el.append('<h3><a>' + panels[i] + '</a></h3>');
            this.$el.append(p.render().el);
        }

        // The accordion wants to know the sizes of things so
        // we let the DOM sort itself out before binding the
        // accordion.
        var _this = this;
        setTimeout(function() { _this.$el.accordion() }, 0);

        return this;
    }
}); 
```

然后你可以简单`$('#something').append((new A).render().el)`地一切都很好，同时把所有东西都留在它应该在的地方。

您还可以向视图添加一个`title`方法`P`，然后`A`询问面板它的名称/标题/标题应该是什么，以便所有面板信息都很好地包含在每个面板视图中。

演示：http: [//jsfiddle.net/ambiguous/Y49W8/](http://jsfiddle.net/ambiguous/Y49W8/)

# java - Tomcat 池不重置池。获得太多连接错误

> ID：10809773
> 
> 赞同：0
> 
> 时间：2012-05-30T03:51:25.907
> 
> 标签：java, tomcat, jdbc, connection-pooling

我在 tomcat 6 上使用 tomcat 池。以下是我的资源定义：

```
 <Resource name="jdbc/DBConnectionFactory"
            auth="Container"
            type="javax.sql.DataSource"
            username="root"
         password="root"
        removeAbandoned="true"
        removeAbandonedTimeout="600"
            driverClassName="com.mysql.jdbc.Driver"
            url="jdbc:mysql://localhost/sicad?autoReconnect=true"
               minIdle="3"
       maxActive="250"
       testWhileIdle="true"
       validationQuery="SELECT 1"
            maxIdle="10"
           timeBetweenEvictionRunsMillis="10000"
           minEvictableIdleTimeMillis="10000"
              maxWait="-1"
     /> 
```

现在，理想情况下，在达到 250 个连接之后，应该删除所有空闲连接，或者至少通过某种方式 mysql 不应该给出太多连接错误。另外，请注意，如果我执行 showprocesslist，则几乎不会有任何并发​​查询。所以我在想 timeBetweenEvictionRunsMillis 应该做删除空闲连接并保持池活动的技巧。但是一旦设置了 250 个连接，mysql 就会开始抛出太多连接错误。我期望 tomcat 池会从池中删除任何空闲连接，以保持池大小合理。还要注意，这并不是说有这么多正在被创建。

更糟糕的是，同样的配置在开发者机器和登台服务器+测试服务器上工作，但在产品服务器上不起作用。所有机器也是彼此的克隆。我已经重新启动了机器，重新安装了 mysql，但一切都是徒劳的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T02:39:02.470

没有任何效果，最后放弃了硬件和相同的代码库，驱动程序和 mysql 安装工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T05:39:48.543

是否在全局或应用程序级别上进行了配置？查看Mark Thomas[在 Apache Tomcat 上要避免的 4 个错误](http://www.tomcatexpert.com/blog/2011/08/03/4-mistakes-avoid-apache-tomcat)`context.xml`，了解如何将错误放置在错误的位置会创建比您预期更多的连接。长话短说：

*   如果您在全局中配置池，`context.xml`您将获得每个应用程序的池
*   如果您在应用程序中配置池，`context.xml`您只会得到一个池
*   如果你想在应用程序之间共享一个全局池，你必须使用[资源链接](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Resource_Links)

# ios5 - iOS 5 转换 UIAccelerometer

> ID：10809779
> 
> 赞同：4
> 
> 时间：2012-05-30T03:52:19.863
> 
> 标签：ios5, ios-simulator, core-motion, uiaccelerometer

我正在使用 xcode 4.2（并且将很快升级）和这些代码行

```
[[UIAccelerometer sharedAccelerometer] setUpdateInterval:(1.0 / kAccelerometerFrequency)];
[[UIAccelerometer sharedAccelerometer] setDelegate:self]; 
```

代码有效，但我有一个黄色警告说代码是`deprecated`，我查看了新的参考，`CoreMotion`现在做加速度计。我想知道写上述内容的新方法是什么..？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T09:32:18.420

Start accelerometer.

```
- (void)startAccelerometerData {
    motionManager = [[CMMotionManager alloc] init];
    motionManager.accelerometerUpdateInterval = 1/60.0;

    [motionManager startAccelerometerUpdatesToQueue:[NSOperationQueue currentQueue]
                                        withHandler:^(CMAccelerometerData *accelerometerData, NSError *error) {
        NSLog(@"x:= %f y:= %f z:= %f", accelerometerData.acceleration.x, accelerometerData.acceleration.y, accelerometerData.acceleration.z);
    } ];
} 
```

stop accelerometer

```
- (void)viewDidUnload  {
    [motionManager stopAccelerometerUpdates];
    motionManager = nil;
    [super viewDidUnload];
} 
```

# c# - C# 中的“全局”XML 设置

> ID：10809781
> 
> 赞同：2
> 
> 时间：2012-05-30T03:52:45.653
> 
> 标签：c#, xml, settings, global

设置文件是访问程序中任何地方的重要数据的好方法，因为我们可以简单地说

`string dogType = Settings.Default.FavoriteDogType;`或者`Settings.Default.FavoriteDogType = "Chiwawa";`

我喜欢这个，但文件由计算机管理（存储在用户设置中）。对于我的应用程序，我希望允许用户选择自己的设置文件（由他们存储）并将此文件用于设置，如

```
NewWayOfUsingSettings.Load("bobsFavoriteDogInfo.xml"); 
```

然后能够打电话

```
string dogType = NewWayOfUsingSettings.FavoriteDogType; 
```

*程序中“ bobsFavoriteDogInfo.xml* ”将包含要使用的设置的任何位置。（或者，Jane 可以加载“JanesBestDog.xml”等。）C# 是否支持一种简单的方法来做到这一点？

谢谢！

# c++ - 如何通过 C++ 运行 .exe 文件？

> ID：10809783
> 
> 赞同：0
> 
> 时间：2012-05-30T03:52:57.180
> 
> 标签：c++, exe, runtime-error

我的 .exe 应用程序需要在控制台窗口中打开。然后我必须`.txt`在控制台应用程序中键入 a 的名称才能读取。如何在我的代码中一次执行所有这些操作？
我曾经能够用 运行它（而不是让它读取.txt）`system("name.exe")`，但突然它给出了，

> 错误：输入“name.exe”不是有效的 Windows 应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T05:50:30.797

您可以让您的应用程序将文件名作为命令行参数读取，然后您可以使用 system("name.exe name.txt") 运行您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T06:11:27.550

在 Windows 中使用*CreateProcess* API 来执行此操作 - [http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425(v=vs.85).aspx)。不要使用*系统*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T06:02:11.613

> 1- 键入“name.txt” 2- 按 Enter 3- 键入 name2.exe 4- 按 Enter。我怎样才能通过我的 C++ 代码做到这一点？

```
std::string appName, fileName
std::cin >> appName >> fileName;
system(std::string(appName + " " + filename).c_str()) 
```

如果名称包含空格，您可能需要使用`getline`来读取它们而不是`>>`.

- 编辑 -

> 基本上我希望一旦我的应用程序被调用，输入也会自动提供给它。

[使用重定向输入创建子进程 (msdn)](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682499%28v=vs.85%29.aspx)

[_popen 文档（msdn）](http://msdn.microsoft.com/en-us/library/96ayss4b%28v=vs.71%29.aspx)

[管道到子进程（GNU）](http://www.gnu.org/software/libc/manual/html_node/Pipe-to-a-Subprocess.html#Pipe-to-a-Subprocess)

# uitextview - 您可以将相同类型的 GestureRecognizer 添加到一个视图中吗？

> ID：10809784
> 
> 赞同：2
> 
> 时间：2012-05-30T03:53:02.253
> 
> 标签：uitextview, uigesturerecognizer, long-press

我需要检测 UITextView 上的长按，它已经识别长按，因此它有一个长按识别器，我可以创建一个新的并添加到它吗？那么它将如何工作，当您长按时，两个识别器将获得相同的回调？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:58:10.253

只需在视图中添加两个`UILongPressRecognizer`具有不同选择器 ( `initWithTarget:selector:`) 的 s。它应该像您认为的那样工作。当您的两个同时被调用时，您可能需要`YES`从您的代表返回。`-gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:``UILongPressRecognizers`

请注意，您可能会遇到 Apple 识别器弹出放大镜的问题。

# java - XMLParser 正在吃掉我的空白

> ID：10809794
> 
> 赞同：5
> 
> 时间：2012-05-30T03:54:16.597
> 
> 标签：java, xml, groovy, xml-parsing

我正在解析的 wiki 页面中丢失了重要的空白，我认为这是因为解析器。我的 Groovy 脚本中有这个：

```
@Grab(group='org.ccil.cowan.tagsoup', module='tagsoup', version='1.2' )
def slurper = new XmlSlurper(new org.ccil.cowan.tagsoup.Parser())
slurper.keepWhitespace = true
inputStream.withStream{ doc = slurper.parse(it) 
println "originalContent = " + doc.'**'.find{ it.@id == 'editpageform' }.'**'.find { it.@name=='originalContent'}.@value
} 
```

inputStream 是从一个 URL GET 请求初始化的，用于编辑一个 confluence wiki 页面。稍后在 withInputStream 块中我这样做：

```
println "originalContent = " + doc.'**'.find{ it.@id == 'editpageform' }.'**'.find { it.@name=='originalContent'}.@value 
```

我注意到页面的所有原始内容都被删除了换行符。我最初认为这是服务器端的事情，但是当我在浏览器中创建相同的请求并查看源代码时，我可以在“originalContent”隐藏参数中看到换行符。有没有一种简单的方法可以禁用空白规范化并保留该字段的内容？以上是针对内部 Confluence wiki 页面运行的，但在编辑任何任意 wiki 页面时很可能会受到批评。

**在上面更新**后， 我添加了对“slurped.keepWhitespace = true”的调用以尝试保留空格，但这仍然不起作用。我认为这种方法适用于元素而不是属性？有没有办法轻松调整底层 Java XMLParser 上的标志？是否有为属性值中的空白设置的特定设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T16:17:47.417

我首先尝试用我自己的一些融合页面来重现这个，但是输入节点中没有 value 属性和文本内容，所以我创建了自己的测试 html。

现在，我认为 tagoup 解析器也需要配置为保留空格，只是在 slurper 上设置它不会有帮助，因为默认设置是忽略空格。

所以我已经做到了这一点，[tagsoup 功能可忽略空白](http://ccil.org/~cowan/XML/tagsoup/)已记录在案。（在页面上搜索空格）

无论如何，它不起作用。从示例中可以看出，属性中的空格被保留，尽管设置了额外的功能，但保留文本空格似乎不起作用。也许这是 tagoup 或 xml slurper 中的错误？

我建议您也仔细查看一下您的 html，是否真的存在 value 属性？

```
@Grab(group='org.ccil.cowan.tagsoup', module='tagsoup', version='1.2' )

String html = """\
<html><head><title>test</title></head><body>
<p>
    <form id="editpageform">
        <p>
            <input name="originalContent" value="         ">         

            </input>
        </p>
    </form>
</p>
</body></html>
"""
def inputStream = new ByteArrayInputStream(html.getBytes())

def parser = new org.ccil.cowan.tagsoup.Parser()
parser.setFeature("http://www.ccil.org/~cowan/tagsoup/features/ignorable-whitespace", true)

def slurper = new XmlSlurper(parser)
slurper.keepWhitespace = true

inputStream.withStream{ doc = slurper.parse(it) 
    def parse = { doc.'**'.find{ it.@id == 'editpageform' }.'**'.find { it.@name=='originalContent'} }
    println "originalContent (name)  = '${parse().@name}'"
    println "originalContent (value) = '${parse().@value}'"
    println "originalContent (text)  = '${parse().text()}'"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T17:45:02.807

似乎换行符没有保留在 value 属性中。见下文：

```
@Grab(group='org.ccil.cowan.tagsoup', module='tagsoup', version='1.2' )

String html = """\
<html><head><title>test</title></head><body>
<p>
    <form id="editpageform">
        <p>
            <input name="originalContent" value=" 

                    ">         

            </input>
        </p>
    </form>
</p>
</body></html>
"""
def inputStream = new ByteArrayInputStream(html.getBytes())

def parser = new org.ccil.cowan.tagsoup.Parser()
parser.setFeature("http://www.ccil.org/~cowan/tagsoup/features/ignorable-whitespace", true)

def slurper = new XmlSlurper(parser)
slurper.keepWhitespace = true

inputStream.withStream{ doc = slurper.parse(it) 
    def parse = { doc.'**'.find{ it.@id == 'editpageform' }.'**'.find { it.@name=='originalContent'} }
    println "originalContent (name)  = '${parse().@name}'"
    println "originalContent (value) = '${parse().@value}'"
    println "originalContent (text)  = '${parse().text()}'"
    assert parse().@value.toString().contains('\n') : "Should contain a newline"
} 
```

# scala - 可选的 Json 正文解析器

> ID：10809799
> 
> 赞同：3
> 
> 时间：2012-05-30T03:55:39.397
> 
> 标签：scala, playframework-2.0

我正在尝试使用 PlayFramework 编写一个 DRY CRUD 宁静服务。这是它的代码。

```
def crudUsers(operation: String) = Action(parse.json) { request =>
 (request.body).asOpt[User].map { jsonUser =>
  try {
    DBGlobal.db.withTransaction {
      val queryResult = operation match {
        case "create" =>
           UsersTable.forInsert.insertAll(jsonUser)
           Json.generate(Map("status" -> "Success", "message" -> "Account inserted"))

        case "update" =>
           val updateQ = UsersTable.where(_.email === jsonUser.email.bind).map(_.forInsert)
           println(updateQ.selectStatement)
           updateQ.update(jsonUser)
           Json.generate(Map("status" -> "Success", "message" -> "Account updated"))

        case "retrieve" =>
           val retrieveQ = for(r <- UsersTable) yield r
           println(retrieveQ.selectStatement)
           Json.generate(retrieveQ.list)

        case "delete" =>
           val deleteQ = UsersTable.where(_.email === jsonUser.email)
           deleteQ.delete
           Json.generate(Map("status" -> "Success", "message" -> "Account deleted"))
      }
      Ok(queryResult)
    }
  } catch {
    case _ =>
      val errMsg: String = operation + " error"
      BadRequest(Json.generate(Map("status" -> "Error", "message" -> errMsg)))
  }
}.getOrElse(BadRequest(Json.generate(Map("status" -> "Error", "message" -> "error")))) 
```

} }

我注意到更新、删除和创建操作运行良好。但是，检索操作失败并显示`For request 'GET /1/users' [Invalid Json]`. 我很确定这是因为 JSON 解析器不能容忍在正文中没有传递 JSON 的 GET 请求。

有没有办法在不丢失我在这里开始的 DRY 方法的情况下对 GET/Retrieve 操作进行特殊处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T02:09:43.877

我的猜测是你拆分了你的方法，这样你就可以为有和没有 body 的方法创建不同的路由。

即使将空字符串解析为 JSON，代码的设计似乎也不起作用。map 方法不会被执行，因为没有用户。这将导致匹配操作永远不会被执行。

**更新**

既然你提到了 DRY，我会把它重构成这样的：

```
 type Operations = PartialFunction[String, String]

  val operations: Operations = {
    case "retrieve" =>
      println("performing retrieve")
      "retrieved"
    case "list" =>
      println("performing list")
      "listed"
  }

  def userOperations(user: User): Operations = {
    case "create" =>
      println("actual create operation")
      "created"
    case "delete" =>
      println("actual delete operation")
      "updated"
    case "update" =>
      println("actual update operation")
      "updated"
  }

  def withoutUser(operation: String) = Action {
    execute(operation, operations andThen successResponse)
  }

  def withUser(operation: String) = Action(parse.json) { request =>
    request.body.asOpt[User].map { user =>
      execute(operation, userOperations(user) andThen successResponse)
    }
      .getOrElse {
        errorResponse("invalid user data")
      }
  }  

  def execute(operation: String, actualOperation: PartialFunction[String, Result]) =
    if (actualOperation isDefinedAt operation) {
      try {
        DBGlobal.db.withTransaction {
          actualOperation(operation)
        }
      } catch {
        case _ => errorResponse(operation + " error")
      }
    } else {
      errorResponse(operation + " not found")
    }

  val successResponse = createResponse(Ok, "Success", _: String)
  val errorResponse = createResponse(BadRequest, "Error", _: String)

  def createResponse(httpStatus: Status, status: String, message: String): Result =
    httpStatus(Json.toJson(Map("status" -> status, "message" -> message))) 
```

# solr - 索引时出现 Solr 错误

> ID：10809800
> 
> 赞同：0
> 
> 时间：2012-05-30T03:56:18.120
> 
> 标签：solr

当我在 solr 中索引数据时，出现异常

```
java.lang.NumberFormatException: For input string: "" solr 
```

我知道这个异常是关于什么的，但我怎么知道哪个字段导致了这个错误。

是否有任何日志记录可以告诉我哪个字段的数据有问题？

谢谢，

# php - 将插件应用于 wordpress 中的帖子

> ID：10809810
> 
> 赞同：-4
> 
> 时间：2012-05-30T03:58:29.343
> 
> 标签：php, wordpress

我为 wordpress 创建了一个插件。它已成功安装在我的站点中，但为了在客户端部分中显示它，我必须手动调用该函数（应用插件部分的函数）。如何强制我的插件出现在每个帖子中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:47:58.617

使用过滤器 the_content，它是文章正文上的过滤器 - 查看许多关于此的网络文章，它应该开始有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T08:45:13.770

在 wordrepss.org 的 wordpress 插件开发部分阅读它。为此，您需要使用[Hooks](http://codex.wordpress.org/Plugin_API#Hooks.2C_Actions_and_Filters)

# ruby-on-rails-3 - 如何将 routes.rb 拆分为多个文件

> ID：10809811
> 
> 赞同：0
> 
> 时间：2012-05-30T03:58:30.160
> 
> 标签：ruby-on-rails-3, routes

我有巨大的 routes.rb 文件，我想拆分成多个可管理的文件。

正如以下文章中所建议的，我为路由创建了单独的文件夹，并在此文件夹中创建了多个路由文件链接：[http ://rails-bestpractices.com/posts/73-split-route-namespaces-into-different-files](http://rails-bestpractices.com/posts/73-split-route-namespaces-into-different-files)

```
routes.rb
routes/user.rb
routes/manager.rb
routes/admin.rb
routes/anonymous.rb 
```

在我的 application.rb 中，我设置了 config.paths 值。我使用了各种可能的组合，但我仍然无法加载所有辅助路由文件。

这是我用来在 application.rb 文件中设置 config.paths 的代码列表。没有人为我工作。

```
config.paths["config/routes"].concat(Dir[Rails.root.join("config/routes/*.rb")])
config.paths["config/routes"] = Dir[Rails.root.join("config/routes/*.rb")]
config.paths["config/routes"] = Dir[Rails.root.join("config/routes/*.rb")].each{|r| config.paths["config/routes"].unshift(r) }
config.paths.config.routes.concat Dir[Rails.root.join("config/routes/*.rb")] 
```

感谢有人可以帮助我。请注意，我使用的是 Rails 3.2.1。我确信上述分割路线的技术将适用于以前版本的 Rails，但我无法使用 3.2.1 实现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T04:10:33.770

好的。我能够在 main routes.rb 中加载所有辅助路由。看起来很脏，但它在 Rails 3.2.1 中工作。

```
Acme::Application.routes.draw do
  resources :users

  Dir[Rails.root.join("config/routes/*.rb")].each{|r| load(r)}

  resources :messages
  match '*path' => 'cms/pages#show'
  root :to => "home#index", :port => false
end 
```

任何更清洁的方法都非常受欢迎。

# winapi - C# Winspool.drv “无法打开打印机”

> ID：10809812
> 
> 赞同：0
> 
> 时间：2012-05-30T03:58:31.790
> 
> 标签：winapi, printing

当我在标准用户帐户中运行我的程序时，我在调用 Winspool.drv "OpenPrinter" 时遇到问题。但是当我在管理员帐户中运行我的程序时。它可以正确执行 API 调用。

我正在尝试使用此 API 调用 OpenPrinter

```
[DllImport("WinSpool.drv", SetLastError = true)]
static extern unsafe bool OpenPrinter (string pPrinterName, int* phPrinter, void* pDefault); 
```

并使用此代码实现它

```
static unsafe int CSOpenPrinter(string printerName)
{
    bool bResult;
    int hPrinter;
    PRINTER_DEFAULTS pd = new PRINTER_DEFAULTS();
    //int rawsize = Marshal.SizeOf(pd);
    //IntPtr pdPtr = Marshal.AllocHGlobal(rawsize);
    //pd.pDatatype = null;
    //pd.pDevMode = null;
    pd.DesiredAccess = PRINTER_ALL_ACCESS;

    bResult = OpenPrinter(printerName, &hPrinter, &pd);
    System.Diagnostics.Debug.WriteLine("bResult: " + bResult);
    if (!bResult)
    {
        throw new ApplicationException("Cannot open printer '" +
                                        printerName + "' " +
                                        Marshal.GetLastWin32Error());
    }
    return hPrinter;
} 
```

好的，当我尝试使我的程序“以管理员身份运行”时，该代码可以完美运行。如何在不右键单击应用程序并选择“以管理员身份运行”的情况下使我的应用程序以管理员身份运行？

我相信这是一个 UAC 问题，但你能给我一个如何解决这个问题的想法吗？添加 app.manifest 会有帮助吗？你能给我一个例子吗？

最好的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T14:36:19.340

将清单文件添加到您的项目中。喜欢[这里](http://www.developerfusion.com/code/7987/making-a-net-app-run-on-vista-with-administrator-priviledges/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:29:12.273

你想用打印机做什么？您的代码要求获得完全访问权限，因此需要管理员访问权限。

如果您只想使用打印机，请`PRINTER_ACCESS_USE`改为请求访问权限。

如果它实际上是一个管理员进程，则将[适当的清单添加](http://msdn.microsoft.com/en-us/library/bb756929.aspx)到可执行文件中，以告诉 Windows 它需要管理员访问权限。

# android - 从android中的另一个类调用方法时出错

> ID：10809813
> 
> 赞同：-1
> 
> 时间：2012-05-30T03:58:32.887
> 
> 标签：android, button, methods

我有 2 节课。一个是 MainBaby.java，它包含：

```
public class MainBaby extends SurfaceView implements SurfaceHolder.Callback {

public MainBaby(Context context){
    super(context);
    init();
}

public MainBaby(Context context, AttributeSet attrs) {
      super(context, attrs);
      // TODO Auto-generated constructor stub
      init();
}

public MainBaby(Context context, AttributeSet attrs, int defStyle) {
      super(context, attrs, defStyle);
      // TODO Auto-generated constructor stub
      init();
}

public void init(){
    // adding the callback (this) to the surface holder to intercept events

    getHolder().addCallback(this);

    // create the game loop thread
    thread = new ThreadBaby(getHolder(), this);

    mPath = new Path();
    mBitmapPaint = new Paint(Paint.DITHER_FLAG);
    p = new Paint();
    p.setAntiAlias(true);
    p.setDither(true);
    p.setColor(Color.BLACK);
    p.setStyle(Paint.Style.STROKE);
    p.setStrokeJoin(Paint.Join.ROUND);
    p.setStrokeCap(Paint.Cap.ROUND);
    p.setStrokeWidth(50);

    setFocusable(true);

}

public void callMe(){

    Log.v("tag", "the button successfully pressed");
}   
} 
```

此类在 main.xml 中膨胀

```
<AbsoluteLayout
android:layout_width="fill_parent"
android:layout_height="fill_parent" >
  <coba.gesture.Main
    android:id="@+id/LayoDalam"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />
</AbsoluteLayout> 
```

我想像这样在 cobaGesture.java 调用方法 callMe()：

公共类 CobaGesture 扩展 Activity { MainBaby mb;

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);  
    ImageButton resetBut = (ImageButton) findViewById(R.id.reset);
    resetBut.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            mb.callMe();
        }
    });      
} 
```

但是当我单击按钮时，应用程序被强制关闭，这是 logcat：

```
05-30 10:55:58.433: ERROR/AndroidRuntime(704): FATAL EXCEPTION: main
05-30 10:55:58.433: ERROR/AndroidRuntime(704): java.lang.NullPointerException
05-30 10:55:58.433: ERROR/AndroidRuntime(704):     at coba.gesture.CobaGesture$1.onClick(CobaGesture.java:41)
05-30 10:55:58.433: ERROR/AndroidRuntime(704):     at android.view.View.performClick(View.java:2485)
05-30 10:55:58.433: ERROR/AndroidRuntime(704):     at android.view.View$PerformClick.run(View.java:9080)
05-30 10:55:58.433: ERROR/AndroidRuntime(704):     at android.os.Handler.handleCallback(Handler.java:587)
05-30 10:55:58.433: ERROR/AndroidRuntime(704):     at android.os.Handler.dispatchMessage(Handler.java:92)
05-30 10:55:58.433: ERROR/AndroidRuntime(704):     at android.os.Looper.loop(Looper.java:123)
05-30 10:55:58.433: ERROR/AndroidRuntime(704):     at android.app.ActivityThread.main(ActivityThread.java:3647)
05-30 10:55:58.433: ERROR/AndroidRuntime(704):     at java.lang.reflect.Method.invokeNative(Native Method)
05-30 10:55:58.433: ERROR/AndroidRuntime(704):     at java.lang.reflect.Method.invoke(Method.java:507)
05-30 10:55:58.433: ERROR/AndroidRuntime(704):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-30 10:55:58.433: ERROR/AndroidRuntime(704):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-30 10:55:58.433: ERROR/AndroidRuntime(704):     at dalvik.system.NativeStart.main(Native Method) 
```

这是什么意思？以及如何解决？

先感谢您。

更新！这是编辑后的代码和错误： ![在此处输入图像描述](../Images/64f86847e29156bb2d004f28dfe1147e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T04:50:09.217

您应该使用正确的上下文初始化对象（在这种情况下，它是您的活动）。所以它是：

```
 mb = new MainBaby(CobaGesture.this);
OR:
  mb = new MainBaby(getApplicationContext()); 
```

将此代码放入 onClick 事件或 onCreate 中，以便您可以使用**mb.callMe();**

所有关于上下文的信息都[在这里](https://stackoverflow.com/a/3572553/719212)和来自[Android 文档](http://developer.android.com/reference/android/content/Context.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T04:05:54.517

```
mb.callMe(); 
```

未启动多数民众赞成在错误的原因。换句话说，您正在使用一个指向空或空的变量。如果你想在你的代码中使用其他类，你应该先声明它。

```
public void onClick(View v) {
 MainBaby mb = new MainBaby(); //This initiates the variable correctly.
 mb.callMe();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T04:07:46.953

将对象 mb 初始化为**mb=new MainBaby(CobaGesture.this);** 在 oncreate 方法中

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-02-18T11:46:56.907

callme() 是 android 的一种方法，当我们按下任何按钮时都会调用它。只需将以下方法放在包含至少一个按钮的活动中并运行您的项目。

```
 public void callMe(View view){

            Log.e("tag", "the button successfully pressed");
        } 
```

# java - 多个摆动计时器

> ID：10809814
> 
> 赞同：3
> 
> 时间：2012-05-30T03:59:02.777
> 
> 标签：java, swing, timer

我有（应该是什么）一个简单的问题要解决，我愿意接受其他方法来解决它。我对其他解决方案持开放态度。

问题：我们正在使用 java swing 来显示基于回合、基于图块的游戏的图形。我正在使用带有图标的 jlabels，绝对定位。

为了使运动动画化，我使用了一个摆动计时器，它一次将位置更新 4 个像素，缓慢地向右、向左等移动精灵。

为了实现这一点，我运行了一个计时器，效果很好。当我尝试向下移动，然后向右移动时，问题就出现了。

精灵向下移动，从不向右移动，如果我通过一些控制台打印来观察执行，很明显可以看到两个计时器同时运行。我已经在互联网上进行了大量的挖掘工作，但我无法找到一种方法来告诉摆动计时器在第一个计时器停止之前不要执行，如果我尝试忙等到一个计时器完成（哎呀）UI根本不显示（显然是朝着错误的方向迈出了一步。）

现在我可以完全放弃计时器，或者让精灵传送到它的新位置，或者使用一些糟糕的忙碌等待移动方案，但我希望某个善良的灵魂有一个解决方案。

简而言之：我需要一种方法来运行一个摆动计时器一段时间，停止它，*然后*启动一个新的计时器，这样它们就不会重叠。最好这种方法允许每个计时器使用自己的方法，然后我可以一个接一个地调用这些方法。

提前感谢您提供的任何建议。

编辑：扩展的示例代码。如果您的建议需要完整的 scsse，那么我很抱歉浪费了您的时间，因为完整的代码是一头野兽。抱歉，此示例代码根本无法正常工作，但它应该说明了这一点。

所以。我们有两个函数，每个函数都有一个运行动画循环的计时器，一个用于向下和向右对角线移动，一个用于直线向下移动。

```
public class TestClass {
    static int counter = 0;
    static int counter2 = 0;
    static Timer timerC;
    static Timer timerX;

    public static void main(String[] args) {
        moveC();
        moveX();
    }

    public static void moveC() {
        int delay = 200; // milliseconds

        timerC = new Timer(delay, null);
        timerC.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                if (counter < 32) {
                    counter = counter + 4;
                    System.out.println("*C*");
                } else {
                    timerC.stop();
                    System.out.println("*C STOP*");
                }

            }
        });
        timerC.start();
    }

    public static void moveX() {
        int delay = 200; // milliseconds

        timerX = new Timer(delay, null);
        timerX.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                if (counter < 32) {
                    counter = counter + 4;
                    System.out.println("*X*");
                } else {
                    timerX.stop();
                    System.out.println("*X STOP*");
                }

            }
        });
        timerX.start();
    }

} 
```

我最终想在这里看到的是

```
*C*
*C*
*C*
*C*
*C STOP*
*X*
*X*
*X*
*X*
*X STOP* 
```

我实际上得到的是

```
*C*
*X*
*C*
*X*
*C*
*X*
*C*
*X*
*C STOP*
*X STOP* 
```

我在这里试图达到的目的是运行一个动画周期以完成，然后是另一个。

再次感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T04:45:48.773

不要使用多个 Timer，而是只使用一个 Timer 来根据需要处理每个方向。您需要某种类型的队列来保存方向信息，可以是正式队列，也可以是用作队列的集合（先进先出），然后让您的 Timer 在该队列运行时从该队列中提取方向。例如，这里我使用我的 JList 的模型作为我的队列，方法是删除并使用首先添加的 Direction（在 JList 的顶部）：

```
import java.awt.GridLayout;
import java.awt.event.*;
import javax.swing.*;

public class TimerPlay extends JPanel {
   private DefaultListModel directionJListModel = new DefaultListModel();
   private JList directionJList = new JList(directionJListModel);
   JButton startTimerButton = new JButton(
         new StartTimerBtnAction("Start Timer"));

   public TimerPlay() {
      ActionListener directionBtnListener = new ActionListener() {

         @Override
         public void actionPerformed(ActionEvent actEvt) {
            String actionCommand = actEvt.getActionCommand();
            Direction dir = Direction.valueOf(actionCommand);
            if (dir != null) {
               directionJListModel.addElement(dir);
            }
         }
      };
      JPanel directionBtnPanel = new JPanel(new GridLayout(0, 1, 0, 10));
      for (Direction dir : Direction.values()) {
         JButton dirBtn = new JButton(dir.toString());
         dirBtn.addActionListener(directionBtnListener);
         directionBtnPanel.add(dirBtn);
      }

      add(directionBtnPanel);
      add(new JScrollPane(directionJList));
      add(startTimerButton);
   }

   private class StartTimerBtnAction extends AbstractAction {
      protected static final int MAX_COUNT = 20;

      public StartTimerBtnAction(String title) {
         super(title);
      }

      @Override
      public void actionPerformed(ActionEvent arg0) {
         startTimerButton.setEnabled(false);

         int delay = 100;
         new Timer(delay, new ActionListener() {
            private int count = 0;
            private Direction dir = null;

            @Override
            public void actionPerformed(ActionEvent e) {
               if (count == MAX_COUNT) {
                  count = 0; // restart
                  return;
               } else if (count == 0) {
                  if (directionJListModel.size() == 0) {
                     ((Timer)e.getSource()).stop();
                     startTimerButton.setEnabled(true);
                     return;
                  }
                  // extract from "queue"
                  dir = (Direction) directionJListModel.remove(0);
               }
               System.out.println(dir); // do movement here
               count++;

            }
         }).start();
      }
   }

   private static void createAndShowGui() {
      TimerPlay mainPanel = new TimerPlay();

      JFrame frame = new JFrame("TimerPlay");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }

}

enum Direction {
   UP, DOWN, LEFT, RIGHT;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T04:18:40.910

作为参考，此[示例](https://stackoverflow.com/a/7203419/230513)管理 的四个实例`Timer`，其中两个在悬停在任何角落时运行（交错）。您可以将其与您的方法进行比较。这个相关的[答案](https://stackoverflow.com/a/10726416/230513)讨论了类似的基于图块的游戏中的动画。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-30T04:23:30.617

*   将所有`Icon`s 放入某种形式的数组中

*   创建一个`Timer`短延迟的 Swing

*   在 Swing`ActionListener`中，从数组中获取每个 `Icon，从屏幕中获取边界，将 Icon 移动一步

*   重复直到达到目标。

# javascript - getJSON 没有返回值

> ID：10809816
> 
> 赞同：0
> 
> 时间：2012-05-30T03:59:15.790
> 
> 标签：javascript, return-value, getjson

当我运行它时，不会触发带有“成功”的警报。我检查了萤火虫，它告诉我 ret 是未定义的。这意味着什么？

```
function checkUni() {

var URL = "http://localhost:8080/GradSchoolApp/test.jsp";

var ret = $.getJSON(URL, function(data, textStatus) {
    alert("success");
});
} 
```

编辑：

这是 test.jsp 顺便说一句

```
<%@ page language="java" contentType="application/json; charset=ISO-8859-1"
pageEncoding="ISO-8859-1" import="java.util.*, net.sf.json.JSONObject"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<%
response.setContentType("application/json");
JSONObject jo = new JSONObject();
jo.put("location", "1");
jo.put("name", "someUni");
out.println(jo);
out.flush();

%>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T04:03:36.723

AJAX 调用不起作用。有几点要检查，网址是否正确？您是否检查了应用程序服务器日志以查看呼叫是否已到达。如果 AJAX 调用成功，您可以检查 HTTP 代码的 firebug 吗？

**编辑：**

（从 text/json 更改为 application/json）感谢 Bergi

JSP：

```
<%@ page contentType="application/json" %> 
```

Java 小服务程序：

```
response.setContentType("application/json"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T04:10:07.637

首先检查“.jsp”文件是否返回 json 数据

使用多一个参数进行回调

```
getJSON: function( url, data, callback ) {
    return jQuery.get( url, data, callback, "json" );
} 
```

像这样的用户

```
function checkUni() {
    var URL = "http://localhost:8080/GradSchoolApp/test.jsp";
    var ret = $.getJSON(URL,"",function(data){
        alert("success");
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T04:02:04.970

`ret`仅限于您的函数，因此只有函数内的代码才能访问它。我的猜测是您没有在本地计算机的端口 8080 上运行 Web 服务器，或者由于某些其他原因 URL 无效。`.ajax`如果您还想对错误进行回调（[小提琴](http://jsfiddle.net/jgoemat/XF392/)），请尝试：

```
function checkUni() {
    var URL = "http://localhost:8080/GradSchoolApp/test.jsp";

    var ret = $.ajax(
    {
        url: URL,
        success: function(data, textStatus) {
            alert('success!');
        },
        error: function(jqXHR, textStatus, errorThrown) {
            alert('Error "' + textStatus + '": ' + errorThrown);
        }
    });
} 
```

您可能还想检查您的 json，[getJson 页面](http://api.jquery.com/jQuery.getJson/)警告它会在 inavlid json 上静默失败，包括引用属性名称等严格要求，您可以尝试`.get`自己使用和反序列化。

# ios - 关闭BackgroundTaskWithExpirationHandler重要吗

> ID：10809818
> 
> 赞同：0
> 
> 时间：2012-05-30T03:59:26.677
> 
> 标签：ios, uiapplication

当应用程序被重大更改位置更新唤醒时，我启动了一个 BackgroundTaskWithExpirationHandler。如下关闭任务是否重要：

```
if (bgTask != UIBackgroundTaskInvalid)
    {
        [[UIApplication sharedApplication] endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    } 
```

如果我不关闭任务会发生什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T04:21:22.700

是的，这很重要。否则电池很快就会耗尽。

在此处查看后台应用程序的内存使用详情 - [http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

# php - 提交表单结果没有错误到另一个页面

> ID：10809823
> 
> 赞同：0
> 
> 时间：2012-05-30T04:01:14.733
> 
> 标签：php

我想知道如何将下面 index.php 中的 my_name 值发送到 result.php。

下面是输入表单后检查错误的php代码。以及如何将没有错误的表单结果发送到 result.php

这是 index.php

```
<?php 
if ($_POST["_submit_check"]) {
    if ($form_errors = validate_form()) {
    show_form($form_errors);
    } else {
process_form();
}
} else {
show_form();
}

function process_form() {
//if doesnt makes error
//i want to send result "my_name" to result.php
header('Location: result.php');
}

function show_form($errors = '') {
    if ($errors) {
    print implode('</li><li><br>', $errors);
    print '</li></ul>';
}
print<<<_HTML_
<form method="POST" action="$_SERVER[PHP_SELF]">
Your name: <input type="text" name="my_name">$errors[0];
<br/>
<input type="submit" value="Submit">
<input type="hidden" name="_submit_check" value="1">
</form>
_HTML_;
}

function validate_form() {
    $errors = array();
    if (strlen($_POST['my_name']) < 3) {
    $errors[] = "Your name must be at least 3 letters long.";
    }
    return $errors;
}

?> 
```

这是结果.php

```
<?php
//prints result form from index.php
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T04:05:22.163

你可以用[HTTP GET 变量来做](http://www.php.net/manual/en/reserved.variables.get.php)

```
header('Location: result.php?name='.$_POST['my_name']); 
```

在结果.php

你可以看到价值

```
echo $_GET['name']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T04:32:21.370

PHP 会话变量保存页面之间的信息。

请试试这个。

在 index.php

```
<?php
  session_start();

  // set post date into session variable
  $_SESSION['my_name'] = $_POST['my_name'];
  $_SESSION['my_number'] = $_POST['my_number'];

?> 
```

在 result.php

```
<?php
  session_start();

  // get date from session variable
  $my_name = $_SESSION['my_name'];
  $my_number= $_SESSION['my_number'];
  echo $my_name;
  echo $my_number;
?> 
```

# sql-server-2012 - 合并复制客户端上的时间是否不同步是否重要？

> ID：10809829
> 
> 赞同：1
> 
> 时间：2012-05-30T04:02:08.947
> 
> 标签：sql-server-2012, merge-replication

我对合并复制很陌生，但是一个场景。如果我有一台服务器，并且有两个具有拉式订阅的客户端，这些机器上的时间是否与彼此或服务器不同步是否重要？

当我在其中一个客户端上修改一些数据时，它是否会针对该更改存储时间？

我正在使用 MS SQL 2012。

我将使用此处描述的设置，

[http://msdn.microsoft.com/en-us/library/ms151329(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms151329(v=sql.105).aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:05:20.390

我目前在生产中有一个使用合并复制的第 3 方应用程序。这包括一个 SQL 2008 R2 数据库服务器作为发布者，大约 100 个桌面客户端通过该应用程序与数据库交互，另外还有 65 台笔记本电脑使用 SQL Server Express 2008 R2 作为发布者的订阅者。当笔记本电脑到达他们的基地位置时，它们通过无线同步，任何增量都被推送给用户。

现在来回答你的问题。客户端上的时间低至一毫秒可能不会有任何区别。*不同之处在于发布者*和订阅者是否在特定时间段内不同步。使用 SQL Server Mgmt Studio，查看发布数据库的服务器。展开 Server Objects & Management 之间的 Replication 部分，然后右键单击发布者，在 Local Publications 下，然后选择 Properties。

在常规页面下，查看订阅到期区域。Microsoft 的默认值为 14 天，可以根据需要向上/向下移动，或者您可以指定它根本不会过期。请注意短语“复制元数据的保存时间永远不会超过此时间”。

换句话说，如果您的一个订阅者超过 14 天没有预订，那没关系，您必须取消订阅，然后重新订阅该单元。这是因为发布者上最旧的元数据与订阅者上的最新记录/元数据之间存在差距。没有重叠，没有同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T21:34:26.440

好的，我发现合并复制不会针对特定更改存储时间。

如果您有客户订阅，那么在发生冲突的情况下，第一个同步的人将获胜。

如果您有服务器订阅，那么这些服务器订阅的优先级将决定谁将获胜。

这些选项都不依赖于时间。

# c# - 加解密出错，找不到异常原因

> ID：10809830
> 
> 赞同：2
> 
> 时间：2012-05-30T04:02:15.790
> 
> 标签：c#, .net, cryptography, encryption-asymmetric, encryption-symmetric

我有以下两种方法。

第一种方法

```
 //SymmetricEncryting 
 private byte[] SymmetricEncrypt()
  {
  try
      {
        //Get Byte Value 
        byte[] x= Encoding.Default.GetBytes("Test");

        byte [] y;

        //Create Symmetric Key Encription
        RijndaelManaged rijndaelManaged = new RijndaelManaged();

        //GetSymmetricPublicKey
        _symmetricPublicKey = rijndaelManaged.Key;

        //Get Symmetric Public IV
        _symmetricPublicIv = rijndaelManaged.IV;

        using (MemoryStream memoryStream = new MemoryStream(x))
        {
            //Start EncriptionProcess
            var cryptoStream = new CryptoStream(memoryStream,
                                                rijndaelManaged.CreateEncryptor
                                                 (_symmetricPublicKey,
                                                 _symmetricPublicIv),
                                                CryptoStreamMode.Write);

            cryptoStream.Write(x, 0, x.Length);

            // Complete the encryption process
            //cryptoStream.FlushFinalBlock();

            y= memoryStream.ToArray();

        }

        return y;
    }
    catch (Exception)
    {
        throw;
    }
} 
```

第二种方法

```
private string Decrypt(
    byte[] y,
    byte[] symmetricPublicKey,
    byte[] symmtricPublicIv)
{
    try
    {
        //Create the Key Container
        CspParameters cspParameters = new CspParameters();

        //Get the AsyPrivate and Public key from the Container
        cspParameters.KeyContainerName = "Keys";

        var rsaCryptoServiceProvider = new RSACryptoServiceProvider(cspParameters);

        //Decrypt and get the Symmetric Public key
        var decryptedSymmetricPubk = rsaCryptoServiceProvider.Decrypt(symmetricPublicKey, false);

        //Decrypt and get the Symmetric Public IV
        var decryptedSymmetricPubIv = rsaCryptoServiceProvider.Decrypt(symmtricPublicIv, false);

        //Create RijndaelManaged object to do the Symmtric dycrption
        RijndaelManaged rijndaelManaged = new RijndaelManaged();

        //Create cryptostream using decrypted symmetric Public Key and IV
        ICryptoTransform iCryptoTransform = rijndaelManaged.CreateDecryptor(decryptedSymmetricPubk,
                                                                            decryptedSymmetricPubIv);
        //Create a memory stream 
        using (MemoryStream memoryStream = new MemoryStream(y))
        {

            var cryptoStream = new CryptoStream(memoryStream, iCryptoTransform, CryptoStreamMode.Read);

            byte[] z= new byte[y.Length];

            cryptoStream.Read(z, 0, z.Length);

            //cryptoStream.FlushFinalBlock();

            //Convert byte array to string
            var x= System.Text.Encoding.Default.GetString(z);

            return x;
        }
    }
    catch (Exception)
    {
        throw;
    } 
```

正如您在代码中看到的那样，我正在尝试使用对称加密来加密字符串。我使用我已经创建的非对称公钥来加密对称公钥和 Iv。然后我正在尝试解密加密的字符串。

**问题 1**加密和解密 的目的是什么`cryptoStream.FlushFinalBlock();`。正如我从 msdn 中了解到的，它将结束在 cyptostream 上运行的进程

**问题 2** 如果我取消注释`cryptoStream.FlushFinalBlock();`它会引发异常 的行`"Memory stream is not expandable."`。但是，如果我评论该行，它将正常工作并返回一个字节数组。

**问题 3**`"system.security.cryptography.cryptographicexception length of the data to decrypt is invalid`然而，第二种方法在执行 cryptoStream.Read(z, 0, z.Length); 行时 抛出异常。

我在调试时找不到这些错误的实际原因。我也在谷歌上进行了一些搜索。但不幸的是我找不到任何解决方案。谁能解释一下答案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T05:55:02.673

您正在使用 PKCS 填充进行加密（这是默认设置）。AES/Rijndael 是一种分组密码，这意味着它一次只能加密 16 个字节的块。为了允许分组密码加密任意大小的数据，我们使用填充算法。PKCS 填充的工作原理是在加密时在末尾添加 1-16 个字节，在解密时删除它们。填充的长度在填充本身中编码。

您需要`FlushFinalBlock`在加密时让 CryptoStream 知道没有更多的传入数据，它应该添加填充。当您在读取模式下使用 CryptoStream 时，它不是必需的，也不应该使用。

第一个例外是因为您使用纯文本数组作为 MemoryStream 的后备存储。由于填充，加密将大于明文。

第二个例外是因为您删除了该`FlushFinalBlock`语句，并且因为 MemoryStream 不允许调整大小以生成正确长度的数组。加密数据应始终为 16 字节的倍数，但由于 MemoryStream 将重用`x`，`y`因此将具有与 相同的长度`x`，这并不总是有效的长度。

解决方案是：

1.  `FlushFinalBlock`在 SymmetricEncrypt 中使用。
2.  替换`using (MemoryStream memoryStream = new MemoryStream(x))`和。`using (MemoryStream memoryStream = new MemoryStream(y))`_ `using (MemoryStream memoryStream = new MemoryStream())`这将允许`MemoryStream`s 自由调整大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-05T00:06:41.703

奇怪的是，我也可以在解密时进行写操作。就像是：

```
var decryptMemoryStream = new MemoryStream();
var decryptStream = new CryptoStream(decryptMemoryStream, iCryptoTransform , CryptoStreamMode.Write);

//write the unencrypted data array to the stream
decryptStream.Write(y, 0, y.Length);
decryptStream.Flush();
decryptStream.Close();

var decryptedData = decryptMemoryStream.ToArray(); 
```

# c - 将文件放在哪里以及如何编译和运行它？

> ID：10809834
> 
> 赞同：-3
> 
> 时间：2012-05-30T04:02:25.913
> 
> 标签：c, linux

我想学习如何在 Linux 下编写 C 程序。现在我已经安装了 Centos，我正在用`vim`C 语言编写一个“hello world”程序。但是我不知道放在哪里，或者如何编译它？我已经安装了`gcc`。对不起。我是新手。谢谢你。你能给我举个例子，如何用 C 语言编写一个简单的程序，然后测试和编译它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T04:12:03.927

在终端中输入：

```
$ mkdir ~/learnC
$ cd ~/learnC
$ cat > hello.c 

   #include <stdio.h> 
   int main () { 
      printf("Hello World\n"); 
   } 

/* Press Ctrl+D */

$ gcc hello.c -o hello
$ ./hello 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T04:03:16.513

将其保存在任何地方，然后在终端运行

`gcc path/to/file.c`

这就是它所需要的。默认输出将是一个名为的文件`a.out`，您可以直接从终端运行该文件。

如果您对终端不满意（尽管由于您使用的是 vim，我假设您不是），有许多 IDE 可以让初学者更容易。

# vimeo - vimeo API 的“速率限制错误”

> ID：10809837
> 
> 赞同：2
> 
> 时间：2012-05-30T04:02:57.053
> 
> 标签：vimeo

在我的应用程序中，我使用了 Vimeo API。有时我会收到**Rate Limit Exceed**错误。

我的问题是：

1.  它是特定于应用程序的吗？（每个应用程序发出的请求，无论使用它的设备数量如何）“或
2.  它是特定于设备的吗？假设两台设备有这个应用程序，有可能一个得到这个错误，而另一个没有）。

就我而言，如果我提出了许多不同类型的请求并且发生了此错误。我立即在另一台设备上安装了这个应用程序。另一个也开始出现此错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T04:38:11.710

如果超过每日限制，它是针对未经身份验证的呼叫的应用程序。就像我只有在搜索任何视频而不是访问我的私人视频时才会收到此错误。对于经过身份验证的呼叫，如果您超过其每日限制，那么它将是特定于设备的。更多详情：[https ://developer.vimeo.com/guidelines/rate-limiting](https://developer.vimeo.com/guidelines/rate-limiting)

# openerp - 是否有用于查看项目阶段和任务的插件模块？

> ID：10809839
> 
> 赞同：1
> 
> 时间：2012-05-30T04:03:09.297
> 
> 标签：openerp

我正在使用项目模块，我想要下面的阶段和任务视图。这将帮助我全面了解我们的立场。有没有这样做的模块/视图？目前的似乎有限。

![视图的图像](../Images/b2122deea3279a4211c6fe357e7da4e7.png)

[图片 http://imagebin.org/index.php?mode=image&id=214416](http://imagebin.org/index.php?mode=image&id=214416)

干杯，维沙尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:33:28.427

该模块`project_long_term`看起来非常接近您的需要：它添加了“阶段”来对项目任务进行分组。我找到了一个显示项目+阶段甘特图的视图。

![在此处输入图像描述](../Images/ff682351ca305e484e0ea32df51a942c.png)

您可以更改任务甘特图以显示阶段 + 任务：

```
<?xml version="1.0"?>
<gantt date_start="date_start" 
       date_stop="date_end" 
       string="Tasks" 
       default_group_by="phase_id">
</gantt> 
```

最简单的方法是：

*   激活开发者模式（右上角，在注销旁边，单击“关于”图标，然后单击“激活开发者模式”）
*   从菜单中选择项目任务
*   在标题“搜索：任务”旁边的下拉选择框中选择“编辑甘特视图”
*   替换“架构”字段的内容，保存*等 violá*

请注意，如果缺少日期字段，则图表中可能会省略任务。

# live - 永久编辑网页？

> ID：10809844
> 
> 赞同：2
> 
> 时间：2012-05-30T04:03:50.407
> 
> 标签：live, edit, webpage, permanent

是否可以编辑网页并使更改永久化？（当然是在我的机器上）因此，例如，如果网页没有正确显示，我可以编辑 html 代码并保存更改。每次我重新访问该站点时，都会发生变化。

我使用的是greasemonkey，但如果我可以直接编辑html会更好。

谢谢。

# javascript - HTML5 Canvas - 我的线条/弧线没有出现在图像顶部

> ID：10809852
> 
> 赞同：0
> 
> 时间：2012-05-30T04:05:41.523
> 
> 标签：javascript, html, canvas

我使用 lineTo() 绘制了一些线，使用 arc() 绘制了一些弧。我想画出我创建的这些形状，它们的黑色轮廓在我拥有的蓝色/白色背景上清晰可见。它很轻，所以我知道黑色会显示出来。但事实并非如此。

我用画布本身来放置背景图像，这是错的吗？以下是相关代码：

```
blueprint_background.onload = function(){
var pattern = context.createPattern(this, "repeat");
context.fillStyle = pattern;
context.rect(margin_x,margin_y,eff_width,eff_height);
context.fill();
}; 
```

还有我美丽的形状：

```
//the three sides of the triangle
context.beginPath();
context.moveTo(loc_x, loc_y);
context.lineTo(loc_x, loc_y + 30); //vertical downwards
context.moveTo(loc_x, loc_y);
context.lineTo(loc_x + 20, loc_y + 15);
context.moveTo(loc_x, loc_y + 30);
context.lineTo(loc_x + 20, loc_y + 15); //go the other way to complete the triangle
context.stroke(); 
```

顺便说一句，如果有人想大声疾呼使用画布绘制形状的不良做法，请在它成为习惯之前采取行动。例如，我在调用 stroke() 之后想知道是否应该调用 closePath() 方法或其他方法。

但是，是的，我的主要问题是我看不到图像背景顶部的黑线。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T04:14:58.657

如果三角形的代码在背景`onload`部分之外，那么这可能会解决它：

```
blueprint_background.onload = function(){
    //background
    var pattern = context.createPattern(this, "repeat");
    context.fillStyle = pattern;
    context.rect(margin_x, margin_y, eff_width, eff_height);
    context.fill();
    draw_triangle();
};

function draw_triangle(){                       //seperate function
    //triangle
    context.beginPath():
    context.moveTo(loc_x, loc_y);
    context.lineTo(loc_x, loc_y + 30);
    context.moveTo(loc_x, loc_y);
    context.lineTo(loc_x + 20, loc_y + 15);
    context.moveTo(loc_x, loc_y + 30);
    context.lineTo(loc_x + 20, loc_y + 15);
    context.stroke(); 
}; 
```

这是因为您的背景必须等到它加载，这将导致背景在您的三角形顶部绘制。

# dynamics-crm-2011 - crm2011 与机会子网格的关系

> ID：10809853
> 
> 赞同：0
> 
> 时间：2012-05-30T04:05:46.300
> 
> 标签：dynamics-crm-2011

我创建自定义实体“Opp 产品”。在商机实体中，我与“Opp 产品”创建 1:N 关系。我尝试将“opp 产品”新记录单击“添加新 Opp 产品”功能区添加到“机会”子网格，记录可以成功创建。

但我尝试将单击“添加现有 Opp 产品”功能区添加到机会子网格，我收到此错误。有人看过吗？请问有什么想法吗？

！![在此处输入图像描述](../Images/ad7759d1e54dec5bcbbd73d19be8423f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:29:50.187

它表示您现有的 Opp 产品已经链接到另一个机会。

当您有 1:N 关系时，您可以将许多 Opp 产品链接到一个机会。

在这种情况下，您试图将同一个 Opp 产品链接到多个机会。为此，您需要 N:N 关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T20:09:14.007

转到现有的 Opp 产品表单并修改机会查找以指向您想要的机会。

“添加现有”选项仅在 Opp 产品尚未与商机关联时才有效。

# android - 如何在活动中重新启动 aynctask 以下载有问题的 url？

> ID：10809856
> 
> 赞同：-1
> 
> 时间：2012-05-30T04:06:13.100
> 
> 标签：android, android-activity

我已经弄清楚为什么它有时会崩溃，它无法获取 url，而 askctask 只是继续在后台工作我如何设置打开 url 的时间间隔 rock.open 流是它真正减慢的地方我希望他用户稍后再试一次在一定时间后停止 asynctask 或让 asynctask 重新启动，因为如果我关闭 wifi，当然应用程序崩溃了？

```
on create.....(
 ws=new WeatherSet();
new DownloadImageTask().execute(queryString);
if set a debug point here works magically :) 
  private class DownloadImageTask extends AsyncTask<String, Void, String> {
         protected String doInBackground(String... urls) {
               try {
                URL rock=new URL(urls[0]);

                /* Get a SAXParser from the SAXPArserFactory. */
                SAXParserFactory spf =   
                                    SAXParserFactory.newInstance();
                SAXParser sp = spf.newSAXParser();

                /* Get the XMLReader of the SAXParser we created. 
                XMLReader xr = sp.getXMLReader();

                /*
                 * Create a new ContentHandler and apply it to the
                 * XML-Reader
                 */
                WeatherHandler gwh = new   
                                    WeatherHandler();
                xr.setContentHandler(gwh);

                /* Parse the xml-data our URL-call returned. */

                xr.parse(new InputSource(rock.openStream()));

            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

             return "";
         }

         protected void onPostExecute(String result) {

            weather();

         } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T04:48:13.410

当您的活动需要初始化一些对象并且该事情发生在背景线程中时，就会发生这种情况，

发生错误的原因是，线程尚未完成其任务并且活动还活着。并且假设由 bg 线程初始化的对象还没有完成。

您需要在 Asynctast 的 postExecution 之后识别该对象并执行操作。

在调试中它工作得很好，因为你已经在活动中放置了断点，而不是在线程中。因此线程将完成其任务并初始化对象。

希望这有帮助！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T04:52:15.060

看起来当您在 e 设备上运行时，缺少一些资源，这可能是活动本身无法启动的原因。如果它在稍后阶段停止，则可能存在一些线程问题。因此，尝试逐行调试整个活动。或者可以在每一行之后放置日志，您将找到问题所在。

# javascript - 是否可以多次克隆具有不同内容的 xul 窗口？

> ID：10809858
> 
> 赞同：0
> 
> 时间：2012-05-30T04:06:47.250
> 
> 标签：javascript, firefox-addon, window, xul

我正在尝试创建一个“便笺”应用程序，我想在任何给定时间管理任意数量的笔记。已经设法创建可以打开另一个窗口的主程序（这将是我的便笺），但是调用创建第一个窗口的函数将不再调用窗口。有没有办法用不同的内容多次创建一个窗口的另一个实例？

这是我用来创建窗口的 JavaScript：

```
window.open("chrome://stickies/content/window.xul","window","chrome=1, titlebar=0"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:06:08.257

从[`window.open()`文档](https://developer.mozilla.org/en/DOM/window.open)：

> 要在每次调用时打开一个*新*`window.open()`窗口，请使用 的特殊`_blank`值`strWindowName`。

您总是使用与目标相同的窗口名称，这就是为什么只打开一个窗口的原因。您应该使用`_blank`作为窗口名称，这将确保打开一个新窗口而不是重用现有窗口：

```
window.open("chrome://stickies/content/window.xul", "_blank", "chrome=1, titlebar=0"); 
```

# firefox - 用IE8不能浏览外部网站，用火狐还是可以的

> ID：10809860
> 
> 赞同：0
> 
> 时间：2012-05-30T04:06:57.810
> 
> 标签：firefox, google-chrome, browser, internet-explorer-8, internet-options

从昨天开始，在我的工作场所，我再也无法使用 IE8 访问公司内部网以外的任何外部站点，这也适用于 Chrome。这让我 Firefox 成为我可以用来浏览外部网站的唯一浏览器。我尝试了几次重新启动计算机；重新安装 IE，但这些方法都没有运气。我也做了一些谷歌搜索，发现它可能是由影响 IE 的互联网选项设置的病毒引起的，因为 Firefox 不与 IE 共享设置，这可能解释了为什么我仍然可以使用 Firefox。但问题是，设置是什么？我能让我的 IE 再次工作吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T04:26:45.320

IE 和 Chrome 在控制面板 -> Internet 选项下使用相同的设置，而对于 Firefox，这是分开的。

由于这是在您的工作场所，因此很可能与代理配置有关。

# jquery - 实现无限滚动而不显示重复数据

> ID：10809865
> 
> 赞同：1
> 
> 时间：2012-05-30T04:08:02.050
> 
> 标签：jquery, ajax, infinite-scroll

我编写了一个简单的脚本，我在其中使用 ajax $.get 来获取我的数据以进行无限滚动。问题是，我的滚动速度可能比加载速度快，导致它加载了三倍？

```
function last_msg_funtion() 
{ 
    var ID=$(".feed_container").last().attr("id");
    $.ajax({
        url: "ajax/pagination.php",
        type:"get",
        data: "p="+ID
    }).done(function(data){
    if (data != "") 
        {
            var $boxes = $(data); 
            //$(".feed_container:last").after(data); 
            $("#feed_main").append($boxes).masonry('appended',$boxes);

        }
});

$(window).scroll(function(){
    var mostOfTheWayDown = ($(document).height() - $(window).height())  - 300;
    if ($(window).scrollTop() >= mostOfTheWayDown)
    {
        //alert('test');
        last_msg_funtion();
    }
} 
```

如果我一直向下滚动，加载需要一段时间。我返回的数据`last_msg_function()`是获取图像的 AJAX $.get()。但是，它正在加载三倍相同的数据。有什么想法可以防止这种情况吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T11:50:41.257

您需要设置一个“搜索”变量，该变量在空闲时为假，在搜索时为真，然后使用它来知道何时启动新搜索。

```
var searching = false; // new variable

function last_msg_funtion() 
{ 
    if (!searching) { // only initiate a new ajax request if this variable is false
        searching = true; // set variable to true
        var ID=$(".feed_container").last().attr("id");
        $.ajax({
            url: "ajax/pagination.php",
            type:"get",
           data: "p="+ID
       }).done(function(data){
            searching = false; // set variable to false on success
            if (data != "") 
            {
                var $boxes = $(data); 
                //$(".feed_container:last").after(data); 
                $("#feed_main").append($boxes).masonry('appended',$boxes);

            }
       });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T04:12:33.487

使用 G+ 并滚动到页面底部时，G+ 在获取消息之前会有一点延迟。
使用 setInterval() 它将解决您的问题。内部区间函数调用`last_msg_funtion()`。

# osx-lion - 为 rails 3.2 安装 home brew

> ID：10809866
> 
> 赞同：2
> 
> 时间：2012-05-30T04:08:04.300
> 
> 标签：osx-lion, ruby-on-rails-3.2, homebrew

我正在尝试根据[此处](http://www.frederico-araujo.com/2011/07/30/installing-rails-on-os-x-lion-with-homebrew-rvm-and-mysql/)描述的指南安装自制软件。

我有 curl 和 rvm，并且想在我的 lion 1.7.4 上安装 rails 1.9.3，并安装 Xcode 4.3.2 和开发人员命令行工具。

看来我需要 libksba，这需要我使用 to 命令 `brew install libksba`。所以我需要家酿。

我按照说明使用 `/usr/bin/ruby -e "$(/usr/bin/curl -fsSL https://raw.github.com/mxcl/homebrew/master/Library/Contributions/install_homebrew.rb)"`

输出以下内容：

```
$ /usr/bin/ruby -e "$(/usr/bin/curl -fsSL https://raw.github.com/mxcl/homebrew/master/Library/Contributions/install_homebrew.rb)"
==> This script will install:
/usr/local/bin/brew
/usr/local/Library/Formula/...
/usr/local/Library/Homebrew/...

Press enter to continue
==> Downloading and Installing Homebrew...
==> Installation successful!
You should run `brew doctor' *before* you install anything.
Now type: brew help
[~]$ 
[~]$ 
[~]$ brew doctor
/usr/local/Library/Homebrew/tab.rb:1:in `require': no such file to load -- ostruct `(LoadError)`
    from /usr/local/Library/Homebrew/tab.rb:1
    from /usr/local/Library/Homebrew/bottles.rb:1:in `require'
    from /usr/local/Library/Homebrew/bottles.rb:1
    from /usr/local/Library/Homebrew/extend/pathname.rb:2:in `require'
    from /usr/local/Library/Homebrew/extend/pathname.rb:2
    from /usr/local/Library/Homebrew/global.rb:1:in `require'
    from /usr/local/Library/Homebrew/global.rb:1
    from /usr/local/bin/brew:10:in `require'
    from /usr/local/bin/brew:10
[~]$ 
```

所以这基本上意味着 brew 没有正确安装。我是否必须更改它正在寻找的路径？我曾经有MacPorts，我完全删除了它，所以那里应该没有冲突。请帮忙！！！非常感谢！这是一个很棒的社区。

* * *

更新：

我时间机器倒退了一年，因为我认为我做错了什么。现在我仍然有安装问题，但它似乎更常见一些。

我使用安装自制软件

```
/usr/bin/ruby -e "$(/usr/bin/curl -fsSL https://raw.github.com/mxcl/homebrew/master/Library/Contributions/install_homebrew.rb)" 
```

“brew”的任何命令都会给我这个错误：

```
[~]$ brew
/usr/local/bin/brew:6:in `require': no such file to load -- pathname (LoadError)
    from /usr/local/bin/brew:6 
```

有什么建议么？谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:37:29.510

我遇到了与上面评论中提到的相同的问题。为了解决它，我最终不得不恢复我的默认系统红宝石。我在 SnowLeopard - OSX 10.6.8 上，所以你的资源可能会有所不同，但我所做的是：

*   卸载 xcode：sudo /Developer/Library/uninstall-devtools --mode=all
*   rsync 或从另一台运行 10.6.8 的机器复制 /System/Library/Frameworks/Ruby.framework
*   您还需要 /usr/bin 中的 ruby​​ 可执行文件指向系统 Ruby：/usr/bin/{erb,gem,irb,rdoc,ri,ruby,testrb}
*   这些只是 /System/Library/Frameworks/Ruby.framework 的符号链接
*   erb -> ../../System/Library/Frameworks/Ruby.framework/Versions/Current/usr/bin/erb
*   所以我重新对它们进行符号链接，例如从 /usr/bin: sudo ln -s ../../System/Library/Frameworks/Ruby.framework/Versions/Current/usr/bin/erb ./erb
*   brew 可执行文件当前使用 /usr/bin/ruby 所以至少需要在那里
*   我听说 brew 的未来版本将直接指向 /System/Library/Frameworks/Ruby.framework 路径上的系统 ruby​​，因此将 ruby​​ 符号链接到自定义安装是一个坏主意

此时 brew 命令再次起作用，并且再次找到了 ostruct（ruby 标准库的一部分）。我继续添加 xcode 并解决了一些小的“brew doctor”错误。

我现在已经用自制包替换了我所有的旧 macports 包，这是一个很大的改进！

# triggers - Salesforce：检查 ApexTrigger 在测试方法中是否处于活动状态

> ID：10809867
> 
> 赞同：2
> 
> 时间：2012-05-30T04:08:23.913
> 
> 标签：triggers, tdd, salesforce, apex-code

我有一个测试方法，它根据将在插入记录之前运行的触发器进行断言。

在某些情况下，触发器将处于非活动状态，这会导致测试用例失败。

如何检查测试用例中触发器的状态？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T04:12:24.487

事后看来，这并不难。只需在测试方法开始时进行快速查询，如果触发器的状态为非活动状态，则返回。

```
ApexTrigger defaultPriceBookTrigger = 
    [Select Id, Status from ApexTrigger where name='DefaultPriceBook'];
if(defaultPriceBookTrigger.Status == 'Inactive'){
    return;
} 
```

# javascript - JS 挂在 do while 循环上

> ID：10809868
> 
> 赞同：1
> 
> 时间：2012-05-30T04:08:47.967
> 
> 标签：javascript

我想知道如何用 JS 解决挂页问题。

我有一个 JS 循环，我正在像这样测试它，但它似乎永远挂起 - 有没有办法在完成脚本的同时停止它挂起？：

```
<div id="my_data"></div>

<script>
function test(value){
output= [];
do{ 
    value++;
    output.push(value);
    document.getElementById('my_data').innerHTML = (output.join(''));
}while(value < 10000000);
alert('end'); // never occurs
}

test(0);
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T04:11:26.360

您正在使用越来越长的字符串更新 DOM 一千万次。

如果你是某种来自未来的超级存在，那么也许这是有道理的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T04:12:23.003

Javascript 是单线程的，因此在运行循环时不会发生其他任何事情。它运行了一千万次，每次运行时都会将 #my_data 的 innerHTML 设置为新的东西。这是非常低效的，似乎没用。你想达到什么目的？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-30T04:12:13.990

您将`10,000,000`连续的数字连接成一个字符串，这在任何现代超级计算机上都无法正常工作。

如果您想轮询进度，请设置一个计时器以使其速度稍慢一些。这不实用，但看起来不错：http: [//jsfiddle.net/V6jjT/2/](http://jsfiddle.net/V6jjT/2/)

HTML：

```
<div id="my_data"></div> 
```

脚本：

```
var value = 0;
var interval = setInterval(function() {
    if (value > 100) {
        clearInterval(interval);
        return;
    }

    value++;
    document.getElementById('my_data').innerHTML += ' ' + value;
}, 10); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-30T04:11:56.297

像这样运行一个紧密的循环在完成之前不会更新任何东西；另外，10M数组项？！

如果您真的想这样做并且不让浏览器一直挂起，那么您必须使用它`setInterval`来允许浏览器在两者之​​间刷新。

```
function updater(value, max, interval) {
  var output = [],
  node = document.getElementById('my_data'),
  tid = setInterval(function() {
    if (value++ < max) {
      output.push(value);
      node.innerHTML = (output.join(''));
    } else {
      alert('done');
      clearInterval(tid);
    }
  }, interval);
}

updater(0, 10, 200); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-30T04:13:36.187

您不应该在每次迭代时更新 HTML。

```
function test(value){
    output= [];
    do { 
        value++;
        output.push(value);
    } while(value < 10000000);
    document.getElementById('my_data').innerHTML = (output.join(''));
    alert('end'); // never occurs
} 
```

应该可以工作（尽管 HTML 中的 1000 万个数字仍然需要时间来呈现）。

如果您想查看正在运行的数字，您应该看一下[`window.setInterval`](https://developer.mozilla.org/en/DOM/window.setInterval)- 浏览器在 js 执行之间需要一些时间来刷新其视图。因此，您将不得不重写异步运行多个数据块的代码。也可以看看：

*   [在javascript中运行长时间的操作？](https://stackoverflow.com/questions/2196654/running-a-long-operation-in-javascript)（循环的示例代码）
*   [当我的脚本进行繁重的处理时，如何强制浏览器重绘？](https://stackoverflow.com/questions/1209689/how-can-i-force-the-browser-to-redraw-while-my-script-is-doing-some-heavy-proces)
*   [Javascript异步循环处理](https://stackoverflow.com/q/9772400/1048572)
*   [防止长时间运行的 javascript 锁定浏览器](https://stackoverflow.com/q/672732/1048572)
*   [DOM刷新长时间运行的功能](https://stackoverflow.com/a/17000032/1048572)
*   [在不阻塞 UI 的情况下迭代数组的最佳方法](https://stackoverflow.com/q/10344498/1048572)
*   [Javascript - 如何在做繁重的工作时避免阻塞浏览器？](https://stackoverflow.com/q/10180391/1048572)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-03T17:02:00.950

紧密的循环很可能总是耗尽计算能力。我会分块做。比如说，将您的列表分成更小的列表，并在列表之间暂停 5 毫秒。如果你需要，我可以提供一个例子。

# c++ - 提升对散列唯一索引的多索引访问

> ID：10809871
> 
> 赞同：1
> 
> 时间：2012-05-30T04:09:18.200
> 
> 标签：c++, boost, lru, boost-multi-index

此代码取自 boost 多索引“mru”示例：

[http://www.boost.org/doc/libs/1_46_1/libs/multi_index/example/serialization.cpp](http://www.boost.org/doc/libs/1_46_1/libs/multi_index/example/serialization.cpp)

我的代码与 boost::unordered_map 类似，但我真的很想从这个例子中添加 mru 功能。

我想让这段代码尽可能地接近 boost::unordered_map 。对我来说，关键特性是 unordered_map 的 [] 运算符。

main() 的最后几行被打破，每行上方作为评论是我的问题。

在此先感谢所有答案评论。

```
#include <algorithm>
#include <boost/multi_index_container.hpp>
#include <boost/multi_index/hashed_index.hpp>
#include <boost/multi_index/identity.hpp>
#include <boost/multi_index/sequenced_index.hpp>
#include <iostream>

using namespace boost::multi_index;

class my_struct {
public:
    my_struct(int in_a, std::string in_b) : a(in_a), b(in_b) {}

    int a;
    std::string b;

    bool operator==(const my_struct &rhs) const
    {
        return (a == rhs.a);
    }
    bool operator!=(const my_struct &rhs) const
    {
            return !(*this == rhs);
    }

    friend std::ostream& operator<<(std::ostream &out, const my_struct&ms);
};

std::ostream& operator<<(std::ostream &out, my_struct &ms)
{
    out << ms.a << " " << ms.b << std::endl;
    return out;
}

inline std::size_t
hash_value(const my_struct &val)
{
    return boost::hash_value(val.a);
}

// tags for multi_index
struct umap {};
template <typename Item>
class mru_list
{
  typedef multi_index_container<
    Item,
    indexed_by<
      sequenced<>,
      hashed_unique<boost::multi_index::tag<umap>, identity<Item> >
    >
  > item_list;

public:

  typedef Item                         item_type;
  typedef typename item_list::iterator iterator;

  mru_list(std::size_t max_num_items_):max_num_items(max_num_items_){}

  void insert(const item_type& item)
  {
    std::pair<iterator,bool> p=il.push_front(item);

    if(!p.second){                     /* duplicate item */
      il.relocate(il.begin(),p.first); /* put in front */
    }
    else if(il.size()>max_num_items){  /* keep the length <= max_num_items */
      il.pop_back();
    }
  }

  iterator begin(){return il.begin();}
  iterator end(){return il.end();}

//private:
  item_list   il;
  std::size_t max_num_items;
};

int main()
{
    mru_list<my_struct> mru(10);
    my_struct one(1, "One");

    mru.insert(one);
    mru.insert(my_struct(2, "Two"));
    mru.insert(my_struct(3, "Three"));
    mru.insert(one);

    std::cout<<"most recently entered terms:"<<std::endl;
    for (mru_list<my_struct>::iterator itr = mru.begin(); itr != mru.end(); ++itr) {
        std::cout << itr->a << std::endl;
    }

    // what is my return type?
    mru.il.get<umap>();

    // Why doesn't this work?
    mru_list<my_struct>::iterator itr = mru.il.get<umap>().find(one);

    // Why doesn't this have a [] operator like boost:unordered_map
    mru.il.get<umap>()[1] = "foobar";

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:35:43.297

> // 我的返回类型是什么？
> 
> ```
> mru.il.get<umap>(); 
> ```

它的返回类型是您的`umap`索引的类型，即：

```
 typedef typename boost::multi_index::index<
        item_list
      , umap
      >::type hashed_index_t;

  mru_list<my_struct>::hashed_index_t& hashed_index = mru.il.get<umap>(); 
```

在 C++11 中，使用以下命令更容易`auto`：

```
 auto& hashed_index = mru.il.get<umap>(); 
```

> // 为什么这不起作用？
> 
> ```
> mru_list<my_struct>::iterator itr = mru.il.get<umap>().find(one); 
> ```

`find()`返回`umap`（第二个）索引的迭代器，上面的语句将其分配给第一个索引的迭代器。有[投影操作](http://www.boost.org/doc/libs/1_49_0/libs/multi_index/doc/reference/multi_index_container.html#projection)可以从一种索引迭代器类型转换为同一多索引容器的另一种迭代器类型，例如：

```
mru_list<my_struct>::iterator itr = project<0>(mru.il, hashed_index.find(one)); 
```

> // 为什么没有像 boost:unordered_map 这样的 [] 运算符

不能说为什么，[就是没有](http://www.boost.org/doc/libs/1_49_0/libs/multi_index/doc/reference/hash_indices.html)。

# ruby-on-rails - 为什么批量分配代码不起作用

> ID：10809875
> 
> 赞同：-1
> 
> 时间：2012-05-30T04:09:46.467
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, mass-assignment

在我们的 rails 3.1.4 应用程序的 sys_log 模型中定义了一个质量分配：

```
attr_accessible :log_date, :user_name, :user_id, :user_ip, :action_logged, :as => :new_log 
```

在 application_controller 中定义了一个方法来保存日志：

```
 def sys_logger(action_logged)
    log = SysLog.new(:log_date => Time.now, :user_id => session[:user_id], :user_name => session[:user_name], :user_ip => session[:user_ip],
                     :action_logged => action_logged, :as => :new_log)
    log.save
  end 
```

但是，批量分配不起作用。这是警告消息：

```
WARNING: Can't mass-assign protected attributes: log_date, user_id, user_name, 
user_ip, action_logged, as 
```

:new_log 未按定义工作。上面的代码有什么问题？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:05:37.097

现在`:as => :new_log`是属性哈希的一部分，而不是您传入的单独选项。

添加一些花括号应该会有所帮助：

```
def sys_logger(action_logged)
  log = SysLog.new({:log_date => Time.now, :user_id => session[:user_id],
                    :user_name => session[:user_name], :user_ip => session[:user_ip], 
                    :action_logged => action_logged }, :as => :new_log)
  log.save
end 
```

或临时分配它：

```
def sys_logger(action_logged)
  attrs = { :log_date => Time.now, :user_id => session[:user_id],
            :user_name => session[:user_name], :user_ip => session[:user_ip],
            :action_logged => action_logged }
  log = SysLog.new(attrs, :as => :new_log)
  log.save
end 
```

# python - 在 Django 项目中使用 request.user.is_authenticated()

> ID：10809879
> 
> 赞同：1
> 
> 时间：2012-05-30T04:10:08.373
> 
> 标签：python, django, mongodb, django-authentication, mongoengine

当我尝试做时，`request.user.is_authenticated()`我得到一个`ValidationError: None is not a valid ObjectId`

我正在尝试追查问题，但我不知道是什么原因造成的。我正在使用 MongoEngine（和 MongoDB。）

我的 settings.py 中有以下内容：

```
AUTHENTICATION_BACKENDS = (
    'mongoengine.django.auth.MongoEngineBackend',
    'rs.claimutil.auth_backend.ClaimAuthBackend',
)

SESSION_ENGINE = 'mongoengine.django.sessions' 
```

这就是我得到的：

> 回溯：get_response 111 中的文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/handlers/base.py”。 response = callback(request, *callback_args, **callback_kwargs) 保留 11 中的文件“/Users/bastiano/Documents/ttsf/rsrv/views.py”。如果不是 request.user.is_authenticated()：文件“/Library/Frameworks/Python.framework/Versions/2.7/ lib/python2.7/site-packages/django/utils/functional.py”在内部 184.self._setup() 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site- packages/django/utils/functional.py" 在 _setup 248\. self._wrapped = self._setupfunc() 文件 "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/贡献/授权/中间件。py" 在 16\. request.user = SimpleLazyObject(lambda: get_user(request)) File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/contrib/auth/middleware .py" 在 get_user 8\. request._cached_user = auth.get_user(request) 文件 "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/contrib/auth/**get_user 101 中的**init** .py"。用户 = backend.get_user(user_id) 或 AnonymousUser() 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/mongoengine/django/auth .py”在 get_user 149 中。在 with_id 923 中返回 User.objects.with_id(user_id) 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/mongoengine/queryset.py” . return self.filter(pk=object_id).first() File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/mongoengine/queryset.py" 在第一个 843\. 结果= self [0] **getitem**中的文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/mongoengine/queryset.py” **1136\. return self._document._from_son(self._cursor[key]) File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/mongoengine/queryset.py" in _cursor 579 .self._cursor_obj = self._collection.find(self._query, File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/mongoengine/queryset.py" in _query 375。 self._mongo_query = self._query_obj.to_query(self._document) 文件 "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/mongoengine/queryset.py" 在 to_query 202\. 查询= query.accept(QueryCompilerVisitor(document)) 接受 267 中的文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/mongoengine/queryset.py”。在visit_query 159中返回visitor.visit_query（self）文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/mongoengine/queryset.py”。返回QuerySet._transform_query（self.document , **query.query) _transform_query 720 中的文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/mongoengine/queryset.py”。 value = field.prepare_query_value(op,值）文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/mongoengine/base.py”在prepare_query_value 455。返回self.to_mongo（值）文件“/Library/Frameworks /Python.framework/Versions/2.7/lib/python2.7/site-packages/mongoengine/base.py”在 to_mongo 451.self.error(unicode(e)) 文件中”/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/mongoengine/base.py”在错误 203 中。引发 ValidationError(message, errors=errors, field_name=field_name)****
> 
>  ****异常类型：/rs/claim 处的 ValidationError 异常值：无不是有效的 ObjectId****

 ****任何想法为什么会发生这种情况？有没有更简单的方法在 Django + MongoDB 中进行用户身份验证？

视图.py：

```
def claim(request):
    if request.method == 'GET':
        if not request.user.is_authenticated():
            return shortcuts.redirect('rs/login')
        all_b = dbutil.get_b(all=True)
        return shortcuts.render_to_response('rs/index.html',
                                             {'all_b':all_b},
                                            context_instance=template.RequestContext(request))
    elif request.method == 'POST': 
```

为简单起见，省略了视图的其余部分。我用 ipdb 调试它，`if not request.user.is_authenticated()`是问题所在。我之前尝试过使用`django.contrib.auth.decorators.login_required.decorator`，但它也失败了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T05:30:57.837

尝试将您的更新`mongoengine`到最新版本。[在 master](https://github.com/hmarr/mongoengine/blob/master/mongoengine/django/auth.py#L157)中，它是

```
def get_user(userid):
    """Returns a User object from an id (User.id). Django's equivalent takes
    request, but taking an id instead leaves it up to the developer to store
    the id in any way they want (session, signed cookie, etc.)
    """
    # your installed mongoengine might not include following two lines
    if not userid:
        return AnonymousUser()
    return MongoEngineBackend().get_user(userid) or AnonymousUser() 
```

根据引用，`userid`w/ 值会导致问题。`None`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:30:48.083

在我的一个观点中，我有以下几点： `r_v.obj.backend = 'mongoengine.django.auth.MongoEngineBackend'`这就是为什么 Django 忽略了 settings.py 中的 AUTHENTICATION_BACKENDS，并且从未使用我的自定义身份验证后端。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T08:27:12.150

你使用的是什么版本的 MongoEngine / Django？

你启用了`django.contrib.auth.middleware.AuthenticationMiddleware`吗？那应该设置一个`User`实例或`AnonymousUser`请求。

`rs.claimutil.auth_backend.ClaimAuthBackend`看起来像什么？它的`get_user`方法返回什么？如果您只有一个身份验证后端，它会停止出错吗？****

# jquery - jQuery mobile 中的 Ajax 表单提交。神话？

> ID：10809880
> 
> 赞同：3
> 
> 时间：2012-05-30T04:10:09.030
> 
> 标签：jquery, ajax, forms, mobile, submit

jQuery Mobile 是否支持 ajax 表单提交？这可能听起来像一个荒谬的问题，但是在与它斗争了几个小时之后，然后检查了 jquerymobile.com 文档，我开始认为它没有！

我将跳过我自己的代码，直接访问 jquerymobile.com。

[http://jquerymobile.com/test/docs/forms/forms-sample.html](http://jquerymobile.com/test/docs/forms/forms-sample.html)

此页面有一个名为“默认 Ajax 表单示例”的部分，作者非常简要地告诉我们 jQuery mobile 如何处理 ajax 表单提交。用他/她的话说，“jQuery Mobile 将确保指定的 Url 能够通过 Ajax 检索，并进行适当的处​​理。” 显然，那里有很多细节。具有讽刺意味的是，提供的样本不会自动调用结果。它只是重定向到结果 php 脚本。不执行ajax。该表单是带有操作和方法的标准 html 表单。它看起来应该完全按照它的行为，重定向到一个新位置。JQM 应该以某种方式自动加入并设置 ajax，但它在我的 iPhone、Safari、Firefox 或 Chrome 中没有这样做。

我是疯了，还是 JQM 不完整，并且错误地宣传了这个功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:57:48.470

多谢你们。我不知道 URL 在 ajax 拉取时被重写。如果您还没有准备任何内容，它看起来就像是定期更改位置。我觉得有点傻。

# c++ - POCO如何发送XML数据？

> ID：10809886
> 
> 赞同：1
> 
> 时间：2012-05-30T04:11:11.087
> 
> 标签：c++, http-post, poco-libraries

在我的项目中，我遇到了一个严重的问题，程序无法接收数据然后崩溃。这些是我的代码：

```
HTTPClientSession s("x.x.x.x",8000);
HTTPRequest request(HTTPRequest::HTTP_POST);
std::ostream& send = s.sendRequest(request);
std::string body = "<a> xml </a>";
request.setContentLength( body.length() );
send << body <<std::flush;
HTTPResponse response;
std::istream& res = s.receiveResponse(response);
StreamCopier::copyStream(res, std::cout); 
```

在我运行它之后，当我的程序从服务器接收到数据时，它崩溃并抛出

```
Poco::Net::messageException 
```

。我的天啊！我追踪到 POCO 的内部代码，发现：

```
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN"> 
```

是我在 VS2005 中的数据发送属性。同时，Poco 发现 is 的最后一个字母`<!DOCTYPE`不是`E`空格，所以抛出异常。有人遇到过这个案子吗？谁能帮帮我？非常感谢！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:27:27.343

我发送数据的方式几乎相同。我的代码只有一个区别。

```
request.setContentType("text/xml; charset=utf-8"); 
```

根据 Poco 库的源代码，异常 'Poco::Net::MessageException' 由于来自 http 服务器的错误响应而引发。

# css - 如何使用 CSS Grid (Semantic.gs) 在嵌套列的父列上进行填充

> ID：10809892
> 
> 赞同：0
> 
> 时间：2012-05-30T04:12:00.183
> 
> 标签：css, grid, less, grid-system, semantic.gs

我使用[Semantic.gs](http://semantic.gs)作为我的网格系统。我正在按照[嵌套列示例](http://semantic.gs/examples/nested/nested.html)来尝试创建我想要的内容，同时尽可能地遵循网格。给定来自 Semantic.gs 的嵌套列示例代码：

HTML

```
<article>
   <ul>
      <li>1</li>
      <li>2</li>
      <li>3</li>
      <li>4</li>
      <li>5</li>
      <li>6</li>
   </ul>
</article> 
```

较少的

```
article {
   .column(9);

   ul {
      .row(9);

      li {
         .column(6,9);
      }
   }
} 
```

我的问题是，在尽可能遵守网格系统（semantic.gs）的同时，向嵌套列的父级添加填充（理想情况下与排水沟宽度相同）的最佳方法是什么？**请注意，我使用的是 960px 的固定布局**。

这是我尝试在米色父元素上使用左右填充来实现的示例（Photoshop，不完全根据上面的代码）图像：

## ![在此处输入图像描述](../Images/dbaaedacc2459f2bd72cba503036319d.png)

**更新：** 按照桑迪普斯的例子，我能够做到这一点，但我没有提到我使用的是 960px 网格。这是我的结果：[http](http://bit.ly/M5fr5N) ://bit.ly/M5fr5N 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T04:38:40.573

您可以为此使用 CSS **box-sizing**属性。像这样写：

```
#maincolumn {
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    padding: 20px;
    background: none repeat scroll 0 0 red;
    display: inline;
    float: left;
    margin: 0 1.04167%;
    width: 72.9167%;
} 
```

# javascript - 将路径添加到当前 URL 位置

> ID：10809895
> 
> 赞同：0
> 
> 时间：2012-05-30T04:12:05.423
> 
> 标签：javascript

我正在编写代码以使用 Read with Korea Language 更改语言

# 例子：

# 目前网址为：

[http://www.domain.com/EN/index.php](http://www.domain.com/EN/index.php)

# 当用户按下 onClick URL 更改为：

[http://www.domain.com/KO/index.php](http://www.domain.com/KO/index.php)

我的意思是我只想将 EN 替换为 KO，然后再次重新加载页面。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T04:14:43.127

如果您重新加载页面，为什么不使用普通的 a href。

```
<a href="http://www.domain.com/KO/index.php">KO</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T04:14:52.430

使用*window.location*对象访问新 URL：

```
window.location = window.location.protocol + "//" 
    + window.location.host + window.location.pathname.replace("EN", "KO"); 
```

或者我想更简单，只是：

```
window.location = window.location.href.replace("/EN/", "/KO/"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T04:34:55.650

如果要加载特定于区域的 URL，请检查地理位置的 IP 过滤。根据您将获得的 IP，加载相应的 URL。例如，您可以使用：

```
 if(ip address coming from <region>)
  window.location.replace("http://www.domain.com/<region>/index.php"); 
```

# jquery-ui - 结合 Autocomplete UI 1.8.16 和 Autocomplete 1.0.2 插件

> ID：10809912
> 
> 赞同：-1
> 
> 时间：2012-05-30T04:15:45.657
> 
> 标签：jquery-ui, jquery, jquery-plugins, jquery-autocomplete

> **可能重复：**
> [自动完成 UI 1.8.16 和自动完成 1.0.2 插件问题](https://stackoverflow.com/questions/10794341/autocomplete-ui-1-8-16-and-autocomplete-1-0-2-plugin-issue)

我被 Autocomplete UI 1.8.16 和 Autocomplete 1.0.2 插件之间的冲突所困扰。

关于如何将这两者结合起来的任何线索？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T04:43:03.157

这两个自动完成功能可能在 jquery 命名空间内发生冲突

尝试这样的事情：

```
<script src="jquery"></script>
<script src="plugin1"></script>
<script>
$p1 = $
$ = $p1.sub();
</script>
<script src="plugin2"></script> 
```

然后将 $p1() 用于第一个插件，并在其他任何地方使用 $。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T04:35:32.187

这是因为这两个插件都有一些同名的功能。尝试重命名一些冲突函数。

# makefile - 在 Native Client (NaCl) 中链接 libxxx.so 时出错

> ID：10809916
> 
> 赞同：1
> 
> 时间：2012-05-30T04:17:12.023
> 
> 标签：makefile, shared-libraries, google-nativeclient, irrlicht

我正在努力将 libIrrlicht.so 文件与我的示例源文件链接起来。

这是我的makefile

```
PROJECT:=testirrlicht
LDFLAGS:=-lppapi_gles2 -lppapi_cpp -Iinclude -lppapi libs/libIrrlicht.so
CXX_SOURCES:=testirrlicht.cc

THIS_MAKEFILE:=$(abspath $(lastword $(MAKEFILE_LIST)))
NACL_SDK_ROOT?=$(abspath $(dir $(THIS_MAKEFILE))../..)

CXXFLAGS:=-pthread -g -Wall -Werror -I./include -D_IRR_STATIC_LIB_ -fabi-version=1

OSNAME:=win
TC_PATH:=$(abspath $(NACL_SDK_ROOT)/toolchain/$(OSNAME)_x86_newlib)
CXX:=$(TC_PATH)/bin/i686-nacl-g++

CYGWIN ?= nodosfilewarning
export CYGWIN

all: $(PROJECT)_x86_32.nexe $(PROJECT)_x86_64.nexe

# Define 32 bit compile and link rules for C++ sources
x86_32_OBJS:=$(patsubst %.cc,%_32.o,$(CXX_SOURCES))
$(x86_32_OBJS) : %_32.o : %.cc $(THIS_MAKE)
        $(CXX) -o $@ -c $< -m32 -O0 -g $(CXXFLAGS)

$(PROJECT)_x86_32.nexe : $(x86_32_OBJS)
        $(CXX) -o $@ $^ -m32 -O0 -g $(CXXFLAGS) $(LDFLAGS)

# Define 64 bit compile and link rules for C++ sources
x86_64_OBJS:=$(patsubst %.cc,%_64.o,$(CXX_SOURCES))
$(x86_64_OBJS) : %_64.o : %.cc $(THIS_MAKE)
        $(CXX) -o $@ -c $< -m64 -O0 -g $(CXXFLAGS)

$(PROJECT)_x86_64.nexe : $(x86_64_OBJS)
        $(CXX) -o $@ $^ -m64 -O0 -g $(CXXFLAGS) $(LDFLAGS)

# Define a phony rule so it always runs, to build nexe and start up server.
.PHONY: RUN 
RUN: all
        python ../httpd.py 
```

这是我的编译错误：

```
$ make
/cygdrive/d/naclsdk/pepper_18/toolchain/win_x86_newlib/bin/i686-nacl-g++ -o testirrlicht_x86_3.nexe testirrlicht_32.o -m32 -O0 -g -pthread -g -Wall -Werror -I./include -D_IRR_STATIC_LIB_ -abi-version=1 -lppapi_gles2 -lppapi_cpp -Iinclude -lppapi libs/libIrrlicht.so
/x86_64-nacl-ld: warning: libstdc++.so.6, needed by libs/libIrrlicht.so, not found (try using rpath or -rpath-link)
/x86_64-nacl-ld: warning: libm.so.3c8d1f2e, needed by libs/libIrrlicht.so, not found (try usin -rpath or -rpath-link)
/x86_64-nacl-ld: warning: libgcc_s.so.1, needed by libs/libIrrlicht.so, not found (try using -path or -rpath-link)
/x86_64-nacl-ld: warning: libpthread.so.3c8d1f2e, needed by libs/libIrrlicht.so, not found (tr using -rpath or -rpath-link)
/x86_64-nacl-ld: warning: libc.so.3c8d1f2e, needed by libs/libIrrlicht.so, not found (try usin -rpath or -rpath-link)
libs/libIrrlicht.so: undefined reference to `wcscpy@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glAttachShader'
libs/libIrrlicht.so: undefined reference to `operator new[](unsigned int)@GLIBCXX_3.4'
libs/libIrrlicht.so: undefined reference to `glEnable'
libs/libIrrlicht.so: undefined reference to `glBindAttribLocation'
libs/libIrrlicht.so: undefined reference to `glHint'
libs/libIrrlicht.so: undefined reference to `glLineWidth'
libs/libIrrlicht.so: undefined reference to `wcslen@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `asin@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glIsEnabled'
libs/libIrrlicht.so: undefined reference to `glGetShaderiv'
libs/libIrrlicht.so: undefined reference to `memset@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glFrontFace'
libs/libIrrlicht.so: undefined reference to `glGetActiveUniform'
libs/libIrrlicht.so: undefined reference to `glBindRenderbuffer'
libs/libIrrlicht.so: undefined reference to `glDisable'
libs/libIrrlicht.so: undefined reference to `operator delete(void*)@GLIBCXX_3.4'
libs/libIrrlicht.so: undefined reference to `glTexParameterf'
libs/libIrrlicht.so: undefined reference to `glClear'
libs/libIrrlicht.so: undefined reference to `gmtime@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glFramebufferTexture2D'
libs/libIrrlicht.so: undefined reference to `__cxa_guard_release@CXXABI_1.3'
libs/libIrrlicht.so: undefined reference to `strncpy@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `swprintf@GLIBC_2.2'
libs/libIrrlicht.so: undefined reference to `glGetError'
libs/libIrrlicht.so: undefined reference to `glUniform4iv'
libs/libIrrlicht.so: undefined reference to `mbstowcs@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `strtod@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glStencilFunc'
libs/libIrrlicht.so: undefined reference to `eglInitialize'
libs/libIrrlicht.so: undefined reference to `fmod@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glStencilMask'
libs/libIrrlicht.so: undefined reference to `glGetAttachedShaders'
libs/libIrrlicht.so: undefined reference to `sscanf@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glDisableVertexAttribArray'
libs/libIrrlicht.so: undefined reference to `glDeleteProgram'
libs/libIrrlicht.so: undefined reference to `glGenRenderbuffers'
libs/libIrrlicht.so: undefined reference to `__cxa_guard_acquire@CXXABI_1.3'
libs/libIrrlicht.so: undefined reference to `glUniformMatrix4fv'
libs/libIrrlicht.so: undefined reference to `glUseProgram'
libs/libIrrlicht.so: undefined reference to `glClearColor'
libs/libIrrlicht.so: undefined reference to `glUniformMatrix3fv'
libs/libIrrlicht.so: undefined reference to `strcmp@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glUniform1iv'
libs/libIrrlicht.so: undefined reference to `sin@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `longjmp@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `eglCreateContext'
libs/libIrrlicht.so: undefined reference to `localtime@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `ftell@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `sinf@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `eglMakeCurrent'
libs/libIrrlicht.so: undefined reference to `glDeleteBuffers'
libs/libIrrlicht.so: undefined reference to `glReadPixels'
libs/libIrrlicht.so: undefined reference to `glDeleteShader'
libs/libIrrlicht.so: undefined reference to `_setjmp@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `eglQueryString'
libs/libIrrlicht.so: undefined reference to `glCheckFramebufferStatus'
libs/libIrrlicht.so: undefined reference to `strtoul@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `puts@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glEnableVertexAttribArray'
libs/libIrrlicht.so: undefined reference to `glGenFramebuffers'
libs/libIrrlicht.so: undefined reference to `glActiveTexture'
libs/libIrrlicht.so: undefined reference to `glBufferData'
libs/libIrrlicht.so: undefined reference to `acosf@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `atol@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glColorMask'
libs/libIrrlicht.so: undefined reference to `ferror@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `eglSwapBuffers'
libs/libIrrlicht.so: undefined reference to `floorf@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glBlendFunc'
libs/libIrrlicht.so: undefined reference to `glDetachShader'
libs/libIrrlicht.so: undefined reference to `tan@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glGetProgramInfoLog'
libs/libIrrlicht.so: undefined reference to `acos@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glCopyTexSubImage2D'
libs/libIrrlicht.so: undefined reference to `fwrite@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `getenv@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `fseek@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glBindTexture'
libs/libIrrlicht.so: undefined reference to `glRenderbufferStorage'
libs/libIrrlicht.so: undefined reference to `fputc@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glGetProgramiv'
libs/libIrrlicht.so: undefined reference to `glDepthMask'
libs/libIrrlicht.so: undefined reference to `malloc@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glStencilOp'
libs/libIrrlicht.so: undefined reference to `strstr@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `cosf@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `printf@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glCreateShader'
libs/libIrrlicht.so: undefined reference to `glDeleteTextures'
libs/libIrrlicht.so: undefined reference to `strncmp@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glGenerateMipmap'
libs/libIrrlicht.so: undefined reference to `glBlendEquation'
libs/libIrrlicht.so: undefined reference to `glBufferSubData'
libs/libIrrlicht.so: undefined reference to `glCullFace'
libs/libIrrlicht.so: undefined reference to `glCreateProgram'
libs/libIrrlicht.so: undefined reference to `fflush@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `fread@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `stderr@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `memcpy@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glPixelStorei'
libs/libIrrlicht.so: undefined reference to `glGetIntegerv'
libs/libIrrlicht.so: undefined reference to `strlen@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glGenBuffers'
libs/libIrrlicht.so: undefined reference to `operator delete[](void*)@GLIBCXX_3.4'
libs/libIrrlicht.so: undefined reference to `__errno_location@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `atan2f@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `atan2@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glDrawElements'
libs/libIrrlicht.so: undefined reference to `glDeleteFramebuffers'
libs/libIrrlicht.so: undefined reference to `glFramebufferRenderbuffer'
libs/libIrrlicht.so: undefined reference to `cos@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `eglSwapInterval'
libs/libIrrlicht.so: undefined reference to `glUniformMatrix2fv'
libs/libIrrlicht.so: undefined reference to `glTexImage2D'
libs/libIrrlicht.so: undefined reference to `eglGetError'
libs/libIrrlicht.so: undefined reference to `pow@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glUniform2iv'
libs/libIrrlicht.so: undefined reference to `glDepthFunc'
libs/libIrrlicht.so: undefined reference to `memcmp@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `fopen@GLIBC_2.1'
libs/libIrrlicht.so: undefined reference to `glDrawArrays'
libs/libIrrlicht.so: undefined reference to `fmodf@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glDeleteRenderbuffers'
libs/libIrrlicht.so: undefined reference to `glClearDepthf'
libs/libIrrlicht.so: undefined reference to `glScissor'
libs/libIrrlicht.so: undefined reference to `time@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `fprintf@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `atof@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glTexSubImage2D'
libs/libIrrlicht.so: undefined reference to `powf@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glVertexAttribPointer'
libs/libIrrlicht.so: undefined reference to `atoi@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glGetBooleanv'
libs/libIrrlicht.so: undefined reference to `strcpy@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `wcscmp@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `memmove@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glGetString'
libs/libIrrlicht.so: undefined reference to `glBindBuffer'
libs/libIrrlicht.so: undefined reference to `__assert_fail@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glPolygonOffset'
libs/libIrrlicht.so: undefined reference to `glBindFramebuffer'
libs/libIrrlicht.so: undefined reference to `glLinkProgram'
libs/libIrrlicht.so: undefined reference to `glUniform3iv'
libs/libIrrlicht.so: undefined reference to `abort@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glUniform1fv'
libs/libIrrlicht.so: undefined reference to `glGetShaderInfoLog'
libs/libIrrlicht.so: undefined reference to `__cxa_pure_virtual@CXXABI_1.3'
libs/libIrrlicht.so: undefined reference to `sprintf@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glUniform2fv'
libs/libIrrlicht.so: undefined reference to `glShaderSource'
libs/libIrrlicht.so: undefined reference to `__cxa_atexit@GLIBC_2.1.3'
libs/libIrrlicht.so: undefined reference to `exit@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `snprintf@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `eglBindAPI'
libs/libIrrlicht.so: undefined reference to `operator new(unsigned int)@GLIBCXX_3.4'
libs/libIrrlicht.so: undefined reference to `glViewport'
libs/libIrrlicht.so: undefined reference to `glUniform3fv'
libs/libIrrlicht.so: undefined reference to `gettimeofday@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glUniform4fv'
libs/libIrrlicht.so: undefined reference to `eglGetDisplay'
libs/libIrrlicht.so: undefined reference to `eglTerminate'
libs/libIrrlicht.so: undefined reference to `glGetUniformLocation'
libs/libIrrlicht.so: undefined reference to `glTexParameteri'
libs/libIrrlicht.so: undefined reference to `eglCreateWindowSurface'
libs/libIrrlicht.so: undefined reference to `free@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `logf@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `setlocale@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `fclose@GLIBC_2.1'
libs/libIrrlicht.so: undefined reference to `sqrtf@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `glGenTextures'
libs/libIrrlicht.so: undefined reference to `glCompileShader'
libs/libIrrlicht.so: undefined reference to `ceilf@GLIBC_2.0'
libs/libIrrlicht.so: undefined reference to `eglChooseConfig'
libs/libIrrlicht.so: undefined reference to `sqrt@GLIBC_2.0'
collect2: ld returned 1 exit status
Makefile:58: recipe for target `testirrlicht_x86_32.nexe' failed
make: *** [testirrlicht_x86_32.nexe] Error 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:42:47.730

修复了问题。我在 glibc 中构建了库，并使用 newlib 构建了示例应用程序。现在，我将两者都更改为 glibc 并部分修复了一些问题。

```
$ make
/cygdrive/d/naclsdk/pepper_18/toolchain/win_x86_glibc/bin/i686-nacl-gcc -o testirrlicht_x86_32.nexe testirrlicht_32.o -m32 -O0 -g -Wall -Iinclude -lpthread -lppapi_cpp -lppapi -lstdc++ -lgcc -lppapi_gles2 libs/libIrrlicht.so
/libexec/../lib/gcc/x86_64-nacl/4.4.3/../../../../x86_64-nacl/lib/../lib32/libppapi_cpp.so: warning: warning: pthread_cancel is not implemented and will always fail
libs/libIrrlicht.so: undefined reference to `eglCreateWindowSurface'
libs/libIrrlicht.so: undefined reference to `eglBindAPI'
libs/libIrrlicht.so: undefined reference to `eglCreateContext'
libs/libIrrlicht.so: undefined reference to `eglMakeCurrent'
libs/libIrrlicht.so: undefined reference to `eglGetDisplay'
libs/libIrrlicht.so: undefined reference to `eglChooseConfig'
libs/libIrrlicht.so: undefined reference to `eglInitialize'
libs/libIrrlicht.so: undefined reference to `eglQueryString'
/libexec/../lib/gcc/x86_64-nacl/4.4.3/../../../../x86_64-nacl/lib/../lib32/libppapi_cpp.so: undefined reference to `pp::CreateModule()'
libs/libIrrlicht.so: undefined reference to `eglSwapInterval'
libs/libIrrlicht.so: undefined reference to `eglSwapBuffers'
libs/libIrrlicht.so: undefined reference to `eglGetError'
libs/libIrrlicht.so: undefined reference to `eglTerminate'
collect2: ld returned 1 exit status
Makefile:58: recipe for target `testirrlicht_x86_32.nexe' failed
make: *** [testirrlicht_x86_32.nexe] Error 1 
```

# java - 在模板参数中播放 2.0 括号

> ID：10809918
> 
> 赞同：3
> 
> 时间：2012-05-30T04:17:28.700
> 
> 标签：java, scala, playframework-2.0

我正在使用 java 玩 2.0 大约一个月，但有一件事我真的无法理解。模板如何真正起作用？将参数传递给他们的最佳方式是什么？

有什么区别

```
@(name: String, value: String) 
```

和

```
@(name: String)(value: String) 
```

这只是为了方便吗？

我发现[这个](https://stackoverflow.com/questions/6643030/what-is-the-rule-for-parenthesis-in-scala-method-invocation)问题揭开了神秘的面纱，但它并没有说明我应该选择哪种方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T07:00:03.413

典型的例子是：

// main.scala.html

```
@(title: String)(content: Html)
.... 
```

// index.scala.html

```
@main("Foo Title") {
  <div>this content Html param passed in as a block {}</div>
} 
```

和：`@(title: String, content: Html)`

语法不太好：

```
@main("Foo Title", {
  <div>...</div>
}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T07:47:18.400

在第一种情况下，您将多个参数传递给一个函数。在第二种情况下，您正在使用柯里化。根据维基百科：

> 在数学和计算机科学中，柯里化是一种转换具有多个参数（或参数的 n 元组）的函数的技术，使得它可以被称为一个函数链，每个函数都有一个参数（部分应用） . [http://en.wikipedia.org/wiki/Currying](http://en.wikipedia.org/wiki/Currying)

每个用例的最佳选择有所不同。

编辑：请注意，模板只是 Scala 函数。

# java - 如何在 Java 中播放视频文件中的视频和音频

> ID：10809919
> 
> 赞同：1
> 
> 时间：2012-05-30T04:17:33.163
> 
> 标签：java, video, lwjgl

我知道这个问题之前已经被问过很多次了，但是在搜索完所有答案之后似乎都已经过时了（两年或更长时间），所以我认为再次问这个问题是合理的。

哪些库可用于在 java 中读取和显示视频文件（例如 .avi 和类似文件）？我目前正在使用 lwjgl，并且无法轻松更改为其他库，因此请将建议限制为与 lwjgl 兼容的那些。

我要做的是使用 lwjgl 创建全屏显示，将视频（音频同步）显示为介绍，然后在视频完成或强制跳过时继续主菜单。

# php - 内存缓存不能在 Windows 上运行？

> ID：10809921
> 
> 赞同：2
> 
> 时间：2012-05-30T04:17:52.407
> 
> 标签：php, memcached, wamp, wampserver

我安装了memcached，我还通过键入net start“memcached Server”启动了服务，它说服务已经启动，所以我重新启动了apache并尝试了一些使用memcached的代码：

```
<?php
//phpinfo();
$memcache = new Memcache;
$memcache->connect("localhost",11211); //change if necessary

$tempArray = array('fish', 'cow', 'demon');
$temp = serialize($testArray);

$memcache->add("key", $temp, 60);
print_r(unserialize($memcache->get("key")));

?> 
```

但它给出了一个错误：`Fatal error: Class 'Memcache' not found in C:\wamp\www\temp.php on line 3` 这是否意味着没有启动内存缓存或其他任何东西？除了安装和启动服务之外，我没有做任何事情我还需要做任何其他事情，比如指定 RAM 和添加服务器或其他事情吗？我正在使用 wamp 服务器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T07:03:15.250

以下是对我有用的步骤：

网址：[如何在 WAMP 中启用内存缓存](https://stackoverflow.com/questions/3016656/how-to-enable-memcache-in-wamp)

所需文件

```
memcached.exe Direct Link
MSVCP71.DLL Windows DLL Files
msvcr71.dll
php_memcache.dll Working memcache for PHP 5.3.4 
```

脚步

```
Copy MSVCP71.DLL, msvcr71.dll to C:\windows\sysWOW64
Copy memcached.exe into C:\memcached
Click Windows-Key
Type: CMD
press: Ctrl-Shift-Enter
Choose yes
type: C:\memcached\memcached.exe -d install
type: C:\memcached\memcached.exe -d start
Copy php_memcache.dll to C:\wamp\bin\php\php5.3.4\ext
Restart Apache using Wamp controls
Enable WAMP -> PHP -> PHP Extensios -> php_memcache 
```

然后，我点击了 phpinfo()，它没有显示 memcache 属性。任何人都可以帮助我安装 wmap。

-- 谢谢 D.Jeeva

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T02:15:56.677

如果您还没有，请确保您也以管理员身份运行命令提示符。还要确保您启用了 memcache 并且您拥有正确的 dll。使用 phpinfo() 检查 memcache 是否在 PHP 端启用。然后只需运行一个快速脚本来测试 memcache 是否可操作。如果您没有遇到错误，请尝试以下操作，memcache 已启用。

```
<?php
$memcache = new Memcache;
$memcache->connect("localhost",11211); //change if necessary

$tempArray = array('fish', 'cow', 'demon');
$temp = serialize($testArray);

$memcache->add("key", $temp, 60);
print_r(unserialize($memcache->get("key")));
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T04:22:39.730

Memcached 服务是不够的。它本身与 PHP 无关，也不容易从 PHP 中使用。为了使它可以被 PHP 使用，您还需要[Memcache](http://php.net/manual/en/book.memcache.php)或[Memcached](http://php.net/manual/en/book.memcached.php) PHP 扩展来处理与服务的通信。看起来您打算使用 Memcache。

[PHP 手册](http://www.php.net/manual/en/install.pecl.windows.php)解释了如何在 windows 上安装 PECL 扩展。WAMP 可能有一个更简单的机制，我不确定，因为我不熟悉 WAMP。

**编辑**

我发现这篇关于在 WAMP 上安装 Memcached 以使用 PHP 的[博客文章。](http://pureform.wordpress.com/2008/01/10/installing-memcache-on-windows-for-php/)这可能会有所帮助。看起来扩展名可能已经作为`.dll`文件在您的计算机上的某个地方可用，您只需要编辑`php.ini`文件以包含扩展名，然后重新启动 Apache。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T10:39:27.773

我遇到了完全相同的问题。

就我而言，问题是我在`64-bit`系统上运行，但我下载了`32-bit`memcache dll 文件。在我下载[Memcache 2.2.6 VC9 x64 Thread Safe之后](http://www.anindya.com/php-5-3-3-x64-64-bit-for-windows/)

# boost - 编译 Boost.python 和 cuda 代码

> ID：10809925
> 
> 赞同：1
> 
> 时间：2012-05-30T04:18:28.177
> 
> 标签：boost, cuda, boost-python, bjam, nvcc

我想编译`parallel.cu`并`python_wrapper.cpp`在哪里`python_wrapper.cpp`使用`Boost.python`将方法公开`parallel.cu`给python。
我对`cuda`和都是新手`Boost.python`。
从他们的手册和谷歌中，我找不到如何让他们说话。
一些网站说，我应该做类似的事情

```
nvcc -o parallel.cu
g++ -o python_wrapper.cpp
g++ parallel.o python_wrapper.o 
```

但我知道编译代码的唯一方法`Boost.python`是使用`bjam`.
已经尝试集成`nvcc`到`bjam`中，但我无法让它们工作。

并行.cuh

```
__global__ void parallel_work();
int do_parallel_work(); 
```

python_wrapper.cpp

```
#include <boost/python/module.hpp>
#include <boost/python/def.hpp>
#include "parallel.cuh"

BOOST_PYTHON_MODULE(parallel_ext){
    using namespace boost::python;
    def("parallel", do_parallel_work);
} 
```

如何编译这些文件？
我听说过`PyCuda`，但我需要在我的文件中包含`Boost`和`thrust`库。 另外，如果可能的话，我想坚持一个标准的命令行驱动的编译过程。`.cu`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T05:04:51.190

使用 CUDA 函数创建静态或动态库并将其链接。也就是说，使用 nvcc 创建库，然后在单独的步骤中使用 g++ 创建 Python 模块并链接到库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T10:18:07.627

为了整合使用 nvcc 编译的代码和使用 g++ 编译的代码，我刚刚为 cuda 源定义了一个新的编译规则，存储在 .cu 文件到 .o

要编译`.cu`的规则`.o`存储在`nvcc.jam`我从 Jamroot 导入的文件中。

下面是我的 nvcc.jam 文件

```
import type ;
type.register CUDA : cu ;

import generators ;
generators.register-standard nvcc.compile : CUDA : OBJ ;

actions compile
{
    "/usr/local/cuda/bin/nvcc" -gencode=arch=compute_10,code=\"sm_10,compute_10\"  -gencode=arch=compute_20,code=\"sm_20,compute_20\" -gencode=arch=compute_30,code=\"sm_30,compute_30\"  -m64 --compiler-options -fno-strict-aliasing  -I. -I/usr/local/cuda/include -I/home/user/GPU/SDK/C/common/inc -I/home/user/GPU/SDK/shared/inc -DUNIX -O2   -o $(<) -c $(>)
} 
```

显然，由于 cuda 安装路径是硬编码的，所以这有点麻烦，但它可以很好地满足我的需要。我希望拥有从 NVidia SDK 分发的等效（希望更清洁）bjam 扩展。

在主项目文件中，我可以使用 .cpp 和 .cu 文件定义编译规则，例如：

```
exe testdraw
:
    gpu/drawable.cu
    gpu/testdraw.cpp
    gpu/cudacommon.cu
    gpu/host.cpp
    gpu/opencl.cpp
    gpu/opencl24.cpp

    png
    z
    cl
    libboost_program_options

    cuda
    cudart
    cublas
:
; 
```

`cuda`，`cudart`并且`cublas`是像往常一样声明的常用 cuda 库。

```
lib cudart : : <name>cudart ;
lib cuda : : <name>cuda ;
lib cublas : : <name>cublas ; 
```

# python - Python：为什么 int 类没有像 `__lt__()` 这样丰富的比较运算符？

> ID：10809932
> 
> 赞同：21
> 
> 时间：2012-05-30T04:19:13.427
> 
> 标签：python, language-design, language-history

主要是好奇。

我注意到（至少在 py 2.6 和 2.7 中） a`float`具有所有熟悉的丰富比较功能：`__lt__()`, `__gt__`,`__eq__`等。

```
>>> (5.0).__gt__(4.5)
True 
```

但一个`int`没有

```
>>> (5).__gt__(4)
Traceback (most recent call last):
  File "<input>", line 1, in <module>
AttributeError: 'int' object has no attribute '__gt__' 
```

这对我来说很奇怪，因为操作员本身工作正常

```
>>> 5 > 4
True 
```

甚至字符串也支持比较函数

```
>>> "hat".__gt__("ace")
True 
```

但所有的`int`都是`__cmp__()`

对我来说似乎很奇怪，所以我想知道为什么会这样。

刚刚经过测试，它在 python 3 中按预期工作，所以我假设一些遗留原因。不过还是想听听正确的解释；）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-30T05:09:59.020

如果我们看一下[PEP 207 for Rich Comparisions](http://www.python.org/dev/peps/pep-0207/)，最后会看到这个有趣的句子：

> 已经存在的处理整数比较的内联仍然适用，在最常见的情况下不会产生性能成本。

所以似乎在 2.x 中对整数比较进行了优化。如果我们[看一下源代码](http://hg.python.org/releasing/2.7.9/file/tip/Python/ceval.c)，我们会发现：

```
case COMPARE_OP:
    w = POP();
    v = TOP();
    if (PyInt_CheckExact(w) && PyInt_CheckExact(v)) {
        /* INLINE: cmp(int, int) */
        register long a, b;
        register int res;
        a = PyInt_AS_LONG(v);
        b = PyInt_AS_LONG(w);
        switch (oparg) {
        case PyCmp_LT: res = a <  b; break;
        case PyCmp_LE: res = a <= b; break;
        case PyCmp_EQ: res = a == b; break;
        case PyCmp_NE: res = a != b; break;
        case PyCmp_GT: res = a >  b; break;
        case PyCmp_GE: res = a >= b; break;
        case PyCmp_IS: res = v == w; break;
        case PyCmp_IS_NOT: res = v != w; break;
        default: goto slow_compare;
        }
        x = res ? Py_True : Py_False;
        Py_INCREF(x);
    }
    else {
      slow_compare:
        x = cmp_outcome(oparg, v, w);
    } 
```

因此，似乎在 2.x 中存在一个现有的性能优化——通过允许 C 代码直接比较整数——如果已经实现了丰富的比较运算符，则不会保留这种优化。

现在在 Python 3`__cmp__`中不再支持，因此必须有丰富的比较运算符。现在，据我所知，这不会导致性能下降。例如，比较：

```
Python 2.7.1 (r271:86832, Jun 16 2011, 16:59:05) 
[GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import timeit
>>> timeit.timeit("2 < 1")
0.06980299949645996 
```

到：

```
Python 3.2.3 (v3.2.3:3d0686d90f55, Apr 10 2012, 11:25:50) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import timeit
>>> timeit.timeit("2 < 1")
0.06682920455932617 
```

因此，似乎存在类似的优化，但我的猜测是，当考虑向后兼容性时，将它们全部放在 2.x 分支中将是一个太大的变化。

在 2.x 中，如果您想要丰富的比较方法，您可以通过[`operator`模块](http://docs.python.org/library/operator.html)获得它们：

```
>>> import operator
>>> operator.gt(2,1)
True 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T04:29:46.490

`__cmp__()`是进行比较的老式方式，并且不推荐使用仅在 Python 2.1 中引入[的丰富运算符](http://python3porting.com/preparing.html)（`__lt__`等）。`__le__`从 2.7.x 开始，转换可能还没有完成——而在 Python 3.x`__cmp__`中完全删除了。

Haskell 有我见过的最优雅的实现——作为一个`Ord`（序数）数据类型，你只需要定义如何`<`和`=`工作，类型类本身提供默认实现`<=`，`>`并且`>=`就这两个（你是如果您愿意，欢迎您定义自己）。你可以自己用 Python 编写这样的类，不知道为什么这不是默认的；可能是性能原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T05:15:01.463

正如 hircus 所说，在 Python 3 中，`__cmp__`样式比较已被[弃用，取而代之的是丰富的运算符](http://python3porting.com/preparing.html)( `__lt__`, ...)。最初，比较是使用 实现的`__cmp__`，但在某些类型/情况下，简单的`__cmp__`运算符是不够的（例如颜色类可以支持`==`and `!=`，但不支持`<`or `>`)，因此添加了丰富的比较运算符，`__cmp__`以保持向后兼容性。遵循“应该有一种——最好只有一种——明显的方式来做到这一点”的 Python 哲学¹，在 Python 3 中删除了遗留支持，此时可能会牺牲向后兼容性。

在 Python 2 中，虽然`int`仍然使用`__cmp__`以免破坏向后兼容性，但并非所有浮点数都小于、大于或等于其他浮点数（例如`(float('nan') < 0.0, float('nan') == 0.0, float('nan') > 0.0)`计算结果为`(False, False, False)`，那么应该`float('nan').__cmp__(0.0)`返回什么？），所以`float`需要使用较新的富比较运算符。

¹：尝试在 python shell 中输入“import this”。

# python - python：简单的 dbus 示例-服务例程中的 os.fork()？

> ID：10809933
> 
> 赞同：0
> 
> 时间：2012-05-30T04:19:29.070
> 
> 标签：python, dbus

我正在尝试编写 dbus 服务器，我想在其中运行一些外部 shell 程序（`grep`here）来完成这项工作。

当我做：

提示$ server.py

然后：

prompt$ client.py # 工作正常，即。在子进程中运行 grep 命令。

prompt$ client.py # ...，但第二次调用会产生以下错误消息：

DBusException：org.freedesktop.DBus.Error.ServiceUnknown：名称 org.example.ExampleService 不是由任何 .service 文件提供的

我被困住了。你能帮助我吗？

这里是 server.py（之后是 client.py）：

```
import gtk, glib
import os
import dbus
import dbus.service
import dbus.mainloop.glib
import subprocess

messages_queue=list()
grep_pid=0

def queue_msg(message):
    global messages_queue
    messages_queue.append(message)
    return

def dequeue_msg():
    global messages_queue,grep_pid
    if grep_pid != 0:
        try:
            pid=os.waitpid(grep_pid,os.P_NOWAIT)
        except:
            return True
        if pid[0] == 0:
            return True
        grep_pid=0

    if len(messages_queue) == 0:
            return True
    else:
            tekst=messages_queue.pop(0)

        cmd="grep 'pp'"

        print cmd
        #works fine, when I do return here
        #return True

    grep_pid=os.fork()
    if grep_pid != 0:
        return True
    os.setpgid(0,0)
    pop=subprocess.Popen(cmd,shell=True,stdin=subprocess.PIPE)
    pop.stdin.write(tekst)
    pop.stdin.close()
    pop.wait()
    exit(0)

class DemoException(dbus.DBusException):
    _dbus_error_name = 'org.example.Exception'

class MyServer(dbus.service.Object):

    @dbus.service.method("org.example.ExampleInterface",
                         in_signature='', out_signature='')
    def QueueMsg(self):
            queue_msg("ppppp")

    @dbus.service.method("org.example.ExampleInterface",
                         in_signature='', out_signature='')
    def Exit(self):
        mainloop.quit()

from dbus.mainloop.glib import threads_init

if __name__ == '__main__':
        glib.threads_init()

        threads_init()

        dbus.mainloop.glib.DBusGMainLoop(set_as_default=True)

        session_bus = dbus.SessionBus()
        name = dbus.service.BusName("org.example.ExampleService", session_bus)
        object = MyServer(session_bus, '/My')

        glib.timeout_add_seconds(1, dequeue_msg)
        mainloop = glib.MainLoop()
        print "Running example service."
        mainloop.run() 
```

现在client.py：

```
import sys
from traceback import print_exc
import dbus

def main():
    bus = dbus.SessionBus()

    try:
        remote_object = bus.get_object("org.example.ExampleService",
                                       "/My")

    except dbus.DBusException:
        print_exc()
        sys.exit(1)

    iface = dbus.Interface(remote_object, "org.example.ExampleInterface")

    iface.QueueMsg()

    if sys.argv[1:] == ['--exit-service']:
        iface.Exit()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T01:47:35.967

关于丢失 .service 文件的错误消息意味着您需要在 dbus-1/services 中创建一个服务文件。

例如：

```
# /usr/local/share/dbus-1/services/org.example.ExampleService.service
[D-BUS Service]
Name=org.example.ExampleService
Exec=/home/user1401567/service.py 
```

很多教程都没有包含这个细节（也许 .service 文件过去不是必需的？）但是，至少在 Ubuntu 12.04 上，没有它就无法连接 dbus 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:02:08.177

当您尝试访问不再可用的服务时，通常会收到此错误消息。检查您的服务器是否仍在运行。

你可以使用[d-feet](https://live.gnome.org/DFeet/)来调试你的 dbus 连接。

# jquery - history.js 插件 - 如何使用

> ID：10809935
> 
> 赞同：2
> 
> 时间：2012-05-30T04:19:39.887
> 
> 标签：jquery, history.js

我需要使用 history.js 插件。

我整理了一个简短的页面来测试功能 - [http://www.salesmelbourne.com/](http://www.salesmelbourne.com/)

**目前我正在努力解决以下问题：**

1.  后退/前进按钮不会重新加载 AJAX div - 这是我没有添加的额外 history.js 函数还是我需要自己编写代码？或两者。

2.  我注意到标题更新时它会闪烁 - 我相信它会简要显示页面元标题。我可以让这顺利吗？

3.  IE（我使用的是版本 9）在每个页面更改上显示一个弹出框，上面写着“来自网站的消息” - 有点像错误 - 我可以以某种方式对此进行排序吗？

4.  同样在 IE（HTML4 浏览器）下，我得到 'suid=13383514298760299522541335484' 等。我不明白我为什么需要这个 - 我可以删除 suid 吗？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T18:09:00.217

要回答您的问题： 1) 是的，您需要将 history.js 与您的代码联系起来。History.js 会记住你传递给它的任何参数，等等，但当然，你可以对这些参数做些什么。

2）需要看看你指的是什么。我的实现没有“刷新”页面，但话又说回来，我没有使用 history.js 的“标题”功能。有关相关信息，请参见下面的第 4 点。我敢打赌，您的实现会加载页面两次，每次您返回/前进时。

3) 我使用 IE9 并没有收到任何此类警报。提供有关其内容的更多信息。如果这是一条错误消息，那么很可能您的代码中有 Javascript 错误。

4) 当你使用 History.pushState(data, title, url) 的 data & title 参数时，suid 参数出现在非 HTML5 浏览器（如 IE9）中。我的 history.js 实现只使用 url 参数，因此我执行 History.pushState(null, null, url) 并且 suid 没有出现在 IE9 中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-27T13:09:51.913

> 3.IE（我使用的是版本 9）在每个页面更改上显示一个弹出框，上面写着“来自网站的消息” - 有点像错误 - 我可以以某种方式对此进行排序吗？

原因：您需要从代码中删除“History.log()”...在 IE 中，此 History.log 正在将日志输出写入警报框...

* * *

## 回答 #3

> 赞同：-10
> 
> 时间：2012-05-31T09:27:57.400

history.js 插件不能很好地工作......这是一个好主意，我仍然会感谢作者的尝试，但几乎没有一个案例站点使用它：

[https://github.com/browserstate/history.js/wiki/Showcase](https://github.com/browserstate/history.js/wiki/Showcase)

而 HTML4 支持只会给我 IE 错误。

如果您正在寻找这样的解决方案，我的建议是编写您自己的解决方案以适合您构建的网站...

# php - $_POST 的未定义索引

> ID：10809937
> 
> 赞同：49
> 
> 时间：2012-05-30T04:19:50.517
> 
> 标签：php, login, undefined-index

我正在尝试重新学习一些 PHP 基础知识来制作一个简单的登录脚本，但是我收到了一个我以前没有收到过的错误（我一年多前制作了相同的脚本并且从未出现过这个错误。我将代码简化为我可以测试一下哪个区域有问题，这是问题所在：

```
<?php
$user = $_POST["username"];
if($user != null)
{
    echo $user;
    echo " is your username";
}
else
{
    echo "no username supplied";
}
?> 
```

现在，当我将变量发送到脚本时，这段代码可以正常工作，但是当没有提供变量时，它会吐出一个错误。理论上这会很好，因为如果没有提供用户名/密码，那么就会出现错误。在将代码发送到脚本之前，我会检查以确保这一点，但是我担心一个空白字符串可能会以某种方式泄漏并吐出一些未知的错误。这是我得到的错误：

```
( ! ) Notice: Undefined index: username in C:\wamp\www\verify_login.php on line 2

Call Stack

    Time    Memory  Function    Location
1   0.0003  668576  {main}( )   ..\verify_login.php:0 
```

未提供用户名

正如您所看到的，代码寄存器没有提供任何变量，但它给出了错误，我认为这意味着没有找到一个变量是预期的或类似的东西。有人可以为我澄清一下吗？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-05-30T04:23:29.397

在 PHP 中，从未设置过的变量或数组元素与值为`null`;的变量或数组元素不同。试图访问这样一个未*设置*的值是一个运行时错误。

这就是您遇到的问题：该数组`$_POST`在 key 处没有任何元素`"username"`，因此解释器会在您的程序进入无效测试之前中止您的程序。

幸运的是，您可以测试变量或数组元素的存在，而无需实际尝试访问它；这就是特殊运算符的`isset`作用：

```
if (isset($_POST["username"]))
{
  $user = $_POST["username"];
  echo $user;
  echo " is your username";
} 
else 
{
  $user = null;
  echo "no username supplied";
} 
```

`$_POST["username"]`当 PHP 尝试获取 的值作为参数传递给函数时，这看起来会以与您的代码完全相同的方式爆炸`isset()`。然而，`isset()`它根本不是一个真正的函数，而是在评估阶段之前识别的特殊语法，因此 PHP 解释器检查该值是否存在而不实际尝试检索它。

还值得一提的是，随着运行时错误的发生，缺少的数组元素被视为次要元素（分配了`E_NOTICE`级别）。如果您更改`error_reporting`级别以忽略通知，您的原始代码实际上将按照编写的方式工作，尝试的数组访问返回`null`. 但这被认为是不好的做法，尤其是对于生产代码。

旁注：PHP 会进行字符串插值，因此块中的`echo`语句`if`可以合并为一个：

```
echo "$user is your username"; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-30T04:22:47.417

采用：

```
if (isset($_POST['user'])) {
   //do something
} 
```

但是您可能应该使用一些更适当的验证。尝试使用 Zend Framework 或 Symfony 的简单正则表达式或坚如磐石的实现。

[http://framework.zend.com/manual/en/zend.validate.introduction.html](http://framework.zend.com/manual/en/zend.validate.introduction.html)

[http://symfony.com/doc/current/book/validation.html](http://symfony.com/doc/current/book/validation.html)

甚至是内置的过滤器扩展：

[http://php.net/manual/en/function.filter-var.php](http://php.net/manual/en/function.filter-var.php)

永远不要相信用户输入，要聪明。不要相信任何东西。始终确保您收到的确实是您所期望的。如果它应该是一个数字，请确保它是一个数字。

大大改进的代码：

```
$user = filter_var($_POST['user'], FILTER_SANITIZE_STRING);
$isValid = filter_var($user, FILTER_VALIDATE_REGEXP, array('options' => array('regexp' => "/^[a-zA-Z0-9]+$/")));

if ($isValid) {
    // do something
} 
```

消毒和验证。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-12-23T22:29:47.200

而不是`isset()`你可以使用更短的东西来消除错误，它是`@$_POST['field']`. 然后，如果未设置该字段，您将不会在页面上打印任何错误。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-03-22T08:06:20.433

在 PHP 5.2.0 及更高版本之前，您应该使用[`filter_input()`](http://php.net/manual/en/function.filter-input.php)专门为此创建的它来获取特定的外部用户输入，例如按名称获取、发布或 cookie 变量，并可选择过滤它以避免对您的站点进行任何 XSS/注入攻击。例如：

```
$user = filter_input(INPUT_POST, 'username'); 
```

您可以使用 INPUT_GET、INPUT_POST、INPUT_COOKIE、INPUT_SERVER 或 INPUT_ENV 之一。

通过使用可选的第三个参数，您可以通过各种[过滤器](http://php.net/manual/en/filter.filters.php)（用于[验证](http://php.net/manual/en/filter.filters.validate.php)、[消毒](http://php.net/manual/en/filter.filters.sanitize.php)、[过滤](http://php.net/manual/en/filter.filters.flags.php)或[其他](http://php.net/manual/en/filter.filters.misc.php)）对其进行扩展，例如`FILTER_SANITIZE_SPECIAL_CHARS`,`FILTER_SANITIZE_ENCODED`等。

例如：

```
<?php
$search_html = filter_input(INPUT_GET, 'search', FILTER_SANITIZE_SPECIAL_CHARS);
$search_url = filter_input(INPUT_GET, 'search', FILTER_SANITIZE_ENCODED);
echo "You have searched for $search_html.\n";
echo "<a href='?search=$search_url'>Search again.</a>";
?> 
```

语法是：

> 混合`filter_input`（ int $type , string $variable_name [, int $filter = FILTER_DEFAULT [, mixed $options ]] ）
> 
> （PHP 5 >= 5.2.0，PHP 7）

另请参阅：[为什么使用 filter_input() 更好？](https://stackoverflow.com/q/768442/55075)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-30T04:25:08.117

您的代码*假定*存在某些东西：

```
$user = $_POST["username"]; 
```

`$_POST`PHP 让您知道数组中没有“用户名” 。`isset()`在这种情况下，在尝试访问它之前检查该值是否会更安全：

```
if ( isset( $_POST["username"] ) ) {
    /* ... proceed ... */
} 
```

或者，您可以劫持`||`操作员以分配默认值：

```
$user = $_POST["username"] || "visitor" ; 
```

只要用户名不是*虚假*值，您就可以认为这种方法非常可靠。一个更安全的默认分配方法是使用三元运算符：

```
$user = isset( $_POST["username"] ) ? $_POST["username"] : "visitor" ; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-10-04T09:42:24.533

试试这个：

我在有 $_POST 请求的任何地方都使用它。

```
$username=isset($_POST['username']) ? $_POST['username'] : ""; 
```

这只是一个简短的布尔值，如果 isset 会将其设置为 $_POST['username']，否则会将其设置为空字符串。

使用示例：

```
if($username===""){ echo "Field is blank" } else { echo "Success" }; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-03-23T16:10:37.557

我知道这是旧帖子，但有人可以提供帮助：

```
function POST($index, $default=NULL){
        if(isset($_POST[$index]))
        {
            if(!empty(trim($_POST[$index])))    
                return $_POST[$index];
        }
        return $default;
    } 
```

上面的这段代码是我在任何地方使用的基本 POST 函数。在这里可以放过滤器、正则表达式等，更快更干净。我的高级 POST 函数在接受和检查数组、字符串类型、默认值等方面更加复杂。让你的想象力在这里发挥作用。

您可以像这样轻松检查用户名：

```
$username = POST("username");
if($username!==null){
    echo "{$username} is in the house.";
} 
```

我还添加了`$default`字符串，如果 POST 未激活或内容不存在，您可以定义一些默认值。

```
echo "<h1>".POST("title", "Stack Overflow")."</h1>"; 
```

玩它。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-30T04:23:52.323

当你说：

```
$user = $_POST["username"]; 
```

您要求 PHP 解释器分配`$user`键`$_POST`（或索引）为`username`. 如果它不存在，PHP 就会出错。

用于`isset($_POST['user'])`检查该变量是否存在：

```
if (isset($_POST['user'])) {
  $user = $_POST["username"];
  ... 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-30T04:25:15.677

尝试

```
if(isset($_POST['username']))
    echo $_POST['username']." is your username";
else
    echo "no username supplied"; 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2012-05-30T04:25:27.920

**相关问题：** [在不生成 PHP 通知的情况下访问未知数组元素的最佳方法是什么？](https://stackoverflow.com/q/10781523/1396314)

使用上述问题的答案，如果密钥不存在，您可以安全地从 $_POST 获取值，而不会生成 PHP 通知。

```
echo _arr($_POST, 'username', 'no username supplied');  
// will print $_POST['username'] or 'no username supplied' 
```

# .htaccess - 访问子文件夹中的控制器时出现 403 错误 (CodeIgniter)

> ID：10809940
> 
> 赞同：1
> 
> 时间：2012-05-30T04:20:46.050
> 
> 标签：.htaccess, codeigniter, controller, http-status-code-403, subdirectory

这是我的应用程序框架：

```
application
    controllers
        backend
            [backend_controllers_here]
        [frontend_controllers_here]
    models
        [shared_models_for_both_backend_and_frontend]
    views
        backend
            [backend_views_here]
        [frontend_views_here]
    ...
system
index.php
.htaccess 
```

这是我的 .htaccess 文件内容：

```
Options -Indexes
Options +FollowSymLinks

# Set the default file for indexes
# DirectoryIndex index.php

<IfModule mod_rewrite.c>

    # activate URL rewriting
    RewriteEngine on

    # do not rewrite links to the documentation, assets and public files
    RewriteCond $1 !^(images|assets|uploads|captcha)

    # do not rewrite for php files in the document root, robots.txt or the maintenance page
    RewriteCond $1 !^([^\..]+\.php|robots\.txt)

    # but rewrite everything else

    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>

    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.

    ErrorDocument 404 index.php

</IfModule> 
```

当我在地址栏上输入类似这样的东西（对于前端）时，这没有错：

*   mysite.local
*   mysite.local/index.php
*   mysite.local/index.php/frontend_controller
*   mysite.local/frontend_controller

但是对于后端，我在尝试访问时遇到了**403 错误：**

*   mysite.local/backend
*   mysite.local/backend/some_backend_controller

但是，使用 URL 中的 index.php 一切都很好。

*   mysite.local/index.php/backend
*   mysite.local/index.php/backend/some_backend_controller

我在这里错过了什么吗？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:30:11.373

检查后端文件夹的权限。它可能会阻止网络服务器读取目录的实际内容。该权限应允许所有人阅读

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-30T11:41:14.817

你的 config/routes.php 是什么样的？可能会尝试这样的事情：

```
$route['backend'] = "backend/controller/method"; 
```

# python - 尝试从 WSGI/Python 启动 Chrome（诚然又快又脏）[Win. XP、x86、Python 2.7、Apache 2.2]

> ID：10809944
> 
> 赞同：1
> 
> 时间：2012-05-30T04:21:03.447
> 
> 标签：python, apache, google-chrome, mod-wsgi, wsgi

所以通常我太固执了，不能自己使用论坛网站（称我为骄傲），但这让我非常生气。

我的目标只是**通过该服务器的 python WSGI 脚本在服务器机器上启动 Chrome**。我知道阻止 Python 在 WSGI 下使用 Popen 的错误，但我已经找到了一个可行的解决方案（尽管有点 hack-y）：我没有使用实际命令调用*Popen*，而是创建了一个 .bat 和通过 Popen 调用 bat 并将 shell 参数设置为`True`. 这实际上适用于我需要它**之外的所有东西；**即，调用`start iexplore`工作，`start firefox`工作，甚至`notepad`和`mspaint`，但唯一不起作用的是调用`start chrome`。我什至尝试了一些命令行参数，例如`start chrome --single-process`，但没有 avial。

就像 Windows 只是讨厌 Chrome。我将非常感谢任何帮助，因为在过去的 48 小时里我一直在努力解决这个问题。

**tl;dr：Chrome 不会从名为 using 的批处理脚本开始`subprocess.Popen`，但其他一切都会。**

* * *

**相关技术资料**

Python脚本[摘录]：

```
import subprocess
command="<path>\\start-browser.bat" # Absolute path to Batch file
subprocess.Popen(command,shell=True) 
```

批处理文件：

```
start /d "C:\Documents and Settings\<Me>\Local Settings\Application Data\Google\Chrome\Application" chrome.exe 
```

系统：

*   Windows XP sp3，32 位
*   蟒蛇 2.7
*   阿帕奇 2.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T04:26:41.943

我没有在你的情况下尝试过这个，但我知道 Chrome 的很多奇怪之处都是因为它是按用户安装的。您是否尝试过以管理员身份登录并[为所有用户安装 Chrome](http://support.google.com/chrome/bin/answer.py?hl=en&answer=118663)？

# php - 在 BlackBerry 上显示 facebook 安装应用程序时出错，

> ID：10809945
> 
> 赞同：0
> 
> 时间：2012-05-30T04:21:04.660
> 
> 标签：php, facebook, mobile, oauth

我有一个与移动网站一起使用的 facebook 应用程序，我需要用户安装该应用程序，因此我编写了以下代码来将用户重定向到安装应用程序站点：

```
 $loginUrl   = $facebook->getLoginUrl(
            array(
                'scope'         => 'email,offline_access,publish_stream,user_birthday,user_location,user_about_me,user_hometown,user_checkins,publish_checkins',
                'redirect_uri'  => $fbconfig['baseurl'],
                'display'       => 'wap'
            )
    ); 
```

问题是 7 月 1 日之后 facebook 将不再支持“wap”渲染，所以我将其更改为“touch”。现在的问题是，当我尝试从 BlackBerry 8520 安装或登录时，它会抛出一个错误，提示我稍后再试。我也有一个错误日志，但它不会保存任何错误。我不知道问题是黑莓默认关闭了javascript支持还是设备没有触摸。

我可以使用“page”或“popup”而不是“touch”，但是如果没有通过 wifi 连接，安装对话框将需要很长时间。

这是有关此主题的 facebook 官方信息： [https ://developers.facebook.com/docs/reference/dialogs/oauth/](https://developers.facebook.com/docs/reference/dialogs/oauth/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T05:16:56.580

如果您使用的是 php sdk 版本 2，请将其升级到版本 3（新版本）。

这可能会解决您的问题。

更多信息：[TechNew.In](http://www.technew.in)

# javascript - Javascript中的多语言文本计算器

> ID：10809955
> 
> 赞同：0
> 
> 时间：2012-05-30T04:22:35.430
> 
> 标签：javascript, arrays, calculator

我正在尝试使用纯 Javascript（而不是 JQuery）组合一个多语言文本计算器，因为这有助于修改过去的 uni 论文。我对此进行了很好的尝试，并创建了一个可以基于两种语言（英语和法语）工作的版本，但并非没有缺陷。

我将如何为每种语言创建一个二维数组？例如，如果我想做：

```
myEnglishArray = ["one", 1]; 
```

或者

```
myEnglishArray = ["one", "1"]; 
```

我什至不知道这是否正确，但基本上我需要用英语从 1 到 10，法语也一样，并将文本意义上的每个数字（即“一”）映射到整数意义上的数字。我当然可以使用 parseInt(); 转换字符串中的数字（即“1”）；

任何帮助在这里都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T04:26:13.720

我会这样写：

```
var myArray = {
    "english": { "one": 1, "two": 2, "three": 3, "four": 4, ... },
    "spanish": { "uno": 1, "dos": 2, "tres": 3, "quattro": 4, ... },
    ...
}; 
```

这样您就可以按名称访问每个数组：

```
console.log(myArray.english["one"]);  // 1
console.log(myArray.spanish["uno"]);  // 1 
```

*并使用for*循环遍历数字：

```
for (var num in myArray.spanish) {
    console.log(num + " = " + myArray.spanish[num]);   // "uno" = 1, etc
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T04:28:50.117

```
var dictionary = 
    [["one", "uno"],
     ["two", "dos"],
     ["three", "tres"]];

dictionary[0][0];  //"one"
dictionary[0][1];  //"uno" 
```

在这里，您只需创建**1 个变量**以一次包含**3 个信息**（数字、英语、西班牙语）。而且，您也可以在西班牙语之后轻松添加更多语言！

**演示：http:** [//jsfiddle.net/DerekL/5fhTw/](http://jsfiddle.net/DerekL/5fhTw/)

# javascript - 离线 Google Chrome 扩展程序/打包应用程序：尝试将表单数据从一个本地页面发送到另一个本地页面

> ID：10809958
> 
> 赞同：0
> 
> 时间：2012-05-30T04:22:53.387
> 
> 标签：javascript, html, http, webforms

好的，所以我已经阅读了一些教程，以及一本关于 HTML5 的书，其中谈到了很多关于表单控件以及它们发生了多大变化的内容。因此，我尝试使用此示例代码测试代码。我想要做的是将表单数据（特别是某人想要倒计时的事件名称的文本字段和事件日期和时间的日期时间控件）发送到 JavaScript 的另一个 HTML5 文件要解析的文件。问题？数据未发送到指定为表单操作的文件！

这是 HTML 文件中的代码，其中包含表单 (countdown_form.html)：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Collecting countdown data</title>
  </head>
  <body>
    <form method="post" action="countdown.html">
      <table border="1" cellpadding="5">
        <tr>
          <td>Name of event to count down to</td>
          <td><input name="event" type="text"></td>
        </tr>
        <tr>
          <td>Date of event to count down to</td>
          <td><input name="date" type="datetime"></td>
        </tr>
      </table>
      <input name="Submit" type="submit">
    </form>
  </body>
</html> 
```

这是我试图将表单数据发送到 (countdown.html) 的 HTML 文件中的代码：

```
<!DOCTYPE html>
<html>
  <head>
    <title>
      <script type="text/javascript">
      document.write("Countdown to " + input.text);
      </script>
    </title>
  </head>
  <body>
    <table border="1" cellpadding="5">
      <tr>
        <td>
          <script type="text/javascript" language="JavaScript">
            <!--
            document.write("Time left until " + input.text);
            //-->
          </script>
        </td>
      </tr>
      <tr>
        <td>
          <SCRIPT TYPE="text/javascript" LANGUAGE="JavaScript">
          <!--

          dateFuture = new Date(input.date);

          function GetCount(){

             dateNow = new Date();                                                                        //grab current date
             amount = dateFuture.getTime() - dateNow.getTime();                //calc milliseconds between dates
             delete dateNow;

             // time is already past
             if(amount < 0){
                document.getElementById('countbox').innerHTML="Now!";
             }
             // date is still good
             else{
                days=0;hours=0;mins=0;secs=0;out="";

                amount = Math.floor(amount/1000);//kill the "milliseconds" so just secs

                days=Math.floor(amount/86400);//days
                amount=amount%86400;

                hours=Math.floor(amount/3600);//hours
                amount=amount%3600;

                mins=Math.floor(amount/60);//minutes
                amount=amount%60;

                secs=Math.floor(amount);//seconds

                if(days != 0){out += days +" day"+((days!=1)?"s":"")+", ";}
                if(days != 0 || hours != 0){out += hours +" hour"+((hours!=1)?"s":"")+", ";}
                if(days != 0 || hours != 0 || mins != 0){out += mins +" minute"+((mins!=1)?"s":"")+", ";}
                out += secs +" seconds";
                document.getElementById('countbox').innerHTML=out;

                setTimeout("GetCount()", 1000);
             }
          }

          window.onload=function(){ 
             GetCount(); 
          }; //call when everything has loaded
          //-->
          </script>
          <div id="countbox"></div>
        </td>
      </tr>
    </table>
  </body>
</html> 
```

我想知道的是：

1.  一个 HTML 文档直接将表单数据发送到另一个 HTML 文档是否合法，
2.  如果合法，为什么 <input> 标签中的数据没有被 action 文档中的 input.text 和 input.datetime JavaScript 变量解析？

还，

1.  在 <title> 标签中包含 JavaScript 代码是否合法？
2.  如果合法，为什么谷歌浏览器不解析代码？

如果这两件事都不合法，您将如何使用表单数据：

1.  文档的标题。
2.  作为 JavaScript 解析的数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T04:37:30.253

如果你想这样做，我认为你最好的办法是使用**method=get**而不是 method=post。这样，您的目标页面中的 Javascript 将能够看到参数。JS 看不到 post 参数（您需要运行 PHP、ASP.NET 等的 Web 服务器来访问这些参数）。

要明确回答您的问题：

1.  发送是合法的，但是浏览器看不到目标页面的参数。
2.  不，拥有 Javascript 是不合法的。但是，您可以使用以下方法从 Javascript 设置标题： document.title = "Some text";
3.  使用服务器端脚本语言，或者如果您必须在客户端执行此操作，请在表单中使用 method="get"，并使用*window.location.search*解析目标页面上的参数。

# java - 石英 2.1.5 + jboss 5.0.1 -> 作业类 -> classNotFoundException

> ID：10809959
> 
> 赞同：1
> 
> 时间：2012-05-30T04:23:14.183
> 
> 标签：java, exception, quartz-scheduler, classnotfoundexception, jboss5.x

我有一份名为`Myjob.java`package的工作`com.example.jobs`。这个班级正在打仗：`example.war`.

我`quartz-service.xml`在部署文件夹中的文件中使用了 jboss 中的以下配置：

```
<?xml version="1.0" encoding="UTF-8"?> 

<server> 
<mbean code="org.quartz.ee.jmx.jboss.QuartzService" name="user:service=QuartzService,name=QuartzService"> 
<depends>jboss.web.deployment:war=/example</depends> 
<attribute name="JndiName">Quartz</attribute> 
<attribute name="Properties"> 
org.quartz.scheduler.instanceName = DefaultQuartzScheduler 
org.quartz.threadPool.class = org.quartz.simpl.SimpleThreadPool 
org.quartz.threadPool.threadCount = 5 
org.quartz.threadPool.threadPriority = 4 
org.quartz.jobStore.class = org.quartz.simpl.RAMJobStore 
org.quartz.plugin.jobInitializer.class = org.quartz.plugins.xml.XMLSchedulingDataProcessorPlugin 
org.quartz.plugin.jobInitializer.fileNames = ${jboss.server.home.dir}/conf/quartz-jobs.xml 
org.quartz.plugin.jobInitializer.scanInterval = 120 
</attribute> 
</mbean> 
</server> 
```

在conf下我有`quartz-jobs.xml`以下文件：

```
<job-scheduling-data version="1.8" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.quartz-scheduler.org/xml/JobSchedulingData" xsi:schemalocation="http://www.quartz-scheduler.org/xml/JobSchedulingData http://www.quartz-scheduler.org/xml/job_scheduling_data_1_8.xsd"> 

<pre-processing-commands><delete-jobs-in-group>*</delete-jobs-in-group> 
<delete-triggers-in-group>*</delete-triggers-in-group> 
</pre-processing-commands><processing-directives> 
<overwrite-existing-data>true</overwrite-existing-data> 
<ignore-duplicates>false</ignore-duplicates> 
</processing-directives> 

<schedule> 
<job> 
<name>TestJob</name> 
<job-class>com.example.jobs.Myjob</job-class> 
</job> 

<trigger> 
<cron> 
<name>TestCronTrigger</name> 
<job-name>TestJob</job-name> 
<cron-expression>* * * * * ?</cron-expression> 
</cron> 
</trigger> 
</schedule> 

</job-scheduling-data> 
```

在运行 jboss 时，我得到以下信息：

```
2012-05-29 16:10:38,527 INFO [main] [org.quartz.core.QuartzScheduler] Scheduler meta-data: Quartz Scheduler (v2.1.5) 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' 
Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally. 
NOT STARTED. 
Currently in standby mode. 
Number of jobs executed: 0 
Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 5 threads. 
Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered. 
```

其次是：

```
java.lang.ClassNotFoundException: com.example.jobs.Myjob from BaseClassLoader@7aeb46d{VFSClassLoaderPolicy@5ec7640b{name=vfsfile:/D:/Datatocopy/openlogic-jboss-5.0.1.GA-all-bin-1/jboss-5.0.1.GA/server/slim/deploy/quartz-service.xml domain=ClassLoaderDomain@c4ce427{name=DefaultDomain parentPolicy=BEFORE parent=org.jboss.system.NoAnnotationURLClassLoader@7e5a9de6} roots=[MemoryContextHandler@            1954102985      [path= context=vfsmemory://5c4o2zz-ms2vbd-h2su3au9-1-h2su3igd-t real=vfsmemory://5c4o2zz-ms2vbd-h2su3au9-1-h2su3igd-t]] delegates=null exported=[] <IMPORT-ALL>NON_EMPTY}} 
at org.jboss.classloader.spi.base.BaseClassLoader.loadClass(BaseClassLoader.java:422) 
at java.lang.ClassLoader.loadClass(ClassLoader.java:248) 
at org.quartz.simpl.InitThreadContextClassLoadHelper.loadClass(InitThreadContextClassLoadHelper.java:72) 
at org.quartz.simpl.CascadingClassLoadHelper.loadClass(CascadingClassLoadHelper.java:114) 
at org.quartz.simpl.CascadingClassLoadHelper.loadClass(CascadingClassLoadHelper.java:138) 
at org.quartz.xml.XMLSchedulingDataProcessor.process(XMLSchedulingDataProcessor.java:653) 
at org.quartz.xml.XMLSchedulingDataProcessor.processFile(XMLSchedulingDataProcessor.java:503) 
at org.quartz.xml.XMLSchedulingDataProcessor.processFileAndScheduleJobs(XMLSchedulingDataProcessor.java:886) 
at org.quartz.plugins.xml.XMLSchedulingDataProcessorPlugin.processFile(XMLSchedulingDataProcessorPlugin.java:330) 
at org.quartz.plugins.xml.XMLSchedulingDataProcessorPlugin.start(XMLSchedulingDataProcessorPlugin.java:257) 
at org.quartz.plugins.SchedulerPluginWithUserTransactionSupport.start(SchedulerPluginWithUserTransactionSupport.java:144) 
at org.quartz.core.QuartzScheduler.startPlugins(QuartzScheduler.java:2343) 
at org.quartz.core.QuartzScheduler.start(QuartzScheduler.java:527) 
at org.quartz.impl.StdScheduler.start(StdScheduler.java:143) 
at org.quartz.ee.jmx.jboss.QuartzService.startService(QuartzService.java:270) 
at org.jboss.system.ServiceMBeanSupport.jbossInternalStart(ServiceMBeanSupport.java:376) 
at org.jboss.system.ServiceMBeanSupport.jbossInternalLifecycle(ServiceMBeanSupport.java:322) 
at sun.reflect.GeneratedMethodAccessor107.invoke(Unknown Source) 
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 
at java.lang.reflect.Method.invoke(Method.java:597) 
at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157) 
at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96) 
at org.jboss.mx.server.Invocation.invoke(Invocation.java:88) 
at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264) 
at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668) 
at org.jboss.system.microcontainer.ServiceProxy.invoke(ServiceProxy.java:189) 
at $Proxy36.start(Unknown Source) 
at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:42) 
at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:37) 
at org.jboss.dependency.plugins.action.SimpleControllerContextAction.simpleInstallAction(SimpleControllerContextAction.java:62) 
at org.jboss.dependency.plugins.action.AccessControllerContextAction.install(AccessControllerContextAction.java:71) 
at org.jboss.dependency.plugins.AbstractControllerContextActions.install(AbstractControllerContextActions.java:51) 
at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348) 
at org.jboss.system.microcontainer.ServiceControllerContext.install(ServiceControllerContext.java:286) 
at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1598) 
at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934) 
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1062) 
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984) 
at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822) 
at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553) 
at org.jboss.system.ServiceController.doChange(ServiceController.java:688) 
at org.jboss.system.ServiceController.start(ServiceController.java:460) 
at org.jboss.system.deployers.ServiceDeployer.start(ServiceDeployer.java:163) 
at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:99) 
at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:46) 
at org.jboss.deployers.spi.deployer.helpers.AbstractSimpleRealDeployer.internalDeploy(AbstractSimpleRealDeployer.java:62) 
at org.jboss.deployers.spi.deployer.helpers.AbstractRealDeployer.deploy(AbstractRealDeployer.java:50) 
at org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(DeployerWrapper.java:171) 
at org.jboss.deployers.plugins.deployers.DeployersImpl.doDeploy(DeployersImpl.java:1439) 
at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1157) 
at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1178) 
at org.jboss.deployers.plugins.deployers.DeployersImpl.install(DeployersImpl.java:1098) 
at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348) 
at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1598) 
at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934) 
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1062) 
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984) 
at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822) 
at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553) 
at org.jboss.deployers.plugins.deployers.DeployersImpl.process(DeployersImpl.java:781) 
at org.jboss.deployers.plugins.main.MainDeployerImpl.process(MainDeployerImpl.java:698) 
at org.jboss.system.server.profileservice.ProfileServiceBootstrap.loadProfile(ProfileServiceBootstrap.java:304) 
at org.jboss.system.server.profileservice.ProfileServiceBootstrap.start(ProfileServiceBootstrap.java:205) 
at org.jboss.bootstrap.AbstractServerImpl.start(AbstractServerImpl.java:405) 
at org.jboss.Main.boot(Main.java:209) 
at org.jboss.Main$1.run(Main.java:547) 
at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T05:08:55.567

应该是类加载器问题；在文件中

```
${jboss.server}/deploy/jboss-web.deployer/META-INF/jboss-service.xml 
```

找到线

```
<attribute name="UseJBossWebLoader">false</attribute> 
```

并将其设置为`true`。

笔记：`${jboss.server} = ${your jboss path}/server/${your server name}`

为 jboss5 编辑：

找到文件（与您的评论相同）：

```
deployers/jbossweb.deploy/META-INF/war-deployers-jboss-beans.xml 
```

并注释掉`WarClassLoaderDeployer`

[解释](https://community.jboss.org/wiki/useJBossWebClassLoaderinJBoss5)和另一种解决方法。

# facebook - 将图像添加到相册时抑制 Facebook 时间线* 更新

> ID：10809960
> 
> 赞同：0
> 
> 时间：2012-05-30T04:23:19.187
> 
> 标签：facebook, facebook-graph-api

我正在开发一个在 Facebook 中创建相册然后将照片添加到相册的应用程序。事情的那一面工作正常。

当照片被添加到相册时，facebook 会在用户时间轴上显示类似“已将新照片添加到相册”的内容。

我想做的是压制这条消息，或者至少对其进行一些定制。

有谁知道这是否可以通过 Facebook API 实现？我无法在他们的文档中找到任何内容，并且怀疑这是 facebook 无法控制的自动化事物，但希望得到确认。

干杯!

*不是 100% 确定这是严格意义上的“时间线”还是只是他们的墙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T13:45:38.910

使用 no_story = 1 参数。

```
$newphotodata = array(
'access_token' => $fanPageAccessToken,
'message' => $message,
'no_story' => 1,
'aid' => $albumId,
'image' => '@' . $picturePath);
$uploadedphoto = $facebook->api('/' . $albumId . '/photos/', 'post', $newphotodata); 
```

我自己目前正在研究这个主题。这是我最新的： http: [//facebookanswers.co.uk/?p=322](http://facebookanswers.co.uk/?p=322)

顺便说一句，您是否找到了一种在创建新专辑时生成适当时间线帖子的方法。如果您手动执行此操作，您会得到一个很好的帖子，其中显示了四个图像。但是，如果您使用 API，您将无法获得它。您几乎可以通过发布到 /links/ 来获得它，但它仍然不太正确，因为朋友只会看到一个图标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T00:47:24.013

好吧，看看 facebook api，我没有提到如何抑制这些自动状态更新。由此我得出结论，不可能修改或禁止这些状态更新。

再想一想，我可以理解为什么 facebook 不会抑制或更改这些消息，因为它可能被应用程序滥用以在没有用户注意的情况下发布帖子。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-16T11:07:16.893

上传后关闭窗口并再次打开 IE。

# c# - “字段”不是“System.Data.DataRow”的成员

> ID：10809964
> 
> 赞同：11
> 
> 时间：2012-05-30T04:24:11.933
> 
> 标签：c#, vb.net

我正在为 vb.net 使用 VS2005。我在下面的语句中收到编译错误。如何解决这个问题？

```
 For Each rw As DataRow In data.Rows
        For Each dc As DataColumn In stringColumns
            rw.Field(Of String)(dc).Replace("_x00D_", "") //Error showing here
        Next
    Next 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-30T04:37:15.987

添加对`System.Data.DataSetExtensions.dll`然后您的代码将工作的引用。`Field`是一种扩展方法，您需要添加引用，否则它将不起作用。

VS 2005 与 .net 2.0 ？

那么你不能添加对这个 dll 的引用。您需要以 .net 3.5 或更高版本为目标才能使用这些扩展方法。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-30T04:26:43.027

*更新 2：*投票赞成另一个更直接/更明确的答案:-)

* * *

*更新：*虽然以下内容仍然适用，但[DataRowExtensions](http://msdn.microsoft.com/en-us/library/system.data.datarowextensions%28v=vs.90%29.aspx)*类*[`DataRow.Field`](http://msdn.microsoft.com/en-us/library/system.data.datarow.field%28v=vs.90%29.aspx)提供了一个；确保它被引用。

* * *

因为没有`Field`在类型上定义的成员[`DataRow`](http://msdn.microsoft.com/en-us/library/system.data.datarow.aspx)......也许是特殊[`Item`](http://msdn.microsoft.com/en-us/library/146h6tk5.aspx#Y0)属性的意思？

请注意在示例中它用作索引器 ( `row("Name")`)。整齐吧？

（此外，应该对as 字符串在 .NET 中不可变的*结果进行处理。）*`Replace`

快乐编码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-24T12:32:03.153

如果您不显式转换 DataRow，也会发生此错误。*（原始海报正确地做到了这一点。）*

用这个：

```
For Each rw As DataRow In data.Rows 
```

不是这个：

```
For Each rw In data.Rows 
```

# iphone - 方向发生时如何刷新 UIView？

> ID：10809969
> 
> 赞同：2
> 
> 时间：2012-05-30T04:25:35.437
> 
> 标签：iphone, objective-c, ios

我的代码是这样的：

```
- (void)viewDidLoad
{
  [self setGridView];
}
-(void)setGridView
{
  CGRect frame; 
  frame .origin.x=0;
  frame.origin.y=20;
  frame.size.width=GRID_WEIGHT;
  frame.size.height=GRID_HEIGHT;
  GridView *ObjGridView=[[GridView alloc]initWithFrame:frame]; 

  [[NSBundle mainBundle ] loadNibNamed:@"GridView" owner:ObjGridView options:nil];
  [ObjGridView setGridViewFrame:frame];

  [self.view addSubview:ObjGridView.GridCellView];
  frame .origin.x+=GRID_WEIGHT;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
  return YES;
} 
```

此代码将子视图添加到视图并设置框架

我的问题：1-当方向（横向或纵向）发生时我如何刷新我的视图，因为我在横向模式下设置了子视图的框架，我也想在我的纵向视图中使用理智的视图。（基本上我在哪里调用这个 -(void)setGridView 委托方法）？

2-我怎么知道，我的子视图超出了视图的范围，以便我可以在我的 setGridView 方法中处理子视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T05:16:11.897

1.当你的方向改变时，下面的方法会自动调用。根据每个方向进行必要的更改。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

if (interfaceOrientation == UIInterfaceOrientationPortrait) {}

else if (interfaceOrientation == UIInterfaceOrientationLandscapeLeft) {} 

else if (interfaceOrientation == UIInterfaceOrientationLandscapeRight) {} 

else if (interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown) {}

return YES;

} 
```

2.您应该知道视图的宽度和高度并相应地设置框架。这没什么大不了的。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T04:30:50.687

我自己正在学习 iOS 应用程序开发的来龙去脉，所以请原谅我的简短回复。

我相信您可以在 Apple 开发人员资源的本文档中标题为“响应方向更改”的部分中找到问题的答案：

[http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDeviceOrientationChanges/RespondingtoDeviceOrientationChanges.html](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDeviceOrientationChanges/RespondingtoDeviceOrientationChanges.html)

我希望这可以帮助您推断出解决问题的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-17T06:49:14.087

在`viewDidLoad`

```
[[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(OrientationChange:) name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

通知您方向已更改的方法：-

```
-(void)OrientationChange:(NSNotification*)notification
{
    UIDeviceOrientation Orientation=[[UIDevice currentDevice]orientation];

    if(Orientation==UIDeviceOrientationLandscapeLeft || Orientation==UIDeviceOrientationLandscapeRight)
    {
        NSLog(@"Landscape");
    }
    else if(Orientation==UIDeviceOrientationPortrait)
    {
        NSLog(@"Portrait");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T05:33:39.783

回答你的问题L

关于调整方向变化的大小：如果您相应地设置弹簧和支柱，它应该自动调整大小，或者您可以按照 deamonsarea 的回答在代码中执行此操作

要检查视图是否超出了父视图的边界，请使用 CGRectContainsRect 之类的东西。

```
CGRect frame0 = self.view.bounds;
CGRect frame1 = ObjGridView.frame;
if(CGRectContainsRect(frame0,frame1)==NO){
  NSLog(@"exceeds bounds")
} 
```

还注意到您没有调用 [super viewDidLoad] 和这一行

```
[[NSBundle mainBundle ] loadNibNamed:@"GridView" owner:ObjGridView options:nil]; 
```

加载视图的新实例，但您没有在任何地方引用它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-18T17:56:35.053

我在寻找一种方法来对 UIView 本身内部的方向变化做出反应时发现了这个问题。万一还有人来...

如果您想对 a 内部的方向变化做出反应`UIView`，而不是 a `UIViewController`（出于封装或其他原因），您可以使用此方法：

```
class MyView: UIView {
  override func layoutSubviews() {
    super.layoutSubviews()
    println("orientation or other bounds-impacting change")
  }
} 
```

# c - 如何处理高位数的计算？

> ID：10809972
> 
> 赞同：-1
> 
> 时间：2012-05-30T04:25:54.390
> 
> 标签：c, floating-point, numerical, digits

当我想使用大小数字时，我必须如何在 C 中求和/比较值？

```
#include <stdio.h>
#include <math.h>

int main(void) {
    if (1.0 + (1/pow (10,50)) == 1.0)
        printf("true");
    else
        printf("false");
    return 0;
} 
```

如何让它返回false？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T04:30:19.820

您不能使用标准 C 类型使其返回 false。您需要使用高精度浮点库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T04:44:22.680

在 C99 中，您可以获得的最高精度是`long double`，在大多数现代 C 编译器/体系结构上，它是 64 位或 128 位 IEEE 浮点数。如果您想要更精确，请考虑使用一些库，例如 GCC 使用的库：

GMP (http://gmplib.org/) - 整数和浮点数的任意精度算术；MPFR (http://www.mpfr.org/) - 多精度浮点库（声称可以正确舍入） MPC (http://www.multiprecision.org/index.php?prog=mpc) 任意精度复数数库。

# ruby-on-rails - 可以在 Ruby 中的 Object 类中添加便捷方法吗？

> ID：10809973
> 
> 赞同：1
> 
> 时间：2012-05-30T04:25:58.263
> 
> 标签：ruby-on-rails, ruby

每次在比较单个值与比较多个值之间切换时，都必须切换变量和值。

```
return if params[:controller] == 'users'
return if ['users', 'sessions', 'admin'].include? params[:controller]. 
```

下面颠倒`Array#include`?

```
class Object
  def in?(arr)
    arr.include? self
  end
  def not_in?(arr)
    !(arr.include? self)
  end
end 
```

现在你可以说：

```
return if params[:controller] == 'users'
return if params[:controller].in? ['users', 'sessions', 'admin'] 
```

在不使用 Object 类的情况下，是否有更好/更安全的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T04:50:51.257

为什么不直接反转另一种情况以匹配？

```
return if 'users' == params[:controller] 
```

除了与多值情况对齐外，它还避免了意外使用赋值运算符`=`而不是相等运算符`==`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T04:44:22.050

Monkey Patch 并不总是安全的，但如您所知，它在 Rails 中被广泛使用。

您始终可以修改开放类，但请确保所有更改都具有唯一的名称，以免引起冲突。

# android - 如何在 android 中创建像 Addcontacts 视图这样的视图？

> ID：10809975
> 
> 赞同：-2
> 
> 时间：2012-05-30T04:26:19.637
> 
> 标签：android, layout, views

根据我的要求，我需要创建一个类似于以下视图的视图

![图片](../Images/fce1d7448d3666e526b60231d7771022.png)

但我的问题是，我可以向现有视图添加新视图，但正如我[在此提到的，我无法从这个缺陷中继续前进](https://stackoverflow.com/questions/10796075/how-to-align-views-in-horizontally-through-programmatic-in-android) ，任何人都可以帮助我解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:49:55.790

> 在以下链接中得到答案。

[回答](https://stackoverflow.com/questions/10796075/how-to-horizontally-align-some-programmatically-added-views/10811884#10811884)

# c# - 我可以将这两个 C# 函数合二为一吗？

> ID：10809976
> 
> 赞同：2
> 
> 时间：2012-05-30T04:26:26.477
> 
> 标签：c#, linq, function

我有以下内容：

```
 protected SelectList GetReferenceOptions(string pk)
    {
        var options = new SelectList(_reference.Get(pk)
            .AsEnumerable()
            .OrderBy(o => o.Order), "RowKey", "Value");
        return options;
    }

    protected SelectList GetReferenceOptions(string pk, string value)
    {
        var options = new SelectList(_reference.Get(pk)
            .AsEnumerable()
            .OrderBy(o => o.Order), "RowKey", "Value", value);
        return options;
    } 
```

这看起来像是我可以组合成一个的东西，但我不确定如何处理这些参数。有人可以通过解释我如何做到这一点来帮助我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T04:30:05.373

如果在您显示的第一个构造函数中将 value 设置为 null ，那么这将起作用：

```
protected SelectList GetReferenceOptions(string pk, string value = null)
{
    var options = new SelectList(_reference.Get(pk)
        .AsEnumerable()
        .OrderBy(o => o.Order), "RowKey", "Value", value);
    return options;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T04:29:22.230

您可以引入一个默认参数，例如：

```
protected SelectList GetReferenceOptions(string pk, string value=null)
{
    var options = 
         value==null
             ? new SelectList(_reference.Get(pk)
               .AsEnumerable()
               .OrderBy(o => o.Order), "RowKey", "Value")
             : new SelectList(_reference.Get(pk)
               .AsEnumerable()
               .OrderBy(o => o.Order), "RowKey", "Value", value);
    return options;
} 
```

然后通过检查默认参数来简单地将这两个函数合二为一`null`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T21:13:26.797

您应该保留这两种方法并将它们干燥。那是更多的面向对象。或许：

```
protected SelectList GetReferenceOptions(string pk)
{
    return GetReferenceOptions(pk, null);
}

protected SelectList GetReferenceOptions(string pk, string value)
{
    return new SelectList(_reference.Get(pk).OrderBy(o => o.Order), 
                          "RowKey", "Value", value);
} 
```

# blackberry-playbook - 在多线程环境中处理触摸事件

> ID：10809978
> 
> 赞同：1
> 
> 时间：2012-05-30T04:26:38.837
> 
> 标签：blackberry-playbook

我是黑莓剧本本机开发的新手，我觉得与现有平台（如 android、iPhone 和诺基亚）有些不同（在处理触摸事件方面），在现有平台中，我们只需注册一个带有事件的回调，一旦有一些回调就会被调用事件和所有这些东西都是并行的，就像在黑莓中你必须查询设备是否存在某些事件，并且这有点序列化，因此用户必须经历一些延迟才能使他们的输入工作。所以为了处理这个场景，我决定创建一个线程，在线程例程中会有一个无限循环，它将继续查询设备，一旦有一些可用的事件代码就会处理这个。

现在我有两个问题 1\. 这是我们处理这种场景的最佳方式吗？如果不是，我怎么能有效地处理这种场景。2\. 如果这种方法适合这种场景，那么我在子线程中获取屏幕事件时遇到问题，我已经在父/主线程中创建了屏幕上下文、初始化 egl 和请求屏幕事件。

请指导我问候阿山

# javascript - 花式盒子的回调

> ID：10809982
> 
> 赞同：0
> 
> 时间：2012-05-30T04:27:02.343
> 
> 标签：javascript, jquery, html, fancybox

我的 jQuery 代码

```
$("#div1").load("test1.html")  

$("a#link").fancybox({
    'transitionIn'  : 'elastic',
    'transitionOut' : 'elastic',
    'width'         : 400,
    'height'        : 200,
    'overlayOpacity': 0.5,
    'type'          : 'iframe'
}); 
```

在`.load`我的幻想箱不起作用之后。

它在`test1.html`.

我想怎么写？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T04:53:46.687

我对fancybox一无所知，但是在使用加载函数时，数据是异步加载的，因此调用加载之后的任何事情都可以在加载之前完成。如果您希望它影响您加载的项目，您应该将代码添加到回调中。

```
$("#div1").load("test1.html", function () {
    $("a#link").fancybox({
        'transitionIn'  : 'elastic',
        'transitionOut' : 'elastic',
        'width'         : 400,
        'height'        : 200,
        'overlayOpacity': 0.5,
        'type'          : 'iframe'
    });
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T04:29:32.467

您可能只需要在`;`该行的末尾添加一个分号？

`$("#div1").load("test1.html");`

语法错误……你有什么错误吗？

您可能还需要考虑将此绑定到 `live()`事件。否则不会包含来自 test1.html 的内容。

在这里看到这篇文章：

[Fancybox，让 Fancybox 使用 LIVE() 绑定到加载后加载到页面上的项目](https://stackoverflow.com/questions/2532070/fancybox-getting-fancybox-to-bind-using-live-to-items-being-loaded-onto-the-p)

# ios - 何时在 NSURLConnection 上使用 Restkit？

> ID：10809985
> 
> 赞同：1
> 
> 时间：2012-05-30T04:27:41.080
> 
> 标签：ios, nsurlconnection

我是一个 ios 初学者，注意到很多开发人员使用 restkit，什么时候使用 Restkit 而不是 NSURLConnection？因为你可以使用 NSURL 库来做 get/put/post/delete。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T00:02:47.673

这取决于您的项目。如果你有一个很小的应用程序，它只是将数据发送到服务器，你可能不需要它，NSURLConnection 很好，使用 Restkit 就像用坦克杀死苍蝇一样。

另一方面，如果您有一个项目需要：

*   向您的服务器/客户端发送/接收对象，并且您不想自己编写映射器来处理异常，请使用 Restkit。

*   如果您从服务器获取的数据需要被持久化，那么请使用来自 RestKit 的 Core Data 支持。

*   如果您需要将数据解析为 JSON 或其他格式，Restkit 可以提供很大帮助。

*   如果您不想处理来自服务器的错误响应，Restkit 也可以提供帮助，它可以让您在不同的上下文中捕获错误，RK 会很神奇，您只需显示错误消息 :)

我认为最好的原因是第一个，对象映射，当您学习如何使用它时，它将为您节省大量时间，您可以在此处查看有关该功能的文档：[https ://github.com/RestKit/ RestKit/blob/master/Docs/Object%20Mapping.md](https://github.com/RestKit/RestKit/blob/master/Docs/Object%20Mapping.md)

# .net - 使用 Entity Framework 4.3 迁移而不依赖于实际数据库

> ID：10809989
> 
> 赞同：4
> 
> 时间：2012-05-30T04:28:49.470
> 
> 标签：.net, entity-framework, entity-framework-4.3, entity-framework-migrations

EF 迁移看起来很酷，但是有太多的“魔法”在发生，而且对于它实际在做什么的解释很少。我要做的就是设置迁移点并获取 DDL 脚本——从一个迁移到另一个迁移的“差异”脚本或整个创建 DDL 脚本。

问题在于，所有迁移命令似乎都依赖于存在的实际数据库来执行一堆我不感兴趣的东西。有没有办法绕过所有这些，只使用迁移来生成脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:51:59.640

这是[昨天讨论过](https://stackoverflow.com/questions/10801260/why-does-entity-frameworks-ef-migrations-add-migration-step-require-a-database)的。迁移命令取决于您的工作数据库，因为它们与`__MigrationHistory`表交互以获取实际状态并正确计算必须进行的更改。

如果您只需要创建脚本，您可以通过使用带有附加参数的 Update-Database 来做到这一点：

为整个数据库创建脚本：

```
Update-Database -Script -SourceMigration:$InitialDatabase 
```

创建从迁移 A 升级到迁移 B 的脚本：

```
Update-Database -Script -SourceMigration:"A" -TargetMigration:"B" 
```

# math - 给定n个点之间的距离，如何从这些关系中绘制地图

> ID：10809992
> 
> 赞同：3
> 
> 时间：2012-05-30T04:29:05.773
> 
> 标签：math, language-agnostic, puzzle

我在教科书中遇到了一个有趣的问题，但没有提供进一步的答案或细节:(

给定一些点，A，B，C等

以及这些点之间的一些距离关系：

```
A -> B = 23
A -> C = 45

B -> A = 23
B -> C = 78

C -> A = 45
C -> B = 78 
```

所以 C 和 A 之间的距离是 45 个单位，A 和 B 是 23 个单位，依此类推

如何绘制地图或某种表示形式？是否只是在收敛之前限制这些规则？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T05:08:16.927

由于它只有 3 个点，所以它是一个简单的三角形，并且您知道三个边与表格的距离：23、45 和 78 个“单位”。

因此，您可以将任意两个点绘制为一条直线，然后进行一些数学运算以确定与第三个点的角度（并且您已经知道距离）：

```
// a, b, and c are the distances, C is the angle.
c² = b² + a² - 2ba cosC 
```

解决这个问题，你就有了穿过点 C 的角度，这样你就可以绘制第三个点。

**编辑（我最初错过了这是 N 分，因为它只在主题中）**：。

如果您没有**所有**的距离，那么您将必须找到三个确实定义了所有三个腿作为起点并绘制它们。之后，找到另一个与现有点的两个定义距离的点，并用这三个点计算新三角形并绘制那个点。重复此操作，直到用完积分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T20:21:03.183

我认为[多维缩放](http://en.wikipedia.org/wiki/Multidimensional_scaling)是您想要的。例如，给定美国城市之间的距离，您将得到如下信息：

![在此处输入图像描述](../Images/e1ec1289b1514fc4b8ca6f6b566fd784.png)

可能没有办法完美地满足您在 2-D 或 3-D 中的约束，但这会最小化成本函数。

# css - CSS 禁用文本选择

> ID：10809995
> 
> 赞同：118
> 
> 时间：2012-05-30T04:29:26.880
> 
> 标签：css

目前，我已将其放在 body 标记中以禁用文本选择：

```
body {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
} 
```

但是，我的`input`和`textarea`框现在无法选择。我怎样才能只使这些输入元素可选择而其余的不可选择？

* * *

## 回答 #1

> 赞同：201
> 
> 时间：2012-05-30T04:52:32.597

不要将这些属性应用于整个身体。将它们移动到一个类并将该类应用于要禁用选择的元素：

```
.disable-select {
  -webkit-user-select: none;  
  -moz-user-select: none;    
  -ms-user-select: none;      
  user-select: none;
} 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-10-25T11:59:00.587

您还可以在所有元素上禁用用户选择：

```
* {
    -webkit-touch-callout:none;
    -webkit-user-select:none;
    -moz-user-select:none;
    -ms-user-select:none;
    user-select:none;
} 
```

而不是在您希望用户能够选择的元素上启用它：

```
input, textarea /*.contenteditable?*/ {
    -webkit-touch-callout:default;
    -webkit-user-select:text;
    -moz-user-select:text;
    -ms-user-select:text;
    user-select:text;
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-03-07T14:04:23.353

只是想总结一切：

```
.unselectable {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

<div class="unselectable" unselectable="yes" onselectstart="return false;"/> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-21T21:40:55.700

```
::selection,::moz-selection {color:currentColor;background:transparent} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-01-16T10:07:44.770

您可以禁用所有选择

```
.disable-all{-webkit-touch-callout: none;  -webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;} 
```

现在您可以启用输入和文本区域启用

```
input, textarea{
-webkit-touch-callout:default;
-webkit-user-select:text;
-khtml-user-select: text;
-moz-user-select:text;
-ms-user-select:text;
user-select:text;} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-30T05:56:46.810

`*`为此目的使用通配符选择器。

```
#div * { /* Narrowing, to specific elements, like  input, textarea is PREFFERED */
 -webkit-user-select: none;  
  -moz-user-select: none;    
  -ms-user-select: none;      
  user-select: none;
} 
```

现在，具有 id 的 div 中的每个元素`div`都将没有选择。

### [演示](http://jsfiddle.net/Smy26/5/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-30T04:31:48.363

而不是`body`键入您想要的元素列表。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-30T05:52:16.810

我同意 Someth Victory 的观点，您需要为某些您希望不可选择的元素添加一个特定的类。

此外，您可以在特定情况下使用 javascript 添加此类。此处示例[借助 CSS 使内容无法选择](http://starikovs.com/2011/01/29/css-unselectable/)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-04-21T14:17:53.530

到处禁用选择

```
input, textarea ,*[contenteditable=true] {
  -webkit-touch-callout:default;
  -webkit-user-select:text;
  -moz-user-select:text;
  -ms-user-select:text;
  user-select:text;
   } 
```

IE7

```
 <BODY oncontextmenu="return false" onselectstart="return false" ondragstart="return false"> 
```