# StackOverflow 问答 10691000-10691999

# c# - 命名空间中不存在类型或命名空间名称“DirectoryServices”？

> ID：10691001
> 
> 赞同：19
> 
> 时间：2012-05-21T18:59:04.083
> 
> 标签：c#, asp.net, active-directory, directoryservices

> CS0234：命名空间“System”中不存在类型或命名空间名称“DirectoryServices”（您是否缺少程序集引用？）

此页面工作正常，直接显示来自服务的记录，没有错误。但现在它给出了上述错误。

```
 <asp:GridView ID="gvUsers" runat="server" AutoGenerateColumns="false" DataSourceID="odsUsers"
                                    AllowPaging="true" AllowSorting="true" Width="100%">
<Columns>
 <asp:TemplateField HeaderText="User Name">
 <ItemTemplate>

<%#((System.DirectoryServices.DirectoryEntry)Container.DataItem).Properties["userPrincipalName"].Value%>

   </ItemTemplate>
   </asp:TemplateField>
/Columns>
</asp:GridView> 
```

项目构建成功，但是当我打开页面时，它给出了错误

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-07T15:33:05.807

添加目录服务引用后，右键单击`reference`并转到`properties`. 设置`"CopyLocal"`为真。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-12-13T19:03:47.070

我很确定我完全错误地将我的应用程序从我的开发框“发布”到我的 IIS 框。但是，我在[这里](http://social.msdn.microsoft.com/Forums/vstudio/en-US/9e052fc9-6c23-42f2-9a8d-afe52c63596b/cant-use-systemdirectoryservicesprotocols-namespace-help)找到了这个解决方案，它对我有用。

如果您使用的是 Web 应用程序，则在您的 web.config 中添加以下代码。

```
<compilation debug="true" targetFramework="4.0" >
    <assemblies>
        <add assembly="System.DirectoryServices, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.DirectoryServices.AccountManagement, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
    </assemblies>
</compilation> 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-05-03T11:38:45.763

1 - 在“参考”上单击鼠标右键
2 - 单击“添加参考...”
3 - 单击“浏览”按钮
4 - 在文件夹中找到以下文件：

> “C:\Program Files\Reference\Assemblies\Microsoft\Framework\.NETFramework\v4.6.1”
> 
> -System.DirectoryServices.dll
> -System.DirectoryServices.AccountManagement.dll

5 - 选择它们
6 - 按“确定”按钮

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-06-09T10:47:37.140

对我有用的简单方法是右键单击 References => Add Reference，然后选择 System.DirectoryServices（和所需的子程序集）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-10-06T15:38:41.610

我在 Visual Studio 2015 中使用针对 .NET Framework 4.5.2 的 MVC 项目遇到了这个问题。将目标框架更改为 .NET 4.5 解决了该问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-22T00:44:58.517

您需要在您的 asp.net 页面上添加一个导入指令。确保它完全合格。确保您在项目中也引用了程序集。

```
 <%@ Assembly Name="System.DirectoryServices, Version=2.0.0.0,
     Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" %> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-21T19:03:18.073

看起来您需要将引用（在您的项目中）添加到[`System.DirectoryServices`](http://msdn.microsoft.com/en-us/library/system.directoryservices.aspx). 由于您在看起来像 aspx 标记页面中使用它，因此有时编译器会在“构建”期间让它们运行，但在您实际执行页面时会失败。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-12T05:51:38.057

我有同样的问题。我在我的 windows 文件夹中搜索了 DirectoryServices.dll。由于出现的所有版本都具有相同的大小，因此我选择了一个并将其复制到我网站的 bin 文件夹中。如果您没有 bin 文件夹，只需创建它。一旦我这样做了，我就可以毫无错误地打开我的网页。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-10-24T02:52:45.927

如果在引用中添加程序集“System.DirectoryServices.AccountManagement”，它将起作用。添加 System.DirectoryServices 将不起作用。

# android - Android 通知 + C2DM

> ID：10691002
> 
> 赞同：0
> 
> 时间：2012-05-21T18:59:06.657
> 
> 标签：android, android-c2dm

我有两个类，Main 和 C2DMReceiver——我希望接收器明显接收来自 C2DM 的推送通知，但我需要上下文才能将任务栏通知推送到 UI——上下文只能在扩展 Activity 的类中找到。由于通知正在调用 C2DM 接收器类，因此我不能只实例化它并传递上下文——如何在收到 C2DM 消息时通知用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T19:41:42.987

您的 C2DMReceiver 应该扩展[BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)，它将通过[onReceive](http://developer.android.com/reference/android/content/BroadcastReceiver.html#onReceive%28android.content.Context,%20android.content.Intent%29)接收上下文。

看看这个[教程](http://blog.mediarain.com/2011/03/simple-google-android-c2dm-tutorial-push-notifications-for-android/)

# jquery - 使用jquery关闭对话框

> ID：10691003
> 
> 赞同：0
> 
> 时间：2012-05-21T18:59:08.013
> 
> 标签：jquery

尝试使用 esc 关闭框不起作用

```
$(document).ready(function() {
    $("#btnShowSimple").click(function(e) {
        ShowDialog(false);
        e.preventDefault();
    });

    $("#btnShowModal").click(function(e) {
        ShowDialog(true);
        e.preventDefault();
    });

    $("#btnClose").click(function(e) {
        HideDialog();
        e.preventDefault();
    });

});

function ShowDialog(modal) {
    $("#overlay").show();
    $("#dialog").fadeIn(300);

    if (modal) {
        $("#overlay").unbind("click");
    }
    else {
        $("#overlay").click(function(e) {
            HideDialog();
        });
    }
}

function HideDialog() {
    $("#overlay").hide();
    $("#dialog").fadeOut(300);
}

$(document).keyup(function(e) {
    if (e.keyCode == 27) {
        $('.btnClose').click();
    } // esc
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:02:03.503

为什么不直接调用你的`HideDialog()`函数？

```
$(document).keyup(function(e) {
    if (e.keyCode == 27) {
        HideDialog();
    } // esc
});​ 
```

# ruby-on-rails-3 - activerecord，嵌套类别？

> ID：10691006
> 
> 赞同：2
> 
> 时间：2012-05-21T18:59:23.517
> 
> 标签：ruby-on-rails-3, activerecord, nested, relationship, categories

如果我有一个嵌套类别，其中每个类别可能有许多子类别，并且每个类别属于一个父类别，我将如何编写类别模型？

我认为它会是这样的：

```
Category
belongs_to :category 
has_many   :categories 
```

我`parent_category_id`在类别表中的位置，这是一个很好的关系吗？还是我需要第二张表来呈现多对多关系？我想我需要像 belongs_to_and_has_many 这样的东西？

任何指导将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T04:41:13.480

这与 的示例完全相同`acts_as_tree`。

查看[https://github.com/amerine/acts_as_tree](https://github.com/amerine/acts_as_tree)

你所需要的只是`parent_id`专栏，你可以说；

```
class Category
  include ActsAsTree
  acts_as_tree :order => "name"
end 
```

然后，您将可以访问以下内容；

```
category.parent   # your parent
category.children # all the categories you are parent of
category.root     # the parent of any parents (or yourself)
category.ancestor # your parent, grandparent, ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T18:06:30.947

虽然迈克尔杜兰特的回答确实是正确的，但`foreign_key`可以在`belongs_to`电话中推断出来。这同样适用于`class`in`has_many`调用。

因此，迈克尔杜兰特的回答更简洁：

```
class Category < ActiveRecord::Base
  belongs_to :parent, class_name: 'Category'
  has_many :categories, foreign_key: :parent_id

  # Uses `parent_id` for the association
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T19:04:08.527

```
class Category < ActiveRecord::Base

belongs_to :parent, :foreign_key => "parent_id", :class => "Category"
has_many :categories, :foreign_key => "parent_id", :class => "Category"

# Uses parent_id for the association. 
```

`has_and_belongs_to_many`并且不需要或不适合映射这种结构的第二个表。

# php - 尝试通过电子邮件将链接发送到在 Firefox 中显示 pdf 的 php - Mac

> ID：10691007
> 
> 赞同：0
> 
> 时间：2012-05-21T18:59:27.777
> 
> 标签：php, macos, email, firefox, pdf

我正在发送指向 php 页面的链接，然后生成和/或显示 pdf 文件。该链接在除 Mac 上的 Firefox 之外的所有浏览器上似乎都能正常工作（从用户的电子邮件客户端导航到 php 页面并在浏览器中显示 pdf）。相反，它会提示用户下载 php 文件。

其他人有这方面的经验吗？有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T19:06:36.823

我一直以为那是火狐本身的功能，不是吗？[http://support.mozilla.org/en-US/kb/view-pdf-files-firefox-without-downloading-them?redirectlocale=en-US&redirectslug=Opening+PDF+files+within+Firefox](http://support.mozilla.org/en-US/kb/view-pdf-files-firefox-without-downloading-them?redirectlocale=en-US&redirectslug=Opening+PDF+files+within+Firefox)

# python - python将字符添加到文件名

> ID：10691008
> 
> 赞同：0
> 
> 时间：2012-05-21T18:59:40.107
> 
> 标签：python

我试图添加一个“。” 在最后一次出现从“.html”开始的整数之后

Python

```
import os
import glob
import re
for name in glob.glob('*.html'):
  newname = re.compile('name(.*?)(\d+)')
os.rename(name, newname) 
```

更改文件名：

```
1cor12.html
gen1.html 
```

至：

```
1cor.12.html
gen.1.html 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T19:12:27.400

应该做的事情：

```
re.sub('(\d+)(?=\.html)', r'.\1', s) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T19:04:00.147

这是你想要的吗？

```
re.sub(r'(\d+\.html)',r'.\1',r'1cor12.html') 
```

请注意，这仅适用于您想要*紧接在*“.html”之前的数字。换句话说，这对“gen1a.html”没有任何作用。

如果您想匹配后一种情况（'gen1a.html'），您可能会执行以下操作：

```
re.sub(r'(\d+\D*\.html)',r'.\1',r'1cor12.html') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T21:00:03.870

```
newname = "%s.%s.html" % re.match(r"(.*)(\d+)\.html", oldname).groups() 
```

# node.js - 在 nodejs 中使用 express.js 获取文本框值

> ID：10691015
> 
> 赞同：0
> 
> 时间：2012-05-21T19:00:01.383
> 
> 标签：node.js, express

作为一个初学者，我试图在 node js 中使用 express 开发一个非常简单的服务，我的服务的目的是一个简单的索引页面获取一个值并在提交后显示在下一页..

问题：当我从终端运行它时，即节点 app.js 服务器开始在端口 3000 上运行，但是当我在浏览器上执行它时，例如 Fire Fox，它向我显示以下错误“页面未正确重定向

Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。此问题有时可能是由禁用或拒绝接受 cookie 引起的。Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。此问题有时可能是由禁用或拒绝接受 cookie 引起的。

以下是我的服务器 App.js 文件的代码

```
var express = require('express');
var service = require('./routes/service');
var app = module.exports = express.createServer();

// Configuration
app.configure(function(){
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.cookieParser());
  app.use(express.session({ secret: 'your secret here' }));
  app.use(require('stylus').middleware({ src: __dirname + '/public' }));
  app.use(app.router);
  app.use(express.static(__dirname + '/public'));
});

app.configure('development', function(){
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
});

app.configure('production', function(){
  app.use(express.errorHandler());
});

// Routes
app.get('/', service.home);
app.post('/',service.home_post_handler);
app.get('/items', service.items);
app.listen(3000, function(){
  console.log("Express server listening on port %d in %s mode", app.address().port, app.settings.env);
}); 
```

Service.js（路由定义）

```
exports.home= function(req,res){
  if(typeof req.message== 'Undefined')
    res.render('home', {title:'My Service'});
  else
    res.redirect('/items');
};

exports.home_post_handler = function(req,res){
  message = req.body.message || 'Message Command is Empty';
  req.message = message;
  res.redirect('/');
}

// Just using cox in tutorial there they use it as database
/*var items = {
  WEL:{name:'Welcome Dear'}
}*/

exports.items = function(req,res){
  if(typeof req.message == 'undefined')
    res.redirect('/');
  else
    res.render('items',{title:'My Service - Message', message:req.body.message, items:items});
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T19:34:27.733

以下中间件有机会继续相互重定向。

```
exports.home= function(req,res){
  if(typeof req.message== 'Undefined')
    res.render('home', {title:'My Service'});
  else
    res.redirect('/items');
};

exports.items = function(req,res){
  if(typeof req.message == 'undefined')
    res.redirect('/');
  else
    res.render('items',{title:'My Service - Message', message:req.body.message, items:items});
}; 
```

# modx - 在 MODx 革命中，如何将容器内资源的编辑限制为用户组？

> ID：10691019
> 
> 赞同：1
> 
> 时间：2012-05-21T19:00:26.590
> 
> 标签：modx, modx-revolution

我正在使用 MODx 革命，我在以下位置观看了视频：[http ://rtfm.modx.com/display/revolution20/Security](http://rtfm.modx.com/display/revolution20/Security)

我有一个容器资源。我试图弄清楚是否可以设置一个用户组，该用户组仅有权在该容器内添加/编辑/删除/取消发布/发布文档，而不是一般地跨所有资源和容器。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:37:09.410

您应该能够使用[资源组](http://rtfm.modx.com/display/revolution20/Resource+Groups)进行归档。*只需创建一个资源组，将除*您的容器之外的所有资源都放在根级别，然后像往常一样在该资源组上使用组、角色和 ACL 应用安全措施。资源组中资源的子资源（也是新资源）将被视为资源组的一部分，因此它们永远不会显示给无权查看该资源组的用户。

这仅在您的容器位于根级别时才有效，因为容器上方的所有资源都必须至少可见。也可以对多个资源组执行此操作，但在这种情况下，我建议您将容器放在他自己的[上下文](http://rtfm.modx.com/display/revolution20/Contexts)中，并仅授予某些用户访问该上下文而不是标准`mgr`上下文的权限。

[您可以在RTFM](http://rtfm.modx.com/display/revolution20/Security)或Bob Ray的这份非常全面的[指南](http://bobsguides.com/revolution-permissions.html)中详细了解如何执行此操作。

# xslt - 基本 XSLT 问题 - 只想选择几个值而没有别的

> ID：10691020
> 
> 赞同：0
> 
> 时间：2012-05-21T19:00:27.717
> 
> 标签：xslt

有人可以告诉我我需要从下面的 XML 中获取输出“LIVE|Customer is active”的 XSLT。我以为我从另一个帖子中得到了答案，但结果却没有。

```
<?xml version="1.0"?>
<cns:customer xmlns:cns="https://services.cns.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="https://services.cns.com docs/xsd/customer.xsd">
    <cns:userId>1001</cns:userId>
    <cns:status>LIVE</cns:status>
    <cns:statusMessage>Customer is active</cns:statusMessage>
    <cns:type wholesale="true" suspended="false">W1</cns:type>
    <cns:properties>
        <cns:property>
            <cns:name>Name</cns:name>
            <cns:value>Bob</cns:value>
        </cns:property>
    </cns:properties>
</cns:customer> 
```

谢谢，

保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:07:01.193

如果您只想将 XML 转换为问题中提到的字符串，可以使用以下样式表：

```
<xsl:stylesheet version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:cns="https://services.cns.com">

  <xsl:output method="text"/>

  <xsl:template match="/*">
    <xsl:value-of select="concat(cns:status,'|',cns:statusMessage)"/>
  </xsl:template>
</xsl:stylesheet> 
```

# html - 如何插入带有 HTML 页面标题的徽标？

> ID：10691021
> 
> 赞同：15
> 
> 时间：2012-05-21T19:00:28.387
> 
> 标签：html, favicon

由于 stackoverflow.com 带有带有标题的徽标，因此如何为任何常用站点完成此操作？这需要哪个代码？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-21T19:03:30.070

你指的是[网站图标](http://en.wikipedia.org/wiki/Favicon)吗？

将 16x16px 图标上传到您的网站，并将其链接到您的`head`部分。

```
<link rel="shortcut icon" href="/favicon.ico" /> 
```

也有许多网站可以帮助您将图像转换为 .ico 格式。这只是我在谷歌上看到的第一个。[http://www.favicon.cc/](http://www.favicon.cc/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-06-14T17:13:09.800

是的，你说得对，我只是想让完全的初学者可以理解。

1.  创建您希望在浏览器选项卡中显示在您的网址旁边的 favicon.ico 文件。你可以在网上做。我使用[http://www.prodraw.net/favicon/generator.php](http://www.prodraw.net/favicon/generator.php)它工作得很好。
2.  将生成的 ico 文件保存在您的网站根目录 /images (yourwebsite/images) 中，名称为 favicon.ico。
3.  复制此标签 并将其粘贴过去，而开始标签和结束标签`<link rel="shortcut icon" href="images/favicon.ico" />` 之间没有任何变化。`<head>``</head>`
4.  在您的 html 文件中保存更改并重新加载您的浏览器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T19:02:00.757

它被称为[favicon](http://en.wikipedia.org/wiki/Favicon)。[他们很容易做到](http://www.favicon.cc/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T19:02:03.460

它被称为网站图标。它是这样插入的：

```
<link rel="shortcut icon" href="favicon.ico" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T19:05:32.473

把它放在这个`<head>`部分：

```
<link rel="icon" href="http://www.domain.com/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="http://www.domain.com/favicon.ico" type="image/x-icon" /> 
```

保留名为“favicon.ico”的图片文件。您必须在线查看以获取 .ico 文件生成器。

# sql - 如何比较两个表并仅显示不等于 0 的结果

> ID：10691023
> 
> 赞同：0
> 
> 时间：2012-05-21T19:00:46.047
> 
> 标签：sql, sql-server

我想做一个 sql 查询，它将采用两个视图并比较数据的差异并仅显示非零的那些。到目前为止，我有以下内容，但它出现了一个错误，说“子查询返回了超过 1 个值”。使用 SQL Server 2008

```
select * from stl_wk_vw where
ABS((select sum(missing+non_missing) as total from tdn_summary as b join stl_wk_vw as a on a.id = b.id group by b.id) 
-
(select sum(st_total) from stl_wk_vw as a join tdn_summary as b on a.id = b.id where   standard not like '%non' group by b.id)) > 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T19:07:52.563

```
SELECT  *
FROM    stl_wk_vw a
JOIN    tdn_summary b
ON      b.id = a.id
GROUP BY
        b.id
HAVING  ABS(SUM(missing + non_missing)) > SUM(CASE WHEN standard NOT LIKE '%non' THEN st_total END) 
```

# jquery - HAML + Jquery：根据单位成本和数量自动计算总计（不使用表格）

> ID：10691025
> 
> 赞同：0
> 
> 时间：2012-05-21T19:00:49.947
> 
> 标签：jquery, ruby-on-rails, e-commerce, calculated-field

我不确定 keyup 是否是正确的工具，但理想情况下，用户可以输入数量和单位成本，它只是在最右边的列中吐出（不必按 enter 或任何东西，只需吐出来）。默认情况下，当页面加载时，“总计”设置为 0.00 美元。

[http://jsfiddle.net/BgrSU/1/](http://jsfiddle.net/BgrSU/1/)

正如代码所建议的，

```
%p#first_brand $0.00​​​​ 
```

是初始总数。如果用户输入单位成本和数量，则将其更改为所需数量，即

```
#total_result 
```

如果您不想单击链接，请使用此功能。请注意，JS 控制台中没有错误。

```
$(document).ready(function(){
  $('input#bulk_order_unit_cost0, input#bulk_order_quantity0').keyup(function(){
    $('#total_result').text($(('.field#unit_cost0')*('.field#quantity0')).val());

  });
}); 
```

任何帮助是极大的赞赏。对这类东西比较陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T19:30:28.467

所以看起来你不能把 HAML 语法放在 jsfiddle 页面中。将其更改为 html 并对 js 进行一些小的更改，会产生此 [http://jsfiddle.net/BgrSU/2/](http://jsfiddle.net/BgrSU/2/) 。查找我将调用移至 jquery ('$') 的位置，并将 keyup 更改为更改，这似乎是您真正想要的

我也会添加一个舍入位，但我将其省略以保持代码整洁。你可以在这里阅读[http://www.javascriptkit.com/javatutors/round.shtml](http://www.javascriptkit.com/javatutors/round.shtml)

# sonarqube - 声纳和 Apache 构建器

> ID：10691027
> 
> 赞同：2
> 
> 时间：2012-05-21T19:00:53.567
> 
> 标签：sonarqube, buildr

谁能告诉我如何集成 Sonar 和 Apache Buildr？

[我从https://github.com/apache/buildr](https://github.com/apache/buildr)下载了 sonar.rb并将其放在 /var/lib/gems/1.8/gems/buildr-1.4.6/addon/buildr

但我不知道如何从我的项目中调用此任务。我已经添加了一个

```
require 'buildr/sonar'
include Buildr::Sonar 
```

我不知道我必须在哪里配置声纳属性。

谢谢你，Soccertrash

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T07:28:00.057

Sonar 扩展使用底层的 ant 任务并将参数从 buildr 传递给 ant。您可以使用的参数将记录在 Buildr 的下一版本中。但是为了让您从这里开始，这是一个使用所有配置参数的简单示例。唯一必须设置的属性是“启用”，而其余属性则尝试具有合理的默认值。

```
require 'buildr/sonar'

define "foo" do
  project.version = "1.0.0"

  define "bar" do ... end

  sonar.enabled = true
  sonar.project_name = 'Foo-Project'
  sonar.key = 'foo:project'
  sonar.jdbc_url = 'jdbc:jtds:sqlserver://example.org/SONAR;instance=MyInstance;SelectMethod=Cursor'
  sonar.jdbc_driver_class_name = 'net.sourceforge.jtds.jdbc.Driver'
  sonar.jdbc_username = 'sonar'
  sonar.jdbc_password = 'secret'
  sonar.host_url = 'http://127.0.0.1:9000'
  sonar.sources << project('foo:bar')._(:source, :main, :java)
  sonar.binaries << project('foo:bar').compile.target
  sonar.libraries << project('foo:bar').compile.dependencies

end 
```

# java - 杰克逊 JSON 异常

> ID：10691029
> 
> 赞同：-2
> 
> 时间：2012-05-21T19:00:55.500
> 
> 标签：java, json, jackson

我写了以下内容：

```
ObjectMapper oMapper = new ObjectMapper();
Object oPOJO = null;

String p_strJSON = "{\"name\" : { \"first\" : \"Joe\", \"last\" : "
    + "\"Sixpack\" },\"gender\" : \"MALE\",\"verified\" : \"false\","
    + "\"userImage\" : \"Rm9vYmFyIQ==\"}";

try
{
    oPOJO = oMapper.readValue(p_strJSON, User.class);
}
catch(Throwable oThrowable)
{
    System.out.println(oThrowable.getMessage());

    throw new RuntimeException(oThrowable);
} 
```

并在执行时收到以下异常消息：

> 无法从 [Source: java.io.StringReader@3eca90; 的 START_OBJECT 令牌中反序列化 java.lang.String 的实例；行：1，列：1]

我是否错误地使用了杰克逊？我正在使用 1.9.6 JAR - 我是否需要在 claspath 中设置任何内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:20:38.730

鉴于您的用户类看起来像这样，您的代码通过

```
public class User {
  private Name name;
  private String gender;
  private boolean verified;
  private String userImage;

  // getter and setter
}

public class Name {
  private String first;
  private String last;

  // getter and setter
} 
```

# c# - 嵌套控件中的图像按钮删除操作

> ID：10691032
> 
> 赞同：1
> 
> 时间：2012-05-21T19:01:30.837
> 
> 标签：c#, asp.net, nested-repeater

我有一个嵌套的中继器，里面有一个删除按钮。此按钮从组中删除学生。但是当我按下删除按钮时，它再次通过嵌套中继器，我得到：

```
Invalid postback or callback argument. 
```

堆栈跟踪：

```
[ArgumentException: Invalid postback or callback argument.  Event validation is enabled     using <pages enableEventValidation="true"/> in configuration or <%@ Page    EnableEventValidation="true" %> in a page.  For security purposes, this feature verifies     that arguments to postback or callback events originate from the server control that originally rendered them.  If the data is valid and expected, use the ClientScriptManager.RegisterForEventValidation method in order to register the postback or  callback data for validation.]
System.Web.UI.ClientScriptManager.ValidateEvent(String uniqueId, String argument) +9714590
System.Web.UI.Control.ValidateEvent(String uniqueID, String eventArgument) +111
System.Web.UI.WebControls.ImageButton.RaisePostBackEvent(String eventArgument) +29
  System.Web.UI.WebControls.ImageButton.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +35
System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +1724 
```

我的 asp.net 文件：

```
<!-- Begin modal -->
<asp:Repeater ID="RepeaterModal" OnItemDataBound="RepeaterModal_ItemDataBound" runat="server">
    <HeaderTemplate>
    <div id="modal">
    </HeaderTemplate>
    <ItemTemplate> 
        <div id="dialog<asp:Literal ID='ltlModalNumber' runat='server' />" class="window">
            <div class="contents">
                <h3>Students in group <asp:Literal ID="ltlModalGroup" runat="server" /></h3>
                <ul>
                <asp:Repeater ID="repeaterModalStudentList" Runat="server">
                    <ItemTemplate>
                        <li class="modalStudent"><%# Eval("Name") %></li>
                        <li class="modalStudentClassDelete">
                            <asp:ImageButton ID="imgDeleteStudent" runat="server" ImageUrl="styles/img/icons/2.png" CommandName="deleteStudent" OnClick="btnDeleteStudent_Click" ToolTip="Delete this student" />
                        </li>
                    </ItemTemplate>
                </asp:Repeater>
                </ul>                       

                <a href="#" class="close">Close</a>
            </div>
        </div>
    </ItemTemplate> 
    <FooterTemplate>
    </div>
    </FooterTemplate>

</asp:Repeater>
<!-- End modal --> 
```

在我的文件后面的代码中，我这样做：

```
//A field 
int r = 0;

//Populates the table with the list of groups.
RepeaterModal.DataSource = listOfGroups;
RepeaterModal.DataBind(); 
```

listOfGroups 包含一个包含 Group 对象的列表，其中包含 group_Id、名称、代码、学生对象以及学生姓名的字符串。

```
//Repeater methode to put the values in the correct labels of the modal window
public void RepeaterModal_ItemDataBound(Object Sender, RepeaterItemEventArgs e) {
    //Execute the following logic for Items and Alternating Items.
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem) {
        ((Literal)e.Item.FindControl("ltlModalNumber")).Text = ((Groups)e.Item.DataItem).Group_Id.ToString();
        ((Literal)e.Item.FindControl("ltlModalGroup")).Text = ((Groups)e.Item.DataItem).Code.ToString();    

        //Fill the repeater inside the repeater with the students name
        Repeater repeaterModalStudentList = ((Repeater)e.Item.FindControl("repeaterModalStudentList"));
        repeaterModalStudentList.DataSource = ((Groups)e.Item.DataItem).Students;
        repeaterModalStudentList.DataBind();

        ImageButton imgDeleteStudent = repeaterModalStudentList.Items[0].FindControl("imgDeleteStudent") as ImageButton;

        if (imgDeleteStudent != null) {
                imgDeleteStudent.CommandArgument = ((Groups)e.Item.DataItem).Students[r].Student_Id.ToString();
                r++;
        }
    }
}

protected void btnDeleteStudent_Click(object sender, EventArgs e) {     
    ImageButton b = (ImageButton)sender;
    string value = b.CommandArgument;

    Students student = new Students();
    student.DeleteStudent(int.Parse(value));

    Response.Redirect(Request.RawUrl);
} 
```

我错过了什么或做错了什么，我不断收到这个错误？添加 EnableEventValidation 不是解决方案。这是 commandArgument 的东西。

## 编辑

大声笑，添加了 if(!IsPostBack)，不再出现错误。但是 CommandArgument 中没有值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:11:12.327

您正在分配 CommandArgument，但您的方法是 btnDeleteStudent_Click

更新：

```
//Repeater methode to put the values in the correct labels of the modal window 
public void RepeaterModal_ItemDataBound(Object Sender, RepeaterItemEventArgs e) { 
    //Execute the following logic for Items and Alternating Items. 
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem) { 
        ((Literal)e.Item.FindControl("ltlModalNumber")).Text = ((Groups)e.Item.DataItem).Group_Id.ToString(); 
        ((Literal)e.Item.FindControl("ltlModalGroup")).Text = ((Groups)e.Item.DataItem).Code.ToString();     

        //Fill the repeater inside the repeater with the students name 
        Repeater repeaterModalStudentList = ((Repeater)e.Item.FindControl("repeaterModalStudentList")); 
        repeaterModalStudentList.DataSource = ((Groups)e.Item.DataItem).Students; 
        repeaterModalStudentList.DataBind(); 
        repeaterModalStudentList.ItemDataBound += repeaterModalStudentList_ItemDataBound; 
    } 
} 

//Repeater methode to put the values in the correct labels of the modal window 
public void repeaterModalStudentList_ItemDataBound(Object Sender, RepeaterItemEventArgs e) { 
    //Execute the following logic for Items and Alternating Items. 
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem) {       

        ImageButton imgDeleteStudent = repeaterModalStudentList.Items[0].FindControl("imgDeleteStudent") as ImageButton; 

        if (imgDeleteStudent != null) { 
            imgDeleteStudent.CommandArgument = ((Student)e.Item.DataItem).Student_Id.ToString(); 
        } 
    } 
} 

protected void btnDeleteStudent_Click(object sender, EventArgs e) {  
    ImageButton btn = (ImageButton)sender; 
    int studentId = (int)btn.CommandArgument; 

    Students student = new Students(); 
    student.DeleteStudent(studentId); 

    Response.Redirect(Request.RawUrl); 
} 
```

# visual-studio-2010 - silverlight Ria 服务中的组合框绑定

> ID：10691034
> 
> 赞同：0
> 
> 时间：2012-05-21T19:01:47.357
> 
> 标签：visual-studio-2010, silverlight, combobox, wcf-ria-services

我想通过域服务将一个组合框与我的实体模型绑定。

我的实体模型：COUNTRIES (ID, NAME) TABLE_TEST (PK_FIELD, FIELD2, COUNTRY_ID)

我创建了我的实体模型和域服务。

我的 Xaml：

```
 <riaControls:DomainDataSource AutoLoad="True" d:DesignData="{d:DesignInstance my:COUNTRIES, CreateList=true}" Height="0" Name="COUNTRIESDomainDataSource" QueryName="GetCOUNTRIESQuery" Width="0">
        <riaControls:DomainDataSource.DomainContext>
            <my:DomainService1 />
        </riaControls:DomainDataSource.DomainContext>
    </riaControls:DomainDataSource>

    <riaControls:DomainDataSource AutoLoad="True" d:DesignData="{d:DesignInstance my:TABLE_TEST, CreateList=true}" Height="0" Name="TABLE_TESTDomainDataSource" QueryName="GetTABLE_TESTQuery" Width="0">
        <riaControls:DomainDataSource.DomainContext>
            <my:DomainService1 />
        </riaControls:DomainDataSource.DomainContext>
    </riaControls:DomainDataSource>

    <ComboBox Name="COUNTRIESComboBox"
              DataContext="{Binding ElementName=COUNTRIESDomainDataSource, Path=Data}" ItemsSource="{Binding}"
              DisplayMemberPath="ID"
              SelectedValuePath="NAME"
      SelectedValue="{Binding ElementName=TABLE_TESTDomainDataSource, Path=COUNTRY_ID}">
    </ComboBox> 
```

组合框加载了正确的值（所有国家/地区），但看起来它不受 TABLE_TEST 的限制。当我更改 TABLE_TEST 的寄存器时，组合的值不会改变。

我做错了什么？我看了很多例子，但没有一个是相同的场景，具有域数据源和实体模型。

我正在使用 Silverlight 5

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T05:29:17.723

DomainDataSource 非常不适合作为 Silverlight ComboBoxes 的数据源。到目前为止，我发现[Kyle McClennan 的 [MSFT] ComboBoxDataSource](http://blogs.msdn.com/b/kylemc/archive/2010/06/18/combobox-sample-for-ria-services.aspx)在您描述的用例中是最可靠的。事实上，他建议：

> 1) 不要使用 DomainDataSource 来填充 ComboBoxes
> 
> 您可能会认为这是激烈或过度反应，但我坚持建议。尽管您会在其他地方看到简单的示例，但我认为您在使用 ComboBox 时最好避免使用 DDS。DDS 不适用于更复杂的 ComboBox 场景。

特别是，您需要在*最终*属性中将您的组合框标记为异步。

```
<ComboBox Name="COUNTRIESComboBox"
          DataContext="{Binding ElementName=COUNTRIESDomainDataSource, Path=Data}" ItemsSource="{Binding}"
          DisplayMemberPath="ID"
          SelectedValuePath="NAME"
          SelectedValue="{Binding ElementName=TABLE_TESTDomainDataSource, Path=COUNTRY_ID}"
          ex:ComboBox.Mode="Async">
</ComboBox> 
```

# java - Java 规范中的方法类型推断

> ID：10691035
> 
> 赞同：8
> 
> 时间：2012-05-21T19:01:52.973
> 
> 标签：java, compiler-construction, type-inference, specifications

我目前正在编写 Java 编译器并已实现第 15.12.2.7 节。JLS7 ( [http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.7](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.7) )，规范中最烦人的部分之一。我仍然有一个问题，因为规范似乎没有明确说明或模棱两可。我的问题是这一行：

*lcta(U) = ? 如果 U 的上界是 Object，否则 ? 扩展 lub(U,Object)*

U 是任意类型的表达式。类型表达式的上限是多少？另外，为什么 lcta 总是通配符？

规范定义

*候选调用（G）= lci（Inv（G））*。

现在，例如，考虑 Inv(G) = { List<String> } 的情况，即唯一可能的候选调用是单个参数化类型。现在，由于规则

*lci(G<X1, ..., Xn>) = G<lcta(X1), ..., lcta(Xn)>* ,

CandidateInvocation( G ) = lci( { List<String> } ) 的结果将被定义为：

列表<lcta(String)>

在我看来，lcta 应该在这里简单地返回 String，因为如果 List<String> 是唯一可能的调用，那么推断 List<String> 作为参数是个好主意。但是，lcta(U) 的定义表明结果是 ? 或者 ？扩展 lub(...)，所以结果总是一个通配符。这似乎很奇怪。我在这里误解了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T21:09:23.807

这看起来像规范的错误。`lcta(U)`JSL3 中不存在of 子句。显然 JLS3 的定义`lci(e1..en)`是不完整的 when `n=1`，新规范试图修复它。但是，正如您所推理的那样，修复似乎是胡言乱语。

Javac7 计算`lci( { List<String> } )`为`List<String>`，忽略添加的子句。

这个问题应该向规范维护者提出；不知道如何联系他们。你可以试试 openjdk*编译器开发*邮件列表；上面有一些知识渊博的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:23:18.850

我在编译器开发邮件列表中询问并收到了答案：

是的，这里的规范是错误的。lcta(U) 的规则完全是废话:)。此外，他们声称最好不要为单个参数调用 lcta(U) 而只使用 U（因为单个参数 U 的最不常见的类型参数应该始终是 U 本身）。

# python - 如何在 Ubuntu 10.04 (lucid) 上安装 python-iso8601_0.1.4-2_all.deb

> ID：10691036
> 
> 赞同：0
> 
> 时间：2012-05-21T19:01:54.423
> 
> 标签：python, unix, ubuntu, installation, dependencies

我正在使用 Ubuntu 10.04，它支持最高版本为 2.6.5 的 Python。但是，我需要安装包python-iso8601_0.1.4-2_all.deb，它依赖于python（> = 2.6.6-7~）。

我无法升级发行版，因为我正在使用 10.10+ 不支持的其他一些软件包

谢谢！

/尼科。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T19:06:51.503

那可能会破坏太多东西。例如，您最好从[http://pypi.python.org/pypi/iso8601/](http://pypi.python.org/pypi/iso8601/)将 ISO 8601 包安装为鸡蛋。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T19:48:44.420

安装`pip`：

```
sudo apt-get install python-pip python-dev build-essential 
sudo pip install --upgrade pip 
sudo pip install --upgrade virtualenv 
```

然后安装你的包：

```
sudo pip install iso8601 
```

# .net - 将方法（返回值）作为参数传递是一件坏事吗？

> ID：10691043
> 
> 赞同：2
> 
> 时间：2012-05-21T19:02:06.580
> 
> 标签：.net, vb.net, methods, parameters

因此，例如我有这个方法：`LoadFunkyInfo(byval funkyData as string)`我通过它是这样的：`LoadFunkyInfo(giantTable.Rows.Item(0).Item("blahName"))`。我应该这样做吗？

```
dim foo as string = giantTable.Rows.Item(0).Item("blahName")
LoadFunkyInfo(foo) 
```

我很久以前在某处读过，最好将方法分配给变量并将该变量传递给方法，而不是将方法作为参数传递。这仍然是真的吗？还是完全正确？

注意：我使用的是 VB.Net 3.5

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T19:06:34.093

您不是在传递*方法*，而是在传递调用方法的结果。引入临时变量的唯一好处是帮助您进行调试：如果您在第二行设置断点，您将能够看到传递给`LoadFunkyInfo`. 除此之外，这两个调用是相同的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T19:05:50.070

首先，您没有将方法作为参数传递。您将从方法返回的值作为参数传递。

其次，它主要是可读性问题。我个人发现在大多数情况下首先将值分配给变量更具可读性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-21T19:06:06.230

执行后者（分配给临时变量）有助于调试。

它允许您在分配上设置断点并查看结果。

一些编译器会将带有临时变量的版本转换为没有使用某些优化标志（比如发布而不是调试）构建的版本。

通过的值不是方法——它是从方法*返回*的值，就像临时变量一样——它被分配返回的值，然后该值作为参数传递。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-21T19:07:23.250

我认为这主要取决于您是否要多次使用第一个函数返回的数据。例如，如果您有这样的事情：

```
LoadFunkyInfo(giantTable.Rows.Item(0).Item("blahName"))
LoadOtherFunkyInfo(giantTable.Rows.Item(0).Item("blahName")) 
```

那么最好将返回值存储起来，而不是调用两次方法：

```
dim foo as string = giantTable.Rows.Item(0).Item("blahName")
LoadFunkyInfo(foo)
LoadOtherFunkyInfo(foo) 
```

否则不需要存储该值。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-21T19:10:57.983

这是一个品味问题，以及您认为最容易阅读的内容。编译成完全相同的代码。对于给出的示例，我不希望看到瞬态变量“foo”，并且通常定义变量只是为了在下一个语句中传递它们是不雅观的。但是，函数调用有很多参数，而参数是其他名称很长的函数，那么这也很难阅读。

我会说只有在消除代码中的歧义时才使用它。

# javascript - 从主页隐藏网站导航

> ID：10691045
> 
> 赞同：0
> 
> 时间：2012-05-21T19:02:24.347
> 
> 标签：javascript, css, wordpress

我在 wordpress 中创建了一个网站，我想从这个页面隐藏菜单

[http://www.dawaf.co.uk/es/](http://www.dawaf.co.uk/es/)

但是，一旦您单击左上角的徽标以将您带到该站点，请使其在所有其他页面上可见

[http://www.dawaf.co.uk/es/portraits](http://www.dawaf.co.uk/es/portraits)

```
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, font, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td {
    border: 0;
    font-family: BebasRegular;
    font-size: 100%;
    font-style: inherit;
    font-weight: inherit;
    margin: 0;
    outline: 0;
    padding: 0;
    vertical-align: baseline;
}

body {
    background: #FFFFFF;
    padding: 0px;
}

h1.entry-title {
    display: none;
}

#page.hfeed {
    margin: 0px;
}

/*Header
------------------------------------------------------------ */
#branding {
    border: 0px;
}

#branding #searchform {
    display: none;
}

.site-title {
    width: 300px;
    height: 132px;
}

/*Nav
------------------------------------------------------------ */
#access {
    background: transparent;
    -webkit-box-shadow: none;
    box-shadow: none;
    width: 140px;
    margin-left: 20px;
}

#access a {
    color: #8E8E8E;
    padding: 0px;
    line-height: 2.2;
}

#access li {
    font-size: 11px;
}

#access li:hover > a, #access a:focus {
    background: #FFFFFF;
}

#access .current-menu-item > a, #access .current-menu-ancestor > a, #access .current_page_item > a, #access .current_page_ancestor > a {
    font-weight: normal;
}

/*Photospace
------------------------------------------------------------ */
.photospace {
    margin: 0px !important;
    top: -236px;
    left: 175px;
}

.nav-controls {
    font-size: 11px;
}

.ss-controls {
    font-size: 11px;
}

.photospace .gal_content a:hover{
    text-decoration: none !important;
}

/*Super Sized Splash Page
------------------------------------------------------------ */
#supersized {
    display: block;
    position: fixed;
    left: 0;
    top: 0;
    overflow: hidden;
    z-index: -999;
    height: 100%;
    width: 100%;
}

#page.hfeed {
    background: transparent;
}

.widget_search form {
    display: none;
}

form#searchform {
    display: none;
}

/*Footer
------------------------------------------------------------ */
#colophon {
    display: none;
}

#post-0 .entry-content {
    display: none;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:07:49.007

您会注意到您的主页有一个类，该类是`home`该部分独有的。这使得执行以下操作变得非常简单：

```
.home nav{
    display:none;
} 
```

或者如果您需要更具体的内容：

```
.home nav#access{
    display:none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T19:07:24.983

我会编辑主题并检查[`is_home()`](http://codex.wordpress.org/Function_Reference/is_home)以隐藏菜单。

```
if( !is_home() )
{
    # Show your menu on pages that are not the home page
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T19:07:49.427

您可以通过执行以下 css 将其从主页中隐藏

```
.home #access {
    display: none;
    } 
```

一旦您通过徽标进入，它仍会出现在您的所有其他页面上。

# php - 如何使用？带有涉及“LIMIT ?”的 SQL 语句的占位符？

> ID：10691048
> 
> 赞同：2
> 
> 时间：2012-05-21T19:02:39.023
> 
> 标签：php, mysql

我检查了这个： [如何将 pdo 的准备好的语句用于 order by 和 limit 子句？](https://stackoverflow.com/questions/2683576/how-do-i-use-pdos-prepared-statement-for-order-by-and-limit-clauses)

但它没有谈论“？” 占位符。

我有这样的声明：

```
$stmt=$connect->prepare("SELECT * FROM users LIMIT ?");
$stmt->execute(array($max_num)); 
```

但它不起作用，因为 LIMIT 数字首先不应该用括号括起来。

我怎么解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T20:42:36.857

```
 $stmt=$connect->prepare("SELECT * FROM users LIMIT ?");
    $stmt->execute(array($max_num)); 
```

上面的查询不起作用，因为参数需要一个整数，并且当您以上述方式绑定它时，该值绑定到一个字符串。

因此，解释查询采用以下形式：

```
 select * from users limit '1' 
```

您应该通过以下方式修改您的查询：

```
 $stmt->bindValue(1,1,PDO::PARAM_INT);
     $stmt->execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T19:30:00.963

```
$connect->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
$stmt=$connect->prepare("SELECT * FROM users LIMIT ?");
$stmt->execute(array((int)$max_num)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T19:12:26.057

尝试

```
$stmt->execute(array((int)$max_num)); 
```

或者如果这不起作用，请尝试

```
$stmt->bindParam(1, (int)$max, PDO::PARAM_INT);
$stmt->execute(); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-21T19:14:21.703

看起来 PDO 不理解 LIMIT 以知道它是一个数值。你可能不得不忍受

```
$connect->query("SELECT * FROM users LIMIT $max_num"); 
```

# matlab - matlab在黑色图像中包围白色区域

> ID：10691056
> 
> 赞同：2
> 
> 时间：2012-05-21T19:03:18.773
> 
> 标签：matlab, image-processing

我有一个灰度图像，我将其转换为黑白图像，并对其进行一些处理。处理后，我有一张黑白图像，在黑色图像中有一组白色像素。所以我想在结果图像中的白色区域周围放置圆圈，但在原始图像中。我想了很多方法，但仍然无法从任何方法开始。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T19:48:07.790

您可以使用[regionprops](http://www.mathworks.nl/help/toolbox/images/ref/regionprops.html)获取有关二值图像中连接的白色区域的一些统计信息，并据此估计区域半径。

```
im = imread('moon.jpg');
bw = im2bw(im);

stats = regionprops(bw);

imshow(im);
hold on;

t = 0:.01:2*pi;
for i = 1:numel(stats)
    bb = stats(i).BoundingBox;
    radius = mean([bb(3),bb(4)])/2;

    plot(bb(1)+radius+radius*sin(t), bb(2)+radius+radius*cos(t));
end 
```

给出： [![图片](../Images/946c489b8263d66f1d2fdb006727842e.png)](https://i.stack.imgur.com/Q4dOz.jpg)

# android - Java：使用基本身份验证从 URL 加载位图时出现 FileNotFoundException

> ID：10691060
> 
> 赞同：4
> 
> 时间：2012-05-21T19:03:31.507
> 
> 标签：android, bitmap, stream, filenotfoundexception, urlconnection

我知道这里有很多这样的问题，但没有一个对我有用:(

在我的 Android 应用程序中，我试图从 URL 获取 Drawable/Bitmap，如下所示：

```
public Bitmap loadBitmap(ISettings settings) {
    Bitmap bm = null;
    InputStream is = null;
    BufferedInputStream bis = null;

    final URL imageURL = new URL("http://domain.com/profile/image");
    final String authString = settings.getUserName() + ":" + settings.getPassword();
    final String authStringEnc = Base64.encodeToString(authString.getBytes(), Base64.DEFAULT);

    URLConnection conn = url.openConnection();
    conn.setRequestProperty("Authorization", "Basic " + authStringEnc);
    conn.connect();
    is = conn.getInputStream();
    bis = new BufferedInputStream(is, 8192);
    bm = BitmapFactory.decodeStream(bis);
    return bm;
} 
```

但是，每次我启动这个婴儿时，都会发生一些意想不到的事情：

```
java.io.FileNotFoundException: http://domain.com/profile/image 
```

因为它可能对您有所帮助，这里是资源的卷曲

```
curl -u Username:Password http://domain.com/profile/image 
```

及其在wireshark中的输出：

```
GET /profile/image HTTP/1.1
Authorization: Basic BASICAUTHSTRING
User-Agent: curl/7.25.0 (i386-pc-win32) libcurl/7.25.0 OpenSSL/0.9.8u zlib/1.2.6 libidn/1.18 libssh2/1.4.0 librtmp/2.3
Host: domain.com
Accept: */*

HTTP/1.1 200 OK
Date: Mon, 21 May 2012 18:36:11 GMT
Server: Apache/2.2.14 (Ubuntu)
Set-Cookie: JSESSIONID=65178AC10C59F372FEC901EBB71F38F7; Path=/profile
Content-Disposition: attachment; filename="profile.name.png"
Content-Length: 33195
Content-Type: image/png;charset=UTF-8

‰PNG
.. just the bytes of png which I cannot enter here as it would be too long :) 
```

如何解决？

## **编辑＃1：**

捕获从手机到网络的流量我看到了这一点，这有点明显:) - 但我不知道如何让它正确：

```
GET /profile/image HTTP/1.1
Authorization: Basic BASICAUTHSTRING
User-Agent: Dalvik/1.4.0 (Linux; U; Android 2.3.7; Nexus One Build/GRK39F)
Host: domain.com
Connection: Keep-Alive
Accept-Encoding: gzip

HTTP/1.1 400 Bad Request    
Date: Mon, 21 May 2012 23:01:42 GMT    
Server: Apache/2.2.14 (Ubuntu)    
Vary: Accept-Encoding
Content-Length: 327    
Connection: close    
Content-Type: text/html; charset=iso-8859-1   

<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>400 Bad Request</title>
</head><body>
<h1>Bad Request</h1>
<p>Your browser sent a request that this server could not understand.<br />
</p>
<hr>
<address>Apache/2.2.14 (Ubuntu) Server at domain.com Port 80</address>
</body></html> 
```

## **编辑#2：**

这是什么巫术？使用 curl 并使用与设备上完全相同的标头信息：

```
curl -H "Connection: Keep-Alive" -H "Accept-Encoding: gzip" -H "Accept:" -H "User-Agent: curl/7.25.0 (i386-pc-win32) libcurl/7.25.0 OpenSSL/0.9.8u zlib/1.2.6 libidn/1.18 libssh2/1.4.0 librtmp/2.3" -u Username:Password http://domain.com/profile/image 
```

我马上得到图像：<

这里发生了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T12:47:02.460

最后我让它工作了。

我预计 BASICAUTHSTRING 是正确的 - 好吧，我有点错了。

```
android.util.Base64.encodeToString(authString.getBytes(), android.util.Base64.DEFAULT) 
```

**将在末尾追加一个新行。**所以使用

```
android.util.Base64.No_WRAP 
```

旗帜。

**所以所有的麻烦实际上只是一个字节:)**

# session - 用户会话服务器登录 GWT 应用程序 - 任何工具？

> ID：10691061
> 
> 赞同：0
> 
> 时间：2012-05-21T19:03:36.730
> 
> 标签：session, gwt, google-analytics, analytics

我需要在 GWT 应用程序中跟踪和记录用户交互和请求。不能像在 Google Analytics 中那样使用 URL，所以我想它会是服务器端的一些监听器来监听用户请求。

是否有任何模块可以让我从 GWT 应用程序中收集、记录和提取用户行为数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:58:24.423

GWT (since 2.1) has remote logging capabilities. Have a look at [Developer's Guide - Logging](https://developers.google.com/web-toolkit/doc/2.4/DevGuideLogging#Remote_Logging) to see if this fits your needs.

Client logging is enabled by inheriting the GWT Logging module in your .gwt.xml file:

```
<inherits name="com.google.gwt.logging.Logging"/> 
```

Then you can log your user activities by using the logger:

```
Logger logger = Logger.getLogger("UserInteractions");
logger.log(Level.SEVERE, "User clicked ok button"); 
```

If you now enable remote logging and use the RemoteLogHandler, the log message will be sent to the server by GWT-RPC and logged to the server logfile. Enable it by setting the following property:

```
<set-property name="gwt.logging.simpleRemoteHandler" value="ENABLED" /> 
```

But be aware that this can generate a lot of network traffic and server load if you log to much.

# c# - C# app.config 具有多个带分隔值的值

> ID：10691063
> 
> 赞同：2
> 
> 时间：2012-05-21T19:03:38.650
> 
> 标签：c#, linq, lambda, app-config

我的`app.config`文件有一个`ArrayOfString`条目。每个条目都包含一个分号分隔的字符串。如果可能的话，我希望能够使用 lambda`List<>`根据输入条件解析出 a 中的值。但我希望它找到的第一个条目基于该标准。或者有没有更好的方法**使用**该`app.config`文件？

例如 ..

如果我想找到包含的第一个条目`[source],[filetype]`并返回文件路径。

示例`app.config`条目。

```
SOURCE;FLAC;112;2;\\sourcepath\music\

DEST;FLAC;112;2;\\destpath\music\ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:27:59.003

您应该创建自己的`ConfigurationSection`定义，而不是依赖于让您的值落在字符串拆分操作的正确索引处。

请参阅[MSDN 上的 How To](http://msdn.microsoft.com/en-us/library/2tw134k3.aspx)和[MSDN ConfigurationProperty 示例](http://msdn.microsoft.com/en-us/library/s8ww86kz)。

以下是一些帮助您入门的代码：

```
class CustomConfig : ConfigurationSection
{
    private readonly CustomElementCollection entries =
        new CustomElementCollection();

    [ConfigurationProperty("customEntries", IsDefaultCollection = true)]
    [ConfigurationCollection(typeof(CustomElementCollection), AddItemName = "add")]
    public CustomElementCollection CustomEntries { get { return entries; } }
}

class CustomElementCollection : ConfigurationElementCollection
{
    public CustomElement this[int index]
    {
        get { return (CustomElement) BaseGet(index); }
        set
        {
            if (BaseGet(index) != null)
            {
                BaseRemoveAt(index);
            }
            BaseAdd(index, value);
        }
    }

    protected override ConfigurationElement CreateNewElement()
    {
        return new CustomElement();
    }

    protected override object GetElementKey(ConfigurationElement element)
    {
        return ((CustomElement)element).Name;
    }
}

class CustomElement : ConfigurationElement
{
    [ConfigurationProperty("name", IsRequired = true)]
    public string Name
    {
        get { return this["name"] as string; }
        set { this["name"] = value; }
    }

    [ConfigurationProperty("direction", IsRequired = true)]
    public string Direction
    {
        get { return this["direction"] as string; }
        set { this["direction"] = value; }
    }

    [ConfigurationProperty("filePath", IsRequired = true)]
    public string FilePath
    {
        get { return this["filePath"] as string; }
        set { this["filePath"] = value; }
    }
} 
```

指定自定义配置后，您可以`Select`使用自定义中指定的任何属性使用 lambda `ConfigurationElement`。

# xna - XNA 中 XML 序列化期间的 InvalidOperationsException

> ID：10691073
> 
> 赞同：0
> 
> 时间：2012-05-21T19:04:18.263
> 
> 标签：xna, xml-serialization, invalidoperationexception

我有一个关于我在尝试通过 XNA 4.0 内容管道读取 XML 文件以构建对象时遇到的错误的问题。首先，我重用了我的旧 XNA 3.1 代码，该代码在当时可以使用，但现在抛出错误消息：

建筑内容抛出 InvalidOperationException: Instanzen von abstrakten Klassen können nicht erstellt werden。（无法在 ReflectionEmitUtils() 处构建抽象类的实例 - 粗略翻译）......并且永远持续下去，如果需要，我可以发布它，但为了更好地阅读我的初始请求......

然后我使用了这个[方法](http://msdn.microsoft.com/en-us/library/ff604979)，但它抛出了同样的错误。

这些是相关的源代码：我编写了一个类来定义 XML 文件的内容/结构：

```
public class Command
    {        
        public List<bool> mButtons;       
        public List<Keys> keys;        
        public Enum iD;       
    } 
```

这是我的 XML 文件，我想用它来构建命令对象

```
<?xml version="1.0" encoding="utf-8" ?>
<XnaContent>
  <Asset Type="KinectRTS_Input.Command">
    <mButtons>true/mButtons>
    <keys>
      <Item>LeftControl/Item>      
    </keys>
    <iD>SMulti/iD>
  </Asset>
</XnaContent> 
```

（在我的代码中，括号都是正确的，尽管因为此表单处理 XML-Tags...；））我使用了一个[测试应用程序](http://blogs.msdn.com/b/shawnhar/archive/2008/08/12/teaching-a-man-to-fish.aspx)来找出 XNA-Serializer 用于输出列表项的格式和枚举，所以我有理由确定，没有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:35:55.250

看起来您的 XML 无效或您的模型无效。对于该`mButtons`字段，您已将其定义为 a`List<bool>`但在 XML 中它`bool`不是 a `List<bool>`。我要么编辑 XML 以使`<mButtons>`元素包含单个元素，要么将 Model 中`<Item>`的声明更改为not 。`mButtons``bool``List<bool>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T12:47:40.623

太容易了...问题不在于列表，实际上我的请求中提到的测试应用程序实际上返回了 XML-Tags，其中键列表的项目标签和布尔列表的项目标签没有。将 bool 包装到 Item-Tags 中会导致“at not expected”错误。不过，我不知道为什么序列化程序处理 List 和 List 的方式不同。

问题是 Enum 'iD'，它是一个抽象类，因此会引发上面提到的错误。似乎我被错误消息的庞大规模压倒了，只是忽略了关键的信息——序列化器试图构建一个抽象类。

不过还是谢谢。– 黑二凯美

# javascript - 将值从 MVC 控制器传递到 javascript 代码

> ID：10691079
> 
> 赞同：5
> 
> 时间：2012-05-21T19:04:52.127
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc, asp.net-mvc-3

我需要通过 MVC 控制器中的 jsonresult 将日期信息列表/json/array 动态传递给 Jquery UI Datepicker。

按照下面的链接，我可以在 datepicker 控件中突出显示选定的日期。 [http://jquerybyexample.blogspot.com/2012/05/highlight-specific-dates-in-jquery-ui.html](http://jquerybyexample.blogspot.com/2012/05/highlight-specific-dates-in-jquery-ui.html)

```
 < script type ="text/javascript">
    $(document).ready( function () {

    var SelectedDates = {};
    SelectedDates[ new Date('05/28/2012' )] = new Date( '05/28/2012' );
    SelectedDates[ new Date('05/29/2012' )] = new Date( '05/29/2012' );
    SelectedDates[ new Date('05/30/2012' )] = new Date( '05/30/2012' );
    //want to replace the above three lines with code to get dates dynamically
    //from controller

    $( '#releasedate' ).datepicker({
        dateFormat: "mm/dd/yy" ,
        numberOfMonths: 3,
        duration: "fast" ,           
        minDate: new Date(),
        maxDate: "+90" ,
    beforeShowDay: function (date) {
        var Highlight = SelectedDates[date];
        if (Highlight) {
            return [true , "Highlighted", Highlight];
        }
        else {
            return [true , '', '' ];
        }
    }
}); 
```

上面的代码将突出显示日历控件（UIDatepicker）上的这三个特定日期。而不是像上面那样硬编码日期......我的挑战是从控制器动态获取这些日期并将其传递给上面 javascript 中的 var SelectedDates。

控制器json结果代码：

```
 public JsonResult GetReleasedDates(string Genre)
{

    var relDates = service.GetDates(Genre)//code to get the dates here

    return Json(relDates, JsonRequestBehavior .AllowGet);

    //relDates will have the dates needed to pass to the datepicker control.

} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-21T19:23:05.647

第一种可能性是使用将直接序列化为 JSON 的模型：

```
public ActionResult Index()
{
    // TODO: obviously those will come from your service layer
    var selectedDates = new Dictionary<string, DateTime> 
    { 
        { new DateTime(2012, 5, 28).ToString("yyyy-M-dd"), new DateTime(2012, 5, 28) },
        { new DateTime(2012, 5, 29).ToString("yyyy-M-dd"), new DateTime(2012, 5, 29) },
        { new DateTime(2012, 5, 30).ToString("yyyy-M-dd"), new DateTime(2012, 5, 30) },
    };
    return View(selectedDates);
} 
```

在视图中：

```
@model IDictionary<string, DateTime>

<script type ="text/javascript">
    $(document).ready(function () {

        var selectedDates = @Html.Raw(Json.Encode(Model));

        $('#releasedate').datepicker({
            dateFormat: "mm/dd/yy",
            numberOfMonths: 3,
            duration: "fast",
            minDate: new Date(),
            maxDate: "+90",
            beforeShowDay: function (date) {
                var key = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();
                var highlight = selectedDates[key];
                if (highlight) {
                    return [true, "Highlighted", highlight];
                }
                else {
                    return [true, '', ''];
                }
            }
        });
    });
</script> 
```

另一种可能性是使用 AJAX 来检索`selectedDates`后者：

```
public ActionResult Index()
{
    return View();
}

public ActionResult GetSelectedDates()
{
    // TODO: obviously those will come from your service layer
    var selectedDates = new Dictionary<string, DateTime> 
    { 
        { new DateTime(2012, 5, 28).ToString("yyyy-M-dd"), new DateTime(2012, 5, 28) },
        { new DateTime(2012, 5, 29).ToString("yyyy-M-dd"), new DateTime(2012, 5, 29) },
        { new DateTime(2012, 5, 30).ToString("yyyy-M-dd"), new DateTime(2012, 5, 30) },
    };
    return Json(selectedDates, JsonRequestBehavior.AllowGet);
} 
```

进而：

```
<script type ="text/javascript">
    $(document).ready(function () {
        $.getJSON('@Url.Action("GetSelectedDates")', function(selectedDates) {
            // Only inside the success callback of the AJAX request you have
            // the selected dates returned by the server, so it is only here
            // that you could wire up your date picker:
            $('#releasedate').datepicker({
                dateFormat: "mm/dd/yy",
                numberOfMonths: 3,
                duration: "fast",
                minDate: new Date(),
                maxDate: "+90",
                beforeShowDay: function (date) {
                    var key = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();
                    var highlight = selectedDates[key];
                    if (highlight) {
                        return [true, "Highlighted", highlight];
                    }
                    else {
                        return [true, '', ''];
                    }
                }
            });
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T09:48:42.050

有一个库可以将数据从控制器交换到 javascript，而无需进一步的 ajax 调用或内联 javascript。如果您需要每一页上的数据，您可以在过滤器中使用它。

[http://jsm.codeplex.com](http://jsm.codeplex.com)

使用该库，您只需在 MVC 控制器操作中编写以下代码：

```
// Add the dates as objects to javascript - The object should only contain data
// which should be exposed to the public.
this.AddJavaScriptVariable("DatePickerController.Dates", service.GetDates(Genre));
// Execute the initialization function when the DOM has been loaded
// The function can be in a javascript file
this.AddJavaScriptFunction("DatePickerController.Ready"); 
```

您的 javascript 文件可能如下所示：

```
var DatePickerController = {
    Dates: null,
    Ready: function() {
        $("#releasedate").datepicker({
            dateFormat: "mm/dd/yy" ,
            numberOfMonths: 3,
            duration: "fast" ,           
            minDate: new Date(),
            maxDate: "+90" ,
            beforeShowDay: function (date) {
                var Highlight = DatePickerController.Dates[date];
                if (Highlight) {
                    return [true , "Highlighted", Highlight];
                }
                else {
                    return [true , '', '' ];
                }
            }
        });
    }
}; 
```

注意：您可能必须为使用 this.AddJavaScriptVariable 传递的日期创建一个特殊模型，该模型与日期选择器兼容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T19:16:50.597

进行ajax调用：

```
<script type ="text/javascript">
    $(document).ready( function () {

    var SelectedDates = {};
    //SelectedDates[ new Date('05/28/2012' )] = new Date( '05/28/2012' );
    //SelectedDates[ new Date('05/29/2012' )] = new Date( '05/29/2012' );
    //SelectedDates[ new Date('05/30/2012' )] = new Date( '05/30/2012' );

    $.ajax({
        url:'url'
        ,data:{}
        ,type:'get'
        ,success:function(data) {

        for(var i = 0, i < data.length; i++) {
            SelectedDates.push(new Date(data[i]));
        }

        $( '#releasedate' ).datepicker({
            dateFormat: "mm/dd/yy" ,
            numberOfMonths: 3,
            duration: "fast" ,           
            minDate: new Date(),
            maxDate: "+90" ,
            beforeShowDay: function (date) {
            var Highlight = SelectedDates[date];
                if (Highlight) {
                    return [true , "Highlighted", Highlight];
                }
                else {
                    return [true , '', '' ];
                }
            }
        });
    });
});
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T19:17:43.223

进行ajax调用以获取日期。ajax 请求成功后，使用结果配置数据选择器。

```
var configureDatePickers = function(dates){
    //setup datepicker in here...
};
$.get('url to get dates', {Genre: smoething}).success(configureDatePickers); 
```

另一项建议。默认的 json 序列化程序不能很好地与 datetime 对象配合使用。因此我建议在序列化之前将日期作为字符串返回。例子：

```
var dates = Data.GetDates(genre).Select(x=>x.ToString("MM-dd-yyyy")).ToArray();
return Json(dates); 
```

# awk - 第一个和第二个输入文件对 awk 有不同的行为吗？

> ID：10691080
> 
> 赞同：2
> 
> 时间：2012-05-21T19:04:59.993
> 
> 标签：awk, gawk

例如，假设我运行以下命令：

```
gawk -f AppendMapping.awk Reference.tsv TrueInput.tsv 
```

假设文件名会改变。在遍历第一个文件时，我想创建一个映射。

```
map[$16]=$18 
```

在遍历第二个文件时，我想使用映射。

```
print $1, map[$2] 
```

实现这种行为的最佳方法是什么（即每个输入文件的不同行为）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T19:21:28.150

您可能知道`NR`存储当前行号；正如您可能知道或可能不知道的那样，它是累积的 - 它不会在文件之间重置。`FNR`另一方面，特定于文件，因此您可以使用这两个来查看您是否在第一个文件中（第二个之后您需要保留自己的计数器）。

```
# In case you want to keep track of the file number
FNR == 1 { fileno++ }*emphasized text*

NR == FNR {
    # First file
}
NR != FNR {
    # Second or later file
} 
```

您也可以`getline`在`BEGIN`块中使用手动循环遍历它。

```
BEGIN {
    file = ARGV[1]
    while(getline < file) {
        # Process line
    }
    delete ARGV[1]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T19:18:59.237

Gawk 版本 4 和更高版本提供特殊`BEGINFILE` (and `ENDFILE`) 块以及通常的`BEGIN`and`END`块。使用它们来设置您改变代码行为的标志。

回想一下，[模式可以包括与变量的比较](http://sunsite.ualberta.ca/Documentation/Gnu/gawk-3.1.0/html_chapter/gawk_8.html#SEC108)，因此您可以直接根据标志的值选择模式。

手册页说：

> 对于每个输入文件，如果存在 BEGINFILE 规则，gawk 会在处理文件内容之前执行相关代码。类似地，gawk 在处理完文件后执行与 ENDFILE 相关的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T20:34:16.260

这可能对您有用：

```
seq 5 >/tmp/a
seq 100 105 >/tmp/b
awk 'FILENAME==ARGV[1]{print FILENAME,$0};FILENAME==ARGV[2]{print $0,FILENAME}' /tmp/{a,b}
/tmp/a 1
/tmp/a 2
/tmp/a 3
/tmp/a 4
/tmp/a 5
100 /tmp/b
101 /tmp/b
102 /tmp/b
103 /tmp/b
104 /tmp/b
105 /tmp/b 
```

所以通过在命令行中结合`FILENAME`where `ARGV[n]`is `n`the nth file，`awk`可以有条件地改变单个文件。

NB ARGV[0] 将是`awk`命令。

# gnu-make - GNU make：来自模式匹配变量的源列表中的目标文件列表

> ID：10691093
> 
> 赞同：3
> 
> 时间：2012-05-21T19:05:45.263
> 
> 标签：gnu-make

所以我有一个变量：

```
PROGS = element0 \
        element1 
```

我有每个变量：

```
element0_SRCS = src/xxx.c src/q.c
element1_SRCS = src/xxx.c src/z.c 
```

如果我有另一组变量，那么我可以很容易地做我想做的事：

```
element0_OBJS = src/xxx.o src/q.o
element1_OBJS = src/xxx.o src/z.o

ALL_PROGS = $(foreach p, $(PROGS), $(p)_prog)
all : $(ALL_PROGS)

.SECONDEXPANSION:
%_prog : $$($$*_OBJS)
     gcc - blah blah 
```

但是，我想消除对“_OBJS”变量的需要并使用 _SRCS 变量。我可以对每个 prog 做这个人：

```
element0_prog : $(element0_SRCS:.c=.o) 
```

尽管多次尝试使用第二个扩展来重新创建 %_prog 规则，但都失败了。

`$$($$*_SRCS:.c=.o)`==> 目标模式不包含 '%'

`$$(patsubst %.c,%.o,$$($$*_SRCS))`==> 使用 .c 文件而不是 .o 文件构建目标。

在这里几乎是不知所措。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T19:26:30.280

使用[静态模式](http://www.gnu.org/software/make/manual/make.html#Static-Pattern)规则：

```
prog_objs = $($*_SRCS:.c=.o)

.SECONDEXPANSION:
$(ALL_PROGS) : %_prog : $$(prog_objs)
    gcc - blah blah 
```

# java - 使用双屏时在主显示器上居中显示 JFrame

> ID：10691094
> 
> 赞同：3
> 
> 时间：2012-05-21T19:05:45.543
> 
> 标签：java, swing, screen

我正在尝试编写一些代码以使用 Java 将我的主应用程序 JFrame 置于计算机屏幕的中心。为此，我使用下面的代码，它将过程分为两部分，这只是因为我在类的其他地方使用 ScreenHeight 和 ScreenWidth 进行缩放，它们是类的属性。

这段代码在我的笔记本电脑和其他单屏机器上完美运行，但在我的双显示器主机上，它将屏幕放在工作区的中心，每个屏幕上都有一半的对话框（可能很小） . 它在一个方法中，因此我可以在每次对话框大小由程序更改时调用它。

我使用布尔 Width 值将屏幕保持在垂直轴上的同一位置，但将其置于水平轴上。

```
// Finds the size of the screen
private void find_ScreenSize() {
    Toolkit toolkit = Toolkit.getDefaultToolkit();
    Dimension dim = toolkit.getScreenSize();
    ScreenHeight = dim.height;
    ScreenWidth = dim.width;
}

// Centres the dialogue box within the screen
private void centre_Frame(JFrame Frame, boolean Width) {
    find_ScreenSize();

    if (!Width) { // if you are not justifying on the X axis
        Frame.setLocation(Frame.getLocationOnScreen().x,
                ((ScreenWidth / 2) - (Frame.getWidth() / 2)));
    } else {
        Frame.setLocation(((ScreenWidth / 2) - (Frame.getWidth() / 2)),
                ((ScreenHeight / 2) - (Frame.getHeight() / 2)));
    }
} 
```

我希望能够在任何多屏幕计算机上将对话框置于主屏幕/第一个屏幕的中心。我的应用程序中的对话框，我不控制它的位置，设法做我想做的事情，例如我的 JOptionPane 和文件打开和保存对话都完美地工作。

我在 Linux 上进行开发，但该应用程序用于 Linux 和 MS 平台。

搜索这个问题给了我很多上面的例子，但没有告诉我如何做我想做的事，任何帮助将不胜感激。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T19:11:24.277

```
frame.setLocationRelativeTo(null); 
```

应该工作（[文档](http://docs.oracle.com/javase/6/docs/api/java/awt/Window.html#setLocationRelativeTo%28java.awt.Component%29)）。至少在我的多显示器设置中是这样。请注意，窗口始终显示在主监视器的中心，即使应用程序是从辅助监视器启动的。

您可以使用[GraphicsEnvironment.getCenterPoint](http://docs.oracle.com/javase/6/docs/api/java/awt/GraphicsEnvironment.html#getCenterPoint%28%29)来找到中心点，而不是自己计算。

如果要在特定显示器中显示，请参阅[在双显示器配置中的特定屏幕中显示 JFrame](https://stackoverflow.com/questions/4627553/java-show-jframe-in-a-specific-screen-in-dual-monitor-configuration)

# android - android - 即使在相机预览期间没有人脸检测，也能进行眼睛检测

> ID：10691095
> 
> 赞同：1
> 
> 时间：2012-05-21T19:05:49.073
> 
> 标签：android, android-camera, preview, eye-detection

是否有任何库用于检测给定矩形中的眼睛（和眼睛的大小），而相机预览仍在显示其内容（不间断）？

我需要找到一种简单的方法来实现这一点。我发现有一个用于面部检测的 API，并且在 android 4 上他们还添加了眼睛检测，但前提是它找到了一张脸，但即使没有任何脸，我也需要找到一只眼睛。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T20:44:53.963

你可以随时[查看 Android 的源代码，](https://plus.google.com/100301252568537087423/posts/3NngLGAjVgG)看看他们是如何进行眼睛检测的。

否则看看这个问题：[OpenCV eye tracking on Android](https://stackoverflow.com/questions/8959423/opencv-eye-tracking-on-android)

如果你想在 android 上看一个 opencv 的例子，[点击这个开源代码](http://javacv.googlecode.com/files/facepreview-src-20101202.zip)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-13T06:29:11.667

opencv 是处理面部和眼睛检测的最佳库 使用 opencv 您可以执行以下操作：http:
[//opencv-code.com/tutorials/eye-detection-and-tracking/](http://opencv-code.com/tutorials/eye-detection-and-tracking/)
示例代码：
[http ://romanhosek.cz/android-使用opencv进行眼睛检测和跟踪/](http://romanhosek.cz/android-eye-detection-and-tracking-with-opencv/)

# c# - 不输出无点媒体查询

> ID：10691112
> 
> 赞同：2
> 
> 时间：2012-05-21T19:07:11.023
> 
> 标签：c#, dotless

我的代码中有这个规则。

```
@media all and (max-width: 600px) { foobar } 
```

当我查看 dotless 的 css 输出时，我看到了大括号之间的内容（例如 foobar）。但它不在媒体标签内，所以它适用于所有媒体类型。

# python - DJANGO：我可以写“def view(request, x or y)”吗？

> ID：10691113
> 
> 赞同：-3
> 
> 时间：2012-05-21T19:07:18.853
> 
> 标签：python, django, view, request, function

我有一个可以通过两个不同的 url 访问的视图。url 带有不同的变量。我想知道是否有一种方法可以写出这样的东西：

```
def view(request, x or y) 
```

这可能吗？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T19:13:01.853

回答你的直接问题：**不，你不能写`def view(request, x or y)`**

如果您有两个输入到同一视图的 URL，则需要在 urls.py 文件中创建以分隔调度程序。如果两个 URL 发送不同类型的数据，您可以考虑使用命名参数。例如：

```
def view(request, var_from_one_url="some_default", var_from_another="some_default"):
    pass 
```

从风格的角度来看，这可能不是要走的路。您可能应该创建两个单独的视图。如果它们共享逻辑，您应该将其分解为另一个函数。

# html - 如何让孩子 UL 离开父母 UL

> ID：10691119
> 
> 赞同：2
> 
> 时间：2012-05-21T19:07:27.057
> 
> 标签：html, css, html-lists

标题中解释的行为问题是可以理解的，但我需要一个解决方法。

我在 JSfiddle 中做了一个例子：http: [//jsfiddle.net/TBXr4/2/](http://jsfiddle.net/TBXr4/2/)

在第一个 LI 中看到我有几句话。他们没有像我需要的那样排队，但他们正在上市。我该如何解决这个问题？

让我再具体一点，我不想手动设置子UL的宽度，实际上我不想设置一个。我需要一种方法，以便父 UL 设置宽度，而子 UL 将是继承文本的最小宽度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T23:00:04.590

您可以只设置元素的`white-space`属性：`li`

```
li {
    /* other stuff */
    white-space: nowrap;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/TBXr4/3/)。

这样做的问题是，虽然文本将在 parent`ul`的指定宽度之外可见，但`li`(it's `background-color`/ `background-image`) 的样式不会延续。

参考：

*   [CSS`white-space`属性](https://developer.mozilla.org/en/CSS/white-space)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T10:35:04.430

**[演示在这里](http://jsfiddle.net/sureshpattu/TBXr4/5/)**

我想你只想要这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T13:25:59.463

为什么要为您不希望遵守的确切元素 (UL) 指定宽度？

将宽度设置应用于主列表并为子列表分配一个新宽度，[如此 jsfiddle 示例所示](http://jsfiddle.net/TBXr4/8/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T13:42:50.257

文本没有在一行显示句子的原因是因为您设置了 li, remove 的宽度`style="width:35px"`。

# objective-c - 使用 ?: 进行分配是否比使用 if() 产生更快的组装？

> ID：10691120
> 
> 赞同：2
> 
> 时间：2012-05-21T19:07:29.570
> 
> 标签：objective-c, c, performance, compilation, ternary-operator

我想知道以下两种惰性实例化形式中的哪一种会生成更快的汇编代码。这是代码：

**第一个：**

```
if (!_separatorTopBorderColor) _separatorTopBorderColor = UIColorFromHex(0x393A3B);
return _separatorTopBorderColor; 
```

**第二：**

```
_separatorTopBorderColor = _separatorTopBorderColor ?: UIColorFromHex(0x393A3B);
return _separatorTopBorderColor; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T19:18:25.267

这可能是 10 年前的一个问题，但如今，编译器确实看到了`ternary`运算符和`if-else`语句的任何区别。我的建议是你应该专注于让你的代码更具可读性、可维护性和高效性。在这种情况下，不要关心资源或内存使用情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T19:15:28.583

不，就这么简单。为什么要这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T19:11:14.370

这实际上是三元运算符与常规 if 语句的问题。两者都不会更快，所以这真的是美学/偏好的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T19:17:18.970

好吧，选择更具可读性的那个。

现在，从编译器优化的角度来看，大多数优化编译器都包含一个称为“if-conversion”或类似的优化器通道，它可以将 SIMPLE 分支转换为条件移动指令。在您的情况下，您在其中一个分支中有一个函数调用，所以这没关系。其次，在具有良好分支预测的超标量 OoO 处理器上，与简单分支相比，条件移动在大多数情况下是一种悲观化，因此实际上针对此类 CPU 的编译器很可能不会进行 if 转换。

# scheme - 方案中的词法分析器

> ID：10691121
> 
> 赞同：0
> 
> 时间：2012-05-21T19:07:34.467
> 
> 标签：scheme, racket, lexical-analysis

大家好，我在编程方案中非常新，所以我试图在方案中构建一个词法分析器，例如基本上读取一个列表，`< SUM + 34 >`输出将是这样的

```
{ is the left bracket 
SUM is an identifier
+ is the plus operator
34 is a Digit
} is the right bracket 
```

我正在使用 dr.scheme 并且该程序并没有准确地告诉我我缺少什么或提示我的错误。一切对我来说都很新鲜

这是我到目前为止所尝试的：

```
(define alist'( < SUM + 34 >))

(define (token? object)
  (and (list? object)
       (not (null? object))
       (eq? (car object) 'token)))

(define (ident-token? token)
  (type-token? token 'IDENTIFIER))
(define (digit-token? token)
  (type-token? token 'DIGIT))
(define (op-token? token)
  type-token? token 'OPERATOR)

(define (type-token? token type)
  (and(type-token? token)
      (eq? (name-token token) type)))

(define (name-token token)
  (cadr token))

(define (value-token token)
  (caddr token))

(define (spot-token)
  (cadddr token))

(define (assign-token name value spot)
  (list 'token name value spot))

(define *peek* '())

(define (check-token alist)
  (let ((token (if (null? *peek*)
                   (<token> in)
                   *peek)))
    (set! *peek* '())
    token))

(define (peek-token alist)
  (let ((token (if (null? *peek*)
                   (read-token in)
                   *peek*)))
    (set! *peek* (if token token '()))
    token))

(define (<token> alist)
  (let* (next-loc (next-spot in)) (next-char (peek-char in))
    (cond ((eof-object? next-char) #f)
          ((char-whitespace? next-char)
           (begin (check-char in)
                  (<token> in)))
          ((char-ident-initial? next-char)
           (<identifier> (list (check-char in)) next-loc in))
          (else
           (let ((next-char (check-char in)))
             (cond ((char=? #\( next-char)
                    (assign-token 'LEFT-PAREN "(" next-loc))
                   ((char=? #\) next-char)
                    (assign-token 'RIGHT-PAREN ")" next-loc))
                   ((char=? #\` next-char)
                    (assign-token 'ADD-OP "+" next-loc))
                   ((char=? #\] next-char)
                    (assign-token 'SUB-OP "-" next-loc))
                   ((char=? #\{ next-char)
                    (assign-token 'MULT-OP "*" next-loc))
                   ((char=? #\} next-char)
                    (assign-token 'DIV-OP "/" next-loc))
                   (else
                    (syntax-error next-loc next-char)))))))) 
```

请伙计们，我正在尽力而为，我没有尝试编译。我用谷歌搜索了很多东西，但我找不到什么可以帮助我……即使你有可以帮助我的教程或指南，请分享

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:36:23.567

我认为您在阅读错误消息时需要一些指导。

当我在 DrRacket 中运行您的程序时，我收到错误：

```
expand: unbound identifier in module in: token 
```

同时`token`在这个函数中是红色的：

```
(define (spot-token)  
  (cadddr token))     ; <--- 
```

这意味着编译器以前没有见过这个名字`token`。

现在，由于您没有包含函数用途的描述，我的猜测是，您忘记在参数列表中使用令牌：

```
(define (spot-token token)   
  (cadddr token)) 
```

尽早发现错误很重要。我的建议是每次编写新函数时，在开始下一个函数之前至少编写一到两次函数测试。

# eclipse - 尽量避免 Eclipse 编辑器打开同一个文件的多个实例

> ID：10691126
> 
> 赞同：0
> 
> 时间：2012-05-21T19:07:52.457
> 
> 标签：eclipse, eclipse-rcp, rcp

我使用 Eclipse 扩展点“org.eclipse.ui.editors”注册了一个自定义编辑器，如下所示。

```
<extension
     point="org.eclipse.ui.editors">
     <editor 
            class="com.xxx.designer.scxml.ui.ScxmlDiagramEditor" 
            id="com.xxx.designer.scxml.ui.ScxmlDiagramEditor"
            extensions="scdiagram"
            name="SCXML Editor">
</editor> 
```

它工作正常，这个编辑器与 .scdiagram 文件相关联。但是，每次我单击一个相同的 .scdiagram 文件时，它都会为我打开一个新实例，而不是突出显示打开的文件。对此有任何想法吗？

谢谢，

杰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T20:32:50.980

您需要做的就是让`IEditorInput`相同文件的返回为真。您可以通过比较文件的规范名称来实现这一点。不要忘记也覆盖 hashCode() 方法。[在 Java 中覆盖 equals 和 hashCode 时应该考虑哪些问题？](https://stackoverflow.com/questions/27581/overriding-equals-and-hashcode-in-java)

有关使用编辑器的更多详细信息，请参阅 Lars Vogel 的优秀教程[Eclipse Editor Plugin Tutorial](http://www.vogella.com/articles/EclipseEditors/article.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T14:51:36.600

这是我的问题最终得到解决的方法。它与[Graphiti](http://www.eclipse.org/graphiti/)相关，解决方案也与框架相关联。

由于我继承了 Graphiti 的图表编辑器，所以我需要做的就是在 plugin.xml 中设置 org.eclipse.graphiti.ui.editor.DiagramEditorMatchingStrategy 作为编辑器的匹配策略。

# javascript - jQuery语法荧光笔不起作用

> ID：10691136
> 
> 赞同：2
> 
> 时间：2012-05-21T19:09:04.863
> 
> 标签：javascript, jquery, html

HTML 代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>HTML</title>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js">

        </script>
        <script type="text/javascript" src="highlighter.js"></script>
        <link rel="stylesheet" type="text/css" href="highlighter.css"
        />
        <script>
            $(document).ready(function () {
                $("pre.htmlCode").snippet("html");
                // Finds <pre> elements with the class "htmlCode"
                // and snippet highlights the HTML code within.
                $("pre.styles").snippet("css", {
                    style: "greenlcd"
                });
                // Finds <pre> elements with the class "styles"
                // and snippet highlights the CSS code within
                // using the "greenlcd" styling.
                $("pre.js").snippet("javascript", {
                    style: "random",
                    transparent: true,
                    showNum: false
                });
                // Finds <pre> elements with the class "js"
                // and snippet highlights the JAVASCRIPT code within
                // using a random style from the selection of 39
                // with a transparent background
                // without showing line numbers.
                $("pre#dynamic").snippet("php", {
                    style: "navy",
                    clipboard: "js/ZeroClipboard.swf",
                    showNum: false
                });
                // Highlights a snippet of PHP code with the "navy" style
                // Hides line numbers
                $("pre#dynamic").click(function () {
                    $(this).snippet({
                        style: "vampire",
                        transparent: true,
                        showNum: true
                    });
                    // Changes existing snippet's style to "vampire"
                    // Changes the background to transparent
                    // Shows line numbers
                });
            });
        </script>
    </head>

    <body>
        <pre class="htmlCode">
            <h1>test</h1>
        </pre>
    </body>

</html> 
```

在这里，我正在尝试 jQuery Syntax Highlighter。出于某种原因，带有 htmlCode 类的 pre 标记没有突出显示语法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T20:04:41.087

您必须对应突出显示的 HTML 标记进行 xml 转义。否则浏览器将像任何 HTML 一样解释标签。看看我创建的[示例。](http://jsfiddle.net/HSVR8/)

`<`用`&lt;`和`>`替换所有`&gt;`

# c# - 可以在 wrappanel wpf 中通过虚拟化获得平滑滚动吗？

> ID：10691138
> 
> 赞同：2
> 
> 时间：2012-05-21T19:09:15.977
> 
> 标签：c#, wpf

我有一个使用以下链接虚拟化的包装面板：

[http://virtualwrappanel.codeplex.com/](http://virtualwrappanel.codeplex.com/)

我已经在上面实现了拖放......但是，当我向下拖动项目时，我正在使用 LineUp() 和 LineDown() 方法来向下移动换行面板。由于虚拟化，这种过渡看起来非常不稳定而且不好......在这种情况下是否可以实现平滑滚动？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T16:30:56.497

您正在虚拟化的项目很可能渲染起来非常昂贵，要么是因为复杂的可视化树，要么是因为生成它们所需的昂贵代码。尝试测试相同数量的项目，但显示非常简单，比如 a `TextBlock`with `Text="foobar"`。这应该为您顺利滚动 - 至少它对我有用。

因此，要调试您的效率问题，您可以查看 WPF 性能套件和 Visual Studio 性能分析器（或类似的第 3 方工具）。[WPF 性能套件](http://msdn.microsoft.com/en-us/library/aa969767.aspx)将缩小问题的一般范围（它是实际的渲染代码吗？还是 Dispatcher 被阻塞了？），如果恰好是问题。如果渲染是问题，降低视觉树的复杂性将解决问题。

# sql - Doctrine 2.0 NativeQuery ResultSetMapping for count(id)

> ID：10691139
> 
> 赞同：0
> 
> 时间：2012-05-21T19:09:18.170
> 
> 标签：sql, mapping, doctrine-orm

我从 NativeQuery 生成一个 SQL，这是结果 sql：

> SELECT COUNT(id) AS tot,created_at FROM property WHERE created_at BETWEEN '20120501000000' AND '20120521235959' GROUP BY YEAR(created_at),MONTH(created_at),DAY(created_at);

这是我的结果集映射：

```
$rsm = new \Doctrine\ORM\Query\ResultSetMapping;
$rsm->addEntityResult('Entity\Property', 'p');
$rsm->addFieldResult('p','count(id)','tot'); // <-- this don't work
$rsm->addFieldResult('p','created_at','created_at'); 
```

直接在mysql上运行上面的查询结果是ok的：

```
tot created_at
11  2012-05-02 11:23:25
11  2012-05-08 14:56:40
152 2012-05-16 14:43:46
5   2012-05-17 16:26:31
29  2012-05-18 14:55:33 
```

但是结果数组 tot 别名不存在！！

问题是：

**我如何为count(id)**正确设置 ResultSetMapping ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:49:03.023

我会尝试：

```
$rsm->addFieldResult('p', 'tot', 'tot'); 
```

因为您的**列已重命名**为`COUNT(id) AS tot`. 如果删除`tot`别名，您可以使用原始代码：

```
$rsm->addFieldResult('p', 'COUNT(id)', 'tot'); 
```

# http - 如何诊断和防止在 RavenDB 中使用密钥获取 http 超时

> ID：10691142
> 
> 赞同：1
> 
> 时间：2012-05-21T19:09:25.587
> 
> 标签：http, timeout, ravendb

在 RavenDB 客户端中通过键获取项目时出现超时问题

```
System.Net.WebException: The operation has timed out
Raven.Client.Connection.ServerClient.DirectGet(String serverUrl, String key) 
```

我相信这是由于在后台进行的索引 - 但如果是这种情况，那么它不应该影响按键获取，不是吗？

在执行此获取之前，我已经完成了许多插入，其中有 6 个字段被 Lucene.Net.Analysis.Standard.StandardAnalyzer 索引。这些字段最多只有大约 300 个字符。

我们在每个 httprequest 周期中使用一个会话，我认为这是正确的。但是，我们在 httprequest 中多次调用 SaveChanges，并且正在考虑仅在 httprequest 周期结束时调用 savechanges 以遵循 UnitOfWork 模式。

诊断此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T21:01:14.383

索引和请求处理线程之间没有关联。一个不能影响另一个。这是托管在不同的机器上吗？您是否正在做一些可能会影响某些事情的调试？您在 EC2 实例上吗？

# path - 在 umbracoUrlName 中使用正斜杠

> ID：10691143
> 
> 赞同：1
> 
> 时间：2012-05-21T19:09:33.907
> 
> 标签：path, directory, umbraco, slash

我正在尝试将现有的 .NET 站点转移到 Umbraco 并尝试使用 umbracoUrlName 将页面的 URL 设置为映射到其现有 URL，以便入站链接仍然有效并且不会影响 SEO。我真的宁愿避免转发，但问题是其中一些页面位于不同的文件夹中，并且 umbracoUrlName 似乎忽略了斜杠。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T20:19:56.677

你是对的，`umbracoUrlName`忽略斜杠。[您要么必须使用301 Url Tracker](http://our.umbraco.org/projects/developer-tools/301-url-tracker)之类的东西来放置重定向，要么将节点放置在其他节点内以模拟文件夹结构。

或者，您可以使用`umbracoUrlAlias`which does 接受正斜杠。这不会更改原始 url，但它确实为页面提供了一个别名，该别名也可用于访问该节点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-03-19T17:29:22.050

我知道这是一个老问题，这取决于您使用的 Umbraco 版本，但请查看 IUrlProvider 来解决您的问题 - 这篇博文包含所有详细信息：http: [//24days.in/umbraco/2014/urlprovider-和内容查找器/](http://24days.in/umbraco/2014/urlprovider-and-contentfinder/)

# combobox - 在服务器端事件启动之前等待 telrik 控件

> ID：10691148
> 
> 赞同：0
> 
> 时间：2012-05-21T19:10:23.157
> 
> 标签：combobox, telerik

我正在使用带有 EnableLoadONLoad = True 的 Telerik Combobox，即每次最终用户键入一个字母时，服务器端事件都会启动以提取该单词的记录。例如，在下拉框中，如果我输入 America，那么系统将搜索 A，然后是 AM，然后是 AME，依此类推……并提供与这些字母匹配的结果。因此，在上述情况下，系统将 ick 服务端事件 7 次。现在的问题是搜索功能需要一段时间（从 5 到 10 秒拉记录.. 超出我的控制:(）我想要的是当最终用户输入某些内容时，我想等待一秒钟看看用户是否还在键入。一秒钟后，我希望系统进行搜索。希望在一秒钟内，最终用户将键入他们需要的任何内容。现在我可以强制用户输入至少 5 个字母，依此类推，但最终用户可以使用单个字母或多个字母进行搜索。他们不想被限制没有。由于业务需要的信件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:39:21.407

默认情况下，它们的组合框上的 itemRequestTimeout 为 300，即十分之三秒。做布莱恩建议的工作，但我发现默认值通常是足够的时间才能导致回发。

此外，如果您`MarkFirstMatch="true"`为 ComboBoxes 合并，它将自动转到与文本匹配的项目（如果存在）。

[http://demos.telerik.com/aspnet-ajax/combobox/examples/populatingwithdata/autocompletesql/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/combobox/examples/populatingwithdata/autocompletesql/defaultcs.aspx)

这也应该给你一些其他的选择。

但就在回发发生之前强制用户输入 5 个字母而言，您可能需要执行 onkeyup 和 onkeydown javascript 事件来检查他们是否输入了 5 个字符，然后您可能会导致回发。
或者您可以使用 Telerik 组合框的 OnClientkeyPressing 属性进行检查。

```
 function OnClientKeyPressing(comboBox, args)
   {
       if (comboBox.get_text().length > 4) {
         //Do postback here
   }
  } 
```

我相信这样的事情会做你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T14:32:42.627

您可以指定一个以 1000 毫秒为单位的“ItemRequestTimeout”，这将告诉组合框在向服务器触发之前等待 1 秒。

# jquery - jQuery Validation - 修复错误后运行

> ID：10691149
> 
> 赞同：0
> 
> 时间：2012-05-21T19:10:27.223
> 
> 标签：jquery, jquery-validate

当我验证显示一个指示存在错误的框时，我运行了一些自定义代码。我在 invalidHandler 中运行它。

有没有办法在提交前满足所有错误时运行代码？

谢谢， - 文斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T19:11:59.473

从[文档](http://docs.jquery.com/Plugins/Validation/validate#options)中：

> **submitHandler**
> 表单有效时处理实际提交的回调。

```
$("#myForm").validate({
    submitHandler: function(form) {
        // do other stuff for a valid form
        form.submit();
    }
}) 
```

# backbone.js - 使用backbone.js 在视图中收听body click

> ID：10691150
> 
> 赞同：4
> 
> 时间：2012-05-21T19:10:42.750
> 
> 标签：backbone.js, backbone-events, backbone-views

我正在创建一个这样的模式对话框

```
window.NewPageModalView = Backbone.View.extend({

    template: _.template($('#view-template-new-page-dialog').html()),

    el: $('div#main'),

    events: {
        'click input[type=radio]': 'newPage'
    },

    newPage: function (event) {
        $(event.currentTarget).closest('form').submit();
    },

    initialize: function () { },

    render: function () {
        $(this.el).append(this.template());
        return this;
    }

}); 
```

然后我在这样的另一个视图中创建它

```
addPage: function (event) {
    event.preventDefault();
    var modal = new NewPageModalView();
    modal.render();

} 
```

这很好用，但是如果我想在点击正文时或按下转义键时关闭对话框，最好的方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T19:37:30.367

一般来说，当您使用事件哈希在主干中绑定事件时，它们被委托给视图的 el，但是您仍然可以将事件绑定到初始化方法中的其他内容（在您的情况下为主体）。

```
initialize: function() {
   $('body').bind('click', yourfunction);
 } 
```

编辑：正如@muistooshort 提到的，您需要确保也取消绑定事件。

# entity-framework - EF 4.3.1 IMigrationMetadata.Target 字符串导致“没有剩余逻辑空间来创建更多用户字符串”。编译错误

> ID：10691155
> 
> 赞同：7
> 
> 时间：2012-05-21T19:10:56.820
> 
> 标签：entity-framework

自 Entity Framework 4.3.x 版本发布以来，我们已经生成了大约 80 个迁移。每次我们生成新的迁移时，EF 都会为 IMigrationMetadata.Target 属性生成当前模型的快照。

由于每次迁移都会向我们的程序集添加约 135k 字符，因此我们开始达到临界质量。我们现在收到“没有剩余逻辑空间来创建更多用户字符串”。编译器错误。将它与预编译视图结合起来，你就会得到很多字符串。

将 EF 迁移与复杂模型一起使用的最佳长期方法是什么？

也许 add-migration 应该生成这些 w/ 资源文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T07:13:02.597

我们有同样的问题。我们还通过将生成的字符串移动到资源中来解决此问题：

```
 public sealed partial class RegionalCenterRenameClass : IMigrationMetadata
 { 
  // Skipped code

  string IMigrationMetadata.Target
  {
    get { return Targets.M201207110918331_RegionalCenterRenameClass; }
   }
 } 
```

其中 Targets - 是资源文件 (resx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T23:10:26.770

感谢您报告此事。我已将此问题添加到我们的 EF6 积压工作中。

目前，用资源查找替换字符串是我能想到的最佳解决方法。

# ios - 如何覆盖 tableView:titleForHeaderInSection: 以调整静态 UITableViews 的节标题？

> ID：10691157
> 
> 赞同：2
> 
> 时间：2012-05-21T19:10:59.083
> 
> 标签：ios, uitableview, uikit

我正在玩故事板，对于一个控制器，我设置了一个`UITableView`由两个部分组成的控制器。在这两个部分中，我都添加了几个**静态**单元格。但是，根据代码路径，我想为我的两个部分显示不同的**标题**。由于没有来源和代表，我应该如何覆盖`tableView:titleForHeaderInSection:`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T20:22:44.183

使用静态表视图，您仍然可以（并且必须）将数据源连接到 UITableViewController。关键是，如果您实现数据源方法，那么这将覆盖您在表格视图中设置的静态内容。您可以毫无问题地覆盖 titleForHeader，因为这是您想要做的。

```
-(NSString*)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    if (section == 0)
        return @"HELLO!";
    else {
        return [super tableView:tableView titleForHeaderInSection:section];
    }
} 
```

将静态表中第 0 部分的标题设置为 HELLO!，覆盖在 xib 中设置的标题。其他的则保留在 xib 中。

关键是静态表的填充方式与动态表完全相同，只是 UITableViewController 实现了所有数据源方法的自己的版本。这些方法大概会从 xib 文件中读取信息并将适当的信息发送回表视图。如果您想要静态内容，请不要实现或调用 super。如果您想要自己的内容，请使用与上述类似的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T20:06:47.730

我对你的问题有点困惑，也许我需要更多信息。你是说在情节提要中有一个视图控制器并将一个表格视图对象拖到该视图控制器上吗？

如果是这样的话，那么这个视图控制器仍然可以成为那个表视图的数据源和委托

在您的 .h 文件中：@interface VIEWCONTROLLERNAME: UIViewController < UITableViewDataSource, UITableViewDelegate>

在您的 .m 文件中，您需要为每个方法声明所需的方法：cellForRowAtIndexPath 和 numberOfRowsInSection（有关必需和可选消息，请参阅文档）以避免“不完整的实现错误”。这也是您可以覆盖 titleForHeaderInSection 的地方。

然后回到情节提要中，您可以右键单击表格视图并将数据源和委托选项拖到您的视图控制器（或在 Connections Inspector 选项卡中执行此操作）

如果这不是您所做的，请提供更多信息。

# c# - .Net HttpHandler 在安卓设备中不起作用

> ID：10691158
> 
> 赞同：2
> 
> 时间：2012-05-21T19:11:10.223
> 
> 标签：c#, android, asp.net

我创建了 ASP.Net httphandler 来计算 MP3 文件的访问次数。Httphandler 被用于 Web 应用程序以及 ios + android 应用程序。

它在 web + ios 应用程序中运行良好。如果我在三星 Galaxy S 中运行 android 应用程序，则它可以完美播放 MP3 文件，但在三星 Galaxy Ace 手机中无法正常工作。

我不知道我的 asp.net 代码有什么问题。下面是httphandler的代码。

```
public class MP3DownloadHanlder : IHttpHandler , IRequiresSessionState
  {

      public void ProcessRequest(HttpContext context)
      {
              //Here I increment number of visit by filename in request
              string filename = context.Request.QueryString["Title"] + ".mp3";
              string path = context.Server.MapPath("audio");
              string file = path + "\\" + filename;
              if (System.IO.File.Exists(file))
              {
                  FileStream fs = new FileStream(file, FileMode.Open, FileAccess.Read);
                  context.Response.Buffer = true;
                  context.Response.Clear();
                  context.Response.ClearContent();
                  context.Response.ClearHeaders();
                  context.Response.AddHeader("content-disposition", "attachment; filename=" + filename);
                  context.Response.AddHeader("content-length", fs.Length.ToString());
                  context.Response.ContentType = "audio/mpeg";
                  byte[] bytes = new byte[fs.Length];
                  int bytesToRead = (int)fs.Length;
                  int bytesRead = 0;
                  while (bytesToRead > 0)
                  {
                      int n = fs.Read(bytes, bytesRead, bytesToRead);
                      if (n == 0) break;
                      bytesRead += n;
                      bytesToRead -= n;
                  }
                  bytesToRead = bytes.Length;
                  context.Response.OutputStream.Write(bytes, 0, bytes.Length);
              }

          context.Response.End();
      }

      public bool IsReusable
      {
          get
          {
              return false;
          }
      }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T19:13:53.360

没有 的内容**处置**。`attachement`应该是[`attachment`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html#sec19.5.1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T19:21:24.557

为您的 ContentType 尝试 mime 类型“audio/mpeg3”和“audio/x-mpeg-3”。

还有“audio/mp3”和“audio/x-mp3”。我认为您使用了正确的，但它可能在设备上实施得不好。

# c# - Linq XML query with nested loop - 1

> ID：10691159
> 
> 赞同：1
> 
> 时间：2012-05-21T19:11:11.753
> 
> 标签：c#, xml, linq

In [this question](https://stackoverflow.com/questions/10488217/linq-xml-query-with-nested-loop), if I need to get "date" included in the output, what changes should be made?

When I included

```
let dt = l.Element("Date").Value 
```

It gives, "Object reference not set to an instance of an object"

```
var query = from l in doc.Descendants("L1")
            let dt = l.Element("Date").Value
            let id = l.Attribute("id").Value
            from subject in l.Descendants("Subject")
            select new
            {
                Date = dt,
                Id = id,
                SubjectName = (string)subject.Attribute("SubjectName"),
                Score = (string)subject.Attribute("Score")
            };

foreach (var result in query)
{
    Console.WriteLine(result);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:26:12.217

If `l` doesn't have an `Date` element, trying to access `l.Element("Date").Value` will incur an error. You can use a conditional:

```
var query = from l in doc.Descendants("L1")
        let dt = l.Elements("date").Any() 
                 ? l.Element("date").Value
                 : AnyDefaultValueIWantForDate
        let id = l.Attribute("id").Value
        from subject in l.Descendants("Subject")
        select new
        {
            Date = dt,
            Id = id,
            SubjectName = subject.Attribute("SubjectName").Value,
            Score = subject.Attribute("Score").Value
        }; 
```

(I also added the `.Value` in `SubjectName` and `Score`).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T19:20:40.937

Assuming `l` is not null then `l.Element("Date")` is null which would mean that one or more of your `L1` elements does not have a child `Date` element.

The fix would depend on what you want to do with missing dates. If you want to use `default(DateTime)` as a "magic" date, you could do:

```
let dt = (l.Element("Date") == null ? default(DateTime) : l.Element("Date").Value) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T19:27:45.563

Looking at your other XML, it does not, as Mr. Skeet mentioned, have anything in the `<date>` elements. You will need to explicitly handle that if you aren't planning on always having data in there.

You can do something like this:

```
let dt = l.Element("date") == null ? string.Empty : l.Element("date").Value 
```

# sql-server-2008 - 从外部文件执行 SQL 而不在 SSMS 中打开它

> ID：10691160
> 
> 赞同：4
> 
> 时间：2012-05-21T19:11:12.270
> 
> 标签：sql-server-2008, sql-server-2005

我有一个巨大的 .sql 文件（1.5 gb）。我通过在 Sql server 2008 中编写数据库脚本生成它。现在我想在另一台机器上运行脚本以使用所有数据创建相同的数据库，但是当我尝试打开它时，SSMS 会引发内存不足异常。机器有 8gb 的 ddr3 内存，所以电脑可以处理。我如何运行我的文件 copy.sql，它有 t-sql 代码来创建我的数据库而不打开它？在 SSMS 的查询窗口中是这样的：

```
 exec copy.sql 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:12:54.490

您是否尝试过 osql.exe 或 sqlcmd.exe？他们可能会处理得更好。

此外，您可以将数据导出为 bcp，这样会更容易导入，因为它太大了。

# asp.net-mvc-3 - Razor 视图中的 Telerik MVC 网格，GridCommand 未填充

> ID：10691169
> 
> 赞同：0
> 
> 时间：2012-05-21T19:11:43.437
> 
> 标签：asp.net-mvc-3, c#-4.0, razor, telerik-mvc

我在 Razor 视图中有一个 Telerik mvc 网格。我正在使用自定义服务器绑定。我的问题是，在对 GridCommand 对象属性“Page”、“PageSize”和“SortDescriptors”进行分页和排序时，没有得到正确的值。有趣的是，完全相同的代码适用于 aspx 视图。由于这是一个新视图，我开始使用“Razor”。我的看法是——

```
@(Html.Telerik().Grid((IEnumerable<Mitek.MobileImaging.AdminSite.Models.ImagingTransactionModel>)ViewData["DeficientGridView"])
   .Name("DeficientImagesGrid")
   .DataBinding(databinding => databinding.Server()
   .Select("ViewDeficientImages", "SuperAdmin", new { orgId = ViewData["OrgId"], beginDate = ViewData["BeginDate"], endDate = ViewData["EndDate"], searchString = ViewData["SearchString"] }))
   .DataKeys(keys => keys.Add(o => o.TranId))
   .EnableCustomBinding(true) 
   .BindTo((IEnumerable<Mitek.MobileImaging.AdminSite.Models.ImagingTransactionModel>)ViewData["DeficientGridView"])
   .Columns(
        columns => 
        { 
            columns.Template(
                                @<text>
                                   <a href="@Url.Action("DeficientImageDetails", "SuperAdmin", new { id = item.TranId }) ">
                                   <img alt="Deficient Image Details" src= "@Url.Content("~/Content/ImagesUI/detail_icon.gif")"  style="border:0px" /></a>   
                                 </text>
                            ).Title("Actions").Width(75);
            columns.Bound(o => o.TranId).Hidden(true);
            columns.Bound(o => o.user_email).Title("User Email").Width(250);
            columns.Bound(o => o.xml_config_name).Title("Job File").Width(200);
            columns.Bound(o => o.datetime_created).Title("Date Created").Format("{0:MM/dd/yyyy}").Width(200);
            columns.Bound(o => o.short_note).Title("Note").Width(200);
            columns.Bound(o => o.iqa_code).Title("IQA Code").Width(200);
        }).HtmlAttributes(new { style = " font-family:arial; font-size: .9em;  " })
   .Sortable()
   .Pageable(paging => paging.Position(GridPagerPosition.Bottom)
                            .Style(GridPagerStyles.NextPreviousAndNumeric)
                            .Total((int)ViewData["DeficientImagesCount"])
                            .PageSize(25))    
) 
```

控制器看起来像

```
[GridAction(GridName = "DeficientGridView")]
public ActionResult ViewDeficientImages(DeficientImagesViewModel model, GridCommand command, string button)
{
    //Some Code......;            
    GridCommand myCommand = new GridCommand() { PageSize = 25 };
} 
```

命令对象在分页或排序时永远不会有任何 command.Page、command.SortDescriptors 的值。请注意，完全相同的代码适用于 asps 页面。请帮忙。

谢谢，SDD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T04:24:22.437

你能检查它是否与`[GridAction(GridName = "DeficientGridView"]`属性和你的网格名称不同有关`.Name("DeficientImagesGrid")`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T14:33:44.530

您必须将 [GridAction(EnableCustomBinding = true, GridName = "DeficientImagesGrid")] 更改为此。我今天有同样的问题，我发现这是有效的。如果您不指定 GridName，那么您将不会获得 GridCommand。

*   当查询字符串参数为 QueueGrid-size=2&QueueGrid-page=3 时，不填充 gridCommand
*   当查询字符串参数为 size=2&page=3 时填充 gridCommand

# jquery - 尝试根据数据属性删除 div 标签

> ID：10691173
> 
> 赞同：17
> 
> 时间：2012-05-21T19:12:07.803
> 
> 标签：jquery

```
<div class="row-container" data-i="'+data[i].product_id+'">
<div class="row-container" data-i="'+data[i].product_id+'">
<div class="row-container" data-i="'+data[i].product_id+'">
<div class="row-container" data-i="'+data[i].product_id+'"> 
```

我想删除包含特定 product_id 的行容器。我知道 data('i') 检索值，但我不知道从那里去哪里。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-21T19:14:54.780

```
$('.row-container').filter(function(){
    return $(this).data('i') === "product_id"
}).remove(); 
```

`.data`允许您设置和获取除字符串（函数和对象）之外的其他变量

你也可以使用这个：

```
$('.row-container').filter('[data-i="product_id"]').remove(); 
```

或使用一个选择器：

```
$('.row-container[data-i="product_id"]').remove(); 
```

`"product_id"`（真正价值的占位符在哪里......）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-21T19:14:53.513

您可以使用`filter()`：

```
var $div = $(".row-container").filter(function() {
    return $(this).data("i") == value; // where value == product id to find
});
$div.remove(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-21T19:15:30.330

jQuery 中有一个[属性选择器](http://api.jquery.com/attribute-equals-selector/)，您可以使用它来查找您要查找的元素。

```
$('div.row-container[data-i="<value>"]'); 
```

# php - PHP - 服务器代码和 html 代码

> ID：10691177
> 
> 赞同：0
> 
> 时间：2012-05-21T19:12:35.777
> 
> 标签：php

我正在编写一个网站，我在 PHP 中看到了两种方法：

*   将 php 和 html 混合在一个 .php 文件中。

或者

*   在 .html 文件中有 html 代码，在 .php 文件中有 php 代码。

哪一个是最好的方法？

我想每个人都有自己的优点和缺点。那么，我应该选择哪一个呢？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:15:37.803

第二个选项是最好的。

想象一下，您的 php 在服务器上，而您的 html 在客户端，它们正在一起交谈...... php 应该只填写值（模型），而 html 或 javascript 应该处理所有通常称为“视图”的内容”。

这都是关于代码组织、质量管理和可维护性的。

Rgds

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T19:25:09.560

您不一定在`.html`文件中包含 html 代码。`html`可以在文件中，`.php`但业务逻辑可以与表示分离（控制器可以与视图分离）。就模式而言，这称为 MVC 模式。模型、视图和控制器。这完全取决于您的项目有多复杂，MVC 不是教条，它是一种模式，它只是随着项目复杂性的增加而使代码更易于维护和组织。总而言之，这取决于您项目的复杂性。

# django - Django QuerySet 更新性能

> ID：10691183
> 
> 赞同：3
> 
> 时间：2012-05-21T19:12:57.920
> 
> 标签：django, django-models, django-queryset

哪一个对性能更好？

我们拿一片产品。这使我们无法批量更新。

```
products = Product.objects.filter(featured=True).order_by("-modified_on")[3:]

for product in products:
  product.featured = False
  product.save() 
```

或（无效）

 ~~~~```
for product in products.iterator():
  product.update(featured=False) 
```~~  ~~我也尝试过 QuerySet 的 in 语句，如下所示。

```
Product.objects.filter(pk__in=products).update(featured=False) 
```

这条线在 SQLite 上运行良好。但是，它在 MySQL 异常之后上升。所以，我不能用那个。

> DatabaseError: (1235, "这个版本的 MySQL 还不支持 'LIMIT & IN/ALL/ANY/SOME 子查询'")

**编辑：** iterator() 方法也会导致重新评估查询。因此，这对性能不利。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:57:36.970

正如@Chris Pratt 在评论中指出的那样，第二个示例无效，因为对象没有更新方法。您的第一个示例将需要等于 results+1 的查询，因为它必须更新每个对象。如果你有 1000 种产品，那可能真的很昂贵。理想情况下，如果可能，您确实希望将其减少到更固定的费用。

这与另一个问题的情况类似：
[Django: Cannot update a query once a slice has been taken](https://stackoverflow.com/questions/4285420/django-cannot-update-a-query-once-a-slice-has-been-taken)

话虽如此，您必须至少在 2 个查询中执行此操作，但您必须对如何构建 LIMIT 有点偷偷摸摸......

**使用[Q 对象进行复杂查询](https://docs.djangoproject.com/en/1.4/topics/db/queries/#complex-lookups-with-q-objects)：**

```
# get the IDs we want to exclude
products = Product.objects.filter(featured=True).order_by("-modified_on")[:3]
# flatten them into just a list of ids
ids = products.values_list('id', flat=True)

# Now use the Q object to construct a complex query
from django.db.models import Q
# This builds a list of "AND id NOT EQUAL TO i"
limits = [~Q(id=i) for i in ids]
Product.objects.filter(featured=True, *limits).update(featured=False) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-05T03:55:11.700

在某些情况下，将 QuerySet 缓存在数组中是可以接受的

```
products = list(products)
Product.objects.filter(pk__in=products).update(featured=False) 
```

*使用values_list 进行*小优化

 *```
products_id = list(products.values_list('id', flat=True)
Product.objects.filter(pk__in=products_id).update(featured=False) 
```*~~~~

# character-encoding - 如何将 8 位字节转换为 6 位字符？

> ID：10691186
> 
> 赞同：9
> 
> 时间：2012-05-21T19:13:06.027
> 
> 标签：character-encoding

我有一个特定的要求，将字节流转换为每个字符恰好是 6 位的字符编码。

```
Here's an example:

Input: 0x50 0x11 0xa0

Character Table:

010100 T
000001 A
000110 F
100000 SPACE

Output: "TAF "

Logically I can understand how this works:

Taking 0x50 0x11 0xa0 and showing as binary:

01010000 00010001 10100000

Which is "TAF ". 
```

以编程方式执行此操作的最佳方法是什么（伪代码或 C++）。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T19:20:43.620

好吧，每 3 个字节，你就会得到四个字符。因此，一方面，如果输入不是三个字节的倍数，您需要弄清楚该怎么做。（它是否有某种填充，比如 base64？）

然后我可能会依次取每个 3 个字节。在 C# 中，它足够接近 C 的伪代码 :)

```
for (int i = 0; i < array.Length; i += 3)
{
    // Top 6 bits of byte i
    int value1 = array[i] >> 2;
    // Bottom 2 bits of byte i, top 4 bits of byte i+1
    int value2 = ((array[i] & 0x3) << 4) | (array[i + 1] >> 4);
    // Bottom 4 bits of byte i+1, top 2 bits of byte i+2
    int value3 = ((array[i + 1] & 0xf) << 2) | (array[i + 2] >> 6);
    // Bottom 6 bits of byte i+2
    int value4 = array[i + 2] & 0x3f;

    // Now use value1...value4, e.g. putting them into a char array.
    // You'll need to decode from the 6-bit number (0-63) to the character.
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T19:56:36.000

以防万一有人感兴趣 - 另一个变体，一旦出现就从流中提取 6 位数字。也就是说，即使当前读取的字节数少于 3，也可以获得结果。对于未填充的流很有用。

该代码将累加器的状态保存`a`在变量`n`中，该变量存储上次读取时累加器中剩余的位数。

```
int n = 0;
unsigned char a = 0;
unsigned char b = 0;
while (read_byte(&byte)) {
    // save (6-n) most significant bits of input byte to proper position
    // in accumulator
    a |= (b >> (n + 2)) & (077 >> n);
    store_6bit(a);
    a = 0;
    // save remaining least significant bits of input byte to proper
    // position in accumulator
    a |= (b << (4 - n)) & ((077 << (4 - n)) & 077);
    if (n == 4) {
        store_6bit(a);
        a = 0;
    }
    n = (n + 2) % 6;
} 
```

# ruby-on-rails - 在 Heroku rails 应用程序中使用代理或 Tor 隐藏 IP

> ID：10691188
> 
> 赞同：6
> 
> 时间：2012-05-21T19:13:13.297
> 
> 标签：ruby-on-rails, heroku, tor

我在一个 rake 任务中使用 Mechanize，该任务由 Heroku 上我的 ruby​​ 应用程序的调度程序插件运行。在脚本中，我正在登录一个网页，该网页直到最近脚本无法再登录时才起作用。当我开始调试时，当我在 heroku 控制台中运行脚本时，Mechanize 显示的表单字段与在本地控制台中不同。

**本地 ruby​​ 控制台**显示以下字段：

```
>> asf.fields.each do |f| puts f.name end
__VIEWSTATE
__PREVIOUSPAGE
__EVENTVALIDATION
login$field
password$field 
```

**Heroku 控制台**显示了一个未出现在 html 源代码中的附加字段：

```
>> asf.fields.each do |f| puts f.name end
__VIEWSTATE 
__PREVIOUSPAGE
__EVENTVALIDATION
login$field
password$field
captcha$txtCaptcha 
```

当我发出：

```
>> asf.click_button 
```

**更新：** 我尝试将用户代理更改为几个不同的浏览器别名，但没有成功。似乎 Heroku 的 IP 地址导致验证码被提供。是否可以通过代理服务器发出请求或使用 Tor 来防止 IP 暴露？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-28T23:54:32.987

你的问题的答案是肯定的，你可以通过tor代理。我过去做过，您将面临的问题：

1.  如果你在 heroku 上运行，你将不得不在其他地方运行 tor

2.  Tor 的抓取速度非常慢

3.  您需要设置一个可以与 tor (privoxy) 对话的代理

4.  对于任何严重的刮擦，您都需要运行多个 tors

5.  一段时间后，甚至您的 tor ip 也会被阻止。

让你觉得这是否值得麻烦。您可以为 IP 掩码代理服务付费，这可能是一种更简单的方法。

当我研究这个时，想想链接给了我一些方法：http: [//www.howtoforge.com/ultimate-security-proxy-with-tor](http://www.howtoforge.com/ultimate-security-proxy-with-tor)

# jquery - 在通知警报中添加超链接

> ID：10691190
> 
> 赞同：1
> 
> 时间：2012-05-21T19:13:18.053
> 
> 标签：jquery, jquery-plugins

我最近遇到了一个 jquery 插件的 noty，因为我对 javascript 了解不多，在将超链接添加到弹出窗口时遇到了一个问题。我尝试将 document.write 用于 javascript，但它不起作用。我希望我能在这里得到一些帮助。

[http://needim.github.com/noty/](http://needim.github.com/noty/)

我的通知：

```
<script type="text/javascript">
noty({"text":"You have a new message."})
</script> 
```

我只添加了显示消息的部分以使其更直接。我试图在谷歌上寻找信息，但找不到任何相关信息。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T20:00:47.133

只需使用

```
<a href="#">LINK</a>. 
```

它会起作用的。

例子：

```
noty({text: 'NOTIFY WITH LINK < a href="http://example.com">EXAMPLE< /a >', 
       custom: {container: $('#notycontainer')}}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T19:37:23.130

火箭是正确的。我只是在 noty 网站上正确引用了这个。

```
Hi! I'm an example text. When I grow up I want to be a <a href="#">test </a> noty message. 
```

工作正常。在单引号内必须使用双引号，反之亦然，或者您可以使用 \ 转义引号

# iphone - 为 UIImageView 手动缩放 UIImage

> ID：10691191
> 
> 赞同：1
> 
> 时间：2012-05-21T19:13:26.290
> 
> 标签：iphone, ios, uiimageview, uiimage

手动复制的最佳方法是什么

`contentMode = UIViewContentModeScaleAspectFit;`

不使用它？

我需要缩放 UIImageView （在滚动视图内）以适应纵横比。我需要知道图像的新尺寸才能在其上绘制叠加层。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T20:10:33.927

最近，我需要在 ImageView 中找到图像的框架，以在该图像上添加可触摸的视图，我是这样做的：

```
-(void)calculateScaleAndContainerFrame{
    if(!imageView || !image) return;

    CGSize imageSize = image.size;
    CGSize imageViewSize = imageView.frame.size;

    float imageRatio = imageSize.width / imageSize.height;
    float viewRatio = imageViewSize.width / imageViewSize.height;

    if(imageRatio > viewRatio){
        scale = imageSize.width / imageViewSize.width;
    }else{
        scale = imageSize.height / imageViewSize.height;
    }

    CGRect frame = CGRectZero;

    frame.size = CGSizeMake(roundf(imageSize.width / scale), roundf(imageSize.height / scale));
    frame.origin = CGPointMake((imageViewSize.width - frame.size.width) / 2.0, (imageViewSize.height - frame.size.height) / 2.0);

    [container setFrame:frame];
} 
```

我很确定您可以将其用作指南，将 imageViewSize 替换为滚动视图（或要放入图像的视图）的内容大小。

注意 1：在我的情况下，我需要将视图垂直居中，如果你不这样做，只需在我设置框架原点的行上将 y 设置为 0。如果您不想水平居中图像，则 x 也是如此。

注意 2：无论如何，这不是您可以插入项目并工作的代码，您可能必须阅读它，理解它，然后将该方法应用于您自己的项目。我现在没有时间根据您的需要对其进行修改。

注意 3：使用该代码，我设法在使用该内容模式的图像视图中完美地查看图像，因此它可以工作。

# java - 遍历Java中的所有文件

> ID：10691193
> 
> 赞同：3
> 
> 时间：2012-05-21T19:13:49.373
> 
> 标签：java, file, path, iterator, directory

我想让我的程序打印我计算机上所有文件的巨大列表。我的问题是它只打印第一个硬盘驱动器的第一个文件夹中的文件，而我希望它打印位于我计算机上的所有文件。任何想法我在这里做错了什么？谢谢。

这是我使用的代码：

主要的：

```
import java.io.File;
import java.util.ArrayList;
import java.util.Arrays;

public class Main {

    public static void main(String[] args) {
        ArrayList<File> roots = new ArrayList();
        roots.addAll(Arrays.asList(File.listRoots()));

        for (File file : roots) {
            new Searcher(file.toString().replace('\\', '/')).search();
        }
    }
} 
```

和搜索类：

```
import java.io.File;

public class Searcher {

    private String root;

    public Searcher(String root) {
        this.root = root;
    }

    public void search() {
        System.out.println(root);
        File folder = new File(root);
        File[] listOfFiles = folder.listFiles();
        for (File file : listOfFiles) {
            String path = file.getPath().replace('\\', '/');
            System.out.println(path);
            if (!path.contains(".")) {
                new Searcher(path + "/").search();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T19:19:19.780

我刚试过这个，它对我有用。我确实必须添加一项`null`检查并更改目录评估方法：

```
package test;

import java.io.File;
import java.util.ArrayList;
import java.util.Arrays;

public class Searcher {
    public static void main(String[] args) {
        ArrayList<File> roots = new ArrayList<File>();
        roots.addAll(Arrays.asList(File.listRoots()));

        for (File file : roots) {
            new Searcher(file.toString().replace('\\', '/')).search();
        }
    }

    private String root;

    public Searcher(String root) {
        this.root = root;
    }

    public void search() {
        System.out.println(root);
        File folder = new File(root);
        File[] listOfFiles = folder.listFiles();
        if(listOfFiles == null) return;  // Added condition check
        for (File file : listOfFiles) {
            String path = file.getPath().replace('\\', '/');
            System.out.println(path);
            if (file.isDirectory()) {
                new Searcher(path + "/").search();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T19:19:23.260

您应该像这样更新您的搜索方法：

```
public void search() {
        System.out.println(root);
        File folder = new File(root);
        File[] listOfFiles = folder.listFiles();
        for (File file : listOfFiles) {
            String path = file.getPath().replace('\\', '/');
            System.out.println(path);
            if (file.isDirectory()) {
                new Searcher(path + "/").search();
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T19:19:36.583

如果 Java 7 是一个选项，请查看[walkFileTree() 方法](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#walkFileTree%28java.nio.file.Path,%20java.nio.file.FileVisitor%29 "行走文件树")。它将允许您访问树中的所有文件和目录，您可以从驱动器的根目录开始。只需实现一个基本`FileVisitor`来处理每个`Path`. 您可以从[这里](http://docs.oracle.com/javase/tutorial/essential/io/walk.html)开始。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T19:20:18.003

如果您使用的是 Java SE 7，请使用新的文件 API：

[http://docs.oracle.com/javase/7/docs/api/java/nio/file/FileVisitor.html](http://docs.oracle.com/javase/7/docs/api/java/nio/file/FileVisitor.html)

[http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#walkFileTree%28java.nio.file.Path,%20java.util.Set,%20int,%20java .nio.file.FileVisitor%29](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#walkFileTree%28java.nio.file.Path,%20java.util.Set,%20int,%20java.nio.file.FileVisitor%29)

[http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#walkFileTree%28java.nio.file.Path,%20java.nio.file.FileVisitor%29](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#walkFileTree%28java.nio.file.Path,%20java.nio.file.FileVisitor%29)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T19:34:38.560

我不知道您遇到了什么错误，但我收到了 NPE，因为您没有在下一行之后检查 null。

```
File[] listOfFiles = folder.listFiles(); 
```

如下更改代码后，它似乎运行良好，我停止了它，因为我有很多文件。我假设它将在第一个根之后继续到下一个根（在我的情况下为 c:/）

```
import java.io.File; 
```

导入 java.util.ArrayList；导入 java.util.Arrays；

公共类搜索{

```
 public static void main(String[] args) {
        ArrayList<File> roots = new ArrayList();
        roots.addAll(Arrays.asList(File.listRoots()));

        for (File file : roots) {
            System.out.println(file.toString());
            new Searcher(file.toString().replace('\\', '/')).search();
        }
    }
} 
```

类搜索器{

```
private String root;

public Searcher(String root) {
    this.root = root;
}

public void search() {
    System.out.println(root);
    File folder = new File(root);
    File[] listOfFiles = folder.listFiles();
    if(listOfFiles!=null)
    {
    for (File file : listOfFiles) {
        String path = file.getPath().replace('\\', '/');
        System.out.println(path);
        if (!path.contains(".")) {
            new Searcher(path + "/").search();
        }
    }
    }
} 
```

}

# ember.js - 如何访问用于在 Ember 中创建（）对象的类的成员？

> ID：10691198
> 
> 赞同：3
> 
> 时间：2012-05-21T19:14:22.903
> 
> 标签：ember.js

我想访问用于从 EmberJS 创建对象实例的类。例如，给定下面示例中的 MyWidgetClass**实例**，我想访问该类的 myProperty 属性。

```
MyWidgetClass = Ember.View.Extend({});
MyWidgetClass.reopenClass({
  myProperty: 'hihihi'
});
console.log("The myProperty of MyWidgetClass is ", MyWidgetClass.myProperty);

myWidget = MyWidgetClass.create({});
console.log("The myProperty of the Class of myWidget is ",
    myWidget.WHAT_GOES_HERE.myProperty); 
```

我想知道在最后一行代码的**WHAT_GOES_HERE中放什么。**我试过 myWidget._super，myWidget。**原型**等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T20:24:58.050

您可以使用该`constructor`物业。这是一个 jsFiddle：http: [//jsfiddle.net/7eJ79/](http://jsfiddle.net/7eJ79/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-21T19:16:08.327

你试过了吗

`myWidget.get('myProperty');`

# debugging - 使用 Trigger.io 催化剂进行调试 + 断点

> ID：10691199
> 
> 赞同：3
> 
> 时间：2012-05-21T19:14:24.793
> 
> 标签：debugging, breakpoints, remote-debugging, trigger.io

我正在研究为移动应用程序（本机）选择 w3 框架并遇到 trigger.io

由于团队中的一些人来自非常企业/企业背景，Breakpoints + Debug 是一个关键特性。我看过催化剂视频，它看起来很酷。但是我没有看到设置断点。

您知道是否可以在 trigger.io 中设置断点 + 调试？当我的应用程序在设备上运行时，我可以远程调试 javascript 吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:56:11.510

Trigger.io Catalyst 是 Weinre 开源项目的托管版本。不幸的是，它不支持设置断点。

可以在控制台中显示日志消息并从控制台查询 DOM 和 JavaScript 命名空间，这是警报的一大步。

一种开发方法是首先在 Web 上构建用户流，以便您可以使用带有断点的 Chrome 调试工具。然后在最后添加原生功能（只能在设备/模拟器上测试）。Trigger.io 的[构建到 Web](http://trigger.io/cross-platform-application-development-blog/2012/03/12/introducing-%E2%80%98build-to-web%E2%80%99-simple-deployment-of-your-mobile-codebase-as-a-web-app/)功能支持这种开发模式：

# meteor - Meteor 多人游戏客户端不同步 - 如何调试？

> ID：10691204
> 
> 赞同：5
> 
> 时间：2012-05-21T19:14:52.170
> 
> 标签：meteor

我在 Meteor 中构建了一个简单的实时多人数学游戏，您可以在这里试用：http: [//mathplay.meteor.com](http://mathplay.meteor.com)

在本地播放时（使用不同的浏览器），一切正常。但是当我和朋友在网上玩游戏时，客户端经常不同步：一个玩家列出的问题实际上已经被另一个玩家解决了。

我的猜测是，一些应该是仅服务器的代码会在其中一个客户端上执行。有关如何调试此行为的任何建议？

以下是用户提交答案时客户端发生的情况：

```
Template.number_input.events[okcancel_events('#answertextbox')] = make_okcancel_handler({
    ok: function (text, event) {
        question = Questions.findOne({ order_number: Session.get("current_question_order_number") });
        if (question.answer == document.getElementById('answertextbox').value) {
            console.log('True');
            Questions.update(question._id, {$set: {text: question.text.substr(0, question.text.length - 1) + question.answer, player: Session.get("player_name")}});
            callGetNewQuestion();
        }
        else {
            console.log('False');
        }
        document.getElementById('answertextbox').value = "";
        document.getElementById('answertextbox').focus();
    }
}); 
```

callGetNewQuestion() 在客户端和服务器上都会触发：

```
getNewQuestion: function () {
    var nr1 = Math.round(Math.random() * 100);
    var nr2 = Math.round(Math.random() * 100);
    question_string = nr1 + " + " + nr2 + " = ?";
    question_answer = (nr1 + nr2);
    current_order_number = Questions.find({}).count() + 1;
    current_question_id = Questions.insert({ order_number: current_order_number, text: question_string, answer: question_answer });
    return Questions.findOne({_id: current_question_id});//current_question_id;
}, 
```

完整的源代码在这里供参考：[https ://github.com/tomsoderlund/MathPlay](https://github.com/tomsoderlund/MathPlay)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T15:20:47.363

Your problem lies with this:

> `callGetNewQuestion()` triggers this on both client and server

This will generate a different `_id` because of the timing difference, as well as a different question which will then get replaced with that one that the server generated. However, this might not always be the case. This makes it very easy to let things get out of sync, simply because your client is generating its own stuff.

* * *

You'll need to figure out a better approach at making sure the client generates the same data as the server. Which can be done by making sure that a random number generator is seeded the same way and thus would give the same random numbers every time. This will resolve any flickering because the values are different.

* * *

Then, for the actual bug you might *not* want to do this:

```
return Questions.findOne({_id: current_question_id}); 
```

But do this instead (only on the client, do nothing on the server):

```
Session.set('current_order', current_order_number); // ORDER! Not the _id / question_id. 
```

That way, you can put the following in a template helper:

```
return Questions.findOne({ order_number: Session.get('current_order') }); 
```

In essence, this will work in a reactive way on the Collection and not dependent on the return value.

# javascript - SCRIPT58734：由于错误 c00ce56e 无法完成操作

> ID：10691214
> 
> 赞同：0
> 
> 时间：2012-05-21T19:15:30.440
> 
> 标签：javascript, ajax, internet-explorer

当我运行一个试图将内容加载到页面上的 AJAX 脚本时，Internet Explorer (9) 不断抛出这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:20:15.287

您正在返回 IE 无法识别的 Content-Type。我会检查您尝试为 char 类型提供的文档，除此之外，如果您无权访问服务器端代码，我会与服务器管理员进行检查。

# batch-file - 创建将通过电子邮件发送特定文件大小的批处理文件

> ID：10691215
> 
> 赞同：0
> 
> 时间：2012-05-21T19:15:33.747
> 
> 标签：batch-file, task, sendmail, scheduler

我正在尝试创建一个批处理文件，该文件将通过电子邮件向我发送运行 Windows 7 的本地驱动器上特定文件的大小。该文件的大小将不断增加。我的意图是让任务计划程序每小时运行一次这个批处理文件，这样我就可以通过电子邮件获取文件大小的每小时更新。

我过去曾在批处理文件中使用过 sendEmail.exe，因此希望它也可以用于此目的。

如果有人可以在批处理文件中的命令行上提供指针来完成此任务，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:02:57.577

要提取给定文件的大小，请使用 ~z 修饰符，查看`HELP CALL`并尝试此代码

```
 @echo off
 sendmail --from me@somemail.com --to againme@domain.com --server smtp.mydomain.com --user memyself --password 1234 --subject "%1 %~z1" 
```

调用它`mailfilesize.bat`，将它保存在 PATH 中的某个位置，然后从命令行调用它

```
mailfilesize "c:\documents and settings\user1408635\Application Data\filetomonitor.dat" 
```

或从任务调度程序

```
schtasks /create /sc hourly /tn "Mail me the file size" /tr cmd /c mailfilesize.bat "c:\somefolder\filetomonitor.dat" 
```

# python - Python 中的 NSStatusItem

> ID：10691222
> 
> 赞同：0
> 
> 时间：2012-05-21T19:16:17.970
> 
> 标签：python, objective-c, cocoa, wxpython, tkinter

有什么方法可以使用 wxPython 或 Tkinter 在 python 中创建菜单栏应用程序（obj-c 等效项似乎是 NSStatusItem）？理想情况下，我想将我的程序保留在纯 python 中，所以我不想使用 PyObjC。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T21:37:24.507

根据 Robin Dunn（wxPython 的创建者）的说法，wxPython 2.9.2 支持 NSStatusItem（和相关的小部件）：[http ://wxpython-users.1045709.n5.nabble.com/Raising-a-wxpython-frame-from-a- PyObjC-NSStatusBar-td4559330.html](http://wxpython-users.1045709.n5.nabble.com/Raising-a-wxpython-frame-from-a-PyObjC-NSStatusBar-td4559330.html)

它还支持 Windows 上的任务栏/系统托盘图标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-25T00:56:29.733

请参阅：[如何在 Python 中为 OSX 制作菜单栏（系统托盘）应用程序？](https://stackoverflow.com/questions/8544853/how-to-make-an-menu-bar-system-tray-app-for-osx-in-python/8546218#8546218)

在问题的答案中，Jared 创建了一个带有[臀部](https://github.com/jaredks/rumps)的应用程序。

您还可以检查[此代码](https://gist.github.com/yeonsh/9b084059c4eb48a730a9)以仅使用 PyObjC 创建菜单栏应用程序。

# html - 我页面底部的空间

> ID：10691226
> 
> 赞同：-1
> 
> 时间：2012-05-21T19:16:26.537
> 
> 标签：html, css

> **可能重复：**
> [我的页面底部和右侧的空间](https://stackoverflow.com/questions/10685467/space-at-the-bottom-and-right-side-of-my-page)

首先，我很抱歉发布了两次，我之前的问题得到了很好的答复，但他们没有解决我的问题..所以我再次发布它希望得到更多的答案（我真的需要解决这个问题！）

实际[页面的链接](http://www.propertytest.uphero.com)

基本上，在优惠/属性 div 和页脚之间的页面底部有一个很大的空间。我知道这是为什么；我使用了相对定位并使用了 top: -256px; 将框定位在它们所在的位置。

我努力了：

将 2 个 div 与绝对定位对齐 - 这可以消除底部空间的技巧，我可以将框放在我想要的位置，但是如果我要缩小浏览器，这些框就会错位..（有没有办法解决这个问题？）

删除所有定位并将它们浮动到左/右 - 删除底部/右侧的空间，但不会进入我希望它们的位置

山姆在我之前的问题上做了[这个](http://jsfiddle.net/F9Q6T/)，这是我的问题，我可以让他们就位！

添加`overflow: hidden;`到容器 div。

我只是不知道该怎么做，所以非常感谢任何帮助！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T20:15:14.033

**编辑：**

刚刚看到您已经得到了答案。下一步是将这些盒子放入容器中。

```
<div id="offer_box_wrap"></div> 
```

风格

```
#offer_box_wrap {
width: 650px;
float: left;
margin-left: 5px;
} 
```

你必须调整它，但它应该可以工作

**结束编辑**

你相对定位你的左框，所以......

我会建议这个

不要`<li>`用于盒子

使用带有类的 div，该类可以根据需要对齐它们。

```
<div class="offer_box"></div> 
```

风格它

```
.offer_box {
width: 208px;
height: 170px;
background: url(http://www.propertytest.uphero.com/images/offers_box.png) no-repeat;
float:left;
margin: (figure out the spacing you need for 3 per row)
} 
```

在最后一个下面放一个清晰的 div

```
<div style="clear: both"></div> 
```

在这里看到它[http://jsfiddle.net/atTGa/2/](http://jsfiddle.net/atTGa/2/)

# php - 列出上传的文件

> ID：10691231
> 
> 赞同：-3
> 
> 时间：2012-05-21T19:16:48.923
> 
> 标签：php

我在服务器上上传了 som 文件。假设是 .jpg、.doc 和 .txt 的混合文件，我想在网页上列出这些文件并提供下载链接。最好只使用 php/html/jQuery。（即没有SQL） 谁能帮我怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-21T19:20:52.557

如果您有一个存储这些文件的目录，您可以这样做

```
<?php
 if ($handle = opendir('.')) {
   while (false !== ($file = readdir($handle))) {
          if ($file != "." && $file != "..") {
            $thelist .= '<li><a href="'.$file.'">'.$file.'</a></li>';
          }
       }
  closedir($handle);
  }
?>
<h1>List of files:</h1>
<ul><?php echo $thelist; ?></ul> 
```

将其保存在目录中的 php 文件中（如`index.php`），它会遍历目录并创建指向文件的链接。`opendir('.')`如果您的文件夹在其他地方，则查看当前目录，您可以将路径放在那里。

# java - 如何确定调用了哪个 Struts 动作？

> ID：10691233
> 
> 赞同：0
> 
> 时间：2012-05-21T19:17:02.007
> 
> 标签：java, struts, struts-1, struts-config

如果我的问题听起来很基本，请原谅我。我正在做一个他们使用 struts 1 的项目。我的主管告诉我，代码非常混乱。似乎正在使用 struts 1 框架和一些自创框架的组合。

当我单击按钮时，有没有办法找出正在调用的方法？我查看了 struts-config.xml 文件，但没有帮助。

有没有办法在我单击按钮后立即自动（动态）放置断点，所以我知道这是被调用的类？

任何帮助都感激不尽。

struts 配置文件：

```
<action path="/adddispatches-fsav3-02-01" name="dispatchesForm" scope="request" 
type="com.us.web.struts.action.DispatchesNassSimpleSearchAction" 
validate="false"> 
```

类中的方法（因为类有超过 5000 行） DispatchesNassSimpleSearchAction.java

![DispatchesNassSimpleSearchAction.java 方法](../Images/f80e92b55c2c09c38d9d40551c53bd0f.png)

![DispatchesNassSimpleSearchAction.java 方法](../Images/a2555c4ddda987fa29d71cf7255a7f27.png)

![DispatchesNassSimpleSearchAction.java 方法](../Images/4d8925a7fb0a34eec5fe76831fc63c0e.png)

![DispatchesNassSimpleSearchAction.java 方法](../Images/9479e376689e85f134760d234d4b0227.png)

![DispatchesNassSimpleSearchAction.java 方法](../Images/54e408f027ccc72e03b52dd00cdcb899.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T20:12:19.883

找出`Action`您的课程从哪个课程`com.us.web.struts.action.DispatchesNassSimpleSearchAction`扩展而来。

如果它`Action`直接扩展，则`execute(ActionMapping, ActionForm, HttpServletRequest, HttpServletResponse)`调用该方法。在您的实例中，您的类似乎没有扩展任何内容，因为您的文件中的标签中`DispatchAction`没有`parameter`定义任何属性。`<action />``struts-config.xml`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T20:12:07.167

它应该是 DispatchesNassSimpleSearchAction 类中的“执行”方法。尽管如果您使用自定义调度程序，struts 操作中可能有许多方法。

最好的办法是在该类的操作方法中在 Java 中设置断点（或添加日志记录）。操作的方法签名如下所示：

```
 public ActionForward someAction(ActionMapping mapping,
                               ActionForm aform,
                               HttpServletRequest request,
                               HttpServletResponse response 
```

# facebook - Facebook api - 获取相册和照片

> ID：10691235
> 
> 赞同：0
> 
> 时间：2012-05-21T19:17:10.183
> 
> 标签：facebook, facebook-graph-api

我寻找了一个简单的 asp.net mvc 应用程序示例，该应用程序仅通过 facebook api 显示专辑和它们包含的图片。不幸的是，我没有找到一个有价值的例子。

我访问了 facebook 并阅读了面向开发人员的公会，但实际上我什至不明白我应该使用哪种 api：Javascript SDK、Open Graph API 或只是 Graph API。我已经在[https://developers.facebook.com/apps](https://developers.facebook.com/apps)创建了我的测试应用程序。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T21:13:47.637

看看 Facebook C# SDK - 他们在他们的网站上有一个 Web 应用程序的示例：[Getting Started with the Facebook C# SDK for ASP.NET](http://csharpsdk.org/docs/web/getting-started)

# silverlight - 如何使用 Silverlight 制作弯曲动画

> ID：10691237
> 
> 赞同：0
> 
> 时间：2012-05-21T19:17:18.113
> 
> 标签：silverlight, animation, effect

知道如何制作像下面链接中使用的动画吗？我想在silverlight上制作带有动画的纸张效果，但不知道该怎么做。我首先想到的是通过一些像 3dsmax 这样的 3d 处理程序制作 gif 或视频，但这是一个技巧而不是解决方案 :) 或者像素着色器效果，但我认为这是一种复杂的方式。

[http://www.templatemonster.com/silverlight-templates/31855.html](http://www.templatemonster.com/silverlight-templates/31855.html)

谢谢。

# java - Java 静态与堆栈与线程

> ID：10691247
> 
> 赞同：2
> 
> 时间：2012-05-21T19:18:18.880
> 
> 标签：java, memory-management, static, stack, shared-memory

据我所知，所有静态变量和静态方法都将继续进行静态，并且在方法中声明的所有方法、局部变量和引用变量都将继续进行堆栈，但是静态方法中的局部变量和引用变量呢？我猜它们将被分配到堆栈上，但我不确定它是如何工作的。

例如：

```
 public static void A(){
      int x = 3;
      Point p = new Point();
 } 
```

另外我猜所有线程共享静态以及共享堆，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:20:12.307

您可以将局部变量视为始终分配在执行线程的堆栈上。我猜 JIT 编译器可以将它们优化为寄存器，但在语义上它们与堆栈分配的变量没有区别。它们的范围和生命周期对于函数的每次调用都是私有的。

您还询问静态变量（类变量）和堆。类变量在线程之间共享，因为无论哪个线程正在执行，对类变量的引用都引用同一个变量。对于驻留在堆上的对象也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T19:54:14.283

我认为没有所谓的静态内存区。如果它是原始类型变量，它将在 Stack 中分配，如果它是引用类型，则对象本身将在 Heap 中分配，但引用对象所在地址的变量将在 Stack 中分配。但是静态变量唯一不同的是它们将首先被初始化并且由JVM完成，因此它们将首先在堆栈中分配，然后再分配任何其他变量。

您可以在此处找到更多信息： [java 中的静态分配 - 堆、堆栈和永久代](https://stackoverflow.com/questions/3849634/static-allocation-in-java-heap-stack-and-permanent-generation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T19:24:35.040

每个定义都放在当前上下文的堆栈中。本质上，每次你拥有一个新的上下文都会被压入`{`堆栈，当你拥有`}`. 然后在给定上下文中声明的所有变量都被添加到堆栈顶部的当前上下文中。弹出上下文时，包含的所有定义都将被遗忘。

这就是为什么它有效：

```
public void method() {
    {
        int x = 0;
    }

    // x isn't defined here

    {
        int x = 0;  // This doesn't conflict with the previous declaration of x because we just created a new context and the other one was popped before.
    }
} 
```

# php - php ClassName::staticFunction()->publicFunction() 这是干什么的？

> ID：10691248
> 
> 赞同：1
> 
> 时间：2012-05-21T19:18:22.370
> 
> 标签：php

我正在阅读 php 设计模式，我看到了这段代码：

```
<?php
require_once("DB.php");

class DatabaseConnection
{
  public static function get()
  {
    static $db = null;
    if ( $db == null )
      $db = new DatabaseConnection();
    return $db;
  }

  private $_handle = null;

  private function __construct()
  {
    $dsn = 'mysql://root:password@localhost/photos';
    $this->_handle =& DB::Connect( $dsn, array() );
  }

  public function handle()
  {
    return $this->_handle;
  }
}

print( "Handle = ".DatabaseConnection::get()->handle()."\n" );
print( "Handle = ".DatabaseConnection::get()->handle()."\n" );
?> 
```

除了最后两个打印语句外，我都理解。我一直在搞乱它，但我不明白静态函数以某种方式调用公共非静态函数。

我注意到我可以这样做：

```
DatabaseConnection::get()->get()->get()->handle(); 
```

但我不能这样：

```
DatabaseConnection::get()->handle()->get(); 
```

我只是不明白这是在做什么，除了调用 get 函数然后调用句柄函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T19:32:46.110

这是有效的，因为静态函数返回一个新对象。这种类型的构造通常被称为单例，因为它试图强制只有一个实例`DatabaseConnection`可用。

`new DatabaseConnection()`请注意，构造函数是私有的，因此除非您已经在类中，否则您不能显式调用。使用 Singleton 的解决方案将具有一个属性，最初为 null，然后在对象实例化时将其设置为非 null 值。'getInstance'（或`get`在这种情况下）方法只会在属性为 null 时返回一个新对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T19:30:04.257

`DatabaseConnection::get()`创建一个实例`DatabaseConnection`并返回它。

所以...

```
DatabaseConnection::get()->handle(); 
```

...也可以写成如下...

```
$db = DatabaseConnection::get();
$db->handle(); 
```

# django - 需要 Django 中间件登录

> ID：10691251
> 
> 赞同：1
> 
> 时间：2012-05-21T19:18:28.927
> 
> 标签：django, django-middleware

我正在尝试根据[此处](http://onecreativeblog.com/post/59051248/django-login-required-middleware)找到的信息实施站点范围的登录限制：

我已经创建了`login_required_middleware.py`：

```
/home/user/projects/test/test/ 
```

我已将以下内容添加到我的 MIDDLEWARE_CLASSES 中`settings.py`

```
'test.LoginRequiredMiddleware', 
```

当我在浏览器中刷新时，我收到错误：

```
A server error occurred.  Please contact the administrator. 
```

我接下来要去哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T14:18:50.857

发生这种情况是因为它没有找到您的中间件。确保您的中间件位于项目的 python 路径中。

例如，如果你的中间件名称是`login_required_middleware.py` 你应该把它放在 manage.py 目录或任何子目录中。

然后在 settings.py 中`MIDDLEWARE_CLASSES`你应该这样称呼它

```
'login_required_middleware.LoginRequiredMiddleware' 
```

# jquery - 在项目悬停时等待 3 秒然后淡入淡出到 0.2 所有项目都没有这个

> ID：10691253
> 
> 赞同：1
> 
> 时间：2012-05-21T19:18:34.803
> 
> 标签：jquery

我是 jQuery 新手，我需要做到这一点：

在项目悬停时等待 3 秒，然后`fadeTo(0.2`）除`this`（悬停的项目）之外的所有项目，鼠标离开`fadeTo(1)`所有项目。

我把我的代码放在这里：http: [//jsfiddle.net/f7DJa/](http://jsfiddle.net/f7DJa/) 但它没有3秒的等待，也不是很顺利。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T19:24:20.980

```
var items = $('.item', '.loop'); //find all items within loop

items.on({
    mouseenter: function() {
        items.not(this).stop(true, true).delay(3000).fadeTo('slow', 0.2);
    },
    mouseleave: function() {
        items.not(this).fadeTo('slow', 1);
    }
}); 
```

[小提琴](http://jsfiddle.net/f7DJa/9/)

或者只是为了好玩：

```
var items = $('.item', '.loop');
items.on('mouseenter mouseleave', function(e) {
    var state = e.originalEvent.type==='mouseout'?false:true;
    items.not(this).stop(true, true).delay(state?3000:0).fadeTo('slow', state?0.2:1);
}); 
```

[小提琴](http://jsfiddle.net/f7DJa/11/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T19:23:32.650

试试这个：

```
var timer = null;
$('.item').hover(function() {
    var $el = $(this).siblings();
    clearTimeout(timer);
    timer = setTimeout(function() {
        $el.stop(true, true).fadeTo('fast', 0.2);
    }, 3000);
}, function() {
    clearTimeout(timer);
    $(".item").stop(true, true).fadeTo('slow', 1);
}); 
```

[**示例小提琴**](http://jsfiddle.net/f7DJa/6/)

三秒钟的等待似乎是一个奇怪的要求。大多数用户不会等待将鼠标悬停在一个元素上 3 秒钟——尤其是在没有任何线索的情况下，如果他们这样做会发生一些事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T19:27:59.967

您可以使用以下代码实现此目的

```
$('.item').hover(function(){
                $('.item').stop(true,true).not(this).delay(3000).fadeTo('fast',0.5)

         }, function(){ 
                $('.item').stop(true,true).fadeTo('slow', 1);
         }); 
```

[工作演示](http://jsfiddle.net/joycse06/f7DJa/8/)

# php - 将数据库中的一系列图像输出到变量中？

> ID：10691254
> 
> 赞同：0
> 
> 时间：2012-05-21T19:18:46.443
> 
> 标签：php, while-loop, mysqli

我的数据库中有许多图像，它们都对应于相同的项目 ID。

我希望它们在浏览器中彼此相邻显示。

但以下代码仅输出最新图像，而不是全部：

```
//get all the images in this project and add them to the content variable for output

                if (!empty($FormProjectID)) {

                    $DBQuery3 = mysqli_query($dblink, "SELECT * FROM images WHERE project_id = '$FormProjectID'");

                    if (mysqli_num_rows($DBQuery3) < 1) {
                        $content = '
                            <p>This project is empty. <a href="index.php?page=upload&id='.$FormProjectID.'">Upload</a> some files to get started.</p>
                        ';
                    } else {

                        while($row = mysqli_fetch_array($DBQuery3)) {
                            $DBImageID = $row['image_id'];
                            $DBProjectID = $row['project_id'];
                            $DBImageName = $row['image_name'];
                            $DBImageDescription = $row['image_description'];
                            $DBDateCreated = $row['date_created'];
                            $DBLinkToFile = $row['link_to_file'];
                            $DBGivenName = $row['given_name'];

                            //if the image was given a name by the user, display it
                            //otherwise display the generated name

                            if (strlen($DBGivenName) > 1) {
                                $FileName = $DBGivenName;
                            } else {
                                $FileName = $DBImageName;
                            }

                            $content = '
                                <div class="image">
                                <a href="index.php?page=image&id='.$DBImageID.'"><img src="'.$DBLinkToFile.'" alt="'.$FileName.'" title="'.$FileName.'"/></a>
                                </div>
                            ';
                    }
                } 
```

如何获取所有图像，以便最终 html 看起来像这样：

```
<div class="image">
                                <a href="index.php?page=image&id='.$DBImageID.'"><img src="'.$DBLinkToFile.'" alt="'.$FileName.'" title="'.$FileName.'"/></a>
                                </div>
<div class="image">
                                <a href="index.php?page=image&id='.$DBImageID.'"><img src="'.$DBLinkToFile.'" alt="'.$FileName.'" title="'.$FileName.'"/></a>
                                </div>
<div class="image">
                                <a href="index.php?page=image&id='.$DBImageID.'"><img src="'.$DBLinkToFile.'" alt="'.$FileName.'" title="'.$FileName.'"/></a>
                                </div> 
```

稍后在我的 html 页面中，我有：

```
<?php echo $content; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T19:23:25.957

更改`$content = '`为`$content .= '`

[PHP 字符串运算符](http://php.net/manual/en/language.operators.string.php)

注意： `$content`在 while 循环之前将变量设置为空字符串或 null

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T19:24:51.777

您正在寻找的是字符串连接（请参阅[字符串运算符](http://php.net/manual/en/language.operators.string.php)）

要解决您的问题，您需要首先初始化一个空字符串，在您的 while 循环之前执行此操作

```
} else {
    $content = '';
    while($row = mysqli_fetch_array($DBQuery3)) { 
```

然后使用连接运算符`.`附加每个图像

```
 $content .= '
        <div class="image">
        <a href="index.php?page=image&id='.$DBImageID.'"><img src="'.$DBLinkToFile.'" alt="'.$FileName.'" title="'.$FileName.'"/></a>
        </div>
    '; 
```

# python - ttk Treeview selection_set 不能接受空格

> ID：10691257
> 
> 赞同：4
> 
> 时间：2012-05-21T19:18:53.493
> 
> 标签：python, treeview, ttk

我正在 python 中使用 tkk 构建一个 gui，但我遇到了`Treeview`命令问题`selection_set()`。我试图在我的程序启动时使用它来设置默认选择，但它似乎不能接受带有空格的字符串。

```
tree.selection_set("Sunset Grill") 
```

原因：

```
return self.tk.call(self._w, "selection", selop, items)
_tkinter.TclError: Item Sunset not found 
```

任何人都可以提出任何建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T19:56:41.043

您可以尝试以下方法：

```
tree.selection_set('"Sunset Grill"') 
```

我猜测这是基于代码`ttk.py`和我对 Tcl 的有限理解。对调用的`tree.selection_set()`调用`self.selection("set", items)`，后者又调用`self.tk.call(self._w, "selection", selop, items)`where `selop`is`'set'`和 items 是最初传递给的字符串`selection_set()`。

我不确定在`self.tk.call()`将参数传递给 Tcl 之前是否对参数进行了任何按摩，因为这是`_tkinter.c module`对`;)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-18T09:12:07.130

尝试`tree.selection_set(["Sunset Grill"])`

# load-testing - 使用研磨机进行容量测试

> ID：10691258
> 
> 赞同：1
> 
> 时间：2012-05-21T19:18:54.697
> 
> 标签：load-testing, grinder

我怎样才能告诉磨床使用越来越多的螺纹，直到达到负载不可接受的程度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:01:22.357

您可以随着时间的推移增加线程，以便随着测试的进行，负载会增加。见[http://grinder.sourceforge.net/g3/script-gallery.html#threadrampup.py](http://grinder.sourceforge.net/g3/script-gallery.html#threadrampup.py)

由您决定负载水平在什么时候是不可接受的。Grinder Analyzer 可能对此有所帮助。

[http://track.sourceforge.net/](http://track.sourceforge.net/)

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:59:57.107

与 Jmeter 相比，Grinder 之类的工具允许编码脚本的优势之一是，当您“加速”时，您可以轮询响应时间并不断增加，直到响应时间达到阈值。其他商业工具具有此功能，即“在响应时间大于 8 秒之前应用负载”。

# android - 在 AsyncTask 中获取用户位置

> ID：10691260
> 
> 赞同：-1
> 
> 时间：2012-05-21T19:19:00.067
> 
> 标签：android, maps, android-asynctask, userlocation

> **可能重复：**
> [如何使用 AsyncTask 获取位置](https://stackoverflow.com/questions/5676653/how-to-get-location-using-asynctask)

我尝试了两天在 asyncTask 中获取用户位置，但我做不到。我搜索了所有谷歌，但我找不到任何可以提供帮助的东西。谁能帮忙？如果他有代码或者他知道如何实现这个东西。谢谢各位！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T21:20:36.057

获取位置不需要 asyncTask 。您要求通过将来调用的侦听器获取位置事件，仅此而已。无论如何，调用是异步的。

# css - IE不会识别不重复？

> ID：10691263
> 
> 赞同：0
> 
> 时间：2012-05-21T19:19:06.973
> 
> 标签：css, internet-explorer, fault

好吧，[我有一个网站](http://pigymunk.co.uk)，首页一直重复着这张图片。在 Chrome 上，只重复一次，就像我想要的那样。

```
body {
    color: #999999;
    background-color: #490000;
    background:url('http://pigymunk.co.uk/bgasdf2.png') fixed, url('http://pigymunk.co.uk/bgasdf.png') fixed;
    background-repeat: no-repeat, repeat;
    background-position: left top, left top;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T19:23:27.213

你有

```
background-repeat: no-repeat, repeat; 
```

您只能指定一个`no-repeat` *或* `repeat`- 不能同时指定，例如

```
background-repeat: no-repeat; 
```

Chrome 支持 CSS3 语法，但许多浏览器（例如 IE）认为这是无效的，因为它不支持它。（记住 CSS2 是标准的，CSS3 只是部分支持）

**更新：** 要创建分层背景，您需要使用*图层*惊喜 :)。

```
body {
    color: #999999;
    background-color: #490000;
    background: url('http://pigymunk.co.uk/bgasdf.png');
    background-repeat: repeat;
    background-position: left top;
}

#logo {
    height: 200px;
    width: 220px;
    background: url('http://pigymunk.co.uk/bgasdf2.png') no-repeat top left;
    position: absolute;
    top: 0px; left: 0px;
} 
```

HTML：

```
<body>
<div id="logo"></div>
... 
```

或者更好的是，不要为您的徽标使用背景图像，因为当背景图像关闭时（例如打印），它不会出现。将图像裁剪为徽标的正确尺寸并将其放入 html

```
<body>
<div id="logo"><img src="http://pigymunk.co.uk/bgasdf2.png" alt="Piggymunk logo" /></div>

... 
```

jsfiddle 示例：http: [//jsfiddle.net/ytL2w/](http://jsfiddle.net/ytL2w/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T19:23:27.440

试试这个：

```
body {
color: #999999;
background-color: #490000;
background-image:url('http://pigymunk.co.uk/bgasdf2.png');
background-position: fixed;
background-repeat: no-repeat;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T19:29:35.243

这对我来说在 IE9 中运行良好：

```
body {
    color: #999999;
    background-color: #490000;
    background: url('http://pigymunk.co.uk/bgasdf2.png') no-repeat fixed left top, 
    url('http://pigymunk.co.uk/bgasdf.png') repeat fixed left top;
} 
```

# google-apps-script - 如何使用 Google 电子表格中的 Google 脚本从相邻单元格中获取值？

> ID：10691266
> 
> 赞同：11
> 
> 时间：2012-05-21T19:19:36.373
> 
> 标签：google-apps-script, google-sheets, custom-function

如果之前有人问过这个问题，我深表歉意，但我已经找了一个例子，不幸的是我找不到答案，因此我在这里问。

如果我在 Google 电子表格中有自定义函数，如果内容是动态生成的，我如何获取单元格的值。当它是一个固定值时我可以得到这个值，但当它是动态的时候就不行。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-21T19:50:04.120

这是获取相邻单元格值的示例，无论它是动态的（使用函数创建还是平面值）

```
function getAdjacentValue() {
  var range = SpreadsheetApp.getActiveRange();
  var col = range.getColumn();
  var row = range.getRow();
  var range2 = SpreadsheetApp.getActiveSheet().getRange(row,col+1);
  return range2.getValue();
} 
```

# python - 不考虑子包中的文件

> ID：10691268
> 
> 赞同：1
> 
> 时间：2012-05-21T19:19:37.133
> 
> 标签：python, py2exe, distutils, setup.py

我正在尝试从我的项目中创建一个 .exe，但是 py2exe 似乎失败了，因为我添加了一个包含外部库的 lib 子包。

这是我的项目的设置方式：

```
C:.
¦   LICENSE
¦   README.markdown
¦   requirements.txt
¦   run.sh
¦   setup.py
¦   TODO
¦
+---data
¦   +---input
¦   +---output
+---doc
¦
+---facemovie
¦   ¦   Eye.py
¦   ¦   Face.py
¦   ¦   Facemovie.py
¦   ¦   Facemoviefier.py
¦   ¦   FaceParams.py
¦   ¦   Guy.py
¦   ¦   training_types.py
¦   ¦   __init__.py
¦   ¦
¦   +---lib
¦           exif.py
¦           __init__.py
¦
+---test
        context.py
        exif_test.py
        face_script.py
        test_script.py
        __init__.py 
```

我不想将测试包、doc 和 data 文件夹包含在我的 exe 中。我的可执行文件的根目录应该是 facemovie 包。

我正在尝试通过我的 setup.py 文件创建可执行文件，该文件如下：

```
from distutils.core import setup
import py2exe, sys, os
import facemovie

sys.argv.append('py2exe')

setup(
    name = "Facemovie",
    url = "https://github.com/jlengrand/FaceMovie",
    packages=['facemovie', 'facemovie.lib'],
    options = {'py2exe': {'bundle_files': 1, 'includes': ['numpy', 'facemovie.lib.exif'] } },
    console=['facemovie/Facemoviefier.py'],
    zipfile = None,
) 
```

如您所见，我的应用程序的主入口文件是 Facemovifier.py。在我添加 lib 子包之前，一切都运行良好。

当我运行 py2exe 命令时，这是输出的一部分：

```
running install
running build
running build_py
copying facemovie\Eye.py -> build\lib\facemovie
copying facemovie\Face.py -> build\lib\facemovie
copying facemovie\Facemovie.py -> build\lib\facemovie
copying facemovie\Facemoviefier.py -> build\lib\facemovie
copying facemovie\FaceParams.py -> build\lib\facemovie
copying facemovie\Guy.py -> build\lib\facemovie
copying facemovie\training_types.py -> build\lib\facemovie
copying facemovie\__init__.py -> build\lib\facemovie
copying facemovie\lib\exif.py -> build\lib\facemovie\lib
copying facemovie\lib\__init__.py -> build\lib\facemovie\lib
running install_lib
running install_egg_info
Removing C:\Python27\Lib\site-packages\Facemovie-0.4-py2.7.egg-info
Writing C:\Python27\Lib\site-packages\Facemovie-0.4-py2.7.egg-info
running py2exe
.......
Adding python27.dll as resource to C:\Users\jll\perso\workspace\FaceMovie\dist\Facemoviefier.exe
The following modules appear to be missing
['Carbon', 'Carbon.Files', 'Numeric', 'Pyrex.Compiler.Main', '__svn_version__', '_curses', '_scproxy', 'configparser', ...,  'lib.exif'] 
```

如您所见，lib/exif 文件实际上是复制的，但之后找不到。

当我尝试运行可执行文件时，输出如下：

```
C:\Users\jll\perso\workspace\FaceMovie\dist>Facemoviefier.
Traceback (most recent call last):
  File "Facemoviefier.py", line 12, in <module>
  File "zipextimporter.pyc", line 82, in load_module
  File "Facemovie.pyc", line 10, in <module>
ImportError: No module named lib.exif 
```

这是导致错误的 Facemovie.py 行：

```
import lib.exif as exif 
```

最近几天我尝试了各种方法并阅读了很多文档，但始终无法理解问题的根源。我有需要的**init** .py 文件，我的 Python 代码运行没有任何问题。

我真的很感激任何提示。

谢谢 ！

**编辑 ：**

终于解决了问题。@mata 有正确的解决方案（尽管我在此处发布之前已经尝试过这些行）。

实际问题来自于 py2exe 通过将我的 py 文件复制到

```
C:\Python27\Lib\site-packages 
```

并且显然使用它们来创建exe。在创建期间，它们被编译为 .pyc。

可执行文件的进一步创建**跳过了编译，因为 site-packages 文件夹已经包含 .pyc 文件**。

在构建之前，我找到了使用 ant 目标删除这些文件的临时解决方案，但我想知道这是否是好的做法。

**在我达到稳定状态之前，py2exe 不应该避免将任何内容复制到站点包中吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T19:28:41.623

代替：

```
import lib.exif as exif 
```

尝试：

```
import facemovie.lib.exif as exif
# or
from facemovie.lib import exif 
```

# crystal-reports-2008 - 在报告中绕过用户名和密码

> ID：10691269
> 
> 赞同：0
> 
> 时间：2012-05-21T19:19:38.807
> 
> 标签：crystal-reports-2008

我在 VB 2008 中为报表创建了一个软件，使用水晶报表 2008。该软件是一个网络应用程序，当我尝试从客户端计算机访问报告时，它会询问用户名和密码；但在服务器上没有任何请求。我使用了 ODBC 连接。因此，我想知道如何解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:29:07.133

如果您的客户端应用程序和服务器应用程序位于不同的网络上，那么您需要检查客户端计算机/用户访问报告路径的权限

# haml - HAML 中的车把挡块帮手搞砸了

> ID：10691271
> 
> 赞同：6
> 
> 时间：2012-05-21T19:19:52.450
> 
> 标签：haml, handlebars.js

我需要在元素的属性中使用一些把手块助手。我怎样才能得到

```
.some.class{:class => "{{if property}} otherClass {{/if}}"} 
```

正确解析？这是编译后的输出：

```
<div class='class otherClass property}} some {{/if}} {{if'></div> 
```

我尝试转义每个非单词字符，尝试单引号并调整间距，但似乎没有任何解决方法。我希望找到一个比仅使用 :plain 关键字更优雅的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T19:22:49.083

我发现您需要在 {{}} 之前添加一些字符才能让 Haml 接受它。例如：

```
%div.some.class{:class => "a{{foo}}"} 
```

不知道，但适合我的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-15T06:44:22.073

实际上，该技巧不适用于任何适度复杂的车把表达式。

最后我通过在haml中使用字符串文字解决了这个问题。因此，在问题中显示的示例中。需要下面的haml，记得关闭你的标签，也就是最后一行。

```
\ <div class='class {{if property}} otherClass {{/if}} some '>
-# Normal haml goes here and must not start at the same indent as the above literal
\ </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-29T08:30:32.410

将所有类移入类属性，而不是同时使用类速记点表示法和类属性。

```
.col-md-12.card{ class: "{{toLowerCase level_name}}-master-card" } 
```

变成

```
%div{ class: "col-md-12 card {{toLowerCase level_name}}-master-card" } 
```

HAML 4.0.7

# objective-c - UIView drawRect黑色窗口

> ID：10691274
> 
> 赞同：0
> 
> 时间：2012-05-21T19:19:56.897
> 
> 标签：objective-c, ios, drawrect, core-text

这是我的 drawRect 方法。

```
- (void)drawRect:(CGRect)rect
{
[super drawRect:rect];
CGContextRef context = UIGraphicsGetCurrentContext();

CGMutablePathRef path = CGPathCreateMutable(); //1
CGPathAddRect(path, NULL, self.bounds );

NSAttributedString* attString = [[[NSAttributedString alloc]
    initWithString:@"Hello core text world!"] autorelease]; //2

CTFramesetterRef framesetter =
    CTFramesetterCreateWithAttributedString((CFAttributedStringRef)attString); //3
CTFrameRef frame =
    CTFramesetterCreateFrame(framesetter,
        CFRangeMake(0, [attString length]), path, NULL);

CTFrameDraw(frame, context); //4

CFRelease(frame); //5
CFRelease(path);
CFRelease(framesetter);
} 
```

一旦我在我的视图控制器中加载这个视图，窗口就会变黑。如果我评论 drawRect 方法，一切都会好起来的。错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:56:33.627

我解决了这个问题，在里面创建了一个带有我的自定义 uiview 的 viewController。不是我想要的，但它确实有效..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T21:42:13.717

尝试将背景颜色设置为透明

```
 viewName.backgroundColor = [UIColor clearColor]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-02T19:06:06.413

我遇到过同样的问题。试图画简单的圆圈。创建了一个简单的`UIView`子类，覆盖`drawRect`并总是在圆圈后面呈现一个黑色方块。

```
self.backgroundColor = [UIColor clearColor]; 
```

在init中修复它！

# javascript - 使用子元素拖动父元素

> ID：10691281
> 
> 赞同：8
> 
> 时间：2012-05-21T19:20:32.253
> 
> 标签：javascript, draggable

我想制作类似导航栏的东西，它可以移动整个元素，而不允许拖动父整个元素上的任何地方来控制拖动。例如：

```
<div class="undraggable">
    <div class="draggable"></div>
    content
</div> 
```

*在标题栏上拖动会拖动它所包含的整个窗口，但在窗口容器上的其他位置拖动不会拖动窗口。*

我尝试使用[dragresize](http://www.twinhelix.com/javascript/dragresize/demo/)但我不能用他的代码只制作可拖动（不想调整大小）的对象。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-04T11:38:29.640

我一直在寻找类似的东西，但是在 jquery ui 中，因为我已经在我的项目中使用它，所以如果你已经在使用 JQUERY UI，你可以识别你想要拖动的句柄。这是一个工作示例：http: [//jsfiddle.net/VPMFs/](http://jsfiddle.net/VPMFs/)

```
<style>
.undraggable{height:500px;width:500px;background:blue;}
.draggable{height:100px;width:100px;background:white;}
</style>
<div class="undraggable">
<div class="draggable">drag me!</div>
</div>

<script>
$('.undraggable').draggable({handle: '.draggable'});
</script> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-21T19:24:39.723

1.  在拖动控制器上注册 mousedown 处理程序（例如窗口的标题栏）。
2.  当您拖动时，更新不同元素的位置（例如窗口包装）。

我在这里有一个例子：http:
[//phrogz.net/js/PhrogzWerkz/WerkWin.html](http://phrogz.net/js/PhrogzWerkz/WerkWin.html)

*如果您需要它与特定库（如 jQuery UI 库）一起使用，请编辑您的问题并说出来。*

## 更简单的演示：http: [//jsfiddle.net/VCQuN/1/](http://jsfiddle.net/VCQuN/1/)

```
<div class="window">
  <div class="titlebar">Hello, World!</div>
  <div class="content">
    <p>Window <b>Content!</b></p>
  </div>
</div>​ 
```

```
// For each item with a `window` class…
var windows = document.querySelectorAll('.window');
[].forEach.call(windows,function(win){

  // …find the title bar inside it and do something onmousedown
  var title = win.querySelector('.titlebar');
  title.addEventListener('mousedown',function(evt){

    // Record where the window started
    var real = window.getComputedStyle(win),
        winX = parseFloat(real.left),
        winY = parseFloat(real.top);

    // Record where the mouse started
    var mX = evt.clientX,
        mY = evt.clientY;

    // When moving anywhere on the page, drag the window
    // …until the mouse button comes up
    document.body.addEventListener('mousemove',drag,false);
    document.body.addEventListener('mouseup',function(){
      document.body.removeEventListener('mousemove',drag,false);
    },false);

    // Every time the mouse moves, we do the following 
    function drag(evt){
      // Add difference between where the mouse is now
      // versus where it was last to the original positions
      win.style.left = winX + evt.clientX-mX + 'px';
      win.style.top  = winY + evt.clientY-mY + 'px';
    };
  },false);
});
​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-07-17T19:51:07.253

在父元素中具有属性 draggable="true"，在所有子元素中具有属性 draggable="false"。现在，如果您拖动任何子元素或父元素，您的拖动将正常工作。如果您不在图像标签中添加 draggable="false"，您的拖放功能将无法正常工作。 [![使用嵌套元素拖放](../Images/b330a0294864480e7eba0b6d86c0f062.png)](https://i.stack.imgur.com/qUA4R.png)

```
<span className="dragelement cp"  draggable={true} 
onDragStart={(event)=>drag(event)} onDragEnd={(event)=>dragEnd(event)} 
id= {'drag'+el.type+index+idx}>
    <div>{m.a}</div>  
    {m.img && <img draggable={false} src={m.img} height="70px" width="100px" />  } 
</span> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T19:27:36.600

使用 jQuery UI 可拖动功能：

[http://jqueryui.com/demos/draggable/](http://jqueryui.com/demos/draggable/)

您可以在此处构建 jQuery UI 的自定义下载，以仅获取您需要的组件（可拖动及其依赖项）：http: [//jqueryui.com/download](http://jqueryui.com/download)。

它有很多配置选项 - 你的措辞有点模棱两可，但我认为你可能想要句柄选项：http: [//jqueryui.com/demos/draggable/#handle](http://jqueryui.com/demos/draggable/#handle)

# cocoa - 如何将 NSTextField 的值绑定到 NSObjectController 的内容而不会出错？

> ID：10691287
> 
> 赞同：4
> 
> 时间：2012-05-21T19:20:50.703
> 
> 标签：cocoa, core-data, xcode4, interface-builder, nsobjectcontroller

我在这里有一个非常简单的设置，Xcode 给了我一个无注释的红色“！” 在界面生成器中标记。

从基于核心数据的文档模板开始。文档 xib 有一个 NSObjectController 实例，其托管对象上下文绑定到文件的所有者（我的 NSPersistentDocument 子类）。存在一个 NSTextField，我想将其值绑定到 NSObjectController ......这就是问题所在。

我为“模型键路径”键入“标题”，因为这是我的 NSManagedObject 的正确属性，它应该出现在文本字段中。当我单击空的 Controller Key 字段时，自动完成奇怪地建议了仅适用于*NSArrayController*的字段：

![奇怪的自动完成候选人的屏幕截图](../Images/b56e696469ed1dafb0b28abbf504cba5.png)

每当我尝试键入“内容”作为控制器键（因为这是 NSObjectController 的正确属性）然后点击 Tab/Return/whatever 时，“内容”会向下移动到模型键路径，如下所示：

![错误截图](../Images/14a73b1559aab865bce033cf4c89ab63.png)

这个红色感叹号是干什么用的？当我将“Controller Key”留空并将“Model Key Path”留为 content.title 时，该应用程序可以正常工作。绑定是正确的，并反映了我的 NSManagedObject 的“标题”属性。我绝对确定“对象控制器”是 NSObjectController 的一个实例。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T21:13:51.050

使用“选择”。对于`NSObjectController`，选择是内容对象。

# android - Android - 显示/隐藏片段留下空白区域

> ID：10691291
> 
> 赞同：7
> 
> 时间：2012-05-21T19:21:23.403
> 
> 标签：android, webview, show-hide, fragment

鉴于：

1.  屏幕上垂直放置的两个元素（ViewPager 和 Fragment）
2.  当前选中的第一个片段 (ViewFlipper) 中的操作在顶部片段中基于文本的视图和基于 WebView 的视图之间切换，并隐藏/显示底部片段。

观察到的：

1.  隐藏底部片段会留下底部片段所在的空白空间。

我尝试了 Relative 和 LinearLayout （将顶部片段设置为`weight=1`），但在底部片段被删除后两者都没有效果我底部仍然有空白空间

这是顶级布局文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<android.support.v4.view.ViewPager
    android:id="@+id/pager"
    android:layout_width="fill_parent"
    android:layout_height="0dip" android:layout_weight="1"/>

<!-- This gets replaced with appropriate fragment at run time -->
<LinearLayout
    android:id="@+id/scrollFragmentPlaceholder"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:minHeight="110dip" />
</LinearLayout> 
```

这是切换片段的代码

```
 Fragment scroll = getSupportFragmentManager().findFragmentById(R.id.scrollFragment);
    if (scroll.isHidden() == isWebView)
        return; // already handled, do nothing
    FragmentTransaction tr = getSupportFragmentManager().beginTransaction();
    if (scroll != null && scroll.isAdded()) {
        if (isWebView) {
            tr.hide(scroll);
        } else
            tr.show(scroll);
    }
    tr.commit(); 
```

这是它的外观： ![底部片段被隐藏](../Images/dcade99745424ad2343f66e345a40a38.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-13T05:37:32.783

一个月后，我想出了如何去做。事实证明，仅仅隐藏片段是不够的，基本上我需要隐藏/显示包含片段的外壳。它仍然是最初在 XML 中定义的 LinearLayout。事实上，在原始布局上设置可见性以显示/隐藏片段就足够了。所以问题中的代码现在看起来像这样：

```
public void onJobViewToggled(final boolean isWebView) {
    if (isFinishing())
        return;
    final Fragment scroll = getSupportFragmentManager().findFragmentById(R.id.scrollFragment);
    if (scroll.isHidden() == isWebView)
        return; // already handled, do nothing
    final FragmentTransaction tr = getSupportFragmentManager().beginTransaction();
    if (scroll != null && scroll.isAdded()) {
        if (isWebView) {
            tr.hide(scroll);
            // shell is the original placeholder
            shell.setVisibility(View.GONE);
        } else {
            tr.show(scroll);
            shell.setVisibility(View.VISIBLE);
        }
    }
    tr.commit();
} 
```

请注意，您仍然希望显示/隐藏片段以使其正常工作

# c# - 使用quartz .NET 调度windows 服务

> ID：10691298
> 
> 赞同：2
> 
> 时间：2012-05-21T19:22:03.450
> 
> 标签：c#, .net, windows-services, quartz-scheduler, quartz.net

我有一个自定义 Windows 服务，我想使用 Quartz .NET 来安排服务运行的时间。现在，我了解了quartz.NET 的基础知识，但我不确定如何将它连接到Windows 服务。所以，假设我有Service.exe，我想每小时运行一次。我将如何通过 Quartz 实现此功能？我知道这是一个模糊的问题，但真的没有其他方法可以问它。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T20:25:16.133

您需要设置作业和触发器。该作业由触发器调用。（[http://quartznet.sourceforge.net/tutorial/lesson_3.html](http://quartznet.sourceforge.net/tutorial/lesson_3.html)）。这是一个每小时运行的示例。

```
// construct a scheduler factory
ISchedulerFactory schedFact = new StdSchedulerFactory();

// get a scheduler
IScheduler sched = schedFact.GetScheduler();
sched.Start();

// construct job info
JobDetail jobDetail = new JobDetail("myJob", null, typeof(DumbJob));
// fire every hour
Trigger trigger = TriggerUtils.MakeHourlyTrigger();
// start on the next even hour
trigger.StartTime = TriggerUtils.GetEvenHourDate(DateTime.UtcNow);  
trigger.Name = "myTrigger";
sched.ScheduleJob(jobDetail, trigger); 
```

这是调用 Service.exe 的类。

```
public class DumbJob : IJob
{
    public void Execute(JobExecutionContext context)
    {
        string instName = context.JobDetail.Name;
        string instGroup = context.JobDetail.Group;

        // Note the difference from the previous example
        JobDataMap dataMap = context.MergedJobDataMap;

        string jobSays = dataMap.GetString("jobSays");
        float myFloatValue = dataMap.GetFloat("myFloatValue");
        ArrayList state = (ArrayList) dataMap.Get("myStateData");
        state.Add(DateTime.UtcNow);

        Console.WriteLine("Instance {0} of DumbJob says: {1}", instName, jobSays);
    }
} 
```

您也可以只在 Windows 服务中启动一个线程，跟踪您上次触发 exe 的时间，然后再重置。它比 Quartz 简单一些，并且可以完成同样的事情。但是，您的问题是 Quartz 特定的。

# php - Wordpress - 如果当前页面处于活动状态，则添加“活动”类

> ID：10691299
> 
> 赞同：2
> 
> 时间：2012-05-21T19:22:11.700
> 
> 标签：php, css, wordpress

```
<?php
          if($post->post_parent)
          $children = wp_list_pages("title_li=&child_of=".$post->post_parent."&echo=0");
          else
          $children = wp_list_pages("title_li=&child_of=".$post->ID."&echo=0");
          if ($children) {
        $parent_title = get_the_title($post->post_parent);?>

        <li><a href="<?php echo get_permalink($post->post_parent) ?>"><?php echo $parent_title;?></a></li>
          <?php echo $children; ?>
    <?php } ?> 
```

上面的代码在一个列表中列出了父页面和所有子页面。

父页面
子页面
子页面 class="active"
子页面
子页面

我想在当前活动页面中添加一个“活动”类。任何帮助是极大的赞赏。谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-01-13T02:32:14.397

要查找特定页面并向其添加活动类，您可以尝试使用 is_page 并定义页面的 URL/slug。

```
<a  class="<?php if (is_page('name-of-page')) echo 'active'; ?>" href="#">Link</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-20T16:02:35.657

`$post->post_title`您可以通过检查反对轻松添加活动和其他类`$item->title`

```
function addLinkClassesWithActive( $atts, $item, $args ) {
    global $post;
    // check if the item is in the primary menu
    if( $args->theme_location == 'main-nav' ) {
        // add the desired attributes:
        $atts['class'] = $post->post_title === $item->title ? 'mdl-layout__tab is-active' : 'mdl-layout__tab';
    }
    return $atts;
}
add_filter( 'nav_menu_link_attributes', 'addLinkClassesWithActive', 10, 3 ); 
```

我自己使用它并去掉包装容器、ul 和 li 标签，这样我就只有一个链接。请参见下面的示例。

```
<nav role="navigation" class="mdl-navigation mdl-layout--large-screen-only" itemscope itemtype="http://schema.org/SiteNavigationElement">
    <div class="mdl-tabs mdl-js-tabs mdl-js-ripple-effect">
        <?php
        $primaryMenu = array(
            'container' => false,
            'theme_location' => 'main-nav',
            'items_wrap' => '%3$s',
            'echo' => false,
        );
        echo strip_tags( wp_nav_menu( $primaryMenu ), '<a>' );
        ?>
    </div>
</nav> 
```

# javascript - 为什么模块模式会创建单例？

> ID：10691300
> 
> 赞同：9
> 
> 时间：2012-05-21T19:22:12.947
> 
> 标签：javascript, module

当我尝试制作此模块的不同实例时，它不起作用。

它似乎是一个单身人士。我一次只能有一个实例。

什么机制将构造函数 publik() 限制为仅在实例上具有？

[http://jsfiddle.net/AVxZR/](http://jsfiddle.net/AVxZR/)

```
var Module = ( function ()
{
    var publik = function ( )
    {
    };
    publik.prototype.test;
    publik.prototype.get = function()
    {
        document.getElementById( 'a'+test ).innerHTML = test;
    };
    publik.prototype.set = function( value )
    {
         test = value;
    };
    return publik;
} ) ();

var object1 = new Module();
var object2 = new Module();

object1.set('1');
object2.set('2');

object1.get();
object2.get(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T14:59:55.723

模块模式并不意味着以您描述的方式使用。它用于创建一个模块并对外部代码隐藏状态，即您公开一个外部代码可以与之通信的公共接口，但您将其余部分隐藏。

这可以防止其他代码依赖于您在内部使用的变量或函数，因为当您重命名任何内容时它们会中断。

此外，模块应该是单例的；拥有多个相同的模块就像在你的代码中有两个相同的类......没有意义。

这就是模块模式的样子。

```
var Module = (function($) {
    // the $ symbol is an imported alias

    // private variable
    var id = 0;

    // private function
    function increaseId()
    {
        return ++id;
    }

    // return public interface
    return {
        nextId: function() {
            // we have access to the private function here
            // as well as the private variable (btw)
            return increaseId();
        }
    }
}(jQuery)); // we import jQuery as a global symbol

Module.nextId(); // 1
Module.nextId(); // 2
Module.id; // undefined
Module.increaseId(); // error 
```

您会看到 only`.nextId()`是如何暴露的，但没有其他私有变量/函数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-21T19:28:28.980

简短的回答：关闭。

长答案（如果我说得对，请发表评论，以便我更正）：

1.  当脚本加载时，您的 Module var 会立即执行。（由函数周围的括号表示。）（）

2.  在该模块中，您的 publik var 被声明，*即使函数完成，它也会留在闭包中！*

3.  通过后续调用，您仍然可以访问自动执行的那个模块。简而言之，它总是获得相同的闭包空间和函数范围以及相同的对象 - 所以您的 publik 变量实际上总是相同的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-21T19:28:11.977

尝试重写 Module 类，以便您可以使用它来创建不同的实例。您可能希望将“测试”属性更改为静态属性，因为我已为您更改了它。

```
var Module = function(){}

    Module.prototype.test;
    Module.prototype.get = function()
    {
       document.getElementById( 'a'+this.test ).innerHTML = this.test;
    };
    Module.prototype.set = function( value )
    {
       this.test = value;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-05T02:05:48.450

您的代码不会创建单例。它只像一个单例，因为你的`test`变量是一个全局变量。

要修复此更改`test`，`this.test`以便将变量附加到每个实例。

# javascript - div的流体间距

> ID：10691304
> 
> 赞同：0
> 
> 时间：2012-05-21T19:22:54.273
> 
> 标签：javascript, jquery, css, jquery-ui, addthis

我有一个以主图像为特色的页面。主图像将根据照片改变其高度和宽度。我在图片旁边还有一个 AddThis 共享小部件。对于一个尺寸的图像，我的间距是正确的。如何设置 AddThis`div`以根据图像大小流畅地保持其当前间距？

[这是一个链接](http://www.ubhape2.com/test-placement.html)，因此您可以看到我正在谈论的示例。页面上的黑框（白色轮廓）表示将要更改的图像。AddThis div 当前调整高度但不调整宽度。这是 AddThis div 的 CSS：

> 样式=“左：-110px；上：-220px；” /* 它当前是如何定位的，我喜欢当前的间距。它必须保持这个间距 */

```
.addthis_floating_style{ 
        background: none repeat scroll 0 0 #000000 !important; 
        position: relative !important; 
} 
```

如何更改它以便 AddThis 正确地将其间距调整为图像的高度和宽度？

我想到的另一种方法是使用 jQuery 读取图像高度和宽度，然后根据图像大小设置 AddThis div 的元素`left`。`top`这需要动态计算。

我会使用任何最有效的方法。请提供一个例子，因为 javascript 不是我的强项。

***更新：***我[阅读了另一个问题](https://stackoverflow.com/questions/158070/jquery-how-to-position-one-element-relative-to-another)并[阅读了提供的答案](https://stackoverflow.com/questions/158070/jquery-how-to-position-one-element-relative-to-another#answer-2781557)，我想知道它是否会解决我的问题，但似乎无法正常工作。这是尝试过的代码（注意：我目前使用的是上面的，下面的代码是我尝试过的）：

**JS**

```
var $j = jQuery.noConflict();
$j("#add-this-vertical").position({
    my:        "right top",
    at:        "right bottom",
    of:        $j("#image-container"),
   collision: "fit"
}) 
```

**HTML**

```
<div id="image-container">
<div class="img-center"><img src="/test.jpg" alt="test" />
</div>
<div id="add-this-vertical">
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_floating_style addthis_16x16_style">
<a class="addthis_button_facebook"></a>
<a class="addthis_button_twitter"></a>
<a class="addthis_button_email"></a>
<a class="addthis_button_compact"></a>
</div>
<script type="text/javascript" src="http://s7.addthis.com/js/
 300/addthis_widget.js">   
</script>
<!-- AddThis Button END -->
</div>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T19:34:46.827

您可以像这样向图像标签添加一些 JavaScript：

```
<img onload="onMyImageLoad(this)" /> 
```

然后在您的文档位置的其他地方：

```
<script>

function onMyImageLoad( img )
{

var height = img.height

// now do something with this height value like change a 
// div's height or margin-top    

}

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T02:17:33.337

这是我的做法，但我的图像不再以页面为中心。正在处理那个...

```
<div style="min-height:100px; min-width:100px; position:relative; float:left; ">
    <div style="text-align:center;">
         <img src="/Images/test.jpg" alt="test" />
    </div>
    <div style="position:absolute; bottom:0px; right:-40px;">
    <div class="addthis_toolbox addthis_floating_style addthis_16x16_style">
         <a class="addthis_button_facebook"></a>
         <a class="addthis_button_twitter"></a>
         <a class="addthis_button_email"></a>
         <a class="addthis_button_compact"></a>
    </div>
    <script type="text/javascript" src="http://s7.addthis.com/js/300/
            addthis_widget.js"></script>
 </div>
    </div> 
```

# iphone - 将 SQL 行加载到索引的 UITableView

> ID：10691306
> 
> 赞同：2
> 
> 时间：2012-05-21T19:23:05.367
> 
> 标签：iphone, sqlite, uitableview

我在 SQLite 数据库中有大约 2000 行。每行都有一个整数 ID 和一个字符串值。我想将它们填充到带有字母索引的 UITableView 中，就像联系人应用程序一样。

在不使用 CoreData 的情况下实现与联系人应用程序一样好的性能是否可行，前提是我不需要重新实现 CoreData 为您所做的一切（例如缓存等）？

我尝试使用每页 50 行的分页来实现这一点，并在 tableview 滚动超过 25 行时在另一个线程中预加载下一页。如果滚动不是很快，则此方法有效，但在滚动非常快时仍然滞后。我认为填充 50 个项目的临时 NSArray 的步骤需要很长时间。

此外，这种方法不适用于 UITableView 的索引，因为加载是按顺序完成的，而索引会跳过。我考虑过在初始化时为每个索引键加载前 10 行，但同样会很慢（填充一个包含 260 个项目的数组）。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T20:10:24.317

我仅以 AZ 为例

取表中的 26 节。

将有 26 个查询来获取数据，首先是从 A 开始，第二个是从 B 开始，第三个是从 C 开始......并且在 cellForRowAtIndexPath() 中直到 Z。

直到用户不滚动表格，它才会获取其他 alpha 投注的数据。

如果每个 From A 到 Z 包含 100 个名称（文本）。

仍然不会花费太多时间。

希望你能从这里得到想法..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T19:43:58.070

看起来一次获取几千行的性能应该不是什么大问题（你应该能够预取它们）。

我会在您的表上为您想要的任何列异步运行 SELECT（例如供参考的索引，也许只是要显示的字符串）并将它们放入`NSMutableDictionary`索引的键控中，然后重新加载表数据。该`cellForRowAtIndexPath` `UITableViewDataSource`函数将使用此字典。

如果您允许用户选择一行来查看详细信息，那么您可以在选择时针对该行的其余数据运行查询。

在用户查看表格时异步执行初始获取`ViewDidLoad`或将防止 UI 锁定，并且在几乎所有情况下，一旦他们实际看到表格，表格应该已经可见。`ViewWillAppear`

初始提取（在后台线程上执行，然后在主线程上重新加载表）

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^()
               {
                    //perform your query here
                   dispatch_async(dispatch_get_main_queue(), ^()
                                  {
                                    [self.tableView reloadData]
                                  });
               }); 
```

# javascript - JavaScript：for循环问题

> ID：10691315
> 
> 赞同：1
> 
> 时间：2012-05-21T19:23:57.783
> 
> 标签：javascript, jquery, for-loop

我有 3`.a`和一个函数，它应该在**-ed时****提醒数字 [0, 1 or 2]`.a`所属`mouseover`**的数字：

```
​function a(){
    for(var c=0; c<3; c++){
        alert(c);
        $('.a:eq('+c+')').mouseover(function(){alert(c)});       
    }

} 
```

当我执行它时，第一个`alert(c)`被触发了三次，消息分别为“0”、“1”、“2”，正如预期的那样。

但是，当 时`mouseover` `.a`，**无论`.a`是哪个，都会提示“3”**。

[http://jsfiddle.net/f6tQn/](http://jsfiddle.net/f6tQn/)

如果有人能解释为什么会发生这种情况并提供解决方案，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T19:28:00.013

因为c=3。

您的循环在`C`每次运行时加 1，`C`在代码运行后仍等于 3，从而为您的警报提供值`C`，即 3。

您的示例可以完全重写和简化为

```
$('.a').mouseover(function(){
    alert($(this).index());
}); 
```

这将为所有具有 class 的元素生成警报`a`，并给出它们在`$('.a')`生成的数组中的位置。

顺便说一句：将函数放入循环时出现 JSLint 错误，如果您想让 JSLint 满意，请查看[此问题](https://stackoverflow.com/questions/3927054/jslint-error-dont-make-functions-within-a-loop-leads-to-question-about-javas)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T19:29:03.380

你被 javascript 中的函数作用域变量抓住了。这是一个很大的 javascript 陷阱。

您需要创建一个函数来执行您希望 for 循环体执行的操作，并将 c 作为参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T19:30:26.270

C 绑定到内存中的相同物理位置，因此当您使用鼠标悬停运行警报时，它会从最后一个设置值 3 中提取。

如果您想对该主题进行更深入的阅读，您实际上会在变量 c 上创建一个“闭包”。

试试这个

```
function a(){
    for(var c=0; c<3; c++){
        alert(c);
        (function(a){
           $('.a:eq('+a+')').mouseover(function(){alert(a)});
        })(c);      
    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T19:35:35.353

发生这种情况是因为您的每个`mouseover`函数都使用相同的 值`c`，即`3`循环完成时。

您需要关闭以“捕获”`c`每次迭代的值。

```
function a(){
    for(var c=0; c<3; c++){
        alert(c);
        var func = function(c){
            return function(){ // closes around the current value of "c"
                alert(c);
            };
        };
        $('.a:eq('+c+')').mouseover(func(c));       
    }
} 
```

演示：http: [//jsfiddle.net/vDbu3/](http://jsfiddle.net/vDbu3/)

# javascript - Javascript空字符串比较

> ID：10691316
> 
> 赞同：6
> 
> 时间：2012-05-21T19:23:58.687
> 
> 标签：javascript, comparison

我不明白为什么一种情况评估为假而另一种情况评估为真。

场景一：

```
> '' == ''
true 
```

场景二：

```
> '' == ('' || undefined)
false 
```

场景 2 是否不询问（空字符串）是否等于：（空字符串）或未定义？

我确定我在这里遗漏了一些基本的东西，这正是我想要弄清楚的。我可以轻松地编写代码，但我想了解它*为什么*会发生……下次，你知道吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-21T19:26:52.413

```
'' == ( '' || undefined ) 
```

不一样

```
( '' == '' ) || ( '' == undefined ) 
```

它更像是：

```
var foo = '' || undefined; // Results in undefined 
```

然后比较`foo`一个空字符串：

```
foo == ''; // undefined == '' will result in false 
```

### 解释

逻辑`||`是短路运算符。如果左边的论点是*真的*，右边的论点甚至不会被评估。在 JavaScript 中，`''`不被认为是*真实的*：

```
if ( '' ) console.log( 'Empty Strings are True?' ); 
```

因此`undefined`返回并与空字符串进行比较。当您在括号内执行此逻辑时，`''`和`undefined`不知道即将发生的相等检查 - 他们只是想知道其中哪些将在此评估中幸存下来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T19:27:43.523

让我们打破它：

```
'' == ('' || undefined) // return "undefined"
'' == undefined // false 
```

`||`返回第一个真值或**最后一个值**。

[**演示**](http://jsfiddle.net/cjRXU/)

你要这个：

```
'' == undefined  || '' == false 
```

* * *

`undefined`仅`==`适用于`null`，而不适用于所有其他“虚假”值：

*   0
*   "" - 空字符串
*   钠
*   错误的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T19:27:23.273

尝试`'' == '' || '' == undefined`

与几乎所有编程语言一样，运算符两边的表达式必须计算为有效的操作数。`||`是逻辑或运算符，用于计算一对布尔操作数。

# java - 将 string[] 拆分为 ArrayList 并返回值

> ID：10691317
> 
> 赞同：0
> 
> 时间：2012-05-21T19:24:02.370
> 
> 标签：java, string, list, arraylist

我在将字符串数组拆分为 List/ArrayList 时遇到问题。我意识到这是基本的东西，但我已经看过很多例子，以至于我现在对正在发生的事情（或没有发生的事情）完全感到困惑。

一些代码片段：

```
private String[] stringTempList;
private ArrayList<List<String>> arrayImageList = new ArrayList<List<String>>(); 
```

我的列表是从网页中读取的，格式为纯文本，例如：**['One','Two','Three', etc ...]**

所以，一些行来去除我想要/不想要的东西（注意 - 我已经将它们分开以帮助我完成整个过程）：

```
stringExtractedList = stringText.substring(stringText.indexOf("['") + 2,
                stringText.lastIndexOf("']"));    
stringTempList = stringExtractedList.split("','"); 
```

从我可以看到，上述工作按预期工作（创建一个数组（stringTempList），将它看到的每个项目拆分出来`','`。

哪里出错了：

```
arrayImageList.add((List<String>) Arrays.asList(stringTempList)); 
```

我希望这条线能够获取我的数组（stringTempList）并将项目移动到 ArrayList 中。我希望使用类似于`arrayImageList.get(i);`访问单个元素的代码。

但是，上面的代码似乎将所有项目添加到 arrayImageList 中的第一个索引（列表大小始终为 1）。运行一些调试测试，例如`Log.d("Test", arrayImageList.get(0));`返回以下内容：

```
[One,Two,Three,Four, etc...] 
```

如果有人能指出我正确的方向，我将不胜感激。我想我在这里混淆了两个不同的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:30:06.553

我想你想用`addAll()`而不是`add()`

您还需要声明

```
private List<String> arrayImageList = new ArrayList<String>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T19:32:50.440

将 arrayImageList 更改为字符串列表：

```
private ArrayList<String> arrayImageList = new ArrayList<String>(); 
```

并使用 addAll 方法添加它们：

```
arrayImageList.addAll((List<String>) Arrays.asList(stringTempList)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T19:30:07.583

你想用`addAll`，没有`add`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T19:38:56.090

我不确定我是否得到了这个“错误的方法”，而且我对 java 也不是很熟悉，但这是我的想法：

您的“arrayImageList”对象是列表的 ArrayList。当您添加您的 stringTempList 对象时，该对象正确存储在您的“列表列表”的第一个可用索引中。如果要从“arrayImageList”访问单个元素（字符串），则必须像这样处理第二维（列表的列表）：

**arrayImageList.get(0).get(i)** <- 这里不完全确定 java-syntax，但你明白了。

另一方面，如果您不需要额外的维度，只需使用 ArrayList 代替 og ArrayList>。

# ruby - 在 ruby 中合并一些复杂的哈希

> ID：10691318
> 
> 赞同：3
> 
> 时间：2012-05-21T19:24:03.637
> 
> 标签：ruby, hash, hash-of-hashes

我想将以下哈希合并在一起。

```
 h1 = {"201201" => {:received => 2},   "201202" => {:received => 4 }}
 h2 = {"201201" => {:closed => 1},  "201202" => {:closed => 1 }} 
```

特别是，我的预期结果是：

```
h1 = {"201201" => {:received => 2, :closed => 1},  "201202" => {:received => 4, :closed => 1 }} 
```

我已经尝试了各种方法：

```
h = h1.merge(h2){|key, first, second| {first , second} } 
```

不幸的是，对我来说，两者似乎都不是很好。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T19:30:39.297

这应该适合你：

```
h = h1.merge(h2){|key, first, second| first.merge(second)} 
```

# ruby-on-rails - 切换时应用erb文件不正确

> ID：10691321
> 
> 赞同：1
> 
> 时间：2012-05-21T19:24:23.760
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在使用 Rails 3.2。

在我的应用程序中，我有一个`application.html.erb`服务于“正常”模式的`application.mobile.erb`文件和一个服务于“移动”模式的文件。

当我以“正常”模式加载主页时，`application.html.erb`文件正确地与“正常”模式主页一起提供`home.html.erb`。当我切换到“移动”模式`application.mobile.erb`时，“移动”模式主页会正确提供`home.mobile.erb`。当我切换回“正常”模式时，会提供正确的“正常”模式`home.html.erb`文件，但使用不正确`application.mobile.erb`的（“移动”模式的）文件。

`application.mobile.erb`如果我在错误提供后刷新页面，`application.html.erb`则正确加载。

这是用于从普通模式切换到移动模式的链接

```
<a href="/en?mobile=0" class="ui-link">Full Site</a> 
```

这是用于从移动模式切换到普通模式的链接

```
<a href="/en?mobile=1" class="ui-link">Mobile Site</a> 
```

如果我更改正常开关，使其像这样从不同的子域请求（这是我已经设置的子域）

```
<a href="http://mobile.localhost.local:3000/en?mobile=0" class="ui-link">Full Site</a> 
```

应用程序 erb 文件已正确切换，一切正常。注意：如果我添加相同的主机，它不起作用。

据推测，rails 路由以不同方式处理同一服务器上的路径，但我真的不明白这是如何以及是否是错误？

有谁知道发生了什么？

**更新**

application_controller 中处理参数的代码是：

```
before_filter :set_locale, :prepare_for_mobile
...
def mobile_device?
  if session[:mobile_param]
     session[:mobile_param] == "1"
  else
     request.user_agent =~ /Mobile|webOS/
  end
end
helper_method :mobile_device?

def prepare_for_mobile
  session[:mobile_param] = params[:mobile] if params[:mobile]
  request.format = :mobile if mobile_device?
end 
```

我的 mime_types.rb 中有这个

```
Mime::Type.register_alias "text/html", :mobile 
```

这是发生的示例[http://www.zode64.com](http://www.zode64.com)

注意右上角的移动和普通链接有新的子域，如果你用firebug切换到当前的子域，它仍然会打开正确的页面但错误的页面`application.erb`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T02:19:19.360

问题可能出在这个逻辑中：

```
before_filter :set_locale, :prepare_for_mobile
...

def prepare_for_mobile
  session[:mobile_param] = params[:mobile] if params[:mobile]
  request.format = :mobile if mobile_device?
end 
```

如果 params[:mobile] 从 1 变为 0（即从移动变为全站点），则会话变量和 request.format 都未设置，并且站点继续运行，就好像它仍处于移动模式一样。

# mysql - MySQL COUNT 天

> ID：10691330
> 
> 赞同：2
> 
> 时间：2012-05-21T19:25:22.120
> 
> 标签：mysql, sql

我想在图表中获取访问我页面 10 天的用户的价值。我需要 COUNT() 过去十天的所有值。

最好的布局是

```
Day|COUNT(ip)

1 - 10
2 - 12
3 - 52
...... 
```

我希望你明白我的意思。MySQL 可以直接执行此操作，还是需要我在 PHP 中以 10 个单独的查询执行此操作？

问候，莫里茨

使用表结构更新：

```
 Id (Auto Increment)|Time (Unix Timestamp)|Ip|Referer 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:34:50.400

这将为您提供具有实际日期值的结果：

```
SELECT
    COUNT(DISTINCT ip),
    FROM_UNIXTIME(Time, '%m/%d/%Y') AS Day
FROM
    tbl
WHERE
    Time >= UNIX_TIMESTAMP(DATE_ADD(CURDATE(), INTERVAL -10 DAY))
GROUP BY
    FROM_UNIXTIME(Time, '%m/%d/%Y') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T19:42:39.647

这应该为您快速运行

```
SELECT COUNT(ip) ipcount,dt FROM
(
    SELECT ip,DATE(FROM_UNIXTIME(`Time`)) as dt FROM mytable
    WHERE `Time` > TO_UNIXTIME(NOW() - INTERVAL 10 DAY)
) A GROUP BY dt; 
```

确保你有一个索引`Time`

```
ALTER TABLE mytable ADD INDEX TimeIndex (`Time`); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T19:32:48.973

试试这个：

```
SELECT CAST(DATE(FROM_UNIXTIME(`Time`)) AS CHAR) as dateoftime, COUNT(Ip) as cnt
FROM tablename
WHERE DATE(FROM_UNIXTIME(`Time`)) > DATE_SUB(current_timestamp, INTERVAL 10 DAY)
GROUP BY CAST(DATE(FROM_UNIXTIME(`Time`)) AS CHAR) 
```

# vba - 在 vba 中使用文件系统对象的问题

> ID：10691331
> 
> 赞同：0
> 
> 时间：2012-05-21T19:25:27.517
> 
> 标签：vba, filesystemobject

我在编写的 vba 函数中使用 filesystemobject 时遇到问题。我不断收到错误：运行时错误 424 需要对象

我在网上找到了很多东西，但没有一个有任何好处。是的，我已经检查了 References 并且检查了 Microsoft Scripting Runtime。这是代码片段，请告诉我我做错了什么。我尝试将第一行更改为 Dim objFSO 作为 New FileSystemObject 等，但它们会产生相同的错误。错误发生在第二行。

```
Dim objFSO
Set objFSO = CreateObject(”Scripting.FileSystemObject”) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T19:43:28.507

您使用的是奇数引号，请使用普通引号。

```
Dim objFSO
Set objFSO = CreateObject("Scripting.FileSystemObject") 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-21T23:39:27.270

如果添加对 Microsoft Scripting Runtime 的引用，则不需要使用`CreateObject`; 相反，您可以致电：

```
Dim objFSO=new FileSystemObject 
```

# android - 可变宽度和高度线性布局：android

> ID：10691332
> 
> 赞同：0
> 
> 时间：2012-05-21T19:25:34.710
> 
> 标签：android, resize, android-linearlayout

我必须调整其中一个视图的大小或两者兼而有之......似乎一旦`setContentView`被称为新的`setCotentView`就不能被调用。我试图通过再次创建整个布局来调整内容的大小。

请告诉我该怎么做...

这是我到目前为止的代码：

```
package v.w;

import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup.LayoutParams;
import android.widget.Button;
import android.widget.LinearLayout;

public class VariableWidthActivity extends Activity {
    /** Called when the activity is first created. */
    LinearLayout RLGreen;
    LinearLayout RLChange;
    Button btnClick;
    LinearLayout RLYellow ;
    Button  btClick;

        @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        RLChange = new LinearLayout(this);        
        RLChange.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                                                 LayoutParams.FILL_PARENT)); 
        RLChange.setOrientation(LinearLayout.VERTICAL);

        RLGreen = new LinearLayout(this);        
        RLGreen.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                                                 LayoutParams.FILL_PARENT));
        RLGreen.setBackgroundColor(Color.GREEN);
        RLGreen.setOrientation(LinearLayout.HORIZONTAL);
        btnClick = new Button(this);        
        btnClick.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT) );
        //btnClick.setBackgroundColor(Color.RED);
        btnClick.setText("BUTTON");

        RLYellow = new LinearLayout(this);        
        RLYellow.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                                                 200));
        RLYellow.setBackgroundColor(Color.YELLOW);
        RLChange.addView(RLGreen);
        RLGreen.addView(RLYellow);

        RLGreen.addView(btnClick);

    }
        @Override
        protected void onResume() {
            // TODO Auto-generated method stub
            super.onResume();

            setContentView(RLChange);
            btClick=new Button(this);
            btClick.setText("BUTTON");
            btClick.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                    LayoutParams.WRAP_CONTENT) );
            //btnClick.setBackgroundColor(Color.RED);
            RLYellow.addView(btClick);
            btClick.setOnClickListener(new View.OnClickListener() {

                public void onClick(View view) { 
                    //RLChange.forceLayout();
                    RLChange.removeAllViews();

                    RLChange.addView(RLYellow);
                    RLChange.addView(RLGreen);
                    RLGreen.addView(btnClick);
                    setContentView(RLChange);
                }
             });  

        }

} 
```

# iphone - NSURLConnection 在文件下载时收到“假”

> ID：10691335
> 
> 赞同：0
> 
> 时间：2012-05-21T19:25:41.323
> 
> 标签：iphone, objective-c, ios, nsurlconnection

我正在尝试将文件从服务器下载到这样的 iphone

```
NSURL *newURL0 = [NSURL URLWithString: url]; 
NSMutableURLRequest *req0 = [NSMutableURLRequest requestWithURL:newURL0];
NSURLConnection conn = [[NSURLConnection alloc] initWithRequest:req0 delegate:self]; 
```

接着

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

    NSURL *docDirectory = [[[NSFileManager defaultManager] URLsForDirectory:
                            NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];

    NSURL *filePath = [docDirectory URLByAppendingPathComponent:temp];

    [webData writeToURL:filePath atomically:YES];
    [webData release];

    connection = nil ; 

    if ([delegate respondsToSelector:@selector(getDataSucceeded:)]) {

        NSLog(@"Log: %@", @"yes");
        [delegate getDataSucceeded:self.list];
    }
} 
```

这总是很有效，但最近我注意到它不再有效了。没有对与此功能相关的任何文件进行任何更改，它只是有点停止工作。当我在网络浏览器中使用相同的 url 时，文件下载正常，但在我的应用程序中，当我请求文件时，它只返回 5 个字节，我也觉得很奇怪，因为服务器没有返回 False 这个词，如果有问题，它会返回一条错误消息。服务器端代码是用 Visual Basic 编写的。

非常感谢任何想法或建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T19:35:04.427

`False`是 Visual Basic 中的关键字，而不是 Objective-C 中的关键字。也没有理由在这样的响应中显示为文本。它几乎肯定是在服务器端生成的。

使用诸如 Charles 之类的 HTTP 代理来查看您的 Web 浏览器和您的应用程序发出了哪些请求。它们之间会有差异，导致服务器以不同的方式响应。使用 cURL 之类的工具手动发出请求，以确定哪些差异是原因。或者，检查服务器端代码的提交日志以了解可能导致此问题的最近更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T20:25:16.023

我认为您错过了以下回调函数，在该函数中您需要将数据块附加到单个 NSData 对象中：在我的情况下 _responseText 是一个 NSData 对象

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
  [_responseText appendData:data];
} 
```

希望这会帮助你

# bash - 需要查找文件以 API 生成的序列号 + YYYYMMDD 命名的文件

> ID：10691337
> 
> 赞同：0
> 
> 时间：2012-05-21T19:26:00.323
> 
> 标签：bash, date, find

我需要找到以 API 生成的序列号 + YYYYMMDD 后跟 API 时间戳数据命名的文件。

例子：

```
send0167663112011110414150180.xml --Created 20111104
send0148402292010121812300296.xml --Created 20101218
send0152858682009032013000173.xml --Created 20090320 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T19:33:40.190

您没有指定您正在尝试使用哪种语言。如果您使用的是 c#，请在感兴趣的目录上使用 DirectoryInfo.GetFiles，并使用“FileInfo”获取目录内文件的文件信息，并检查“名称”并与您想要的内容进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T23:56:17.463

这将找到以日期结尾并满足其他条件的文件。

```
date=20111104
find -type -f -name "*$date" -mtime +142 -exec ls -ltr {} \; 
```

# r - 面板数据回归：稳健标准误

> ID：10691341
> 
> 赞同：6
> 
> 时间：2012-05-21T19:26:24.680
> 
> 标签：r, regression, standard-error, panel-data, robust

我的问题是：`NA`在计算稳健标准误差时，我得到了应该得到一些值的地方。

我正在尝试使用集群稳健的标准错误进行固定效应面板回归。为此，我关注[Arai (2011)](http://people.su.se/~ma/clustering.pdf)，他在第 1 页。3 紧随[Stock/Watson (2006)](https://www.princeton.edu/~mwatson/papers/panelse_5.pdf)（后来发表在[Econometrica](http://www.jstor.org/discover/10.2307/4502057?uid=3737760&uid=2&uid=4&sid=56192307833)上，供有访问权限的人使用）。我想通过反对向下偏差来纠正自由度，`(M/(M-1)*(N-1)/(N-K)` 因为我的集群数量是有限的并且我有不平衡的数据。

[在 StackOverflow 上的 [ 1](https://stackoverflow.com/questions/9260766/robust-standard-errors-in-ggplot2/9264761#9264761) , [2](https://stackoverflow.com/questions/8389843/clustered-standard-errors-r-panel-data) ] 和CrossValidated 上的相关问题 [ [3](https://stats.stackexchange.com/questions/28492/understanding-the-plm-package-why-arent-my-standard-errors-correct) ]之前已经发布了类似的问题。

Arai（以及第一个链接中的答案）使用以下函数代码（*我在下面提供了我的数据以及一些进一步的评论*）：

```
gcenter <- function(df1,group) {
    variables <- paste(
        rep("C", ncol(df1)), colnames(df1), sep=".")
    copydf <- df1
    for (i in 1:ncol(df1)) {
        copydf[,i] <- df1[,i] - ave(df1[,i], group,FUN=mean)}
    colnames(copydf) <- variables
    return(cbind(df1,copydf))}

# 1-way adjusting for clusters
clx <- function(fm, dfcw, cluster){
    # R-codes (www.r-project.org) for computing
    # clustered-standard errors. Mahmood Arai, Jan 26, 2008.
    # The arguments of the function are:
    # fitted model, cluster1 and cluster2
    # You need to install libraries `sandwich' and `lmtest'
    # reweighting the var-cov matrix for the within model
    library(sandwich);library(lmtest)
    M <- length(unique(cluster))   
    N <- length(cluster)           
    K <- fm$rank                        
    dfc <- (M/(M-1))*((N-1)/(N-K))  
    uj  <- apply(estfun(fm),2, function(x) tapply(x, cluster, sum));
    vcovCL <- dfc*sandwich(fm, meat=crossprod(uj)/N)*dfcw
    coeftest(fm, vcovCL) } 
```

，其中`gcenter`计算与平均值的偏差（固定效应）。然后我继续并`DS_CODE`作为我的集群变量进行回归（我已将我的数据命名为“数据”）。

```
centerdata <- gcenter(data, data$DS_CODE)
datalm <- lm(C.L1.retE1M ~ C.MCAP_SEC + C.Impact_change + C.Mom + C.BM + C.PD + C.CashGen + C.NITA + C.PE + C.PEdummy + factor(DS_CODE), data=centerdata)
M <- length(unique(data$DS_CODE))
dfcw <- datalm$df / (datalm$df - (M-1)) 
```

并想计算

```
clx(datalm, dfcw, data$DS_CODE) 
```

但是，当我想计算方差的*uj*（见上面的公式`clx`）时，我只在开始时得到一些回归量的值，然后是很多零。如果此输入*uj*用于方差，则只有`NAs`结果。

**我的数据**

由于我的数据可能具有特殊结构并且我无法找出问题所在，因此我将整个内容作为来自 Hotmail的[链接发布。](https://skydrive.live.com/redir?resid=58FBD7EAB94B2963!223&authkey=!APTXLzboXcf67Hs)原因是使用其他数据（取自 Arai (2011)）我的问题不会发生。提前为混乱感到抱歉，但如果您能看一下，我将不胜感激。该文件是一个包含纯数据的 5mb .txt 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T08:21:31.280

玩了一段时间后，它对我有用并给了我：

```
 Estimate  Std. Error t value  Pr(>|t|)    
(Intercept)            4.5099e-16  5.2381e-16  0.8610  0.389254    
C.MCAP_SEC            -5.9769e-07  1.2677e-07 -4.7149 2.425e-06 ***
C.Impact_change       -5.3908e-04  7.5601e-05 -7.1306 1.014e-12 ***
C.Mom                  3.7560e-04  3.3378e-03  0.1125  0.910406    
C.BM                  -1.6438e-04  1.7368e-05 -9.4645 < 2.2e-16 ***
C.PD                   6.2153e-02  3.8766e-02  1.6033  0.108885    
C.CashGen             -2.7876e-04  1.4031e-02 -0.0199  0.984149    
C.NITA                -8.1792e-02  3.2153e-02 -2.5438  0.010969 *  
C.PE                  -6.6170e-06  4.0138e-06 -1.6485  0.099248 .  
C.PEdummy              1.3143e-02  4.8864e-03  2.6897  0.007154 ** 
factor(DS_CODE)130324 -5.2497e-16  5.2683e-16 -0.9965  0.319028    
factor(DS_CODE)130409 -4.0276e-16  5.2384e-16 -0.7689  0.441986    
factor(DS_CODE)130775 -4.4113e-16  5.2424e-16 -0.8415  0.400089  
... 
```

这给我们留下了一个问题，为什么它不适合您。我想这与您的数据格式有关。一切都是数字吗？我转换了列类，对我来说看起来像这样：

```
str(dat)
'data.frame':   48251 obs. of  12 variables:
 $ DS_CODE      : chr  "902172" "902172" "902172" "902172" ...
 $ DNEW         : num  2e+05 2e+05 2e+05 2e+05 2e+05 ...
 $ MCAP_SEC     : num  78122 71421 81907 80010 82462 ...
 $ NITA         : num  0.135 0.135 0.135 0.135 0.135 ...
 $ CashGen      : num  0.198 0.198 0.198 0.198 0.198 ...
 $ BM           : num  0.1074 0.1108 0.097 0.0968 0.0899 ...
 $ PE           : num  57 55.3 63.1 63.2 68 ...
 $ PEdummy      : num  0 0 0 0 0 0 0 0 0 0 ...
 $ L1.retE1M    : num  -0.72492 0.13177 0.00122 0.07214 -0.07332 ...
 $ Mom          : num  0 0 0 0 0 ...
 $ PD           : num  5.41e-54 1.51e-66 3.16e-80 2.87e-79 4.39e-89 ...
 $ Impact_change: num  0 -10.59 -10.43 0.7 -6.97 ... 
```

对你有什么`str(data)`回报？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T10:11:14.663

该`plm`软件包可以估计面板回归的聚类 SE。原始数据不再可用，因此这里有一个使用虚拟数据的示例。

```
require(foreign)
require(plm)
require(lmtest)
test <- read.dta("http://www.kellogg.northwestern.edu/faculty/petersen/htm/papers/se/test_data.dta")

fpm <- plm(y ~ x, test, model='pooling', index=c('firmid', 'year'))

##Arellano clustered by *group* SEs
> coeftest(fpm, vcov=function(x) vcovHC(x, cluster="group", type="HC0"))

t test of coefficients:

            Estimate Std. Error t value Pr(>|t|)    
(Intercept) 0.029680   0.066939  0.4434   0.6575    
x           1.034833   0.050540 20.4755   <2e-16 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 
```

* * *

如果您使用的是`lm`模型（而不是`plm`），那么该`multiwayvcov`软件包可能会有所帮助。

```
library("lmtest")
library("multiwayvcov")

data(petersen)
m1 <- lm(y ~ x, data = petersen)

> coeftest(m1, vcov=function(x) cluster.vcov(x, petersen[ , c("firmid")], 
   df_correction=FALSE))

t test of coefficients:

            Estimate Std. Error t value Pr(>|t|)    
(Intercept) 0.029680   0.066939  0.4434   0.6575    
x           1.034833   0.050540 20.4755   <2e-16 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 
```

有关更多详细信息，请参阅：

*   [R 中的 Fama-MacBeth 和 Cluster-Robust（按公司和时间）标准错误](http://landroni.wordpress.com/2012/06/02/fama-macbeth-and-cluster-robust-by-firm-and-time-standard-errors-in-)。

也可以看看：

*   [面板数据的双聚类标准误](https://stackoverflow.com/questions/8389843/double-clustered-standard-errors-for-panel-data/11173348#11173348)

# javascript - 用于嗅探图像请求客户端的诊断 JavaScript

> ID：10691344
> 
> 赞同：0
> 
> 时间：2012-05-21T19:26:32.307
> 
> 标签：javascript, tracking, ads, affiliate

**背景：** 我们使用我们网站上的[跟踪像素](http://en.wikipedia.org/wiki/Web_bug)将销售数据传递给我们合作的广告网络。一些令人讨厌的错误导致我们的合作伙伴记录了错误的数据，我们正在寻找一种诊断方法。服务器日志显示我们正在生成正确的 <img> 请求，但我们无法确定错误的原因......

**问题：**是否有一种 JavaScript 方法可以嗅探我们网站上发出的出站客户端图像请求？即，是否可以加载一个客户端 JS 来查找特定域的图像请求，记录这些请求，然后将该信息发送到我们的服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T19:31:20.260

我会使用 Google Chrome 的内置网络面板。查看->开发者->开发者工具。

# android - 安卓sqlite查询

> ID：10691345
> 
> 赞同：0
> 
> 时间：2012-05-21T19:26:42.150
> 
> 标签：android, database, sqlite

```
Cursor cursor = db.rawQuery("SELECT id,lastname FROM people WHERE lastname=null; ",null); 
```

此查询不返回姓氏为空的成员。该查询有什么问题？我应该像这样检查 WHERE lastname="" 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T19:28:12.243

试试这个：

```
 ... WHERE lastname IS NULL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T19:31:06.343

无法`NULL`使用比较运算符（例如`=`,`<`等）测试值。

您必须改用`IS NULL`and`IS NOT NULL`运算符。

```
SELECT id, lastname FROM people WHERE lastname IS NULL; 
```

# javascript - 咖啡脚本返回

> ID：10691346
> 
> 赞同：3
> 
> 时间：2012-05-21T19:26:43.773
> 
> 标签：javascript, coffeescript

我有这段 javascript：

```
if(this.isShown || event.isDefaultPrevented()){
    return;
} 
```

我试图将它转换成 Coffeescript 但我似乎无法让 null 返回工作：

```
if @isShown or event.isDefaultPrevented()
    return; 
```

我怎样才能让它正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:53:21.433

CoffeeScript 编译器似乎不会隐式返回 null ，除非它需要阻止以后的代码执行。*如果在该代码之后*发生了某些事情，它将添加 null 返回，例如：

```
if @isShown or event.isDefaultPrevented()
  return

alert(1)

// compiles to =>

if (this.isShown || event.isDefaultPrevented()) {
  return;
}

alert(1); 
```

而在您的上述情况下，该函数无论如何都会在条件之后退出，从而不需要返回空值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T19:37:18.760

你的问题肯定出在其他地方......我去了[http://coffeescript.org](http://coffeescript.org)，点击“试试看”，然后粘贴到你的 CS 代码中。它生成的 JS 与您的原始 JS 代码匹配。

CoffeeScript 错误消息通常并不真正意味着它们所说的内容。这就是让它变得如此有趣的原因……您可以成为一名侦探，但不必辞掉程序员的工作！发布一个更大的代码块，也许我们可以帮助您进行侦探工作。

# python - Django 1.4 - 带有列表的 bulk_create

> ID：10691359
> 
> 赞同：13
> 
> 时间：2012-05-21T19:27:54.927
> 
> 标签：python, django

我有一个列表，我想在数据库中批量创建条目。

如果不遍历列表，我怎么能做到这一点，我认为这会消除 bulk_create 的意义。

例如：

代替...

```
for x in list:
    bulk_create... 
```

我怎么能...

```
bulk_create for the entire list at once in an efficient manner 
```

列表包含：

```
list = ['abc', 'def', 'ghi'] 
```

它只是一个 id 列表，而不是可以直接输入 bulk_create 的形式（不使用输入字段格式化）。但是，我认为可以在将列表传递给 bulk_create 之前对其进行修改。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-21T19:33:19.587

`bulk_create`在一次调用中将对象列表作为单个 arg。您在示例中所做的与循环和执行相同`create()`

参考：[https ://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.bulk_create](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.bulk_create)

```
aList = [
    Entry(headline="Django 1.0 Released"),
    Entry(headline="Django 1.1 Announced"),
    Entry(headline="Breaking: Django is awesome")
]
Entry.objects.bulk_create(aList) 
```

`aList`指的是您已经实例化并需要通过一个查询批量创建的对象列表。例如，如果您还没有未保存的实例列表，并且您有一个值列表，那么您可以使用以下内容创建列表：

```
values = ['abc', 'def', 'ghi']
# a list of unsaved Entry model instances
aList = [Entry(headline=val) for val in values] 
```

或者，也许您有一个映射到模型的原始字典值列表：

```
values = [{headline="abc"}, {headline="def"}, {headline="ghi"}]
aList = [Entry(**vals) for vals in values] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T19:33:38.107

```
>>> Entry.objects.bulk_create([
...     Entry(headline="Django 1.0 Released"),
...     Entry(headline="Django 1.1 Announced"),
...     Entry(headline="Breaking: Django is awesome")
... ]) 
```

您正在向 ORM 传递一个列表中的实例化对象列表。使用它，并假设 orig_list 是一个字典列表，

```
>>> my_objects = [MyObject(a=x['a'], b=x['b']) for x in orig_list]
>>> MyObject.objects.bulk_create(my_objects) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T19:34:23.210

试试这个，bulk_create 的目的是只点击一次数据库，不管你创建了多少。这就是为什么我们认为它是有效的。

```
class Entry(models.Model):
    name = models.CharField(max_length = 10)

a = ['test1', 'test2', 'test3', 'test4']

Entry.objects.bulk_create([Entry(name=x) for x in a]) 
```

- -编辑 - -

假设你有一个这样的模型，在你的 models.py 中：

```
class Entry(models.Model):
    id = models.CharField(max_length = 10) 
```

你有一个这样的列表（直接从你的问题中复制）：

```
list = ['abc', 'def', 'ghi'] 
```

只需一行：

```
Entry.objects.bulk_create([Entry(id=x) for x in list]) 
```

# php - n 个数组（或对象）中唯一元素的算法

> ID：10691361
> 
> 赞同：0
> 
> 时间：2012-05-21T19:27:57.677
> 
> 标签：php, algorithm

我正在使用的编程语言：PHP

我有 30 个来自数据库的结果，可以是 ARRAY 或 OBJECT

我想要的是一种找到常见值的算法。

前任 ：

```
$data[0] = array('effected_object_id'=>54,'data'=>array('some_data'));
$data[1] = array('effected_object_id'=>21,'data'=>array('some_data'));
$data[2] = array('effected_object_id'=>63,'data'=>array('some_data'));
$data[3] = array('effected_object_id'=>21,'data'=>array('some_data'));
$data[4] = array('effected_object_id'=>54,'data'=>array('some_data'));
$data[5] = array('effected_object_id'=>21,'data'=>array('some_data'));
...... 30 arrays 
```

在上面的例子中，在 effect_object_id 列中我有几个共同的元素，比如 21(3)、54(2)

我想得到这些共同的元素。

抱歉，如果这已经在某个地方被问及并解决了，我只是用谷歌搜索并尝试了一下。但找不到快速解决方案，是的，我在这里不需要太多循环。

提前致谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:52:29.593

```
$groups = array();
foreach ($data as $row) {
    $groups[ $row['effected_object_id'] ][] = $row;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T19:52:49.793

最简单的方法是将数组用作哈希表：

基本上，您可以创建一个格式为：

```
array[k] = v 
```

其中 k 是 effected_object_id，v 是具有 Effective_object_id = k 的条目数组。

喜欢：

```
$vals = array(
    21 => array('data1', 'data2'),
); 
```

喜欢：

```
$indexedData = array();
foreach ($data as $d) {
    $indexedData[$d['effected_object_id']][] = $d['data'];
} 
```

然后要查找重复值，您可以循环并检查 count() > 1。

根据您的确切需求，您可能希望以不同的方式构建此方法，但希望这能传达基本思想。

值得注意的是，要找到重复项，这是 O(n)。实际上需要 <= 2n 次迭代才能找到重复项。 `n`需要迭代来索引条目，然后需要另一数量的迭代 <= n 来遍历索引数组并查找重复项。

# c++ - 使用 Allegro 对透明图像进行 Blit

> ID：10691362
> 
> 赞同：1
> 
> 时间：2012-05-21T19:27:58.583
> 
> 标签：c++, image, transparency, draw, allegro

我想知道是否有可能用透明颜色绘制 png，所以我可以制作半透明的东西。我读过[这个](http://www.allegro.cc/manual/4/api/transparency-and-patterned-drawing/)，但我什么都做不了。我也听说过 alpng 库，但我不知道它是否也能加载透明度。我正在使用`allegro 4.2.1`最新的`Dev-C++`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T00:33:48.310

您需要加载 32 位图像，调用`set_alpha_blender()`然后`draw_trans_sprite()`. 请参阅[此讨论](http://www.allegro.cc/forums/thread/589076)。TGA 是 Allegro 4 本机支持的唯一足以完成此任务的格式。否则，您需要查看 PNG 加载器插件。

如果您刚刚开始，您可能还需要考虑切换到 Allegro 5。对于这种类型的东西，它有一个更现代的 API。

# regex - [abc] 和 (a|b|c) 的区别

> ID：10691366
> 
> 赞同：3
> 
> 时间：2012-05-21T19:28:02.217
> 
> 标签：regex, pcre

对于 PCRE 正则表达式，[abc] 和 (a|b|c) 有什么区别？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-21T19:29:45.350

您问题中的模式匹配相同的文本。在实现方面，它们对应于不同的自动机和副作用（*即*它们是否捕获子字符串）。

在下面的评论中，[加勒特奥尔布赖特](https://stackoverflow.com/users/11023/garrett-albright)指出了一个微妙的区别。而`(.|\n)`匹配任何字符，`[.\n]`匹配文字点或换行符。尽管点在字符类中不再是特殊的，但其他字符（例如`-`, `^`, 以及`]`诸如此类的序列）`[:lower:]`在字符类中具有特殊含义。必须注意从一个上下文到另一个上下文保留特殊语义，但有时这是不可能的，例如在字符类之外的`\1`一种古老的书写方式的情况下。`$1`在字符类中，`\1`始终匹配字符 SOH。

字符类 ( `[...]`) 已针对匹配一组字符中的一个进行了优化，而替代 ( `x|y`) 允许更一般的不同长度的选择。如果您牢记这些设计原则，您往往会看到更好的性能。正则表达式实现将源代码转换`/[abc]/`为有限状态自动机，通常是[NFA](http://en.wikipedia.org/wiki/Nondeterministic_finite_automaton)。我们认为的正则表达式引擎或多或少是协助执行这些目标状态机的簿记员。足够智能的正则表达式编译器将为等效的正则表达式生成相同的机器代码，但由于[潜伏的指数复杂性](http://en.wikipedia.org/wiki/Nondeterministic_finite_automaton#Equivalence_to_DFA)，这在一般情况下既困难又昂贵。

有关正则表达式背后理论的易于理解的介绍，请阅读Mark Dominus 的[“正则表达式如何工作”](http://perl.plover.com/Regex/article.html)。如需更深入的研究，请考虑Peter Linz[*的《形式语言和自动机简介》 。*](https://rads.stackoverflow.com/amzn/click/com/0763714224)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T19:39:26.837

（在阅读格雷格的回答后）：如果他们被不同的评估应该取决于你提供给他们的任何程序。选择您要检查的内容。您是要检查一组有效字符，还是要检查值。——有时看起来一样，但背后可能有不同的意图。然后选择反映您意图的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T14:35:24.690

使用方括号的形式在 PCRE 中要快得多，尤其是在启用 JIT 编译的情况下。它只是在 bitset 中检查一点，而另一个则为每个替代项重新读取字符。我正在考虑一种可以检测这种情况的优化，因为许多人不知道可以在方括号内使用字符类，并且他们使用 ([az]|\s)+ 而不是 [az\s]+。

# objective-c - 在 iOS 的 Dropbox API 中使用 Delta

> ID：10691367
> 
> 赞同：1
> 
> 时间：2012-05-21T19:28:02.933
> 
> 标签：objective-c, ios, ios5, dropbox, dropbox-api

我正在使用适用于 iOS 的 Dropbox api，并且一直在搞乱 loadDelta 函数。我得到了发送的整个“密钥”，我得到了结构的设置方式（参见下面的代码），但我不明白的是如何下载发送的文件以及如何将其保存到iOS 设备。有没有人知道如何做到这一点？

```
-(void)restClient:(DBRestClient *)client loadedDeltaEntries:(NSArray *)entries reset:(BOOL)shouldReset cursor:(NSString *)cursor hasMore:(BOOL)hasMore{
    for (DBDeltaEntry *file in entries) {
         if(!file.metadata.isDirectory){
             NSLog(@"File: %@ ", file.metadata.filename );
         }else {
             NSLog(@"Directory: %@  ", file.metadata.filename );
         }
     }
} 
```

该调用发回一个称为条目的数组。条目中的每个条目是这样的：

```
 @interface DBDeltaEntry : NSObject {
        NSString *lowercasePath;
        DBMetadata *metadata;
    } 
```

DBMetadata 对象为：

```
@interface DBMetadata : NSObject <NSCoding> {
    BOOL thumbnailExists;
    long long totalBytes;
    NSDate* lastModifiedDate;
    NSDate *clientMtime; // file's mtime for display purposes only
    NSString* path;
    BOOL isDirectory;
    NSArray* contents;
    NSString* hash;
    NSString* humanReadableSize;
    NSString* root;
    NSString* icon;
    NSString* rev;
    long long revision; // Deprecated; will be removed in version 2\. Use rev whenever possible
    BOOL isDeleted;

    NSString *filename;
} 
```

我想不通的是如何递归地设置我的离线结构或这样做的最佳实践。不过，我的假设是，使用 delta，我不需要保留我为更新目的而保存的文件的数据库，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T21:46:48.230

/delta 调用只告诉您发生了什么变化。它本身不会让您访问文件内容。如果您想下载您从 /delta 听到的任何特定文件，您应该使用它通过 /files (GET) 调用为您提供的路径来下载文件： [https ://www.dropbox.com/developers/reference /api#files-GET](https://www.dropbox.com/developers/reference/api#files-GET) （iOS SDK 将其作为 loadFile 函数提供。）

/delta 调用确实为您省去了必须调用 /metadata 来手动找出发生了什么变化并跟踪当前状态的麻烦，但请注意 Dropbox API 最佳实践 ( [https://www.dropbox.com/developers /reference/bestpractice](https://www.dropbox.com/developers/reference/bestpractice)）确实说在用户要求之前你不应该下载任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:26:12.020

一种方案是使用具有以下列的 SQLite 表：

*   `lc_path`：文件的小写路径（此表的主键）
*   `name`: 文件名
*   `lc_parent_path`: 父文件夹的小写路径
*   其他元数据...（上次修改、修订、is_dir 等）

因此，在处理“添加”`/delta`条目时，您在表中插入一行（您可能必须替换现有行）。

在处理路径 /a/b/c 的“删除”条目时，您还需要删除所有子项，因此您可以执行`DELETE ... WHERE lc_path = "/a/b/c"`然后`DELETE ... WHERE lc_path LIKE "/a/b/c/%"`.

如果要查询数据库以获取文件夹“/a/b/c”的直接子项列表，请执行`SELECT ... WHERE lc_parent_path = "/a/b/c"`

您可能已经注意到您的路径存储有些冗余（`lc_parent_path`+`name`和`lc_path`）。这可能不会成为问题。但是，如果您发现您的数据库太大并且大部分空间都用于存储路径字符串，那么您可以使用编码技巧。

# jsf-2 - Glassfish 3.1.2 Faces Servlet xhtml 未正确处理/缺少输出

> ID：10691372
> 
> 赞同：3
> 
> 时间：2012-05-21T19:28:27.987
> 
> 标签：jsf-2, facelets, glassfish-3

我有两个相似的页面，一个名为 index.xhtml，一个名为 index_old.xhtml，两者都在 Web Pages 根目录中，如 NetBeans 7.1.2 中所示。

index.xhtml 处理正确并具有正确的输出。

index_old.xhtml 似乎只显示硬编码文本而没有其他内容。

当 index.xhtml --> index_older.xhtml & index_old.xhtml --> index.xhtml 时，以前不能正常工作的 index_old.xhtml 现在显示正确的输出，而以前正常工作的 index.xhtml 现在不能显示正确的输出。

为什么会这样？这个问题是如何解决的？

以下是我的索引文件：

索引.xhtml：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html">
<h:head>
<title>Development Environment - THIS SITE IS A LIVE VIEW OF A WORK IN PROGRESS</title>
<h:outputStylesheet name="css/jsfcrud.css"/>
</h:head>
<h:body>
<h:graphicImage id="logo" value="/images/logo.PNG" width="256" height="55" />
<br />
<br />
Development Environment - THIS SITE IS A LIVE VIEW OF A WORK IN PROGRESS.
<br />
<br />
This is a live, fully functioning dynamic web site for the migration of the Service and Naming Standards Inventory workbook to
a web enabled, database hosted application.<br />  It's purpose is to allow for testing and development of expected functionality before
the application is deployed to a production server.<br />
<br />
For feature requests, change requests, and bug reports, please send a detailed email to 
<br />
<br />
<a href="/SNSI/secureNOC/indexSecure.xhtml">NOC personnel log in here</a>
<br />
<br />
<a href="/SNSI/secureBasic/indexBasic.xhtml">Other authorized personnel log in here</a>
</h:body>
</html> 
```

index_old.xhtml：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html">
<h:head>
<title>Development Environment - THIS SITE IS A LIVE VIEW OF A WORK IN PROGRESS</title>
<h:outputStylesheet name="css/jsfcrud.css"/>
</h:head>
<h:body>
<h:graphicImage id="logo" value="/images/logo.PNG" width="256" height="55" />
<br />
<br />
Development Environment - THIS SITE IS A LIVE VIEW OF A WORK IN PROGRESS.
<br />
<br />
This is a live, fully functioning dynamic web site for the migration of the Service and Naming Standards Inventory workbook to
a web enabled, database hosted application.<br />  It's purpose is to allow for testing and development of expected functionality before
the application is deployed to a production server.<br />
<br />
For feature requests, change requests, and bug reports, please send a detailed email to 
<br />
<br />
<h:form>
<h:commandLink action="/darkFiber/List" value="Open Dark Fiber Table" target="_blank"/>
</h:form>
<h:form>
<h:commandLink action="/darkFiberCircuitIdAid/List" value="Open Dark Fiber Circuit ID Aid Table" target="_blank"/>
</h:form>
</h:body>
</html> 
```

* * *

按照 BalusC 的建议进行了更改，结果收到了错误和堆栈跟踪。请参阅下面的错误和堆栈跟踪：

```
An Error Occurred:
/faces/index.xhtml Not Found in ExternalContext as a Resource
- Stack Trace

com.sun.faces.context.FacesFileNotFoundException: /faces/index.xhtml Not Found in ExternalContext as a Resource
    at com.sun.faces.facelets.impl.DefaultFaceletFactory.resolveURL(DefaultFaceletFactory.java:232)
    at com.sun.faces.facelets.impl.DefaultFaceletFactory.resolveURL(DefaultFaceletFactory.java:273)
    at com.sun.faces.facelets.impl.DefaultFaceletFactory.getMetadataFacelet(DefaultFaceletFactory.java:209)
    at com.sun.faces.application.view.ViewMetadataImpl.createMetadataView(ViewMetadataImpl.java:114)
    at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:233)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T20:40:52.143

如果您将`FacesServlet`in映射到`web.xml`URL 模式`/index.xhtml`而不是`*.xhtml`.

相应地修复它。

```
<servlet-mapping>
    <servlet-name>facesServlet</servlet-name> <!-- Or whatever name it has -->
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping> 
```

* * *

**更新**：根据您更改后的新问题，

> com.sun.faces.context.FacesFileNotFoundException：/faces/index.xhtml 在 ExternalContext 中找不到作为资源

从浏览器地址栏中的 URL 中删除`/faces`部分。

# java - 在coolbar（Eclipse RCP）中选择的第一张图片

> ID：10691375
> 
> 赞同：0
> 
> 时间：2012-05-21T19:28:38.200
> 
> 标签：java, eclipse, rcp

在我的应用程序启动后，酷栏被加载并自动选择第一个项目。我不想要那个。是否可以删除此选择？

截图：http: [//i.imgur.com/q15X1.png](http://i.imgur.com/q15X1.png)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T07:26:36.343

我认为这是因为该按钮（或更确切地说是工具栏）当前具有焦点。要移除焦点，您必须将其设置为另一个控件。您是否实现了`setFocus()`“Übersicht”视图的方法？

# ruby-on-rails - 从 object.new 中删除临时对象？

> ID：10691377
> 
> 赞同：1
> 
> 时间：2012-05-21T19:29:01.400
> 
> 标签：ruby-on-rails, nested, show, destroy

在 show 动作中，有一个逻辑需要我定义：

```
@object.nested_object.new (or @object.nested_object.build or @object.nested_object.create) 
```

但是，当是时候使用类似的东西显示nested_objects 列表时：

```
@object.nested_objects.each do |nested_objects|
  #display
end 
```

使用@object.nested_object.new 创建的临时嵌套对象有一个额外的行项。

有没有办法在显示实际嵌套对象列表之前强制删除该临时对象？

或者是否有另一种方法来完成以下操作：

```
-creating a temporary nested_object for logic tests
-showing a list of nested_objects 
```

我尝试过类似的东西：

```
temp_nested_object = @object.nested_object.new
temp_nested_object.delete 
```

但没有成功。

谢谢你的时间！

更新：我正在努力做到这一点：

```
<% if can? :create, @project.tasks.build %> 
```

从这里： [https](https://github.com/ryanb/cancan/wiki/Nested-Resources) ://github.com/ryanb/cancan/wiki/Nested-Resources 我试图找到其他方法来实现这一点： [https](https://github.com/ryanb/cancan/issues/608) ://github.com/ryanb/cancan/issues/608 但似乎我需要在视图中解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:33:44.877

首先你不应该`create`是一个临时对象。

如果您遵循之前的建议，只需执行以下操作：

```
@object.nested_objects.select(&:persisted?).each do |nested_objects|
  #display
end 
```

这将从您的数据库中过滤对象（无需删除临时对象，它将在请求结束时消失）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T19:53:24.600

一种可能性是从集合中删除它：

```
# Remove last object in collection
@object.nested_objects.pop 
```

# facebook - 侧边栏提要的 Facebook API

> ID：10691382
> 
> 赞同：2
> 
> 时间：2012-05-21T19:29:28.187
> 
> 标签：facebook, facebook-graph-api

我正在尝试查找 FB Graph API 请求以获取该侧边栏上的提要，顺便说一句，我真的不知道它的名称，这对谷歌搜索有很大帮助。

所以，问题是： 1 - 是否有任何图表请求？2 - 侧边栏的名称是什么？

我附上一张图片只是为了确定。！

![脸书侧边栏](../Images/61ae69ab06b097d3775adfd68acd6027.png)

# sorting - 合并排序实现

> ID：10691384
> 
> 赞同：0
> 
> 时间：2012-05-21T19:29:35.460
> 
> 标签：sorting

我无法获得正确的排序列表。我不确定我做错了什么。

```
merge_sort = function(list)
{
    #split list in half
    #sort each half
    #merge each half
    if(length(list<2))
        result = list
    else
    {
        middle = ceiling(length(list)/2)
        left = list[1:middle]
        right = list[middle+1:length(list)]
        merge_sort(left)
        merge_sort(right)
        while(min(length(left),length(right)) >0)
        {
            if(left[1] < right[1])
            {
                result = c(result,left[1])
                if(min(length(left),length(right)) >= 2)
                { 
                result = c(result,left[2:length(left)])
                result = c(result, right[2:length(right)])
                }
            }               
            else
            {
                result = c(result,right[1])
                if(min(length(left),length(right)) >= 2)
                { 
                result = c(result,right[2:length(right)])
                result = c(result, left[2:length(left)])
                }
            }
        }

    }
    return(result)
    print(result)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T19:40:42.610

难道你应该使用 `right = list[middle:length(list)]`而不是`right = list[middle+1:length(list)]`.

# android-webview - Android：带有Webview的Listview不可点击

> ID：10691385
> 
> 赞同：0
> 
> 时间：2012-05-21T19:29:45.130
> 
> 标签：android-webview

我有一个扩展 ListActivity 的活动。布局包含一些通用小部件和从 WebView 派生的自定义小部件：

```
<com.Android.myPrj.myWidget
                 xmlns:android="http://schemas.android.com/apk/res/android"
                 android:id="@+id/mywidget"
                 android:layout_width="200px"
                 android:layout_height="35px"
                 android:focusable="false"
                 android:clickable="false"
                 android:focusableInTouchMode="false"
             /> 
```

当我将可见性设置为 GONE 或删除自定义小部件时，一切正常。但是，如果绘制了小部件，我将无法单击该元素。甚至没有调用 onListItemClick。我能做些什么？

谢谢塔塔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T20:13:15.303

WebView 在 ICS 中有错误。我必须明确设置

```
 mWebView.setFocusable(false);
    mWebView.setClickable(false); 
```

完成工作。XML 似乎没有任何效果。

# sql - 为什么 Ordered By 被忽略？

> ID：10691392
> 
> 赞同：0
> 
> 时间：2012-05-21T19:30:07.177
> 
> 标签：sql, oracle, sql-order-by, dotconnect

我希望我的 SQL 返回给定日期的所有记录，最近的记录在顶部（我排序的列包含日期和时间 - 包含诸如“5/21/2012 11:48:04 AM ”）。

我认为我的 sql（如下）会这样做。然而，实际结果忽略了时间因素。它们是这样返回的：

```
2012 年 5 月 21 日上午 10:48:04
2012 年 5 月 21 日上午 10:12:04
2012 年 5 月 21 日上午 9:48:04
2012 年 5 月 21 日上午 10:54:04
2012 年 5 月 21 日上午 11:48:04
...
```

（IOW，就时间元素而言，返回的结果只是随机排序的）

查询是：

```
SELECT ENTRYDATE ENTERED, ENTEREDBYABC ABC
FROM 
   SomeTable v 
   LEFT JOIN SomeTable w ON v.someCol = w.someCorrespondingCol
WHERE
   ABC = :abc AND ENTRYDATE = trunc(sysdate) 
ORDER BY ENTERED DESC 
```

## 更新

更具体的查询和结果：

这（列名和表名已更改）：

```
SELECT ENTRYDATE ENTERED, ENTEREDBYABCID ABCID, COMMENTS
FROM 
  WHITMAN.HOLLOWSKY@ATTORNEY v 
  LEFT JOIN ABCworker w ON v.enteredbyabcid = w.abcid
WHERE
  ABCID = 124393 AND ENTRYDATE = TRUNC(sysdate) 
ORDER BY ENTRYDATE desc 
```

...返回记录：

```
ENTERED     ABCID   COMMENTS
5/21/2012   1234    At 1:36 PM, ...
5/21/2012   1234    At 1:36 PM, ...
5/21/2012   1234    At 9:23 AM, ...
5/21/2012   1234    At 11:07 AM, ...
5/21/2012   1234    At 11:12 AM, ...
5/21/2012   1234    At 1:42 PM, ...
5/21/2012   1234    At 11:02 AM, ...
5/21/2012   1234    At 9:19 AM, ...
. . . 
```

## 再次更新

使用查询：

```
select entrydate from WHITMAN.HOLLOWSKY@ATTORNEY order by entrydate desc 
```

我得到：

```
5/21/2012 3:15:50 PM
5/21/2012 3:15:35 PM
5/21/2012 3:15:25 PM
5/21/2012 3:15:25 PM
5/21/2012 3:14:31 PM
5/21/2012 3:14:22 PM
5/21/2012 3:14:11 PM
. . . 
```

IOW，它工作得很好。

“entrydate”是否是 DateTime 列 - 我认为是这样，但我没有权限查看表结构，所以......？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T19:41:00.910

我怀疑问题在于您要加入的其中一个表中有一个名为“ENTERED”的列。

因此，您按该列排序，即使它不在 SELECT 列表中。要解决此问题，您应该执行以下操作之一：

```
ORDER BY 1 
```

或者

```
ORDER BY ENTRYDATE 
```

（第二个已经在格伦的评论中提到过。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T23:20:00.960

你`ORDER BY`很荣幸。问题是您选择的所有 11 行的时间分量必须是午夜才能满足谓词

```
entrydate = TRUNC(sysdate) 
```

查询

```
SELECT ENTRYDATE ENTERED, ENTEREDBYABCID ABCID, COMMENTS
  FROM WHITMAN.HOLLOWSKY@ATTORNEY v 
       LEFT JOIN ABCworker w ON v.enteredbyabcid = w.abcid
 WHERE ABCID = 124393 
   AND ENTRYDATE = TRUNC(sysdate) 
 ORDER BY ENTRYDATE desc 
```

询问`entrydate`今天午夜所在的所有行，然后按`entrydate`. 根据定义，因为只有一个可能的值`entrydate`满足谓词，所以它`ORDER BY`是不相关的。所有 11 行都具有完全相同的值，`entrydate`因此对该值进行排序会产生任意排序的结果。Oracle 可以非常正确地以任何顺序返回 11 行，并且仍然遵守您的`ORDER BY`子句。

也许您想按存储在`comments`列中的时间而不是`entrydate`. 也许您想更改谓词以返回`entrydate`今天某个时间的所有行。

```
AND trunc(entrydate) = trunc(sysdate) 
```

也许你想做点别的。

# sencha-touch - Sencha Touch 2 获得记录

> ID：10691394
> 
> 赞同：2
> 
> 时间：2012-05-21T19:30:12.537
> 
> 标签：sencha-touch, sencha-touch-2

在我的控制器中，我想从本地存储中获取随机记录并显示在视图中，我该怎么做？

在我的配置中，我有：

```
stores: ['Items'] 
```

在我的功能中，我有：

```
var mystore = (this.getStores())[0];  
var index = this.getRandomInt(0, mystore.totalCount() -1);
var nextItem = mystore.getAt(index); 
```

但它卡在第一行

也许有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:49:15.387

```
 mystore.totalCount() 
```

should be

```
 mystore.getCount() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:59:54.687

Here's the function you shoud use

```
var getRandomRecord = function(store){
  var s = Ext.getStore('store');
  var r = s.getAt(Math.floor(Math.random()*(s.getCount()-1)));
  return r;
} 
```

And you call it like this :

```
var randomRecord = getRandomRecord('Items'); 
```

Hope this helps

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T00:31:52.237

Since your store is called 'Items' i would:

```
var mystore = Ext.getStore('Items'); 
```

is the most reliable way to get the instance of the store.

# ruby-on-rails-3 - 与验证的多态关联[甚至可能吗？？]

> ID：10691395
> 
> 赞同：2
> 
> 时间：2012-05-21T19:30:18.920
> 
> 标签：ruby-on-rails-3, validation, activerecord

我想知道我是否可以进行多态关联以及存在验证

假设我有一个`business`模型和一个`address`模型，并且`address`是多态的

```
class Business< ActiveRecord::Base
  has_one :address, as: :addressable
  validates_presence_of :address
end

class Address< ActiveRecord::Base
  belongs_to :addressable, polymorphic: true
end 
```

是否可以进行验证`validates_presence_of :address`？使用此设置创建对象时遇到问题。

假设首先我创建了一个这样的业务对象

```
b = Business.new(name: "Hello23")
b.address = Address.new(street: "House 43 BCD")
b.save! 
```

这行不通。它给出了一个`undefined method constantize for 0:Fixnum`并且给出一个错误是有意义的，因为当它试图将地址保存到 db 时，它没有找到可寻址的 id，因为业务尚未保存并且没有分配给它的 id .

但从另一边也不可能 - 如果没有地址，我无法保存业务。

处理这种情况的最佳方法是什么？

****除此之外，如果我还想像这样在地址端进行验证怎么办**

```
validates_presence_of :addressable 
```

我已经为此苦苦挣扎了大约 2 天。让我们看看你们有什么想法？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-21T20:12:15.517

我认为您的问题与验证码无关，无论哪种方式都可以。

我可以大胆地建议您可能错误地将地址数据库表中的 addressable_type 列设置为整数，而不是字符串:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T20:12:34.223

当然这是可能的。

至于对象创建，这应该有效：

```
# controller.rb
@business = Business.new
@business.build_address

# view.erb
<%= form_for @business do |f| %>
  <%= f.fields_for :address do |address_form| %>
  ...
  <% end %>
<% end %> 
```

另请参阅[在 rails 中使用带有 has_one 关联的构建](https://stackoverflow.com/q/2472982/820520)。

注意：在您的模型中，我建议您使用新的验证格式：

```
class Business< ActiveRecord::Base
  has_one :address, as: => :addressable

  validates :address, :presence => true
end 
```

希望这会有所帮助。

# asp.net-mvc-3 - 部署 MVC3 EF 代码优先站点

> ID：10691396
> 
> 赞同：1
> 
> 时间：2012-05-21T19:30:23.457
> 
> 标签：asp.net-mvc-3, web-hosting

我已经（在这里的一些其他用户的帮助下）在 MVC3 中构建了一个简单的博客应用程序，我计划将其用作我的个人网站。它目前在我的机器上本地运行良好，但我知道尝试在线上传它会遇到重大障碍（GoDaddy）。

基本上我的问题是...

上传和激活 MVC3 站点的最佳方式是什么？这对于 Code First 有什么作用？我以前应该在技术上在 SQL Server 中创建表吗？如果我想在之后对表格进行更改，我只会丢失我在网上拥有的所有数据（假设我没有经常做的所有事情）。

我想我主要担心的是我真的只想让这个网站上线运行，但我还有很多工作要做。我希望能够在网站本身上发布有关网站进度的博客文章，因此我不想在更改内容时丢失任何这些数据。

我很抱歉，因为我对此很陌生，所以提前谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:35:02.653

您可以让 Entity Framework 第一次为您创建表，但您应该禁止它稍后删除您的数据库。最好的方法是使用 Entity Framework 的数据库迁移，它会创建包含最新更改的代码。通过执行该代码，您将只执行这些操作，而不会删除整个数据库。您还可以让数据库迁移生成 SQL 语句，以便您可以通过 SQL Management Studio (SSMS) 执行此操作。

查看 EF 数据库迁移的这个简单示例：[http ://www.davidhayden.me/blog/asp.net-mvc-4-and-entity-framework-database-migrations](http://www.davidhayden.me/blog/asp.net-mvc-4-and-entity-framework-database-migrations)

# apache - 设置 htaccess 文件

> ID：10691397
> 
> 赞同：0
> 
> 时间：2012-05-21T19:30:23.520
> 
> 标签：apache, .htaccess, http-status-code-301

我正在启动一个站点，并希望设置一个 htaccess 文件以 301 将旧链接从旧站点重定向到新站点。我希望它尽可能有用，所以我想将旧站点的特定链接重定向到新站点上具有相似内容的页面。

我想要完成的是，如果有人去 www.oldsite/oldlink.html，他们将被重定向到 www.newsite.com/newlink.html，但如果他们去任何其他页面，他们将被重定向到 www。 newsite.com/。

我知道我可以在我的 htaccess 文件中使用这样的代码来完成第一部分（将单个页面重定向到另一个页面）：

```
Redirect 301 /oldlink.html
http://www.newsite.com/newlink.html/ 
```

我的问题围绕着想要为我没有在这里特别指出的任何链接创建一个“包罗万象”重定向，因为我不知道它们存在等等。我知道我可以做到这一点：

```
Redirect 301 / 
http://www.newsite.com/ 
```

但这会覆盖我在上面创建的 oldlink.html 重定向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:55:24.960

你可以使用这个：

```
RewriteEngine on
RewriteRule oldlink.html http://www.newsite.com/newlink.html [NC,R=301,L] 
RewriteRule (.*) http://www.newdomain.com/ [NC,R=301,L] 
```

（NC = 不区分大小写/不区分大小写；L = 最后规则）

如果第一个 RewriteRule 匹配，则不会使用第二个。您可以根据需要添加任意数量的规则。您还可以通过使用将[http://www.oldsite.com/somelink.html](http://www.oldsite.com/somelink.html)重定向到[http://newsite.com/somelink.html](http://newsite.com/somelink.html)（仅将“旧站点”更改为“新站点”，而不是页面名称）

```
RewriteRule ^(.*)\.html$ http://www.newsite.com/$1.html [R=301,NC,L] 
```

# templates - 如何通过组件链接从 Tridion Razor 模板中的富文本字段插入片段

> ID：10691400
> 
> 赞同：2
> 
> 时间：2012-05-21T19:30:30.140
> 
> 标签：templates, razor, tridion, razor-mediator

到目前为止，我的研究一直没有成功，但我正在寻找一种方法，让 Tridion 中富文本字段的内容编辑器能够从富文本字段中调用内容组件。我正在使用 Razor 模板。

也许某些内容的示例可能会阐明我的意思。如果下面是富文本，我希望在发布期间将文本“tcm:mytcm”识别并处理为命令，以从该富文本字段所在的另一个组件内部呈现该组件，而不是处理它作为文本。我用 { 将它分开来说明某种语法是合适的。

富文本：这是富文本，这是我要从其中链接到的组件 {tcm:mytcm}。这是之后出现的一些更丰富的文本。

本质上，这样做的主要目的是提供一种将更复杂的 html 代码的“片段”内嵌到富文本中的方法。要插入的内容的示例是具有各种参数的超链接，或对 Web 服务变量的调用等。该片段的标记/代码将由 tcm:mytcm 的组件模板生成，并在发布期间代替调用它的富文本条目。

如果这种通用方法是错误的方向，我愿意接受有关如何进行此插入的任何想法。任何建议或方向将不胜感激。到目前为止，我在文档或任何其他在线线程中都没有看到任何解决此问题的内容，但也许我的搜索词不是最好的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T22:15:53.397

前段时间我用“词汇表”链接做了一些类似的事情，编辑器可以创建一个指向包含术语扩展定义（链接文本）的组件的链接，我们必须在发布时获取这个扩展的定义并将其包含在 Javascript 中（这样如果访问者将鼠标悬停在文本上，文本将显示在一个小气泡中）。

它涉及以下步骤：

1.  使用 XML 解析富文本字段
2.  查找 RTF 中所有指向 tcm URI 的锚点
3.  查找目标组件是否基于词汇表模式
4.  如果是，则将目标组件的“词汇表文本”读入锚的单独属性，并修改一些其他值。

我认为在 Razor 模板中执行此操作将比在模板中将其作为后处理步骤复杂得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T19:51:58.160

我对 Razor Mediator 知之甚少，但这是 C#、XSLT 和 Dreamweaver 模板的常见挑战。我认为您最好的选择是使用 XSLT 或 C# 对组件进行预处理，并将喜欢的 TCMURI 替换为其他组件的 XML 或其他数据，然后它们继续使用传统的记录技术来访问包中的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T19:07:35.453

Just to add a (hopefully useful) Code Sample to support Chris And Nuno's answer about post processing it in C#. It is partially pseudo code. I am very bad at RegEx, so this you need to figure out. Also in the ReplaceUrls() Method you need to add whatever it is you want based on certain code between the {}:

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;
using Tridion.ContentManager.Templating;
using Tridion.ContentManager.Templating.Assembly;
using Tridion.ContentManager.ContentManagement;
using Tridion.ContentManager.ContentManagement.Fields;

namespace TBB.Templates
{
    public class ReplaceString : TemplateBase
    {
        private static readonly Regex tcmReference = new Regex(@"{tcm:mytcm})", RegexOptions.IgnoreCase | RegexOptions.Multiline | RegexOptions.Singleline | RegexOptions.Compiled);
        private string _outputContent;

        public override void Transform(Engine engine, Package package)
        {
            this.Initialize(engine, package);
            Page page = this.GetPage();

            this._outputContent = package.GetByType(new ContentType("text/html")).GetAsString();

            ReplaceUrls();

            package.GetByType(new ContentType("text/html")).SetAsString(this._outputContent);
        }

        private void ReplaceUrls()
        {
            string[] textContainer = new string[] { this._outputContent };
            foreach (Match match in TemplateUtilities.GetRegexMatches(textContainer, tcmReference))
            {
                Group group = match.Groups["url"];
                if (group.Value.Contains("specific"))
                {
                    this._outputContent = this._outputContent.Replace("specificParam", "SnippetCode");
                }
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T06:12:45.940

克里斯和努诺说的是答案：

[Nuno](https://stackoverflow.com/a/10693395/9967)描述了实际处理链接组件的逻辑

[Chris](https://stackoverflow.com/a/10691674/9967)提出了一个关键点，即最好在到达 Razor TBB 之前将其作为预处理步骤来完成。您可以修改包中的 XML。

# arrays - Fortran 中的数组声明

> ID：10691401
> 
> 赞同：5
> 
> 时间：2012-05-21T19:30:36.787
> 
> 标签：arrays, fortran, variable-declaration

考虑

```
INTEGER,DIMENSION(3) :: NumberVector 
```

和

```
INTEGER              :: NumberVector(3) 
```

这两个声明之间有什么区别还是完全相同？（我的意思是在任何可能的上下文和变化中：例如，在这两个相同的情况下，如果我将具有隐式大小的数组声明为子程序的输入参数之一呢？它仍然无关紧要吗？我用了？）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T20:52:57.583

是的，它是相同的。即使是假设的、延迟的和任何可能的形式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T05:40:16.320

该`DIMENSION`属性被添加到 Fortran 90 以提高代码清晰度并在声明多个相同类型的数组时节省代码（在科学计算中并不罕见），例如，而不是

```
REAL :: mat1(10,20), mat2(10,20), mat3(10,20), mat4(10,20), mat5(10,20) 
```

可以写

```
REAL, DIMENSION(10,20) :: mat1, mat2, mat3, mat4, mat5 
```

除了减少源代码大小和编译时间（更少的解析；现在不那么相关）之外，这还减少了在任何声明中出错的可能性。否则，两种形式都是相等的，并且声明的变量在程序中的任何地方都以完全相同的方式表现。

# php - 在 PHP 中定义可在所有文件中使用的全局常量的最佳方法是什么？

> ID：10691404
> 
> 赞同：28
> 
> 时间：2012-05-21T19:30:48.810
> 
> 标签：php, variables, global-variables, constants

定义全局常量的最佳方法是什么，即在所有 PHP 文件中都可用？

**更新：**常量和类常量有什么区别？它们可以互换使用吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-21T19:33:46.513

*在您的顶级*.php 文件中定义您的常量，该文件将包含在所有其他脚本中。它可能是您的前端控制器、您的配置文件或为此单一目的而创建的文件。

```
!defined('MY_CONST') && define('MY_CONST', 'hello'); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-21T19:34:21.563

请执行下列操作：

```
define("CONSTANT_NAME","value"); 
```

如果你想从其他 php 文件中访问这个常量，你必须包含它：

```
include_once("thefilewiththeconstant.php"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-30T05:28:02.933

当你想跨 PHP 文件使用全局常量时，我​​觉得一个很好的做法是使用面向对象的原则并在相关的类中定义这些。使用 PHP 内置的 spl_autoload_register() 函数，您可以定义所有以后的类来扩展相关的“全局类”，而不必担心在任何地方手动包含文件。该全局类的所有后续子类将始终可以访问相关的全局变量。（我说相关是因为让类中的全局常量以某种方式相关是一种很好的设计，而不是所有东西都没有押韵或理由地组合在一起）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T19:42:22.203

检查这个

```
<?php
//Global scope variables
$a = 1;
$b = 2;

 function Sum()
 {
global $a, $b;

$b = $a + $b;
 } 

Sum();
echo $b;
?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-23T19:52:17.377

这取决于。在您的情况下，我会选择它，`define()`因为它的使用语法更紧凑。但是`define()`只能在 PHP < 7.0 中保存标量值 如果您需要一个关联数组，那么您别无选择，然后选择`$GLOBALS`或使用 PHP >=7.0。

```
// Storing a single value works fine with define
define( 'ROOT_DIR', dirname(dirname(__FILE__)) . '/' );

// But not for complex data types like this array
$USERPIC_PARAMS = array(
            "user_root"       => "images/users",
            "padding_length"    => 8,
            "split_length"      => 4,
            "hash_length"         => 12,
            "hide_leftover"     => false
    );

// Then you need $GLOBALS
$GLOBALS['USERPIC_PARAMS']  = $USERPIC_PARAMS;
// Or in PHP >=7.0
define( 'USERPIC_PARAMS', $USERPIC_PARAMS );

// output your define
echo ROOT_DIR;
// output your $GLOBALS var
echo $GLOBALS['USERPIC_PARAMS'];
// output in PHP >=7.0 your constant
echo USERPIC_PARAMS; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-21T19:38:39.460

无论您在哪个文件中创建常量，您都必须在将使用它们的文件中要求/包含它。

否则，您可以使用 $_SESSION 全局变量，但这需要`session_start()`在每个文件的代码开头进行会话初始化。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-15T17:47:09.987

更好的方法是检查常量是否被分配给任何东西，如果它没有被分配给任何东西然后分配它，否则将它分配给 NULL 然后将它分配给你的常量

```
defined("FOO") ? null : define("FOO", "BAR"); 
```

# php - js日历在多个标签中的使用

> ID：10691405
> 
> 赞同：0
> 
> 时间：2012-05-21T19:30:54.823
> 
> 标签：php, javascript, tabs

我是 php 编程的初学者，我有以下问题：我想在三个 javascript 选项卡中使用 jsdatepick-calendar，所以我从这个日历中根据目标 ID 在具有不同 ID 的同一函数中创建三个对象，但不幸的是两个其中一个运行良好，而第三个则不行。

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T20:16:52.623

给定 JS 选项卡式菜单 CSS，您可以通过修改日历的 CSS 选择器使其正常工作，以便它们仅适用于特定`UL`id/ 或者您可以修改选择器以使 CSS 选项卡仅适用于某些 id。

从选项卡式 CSS 中删除`.tabbed-area div div { background: white; padding: 20px; min-height: 250px; position: absolute; top: -1px; left: 0; width: 100%; }`（在此处尝试[http://jsfiddle.net/f88gr/2/](http://jsfiddle.net/f88gr/2/)）使其正确显示。现在您只需为日期日历弹出窗口分配一个唯一的 id 并更改选择器以使其正常显示。

# c# - 从 SQL Server 代理（作业）运行 C# 控制台应用程序？

> ID：10691408
> 
> 赞同：7
> 
> 时间：2012-05-21T19:31:10.433
> 
> 标签：c#, .net, sql, sql-server-2008-r2

这可能是一个非常简单的问题，但我一直在尝试过去 4-5 小时，但没有成功。:(

我有一个 C# 控制台应用程序，它只打开一个 excel 文件。这个 excel 文件有 Workbook_Open() 事件，它运行我的宏。我的宏只是在活动工作表中将 sheet1 重命名为 RenameSheet1。

我可以从 IDE 运行我的 C# 项目。我想从 SQL 作业（SQL server 2008）运行这个项目。我该怎么做？请帮我完成这项工作。谢谢。

根据 SilverNinnjas 创建代理帐户的建议：

-- 创建包含域帐户 CORP\PowerUser1 及其密码的凭据

```
CREATE CREDENTIAL PowerUser1 WITH IDENTITY = N'CORP\shress2', SECRET = N'P@ssw0rd'
GO
USE [msdb]
GO 
```

-- 创建一个名为 ExcelProxy 的新代理并为其分配 PowerUser 凭据

```
EXEC msdb.dbo.sp_add_proxy 
@proxy_name=N'ExcelProxy',
@credential_name=N'PowerUser1',
@enabled=1 
```

-- 授予 ExcelProxy 访问“CmdExec”子系统的权限

```
EXEC msdb.dbo.sp_grant_proxy_to_subsystem 
@proxy_name=N'ExcelProxy', 
@subsystem_name =N'CmdExec' 
```

-- 授予登录testUser使用ExcelProxy的权限

```
EXEC msdb.dbo.sp_grant_login_to_proxy 
@login_name = N'shress2', 
@proxy_name=N'ExcelProxy'
GO 
```

我仍然遇到与用户相同的错误：CORP\shress2。

> 未处理的异常：System.Runtime.InteropServices.COMException：Microsoft Excel 无法访问文件“E:\data_extracts\RenameSheets.xlsm”。有几个可能的原因：
> 文件名或路径不存在。
> 该文件正被另一个程序使用。
> 您尝试保存的工作簿与当前打开的工作簿同名。在 Microsoft.Office.Interop.Excel.Workbooks.Open（字符串文件名、对象 UpdateLinks、对象只读、对象格式、对象密码、对象 WriteResPassword、对象 IgnoreReadOnlyRecommended、对象来源、对象分隔符、对象可编辑、对象通知、对象转换器、对象AddToMru, Object Local, Object CorruptLoad) at T_OpenExcel.Program.Main(String[] args) in C:\Users\shress2\documents\visual studio 2010\projects\T_OpenExcel\T_OpenExcel\Program.cs:line 24\. 进程退出代码-532462766。步骤失败。

有什么理由吗？我急切地等待任何反馈。非常感谢。

@SilverNinja，这是我的 C# 代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Excel = Microsoft.Office.Interop.Excel;
using System.Threading;

namespace T_OpenExcel
{
class Program
{
    static void Main(string[] args)
    {

        Excel.Application xlApp;
        Excel.Workbook xlWorkBook;
        //Excel.Worksheet xlWorkSheet;

        object misValue = System.Reflection.Missing.Value;

        xlApp = new Excel.Application();
        xlApp.Visible = true;
        xlWorkBook = xlApp.Workbooks.Open("\\\\myserver\\data_extracts\\RenameSheets.xlsm", 0, false, 5, "", "", false, Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "\t", false, false, 0, true, 1, 0);

       xlApp.DisplayAlerts = false;
       xlWorkBook.SaveAs("\\\\myserver\\data_extracts\\RenameSheets.xlsm", Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Excel.XlSaveAsAccessMode.xlNoChange, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing);

                  xlWorkBook.Close(true, misValue, misValue);
        xlApp.DisplayAlerts = true;

        xlApp.Quit();
    }

    private static void RunMacro(Excel.Workbook xlWorkBook, object[] p)
    {
        //throw new NotImplementedException();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T19:34:47.403

您只需要在**New Job Step**编辑器中选择适当的*Job Type 。*您可以使用**Powershell**或**CmdExec**。

 ******在命令区域中，单击**打开**按钮以找到您的控制台应用程序编译的可执行文件 (exe)。

如果您有任何参数，请在此处添加它们 - 否则配置计划。

您可能必须使用提升的权限。要使用提升的权限，只需导航到SSMS 中的**Security->Credentials**并右键单击**New Credential**。接下来，在**Sql Server Agent->Proxies**下配置**Proxy Account**并右键单击**New Proxy**。**为CmdExec**配置代理并使用您之前设置的**凭据。**在您的 SQL 代理作业步骤中，您可以选择在运行命令时使用此凭据。

 ******在 SQL 作业步骤命令区域中，您应该键入如下内容：

```
excel E:\data_extracts\RenameSheets.xlsm 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-19T19:13:33.760

新工作

命令执行

现在从中运行exe文件

它会给出异常。

更改exe代码。

您不能将远程服务器路径设为本地到同一 sql 服务器 \\myserver\data_extracts\RenameSheets.xlsm 到 d:\data_extracts\RenameSheets.xlsm 或使用复制 bin exe 文件路径的文件路径。Path.GetDirectoryName(Application.ExecutablePath) 例如。值：C:\Projects\ConsoleApplication1\bin\Debug\RenameSheets.xlsm

确保只有一个 exe 正在运行，否则会出现错误文件已打开

运行exe代码它会工作。命令提示符无法访问网络路径。

xlApp = new Excel.Application(); xlApp.Visible = true; xlWorkBook = xlApp.Workbooks.Open("C:\Projects\ConsoleApplication1\bin\Debug\RenameSheets.xlsm

", 0, false, 5, "", "", false, Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "\t", false, false, 0, true, 1, 0);

```
 xlApp.DisplayAlerts = false;
   xlWorkBook.SaveAs("C:\Projects\ConsoleApplication1\bin\Debug\RenameSheets.xlsm", Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Excel.XlSaveAsAccessMode.xlNoChange, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing);

              xlWorkBook.Close(true, misValue, misValue);
    xlApp.DisplayAlerts = true; 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2018-07-18T10:00:37.513

只需在 New Job Step 编辑器中选择适当的 Job Type。您可以使用 Powershell 或 CmdExec。

在命令区域中，单击打开按钮以找到您的控制台应用程序编译的可执行文件 (exe)。

如果您有任何参数，请在此处添加它们 - 否则配置计划。

您可能必须使用提升的权限。要使用提升的权限，只需导航到 SSMS 中的 Security->Credentials 并右键单击 New Credential。接下来，在 Sql Server Agent->Proxies 下配置 Proxy Account 并右键单击 New Proxy。为 CmdExec 配置代理并使用您之前设置的凭据。在您的 SQL 代理作业步骤中，您可以选择在运行命令时使用此凭据。

在 SQL 作业步骤命令区域中，您应该键入如下内容：

excel E:\data_extracts\RenameSheets.xlsm************

# javascript - 在 JSON 对象的开头添加新属性

> ID：10691409
> 
> 赞同：7
> 
> 时间：2012-05-21T19:31:17.500
> 
> 标签：javascript, json, object

我有这个 JSON：

```
var myVar = {
     "9":"Automotive & Industrial",
     "1":"Books",
     "7":"Clothing"
}; 
```

我想在开始时添加一个新元素，我想最终得到这个：

> ```
> var myVar = {
>      "5":"Electronics",
>      "9":"Automotive & Industrial",
>      "1":"Books",
>      "7":"Clothing"
> }; 
> ```

我试过这个，但它不工作：

```
myVar.unshift({"5":"Electronics"}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-21T19:46:40.800

**根据定义，Javascript 对象没有与它们关联的顺序，因此这是不可能的**。

如果你需要一个订单，你应该使用一个**对象数组：**

```
var myArray = [
    {number: '9', value:'Automotive & Industrial'},
    {number: '1', value:'Books'},
    {number: '7', value:'Clothing'}
] 
```

那么如果你想在第一个位置插入一些东西，你可以使用Arrays的unshift方法。

```
myArray.unshift({number:'5', value:'Electronics'})

//myArray is now the following
[{number:'5', value:'Electronics'},
 {number: '9', value:'Automotive & Industrial'},
 {number: '1', value:'Books'},
 {number: '7', value:'Clothing'}] 
```

更多详细信息： [JavaScript 保证对象属性顺序吗？](https://stackoverflow.com/q/5525795/339967)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T19:33:44.707

无法向 JSON 添加新条目并控制它们的位置。

如果你想处理顺序[奇怪，因为对象是无序的]，你基本上必须创建一个新对象并附加数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T19:33:52.350

Javascript 对象属性不是确定性排序的。无论属性是什么顺序，都可以访问它们。如果您依赖它们以特定顺序进行`for-in`循环，我建议您重新考虑您的策略。不同的浏览器将采用不同的方法对属性进行排序。虽然许多浏览器实际上会按照您创建它们的顺序处理它们，但该行为实际上并未在语言规范中定义，因此您不能依赖它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-21T20:14:47.917

我认为 unshift 问题可能来自于你是一个关联数组的事实。 [关联数组的定义](http://en.wikipedia.org/wiki/Associative_array)

这可能是一个 hack，但是如果您必须在 JSON 对象的开头具有该值，那么：

```
var myNewVar={'5':'Electronics'};
for (xx in myVar) {
    myNewVar[xx]=myVar[xx];
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-24T23:22:25.770

这可以使用[lodash](http://lodash.com/docs#merge)合并函数来完成，如下所示：

```
var myObj = _.merge({ col1: 'col 1', col2: 'col 2'}, { col3: 'col 3', col4: 'col 4' }); 
```

您的最终对象将如下所示：

```
{ col1: 'col 1', col2: 'col 2', col3: 'col 3', col4: 'col 4' } 
```

正如其他人所提到的，不能保证对象中键的顺序将保持不变，具体取决于您对它的处理。但是，如果您将合并作为最后一步，您应该没问题。请注意，“合并”功能将产生一个全新的对象，它不会改变您传递给它的任何一个对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-21T19:37:27.963

这样做：

```
var myVar = {
     "9":"Automotive & Industrial",
     "1":"Books",
     "7":"Clothing"
};

// if you want to add a property, then...

myVar["5"]="Electronics"; // note that it won't be "first" or "last", it's just "5" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-11T08:02:18.643

尝试这样的事情：

```
myObject.sort(function(a,b) { return parseFloat(a.price) - parseFloat(b.price) } ); 
```

或者

```
myObject.sort(function(a,b) { return parseFloat(a.get("price")) - parseFloat(b.get("price")) } ); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-04-19T20:25:43.013

字符串化和修改

```
var foo = {a:1,b:2,c:3};
var bar = JSON.stringify(foo);
foo = JSON.parse('{"d":4,' + bar.slice(1));
alert(JSON.stringify(foo)); 
```

# android - 来自 SherlockFragment (ClassCastException) 的 ActionBar 菜单膨胀错误

> ID：10691413
> 
> 赞同：2
> 
> 时间：2012-05-21T19:31:39.560
> 
> 标签：android, android-actionbar, actionbarsherlock, classcastexception

我正在尝试使用[这篇文章](https://stackoverflow.com/questions/8312344/how-to-add-a-dropdown-item-on-the-action-bar "这个帖子")的解决方案，以便在我的 ActionBar 中有一个 Spinner。我首先使用的是 ActionBar 的 NAVIGATION_MODE_LIST，但我不希望微调器用于导航槽视图（我将为此设置选项卡）。所以我创建了 2 个 xml ：

mode_spinner.xml

```
<Spinner xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content" /> 
```

选项.xml

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
<item
    android:id="@+id/menu_mode"
    android:actionLayout="@layout/mode_spinner"
    android:showAsAction="ifRoom"/>
</menu> 
```

然后，试图从我的片段（SherlockFragment）中膨胀它

```
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuInflater;
import com.actionbarsherlock.view.MenuItem;
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.options, menu);
    Spinner spinner = (Spinner) menu.findItem(R.id.menu_mode);
    spinner.setAdapter(mSpinnerAdapter);
    super.onCreateOptionsMenu(menu, inflater);
} 
```

在运行时，我收到此错误：

> java.lang.ClassCastException：com.actionbarsherlock.internal.view.menu.MenuItemWrapper 无法转换为 android.widget.Spinner

任何的想法 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T19:45:25.043

您需要调用`getActionView()`返回的结果项目`findItem()`以访问该视图。从那里你可以操纵它。

您可能还想考虑简单地使用带有专门可检查项目的子菜单。

# css - css-run 库的最后一行重叠

> ID：10691418
> 
> 赞同：0
> 
> 时间：2012-05-21T19:32:06.550
> 
> 标签：css, gallery

我在 WordPress 中使用预制库。由于某种莫名其妙的原因，最后几张图像，无论行 (2,3,4) 中有多少张图像，最终都会重叠。我移动了排序顺序，重新添加、重新命名和重新说明图像，使用各种 css 设置等，似乎没有任何影响。我回到了我开始使用的原始 css。每个图像上的代码都相同，但有些东西使这些图像相互重叠。[http://martinezstudio.com/wp_studio/flatweave/](http://martinezstudio.com/wp_studio/flatweave/) 我错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:17:23.420

我认为您的问题出在这一行：

```
<a href="http://martinezstudio.com/wp_studio/flatweave/lluvia/'>Lluvia</a> 
```

您正在混合单引号和双引号。

作为旁注：我不认为您画廊的标签是非常语义化的。在我看来，为每个画廊项目打开和关闭定义列表是不正确的。我只会使用一个定义列表，但这很难设置样式，因为您在`dd`and之间没有引用`dt`。因此，带有一些子元素的普通无序列表应该可以很好地完成工作。

请下次[验证您的标记。](http://validator.w3.org/check?uri=http://martinezstudio.com/wp_studio/flatweave/&charset=%28detect%20automatically%29&doctype=Inline&group=0)您可能会自己发现错误。

# google-analytics - 谷歌分析不跟踪 IE 访问者？

> ID：10691419
> 
> 赞同：0
> 
> 时间：2012-05-21T19:32:12.747
> 
> 标签：google-analytics

我的谷歌分析代码似乎没有跟踪 Internet Explorer 访问者。请参阅下面的数据。

1.  铬 1,000 57.01%
2.  火狐 638 36.37%
3.  野生动物园 50 2.85%
4.  歌剧 42 2.39%
5.  即 13 0.74%

87% 是 Windows 用户，10% 是 Mac。这些点击是在工作时间。在 IE 访问者中，分布是：

-IE10`1`

-IE9`14`

-IE8`5`

-IE7`1`

（自原始帖子以来获得了更多点击，但仍然@ 1％）

有了这么多的访问者，使用 IE 的人似乎极不可能少于 1%。

我正在使用 Google 提供的未更改的 JS 代码。

这是一个运行在 Facebook 页面选项卡中的 Rails 应用程序，用户可能比一般人更精通技术，但也不过分。

可能是什么问题？这么少的用户使用 IE 真的是极不可能吗？我假设即使对于最精通计算机的人群（事实并非如此）来说，IE 用户的比例仍然要高得多，尤其是在工作时间。

# 编辑

找到了线索。我在分析代码之前有这段代码：

```
 /[if lt IE 9]
        = javascript_include_tag "//ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js" 
```

这会在 IE 中触发 JS 错误（Uncaught TypeError: Cannot read property '1' of null），但其余的 JS 在 IE8 和 9 上仍然可以正常加载和运行。我已经测试了这两个版本并让其他版本确认（经常产生错误，但 JS 的其余部分始终有效）。为什么 JS 错误会阻止 GA 代码加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T20:07:41.213

我从未见过这种情况，但您可以通过创建一个只有您知道如何访问的新页面来测试其有效性。然后跟踪你的 IE 访问。

# applescript - 使用 applescript 复制文件夹

> ID：10691420
> 
> 赞同：0
> 
> 时间：2012-05-21T19:32:17.987
> 
> 标签：applescript

因此，我被指示为我的工作编写一个脚本，目标是我们能够选择计算机上的文件夹并将它们备份到我们其中一台服务器上的文件夹中。到目前为止，我给出了安装服务器的脚本，将用户名作为输入，并在服务器上创建一个名为该用户名的文件夹。下一步是将选定的文件夹复制到服务器上的新文件夹中，这就是我遇到减速带的地方（我有一行代码可以让用户选择多个文件夹，但我无法让它们复制到该新文件夹）

这是我到目前为止的代码。

```
display dialog "Please enter your augnet username" default answer "username"
set username to (text returned of result)

mount volume "smb://orgs.augsburg.edu"

delay 3

tell application "Finder"
    set folder backup to make new folder at folder "ORGS:Information Technology:www:kb_images:Migration Testing:" with properties {name:username}
end tell

choose folder with prompt "Please select what you would like to transfer" with multiple selections allowed
set theSelection to result

tell application "Finder" to duplicate theSelection to folder backup 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T19:39:28.273

你可以使用这样的 shell 脚本：

```
do shell script "cd " & theDestination & "; cp " & theSelection 
```

这只是一个示例，需要应用于您的案例，尤其是“theDestination”部分。基本上，它使用 shell 脚本将目录更改为您的目标，然后复制选择。请注意，您可能需要选择副本（用于文件夹和文件替换等）。

你可以通过applescript实现你为你制作的所有shell，也许文件夹备份没有定义，因为它不存在？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T19:49:17.040

尝试：

```
tell application "Finder"
set backup to make new folder at folder "ORGS:Information Technology:www:kb_images:Migration Testing:" with properties {name:username}
    set theSelection to choose folder with prompt "Please select what you would like to transfer" with multiple selections allowed
    duplicate folder theSelection to backup
end tell 
```

# xcode - dyld：Snow Leopard 中找不到符号，认为它在不同的框架中，在 Lion 中可以

> ID：10691426
> 
> 赞同：1
> 
> 时间：2012-05-21T19:32:49.783
> 
> 标签：xcode, macos, cocoa

在我的 OS X 应用程序中，我正在调用 SystemConfiguration 框架中的 SCPreferencesCreateWithAuthorization：

```
AuthorizationRef auth;
AuthorizationCreate(NULL, NULL, kAuthorizationFlagDefaults, &auth);
SCPreferencesRef prefRef = SCPreferencesCreateWithAuthorization(kCFAllocatorDefault,CFSTR("Get Connected"), NULL, auth); 
```

这在 Lion 上运行良好，但是当我在 Snow Leopard 中运行该应用程序时，调用该函数时它会崩溃。奇怪的是，崩溃日志表明它认为这个符号是在 IOKit 中找到的

```
Dyld Error Message:
  Symbol not found: _SCPreferencesCreateWithAuthorization
  Referenced from: /Users/localadmin/Downloads/Get Connected.app/Contents/MacOS/Get Connected
  Expected in: /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit 
```

我已将 SystemConfiguration.framework 链接到 Xcode 中的目标，并在我的 AppDelegate.h 中导入了标头：

```
#import <SystemConfiguration/SystemConfiguration.h> 
```

我究竟做错了什么？为什么它在 Lion 下有效，而在 Snow Leopard 下无效。文档说它在 10.5 及更高版本中可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T20:57:41.703

您是否还链接到 IOKit？尝试在链接顺序中更早地移动 SystemConfiguration。

似乎该符号也存在于 Lion 的 IOKit 框架中。我不确定 SystemConfiguration 中的符号是否只是 IOKit 中的符号的别名。

无论如何，您的应用程序依赖于 IOKit 中的应用程序，这是不可取的。

您也许可以使用`nm -g -m ~/"Downloads/Get Connected.app/Contents/MacOS/Get Connected" | grep SCPref`.

# jenkins - 构建步骤：“调用 ant”与“从 shell 运行 ant”

> ID：10691428
> 
> 赞同：2
> 
> 时间：2012-05-21T19:32:58.213
> 
> 标签：jenkins

我目前正在使用 jenkins 在预期的发布条件下部署应用程序，并且我被迫以 root 用户身份在已部署的系统上运行 JUnit 测试（因为该应用程序具有某些只能由 root 访问的文件）。

我没有使用“调用 ant”构建步骤来运行测试，而是使用“执行 shell”构建步骤中的 sudo 来运行 ant，例如...

```
sudo ant -file build.xml -D.... test 
```

因为 jenkins 用户具有执行此操作的必要 root 权限，但不能访问上述文件。

我意识到这样做会在工作区中创建一些具有错误权限的文件夹，但我在“执行 shell”之后更正了这个问题。

一切似乎都很好，但感觉像是一种解决方法。

那么我的问题是，与构建步骤“调用蚂蚁”相比，以这种方式运行蚂蚁有什么缺点吗？......或者有人能看到更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:41:37.917

鉴于您的限制，我认为您的解决方案很好。

要回答您的问题：

```
...is there any disadvantage of running ant in this manner...? 
```

首先想到的是，如果你有一个分布式 Jenkins 部署，一些从属运行 Windows，一些从属运行 UNIX，那么这显然行不通（或者至少需要更多的工作——例如，安装/配置 Cygwin ）。但我不认为这是你真正关心的事情。

另一种可以说是更干净的解决方案是设置一个以 root 身份运行的 Jenkins 从属设备（如果需要，还可以在 Windows 上运行“管理员”）并将您的工作与它联系起来，坚持为您的 Ant 调用“调用 Ant”。但这需要更多的工作来设置，而且可能不值得付出努力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T19:39:47.463

詹金斯用一个shell命令翻译“invoke ant”，你可以检查这个观察构建的控制台输出，所以如果你按照你说的方式解决了你的问题，我认为它是一样的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T20:37:49.677

ANT 构建步骤背后的主要思想是它提供跨平台的一致性。所以你应该尽可能地使用它，以避免“配置地狱”——不同配置数量的组合爆炸。然而，有时候，男人必须做男人必须做的事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T19:51:11.683

如果一切正常，从 shell 中使用 ant 似乎没有问题。正如您所提到的，修改后的文件权限可能是执行后的问题。

# c++ - 我应该停止使用 OpenCV 吗？

> ID：10691429
> 
> 赞同：25
> 
> 时间：2012-05-21T19:32:59.573
> 
> 标签：c++, c, opencv, image-processing, computer-vision

首先，我想让你知道我真的很喜欢 OpenCV。我已经使用它很长时间了，而且我使用它的次数如此之多，以至于我一只手可以数出上个月我必须查看文档的次数。我认为这确实是您在日常使用计算机视觉时想要使用的工具。

虽然我越来越感觉 Opencv 真的不适合使用应用程序。我正在从事旨在让任何人都可以轻松安装的宠物项目。

OpenCV 的最后一个版本没有附带 exe，而且 Linux 软件包已经过时，我什至不敢使用它们。因此，最好的解决方案是大多数情况下的编译。在考虑移动应用程序或云计算时也是如此（[即使解决方案似乎存在](https://stackoverflow.com/questions/10452834/opencv-in-the-cloud)）。

所以我的问题是，你们好吗？我周围到处都是基于计算机视觉的应用程序，基于云的，基于移动的，. . . 你用什么工具？

我会寻找可用于最多平台的东西，但最重要的是可以通过应用程序轻松部署！

我在互联网上搜索了很多，但总是退回到 OpenCV 作为计算机视觉的“最佳”工具。

我对任何解决方案/语言/工具/框架都持开放态度。

谢谢 ！

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-21T19:42:37.680

**OpenCV 是目前可用的最好的开源计算机视觉库**。

人们已经在多个平台和设备上使用它，我也是。

我知道分发 OpenCV 应用程序的唯一可行方法是自己构建库并将 OpenCV 二进制文件与您的应用程序一起提供。

有一些工具可以帮助您列出和检索应用所需的库：

*   为 Linux 部署？检查[这个帖子](https://stackoverflow.com/a/10605495/176769)
*   为 Windows 部署？[检查这个](https://stackoverflow.com/a/7350602/176769)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-22T06:55:10.180

我在 PC、Linux 和 Android 手机和平板电脑上使用 OpenCV，我们发现最有效的方法是使用**CMake**编译和构建项目。第一次有点棘手，但是自动构建你的项目真的很舒服。OpenCV 附带一个文件*FindOpenCV.cmake*，它允许 cmake 找到 OpenCV 文件夹到您的项目的链接。

我认为 OpenCV 是你能找到的最好的库，尽管有些算法对于 ARM 设备（如平板电脑和手机）来说不够快。我们所做的是分析编译器生成的汇编代码，然后尝试优化瓶颈 OpenCV 函数，例如，使用定点算法。

希望你觉得这很有帮助。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-24T20:25:34.183

只是为了添加已经很好的答案。关于为什么完全使用 OpenCV 完全有意义的一个小总结：

1.  它在 BSD 下松散地获得许可
2.  它拥有庞大且仍在增长的开发团队
3.  通过 StackOverflow 或 yahoo Group 的 Avid 支持小组
4.  价格，或缺乏:)

为了进一步了解您使用 OpenCV 免费获得了多少，请考虑[Ohloh](http://www.ohloh.net/p/3354)对 2,849,367 行代码的估计成本。这将花费你……大约 4500 万美元来支付给其他人来开发它。

附带说明一下，如果您需要 OpenCV 的快速 Ubuntu 软件包，[Gijs Molenaar](https://launchpad.net/~gijzelaar/+archive/opencv2.3)的 PPA 为 2.3。我想他很快就会升到2.4。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-25T06:26:22.290

我同意其他消息：今天，openCV 是最好的（也是唯一的……）计算机视觉库。

在开源世界中，您也可以查看 Scilab、Octave，但打包最终应用程序很复杂。

不要忘记你有一些很好的专有库，比如来自 MVTech 的 Halcon。

但我也同意 openCV 需要改进他的编译工具/lib 等......这就是为什么对于我的应用程序，我决定删除 openCV 并重写我需要的函数。我仅将 openCV 用于原型。

我也后悔选择了 C++，核心图像处理操作符在大多数情况下只需要 C。我更喜欢 2 级库：C 中的核心，C ++（或 python）中的上层。

最良好的问候

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-10T04:41:44.160

> 最新版本的 OpenCV 不附带 exe，您的意思是二进制安装程序吗？好吧，它们适用于某些平台，而不适用于其他平台。

在性能、质量和价格（免费）方面，没有其他工具可以与 OpenCV 匹敌。对于那些有编程经验的人来说，最初的学习曲线并不是什么大问题。

诚然，OpenCV 没有类似 PD/MAX 的界面，像艺术家这样的人可以快速制作原型。我希望我有时间来做这件事。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-07T06:26:34.497

你绝对应该继续使用你说你喜欢的免费库，你已经记住了 API，并且解决了你需要解决的问题。

有一天，网络效应可能会迫使你进入一个新平台，但在那之前，专注于制作！

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-06-14T07:01:51.917

如果您需要最新版本的 OpenCV，您可以考虑滚动发布 Gnu/Linux 发行版。像 Archlinux、Gentoo、Linux Mint Debian 版（使用 debian 测试 repo）。当然，滚动发行发行版比固定发行发行版有缺点，但这取决于您权衡利弊并选择一个。

我正在使用 ArchLinux。它相当稳定。OpenCV 版本 - 2.4.9，最新。

# css - 在 twitter 引导程序中添加一个简单的分隔符

> ID：10691442
> 
> 赞同：40
> 
> 时间：2012-05-21T19:34:03.867
> 
> 标签：css, ruby-on-rails-3, twitter-bootstrap

我正在使用带有 LESS 和 Rails 的 twitter-bootstrap。

我想在我的 CSS 中添加一个简单的分隔符，它出现在网格行之间，以更好地分隔事物。我在引导程序中找不到任何可以为我做的事情，所以我想我可以添加一个定义了 margin-top 的间隔 div。

我在我的引导覆盖文件中采用了以下代码：

```
 .spacer {  margin-top: 40px; } 
```

但所有边距似乎都聚集在页面顶部而不是网格之间。我确定它是我在某处缺少的位置属性，请帮忙。

我愿意接受任何其他关于实现这一目标的更好方法的建议，或者如果 t-bootstrap 已经有任何我错过的东西。

谢谢！

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-05-21T19:43:02.983

您可以为每个`.row`div 添加一个类，以在它们之间添加一些空间，如下所示：

```
.spacer {
    margin-top: 40px; /* define margin as you see fit */
} 
```

然后你可以像这样使用它：

```
<div class="row spacer">
   <div class="span4">...</div>
   <div class="span4">...</div>
   <div class="span4">...</div>
</div>

<div class="row spacer">
   <div class="span4">...</div>
   <div class="span4">...</div>
   <div class="span4">...</div>
</div> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-11-20T10:34:09.873

在 Bootstrap 4 中，您可以使用`mt-5`, `mb-5`, `my-5`,等类`mx-5`（y 表示顶部和底部，x 表示左右）。

根据他们的网站：

> 这些类的命名格式为 {property}{sides}-{size} 用于 xs，{property}{sides}-{breakpoint}-{size} 用于 sm、md、lg 和 xl。

链接：[https ://getbootstrap.com/docs/4.0/utilities/spacing/](https://getbootstrap.com/docs/4.0/utilities/spacing/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-04T03:16:10.733

我的做法。棘手，但对我来说效果很好

```
<p>&nbsp;</p> 
```

# android - 如何使用另一列的值从数据库中获取 PRIMARY KEY？（安卓、SQLite）

> ID：10691443
> 
> 赞同：0
> 
> 时间：2012-05-21T19:34:04.063
> 
> 标签：android, sqlite

我有一个 id INTEGER PRIMARY KEY AUTOINCREMENT 列和 NAME VARCHAR 列的表。而且我知道 NAME 列的值。

如何检索包含该值的行的 id？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:37:43.223

我的 SQLite 生锈了，但是这些方面的东西应该可以工作：

```
SELECT id FROM table WHERE name IS myVar 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T19:40:34.950

如果您正在使用 a `ContentProvider`，您将按照以下方式做一些事情

```
getContentResolver().query(CONTENT_URI, null, "name_col = ?", new String[] { "name" }, null); 
```

# inversion-of-control - 在使用 IoC 的 MVP ASP.NET 应用程序中，应该调用什么 IoC 容器？

> ID：10691444
> 
> 赞同：0
> 
> 时间：2012-05-21T19:34:05.720
> 
> 标签：inversion-of-control, structuremap, mvp, webforms

我正在创建一个示例来说明用于旧版 .NET WebForms 应用程序的 MVP（监督控制器和被动视图）模式。为了帮助分离一些关注点，我还将根据需要简单地引入 StructureMap 以将表示层与 DAO/Repositories 连接起来。

我的问题是应用程序的哪一部分应该调用这些`ObjectFactory.GetInstance<T>()`方法？我一直在 View 中调用它们，因为 View 通知了其相应的演示者，如下所示：

```
partial class CustomerDetails : Page, ICustomerDetailsView
{
    private readonly CustomerDetailsPresenter _presenter;

    public CustomerDetails() 
    {
        var rep = ObjectFactory.GetInstance<ICustomerRepository>();
        this._presenter = new CustomerDetailsPresenter(this, rep);
    }

    // do work down here with normal ASP.NET events...
} 
```

但我不确定是否有更好的地方来处理对象创建；把它放在视图中几乎让我觉得好像视图对正在发生的事情了解太多（它了解存储库和 StructureMap，而不仅仅是了解演示者），但我想不出任何其他地方有这种代码应该存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:13:51.777

[这](http://www.gbogea.com/2009/12/07/using-structuremap-with-aspnet-webforms)是使用结构图和 asp.net webforms 的一个很好的例子

# sql - 将多列合并为新表中的一列

> ID：10691445
> 
> 赞同：1
> 
> 时间：2012-05-21T19:34:13.253
> 
> 标签：sql, ms-access, ms-access-2007

我有一个名为 Master 的 Access 2007 表，其中包含以下列：

```
Master.UID, 
Master.[Team Comments], 
Master.[Judy Comments], 
Master.[Sue Comments], 
Master.[Paul Comments], 
Master.[CSE Comments], 
Master.[CSE Name], 
Master.[Sue Comments1], 
Master.[David Comments] 
```

我想创建一个名为 Comments 的新表，如下所示：

```
CommentID
UID
Name
Comment 
```

这里有几个问题：

1.  有两个苏评论栏；这些不应该被连接，而是为每个条目放置一个单独的行。
2.  除了一个例外，Name 列的值在 Master 列的名称中
3.  例外是 CSE 注释和 CSE 名称
4.  UID 是主表的外键
5.  跳过任何空白评论字段，其中有很多。

如您所见，我正在尝试对一张 craaaaaazy 大桌子应用一点标准化。

蒂亚！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T20:14:38.463

这显然是一次性操作，因此无需在**单个**查询中执行此操作。
这意味着它实际上非常简单，因为您可以为每个值构建一个单独的查询，然后一个接一个地执行。

基本模式看起来像这样（对于`Team Comments`列）。

```
insert into comments (UID, Name, Comment)
select UID, 'Team', [Team Comments] from master where [Team Comments] is not null 
```

*（请注意，我假设`CommentID`是一个自动值字段，所以我根本不需要处理它）*

对于这两`Sue Comments`列，您只需连续执行两个类似的查询：

```
insert into comments (UID, Name, Comment)
select UID, 'Sue', [Sue Comments] from master where [Sue Comments] is not null

insert into comments (UID, Name, Comment)
select UID, 'Sue', [Sue Comments1] from master where [Sue Comments1] is not null 
```

而对于“CSE”列...我知道列`Name`的`CSE Comments`列并不像其他示例中那样固定，但它应该取自`CSE Name`列。
正确的？如果是，那么查询需要如下所示：

```
insert into comments (UID, Name, Comment)
select UID, [CSE Name], [CSE Comments] from master where [CSE Comments] is not null 
```

# sencha-touch - 如何使用一种模型将来自多个请求的数据加载到一个商店

> ID：10691446
> 
> 赞同：1
> 
> 时间：2012-05-21T19:34:21.213
> 
> 标签：sencha-touch, sencha-touch-2

我正在使用 Last.FM API 开发一个演示应用程序，它将为用户（[http://www.lastfm.ru/api/show/user.getTopArtists](http://www.lastfm.ru/api/show/user.getTopArtists)）获取艺术家列表，并为每个艺术家获取事件列表（[http:// /www.lastfm.ru/api/show/artist.getEvents](http://www.lastfm.ru/api/show/artist.getEvents)）。

此列表应连接到数据视图。我想知道如何将来自多个请求的数据加载到一个商店中。每个请求都有自己的 extraParams（艺术家姓名）。

有没有办法通过存储和代理来做到这一点，而无需多次调用 Ext.Ajax.request？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T19:47:11.750

`proxy`不幸的是，在您的配置中声明多个 URL 是不可能的。

到目前为止，我所知道的唯一方法（很短）是动态更改您的`url`动态，如下所示：

`yourStore.getProxy().setUrl('your_new_url');`

注：`setReader`必要时也可

# c# - 如何使用 MVVM 在组合框中设置默认文本

> ID：10691452
> 
> 赞同：3
> 
> 时间：2012-05-21T19:34:39.480
> 
> 标签：c#, wpf, mvvm

我正在使用 MVVM 模式在 WPF 中绑定一个组合框。我可以将字符串列表与组合框绑定，但我不知道如何在组合框中设置默认值。好吧，我有一个名称列表，其中包含“A”、“B”、“C”和“D”。现在我希望默认情况下“A”应该作为默认值。

谢谢

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ViewModel="clr-namespace:WpfApplication1.ViewModel"
    Title="MainWindow" Height="350" Width="525">
<Window.DataContext>
    <ViewModel:NameViewModel></ViewModel:NameViewModel>
</Window.DataContext>
<Grid>
    <ComboBox Height="23" Width="120" ItemsSource="{Binding Names}"/>
</Grid> 
```

```
public class NameViewModel
{
   private IList<string> _nameList = new List<string>();
   public IList<string> Names { get; set; }
   public NameViewModel()
   {
       Names = GetAllNames();
   }

   private IList<string> GetAllNames()
   {
       IList<string> names = new List<string>();
       names.Add("A");
       names.Add("B");
       names.Add("C");
       names.Add("D");
       return names;
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T19:39:15.453

我想说实现这一点的最简单方法是绑定所选项目......

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ViewModel="clr-namespace:WpfApplication1.ViewModel"
    Title="MainWindow" Height="350" Width="525">
<Window.DataContext>
    <ViewModel:NameViewModel></ViewModel:NameViewModel>
</Window.DataContext>
    <Grid>
        <ComboBox 
           Height="23" 
           Width="120" 
           ItemsSource="{Binding Names}" 
           SelectedItem="{Binding SelectedName}"
           />
    </Grid>
</Window> 
```

```
public class NameViewModel
{
   private IList<string> _nameList = new List<string>();
   public IList<string> Names { get; set; }
   public string SelectedName { get; set; }
   public NameViewModel()
   {
       Names = GetAllNames();
       SelectedName = "A";
   }

   private IList<string> GetAllNames()
   {
       IList<string> names = new List<string>();
       names.Add("A");
       names.Add("B");
       names.Add("C");
       names.Add("D");
       return names;
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T19:48:46.753

我认为您应该尝试使用 ListItem。ListItem 具有 Selected 属性

# amazon-ec2 - AWS EC2 定价

> ID：10691453
> 
> 赞同：2
> 
> 时间：2012-05-21T19:34:43.503
> 
> 标签：amazon-ec2, amazon-web-services

我计划从具有 3 年承诺的小型 EC2 RESERVED 实例开始。如果介于两者之间，我将其升级为大型实例；我可以使用我为小型实例支付的预付款吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T02:39:34.017

**简短的回答：**没有。

**长答案：**您不能将保留实例的任何付款应用到另一个保留实例。购买后，您将获得与确切实例类型、操作系统、可用区匹配的实例的折扣率。没有退款（尽管已知计费会在购买后立即进行例外处理）。

**提示：**您是否知道无需购买预留实例即可在 EC2 上运行实例？根据 AWS 文档中使用的措辞，认为需要保留实例是一种常见的误解。

**建议：**根据您的问题，我建议您暂时不要购买任何预留实例，更不要购买 3 年预留实例。等着看你的实例是如何按需工作的，然后再决定你是否相信你会运行它一年或三年。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T06:03:34.930

AWS Support 的回答：

> 预留实例与特定实例类型、操作系统和可用区相关联。为了利用较低的小时费率，您正在运行的 Amazon EC2 实例必须与购买预留实例时指定的实例类型、操作系统和可用区相匹配。由于预留实例购买不可退款且不可转让，我们无法将您的预付费用用于另一个预留实例购买，或更改您的预留实例以涵盖大型实例。

# vb.net - VB silverlight for windows phone“在类型'TextBox中找不到属性'背景'。”

> ID：10691458
> 
> 赞同：0
> 
> 时间：2012-05-21T19:34:53.847
> 
> 标签：vb.net, silverlight, windows-phone-7, xaml

我正在尝试在文本框上设置属性“背景”，但出现此错误： `The property 'background' was not found in type 'TextBox.`

我想我必须在 xaml 上再导入一个参考，但我不确定是哪一个：S

有任何想法吗 ？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T19:39:22.987

假设您在 XAML 中设置它，属性名称区分大小写`Background`- 看起来您的名称都是小写的。

# wordpress - Dreamweaver CS5 MAMP 站点定义错误

> ID：10691459
> 
> 赞同：1
> 
> 时间：2012-05-21T19:34:55.983
> 
> 标签：wordpress, dreamweaver, mamp

嗨 Stackoverflow 世界，

我需要帮助！我已经使用 MAMP 建立了一个带有 MySQL/PHP 的开发堆栈。我正在尝试创建一个 WordPress 主题并将所有文件下载到 MAMP 文件系统中的 htdocs。服务器运行良好，当我在 Firefox 中输入我的 localhost 时，一切都按原样显示。但是，当我在 DreamWeaver 中进行编辑时，所有文件都不会动态连接。我收到一条错误消息，指出此服务器的站点定义不正确。以下是我在 DreamWeaver 和 WordPress 中尝试解决问题的方法：

1）wp-config：我已经设置了数据库名称、用户名、密码和主机：

```
dbname: AmplifyFinancial
username: admin
Pword: ****
host: localhost 
```

2) 我在“管理站点”中设置了站点信息。

**地点**

```
site name: AmplifyFinancial
local site folder: /Applications/MAMP/htdocs/wordpress 
```

**服务器**

```
name: AmplifyFinancial
connect using: local/network
server folder: /Applications/MAMP/htdocs/wordpress
web url: "http://localhost/wordpress/"
remote box unchecked and Test box checked 
```

**测试服务器**

```
server model: PHP MySQL 
```

**本地信息**

```
web URL: "http://localhost/wordpress/"
links relative to: document
enable cache is checked 
```

即使在逐字检查此信息 10 次之后，我也无法弄清楚 DreamWeaver 为何说存在站点定义错误。我什至尝试将 wp-config 文件中的用户名和密码信息都更改为“root”。这没有用。我听说有时永久链接会搞砸，但我不知道如何把握这个机会，看看这是否是我的问题。有人有什么想法吗？我超级卡在这里....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T01:17:29.883

您不必填写服务器、测试服务器和本地信息。如果您只是在本地工作，则可以跳过该部分。

就密码而言，应该是 root / root

# php - 意外的 PREG_MATCH 行为

> ID：10691460
> 
> 赞同：1
> 
> 时间：2012-05-21T19:35:01.510
> 
> 标签：php, regex, preg-match

嘿，

我真的不明白问题是什么。我执行以下代码：

```
<?php
$tomatch='abc 6e t/m 8e uur vervalt';
var_dump($tomatch);
var_dump(preg_match('/([1-9])e t\/m ([1-9])e/',$tomatch));
?> 
```

这给了我以下答案：

> 字符串'abc 6e t/m 8e uur vervalt' *（长度=25）*
> int 0

[但是，在http://regexpal.com/](http://regexpal.com/)中插入相同的值会得到匹配。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:34:22.910

试试这个：

```
$tomatch='abc 6e t/m 8e uur vervalt';
var_dump($tomatch);
preg_match_all('/([1-9])e t\/m ([1-9])e/',$tomatch,$matches));

print_r($matches); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T17:25:03.047

> @Beolensman1 最简单的方法是 str_replace(chr(0xa0), ' ', $str) 然后在其上运行正则表达式。

Corbin 的这篇评论回答了这个问题。

# javascript - 是否可以读取另一个 url 的 dom 结构？

> ID：10691464
> 
> 赞同：6
> 
> 时间：2012-05-21T19:35:19.083
> 
> 标签：javascript

显然修改它是不可能的。

但是你会认为只是阅读它应该没有问题吗？

如果我的 .js 在某人的系统上运行，并且我想分析另一个 URL 的 DOM，客户端，有没有办法做到这一点？

一些简单的事情，比如拉标题标签或拉网址……也许将网站加载到 iframe 中来完成这个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-05-31T19:37:04.817

您可以使用`xmlhttp`

```
function getSourceAsDOM(url)
{
    xmlhttp=new XMLHttpRequest();
    xmlhttp.open("GET",url,false);
    xmlhttp.send();
    parser=new DOMParser();
    return parser.parseFromString(xmlhttp.responseText,"text/html");      
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T19:45:47.510

如果我的问题是正确的，

一个使用yql的跨域例子，

```
var url = 'xyz.com'; // website you want to scrape
var yql = 'http://query.yahooapis.com/v1/public/yql?q=' + encodeURIComponent('select * from html where url="' + url + '"') + '&format=json&callback=?';  
$.getJSON(yql,function(data){
    if (data.results[0]){  
        console.log(data = data.results[0].replace(/<script[^>]*>[\s\S]*?<\/script>/gi, ''));  // The scraped data (the whole webpage)
    }
}); 
```

参考： [如何在 javascript 中获取 HttpwebRequest 的等效方法](https://stackoverflow.com/questions/9075204/how-can-i-get-equivalent-method-of-httpwebrequest-in-javascript/9075343#9075343)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T19:38:48.103

如果域不匹配，由于安全异常，您将无法执行此操作。但是，如果您控制其他域，则应研究添加跨域文件以允许通过 javascript 访问。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T19:40:21.847

您可以通过 AJAX GET 请求获取 html 源代码。然后您可以在 html 代码中搜索或将其分配给 iframe/...

# .net - 为什么编译为 x86 的 .NET EXE 会以 x64 运行？

> ID：10691472
> 
> 赞同：10
> 
> 时间：2012-05-21T19:36:35.903
> 
> 标签：.net, visual-studio-2010, windows-7, x86, 64-bit

我有一个简单的小命令行程序，用 C# 编写，在 .NET 4.0 下运行，并用 Visual Studio 10.0 编译。

它的作用是从另一个供应商的 Access.mdb 文件中提取数据，并将其插入到 Sql Server 数据库中，这样我们的一个应用程序就可以访问数据。

我们使用 .NET 的 OleDbConnection/OleDbCommand/OleDbDataReader 类，使用 Microsoft.Jet.OLEDB.4.0 作为数据提供者。

这对我们来说很好，直到我们尝试在 64 位机器上运行。事实证明，.NET 没有 64 位 OleDb 提供程序。网络上散布着关于这个问题的模糊、半清楚的线索，讨论了不同版本的 Access、MDAC、Office 或其他任何东西，它们以某种方式使某些人工作正常。

我们所做的是将项目配置为以 x86 为目标。问题就消失了。

现在它又回来了，原因我根本不明白。当我在本地机器上构建程序时，它以 x86 运行，但是当我在我们的构建机器上构建它时，它以 x64 运行。

项目文件明确配置为针对 x86：

```
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
    <DebugType>pdbonly</DebugType>
    <Optimize>true</Optimize>
    <OutputPath>bin\Release\</OutputPath>
    <DefineConstants>TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
    <PlatformTarget>x86</PlatformTarget>
</PropertyGroup> 
```

它是从同一个批处理文件构建的，无论是在我的机器上还是在构建机器上：

```
msbuild OurApp.sln /property:Configuration=Release 
```

并且生成的 exe*说*它们是 x86，无论它们是在哪台机器上构建的。如果我在其中一个上运行 dumpbin /headers，我会看到：

```
FILE HEADER VALUES
         14C machine (x86)
           3 number of sections
    4FBA64C8 time date stamp Mon May 21 10:52:40 2012
           0 file pointer to symbol table
           0 number of symbols
          E0 size of optional header
         102 characteristics
               Executable
               32 bit word machine 
```

在我的机器上构建的 exe 的转储和在构建机器上构建的 exe 的转储之间的唯一区别是时间戳和 .pdb 文件的路径*。*

但是，奇怪的是，在我的机器上构建的一个 exe 运行得很好，在构建机器上构建的一个 exe 会出现与我们在将其构建为 x64 时看到的相同错误消息。

不仅如此——我们的程序从注册表中获取它的配置，为了方便用户，如果它没有找到一个设置，它会创建一个。我们从 HLM\SOFTWARE\OurName\OurApp 中读取并创建它们。但是，当然，因为这是一个在 64 位机器上运行的 32 位应用程序，它确实应该从 HLM\SOFTWARE\WoW6432Node\OurName\OurApp 读取和写入。

使用我机器上构建的应用程序，它确实如此。但是在构建机器上构建的应用程序，尽管是为 x86 编译的，并且具有指示它们应该作为 x86 运行的标头，从 HLM\SOFTWARE\OurName\OurApp 而*不是*从 HLM\SOFTWARE\WoW6432Node\读取和写入我们的名字\我们的应用程序。就好像它实际上是作为 64 位应用程序运行一样，尽管如此。

有谁知道这是怎么发生的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T22:12:59.213

好吧，这只是加重了。

我们在 .csproj 文件中拥有的是：

```
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
    <DebugSymbols>true</DebugSymbols>
    <DebugType>full</DebugType>
    <Optimize>false</Optimize>
    <OutputPath>bin\Debug\</OutputPath>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
    <PlatformTarget>x86</PlatformTarget>
</PropertyGroup>
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
    <DebugType>pdbonly</DebugType>
    <Optimize>true</Optimize>
    <OutputPath>bin\Release\</OutputPath>
    <DefineConstants>TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
</PropertyGroup> 
```

这是采用默认配置并将其更改为目标 x86 的结果。

我删除了 AnyCPU 配置，并创建了新的 x86 配置，并得到：

```
<PropertyGroup Condition="'$(Configuration)|$(Platform)' == 'Debug|x86'">
    <DebugSymbols>true</DebugSymbols>
    <OutputPath>bin\x86\Debug\</OutputPath>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <DebugType>full</DebugType>
    <PlatformTarget>x86</PlatformTarget>
    <ErrorReport>prompt</ErrorReport>
    <CodeAnalysisIgnoreBuiltInRules>false</CodeAnalysisIgnoreBuiltInRules>
</PropertyGroup>
<PropertyGroup Condition="'$(Configuration)|$(Platform)' == 'Release|x86'">
    <OutputPath>bin\x86\Release\</OutputPath>
    <DefineConstants>TRACE</DefineConstants>
    <Optimize>true</Optimize>
    <DebugType>pdbonly</DebugType>
    <PlatformTarget>x86</PlatformTarget>
    <ErrorReport>prompt</ErrorReport>
    <CodeAnalysisIgnoreBuiltInRuleSets>false</CodeAnalysisIgnoreBuiltInRuleSets>
    <CodeAnalysisIgnoreBuiltInRules>false</CodeAnalysisIgnoreBuiltInRules>
</PropertyGroup> 
```

现在我可以发誓，GUI 告诉我我在调试和发布时都针对 x86，在旧配置中。并且生成的可执行文件作为 x86 转储，并在我的机器上作为 x86 运行。但显然我对在什么条件下构建什么版本的 exe 感到困惑，因为查看 .csproj，很明显我们在构建版本时没有指定 x86。

在任何情况下，使用新配置，exe 构建和运行，无论它们构建在什么机器上，或者它们运行在哪台机器上。

无论如何，很抱歉给您带来了困扰，并感谢您提供的耳朵让我以正确的方式看待问题。

# java - 从 milis 创建日期时不一致

> ID：10691473
> 
> 赞同：0
> 
> 时间：2012-05-21T19:36:45.097
> 
> 标签：java, date

尝试从代表另一个但在 milis 中的长值创建 java.util.Date 对象时遇到一个奇怪的问题，在我的服务器中，我发送以下值 1337621330502 代表：java.sql.Timestamp 2012 -05-21 12:28:50.502。现在在客户端中，我正在解析一些数据并从 JSONObject 中检索该日期，然后创建一个如下所示的日期：

```
workItem.setActivityStartDate(new Date(workItemJson.getLong("activityStartDate"))); 
```

其中`workItemJson.getLong("activityStartDate")`，返回 1337621330502，但是创建的日期在原始值基础上增加了 1 小时，即 Mon May 21 13:28:50 America/New_York 2012。为什么会这样？日期格式或类似的东西？关于 timeZone 或任何其他可能影响时间的因素， timeInMilis 的值是否相同？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:43:47.167

服务器和客户端可能在不同的语言环境中运行，请检查[`Locale.getDefault()`](http://docs.oracle.com/javase/6/docs/api/java/util/Locale.html#getDefault%28%29)以查看差异。

# php - 如何将大型维基百科 sql 文件导入 mysql 数据库？

> ID：10691475
> 
> 赞同：3
> 
> 时间：2012-05-21T19:36:47.777
> 
> 标签：php, mysql, sql, wikipedia

我需要一个带有“主题”的数据库表，所以我下载了维基百科的 sql 类别文件（[http://dumps.wikimedia.org/enwiki/latest/](http://dumps.wikimedia.org/enwiki/latest/)上的 enwiki-latest-category.sql.gz ）

该文件为 74MB（解压缩），但 mysql 限制为 32MB。如何导入此文件？

顺便说一句：我试过 bigdump (http://www.ozerov.de/bigdump/) 但它似乎也有 32MB 的导入限制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T19:39:27.840

您可以将其拆分为 32MB 并单独导入。它不应该太耗时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T20:13:10.710

如果你在你的 Windows 桌面上安装了 mysql，我有一些你可能想尝试的疯狂的东西。

请在您本地的 mysql 盒子上执行以下步骤

*   STEP 01) 解压文件 enwiki-latest-category.sql.gz 到 enwiki-latest-category.sql

*   步骤 02)`CREATE DATABASE mycat;`

*   STEP 03) `mysql -u... -p... -Dmycat < enwiki-latest-category.sql

*   STEP 04) 为类别导出 CREATE TABLE

    mysqldump -u... -p... --no-data mycat category > category_00.sql

*   STEP 05) 将数据转储为 10 个部分。由于 AUTO_INCREMENT 为 134526529，因此将其四舍五入为 135000000（1.35 亿）。一次转储 20%（2700 万）

只需使用针对的`--where`选项运行 5 个 mysqldumps`cat_id`

```
mysqldump -u... -p... --no-create-info mycat category --where="cat_id <=  27000000"                         | gzip > category_01.sql.gz
mysqldump -u... -p... --no-create-info mycat category --where="cat_id  >  27000000 AND cat_id <=  54000000" | gzip > category_02.sql.gz
mysqldump -u... -p... --no-create-info mycat category --where="cat_id  >  54000000 AND cat_id <=  81000000" | gzip > category_03.sql.gz
mysqldump -u... -p... --no-create-info mycat category --where="cat_id  >  81000000 AND cat_id <= 108000000" | gzip > category_04.sql.gz
mysqldump -u... -p... --no-create-info mycat category --where="cat_id  > 108000000"                         | gzip > category_05.sql.gz 
```

上传这6个文件，解压，依次加载。

试试看 ！！！

# c# - 代码合约和 MVVM

> ID：10691476
> 
> 赞同：3
> 
> 时间：2012-05-21T19:36:52.830
> 
> 标签：c#, mvvm, code-contracts

我有一个 C# 中的 MVVM 项目，我想在其中使用代码合同。所以这是我的场景：接口：

```
public interface IC042_Model
{
    void Save(C042 entity);
    void Delete(C042 entity);
} 
```

然后我有合同的抽象类：

```
[ContractClassFor(typeof(IC042_Model))]
internal abstract class C042_Model_Contracts : IC042_Model
{
    public void Save(C042 entity)
    {
        Contract.Requires(entity != null);
    }

    public void Delete(C042_CondicaoPagamento entity)
    {
        Contract.Requires(entity != null);
    }
} 
```

在另一个项目中，我的模型实现了接口，如果我在任何方法中调用 this.Save(null)，都会生成警告。在我的 ViewModel 中，如果我调用上面相同的方法：this.Save(null)，不会生成警告，但是当我运行应用程序时，上面的行会引发一个 Contract 异常。

我的方法有什么问题吗？

提前致谢。

我又举了一个例子，我想大家会更容易理解：

我在类库项目中创建了以下类：

```
public static class StringExtensions
{
    public static string TrimAfter(string value, string suffix)
    {
        Contract.Requires(suffix != (string)null);
        Contract.Requires(!string.IsNullOrEmpty(suffix));
        Contract.Requires(value != null);

        var index = value.IndexOf(suffix);

        if (index < 0)
            return value;

        return value.Substring(0, index);
    }
} 
```

当我从如下的 WPF 项目中调用它时：

```
CodeDigging.StringExtensions.TrimAfter(null, null); 
```

我没有收到关于合同不完整的警告。

那是我的问题，我希望它现在变得更清楚了。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T04:59:16.390

我认为您错过了界面上的 ContractClass 属性：

```
[ContractClass(typeof(C042_Model_Contracts)]
public interface IC042_Model 
{ 
    void Save(C042 entity); 
    void Delete(C042 entity); 
} 
```

[这里](http://devjourney.com/blog/code-contracts-part-5-abstract-types-and-interfaces/)有一个关于代码契约的很好的描述

# android - 创建类似于共享首选项的自己的对象存储

> ID：10691477
> 
> 赞同：0
> 
> 时间：2012-05-21T19:37:13.127
> 
> 标签：android, performance, object, storage, sharedpreferences

我只想问是否建议创建一个类似于 SharedPreferences 的类。唯一的区别是这个类将存储我在整个应用程序中创建的多个自定义对象。然后我将这个类链接到我的应用程序类，因此可以在我的整个应用程序中访问它。

例如...我创建了我的应用程序类，将其命名为 ApplicationCore(AC)。然后我创建自己的存储类，将其命名为 ApplicationStorage(AS)。在我的 AC 中，我有一个获取/设置方法来访问 AS。然后在 AS 内部，我有多个 get/set/clear 方法用于将不同的对象类获取/存储到不同的 HashMap。

我非常感谢您对此的反馈。如果您对如何做到这一点有不同的意见/方法，请随时分享。我已经对使用 gson 感到沮丧，因为它无法在其中存储带有 Sqlite 函数的对象类。任何想法都会有很棒的帮助。

# android - Android：以编程方式将 apk 复制到 /system/app

> ID：10691485
> 
> 赞同：7
> 
> 时间：2012-05-21T19:37:32.173
> 
> 标签：android, root, android-install-apk, su

我正在尝试从我的 java 代码安装系统应用程序，到目前为止，我还没有成功。

以下是我到目前为止所做的：

1.  我的设备已植根。
2.  我的“安装程序”应用程序作为系统应用程序安装。（手动复制到/system/app）
3.  我已经使用平台密钥签署了安装程序 apk，并且我`android:sharedUserId="android.uid.system"`在清单中。
4.  我一直在尝试（并尝试，然后更多）`Runtime.getRuntime.exec("su")`。我打算将系统分区挂载为`rw`，为apk做一个`cat`，然后制作系统分区`ro`。以下是命令列表：

    ```
    mount -o remount,rw -t yaffs2 /dev/block/mtdblock3 /system<br>
    cat /sdcard/application.apk > /system/app/application.apk<br>
    mount -o remount,ro -t yaffs2 /dev/block/mtdblock3 /system<br><br>The application.apk here is the app being installed from the installer app. This app is also signed with platform key, and has the sharedUserId configured. 
    ```

5.  我已在清单中请求`INSTALL_PACKAGES`许可。

我尝试了许多 exec("") 格式的变体，包括`'su -c'`与每个命令一起使用。我得到了断管异常和安全异常。有时，我没有得到异常，但文件没有被复制。

请让我知道我在这里缺少什么。有没有人有这个工作？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T01:43:09.263

我继续挖掘，结果如下：

*   Android 在 su.c 中有此检查：[“android 源的根目录”/system/extras/su/su.c]

> ```
> /* Until we have something better, only root and the shell can use su.*/
> myuid = getuid();
> if (myuid != AID_ROOT && myuid != AID_SHELL) {
>     fprintf(stderr,"su: uid %d not allowed to su\n", myuid);
>     return 1;
> } 
> ```

ChainsDD (SuperUser) 和 cyanogen mod 通过实现他们自己的 su.c 来解决这个问题：[https ://github.com/CyanogenMod/android_system_su/blob/master/su.c](https://github.com/CyanogenMod/android_system_su/blob/master/su.c)

*   有什么特别之处`/system/app`？似乎分区在非根设备上是只读的，从而防止修改/卸载放置在那里的应用程序。[https://android.stackexchange.com/questions/17871/what-are-the-differences-between-a-system-app-and-user-app](https://android.stackexchange.com/questions/17871/what-are-the-differences-between-a-system-app-and-user-app)

*   使用平台密钥签名的应用程序`sharedUserId = system`对于我的目的来说“足够好”，我不必特别将其复制到 /system/app.

我现在接受这个作为答案。

# java - Spring源码套件spring3 + Hibernate4 + maven 3 + MySQL 5

> ID：10691486
> 
> 赞同：12
> 
> 时间：2012-05-21T19:37:38.277
> 
> 标签：java, hibernate, spring-mvc

我的应用程序出现错误，但我不确定这意味着什么。我在下面发布了一些示例代码。这是我得到的错误：

```
> SEVERE: Exception sending context initialized event to listener
> instance of class
> org.springframework.web.context.ContextLoaderListener
> org.springframework.beans.factory.BeanCreationException: Error
> creating bean with name 'transactionManager' defined in ServletContext
> resource [/WEB-INF/spring/root-context.xml]: Invocation of init method
> failed; nested exception is
> org.hibernate.service.UnknownUnwrapTypeException: Cannot unwrap to
> requested type [javax.sql.DataSource]     at
> org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
>   at
> org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
>   at
> org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
>   at
> org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
>   at
> org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
>   at
> org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
>   at
> org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
>   at
> org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
>   at
> org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
>   at
> org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
>   at
> org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:384)
>   at
> org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
>   at
> org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
>   at
> org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
>   at
> org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
>   at
> org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
>   at
> org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
>   at
> org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
>   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
>   at java.util.concurrent.FutureTask.run(FutureTask.java:166)     at
> java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
>   at
> java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
>   at java.lang.Thread.run(Thread.java:722) Caused by:
> org.hibernate.service.UnknownUnwrapTypeException: Cannot unwrap to
> requested type [javax.sql.DataSource]     at
> org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl.unwrap(DriverManagerConnectionProviderImpl.java:91)
>   at
> org.springframework.orm.hibernate4.SessionFactoryUtils.getDataSource(SessionFactoryUtils.java:101)
>   at
> org.springframework.orm.hibernate4.HibernateTransactionManager.afterPropertiesSet(HibernateTransactionManager.java:264)
>   at
> org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
>   at
> org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
>   ... 22 more
> 
> ERROR: org.springframework.web.context.ContextLoader - Context
> initialization failed
> org.springframework.beans.factory.BeanCreationException: Error
> creating bean with name 'transactionManager' defined in ServletContext
> resource [/WEB-INF/spring/root-context.xml]: Invocation of init method
> failed; nested exception is
> org.hibernate.service.UnknownUnwrapTypeException: Cannot unwrap to
> requested type [javax.sql.DataSource]     at
> org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
>   at
> org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
>   at
> org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
>   at
> org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
>   at
> org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
>   at
> org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
>   at
> org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
>   at
> org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
>   at
> org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
>   at
> org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
>   at
> org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:384)
>   at
> org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
>   at
> org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
>   at
> org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
>   at
> org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
>   at
> org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
>   at
> org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
>   at
> org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
>   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
>   at java.util.concurrent.FutureTask.run(FutureTask.java:166)     at
> java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
>   at
> java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
>   at java.lang.Thread.run(Thread.java:722) Caused by:
> org.hibernate.service.UnknownUnwrapTypeException: Cannot unwrap to
> requested type [javax.sql.DataSource]     at
> org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl.unwrap(DriverManagerConnectionProviderImpl.java:91)
>   at
> org.springframework.orm.hibernate4.SessionFactoryUtils.getDataSource(SessionFactoryUtils.java:101)
>   at
> org.springframework.orm.hibernate4.HibernateTransactionManager.afterPropertiesSet(HibernateTransactionManager.java:264)
>   at
> org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
>   at
> org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
>   ... 22 more 
```

这是我的 pom 文件：

```
<modelVersion>4.0.0</modelVersion>
<groupId>com.reservosity</groupId>
<artifactId>component</artifactId>
<name>Reservosity</name>
<packaging>war</packaging>
<version>1.0.0-BUILD-SNAPSHOT</version>
<properties>
    <java-version>1.6</java-version>
    <org.springframework-version>3.1.0.RELEASE</org.springframework-version>
    <org.aspectj-version>1.6.9</org.aspectj-version>
    <org.slf4j-version>1.5.10</org.slf4j-version>
</properties>
<dependencies>
    <!-- Spring -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${org.springframework-version}</version>
        <exclusions>
            <!-- Exclude Commons Logging in favor of SLF4j -->
            <exclusion>
                <groupId>commons-logging</groupId>
                <artifactId>commons-logging</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>

    <!-- AspectJ -->
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjrt</artifactId>
        <version>${org.aspectj-version}</version>
    </dependency>

    <!-- Logging -->
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>${org.slf4j-version}</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>jcl-over-slf4j</artifactId>
        <version>${org.slf4j-version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>${org.slf4j-version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.15</version>
        <exclusions>
            <exclusion>
                <groupId>javax.mail</groupId>
                <artifactId>mail</artifactId>
            </exclusion>
            <exclusion>
                <groupId>javax.jms</groupId>
                <artifactId>jms</artifactId>
            </exclusion>
            <exclusion>
                <groupId>com.sun.jdmk</groupId>
                <artifactId>jmxtools</artifactId>
            </exclusion>
            <exclusion>
                <groupId>com.sun.jmx</groupId>
                <artifactId>jmxri</artifactId>
            </exclusion>
        </exclusions>
        <scope>runtime</scope>
    </dependency>

    <!-- @Inject -->
    <dependency>
        <groupId>javax.inject</groupId>
        <artifactId>javax.inject</artifactId>
        <version>1</version>
    </dependency>

    <!-- Servlet -->
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet.jsp</groupId>
        <artifactId>jsp-api</artifactId>
        <version>2.1</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>4.1.3.Final</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>4.1.1.Final</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib</artifactId>
        <version>2.2.2</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.hibernate.common</groupId>
        <artifactId>hibernate-commons-annotations</artifactId>
        <version>4.0.1.Final</version>
    </dependency>
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.20</version>
    </dependency>
    <dependency>
        <groupId>org.javassist</groupId>
        <artifactId>javassist</artifactId>
        <version>3.15.0-GA</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate.javax.persistence</groupId>
        <artifactId>hibernate-jpa-2.0-api</artifactId>
        <version>1.0.1.Final</version>
    </dependency>

    <!-- Test -->
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.7</version>
        <scope>test</scope>
    </dependency>
</dependencies>
<build>
    <plugins>
        <plugin>
            <artifactId>maven-eclipse-plugin</artifactId>
            <version>2.9</version>
            <configuration>
                <additionalProjectnatures>
                    <projectnature>org.springframework.ide.eclipse.core.springnature</projectnature>
                </additionalProjectnatures>
                <additionalBuildcommands>
                    <buildcommand>org.springframework.ide.eclipse.core.springbuilder</buildcommand>
                </additionalBuildcommands>
                <downloadSources>true</downloadSources>
                <downloadJavadocs>true</downloadJavadocs>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
                <compilerArgument>-Xlint:all</compilerArgument>
                <showWarnings>true</showWarnings>
                <showDeprecation>true</showDeprecation>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <version>1.2.1</version>
            <configuration>
                <mainClass>org.test.int1.Main</mainClass>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

服务上下文：

```
<!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

<!-- Enables the Spring MVC @Controller programming model -->
<annotation-driven />

<!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
<resources mapping="/resources/**" location="/resources/" />

<!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
<beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/" />
    <beans:property name="suffix" value=".jsp" />
</beans:bean>

<context:component-scan base-package="com.reservosity.component.controller" /> 
```

根上下文.xml：

```
<!-- Root Context: defines shared resources visible to all other web components -->

<bean id="sessionFactory"
    class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="configLocation">
        <value>classpath:hibernate.cfg.xml</value>
    </property>
</bean>
<tx:annotation-driven transaction-manager="transactionManager" />

<bean id="transactionManager"    class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean> 
```

hibernate.cfg.xml：

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC 
"-//Hibernate/Hibernate Configuration DTD//EN"
 "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
 <hibernate-configuration>
<session-factory>
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/******</property>
    <property name="hibernate.connection.username">***</property>
    <property name="hibernate.connection.password">***</property>
    <property name="hibernate.connection.pool_size">10</property>
    <property name="show_sql">true</property>
    <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="hibernate.current_session_context_class">thread</property>
    <mapping class="com.company.component.domain.Company" />
</session-factory> 
```

如果我删除 bean transactionManager，它可以正常工作，但是当我再次添加它时，我会得到那个看起来很脏的错误。不知道为什么。

```
 <bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean> 
```

我是spring hibernate的新手，真的可以帮上忙！

谢谢

安德鲁

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-01T23:18:52.603

我有完全相同的问题。KyelJmD[在这里](https://stackoverflow.com/questions/13670840/error-creating-bean-with-name-when-creating-a-transaction-manager)建议缺少连接池，看来他是对的，但他没有发布解决方案。

所以我花了一些时间，终于让它工作了。要解决这个问题，你应该做两件事：

1.  将这些行添加到 hibernate.cfg.xml 文件中（您可能不需要全部）：

    ```
    <property name="hibernate.c3p0.min_size">5</property>
    <property name="hibernate.c3p0.max_size">20</property>
    <property name="hibernate.c3p0.timeout">300</property>
    <property name="hibernate.c3p0.max_statements">50</property>
    <property name="hibernate.c3p0.idle_test_period">3000</property> 
    ```

2.  在 pom.xml 中添加此依赖项：

    ```
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-c3p0</artifactId>
        <version>4.1.9.Final</version>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-ehcache</artifactId>
        <version>4.1.9.Final</version>
    </dependency> 
    ```

如果没有 maven 依赖，Hibernate 只会默默地忽略 C3P0 配置。

使用上面的配置，我不再得到 UnknownUnwrapTypeException 异常，现在看来它工作正常。

我的设置：Spring 3.2.1、Hibernate 4.1.9、Tomcat 7.0.35。

免责声明：如[本](https://stackoverflow.com/questions/13653591/why-configure-both-datasource-and-sessionfactory-in-spring-hibernate-configurati)问题所述，您不应该使用 hibernate.cfg.xml 文件。改用`dataSource`bean，因为例如，您可以稍后将它用于 JdbcTemplate。

**编辑 ：**

过了一段时间，我回答了这个问题。这似乎是正确的，但我从不喜欢它，因为这是一种猜测，我们真的应该避免。

因此，因为我发现这很有趣，并且在 Hibernate 4.1 文档中找不到任何内容，所以我试图证明我和其他评论者的“猜测”。

这是一个循序渐进的过程，可能对解决其他库中的其他奇怪问题也很有用。原来这一次真的很容易，发生了什么。

1.  创建一个Maven项目（或使用现有的），将Hibernate添加到依赖项（hibernate-entitymanager，我这次使用的是4.1.7版本）。将其导入可以自动附加源代码的IDE（我使用Intellij）
2.  从 Stack Trace 中，找到`UnknownUnwrapTypeException`抛出异常 ( ) 的类 ( `DriverManagerConnectionProviderImpl`) 并导航到那里（CTRL-N 并键入类名），单击“下载源代码”。
3.  查找`DriverManagerConnectionProviderImpl`(ALT+F7)的用法
4.  瞧！原来只有一种用法`DriverManagerConnectionProviderImpl`- 它是 中的一种`initiateService(...)`方法`ConnectionProviderInitiator`，它或多或少地尝试了几个`ConnectionProvider`实现，然后回退到`DriverManagerConnectionProviderImpl`，在我们的例子中它不起作用并抛出`UnknownUnwrapTypeException`。

从 Hibernate 的 ConnectionProviderInitiator.java 中：

```
 ConnectionProvider connectionProvider = null;
    String providerClassName = getConfiguredConnectionProviderName( configurationValues );
    if ( providerClassName != null ) {
        connectionProvider = instantiateExplicitConnectionProvider( providerClassName, classLoaderService );
    }
    else if ( configurationValues.get( Environment.DATASOURCE ) != null ) {
        connectionProvider = new DatasourceConnectionProviderImpl();
    }

    if ( connectionProvider == null ) {
        if ( c3p0ConfigDefined( configurationValues ) && c3p0ProviderPresent( classLoaderService ) ) {
            connectionProvider = instantiateExplicitConnectionProvider( C3P0_PROVIDER_CLASS_NAME,
                    classLoaderService
            );
        }
    }

    if ( connectionProvider == null ) {
        if ( proxoolConfigDefined( configurationValues ) && proxoolProviderPresent( classLoaderService ) ) {
            connectionProvider = instantiateExplicitConnectionProvider( PROXOOL_PROVIDER_CLASS_NAME,
                    classLoaderService
            );
        }
    }

    if ( connectionProvider == null ) {
        if ( configurationValues.get( Environment.URL ) != null ) {
            connectionProvider = new DriverManagerConnectionProviderImpl();
        }
    }

    if ( connectionProvider == null ) {
        LOG.noAppropriateConnectionProvider();
        connectionProvider = new UserSuppliedConnectionProviderImpl();
    } 
```

代码大致表明：

1.  如果`Environment.DATASOURCE`设置了 (hibernate.connection.datasource)，则`DatasourceConnectionProviderImpl`使用；
2.  如果存在 c3p0，则实例化 C3P0 Provider
3.  检查了其他一些提供程序（PROXOOL_PROVIDER_CLASS_NAME）
4.  然后如果`Environment.URL`(hibernate.connection.url) 存在，我们使用`DriverManagerConnectionProviderImpl`.

就是这样。这解释了为什么如果我们将 C3P0 添加为 Maven 依赖项或定义 DataSource（正如[Michael ako Tecourt](https://stackoverflow.com/users/2187110/michael-ako-tecourt)在下面的评论中所说）可以解决问题。

另一件事是为什么 DriverManagerConnectionProviderImpl 会抛出 UnknownUnwrapTypeException - 不管它是否是一个错误 - 无论如何，我没有看到 Hibernate 4.2.0 甚至 4.3.0.Beta 中的代码有任何变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T02:11:32.420

看看它来自这段代码的问题：

```
if ( ConnectionProvider.class.equals( unwrapType ) ||
                DriverManagerConnectionProviderImpl.class.isAssignableFrom( unwrapType ) ) {
            return (T) this;
        }
        else {
            throw new UnknownUnwrapTypeException( unwrapType );
        } 
```

其中 unwrapType 是`javax.sql.DataSource`.

虽然我无法准确解释导致此问题的配置是什么，但我可以建议修复。

在你的 spring 应用程序上下文中定义一个`DriverManagerDataSource`bean，然后将它作为一个属性提供给你的`LocalSessionFactoryBean`. 确保从 Hibernate 配置文件中删除数据源配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T19:51:46.443

尝试将 spring 和 hibernate 库包含到您的项目的 lib 文件夹中。我希望这些有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T20:06:40.133

[本文](http://www.coderanch.com/t/581183/Spring/Spring-Hibernate-transaction-Management-Cannot)建议您没有在休眠配置文件中定义数据源。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T00:09:23.077

本文详细介绍了 Spring 3.1 和 Hibernate 4.1 的集成：

[http://blog.springsource.org/2012/04/06/migrating-to-spring-3-1-and-hibernate-4-1/](http://blog.springsource.org/2012/04/06/migrating-to-spring-3-1-and-hibernate-4-1/)

# restlet - 如何为多个 restlet 应用程序配置 web.xml？

> ID：10691490
> 
> 赞同：3
> 
> 时间：2012-05-21T19:37:51.643
> 
> 标签：restlet

我想创建一个 servlet 来充当一堆 restlet 应用程序的容器。我已经为一个 restlet 应用程序完成了 servlet，但我不知道如何修改 web.xml 以适应许多应用程序。这是单个restlet的web.xml：（几乎逐字逐句摘自“Restlet in Action MEAP”）：

```
<?xml version="1.0" encoding="UTF-8"?>
...
<display-name>Servlet engine as a container of Restlet applications</display-name>
<servlet>
<servlet-name>CompanyServerApplication</servlet-name>
<servlet-class>org.restlet.ext.servlet.ServerServlet</servlet-class>
<init-param>
  <param-name>org.restlet.application</param-name>
  <param-value>server.CompanyServerApplication</param-value>
</init-param>
</servlet>
<servlet-mapping>
<servlet-name>CompanyServerApplication</servlet-name>
<url-pattern>/*</url-pattern>
</servlet-mapping>
</web-app> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T20:14:00.270

只需向您`<servlet>`的. 例如，我为用户请求和管理员请求提供了单独的 Restlet 应用程序。我的样子是这样的：`<servlet-mapping>``web.xml``web.xml`

```
<!-- user servlet -->
<servlet>
  <servlet-name>user</servlet-name>
  <servlet-class>org.restlet.ext.servlet.ServerServlet</servlet-class>
  <init-param>
    <param-name>org.restlet.application</param-name>
    <param-value>com.myapp.server.resource.user.UserApplication</param-value>
  </init-param>
  <init-param>
    <param-name>org.restlet.clients</param-name>
    <param-value>HTTP HTTPS</param-value>
  </init-param>
</servlet>

<servlet-mapping>
  <servlet-name>user</servlet-name>
  <url-pattern>/user/*</url-pattern>
</servlet-mapping>

<!-- admin servlet -->
<servlet>
  <servlet-name>admin</servlet-name>
  <servlet-class>org.restlet.ext.servlet.ServerServlet</servlet-class>
  <init-param>
    <param-name>org.restlet.application</param-name>
    <param-value>com.myapp.server.resource.admin.AdminApplication</param-value>
  </init-param>
  <init-param>
    <param-name>org.restlet.clients</param-name>
    <param-value>HTTP HTTPS</param-value>
  </init-param>
</servlet>

<servlet-mapping>
  <servlet-name>admin</servlet-name>
  <url-pattern>/admin/*</url-pattern>
</servlet-mapping> 
```

# php - 没有“$this”的 PHP 类属性

> ID：10691493
> 
> 赞同：3
> 
> 时间：2012-05-21T19:38:15.620
> 
> 标签：php

Ss 是可能的，可以在不使用“$this”的情况下访问此类方法中的类属性，就像在 C++ 中一样？

小例子：

```
class MyClass
{
    protected $foo = 'abc';
    protected $bar = 'dca';

    public function __construct()
    {
        $foo = 'Hello';
        $bar = 'World!';
    }

    public function display()
    {
        echo $foo . ' ' . $bar;
    }
}

$MyObject = new MyClass();
$MyObject->display(); 
```

结果，我注意到未定义的变量。但我想确定一下——这可能吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-21T19:39:53.937

不它不是。在 PHP 中，您必须使用`$this->`语法来访问实例变量。

# c++ - 通过校验和快速验证 1500 字节的内存

> ID：10691494
> 
> 赞同：0
> 
> 时间：2012-05-21T19:38:18.460
> 
> 标签：c++, buffer, checksum

我正在用 C++ 编写一个程序，它将 1500 字节的数据从机器 A 发送到机器 B。

假设如下：

```
char* tx_data = (char*)operator new(1500)
for (int i = 0; i < 1500; i++) {
  tx_data[i] = (char)((int) 65); // ASCII 65 = A;
}
send_tx_data(); 
```

所以我们有 1500 次字母“A”来填充这个缓冲区（`tx_data`）。接收主机抓取传入的数据并将其转储到缓冲区（`rx_data`）中，并抓取接收到的数据的长度（`rxLength`）；

```
rxLength = recvfrom(sock, rxdata, 1500, 0, NULL, NULL);
           //             ^ the buffer we are putting into 
```

如果`rxLength == 1500`，我们收到了 1500 字节的数据，但我们需要确保它与我们发送的 1500 字节相同（而不是来自其他地方的 1500 字节数据，绕着网络飞）！例如，通常在比较少量用户输入时`strncmp()`可能会用到。我的建议`strncmp()`在这里不合适，但我想说的是，我认为在接收端拥有一个可能被调用的缓冲区不是一个好主意，`expected_data`例如，它包含 1500 x 'A'我遍历并比较两者，例如`strncmp()`.

如何有效评估接收到的 1500 字节数据？[高效我的意思是快速。这将每秒发生数千次，因此代码需要相当优化！]。我对某种校验和有一个想法，因为我们知道我们应该收到什么，但我不确定这样做的好方法。任何人都可以提出一个好的校验和方法吗？或者，如果这是一个愚蠢的想法，您能否解释一下原因并推荐其他内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:59:03.927

首先考虑您将 1500 字节数据从机器 A 发送到机器 B 的特定过程，并检查您在此过程中是否有任何可能引入任何损失或损坏的步骤。可能是您的流程没有任何步骤来介绍其中任何一个。例如，如果您使用 TCP/IP 发送数据，则可以保证底层 TCP/IP 堆栈正确接收您的数据（如果有的话）。

另一方面，如果您有一些步骤引入了数据丢失、损坏、顺序更改等，那么您应该考虑 CRC，如果您非常重视性能的话。您可以在此处找到使用 CRC 的详尽解释和源代码示例：[http ://www.barrgroup.com/Embedded-Systems/How-To/CRC-Calculation-C-Code](http://www.barrgroup.com/Embedded-Systems/How-To/CRC-Calculation-C-Code)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T14:07:37.407

在对哈希函数和 CRC 进行了多次建议之后，我使用了[这个答案](https://stackoverflow.com/a/7968917/560065 "与 std::hash 的意外冲突")中的代码来另一个问题，来制作一个简单的哈希函数。

# java - 两个数组的调试/测试代码

> ID：10691495
> 
> 赞同：0
> 
> 时间：2012-05-21T19:38:20.103
> 
> 标签：java, debugging, testing, merge, mergesort

我做了一个合并排序，它将一个数组合并为 3 个部分而不是两个部分，以便对其进行排序，并且我编写了一些代码来测试我的合并排序是否正常工作。这是测试的代码：

```
while (true){

    Random rand = new Random();

    int[] randArray = new int[rand.nextInt(2000)];

    for (int i = 0; i < randArray.length; i++) {
        randArray[i] = rand.nextInt();
    }

    int[] temporary = new int[randArray.length];

    System.arraycopy(randArray, 0, temporary, 0, randArray.length);

    mergesort(randArray);

    Arrays.sort(temporary);

    if (Arrays.equals(randArray, temporary)){
        System.out.println("YES");
    } else {
       break;
    }

    }       
} 
```

我正在做的是每次创建一个最多包含 2000 个整数的数组并用随机整数填充数组，然后将该数组存储在临时数组中，然后在原始数组中使用我的合并排序并使用`Arrays.sort()`临时数组的方法，然后如果两个数组相等，则打印 YES 或者从 while 循环中中断。

到目前为止，它还没有从 while 循环中中断并表明我的算法是正确的，所以我问我是否在这里正确并正确编写了测试代码。

编辑：它不断打印 YES 而不会中断循环，所以我相信它正在工作，但我在问，所以我可以确定

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T19:48:18.440

你的测试代码对我来说似乎很好，这意味着你的算法也很好。另一方面，请不要误会我的意思，但是这种测试只能被认为是一种快速而肮脏的检查。如果要进行适当的测试，则应测试以下内容：

*   简单示例的快乐路径
*   边界条件
*   错误条件

您还应该考虑使用像 JUnit 这样的自动化测试框架。

最后，在测试中使用随机输入并不是一个好习惯，因为测试的结果可能会随着运行而变化。

# php - Jquery删除活动类并将其添加到li节点和preventDefault问题

> ID：10691496
> 
> 赞同：0
> 
> 时间：2012-05-21T19:38:26.030
> 
> 标签：php, javascript, jquery

Jquery 在 LI 导航上删除和添加“活动”类与 preventDefault 一起使用，但不再链接

Jquery删除向li节点添加活动类不起作用

我知道删除活动类并将其添加到 li's 以突出显示当前页面的导航项应该是非常基本的，但我一直无法让它工作。

我发现我必须使用 e.preventDefault() 才能使其工作，但是当我这样做时，链接不起作用，但突出显示的导航项起作用。如果我删除 preventDefault() 然后它导航但不突出显示。我应该说我的导航位于 header.php 包含文件中。这是我所拥有的：

```
<ul class="myNav">
  <li><a href="index.php">Home</a></li>
  <li><a href="portfolio.php">Portfolio</a></li>
  <li><a href="about.php">About</a></li>
  <li><a href="contact.php">Contact</a></li>
</ul>

$('.myNav li a').click(function (e)
{
  e.preventDefault();
$('.myNav li').siblings().removeClass('active');
$(this).parent().addClass('active');
//var url = $(this).attr("href"); 
//window.location = url;
}); 
```

我试图将页面发送到点击的 url，这会加载正确的页面，但它会删除类！我想解决这个问题，但我也想了解它为什么不能正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:45:08.037

恐怕你不能同时使用`only`jQuery 实现高亮和重定向到页面。您最好尝试在您的页面中`active`分别添加类`li`，例如在`index.php`页面中添加此行

```
 <li class="active"><a href="index.php">Home</a></li> 
```

因为您不能仅使用`jQuery`. 如果您页面的此菜单部分位于单独的文件中，`header.php`那么您必须检测哪一个是当前页面。并且可以很容易地检测 php 中的当前页面并添加`class="active"`到相应`li`的突出显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:23:38.957

我最终在 PHP 中这样做：

```
<?php
//grab the current page name to use in the
$path = $_SERVER['PHP_SELF'];
$page = basename($path);
$page = basename($path, '.php');
?>

        <li<?php if ($page == 'index') echo 'class="active"';?>><a href="index.php">Home</a></li>
    <li <?php if ($page == 'portfolio') echo "class='active'"; ?> ><a href="portfolio.php">Portfolio</a></li>
    <li <?php if ($page == 'about') echo 'class="active"'; ?> ><a href="about.php">About</a></li>
    <li <?php if ($page == 'contact') echo 'class="active"'; ?> ><a href="contact.php">Contact</a></li> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T19:43:19.707

当您离开页面时，您在 javascript 中所做的一切都会丢失。唯一的方法是让您的服务器程序设置“活动”标志，可能是通过向链接添加查询参数，或者检查程序的 url

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T19:44:21.377

您必须在 PHP 中通过检测当前 url 并比较导航中节点的 url 来执行此操作。看看这个：[如何在 Windows/IIS 服务器上获取当前页面的完整 URL？](https://stackoverflow.com/questions/189113/how-do-i-get-current-page-full-url-in-php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T07:11:18.667

```
var link = document.location.href.split('/').slice(-1);   // retrieve page name
$('#menuInner li a.active').removeClass('active');        // remove class 'active'
$('#menuInner li a[href$="'+link+'"]').parent().addClass('active');// and add it to a matching 
```

# c++ - 分配不同大小的 std::array

> ID：10691499
> 
> 赞同：2
> 
> 时间：2012-05-21T19:38:40.040
> 
> 标签：c++, arrays, c++11, std

我有一个带有有意义数据的填充 std::array 和一个带有 0 的 std::array。我希望将 6 的数组分配给 8 的数组。在 C++ 中这样做的惯用方式是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T19:46:08.630

`std::copy`如果目标数组大于源数组，则可以使用：

```
std::array<int, 6> arr1;
std::array<int, 10> arr2;
// Fill arr1...
std::copy(arr1.begin(), arr1.end(), arr2.begin()); 
```

如果目标数组较短，那么您必须复制到某个点。我的意思是，您仍然可以使用 来执行此操作`std::copy`，但您必须执行以下操作：

```
std::array<int, 10> arr1;
std::array<int, 6> arr2;
// Fill arr1...
std::copy(arr1.data(), arr1.data() + arr2.size(), arr2.begin()); 
```

这适用于两种情况：

```
std::copy(arr1.data(), arr1.data() + std::min(arr1.size(), arr2.size()), arr2.begin()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T19:53:42.200

目前还不清楚你到底在问什么，所以这个答案涵盖了几种可能性：

```
#include <array>
#include <algorithm>

int main() {
  // Uninitialized std::array
  std::array<int, 1> arr1;

  std::array<int, 2> arr2 = {0,1};

  // Not legal, sizes don't match:
  // std::array<int, 3> arr3 = arr2;

  // Instead you can do:
  std::array<int, 3> arr3;
  std::copy(arr2.begin(), arr2.end(), arr3.begin());

  // If the sizes match and the types are assignable then you can do:
  std::array<int, 3> arr4 = arr3;

  // You can also copy from the bigger to the smaller if you're careful
  std::copy_n(arr3.begin(), arr1.size(), arr1.begin());
} 
```

# ruby - Foursquare API 解释结果

> ID：10691502
> 
> 赞同：0
> 
> 时间：2012-05-21T19:38:56.027
> 
> 标签：ruby, foursquare

我正在尝试使用 Foursquare API 构建一个小应用程序。

```
require 'rubygems'
require 'rest-client'
require 'json'
require 'foursquare2'
require 'awesome_print'

client = Foursquare2::Client.new(:client_id => 'xxx', :client_secret => 'xxx')

response = client.search_venues(:ll => '36.142064,-86.816086', :query => 'nails') 
```

这很好用，但是我从 API 得到的响应有些莫名其妙！

```
[
    [0] "groups",
    [1] [
        [0] {
             "type" => "places",
             "name" => "Places",
            "items" => [
                [ 0] {
                            "id" => "4e24ce97fa76c80b5f5adfcc",
                          "name" => "The Nail Spa",
                       "contact" => {
                                 "phone" => "6152975895",
                        "formattedPhone" => "(615) 297-5895"
                    },
                      "location" => {
                            "address" => "2126 Abbot Martin Rd. Suite 102",
                        "crossStreet" => "at Green Hills Mall",
                                "lat" => 36.10713765714286,
                                "lng" => -86.817004,
                           "distance" => 3888,
                         "postalCode" => "37215",
                               "city" => "Nashville",
                              "state" => "TN",
                            "country" => "United States"
                    },
                    "categories" => [
                        [0] {
                                    "id" => "4bf58dd8d48988d10c951735",
                                  "name" => "Cosmetics Shop",
                            "pluralName" => "Cosmetics Shops",
                             "shortName" => "Beauty / Cosmetic",
                                  "icon" => "https://foursquare.com/img/categories/shops/beauty_cosmetic.png",
                               "parents" => [
                                [0] "Shops & Services"
                            ],
                               "primary" => true
                        }
                    ],
                      "verified" => false,
                         "stats" => {
                        "checkinsCount" => 103,
                           "usersCount" => 90,
                             "tipCount" => 5
                    },
                      "specials" => []
                }, 
```

以上是响应的第一部分，很多数据回来了。

什么是 Ruby 中提取您想要的 pars 的最佳方式。例如 - 如果我想要返回每个结果的名称？

响应的类是我以前从未见过的 Hashie::Mash？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T20:04:45.550

Hashie 给你一些糖来玩 Hashes（见[https://github.com/intridea/hashie](https://github.com/intridea/hashie)）。

要获得每个结果的名称，这样的事情应该可以解决问题：

```
response.groups[0].items.each{|i| puts i.name} 
```

# powershell - Powershell 复制项与大文件挂起到网络位置

> ID：10691506
> 
> 赞同：1
> 
> 时间：2012-05-21T19:39:07.463
> 
> 标签：powershell

我有一个 powershell 脚本，可以将大量（80+ gig）文件复制到网络位置。复制到位置驱动器时一切正常，但现在复制到网络上的备份位置，文件传输似乎只是挂起。看起来好像传输实际上已经完成，因为文件在目标上是正确的大小，并且在查看 PerfMon 时没有网络使用，所以看起来它只是在等待或确认某些事情。有没有其他人看到过这样的问题，或者有没有办法将复制操作标记为“不验证”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T06:55:26.123

Powershell 很棒，但有时调用外部程序可以提供更强大的解决方案；通过网络传输大文件时，我总是从 Powershell 调用 Robocopy，并建议您使用这种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T04:51:15.450

也许您的问题是由于网络问题或 SMB 问题而附加的。您没有提供有关“from”和“to”机器的操作系统的任何详细信息，它也会产生影响。

这只是一个建议：您是否尝试在使用`Copy-Item`PowerShell 挂载的远程文件系统上使用，如此处示例中所示

```
New-PSDrive -Name Y -PSProvider filesystem -Root \\ServerName\Share
Copy-Item BigFile Y:\BigFileCopy 
```

# android - Eclipse Phonegap 索引文件更改未出现在构建中

> ID：10691515
> 
> 赞同：2
> 
> 时间：2012-05-21T19:39:36.840
> 
> 标签：android, eclipse, html, cordova

当我在 Eclipse 中对 index.html 文件进行任何更改时，在使用 phonegap 导出到 Android 应用程序时，更改不会在设备或模拟器上变得可见。删除应用程序不是解决方案，因为它包含无法删除的用户数据。我已经用搜索的几种变体在谷歌上搜索了几次答案，我看到的最常见的答案是刷新、清理、构建、部署。这曾经可以工作，但现在不行了。我已尝试为应用程序清除设备上的缓存，但在部署时仍然没有更改。解决此问题的任何帮助都将非常有帮助。（我想做的就是修复一个臭名昭著的错字）

同样，我在 Xcode 中为我的应用程序的 iOS 版本所做的更改会在构建和存档之后立即发生，并且在设备和模拟器上立即可见。我只在 Eclipse for Android 中进行更改时才体验到缺乏变化。

# php - PHP 希望为下面提供的代码创建简单的弹出窗口，其中包含 FancyBox

> ID：10691520
> 
> 赞同：0
> 
> 时间：2012-05-21T19:40:01.630
> 
> 标签：php, facebook, popup

抱歉，我真的不知道如何用 PHP 编码，但我需要使用下面提供的代码从图片（按钮）创建一个弹出窗口！它也可能是一个显示邀请框...但它需要保持不变（不是 Facebook 邀请框）

```
if(count($user_data)>0) {
    $user = get_users(array('fb_user_id'=>$user_data['id']));
    $invited_ids = $user[0]['invited_ids'];
    $invited_ids_tab = json_decode($invited_ids, true);
    $nb_invited_friends = count($invited_ids_tab);

    //page header
    echo '<img src="'.$user_data['picture'].'" style="width:36px; vertical-align:middle; margin-right:10px; margin-bottom:10px;">';
    echo '<b>Bienvenue '.$user_data['name'].'</b> (<a href="#" id="fb_box_fb_logout_btn">Déconnection</a>) - ';

    if(count($user)>0) echo 'Nombre d\'amis invité <b>'.$nb_invited_friends.'</b>';
    else echo 'You didn\'t invite any friend yet.';

    echo ' - <a href="./content.php">Voir les coupons disponible </a>';

    echo '<hr><br>';

    //display inviter
    $inviter = displayInviter();
    echo $inviter;
}
else {
    echo '<a href="#" id="fb_box_fb_login_btn" class="facebook16">Connect with Facebook</a>, Invite your friends and Unlock your reward !';
}

? 
```

我在弹出窗口中想要的是

$inviter = displayInviter(); 回声$邀请者；

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:43:10.753

PHP 不能自己制作弹出窗口，因为一旦页面呈现，PHP 就会关闭，可以这么说。您需要的是 Javascript，最简单的方法是使用 jQuery 的[ajax](http://api.jquery.com/load/)方法使用您提供的代码调用 PHP 页面，将代码输出加载到隐藏元素中，然后使用[fadeIn](http://api.jquery.com/fadeIn/)`div`方法使其弹出，例如.

或者，如果您想将代码保留在同一页面中，请执行与上述相同的操作，只是不使用 load() 函数，而是将弹出内容回显到隐藏的 div 中。

简单的例子：

HTML/PHP

```
<div id="popup" style="display: none;"><?php echo displayInviter(); ?></div> 
```

JS函数

```
$('#popup').fadeIn(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T19:45:40.443

尝试：

```
echo '<a href="javascript:alert('.$inviter.')">'; 
```

# android - 使用 FAST 检测更快地进行 SURF 描述？

> ID：10691521
> 
> 赞同：7
> 
> 时间：2012-05-21T19:40:06.903
> 
> 标签：android, opencv, sift, surf

对于我的硕士论文，我正在对 SIFT SURF en FAST 算法进行一些测试，以在智能手机上进行徽标检测。

当我简单地对某些方法进行检测、描述和匹配时，我得到以下结果。

对于 SURF 检测器和 SURF 描述符：

找到 180 个关键点

*   1,994 秒关键点计算时间 (SURF)

*   4,516 秒描述时间（SURF）

*   0.282 秒匹配时间（SURF）

当我使用 FAST 检测器而不是 SURF 检测器时

找到 319 个关键点

*   0.023 秒关键点计算时间 (FAST)

*   1.295 秒描述时间（SURF）

*   0.397 秒匹配时间（SURF）

FAST 检测器比 SURF 检测器快得多，甚至检测到几乎两倍的关键点，速度快 100 倍。这些结果是可以预见的。

下一步虽然不是预期的结果。使用 319 个 FAST 关键点的 de SURF 描述符怎么可能比使用 180 个 SURF 关键点的速度更快？

据我所知，描述与检测算法无关……但这些结果并不像预期的那样。

有谁知道这怎么可能？

这是代码：

```
 FeatureDetector detector = FeatureDetector.create(FeatureDetector.SURF);
    //FeatureDetector detector = FeatureDetector.create(FeatureDetector.FAST);
    Imgproc.cvtColor(image1, image1, Imgproc.COLOR_RGBA2RGB);
    Imgproc.cvtColor(image2, image2, Imgproc.COLOR_RGBA2RGB);

    DescriptorExtractor SurfExtractor = DescriptorExtractor
    .create(DescriptorExtractor.SURF);

    //extract keypoints
    long time= System.currentTimeMillis();
    detector.detect(image1, keypoints);
    Log.d("LOG!", "number of query Keypoints= " + keypoints.size());
    detector.detect(image2, logoKeypoints);
    Log.d("LOG!", "number of logo Keypoints= " + logoKeypoints.size());
    Log.d("LOG!", "keypoint calculation time elapsed" + (System.currentTimeMillis() -time));

    //Descript keypoints
    long time2 = System.currentTimeMillis();
    Mat descriptors = new Mat();
    Mat logoDescriptors = new Mat();
    Log.d("LOG!", "logo type" + image2.type() + "  intype" + image1.type());
    SurfExtractor.compute(image1, keypoints, descriptors);
    SurfExtractor.compute(image2, logoKeypoints, logoDescriptors);
    Log.d("LOG!", "Description time elapsed" + (System.currentTimeMillis()- time2)); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T20:40:52.347

AFAIK SURF 描述符提取中最耗时的部分是子像素提取每个关键点周围大小为 (2.8*keypoint.size x 2.8*keypoint.size) 的块。

所以这是我的猜测：FAST 检测器找到的关键点总是`size`等于 7，但 SURF 检测器可以找到更大尺寸的关键点。因此，180 个“大”关键点的处理时间比 319 个“小”要长。

# ssh - 镜像 rsnapshot 备份目录

> ID：10691522
> 
> 赞同：10
> 
> 时间：2012-05-21T19:40:07.993
> 
> 标签：ssh, backup, rsync

我想将 rsnapshot 使用的备份目录镜像到第二个位置以提高安全性。理想情况下，该解决方案将 rsync 与 ssh 一起使用。我需要向 rsync 提供哪些参数以保留硬链接（由 rsnapshot 创建）和符号链接、删除文件、递归复制、删除目标中的文件等？这些文件都在 ext3 文件系统上。此外，我能做些什么来避免如果源被损坏，缺陷被重新同步到镜像的可能性？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T20:31:41.463

我认为做你想做的事情的选项很大程度上记录在`rsync`手册页中。特别是，`-H`选项 ( `--hard-links`) 启用硬链接检测，`--delete`并将导致 rsync 删除源上不存在的目标上的内容。所以也许是这样的：

```
rsync -aH --delete /path/to/src/ /path/to/destination 
```

> 此外，我能做些什么来避免如果源被损坏，缺陷被重新同步到镜像的可能性？

嗯，这很棘手。你如何发现腐败？我认为唯一真正的解决方案是错开备份的备份（也就是说，将实际备份执行到主要目标，然后在下一次备份运行之前立即将其同步到次要目标）。这样，如果您检测到问题，直到下一次备份运行才能恢复。

一个不同的解决方案是`rsnapshot`备份到多个目的地，这样您实际上是从两个不同位置的原始源生成备份。这样，如果一个损坏，第二个应该不受影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T06:48:14.470

为了防止损坏数据的副本，您可以每周备份一次，并希望在丢失所有备份之前注意到源头的损坏。最好的方法是使用 -c 然后它会比较源和目标的校验和以确定是否复制文件。唯一的缺点是它必须读取整个文件，使备份过程变慢。

```
#!/bin/sh
# Create a Backup of Today
# Definitions
sevendaysago=$(date --date='6 days ago' +%Y-%m-%d-%A)
# Delete backups from 7 days ago
rm -rf /storage/backups/$sevendaysago
mkdir -p /storage/backups/`date +\%Y-\%m-\%d`-`date +\%A`/$host/$username

rsync -aHvz /storage/`date --date=yesterday +\%Y-\%m-\%d`-`date --date=yesterday +\%A`/$host/$user/ /storage/`date +\%Y-\%m-\%d`-`date +\%A`/$host/$user/

rsync -acHvz -e ssh --delete --exclude='logs' tim@tim.tim.net:/home/tim/ /storage/`date +\%Y-\%m-\%d`-`date +\%A`/$host/$user/ 
```

# java - 将 @Filter 与 @ManyToOne 关系一起使用

> ID：10691527
> 
> 赞同：0
> 
> 时间：2012-05-21T19:40:31.037
> 
> 标签：java, hibernate, many-to-one, hibernate-filters

我正在使用 Hibernate 3.6.7-Final 和 Spring 3.0.5。

我有这样的实体

```
@Entity
public class Foo {
    @ManyToOne
    private Bar bar;
}

@Entity
public class Bar {
    @Column
    String group;
} 
```

我如何在 Foo 中使用我`@Filter`想要获得所有`Foo`的东西？这应该是一个安全约束。`Bar``group = :group`

尝试设置`@Filter(name = "groupFilter", condition = "group = :group")`属性`bar`from`Foo`但它不起作用。hibernate 是否支持此功能或过滤器仅适用于实体/集合级别？我是否必须更改所有 HQL 才能添加此安全约束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T02:30:35.440

首先，您必须在某处创建@FilterDef（这定义了可用参数和默认条件），然后在特定类上定义@Filter。

最后，必须在 Session 对象上启用过滤器，并设置它需要的任何参数。默认情况下，休眠会话中未启用过滤器。会话打开后，您必须启用所需的特定功能。

有关示例，请参见第 19.1 节：http: [//docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/filters.html](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/filters.html)

```
@FilterDef(name="groupFilter", parameters={@ParamDef( name="group", type="string" )})
@Filters(
  { @Filter(name="groupFilter", condition="group = :group") }
)
public class ... {
} 
```

然后在你的 dao 代码中的某个地方：

```
session.enableFilter("groupFilter").setParameter("group", group); 
```

您不必触摸任何 hql。当您启用过滤器时，为其定义了实际 @Filter 的所有类将自动应用该条件。

还有其他方法可以为集合做事，我建议您阅读上面引用的文档。但一般来说，您可以提供 @Filter 注释类和集合属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-17T21:57:50.137

使用带有`@ManyToOne`连接的过滤器的问题来自以下内容。我指的是 Hibernate 4.3.10，因为这是我必须要看的。

相关的 SQL 片段由类`org.hibernate.engine.internal.JoinSequence`、方法生成`toJoinFragment`：

```
/**
 * Generate a JoinFragment
 *
 * @param enabledFilters The filters associated with the originating session to properly define join conditions
 * @param includeAllSubclassJoins Should all subclass joins be added to the rendered JoinFragment?
 * @param withClauseFragment The with clause (which represents additional join restrictions) fragment
 * @param withClauseJoinAlias The
 *
 * @return The JoinFragment
 *
 * @throws MappingException Indicates a problem access the provided metadata, or incorrect metadata
 */
public JoinFragment toJoinFragment(
        Map enabledFilters,
        boolean includeAllSubclassJoins,
        String withClauseFragment,
        String withClauseJoinAlias) throws MappingException {

        ...

        final String on = join.getAssociationType().getOnCondition( join.getAlias(), factory, enabledFilters, treatAsDeclarations ); 
```

根据定义的关系`join.getAssociationType()`返回`CollectionType`或`EntityType`。

前者代表声明，如：

```
@OneToMany
private List<MyEntity> myEntities; 
```

后者代表这个：

```
@ManyToOne
private MyEntity myEntity; 
```

在第一种情况下，使用此方法：

```
@Override
public String getOnCondition(
        String alias,
        SessionFactoryImplementor factory,
        Map enabledFilters,
        Set<String> treatAsDeclarations) {
    return getAssociatedJoinable( factory ).filterFragment( alias, enabledFilters, treatAsDeclarations );
} 
```

而在第二种情况下，该方法如下所示：

```
@Override
public String getOnCondition(
        String alias,
        SessionFactoryImplementor factory,
        Map enabledFilters,
        Set<String> treatAsDeclarations) {
    if ( isReferenceToPrimaryKey() && ( treatAsDeclarations == null || treatAsDeclarations.isEmpty() ) ) {
        return "";
    }
    else {
        return getAssociatedJoinable( factory ).filterFragment( alias, enabledFilters, treatAsDeclarations );
    }
} 
```

这意味着：

*   当我们在实体定义中有引用的子实体列表时，将无条件地应用过滤器。
*   当我们有一个引用的子实体时，在满足（不）某些条件时应用过滤器。

根据代码，我认为可以在以下情况下应用过滤器`@ManyToOne`：

*   在引用的实体中，我们使用不是主键的字段，或者
*   使用 TREAT 运算符（例如，参见这里或这里）

# java - 如何在 Java 中连接池 memcached (spymemcached)

> ID：10691528
> 
> 赞同：11
> 
> 时间：2012-05-21T19:40:30.943
> 
> 标签：java, memcached, spymemcached

我正在使用的 API spymemcached 基本上给出了

```
MemcachedClient memc = new MemCachedClient(new InetSocketAddress("host", port)); 
```

它并没有真正给我一个`connect()`或`isConnected()`功能。API 提供了一个`DefaultConnectionFactory`但乍一看的代码，它看起来不像管理连接池。有谁知道如何在 spymemcached 或另一个 Java memcached 库中执行此操作？

更一般地说 - 让我的应用程序容忍连接丢失的最“道德”方式是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-22T23:25:51.077

当您调用`MemcachedClient`构造函数时，它会自动连接到您的 memcached 服务器。没有`connect()`或`isConnected()`方法。如果您失去与 Spymemcached 的连接，它将尝试为您重新连接。此外，`DefaultConnectionFactory`它旨在用于指定特殊的连接属性（例如散列方法和故障模式）。如果要使用连接工厂，则需要使用带有 a和 a的`MemcachedClient`构造函数。`ConnectionFactory``List<InetSocketAddress>`

Spymemcached 使用单个 IO 线程，但其行为类似于多线程客户端。例如，使用一个线程，您每秒最多可以执行 50k 次操作。如果要创建线程池，则必须在用户应用程序中进行。

> 更一般地说 - 让我的应用程序容忍连接丢失的最“道德”方式是什么？

就像我上面提到的，如果 Spymemcached 失去与服务器的连接，它将尝试重新连接。这个过程通常需要大约 17 毫秒。然而，大多数使用客户端的人确实在他们的应用程序代码中创建了一个线程池。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T10:09:59.233

您可以先创建一个对象池。然后在执行 set、delete 或 get 操作时，您可以从池中借用对象。一旦你调用它的构造函数，MemcachedClient 将自动连接到服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-18T06:25:05.570

有些人使用 DBCP 来汇集连接。您可以在**github上查看****[3levelmemcache](https://github.com/forcedotcom/3levelmemcache)**项目，它具有池化功能。

# r - 需要在单击链接时检索受保护的页面 (R Brew)

> ID：10691533
> 
> 赞同：1
> 
> 时间：2012-05-21T19:40:42.407
> 
> 标签：r

我正在开发一个 R brew HTML 页面，我需要一个链接，单击该链接将从受密码保护的站点中检索 csv。我可以使用类似的东西轻松创建链接

```
a href="<%=theURL%>" 
```

其中 URL 包含我需要访问的 URL。但是，我无法通过登录凭据。

有一种方法可以使用

```
http://id:password@http://... syntax, 
```

但这在 Internet Explorer 上不起作用。因此，如果我在 a href 标记中设置类似的内容，IE 将无法识别它。

另一种选择是使用 RCurl，但我只需要在用户单击特定链接时才检索此外部页面，因为内容可能非常大。

我的 brew 会话中也有这些数据格式的数据。最后一种选择是 onclick，它将从数据框创建一个 xls，使用唯一名称将其保存在本地，然后将其提供给用户。

任何建议都会非常有帮助，

提前致谢，

*   拉吉

# matlab - 在没有循环的情况下选择给定的单元格条目

> ID：10691538
> 
> 赞同：0
> 
> 时间：2012-05-21T19:41:12.987
> 
> 标签：matlab

```
corrects = 

[1x4 double]    [1x4 double]    [1x4 double]    [1x4 double]    [1x4 double]    [1x4 double]    [1x4 double]    [1x4 double]    [1x4 double]    [1x4 double]

corrects{1}

ans =

 9     8    10     7 
```

如何在没有循环的情况下将 10 个校正单元的每个第一个条目放入矩阵中？

```
 So I need :

 corrects{1}(1)

 ans =

 9

 corrects{2}(1)

 ans =

 8 
```

我试过纠正{:}(1)

但显然坏的单元格引用怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:49:48.550

像这样使用[`cellfun`](http://www.mathworks.com/help/techdoc/ref/cellfun.html)：

```
A = cellfun(@(x) x(1), corrects) 
```

这是一个向您展示它有效的示例：

```
>> corrects{:}
ans =
    0.9572    0.4854    0.8003    0.1419

ans =
    0.4218    0.9157    0.7922    0.9595

ans =
    0.6557    0.0357    0.8491    0.9340

ans =
    0.6787    0.7577    0.7431    0.3922

ans =
    0.6555    0.1712    0.7060    0.0318

>> A = cellfun(@(x) x(1), corrects)

A =
    0.9572    0.4218    0.6557    0.6787    0.6555 
```

# scrollview - Titanium Appcelerator：添加选项卡会导致内容与选项卡重叠

> ID：10691539
> 
> 赞同：0
> 
> 时间：2012-05-21T19:41:14.580
> 
> 标签：scrollview, appcelerator, tabbar

我在 Appcelerator 中制作了一个包含两个选项卡的应用程序。应用程序内有一个注册页面，该页面比可视区域长。内容在滚动视图内。滚动视图高度设置为`auto`。由于某种原因，内容与屏幕底部的标签栏重叠。显然，我可以给滚动视图设置一个高度，但我真的很想知道如何让它自动发生。我确定我做错了什么，但无法弄清楚是什么。非常感谢所有帮助。

这是滚动视图的创建：

```
var form = Ti.UI.createScrollView({
contentHeight: 'auto',
contentWidth: 'auto',
showVerticalScrollIndicator:true,
showHorizontalScrollIndicator:true,

// new stuff
container: container,
fieldStyle: o.style || exports.STYLE_HINT,
addField: addField,
addFields: addFields
}); 
```

还有我的标签：

```
var tabMain = Titanium.UI.createTab({
    icon:'tabServer.png',
    title:'Servers',
    window:winMain,
    navBarHidden:true
});

var tabContact = Titanium.UI.createTab({
    icon:'tabContact.png',
    title:'Contact Us',
    window:winContact,
    navBarHidden:true
});

//  add tabs
tabGroup.addTab(tabMain);  
tabGroup.addTab(tabContact);  

// open tab group
tabGroup.open(); 
```

在添加选项卡组之前，不会创建表单或将表单添加到窗口中。我不确定哪些其他代码会被认为是相关的，所以如果您需要查看其他代码，请告诉我，我会添加它。谢谢~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:01:02.770

我发现了这个问题。这是由于我自己设置窗口的高度而不是使用`'auto'`. 一旦我将它设置为自动，它就会自动考虑标签栏......去图。

# visual-studio-2010 - Visual Studio 2010 每次打开时都会检查解决方案

> ID：10691545
> 
> 赞同：3
> 
> 时间：2012-05-21T19:41:26.560
> 
> 标签：visual-studio-2010

每次我在 Visual Studio 2010 中打开解决方案时，它都会检查 .sln 文件。我正在使用 TFS 进行版本控制。

当我比较大多数情况下的解决方案文件时，我没有发现任何差异，但在某些情况下，我确实看到了“端口”编号的差异。

我该如何避免呢？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T20:06:51.590

当您的解决方案文件`GlobalSection(ExtensibilityGlobals)`定义了一个部分时，可能会发生这种情况。从您的问题的声音来看，“端口”编号可能是在这样的部分中定义的。此问题已在[此 Microsoft Connect 帖子](http://connect.microsoft.com/VisualStudio/feedback/details/573538/visual-studio-2010-with-tfs-2010-always-checks-out-the-solution-file-when-opening)中进行了跟踪，根据最新评论者的说法，显然仍然是 Visual Studio 11 Beta 中的一个问题。`GlobalSection(ExtensibilityGlobals)`Microsoft 针对此问题建议的解决方法是删除和之间的整个部分`EndGlobalSection`。但是，这在您的场景中可能没有用，具体取决于该“端口”值的使用。例如，如果某些插件或外部实用程序需要它，它可能会被重新添加或导致提供的功能失败。

# c# - 跳过 Facebook 登录窗口

> ID：10691546
> 
> 赞同：1
> 
> 时间：2012-05-21T19:41:36.853
> 
> 标签：c#, .net, wpf

我认为让用户有机会将他的 Facebook 登录信息保存在数据库中，并以某种方式跳过 Facebook 登录窗口。

所以从技术上讲，这个想法是在打开了 Facebook 登录页面的 WebBrowser 控件中登录。

是否可以这样做：

1.  填充此页面的输入框
2.  点击登录按钮
3.  并隐藏 WebBrowser 控件

有什么线索吗？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-21T19:49:48.613

你不能跳过它——Facebook 只允许通过自己的服务器和浏览器窗口进行授权。

另外，听起来不粗鲁，但您可能没有资格存储人们的 Facebook 凭据。

[https://developers.facebook.com/docs/authentication/](https://developers.facebook.com/docs/authentication/) - 请注意，您将用户密码发送到 Facebook 时没有静默登录选项 - 在所有授权示例中，都有一个官方 Facebook 登录窗口在起作用。

# nosql - 如何从 NoSQL DBMS（如 DynamoDB）存储 GPS 坐标并在半径范围内搜索地点

> ID：10691547
> 
> 赞同：7
> 
> 时间：2012-05-21T19:41:40.113
> 
> 标签：nosql, gis, database, coordinate

我的团队需要像 DynamoDB 这样的 DBMS 来存储大量数据，主要是地点和坐标。我考虑过在 POINT 上使用一些基于 GIS 的 DBMS（如 PostGIS），但 DynamoDB 似乎非常适合我们使用。

### 存储坐标并快速检索特定半径内所有对象的最佳方法是什么？

在 PostGIS 中很简单，如下所示：

```
SELECT *
FROM places
WHERE ST_DWithin(coordinate, ST_GeomFromText('POINT(45.07085 7.68434)', 4326), 100.0); 
```

我怎样才能在 NoSQL DBMS 中做类似的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T19:52:01.737

我们遇到了同样的问题，我们特别使用 AWS 和 DynamoDB。我们通过使用 CloudSearch 服务解决了这个问题，每次我们在数据库中存储一些“可地理搜索”数据时，我们都会在 CloudSearch 实例中使用 lat,lon 作为过滤器来索引数据（为此，您必须对 lat 和lon 把它变成一个 uint ）。

然后假设您想对特定纬度/经度和半径进行搜索，您计算相应的地理框（latmin、latmax、lonmin、lonmax）并使用特定过滤器查询您的 CloudSearch 实例以检索数据的关键模式，您然后可以查询 DynamoDB 以获取信息。

Java中的一些代码可以完成上述操作：

使用 Tyler Coles 的 com.javadocmd.simplelatlng.window 包中的 RectangularWindows，计算边界框并对 lat / lon 进行转换。

```
RectangularWindow rectangularWindow = new RectangularWindow(newLatLng(location.getLat().doubleValue(), location.getLon().doubleValue()), radius.doubleValue(), radius.doubleValue(), LengthUnit.KILOMETER);
latMin = (long) ((180 + rectangularWindow.getMinLatitude()) * 100000);     
latMax = (long) ((180 + rectangularWindow.getMaxLatitude()) * 100000);
lonMin = (long) ((360 + rectangularWindow.getLeftLongitude()) * 100000);
lonMax = (long) ((360 + rectangularWindow.getRightLongitude()) * 100000); 
```

然后是对 CloudSearch 实例的查询示例：

http://[SEARCHURL]/2011-02-01/search?bq=(和 lat:22300347..22309340 (和 lon:28379282..28391589))

我不确定这是不是最好的解决方案，但这就是我们想出的

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T15:08:57.253

您可以使用 geohashing 根据字符串而不是计算来查询附近的对象。

Geohash 将允许您将节点的位置存储到“存储桶”中，然后可以通过在 dynamodb 中使用字符串作为范围或哈希键来查询这些存储桶。

这是一个很好的例子[https://github.com/davetroy/geohash-js](https://github.com/davetroy/geohash-js)用 javascript 完成，可以很容易地用其他语言重写。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T06:32:25.577

我目前正在自己​​研究这个主题。我正在使用 MongoDb（我知道您要求使用 DynamoDb，但您也要求使用一般 NoSql 用法），我的代码如下所示：

记录结构：

```
public class FrameDocument
{
    [BsonId]
    public Guid Id { get; set; }

    [BsonElement("coordinates")]
    public Point[] Polygon { get; set; }
}

public class Point
{
    [BsonElement("name")]
    public string Orientation { get; set; }

    [BsonElement("loc")]
    public double[] Location { get; set; }
} 
```

连接和保证指标：

```
MongoServer server = MongoServer.Create(connectionString);
MongoDatabase database = server.GetDatabase(databaseName);
database.GetCollection(collectionName).EnsureIndex(IndexKeys.GeoSpatial("coordinates.loc")); 
```

写作：

```
var items = database.GetCollection(collectionName);
items.InsertBatch(itemsToInsert); 
```

搜索：

```
double[,] points; // define you search coordinates
var items = database.GetCollection<FrameDocument>(collectionName);
var query = Query.WithinPolygon("coordinates.loc", points);
var cursor = items.Find(query); 
```

# c - sendto() - C 中的 UDP 单播

> ID：10691548
> 
> 赞同：0
> 
> 时间：2012-05-21T19:41:40.537
> 
> 标签：c, sockets, udp, sendto

我有下面的功能，将UDP 单播发`message`送到`next_hop`（例如 192.168.0.10）。当我编译代码时，我收到以下`passing argument 2 of 'sendto' makes pointer from integer without a cast`行警告`if(sendto(s, *message, BUFSIZE, 0, &si_other, slen) == -1)`。如何修复代码？谢谢你的回答。

```
void log_msg_send(char *message, char *next_hop){

struct sockaddr_in si_other;
int s, slen = sizeof(si_other);
int port_no = 3333;
char *nexthop;
unsigned short Server_port;
nexthop = next_hop;
Server_port = port_no;

if((s = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP)) == -1) {
    fprintf(stderr,"socket error");
    exit(1);
}

memset((char *) &si_other, 0, sizeof(si_other));
si_other.sin_family = AF_INET;
si_other.sin_port = htons(Server_port);

if(inet_aton(nexthop, &si_other.sin_addr) == 0){
    fprintf(stderr,"socket error");
    exit(1);
}

if(sendto(s, *message, BUFSIZE, 0, &si_other, slen) == -1){
    fprintf(stderr,"socket error");
    exit(1);
}

close(s); 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:46:10.313

```
char * message 
```

方法：

```
(char *) message // message is a pointer-to-char 
```

和：

```
char (*message) // *message is a char 
```

因此，当您需要传递 a 时`char*`，请使用`message`. 如果您需要该缓冲区中的第一个字符，请使用`*message`.

* * *

警告：

```
char * a, b; 
```

在放置空格的任何地方制作`a`a `char*`，但`b`很简单。`char`

* * *

第五个参数可能需要`struct sockaddr*`手动转换为 a，这取决于它在系统上的原型化方式。

# oracle - Oracle JNDI Tomcat 和 Spring

> ID：10691551
> 
> 赞同：3
> 
> 时间：2012-05-21T19:41:50.440
> 
> 标签：oracle, spring, tomcat, jndi

我正在尝试在 Tomcat 中配置 Oracle JNDI 数据源以与我的 Spring 数据源一起使用，但每次尝试连接到我的数据库时都会遇到问题。

这是我的配置：

在我的应用程序 /META-INF/context.xml

```
<Context docBase="web-site" path="/web-site" reloadable="true" source="org.eclipse.jst.j2ee.server:web-site">

    <Resource name="jdbc/OracleDB" auth="Container"
    type="oracle.jdbc.pool.OracleDataSource" username="system" password="xxxxx"
    driverClassName="oracle.jdbc.driver.OracleDriver" url="jdbc:oracle:thin:@127.0.0.1:1521:XE"
    factory="oracle.jdbc.pool.OracleDataSourceFactory" maxactive="40"
    maxidle="3" maxwait="10000" poolpreparedstatements="true"
    maxopenpreparedstatements="100" validationquery="SELECT SYSDATE FROM DUAL" />

</Context> 
```

在 WEB-INF/web.xml 中：

```
<resource-ref>
    <description>Oracle Connection Pool</description>
    <res-ref-name>jdbc/OracleDB</res-ref-name>
    <res-type>oracle.jdbc.pool.OracleDataSource</res-type>
    <res-auth>Container</res-auth>
</resource-ref> 
```

在 spring-dao-config.xml 中：

```
<bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName" value="java:comp/env/jdbc/OracleDB" />
    <property name="resourceRef" value="true"/>
    <property name="proxyInterface" value="javax.sql.DataSource" />
    <property name="lookupOnStartup" value="true" />
</bean> 
```

当我尝试运行我的应用程序时，出现以下错误页面：

```
 org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.transaction.CannotCreateTransactionException: Could not open Hibernate Session for transaction; nested exception is org.hibernate.exception.GenericJDBCException: Could not open connection
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
cause mère

org.springframework.transaction.CannotCreateTransactionException: Could not open Hibernate Session for transaction; nested exception is org.hibernate.exception.GenericJDBCException: Could not open connection
    org.springframework.orm.hibernate4.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:440)
    org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:371)
    org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:335)
    org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:105)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    $Proxy18.readAll(Unknown Source)
    com.website.controller.HelloWorldController.helloWord(HelloWorldController.java:20)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:616)
    org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
cause mère

org.hibernate.exception.GenericJDBCException: Could not open connection
    org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:52)
    org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:304)
    org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.getConnection(LogicalConnectionImpl.java:169)
    org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.doBegin(JdbcTransaction.java:67)
    org.hibernate.engine.transaction.spi.AbstractTransactionImpl.begin(AbstractTransactionImpl.java:160)
    org.hibernate.internal.SessionImpl.beginTransaction(SessionImpl.java:1263)
    org.springframework.orm.hibernate4.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:399)
    org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:371)
    org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:335)
    org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:105)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    $Proxy18.readAll(Unknown Source)
    com.website.controller.HelloWorldController.helloWord(HelloWorldController.java:20)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:616)
    org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
cause mère

java.sql.SQLException: arguments non valides dans l'appel
    oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:113)
    oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:147)
    oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:209)
    oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:236)
    oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:454)
    oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:165)
    oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:35)
    oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:802)
    oracle.jdbc.pool.OracleDataSource.getPhysicalConnection(OracleDataSource.java:298)
    oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:222)
    oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:166)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:616)
    org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
    org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:196)
    $Proxy6.getConnection(Unknown Source)
    org.hibernate.service.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:141)
    org.hibernate.internal.AbstractSessionImpl$NonContextualJdbcConnectionAccess.obtainConnection(AbstractSessionImpl.java:276)
    org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:297)
    org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.getConnection(LogicalConnectionImpl.java:169)
    org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.doBegin(JdbcTransaction.java:67)
    org.hibernate.engine.transaction.spi.AbstractTransactionImpl.begin(AbstractTransactionImpl.java:160)
    org.hibernate.internal.SessionImpl.beginTransaction(SessionImpl.java:1263)
    org.springframework.orm.hibernate4.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:399)
    org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:371)
    org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:335)
    org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:105)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    $Proxy18.readAll(Unknown Source)
    com.website.controller.HelloWorldController.helloWord(HelloWorldController.java:20)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:616)
    org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

请问您对我的问题有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T20:58:16.740

最初的异常是“java.sql.SQLException: arguments non valides dans l'appel”（英文：“java.sql.SQLException: invalid arguments in call”）并且发生在驱动程序级别。我不相信这是Tomcat中的问题。

我会检查您的 Oracle JDBC URL ("jdbc:oracle:thin:@127.0.0.1:1521:XE") 以确保它是准确的，适合您使用的驱动程序（您使用的是瘦驱动程序吗？大多数人们这样做，但值得检查），并且格式正确。

如果您仍然遇到问题，请考虑使用 Tomcat 的内置数据源（只需从您的 <Resource> 元素中删除“工厂”属性）...您可能会有更好的运气。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T20:50:20.723

只能看到 1 个问题，您的 web.xml 文件中的 res-type 不应该是`javax.sql.DataSource`

```
 <res-type>javax.sql.DataSource</res-type> 
```

# javascript - 我希望能够水平滚动大图像，但同时显示可以变化的整个高度

> ID：10691553
> 
> 赞同：2
> 
> 时间：2012-05-21T19:42:06.090
> 
> 标签：javascript, css

我有一个 1900 像素 x 1000 像素的大图像；它的宽度可以通过javascript左右滚动来查看，因为包含div的overflow-x是隐藏的。图像高度将被缩放以显示图像在顶部横幅下方到视口底部的可用空间内的完整高度——它不需要垂直滚动。

我的问题是如何最好地处理图像高度的缩放，同时仍然保持图像比例并且仍然具有足够大的图像以便仍然发生水平滚动（除非屏幕分辨率超过图像比例）。我希望答案可以通过 CSS 完成，但 JavaScript 解决方案也是一种选择。

提前感谢您的帮助，

斯兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T19:45:30.050

您是否正在寻找`overflow-y:scroll;overflow-x:hidden;`仅允许在 y 方向上进行本机滚动的选项。然后，您可以通过 javascript 控制 x 滚动。

# javascript - Javascript大写不工作

> ID：10691554
> 
> 赞同：2
> 
> 时间：2012-05-21T19:42:14.060
> 
> 标签：javascript, jquery

我试图在用户填写后将文本输入值更改为大写字符串：

```
$('#University').blur(function(){
    if ( $(this).attr("value") != '') {
        var uni = $(this).val();
        uni.toUpperCase();
        alert(uni);
        $(this).attr("value", uni);
        };
});

<input type="text" name="Universidad" size="45" class="required" id="University"> 
```

如果我在字段中写入“leandro”，`alert(uni)`则会抛出：“leandro”而不是“LEANDRO”。任何的想法？

**我无法使用 CSS，因为我必须通过此表单发送大写数据，而 css 仅更改渲染而不更改值**

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-21T19:42:37.433

改成这样：

```
uni = uni.toUpperCase(); 
```

字符串是不可变的，因此您需要将结果分配给变量，覆盖旧字符串。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-21T19:42:44.047

该`.toUpperCase()`函数返回一个新字符串；它不会修改现有字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T19:47:28.973

你可以用更好的方式重写你的函数。见下文，

```
$('#University').blur(function(){
    this.value = this.value.toUpperCase();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T20:57:07.170

`toUpperCase()`是一种方法。它返回一个你需要做某事的值。

您调用了`.toUpperCase()`on 方法`uni`，但没有在任何地方分配它。

```
uni = uni.toUpperCase(); 
```

...应该有帮助。

# c# - 使用 C# 从 Visual Fox Pro 数据库中读取数据

> ID：10691556
> 
> 赞同：1
> 
> 时间：2012-05-21T19:42:24.110
> 
> 标签：c#, .net, visual-foxpro

我能够与 Visual Fox Pro 数据库建立数据连接，我需要从它到 2 个表。如何加入 2 个表然后在 C# 中检索数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T17:56:38.183

首先，我会[下载 Microsoft 的 Visual FoxPro OleDb 提供程序](http://www.microsoft.com/en-us/download/details.aspx?id=14839)。

下载并安装后，您可以使用它连接到数据库表所在的 PATH。此外，如果应用程序使用的是正确链接表的“数据库”，您也可以显式包含数据库名称。

```
using System.Data;
using System.Data.OleDb;

public class YourClass
{
   public DataTable GetYourData()
   {
      DataTable YourResultSet = new DataTable();

      OleDbConnection yourConnectionHandler = new OleDbConnection(
          "Provider=VFPOLEDB.1;Data Source=C:\\SomePath\\;" );

      // if including the full dbc (database container) reference, just tack that on
//      OleDbConnection yourConnectionHandler = new OleDbConnection(
//          "Provider=VFPOLEDB.1;Data Source=C:\\SomePath\\NameOfYour.dbc;" );

      // Open the connection, and if open successfully, you can try to query it
      yourConnectionHandler.Open();

      if( yourConnectionHandler.State == ConnectionState.Open )
      {
         OleDbDataAdapter DA = new OleDbDataAdapter();
         string mySQL = "select A1.*, B1.* "
                     + " from FirstTable A1 "
                     + "      join SecondTable B1 "
                     + "         on A1.SomeKey = B1.SomeKey "
                     + " where A1.WhateverCondition ";  // blah blah...

         OleDbCommand MyQuery = new OleDbCommand( mySQL, yourConnectionHandle );

         DA.SelectCommand = MyQuery;

         DA.Fill( YourResultSet );

         yourConnectionHandle.Close();
      }

      return YourResultSet;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T02:49:29.980

如果有人正在寻找一个比较完整的测试。您需要从 Microsoft 下载 VFPOLEDB 驱动程序。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.OleDb;
using System.Data;

    namespace ConsoleApplication1
    {
        class Program
        {
            static void Main(string[] args)
            {
                OleDbConnection connection = new OleDbConnection(
        "Provider=VFPOLEDB.1;Data Source=F:\\Gutters\\Data\\database.dbc;"
    );
                connection.Open();
                DataTable tables = connection.GetSchema(
                    System.Data.OleDb.OleDbMetaDataCollectionNames.Tables
                );

                foreach (System.Data.DataRow rowTables in tables.Rows)
                {
                    Console.Out.WriteLine(rowTables["table_name"].ToString());
                    DataTable columns = connection.GetSchema(
                        System.Data.OleDb.OleDbMetaDataCollectionNames.Columns,
                        new String[] { null, null, rowTables["table_name"].ToString(), null }
                    );
                    foreach (System.Data.DataRow rowColumns in columns.Rows)
                    {
                        Console.Out.WriteLine(
                            rowTables["table_name"].ToString() + "." +
                            rowColumns["column_name"].ToString() + " = " +
                            rowColumns["data_type"].ToString()
                        );
                    }
                }

                string sql = "select * from customer";
                OleDbCommand cmd = new OleDbCommand(sql, connection);

                DataTable YourResultSet = new DataTable();
                OleDbDataAdapter DA = new OleDbDataAdapter(cmd);

                DA.Fill(YourResultSet);
            }
        }
    } 
```

# sqlite - GROUP BY 时间戳值范围

> ID：10691560
> 
> 赞同：4
> 
> 时间：2012-05-21T19:42:40.083
> 
> 标签：sqlite, timestamp, unix-timestamp

我花了很多时间阅读，但仍然找不到最佳解决方案。我正在设计一个 Android 卡路里计数器应用程序，我正在使用 SQLite。我有一个表`food_logs`，其中有 2 个字段：`log_date(NUMBER) , food_id(NUMBER)`. 我将日期保存为 unix 时间戳。我想检索一个人过去几天吃过的所有食物。

例如今天或 2012-05-20（昨天）吃的所有食物。我正在搜索 GROPBY 时间戳，但我一无所获。

或者我只需要将日期保存为字符串（我认为这不是最佳做法）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T19:59:41.260

您可以在查询表时将您的 unix 时间戳转换为字符串值。看看[SQLite 日期功能](http://www.sqlite.org/lang_datefunc.html)。

例如，您可以在查询中使用以下代码：

```
SELECT food_id, COUNT(*) FROM food_logs GROUP BY date(log_date, 'unixepoch'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T20:00:24.033

表中的各种时间戳值将具有不同的小时、分钟、秒值。SQL 的 GROUP BY 用于收集具有**相同**值的多行，因此这里的语法对您不起作用。如果你只需要总结一天的数据，你可以做这样的事情，假设你有一个表 food_info 列 food_id 和 calorie_count：

```
SELECT SUM(calorie_count)
    FROM food_logs fl INNER JOIN food_info fi ON fi.food_id = fl.food_id
    WHERE log_date >= '2012-21-05' AND log_date < '2012-21-06' 
```

您可能需要稍微调整一下以适应 SQLLite 的特定语义。

# ms-access - 从访问导入到本地数据库

> ID：10691562
> 
> 赞同：2
> 
> 时间：2012-05-21T19:42:44.420
> 
> 标签：ms-access

我正在开发一个新系统。旧的使用访问数据库，考虑到存储在那里的大量数据和使用该程序的人数，这非常可怕。所以我认为最好使用Visual Studio提供的本地数据库项目（添加新项目>数据>本地数据库）并将其放在共享文件夹中（就像旧程序使用访问数据库的方式一样[a服务器现在不是一个选项]）。 **我想知道是否有一种方法可以将访问包含的数据和表导入到我添加到项目中的本地数据库中？（可能通过从访问中导出的文件，如 ODBC 文件）**

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:55:36.357

我可能是错的，但我相当肯定 VS 中的本地数据库，正如您所描述的，它将添加一个[SQL CE](http://msdn.microsoft.com/en-us/library/ms172417.aspx)数据库，该数据库嵌入您的应用程序中，并且无法与您的某个文件共享上的 Access 数据库相媲美网络。您可能正在考虑将 SQL Server Express 用于此类设计的最低限度。如果您确实使用 SQL Server Express，则可以使用 Microsoft Access 轻松地将 Access 数据库“升级”到 SQL Server。

# android - CheckBox 按钮选择器导致不可见的复选框

> ID：10691564
> 
> 赞同：1
> 
> 时间：2012-05-21T19:42:51.377
> 
> 标签：android, android-layout

我正在尝试设置我在布局中使用的 CheckBox 元素的样式。

由于我希望不同活动之间的样式保持一致，因此我创建了一个自定义主题，并在清单中应用。

styles.xml 文件如下所示：

```
<style name="LightTheme" parent="@android:style/Theme.NoTitleBar">
   .
   .
   <item name="android:checkboxStyle">@style/CustomCheckBox</item>
   .
   .
</style>
.
.
<style name="CustomCheckBox" parent="@android:style/Widget.CompoundButton.CheckBox"> 
    <item name="android:button">@drawable/btn_check_selector</item> 
    <item name="android:textColor">@color/mainTextColorLight</item>
    <item name="android:textSize">15dp</item>
</style> 
.
. 
```

选择器与 SDK 中的 CheckBox 选择器基本相同，如下所示：

```
<!-- Enabled states -->        
<item android:state_checked="true" android:state_window_focused="false"
      android:state_enabled="true"
      android:drawable="@drawable/btn_check_on" />
<item android:state_checked="false" android:state_window_focused="false"
      android:state_enabled="true"
      android:drawable="@drawable/btn_check_off" />

<item android:state_checked="true" android:state_pressed="true"
      android:state_enabled="true"
      android:drawable="@drawable/btn_check_on_pressed" />
<item android:state_checked="false" android:state_pressed="true"
      android:state_enabled="true"
      android:drawable="@drawable/btn_check_off_pressed" />

<item android:state_checked="true" android:state_focused="true"
      android:state_enabled="true"
      android:drawable="@drawable/btn_check_on_focused" />
<item android:state_checked="false" android:state_focused="true"
      android:state_enabled="true"
      android:drawable="@drawable/btn_check_off_focused" />

<item android:state_checked="false"
      android:state_enabled="true"
      android:drawable="@drawable/btn_check_off" />
<item android:state_checked="true"
      android:state_enabled="true"
      android:drawable="@drawable/btn_check_on" />

<!-- Disabled states -->

<item android:state_checked="true" android:state_window_focused="false"
      android:drawable="@drawable/btn_check_on_disabled" />
<item android:state_checked="false" android:state_window_focused="false"
      android:drawable="@drawable/btn_check_off_disabled" />

<item android:state_checked="true" android:state_focused="true"
      android:drawable="@drawable/btn_check_on_disabled_focused" />
<item android:state_checked="false" android:state_focused="true"
      android:drawable="@drawable/btn_check_off_disabled_focused" />

<item android:state_checked="false" android:drawable="@drawable/btn_check_off_disabled" />
<item android:state_checked="true" android:drawable="@drawable/btn_check_on_disabled" /> 
```

选择器存储在我项目的“drawable”文件夹中，密度特定的资源存储在 drawable-{l|m|h|xh}dpi 文件夹中。

奇怪的是，这在很长一段时间内都非常有效。但是今天，它突然不再工作了。CheckBox 元素现在显示为没有框部分。只有文本可见。

所有其他自定义样式元素都按预期工作，而 CheckBox 显示这种奇怪的行为。

我尝试将样式直接应用于带有 xml 的 CheckBox，但没有成功。还完成了通常的“清洁项目”。我可以让它工作的唯一方法是将选择器复制到我项目中的所有 drawable-{l|m|h|xh}dpi 文件夹。我的印象是没有必要在每个可绘制文件夹中都有选择器的副本，而且我的其他自定义选择器当然也没有必要。

谁能在我的代码中发现任何明显的缺陷？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:19:45.693

终于解决了，问题似乎是某种名称冲突。

将我的选择器从“btn_check_selector.xml”重命名为“selector_check.xml”，并对我的 CustomCheckBox 样式进行了相应的更改：

```
<style name="CustomCheckBox" parent="@android:style/Widget.CompoundButton.CheckBox"> 
    <item name="android:button">@drawable/selector_check</item> 
    <item name="android:textColor">@color/mainTextColorLight</item>
    <item name="android:textSize">15dp</item>
</style> 
```

选择器位于我项目的“drawable”文件夹中，密度特定资源位于它们各自的 drawable-{l|m|h|xh}dpi 文件夹中。

这有点奇怪，因为我的项目中没有任何其他名为“btn_check_selector”的文件。我唯一的猜测是 Eclipse 搞砸了！

# c# - 使用自定义模型查看数据

> ID：10691567
> 
> 赞同：0
> 
> 时间：2012-05-21T19:42:55.653
> 
> 标签：c#, .net, asp.net-mvc

每个人。

我有一些包含数据的表格，例如：内容、菜单、信息。这些表没有任何关系。我需要在一个视图上编辑这些表中的数据。像这样的东西：

```
----------------------------------------
Content Editor        |Menu editor     |
                      |                |
                      |                |
                      ------------------
                      |Info editor     |
                      |                |
                      |                |
______________________|________________| 
```

我不能在一个视图上使用多个模型，所以我尝试制作一个大模型：

```
public class Management
{
    public Content Content { get; set; }
    public Info Info { get; set; }
    public Menu Menu { get; set; }
} 
```

但是通过这种方式，我无法使用 ToList() 发送数据来查看。有人可以说我应该使用或阅读的例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T19:45:54.557

在您的 ViewModel 中执行以下操作：

```
public class Management
{
    public List<Content> Content { get; set; }
    ...
} 
```

对于您想要列表的任何属性，请使用`List<T>`. 上面是一个示例，对您想要在列表中的任何属性执行此操作。

# unix - unix 脚本 - 分隔输出但字符不是 \n

> ID：10691569
> 
> 赞同：-1
> 
> 时间：2012-05-21T19:43:08.697
> 
> 标签：unix, ls

将（例如）ls 的输出转换为“：”分隔而不是“\ n”分隔的简单方法（例如，没有perl）是什么？
我希望有一个 sed 或可能是 awk 短的单行符，`\n`但我不知道如何让那些被视为不是行分隔符的字符。我知道 Perl 正则表达式通过一个选项来提供这个，我认为 /m 或 /s 什么的。哪一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:46:17.507

```
ls | tr "\n" :
ls | awk -vORS=: 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T19:45:53.497

你看过最尊贵的tr吗？

```
ls | tr "\n" "." 
```

如果我没记错的话。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T19:46:50.973

也许你可以尝试使用 tr，我认为它只有一个字符。

```
ls | tr '\n' '+' 
```

# css - 按基线对齐块级元素和段落元素

> ID：10691571
> 
> 赞同：1
> 
> 时间：2012-05-21T19:43:11.800
> 
> 标签：css

我试图通过基线使标题与正文对齐，但这似乎证明非常困难。我一直在玩弄不同的方法，但似乎找不到完美的解决方案。这是我所追求的一个例子：

![例子](../Images/648901c46289cef8569b7b2cf18412e2.png)

```
<h2>XxMmxX</h2>
<p class="right">
    I saw for the first time the earth's shape. I could easily see the shores of continents, islands, great rivers, folds of the terrain, large bodies of water. The horizon is dark blue, smoothly turning to black. . . the feelings which filled me I can express with one word—joy.
</p> 
```

风格：

```
h2 {
    position: relative;
    font-size: 24px;
    line-height: 40px;
    text-align: right;
    width: 190px;
    top: 30px;
}
.right {
    margin-left: 200px;
    font-size: 14px;
    line-height: 20px;
} 
```

我想让“XxMmxX”的基线与文本的基线对齐。

一些注意事项：

*   标题右对齐并具有固定宽度
*   标题使用比正文更大的字体大小
*   我希望它们完全对齐，这意味着不仅仅是设置一些 px 的顶部并使其几乎对齐。（此页将被打印，这肯定会很明显）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T19:50:10.470

尝试使用表格，并使用`vertical-align: baseline;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T19:26:17.160

您不必使用表格布局，也不必使用`vertical align`. 将两个元素设置为使用相同`line-height`的元素并对齐元素的顶部。如果您对让文本停留在基线上很挑剔，请使用`position:relative; and top:FOOpx`上下移动文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T21:24:46.460

这是另一个没有表格的解决方案：首先我使用 a`<div>`而不是`<p>`：

```
<h2 class="left">XxMmxX</h2>

<div class="right">
    I saw for the first time the earth's shape. I could easily see the shores of continents, islands, great rivers, folds of the terrain, large bodies of water. The horizon is dark blue, smoothly turning to black. . . the feelings which filled me I can express with one word—joy.
</div> 
```

我习惯`float`把. 对齐技巧是通过设置已知的字体大小来完成的，比如to和to 。这样你需要向下移动一个已知的量，在这种情况下。向下移动完成（您也可以使用顶部边距）。这里是：`<div>``<h2>``1em``<div>``1.5em``<h2>``<div>``0.5em``position/top`

```
.left {
  float: left;
  font-size: 1.5em;

}

.right {
  font-size: 1em;
  float: left;
  width: 20em;  
  position: relative;
  top: 0.5em;
  margin-left: 10px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T00:34:26.310

I may have something that's kinda close. Here's the [jsfiddle](http://jsfiddle.net/FEh95/2/).

HTML:

```
<span class="textblock">
  <h2>XxMmxXx</h2>

  <span class="right">
    I saw for the first time the earth's shape. I could easily see the shores of continents, islands, great rivers, folds of the terrain, large bodies of water. The horizon is dark blue, smoothly turning to black. . . the feelings which filled me I can express with one word—joy.
  </span>

</span> 
```

CSS:

```
.textblock {
  float: left;
  line-height: 1em;
}

h2 {
  font-size: 1.5em;
  display: inline-block;
}

.right {
  display: inline-block;
  font-size: 1em;
  width: 15em;
  vertical-align: text-top;
  margin-left: 30px;
} 
```

It seems that `vertical-align: text-top` may be what you want, but it requires everything to be inline. Combined with `display:inline-block` you may be able to get something close to what you need. You'll probably have to fiddle with the width and margin of the `.right` class to adjust to your layout.

Hope that helps.

# php - 用于评论计数的 Facebook Graph API 身份验证？（想我错过了什么。）

> ID：10691573
> 
> 赞同：0
> 
> 时间：2012-05-21T19:43:19.990
> 
> 标签：php, facebook, facebook-opengraph

我在尝试让一些 PHP 代码与 Facebook 提供的 Open Graph API 一起工作时遇到了一些问题。

我有一些 PHP 代码，它接受一个 url 并返回使用 Facebook 评论插件在该页面上发表的评论数。

我知道代码有效，但是有一个小问题。

当我尝试我的代码时，它没有显示任何信息。当我签入 Facebook 提供的 API Explorer 时，我想要的信息就在那里。唯一的区别是在使用 API 资源管理器时使用的是访问令牌。

我正在运行的代码正在尝试获取同一域上页面的图形数据。这也不需要用户授权我们的应用程序，因为仅仅为了告诉某人在一个页面上发表了多少评论而请求授权是没有意义的。

所以我的问题是，如何在下面的代码中包含访问令牌：

```
function fb_comment_count($url = '') {
$filecontent = file_get_contents('https://graph.facebook.com/?ids=' . $url);
$json = json_decode($filecontent);
$count = $json->$url->comments;
if ($count == 0 || !isset($count)) {
    $count = 0;
}
echo $count;
} 
```

现在唯一的问题是这个**https://graph.facebook.com/?ids=' 。$url**它返回空，但是当我使用相同的 URL 时，API Explorer 会显示正确的信息。可以在某个地方包含访问令牌，还是我缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T05:04:40.087

实际上我最终使用了这段代码，它让我获得的不仅仅是评论计数（它使用 Facebook PHP SDK）：

```
<?php
// Stats taken from link_stats table
// Documentation: http://developers.facebook.com/docs/reference/fql/link_stat/
function FBLinkStats($url,$type){

$fbconfig['appid' ]  = "###########";
$fbconfig['secret']  = "###########";
include_once "facebook.php";

$facebook = new Facebook(array(
    'appId'  => $fbconfig['appid' ],
    'secret' => $fbconfig['secret'],
    'cookie' => true
));

$fql = "SELECT url, normalized_url, share_count, like_count, comment_count, total_count, commentsbox_count, comments_fbid, click_count FROM link_stat WHERE url = '".$url."' ";
$param  =   array(
    'method'    => 'fql.query',
    'query'     => $fql,
    'callback'  => ''
);
$fqlResult   =   $facebook->api($param);
return $fqlResult[0][$type];
}
?> 
```

该函数有两个变量，您正在获取信息的页面的 URL，以及您想要返回的统计信息，可以在此页面上找到：http: [//developers.facebook.com/docs/reference/fql/link_stat/](http://developers.facebook.com/docs/reference/fql/link_stat/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T10:55:53.410

您需要访问令牌来查询此数据。

但是，您可以使用应用访问令牌，而不是要求用户进行身份验证。

在这里查看如何生成一个：http: [//developers.facebook.com/docs/authentication/applications/](http://developers.facebook.com/docs/authentication/applications/)

# c# - 在类之间共享代码

> ID：10691576
> 
> 赞同：0
> 
> 时间：2012-05-21T19:43:47.963
> 
> 标签：c#

假设我有一个像这样的简单函数：

```
public static string randomthing(string var1) 
{
    string var2 = "hello world";
    return var2;
} 
```

我希望能够从不同的班级调用它。我该怎么做？

我试图创建一个空白文件并将函数粘贴到那里，但当然它不是那样工作的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T19:45:28.973

如果你想共享代码，你需要创建一个可以被其他类使用的第三个类。

这可以作为扩展方法、静态类或常规类（意味着您需要该类的实例）来完成。

静态类：

```
public static MyClass
{
    public static string randomthing(string var1) {

        string var2 = "hello world";
        return var2;
    }
}

// Call it: MyClass.randomthing("a string"); 
```

扩展方法：

```
public MyClass
{
    public static string randomthing(this string var1) {

        string var2 = "hello world";
        return var2;
    }
}

// Call it: "a string".randomthing(); 
```

普通班：

```
public static MyClass
{
    public static string randomthing(string var1) {

        string var2 = "hello world";
        return var2;
    }
}

// Call it: var myClass = new myClass(); 
//          myClass.randomthing("a string"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T19:46:52.217

方法只能是类的一部分。因此，在类（或[struct](http://msdn.microsoft.com/en-us/library/ah19swz4%28v=vs.100%29.aspx)）中声明它，当它只是静态方法的集合时，它可以是静态的：

```
class RandomThings
{
    public static string randomthing(string var1) {
        string var2 = "hello world";
        return var2;
     } 
} 
```

现在您可以通过以下方式调用此方法`ClassName.MethodName`：

```
String randomString = RandomThings.randomthing("hello world"); 
```

[方法（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173114%28v=vs.100%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T19:48:44.430

您可以将类设为静态并从另一个类调用它，而无需实例化该类本身。

```
public static class Utility {
    public static string randomthing(string var1) {

                string var2 = "hello world";

                return var2;

    }
}

public class UsingTheCodeHere
{

    public string SayingHelloWorld()
    {
        return Utility.randomthing();
    }

} 
```

您还可以使用继承实现类似的功能。

```
public class Person 
{
     public string SayHello()
     {
         return "Hello"; 
     }
}

public class LoudMouth : Person
{
    public override string SayHello()
    {
        return base.SayHello() + "!!!!";
    }
}

public class SadPerson : Person
{
    public override string SayHello()
    {
        return base.SayHello() + " I am sad";
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T19:47:11.453

由于该函数是[static](http://msdn.microsoft.com/en-us/library/79b3xss3%28v=vs.80%29.aspx)，因此只需使用封闭的类名来调用它：

```
public class Foo
{
   public static string randomthing(string var1)
   {
      string var2 = "hello world";
      return var2;
   }
}

public class OtherClass
{  
    public OtherClass()
    {
       // In constructor
       string here1 = Foo.randomthing("x");
    }

    public void OrInSomeFunction()
    {
       string here2 = Foo.randomthing("x");
    }
} 
```

# wcf - 我可以将 DataAnnotations 与 Viewmodel 类一起使用吗？

> ID：10691578
> 
> 赞同：1
> 
> 时间：2012-05-21T19:44:20.860
> 
> 标签：wcf, asp.net-mvc-3, data-annotations, automapper

在我的解决方案中，我有一个 ASP.NET MVC3 项目和一个使用数据库的 WCF 项目。我将`AutoMapper`用来映射对象。

我的问题是：我可以将 DataAnnotations 与我的视图模型类一起使用，并将它们映射到从 WCF 服务项目接收到的对象吗？

像

```
public class User
{
    [Required,MaxLength(30)]
    public string UserName { get; set; }

    [Required]
    public string Email { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:00:36.670

我将它们用于两件事：

*   实体框架映射告诉实体框架如何生成列（尽管我通常为此使用流利的 API）
*   输入验证，所以这就是您的 ViewModel 的用武之地。您可以使用数据注释对其进行注释，并使用 jquery.validate 和 MVC 的 ModelState.IsValid 来验证是否满足所有要求。

当一切正常时，您可以将 ViewModel 映射到没有注释的 POCO/实体。

# ios5 - NSURLConnection sendAsynchronousRequest：块永远不会被调用

> ID：10691581
> 
> 赞同：2
> 
> 时间：2012-05-21T19:44:22.140
> 
> 标签：ios5, asynchronous, block

程序流永远不会到达带有 NSLog-Message 的 Block。我在这里错过了什么吗？

```
[NSURLConnection 
    sendAsynchronousRequest:req  
    queue: [NSOperationQueue mainQueue] 
    completionHandler: ^(NSURLResponse *response_, NSData *data_, NSError *error_) {
         NSLog(@"Why am I not being called %@", data_);
    }]; 
```

# nservicebus - 传输消息标头实际存储在哪里？

> ID：10691582
> 
> 赞同：1
> 
> 时间：2012-05-21T19:44:38.257
> 
> 标签：nservicebus

在 NServiceBus 2.x 中，Transport Message Headers 实际存储在哪里？

我需要使用内置的队列管理 GUI 或 QueueExplorer 查看用于调试的标头。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T20:57:20.953

在 2.x 中，标头进入 MSMQ 的[Extension 属性](http://msdn.microsoft.com/en-us/library/system.messaging.message.extension.aspx)。

# c# - 我的合并排序算法 C# 的问题

> ID：10691583
> 
> 赞同：-1
> 
> 时间：2012-05-21T19:44:44.500
> 
> 标签：c#, algorithm, mergesort

```
using System;

namespace MergeSort
{
    class Program
    {
        static int[] vektor = { 5, 7, 8, 9, 1, 2, 23, 4 };
        static int[] delVektor;
        static int counter = 0;

        static void Main(string[] args)
        {
            PrintVektor(vektor);
            Merge(0, vektor.Length - 1);
            Console.WriteLine("--------");
            PrintVektor(vektor);
            Console.ReadKey();
        }

        static void PrintVektor(int[] vektor)
        {
            foreach (var item in vektor)
            {
                Console.WriteLine(item.ToString() + " ");
            }
        }

        static void Merge(int start, int stop)
        {
            if (start >= stop)
                return;

            int middle = (start + stop) / 2;

            Merge(start, middle);
            Merge(middle + 1, stop);

            delVektor = new int[stop - start + 1];

            int indexStart = start;
            int indexStop = middle + 1;

            while (indexStart <= middle && indexStop <= stop)
            {
                if (vektor[indexStart] < vektor[indexStop])
                {
                    delVektor[counter] = vektor[indexStart];
                    indexStart++;
                    counter++;
                }

                else
                {
                    delVektor[counter] = vektor[indexStop];
                    indexStop++;
                    counter++;
                }
            }

            while (indexStart <= middle)
            {
                delVektor[counter] = vektor[indexStart];
                indexStart++;
                counter++;
            }

            while (middle <= stop)
            {
                delVektor[counter] = vektor[indexStop]; // <---- here i get index out of range
                indexStop++;
                counter++;
            }

            for (int i = 0; i <= delVektor.Length - 1; i++)
            {
                vektor[start + i] = delVektor[i];
            }
        }
    }
} 
```

问题是我得到一个超出范围异常的索引（我已经在代码中评论过），

```
while (middle <= stop) {
  delVektor[counter] = vektor[indexStop]; // <---- here i get index out of range
  indexStop++; counter++;
} 
```

我想不通

我不知道我做错了什么。我已经盯着这段代码看了很长时间，以至于我只想在尝试修复它时立即将计算机扔出窗外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:20:40.020

修复了你的代码。（也许）

```
using System;

namespace MergeSort{
    class Program{
        static int[] vektor = { 5, 7, 8, 9, 1, 2, 23, 4 };
        static int[] delVektor;
        static int counter = 0;

        static void Main(string[] args){
            PrintVektor(vektor);
            Merge(0, vektor.Length - 1);
            Console.WriteLine("--------");
            PrintVektor(vektor);
            Console.ReadKey();
        }

        static void PrintVektor(int[] vektor){
            foreach (var item in vektor)
                Console.Write(item.ToString() + " ");
            Console.WriteLine("");
        }

        static void Merge(int start, int stop){
            if (start >= stop)
                return;

            int middle = (start + stop) / 2;

            Merge(start, middle);
            Merge(middle + 1, stop);

            delVektor = new int[stop - start + 1];
            counter = 0;//add

            int indexStart = start;
            int indexStop = middle + 1;

            while (indexStart <= middle && indexStop <= stop){
                if (vektor[indexStart] < vektor[indexStop]){
                    delVektor[counter] = vektor[indexStart];
                    indexStart++;
                    counter++;
                } else {
                    delVektor[counter] = vektor[indexStop];
                    indexStop++;
                    counter++;
                }
            }

            while (indexStart <= middle){
                delVektor[counter] = vektor[indexStart];
                indexStart++;
                counter++;
            }

            while (indexStop <= stop){//edit
                delVektor[counter] = vektor[indexStop];
                indexStop++;
                counter++;
            }

            for (int i = 0; i <= delVektor.Length - 1; i++){
                vektor[start + i] = delVektor[i];
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T22:03:30.987

这是你的问题：

```
if (start >= stop)
            return;

        int middle = (start + stop) / 2;

        Merge(start, middle);
        Merge(middle + 1, stop); 
```

`return`如果`start>=stop`您只是应该跳过合并段，则不应该这样做。这是一个修复：

```
int middle = (start + stop) / 2;
if (start < stop){

        Merge(start, middle);
        Merge(middle + 1, stop);
}
//...put the rest of the code which you already have here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T19:57:59.357

当您在数组中使用索引并增加该索引时，您需要测试该索引是否实际上在数组的范围内（您的代码基于 0 的索引）。

您是否测试您的索引以确保它不会超出范围？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T20:32:32.530

查看您在获取异常的循环中使用的条件。请注意，如果条件在第一次输入时为真，它将永远为真。那么修复应该是显而易见的。（提示：循环体中的任何内容都不应更改。）

# php - 每周增加一个价值

> ID：10691584
> 
> 赞同：0
> 
> 时间：2012-05-21T19:45:01.160
> 
> 标签：php

我想看看是否可以在不使用数据库的情况下每周更改几个文本的值数。只需使用 PHP

例如，在网站上，您会看到以下内容

*   游戏 265
*   游戏 264
*   游戏 263
*   游戏 262

1 周后，我希望数字加 1 并更改为

*   游戏 266
*   游戏 265
*   游戏 264
*   游戏 263

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T19:49:30.467

也许您可以通过计算当前日期和过去某个任意日期之间的周数来做到这一点。因此，由于今天是 2012 年 5 月 21 日，如果您计算自 2012 年 5 月 7 日以来的周数，您将得到 2。如果您想从 266 开始计数，您可以这样做：$weeksSinceDate + 264

::UPDATE:: 针对您的问题，这里有一些您可以使用的代码：

```
$counterStartNum = 266;
$date1 = new DateTime("2012-05-21");
$date2 = new DateTime();
$interval = $date1->diff($date2);
$weeksSinceDate = $interval->d / 7;
$currentCounter = $counterStartNum + $weeksSinceDate; 
```

# sparql - DBPedia SPARQL

> ID：10691586
> 
> 赞同：4
> 
> 时间：2012-05-21T19:45:11.580
> 
> 标签：sparql, dbpedia, pagerank, sesame

我可以从以下 URL 使用 LONG::IRI_RANK 运行 SRARQL 查询：[http](http://dbpedia.org/sparql) ://dbpedia.org/sparql但我无法在加载了“person_en.nt”DBPedia 数据集文件的本地 OpenRDF Sesame 存储库中运行它（SPARQL 解析器错误）。

是否可以对本地 Sesame 存储库（不是 Virtuoso）使用 LONG::IRI_RANK （或类似的东西）？可能我应该将另一个（哪个？）DBPedia 数据集文件加载到我的本地 Sesame 存储库中？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T00:01:45.023

`IRI_RANK`是 OpenLink Virtuoso 中的专有扩展。据我所知，芝麻中没有可比的东西。

# windows - 如何从 COM 服务器调用 release

> ID：10691592
> 
> 赞同：2
> 
> 时间：2012-05-21T19:45:30.100
> 
> 标签：windows, com

我正在编写一个 Com 服务器，并且我编写了检测 COM 客户端意外关闭时的情况的代码，在这种情况下，我应该在 COM 服务器代码中关闭 COM 服务器。

我怎样才能做到这一点？

UPD：我遇到了 COM 服务器挂起或更正确的情况，我无法从 COM 客户端连接到 COM 服务器，但包含 COM 服务器的应用程序仍处于活动状态，因此我认为 COM 服务器可以检测到所有旧 COM 客户端都已断开连接/关闭/崩溃并且应用程序将重新启动，因为没有附加新客户端。

我在 COM 客户端的单独线程中编写了以下代码

```
while(not we are closing)
{
   unknown->QueryInterface(IComServer, &server);

   if (server)
     return;
} 
```

所以COM客户端可以等到服务器真正准备好工作

UPD2：刚刚测试：12 分钟后我的 COM 服务器关闭

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T01:51:35.640

COM 定期 ping 客户端以查看它们是否还活着并从死客户端运行接口。所以你的服务器最终会发现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T01:05:51.317

只要您有两个或进程互操作，就会存在这个漏洞。其中一个死了，另一个继续运行，不知道死进程再也不会有另一个请求了。在进程外 COM 服务器的情况下，没有人会调用 IUnknown::Release() 来销毁对象。COM 没有针对该问题的内置修复程序。进程内服务器没有这个问题，崩溃的进程也将服务器取出。这也是一个问题，没有很好的清理，但更容易处理。

让服务器从中恢复是您必须自己添加的内容。例如，您可以让客户端传递其进程 ID，以便服务器可以获取进程句柄并使用 WaitForMultipleHandles() 检测客户端何时崩溃。假设它们都在机器上，那当然不是 COM 要求，也不是服务器可以找到的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T06:22:52.703

COM 将在客户端死亡后的某个时间在 out-proc 服务器中释放服务器端对象，但前提是该对象中没有执行调用。这是关键——COM 不可能停止正在进行的呼叫。因此解决方案是使方法运行时间短，并保证在一些合理的短时间（如几秒钟）内完成。这样，一旦客户端死亡，就没有新的调用来自它，并且在一段时间后正在进行的调用自然结束，然后在超时后 COM 释放服务器中的对象，服务器可以自然停止。

# iis - 301 从 IIS 中的 URL 中去除 aspx

> ID：10691597
> 
> 赞同：0
> 
> 时间：2012-05-21T19:45:51.343
> 
> 标签：iis

我们更改了我们的博客，现在 URL 的末尾没有 .aspx，但 URL 仍然是相同的。所以

/blog/post/Using-Memory-Theory-to-Increase-Inbound-Results.aspx。

变成

/blog/tips/using-memory-theory-to-increase-inbound-results

我想将所有旧网址的 301 设置为新链接。

这是我尝试过的规则，但它重定向到 404 页面：

```
<rule name="Rewrite old blog to PHP format (compound route)" stopProcessing="false">
      <match url="([^/]+)/([^/\?]+)\.aspx$" />
      <action type="Rewrite" url="index.php?route={R:1}&amp;page={R:2}" redirectType="Temporary" />
    </rule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T18:05:46.363

这是有效的 web.config 的重写脚本：

```
<rule name="Remove aspx" stopProcessing="false">
    <match url="(.*)\.aspx\.?" />
    <conditions logicalGrouping="MatchAll" trackAllCaptures="false" />
    <action type="Rewrite" url="{R:1}" appendQueryString="true" logRewrittenUrl="true" />
</rule> 
```

# opengl - 是否可以创建一个固定大小的过剩窗口？

> ID：10691603
> 
> 赞同：9
> 
> 时间：2012-05-21T19:46:11.127
> 
> 标签：opengl, glut

是否可以使用 glut 创建一个固定大小的窗口，因此窗口尺寸的任何更改都将被忽略。

对我来说切换回 SDL 或类似的东西有点太晚了。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-03-13T09:34:38.613

显然，这是不可能的，但您可以`glutReshapeWindow`在您的`glutReshapeFunc`-callback 中使用，在释放鼠标后立即将其恢复。它非常有效，据我所知是最好的解决方案。仅使用 freeglut 测试：

```
glutReshapeFunc(resize);

void resize(int width, int height) {
    // we ignore the params and do:
    glutReshapeWindow( 800, 600);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-21T20:19:18.257

最终，没有。您可以做的最好的事情是`glutReshapeWindow`在检测到它已被调整大小时调用强制它为特定大小。但仅此而已。如果这样做，则需要通过确保仅`glutReshapeWindow`在新大小与所需大小不同时才调用来防止无限循环。这不会阻止用户*尝试*调整它的大小，但会阻止他们成功。可能。

请记住：GLUT 是为演示应用程序和简单的测试平台而设计的。对于这样的应用程序，调整窗口大小的能力是相当标准的。

# security - 是否可以使用 CouchDB 的过滤复制仅复制 ACLed 给用户的数据子集？

> ID：10691605
> 
> 赞同：5
> 
> 时间：2012-05-21T19:46:22.420
> 
> 标签：security, couchdb, offline, pouchdb

特别是，过滤复制可以用 PouchDB 完成吗？我想确保客户端不能省略过滤器，从而与整个数据库同步。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T10:02:27.237

没有 CouchDB 复制“协议”。复制过程只是一个客户端连接到两个 CouchDB 端点，从一个端点读取文档，然后将它们写入另一个端点。当然，CouchDB 内置了这样一个客户端（“复制器”）；但从概念上讲，它是一个第三方应用程序。

这意味着，您可以从应用程序的安全分析中删除复制。首先考虑普通的 Web 客户端读取和写入您的服务器。把它锁起来。您可能会假设一个假设的对手使用被黑的 Web 浏览器，或者使用自定义 HTTP 客户端（例如，它不遵守跨域策略）。

解决了这个问题后，复制必然会遵循您的安全策略。

换句话说，在 PouchDB 和 CouchDB 之间进行复制：

*   如果您要*推*送到远程服务器，您的安全工具就是远程`validate_doc_update`功能。
*   如果您从远程服务器*拉*取，您的安全工具是数据库 _security 对象——特别是`"members"`数组。客户端可以完全读取数据库，也可以根本不读取。当然，您可以对服务器端的特殊用途数据库进行过滤复制。

# function - Coffeescript 函数语法

> ID：10691606
> 
> 赞同：1
> 
> 时间：2012-05-21T19:46:26.073
> 
> 标签：function, coffeescript

我是 Coffeescript 的新手，并且在语法上苦苦挣扎。谁能帮助我如何用 CS 编写以下内容？

```
$("#getLocation").click(function() {
  $('#location-loading').show();
  navigator.geolocation.getCurrentPosition(applyLocation);
  return false;
});

function applyLocation(location) {
  $('#LogLongitude').val(location.coords.longitude);
  $('#LogLatitude').val(location.coords.latitude);
  alert('Latitude:' + location.coords.latitude + ', Longitude: ' + location.coords.longitude + ', Accuracy: ' + location.coords.accuracy);
  $('#location-loading').hide();
} 
```

我认为以下内容会起作用，但我在调用函数并返回 false 时遇到错误（所以我不关注链接）。

```
$('#getLocation').click ->
  $('#location-loading').show()
  navigator.geolocation.getCurrentPosition(applyLocation)
  false

applyLocation = (location) ->
  $('#LogLongitude').val(location.coords.longitude)
  $('#LogLatitude').val(location.coords.latitude)
  alert('Latitude:' + location.coords.latitude + ', Longitude: ' + location.coords.longitude + ', Accuracy: ' + location.coords.accuracy)
  $('#location-loading').hide() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T19:52:54.570

您可以省略`()`简单函数调用（未链接）的括号，并将下部的字符串放入双引号中以便能够使用`#{}`语法，但除了您的代码看起来已经很咖啡色了；）

```
$('#getLocation').click ->
  $('#location-loading').show()
  navigator.geolocation.getCurrentPosition applyLocation
  false

applyLocation = (location) ->
  coords = location.coords
  $('#LogLongitude').val coords.longitude
  $('#LogLatitude').val coords.latitude
  alert "Latitude: #{coords.latitude}, 
         Longitude: #{coords.longitude}, 
         Accuracy: #{coords.accuracy}"
  $('#location-loading').hide() 
```

# php - PHP 从 MySQL 获取下一个结果

> ID：10691611
> 
> 赞同：1
> 
> 时间：2012-05-21T19:46:46.710
> 
> 标签：php, mysql, controls, gallery

我有一个存储图像 url 和其他数据的数据库，我想要一个画廊来显示它们，但因为该网站是公开的，我可能想删除一些图像。当用户上传图像源和标题时，它会以自动递增的唯一 ID 插入到数据库中。当前脚本仅对 ID 加减 1 以显示下一张或上一张图像。有没有更好的方法来做到这一点？我当前的脚本：

```
function image_control($id){
$next=$id+'1';
$prev=$id-'1';
$query = "SELECT MAX(id), MIN(id) FROM mp_images";
$result = mysql_query($query) or die(mysql_error());
while($row = mysql_fetch_array($result)){
    $max = $row['MAX(id)']; $min = $row['MIN(id)'];
}
if($next==$max+"1"){$next=$min;} if($prev==$min-"1"){$prev=$max;}
echo "<a href='".$next."'>Next Image</a> <a href='".$prev."'>Previous Image</a>";
} 
```

此失败的一个示例是 ID 为 3、4、5、7、8 的图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T19:51:17.303

一些用于获取下一个 id 的伪代码：

```
$nextId = SELECT id FROM mp_images WHERE id > $currentId ORDER BY id ASC LIMIT 1
if ( no results )
  // no next image 
```

对于以前的：

```
$prevId = SELECT id FROM mp_images WHERE id < $currentId ORDER BY id DESC LIMIT 1
if ( no results )
  // no previous image 
```

如果没有下一张图片（例如，您可以获取第一张图片）或没有上一张图片（您在第一张图片上），您可以自行决定该怎么做。

# python - pywin32 和 pygui 报错版本未找到

> ID：10691614
> 
> 赞同：1
> 
> 时间：2012-05-21T19:46:52.577
> 
> 标签：python, python-2.7, pywin32, pygui

我为我的 64 位 python 2.7 安装了 pygui 和 pywin32（我也为这些安装了 64 位），当我尝试使用使用 pywin32 的 pygui 时，python 给了我这个错误。

我敢肯定，其他人可能有类似的问题。

```
Traceback (most recent call last):
  File "C:\Users\MY_USERNAME_HERE\Dropbox\Python Programs\BlobEdit\BlobEdit.py", line 16, in <module>
    from GUI import Application, ScrollableView, Document, Window, Cursor, rgb
  File "C:\Program Files\python2.7.2\lib\site-packages\GUI\__init__.py", line 94, in <module>
    import GUI.Application
  File "C:\Program Files\python2.7.2\lib\site-packages\GUI\Application.py", line 11, in <module>
    from GUI.GApplications import Application as GApplication
  File "C:\Program Files\python2.7.2\lib\site-packages\GUI\GApplications.py", line 14, in <module>
    from GUI.Printing import PageSetup, present_page_setup_dialog
  File "C:\Program Files\python2.7.2\lib\site-packages\GUI\Printing.py", line 11, in <module>
    from GUI import Canvas
  File "C:\Program Files\python2.7.2\lib\site-packages\GUI\Canvas.py", line 15, in <module>
    from GUI.StdFonts import application_font
  File "C:\Program Files\python2.7.2\lib\site-packages\GUI\StdFonts.py", line 9, in <module>
    from GUI import Font
  File "C:\Program Files\python2.7.2\lib\site-packages\GUI\Font.py", line 56, in <module>
    pywin32_info = api.GetFileVersionInfo(api.__file__, '\\')
error: (1813, 'GetFileVersionInfo:GetFileVersionInfoSize', 'The specified resource type cannot be found in the image file.') 
```

显然，PyWin32 找不到它的版本或其他东西。我想知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-13T13:30:11.960

我有这个问题，这导致我提出这个问题。

我正在使用 python 3.3 并且已经安装了 pywin32-218，所以我的解决方案是 Font.py 中的这个 hack：

```
#pywin32_info = api.GetFileVersionInfo(api.__file__, '\\')
pywin32_build = 218 # pywin32_info['FileVersionLS'] >> 16 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T15:53:09.583

我也遇到过这个问题，简单的解决方案：安装最低要求的 pywin32 版本 213。在某个文件的 pywin32 中某处进行版本检查。也许有一天我会进一步深入研究并发布更详细的帖子和/或提交错误

# html - 创建一个保留其布局的时尚可调整大小的网站

> ID：10691615
> 
> 赞同：0
> 
> 时间：2012-05-21T19:47:07.553
> 
> 标签：html, css

我正在尝试创建一个时尚的可调整大小的网站。在做了一些阅读之后，我发现实现这一点的方法是拥有一个具有严格定义大小的父节点，以及具有 % 大小的子节点。在 w3schools 网站上，它表示 2012 年 85% 的显示器的分辨率大于 1024。

我的问题是，为了实现一个可调整大小的网站并保留其布局，固定大小的父节点的最佳大小是多少，以便它在所有显示器上兼容和一致？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-21T19:50:28.533

为什么不忘记在父对象上设置固定大小并将父对象的宽度设置为 100%，这将为您提供所需的内容。

# php - Cleaner way to write jquery colorbox groups? or detect how many classes and echo accordingly

> ID：10691616
> 
> 赞同：2
> 
> 时间：2012-05-21T19:47:08.040
> 
> 标签：php, jquery, colorbox

I'm wondering is there a way to write this in a cleaner way OR at least somehow detect how many are on the page and echo the correct amount?

```
$(document).ready(function(){
        $("div.projectBlock").each(function(index){
            $(this).find('a').addClass("group" + (index+1));
        });
    $(".group1").colorbox({rel:'group1', slideshow:true});
    $(".group2").colorbox({rel:'group2', slideshow:true});
    $(".group3").colorbox({rel:'group3', slideshow:true});
    $(".group4").colorbox({rel:'group4', slideshow:true});
    $(".group5").colorbox({rel:'group5', slideshow:true});
    $(".group6").colorbox({rel:'group6', slideshow:true});
    $(".group7").colorbox({rel:'group7', slideshow:true});
    $(".group8").colorbox({rel:'group8', slideshow:true});
    $(".group9").colorbox({rel:'group9', slideshow:true});
    $(".group10").colorbox({rel:'group10', slideshow:true});
    $(".group11").colorbox({rel:'group11', slideshow:true});
    $(".group12").colorbox({rel:'group12', slideshow:true});
    $(".group13").colorbox({rel:'group13', slideshow:true});
    $(".group14").colorbox({rel:'group14', slideshow:true});
    $(".group15").colorbox({rel:'group15', slideshow:true});
    $(".group16").colorbox({rel:'group16', slideshow:true});
    $(".group17").colorbox({rel:'group17', slideshow:true});
    $(".group18").colorbox({rel:'group18', slideshow:true});
    $(".group19").colorbox({rel:'group19', slideshow:true});
    $(".group20").colorbox({rel:'group20', slideshow:true});
}); 
```

I have it set at the top so it adds the class of group1, group2, etc. onto the divs on the page but I'd like to display the correct amount of groups in the code below it accordingly for each separate page for use with colorbox instead of just adding 20\. Pages will possibly have more or less of them.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T19:51:32.690

```
$(function(){
  $("div.projectBlock").each(function(index){
    var className = "group" + (index+1);

    $(this).find("a")
    .addClass(className)
    .colorbox({rel:className, slideshow:true});
  });
}); 
```

# android - onClickListener（按钮）使用 Fragments 切换 ViewPager 的视图

> ID：10691628
> 
> 赞同：1
> 
> 时间：2012-05-21T19:48:12.220
> 
> 标签：android, android-viewpager, android-fragmentactivity

我正在开发一个应用程序，它由一个带有三个 Fragment 的 FragmentActivity 组成。我想用“下一步”按钮从第一个片段到第三个也是最后一个片段。为此，我使用了 viewPager 和 pagerAdpater（我禁用了 viewpager 上的分页/滑动）。我的“下一步”按钮已在它们自己的片段中实现。我为每个片段设置了一个 xml 布局，并为包含 viewpager 的 fragmentActivity 设置了一个布局。

我正在尝试使用 OnClickListener ，我可以在其中使用 setCurrentItem(index) 方法并从第一个视图转到最后一个视图。

问题是我不知道我可以把 OnClickListener 放在哪里，因为我的片段中没有 viewpager 引用。

如何在我的片段中获取 viewpager 引用？我是否必须将我的 OnClickListener 方法放在其他地方？

这是我的 3 个片段之一的代码：

```
public class InitializationStep1 extends Fragment{
private PagerAdapter mPagerAdapter;

CustomViewPager pager;

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    View v = (LinearLayout)inflater.inflate(R.layout.initialization_step1_layout, container, false);

    Button button = (Button) v.findViewById(R.id.goToStep2);
    button.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            CustomViewPager pager = (CustomViewPager) v.findViewById(R.id.viewpager);
            if(pager == null)
                System.out.println("It's null..."); // always getting a null value
            else
                pager.setCurrentItem(0);
        }
    });

    return v;
}
@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    setUserVisibleHint(true);
   }
} 
```

这是我的 FragmentActivity：

```
public class Initialization extends FragmentActivity{
private PagerAdapter mPagerAdapter;

CustomViewPager pager;
Button b1;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.setContentView(R.layout.viewpager_initialization_layout);

    //initialize the pager

    List<Fragment> fragments = new Vector<Fragment>();
    fragments.add(Fragment.instantiate(this, InitializationStep1.class.getName()));
    fragments.add(Fragment.instantiate(this, InitializationStep2.class.getName()));
    fragments.add(Fragment.instantiate(this, InitializationStep3.class.getName()));
    this.mPagerAdapter = new PagerAdapter(super.getSupportFragmentManager(), fragments);

    pager = (CustomViewPager)super.findViewById(R.id.viewpager);
    pager.setPagingEnabled(false);
    pager.setAdapter(this.mPagerAdapter);
    pager.setCurrentItem(0);
    }
} 
```

总而言之，我有：
- 实现了 3 个片段（1、2 和 3）
，我想得到：
- 每个片段都包含一个按钮，可以转到下一个片段（1 -> 2 -> 3）。
- 包含“完成”按钮的最后一个片段（因为没有下一个片段可以导航到）

我认为这是一个非常简单的操作，但我在 Android 开发方面相对较新，无法弄清楚这一点。我可能试图使用错误的组件来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T14:28:10.280

我刚遇到同样的问题，试试这个！在您的初始化 FragmentActivity 中：

```
public CustomViewPager getpager(){
        return pager;
    } 
```

在“初始化步骤 1”中：

```
CustomViewPager pager;
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    View v = (LinearLayout)inflater.inflate(R.layout.initialization_step1_layout, container, false);
    pager = ((Initialization)getActivity()).getpager();

    Button next = (Button) v.findViewById(R.id.button1);
    next.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            pager.setCurrentItem(2);
        }
    }); 
```

这样就可以拿到你在FragmentActivity中声明的viewpager对象，这样你就可以在每个fragment中使用它来在fragment之间随意切换了！

# expressionengine - Brilliantretail “请不要重定向到购物车”

> ID：10691630
> 
> 赞同：1
> 
> 时间：2012-05-21T19:48:21.797
> 
> 标签：expressionengine

我对brilliantretail EE2 插件有一些疑问。

1）点击“添加到购物车”后是否可以不将客户重定向到购物车？我在右侧有一个迷你购物车。我只是希望它更新数量。

2）我怎样才能有数量输入字段而不是选择字段？我希望客户输入他们想要的产品数量。我已经放了输入字段，但它只放了 1 个项目。

```
{if {type_id} != 6 AND {type_id} != 7}
            <label for="qty"> qty </label>

            <input name="qty" class="qty" type="text" value="1"> 
```

3) 如果没有满足购物车中 39 美元的要求，如何禁用结帐按钮？

**第 1 步。** 在 CSS 中为您的按钮创建 2 个类：active_checkout 和 inactive_checkout（如果您愿意，可以使它们不同颜色） **第 2 步** 使用此代码

```
{if ‘{exp:brilliant_retail:cart_items}’ == ‘0’ OR ‘{exp:brilliant_retail:cart_total}’ <= ‘$39’}
<button class=“inactive_checkout”&gt;Checkout</button>
{if:else}
<button class=“active_checkout”&gt;{exp:brilliant_retail:checkout_buttons}</button>
{/if} 
```

**第 3 步** 将 39 美元更改为您希望的最低金额！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-21T19:43:14.463

1) 有许多 BrilliantRetail 网站的用户使用 ajax 通过 ajax 将产品发布到购物车。以下是我能想到的一对：

制裁现在.com

www.boobzie.com

2）创建自己的输入使用：

您需要在名称前加上 {product_id} 变量。如果帖子不包含格式正确的数量值，则假定为“1”。

3）看起来这不是一个问题，而是一个答案。您使用 {exp:brilliant_retail:cart_total} 标签来评估购物车中商品的总价值是正确的。

我对我们在支持中“从不回答任何问题”的评论感到惊讶。我们尝试回复所有论坛帖子，并且我们没有未回复的票证。请将您的支持相关问题发布到我们的论坛，网址为[http://www.brilliantretail.com/forum](http://www.brilliantretail.com/forum)

最好的，大卫

# ruby - Nmap Ping 扫描

> ID：10691635
> 
> 赞同：1
> 
> 时间：2012-05-21T19:48:47.863
> 
> 标签：ruby, networking, nmap

我正在使用 Ruby`nmap -sP`在我的家庭网络上连续运行 ping 扫描，以检查是否有新主机连接。几个问题：

*   有一个更好的方法吗？
*   `-sP`寻找新主人的效率如何？
*   在循环上一遍又一遍地运行它会给我的家庭网络带来任何问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T19:55:40.200

> 有一个更好的方法吗？

如果主机可以保证接受 ping，这就足够了；但是，有时`nmap -sP`发出数据包的速度比 wifi 网络处理它们的速度要快。如果您看到这样的问题，只需使用 降低费率`nmap --scan-delay 0.1 -sP`。

> -sP 在寻找新主机方面的效果如何？

和 ping 一样好；但是，全新的 Windows 安装通常会默认阻止 ping。你可以跑步`nmap -sT -P0`只是为了确保你得到了一切......

最终的主机检测方案是轮询您的以太网交换机以获取新的 MAC 地址条目。

> 在循环上一遍又一遍地运行它会给我的家庭网络带来任何问题吗？

没有

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T01:30:50.153

更好的解决方案是使用您的交换机（“路由器”）检查网络上的新客户端。大多数家庭无线路由器都有一个列出当前 DHCP 租约的网页，您可以从 Ruby 脚本中轮询。也可能有一个页面列出了与网络相关的所有 MAC 地址（本质上是交换机的 ARP 表）。

# jsf-2 - PrimeFaces p:ajax 无法识别 Facelet 标记参数

> ID：10691636
> 
> 赞同：8
> 
> 时间：2012-05-21T19:49:05.293
> 
> 标签：jsf-2, primefaces, facelets, glassfish-3

我有一个简单的 Facelet 标签：

```
<ui:composition>
  <ui:insert />
</ui:composition> 
```

用于避免声明多个`c:set`标签。
假设我在 facelets taglib 库中注册了 name `view`，并像这样使用它：

```
<my:view bean="#{myController}">
  <p:inputText value="#{bean.value}>
    <p:ajax event="blur" process="@this" listener="#{bean.handleValueChanged}" />
  </p:inputText>
</my:view> 
```

该属性`value`由 完美解析`p:inputText`，但`p:ajax`抛出：

```
Target Unreachable, identifier 'bean' resolved to null
javax.el.PropertyNotFoundException: Target Unreachable, identifier 'bean' resolved to null
    at com.sun.el.parser.AstValue.getTarget(AstValue.java:153)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:237)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
    at org.jboss.weld.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:39)
    at org.jboss.weld.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50)
    at org.primefaces.component.behavior.ajax.AjaxBehaviorListenerImpl.processAjaxBehavior(AjaxBehaviorListenerImpl.java:47) 
```

这是一个错误还是预期的行为？

**更新**：我刚刚用 f:ajax 尝试了同样的方法，它成功了！

顺便说一句，环境如下：
Glassfish 3.1.2
PF 3.0, 3.2, 3.3

**更新2**：
[这个](https://community.jboss.org/thread/164032?tstart=0)问题`RichFaces`是完全一样的。似乎就像一个 PrimeFaces 错误（我今天将在 PF 错误跟踪器上发布一个问题）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T10:48:29.020

我的同事刚刚提供了一个补丁来解决这个问题。

目前的实现`AjaxBehaviorListenerImpl#processAjaxBehaviour`如下：

```
public void processAjaxBehavior(AjaxBehaviorEvent event) throws AbortProcessingException {
        FacesContext context = FacesContext.getCurrentInstance();
        final ELContext elContext = context.getELContext();

        try{
            listener.invoke(elContext, new Object[]{});
        } catch (MethodNotFoundException mnfe) {
            MethodExpression argListener = context.getApplication().getExpressionFactory().
                        createMethodExpression(elContext, listener.getExpressionString(), null, new Class[]{event.getClass()});

            argListener.invoke(elContext, new Object[]{event});
        }
    } 
```

他建议像这样调整它：

```
import javax.faces.view.facelets.FaceletContext; 
```

* * *

```
public void processAjaxBehavior(AjaxBehaviorEvent event) throws AbortProcessingException {
        FacesContext context = FacesContext.getCurrentInstance();
        final ELContext elContext = context.getELContext();

        try{
            listener.invoke(elContext, new Object[]{});
        } catch (MethodNotFoundException mnfe) {
            FaceletContext fc = (FaceletContext) context.getAttributes().get(FaceletContext.FACELET_CONTEXT_KEY);
            MethodExpression argListener = context.getApplication().getExpressionFactory().
                        createMethodExpression(fc, listener.getExpressionString(), null, new Class[]{ event.getClass() });

            argListener.invoke(elContext, new Object[]{ event });
        }
    } 
```

希望这将得到PF团队的批准。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-26T06:54:58.817

该调整不适用于我的用例，它比单个 ui:include 更复杂。

```
<c:forEach items="#{items}" var="item">
            <ui:include src="#{item.uri}">
                <ui:param name="itemBean" value="#{item.bean}"/>
            </ui:include>

</c:forEach> 
```

我认为侦听器的变量映射器必须在新的 MethodExpression 中重用

# linux - Linux shell 脚本 - 获取字符串中数字的总和，但也将字符串与总和数保持一致

> ID：10691637
> 
> 赞同：0
> 
> 时间：2012-05-21T19:49:09.680
> 
> 标签：linux, string, shell

我有一个 xml 文件，其中包含标签中的数字。前任）

```
<REC_CNT>25000</REC_CNT>
<REC_CNT>25000</REC_CNT>
<REC_CNT>25000</REC_CNT>
<REC_CNT>11767</REC_CNT> 
```

我需要得到这些数字的总和，同时最终输出必须仍然有标签。

```
<REC_CNT>86767</REC_CNT> 
```

我已经使用 awk 来删除标签并添加数字，但这不是我想要的。我正在做的是替换，如果我只得到数字，那么替换还将替换该文件中它等于的所有其他数字，而不仅仅是 REC_CNT...任何输入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T20:37:12.163

`awk -v FPAT='([A-Z_]+)|([0-9]+)' '{ sum += $2; fname = $1 } END { print "<" fname ">" sum "</" fname ">" }'`

这假定您的标签是大写字母或下划线。适当调整正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T21:09:05.687

您应该使用实际的 XML 处理器，而不是一些基于正则表达式的文本处理工具。

# caching - HtmlUnit 比 GUI 浏览器慢？

> ID：10691638
> 
> 赞同：5
> 
> 时间：2012-05-21T19:49:11.250
> 
> 标签：caching, htmlunit

为什么 HtmlUnit 比 GUI 浏览器慢很多？例如，HtmlUnit在 14 秒内（关闭 CSS 支持时）加载此页面[http://oltexpress.airkiosk.com/cgi-bin/airkiosk/I7/181002i?O2=2](http://oltexpress.airkiosk.com/cgi-bin/airkiosk/I7/181002i?O2=2)而 FF 在 5 秒内完成（在清除缓存后，具有 CSS 支持）。我知道，现代浏览器在处理糟糕的 JS 代码时并没有那么严格，而 HtmlUnit 是，但这里的时间差异仍然是无法容忍的。

任何想法如何加快使用 HtmlUnit 的工作？有人玩过 HtmlUnit 缓存吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T13:10:32.917

**要回答您关于为什么速度慢的问题：**

这纯粹是因为 HTMLUnit 有很多反对它的东西：

*   它以一种编译语言运行，没有像 FireFox 等浏览器的许多本机优化。
*   它需要格式良好的 XML，而不是 HTML（非严格），这意味着它必须将 HTML 转换为 XML。
*   然后它必须通过解析器运行 JavaScript，修复代码中的任何问题，然后在 Java 本身内部进行处理。
*   同样正如@Arya 指出的那样，它一次请求一个东西，所以很多 javascript 文件会导致速度变慢，许多图像会导致速度变慢。

**要回答有关如何加快速度的问题：**

作为一般规则，我禁用（除非需要它们）：

*   JavaScript
*   图片
*   CSS
*   小程序。

我还获得了源代码并删除了 ActiveX 支持并重新编译。如果您想阻止代码加载那些额外的页面，您可以使用下面的代码给出响应，而无需从网络下载。

```
WebClient browser;
browser.setWebConnection(new WebConnectionWrapper(browser) {
    @Override
    public WebResponse getResponse(final WebRequest request) throws IOException {
        if (/* Perform a test here */) {
            return super.getResponse(request); // Pass the responsibility up.
        } else {
            /* Give the program a response, but leave it empty. */
            return new StringWebResponse("", request.getUrl());
        }
    }
}); 
```

我注意到的其他事情：

*   HTMLUnit 不是线程安全的，这意味着您可能应该为每个线程创建一个新的。
*   HTMLUnit 确实缓存了页面

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T21:07:01.670

HTMLUnit 需要更长的时间的原因是每个请求都是一个一个完成的。这就是检索页面需要这么长时间的主要原因。JS 和 css 不应该有很大的不同 IMO

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-07T16:24:21.800

WebClient 对象维护静态资源的缓存。如果关闭 WebClient 对象并创建另一个对象，则必须重建缓存。

为避免这种情况，您可以跨多个会话重用 WebClient 对象，甚至可以维护 WebClient 对象池。还要看看你是否可以维护一个[Cache](http://htmlunit.sourceforge.net/apidocs/com/gargoylesoftware/htmlunit/Cache.html)对象。您可能希望在将 WebClient 的 cookie 返回到池之前清除它。

正如@Lee 指出的那样， [WebConnectionWrapper](http://htmlunit.sourceforge.net/apidocs/com/gargoylesoftware/htmlunit/util/WebConnectionWrapper.html)为您提供了拦截的机会。我使用它来避免重定向、禁用选定资源的 JS 执行或在我不关心该资源时返回模拟数据。

# php - 在 MySQL Workbench 中创建存储过程

> ID：10691640
> 
> 赞同：4
> 
> 时间：2012-05-21T19:49:13.983
> 
> 标签：php, mysql, stored-procedures

有谁知道我如何在 mysql 工作台中创建存储过程？我想了解和使用它们，但我如何存储我创建的那些，以便我可以调用它们？在工作台或我的 php 代码中会更好。

**更新**以为我可能会分享此链接，因为它可能对任何查看此链接的人都派上用场

[MySQL 和 PHP 中的存储过程如何文章](http://www.sitepoint.com/stored-procedures-mysql-php/?utm_medium=email&utm_campaign=SitePoint%20PHP%20Newsletter%20%2014%20January%202014&utm_content=SitePoint%20PHP%20Newsletter%20%2014%20January%202014%20CID_34a5290114a04b6d619cc4eb5efbae59&utm_source=CampaignMonitor%20SitePoint&utm_term=Stored%20Procedures%20in%20MySQL%20and%20PHP)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T22:06:05.737

在 Mysql 工作台中添加存储过程：

1) 单击数据库左侧的三角形：您应该看到表、视图和例程

2）右键单击例程->创建过程

你完成了 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-19T17:36:50.687

在 EER 图中：

*   单击`Place a New Routine Group`工具栏图标，然后
*   放置常规组。
*   双击生成的矩形进行编辑。
*   转到`Group: Routines`选项卡并
*   单击底部`Routine Group`选项卡以编辑组或
*   单击底部`Routines`选项卡以编辑实际例程。

或者，从模型图中，单击标题下的`Add Group`图标，`Routine Groups`然后单击标题`Add Routine`下的`Routines`。

[来源：dev.mysql.com](http://dev.mysql.com/doc/workbench/en/wb-routines-routine-groups.html "MySQL：创建例程和例程组")

# java - java中的美元货币格式？

> ID：10691643
> 
> 赞同：1
> 
> 时间：2012-05-21T19:49:24.857
> 
> 标签：java

以下是数字格式化程序的代码：

```
double value = 12345.678;
// locale preference should be retrieved from user preferences
Locale defaultLocale = new Locale("en", "US", "USD");
NumberFormat nf = NumberFormat.getCurrencyInstance(defaultLocale);
String formattedValue = nf.format(value);
System.out.println(formattedValue); 
```

输出值：12,345.68 美元但在这里，我希望我的输出值为：12,345.68 美元。我需要在价值结束时获得美元（货币代码）。

另外我正在调用 Web 服务以获取值，如何将值传递到必填字段并格式化？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-21T20:01:02.740

这段代码可以解决问题：

```
 double value = 12345.678;
    java.util.Currency usd = java.util.Currency.getInstance("USD");
    java.text.NumberFormat format = java.text.NumberFormat.getCurrencyInstance(java.util.Locale.US);
    format.setCurrency(usd);
    System.out.println(format.format(value) + " " + usd.getCurrencyCode()); 
```

输出 ：

```
$12,345.68 USD 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-21T19:53:30.420

为什么你不能自己附加那个值？

```
System.out.println(formattedValue + " USD"); 
```

# json - 在 VBA 中使用 ScriptControl 解析 JSON：将结果转换为字典和集合

> ID：10691644
> 
> 赞同：3
> 
> 时间：2012-05-21T19:49:27.193
> 
> 标签：json, vba

我想使用 Microsoft ScriptControl 解析 VBA 中的 JSON 字符串，然后将生成的 Object 转换为 Dictionary 和 Collection 对象。我已经知道如何使用 ScriptControl 进行解析，但无法弄清楚如何将结果映射到 Dictionary 和 Collection 类中。我猜如果我能弄清楚如何循环遍历对象的属性，这将变得清晰......

```
Dim sc As ScriptControl
Dim obj As Variant

Set sc = CreateObject("ScriptControl")
sc.Language = "JScript"

Set obj = sc.Eval("("+json+")") ' json is a string containing raw JSON

' Now what? 
```

顺便说一句，我使用[vba-json](http://code.google.com/p/vba-json/)库来获取字典和集合方面的输出，但我发现这个库有点慢。它不使用 ScriptControl。

**编辑：我在**[这篇](https://stackoverflow.com/questions/5773683/excel-vba-parsed-json-object-loop)文章中找到了关于获取对象属性的讨论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-02T15:27:20.643

使用解析 JSON 的 JavaScript 功能，在 ScriptControl 之上，我们可以在 VBA 中创建一个解析器，它将列出 JSON 中的每个数据点。无论数据结构多么嵌套或复杂，只要我们提供一个有效的 JSON，这个解析器就会返回一个完整的树形结构。

JavaScript 的 Eval、getKeys 和 getProperty 方法为验证和读取 JSON 提供了构建块。

再加上 VBA 中的递归函数，我们可以遍历 JSON 字符串中的所有键（最多 n 级）。然后使用 Tree 控件（在本文中使用）或字典，甚至在简单的工作表上，我们可以根据需要排列 JSON 数据。

VBA 代码：[http ://ashuvba.blogspot.in/2014/09/json-parser-in-vba-browsing-through-net.html](http://ashuvba.blogspot.in/2014/09/json-parser-in-vba-browsing-through-net.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-14T12:27:35.947

loop [这](https://stackoverflow.com/questions/5773683/excel-vba-parsed-json-object-loop/19359035#19359035)将帮助您循环 - 在 javascript 中添加一个 myitem(n) 方法，您可以从那里映射到 VB 代码。

# smartphone - 从智能手机显示屏读取条形码

> ID：10691645
> 
> 赞同：0
> 
> 时间：2012-05-21T19:49:29.177
> 
> 标签：smartphone

是否可以通过杂货店的激光条形码阅读器读取智能手机显示屏上显示的条形码？我知道不可能从包含条形码照片的画廊中读取它。我尝试过这个。那么，有什么解决办法吗，怎么办呢？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T21:10:44.763

**据我所知，基于激光的扫描仪**是不可能的，因为它们依赖于纸张的反射特性。LCD 屏幕通常会反射过多的光，同时也会发光，这使得传感器难以区分黑白条。

然而，基于 CMOS 和 CCD 图像的扫描仪应该能够很好地从手机读取数据。

# c++ - 从外部静态库访问函数

> ID：10691647
> 
> 赞同：1
> 
> 时间：2012-05-21T19:49:34.307
> 
> 标签：c++, static, external

我是 Qt 中 C++ 编程的新手。如果您能回答任何或部分问题，那将非常有用，谢谢。

我将外部库用作静态库，因为它仅在“.lib”文件中提供。我已经通过stackoverflow网站的帮助正确链接了它。我也有与库关联的头文件。我在 main.cpp 中包含了头文件。我可以通过查看头文件来获得函数签名。我的问题是如何访问外部库中的函数？

例如，这是我尝试在 main.cpp 中使用的一个函数：

==> QRETURN 快速查找(char *device, unsigned long length);

```
int main (int argc, char *argv[]{

// I have declared like this by copying the exact function signature with added extern
extern QRETURN Quickfind(char *device, unsigned long length);
cout << device << " and " << length << endl; 
```

但是，这将显示设备和长度未在此范围内声明的错误。因此，我通过在函数之前声明参数来进行修改：

```
int main (int argc, char *argv[]{
char *device = NULL;
unsigned long length = NULL;
extern QRETURN Quickfind(char *device, unsigned long length);
cout << device << " and " << length << endl; 
```

我希望这两个参数将被传递到函数中，但显然他们没有。另外，如果我在声明后直接使用该函数：

```
int main (int argc, char *argv[]{
char *device = NULL;
unsigned long length = NULL;
extern QRETURN Quickfind(char *device, unsigned long length);
Quickfind(*device, length);
cout << device << " and " << length << endl; 
```

这会给我对“Quickfind@8”错误消息的未定义引用。

有人可以告诉我或给我一些关于如何正确访问函数及其从外部静态库中的用法的提示或帮助吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T20:33:08.793

虽然您对您正在尝试做的事情有正确的总体想法，但您的操作方式存在一些问题。

首先，由于您尝试使用`extern`函数，因此对于头文件中的函数。据我所知，`extern`仅当您有在另一个 .cpp 文件中声明的函数、类、结构或全局变量时才应使用。

由于您的函数是在头文件中声明的，因此您不需要使用`extern`，只需像您已经拥有的那样包含文件即可。

其次，当您创建变量时`length`，您将其设置为`NULL`; 虽然从技术上讲，在大多数情况下，`NULL`它只是定义为 0，但您应该只`NULL`在声明空指针（如您的字符数组）时使用。

第三，基于 Quickfind 的函数签名...据我所知，Quickfind 接受参数设备和长度，并返回一个 QRETURN。我不知道 Quickfind 到底做了什么，但我猜它不会给你一个设备名称，也没有一个长度。

它可能会给你一个名字，但如果是这样，你必须首先创建一个数组，把名字放进去。

我不完全知道发生了什么，但请试试这个：

```
#include <your header file> or "your header file"

int main (int argc, char *argv[]{
    char *device = new char[100];
    unsigned long length = 100;        

    Quickfind(device, length);
    cout << device << " and " << length << endl;
} 
```

# jquery - div溢出时的分页

> ID：10691648
> 
> 赞同：0
> 
> 时间：2012-05-21T19:49:34.670
> 
> 标签：jquery, css, pagination, overflow

当内容使 div 溢出时，有没有办法使用 jQuery（最好使用插件）实现 Google 的“显示更多结果”之类的分页？

在我的情况下，我正在开发一个图像共享网站，并且我使用一个具有固定高度和溢出的 div：滚动（css）来显示所有上传的图像，而不是滚动，我希望能够使用分页。通常有分页，你有几个页面，但我只有页面上的所有图像。

**我只为所有图像使用一页。**

提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:52:56.373

它可能不是您想要的外观，但您可以尝试[jQuery Masonry](http://masonry.desandro.com/)。

它将图像尽可能紧密地堆叠在一起，并且具有[无限滚动功能](http://masonry.desandro.com/demos/infinite-scroll.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T20:00:26.623

我认为您不需要将所有图像放在一个地方（我的意思是在同一页面上，谷歌和 Facebook 都没有）

当您在页面底部滚动时，他们会执行 ajax 请求，获取更多图像 /（如果是 facebook 则为帖子）并将其附加到容器中。

所以，你需要一个高度为：auto 的容器。绑定到窗口滚动事件的函数，因此在底部它可以执行 ajax 请求并在网站中添加更多图像:)

*这对您有帮助还是您需要代码？*

# java - 随机生成敌人 Android

> ID：10691649
> 
> 赞同：0
> 
> 时间：2012-05-21T19:49:41.593
> 
> 标签：java, android, sprite

我正在用 android 制作一个游戏，其中敌人随机生成在屏幕顶部并向下移动。我可以创建 1 个这样做的敌人，但我想不出一个好的方法来创建许多都绘制在同一画布上的敌人。我已经尝试了很多事情，我真的可以使用一些帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T20:12:36.793

最简单的方法是创建一个类`Enemy`（随意命名）并使用`for`循环实例化任意数量的类。您可以使用 an`array`来存储每个实例。

一个例子可能如下：

```
Enemy[] arrayOfEnemies = new Enemy[sizeOfArray];
for(int i = 0; i < arrayOfEnemies.length; i++) {
    arrayOfEnemies[i] = new Enemy();    

} 
```

然后，您可以使用增强的 for（或 for each）循环在画布上的任意位置显示它们。

# ant - Ant：将可执行文件的输出连接到其他一些文件而不创建临时文件？

> ID：10691652
> 
> 赞同：5
> 
> 时间：2012-05-21T19:49:54.230
> 
> 标签：ant

请参见下面的示例。

```
<concat destfile="dest-file">
    <fileset dir="dir1" />
    <!-- how to append the output of the executable below without creating a temporary file for that output? -->
    <apply executable="command1">...</apply>
</concat> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T20:00:45.207

[`apply`](http://ant.apache.org/manual/Tasks/apply.html)和[`exec`](http://ant.apache.org/manual/Tasks/exec.html)任务支持[`redirector`s](http://ant.apache.org/manual/Types/redirector.html)，因此您可以执行以下操作：

```
<apply executable="command1" >
    <redirector append="true" output="file.log" />
</apply> 
```

# php - 多个提交按钮php不同的动作

> ID：10691653
> 
> 赞同：30
> 
> 时间：2012-05-21T19:50:02.667
> 
> 标签：php, submit, action

我有一个网站，我希望有 2 个单独的提交按钮，其中一个将输入数据并对其进行一些计算以显示在同一屏幕上。我已经成功地使用了：

```
<form id="form1" name="form1" method="post" onsubmit="" onreset="" action="programname.php">
<input type="submit" name="calc" value="Find Angle"> 
```

然后我使用：

```
if (!isset($_POST['submit'])){
Do actions, display calculations} 
```

现在我想要第二个提交按钮，它仍然会抓取他们输入的数据，但随后会转到不同的地址。有没有一种优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-05-21T19:52:57.940

您可以向新的提交按钮添加一个`onclick`方法，该方法将更改表单的操作，然后提交它。

```
<script type="text/javascript">
  function submitForm(action) {
    var form = document.getElementById('form1');
    form.action = action;
    form.submit();
  }
</script>

...

<form id="form1">
  <!-- ... -->
  <input type="button" onclick="submitForm('page1.php')" value="submit 1" />
  <input type="button" onclick="submitForm('page2.php')" value="submit 2" />
</form> 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-07-28T06:55:47.597

您可以通过在按钮属性中使用 formaction="page1.php" 来更改表单操作。

```
<form id="form1" name="form1" method="post" onsubmit="" onreset="" action="programname.php">
    <input type="submit" name="calc" value="Find Angle">

    <input type="button" type="submit" formaction="page1.php">Action 0</button>
    <input type="button" type="submit" formaction="page2.php">Action 1</button>
</form> 
```

注意：Internet Explorer 9 及更早版本不支持 button 标签的 formaction 属性。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-08-05T05:23:07.837

处理多个提交按钮的最佳方法是在动作脚本中使用**switch case**

```
<form action="demo_form.php" method="get">

    Choose your favorite subject:

    <button name="subject" type="submit" value="html">HTML</button>
    <button name="subject" type="submit" value="css">CSS</button>
    <button name="subject" type="submit" value="javascript">Java Script</button>
    <button name="subject" type="submit" value="jquery">jQuery</button>

</form> 
```

动作/服务器端脚本：

demo_form.php

```
<?php

switch($_REQUEST['subject']) {

    case 'html': //action for html here
                break;

    case 'css': //action for css here
                break;

    case 'javascript': //action for javascript here
                        break;

    case 'jquery': //action for jquery here
                    break;
}

?> 
```

参考：[W3Schools](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_button_name)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-03T07:04:27.607

另一种方法是您可以创建和使用一些会话变量来轻松实现它。

例如 $_SESSION['validate']。

按钮的 HTML 和 PHP 代码

```
<button type="submit" id="first_submit" style="<?php echo isset($_SESSION['validate'])?'display:none':'';?>">first submit</button>
<button type="submit" id="second_submit" style="<?php echo isset($_SESSION['validate'])?'':'display:none';?>">second submit</button> 
```

jquery 和 ajax 脚本

```
<script>
    $(document).ready(function(){

        $("#form").on('submit', function(e){
            e.preventDefault();
            $.ajax({
                type: 'POST',
                url: 'handler-file.php',
                data:  new FormData(this),
                dataType: "json",
                enctype: 'multipart/form-data',
                contentType: false,
                cache: false,
                processData:false,
                error:function(error){
                    //your required code or alert
                    alert(error.responseText);
                },
                success: function(response){
                    if(response.status=='1')
                    {
                        //your required code or alert
                        $('#first_submit').hide();
                        $('#second_submit').show();
                    }
                    else if(response.status=='2')
                    {
                        //your required code or alert
                        $('#first_submit').show();
                        $('#second_submit').hide();
                    }
                    else
                    {
                        //your required code or alert
                    }
                }
            });
        });

    });
    </script> 
```

处理程序 PHP 文件

```
<?php
session_start();

$result['status']='0';
$result['error']='';

if(!isset($_SESSION['validate']))
{
    if(!isset($_FILES['file'])) 
    {
        $result['error'].='[Er-02 file missing!]';
    }
    else
    {
        //your other code
        $_SESSION['validate'] = true;
        $result['status']='1';
    }
}
else if($_SESSION['validate']==true)
{
    if(!isset($_FILES['file'])) 
    {
        $result['error'].='[Er-03 Validation file missing!]';
    }
    else
    {
        //your other code
        unset($_SESSION['validate']);
        $result['status']='2';
    }
}
else
{
    $result['error'].='[Er-01 Invalid source!]';
}
echo json_encode($result); 
```

?>

它可能不是最佳或有效的解决方案。我的经验水平不是太多，所以我想出了这个解决方案，它在所有可用的解决方案之后最能满足我的目的，但有它们的局限性。这不是任何地方都想在这里写的。

注意：您可能会注意到它包括其他一些部分，例如演示文稿、脚本和后端文件之间的响应、成功和错误处理。

希望能帮助到你！

# ruby-on-rails - 为什么是_a？无法匹配类型，并导致拆分抛出异常？

> ID：10691655
> 
> 赞同：0
> 
> 时间：2012-05-21T19:50:07.163
> 
> 标签：ruby-on-rails, ruby, rspec, factory-bot

在运行 RSpec 和 FactoryGirl 时，它会自动将任何`:id`参数转换为 fixnum，而在现实生活中，它会作为字符串传递。代码我有`:id`作为复合主键尝试调用 split on 的进程`params[:id]`。这会导致异常，如下所示：

```
NoMethodError:
    undefined method 'split' for 234:Fixnum 
```

当试图调用这样的东西时：

```
 @myinstance = MyClass.find(params[:id].split("-").map{|x| x.to_i}) 
```

为了解决这个问题，我添加了一个简单的类型检查：

```
if params[:id].is_a? Fixnum
  @myinstance = MyClass.find(params[:id])
else
  @myinstance = MyClass.find(params[:id].split("-").map{|x| x.to_i})
end 
```

然而，这并不像我期望的那样工作。该`if`语句的计算结果为`false`，并且`split`仍在尝试，导致相同的错误。Ruby 怎么可能`params[:id]`在 " " 逻辑中识别为 Fixnum ，但在语句中`else`无法计算到？`true``if`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T19:54:41.170

这是纯粹的逻辑：`params[:id]`是 a `String`or `nil`。

哦......我必须编辑我的答案：

当你做控制器规格时，你发送的参数是发送的`as-is`，而不是字符串化的……这很痛苦，但迟早应该修复。

因此，在您的规格中，将您的参数字符串化以更接近现实。

这是非常重要的一点：不要让你的代码适应你的规范，相反。

# unix - 在 UNIX 中查找和更改文本值中的值

> ID：10691656
> 
> 赞同：2
> 
> 时间：2012-05-21T19:50:09.470
> 
> 标签：unix, text, parameters, replace

我有一个参数文件，它是一个文本文件 - bug.par，其中几个参数值列为变量名称及其值。举个例子：

```
par1 123 
par2 234 
par3 11 12 4 15 
par4 15
par5 18
par6 1
par7 0.05 
```

我只想创建具有不同 par5 的新文件（例如），例如 2 个 par5 等于 20、30 的附加文件。其他参数是恒定的。

```
# additional file1 with par value 20 
    par1 123 
    par2 234 
    par3 11 12 4 15 
    par4 15
    par5 20
    par6 1
    par7 0.05

# additional file1 with par value 30 
    par1 123 
    par2 234 
    par3 11 12 4 15 
    par4 15
    par5 30
    par6 1
    par7 0.05 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T20:09:36.717

要创建文件 1：

```
sed 's/^ *\(par5\).*$/\1 20/' bug.par > file1 
```

要创建文件 2：

```
sed 's/^ *\(par5\).*$/\1 30/' bug.par > file2 
```

**编辑：**根据评论，运行一个循环：

```
# declare and initialize an array with 3 elements
declare -a arr=(20 30 40)

# iterate over array
for i in ${arr[@]}
do
    sed 's/^ *\(par5\).*$/\1 '$i'/' bug.par > file$i
done 
```

# c# - 托管 C# 应用程序需要 64 位 SQLite DLL

> ID：10691657
> 
> 赞同：2
> 
> 时间：2012-05-21T19:50:09.877
> 
> 标签：c#, sqlite, managed, badimageformatexception

我正在尝试将 SQLite 嵌入到我的便携式 C# .NET 2.0 应用程序中，而不是将 DLL 文件包含在分发文件夹中。但是，要嵌入 SQLite，我不能使用 PHXSoftware 提供的混合模式库。相反，我使用的是他们的“仅限托管”版本。

这在 32 位计算机上运行良好，但是当它在 64 位计算机上运行时，它会引发格式异常。正如我从这里发现的那样：[http](http://sqlite.phxsoftware.com/forums/p/2564/9939.aspx) : //sqlite.phxsoftware.com/forums/p/2564/9939.aspx 在使用托管库之前，我需要先以所需的体系结构格式手动加载非托管 sqlite3.dll。

这就是我的不足之处。我找不到 64 位版本的 SQLite 与 32 位版本一起包含。任何人都可以帮忙吗？我敢说，有没有人有更好的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T21:01:12.960

我建议您自己构建源代码。这样做非常简单。特别是考虑到 Sqlite 提供了[合并源](http://www.sqlite.org/amalgamation.html)。

以下是我用于 64 位版本构建的编译器预处理器定义：

*   WIN64 NDBUG
*   _视窗
*   _USRDLL
*   NO_TCL
*   _CRT_SECURE_NO_DEPRECATE
*   线程安全=1
*   TEMP_STORE=1
*   SQLITE_MAX_EXPR_DEPTH=0

以下是我用于 32 位发布版本的编译器预处理器定义：

*   WIN32
*   NDBUG
*   _视窗
*   _USRDLL
*   NO_TCL
*   _CRT_SECURE_NO_DEPRECATE
*   线程安全=1
*   TEMP_STORE=1
*   SQLITE_MAX_EXPR_DEPTH=0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T19:57:51.147

[System.Data.SQLite](http://system.data.sqlite.org/index.html/doc/trunk/www/index.wiki) fork 具有适用于 .Net 2、3.5 和 4 的 x86/x64 二进制文件。下载地址在[此处](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)。

**更新：**

另一种可能的解决方案是将您的应用程序定位到 x86 平台并仅使用 x86 SQLite 库。如果您的应用程序不需要针对 x86 平台的 x64 功能，将大大降低部署的复杂性。

# jquery - 如何使用 jquery 在 iframe 中选择标签？

> ID：10691662
> 
> 赞同：4
> 
> 时间：2012-05-21T19:50:50.890
> 
> 标签：jquery

我试图弄清楚如何选择然后修改`iframe`我生成的 HTML。iframe 显示各种媒体（图像、pdf 等）。为了显示不同的项目，我最初使用以下内容创建它：

```
$('#mydiv').html("<iframe id='myiframe' src='path/file.jpg'></iframe>"); 
```

然后，根据需要，使用以下内容更新其内容：

```
$('#myiframe').attr("src","path/newfile.jpg"); 
```

这会产生这样的 HTML（通过 Chrome 的元素查看器可以看到）：

```
<div id='mydiv'>
  <iframe id='myiframe' src='path/file.jpg'>
    #document
      <html>
        <body style="margin:0">
          <img style="-webkit-user-select:none" src="path/file.jpg">
        </body>
      </html>
  </iframe>
</div> 
```

我想选择动态生成的`<img>`标签，以便调整它的宽度。但我无法弄清楚 jquery 选择器来做到这一点。想法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-21T20:01:19.607

使用 jQuerys[内容](http://api.jquery.com/contents/)方法。文档甚至有一个名为“更改 iframe 内链接的背景颜色”的示例。

> 获取匹配元素集中每个元素的子元素，包括文本和注释节点。

应用于您的代码：

```
var images = $('#myiframe').contents().find('img'); 
```

真正的问题是为什么首先需要 iframe？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T20:01:41.277

您需要先获取 iFrame 的内容：

```
$("#myiframe").contents().find('img'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T19:59:11.900

如果您只想动态更改容器中的图像，则不需要 iframe。

您只需要在自己的 html 上添加一个 img 标签，即可更新它的 src 属性。

```
$('#my-image')
    .attr('src', '/path/to/image')
    .attr('width', '100px')
    .attr('height', '100px'); 
```

除非您没有告诉我们为图像生成 iframe 的充分理由。当从其他域调用 URL 时，使用这样的 iframe 可能会很痛苦

# iphone - viewWilldisappear 和 viewDiddisappear 之间会发生什么？

> ID：10691663
> 
> 赞同：2
> 
> 时间：2012-05-21T19:50:51.360
> 
> 标签：iphone, objective-c, xcode

这是对以前未解决的帖子的跟进。我在表格视图中有一个导航控制器、一个表格视图控制器和一个搜索栏。所有这些都内置在故事板中。I then build another viewcontroller programmatically when a cell is selected. 我不希望导航栏出现在最后一个视图中，所以我在 viewWillDisappear 中调用

```
 [self.navigationController setNavigationBarHidden:YES animated:animated]; 
```

如果我在主 tableView 中选择一个单元格，这工作得很好。但是，如果在通过搜索栏搜索缩小数据后选择了单元格，则导航栏将出现在后续视图中，尽管在 viewWillDisappear 中调用了 setNavigationBarHidden。

我尝试在 viewDidDisappear 中重复这个调用，现在，导航栏从后续视图中消失了，尽管它只是短暂显示。

我想知道显然重置 NavigationBarHidden 属性的 viewWilldisappear 和 viewDiddisappear 调用之间会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:52:57.360

这就是我发现的： NavigationBarHidden 属性显然已重置，因为当搜索栏离开视图时，它将再次在视图上发送导航栏。我不确定我是否完全理解正在发生的事情，但是我 viewWillDisappear 中的这行代码解决了这个问题：

```
 self.searchDisplayController.active=NO; 
```

其次是：

```
 [self.navigationController setNavigationBarHidden:YES animated:animated]; 
```

当然，我很想听听真正了解这里发生的事情的人的来信。

# c++ - 奇怪的班级行为

> ID：10691664
> 
> 赞同：-4
> 
> 时间：2012-05-21T19:50:51.560
> 
> 标签：c++, class

```
 class Blades
   {
   public:
       Blades(int test):speed(test){}

       void Blades_draw()
       {
           al_draw_filled_circle(100, 100, 5, al_map_rgb(26, 116, 217));
       }
    private:
        int speed;
    }; 
```

我做了很多与此类似的类，我有一个 main.cpp，所有内容都在其中实现。所有其他类都可以正常工作，即使它如此简单，这也是有问题的。类没有完成，元素在那里是出于测试原因。但是当我尝试在 main.cpp 声明一个变量时，如下所示

```
Blades blade(50); 
```

由于某种原因，它的行为很奇怪，在我仍在输入它的状态下`Blades blade(`，什么都没有出现，而其他类有智能感知的东西。当我确实输入一个值并用括号括起来时，它不会抱怨。但是当我稍后尝试访问该类以访问某些元素`blade.Blades_draw();`时，当我到达点部分时，它没有给我建议，并且出现了一个红色弯曲的下划线，表示刀片未定义。我的头快要炸了，我需要在明天上学前完成这个项目。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T19:53:35.133

您的课程称为“刀片”，而不是“刀片”。

# c++ - 如何检查在我的程序运行的控制台上设置了什么字符编码？

> ID：10691673
> 
> 赞同：3
> 
> 时间：2012-05-21T19:51:50.780
> 
> 标签：c++, windows, winapi, character-encoding, console

我知道用户可以使用`chcp`命令检查 in 。在这里，我问如何使用控制台进程的句柄从另一个程序中做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T20:13:45.537

您可以使用 获取附加到当前进程的控制台代码页[`GetConsoleCP`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683162%28v=vs.85%29.aspx)。我看不到适用于任意控制台句柄的相应函数。

# mysql - 更新查询问题

> ID：10691679
> 
> 赞同：0
> 
> 时间：2012-05-21T19:52:26.047
> 
> 标签：mysql

这是我的更新查询。

```
 UPDATE sugarcrm.qb_salesorders_leads_c, sugarcrm.qb_salesorders
    SET sugarcrm.qb_salesorders_leads_c.qb_salesorders_leadsleads_ida = sugarcrm.qb_salesorders.memo, sugarcrm.qb_salesorders_leads_c.qb_salesorders_leadsqb_salesorders_idb = sugarcrm.qb_salesorders.id
    WHERE sugarcrm.qb_salesorders.id = sugarcrm.qb_salesorders_leads_c.qb_salesorders_leadsqb_salesorders_idb 
```

当我运行它时，它给了我受影响的行 0。

这是我使用 WHERE 语句中相同信息的 select 语句。

```
 SELECT * from qb_salesorders_leads_c, sugarcrm.qb_salesorders 
    WHERE sugarcrm.qb_salesorders_leads_c.qb_salesorders_leadsqb_salesorders_idb = sugarcrm.qb_salesorders.id 
```

这将返回 354 行，这是我期望在更新查询中更新的。我错过了什么。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:15:50.020

将隐式连接转换为显式连接：

```
UPDATE sugarcrm.qb_salesorders_leads_c leads 
    INNER JOIN sugarcrm.qb_salesorders orders
    ON orders.id = leads.qb_salesorders_leadsqb_salesorders_idb
SET leads.qb_salesorders_leadsleads_ida = orders.memo, 
    leads.qb_salesorders_leadsqb_salesorders_idb = orders.id 
```

如您所见，我还使用别名来使 SQL 紧凑易读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T20:15:43.540

要使用连接进行更新，您必须使用显式连接语法：

```
UPDATE sugarcrm.qb_salesorders_leads_c
INNER JOIN sugarcrm.qb_salesorders
    ON qb_salesorders_leadsqb_salesorders_idb.id 
        = sugarcrm.qb_salesorders_leads_c.qb_salesorders_leadsqb_salesorders_idb
SET sugarcrm.qb_salesorders_leads_c.qb_salesorders_leadsleads_ida 
        = qb_salesorders_leadsqb_salesorders_idb.memo
    , sugarcrm.qb_salesorders_leads_c.qb_salesorders_leadsqb_salesorders_idb 
        = sugarcrm.qb_salesorders.id 
```

# c - 从单词中获取单个字节

> ID：10691685
> 
> 赞同：-1
> 
> 时间：2012-05-21T19:52:53.473
> 
> 标签：c, numbers

> **可能重复：**
> [如何获取变量单个字节的值？](https://stackoverflow.com/questions/8680220/how-to-get-the-value-of-individual-bytes-of-a-variable)

如何在不使用按位运算（即使用算术运算？）的情况下从一个单词（例如 C 中的*无符号整数）中获取单个字节？*

我不知道为什么，但是这个*x*数的公式（C-Like）似乎不起作用：

```
floor(x / pow(R, i)) % R 
```

其中`R`是表示数字的基数，`i`用于指示`i`要获取的第-个字节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T19:56:46.873

如果你真的需要避免按位操作，你也可以作弊（如果你使用的是小端或大端机器，请注意！）：

```
char *int_16_storage;
uint16_t the_word = 0xabcd;
int_16_storage = &the_word;

uint8_t low_byte = int_16_storage[0];
uint8_t high_byte = int_16_storage[1]; 
```

# ios - 故事板：如何向原型 UITableViewCell 添加插座？

> ID：10691689
> 
> 赞同：5
> 
> 时间：2012-05-21T19:53:09.267
> 
> 标签：ios, uitableview, xamarin.ios, uikit, uistoryboard

我在作为我正在设计的故事板一部分的控制器之一中添加了原型单元。它有各种标签、按钮、花里胡哨。但是我怎么知道为该单元格的元素创建出口？如果我单击 Xcode 中的助手，它将显示我继承的 UITableViewController 的虚拟源，而不是`DetailsCell`继承`UITableViewCell`自 IB 的自定义类输入字段并在其中指定的“”。

我当然可以使用`ViewWithTag()`，但我宁愿使用强类型的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T19:18:58.923

对于您可以使用 IB 创建的任何对象，您可以将其分配给不同的类（您编写的类）。这对于细胞来说并没有什么不同。以同样的方式，您可以让 IB 实例化 MyFooView 而不是 UIView（MyFooView 是从 UIView 派生的），您可以对单元格执行相同的操作。

单击您的单元格，单击右侧架子上的第三个图标。您将看到一个名为“自定义类”的部分和一个名为类的文本字段。选择您刚刚创建的派生自 UITableViewCell 的新类（我们称之为 MyCell）。您可以将 IBOutlets 添加到 MyCell 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T19:03:38.553

您首先需要创建一个DetailedCell 类并将IBOutlets 添加到该类。

然后在 Storyboard/IB 中，将该类分配给原型单元，这些出口将可供填充。

# java - 程序启动后更改视图的初始大小（Eclipse RCP）

> ID：10691693
> 
> 赞同：1
> 
> 时间：2012-05-21T19:53:26.397
> 
> 标签：java, eclipse, rcp

当我启动我的程序时，初始化的透视图左侧有一个 ViewPart，右侧有一个 EditorPart。我想让初始化的 ViewPart 大一点。谷歌没有帮助我，Eclipse 在初始化窗口时忽略了这个命令：

```
IFolderLayout menu = layout.createFolder(
            "at.ticketline.kuenstler.left_folder", IPageLayout.LEFT, 0.25f,
            editorArea); 
```

此命令用于在每个透视图中设置大小，但在起始透视图中。谁能帮我？

提前致谢。

编辑：

```
public void createInitialLayout(IPageLayout layout) {
    String editorArea = layout.getEditorArea();
    layout.setEditorAreaVisible(true);
    layout.setFixed(true);

    IFolderLayout menu = layout.createFolder(
            "at.ticketline.kassa.left_folder", IPageLayout.LEFT, 0.25f,
            editorArea);
    menu.addView(UebersichtView.ID);

} 
```

所以我再次尝试改变开始的观点。

不同的开始视角：http: [//i.imgur.com/wOjBq.png](http://i.imgur.com/wOjBq.png) 如果不用于开始视角，则视图的正常大小：http: [//i.imgur.com/yuzm.png](http://i.imgur.com/yuzhm.png)

所以再次总结一下，我用于开始的视角总是比通常的视角更小。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T20:12:45.200

假设视图已添加到文件夹中，则可以通过将`0.25f`(=25%) 更改为`0.30f`或`0.40f`(30-40%) 来放大视图。阅读[在 Eclipse UI 中使用透视图以](http://www.eclipse.org/articles/using-perspectives/PerspectiveArticle.html)获取过时但仍然是最新的描述。

请注意，如果您有工作台状态，`ApplicationWorkbenchAdapter`那么您必须在新尺寸重要之前重置透视图......

# ruby-on-rails - 尝试通过 habtm 关系访问 rails 属性

> ID：10691699
> 
> 赞同：2
> 
> 时间：2012-05-21T19:53:46.787
> 
> 标签：ruby-on-rails, ruby-on-rails-3, attributes, has-and-belongs-to-many

我是一个 Rails 新手，我正在尝试为用户和角色设置一个简单的 habtm。我试图在我的种子文件中为用户分配一个角色，但我总是收到这个错误：

> 无法批量分配受保护的属性：角色

我创建了没有 id 的链接表，如下所示：

```
create_table :roles_users, :id => false do |t|
  t.references :role, :user
end 
```

我的用户和角色模型如下所示：

```
class User < ActiveRecord::Base
  has_and_belongs_to_many :roles
  devise :database_authenticatable, :rememberable, :trackable, :validatable

  attr_accessible :email, :password, :password_confirmation, :remember_me, :roles_attributes
  accepts_nested_attributes_for :roles, :reject_if => :all_blank, :allow_destroy => true
end

class Role < ActiveRecord::Base
  has_and_belongs_to_many :users

  attr_accessible :name
end 
```

当我尝试在我的种子文件中为用户分配一个角色时，如下所示：

```
#Create a role
role = Role.find_or_create_by_name 'admin'

#Create test user
user = User.find_or_create_by_email 'niels@work.be'
user.update_attributes! password: 'testme', password_confirmation: 'testme', roles: role 
```

rake 命令总是停止并抱怨它不能批量分配受保护的属性？

任何人都知道我做错了什么并引导我朝着正确的方向前进？首先十分感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T20:04:23.020

```
roles: [role]
attr_accessible :roles #if required

role_ids: [role.id]
attr_accessible :role_ids #if required 
```

# c - 在这种情况下，如何使用从函数返回的 const char 指针？（mongodb相关）

> ID：10691700
> 
> 赞同：0
> 
> 时间：2012-05-21T19:53:47.007
> 
> 标签：c, mongodb, pointers, gridfs, const-char

我在使用 mongodb c 驱动程序使用的 aa 函数时遇到了一些麻烦。有问题的函数如下所示：

```
gridfile_get_field (gridfile *gfile, const char *name) (returns const char *) 
```

我正在尝试以下列方式使用它：

```
const char * field = "file";
char * filename;
filename = (char *)gridfile_get_field(&gfile, field);
FILE * file;
file = fopen("test.txt", "a+");
fprintf(file, "file contains: %s\n", filename);
fclose(file); 
```

但是，执行后，我在 test.txt 中看到了这一点：

```
file contains: ^A
file contains: ^A
file contains: ^A 
```

我不确定我做错了什么。我指定的字段存在于我存储在 gridfs 中的所有文件中，所以我不认为是这种情况（指定不存在的内容只是“文件包含：”中的文件，之后没有字符）。我想我在指针方面做错了。如果有人有任何建议，那就太棒了。

编辑:: 真正的声明是

```
const char * gridfile_get_field (gridfile *gfile, const char *name); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T20:12:22.867

如果您觉得需要强制转换函数的返回值，那么您很可能做错了什么。

首先，您应该声明`filename`为is，`char const*`因为这是您期望函数返回的内容。

然后，您可能没有该函数的正确原型。您应该有一个随附的包含文件。作为最后的手段，将原型声明为

```
char const * gridfile_get_field (gridfile *gfile, const char *name); 
```

（您的编译器可能正在使用该函数返回`int`高位的 , 切割并将其重新解释为 a `char*`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:05:45.947

原来是 MongoDB C 驱动程序的一个问题——它没有返回正确的信息。我认为这个问题将在即将发布的版本中得到解决。

# php - 将所有可能的 Set 值存储在数组中？

> ID：10691702
> 
> 赞同：0
> 
> 时间：2012-05-21T19:54:01.133
> 
> 标签：php, mysql

你们能发现这个 php 代码有什么问题吗？我总是收到“错误：无法显示列”消息，但是当我在 MySQL 命令行客户端中尝试查询“显示来自‘Book’等食谱的列”时，它工作得很好。

[我从MySQL Reference Manual](http://dev.mysql.com/doc/refman/5.0/en/set.html)中 Sets 部分的评论中得到了这个代码片段。它应该获取 Set 的所有可能值并将它们存储在数组中。

```
<?php
    $query = "SHOW COLUMNS FROM recipes LIKE 'Book'";
    if (!($ret = mysql_query($query)))
        die("Error: Could not show columns");
    $line = mysql_fetch_assoc($ret);
    $set = $line['Type'];
    $set = substr($set,5,strlen($set)-7);
    $options = preg_split("/','/",$set);
?> 
```

也许还有另一种方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T19:59:43.833

看起来您还没有使用`mysql_select_db`.

尝试将您的`die`声明更改为：

```
die("Error: Could not show columns - ". mysql_error());` 
```

确保在将代码移至生产环境之前将其删除。

# linux - 磁盘吞吐量 - 新文件与使用 dd 的现有文件

> ID：10691703
> 
> 赞同：4
> 
> 时间：2012-05-21T19:54:01.417
> 
> 标签：linux, shell, disk, hard-drive, dd

我想使用以下命令测量我的磁盘吞吐量：

```
dd if=/dev/zero of=/mydir/junkfile bs=4k count=125000 
```

如果 junkfile 存在，我的磁盘吞吐量是 junkfile 不存在时的 6 倍。我已经重复了很多次，结果仍然成立。有人知道为什么吗？

谢谢，

阿米尔。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T20:05:14.583

> 为了最大限度地减少磁盘缓存，您需要复制的数量明显大于系统中的内存量。2X 服务器中的 RAM 量是一个有用的量。

来自[http://www.westnet.com/~gsmith/content/postgresql/pg-disktesting.htm](http://www.westnet.com/~gsmith/content/postgresql/pg-disktesting.htm)

# java - Java 使用来自另一个类的数组

> ID：10691708
> 
> 赞同：-2
> 
> 时间：2012-05-21T19:54:40.773
> 
> 标签：java, arrays, class

我是Java新手，所以请温柔...

考虑以下内容`ShoppingList Class`：

```
public class ShoppingList {
...
    public ItemPrices[] getSortedPrices(){
        //do sorting stuff here etc
        return ret.toArray(new ItemPrices[0]);
    }
} 
```

现在我有另一个类叫做`Hello`：

```
public class Hello {
...
    private Groceries createGroceries() {
    ...
         pricearray[] =  ShoppingList.ItemPrices[] //????
    ...
    }
} 
```

我想将我创建的数组 pricearray 分配为等于方法中返回的 ItemPrices 数组。

但是我没有得到我想要的，这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T20:10:20.960

除非该方法`getSortedPrices`是静态方法，否则需要从`ShoppingList`类的实例中调用它，因此应按如下方式创建实例

```
public class Hello {
...
    private Groceries createGroceries() {
    ...
        ShoppingList sList = new ShoppingList();
        PriceList [] pricearray =  sList.getSortedPrices() //you call a method by its name, not return type.
    ...
    }
} 
```

另外，我不明白如何

> （ItemPrices[] 是双精度的）。

它应该是一个双精度数组，还是一个类的实例数组`ItemPrices`？如果它应该是一个双打数组，你需要这样做：

```
public class ShoppingList {
...
    public double[] getSortedPrices(){
        //do sorting stuff here etc
        return new double[n] // n is the length of the array
    }
} 
```

和线

`PriceList [] pricearray = sList.getSortedPrices()`

应该

`double [] pricearray = sList.getSortedPrices()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T20:04:17.193

在不关注其他问题的情况下，您必须做类似的事情

```
ShoppingList sl = new ShoppingList();
ItemPrices[] pricearray =  sl.getSortedPrices(); 
```

但这需要您了解类型、构造函数、数组、如何调用方法以及许多其他事情！

# symfony - Stof 学说扩展捆绑用于树和可翻译的 xml 映射

> ID：10691710
> 
> 赞同：1
> 
> 时间：2012-05-21T19:54:41.997
> 
> 标签：symfony, doctrine

有谁知道如何为[http://gediminasm.org/article/tree-nestedset-behavior-extension-for-doctrine-2](http://gediminasm.org/article/tree-nestedset-behavior-extension-for-doctrine-2)配置 xml 映射？只有带有注释的示例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T20:47:22.890

就像使用注解一样简单。在定义映射的同一 xml 文件中的 symfony2 中，为扩展添加额外的映射信息，所有示例都位于文档中：在[github](https://github.com/l3pp4rd/DoctrineExtensions/tree/master/doc)或[我的博客上](http://www.gediminasm.org/)

# matlab - MATLAB 的“saveas”将我的图形保存为正方形。但我希望它们更矩形

> ID：10691713
> 
> 赞同：1
> 
> 时间：2012-05-21T19:54:48.343
> 
> 标签：matlab, matlab-figure, save-as

我正在使用 MATLAB 'saveas' 将我的一个数字保存为 .png 或 .jpg 或其他格式。

所以我只是这样做：

```
y = randn(1,00);
plot(y); grid on;
saveas(gcf,'y','png'); 
```

现在的问题是 png 或最终图片显示为一个完美的正方形 - 即使我在使用“saveas”命令之前手动拉伸图形。

我怎样才能得到它，以便节省更多矩形的东西？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:59:04.977

这是从[mathworks 讨论中提取的简短示例](http://www.mathworks.com/matlabcentral/newsreader/view_thread/53404)

```
figure('units','pix','pos',[100 100 200 400]) % create a 200x400 image
>> imagesc(rand(10,10)) % put some random data in it
>> print(gcf,'-dbitmap','test.bmp') % save to bmp 
```

像这样使用`print`可以将图像保存为所需的分辨率。

# java - 使用相对路径名从不同目录加载 JNI 库的可移植语句？

> ID：10691718
> 
> 赞同：10
> 
> 时间：2012-05-21T19:55:13.737
> 
> 标签：java, java-native-interface, loadlibrary

是否有独立于平台的 Java 语句从与 Java 源代码所在的目录不同的目录加载本机库？我想使用这样的东西：

```
public class HelloWorld {
    static {
        System.loadLibrary("../some_project/HelloWorld");
    }

    public static native void print();
} 
```

问题是 System.loadLibrary() 不支持路径名参数中的目录分隔符。此外，不幸的是 System.load() 需要一个绝对路径名，这不仅意味着我不能像上面那样指定相对目录（我想这样做），而且它还需要参数包括，例如前面的Linux 系统上 JNI 库名称上的“lib”和“.so”扩展名。

有处理这个的标准方法吗？如果可能的话，我想避免编写一堆依赖于平台的 Java 代码来构建正确的 JNI 库名称。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-21T22:24:28.273

我相信您正在寻找[System.mapLibraryName](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#mapLibraryName%28java.lang.String%29)，这是[ClassLoader.findLibrary](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html#findLibrary%28java.lang.String%29)实现通常使用的方法。例如：

```
File lib = new File("../some_project/" + System.mapLibraryName("HelloWorld"));
System.load(lib.getAbsolutePath()); 
```

这将`libHelloWorld.so`在 Linux 和`HelloWorld.dll`Windows 上使用。请注意，某些操作系统支持多个扩展，而 mapLibraryName 设计只能支持一个。我知道的是 MacOS（`.dylib`主要`.jnilib`是旧版）和 AIX（`.a`和`.so`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T20:01:39.183

好吧，正如您已经清楚解释的那样，您不能使用`loadLibrary`. 就这样离开了`load`。但这需要一条绝对路径。因此，使用您首选的文件路径实用程序函数将您的相对路径扩展为绝对路径，并将其传递给`load`. 这可能看起来不方便，但它比依赖库搜索路径的变幻莫测要强大得多。

# google-maps - GoogleMaps 3.7 地图在 IE 中显示为空白

> ID：10691723
> 
> 赞同：0
> 
> 时间：2012-05-21T19:55:29.717
> 
> 标签：google-maps, google-maps-api-3, map

[此页面](http://www.calvert.ch/tools/geocoder.htm)在过去几年运行良好，现在显示空白地图，显然是自 2012 年 5 月 15 日发布 3.9 以来。

在[版本 3.9](https://groups.google.com/group/google-maps-js-api-v3/topics)发布之后，请求 3.6 的应用程序被提供 3.7，这似乎是原因，但我看不出我做错了什么。

我通过重新阅读代码产生了斜视，但我看不出有什么问题。有善良的灵魂可以帮忙吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T21:47:40.697

您需要检查应用程序的设置。因为当您在 IE9 上运行 Web 应用程序时，会将文档模式从 IE9 修改为 Internet Explorer 7。这可能是由 IIS 或 apache 中的设置引起的，即使在您的应用程序标记中也取决于 Web 应用程序。复制错误

1.  如果 IE9 已打开，请关闭它

2.  打开浏览器，打开开发者工具f12

3.  把网址

4.  检查文档模式是否更改为 IE7

![这是一个屏幕截图](../Images/e86b1b65ce278a27351f2ed20fd371dc.png)

# json - Dropwizard/Jersey：身份验证和 JSON 参数

> ID：10691724
> 
> 赞同：6
> 
> 时间：2012-05-21T19:55:31.073
> 
> 标签：json, authentication, parameters, jersey, dropwizard

我想为资源的 REST 接口提供这样的方法

```
@POST
@Consumes(MediaType.APPLICATION_JSON)
public void add(@Auth User user, @Valid Food food) {
    //consume
} 
```

> 但是，这是不可能的，因为我收到如下错误：“严重：在索引 0 的参数处缺少方法 public void com.restaurant.FoodResource.add(com.restaurant.User, com.restaurant.Food) 的依赖项严重：缺失方法 public void com.restaurant.FoodResource.add(com.restaurant.User, com.restaurant.Food) 在索引 1 处的参数的依赖严重：方法，公共 void com.restaurant.FoodResource.add(com.restaurant.User, com.restaurant.Food)，用资源的 POST 注释，类 com.restaurant.FoodResource，不被识别为有效的资源方法。

[我发现根据规范（3.3.2.1 实体参数） http://jsr311.java.net/nonav/releases/1.1/spec/spec3.html](http://jsr311.java.net/nonav/releases/1.1/spec/spec3.html)，不可能有两个参数没有用某些注释进行注释

有什么选择仍然可以做这样的事情？我想到的是一个封装用户和食物的对象，但这对我来说似乎不是一个好的解决方案。

有没有其他更优雅的方式来做这样的事情？我可以将 JSON Food 表示作为@PathParam 发送吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:43:05.187

我遇到了同样的问题。事实上，这是由于我的测试配置中缺少提供者。

在 setUpResources() 方法中的资源单元测试中，使用方法 addProvider() 设置您的身份验证提供程序。

例如：

```
addProvider(new BasicAuthProvider(<Authenticator>, <CacheBuilderSpec>)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T20:39:41.673

Section 3.3.2.1 notwithstanding, I haven't seen errors like you describe with methods such as the following:

```
public Response post(
    @Auth User user, @Valid Food food, @Context UriInfo uriInfo);

public Response post(
    @Auth User user, @Valid Food food, @QueryParam String s);

public Response post(
    @Auth User user, @Valid Food food, BooleanParam b); 
```

So a workaround might be to add an unused `@QueryParam` or `@Context` parameter.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-28T19:45:47.513

尝试交换您的方法参数，从

```
public void add(@Auth User user, @Valid Food food) 
```

至

```
public void add(@Valid Food food, @Auth User user) 
```

# objective-c - 页面控制按钮

> ID：10691727
> 
> 赞同：0
> 
> 时间：2012-05-21T19:55:42.340
> 
> 标签：objective-c, ios, cocoa-touch, uiscrollview, uipagecontrol

我正在做一个项目，我需要用 3 个图像制作一个 PageControl。它正在工作，但页面控件的图像，三个小圆圈只出现在第一张图像上。我做错了什么？

```
[scrollView setScrollEnabled:YES];

CGRect frame;
frame.size = self.scrollView.frame.size;

//INICIO SCROLLVIEW DE FOTOS

//Fotos ---------
NSArray *imagens = [NSArray arrayWithObjects:@"foto1.png",@"foto1.png",@"foto1.png", nil];
//Fotos ---------

for (int i = 0; i < imagens.count; i++) {
    CGRect frame;

    frame.origin.x = self.listaFotos.frame.size.width * i;
    frame.origin.y = 0;
    frame.size = self.listaFotos.frame.size;

    //Imagem
    frame.origin.y = 0;
    frame.size = CGSizeMake(491, 330);

    UIImage *image = [UIImage imageNamed:[imagens objectAtIndex:i]];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
    imageView.frame = frame;

    [self.listaFotos addSubview:imageView];

    frame.origin.x = self.listaFotos.frame.size.width * i;

}

self.listaFotos.contentSize = CGSizeMake(self.listaFotos.frame.size.width * imagens.count, self.listaFotos.frame.size.height);

self.pageControl.currentPage = 0;
self.pageControl.numberOfPages = imagens.count; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:58:19.260

您可能正在将页面控件添加到滚动视图。您应该将它添加到滚动视图的超级视图，即作为它的兄弟，并在滚动视图的顶部。这样它就不会随着滚动视图滚动。

# android - 如何为切换 RadioButton 创建特定于状态的可绘制 xml

> ID：10691730
> 
> 赞同：1
> 
> 时间：2012-05-21T19:55:50.623
> 
> 标签：android, android-layout, android-widget

创建按钮可绘制对象时，我通常遵循以下格式来实现背景的“onClick”更改：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android"> 
    <item android:state_focused="true" android:state_pressed="true" 
        android:drawable="@drawable/RESOURCE_FOR_CLICKED" /> 
    <item android:state_focused="false" android:state_pressed="true" 
        android:drawable="@drawable/RESOURCE_FOR_CLICKED" /> 
    <item android:drawable="@drawable/RESOURCE_NORMAL" /> 
</selector> 
```

当我创建传统按钮时，这对我来说很好，因为我希望它们在`onClick`完成后返回到它们的原始状态，并且我不必实现任何代码。

但是，这对 s 不起作用，`RadioButton`因为我实际上希望他们的背景可绘制在他们选择后在非按下状态下是不同的。

是否有涉及单选按钮的状态的 XML 属性，我应该知道实现这种事情？如果不是，我是否必须管理代码中背景的变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T19:58:52.450

`android:state_checked`将允许您在选择单选项目时指定可绘制对象。

# google-chrome - 如何在谷歌浏览器中实现语言翻译

> ID：10691734
> 
> 赞同：2
> 
> 时间：2012-05-21T19:56:15.130
> 
> 标签：google-chrome

编辑：谷歌浏览器的“翻译”功能如何知道页面的原始语言？

原始问题：请帮助我想知道当翻译菜单出现在窗口顶部时，谷歌浏览器中的翻译是如何工作的，如何知道浏览器是什么语言的页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T20:03:09.997

我猜谷歌翻译会将页面文本中的单词与其词典中的单词进行比较。例如，如果页面包含许多德语单词，则将其视为德语页面。此外，还有[几种方法](http://webdesign.about.com/od/localization/a/aa043007.htm)可以在页面的 HTML 代码中指定页面语言。如果页面上提供了这些设置，Google 翻译将使用这些设置。

# jquery - jquerymobile后退按钮未显示在标题上

> ID：10691736
> 
> 赞同：7
> 
> 时间：2012-05-21T19:56:29.873
> 
> 标签：jquery, jquery-mobile

我正在尝试制作一个`mobile site in MVC`，我是 jquerymobile 的新手，我从 JQM 教程中复制了以下代码并将其粘贴`View`到 MVC 中

```
<div data-role="page" id="home">

  <div data-role="header">
    <h1>Home</h1>
  </div>

  <div data-role="content"> 
    <p><a href="#about" data-role="button">About this app</a></p>    
  </div>

</div>

<div data-role="page" id="about">

  <div data-role="header">
    <h1>About This App</h1>
  </div>

  <div data-role="content"> 
    <p>This app rocks! <a href="#home" data-role="button">Go home</a></p>    
  </div>

</div> 
```

我的问题是，它显示了`back button on header in the demo`我从哪里复制代码，但是当我在其中运行它时，`the back button is not there`任何人都可以告诉我，为什么会这样？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-21T20:04:29.090

尝试将以下属性放在您的“页面”div 上：

```
data-add-back-btn="true" 
```

例如

```
<div data-role="page" id="home" data-add-back-btn="true"> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-21T20:12:56.777

**编辑：**
好的 JQM 确实具有该功能，但默认情况下它被禁用，但是您可以通过设置`addBackBtn`为 true 或将`data-add-back-btn="true"`属性添加到页面 div 来启用它。

[http://jquerymobile.com/demos/1.1.0/docs/toolbars/docs-headers.html](http://jquerymobile.com/demos/1.1.0/docs/toolbars/docs-headers.html) - 添加后退按钮。

一般来说，如果您想要一个后退按钮，您只需使用该`data-rel="back"`属性，如果您希望它显示在标题中，那么您需要将它添加到那里。

```
<div data-role="page">
<div data-role="header"> 
 <a href="#" data-rel="back">back</a> <h1> Title of page </h1>
</div>
<div data-role="content">
   </div>
<div data-role="footer"><h1>Footer </h1></div>
</div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-19T11:35:45.080

这适用于 1.4.4 及更高版本

```
<div data-role="header" >
        <h1>PAGE_NAME</h1>
        <a href="#" data-rel="back" class="ui-btn-left ui-btn ui-icon-back ui-btn-icon-notext ui-shadow ui-corner-all"  data-role="button" role="button">Back</a>
</div> 
```

# android - 有没有办法在 Android 上使用 junit.extensions.TestSetup 进行测试？

> ID：10691737
> 
> 赞同：6
> 
> 时间：2012-05-21T19:56:32.497
> 
> 标签：android, junit

android sdk 源代码包括 junit.extensions 的源代码，但这些类不在 android.jar 中，即使 junit.framework 和 junit.runner 在那里。我尝试创建自己的 junit.extensions 包并使用 android sdk 源中包含的源，但我得到了 ClassCastException（见下文）。android.test.suitebuilder 中的某些东西正在尝试将 suite() 方法的返回值转换为 TestCase，即使套件返回一个测试接口。

我想使用 junit.extensions 中的 TestSetup 类，如下例所示（参见[http://etutorials.org/Programming/Java+extreme+programming/Chapter+4.+JUnit/4.7+One-Time+Set+Up +and+Tear+Down/](http://etutorials.org/Programming/Java+extreme+programming/Chapter+4.+JUnit/4.7+One-Time+Set+Up+and+Tear+Down/) ):

```
public SomeTestCase extends TestCase {

  public static Test suite() {
    TestSetup setup = new TestSetup(new TestSuite(SomeTestCase.class)) {
      @Override
      protected void setUp(  ) throws Exception {
          // do your one-time setup here!
      }

      @Override
      protected void tearDown(  ) throws Exception {
          // do your one-time tear down here!
      }
    };
    return setup;
  }

  public void someTestMethod() { }

} 
```

但是，我收到以下错误：

```
05-21 08:10:14.152: I/TestRunner(1316): java.lang.RuntimeException: Exception during suite construction
05-21 08:10:14.152: I/TestRunner(1316):     at android.test.suitebuilder.TestSuiteBuilder$FailedToCreateTests.testSuiteConstructionFailed(TestSuiteBuilder.java:238)
05-21 08:10:14.152: I/TestRunner(1316):     at java.lang.reflect.Method.invokeNative(Native Method)
05-21 08:10:14.152: I/TestRunner(1316):     at java.lang.reflect.Method.invoke(Method.java:511)
05-21 08:10:14.152: I/TestRunner(1316):     at junit.framework.TestCase.runTest(TestCase.java:154)
05-21 08:10:14.152: I/TestRunner(1316):     at junit.framework.TestCase.runBare(TestCase.java:127)
05-21 08:10:14.152: I/TestRunner(1316):     at junit.framework.TestResult$1.protect(TestResult.java:106)
05-21 08:10:14.152: I/TestRunner(1316):     at junit.framework.TestResult.runProtected(TestResult.java:124)
05-21 08:10:14.152: I/TestRunner(1316):     at junit.framework.TestResult.run(TestResult.java:109)
05-21 08:10:14.152: I/TestRunner(1316):     at junit.framework.TestCase.run(TestCase.java:118)
05-21 08:10:14.152: I/TestRunner(1316):     at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)
05-21 08:10:14.152: I/TestRunner(1316):     at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)
05-21 08:10:14.152: I/TestRunner(1316):     at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:545)
05-21 08:10:14.152: I/TestRunner(1316):     at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1551)
05-21 08:10:14.152: I/TestRunner(1316): Caused by: java.lang.ClassCastException: com.somebody.test.SomeTestCase$1 cannot be cast to junit.framework.TestCase
05-21 08:10:14.152: I/TestRunner(1316):     at android.test.suitebuilder.TestSuiteBuilder.build(TestSuiteBuilder.java:188)
05-21 08:10:14.152: I/TestRunner(1316):     at android.test.InstrumentationTestRunner.onCreate(InstrumentationTestRunner.java:379)
05-21 08:10:14.152: I/TestRunner(1316):     at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3920)
05-21 08:10:14.152: I/TestRunner(1316):     at android.app.ActivityThread.access$1300(ActivityThread.java:123)
05-21 08:10:14.152: I/TestRunner(1316):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1185)
05-21 08:10:14.152: I/TestRunner(1316):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-21 08:10:14.152: I/TestRunner(1316):     at android.os.Looper.loop(Looper.java:137)
05-21 08:10:14.152: I/TestRunner(1316):     at android.app.ActivityThread.main(ActivityThread.java:4424)
05-21 08:10:14.152: I/TestRunner(1316):     at java.lang.reflect.Method.invokeNative(Native Method)
05-21 08:10:14.152: I/TestRunner(1316):     at java.lang.reflect.Method.invoke(Method.java:511)
05-21 08:10:14.152: I/TestRunner(1316):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-21 08:10:14.152: I/TestRunner(1316):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-21 08:10:14.152: I/TestRunner(1316):     at dalvik.system.NativeStart.main(Native Method) 
```

TestCase 的suite() 方法应该返回一个Test，但似乎android os 中的某些东西正试图将其转换为TestCase。

作为解决问题的一种尝试，我调整了 TestDecorator 类，使其子类化 TestCase 而不是 Test，但它仍然给出了相同的 ClassCastException，这真的让我感到困惑。

顺便说一句，对于包含 junit 的 android.jar 似乎有些疑问，所以这里是 android.jar 内容的部分列表：

```
$ jar tf android.jar | more
META-INF/
META-INF/MANIFEST.MF
assets/
assets/images/
assets/images/android-logo-mask.png
assets/images/android-logo-shine.png
assets/sounds/
assets/sounds/bootanim1.raw
assets/sounds/bootanim0.raw
assets/webkit/
assets/webkit/android-weberror.png
assets/webkit/togglePlugin.png
assets/webkit/nullPlugin.png
assets/webkit/youtube.html
assets/webkit/missingImage.png
assets/webkit/youtube.png
assets/webkit/textAreaResizeCorner.png
assets/webkit/play.png
junit/
junit/framework/
junit/framework/TestSuite.class
junit/framework/ComparisonFailure.class
junit/framework/Assert.class
junit/framework/TestListener.class
junit/framework/TestResult.class
junit/framework/Test.class
junit/framework/TestFailure.class
junit/framework/Protectable.class
junit/framework/TestCase.class
junit/framework/AssertionFailedError.class
junit/runner/
junit/runner/TestSuiteLoader.class
junit/runner/Version.class
junit/runner/BaseTestRunner.class 
```

您还可以在 android 参考网站[https://developer.android.com/reference/packages.html](https://developer.android.com/reference/packages.html)的包内容中看到它。如果您仍有疑问，请浏览您的 android.jar 副本。

有什么有用的建议吗？有没有人成功地将 junit.extensions.TestSetup 与 android 一起使用？

# c# - 改进 URL 的正则表达式

> ID：10691742
> 
> 赞同：0
> 
> 时间：2012-05-21T19:56:51.327
> 
> 标签：c#, regex

我有这个 URL 的正则表达式

```
"^(((https?|ftp|file|)://)|(www))[-A-Za-z0-9+&@#/%?=~_|!:,.;]*[-A-Za-z0-9+&@#/%=~_|]$" 
```

几乎我所有的测试场景都有效，除了一个

```
"www.foo" <---WRONG this url it's not valid for my system
"www.foo.com" <--- valid
"www.blah.net" <--- valid
"http://blah.com" <--- valid
"https://blah.com" <--- valid 
```

有没有人可以帮助我改善我的正则表达式

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T20:00:14.483

我不会推荐这个。

`www.foo`例如可以是有效的本地主机名。

不管怎样。让我们`System.Uri`努力工作并通过其众多属性访问各个部分

[http://msdn.microsoft.com/en-us/library/system.uri.aspx](http://msdn.microsoft.com/en-us/library/system.uri.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T13:20:31.970

每个有效 URL 的正则表达式

```
<?php 

function validateURL($val) {
  $pattern_1 = "/^(http|https|ftp):\/\/(([A-Z0-9][A-Z0-9_-]*)(\.[A-Z0-9][A-Z0-9_-]*)+.(com|org|net|dk|at|us|tv|info|uk|co.uk|biz|se)$)(:(\d+))?\/?/i";
  $pattern_2 = "/^(www)((\.[A-Z0-9][A-Z0-9_-]*)+.(in|com|org|net|dk|at|us|tv|info|uk|co.uk|biz|se)$)(:(\d+))?\/?/i";       
  $pattern_3 = "/^(([A-Z0-9][a-zA-Z0-9_-]*)+.(co|in|com|org|net|dk|at|us|tv|info|uk|co.uk|biz|se)$)(:(\d+))?\/?/i";
  $pattern_4 = "/^(([A-Z0-9][a-zA-Z0-9_-]*)+.(co|in|com|org|net|dk|at|us|tv|info|uk|co.uk|biz|se*)+.(co|in|com|org|net|dk|at|us|tv|info|uk|co.uk|biz|se)$)(:(\d+))?\/?/i";
  if(preg_match($pattern_1, $val) || preg_match($pattern_2, $val) || preg_match($pattern_3, $val) || preg_match($pattern_4, $val)){
    return true;
  } else{
    return false;
  }
}

$url = "google.com.in";
echo validateURL($url); 
?> 
```

# xml - 在 Lotus Connections 中部署示例小部件时出错

> ID：10691743
> 
> 赞同：0
> 
> 时间：2012-05-21T19:56:54.890
> 
> 标签：xml, widget, lotus, ibm-connections

我正在学习在 lotus 连接中使用小部件，并获得了一个教程，教如何制作一个简单的小部件，但是当我发布时，在小部件中出现了这个错误：

BMWIW0001E: 无法加载 iWidget 'https://myserver/homepage/web/getWidgetDescriptor.action?widgetId=91a5468a-06b1-4760-b8b5-c7def77d4d88'.arg1 为空。

这是xml代码：

```
<iw:iwidget name="helloWorld" xmlns:iw="http://www.ibm.com/xmlns/prod/iWidget">
<iw:content mode="view">
<![CDATA[
     <div>
          <div id="helloWorld">Hello World!</div>
     </div>
]]>
</iw:content>
</iw:iwidget> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T23:05:50.690

错误“arg1 is null”表明小部件容器无法成功检索小部件定义。你能告诉我们你用来在主页注册你的小部件的属性列表吗？

# mysql - MySQL嵌套集检索路径与连接

> ID：10691744
> 
> 赞同：1
> 
> 时间：2012-05-21T19:56:58.127
> 
> 标签：mysql, nested-sets

晚上

我有两张桌子：网址和地点。为了简化，数据是这样的：

网址：

```
urlID    url
1        /england
2        /scotland
3        /wales 
```

地点：

```
placeId    name        lft    rgt       urlRef
1          England     1      23000     1
2          Scotland    23001  37000     2
3          Wales       37001  50000     3 
```

然后，places 表在国家/地区内嵌套了更多的地方。我希望能够加入这两个表来选择我的位置的路径，例如：

```
England     /england
Shropshire  /england/shropshire
Shrewsbury  /england/shropshire/shrewsbury 
```

我首先尝试了这个，它不起作用，其他各种方法也没有。

```
SELECT node.name, url 
FROM places AS node, places AS parent LEFT JOIN urls ON urlId = node.urlRef
WHERE node.lft BETWEEN parent.lft AND parent.rgt AND urlId = 1
ORDER BY node.lft 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T14:16:21.607

您需要加入父节点：

```
SELECT parent.placeId, parent.name, parent.type, parent.ico, url
FROM places AS node, urls LEFT JOIN places AS parent ON parent.urlRef = urls.urlId
WHERE node.lft BETWEEN parent.lft AND parent.rgt AND node.urlRef = :urlId
ORDER BY parent.lft 
```

# map - 映射任务输入数据

> ID：10691749
> 
> 赞同：0
> 
> 时间：2012-05-21T19:57:24.193
> 
> 标签：map, hdfs

我是地图/减少的新手。一个地图任务的输入是否可能在不同的服务上？假设我想使用 map/reduce 模拟“字数”，并且我逐行拆分数据（每行一个）。是不是每个 map 任务都会引用一个数据，并计算该数据中每个单词的出现次数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T11:16:15.973

输入文件将根据 hdfs 块大小进行拆分，并且每次拆分都会产生一个映射任务。

例如，默认情况下，hdfs 块大小为 64mb。假设您的输入文件大小为 50mb。当您将此文件加载到 hdfs 中时，它将被分成 2 份，每份 25mb。因此，将产生 2 个地图任务来处理每个输入拆分。假设一个输入拆分有 100 行，那么映射器类（任务）将调用 map 方法 100 次，每一行调用一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T11:35:50.557

使用 InputSplit 类拆分数据。您可以定义自己的输入拆分类。输入拆分的数量等于映射器的数量。因此，理论上，如果您有与输入行一样多的映射器，然后以这种方式编写输入拆分，则每行都可以作为映射任务的输入。通常地图任务的输入位于同一台机器上。Map reduce 框架仅以这种方式调度 map 任务。我建议你阅读一些 map reduce 的基础知识。cloudera 网站上有很好的视频教程。

# function - 我在 haskell 中的列表类型

> ID：10691751
> 
> 赞同：0
> 
> 时间：2012-05-21T19:57:39.327
> 
> 标签：function, haskell, types, functional-programming

我尝试在 haskell 中创建自己的列表类型，但是我的实现包含错误。这样做的正确方法是什么。请稍微解释一下。谢谢你。

我的代码：

```
data List a = EmptyList | ListElement a (List a) 

instance (Show a) => Show (List a) where
        show = showList'

showList' EmptyList = showString "[]"
showList' (ListElement a EmptyList) = show a
showList' (ListElement a b) = show a ++ show " " ++ showList' b 
```

错误代码：

```
[1 of 1] Compiling Main             ( tipusok.hs, interpreted )

tipusok.hs:12:39:
    Couldn't match expected type `Prelude.String -> Prelude.String'
                with actual type `[Char]'
    Expected type: ShowS
      Actual type: Prelude.String
    In the return type of a call of `show'
    In the expression: show a
Failed, modules loaded: none. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T20:01:10.213

您的`show`功能组合不正确。我认为您的意思是插入值。

```
showList' (ListElement a b) = show a . showChar ' ' . show b 
```

应该是这样的：

```
showList' (ListElement a b) = show a ++ " " ++ showList' b 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T20:15:51.503

```
showList' EmptyList = showString "[]" 
```

的类型`showString`是`String -> ShowS`。`ShowS`是 的类型同义词`String -> String`，因此 的结果`showString "[]"`是将字符串`"[]"`添加到其参数的函数。由于您没有给出类型签名，因此该等式确定了为函数推断出的类型，但其他等式与该类型不匹配。

你可能只是想要

```
showList' EmptyList = "[]" 
```

# jsf - 以 JSF 创建表单传递存储在会话托管 bean 中的对象

> ID：10691754
> 
> 赞同：0
> 
> 时间：2012-05-21T19:57:50.497
> 
> 标签：jsf, el

我在支持身份验证和管理一些简单对象的 Java EE 应用程序中工作用户登录后，我将其作为对象存储在会话范围的托管 bean 中。登录的用户可以创建一个新的 UNIT 对象，该对象必须只对他可见。我正在使用 JSF 表单执行此操作。我的问题是我无法将当前用户作为创建单元的所有者传递。

我试图用 JSF Create unit 表单中的 inputHidden 标记做这样的事情

```
<h:inputHidden binding="#{unitController.selected.user}" value="#{loginController.checkedUser}"/> 
```

但它不工作。

我还尝试在 CreateUnit 方法中添加一个 User 对象作为参数，但我不确定如何使用 Java 表达式语言调用此方法。基本上，

```
<p:commandButton value="Save Unit" action="#{unitController.create(#{loginController.checkedUser})}" update="createUnitForm :growlCreateUnit"/> 
```

但仍然无法正常工作。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:04:28.363

代替

```
<p:commandButton value="Save Unit" 
           action="#{unitController.create(#{loginController.checkedUser})}" 
           update="createUnitForm :growlCreateUnit"/> 
```

和：

```
<p:commandButton value="Save Unit"
           action="#{unitController.create(loginController.checkedUser)}"
           update="createUnitForm :growlCreateUnit"/> 
```

EL 表达式不能嵌套。

# javascript - 历史 API 不起作用（后退/前进）

> ID：10691759
> 
> 赞同：0
> 
> 时间：2012-05-21T19:58:09.903
> 
> 标签：javascript, html, browser-history, pushstate

在下面的链接中，我做了一个history.pushState的例子。

但是，如果您单击链接然后尝试返回或前进，您会发现它不起作用。你知道告诉我为什么吗？有好的做法吗？你能帮助我吗？

[http://jsfiddle.net/BQPgh/](http://jsfiddle.net/BQPgh/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T20:05:38.137

不是针对您的特定问题的解决方案，但我认为值得一提：有一个非常流行的 jQuery / Prototype / Mootools 插件很好地包装了 HTML5 历史 API：[https ://github.com/browserstate/History.js/](https://github.com/browserstate/History.js/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T04:01:16.550

还要检查 bbq 插件。[http://benalman.com/projects/jquery-bbq-plugin/](http://benalman.com/projects/jquery-bbq-plugin/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-21T20:06:43.347

这是因为 back 和 forward 不适用于 ajax。

您可以尝试将加载的前一页存储在某处，然后让后向和前向链接加载您自己的历史处理程序。

# java - 如何找到椭圆和直线的交点？

> ID：10691765
> 
> 赞同：1
> 
> 时间：2012-05-21T19:58:36.833
> 
> 标签：java, geometry, coordinates

我完全被困住了。我有一个椭圆和一条线。线由两个点设置，椭圆 - 由左下角和右上角。我必须使用java找到它们的交点。我试图解决一个方程组：

```
(1) y = kx + m;
x^2/a^2 + y^2/b^2 = 1; 
```

但我无法让事情正常进行。我认为这是因为 java 的坐标系，但这也可能是我自己的错误，因为我对它感到困惑。

有没有更好的方法来找到交点，如果没有，我怎样才能正确地得到它们？

先感谢您。

代码：

```
double r1 = in_y2-in_y;
double r2 = in_x2-in_x;
double k = r1/r2;
double m = in_y2 - k*in_x2;
double a =  Math.abs((double)x2 - (double)x)/2;
double b =  Math.abs((double)y2 - (double)y)/2;

double A1 = 1/(a*a) + (k*k)/(b*b);
double B1 = (2*k*m)/b*b;
double C1 = (m*m)/(b*b);
double D = Math.sqrt(B1*B1 - 4*A1*C1);
double ex1 = (-B1 + D/(2*A1));
double ey1 = k*ex1 + m;
double ex2 = (-B1 - D/(2*A1));
double ey2 = k*ex2 + m; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T20:24:11.293

Java 不能解决代数问题，但是一旦你告诉它要计算什么，它就可以计算出解决方案。

听起来您只需`y`将椭圆方程中的您替换为`kx+m`然后求解 x。看起来这是一个简单的二项式方程。`x=...`编写一个基于 k、m、a 和 b计算的程序。如果你告诉它要计算什么以及 k、m、a 和 b 的值是什么，Java 可以帮助你计算根。

在您的特定情况下，您想将 Java 用作简单的计算器......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-12T08:07:12.950

这可能与原始问题所有者不再相关，但是由于我遇到了相同的问题，所以让我提出我的答案。

我可以看到原始计算中有三个错误：（i）@mprivat 指出的错误，（ii）赋值中的括号`B1`应该改为

```
double B1 = (2*k*m)/(b*b); 
```

(iii) 一个更基本的问题：所提出的计算不能纠正椭圆的原点。由于椭圆是由它的外接边界定义的，因此不能保证它以 为中心`(0,0)`。

让我们称之为中心`(cx,cy)`，然后椭圆的方程变为

```
(x-cx)^2/a^2 + (y-cy)^2/b^2 = 1 
```

而不是原来的

```
x^2/a^2 + y^2/b^2 = 1 
```

我认为，简单的修复是翻译 wrt 行`(cx,cy)`并将结果翻译回来，如下所示：

```
...
double m = (in_y2-cy) - k*(in_x2-cx);
...
double ex1 = (-B1 + D/(2*A1)) + cx;
double ey1 = k*(ex1-cx) + m + cy;
double ex2 = (-B1 - D/(2*A1)) + cx;
double ey2 = k*(ex2-cx) + m + cy; 
```

`B1`更优雅的修复是求解椭圆的正确方程，但这会导致和的公式更加难以理解`C1`：

```
double B1 = (2*k*(m-cy))/(b*b) - (2*cx)/(a*a);
double C1 = (m-cy)*(m-cy)/(b*b) - 1 + (cx*cx)/(a*a); 
```

作为最后一点，请注意这会分解为垂直线，因为 then `r2 = 0`so`k`没有定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T20:30:48.117

能否请您输入您的代码，以便我们查看它是否正确？

无论如何，这是一个算法： http: [//mathworld.wolfram.com/Ellipse-LineIntersection.html](http://mathworld.wolfram.com/Ellipse-LineIntersection.html)

请注意，由于它有一个平方根，您可能会得到一个不精确的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-29T11:00:44.290

```
Line2D.Double line = new Line2D.Double(x1,y1,x2,y2);

Ellipse2D.Double ellipse = new Ellipse2D.Double(x,y,width,height);

int resolution = 1000;
int x_distance = ellipse.getWidth()/2;
int y_distance = ellipse.getHeight()/2;

double angle = 360.0/(double)resolution;

Point center = new Point(width/2,height/2);
Point point = new Point();

for (int index = 0; index < resolution; index++)
{
    int x = (center.x+x_distance)*Math.sin(Math.toRadians(angle*index)));
    int y = (center.y+y_distance)*Math.cos(Math.toRadians(angle*index)));

    Ellipse2D.Double dot = new Ellipse2D.Double(x,y,1,1);

    if (line.intersects(dot.getBounds()))
    {
       point.setLocation(x,y);
       index = resolution;
    }
} 
```

# postgresql - 如何连接到我的 heroku 共享数据库以用于 postgresql？

> ID：10691766
> 
> 赞同：4
> 
> 时间：2012-05-21T19:58:37.530
> 
> 标签：postgresql, heroku

我已经从 heroku 配置中提取了 SHARED_DATABASE_URL

```
SHARED_DATABASE_URL => postgres://username:xxxx@host.com/db_name 
```

我正在使用 pgAdmin 尝试连接到它，但它一直超时。我需要指定端口吗？我错过了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-27T09:02:58.227

您可以使用此命令连接到 psql。

`heroku pg:psql`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T05:45:04.333

如果您愿意更改为 postgres 9.1，您可以使用新推出的开发数据库，​​它允许通过普通 postgres 工具进行连接。阅读更多[https://postgres.heroku.com/blog/past/2012/4/26/heroku_postgres_development_plan/](https://postgres.heroku.com/blog/past/2012/4/26/heroku_postgres_development_plan/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T20:02:38.433

您无法使用 psql、pgadmin 等访问共享数据库。

> Heroku 为您提供在共享或专用数据库包上运行的选择。共享计划适用于开发和暂存应用程序。它运行 Postgres 8.3。专用计划适用于生产规模应用。此外，专用数据库提供了许多优势，**包括直接访问（通过 psql 或任何本机 postgres 库）**、存储过程和 Postgres 9 支持。^([[来源]](https://devcenter.heroku.com/articles/database#shared_vs_dedicated))

# php - php oop 有没有办法自动设置这个数组

> ID：10691767
> 
> 赞同：0
> 
> 时间：2012-05-21T19:58:38.970
> 
> 标签：php, oop

例如这个`$name = pulic $wherever;`，所以我可以打电话，例如，`wherever->wherever;`

这样我就不必每次添加变量时都输入这个名称

```
// If it's going to need the database, then it's 
// probably smart to require it before we start.
require_once('database.php');

class Logs extends DatabaseObject {

protected static $table_name="logs";
protected static $db_fields = array('id', 'username', 'ip', 'time', 'page');

public $id;
public $username;
public $ip;
public $time;
public $page; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T20:01:41.400

您可以使用[extract()](http://php.net/manual/en/function.extract.php)。

```
extract( $db_fields ); 
```

那么你就不需要一一声明了。

```
class Logs extends DatabaseObject {

protected static $table_name="logs";
protected static $db_fields = array('id', 'username', 'ip', 'time', 'page');

extract( $db_fields ); 
```

# wpf - 如何避免由于列表中项目的额外属性而导致下拉列表中的绑定错误？

> ID：10691774
> 
> 赞同：1
> 
> 时间：2012-05-21T19:59:25.083
> 
> 标签：wpf, data-binding, combobox

我有一个下拉列表......以及绑定到它的三个项目的列表 - A、B 和 C。

这两个都派生自同一个类 - ViewModelBase。

B 有一个属性“IsSomethingEnabled”。A 和 C 没有这个属性。

在这个下拉列表的触发器中......我有一个数据触发器......它基于属性 - “IsSomethingEnabled”。

但是我收到数据绑定错误，因为 A 和 C 中不存在此属性。

我该如何解决这个问题？任何帮助，将不胜感激。

**编辑：** 我已经使用下面的代码修复了 - 这是正确的方法吗？

```
 <DataTrigger Value="False">
                                            <DataTrigger.Binding>
                                                <PriorityBinding FallbackValue="True">
                                                    <Binding Path="IsSomethingenabled" />
                                                </PriorityBinding>
                                            </DataTrigger.Binding>
                                            <Setter Property="IsEnabled"
                                                    Value="False" />
                                        </DataTrigger> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T20:12:17.560

您可以通过为每种类型指定一个 DataTemplate 或实现一个 DataTemplate 选择器，[为每种类型的项目指定一个单独的 DataTemplate 。](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/ee71a113-0abb-4823-8c0c-7056d6df7bdc/)

# java - 将 Apache Commons Net 库添加到 Eclipse

> ID：10691776
> 
> 赞同：0
> 
> 时间：2012-05-21T19:59:40.473
> 
> 标签：java, jar

我已将 Apache Commons Net 库添加到 Eclipse，方法是将 commons-net-3.1.jar 包含在项目的 bin 文件夹中，然后将其作为库添加到 Java 构建路径中。一切似乎都很好，除非我导出我的 jar 文件 org.apache.commons.net 不包含在 jar 文件中。

是否有其他配置方法可以完成，以便我的 jar 文件包含公共网络？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:06:16.270

而是将其导出为可运行的 jar。有几个选项取决于您希望如何处理 jars 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T20:02:34.027

您不会在 jar 中包含 commons-net-3.1.jar，而是希望通过`classpath`

```
java -classpath .;path/to/commons-net-3.1.jar my.package.MainClass 
```

相反，您可能希望在 jar 文件中使用清单文件。它应该如下所示：

```
Class-Path: path/to/commons-net-3.1.jar 
```

# c - 从 R 调用 MPI 以运行 C 代码

> ID：10691779
> 
> 赞同：1
> 
> 时间：2012-05-21T19:59:53.853
> 
> 标签：c, r, mpi, hpc

我有一个 R 函数，它本质上是一组 C 函数的包装器——R 代码通过调用 C 代码`.C("...").` 这个 C 代码可以使用一些 MPI 实现进行并行化和编译。但是，以前从未使用过 MPI，我不知道这种 MPI 编辑的代码是否可以从 R 中以某种方式让 MPI 工作？

有没有人有这种事情的经验？我猜 R MPI 库对我的目的毫无意义，因为所有工作都在 C 代码的深处完成。这最终将在 HPC 集群上运行，如果这有什么不同？

您可以使用 mpicc 创建一个共享对象吗？如果从 R 调用这样的共享对象，是否会运行并行实现，或者您是否会获得串行版本（或者实际上，正如我怀疑的那样，它会崩溃）？

我很可能缺少了解问题所需的信息，因此会相应地更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T20:14:55.030

你似乎很困惑。

您可以只使用*现有的* [Rmpi](http://cran.r-project.org/package=Rmpi)​​ 包来生成多个 R 实例的并行执行（在您的不同节点上），并且每个实例都可以使用您的`.C()`-call 代码。

也许您想通过一些简单的示例来更好地了解可以做什么或不可以做什么？

# android - 通过整个屏幕移动文本视图

> ID：10691781
> 
> 赞同：2
> 
> 时间：2012-05-21T19:59:56.783
> 
> 标签：android, textview, screen, onlongclicklistener

我开发了一个应用程序，可以全屏显示时间。小时、分钟和秒显示在屏幕中间。所以我的目标是，当我长按任何文本视图时，能够在整个屏幕上滚动它，并将其放置在我想要的位置......

我试图找到一个合适的代码来应用到我的应用程序，我找到了一个代码，它可以使文本图像然后移动该图像。但问题是，文本每秒都在更新，所以我认为每秒创建图像不是一个好主意......

任何人都知道一种能够在整个屏幕上移动文本视图的方法？？？这是我的文本视图之一

```
private TextView txtHour;

txtHour = (TextView)findViewById(R.id.TxtHour);

txtHour.setOnLongClickListener(new OnLongClickListener{
.... 
```

我不知道要添加什么...... :(请帮忙！

编辑：根据第一个答案，我的代码应该是这样的吗？

```
 txtHour.setOnLongClickListener(new OnLongClickListener() {
             public void onLongClick(View v){

               public void drag(MotionEvent event, View v)
                {

                    RelativeLayout.LayoutParams params = (android.widget.RelativeLayout.LayoutParams) v.getLayoutParams();

                    switch(event.getAction())
                    {
                       case MotionEvent.ACTION_MOVE:
                       {
                         params.topMargin = (int)event.getRawY() - (v.getHeight());
                         params.leftMargin = (int)event.getRawX() - (v.getWidth()/2);
                         v.setLayoutParams(params);
                         break;
                       }
                       case MotionEvent.ACTION_UP:
                       {
                         params.topMargin = (int)event.getRawY() - (v.getHeight());
                         params.leftMargin = (int)event.getRawX() - (v.getWidth()/2);
                         v.setLayoutParams(params);
                         break;
                       }
                       case MotionEvent.ACTION_DOWN:
                       {
                        v.setLayoutParams(params);
                        break;
                       }
                    }

           }}); 
```

编辑2：最后这是结果代码，可以吗？

```
 package com.iamaner.T2Speech;
 //imports
 public class MAINActivity extends Activity{

 private TextView txtHour;
 private TextView txtMinutes;
 private TextView txtSeconds;

 @Override
 public void onCreate(Bundle savedInstanceState) {  
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

txtHour = (TextView)findViewById(R.id.TxtHour);
txtMinutes = (TextView)findViewById(R.id.TxtMinute);
txtSeconds = (TextView)findViewById(R.id.TxtSeconds);

txtHour.setOnTouchListener(new OnTouchListener() {

    public boolean onTouch(View v, MotionEvent event) {
        // TODO Auto-generated method stub
        drag(event, v);
        return false;
    }});
 }
 public void drag(MotionEvent event, View v)
{

    FrameLayout.LayoutParams params = (android.widget.FrameLayout.LayoutParams) v.getLayoutParams();

    switch(event.getAction())
    {
       case MotionEvent.ACTION_MOVE:
       {params.topMargin = (int)event.getRawY() - (v.getHeight());
        params.leftMargin = (int)event.getRawX() - (v.getWidth()/2);
        v.setLayoutParams(params);
        break;}
       case MotionEvent.ACTION_UP:
       {params.topMargin = (int)event.getRawY() - (v.getHeight());
        params.leftMargin = (int)event.getRawX() - (v.getWidth()/2);
        v.setLayoutParams(params);
        break;}
       case MotionEvent.ACTION_DOWN:
       {v.setLayoutParams(params);
        break;}
       }}
       } 
```

而这个框架布局

```
 <?xml version="1.0" encoding="utf-8"?>
  <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/your_layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"   >

<TextView
    android:id="@+id/TxtHour"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="15mm"
    android:textColor="#000000"/>

<TextView
    android:id="@+id/TxtPoints1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/separator"
    android:textSize="15mm"
    android:textColor="#000000"
    android:layout_gravity="center"
    android:gravity="center"/>

<TextView
    android:id="@+id/TxtMinute"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="15mm" 
    android:textColor="#000000"
    android:layout_gravity="center"
    android:gravity="center" />

 <TextView
    android:id="@+id/TxtPoints2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/separator"
    android:textSize="15mm"
    android:textColor="#000000"
    android:layout_gravity="center"
    android:gravity="center"/>

 <TextView
    android:id="@+id/TxtSeconds"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="15mm"
    android:textColor="#000000"
    android:layout_gravity="bottom|right" />

  </FrameLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T11:22:49.857

将此添加到您的 onCreate：更好地使用 FrameLayout 本身。

```
 txtHour.setOnTouchListener(new OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            drag(event, v);
            return false;
        }
    }); 
```

这对您的活动类来说是任何方法之外的。

```
 public void drag(MotionEvent event, View v)
        {

            RelativeLayout.LayoutParams params = (android.widget.RelativeLayout.LayoutParams) v.getLayoutParams();

            switch(event.getAction())
            {
               case MotionEvent.ACTION_MOVE:
               {
                 params.topMargin = (int)event.getRawY() - (v.getHeight());
                 params.leftMargin = (int)event.getRawX() - (v.getWidth()/2);
                 v.setLayoutParams(params);
                 break;
               }
               case MotionEvent.ACTION_UP:
               {
                 params.topMargin = (int)event.getRawY() - (v.getHeight());
                 params.leftMargin = (int)event.getRawX() - (v.getWidth()/2);
                 v.setLayoutParams(params);
                 break;
               }
               case MotionEvent.ACTION_DOWN:
               {
                v.setLayoutParams(params);
                break;
               }
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T20:06:32.820

```
public void drag(MotionEvent event, View v)
{

    FrameLayout.LayoutParams params = (android.widget.FrameLayout.LayoutParams) v.getLayoutParams();

    switch(event.getAction())
    {
    case MotionEvent.ACTION_MOVE:
    {
        params.topMargin = (int)event.getRawY() - (v.getHeight());
        params.leftMargin = (int)event.getRawX() - (v.getWidth()/2);
        v.setLayoutParams(params);
        break;
    }
    case MotionEvent.ACTION_UP:
    {
        params.topMargin = (int)event.getRawY() - (v.getHeight());
         params.leftMargin = (int)event.getRawX() - (v.getWidth()/2);
        v.setLayoutParams(params);
        break;
    }
    case MotionEvent.ACTION_DOWN:
    {
        v.setLayoutParams(params);
        break;
    }
    }
} 
```

将此方法复制到您的类并在您的 textview 的 ontouch() 中调用它。在这里我假设你使用 Framelayout。如果没有相应地更改布局参数。

# python - 数据挖掘多线程与多处理

> ID：10691788
> 
> 赞同：0
> 
> 时间：2012-05-21T20:00:35.223
> 
> 标签：python, twisted, urllib3

我编写并重写了我的小 Python 应用程序，以至于我目前的 Python 技能还不够。我从一个使用 Beautiful Soup 作为解析器的单线程应用程序开始，改为 lxml。使脚本多线程，我发现扭曲但无法将这个小片段更改为扭曲。我会在这里发布这个，所以也许你们可以为我指出更好的方向，让这可能更快一点。要获取 150k 页面，此时我需要 1 小时。我对此感到满意，因为当我第一次尝试编写它时，我的速度慢了 3 倍。

```
#! /usr/bin/python
# coding: ISO-8859-1
import time, PySQLPool, Queue, threading
from urllib3 import connection_from_url
from lxml import etree
import cStringIO as StringIO

headers = {   
           'User-Agent'         : 'Mozilla/4.77 [en] (X11; I; IRIX;64 6.5 IP30)',
           'Accept'             : 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
           'Accept-Language'    : 'en-us;q=0.5,en;q=0.3',
           'Accept-Encoding'    : 'gzip, deflate',
           'Accept-Charset'     : 'utf-8;q=0.7,*;q=0.7'
}

t = time.time()
PySQLPool.getNewPool().maxActiveConnections = 60
db = PySQLPool.getNewConnection(username='user', password='pass', host='127.0.0.1', db='fddb')
pool = connection_from_url('http://fddb.info/', maxsize=60, timeout=150, headers=headers)
detailCounter = 0
urls = {}
queue = Queue.Queue()
out_queue = Queue.Queue()

clean_rows = {
              "Brennwert":"details_brennwert",
              "Kalorien":"details_kalorien",
              "Protein":"details_protein",
              "Kohlenhydrate":"details_kohlenhydrate",
              "davon Zucker":"details_zucker",
              "davon Polyole":"details_polyole",
              "Fett":"details_fett",
              "Ballaststoffe":"details_ballaststoffe",
              "Broteinheiten":"details_broteinheit",
              "Alkohol":"details_alkohol",
              "Cholesterin":"details_cholesterin",
              "Koffein":"details_koffein",
              "Wassergehalt":"details_wasser",
              "Vitamin C":"details_vitc",
              "Vitamin A":"details_vita",
              "Vitamin D":"details_vitd",
              "Vitamin E":"details_vite",
              "Vitamin B1":"details_vitb1",
              "Vitamin B2":"details_vitb2",
              "Vitamin B6":"details_vitb6",
              "Vitamin B12":"details_vitb12",
              "Natrium":"details_natrium",
              "Eisen":"details_eisen",
              "Zink":"details_zink",
              "Magnesium":"details_magnesium",
              "Chlor":"details_chlor",
              "Mangan":"details_mangan",
              "Schwefel":"details_schwefel",
              "Kalium":"details_kalium",
              "Kalzium":"details_kalzium",
              "Phosphor":"details_phosphor",
              "Kupfer":"details_kupfer",
              "Fluor":"details_fluor"
              }

def rows_escape(text):
    for item, key in clean_rows.items():
        text = text.replace(item, key)
    text = text.rstrip()
    return text

clean_values = {
         "kJ"   :"",
         "kcal" :"",
         "g"    :"",
         "mg"   :"",
         "%"    :"",
         ","    :".",
         u"\u03bc": ""
         }

def values_escape(text):
    for item, key in clean_values.items():
        text = text.replace(item, key)
    text = text.rstrip()
    return text

def insertDetails(container, foods_id):
    c = PySQLPool.getNewQuery(db)
    query_rows = ''
    query_values = ''
    for item in container:
        query_rows += item['row'] + ','
        query_values += item['value'] + ','

    c.Query("INSERT INTO details (%sdetails_id,foods_id) VALUES (%sNULL,%s)" % (query_rows, query_values, foods_id))
    c.Query("UPDATE foods SET foods_check = '1' WHERE foods_id=%d" % (foods_id))

def getHP(url):
    r = pool.request('GET', '/' + url)
    return r.data

class ThreadUrl(threading.Thread):
    def __init__(self, queue, out_queue):
        threading.Thread.__init__(self)
        self.queue = queue
        self.out_queue = out_queue
    def run(self):
        while True:
            host = self.queue.get()
            data = getHP(host[0])
            self.out_queue.put([data, host[1]])
            self.queue.task_done()

class DatamineThread(threading.Thread):
    def __init__(self, out_queue):
        threading.Thread.__init__(self)
        self.out_queue = out_queue
    def run(self):
        while True:
            global detailCounter

            qData = self.out_queue.get()
            data = qData[0]
            foods_id = qData[1]

            container = []
            parser = etree.HTMLParser(encoding='cp1252')
            tree = etree.parse(StringIO.StringIO(data), parser)
            divx = tree.xpath('//div[@style="background-color:#f0f5f9;padding:2px 4px;" or @style="padding:2px 4px;"]')

            for xdiv in divx:
                x = etree.ElementTree(element=xdiv, parser=parser)

                value = x.xpath('string(//div/text())')
                label = x.xpath('string(//*[self::a or self::span]/text())')

                label = rows_escape(label)

                if not "[nodata]" in value:
                    if u"\u03bc" in value:
                        value = values_escape(value)
                        item4 = 0
                        item4 = float(value)
                        item4 = item4 / 1000
                        container.append({'row':label,'value':str(item4)})
                    else:
                        container.append({'row':label,'value':values_escape(value)})

            detailCounter += 1
            container = tuple(container)
            insertDetails(container, foods_id)

            self.out_queue.task_done()

def main():

    c = PySQLPool.getNewQuery(db)
    c.Query("SELECT foods_id, foods_url FROM foods WHERE foods_check = 0")
    urls = c.record

    for i in range(6):
        t = ThreadUrl(queue, out_queue)
        t.setDaemon(True)
        t.start()

    for item in urls:
        queue.put([item['foods_url'], item['foods_id']])

    for i in range(6):
        dt = DatamineThread(out_queue)
        dt.setDaemon(True)
        dt.start()

    queue.join()
    out_queue.join()

main()
db.close
print "Zeit: %.2f New Details: %d" % (time.time()-t, detailCounter) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T22:53:59.937

如果您有多个 CPU 并且您的程序似乎非常占用 CPU，我建议您使用多处理模块。Python 在多线程方面出了名的糟糕，因为全局解释器锁或 GIL 基本上确保在任何给定时间，单个进程中只能有 1 个 Python 线程执行。

# c# - Log4Net 不适用于我的海关属性

> ID：10691791
> 
> 赞同：2
> 
> 时间：2012-05-21T20:00:40.963
> 
> 标签：c#, logging, log4net, adonetappender

这次我尝试登录到带有 L4N 的数据库，这是表的结构：

```
[TcpClientTracer]
[ID] [int] IDENTITY(1,1) NOT NULL,
[Date] [datetime] NOT NULL,
[Thread] [varchar](20) NOT NULL,
[EventType] [varchar](20) NOT NULL,
[ClientId] [int] NOT NULL,
[ModemId] [varchar](128) NOT NULL,
[EventText] [varchar](2000) NOT NULL 
```

为了填写这张表，我使用了这个 appender：

```
<appender name="TcpAdoNetAppender" type="log4net.Appender.AdoNetAppender,log4net">
  <bufferSize value="50" />
  <connectionType value="System.Data.SqlClient.SqlConnection, System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
  <connectionString value="Data Source=[IPADDRES]; Initial Catalog=XYXY; User Id=username;Password=password" />
  <commandText value="INSERT INTO TcpClientTracer ([Date],[Thread],[EventType],[ClientId],[ModemId],[EventText]) VALUES (@log_date, @thread, @eventtype, @clientid, @modemid, @eventtext)" />
  <parameter>
    <parameterName value="@log_date" />
    <dbType value="DateTime" />
    <layout type="log4net.Layout.RawTimeStampLayout" />
  </parameter>
  <parameter>
    <parameterName value="@thread" />
    <dbType value="String" />
    <size value="20" />
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%thread" />
    </layout>
  </parameter>
  <parameter>
    <parameterName value="@eventtype" />
    <dbType value="String" />
    <size value="20" />
    <layout type="log4net.Layout.RawPropertyLayout">
      <key value="eventtype" />
    </layout>
  </parameter>
  <parameter>
    <parameterName value="@clientid"/>
    <dbType value="Int32"/>
    <layout type="log4net.Layout.RawPropertyLayout">
      <key value="clientid" />
    </layout>
  </parameter>
  <parameter>
    <parameterName value="@modemid" />
    <dbType value="String" />
    <size value="128" />
    <layout type="log4net.Layout.RawPropertyLayout">
      <key value="modemid" />
    </layout>
  </parameter>
  <parameter>
    <parameterName value="@eventtext" />
    <dbType value="String" />
    <size value="2000" />
    <layout type="log4net.Layout.RawPropertyLayout">
      <key value="eventtext" />
    </layout>
  </parameter>
</appender> 
```

记录器是这样的：

```
<logger name="TcpClientTracer" additivity="false">
  <level value="ALL"/>
  <appender-ref ref="TcpAdoNetAppender" /> 
</logger> 
```

并且...要从 C# 传递数据，我使用此方法：

```
public static void writeLog(GroupType mGrupo, Hashtable mValues)
    {
        ILog Logger = oLogger.GetLoggerByGroup(mGrupo);

        Type declaringType = typeof(log4net.LogManager);
        LoggingEvent loggingEvent = new LoggingEvent(declaringType, Logger.Logger.Repository, Logger.Logger.Name, Level.All, null, null);//null = Message, Exception            

        foreach (DictionaryEntry CurrentEntry in mValues) 
        {
            loggingEvent.Properties[CurrentEntry.Key.ToString()] = CurrentEntry.Value;
        }
        Logger.Logger.Log(loggingEvent);
    } 
```

我不知道 LoggingEvent 是如何工作的，但我用它来填充其他表并完美地工作。如果有人可以帮助我解决这个问题，我很感激！

感谢阅读我糟糕的英语！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T06:29:06.110

我不是 100% 确定你在问什么。我可以肯定地告诉你的是：如果你想记录自定义属性，你需要使用 RawPropertyLayout 并指定属性名称。例子：

```
<parameter>
   <parameterName value="@clientid"/>
   <dbType value="Int32"/>
   <layout type="log4net.Layout.RawPropertyLayout">
      <key value="clientid" />
   </layout>
</parameter> 
```

# git - git 将文件合并到工作副本中

> ID：10691797
> 
> 赞同：4
> 
> 时间：2012-05-21T20:00:53.213
> 
> 标签：git, git-merge

我有一个 git 存储库，用于存储我经常使用的模板文件，几天前我检查了最新版本并对这些模板文件进行了本地更改。

我刚刚对模板文件主存储库进行了更改，现在我想签出我的主分支的最新版本，但我不想删除我的本地更改。

如何将主分支中的更改合并到我的工作副本中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T20:10:23.147

要充分利用 git 的合并（或变基）策略，您可以将更改提交到本地存储库，然后拉取。拉取导致远程和本地存储库之间的合并，这可能是快进或递归合并，具体取决于上游更改。您甚至可能想要为此创建一个新分支（如果需要，您可以在不影响主分支的情况下将其推送到原点）。

存储可以在这里为您提供帮助，但是您冒着在拉取后无法应用存储的风险。

简单的例子：

```
git add .
git commit -m 'My local template changes'
git pull origin master # fix any conflicts 
```

新分支示例：

```
git checkout -b newbranch
git add .
git commit -m 'My local template changes'
git pull origin master # fix any conflicts 
```

后者将远程更改合并`master`到您的本地`newbranch`，但请记住，在这种情况下，您的本地副本`master`仍将落后（即，如果您随后执行了 a `git checkout master`，您仍然需要 a`git pull`来获取更改）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T20:07:31.163

您始终可以将本地更改保存在存储中，提取最新更改，然后再次应用保存的更改。

```
git stash     -- save your local changes
git pull      -- get latest changes from remote
git stash pop -- apply your saved changes 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-23T15:01:21.437

我来到这里想知道如何`git merge`在工作副本中进行本地操作，而无需对分支进行任何提交。答案是：

```
git merge --squash the-other-branch 
```

这将暂存合并的文件（就像它们已添加 一样`git add`），但不进行任何提交。

也有一个`--squash`选项`git pull`，它大概做了类似的事情。

# matlab - 将复杂格式的 CSV 文件读入 Matlab

> ID：10691803
> 
> 赞同：1
> 
> 时间：2012-05-21T20:01:11.943
> 
> 标签：matlab, csv, file-io, input, import-from-csv

我的原始 CSV 文件看起来像第一张照片。我想用 Matlab 把它读成第二张图片的格式。我有超过 1000 个相同类型的 CSV 文件，如果我通过复制/粘贴来做会很痛苦。我怎样才能做到这一点？有什么例子吗？

原始数据：![原始数据](../Images/2aef9550dc078b50d8e734b3329044c4.png)

输出数据：![输出数据](../Images/78406cd024055b965d41dc0f7af4f2a8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T01:49:31.593

首先要意识到 .csv 文件的格式非常简单。您的上述文件实际上是一个纯文本文件，每行包含以下文本：

```
id,A001
height
a1,a2,a3
3,4,5
3,4,5
6,7,5

weight
a1,a2,a3
4,4,5
5,4,6
i6,7,5 
```

因此，在 Matlab 中编写自己的解析器并不难。你想使用类似的命令

```
fid = fopen('filename.csv','r');
L = fgetl(fid); % get a text line from the file
commas = find(L==','); % find where the commas are in the line
n1 = str2num(L(1:commas(1)-1); % convert the first comma-delimited number on line L
fidout - fopen('myfile.csv','w');
Lout =  [ L(commas(2)+1:commas(3)-1) ', a1, a1'];
fwrite(fidout,Lout); % write a line out to the output file
fclose all; % close all open files. 
```

一开始将各种值读入各种变量，然后将它们按照您希望它们写入输出文件的方式写出，看起来会很慢。但是一旦你开始滚动它会很快，你会发现自己对文件中的内容有很好的理解，并且你会第一手了解编写类似`texscan.m`或`csvwrite.m`等等的内容。

祝你好运！

# c - 测试多个数组中是否存在某些值的最简单方法是什么？

> ID：10691807
> 
> 赞同：1
> 
> 时间：2012-05-21T20:01:33.243
> 
> 标签：c, arrays

我知道这可能看起来像一个硬件问题，并作为我的客人来对待它，因为这是一个自学练习。

测试多个数组中是否存在某些值的最简单方法是什么？

**例如：**

伪代码

```
if array a contains a value of 4 and
   array b contains a value of 2 and
   array c contains a value of 6 
then procede to procedure x 
```

到目前为止我在实施中所做的

```
#include<stdio.h>

void x(void){/* do stuff */}

int main()
{
    char fndA = 0;
    char fndB = 0;
    char fndC = 0;

    int a[5] = {1,2,3,5,6};    
    int b[5] = {1,2,2,3,4};
    int c[5] = {1,3,4,5,6};

    for(int i=0;i<5;i++)
    {
        if(a[i]==4){fndA=1;}
    }

    //repeat for-loop for b/fndb and c/fndC

    if (fndA && fndB && fndC) {x();}

    return 0;
} 
```

在这个例子中，`x()`永远不会被调用，因为数组中不存在 4 `a`。但是我最终是否必须`for`为要测试的每个数组构建一个循环？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T20:04:09.353

是的。但是您显然可以创建一个执行循环的函数。您需要将数组、它的大小和您要查找的元素传递给该函数。

```
int array_contains_int(int *arr, size_t size, int value) {
    int i;
    for(i = 0; i < size; i++)
        if(arr[i] == value)
            return 1;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T20:05:23.637

是的。你写的代码基本上就是你会做的。通常，您似乎将数组视为集合，在这种情况下，您可以将其视为具有集合签名的抽象数据类型。相反，如果您以其他方式实现这些数组，则可以抽象该`member()`函数以具有较低的运行时间，通常为 O(log(n))（对于基于树的实现）。但是，是的，无论你做什么，你都会想要对你的`member()`函数做一个 AND 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T20:05:08.643

我会创建一个函数，它接受一个 int 和一个数组并返回 true 或 false。然后和其中三个一起。

如果第一个循环中的一个在条件中返回 false，这具有额外的好处，即不调用以后的循环。

# php - 升级的PHP。控制台显示 5.3 但 phpinfo 仍然显示 5.1.2

> ID：10691813
> 
> 赞同：1
> 
> 时间：2012-05-21T20:01:50.400
> 
> 标签：php, linux, lighttpd

我需要 php（soundcloud php 包装器）中的匿名函数，因此我将音频服务器升级到 PHP 5.3。服务器是linux CentOS 5.5。

在我假设安装成功后， php -v 和 php-cgi -v 都显示 5.3 已安装，但服务器仍报告 5.1.2。

我使用的是 lighttpd，而不是 apache。我在服务器上只能找到一个 php.ini 文件。我已经搜索了我的 lighttpd.conf 文件，但我一生都无法弄清楚如何让 Lighttpd 看到新的 PHP 版本。

干杯

编辑：我忘了提到我正在使用 FastCGI。这是 lighttpd 的 fastcgi.conf 文件：

```
fastcgi.server = ( ".php" => ((
"bin-path" => "/usr/bin/php-cgi",
"socket" => "/tmp/php.socket",
"max-procs" => 2,
"bin-environment" => (
"PHP_FCGI_CHILDREN" => "16",
"PHP_FCGI_MAX_REQUESTS" => "10000"
),
"bin-copy-environment" => (
"PATH", "SHELL", "USER"
),
"broken-scriptfilename" => "enable"
))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T15:35:11.993

即使重新启动 lig​​httpd 或 apache 服务，php-cgi 进程仍然可以运行。

为了解决这个问题，我停止了服务，然后杀死了 php-cgi 进程

# killall php-cgi

然后启动 lig​​httpd，phpinfo 现在显示我正在运行新版本的 PHP。

非常感谢您的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-10T14:12:21.810

我在 Digital Ocean 上运行 Ubuntu 18.04。我正在运行 PHP 7.2 并升级到 7.4。

`php -v`在命令行上按预期显示 7.4.5，但`phpinfo()`显示 7.2.1。

为了解决这个问题，我跑了：

```
sudo a2dismod php7.2
sudo a2enmod php7.4
sudo service apache2 restart 
```

现在`phpinfo()`显示正确的版本。

# iphone - 应用程序处于后台状态时的 CLLocationManager

> ID：10691814
> 
> 赞同：6
> 
> 时间：2012-05-21T20:02:07.717
> 
> 标签：iphone, objective-c, ios, ipad

我的问题是：当我的应用程序处于非活动状态时，CLLocationManager 是否继续运行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-21T20:08:03.180

是的，如果`CLLocationManager`是先调用`startUpdatingLocation`方法，并在`AppName-Info.plist`文件中添加`Required Background Modes -> App registers for location updates`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-27T05:13:17.983

这有一些重要的微妙之处（从 iOS 7.1 开始）：

*   如果您只是在寻找重大变化和区域进入/退出事件，则不应使用位置更新后台模式。即使未设置背景标志，您仍会收到这些事件，同时您将节省大量电池。
*   如果您执行上述操作，则需要注意有限的允许后台时间。如果您不注意在允许的时间内结束网络请求等，您将网络事务失败。
*   如果您需要使用详细的位置跟踪（例如 -startUpdatingLocation），您应该只使用位置背景模式，在这种情况下，此背景模式将使您的应用保持清醒。
*   在没有获取详细位置时使用位置背景模式会激怒您的用户，并且可能会在审核过程中导致您的应用被拒绝（取决于您在整个应用中使用位置的方式）。
*   如果您没有设置后台位置模式，您的应用程序可能随时被操作系统杀死，因此您需要确保在 applicationDidFinishLaunching 或 applicationWillFinishLaunching 中正确重新初始化您的 CLLocationManager 实例，以便获得后续的 updateLocation 或 didEnter/ ExitRegion 委托调用。仅仅因为位置更新通过位置更新唤醒您的应用程序，它不会在没有您编程的情况下神奇地重新创建您的 CLLocationManager！

希望有帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T20:06:39.773

是的，它可以。当您的应用程序暂停时，您有两种处理位置服务事件的选项，可以在文章中阅读：[获取用户的当前位置](http://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW9)。如前所述：

> 您可以使用两种不同的服务来获取用户的当前位置：
> 
> *   标准定位服务是一种可配置的通用解决方案，在所有版本的 iOS 中均受支持。
> *   重大变化定位服务为具有蜂窝无线电的设备提供低功耗定位服务。此服务仅在 iOS 4.0 及更高版本中可用，还可以唤醒挂起或未运行的应用程序。

此外，正如本文底部“在后台获取位置事件”部分所述：

> *   如果您的应用程序需要在前台或后台提供位置更新，则有多种选择。首选选项是使用显着位置更改服务在适当的时间唤醒您的应用程序以处理新事件。但是，如果您的应用程序需要使用标准位置服务，您可以将您的应用程序声明为需要后台位置服务。
> *   只有当缺少这些服务会损害其运行能力时，应用程序才应请求后台定位服务。此外，任何请求后台定位服务的应用程序都应该使用这些服务为用户提供切实的好处。例如，逐向导航应用程序可能是后台定位服务的候选者，因为它需要跟踪用户的位置并报告下一次转弯的时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-06T19:17:06.467

要在应用程序处于后台模式时禁用 CLLocationManager，您根本不能在 info.plist 文件的“必需的后台模式”键中添加“应用程序注册位置更新”。

我建议尽可能使用重大更改定位服务而不是标准定位服务，以节省设备电池。

# gradle - 如何从 gradle 中的父项目复制属性

> ID：10691815
> 
> 赞同：1
> 
> 时间：2012-05-21T20:02:27.890
> 
> 标签：gradle

我正在尝试在 gradle 的多个子项目中共享一个 messages.properties（每种语言的），其中一个是战争，其余的是罐子。我的目录结构如下所示：

```
Top Level Project
  + Project War/
  + Project Jar/
  + Project Jar/
  ...
  + common/resources/properties files
  + build.gradle 
```

我正在尝试在主项目级别 build.gradle 中做这样的事情（这看起来不适合我）：

```
task copyProperties(type: Copy) {
   description = 'Copies the messages.properties to individual projects.'
   from relativePath('./common/resources')
   into output.resourceDir
   include '*.properties'
} 
```

我从子项目的 compileJava.dependsOn 中调用它，我没有看到任何错误，但副本没有发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T05:01:44.320

您可以将这样的复制任务注入到每个子项目中。与其将“from”指定为相对路径，不如将其基于 $rootDir。

然后应在构建每个子项目时根据需要调用每个复制任务。

# ios - 提醒应用程序如何知道仅在提醒当天跟踪我的位置？

> ID：10691820
> 
> 赞同：5
> 
> 时间：2012-05-21T20:02:41.743
> 
> 标签：ios, core-location, uilocalnotification, geofencing

在 iOS 5 引入的提醒应用程序中，您可以设置地理围栏，这样当您靠近某个地址时，您的提醒就会发出警报。还可以为特定日期配置基于位置的提醒。Apple 在处理基于位置和时间的提醒方面非常有效，因为他们在提醒当天才开始跟踪您的位置。

例子：

今天是星期一，我设置了一个星期三的提醒，提醒我什么时候回家倒垃圾。

如果您注意，您会注意到电池寿命指示器旁边的位置服务指示器（紫色三角形）直到周三午夜才会出现。

我很好奇是否有一个公共 API 允许您的应用程序响应这样的时间变化，或者他们是否正在使用一些私有 API。

我能够找到[`UIApplicationSignificantTimeChangeNotification`](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006728-CH3-SW44)，[`applicationSignificantTimeChange:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006786-CH3-SW7)但在文档中说明

> 如果您的应用程序当前处于挂起状态，则此消息将排队等待您的应用程序返回到前台，此时它会被传递。

所以这让我相信这是行不通的。

我的另一个想法是使用 UILocalNotification 并在您感兴趣的时间设置通知，当该通知被触发时，执行代码以启用位置服务。由于我缺乏[UILocationNotification](http://developer.apple.com/library/ios/#documentation/iPhone/Reference/UILocalNotification_Class/Reference/Reference.html#//apple_ref/doc/c_ref/UILocalNotification)的经验，但是我知道是否可以执行此类代码。

有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-13T10:35:31.023

您可以使用信息设置本地通知（远程通知），以在您想要激活功能的那一天激活地理围栏。

这会在您的 appDelegate 的“didReceiveLocalNotification”方法中唤醒您的应用，然后您将代码地理围栏放在那里。

# database - 是否有一种数据库密集度较低的方法可以从我的扩展 Django Site 模型中获取数据？

> ID：10691822
> 
> 赞同：1
> 
> 时间：2012-05-21T20:02:49.760
> 
> 标签：database, django, django-models, django-middleware, django-sites

我运行一个站点，除了与给定站点相关联的对象的名称和显示之外，它在许多 URL 上运行相同。因此，我扩展了 Site 模型以包含有关站点的各种其他信息，并创建了一个中间件来将标准 Site 对象信息放入请求对象中。以前，我在请求对象中需要的唯一信息是站点名称，我可以从 Django 提供的站点模型中获得。我现在需要一些位于我的扩展站点模型中的信息（以前仅由我的其他各种应用程序模型使用）。

这从向每个页面 ( `request.site = Site.objects.get_current()`) 添加一个查询到添加两个，因为我需要获取当前站点，然后从*我的*模型中获取关联的扩展站点对象。

有没有办法在不使用两个查询的情况下获取这些信息？或者甚至不使用一个？

模型.py：

```
from django.contrib.sites.models import Site

class SiteMethods(Site):
    """
    Extended site model
    """
    colloquial_name = models.CharField(max_length=32,)
    ... 
```

中间件.py：

```
class RequestContextMiddleware(object):
    """
    Puts the Site into each request object
    """
    def process_request(self, request):
        # This runs two queries on every page, instead of just one
        request.site = SiteMethods.objects.get(id=Site.objects.get_current().id)
        return None 
```

在我的`settings.py`文件中，我拥有所有共享的配置数据。我的服务器实例（gunicorn）配置为 load `[site]_settings.py`，它包含所有特定于站点的设置（包括 Django 的`SITE_ID`），并在底部：

```
try:
    from settings import *
except ImportError:
    pass 
```

我正在寻找不包括引用硬编码的选项（如果存在`SITE_ID`）`[site]_settings.py`。

**更新：**

正如下面所建议的，子类对象应该仍然可以访问它们的父对象和所有父对象的功能。对于 Site 对象，奇怪的是，情况似乎并非如此。

```
>>> Site.objects.get_current()
<Site: website.com>
>>> SiteMethods.objects.get_current()
Traceback (most recent call last):
  File "<console>", line 1, in <module>
AttributeError: 'Manager' object has no attribute 'get_current'
>>> SiteMethods.objects.select_related('site').get_current() # as suggested below
Traceback (most recent call last):
  File "<console>", line 1, in <module>
AttributeError: 'QuerySet' object has no attribute 'get_current'
>>> dir(SiteMethods)
['DoesNotExist', 'MultipleObjectsReturned', '__class__', '__delattr__', '__dict__',
'__doc__', '__eq__', '__format__', '__getattribute__', '__hash__', '__init__', 
'__metaclass__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', 
'__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__unicode__', 
'__weakref__', '_base_manager', '_default_manager', '_deferred', '_get_FIELD_display', 
'_get_next_or_previous_by_FIELD', '_get_next_or_previous_in_order', '_get_pk_val', 
'_get_unique_checks', '_meta', '_perform_date_checks', '_perform_unique_checks', 
'_set_pk_val', 'clean', 'clean_fields', 'date_error_message', 'delete', 'full_clean', 
'objects', 'pk', 'prepare_database_save', 'save', 'save_base', 'serializable_value', 
'site_ptr', 'sitemethods', 'unique_error_message', 'validate_unique',] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T20:13:27.493

由于您进行了子类化`Site`，您*应该*能够做到`SiteMethods.objects.get_current()`，这将为您提供`SiteMethods`. 由于 Django 的 MTI（多表继承）实现使用 a`OneToOneField`到父类，你也应该能够使用`select_related`for `site`。因此，请尝试以下操作：

```
SiteMethods.objects.select_related('site').get_current() 
```

# sql-server - 如何组合两个 SELECT 语句的结果

> ID：10691824
> 
> 赞同：3
> 
> 时间：2012-05-21T20:02:59.590
> 
> 标签：sql-server, select

我是 SQL Server 的新手。请帮我解决我的以下问题。

我有一张如下表，

```
Job  Quantity Status
1      100      OK
2      400      HOLD
3      200      HOLD
4      450      OK 
```

我现在想以这样的方式编写一个查询，即所有数量等于或大于 400 且状态为 OK 的作业将首先出现，然后是数量等于或大于 400 且状态为 HOLD 的作业。然后会出现所有数量小于 400 且状态为 OK 的作业，然后会出现数量少于 400 且状态为 HOLD 的作业。

这是我的结果应该如何显示。（抱歉以上令人困惑的段落）

```
Job  Quantity Status
4      450      OK
2      400      HOLD
1      100      OK
3      200      HOLD 
```

我该怎么做呢？有人请帮帮我

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T20:05:56.450

```
SELECT Job, Quantity, Status 
  FROM myTable
 ORDER BY CASE WHEN Quantity >= 400 AND Status = 'OK' THEN 1 
               WHEN Quantity >= 400 AND Status = 'Hold' THEN 2
               WHEN Status = 'OK' THEN 3
               ELSE 4
          END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T20:24:06.397

以下是一些稍微不那么冗长的替代方案：

```
ORDER BY Quantity / 400 DESC,
  CASE [Status] WHEN 'OK' THEN 1 ELSE 2 END; 
```

这会将数量 >= 800 的作业视为更高优先级。更好的选择可能是：

```
ORDER BY CASE Quantity / 400 WHEN 0 THEN 2 ELSE 1 END,
  CASE [Status] WHEN 'OK' THEN 1 ELSE 2 END; 
```

此外，如果 OK 和 HOLD 是 [Status] 仅有的两种可能性，您可以说：

```
ORDER BY CASE Quantity / 400 WHEN 0 THEN 2 ELSE 1 END,
  [Status] DESC; 
```

# java - Spring Security 3.0 重定向到超时的页面

> ID：10691830
> 
> 赞同：3
> 
> 时间：2012-05-21T20:03:23.880
> 
> 标签：java, spring, security, redirect

我正在使用 Spring Security 3.0.6，我希望能够执行以下操作：

如果用户在页面上并且发生会话超时，则用户将被带到登录页面并在有效登录时重定向回发生超时的页面。

我的 security.xml 文件中目前有以下内容。

```
<http auto-config="true" use-expressions="true">
    <form-login
        login-page="/login" 
        default-target-url="/main" 
        always-use-default-target="false"
        authentication-failure-url="/login.html?error=true"
        authentication-success-handler-ref="authenticationSuccessHandler" />
    <remember-me/>
    <logout logout-success-url="/login" />
</http> 
```

这是我的身份验证类：

```
public class AuthenticationSuccessHandler extends SavedRequestAwareAuthenticationSuccessHandler {

public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException {

    String url = "";

    HttpSession session = request.getSession(false);
    if (session != null) {
        SavedRequest savedRequest = (SavedRequest) session.getAttribute(WebAttributes.SAVED_REQUEST);
        if (savedRequest != null) {
            url = savedRequest.getRedirectUrl();
        }
    }

    System.out.println("url: "+ url);

    if (url == "") {
        response.sendRedirect(request.getContextPath()+"/main");
    } else {
        response.sendRedirect(url);
    }
} 
```

}

我通过 javascript 将用户发送回登录页面，例如：

```
window.location.href="/login"; 
```

我的身份验证类中的 url 始终为空。我怎样才能使这项工作，以便 Spring 将重定向到正确的页面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T21:54:23.327

您不需要编写任何自定义代码，因为默认情况下 Spring Security 可以做到这一点。查看有关`authentication-success-handler-ref` [此处](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#nsa-openid-login)的文档。

> **身份验证成功处理程序引用**
> 
> 这可以用作 default-target-url 和 always-use-default-target 的替代方案，让您在成功验证后完全控制导航流程。该值应该是应用程序上下文中 AuthenticationSuccessHandler bean 的名称。**默认情况下，使用 SavedRequestAwareAuthenticationSuccessHandler 的实现并[注入](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/SavedRequestAwareAuthenticationSuccessHandler.html)**default-target-url。
> 
> 对 AuthenticationSuccessHandler bean 的引用，该 bean 应该用于处理成功的身份验证请求。**不应与 default-target-url（或 always-use-default-target）结合使用**，因为实现应始终处理到后续目的地的导航。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-25T18:10:08.207

从您对上一个答案的评论中，我看到了 2 个选项。

1.  创建一个自定义的 RequestCache，例如通过扩展 HttpSessionRequestCache 并避免将 ajax 请求放在该缓存上，您在登录时应该被重定向到最后一个无 Ajax 请求

2.  实现您自己的 RedirectStrategy 以发送将由您的客户端代码解释的自定义 ajax 响应。在某些情况下，设置自定义 RedirectStrategy 并不容易，因为不同元素没有配置属性，例如，在 SessionManagementFilter 的情况下，您需要创建自己的实例并设置自定义重定向策略

我希望它有帮助

# c# - 当我使用 Surface 2.0 SDK 运行 WPF 应用程序时，没有显示任何表面控件

> ID：10691831
> 
> 赞同：1
> 
> 时间：2012-05-21T20:03:38.857
> 
> 标签：c#, wpf, pixelsense

所以我有一个简单的 C#/WPF 4.0 应用程序，其中包含几个 SurfaceTextBox 实例。当我在 Visual Studio 中调试应用程序时，一切看起来都很好，并且 Surface 控件按预期加载。

当我在单独的 Windows 7 平板设备上运行该应用程序时，不会加载所有 Surface 特定的控件，并且它们看起来好像它们的可见性属性设置为隐藏。

我添加的 Surface dll 引用是 Microsoft.Surface.Core 和 Microsoft.Surface.Presentation。我还需要其他参考吗？

我使用的 SDK 版本[http://www.microsoft.com/en-us/download/details.aspx?id=26716](http://www.microsoft.com/en-us/download/details.aspx?id=26716)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:55:37.083

您需要确保 Win7 平板电脑已安装[Surface Runtime](http://download.microsoft.com/download/4/4/E/44E7A6B8-7F51-4B1B-A5FF-B02E4C8F2BA7/SurfaceRuntime.msi)。

# javascript - 为什么“未定义”==未定义不是真的？

> ID：10691833
> 
> 赞同：5
> 
> 时间：2012-05-21T20:03:42.273
> 
> 标签：javascript, undefined, equality

`==`接线员真的很有趣。它[通常不会](https://stackoverflow.com/questions/4567393/why-do-alert0-and-alertfalse-0-both-output-true-in-javascript)像人们想象的那样行事。

这使我确切地调查了冰山一角下面发生的事情，根据[MDN](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Comparison_Operators)的说法如下：

> 如果两个操作数的类型不同，JavaScript 会转换操作数，然后应用严格比较。如果任一操作数是数字或布尔值，则尽可能将操作数转换为数字；否则，如果任一操作数是字符串，则尽可能将另一个操作数转换为字符串。如果两个操作数都是对象，那么当操作数引用内存中的同一个对象时，JavaScript 会比较相等的内部引用。

[[（资源）](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Comparison_Operators)]

那么，为什么不`"undefined" == undefined`评估为真呢？

不应该根据这个描述`undefined`转换为`"undefined"`然后返回true吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-21T20:06:16.920

`"undefined"`有一个价值。它是 9 个字母：未定义。因此，字符串“undefined”没有*未定义*的值。`String`javascript中的A*可以*有一个未定义的值，但这里的`String`对象有一个定义的值，恰好拼写为“未定义”。

使用您提供的解释，`undefined`右侧的值将转换为`String`未分配值的对象，然后与`String`“未定义”进行比较，比较失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T20:29:31.013

对于这类问题，值得回到源头：[ECMAScript 5.1 规范](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)。第 11.9.3 节完整描述了双等号会发生什么：

1.  如果 Type(x) 与 Type(y) 相同，那么 // 一些规则
2.  如果 x 为 null 且 y 未定义，则返回 true。
3.  如果 x 未定义且 y 为空，则返回 true。
4.  如果 Type(x) 是 Number 并且 Type(y) 是 String，则返回比较结果 x == ToNumber(y)。
5.  如果 Type(x) 是 String 并且 Type(y) 是 Number，则返回比较结果 ToNumber(x) == y。
6.  如果 Type(x) 是 Boolean，则返回比较 ToNumber(x) == y 的结果。
7.  如果 Type(y) 是 Boolean，则返回比较结果 x == ToNumber(y)。
8.  如果 Type(x) 是 String 或 Number 且 Type(y) 是 Object，则返回比较结果 x == ToPrimitive(y)。
9.  如果 Type(x) 是 Object 并且 Type(y) 是 String 或 Number，则返回 ToPrimitive(x) == y 的比较结果。
10.  返回假。

由于在这种情况下 Type(x) is`string`和 Type(y) is `undefined`，规则规定结果应该为假。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T20:10:13.533

`undefined`是内置类型的javascript中的原始内置值`Undefined`。并且在 javascript 中进行诸如`x == undefined`, 之类的比较具有特殊含义：它检查变量是否尚未定义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T20:18:36.963

`"undefined"`从字面上看是 a`string`并且`undefined`是`object`. `nothing`我认为它使用or `""`or投射右侧操作数`an empty string`。所以`"undefined" == null`返回`false`。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-21T20:08:42.020

`undefined`是一个特殊的 javascript 关键字，以下是检查未定义变量/属性的方法。

```
var a = undefined;

//if( a == undefined ) 

//if( a === undefined ) 
```

# apache - Apache2 - 如何跟踪导致所有 4 个内核上的最大 cpu 的脚本

> ID：10691834
> 
> 赞同：2
> 
> 时间：2012-05-21T20:03:47.700
> 
> 标签：apache

阿帕奇菜鸟在这里。我有一个安装了 debian 挤压和 apache 的 virtualbox 实例。我看到我的所有 4 个核心最多输出大约 10 分钟，然后它就消失了。这种情况每周发生几次。当我能够加载顶部时，我可以看到 apache 进程已满。

/usr/sbin/apache2 -k 开始

当我检查访问日志时，我没有看到大量的流量。我上周安装了 mod_evasive，以为它们可能是 ddos​​ 或 bot 在登录页面上进行攻击，但我在日志中看不到。我怀疑某处可能有一些糟糕的php代码。我将如何去追踪它可能在哪里？

Web 服务器托管了大约 4 个小型企业的 wordpress 站点和另一个具有大约 10 个用户的 php 应用程序。

我确保我已经更新了 debian。我在最新的 wordpress 上运行。

# objective-c - 为什么 NSArray 不为不存在的索引返回 NULL？

> ID：10691839
> 
> 赞同：5
> 
> 时间：2012-05-21T20:04:18.763
> 
> 标签：objective-c, cocoa, nsarray

我理解它的方式，Objective C 的特别之处之一是您可以将消息发送到 NULL，它只会忽略它们而不是崩溃。

如果请求的索引超出范围而不是导致 NSRangeException，为什么 NSArray 不只是返回 NULL 对象？

我对 Objective C 和 NSArray 的期望如下。

```
NSArray *array = [NSArray arrayWithObjects:@"Object 1", @"Object 2", @"Object 3", nil];

for (int i = 0; i < 5; i++) {
    NSString *string  = [array objectAtIndex:i];

    if (string) {
        NSLog(@"Object: %@",string);
    }
} 
```

允许我使用不包含对象并简单地返回 NULL 来访问数组的索引。然后我可以检查对象是否存在。我可以在其他地方执行此操作，例如检查对象是否已实例化。

```
NSArray *array;

if (!array) {
    array = [NSArray array];
} 
```

我意识到这是一个基于理论的问题，但我很好奇:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-21T20:12:04.920

Messages to nil 是语言级别的功能，而不是框架 API 功能。

那个`NSArray`（和其他类）抛出异常以指示程序员错误是在设计 API 时（~1993 年）做出的有意识的设计决定。正如 Kevin 和 Richard 所指出的，`nil eats message`无论如何都不是错误的，而`out of bounds`在很大程度上是错误输入的情况。

你会在哪里画线？应该`substringWithRange:`接受任何旧的输入吗？怎么样`setObject:atIndex:`？

通过使 NSArray @throw on bounds 异常，`indexOfObject:`它使 API 保持一致； *任何超出范围的索引（或范围）都将`@throw`*.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T20:12:39.490

您可以使用 an`NSMutableDictionary`来完成您正在尝试做的事情。将键设置为`NSNumber`索引。调用`objectForKey`不存在的键（超出我们想象的界限或已删除）将返回 nil。

# c++ - 如何将 wstring 转换为 char 数组或使用 C++ 进行比较

> ID：10691845
> 
> 赞同：0
> 
> 时间：2012-05-21T20:04:38.357
> 
> 标签：c++, winapi, visual-c++

我尝试了不同的方法，但似乎不起作用。请帮我。

```
 wstring strname  =  "C:\\Users\\projects\\app.exe";
    char processName[] = "newapp.exe"; 
```

我必须从 strname 获取**app.exe**并将其与 processName(newapp.exe) 进行比较

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T20:17:11.440

1.  `strname`从using中提取文件名`_wsplitpath`并将其存储在另一个 wstring 中。
2.  使用`MultiByteToWideChar`或`mbstowcs`转换`processName`为宽字符串。
3.  相比。

# c# - 从父任务访问嵌套任务的结果

> ID：10691848
> 
> 赞同：0
> 
> 时间：2012-05-21T20:04:53.877
> 
> 标签：c#, .net, task-parallel-library, task

我目前正在探索 TPL，我想知道以下情况是否可能：

我想创建一个嵌套结构，其下有一个父任务和多个“子”任务。

结构与此类似：

```
Parent Task
    |
    |-- Child Task A
    |-- Child Task B 
    |-- ... 
```

我希望父任务等待所有子任务完成，并访问它们的结果（以确定自身的结果）。

我找不到任何有关嵌套任务和从父级访问其结果的有价值信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:30:16.423

一种方法是[`Task.WaitAll`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.waitall.aspx)在父任务中使用静态方法来等待所有子任务完成，然后检查它们各自的`Status`属性`Result`。

如果在所有子任务完成之前父任务根本没有工作，您可以重组它并在所有子任务完成后使用它[`TaskFactory.ContinueWhenAll`](http://msdn.microsoft.com/en-us/library/dd321258.aspx)来启动新任务。然后可以访问各个结果。

# rest - Google Analytics API 的问题

> ID：10691850
> 
> 赞同：0
> 
> 时间：2012-05-21T20:05:05.940
> 
> 标签：rest, google-analytics, oauth-2.0

我正在尝试使用 Google (Analytics) 的 REST Web 服务 API，但我得到了一个毫无意义的响应，而不是来自 Google Analytics 的预期数据。

这是我的请求和相应的响应：

```
GET /auth/analytics.readonly?ids=ga:12660456&start-date=2012-01-01&end-date=2012-02-02&metrics=ga:visits HTTP/1.1
Host: www.googleapis.com
Authorization: OAuth ya29.mytokenhere

HTTP/1.1 200 OK
status: 200
content-length: 18
x-xss-protection: 1; mode=block
content-location: https://www.googleapis.com/auth/analytics.readonly?ids=ga:12660456&start-date=2012-01-01&end-date=2012-02-02&metrics=ga:visits
x-content-type-options: nosniff
x-google-cache-control: remote-fetch
expires: Mon, 21 May 2012 19:52:57 GMT
server: GSE
via: HTTP/1.1 GWA
cache-control: private, max-age=0
date: Mon, 21 May 2012 19:52:57 GMT
x-frame-options: SAMEORIGIN
content-type: text/plain
-content-encoding: gzip

analytics.readonly 
```

有人可以帮忙吗？

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:15:39.837

OAuth 不是通过请求身份验证范围 URL 来执行的，就像您似乎正在做的那样。Google 的身份验证范围完全是 URL 的唯一原因是（AFAIK），因此可以保证它们是全球唯一的。

有关如何在此处使用 Google 执行 OAuth 2.0 的更多详细信息：[https ://developers.google.com/accounts/docs/OAuth2](https://developers.google.com/accounts/docs/OAuth2)

# android - ContentProvider 如何调用方法

> ID：10691854
> 
> 赞同：1
> 
> 时间：2012-05-21T20:05:20.837
> 
> 标签：android, android-contentprovider

我有一个 contentprovider，我正在使用它。在 contentProvider 中，我调用了 oncreate() 中的一个方法，它为内容提供者设置了很多默认值。我正在为每个条目使用另一个表的内容提供程序。因此，当我在另一个表中创建一个新条目时，我想覆盖内容提供者的设置。如何在 contentProvider 中调用设置默认值的方法？由于没有再次调用 onCreate，因此我没有获得默认设置。

我也考虑过以下方法，但这似乎也很困难。

是否可以一般复制一行的所有列并仅更改一列？我想指定应该替换的列，而不是所有其他列...

正如我所提到的，我想插入默认值，所以我不打算复制太多行，这将是糟糕的数据库设计。

示例表 MyFavorites blob bla, String link, ....., String nameToReplace, ...

假设我有 20 列。我想复制任何东西，我只想将名称更改为Replace。

此致，

帕特里克

# c# - Silverlight 中的 FrameworkPropertyMetadataOptions

> ID：10691856
> 
> 赞同：2
> 
> 时间：2012-05-21T20:05:26.533
> 
> 标签：c#, xaml, binding, silverlight-5.0

Silverlight 5 中是否有等效的 FrameworkPropertyMetadataOptions？

我希望能够从我的用户控件中强制进行双向绑定，如下所示：

```
public static readonly DependencyProperty SelectedItemProperty = 
DependencyProperty.Register("SelectedItem",
    typeof(object),
    typeof(SearchableGridView),
    new FrameworkPropertyMetadata(null,
        FrameworkPropertyMetadataOptions.BindsTwoWayByDefault,
        new PropertyChangedCallback(OnSelectedItemChanged))); 
```

Telerik 有一个实现 - 但我不想使用 Telerik 进行此控制。

强制双向绑定背后的基本原理是因为我将从我的代码中分配 SelectedItem，所以如果有人错误地绑定到它 OneWay - 我的分配会破坏绑定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:28:28.093

AFAIK，没有这样的等价物。即使在 SL 5 中。

# javascript - 覆盖 .fetch() 适用于虚假数据、urlRoot 错误和实际模型 ajax 请求

> ID：10691860
> 
> 赞同：0
> 
> 时间：2012-05-21T20:06:08.950
> 
> 标签：javascript, model-view-controller, backbone.js, coffeescript, marionette

我很困惑 - 我以为我的模型绑定工作正常，但它只是一个带有伪造 ajax 请求的 jsFiddle。我已将模型绑定到视图，如果我覆盖`.fetch()`并伪造响应，一切正常（我可以更新模型并在页面上更新视图）。但是，当我*不*覆盖`.fetch()`并使用`urlRoot`参数并等待响应时，我会收到错误。

`.fetch()`这是工作的 jsFiddle，在使用伪造的响应调用后呈现模型，而不是更改：

[http://jsfiddle.net/franklovecchio/FkNwG/182/](http://jsfiddle.net/franklovecchio/FkNwG/182/)

所以如果我在服务器端有一个 API 调用：

`/thing/:id`

有一个示例响应`/thing/1`：

```
{"id":"1","latitude":"lat1","longitude":"lon1"} 
```

我注释掉`.fetch()`，我得到控制台错误：

```
load js core functions core.js:2
init model timeout app.js:114
initializer callback for history, routes app.js:95
App.Layouts.MyLayout onShow app.js:41
App.Regions.MyRegion onShow app.js:25
App.Models.Thing init app.js:55
App.ItemViews.Thing init app.js:87
Uncaught TypeError: Object #<Object> has no method 'toJSON' backbone.marionette-0.8.1.min.js:9
Parsing App.Models.Thing.fetch() response: {"id":"1","latitude":"lat1","longitude":"lon1"} app.js:62
Thing: {"id":"1","latitude":"lat1","longitude":"lon1"} app.js:66
a Thing has changed, update ItemView! app.js:57

Uncaught TypeError: Cannot call method 'render' of undefined app.js:58

update model app.js:108

Uncaught TypeError: Object #<Object> has no method 'set' 
```

`.fetch()`注释掉的代码：

```
window.App = { }
window.App.Regions = { } 
window.App.Layouts = { }
window.App.Models = { } 
window.App.ItemViews = { } 
window.App.Rendered = { } 
window.App.Data = { }

# ----------------------------------------------------------------
# App.Regions.MyRegion
# ----------------------------------------------------------------

class MyRegion extends Backbone.Marionette.Region
  el: '#myregion'   
  onShow: (view) ->
    console.log 'App.Regions.MyRegion onShow'

App.Regions.MyRegion = MyRegion

# ----------------------------------------------------------------
# App.Layouts.MyLayout
# ----------------------------------------------------------------

class MyLayout extends Backbone.Marionette.Layout
  template: '#template-mylayout'  
  regions:
    contentRegion: '#content'
    anotherRegion: '#another'
  onShow: (view) ->
    console.log 'App.Layouts.MyLayout onShow'

App.Layouts.MyLayout = MyLayout

# ----------------------------------------------------------------
# App.Models.Thing
# ----------------------------------------------------------------

class Thing extends Backbone.Model

  urlRoot: () ->
    '/thing'

  initialize: (item) ->
    console.log 'App.Models.Thing init'
    @bind 'change', ->
      console.log 'a Thing has changed, update ItemView!'
      @view.render()

  parse: (resp) ->
    console.log 'Parsing App.Models.Thing.fetch() response: ' + JSON.stringify resp
    @attributes.id = resp.id
    @attributes.latitude = resp.latitude
    @attributes.longitude = resp.longitude
    console.log 'Thing: ' + JSON.stringify @
    @

  # If I don't override, I get an error.
  ###fetch: () ->
    console.log 'override ajax for test - App.Models.Thing.fetch()'
    resp =
      id: 1
      latitude: 'lat1'
      longitude: 'lon1'
    console.log 'Faked Thing response: ' + JSON.stringify resp
    @parse resp###

App.Models.Thing = Thing

# ----------------------------------------------------------------
# App.ItemViews.Thing
# ----------------------------------------------------------------

class Thing extends Backbone.Marionette.ItemView
  template: '#template-thing'
  initialize: (options) ->
    console.log 'App.ItemViews.Thing init'
    # Bind
    @options.model.view = @

App.ItemViews.Thing = Thing

# ----------------------------------------------------------------
# App.MyApp ...the Marionette application
# ----------------------------------------------------------------

App.MyApp = new Backbone.Marionette.Application()

# ----------------------------------------------------------------
# App.MyApp before init
# ---------------------------------------------------------------- 

App.MyApp.addInitializer (data) ->
  console.log 'initializer callback for history, routes'

  App.Rendered.myRegion = new App.Regions.MyRegion
  App.Rendered.myLayout = new App.Layouts.MyLayout

  App.Rendered.myRegion.show App.Rendered.myLayout

  # GET thing
  App.Data.thing = new App.Models.Thing(id: 1)
    .fetch()

  App.Rendered.thingView = new App.ItemViews.Thing(model: App.Data.thing)
  App.Rendered.myLayout.contentRegion.show App.Rendered.thingView

# ----------------------------------------------------------------
# Test
# ----------------------------------------------------------------

App.updateModel = ->
  console.log 'update model'

  # Update the Thing with id = 1
  App.Data.thing.set
    latitude: 'somenewlat'

App.updateModelTimeout = ->
  console.log 'init model timeout'
  setTimeout 'App.updateModel()', 2000

App.updateModelTimeout()

$ ->
  data = { }
  App.MyApp.start data

​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T21:14:41.507

这里发生了很多奇怪和困惑的事情。不要害怕，一切都还没有丢失，混乱可以解决。

Backbone[`fetch`](http://backbonejs.org/#Model-fetch)应该返回 a `jqXHR`，而不是模型本身。您的`fetch`实现错误地返回`@parse resp`并且您的[`parse`](http://backbonejs.org/#Model-parse)返回`@`（这也是不正确的，有时两个错误确实是正确的）。结果是这样的：

```
App.Data.thing = new App.Models.Thing(id: 1).fetch() 
```

`App.Data.thing`当你使用你的时会给你一个有用的，`fetch`但它不会与 Backbone's 一起使用`fetch`。所以你`fetch`的坏了，你没有`fetch`正确使用；然后您尝试将`jqXHR`视图作为模型提供给您的视图，并且您的视图设置在模型`@view`上`jqXHR`而不是模型上：

```
initialize: (options) ->
  #...
  @options.model.view = @ 
```

因此，您最终得到了一个`view`属性，`jqXHR`但模型没有`@view`（因为`App.Data.thing`不是模型），并且您在模型的更改处理程序中收到“无法调用未定义的方法'render'”错误。

你应该这样做：

```
App.Data.thing = new App.Models.Thing(id: 1)
App.Data.thing.fetch() 
```

现在到你的`parse`：

```
parse: (resp) ->
  console.log 'Parsing App.Models.Thing.fetch() response: ' + JSON.stringify resp
  @attributes.id = resp.id
  @attributes.latitude = resp.latitude
  @attributes.longitude = resp.longitude
  console.log 'Thing: ' + JSON.stringify @
  @ 
```

来自[精美手册](http://backbonejs.org/#Model-parse)：

> **每当服务器返回模型的数据时，在*fetch*和*save中都会调用***parse**。该函数传递原始`response`对象，并应返回要在模型上*设置的属性哈希。***

 **所以`parse`只是应该将服务器的响应按摩成可以[`set`](http://backbonejs.org/#Model-set)在模型上的东西。您`parse`正在设置属性并返回`@`. 结果是你最终会做相当于`m.set(m)`. 所以摆脱你的`parse`实现，你的是不正确的，你甚至不需要一个。

您的模型/视图连接是向后的：视图参考模型，模型不参考视图。你的模型中有这个：

```
initialize: (item) ->
  console.log 'App.Models.Thing init'
  @bind 'change', ->
    console.log 'a Thing has changed, update ItemView!'
    @view.render() 
```

在您看来，这是：

```
initialize: (options) ->
  console.log 'App.ItemViews.Thing init'
  # Bind
  @options.model.view = @ 
```

您应该在创建模型时将模型传递给视图（您可以这样做）：

```
App.Rendered.thingView = new App.ItemViews.Thing(model: App.Data.thing) 
```

然后视图应该绑定到模型：

```
initialize: (options) ->
    @model.on('change', @render) 
```

`initialize`你可以在你的模型中删除实现。

此外，您可以（并且应该）直接在命名空间中声明类，不要这样做：

```
class Thing extends Backbone.Marionette.ItemView
  #...
App.ItemViews.Thing = Thing 
```

做这个：

```
class App.ItemViews.Thing extends Backbone.Marionette.ItemView
  #... 
```

[`setTimeout`](https://developer.mozilla.org/en/DOM/window.setTimeout)此外，几乎不应该使用 is evil的 string/eval 形式。不要这样做：

```
setTimeout 'App.updateModel()', 2000 
```

做这个：

```
setTimeout (-> App.updateModel()), 2000 
```

可能还有更多，但希望这能让您开始并解决您的直接问题。**

# debugging - MATLAB：在调试模式下使用“退出”会破坏 matlab.mat 文件

> ID：10691863
> 
> 赞同：0
> 
> 时间：2012-05-21T20:06:23.707
> 
> 标签：debugging, matlab

Matlab 7.12 2011a，我有一个`finish.m`文件。当我在正常情况下调用`quit`或`exit`从命令窗口调用时，一切都很好。但是如果我处于调试模式，在命令窗口中工作（提示现在`K>>`）并输入`exit`，我现有的 matlab.mat 数据文件将被删除并替换为 Matlab 无法打开的 1k 文件。编辑：不能重复这种腐败。matlab.mat 文件确实包含调试环境的内容（仅此而已）。

我知道退出调试的正确命令是`dbquit`. 我的问题是为什么 Matlab 允许我`exit`在我不在家庭环境中时使用 - 或者为什么 Matlab 不将其重新映射到`dbquit`，以避免这种灾难性的数据丢失。

编辑：这是我的`finish.m`代码。
disp('保存工作区数据');
保存
保存(sprintf('mat_%s',date));

`exit`在调试器内部调用会导致`finish.m`保存函数工作区的内容（而不是父环境）。当你测试这个`exit`调用时，你的主环境真的被保存了吗？

# jquery - 无法使用 JQuery 且 CSS 功能非常有限时的固定表头策略

> ID：10691864
> 
> 赞同：0
> 
> 时间：2012-05-21T20:06:27.437
> 
> 标签：jquery, html, css

嗨，我需要一个固定表头的策略，

以下是对我不起作用的策略，主要是因为某些功能限制：

*   复制标题并根据滚动顶部移动标题

（我遇到的这个问题是因为标题中的输入文本。当我克隆标题时，它也会克隆输入表单，服务器端总是得到错误的会话值。）

*   使用 overflow-y 并让内容滚动

（这个问题是因为单元格大小，一些单元格大小取决于标题的大小。因此，当我执行位置：绝对时，单元格的大小与标头。确实考虑分配固定长度，因为单元格是动态生成的）

PS：不要问我为什么不使用jQuery插件，我必须在遗留代码之上编写代码。我显然已经没有想法了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:18:53.853

**编辑：**

[参考这个](http://www.imaputz.com/cssStuff/bigFourVersion.html/)（不是我的建议）

这对我有用（在 chrome 和 firefox 上）。我想这是非常糟糕的方法，但值得分享。

**标记：**

```
<table>
        <thead>
            <tr><th>head1</th><th>head2</th></tr>
        </thead>
        <tbody>
            <tr><td>row1 col1</td><td>row1 col2</td></tr>
            <tr><td>row2 col1</td><td>row2 col2</td></tr>
        </tbody>
    </table> 
```

**CSS：**

```
 table{
        height:2000px;
    }
    thead tr {
         position:fixed;
         left:0;
         top:0;
    } 
```

* * *

**编辑**（评论后）

**标记：**

```
<div id='wrapper'>
        <table>
            <thead>
                <tr><th>head1</th><th>head2</th></tr>
            </thead>
            <tbody>
                <tr><td>row1 col1</td><td>row1 col2</td></tr>
                <tr><td>row2 col1</td><td>row2 col2</td></tr>
            </tbody>
        </table>
    </div> 
```

**CSS：**

```
#wrapper{
        height:500;
        overflow:scroll;
        width:400px;
        margin:0 auto;
        background:Gray; 
    }
    table{
        height:2000px; 
    }
    thead tr {
        position:fixed; 
        top:0;
    } 
```

# oracle - 在 oracle 8i 中批量导出

> ID：10691872
> 
> 赞同：0
> 
> 时间：2012-05-21T20:06:54.067
> 
> 标签：oracle, oracle8i

如何使用可以通过 oracle cli 运行的命令从 Oracle 8i 数据库中导出数据？我最大的问题是，数据应该根据我使用的查询导出......例如，

`select * from emp where emp_id>4`

应该转储具有**emp_id>4**的记录。

我没有使用函数的权限。请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T20:35:20.083

Oracle 提供了一组专门用于导出数据的工具（例如 exp 工具）。尽管它们确实通过 NET*8 连接，但它们并不通过 SQL*PLUS 命令行运行（我假设这就是 CLI 的意思）。从 Oracle 8i 开始，您可以使用查询参数来限制导出的行：

`exp scott/tiger tables=emp query="where deptno=10"`

但是您必须安装 Oracle 客户端并能够通过 SQL*NET 连接到数据库。

如果您只有运行查询的能力，那么您就不走运了，除非您可以编写一个生成 CSV 的查询（如果您没有调用/编写函数的能力，那就很棘手了）。在我看来，您可以访问的只是一个 Web 界面。

# c# - 检测计算机上是否启用了链接层拓扑

> ID：10691874
> 
> 赞同：4
> 
> 时间：2012-05-21T20:07:11.867
> 
> 标签：c#, networking

我们的支持团队已诊断出计算机配置的某些特定区域，这些区域可能会导致我们基于网络的数据库应用程序运行缓慢。我的任务是创建一个工具来测试可能的放缓问题。我在检测是否在 Windows 中为其活动网络适配器启用了链接层拓扑时遇到问题。我有一种查找活动（最常用）网络适配器的方法。

有没有办法检测链接层拓扑以及如何测试它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T22:06:57.010

不是纯 .Net 解决方案，但似乎可行。函数接受本地连接的名称和协议名称。我有一个指向具有许多不同协议驱动程序名称的站点的链接，但是您想要的那些都包含在代码中。

这使用 nvspbind.exe，您可以从[http://archive.msdn.microsoft.com/nvspbind](http://archive.msdn.microsoft.com/nvspbind)获得它。

***代码***

```
class Program
{
    static void Main(string[] args)
    {
        //check Link-Layer Topology Discover Mapper I/O Driver
        bool result1 = IsProtocalEnabled("Local Area Connection", "ms_lltdio");
        //check Link-Layer Topology Discovery Responder
        bool result2 = IsProtocalEnabled("Local Area Connection", "ms_rspndr");
    }

    private static bool IsProtocalEnabled(string adapter, string protocol)
    {
        var p = new System.Diagnostics.Process();
        p.StartInfo.UseShellExecute = false;
        p.StartInfo.RedirectStandardOutput = true;
        p.StartInfo.FileName = System.IO.Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "nvspbind.exe");
        p.StartInfo.Arguments = string.Format("/o \"{0}\" {1}", adapter, protocol);

        p.Start();

        string output = p.StandardOutput.ReadToEnd();

        p.WaitForExit();

        return output.Contains("enabled");
    }
} 
```

我从这里得到协议驱动程序名称：http: [//djseppie.wordpress.com/category/windows/scripting/](http://djseppie.wordpress.com/category/windows/scripting/)

# css - IE 复选框周围有 9 条虚线

> ID：10691876
> 
> 赞同：3
> 
> 时间：2012-05-21T20:07:26.173
> 
> 标签：css, internet-explorer-9

IE 9 和更早版本的 IE 浏览器在我的复选框周围放置虚线时出现问题。似乎想调用 post textarea 并 post input 在复选框周围添加边框，然后调用 post input focus 并在其周围放置背景。

即使我将边框 0px 放在后期输入中，虚线也不会消失。没有其他浏览器 FF，chrome 这样做....与复选框 .reset 文件无关

IE 9 中的图像：http: [//i46.tinypic.com/hvqj2g.png](http://i46.tinypic.com/hvqj2g.png)

代码调用：http: [//i46.tinypic.com/30ic1f5.png](http://i46.tinypic.com/30ic1f5.png)

```
#post textarea,
#post input {
    border:1px solid #ddd;
}
#post textarea:focus {
     outline: none;
     ie-dummy: expression(this.hideFocus=true);
   }
#post input:focus {
    -moz-box-shadow: 0px 0px 0px 2px #eee ;
    -webkit-box-shadow: 0px 0px 0px 2px #eee ;
    box-shadow: 0px 0px 0px 2px #eee ;
    background: #fefcbe;
    -webkit-transition: all .5s ease-in-out;
    -moz-transition: all .5s ease-in-out;
    transition: all .5s ease-in-out;
}

#post input#submit-btn{
    background: #eee;
    color:#444;
    text-shadow: 1px 1px 1px #fff;
}

Any ideas for IE 9? 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-22T04:44:46.017

虚线是“焦点矩形”，不幸的是，在浏览器中实现的可用性功能不一致。正如您在评论中所说，如果您`outline: none`在元素上设置它会消失；从技术上讲，焦点矩形是浏览器默认样式表的轮廓。这意味着，除其他外，使用 Tab 键在页面内移动的人（可能因为他必须这样做）将看不到那里的任何焦点指示符，即看不到他在哪里。

根据 IE 9 的状态（Quirks 模式与“标准”模式），焦点矩形出现在复选框周围或相关标签周围。以上评论适用于“标准”模式。

如果不知道您的意思并且无法访问代码，则无法解决根据您的评论“它就像一个文本框”的问题。请发布实际代码或代码 URL，而不是包含代码片段图像的屏幕截图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T10:36:39.690

为我工作：

```
element:focus{
 outline: thin transparent;
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-21T20:16:40.237

尝试在您的 HTML 元素中使用一些 javascript：

```
<input onclick="this.blur()" /> 
```

# php - 如何退出 iframe

> ID：10691877
> 
> 赞同：1
> 
> 时间：2012-05-21T20:07:29.760
> 
> 标签：php, html

**1.html**

```
<form id="abc" method="post" action="navigate.php">
<input type="radio" name="nav" value="a1" /> A 1
<input type="radio" name="nav" value="a2" /> A 2
<input type="radio" name="nav" value="b1" /> B 1
<input type="radio" name="nav" value="b2" /> B 2
<input type="radio" name="nav" value="c1" /> C 1
<input type="radio" name="nav" value="c2" /> C 2
<input type="submit" name="submit" value="Go" />
</form> 
```

**导航.php**

```
<?
if ($_POST['nav']==a2) {
    echo "<meta http-equiv=\"refresh\" content=\"0;URL=page_1.php\">";} ?> 
```

**2.html**

```
<iframe src="1.html"/> 
```

当我选择 a2 并按 go 时，它会转到 page_1.php 但在框架内。我希望主窗口转到 page_1.php。这个有什么解决办法吗？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T20:13:07.000

您可以使用表单标签的目标属性来确定提交应该定位到的框架/窗口。在您的情况下，使用 target="_top" 在顶部框架（主窗口）中打开结果

```
<form id="abc" method="post" target="_top" action="navigate.php">
<input type="radio" name="nav" value="a1" /> A 1
<input type="radio" name="nav" value="a2" /> A 2
<input type="radio" name="nav" value="b1" /> B 1
<input type="radio" name="nav" value="b2" /> B 2
<input type="radio" name="nav" value="c1" /> C 1
<input type="radio" name="nav" value="c2" /> C 2
<input type="submit" name="submit" value="Go" />
</form> 
```

问题是它在所有情况下都会在顶部框架（窗口）中打开，因此与您选择的单选按钮的值无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T20:13:34.377

根据您的文档类型，您可以在元素上包含`target`属性，`form`就像在元素中一样`a`。像这样的东西：

```
<form id="abc" method="post" action="navigate.php" target="_parent"> 
```

这将在 iframe 上方的框架中显示结果响应，这可能是窗口。或确保整个窗口：

```
<form id="abc" method="post" action="navigate.php" target="_top"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T20:14:22.300

您可以使用[target="_top"](http://www.w3schools.com/tags/att_form_target.asp)：

```
<form id="abc" method="post" action="navigate." target="_top"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T20:13:32.953

尝试使用一些javascript，如：

```
<script>

( window.parent || window ).location = "LOCATION_HERE.PHP";

</script> 
```

# tomcat - 如何在 Linux 中配置 Tomcat 6.x 日志记录以充当 Tomcat Windows 服务

> ID：10691880
> 
> 赞同：0
> 
> 时间：2012-05-21T20:07:33.290
> 
> 标签：tomcat, logging, tomcat6

我们公司的 web 应用程序目前会生成日志消息（通过 System.out），稍后其他程序会自动分析这些消息。

作为 Windows 服务，tomcat 巧妙地将日志生成到其“日志”目录，每天进行分区。

问题在于，在 linux 中，所有内容都进入标准输出，可能会被重定向，而不是在日常文件中拆分。

我在 conf/context.xml 中尝试了一个选项：“<Context speakOutput=true ...”，但输出到 catalina.out，未拆分，并带有不方便的行注释。

简而言之：如何在 linux 中配置 tomcat 6.0 来处理 System.out，就像它作为 Windows 服务一样。

提前致谢 - Artejera

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:29:52.587

据我所知，*NIX 和 win32 上的 Tomcat 的行为方式相同：stdout 被重定向到未旋转的文件。在将 Tomcat 安装为服务时，您是使用 Tomcat 安装程序（安装 procrun）还是使用其他程序来设置您的服务？

在您的 Linux 环境中，您是使用 bin/catalina.sh 启动 Tomcat，还是使用 jsvc 或其他方式？每个启动策略的选项都不同。

如果您考虑使用 jsvc 启动 Tomcat，您可以将 SIGUSR1 发送到 jsvc 进程，以使其重新打开日志文件。这样，您可以让一个 cron 作业或类似的东西执行以下操作：

```
$ mv $CATALINA_BASE/logs/catalina.out $CATALINA_BASE/logs/catalina-`date -I`.out
$ kill -SIGUSR1 $CATALINA_PID 
```

这应该重新打开 catalina.out 并实现您正在寻找的旋转。

如果您必须坚持使用 bin/catalina.sh，那么您可以破解该文件，以便将标准输出通过管道传输到 chronolog 等日志服务中，该服务可以为您轮换日志文件。

# ruby-on-rails - 这个 Rails 项目中的 Web 会话是如何工作的？

> ID：10691885
> 
> 赞同：0
> 
> 时间：2012-05-21T20:08:32.317
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api, fb-graph

简介：我正在构建一个自动祝生日快乐的 Facebook 应用程序。我在 Rails 中构建它并使用名为[fb_graph](https://github.com/nov/fb_graph)的 ruby​​ API 包装器。fb_graph 的创建者慷慨地提供了一个工作示例应用程序[fb_graph_sample](https://github.com/nov/fb_graph_sample)

在玩弄它之后，我不明白会话/cookies 是如何工作的。例如，查看以下代码：

```
def require_authentication
  authenticate Facebook.find_by_id(session[:current_user])
rescue Unauthorized => e
  redirect_to root_url and return false
end

def authenticate(user)
  raise Unauthorized unless user
  session[:current_user] = user.id
end 
```

session[:current_user] 来自哪里？

在 config/initializers/session_store.rb 下，

```
FbGraphSample::Application.config.session_store :cookie_store, :key => '_fb_graph_sample_session' 
```

因此，我查看了 localhost 的 cookie，这是我将其部署为使用 Chrome 检查器工具的地方，我看到 _fb_graph_sample_session 的值、域、路径、过期、大小、http 等...

我仍然看不到 session[:current_user] 是如何产生的？查看 development.sqlite3 文件，facebook 模型只有 1 个数据。id 是 1 所以，这让我相信 [:current_user] 是 1 并且代码正在调用 'authenticate Facebook.find_by_id(1)'

有人可以解释一下 session[:current_user] 如何转换为 1 吗？我阅读了 railstutorial.org 关于登出的章节，它创建了一个会话控制器，但 fb_graph_sample 应用程序中没有会话控制器。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T20:31:29.573

我在身份验证方法中设置：

```
 session[:current_user] = user.id 
```

该应用程序使用基于 cookie 的会话存储，当用户登录时，cookie（将其视为特殊哈希）写入他的浏览器。您几乎可以将会话用作哈希，您可以如上所示设置，或者获取，即

```
<%= "logged in as #{User.find(session[:current_user]).name}" %> 
```

# php - php - 如何检查第二个数组中是否存在第一个数组的至少一个元素

> ID：10691890
> 
> 赞同：20
> 
> 时间：2012-05-21T20:08:56.920
> 
> 标签：php, arrays

我有两个数组：`array("blue", "yellow")`和`array("blue", "green", "red", "purple")`。是否有一个函数可以检查这两个数组是否至少有一个共同的元素值（“蓝色”）——只返回真或假。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-21T20:13:14.937

```
$array1 = array("blue", "yellow");
$array2 = array("blue", "green", "red");

return count(array_intersect($array1, $array2)) > 0; 
```

# sockets - 如何在 Java 中使用套接字和主机名？

> ID：10691892
> 
> 赞同：2
> 
> 时间：2012-05-21T20:09:06.473
> 
> 标签：sockets, ip, hostname, dynamic-ip

最近我不得不更换我的路由器，它是一个 D-Link 的 Belking，我的程序在我的 Belkin 路由器上工作，但现在不能在 D-Link 路由器上工作。

这是我的程序：

客户端：

```
package brainset.socket;

import java.io.IOException;
import java.io.PrintStream;
import java.net.Socket;

/**
 *
 * @author Valter
 */
public class Client {  

    public static void main(String[] args) {  

        Socket s = null;  

        PrintStream ps = null;  

        try{  

            s = new Socket("valterhenrique.dyndns.info", 40000);  

            ps = new PrintStream(s.getOutputStream());  

            ps.println("lamp");  

        }catch(IOException e){  

            System.out.println("Some problem happens.");  
            e.printStackTrace();

        }finally{  

            try{  
                s.close();  
            }catch(IOException e){}  
        }  
    }  
} 
```

这是我的服务器：

```
package brainset.socket;

// imports

public class Server {
    private Supervisory supervisory;

    public Server(Supervisory supervisory) {
        this.supervisory = supervisory;
    }

    public void start() {
        ThreadServer ts = new ThreadServer();
        Thread t = new Thread(ts);
        t.start();
    }

    class ThreadServer extends Thread {

        public void run() {
            ServerSocket ss = null;

            Socket socket = null;

            BufferedReader br = null;

            try {

                ss = new ServerSocket(40000);
                socket = ss.accept();
                br = new BufferedReader(new InputStreamReader(socket.getInputStream()));

                String message;
                while ((message = br.readLine()) != null) {
                    System.out.println("message:" + message);
                    try {
                        if (message.equals("lamp")) {
                            supervisory.active();
                            supervisory.switchLamp();
                        } else if (message.contains("airConditioning")) {
                            String airConditioning[] = message.split(":");
                            // temperature[0] = 'temperature'
                            // temperature[1] = temperature value
                            supervisory.active();
                            supervisory.changeTemperature(Float.parseFloat(airConditioning[1]));
                        }
                    } catch (Exception ex) {
                        Logger.getLogger(Server.class.getName()).log(Level.SEVERE, null, ex);
                    }

                    socket = ss.accept();
                    br = new BufferedReader(new InputStreamReader(socket.getInputStream()));
                }

            } catch (IOException ioe) {

                ioe.printStackTrace();
            } finally {

                try {
                    socket.close();
                    ss.close();

                } catch (IOException ioe) {
                    ioe.printStackTrace();
                }
            }
        }
    }

    public static void main (String args[]){
        Server s = new Server(new Supervisory("192.168.1.149", "192.168.1.255", 101));
        s.start();
    }

} 
```

我已经在我的新路由器中打开了一个端口并更新了 DynDns.org 中的主机名，但仍然不断启动异常：

```
java.net.ConnectException: Connection refused: connect
at java.net.PlainSocketImpl.socketConnect(Native Method)
at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
at java.net.Socket.connect(Socket.java:529)
at java.net.Socket.connect(Socket.java:478)
at java.net.Socket.<init>(Socket.java:375)
at java.net.Socket.<init>(Socket.java:189)
at brainset.socket.Client.main(Client.java:28) 
```

如果我更改主机名“valterhenrique.dyndns.info”，它可以工作，但这不是我想要的，我想使用主机名，因为我在动态 ip 网络中。

任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T20:26:14.150

我认为您需要允许外部访问您的网络。在`Port Forwarding`页面中（在路由器的配置页面中）添加一个条目，将外部请求转发到 LAN 中的特定地址。

# magento - Magento - 将按钮添加到销售订单视图页面（观察者/事件）

> ID：10691895
> 
> 赞同：1
> 
> 时间：2012-05-21T20:09:21.993
> 
> 标签：magento, magento-1.5

我正在尝试在销售订单视图页面（***销售>订单>订单#...视图***）上添加自定义打印按钮（如打印发票）。

我已经使用 a 成功完成了此操作，但现在在同一页面上有两个模块。因此，我正在尝试执行**Observer/Event**方法并且遇到了麻烦。

这就是我为*Mass Action 打印*所拥有的，而且效果很好（仅限上一页（销售 > 订单）。

```
$block = $observer->getEvent()->getBlock();

// Mass Action Printing option
if(get_class($block) =='Mage_Adminhtml_Block_Widget_Grid_Massaction'
     && $block->getRequest()->getControllerName() == 'sales_order')
     {
        $block->addItem('test_mass_print', array(
            'label' => 'Print Test',
            'url' => Mage::app()->getStore()->getUrl('orderforms/order/pdfTest'),
        ));
      } 
```

现在，当我尝试为“**产品视图”**页面添加按钮时（在相同功能下）：

```
// Order View Page button
        if(get_class($block) =='Mage_Adminhtml_Block_Sales_Order_View'
            && $block->getRequest()->getControllerName() == 'sales_order')
        {
            $this->_addButton('test_print', array(
                'label'     => Mage::helper('sales')->__('Test'),
                'onclick'   => Mage::app()->getStore()->getUrl('orderforms/order/print'),
                'class'     => 'go'
            ));
        } 
```

我不断收到这样的错误：

```
Fatal error: Call to undefined method Company_Test_Model_Observer::_addButton() in app/code/local/Company/Test/Model/Observer.php on line 24 
```

我试过了：

*   $block->_addButton
*   $block->_addItem

但似乎没有任何效果。**为什么这不起作用？？？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T16:47:05.263

我发布后解决了一点。我的解决方案如下：

```
// Order View Page button
        if(get_class($block) =='Mage_Adminhtml_Block_Sales_Order_View'
            && $block->getRequest()->getControllerName() == 'sales_order')
        {
            $block->addButton('test_print', array(
                'label'     => 'Test',
                'onclick'   => 'setLocation(\'' . $block->getUrl('html/sales_order/print') . '\')',
                'class'     => 'go'
            ));
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T03:55:02.223

在 Magento 中，任何以下划线开头的类函数都被定义为私有或受保护的——这是核心团队使用的命名约定——所以你不能从类外调用它。这就是 $block->_addButton() 不起作用的原因。

好消息是你可以调用 $block->addButton() （没有下划线）。这是 Mage_Adminhtml_Block_Widget_Container 为您提供的公共方法。

此外，您不能从 $this 调用 addButton()，因为 $this 指向您的观察者类，该类没有定义 addButton() 方法（这就是您的错误所说的）。

# objective-c - CocosDenshion 音乐淡出

> ID：10691897
> 
> 赞同：2
> 
> 时间：2012-05-21T20:09:42.223
> 
> 标签：objective-c, ios, audio, cocos2d-iphone

我在我的游戏中使用 cocos denshion 作为音乐。我目前正在使用代码播放背景音乐：
**[[SimpleAudioEngine sharedEngine] playBackgroundMusic:@"backSong.mp3"];**
但是，当游戏结束时，我需要背景音乐逐渐淡出。我怎样才能淡出背景音乐，有没有办法做到这一点？提前致谢！此外，ObjectAL 是否比 CocosDenshion 更好？如果是这样，有什么区别/优势？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-21T21:08:10.053

尝试这个：

```
float currentVolume = [SimpleAudioEngine sharedEngine].backgroundMusicVolume;
id fadeOut = [CCActionTween actionWithDuration:1 key:@"backgroundMusicVolume" from:currentVolume to:0.0f];
[[[CCDirector sharedDirector] actionManager] addAction:fadeOut target:[SimpleAudioEngine sharedEngine] paused:NO]; 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T20:06:12.043

我发现这样做的唯一方法是安排一个执行方法并相应地更改音量设置，如下所示：

```
-(void) fadeOutBackgroundMusic{
    if (!currentBackgroundMusic_) {
        CCLOG(@"GESoundServicesProviderImpl<fadeOutBackgroundMusic> : No background music at this time, ignoring.");
        return;
    }

    fadeOutActionTickerCount_=0;
    [self schedule:@selector(tickMusicFadeOut:)];

}

-(BOOL) isPlayingBackgroundMusic{
    return isPlayingBackgroundMusic_;
}

#pragma mark sequencing stuff

-(void) tickMusicFadeOut:(ccTime) dt{

    static float fadeTime;
    static float volume;
    static float maxVolume;

    fadeOutActionTickerCount_++;
    if (1==fadeOutActionTickerCount_) {
        isPerformingFadeOutAction_ =YES;
        fadeTime=0.0f;
        volume=0.0f;
        maxVolume=audioSettings_.masterVolumeGain*audioSettings_.musicCeilingGain;

    } else {

        fadeTime+=dt;
        volume=MAX(0.0f, maxVolume*(1.0 - fadeTime/K_MUSIC_FADE_TIME));
        [self setMusicVolume:volume];

        if (fadeTime>K_MUSIC_FADE_TIME) {
            volume=0.0f;                        // in case we have a .000000231 type seting at that moment.
        }

        if (volume==0.0f) {
            CCLOG(@"GESoundServicesProviderImpl<tickMusicFadeOut> : background music faded out in %f seconds.",fadeTime);
            [self setMusicVolume:0.0f];
            [sharedAudioEngine_ stopBackgroundMusic];
            self.currentBackgroundMusic=nil;
            isPlayingBackgroundMusic_=NO;
            isPerformingFadeOutAction_=NO;
            [self unschedule:@selector(tickMusicFadeOut:)];
        }
    }

} 
```

这是来自我的声音服务提供者实现类的简化（编辑）示例（未测试，如此处所示）。一般的想法是为自己安排一个在一段时间内逐渐淡出音乐的方法（这里是一个应用程序范围的常量，K_MUSIC_FADE_TIME）。

# java - .Net RSA 加密、Java RSA 解密

> ID：10691899
> 
> 赞同：2
> 
> 时间：2012-05-21T20:09:52.337
> 
> 标签：java, .net, xml, rsa

我们有一个 .Net 应用程序，它可以加密和解密文本并将其存储在数据库中。我发现 .Net 开发人员已经以 XML 格式存储了 RSA 密钥。当他们完成加密后，文本将使用以下模式存储在数据库中：

```
0D-E4-1D-91-44-2B-B5-3B-03-34...and so on (total of 383 characters) 
```

我们正在将现有的 .Net 应用程序移植到 Java 平台。为此，我想使用现有的编码数据进行解码。

我用 Java 编写了以下代码（从 Internet 复制粘贴 - 我对 RSA 或任何类型的密码学一无所知）

```
public String decryptText (byte[] encryptedText) throws Exception {

    String decryptedText = null;

    if (rsaData != null) {
        byte[] modBytes = Base64.decodeBase64(rsaData.getModulus().trim());
        byte[] dBytes = Base64.decodeBase64(rsaData.getD().trim());

        BigInteger modules = new BigInteger(1, modBytes);
        BigInteger d = new BigInteger(1, dBytes);

        KeyFactory factory = KeyFactory.getInstance("RSA");
        Cipher cipher = Cipher.getInstance("RSA");

        RSAPrivateKeySpec privSpec = new RSAPrivateKeySpec(modules, d);
        PrivateKey privKey = factory.generatePrivate(privSpec);
        cipher.init(Cipher.DECRYPT_MODE, privKey);
        byte[] decrypted = cipher.doFinal(encryptedText);

        decryptedText = new String(decrypted);

    }

    return decryptedText;
} 
```

其中 rsaData = 包含 XML 数据的引用。我的 XML 如下所示：

```
<RSAKeyValue>
<Modulus>
    ynKHV6Tm/tV7ZsTRMLNjMqlAkbftMXA/OkM5zi6+ih371Jgi6ZNX2T4ml0DmK1hojwumHadiX3YoPlaJ/xiys4NRxbDH9VuJJeTdZvoB8heKxACaIw9l1CCTEkx3jYVJ+h6M10fV3wChD0BOtiLg3rMO64LpR2DAGZNbVjXL3h0=
</Modulus>
<Exponent>AQAB</Exponent>
<P>5QUpIuwCOqR03GqI0K7Y4yWn0hvYa7b9RkCA9Y1QQ0IyBqfiTYOT87cKBRsu4FxH6tdY0khfFCskFgumx22gOw==</P>
<Q>4kv69rnEMxSOzmg4ZkAuxrUc6wZCuIJAgSL9gGBFukQSIB6UVWXYhNUDzklcMtGE/lRmwJvwSIlpZBlVtlYthw==</Q>
<DP>ae7LKlYUad+sFlBI3I4j0F2YlL1AjAJmgNpRTEODPrkdvqplKQmVpAOkZNxAAJNuyJe3g/zpzcBuvqvBBzoUBQ==</DP>
<DQ>M+iL27aG+9SWYWBkt4e3cxsuU/burRYrp7OYBK+QrwZYRgfdrK0c+nNGWTZYsMuAvzorC7l5Z5olk7GACMBB1w==</DQ>
<InverseQ>
    UuLEf34YsvFxzgzKhdONvFhsSDRleC5rPR/XvpJl9NEikwXQHTr4547hYM+4soHRdBaiUFdzNtxLMlRW481L1A==
</InverseQ>
<D>
    aNSFYMzzEGJbVAv2htFdPI6H8Ozc1gzZsMG+3RU3dS2xiZR9/5VcmBGmygvBJBDTk77kddaHCgeVLzKAoqeXYJGJgiNQgByE+jQz70HkOaAy0muNbAxLOk9UY6lkJ9kVbtSu1LyR83yj4+kSGNo4T63LBKV07TirAhDMJAk3o8E=
</D>
</RSAKeyValue> 
```

当我通过传入编码文本调用decryptText() 方法时，出现以下错误：

```
Exception in thread "main" javax.crypto.IllegalBlockSizeException: Data must not be longer than 128 bytes
at com.sun.crypto.provider.RSACipher.a(DashoA13*..)
at com.sun.crypto.provider.RSACipher.engineDoFinal(DashoA13*..) 
```

有人可以帮忙解决这个问题吗？或者指向一些有用的链接？

* * *

因此，在挣扎了几个小时后，我做了以下事情：

我在我的 decryptText() 方法中更新了两行，如下所示：

```
KeyFactory factory = KeyFactory.getInstance("RSA");
Cipher cipher = Cipher.getInstance("RSA/ECB/NOPADDING"); 
```

我意识到加密的字符串是十六进制编码的，所以我把它倒过来了。所以原始字符串（删除破折号后）变为：

```
1322829145684318159352601201165341161130212111239120172192552382321681005365571520823020721395242114149106119101747920169161831211748781201152821423521012222201691166150158120221052590252851921052281199918638104578159158115138861911531100176209133541522422481711310198179214164975320920468140732925421720220119120115314722510613321 
```

在反向十六进制之后变成：

```
√§?D+¬µ;4<xt5)¬°?√îo√Øx¬¨√ø√Æ√®¬®d5A9?√¶√è√ï_√≤r?jw¬ÆO√âE¬∑y0Nx?√ñ√´√í?¬©???xiZ√ºU√Äi√§wc¬∫&amp;hN??s?V¬ø?d¬∞√ë?6?√≤√∏¬´√Ü?√ñ?a5√ë√åD?I?√ô√ä√â¬ø√â??√°j? 
```

我将此字符串传递给我上面的decryptText() 方法。我期待一个常规的、合理的人类可读字符串被打印回来，但我得到了以下字符串：

```
&L√ëP   √Ö¬∫√ß‚Äì4√µ‚àÇ√îƒ±)¬¨' √ì.Ô¨Å‚Äî√ò‚Ç¨√ÇÔ£ø√≥ti√∏?R‚Äù√ÄNQ¬∞‚â•Y¬∂BÀöw¬ªR√ºa√ªr>V≈ì&amp;Àô‚óä@√ã¬°.e¬ø‚Äì5 √âP3≈íJj√º&amp;√®ÀõLC√î@≈∏$‚Ä∞=√™y√¥√°zwQ√•{<7 ≈∏R‚ÄòB√Æ√≥√ÖW√éh≈∏y√à[√®R 
```

那么有谁可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:40:24.830

@MartinErnst 最后我得到了答案。我使用了 Bouncy Castle 库并将我的代码更新为以下内容：

```
Security.addProvider(new BouncyCastleProvider());

    DuncanCipherSecond cipherSecond = new DuncanCipherSecond();

    RSAKeyXMLReader rsaKeyXMLReader = new RSAKeyXMLReader();
    InputStream inputStream = new ByteArrayInputStream(rsaKeyInXMLString.getBytes());
    RSAData rsaData = rsaKeyXMLReader.parse(inputStream);

    if (rsaData != null) {
        byte[] expBytes = Base64.decodeBase64(rsaData.getExponent().trim());
        byte[] modBytes = Base64.decodeBase64(rsaData.getModulus().trim());
        byte[] dBytes = Base64.decodeBase64(rsaData.getD().trim());

        String nameFromDB = "8B-FE-BE-28-27-94-0B-32-CE-86-24-9E-F1-DA-86-0F-E1-31-B7-2B-7A-58-2C-E2-3A-6F-05-E9-40-70-48-1D-73-6B-30-E5-95-B9-2A-8A-3F-6E-66-94-DF-8F-7C-11-77-C6-A1-E9-09-04-3B-19-C2-AF-19-CE-EE-22-A3-F9-17-D5-C8-C5-9F-12-F2-C5-72-25-D6-C3-D9-4B-E0-E5-46-19-27-80-9A-11-EC-0F-85-4D-13-0B-94-DB-1B-64-21-95-68-7B-A3-C9-1B-AA-94-E7-26-48-49-BA-CD-97-9D-41-23-1E-B6-F9-26-3C-1E-67-84-98-83-A7-3C-06";
        nameFromDB = nameFromDB.replace("-", "");

        byte[] newNameFromDB = hexStringToByteArray(nameFromDB);

        BigInteger modules = new BigInteger(1, modBytes);
        BigInteger exponent = new BigInteger(1, expBytes);
        BigInteger d = new BigInteger(1, dBytes);

        KeyFactory factory = KeyFactory.getInstance("RSA");
        Cipher cipher = Cipher.getInstance("RSA/None/OAEPWithSHA1AndMGF1Padding", "BC");

        System.out.println("");
        RSAPrivateKeySpec privSpec = new RSAPrivateKeySpec(modules, d);
        PrivateKey privKey = factory.generatePrivate(privSpec);
        cipher.init(Cipher.DECRYPT_MODE, privKey);
        byte[] decrypted = cipher.doFinal(newNameFromDB);
        System.out.println("decrypted: " + new String(decrypted)); 
```

# jquery - 垂直居中 - jQuery

> ID：10691909
> 
> 赞同：0
> 
> 时间：2012-05-21T20:10:33.973
> 
> 标签：jquery, alignment

我有一堆随机高度和宽度的图像，需要垂直和水平居中。

无论出于何种原因，它停止工作。有人可以帮忙吗？我不了解 jQuery（有人给了我代码）。

[图 1](http://christopherburton.net/lettering/h)

[图 2](http://christopherburton.net/typography/nerdie-networks)

```
//jQuery by Juan Mendes
$(window).load(function(){
  var $img = $('img');

  $img.css({'display': 'block',
          'margin-left': '-' + ($img.width() / 2) + 'px',
          'margin-top': '-' + ($img.height() / 2) + 'px'});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:16:01.340

我在 center.js 中添加了一个断点，这表明您在调用时图像没有宽度/高度`$img.css`

为了保证您的脚本在图像加载后运行，您必须使用 onload 处理程序包装它

```
$(window).load(function(){
  var $img = $('img');

  $img.css({'display': 'block',
          'margin-left': '-' + ($img.width() / 2) + 'px',
          'margin-top': '-' + ($img.height() / 2) + 'px'});
}); 
```

# c++ - 从 boost::archive::text_oarchive_impl 和 boost::archive::text_iarchive_impl 派生自定义归档类

> ID：10691911
> 
> 赞同：10
> 
> 时间：2012-05-21T20:10:34.530
> 
> 标签：c++, visual-c++, serialization, boost, boost-serialization

*注意：
Boost 的归档方案基于对称的输入和输出归档类。一直写这两个都很乏味，所以我会用和`?archive`来表示。`oarchive``iarchive`*

**摘要：**
在将我的自定义存档的基类从 更改为 之后`binary_?archive_impl`，当编译器实例化我的其他类中`text_?archive_impl`的方法时，我的自定义存档类不再“找到” 。`serialize(...)`

**背景：**
我的应用程序使用 的子类成功地读取和写入文件到磁盘`binary_?archive_impl`（文档和/或代码注释建议这样做而不是从 派生`binary_?archive`）。我需要从二进制文件格式切换到文本格式，因此我将自定义存档的基类切换为`text_?archive_impl`. 就在那时，一切都爆发了。

**问题：**
我的自定义归档类添加了功能，包括一些在其 Boost 基类中不存在的附加方法；这些方法`serialize(...)`在我的许多课程的方法中被调用，并且*它们工作正常*。将基类从 更改为 后`binary_?archive_impl`，`text_?archive_impl`我到处都收到编译错误，抱怨我的自定义*方法*在`text_?archive`. 嗯，这很明显（！！！），但它们*确实存在*于我的*自定义*档案中，当我使用 Boost 的二进制基类时它们工作*得很好。*这是怎么回事？

**我发现了什么，以及我暂时的 - 但不受欢迎的 - 解决方案：**
在扯掉我的头发并绕着圈子转了大约一天后，这就是我发现的......

1) 前段时间（我相信是 Boost 1.34），文件“binary_?archive.hpp”被分成“binary_?archive_impl.hpp”和“binary_?archive.hpp”（后者#include 前者）。这*不是*对“text_?archive.hpp”进行的。（因此，我将应用程序的#include 行从“binary_?archive_impl.hpp”更改为简单的“text_?archive.hpp”。）

2）如果我将“text_?archive.hpp”分成两部分并且#include 仅“..._impl.hpp”标题，一切正常。（但我真的*不想*修改我的 Boost 安装！）

3）更仔细地查看这些标题并摆弄了一下，我发现如果我使用原始的、未修改的标题并注释掉该行

```
BOOST_SERIALIZATION_REGISTER_ARCHIVE(boost::archive::text_oarchive) 
```

（同样适用于`text_iarchive`），然后一切正常。（顺便说一句，我自己的存档代码中有类似的行来“注册”我的自定义存档。）

**谜团和我的困境：**
A）为什么这些线条的存在会破坏作品？...为什么删除它们会使事情起作用？...我这样做可能会破坏（不知道）什么？

B) 为什么“text_?archive.hpp”文件很久以前*没有与“binary_?archive.hpp”文件一起拆分？*（图书馆坏了吗？应该修好吗？）

C) 有没有办法在我的应用程序代码中解决这个问题*而不*修改我的 Boost 安装？

*PS 我正在使用 Boost 1.48 和 Visual Studio 2010（64 位）*
*PPS 我想以上所有内容都同样适用于`text_w?archive`*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T19:29:26.133

*我希望这是一个评论，因为它是一个**提示**而不是一个答案。但是，我没有看到为您的问题添加评论的选项（而且我认为编辑按钮不会做我想做的事）。*

在我的 1.49.0 安装中，我还看到了 text 类型的相应实现文件。它们是 impl 目录中的 .ipp 格式。时间戳表明它们最近没有更改，因此应该与 1.48 相同。它可能会帮助您解决问题。

根据 Dave Abrahams 的说法，[.ipp 文件应该隐藏实现](http://lists.boost.org/Archives/boost/2003/08/51197.php)。不知道他们为什么选择不同的风格。

----------+ 1 stackoverflow 无 2936 2009 年 12 月 5 日 ./binary_iarchive_impl.hpp

----------+ 1 stackoverflow 无 2966 2009 年 12 月 5 日 ./binary_oarchive_impl.hpp

----------+ 1 stackoverflow 无 1392 Nov 25 2007 ./detail/basic_archive_impl.hpp

**----------+ 1 stackoverflow 无 3458 2009 年 5 月 20 日 ./impl/text_iarchive_impl.ipp**

**----------+ 1 stackoverflow 无 3290 2005 年 7 月 2 日 ./impl/text_oarchive_impl.ipp**

----------+ 1 stackoverflow 无 3020 2008 年 6 月 26 日 ./impl/text_wiarchive_impl.ipp

----------+ 1 stackoverflow 无 2244 2005 年 7 月 2 日 ./impl/text_woarchive_impl.ipp

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T05:33:10.097

尽我所能告诉它提升序列化中的一个错误。我们会[在这里看到。](https://svn.boost.org/trac/boost/ticket/7047)

**A)**
1\. 与您一起添加 BOOST_SERIALIZATION_REGISTER_ARCHIVE 新存档不起作用，因为默认文本存档已经注册 - 似乎只允许注册。
2.删除它们使其工作，因为只有您的自定义类被注册。
3\. 通过删除它们，您破坏了使用默认文本存档的能力 - 您的课程将被注册。

**B**）
我相当肯定“text_?archive.hpp”文件应该像“binary_?archive.hpp”文件一样被拆分。补丁提升任何人？

**C** )
最好的解决方案是提交一个补丁来拆分文件。对于临时解决方案，最好的方法可能是将补丁文件本地放在项目中，直到补丁使其成为 boost。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-24T13:11:09.843

我在为我的图书馆实施自定义存档时遇到了同样的问题。我找到了一个可能的解决方案，它似乎效果很好，所以我将与您分享：

无法在 boost 存档中导出具有修改的序列化语法的类，因此我们必须完全避免它。

boost 存档注册使用适当的重载函数来创建指针序列化类型实例（如[boost/archive/detail/register_archive.hpp](http://www.boost.org/doc/libs/1_50_0/boost/archive/detail/register_archive.hpp)中）

```
# define BOOST_SERIALIZATION_REGISTER_ARCHIVE(Archive)                  \
namespace boost { namespace archive { namespace detail {                \
                                                                        \
template <class Serializable>                                           \
BOOST_DEDUCED_TYPENAME _ptr_serialization_support<Archive, Serializable>::type  \
instantiate_ptr_serialization( Serializable*, Archive*, adl_tag );              \
                                                                        \
}}} 
```

请注意，adl_tag 添加了一个很酷的重载功能，可用于使 boost 能够查看我们的实现内部。只需将新的注册声明如下：

```
// ARCHIVES REGISTRATION //

namespace MyLib {
struct adl_tag {};
}

namespace boost { namespace archive { namespace detail {
template <class Serializable>
void instantiate_ptr_serialization(Serializable*, int, MyLib::adl_tag ) {}
} } }

# define MYLIB_SERIALIZATION_REGISTER_ARCHIVE(_Archive)                   \
namespace boost { namespace archive { namespace detail {                \
template <class Serializable>                                           \
BOOST_DEDUCED_TYPENAME _ptr_serialization_support<_Archive, Serializable>::type  \
instantiate_ptr_serialization( Serializable*, _Archive*, MyLib::adl_tag ); }}} 
```

现在您必须制作自己的 EXPORT 宏，如（[/boost/serialization/export.hpp](http://www.boost.org/doc/libs/1_50_0/boost/serialization/export.hpp)）：

```
namespace MyLib {
namespace extra_detail {

template<class T>
struct guid_initializer
{
    void export_guid(mpl::false_) const {
        // generates the statically-initialized objects whose constructors
        // register the information allowing serialization of T objects
        // through pointers to their base classes.
        boost::archive::detail::
                instantiate_ptr_serialization((T*)0, 0,
                                              MyLib::adl_tag());
    }
    void export_guid(mpl::true_) const {
    }
    guid_initializer const & export_guid() const {
        BOOST_STATIC_WARNING(boost::is_polymorphic< T >::value);
        // note: exporting an abstract base class will have no effect
        // and cannot be used to instantitiate serialization code
        // (one might be using this in a DLL to instantiate code)
        //BOOST_STATIC_WARNING(! boost::serialization::is_abstract< T >::value);
        export_guid(boost::serialization::is_abstract< T >());
        return *this;
    }
};

template<typename T>
struct init_guid;

} // extra_detail
} // namespace MyLib

#define  MYLIB_CLASS_EXPORT_IMPLEMENT(T)                      \
    namespace MyLib  {                                        \
    namespace extra_detail {                                 \
    template<>                                               \
    struct init_guid< T > {                                  \
        static guid_initializer< T > const & g;              \
    };                                                       \
    guid_initializer< T > const & init_guid< T >::g =        \
        ::boost::serialization::singleton<                   \
            guid_initializer< T >                            \
        >::get_mutable_instance().export_guid();             \
    }}                                                     \
/**/ 
```

好的，现在您可以定义您的自定义存档并将其注册：

```
MYLIB_SERIALIZATION_REGISTER_ARCHIVE(MyLib::xml_iarchive) 
```

并且任何时候你为你的类定义一个只有 MyLib::custom_archive 才能读取的特定语法的序列化，你可以使用你的导出实现

```
BOOST_CLASS_EXPORT_KEY(MyClass) // in header
MYLIB_CLASS_EXPORT_IMPLEMENT(MyClass) // in cpp 
```

（请注意，Key 的导出与 boost ... 保持相同）

这真的很酷，因为可以让您的自定义存档和 boost 存档一起存在而不会出现错误。任何时候您想要一个 boost 序列化只需使用 BOOST_CLASS_EXPORT，并且任何时候您要序列化您的类使用 MYLIB_CLASS_EXPORT。

希望这可能有用！

安德里亚·里戈尼·加罗拉

# c# - 在 wcf 中获取应用程序启动路径

> ID：10691912
> 
> 赞同：0
> 
> 时间：2012-05-21T20:10:37.827
> 
> 标签：c#, wcf, app-startup

在 vs2008 (C#) 中：

我有 ：

1.  一个主项目（Windows 应用程序）
2.  WCF 库
3.  WCF 主机
4.  WCF 客户端（Windows 应用程序）

为了使用创建的客户端测试我的服务，我在我的主项目中调用我的客户端表单，并在通过此表单获取服务的输入要求后，我通过调用我的服务合同方法开始做出服务响应。

在此服务中，我需要使用接收到的请求参数创建一个正确的连接字符串，并且我需要我的应用程序启动路径 ( `D:\myProj.dll`) 来访问 exe 文件。不幸的是，在使用返回此路径的不同类型的代码之后，恰好在调用我的服务时，我得到了另一个我不需要的路径`myproj`（`bin\debug`或`c:\programfiles\visual studio9\common7\IDE`）

你能帮助我吗 ？

有关其他信息，我不得不说我通过命令将此路径添加到我的服务库和客户端的构建后事件。

请帮助我访问此路径（我的项目的启动路径-> `D:\myProj.dll`）

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:17:12.860

来自[MSDN](http://msdn.microsoft.com/en-us/library/aa457089.aspx)

```
path = System.IO.Path.GetDirectoryName(
          System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase); 
```

要获取您的代码正在使用的 DLL 的路径：

```
string fullPath = System.Reflection.Assembly.GetAssembly(typeof(MyClass)).Location; 
```

# java - java服务包装器，非常基本的一步一步设置，启动失败

> ID：10691914
> 
> 赞同：4
> 
> 时间：2012-05-21T20:10:49.120
> 
> 标签：java, java-service-wrapper

我只是下载了 JSW 社区版，解包到一个目录中：
`c:\servicetest`
所以这里我有一个 bin、conf、lib 和 log 子目录等。从现在开始，这将是（根）。
我将 (root)/lib/wrapper.jar 引用到我的 ide (netbeans) 中并创建了一个非常简单的服务（记住类名是 Main）：

```
public class Main extends WrapperSimpleApp {

public Main(String[] args) {
    super(args);
}

@Override
public void run() {

    while(true) {
        Logger.getLogger(Main.class.getName()).log(Level.INFO, "I'm alive");

        try 
           { Thread.sleep(2000); } 
        catch (InterruptedException ex) 
           { return; }
    }
}

} 
```

如您所见，它基本上只记录一条消息。但实际上它都没有开始。

我编译了项目（MyProject.jar），将 jar 复制到（根）目录并修改了（根）/config/wrapper.conf 添加：

```
wrapper.java.classpath.3=../MyProject.jar 
```

和

```
wrapper.java.mainclass=textappender.Main 
```

然后我在命令行中安装了该服务，其中：

```
C:\servicetest\bin>wrapper -i ../conf/wrapper.conf 
```

然后我通过 services.msc 控制面板或通过

```
C:\servicetest\bin>wrapper -t ../conf/wrapper.conf 
```

在 logs/wrapper.log 我得到：

```
ERROR  | wrapper  | 2012/05/21 21:35:11 | JVM exited while loading the application. 
```

### 更新 1

按照 Tanuki Software 的建议，我在我的 (root)/config/wrapper.conf 中进行了设置（好吧，因为它已经存在，所以没有注释）：

```
wrapper.debug=TRUE 
```

现在我明白了：

```
INFO   | jvm 1    | 2012/05/22 10:46:37 | WrapperManager Debug: WrapperManager.stop(1) called by thread: main
INFO   | jvm 1    | 2012/05/22 10:46:37 | WrapperManager Debug: Backend not connected, not sending packet STOP : 1
INFO   | jvm 1    | 2012/05/22 10:46:37 | WrapperManager Debug: Stopped checking for  control events.
DEBUG  | wrapper  | 2012/05/22 10:46:37 | Pause reading child process output to share cycles.
INFO   | jvm 1    | 2012/05/22 10:46:37 | WrapperManager Debug: Thread, main, handling the shutdown process.
INFO   | jvm 1    | 2012/05/22 10:46:37 | WrapperManager Debug: shutdownJVM(1) Thread: main
INFO   | jvm 1    | 2012/05/22 10:46:38 | WrapperManager Debug: wait for 0 shutdown locks to be released.
INFO   | jvm 1    | 2012/05/22 10:46:38 | WrapperManager Debug: Backend not connected, not sending packet STOPPED : 1
INFO   | jvm 1    | 2012/05/22 10:46:38 | WrapperManager Debug: calling System.exit(1)
DEBUG  | wrapper  | 2012/05/22 10:46:38 | JVM process exited with a code of 1, setting the wrapper exit code to 1. 
```

但鉴于我的实现非常简单，我无法猜测出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T01:50:41.860

而不是扩展 WrapperSimpleApp，你的主类应该实现 org.tanukisoftware.wrapper.WrapperListener 接口。

您可以在我们的网站上找到关于实现接口的非常详细的描述： [http ://wrapper.tanukisoftware.com/doc/english/integrate-listener.html](http://wrapper.tanukisoftware.com/doc/english/integrate-listener.html)

如果您对 conf 文件中的实现和/或配置属性有任何疑问，请告诉我。

有时对我有用的另一个建议是，与其立即将您的应用程序作为服务运行，我发现通过首先作为控制台应用程序运行来进行集成更容易，因为您可以直接在控制台上看到输出。一旦一切正常，我继续安装/作为服务运行。要作为控制台应用程序运行，您将运行例如：

```
C:\servicetest\bin>wrapper -c ../conf/wrapper.conf 
```

您还可以通过设置打开 Wrapper 的调试输出

```
wrapper.debug=true 
```

在你的 conf 文件中。

由于评论而编辑：

如果您的应用程序实际上像您描述的那样简单，那么只需将您的应用程序编写为普通的 Java 应用程序，而不需要任何 Wrapper API 部分。

您可以使用 WrapperSimpleApp 开箱即用地运行您的应用程序，并将无代码集成到 Wrapper 中。

您需要做的就是在您的 conf 文件中设置以下属性：

```
wrapper.java.mainclass=org.tanukisoftware.wrapper.WrapperSimpleApp
wrapper.app.parameter.1=textappender.Main
wrapper.java.classpath.1=../lib/wrapper.jar
wrapper.java.classpath.2=../MyProject.jar 
```

使用此配置，Wrapper 将能够将您的应用程序作为 Windows 服务运行。

更新2

我不确定您的代码到底是什么样子，但您似乎在主类中调用 WrapperManager.stop() ......

在最初的示例类之后，我修改了该类，因此它没有使用任何 Wrapper-API（对于简单的应用程序来说，这不是必需的）：

```
public class Main {    
public static void main(String[] args) {
    while(true) {
        Logger.getLogger(Main.class.getName()).log(Level.INFO, "I'm alive");
        try 
        { Thread.sleep(2000); } 
        catch (java.lang.InterruptedException ex) 
        { return; }
    }
}
} 
```

编译并创建 jar 后，conf 文件中的必要属性为：

```
wrapper.java.mainclass=org.tanukisoftware.wrapper.WrapperSimpleApp
wrapper.app.parameter.1=textappender.Main
wrapper.java.classpath.1=../lib/wrapper.jar
wrapper.java.classpath.2=../MyProject.jar 
```

干杯，

# asp.net - ObjectDataSource 'ObjectDataSource' 找不到具有参数的非泛型方法 'Insert'

> ID：10691916
> 
> 赞同：2
> 
> 时间：2012-05-21T20:11:12.487
> 
> 标签：asp.net

我有一个启用编辑的网格视图，所以当我编辑用户时出现错误：

ObjectDataSource 'ObjectDataSource1' 找不到具有参数的非通用方法 'Update'：我也在使用详细信息视图将新用户插入数据库，但是当我尝试插入时说

ObjectDataSource 'ObjectDataSource1' 找不到具有参数的非泛型方法 'Insert'：

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T20:23:34.290

确保 ObjectDataSource 使用的所有方法 [SelectMethod、UpdateMethod、DeleteMethod、SelectCountMethod、InsertMethod] 都输入正确。

检查以验证 Type (sTableAdapters.SyTableAdapter) 是否实际包含 Update 和 Insert 方法

这些方法是否包含错误中指出的确切参数，包括数量和顺序。请记住，参数的顺序对 ObjectDataSource 意义重大。

# mysql - MySQL 上的最佳存储引擎

> ID：10691920
> 
> 赞同：3
> 
> 时间：2012-05-21T20:11:47.673
> 
> 标签：mysql

只是想知道用于我的网站的最佳存储引擎是什么？我手动将值输入数据库 - 没有用户输入被放入数据库本身。它基本上包含短值，以及一些短 URL（用于基于内容的图像）。我注意到在空表上我的 InnoDB 有 3,690MB 开销..考虑到它没有被访问，这似乎有点极端。

MyISAM 会更好吗？建议？

编辑：除了在 phpMyAdmin 中手动输入值之外，我真正在做的是查询行并使用变量在页面上显示数据。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T20:22:45.400

作为一般建议，使用 InnoDB，3.690Mb 不算什么。

更多细节：[MyISAM 与 InnoDB](https://stackoverflow.com/questions/20148/myisam-versus-innodb)

# android - 将greendroid与android 4一起使用是否有意义？

> ID：10691923
> 
> 赞同：0
> 
> 时间：2012-05-21T20:12:08.200
> 
> 标签：android, android-4.0-ice-cream-sandwich, greendroid

我对 greendroid 很陌生，我快速了解了它的功能。如果我想使用 android 4 sdk 进行开发，使用 greendroid 是否仍然有意义？这行得通吗？例如，让我们以 ActionBar 为例。greendroid 中有一个，但 android 4 现在也有这个功能，那又如何？当然这只是一个元素，但是当基础 sdk 是 android 4 时，使用 greendroid 是否还有优势？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T20:58:35.270

这个库不是打算支持旧版本（如 2.x 及以下）吗？如果是这样（我猜是这样）：如果您不希望此类设备能够运行您的应用程序，那么您不需要这个库。

否则，如果您希望拥有操作栏功能，您应该考虑使用它（或任何其他用于操作栏的解决方案，例如[操作栏 sherlock](http://actionbarsherlock.com/)或 google 提供的 android 库。）。

今天的大多数设备都没有新版本的 android 。目前，它们中的大多数运行版本 2.x。这是当前的统计数据：http: [//developer.android.com/resources/dashboard/platform-versions.html](http://developer.android.com/resources/dashboard/platform-versions.html)

# java - 使用 JimiMultiImageRasterDecoder

> ID：10691934
> 
> 赞同：2
> 
> 时间：2012-05-21T20:12:39.273
> 
> 标签：java, tiff

如何使用抽象类`JimiMultiImageRasterDecoder`？ [Javadoc在这里](http://www.cs.helsinki.fi/group/xmltools/formatters/fop/Jimi/docs/html/api/com/sun/jimi/core/JimiMultiImageRasterDecoder.html)

是否有（n 个匿名）子类？或者我一定要推出自己的实现（我宁愿避免，但如有必要会这样做）。

背景：读取多页 TIFF 文件。由于访问/权限限制，无法使用 JAI。如果有更简单的方法可以做到这一点，我很乐意尝试。

# asp-classic - 经典 ASP：ASPSessionID 被重用

> ID：10691938
> 
> 赞同：3
> 
> 时间：2012-05-21T20:12:47.720
> 
> 标签：asp-classic, sessionid

我知道如何在 ASP.NET 中处理这个问题，但是有没有办法强制清除经典 ASP 会话 ID？它是一个随机生成的 ID，如 ASPSESSIONIDG32423E，似乎在 RESPONSE.COOKIES 集合中不可用，因此我无法清除它。我们有一个类 ASP 站点仍然闲逛，最近审计发现，在用户注销后，相同的会话 ID 被重用。

更多说明：

第一次访问页面，我在 Response 的代理编辑器中看到了这个：

设置 Cookie：ASPSESSIONID=PUYQGHUMEAAJPUYL；路径=/Web 应用程序

注销后，我调用 Session.RemoveAll 和 Session.Abandon，然后将用户重定向到登录页面。在这一点上，我应该看到一个新的 Set-Cookie，它的 SessionID 值不同。相反，我没有获得新的 cookie，并且新的登录会话重用了原始会话 cookie。这是一个审计发现，我们必须以某种方式解决，但似乎没有办法控制它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T14:32:31.873

所以我确实想出了一个解决方案，如下所示。我添加了两个页面，分别称为 Start.asp 和 Start2.asp。原始登录页面已更改为检查现在在 Start2.asp 上设置的 post 变量，因此如果 login.asp 没有看到该 post 变量，它会重定向到 Start.asp。Start.asp 通过将 ASPSessionID 设置为 0 来使其无效。关键是使用 Response.AddHeader "Set-Cookie" 来执行此操作，因为 Response.Cookies("ASPSESSIONID...") 给出了您无法访问的错误元素：

## Start.ASP 的代码

```
<%
If instr(Request.ServerVariables("HTTP_COOKIE"), "ASPSESSIONID") > 0 Then

    Dim Allcookies

    AllCookies = Split(Request.ServerVariables("HTTP_COOKIE"),";")
    For i = 1 to UBound(AllCookies)

        If instr(AllCookies(i), "ASPSESSIONID") > 0 Then
            Response.AddHeader "Set-Cookie", Left(AllCookies(i),instr(AllCookies(i),"=") -1) & "=0; path=/;secure;httponly"
        End if

    Next 
End if

Response.Redirect("start2.asp")
%> 
```

接下来，它调用 Start2.asp，它查找所有 ASPSEssionID cookie 并附加 Secure；httponly（我不得不添加这些以获得另一个发现，仅当 SSL 证书位于 Web 服务器上时，ASP 元数据库设置才能添加安全。在我们的示例中，SSL 证书位于 Web 服务器前面的负载平衡器上）。

## Start2.asp 的代码

```
<%
    'CODE for authorization/authentication
   '...

Session.Contents.RemoveAll
Session.Abandon
If instr(Request.ServerVariables("HTTP_COOKIE"), "ASPSESSIONID") > 0 Then
       Dim Allcookies

        AllCookies = Split(Request.ServerVariables("HTTP_COOKIE"),";")

        For i = 1 to UBound(AllCookies)

            if left(Request.ServerVariables("HTTP_HOST"),2) = "65" and instr(AllCookies(i), "ASPSESSIONID") > 0 Then
                Response.AddHeader "Set-Cookie", AllCookies(i) & "; path=/;secure;httponly"
            End if        

        Next 

End if

%>

<html>
<body>
<form action="login.asp" method="post">
<input type="hidden" name="start2" id="start2" value="Yes" />

</form>

<script type="text/javascript">
     document.forms[0].submit();
</script>
</body>
</html> 
```

但实际上，新的 ASPSessionID 直到在 Start2.asp 中才生成，因此用于安全和 httponly 的 Set-Cookie 代码也必须在 login.asp 中完成。所以上面相同的代码被复制到 login.asp 的顶部，就在这段代码之后：

```
If request.form("Start2") = "" Then
    Response.Redirect("start.asp")
End if 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T20:15:50.050

IMO - 您需要结束会话，而不仅仅是清除会话 ID。在这种情况下， Session.Abandon 是解决方案。参考：[https ://devguru.com/content/technologies/asp/session-abandon.html](https://devguru.com/content/technologies/asp/session-abandon.html)

HTH。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T20:21:23.187

这与 ASP.NET 有关，但描述了您在 ASP 中看到的行为

> 当您放弃会话时，会话 ID cookie 不会从用户的浏览器中删除。因此，一旦会话被放弃，对同一应用程序的任何新请求都将使用相同的会话 ID，但将具有新的会话状态实例。

[http://support.microsoft.com/?kbid=899918](http://support.microsoft.com/?kbid=899918)

只有在同一会话使用同一浏览器时才会发生此行为，一旦关闭浏览器，会话 cookie 就会丢失（前提是尚未设置明确的到期日期）。

您可以尝试调用`Session.Abandon`然后将用户重定向到使用 JavaScript 清除所有 cookie 的页面，然后重定向到登录页面或您喜欢的任何页面。

[使用 JavaScript 清除所有 cookie](https://stackoverflow.com/questions/179355/clearing-all-cookies-with-javascript)

# css - 停止 div 使用 css 调整父 div 的大小

> ID：10691941
> 
> 赞同：6
> 
> 时间：2012-05-21T20:13:03.910
> 
> 标签：css, resize

## [http://jsfiddle.net/ETkkR/](http://jsfiddle.net/ETkkR/)

```
<div id="Blog1">
    <div class="post">
    <img src="http://dummyimage.com/180x120/000/fff" alt="Image 1" title="This is my first image"/>
        <div class="post-info">
            <span>post title post title post title</span>
        </div>
    </div>
    <div class="post">
    <img src="http://dummyimage.com/175x104/f0f/fff" alt="Image 2" title="The second one is pretty"/>
                <div class="post-info">
            <span>post title post title post title</span>
        </div>
    </div>        
</div>​ 
```

div.post-info 在某些情况下（宽度大于 div.post-info 内容的图像）适合 div.post 父级，但有时 div.post-info 的宽度对父级 div 的影响更大。通过调整大小来发布。我怎样才能使 div.post-info 适合 div.parent 的宽度并且如果它更大则不调整它的大小。

## 我的 CSS

```
#Blog1{
    padding:10px;
}
#Blog1 .post{
    border:1px solid #000000;
    margin:3px;
    text-align:center;
    position: relative;
    display: inline-block;
    *display: inline;
    zoom: 1
}
.post img{
    height:100px;
}
.post .post-info{
    text-align:left;
}
.post .post-info span{
    word-wrap:break-word;
}​ 
```

## 编辑

**只要内容保持不变，您就可以更改元素以创建解决方案** 人们不断提供不适合我所要求的解决方案......我需要的是孩子 div .post-info 不是更大比 .post 父 div 的宽度

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-21T20:49:01.770

这是一个演示，但您应该真正解释一下：**您是否希望高度可变？**

**[jsFiddle 演示](http://jsfiddle.net/ETkkR/7/)**

编辑的 CSS（仅更改的元素）：

```
#Blog1 .post{
    border:1px solid #000000;
    margin:3px;
    text-align:center;
    position: relative;
    display:block;         /**/
    float:left;            /**/
    overflow:hidden;       /**/
    padding-bottom:24px;   /**/
}
.post .post-info span{
    position:absolute;     /**/
    word-wrap:break-word;
} 
```

PS：这个问题将我与我的一个旧答案联系起来 :)
[像 Google 图片这样的流行图片](https://stackoverflow.com/questions/7411393/pop-images-like-google-images)
如果你需要帮助......我在这里

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T20:23:17.677

它似乎适用于您的 CSS 的以下更改：

```
.post .post-info span{
    display: block;
    max-width: 90%;
    margin: 0 auto;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/ETkkR/3/)。

推理：

*   `display: block;`允许将 a `width`（因此`max-width`）分配给元素。
*   `max-width: 90%;`确保元素的最大宽度小于父元素的宽度，在元素的内容和父元素的边框之间留出一些空间。
*   `margin: 0 auto;`在其父元素中水平居中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T20:22:49.347

```
#Blog1 .post{
    border:1px solid #000000;
    margin:3px;
    text-align:center;
    position: relative;
    display: inline-block;
    *display: inline;
    zoom: 1;
    max-width: 200px;
    overflow-x: hidden;
} 
```

我认为这个解决方案在 IE6 中不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T20:24:20.470

您可以将 div`.post`宽度设置为 100%，`.post-info`将宽度设置为 100%：

```
#Blog1 .post {
  width: 100%;
}

.post-info {
  width: 100%;
} 
```

我相信这将使 div`.post-info`相对于其父 div。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-04T11:25:55.683

我遇到了与 OP 相同的问题，我的解决方案是设置

```
box-sizing: border-box; 
```

我无法在小提琴中重现该行为，但只需将上述内容添加到内部元素即可在我的应用程序中解决它，所以我希望对某人有所帮助。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-21T20:19:56.117

试试css属性`max-width`

# php - 将 CSV 转换为 JSON 并使用 HTML 显示

> ID：10691945
> 
> 赞同：0
> 
> 时间：2012-05-21T20:13:11.003
> 
> 标签：php, json

我正在使用此代码来处理上传的 csv 文件。如何将其转换为 Json 并循环显示在用户的屏幕上？

```
 if (($handle = fopen('upload/'.$current.$_FILES["file"]["name"]. '', "r")) !== FALSE) {
    while (($row_array = fgetcsv($handle, 1024, ","))) { 
         foreach ($row_array as $key => $val) {
             $row_array[$key] = trim(str_replace('"', '', $val));
             }
         $complete[] = $row_array;
         }
         fclose($handle);
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:16:41.203

您应该使用将您的数组编码为 json

```
json_encode($complete); 
```

然后，您将需要在客户端使用 javascript 迭代该数组。

# php - 通过foreach循环单击链接时获取会话变量

> ID：10691948
> 
> 赞同：0
> 
> 时间：2012-05-21T20:13:28.117
> 
> 标签：php, database, session

我试图在单击链接时设置会话变量。变量的值是使用 PHP 从数据库中生成的。我已经尝试了一切，但注意到似乎有效。

有一个显示用户名的 foreach 循环。每个用户名都是指向第二个页面的链接。单击的用户名应成为会话变量。循环的代码如下所示：

```
echo "<a href= 'nominate.php'> ".$myotherusers['username']. "</a><br/>"; 
```

目标是当点击链接时执行此代码：

```
$_SESSION['varname'] = $myotherusers['username']; 
```

我似乎无法弄清楚如何......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:17:46.510

你可以这样做：

```
echo "<a href='nominate.php?user=".$myotherusers['username'].">".$myotherusers['username']."</a><br />"; 
```

然后在你的行动中：

```
$_SESSION['varname'] = $_GET['user']; 
```

# php - 检查变量是否是 PHP 的有效日期

> ID：10691949
> 
> 赞同：39
> 
> 时间：2012-05-21T20:13:29.147
> 
> 标签：php, date, strtotime

我正在编写一个脚本，该脚本将从 CSV 文件中导入一些数据。当我这样做时，我希望能够检查一个变量，看看它是否是一个有效的日期字符串。

我已经看到了几种检查字符串是否为日期的方法，但大多数方法都要求您现在使用格式。我不知道日期的格式。

现在我正在使用 strtotime()，但这并不容易

```
$field ="May";
if(strtotime($field)){
    echo "This is a date";
} 
```

在这种情况下，“May”是人的名字，而不是日期。

谁能推荐更可靠的功能？

**根据你们中的一些人提出的问题进行编辑。**

对于在我的情况下作为“日期”传递的变量，它需要特定于日/月/年，所以只是“五月”会模糊计算。

基于此和下面 Pauls 的好点，我们还可以测试该字符串是否包含数字，例如

```
$field ="May";
if(strtotime($field) && 1 === preg_match('~[0-9]~', $field)){
    echo "This is a date";
}else{
    echo "Nope not a date";
} 
```

这似乎满足了我的迫切需求，但任何人都可以发现任何问题或提出改进建议吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-05-21T20:42:06.030

使用[date_parse](http://php.net/manual/en/function.date-parse.php)并检查返回数组的值

```
$date = date_parse("May")

// ["year"] == FALSE
// ["month"] == 5
// ["day"] == FALSE 
```

您也可以将它们传递给[checkdate](http://www.php.net/manual/en/function.checkdate.php)。

```
$date = date_parse($someString);
if ($date["error_count"] == 0 && checkdate($date["month"], $date["day"], $date["year"]))
    echo "Valid date";
else
    echo "Invalid date"; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-21T20:39:09.323

我不认为这个问题有一个多合一的答案。根据您的用例，您可能有不同的策略。

你`strtotime()`是一个完美的解决方案，但正如你所说，你最终可能会误报。为什么？因为*可能*是一个词或一个名字。然而，结果是`strtotime('May')`什么？

```
echo date(DateTime::ISO8601, strtotime('May'));
2012-05-21T00:00:00+0200 
```

因此，仅给出月份将返回当前年份的日期和当前日期，从给定月份的午夜开始。一个可能的解决方案是检查您的字符串是否包含当前日期和/或当前年份，这样，您可以检查以确保您的日期是完全合格的日期并且有效。

```
echo date(DateTime::ISO8601, strtotime('May Day')); // (strtotime() returns false)
1970-01-01T01:00:00+0100

echo date(DateTime::ISO8601, strtotime('May 21'));
2012-05-21T00:00:00+0200 
```

一个简单`strpos()`的甚至一个正则表达式就可以解决问题。

**但是**，它有点奇怪，只有在您没有其他方法时才应该使用。

我相信更好的解决方案是定义一组有效格式并插入结果以确保日期有效。

```
$validDateFormatPatterns = array(
 '[0-9]{1,2}-[0-9]{1,2}-[0-9]{4}', // 21-05-2012, obviously this pattern is simple and would accept 05-21-2012,
 'the [0-9]{1,2}(th|st|nd|rd) (January|February|...|May|...|December) [0,9]{4}', // The 21st May 2012
); 
```

您应该尝试涵盖大部分情况，我相信您将能够找到检查最新日期格式的正则表达式。

在任何情况下，您可能需要不时调整您的功能，因为没有简单的方法可以使其防弹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-10T05:00:25.753

我知道这是很久以前问过的，但是四处寻找这个并试图避免正则表达式，我想出了这个：

```
function checkInputIsDate($date) {
    return (bool)strpbrk($date,1234567890) && strtotime($date);
} 
```

这是有效的，因为它消除了上面发布的问题，即通过`strtotime`确保字符串中有数字[`strpbrk`](http://php.net/manual/en/function.strpbrk.php)以及验证`strtotime`输出日期来传递仅一个月。

并了解了一个我不知道存在的功能。

希望这可以帮助某人。

# firefox - Mac OS Lion 和 Snow Leopard 中包含 Java3d 的小程序的问题

> ID：10691954
> 
> 赞同：3
> 
> 时间：2012-05-21T20:13:38.977
> 
> 标签：firefox, safari, applet, osx-lion, java-3d

我正在使用 Mac Lion OS，当我使用带有 java3d 组件的小程序时，不显示图形，但是在显示带有 java3d 的小程序的浏览器前面使用终端窗口（例如）“旅行”后，并使用任务控制...你实际上可以看到图形。

（这种现象发生在几个带有狮子和雪豹的mac上）

对于这个例子，我使用了以下链接： [http ://www-evasion.imag.fr/~Francois.Faure/enseignement/ressources/java/demo/java3d/Text3D/Text3DLoad_plugin.html](http://www-evasion.imag.fr/~Francois.Faure/enseignement/ressources/java/demo/java3d/Text3D/Text3DLoad_plugin.html)

有谁知道如何解决这一问题？

一切顺利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-05T17:32:03.460

不是一个完整的答案，而是我的经验。

最近对 OSX 上 JVM 的更新破坏了与旧 Java3D 版本的向后兼容性。我最后一次玩这个（大约 9 个月前）我们注意到了类似的问题，它们根本无法运行。

这发生在Apple 的 JVM [1.6.0.20 版本中。](https://developer.apple.com/library/mac/releasenotes/CrossPlatform/JavaSnowLeopardUpdate2LeopardUpdate7RN/NewandNoteworthy/NewandNoteworthy.html)这破坏了 Java3D 和 JOGL 渲染管道，当它们使用 Plugin2 架构时。从那以后，我相信 JOGL 团队一直在致力于修复，但我有一段时间没有测试它，所以我不知道这个修复的当前状态是什么，以及该修复是否已被纳入 Java3D。

我没有使用 Java 7 JDK 的更新版本进行测试，但它可能有助于缩小问题范围，这也可能会缓解问题（或使问题变得更糟）

# count - SAS双向计数表：如何生产？

> ID：10691961
> 
> 赞同：0
> 
> 时间：2012-05-21T20:14:02.877
> 
> 标签：count, sas, frequency, proc, two-way

我一直在使用 proc freq 命令来创建一个双向计数表。我有两列变量，并且想要制作一个矩阵，使得 A 列中的变量按行分组，B 列中的变量成为列。列的名称是来自 B 列的变量。如何生成这样的 SAS 数据集，其中表中的条目是 A 列/B 列配对的计数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T21:03:28.077

大学教师，

如果我正确理解了您的问题，那么下面的示例可能会起作用。存在一个问题，不存在的 column_a 和 column_b 的组合将显示为缺失值，但如果这很重要，您可以稍后在数据集中将它们重新定义为零。

```
proc freq data=dsn_in;
   tables column_a * column_b /
      out=dsn_out;

proc sort data=dsn_out;
   by column_a column_b;
proc transpose data=dsn_out out=dsn_transpose(drop=_label_ _name_);
   by column_a;
   id column_b;
   var count;
run; 
```

# ruby-on-rails - Sublime Text 2 设置创建中可能的语言/语法是什么？

> ID：10691962
> 
> 赞同：3
> 
> 时间：2012-05-21T20:14:06.047
> 
> 标签：ruby-on-rails, ruby, ide, indentation, sublimetext

作为 Rails 项目的一部分，我想为“HTML (Rails)”（又名 .html.erb）文件和 Ruby on Rails 文件（.rb 文件）创建一些自定义设置（特别是缩进！）。

我知道如何创建和编辑 Preferences.sublime-settings 文件 - 以及 Ruby.sublime-settings 文件 - 但对于每种文件类型，我还有一个问题：

(1) 对于 .html.erb 文件，我在创建 [language].sublime-settings 文件时使用什么 [language]？在这种情况和其他情况下可能使用的所有语言的某个地方是否有一个大列表？

(2) 在我创建了这些自定义设置之后（就像我已经对 Ruby.sublime-settings 所做的那样，将我的选项卡自定义为 2 个空格），我想将这些新设置全局应用于所有 Ruby 规则。

（奖励）我的 Rails 项目中的 .rb 文件似乎加载了“Ruby on Rails”语法，而不仅仅是“Ruby”语法（显示在 Sublime Text 的右下角）。如果 Ruby.sublime-settings 不会影响 .rb "Ruby on Rails" 文件（这对我来说似乎就是这种情况..），我希望为 .html.erb 和 .rb 文件提供#1的答案作为 Rails 项目的一部分创建。

我已经找到了很多与这个问题相关的 SO 信息，但是在谷歌搜索约 1 小时并爬行 Sublime Text 文档之后，上面的两个问题对我来说仍然没有答案。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T18:15:30.900

OOOOhhhhh，我自己想出了这个。

**Sublime 可以通过其 UI**为每种文件类型生成自定义设置-sublime 文件- 这不必通过命令行或终端等创建。

这是如何完成的：

1.  打开 Sublime 应用程序
2.  打开（或聚焦）您想要为其进行自定义设置的任何类型的文件，例如 .HTML.ERB 文件
3.  使用菜单并转到 Sublime Text 2 > Preferences > Settings - More > Syntax Specific - User

这将打开一个具有正确语法/类型/名称的 sublime-settings 文件。在此处输入您的设置，然后保存文件。:)

完毕！

# linux - 无关的论点

> ID：10691963
> 
> 赞同：-1
> 
> 时间：2012-05-21T20:14:12.687
> 
> 标签：linux

当我输入控制台

```
dnssec-keygen -a HMAC-MD5 -b 128 -n USER DHCP_UPDATER Kdhcp-updater.+157+46827 
```

我有`fatal:extraneous arguments`

它是 Ubuntu 11.04 服务器。

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:17:30.877

根据[文档](http://ftp.isc.org/www/bind/arm95/man.dnssec-keygen.html)，`dnssec-keygen`只需要一个非选项参数（键名）。您正在传递它三个 ( `DHCP_UPDATER Kdhcp-updater.+157+46827`)。完整的概要是：

```
dnssec-keygen {-a algorithm} {-b keysize} {-n nametype} [-c class] [-e] 
  [-f flag] [-g generator] [-h] [-k] [-p protocol] [-r randomdev] 
  [-s strength] [-t type] [-v level] {name} 
```

手册页有一些正确使用的例子。

# javascript - javascript项目编译器

> ID：10691965
> 
> 赞同：0
> 
> 时间：2012-05-21T20:14:35.593
> 
> 标签：javascript, compiler-construction

是否有大型 javascript 项目的编译器，我不想只使用普通 javascript 的咖啡脚本，但我希望它在客户端编译，而不是在服务器端或其他任何地方编译。

例如：

应用程序.js

```
// Libs
include jquery.min.js
include underscore.min.js
include backbone.min.js

// Src
include src/homepage.js 
```

然后在 html 中，我们将只包含 app.js，它会自动组合这些库/源文件。就像 LESS css 一样。

是否有工具/项目来解决这个问题？与 html 相同的故事，当它是视图逻辑时，它确实包含“header.php”并包含“footer.php”，我们希望它在客户端。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:24:11.093

看看[headjs](http://headjs.com/)之类的东西，或者如果你不喜欢它，那么[几乎](http://jscompress.com/) [任何](http://www.minifyjavascript.com/) [JavaScript 压缩器](http://refresh-sf.com/yui/) [都可以](https://www.google.co.uk/search?sugexp=chrome,mod=19&sourceid=chrome&ie=UTF-8&q=javascript%20minifier)。

# c# - 如何在 ToolTip Draw 方法中使用 DrawBorder 事件？

> ID：10691969
> 
> 赞同：0
> 
> 时间：2012-05-21T20:14:44.077
> 
> 标签：c#, tooltip

有人可以发布一些如何在 ToolTip 的 Draw 事件中使用 DrawBorder 的示例吗？我尝试了以下但它不起作用。

```
e.DrawBorder(e.Graphics, this.ClientRectangle, 
             Color.Black, 5, ButtonBorderStyle.Solid, 
             Color.Black, 5, ButtonBorderStyle.Solid, 
             Color.Black, 5, ButtonBorderStyle.Solid,  
             Color.Black, 5, ButtonBorderStyle.Solid); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:52:28.160

首先，您需要将 的`OwnerDraw`属性设置`ToolTip`为`true`实际调用您的自定义代码；其次，您只能使用一系列标准的 Windows 窗体图形调用来将所需的图形元素渲染到`e.Graphics`，因为`DrawTooltipEventArgs.DrawBorder()`您尝试的调用不带任何参数并且始终使用系统边框颜色。

# javascript - 将函数绑定到用作子菜单的无序列表

> ID：10691973
> 
> 赞同：1
> 
> 时间：2012-05-21T20:15:00.987
> 
> 标签：javascript, jquery

假设我们有一个菜单，其中两个项目包含一个子菜单，这里是 html：

```
 <div id="Menubar">
            <ul>
                <li><a href="#">About</a></li>
        <li><a href="#">Contact</a>
        <ul >
                        <li class="dropItem"><a href="#">By Mail</a></li>
                        <li class="dropItem"><a href="#">By Phone</a></li>         
                    </ul>                    
                </li>  
                <li><a href="#">Search</a></li> 
                <li><a href="#">Gallery</a>
                    <ul>
                        <li class="dropItem"><a href="#">Video</a></li>
                         <li class="dropItem"><a href="#">Audio</a></li> 
                        <li class="dropItem"><a href="#">Images</a></li>         
                        <li class="dropItem"><a href="#">Powerpoint</a></li>
                    </ul>
                </li>                                    
                <li><a href="#">News</a></li>                                                 
                <li><a href="#">Home</a></li>

            </ul>
        </div> 
```

所以它就像：

关于 | 联系方式 | 搜索 | 画廊 | 新闻 | 家

```
 -------            -------

    ByMail             Video

    ByPhone            Audio

                       Images 
```

那么如何选择包含 ul 的 li ，然后使 ul 可见；

我尝试过这样的事情：

```
$(document).ready(function(){
        //start//
        var drop = $('#Menubar ul li');
        if(drop.children().last().is('ul')){
              mouseover:function(){
                  $(this).find('ul').fadeIn('normal');
              }
         });
        }

}); 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T20:26:09.940

这个怎么样？

```
$("#Menubar li > ul").parent().hover(function() {
    $(this).children("ul").stop().fadeIn();
}, function() {
    $(this).children("ul").fadeOut();
});​ 
```

**演示：http:** [//jsfiddle.net/ZhYDf/1/](http://jsfiddle.net/ZhYDf/1/)

* * *

选择器的另一个变体：

```
$("#Menubar li:has(ul)").hover(function() {
    $(this).children("ul").stop().fadeIn();
}, function() {
    $(this).children("ul").fadeOut();
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T20:20:38.117

```
 $(function(){

         $('#MenuBar li:has("ul")').each(function(){  //iterate over 'li' tags that contain a 'ul' tag
              var that = $(this),
                  sub  = that.find('ul');  //make vars from jquery objects
              that.hover(function(){ //bind hover to 'li' tag in iteration
                     sub.fadeIn();
              },function(){
                     sub.fadeOut(); 
              });
         });

  }); 
```

# ios - 用于使用 Twitter 登录的 iOS 库

> ID：10691974
> 
> 赞同：1
> 
> 时间：2012-05-21T20:15:03.540
> 
> 标签：ios, xcode, twitter, twitter-oauth

我目前正在开发一个应用程序，该应用程序要求用户能够使用其 Twitter 凭据登录或创建帐户。

用户的电子邮件地址和其他个人信息应发送到我们客户的服务器。

iOS twitter 框架是否提供对用户 Twitter 用户信息（姓名和电子邮件）的访问，或者这是我必须自己开发的东西？

如果是这样，任何人都可以推荐一个可以帮助我实现这一目标的第三方库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T02:05:20.007

您可以利用许多[库](https://dev.twitter.com/docs/twitter-libraries#objectivec)来获取用户的 Twitter 详细信息。您将无法获得他们的电子邮件地址，因为 Twitter 不提供通过 API 访问的权限，并且名称是自由格式的，可​​能是第一个、最后一个或什么都没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T20:24:04.993

我不确定它的功能，但有一个名为 Sharekit 的第三方库，它支持 twitter、facebook 和我认为的其他一些网站。它就像所有 API 的包装器，但如果您只打算使用 twitter，我不确定使用它有什么好处。

除了 ofc 之外，您还可以使用他们的框架检索用户信息，这只是一个简单的问题，它可能是通过对他们的 API 的 HTTP 请求完成的，就像 Facebook 使用 Graph API 一样。

# php - PHP：让我的班级内的所有数据库字段都可以访问的最佳方式？

> ID：10691976
> 
> 赞同：0
> 
> 时间：2012-05-21T20:15:29.630
> 
> 标签：php, class

我正在为我的 PHP 应用程序开发一个类。代码正被转移到一种更加面向对象的方法中，大部分逻辑都驻留在类中。在开发的早期，我创建了用于从数据库中提取信息的单独函数：

```
function getUserID($id)
function getMemberID($id)
function getUserEmailAddress($id)
function getUserFullName($id)
function getAnalysisConditionId($id)
...
etc. 
```

我有很多功能可以从数据库中提取单个字段元素。事实上，我认为我的数据库中大约 50% 的字段都有一个函数。我开始认为这有点过分，应该以另一种方式完成。

我考虑过构建一个函数（如 getUserInfo($id)），在这个函数中，我将查询 User 表中的所有字段，包括与返回所有相关字段相关的任何连接。然后，我将返回结果表中每个字段的数组。然后，如果我在应用程序的某个地方需要这些信息，我可以将其命名为 $class->getUserInfo($id)['id']。

这是最好的方法吗？我是否应该在整个应用程序中提供每个字段？感谢您的输入！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T20:21:28.397

您应该查看几个可用的 ORM 解决方案之一。我自己是[教义](http://www.doctrine-project.org/projects/orm.html)的粉丝。基本上，他们会为您管理所有这些，并且通常他们甚至会帮助您生成访问器方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T20:22:08.177

看一下 Active Record 设计模式。这与您尝试执行的操作类似。

正如其他人所建议的那样，无需为基本的东西重新发明轮子。只需使用 ORM（Doctrine2 实际上是 PHP 最流行的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T20:32:00.670

我必须同意这里的其他答案，并建议您研究现有的解决方案。但是，如果您真的想自己做这件事，您可以使用 PHP 的魔法方法来动态创建所有这些 getter 方法。[以下](https://stackoverflow.com/questions/2407807/object-oriented-php-best-practices/2408805#2408805)是如何做到这一点的简要说明。您可以轻松地调整此代码以从数据库返回数据，而不是像示例中那样返回数组。

但实际上，您应该研究现有的解决方案，它们会为您省去很多麻烦。

# c# - 使用本机 RegisterRoutes 创建优雅的 url，避免使用查询字符串

> ID：10691982
> 
> 赞同：0
> 
> 时间：2012-05-21T20:15:45.403
> 
> 标签：c#, asp.net-mvc-3, routes, friendly-url

这是当前为属性详细信息页面生成的 url。

```
http://localhost:61346/Property/Details?strap=0001020005 
```

我想读这个

```
http://localhost:61346/Property/Details/0001020005 
```

这是我注册的路线。这在 MVC3 中设置简单吗？解释如何为此格式设置“RegisterRoutes”的额外要点

`http://localhost:61346/Property/0001020005` <--只是隐藏动作名称

```
 public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapRoute(
                   "Property", // Route name
                   "{controller}/{action}/{ParcelId}", // URL with parameters
                   new { controller = "Property", action = "List", ParcelId = UrlParameter.Optional } // Parameter defaults
               );

            routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            );

            routes.MapRoute(
"Details", // Route name
"{controller}/{action}/{id}", // URL with parameters
new { controller = "Property", action = "Details" } // Parameter defaults
);         

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:28:07.907

如果您删除`Details`and`Property`路由并将您的`Details`and`List`操作方法更改为接受`string id`作为参数，您的默认路由应该采用该格式。您的`Property`路线与默认路线冲突。

您想要的格式与默认路由兼容。您只需要更改参数名称以适应处理此问题。

`public ActionResult Details(string id){...}`

和

`public ActionResult List(string id){...}`

和

```
public static void RegisterRoutes(RouteCollection routes)  {
  routes.IgnoreRoute("{resource}.axd/{*pathInfo}");    
  routes.MapRoute(
                 "Default", // Route name
                 "{controller}/{action}/{id}", // URL with parameters
                 new { controller = "Home", action = "Index", id =UrlParameter.Optional  
                 });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T20:54:04.377

为了更清晰地映射您的 URL，您只需将 URL 中的值映射到您的操作方法中的参数。由于您正在使用`strap`，因此您需要一个映射它的路线，就像您的“财产”路线一样：

```
routes.MapRoute( 
    "PropDetails", // Route name 
    "{controller}/{action}/{strap}", // URL with parameters 
    new { controller = "Property", action = "Details" }
); 
```

但请注意，您的路线将按照您定义它们的顺序使用。因此，在您列出的那些中，`Default`并且`Details`永远不会被实际使用，因为`Property`它们会全部捕获。相反，您可能想要更多类似的东西：

```
routes.MapRoute( 
    "PropDetails", // Route name 
    "Property/Details/{strap}", // URL with parameters 
    new { controller = "Property", action = "Details" }
); 
```

这将确保只有路由匹配`/Property/Details/{strap}`会受到影响（例如您的示例 URL），并且您不会对`/Something/Else/`.

要回答您关于 {id} 的问题，这只是路线中定义的内容。您可以随意命名，例如 {strap}。但是，如果您重写您的操作方法以接受 a `string ID`，那么您将丢失查询字符串，而无需修改您的路线。

```
public ActionResult Details (string id) { ... }  // Don't have to modify your routes
public ActionResult Details (string strap) { ... } // Have to modify your routes to remove the querystring 
```

# foursquare - Foursquare 网站场地搜索与 api 搜索不匹配

> ID：10691988
> 
> 赞同：1
> 
> 时间：2012-05-21T20:15:54.200
> 
> 标签：foursquare

答案可能只是在暗示我，但这让我很烦恼

我一直在做一个简单的搜索，试图找到我附近的所有户外野餐点。所以我在我的邮政编码中搜索 picnic，我得到了一个结果列表。
[https://foursquare.com/search?tab=tipResults&q=picnic&lat=&lng=&near=10001](https://foursquare.com/search?tab=tipResults&q=picnic&lat=&lng=&near=10001)

然后，我尝试使用 api（场所/探索端点）进行相同的搜索，以查看我的应用程序是否运行良好，并获得完全不同的地点列表。我一直在使用的 api url 是
[https://api.foursquare.com/v2/venues/explore?near=10001§ion=outdoors&query=picnic&radius=5000&client_id=XXXX&client_secret=YYYY](https://api.foursquare.com/v2/venues/explore?near=10001&section=outdoors&query=picnic&radius=5000&client_id=XXXX&client_secret=YYYY)

顺便说一句，如果我不包括半径，它只返回 1 个条目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T06:55:09.150

您提供的网址：[https ://foursquare.com/search?tab=tipResults&q=picnic&lat=&lng=&near=10001](https://foursquare.com/search?tab=tipResults&q=picnic&lat=&lng=&near=10001)

提示结果在 10001 左右。

您提供的 API 调用：[https ://api.foursquare.com/v2/venues/explore?near=10001§ion=outdoors&query=picnic&radius=5000&client_id=XXXX&client_secret=YYYY](https://api.foursquare.com/v2/venues/explore?near=10001&section=outdoors&query=picnic&radius=5000&client_id=XXXX&client_secret=YYYY)

是单个探索搜索 api 调用。

这两个是非常不同的，并且会产生不同的结果

尝试通过 API 运行提示搜索（API docs at [this place](https://developer.foursquare.com/docs/tips/search)）：

`https://api.foursquare.com/v2/tips/search?near=10001&query=picnic`

（[直接测试链接](https://developer.foursquare.com/docs/explore#req=tips/search?near=10001&query=picnic)）

让我们知道这是否可以解决问题。

# java - 在 android 或 java/activemq/tomcat 上禁用 ssl 会话缓存

> ID：10691989
> 
> 赞同：0
> 
> 时间：2012-05-21T20:15:58.443
> 
> 标签：java, android, tomcat, ssl, activemq

我有一个使用 stomp+ssl 连接到 tomcat6 上的 activemq 服务器的 android 客户端。不幸的是，重用会话时连接挂起：

```
ActiveMQ Transport: ssl:///10.0.0.182:56501, WRITE: TLSv1 Handshake, length = 32
[Raw write]: length = 37
0000: 16 03 01 00 20 D7 1D 61   C2 70 38 B6 30 10 33 39  .... ..a.p8.0.39
0010: 7C 4E 1E DC 7E 10 C3 8F   80 E4 51 92 DD CD 10 C9  .N........Q.....
0020: BF 8C B3 B8 8D                                     .....
%% Cached server session: [Session-6, SSL_RSA_WITH_RC4_128_MD5] 
```

我很快就需要一个解决方案，所以我正在考虑禁用 ssl 会话缓存，但我无法做到。

更新：在 android 4.0 中它可以完美运行！那么如何将 android 4 jsse 提供程序放在 Android 2.3 上呢？

在客户端我有这段代码：

```
InputStream clientTruststoreIs = getResources().openRawResource(R.raw.truststore);
KeyStore trustStore = null;
trustStore = KeyStore.getInstance("BKS");
trustStore.load(clientTruststoreIs, "xxxxx".toCharArray());

System.out.println("Loaded server certificates: " + trustStore.size());

TrustManagerFactory tmf = null;
tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
tmf.init(trustStore);

InputStream keyStoreStream = getResources().openRawResource(R.raw.client);
KeyStore keyStore = null;
keyStore = KeyStore.getInstance("BKS");
keyStore.load(keyStoreStream, "xxxxxx".toCharArray());

KeyManagerFactory kmf = null;
kmf = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
kmf.init(keyStore, "xxxxxxxxx".toCharArray());

SSLContext ctx = SSLContext.getInstance("SSL");
ctx.init(kmf.getKeyManagers(), tmf.getTrustManagers(), null);
stomp = new Stomp("tcp://" + sp.getString("host", "default.host.it")+   ":"+ sp.getString("port", "61614"));
stomp.setSslContext(ctx); 
```

在服务器上，我只有这样的 context.xml：

```
<broker:broker useJmx="true" persistent="false"
    brokerName="prato">

  <broker:sslContext>
    <broker:sslContext   keyStore="classpath:keystore.jks" trustStore="classpath:truststore.jks"    keyStorePassword="xxxxxx" trustStorePassword="xxxxx"/>
  </broker:sslContext>
  <broker:transportConnectors>
<broker:transportConnector name="vm"    uri="vm://prato" />
<broker:transportConnector name="tcp" uri="tcp://0.0.0.0:${openwire}" />
    <broker:transportConnector name="stomp" uri="stomp://0.0.0.0:${stomp}?Trace=true" />
<broker:transportConnector name="stompssl" uri="stomp+ssl://0.0.0.0:${stompssl}?needClientAuth=true" />
  </broker:transportConnectors>
</broker:broker> 
```

我能做些什么？提前感谢您的回复！

马里奥

# javascript - 寻找嵌套 , 并对其进行修改

> ID：10691992
> 
> 赞同：1
> 
> 时间：2012-05-21T20:16:08.070
> 
> 标签：javascript, android, html, css

我正在编写一个非常混杂的 Android 单位转换应用程序，使用各种可怕的东西让它变得漂亮。本质上，它通过 vebviews 执行 JS，并在花哨的微调器中显示根据任意大小列表格式化的 html，下面有缩写......等等等等。

反正。现在我有这样的事情：

```
for (l = 0; l < this.slotData.length; l += 1) {
    out += '<li>' + this.slotData[l].values[i] + " "+'<li class="sw-right">'+this.slotData[l].abbreviations[i]+'</li></li>';
} 
```

其中 slotData[l] 代表说“毫米”，缩写是“毫米”，它在下面，格式略有不同。这个想法是您可以输入数字，它们将显示在大毫米下方，小毫米旁边，这样您就可以看到“4400mm”。

我正在尝试在我的代码的不同位置访问和修改“sw-right”类的子 li。想知道是否有人知道一个简单的方法来做到这一点？我可以毫无困难地访问父母，但我不确定从那里去的正确方法是什么......

我的访问是这样的：

```
this.slotEl[slot]....... 
```

有什么想法吗？

多谢你们...

纳撒尼尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:27:51.527

我建议使用 jquery：

```
$('li.sw-right').html('html_you_want_set'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T20:47:05.753

您不应该尝试嵌套`<li>`元素。HTML 语法不允许嵌套列表项。由于`</li>`结束标签是可选的，浏览器很可能只是将您的嵌套项目视为第一个项目的兄弟，并丢弃第二个结束标签作为第二个项目的双重关闭。

附加：由于您试图组成一个由两部分组成的列表项，也许您真正想要的是一个[定义列表](http://htmlhelp.com/reference/html40/lists/dl.html)。对于嵌套在标签内的范围设置属性，请考虑使用[span](http://htmlhelp.com/reference/html40/special/span.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T20:25:36.223

你可以使用

```
var myNestedLI = document.getElementsByClassName( 'sw-right' )[ 0 ] 
```

或者

```
var topElements = document.getElementsByTagName( 'li' );

var nestedElements = []

for( var i = 0; i < topElements.length; i ++ )
{

var theseElements = topElements[ i ].getElementsByTagName( 'li' )

for( var j = 0 ; j < theseElements.length; j ++ ) nestedElements.push( theseElements[ j ] )

}

// nestedElements now contains all nested LI elements 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T21:22:01.720

正如 Sparky 指出的那样，您不能嵌套`<li>`这样的标签。第二个 li 将被视为与第一个不同的列表项，使它们成为兄弟。`<div>`相反，您想要的是`<li>`. Div 是一个通用的块级元素。*（块级意味着它们之间有一个换行符，通用意味着 div 的含义和样式完全取决于您。）*

我建议这个更具描述性的标记：

```
<li class="calculated-value">
  <div class="unit">*large unit name*</div>
  <div class="value">*small value with abbreviation*</div>
</li> 
```

在您的 CSS 中，以下规则将使值 div 显示更小：

```
li.calculated-value div.value { font-size: 75%; } 
```

(You can add additional rules to give it an indentation, better spacing, bold or color settings, etc. And you can add another line for div.unit that styles that one separately.)

# mercurial - 在 mercurial 中退出多个变更集的最佳方法是什么？

> ID：10691993
> 
> 赞同：16
> 
> 时间：2012-05-21T20:16:10.237
> 
> 标签：mercurial

是一个最可靠的方法，对许多变更集中的每一个使用回退命令，或者有没有办法创建一个大的反转变更集来覆盖一大堆*[编辑：非连续的]*变更集。

如果一对一，顺序重要吗？（应该从后到先吗？）

如果在此过程中不同子项目之间存在合并，最好的方法会有所不同吗？

根据您的经验，这是否会顺利进行？:-)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-21T20:30:28.407

如果您在此过程中没有合并，您可以撤消每个单独的更改（以相反的顺序），或者，如果其中有很多，则使用一个大的反向补丁来完成。

如果您在需要退出的变更集之上有好的变更集，最好在最近的错误变更集之上提交反向补丁，然后将它们重新定位到分支的尖端。

```
1 -- 2 -- A -- B -- C -- 3 -- 4
                     \
                      C'B'A'

$ hg up C
$ hg diff -r C:2 > backout.diff
$ hg import --no-commit backout.diff
$ hg ci -m "Backout A, B, C"
$ hg up 4
$ hg rebase -s C'B'A -d . 
```

**如果您想退出合并变更集**，将会出现问题，请参阅[此 wiki 页面](http://mercurial.selenic.com/wiki/Backout)以获取更多信息。

在这种情况下，如果可能，请考虑重新进行分支并剥离旧的血统。否则，您可能不得不完全放弃分支，通过移植或移植来挽救好的变更集。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-10T08:52:46.263

有. `--collapse`_`rebase`

[Helgi](https://stackoverflow.com/users/67988/helgi)的[回答](https://stackoverflow.com/a/10692175/109747)可以升级为：

```
1 -- A -- 2 -- B -- 3 -- C -- 4 -- 5
                          \
                           C' -- B' -- A'

$ hg update --clean C
$ hg backout --rev C --message "Backed out changeset: C"
$ hg backout --rev B
$ hg commit --message "Backed out changeset: B"
$ hg backout --rev A
$ hg commit --message "Backed out changeset: A"
$ hg rebase --collapse --source C' --dest 5
$ hg commit --message "Backed out C, B, A" 
```

这将导致以下结果

```
1 -- A -- 2 -- B -- 3 -- C -- 4 -- 5 -- C'B'A' 
```

但是，在单独的分支中退出可能会导致后续合并中的*[逻辑]*冲突。

```
1 -- A -- 2 -- B -- 3 -- X  --  4 
                     \           \
                      B' -- A' -- M 
```

如果`X`依赖`A`or `B`，那么`M`就会有冲突*（至少是逻辑冲突）*。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-22T01:01:57.373

我想出的是不雅的，但完成了工作，尽管我需要退出的更改穿插在其他工作中并且有一些内部分支。这就是我所做的。（欢迎评论和改进。）

得到了所有变更集的列表（然后我用它来生成下面的命令）：

```
hg log -r 'keyword(xyz)' --template '{rev}\n' 
```

为每个变更集生成一个补丁：

```
hg diff -p -U 8 --reverse -c 15094 > 15094.rev.patch
hg diff -p -U 8 --reverse -c 15095 > 15095.rev.patch
... 
```

然后，应用每个反向补丁。这里的顺序很重要，从后到前：

```
hg import -m "reversing changeset 15302" 15302.rev.patch
hg import -m "reversing changeset 15292" 15292.rev.patch
... 
```

对于没有自动完成的合并，此过程多次中断，我必须手动将更改从其 .rej 文件应用到文件，然后手动提交，然后再从中断的地方继续导入。

最后（在另一个克隆中......我是否提到我在一个克隆中完成了这一切？）我使用`hg histedit -o`它的 fold 命令将整个反向变更集压缩到一个变更集中。

现在我有一个单一的变更集，如果我决定在以后将工作放回原处，我应该能够撤消和应用（尽管如果我越过那座桥，我可能会按顺序再次零碎地应用“前向”补丁以获得更好的责备/注释信息）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-09T13:16:59.570

这就是使用 TortoiseHg 的方法。当然你也可以用命令行做同样的事情。

鉴于这段历史，您不想摆脱变更集 A、B 和 C：

```
1 -- 2 -- A -- B -- C -- 3 -- 4 
```

第一次更新到第 2 版。

然后重新设置您不想保留的任何后续版本中的第一个 - 在本例中为版本 3。

你的历史现在看起来像这样：

```
1 -- 2 -- A -- B -- C
      \
       3 -- 4 
```

现在更新到修订版 4。

最后使用“与本地合并”将修订 C 合并到修订 4。

**此时，选择“放弃合并目标（其他）修订版中的所有更改”选项至关重要。**

描述可能不是最合乎逻辑的，但这意味着您将旧提示 C 合并回默认分支 - 但没有变更集 A、B 和 C。

结果是：

```
1 -- 2 -- A -- B -- C --
      \            /
       3    --    4 
```

提交，你就完成了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T20:44:14.047

如果您不想在历史记录中“退出”变更集，您还可以执行其他操作：
克隆您的存储库，但仅限于您不想删除的最后一个变更集。

有关如何执行此操作的示例，请参阅[Mercurial: Fix a borked history 。](https://stackoverflow.com/questions/3310222/mercurial-fix-a-borked-history)

如果您的存储库是本地存储库，那么这就是您所要做的。
**但是**，如果错误的变更集已经被推送到中央存储库，您需要服务器访问权限才能删除那里的存储库并用您的克隆替换它。
另外，如果其他人已经从带有错误变更集的回购中拉出，他们需要删除并重新克隆（否则一旦其他人再次推送，错误的变更集就会再次出现在中央回购中）。
因此，这取决于具体情况，此解决方案是否适合您...