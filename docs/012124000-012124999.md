# StackOverflow 问答 12124000-12124999

# html - DOCTYPE有什么实际作用吗？

> ID：12124002
> 
> 赞同：11
> 
> 时间：2012-08-25T17:08:25.343
> 
> 标签：html, doctype

> **可能重复：**
> [怎么了，Doctype？](https://stackoverflow.com/questions/414891/whats-up-doctype)

添加[*DOCTYPE*](http://htmlhelp.com/tools/validator/doctype.html)是一种最佳实践——HTML 验证器希望看到它。从理论上讲，它通过声明正在使用哪种 HTML 风格来使文档更好。换句话说，这是您*应该*始终做的事情。

也就是说，我没有看到任何浏览器似乎使用它的情况。我在各种浏览器中尝试了多种风格的 HTML，但找不到一个示例，其中添加了 DOCTYPE 时文档呈现不同。

有谁知道 DOCTYPE 在浏览器中有任何实际影响的情况？

这个问题不同于[什么是 DOCTYPE？](https://stackoverflow.com/questions/414891)它不要求提供 DOCTYPE 的存在在浏览器中具有可观察效果的具体示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T17:11:13.270

标签本身有很大的影响，主要是对 Internet Explorer，因为它使页面以更接近标准的方式呈现（如果文档不以 doctype 声明开头，IE 进入 quirks 模式）。

在 IE8 或 IE9 中简单地设置 doctype fix bad rendering 有很多情况。

话虽如此，现在不应指定精确的文档类型，并且由于您可能遵循 HTML5 规范，您应该简单地设置

```
<!DOCTYPE html> 
```

（见[http://webdesign.about.com/cs/doctype/a/aaquirksmode.htm](http://webdesign.about.com/cs/doctype/a/aaquirksmode.htm)）

**一个额外的提示：**

IE 并没有尽可能地遵循 HTML5 规范，除非你坚持使用互补的元标题：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

（请参阅[IE9 Float with Overflow:Hidden 和 Table Width 100% Not Displaying 正确显示](https://stackoverflow.com/questions/10305631/ie9-float-with-overflowhidden-and-table-width-100-not-displaying-properly/10305733#10305733)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T17:17:15.163

是的，它确实有一个真正的效果：它改变了浏览器的渲染模式。大多数浏览器都有两种渲染模式：标准模式和怪癖模式。一些浏览器有第三种渲染模式，通常称为“几乎标准”。

*   不添加 DOCTYPE 会强制浏览器进入 quirks 模式
*   添加`strict`DOCTYPE 使浏览器进入标准模式
*   `transitional`当您使用DOCTYPE时，某些浏览器会进入“几乎标准”模式

在 quirks 模式下，浏览器会模仿自己的旧版本并以不同的方式呈现框、对齐等。“几乎标准”模式是标准模式，对表格中的图像具有不同的行为，以模仿我们过去在旧 HTML 中使用透明图像对齐表格中的内容。

您可以在这篇 Mozilla 开发者网络文章中阅读更多相关信息：[https ://developer.mozilla.org/en-US/docs/Quirks_Mode_and_Standards_Mode?redirectlocale=en-US&redirectslug=Mozilla%27s_Quirks_Mode](https://developer.mozilla.org/en-US/docs/Quirks_Mode_and_Standards_Mode?redirectlocale=en-US&redirectslug=Mozilla%27s_Quirks_Mode)

# haskell - 在 Haskell 列表中映射函数列表

> ID：12124004
> 
> 赞同：8
> 
> 时间：2012-08-25T17:08:35.807
> 
> 标签：haskell, map

我在 Haskell 中实现 FP (Backus) 解释器时遇到问题。

FP 函数如下所示：

```
[+,*]:<2,3> 
```

应该导致

```
<+:<2,3>, *:<2,3>> ->
<5,6> 
```

这意味着左侧列表中的每个函数都应该在右侧列表的每个元素上执行。

我的理解是，我需要类似于“map”函数的东西，但是 map 在列表中应用一个函数，并且我需要在值列表中使用函数列表。

先感谢您！:-)

编辑：

由于我不准确，这是我的代码不起作用：

```
apply :: [String] -> [Integer] -> [Integer]
apply fs v = [((apply_f f x) | f <- fs | x <- v)]

apply_f :: String -> [Integer] -> [Integer]
apply_f "+" v = [(sum v)]
apply_f "*" v = [(product v)] 
```

我不知道为什么... :-(

编辑2：

对不起，我整天工作太累了。问题是我不需要第二个管道，只需要第一个：

```
apply fs v = [ apply_f f v | f <- fs ] 
```

现在，一切正常，非常感谢！:-)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-25T17:21:13.350

我相信您正在寻找该`zipWith`功能并将其与 function application operator 一起应用`$`。

所以，如果你有一个函数`funcList`列表和一个值列表，`valueList`你可以这样调用：

```
zipWith ($) funcList valueList 
```

所以，使用它就像

```
zipWith ($) [(+ 5),(* 3)] [1,5] 
```

给你结果`[6,15]`

要获得一种交叉应用程序，您可以使用

```
[f a | f <- [(+5), (*3)], a <- [1,5]] 
```

这给了你`[6,10,3,15]`。不知道你所说的`<是什么意思，你想要对，嵌套列表还是你需要什么？

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-25T17:36:56.193

听起来你想要：

```
import Control.Applicative
apply :: [a -> b] -> [a] -> [b]
apply fs vals = fs <*> vals 
```

当然，这与`<*>`为列表定义的实例相同。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-25T17:42:22.073

你想要这样的东西吗？

```
[f x | f <- [(+3),(*2)], x <- [1..2]] 
```

输出：

```
[4,5,2,4] 
```

编辑：

所以像这样的东西？

```
[[f x | f <- [(+3),(*2)]] | x <- [1..2]]
[[4,2],[5,4]] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T17:53:44.197

我无法从您的解释中找出任何东西，但这是一个可能的代码，它为您的示例提供了正确的答案：

```
> map (uncurry foldr1) [((+), [2,3]), ((*), [2,3])]
[5,6] 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-25T17:39:10.763

我不知道它是否真的是你需要的，但是

```
Prelude> [f 2 3 | f <- [(+), (*)]]
[5,6] 
```

如果您需要 <2,3> 对的列表，您可以使用类似

```
Prelude> [zipWith f [2, 20] [3, 30] | f <- [(+), (*)]]
[[5,50],[6,600]] 
```

# sql - 计算关系的最有效方法

> ID：12124008
> 
> 赞同：2
> 
> 时间：2012-08-25T17:09:16.143
> 
> 标签：sql, database

例如，如果您有一个用户表，以及用户之间的朋友映射器。您是否应该在用户中添加一个名为“friends-count”的额外列并在每次他们添加朋友时更新它，或者您是否应该在每次需要计数时进行计数查询。哪个效率更高？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T17:17:56.687

为什么你会有两个版本的真相，如果它们不同步你会怎么做......你将如何确定这一点。

最有效的方法是每次计数，维护缓存的支持和验证工作可能会超过任何计算收益。与开发人员的工作相比，CPU 周期很便宜。

如果它最终成为您应用程序中的瓶颈，那么请查看缓存，然后您会从缓存中获得实实在在的好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T13:48:50.903

这取决于。正如joocer所说，更有效的选择是每次都计数，这并不总是正确的。

当您的系统有关于查询的人不多的关系信息的频率允许查询在下一个查询到来之前返回结果时，这可能是正确的（限制取决于您的架构效率）。我的意思是，如果你可以在 1 秒内统计友谊，并且你在一秒钟内收到 10 个计数请求，那么你的系统很快就会崩溃。

例如，在一个大且经常被查询为“Facebook”的系统上，针对每个请求的计数操作并不是真正有效的。

计数字段的并发可以通过许多高级技术（通过中间层、前端甚至是数据库，具体取决于您对每种架构的偏好）来处理，并且系统不会过度工作，这不依赖于很多由数据库大小。

如果您会说出有关架构的更多详细信息，则可以针对您的具体案例获得更好的答案。

缓存是一种类似的方式来表示存储计数额外的列（例如，数据库物化视图，我倾向于建议你，如果你的 RDBMS 支持它）。根据缓存实现的不同，它通常比以最佳方式直接在 RDBMS 上存储额外信息效率低。

# http - Dreamweaver 通过 HTTP 连接到站点

> ID：12124010
> 
> 赞同：4
> 
> 时间：2012-08-25T17:09:24.863
> 
> 标签：http, connection, webserver, expression, dreamweaver

在 Microsoft Expression 2003 中，我可以使用他们程序中提供的“HTTP”方法连接到我客户的网站。

在 Expression 中，我需要连接和访问文件的唯一三个值是网站域、用户名和密码。但是，这是我能够连接到他们的服务器的唯一方法。

我通常使用 Adob​​e Dreamweaver 在网站上工作。

是否有与 Expression 的 HTTP 连接等效的 Adob​​e Dreamweaver？

谢谢你的帮助。

PS 如果这很重要，该网站正在 IIS 服务器上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:28:58.117

## [**Dreamweaver 帮助 / 连接到远程服务器**](http://helpx.adobe.com/dreamweaver/using/connect-remote-server.html)

在 Dreamweaver 中指定本地站点后，您也可以为站点指定远程服务器。远程服务器（通常称为 Web 服务器）是您发布站点文件的位置，以便人们可以在线查看它们。远程服务器只是另一台计算机，就像您的本地计算机一样，上面有一系列文件和文件夹。您将在远程服务器上为您的站点指定一个文件夹，就像您在本地计算机上为本地站点指定一个文件夹一样。

Dreamweaver 将指定的远程文件夹称为您的远程站点。

设置远程文件夹时，您必须为 Dreamweaver 选择一种连接方法，以便将文件上传到您的 Web 服务器或从您的 Web 服务器下载文件。最典型的连接方式是 FTP，但 Dreamweaver 也支持本地/网络、FTPS、SFTP、WebDav 和 RDS 连接方式。如果您不知道使用哪种连接方法，请咨询您的 ISP 或服务器管理员。

> 注意：Dreamweaver 还支持连接到启用 IPv6 的服务器。支持的连接类型包括 FTP、SFTP、WebDav 和 RDS。有关更多信息，请参阅 www.ipv6.org/

## 指定连接方法

**WebDAV 连接：**

如果您使用基于 Web 的分布式创作和版本控制 (WebDAV) 协议连接到您的 Web 服务器，请使用此设置。

对于此连接方法，您必须拥有支持此协议的服务器，例如 Microsoft Internet Information Server (IIS) 5.0 或适当配置的 Apache Web 服务器安装。

**RDS 连接：**

如果您使用远程开发服务 (RDS) 连接到 Web 服务器，请使用此设置。对于这种连接方法，您的远程服务器必须在运行 Adob​​e® ColdFusion® 的计算机上

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T20:08:41.683

如果您只想使用 Dreamweaver 并填写主机、用户名和密码，则可以使用 WebDAV 连接。然而，WebDav 在 Linux apache 环境下工作得非常好，但是在 IIS 上安装它有点困难。

![网络视频](../Images/d80dbdc14144144201546f48f3f3c869.png)

*看看[这个网站](http://learn.iis.net/page.aspx/350/installing-and-configuring-webdav-on-iis/)，一步一步地解释如何在使用它之前在 IIS 上正确安装和配置 WebDAV。*

# android - 如何处理多个按钮的回调？

> ID：12124011
> 
> 赞同：4
> 
> 时间：2012-08-25T17:09:25.410
> 
> 标签：android, android-fragments, android-activity

我对 Android 开发很陌生，我正在尝试处理从片段类到我的活动的多个按钮点击。我能够通过在我的片段类中创建一个侦听器然后让活动类实现该接口来弄清楚如何处理一次单击。

我的片段.java

```
 onResetGridListener mCallback;

    // Container activity must implement this interface
    public interface onResetGridListener
    {
        public void ResetGridClicked();
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, 
        Bundle savedInstanceState) 
    {
        // Inflate the layout for this fragment
        View view = inflater.inflate(R.layout.tilemap, container, false);

        Button button = (Button) view.findViewById(R.id.resetGrid_button);

        // A simple OnClickListener for our button. You can see here how a Fragment can encapsulate
        // logic and views to build out re-usable Activity components.
        button.setOnClickListener(new OnClickListener() 
        {
            public void onClick(View v)
            {
                mCallback.ResetGridClicked();
            }

        });

        return view;
    } 
```

这很好用，但是我现在在同一个片段中有另一个按钮，还有更多按钮，所以我想知道如何处理这个。活动是否可以实现多个界面（每个按钮一个）或者我是否以错误的方式进行此操作？

感谢您的时间和信息

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-25T17:21:49.360

你可以让你的 Fragment 实现接口。然后它看起来像这样：

```
 //init buttons somewhere
 button.setOnClickListener(this);
 anotherButton.setOnClickListener(this);

 //that's a Fragment method
 public void onClick(View v)
   {
      switch(v.getId()){
          case R.id.button1:
            doStuff();
          break;
          case R.id.button2:
            doStuff();
          break;
      }
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T17:25:17.483

有两种使用监听器的方法：

1.  在这种情况下，通过封装类实现 OnClickLitener，您将在 Fragment 类中拥有此代码

    ```
    button1.setOnClickListener(this) ; 
    button2.setOnClickListener(this) ;

    // you will have to define the clickHandler:onClick
     public void onClick(View v)
       {
          switch(v.getId()){
              case R.id.button1:
                // your code here 
              break;
              case R.id.button2:
                // your code here 
              break;
          }
       } 
    ```

2.  为每个按钮定义一个监听器：

```
 button1.setOnClickListener( new View.OnClickListener() {
    public void onClick(View v) {
                     // Perform action on click
                 }
             });
 button2.setOnClickListener( new View.OnClickListener() {
                 public void onClick(View v) {
                     // Perform action on click
                 }
             }); 
```

通过这种方式，您不必实现 onClickListener 接口。

# r - ArcView 和/或 R 是否使用显卡 (GPU) 加速

> ID：12124014
> 
> 赞同：3
> 
> 时间：2012-08-25T17:09:34.223
> 
> 标签：r, gis, gpu, acceleration

几乎和标题中所说的完全一样。我想买一台新电脑，因为我厌倦了花 2 个小时等待在 ArcView 中编辑一个点，我很好奇 ArcView 或 R 是否使用 GPU 加速。我计划购买 Intel i7 3770k 处理器（并使用其板载 Intel HD 4000 显卡）和三星 SSD 以通过相当多的 RAM 来加快速度。但是，当我向不使用 GIS 或 R 的知识渊博的计算机用户提出问题时，他们询问了 GPU 以及任何一个程序是否使用 GPU 加速。据我所知，他们没有，但我想我会寻求更有见识的第二意见。

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T18:12:59.280

请参阅[此线程](https://gis.stackexchange.com/questions/18800/optimal-video-cards-for-gis-programs)和 ArcGIS 站点。ArcGIS 不支持 GPU 计算（与 Manifold 不同），因此基本的 3D 卡就可以了。一些额外的 RAM 和 SSD 是这里的明显选择。

在 R 中，实现/使用并行和 GPU 支持的计算很大程度上是您自己的责任，即目前还没有很多开箱即用的解决方案（请参阅[HPC 任务视图](http://cran.r-project.org/web/views/HighPerformanceComputing.html)中“应用程序”下的几个包- 已经在注释）。除非您打算开始一些严肃的 GPU 或 CPU 并行编程，否则无需购买任何特别的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T19:03:19.823

在 R 中，您可以使用该[`gputools`程序包](http://cran.r-project.org/web/packages/gputools/index.html)在 GPU 上进行计算，但您必须编写自己的统计算法。也许几年后它们就会出现，以至于通用算法将具有基于 GPU 的实现。

# iphone - 使用委托和 IBAction 进行子类化

> ID：12124017
> 
> 赞同：1
> 
> 时间：2012-08-25T17:09:45.980
> 
> 标签：iphone, objective-c, ios, cocoa-touch, interface-builder

假设我有以下`GenericMoviePlayer`具有以下插座的类：

*   播放按钮
*   暂停按钮
*   完成按钮

那些`IBOutlet`s 有它们对应的`IBActions`：

```
- (void) playTouched:(id)sender;
- (void) pauseTouched:(id)sender;
- (void) doneTouched:(id)sender; 
```

当这些按钮被触摸时，我班的一名代表就会被告知。

现在这一切都很好，但想象一下我现在想要一种特殊类型的播放器，它应该从这个更通用的播放器继承。我现在将在委托协议中拥有新的 Outlets、新的 Actions 和新的方法。那么我该如何实现呢？

子类化和 IBOutlets 很好地结合在一起，但我不知道我必须如何设计我的子类，以便我可以“继承” IBActions 并覆盖委托协议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:00:07.843

由于`IBAction`s 是在您的`GenericMoviePlayer`标头中定义的，因此您可以在`SpecificMoviePlayer`xib 中使用这些方法。因此，当您在 xib 中连接这些按钮时，这些`GenericMoviePlayer` `IBAction`s 将可供您使用。从技术上讲，如果您`SpecificMoviePlayer`需要向播放/暂停/完成方法添加功能（或完全更改该功能），您可以覆盖这些方法。

这是一种高层次的概述，但如果你有你想要完成的具体示例，我很乐意为你提供帮助。我认为您的问题需要进一步澄清您希望完成的工作（除了代码的重用）。

# ajax - 我应该使用哪些框架/工具来使用 MVC4 构建一个简单的单页应用程序？

> ID：12124022
> 
> 赞同：0
> 
> 时间：2012-08-25T17:10:11.580
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-4

我正计划使用 Microsoft 单页应用程序项目模板，但这已从 RC 开始被立即取消。

有人问我，是的，这是一个家庭作业问题，使用 MVC3 或更高版本构建一个简单的联系人管理器，绝对最小的整个页面请求和最大的 ajax 用于 UI 更新。我想知道是否有一组推荐的库和框架可供我使用？我将为此进行所有自己的编码，但我可以进行研究等。我看到 SPA 应用程序使用了 Knockout.js。还有什么我可以/应该使用的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T17:14:14.790

由于您的要求是构建一个**简单的联系人管理器**，我强烈建议您使用

*   [骨干网.js](http://backbonejs.org/)

如果您只想为此使用 Knockout.js，您可能想[阅读](https://stackoverflow.com/a/5135891/1182982)关于 SO 的讨论。

还有一个使用 Backbone.js 制作联系人管理器的教程系列，见下文

[使用 Backbone.js 构建联系人管理器：第 1 部分](http://net.tutsplus.com/tutorials/javascript-ajax/build-a-contacts-manager-using-backbone-js-part-1/)

[使用 Backbone.js 构建联系人管理器：第 2 部分](http://net.tutsplus.com/tutorials/javascript-ajax/build-a-contacts-manager-using-backbone-js-part-2/)

[使用 Backbone.js 构建联系人管理器：第 3 部分](http://net.tutsplus.com/tutorials/javascript-ajax/build-a-contacts-manager-using-backbone-js-part-3/)

[使用 Backbone.js 构建联系人管理器：第 4 部分](http://net.tutsplus.com/tutorials/javascript-ajax/build-a-contacts-manager-using-backbone-js-part-4/)

[使用 Backbone.js 构建联系人管理器：第 5 部分](http://net.tutsplus.com/tutorials/javascript-ajax/build-a-contacts-manager-using-backbone-js-part-5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T07:59:31.253

你没有。的选项。如上面的答案所述，backbone.js 可能很有用。但我还必须通知您，还有另一个名为 knockout.js 的 MVVM 库，它在 VS2012 中正式与 mvc4 一起提供。你可以看看那个。 [http://knockoutjs.com/documentation/introduction.html](http://knockoutjs.com/documentation/introduction.html)

# ruby-on-rails - 页面加载完成后图片消失

> ID：12124025
> 
> 赞同：2
> 
> 时间：2012-08-25T17:10:33.657
> 
> 标签：ruby-on-rails

我使用以下代码在页脚中显示图像

```
<%= link_to(image_tag("Twitter-boxy-32.png"), "http://twitter.com/#!/hybrid_tech", :target => "_blank") %> 
```

我看了几秒钟的图片，但是页面加载完成后，图片消失了，有没有人知道这里有什么问题？？？

我正在使用 Rails 3.2.8 和 Chrome。它不会在 Firefox 或 Safari 中发生。

谢谢

* * *

更新

我不知道是什么问题。但这就是我解决的方法。

我为此更改了图像名称和网址

```
<%= link_to(image_tag("Twitter.png"), "http://twitter.com/hybrid_tech", :target => "_blank") %> 
```

它解决了我的问题，但我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-17T11:42:44.993

在 Rails 3.2.13 + Chrome 上更新图像文件后，我今天遇到了同样的行为。皮埃尔上面的评论启发了我的解决方案，谢谢！我能够通过 rails 服务器上的以下命令解决此问题（下面的“$”是 bash 提示符）：

```
(stop rails server)
$ cd RAILS_ROOT
$ bundle exec rake tmp:clear
(restart rails server) 
```

然后，从 Chrome 浏览器重新加载发布的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T23:40:01.600

我遇到了同样的问题，并且能够通过采取 2 个步骤来解决该问题：

*   在 Photoshop 中的“另存为 Web”下尽可能小地重新保存图像（同时保持质量）
*   简化文件名。示例：“bg-waves-autumn-texture”变为“bg-waves2”

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T18:15:02.510

这听起来不正常。如果图像在页面加载时加载然后消失并且考虑到该问题仅发生在 Chrome 上。我建议查看您的 JS 和 CSS 代码。也许那里有什么不对劲的地方。

# python - 在python中打印没有新行的语句？

> ID：12124026
> 
> 赞同：7
> 
> 时间：2012-08-25T17:10:35.677
> 
> 标签：python

我想知道是否有一种方法可以打印没有换行符的元素，例如

```
x=['.','.','.','.','.','.']

for i in x:
    print i 
```

这将打印`........`而不是通常打印的内容

```
.
.
.
.
.
.
.
. 
```

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-25T17:14:15.040

这可以通过 Python 3 的print **(** [)](http://docs.python.org/release/3.0.1/whatsnew/3.0.html) *函数*轻松完成。

 **```
for i in x:
  print(i, end="")  # substitute the null-string in place of newline 
```

会给你

```
...... 
```

在**Python v2**中，您可以通过包括以下内容来使用该`print()`函数：

```
from __future__ import print_function 
```

作为源文件中的*第一*条语句。

正如[print() 文档](http://docs.python.org/release/3.0.1/whatsnew/3.0.html)所述：

```
Old: print x,           # Trailing comma suppresses newline
New: print(x, end=" ")  # Appends a space instead of a newline 
```

请注意，这类似于我最近回答的一个问题 ( [https://stackoverflow.com/a/12102758/1209279](https://stackoverflow.com/a/12102758/1209279)`print()` )，如果您好奇的话，其中包含有关该函数的一些附加信息。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-25T17:12:01.927

```
import sys
for i in x:
    sys.stdout.write(i) 
```

或者

```
print ''.join(x) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-25T20:10:16.050

我很惊讶没有人提到用于抑制换行符的 pre-Python3 方法：尾随逗号。

```
for i in x:
    print i,
print  # For a single newline to end the line 
```

这确实会在某些字符之前插入空格，如此处[所述](http://docs.python.org/reference/simple_stmts.html#print)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-25T17:16:17.013

正如其他答案中提到的，您可以使用 sys.stdout.write 进行打印，也可以在打印后使用尾随逗号来完成空格，但另一种使用您想要的分隔符打印列表的方法是连接：

```
print "".join(['.','.','.'])
# ...
print "foo".join(['.','.','.'])
#.foo.foo. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-25T17:15:14.050

对于 Python3：

```
for i in x:
    print(i,end="") 
```**

# c# - 如何在应用程序运行期间保持文件句柄打开并防止更改

> ID：12124030
> 
> 赞同：1
> 
> 时间：2012-08-25T17:11:05.343
> 
> 标签：c#, winforms, file, io

在我的应用程序中，用户创建的对象可以序列化并保存为文件。用户还可以打开它们并继续处理它们（就像项目文件一样！）。我注意到我可以在程序打开文件时删除文件，我的意思是我只是将文件反序列化为对象，因此应用程序不再关心文件。

但是，当我的应用程序正在运行并且该文件已加载到程序中时，如何让该文件保持忙碌状态？这是我的`Save`和`Load`方法：

```
public static bool SaveProject(Project proj, string pathAndName)
{
    bool success = true;
    proj.FileVersion = CurrentFileVersion;

    try
    {
        using (var stream = new FileStream(pathAndName, FileMode.Create, FileAccess.Write, FileShare.None))
        {
            using(var zipper = new ZlibStream(stream, CompressionMode.Compress, CompressionLevel.BestCompression, true))
            {
                var formatter = new BinaryFormatter();
                formatter.Serialize(zipper, proj);
            }
        }

    }
    catch (Exception e)
    {
        MessageBox.Show("Can not save project!" + Environment.NewLine + "Reason: " + e.Message, "Error",
                        MessageBoxButtons.OK, MessageBoxIcon.Exclamation);

        success = false;
    }

    return success;
}

public static Project LoadProject(string path)
{
    try
    {
        using (var stream = new FileStream(path, FileMode.Open, FileAccess.Read, FileShare.Read))
        {
            using (var zipper = new ZlibStream(stream, CompressionMode.Decompress))
            {
                var formatter = new BinaryFormatter();
                var obj = (Project)formatter.Deserialize(zipper);

                if (obj.FileVersion != CurrentFileVersion)
                {
                    MessageBox.Show("Can not load project!" + Environment.NewLine + "Reason: File version belongs to an older version of the program." +
                        Environment.NewLine + "File version: " + obj.FileVersion +
                        Environment.NewLine + "Current version: " + CurrentFileVersion,
                        "Error",
                        MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
                    //throw new InvalidFileVersionException("File version belongs to an older version of the program.");
                }

                return obj;
            }
        }
    }
    catch (Exception ex)
    {

        MessageBox.Show("Can not load project!" + Environment.NewLine + "Reason: " + ex.Message, "Error",
                        MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
    }

    return null;
} 
```

那么我能做什么呢？如何为文件制作假句柄？我的意思是如何做到这一点，所以如果有人试图删除文件，Windows会通过“正在使用文件...”消息来阻止它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:01:25.877

> *FileShare.Read*：允许随后打开文件进行阅读。如果未指定此标志，则任何打开文件进行读取的请求（由该进程或其他进程）都将失败，直到文件关闭。

你用过

```
using (var stream = new FileStream(path, FileMode.Open, FileAccess.Read, FileShare.Read) 
```

将其更改为

```
using (var stream = new FileStream(path, FileMode.Open, FileAccess.Read, FileShare.None) 
```

**并且在 FileStream**关​​闭/处置之前，任何打开此文件的请求或任何其他操作都将*失败。*

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T19:50:58.890

不要这样做。如果用户故意删除该文件，那么他将有充分的理由这样做。

如果您通过锁定文件来防止这种情况发生，那么他将简单地杀死您的应用程序并删除该文件。您所做的只是造成不便，这种不便使用户发疯并让他们有理由运行卸载程序。如果您需要知道文件在程序运行时被删除，那么您可以使用 FileSystemWatcher 进行查找。**

# objective-c - 找不到实例方法

> ID：12124034
> 
> 赞同：0
> 
> 时间：2012-08-25T17:11:24.363
> 
> 标签：objective-c, xcode, cocos2d-iphone

我很困惑，我对 Objective-C 还不是很好，直到现在我一直在关注教程。

我决定将我在 multipul 视图中使用的所有函数添加到一个名为 GeneralHelper 的“CommonClass”中。

尝试调用我的函数时出现以下错误：

> 实例方法'-convertPoint:' 未找到（返回类型默认为'id'）

下面是我的代码：

我的 GeneralHelper.h 看起来像这样：#import

```
 @interface GeneralHelper : NSObject

    @end

    GeneralHelper* gHelper; 
```

我的 GeneralHelper.m 看起来像这样：

```
 #import "GeneralHelper.h"
    #import "WhackGame.h"
    #import "SimpleAudioEngine.h"
    #import "Settings.h"

    @implementation GeneralHelper
    -(CGPoint)convertPoint:(CGPoint)point {
        if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
            return ccp(32 + point.x*2, 64 + point.y*2);
        } else {
            return point;
        }
    }

    @end 
```

在我的 Initialize 方法中，我有：

```
 gHelper = [[GeneralHelper alloc] init]; //First, we create an instance of GeneralHelper 
```

我试图这样称呼它：

```
 mole1.position = [gHelper convertPoint:ccp(85, 85)]; 
```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T17:14:43.513

您需要`convertPoint:`在类的接口中声明您的方法。

```
@interface GeneralHelper : NSObject
- (CGPoint)convertPoint:(CGPoint)point;
@end 
```

标头充当“这是您使用此类所需的所有信息”，其中一条重要信息是“这是您可以发送给此类的消息，以及它们采用的参数”。

您的具体警告是由于编译器无法确定方法的返回类型而不在界面中看到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T17:13:58.977

`convertPoint:`您没有`@interface`像这样声明该方法：

```
@interface GeneralHelper : NSObject
- (CGPoint)convertPoint:(CGPoint)point;
@end 
```

此外，如果您想拥有一个 GeneralHelper 的共享实例，那也不是办法。相反，您应该有一个返回实例的类方法。

```
@interface GeneralHelper : NSObject
- (CGPoint)convertPoint:(CGPoint)point;
+ (GeneralHelper *)sharedHelper;
@end 
```

然后在您的实现中：

```
+ (GeneralHelper *)sharedHelper
{
    static GeneralHelper *sharedHelper = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        sharedHelper = [[GeneralHelper alloc] init];
    });
    return sharedHelper;
} 
```

然后在任何你需要的地方：

```
CGPoint convertedPoint = [[GeneralHelper sharedHelper] convertPoint:point]; 
```

或者，您可以简单地使用类方法：

```
@interface GeneralHelper : NSObject
+ (CGPoint)convertPoint:(CGPoint)point;
@end 
```

实现与以前相同，但使用 + 而不是 - 符号。在这种情况下，您不需要该`sharedHelper`方法，可以像这样简单地调用它：

```
CGPoint convertedPoint = [GeneralHelper convertPoint:point]; 
```

# asp.net - 如何显示文件夹 directoryInfo asp.net 的输出

> ID：12124036
> 
> 赞同：0
> 
> 时间：2012-08-25T17:11:31.650
> 
> 标签：asp.net, directoryinfo

我有这个 code_behind 从文件夹中获取一些信息，然后在我的页面上显示文件。

```
Sub fileinfo()
    Dim objDI As New System.IO.DirectoryInfo(Server.MapPath("upload/files/"))
    Dim allFile As New ArrayList()
    allFile.AddRange(objDI.GetFiles("*.png"))
    allFile.AddRange(objDI.GetFiles("*.jpg"))
    allFile.AddRange(objDI.GetFiles("*.bmp"))
    allFile.AddRange(objDI.GetFiles("*.gif"))
    allFile.AddRange(objDI.GetFiles("*.pdf"))
    allFile.AddRange(objDI.GetFiles("*.doc"))
    allFile.AddRange(objDI.GetFiles("*.docx"))

    Me.showfiles.DataSource = allFile
    Me.showfiles.DataBind()
End Sub 
```

然后我在我的主页上有这个代码，但是我得到了一个表格我怎么能这样做我只能得到 UL/LI 列表！？我是新手，不是专业人士。

```
<ul class="thumbnails">
                            <asp:DataList ID="showfiles" runat="server" RepeatColumns="5" CellPadding="10">
                                <ItemTemplate>
                                    <li class="span2"><a class="thumbnail" href="#"><asp:ImageButton ID="folderfiles" runat="server" ImageUrl='<%# string.Format("upload/files/{0}", DataBinder.Eval(Container.DataItem,"Name")) %>' ToolTip='<%# Bind("Name") %>' height="82" width="119" /></a></li>
                                </ItemTemplate>
                            </asp:DataList>
                            </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T17:24:31.147

好的，在这种情况下，只需`RepeatLayout="flow"`在 datalist 中设置属性，即

```
<asp:DataList ID="showfiles" runat="server" RepeatColumns="5" CellPadding="10" RepeatLayout="flow">
    <ItemTemplate>
        // existing stuff
    </ItemTemplate>
</asp:DataList> 
```

# android - 正确处理 try {} catch {}

> ID：12124043
> 
> 赞同：0
> 
> 时间：2012-08-25T17:12:24.887
> 
> 标签：android, android-layout, android-intent, android-widget

我正在制作一个应用程序，但我需要一些帮助。在活动的 oncreate 实践中，我有以下代码：

```
try{

    Bundle extras = getIntent().getExtras();
    check = extras.getInt("checkpoint1");

}catch(NumberFormatException nfe){

    check = 0;

} 
```

在 oncreate 中，您尝试从另一个活动中获取变量检查的值，如果尝试不成功，则必须将此变量设置为零。但是现在编写的代码给了我错误。你可以帮帮我吗？

你的帮助给了我同样的错误：

```
E/AndroidRuntime(3028): FATAL EXCEPTION: main
E/AndroidRuntime(3028): java.lang.RuntimeException: Unable to start activity ComponentInfo{it.BisMagdev.notesRainbow/it.BisMagdev.notesRainbow.livello4}: java.lang.NullPointerException
E/AndroidRuntime(3028):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
E/AndroidRuntime(3028):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
E/AndroidRuntime(3028):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
E/AndroidRuntime(3028):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
E/AndroidRuntime(3028):     at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(3028):     at android.os.Looper.loop(Looper.java:123)
E/AndroidRuntime(3028):     at android.app.ActivityThread.main(ActivityThread.java:4627)
E/AndroidRuntime(3028):     at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(3028):     at java.lang.reflect.Method.invoke(Method.java:521)
E/AndroidRuntime(3028):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
E/AndroidRuntime(3028):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
E/AndroidRuntime(3028):     at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(3028): Caused by: java.lang.NullPointerException
E/AndroidRuntime(3028):     at it.BisMagdev.notesRainbow.livello4.onCreate(livello4.java:60)
E/AndroidRuntime(3028):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
E/AndroidRuntime(3028):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
E/AndroidRuntime(3028):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T17:16:00.803

您可以设置默认返回值，无需 try-catch：

```
Bundle extras = getIntent().getExtras();
check = extras.getInt("checkpoint1", 0); 
```

此外，`getInt`不会抛出`NumberFormatException`，所以你无法捕捉到那个异常......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T17:17:38.807

我**不认为这些语句需要 try/catch 块**......所以删除它们并尝试......

```
Bundle extras = getIntent().getExtras();
check = extras.getInt("checkpoint1"); 
```

但是，您可以`"checkpoint1"`在将其分配给`check`变量之前检查它的值。

```
if ((extras.getInt("checkpoint1"))!=0){

        check = extras.getInt("checkpoint1");

 }
  else{

         check = 0;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T17:18:54.890

我认为你可以做到

```
if getIntent().hasExtra("checkpoint") { // this checks for the extra...
    Bundle extras = getIntent().getExtras();
    if (null != getIntent().getExtras()){
        check = extras.getInt("checkpoint", defaultValue); // where default is non zero
        check = extras.getInt("checkpoint"); // will be zero by default if checkpoint is not found
    } else {
        // There are no extras associated with this intent
    }
} else {
    // checkpoint not contained in the extras...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T09:51:27.563

You have to change NumberFormatException in Throwable so you are sure you catch NullPointerException too.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-25T17:39:57.520

livello4.java 的第 60 行是什么？我怀疑 getExtras() 返回的包是空的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-25T17:50:13.113

你捕获了 numberformatexception 但你得到了一个空指针异常。您也必须捕获空指针异常，或者您只需捕获异常。这意味着当出现问题时，您可以将变量设置为 0。

# algorithm - 我应该使用什么类型的算法？

> ID：12124045
> 
> 赞同：7
> 
> 时间：2012-08-25T17:12:26.470
> 
> 标签：algorithm, graph, nodes

假设我有四组

> A [ 0, 4, 9]
> 
> 乙 [ 2, 6, 11]
> 
> C [ 3, 8, 13]
> 
> D [ 7, 12 ]

现在我需要每个组中的一个数字（即一个新组）E [A 的数量，B 的数量，C 的数量，D 的数量]，这样 E 中的最大数量和 E 中的最小数量之间的差异应该是可能最低。这是什么类型的问题？哪种图算法会更好地解决这类问题？提前致谢。

PS：我正在尝试在 java 中解决这个问题，并对未指定的标题感到抱歉。

编辑：最后我找到了我真正想要的[http://rcrezende.blogspot.in/2010/08/smallest-relevant-text-snippet-for.html](http://rcrezende.blogspot.in/2010/08/smallest-relevant-text-snippet-for.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T17:34:20.337

1.  将每个组的内容组合成一个数组。数组的每个元素应该是一对（数字，组名）。
2.  按数字对该数组进行排序。
3.  一个接一个地推进两个迭代器。当不是每个组的元素都在这些迭代器之间时，移动第一个迭代器。当这些迭代器之间的每个组中都有一个元素时，移动第二个迭代器。有关详细信息，请参阅[此问题](https://stackoverflow.com/q/9775301/1009831)。
4.  迭代器之间的最小距离决定了最佳结果组（当同一组有多个代表时，您只需要删除不需要的元素）。

* * *

其他算法：

1.  对每个组的元素进行排序（如果尚未排序）。
2.  将每个组的最小元素的一对（编号，组名）放入优先级队列（最小堆，优先级=编号）。
3.  从队列中删除最小的元素并将其替换为同一组中的下一个元素。
4.  重复步骤 3，直到某个组中没有更多元素。计算每次迭代的 max(queue) - min(queue)，如果它小于任何先前的值，则更新迄今为止最好的结果组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T17:37:58.073

我认为您可以进行详尽的搜索，并快速终止，这并不像看起来那么糟糕。

例如，如果您从 A 和 B 中选择一个数字，您可以从 C 中选择两个最接近这两个数字的数字，使用任何其他数字都不会产生更好的结果。

*   对于 A 的每个元素：调用它`a`，您正在寻找一个接近区间 (a,a) 的数字
*   现在为每个组选择最接近的数字（您可以使用二进制搜索来完成）。现在你有了一个新的搜索区间，要么是 (a,b1) 要么是 (b2,a)

例子：

*   从 A 中选择 4，搜索接近 (4,4)
*   A) 从 B 中选择 2，搜索接近 (2,4)
*   .... 从 C 中选择 3，它在区间内。搜索接近 (2,4)
*   .... 从 D 中选择 7，区间为 (2,7)，距离为 5。
*   B) 从 B 中选择 6，搜索接近 (4,6)
*   ……

# javascript - JavaScript & c# - 如何检查隐藏元素的值

> ID：12124051
> 
> 赞同：3
> 
> 时间：2012-08-25T17:13:33.867
> 
> 标签：javascript, asp.net, code-behind

有（假设是）**隐藏模式下**的标签或文本框，从后面的代码将设置（文本值）为“用户”或“经理”。

`<tr>`当给定表格行（ ）上没有设置属性的点击事件时，我希望能够让 JavaScript 验证（隐藏）文本框/标签的值是什么`runat="server"`。

如果客户端尝试单击该行（实际上该行具有一些文本框元素），那么如果客户端尝试编辑例如单击该行，则将采取类似 js 函数的操作`alert("no edit allowed")`。

```
<tr id="TR_editTimein" onClick="javascript:CheckIfManager();">
    <td> <input type="text" id="timeIn" /></td>
</tr> 
```

1.  如果后面的代码识别出一个经理（来自`Request.QueryString`），它会将隐藏的 LBL 或 TXTBX 设置为“经理”

2.  JavaScript`onClick`事件结束`TR_editTimein`将触发`CheckIfManager()` 函数

3.  `CheckIfManager()`将询问隐藏元素的值，如果值为“用户”，它将发出警报（“非经理没有编辑选项”）

现在，如果我将 aspTextBox 设置为`Visible=false` JavaScript 也看不到它，会发生什么。

验证客户是用户还是经理的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T17:24:17.430

如果您设置`Visible=False`，ASP.NET 控件甚至不会在浏览器（客户端）中呈现。这意味着 DOM 将没有该对象，因此您无法使用`getElementById`.

另一种方法是使用`asp:HiddenField`呈现为 的 an `input type='hidden'`。

如果您有*坚定不移的需要*，请像这样使用`asp:Label`或`asp:TextBox`设置`display:none;`from 代码隐藏

```
myLabelID.Attributes.Add("style","display:none"); 
```

这样，对象将在浏览器中呈现并隐藏用户，允许您使用 JavaScript 获取该对象。

# css - 在 FF 中按下按钮中的文本

> ID：12124052
> 
> 赞同：0
> 
> 时间：2012-08-25T17:13:38.903
> 
> 标签：css, forms, firefox, button, twitter-bootstrap

我对[http://www.myprivacyaudit.com/](http://www.myprivacyaudit.com/)上的“检查”按钮有疑问。在 Firefox 中，它被下推并部分隐藏。你们中有人知道这是为什么吗？我已经花了几个小时，但找不到解决方案。顺便提一句。我正在使用 twitter-bootstrap

HTML：

```
<div class="row">
  <div class="span6 offset3">
    <div id="enter-username">
      <div id="tweet_form">
        <form accept-charset="UTF-8" action="/confirm" class="form" method="post">
          <span class="at">@</span> <input class="" id="twitter_account" name="twitter_account" type="text" />
          <br/>
          <input id="twitter_account_submit" name="commit" type="submit" value="Check" />
        </form>
      </div>
    </div>
  </div>
</div> 
```

CSS：

```
 input#twitter_account_submit {
    border: 5px solid black;
    background-color: #ff5255;
    font-family: 'Anton', sans-serif;
    font-size: 30px;
    height: 40px;
    margin-left: 50px;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T17:22:34.873

尝试改变这一点：

```
<input id="twitter_account_submit" name="commit" type="submit" value="Check"> 
```

对此：

```
<button id="twitter_account_submit" name="commit" type="submit">Check</button> 
```

在你的 CSS 文件中，改变这个：

```
input#twitter_account_submit 
```

对此：

```
#twitter_account_submit 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-25T17:29:20.370

检查按钮是一个内联元素。您已在其上声明了 40px 的高度，但您无法控制内联元素的高度。

此外，在您的样式表的前面，您声明了一个 18px 的行高，该行高正在向下传输到按钮。

完全删除您的高度声明并应用行高（尝试行高：120%），这对我有用。

# python - python 语言环境在我的机器上不起作用（osx 10.7.4）

> ID：12124053
> 
> 赞同：2
> 
> 时间：2012-08-25T17:13:45.330
> 
> 标签：python, macos, locale

当我尝试使用 python 语言环境时出现此错误

```
>>> locale.setlocale(locale.LC_ALL, 'de_DE')
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/locale.py", line 539, in setlocale
return _setlocale(category, locale)
File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/locale.py", line 80, in setlocale
raise Error, '_locale emulation only supports "C" locale'
ValueError: _locale emulation only supports "C" locale 
```

我这里有所有必要的文件。[http://i.imgur.com/FRRyv.png](http://i.imgur.com/FRRyv.png)

问题出在哪里 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T17:15:45.407

您缺少`_locale`用于 python 安装的 C 扩展，并且它只支持`C`没有它的语言环境。

# php - tmhOAuth 无法验证 oauth 签名和令牌

> ID：12124055
> 
> 赞同：1
> 
> 时间：2012-08-25T17:13:54.017
> 
> 标签：php, twitter-oauth, http-status-code-401

我正在尝试使用 The Matt Harris 的 oAuth php 库从我的应用程序上的 Twitter 用户那里获取用户访问令牌，但我不断收到错误“无法验证 oauth 签名和令牌”。

具体来说，我正在尝试使用他的 OAuth 流程教程的略微修改版本来获取他们的令牌并将它们存储在我的数据库中而不是会话中。[https://github.com/themattharris/tmhOAuth/blob/master/examples/oauth_flow.php](https://github.com/themattharris/tmhOAuth/blob/master/examples/oauth_flow.php) 这里的request token函数总是出现错误。

```
function request_token($tmhOAuth) {
    $code = $tmhOAuth->request(
       'POST',
       $tmhOAuth->url('oauth/request_token', ''),
       array(
           'oauth_callback' => tmhUtilities::php_self()
       )
    );

    if ($code == 200) {
        $_SESSION['oauth'] = $tmhOAuth->extract_params($tmhOAuth->response['response']);
       authorize($tmhOAuth);
    } else {
       outputError($tmhOAuth);
    }
} 
```

我已经检查了服务器时间，我知道它在 GMT 5 秒内。一位 Twitter 开发人员说时间应该在他们服务器的大约 5 分钟内，所以我应该没问题。[https://dev.twitter.com/discussions/1043](https://dev.twitter.com/discussions/1043)

我还检查了该`cacert.pem`文件是否与其他文件位于同一位置，就在 CURL 期望的位置，并且我关闭了“use_ssl”和“curl_ssl_verifypeer”选项，因为我的网站目前没有SSL 证书设置。

这是返回的响应对象：

```
["response"]=> array(6) { 
        ["headers"]=> array(16) { 
            ["date"]=> string(29) "Sat, 25 Aug 2012 16:38:24 GMT" 
            ["status"]=> string(16) "401 Unauthorized" 
            ["x_frame_options"]=> string(10) "SAMEORIGIN" 
            ["x_mid"]=> string(40) "4147a367997b7a5221cbcd8446652b1ebc00230d" 
            ["last_modified"]=> string(29) "Sat, 25 Aug 2012 16:38:24 GMT" 
            ["content_type"]=> string(24) "text/html; charset=utf-8" 
            ["expires"]=> string(29) "Tue, 31 Mar 1981 05:00:00 GMT" 
            ["cache_control"]=> string(62) "no-cache, no-store, must-revalidate, pre-check=0, post-check=0" 
            ["x_runtime"]=> string(7) "0.01766" 
            ["pragma"]=> string(8) "no-cache" 
            ["x_transaction"]=> string(16) "b8ffe07df233ba05" 
            ["set_cookie"]=> string(265) "_twitter_sess=ginormous session id; domain=.twitter.com; path=/; HttpOnly" 
            ["vary"]=> string(15) "Accept-Encoding" 
            ["content_encoding"]=> string(4) "gzip" 
            ["content_length"]=> string(2) "62" 
            ["server"]=> string(3) "tfe"
        } 
        ["code"]=> int(401) 
        ["response"]=> string(44) "Failed to validate oauth signature and token" 
        ["info"]=> array(23) { 
            ["url"]=> string(42) "http://api.twitter.com/oauth/request_token" 
            ["content_type"]=> string(24) "text/html; charset=utf-8" 
            ["http_code"]=> int(401) ["header_size"]=> int(1030) 
            ["request_size"]=> int(498) ["filetime"]=> int(-1) 
            ["ssl_verify_result"]=> int(0) 
            ["redirect_count"]=> int(0) 
            ["total_time"]=> float(0.265656) 
            ["namelookup_time"]=> float(0.062211) 
            ["connect_time"]=> float(0.139025) 
            ["pretransfer_time"]=> float(0.139028) 
            ["size_upload"]=> float(0) 
            ["size_download"]=> float(62) 
            ["speed_download"]=> float(233) 
            ["speed_upload"]=> float(0) 
            ["download_content_length"]=> float(62) 
            ["upload_content_length"]=> float(-1) 
            ["starttransfer_time"]=> float(0.265504) 
            ["redirect_time"]=> float(0) 
            ["certinfo"]=> array(0) { } 
            ["redirect_url"]=> string(0) "" 
            ["request_header"]=> string(498) "POST /oauth/request_token HTTP/1.1 User-Agent: tmhOAuth 0.621-SSL - //github.com/themattharris/tmhOAuth Host: api.twitter.com Accept: */* Accept-Encoding: deflate, gzip Authorization: OAuth oauth_callback="http%3A%2F%2Fcompleteset.us%2Fsettings%2Ftwitterlink", oauth_consumer_key="consumer_key", oauth_nonce="nonce", oauth_signature="sig", oauth_signature_method="HMAC-SHA1", oauth_timestamp="1345912704", oauth_version="1.0" " 
        } 
        ["error"]=> string(0) "" 
        ["errno"]=> int(0) 
    } 
```

我注意到，在我将“use_ssl”设置为 false 之前，响应中的 headers 数组不存在。我不确定这意味着什么，或者它是否有帮助，但我想我不妨把它扔掉。

如果您需要任何其他部分，我还会转储 tmhOAuth 对象的所有其余部分。

# c++ - 绕过两个类之间的歧义

> ID：12124062
> 
> 赞同：1
> 
> 时间：2012-08-25T17:14:40.387
> 
> 标签：c++, c++builder, c++builder-2010

我已经从 Rad studio 的官方网站下载了 TVersionInfo VCL，并在我的 IDE 中成功安装了它，因为它们出现在我的工具箱面板中。将其粘贴到我的项目中并第一次尝试构建它。我确信它会构建好，因为我已经运行了它附带的测试项目。没问题。但是在我的项目中，在编译过程中出现了错误。由于使用 Fib plus 包进行 interbase db 访问连接，这一切都发生在我身上。以下是消息中出现的错误：

```
Checking project dependencies...
Compiling Invoice.cbproj (Debug configuration)
[BCC32 Error] VersionInfoUI.h(24): E2015 Ambiguity between 'TVersionInfo' and 'Ib_services::TVersionInfo'
  Full parser context
    main.cpp(10): #include about.h
    about.h(11): #include D:\CB2010_VCL\VersionInfo\VersionInfoUI.h
    VersionInfoUI.h(11): class TCustomVersionInfoLabel
[BCC32 Error] VersionInfoUI.h(25): E2015 Ambiguity between 'TVersionInfo' and 'Ib_services::TVersionInfo'
  Full parser context
    main.cpp(10): #include about.h
    about.h(11): #include D:\CB2010_VCL\VersionInfo\VersionInfoUI.h
    VersionInfoUI.h(11): class TCustomVersionInfoLabel
[BCC32 Error] VersionInfoUI.h(39): E2015 Ambiguity between 'TVersionInfo' and 'Ib_services::TVersionInfo'
  Full parser context
    main.cpp(10): #include about.h
    about.h(11): #include D:\CB2010_VCL\VersionInfo\VersionInfoUI.h
    VersionInfoUI.h(11): class TCustomVersionInfoLabel
[BCC32 Error] about.h(16): E2015 Ambiguity between 'TVersionInfo' and 'Ib_services::TVersionInfo'
  Full parser context
    main.cpp(10): #include about.h
    about.h(13): class TfAbout
Failed
Elapsed time: 00:00:04.0 
```

我认为 FIB IB 服务类也具有相同的类名，因此两个类名之间存在冲突。如何解决这个问题？如何使两个类像使用命名空间或其他东西一样一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T23:58:25.383

Delphi 为 VCL 组件生成的 .hpp 文件被包装在命名空间中。问题是他们还倾向于使用`using namespace ...`它们底部的语句将所有内容转储到全局命名空间中，这完全违背了使用命名空间的目的。如果您查看此类 .hpp 文件的底部，您将看到`#ifdef`向您显示可以在项目中定义哪些值以禁用此行为的语句。另一种方法是在设计时根本不使用`TVersionInfo`。在您的运行时代码中动态创建它，而不是通过`new`运算符，然后您可以指定它来自哪个命名空间。

# php - 使用 jquery 遍历 php 变量 div 类

> ID：12124064
> 
> 赞同：3
> 
> 时间：2012-08-25T17:14:59.860
> 
> 标签：php, jquery, html, css

我在使用变量生成的 php div 类和 jQuery 来使用 fadeToggle() 功能时遇到了一些麻烦。我有两个问题。第一个包含要单击的链接，第二个包含有关该链接的描述，我想在单击以显示和隐藏描述时向第一个 div 添加一个简单的 fadeToggle。但是，div 类是使用 php for 循环动态生成的。我有 12 个不同的链接和 12 个不同的描述，它们使用 php for 循环从外部文件夹中插入。这是代码：

```
<?php for ($i = 1; $i <= 12; $i++): ?> 
<p>
<a href="" onclick="return false" class="<?php echo "project$i-text-link-visible"; ?>">
    <span class="text-expand-symbol"></span>
     View project details:
</a>
</p>

<!-- PROJECT DESCRIPTION -->
<div class="<?php echo "project$i-description-hidden"; ?>">        
    <?php include 'descriptions/project' . $i . '.inc.html.php'; ?>
</div>  
<?php endfor; ?> 
```

所以我在使用 jQuery 的 fadeToggle 时遇到了麻烦，因为我不知道如何遍历动态生成的 php div 类。如果我将 div 类更改为诸如“项目描述”之类的静态内容，那么当我单击任何链接时，我尝试的脚本会导致每个描述框都立即打开。任何想法将不胜感激。

如果愿意，您可以查看该站点并亲自查看问题。
访问[http://www.romanleykin.com/projects](http://www.romanleykin.com/projects)并向下滚动到“课堂项目”部分，以了解我想要完成的工作。目前，该站点使用丑陋的 javascript 代码将 css 属性从隐藏更改为可见，但我想为此使用 jQuery。任何想法将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T17:25:02.903

最好的解决方案是在 php 生成的标签中添加一个额外的类，即你将有两个类：

```
class="something-common <?php echo $phpgenerated; ?>" 
```

所以基本上你的代码看起来像：

```
<?php for ($i = 1; $i <= 12; $i++): ?> 
<p>
<a href="" onclick="return false" class="project-link <?php echo "project$i-text-link-visible"; ?>">
    <span class="text-expand-symbol"></span>
     View project details:
</a>
</p>

<!-- PROJECT DESCRIPTION -->
<div class="project-description <?php echo "project$i-description-hidden"; ?>">        
    <?php include 'descriptions/project' . $i . '.inc.html.php'; ?>
</div>  
<?php endfor; ?> 
```

您可以将选择器用作：

```
$('a.project-link')
OR
$('.project-link', 'a') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T17:41:12.610

使用[自定义数据属性](http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#embedding-custom-non-visible-data-with-the-data-%2a-attributes)：

```
<?php for ($i = 1; $i <= 12; $i++): ?> 

<a href="#" data-target="<?php echo $i ?>"> ... </a>

<div id="target_<?php echo $i ?>"> ... </div>

<?php endfor; ?> 
```

然后是JS代码：

```
$(function(){

    $('a[data-target]').on('click', function(event){

        event.preventDefault();

        $('#target_' + $(this).attr('data-target')).fadeToggle();

    });

}); 
```

这样，您可以将每个锚点与其相关的 div 绑定，而不会弄乱类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T17:32:32.730

如果您使用 jQuery 运行类似的循环，您应该能够以与在 PHP 中创建它们相同的方式将事件处理程序分配给链接：

```
<script> 
for (i=1; i<=12; i++) 
{ $('.project' + i + '-text-link-visible').click(function()
  { 
    // use the fadeToggle() on the description <div> here
  });
}
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T19:17:51.830

您可以在标签中不使用动态生成类或 id 的情况下执行此操作。

请参阅下面的链接，这应该会有所帮助

[JS Bin 演示](http://jsbin.com/ivokof/5/edit)

# javascript - 黑客可以将值注入到我的 jQuery 函数中吗？

> ID：12124065
> 
> 赞同：6
> 
> 时间：2012-08-25T17:15:02.593
> 
> 标签：javascript, jquery

我一直在从我的网络应用程序接收到意外数据。黑客可以更改 javascript 函数中的值吗？

如果我的代码是：

```
my_function('new_item',10,20,30,40); 
```

'new_item' 参数是否有可能被篡改？我能做些什么来防止这种情况发生？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-25T17:21:36.933

是的，任何用户都可以更改您发送到他们浏览器的任何 JavaScript ——“黑客”这个词被夸大了，因为即使是一个中等程度的用户也完全有能力使用 Firefox 的 Firebug 或 Chrome/Safari 的库存文档检查器来破解。这就是 Web 开发人员重复公理的原因：

**永远不要相信用户输入！**

在任何情况下，您都不应信任用户发送的任何内容。不要在没有转义的情况下向数据库中插入任何内容，除非会话是可验证的，否则不要信任登录凭据。你信任的任何东西都是一个漏洞，每个漏洞总有一天会被利用。

不要试图保护你的 JavaScript，那是不可能的。相反，验证用户尝试做的所有事情：如果他们请求一个他们不允许看到的页面，即使 JavaScript 请求它也不要将其提供给客户端。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-25T17:22:27.980

您无法确保所有客户端代码的安全，您可以采取一些方法来帮助提高难度，但它们根本没有帮助，因为更高级的黑客可以轻松获得通过了。

例如，如果您使用

```
<script></script> 
```

通过其他文档链接代码的标签。例如，您可以说有 4 个脚本。脚本 1,2 和 3 相互链接，直到它们到达主要功能所在的 4。这不会阻止任何事情，只会让初学者“黑客”/篡改者变得更加困难。- 但它只在 chrome 的 javascript 控制台上最有效。Firebug 不关心脚本在 DOM 上的位置。因此，它只是证明，与其花时间尝试**隐藏**您的 javascript 代码或尝试**完全保护**它（这是**不可能**的），不如花时间在后端验证事物。

请记住，没有办法完全防止黑客篡改您的客户端代码。信任客户端的任何东西永远都不明智。PHP 可以非常方便地进行任何后端检查。还要确保防止 PHP 中的 SQL 注入。但是不要仅仅因为你使用了`mysql_real_escape_string()`以太而认为你的安全。在此处阅读有关此内容的更多信息：[绕过 mysql_real_escape_string() 的 SQL 注入](https://stackoverflow.com/questions/5741187/sql-injection-that-gets-around-mysql-real-escape-string)，我个人建议将 PDO 用于您的数据库代码。

只需将您的服务器端代码（如 PHP）想象为主要城堡的护城河。现在把客户端代码想象成护城河周围的木栅栏。任何士兵都可以轻松推倒木栅栏，但如果护城河无人看守（没有 PHP 验证变量）然后士兵可以在没有人看的情况下挖掘。

^ 现在想想你的网站是怎样的。护城河是否容易挖掘？如果是这样，请在那里派一些警卫（-确保您已确保 php 验证。）

当涉及到客户端时，你永远不应该相信任何东西。那个木栅栏永远没有保护措施。即使是 javascript 守卫也无法保护它。

[I've edited this answer a lot, because at first I was very unclear of what I actually meant.]

# perl - 多线程环境中的 AnyEvent

> ID：12124068
> 
> 赞同：1
> 
> 时间：2012-08-25T17:15:19.780
> 
> 标签：perl, recursion, event-handling, anyevent

我有以下子例程，并且有 appx 20 个线程使用不同的 URL 调用它（这个子程序属于一个包，每个线程调用该包的不同实例）：

```
sub get_urls {
    my ($self,$url,$depth) = @_;
    my $cv = AnyEvent->condvar;
    my @data;
    my %visited;
    my $hostname = URI->new($url)->host();
    my $tr_cb;
    my ($b,$e) = (0,0);

       return unless($depth);
       # This code-ref is recursive!
       $tr_cb = sub {
        my $sitem   = shift;
        my $depth   = shift;

        return if (0 == $depth--);
        foreach my $site (@$sitem) {
            if (exists($visited{$site})) {
               next;
            }
            $b++;
            $visited{$site} = 1;
            $cv->begin;
            AnyEvent::HTTP::http_get ($site, timeout => 1, sub {
               my ($body, $hdr) = @_;
               if ($hdr->{Status} =~ m/^2/) {
                  my $extor = HTML::SimpleLinkExtor->new();
                  my @links;
                  print "E = $e | B = $b\n";
                  #print "[REC_DEPTH:$depth]Working on $site\n";
                  $extor->parse($body);
                  @links = map { URI->new_abs($_,$site)->as_string }
                            grep { length > 2 } $extor->links();
                  push(@data,@links);
                  $tr_cb->([map { $_->[2] } 
                              grep { $_->[0] eq $_->[1] } 
                                map { [$hostname,URI->new($_)->host(),$_] } @links],$depth);
               }
                $e++;
                $cv->end;
            });
        }
        };
    $tr_cb->([$url],$depth);
    $cv->recv;
    print "Got total of " . @data . " links\n";
} 
```

`($b,$e)`变量仅用于测试。问题是，一段时间后，“开始”的数量似乎与“结束”的数量不匹配，因此它永远不会通过`$cv->recv`......我对 AnyEvent 和事件编程一般来说有点新，似乎解决我的问题。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T08:18:47.443

整个递归匿名子程序似乎有点太聪明了。在您的类中创建一个函数，该函数从传入的 url（和深度）获取链接并将它们添加到对象的数组中。同时创建一个计时器（在 => 0 之后），它将元素从数组中移出，如果仍有元素则重新启动，否则将 end 发送到 condvar。如果需要，将数组替换为 Thread::Queue 对象。

您还应该只在应用程序代码中调用 ->recv，而不是在库中调用，或者在 condvar 上使用回调而不是调用 recv（这将使您能够使用多个 condvar 并在不依赖线程的情况下发送给它们）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T16:18:54.167

这个实用函数的设计错误在于它阻塞了 condvar: `$cv->recv`。这会阻止该函数的用户在全局异步程序中使用它。

相反，`get_urls`应该返回 condvar ( `$cv`) 并让用户用它做一些有用的事情。如果用户想要阻止，他将能够做到。如果他不这样做，他将可以自由地与其他异步任务共享资源。

您的程序的另一个问题是，如果该函数设计正确，您可能不需要线程：如果该函数是程序的核心，那么它显然是网络绑定的，而不是 CPU 绑定的，因此您应该能够启动多个调用（固定）`get_urls`将在单个线程中并行执行。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-25T22:05:27.003

你有`$cv->end;`你的回调。对我来说似乎不对，应该是在`AnyEvent::HTTP::http_get`通话后，AFAIU。

# firefox - Firefox 启动页默认位置

> ID：12124073
> 
> 赞同：0
> 
> 时间：2012-08-25T17:15:45.783
> 
> 标签：firefox

不确定这个问题是否适合在 stackoverflow 中提问。我在我的 Windows 7 PC 上运行 Firefox 13.0。Firefox 在打开时有一个设置启动页面的选项，默认选项是“显示我的主页”。默认页面上有一个 Firefox 标志和一个谷歌搜索，以及来自 Mozilla 的一些新闻通知（希望每个人都熟悉它）。有没有人知道这个“离线”页面的默认位置以便可以替换它？我不想通过在`options>general`选项卡中设置主页 url 来遵循传统方式。我有一个离线网页，我想将它用作我的 Firefox 启动页面。我通过设置启动页面来尝试它`file:///C:/Program%20Files/Mozilla%20Firefox/custom/mypage.xht`（我将我的自定义页面复制`mypage.xht`到 firefox 目录中的自定义文件夹`custom`中）。

有希望吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T18:09:31.153

打开一个新窗口并在主页中加载您想要的网页。

（单击文件->打开文件，然后选择您想要在系统上使用的网页）

在 Firefox 窗口的顶部，单击编辑菜单并选择首选项

选择常规面板。

单击使用当前页面。

这将有所帮助： https: [//support.mozilla.org/en-US/kb/How%20to%20set%20the%20home%20page](https://support.mozilla.org/en-US/kb/How%20to%20set%20the%20home%20page)

# php - 装饰器模式问题

> ID：12124078
> 
> 赞同：2
> 
> 时间：2012-08-25T17:16:08.137
> 
> 标签：php, oop, design-patterns, dependency-injection, decorator

我正在使用装饰器模式向输出流（控制台）添加样式和选项。

> 这是一个控制台应用程序，可为命令行输出添加颜色。装饰师添加颜色。**ClientClass**中的条件是 **如果发生错误**则用**红色文本**装饰，**如果没有发生错误**则用**绿色文本**装饰。**因此，颜色装饰器具有只有ClientClass** 才能知道的可选调用。
> 
> * OP 对其中一个答案的评论的副本

我遇到的问题是：我通过构造函数将我的装饰器传递给一个类。但是装饰对象要求我调用两个不在基类中的方法，即被装饰的方法。

这很糟糕吗？我不应该只调用所有装饰类中可用的方法吗？

举个例子：

```
<?php

abstract class MyAceBaseClass
{ 
    abstract function doYourThing();
}

class MyAceBaseClassDecoratorA extends MyAceBaseClass
{ 
    protected $aceBaseClass;

    protected $amount = 0;

    public function __construct($aceBaseClass)
    { 
         $this->_aceBaseClass = $aceBaseClass;
    }

    public function doYourThing()
    {
        $result = $aceBaseClass + $this->amount;
        return $result;
    }

    public function decoratorFunctionA()
    {
        $this->amount = 10;
    }

    public function decoratorFunctionB()
    {
        //----
    }
}

class ClientClass
{ 
    private $aceObject;

    public function __construct(MyAceBaseClass $aceObject) 
    {
         $this->aceObject = $aceObject;       
    }

    public function run()
    {
         if ($someCondition) {
             $this->aceObject->decoratorFunctionA();
             $this->aceObject->decoratorFunctionB();
         }

         $result = $this->aceObject->doYourThing();

         echo $result;
    }
} 
```

如您所见，客户端类需要调用 decoratorFunctionA 和 decoratorFunctionB（仅在装饰器类中可用）才能调用可用于所有扩展 MyAceBaseClass 的类的抽象方法 doYourThing()。这感觉不对。

我认为装饰器的实现是正确的，但现在我遇到了另一个问题

我该如何解决这个问题？

客户端类可能不需要同时调用 decoratorFunctionA() 和 decoratorFunctionB()，它可能只需要 1 或没有，所以我不能简单地在 doYourThing 调用中自动调用它们。

一种可能性是为 MyAceBaseClassDecoratorA 提供一个接口，但是我首先违背了使用装饰器的目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:15:05.127

您不能调用您期望的**接口**`MyAceBaseClass`未指定的方法：（正如@ctrahey 指出的那样）。

另外，如果我没看错的话，你似乎把事情搞混了。**在这种情况下，谁在装饰谁？**

如果**装饰器模式**的目的是在没有子类化的情况下向现有对象添加功能（换句话说，没有说对象“是”），则装饰器必须具有被装饰对象的受保护属性。似乎是你`ClientClass`在装饰你所谓的东西`MyAceBaseClassDecoratorA`。

IMO，它应该是这样的：

```
// Concrete object
class MyObject implements MyObjectInterface {
   public function doSomething() {
       return 1;
   }
}

// Your abstract decorator
abstract class MyObjectDecorator implements MyObjectInterface {
    protected $myObject;

    public function __construct(MyObjectInterface $object) {
        $this->myObject = $object;
    }

    public function doSomething() {
        return $this->myObject->doSomething();
    }
}

// Your concrete decorator
class MyConcreteObjectDecorator extends MyObjectDecorator {
    public function doSomething() {
        $value = $this->myObject->doSomething();
        return $value + 10;
    }
} 
```

**编辑：**

至于您在评论中的解释，您应该这样做：

```
class ClientClass {
    // ...
    public function run() {
        $this->aceObject->doYourThing(); // and that's all
    }
    // ...
} 
```

因此，您不会`$this->aceObject->decoratorFunctionA();`像`$this->aceObject->decoratorFunctionB();`在`ClientClass`.

**`doYourThing()`**相反，您应该在调用**方法之前****为装饰对象提供注入方法的功能**`$ClientClass->aceObject->doYourThing()`。

如果有错误，那么你将用 装饰它`RedTextDecorator`，如果一切顺利，那么你将用`GreenTextDecorator`.

```
public function run()
{
     if ($error) {
         $this->aceObject = new RedTextDecorator($this->aceObject);
     } elseif($success) {
         $this->aceObject = new GreenTextDecorator($this->aceObject);
     }

     $result = $this->aceObject->doYourThing();

     echo $result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T17:32:29.037

是的，如果您的构造函数采用 MyAceBaseClass，它不应该在其上调用在其后代类之一中声明的方法。如果 $aceObject 类将*始终*是一个装饰器，那么为它创建一个接口，并且只调用在接口中声明的方法，这就是接口的用途。将其“归结为”一种干净的方法会很有帮助，并将知道要调用哪些特定方法的责任委托给装饰器。

然而，我可能会提到，我更喜欢我的装饰器对他们的主题了解更多，而不是主题知道它的装饰器。一个对象与其装饰器的关系应该尽可能松散耦合，希望它只知道它可以被装饰（即实现“可装饰”接口或类似的东西，例如实现感兴趣的装饰器可以观察的观察机制） . 然而，装饰*者确实*知道它的主题应该完全通过接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T07:01:45.363

如果你想让它变得简单，你可以根据条件（是否要添加颜色）在 doYourThing 方法中使用 decoratorFunctionA() 和 decoratorFunctionB()。这样，您的合同将保持不变，您可以获得所需的功能。

如果你想让它更清晰，那么也许你可以使用两种不同的装饰器。

有关更多详细信息，您可以参考：

[http://en.wikipedia.org/wiki/Decorator_pattern](http://en.wikipedia.org/wiki/Decorator_pattern)

# java - Stax 未检测到结束元素

> ID：12124082
> 
> 赞同：5
> 
> 时间：2012-08-25T17:16:37.780
> 
> 标签：java, xml, stax

我正在读取与以下相同的 XML 文件：

```
<ts>
    <tr comment="" label="tr1">
        <node order="1" label="" />
    </tr>
</ts> 
```

我预计下面的代码会`e`在屏幕上打印出三个：

```
XMLInputFactory factory = XMLInputFactory.newInstance();
XMLStreamReader sr = factory.createXMLStreamReader(new FileReader("test.xml"));

while (sr.hasNext()) {
    int eventType = sr.next();

    if (eventType == XMLStreamReader.START_DOCUMENT) {
        continue;
    } else if (eventType == XMLStreamReader.END_ELEMENT) {
        System.out.println("e");
    } else if (eventType == XMLStreamReader.START_ELEMENT) {
        System.out.println("s");
    }
} 
```

但它不起作用！关于如何解决问题的任何想法？

*注意：我认为它与自封闭标签有关，例如：`<myTag id="1" />`*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T17:30:51.043

我在使用 JDK 1.7 的 Windows 上得到与[Blaise Doughan](https://stackoverflow.com/users/383861/blaise-doughan)相同的结果：

```
s
s
s
e
e
e 
```

我认为这与文档无关，`<node order="1" label="" />`因为[文档](http://docs.oracle.com/javase/6/docs/api/javax/xml/stream/XMLStreamReader.html#next%28%29)指出：

> **注意**：空元素（例如`<tag/>`）将通过两个单独的事件报告：**START_ELEMENT**、**END_ELEMENT** - 这将保留空元素的解析等效性`<tag></tag>`。`IllegalStateException`如果在`hasNext()`返回 false后调用此方法，则会抛出一个 。

远景：也许其他一些相关的代码可能会导致奇怪的行为？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T17:21:14.593

您问题中发布的代码为我生成了三个`e`，这是预期的。我在 Mac 上使用 JDK 1.6。

**演示**

您可能想尝试运行以下代码来查看您缺少哪个结束元素事件：

```
import java.io.FileReader;
import javax.xml.stream.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        XMLInputFactory factory = XMLInputFactory.newInstance();
        XMLStreamReader sr = factory.createXMLStreamReader(new FileReader("test.xml"));
        System.out.println(sr.getClass());

        while (sr.hasNext()) {
            int eventType = sr.next();

            if (eventType == XMLStreamReader.START_DOCUMENT) {
                continue;
            } else if (eventType == XMLStreamReader.END_ELEMENT) {
                System.out.println("End Element:    " + sr.getLocalName());
            } else if (eventType == XMLStreamReader.START_ELEMENT) {
                System.out.println("Start Element:  " + sr.getLocalName());
            }
        }
    }

} 
```

**输出**

下面是我得到的输出。

```
class com.sun.org.apache.xerces.internal.impl.XMLStreamReaderImpl
Start Element:  ts
Start Element:  tr
Start Element:  node
End Element:    node
End Element:    tr
End Element:    ts 
```

# objective-c - 如何设计这样的 UI 控件？

> ID：12124085
> 
> 赞同：1
> 
> 时间：2012-08-25T17:17:28.330
> 
> 标签：objective-c, cocoa

![http://i.stack.imgur.com/FmYeR.png](../Images/933e54fde463fbee417bc2267e1ddc24.png)

这些控件（左侧）是如何制作/设计的，这些只是带有文本的表格视图排列在顶部和底部还是一些模仿文本框的标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T17:28:48.887

这可以通过[基于视图的 NSTableView](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/TableView/ViewBasedTables/ViewBasedTables.html#//apple_ref/doc/uid/10000026i-CH15-SW2)相对容易地完成。从屏幕截图中无法看出相关应用程序是如何*实际*实现的，但如果我从头开始，那将是我的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T17:30:35.970

要添加到 Andrew Madsen 的答案，单击一行时显示的灰色背景可能是在 的子类中绘制的`NSTableRowView`，使用`- (void)drawSelectionInRect:(NSRect)dirtyRect`.

# email - 如何更改从我的应用程序发送的电子邮件中显示的名称？

> ID：12124089
> 
> 赞同：0
> 
> 时间：2012-08-25T17:18:06.180
> 
> 标签：email, google-apps

我有一个域名，我通过 Heroku 上的 Rails 应用程序发送电子邮件。该电子邮件是通过谷歌应用程序设置的。每次我从我的应用程序发送电子邮件时，左侧出现的名字（至少在我的 gmail 帐户中）就是我的名字。但是，我试图改变它在一堆没有运气的地方出现的方式。如何让它说出我的公司名称而不是我的个人姓名？

PS。我发送的电子邮件地址是 myname@mycompany.com。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T07:12:19.200

发件人将是用于向 Google smtp 服务器进行身份验证的用户 ID。

# android - 如何在“摇动”动作期间禁用方向传感器

> ID：12124093
> 
> 赞同：1
> 
> 时间：2012-08-25T17:18:52.243
> 
> 标签：android, android-sensors, shake

我正在开发一个使用俯仰/滚动值的应用程序，并且我还想实现“摇动”功能。使用下面的代码，我为每一个想要的动作干杯，但是，当我摇晃手机时，它有时会将此动作捕捉为“摇晃”**和**短滚/俯仰。我想将“摇晃”与俯仰/滚动动作分开。应用程序应该在 Android 2.2 上运行，因此这也是对可用传感器的限制。

我试图用布尔变量阻止方向传感器`accelerometer`，但它不起作用。有什么建议么？

```
public void onSensorChanged(SensorEvent event) {
    // TODO Auto-generated method stub
    synchronized (this) {
        switch (event.sensor.getType()){

        case Sensor.TYPE_ACCELEROMETER:
            float[] values = event.values;
            float x = values[0];
            float y = values[1];
            float z = values[2];

            accelerometer = true;
            mAccelLast = mAccelCurrent;
            mAccelCurrent = (float) FloatMath.sqrt((float) (x*x + y*y + z*z));
            float delta = mAccelCurrent - mAccelLast;
            mAccel = mAccel * 0.9f + delta; 

            if (mAccel>2.5){
                Toast.makeText(this, "SHAKE!!!!", Toast.LENGTH_SHORT).show();
            } else {
                accelerometer=false;
            }

        break;

        case Sensor.TYPE_ORIENTATION:
            if (!accelerometer){
            pitch = event.values[1];
            roll = event.values[2];

            if (pitch > Constants.PITCH_ANGLE && pitchUpAction == false && roll < Constants.BASE_ANGLE && roll > - Constants.BASE_ANGLE) {
                oriStartTime = System.currentTimeMillis();
                pitchUpAction = true;
            } else if (pitch < - Constants.PITCH_ANGLE && pitchDownAction == false && roll < Constants.BASE_ANGLE && roll > - Constants.BASE_ANGLE){
                oriStartTime = System.currentTimeMillis();
                pitchDownAction = true;
            } else if (roll > Constants.ROLL_ANGLE && rollLeftAction == false && pitch < Constants.BASE_ANGLE && pitch > - Constants.BASE_ANGLE){
                oriStartTime = System.currentTimeMillis();
                rollLeftAction = true;
            } else if (roll < - Constants.ROLL_ANGLE && rollRightAction == false && pitch < Constants.BASE_ANGLE && pitch > - Constants.BASE_ANGLE){
                oriStartTime = System.currentTimeMillis();
                rollRightAction = true;
            }

            if ((pitchUpAction || pitchDownAction) && pitch < Constants.BASE_ANGLE && pitch > -Constants.BASE_ANGLE){
                oriElapsedTime = System.currentTimeMillis() - oriStartTime; 

                if(oriElapsedTime>(2*1000)) {
                    if(pitchUpAction){
                        Toast.makeText(getBaseContext(), "Pitch up 2s", Toast.LENGTH_SHORT).show();
                    } else if(pitchDownAction){
                        Toast.makeText(getBaseContext(), "Pitch down 2s", Toast.LENGTH_SHORT).show();
                    } 
                } else {
                    if(pitchUpAction){
                        Toast.makeText(getBaseContext(), "Pitch up short", Toast.LENGTH_SHORT).show();
                    } else if(pitchDownAction){
                        Toast.makeText(getBaseContext(), "Pitch down short", Toast.LENGTH_SHORT).show();
                    } 
                }
                pitchUpAction = pitchDownAction = false;
            } else if ((rollLeftAction || rollRightAction) && roll < Constants.BASE_ANGLE && roll > -Constants.BASE_ANGLE){
                oriElapsedTime = System.currentTimeMillis() - oriStartTime; 

                if(oriElapsedTime>(2*1000)) {
                    if(rollLeftAction){
                        Toast.makeText(getBaseContext(), "Roll Left 2s", Toast.LENGTH_SHORT).show();
                    } else if(rollRightAction){
                        Toast.makeText(getBaseContext(), "Roll Right 2s", Toast.LENGTH_SHORT).show();
                    } 
                } else {
                    if(rollLeftAction){
                        Toast.makeText(getBaseContext(), "Roll left short", Toast.LENGTH_SHORT).show();
                    } else if(rollRightAction){
                        Toast.makeText(getBaseContext(), "Roll right short", Toast.LENGTH_SHORT).show();
                    } 
                }
                rollLeftAction = rollRightAction = false;
            }
            }

        break; 
        }
    }
} 
```

# c - struct node *head 和 struct node ** head 有什么区别？

> ID：12124096
> 
> 赞同：6
> 
> 时间：2012-08-25T17:18:58.043
> 
> 标签：c, pointers, linked-list

我正在尝试对链接列表进行排序。我对何时使用`struct node*head`和何时使用感到困惑`struct node **head`，可以使用它们来完成实现。

我什么时候应该使用：

```
void sortedinsert(struct node **head) 
```

我应该什么时候使用：

```
void sortedinsert(struct node *head) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-25T17:25:39.490

使用此函数签名：

```
void changeNode(struct node *head) 
```

您有一个指向该节点的指针，因此您可以更改该结构。您*无法*更改变量 head*指向的内容*。让我们假设以下定义`struct node`：

```
struct node
{
    int field1;
    struct node *next;
} 
```

使用给定的函数签名 和`struct node`，考虑以下操作可以改变函数中的结构：

```
void changeNode(struct node *head)
{
    head->field1 = 7;
    head->next = malloc(sizeof(struct node));
} 
```

C 是按值传递：当我们将变量传递给函数时，函数会得到一个*副本*。这就是为什么我们传递一个指向 a 的指针`struct node`，以便我们可以更改它，并在函数之外获得这些更改的效果。但是我们仍然只得到指针本身的*副本*。所以下面的操作没有用：

```
void changeNode(struct node *head)
{
    // we're only changing the copy here
    head = malloc(sizeof(struct node));
} 
```

的更改`head` *不会*反映在函数之外。为了改变`head`指向的内容，我们必须使用额外的间接级别：

```
void changeNode(struct node **head)
{
    // now we're changing head
    *head = malloc(sizeof(struct node));

    // alternately, we could also do this:
    *head = NULL;
} 
```

现在对 的更改`head`反映在函数*之外。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T17:20:43.143

第一个是指向节点的指针，它是一个结构。

```
(struct node *) head; 
```

定义`head`为可以存储 a 的地址的变量`node`。

这允许`node`在方法中通过引用传递。

第二个是指向节点的指针，它是一个结构。

```
(struct node **) head; 
```

定义`head`为变量，该变量可以存储另一个具有 a 的地址的变量的地址`node`。

这允许`node *`在方法中通过引用传递。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-25T17:21:53.143

如果 head 必须始终指向链接列表的头部（一个恒定位置），则使用 struct node* head 如果您打算更改 head 指向的位置，请使用 node **head

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-25T17:22:17.110

`struct node **head`您通过`head`使其可以引用/指向不同的内存区域来传递那里的指针的地址。随着`struct node *head`你不能修改`head`指向其他任何地方

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-14T06:58:13.457

案例1：当您使用时：

```
void sortedinsert(struct node **head) 
```

在函数内部，您实际上将**修改**`head` **指针**，因为很可能您将在`*head`内部使用。最`sortedinsert`有可能与参数一起调用`&head`。

案例2：当您使用时：

```
void sortedinsert(struct node *head) 
```

在函数内部，您将修改**指针****的副本**，因为很可能您将在内部使用变量。最有可能与参数一起调用。`head` **`head``sortedinsert``head`**

 *** * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-25T17:21:25.507

`node*`是指向节点结构的指针。`node**`是指向节点结构的指针的指针。当您想通过引用修改指针时，在 C 中使用指向指针的指针。

假设您想在节点 B 上执行一个操作，该操作可能会用不同的节点替换节点 B。做事的一种方法是

`nodeA.next = foo(nodeA.next);`

另一种选择是做

`foo(&nodeA.next);`

并让 foo 隐式替换`nodeA.next`指针。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-25T17:30:15.353

在这个例子中，由于 head 的值在创建时可能会改变（它可以指向与当前节点不同的其他节点），

你应该使用，

```
void sortedinsert(struct node **head) 
```

因为您的头部可能需要修改。

并且下面的protoptye似乎需要更改，

```
void sortedinsert(struct node *head) 
```

因为这不允许你修改头部，它应该是在这种情况下（如果你正在使用这个），

```
struct node * sortedinsert(struct node *head) 
```

它返回更新的头部，可以在这个函数的调用者中使用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-25T18:17:36.423

运行或阅读这个你可以看到它

```
#include <stdio.h>
struct node{
    int one;
    int two;
    struct node * next;
    //char location[100];
};
void changeHead(struct node** head){

}
void sort(struct node* head){

}
int main(){
    struct node* head = (struct node*) (malloc (sizeof(struct node)));

    // now head pointing to a node stucture ( if you dereferance head you get teh first value)

    struct node* tmp = head;

    struct node** newHead = (struct node**) (malloc (sizeof(struct node*)));

    //New head points to a 'struct node*', which hold an addtess of another struct node

    head->one = 12;//*head->one =12; //head.one = 12 is wrong cos it is holding an address.
    // you can do it but it doesnt make sence since you dont know whats on address #12

    // now if you want head to point to old head which is on tmp at the moment
    *newHead = head;

    // now if you working with 2 linked list and you want to change the heads use below
    changeHead(newHead);

    // if you want to just sort its better and easy to use
    sort(head);

    //chack whats on head and newhead
    printf("double derefence newHead:%d\n",**newHead);
    printf("derefence newHead(its and address same ad address of head):%d\n",*newHead);
    printf("Head(its and address):%d\n",head);
    printf("derefence Head:%d\n",*head);//head->one works too
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-02-24T19:55:58.270

1.  要更改指向第一个节点的 head ，您需要传递 head 的地址，即`(&head)`调用函数（因此，您在函数中声明了指向指针变量的指针，`(struct node**head)`因为它接收到的地址 `head`不过是指向第一个节点的指针。
2.  但是，如果您知道 head 将保持固定，即您不希望 head 指向其他节点（例如..没有在开头插入新节点），那么您只能通过 (head) 调用函数并`(*head)`写入函数定义。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-25T19:34:01.433

简而言之`**head`，当您想更改“head”指向的位置时使用您的，否则使用`*head`不允许更改位置的位置。**

# c# - 使用 If Else-If 语句声明不同类型的变量

> ID：12124102
> 
> 赞同：2
> 
> 时间：2012-08-25T17:19:59.573
> 
> 标签：c#, types, casting

我有一个方法，它根据在 TreeView 中单击的项目接收事件。

我可以以完全相同的方式将项目添加到 TreeView 和 TreeViewItem，因此尝试`item`根据类型分配为 TreeView 或 TreeViewItem `state.sender`。但是，目前我可以使它工作的唯一方法是首先将项目分配为对象。

```
private void ProcessEvent(Events.GetEventsResp resp, CustomAsyncStateContainer state)
{
    object item = new object();   //must be a better way than this?
    if (state.sender is TreeViewItem)
        item = (TreeViewItem)state.sender;

    else if (state.sender is TreeView)
        item = (TreeView)state.sender;

     //other code
} 
```

我认为这称为拆箱？有没有更好的方法来做我正在尝试的事情？

编辑：下面是剩余的代码。问这个问题时我还没有写完，现在我意识到这`object item = new object();`在这种情况下是行不通的。

```
private void DisplayGetEvent(Events.GetEventsResp resp, CustomAsyncStateContainer state)
{
    object node = new object();
    if (state.sender is TreeViewItem)
        node = (TreeViewItem)state.sender;

    else if (state.sender is TreeView)
        node = (TreeView)state.sender;

    if (resp.eventItems != null)
    {
        Events.UXEvent[] eventItems = resp.eventItems;
        Array.Sort(eventItems, new UXWrapper.UXEventComparer());

        int itemCount = eventItems.Length;
        TreeViewItem tvItem = new TreeViewItem;
        for (int i = 0; i < itemCount; i++)
        {

            tvItem.Header = eventItems[i].name;
            tvItem.Tag = eventItems[i];

            node.Items.Add(tvItem);

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T17:35:16.023

`TreeView`并且`TreeViewItem`都派生自`ItemsControl`，并且添加项目是使用已经可用的方法完成的，因此您应该能够简单地使用

```
private void ProcessEvent(Events.GetEventsResp resp, CustomAsyncStateContainer state)
{
    var item = (ItemsControl)state.sender;

    // add to item
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-25T17:22:53.610

根据您的 C# 版本，您可以使用新的**动态**类型：http:
[//msdn.microsoft.com/en-us/library/dd264736.aspx](http://msdn.microsoft.com/en-us/library/dd264736.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-25T17:36:52.500

我同意其他评论者的观点，即您的问题描述不充分，但如果您想做的是多态处理 TreeView/TreeViewItem，您可以简单地使用 ItemsControl 类型的变量。

```
if (state.sender is ItemsControl)
    item = (TreeViewItem)state.sender;

else
    throw InvalidArgumentException("state.sender") 
```

# ruby-on-rails - 验证 JSON 是否在 rails 中返回 ["message", "Not Found"]

> ID：12124112
> 
> 赞同：0
> 
> 时间：2012-08-25T17:21:29.187
> 
> 标签：ruby-on-rails, json, api, parsing

我正在使用 API 来获取 JSON 响应。有一个用户指定的可变 URL。因此，如果他们有拼写错误，有时它不会找到 JSON 文件。我正在寻找一个简单的条件来查看 JSON 何时返回 ["message", "Not Found"] 以便我可以跳过它或验证何时成功使用返回的信息。

这是我当前的代码

```
url = "https://api.something.com/users/#{CGI.escape(@user.external.username)}/yes?type=owner"
something_yes_test = HTTParty.get(url)
something_yes_test_info_response = something_yes_test.parsed_response 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T17:53:50.933

在朋友的帮助下，返回的消息是通过 json 传来的，并且有一个特定的结果“消息”，所以我们可以这样做

```
if something_yes-test_info_response["message"]
  means it is broken
else
  it is not broken 
```

# php - 将项目添加到数组

> ID：12124117
> 
> 赞同：-1
> 
> 时间：2012-08-25T17:21:56.333
> 
> 标签：php, arrays, paypal, product

如何向此数组添加另一个项目：

```
$item = array('Quantity' => 1,
              'Product' => array ('Name' => 'name of test product',
                                  'UnitPrice' => array ('Gross' => 10000,
                                                        'Net' => 7800,
                                                        'Tax' => 22,
                                                        'TaxRate' => '22',
                                                        'CurrencyCode' => 'PLN')
                                 )
             ); 
```

> Array ( [Quantity] => 1 [Product] => Array ( [Name] => 测试产品名称 [UnitPrice] => Array ( [Gross] => 10000 [Net] => 7800 [Tax] => 22 [ TaxRate] => 22 [CurrencyCode] => PLN ) ) )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T17:25:12.600

你需要稍微改变结构来做到这一点：

```
$item = array(  
    0 => array (
        'Name' => 'name of test product',
        'UnitPrice' => array (
            'Gross' => 10000, 'Net' => 7800, 'Tax' => 22, 'TaxRate' => '22',   'CurrencyCode' => 'PLN',
         )
         'Quantity' => 1,
     ),
     1 => array (
         'Name' => 'name of test product 2',
         'UnitPrice' => array (
             'Gross' => 10000, 'Net' => 7800, 'Tax' => 22, 'TaxRate' => '22',   'CurrencyCode' => 'PLN',
          )
          'Quantity' => 3,
     ),
 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T18:30:33.013

**示例**：

```
$items = array();
$items[] = array('Quantity' => 1,
              'Product' => array ('Name' => 'name of test product',
                                  'UnitPrice' => array ('Gross' => 10000,
                                                        'Net' => 7800,
                                                        'Tax' => 22,
                                                        'TaxRate' => '22',
                                                        'CurrencyCode' => 'PLN')
                                 )
             );
$items[] = array('Quantity' => 1,
              'Product' => array ('Name' => 'name of test product',
                                  'UnitPrice' => array ('Gross' => 10000,
                                                        'Net' => 7800,
                                                        'Tax' => 22,
                                                        'TaxRate' => '22',
                                                        'CurrencyCode' => 'PLN')
                                 )
             );
$items[] = array('Quantity' => 1,
              'Product' => array ('Name' => 'name of test product',
                                  'UnitPrice' => array ('Gross' => 10000,
                                                        'Net' => 7800,
                                                        'Tax' => 22,
                                                        'TaxRate' => '22',
                                                        'CurrencyCode' => 'PLN')
                                 )
             );
... 
```

那么你可以这样做：

```
foreach ($items as $item){
    some_function_on_paypal($item); // call your function and execute the $item. 
    // it won't change paypal structure.
} 
```

# jquery - 在图像上淡入文本

> ID：12124124
> 
> 赞同：4
> 
> 时间：2012-08-25T17:22:43.897
> 
> 标签：jquery, css

有两件事似乎不适用[于此代码](http://jsfiddle.net/AndyMP/r7Acy/)。

1.  我希望能够将较大的 DIV 悬停以将较小的 DIV 置于视野中。

就目前而言，它仅在您将鼠标悬停在较小的 DIV 上时才有效。2.当我停止悬停时，较小的DIV不会消失。

```
<div class="one">
    <div class="two"></div>
</div>

<div class="one">
    <div class="two"></div>
</div> 
```

```
.one {
    position: relative;
    width: 100px;
    height: 100px;
    margin: 10px;
    background-color: #CCC;
}
.two {
    position: relative;
    top: 20px;
    left: 20px;
    height: 40px;
    width: 40px;
    background: #333;
} 
```

```
/* Fade-in text over images */
$(function(){
    $(".two").css("opacity",0).fadeTo(0, 0);
    $(".two").mouseover(function () {
        $(this).fadeTo(200, 1);
    });
    $("two").mouseout(function () {
        $(this).fadeTo(200, 0);
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T17:27:00.357

您应该定位较大的 div，`.one`然后在每次悬停`.two`的上下文中更改较小的 div 。当从可见淡入到不可见时，大多数时候你可以使用淡入/淡出，只需在 CSS 中设置元素。`this``.one``display:none`

```
$(function(){
    $('.one').on({
        mouseenter: function() {
            $(".two", this).fadeIn(200);
        },
        mouseleave: function() {
            $(".two", this).fadeOut(200);        
        }
    });
});​ 
```

[**小提琴**](http://jsfiddle.net/r7Acy/5/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T17:36:04.390

## *[jsFiddle 演示](http://jsfiddle.net/r7Acy/8/)*

```
$(".one").on('mouseenter mouseleave',function ( e ) {
      var fade = e.type=='mouseenter'?
      $('.two', this).stop().fadeTo(200, 1):
      $('.two', this).stop().fadeTo(200, 0);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-25T17:25:49.773

那是因为您正在选择*较小*的div 标签。

```
$(function() {
    $(".two").hide();
    $(".one").hover(function() {
        $('.two', this).fadeIn(200);
    }, function() {
        $('.two', this).fadeOut(200);
    });
}); 
```

[小提琴](http://jsfiddle.net/r7Acy/7/)

*   [隐藏（）](http://api.jquery.com/hide/)
*   [徘徊（）](http://api.jquery.com/hover/)
*   [淡入（）](http://api.jquery.com/fadeIn/)
*   [消退（）](http://api.jquery.com/fadeOut/)

# php - 使用和生成链接 在 codeigniter 中使用锚嵌入 我正在使用 CodeIgniter 的锚标记来生成链接 这是我在视图中使用的代码： id,$row->title);?> 上面的代码正在渲染 url id,$row->title);?> 上面的代码正在渲染 url [Title](http://localhost/Blog/index.php/blog/post/3) 我想知道在标签中嵌入其他 HTML 元素的其他方法？ HTML 页面上的输出应如下所示： [Category

### Headline

New ! Date](link) IE。在我想嵌入的标签中

### 有什么建议么 ？ Category

### '.$row->title.'

New ! Date'; anchor('blog/post/'.$row->id,$row->title);?> 或者为这种类型的链接编写自己的助手。 phphtmlcodeignitercodeigniter-2codeigniter-url 4 4 回答 4 This answer is useful 1 恕我直言，CodeIgniter 的 html 帮助器 + url 帮助器中包含的一些功能绝对是矫枉过正。 只需使用带有 PHP 短标签的 vanilla HTML……它可以传达更好的语义，节省 CPU，并且对于将来继承您的代码的人来说更容易理解…… [Category

### title; ?>

New ! Date](blog/post/<?= $row->id; ?>) 于 2012-08-25T20:12:44.027 回答 This answer is useful 0 我建议自己编写 HTML 并使用该site_url()函数来生成链接 href。 anchor()用于简单链接和在模板中嵌入链接而无需编写 HTML。您想要输出链接的方式不是anchor()设计的。 您可以使用如下函数创建一个助手： function bookmark_anchor($uri, $text) { $html = '['; $html .= 'Category'; $html .= '

### ' . $text . '

'; $html .= 'New !'; $html .= '](' . site_url($uri) . ')'; return $html } 然后像这样使用它： id, $row->title); ?> 旁注：如果你能忍受的话，我会避免使用 PHP 短标签。它们不能立即移植到每个系统，因此如果您将代码移动到另一台服务器，您可能会遇到问题（并且您可能无法启用短标签）。CI 提供了为您重写短标签的选项，但这会通过输出缓冲引入开销。 于 2012-08-25T22:22:14.737 回答 This answer is useful 0 只需使用anchor方法的第二个参数，像这样： $a ='Category

### Headline

New ! Date'; id,$a.$row->title,array("rel" => "bookmark"));?> 另外，我添加了第三个参数，它可以让您编写标签的 html 属性，例如；在这种情况下，“rel”属性。 于 2012-08-26T12:57:46.173 回答 This answer is useful 0 Category

### '.$row->title.'

New ! Date'; anchor('blog/post/'.$row->id,$row->title);?> 或者为这种类型的链接编写自己的助手。 于 2012-08-25T17:26:10.107 回答 Related 2 jquery - Jquery - 从链接的标题属性启动颜色框 0 jquery-mobile - 在 jQuery Mobile 下要求用户输入自发内容的最佳方式是什么？ 1 knockout.js - 如何使用淘汰赛js从子数组访问父变量 1 java - 创建没有触发器的 Quartz 2.x xml 作业 1 jquery - jQuery 动画在 webkit 浏览器中运行缓慢 1 ruby-on-rails - Rails 表单助手行为异常 0 css - 字体转换器：.ttf 或 .otf 到 .woff、.svg 等 1 .net - 如何使用 MSBuild 指定 DLL 文件的输出目录 3 mongodb - 限制mongodb集合中的文档数 1 objective-c - Objective-c 覆盖委托及其后代类型 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12124125
> 
> 赞同：0
> 
> 时间：
> 
> 标签：php, html, codeigniter, codeigniter-2, codeigniter-url

我正在使用 CodeIgniter 的锚标记来生成链接

这是我在视图中使用的代码：

```
<?=anchor('blog/post/'.$row->id,$row->title);?> 
```

上面的代码正在渲染 url

```
<a href="http://localhost/Blog/index.php/blog/post/3">Title</a> 
```

我想知道在`<a>`标签中嵌入其他 HTML 元素的其他方法？

HTML 页面上的输出应如下所示：

```
<a href="link" rel="bookmark"> 
    <span class="location">Category</span>
     <h3 class="headline">Headline</h3>
     <span class="new">New !</span>
    <span class="date">Date</span>
  </a> 
```

IE。在`<a>`我想嵌入的标签`<span>`中`<h3>`

有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T20:12:44.027

恕我直言，CodeIgniter 的 html 帮助器 + url 帮助器中包含的一些功能绝对是矫枉过正。

只需使用带有 PHP 短标签的 vanilla HTML……它可以传达更好的语义，节省 CPU，并且对于将来继承您的代码的人来说更容易理解……

```
<a href="blog/post/<?= $row->id; ?>" rel="bookmark"> 
    <span class="location">Category</span>
     <h3 class="headline"><?= $row->title; ?></h3>
     <span class="new">New !</span>
    <span class="date">Date</span>
</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T22:22:14.737

我建议自己编写 HTML 并使用该`site_url()`函数来生成链接 href。

`anchor()`用于简单链接和在模板中嵌入链接而无需编写 HTML。您想要输出链接的方式不是`anchor()`设计的。

您可以使用如下函数创建一个助手：

```
function bookmark_anchor($uri, $text)
{
    $html  = '<a href="' . site_url($uri) . '" rel="bookmark">';
    $html .= '<span class="location">Category</span>';
    $html .= '<h3 class="headline">' . $text . '</h3>';
    $html .= '<span class="new">New !</span>';
    $html .= '</a>';

    return $html
} 
```

然后像这样使用它：

```
<?php echo bookmark_anchor('blog/post/'.$row->id, $row->title); ?> 
```

*旁注*：如果你能忍受的话，我会避免使用 PHP 短标签。它们不能立即移植到每个系统，因此如果您将代码移动到另一台服务器，您可能会遇到问题（并且您可能无法启用短标签）。CI 提供了为您重写短标签的选项，但这会通过输出缓冲引入开销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T12:57:46.173

只需使用anchor方法的第二个参数，像这样：

```
$a ='<span class="location">Category</span>
     <h3 class="headline">Headline</h3>
     <span class="new">New !</span>
    <span class="date">Date</span>';

<?=anchor('blog/post/'.$row->id,$a.$row->title,array("rel" => "bookmark"));?> 
```

另外，我添加了第三个参数，它可以让您编写标签的 html 属性，例如；在这种情况下，“rel”属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T17:26:10.107

```
<?php
    $my_a = '<span class="location">Category</span>
        <h3 class="headline">'.$row->title.'</h3>
        <span class="new">New !</span>
        <span class="date">Date</span>';
    anchor('blog/post/'.$row->id,$row->title);?> 
```

或者为这种类型的链接编写自己的助手。

# c++ - ZeroMQ 服务器如何保持与所有客户端的连接？

> ID：12124128
> 
> 赞同：0
> 
> 时间：2012-08-25T17:22:57.407
> 
> 标签：c++, multithreading, zeromq

我有以下任务：

客户端通过 1 个端口（例如 8080）连接到服务器。服务器应该记住它们，并在完成计算后将结果发送给客户端。在该服务器一次又一次地获得一些结果之后将其发送给所有客户端。等等。

服务器如何保持与所有客户端的连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T19:12:25.753

你真的需要维护来自客户端的所有连接吗？我认为，“发布/订阅”消息传递模型将满足所描述的条件。服务器应该“发布”结果，客户端应该“订阅”这个更新。您可以在 zguide 代码示例中找到此类“服务器”的最简单示例：[wuserver.cpp](https://github.com/imatix/zguide/blob/master/examples/C++/wuserver.cpp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T15:32:49.883

我发现一些代码使用 PUB\SUB 模型并在此处与 NAT 一起使用[http://grokbase.com/t/zeromq/zeromq-dev/112q9934vg/nat-firewall-pub-sub-traversal](http://grokbase.com/t/zeromq/zeromq-dev/112q9934vg/nat-firewall-pub-sub-traversal)：

连接而不是绑定的发布者：

```
import zmq
ctxt = zmq.Context()
pub = ctxt.socket(zmq.PUB)
pub.connect("tcp://127.0.0.1:2000")
while 1:
pub.send(os.urandom(5)) 
```

绑定而不是连接的订阅者：

```
import zmq
ctxt = zmq.Context()
sub = ctxt.socket(zmq.SUB)
sub.bind("tcp://127.0.0.1:2000")
while 1:
sub.rcv() 
```

# python - 元类的奇怪继承

> ID：12124129
> 
> 赞同：0
> 
> 时间：2012-08-25T17:23:12.740
> 
> 标签：python, inheritance, metaclass

尝试从具有元类的类继承时，我在 Python 中遇到了一些非常奇怪的问题。我有这个：

```
class NotifierMetaclass(type):

    def __new__(cls, name, bases, dct):

        attrs = ((name, value) for name, value in dct.items()
                    if not name.startswith('__'))

        def wrap_method(meth):
            return instance_wrapper()(meth) # instance_wrapper is a decorator of my own

        def is_callable(value):
            return hasattr(value, '__call__')

        decorated_meth = dict(
            (name, value) if not is_callable(value)
            else (name, wrap_method(value))
            for name, value in attrs
        )

        return super(NotifierMetaclass, cls).__new__(
            cls, name, bases, decorated_meth
        )

class Notifier(object):

    def __init__(self, instance):
        self._i = instance

    __metaclass__ = NotifierMetaclass 
```

然后，在notifiers.py 中：

```
from helpers import Notifier

class CommentNotifier(Notifier):

    def __notification__(self, notification):
        return '%s has commented on your board' % self.sender

    def __notify__(self):
        receivers = self.retrieve_users()
        notif_type = self.__notificationtype__()
        for user in receivers:
            Notification.objects.create(
                object_id=self.id,
                receiver=user,
                sender_id=self.sender_id,
                type=notif_type
            ) 
```

但是，当我尝试导入 CommentNotifier 时，它会返回 Notifier。在外壳中：

```
$ python
Python 2.7.3 (default, Apr 20 2012, 22:44:07) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
(InteractiveConsole)
>>> from logic.notifiers import CommentNotifier
>>> CommentNotifier
<class 'helpers.CommentNotifier'> 
```

事实上，这（至少我是这么认为的）实际上是我一周前遇到的一些[Django 模型](https://stackoverflow.com/questions/12019336/django-models-facade)的同样问题。起初我认为它与 Django 的工作方式有关，但现在我怀疑它更像是一个 Python 的“问题”，涉及元类和继承。
这是一个已知问题还是我只是做错了什么？希望您能够帮助我。
编辑：我忘了提到我将此“错误”归因于元类，因为如果我不给通知程序一个元类，它会按预期工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T20:56:08.753

好吧，我想我明白了。正在导入正确的类。它只是有错误的名字。如果您在类上设置属性，您应该能够看到这一点。如果您`someJunk = "Notifier"`输入了 Notifier 定义和`someJunk = "CommentNotifier"`CommentNotifier 定义，那么当您导入 CommentNotifier 时，它将具有正确的值。

问题是，在创建您的`attrs`时，您排除了所有双下划线属性，包括`__module__`. 当你调用超类`__new__`时，你传入你的`attrs`，它没有`__module__`条目，所以 Python 为你创建了一个。但是由于这段代码是在包含元类的文件中执行的，所以模块被错误地设置为元类的文件而不是实际类的文件。

我没有看到您对类的实际名称观察到的行为，仅针对模块。也就是说，对我来说，导入的类名为`metafile.CommentNotifier`，`metafile`包含元类的文件在哪里。它应该命名为`submeta.CommentNotifier`，`submeta`包含 CommentNotifierClass 的文件在哪里。我不确定你为什么也会看到它`__name__`，但如果模块/名称分配的一些微妙处理在不同的 Python 版本中有所不同，我也不会感到惊讶。

`__notify__`并且`__notification__`不是 Python 魔术方法。看来您排除了双下划线方法，因为您使用双下划线来表示您自己的目的。你不应该这样做。如果必须，请为您自己的方法（如或其他）使用其他前缀`_Notifier`，然后排除这些方法并保留双下划线的方法。排除双下划线方法可能会导致其他问题。特别是，如果您决定在`__str__`使用此元类的类上定义一个真正的魔术方法（例如，），它将导致失败。

（澄清一下：如果需要，您可以使用以双下划线*开头*的方法作为私有属性，尽管这可能仍然不是一个好主意。但是，如果您这样做，您需要确保只对这些属性，而不是那些以双下划线开头*和*结尾的属性，它们是 Python 内部的魔术方法。你不应该做的是创建自己的以双下划线开头和结尾的名称，例如`__notify__`.)

# visual-c++ - VS2010 中的错误与 set_intersection() 并设置

> ID：12124130
> 
> 赞同：0
> 
> 时间：2012-08-25T17:23:27.737
> 
> 标签：visual-c++, stl, set, set-intersection

我正在尝试使用 set_intersection() 函数。我的代码如下所示

```
set<int> IntersectionSet;

for(map<string, set<int>>::iterator it = mapArtist.begin() ; it != mapArtist.end() ; ++it)
{       
    for(map<string, set<int>>::iterator it2 = it ; ++it2 != mapArtist.end() ; ++it2)
    {
        set<int>::iterator iter = set_intersection(it->second.begin(), it->second.end(), it2->second.begin(), it2->second.end(), std::inserter(IntersectionSet, IntersectionSet.begin()));
        if(IntersectionSet.size() >= 300) cout << it->first << "    " << it2->first << "\n";
        IntersectionSet.clear();
    }
} 
```

这里的问题似乎与这条线有关

```
set<int>::iterator iter = set_intersection(it->second.begin(), it->second.end(), it2->second.begin(), it2->second.end(), std::inserter(IntersectionSet, IntersectionSet.begin())); 
```

与我在本网站上看到的其他一些页面中的使用相比，这似乎是正确的。编译时出现以下错误

```
1>c:\users\Machine\documents\visual studio 2010\projects\artists\artists\artists.cpp(109): error C2440: 'initializing' : cannot convert from 'std::insert_iterator<_Container>' to 'std::_Tree_const_iterator<_Mytree>'
1>          with
1>          [
1>              _Container=std::set<int>
1>          ]
1>          and
1>          [
1>              _Mytree=std::_Tree_val<std::_Tset_traits<int,std::less<int>,std::allocator<int>,false>>
1>          ]
1>          No constructor could take the source type, or constructor overload resolution was ambiguous
1>
1>Build FAILED. 
```

我在这里想念什么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T17:28:06.323

问题在这里：

```
set<int>::iterator iter = set_intersection(/*...*/); 
```

`std::set_intersection`返回插入器，它在您的代码中是 a `std::insert_iterator`，而不是 a `std::set<int>::iterator`。

由于您不使用`iter`，因此您根本不需要对返回值做任何事情；只是打电话`std::set_intersection`。

# c++ - VC++ 致命错误 LNK1168：无法打开 filename.exe 进行写入

> ID：12124146
> 
> 赞同：43
> 
> 时间：2012-08-25T17:25:47.423
> 
> 标签：c++, windows, visual-studio, visual-c++

突然，我的 Visual Studio Express 2010 C++ 停止重建我的项目。当我第一次点击`F7`项目构建并运行良好时（见鬼，这是一个你好世界的例子）。

然后我进行一些更改并`F7`再次点击，然后我得到：

```
1>LINK : fatal error LNK1168: cannot open C:\Users\username\Documents\Visual Studio 2010\Projects\console\Debug\console.exe for writing**<br><br> 
```

现在有趣的事情来了：

1.  该应用程序未运行，并且未显示在任务管理器中。
2.  进入项目目录并尝试用手将其删除会成功，但文件再次从无处出现。
3.  系统还原被禁用。
4.  我还试图获得整个该死的驱动器的所有权。
5.  每次我删除文件时，它都会重新创建自己，但有时它会停止这样做。
6.  如果我删除该文件（并在此之后重新创建），然后我启动 sysinternals procmon，那么该文件就会消失。
7.  如果我之前启动 procmon - 那么文件会像往常一样在删除后继续出现。

操作系统：W7 SP1 64 位，带有最新更新

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-07-06T06:53:00.267

问题可能是您忘记关闭程序，而是让程序在后台运行。

找到运行exe文件程序的控制台窗口，点击右上角的X将其关闭。然后尝试重新编译程序。就我而言，这解决了问题。

我知道这个帖子很旧，但我正在为像我这样通过搜索引擎找到这个帖子的其他人回答。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-08-25T17:48:12.053

启用“应用体验”服务。启动控制台窗口并键入`net start AeLookupSvc`

*   [http://support.microsoft.com/kb/902196](http://support.microsoft.com/kb/902196)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2019-09-17T16:20:37.487

当构建在加载之前突然关闭时，我遇到了这个问题。任务管理器中不会显示任何进程，但如果您导航到项目文件夹中生成的可执行文件并尝试删除它，Windows 会声称该应用程序正在使用中。（如果没有，只需删除文件并重新生成，这会生成一个新的可执行文件）在 Windows（Visual Studio 2019）中，该文件默认位于此目录中：

```
%USERPROFILE%\source\repos\ProjectFolderName\Debug 
```

要结束据称正在运行的进程，请打开命令提示符并键入以下命令：

```
taskkill /F /IM ApplicationName.exe 
```

这会强制终止任何正在运行的实例。重建并执行！

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-01-07T18:15:15.603

重新启动 Visual Studio 为我解决了这个问题。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-03-02T15:35:36.960

就我而言，清理和重建项目解决了这个问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-08T17:50:46.393

好吧，我实际上只是保存并关闭了项目并在 Windows 8 中重新启动了 VS Express 2013，这就解决了我的问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-08-04T12:48:14.760

原因是您之前的构建仍在后台运行。我通过以下步骤解决了这个问题：

*   打开任务管理器
*   转到详细信息选项卡
*   查找您的应用程序
*   通过右键单击它来结束任务
*   完毕！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-08-03T09:06:54.830

如果上述解决方案不起作用，您可以试试这个对我有用的方法。

打开提升的命令提示符 ( `cmd -> Run as administrator`)，然后编写以下命令并按 Enter：

```
wmic process where name='YOUR_PROCESS_NAME.exe' delete 
```

如果您看到一条消息：`Instance deletion successful.`，那么您将再次能够从 VS 构建和运行项目。

例如，在 OP 的情况下，命令将是：

```
wmic process where name='console.exe' delete 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-10-09T02:44:43.157

当从未执行 FindClose 时，不正确使用 FindNextFile 等函数也可能是一个问题。构建文件的进程终止，构建本身可以删除，但LNK1168会因为打开句柄而阻止重新构建。这可能会在 Explorer 中创建句柄泄漏，可以通过终止和重新启动 Explorer 来解决，但在许多情况下需要立即重新启动。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-10-04T05:25:41.227

我知道这是一个老问题，但我想我会分享我是如何解决这个问题的。

如果您使用的是 Visual Studio 并且出现此错误，您可以尝试附加到进程 (CTRL+ALT+P) 并找到“(program).exe”进程。当您尝试附加到它时，将显示一个错误，指出它无法附加，这会从“运行”中删除该进程（即使它不是......）您还可以从中删除（程序）.exe你的调试文件夹。

希望这对某人有帮助！:)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-08-14T14:32:49.750

**终于找到了最适合我的最佳方式**

***除以下***内容外，此页面中的所有解决方案均不适合我

 **在第二个答案的评论部分下方，尝试以下操作：

> 添加到我上面的评论中，*任务管理器*不会显示 filename.exe 进程，但***资源监视器会***显示，所以我可以从那里杀死它，从而解决问题***而无需重新启动。***– A__ 2019 年 6 月 19 日 21:23

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-08-22T09:43:01.693

如果上述建议都不适合您，对我来说就是这种情况，只需更改项目名称即可。它在新项目名称中创建一个新的 exe。稍后当您重新启动时，您可以将其更改回原来的项目名称。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2013-09-12T23:54:28.440

我也有同样的问题。我的控制台窗口不再打开，但我可以通过转到任务管理器中的进程来查看我的应用程序正在运行。进程名称是我的应用程序的名称。一旦我结束了这个过程，我就能够毫无问题地构建和编译我的代码。

* * *

## 回答 #14

> 赞同：-4
> 
> 时间：2014-01-06T15:07:01.020

以管理员身份启动您的程序。该程序无法重写您的文件，因为您的文件位于硬盘驱动器上的受保护位置。**

# c# - Formview插入未触发插入方法

> ID：12124153
> 
> 赞同：0
> 
> 时间：2012-08-25T17:26:52.377
> 
> 标签：c#, asp.net, visual-studio-2010, entity-framework

我正在使用 formview 来编辑实体模型。简化的 formview 标头代码为：

```
<asp:FormView ID="formViewSalon" runat="server" DataSourceID="OdsSalonData"> 
```

对象数据源代码为：

```
<asp:ObjectDataSource ID="OdsSalonData" runat="server"  
                      DataObjectTypeName="WebApplication1.EDM.Salon" 
                      DeleteMethod="DeleteSalon" InsertMethod="CreateNewSalon"
                      SelectMethod="GetSalonBySalonId" 
                      TypeName="WebApplication1.EDM.SalonLogic" 
                      UpdateMethod="UpdateSalon" OnSelecting="OdsSalonData_Selecting"> 
```

保存/更新按钮的代码是：

```
protected void ButtonSave_Click(object sender, EventArgs e)
{
    if (formViewSalon.CurrentMode == FormViewMode.Insert)
    {
        formViewSalon.InsertItem(true);
    }
    else if (formViewSalon.CurrentMode == FormViewMode.Edit)
    {
        formViewSalon.UpdateItem(true);
    }
} 
```

当我更新表单时，该方法`UpdateSalon`会在尝试执行该行时触发：

```
formViewSalon.UpdateItem(true); 
```

但是当我尝试插入新记录时，该方法`CreateNewSalon`在运行时不会触发：

```
formViewSalon.InsertItem(true); 
```

两种方法的定义是：

```
[System.ComponentModel.DataObjectMethodAttribute(System.ComponentModel.DataObjectMethodType.Insert, true)]
public string CreateNewSalon(Salon newSalon) { } 
```

和：

```
[System.ComponentModel.DataObjectMethodAttribute(System.ComponentModel.DataObjectMethodType.Update, true)]
public void UpdateSalon(Salon updatedSalon) { } 
```

我快疯了这两个过程之间的区别在哪里。请告知，任何线索/想法都会立即得到测试！谢谢！

# java - Maven 2.2.1 优化项目构建时间

> ID：12124155
> 
> 赞同：2
> 
> 时间：2012-08-25T17:27:01.363
> 
> 标签：java, maven

我在思考一个想法，想向开发者社区提出一个问题。当我在实践中使用 maven 进行大型 JAVA 项目时，它具有惊人的好处。然而，项目正在迅速增长，随着时间的流逝会出现更多的模块，从而导致巨大的构建时间，而这对持续集成没有影响。

问题 - 是否有一些开箱即用的功能可以允许智能项目构建，它可以首先检查模块目标 jar 是否与位于本地 maven 存储库中的不同。如果后者是真的，maven 可以继续到下一个模块而不重建和重新部署相同的模块吗？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T20:35:27.793

最好的办法是切换到支持并行构建的 Maven 3

```
mvn -T 3.0C clean package 
```

还可以帮助构建可以通过 Maven 实现的更改：

```
mvn -pl module -am package 
```

像 jenkins 这样的许多 CI 系统也支持增量构建。进一步检查正在运行哪种测试？你可以并行运行单元测试吗？（maven-surefire-plugin）。这些单元测试真的是单元测试还是其中一些可能是集成测试？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T17:52:21.653

这个问题没有灵丹妙药。这是许多大型项目所面临的普遍问题。

CI 被触发的事实通常是由 SCM 提交引起的，所以我建议某些事情总是发生变化。

在不知道您使用的是什么 CI、如何配置模块等的情况下，除了一些基础知识之外，我无法提供太多建议。

1) 确保您在 CI 中配置的模块尽可能细化 - 即尽可能小的构建单元。这意味着单个提交不需要重建大量代码。

2) 开发者习惯：只提交一个完整的工作单元。这就是 Git 的意义所在。开发人员在本地提交，然后仅在工作单元完全完成时才推送到主服务器。这减少了下游 CI 构建。

3) 观察你在 Maven 中使用的报告和模块。有些需要永远运行。你真的需要它们吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T17:52:54.623

> 问题 - 是否有一些开箱即用的功能允许智能项目构建可以首先检查模块目标 jar 是否与位于本地 maven 存储库中的不同？[...]

我所知道的唯一“聪明”是跳过您不需要的构建中的“清理”阶段——这样一些源将不会被编译，或者资源不必要地重新生成。尽管如此，项目将被重新打包。

您也可以考虑将一些模块排除在不同的开发周期中（除非您确实需要在每个版本中对所有模块进行更改）。然后可以将不经常更改的模块作为依赖项包含在存储库中——它们需要单独构建和部署。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T18:08:48.403

（假设：团队内部存储库。）

离线（如果被插件认可）构建：

```
mvn -o ... 
```

（假设：IDE 构建绕过 maven（在后台增量编译。）

跨模块依赖的限制。*从其他模块导入非常容易，有时会出现纠缠不清的依赖关系。*

# php - 如何知道哪个用户付费？

> ID：12124156
> 
> 赞同：-1
> 
> 时间：2012-08-25T17:27:20.583
> 
> 标签：php

我如何知道哪个用户使用 php 为我的服务付费（通过 paypal）？

我的数据库中有一个名为 users 的表，其中包含以下行：

```
ID, Username, email, IP, password 
```

如果用户的 paypal 电子邮件与他在我的网站上注册的电子邮件不同，我怎么知道*他*支付了我而不是其他人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T19:12:18.287

我已经有一段时间没有使用 Paypal 付款了，但是当您将结帐详细信息发送到 Paypal 时，我似乎记得您发送了一个交易 ID (txn_id) 或类似的东西，您只需将该交易 ID 存储在您的用户旁边数据库中，当 PayPal 返回带有交易 ID 的“成功”付款时，您就知道是哪个用户付款了。

你还没有说你用什么方法来收款，但我似乎再次记得 Paypal 的 IPN（即时付款通知）服务是一个很好的起点；

这是一些信息的链接：[Paypal 的 IPN 服务](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_admin_IPNIntro)

还有一些：[关于如何集成 IPN 的代码示例](https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623)

# sql - 在 Oracle 中使用 SQL 从 3 个表中选择数据

> ID：12124157
> 
> 赞同：2
> 
> 时间：2012-08-25T17:27:23.277
> 
> 标签：sql

我希望那里有人可以提供帮助。我对这一切*都很*陌生，我被困住了。我有 3 个表，我试图从中提取数据：

客户（*custid*、first、last、pointsclubno、调查编号、订单日期、订单总数）

员工（*empid*、firstname、lastname、salary、sale、salesdate、custid、locationid）

位置（*locationid*，地址，城市，州）

我正在尝试选择由员工服务的客户以及它发生的位置。我首先尝试了这个查询：

```
SELECT EMPLOYEE.EMPID, FIRST, LAST, LOCATION.LOCATIONID
FROM   EMPLOYEE, CUSTOMER, LOCATION  
WHERE  EMPID = '111111'
   AND EMPLOYEE.LOCATIONID = LOCATION.LOCATIONID; 
```

未选择任何行。

然后这个查询：

```
SELECT EMPLOYEE.EMPID, FIRST, LAST, LOCATION.LOCATIONID
FROM   EMPLOYEE, CUSTOMER,LOCATION
WHERE  EMPID = '111111'
   AND EMPLOYEE.LOCATIONID = LOCATION.LOCATIONID; 
```

* * *

```
 EMPID FIRST     LAST     LOCATIONID

111111 BOB       JONES      1267
111111 JIM       DAVIS      1267
111111 SCOTT     CONKLIN        1267
111111 DAN       ORTIZ      1267
111111 BRIAN     JOHNSON        1267
111111 TOM       MANN       1267
111111 LIZ       HENSLEY        1267
111111 BARB      BUTLER     1267
111111 MARIE     ANTON      1267
111111 JOE       SMITH      1267 
```

选择了 10 行。

根据表格的设置方式，这应该只拉 1 行。如您所见，第一个查询拉 0 和第二拉 10。谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T17:36:43.947

我已经认为您的数据库架构中有错误的逻辑？您应该在客户表中添加 empid 并从员工表中删除 custid 吗？因为每个员工可以服务很多客户？

然后使用：

```
SELECT * 
FROM   CUSTOMER C, LOCATION L, EMPLOYEE E 
WHERE  C.EMPID = '11111' 
   AND E.EMPID = '11111' 
   AND E.locationid = l.locationid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T17:51:27.093

试试这个：[你没有加入客户和员工表]

```
SELECT 
EMPLOYEE.EMPID, 
FIRST, LAST, 
LOCATION.LOCATIONID 
FROM CUSTOMER, EMPLOYEE, LOCATION
WHERE 
CUSTOMER.CUSTID = EMPLOYEE.CUSTID AND
EMPLOYEE.LOCATIONID = LOCATION.LOCATIONID AND
AND EMPLOYEE.EMPID = '111111'; 
```

# ios - 从 facebook 页面获取事件

> ID：12124159
> 
> 赞同：1
> 
> 时间：2012-08-25T17:27:56.010
> 
> 标签：ios, facebook, json, facebook-graph-api

所以我需要获取 facebook 页面的事件（如果可能，以 JSON 格式）。我正在使用 iOS，我知道如何在获得数据后实现数据，但我只是不知道如何从 facebook 获取实际数据。我已经尝试过图形 api，但它需要一个访问令牌来做我想做的事。我看到一个应用程序不需要用户进入并允许 Facebook 应用程序访问以从页面获取事件，我想要同样的东西。

[https://graph.facebook.com/HardasNailsministry/](https://graph.facebook.com/HardasNailsministry/) <= 这有效 [https://graph.facebook.com/HardasNailsministry/events](https://graph.facebook.com/HardasNailsministry/events) <= 这不起作用（需要访问令牌）

那么......有没有办法在没有访问令牌的情况下获取该事件列表？或者有没有一种方法可以在不需要用户允许应用访问的情况下获取该访问令牌？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T22:32:52.107

我得到了它。

您无需让用户允许访问他/她的帐户即可获得访问令牌。

我所做的是我去了我的 facebook 开发者页面并创建了一个应用程序。它给了我一个应用 ID 和应用密码。我在以下 url 中使用它来获取 access_token：

```
https://graph.facebook.com/oauth/access_token?client_id=APP_ID&client_secret=APP_SECRET&grant_type=client_credentials 
```

然后我将结果添加到我的图形 API 请求字符串中。

# jquery - 如何将数据发布到外部 url 并通过 jquery 获取返回的 json 数据？

> ID：12124162
> 
> 赞同：0
> 
> 时间：2012-08-25T17:28:13.403
> 
> 标签：jquery, json, cross-domain, http-post

我尝试使用 jquery 将数据发布到外部网站以获取 json 数据

问题是我的响应功能不起作用，那么如何解决呢？

我的代码示例

```
$.getJSON("http://externalweb.com/data.php?callback=?",
    function(result) {
        // this function is not work :(
        $("#result").html("test");
    }
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T17:34:29.223

JSON 不支持从外部 URL 获取数据

但是，您可以使用 JSONP。

这是另一位网络作者（不是我）对此的解释：

[http://www.jquery4u.com/json/jsonp-examples/](http://www.jquery4u.com/json/jsonp-examples/)

# java - 接口有 toString 方法吗？

> ID：12124163
> 
> 赞同：13
> 
> 时间：2012-08-25T17:28:14.403
> 
> 标签：java, interface

如何使用没有方法`toString`的 interface 的引用变量调用方法？`Test``toString`

```
interface Test
{
    void show();
    String toHi();
}
class Demo implements Test
{
    public void show(){
        System.out.println("Show");
    }
    public String toString(){
        return "Hello"; 
    }
    public String toHi(){
        return "Hi";    
    }

    public static void main(String[] args) 
    {
        Test t=new Demo();
        String s=t.toString();
        System.out.println(s);
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-25T17:34:11.420

**Java文档说**...

 **`When an interface has no direct SuperInterface, it will create abstract public method for all those public methods present in the Object class`.

这就是为什么您可以`toString()`在接口引用上调用该方法的原因

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-25T17:30:27.717

`Object`有一个[`toString()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#toString())方法，所以*一切*（除了原始类型）都有一个`toString()`方法。Java 会将任何东西，甚至是一个空接口，都视为拥有 的所有方法`Object`，因为它总是如此。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-25T17:30:27.053

任何`Object`人都有`toString()`方法。任何会实现接口的东西都会隐式地扩展`Object`，所以也会有一个`toString()`方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-25T17:43:33.667

您能够通过接口的该变量调用该方法的原因是在 Java 中的接口情况下进行了特殊处理。

尽管该方法没有在接口中显式声明，但特殊处理隐式地为类中定义的所有公共实例方法提供了声明`Object`。`toString`方法就是其中之一。

但是，请注意，与隐式扩展类的类不同，接口不会隐式扩展任何超级接口（或类）`Object`。

你会在这里找到更好的解释——[接口真的继承了 Java 中的 Object 类吗？](http://geekexplains.blogspot.com/2008/06/do-interfaces-really-inherit-from-class.html) .

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-25T17:30:40.250

类`C`实现`My`但它也扩展`Object`，因为所有对象最终都在它们的继承树中。

该类[`Object`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html)确实具有方法`toString()`，以及其他一些方法。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-25T17:32:31.903

由于类`Demo`隐含`extends`类`Object`，它继承方法`toString`。并且由于这不是一种`abstract`方法，因此类`Demo`不必提供实现，尽管您可以直接`toString`调用`Demo`. 有关更多信息，请参阅[课程：接口和继承](http://docs.oracle.com/javase/tutorial/java/IandI/)。

如[`Object`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html)API 中所述，

> 类`Object`是类层次结构的根。每个类都有 `Object`一个超类。所有对象，包括数组，都实现了这个类的方法。

另外，请注意该`toString`方法不是接口定义的一部分，而是`Object`类定义的一部分。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-30T15:01:17.943

[toString](https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#toString())在内部声明`Object`。当一个`Object`实现一个接口时，它必须有一个`toString`方法。

因此，任何对象引用，无论是接口还是枚举，都必须具有所有对象方法：

*   克隆
*   等于
*   敲定
*   获取类
*   哈希码
*   通知
*   通知所有

***   等待**

 *** * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-25T17:33:45.120

java 中的每个对象（基本类型除外）都有一个 toString() 方法。****

# php - 将图像上传到 mySql 的错误消息

> ID：12124169
> 
> 赞同：0
> 
> 时间：2012-08-25T17:29:01.063
> 
> 标签：php, mysql

在以下代码中，我尝试将图像上传到 mySql 数据库：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html>
<head>
</head>
<body>
<?php 
        $hostname = '';
        $username = '';
        $password = '';
        try {
            $dbh = new PDO("mysql:host=$hostname;dbname= abc", $username, $password);
            //echo 'Connected to database';
        }
        catch(PDOException $e)
        {
          echo $e->getMessage();
        }
            if (!$_POST['uploaded']){
            ?>
          <form action="<? echo $_SERVER['PHP_SELF']; ?>" method="post">
              <p><select name="category">
                     <option value="non">Select category</option>
                     <option value="cars">Cars</option>
                     <option value="real">Real estate</option>
                     <option value="services">Services</option>
                     <option value="electronics">Electronics</option>
                     <option value="furniture">Furniture</option>
                     <option value="home">Home appliance</option>
                     <option value="outdoor">Outdoor</option>
              </select></p>
              <p>Title <br /><input class="tb10" type="text" name="title" /></p>
              <p>Price <br /><input class="tb10" type="text" name="price" /></p>
              <p>Type<br /><select name="type">
                     <option value="non">Select type</option>
                     <option value="offer">Offer</option>
                     <option value="want">Want</option>
              </select><br /></p>
              <p>Description <br />
              <textarea name="description" rows="5" cols="60"></textarea></p>
              <p>Upload pictures<br /><input type="file" name="pictures1"/><br /><input type="file" name="pictures2"/><br /><input type="file" name="pictures3"/><br /><input type="file" name="pictures4"/></p>
              <p>Email <br /><input class="tb10" type="text" id="email1" name="email1" onkeyup="Twitter.updateUrl(this.value)"/><span id="msgbox" style="display:none"></p></span><div id="status1"></div></p>
              <p>Phone <br /><input class="tb10" type="text" name="phone" /></p>
              <p>Address <br /><input class="tb10" type="text" name="address" /></p><br /><br />
              <input type="submit" value="Submit" name="uploaded" class="button" />
            </form>
            <?php 
            }else{
$ip=$REMOTE_ADDR; 
copy($pictures1, "./temporary/".$ip."");
copy($pictures2, "./temporary/".$ip."");
copy($pictures3, "./temporary/".$ip."");
copy($pictures4, "./temporary/".$ip."");
$filename1 = "./temporary/".$REMOTE_ADDR; 
$filename2 = "./temporary/".$REMOTE_ADDR; 
$filename3 = "./temporary/".$REMOTE_ADDR; 
$filename4 = "./temporary/".$REMOTE_ADDR; 
$fp1 = fopen($filename1, "r");
$fp2 = fopen($filename2, "r");
$fp3 = fopen($filename3, "r");
$fp4 = fopen($filename4, "r");
$contents1 = fread($fp1, filesize($filename1)); 
$contents2 = fread($fp2, filesize($filename2)); 
$contents3 = fread($fp3, filesize($filename3)); 
$contents4 = fread($fp4, filesize($filename4));
fclose($fp1); 
fclose($fp2); 
fclose($fp3); 
fclose($fp4);  
$encoded1 = chunk_split(base64_encode($contents1));  
$encoded2 = chunk_split(base64_encode($contents2));  
$encoded3 = chunk_split(base64_encode($contents3));  
$encoded4 = chunk_split(base64_encode($contents4));  
$category = $_POST['category'];
$title = $_POST['title'];
$price = $_POST['price'];
$type = $_POST['type'];
$description = $_POST['description'];
$email1 = $_POST['email1'];
$phone = $_POST['phone'];
$address = $_POST['address'];
$query_insert_user = "INSERT INTO `adtable` ( `Category`, `Title`, `Price`, `Type`, `Description`, `Img1`,`Data1`,`Img2`,`Data2`,`Img3`,`Data3`,`Img4`,`Data4`,`Email`, `Phone`, `Address`) VALUES ( '$category', '$title', '$price', '$type', '$description', 'NULL', '$encoded1', 'NULL', '$encoded2','NULL', '$encoded3','NULL', '$encoded4', '$email1', '$phone', '$address')";
$result_insert_user = mysqli_query($dbh, $query_insert_user);
if (!$result_insert_user) {
echo 'Query Failed ';
}
unlink($filename1); 
unlink($filename2); 
unlink($filename3); 
unlink($filename4); 
} 
?>
</body>
</html> 
```

我希望用户上传 4 张图片。我寻找解决此问题的方法，但找不到任何东西。

我得到的错误是：

```
Parse error: syntax error, unexpected T_VARIABLE in /home/a6395791/public_html/friendscave/PostAD.php on line 
```

这条线是

```
$filename2 = "./temporary/".$REMOTE_ADDR; 
```

谢谢

# python - 如何检查 SVN 凭据是否正确以及 SVN 服务器是否正在运行

> ID：12124170
> 
> 赞同：2
> 
> 时间：2012-08-25T17:29:04.910
> 
> 标签：python, svn, monitoring, credentials

我正在尝试编写一个 Python 应用程序，它能够确定各种 SVN 服务器配置是否正确。这意味着服务器是可访问的并且凭据是正确的。实现这一目标的最简单方便的方法是什么？

谢谢你的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T19:14:35.447

最简单的方法是使用像[pysvn](http://pysvn.tigris.org/)这样的库，然后简单地尝试获取 svn 存储库的信息。

# php - jquery验证问题

> ID：12124171
> 
> 赞同：0
> 
> 时间：2012-08-25T17:29:18.577
> 
> 标签：php, jquery

我是 jquery 的新手，目前在 jquery 验证上有问题。这是我的代码：

```
jQuery(function(){
                jQuery("#qty").validate({
                    expression: "if (VAL) return true; else return false;",
                    message: "please enter buying amount"
                });
                jQuery("#qty").validate({
                    expression: "if (!isNaN(VAL)) return true; else return false;",
                    message: "Only integer is valid for amount"
                });

                jQuery("#qty").validate({
                    expression: "if (VAL > 0) return true; else return false;",
                    message: "At least buy 1 share"
                });
                jQuery("#qty").validate({
                    expression: "if (VAL <= jQuery('#division').val()) return true; else return false;",
                    message: "You have insufficient amount to purchase"
                }); 
```

和另一个相关部分：

```
<td><input type="text" name="quantity" size="10" id="qty" value=""/>
<?php 
$division = $available/$rate;
?> 
```

现在的问题是我无法检测到输入的数量是否为十进制。如果是十进制，我想显示错误消息：只有整数对金额有效。而且，当我将输入的数量与 $division 进行比较时，无论我输入什么正整数，它都会始终显示错误消息“您的购买金额不足”。谁能给我一些建议？提前说声谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T18:21:46.530

您可以使用这种方法来知道数字不是十进制的

```
jQuery("#qty").validate({
     expression: "if (!isNaN(VAL) && (parseFloat(VAL)==parseInt(VAL))) return true; else return false;",
     message: "Only integer is valid for amount"
 }); 
```

并在比较方面将值解析为 Int 即

```
jQuery("#qty").validate({
   expression: "if (parseInt(VAL, 10) <= parseInt(jQuery('#division').val(), 10)) return true; else return false;",
   message: "You have insufficient amount to purchase"
}); 
```

并防止前导 0 你可以使用

```
jQuery("#qty").validate({
   expression: "if (VAL.substr(0,1) != '0') return true; else return false;",
   message: "Leading zero is not allowed"
}); 
```

# javascript - 在 JavaScript 中，如何找出数字字段的容器对象？

> ID：12124172
> 
> 赞同：2
> 
> 时间：2012-08-25T17:29:19.173
> 
> 标签：javascript, performance, hash

```
var obj = {a:1,b:2};
function parent_object(num){
    console.log('This number is inside the object ',<????>);
}
parent_object(obj.a) 
```

这应该输出指向 obj。我发现这样做的唯一方法是将每个数字对象装箱到一个对象中，该对象将保留对父对象的引用。然而，这是一个性能杀手。有没有更好的方法来跟踪号码的位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T17:32:43.247

其实没有。不仅在 JavaScript 中，而且在其他传统语言中都没有。

据我所知，唯一的方法是让您完全按照您自己所说的去做：将数字（或任何其他字段类型）装箱到一个对象中，该对象将保持对其封闭父对象的引用（可能通过构造函数注入）。

有问题的拳击可以这样完成：

```
BoxedValue = function(value, parent) {
    this.value = value;
    this.parent = parent;
}

var i = {};
n.i = new BoxedValue(12, i)
console.log(i.n.parent); 
```

但是，一般来说，当前浏览器对 JavaScript 应用程序性能的影响最重要的因素是您处理内存使用的方式。因此，这种方法并不是真正可取的，我建议您通过其他方法解决您的问题，无论它可能是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T17:33:02.620

没有办法做到这一点，因为您可以让对象从多个位置相互引用：

```
var num = 1;
var obj = {a: num, b: 2};
var obj2 = {x: num};

parent_object(obj.a);    // should it return obj or obj2? Both are technically correct! 
```

你真的想在这里解决什么？可能有更好的方法可供您使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T17:35:29.423

```
var obj = {a:1,b:'string',c:2} 
for(prop in obj){
  if(typeof obj[prop]=='number'){
    console.log(prop + ' : ' + obj[prop] + ' found')
  }
} 
```

日志：

a : 1 找到

c : 2 找到

# linux - Lynx 跳过从标准输入 (post_data) 接收参数

> ID：12124176
> 
> 赞同：3
> 
> 时间：2012-08-25T17:29:48.840
> 
> 标签：linux, post, stdin, lynx

我正在尝试使用 lynx 发送发布请求

```
lynx -source -mime_header -post_data http://localhost/post.php 
```

这会将我重定向到标准输入以键入 foo=bar *return* --- *return*然后 lynx 发送请求，但我需要立即发送它以避免输入标准输入（/post.php 只打印 $_POST 数组）

这个命令应该看起来像`lynx -source -mime_header -post_data foo=bar http://localhost/post.php` ，但它不起作用。

谢谢

# kdb - Kdb+：如何控制权限和权利

> ID：12124177
> 
> 赞同：5
> 
> 时间：2012-08-25T17:30:13.663
> 
> 标签：kdb

有人可以建议我们如何控制 kdb+ 中的权限和权利，以确保数据/表得到正确的访问控制？

我知道有 -U 用户参数用于指定用户/密码，但挑战在于表级权限。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:21:59.233

您可以通过执行以下操作添加简单身份验证：

```
-U /path/to/password.txt 
```

该文件包含用户：密码，其中密码是 q md5“密码”的结果，并去掉前面的 0x。

对于更复杂的身份验证，您可以更改`.z.pw`和`.z.ac`挂钩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T20:58:58.503

从一阶导数中查看这篇[论文。](http://www.firstderivatives.com/lecture_series_pp.asp?downloadflyer=q_for_Gods_July_2013)可能有帮助

# c++ - Trouble With Overload Resolution

> ID：12124187
> 
> 赞同：0
> 
> 时间：2012-08-25T17:31:23.737
> 
> 标签：c++, operator-overloading, overload-resolution

Id like to say that there's a ton of C++ Overloading questions already on SO, but after an hour of looking at them and other posts on forums and newsgroups, I'm still stumped.

**Background**

I've created a namespace, call it A, where a bunch of classes have the same way of implementing the < operator. In order to avoid code duplication, I wrote this:

```
namespace A{
     template<typename T>
     bool operator< (const T&, const T&);
} 
```

In a header file called operator_forwards.h along with a few other declarations. I then made it a friend to the correct classes by adding a line like this:

```
//example.h
#include "operator_forwards.h"
namespace A{
    template<typename T>
    class Example{
        public:
        friend bool operator< <>(const Example<T>&, const Example T&);
        private:
        T start;
    };
} 
```

Finally, I put the definition in a file called operators.h like this:

```
namespace A{
    template<typename T>
    bool operator<(const T& lhs, const T& rhs){
        using std::operator<;
        return lhs.start<rhs.start;
    }
} 
```

And included everything in one header file:

```
//A.h
#include "example.h"
#include "operators.h" 
```

**The Problem**

The problem is when I call operator< like this:

```
Example<vector<int>::iterator> ex1(**foo**);
Example<vector<int>::iterator> ex2(**bar**);
ex1<ex2; 
```

它调用 A::operator< 很好，但是它递归地调用自己来做`ex1.start<ex2.start`而不是查找更专业的 operator< 用于 vector::iterator。导致错误 C2039: start is not a member of vector::iterator。

有人对确保 A::operator< 为 ex1.start 调用正确的 operator< 有任何建议吗？

注意：大约有 20 个类使用 A::operator<，所以如果我可以避免在每个类中单独定义它，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T17:49:29.423

我谦虚的建议：不要那样做。

除了实施`A::operator<`. 任何地方的任何代码都`A`可能被这个声称支持`operator<`任何东西的意外模板迷惑，但实际上只能在具有`start`成员的类型上执行它。

就您而言，您在`friend`任何地方的每个相关类中都放置了一个声明。在这些类中简单地实现它几乎不需要任何代码。如果这冒犯了您的代码重复敏感性，请考虑使用共享基类：

```
template <typename T>
class IterWrapper {
public:
    IterWrapper() {}
    explicit IterWrapper(T it) : start(it) {}

    bool operator< (const IterWrapper<T>& rhs) { return start < rhs.start; }
protected:
    T start;
}; 
```

# python - BeautifulSoup .text 方法返回不带分隔符的文本（\n、\r 等）

> ID：12124191
> 
> 赞同：16
> 
> 时间：2012-08-25T17:31:58.377
> 
> 标签：python, parsing, beautifulsoup, vk

我尝试从最大的俄罗斯歌词网站[http://amalgama-lab.com](http://amalgama-lab.com)解析歌词，并将歌词（翻译和原始）保存到我的 Vkontakte 帐户的音频列表中（遗憾的是，amalgama 没有任何 API）

```
import urllib
from BeautifulSoup import BeautifulSoup
import vkontakte
vk = vkontakte.API(token=<SECRET_TOKEN>)
audios = vk.getAudios(count='2')
#{u'artist': u'The Beatles', u'url': u'http://cs4519.vkontakte.ru/u4665445/audio/4241af71a888.mp3', u'title': u'Yesterday', u'lyrics_id': u'2365986', u'duration': 130, u'aid': 166194990, u'owner_id': 173505924}
url = 'http://amalgama.mobi/songs/'
for i in audios:
    print i['artist']
    if i['artist'].startswith('The '):
        url += i['artist'][4:5] + '/' + i['artist'][4:].replace(' ', '_') + '/'     +i['title'].replace(' ', '_') + '.html'
    else:
        url += i['artist'][:1] + '/' + i['artist'].replace(' ', '_') + '/' +i['title'].replace(' ', '_') + '.html'
    url = url.lower()
    page = urllib.urlopen(url)
    soup = BeautifulSoup(page.read(), fromEncoding="utf-8")
    texts = soup.findAll('ol', )
    if len(texts) != 0:
        en = texts[0].text #this!
        ru = texts[1].text #this!
        vk.get('audio.edit', aid=i['aid'], oid = i['owner_id'], artist=i['artist'], title = i['title'], text = ru, no_search = 0) 
```

但是 .text 方法返回*没有*任何分隔符的字符串：

“昨天，我所有的烦恼似乎都那么遥远，现在看来，它们都在这里停留哦，我相信昨天突然间，我不再是从前的一半，我的阴影笼罩着我哦，昨天突然来了[合唱：]她为什么要走我不知道，她不会说我说错了，现在我渴望昨天昨天，爱是那么容易玩的游戏现在我需要一个躲藏的地方哦，我相信”

这是主要问题。接下来，有什么更好的方式来保存歌词：

歌词第 1 行（原创）

歌词第 1 行（翻译）

歌词第 2 行（原创）

歌词第 2 行（翻译）

歌词第 3 行（原创）

歌词第 3 行（翻译）

...

? 我只得到凌乱的代码。谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2016-11-02T15:14:05.393

试试方法的`separator`参数[`get_text`](https://www.crummy.com/software/BeautifulSoup/bs4/doc/#get-text)：

```
from bs4 import BeautifulSoup
html = '''<p> Hi. This is a simple example.<br>Yet poweful one. <p>'''
soup = Beautifulsoup(html)
soup.get_text()  
# Output: u' Hi. This is a simple example.Yet poweful one. '
soup.get_text(separator=' ')  
# Output: u' Hi. This is a simple example. Yet poweful one. ' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-26T03:18:56.677

我建议您查看 BeautifulSoup 4 中的[.strings 生成器。](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#strings-and-stripped-strings)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T18:19:26.493

你可以这样做：

```
soup = BeautifulSoup(html)
ols = soup.findAll('ol') # for the two languages

for ol in ols: 
    ps = ol.findAll('p')
    for p in ps:
        for item in p.contents:
            if str(item)!='<br />':
                print str(item) 
```

# android - 在后台运行的 Android 应用程序是否可以使用位置或 GPS 服务

> ID：12124200
> 
> 赞同：0
> 
> 时间：2012-08-25T17:32:52.123
> 
> 标签：android, geolocation, location, background-process

我只是想确保当前在后台运行的应用程序（或所有应用程序）（作为后台服务或类似的东西）可以访问 Android 上的定位服务（GPS 等）。

我还想知道这是否是 Android 应用程序的正确行为（指向规范等的链接）以及 Google 是否会批准在 Google Play 商店下载此类应用程序？

这对所有版本的 Android 都是一样的吗？

答案似乎是肯定的，但我想 100% 确定我做对了。

我查看了以下线程，但我不确定他们是否能准确回答我的问题（可用性、Android 中设计的正确行为等）

[安卓后台定位跟踪](https://stackoverflow.com/questions/11228001/location-tracking-in-background-in-android)

[Android：如何定期将位置发送到服务器](https://stackoverflow.com/questions/2775628/android-how-to-periodically-send-location-to-a-server)

[在android中定期将当前位置发送到服务器](https://stackoverflow.com/questions/9407309/send-current-location-to-server-periodically-in-android)

[android处理程序循环](https://stackoverflow.com/questions/6456515/android-handler-loop/6456642)

[Android：我想在后台使用 GPS 获取位置，以便在我的应用程序中使用方向工具，如何？](https://stackoverflow.com/questions/5274125/android-i-want-to-obtain-location-using-gps-in-the-background-for-use-with-a-di)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T17:35:58.487

是的。定位服务（通过 GPS 和网络提供商）可以在后台服务中使用。但是，请记住，GPS 非常耗电，在后台长时间使用可能会对用户的电池寿命产生巨大影响。

此外，Google Play 没有申请审核流程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T17:49:22.030

答案是肯定的，Google 会毫无问题地在 Play 商店中接受您的应用（只要您不向用户隐藏您的应用在后台执行的操作）

为了解决 Bradly 和 Raghav 指出的电池相关问题，我强烈建议您阅读 Google 的以下文章：http: [//developer.android.com/training/efficient-downloads/index.html](http://developer.android.com/training/efficient-downloads/index.html)

# java - 在 JList 上使用 setVisibleRowCount 和 setLayoutOrientation 的意外结果

> ID：12124202
> 
> 赞同：1
> 
> 时间：2012-08-25T17:33:24.443
> 
> 标签：java, swing, jlist

`setVisibleRowCount`使用and `setLayoutOrientation`on得到了意想不到的结果`JList`。我在`JList`组件上有以下代码：

```
public class JListDemo extends JPanel {

private DefaultListModel listModel;
private JList list;
private JButton jbAdd;
private JButton jbRemove;

public JListDemo() {
    super();        
    init();
}

private static void createAndShowGUI() {
    JFrame frame = new JFrame("JList Demo");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setContentPane(new JListDemo());
    frame.setResizable(false);
    frame.pack();
    frame.setLocationRelativeTo(null);
    frame.setVisible(true);
}

private void init() {
    listModel = new DefaultListModel();
    list = new JList(listModel);
    //list.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
    list.setVisibleRowCount(6);       
    list.setLayoutOrientation(JList.VERTICAL_WRAP);        
    JScrollPane scrollList = new JScrollPane(list);        
    jbAdd = new JButton("Add");
    jbRemove = new JButton("Remove");

    JPanel buttonPanel = new JPanel();
    buttonPanel.add(jbAdd);
    buttonPanel.add(jbRemove);

    Box displayBox = Box.createVerticalBox();
    displayBox.add(scrollList);
    displayBox.add(buttonPanel);

    add(displayBox);

    bindListeners();
}

private void bindListeners() {
    list.addListSelectionListener(new ListSelectionListener() {

        @Override
        public void valueChanged(ListSelectionEvent e) {
            if (e.getValueIsAdjusting() == false) {
                if (list.getSelectedIndex() == -1) {
                    jbRemove.setEnabled(false);
                } else {
                    jbRemove.setEnabled(true);
                }
            }
        }
    });

    jbAdd.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
            String name = JOptionPane.showInputDialog(JListDemo.this, "Enter name for list:", "", JOptionPane.PLAIN_MESSAGE); 
            listModel.addElement(name);                        
        }
    });

    jbRemove.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {

        }
    });
}

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {

        @Override
        public void run() {
            createAndShowGUI();
        }
    });
} 
```

`JList`当 GUI 出现时，我只在组件处看到一条直线。如果我注释掉方法`setLayoutOrientation(JList.VERTICAL_WRAP)`，那么我可以看到`JList`有 6 个空行可见的组件。为什么会这样？（注：`JList`为空）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T06:50:30.927

问题在于列表本身的布局。如果布局方向是水平的，则首选的可滚动视口大小对应于首选大小。对于垂直方向，实际上计算方式不同（假设固定单元大小乘以实际列表大小或默认值）。

因此，您可以覆盖`getPreferredSize`或`getPreferredScrollableViewportSize`对应您选择的尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T06:47:07.223

您忘记为 JList 指定首选大小，因此当您调用 时`JFrame.pack`，它最终会破坏 JList：

```
private void init() {
  listModel = new DefaultListModel();
  list = new JList(listModel);
  list.setVisibleRowCount(6);
  list.setLayoutOrientation(JList.VERTICAL_WRAP);
  list.setPreferredSize(new Dimension(300, 400)); <---- set preferred size
  //etc.
} 
```

# android - 不寻常的android getString和equals行为

> ID：12124205
> 
> 赞同：0
> 
> 时间：2012-08-25T17:33:56.083
> 
> 标签：android, equals, getstring

我正在使用具有 4 列（_id、名称、分数、状态）的数据库，并使用以下内容将所有行导入到 arrayList 中。

```
 Cursor assessmentStatus = myDbHelper.getAllTests();

      assessmentStatus.moveToFirst();

      while (!assessmentStatus.isAfterLast()) {

          allAssessments.add(assessmentStatus.getString(1));

          if(assessmentStatus.getString(3).equals("locked")) { lockedAssessments.add(assessmentStatus.getString(1)); }

          assessmentStatus.moveToNext();
      }

      assessmentStatus.close(); 
```

第一条语句 (allAssessments.add...) 工作正常。如果我使用 getString(0).equals 或 getString(1).equals，if 语句有效，但如果我使用 getString 3 或 4 则无效 - 应用程序崩溃。如果我使用 getColumnIndex("status").equals 它也不起作用

已尝试清理项目，但无法弄清楚这种行为。任何想法为什么会这样？！

**更新：**

1）getAllTests如下（也试过rawQuery SELECT * FROM ...等

```
 public Cursor getAllTests() 
{
    return myDataBase.query("assessment_tests", new String[] {"_id", "name", "scores", "status"}, null, null, null, null, null);
} 
```

2) 所有字段都是文本字段。卸载，清理项目并重新安装没有效果。

3）打开数据库：

```
 DataBaseHelper myDbHelper = new DataBaseHelper(null);
      myDbHelper = new DataBaseHelper(this);

      try {
        myDbHelper.openDataBase();
      }catch(SQLException sqle){
        throw sqle;
      } 
```

我知道数据库创建工作正常，因为我有其他工作正常的表......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T17:38:07.207

验证数据库字段是否为文本类型。如果是这种情况，请从设备上卸载应用程序并再次运行以强制更新数据库。如果您的设备是 root，您可以尝试提取数据库。数据库是（如果`default`）`/data/data/com.yourapp.name/databases/dbname` 你可以使用`"adb pull /data/data/com.yourapp.name/databases/dbname"`

# javascript - jQuery keyup 事件增加-"function" 将设置为 0

> ID：12124212
> 
> 赞同：4
> 
> 时间：2012-08-25T17:34:56.790
> 
> 标签：javascript, jquery, json, count, keyup

我有三个输入字段来“搜索”一个 JSON 树。如果所有三个字段均已填写且正确，则从下一个 JSON 级别获取数据。

我通过 keyup-event 计算一个数字以获取 JSON 树的下一个数据。但是每次所有三个字段都填满时，计数器将重置。

**HTML**

```
<h1>sein</h1>
<form>
    <input type="text" id=simple_present placeholder="simple present">
    <input type="text" id=simple_past placeholder="simple past">
    <input type="text" id=past_participle placeholder="past participle">
</form>
<div class="answer">Enter: be - was - been</div> 
```

**JS**

```
$('input').on('keyup', function() {
    var count = 0;

    if (this.value === json.verbs.irregular[count++][this.id]) {
        $(this).prop('disabled', true).next().focus();
    }

    if ($('input:not(:disabled)').length === 0) {
        $('input').val('').prop('disabled', false).first().focus();
        $('h1').text(json.verbs.irregular[count++].infinitiv);
        alert(count);
    }
}); 
```

也许变量会在每个关键事件上设置为 0？但我不能将它设置在`keyup`-event 之外！

这是我到目前为止所做的[演示。](http://jsfiddle.net/ARTsinn/NnAMu/4/)

只需输入：

1.  是
2.  曾是
3.  到过

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T18:00:13.677

你可以试试这个

```
var count = 0, amount = json.verbs.irregular.length-1, current = 0,
inputs = $("#simple_present, #simple_past, #past_participle");

$(inputs).on('keyup', function() {
    if (this.value === json.verbs.irregular[count][this.id]) {
        $(this).prop('disabled', true).next().focus();
    }

    if ($('input:not(:disabled)').length === 0) {
        $('input').val('').prop('disabled', false).first().focus();
        if(current < amount) { 
            current++; count++; 
        }
        else {
            current=0; count=0; 
        }
        $('h1').text(json.verbs.irregular[current].infinitiv);
    }
});​ 
```

[**演示**](http://jsfiddle.net/NnAMu/16/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T18:06:41.983

有一些工作：

[http://jsfiddle.net/fantactuka/56VBk/](http://jsfiddle.net/fantactuka/56VBk/)

# java - 休眠不使用 Sql Server 2008

> ID：12124222
> 
> 赞同：1
> 
> 时间：2012-08-25T17:36:28.360
> 
> 标签：java, hibernate

我是休眠菜鸟。我最近开始学习 Hibernate。我正在学习教程......但我现在迷路了。我一直在努力解决这个问题...

**休眠.cfg.xml**

```
<?xml version="1.0"?>

<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN" 
"http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd" 
>

<hibernate-configuration>

    <session-factory>

        <property name="hibernate.dialect" >
org.hibernate.dialect.SQLServer2008Dialect
        </property>

        <property name="hibernate.connection.driver_class" >
com.microsoft.sqlserver.jdbc.SQLServerDriver
        </property>

        <property name="hibernate.connection.username" >
not required
        </property>

        <property name="hibernate.connection.password" />
        <property name="hibernate.connection.url" >
jdbc:sqlserver://localhost;databaseName=hibernate;integratedSecurity=false;
        </property>

        <property name="hibernate.cache.use_query_cache" >
true
        </property>

        <property name="hibernate.cache.region_prefix" >
hibernate.test
        </property>

        <property name="hibernate.jdbc.use_streams_for_binary" >
true
        </property>

        <property name="hibernate.jdbc.batch_size" >
0
        </property>

        <property name="hibernate.max_fetch_depth" >
3
        </property>

        <property name="hibernate.hbm2ddl.auto" >
create-drop
        </property>

        <property name="hibernate.generate_statistics" >
true
        </property>

        <property name="hibernate.cache.region.factory_class" >
org.hibernate.testing.cache.CachingRegionFactory
        </property>

        <mapping class="com.hibernate.dto.UserDetails" />

        <class-cache
            class="org.hibernate.ejb.test.item"
            usage="read-write" />

        <collection-cache
            collection="org.hibernate.ejb.test.Item.distributors"
            region="RegionName"
            usage="read-write" />

        <event type="pre-insert" />
    </session-factory>

</hibernate-configuration> 
```

**使用细节.java**

```
package com.hibernate.dto;

import javax.persistence.Entity;
import javax.persistence.Id;

@Entity
public class UserDetails {

@Id
    private int userId;
    private String userName;

    public int getUserId() {
        return userId;
    }
    public void setUserId(int userId) {
        this.userId = userId;
    }
    public String getUserName() {
        return userName;
    }
    public void setUserName(String userName) {
        this.userName = userName;
    }

} 
```

**hibernateTest.java**

```
package com.hibernate.dto;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;
import org.hibernate.service.ServiceRegistry;
import org.hibernate.service.ServiceRegistryBuilder;

public class HibernateTest {

    public static void main(String[] args) {

        UserDetails user = new UserDetails();

        user.setUserId(1);
        user.setUserName("ahmed");

        SessionFactory sessionfact = new Configuration().configure()
                .buildSessionFactory();

        Session session = sessionfact.openSession();
        session.beginTransaction();
        session.save(user);
        session.getTransaction().commit();
        session.close();

    }

} 
```

现在当我尝试运行它时。我每次都会收到以下错误...但我仍然不确定它指向什么？请帮我...

**错误日志**

```
Aug 25, 2012 10:27:40 PM org.hibernate.annotations.common.Version <clinit>
INFO: HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
Aug 25, 2012 10:27:40 PM org.hibernate.Version logVersion
INFO: HHH000412: Hibernate Core {4.1.6.Final}
Aug 25, 2012 10:27:40 PM org.hibernate.cfg.Environment <clinit>
INFO: HHH000206: hibernate.properties not found
Aug 25, 2012 10:27:40 PM org.hibernate.cfg.Environment buildBytecodeProvider
INFO: HHH000021: Bytecode provider name : javassist
Aug 25, 2012 10:27:40 PM org.hibernate.cfg.Configuration configure
INFO: HHH000043: Configuring from resource: /hibernate.cfg.xml
Aug 25, 2012 10:27:40 PM org.hibernate.cfg.Configuration getConfigurationInputStream
INFO: HHH000040: Configuration resource: /hibernate.cfg.xml
Aug 25, 2012 10:27:40 PM org.hibernate.cfg.Configuration doConfigure
INFO: HHH000041: Configured SessionFactory: null
Exception in thread "main" org.hibernate.MappingException: Cannot cache an unknown entity: org.hibernate.ejb
    at org.hibernate.cfg.Configuration.applyCacheConcurrencyStrategy(Configuration.java:2212)
    at org.hibernate.cfg.Configuration.secondPassCompile(Configuration.java:1368)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1733)
    at com.hibernate.dto.HibernateTest.main(HibernateTest.java:25) 
```

我查看了hibernate jar，但找不到`org.hibernate.ejb.test.item`

**更新**

现在我得到这些错误

```
Aug 25, 2012 11:51:06 PM org.hibernate.annotations.common.Version <clinit>
INFO: HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
Aug 25, 2012 11:51:06 PM org.hibernate.Version logVersion
INFO: HHH000412: Hibernate Core {4.1.6.Final}
Aug 25, 2012 11:51:06 PM org.hibernate.cfg.Environment <clinit>
INFO: HHH000206: hibernate.properties not found
Aug 25, 2012 11:51:06 PM org.hibernate.cfg.Environment buildBytecodeProvider
INFO: HHH000021: Bytecode provider name : javassist
Aug 25, 2012 11:51:06 PM org.hibernate.cfg.Configuration configure
INFO: HHH000043: Configuring from resource: /hibernate.cfg.xml
Aug 25, 2012 11:51:06 PM org.hibernate.cfg.Configuration getConfigurationInputStream
INFO: HHH000040: Configuration resource: /hibernate.cfg.xml
Aug 25, 2012 11:51:06 PM org.hibernate.cfg.Configuration doConfigure
INFO: HHH000041: Configured SessionFactory: null
Aug 25, 2012 11:51:06 PM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000402: Using Hibernate built-in connection pool (not for production use!)
Aug 25, 2012 11:51:07 PM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000115: Hibernate connection pool size: 20
Aug 25, 2012 11:51:07 PM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000006: Autocommit mode: false
Aug 25, 2012 11:51:07 PM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000401: using driver [com.microsoft.sqlserver.jdbc.SQLServerDriver] at URL [jdbc:sqlserver://localhost;databaseName=hibernate;integratedSecurity=false;]
Aug 25, 2012 11:51:07 PM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000046: Connection properties: {user=not required, password=****}
Aug 25, 2012 11:51:07 PM com.microsoft.sqlserver.jdbc.SQLServerConnection <init>
SEVERE: Java Runtime Environment (JRE) version 1.7 is not supported by this driver. Use the sqljdbc4.jar class library, which provides support for JDBC 4.0.
Aug 25, 2012 11:51:07 PM org.hibernate.dialect.Dialect <init>
INFO: HHH000400: Using dialect: org.hibernate.dialect.SQLServer2008Dialect
Aug 25, 2012 11:51:07 PM org.hibernate.engine.jdbc.internal.LobCreatorBuilder useContextualLobCreation
INFO: HHH000422: Disabling contextual LOB creation as connection was null
Aug 25, 2012 11:51:07 PM org.hibernate.engine.transaction.internal.TransactionFactoryInitiator initiateService
INFO: HHH000399: Using default transaction strategy (direct JDBC transactions)
Aug 25, 2012 11:51:07 PM org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory <init>
INFO: HHH000397: Using ASTQueryTranslatorFactory
Exception in thread "main" org.hibernate.HibernateException: could not instantiate RegionFactory [org.hibernate.testing.cache.CachingRegionFactory]
    at org.hibernate.cfg.SettingsFactory.createRegionFactory(SettingsFactory.java:410)
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:264)
    at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2279)
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2275)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1744)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1784)
    at com.hibernate.dto.HibernateTest.main(HibernateTest.java:21)
Caused by: org.hibernate.service.classloading.spi.ClassLoadingException: Unable to load class [org.hibernate.testing.cache.CachingRegionFactory]
    at org.hibernate.service.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:141)
    at org.hibernate.cfg.SettingsFactory.createRegionFactory(SettingsFactory.java:393)
    ... 6 more
Caused by: java.lang.ClassNotFoundException: Could not load requested class : org.hibernate.testing.cache.CachingRegionFactory
    at org.hibernate.service.classloading.internal.ClassLoaderServiceImpl$1.findClass(ClassLoaderServiceImpl.java:99)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at org.hibernate.service.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:138)
    ... 7 more 
```

我也跟着加`@Table (name = "hibernate")`了`@Entity`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T17:47:48.587

我怀疑缺少的课程是您正在学习的教程的一部分。为简单起见，请在 XML 配置中注释掉 class-cache 和 collection-cache 元素，并将 use_query_cache 属性设置为 false。还要注释掉与缓存相关的任何其他属性。

给定更新的错误日志，从 XML 配置中删除 hibernate.cache.region.factory_ 类属性。就像我之前说的，让你的代码在没有缓存配置的情况下工作。

# php - 如何将变量传递给 id 变量

> ID：12124226
> 
> 赞同：2
> 
> 时间：2012-08-25T17:37:14.903
> 
> 标签：php, codeigniter

好的，我的 Codeigniter 控制器中有这个：

```
public function post($id) {
$data['query'] = $this->blog_model->get_post($id);
$data['comments'] = $this->blog_model->get_post_comment($id);
$data['post_id']=$id;
$data['total_comments'] = $this->blog_model->total_comments($id);
$this->load->helper('form');
$this->load->library(array('form_validation','session'));
//validation rules for post function

$this->form_validation->set_rules('commenter','Name','required');
$this->form_validation->set_rules('email','Your email','required'|'valid_email');
$this->form_validation->set_rules('comment','Comment','required');

if($this->blog_model->get_post($id))
{
foreach($this->blog_model->get_post($id) as $row)
{
//set page title
$data['title'] = $row->entry_name;
}
if($this->form_validation->run() == FALSE)
{
//if validation runs FALSE
$this->load->view('blog/post',$data);
}
else
{
//if valid
        $name = $this->input->post('comment_name');
        $email = strtolower($this->input->post('comment_email'));
        $comment = $this->input->post('comment_body');
        $post_id = $this->input->post('entry_id');

        $this->blog_model->add_new_comment($post_id,$name,$email,$comment);
        $this->session->set_flashdata('message', '1 new comment added!');
        redirect('post/'.$id);
 }
 }
 else
 show_404();
 } 
```

在我的帖子视图中，我有这个：

```
echo form_open('blog/post'.$id); 
```

我想将`$id`我在 URL 中输入的变量传递给评论表单的帖子视图。如何将`$id`变量传递给视图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T20:00:20.400

您在数据数组中传递**id ，这里：**

```
$data['post_id']=$id; 
```

在您看来，而`$id`不仅仅是使用`$post_id`：

```
echo form_open('blog/post'.$post_id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T17:43:27.843

```
$this->load->view('your post view',array('id'=>$the_id_here)) 
```

然后在您的视图中，使用 $id 变量。

# iphone - 强力物体被释放

> ID：12124227
> 
> 赞同：-1
> 
> 时间：2012-08-25T17:37:50.163
> 
> 标签：iphone, xcode, delegates, uitabbarcontroller, automatic-ref-counting

我有一个奇怪的问题，我试图将自定义 UIView 对象设置为具有一个委托，该委托是一个自定义选项卡栏控制器。选项卡栏控制器被设置为代表，我很肯定它不是零，而且它实际上已设置！但是稍后当自定义 UIView 执行其任务时，委托为零。

我正在使用 ARC，并且我确保该对象很强大，即使有问题的标签栏位于 UINavBar 内，所以它不应该被释放......

我开始认为 UITabBar 不可能真正被释放，因为它显然仍然存在......我也很确定我正在以适当的方式将它设置为委托。

我将委托设置在 UITabViewController 持有的 ViewController 之一的 ViewDidLoad 中。这是我设置委托的方式：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    customSearchBar.delegate = (id<SearchResultReceiver>)self.tabBarController;
    //customSearchBar.delegate IS SET, btw tabBarController implements SearchResultReceiver
    ...
} 
```

正如我所说，id 委托具有属性（强的、非原子的），即使我不认为它必须是强的。似乎它应该很弱，因为 TabBarController 已经由 NavigationBarController 在其他地方拥有，但当我看到这个问题时，我仍然希望安全。

这是委托为 nil 的代码，现在我们在 CustomSearchBar.m 中不确定它是否重要，当然您已经猜到了，但是... CustomSearchBar.m 是一个 UITextFieldDelegate。

以下代码由处理 url 请求并将传入/传出 json 转换为字典的 Communicator 对象调用，它工作正常。假设以下内容由 -(void)connectionDidFinishLoading:(NSURLConnection *)connection 调用...

```
-(void)receiveData:(NSDictionary *)dict forMode:(int)mode
{
    [self.delegate receiveSearchResult:dict];
    [spinner stopAnimating];
    [searchConnection cancel];
} 
```

现在代表为零。我在代码中的其他任何地方都没有要求 customSearchBar 的委托。

附加信息：

CustomSearchBar 扩展 UIView 并且是拥有它的 ViewController 的 IBOutlet。该 ViewController 归我试图设置为委托的 TabBarController 所有。

感谢您的宝贵时间，如果我可以提供更多详细信息，请告诉我。不知道为什么会出现问题会导致表现不佳:'( 抱歉！

以下是有关委托合成的更多信息...

```
#import <UIKit/UIKit.h>
#import "Communicator.h"

@protocol SearchResultReceiver <NSObject>

@optional
-(void) receiveSearchResult:(NSDictionary *) dict;

@end

@interface CustomSearchBar : UIView <UITextFieldDelegate, DataReceiver>
{
    __strong id <SearchResultReceiver> delegate;
}

@property (strong, nonatomic) id<SearchResultReceiver> delegate;
... 
```

并在 .mi 中做 @synthesize 委托；简单地

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T23:57:54.200

我已经想通了！

这是一个令人沮丧的问题，但我不小心将两个 UIViews 放入了 CustomSearchBars，我将委托设置在其中一个中，而另一个是活动的：它仍然未设置。

我觉得很愚蠢。

# c++ - 弧度和度数的角度等级

> ID：12124228
> 
> 赞同：6
> 
> 时间：2012-08-25T17:37:53.213
> 
> 标签：c++, math, trigonometry

我想做一个角度类，以弧度或度数进行初始化，但我不知道这是否是个好主意。我正在考虑这样的事情：

## ![类图](../Images/691ca9d1810b606f16577bddd392fc46.png)

```
class Radian;
class Degree;

/**
  * My angle class.
  **/
class Angle
{
    private:
        float m_radian;

    public:
        explicit Angle(const Radian& rad);

        explicit Angle(const Degree& deg);

        float GetRadian(void) const
        {
            return this->m_radian;
        }

        float GetDegree(void) const
        {
            return ToDegree(this->m_radian);
        }

        bool IsEqual(const Angle& angle, float epsilon = 0.001f) const
        {
            return Abs<float>(this->m_radian - angle.m_radian) < epsilon;
        }

        void Set(const Angle& ang);

    protected:
        Angle(void) : m_radian(0.0f)
        {}

        Angle(float rad) : m_radian(rad)
        {}
};

class Radian : public Angle
{
    public:
        Radian(void)
        {}

        Radian(float r) : Angle(r)
        {}
};

class Degree : public Angle
{
    public:
        Degree(void)
        {}

        Degree(float d) : Angle(ToRadian(d))
        {}
};

/// Trigonometric functions.
float Sin(const Angle& angle);
... 
```

这样我就不会在我的代码中混淆弧度和度数。但是，这是一个好主意还是我应该使用其他设计？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-25T18:40:20.820

你在这里根本不需要任何继承。一旦构建了对象，您就不再关心差异 - 它们的行为完全相同。所以你必须解决的唯一问题是如何以可读的方式*构造* `Angle`对象。

通常的解决方案是使用[命名构造函数](http://www.parashift.com/c++-faq-lite/named-ctor-idiom.html)：

```
class Angle
{
    public:
        static Angle fromRadians( float v );
        static Angle fromDegrees( float v );
        // ...

    private:
        Angle( float rad );
        // ...
}; 
```

您无需直接调用构造函数，而是提供具有表达性名称的工厂函数。所以你写：

```
void f( Angle::fromDegrees( 3.0 ), Angle::fromRadians( 17.0 ) ); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-25T18:23:04.383

我认为这里不需要继承。就使用你的课程而言，重要的是你得到一个*角度*- 无论是从度数还是弧度开始都无关紧要。

免责声明：我以前做过。完全相同的用例。我的解决方案是让构造函数接受两个参数：一个数字和一个单位枚举。我会像这样使用我的课程：

```
Angle a(1.2345, Angle::Radians);
std::cout << a.radians() << a.degrees() << sin(a); 
```

如果您想要方便的方法从公共单位创建角度，它们可能就是：辅助方法。不需要单独的课程。

```
Angle r = Radians(2.3);
Angle d = Degrees(180); 
```

无论如何 - 正是我过去一直很高兴使用的东西。希望能帮助到你！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-25T18:31:09.357

我建议这样做：

```
class Radians {
    explicit Radians(float a) : angle_(a) {}
    Radians(Degrees a)        : angle_(a * PI/180.f) {}
    operator float()          { return angle_; }
private:
    float angle_;
}

class Degrees {
    explicit Degrees(float a) : angle_(a) {}
    Degrees(Radians a)        : angle_(a * 180.f/PI) {}
    operator float()          { return angle_; }
private:
    float angle_;
} 
```

这迫使函数的自然单元成为其接口的一部分，我认为这是一件好事。你永远不应该编写一个`Sin`函数来检查它给出了什么样的角度，并进行不同的计算。要么编写两个版本，然后让编译器完成工作：

```
float Sin(Radians x);
float Sin(Degrees x); 
```

或者你只写一个（使用实现需要的任何类型——可能是弧度）：

```
float Sin(Radians x); 
```

关键不是你可以有一个“抽象”的角度（我不认为这是一个有用的概念），关键是要避免将度数与弧度混淆，并使两者之间的转换隐含。

拥有抽象基`Angle`类会增加语法噪音（您需要在任何地方使用引用）并且可能会降低性能。此解决方案还允许您将角度存储在所需的单位中，而不是希望获得“快速路径”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T18:20:39.200

对于相同的内角值，我会将角度用作对象，将度数和弧度用作不同的吸气剂设置器。

# jpql - JPQL order by expression 子句：ORDER BY (x = y) ASC

> ID：12124231
> 
> 赞同：0
> 
> 时间：2012-08-25T17:38:18.533
> 
> 标签：jpql

我正在尝试通过相等表达式对查询结果进行排序，例如

```
 ORDER BY (x = y) ASC 
```

但我不断得到意想不到的令牌`=`。我什至尝试过像

```
 ORDER BY COUNT(x = y) ASC 
```

但也没有成功：`expecting CLOSE, found '='`

有没有办法通过 JPQL 实现这一目标？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T19:48:12.653

不，它不适用于 JPQL。这是不可能的，因为

1.  `x=y`不可订购
2.  `x=y`不是 SELECT 子句的一部分。

在 JPA 2.0 规范中，这是用以下词语来说明的：

```
An orderby_item must be one of the following:

1\. A state_field_path_expression that evaluates to an orderable state field 
   of an entity or embeddable class abstract schema type designated in the 
   SELECT clause by one of the following:
     • a general_identification_variable
     • a single_valued_object_path_expression

2\. A state_field_path_expression that evaluates to the same state field of 
   the same entity or embeddable abstract schema type as a      
   state_field_path_expression in the SELECT clause

3\. A result_variable that refers to an orderable item in the SELECT clause 
   for which the same result_variable has been specified. This may be the 
   result of an aggregate_expression, a scalar_expression, or a 
   state_field_path_expression in the SELECT clause. 
```

您可以尝试在 SELECT 子句中使用 CASE 来构造数字属性并在 ORDER BY 中使用它。

# ios - iOS sqlite没有这样的功能：ACOS错误

> ID：12124233
> 
> 赞同：2
> 
> 时间：2012-08-25T17:38:36.557
> 
> 标签：ios, sqlite

> **可能重复：**
> [查询以获取基于 SQLite 中的半径的记录？](https://stackoverflow.com/questions/3126830/query-to-get-records-based-on-radius-in-sqlite)

我正在使用 sqlite 在我的应用程序中保存纬度、经度和视频路径。通过在查询中传递当前的纬度和经度作为参数。我需要根据
接近度对视频路径进行排序。我正在使用以下查询来实现此**SELECT `videopath`， ( 3959 * ACOS( COS( RADIANS( 12.9833 ) ) * COS( RADIANS( lat ) ) * COS( RADIANS( lng ) - RADIANS( 77.5833 ) ) + SIN( RADIANS( 12.9833) ) ) * SIN( RADIANS( lat ) ) ) ) 作为从 VideoPathsTable 的距离按距离 ASC 限制 0、30 排序**。在 sql 中，此查询执行良好，但在 sqlite 中，我收到以下错误**no such function：ACOS**是否有其他替代方法可以执行此操作。请帮我解决这个问题。我正在使用 libsqlite3.0.dylib

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T20:44:31.507

看起来这不是标准 SQLite 的一部分：[Query to get records based on Radius in SQLite?](https://stackoverflow.com/questions/3126830/query-to-get-records-based-on-radius-in-sqlite)

之前检查 SO :-)

# html - 根据模板值在选择列表中设置所选项目

> ID：12124234
> 
> 赞同：13
> 
> 时间：2012-08-25T17:38:45.053
> 
> 标签：html, meteor, handlebars.js

如何使用模板中的当前值正确地预填充选择控件？

我有一个简单的表单来编辑一条记录，其中在显示表单时预先填充了所选记录的值。有点像这样：

```
<input type="text" id="project_name_edit" value="{{selected_name}}"> 
```

但是在我使用选择控件的地方，我需要能够查询模板值并有条件地`selected='selected'`为正确的选项设置属性。

```
<select id="project_status_edit" value="{{selected_status}}">
      <option>GOOD</option>
      <option>BAD</option>
      <option>UGLY</option>
</select> 
```

handlebars.js 提供了 #IF 帮助器，但这只会给出真假。

我可能会以各种方式破解它，但这似乎是一个有标准解决方案的场景。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-25T18:32:12.563

您可以使用助手：

```
Handlebars.registerHelper('selected', function(foo, bar) {
  return foo == bar ? ' selected' : '';
}); 
```

然后你可以打电话给：

```
<select id="project_status_edit">
  <option{{selected foo "GOOD"}}>GOOD</option>
  <option{{selected foo "BAD"}}>BAD</option>
  <option{{selected foo "UGLY"}}>UGLY</option>
</select> 
```

使用：

```
{"foo":"UGLY"} 
```

在这里试试：

[http://tryhandlebarsjs.com/](http://tryhandlebarsjs.com/)

虽然它似乎没有让我保存它。`:(`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-03-15T15:08:59.893

所选答案不再起作用。这是一个老问题，但我很难弄清楚这个简单的事情。这是我的解决方案：

```
Handlebars.registerHelper('selected', function(key, value){
       return key == value? {selected:'selected'}: '';
}); 
```

在当前版本的流星中，我们不能设置没有值的 HTML 属性，流星也不允许使用 {{#if}}。但是传递给助手的对象被转换成键=值对并注入。

**更新**

由于 Handlebars 命名空间已被贬低（[https://github.com/meteor/meteor/wiki/Using-Blaze#handlebars-namespace-deprecated](https://github.com/meteor/meteor/wiki/Using-Blaze#handlebars-namespace-deprecated) ），因此在新（> 0.8）版本的流星中使用`UI.registerHelper`而不是。`Handlebars.registerHelper`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-02T14:27:59.797

我在我的项目中使用了以下内容（以防有人需要它:)

```
 <select class="form-control" id="maritalStatusList" >
      <option {{selectedMaritalStatus  "Single"}}> Single</option>
      <option {{selectedMaritalStatus  "Married"}}> Married</option>
  </select> 
```

和

```
Template.editApplicant.helpers({
   selectedMaritalStatus: function(key){
      return key == this.maritalStatus ? 'selected' : '';
   }
}); 
```

“this.maritalStatus”从当前文档（申请人）中获取婚姻状况。

使用以下代码，将值保存在数据库中

```
maritalStatus: $('#maritalStatusList').val() 
```

谢谢大家。。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-13T13:25:54.257

我遇到了几乎相同的问题，但是我传递的值是数字，我相信对于这种特定情况我有一个更清晰的解决方案，即不依赖于 Handlebars 的魔法。

在模板中：

```
<select name="button-style" id="button-style" _val="{{button_style}}">
    <option value="1">Primary Style</option>
    <option value="2">Secondary Style</option>
</select> 
```

你基本上传递了你想用_val选择的属性的数量。这仅在每个选项具有连续数值的情况下才有用。另请注意，如果您将此属性命名为“值”，则默认情况下它将被覆盖/忽略，这将选择第一个选项。

现在在 JS 文件中的 .rendered 回调中：

```
Template.templateName.rendered = () ->
    var btn_style = $('#button-style').attr('_val')
    $('#button-style option:nth-child(' + btn_style + ')').attr('selected', 'selected') 
```

这只是在此选择字段中选择与我们想要的值相对应的“第 n 个”选项。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-27T14:07:17.920

我做了这个功能。适应您的情况

```
selectedOption=function(){
        selectedOpt=document.getElementById("yourTagId_Select");
        var att = document.createAttribute("selected");
        att.value = "selected";
        idObj=Session.get("idObj");
        var lib = yourCollection.find({'column._id':idObj}).fetch();      
        for (var i = 0; i < selectedOpt.length; i++) {
             if (selectedOpt[i].value==lib._id._str){               
                return selectedOpt[i].setAttributeNode(att);
            }
        };

    } 
```

调用你的函数后

选择选项（）；

# php - 无法拆分从网页解析的字符串？

> ID：12124238
> 
> 赞同：0
> 
> 时间：2012-08-25T17:39:24.310
> 
> 标签：php, html, parsing, html-parsing, string-split

在这里，我正在解析一个网页并从该网页获取“名称”字段。这是进行解析的代码：

```
foreach($dom->getElementsByTagName('table') as $table) {
    if($table->getAttribute('class')=='dataTable'){
        foreach($table->getElementsByTagName('tr') as $tr){
            if(isset($tr->getElementsByTagName('td')->item(0)->nodeValue)){
                $out[$i]['name'] = $tr->getElementsByTagName('td')->item(0)->nodeValue;
            }
        }
    }
} 
```

在我正在解析的网页中，我有`name`“Mark Smith”形式的节点值。因此，当我得到结果时，IDE 中的“name”值为“Mark Smith”，命令提示符中的值为“Mark┬áSmith”。

现在我想以这样的方式拆分'name'字符串，以便分别获得firstname('Mark')和lastname('smith')。

我试过：

```
explode("┬á", $out[$i]['name']) as well as
explode(" " , $out[$i]['name']) 
```

但似乎没有什么对我有用。帮我将字符串拆分为名字和姓氏？

希望我对我的问题很清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-01T13:52:16.417

尝试修复   问题：

`explode(chr(0xC2).chr(0xA0), $str)`

> 不间断空格存在于两个字节的 UTF-8 中：0xC2 和 0xA0。

Ref - [PHP 解析问题 -   和](https://stackoverflow.com/questions/4515117/php-parsing-problem-nbsp-and-%C3%82)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T17:45:06.147

您在那里的不间断空格字符实体已损坏。应该是`&nbsp;`。注意分号。

要回答您的问题，您可以简单地执行以下操作：

```
var_dump(explode('&nbsp', $out[$i]['name'])); 
```

或者如果实体是固定的：

```
var_dump(explode('&nbsp;', $out[$i]['name'])); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T17:58:36.020

这应该这样做

```
<?php

$a = preg_split( "/[\s]|[&nbsp;]|[┬á]/", $out[$i]['name'] ); //$a is an array with keys: Mark, Smith 
```

`explode()`只允许一个分隔符分割字符串/数组，而`preg_split()`用于多种分隔符

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T18:18:04.130

@user1518659 在这里试试这个，要解决这个问题，只需`&nbsp;`在传递给 DOMDocument 之前用空格替换，我还添加了 firstname last name 的拆分:) 希望它有所帮助。

```
<?php 
header('Content-Type: text/html; charset=utf-8'); //Required if your outputting, as the description contains utf-8 characters
//Load the source (input)
$html_source = file_get_contents('http://www.reuters.com/finance/stocks/companyOfficers?symbol=AOS');
$html_source = str_replace('&nbsp;',' ',$html_source);

//Dom document
$dom = new DOMDocument('1.0');
@$dom->loadHTML($html_source);

$out =array();
$i=0;
foreach($dom->getElementsByTagName('table') as $table) {
    if($table->getAttribute('class')=='dataTable'){

        foreach($table->getElementsByTagName('tr') as $tr){
            if(isset($tr->getElementsByTagName('td')->item(0)->nodeValue)){

                $out[$i]['fullname'] = $tr->getElementsByTagName('td')->item(0)->nodeValue;

                $name = explode(' ',$out[$i]['fullname']);
                $out[$i]['first_name'] = $name[0];
                $out[$i]['last_name'] = $name[1];

                if(!isset($tr->getElementsByTagName('td')->item(2)->nodeValue)){

                    foreach ($out as $key=>$value){
                        if($value['fullname'] == $tr->getElementsByTagName('td')->item(0)->nodeValue &&
                        !is_numeric(substr($tr->getElementsByTagName('td')->item(1)->nodeValue,0,1)) && 
                        $tr->getElementsByTagName('td')->item(1)->nodeValue != "--" ){
                            $out[$key]['description']= $tr->getElementsByTagName('td')->item(1)->nodeValue;
                        }
                    }

                }else{
                    if(!isset($tr->getElementsByTagName('td')->item(2)->nodeValue)){continue;}
                    if(isset($tr->getElementsByTagName('td')->item(3)->nodeValue)){
                        $out[$i]['age']= $tr->getElementsByTagName('td')->item(1)->nodeValue;
                        $out[$i]['since']= $tr->getElementsByTagName('td')->item(2)->nodeValue;
                        $out[$i]['position']= $tr->getElementsByTagName('td')->item(3)->nodeValue;
                    }
                }
                $i++;
            }
        }
    }
}

//Clean up
$return = array();
foreach ($out as $key=>$row){
    if(isset($row['fullname']) && isset($row['age']) && isset($row['since']) && isset($row['position']) && isset($row['description'])){
        $return[$key] = $out[$key];
    }
}

print_r($return);

/*
Array
(
    [0] => Array
        (
            [fullname] => Paul Jones
            [first_name] => Paul
            [last_name] => Jones
            [age] => 63
            [since] => 2011
            [position] => Chairman of the Board, Chief Executive Officer
            [description] => Mr. Paul W. Jones serves as the Chairman of the Board, Chief Executive Officer of A. O. Smith Corp. He has been a director of company since 2004\. He is a member of the Investment Policy Committee of the Board. He was elected chairman of the board, president and chief executive officer effective December 31, 2005\. He was president and chief operating officer from 2004 to 2005\. Prior to joining the company, he was chairman and chief executive officer of U.S. Can Company, Inc. from 1998 to 2002\. He previously was president and chief executive officer of Greenfield Industries, Inc. from 1993 to 1998 and president from 1989 to 1992\. Mr. Jones has been a director of Federal Signal Corporation since 1998, where he chairs the Nominating and Governance Committee and is a member of the Compensation and Benefits Committee and the Executive Committee, and Integrys Energy Group, Inc. since 2011, where he is a member of the Compensation and Financial Committees. He was also a director of Bucyrus International, Inc. from 2006 until its acquisition by Caterpillar, Inc. in 2011, and chaired the Compensation Committee.
        )

    [1] => Array
        (
            [fullname] => Ajita Rajendra
            [first_name] => Ajita
            [last_name] => Rajendra
            [age] => 60
            [since] => 2011
            [position] => President, Chief Operating Officer, Director
            [description] => Mr. Ajita G. Rajendra serves as the President, Chief Operating Officer and Director of A. O. Smith Corp. He was elected a director of company in December 2011, based on the recommendation of the Nominating and Governance Committee, following his election as President and Chief Operating Officer in September 2011\. Mr. Rajendra joined the company as President of A. O. Smith Water Products Company in 2005, and was named Executive Vice President of the company in 2006\. Prior to joining the company, Mr. Rajendra was Senior Vice President at Kennametal, Inc., a manufacturer of cutting tools, from 1998 to 2004\. Mr. Rajendra also serves on the board of Donaldson Company, Inc., where he is a member of the Audit Committee and Human Resources Committee. Further, Mr. Rajendra was a director of Industrial Distribution Group, Inc. from 2007 until its acquisition by Eiger Holdco, LLC in 2008.
        )
        ...
        ...
*/
?> 
```

# multithreading - 多个线程的执行

> ID：12124239
> 
> 赞同：0
> 
> 时间：2012-08-25T17:39:36.283
> 
> 标签：multithreading, pthreads, execution

在进程执行期间，调用 fork() ids 时，会创建一个具有单独内存空间但内存内容相同的新进程。因此，由于这些是不同的进程，它们将具有不同的进程描述块，因此它们将根据调度算法给出的机会执行（PCB 将保存它们的程序计数器值）。

但是当一个进程典当另一个线程时，该线程共享它的地址空间。我的问题是关于线程的执行：- **线程是否给定了具有不同程序计数器**值的单独 PCB，并且调度算法调度了接下来将执行哪个线程。**如果是**，**那么**线程如何在分配给它的函数完成执行后立即停止执行。**这是因为**该函数是子线程堆栈上唯一的函数，并且当它返回时没有其他函数可以使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:43:24.510

Typically, the scheduler/dispatcher handles threads. Threads are the system objects that have execution and the Thread Control Blocks, (or whatever it's called on whatever OS), will have their own stack, register save, (especially stack pointer, ie where the PC is pushed upon interrupt), thread priority, other thread-specific data and a PCB pointer to the process it belongs to. The PCB has memory management data, access-control data, permissions etc, ie. data specific to a process. Processes do not have any execution except insofar as every process must own at least one thread, (usually, but not exclusively, the one raised by the loader when the process was created).

If the thread code exits by returning from the top-level function that was used in its creation, (by no means the most common means for a thread to be terminated), it will pop off a return address that was placed on its stack at creation time and so make a 'TerminateThread', (or whatever), system call, resulting it its own suicide.

Obviously, a very broad overview of a 'typical' OS. Details are OS dependent, (and, indeed, vary with releases).

# .htaccess - htaccess 将对静态文件的请求重定向到特定目录或从请求中删除 url 部分

> ID：12124247
> 
> 赞同：0
> 
> 时间：2012-08-25T17:41:38.770
> 
> 标签：.htaccess

我正在开发一个通过 index.php 路由所有请求的站点，但是我在包含图像、css 和 js 时遇到问题。

我的问题是：网站网址可能会有所不同，例如 www.mysite.com、www.mysite.com/news/、www.mysite.com/news/something。我通过 index.php 动态生成所有这些页面。我的 css 文件链接为 public/css/mycss.css。如果我的网址是 www.mysite.com 或 www.mysite.com/news/ 没问题，我的文件已加载，但网址是 www.mysite.com/news/something 显然我的文件在 news/public/ 中搜索css 目录，找不到。有没有一种好方法可以将对静态文件的所有请求重定向到公共目录。例子：

```
/news/public/css/mycss.css
/news/public/images/myimage/myimage.jpg
/news/public/images/myimage/flags/myflag.jpg 
```

到

```
public/css/mycss.css
public/images/myimage/myimage.jpg
public/images/myimage/flags/myflag.jpg 
```

可能有很多文件，并且公用文件夹内的目录结构可能会有所不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T17:48:18.427

您需要在页面标题中添加此内容：

```
<base href="/"> 
```

这样您的所有相对 URL 都会获得应用到它的当前 URI 基础。

# tinymce - 如何在 TinyMCE 中显示图像的 html 代码？

> ID：12124256
> 
> 赞同：0
> 
> 时间：2012-08-25T17:43:28.160
> 
> 标签：tinymce

有没有办法在 tinymce 的 WYSIWYG 模式下显示 html 代码（仅用于图像）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:16:36.210

是的，这是可能的，但不是开箱即用的。您将不得不为此包含这样的代码[编写一个 onw 插件](http://www.tinymce.com/wiki.php/Creating_a_plugin)

```
$(tinymce.activeEditor.getBody()).find('img').each(function(){
    var html = this.outerHTML;
}); 
```

# c# - 我可以恢复我的可混合性吗

> ID：12124258
> 
> 赞同：0
> 
> 时间：2012-08-25T17:43:39.373
> 
> 标签：c#, wpf, mvvm, design-time

我写了一个非常简单的 ViewModel Locator ：

```
public static readonly DependencyProperty LocateForProperty =
    DependencyProperty.RegisterAttached("LocateFor", 
    typeof (Object), 
    typeof (ViewModelLocator), 
    new PropertyMetadata(null, OnLocateForChanged));

public static object GetLocateFor(DependencyObject dependencyObject)
{
    return dependencyObject.GetValue(LocateForProperty);
}

public static void SetLocateFor(DependencyObject dependencyObject, Object value)
{
    dependencyObject.SetValue(LocateForProperty, value);
}

private static void OnLocateForChanged(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs eventArgs)
{
    if (dependencyObject != null)
    {
        var viewModelName = dependencyObject.GetType().AssemblyQualifiedName;
        if (! string.IsNullOrEmpty(viewModelName))
        {
            viewModelName = viewModelName.Replace("View", "ViewModel");
            var viewModel = DependencyLocator.GetInstance(Type.GetType(viewModelName));
            if (viewModel != null)
            {
                ((FrameworkElement) dependencyObject).DataContext = viewModel;
            }
        }
    }
} 
```

并像这样使用它：

```
<vm:ViewModelLocator.LocateFor>
    <Binding RelativeSource="{RelativeSource Self}" />
</vm:ViewModelLocator.LocateFor> 
```

它在运行时完美运行，但我丢失了设计时间位置。我怀疑这是因为我使用的是相对绑定，我尝试将其更改为`x:Static`但不起作用。是否有任何建议的更改可以让我恢复可混合性？

编辑：关于 D​​ependencyLocator，它是 Ninject 的静态包装器：

```
using System;
using System.Collections.Generic;

/// <summary>
/// Defines an object that wraps around specific DI containers.
/// </summary>
public static class DependencyLocator
{
    /// <summary>
    /// Gets or Sets the function used for locating a single instance of a specifc type.
    /// </summary>
    public static Func<Type, object> GetInstance;

    /// <summary>
    /// Gets or Sets the function used for locating all instance of a specific type.
    /// </summary>
    public static Func<Type, IEnumerable<object>> GetAllInstances;

    /// <summary>
    /// Gets the implementation of the provided service.
    /// </summary>
    public static T Get<T>()
    {
        return (T)GetInstance(typeof(T));
    }

    /// <summary>
    /// Gets all implementations of the provided service.
    /// </summary>
    public static IEnumerable<T> GetAll<T>()
    {
        return (IEnumerable<T>) GetAllInstances(typeof (T));
    }
} 
```

它被填充到 app.xaml 的 app_start 类中。出于设计时的目的，它是这样设计的，如果我使用 View 的 xaml 中定义的实例对象创建一个简单的视图模型定位器类，它确实从 DependencyLocator 获得了正确的值，只是因为我切换到了依赖属性，所以这个问题上来了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T19:50:27.157

此代码只是阐明您要实现的目标：

```
// Use this to trigger break into debugger when debugging another instance of Visual Studio in order to debug the behaviour at design time.
System.Diagnostics.Debugger.Break();

if (dependencyObject != null)
{
    var view = GetLocateFor( dependencyObject ); // or instead of this access the changed value through the eventargs

    var viewModelName = view.GetType().AssemblyQualifiedName;

    if (! string.IsNullOrEmpty(viewModelName))
    {
        viewModelName = viewModelName.Replace("View", "ViewModel");
        var viewModel = DependencyLocator.GetInstance(Type.GetType(viewModelName));
        if (viewModel != null)
        {
           ((FrameworkElement) view ).DataContext = viewModel;
        }
    }
} 
```

# javascript - Chrome 未加载最新版本的网络工作者脚本（运行缓存版本）

> ID：12124261
> 
> 赞同：10
> 
> 时间：2012-08-25T17:44:06.927
> 
> 标签：javascript, google-chrome, refresh, web-worker

如果我编辑我的 web worker 脚本并刷新页面，web worker 脚本是一个缓存版本。我有理由相信它不是我的网络服务器，因为我可以立即加载所有其他文件的最新副本，即使重新启动网络服务器也不能解决问题。~~如果我重新启动 chrome，它只会加载最新版本的 web worker 脚本，这是非常低效的，不用说！~~即使我重新启动 chrome，它也无法修复它。我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-17T08:09:48.417

在我的 Linux Chrome 上，我必须右键单击（或长按）重新加载按钮并选择“Empty Cache and Hard Reload”以获取最新版本

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-25T18:01:21.610

您的 Web 服务器确定给定 Web 资源的可缓存程度，并且浏览器尝试尊重这些设置，缓存 Web 服务器说可以缓存的资源，而不是缓存它说不应该缓存的东西。

如果你想改变它，你有以下选择：

1.  手动清除浏览器缓存
2.  暂时关闭浏览器缓存。
3.  临时更改 Web 服务器上的设置以指示浏览器不要缓存
4.  仅覆盖这个网页的缓存（某些浏览器中的 shift-F5）以强制重新加载新内容
5.  将查询参数添加到您每次希望它加载新版本时更改的 Web 工作者脚本的 URL。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-25T17:54:45.560

您是否尝试过努力刷新？Ctrl-R？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-11T09:59:21.910

添加`<script src="your_worker_path"></scripts>`到您的页头以强制缓存更新。
包括您的工作人员的代码，`if(typeof window == "undefined"){...}`以避免它在页面重新加载时开始

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-06T17:37:49.540

在您的`install`事件中，在调用`event.waitUntil`添加之前：

```
if (self.skipWaiting) { self.skipWaiting(); } 
```

[来源](https://github.com/jakearchibald/simple-serviceworker-tutorial#4-faster-updates)

此外，您可以遵循以下开发工作流程：

1.  配置您的服务器以将您的 Service Worker 脚本提供为不可缓存（缓存控制：无缓存）
2.  在您对服务工作者脚本进行更改后：
    1.  关闭所有指向您的 Web 应用程序的选项卡，但只有一个选项卡
    2.  点击 shift-reload 绕过服务人员，以确保剩余的选项卡不受服务人员的控制
    3.  点击重新加载，让更新版本的 Service Worker 控制页面。

[来源](https://www.chromium.org/blink/serviceworker/getting-started)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-11T08:05:29.820

您必须关闭所有打开此页面的选项卡。只打开一个 1 然后 Ctrl + Shift + R 刷新然后缓存就会被清除。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-23T09:13:20.580

我发现的作品是：

*   打开一个新选项卡，其中包含 SharedWorker 脚本的 URL，
    *   例如“ [https://example.com/javascripts/mySharedWorker.js](https://example.com/javascripts/mySharedWorker.js) ”
*   您应该会看到此选项卡包含脚本的缓存版本
*   如果您然后 Shift-Reload*该*选项卡，浏览器将被迫更新缓存文件

Chrome 在“shift-reload”上重新加载“资源”似乎是……变量。

* * *

我希望你找到了这个：[chrome://inspect/#workers](http://chrome://inspect/#workers)。您可以在此处终止工作人员

# c++ - C-String 与 C++Strings 的效率

> ID：12124263
> 
> 赞同：35
> 
> 时间：2012-08-25T17:44:29.020
> 
> 标签：c++, string

C++ Primer 说

> 对于大多数应用程序，除了更安全之外，使用库字符串而不是 C 样式的字符串也更有效

安全是了解的。为什么 C++ 字符串库更高效？毕竟，在这一切之下，字符串不是仍然表示为字符数组吗？

为了澄清，作者是在谈论程序员效率（理解）还是处理效率？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-25T18:07:31.343

C 字符串通常更快，因为它们不调用 malloc/new。但也有`std::string`更快的情况。函数`strlen()`是 O(N)，但是`std::string::size()`是 O(1)。

此外，当您搜索子字符串时，在 C 字符串中，您需要`'\0'`在每个循环中检查`std::string`- 您不需要。在幼稚的子字符串搜索算法中，这并不重要，因为`'\0'`您需要检查`i<s.size()`. 但是现代高性能子字符串搜索算法以多字节步骤遍历字符串。并且需要`'\0'`检查每个字节会减慢它们的速度。这就是 GLIBC`memmem`比`strstr`. 我对子字符串算法做[了很多基准测试。](http://volnitsky.com/project/str_search)

这不仅适用于子字符串搜索算法。对于以零结尾的字符串，许多其他字符串处理算法较慢。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-08-25T17:59:15.487

> 为什么 C++ 字符串库更高效？毕竟，在这一切之下，字符串不是仍然表示为字符数组吗？

因为如果不仔细编写，使用`char*`或`char[]`更有可能效率低下的代码。例如，你见过这样的*循环*：

```
char *get_data();

char const *s = get_data(); 

for(size_t i = 0 ; i < strlen(s) ; ++i) //Is it efficent loop? No.
{
   //do something
} 
```

那效率高吗？不。 的时间复杂度`strlen()`是`O(N)`，此外，在上面的代码中，它是在每次迭代中计算的。

现在你可能会说*“如果我`strlen()`只调用一次，我就可以让它变得高效”。*. 当然可以。*但是您必须自己*并且有*意识*地进行所有这些优化。如果你错过了什么，你就错过了 CPU 周期。但是有了`std::string`，许多这样的优化是由类本身完成的。所以你可以这样写：

```
std::string get_data();

std::string const & s = get_data(); //avoid copy if you don't need  it

for(size_t i = 0 ; i < s.size() ; ++i) //Is it efficent loop? Yes.
{
   //do something
} 
```

那效率高吗？是的。的时间复杂度`size()`为`O(1)`。无需手动优化，这通常会使代码看起来难看且难以阅读。与 相比，生成的代码`std::string`几乎总是整洁干净`char*`。

另请注意，`std::string`这不仅使您的代码在 CPU 周期方面有效，而且还提高了程序员的效率！

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-25T18:05:05.097

A`std::string`知道它的长度，这使得许多操作更快。

例如，给定：

```
const char* c1 = "Hello, world!";
const char* c2 = "Hello, world plus dog!";
std::string s1 = c1;
std::string s2 = c2; 
```

`strlen(c1)`比 慢`s1.length()`。对于比较，`strcmp(c1, c2)`必须比较几个字符以确定字符串不相等，但`s1 == s2`可以判断长度不一样并立即返回 false。

其他操作也受益于提前知道长度，例如`strcat(buf, c1)`必须在其中找到空终止符`buf`才能找到附加数据`s1 += s2`的位置，但已经知道长度`s1`并且可以立即将新字符附加到正确的位置。

在内存管理方面，`std::string`每次增长时都会分配额外的空间，这意味着未来的追加操作不需要重新分配。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-08-25T17:58:20.527

在*某些*情况下， a`std::string`可能会击败 a `char[]`。例如，C 风格的字符串通常没有明确的长度传递——相反，NUL 终止符隐式地定义了长度。

这意味着连续`strcat`s 到 a的循环`char[]`实际上正在执行 O(n²) 工作，因为每个循环都`strcat`必须处理整个字符串才能确定插入点。相比之下，a`std::string`连接到字符串末尾需要执行的唯一工作是复制新字符（并且可能重新分配存储空间——但为了公平比较，您必须事先知道最大大小和`reserve()`它） .

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-25T17:50:42.000

字符串是在自身内部包含字符数组及其大小和其他功能的对象。最好使用字符串库中的字符串，因为它们可以避免分配和释放内存，避免内存泄漏和其他指针危险。但是由于字符串是对象，所以它们在内存中占用了额外的空间。

Cstrings 只是字符数组。当您实时工作时应该使用它们；当您不完全了解您手头有多少内存空间时。如果您使用的是 cstrings，则必须注意内存分配，然后通过 strcpy 或逐个字符将数据复制到其中，然后在使用后解除分配等。所以如果你想避免一堆头痛，最好使用字符串库中的字符串。

字符串提高程序效率但降低处理效率（虽然不一定）。反之亦然与 cstrings

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-25T18:02:18.420

好吧，一个明显而简单的事情是，它们实际上如何更有效（关于运行时），它们将字符串的长度与数据一起存储（或者至少它们的`size`方法必须是 O(1)，这实际上是一样的） .

因此，每当您需要在 C 字符串中查找 NUL 字符（从而遍历整个字符串一次）时，您都可以在恒定时间内获得大小。这种情况经常发生，例如在复制或连接字符串并因此预先分配一个新字符串时，您需要知道其大小。

但我不知道这是否是作者的意思，或者它是否在实践中产生了巨大的差异，但这仍然是一个有效的观点。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-25T17:52:52.067

这是一个简短的观点。

首先，C++ 字符串是对象，所以在面向对象的语言中使用它们更加一致。

然后，标准库为字符串、迭代器等提供了许多有用的函数。所有这些东西都是您不必再次编码的东西，因此您可以获得时间，并且您确信这段代码（几乎）没有错误.

最后，C 字符串是指针，当您是新手时有点难以理解，并且它们带来了复杂性。由于在 C++ 中引用优先于指针，因此使用 std::string 而不是 C 字符串更有意义。

希望我有所帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-25T18:11:48.207

C 风格字符串的困难在于，除非知道它们包含在其中的数据结构，否则真的无法对它们做太多事情。例如，当使用“strcpy”时，必须知道目标缓冲区是可写的，并且有足够的空间来容纳源中第一个零字节之前的所有内容（当然，在太多的情况下，实际上并没有肯定知道...）。很少有库例程提供对按需分配空间的任何支持，我认为所有那些通过无条件分配来工作的库例程（所以如果一个缓冲区有一个 1000 字节的空间，并且想要复制一个 900 字节的字符串，代码使用这些方法将不得不放弃 1000 字节缓冲区，然后创建一个新的 900 字节缓冲区，即使简单地重用 1000 字节缓冲区可能更好）。

在许多情况下，使用面向对象的字符串类型不如使用标准 C 字符串高效，但要找出分配和重用事物的最佳方式。另一方面，为优化分配和重用字符串而编写的代码可能非常脆弱，对需求的微小更改可能需要对代码进行大量棘手的小调整——未能完美地调整代码可能会导致错误可能是明显而严重的，也可能是微妙的，但更严重。避免使用标准 C 字符串的代码脆弱的最实用方法是非常保守地设计它。记录最大输入数据大小，截断任何太大的内容，并为所有内容使用大缓冲区。可行，但效率不高。

By contrast, if one uses the object-oriented string types, the allocation patterns they use will likely not be optimal, but will likely be better than the 'allocate everything big' approach. They thus combine much of the run-time efficiency of the hand-optimized-code approach with safety that's better than the 'allocate everything big' approach.

# java - Android - 无法使用矩阵在坐标处绘制图像

> ID：12124264
> 
> 赞同：1
> 
> 时间：2012-08-25T17:44:36.270
> 
> 标签：java, android

好的，我有一个接受变量的方法：一个图像，int x，int y，float angle。

我正在使用画布，并且正在使用 a`Matrix transform = new Matrix();`在其中心旋转图像。但是，我希望在 和 的坐标处绘制`x`图像`y`。出于某种原因，我使用的所有不同方法都没有奏效。有时它会在 0,0 处绘制它，或者它甚至不会出现在屏幕上。

这是我的伪代码：

```
//pseudo-code: img_width, img_height
public void drawImage(Bitmap img, int x, int y, float angle)
{
    transform.setTranslate(x, y);
    transform.setRotate(angle, img_width/2, img_height/2);
    canvas.drawBitmap(img, transform, null);
} 
```

我已经让图像旋转，但我希望在指定的坐标处绘制图像：x，y。

我已经尝试交换所有变量 used `transform.preRotate`，并且基本上花了 1 个小时试图弄清楚为什么没有任何效果。我有很多其他图像被绘制到画布上，它们出现在它们应该出现的位置，但是当我想旋转时，它不会在指定的坐标处绘制。

我已经阅读了大约 5 个与此相关的 SO 问题和答案，但没有一个能满足我的需求。

我真的很需要一个答案和代码，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T17:56:47.213

也许你想写：

```
public void drawImage(Bitmap img, int x, int y, float angle)
{
  transform.setRotate(angle, img_width/2, img_height/2);
  transform.postTranslate(x, y);
  canvas.drawBitmap(img, transform, null);
} 
```

如果您在旋转之前翻译图像，图像将不会到达您期望的位置......

# php - 在 PHP 中使用布尔值操作

> ID：12124265
> 
> 赞同：0
> 
> 时间：2012-08-25T17:44:45.760
> 
> 标签：php, boolean-operations

好吧，我来自 Java 等编译语言，现在我正在尝试在某些特定领域处理 PHP。今天，为了知道如何检查有效值，我创建了一个“测试表单”，现在我有一个小问题。

假设我有多个字段要评估，使用布尔变量我想做这样的事情：

```
//ASSUMING THAT ALL IS CORRECT
$correct =  true;

$correct &= is_ok($name);
$correct &= is_ok($last_name);
$correct &= is_ok($nickname);
$correct &= is_ok($best_friend);

if (!$correct) {
    //AT LEAST ONE FIELD IS INCOMPLETE
}
else
{
    // EVERYTHING IS OK
}

function is_ok($field){
    return !empty($field);
} 
```

我发出的问题是`&=`看起来工作不正常。我需要使用另一个布尔运算符吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T18:04:05.540

始终先阅读手册：

*   [http://php.net/manual/en/language.operators.bitwise.php](http://php.net/manual/en/language.operators.bitwise.php)
*   [http://php.net/manual/en/language.operators.logical.php](http://php.net/manual/en/language.operators.logical.php)

位运算符 != 逻辑运算符

我想你正在寻找这个：

```
//ASSUMING THAT ALL IS CORRECT
$correct =  true;

$correct = $correct && is_ok($name);
$correct = $correct && is_ok($last_name);
$correct = $correct && is_ok($nickname);
$correct = $correct && is_ok($best_friend); 
```

您应该从教程、基础课程、基础文档开始，以避免此类问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T18:05:43.370

```
if (is_ok($name) && is_ok($last_name) && is_ok($nickname) && is_ok($best_friend)) {
  echo "Good.";  
} else{
  echo "Bad.";
} 
```

或者更简单地说

```
if (!empty($name) && !empty($last_name) && !empty($nickname) && !empty($best_friend)) {
  echo "Good.";  
} else{
  echo "Bad.";
} 
```

如果您真的想按照您想要的方式编写它：

```
$correct = true;
$correct = $correct && is_ok($name);
$correct = $correct && is_ok($last_name);
$correct = $correct && is_ok($nickname);
$correct = $correct && is_ok($best_friend); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T18:05:41.360

& 是按位运算符。对于 bloolean 使用 &&，例如

```
`$correct =  $correct && is_ok($name);` 
```

因为

```
echo 1 & 2 
```

给出 0

# html - 具有边框半径和出血背景颜色和边框的 IE9 div

> ID：12124267
> 
> 赞同：0
> 
> 时间：2012-08-25T17:44:57.600
> 
> 标签：html, css, internet-explorer-9

IE 在标题区域显示出血背景颜色和边框[，例如](http://www.inside-guides.co.uk/brentwood/pages/index.html)在 IE9 中。CSS在下面，但我不明白为什么..

```
#header-wrapper {
    position: relative;
    width: 98.2%;
    margin: 0 0.8%;
    overflow: hidden;
    height: 100px;
    border: 1px solid #333441;
    border-bottom: 0;
    background: -webkit-gradient(linear, left top, left bottom, from(#f6f6f6), to(#E4E4E4));
    background: -moz-linear-gradient(top,  #f6f6f6,  #e4e4e4);
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#f6f6f6', endColorstr='#e4e4e4');
    border-radius: 8px 8px 0 0;
    -webkit-border-top-right-radius: 8px;
    -webkit-border-top-left-radius: 8px;
} 
```

任何想法都会很棒..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T18:30:35.247

如果在您的项目限制范围内可用。我建议使用类似[bourbon](https://github.com/thoughtbot/bourbon)的东西，它可以为您提供所有的 mixin 来满足您的需求，同时考虑到浏览器的兼容性。但是，这样的工具需要 SASS。从长远来看，知道/拥有这不是一个坏主意。

或者，还有其他工具，例如[modernizr](http://modernizr.com/)，在这种情况下也可以为您提供帮助。

此外，您可以深入研究 CSS 框架（例如[Twitter Bootstrap](http://twitter.github.com/bootstrap/base-css.html#buttons) ）的源代码，并获取它们用于边界半径的代码。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-25T18:00:24.630

[http://abouthalf.com/2010/10/25/internet-explorer-9-gradients-with-rounded-corners/](http://abouthalf.com/2010/10/25/internet-explorer-9-gradients-with-rounded-corners/)

# python - 用大写字母分割字符串

> ID：12124275
> 
> 赞同：5
> 
> 时间：2012-08-25T17:46:02.097
> 
> 标签：python

我目前有以下代码，它在字符串“公式”中查找大写字母：http: [//pastebin.com/syRQnqCP](http://pastebin.com/syRQnqCP)

现在，我的问题是，如何更改该代码（忽略“if choice = 1:”循环中的位），以便将新分解的字符串的每个部分放入它自己的变量中？

例如，放入 NaBr 会导致字符串被分解为“Na”和“Br”。我需要将它们放在单独的变量中，以便我可以在我的 CSV 文件中查找它们。最好它是一种生成的东西，所以如果有 3 个元素，比如 MgSO4，O 将被放入一个单独的变量中，比如 Mg 和 S。

如果不清楚，请告诉我，我会尝试让它更易于理解......不过，目前还没有办法这样做。:(

编辑：相关代码：

功能：

```
def split_uppercase(string):
x=''
for i in string: 
    if i.isupper(): x+=' %s' %i 
    else: x+=i 
return x.strip() 
```

字符串输入和查找：

```
formula = raw_input("Enter formula: ")
upper = split_uppercase(formula)

#Pull in data from form.csv
weight1 = float(formul_data.get(element1.lower()))
weight2 = float(formul_data.get(element2.lower()))
weight3 = float(formul_data.get(element3.lower()))

weightSum = weight1 + weight2 + weight3
print "Total weight =", weightSum 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-25T17:52:09.227

我认为有一种更简单的方法来做你想做的事情。使用正则表达式。例如：

```
>>> [a for a in re.split(r'([A-Z][a-z]*)', 'MgSO4') if a]
['Mg', u'S', u'O', u'4'] 
```

如果您希望将数字附加到正确的元素，只需在正则表达式中添加一个数字说明符：

```
>>> [a for a in re.split(r'([A-Z][a-z]*\d*)', txt) if a]
[u'Mg', u'S', u'O4'] 
```

您真的不想“将每个部分放在自己的变量中”。这通常没有意义，因为您不知道有多少部分，因此您无法提前知道要创建多少变量。相反，您想制作一个列表，就像上面的示例一样。然后，您可以遍历此列表并对每个部分执行您需要执行的操作。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-25T18:05:39.310

您可以使用 re.split 对字符串执行复杂的拆分。

```
import re

def split_upper(s):
    return filter(None, re.split("([A-Z][^A-Z]*)", s))

>>> split_upper("fooBarBaz")
['foo', 'Bar', 'Baz']
>>> split_upper("fooBarBazBB")
['foo', 'Bar', 'Baz', 'B', 'B']
>>> split_upper("fooBarBazBB4")
['foo', 'Bar', 'Baz', 'B', 'B4'] 
```

# eclipse - Eclipse CDT：如何添加对新文件类型的支持

> ID：12124276
> 
> 赞同：0
> 
> 时间：2012-08-25T17:46:13.763
> 
> 标签：eclipse, eclipse-cdt

在 Eclipse CDT 中，我想为自定义文件类型创建语法突出显示和错误解析器，比如说 *.xy。
这些文件不包含 C 代码，所以我不能使用任何现有的解析器。

我必须创建什么样的插件？

对于错误解析器，我想我必须使用 Codan？（还没有尝试过） [https://www.ibm.com/developerworks/java/library/j-codan/](https://www.ibm.com/developerworks/java/library/j-codan/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:04:18.950

Maybe this is a simple solution for you: [colorEditor plugin](http://gstaff.org/colorEditor/)

You can simply add a new language by unpacking the jar archive, then adding a xyz.xml file for your .xyz files. Pakc together again, and copy into your Eclipse "plugins" dir.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T20:14:42.590

如果您的语言与 CDT 支持的语言和工作流程无关，CDT 是您旅程的错误开始。改为实现基于[xtext](http://www.eclipse.org/Xtext/)的语言编辑器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T22:47:09.493

您需要引入一种新的“语言” - 这是扩展点：[http ://help.eclipse.org/helios/topic/org.eclipse.cdt.doc.isv/reference/extension-points/org_eclipse_cdt_core_language.html](http://help.eclipse.org/helios/topic/org.eclipse.cdt.doc.isv/reference/extension-points/org_eclipse_cdt_core_language.html)

Codan 不是“错误解析器”，它是一个静态分析框架。错误解析器处理用于构建应用程序的命令行工具（例如编译器、链接器）的输出，以识别在构建过程中发生的错误并填充它们的属性，例如源文件名和行号。

Codan 在编辑器中分析源代码以识别错误。例如，它检查表达式中使用的变量是否事先声明。请注意，相同的检查可以在构建时由编译器执行，然后由错误解析器捕获并显示在编辑器/问题视图中 - Codan 的目标是在构建运行之前更快地检测到问题。Codan 还可以执行一些编译器不执行的检查。

# python - 使用 loadtxt 时内存不足

> ID：12124280
> 
> 赞同：0
> 
> 时间：2012-08-25T17:46:32.087
> 
> 标签：python

我尝试`loadtxt('x.txt', delimiter=' ')`在大小为 6.8 GB 的文件上使用。这会产生内存错误。我的电脑有 8 GB 内存。当我查看我的计算机性能计时，我发现 Python 已经在仅使用 3.4 GB 内存时给出了错误消息。为什么 Python 在让步之前不尝试使用剩余的 4,6 GB？

你的！

每页。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T18:18:50.133

是`numpy.loadtxt`吗？查看[源代码](https://github.com/numpy/numpy/blob/master/numpy/lib/npyio.py#L610)，它将已解析的行（指定类型的列表或元组）推送到列表中，然后将其打包到数组中。这将消耗比文件大小甚至`float`包含文件值的打包数组的大小更多的内存。我会说即使在 8 GB RAM 机器上使用 64 位 Python 也不太可能加载此文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T17:50:09.023

您的 Python 可能是在 32 位架构中编译的，因此它无法处理超过 4 GB 的内存。要解决此问题，请在 64 位操作系统上安装 64 位 Python。

PS。他放弃了 3.4（不是 4 GB），因为保留了部分地址空间。

# python - type 是 Python 中所有类的超类吗？

> ID：12124284
> 
> 赞同：6
> 
> 时间：2012-08-25T17:47:26.343
> 
> 标签：python, superclass

鉴于这`type`是所有类的超类，为什么`isinstance(1, type)`是 `False`？我理解这个概念错了吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-25T17:57:32.110

`type`不是所有类的超类。它是所有类的类型（没有自定义元类）。注意区别：

```
>>> isinstance(1, int)
True
>>> isinstance(1, type)
False
>>> isinstance(int, type)
True 
```

数字 1 不是类型的实例。相反，`int`类型本身是`type`.

编辑：

这些示例可以帮助您：

```
>>> isinstance(1, int)
True
>>> issubclass(1, int)
Traceback (most recent call last):
  File "<pyshell#7>", line 1, in <module>
    issubclass(1, int)
TypeError: issubclass() arg 1 must be a class
>>> class Foo(object):
...     pass
>>> isinstance(Foo, type)
True
>>> issubclass(Foo, type)
False # Note the difference from the previous!
>>> isinstance(Foo, object)
True
>>> issubclass(Foo, object)
True
>>> isinstance(int, type)
True
>>> issubclass(int, type)
False # Note the difference from the previous! 
```

从您的评论来看，您似乎误解了继承的工作原理。作为类型的实例和作为类型的子类（或子类型）是有区别的。如果对象 X 是类型 A 的*实例*，类型 A 是类型 B 的*子类*，则 X 也是 B 的实例。但如果类型 A 是类型 B 的*实例*，则 X 不是 B 的实例。换句话说，子类是可传递的，但实例不是。

现实世界的类比是在“物种”和“智人”之间。您可以说“物种”是一种类型，而“智人”是该类型的一个实例；换句话说，“智人”是一个特定的物种。但是“智人”也是一种类型，一个人就是这种类型的一个实例。例如，巴拉克奥巴马（举一个众所周知的例子）是“智人”的一个例子；也就是说，他是一个特定的智人。但巴拉克奥巴马不是物种的例子。他自己不是一个物种。

`type`、和数字 1之间的关系`int`类似。数字 1 是 的实例`int`，并且`int`是 的实例`type`，但这并不意味着 1 是类型的实例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-25T17:50:41.617

那是因为`type`不是所有内置类型的超类型。`object`是。

# c - 可以使用 OCIExtractToInt 从查询中获取参数吗？

> ID：12124285
> 
> 赞同：0
> 
> 时间：2012-08-25T17:47:26.577
> 
> 标签：c, oracle, oracle-call-interface

我想知道[OCI](http://docs.oracle.com/cd/E11882_01/appdev.112/e10646/oci20ext004.htm#i446828 "OCI")提供的 C-Functions`OCIExtractToInt`和其他功能是否可以用于从语句中提取数据？如果是这样，这将如何运作？可悲的是，我找不到任何这样的例子。此外，Oracle 文档在这一点上并没有多大帮助。`OCIExtractToXXX`

# php - 如何从 php 中的嵌套数组创建嵌套对象

> ID：12124289
> 
> 赞同：0
> 
> 时间：2012-08-25T17:47:50.743
> 
> 标签：php, arrays, json, object

我有这样的代码，初始化配置

```
 $this->config = array(
        'users' => array(
            array('name' => 'admin',
                  'password' => $password
            )
        ),
        'tokens' => array(),
        'sessions' => array(),
    ); 
```

我正在使用它保存到一个文件中`json_encode($this->config)`，然后我使用它加载它

```
json_decode(file_get_contents('file.json')); 
```

它创建嵌套对象，我想在初始化和配置时拥有这个嵌套对象，**除此之外有没有办法创建这个嵌套对象？**

```
$this->config = json_decode(json_encode($this->config)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T17:58:22.817

您也可以使用此功能

```
<?php
function arrayToObject($array) {
    if(!is_array($array)) {
        return $array;
    }

    $object = new stdClass();
    if (is_array($array) && count($array) > 0) {
      foreach ($array as $name=>$value) {
         $name = strtolower(trim($name));
         if (!empty($name)) {
            $object->$name = arrayToObject($value);
         }
      }
      return $object;
    }
    else {
      return FALSE;
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T18:28:11.350

我决定改用这个功能

```
function object($array) {
    $object = new stdClass();
    foreach ($array as $k => $v) {
        $object->$k = $v;
    }
    return $object;
} 
```

并为关联数组显式调用它

```
$this->config = object(array(
    'users' => array(
        object(array(
            'name' => 'admin',
            'password' => $password
        ))
    ),
    'tokens' => array(),
    'sessions' => array(),
)); 
```

**编辑**递归代码

```
function is_assoc($array) {
    if (!is_array($array)) {
        return false;
    } else {
        $keys = array_keys($array);
        return !is_numeric($keys[0]);
    }
}

function object($array) {
    if (is_assoc($array)) {
        $object = new stdClass();
        foreach ($array as $k => $v) {
            $object->$k = object($v);
        }
        return $object;
    } else {
        return $array;
    }
} 
```

# java - Resources.getString() 方法不存在

> ID：12124294
> 
> 赞同：1
> 
> 时间：2012-08-25T17:48:38.730
> 
> 标签：java, android

从书中我了解到：

> 对于标准字符串，使用 Resources.getString(R.string.deal_details) 对于复数，使用 Resources.getQuantityString(R.plurals.deal_service_new_deal, 1);

但是`Resources`类没有这个方法。为什么？这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T17:53:37.760

我想你在写这个：

```
String mString = Resources.getString(R.string.mString); 
```

实际上，使用这种语法，您正在尝试获取名为“getString()”的 Resources 类的静态方法。但是 getString() 不是静态的，因此您必须使用 Resources 类的实例。

每个 Activity 都可以使用以下语法将其提供给您：

```
Resources mResources = getResources();
String mString = mResources.getString(R.string.mString); 
```

*注意：此代码未优化，您可以删除第一行。我写它只是为了让一个例子更容易理解。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T17:50:25.123

您需要使用获取资源对象

```
Resources res = context.getResources(); 
res.getString(R.string.deal_details) 
```

# php - 将 PHP 变量传递给 JS 函数

> ID：12124295
> 
> 赞同：3
> 
> 时间：2012-08-25T17:49:14.300
> 
> 标签：php, javascript, html, forms, onsubmit

> **可能重复：**
> [如何将变量从 php 页面传递到 javascript 并显示数据](https://stackoverflow.com/questions/5648949/how-to-pass-variables-from-php-page-to-javascript-and-display-the-the-data)

我正在尝试将 PHP 变量传递给 javascript 函数。我知道有很多关于这个问题的文章/问题，但它们似乎都不适合我。我的问题有点奇怪。让我从代码开始。

这是我的PHP代码：

```
<?php 
    session_start();

    $type = 'Dance';
    $environment = 'Outside';
?> 
```

这是 HTML 代码：

```
<form onsubmit="showEvents(<?=$type ?>, <?=$environment ?>)">
        <select class="drop_down_menus" name="type">
            <option>All</option>
            <option>Dance</option>
            <option>Festival</option>
            <option>Music</option>
            <option>Stand-Up</option>
            <option>Theather</option>                               
        </select>
        <select class="drop_down_menus" name="environment">
            <option>All</option>
            <option>Indoor</option>
            <option>Outdoor</option>
        </select>
        <input type="submit" id="submit_button" value="Event Me Out!">
</form>
<div id="test_div">test1</div> 
```

这是JS代码：

```
function showEvents(type, environment) {
    document.getElementById('test_div').innerHTML = "test2";
} 
```

当我单击提交按钮时，“test_div”的文本必须从“test1”更改为“test2”，但当我提交表单时没有任何变化。

奇怪的事情从这里开始：

当我使用以下 PHP 变量并将两个变量都更改为“$ current_year”时，它可以工作！

```
<?php
    $today = getdate();
    $current_year = $today['year'];
?>

<form onsubmit="showEvents(<?=$current_year ?>, <?=$current_year ?>)">
...rest of the HTML code... 
```

我首先认为这是一个范围问题，但显然这不是因为一个变量有效而其他变量没有，而所有变量都具有相同的范围。

也许有一些很简单的东西我不知道。如果您能帮助我（或指导我解决另一个问题），我将不胜感激。到目前为止，没有一个解决方案对我有帮助。

先感谢您。

注意1：我试图回显`$type`and`$environment`变量但没有帮助。

注意 2：看起来我没有使用下拉菜单中的选择，但我没有在这里编写完整的代码。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-25T17:51:14.113

你应该使用：

```
<form onsubmit="showEvents('<?=$type ?>', '<?=$environment ?>')"> 
```

您正在尝试这样做：`showEvents(Dance, Outside)`而不是：`showEvents('Dance', 'Outside')`但您可能会遇到更多错误。例如，`<?=$type ?>`不推荐。你应该使用`<?php echo $type ?>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T17:54:56.593

问题可能是您在代码中使用的短标签来回显 php 变量，即

请避免使用 PHP 短标签，因为它们可能不会在所有服务器中启用。使用它始终是一个好习惯

```
<?php echo $something ?> 
```

代替

```
<?= $something ?> 
```

# linux - Linux“at”命令可以在/bin/sh以外的环境中运行吗？

> ID：12124297
> 
> 赞同：0
> 
> 时间：2012-08-25T17:49:22.387
> 
> 标签：linux, bash, environment, at-job

我需要一个调度程序（仅限一次操作）用于我正在编码的站点（在 php 中），我有两个想法：

1- 使用 crontab 运行 php 脚本，并针对计划操作的数据库进行验证，并执行比当前时间更早的操作。

2-使用“at”命令安排各种任务。

第二个选项似乎更好更简单，所以这就是我想要做的。但是，我还没有找到一种方法来告诉“at”使用 PHP 解释器运行命令，到目前为止，我一直在创建一个 .sh 脚本，其中包含一个命令，即通过php解释器。这远非最佳设置，我希望我可以直接通过“at”执行 php 代码，例如：

```
at -e php -f /path/to/phpscript time 
```

可能吗？我没有发现任何关于在 man 或 online 中使用 bash 以外的环境的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T18:00:55.767

您可以在前面`phpscript`添加一个`#!/usr/bin/php`（或存储您的 php 脚本的任何位置）并使其`/path/to/phpscript`可执行。这正是`#!`语法的用途。

很明显，你`phpscript`会看起来像这样：

```
#!/usr/bin/php

...your code goes here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T23:18:29.987

您指定的命令`at`由 执行`/bin/sh`，但 sh 可以调用任何命令，直接执行或由任何指定的解释器执行。

以下适用于带有 bash shell 的 Ubuntu 12.04 系统：

```
$ cat hello.php
#!/usr/bin/php
<?php
    echo "Hello, PHP\n";
?>
$ echo "$PWD/hello.php > hello.php.out" | at 16:11
warning: commands will be executed using /bin/sh
job 4 at Sat Aug 25 16:11:00 2012
$ date
Sat Aug 25 16:11:05 PDT 2012
$ cat hello.php.out
Hello, PHP
$ 
```

在某些情况下，您必须做一些额外的工作才能正确设置环境变量（对于这种简单的情况，这不是必需的）。引用手册页：

> 对于**at**和**batch ，从标准输入或使用****-f**选项指定的文件读取命令并执行。工作目录、环境（除了变量**BASH_VERSINFO**、**DISPLAY**、 **EUID**、**GROUPS**、**SHELLOPTS**、**TERM**、**UID**和**_**）和 umask 从调用时起保留。
> 
> 由于**at**当前作为 setuid 程序实现，其他环境变量（例如**LD_LIBRARY_PATH**或**LD_PRELOAD**）也不会导出。这在未来可能会改变。作为一种解决方法，请在您的工作中明确设置这些变量。

# php - mySQL查询需要计算到一个字段为1的不同字段

> ID：12124304
> 
> 赞同：1
> 
> 时间：2012-08-25T17:50:24.890
> 
> 标签：php, mysql, database

我需要从数据库的多个表中获取数据，并且需要使用 1 个查询。我遇到的麻烦是我需要计算每个项目有多少任务以及完成了多少任务。

我得到了这些表：
**项目：**

```
id    name        start_date           end_date             project_leader    finished
1     project_1   2012-08-01 00:00:00  2012-29-01 00:00:00  2                 0 
```

**用户**

```
id    username    password    email      status
1     user_1      pass_1      email_1    1
2     user_2      pass_2      email_2    1 
```

**user_has_project**

```
userid   projectId
1        1 
```

**任务**

```
id   project  description          end_date               user  finished
1    1        test description 1   2012-29-01 00:00:00    1     1
2    1        test description 2   2012-29-01 00:00:00    1     0 
```

所以我需要做的是做一个查询，应该给我这个结果：
**想要的结果：**

```
project_id  project_name    start_date           end_date             project_leader    finished       tasks      finished_tasks
1           project_1       2012-08-01 00:00:00  2012-29-01 00:00:00  user_2            0              2          1 
```

我让它工作，直到我需要计算已完成任务数量的部分。到目前为止，我得到了这个查询，但它还没有计算完成的任务。我怎样才能做到这一点？

**询问：**

```
SELECT projects.id,
       projects.name,
       projects.start_date,
       projects.end_date,
       projects.finished,
       users.username AS project_leader,
       COUNT(tasks.id) AS tasks
FROM projects
LEFT JOIN tasks ON (tasks.project = projects.id)
JOIN user_has_project ON (user_has_project.projectId = projects.id)
JOIN users ON (projects.project_leader = users.id)
WHERE user_has_project.userId = 1
GROUP BY projects.id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T17:56:22.600

我在这里有点过激（我会继续考虑以防这种直觉反应是错误的），但诀窍可能是在 count() 函数中使用“ *null* if [false](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_nullif) ”评估，这[已记录在案只计算非空值](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_count)：

 *```
SELECT projects.id,
       projects.name,
       projects.start_date,
       projects.end_date,
       projects.finished,
       users.username AS project_leader,
       COUNT(tasks.id) AS tasks,
       COUNT(NULLIF(tasks.finished, 0)) as finished_tasks 
```*

# x3d - X3D 似乎只运行了一半的循环

> ID：12124306
> 
> 赞同：0
> 
> 时间：2012-08-25T17:50:41.117
> 
> 标签：x3d

我有一个通过 JAXB 输出 X3D 文件的 java 程序。这是当前的输出。

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<X3D version="1.0" profile="Full">
    <head>
        <meta name="Sim3DAnimator" content="jaxbtext.x3d"/>
    </head>
    <Scene>
        <WorldInfo info="by Patrick R. Aquilone" title="Testing Simu 3D Animator"/>
        <DirectionalLight ambientIntensity="1.0" intensity="1.0"/>
        <Viewpoint orientation="0.0 0.0 0.0 90.0" position="0.0 10.0 100.0" description="SIM3D"/>
        <Transform>
            <Transform scale="1 1 1" translation="0.000000 0.000000 0.000000" DEF="person">
                <Transform rotation="0 1 0 0.000000">
                    <Transform rotation="0 0 1 0.000000">
                        <Transform rotation="1 0 0 0.000000">
                            <Transform>
                                <MetadataString value="test"/>
                                <Transform scale="1 1 1" translation="0.000000 25.200000 0.000000">
                                    <Shape>
                                        <Sphere radius="8.0"/>
                                        <Appearance>
                                            <Material ambientIntensity="0.5" diffuseColor="0.500000 0.500000 0.500000"/>
                                        </Appearance>
                                    </Shape>
                                </Transform>
                                <Transform rotation="0 0 1 1.570800" scale="1 1 1" translation="0.000000 13.200000 0.000000">
                                    <Shape>
                                        <Cylinder height="16.0" radius="1.0"/>
                                        <Appearance>
                                            <Material ambientIntensity="0.5" diffuseColor="0.500000 0.500000 0.500000"/>
                                        </Appearance>
                                    </Shape>
                                </Transform>
                                <Transform scale="1 1 1" translation="0.000000 13.200000 0.000000">
                                    <Shape>
                                        <Cylinder height="16.0" radius="1.0"/>
                                        <Appearance>
                                            <Material ambientIntensity="0.5" diffuseColor="0.500000 0.500000 0.500000"/>
                                        </Appearance>
                                    </Shape>
                                </Transform>
                                <Transform scale="1 1 1" translation="9.600000 3.000000 0.000000">
                                    <MetadataString value="test-right-arm"/>
                                    <Transform translation="0.000000 10.500000 0.000000">
                                        <Shape>
                                            <Appearance>
                                                <Material ambientIntensity="0.5" diffuseColor="0.500000 0.500000 0.500000"/>
                                            </Appearance>
                                            <Sphere radius="2.5"/>
                                        </Shape>
                                    </Transform>
                                    <Transform translation="0.000000 0.000000 0.000000">
                                        <Shape>
                                            <Appearance>
                                                <Material ambientIntensity="0.5" diffuseColor="0.500000 0.500000 0.500000"/>
                                            </Appearance>
                                            <Cylinder height="21.0" radius="2.5"/>
                                        </Shape>
                                    </Transform>
                                    <Transform translation="0.000000 -10.500000 0.000000">
                                        <Shape>
                                            <Appearance>
                                                <Material ambientIntensity="0.5" diffuseColor="0.500000 0.500000 0.500000"/>
                                            </Appearance>
                                            <Sphere radius="2.5"/>
                                        </Shape>
                                    </Transform>
                                </Transform>
                                <Transform scale="1 1 1" translation="-9.600000 3.000000 0.000000">
                                    <MetadataString value="test-left-arm"/>
                                    <Transform translation="0.000000 10.500000 0.000000">
                                        <Shape>
                                            <Appearance>
                                                <Material ambientIntensity="0.5" diffuseColor="0.500000 0.500000 0.500000"/>
                                            </Appearance>
                                            <Sphere radius="2.5"/>
                                        </Shape>
                                    </Transform>
                                    <Transform translation="0.000000 0.000000 0.000000">
                                        <Shape>
                                            <Appearance>
                                                <Material ambientIntensity="0.5" diffuseColor="0.500000 0.500000 0.500000"/>
                                            </Appearance>
                                            <Cylinder height="21.0" radius="2.5"/>
                                        </Shape>
                                    </Transform>
                                    <Transform translation="0.000000 -10.500000 0.000000">
                                        <Shape>
                                            <Appearance>
                                                <Material ambientIntensity="0.5" diffuseColor="0.500000 0.500000 0.500000"/>
                                            </Appearance>
                                            <Sphere radius="2.5"/>
                                        </Shape>
                                    </Transform>
                                </Transform>
                                <Transform scale="1 1 1" translation="5.000000 -24.000000 0.000000">
                                    <MetadataString value="test-right-leg"/>
                                    <Transform translation="0.000000 10.500000 0.000000">
                                        <Shape>
                                            <Appearance>
                                                <Material ambientIntensity="0.5" diffuseColor="0.500000 0.500000 0.500000"/>
                                            </Appearance>
                                            <Sphere radius="2.5"/>
                                        </Shape>
                                    </Transform>
                                    <Transform translation="0.000000 0.000000 0.000000">
                                        <Shape>
                                            <Appearance>
                                                <Material ambientIntensity="0.5" diffuseColor="0.500000 0.500000 0.500000"/>
                                            </Appearance>
                                            <Cylinder height="21.0" radius="2.5"/>
                                        </Shape>
                                    </Transform>
                                    <Transform translation="0.000000 -10.500000 0.000000">
                                        <Shape>
                                            <Appearance>
                                                <Material ambientIntensity="0.5" diffuseColor="0.500000 0.500000 0.500000"/>
                                            </Appearance>
                                            <Sphere radius="2.5"/>
                                        </Shape>
                                    </Transform>
                                </Transform>
                                <Transform scale="1 1 1" translation="-5.000000 -24.000000 0.000000">
                                    <MetadataString value="test-left-leg"/>
                                    <Transform translation="0.000000 10.500000 0.000000">
                                        <Shape>
                                            <Appearance>
                                                <Material ambientIntensity="0.5" diffuseColor="0.500000 0.500000 0.500000"/>
                                            </Appearance>
                                            <Sphere radius="2.5"/>
                                        </Shape>
                                    </Transform>
                                    <Transform translation="0.000000 0.000000 0.000000">
                                        <Shape>
                                            <Appearance>
                                                <Material ambientIntensity="0.5" diffuseColor="0.500000 0.500000 0.500000"/>
                                            </Appearance>
                                            <Cylinder height="21.0" radius="2.5"/>
                                        </Shape>
                                    </Transform>
                                    <Transform translation="0.000000 -10.500000 0.000000">
                                        <Shape>
                                            <Appearance>
                                                <Material ambientIntensity="0.5" diffuseColor="0.500000 0.500000 0.500000"/>
                                            </Appearance>
                                            <Sphere radius="2.5"/>
                                        </Shape>
                                    </Transform>
                                </Transform>
                                <Transform scale="1 1 1" translation="0.000000 0.000000 0.000000">
                                    <MetadataString value="test-torso"/>
                                    <Transform translation="0.000000 12.000000 0.000000">
                                        <Shape>
                                            <Appearance>
                                                <Material ambientIntensity="0.5" diffuseColor="0.500000 0.500000 0.500000"/>
                                            </Appearance>
                                            <Sphere radius="5.0"/>
                                        </Shape>
                                    </Transform>
                                    <Transform translation="0.000000 0.000000 0.000000">
                                        <Shape>
                                            <Appearance>
                                                <Material ambientIntensity="0.5" diffuseColor="0.500000 0.500000 0.500000"/>
                                            </Appearance>
                                            <Cylinder height="24.0" radius="5.0"/>
                                        </Shape>
                                    </Transform>
                                    <Transform translation="0.000000 -12.000000 0.000000">
                                        <Shape>
                                            <Appearance>
                                                <Material ambientIntensity="0.5" diffuseColor="0.500000 0.500000 0.500000"/>
                                            </Appearance>
                                            <Sphere radius="5.0"/>
                                        </Shape>
                                    </Transform>
                                </Transform>
                            </Transform>
                        </Transform>
                    </Transform>
                </Transform>
                <PositionInterpolator keyValue="   0   0   0  10   0   0  20   0   0  30   0   0  40   0   0  50   0   0  60   0   0  70   0   0  80   0   0  90   0   0 100   0   0  90   0   0  80   0   0  70   0   0  60   0   0  50   0   0  40   0   0  30   0   0  20   0   0  10   0   0" key="  0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19" DEF="person-position"/>
                <TimeSensor cycleInterval="1.0" loop="true" DEF="person-time"/>
                <ROUTE fromNode="person-time" fromField="fraction_changed" toNode="person-position" toField="set_fraction"/>
                <ROUTE fromNode="person-position" fromField="value_changed" toNode="person" toField="set_translation"/>
            </Transform>
        </Transform>
    </Scene>
</X3D> 
```

我的问题是您可以看到插值占 20 个点，但是当它运行时它只运行其中的一半，然后又回到开头。我不明白为什么它会在第 10 个间隔停止。我知道我错过了什么，但是什么？

顺便说一句，我是新来的，所以你看到我可以修复的任何东西，请继续让我知道。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T15:05:55.690

**fraction_changed**输出介于 0 和 1 之间的值。PositionInterpolator 的**键**具有从 0 到 20 的整数值。这意味着每当 TimeSensor 开始/结束时，只有第一个 (0) 和第二个 (1) 值将处于活动状态。基本上，您的转换将交替转换为 (0,0,0) 5 次和 (10, 0, 0) 5 次。

要实现您想要的，您必须将键数组更改为：key [0 0.05 0.10 0.15 .... 0.95 1]

**或将person-time.time**路由到 person-position.set_fraction。这将遍历所有键值一次。

它应该以这种方式工作。

# spring - Spring事务管理回滚检查的异常

> ID：12124310
> 
> 赞同：1
> 
> 时间：2012-08-25T17:51:04.360
> 
> 标签：spring

我正在使用 Spring“@Transactional”注释来处理事务。

```
 @Transactional(readOnly = false,propagation=Propagation.REQUIRES_NEW,isolation=Isolation.READ_UNCOMMITTED,rollbackFor=SQLException.class)
public void updateBatch(Report a)
        throws SQLException, DataAccessException { insert1();insert2(); insert3(); } 
```

但万一

*   insert1() - 成功插入表 A 中的数据。
*   insert2() - 成功插入表 b 中的数据
*   insert3() - 抛出检查异常并且不在表 C 中插入数据

这些插入是ibatis inbuild函数来触发DB中的插入我得到了以下异常

```
“引起：org.springframework.transaction.UnexpectedRollbackException：事务回滚，因为它已被标记为仅回滚
    在 org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:717)
    在 org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393)
    在 org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120)
    在 org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    在 org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)"

```

并且事务不会回滚，即 insert1(),insert2() 不会回滚

请让我知道我错过了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T21:36:09.043

你在 insert1 和 insert2 中做什么？

他们是否在使用另一个具有`PROPAGATION.REQUIRES_NEW`属性的交易？如果是，它们将不会被回滚。否则您是在 insert1 还是 insert2 中回滚？

我遇到过同样的问题。尽管它可能与您拥有的有所不同。我遇到的情况是你有两个服务 A 和 B。

A 在 try-catch 块中调用 B 的方法。B 抛出 RuntimeException 并且 A 的 catch 块将该异常包装到一个已捕获的异常中。

在我的场景中发生了什么： - B 是事务代理后面的一个单独的类 - B 抛出一个运行时异常，它将事务设置为回滚 - 因为我有 Propagation.REQUIERED，它与 A 方法的事务相同 - A包装异常并将其抛出，因为异常既不是 RuntimeException 也不是错误，提及方法不会进入 transactionManager.rollback 而是进入 transactionManager.commit - 这将抛出 UnexpectedRollback，因为事务先前被标记为回滚。

你的情况可能不同。

# php - 为 MySQL 设置时区

> ID：12124316
> 
> 赞同：0
> 
> 时间：2012-08-25T17:51:36.263
> 
> 标签：php, mysql, timezone

我使用 php 设置站点的当前时区：

```
date_default_timezone_set('America/New_York'); 
```

我如何同时为 mysql 设置相同的时区，以便当我使用 NOW() 时它使用 php 中设置的时区？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T17:55:19.353

不。

最佳做法是存储`UTC`在数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T17:58:34.980

您可以使用更改您的 Mysql 时区`SET time_zone = timezone;`

[http://dev.mysql.com/doc/refman/5.1/en/time-zone-support.html](http://dev.mysql.com/doc/refman/5.1/en/time-zone-support.html)

# c++ - 为什么我不能以这个结构为值创建一个 std::map

> ID：12124317
> 
> 赞同：0
> 
> 时间：2012-08-25T17:51:53.120
> 
> 标签：c++, compiler-construction, map, struct, typedef

我有以下结构。

```
struct ShaderObject
{
    const GLchar* File;
    ShaderType Type;
    GLuint Shader;
    ShaderObject(const GLchar* File, ShaderType Type);
}; 
```

还有这种类型的地图。

```
typedef map<string, ShaderObject> Shaders; 
```

编译器给了我一个错误，链接到`map`.

```
 Error 1 error C2512: 'ShaderObject::ShaderObject': No appropriate default constructor
 available c:\program files (x86)\microsoft visual studio 11.0\vc\include\map 198 1 
```

**我不明白这个错误。我该如何解决？**因为我以前从未遇到过这样的错误并且我无法解释，所以我不确定您需要哪些信息。请随时询问详情！**非常感谢！**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T17:55:18.853

如果你想把`ShaderObject`它放在`std::map`. 这样做的原因是，如果您将`operator[]`on`map`用于不存在的键，它将自动插入该键和一个**新** `ShaderObject`的作为值。它将使用默认构造函数来创建此对象。

# git - 将自定义目录设为 git 默认目录？

> ID：12124322
> 
> 赞同：0
> 
> 时间：2012-08-25T17:52:44.987
> 
> 标签：git

当我创建我的仓库并在本地克隆它时，它位于：

```
C:\Users\xavier\Documents\GitHub\phpBudgetTool 
```

但我的项目位于：

```
C:\xampp\htdocs\phpBudgetTool 
```

如何使上述目录成为 GIT 跟踪更改的默认目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T18:01:11.410

为什么不直接克隆到 C:\xampp\htdocs\phpBudgetTool？

或者，您可以克隆到 C:\Users\xavies\Documents\GitHub\phpBudgetTool 并在 Apache 中设置一个指向该目录的虚拟主机。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-25T18:02:57.437

可以通过在 c:\XAMPP\apache\conf\httpd.conf 中设置 DocumentRoot 来做到这一点

默认情况下：

```
C:\xampp\htdocs 
```

将其更改为：

```
C:\Users\xavier\Documents\GitHub\phpBudgetTool 
```

# java - 如何让我的根 jaxb 生成的类扩展我自己的类

> ID：12124324
> 
> 赞同：1
> 
> 时间：2012-08-25T17:52:51.300
> 
> 标签：java, jaxb, extend

我希望我的 xjc 生成的根类扩展我的 A 类之一，它只不过是根类的包装器。我可以在不修改 xsd 文件的情况下做到这一点吗（[如何强制架构编译的类将特定类扩展到架构之外](https://stackoverflow.com/questions/4556179/how-to-force-schema-compiled-classes-to-extend-specific-class-outside-schema)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T20:18:12.840

您可以定义一个超级根类（参见[http://jaxb.java.net/nonav/2.0.2/docs/vendorCustomizations.html](http://jaxb.java.net/nonav/2.0.2/docs/vendorCustomizations.html)）。**每个**生成的类（在该 xjc 运行中）都将扩展该根类。
可以在外部绑定文件中而不是在 xsd 中声明所需的全局绑定（请参阅[http://java.sun.com/webservices/docs/1.4/tutorial/doc/JAXBUsing4.html#wp148515](http://java.sun.com/webservices/docs/1.4/tutorial/doc/JAXBUsing4.html#wp148515)）。然后你可以将它与 xsd 一起传递给 xjc 生成器。

# ajax - 如何在jquery中使用div标签附加html响应（从ajax请求获得）？

> ID：12124341
> 
> 赞同：2
> 
> 时间：2012-08-25T17:55:56.903
> 
> 标签：ajax, jquery-ui, jquery

**下面是在服务器上访问 url 并获取 html 响应的代码片段。我可以在 firefox 调试器中看到响应，但它没有显示在 div 标签中。**

```
$.ajax({
    url: url,
    dataType: 'html',
    data: '',
    type: 'POST',
    success: function(data) {
        //in firefox debugger i can see complete html response inside data 
        $('#displayContent').html(data); // but here, it does not  
        // append the html inside div displayContent. Instead it makes 
        // the current page blank
    }
});​ 
```

**我不明白我在这里犯了什么错误我**不能直接将 ajax html 响应分配给选择器（在我的情况下是 div 标签）`$('#displayContent').html(data)`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T18:02:46.133

而不是使用 html() 方法使用追加即

```
$('#displayContent').append(data); 
```

或者，如果您想将整个内容直接分配给您的元素，请使用 load 方法

```
$(function(){
   $('#displayContent').load(url);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T18:12:50.150

如果您的页面上有一个表单标签，并且您尝试使用 jQuery 异步提交它，您的函数将需要 return `false`，以防止浏览器处理该表单。

例子：

```
$("form").submit(function () {
  $.ajax(...);
  return false;
}); 
```

# properties - Objective-c 成员变量和属性语句的用法

> ID：12124345
> 
> 赞同：0
> 
> 时间：2012-08-25T17:56:23.250
> 
> 标签：properties, synthesize

最近开始学习Objective-C，对成员变量和属性感到困惑。我想知道以下三个代码块有什么区别：

1.

```
@interface Application 
{ 
    UserInfo* userInfo; 

    ApplicationInfo*applicationInfo;
}

@property (retain) UserInfo*userInfo; // @synthesize userInfo; 

@property (retain) ApplicationInfo* applicationInfo ; // @synthesize applicationInfo;

@end 
```

2.

```
@interface Application 

{ 
}

@property (retain) UserInfo*userInfo; // @synthesize userInfo; 

@property (retain) ApplicationInfo* applicationInfo ; // @synthesize applicationInfo; 

@end 
```

3.

```
 @interface Application 
{ 
    UserInfo* userInfo; 

    ApplicationInfo*applicationInfo;
} 

@end 
```

非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T02:54:43.093

1：这声明了带有声明属性的实例变量。当您合成属性时，例如 property `foo`，会自动生成引用实例变量的`foo`和`setFoo`方法（由于具有相同的名称），并且当您使用点符号（例如`someInstance.foo = bar`）访问它们时会调用这些方法。因为您将属性定义为`retain`，所以当您使用 setter 或通过点表示法将对象分配给属性时，实例变量指向的现有对象将被释放，而新对象将分配给实例变量并保留。

2：同1。实例变量是隐含的。

3：实例变量存在，但属性不存在，因此您将无法通过点符号访问它们，并且没有综合getter/setter方法。

我强烈建议您阅读有关此的官方文档，它非常清楚，并且以一种相当简单的方式进行了说明。

# ruby-on-rails - 使用 RubyMine 创建基于 Web 的 Ruby 程序

> ID：12124349
> 
> 赞同：0
> 
> 时间：2012-08-25T17:57:08.783
> 
> 标签：ruby-on-rails, syntax-error, applicationcontroller

我正在使用 IDE RubyMine 编写一个基于 Web 的 Ruby 程序。

我有几节课：

`application_controller.rb:`

```
class application_controller < ActionController::Base
# To change this template use File | Settings | File Templates.
# require './course_modules.rb'
def initialize
  self.class.main_menu
end

=begin
  def navigateTo(what)
    what.new(v).display
    mainMenu
  end
=end

def self.main_menu
  puts "What would you like to do?
      1: Add module to a scheme
      2: Remove module from a scheme
      3: Query modules
      4: Modify module
      5: Register a student on a scheme
      6: Remove a student from a scheme
      7: Register a student on a module
      8: Remove a student from a module"
  case gets.strip
    when "1"
      CourseModules.add_module
    when "2"
      CourseModules.remove_module
    when "3"
      navigateTo CourseModules
    when "4"
      navigateTo CourseModules
    when "5"
      navigateTo Student
    when "6"
      navigateTo Student
    when "7"
      navigateTo Student
  end
end
Application.new
end 
```

和`course_modules.rb:`

```
class CourseModulesController < ActionController::Base
# To change this template use File | Settings | File Templates.
@@moduleScheme = nil
@@moduleYear = nil
#@moduleTitle = ""
@noOfModulesInScheme = 0

$schemes = {}
$module_ID = 0
$module_exists = false

def self.moduleYear
  @@moduleYear
end

def initialize(v)
  @val = v
end
# Set and get the @val object value
def set (v)
  @val = v
end
def get
  return @val
end

# Attempt at add_module method on 21/08/2012 at 16:30
def self.add_module
  # schemes = {}
  scheme_exists = false
  add_another_scheme = true
  # module_exists = false
  add_another_module = true

  while add_another_scheme
    print "Enter scheme name: "
    scheme_name = gets
    $schemes.has_key?(scheme_name.chop) ? scheme_exists = true : scheme_exists = false

    if !scheme_exists
      $schemes[scheme_name.chop] = []
      puts "Scheme #{scheme_name.chop} has been added to the system"
    elsif
    scheme_exists == true
      puts "This scheme has already been added"
    end

    while add_another_module
      print "Enter module name: "
      module_name = gets
      $schemes[scheme_name.chop].include?(module_name.chop) ? true : $schemes[scheme_name.chop] << module_name.chop
      # puts "Module #{module_name.chop} has been added to #{scheme_name.chop}"

      # 22/08/2012 at 14:15 Now need to read in each module's unique identifier and year it belongs to
      print "Enter module ID: "
      $module_ID =gets
      $schemes[scheme_name.chop].include?($module_ID.chop) ? true : $schemes[scheme_name.chop] << $module_ID.chop
      $schemes.has_key?($module_ID.chop) ? module_exists = true : module_exists = false

      print "Enter the academic year to which the module belongs: "
      module_year = gets
      $schemes[scheme_name.chop].include?(module_year.chop) ? true : $schemes[scheme_name.chop] << module_year.chop

      if !$module_exists
        $schemes[$module_ID.chop] = []
        puts "Module #{$module_ID.chop} : #{module_name.chop} has been added to #{scheme_name.chop} for the year #{module_year}"
      elsif
      $module_exists == true
        puts "A module with this ID has already been added to the scheme, please check if the module already exists, or choose another ID "
      else
        #  puts "Module #{module_name.chop}, #{module_ID.chop} has been added to #{scheme_name.chop} for the year #{module_year}"
      end

      # puts "Module #{module_name.chop}, #{module_ID.chop} has been added to #{scheme_name.chop}"

      print "Add another module? "
      ask_if_user_wants_to_add_another_module = gets
      if(ask_if_user_wants_to_add_another_module.chop == "y" or ask_if_user_wants_to_add_another_module == "yes")
        add_another_scheme = false
      else if(ask_if_user_wants_to_add_another_module.chop != "y" or ask_if_user_wants_to_add_another_module != "yes")
             Application.main_menu
           end
      end

    end

    print "Add another scheme? "
    ask_if_user_wants_to_add_another_scheme = gets
    if !(ask_if_user_wants_to_add_another_scheme.chop == "y" or ask_if_user_wants_to_add_another_scheme.chop == "yes")
      add_another_scheme = false
    end
    puts $schemes

  end

  while add_another_module
    print "Enter scheme name: "
    scheme_name = gets
    #$schemes.has_key?(scheme_name.chop) ? scheme_exists = true : scheme_exists = false
    scheme_exists = $schemes.has_key? (scheme_name.chop)

    if !scheme_exists
      print "Enter module name: "
      module_name = gets
      $schemes[scheme_name.chop] = module_name.chop
      puts "Scheme #{scheme_name.chop} with module #{module_name} has been added to the system"
    else
      scheme_exists = false
      puts "This scheme has already been added"
      puts "Enter module name: "
      module_name = gets
      $schemes[scheme_name.chop] = module_name.chop
      puts "Scheme #{scheme_name.chop} with module #{module_name} has been added to the system"
    end

    print "Add another module? "
    ask_if_user_wants_to_add_another_module = gets
    if !(ask_if_user_wants_to_add_another_module.chop == "y" or ask_if_user_wants_to_add_another_module.chop == "yes")
      add_another_module = false
    end
  end

  puts $schemes
end
def self.remove_module

  print "Which scheme would you like to remove a module from? "
  scheme_name = gets
  #$schemes.has_key?(scheme_name.chop) ? scheme_exists = true : scheme_exists = false
  scheme_exists = $schemes.has_key? (scheme_name.chop)

  if !scheme_exists
    $schemes[scheme_name.chop] = []
    puts "Scheme #{scheme_name.chop} doesn't exist"
  else
    scheme_exists = true
    puts "Which module would you like to remove from #{scheme_name.chop}?"
    $module_ID = gets
    if !$module_exists
      $schemes[$module_ID.chop] = []
      puts "Module #{$module_ID.chop} : does not exist in #{scheme_name.chop} "
    else
      module_exists = true
      puts "Module #{$module_ID.chop} has been removed from #{scheme_name.chop} "
      #  puts "Module #{module_name.chop}, #{module_ID.chop} has been added to #{scheme_name.chop} for the year #{module_year}"
    end
  end

 end

end 
```

当我浏览到

```
http://localhost:3000 
```

在 Firefox 中，要查看我的网页，我会得到一个显示错误消息的网页：

错误消息说：

```
SyntaxError in ApplicationController#main_menu

(Filepath)/application_controller.rb:1: class/module name must be CONSTANT
class application_controller < ActionController::Base

Rails.root: (Filepath)/CourseManagementSystem 
```

有谁知道为什么我没有显示我的 Web 应用程序的网页？我怎样才能把这个正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T20:05:49.453

```
class application_controller < ActionController::Base 
```

这应该是

```
class ApplicationController < ActionController::Base 
```

`application_controller`是 ruby​​ 中的无效类名。您可以通过运行在 IRB 中简单地测试它

```
➜  ~  irb
irb(main):001:0> class a;end
SyntaxError: (irb):1: class/module name must be CONSTANT
class a;end
    ^
    from /Users/deefour/.rbenv/versions/1.9.3-p125/bin/irb:12:in `<main>' 
```

使用正确命名的类*（`A`而不是`a`）*，就不存在这样的问题

```
➜  ~  irb
irb(main):001:0> class A;end
=> nil
irb(main):002:0> 
```

# python - 如何更新 FigureCanvasTkAgg 的内容

> ID：12124350
> 
> 赞同：14
> 
> 时间：2012-08-25T17:57:10.257
> 
> 标签：python, tkinter, updating, tkinter-canvas

我正在使用 Tkinter FigureCanvasTkagg 绘制一些数据`matplotlib`。当按下按钮时，我需要清除绘制数据并绘制新数据的图形。

这是代码的绘图部分（之前定义了一个 App 类）：

```
 self.fig = figure()
    self.ax = self.fig.add_subplot(111)
    self.ax.set_ylim( min(y), max(y) )      

    self.line, = self.ax.semilogx(x, y, '.-')   #tuple of a single element
    self.canvas = FigureCanvasTkAgg(self.fig, master=master)
    self.ax.semilogx(x, y, 'o-')
    self.canvas.show()
    self.canvas.get_tk_widget().pack(side='top', fill='both', expand=1)
    self.frame.pack() 
```

如何更新此类画布的内容？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-29T22:52:51.523

```
#call the clear method on your axes
self.ax.clear()

#plot the new data
self.ax.set_ylim(min(newy), max(newy))
self.ax.semilogx(newx, newy, 'o-')

#call the draw method on your canvas
self.canvas.draw() 
```

希望这可以帮助

# c# - 如何获取 Active Directory 用户列表（仅显示在 Windows 登录屏幕中的用户）

> ID：12124353
> 
> 赞同：0
> 
> 时间：2012-08-25T17:57:44.513
> 
> 标签：c#, active-directory, wmi, wmi-query, windows-principal

如何获取 Active Directory 用户列表（仅显示在 Windows 登录屏幕中的用户）

我尝试了许多使用 Windows Principle 库和 WMI Select 命令的方法。我不断收到管理员、访客和其他一些 VUSRNEIL-DELL。这 3 个用户帐户都不会出现在登录屏幕上。如何区分这些用户类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:40:22.247

```
//Add a reference on System.DirectoryServices.dll
    using System.DirectoryServices;    
    //Connect to your LDAP
    DirectoryEntry Ldap = new DirectoryEntry("LDAP://ADName", "Login", "Password");
    DirectorySearcher searcher = new DirectorySearcher(Ldap);
    //specify that you search user only by filtering AD objects
    searcher.Filter = "(objectClass=user)";
    //Loop on each users
     foreach( SearchResult result in searcher.FindAll() )
        {
           // On récupère l'entrée trouvée lors de la recherche
           DirectoryEntry DirEntry = result.GetDirectoryEntry();

           //On peut maintenant afficher les informations désirées
           Console.WriteLine("Login : " + DirEntry.Properties["SAMAccountName"].Value);
           Console.WriteLine("FirstName: " + DirEntry.Properties["sn"].Value);
           Console.WriteLine("LastName: " + DirEntry.Properties["givenName"].Value);
           Console.WriteLine("Email : " + DirEntry.Properties["mail"].Value);
           Console.WriteLine("Phone: " + DirEntry.Properties["TelephoneNumber"].Value);
           Console.WriteLine("Description : " + DirEntry.Properties["description"].Value);

           Console.WriteLine("-------------------");
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T23:28:10.447

检查当前登录用户的**Win32_LogonSession**和**Win32_LoggedOnUser**类（其中 Win32_LogonSession.LogonType='2'），然后您可以将其关联回**Win32_Account**类；）

# ruby-on-rails - Rails 嵌套资源错误

> ID：12124354
> 
> 赞同：0
> 
> 时间：2012-08-25T17:57:45.567
> 
> 标签：ruby-on-rails

我有这个嵌套的资源

```
 resources :products do
     resources :senders
  end 
```

在我的产品/索引视图中，我有这个

```
...
..
.
<td><%= link_to 'Show Email Addresses', product_senders_path(product) %> </td>
.
..
... 
```

这似乎有效，并将我重定向到该产品的发件人。现在出于某种奇怪的原因，我得到了这个：

```
 NameError in Senders#index

undefined local variable or method `sender_path' for #<#<Class:0x00000003cb1f58>:0x00000003b46e48>

Extracted source (around line #18):

15:     <td><%= sender.product_id %></td>
16:     <td><%= sender.name %></td>
17:     <td><%= sender.email %></td>
18:     <td><%= link_to 'Show', sender %></td>
19:     <td><%= link_to 'Edit', edit_sender_path(sender) %></td>
20:     <td><%= link_to 'Destroy', sender, confirm: 'Are you sure?', method: :delete %></td>
21:   </tr> 
```

这是我的发件人/索引文件：

```
<h1>Listing senders</h1>

<table>
  <tr>
    <th>Application</th>
    <th>Name</th>
    <th>Email</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @senders.each do |sender| %>
  <tr>
    <td><%= sender.product_id %></td>
    <td><%= sender.name %></td>
    <td><%= sender.email %></td>
    <td><%= link_to 'Show', sender %></td>
    <td><%= link_to 'Edit', edit_sender_path(sender) %></td>
    <td><%= link_to 'Destroy', sender, confirm: 'Are you sure?', method: :delete %></td>
  </tr>
<% end %>
</table>

<br /> 
```

为什么我收到此错误？在它工作正常之前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T18:18:56.160

由于发件人只有嵌套路由，因此没有`edit_sender_path(sender)`助手，只有`edit_product_sender_path(product, sender)`

您可以通过执行查看所有应用程序路由助手的列表`rake routes`

# android - 如何强制使用 Android 设置中未列出的应用语言？

> ID：12124362
> 
> 赞同：2
> 
> 时间：2012-08-25T17:59:31.983
> 
> 标签：android, android-resources

我有一个已经支持多种语言的免费开源应用程序。为了测试语言，我切换了手机的设置 | 语言，一切正常。

有时我会收到一些人的请求，他们希望将应用程序翻译成我自己的设备（CM 7.1 或 US Nexus 7）上未列出的语言。例如，最后一个是阿尔巴尼亚语。我假设语言代码是“sq”，所以我可以使用他们提供的翻译创建 res/values-sq，但我如何在自己的手机上对其进行测试？

有没有办法强制我的应用使用特定的语言代码（例如“sq”），即使它没有在我的手机设置中列出？

澄清一下，我不想重新发明语言切换，只是为了影响资源选择器使用 res/values-sq。

如果重要，应用程序使用 android:minSdkVersion="8"。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T18:05:15.970

您的电话供应商选择不包含阿尔巴尼亚语区域设置，因此很遗憾您将无法选择它。这通常是特定于供应商的，并且很大程度上取决于您的位置。例如，三星不会在用于在美国销售的手机的 Android 版本中包含阿尔巴尼亚语区域设置。

至于强制您的应用程序直接选择您的语言环境之一，这是不可行的。您可以做的最好的事情（如果您想测试您的资源）将重新创建项目并删除所有其他资源并保留阿尔巴尼亚语特定的资源。系统将“被迫”使用它们。

# jquery - inArray mongoose ObjectID

> ID：12124364
> 
> 赞同：1
> 
> 时间：2012-08-25T17:59:48.373
> 
> 标签：jquery, node.js, mongoose

我有这个模型：

```
var HuntGroupSchema = new Schema({
    name        : { type: String, required: true }
    ,domain     : { type: ObjectId, required: true, ref: 'Domain' }
    ,members    : [{ type: ObjectId, ref: 'User'}]
    ,email      : { type: String, unique: true}
    ,pin        : { type: Number, default: 0}
    ,extension  : { type: Number, required: true}
    ,timescheme : { type: ObjectId, ref: 'TimeScheme'}
    ,ddi        : { type: String}
}); 
```

并拥有这些数据

```
db.huntgroups.find()
{ "_id" : ObjectId("50373487947749f0370000b0"), "ddi" : "01376xxxxxx", "domain" :      ObjectId("502807e9b9e737036d000018"), "email" : "julian@dotr.com", "extension" : 3001,     "members" : [ ObjectId("50376767b5c99cd862000003") ], "name" : "test22", "pin" : 1234 } 
```

这个测试总是返回 -1

```
// req.params['member'] === '50376767b5c99cd862000003'
var member_id = mongoose.Types.ObjectId(req.params['member']);

console.log($.inArray(member_id, huntgroup.members)); 
```

谁能告诉我为什么？

警告：我是 mongoose、jquery 和 javascript 的新手，所以要温柔；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T18:49:35.457

这是因为`$.inArray`仅检查 ObjectId 对象上的引用相等性。

要比较ObectIds的*值*`equals`，您需要通过执行以下操作来使用运算符`ObjectId`：

```
huntgroup.members.forEach(function(member) {
    if (member.equals(member_id)) {
        // Yes, member_id is contained in the array
    }
}); 
```

# android - 获取filenotfound异常android写入SD卡

> ID：12124369
> 
> 赞同：-1
> 
> 时间：2012-08-25T18:00:38.990
> 
> 标签：android, sd-card, filenotfoundexception

我想在 sd 卡中创建一个文件并将我的图像从资源中放入其中。但问题是我在这一行中遇到异常：

```
 OutputStream out = new FileOutputStream(newFile); 
```

这是我调用按钮单击和日志猫的方法

```
 private void openSaveDialog(){try {
             String dirName = "/sdcard/ABCD"; 

            File newFile = new File(dirName); 
            newFile.mkdir(); 
            String str ="android.resource://com.sample.projectnew/"+ID ;

            // convert String into InputStream
            InputStream in = new ByteArrayInputStream(str.getBytes());

            OutputStream out = new FileOutputStream(newFile);

                    copyFile(in, out);
                    in.close();
                    in = null;
                    out.flush();
                    out.close();
                    out = null;
                    Toast.makeText(GActivity.this,"Your image is saved to this folder",Toast.LENGTH_LONG)
                            .show();
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            Toast.makeText(GActivity.this,
                    "Your got exception", Toast.LENGTH_LONG)
                    .show();
            e.printStackTrace();
        } }

    private void copyFile(InputStream in, OutputStream out) throws IOException {
    byte[] buffer = new byte[1024];
    int read;
    while((read = in.read(buffer)) != -1){
        out.write(buffer, 0, read);
    }
} 
```

**日志猫在这里：**

```
 08-25 23:00:57.949: W/System.err(9190): **java.io.FileNotFoundException: /sdcard/ABCD (Is a directory)**
08-25 23:00:57.949: W/System.err(9190):     at org.apache.harmony.luni.platform.OSFileSystem.open(Native Method)
08-25 23:00:57.949: W/System.err(9190):     at dalvik.system.BlockGuard$WrappedFileSystem.open(BlockGuard.java:232)
08-25 23:00:57.949: W/System.err(9190):     at java.io.FileOutputStream.<init>(FileOutputStream.java:94)
08-25 23:00:57.949: W/System.err(9190):     at java.io.FileOutputStream.<init>(FileOutputStream.java:66) 
```

请指教我哪里错了？？？并给我解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T18:07:03.120

您正在尝试写入目录。尝试这样的事情：

`OutputStream out = new FileOutputStream(new File(newFile, "filename"));`

# arrays - 如何在 Actionscript 中定义 Java 的 Object[] someObject=new Object[10]

> ID：12124371
> 
> 赞同：-1
> 
> 时间：2012-08-25T18:00:50.603
> 
> 标签：arrays, actionscript

我有一个名为 Component 的类，它有这样的代码

```
class Component {

var ID:String;
var typical:String;
var connection:String;
var temperature:String;
var voltage:String;

var visibility:Boolean = true;

public function Component(type:String, temperature:String, connection:String,        voltage:String) {

    this.typical = type;
    this.temperature = temperature;
    this.connection = connection;
    this.voltage = voltage;

}

public function setVisibility(b:Boolean):Void {

    visibility = b;

}

} 
```

我想创建这个类的数组实例，就像在 java 中一样（如 Component[] someComponent = new Component[10]） 我如何定义这是 Actionscript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:49:05.953

感谢你的回答。我发现了一些可能是另一个例子的东西。只需定义一个数组

```
var myArray:Array=new Array(); 
```

之后将数组的每个元素定义为另一个对象，例如

```
myArray[0]=new Component(); //Here Component is the class which I defined and showed in my original question. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T18:54:34.127

在 Flash Player 10 中，Adobe 添加了[Vector](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Vector.html)类。这是您正在寻找的类型化数组。您可以制作这样的矢量：

```
private var vector:Vector.<SomeComponent> = new Vector.<SomeComponent>(10);
private var anotherOne:Vector.<Number> = new Vector.<Number>; 
```

# linux - 使用 CUDA 4.2 和驱动程序 295.41 的非常有趣的行为

> ID：12124377
> 
> 赞同：0
> 
> 时间：2012-08-25T18:01:55.550
> 
> 标签：linux, cuda, driver, gpgpu

在 Linux 上使用 CUDA 4.2 和驱动程序 295.41 时，我目睹了一个非常有趣的行为。代码本身无非就是找到一个随机矩阵的最大值并将位置标记为 1。

```
#include <stdio.h>
#include <stdlib.h>

const int MAX = 8;

static __global__ void position(int* d, int len) {
    int idx = threadIdx.x + blockIdx.x*blockDim.x;
    if (idx < len) 
        d[idx] = (d[idx] == MAX) ? 1 : 0;
}

int main(int argc, const char** argv) {
    int colNum = 16*512, rowNum = 1024;
    int len = rowNum * colNum;

    int* h = (int*)malloc(len*sizeof(int));
    int* d = NULL;
    cudaMalloc((void**)&d, len*sizeof(int));

    // get a random matrix
    for (int i = 0; i < len; i++) {
        h[i] = rand()%(MAX+1);
    }   

    // launch kernel
    int threads = 128;
    cudaMemcpy(d, h, len*sizeof(int), cudaMemcpyHostToDevice);
    position<<<(len-1)/threads+1, threads>>>(d, len);
    cudaMemcpy(h, d, len*sizeof(int), cudaMemcpyDeviceToHost);

    cudaFree(d);
    free(h);
    return 0;
} 
```

当我设置 rowNum = 1024 时，代码根本不起作用，就好像内核从未启动过一样。如果 rowNum = 1023，一切正常。

并且这个 rowNum 值与块大小（在本例中为 128）以某种方式卷积，如果我将块大小更改为 512，则行为发生在 rowNum = 4095 和 4096 之间。

我不太确定这是一个错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:36:30.860

调用 CUDA 函数后，您应该*始终*检查错误。例如，在您的代码中，`invalid configuration argument`错误发生在内核启动期间。

这通常意味着网格或块尺寸无效。

当`colNum = 16*512, rowNum = 1024`您尝试运行 65536 个块 x 128 个线程时，超过了最大网格尺寸（对于具有计算能力 1.x 和 2.x 的 GPU，它是 65535 个块，不确定 3.x）。

如果您需要运行更多线程，您可以增加块大小（您已经尝试过并且它产生了一些效果）或使用 2D/3D 网格（3D 仅适用于具有 2.0 或更高计算能力的设备）。

# java - 我无法纠正的java代码

> ID：12124378
> 
> 赞同：0
> 
> 时间：2012-08-25T18:02:16.027
> 
> 标签：java

我为我正在从事的项目编写了这个 java 代码。我已经尽我所能，但仍然无法让它工作，所以我想我会在这里尝试。

该程序应该使用 a`JOptionPane`来询问用户他想看到的城市之间的里程距离。这些数字来自 .txt 文件。

我总是收到找不到“j”的错误。

```
import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Scanner;
import javax.swing.JOptionPane;

public class Mileage
{
    public static void main(String[] paramArrayOfString)
    throws IOException
    {
        String str3 = "";

        Scanner localScanner = new Scanner(new File(JOptionPane.showInputDialog("Enter the name of the data file.")));

        String str1 = localScanner.nextLine() + " Cities:\n\n";

        int i = localScanner.nextInt();

        ArrayList localArrayList = new ArrayList(i);

        int[][] arrayOfInt = new int[i][i];
        for (int j = 0; j < i; j++)
        {
            localScanner.nextLine();
            localArrayList.add(localScanner.nextLine());
            for (int k = 0; k < i; k++) 
            {

                arrayOfInt[j][k] = localScanner.nextInt();
            }
        }
        j = 1 ;
        for (String str4 : localArrayList)
        {
            str1 = str1 + j++ + ". " + str4 + "\n"; str1 = str1 + "\nEnter from and to cities for mileage, \"Quit\" or \"quit\" to quit.";
            String str2;
        }
        do 
        {
            str2 = JOptionPane.showInputDialog(str3 + str1);
            if (str2.equalsIgnoreCase("quit"))
            {
                continue;
            }
            localScanner = new Scanner(str2);
            int m = localScanner.nextInt();
            int n = localScanner.nextInt();
            if ((m < 1) || (m > i) || (n < 1) || (n > i))
                str3 = "Invalid values, try again.\n\n";
            else {
                str3 = "The distance between " + (String)localArrayList.get(m - 1) + " and " + (String)localArrayList.get(n - 1) + " is " + arrayOfInt[(m - 1)][(n - 1)] + " miles.\n\n";
            }
        }

        while (!str2.equalsIgnoreCase("quit"));
    }
} 
```

这是我尝试过的另一种形式，几乎没有什么不同，但都有相同的错误：

```
import java.io.File;
import java.io.IOException;
import java.io.PrintStream;
import java.util.ArrayList;
import java.util.Scanner;
import javax.swing.JOptionPane;

public class MileageTest
{
    public static void main(String[] paramArrayOfString)
    throws IOException
    {
        String str5 = "";

        String str1 = JOptionPane.showInputDialog("Enter the name of the data file.");
        Scanner localScanner = new Scanner(new File(str1));

        String str2 = localScanner.nextLine();

        int i = localScanner.nextInt();

        ArrayList localArrayList = new ArrayList(i);

        int[][] arrayOfInt = new int[i][i];
        for (int j = 0; j < i; j++)
        {
            localScanner.nextLine();
            localArrayList.add(localScanner.nextLine());
            for (int k = 0; k < i; k++) 
            {
                arrayOfInt[j][k] = localScanner.nextInt();
            }
        }
        String str3 = str2 + " Cities:\n\n";
        j = 1;
        for (String str6 : localArrayList)
            str3 = str3 + j++ + ". " + str6 + "\n"; 
            str3 = str3 + "\nEnter from and to cities for mileage, \"Quit\" or \"quit\" to quit.";
            String str4;
        do {
            str4 = JOptionPane.showInputDialog(str5 + str3);
            if (str4.equalsIgnoreCase("quit"))
                continue;
            localScanner = new Scanner(str4);
            int m = localScanner.nextInt();
            int n = localScanner.nextInt();
            if ((m < 1) || (m > i) || (n < 1) || (n > i))
                str5 = "Invalid values, try again.\n\n";
            else 
            {
                str5 = "The distance between " + (String)localArrayList.get(m - 1) + " and " + (String)localArrayList.get(n - 1) + " is " + arrayOfInt[(m - 1)][(n - 1)] + " miles.\n\n";
            }
        }

        while (!str4.equalsIgnoreCase("quit"));
        test();
    }

   private static void test()
   {
        System.out.println("Testing...");
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T18:04:11.657

```
 for (int j = 0; j < i; j++)
    {
        localScanner.nextLine();
        localArrayList.add(localScanner.nextLine());
        for (int k = 0; k < i; k++) 
        {

            arrayOfInt[j][k] = localScanner.nextInt();
        }
    }
    j = 1 ; <--- THIS IS THE PROBLEM. j does not exist at this scope. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T18:04:00.470

在您的代码的两个版本中，您都`j`在`for`语句中声明变量：

```
for (int j = 0; j < i; j++) 
```

当您`j`以这种方式声明时，它的范围仅限于`for`循环，并且在循环外无法使用。但是你试图在循环之外使用它。

`j`如果您想在该循环之后继续使用，请在`for`循环外声明它：

```
int j = 0;
for (j = 0; j < i; j++) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T18:04:54.993

在第一个片段中， j 变量在 for 循环中声明，这意味着它是 for 循环的本地变量。从外面看不到。只需在 for 循环之前声明它：

```
int j = 0; 
```

接着

```
for (j = 0; j < i; j++) 
```

第二段代码也是如此。

# php - 在显示之前加载 swf

> ID：12124380
> 
> 赞同：0
> 
> 时间：2012-08-25T18:02:33.730
> 
> 标签：php, javascript, flash

基本上，我有一个设置为在按下按钮后播放 10 秒的 swf 文件。当 swf 应该弹出时，它会在 swf 加载时显示白屏。我想消除这一点。这是我现在使用的 javascript，用于在按钮按下 10 秒后显示 swf：

```
<script type="text/javascript">
    function flash() {
 $('#stage').html('<OBJECT style="z-index:2; position:absolute; top:20%; left:15%;" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0" WIDTH="90%" HEIGHT="70%" id="rice" ALIGN=""><PARAM NAME=movie VALUE="rice.swf"><PARAM NAME=quality VALUE=low><EMBED src="rice.swf" quality=low bgcolor=#EEEEEE WIDTH="90%" HEIGHT="90%" NAME="rice" ALIGN="" TYPE="application/x-shockwave-flash" PLUGINSPAGE="http://www.macromedia.com/go/getflashplayer"></EMBED> </OBJECT>');
}
</script> 
```

我正在使用 setTimout 等待时间。这行得通，但正如我所说，它显示白色（嗯，我将 bgcolor 更改为 EEEEEE 以便该颜色）“加载”屏幕。我尝试将“display:none”放在 div、object 标记和 swf 所在的 embed 标记中，然后在按下按钮时使用 javascript 函数将“display:none”更改为“display:block” . 我知道 JS 函数有效，因为我将它用于页面上的其他元素。这是那个JS：

```
<script type="text/javascript">
    function showStuff(id) {
        document.getElementById(id).style.display = 'block';
}
</script> 
```

如果我要这样做（隐藏然后显示 swf），我需要停止它的声音。我不需要在 swf 隐藏时暂停它，因为它是一个 0.5 秒的短循环动画。我希望有人能帮忙，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:10:19.297

您应该使用[jquery](http://jquery.com/)库来访问 show() 和 hide() 函数:) 像这样......

```
function showStuff(id) {
     $('#' + id).show();
} 
```

还...在文档准备好时隐藏它...

```
$(document).ready(function(){ 
    $('#YourId').hide(); 
}); 
```

至于停止声音，你应该去这里： [Stop music from in flash from javascript event](https://stackoverflow.com/questions/706753/stop-music-from-in-flash-from-javascript-event)

希望这有帮助:)

# iphone - 显示在 UITabBarController 的控制器列表中不存在的 UIViewController

> ID：12124381
> 
> 赞同：0
> 
> 时间：2012-08-25T18:02:41.890
> 
> 标签：iphone, ios, uitabbarcontroller

让我举个例子，我想做什么：我有一个有 4 个 TabBarItems 的选项卡，所以它包含 4 个控制器。并且有一个控制器不能显示在标签栏的图标中，但是当触摸这 4 个控制器之一内的按钮时，它会显示。因此，当它显示时，选项卡栏不能有任何选定的选项卡，必须取消选择每个项目。它必须像一个不在选项卡图标中显示的幽灵控制器，但它实际上是一个位于选项卡栏控制器中的控制器。

实现这一目标的最佳方法是什么？仅供参考，我不想要模式对话框，标签栏必须始终在下方可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T18:23:11.460

可能有帮助的一件事是知道选项卡之间的转换何时发生。如果您在转换发生时立即显示您的幻影视图，您可能有足够的控制权来做您想做的事情。

我是这样做的：首先，将 UITabBarController 子类化为 TabViewController（例如）。在您的 TabViewController 中，包含此方法：

```
// Pass this message on to views so they know when transitions are occuring
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController {

    UIViewController <UITabBarControllerDelegate> *obj;

    for ( obj in self.viewControllers ) {
        if ( [obj respondsToSelector:_cmd] ) {
            [obj tabBarController:tabBarController didSelectViewController:viewController];
        }
    }
} 
```

将每个选项卡式视图类设置为采用 UITabBarControllerDelegate 协议。然后，在每个类中包含这样的方法来“拦截”转换事件：

```
// This is called when a transition between tabs happens
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController {

    if ( [viewController isEqual:self] ) {
        // Transitioning to me

        // Do stuff
   }    

    else  {
        // Transitioning to someone else

        // Do stuff
    }
} 
```

（注意：可能有更清洁的方法来实现这一点，但它对我来说一直很好......）

# python - qgraphicsview 上的声子视频小部件

> ID：12124382
> 
> 赞同：1
> 
> 时间：2012-08-25T18:02:44.360
> 
> 标签：python, qt, pyside, phonon, qgraphicsscene

我想在 qgraphicsscene 上放置一个声子视频小部件，以便我可以覆盖图形等。当我运行以下命令时，我得到了声音，但 qgraphicsview 上没有视频播放。帮助将不胜感激，因为我认为我正在做的例子显示。但是，我怀疑这与我对 videoplayer 和 videowidget 的理解有关。

为了测试，我只是直接从文件中播放视频。

```
from PySide import QtGui, QtCore
from PySide.phonon import Phonon
from window import Ui_MainWindow # main GUI window
import os, sys

class DiagramScene(QtGui.QGraphicsScene):
    InsertItem, InsertLine, InsertText, MoveItem  = range(4)

    def __init__(self):
        super(DiagramScene, self).__init__()
        self.myLineColor = QtCore.Qt.black
        self.myMode = "Start"
        self.line = None

    def mousePressEvent(self, mouseEvent):
        if (mouseEvent.button() == QtCore.Qt.LeftButton):
            if self.myMode == "Start":
                self.line = QtGui.QGraphicsLineItem(QtCore.QLineF(mouseEvent.scenePos(), mouseEvent.scenePos()))
                self.addItem(self.line)
        elif (mouseEvent.button() == QtCore.Qt.RightButton):
            self.addText("Hello")
        super(DiagramScene, self).mousePressEvent(mouseEvent)

    def mouseMoveEvent(self, mouseEvent):
        if self.line:
            newLine = QtCore.QLineF(self.line.line().p1(), mouseEvent.scenePos())
            self.line.setLine(newLine)

    def mouseReleaseEvent(self, mouseEvent):
        self.line = None
        super(DiagramScene, self).mouseReleaseEvent(mouseEvent)

class QPlayer(QtGui.QWidget):

    def __init__(self):
        super(QPlayer, self).__init__()
        media_src = Phonon.MediaSource("C:\Users\Public\Videos\Sample Videos\Wildlife.wmv")
        self.audioOuptut=Phonon.AudioOutput(Phonon.MusicCategory, self)
        self.player=Phonon.MediaObject(self)
        self.player.setCurrentSource(media_src)
        Phonon.createPath(self.player, self.audioOuptut)
        self.videoWidget=Phonon.VideoWidget(self)
        self.videoWidget.FitInView
        Phonon.createPath(self.player, self.videoWidget)
        self.player.play()

class Main(QtGui.QMainWindow):
    def __init__(self):
        super(Main, self).__init__()
        self.ui=Ui_MainWindow()
        self.ui.setupUi(self)
        self.scene = DiagramScene()
        self.scene.addWidget(QPlayer())
        self.gview = self.ui.gView
        self.gview.setScene(self.scene)

def main():
    app = QtGui.QApplication(sys.argv)
    window=Main()
    window.show()
    sys.exit(app.exec_())

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T17:02:53.590

好的 - 认为我已经对它进行了排序（在一定程度上）。简单案例：

```
self.videoWidget.setMinimumSize(640,480) 
```

视频运行得不太好——经常中断，但至少我可以借鉴它:)

# javascript - JavaScript 中的原型继承：我通常不需要调用分配给 Child.prototype 的 Parent 对象的构造函数

> ID：12124389
> 
> 赞同：5
> 
> 时间：2012-08-25T18:04:14.993
> 
> 标签：javascript, coding-style, constructor, prototype, prototypal-inheritance

我对 JavaScript 并不陌生，但我永远无法理解关于它的原型继承的某些事情。

假设我们有父子“类”（创建对象的父子函数）。为了能够创建孩子，我们首先需要

```
Child.prototype = new Parent(); 
```

困难在于：通过将原型分配给 Child，我们又得到了一个对象 Parent，它在我们的代码中不做任何事情，只是与 Children 共享它的属性。**但是仍然调用了 Parent 的构造函数！**例如，如果 parent 表示某个 UI 对象，那么在我们的应用程序中，**我们将拥有另外一个我们实际上并不想创建的对象！**当然，这可能并且将会影响我们应用程序的状态。

我看到了一种解决方法：将某些参数传递给 Parent 构造函数，表明我们正在创建的对象仅用于原型，而不是一般用途，例如：

```
RedButton.prototype = new Button(FOR_PROTO_ONLY); 
```

然后在 Parent 构造函数中决定是否做任何可显示的东西。但这是一个丑陋的解决方法！

在面向类的语言中，例如Java，我们根本没有这样的问题，因为继承并不假设调用任何额外的函数。我应该怎么做才能不在我的程序中使用这些丑陋的技术，并且仍然能够创建一个漂亮的原型层次结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T21:23:29.007

您可以做的一件事是在构造函数中将父实例分配给它的原型属性。这意味着您不必创建无关的父实例，因此可以缓解您提到的问题，您最终可能会定义一个额外的 GUI 组件。但是，这确实意味着在实例化子实例之前必须至少有一个父实例，因此仅此一项就将其用途限制在非常特定的情况下。

这是一个例子：http: [//jsfiddle.net/xwwWZ/](http://jsfiddle.net/xwwWZ/)

```
var Child = function() {

    this.throwATantrum = function() {

        alert("Waaaaaaaaaah");

    }
};

var Parent = function() {

    // Set the prototype here to avoid having to create an extra instance elsewhere.
    Parent.prototype = this;

    this.sayHello = function() {

        alert("Hello!");

    }
};

// We must, however, instantiate an instance of the parent before we can
// instantiate an instance of a child.
var p = new Parent();

Child.prototype = Parent.prototype;

var c = new Child();

c.throwATantrum();
c.sayHello(); 
```

# c - 为什么我不能将指向 char 缓冲区的指针传递给带有参数 char** 的函数

> ID：12124394
> 
> 赞同：4
> 
> 时间：2012-08-25T18:05:04.637
> 
> 标签：c, pointers

如果我有一个功能：

```
void myfunction(char** s); 
```

然后我可以像这样传递一个 char* ：

```
char* s = malloc(100);
myfunction(&s); 
```

但是我的编译器不允许我这样做：

```
char s[100] = {0};
myfunction(&s); 
```

我认为编译器应该允许指向缓冲区的指针。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T18:07:24.193

您的函数需要一个指向*指针*( `char **`) 的指针。您试图将指针传递给*数组*而不是 ( `char (*)[100]`)。为什么你期望这“被编译器允许”？数组不是指针。数组和指针是性质完全不同的对象。指向指针的指针与指向数组的指针无论如何都不兼容。您不能互换使用它们。

如果您希望将基于数组的缓冲区与期望的函数一起使用`char **`，则必须先显式创建指向该缓冲区的指针

```
char s[100] = {0};
char *ps = s; 
```

然后像以前一样传递一个指向该指针的指针

```
myfunction(&ps); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T19:05:29.520

```
#include <stdio.h>
#include <stdlib.h>
void myfunction(char* s[]){
    printf("Here: %s",s);
}
int main(){
    char s[100] = {'a'};
    //char s[100] = "myString";
    myfunction(&s);
} 
```

这适用于 Windows 不确定在 linux 上

# c++ - 已被移出的 xvalue 究竟需要什么？

> ID：12124395
> 
> 赞同：1
> 
> 时间：2012-08-25T18:05:08.957
> 
> 标签：c++, c++11, move-semantics

> **可能重复：**
> [在 C++11 中，什么构成了“已移出”对象的有效状态？](https://stackoverflow.com/questions/12095048/what-constitutes-a-valid-state-for-a-moved-from-object-in-c11)

考虑这样的事情：

```
class Foo {};  
std::vector<Foo> v( 5 ); 
```

这样做是否合法：

```
v.front() = std::move( v.back() ); 
```

前提是我之后做这样的事情：

```
v.pop_back(); 
```

更准确地说，我想知道经过`std::move()`语义的 xvalue 需要什么。
我知道它需要是可破坏的（显然）。但还有别的吗？假设我会调用或其他一些函数，它可能会在幕后`std::vector::insert()`对 ed 值进行一些复制/移动。 这仍然合法吗？ `std::move()`

在我的真实情况下，我有`std::vector<std::vector<Foo>>`并且用它做一些事情。
但我不知道从外部仍然使用的`std::move()`a是否合法。`std::vector``std::vector`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T18:12:41.430

是的，这是有效的：您始终可以销毁已移动的对象。（我找不到 C++ 语言标准中指定的位置或是否指定，但如果无法销毁移动的对象，我相信我们都会认为这是一个错误。）因为您的代码只有销毁移动的对象，您的代码很好。

标准库对移出对象的状态施加了额外的要求，并且任何用于实例化标准库组件的类型都必须遵循这些额外的规则。要点是，对一个类型的非移动对象有效的移动和复制操作也必须对该类型的移动对象有效。因此，例如，在移动最后一个元素后，您可以为该元素分配一个新值： `v.back() = Foo();`。

# javascript - CSS3 多列布局：如何设置特定列的样式

> ID：12124397
> 
> 赞同：4
> 
> 时间：2012-08-25T18:05:27.710
> 
> 标签：javascript, jquery, css, css3pie

我想要`**bold**`CSS 多列布局中的第一列

```
<div style="columns:12em">Lorem ipsum dolor sit amet, consectetur adipisicing elit, 
sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, 
quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. 
Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat 
nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa 
qui officia deserunt mollit anim id est laborum</div> 
```

是否可以？

**编辑：** 因为这个问题会回答我的问题和海报问题，所以我想我会用我的问题来扩展这个问题......

**问：** 是否可以通过 javascript/jquery 知道该列在哪个字符处被拆分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T18:13:06.657

虽然有点短，但答案是“不”——至少，W3C 的官方[规范](http://www.w3.org/TR/css3-multicol/)中没有任何内容表明这是可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T18:19:03.463

尽管您的问题的答案是“否”，但问题仍然是您为什么要这样做？也许将文本的第一段加粗就足够了？这通常在杂志等中完成，并且很容易实现。

# bitmap - Android - 相机问题

> ID：12124401
> 
> 赞同：0
> 
> 时间：2012-08-25T18:05:39.203
> 
> 标签：bitmap, android-camera

我正在尝试拍摄照片并将其显示在图像视图中。

```
 public class next extends Activity{

         public void onCreate(Bundle savedInstanceState) {
                 super.onCreate(savedInstanceState);
                 setContentView(R.layout.next);         Button cbutton = (Button) findViewById(R.id.capture); /* Capture Photo */
                    cbutton.setOnClickListener(new OnClickListener() {

                public void onClick(View v)         { 
                        Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                        startActivityForResult(intent,0);       }       });

             }
         @Override  
public void startActivityForResult(Intent intent, int requestCode) {        
ImageView iv
         = (ImageView) findViewById(R.id.imageView1);   
        if(requestCode == 0)        
    {       Bitmap theImage = (Bitmap) data.getExtras().get("data");
            iv.setImageBitmap(theImage);        
}}} 
```

所以这是我用过的代码。现在的问题是我在“数据”下得到了红线

```
Bitmap theImage = (Bitmap) ***data***.getExtras().get("data"); 
```

而且我不知道原因，谁能解释我做错了什么或解决我的问题的任何其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T18:43:06.370

Variable `data` is neither declared no passed as parameter to your method, therefor it's marked red.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T19:46:59.683

这段代码的问题是我覆盖了错误的方法：

```
public void startActivityForResult(Intent intent, int requestCode) {        
ImageView iv
         = (ImageView) findViewById(R.id.imageView1);   
        if(requestCode == 0)        
    {       Bitmap theImage = (Bitmap) data.getExtras().get("data");
            iv.setImageBitmap(theImage);        
}} 
```

因为当结果来自它通过以下方法显示的活动时：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        //ImageView iv = (ImageView) findViewById(R.id.imageView1);
        if(requestCode == 1)
        {

        Bitmap theImage = (Bitmap) data.getExtras().get("data");

                iv.setImageBitmap(theImage);
        } 
```

而已 ：）

```
 } 
```

# facebook - 用于多标签的 Facebook 应用程序

> ID：12124404
> 
> 赞同：0
> 
> 时间：2012-08-25T18:05:45.160
> 
> 标签：facebook

我有一个适用于 Facebook 的电子商务应用程序。

我的想法是我想在粉丝页面中有 2 个选项卡来加载电子商务应用程序，一个用于男士服装的应用程序，另一个用于女士服装的应用程序。

问题是我无法区分选项卡，我看到的唯一可能的解决方案是创建两个不同的 facebook 应用程序，问题是如果用户想要查看两个选项卡必须两次接受该应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:33:18.040

正确，相同的应用程序不能作为选项卡在同一页面上安装两次。

一种可能的解决方法是让一个或两个选项卡成为具有大部分静态内容的基本应用程序，并将其重定向到实际商店

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T21:21:03.090

您还可以获取 1 .first 页面签名请求 2\. 然后使用图形 api 获取用户性别并显示数据。

# c - 算法允许跟踪具有特定模式的单词后两个单词出现的单词

> ID：12124406
> 
> 赞同：2
> 
> 时间：2012-08-25T18:06:16.087
> 
> 标签：c, algorithm, pseudocode

我非常感谢对该算法/伪代码的帮助。

基本上我正在寻找具有特定模式的单词（没关系）。我有一个特殊的函数来确定它，如果单词满足要求，它返回 1。如果这样做，则应省略其后的第二个单词并且不保存在输出中。当“选择的”单词被一个“未选择的”单词分隔时，我对此没有任何问题。问题是 - 当“选择的”一个接一个出现时该怎么办？

我准备了这样一个伪代码来稍微澄清一下情况。但不幸的是，它不适用于“选择”和“未选择”的所有组合。

我介绍了三个计数器/变量，帮助我发现我目前所处的位置。

以下伪代码不符合逻辑顺序！

```
if (counter == 2 || in_a_row >= 3) {
    erase = 1;
    counter--;
    yes = 0;
    if (!chosen) 
        counter = 0;
}
if (chosen) {
    counter++;
    yes = 1;
    in_a_row++;
} else {
    if (yes = 1) /* yes - is used when the preceeding word is chosen and the next is not chosen, in order to keep track of the counter */
        counter++;
}
if (in_a_row == 5)
    in_a_row = 4; /* just to make sure that counter doesn't go too high */
if (erase == 1)
    /*erasing procedure*/ 
```

如果您有一个更简单的想法，或者发现其中有错误，请帮助我。尝试了8个小时...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:32:00.260

听起来像是正则表达式的经典用法。您没有指定语言，但许多语言都支持 RegEx。

如果您不熟悉 RegEx，以下站点是一个很好的起点/参考。[http://www.regular-expressions.info/quickstart.html](http://www.regular-expressions.info/quickstart.html)

您将使用由三个部分组成的表达式。以下语法来自内存，因此您需要仔细检查：

*   `(first)`- 匹配单词'first'
*   `[\w]*{1,3}`- 任何重复的单词，例如 1 到 3 次 -
*   `(second)`- 匹配单词“秒”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T19:54:42.350

请原谅我没有使用伪代码，而是使用了实际代码。我希望我现在能很好地理解这个问题，以至于我认为它看起来并不复杂，是准确的。

```
# include <stdio.h>
# include <ctype.h>
# include <string.h>

# define BUFF_SIZE       1024
# define WORD_DELIM     " "
# define MATCH_PATT     "barf"

int main(  int ac ,  char *av[]  )
{
    __u_char    false = ( 1 == 0 ) ;
    __u_char    true = ( 1 == 1 ) ;

    __u_char    match_1_back = false ;
    __u_char    match_2_back = false ;

    char        line_buff[  BUFF_SIZE  ] ;
    char        *buff_ptr ;
    char        *word_ptr ;

    while (  fgets( line_buff ,  BUFF_SIZE ,  stdin )  )
    {
        puts(  "\nInput line was:  "  ) ;
        puts(  line_buff  )  ;

        puts(  "Output line is:  "  ) ;

        buff_ptr = line_buff ;

        while (  ( word_ptr = strtok( buff_ptr ,  WORD_DELIM )  )  !=  NULL  )
        {
            buff_ptr = NULL ;

            if (  strcmp( word_ptr ,  MATCH_PATT  )  ==  0  )
            {
                // Set these to what they should be for next iteration.
                match_2_back = match_1_back ;
                match_1_back = true ;

                // Don't output matched token.
            }
            else
            {
                // Don't output token if a token matched 2 tokens back.
                if (  ! match_2_back  )
                    printf(  "%s " ,  word_ptr  ) ;

                // Set these to what they should be for next iteration.
                match_2_back = match_1_back ;
                match_1_back = false ;
            }
        }

        printf(  "\n"  ) ;
    }
} 
```

使用此输入：

```
barf   barf  barf   healthy     feeling     better   barf  barf barf uh oh sick again
barf   barf  healthy     feeling     better   barf  barf uh oh sick again
barf   healthy     barf   feeling     better     barf   uh   barf   oh sick again
barf   healthy     feeling     better   barf uh oh sick again 
```

我得到了这个输出：

```
Input line was:  
barf   barf  barf   healthy     feeling     better   barf  barf barf uh oh sick again

Output line is:  
better sick again

Input line was:  
barf   barf  healthy     feeling     better   barf  barf uh oh sick again

Output line is:  
better sick again

Input line was:  
barf   healthy     barf   feeling     better     barf   uh   barf   oh sick again

Output line is:  
healthy feeling uh oh again

Input line was:  
barf   healthy     feeling     better   barf uh oh sick again

Output line is:  
healthy better uh sick again 
```

我只是使用了一个简单的比较，而不是实际的正则表达式。我只是想说明算法。输出是否符合要求？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T18:12:02.790

像这样的东西？

```
for (i = 0; i<wordcount; i++)
{
    CurrentWord = Words[i]
    if (WordMatchesCritera(CurrentWord))
    {
        if (HavePrecedingWord)
        { 
             success !!!
        } 
        else
        {
            i ++;
            HavePrecedingWord = true
        }
    }
    else
    {
        HavePrecedingWord = false;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T19:35:56.647

这行得通吗？

```
 matchID = -1;
    eraseID = -1;

    for(i = 0; i < ... ; i++)
    {
         if( wordMatches ( word[i] ) )
         {                  
            matchID = i;     /* found the chosen one */
            eraseID = -1;         
         }
         else 
         {
            if( matchID != -1 ) /* chosen one was found ? */
            {
                 eraseID = i;   /* erase the next non-matching one */
                 break; /* ? done for now  ? */
            }

          }
    } 
```

# embedded - 嵌入式设备的消息协议

> ID：12124409
> 
> 赞同：0
> 
> 时间：2012-08-25T18:06:28.447
> 
> 标签：embedded, protocols, message

我正在构建一个带有几个传感器的嵌入式设备。该设备将通过蓝牙或 USB 从这些传感器“传输”数字数据。

大多数通信将是从嵌入式设备到主机。主机将不经常发送控制消息，以控制增益等。

由于处理了物理层和数据链路层，因此我正在寻找一种简单的消息协议，该协议将使开发用户应用程序以在主机上处理/显示数据变得容易。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T09:05:57.983

一个简单的文本协议可能最适合这个应用程序。将通信通道用作双向串行管道。

该设备可以流式传输 ASCII（文本）格式的传感器值，以逗号分隔，每组由换行符分隔。该速率最好由主机设置。

例如，

```
21204,32014 (new line character '\n' - 0x0A) at the end of each line    
21203,32014 
21202,32011 
.... 
```

这使得测试、将值流式传输到文件、导入电子表格等变得更加容易。设备的类似命令也最好以文本形式完成。

```
SET GAIN_1  2  ( sent by host )
OK  ( reply by device )
SET GAIN_2  4 (sent by host )
OK ( reply by device )
SET GAIN_9  2 (sent by host )
ERROR  ( reply by device if it does not understand)

SET RATE 500   ( set the sensor dump rate to every 500 ms )
OK 
```

# c++ - 返回的返回类型是对象的引用？

> ID：12124412
> 
> 赞同：0
> 
> 时间：2012-08-25T18:06:50.983
> 
> 标签：c++, oop, object, reference, destructor

这就是我所相信的：

当一个函数返回时，它会为该对象创建一个新的临时副本，并且该临时对象在调用它的语句期间保留在内存中。

当函数返回引用时，该对象本身也会返回。这意味着该对象不应该是本地的。

所以当我这样做时：

```
 MyStruct & ReferenceReturn(MyStruct cl)
 {
         return cl;
 } 
```

在 main() 我做

```
MyStruct d("notmyname"),g("myname");
d = ReferenceReturn(g);
cout << d.name;
cout << ReferenceReturn(g).name; 
```

它在两者中都打印垃圾。

什么被退回？: 对 g 的本地副本的引用，即在函数完成后立即销毁的 cl 或对在语句结束后被销毁的临时对象的引用。但是因为如果 temp 被创建，它将以正确的方式覆盖 d。所以我相信它是返回的传递值的 localcopy 的引用。

但是，一旦我在结构中创建了析构函数，它就完美地运行了，并带有以下代码和特定的输出。

```
 ~MyStruct()
 {
   cout << name << " is destroying";
  } 
```

输出：

```
myname is destroying
myname
myname
myname is destroying
.... 
```

此输出显示每次调用仅创建一个对象。（有两个电话）

但是为什么没有析构函数它不能工作？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T18:09:38.813

```
 MyStruct & ReferenceReturn(MyStruct cl)
 {
         return cl;
 } 
```

创建`temporary object`、赋值给`cl`、返回`reference`对象、销毁对象。所以，是`dangling reference`。编译器可以使用`copy-elision`和不复制对象，但不能...使用一些东西

```
 MyStruct & ReferenceReturn(MyStruct& cl)
 {
         return cl;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T18:26:11.830

```
 MyStruct & ReferenceReturn(MyStruct cl) {
    return cl;
 } 
```

> 对于这种情况，结果是否未定义？

该函数表现出未定义的行为，是的。问题是这`cl`是函数中的一个本地对象，并且您正在返回对它的引用。这是未定义的行为。调用者将创建`g`要传递给的副本`ReferenceReturn`，并且该副本将被`ReferenceReturn`之后的函数销毁`return`，可能在调用者使用引用之前。

# ios - 在核心情节 1.0 中，您如何清除情节

> ID：12124413
> 
> 赞同：2
> 
> 时间：2012-08-25T18:07:01.723
> 
> 标签：ios, core-plot

我正在使用 Core Plot 1.0。我已经在我的选项卡式应用程序中成功制作了 XY 散点图。但是，当我离开带有图表的选项卡，输入不同的数据，然后返回带有新图表的选项卡时，两个图表都会出现。我见过一些命令，如 [graph reloadData] 但没有出现该选项。也许那来自另一个版本。那么任何人都可以帮我清除一个图表以准备显示另一个图表吗？我是否需要在 viewdidload 方法或类似方法中放置命令？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T18:28:27.683

该图有一个`-reloadData`方法。您调用它以使图形中的所有图刷新其整个数据集。`-reloadData`如果您只需要更新其中的一些，您也可以调用单个地块。当新数据可用于数据源时，从应用程序的主线程调用此方法。

# linux - 在 Linux 上监控磁盘 i/o 速率的脚本

> ID：12124417
> 
> 赞同：1
> 
> 时间：2012-08-25T18:07:22.910
> 
> 标签：linux, bash, awk, disk, iostat

我需要一个使用 bash、awk、sed 来监控 Linux 上所有磁盘 i/o 速率的工具。问题是它必须在每个时间间隔返回一行（因此这一行应该包含：`tps`, `kB_read/s`, `kB_wrtn/s`, `kB_read`, `kB_wrtn`, 但对所有磁盘进行汇总）。这里的自然选择当然是：

```
 -d -k -p $interval $loops 
```

要将其限制为我使用的所有磁盘：

```
 -d -k -p `parted -l | grep Disk | cut -f1 -d: | cut -f2 -d' '` 
```

现在总结列的好技巧：

```
 -d -k -p `parted -l | grep Disk | cut -f1 -d: | cut -f2 -d' '` > /tmp/jPtafDiskIO.txt     
echo `date +"%H:%M:%S"`,`awk 'FNR>2' /tmp/jPtafDiskIO.txt | awk 'BEGIN {FS=OFS=" "}NR == 1 { n1 = $2; n2 = $3; n3 = $4; n4 = $5; n5 = $6; next }    { n1 += $2; n2 += $3; n3 += $4; n4 += $5; n5 += $6 }    END { print n1","n2","n3","n4","n5 }'` >> diskIO.log 
```

我快到了，但是这个（在循环中运行）每次都从一开始就被调用，所以我没有得到间隔到间隔的统计信息，但总是平均（所以每次调用都会给我带来几乎相同的输出）。

我知道这听起来很复杂，但也许有人有想法？也许完全不同的方法？谢谢。

编辑：

示例输入（/tmp/jPtafDiskIO.txt）：

```
> Linux 2.6.18-194.el5 (hostname)  08/25/2012
> 
> Device:            tps    kB_read/s    kB_wrtn/s    kB_read    kB_wrtn
> sda               0.00         0.00         0.00      35655         59
> sda2              0.00         0.00         0.00         67        272
> sda1              0.00         0.00         0.00        521        274
> sdb              52.53         0.56       569.40   20894989
> 21065384388 sdc               1.90        64.64        10.93
> 2391333384  404432217 sdd               0.00         0.00         0.04
> 17880    1343028 
```

输出磁盘IO.log：

```
16:53:12,54.43,65.2,580.37,2412282496,21471160238 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T21:02:57.113

为什么不使用`iotop` [http://guichaz.free.fr/iotop/](http://guichaz.free.fr/iotop/)？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T22:55:29.867

`dstat`可能是你正在寻找的。它可以报告很多事情，默认情况下会显示一些常见的事情。

# c - 读单词直到行尾

> ID：12124421
> 
> 赞同：-4
> 
> 时间：2012-08-25T18:07:40.143
> 
> 标签：c, scanf

> **可能重复：**
> [任何很酷的函数可以在 ansi c 中从 pascal 中替换 readln？](https://stackoverflow.com/questions/5772531/any-cool-function-to-replace-readln-from-pascal-in-ansi-c)

我多次遇到一个问题，如何将单词读到行尾？
例如：
`2
hello this is a word
hi five
so i want to output
case 1:
hello
this
is
word
case 2:
hi
five`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:18:27.757

您可以循环遍历字符串中的每个字符以及遇到`\n`or`\r`字符时。可能是这样的？：

```
char str[] = "Hello this is a word\nhi five";
int i;

for(i = 0; str[i] != '\0'; i++)
{
    if(str[i] != '\n' && str[i] != '\r') //do something with str[i]
    else //do something if a new line char is found
} 
```

这样，您可以准确地选择在换行时要执行的操作。我在解析文件时经常使用这种方法，我将每一行写入缓冲区，处理缓冲区，然后开始将下一行移入缓冲区进行处理。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-25T18:11:55.363

其中一项危险功能将为您提供名为`gets`.

否则：-

```
char line[512];
int count=0;
char input=1;
while((input=getchar())!='\n')
    line[count++]=input; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-26T09:15:15.290

```
#include <stdio.h>

int main(){
    int i, dataSize=0;

    scanf("%d%*[\n]", &dataSize);
    for(i = 1; i<=dataSize;++i){
        char word[64];
        char *p=word, ch=0;
        printf("case %d:\n", i);
        while(EOF!=ch && '\n'!=ch){
            switch(ch=getchar()){
              case ' '://need multi space char skip ?
              case '\t':
              case '\n':
              case EOF:
                *p = '\0';
                printf("%s\n", p=word);
                break;
              default:
                *p++ = ch;
            }
        }
        if(ch == EOF)break;
    }

    return 0;
} 
```

或者

```
#include <stdio.h>
#include <ctype.h>

int main(){
    int i, dataSize=0;

    scanf("%d%*[\n]", &dataSize);
    for(i = 1; i<=dataSize;++i){
        char word[64],ch = 0;
        int stat = !EOF;
        printf("case %d:\n", i);
        while(EOF!=stat && '\n'!=ch){
            ch = 0;
            stat=scanf(" %s%c", word, &ch);
            if(EOF!=stat || isspace(ch)){
                printf("%s\n", word);
            }
        }
        if(EOF==stat)break;
    }

    return 0;
} 
```

# jquery - 将 JSON 文本从浏览器发送到 JSF 托管 Bean（Primefaces）

> ID：12124422
> 
> 赞同：0
> 
> 时间：2012-08-25T18:07:55.883
> 
> 标签：jquery, json, jsf, primefaces

我正在开发一个应用程序，我正在考虑以 JSON 格式将信息发送回浏览器，并让 java 脚本根据信息呈现页面。以同样的方式，我想以 JSON 格式将更新从浏览器推送到托管 bean。我们可以在 JSF + Primefaces 中实现这一点吗？

我们考虑使用 JSON 的原因是限制来回传递的数据量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:59:12.723

我可以推荐使用 Gson [Gson 用户指南](https://sites.google.com/site/gson/gson-user-guide)

这是一个关于如何从服务器创建/发送/解析 json 的简短示例

在你的 bean 中做这样的事情

```
Gson gson = new Gson();
myJsonString = gson.toJson(someObjectOrListOfObjects); 
```

在 xhtml 中

```
<h:inputHidden id="my_json_data" value="#{myBean.someObjectOrListOfObjects}" /> 
```

在你的 js 文件中

```
var data = $('input[id$="my_json_data"]').val();
data = jQuery.parseJSON(data); //to parse it, use dev tools/fire bug to add data variable to watch and observe it 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T08:14:43.543

与其滚动你自己的传递 JSON 而不是 XML/HTML 的 JSF 实现，我会建议一些其他方法来最小化正在发送的数据。

**使对话框、选项卡视图、数据表等动态化。**

PrimeFaces 可以选择使某些元素动态化。这意味着它们会在用户请求这些内容时加载。这可以提高页面加载量。

**使用较小的表格**

我看到很多用户只使用一个`<h:form>`，因为如果所有内容都在一个表单中，您就不能忘记在需要一个表单的元素周围放置一个表单。这是完全错误的，并导致在表单中发布所有内容，而不仅仅是页面的相关部分。在需要的地方使用表格，并使用诸如萤火虫之类的东西仔细检查正在发送的内容。

**使用客户端验证**

使用客户端验证来防止用户发送错误的输入。这样就不会（永远）来回发送错误的数据。一个很好的副作用是用户会收到一个快速的“响应”。注意：这并不意味着您可以放弃服务器端验证。出于安全目的，需要服务器端验证。

# java - 如何设置正确的字符集以使用 jsoup 工作抛出代理服务器？

> ID：12124424
> 
> 赞同：1
> 
> 时间：2012-08-25T18:08:12.380
> 
> 标签：java, character-encoding, proxy, jsoup

这段代码给了我内容，但是一些俄罗斯字符为我隐藏了正方形......谁知道如何设置 utf-8 或 cp1251 字符集作为代理来获取内容。与代码共舞不会为我带来任何结果。getBytes 和其他方法不能给我正常的结果。

```
URL url = new URL(linkCar);
String your_proxy_host = new String(proxys.getValueAt(xProxy, 1).toString());
int your_proxy_port = Integer.parseInt(proxys.getValueAt(xProxy, 2).toString());
Proxy proxy = null;
System.out.println(proxys.getValueAt(xProxy, 3).toString());
proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress(your_proxy_host, your_proxy_port));
HttpURLConnection connection = (HttpURLConnection)url.openConnection(proxy);
connection.setConnectTimeout(16000);
connection.connect(); 
```

proxys - 代理列表的表模型；可能谁知道如何设置 connect throw socks-proxy

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T19:14:10.107

对于 UTF-8，尝试换行

```
BufferedReader buffer_input = new BufferedReader(new InputStreamReader(connection.getInputStream())); 
```

至

```
BufferedReader buffer_input = new BufferedReader(new InputStreamReader(connection.getInputStream(),"UTF-8")); 
```

如果要更改字符集，可以将字符集名称更改为另一个名称。

# neo4j - neo4j 关系类型限制？

> ID：12124428
> 
> 赞同：1
> 
> 时间：2012-08-25T18:09:13.830
> 
> 标签：neo4j

我创建了包含 38,000 种关系类型的图表，基本上将信息从属性转移到关系类型上。我这样做是因为对于我的查询速度，这些`.getProperties()`功能阻碍了我。但是现在当我尝试运行我的查询时，我得到了这个：

```
java.lang.NullPointerException
    at org.neo4j.kernel.impl.core.NodeManager.receiveRelationships(NodeManager.java:658)
    at org.neo4j.kernel.impl.core.NodeManager.getMoreRelationships(NodeManager.java:624)
    at org.neo4j.kernel.impl.core.NodeImpl.getMoreRelationships(NodeImpl.java:400)
    at org.neo4j.kernel.impl.core.NodeImpl.loadInitialRelationships(NodeImpl.java:352)
    at org.neo4j.kernel.impl.core.NodeImpl.ensureRelationshipMapNotNull(NodeImpl.java:338)
    at org.neo4j.kernel.impl.core.NodeImpl.getAllRelationshipsOfType(NodeImpl.java:184)
    at org.neo4j.kernel.impl.core.NodeImpl.getRelationships(NodeImpl.java:269)
    at org.neo4j.kernel.impl.core.NodeProxy.getRelationships(NodeProxy.java:114) 
```

我假设这与我拥有的大量关系类型有关，在扩展到 38,000 之前，我没有任何问题。有没有办法解决这个问题？有没有地方可以看到 neo4j 的关系类型的限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T20:36:35.010

是的，这可能是正确的，请参阅[http://docs.neo4j.org/chunked/snapshot/capabilities-capacity.html#capabilities-data](http://docs.neo4j.org/chunked/snapshot/capabilities-capacity.html#capabilities-data)

也许提出一个问题来扩展它和你的用例？你需要多少？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:22:29.867

I believe storage wise the actual limit is 2^15-1 (=32767) types, not 2^16-1 (=65535). There seems to be some invalid checks, making for a weird exception being thrown from Neo4j.

Since you need at least 100k you would still hit a problem. Would be great with a configurable (at store creation) max number of relationship types supported, a setting that would affect the space each relationship will take on disk.

# notepad++ - 在 Notepad++ 中将聪明的弯引号转换为愚蠢的直引号的最简单方法？

> ID：12124434
> 
> 赞同：7
> 
> 时间：2012-08-25T18:09:48.640
> 
> 标签：notepad++, quotes

在Notepad ++中用哑/直单引号和双引号全局替换所有智能/弯曲单引号和双引号的最简单/最有效的方法是什么？

理想情况下，这不会涉及查找和替换命令，因为我宁愿不必在查找和替换字段中不断地重新键入材料。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-31T22:03:46.497

我在记事本++中也遇到了同样的问题。我尝试了上述解决方案，但它们对我不起作用。在复制和粘贴之前，我还禁用了 Microsoft Word 中的智能引号，但它仍然不会使用直引号。

唯一对我有用的是，在记事本++中，突出显示其中一个智能引号，按 Ctrl + H 并将其替换为直引号。我知道您想避免使用查找和替换功能，但您只需执行两次（一次用于开始报价，一次用于结束报价）。

我很想找到一个更快的解决方案，但这是迄今为止我唯一能找到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-18T20:52:03.003

MSDOS 来救援。

只需打开一个 CMD 窗口并在 c:> 提示符下键入

> 复制 con: myfile.txt [Enter]

粘贴文本并按 Ctrl-Z 完成

您的带直引号的文本在 myfile.txt 中

请注意，缩进也消失了，您可以通过在粘贴之前将 TAB 转换为空格（在 Notepad++ 中的编辑下）来避免这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-07T15:45:53.290

**Notepad++ 宏删除智能引号**

您可以录制一个宏以用直单引号和标准双引号字符替换`&#x2018;`and 。键入正确的字符可能具有挑战性。我前段时间做了这个，所以你可能更容易复制我在下面包含的宏步骤。`&#x2019;``&#x201C;``&#x201D;`

宏保存在 %AppData%\Notepad++\shortcuts.xml （Windows 徽标键 + E 和复制粘贴`%AppData%\Notepad++\`）

您可以编辑您的*shortcuts.xml*文件并将下面的代码粘贴到该`<Macros>`部分中。您需要使用 Notepad++ 以外的编辑器，否则它会覆盖您的更改。重新启动 Notepad++ 后，宏应该在宏菜单上可见。

```
 <Macro name="Remove Smart Quotes" Ctrl="no" Alt="no" Shift="no" Key="0">
            <Action type="3" message="1700" wParam="0" lParam="0" sParam="" />
            <Action type="3" message="1601" wParam="0" lParam="0" sParam="&#x2018;" />
            <Action type="3" message="1625" wParam="0" lParam="0" sParam="" />
            <Action type="3" message="1602" wParam="0" lParam="0" sParam="&apos;" />
            <Action type="3" message="1702" wParam="0" lParam="768" sParam="" />
            <Action type="3" message="1701" wParam="0" lParam="1609" sParam="" />

            <Action type="3" message="1700" wParam="0" lParam="0" sParam="" />
            <Action type="3" message="1601" wParam="0" lParam="0" sParam="&#x2019;" />
            <Action type="3" message="1625" wParam="0" lParam="0" sParam="" />
            <Action type="3" message="1602" wParam="0" lParam="0" sParam="&apos;" />
            <Action type="3" message="1702" wParam="0" lParam="768" sParam="" />
            <Action type="3" message="1701" wParam="0" lParam="1609" sParam="" />

            <Action type="3" message="1700" wParam="0" lParam="0" sParam="" />
            <Action type="3" message="1601" wParam="0" lParam="0" sParam="&#x201C;" />
            <Action type="3" message="1625" wParam="0" lParam="0" sParam="" />
            <Action type="3" message="1602" wParam="0" lParam="0" sParam='&quot;' />
            <Action type="3" message="1702" wParam="0" lParam="768" sParam="" />
            <Action type="3" message="1701" wParam="0" lParam="1609" sParam="" />

            <Action type="3" message="1700" wParam="0" lParam="0" sParam="" />
            <Action type="3" message="1601" wParam="0" lParam="0" sParam="&#x201D;" />
            <Action type="3" message="1625" wParam="0" lParam="0" sParam="" />
            <Action type="3" message="1602" wParam="0" lParam="0" sParam='&quot;' />
            <Action type="3" message="1702" wParam="0" lParam="768" sParam="" />
            <Action type="3" message="1701" wParam="0" lParam="1609" sParam="" />
        </Macro> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T15:03:45.173

如果可以清除所有格式，我发现我可以选择所有文本，然后将语言更改为“MS-DOS 样式”。

然后，仍然选择所有文本，“以 UTF-8 编码”。你必须保存它；N++ 默认为 .nfo 对我有用。

此时它就像在普通记事本中打开一样干净。

我花了很长时间才找到这个修复程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-16T20:42:10.597

我建议单击导航中的“宏”选项卡，然后单击“开始录制”突出显示弯曲的开头引号，然后 Ctrl+H 并使用查找和替换工具将它们全部更改为直引号。对结束引号执行相同操作，然后返回宏以停止录制。在宏选项卡的下拉菜单中，单击“保存录制的宏”。您可以将其命名为修复引号。现在，每当您从其他地方提取内容时，您都可以运行修复报价宏，该宏将在未来自动更正所有报价！:)

# android - Android 服务无法启动意图和 NullPointerException

> ID：12124440
> 
> 赞同：1
> 
> 时间：2012-08-25T18:10:53.367
> 
> 标签：android, service

我正在创建一个后台服务（在它自己的进程中）并且在让它工作时遇到了很多麻烦。我正在尝试在应用程序启动时启动它，并且在日志中出现无法启动服务的意图错误。我一直在浏览论坛、示例（和谷歌），但找不到我做错了什么。

这是我得到的错误：
E/AndroidRuntime(1398): java.lang.RuntimeException: Unable to start service com.test.alarms.AlarmService@41550cb0 with Intent { cmp=xxxx }: java.lang.NullPointerException

在活动中我有：

```
startService(new Intent(AlarmService.class.getName())); 
```

服务等级是：

```
package com.test.alarms;

public class AlarmService extends Service{

Context context; 

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void onCreate() {
//code to execute when the service is first created
}

@Override
public void onDestroy() {
//code to execute when the service is shutting down
}

@Override
public void onStart(Intent intent, int startid) {
//code to execute when the service is starting up
    Intent i = new Intent(context, StartActivity.class);
    PendingIntent detailsIntent = PendingIntent.getActivity(this, 0, i, 0);

    NotificationManager notificationSingleLine = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
    Notification notificationDropText = new Notification(R.drawable.ic_launcher, "Alarm for...", System.currentTimeMillis());

    CharSequence from = "Time for...";
    CharSequence message = "Alarm Text";        
    notificationDropText.setLatestEventInfo(this, from, message, detailsIntent);

    notificationDropText.vibrate = new long[] { 100, 250, 100, 500};        
    notificationSingleLine.notify(0, notificationDropText);
} 
```

}

清单文件有：

```
<service
        android:name=".AlarmService"
        android:process=":remote">
        <intent-filter>
            <action android:name="com.test.alarms.AlarmService"/>
        </intent-filter>
    </service> 
```

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T18:21:12.223

也许问题是您已经覆盖了 OnCreate 和 OnDestroy，但您没有调用 super.Oncreate() 和 super.onDestroy()。

如果这不起作用，请尝试

```
startService(new Intent(context , AlarmService.class)); 
```

编辑：也在 onStart 中使用它

```
Intent i = new Intent(this, StartActivity.class); 
```

代替

```
Intent i = new Intent(context, StartActivity.class); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-12T15:56:15.363

根据[文档](http://developer.android.com/reference/android/app/Service.html)，您需要在 onStartCommand(Intent intent,int,int);

更好的设计，

```
public int onStartCommand(Intent intent, int flags, int startId) {
    if(intent != null){
        handleCommand(intent);
    }
    // We want this service to continue running until it is explicitly
    // stopped, so return sticky.
    return START_STICKY;
} 
```

[在这里](http://developer.android.com/reference/android/app/Service.html#START_STICKY)阅读更多

# javascript - 使用 html5 javascript hibernate 进行视频聊天

> ID：12124442
> 
> 赞同：2
> 
> 时间：2012-08-25T18:11:28.453
> 
> 标签：javascript, html

我已经建立了一个聊天客户端，目前正在开发中`javascript, html5 and java (Hibernate)`。我打算在上面添加视频聊天。我不想添加`flash`，因此据我所知，获得网络摄像头访问权限的唯一方法是使用（`HTML5`不是`silverlight`很好的评论）和`applet`. 问题是如何将一个聊天用户的视频流发送到服务器并返回给聊天另一端的另一个聊天用户。我已经搜索并发现`RTSP`不会在`Chrome`. 那我用`HTTP`这个吗？如果是这样，你能给我一些指导吗？如果不是，我的其他选择是什么？

# ruby - 如何使用 Ruby 模拟延迟的 Web 服务器响应？

> ID：12124447
> 
> 赞同：0
> 
> 时间：2012-08-25T18:11:54.897
> 
> 标签：ruby, webserver, cgi

为了测试 iPhone 和 iPad 从外部 Web 服务器获取和缓存图像，我想在返回图像之前使自己的服务器延迟 0.5、1 或 3 秒，使用如下所示的 URL：

```
http://www.mysite.com/getImage.cgi?pic=pic001.png&delayWanted=3 
```

有一个简单的方法吗？

使用Ruby，我想到的两种方式是使用`CGI`并更改HTTP头返回类型`image/png`，`no-cache`头和“过期时间=1年前”，并提供内容大小，然后打开图像文件并输出数据，但这可能需要最好地匹配标准 Web 服务器返回 HTTP 标头的方式。另一种方法是先休眠，然后简单地将重定向的 HTTP 代码发送到真实图片的 URL，因此 Web 服务器应处理其余部分。或者有没有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:19:10.867

我不了解 Ruby，但如果你可以将一个你是 root 的 Linux 机器插入网络路径（或者你运行 Ruby 的服务器符合条件），那么就有“netem”可以模拟逼真的网络条件：延迟、丢包、抖动...

[http://www.linuxfoundation.org/collaborate/workgroups/networking/netem](http://www.linuxfoundation.org/collaborate/workgroups/networking/netem)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T18:20:06.397

我认为更简单的方法是如你所说，使用睡眠，例如

```
sleep(2.minutes) 
```

它只需要一行代码并延迟您的响应。

# javascript - Javascript中关联数组的数学集函数

> ID：12124448
> 
> 赞同：-1
> 
> 时间：2012-08-25T18:12:01.900
> 
> 标签：javascript, arrays, associative-array, intersection

如何在Javascript中获得两个关联数组的差异。？例子 ：

```
var arr1[0] = { name : 'test1' , type : 'test2' };
var arr1[1] = { name : 'test2' , type : 'test3' };
var arr2[0] = { name : 'test1' , type : 'test2' };
var arr2[1] = { name : 'test3' , type : 'test4' }; 
```

我需要得到这样的输出

```
if Intersection() :
arr3[0] = { name : 'test1' , type : 'test2' }
if difference arr1-arr2 :
arr4[0] = { name : 'test2' , type : 'test3' };
if difference arr2-arr1 :
arr5[0] = { name : 'test3' , type : 'test4' }; 
```

我在搜索中没有找到与关联数组有关的任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T03:06:21.247

```
function equals(a, b){
       return (a.name === b.name && a.type === b.type);            
    }

    function has(arr, obj){
        var len = arr.length;

        for(var i = 0; i < arr.length; i++){
            if(equals(arr[i], obj)) return true;                               
        }

        return false;        
    }    

    function clone(obj){
        return {
            name: obj.name,
            type: obj.type
        };        
    }

    function intersect(a, b){
        var common = [];    
        if(!a.length || !b.length) return common;

        var aLen = a.length;
        for(var i = 0; i < aLen; i++){
            if(has(b, a[i])){
                common.push(clone(a[i]));   
            }            
        }

        return common;              
    }

    function subtract(a, b){
       var result = [];    
        if(!a.length || !b.length) return result;

        var common = intersect(a, b);
        var aLen = a.length;

        for(var i = 0; i < aLen; i++){
            if(!has(common, a[i])){
                result.push(clone(a[i]));   
            }               
        }

        return result;
    }

    var arr1 = [{ name : 'test1' , type : 'test2' },{ name : 'test2' , type : 'test3' }];

    var arr2 = [{ name : 'test1' , type : 'test2' }, { name : 'test3' , type : 'test4' }];

    console.log(intersect(arr1, arr2));
    console.log(subtract(arr1, arr2));
    console.log(subtract(arr2, arr1)); 
```

# jquery - jquery如果背景颜色==

> ID：12124451
> 
> 赞同：6
> 
> 时间：2012-08-25T18:12:28.203
> 
> 标签：jquery

我正在尝试检查元素的背景，这是我的代码。但它不起作用：

我尝试了两种方法，这里是第一种：

```
function changeColor(field) {
     if(field.css('background-color','#ffb100')) {
          field.css('background-color','white');
     }
     else {
          field.css('background-color','ffb100');
     }
} 
```

这是第二个：

```
function changeColor(field) {
     if(field.css('background-color') === '#ffb100') {
          field.css('background-color','white');
     }
     else {
          field.css('background-color','ffb100');
     }
} 
```

但都没有奏效！有什么建议么？

编辑：这是我最新的代码，但它仍然无法正常工作：

```
function changeColor(field) {
                if(field.css('background-color') == 'rgb(255, 255, 255)') {
                    field.css('background-color','ffb100');
                }
                else {
                    field.css('background-color','white');
                }
            } 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-25T18:17:26.400

[来自 jQuery`.css()`文档：](http://api.jquery.com/css/)

> 请注意，元素的计算样式可能与样式表中为该元素指定的值不同。例如，尺寸的计算样式几乎总是像素，但它们可以指定为、 或`em`在`ex`样式表中。不同的浏览器可能会返回逻辑上但文本上不相等的 CSS 颜色值，例如、和。`px``%``#FFF``#ffffff``rgb(255,255,255)`

大多数浏览器都会返回一个`rgb`值，因此您可以编写以下代码：

```
if (field.css('background-color') === 'rgb(255, 177, 0)') {
   // ...
} 
```

上面的代码段，基于指定的原因，在某些浏览器中可能会失败。您可以考虑使用颜色转换库或创建一个临时元素并设置和获取它的`background-color`/`color`属性。

一个简单的 jQuery 插件：

```
(function($) {
    $.fn.isBgColor = function(color) {
        var thisBgColor = this.eq(0).css('backgroundColor');
        var computedColor = $('<div/>').css({ 
            backgroundColor: color
        }).css('backgroundColor');
        return thisBgColor === computedColor;
    }
})(jQuery); 
```

用法：

```
if ( field.isBgColor('#ffb100') ) {
   // ...
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-25T18:30:28.507

正如@undefined 已经说过的那样，`css()`将返回`rgb`背景颜色的值，这可以解决您的问题，因此您应该支持他的答案。但是，我*强烈*建议您不要在 JavaScript 中使用固定颜色。

另一种方法是定义两个 CSS 类，它们是放置样式的合适位置：

```
.orange {
  background-color: #ffb100;
}

.white {
  background-color: white;
} 
```

然后简单地切换字段的类，这比在 JavaScript 中比较 hex 或 rgb 值要干净得多，并且当你想要不同的颜色时更容易切换：

```
function changeColor(field) {
  field.toggleClass("white orange");
} 
```

这是一个**[演示](http://jsfiddle.net/4pYkM/)**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T18:17:35.660

我不确定`field`指的是什么，但我的猜测是它是元素的**id ？**

`field`如果是这样，请尝试像这样包装`$('#' + field).css`。

**注意：这是一个非常好的函数，用于将 HEX 转换为 RGB**

```
function hexToRgb(string)
{
    if(!string || typeof string !== 'string') return false;

    if(
        string.substring(0,1) == '#' && 
        (string.length == 4 || string.length == 7) && 
        /^[0-9a-fA-F]+$/.test(string.substring(1, string.length))
    ){
    string = string.substring(1, string.length);

    if(string.length == 3) 
        string = string[0] + string[0] + string[1] + string[1] + string[2] + string[2];

    return 'rgb(' + 
        parseInt(string[0] + string[1], 16).toString() + ',' + 
        parseInt(string[2] + string[3], 16).toString() + ',' + 
        parseInt(string[4] + string[5], 16).toString() + 
    ')';
}
else return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-28T14:23:54.640

**重要提示**：确保`rgb(128, 128, 128)`在逗号后输入一个空格。如果你输入`rgb(128,128, 128)`它就不起作用。*它对空间敏感*。

尝试一下：`alert(element.css('background-color') === 'rgb(128, 128, 128)')`

回答主要问题：

```
var style = 'background-color';
var gray = 'rgb(128, 128, 128)';

if(element.css(style) === gray){
  element.css(style,'blue');
}else{
  element.css(style,gray);
} 
```

# magento - Magento 1.6 似乎没有使用 APC

> ID：12124454
> 
> 赞同：2
> 
> 时间：2012-08-25T18:12:45.473
> 
> 标签：magento, apc

我正在使用 Magento 1.6 和 APC 3.1.9。

**我有 99% 的失误，只有 0.4% 的命中率。**

Magento local.xml 有这个条目

`<config> <global> <cache> <backend>apc</backend> <prefix>MAGE_</prefix> </cache> ...... .....`

根据 Magento 论坛，我已经调整了 apc.ini 中的大部分参数。

当我跑步时，

`php -r 'phpinfo();' | grep 'apc'`

输出是

```
additional .ini files parsed => /etc/php.d/apc.ini,
apc
apc.cache_by_default => On => On
apc.canonicalize => On => On
apc.coredump_unmap => Off => Off
apc.enable_cli => On => On
apc.enabled => On => On
apc.file_md5 => Off => Off
apc.file_update_protection => 2 => 2
apc.filters => no value => no value
apc.gc_ttl => 3600 => 3600
apc.include_once_override => Off => Off
apc.lazy_classes => Off => Off
apc.lazy_functions => Off => Off
apc.max_file_size => 20M => 20M
apc.mmap_file_mask => no value => no value
apc.num_files_hint => 10000 => 10000
apc.preload_path => no value => no value
apc.report_autofilter => Off => Off
apc.rfc1867 => Off => Off
apc.rfc1867_freq => 0 => 0
apc.rfc1867_name => APC_UPLOAD_PROGRESS => APC_UPLOAD_PROGRESS
apc.rfc1867_prefix => upload_ => upload_
apc.rfc1867_ttl => 3600 => 3600
apc.serializer => default => default
apc.shm_segments => 1 => 1
apc.shm_size => 1024M => 1024M
apc.slam_defense => On => On
apc.stat => On => On
apc.stat_ctime => Off => Off
apc.ttl => 0 => 0
apc.use_request_time => On => On
apc.user_entries_hint => 10000 => 10000
apc.user_ttl => 0 => 0
apc.write_lock => On => On 
```

不确定如何调试此问题并解决 99% 缓存未命中问题。我错过了什么？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T18:22:38.667

确保您`rm -rf /var/www/var/cache/*`在更改 local.xml 后执行了操作。

尝试优化您的 apc 缓存 [http://blog.nexcess.net/2011/03/25/optimizing-apc-cache-settings-for-magento/](http://blog.nexcess.net/2011/03/25/optimizing-apc-cache-settings-for-magento/)

并确保您检查

APC 配置的附加建议：

1.  关闭 apc.optimization（实验性且不稳定，可能会缓存用户会话信息，不应该缓存的无用项目，例如管理页面和登录站点页面）
2.  关闭 apc.include_once_override
3.  关闭 apc.slam_defense（可能导致对象被显示给用户的 PHP 警告替换）
4.  设置 apc.user_ttl = 0（允许您的 php 脚本为查询和对象设置适当的超时）
5.  为文件支持的 mmap 设置 apc.mmap_file_mask = /tmp/apc-yourusernamehere.XXXXXX；通过添加您的唯一字符串使文件掩码唯一；必须保留 XXXXXX（正好 6 个 X）以允许 APC 添加随机字符串或设置为 /dev/zero 用于匿名 mmap，如果您可以节省内存

**来源**：[http ://blog.magikcommerce.com/configuring-apc-cache-for-faster-magento/](http://blog.magikcommerce.com/configuring-apc-cache-for-faster-magento/)

# ios - 上传 iPhone 应用以供审核，无需应用内购买

> ID：12124467
> 
> 赞同：0
> 
> 时间：2012-08-25T18:14:17.233
> 
> 标签：ios, app-store-connect

我已经完成了我的 iPhone 应用程序。它是金融类的应用程序。现在，我希望加入应用内购买。但在此之前，我在想我是否可以先让苹果批准该应用程序。我将限制应用程序中的 2 个功能（添加后可以通过应用内购买购买）。我希望首先在应用商店上线（功能有限）。然后，我可以合并应用内购买。我可以这样做吗？因为我将限制应用程序的某些功能。苹果会接受吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:20:45.177

如果我没记错的话，当应用程序进入 AppStore 时，有一个选项。我通常选择当前日期作为所需的 AppStore 日期。但是你可以选择未来的某个时间点，比如一年后。那应该可以解决你的问题，不是吗？

在那之前，您将看到 Apple 是否接受您的应用程序，并在以后上传具有附加功能的新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T20:12:21.847

任何最小可行产品（可以在未来的更新中添加新功能）都可以上传到 App Store。查看[Apple 的指南](https://developer.apple.com/appstore/resources/approval/guidelines.html#functionality)

# database - 我需要的 Symfony2 自定义参数放在哪里？

> ID：12124471
> 
> 赞同：4
> 
> 时间：2012-08-25T18:14:40.707
> 
> 标签：database, configuration, symfony, parameters

**我需要在Symfony2**中为我的包进行一些配置 放置它们的最佳位置是哪里？
我怎样才能从那里检索它们？

我在中使用了我的默认数据库参数，`PARAMETERS.INI`但我需要额外的参数，我可以在代码中亲自检索它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T17:52:01.827

例如，应该将他的参数保存在包中 `src/Company/SomeBundle/Resources/config/parameters.yml`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T19:06:22.327

要定义您需要的任何额外参数，请在 config.yml 文件中定义它们。就像是：

```
# app/config/config.yml
parameters:
    my_mailer.class:      Acme\HelloBundle\Mailer
    my_mailer.transport:  sendmail 
```

然后，您可以在服务容器可用的任何地方检索它们，例如在控制器内部，就像您检索任何其他服务（如教义或 swiftmailer）一样。例如，在控制器中，执行

```
$transport = $this->get('my_mailer.transport'); 
```

如果需要，您可以在 paramters.ini 中定义这些参数，您将得到相同的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T06:39:09.497

请参阅[如何公开捆绑](http://symfony.com/doc/master/cookbook/bundles/extension.html)说明书条目的语义配置。这种方法的优点之一是您可以验证配置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T18:23:52.263

在 parameters.ini 文件中使用不同的部分。您可以使用带有前缀 prod1 的参数和具有相同前缀的 prod2 的 prod1 环境：

参数.ini：

```
[parameters]
prod1_database_driver = pdo_mysql
prod1_database_host = 127.0.0.1

# ...

prod2_database_driver = pdo_mysql
prod2_database_host = localhost 
```

它们都使用 prod.yml 配置，但会覆盖您要从 parameters.ini 中读取的内容：

config_prod1.yml：

```
imports:
 - { resource: config_prod.yml }

// .. overwrite stuff here 
```

# java - Java web 服务的疑惑

> ID：12124472
> 
> 赞同：0
> 
> 时间：2012-08-25T18:14:46.047
> 
> 标签：java, web-services

我想以 JAX-RPC/JAX-WS/JAX-RS 样式启动 Java Web 服务，并对 xml/wsdl/soap 有所了解。但在开始实施时仍有疑问：

*   我应该从哪个soap实现（Axis/CXF等）开始，这样我在得到一个之后可以轻松地适应其他soap实现？
*   是否有任何默认实现开始而不是切换到供应商特定的实现？
*   是否有任何书籍可以提供有关这些实现的逐步信息？
*   你真的认为它（JAX-RPC）已经完全过时了吗？我认为您也需要了解它的基础知识才能为现有服务提供支持。不是吗？
*   是否可以在没有注释的情况下实现服务？
*   SOA 和 Web 服务有什么区别？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:24:26.237

> 我应该从哪个soap实现（Axis/CXF等）开始，这样我在得到一个之后可以轻松地适应其他soap实现？

这些是不同的（并且非常流行的）框架。您选择其中一个并使用它。交换框架既不习惯也不容易

> 是否有任何默认实现开始而不是切换到供应商特定的实现？

不知道你在这里的意思。Java 已经`JSR`为 Web 服务定义了一个，并且`Metro`作为参考实现，所以任何不使用例如特定于`Glassfish`部署的东西都将被视为非供应商特定的。
我建议您使用[Axis 2](http://axis.apache.org/axis2/java/core/)或[CXF](http://cxf.apache.org/)，因为它们是非常流行的框架并且有很多在线教程。

> 是否有任何书籍可以提供有关这些实现的逐步信息？

有很多资源，但您需要研究更具体的内容。
如果你去，`Axis 2`否则`CXF`你会发现很多在线教程

> 你真的认为它（JAX-RPC）已经完全过时了吗？我认为您也需要了解它的基础知识才能为现有服务提供支持。不是吗？

是的，它已经过时了。这是旧规范。不需要调查它。

> 是否可以在没有注释的情况下实现服务？

当然是。所有教程通常显示使用注释启动 Web 服务以及从 a 启动 Web 服务的示例，`WSDL`即您首先创建 a`WSDL`并且 Web 服务（存根）是自动生成的

> SOA 和 Web 服务有什么区别？

Web 服务被用作提供的实现技术之一`SOA`。
没有一本书具体说明这两种技术之间的区别，因为一种是另一种的实现组件。如果你需要了解，`SOA`有很多书。这个问题是关于书籍推荐的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:59:22.530

> 我应该从哪个soap实现（Axis/CXF等）开始，这样我在得到一个之后可以轻松地适应其他soap实现？

如果您希望能够从一个 impl 适应另一个，则需要使用纯 JAX-WS API。实际上，您可以从 JDK 中的 JAX-WS impl 开始，然后迁移到 CXF r Metro（也许 Axis 2，Axis2 不像 CXF 和 Metro 那样经过 JAX-WS 认证），因为您的需求发生了变化或需要其他功能。

您还可以在以下位置查看我的类似答案：

[Apache CXF 和 Axis 之间的区别](https://stackoverflow.com/questions/1243247/difference-between-apache-cxf-and-axis/1245386#1245386)

> 是否有任何默认实现开始而不是切换到供应商特定的实现？

JAX-WS 在 JDK 中，然后到 CXF 或 Metro。

> 是否有任何书籍可以提供有关这些实现的逐步信息？

CXF 资源和文章页面列出了两本书，其中一本涵盖了 CXF 和 Axis2。

[http://cxf.apache.org/resources-and-articles.html](http://cxf.apache.org/resources-and-articles.html)

> 你真的认为它（JAX-RPC）已经完全过时了吗？我认为您也需要了解它的基础知识才能为现有服务提供支持。不是吗？

过时的。别担心。

> 是否可以在没有注释的情况下实现服务？

使用 CXF，是的，但使用注释肯定更好。注释对运行时发生的事情、wsdl 的创建方式（如果进行 java 首次开发）等提供了更多的控制......

# asp.net-mvc - 根据购买的版本限制对 Web 应用程序功能的访问

> ID：12124474
> 
> 赞同：0
> 
> 时间：2012-08-25T18:14:58.760
> 
> 标签：asp.net-mvc, encryption, licensing

我有一个 ASP.NET MVC Web 应用程序，它应该以各种版本出售，每个版本都可以解锁越来越多的应用程序功能。想想类似 Visual Studio 的版本 - Professional 允许您执行 X 和 Y，但使用 Premium，您也可以执行 Z。

我正在尝试增强应用程序，以便能够可靠地确定实际购买的版本。或者，换句话说，以某种方式存储有关版本的信息，以便应用程序可以轻松访问它。我不是在寻找任何花哨的保护机制，只是让破解应用程序比重写一些纯文本文件更复杂:)

我能想到的一种方法是使用公钥/私钥对。我生成一个带有版本有效负载的许可证密钥，用私钥对其进行加密，然后将其发送给客户。客户然后输入加密的许可证密钥，该密钥被存储在某个地方，例如数据库。公钥将被硬编码到我们的 web 应用程序中，以便应用程序可以解密许可证密钥并决定是否允许访问某些功能。

这可能*会*起作用，但是将公钥硬编码似乎有点蹩脚。上面提出的解决方案是否有其他选择（也许我想在这里重新发明轮子）？它有什么明显的缺陷吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T23:37:11.617

最好不要尝试实现完美的安全性，因为您正在尝试实施某种内容保护方案，如果没有应用程序环境（例如操作系统）的明确支持，这些方案必然会失败 - 即使它们大多也会失败然后。

通常您不使用私钥加密，而是使用私钥*签名*。您可以随应用程序发送一个公钥，并在您的应用程序中验证该版本是为该特定公钥签名的。

有很多方法可以攻击这个方案，并且可以通过隐藏更多来增强它，但基本上你能做的就这些了。

# mysql - 将多个查询组合成一个查询

> ID：12124477
> 
> 赞同：1
> 
> 时间：2012-08-25T18:15:04.520
> 
> 标签：mysql, database, query-optimization

我有我用 ORM 语法编写的代码。它从文件中读取博客评论数据，并将它们插入到`blogs`表`comments`中。**我想把这个 ORM 代码带回 mysql，因为我需要将尽可能多的查询组合成一个查询，而这种优化在 ORM 语言中并不容易。我需要这种优化的原因是因为我正在使用远程服务器，所以查询越少越好。**我用mysql伪代码写了下面的代码，因为我有点忘记了mysql。

这是包含所有博客的所有评论的评论文件。`from blog url`告诉我这条评论属于哪个博客。

```
comment text               from blog url
------------------------------------------
first comment text         first-blog-url
second comment text        first-blog-url
third comment text         first-blog-url
fourth comment text        blog-2-url
fifth comment text         blog-2-url
sixth comment text         3rd-blog-url 
```

这是我用来处理文件的 ORM 代码。（在最底部，我添加了表格的描述）。

```
//I read a comment from the comments file, `comment text` and `from blog url`

//does a blog exist that has 'link' that matches 'from blog url'
$blog = //SELECT FROM blogs where 'link' has value 'first-blog-url'

//if it doesn't exist, create it
if($blog == null){
    $blog = INSERT INTO blogs a new record and set 'link' to 'first-blog-url'
}

//then read the id of the (existing or just-created) blog row
$blog_id = $blog->getId();

//then use the $blog_id to insert the comment into the 'comments' table.

//does this comment text already exist for this blog id?
$comment = SELECT FROM comments where `commenttext' has value 'whatever comment text' and 'blogid' has value $blog_id

//if it doesn't exist, create it
if($comment == null){
    $comment = INSERT INTO comments a new record and set 'commenttext' to 'the comment text' and 'blogid' to $blog_id.
}

$comment_id = $comment->getId(); 
```

**所以我的问题是：是否可以在单个 mysql 查询中编写它？**

[我在这里](https://stackoverflow.com/a/2278838/710316)发现了一个类似的问题，但它并没有完全解决我的问题，而且我不确定这是否是最有效的方法。

这 2 个表是`blogs`，`comments`其中的每一行`comments`都有一个字段`blogid`，将其链接到 中的正确博客`blogs`。所以它基本上是一个 1:many 关系，其中每一`blog`行都可以链接到许多`comment`行。它们看起来像这样：

```
blogs:

id        link                  other fields
--------------------------------------------
1         first-blog-url
2         blog-2-url
3         3rd-blog-url

comments:

id        commenttext     blogid
-----------------------------
1         random          1
2         comment         1
3         goes            1
4         here            2
5         any             2 
6         thing           3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T18:38:11.827

如果不存在，您可以使用此技术插入行：

```
INSERT INTO blogs (link)
select 'first-blog-url' 
from dual
where not exists
( select 1
  from blogs
  where  link = 'first-blog-url'
); 
```

如您所见，select 子句将仅返回一行，其中仅当数据库中尚不存在数据时才插入数据。[您可以在 SQLFIDDLE 上对其进行测试。](http://sqlfiddle.com/#!2/7c327/1/0)

要插入`comment`表格，您可以使用相同的技术。如果插入到期，您可以使用[LAST_INSERT_ID()](http://dev.mysql.com/doc/refman/5.6/en/getting-unique-id.html)`Blog id`获取第二个查询（如果没有，您需要一个新查询）。

这只是一个开始点，也许您可​​以将 4 个查询减少到 3 个。欢迎任何评论以找出最终解决方案。

如您所知，MySQL 没有 MERGE 语句。我认为[替换](http://dev.mysql.com/doc/refman/5.6/en/replace.html)不符合您的要求。

# c# - 通过列表框控件跟踪博客文章

> ID：12124479
> 
> 赞同：1
> 
> 时间：2012-08-25T18:15:07.313
> 
> 标签：c#, arraylist, checkedlistbox

对不起，错误的标题，我不知道如何描述它。

基本上，我正在阅读来自 Wordpress 博客的 RSS 提要的博客文章，然后将它们添加到`CheckedListBox`控件中。

博客文章信息（文章标题和永久链接）以`ArrayList`如下方式存储：

```
// Store post data
ArrayList post = new ArrayList();
post.Add(this.nodeItem["title"].InnerText);
post.Add(this.nodeItem["link"].InnerText);

// Store item data in posts list
posts.Add(post); 
```

然后将 ArrayList`posts`返回到我的主窗体。我像这样填充 CheckedListBox：

```
// Grab the latest posts
this.posts = rssReader.getLatestPosts();

// Loop through them and add to latest posts listbox
foreach (ArrayList post in posts)
{
    lbLatestPosts.Items.Add(post[0]);
} 
```

运行后，我的 CheckedListBox 会显示帖子标题。我希望能够根据帖子 URL 解析出信息，如果你记得的话，就是`post[1]`. 但是，我无法做到这一点，因为我没有办法`post[1]`从 CheckedListBox 中获取。

我能想到的唯一方法是循环检查 CheckedListBox 中的每个项目，然后将帖子标题与`posts`. 如果它们匹配，我可以使用数组索引 like `post = posts[index][1]`。

不过，我一直告诉自己必须有更好的方法来做到这一点。在那儿？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T05:56:12.153

直接来自[msdn 示例](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.checkeditems.aspx)。像这样：

```
listView1.CheckBoxes = true;
listView1.View = View.Details;

//Set the column headers and populate the columns.
listView1.HeaderStyle = ColumnHeaderStyle.Nonclickable;

ColumnHeader columnHeader1 = new ColumnHeader();
columnHeader1.Text = "Title";
columnHeader1.TextAlign = HorizontalAlignment.Left;
columnHeader1.Width = 146;

listView1.Columns.Add(columnHeader1);

listView1.BeginUpdate();

foreach (ArrayList post in posts)
{
    string[] postArray = new string[] { post[0].ToString() };
    ListViewItem listItem = new ListViewItem(postArray);
    listItem.Tag = post;
    listView1.Items.Add(listItem);
}

//Call EndUpdate when you finish adding items to the ListView.
listView1.EndUpdate(); 
```

现在您知道如何`post[1]`从我猜的 listView 项目中获取了。只需从 Tag 属性中获取即可。但最后我会要求你取消 ArrayLists..

# javascript - 使用 2 种方法在 Google 地图上显示标记和折线

> ID：12124481
> 
> 赞同：1
> 
> 时间：2012-08-25T18:15:26.410
> 
> 标签：javascript, google-maps, google-maps-markers

我正在尝试结合两种单独的方法在一张地图上同时显示标记和折线。可能吗？如果是这样，我将如何做到这一点。或者相反，我将如何将折线添加到我的标记样本中。

来自[http://you.arenot.me/2010/06/29/google-maps-api-v3-0-multiple-markers-multiple-infowindows/](http://you.arenot.me/2010/06/29/google-maps-api-v3-0-multiple-markers-multiple-infowindows/)

如果没有我的实际代码，我很欣赏这可能是一个浪费的帖子..但是我在添加代码时遇到了麻烦..也许这应该是我的第一个问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T19:43:10.180

当然可以在同一张地图上显示标记和折线：

*   [这](http://www.geocodezip.com/v3_GenericMapBrowser.asp?filename=SteveFossett.xml)是一个同时显示标记和独立折线的示例。
*   [这](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=mtrmtrip.xml)是一个使用第三方 geoxml3 KML 解析器从 KML 文件（或使用 KmlLayer）创建它们的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T19:17:34.290

该脚本将添加标记并在它们之间绘制一条折线：

```
<script>

  var poly;
  var map;

  function initialize() {
    var chicago = new google.maps.LatLng(41.879535, -87.624333);
    var mapOptions = {
      zoom: 7,
      center: chicago,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

    var polyOptions = {
      strokeColor: '#000000',
      strokeOpacity: 1.0,
      strokeWeight: 3
    }
    poly = new google.maps.Polyline(polyOptions);
    poly.setMap(map);

    // Add a listener for the click event
    google.maps.event.addListener(map, 'click', addLatLng);
  }

  /**
   * Handles click events on a map, and adds a new point to the Polyline.
   * @param {MouseEvent} mouseEvent
   */
  function addLatLng(event) {

    var path = poly.getPath();

    // Because path is an MVCArray, we can simply append a new coordinate
    // and it will automatically appear
    path.push(event.latLng);

    // Add a new marker at the new plotted point on the polyline.
    var marker = new google.maps.Marker({
      position: event.latLng,
      title: '#' + path.getLength(),
      map: map
    });
  }

</script> 
```

优秀的文档在这里可用：

[https://developers.google.com/maps/documentation/javascript/reference](https://developers.google.com/maps/documentation/javascript/reference)

[https://google-developers.appspot.com/maps/documentation/javascript/examples/polyline-complex](https://google-developers.appspot.com/maps/documentation/javascript/examples/polyline-complex)

# bash - 将参数传递给 tcsh 解释器的 Bash 脚本

> ID：12124482
> 
> 赞同：2
> 
> 时间：2012-08-25T18:15:57.830
> 
> 标签：bash, csh, tcsh

这需要一些 bash 和 tcsh 的知识。我想在 bash 脚本中添加一行，该脚本调用带有一些参数的命令，但使用 tcsh 解释器。假设我要调用的命令是`ls`（这很愚蠢，但它说明了问题）。所以如果`my_script`包含：

```
#!/bin/bash
/bin/tcsh -c "ls"' "$*"' "${@}" 
```

然后我将其称为如下：

```
my_script "first file" "second file" 
```

我明白了：

```
ls: first file second file: No such file or directory 
```

问题是 tcsh 只接收一个参数，`first file second file`而不是两个参数。我该如何补救？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T20:13:37.287

尽管有评论，但没有直接的问题`tcsh`（相信我，我不是 C shell 的粉丝），`bash`本身也没有问题。实际上，如果您将 替换为 ，问题将是相似`tcsh`的`bash`。

问题是你想要做的事情实际上是非常难以做到的。让我解释...

在`bash`脚本中，您试图创建一个字符串，该字符串将包含一个`tcsh`可以正确解释的有效命令行，包括在参数中保留空格。

## 逐步制定答案

让我们从一些简单的东西开始——其中没有空格的参数：

```
set -- /bin/ls /bin/sh /bin/bash   # Set the arguments to bash
/bin/tcsh -c "ls -l $*" 
```

这将正常工作；它将执行 C shell，C shell 将处理字符串并执行：

```
ls -l /bin/ls /bin/sh /bin/bash 
```

因此，问题是当整个命令被指定为单个字符串时，如何可靠地将带有空格的参数传递给 C shell。

您已经知道这会遇到问题：

```
mkdir "./a b c" "./d e f"
set -- "a b c" "d e f"          # Two arguments with spaces
/bin/tcsh -c "ls -al $*" 
```

在我的机器上，我得到：

```
ls: a: No such file or directory
ls: b: No such file or directory
ls: c: No such file or directory
ls: d: No such file or directory
ls: e: No such file or directory
ls: f: No such file or directory 
```

如果我们手动进行扩展，我们可以通过以下方式获得所需的结果（对于这个有限的示例）：

```
mkdir "./a b c" "./d e f"
set -- "a b c" "d e f"          # Two arguments with spaces
/bin/tcsh -c "ls -al 'a b c' 'd e f'" 
```

这产生：

```
a b c:
total 0
drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:21 .
drwxr-xr-x  4 jleffler  staff  136 Aug 25 12:21 ..

d e f:
total 0
drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:21 .
drwxr-xr-x  4 jleffler  staff  136 Aug 25 12:21 .. 
```

（我将假设两个目录 ' `a b c`' 和 ' `d e f`' 从这里开始就存在，而不是每次都创建它们。）

因此，目标必须是找到一种方法来创建一个在由 C shell 解释时将是安全的字符串，自动（而不是手动显示）。由于 C shell 具有元句法动物园（许多特殊字符），完整的任务会很困难，但让我们先完成简单的事情——空格和没有元字符。

对于每个参数，我们希望在开头和结尾添加单引号，并确保字符串中的任何单引号都受到保护。那是它自己的小聚会；诀窍是用第一个单引号结束当前单引号字符串的序列替换嵌入的单引号`'\''`，反斜杠单引号嵌入一个单引号，最后一个单引号开始一个新的单引号字符串。我们希望将其添加到当前命令字符串的末尾。因此，这导致：

```
set -- "a b c" "d e f"          # Two arguments with spaces
cmd="ls -al"
for arg in "$@"
do escaped=$(sed -e "s/'/'\\''/g" -e "s/^/'/" -e "s/$/'/" <<< "$arg")
   cmd="$cmd $escaped"
done
echo "$cmd"
tcsh -c "$cmd" 
```

这会产生（当然，该`ls`行来自`echo`）：

```
ls -al 'a b c' 'd e f'
a b c:
total 0
drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:21 .
drwxr-xr-x  4 jleffler  staff  136 Aug 25 12:21 ..

d e f:
total 0
drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:21 .
drwxr-xr-x  4 jleffler  staff  136 Aug 25 12:21 .. 
```

好的，到目前为止，一切都很好。那么元句法动物园呢？幸运的是，大多数字符在单引号内没有特殊含义。

是时候将一些更复杂的目录添加到列表中了（这些目录也会在问题的持续时间内存在）。确保您知道正在创建的名称；你需要很好地理解 shell 引用。

作为练习，对于在此问题中创建的每个目录名称，写出用单引号括起来、用双引号括起来并且整个参数周围没有任何引号时给出相同结果的替代方案。

```
$ mkdir '! % *' '$(pwd)' '`pwd`' 
```

脚本几乎没有变化——它使用 shell glob 生成目录名称列表，依次回显每个参数，并列出 inode 编号：

```
set -- *
cmd="ls -ail"
for arg in "$@"
do echo "arg: $arg"
   escaped=$(sed -e "s/'/'\\''/g" -e "s/^/'/" -e "s/$/'/" <<< "$arg")
   cmd="$cmd $escaped"
done
echo "cmd: $cmd"
tcsh -c "$cmd" 
```

嘿，快点：

```
arg: ! % *
arg: $(pwd)
arg: `pwd`
arg: a b c
arg: d e f
cmd: ls -ail '! % *' '$(pwd)' '`pwd`' 'a b c' 'd e f'
! % *:
total 0
1640119 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:34 .
1640040 drwxr-xr-x  7 jleffler  staff  238 Aug 25 12:34 ..

$(pwd):
total 0
1640120 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:34 .
1640040 drwxr-xr-x  7 jleffler  staff  238 Aug 25 12:34 ..

`pwd`:
total 0
1640121 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:34 .
1640040 drwxr-xr-x  7 jleffler  staff  238 Aug 25 12:34 ..

a b c:
total 0
1640056 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:21 .
1640040 drwxr-xr-x  7 jleffler  staff  238 Aug 25 12:34 ..

d e f:
total 0
1640057 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:21 .
1640040 drwxr-xr-x  7 jleffler  staff  238 Aug 25 12:34 .. 
```

正是医生吩咐的！但我们还不够残酷：就像 Knuth 所说，当你测试代码时，你必须进入一种非常讨厌的卑鄙心态，所以让我们尝试一下：

```
$ mkdir "O'Reilly's Books"
$ mkdir "' \` \""
$ mkdir '${HOME}' '$PATH' 'He said, "Don'\''t Do It!"'
$ ls -l
total 0
drwxr-xr-x  2 jleffler  staff  68 Aug 25 12:34 ! % *
drwxr-xr-x  2 jleffler  staff  68 Aug 25 12:34 $(pwd)
drwxr-xr-x  2 jleffler  staff  68 Aug 25 12:45 $PATH
drwxr-xr-x  2 jleffler  staff  68 Aug 25 12:45 ${HOME}
drwxr-xr-x  2 jleffler  staff  68 Aug 25 12:43 ' ` "
drwxr-xr-x  2 jleffler  staff  68 Aug 25 12:45 He said, "Don't Do It!"
drwxr-xr-x  2 jleffler  staff  68 Aug 25 12:43 O'Reilly's Books
drwxr-xr-x  2 jleffler  staff  68 Aug 25 12:34 `pwd`
drwxr-xr-x  2 jleffler  staff  68 Aug 25 12:21 a b c
drwxr-xr-x  2 jleffler  staff  68 Aug 25 12:21 d e f
$ 
```

结果是：

```
arg: ! % *
arg: $(pwd)
arg: $PATH
arg: ${HOME}
arg: ' ` "
arg: He said, "Don't Do It!"
arg: O'Reilly's Books
arg: `pwd`
arg: a b c
arg: d e f
cmd: ls -ail '! % *' '$(pwd)' '$PATH' '${HOME}' '''' ` "' 'He said, "Don'''t Do It!"' 'O'''Reilly'''s Books' '`pwd`' 'a b c' 'd e f'
Unmatched `. 
```

那不是我们想要的。但是，部分麻烦在于标记为 ' `cmd:`' 的行中的 4 个单引号序列；它应该是`''\''`。所以，`sed`剧本不够准确。

```
set -- *
cmd="ls -ail"
for arg in "$@"
do echo "arg: $arg"
   escaped=$(sed -e "s/'/'\\\\''/g" -e "s/^/'/" -e "s/$/'/" <<< "$arg")
   cmd="$cmd $escaped"
done
echo "cmd: $cmd"
tcsh -c "$cmd" 
```

当它运行时，我们得到：

```
arg: ! % *
arg: $(pwd)
arg: $PATH
arg: ${HOME}
arg: ' ` "
arg: He said, "Don't Do It!"
arg: O'Reilly's Books
arg: `pwd`
arg: a b c
arg: d e f
arg: x.sh
cmd: ls -ail '! % *' '$(pwd)' '$PATH' '${HOME}' ''\'' ` "' 'He said, "Don'\''t Do It!"' 'O'\''Reilly'\''s Books' '`pwd`' 'a b c' 'd e f' 'x.sh'
1640231 -rw-r--r--  1 jleffler  staff  223 Aug 25 12:56 x.sh

! % *:
total 0
1640119 drwxr-xr-x   2 jleffler  staff   68 Aug 25 12:34 .
1640040 drwxr-xr-x  13 jleffler  staff  442 Aug 25 12:56 ..

$(pwd):
total 0
1640120 drwxr-xr-x   2 jleffler  staff   68 Aug 25 12:34 .
1640040 drwxr-xr-x  13 jleffler  staff  442 Aug 25 12:56 ..

$PATH:
total 0
1640176 drwxr-xr-x   2 jleffler  staff   68 Aug 25 12:45 .
1640040 drwxr-xr-x  13 jleffler  staff  442 Aug 25 12:56 ..

${HOME}:
total 0
1640175 drwxr-xr-x   2 jleffler  staff   68 Aug 25 12:45 .
1640040 drwxr-xr-x  13 jleffler  staff  442 Aug 25 12:56 ..

' ` ":
total 0
1640163 drwxr-xr-x   2 jleffler  staff   68 Aug 25 12:43 .
1640040 drwxr-xr-x  13 jleffler  staff  442 Aug 25 12:56 ..

He said, "Don't Do It!":
total 0
1640177 drwxr-xr-x   2 jleffler  staff   68 Aug 25 12:45 .
1640040 drwxr-xr-x  13 jleffler  staff  442 Aug 25 12:56 ..

O'Reilly's Books:
total 0
1640164 drwxr-xr-x   2 jleffler  staff   68 Aug 25 12:43 .
1640040 drwxr-xr-x  13 jleffler  staff  442 Aug 25 12:56 ..

`pwd`:
total 0
1640121 drwxr-xr-x   2 jleffler  staff   68 Aug 25 12:34 .
1640040 drwxr-xr-x  13 jleffler  staff  442 Aug 25 12:56 ..

a b c:
total 0
1640056 drwxr-xr-x   2 jleffler  staff   68 Aug 25 12:21 .
1640040 drwxr-xr-x  13 jleffler  staff  442 Aug 25 12:56 ..

d e f:
total 0
1640057 drwxr-xr-x   2 jleffler  staff   68 Aug 25 12:21 .
1640040 drwxr-xr-x  13 jleffler  staff  442 Aug 25 12:56 .. 
```

够意思吗？越来越接近。包含反斜杠的目录名呢？

```
$ mkdir "a \\' \\\` \\$ b \\\" c"      # Make sure you do the exercise!
$ mkdir 'a \\'\'' \\\` \\$ b \\\" c'   # Make sure you do the exercise!
$ ls -li
total 8
1640119 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:34 ! % *
1640120 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:34 $(pwd)
1640176 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:45 $PATH
1640175 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:45 ${HOME}
1640163 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:43 ' ` "
1640177 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:45 He said, "Don't Do It!"
1640164 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:43 O'Reilly's Books
1640121 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:34 `pwd`
1640243 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:58 a \' \` \$ b \" c
1640259 drwxr-xr-x  2 jleffler  staff   68 Aug 25 13:01 a \\' \\\` \\$ b \\\" c
1640056 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:21 a b c
1640057 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:21 d e f
1640231 -rw-r--r--  1 jleffler  staff  223 Aug 25 12:56 x.sh
$ 
```

`ls -ail`更改为后`ls -dil`，输出为：

```
$ bash x.sh
arg: ! % *
arg: $(pwd)
arg: $PATH
arg: ${HOME}
arg: ' ` "
arg: He said, "Don't Do It!"
arg: O'Reilly's Books
arg: `pwd`
arg: a \' \` \$ b \" c
arg: a \\' \\\` \\$ b \\\" c
arg: a b c
arg: d e f
arg: x.sh
cmd: ls -dil '! % *' '$(pwd)' '$PATH' '${HOME}' ''\'' ` "' 'He said, "Don'\''t Do It!"' 'O'\''Reilly'\''s Books' '`pwd`' 'a \'\'' \` \$ b \" c' 'a \\'\'' \\\` \\$ b \\\" c' 'a b c' 'd e f' 'x.sh'
1640119 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:34 ! % *
1640120 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:34 $(pwd)
1640176 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:45 $PATH
1640175 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:45 ${HOME}
1640163 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:43 ' ` "
1640177 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:45 He said, "Don't Do It!"
1640164 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:43 O'Reilly's Books
1640121 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:34 `pwd`
1640243 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:58 a \' \` \$ b \" c
1640259 drwxr-xr-x  2 jleffler  staff   68 Aug 25 13:01 a \\' \\\` \\$ b \\\" c
1640056 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:21 a b c
1640057 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:21 d e f
1640271 -rw-r--r--  1 jleffler  staff  223 Aug 25 13:03 x.sh
$ 
```

## 工作脚本

```
set -- *
cmd="ls -ail"
for arg in "$@"
do echo "arg: $arg"
   escaped=$(sed -e "s/'/'\\\\''/g" -e "s/^/'/" -e "s/$/'/" <<< "$arg")
   cmd="$cmd $escaped"
done
echo "cmd: $cmd"
tcsh -c "$cmd" 
```

## 概括

解决方案的关键部分是：

1.  认识到参数周围需要单引号。
2.  知道如何转义单引号。
3.  知道如何逃避反斜杠。
4.  当你做你的测试时真的很残酷！
5.  如果你以前做过，它会有所帮助...

* * *

哦，笨蛋！我忘了测试包含换行符的参数：

```
$ mkdir "a
> b
> c"
$ ls -li
total 8
1640119 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:34 ! % *
1640120 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:34 $(pwd)
1640176 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:45 $PATH
1640175 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:45 ${HOME}
1640163 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:43 ' ` "
1640177 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:45 He said, "Don't Do It!"
1640164 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:43 O'Reilly's Books
1640121 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:34 `pwd`
1640336 drwxr-xr-x  2 jleffler  staff   68 Aug 25 13:16 a?b?c
1640243 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:58 a \' \` \$ b \" c
1640259 drwxr-xr-x  2 jleffler  staff   68 Aug 25 13:01 a \\' \\\` \\$ b \\\" c
1640056 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:21 a b c
1640057 drwxr-xr-x  2 jleffler  staff   68 Aug 25 12:21 d e f
1640271 -rw-r--r--  1 jleffler  staff  223 Aug 25 13:03 x.sh
$ 
```

好吧，有一些原因为什么你不应该尝试解析来自`ls`;的输出。它生成了问号来代替换行符（这是在 Mac OS X 10.8.1 上，*不是*GNU `ls`，仅适用于那些在家记分的人；其他系统的行为可能会有所不同）。

当脚本 ( `x.sh`) 运行时，我得到：

```
$ bash x.sh
arg: ! % *
arg: $(pwd)
arg: $PATH
arg: ${HOME}
arg: ' ` "
arg: He said, "Don't Do It!"
arg: O'Reilly's Books
arg: `pwd`
arg: a
b
c
arg: a \' \` \$ b \" c
arg: a \\' \\\` \\$ b \\\" c
arg: a b c
arg: d e f
arg: x.sh
cmd: ls -dil '! % *' '$(pwd)' '$PATH' '${HOME}' ''\'' ` "' 'He said, "Don'\''t Do It!"' 'O'\''Reilly'\''s Books' '`pwd`' 'a'
'b'
'c' 'a \'\'' \` \$ b \" c' 'a \\'\'' \\\` \\$ b \\\" c' 'a b c' 'd e f' 'x.sh'
ls: a: No such file or directory
1640119 drwxr-xr-x  2 jleffler  staff  68 Aug 25 12:34 ! % *
1640120 drwxr-xr-x  2 jleffler  staff  68 Aug 25 12:34 $(pwd)
1640176 drwxr-xr-x  2 jleffler  staff  68 Aug 25 12:45 $PATH
1640175 drwxr-xr-x  2 jleffler  staff  68 Aug 25 12:45 ${HOME}
1640163 drwxr-xr-x  2 jleffler  staff  68 Aug 25 12:43 ' ` "
1640177 drwxr-xr-x  2 jleffler  staff  68 Aug 25 12:45 He said, "Don't Do It!"
1640164 drwxr-xr-x  2 jleffler  staff  68 Aug 25 12:43 O'Reilly's Books
1640121 drwxr-xr-x  2 jleffler  staff  68 Aug 25 12:34 `pwd`
b: Command not found.
c: Command not found.
$ 
```

这里有多个问题。该`sed`脚本分别处理参数的每一行。这真的不能用`sed`; 或者，也许更准确地说，这不是我想用`sed`. 很久以前，我编写了一个 C 程序`escape`来完成`sed`脚本几乎可以完成的工作。

```
#!/bin/bash

set -- *
escaped=$(escape "$@")
cmd="ls -dil $escaped"
echo "cmd: $cmd"
bash -c "$cmd"
tcsh -c "$cmd" 
```

请注意，我已在`bash`其中添加了对 in 的调用。输出是：

```
cmd: ls -dil '! % *' '$(pwd)' '$PATH' '${HOME}' ''\'' ` "' 'He said, "Don'\''t Do It!"' 'O'\''Reilly'\''s Books' '`pwd`' 'a
b
c' 'a b c' 'd e f' x.sh
178474064 drwxr-xr-x  2 jleffler  staff   68 Aug 25 13:38 ! % *
178474065 drwxr-xr-x  2 jleffler  staff   68 Aug 25 13:38 $(pwd)
178474219 drwxr-xr-x  2 jleffler  staff   68 Aug 25 13:38 $PATH
178474218 drwxr-xr-x  2 jleffler  staff   68 Aug 25 13:38 ${HOME}
178474170 drwxr-xr-x  2 jleffler  staff   68 Aug 25 13:38 ' ` "
178474220 drwxr-xr-x  2 jleffler  staff   68 Aug 25 13:38 He said, "Don't Do It!"
178474131 drwxr-xr-x  2 jleffler  staff   68 Aug 25 13:38 O'Reilly's Books
178474066 drwxr-xr-x  2 jleffler  staff   68 Aug 25 13:38 `pwd`
178474998 drwxr-xr-x  2 jleffler  staff   68 Aug 25 13:40 a?b?c
178473958 drwxr-xr-x  2 jleffler  staff   68 Aug 25 13:38 a b c
178473959 drwxr-xr-x  2 jleffler  staff   68 Aug 25 13:38 d e f
178475097 -rw-r--r--  1 jleffler  staff  115 Aug 25 13:41 x.sh
Unmatched '.
b: Command not found.
Unmatched '. 
```

废话？好吧，`bash`从 Bourne shell 派生的其他 shell，例如`ksh`, 可以使用从一行开始并在其他行上继续的字符串，但 C shell 及其派生类则不行。他们要求在换行符之前使用反斜杠。因此，要使用`tcsh`，我必须升级`escape`以生成 C shell 的输出。一点也不难做，但需要做。据推测，这将是一种选择`-c`，并且为了通用安全，调用将变为：

```
escaped=$(escape -c -- "$@") 
```

使用双破折号防止将参数误解`"$@"`为自身的选项`escape`。在某种程度上，这表明很难编写脚本来处理包含可移植文件名字符集之外的字符的文件名。幸运的是，我不必经常处理 C shell；我不打算将其作为其中的一部分，`escape`因为它是接口的更改（当前代码没有自己的任何选项，因此我不使用双破折号表示法`escape`）。如果我需要它，它将成为`cescape`无条件支持C shell。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T20:26:56.713

你的 tcsh 脚本是错误的。当心，我不知道 tcsh，但这是我从一些测试中可以看出的。

将其更改为

```
#!/bin/bash
/bin/tcsh -c 'ls "$1" "$2"' "$@" 
```

就像在 bash 端一样，你需要 a`"$@"`而不是你的 tcsh 端。`"$*"`在 bash 中，`"$*"`扩展为一个单词（所有位置参数的串联，由第一个 IFS 字符（默认空格）分隔），而`"$@"`每个位置参数扩展为一个单词。

在 tcsh 中，似乎`"$*"`也是如此，但我没有发现`"$@"`. 在这种情况下，您知道参数的数量并可以使用`"$1" "$2"`。请注意，很多人都诅咒过 tcsh，所以很可能根本没有更好的解决方案......

因此，为了纠正您的假设，在您的原始脚本中，不是 tcsh 只从 bash 接收一个参数，而是 ls 只从 tcsh 接收一个参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T17:16:19.397

要回答我自己的问题......这是解决方案：

```
/bin/tcsh -c "ls "'$argv:q' "${@}" 
```

# javascript - 为什么不显示多个 HTML 对象对象？

> ID：12124487
> 
> 赞同：2
> 
> 时间：2012-08-25T18:16:44.490
> 
> 标签：javascript, html, css, object, onmouseover

我正在尝试从 3rd 方网站获得用户控制的内容显示。在演示设置中，链接的 onmouseover 会导致显示一个对象，然后在 onmouseout 上消失。

该演示适用于其中一个对象，如果我删除其他对象，则依次适用于所有对象，所以我猜测问题在于对象相互干扰。

我对 z-index 进行了猜测，但这似乎不起作用。

这是演示文件：

```
<!DOCTYPE html>
<html>
<head>
<title>On mouseover show object</title>
<script>
function toggleDiv(id, flagit)
{
if (flagit === 1){
document.getElementById("demo").innerHTML="Over";
document.getElementById(id).style.visibility = "visible";
document.getElementById(id).style.zIndex=1;
}
else {
document.getElementById("demo").innerHTML="Not over";
document.getElementById(id).style.visibility = "hidden";
document.getElementById(id).style.zIndex=-1;
}
}
</script>
<style type="text/css">
#div1, #div2, #div3 {visibility:hidden; position:absolute; width:400px;}
#div2 {left:400px;}
#div3 {left:800px;}

</style>
</head>

<body>
<a href="#" onMouseOver="toggleDiv('div1',1)" onMouseOut="toggleDiv('div1',0)">Link 1</a> |
<a href="#" onMouseOver="toggleDiv('div2',1)" onMouseOut="toggleDiv('div2',0)">Link 2</a> |
<a href="#" onMouseOver="toggleDiv('div3',1)" onMouseOut="toggleDiv('div3',0)">Link 3</a>
<h1>My Web Page</h1>

<p id="demo">A Paragraph.</p>

<object id="div1" type="text/html" data="http://en.m.wikipedia.org/wiki/Woodworking" />
<object id="div2" type="text/html" data="http://en.m.wikipedia.org/wiki/Ironwork" />
<object id="div3" type="text/html" data="http://en.m.wikipedia.org/wiki/Stonemasonry" />

</body>
</html> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T18:31:52.710

我在萤火虫中检查了它，并意识到其他对象根本没有被渲染。我猜测`object`标签需要关闭`</object>`

代码固定如下：

```
<!DOCTYPE html>
<html>
<head>
<title>On mouseover show object</title>
<script>
function toggleDiv(id, flagit)
{
if (flagit === 1){
document.getElementById("demo").innerHTML="Over";
document.getElementById(id).style.visibility = "visible";
document.getElementById(id).style.zIndex=1;
}
else {
document.getElementById("demo").innerHTML="Not over";
document.getElementById(id).style.visibility = "hidden";
document.getElementById(id).style.zIndex=-1;
}
}
</script>
<style type="text/css">
#div1, #div2, #div3 {visibility:hidden; position:absolute; width:400px;}
#div2 {left:400px;}
#div3 {left:800px;}

</style>
</head>

<body>
<a href="#" onMouseOver="toggleDiv('div1',1)" onMouseOut="toggleDiv('div1',0)">Link 1</a> |
<a href="#" onMouseOver="toggleDiv('div2',1)" onMouseOut="toggleDiv('div2',0)">Link 2</a> |
<a href="#" onMouseOver="toggleDiv('div3',1)" onMouseOut="toggleDiv('div3',0)">Link 3</a>
<h1>My Web Page</h1>

<p id="demo">A Paragraph.</p>

<object id="div1" type="text/html" data="http://en.m.wikipedia.org/wiki/Woodworking" > </object>
<object id="div2" type="text/html" data="http://en.m.wikipedia.org/wiki/Ironwork" /> </object>
<object id="div3" type="text/html" data="http://en.m.wikipedia.org/wiki/Stonemasonry" /> </object>

</body>
</html> 
```

# php - 数组 Rand 不随机化

> ID：12124492
> 
> 赞同：0
> 
> 时间：2012-08-25T18:17:20.257
> 
> 标签：php, arrays

创建了一个需要随机化的数组，但是 array_rand 不起作用。我的语法在某处有问题吗？我没发现有什么不对。另外，array_rand 在代码的其他地方使用，所以我知道可以使用它。

```
$array_11 = array (
"40","20","36",
);

$random_width_1 = array_rand($array_11, 3);

echo $array_11[$random_width_1[0]];
echo $array_11[$random_width_1[1]];
echo $array_11[$random_width_1[2]]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T18:40:20.070

尝试使用[http://php.net/shuffle](http://php.net/shuffle)而不是 array_rand

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T18:21:29.503

问题是`array_rand`对它的输出数组进行排序。如果您询问的项目与您的输入完全相同，您将按顺序获得所有索引。（[见此评论](http://www.php.net/manual/en/function.array-rand.php#74406)）

如果要创建数组的随机顺序，可以使用`shuffle`

# ios - iPad 的日历视图组件（商业或免费）

> ID：12124498
> 
> 赞同：0
> 
> 时间：2012-08-25T18:17:37.267
> 
> 标签：ios, ipad

我正在寻找 iPad 日历组件，例如 iPhone 中显示的月历或 iPad 日历应用程序中的月度表视图。我发现了为 iPhone 制作的有趣组件，比如 Kal，但没有任何类似的东西可以通用。我更喜欢免费组件，但也考虑商业解决方案。任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T21:07:53.227

[你可以在这里](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=calendar)找到几个不同的日历实现

# drupal - 在drupal中隐藏/加密或以其他方式更改mp4文件的路径

> ID：12124503
> 
> 赞同：0
> 
> 时间：2012-08-25T18:18:28.717
> 
> 标签：drupal, drupal-7

我有提供给用户的视频文件（mp4，因为我希望人们能够在 ipad 等上查看它们）。但是，其中一些视频仅对拥有一定数量用户点的用户可用。我有这样的工作，如果用户没有足够的用户点，他们就无法查看节点。所有用户都有相同的角色（视频查看者），问题是有足够用户点的人可以查看节点，获取视频的 url，然后将其提供给具有视频查看者角色但没有'没有足够的用户积分然后那个人可以直接下载那个mp4。

如果用户无权访问节点或以某种方式隐藏文件的路径，则只是寻找一种方法来限制对 mp4 文件的访问。我将 mp4 存储在私有文件系统中，但这并没有解决问题，因为用户具有相同的角色。

我有这个（http://www.ioncube.com/html_encoder.php）在我的网站空间（非drupal页面）的静态页面上工作，但无法在我的drupal设置中工作。当我在我的节点中包含 php 代码以包含 php 文件时，它只会给我一个空白页。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T19:21:57.193

Drupal 文档还没有对此我说的不多。

[http://drupal.org/documentation/modules/file#access](http://drupal.org/documentation/modules/file#access)

> **管理文件位置和访问**
> 
> 创建文件字段时，您可以指定站点文件系统的子目录，用于存储此内容类型的上传文件。站点的文件系统路径在文件系统页面（管理 > 配置 > 媒体：文件系统）上定义。
> 
> 您还可以指定文件是存储在公共目录中还是私有文件存储区域中。公共目录下的文件可以直接通过web服务器访问；当列出公共文件时，将使用文件的直接链接，任何知道文件 URL 的人都可以下载该文件。私有目录中的文件不能直接通过 Web 服务器访问；当列出私有文件时，链接是 Drupal 路径请求。这增加了服务器加载和下载时间，因为 Drupal 必须解析每个文件下载请求的路径，但允许访问限制。
> 
> 公共文件的最佳做法是将它们存储在多站点目录中，例如：sites/default/files
> 
> 为您的文件安全地添加私有目录的默认方法是使用您的 Web 服务器无法直接访问但 Drupal 可以访问的目录。理想情况下，该目录应位于 Drupal 根文件夹之外。
> 
> 为文件添加私有目录的简单方法是在公共目录下创建一个子目录，例如：sites/default/files/private
> 
> 当您在 admin/config/media/file-system 中指定私有目录时，它会自动创建子目录并创建一个简单的 .htaccess 文件，并拒绝所有。这会阻止 Apache 从此目录提供文件。确保通过将文件添加到该目录并验证您不能直接浏览该目录来对此进行测试。如果这不起作用，任何可以猜到 URL 的人都可以访问此目录中的所有文件！请注意，非 Apache Web 服务器可能需要额外的配置来保护私有文件目录。
> 
> **访问私人文件**
> 
> 配置后，无法通过直接链接访问存储在私有目录中的文件；但是，如果 Drupal 构造了一个指向该文件的链接，那么任何可以看到该链接的人都可以访问该文件。
> 
> 例如：您创建了一个新的内容类型，其中包含一个文件字段，该字段将文件存储在您站点的私有文件目录中。接下来，您从这个新的内容类型创建一个节点并附加两个新文件。当节点发布时，两个附加文件的链接都是可见的，任何可以查看该节点的人都可以下载这些文件。现在，如果您取消发布该节点，即使您使用指向在发布该节点时有效的文件的直接链接，所有附加文件也将无法下载。
> 
> 重新发布节点，并禁用其中一个文件的“显示”复选框。保存节点。现在，一个文件可供公共下载访问，而另一个文件不可访问——即使您拥有未列出的文件的直接 URL，您也无法下载该文件。
> 
> 为了更精细地控制谁可以查看/下载附件，您将需要一个额外的访问控制模块。您可以自己编写模块，或使用贡献的模块，例如[Content Access](http://drupal.org/project/content_access)。

# .net - .Net 子类中的异常捕获

> ID：12124507
> 
> 赞同：2
> 
> 时间：2012-08-25T18:18:52.053
> 
> 标签：.net, exception, attributes

在.net 中，我如何让编写子类的人意识到他们需要为基类可能抛出的特定异常类型编写代码？理想情况下，我希望强制开发人员尝试..捕获异常或在异常发生之前执行必要的验证......我是否可以使用属性来强制开发人员为异常编写代码？

例如....

我有一些调用“保存”方法的代码。在对象上调用 save 之前，我有一个提供一些验证的拦截类。如果一个类不是处于有效状态，那么我会抛出一个异常（我正在查看的不是我的代码，所以此时不​​使用异常不是一个可接受的解决方案......），我想知道的是我如何向我的代码的使用者表明他们应该检查潜在的异常并对其进行编码，或者至少执行检查以使异常不会发生......？

所以简单来说（我的代码使用了很多接口等，所以这只是一个简单的例子......）

```
class SavableObject {
    public static void Save(){
        // validation
        ValidationClass.BeforeSave();
        // then do the save... 
        DoSave();
    }
    public static void DoSave(){
        // serialize...
    }
}

class ValidationClass {
    public static void BeforeSave(T cls){
        // perform some checks on class T
        // THROW EXCEPTION if checks fail
    }
} 
```

因此，在此示例中，我的代码的使用者将从 SavableObject 继承如下，然后可以调用 save... 例如...

```
class NewSavableThing: SavableObject
{
    public static void Save(){
        base.Save();
        // calls inherited save method which may throw an exception
        // At this point the exception may still occur, and the person writing this 
        // code may not know that the exception will occur, so the question is how do 
        // I make this clear or force the developer of this class to code for 
        // the possibility that the exception may occur?!
    }
} 
```

我想知道我是否可以使用一组属性，以便我可以强制构建子类的人为异常编写代码......例如......

```
class SavableObject {
    [DeveloperMustCatchException(T)] // specifies that the exception type must be caught
    public static void Save(){ ... }
}

class NewSaveableThing: SavableObject {
    [ExceptionIgnored] / [ExceptionCaught] // specifies that the developer is aware 
    // that the exception needs catching/dealing with, I am assuming that 
    // if this attribute is not provided then the compiler will catch 
    // and prevent a successful compile...
    public static void Save() {
    }
} 
```

任何指针都非常感谢...

编辑：澄清-我想强迫开发人员承认存在异常，这样开发人员就不能不知道异常。理想情况下，如果缺少 [ExceptionIgnored] 属性或 [ExceptionHandled]（或类似）属性，编译器将停止编译......这表明已考虑到异常。我不介意忽略异常，我想做的是确保下一个开发人员知道异常的存在——如果这有意义的话。我知道在 /// 评论中我可以记录异常...

我问是因为我有几个与我们一起工作的学生不知道异常并且没有阅读所有文档，即使异常已经记录在案。我无法检查他们编写的每一行代码，所以我希望强迫他们承认异常并让编译器检查我是否考虑了异常......只要他们是，他们是否为异常编写代码是他们的选择意识到它的存在...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T18:26:55.860

使用 XML 文档（`///`方法头中的注释），特别是[异常标记](http://msdn.microsoft.com/en-us/library/w1htk11d%28v=vs.100%29.aspx)：

> 该标签允许您指定可以抛出哪些异常。

让人们知道可能会发生异常就足够了。他们可以决定抓住它或让它升级。

**编辑**

事实上，你会喜欢有 Java 的`throws`关键字。不幸的是，它在 C#[中不存在。](https://stackoverflow.com/questions/3465465/how-to-use-java-style-throws-keyword-in-c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T18:25:35.537

不应强迫开发人员在其代码中捕获和处理异常。如果他们的代码不能合理地从异常原因中恢复，则*不应*捕获它，并且异常应该冒泡。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T18:51:20.807

没有办法让编译器做你要求的事情。让编译器检查对象状态正确性的最接近方法是使用代码合同[http://msdn.microsoft.com/en-us/library/dd264808.aspx](http://msdn.microsoft.com/en-us/library/dd264808.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T19:01:24.793

我认为处理这种情况最简洁的方法是使用模板方法进行保存，并要求子类在抛出异常时提供错误处理程序的实现：

```
public abstract class SaveableObject
{
    public void Save()
    {
        try
        {
            ValidationClass.BeforeSave();
            this.SaveCore();
        }
        catch(ExceptionType ex)
        {
            OnSaveException(ex);
        }
    }

    protected abstract void OnSaveException(ExceptionType ex);
    protected abstract void SaveCore();
} 
```

# objective-c - 在桌面 Mac 应用程序中实施复制保护

> ID：12124510
> 
> 赞同：1
> 
> 时间：2012-08-25T18:19:03.590
> 
> 标签：objective-c, macos, copy-protection

我正在为我创建的小型 Mac 应用程序寻找一个易于使用的序列号注册系统。坦率地说，我并不太担心盗版，但我确实想要一种方法来显示一个带有“注册/购买”选项的屏幕，并有一个与用户名/电子邮件相关的序列号。那么，也许某种 MD5 加盐？我一直听说很多程序员使用某种 RPN 来做这件事，但坦率地说，我不知道如何创建一个与注册信息相关的序列号。

无论如何，我真的更喜欢可以为我处理注册的插件模块（有点像 sparkle :) ），但是，代替它，我很乐意接受一些很好的文档来引导创建这样的东西.

非常感谢！

# tcp - uwsgi项目中与外部源的持久连接

> ID：12124512
> 
> 赞同：0
> 
> 时间：2012-08-25T18:19:10.717
> 
> 标签：tcp, queue, uwsgi

我有一个项目需要与外部源建立 tcp 连接。每个工作线程都会向这个外部服务发送消息。

我想知道如何在不为每个请求建立和拆除连接的情况下做到这一点。我很确定 pymongo 模块做了类似的事情，但我找不到任何文档。是否可以设置某种线程安全队列并让单独的线程使用该队列？我知道我可能会为此使用 gearman，但我想避免在系统中有另一个移动部件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T14:42:44.853

uWSGI 有一个线程安全的进程共享队列系统（http://projects.unbit.it/uwsgi/wiki/QueueFramework）但是你确定使用简单的python threading.Queue 类还不够吗？

# php - 如何在 Phing 构建文件中正确使用 PHP？

> ID：12124515
> 
> 赞同：2
> 
> 时间：2012-08-25T18:19:51.443
> 
> 标签：php, phing

我正在使用 .php 直接在 Phing *build.xml*文件中编写 PHP `adhoc-task`。

以下确实有效，但会引发控制台错误：

```
<adhoc-task name="foo"><![CDATA[

 define('WP_INSTALLING', true);

 require_once '${build.dir.wp}/wp-load.php';
 require_once '${build.dir.wp}/wp-admin/includes/upgrade.php';
 require_once '${build.dir.wp}/wp-includes/wp-db.php';

 $result = wp_install( 'title', 'admin', 'admin@example.com');

]]></adhoc-task> 
```

*错误：您定义的 adhoc 类必须是 phing.Task 的实例 BUILD FAILED.The adhoc class must be an instance of phing.Task*

但它仍然有效......

如果我将 PHP 包装在一个类中，它根本不起作用：

```
<adhoc-task name="foo"><![CDATA[

   class FooTest extends Task {
   //php code ....
   }
]]></adhoc-task> 
```

*错误：您必须为 AdhocTaskdefTask 定义至少一个类。*

在构建文件中包含 PHP 的正确方法是什么（无需访问 php/phing/tasks 文件夹）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T08:09:39.470

来自`test/etc/regression/299/build.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<project name="test" default="main">

  <target name="main">
    <bar/>
  </target>

  <adhoc-task name="bar"><![CDATA[
      class BarTask extends Task {
          function main() {
              print("BarTask: success!\n");
          }
      }
  ]]></adhoc-task>

</project> 
```

# android - android ndk错误“没有这样的文件或目录”？

> ID：12124518
> 
> 赞同：3
> 
> 时间：2012-08-25T18:20:29.820
> 
> 标签：android, android-ndk

我在包含文件夹中有一些头文件。这是 Android.mk 文件的内容。

```
include $(call all-subdir-makefiles)
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE    := fpdfembedsdk
LOCAL_SRC_FILES := FoxitEMBSDK_EMBJavaSupport.cpp
LOCAL_C_INCLUDES := $(LOCAL_PATH)
LOCAL_LDLIBS := -llog -g -L. -ljnigraphics
LOCAL_LDLIBS += libfpdfemb_android.a
include $(BUILD_SHARED_LIBRARY) 
```

我收到以下错误。

```
 $ /cygdrive/c/Android/android-ndk/ndk-build
Compile++ thumb  : fpdfembedsdk <= FoxitEMBSDK_EMBJavaSupport.cpp
jni/FoxitEMBSDK_EMBJavaSupport.cpp:9:21: fatal error: fs_base.h: No such file or directory
compilation terminated.
/cygdrive/c/Android/android-ndk/build/core/build-binary.mk:255: recipe for target `obj/local/armeabi/objs/fpdfembedsdk/FoxitEMBSDK_EMBJavaSupport.o' failed
make: *** [obj/local/armeabi/objs/fpdfembedsdk/FoxitEMBSDK_EMBJavaSupport.o] Error 1 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T18:36:09.273

```
LOCAL_C_INCLUDES := $(LOCAL_PATH) 
```

检查那个。我猜你走错路了。你确定所有的标题都在那里吗？

# jetty - 如何在 Jetty 中设置动态 Expires 标头？

> ID：12124523
> 
> 赞同：0
> 
> 时间：2012-08-25T18:20:48.947
> 
> 标签：jetty, rewrite, servlet-filters, expires-header, jetty-8

Jetty 允许使用 jetty-rewrite 功能设置标头，但它似乎不是很聪明，并且只接受固定的字符串。

如何告诉 Jetty 发送“8 小时后过期”标头？

使用 Apache .htaccess 和 mod_expires 您可以执行[“访问加 8 小时”](http://httpd.apache.org/docs/2.0/mod/mod_expires.html)，但当然 Jetty 不理解 .htaccess 文件，我也无法在 jetty-rewrite.xml 中找到类似构造的任何信息

```
<Call name="addRule">
    <Arg>
        <New class="org.eclipse.jetty.rewrite.handler.HeaderPatternRule">
            <Set name="pattern">*.png</Set>
            <Set name="name">Expires</Set>
            <Set name="value">access plus 8 hours</Set>
        </New>
    </Arg>
</Call> 
```

这只是将文字文​​本“访问加 1 天”发回，这当然会被客户端忽略。

可以/应该使用 servlet 过滤器来完成吗？Jetty 有一个[Gzip 过滤器](http://wiki.eclipse.org/Jetty/Feature/GZIP_Compression)，但似乎没有为动态设置标题提供类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:02:29.950

这可能是一个不错的功能..

在 RT/Jetty 下的 bugs.eclipse.org 上打开它的增强功能。欢迎使用补丁，可以附加到错误或推送到我们的 gerrit 实例中。

话虽这么说......码头xml实际上是java上的一个xml层，所以我怀疑如果你能找到它的API，你实际上可以在java中这样做。我认为有一个 joda 时间库有一个方法，您可以在其中连接一些调用 new DateTime().plusHours(8) 来填充该值的东西。

可能最好将其添加为功能。

# android - 如何在android中使用字节数组从数据库中获取图像路径

> ID：12124524
> 
> 赞同：0
> 
> 时间：2012-08-25T18:21:03.293
> 
> 标签：android

**W/System.err(15366): android.database.CursorIndexOutOfBoundsException: 请求索引 1，大小为 1**

```
byte[] bytes = cur.getBlob(cur.getColumnIndex(imgarr.get(i)));          
ByteArrayInputStream input = new ByteArrayInputStream(bytes);                
Bitmap bit = BitmapFactory.decodeStream(input); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T18:26:12.987

您的光标只有一行，但您正在尝试访问光标的第二行。

添加以下行

```
cur.moveToFirst() 
```

就在 getBlob 函数之前

# racket - 球拍简单AE定义型

> ID：12124528
> 
> 赞同：3
> 
> 时间：2012-08-25T18:21:43.510
> 
> 标签：racket

从“编程语言：应用程序和解释”一书第 6 页，我尝试编写 DrRacket 中的第一个示例

```
#lang typed/racket

(define-type AE
 [num (n number?)]
 [add (lhs AE?) (rhs AE?)]
 [sub (lhs AE?) (rhs AE?)]) 
```

但我得到了错误

```
aeinterpretter.rkt:5:2: define-type: unexpected term in: (add (lhs AE?) (rhs AE?)) 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-25T18:46:21.787

[您应该使用PLAI](http://docs.racket-lang.org/plai/plai-scheme.html)语言运行此示例：

```
#lang plai

(define-type AE
 [num (n number?)]
 [add (lhs AE?) (rhs AE?)]
 [sub (lhs AE?) (rhs AE?)]) 
```

[Typed Racket](http://docs.racket-lang.org/ts-guide/index.html)语言是一种完全不同的语言，它为您提供了基本 Racket 语言的大部分功能，但具有静态类型系统。`define-type`PLAI 中的形式是“类型”的不同概念。

# macos - 从终端调用复制和粘贴命令

> ID：12124533
> 
> 赞同：1
> 
> 时间：2012-08-25T18:22:08.877
> 
> 标签：macos, bash, shell, terminal, copy-paste

是否可以从 bash 脚本调用复制命令（就像用户按下`Cmd`+一样）？`C`基本上我想编写一个使用全局热键运行的简单脚本，它应该从活动应用程序中获取当前选择，替换某些内容并粘贴结果。这可能吗？

到目前为止，我能想到的最好的方法是使用`pbpaste`and `pbcopy`，但如果可能的话，我想自动化它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T19:37:09.647

如果您只是想修改文本选择，您可以使用 AppleScript。

```
osascript -e 'try
    set old to the clipboard
end try
try
    delay 0.3
    tell application "System Events" to keystroke "c" using command down
    delay 0.2
    set text item delimiters to linefeed
    set input to (paragraphs of (the clipboard as text)) as text
    set the clipboard to do shell script "shopt -u xpg_echo; echo -n " & quoted form of input & " | rev" without altering line endings
    tell application "System Events" to keystroke "v" using command down
    delay 0.05
end try
try
    set the clipboard to old
end try' 
```

如果脚本使用具有除命令以外的其他修饰键的快捷方式运行，则第一个延迟用于释放修饰键。第二个延迟也可以减少到 0.05 左右，但是长选择或例如 web 视图通常需要更长的延迟。如果没有第三次延迟，`the clipboard`有时会`old`在粘贴文本之前设置为。

`the clipboard as text`并`do shell script`默认将行尾转换为回车。`shopt -u xpg_echo`需要，因为`echo`in`sh`默认情况下解释单引号内的反斜杠。如果输入长于`getconf ARG_MAX`字节，则不能使用`echo`，必须将其写入临时文件或使用`pbpaste`.

`pbpaste`并`pbcopy`在使用的环境中默认用问号替换非 ASCII 字符`do shell script`您可以通过设置`LC_CTYPE`来防止这种情况发生`UTF-8`。

告诉系统事件单击菜单栏项通常会更慢，并且在没有菜单栏或全屏窗口的应用程序中不起作用。

另一种选择是创建 Automator 服务。但是它们在运行之前也有小的延迟。存在一个错误，即服务的快捷方式在菜单栏上显示一次服务菜单之前并不总是有效。当最前面的应用程序没有菜单栏或服务菜单时，这些服务不可用。

![](../Images/927d5aa22e09ddffc6b5e97086f758b3.png)

# java - 在 Java 中监控 GZip 下载进度

> ID：12124534
> 
> 赞同：5
> 
> 时间：2012-08-25T18:22:13.283
> 
> 标签：java, download, gzip, monitor, progress

我在我的 java 应用程序中下载了一些文件并实现了一个下载监视器对话框。但最近我用 gzip 压缩了所有文件，现在下载监视器有点坏了。

我将文件打开为 a`GZIPInputStream`并在下载每 kB 后更新下载状态。如果文件的大小为 1MB，则进度会上升到例如 4MB，这是未压缩的大小。我想监控压缩下载进度。这可能吗？

编辑：澄清一下：我正在从 GZipInputStream 读取未压缩字节的字节。所以这并没有给我最后的正确文件大小。

这是我的代码：

```
URL url = new URL(urlString);
HttpURLConnection con = (HttpURLConnection) url.openConnection();
con.connect();
...
File file = new File("bibles/" + name + ".xml");
if(!file.exists())
    file.createNewFile();
out = new FileOutputStream(file);
in = new BufferedInputStream(new GZIPInputStream(con.getInputStream()));

byte[] buffer = new byte[1024];
int count;
while((count = in.read(buffer)) != -1) {
    out.write(buffer, 0, count);
    downloaded += count;
    this.stateChanged();
}

...

private void stateChanged() {
    this.setChanged();
    this.notifyObservers();
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T18:49:51.573

根据规范，[`GZIPInputStream`](http://docs.oracle.com/javase/7/docs/api/java/util/zip/GZIPInputStream.html)是 的子类[`InflaterInputStream`](http://docs.oracle.com/javase/7/docs/api/java/util/zip/InflaterInputStream.html)。`InflaterInputStream`有一个用于减压工作的[`protected Inflater inf`](http://docs.oracle.com/javase/7/docs/api/java/util/zip/InflaterInputStream.html#inf)字段。应该对您的目的特别有用。[`Inflater`](http://docs.oracle.com/javase/6/docs/api/java/util/zip/Inflater.html)[`Inflater.getBytesRead`](http://docs.oracle.com/javase/7/docs/api/java/util/zip/Inflater.html#getBytesRead%28%29)

不幸的是，`GZIPInputStream`不公开`inf`，所以可能你必须创建自己的子类并公开`Inflater`，例如

```
public final class ExposedGZIPInputStream extends GZIPInputStream {

  public ExposedGZIPInputStream(final InputStream stream) {
    super(stream);
  }

  public ExposedGZIPInputStream(final InputStream stream, final int n) {
    super(stream, n);
  }

  public Inflater inflater() {
    return super.inf;
  }
}
...
final ExposedGZIPInputStream gzip = new ExposedGZIPInputStream(...);
...
final Inflater inflater = gzip.inflater();
final long read = inflater.getBytesRead(); 
```

# php - 获取文本和数字

> ID：12124537
> 
> 赞同：0
> 
> 时间：2012-08-25T18:22:42.837
> 
> 标签：php, regex

我有以下字符串：

```
Some random 516 text100.
text3. 
```

我怎样才能以编程方式获得类似的东西：

```
$a[0]["text"] = Some random 516 text
$a[0]["id"] = 100

$a[1]["text"] = text
$a[1]["id"] = 3 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T18:39:29.783

这有效：

```
$input = array("Some random 516 text100.",
        "text3.");

$output=array();

foreach ($input as $text) {
    preg_match('/(.*?)(\d+)\./',$text,$match);
    array_shift($match); // removes first element
    array_push($output,$match);
}

print_r($output); 
```

输出：

```
Array
(
    [0] => Array
        (
            [0] => Some random 516 text
            [1] => 100
        )

    [1] => Array
        (
            [0] => text
            [1] => 3
        )

) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T18:32:26.010

如果您的输入是常规输入，则可以使用正则表达式。

*注意：*这个版本需要一个`.`下`text<number>`部分，您可能需要根据您的输入进行调整：

```
$in='Some random 516 text100.
text3.';

preg_match_all('/^(?<text>.*?text)(?<id>\d+)\./im', $in, $m);
$out = array();
foreach ($m['id'] as $i => $id) {
    $out[] = array('id' => $id, 'text' => $m['text'][$i]);
}
var_export($out); 
```

foreach 将结果转换为请求的格式，如果您可以使用`preg_match_all()`原始返回的格式，则可能不需要它。

# javascript - Ajax - “访问控制允许来源”错误

> ID：12124538
> 
> 赞同：0
> 
> 时间：2012-08-25T18:22:49.347
> 
> 标签：javascript, ajax, api, streaming

我正在尝试使用[Livestream API](http://www.livestream.com/userguide/?title=Guide_API#Retrieve_Channels)来查看某个频道是否正在直播，但不断收到此错误：

```
XMLHttpRequest cannot load http://channel.api.livestream.com/1.0/livestatus?channel=huskystarcraft. Origin http://www.webdevstl.com is not allowed by Access-Control-Allow-Origin. 
```

我需要通过 PHP 运行它还是在我的 ajax 调用中做错了什么？这是非常简单的代码：

```
function getActive(){
    if(window.XMLHttpRequest)
    {
        xmlhttp = new XMLHttpRequest();
    }
    else
    {
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange = function()
    {
        if(xmlhttp.readyState == 4 && xmlhttp.status == 200)
        {   
            var json = JSON.parse(xmlhttp.responseText);
            console.log(json);
        }
    }

    xmlhttp.open("GET", "http://channel.api.livestream.com/1.0/livestatus?channel=huskystarcraft", true);
    xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xmlhttp.send();
}
getActive(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T18:46:20.417

您遇到了[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)施加的限制。简而言之，禁止对不同域的 AJAX 调用并且会失败——除非远程主机明确允许。

您需要使用 JSONP（主要适用于 API 返回的数据）或[通过您自己的 server/domain 代理请求](http://jquery-howto.blogspot.com/2009/04/cross-domain-ajax-querying-with-jquery.html)。

CORS 也是一种选择，但前提是您可以访问远程服务器的配置。

# google-apps-script - 填写表格时有没有办法为用户关闭自动填写？

> ID：12124539
> 
> 赞同：0
> 
> 时间：2012-08-25T18:22:52.130
> 
> 标签：google-apps-script

伙计们，我认为这对你来说很快：

我正在以 UiApp 构建的形式收集数据，并在使它们继续之前使用验证。我的问题是，自动填充的格式通常与我的表单中所需的格式不同（例如写出的状态而不是邮政缩写）。我认为这可能会导致混乱，所以我很想强迫用户手动填写每个框。

有没有办法关闭浏览器的自动填充功能？如果我要在 html 中构建，它会给我更多的控制权吗？

谢谢你的帮助~马丁

注意：我正在使用“ChangeHandler”，因为它至少会在使用自动填充时更新验证器。

这是我正在使用的样式的示例代码。它包括多个字段验证和一个审查面板。与我的问题相关，但也可能对那些建筑形式有用。

```
function doGet(e){
var app = UiApp.createApplication().setTitle("Review and Validation");
var appPanel = app.createVerticalPanel();
var form = app.createFormPanel();
var panel1 = app.createGrid(4,5).setId('panel1');

var firstNameLabel = app.createLabel("First Name:");
var firstName = app.createTextBox().setName('firstName').setId('firstName');
var lastNameLabel = app.createLabel("Last Name:");
var lastName = app.createTextBox().setName('lastName').setId('lastName');
var emailLabel = app.createLabel('Your Email');
var email = app.createTextBox().setName('email').setId('email');
var button1 = app.createButton('Go to Review').setEnabled(false);
var info1 = app.createLabel("Please Enter First Name")
.setVisible(false)
.setStyleAttribute('color', 'red');
var info2 = app.createLabel("Please Enter Last Name")
.setVisible(false)
.setStyleAttribute('color', 'red');
var info3 = app.createLabel("Please Enter Email")
.setVisible(false)
.setStyleAttribute('color', 'red');

var syncChangeHandler = app.createServerHandler('syncText').addCallbackElement(form)
.validateLength(firstName, 2, 30).validateLength(lastName, 2, 30).validateEmail(email);

var onValidInput = 
app.createClientHandler().validateLength(firstName,2,30).validateLength(lastName,2,30).validateEmail(email).forTargets(
      button1).setEnabled(true);

var onInvalidInput1 = 
app.createClientHandler().validateNotLength(firstName, 2, 30).forTargets(button1).setEnabled(false).forTargets(info1).setVisible(true);

var onValidInput1 = 
app.createClientHandler().validateLength(firstName, 2, 30).forTargets(info1).setVisible(false);

var onInvalidInput2 = 
app.createClientHandler().validateNotLength(lastName, 2, 30).forTargets(button1).setEnabled(false).forTargets(info2).setVisible(true);

var onValidInput2 = 
app.createClientHandler().validateLength(lastName, 2, 30).forTargets(info2).setVisible(false);

var onInvalidInput3 = 
app.createClientHandler().validateNotEmail(email).forTargets(button1).setEnabled(false).forTargets(info3).setVisible(true);

var onValidInput3 = 
app.createClientHandler().validateEmail(email).forTargets(info3).setVisible(false);

firstName.addChangeHandler(onInvalidInput1);
firstName.addChangeHandler(onValidInput1);

lastName.addChangeHandler(onInvalidInput2);
lastName.addChangeHandler(onValidInput2);

email.addChangeHandler(onInvalidInput3);
email.addChangeHandler(onValidInput3);

firstName.addChangeHandler(onValidInput);
lastName.addChangeHandler(onValidInput);
email.addChangeHandler(onValidInput);

panel1.setWidget(0,0, firstNameLabel);
panel1.setWidget(0,1, firstName);
panel1.setWidget(0,2, lastNameLabel);
panel1.setWidget(0,3, lastName);
panel1.setWidget(1,1, info1);
panel1.setWidget(1,3, info2);
panel1.setWidget(2,0, emailLabel);
panel1.setWidget(2,1, email);
panel1.setWidget(2,3, button1);
panel1.setWidget(3,1, info3);

app.add(form);
appPanel.add(panel1);
form.add(appPanel);

var panel2 = app.createGrid(4,5).setId('panel2').setVisible(false);
var reviewFirstNameLabel = app.createLabel("First Name:");
var reviewFirstName = app.createLabel().setId('reviewFirstName');
var reviewLastNameLabel = app.createLabel("Last Name:");
var reviewLastName = app.createLabel().setId('reviewLastName');
var reviewEmailLabel = app.createLabel('Your Email:');
var reviewEmail = app.createLabel().setId('reviewEmail');
var submitButton = app.createSubmitButton('Submit');
var button2 = app.createButton('Edit Response');

panel2.setWidget(0,0, reviewFirstNameLabel); 
panel2.setWidget(0,1, reviewFirstName); 
panel2.setWidget(0,2, reviewLastNameLabel);
panel2.setWidget(0,3, reviewLastName);
panel2.setWidget(1,0, reviewEmailLabel);
panel2.setWidget(1,1, reviewEmail);
panel2.setWidget(2,0, button2);
panel2.setWidget(3,0, submitButton);
appPanel.add(panel2);

//
var editResponse = app.createClientHandler()
.forTargets(panel1).setVisible(true)
.forTargets(panel2).setVisible(false);

button1.addClickHandler(syncChangeHandler);
button2.addClickHandler(editResponse);

return app;
}

function syncText(e){
  var app = UiApp.getActiveApplication(); 

  app.getElementById('reviewFirstName').setText(e.parameter.firstName);
  app.getElementById('reviewLastName').setText(e.parameter.lastName);
  app.getElementById('reviewEmail').setText(e.parameter.email);
  app.getElementById('panel1').setVisible(false);
  app.getElementById('panel2').setVisible(true);
  return app;
}

function doPost(e){
var ss = SpreadsheetApp.openById('0Aiapuj1KtAujdHYzZzNzMEsxMUtranZhaXhiSFFnanc').getSheets()[0];
var range = ss.getRange(ss.getLastRow()+1, 1, 1,4);

var values = [[new Date(),e.parameter.firstName, e.parameter.lastName, e.parameter.email]];
range.setValues(values);

var app = UiApp.getActiveApplication();
var label = app.createLabel('Thank You!');
app.add(label);

return app;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T21:14:00.393

GAS 是全球独立于浏览器的，因为该应用程序在 Google 的服务器上运行并且不直接与您的浏览器交互......我认为不可能告诉浏览器做这样的事情，我还没有看到任何技巧这将使这成为可能......如果我错了，那么我会很好奇;-)

编辑：我玩过您的代码，我想知道使用按键处理程序而不是单击处理程序是否不是解决方案，因此用户将被迫使用键盘填写表单而不是鼠标单击。我见过检查是否按下“输入”来验证答案的脚本。（只是一个想法）编辑2：嗯，浏览器太聪明了，我测试了它，但自动完成非常有效地模拟按键......太糟糕了：-/

# node.js - 如何使用崇高文本运行节点应用程序

> ID：12124544
> 
> 赞同：9
> 
> 时间：2012-08-25T18:23:32.963
> 
> 标签：node.js, terminal, sublimetext2

你将如何运行带有崇高文本的节点应用程序？像这样，在 sublime 中打开文件 app.js，进入 menu->tools->build，它就运行了。就这么简单

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-31T03:38:15.277

Cmd+Shift+P ，搜索“Nodejs::Default File Settings”，会打开文件“Node.js.sublime-settings”。你会看到的：

```
{
  // save before running commands
  "save_first": true,
  // if present, use this command instead of plain "node"
  // e.g. "/usr/bin/node" or "C:\bin\node.exe"
  "node_command": false,
  // Same for NPM command
  "npm_command": false,

  "expert_mode": false,

  "ouput_to_new_tab": false
} 
```

调整

**“node_command”：假，**

至

**"node_command": "/usr/local/bin/node",**

如果节点路径与上面的不同，找到它并更改为您的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-25T23:46:30.420

如果您想自己修复插件的路径。一种选择是更改 Nodejs.sublime-build。它位于 sublime 的包目录中：

```
Mac: ~/Library/Application Support/Sublime Text 2/Packages/Nodejs/Nodejs.sublime-build 

Linux: ~/.config/sublime-text-2/Packages/Nodejs/Nodejs.sublime-build 
```

注意：在最新的 OS X 版本中，Library 文件夹是隐藏的。如果是这种情况，请从菜单中选择 Go > Go to Folder... 并键入 ~/Library。

```
Change "cmd": ["node", "$file"] to "cmd": ["/usr/local/bin/node", "$file"]

{
  "cmd": ["/usr/local/bin/node", "$file"],
  "file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
  "selector": "source.js",
  "shell":true,
  "encoding": "cp1252",
  "windows":
    {
        "cmd": ["taskkill /F /IM node.exe & node", "$file"]
    },
  "linux":
    {
        "cmd": ["killall node; node", "$file"]
    }
} 
```

最后，打开 *.js 文件并按 command + b。现在一切都应该正常工作。

Linux 用户：此文件在所有操作系统中都是相同的。查找 Nodejs.sublime-build 的路径可能需要运行搜索。在大多数情况下，它位于 ~/.config/sublime-text-2/Packages/Nodejs/Nodejs.sublime-build

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-27T06:30:23.330

要在 sublime text 上运行 nodejs，安装节点包“node dev”然后创建一个 sublime text 构建，代码应该如下所示

```
{
  "cmd": ["node-dev", "$file"],
  "selector" : "source.js",
  "path" : "/usr/local/bin"
} 
```

现在要运行 nodejs 应用程序，请转到 menu->tools->build。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T18:27:34.117

发生的事情是您的终端没有正确的 PATH 设置。

在常规终端中尝试此命令：

```
> which node 
```

我个人得到这个：

```
/usr/local/bin/node 
```

如您所见，此路径不在您的环境路径中以将其添加到常规终端中，您将编辑 .bashrc 或 .bash_profile 并添加此行

```
export PATH=/usr/local/bin:$PATH 
```

在这里，您只需查看[文档](https://github.com/tanepiper/SublimeText-Nodejs#build-systems)并发现您需要修改配置文件。

> 如果你打开了一个 JavaScript 文件，通过选择工具 -> 构建系统 -> Nodejs 然后按 Ctrl + B，你将激活文件上的节点构建系统，节点将尝试运行它。如果找不到您的节点可执行文件，您可能需要为此设置对象添加一个路径变量

看看[这个](http://sublime-text-unofficial-documentation.readthedocs.org/en/latest/reference/build_systems.html?highlight=env%20path#troubleshooting-build-systems)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T11:02:40.510

在 xubuntu 上，我在 Nodejs.sublime-build 中明确使用终端构建命令：

"cmd": ["xfce4-terminal", "--command", "node $file"]

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-22T19:34:01.973

使用以下代码创建构建系统：

```
{
   "cmd": ["node", "$file"],
   "selector" : "source.js"
} 
```

# c# - C#中的实体框架一对多关系

> ID：12124545
> 
> 赞同：0
> 
> 时间：2012-08-25T18:23:33.353
> 
> 标签：c#, entity-framework, listview, entity-relationship

我有 4 张桌子正在使用。

> 1.  用户 :: ID(PK)、姓名、电子邮件。
> 2.  UserMessage :: ID（PK）、主题、正文、发送日期。
> 3.  UsersFromMessage :: ID(PK), FromUSerID(FK (PK => (Users))), MessageTableID(FK (PK => (UserMessage))) 和一些额外的colms。
> 4.  UsersToMessage :: ID(PK), FromUSerID(FK (PK => (Users))), MessageTableID(FK (PK => (UserMessage))) 和一些额外的字段。

我在上面共享了我的数据库设计。

以没有 smtp 的邮件应用程序为例。

假设我的用户表有 3 个用户。U1、U2 和 U3。

U1 向 U2 和 U3 发送消息。因此，一个条目进入 UserMessage 表，2 个条目进入 UsersToMessage 表，一个条目进入 UsersFromMessage 表。

现在我想显示从 U1 发送的所有消息，所以我使用以下查询，

暂时假设userid为1。

```
ForumEntities objEntities = new ForumEntities();
 List<UsersFromMessage> lstUsers = objEntities.UsersFromMessages.Where(x => x.FromUserID == 1).Tolist(); 
```

我获得了 User、UsersFromMessage 的数据，但我没有获得有关 UserToMessage 的任何信息，因为它与 UsersFromMessage 表没有直接关系。

我能够显示从 U1 发送的消息，但现在我想显示 U1 向其发送消息并绑定到 Listview 的所有用户的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T18:46:18.157

Your message class should look like the following:

```
public class Message
{
    ...
    public virtual User From { get; set; }
    public virtual IEnumerable<UsersToMessage> To { get; set; }
} 
```

And then you can user the following to get your list of To users:

```
var msg = objEntities.Message.Where(m => m.From.ID == "U1").First();
var tousers = msg.To; 
```

# ios - 如何在 iOS SDK 3.0 上检查和更新 Facebook 令牌的状态？

> ID：12124546
> 
> 赞同：3
> 
> 时间：2012-08-25T18:23:37.320
> 
> 标签：ios, facebook

我有一个带有*可选*Facebook 登录的 iPhone 应用程序，用户可以在设置中激活它。

我不明白（不使用“专有”开关变量存储到应用程序存储中）如何知道用户过去是否激活过它，以通过开关显示其状态。

FBSession.activeSession.state 没有给出可靠的值，因为如果令牌已过期，会话可能对应用程序“有效”，但对 Facebook 无效。

对此，我无法理解如何在令牌过期时（可能在几个小时后？）更新令牌，并且不通过切换到 Facebook 应用程序或 Safari 来请求用户提供新的身份验证请求。基本上，我想保留并使用令牌直到它有效，并在 Facebook 拒绝请求时立即更新它，因为它已过期。

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T00:55:24.917

您可以进行以下示例调用：

```
BOOL openedWithCachedToken = [FBSession openActiveSessionWithAllowLoginUI:NO]; 
```

如果没有缓存的令牌，这将不会向用户显示登录 UI：

另请参阅：[https ://developers.facebook.com/docs/reference/ios/3.1/class/FBSession#openActiveSessionWithAllowLoginUI%3A](https://developers.facebook.com/docs/reference/ios/3.1/class/FBSession#openActiveSessionWithAllowLoginUI%3A)

一旦你有一个缓存的令牌（openedWithCachedToken 为真），你就可以发出一个请求（例如 requestForMe）来验证会话在 Facebook 上是否有效。如有必要，Facebook SDK 将在您的请求之上发送一个捎带请求，以更新会话。无论如何，您都可以检查自己的请求完成处理程序以处理失败情况，这可能是无效的服务器会话。

# c++ - c++mingw STL安装

> ID：12124551
> 
> 赞同：1
> 
> 时间：2012-08-25T18:24:13.980
> 
> 标签：c++, windows, stl, mingw

我最近在我的 Windows 32 机器上安装了 MinGW 和 MSYS，它似乎运行良好。

在 C++ 编译器上，我包含了一个向量容器并且没有出错。但是当我尝试使用它时，我会遇到编译时错误。

所以，代码

```
#include <vector>  // include vector.h  
#include <stdio.h>  // include stdio.h

using namespace std;

main()  {

//   vector<int> A;  

printf("\nHeya ..");

} 
```

运行得很好。但是，当我取消注释第 8 行 - 向量声明行时，我在编译时收到以下错误（缩短）：

```
undefined reference to 'operator delete(void*)'
undefined reference to '__gxx_personality_v0' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-25T18:29:17.417

您可能正在编译`gcc`而不是`g++`. 实际的编译器是相同的，但`g++`告诉链接器使用默认的 C++ 库，`gcc`只是告诉它查看 C 库。一旦您使用标准库的特定于 C++ 的部分，`gcc`就会失败。

顺便说一句，C++ 不支持`default int`旧 C 的规则，所以你应该真正指定返回类型 from `main`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T18:29:30.210

我不明白你是如何编译你的代码的。您的主要方法无效，签名不正确，并且您没有返回任何内容。

应该是这样的：

```
#include <vector>  // include vector.h  
#include <stdio.h>  // include stdio.h

using namespace std;

int main(int, char**)  {

//   vector<int> A;  

printf("\nHeya ..");
return 0;
} 
```

你也需要用 g++ 而不是 gcc 来编译它。

# wpf - 如何使用 WPF/数据绑定遵守 MVC

> ID：12124552
> 
> 赞同：0
> 
> 时间：2012-08-25T18:24:20.407
> 
> 标签：wpf, model-view-controller, data-binding

请耐心等待，因为我是 WPF/XAML 的新手。我正在尝试编写一个 MainWindow.xaml / App.xaml 对，以正确隔离样式化和数据绑定，尽可能接近模型-视图-控制器。至今：

*   我有一个包含所有格式（字体、边距等）的 styles.xaml。它是从 app.xaml 的 Application.Resources 引用的，因此它可以应用于项目中的所有 WPF 表单。
*   模型数据集合作为 App 的成员变量存在，App 通过 GetX() 访问器函数公开它们。
*   mainwindow.xaml 包含视图结构以及绑定信息。这样做是这样的：

    ObjectDataProvider x:Key="AppX" MethodName="GetX" ObjectInstance="{x:Static local:App.Current}"

mainwindow.xaml 包含绑定信息的事实是不好的，因为这应该是控制器（应用程序）的角色。不幸的是，我发现 WPF 设计器的限制之一是您不能（例如）拥有两个未键入的资源引用（一个用于视图样式，一个用于数据绑定样式）。同样，app.xaml 不能在其 Resources 部分中同时包含 styles.xaml 引用和一组数据绑定样式。

理论上，我可以从应用程序的启动处理程序手动实例化主窗口，然后在代码中进行绑定，但这会以两种方式违反 WPF 的精神——应用程序不需要创建窗口，就像在背景; 并且尽可能在 XAML 中比在代码中更好地完成绑定。如果有一种方法可以通知应用程序已创建主窗口以便它可以进行绑定，那还不错，但我没有看到任何（缺少主窗口之后调用应用程序加载，但这不应该是视图的责任）。

所以我有点走投无路。我不知道一种在仍然以“WPF 方式”做事的同时正确遵守 MVC 的方法 - 似乎默认值是 VS 设计器创建一个整体窗口 XAML，它具有混杂的视图、视图样式和控制器。任何关于如何更好地做到这一点的描述或关于该主题的优秀网站的链接将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T00:17:51.503

MVVM 本质上是 MVC。在 MVVM 中，视图额外分离为视图和视图模型，其中视图现在只是 UI 的控件，视图模型保存视图的数据和逻辑。另外，在 MVVM 中，View 和 View Model 之间的关系，单独来看，也可以看作 MVC 模式，其中 M = ViewModel，V = View，C = DataBinding。

# c# - Lambda 表达式 - 它的评估是否正确？

> ID：12124556
> 
> 赞同：0
> 
> 时间：2012-08-25T18:24:44.850
> 
> 标签：c#, .net, linq, custom-attributes

我有以下似乎不正确的代码。有一个属性有一个不是 type 的属性`FieldMapAttribute`，但它仍然进入 if 条件，我正在检查与该类型属性匹配的计数。

```
foreach (PropertyInfo _property in _properties)
{
    var attributes = _property.GetCustomAttributes(false);
    if (attributes.Select(a => a.GetType() == typeof(FieldMapAttribute)).Count() > 0)
    {
        colname = (attributes.Select(a => a.GetType() == typeof(FieldMapAttribute)).Cast<FieldMapAttribute>().First()).DbColumnName;
    }
} 
```

有人可以帮助我了解这里发生了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T19:32:45.200

假设您要做的是检查`FieldMapAttribute`属性上是否存在属性，您应该使用

```
var attributes = _property.GetCustomAttributes(typeof(FieldMapAttribute), false);
if (attributes.Length > 0)
{
    ...
} 
```

另一种选择是使用

```
if (attributes.OfType<FieldMapAttribute>().Any()) 
```

您应该注意您的使用`Select`方式不正确。[`Select`](http://msdn.microsoft.com/en-us/library/bb548891)用于将元素投影到新形式中。您的`Select`语句返回一个列表`bools`- 属性具有的每个属性（*任何属性*，而不仅仅是类型`FieldMapAttribute`）。这意味着如果您的财产看起来像这样

```
[SomeAttribute]
[SomeOtherAttribute]
[FieldMapAttribute]
public string MyProp { get; set; } 
```

然后您的 select 语句将产生以下结果

```
false
false
true 
```

如您所见，调用`Count`此结果集将始终返回属性上设置的自定义属性的数量（同样，*任何属性*）。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T19:52:04.053

不管你当前的代码到底发生了什么，在我看来它可以写得*更*简单：

```
foreach (PropertyInfo property in properties)
{
    if (property.IsDefined(typeof(FieldMapAttribute), false))
    {
        colName = property.GetCustomAttributes(typeof(FieldMapAttribute), false)
                          .Cast<FieldMapAttribute>()
                          .First()
                          .DbColumnName;            
    }
} 
```

（请注意，*最后一个*属性将属性定义为指定列名的属性。这是您想要的吗？）

甚至对整个事情都使用 LINQ：

```
var attrType = typeof(FieldMapAttribute);
var attr = properties.SelectMany(p => p.GetCustomAttributes(attrType), false)
                     .Cast<FieldMapAttribute>()
                     .FirstOrDefault();
if (attr != null)
{
    colName = attr.DbColumnName;
} 
```

# javascript - Javascript创建函数以在其他函数之间共享变量

> ID：12124559
> 
> 赞同：1
> 
> 时间：2012-08-25T18:25:13.663
> 
> 标签：javascript, performance, variables, object, functional-programming

我有几个带有 jQ​​uery 的 click 函数，它们共享相同的变量，所以我创建了一个函数来返回这些变量。

虽然这可行，但我想知道从编程上讲这是否是正确或最有效的方法：

```
function clickVars($me){
    var $curStep = $('.cust-step-cur'),
        $nextStep = $curStep.next('.cust-step'),
        nextStepLen = $nextStep.length,
        $list = $('.cust-list'),
        $btnCheck = $('.cust-btn.checklist'),
        hasChecklist = $me.hasClass('checklist');

    return {
        curStep: $curStep,
        nextStep: $nextStep,
        nextStepLen: nextStepLen,
        list: $list,
        btnCheck: $btnCheck,
        hasChecklist: hasChecklist
    };
}

// Checklist Click
$('.option-list a').on('click',function(){
    var $me = $(this),
        myVars = clickVars($me);        

    currentStepOut(myVars.curStep);

    myVars.curStep.removeClass('cust-step-cur');

    currentStepIn(myVars.nextStep, myVars.list, myVars.btnCheck);
});

// Navigation
$('.cust-btn').on('click',function(){
    if(animReady === false) 
        return false;

    var $me = $(this),
        myVars = clickVars($me);

    if(myVars.hasChecklist && myVars.list.hasClass('cust-step-cur'))
        return false;

    currentStepOut(myVars.curStep);

    myVars.curStep.removeClass('cust-step-cur');

    if(myVars.nextStepLen === 0 || $me.hasClass('checklist')) {
        myVars.nextStep = myVars.list;
    }

    animReady = false;

    currentStepIn(myVars.nextStep, myVars.list, myVars.btnCheck);
}); 
```

这是在多个函数之间生成共享变量的标准方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T18:29:31.797

在 AS3 中，最好的做法是：

```
 // Variable definitions
 var enabled:Boolean = false;

 public function myFunction(){
      enabled = true;
 } 
```

所以在 JavaScript 中我一直在做：

```
 // Variable defintions
 var a,b,c,d,e = 0;

 function alterVariables(){
      a = 1;
      b = 2;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T01:51:23.560

您必须了解您没有在函数之间共享变量。此外，每次单击这些元素时，都会一次又一次地调用 clickVars 函数，即使您多次单击一个元素也是如此。所以这段代码是非常糟糕的经验。检查这个：

```
// Defined ones 
var nodes = {
    $elements       : $('.elements'),
    $otherElements  : $('.otherElements'),
}

// In case you have multiple .selector elements in your DOM
$('.selector').each(function() {

   // Defined ones for each element
   var $element = $(this), isList = $element.hasClass('.list');

   $element.bind('click', function(){
     nodes.$elements.addClass('clicked');
   });
});

$('.anotherSelector').each(function() {

   // Yep, here is some duplicate code. But there won't be any
   // performance improvement if you create special method for
   // such small piece of code
   var $element = $(this), isList = $element.hasClass('.list');

   $element.bind('click', function(){
     nodes.$elements.addClass('clicked');
   });
}); 
```

# box-api - 使用使用 SSO 的企业帐户对 Box 应用程序进行身份验证时出错

> ID：12124563
> 
> 赞同：0
> 
> 时间：2012-08-25T18:26:05.220
> 
> 标签：box-api

我正在针对启用了 SSO 的企业帐户开发应用程序。当我进行身份验证时，如果我已经在浏览器会话中使用 Box 进行了身份验证，它将只接受我的电子邮件地址。一切看起来都不错，我通过“感谢登录”框收到消息……我可以继续使用我的应用程序。

但是，当我尝试获取我的身份验证令牌时，我得到了“get_auth_token_error”，并且 Box 文档没有提供任何详细信息，只是说这是一个通用错误状态。

我已经使用非企业应用程序（显然不是 SSO）对此进​​行了测试，并且一切正常。注意我是 Box API 的 v1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:56:00.147

**启用 SSO 的 Enterprise Box 帐户需要为每个应用程序打开 API 密钥。**

问题原来是我的 API 密钥没有打开。这仅适用于启用 SSO 的企业 Box 帐户。必须向 Box API 团队提出请求才能启用此功能。

令人困惑的是，Box 同时存在通过 API 进行 SSO 身份验证的已知问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T23:40:46.117

本周早些时候，SSO 出现了问题。我们已针对该问题推出了修复程序。如果您的应用程序中仍然存在 SSO 问题，请通过 Box dot com 的 api 与我们联系，并为我们提供更多信息以重现您的问题。

# php - PHP MySQL 操作方法和性能

> ID：12124568
> 
> 赞同：0
> 
> 时间：2012-08-25T18:26:39.510
> 
> 标签：php, mysql, database

我正在努力寻找尽可能少的性能影响的最佳方法。

这是设置...

带有搜索优化过滤器的搜索结果页面，该过滤器对 PHP 处理程序进行 AJAX 调用，该处理程序返回一组新的（优化的）结果。

我有 4 个表，其中包含我需要在 PHP 处理程序代码中连接的所有数据。

表 1 - 包含主要详细信息的主记录表

表 2 - 来自专业评级公司 #1 的每种产品的评级

表 3 - 专业评级公司#2 对每种产品的评级

表 4 - 专业评级公司#3 对每种产品的评级

搜索结果页面上的细化器是 jquery 滑块，其范围从允许的最低等级到每个等级的最高等级。

移动滑块句柄时，将使用新值进行新的 AJAX 调用，并且数据库查询将运行以创建一组新的精炼结果。

从表 1 中获取我需要的数据是很容易的部分。我正在努力解决的是如何有效地在其他 3 个表上包含一个连接，并且只选择与优化值/范围匹配的行。表 2、3 和 4 都有多个年份（2004-2012）的列，当我最初尝试将它们全部放入一个查询时，它陷入了困境。

表 2、3 和 4 包含表 1 中每条记录的各种评级。

表 2、3 和 4 中的列是... id - productID - y2004 - y2005 - y2006 - y2007 - ...您明白了。

每一年的每一列都有每条记录的数值（默认为 0）。

我需要做的是一次有效地选择与用户在所有 4 个表中选择的精简范围相匹配的记录。

一个示例精炼搜索将是...从表 1 中获取所有记录，其中价格在 25 美元和 50 美元之间，并且表 2 记录的评级（来自任何年份/列）在 1 - 4 之间，并且表 3 记录的评级（来自任何年份/列）在 80 - 100 之间并且表 4 记录的评级（来自任何年份/列）在 80 - 100 之间。

关于如何以尽可能高的性能进行设置的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T19:33:36.790

我的建议是使用不同的表结构。您应该将表 2、3 和 4 合并为`ratings`具有以下结构的单个表：

```
id | productID | companyID | year | rating 
```

然后你可以将你的查询重写为：

```
SELECT *
FROM products p
JOIN ratings r ON p.id = r.productID
WHERE p.price BETWEEN 25 AND 50
    AND (
        ( r.companyID = 1 AND r.rating BETWEEN 1 AND 4 )
        OR ( r.companyID = 2 AND r.rating BETWEEN 80 AND 100 )
        OR ( r.companyID = 3 AND r.rating BETWEEN 80 AND 100 )
    ) 
```

这样性能肯定会提高。此外，随着年份和公司数量的增加，您的表格将更具可扩展性。

还有一件事：如果`products`表中有很多字段，执行 2 个查询而不是加入可能更有用。这样做的原因是您正在获取冗余数据 -`product`即使您只需要一次，每个连接的行都将具有列。这是连接的副作用，并且可能存在一个性能阈值，即查询两次比连接更有用。由您决定是否/何时是这种情况。

# windows-phone-7 - 插入或添加以前删除的 PivotItem 会引发无效参数异常，但可以，为什么？

> ID：12124569
> 
> 赞同：0
> 
> 时间：2012-08-25T18:26:47.480
> 
> 标签：windows-phone-7

```
if (!Pivot.Items.Contains(PrevRemovedPivotItem))
{

   //Pivot.Items.Insert(1, PrevRemovedPivotItem);
     Pivot.Items.Add(PrevRemovedPivotItem);
} 
```

> 两种方式都抛出相同的异常，但同时添加了数据透视项。

怎么了？

# iphone - 有没有办法像这样自定义 TabBar？

> ID：12124571
> 
> 赞同：1
> 
> 时间：2012-08-25T18:27:05.780
> 
> 标签：iphone, ios, ios5

有没有办法像这样自定义 TabBar？我们使用iOS5。

![在此处输入图像描述](../Images/1b8ba5e01099f9018faa41ec3234313b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T18:29:41.543

是的，这实际上并不难做到。

1) 子类 UITTabBarController

2）运行一个方法来隐藏所有 UITabBar 类元素，如下所示

3) 将自己的元素绘制到 self ([self.view addSubview:CustomButton])

```
for(UIView *subview in self.view.subviews) {
    if([subview isKindOfClass:[UITabBar class]]) {
        subview.hidden = YES;
        break;
    }
} 
```

**编辑**

作为进一步更新来解释您的图像示例是如何完成的。您有 4 个元素：1）背景图像 2）左键 3）中键 4）右键

所以 UIImageView 和 UIButton 与 [UIButton buttonWithType:UIButtonTypeCustom] 是你所需要的一切魔法发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T20:02:15.237

您可以使用[本教程更好地了解自定义](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T20:35:43.340

在此处查看[如何创建自定义标签栏...在标签栏中添加自定义图像（无需 xib 更改）](https://stackoverflow.com/questions/4710298/how-can-i-create-custom-tab-bar-add-custom-images-in-tab-bar-without-xib-cha)

不要忘记标签栏由矩形标签组成 - 你的设计并没有真正遵循这些规则......

所以，我不确定这是否会在提交到 App Store 时通过 Apple 的 UI 指南

为什么不制作一个看起来像这样的 NavigationBar？

# css - 向右浮动不起作用

> ID：12124572
> 
> 赞同：0
> 
> 时间：2012-08-25T18:27:27.670
> 
> 标签：css, html

我一直在尝试将社交图标浮动到页面的右侧，但由于某种原因它不起作用。

但页面顶部的文字完美浮动。

这是一个小提琴： [在这里查看](http://jsfiddle.net/ZFWde/)

```
<div class="social">
  <a href="/"><img src="img/twitter.png" width="32" height="32" alt="Twitter" /></a>
  <a href="/"><img src="img/google_plus.png" width="32" height="32" alt="Google" /></a>
  <a href="/"><img src="img/linkedin.png" width="32" height="32" alt="LinkedIn" /></a>
  <a href="/"><img src="img/facebook.png" width="32" height="32" alt="Facebook" /></a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:32:05.417

```
 clear:both 
```

在社交 css 中添加上述 css

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T19:07:45.977

试试这个 CSS

```
#wrapper {
    margin: 0px auto;
    width: 940px;
    padding: 15px 0px 0px;
    position: relative;
    text-align: left;

}
#header {
    width: 940px;
    margin: 0px;
    padding: 0px;
    background: none repeat scroll 0% 0% rgb(255, 255, 255);
    overflow: hidden;
}
#mast-head {
    width: 940px;
    float: left;
    margin: 0px;
    padding: 0px 0px 10px;
    background: none repeat scroll 0% 0% transparent !important;
    position: relative;
}
a.logo-txt {
    text-decoration: none;
    padding: 0px;
    display: block;
    float: left;
    margin: 0px;
}
a.logo-txt #logo {
    margin: 0px;
    padding: 0px;
}
.personalisation {
    margin: 0px auto;
    float: right;
}
.welcome {
    font-size: 12px;
    font-weight: bold;
}
.social {
    margin: 100px 0px auto;
    float: right;
    width:100%
}
.social a{
    float:right;
}
​

#nav{
  border:1px solid #ccc;
  border-width:1px 0;
  list-style:none;
  margin-top: 160px;
  padding:0;
  text-align:center;
}
#nav li{
  display:inline;
}
#nav a{
  display:inline-block;
  padding:10px;
}
#nav ul{
  position:absolute;
  left:-9999px;
  margin:0;
  padding:0;
  text-align:left;
}
#nav ul li{
  display:block;
} 
```

# macos - 如何在非视网膜显示器上模拟 Mac OS X 10.8 Mountain Lion 中的视网膜显示器（HiDPI 模式）？

> ID：12124576
> 
> 赞同：79
> 
> 时间：2012-08-25T18:28:03.540
> 
> 标签：macos, osx-mountain-lion, retina-display

如何在非视网膜显示器上模拟 Mac OS X 10.8 Mountain Lion 中的视网膜显示器（HiDPI 模式）？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-08-25T18:28:03.540

1.  [搜索](https://developer.apple.com/downloads/index.action)、下载和安装 Apple 免费**的 Xcode 8 附加工具**（对于以前的 Xcode 版本，请根据您的版本搜索 Xcode 的**图形工具）。**
    *注意：需要免费的 Apple Developer 帐户。*
2.  启动**Quartz 调试**应用程序。
3.  进入菜单：`Window ---> UI Resolution`。
4.  选中**启用 HiDPI 显示模式**。
5.  退出**石英调试**。
6.  打开**系统偏好设置**。
7.  选择**显示**图标。
8.  如果使用多显示器，请在您希望模拟 HiDPI 模式的显示器上选择配置窗口。
9.  在 下`Resolution:`，选择**Scaled**单选按钮。
10.  找到后缀的所需分辨率`(HiDPI)`并选择它。
11.  您的显示器现在在 HiDPI 模式下运行，模拟视网膜显示器。

来源：[OS X 高分辨率指南](https://developer.apple.com/library/mac/#documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Introduction/Introduction.html)

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-11-28T01:24:13.853

我找到了以下说明。它*似乎*有效，并且比 Quartz Debug 方法容易得多。

> **“在 Mountain Lion 中启用 HiDPI 模式，无需 Quartz 调试”**
> 
> [https://gist.github.com/3191869](https://gist.github.com/3191869)

简而言之，运行以下命令，注销、登录，HiDPI 分辨率在显示首选项中可用：

```
sudo defaults write /Library/Preferences/com.apple.windowserver DisplayResolutionEnabled -bool YES
sudo defaults delete /Library/Preferences/com.apple.windowserver DisplayResolutionDisabled 
```

（在我的情况下，第一个命令就足够了；第二个命令只是打印一条错误消息。）

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2014-11-27T20:18:10.007

**编辑：（2016 年 5 月 31 日）**

对于尝试在 El Capitan 上执行此操作的用户，请阅读SwitchRes 网站上的[常见问题解答。](http://www.madrau.com/support/support/srx_1011.html)此外，如果在完成常见问题解答中的所有步骤后仍有问题，请考虑卸载并重新安装 SwitchResX。这解决了我在一台笔记本电脑上遇到的问题。

**原来的：**

在阅读了几个论坛、网站、博客之后。

我在这里为**15 英寸 MacBook Pro 用户提供解决方案，Retina 显示屏连接到 Thunderbolt 显示屏**。

首先，

1.  修改plist的终端命令
2.  石英调试
3.  按住选项并在系统偏好设置中选择“缩放”
4.  分辨率选项卡（Mac App Store）

无论出于何种原因，这些方法都不适用于带有 Thunderbolt Display 的 MBPr。您不会看到要选择的 HiDPI 选项。

我发现唯一真正为我们提供选项的工具是 SwitchResX。

然而，这里存在另一个问题。

我相信大多数使用这种设置的用户都在尝试使用 1280x720 HiDPI，因为它是 TBD 原始分辨率的一半。

根据[SwitchResX 的常见问题解答](http://www.madrau.com/support/support/faq.html)，在某些情况下，由于 OS X 本身存在错误，因此无法设置为该分辨率。

这是一个截图供您参考：

* * *

![在此处输入图像描述](../Images/25e98538e45f3a86374d48796c527a13.png)

* * *

在与开发人员联系后，他提出了一种解决方法——再添加一个像素——这对我有用。

1.  安装 SwitchResX 并从系统偏好设置中打开它。
2.  转到 Thunderbolt 显示选项卡，并添加自定义分辨率，**缩放分辨率**为**2562 x 1440** 这是屏幕截图![在此处输入图像描述](../Images/774b0393ee79a895021fa27a82f78b2f.png)
3.  使用 command + s 保存。（或者干脆关闭窗口并使用提示）
4.  重新启动笔记本电脑。
5.  转到 SwitchResX 并在 Current Resolution 选项卡中选择新的自定义分辨率。（有时它不会立即出现，请尝试一下，它应该会出现。）

干得好。

我希望通过此设置为用户提供此答案，因为在 16:9 显示器上使用 16:10 分辨率确实令人沮丧。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-08-21T12:20:30.193

对于那些无法在 rMBP 或新 MBA 上启用 HIDPI 的人，我在带有[Air Display的 rMBP 15" 上遇到了同样的情况。我通过安装](http://avatron.com/apps/air-display)[SwitchResX](http://www.madrau.com/indexSRX4.html)解决了这个问题。如引用的要点所示启用布尔设置，HIDPI 设置显示.

在 Air Display 中拖动似乎有点滞后，但在其他方面效果很好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-29T08:02:08.777

尝试这个

```
sudo defaults write /Library/Preferences/com.apple.windowserver DisplayResolutionEnabled -bool YES 
```

[[从这里]](http://embraceware.com/blog/2013/07/test-retina-graphics-hidpi-on-a-non-retina-display/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-29T19:07:16.690

至于我，它是一款相当不错的应用程序，可以让您有机会随心所欲地更改分辨率。

[适用于 Mac 和 MacBook 的SwitchResX](http://www.madrau.com/srx_whatitis/whatitis.html)。

这个应用程序解决了我所有的分辨率问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-26T12:02:36.907

如果您的显示器支持它，也可能值得将 DisplayPort 版本设置为 1.1 而不是 1.2。

我有一台配备三星 S27D850 显示器的 2010 年末 Mac Air，在我做出改变之前，我遇到了各种间歇性分辨率切换问题。

# php - 在使用 sql 查询设计网站搜索方面需要帮助

> ID：12124578
> 
> 赞同：1
> 
> 时间：2012-08-25T18:28:08.087
> 
> 标签：php, javascript, jquery, html, sql

我一直在尝试想出一种设计网页的方法，以允许用户在网页上进行选择，然后在数据库中查询这些选择并返回给用户。

例如，我的数据库是房屋列表。数据库表设置如下：

```
Country    Region     State      City       House
   1          1         1          1          A
   1          1         1          1          B
   1          1         1          2          C
   1          1         1          2          D
   1          1         1          3          E
   1          2         2          4          G
   1          2         3          5          H
   1          3         4          6          I
   1          4         5          7          J 
```

在搜索栏中，我希望用户能够说向我展示区域 2 中的任何和所有房屋、州 3 中的任何房屋以及城市 1 中的任何房屋。

在此示例中，数据库查询将返回房屋 G、H、A 和 B。搜索和结果的顺序现在并不重要。

这样的事情甚至可能吗？我考虑过在网站上使用复选框，但理想情况下，我宁愿只有一个使用自动完成（jquery）的搜索栏，其中每个条目都有与之相关的特定值。这些值将作为变量传递给搜索查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T18:40:54.360

您最好的选择是a 中`<select>`的元素`<form method="GET" action="somefile.php">`，然后在文件 somefile.php 中检索`$_GET`用户在元素中的表单上发布的值，`<select>`然后适当地生成 SQL 查询以检索数据。

答案是肯定的，这是可能的，但如果你要求有人为你做这件事，你会问很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T18:55:55.263

正如@khanahk 所说，您可以使用选择框。

> 我不知道如何一次搜索多个词。

您可以有多个选择框，例如一行四个或五个，并带有一个提交按钮，以使用这些选择框选择的参数进行搜索。

或者你可以用一个搜索框做一些非常酷的事情，它使用关键字来分隔不同类型的搜索，例如。）`House-a IN region-1`

我会看看以下链接： [http ://www.arroyocode.com/client-side-keyword-search-with-jquery-ui-autocomplete-and-asp-net-mvc-4](http://www.arroyocode.com/client-side-keyword-search-with-jquery-ui-autocomplete-and-asp-net-mvc-4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T18:39:00.913

您可以像使用谷歌地图一样使用逗号分隔符，然后使用逗号分隔符分割搜索框的内容，然后您将获得所需的 3 个参数。

# sql - 拒绝访问路径“D:\INETPUB\VHOSTS\vivek-vichar.org\....\temp\excelsheets\Student RegistrationTrial2.xls”

> ID：12124580
> 
> 赞同：0
> 
> 时间：2012-08-25T18:28:25.740
> 
> 标签：sql, sql-server, excel

在这里，我正在上传 Excelsheet，它将数据添加到 sql 表中。代码在本地主机上完美运行。在服务器上托管它给我错误后， **访问路径“D:\INETPUB\VHOSTS\vivek-vichar.org....\temp\excelsheets\Student RegistrationTrial2.xls”被拒绝。**

我已经创建了 temp\excelsheets 目录。

```
protected void import_xls_Click(object sender, EventArgs e)
    {
        try
        {
            string savePath;
            savePath = Server.MapPath("/temp/excelsheets");

            if (xlsupload.HasFile)
            {
                string fileName = xlsupload.FileName;
                savePath = Path.Combine(savePath, fileName);
                xlsupload.SaveAs(savePath);                  

                string excelConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + savePath + ";Extended Properties='Excel 8.0;HDR=YES;IMEX=1'";

                OleDbConnection excelConnection = new OleDbConnection(excelConnectionString);
                excelConnection.Open();

                OleDbCommand cmd = new OleDbCommand("select * from [Sheet2$]", excelConnection);                    
                OleDbDataReader dReader = cmd.ExecuteReader();

                SqlBulkCopy sqlBulk = new SqlBulkCopy(SqlConnectionstring.mainConnectionString, SqlBulkCopyOptions.KeepIdentity);
                if(grouplist.SelectedItem.Text == "A")
                {
                    sqlBulk.DestinationTableName = "dbo.studentA"; 
                }
                else if (grouplist.SelectedItem.Text == "B")
                {
                    sqlBulk.DestinationTableName = "dbo.studentB";
                }
                else if (grouplist.SelectedItem.Text == "C")
                {
                    sqlBulk.DestinationTableName = "dbo.studentC";
                }
                sqlBulk.ColumnMappings.Add("UserName", "UserName");
                sqlBulk.ColumnMappings.Add("Password", "Password");
                sqlBulk.ColumnMappings.Add("Name", "Name");
                sqlBulk.ColumnMappings.Add("Standard", "Standard");
                sqlBulk.ColumnMappings.Add("Division", "Division");
                sqlBulk.ColumnMappings.Add("SchoolName", "SchoolName");
                sqlBulk.ColumnMappings.Add("Language", "Language");                                       

                sqlBulk.WriteToServer(dReader);

                lblmsg.Visible = true;
                lblmsg.Text = "Your data uploaded successfully";
                excelConnection.Close();
            }
        }
        catch (Exception ex)
        {
            lblmsg.Visible = true;
            lblmsg.Text = ex.Message.ToString();

        } 
```

**网络配置**

```
<connectionStrings>
<add name="sqlconn" connectionString="Data Source=<servername>;User Id=******;Password=******;persist security info=False;Connect Timeout=0;Max Pool Size=10000" providerName="System.Data.SqlCient" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T21:23:41.250

在服务器上，找到包含它的文件或文件夹，然后：-

*   右键单击并选择属性。
*   将您的进程正在运行的用户帐户添加到具有读/写访问权限的安全权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T19:51:48.407

您的连接字符串用于您的数据库。需要访问电子表格的“用户”是您的 IIS 应用程序正在运行的用户，可能是 IUSR 帐户，或者您的应用程序池配置为使用的帐户，具体取决于 IIS 的版本和设置。

# haskell - 是否可以为此 DataKinds 支持的异构列表实现删除 OverlappingInstances？

> ID：12124584
> 
> 赞同：7
> 
> 时间：2012-08-25T18:28:35.247
> 
> 标签：haskell, hlist

随着最近有关 HaskellDB 的帖子，我有动力再次研究 HList。正如我们现在`-XDataKinds`在 GHC 中所拥有的，它实际上有一个异构列表的示例，我想研究 HList 与 DataKinds 的外观。到目前为止，我有以下内容：

```
{-# LANGUAGE FlexibleInstances #-}
{-# LANGUAGE MultiParamTypeClasses #-}
{-# LANGUAGE DataKinds #-}
{-# LANGUAGE GADTs #-}
{-# LANGUAGE OverlappingInstances #-}
{-# LANGUAGE TypeFamilies #-}
{-# LANGUAGE TypeOperators #-}

import Data.Tagged

data Record :: [*] -> * where
  RNil :: Record '[]
  (:*:) :: Tagged f (FieldV f) -> Record t -> Record (f ': t)

type family FieldV a :: *

emptyRecord = RNil

(=:) :: (v ~ FieldV f) => f -> v -> Tagged f v
f =: v = Tagged v

class HasField x xs where
  (=?) :: Record xs -> x -> FieldV x

instance HasField x (x ': xs) where
  (Tagged v :*: _) =? _ = v

instance HasField x xs => HasField x (a ': xs) where
  (_ :*: r) =? f = r =? f

--------------------------------------------------------------------------------
data EmployeeName = EmployeeName
type instance FieldV EmployeeName = String

data EmployeeID = EmployeeID
type instance FieldV EmployeeID = Int

employee =   (EmployeeName =: "James")
         :*: ((EmployeeID =: 5) :*: RNil)

employeeName = employee =? EmployeeName
employeeId   = employee =? EmployeeID 
```

这按预期工作，但我在这个项目中的目标是尝试尽可能不使用类型类。所以这里有2个问题。首先，是否可以在`(=?)`没有类型类的情况下编写（记录字段访问器函数）？如果不是，是否可以在没有重叠实例的情况下编写它？

我想我的第一个问题是不可能的，但也许第二个问题是可能的。我很想听听人们的想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T09:43:34.083

我认为这两个问题的答案都是不合格**的**。您根本无法拥有表单的类型功能

```
type family TypeEq a b :: Bool
type instance TypeEq a a = True
type instance TypeEq a b = False 
```

这本质上就是 OverlappingInstances 给你的。Oleg 提出了一种使用类型级别 TypeReps 的替代机制，但我们还没有。这个答案是合格的，因为你确实有*丑陋*的“解决方案”，比如使用 typeable

```
{-# LANGUAGE DataKinds, GADTs, DeriveDataTypeable, TypeFamilies, TypeOperators #-}

import Data.Typeable

type family FieldV a :: *

data FieldOf f where
  FieldOf :: FieldV f -> FieldOf f

(=:) :: f -> FieldV f -> FieldOf f
_ =: v = FieldOf v

fromField :: FieldOf f -> FieldV f
fromField (FieldOf v) = v

data Record :: [*] -> * where
  RNil :: Record '[]
  (:*:) :: Typeable f => FieldOf f -> Record t -> Record (f ': t)

data SameType a b where
  Refl :: SameType a a

useProof :: SameType a b -> a -> b
useProof Refl a = a 

newtype SF a b = SF (SameType (FieldOf a) (FieldOf b))
sf1 :: FieldOf f -> SF f f
sf1 _ = SF Refl

targetType :: f -> Maybe (SF g f)
targetType _ = Nothing

(?=) :: Typeable a => Record xs -> a -> Maybe (FieldV a)
RNil ?= _ = Nothing
(x :*: xs) ?= a = case (gcast (sf1 x)) `asTypeOf` (targetType a) of
                   Nothing      -> xs ?= a
                   Just (SF y)  -> Just . fromField $ useProof y x

x =? v = case x ?= v of
          Just x -> x
          Nothing -> error "this implementation under uses the type system"

data EmployeeName = EmployeeName deriving Typeable
type instance FieldV EmployeeName = String

data EmployeeID = EmployeeID deriving Typeable
type instance FieldV EmployeeID = Int

employee =   (EmployeeName =: "James")
         :*: ((EmployeeID =: 5) :*: RNil)

employeeName = employee =? EmployeeName
employeeId   = employee =? EmployeeID 
```

这显然不如基于类型类的版本好。但是，如果你对一点动态打字没问题……

# c++ - 在 C++ 中的两个不同核心中创建两个线程

> ID：12124586
> 
> 赞同：0
> 
> 时间：2012-08-25T18:28:43.173
> 
> 标签：c++, windows, multithreading, core

我读了一些关于这个问题的文章。这个案子似乎并不容易。我想在两个核心中创建两个不同的线程。我读的文章太复杂了。我什至无法根据这些文章创建一个简单的线程。另一方面，我需要了解计算机必须提供多少个内核，以作为使用两个内核或仅在一个内核上创建线程的选择。我想在窗户上做。任何帮助都将受到高度欢迎

PS：我不是 C++ 专家。所以，如果可能的话，请用更简单的方法指导我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T18:40:43.377

虽然这通常是一个糟糕的想法（线程调度程序*通常*自己做得更好），但基本的想法是：

```
HANDLE thread_a = CreateThread(/* ... */);
HANDLE thread_b = CreateThread(/* ... */);

SetThreadAffinityMask(thread_a, 1 << 0);
SetThreadAffinityMask(thread_b, 1 << 1); 
```

请注意，`1<<0`and`1<<1`可以像`1`和`2`分别一样容易地编写——我只是想明确说明每个位位置代表一个处理器的事实。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T18:44:11.187

For posix, check out `pthread_getaffinity_np` and `pthread_setaffinity_np`

# jsf - 从 jsf 页面重新更新域对象属性

> ID：12124588
> 
> 赞同：1
> 
> 时间：2012-08-25T18:28:50.527
> 
> 标签：jsf, jsf-2, primefaces

我有一个充满信息的数据表。在选定的一个行上调用“onRowSelect”方法。“订单号” outputText 条目填充有从 ProductOrder 对象检索到的值。

```
/* Filter bean */
public void onRowSelect(SelectEvent event) {
    NewOrderBean currentOrder = (NewOrderBean) FacesUtils
            .getManagedBean("newOrderBean");
    currentOrder.setOrderNum(((ProductOrder) event.getObject()).getOrderNum());
}

/* newOrderBean */
public int update() {
    ProductOrder pt = new ProductOrder ();
    try {
        pt = productService.findOrderbyNum(orderNum).get(0);
    } catch (Exception e) {
        return 0;
    }

    pt.setOrderNum(orderNum);

    try {
        FacesMessage msg = new FacesMessage("Product updated with: ", orderNum);
        FacesContext.getCurrentInstance().addMessage(null, msg);
        return 1;
    } catch (Exception e) {
        return 0;
    }
} 
```

用户在“订单号”中输入新文本后，按更新以修改产品订单号。

```
<!-- JSF page -->
<ui:define id="content" name="contentBody">
    <h:form class="ViewResservation" id="viewPanel">
        <p:tabView id="tabView">
            <p:tab title="Client" id="tab1">
                    <h:outputText value="Order number " />
                <p:inputText id="ordr" value="#{newOrderBean.orderNum}" />
                </p:tab>
            </p:tabView>    
    </h:form>
</ui:define>        
    <ui:define name="footer">
        <h:form>
            <h:commandButton value="Update"
                actionListener="#{newOrderBean.update}" />
        </h:form>
    </ui:define> 
```

问题是在输入新文本并按下更新后，值（orderNum）保持不变。如何获取用户输入的值并使用新订单号更新 ProductOrder 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T23:13:43.690

选项卡必须在 tabview 元素内。你把它倒过来了。

对于您的问题，您的订单号设置在一种形式中，而您的提交按钮设置在另一种形式中。您需要将两者放在相同的表格中，否则不会提交订单号。

# excel - Excel复制粘贴单元格范围

> ID：12124589
> 
> 赞同：2
> 
> 时间：2012-08-25T18:28:58.120
> 
> 标签：excel, powershell

如何在保留单元格属性值（例如行高/宽度）的情况下复制/粘贴单元格范围。我执行以下操作：

```
$excel=new-object -comobject excel.application;
$excel.visible=$true;
$SourceWorkBook=$Excel.Workbooks.open("c:\ret.xls");
$TargetWorkBook=$excel.workBooks.open("c:\test.xlsx");
$SourceWorkBook.WorkSheets.item(1).activate();
$SourceRange=$SourceWorkBook.WorkSheets.item(1).range("A6","P17");
$SourceRange.copy() | out-null;
$TargetWorkBook.worksheets.item(1).paste(); 
```

结果一团糟。行/列的高度/宽度与其原始值不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T08:19:25.493

There is a Range.PasteSpecial which corresponds to what you can do with the keyboard/menus. It allows you to specify what you want copying, see: [http://msdn.microsoft.com/en-us/library/office/ff839476](http://msdn.microsoft.com/en-us/library/office/ff839476) And [http://msdn.microsoft.com/en-us/library/office/ff837425](http://msdn.microsoft.com/en-us/library/office/ff837425)

I found some interesting examples (in PowerShell) here: [http://theolddogscriptingblog.wordpress.com/2010/06/01/powershell-excel-cookbook-ver-2/](http://theolddogscriptingblog.wordpress.com/2010/06/01/powershell-excel-cookbook-ver-2/)

# javascript - 冻结动态网格的标题行

> ID：12124597
> 
> 赞同：0
> 
> 时间：2012-08-25T18:29:41.427
> 
> 标签：javascript, asp.net, vb.net, gridview

我有一个动态创建的gridview。我在运行时将它添加到我的表单中（所以我的 HTML 源代码没有标签）。我设法获得了滚动条，但我的经理要求我在滚动时冻结标题行。互联网上的详尽搜索仅显示了静态网格视图示例。我尝试实现一个通用的 javascript 解决方案，但收到错误“需要对象”标记此行：

```
var gridWidth = grid.offsetWidth; 
```

这是我的html源代码：

```
form id="form1" runat="server">
<div>

    <asp:ImageButton ID="ImageButtonExcelExport" runat="server"
        ImageUrl="~/css/images/icons/custom/Excel-16.gif" 
        ToolTip="Export to Excel" PostBackUrl="~/ErrorReportGrid.aspx" />

    <div id="Div1" runat="server" >
    </div>

</div>

<!-- javascript here -->
<script type = "text/javascript">
var GridId = "<%=ErrorCodeGrid.ClientID %>";
var ScrollHeight = 300;
window.onload = function() {
    var grid = document.getElementById(GridId);
    var gridWidth = grid.offsetWidth;
    var gridHeight = grid.offsetHeight;
    var headerCellWidths = new Array();

for (var i = 0; i < grid.getElementsByTagName("TH").length; i++) {
        headerCellWidths[i] = grid.getElementsByTagName("TH")[i].offsetWidth;
    }

grid.parentNode.appendChild(document.createElement("div"));
    var parentDiv = grid.parentNode;
    var table = document.createElement("table");

for (i = 0; i < grid.attributes.length; i++) {
        if (grid.attributes[i].specified && grid.attributes[i].name != "id") {
            table.setAttribute(grid.attributes[i].name, grid.attributes[i].value);
        }
    }

    table.style.cssText = grid.style.cssText;
    table.style.width = gridWidth + "px";
    table.appendChild(document.createElement("tbody"));
    table.getElementsByTagName("tbody")[0].appendChild(grid.getElementsByTagName("TR") [0]);
    var cells = table.getElementsByTagName("TH");
    var gridRow = grid.getElementsByTagName("TR")[0];

for (i = 0; i < cells.length; i++) {
        var width;
        if (headerCellWidths[i] > gridRow.getElementsByTagName("TD")[i].offsetWidth) {
            width = headerCellWidths[i];
        }
        else {
            width = gridRow.getElementsByTagName("TD")[i].offsetWidth;
        }
        cells[i].style.width = parseInt(width - 3) + "px";
        gridRow.getElementsByTagName("TD")[i].style.width = parseInt(width - 3) + "px";
    }

parentDiv.removeChild(grid);
    var dummyHeader = document.createElement("div");
    dummyHeader.appendChild(table);
    parentDiv.appendChild(dummyHeader);
    var scrollableDiv = document.createElement("div");

if (parseInt(gridHeight) > ScrollHeight) {
        gridWidth = parseInt(gridWidth) + 17;
    }

scrollableDiv.style.cssText = "overflow:auto;height:" + ScrollHeight + "px;width:" + gridWidth + "px";
    scrollableDiv.appendChild(grid);
    parentDiv.appendChild(scrollableDiv);
}</script> 
```

这是我的vb代码：

```
Public ErrorCodeGrid As GridView

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    'Create dynamic grid
    ErrorCodeGrid = New GridView
    ErrorCodeGrid.ID = "ErrorCodeGrid"
    'form1.Controls.Add(ErrorCodeGrid)
    Div1.Attributes("Style") = "width: 930px; height: 280px; margin-top: 0px; overflow: auto"
    Div1.Controls.Add(ErrorCodeGrid)

    'Set datasource ID for dynamic grid / sets the data that is displayed
    If Session("strVariableA") = "SINGLEUSER" And Session("strVariableB") = "EMPTY" Then 'staff sees their personal error
        ErrorCodeGrid.DataSource = SqlDataSourceSingleUser
        strSQL = SqlDataSourceSingleUser.SelectCommand.Replace("@User_ID", "'" + Session("strVariableB") + "'")
    ElseIf Session("strVariableA") = "ALL_RECORDS" Then 'user selects the list item "All Records"
        If Session("strVariableB") = "READ" Then 'if user has READ access, sees everyone's errors
            ErrorCodeGrid.DataSource = SqlDataSourceErrorReports_Core_Data
            strSQL = SqlDataSourceErrorReports_Core_Data.SelectCommand.ToString
        Else 'user sees all errors but Provider Data's
            ErrorCodeGrid.DataSource = SqlDataSourceStaffNoUserID
            strSQL = SqlDataSourceStaffNoUserID.SelectCommand.ToString
        End If
    ElseIf Session("strVariableA") = "CATEGORY_DESCRIPTIONS" Then 'user selects the list item "Category Descriptions"
        ErrorCodeGrid.DataSource = SqlDataSourceErrorDescriptions
        strSQL = SqlDataSourceErrorDescriptions.SelectCommand.ToString
    ElseIf Session("strVariableA") = "ACTIVE_ERROR" Then 'user selects a list item within the Code dropdown
        ErrorCodeGrid.DataSource = SqlDataSourceActiveErrors
        strSQL = SqlDataSourceActiveErrors.SelectCommand.Replace("@Error_Code", "'" + Session("strVariableB") + "'")
    ElseIf Session("strVariableA") = "STAFF_MEMBER" Then 'manager sees the selected user's errors
        ErrorCodeGrid.DataSource = SqlDataSourceMgrSingleUser
        strSQL = SqlDataSourceMgrSingleUser.SelectCommand.Replace("@User_ID", "'" + Session("strVariableB") + "'")
    ElseIf Session("strVariableA") = "TEAM" Then 'manager sees the selected team's errors
        ErrorCodeGrid.DataSource = SqlDataSourceMgrTeam
        strSQL = SqlDataSourceMgrTeam.SelectCommand.Replace("@Team_Name", "'" + Session("strVariableB") + "'")
    End If
    ErrorCodeGrid.DataBind()

    'set gridview parameters
    ErrorCodeGrid.EmptyDataText = "You currently have no errors."
    ErrorCodeGrid.CellPadding = 2
    ErrorCodeGrid.AllowSorting = True
    ErrorCodeGrid.CellSpacing = 1
    ErrorCodeGrid.Height = Unit.Pixel(111)
    ErrorCodeGrid.Width = Unit.Pixel(2775)
    ErrorCodeGrid.RowStyle.Font.Size = 8

    'set gridview colors
    ErrorCodeGrid.ForeColor = Drawing.ColorTranslator.FromHtml(&H333333)
    ErrorCodeGrid.RowStyle.BackColor = Drawing.ColorTranslator.FromHtml(&HF7F6F3)
    ErrorCodeGrid.RowStyle.ForeColor = Drawing.ColorTranslator.FromHtml(&H333333)
    ErrorCodeGrid.AlternatingRowStyle.BackColor = Drawing.Color.White
    ErrorCodeGrid.AlternatingRowStyle.ForeColor = Drawing.ColorTranslator.FromHtml(&H284775)
    ErrorCodeGrid.HeaderStyle.BackColor = Drawing.ColorTranslator.FromHtml(&H5D7B9D)
    ErrorCodeGrid.HeaderStyle.ForeColor = Drawing.Color.White
    ErrorCodeGrid.HeaderStyle.Font.Bold = True
    ErrorCodeGrid.HeaderStyle.Font.Size = 8

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T23:23:05.050

您需要为动态网格指定一个 ID，以便它具有 ClientID。

```
 ErrorCodeGrid = New GridView
    ErrorCodeGrid.ID = "ErrorCodeGrid" 
```

编辑：因为你说它不适合你，所以有更多的见解。

在没有指定 ID 的情况下，我得到了这个 js 输出（我删除了一堆你的设计属性以进行澄清）：

```
var GridId = "ctl02"; // Your ID may differ. 
```

和网格视图：

```
table cellspacing="0" rules="all" border="1" style="border-collapse:collapse;" 
```

请注意，gridview 上没有 ID 规范，因此 javascript 找不到它，我得到一个空引用。

添加我得到的ID：

```
var GridId = "ErrorCodeGrid";
table cellspacing="0" rules="all" border="1" id="ErrorCodeGrid" style="border-collapse:collapse;" 
```

请注意，ID 匹配。

如果这对你不起作用，也许你使用的是比我更旧版本的 asp.net 或其他东西。但归根结底，这些 ID 需要匹配。

如果您无法使其正常工作，则另一种选择。将整个代码移动到一个函数中并传入 GridId（无论如何这是个好主意）。然后就可以用动态gridview的ClientId动态注入调用代码了。

```
ClientScript.RegisterStartupScript(Me.GetType, "FreezeHeader", "FreezeHeader(" & ErrorCodeGrid.ClientID & ");", True) 
```

编辑 2：使用上面的代码，您需要更改页面中的 javascript。

替换此代码：

```
var GridId = "<%=ErrorCodeGrid.ClientID %>";
var ScrollHeight = 300;
window.onload = function() { 
```

使用此代码：

```
var ScrollHeight = 300; // you could move this into the function as well.
var FreezeHeader = function(GridId) { 
```

客户端脚本管理器只会输出对此函数的调用。

# jquery - .load() 只有源 html 根目录的子节点？

> ID：12124599
> 
> 赞同：0
> 
> 时间：2012-08-25T18:29:58.080
> 
> 标签：jquery

在我的`url`我有一段 html 被包裹在一个`<tr>`

```
<tr>
    <td>
        <a class="row_edit" href="/sales_item/edit/{{ item.id }}" title="{% trans 'Edit' %}"><i class="icon-pencil"> </i></a>
        <a href="/sales_item/delete/{{ item.id }}" title="{% trans 'Delete' %}"><i class="icon-trash"> </i></a>
    </td>
    <td>{{ item.item_description }}</td>                    
</tr> 
```

在我的目标行中，当用户单击按钮时，我将上面的 html 加载到行中。

```
var row = $('tr');
row.load(
        url,        
        function () {                   
            $(".row_edit").click(row_edit);
        }
    ); 
```

但是问题是我会在 tr 里面有一个 tr：

```
<tr>
    <tr>
        <td>
            <a class="row_edit" href="/sales_item/edit/{{ item.id }}" title="{% trans 'Edit' %}"><i class="icon-pencil"> </i></a>
            <a href="/sales_item/delete/{{ item.id }}" title="{% trans 'Delete' %}"><i class="icon-trash"> </i></a>
        </td>
        <td>{{ item.item_description }}</td>                    
    </tr>
</tr> 
```

我怎么能说在做 .load() 时只加载源的孩子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:38:44.230

你可以试试这样的

```
row.load(
    url,        
    function () {    
        var data = $(this).find("tr").html();               
        $(this).html(data);
        $(".row_edit").click(row_edit);
    }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T18:55:55.250

```
var row = $('tr');
row.load(
        url + ' td',        
        function () {                   
            $(".row_edit").click(row_edit);
        }
    ); 
```

* * *

```
$('#result').load('ajax/test.html #container');// this is the page fragments selector for jQuery load 
```

# jquery - 简单的 jquery 幻灯片脚本 - 我的 jquery 语法有问题吗？

> ID：12124606
> 
> 赞同：0
> 
> 时间：2012-08-25T18:30:32.603
> 
> 标签：jquery, syntax, slideshow

> > > `var j$ = jQuery.noConflict();`
> > > 
> > > > `j$(document).ready(function(){`
> > > > 
> > > > > `j$.fn.slideShow = function(timeOut){`
> > > > > 
> > > > > > `var $slidecontainer = this;`
> > > > > > `this.children(':gt(0)').hide();`
> > > > > > 
> > > > > > > `setInterval(function() {`
> > > > > > > 
> > > > > > > > `$slidecontainer.children().eq(0).fadeOut(2000).next().fadeIn(2000).addClass('on').nextAll().removeClass('on').end().appendTo($slidecontainer);}, timeOut || 1000);`
> > > > > > > > 
> > > > > > > > > ***`var imgheight = this.children('.on').outerHeight();`
> > > > > > > > > `this.css('height', imgheight );`
> > > > > > > > > `};`*** `j$(function() {`
> > > > > > > > > `j$('.slideshow').slideShow(7000);});`
> > > > > > > > > `});`

在大多数情况下，上述脚本运行良好。唯一的问题是图像高度的 css 没有应用于父容器。当我在浏览器控制台中尝试此操作时，它可以完美运行。当我在页面中调用脚本时，它不会应用图像高度。但它会做其他所有事情。

这是html

> > > `<div id="slideshow" class="slideshow">`
> > > `<img width="970" height="300" src="someimage.jpg" class="" >`
> > > `<img width="970" height="300" src="someimage.jpg" class="" >`
> > > `<img width="970" height="300" src="someimage.jpg" class="" >`
> > > `<img width="970" height="300" src="someimage.jpg" class="" >`
> > > `<img width="970" height="300" src="someimage.jpg" class="" >`
> > > `</div>`

结果如下：

```
var j$ = jQuery.noConflict();
j$.fn.slideShow = function (timeOut) {

    var $slidecontainer = this;
    $slidecontainer.children(':gt(0)').hide();

    setInterval(function () {

        $slidecontainer.children().eq(0).fadeOut(2000).next().fadeIn(2000).addClass('on').nextAll().removeClass('on').end().end().appendTo($slidecontainer);
    }, timeOut || 1000);

    var imgheight =  $slidecontainer.children('img').first().outerHeight();   
     $slidecontainer.css('height', imgheight);
};
j$(window).load(function () {
   j$('.slideshow').slideShow(7000);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:48:32.337

尝试，

```
<div id="slideshow" class="slideshow">
       <img width="970" height="300" src="s_logo_lg.gif" class="" >
       <img width="970" height="300" src="lg.gif" class="" >
       <img width="970" height="300" src="es_logo_lg.gif" class="" >
       <img width="970" height="300" src="g.gif" class="" >
       <img width="970" height="300" src="http://www.google.co.in/intl/en_ALL/images/logos/images_logo_lg.gif" class="" >
 </div> 
```

* * *

```
var j$ = jQuery.noConflict();
j$.fn.slideShow = function (timeOut) {

    var $slidecontainer = this;
    this.children(':gt(0)').hide();

    setInterval(function () {

        $slidecontainer.children().eq(0).fadeOut(2000).next().fadeIn(2000).addClass('on').nextAll().removeClass('on').end().end().appendTo($slidecontainer);
    }, timeOut || 1000);

    var imgheight = this.children('img').first().outerHeight();   
    this.css('height', imgheight);
};
j$(window).load(function () {

    j$(function () {
        j$('.slideshow').slideShow(7000);
    });
}); 
```

[http://jsfiddle.net/RTZK6/](http://jsfiddle.net/RTZK6/)

$(window).load 确保图像被加载，以便它们的高度计算在所有浏览器中都能正常运行。您也可以专门查找每个 img 元素。

看起来你错过了一个 end()，你选择了 next() 然后 nextAl() 所以你需要两个 end() 来将选择指向当前元素。

更新的小提琴

[http://jsfiddle.net/RTZK6/2/](http://jsfiddle.net/RTZK6/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T18:46:42.963

您正在使用`this`, 而不是使用`$slidecontainer`或`$(this)`

您已经将其分配给 $slidecontainer 变量。

# ios - 在 ios 5 上通过 segues 访问字符串

> ID：12124609
> 
> 赞同：0
> 
> 时间：2012-08-25T18:31:01.330
> 
> 标签：ios, xcode, string, storyboard, segue

我有一个关于我的故事板的问题。我想通过 segue 更改 ViewA 中的字符串的值。这意味着 ViewB 应该执行 segue 并为更改 ViewA 中字符串的值做准备。我现在的问题是，我的字符串的值保持不变。

查看A.h 文件：

```
@interface NewViewController : UITableViewController <MKAnnotation>
{
    NSString *longString;

}
@property (weak, nonatomic) NSString *longString; 
```

ViewB.m 文件：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"transmitCoordsToNew"])
    {
        NewViewController *controller = (NewViewController *)segue.destinationViewController;
        controller.longString = [NSString stringWithFormat:@"%f", segueLong];    

    }
} 
```

知道为什么变量保持不变或者为什么我在 ViewA 中看不到进一步操作的任何变化吗？

提前致谢，

菲尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T18:34:51.003

我不确定你的变量 segueLong 来自哪里，但是对 longString 的弱引用很可能是导致问题的原因。将其更改为强参考，然后看看它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T19:55:33.050

如果在 prepareForSegue 中，您从我那里`NewViewController *controller`收到一个有效的（非零）值，`[NSString stringWithFormat:@"%f", segueLong];`我大约 90% 确信“弱”属性是导致该值变为零的原因。

这就是为什么！

[NSString stringWithFormat:@"%f", segueLong] 的范围受 prepareForSegue 方法的限制，它也没有所有者（也就是不计入引用）。即使 segueLong 有所有者并且不会被 arc 释放，从 stringWithFormat 生成的 NSString 也不会！

你需要做的就是变弱，变强。：

```
@interface NewViewController : UITableViewController <MKAnnotation>
{
    __strong NSString *longString;

}
@property (strong, nonatomic) NSString *longString; 
```

这确保了由 NSString stringWithFormat 生成的字符串将属于你的 NewViewController！

# eclipse - 试图重做我的 Eclipse“安装”

> ID：12124612
> 
> 赞同：0
> 
> 时间：2012-08-25T18:31:22.310
> 
> 标签：eclipse

我正在尝试删除将 eclipse 解压缩到的文件夹（我在桌面上进行操作以便于访问）。每次尝试时，我都会收到一条错误消息，指出无法完成，因为其中的文件夹或文件已在另一个程序中打开。我根本没有运行任何程序，我仍然无法删除该文件夹。我正在使用 Windows 8、Eclipse Juno，并且正在尝试下载 C/C++ 版本以便我可以使用 C++（获得了 CDT 插件，但找不到 g++）。现在，我真正想做的就是完全摆脱 Eclipse，这样我就可以从头开始了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T18:33:17.707

使用[Unlocker](http://www.filehippo.com/download_unlocker/)解决无法删除文件夹的问题。

# iphone - 关于使用 Slider 观察键值的一些帮助

> ID：12124613
> 
> 赞同：4
> 
> 时间：2012-08-25T18:31:30.280
> 
> 标签：iphone, ios, slider, key-value-observing

我正在练习 Key Value Observing，但我不太了解。

我有一个滑块 (sldMoving)，当它移动时，它会假装控制台显示“已更改”。虽然还有其他方法可以做到这一点，但我很好地学习。

在 - (void) viewDidLoad 中很好地实现它：

```
[super viewDidLoad];
[self.sldMoving addObserver:self forKeyPath:@"self.sldMoving.value" options:NSKeyValueObservingOptionNew context:NULL]; 
```

在 observaValueKeyPath 中：

```
-(Void) observeValueForKeyPath: (NSString *) keyPath ofObject: (id) object change: (NSDictionary *) change context: (void *) context {

  if ([keyPath isEqualToString:@"self.sldMoving.value"]) {
      NSLog(@"I Have change"); 
```

显然我写的这些废话是行不通的。

错误：

> 2012-08-25 20:17:07.611 示例 [3947:c07] *** 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[addObserver:forKeyPath:@"sldMoving.value" options:0x101 context:0x0] 已发送到“sldMoving”属性不符合 KVC 的对象。*** First throw call stack: (0x136b022 0x1060cd6 0x1313a48 0x13139b9 0xadc84f 0xadeb0c 0xaddd3f 0xadc6fd 0x27ff 0x28aa1e 0x1e9401 0x1e9670 0x1e9836 0x1f072a 0x1c1596 0x1c2274 0x1d1183 0x1d1c38 0x1c5634 0x2177ef5 0x133f195 0x12a3ff2 0x12a28da 0x12a1d84 0x12a1c9b 0x1c1c65 0x1c3626 0x1efd 0x1e65) terminate called throwing an exception

我该如何解决这个问题？

谢谢你。

*（请原谅我的英语不好）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T18:34:36.227

不太清楚为什么要使用 observeValueForKeyPath，但您可以使用下面的代码行轻松地将更改操作附加到滑块：

```
[self.sliderElement addTarget:self action:@selector(didChange:) forControlEvents:UIControlEventValueChanged]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T20:26:42.860

我可以理解想要学习，但您可能应该在控制器以外的其他东西上学习。一般来说，UIKit 不支持 KVO，除非明确说明。

如果你想监控一个控件，你需要使用标准的控件动作 API。

但是，为了帮助您了解您的错误发生了什么......

您正在尝试此代码...

```
[self.sldMoving addObserver:self forKeyPath:@"self.sldMoving.value" options:NSKeyValueObservingOptionNew context:NULL]; 
```

松散地翻译成这样的东西......

“哟，，`sldMoving`我想让你添加一个观察者对象（`self`）。现在观察者想观察这个关键路径会发生什么：`self.sldMoving.value`特别是新的变化。”

因此，该`sldMoving`对象会查看自己的内部，以查看该关键路径是否有意义。然而，它没有意义，所以它吐出这个例外。为什么没有意义？好吧，没有办法深入到路径中，因为这些名称对 UISlider 没有意义。

现在，如果您将其更改为：

```
[self addObserver:self forKeyPath:@"sldMoving.value" options:NSKeyValueObservingOptionNew context:NULL]; 
```

您至少会成功注册。那个人与对象交谈`self`并希望它观察`sldMoving.value`它可以做什么，因为它有一个符合 KVO 的 sldMoving（假设 sldMoving 是符合 KVO 的，我敢肯定，除非你添加了一些时髦的方式而不是传统方式），它有一个`value`.

或者，您也可以这样做...

```
[self.sldMoving addObserver:self forKeyPath:@"value" options:NSKeyValueObservingOptionNew context:NULL]; 
```

现在，在使用 KVO 时需要考虑很多问题，因此您应该真正阅读 KVO 编程指南：http: [//developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueObserving/Articles/KVOCompliance .html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueObserving/Articles/KVOCompliance.html)

现在，如果您只在第一次单击滑块时看到观察到的变化，请不要感到惊讶，因为您将错过所有其他值变化......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-24T13:40:25.023

# 斯威夫特 5

假设这是您的滑块属性：

```
var sliderPlayer: UISlider! 
```

向其添加操作以观察其值变化，如下所示：

```
sliderPlayer.addTarget(self, action: #selector(sliderValueChanged(_:)), for: UIControl.Event.valueChanged) 
```

你的方法应该是这样的：

```
@objc func sliderValueChanged(_ sender: UISlider)
{
    print(sender.value)
} 
```

# git - git：签出旧提交后，我如何查看下一个提交？

> ID：12124621
> 
> 赞同：3
> 
> 时间：2012-08-25T18:32:38.270
> 
> 标签：git

我对旧提交进行了结帐。

现在我想列出我提到的那个提交的后续提交，显示该提交是列表中的第一个。我怎样才能做到这一点？在“git log”中使用某些选项？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T18:35:50.287

假设您在分支上，`master`这将显示从当前签出的修订版到分支尖端的提交：

```
git log ..master 
```

要包括当前结帐的修订版，请使用：

```
git log HEAD^..master 
```

# javascript - javascript在字符之前获取字符串

> ID：12124623
> 
> 赞同：25
> 
> 时间：2012-08-25T18:32:52.033
> 
> 标签：javascript, jquery

我有一个字符串，我正在尝试提取引号之前的字符。

示例是从14' 中提取**14** **- €14.99**

我正在使用以下代码来实现这一点。

```
$menuItem.text().match(/[^']*/)[0] 
```

我的问题是，如果字符串类似于 €0.88，我希望返回一个空字符串。但是我拿回了 0.88 欧元的完整字符串。

我在比赛中做错了什么？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-25T18:34:06.287

这是您应该用来拆分的内容：

```
string.slice(0, string.indexOf("'")); 
```

然后处理你不存在的价值边缘情况：

```
function split(str) {
 var i = str.indexOf("'");

 if(i > 0)
  return  str.slice(0, i);
 else
  return "";     
} 
```

[JsFiddle 上的演示](http://jsfiddle.net/lechevalierd3on/PKBRw/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-25T19:11:06.613

似乎没有人提出在我看来是最安全和最明显的选择，涵盖了 OP 询问的每个案例，所以我想我会提供这个：

```
function getCharsBefore(str, chr) {
    var index = str.indexOf(chr);
    if (index != -1) {
        return(str.substring(0, index));
    }
    return("");
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-25T18:51:53.537

试试这个

```
str.substring(0,str.indexOf("'")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-23T01:04:35.943

这是 coffescript 中的下划线 mixin

```
_.mixin
  substrBefore : ->
    [char, str] = arguments
    return "" unless char?
    fn = (s)-> s.substr(0,s.indexOf(char)+1)
    return fn(str) if str?
    fn 
```

或者如果您更喜欢原始 javascript：http: [//jsfiddle.net/snrobot/XsuQd/](http://jsfiddle.net/snrobot/XsuQd/)

您可以使用它来构建像这样的部分：

```
var beforeQuote = _.substrBefore("'");
var hasQuote = beforeQuote("14' - €0.88"); // hasQuote = "14'"
var noQoute  = beforeQuote("14 €0.88");    // noQuote =  "" 
```

或者直接用你的字符串调用它

```
var beforeQuote = _.substrBefore("'", "14' - €0.88"); // beforeQuote = "14'" 
```

我故意选择在结果中保留搜索字符以匹配其补码 mixin `substrAfter`（这里有一个演示：http: [//jsfiddle.net/snrobot/SEAZr/](http://jsfiddle.net/snrobot/SEAZr/)）。后来的 mixin 被编写为解析 url 查询的实用程序。在某些情况下，我只是使用`location.search`which 返回一个带有前导的字符串`?`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-14T04:09:00.027

我使用“拆分”：

让字符串=“一二三”；

让 um = string.split('-')[0];
让 dois = string.split('-')[1];
让 tres = string.split('-')[2];

document.write(tres) //三个

# loops - 从字符设备读取时无限循环

> ID：12124628
> 
> 赞同：12
> 
> 时间：2012-08-25T18:33:41.710
> 
> 标签：loops, kernel, driver, device

对于家庭作业，我编写了一个字符设备驱动程序。它似乎工作正常。我能读能写。问题是当我读取设备时，它会无休止地循环，一遍又一遍地打印出消息缓冲区的内容。

这似乎应该是相当直截了当的。只需使用 copy_to_user()，但事实证明这是非常有问题的。

无论如何，这是代码。我认为问题出在 gdev_read() 函数中。printk 可以用作调试和谈话要点，因为我必须在课堂上展示该项目。

```
/*
 * Implement a generic character pseudo-device driver
 */

#include <linux/module.h>
#include <linux/kernel.h>
#include <linux/fs.h>
#include <linux/cdev.h>
#include <linux/types.h>
#include <linux/vmalloc.h>
#include <asm/uaccess.h>

/* you need these, or the kernel will be tainted */
MODULE_LICENSE("GPL");
MODULE_DESCRIPTION("A simple sample character device driver");

/*
 * function prototypes
 */
int init_module(void);
void cleanup_module(void);
static ssize_t gdev_read(struct file *, char *, size_t, loff_t *);
static ssize_t gdev_write(struct file *, const char *, size_t, loff_t *);
static int gdev_open(struct inode *, struct file *);
static int gdev_release(struct inode *, struct file *);

/* macros */
#define TRUE 1
#define FALSE 0
#define MAX_MSG_LEN 64

/*
 * global variables
 */
static dev_t dev_num;   /* device number, for new device */
static char *mesg;  /* buffer for message */

/* file operations structure, so my device knows how to act */
static struct file_operations fops = {
    .owner =    THIS_MODULE,
    .read =     gdev_read,
    .write =    gdev_write,
    .open =     gdev_open,
    .release =  gdev_release,
};

/* character device struct.  Declaired here, but initialized elsewhere */
struct cdev *gdev;

int init_module(void)
{   
    int err;
    printk(KERN_ALERT "in init_module\n");

    if(alloc_chrdev_region(&dev_num, 0, 1, "/dev/gdev")){
        printk(KERN_INFO "Could not allocate device numbers\n");
        printk(KERN_INFO "Module gdev not loaded\n");
        return -1;
    }

    /* now I need to make the device and register it */
    gdev = cdev_alloc();
    gdev->owner = THIS_MODULE;
    gdev->ops = &fops;
    err = cdev_add(gdev, dev_num, 1);
    if(err){
        printk(KERN_NOTICE "Error %d adding gdev", err);
        return err;
    }

    mesg = (char *)vmalloc(MAX_MSG_LEN);

    printk(KERN_INFO "Module gdev successfully loaded.\n");
    printk(KERN_INFO "gdev Major Number: %d\n", MAJOR(dev_num));

    return 0;
}

void cleanup_module(void)
{
    printk(KERN_ALERT "in cleanup_module\n");
    unregister_chrdev_region(dev_num, 3);
    vfree(mesg);
    cdev_del( gdev );
    printk(KERN_INFO "Module gdev unregistered\n");
}

static ssize_t gdev_read(struct file *filp, char *page, 
            size_t len, loff_t *offset)
{
    ssize_t bytes = len < MAX_MSG_LEN ? len : MAX_MSG_LEN;
    printk(KERN_ALERT "in gdev_read\n");
    if(copy_to_user(page, mesg, bytes)){
        return -EFAULT;
    }
    return bytes;
}

static ssize_t gdev_write(struct file *filp, const char *page, 
            size_t len, loff_t *offset)
{
    ssize_t bytes = len < MAX_MSG_LEN ? len : MAX_MSG_LEN; 
    printk(KERN_ALERT "in gdev_write\n");
    if(copy_from_user(mesg, page, bytes)){
        return -EFAULT;
    }

    return bytes;
}

static int gdev_open(struct inode *inode, struct file *filp)
{
    printk(KERN_ALERT "in gdev_open\n");
    return 0;
}

static int gdev_release(struct inode *inode, struct file *filp)
{
    printk(KERN_ALERT "in gdev_release\n");
    /* doesn't do anything because it doesn't need too */
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T00:24:16.513

如果没有从`read()`（在您的情况下`gdev_read()`）返回零，则将再次调用 read 函数。要停止此操作，请使用`loff_t *offset`参数。`(*offset) += bytes;`使用after将其增加您已读取的字节数`copy_to_user()`。下一次`read()`被调用，`offset`将是您将其递增到的内容。现在只需检查您之前发送了多少字节，并且只发送您仍然剩余的字节。您的函数应如下所示：

```
static ssize_t gdev_read(struct file *filp, char *page, 
            size_t len, loff_t *offset)
{
    ssize_t bytes = len < (MAX_MSG_LEN-(*offset)) ? len : (MAX_MSG_LEN-(*offset));
    printk(KERN_ALERT "in gdev_read\n");
    if(copy_to_user(page, mesg, bytes)){
        return -EFAULT;
    }
    (*offset) += bytes;
    return bytes;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-26T11:22:00.250

您可以使用' **linux/fs.h'中****的 'simple_read_from_buffer'**函数：

 **```
static ssize_t gdev_read(struct file *filep, char __user *buff, size_t count, loff_t *offp)
{
    return simple_read_from_buffer(buff, count, offp, my_buffer, buffer_len);
} 
```

' **my_buffer** ' 和 ' **buffer_len** ' 在您的模块中定义。**

# c# - 为什么我的应用程序在发布模式下崩溃但在调试模式下不崩溃？

> ID：12124633
> 
> 赞同：7
> 
> 时间：2012-08-25T18:34:13.230
> 
> 标签：c#, debugging, crash

发布模式和调试模式有什么区别？

以及如何在发布模式下调试以查看失败的原因？

```
class Program
{
    [STAThread]
    static void Main()
    {
        try
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new MainWindow());
        }
        catch (Exception ex)
        {
            Logger.Error("Main : "+ex.Message, typeof(Program));
            MessageBox.Show(ex.Message + ex.StackTrace);
            Environment.Exit(1);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-25T19:28:33.973

您的代码段中的 catch 子句永远不会在您的应用程序的发布版本中捕获任何内容。当您使用附加的调试器运行它时，它*确实有效。*

您缺少的是 Application.ThreadException 的行为方式。只要检测到任何未处理的异常，就会触发该事件。但是，当您调试代码时，**不会**启用此功能。没有安装异常处理程序来引发事件。这样做是为了让您有一种体面的方式来调试未处理的异常。您的代码更改了该行为，现在有*一个*try 块处于活动状态，您的 catch 处理程序会收到异常。

要使代码以相同的方式运行，您需要更改未处理的异常处理策略。像这样：

```
 [STAThread]
    static void Main() {
        try {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.SetUnhandledExceptionMode(UnhandledExceptionMode.ThrowException);
            Application.Run(new Form1());
        }
        catch (Exception ex) {
            // etc..
        }
    } 
```

现在您的 catch 子句将始终捕获异常。只要它在主线程上引发，它就不会捕获在工作线程中引发的异常。考虑使用此代码进行统一处理：

```
 [STAThread]
    static void Main() {
        AppDomain.CurrentDomain.UnhandledException += AllUnhandledExceptions;
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.SetUnhandledExceptionMode(UnhandledExceptionMode.ThrowException);
        Application.Run(new Form1());
    }

    private static void AllUnhandledExceptions(object sender, UnhandledExceptionEventArgs e) {
        var ex = (Exception)e.ExceptionObject;
        // Display or log ex.ToString()
        //...
        Environment.Exit(System.Runtime.InteropServices.Marshal.GetHRForException(ex));
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T19:15:50.823

我的经验告诉我，您应该寻找处理任何类型设置的代码。

您可以通过在注册表中没有设置且在 application.config 中没有设置的情况下调试您的应用程序开始。

如果您的应用程序使用数据库，您也应该尝试使用空数据库。

第二步是在您同事的计算机上调试您的应用程序。

希望这将有助于您的追求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-25T18:36:12.260

发生这种情况的原因有**很多，许多专业人士可以确认这是任何应用程序的****经典**错误，当您确定一切正常时出现，但在客户端计算机上不起作用。

很难说为什么会发生这种情况，而问题中没有提供任何例外细节。

顺便说一句，您可以通过从 Visual Studio 附加到应用程序来调试应用程序。

[如何：附加到正在运行的进程](http://msdn.microsoft.com/en-us/library/c6wf8e4z%28v=vs.100%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T18:46:45.397

找到任何环境选项的最佳方法是记录生产中发生的事情。从捕获和记录异常开始，然后将您学到的知识用于更具体的记录。

有关说明，请参阅[此 Microsoft 知识库文章](http://Support.microsoft.com/kb/307024)。

至于发布和调试模式背后的想法：

发布模式和调试模式的存在允许不同的配置，一种设计帮助开发人员发现错误，另一种设计用于优化性能，并针对生产环境进行配置。

了解差异的最佳方法是简单地调出您的项目构建属性（右键单击您的项目，选择属性，然后单击左侧的构建选项卡）。查看可以根据配置更改的所有不同选项。

调试与发布的另一个常见问题是没有在您的项目项目之一上设置正确的**构建操作**，例如配置文件或嵌入式资源。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-25T18:40:19.197

调试和发布模式是构建代码的两种不同方式。由于您使用的几乎每个开发环境的具体方式都不同，因此无法立即判断。这些模式也可以称为模式 1 和模式 2。

但是，您的调试模式可能会将调试信息（符号表、行号等）编译到您的二进制文件中，而 release 不会。但可能有成千上万的差异。

尝试查找指定调试/发布模式的位置，您会发现不同之处！

# mysql - inode 用法显示全为零：如何理解这一点

> ID：12124640
> 
> 赞同：0
> 
> 时间：2012-08-25T18:34:50.137
> 
> 标签：mysql, linux, inode

在其中一台测试服务器上，我们观察到 /var/lib/mysql 的 inode 使用情况显示全为零。我们无法理解这一点。df -i 输出如下。

```
db04 ~ # df -i /var/lib//mysql/
Filesystem            Inodes   IUsed   IFree IUse% Mounted on
/dev/drbd0                 0       0       0    -  /var/lib/mysql
db04 ~ # 
```

这是可以接受的这全为零的情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T19:57:15.487

这可能意味着您正在使用的文件系统没有从固定大小区域分配的 inode。

传统的 unix 文件系统会在 mkfs 时间分配一定数量的空间用于 inode 存储，以后无法添加更多空间，因此您必须担心 inode 用完，并`df -i`让您检查一下。一些最近设计的文件系统（例如 reiserfs）按需创建 inode，因此您永远不会在磁盘空间用完之前用完 inode。

最初不是为 unix 设计的文件系统（例如 vfat）根本没有 inode。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T21:00:20.640

您观察到的文件系统可能不是“真正的”文件系统，而是某种基于网络的镜像。`df`无法为这类人显示 inode 信息。有关详细信息，请参见[http://www.drbd.org/](http://www.drbd.org/)。

# signal-processing - DSP 并发数据和指令访问（循环迭代）

> ID：12124641
> 
> 赞同：1
> 
> 时间：2012-08-25T18:34:51.593
> 
> 标签：signal-processing, computer-architecture, processing-instruction

我试图理解 DSP 架构和指令执行中的这个基本概念：

“基于哈佛架构，CPU 可以同时获取数据和指令字......- 指令获取可以在前一条指令执行期间进行，无需等待指令执行完成或在下一条指令时必须停止处理器的操作正在被取走。”

然而，由于我对计算机体系结构的了解有限，我想到了这个问题：“如果要操作的数据（操作数）是由指令字决定的，这怎么可能！？想象一下从第一个周期开始迭代，指令。是从程序内存中加载的，那么这两个操作数应该在下一个周期中加载，这里有歧义：现在是执行时间/周期轮次，所以如果在加载数据时，下一个指令同时加载，前一个加载的指令丢失了，因此执行时会发生什么！？或者我错了，通过将数据从内存加载到数据寄存器来立即执行！？

** 代码示例：MPYF3 *(AR0)++, *(AR1)++, R0

*附录：我认为，由于没有寄存器文件，所以没有将任何数据加载到任何寄存器中 - 直接通过内存完成！所以在我看来，在第一次指导之后。已获取，在下一个周期中，由 prev 指定的所需数据（操作数）。指令 由功能单元通过内存操作（instr. exec.），同时下一个 instr. 取出字，并更新操作数的地址（作为执行的结果，通过地址寄存器 ALU）；这一切都是因为这些操作（数据访问、算术运算、地址更新、指令获取）中的每一个都是通过独特的物理架构处理的。

有没有人可以向我保证我的解释！？非常感谢对利用 DSP 哈佛架构中的并发数据和指令访问的周期迭代的典型指令的解释。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T23:37:55.550

哈佛架构是一种具有两种不同的存储器、高速缓存、总线等的架构。一种用于指令，另一种用于数据。这与冯诺依曼架构形成鲜明对比，后者具有用于指令和数据的单一统一存储器。

顺便说一句：C/C++ 软件的一个常见问题是缓冲区溢出，您（坏人）恶意将大量指令作为“输入数据”写入程序，希望有人没有检查输入长度并且会意外地让您的“数据”（实际上是一个程序，伪装成数据！）覆盖内存的“指令”部分。然后当程序运行到那些新指令时：BAM！您的“数据”（实际上是一个程序）现在可以控制原始程序。哈佛架构因其两个独立的内存空间而不会遇到这个问题。

那么这个 DSP CPU 是如何一次完成多项工作的呢？是魔法吗？并不真地。这意味着 CPU 是**流水线**的。流水线意味着 CPU 可以同时执行一条指令的开始、另一条指令的中间和第三条指令的结束。如何？通过保留一组中间结果寄存器，这些寄存器充当流水线一个阶段的“输出”和另一个阶段的“输入”。

值得注意的是，流水线与哈佛/冯诺依曼架构无关。两者都可以流水线化。

# android - 在没有监听器的情况下获取加速度计和位置值

> ID：12124642
> 
> 赞同：0
> 
> 时间：2012-08-25T18:35:09.247
> 
> 标签：android, android-sensors

我想在我想要的时候而不是在事件中简单地获取这些值......这可能吗？我看不到任何方法 getXValue()、getLatitude()、ecc ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T18:53:06.860

这些值由硬件生成，如果没有任何注册的侦听器，它们不会生成值（以节省电池）。

对于位置，您可以从那里致电`getLastKnownLocation()`，`LocationManager`但不能保证您会得到一些东西，或者您得到的东西甚至会是相关的。

如果您只想随时获取这些值，请创建侦听器并存储值并具有返回值的方法。让您的侦听器在单独的线程中运行，这样您就不会在 UI 上锁定任何内容。

还要确保适当地调整事件传递的频率，以避免做太多的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T18:39:49.057

你不能，因为这些操作需要时间，而且无论如何你都不想在等待它们时阻塞 UI。

# c++ - 在 xcode 中编译 RTMidi

> ID：12124643
> 
> 赞同：1
> 
> 时间：2012-08-25T18:35:17.910
> 
> 标签：c++, xcode, coremidi

我在尝试在 C++ 项目中的 Xcode 4 上编译 RTMidi 时遇到问题。

执行此操作的信息位于：http: [//www.music.mcgill.ca/~gary/rtmidi/index.html#compiling](http://www.music.mcgill.ca/~gary/rtmidi/index.html#compiling)

问题是我真的不知道如何在 Xcode 上设置那些编译标志。当我构建时，一切都运行得很完美，但我总是得到 0 个 Midi 输入和输出，但我确实连接了许多设备。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T23:50:45.457

我刚刚添加了预编译器宏**MACOSX_CORE**，它就像一个魅力！我以前在错误的地方做过

# visual-studio - 是什么导致 Git 和锁定的 ReSharper 文件夹出现此错误？

> ID：12124646
> 
> 赞同：0
> 
> 时间：2012-08-25T18:35:33.303
> 
> 标签：visual-studio, git, resharper, visual-studio-2012

最近几个月我多次收到此错误，但并非总是收到此错误。我怀疑它是在我升级到 VS11 Beta 或 ReSharper 7 时出现的。当我尝试将新解决方案中的文件添加到新的 Git 存储库时，我偶尔会收到如下错误。这可能是什么原因造成的？

```
error: open("_ReSharper.Avis/PersistentCaches/LOCK"): Permission denied 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T07:39:55.323

通常`LOCK`，文件只是不同软件使用的标记，用于标记正在使用的东西，或者实现一种形式的临界区，只允许程序的一个实例处理某些数据。并且要拥有安全锁，应该只允许一个程序接触这样的文件。

Git 尝试检查工作树中的每个文件，看看它是否与索引不同。`LOCK`为此，它必须访问这些文件，这是锁定文件所不允许的。

鉴于这些文件不是实际的数据文件，它们应该被安全地忽略。尝试[忽略](http://gitready.com/beginner/2009/01/19/ignoring-files.html)存储库中的所有 LOCK 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T10:40:50.557

这是内部 ReSharper 的锁。您应该忽略 ReSharper 的缓存文件夹 _ReSharper.Avis，并且不要将其放入 VCS。

# scala - Scala + JavaFX 桌面应用程序开发入门

> ID：12124657
> 
> 赞同：18
> 
> 时间：2012-08-25T18:37:10.547
> 
> 标签：scala, javafx, fxml

是否有构建 Scala + JavaFX 桌面应用程序的指南或演练？

我很难找到一个好的来源，我正在使用 IntelliJ IDEA 作为 IDE。

即使是最简单的桌面 hello world 示例也会有很大帮助，因为我不知道从哪里开始。

**更新：**这就是我现在拥有的：

```
import javafx.application.Application
import javafx.scene.Scene
import javafx.scene.layout.StackPane
import javafx.stage.Stage
import javafx.scene.control.Label

class Test extends Application {
  override def start(primaryStage: Stage) {
    primaryStage.setTitle("Sup!")

    val root = new StackPane
    root.getChildren.add(new Label("Hello world!"))

    primaryStage.setScene(new Scene(root, 300, 300))
    primaryStage.show()
  }
}

object Test {
  def main(args: Array[String]) {
    val t = new Test
    t.start(new Stage)
  }
} 
```

运行它我得到：

> 线程“主”java.lang.IllegalStateException 中的异常：不在 FX 应用程序线程上；当前线程 = 主线程

如何让它显示带有标签的 hello world 窗口？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-26T13:39:17.493

编写基于 Scala 的 JavaFX 应用程序时需要了解一些事项。

首先，这是一个示例 hello world 应用程序：

```
import javafx.application.Application
import javafx.scene.Scene
import javafx.scene.layout.StackPane
import javafx.stage.Stage
import javafx.scene.control.Label

class Test extends Application {
  println("Test()")

  override def start(primaryStage: Stage) {
    primaryStage.setTitle("Sup!")

    val root = new StackPane
    root.getChildren.add(new Label("Hello world!"))

    primaryStage.setScene(new Scene(root, 300, 300))
    primaryStage.show()
  }
}

object Test {
  def main(args: Array[String]) {
    Application.launch(classOf[Test], args: _*)
  }
} 
```

运行它你应该得到：

![在此处输入图像描述](../Images/dc5e41dca50494d3e0e48a6efad9306a.png)

这是 Java 中的官方 hello world 示例：http: [//docs.oracle.com/javafx/2/get_started/hello_world.htm](http://docs.oracle.com/javafx/2/get_started/hello_world.htm)

主要区别在于：

*   您必须编写所谓的伴随对象`def main()`来启动实际应用程序。
*   您必须指定它将在类 Test 的上下文中运行，而不是伴随对象：`Application.launch(classOf[Test], args: _*)`。

如果您只是尝试直接运行应用程序，`Application.launch(args : _*)`您将收到此错误：

> 线程“主”java.lang.RuntimeException 中的异常：错误：类 Test$ 不是 javafx.application.Application 的子类

要了解有关 JavaFX 的更多信息，请阅读官方文档：[http ://docs.oracle.com/javafx/index.html](http://docs.oracle.com/javafx/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-15T20:29:47.787

你可以使用这种方式。

```
 class BuildFx extends Application{

  override def start(primaryStage: Stage): Unit = {
    primaryStage.setTitle("Scala")
    var btn=new Button("Say Hello Scala")
    val root=new StackPane()
    root.getChildren().add(btn)
    primaryStage.setScene(new Scene(root, 300, 300))
    primaryStage.show()

  }

  def launchIt():Unit={
    Application.launch()
  }

}

///////////////////////////////////////////////////////////
object Init{

  def main(args: Array[String]): Unit = {
    val buildFx=new BuildFx
    buildFx.launchIt()

  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-11T15:54:06.097

我能够在 scala_swing 中更令人满意地解决这个问题，因为您可以使用参数实例化一个实例，然后在其上调用 main 以稍后启动 Swing。

此解决方案允许在 FX 应用程序中获取参数，但代价是使用静态 var 和可能的其他问题。一个是这肯定不是多线程安全的。

```
package hack

/**
  * Created by WorkDay on 8/11/16.<br>
  * <br>
  * HelloTest shows a method which allows parameters to be passed
  * into your javaFX application as it is started
  * this allows it to be connected to non-FX code that existed before it.
  *
  * You could also pass a reference to the Application back
  * into the non-FX code if needed.
  */

import javafx.application.Application
import javafx.scene.Scene
import javafx.scene.layout.StackPane
import javafx.stage.Stage
import javafx.scene.control.Label

case class Data(data: String)

object SomeOtherCode extends App {
  HelloTest.launch(Data("brave"), Data("new"))
}

object HelloTest {
  var data1: Data = _
  var data2: Data = _
  def launch(data1: Data, data2: Data) = {
    HelloTest.data1 = data1
    HelloTest.data2 = data2
    Application.launch(classOf[HelloTest])
  }
}

private class HelloTest extends Application {
  val data1: Data = HelloTest.data1
  val data2: Data = HelloTest.data2

  override def start(primaryStage: Stage) {
    primaryStage.setTitle("Sup!")

    val root = new StackPane
    root.getChildren.add(new Label(s"Hello ${data1.data} ${data2.data} world!"))

    primaryStage.setScene(new Scene(root, 300, 300))
    primaryStage.setX(0)
    primaryStage.setY(0)
    primaryStage.show()
  }
} 
```

# mysql - 从开始时间计算结束时间和mysql中的完成百分比

> ID：12124658
> 
> 赞同：0
> 
> 时间：2012-08-25T18:37:17.080
> 
> 标签：mysql, timestamp

我有的：

我有一个时间戳字段，其中包含我的项目开始的时间

用户正在使用完成百分比更新项目（1 到 100 而不是 0.01 到 1）

我想插入带有估计完成时间戳的更新表。

基础数学：

如何获得项目的全职：

```
(now() - start timestamp) * (100 / percent complete) 
```

时间结束：

```
start timestamp + full time of the project estimated above 
```

然后我需要在插入期间将估计的结束时间插入表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T18:41:25.387

马上你就有问题了，别管数学了。

[`timestamp`](http://dev.mysql.com/doc/refman/5.0/en/datetime.html)每次触摸该行时，数据类型都会自动更新为当前时间。这意味着当“用户更新项目”时，该`start_timestamp`列也会更新！

相反，您需要`datetime`数据类型，它存储相同类型的数据，但在更新其他列时不会更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T18:57:16.507

我想我明白了。

```
select timestampadd(second, round(timestampdiff(second, '2012-08-22 22:00:30', now())*(100/33)), '2012-08-22 22:00:30'); 
```

返回：2012-08-30 17:28:41

33 将是 %，其他时间戳是开始时间。完美运行。

# svn - SVN diff 忽略已删除的文件

> ID：12124660
> 
> 赞同：4
> 
> 时间：2012-08-25T18:37:38.000
> 
> 标签：svn

我对 SVN 真的很陌生，我不确定我做错了什么。

我从一个包含以下内容的存储库开始：

```
HelloWorld.java 
```

我在我的计算机上创建了一个工作集，然后将 HelloWorld.java 复制到 HelloWorldDe.java。然后我将 HelloWorld.java 重命名为 HelloWorldEn.java 并修改 HelloWorldDe.java 中的一行。在此之后，我有一个工作集，其中包含：

```
HelloWorldEn.java <-- Renamed copy of HelloWorld.java
HelloWorldDe.java <-- Renamed copy of HelloWorld.java with one line change 
```

当我做 SVN 状态时，我得到这个：

```
A HelloWorldDe.java
D HelloWorld.java
A HelloWorldEn.java 
```

当我做 SVN diff 我得到这个：

```
Index: HelloWorldDe.java
===================================================================
--- HelloWorldDe.java   (revision 0)
+++ HelloWorldDe.java   (revision 0)
@@ -0,0 +1,5 @@
+public class HelloWorld {
+  public static void main( String [] args ) {
+    System.out.println("Hallo welt!");
+  }
+}
Index: HelloWorld.java
===================================================================
--- HelloWorld.java (revision 13)
+++ HelloWorld.java (working copy)
@@ -1,5 +0,0 @@
-public class HelloWorld {
-  public static void main( String [] args ) {
-    System.out.println("Hello World!");
-  }
-}
Index: HelloWorldEn.java
===================================================================
--- HelloWorldEn.java   (revision 0)
+++ HelloWorldEn.java   (revision 0)
@@ -0,0 +1,5 @@
+public class HelloWorld {
+  public static void main( String [] args ) {
+    System.out.println("Hello World!");
+  }
+} 
```

但是，当我尝试在原始工作集上运行“patch -p0 -i German.diff”时，我得到了这样的结果：

```
HelloWorld.java <-- Empty file
HelloWorldEn.java
HelloWorldDe.java 
```

谁能解释为什么我得到一个空文件而不是文件被删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-09T18:27:23.053

## 1.首先，几个问题

1.  你用的是什么版本的`subversion`？（见第 3 部分）
2.  你是如何生成*German.diff 的*？我们是否假设*German.diff*看起来与`svn diff`您提供的输出完全相同？

## 2.补丁*确实*删除了文件

`patch`确实**通过删除所有行来删除本身为空的**文件，通常是默认情况下，但如手册页中所述，这取决于实现。来自`man patch`：

> **-E 或 --remove-empty-files**
> 
> 删除应用补丁后为空的输出文件。通常这个选项是不必要的，因为补丁可以检查头部的时间戳来确定一个文件在补丁之后是否应该存在。但是，如果输入不是上下文差异或补丁符合 POSIX，除非给出此选项，否则补丁不会删除空的补丁文件。当补丁删除一个文件时，它也会尝试删除任何空的祖先目录。

您可以强制使用此选项或强制`--posix`获得确定性行为。如果这样做，`patch`应删除该文件。

注意：*空*可能会产生误导。它真的是空的吗，就像 size = 0 字节一样？或者只是一个`\n`字符，没有文字？我发现真正的空文件是一场噩梦`patch`，但如果它导致它们为空，它应该删除它们。

## 3.`svn`有bug

某些版本的 svn diff 根本不会将移动/重命名/删除的文件放在 diff 中！这取决于你如何称呼差异。因此，***请确认***您提供的补丁文件`patch`（*German.diff*）***实际上在补丁中有该文件的条目***，否则您可能会遇到这种情况。

见：[http](http://svn.haxx.se/dev/archive-2004-03/0333.shtml) ://svn.haxx.se/dev/archive-2004-03/0333.shtml 。这封来自 SVN DEV 列表的存档电子邮件显示，在十多年前发布 1.0.1 之前的某个时间，开发人员自己发现了这个问题。

根据我的经验，这个问题在 SVN 1.7 中得到了修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T18:41:53.377

这是因为补丁不会删除文件。它仅使用补丁文件中的内容修改它们。所以这：

```
--- HelloWorld.java (revision 13)
+++ HelloWorld.java (working copy)
@@ -1,5 +0,0 @@
-public class HelloWorld {
-  public static void main( String [] args ) {
-    System.out.println("Hello World!");
-  }
-} 
```

不会删除 HelloWorld.java，它只会删除所有用 a 指示的行`-`，即全部。

如果您已提交所做的更改然后运行`svn up`该文件，则该文件将被删除。但是补丁不是svn。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-02T13:06:53.180

作为对此的更新，您可以使用 patch 命令的 -E 选项强制它在修补后删除空文件。

请参阅[https://www.tutorialspoint.com/unix_commands/patch.htm](https://www.tutorialspoint.com/unix_commands/patch.htm)

# php - 使用 sql 表中的数据自动创建 div

> ID：12124669
> 
> 赞同：1
> 
> 时间：2012-08-25T18:38:51.170
> 
> 标签：php, sql, html

我正在尝试`div`在从 SQL 数据库中获得的每个数据中创建具有不同数据的重复 s。我有代码创建`div`s 并用正确的数据填充正确的字段，但我的代码将`div`s 相互嵌套。

```
<?php
$query = mysql_query("SELECT id, name, location, amountRequested FROM     fundable");

while ($temp = mysql_fetch_array($query)) {
echo "<div class='widgetLoan'>";
echo "<div class='title'><h6>".$temp['name']."</h6><span class='widgetLoanCat'>Category</span>";
echo "<div class='num'><a href='#' class='blueNum'>".$temp['amountRequested']."</a></div>";
echo "</div>";
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T18:41:48.640

尝试这个 ：

```
<?php
$query = mysql_query("SELECT id, name, location, amountRequested FROM     fundable");

while ($temp = mysql_fetch_array($query)) {
echo "<div class='widgetLoan'>";
echo "<div class='title'><h6>".$temp['name']."</h6><span class='widgetLoanCat'>Category</span></div>";
echo "<div class='num'><a href='#' class='blueNum'>".$temp['amountRequested']."</a></div>";
echo "</div>";
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T18:41:53.447

你忘了关闭`</div>`标签

改变

```
echo "<div class='title'><h6>".$temp['name']."</h6><span class='widgetLoanCat'>Category</span>"; 
```

为了

```
echo "<div class='title'><h6>".$temp['name']."</h6><span class='widgetLoanCat'>Category</span></div>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T18:44:07.977

Looks like you are missing a `</div>` tag to me.

# xml - 使用 XSLT 的逗号分隔数据问题

> ID：12124674
> 
> 赞同：0
> 
> 时间：2012-08-25T18:39:29.843
> 
> 标签：xml, xslt, xpath

我正在尝试使用 XSLT 将 XML 数据转换为 CSV。行用逗号分隔，但一些数据有双引号。我使用以下代码进行转换，但它不能正确处理数据，尤其是带引号的行。

这是我的样本数据

```
<Add>
<Rowinfo>
<LocatorD>Dwelling  </LocatorD>
<LName> shark </LName>
<L>1</L>
<AArea>Abesinia Passage</AArea>
</Rowinfo> 
```

当 XSL 应用于它产生的上述数据时

```
LocatorDesignator,LocatorName,     Locator      ,  Thoroughfare     ,      AddressArea

Dwelling         ,     shark ,       1          ,   Abesinia Passage,

Shop 01-Feb,Shop ,       1   , Casenapes Square ,                   , 
```

但预期的结果是产生

```
LocatorDesignator,LocatorName,Locator,   Thoroughfare      ,       AddressArea

Dwelling         ,     shark ,  1    ,   Abesinia Passage  ,

Shop 01-Feb      ,     Shop  ,  1    ,    Casenapes Square , 
```

换句话说，当您将其作为 CSV 文件打开时

*   店铺01-2月，店铺恰好在单列
*   而不是单独的列，例如：

    定位器代号| 定位器名称

    店铺 01-2月,店铺|

代替

```
LocatorDesignator| LocatorName
Shop 01-Feb      | Shop 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T08:41:03.240

这个 XSLT 1.0 样式表...

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:output method="text"/>

<xsl:template match="/">
   <xsl:apply-templates select="*/Rowinfo[1]/*" mode="heading" />
   <xsl:value-of select="'&#x0A;'" />
   <xsl:apply-templates select="*/Rowinfo" />
</xsl:template>

<xsl:template match="Rowinfo/*" mode="heading" >
 <xsl:value-of select="local-name()" />
 <xsl:if test="position() != last()">  
  <xsl:value-of select="','" />
 </xsl:if>  
</xsl:template>

<xsl:template match="Rowinfo">
  <xsl:variable name="line-with-extra-comma">
   <xsl:for-each select="*">
    <xsl:variable name="col-name" select="local-name()" />
    <xsl:if test="../../Rowinfo[1]/*[local-name() = $col-name]">
      <xsl:call-template name="csv-encode" />
      <xsl:value-of select="','" />
    </xsl:if>  
   </xsl:for-each>
  </xsl:variable> 
 <xsl:value-of select="concat(
      substring($line-with-extra-comma, 1,
      string-length($line-with-extra-comma) - 1),
    '&#x0A;')" />
</xsl:template>

<xsl:template name="escape-value">
 <xsl:param name="text" />
 <xsl:choose>
  <xsl:when test="contains($text,'&quot;')">
    <xsl:value-of select="concat( substring-before($text,'&quot;'), '&quot;&quot;')" />
    <xsl:call-template name="escape-value">
      <xsl:with-param name="text" select="substring-after($text,'&quot;')" />
    </xsl:call-template>  
  </xsl:when>
  <xsl:otherwise>
   <xsl:value-of select="$text" /> 
  </xsl:otherwise>  
 </xsl:choose>  
</xsl:template>

<xsl:template name="csv-encode">
 <xsl:choose>
  <xsl:when test="contains(.,',') or starts-with(.,'&quot;')">
   <xsl:value-of select="'&quot;'" />
    <xsl:call-template name="escape-value">
     <xsl:with-param name="text" select="text()" /> 
    </xsl:call-template>  
   <xsl:value-of select="'&quot;'" /> 
  </xsl:when>
  <xsl:otherwise>
   <xsl:value-of select="." /> 
  </xsl:otherwise>  
 </xsl:choose>  
</xsl:template>  

</xsl:stylesheet> 
```

...将采用此输入文档...

```
<Address>
    <Rowinfo>
        <LocatorDesignator>Dwelling  </LocatorDesignator>
        <LocatorName> shark </LocatorName>
        <Locator>1</Locator>
        <AddressArea>Abesinia Passage</AddressArea>
    </Rowinfo>
    <Rowinfo>
        <LocatorDesignator>"Shop 01-Feb</LocatorDesignator>
        <LocatorName>"Shop</LocatorName>
        <Locator>1</Locator>
        <Thoroughfare>Casenapes Square</Thoroughfare>
        <AddressArea/>
    </Rowinfo>
</Address> 
```

...并将其转换为此 csv 输出...

```
LocatorDesignator,LocatorName,Locator,AddressArea
Dwelling  , shark ,1,Abesinia Passage
"""Shop 01-Feb","""Shop",1, 
```

## 注意事项

我假设：

1.  列标题由第一行的子元素定义。如果表可能为空（无行），则需要进行相应调整。
2.  元素按名称出现在后续行中的顺序与它们在第一行中的顺序相同。
3.  后续行可能包含无关的子元素，但绝不会丢失。无关的元素被丢弃。
4.  CSV 输出是正确的 csv 输出。如果值包含逗号或以双引号开头，则对它们进行双引号转义。
5.  所有值都是单行的。此脚本不处理多行 csv。
6.  输出行终止符是 LF。如果您需要 CR.LF 或其他内容，请进行相应调整。

# php - PHP/Mysql 字符集

> ID：12124675
> 
> 赞同：0
> 
> 时间：2012-08-25T18:39:43.433
> 
> 标签：php, mysql, utf-8, character-encoding, character

我有一个 PHP/MySQL 应用程序，它需要在幕后使用 UTF-8 字符（UTF-8 字符不会显示在屏幕上）。UTF-8 字符来自 PHP cURL 请求。

**我需要做什么才能使 PHP 和 MySQL 使用 UTF-8 字符正常运行？**

1.  我需要`default_charset = utf-8`在 php.ini 中设置吗？还是仅在屏幕上显示数据时使用？

2.  我是否需要将我的数据库、表和列的字符集/排序规则设置为 utf8/utf8_general_ci？

3.  我读到还有一个诸如MySQL的[连接字符集之类的东西。](http://dev.mysql.com/doc/refman/5.0/en/charset-connection.html "连接字符集")这真的重要吗？

4.  还有什么我需要做的吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T19:30:09.970

考虑使用 UTF-8 处理一切，php 文件、HTML 编码和数据库，它将为您省去很多麻烦。您无需在编码之间进行转换，您可以使用所有编码的所有可能字符，并且无需 HTML 实体即可。

我收集了一些关于如何使您的网站[仅使用 UTF-8](http://www.martinstoeckli.ch/php/php.html#utf8)的技巧。如果您已经有一个不同编码的数据库，那没问题，只需告诉连接对象传递 UTF-8。

```
$db = new mysqli($dbHost, $dbUser, $dbPassword, $dbName);
$db->set_charset('utf8'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T18:45:15.450

You can use following php in-built functions to iso characters to utf8 charset

```
utf8_encode(CHARACTERS); 
```

# node.js - MongoDB连接不断增加

> ID：12124677
> 
> 赞同：6
> 
> 时间：2012-08-25T18:40:16.373
> 
> 标签：node.js, mongodb, express, mongoskin, node-mongodb-native

我一直在达到我的连接限制，但 http 流量一直保持一致。我使用 MMS 来分析我的 mongod 进程，发现连接数不断增加：

![mongod 连接](../Images/daa0b453474fd2ea7d631d68e4cbb76d.png)

我正在使用 Node.js (Express) 的 mongoskin 包装器。在执行其他路由之前，我有一个连接到 mongo db 的自定义路由中间件：

```
var _connect = function(req, res, next) {
  res.db = mongoskin.db(_us.sprintf(
    '%s:%s@localhost:27017/%s?auto_reconnect',
    app.set('mongoDbUser'),
    app.set('mongoDbPw'),
    app.set('mongoDb')
  ));
  next();
}; 
```

难道我做错了什么？我应该如何打开和关闭连接？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-25T23:36:07.310

[mongoskin](https://github.com/kissjs/node-mongoskin)是[node-mongodb-native](https://github.com/mongodb/node-mongodb-native)驱动程序的包装器，因此底层本机驱动程序的选项仍然适用。

一些减少使用的连接数的建议：

1.  在启动应用程序之前打开连接（您不想在每个请求中打开连接）：

    ```
     var db = new mongoskin.db(...) 
     db.open(function(err, db) { 
         // Application logic
     }) 
    ```

2.  调整 node-mongo-native[连接 poolSize](https://github.com/mongodb/node-mongodb-native/blob/master/docs/database.md#server-options)。连接池允许在您的应用程序中共享一组连接，而不是总是打开新连接。默认 poolSize 在旧驱动程序中为 1，在 2012 年 8 月 16 日发布的 node-mongo-native 1.1.4 驱动程序中为 5。

    所以你可以尝试这样的事情：

    ```
     var mongoskin = require('mongoskin');
     var serverOptions = {
         'auto_reconnect': true,
         'poolSize': 5
     };
     var db = mongoskin.db('localhost:27017/test', serverOptions); 
    ```

# r - R: index() 或 index.xts() 改变时间序列的 Date 的值，为什么？

> ID：12124683
> 
> 赞同：3
> 
> 时间：2012-08-25T18:40:42.287
> 
> 标签：r, date, indexing, time-series, xts

我想从使用 getSymbols 获得的时间序列中提取日期，但是当我使用 index / index.xts 函数时，返回的日期似乎早了一天。我无法理解为什么在以下代码中会发生这种行为。

但是，预期的行为是获取与原始时间序列中的对象相对应的日期对象列表。

这是代码，请注意时间序列 SPY 的最后一个日期是 2012 年 8 月 24 日，但 index(SPY) 调用的最后一个值是 2012 年 8 月 23 日：

```
getSymbols("SPY")

tail(SPY)

    SPY.Open SPY.High SPY.Low SPY.Close SPY.Volume SPY.Adjusted
2012-08-17   142.23   142.30  141.86    142.18   90813700       142.18
2012-08-20   141.98   142.22  141.59    142.19   78255700       142.19
2012-08-21   142.54   143.09  141.45    141.76  105581100       141.76
2012-08-22   141.40   142.05  141.07    141.82  132999200       141.82
2012-08-23   141.47   141.48  140.44    140.66  111406800       140.66
2012-08-24   140.31   141.83  140.22    141.51   99431500       141.51 

tail(index(SPY))

[1] "2012-08-16" "2012-08-19" "2012-08-20" "2012-08-21" "2012-08-22" "2012-08-23"

tail(index.xts(SPY))

[1] "2012-08-16" "2012-08-19" "2012-08-20" "2012-08-21" "2012-08-22" "2012-08-23" 
```

感谢所有可以回复我帖子的人。

会议的附加信息

```
>sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252   
[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C                          
[5] LC_TIME=English_United States.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] rbenchmark_0.3.1             fGarch_2110.80.1            
 [3] fBasics_2160.81              MASS_7.3-20                 
 [5] timeSeries_2160.95           timeDate_2160.95            
 [7] tseries_0.10-29              quadprog_1.5-4              
 [9] PerformanceAnalytics_1.0.4.4 quantstrat_0.6.8            
[11] blotter_0.8.10               FinancialInstrument_0.15.2  
[13] quantmod_0.3-17              TTR_0.21-1                  
[15] Defaults_1.1-1               xts_0.8-6                   
[17] zoo_1.7-7                    lubridate_1.1.0             
[19] stringr_0.6.1                plyr_1.7.1                  
[21] XML_3.9-4.1                 

loaded via a namespace (and not attached):
 [1] colorspace_1.1-1   dichromat_1.2-4    digest_0.5.2       ggplot2_0.9.1     
 [5] grid_2.15.1        labeling_0.2       lattice_0.20-6     memoise_0.1       
 [9] munsell_0.3        proto_0.3-9.2      RColorBrewer_1.0-5 reshape2_1.2.1    
[13] scales_0.2.1       stabledist_0.6-4   tools_2.15.1     

> getDefaults(getSymbols)
NULL
> getSymbolLookup("SPY")
NULL
> showSymbols()
 SPY     GSPC      IBM      XLF      XLP      XLE      XLY      XLV      XLI 
 "yahoo"  "yahoo"  "yahoo"  "yahoo"  "yahoo"  "yahoo"  "yahoo"  "yahoo"  "yahoo" 
     XLB      XLK      XLU      IEF     AAPL      DIA     MSFT      IWM      EEM 
 "yahoo"  "yahoo"  "yahoo"  "yahoo"  "yahoo"  "yahoo"  "yahoo"  "yahoo"  "yahoo" 
     EFA      GLD      AGG      HYG      FXE      FXY      VXX      VXZ      HIG 
 "yahoo"  "yahoo"  "yahoo"  "yahoo"  "yahoo"  "yahoo"  "yahoo"  "yahoo"  "yahoo" 
    VTI      VEU      VNQ      DBC      XAU     gold     Gold STOXX50E     GOLD 
"yahoo"  "yahoo"  "yahoo"  "yahoo"  "oanda"  "oanda"  "oanda"  "yahoo"  "yahoo" 
     VIX  DEXUSEU   EURUSD  DEXKOUS    EUR=X    INR=X 
 "yahoo"   "FRED"  "oanda"   "FRED"  "yahoo"  "yahoo" 
```

另请注意，我通过使用命令安装了来自 Systematic Investor 博客 systeminvestor.wordpress.com 的一些 R 代码

```
setInternet2(TRUE)
con = gzcon(url('systematicportfolio.com/sit.gz', 'rb'))
source(con) 
close(con) 
```

解决方案加上附加问题

GSee 用户找到了答案（谢谢！）指出在我的会话中我屏蔽了 index.xts。所以一个解决方案是调用 xts:::index.xts(SPY) 而不仅仅是 index.xts(SPY) 来覆盖屏蔽。实际上命令

```
> tail(xts:::index.xts(SPY)) 
```

返回正确答案

[1] “2012-08-17” “2012-08-20” “2012-08-21” “2012-08-22” “2012-08-23” “2012-08-24” –</p>

答案现在引发了另一个问题：在“屏蔽/覆盖” index.xts 函数的代码下方给出（返回错误的答案，将日期提前一天）：

```
> index.xts
function (
x           # XTS object
)
{
temp = attr(x, 'index')
class(temp)='POSIXct'   
if( attr(x, '.indexCLASS')[1] == 'Date')
    temp = as.Date(temp)
return(temp)
} 
```

为什么这个函数在调用 tail(index.xts(SPY)) 时返回错误的结果？这个 index.xts 函数的代码有什么问题？

比较两个输出（第一个是错误的，而第二个提供正确的答案）：

```
tail(index.xts(SPY))

[1] "2012-08-16" "2012-08-19" "2012-08-20" "2012-08-21" "2012-08-22" "2012-08-23"

tail(xts:::index.xts(SPY))
[1] "2012-08-17" "2012-08-20" "2012-08-21" "2012-08-22" "2012-08-23" "2012-08-24" 
```

再次感谢您的时间和关注。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-25T19:52:30.383

这个问题是您运行了一些代码，这些代码掩盖了**xts**包中的`index.xts`方法。在您的 OP 的评论中，您告诉我们您运行了此代码

 **```
setInternet2(TRUE)
con = gzcon(url('http://www.systematicportfolio.com/sit.gz', 'rb'))
source(con)
close(con) 
```

运行该代码后，`index.xts`已重新定义（实际上是屏蔽）为

```
> index.xts
function
(
        x                       # XTS object
)
{
        temp = attr(x, 'index')
        class(temp)='POSIXct' 

        if( attr(x, '.indexCLASS')[1] == 'Date')
                temp = as.Date(temp)
        return(temp)
} 
```

如果您将其与`xts:::index.xts`被屏蔽的函数进行比较，您会发现它完全不同。所以，你不能再期待同样的结果。

如果您从systematicportfolio.com/sit.gz 下载代码并查看它，您会看到这条评论

```
###############################################################################
# Fast alternative to index(x) for XTS object
# NOTE index.xts is the same name as the index function in the XTS package
############################################################################### 
```

因此，作者似乎故意这样做是为了让它更快。不幸的是，他也让它变得不那么健壮了。

这段代码实际上给了我与 相同的结果`xts:::index.xts`，所以我不能 100% 确定为什么使用它会得到不同的结果。但是，我的猜测是它与将类从更改为`numeric`然后`POSIXct`转换回`Date`

无论如何，我可能会跑

```
rm(index.xts) 
```

在采购该代码以删除此“增强”之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T18:59:10.593

打开一个干净的 R 副本可能值得。我得到（使用 R 2.15.0）：

```
> require(quantmod)
> getSymbols("SPY")
[1] "SPY"
> tail(SPY)
           SPY.Open SPY.High SPY.Low SPY.Close SPY.Volume SPY.Adjusted
2012-08-17   142.23   142.30  141.86    142.18   90813700       142.18
2012-08-20   141.98   142.22  141.59    142.19   78255700       142.19
2012-08-21   142.54   143.09  141.45    141.76  105581100       141.76
2012-08-22   141.40   142.05  141.07    141.82  132999200       141.82
2012-08-23   141.47   141.48  140.44    140.66  111406800       140.66
2012-08-24   140.31   141.83  140.22    141.51   99431500       141.51
> index(tail(SPY))
[1] "2012-08-17" "2012-08-20" "2012-08-21" "2012-08-22" "2012-08-23" "2012-08-24"
> tail(index(SPY))
[1] "2012-08-17" "2012-08-20" "2012-08-21" "2012-08-22" "2012-08-23" "2012-08-24"
> tail(index.xts(SPY))
Error in tail(index.xts(SPY)) : could not find function "index.xts" 
```**

# google-apps-script - 轮询电子表格？

> ID：12124688
> 
> 赞同：0
> 
> 时间：2012-08-25T18:41:33.563
> 
> 标签：google-apps-script, google-sheets, google-apps

在 Google Apps 脚本网络应用程序 ( `doGet()`) 中，我想在某个电子表格更改后刷新显示。我正在考虑每十秒左右轮询一次电子表格。但是，似乎没有计时器，只有一个[丑陋的解决方法](http://productforums.google.com/forum/#!topic/apps-script/2pqhh_eTIvQ)（尽管它很聪明）。

知道如何实现自动刷新吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:38:31.143

如果您使用[HtmlServices](https://developers.google.com/apps-script/html_service)来构建您的应用程序，那么您将拥有 javascript 常规`setTimeout`功能，您可以在其中轻松配置计时器。不过，在 UiApp 上，我认为您仅限于链接的非常聪明的解决方法。

# iphone - Xcode plist 保存在模拟器上但不在 iPhone 上

> ID：12124691
> 
> 赞同：0
> 
> 时间：2012-08-25T18:41:52.817
> 
> 标签：iphone, xcode, ios-simulator

我正在编写一个程序，将锻炼保存到沙箱中的 plist 中。它在按下按钮后保存并且名称在文本视图中。保存后，它将锻炼添加到 tableview 实现在模拟器中运行良好，但在实际 iPhone 上却不行。有什么建议么？（另外，这是我的第一篇文章，所以请多多包涵。谢谢）

```
- (NSString *)dataFilePath {
    NSArray *paths =NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    return [documentsDirectory stringByAppendingPathComponent:kFileName];
}

- (IBAction)buttonPressed:(id)sender {

    if ([saveNameTextView.text length] == 0) {  //name is not added to the textview for saving
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Oops =(" message:@"You need to enter a name for the workout" delegate:self cancelButtonTitle:@"OK, I'll add a name" otherButtonTitles: nil];
        [alert show];
    }else { //name is added for saving in the textview
        NSString *filePath = [self dataFilePath];
        NSMutableDictionary *savedWorkout = [[NSMutableDictionary alloc]initWithContentsOfFile:filePath];

        if ([savedWorkout objectForKey:saveNameTextView.text]) { //if the name already exists, alert the user
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Oops =(" message:@"Name is already taken, please choose another" delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
            [alert show];
        }else{  //save the workout
            [savedWorkout setObject:self.saveDetails forKey:saveNameTextView.text];
            [savedWorkout writeToFile:[self dataFilePath] atomically:YES];
            NSString* saveConfirm = [[NSString alloc] initWithFormat:@"%@ has been saved",saveNameTextView.text];
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Save Complete" message:saveConfirm delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
            [alert show];
        }//end if
    }//end if
} 
```

# c++ - 返回枚举数组的函数

> ID：12124695
> 
> 赞同：2
> 
> 时间：2012-08-25T18:42:24.780
> 
> 标签：c++, arrays, pointers, return

我需要一个返回枚举数组的方法，我尝试了：

```
note_name *AppSettings::getNoteMap(){
    note_name notes[] = {..}
} 
```

我在某处读到我应该返回数组第一个元素的地址，所以这就是为什么有一个指针。不过，这给了我一个警告：`address of stack memory associated with local variable notes returned`

如何摆脱警告并正确返回数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T18:46:37.887

您不能从函数句点返回数组。您可以返回指向动态分配的内存块的指针（我不会走这条路），或者将指针（连同大小）作为输出参数，或者返回指向静态数组的指针，或者返回一个`vector<T>`或其他一些收藏。

我会使用 a`std::vector`或 a `std::array`。

```
std::vector<note_name> foo() {
    std::vector<note_name> ret;
    // populate 'ret'
    return ret;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T18:44:03.727

使用`std::vector`, `std::array`，其他一些集合或`dynamic-array`（即使用`new`，而不是在堆栈上分配），因为从函数范围退出后，您的数组将被销毁并且您将拥有指针，该指针指向内存中的一些垃圾。我认为你知道你的值有多少`enum`，如果你有 C++11，你可以使用`std::array`.

```
std::array<note_name> foo() {
   std::array<note_name, size> ret = { ... }; // fill ret, instead of ...
   return ret;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T18:47:23.287

为此，您需要动态分配数组并返回相应调用返回的指针`new`。您不能返回指向函数本地变量的指针，因为函数退出后它将不复存在。使用 new 将确保函数退出后内存在堆上持续存在。`std::vector`当您使用 C++ 时，使用并让您的函数返回一个向量的实例会更好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T19:02:58.100

让我们看看你写的：

```
note_name *AppSettings::getNoteMap(){
    note_name notes[] = {..}
} 
```

数组`notes`是一个局部变量，函数返回时会自动清理。如果您返回一个指向它的指针，那么您将返回一个指向不再存在的数组的指针。这就是编译器抱怨的原因。

如果数组的大小和内容在编译时已知，则声明数组静态常量。然后您可以返回对数组的引用。语法有点奇怪：

```
static const std::size_t note_names_size = 42;
note_name const (&AppSettings::getNoteMap())[note_names_size] {
    static note_name const notes[note_names_size] = { ... };
    return notes;
} 
```

如果在编译时知道数组的大小，但不知道内容，请使用`std::array`. 你可以声明一个局部变量，填充它，然后按*值*返回。

*如果在编译时不*知道数组的大小和内容（或者如果您的库没有实现`std::array`），请改用 a `std::vector`。

# wordpress - WordPress 循环错误

> ID：12124697
> 
> 赞同：0
> 
> 时间：2012-08-25T18:42:49.670
> 
> 标签：wordpress

首先让我说我已经在这个问题上工作了大约 2 周，并且我到处寻找答案。我去过各种论坛、博客、WordPress Codex 以及几乎所有我能找到的地方。我仍然无法让它正常工作。作为最后的手段，我来这里看看是否有人可以帮助我。

我的问题是这个。我正在构建一个免费的 Wordpress 主题，[http:](http://wp-awesome.themeawesome.com) //wp-awesome.themeawesome.com 。我会将其提交到 WordPress 主题存储库，并希望将其托管，以便人们可以下载它。要求之一是主题不能产生任何错误。一切正常，除了一个错误之外没有任何错误。当我转到第二页时，我收到以下错误消息：

***注意：未定义的变量：do_not_duplicate in /--/--/--/--/--/--/wp-awesome/index.php 第68行***

正如您在首页上看到的那样，有一个精选的帖子滑块。此滑块将显示标记为“精选”的帖子。我为此特定查询使用以下代码：

```
 <?php 
            $mytag = mytheme_option( 'featured_tag' );
            $thecount = mytheme_option( 'featured_count' );
            $my_query = new WP_Query("tag=$mytag&showposts=$thecount");
            while ($my_query->have_posts()) : $my_query->the_post();
            $do_not_duplicate[] = $post->ID;
        ?>

// post stuff here

<?php endwhile; ?> 
```

现在显然在主页上，我不希望滑块中显示的帖子在其下方的常规循环中显示在首页上。所以我发现下面的代码似乎很好用：

```
 <?php 
if (is_home()) { 
    $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
    query_posts(array(
        'post__not_in' => $do_not_duplicate,
        'paged' => $paged
    )); }
if (have_posts()) : while (have_posts()) : the_post(); ?>

// post stuff

<?php endwhile; ?> 
```

唯一的问题是当您单击底部的另一个页面时，会显示错误：

***注意：未定义的变量：do_not_duplicate in /--/--/--/--/--/--/wp-awesome/index.php 第68行***

我知道错误正在出现，因为当您转到第二页或第三页时，没有定义 do_not_duplicate 参数。任何想法如何解决这一问题？

非常感谢任何帮助，我提前感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T18:58:55.677

简单快速的修复（不是最好的）是在主题的 header.php 文件中声明 $do_not_duplicate 变量，该文件位于：wp-content/themes/YOUR_THEME/header.php。如果它是一个数组，您可能需要声明它的元素。像这样：

```
<?php
  //  declaration of $do_not_duplicate array
  for ( $i = 0; $i < 100; $i++ ) {
    $do_not_duplicate[$i] = 0;
  };
?> 
```

# c# - How to make conditional attributes in C#?

> ID：12124705
> 
> 赞同：3
> 
> 时间：2012-08-25T18:44:13.190
> 
> 标签：c#, attributes

I want to hide some member vars in my C# class.
I can do this via the DebuggerBrowsable attribute:

```
using System.Diagnostics;

[DebuggerBrowsable(System.Diagnostics.DebuggerBrowsableState.Never)]
int myvar; 
```

However, I only want this attribute to be applied for Release builds - I want to hide the var from my assembly's Release-build consumers but I want the var visible in Debug builds for inspection during dev, etc.

I could, but would prefer not to, wrap each attribute in an #if block:

```
#if !DEBUG
        [DebuggerBrowsable(System.Diagnostics.DebuggerBrowsableState.Never)]
#endif 
```

That would do the trick, but creates some pretty messy-looking code.

If I were in C++/CLI - and had macros - I could do this:

```
#ifdef _DEBUG
#define HIDDEN_MEMBER
#else
#define HIDDEN_MEMBER   [System::Diagnostics::DebuggerBrowsableAttribute(System::Diagnostics::DebuggerBrowsableState::Never)]
#endif 
```

and then

```
HIDDEN_MEMBER
int myvar; 
```

But no macros in C# :(

Any bright ideas as to how to achieve the macro-like syntax in C#?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T19:30:31.030

尝试

```
const bool debugging = true; 
```

接着

```
[DebuggerBrowsableAttribute(debugging ? DebuggerBrowsableState.Collapsed
                                      : DebuggerBrowsableState.Never)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T19:07:54.230

查看[ConditionalAttribute 类](http://msdn.microsoft.com/en-us/library/system.diagnostics.conditionalattribute.aspx)，您可以将`[Conditional]`属性应用到`[DebuggerBrowsable]`属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T14:47:35.170

Just another suggestion, using a type alias:

```
#if DEBUG
using HiddenMember = global::DummyAttribute.HiddenMember;
#else
using HiddenMember = global::System.Diagnostics.DebuggerBrowsableAttribute;
#endif

namespace DummyAttribute
{
    class HiddenMember : Attribute
    { public HiddenMember(DebuggerBrowsableState dummy) { } }
} 
```

Usage:

```
public class YourClass
{
    [HiddenMember(DebuggerBrowsableState.Never)]
    int YourMember = 0;
} 
```

Feel free to hide the `DebuggerBrowsableState.Never` argument behind a constant.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T21:29:06.620

这是我想出的，我喜欢的东西：

```
In the base class:
#if DEBUG
   [DebuggerBrowsable(System.Diagnostics.DebuggerBrowsableState.Never)]
   internal const System.Diagnostics.DebuggerBrowsableState BROWSABLE_ATTRIB = System.Diagnostics.DebuggerBrowsableState.Collapsed;
#else
   [DebuggerBrowsable(System.Diagnostics.DebuggerBrowsableState.Never)]
   internal const System.Diagnostics.DebuggerBrowsableState BROWSABLE_ATTRIB = System.Diagnostics.DebuggerBrowsableState.Never;
#endif 
```

这对我有用，因为我所有的对象都有一个共同的基础，无论它有多深。
请注意，我隐藏了 BROWSABLE_ATTRIB ...我不希望该 const 公开可见。

然后在任何派生类中：

```
[DebuggerBrowsable(BROWSABLE_ATTRIB)]
int myvar; 
```

我更喜欢@Olivier 的回答，尽管我很感谢他发布它。
虽然每个属性中的三元组都比**#if #else #endif**混乱更好，但它仍然比我更喜欢的冗长。

我也不知道**ConditionalAttribute**；感谢@Tony。虽然它可能无法解决这种特殊情况，但我可以看到它对其他人非常有用，我很高兴将它添加到我的技巧包中。

# c++ - 将 C/C++ 代码从 Linux 转移到 Windows 真的很慢

> ID：12124707
> 
> 赞同：0
> 
> 时间：2012-08-25T18:44:39.193
> 
> 标签：c++, c, windows, linux, compiler-construction

我有一个非常基本的程序，只有函数和变量并执行一些计算。构建部分很好。只有 cout、加法、乘法等非常基本的东西。

在 linux 上，程序在 eclipse cdt 上运行良好，（运行大约 3-4 秒）

当程序在visual studio 2010 c++上的windows 7上运行时，程序在带有MinGW的windows 7 eclipse c++上运行时花了163秒，很多

这里发生了什么？？！！？！

编辑：我们不要称它为 c++，这里只是很多 C 函数，这是来自 main() 的代码

```
 foutput1 = fopen(FILENAME1, "w");
foutput2 = fopen(FILENAME2, "w");
solveSystem();
OutputStepToFile();
iter++;
do
{
    temporalExternalChange(tim);
    do
    {
        solveSystem();
        iter++;
    } while (iter<T_FOUT);
    iter = 0;
    OutputStepToFile();
    tim+=dt*T_FOUT;
    if (fmod(tim,T_PRINT)<=0.0){cout << "\nt=" << tim << "ms";};
} while(tim<T_TOTAL); 
```

SolveSystem() 是以下（部分），它只是对某些变量进行计算的函数：

```
 void solveSystem()
      {

fsGCcGMPformation();        // !cGMP formation
falp1AdAct_IP3form();       // !Norepinephrine receptor
fIVoCC();                   // !Voltage dependent calcium current I_CaL
fIKv();                     // !Delayed rectifier current I_K
fIBKCa();                   // !Calcium-activated potassium 
    ...
    ...
    ...
fVoltageChange();
performODEstep();
} 
```

OutputStepToFile() 函数只是使用 C 风格的文件输出

```
 void OutputStepToFile()
   {
    fprintf(foutput1,"%g %g %g %g %g %g %g %g ",V_m, tim, Ca_i, Na_i, K_i, Cl_i, Ca_u, Ca_r);                                                       // 1
    fprintf(foutput1,"%g %g %g %g %g %g %g ",d_L, f_L, BKCa_a, KvD_a, KvD_i_slow, KvD_i_fast, KCNQ_a);      // 8
    fprintf(foutput1,"%g %g %g %g ",P_SOC, R_01, R_10, R_11);   // 15
    fprintf(foutput1,"%g %g %g %g %g %g %g %g %g\n", h_IP3, RS_G, RS_PG, G, IP3, PIP2, DAG, V_cGMP, cGMP);  // 22

    // Store Ca,K,Cl,Na ion channels
    fprintf(foutput2,"%g %g %g %g %g %g %g %g %g ", I_CaL,  I_CaT,  I_BKCa, I_KvD, I_KCNQ, I_K2P, I_Kir, I_KATP, I_CaCC);
    // Store ROCs/SOCs
    fprintf(foutput2,"%g %g %g %g %g %g %g ",   INa_NSC, IK_NSC, ICa_NSC, I_NSC, I_SOCNa, I_SOCCa, I_SOC);
    // store SR dynamic currents, co-transporters, pumps and exchangers
    fprintf(foutput2,"%g %g %g %g %g %g %g %g ",    I_up, I_tr, I_rel, I_IP3, I_PMCA, I_NaK, I_NCX, I_NaKCl_Cl);
    fprintf(foutput2,"%g %g %g %g %g %g\n",     I_stim, V_cGMPbar,  I_Catotm,   I_Natotm,   I_Cltotm,   I_Ktotm);
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T19:29:49.163

找出程序花费所有时间的唯一*可靠方法是对其进行**分析*。这将向您显示每个方法/功能所花费的时间，并且您应该能够追踪延迟。如果由于某种原因您不能使用分析器，您可以尝试在代码的关键阶段插入一些计时调用来隔离问题的位置。

也就是说，我的猜测是在您程序的 I/O 部分（`cout`，`printf`...）。计算应在两种架构上编译为类似的代码，除非您使用外部库，否则它们不应受到移植过程的影响。另一方面，I/O 调用可能会受到标准库的差异以及每个操作系统如何处理缓冲和 I/O 的影响。可以想象，可能还有一些库函数在 Windows 上没有很好地实现。

一条重要的信息是您的程序在这 160 多秒内的行为方式。它是在 100% 烧毁 CPU，还是在等待*某事*发生？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T19:15:58.263

由于某种原因，solveSystem() 内部调用的函数之一可能表现不同。我建议，您首先注释掉solveSystem() 中的所有函数。检查在 VC++ 上是否仍需要 160 多秒。依次启用solveSystem()中的函数。

# android - Multiple Fragments best practice

> ID：12124709
> 
> 赞同：3
> 
> 时间：2012-08-25T18:44:54.400
> 
> 标签：android, android-fragments

I've read [this](http://developer.android.com/guide/components/fragments.html) and [this](http://developer.android.com/guide/practices/tablets-and-handsets.html#Guidelines) about using Fragments.

There is an example for how to handle multiple Fragments on a tablet and handset with separate Activities for each Fragment (long story short):

With each item of ListFragment 'A', a new Activity for displaying Fragment 'B' is started.

What is the advantage of using separate Activities for each Fragment instead of using Transactions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T19:48:35.910

如果您想将您的应用程序移植到可能不使用片段的手机，因为屏幕太小而无法显示彼此相邻的 2 个片段 - 使用活动可以让您非常快速地移植它 - 只需为每个片段打开另一个屏幕同时显示片段

实际上，这就是您提供的第一个链接的“设计理念”部分的含义

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T23:48:42.473

I see none. If my app runs on tablet I put more fragments on the screen as there's room for this and I got just one activity in which I replace fragments when needed. When it is launched on the phone I got less fragments I still follow that pattern - I got single activity and replace fragments in it. I see benefits of that approaches vs using many activities like less flickering, have one logic for whole app.

# asp.net-web-api - ASP.NET Web API Custom PUT Method not working (returns 404)

> ID：12124712
> 
> 赞同：3
> 
> 时间：2012-08-25T18:45:15.947
> 
> 标签：asp.net-web-api

I am trying to create a custom PUT method in my API, following the instructions at [http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api).

My API:

```
public class AlarmStatusController : ApiController
{
    // Other methods here (removed for brevity)

    [HttpPut]
    public void ResetAlarmTimeout(long AlarmID)
    {
        // Do stuff (removed for brevity)
    }
} 
```

My call to the method:

```
$.ajax({
    type: "PUT",
    url: "/api/AlarmStatus/ResetAlarmTimeout",
    data: { AlarmID: alarmID },
    success: AlarmResetSuccess,
    error: AjaxError
}); 
```

My API route in public static void Register(HttpConfiguration config):

```
config.Routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{action}/{id}",
    defaults: new { action = RouteParameter.Optional, id = RouteParameter.Optional }
); 
```

The ajax call returns 404\. If I change the API method and ajax call to a GET, then it works, but this isn't RESTful since my GET method is modifying the object.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T19:30:32.997

你用的是VS2010吗？如果是这样，您可能正在使用 AFAIK 不支持的Cassini `PUT`（请参阅相关[的 Cassini 和 IISExpress PUT/DELETE Verbs cause 405 Http Code](https://stackoverflow.com/questions/6058027/cassini-and-iisexpress-put-delete-verbs-cause-405-http-code)）。IISExpress 与 VS2010 配合得很好，支持`PUT`和`DELETE`动词等，还有其他优点，所以我会考虑安装它并使用它。

# java - 如果在 JPA 的 persistence.xml 中设置了连接数据，如何检索 Hibernate 4 会话工厂？

> ID：12124714
> 
> 赞同：0
> 
> 时间：2012-08-25T18:45:25.687
> 
> 标签：java, hibernate, jpa, sessionfactory

如果数据库连接是在 JPA 中`persistence.xml`而不是在 中定义的，是否可以创建或检索 Hibernate 4 会话工厂`hibernate.cfg.xml`？如果是，如何？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-26T04:25:10.813

有很多这方面的信息，例如你可以使用这个：

```
org.hibernate.Session session = (Session)entityManager.getDelegate(); 
```

来源：

[来源](http://bill.burkecentral.com/2007/07/06/co-existence-with-hibernate-jpa-and-ejb3/)

# uitableview - Can't change values in destination view after segue

> ID：12124715
> 
> 赞同：0
> 
> 时间：2012-08-25T18:45:38.160
> 
> 标签：uitableview, segue

I have a simple master/detail tableview. In order to get my selection in the master to the detail view, I use the following code to set a label (lTest) in the detail view.

However, it seems that this code is run before/ on a different view, since it does not return an error, but the value of lTest is not changed (not visible on screen after the segue).

```
(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"showDetail"]) {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];        
        ViewController *Targetview = segue.destinationViewController;
        Targetview.lTest.text=[NSString stringWithFormat:@"Row %d",indexPath.item];
    }
} 
```

How can I change the label in the other view?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T19:18:42.947

您的新控制器在执行之前不会设置任何视图`viewDidLoad:`。给它一个字符串属性来保存您想要拥有的文本`lTest`并在 期间存储到该文本，然后在它具有其视图`prepareForSegue:`的文本中更新标签的文本。`ViewController`

# sql-server - 将表达式转换为数据类型日期时间（Int64 到日期时间）的算术溢出错误

> ID：12124716
> 
> 赞同：2
> 
> 时间：2012-08-25T18:45:38.407
> 
> 标签：sql-server, sql-server-2008-r2

试

`SELECT convert(datetime, 20120825142616 , 120) AS time`

遇到异常

*将表达式转换为数据类型日期时间的算术溢出错误。*

值“20120825142616”**的类型为“Int64** ”，作为参数传递给 .Net SqlCommand 对象。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T19:51:44.660

如果将数据放在单引号中，则不会出现算术流错误

```
SELECT convert(datetime, '20120825142616' , 120) AS [time] 
```

但你会得到一个错误：

`Conversion failed when converting date and/or time from character string.`

我认为格式不对。如果我只放置日期，它会起作用。像

```
SELECT convert(datetime, '20120825' , 120) AS [time]
-- output
2012-08-25 00:00:00.000 
```

如果我以这种格式放置日期，它可以工作

```
SELECT convert(datetime, '2012-08-25 14:26:16' , 120) AS [time]
-- output
2012-08-25 14:26:16.000 
```

# vhdl - optimizing VHDL code

> ID：12124717
> 
> 赞同：0
> 
> 时间：2012-08-25T18:46:04.257
> 
> 标签：vhdl

I have made this VHDL code for writing to a USB-chip.

It all runs inside a case statement, where each operation (write, read, ect.) is implemented.

The two write register sections below are equal, only different by the address and data.

Can this be simplified using a procedure or something?

```
 -------- WRITE REGISTER ---------
            when s10 =>
                -- Txd Cmd
                txdata(7 downto 6) <=  "10";        -- CMD = register write
                txdata(5 downto 0) <=  "000100";    -- address
                state := s11;
            when s11 => 
                -- write reg
                if nxt = '1' then
                    txdata <= X"45";    -- output on clock rising edge when nxt is high
                    stp <= '1';                     
                    state := s12;
                end if;
            when s12 =>
                stp <= '0';                             
                txdata <= "00000000";       -- idle                 
                state := s20;

            -------- WRITE REGISTER ---------
            when s20 =>
                -- Txd Cmd
                txdata(7 downto 6) <=  "10";        -- CMD = register write
                txdata(5 downto 0) <=  "110101";    -- address
                state := s21;
            when s21 => 
                -- write reg
                if nxt = '1' then
                    txdata <= X"04";                                            
                    stp <= '1';                     
                    state := s22;
                end if;
            when s22 =>
                stp <= '0';                             
                txdata <= "00000000";       -- idle                 
                state := s30; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:57:16.283

是的，使用程序。这不是你在这里问的吗？

[设计用于初始化的 VHDL 状态机](https://stackoverflow.com/questions/11937254/design-vhdl-state-machine-for-initialization)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:13:08.217

我建议您使用寄存器来存储地址和数据值。然后你要描述实际写的只有一个，其他的都只是寄存器内容的变化。这可以在你开始写作之前的状态下完成......

# performance - 缓存动态页面 - W3 Total Cache Plugin

> ID：12124722
> 
> 赞同：0
> 
> 时间：2012-08-25T18:46:21.820
> 
> 标签：performance, wordpress, caching, dynamic

我有一个 wordpress 网站，运行速度很慢。我想通过使用 w3 总缓存来加速它，但在我开始使用它之前我有几个问题。

我的网站是一个显示最新待售房屋的房地产列表网站。房地产数据每天更新。

理论上，我想缓存页面，以便它快速加载但仍加载最新（新鲜）的房地产数据。有没有办法缓存页面但让它获取最新的房地产列表？房地产列表通过简码显示。

我担心的是，如果我使用缓存来加速我的网站，它将显示旧列表。有没有办法设置 w3 总缓存（或任何其他缓存插件），以便我的动态房地产页面加载更快（即时）但仍获取最新的房地产数据。同样，房地产数据每天都会更新，我需要确保我的页面显示最新的结果，同时加载速度非常快。

我已经在房地产数据库上建立了索引并清理了我的代码，但搜索页面仍然运行得很慢。当我访问其他真实状态的站点时，它们的加载速度非常快。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T02:11:51.687

如果您担心用户看不到缓存页面的更新，您需要转到插件的浏览器缓存设置选项卡并将 HTML 的过期时间设置为 3600 秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T23:58:46.923

在插件中有一个部分，我可以排除某些页面。似乎工作正常。

# python - 使用 apache 导入 SWIG python 模块失败

> ID：12124726
> 
> 赞同：0
> 
> 时间：2012-08-25T18:47:00.963
> 
> 标签：python, django, apache, import, quantlib

当我使用 apache 运行时，导入 python mdule 会在 django 中引发异常。相同的源代码适用于 django 开发服务器。我也可以从命令行导入模块。该模块是一个 Python SWIG 库。我在网上研究过类似的问题，但没有任何帮助（正斜杠、设置 PYTHONPATH、权限检查......）。

我确实了解在帖子末尾的打印语句中，文件名中有双斜杠，但我的理解（我可能错了）是可以的。

以下是其中一个失败的 3 种情况：

从命令行我可以执行以下命令，它工作正常：

```
import QuantLib 
```

使用 django 开发服务器，我可以在我的视图中运行以下代码而没有错误：

```
from django.http import HttpResponse  
import sys  
import QuantLib  
def home(request):
    return HttpResponse("This is a test.") 
```

现在，如果我使用以下脚本移至 apache，使用与上述相同的视图会出现以下错误。该文件是 django_wsgi：

```
import os, sys
os.environ['DJANGO_SETTINGS_MODULE'] = 'tgVAR.settings'
import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

****** *** **** *浏览器错误**

 **```
ImportError at /  
DLL load failed: The specified module could not be found.  
Request Method:     GET  
Request URL:    (here is the url)
Django Version:     1.4  
Exception Type:     ImportError  
Exception Value:    DLL load failed: The specified module could not be found.  

Exception Location:     D:\Program Files (x86)\Python27\lib\site-packages\QuantLib\QuantLib.py in swig_import_helper, line 29  
Python Executable:  D:\Program Files (x86)\Apache Software Foundation\Apache2.2\bin\httpd.exe  
Python Version:     2.7.2  
Python Path:    

['D:\\Program Files (x86)\\Python27\\lib\\site-packages\\setuptools-0.6c11-py2.7.egg',
 'C:\\Windows\\system32\\python27.zip',
 'D:\\Program Files (x86)\\Python27\\Lib',
 'D:\\Program Files (x86)\\Python27\\DLLs',
 'D:\\Program Files (x86)\\Python27\\Lib\\lib-tk',
 'D:\\Program Files (x86)\\Apache Software Foundation\\Apache2.2',
 'D:\\Program Files (x86)\\Apache Software Foundation\\Apache2.2\\bin',
 'D:\\Program Files (x86)\\Python27',
 'D:\\Program Files (x86)\\Python27\\lib\\site-packages',
 'D:\\Program Files (x86)\\Python27\\Lib\\site-packages\\QuantLib',
 'D:\\Program Files (x86)\\Django-1.4',
 'D:\\Home',
 'D:\\Home\\tgVAR',
 'c:/Home/test1/test1']

Server time:    Sat, 25 Aug 2012 14:02:27 -0400 
```

****** *** ***** * swig_import_helper 中 D:\Program Files (x86)\Python27\lib\site-packages\QuantLib\QuantLib.py 失败的源代码：**

 **```
from sys import version_info  
if version_info >= (2,6,0):  
    def swig_import_helper():  
        from os.path import dirname  
        import imp  
        fp = None  
        try:
            fp, pathname, description = imp.find_module('_QuantLib', [dirname(__file__)])
        except ImportError:
            import _QuantLib
            return _QuantLib
        if fp is not None:
            try:    
                #TG start
                print '***********TG***************'
                print fp
                print pathname
                print description
                print '****************************'
            #TG end
                _mod = imp.load_module('_QuantLib', fp, pathname, description)
            finally:
                fp.close()
            return _mod
    _QuantLib = swig_import_helper()
    del swig_import_helper
else:
    import _QuantLib
del version_info 
```

****** *** ** *** ***** *当异常抛出时，Apache 中的本地变量：**

 **```
Variable    Value  
fp  <closed file 'D:\Program Files (x86)\Python27\lib\site-packages\QuantLib\_QuantLib.pyd', mode 'rb' at 0x0429C5A0>  
imp <module 'imp' (built-in)>  
dirname <function dirname at 0x018F29B0>  
pathname    'D:\\Program Files (x86)\\Python27\\lib\\site-packages\\QuantLib\\_QuantLib.pyd'  
description ('.pyd', 'rb', 3) 
```

****** *** ** *** ***** *使用 APACHE 运行时源代码中打印语句的输出**

 **```
[Sat Aug 25 14:02:26 2012] [error] ***********TG***************  
[Sat Aug 25 14:02:26 2012] [error] <open file 'D:\\Program Files (x86)\\Python27\\lib\\site-packages\\QuantLib\\_QuantLib.pyd', mode 'rb' at 0x0429C5A0>  
[Sat Aug 25 14:02:26 2012] [error] D:\\Program Files (x86)\\Python27\\lib\\site-packages\\QuantLib\\_QuantLib.pyd  
[Sat Aug 25 14:02:26 2012] [error] ('.pyd', 'rb', 3)  
[Sat Aug 25 14:02:26 2012] [error] **************************** 
```

****** *** ** *** ***** *从 Python 交互式解释器导入时，源代码中的打印语句的输出**

 **```
***********TG***************  
<open file 'D:\Program Files (x86)\Python27\Lib\site-packages\QuantLib\_QuantLib.pyd', mode 'rb' at 0x02879CD8>  
D:\Program Files (x86)\Python27\Lib\site-packages\QuantLib\_QuantLib.pyd  
('.pyd', 'rb', 3)  
**************************** 
```

****** *** ** *** ***** *运行 DJANGO 开发服务器时源代码中打印语句的输出**

 **```
***********TG***************  
<open file 'D:\Program Files (x86)\Python27\Lib\site-packages\QuantLib\_QuantLib.pyd', mode 'rb' at 0x0312AAC8>  
D:\Program Files (x86)\Python27\Lib\site-packages\QuantLib\_QuantLib.pyd  
('.pyd', 'rb', 3)  
**************************** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:16:48.617

Like all SWIG-generated modules, QuantLib is not a pure Python module but depends on an underlying C++ shared library (it should be called libQuantLib.so). This must be loadable by Apache; so make sure, for instance, that it's in the PATH, that ld has cached it, or that it has the needed permissions.************

# java - 在 JSF 2.0 中检索其他组件的客户端 ID

> ID：12124727
> 
> 赞同：19
> 
> 时间：2012-08-25T18:47:07.040
> 
> 标签：java, jsf, primefaces, richfaces, clientid

JSF 2.0 是否有用于查找另一个组件的客户端 ID 的内置方法？SO上有大约一千个与客户端ID相关的问题，并且有很多hackish方法可以做到这一点，但我想知道JSF 2.0是否带来了一种我不知道的更简单的方法。

`#{component.clientId}`评估为给定组件自己的客户端 ID，但我想引用另一个组件的 ID。

[这篇](http://illegalargumentexception.blogspot.com/2009/10/jsf-working-with-component-identifiers.html#clientidjsf2_0)博文提到`component.clientId`，它也说`#{someComponent.clientId}`有效，但据我所知，它没有。我相信他是在 JSF 2.0 的任何参考实现出现之前写的，所以他只是通过 JSR，也许功能发生了变化。我不知道。

我知道 PrimeFaces 和 RichFaces 都有自己的函数来返回客户端 ID，但我只是想知道是否有内置的 JSF 2.0 方法来解决这个问题。这里有些例子：

**这可以返回 outputText 的 ID。**

```
`<h:outputText value="My client ID : #{component.clientId}" />` 
```

**根据上面的博客文章，这应该有效，但事实并非如此。我只是没有输出。**

```
`<h:button id="sampleButton" value="Sample" />`

`<h:outputText value="sampleButton's client ID : #{sampleButton.clientId}" />` 
```

**这适用于 PrimeFaces：**

```
`<h:outputText value="PrimeFaces : sampleButton's client ID : #{p:component('sampleButton')}" />` 
```

**在 RichFaces 中工作：**

```
`<h:outputText value="RichFaces : sampleButton's client ID : #{rich:clientId('sampleButton')}" />` 
```

此外，如果可能的话，我正在寻找在更改`javax.faces.SEPARATOR_CHAR`值或在引用组件之外添加/删除容器时不会中断的解决方案。我花了很多时间来追踪由硬编码 ID 路径引起的问题。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-26T01:32:48.093

您需要通过`binding`属性在视图范围内为组件分配一个变量名称。

```
<h:button id="sampleButton" binding="#{sampleButton}" value="Sample" />
<h:outputText value="sampleButton's client ID : #{sampleButton.clientId}" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-14T18:04:54.737

这对我有用。我很想知道写这样的回复是否可以。

客户端.html

```
<h:outputText value="#{UIHelper.clientId('look-up-address-panel-id')}" /> 
```

UIHelper.java

```
@ManagedBean(name = "UIHelper", eager = true)
@ApplicationScoped
public class UIHelper
{

public String clientId(final String id)
{
  FacesContext context = FacesContext.getCurrentInstance();
  UIViewRoot root = context.getViewRoot();
  final UIComponent[] found = new UIComponent[1];
  root.visitTree(new FullVisitContext(context), new VisitCallback()
  {
    @Override
    public VisitResult visit(VisitContext context, UIComponent component)
    {
      if (component.getId().equals(id))
      {
        found[0] = component;
        return VisitResult.COMPLETE;
      }
      return VisitResult.ACCEPT;
    }
  });
  return found[0] == null ? "" : "#" + found[0].getClientId().replace(":", "\\\\:");
}

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-22T12:54:01.800

因为这是我的谷歌搜索的第一个结果之一，我想知道为什么我得到了一个

> javax.el.PropertyNotFoundException（找不到属性“itemId”[...]）

在尝试接受的解决方案时，我想分享我的 JSF 1.2 解决方案：

的`UIComponent`方法`getClientId`需要一个`FacesContext`参数（参见[UIComponent 文档](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/1.2_MR1/docs/api/javax/faces/component/UIComponent.html#getClientId%28javax.faces.context.FacesContext%29)）。因此，添加一个绑定到支持 bean 以及另一个返回 clientId 的方法：

xhtml:

```
<h:button id="sampleButton" binding="#{backingBean.sampleButton}" value="Sample" />
<h:outputText value="sampleButton's client ID : #{backingBean.sampleButtonClientId}" /> 
```

豆：

```
private UIComponent sampleButton;

public UIComponent getSampleButton() {
    return sampleButton;
}

public void setSampleButton(final UIComponent sampleButton) {
    this.sampleButton = sampleButton;
}

public String getSampleButtonClientId() {
    final FacesContext context = FacesContext.getCurrentInstance();
    return sampleButton.getClientId(context);
} 
```

请注意，您将组件绑定到的 bean 应该是请求范围的，否则您最终可能会得到一个`java.lang.IllegalStateException (duplicate Id for a component)`（与[本主题](https://stackoverflow.com/a/12355511)相比）。

# json - JSON哲学

> ID：12124729
> 
> 赞同：3
> 
> 时间：2012-08-25T18:47:12.290
> 
> 标签：json, mongodb

我爱上了 JSON 并且痴迷于 JSON。我正在使用 node.js 和 mongodb，我在两种不同的哲学之间左右为难。

1

```
{
    "app":{
        "keys":{
            "facebook":{
                "apikey":"1412v5l1v5jv5j1h2v5",
                "sharedsecret":"v5j12hv51hc4v123vmnv",
            },
            "twitter":{
                "apikey":"3241bly5vlv1l2hjv51",
                "sharedsecret":"gxdz1n25f1m235xm1235",
            }
        }
    }
} 
```

2

```
{
    "app":{
        "keys":{
            "facebook_apikey":"1412v5l1v5jv5j1h2v5",
            "facebook_sharedsecret":"v5j12hv51hc4v123vmnv",
            "twitter_apikey":"3241bly5vlv1l2hjv51",
            "twitter_sharedsecret":"gxdz1n25f1m235xm1235",
        }
    }
} 
```

3个甚至

```
{
    "app":{
        "facebook_apikey":"1412v5l1v5jv5j1h2v5",
        "facebook_sharedsecret":"v5j12hv51hc4v123vmnv",
        "twitter_apikey":"3241bly5vlv1l2hjv51",
        "twitter_sharedsecret":"gxdz1n25f1m235xm1235",
    }
} 
```

使数据更加复杂

```
{
    "app":{
        "keys":{
            "facebook":{
                "production":{
                    "apikey":"1412v5l1v5jv5j1h2v5",
                    "sharedsecret":"v5j12hv51hc4v123vmnv",                  
                },
                "development":{
                    "apikey":"1412v5l1v5jv5j1h2v5",
                    "sharedsecret":"v5j12hv51hc4v123vmnv",                  
                },
            },
            "twitter":{
                "production":{
                    "apikey":"1412v5l1v5jv5j1h2v5",
                    "sharedsecret":"v5j12hv51hc4v123vmnv",                  
                },
                "development":{
                    "apikey":"1412v5l1v5jv5j1h2v5",
                    "sharedsecret":"v5j12hv51hc4v123vmnv",                  
                },
            }
        }
    }
} 
```

或者

```
{
    "app":{
        "keys":{
            "production":{
                "facebook":{
                    "apikey":"1412v5l1v5jv5j1h2v5",
                    "sharedsecret":"v5j12hv51hc4v123vmnv",
                },
                "twitter":{
                    "apikey":"1412v5l1v5jv5j1h2v5",
                    "sharedsecret":"v5j12hv51hc4v123vmnv",
                },
            },
            "development":{
                "facebook":{
                    "apikey":"1412v5l1v5jv5j1h2v5",
                    "sharedsecret":"v5j12hv51hc4v123vmnv",
                },
                "twitter":{
                    "apikey":"1412v5l1v5jv5j1h2v5",
                    "sharedsecret":"v5j12hv51hc4v123vmnv",
                },
            },
        }
    }
} 
```

你应该去多深？有没有太远或太远的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T22:17:38.247

我会使用以下内容，实际上确实使用了与以下内容非常相似的内容：

```
{
    "app":{
        "production":{
            "facebook":{
                "apikey":"1412v5l1v5jv5j1h2v5",
                "sharedsecret":"v5j12hv51hc4v123vmnv",
            },
            "twitter":{
                "apikey":"1412v5l1v5jv5j1h2v5",
                "sharedsecret":"v5j12hv51hc4v123vmnv",
            },
        },
        "development":{
            "facebook":{
                "apikey":"1412v5l1v5jv5j1h2v5",
                "sharedsecret":"v5j12hv51hc4v123vmnv",
            },
            "twitter":{
                "apikey":"1412v5l1v5jv5j1h2v5",
                "sharedsecret":"v5j12hv51hc4v123vmnv",
            },
        }
    }
} 
```

当我设计一个系统时，我希望创建处理多种不同情况的通用代码。这通常意味着在设计中创建一致性。

以上允许您创建一个查找“应用程序”的例程，然后选择一个操作环境，“生产”或“开发”。然后可以将其交给另一个功能，并要求找到您关心的特定服务，无论是“facebook”、“twitter”，还是像“foursquare”这样的新服务。然后，单个 oAuth 函数集可以处理授权过程，无论传入的对象是什么，因为它将始终能够请求“apikey”和“sharesecret”，而不管正在使用哪个服务。

谈到 Mongo 甚至 Javascript 的灵活性……我喜欢这种灵活性。它使我们能够有效地解决在其他工具集中更困难的问题。但是，如果您要获得代码效率和易于调试，则需要尽可能多地保持一致性来调整这种灵活性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T18:53:46.420

嗯，这取决于。

从语义上看，如果您希望将更多应用程序添加到该列表中，＃1 更正确。如果应用列表是固定的（即总是有两个），那么可以考虑# *2*。但一般来说，你总是使用#1，因为它更干净。

以上对于 XML 来说是正确的。由于 JSON 主要与*序列化*有关，因此您选择*最容易使用*的一种。您将处理数据，并且您最清楚是否有深度嵌套结构的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T18:56:50.040

从我的角度来看，您面临着与所有开发人员类似的困境，他们尝试设计类设计/XML 设计/SQL 模式设计：)

根据我的经验，您基本上应该分组：

*   什么对你有意义
*   什么是合乎逻辑的
*   并且易于扩展和维护。

您还应该记住的是：

*   您如何访问/处理数据以及其背后的行为是什么。

我喜欢把事情结构化，对我来说是有意义的，所以我最有可能采用第一种方法。然而我的经验是，我使用数据的次数越多，我就越能看到优化其结构的方法。所以我会尽量让它为以后的重构做好准备。:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T19:05:40.887

这可能看起来很奇怪，但重点是 MongoDB，它允许您这样做：

```
{
    "app":{
            "facebook":{
                "keys" : {
                    "apikey":"1412v5l1v5jv5j1h2v5",
                    "sharedsecret":"v5j12hv51hc4v123vmnv",
                }
            },
            "twitter":{
                "keys" : {
                    "apikey":"3241bly5vlv1l2hjv51",
                    "sharedsecret":"gxdz1n25f1m235xm1235",
                }
            }
        }
    }
} 
```

为什么？

嗯，答案就是 NoSQL 数据库出现的原因：你不确定数据结构。考虑添加，例如`routes`字段`"facebook"`：

```
 "facebook":{
                "keys" : {
                    "apikey":"1412v5l1v5jv5j1h2v5",
                    "sharedsecret":"v5j12hv51hc4v123vmnv",
                },
                "routes" : {
                     "mainroute" : "00.00.server.xx1",
                     "subroute" : "00.01.server.yy2",
                }
            }, 
```

并且该信息与推特无关，`twitter`因为 twitter 不支持假设的`routes`功能。

如果您拥有#1 中建议的集合，会发生什么？

```
{
    "app":{
        "keys":{
            "facebook":{
                "apikey":"1412v5l1v5jv5j1h2v5",
                "sharedsecret":"v5j12hv51hc4v123vmnv",
            },
            "twitter":{
                "apikey":"3241bly5vlv1l2hjv51",
                "sharedsecret":"gxdz1n25f1m235xm1235",
            }
        },

        "routes" : {
            "facebook" :    {
                "mainroute" : "00.00.server.xx1",
                "subroute" : "00.01.server.yy2",
             }
        }
    }
} 
```

看起来有点多余，不是吗？

# windows-7 - 如何在 Windows 7 64 位中安装 behat 和 mink 驱动程序？

> ID：12124730
> 
> 赞同：0
> 
> 时间：2012-08-25T18:47:17.173
> 
> 标签：windows-7, windows-7-x64, behat, mink

我正在尝试使用[http://mink.behat.org/](http://mink.behat.org/)上的说明设置 mink 以使用 behat 。正如您将看到的，大约 2 个屏幕下方告诉我们 mink 已安装但没有驱动程序。我认为这意味着它不能与任何东西交谈。

然后它为新手提供了一个 composer.json 文件。我试过了，当我跑的时候

```
php composer.phar install 
```

这就是我得到的。

```
D:\Projects\TestCoachmaster>php composer.phar update
Loading composer repositories with package information
Updating dependencies
Your requirements could not be resolved to an installable set of packages.

  Problem 1
    - Installation request for behat/mink-zombie-driver * -> satisfiable by behat/mink-zombie-driver v1.0.0.
    - behat/mink-zombie-driver v1.0.0 requires symfony/process >=2.1.0,<2.2.0-dev -> no matching package found
.
  Problem 2
    - behat/mink-goutte-driver v1.0.0 requires fabpot/goutte 1.0.* -> no matching package found.
    - behat/mink-goutte-driver v1.0.3 requires fabpot/goutte @dev -> no matching package found.
    - behat/mink-goutte-driver v1.0.2 requires fabpot/goutte 1.0.*@dev -> no matching package found.
    - behat/mink-goutte-driver v1.0.1 requires fabpot/goutte 1.0.x-dev -> no matching package found.
    - Installation request for behat/mink-goutte-driver * -> satisfiable by behat/mink-goutte-driver v1.0.1, b
ehat/mink-goutte-driver v1.0.2, behat/mink-goutte-driver v1.0.3, behat/mink-goutte-driver v1.0.0.

Potential causes:
 - A typo in the package name
 - The package is not available in a stable-enough version according to your minimum-stability setting 
   see https://groups.google.com/d/topic/composer-dev/_g3ASeIFlrc/discussion for more details.

D:\Projects\TestCoachmaster> 
```

我曾尝试将最低稳定性调整为 dev，但这并没有帮助。

我在 Windows 7、64 位下运行 - 我必须做很多调整才能安装 bhat 和 mink。我确实认为他们有 - 它的驱动器没有。

感激地收到帮助。伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:20:33.593

I went through this same problem a few days ago. This is a minimum stability issue. I don´t know how you tried to set the minimum stability, but what you should do is:

composer.json:

```
{
    "require": {
        "behat/mink-goutte-driver": "*",
        "behat/mink-selenium-driver": "*",
        "behat/mink-selenium2-driver": "*",
        "behat/mink-sahi-driver": "*",
        "behat/mink-zombie-driver": "*"
    },
    "minimum-stability": "dev" 
} 
```

This should work, I tried it right now. Notice that I removed the reference to behat/mink as this produced another error and it should be automatically found as a dependence of these drivers

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T17:24:26.830

在 Windows 上安装 behat 的分步指南：[openguider.wordpress.com](http://openguider.wordpress.com/2013/08/01/how-to-install-behat-on-windows/)

# iphone - NSFetchedResultsController 和 executeFetchRequest 之间是否应该存在 UITableView 性能差异？

> ID：12124734
> 
> 赞同：0
> 
> 时间：2012-08-25T18:48:09.917
> 
> 标签：iphone, ios, uitableview, core-data, datasource

我有一个 iPad 应用程序，它由 Core Date 支持并在 UITableView 中显示数据。我还使用自定义单元格来显示每个单元格的多个 ULabel。

它工作得很好，但是当很多项目被添加到 tableView 时，它会陷入困境并且感觉有点迟钝。我目前没有使用 NSFetchedResultsController。每当对数据进行更改时，都会像这样刷新 ivar 数组的数据：

```
items = [self.managedObjectContext executeFetchRequest:allItems error:&error]; 
```

Items 是 tableView 从中提取所有数据的数组，所有内容都会更新和工作。但是速度不是特别快！我的方法有问题吗？NSFetchedResultsController 是唯一的出路吗？委托/数据源方法中正在进行的处理并不那么繁重。基本上从数组中提取值并将它们设置为 UILabels。

一切都按照我现在需要的方式进行，我只需要它更具响应性。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T19:47:11.817

使用仪器。总是。永远。

最有可能的是，您至少需要模仿 FRC 所做的一些批处理和前瞻性思考。但是，您可能会发现您总是在访问关系，并且预取它们可能会解决您的问题。

一切都是纯粹的推测，没有硬的、冷的、数字……你可以从 Instruments 轻松获得。

**编辑**

单元格绘图可能会减慢您的速度。但是，这对于较少数量的对象也是可以观察到的。如果您的数据与其他单元格有显着差异，您通常只会看到由于绘图而导致性能下降。

现在，当然，假设您正在使用单元重用。如果你不重复使用你的细胞，那么所有的赌注都没有了。但是，使用单元重用时，您通常不会看到与对象数量相关的性能。

再次，**运行仪器**。这是了解您的问题所在的**唯一方法。**其他一切都是浪费时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T19:48:23.340

`NSFetchedResultsController`绝对强烈推荐。它不仅可以潜在地解决您的性能问题，还可以带来各种便利的设施（例如委托协议）和幕后优化。

这些优化中最重要的可能是*内存管理*。您的解决方案（包含数组中的所有项目）似乎是一个糟糕的设计选择，并且*不会*扩展到大量记录/行。

话虽如此，在绘制单元格时使用通常的优化策略：

*   尽量减少标签和其他子视图的使用；
*   不要使用透明背景；
*   不要使用 1.0 以外的 alpha；
*   单元格中没有子视图重叠等。

如果性能仍然是一个问题，您将不得不通过覆盖子类来自己绘制`drawRect`内容`UITableViewCell`。

# c++ - Visual C++ 库目录命令行等效项

> ID：12124739
> 
> 赞同：15
> 
> 时间：2012-08-25T18:48:48.543
> 
> 标签：c++, command-line, compilation, linker

要使用一些重新编译的库（例如 boost chrono），我需要在 Visual Studio 中的属性 -> VC++ 目录 -> 库目录中指定库文件夹。我怎样才能使用命令行实现这一点？我一直在使用 /LIBPATH，但出现链接器错误 (LNK1104)。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-25T19:07:35.550

您需要指定`/link <linkoptions>`cl.exe 命令行以将所需的设置传递给链接器：

`cl -I "path\to\Boost" test.cpp /link /LIBPATH:"C:\path\to\Boost\stage\lib"`

# android - 不幸的是，应用程序在模拟器中运行时已停止

> ID：12124740
> 
> 赞同：0
> 
> 时间：2012-08-25T18:49:14.207
> 
> 标签：android, eclipse, nullpointerexception

我是 android devlopment 的绝对初学者，我想制作一个相机开/关应用程序，但我得到了错误。所以请帮助我。

```
package com.vikram.flashcamera;

import android.app.Activity;
import android.content.Context;
import android.content.pm.PackageManager;
import android.hardware.Camera;
import android.hardware.Camera.Parameters;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends Activity {
    private boolean isLighOn = false;
    private Camera camera;
    private Button button;

    @Override
    protected void onStop() {
        super.onStop();

        if(camera != null) {
            camera.release();
        }
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        button = (Button) findViewById(R.id.buttonClick);

        Context context = this;
        PackageManager pm = context.getPackageManager();

        if(!pm.hasSystemFeature(PackageManager.FEATURE_CAMERA)) {
            Log.e("err", "Device has no camera!");
            return;
        }

        camera = Camera.open();
        final Parameters p = camera.getParameters();

        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                if(isLighOn) {
                    Log.i("info", "torch is turn off!");
                    p.setFlashMode(Parameters.FLASH_MODE_OFF);
                    camera.setParameters(p);
                    camera.stopPreview();
                    isLighOn = false;
                }
                else {
                   Log.i("info", "torch is turn on!");
                    p.setFlashMode(Parameters.FLASH_MODE_TORCH);

                    camera.setParameters(p);
                    camera.startPreview();
                    isLighOn = true;
                }
            }
        });
    }
} 
```

下面给出了我的 logCat 错误。

```
 08-25 15:50:41.932: E/Trace(878): error opening trace file: No such file or directory (2)
    08- 5 15:50:42.453: D/AndroidRuntime(878): Shutting down VM
    08-25 15:50:42.463: W/dalvikvm(878): threadid=1: thread exiting with uncaught exception     (group=0x40a13300)
    08-25 15:50:42.473: E/AndroidRuntime(878): FATAL EXCEPTION: main
    08-25 15:50:42.473: E/AndroidRuntime(878): java.lang.RuntimeException: Unable to start     activity         ComponentInfo{com.vikram.flashcamera/com.vikram.flashcamera.MainActivity}:     java.lang.NullPointerException
    08-25 15:50:42.473: E/AndroidRuntime(878):  at     android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
    08-25 15:50:42.473: E/AndroidRuntime(878):  at     android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
08-25 15:50:42.473: E/AndroidRuntime(878):  at         android.app.ActivityThread.access$600(ActivityThread.java:130)
08-25 15:50:42.473: E/AndroidRuntime(878):  at         android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
    08-25 15:50:42.473: E/AndroidRuntime(878):  at android.os.Handler.dispatchMessage(Handler.java:99)
    08-25 15:50:42.473: E/AndroidRuntime(878):  at android.os.Looper.loop(Looper.java:137)
    08-25 15:50:42.473: E/AndroidRuntime(878):  at android.app.ActivityThread.main(ActivityThread.java:4745)
    08-25 15:50:42.473: E/AndroidRuntime(878):  at java.lang.reflect.Method.invokeNative(Native Method)
    08-25 15:50:42.473: E/AndroidRuntime(878):  at java.lang.reflect.Method.invoke(Method.java:511)
    08-25 15:50:42.473: E/AndroidRuntime(878):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
    08-25 15:50:42.473: E/AndroidRuntime(878):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
    08-25 15:50:42.473: E/AndroidRuntime(878):  at dalvik.system.NativeStart.main(Native Method)
    08-25 15:50:42.473: E/AndroidRuntime(878): Caused by: java.lang.NullPointerException
    08-25 15:50:42.473: E/AndroidRuntime(878):  at com.vikram.flashcamera.MainActivity.onCreate(MainActivity.java:44)
    08-25 15:50:42.473: E/AndroidRuntime(878):  at android.app.Activity.performCreate(Activity.java:5008)
    08-25 15:50:42.473: E/AndroidRuntime(878):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
    08-25 15:50:42.473: E/AndroidRuntime(878):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
    08-25 15:50:42.473: E/AndroidRuntime(878):  ... 11 more
    08-25 18:03:08.543: E/Trace(900): error opening trace file: No such file or directory (2)
    08-25 18:03:09.122: D/AndroidRuntime(900): Shutting down VM
    08-25 18:03:09.122: W/dalvikvm(900): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
    08-25 18:03:09.132: E/AndroidRuntime(900): FATAL EXCEPTION: main
    08-25 18:03:09.132: E/AndroidRuntime(900): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.vikram.flashcamera/com.vikram.flashcamera.MainActivity}:     java.lang.NullPointerException
    08-25 18:03:09.132: E/AndroidRuntime(900):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
    08-25 18:03:09.132: E/AndroidRuntime(900):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
    08-25 18:03:09.132: E/AndroidRuntime(900):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
    08-25 18:03:09.132: E/AndroidRuntime(900):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
    08-25 18:03:09.132: E/AndroidRuntime(900):  at android.os.Handler.dispatchMessage(Handler.java:99)
    08-25 18:03:09.132: E/AndroidRuntime(900):  at android.os.Looper.loop(Looper.java:137)
    08-25 18:03:09.132: E/AndroidRuntime(900):  at android.app.ActivityThread.main(ActivityThread.java:4745)
    08-25 18:03:09.132: E/AndroidRuntime(900):  at java.lang.reflect.Method.invokeNative(Native Method)
    08-25 18:03:09.132: E/AndroidRuntime(900):  at java.lang.reflect.Method.invoke(Method.java:511)
    08-25 18:03:09.132: E/AndroidRuntime(900):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
    08-25 18:03:09.132: E/AndroidRuntime(900):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
    08-25 18:03:09.132: E/AndroidRuntime(900):  at dalvik.system.NativeStart.main(Native Method)
    08-25 18:03:09.132: E/AndroidRuntime(900): Caused by: java.lang.NullPointerException
    08-25 18:03:09.132: E/AndroidRuntime(900):  at com.vikram.flashcamera.MainActivity.onCreate(MainActivity.java:44)
    08-25 18:03:09.132: E/AndroidRuntime(900):  at android.app.Activity.performCreate(Activity.java:5008)
    08-25 18:03:09.132: E/AndroidRuntime(900):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
    08-25 18:03:09.132: E/AndroidRuntime(900):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
    08-25 18:03:09.132: E/AndroidRuntime(900):  ... 11 more
    08-25 18:03:11.613: I/Process(900): Sending signal. PID: 900 SIG: 9
    08-25 18:33:52.222: E/Trace(929): error opening trace file: No such file or directory    (2)
    08-25 18:33:52.813: D/AndroidRuntime(929): Shutting down VM
    08-25 18:33:52.813: W/dalvikvm(929): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
    08-25 18:33:52.833: E/AndroidRuntime(929): FATAL EXCEPTION: main
    08-25 18:33:52.833: E/AndroidRuntime(929): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.vikram.flashcamera/com.vikram.flashcamera.MainActivity}: java.lang.NullPointerException
    08-25 18:33:52.833: E/AndroidRuntime(929):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
    08-25 18:33:52.833: E/AndroidRuntime(929):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
    08-25 18:33:52.833: E/AndroidRuntime(929):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
    08-25 18:33:52.833: E/AndroidRuntime(929):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
    08-25 18:33:52.833: E/AndroidRuntime(929):  at android.os.Handler.dispatchMessage(Handler.java:99)
    08-25 18:33:52.833: E/AndroidRuntime(929):  at android.os.Looper.loop(Looper.java:137)
    08-25 18:33:52.833: E/AndroidRuntime(929):  at android.app.ActivityThread.main(ActivityThread.java:4745)
    08-25 18:33:52.833: E/AndroidRuntime(929):  at java.lang.reflect.Method.invokeNative(Native Method)
    08-25 18:33:52.833: E/AndroidRuntime(929):  at java.lang.reflect.Method.invoke(Method.java:511)
    08-25 18:33:52.833: E/AndroidRuntime(929):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
    08-25 18:33:52.833: E/AndroidRuntime(929):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
    08-25 18:33:52.833: E/AndroidRuntime(929):  at dalvik.system.NativeStart.main(Native Method)
    08-25 18:33:52.833: E/AndroidRuntime(929): Caused by: java.lang.NullPointerException
    08-25 18:33:52.833: E/AndroidRuntime(929):  at com.vikram.flashcamera.MainActivity.onCreate(MainActivity.java:44)
    08-25 18:33:52.833: E/AndroidRuntime(929):  at android.app.Activity.performCreate(Activity.java:5008)
    08-25 18:33:52.833: E/AndroidRuntime(929):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
    08-25 18:33:52.833: E/AndroidRuntime(929):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
    08-25 18:33:52.833: E/AndroidRuntime(929):  ... 11 more
    08-25 18:38:52.904: I/Process(929): Sending signal. PID: 929 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T00:54:38.507

由于您的 AVD 没有得到相机，我认为这可能会对您有所帮助： [在 AVD 中启用相机](http://viralpatel.net/blogs/enable-camera-in-android-emulator/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T19:01:53.787

您的错误跟踪显示异常发生在您的`Activity`. 从您发布的代码行数来看，这似乎在`Camera.open()`. 根据文档，`null`如果设备没有后置摄像头，则会返回。如果它在模拟器上，这可能是有道理的。

# jquery - 使用 jQuery DataTables 时禁用第一列的自动排序

> ID：12124746
> 
> 赞同：89
> 
> 时间：2012-08-25T18:50:26.003
> 
> 标签：jquery, sorting, datatables

我正在使用 jQuery DataTables，我想知道是否可以禁用表格第一列的自动排序？

我的代码如下所示：

```
 /* Default class modification */
        $.extend( $.fn.dataTableExt.oStdClasses, {
            "sWrapper": "dataTables_wrapper form-inline"
        } );

        /* API method to get paging information */
        $.fn.dataTableExt.oApi.fnPagingInfo = function ( oSettings )
        {
            return {
                "iStart":         oSettings._iDisplayStart,
                "iEnd":           oSettings.fnDisplayEnd(),
                "iLength":        oSettings._iDisplayLength,
                "iTotal":         oSettings.fnRecordsTotal(),
                "iFilteredTotal": oSettings.fnRecordsDisplay(),
                "iPage":          Math.ceil( oSettings._iDisplayStart / oSettings._iDisplayLength ),
                "iTotalPages":    Math.ceil( oSettings.fnRecordsDisplay() / oSettings._iDisplayLength )
            };
        }

        /* Bootstrap style pagination control */
        $.extend( $.fn.dataTableExt.oPagination, {
            "bootstrap": {
                "fnInit": function( oSettings, nPaging, fnDraw ) {
                    var oLang = oSettings.oLanguage.oPaginate;
                    var fnClickHandler = function ( e ) {
                        e.preventDefault();
                        if ( oSettings.oApi._fnPageChange(oSettings, e.data.action) ) {
                            fnDraw( oSettings );
                        }
                    };

                    $(nPaging).addClass('pagination').append(
                        '<ul>'+
                            '<li class="prev disabled"><a href="#">&larr; '+oLang.sPrevious+'</a></li>'+
                            '<li class="next disabled"><a href="#">'+oLang.sNext+' &rarr; </a></li>'+
                        '</ul>'
                    );
                    var els = $('a', nPaging);
                    $(els[0]).bind( 'click.DT', { action: "previous" }, fnClickHandler );
                    $(els[1]).bind( 'click.DT', { action: "next" }, fnClickHandler );
                },

                "fnUpdate": function ( oSettings, fnDraw ) {
                    var iListLength = 5;
                    var oPaging = oSettings.oInstance.fnPagingInfo();
                    var an = oSettings.aanFeatures.p;
                    var i, j, sClass, iStart, iEnd, iHalf=Math.floor(iListLength/2);

                    if ( oPaging.iTotalPages < iListLength) {
                        iStart = 1;
                        iEnd = oPaging.iTotalPages;
                    }
                    else if ( oPaging.iPage <= iHalf ) {
                        iStart = 1;
                        iEnd = iListLength;
                    } else if ( oPaging.iPage >= (oPaging.iTotalPages-iHalf) ) {
                        iStart = oPaging.iTotalPages - iListLength + 1;
                        iEnd = oPaging.iTotalPages;
                    } else {
                        iStart = oPaging.iPage - iHalf + 1;
                        iEnd = iStart + iListLength - 1;
                    }

                    for ( i=0, iLen=an.length ; i<iLen ; i++ ) {
                        // Remove the middle elements
                        $('li:gt(0)', an[i]).filter(':not(:last)').remove();

                        // Add the new list items and their event handlers
                        for ( j=iStart ; j<=iEnd ; j++ ) {
                            sClass = (j==oPaging.iPage+1) ? 'class="active"' : '';
                            $('<li '+sClass+'><a href="#">'+j+'</a></li>')
                                .insertBefore( $('li:last', an[i])[0] )
                                .bind('click', function (e) {
                                    e.preventDefault();
                                    oSettings._iDisplayStart = (parseInt($('a', this).text(),10)-1) * oPaging.iLength;
                                    fnDraw( oSettings );
                                } );
                        }

                        // Add / remove disabled classes from the static elements
                        if ( oPaging.iPage === 0 ) {
                            $('li:first', an[i]).addClass('disabled');
                        } else {
                            $('li:first', an[i]).removeClass('disabled');
                        }

                        if ( oPaging.iPage === oPaging.iTotalPages-1 || oPaging.iTotalPages === 0 ) {
                            $('li:last', an[i]).addClass('disabled');
                        } else {
                            $('li:last', an[i]).removeClass('disabled');
                        }
                    }
                }
            }
        });

        /* Show/hide table column */
        function dtShowHideCol( iCol ) {
            var oTable = $('#example-2').dataTable();
            var bVis = oTable.fnSettings().aoColumns[iCol].bVisible;
            oTable.fnSetColumnVis( iCol, bVis ? false : true );
        };

        /* Table #example */
        $(document).ready(function() {
            $('.datatable').dataTable( {
                "sDom": "<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i><'span6'p>>",
                "sPaginationType": "bootstrap",                    
                "oLanguage": {
                    "sLengthMenu": "_MENU_ records per page"
                },
                "aoColumnDefs": [
                    { 
                        "bSortable": false, 
                        "aTargets": [ -1 ] // <-- gets last column and turns off sorting
                    } 
                ]
            });
            $('.datatable-controls').on('click','li input',function(){
                dtShowHideCol( $(this).val() );
            })
        }); 
```

* * *

## 回答 #1

> 赞同：202
> 
> 时间：2012-08-25T18:55:53.047

将[`aaSorting`](http://datatables.net/ref#aaSorting)选项设置为空数组。它将禁用初始排序，同时在您单击列时仍允许手动排序。

```
"aaSorting": [] 
```

> aaSorting 数组应包含每个要排序的列的数组，该数组*最初*包含列的索引和方向字符串（'asc' 或 'desc'）。

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2015-07-16T20:02:45.510

在较新版本的数据表（1.10.7 版）中，情况似乎发生了变化。防止 DataTables 自动按第一列排序的方法是将`order`选项设置为空数组。

您只需将以下参数添加到 DataTables 选项：

```
"order": [] 
```

如下设置您的 DataTable 以覆盖默认设置：

```
$('#example').dataTable( {
    "order": [],
    // Your other options here...
} ); 
```

这将覆盖默认设置`"order": [[ 0, 'asc' ]]`。

[您可以在此处](https://datatables.net/reference/option/order)找到有关该`order`选项的更多详细信息。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-06-14T11:07:18.380

```
var table;

$(document).ready(function() {

    //datatables
    table = $('#userTable').DataTable({ 

        "processing": true, //Feature control the processing indicator.
        "serverSide": true, //Feature control DataTables' server-side processing mode.
        "order": [], //Initial no order.
         "aaSorting": [],
        // Load data for the table's content from an Ajax source
        "ajax": {
            "url": "<?php echo base_url().'admin/ajax_list';?>",
            "type": "POST"
        },

        //Set column definition initialisation properties.
        "columnDefs": [
        { 
            "targets": [ ], //first column / numbering column
            "orderable": false, //set not orderable
        },
        ],

    });

}); 
```

放

```
"targets": [0] 
```

到

```
 "targets": [ ] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-07-11T04:59:12.513

```
this.dtOptions = {
    order: [],
    columnDefs: [ {
        'targets': [0], /* column index [0,1,2,3]*/
        'orderable': false, /* true or false */
    }],
    ........ rest all stuff .....
} 
```

以上对我来说很好。

（我正在使用 Angular 版本 7、angular-datatables 版本 6.0.0 和引导程序版本 4）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-01-27T19:38:36.413

使用这个简单的代码进行 DataTables 自定义排序。它的 100% 工作

```
<script>
    $(document).ready(function() {
        $('#myTable').DataTable( {
            "order": [[ 0, "desc" ]] // "0" means First column and "desc" is order type; 
        } );
    } );
</script> 
```

参见数据表网站

[https://datatables.net/examples/basic_init/table_sorting.html](https://datatables.net/examples/basic_init/table_sorting.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-14T08:24:58.893

添加

```
"aaSorting": [] 
```

并检查默认值是否`null`不仅设置了可排序列

```
if ($('#table').DataTable().order().length == 1) {
    d.SortColumn = $('#table').DataTable().order()[0][0];
    d.SortOrder = $('#table').DataTable().order()[0][1];
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-04T08:57:35.823

如果任何其他解决方案都无法修复它，请尝试覆盖样式以隐藏排序切换器：

```
.sorting_asc:after, .sorting_desc:after {
  content: "";
} 
```

# php - 警告：mysql_num_rows() 期望参数 1 是资源，布尔值在

> ID：12124750
> 
> 赞同：-1
> 
> 时间：2012-08-25T18:50:35.203
> 
> 标签：php, mysql

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，选择中给出的布尔值](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)

```
if (isset($_GET['uid']) && !empty($_GET['uid'])) {
$id = $_GET['uid'];
$sql = "SELECT * FROM `apps` WHERE `id` = ". mysql_real_escape_string($id) ." LIMIT 1";
    if ($result = mysql_query($sql)) {
    if (mysql_num_rows($result) == 1) {
    while($row = mysql_fetch_assoc($result)){
    $username = $row["MCName"];
    echo'

    //Here is a ton of rows and some html.

    ';
    }
    $sql = "SELECT * FROM `apps` WHERE `MCName` = ". $username;
    $result = mysql_query($sql);
    $rows = mysql_num_rows($result);

    }else {
         die('Record not found.');
    }
}
} 
```

我已经尝试了一切，它总是失败。我不是真正的 SQL 和 PHP 大师。我想计算“MCName”有多少行我不确定我是否可以在第一个 SQL 查询中做到这一点。此外，错误出现在第 44 行，也就是执行 mysql_num_rows 的行。数据库在脚本的前面已连接。

对不起，如果这是一个非常愚蠢的问题，相信我。我搜索了一个小时左右的修复^^

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T18:55:07.297

您的第二个查询有 SQL 语法错误：

```
 $sql = "SELECT * FROM `apps` WHERE `MCName` = ". $username; 
```

`$username`变量需要用引号括起来。尝试更新到以下内容以修复：

```
 $sql = "SELECT * FROM `apps` WHERE `MCName` = '". $username . "'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T19:09:23.590

这是来自 php： http: [//php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)

`Use of this extension is discouraged. Instead, the MySQLi or PDO_MySQL extension should be used. See also MySQL: choosing an API guide and related FAQ for more information. Alternatives to this function include:`

有关详细示例，请参见[http://www.php.net/manual/en/mysqli.query.php](http://www.php.net/manual/en/mysqli.query.php)

正确的做法？？

```
$mysqli = new mysqli("localhost", "user", "password", "db");
$sql = "SELECT * FROM `apps` WHERE `MCName` = '%s' ";

if ($mysqli->connect_errno) {
    printf("Connect failed: %s\n", $mysqli->connect_error);
    exit();
}

$result = $mysqli->query(sprintf($sql, $mysqli->real_escape_string($username)));
$rows = $result->num_rows; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T18:56:22.897

```
$sql = "SELECT COUNT(*) cn FROM `apps` WHERE `MCName` = '". $username."'";
$result = mysql_query($sql); 
```

然后从中得到你的结果。

是的，我建议使用 PDO 而不是 mysql_* 命令

# excel - 将超大文本文件导入 Excel 的 vba 代码

> ID：12124751
> 
> 赞同：0
> 
> 时间：2012-08-25T18:50:39.957
> 
> 标签：excel, vba

我有一个包含 150 万行数据的文本文件 (.txt)。我想将数据（未格式化）导入 Excel（2007）。问题是 Excel 每个选项卡只能处理 1M 行。我设置了一个代码来逐行复制数据，但它一直停在第 594,139 行。我不知道为什么。

任何人都可以帮助我为以下内容创建 VBA 代码：

*   打开文本文件并一次复制 200,000 行数据。
*   将数据放入 Excel（未格式化）。
*   从文本文件（等）中获取接下来的 200,000 行，并将其放入先前数据下方的 excel 中。
*   当 excel 达到第 1,000,000 行时 - 设置新选项卡并继续将数据放入 Excel。

以上听起来很简单，但我当前的宏没有完成。

任何帮助将不胜感激，

下面是我的原始代码。我尝试按块（200,000 行）复制文本，但随后我逐行尝试。

子大文件导入（）

```
 Dim ResultStr As String
  Dim FileName As String
  Dim FileNum As Integer
  Dim Counter As Double
  FileName = ThisWorkbook.Path & "\" & InputBox("Please enter the Text File's name, e.g. ifs_ytd_fut") & ".txt"
  If FileName = "" Then End
  FileNum = FreeFile()
  Open FileName For Input As #FileNum
  Application.ScreenUpdating = False
  Application.DisplayAlerts = False
  Dim mypath As String
  mypath = ThisWorkbook.Path
 Workbooks.Add template:=xlWorksheet
 ActiveWorkbook.SaveAs (mypath & "/Extract.xls")
 Application.DisplayAlerts = True
 Application.ScreenUpdating = False
 Counter = 1
  Range("A1").Select
 Do While Seek(FileNum) <= LOF(FileNum)
  Application.StatusBar = "Importing Row " & _
         Counter & " of text file " & FileName
  Line Input #FileNum, ResultStr
  If Left(ResultStr, 1) = "=" Then
         ActiveCell.Value = "'" & ResultStr
  Else
         ActiveCell.Value = ResultStr
  End If
  If ActiveCell.Row = 1000000 Then
       ActiveWorkbook.Sheets.Add After:=ActiveSheet
      Else
  ActiveCell.Offset(1, 0).Select
      End If
  Counter = Counter + 1
  Loop
  Close
  Application.StatusBar = False
  Application.ScreenUpdating = True
  End Sub 
```

CK。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T19:27:56.820

像这样的东西应该适合你

```
Sub Tester()

Const LINES_PER_SHEET As Long = 500000
Dim ResultStr As String
Dim FileName As String
Dim FileNum
Dim Counter As Long, r As Long
Dim wbNew As Excel.Workbook
Dim arr()
Dim mypath As String

    mypath = ThisWorkbook.Path

    FileName = ThisWorkbook.Path & "\" & _
               InputBox("Please enter the Text File's name, e.g. ifs_ytd_fut") & ".txt"
    If FileName = "" Then Exit Sub

    FileNum = FreeFile()
    Open FileName For Input As #FileNum

    Set wbNew = Workbooks.Add(template:=xlWorksheet)
    wbNew.SaveAs (mypath & "/Extract.xls")

    Counter = 0
    r = 0

    ReDim arr(1 To LINES_PER_SHEET, 1 To 1)

    Do While Not EOF(FileNum)

        If Counter Mod 1000 = 0 Then
            Application.StatusBar = "Importing Row " & _
             Counter & " of text file " & FileName
        End If

        Counter = Counter + 1
        r = r + 1
        Line Input #FileNum, ResultStr
        If Left(ResultStr, 1) = "=" Then ResultStr = "'" & ResultStr

        arr(r, 1) = ResultStr
        If r = LINES_PER_SHEET Then
            ArrayToSheet wbNew, arr
            r = 0
        End If
    Loop

    If Counter Mod LINES_PER_SHEET > 0 Then ArrayToSheet wbNew, arr

    Close #FileNum
    Application.StatusBar = False

End Sub

Sub ArrayToSheet(wb As Workbook, ByRef arr)
    Dim r As Long
    r = UBound(arr, 1)
    With wb.Sheets.Add(after:=wb.Sheets(wb.Sheets.Count))
        .Range("A1").Resize(r, 1).Value = arr
    End With
    ReDim arr(1 To r, 1 To 1)
End Sub 
```

# google-cloud-messaging - 谷歌云消息和更少的电池消耗

> ID：12124752
> 
> 赞同：3
> 
> 时间：2012-08-25T18:50:50.370
> 
> 标签：google-cloud-messaging

我听说 GCM 提供的能量消耗更少。GCM 究竟如何提供更长的电池寿命？与 GCM 有什么区别？

据说当有东西要获取时，服务器会向应用程序发送消息。因此应用程序不必每次都检查服务器。

但是现在，应用程序仍然需要检查该消息吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-25T19:19:12.077

它的工作方式是，如果没有 GCM，您的应用程序要么必须向您的服务器打开一个套接字并每隔 5 分钟左右 ping 它一次，以保持套接字处于活动状态。另一个选择是对您的服务器进行 HTTP 调用服务器每 5 分钟左右一次，看看是否有新的东西要获取。

使用 GCM，已经有一个统一的进程在运行以获取消息。现在您的应用程序只需订阅广播侦听器，然后如果在该 GCM 进程中有一条消息适用于您的应用程序，它将被广播到您的应用程序，并且在那个阶段您可以随心所欲。

这可以节省电池电量，因为您只是搭载操作系统上已经存在的 GCM 服务，而不是运行您自己的服务，因此使用更少的电池。

# php - 将 CSS 和 JS 请求路由到前端控制器（性能测量）

> ID：12124773
> 
> 赞同：0
> 
> 时间：2012-08-25T18:54:36.293
> 
> 标签：php, performance, model-view-controller, front-controller

我已经构建了一个简单的 MVC 库。有一个前端控制器。htaccess 文件将所有请求发送到前端控制器，除了图像、js 和 css。但是我有一个问题，我想用 PHP 构建 JS 和 CSS 文件。（虽然有时不是每次。）

为此，我计划向前端控制器发送 CSS 和 JS 文件请求，然后另一个 PHP 将“包含”相应的 CSS 或 JS 文件，并将其返回给客户端。当包含 CSS 或 JS 时，它也会被 PHP 解释器处理。

虽然让我想到的是性能。我现在只是在做开发，我无法看到当成千上万的请求到来时系统会如何响应这种技术。因为当你构建一个大系统时，很难立即改变。所以我想在早期阶段将这些功能构建到 MVC 中。

如果有人尝试过这样的技术，我想听听性能测量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T11:26:36.950

在这种情况下，性能是一个小问题。

您必须了解的是，在生产阶段，CSS 和 JS 文件将生成带有远期[过期标头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.21)。因此，每个访问者只会请求该资源一次，并且在每个后续页面查看中都使用浏览器缓存中的文件。

并且，如果生成过程复杂，您可以随时缓存这些资源的当前版本，这将进一步减少响应时间。

# java - Android 应用程序：从安全位置接收数据

> ID：12124785
> 
> 赞同：0
> 
> 时间：2012-08-25T18:56:28.440
> 
> 标签：java, android

我是 android 应用程序开发的新手，我想知道是否可以从任何安全网站检索信息，当然是通过发送正确的用户名和密码。用户在应用程序中输入他的用户名和密码，应用程序将进入网站，自动登录，从页面检索数据，在应用程序中显示（所有这些都在幕后）。这是一个普遍的问题，知道从哪里开始以及一般需要什么会很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T19:08:41.117

好吧，如果您的意思是到达 https 端点，是的，您可以。我将看看 Android 中的[Apache Http 库](http://developer.android.com/reference/org/apache/http/package-summary.html)。

如果您从头开始，[这里](http://www.vogella.com/articles/ApacheHttpClient/article.html)还有一个很好的教程。

# backbone.js - 主干未定义

> ID：12124786
> 
> 赞同：1
> 
> 时间：2012-08-25T18:56:34.830
> 
> 标签：backbone.js, coffeescript

Backbone 的任何实例都不起作用，我的控制台说它是未定义的......

截至目前，它说： **未捕获的类型错误：无法调用未定义的方法“开始”**

这与这条线相关：

```
Backbone.history.start() 
```

这是我的 app.js 代码：

```
app =
  facebookAuth()

class manageView extends Backbone.View
    constructor: ->
        super

    initialize: ->

    template: _.template($('#manage').html())

    render: ->
        $('#page').append(@template())

class AppRouter extends Backbone.Router
    routes:
        "": "manage"

    initialize: ->

    manage: ->
        new manageView()

$(document).ready( ->
  console.log('document ready')
  app.AppRouter = new AppRouter()
  Backbone.history.start()
) 
```

这就是我包含我的 js 文件的方式（它们都指向正确的路径）：

```
<script type="text/javascript" charset="utf-8" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="../js/underscore-min.js"></script>
    <script type="text/javascript" charset="utf-8" src="../js/backbone-min.js"></script>
    <script type="text/javascript" charset="utf-8" src="../js/bootstrap.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="../js/less-1.3.0.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="../js/facebook-auth.js"></script>
    <script type="text/javascript" charset="utf-8" src="../js/app.js"></script> 
```

谁能告诉我为什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T19:06:04.387

可能当时还没有创建路由器。接下来试试：

```
class AppRouter extends Backbone.Router
 routes:
        "": "manage"

    initialize: ->
        Backbone.history.start()
    manage: ->
        new manageView()

$(document).ready( ->
  console.log('document ready')
  app.AppRouter = new AppRouter()
) 
```

# java - Swing：如果主窗口关闭，如何杀死工作线程？

> ID：12124789
> 
> 赞同：0
> 
> 时间：2012-08-25T18:57:18.093
> 
> 标签：java, swing, concurrency

所以我有一个swing应用程序，按下一个按钮时，将启动一个工作线程。如果主窗口关闭，则 JVM 仍在运行，工作线程不间断且无限期地运行。我希望工作线程在窗口关闭时死掉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:59:40.787

当所有非守护线程都死掉时，JVM 退出。您的工作线程不是守护程序，因此不允许 JVM 退出。让工作[线程成为*守护进程*](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#setDaemon%28boolean%29)：

```
workerThread.setDaemon(true); 
```

另一种方法是[`interrupt()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#interrupt%28%29)在关闭主窗口时对您的线程进行处理，但这需要处理[`isInterrupted()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#isInterrupted%28%29)and `InterruptedException`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T19:03:08.727

如果您希望整个应用程序在窗口关闭时终止，您可以使用以下命令：

```
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
```

如果您只想停止工作线程并可能做其他事情。您可以在框架上注册一个 WindowListener 并在 onWindowClosing 回调中，您可以检查事件类型并做任何您想做的事情。

# oauth - Gmail 侧边栏小工具 OAuth 来源不匹配错误

> ID：12124792
> 
> 赞同：1
> 
> 时间：2012-08-25T18:57:33.137
> 
> 标签：oauth, google-api, gmail-contextual-gadgets

在[Google APIs Console](https://code.google.com/apis/console)上为 Google APIs 设置 OAuth 客户端 ID 时，如果您使用 Google 的 Javascript API 进行 oauth，则必须指定 Javascript 来源。但是，Javascript 源不支持通配符 url，并且我已经确认托管我的 Gmail 侧边栏小工具的服务器在后续请求中具有不同的子域。是否有已知的解决方案可以将 Gmail 服务器识别为 Javascript 源，或者我应该通过我托管的服务代理 OAuth 请求？

# java - Java Scanner.nextLine() 不等待输入

> ID：12124793
> 
> 赞同：4
> 
> 时间：2012-08-25T18:58:10.120
> 
> 标签：java

我以前使用过几种方法来接受用户输入并将其作为某种数据类型返回给调用它的方法。我在以前的项目中使用过这些方法或它们的变体。

我采用了用于字符串的方法来选择给定的第一个字符并返回它，以便我可以在菜单中使用它。每次我启动应用程序时，都会出现主菜单并等待用户输入。收到这个输入后，程序不断循环，直到停止。这是我捕获字符的方法：

```
private char getUserChar(String prompt) {
    try {
        Scanner scan = new Scanner(System.in);
        System.out.print(prompt);
        String tempString = "";
        tempString = scan.nextLine();
        scan.close();
        char userChar = tempString.charAt(0);
        return userChar;
    } catch(Exception ex) {
        System.out.println(ex.getMessage());
    }
    return 0;
} 
```

由于 try/catch 块，代码循环，因为 scan.nextLine() 从不等待下一个输入。没有它，异常通常与找不到新行有关。我已经尝试过似乎对其他人有用的 while(scan.hasNextLine())；但是，一旦输入时间到达，它就永远不会跳出循环。我也不相信我在 nextInt() 问题上绊倒了，每个人似乎都遇到了麻烦。我将在下面发布整个课程的代码：

```
import java.util.Scanner;
import controller.Controller;
public class TUI {
    private Controller controller;
    public TUI() {
        Controller controller = new Controller();
        this.controller = controller;
    }

    public void run() {
        boolean wantToQuit = false;
        char userInput = 0;
        System.out.println("Welcome to the Mart.");
        do{
            userInput = mainMenu();
            if(isUserInputValid(userInput))
                switch(userInput){
                    case 'a': addItem();
                    break;
                    case 'r': controller.removeItem();
                    break;
                    case 'i': controller.printInventory();
                    break;
                    case 'p': controller.customerPurchase();
                    break;
                    case 'w': controller.weeklyStock();
                    break;
                    case 'c': wantToQuit = true;
                    break;
                }
            else System.out.println("\nMainMenu");

        } while(!(wantToQuit));
        System.out.println("WolfMart is now closed.  Thank you and good-bye.");
    }

    private boolean isUserInputValid(char userInput) {
        char[] testSet = {'a', 'r', 'i', 'p', 'c', 'w'};
        for(char currentChar : testSet) {
            if(currentChar == userInput)
                return true;
        }
        return false;
    }

    private char mainMenu() {
        System.out.println();
        controller.printInventory();
        String mainMenuSelection = "What would you like to do: (a)dd item, (r)emove item, print (i)nventory, " +
            "(p)urchase by customer, (c)lose store?\r\n";

        char mainMenuInput = getUserChar(mainMenuSelection);
        return mainMenuInput;
    }

    private char getUserChar(String prompt) {
        try {
            Scanner scan = new Scanner(System.in);
            System.out.print(prompt);
            String tempString = "";
            tempString = scan.nextLine();
            scan.close();
            char userChar = tempString.charAt(0);
            return userChar;
        } catch(Exception ex) {
            System.out.println(ex.getMessage());
        }
        return 0;
    }

    private int getUserInt(String prompt) {
        Scanner scan = new Scanner(System.in);
        int userInt = -1;
        try {
            System.out.print(prompt);
            String input = scan.nextLine();
            userInt = Integer.parseInt(input);
        }
        catch(NumberFormatException nfe) {
            System.out.println("I did not recognize your command, please try again.");
        }
        scan.close();
        return userInt;
    }

    private String getUserString(String prompt) {
        Scanner scan = new Scanner(System.in);
        String userString = null;
        try{
            System.out.print(prompt);
            userString = scan.nextLine();
        } catch(Exception ex)
        {
            System.out.println("I did not recognize your command, please try again.");
        }
        scan.close();
        return userString;
    }

    private double getUserDouble(String prompt) {
        Scanner scan = new Scanner(System.in);
        double userDouble = -1.0;
        try {
            System.out.print(prompt);
            String input = scan.nextLine();
            userDouble = Double.parseDouble(input);
        }
        catch(NumberFormatException nfe) {
            System.out.println("I did not recognize your command, please try again.");
        }
        scan.close();
        return userDouble;
    }

    private void addItem() {
        String itemName = "";
        double price;
        int quantity;
        String namePrompt = "Enter the name of the item being added to the inventory: ";
        String pricePrompt = "Enter the cost of " + itemName + ": ";
        String quantityPrompt = "Enter the quantity of " + itemName + ": ";
        itemName = getUserString(namePrompt);
        price = getUserDouble(pricePrompt);
        quantity = getUserInt(quantityPrompt);
        controller.addItem(itemName, quantity, price);
    }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-25T19:16:46.163

正如我在[评论](https://stackoverflow.com/questions/12124793/java-scanner-nextline-not-waiting-for-input/12124906#comment16213611_12124793)中所说，问题是**每次你做这样的事情时****你都会关闭`System.in`**：

```
Scanner scan = new Scanner(System.in);
...
scan.close(); 
```

现在，看看规格[`Scanner.nextLine`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextLine())

> **抛出**：
> 
> *   `NoSuchElementException`- 如果没有找到行
> *   `IllegalStateException`- 如果此扫描仪已关闭

现在，由于扫描仪*本身*没有关闭，`IllegalStateException`因此不会抛出 an 。相反，正如您之前提到的，另一个异常“*通常与找不到新行有关*”，`NoSuchElementException`-- 被抛出。

假设您使用的是 JDK 7，您可以通过检查以下内容来了解​​其工作原理[`Scanner.throwFor`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/Scanner.java#Scanner.throwFor%28%29)：

```
if ((sourceClosed) && (position == buf.limit()))
    throw new NoSuchElementException(); 
```

由于您的异常被抛出，`0`返回的值是`getUserChar`，然后在`run`循环中使用：

```
 do {
        userInput = mainMenu();
        if (isUserInputValid(userInput)) {
            ...
        } else {
            System.out.println("\nMainMenu");
        }
    } while (!wantToQuit); 
```

由于输入无效，您会陷入循环打印`"\nMainMenu\n"`。

要解决此问题，请尝试使用单个`Scanner`并且不要关闭`System.in`；-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T06:39:30.427

请**不要**`Scanner`关闭.

```
scan.close();    // Don't do it. 
```

这样做会导致问题。

# ember.js - Emberjs - 无法查询嵌入式模型或关联

> ID：12124799
> 
> 赞同：1
> 
> 时间：2012-08-25T18:59:45.373
> 
> 标签：ember.js, ember-data

这个小提琴的一小部分：http: [//jsfiddle.net/v2t67/](http://jsfiddle.net/v2t67/)显示在我的问题中，但我的问题是我无法查询子模型的 json，即评论模型。到目前为止，我可以使用下面的查询从 chrome 开发人员控制台访问父对象（发布模型），并从包含父对象的结果中，在控制台中，我可以单击它，我将看到嵌入的注释，如图所示在此屏幕截图中：http: [//imgur.com/3WL4I](http://imgur.com/3WL4I)。

那么如何使用 objectAt(0).toJSON() 查询评论以直接返回它而不需要单击父对象才能看到它？

非常感谢。

```
 yt = App.store.findAll(App.Post)
 yt.objectAt(0).toJSON()   //to display the json for post

App.Comment = DS.Model.extend({
    content: DS.attr('string'),
    post: DS.belongsTo('App.Post')
});

App.Post = DS.Model.extend({
    body: DS.attr('string'),
    comments: DS.hasMany('App.Comment', { embedded: true } )
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T22:10:05.003

```
 App.Comment = DS.Model.extend({
   content: DS.attr('string'),
   post: DS.belongsTo('App.Post')
 });

 App.Post = DS.Model.extend({
   body: DS.attr('string'),
   comments: DS.hasMany('App.Comment', { embedded: true } )
 }); 
```

完整代码见：** [http://jsfiddle.net/v2t67/](http://jsfiddle.net/v2t67/) **

从源头阅读关联测试后，我找到了一种方法。关联测试在这里：** [https://github.com/emberjs/data/blob/master/packages/ember-data/tests/unit/associations_test.js](https://github.com/emberjs/data/blob/master/packages/ember-data/tests/unit/associations_test.js) **

仍然坚持上面的两个模型作为我们的例子，我们可以通过执行以下操作来查询嵌入式模型（评论模型）的 json 数据：

```
 **Approach 1**

 query = App.store.find(App.Post,  1)
 query.get('comments').objectAt(0).toJSON() 
```

在进行进一步检查时，我发现如果您想要父模型（后模型）的 json，上述方法将不起作用。这就是我为此使用json的方式：

```
 **Approach 2**

 query = App.store.find(App.Post)
 query.objectAt(0).toJSON() 
```

你会得到一个**TypeError: Object has no method 'objectAt'**，如果你尝试使用方法 1 获取 Post 模型的 json 数据，你会得到**TypeError: Cannot call method 'objectAt' of undefined**，如果你尝试获取使用方法 2 的嵌入式模型的 json 数据。

如果我发现新的东西，我会更新这个。

```
 **UPDATE** 
```

**您可以通过将{associations: true}**传递给**toJSON() 函数**来获取方法 2 以无错误地返回嵌入式模型的 json 数据，如下所示：

```
 query = App.store.find(App.Post)
 query.objectAt(0).toJSON({associations: true}) 
```

# selenium-webdriver - 使用 Selenium 测试用例映射手动测试用例

> ID：12124800
> 
> 赞同：0
> 
> 时间：2012-08-25T19:00:13.743
> 
> 标签：selenium-webdriver, testng, junit4, testng-dataprovider

我有用 Excel 文件编写的手动测试用例，每个测试用例都有一个唯一的 Id。我使用 Selenium Webdriver+TestNG 为这些测试用例编写了测试方法。

我需要以下帮助： 1.我应该如何将手动测试用例 ID 与自动化测试用例映射？2.我需要按照手动测试用例出现的顺序运行自动化测试用例。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T06:51:21.837

您可以使用 [Apache POI API](http://poi.apache.org/)或[JExcel API](http://jexcelapi.sourceforge.net/)从 MS Excel 读取/写入数据。

这是使用 JExcel 的 TestNG 教程 - [http://functionaltestautomation.blogspot.in/2009/10/dataprovider-data-driven-testing-with.html](http://functionaltestautomation.blogspot.in/2009/10/dataprovider-data-driven-testing-with.html)

# c++ - stl 算法中的 pred 字段是什么，我该如何使用它？

> ID：12124802
> 
> 赞同：3
> 
> 时间：2012-08-25T19:00:40.520
> 
> 标签：c++, algorithm, stl, predicate

有人可以向我解释一下 stl 算法中的 pred 字段是如何准确使用的吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-25T19:06:00.103

`pred`代表*谓词*，它基本上是一个可调用的实体，它可以是一个函数，也可以是一个仿函数（或一个 lambda，它本质上是一个仿函数或函数，具体取决于它是否捕获变量）。所以一个谓词可以接受一个或多个参数，并返回一个布尔值。

这是[std::find_if](http://en.cppreference.com/w/cpp/algorithm/find)的示例，其中一个重载将一元谓词作为第三个参数。这个谓词是*一元*的，因为它接受*一个*参数并返回`bool`：

```
std::vector<int> v{1,2,3,5,6};
auto it = std::find_if(begin(v), end(v), [](int i) { return i == 3; }); 
```

注意第三个参数是一个用作一元谓词的 lambda。

在 C++03 中，示例可以是这样的：

```
bool is_three(int i) { return i == 3; }

std::vector<int>::iterator it = std::find_if(v.begin(), v.end(), is_three); 
```

请注意，现在`is_three`which 是一个函数作为第三个参数传递给`std::find_if`.

# php - 检查字符串中是否有按字母顺序排列的字符

> ID：12124803
> 
> 赞同：21
> 
> 时间：2012-08-25T19:00:49.140
> 
> 标签：php, string

这似乎很明显，但我找不到办法做到这一点。
我认为甚至有一个常规的 PHP 函数可以做到这一点，但即使是在 1.5 小时的密集谷歌搜索之后，它也能很好地隐藏起来。

# 我想要的是

*   将字符串作为输入的函数。

*   检查该字符串具有超过 3 个字符的按字母顺序排列的次数：

*   如果找到超过 3 个的序列，则返回 true。

# 例子

**"youlookgreatbcdetoday"** => 里面有 "bcde" ... 所以必须返回 true
**"youlookgreatklmtoday"** => 里面只有 "klm" ... 所以必须返回 false
**"youlookgreattoday"** => 没有按字母顺序排列的序列在其中，所以返回 false

# 可能的用例

*   密码强度检查器
*   文字游戏
*   ...

***免责声明：**我希望我已经有一些代码可以向您展示，但实际上我还没有。
我唯一能想到的就是将字符串拆分成一个数组并在数组上做一些魔术......但即便如此我还是被卡住了。*

希望你们中的一个人能救我:)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-25T19:16:12.830

因此，让我们从一个使用循环和计数器（仅用于递增）的简单实现开始：

```
function hasOrderedCharactersForward($string, $num = 4) {
    $len = strlen($string);
    $count = 0;
    $last = 0;
    for ($i = 0; $i < $len; $i++) {
        $current = ord($string[$i]);
        if ($current == $last + 1) {
            $count++;
            if ($count >= $num) {
                return true;
            }
        } else {
            $count = 1;
        }
        $last = $current;
    }
    return false;
} 
```

那么它是怎样工作的？基本上，它循环并检查`ord`字符的（ascii 编号）是否比它之前的一个多一个。如果是这样，它会增加计数参数。否则，它将其设置为 1（因为我们已经处理了该字符）。然后，如果`$count`大于或等于请求的数字，我们知道我们找到了一个序列，并且可以返回......

所以，现在让我们检查两个方向：

```
function hasOrderedCharacters($string, $num = 4) {
    $len = strlen($string);
    $count = 0;
    $dir = 1;
    $last = 0;
    for ($i = 0; $i < $len; $i++) {
        $current = ord($string[$i]);
        if ($count == 1 && $current == $last - 1) {
            $count++;
            $dir = -1;
            if ($count >= $num) {
                return true;
            }
        } elseif ($current == $last + $dir) {
            $count++;
            if ($count >= $num) {
                return true;
            }
        } else {
            $count = 1;
            $dir = 1;
        }
        $last = $current;
    }
    return false;
} 
```

现在，它会返回 true for `abcd`and `dcba`...

现在，这是一个更简单的解决方案：

```
function hasOrderedCharactersForward($string, $num = 4) {
    $len = strlen($string) + 1;
    $array = array_map(
        function($m) use (&$len) {
            return ord($m[0]) + $len--;
        }, 
        str_split($string, 1)
    );
    $str = implode('_', $array);
    $regex = '#(^|_)(\d+)' . str_repeat('_\2', $num - 1) . '(_|$)#';
    return (bool) preg_match($regex, $str);
} 
```

你去吧。我们使用的属性是，如果我们向每个位置添加一个递减的数字，则连续序列将显示为相同的数字。这正是它的工作原理。

这是适用于两个方向的相同理论：

```
function hasOrderedCharacters($string, $num = 4) {
    $i = 0;
    $j = strlen($string);
    $str = implode('', array_map(function($m) use (&$i, &$j) {
        return chr((ord($m[0]) + $j--) % 256) . chr((ord($m[0]) + $i++) % 256);
    }, str_split($string, 1)));
    return preg_match('#(.)(.\1){' . ($num - 1) . '}#', $str);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-25T19:24:11.827

```
<?php
function check($input, $length = 4)
{
    $sequence = "abcdefghijklmnopqrstuvwxyz";
    $sequence .= substr($sequence, 0, $length - 1);
    // abcdefghijklmnopqrstuvwxyz is converted to abcdefghijklmnopqrstuvwxyzabc
    for ($i = 0; $i < strlen($sequence) - $length; $i++) {
        // loop runs for $i = 0...25
        if (strpos($input, substr($sequence, $i, $length)) !== false) {
            echo sprintf('"%s" contains "%s"' . PHP_EOL, $input, substr($sequence, $i, $length));
            return true;
        }
    }
    echo sprintf('"%s" is OK' . PHP_EOL, $input);
    return false;
}
check("youlookgreatbcdetoday"); // "youlookgreatbcdetoday" contains "bcde"
check("youlookgreatklmtoday");  // "youlookgreatklmtoday" is OK
check("youlookgreattoday");     // "youlookgreattoday" is OK
check("youlookgreattodayza");   // "youlookgreattodayza" is OK
check("youlookgreattodayzab");  // "youlookgreattodayzab" contains "yzab" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-25T20:09:27.283

更少的循环和 if 条件！

```
 function alphacheck($str, $i=4)
  {
      $alpha = 'abcdefghijklmnopqrstuvwxyz';
      $len = strlen($str);

      for($j=0; $j <= $len - $i; $j++){
          if(strrpos($alpha, substr($str, $j, $i)) !== false){
              return true;
          }
      }

      return false;
  } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-25T19:38:29.380

这就是我想出的：

```
/**
 * @param string $input Input string
 * @param int $length Length of required sequence
 *
 * @return bool
 */

function look_for_sequence($input, $length) {
    //If length of sequence is larger than input string, no sequence is possible.
    if ($length > strlen($input)) {
        return false;
    }
    //Normalize string, only lowercase
    //(That's because character codes for lowercase and uppercase are different).
    $input = strtolower($input);

    //We loop until $length characters before the end of the string, because after that,
    //No match can be found.
    for ($i = 0; $i < strlen($input) - $length; $i++) {
        //Reset sequence counter
        $sequence = 1;
        //Character under inspection.
        $current_character = ord($input[$i]);
        //Let's look forward, $length characters forward:
        for ($j = $i + 1; $j <= $i + $length; $j++) {
            $next_character = ord($input[$j]);
            //If this next character is actually the sequencing character after the current
            if ($next_character == $current_character+1) {
                //Increase sequence counter
                $sequence++;
                //Reset the current character, and move to the next
                $current_character = $next_character;
                //If $length characters of sequence is found, return true.
                if ($sequence >= $length) {
                    return true;
                }
            }
            //If the next character is no sequencing,
            //break this inner loop and continue to the next character.
            else {
                break;
            }
        }
    }
    return false;
}

var_dump(look_for_sequence("youlookgreatbcdetoday", 4)); 
```

处理我扔给它的任何字符串，您还可以选择要计算的字符数！耶！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-25T19:51:29.433

这是我的看法：

```
function checkConsecutiveness($string, $length = 3)
{

    $tempCount = 1; 

    for($i = 0; $i < count($tokens = str_split(strtolower($string)) ); $i++)
    {

        // if current char is not alphabetic or different from the next one, reset counter
        if(
            ord($tokens[$i]) < 97 ||
            ord($tokens[$i]) > 122 ||
            ord($tokens[$i]) != (ord( $tokens[$i+1]) -1)
        ){

            $tempCount = 1;

        }
        // else if we met given length, return true
        else if(++$tempCount >= $length)

            return true;

    }

    // no condition met by default
    return false;

} 
```

它检查`$string`任何`$length`连续字母序列。

```
checkConsecutiveness('1@abcde1', 5) // returns true;
checkConsecutiveness('1@abcd1', 5) // returns false; 
```

请注意确保当前字符在 97-122 范围内，因为勾号 `[ [ASCII](http://www.asciitable.com/) #96] 和大括号 { [ASCII #123] 可能会导致误报。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-25T19:32:49.003

[使用正则表达式](http://regexp.info/)也很简单：

```
preg_match('/  ((?=ab|bc|cd|de|ef|fg|gh).)  {2,}  /smix', "testabc") 
```

您显然需要完成连续字母的列表。并且`{2,}`只需在一个范围内探测至少三个字母。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-25T19:15:07.410

您可以尝试使用 PHP[`ord()`](http://php.net/ord)获取每个字符的 ASCII 值，并逐个字符地遍历字符串，比较每个值以查找序列。

这可能会有所帮助：

```
function checkForSequences($str, $minSequenceLength = 4) {
    $length = strlen($str);
    $sequenceLength = 1;
    $reverseSequenceLength = 1;
    for ($i = 1; $i < $length; $i++) {
        $currChar = ord(strtolower($str[$i]));
        $prevChar = ord(strtolower($str[$i - 1])) + 1;
        if ($currChar == $prevChar) {
            // we have two-letters back to back; increment the counter!
            $sequenceLength++;
            if ($sequenceLength == $minSequenceLength) {
                // we've reached our threshold!
                return true;
            }
            // reset the reverse-counter
            $reverseSequenceLength = 1;
        } else if ($currChar == ($prevChar - 2)) {
            // we have two-letters back to back, in reverse order; increment the counter!
            $reverseSequenceLength++;
            if ($reverseSequenceLength == $minSequenceLength) {
                // we've reached our threshold!
                return true;
            }
            // reset the forward-counter
            $sequenceLength = 1;
        } else {
            // no sequence; reset counter
            $sequenceLength = 1;
            $reverseSequenceLength = 1;
        }
    }
    return false;
} 
```

这个函数将做的是，它将逐个字符地遍历字符串。它将`ord()`用于获取当前字符的 ASCII 值并将其与*前一个*字符的 ASCII 值进行比较。如果它们是按顺序排列的，无论是正向还是反向，它都会增加一个计数器。当计数器击中时`4`，它返回`true`！。

这将匹配正向和反向序列，以及忽略大小写。所以，`abcd`将匹配，`aBcD`将，还有`DcBa`，等等！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-25T19:16:11.680

这是我想出的一个简单的解决方案：

```
function alphaCheck($str){
    $array=str_split(strtolower($str));
    $minMatchLength=3;
    $check=array(ord($array[0]));
    foreach($array as $letter){
        $ascii=ord($letter);
        if($ascii==end($check)+1){
            $check[]=$ascii;
            if(count($check)==$minMatchLength)
                return true;
        }else{
            unset($check);
            $check=array($ascii);
        }
    }
    return false;
}
$str="abcdhello";
$str2="testing";
$str3="abdcefghi";
if(alphaCheck($str))
    echo"STR GOOD";
if(alphaCheck($str2))
    echo "STR2 GOOD";
if(alphaCheck($str3))
    echo "STR3 GOOD"; 
```

输出为 STR GOOD 和 STR3 GOOD。 `$minMatchLength`是为了使函数返回 true，一行中的字符数。（“testing”有“st”，但长度是3，所以它返回false。

**编辑** 我更新了它以检查“AbCdE”，因为`ord`单独无法解决这个问题。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-08-25T19:24:03.793

字符的不等式比较确实隐式使用 ord() 值。这是一个简单的脚本，可以对其进行调整（特别是不区分大小写）：

```
<?php
$string = "thisabcdef";

function hasSequence($string, $sequence_length = 3) {
        $num_in_order = 0;
        for($i = 1; $i < strlen($string); $i++) {
                if($string[$i] > $string[$i-1]) {
                        $num_in_order++;
                } else {
                        $num_in_order = 0;
                }
                if($num_in_order >= $sequence_length) {
                        return TRUE;
                }
        }
        return FALSE;
}
if(hasSequence("testabcd")) {
        echo "YUP";
} else {
        echo "NOPE";
}
echo "\n"; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-08-25T19:27:14.013

可能很简单？如果您想要不区分大小写，则可以`stripos()`改用。

```
function abc($test, $depth) {
    $alpha = 'abcdefghijklmnopqrstuvwxyz';
    $matches = 0;
    $length = strlen($test);

    while ($length--) {
        $char = substr($test, $length, $depth);

        if (strlen($char) == $depth && strpos($alpha, $char) !== false) {
            $matches++;
        }

        if ($matches == $depth) return true;
    }

    return false;
} 
```

[http://codepad.org/tIySKnm4](http://codepad.org/tIySKnm4)

并且（窃取 IRCMaxwell 的观察结果）`strrev()`：

```
function abc($test, $depth) {
    $alpha = 'abcdefghijklmnopqrstuvwxyz';
    $matches = 0;
    $length = strlen($test);

    while ($length--) {
        $char = substr($test, $length, $depth);

        if (strlen($char) == $depth && 
            (strpos($alpha, $char) !== false || 
             strpos(strrev($alpha), $char) !== false)) {
            $matches++;
        }

        if ($matches == $depth) return true;
    }

    return false;
} 
```

[http://codepad.org/sjzrVAAg](http://codepad.org/sjzrVAAg)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-08-26T06:20:35.590

我的两分钱：

```
function countOrderedCharacters($str, $count){
    $matches = array();
    preg_replace_callback('/(?=(\w{'.$count.'}))/',function($x) use(&$matches,$count) {
        $seq = $x[1];
        if($count === 1){
            $matches[] = $seq;
            return;
        }
        $dif = ord($seq[1]) - ord($seq[0]);
        if (abs($dif)!=1) return;
        for($i = 0 ; $i < strlen($seq)-1 ; $i++){
            if(ord($seq[$i+1]) - ord($seq[$i]) != $dif) return;
        }
        $matches[] = $seq;

    }, $str);
    return $matches;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-08-25T19:28:35.840

你可以这样做（ASCII码按字母顺序排列）：

```
function check_str_for_sequences($str, $min = 3) {
        $last_char_code = -1;
        $total_correct = 0;
        $str = strtolower($str);

        for($i = 0; $i < strlen($str); $i++) {
            //next letter in the alphabet from last char?
            if(ord($str[$i]) == ($last_char_code + 1)) {
                $total_correct++;

                //min sequence reached?
                if($total_correct >= ($min - 1)) {
                    return TRUE;
                }
            } else {
                $total_correct = 0;
            }

            $last_char_code = ord($str[$i]);
        }

        return FALSE;
    } 
```

用法：

```
$test = 'Lorem ipsum dolor abcsit amet';

echo '----->' . check_str_for_alpha($test); // ----->1 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2012-08-25T19:15:41.760

试试这个功能：

```
function checkForString($string,$l=4){
   $length = strlen($string);
   $result = 0;
   for($i=0;$i<$length-1 && $result<4;$i++){

   if($string[$i+1] == $string[$i]++) $result++;

}
if($result>=4) return true;
else return false;
} 
```

# android - Android 意图语法

> ID：12124804
> 
> 赞同：3
> 
> 时间：2012-08-25T19:00:56.170
> 
> 标签：android, android-intent, syntax

在我试图找出如何在我的应用程序中启动新意图的过程中，我遇到了几种措辞方式。

此语法返回运行时错误，即 ActivityNotFound 异常

```
Intent in = new Intent("com.something.something"); 
```

当然，我的 android manifest 在意图过滤器中包含一个动作：

```
<activity
        android:name=".SecondActivity"
        android:label="@string/title_activity_second" >
        <intent-filter>
            <action android:name="com.something.something" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

这种格式有效：

```
Intent in = new Intent(MainActivity.this, SecondActivity.class); 
```

我还尝试了以下方法：

```
Intent in = new Intent(this, SomeActivity.class); 
```

这是我正在阅读的一本书中推荐的。这会返回一个运行时错误，activitynotfound

这让 Eclipse 让我在 setClass 和 setClassName 之间来回切换：

```
 Intent in = new Intent().setClass(this, SecondActivity.class); 
```

我在 onclick 方法中使用它：

```
ok.setOnClickListener(new View.OnClickListener()
    {

        @Override
        public void onClick(View v)
        {

            Intent in = new Intent(MainActivity.this, SecondActivity.class);
            startActivity(in);
        }
    });
} 
```

这些有什么区别，为什么只有其中一个为我工作？

问候/米

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-27T10:26:42.730

**Intent解析基本信息**

意图可以包含以下基本信息：

*   行动
*   类别
*   数据
*   零件

系统解析 Intent 有两种方式：

*   显式（如果指定，则使用 COMPONENT）
*   隐式（使用 ACTION、CATEGORY 和 DATA 来寻找合适的活动）

如果您指定组件（包名和类名），那么这将用于显式查找您指定的活动并将 Intent 发送到该活动。不使用其他 Intent 数据（尽管它被传递给 Intent 中的被调用活动）。这称为**“显式意图解析”**。

如果您不指定组件，则 ACTION、CATEGORY 和 DATA 字段用于定位一个或多个广告（通过意图过滤器）他们可以接受 Intent 的活动。这称为**“隐式意图解析”**。

* * *

**针对您的具体问题**

当你这样做时：

```
Intent in = new Intent("com.something.something"); 
```

您正在创建一个**隐式**Intent 并将 ACTION 设置为“com.something.something”。如果你然后`startActivity()`用这个 Intent 调用，你会得到，`ActivityNotFoundException`因为 Android 找不到可以接受 ACTION="com.something.something" 的 Intent 的 Activity。原因是您提供了一个带有 ACTION="com.something.something" 和 CATEGORY="android.intent.category.LAUNCHER" 的意图过滤器，但您没有在 Intent 中指定 CATEGORY（Android 会自动添加 CATEGORY如果在使用`startActivity()`) 时未指定任何 CATEGORY，则为 Intent 设置“DEFAULT”。要完成这项工作，您应该

*   替换`CATEGORY="android.intent.category.LAUNCHER"`为`CATEGORY="android.intent.category.DEFAULT"`或
*   添加`<category android:name="android.intent.category.DEFAULT" />`

到意图过滤器`SecondActivity`

* * *

当你这样做时：

```
Intent in = new Intent(MainActivity.this, SecondActivity.class); 
```

您正在创建一个**明确**的Intent 指定组件`SecondActivity`。此方法的签名是`Intent(Context packageContext, Class clas)`. 它使用包名 from`packageContext`和类名 from`clas`为该组件创建显式 Intent。如果您在 Activity 中使用此构造函数，则可以仅将`this`其用作第一个参数，因为`Activity`extends `Context`。如果您从另一个类（如`OnClickListener`）使用此构造函数，则需要指定`MyActivity.this`作为第一个参数以传递 Activity 的实例而不是 OnClickListener 的实例（因为`OnClickListener`不扩展`Context`）。

* * *

当你这样做时：

```
Intent in = new Intent().setClass(this, SecondActivity.class); 
```

您正在创建一个**明确**的Intent 如上所述。这与使用完全相同：

```
Intent in = new Intent(this, SecondActivity.class); 
```

您不能在 an 内部执行此操作，`OnClickListener`因为第一个参数需要是 a `Context`（或扩展的类`Context`，如`Activity`）。

如果你想创建一个**明确**的Intent 你也可以使用这个：

```
Intent in = new Intent().setClassName("com.something", "com.something.SecondActivity"); 
```

这会创建一个**明确**的意图，但您不需要这样做`Context`。您可以将包名和类名作为字符串传递（如果您知道的话）。

有关 Intent 解析的更多信息，请参阅：

*   [http://developer.android.com/guide/components/intents-filters.html](http://developer.android.com/guide/components/intents-filters.html)
*   [http://developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)
*   [http://developer.android.com/reference/android/content/IntentFilter.html](http://developer.android.com/reference/android/content/IntentFilter.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-23T00:06:47.910

请注意，当您在“Intent in = new Intent(this, SomeActivity.class);”中使用“this”关键字时，请确保您不在 MainActivity 的子类中，这可能会将错误的 Activity 设置为显式意图的一部分零件。**强文本**

# scala - 在 ScalaQuery 中的 for 循环条件下解压缩 NamedColumn

> ID：12124807
> 
> 赞同：1
> 
> 时间：2012-08-25T19:01:28.313
> 
> 标签：scala, scalaquery

我对 Scala 和 ScalaQuery 很陌生，现在已经使用了几个星期。我试图通过调用函数来找出查询中的条件，但我得到的是 NamedColumn[T] 而不是 T，如何解压它？

见第二个链接，第 20 行：

[带有类型映射器的包： https](https://gist.github.com/3469291) ://gist.github.com/3469291

表对象：[https ://gist.github.com/3469291](https://gist.github.com/3469291)

```
case class MyObject (
        id: Long,
        created: JodaTime
        modified: JodaTime
        special: JodaTime
)

object MyObjects extends Table[MyObject]("my_objects") {

  lazy val database = Database.forDataSource(DB.getDataSource())

  def id = column[Long]("id", O PrimaryKey, O AutoInc, O NotNull)
  def created = column[JodaTime]("created", O NotNull)
  def modified = column[JodaTime]("modified", O NotNull)
  def special = column[JodaTime]("special", O NotNull)
  def * = id ~ created <> (MyObject, MyObject.unapply _)

  def getMarker(time: JodaTime) = database.withSession { implicit db:Session =>
    (for {
      e <- MyObjects if (new org.joda.time.Interval(e.created, e.modified).contains(e.special)
    } yield (e.id, e.created)).firstOption
  }
} 
```

e.created / modified /special 是 NamedColumns，因此构造函数和函数调用将不起作用。我该如何进行这项工作？

我没有测试我的对象，我只是抓住了一个类并剥离并重命名了东西，只是为了展示我有什么和想做的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T21:31:17.237

我认为您可能会被 ScalaQueries 漂亮的语法所欺骗。您不能在基于 ScalaQuery 表的理解中添加任意条件。

条件不会被 JVM 执行，而是被翻译成 SQL。这显然不适用于任意 Scala 代码，而仅适用于 ScalaQuery 提供的特殊操作。

以下版本应该可以工作：

```
for {
  e <- MyObjects 
  if (e.created < e.special)
  if (e.modified > e.special)
} 
```

请注意，我对 的语义一无所知`Interval.contains`，因此您可能必须在其中抛出一些`>=`or `<=`。

# python - 列表中的 UTF8 编码字符串

> ID：12124810
> 
> 赞同：0
> 
> 时间：2012-08-25T19:01:46.690
> 
> 标签：python, excel, utf-8, xlrd

我无法将字符串格式化为 utf-8 在此脚本中，我从 excel 文件中获取数据，然后循环打印出来，问题是带有特殊字符的字符串显示错误。

结果我不断得到“PatrÄ«cija”而不是“Patrīcija”似乎找不到解决这个问题的方法

```
 #!/usr/bin/env python
    # -*- coding: utf-8 -*-

    import sys
    import xlrd
    import datetime

    def todaysnames():
    todaysdate = datetime.datetime.strftime(datetime.date.today(), "%d.%m")

    book = xlrd.open_workbook("vardadienas.xls")
    sheet = book.sheet_by_name('Calendar')
    for rownr in range(sheet.nrows):
        if sheet.cell(rownr, 0).value == todaysdate:
            string = (sheet.cell(rownr, 1).value)
            string = string.encode(encoding="UTF-8",errors="strict")
            names = string.split(', ')
            return names

    names = todaysnames()
    for name in names:
        print name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T20:05:21.997

将编码更改为`iso8859_13(Baltic languages)`并修复它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-25T19:33:48.740

我认为您的问题可能是由`print`. xlrd 返回 utf8。根据控制台的编码，`print`可能难以正确打印。我有时在法语 Windows 上注意到这一点（编码为 cp1252）

以下问题：[Python、Unicode 和 Windows 控制台](https://stackoverflow.com/q/5419/117092)解释了如何在 Windows 的控制台上打印 unicode char。我自己没试过，但看起来不错。

我希望它有帮助

# iphone - 以编程方式重启 iPhone

> ID：12124815
> 
> 赞同：2
> 
> 时间：2012-08-25T19:02:35.347
> 
> 标签：iphone, ios

我有一部 iPhone 3GS，用于测试等。不幸的是，由于我儿子尝试棒球投球练习，它的电源按钮（右上角的那个）停止工作。现在，如果我必须重新启动手机，我所能做的就是让电池耗尽，然后重新连接电源。是否可以在不越狱的情况下以编程方式执行某些操作（当然，我不会将其作为 iPhone 应用程序提交！），所以我可以在需要时重新启动 iPhone？我拥有 Apple 会员资格，因此我可以在手机上编写和运行这些应用程序。任何建议表示赞赏。

我目前正在运行 iOS 5.1.1。

# c# - 如何从 asp:button 调用数据网格分类？

> ID：12124816
> 
> 赞同：0
> 
> 时间：2012-08-25T19:02:50.927
> 
> 标签：c#, asp.net, datagrid

我有一个数据网格，它从目录中读取所有歌曲并生成行。我写了数据网格排序，它在 ASC 或 DESC 上按歌曲名称排序，调用排序的唯一方法是按下标题中的链接。但是我想从 asp:button 调用排序命令，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T19:18:26.730

您好，您可以尝试使用调用委托的代码

```
void SortGrid(Object sender, DataGridSortCommandEventArgs e) 
{
}

void Btn_Click(Object sender,EventArgs e)
{
        SortGrid(YourDataGrid, new DataGridSortCommandEventArgs{SortExpression = value, CommandSource = value});
    //You pass yours values
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T19:10:51.767

看看[这个](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.sorting.aspx)和[这个](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.sort.aspx)。

该策略是将当前类型的网格保存在您可以检索的位置。然后，当单击按钮时，您希望根据您需要的任何逻辑修改该排序表达式，并将该排序表达式发送回网格以对其进行排序（第二个链接）。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T19:16:47.353

在 asp.net 命令按钮的单击事件中，您可以使用 DataView 进行排序

例如：

```
DataView myDataView = new DataView(mybll.GetItemsOrdered()); 
myDataView.Sort = sortExpression + " DESC"; 
GridView.DataSource = myDataView; 
GridView.DataBind(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T20:28:31.550

必须解决我的问题的代码：

```
protected void SortBySizeButton_Click(object sender, EventArgs e)
{
    DataView myDataView = new DataView(GetFiles()); //GetFiles is protected DataTable that populates my DataGrid :)
    myDataView.Sort = "size " + " DESC"; // size is the SortExpression
    dgFile.DataSource = myDataView;
    dgFile.DataBind();
} 
```

就这样！:)

# plugins - 如何从 Jekyll 中的 Liquid 块生成文件？

> ID：12124821
> 
> 赞同：2
> 
> 时间：2012-08-25T19:03:41.050
> 
> 标签：plugins, jekyll, liquid

我正在编写一个定义新 Jekyll 块的[插件](https://gist.github.com/3469301)`ditaa`。块中的任何内容都应从[Ditaa 标记](http://ditaa.sourceforge.net/)转换为图像文件，并将该图像插入帖子而不是块中。生成文件有效，但是当复制到目录或在`_site`目录中生成时，文件显然被删除了。

是否有适当/更好的方法来实现生成自定义资产的块插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-10T14:14:15.827

我找到了*正确的*解决方案：**使用`Jekyll::StaticFile`class**。

当您将此类的一个对象添加到数组中时，您将在渲染过程完成**后**`site.static_files`将此文件标记为待复制。实际上，此类文件的复制是在此过程中完成的。查看 Jekyll 安装中的文件。**`site.write``site_process.rb`**

 **这个类的使用很简单。当您需要标记文件以供将来复制时，您只需执行如下代码：

```
site.static_files << Jekyll::StaticFile.new(site, site.source, path, filename) 
```

`path`位置和`filename`位置取决于文件夹中文件的位置`src`。

我在开发 LaTeX -> PNG 液体标签时遇到了类似的问题。您可以在 GitHub 上查看我的代码：[https ://github.com/fgalindo/jekyll-liquid-latex-plugin](https://github.com/fgalindo/jekyll-liquid-latex-plugin)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T11:40:42.510

我还没有找到正确*的*方法来做到这一点，但是一种有效的方法。该解决方案可以在[GitHub](https://github.com/matze/jekyll-ditaa)上找到，并使用 Jekylls 功能将任何不带下划线前缀的内容复制到`_site`目录中。但是，这种方法也有两个缺点：

1.  “源”目录被自动生成的文件污染
2.  没有自动重新生成的部署有点尴尬，因为图像是在Jekyll 已经复制所有文件*之后生成的。*所以第二次 Jekyll 运行是必要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-04T16:48:20.067

我找到了答案。

替换这个

```
site.static_files << Jekyll::StaticFile.new(site, site.source, path, filename) 
```

和

```
gnufile = GNUplotFile.new(site, site.source, "_site/media/", "#{@file}")
gnufile.givemethecommands commands
site.static_files << gnufile 
```

并创建一个`GNUplotFile`继承 Jekyll::StaticFile 的类

```
class GNUplotFile < Jekyll::StaticFile
  def write(dest)
    puts "WRITE---->>>>>>>>>>>"
    #File.write('_site/media/BTTTTT.svg', DateTime.now)
    gnuplot(@commands)
    # do nothing
  end
  def gnuplot(commands)
    IO.popen("gnuplot", "w") { |io| io.puts commands }
  end
  def givemethecommands(commands)
    @commands = commands
  end
end 
```

写命令在清理过程之后运行。我只有一个 Liquid 块和上面的代码。**

# java - Java Swt - 调整动画大小。每次布局更改后如何重绘？

> ID：12124828
> 
> 赞同：2
> 
> 时间：2012-08-25T19:05:48.260
> 
> 标签：java, swt

我有一`MyComposite`堂课，我想在其中设置大小变化的动画。
为此，我正在循环更改大小。
每次循环后，我都会调用`layout()`.

不幸的是，Composite 不会在每次迭代后重新绘制，而是直接跳转到我的 Composite 的最终大小。

如何强制小部件在每次尺寸更改时重绘？

**MyComposite 和动画**：

```
 //start
new Animation().start(myComposite);

...

public MyComposite(Composite parent, int style, int bgcolor) {
        super(parent, style);
        this.setBackground(getDisplay().getSystemColor(bgcolor));       
    }

    @Override
    public Point computeSize(int wHint, int hHint, boolean changed) {
        return super.computeSize(width, height, changed);
    }

    class Animation{
        public void start(MyComposite composite){
            for(int i=0; i<1000; i++){
                composite.width++;
                composite.getParent().layout(true, true);
            }
        }
    } 

```

**我的复合**：

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T13:48:13.803

重绘工作如下：

*   **layout()**标记强制重新定位所有复合子项。这将在下一次重绘时变得可见，这将在未来某个地方完成，当复合的屏幕区域将被重绘时
*   **redraw()**将小部件标记为无效。在下一次重绘系统操作时，该区域将被重新绘制。
*   **update()**强制所有未完成的 redraw() 请求现在完成。

所以问题是，我没有立即触发重绘请求。正确的动画函数如下所示：

```
 //layout of the composite doesn't work
//composite.layout(true, true);

//layout of parent works
composite.getParent().layout(true, true);

//marks the composite's screen are as invalidates, which will force a 
composite.redraw(); redraw on next paint request 

//tells the application to do all outstanding paint requests immediately
composite.update(); 

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T22:49:12.683

我相信您的问题是所有内容都在单个显示线程上执行。因此，您的代码会快速调用 width++ 和 .layout，然后该调用结束，显示线程最终有机会实际执行 .layout。

我建议查看在自己的线程中运行的 java.util.Timer，然后使用 Display.getDefault().asyncExec 或 .syncExec 将这些事件排队回显示线程。

# scala - 为什么（复制）在 Scala 中附加到 Seq 被定义为 :+ 而不仅仅是在 Set 和 Map 中的 +？

> ID：12124834
> 
> 赞同：25
> 
> 时间：2012-08-25T19:06:35.377
> 
> 标签：scala, scala-collections

Scala 的 Map 和 Set 定义了一个`+`运算符，该运算符返回数据结构的副本，并附加一个元素。的等价运算符`Seq`表示为`:+`。

这种不一致有什么原因吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-25T19:16:41.370

Map 和 Set 没有前置 ( `+:`) 或附加 ( `:+`) 的概念，因为它们没有排序。添加了指定您使用的（附加或前置）`:`。

```
scala> Seq(1,2,3):+4
res0: Seq[Int] = List(1, 2, 3, 4)

scala> 1+:Seq(2,3,4)
res1: Seq[Int] = List(1, 2, 3, 4) 
```

不要对参数的顺序感到困惑，在 scala 中，如果方法以 :[它以相反的顺序应用](https://stackoverflow.com/questions/2827293/scala-operator-how-it-works)（不是 a.method(b) 而是 b.method(a)）

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-27T22:15:21.267

仅供参考，接受的答案根本不是原因。这就是原因。

```
% scala27
Welcome to Scala version 2.7.7.final (Java HotSpot(TM) 64-Bit Server VM, Java 1.7.0_06).

scala> Set(1, 2, 3) + " is the answer"
res0: java.lang.String = Set(1, 2, 3) is the answer

scala> List(1, 2, 3) + " is the answer"
warning: there were deprecation warnings; re-run with -deprecation for details
res1: List[Any] = List(1, 2, 3,  is the answer) 
```

永远不要低估像any2stringadd 这样的卷须有多长。

# twitter-bootstrap - 使用 Knockout 填充引导行和跨度

> ID：12124835
> 
> 赞同：6
> 
> 时间：2012-08-25T19:06:41.243
> 
> 标签：twitter-bootstrap, knockout.js, knockout-2.0

好吧，基本上我正在尝试通过 Knockout 和 JSON 对象填充 Bootstrap 模板。

### 引导脚手架：

```
<div class="row-fluid">
    <div class="span4">
        <h1>App Title</h1>
        <p>App Description</p>
    </div>
    <div class="span4">
        <h1>App Title</h1>
        <p>App Description</p>
    </div>
    <div class="span4">
        <h1>App Title</h1>
        <p>App Description</p>
    </div>
</div>
<div class="row-fluid">
    <div class="span4">
        <h1>App Title</h1>
        <p>App Description</p>
    </div>
    <div class="span4">
        <h1>App Title</h1>
        <p>App Description</p>
    </div>
    <div class="span4">
        <h1>App Title</h1>
        <p>App Description</p>
    </div>
</div>
... 
```

### 这是我们正在使用的 Knockout 代码：

```
var viewModel;

$.get('AppData.json', function (data) {
    jsonData = $.parseJSON(data);
    viewModel = ko.mapping.fromJS(jsonData);
    var apps = viewModel.Apps();
    ko.applyBindings(viewModel);
}); 
```

问题是，在运行索引模 3 的淘汰赛条件后，我无法让淘汰赛注入`</div><div class="row-fluid">`所需的……我假设是因为这些`<div>`标签悬空/未关闭。

**简而言之，如何让`viewModel.Apps();`'s 对象数组适合上述 Bootstrap 脚手架？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-25T19:22:30.010

制作一个计算出的 observable，它将`apps`observable/observable 数组分割成三个元素的数组，然后通过绑定将一些根元素绑定到它`foreach`。像这样的东西。

可观察的：

```
viewModel.appRows = ko.computed(function() {
    var apps = this.Apps();
    var result = [];
    for (var i = 0; i < apps.length; i += 3) {
        var row = [];
        for (var j = 0; j < 3; ++j) {
            if (apps[i + j]) {
                row.push(apps[i + j]);
            }
        }
        result.push(row);
    }
    return result;
}, viewModel); 
```

标记：

```
<div class="container" data-bind="foreach: appRows">
    <div class="row-fluid" data-bind="foreach: $data">
        <div class="span4">
            <h1 data-bind="text: title"></h1>
            <p data-bind="text: description"></p>
        </div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-11T19:21:06.547

我必须自己解决一个非常相似的问题：使用可观察数组但使用 bootstrap v3 和 ko v3.0 渲染引导网格。我将把我的解决方案留在这里以供将来参考。

我使用的是普通函数而不是计算函数，因为默认情况下使用它们实现绑定（请参阅此处的 RP Niemeyer 答案[https://stackoverflow.com/a/6712389/323751](https://stackoverflow.com/a/6712389/323751)）

在我的视图模型中：

```
this.partitioned = function (observableArray, count) {
    var rows, partIdx, i, j, arr;

    arr = observableArray();

    rows = [];
    for (i = 0, partIdx = 0; i < arr.length; i += count, partIdx += 1) {
        rows[partIdx] = [];
        for (j = 0; j < count; j += 1) {
            if (i + j >= arr.length) {
                break;
            }
            rows[partIdx].push(arr[i + j]);
        }
    }
    return rows;
}; 
```

模板：

```
<div data-bind="foreach: partitioned(userProjects, 3)">
  <div class="row"
       data-bind="template: { name: 'projectCell', foreach: $data }"></div>
</div>

<script id="projectCell" type="text/html">
  <div class="col-md-4" data-bind="text: name"></div>
</script> 
```

希望有人觉得这很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-17T11:27:59.147

我正在使用 bootstrap3 并希望每行有 x 个对象，其中 x 取决于窗口大小，例如 col 类。

例如，我有类元素：

```
col-lg-2 col-md-2 col-sm-3 col-xs-4 
```

所以

如果 xs 则一行有 3 个项目

如果 lg 那么一行有 6 个项目...

我扩展了 rkhayrov 的答案以使其发挥作用

```
/* determine the current bootstrap environment */
function findBootstrapEnvironment() {
    var envs = ['xs', 'sm', 'md', 'lg'];

    $el = $('<div>');
    $el.appendTo($('body'));

    for (var i = envs.length - 1; i >= 0; i--) {
        var env = envs[i];

        $el.addClass('hidden-'+env);
        if ($el.is(':hidden')) {
            $el.remove();
            return env
        }
    };
}

/* determine How many objs per row */
function determineObjectsPerRow(){
    switch(findBootstrapEnvironment()) {
        case 'xs':
            return 3;
            break;
        case 'sm':
            return 4;
            break;
        case 'md':
            return 6;
            break;
        case 'lg':
            return 6;
            break;
    }
}

        var objsPerRow= determineObjectsPerRow();

        for (var i = 0; i < apps.length; i += objsPerRow) {
            var row = [];
            for (var j = 0; j < objsPerRow; ++j) {
                if (apps[i + j]) {
                    row.push(apps[i + j]);
                }
            }
            result.push(row);
        } 
```

我添加了对宽度和高度的依赖，它们是可观察的所以如果调整窗口大小，将重新计算函数

```
var base = {
    AppModel:function (data) {
        var self = this;
        self.data = ko.observable({
            documents:ko.observableArray([]),
            width:ko.observable($(window).width()),
            height:ko.observable($(window).height())
        });

        /* calculate rows based on bootstrap environment */
        self.appRows = ko.computed(function() {
            self.data().height();
            self.data().width();
            var apps = self.data().documents();
            var result = [];
            var objsPerRow= determineObjectsPerRow();

            for (var i = 0; i < apps.length; i += objsPerRow) {
                var row = [];
                for (var j = 0; j < objsPerRow; ++j) {
                    if (apps[i + j]) {
                        row.push(apps[i + j]);
                    }
                }
                result.push(row);
            }
            return result;
        }, self); 

    },
}; 
```

和调整大小处理程序

```
$(window).resize(function(event) {
    vm.data().height($(window).height());
    vm.data().width($(window).width());
}); 
```

它就像 Charme 一样工作，为每个设备宽度很好地生成了行

如果有人需要达到同样的效果，我把它留在这里

# html - 将 Html 导航转换为 Wordpress

> ID：12124843
> 
> 赞同：-1
> 
> 时间：2012-08-25T19:07:55.180
> 
> 标签：html, wordpress, navigation, nav, navbar

我正在尝试转换此导航菜单

```
 <ul class="main-navigation">
        <li class="current"><a href="#">home</a></li>
        <li><a href="#">exhibitions</a></li>
        <li><a href="#">artists</a></li>
        <li><a href="#">contact</a></li>

    </ul> 
```

进入 wordpress 导航菜单，我相信它只是一点点代码。但不确定

希望有人可以帮助

丹佛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-03T20:18:20.643

在孩子的主题 functions.php 文件中添加以下内容：

```
function register_header_menu() {
  register_nav_menu('header-menu',__( 'Header Menu' ));
}
add_action( 'init', 'register_header_menu' ); 
```

然后将此部分粘贴到您希望导航位于模板中的位置下方我猜是 header.php

```
<?php wp_nav_menu( array( 'theme_location' => 'header-menu' ) ); ?> 
```

在 WordPress 中添加链接并使用 CSS 设置样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T19:12:57.873

您是想制作自己的主题还是只是想在 wordpress 安装中编辑导航栏？如果您正在尝试制作主题，请查看[此信息](http://codex.wordpress.org/Navigation_Menus)。如果您尝试在安装时编辑导航栏，您应该可以在管理面板中更改我认为的任何代码。

编辑：这是通过[管理面板执行此操作的信息](http://codex.wordpress.org/Appearance_Menus_Screen)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T19:16:23.023

我会通过 WP 管理面板添加链接，然后在您自己的主题中单独设置它们的样式。这样，即使在可能会破坏您尝试用于自定义菜单的自定义代码的重大 WP 更新之后，您的导航也应该保持活动状态。

# c# - UserControl.ParentForm 为空

> ID：12124844
> 
> 赞同：2
> 
> 时间：2012-08-25T19:07:55.503
> 
> 标签：c#, winforms, forms, user-controls

我正在开发一个表单，该表单根据组合框中的选定索引显示几个用户控件之一。该表单用于添加和编辑包含不同数据字段的不同类型的项目（即服务、库存、非库存等）。用户控件需要访问表单上的一些控件才能持久化 Linq-to-SQL 对象。

我遇到的问题是值`UserControl.ParentForm`总是返回null。我意识到理想情况下控件不应该与表单紧密耦合，但是，在考虑我的重构选项之前，我想了解为什么会发生这种情况。

下面，我在表单中包含了添加用户控件的方法和尝试获取 ParentForm 的控件中的方法。有人可以给我建议为什么 ParentForm 可能是 NULL 吗？

表格代码：

```
void comboBoxEditType_SelectedIndexChanged(object sender, EventArgs e)
{
    string value = comboBoxEditType.SelectedItem.ToString();

    if (value == "DiscountItem")
    {
        if (itemControl != null)
            this.Controls.Remove(itemControl);

        labelControlDescriptionOfType.Text = "Use to subtract a percentage or fixed amount from a total or subtotal. "
                                           + "Do not use this item type for an early payment discount.";

        DiscountItemControl control = new DiscountItemControl();
        control.Location = new Point(13, 110);
        this.Controls.Add(control);
        itemControl = control;
    }
    else if (value == "InventoryItem")
    {
        if (itemControl != null)
            this.Controls.Remove(itemControl);

        labelControlDescriptionOfType.Text = "Use for goods you purchase, track as inventory, and resell.";

        InventoryItemControl control = new InventoryItemControl();
        control.Location = new Point(13, 110);
        this.Controls.Add(control);
        itemControl = control;
    }
    else if (value == "NonInventoryItem")
    {
        if (itemControl != null)
            this.Controls.Remove(itemControl);

        labelControlDescriptionOfType.Text = "Use for goods you buy but don't track, like office supplies, "
                                           + "or materials for a specific job that you charge back to the customer.";

        NonInventoryPartItemControl control = new NonInventoryPartItemControl();
        control.Location = new Point(13, 110);
        this.Controls.Add(control);
        itemControl = control;
    }
    else if (value == "OtherChargeItem")
    {
        if (itemControl != null)
            this.Controls.Remove(itemControl);

        labelControlDescriptionOfType.Text = "Use for miscellaneous labor, material, or part charges, such as delivery charges, "
                                           + "setup fees, and service charges.";

        OtherChargeItemControl control = new OtherChargeItemControl();
        control.Location = new Point(13, 110);
        this.Controls.Add(control);
        itemControl = control;
    }
    else if (value == "ServiceItem")
    {
        if (itemControl != null)
            this.Controls.Remove(itemControl);

        labelControlDescriptionOfType.Text = "Use for services you charge for or purchase, like specialized labor, consulting hours, or "
                                           + "professional fees.";

        ServiceItemControl control = new ServiceItemControl();
        control.Location = new Point(13, 110);
        this.Controls.Add(control);
        itemControl = control;
    }

    // Move the location of buttons
    int btnX = 12 + itemControl.Width + 10;
    btnSaveAndClose.Location = new Point(btnX, btnSaveAndClose.Location.Y);
    btnSaveAndNew.Location = new Point(btnX, btnSaveAndNew.Location.Y);
    btnCancel.Location = new Point(btnX, btnCancel.Location.Y);

    // Center the Make Inactive CheckBox on side of UserControl
    Point point = new Point();
    point.X = btnCancel.Location.X;
    point.Y = itemControl.Location.Y + itemControl.Size.Height / 2;
    checkEditMakeInactive.Location = point;

    // Resize the window to fit fit the control
    int windowWidth = 140 + itemControl.Width;
    int windowHeight = 150 + itemControl.Height;
    this.Size = new Size(windowWidth,windowHeight);

    // Resize the group containing information on the item type
    int groupWidth = itemControl.Width;
    int groupHeight = groupControlType.Height;
    groupControlType.Size = new Size(groupWidth, groupHeight);
    //this.groupControlType.Size

    // Resize the label
    int labelWidth = itemControl.Width - 27 - comboBoxEditType.Size.Width;
    labelControlDescriptionOfType.Size = new Size(labelWidth, labelControlDescriptionOfType.Height);
} 
```

尝试获取 ParentForm 的用户控制代码（始终返回 NULL）

```
private void CopyItemDataFromForm()
{
    currentDiscountItem.Name = textEditItemName_Number.Text;
    if (checkEditSubItemOf.Checked)
    {
        currentDiscountItem.fkParentItem = ComboBoxHelper.getItemFromComboBox(comboBoxEditParentItem);
    }
    currentDiscountItem.SalesDescription = memoEditDescription.Text;
    currentDiscountItem.SalesPrice = Convert.ToDecimal(textEditAmountOrPercent.Text);
    currentDiscountItem.fkIncomeAccount = ComboBoxHelper.getQBLookUpFromComboBox(comboBoxEditAccount);
    currentDiscountItem.fkTaxCode = ComboBoxHelper.getQBLookUpFromComboBox(comboBoxEditTaxCode);

    AddEditItemForm form = this.ParentForm as AddEditItemForm;
    currentDiscountItem.IsActive = !(form.GetMakeInactiveCheckboxValue());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T19:31:44.513

您可以尝试使用 Parent 属性，在对象树中获取此 FrameworkElement 的父对象。

```
var result = this.Parent; 
```

# php - 有没有为 LAMP 堆栈配置 Visual Studios 2010 作为主要用途？

> ID：12124847
> 
> 赞同：1
> 
> 时间：2012-08-25T19:09:01.073
> 
> 标签：php, javascript, jquery, visual-studio-2010, visual-studio

我在过去的 C# 开发中使用 Visual Studios 取得了巨大成功，但现在我的主要关注点是使用 PHP 作为服务器端脚本的 LAMP 堆栈。我有这方面的工具，但是我在最近的 Visual Studios 教程中看到了一些我想尝试的功能（特别是 jQuery 扩展）。如果有的话，我正在寻找其他人用作主要开发工具和/或用作辅助工具的方式。我正在考虑只为我的 LAMP 堆栈中的那些菜单项最小化未使用的菜单项，即 PHP、MySQL、html、css、JavaScript 和这些的框架。

并且，我不是在寻找一场可以锁定这一点的辩论，但如果其他人走这条路并决定 VS 不适合 LAMP 或至少 LAMP 的服务器端部分，我会很感兴趣。

# django - 为什么我会收到警告：当 mysql-python 安装成功时，找不到与“MANIFEST”、“ChangeLog”、“GPL”匹配的文件

> ID：12124852
> 
> 赞同：1
> 
> 时间：2012-08-25T19:10:09.847
> 
> 标签：django, virtualenv, mysql-python

在 ubuntu 上使用 pip 在 vi​​rtualenv 中安装 mysql-python 时，安装成功，但出现以下警告：

警告：找不到匹配“清单”的文件警告：找不到匹配“更改日志”的文件警告：找不到匹配“GPL”的文件

有谁知道为什么？这是我需要担心的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:31:28.707

这些文件对于运行 MySQLdb 并不重要，但它们应该包含在内，如果可能的话，我会在下一个版本中解决这个问题。（在 1.2.4 测试版中修复）

# c# - 尝试下载图像但服务器未发送数据

> ID：12124854
> 
> 赞同：1
> 
> 时间：2012-08-25T19:10:26.623
> 
> 标签：c#, wget

我正在尝试使用 C# 下载此图像

[http://www.pinkice.com/data/product_image/1/13954Untitled-1.jpg](http://www.pinkice.com/data/product_image/1/13954Untitled-1.jpg)

当我尝试使用 WebClient 下载它时，我收到一个异常，提示底层连接意外关闭。

我尝试修改标题以模拟 chrome

```
Headers[HttpRequestHeader.Accept] = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
Headers[HttpRequestHeader.AcceptLanguage] = "en-US,en;q=0.8";
Headers[HttpRequestHeader.CacheControl] = "max-age=0";
Headers[HttpRequestHeader.UserAgent] = "Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.6 (KHTML, like Gecko) Chrome/23.0.1243.2 Safari/537.6"; 
```

这没有用。然后我试图看看它是否甚至可以与 wget

```
wget "http://www.pinkice.com/data/product_image/1/14231Untitled-2.jpg" 
```

这导致

```
HTTP request sent, awaiting response... No data received. Retrying. 
```

任何人都可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T19:28:17.317

下面的代码有效..

```
using (WebClient wc = new WebClient())
{

    wc.Headers["User-Agent"] = "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.83 Safari/537.1";
    byte[] buf = wc.DownloadData("http://www.pinkice.com/data/product_image/1/13954Untitled-1.jpg");
    Image bmp = Image.FromStream(new MemoryStream(buf));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T02:52:00.317

问题是我正在重用 WebClient 对象。我认为当 If-Modified-Since 标头中有 304 HTTP 状态代码时，它会奇怪地缓存一些东西。故事的寓意是不要尝试重用 WebClient 对象。

# c# - 检查用户是否在 Orchard CMS 中获得授权

> ID：12124855
> 
> 赞同：4
> 
> 时间：2012-08-25T19:10:29.983
> 
> 标签：c#, javascript, asp.net-mvc, razor, orchardcms

我正在为 Orchard CMS 编写模块，只有在用户获得授权的情况下，我才需要显示我的内容类型的所有部分。我可以在我的模块 (.cshtml) 视图中执行此操作吗？

关于这个：

```
if(<statement_about_authorization>)
   @T("part_1"): @Model.part_1<br />
else
   @T("part_2"): @Model.part_2<br /> 
```

或者也许用javascript？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T01:02:34.510

普通的 User.Identity.IsAuthenticated 可以工作，但 Orchard 也有一种很好的方式来根据定义的权限授权您的用户......

```
@if(Authorizer.Authorize(Permissions.PermissionName){

} 
```

您可以在此处阅读有关定义权限的更多信息：[Orchard Permissions](http://docs.orchardproject.net/Documentation/Understanding-permissions "果园许可")

以及博客模块中关于如何定义自己的权限的示例：[博客权限示例](http://orchard.codeplex.com/SourceControl/changeset/view/95f0539354b2#src/Orchard.Web/Modules/Orchard.Blogs/Permissions.cs "权限.cs")

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T06:27:09.747

我从来没有弄乱过 Orchard，但是在带有 asp.net 表单身份验证的 MVC 中，它看起来像这样：

```
if(User.Identity.IsAuthenticated)
    @T("part_1"): @Model.part_1<br />
else
    @T("part_2"): @Model.part_2<br /> 
```

通过一些谷歌搜索，看起来这也适用于 Orchard。

# php - 在 html 错误中包含 PHP 代码

> ID：12124856
> 
> 赞同：0
> 
> 时间：2012-08-25T19:10:41.180
> 
> 标签：php, html, image

我正在处理一个小型 php 项目。在创建文本生成图像时。拿了一些示例代码，累了。

```
 <?php

$im = imagecreatetruecolor(120, 20);
$text_color = imagecolorallocate($im, 233, 14, 91);
imagestring($im, 1, 5, 5,  'A Simple Text String', $text_color);

header('Content-Type: image/jpeg');

imagejpeg($im);

imagedestroy($im);
?> 
```

我做了一些改变，效果很好。当我尝试将此 php 文件插入到其他 html 文件中时，使用它会导致图像损坏。我该如何解决这个为什么会发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T19:12:05.883

请确保您的`<?php`陈述前没有任何空格。在上面的示例中，在`<?php`. 请注意，这对于空行也很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T05:09:49.960

您不能将同一页面同时作为 HTML 和图像。您做您想做的事的方式是让 HTML 文件包含一个`IMG`引用此脚本的标记。

```
<img src="yourscript.php"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T21:04:46.037

一个 HTML 文件不能有多个标题部分。在页面上呈现内容后，调用`header()`将生成错误。

# java - 删除多个换行符

> ID：12124859
> 
> 赞同：7
> 
> 时间：2012-08-25T19:11:23.833
> 
> 标签：java

如何从字符串中删除多个换行符，这样我只能得到一个换行符（如果有的话）。例如我有一个字符串`"\r\n\r\n\r\n\r\n\r\n\r\n\r\n"`，我怎样才能把它变成一个字符串`'\n'`？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-25T19:15:37.037

你可以使用：

```
myString = myString.replaceAll("[\r\n]+", "\n"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-10T09:00:13.360

在Android中，我设法用这个删除了两个以上的换行符

```
textPiece = textPiece.replaceAll("\n\n\n+", "\n\n"); 
```

# entity-framework - DomainClasses 层或 DataAccess 层中的实体框架流利配置？

> ID：12124860
> 
> 赞同：0
> 
> 时间：2012-08-25T19:11:35.570
> 
> 标签：entity-framework

用于将实体映射到数据库的实体框架 Fluent 配置（继承自 EntityTypeConfiguration<> 或 ComplexTypeConfiguration<>）必须包含在 DomainClasses 层或 DataAccess 层中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T20:41:28.013

映射的目的是什么？描述实体如何在数据库中持久化以及哪个层负责持久化和数据库依赖关系？数据访问层。

# fonts - 在 Graphics2D 中更改字体背景颜色

> ID：12124861
> 
> 赞同：1
> 
> 时间：2012-08-25T19:11:38.363
> 
> 标签：fonts, background-color, graphics2d

我正在使用 Graphics2D.drawString() 在 Graphics2d 中绘制各种字符串。这很好用，但我似乎无法更改字符串的背景颜色；它在渲染时总是使用初始（在本例中为白色）背景颜色。

我可以通过获取字体的边界框来模拟这种效果，在从字体的基线位置和高度挖出的位置根据其大小绘制一个填充的矩形，但这令人不快，至少在我的情况下，不太正确 - 对齐相对于文本的填充矩形的比例略高。

我不能在我的 drawString() 调用之前调用 g2d.setBackground(color) 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T22:30:23.960

我可能弄错了，但是您是否要更改文本颜色或文本背后的背景？

如果您只是更改文本颜色，您所需要的只是

```
g2d.setColor(Color.RED); //or whatever your desired color is 
```

在您绘制的任何文本之前。

除了在文本后面填充一个矩形之外，我不知道有一种方法可以在文本后面设置背景。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-27T15:22:11.040

不，DrawString 不会填充文本背景。相反，您可以在 DrawString 之前绘制一个填充的矩形。正如你所提到的，它并不总是看起来很正确。一种可行的方法是使用 g2d.MeasureString 获取文本矩形，然后将其扩展一点。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-25T20:00:59.407

也许尝试 setForeground(Color)

# android - ActionBarSherlock 中的 PopupMenu 等效项

> ID：12124868
> 
> 赞同：8
> 
> 时间：2012-08-25T19:12:25.757
> 
> 标签：android, actionbarsherlock

ActionBarSherlock中的[PopupMenu等价物是什么？](http://developer.android.com/reference/android/widget/PopupMenu.html)我似乎找不到它。它的 API 11，为什么没有？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-05T14:51:17.647

类[MenuPopupHelper](https://github.com/android/platform_frameworks_base/blob/master/core/java/com/android/internal/view/menu/MenuPopupHelper.java)几乎可以完成这项工作。虽然我没有找到一种简单的方法来监听 Item Clicks，所以我实现了这个派生自 MenuPopupHelper 的类：

```
public class MenuPopup extends MenuPopupHelper {

    OnMenuItemClickListener onMenuItemClickListener;

    public MenuPopup(Context context, MenuBuilder menu, View anchorView) {
        super(context, menu, anchorView);
    }

    public void setOnMenuItemClickListener(
            OnMenuItemClickListener onMenuItemClickListener) {
        this.onMenuItemClickListener = onMenuItemClickListener;
    }

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {
        super.onItemClick(parent, view, position, id);
        if (onMenuItemClickListener != null)
            onMenuItemClickListener.onMenuItemClick(position);
    }

    public interface OnMenuItemClickListener{
        public void onMenuItemClick(int itemID);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-05T05:35:57.557

添加`PopupMenu`在[ActionBarSherlock](https://github.com/mihirjoshi21/ActionBarSherlock)中。

造型`PopupMenu`——

```
<item name="popupMenuStyle">@style/PopupMenu.MyAppTheme</item>      

<style name="PopupMenu.MyAppTheme" parent="@style/Widget.Sherlock.ListPopupWindow">
    <item name="android:popupBackground">@android:color/white</item>
</style> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T02:10:00.650

我目前正在做这件事。我按照 CommonsWare 的建议进行了反向移植。我基本上采用了 PopupMenu.java 源代码并将包导入替换为 actionbarsherlock 等效项。它似乎在我测试过的姜饼和 ics 设备上运行良好。但问题是在 actionbarsherlocks MenuPopupHelper 类中，我不得不评论引用 View_HasStateListenerSupport 的行，例如：

```
((View_HasStateListenerSupport)anchor).addOnAttachStateChangeListener(this); 
```

由于某些原因。如果我不这样做，我会得到一个 ClassCastException：

> E/AndroidRuntime(9197): 致命异常: 主要 E/AndroidRuntime(9197): java.lang.ClassCastException: android.widget.Button 不能转换为 com.actionbarsherlock.internal.view.View_HasStateListenerSupport E/AndroidRuntime(9197): at com.actionbarsherlock.internal.view.menu.MenuPopupHelper.tryShow(MenuPopupHelper.java:121) E/AndroidRuntime(9197)：在 com.actionbarsherlock.internal.view.menu.MenuPopupHelper.show(MenuPopupHelper.java:102)

我不确定注释掉该侦听器是否会导致其他使用 MenuPopupHelper 的类出现问题，或者它们为什么会导致此异常（可能是错误）。但我想我会分享我尝试过的东西，所以它可以帮助任何研究这个问题的人。

# java - Tomcat - 无法为 JSP 编译类

> ID：12124871
> 
> 赞同：0
> 
> 时间：2012-08-25T19:12:59.113
> 
> 标签：java, jsp, tomcat, web

我在本地开发机器上运行 Tomcat 7，我的 Web 应用程序运行良好，将其移动到服务器（也运行 Tomcat 7），我开始收到错误 500，抱怨无法编译一些 JSP。我已经重新启动了服务器，但仍然没有修复它。这是我最近的日志。可能是什么问题呢？

这是我在尝试访问上下文根目录下的 index.jsp 时得到的屏幕截图（所有其他页面也一样）[https://docs.google.com/open?id=0B62YJhbvaJNkN3hjTUpEMVp1eUk](https://docs.google.com/open?id=0B62YJhbvaJNkN3hjTUpEMVp1eUk) 他们可能会在大约之后加载的东西4 刷新。我还看到了一些 permGen 的东西。请我需要帮助。谢谢！

```
 Aug 25, 2012 5:05:29 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [LoginChurch] in context with path [/ReligionApp] threw exception [Servlet execution threw an exception] with root cause
java.lang.OutOfMemoryError: PermGen space
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2818)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1148)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1643)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1521)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:334)
    at com.mchange.v2.c3p0.C3P0Registry.reregister(C3P0Registry.java:239)
    at com.mchange.v2.c3p0.impl.DriverManagerDataSourceBase.<init>(DriverManagerDataSourceBase.java:212)
    at com.mchange.v2.c3p0.DriverManagerDataSource.<init>(DriverManagerDataSource.java:60)
    at com.mchange.v2.c3p0.DriverManagerDataSource.<init>(DriverManagerDataSource.java:56)
    at com.mchange.v2.c3p0.DataSources.unpooledDataSource(DataSources.java:152)
    at org.hibernate.connection.C3P0ConnectionProvider.configure(C3P0ConnectionProvider.java:154)
    at org.hibernate.connection.ConnectionProviderFactory.newConnectionProvider(ConnectionProviderFactory.java:124)
    at org.hibernate.connection.ConnectionProviderFactory.newConnectionProvider(ConnectionProviderFactory.java:56)
    at org.hibernate.cfg.SettingsFactory.createConnectionProvider(SettingsFactory.java:414)
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:62)
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2009)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1292)
    at org.hibernate.cfg.AnnotationConfiguration.buildSessionFactory(AnnotationConfiguration.java:859)
    at com.pacesolutions.religionapp.HibernateUtil.<clinit>(HibernateUtil.java:24)
    at com.pacesolutions.religionapp.services.LoginChurch.processRequest(LoginChurch.java:68)
    at com.pacesolutions.religionapp.services.LoginChurch.doPost(LoginChurch.java:140)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:306)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:496)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
Aug 25, 2012 5:06:04 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [LoginChurch] in context with path [/ReligionApp] threw exception [Servlet execution threw an exception] with root cause
java.lang.NoClassDefFoundError: Could not initialize class com.pacesolutions.religionapp.HibernateUtil
    at com.pacesolutions.religionapp.services.LoginChurch.processRequest(LoginChurch.java:68)
    at com.pacesolutions.religionapp.services.LoginChurch.doGet(LoginChurch.java:127)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:306)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:496)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:541)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:383)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:243)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:288)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:636)
Aug 25, 2012 5:11:50 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [LoginChurch] in context with path [/ReligionApp] threw exception [Servlet execution threw an exception] with root cause
java.lang.NoClassDefFoundError: Could not initialize class com.pacesolutions.religionapp.HibernateUtil
    at com.pacesolutions.religionapp.services.LoginChurch.processRequest(LoginChurch.java:68)
    at com.pacesolutions.religionapp.services.LoginChurch.doPost(LoginChurch.java:140)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:306)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:496)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:541)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:383)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:243)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:288)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:636)
Aug 25, 2012 7:18:05 AM org.apache.catalina.core.ApplicationContext log
INFO: ContextListener: contextInitialized()
Aug 25, 2012 7:18:05 AM org.apache.catalina.core.ApplicationContext log
INFO: SessionListener: contextInitialized()
Aug 25, 2012 7:18:05 AM org.apache.catalina.core.ApplicationContext log
INFO: SessionListener: contextDestroyed()
Aug 25, 2012 7:18:05 AM org.apache.catalina.core.ApplicationContext log
INFO: ContextListener: contextDestroyed() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T23:03:27.183

另一个问题是 PermGenSpace OOM 错误导致的未找到类。所以在这种情况下它是不相关的。哪个用户正在运行 tomcat 服务器？是root用户还是其他用户？该用户是否有权写入提供的堆栈跟踪中最后一个根本原因所声明的目录？见`FileNotFoundException`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T19:17:16.437

永久空间是 VM 存储类、方法（以及其他）的地方。由于 tomcat 动态编译类，它可以使用太多具有固定上限（通常为 64Mb）的空间。

`-XX:MaxPermSize`尝试使用该选项为 tomcat 提供更多 permgen 空间。

看看这篇文章的解释：http: [//java.sun.com/docs/hotspot/gc/](http://java.sun.com/docs/hotspot/gc/)

# c# - 如何将对象的属性绑定到另一个对象的属性？（C＃）

> ID：12124877
> 
> 赞同：0
> 
> 时间：2012-08-25T19:13:45.957
> 
> 标签：c#

我正在制作一个`Info`应该在屏幕上显示一些文本的图形控件类。文本是某个对象的字符串。我希望能够从`Info`类的实例中获取该对象的最新值。

```
class Info
{
    public string Text;
}

void Program()
{
    ClassA obj = new ClassA();
    obj.name = "Instance of ClassA";
    Info wind1 = new Info();
    wind1.Text = obj.name; // this just copies current value, but should be a reference or something 

    /* obj.name value changes several times before it's time to display it again */

    // Info window drawing method
    foreach (var item in Windows) // Windows is List<Info>
    Draw(item.Text); // this doesn't get the latest value
} 
```

我应该如何更改代码以便从绘图部分中获取最新的字符串值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T19:19:51.667

**更新：**如果您需要适用于任何类型的东西，则必须使用委托。例如：

```
class Info
{
    private Func<string> getText;

    public Info(Func<string> getText)
    {
        getText = getText;
    }

    public string Text
    {
        get
        {
            return getText();
        }
    }
}

void Program
{
    ClassA obj = new ClassA();
    obj.name = "Instance of ClassA";
    Info wind1 = new Info(() => obj.name);

    // Now do your stuff.
} 
```

在这种情况下，`Info`给定一个返回字符串的*匿名函数*。当您访问其`Text`属性时，将评估该函数以检索该字符串。如何检索字符串以及它来自何处，由客户端代码（即`Program`方法）决定。这样，`Info`不依赖于任何特定类型。

* * *

您可以将`ClassA`对象传递到您的`Info`实例中，以便它可以获取`.name`自身的值。

大概是这样的吧？

```
class Info
{
    public Info(ClassA obj)
    {
        TheObject = obj;
    }

    public ClassA TheObject
    {
        get;
        set;
    }

    public string Text
    {
        get
        {
            return TheObject.name;
        }
    }
}

void Program
{
    ClassA obj = new ClassA();
    obj.name = "Instance of ClassA";
    Info wind1 = new Info(obj);

    // Now do your stuff.
} 
```

# email - excel vba输入框

> ID：12124878
> 
> 赞同：0
> 
> 时间：2012-08-25T19:13:58.197
> 
> 标签：email, excel, vba

我有以下用于 excel vba 的代码，它将通过电子邮件发送我工作表中的一系列地址。但是，我希望可以使用输入框来确定我想通过电子邮件发送的范围。我遇到的麻烦是让输入成为函数 mailid 理解的值。有什么建议么？

```
Sub EmailActiveSheetWithOutlook2()

Dim oApp, oMail As Object, _
tWB, cWB As Workbook, _
FileName, FilePath As String

Application.ScreenUpdating = False

'Set email id here, it may be a range in case you have email id on your worksheet

 Sheets("Sheet1").Select
 mailId = Range("b4:b5").Value

'Write your email message body here , add more lines using & vbLf _ at the end of each line

Body = "Hello, it appears you have not yet filled out the transportation contact information excel sheet. This sheet was emailed to you, please complete this and send to me  saved as your firstnamelastname.xls at your earliest convience." & vbLf _
& vbLf _
& "Thanks & Regards" & vbLf _
& vbLf _
& "-Ryan " & vbLf _ 
```

'通过outlook发送邮件

```
Set oApp = CreateObject("Outlook.Application")
Set oMail = oApp.CreateItem(0)
With oMail
    .To = mailid
    .Subject = "Transportation Committee Notice"
    .Body = Body
    '.Attachments.Add tWB.FullName
    .send
End With

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T22:33:46.420

要复制当前代码使用的效果

```
mailid = Application.InputBox(Prompt:="Select Range", Type:=8) 
```

where`Type:=8`指定返回类型`Range`。这会将`Value`所选范围的属性返回到`mailid`

或者使用

```
Dim rng as Range
Set rng = Application.InputBox(Prompt:="Select Range", Type:=8)
mailid = rng.Value 
```

`rng`然后设置为选定的范围，并且可以在使用前进行验证

请注意，您应该添加错误处理以解决问题，例如用户取消输入框

不要`Application.ScreenUpdating = False`在发布前设置，`InputBox`因为这会阻止用户与屏幕交互。

顺便说一句，您的代码使用`Dim`不正确：`Dim`'ing 一个没有`As`子句的变量将其声明为 `Variant.
例如

```
Dim oApp, oMail As Object 
```

实际上声明`oApp`为`Variant`, 使用

```
Dim oApp As Object, oMail As Object 
```

# c# - c# 自动属性和字典

> ID：12124880
> 
> 赞同：0
> 
> 时间：2012-08-25T19:14:21.917
> 
> 标签：c#, dictionary, automatic-properties

我有一个派生的基本案例，所以我几乎没有 int 和 string Auto 属性

```
// base class 

   public virtual int MyVariable {get; set; }; 

// Derived class
    private int myVariable = 0;
    public override int MyVariable 
    {
        get { return myVariable ; }
        set { myVariable = value; }

    } 
```

我怎样才能对字典做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T19:16:54.937

它几乎相同，尽管您当然需要将类型从更改`int`为您的字典类型。

示例`Dictionary<string,int>`：

基类：

```
public virtual Dictionary<string,int> MyVariable {get; set; }; 
```

派生类：

```
private Dictionary<string,int> myVariable = new Dictionary<string,int>();
public override Dictionary<string,int> MyVariable 
{
    get { return myVariable ; }
    set { myVariable = value; }

} 
```

# c# - 如何让 Linqpad 智能感知显示 C# 5.0 方法？

> ID：12124882
> 
> 赞同：3
> 
> 时间：2012-08-25T19:14:31.140
> 
> 标签：c#, linqpad, c#-5.0

我使用 Linqpad 作为代码便笺簿来使用 C# 5.0 异步功能。我的代码编译和执行都很好，但智能感知只显示来自 4.0 框架的元素。

例如，建议列表中`Task.WaitAll()`没有`Task.WhenAll()`或`Task.Delay()`。

根据 Joe Albahari 的说法，智能感知应该与 .Net 4.5 一起使用，但我无法让它运行。

我在运行 Windows 7 和 Windows 8（RC 和 RTM）以及 VS 2012 Beta、RC 和 Final 的不同组合的不同机器上进行了尝试。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T11:11:09.907

Joseph Albahari 能够找到问题的根源并在新的 Beta 版本中修复它。

[http://www.linqpad.net/Beta.aspx](http://www.linqpad.net/Beta.aspx)

# python - 无法将转储的 JSON 文件读回 Python

> ID：12124884
> 
> 赞同：1
> 
> 时间：2012-08-25T19:14:59.610
> 
> 标签：python, json

我正在尝试加载我的 JSON 文件，该文件是通过从另一个 JSON 文件复制内容而创建的。`ValueError: Expecting property name: line 1 column 1 (char 1)`但是当我尝试从复制所有数据的文件中读取 JSON 数据时，我不断收到错误消息，我的 JSON 数据的格式为

```
{
    "server": {
        "ipaddress": "IP_Sample",
        "name": "name_Sample",
        "type": "type_Sample",
        "label": "label_Sample",
        "keyword": "kwd_Sample",
        "uid": "uid_Sample",
        "start_time": "start_Sample",
        "stop_time": "stop_Sample"
    }
} 
```

我的加载和写入方法是

```
def load(self, filename):
    inputfile = open(filename,'r')
    self.data = json.loads(inputfile.read())
    print (self.data)
    inputfile.close()
    return

def write(self, filename):
    file = open(filename, "w")
    tempObject = self.data
    print type(tempObject)
    #json.dump(filename, self.data)
    print self.data["server"]
    print >> file, self.data
    file.close()
    return 
```

我无法弄清楚我要去哪里错了，任何人都可以帮我解决这个问题..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T20:00:04.130

要在文件中保存和加载 JSON，请使用打开的文件对象。您的代码表明您尝试将文件名保存到`self.data`，这不是文件对象...

以下代码有效：

```
def write(self, filename):
    with open(filename, 'w') as output:
        json.dump(self.data, output)

def load(self, filename):
    with open(filename, 'r') as input:
        self.data = json.load(input) 
```

我将打开的文件用作上下文管理器，以确保它们在完成读取或写入时关闭。

您的其他尝试只是将*python 表示形式*`print >> file, self.data`打印到文件中，而不是 JSON：

 *```
>>> print example
{u'server': {u'uid': u'uid_Sample', u'keyword': u'kwd_Sample', u'ipaddress': u'IP_Sample', u'start_time': u'start_Sample', u'label': u'label_Sample', u'stop_time': u'stop_Sample', u'type': u'type_Sample', u'name': u'name_Sample'}} 
```

其中，当从文件中读回时，会给出您指示的错误消息：

```
>>> json.loads("{u'server': {u'uid': u'uid_Sample', u'keyword': u'kwd_Sample', u'ipaddress': u'IP_Sample', u'start_time': u'start_Sample', u'label': u'label_Sample', u'stop_time': u'stop_Sample', u'type': u'type_Sample', u'name': u'name_Sample'}}")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/json/__init__.py", line 307, in loads
    return _default_decoder.decode(s)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/json/decoder.py", line 319, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/json/decoder.py", line 336, in raw_decode
    obj, end = self._scanner.iterscan(s, **kw).next()
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/json/scanner.py", line 55, in iterscan
    rval, next_pos = action(m, context)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/json/decoder.py", line 171, in JSONObject
    raise ValueError(errmsg("Expecting property name", s, end))
ValueError: Expecting property name: line 1 column 1 (char 1) 
```

您必须改为打印`json.dumps()`输出：

```
>>> print json.dumps(example)
'{"server": {"uid": "uid_Sample", "keyword": "kwd_Sample", "ipaddress": "IP_Sample", "start_time": "start_Sample", "label": "label_Sample", "stop_time": "stop_Sample", "type": "type_Sample", "name": "name_Sample"}}' 
```*

# rubymine - 在 Ubuntu 中加速 RubyMine 4.5

> ID：12124891
> 
> 赞同：0
> 
> 时间：2012-08-25T19:15:40.760
> 
> 标签：rubymine

我喜欢 RubyMine，我只使用它。但唯一让我担心的是RubyMine的一个性能。它需要太多的内存。所以我想关闭不必要的功能来加速它。

你会建议我什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:32:53.617

通过阅读我的 Rubymine 下面的这篇文章，它不容易冻结:)

[设置/增加 Rubymine 中可用的内存](http://www.williambharding.com/blog/uncategorized/setincrease-memory-available-in-rubymine/)

# php - 通过 ajax 获取“评论内容”

> ID：12124894
> 
> 赞同：0
> 
> 时间：2012-08-25T19:15:50.803
> 
> 标签：php, jquery, html, ajax

我正在构建一个 ajax 函数，它获取发送到数据库所需的信息，而不是在页面上打印出来。只有它抓住了流ID，而不是评论内容。我可以在 post 参数下的 firebug 中看到这一点。奇怪的是，我对我的主要状态更新使用了相同的方法，只是更改了 id，因此它们不会发生冲突。

大多数人会说评论内容没有价值..但那将是用户插入评论，他们对我的主要状态更新没有价值..所以我在想，我哪里错了？

形式

```
 <form id='mycommentform' method='POST'  class='form_statusinput'>
    <input type='hidden'  name='streamid' id='streamid' value='".$streamitem_data['streamitem_id']."'>
    <input class='text' name='commentcontent' id='commentcontent' placeholder='Say something' autocomplete='off'>
    <input type='submit' id='button' value='Feed'>
    </form>
    </div> 
```

AJAX

```
 <script>
    $(document).ready(function(){
    $("form#mycommentform").submit(function(event) {
    event.preventDefault();
    var streamid = $("#streamid").val();
    var commentcontent = $("#commentcontent").val();

    $.ajax({
    type: "POST",
    url: "comment_add.php",
    cache: false,
    dataType: "json",
    data: {  streamid:  streamid, commentcontent: commentcontent}, 
    success: function(response){ 
     $("#commentcontent").val(""); 
    $("#commentaddid").html("<div class='stream_comment_holder' style='display:none;' id='comment_holder_"+response['streamitem_id']+"'><div id='comment_list_"+response['streamitem_id']+"'></div></div>");
    }
    });
    return false
    });
    });
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T19:29:50.710

您总是需要引用您的数据，因此将其更改为：`{ 'streamid': streamid, 'commentcontent': commentcontent}`应该可以解决您的问题

经过一些讨论，我们发现
`var commentcontent = $(this).children('#commentcontent ').val();`
解决了问题

# extjs - 为煎茶条形图上的每个类别项目赋予不同的颜色

> ID：12124897
> 
> 赞同：1
> 
> 时间：2012-08-25T19:15:57.917
> 
> 标签：extjs, sencha-charts

我有点被这件事困住了。我想做的是给煎茶图上的每个条形图赋予不同的颜色。这是我到目前为止所拥有的： ![在此处输入图像描述](../Images/0dd6e6583df594ac82bb6747969bf59e.png) 这是我的代码：

```
Ext.setup({
    tabletStartupScreen: 'tablet_startup.jpg',
    phoneStartupScreen: 'phone_startup.jpg',
    tabletIcon: 'icon-ipad.png',
    phoneIcon: 'icon-iphone.png',
    glossOnIcon: false,
    onReady: function() {
    Ext.regModel('Retail', {
        fields: [
        {name: 'id', type: 'string'},
        {name: 'quantity',  type: 'int'}
        ]
    });

   var retailStore =  new Ext.data.JsonStore({
        model: 'Retail',
        proxy: {
            type: 'ajax',
            url: 'getData.php',
            reader: {
                type: 'json',
            }
        },
        autoLoad: true
   });

   console.log(retailStore);

    new Ext.chart.Panel({
        id: 'chartCmp',
        title: 'Stock Example',
        fullscreen: true,
        dockedItems: {
            xtype: 'button',
            iconCls: 'shuffle',
            iconMask: true,
            ui: 'plain',
            dock: 'left'
        },
        items: {
            cls: 'stock1',
            theme: 'Demo',
            legend: {
                position: {
                    portrait: 'right',
                    landscape: 'top'
                },
                labelFont: '17px Arial'
            },
            interactions: [{
                type: 'panzoom',
                axes: {
                    left: {
                        maxZoom: 2
                    },
                    bottom: {
                        maxZoom: 4
                    }
                }
            }],
            animate: false,
            store: retailStore,
            axes: [{
                type: 'Numeric',
                position: 'bottom',
                fields: ['quantity'],
                title: 'Quantity'
            }, {
                type: 'Category',
                position: 'left',
                fields: ['id'],
                title: 'Products'
            }],
            series: [{
                type: 'bar',
                axis: 'right',
                xField: 'id',
                yField: ['quantity'],
            }]
        }
    });
}}); 
```

我知道应该有某种方法通过向图表添加额外的维度来“欺骗”图表，就像在这里所做的那样：http: [//dev.sencha.com/deploy/touch-charts-1.0.0/examples/酒吧/](http://dev.sencha.com/deploy/touch-charts-1.0.0/examples/Bar/)

那里每年都代表一种新产品。我想对我的做同样的事情，每个产品代表一个不同的维度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:47:02.877

You can use the renderer function of a serie. You just have to change `attributes.fill` to the color you want for each bar. Here is an example : [http://bl.ocks.org/3511876](http://bl.ocks.org/3511876) and the code :

```
Ext.setup({
    onReady: function() {
        var data = [];

        for (var i = 0; i < 10; i++) {
            data.push({
                x: i,
                y: parseInt(Math.random() * 100)
            });
        }

        var colors = ['blue', 'yellow', 'red', 'green', 'gray'];

        var store = new Ext.data.JsonStore({
            fields: ['x', 'y'],
            data: data
        });

        var chart = new Ext.chart.Chart({
            store: store,
            axes: [{
                type: 'Category',
                fields: ['x'],
                position: 'left'
            }, {
                type: 'Numeric',
                fields: ['y'],
                position: 'bottom'
            }],
            series: [{
                type: 'bar',
                xField: 'x',
                yField: 'y',
                axis: 'bottom',
                renderer: function(sprite, record, attributes, index, store) {
                    attributes.fill = colors[index%colors.length];

                    return attributes;
                }
            }]
        });

        new Ext.chart.Panel({
            fullscreen: true,
            chart: chart
        });

        chart.redraw();
    }
}); 
```

# ruby-on-rails - 为什么我必须在 Rails 中的 db:reset 之后重新启动服务器？

> ID：12124898
> 
> 赞同：1
> 
> 时间：2012-08-25T19:16:05.107
> 
> 标签：ruby-on-rails, sqlite, activerecord, ruby-on-rails-3.2

每当我`rake db:reset`在 Rails 开发环境中运行以清除我的 sqlite 数据库时，似乎我必须杀死我的服务器并重新启动它，否则我的应用程序将表现得好像数据库中有 AR 对象一样。我是红宝石新手，仅供参考。是因为 AR 将对象缓存在内存中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T04:00:39.793

可能与 Rails AR 或模式缓存有关。如果重新启动服务器对您有用，那么我假设它会清除架构缓存

# php - 使用 PHP 从 MySQL 数据库中选择带有通配符的 IP

> ID：12124902
> 
> 赞同：1
> 
> 时间：2012-08-25T19:16:16.707
> 
> 标签：php, mysql, wildcard

我正在尝试根据他们的 IP 地址在客户端浏览器上执行 Javascript。我有一个用户信息表，比如他们的名字，还有另一个表，其中包含 IP 和 Javascript 在它们上执行的内容。

例如，我希望 IP 为 192.168.0.*（我的本地网络）的每个人在每次查看此页面时都被重定向到 Google。在数据库中，列出的 IP 是`192.168.0.%`，并且在我的 javascript 列中`window.location.href = 'http://www.google.com';`

IP 为 192.168.0.5 的人访问了我的页面。PHP 运行 SQL 查询以查找其 IP 并检查是否有任何特定的 Javascript 需要执行（如果它不在数据库中，则客户端不会发生任何事情）。它应该发现`window.location.href = 'http://www.google.com';`需要执行，因为它们适合通配符。

我可以在 SQL 表中的条目中保留通配符，并且仍然让它们的行为就像在查询中使用它们一样吗？会`mysql_query("SELECT javascript_to_execute FROM ip_table WHERE ip='$user_IP'");` 工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T19:22:36.707

是的，您可以将通配符 % 存储为字符串的一部分。IP 范围 192.168.0.* 可以在您的数据库中保存为`192.168.0.%`. 然后查询将是`SELECT javascript FROM ip_table WHERE '$user_IP' LIKE ip`

# servicebus - Windows ServiceBus Beta 1.0 '底层连接已关闭：无法为 SSL/TLS 安全通道建立信任关系

> ID：12124905
> 
> 赞同：1
> 
> 时间：2012-08-25T19:16:42.107
> 
> 标签：servicebus

我用下面的脚本配置了总线。
LocalComputer\Personal\Certificates 证书存储中的新证书。

示例应用程序引发了一个授权异常：

'基础连接已关闭：无法为 SSL/TLS 安全通道建立信任关系。内部异常{“根据验证程序，远程证书无效。”}

```
$SBRunAsPassword = ConvertTo-SecureString -AsPlainText -Force -String [PASSWORD];

$SBCertAutoGenerationKey = ConvertTo-SecureString -AsPlainText -Force -String [PASSWORD];

New-SBFarm -CertAutoGenerationKey $SBCertAutoGenerationKey -RunAsName 'server\user' -AdminGroup 'BUILTIN\Administrators' -PortRangeStart 9000 -TcpPort 9354 -FarmMgmtDBConnectionString 'Data Source=[SERVER]\SQLEXPRESS;Integrated Security=True' 

Add-SBHost -FarmMgmtDBConnectionString 'Data Source=[SERVER]\SQLEXPRESS;Integrated Security=True' -RunAsPassword $SBRunAsPassword -CertAutoGenerationKey $SBCertAutoGenerationKey;
New-SBNamespace -Name 'DemoNameSpace' -ManageUser '[USER]'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T23:54:32.627

如果您在与服务器不同的机器上运行客户端应用程序，则需要将 CA 导入您的客户端机器，以便能够信任 ServiceBus 提供的证书。

此页面包含有关如何执行该操作的信息：http: [//msdn.microsoft.com/en-us/library/jj192993.aspx](http://msdn.microsoft.com/en-us/library/jj192993.aspx)

此外，请确保您的客户端调用始终使用机器的完全限定域名（如果您的机器已加入域）。这是因为 ServiceBus 在安装时生成的证书使用框的 FQDN 作为证书的 CN。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T02:56:52.413

在非域计算机上，您需要修改 url 格式并删除域组件。

# php - PHP获取输出流或只是回显

> ID：12124915
> 
> 赞同：6
> 
> 时间：2012-08-25T19:17:33.103
> 
> 标签：php

php命令行应用程序仅回显或printf等一些字符串与获取sdtout流并写入它有什么区别，即

```
$stdout = fopen('php://stdout', 'w'); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-25T19:34:14.703

我首先想到的是输出缓冲。`echo`并`print`与输出缓冲机制接口，但直接写入标准输出会绕过它。

考虑这个脚本：

```
<?php
$stdout = fopen('php://stdout', 'w');
ob_start();
        echo "echo output\n";
        fwrite($stdout, "FWRITTEN\n");
        echo "Also echo\n";
$out = ob_get_clean();
echo $out; 
```

输出：

```
FWRITTEN
echo output
Also echo 
```

这表明它`echo`是缓冲的，而 fwrite 不是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T19:37:48.677

不同之处在于`echo`写入`php://output`哪个是输出缓冲区流。但是，`php://stdout`您可以直接访问进程的无缓冲输出流。

有关流的更多信息可以在手册中找到：[http ://www.php.net/manual/en/wrappers.php.php](http://www.php.net/manual/en/wrappers.php.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T19:49:17.497

除了已经注意到的技术差异外，风格和惯例上也有明显的差异。 `echo`/`print`是 PHP 中产生输出的正常方式；像写入文件一样写入输出将是异常的并且可能会造成混淆。为了清楚您的意图，我不建议您这样做，除非您有充分的理由这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-18T10:35:07.967

这里`php://stdout`不是缓冲流， fwrite 可以使用缓冲输出`php://output`

# db2 - 是否可以在 Rails 上使用带有 JRuby 的 IBM DB2？

> ID：12124917
> 
> 赞同：1
> 
> 时间：2012-08-25T19:17:37.520
> 
> 标签：db2, jruby, adapter, jrubyonrails

在 DB2 版本 9.7 中说：

> JRuby 不支持 IBM_DB Ruby 驱动程序和 Rails 适配器 JRuby 不支持 IBM_DB 适配器。
> 
> JRuby 不支持 IBM_DB 适配器，因为（如 JRuby Wiki 中所述，“入门”）：“许多 Gem 可以在 JRuby 中正常工作，但是一些 Gem 构建本地 C 库作为其安装过程的一部分。这些 Gem 不会在 JRuby 中工作，除非 Gem 还提供了与本机库等效的 Java。” 有关详细信息，请参阅[http://kenai.com/projects/jruby/pages/GettingStarted](http://kenai.com/projects/jruby/pages/GettingStarted)。
> 
> IBM_DB 适配器依赖 IBM_DB Ruby 驱动程序（C 扩展）和 IBM® Data Server Driver for ODBC 和 CLI 来访问 IBM 数据服务器上的数据库。或者，您可以使用 Ruby 的常规 C 实现，或使用 JDBC_adapter 访问数据库。

有谁知道这是否在新版本中得到修复？另外，是否可以将 JDBC_adapter 与 JRuby 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T19:30:31.200

我没有测试它，但是根据这个[https://github.com/jruby/activerecord-jdbc-adapter](https://github.com/jruby/activerecord-jdbc-adapter)

Activerecord-jdbc-adapter 是 Rails 的 ActiveRecord 组件的数据库适配器，可与 JRuby 一起使用。它允许在您的 JRuby on Rails 应用程序中使用几乎任何符合 JDBC 的数据库。

并且对应的gem有Java版本。[https://rubygems.org/gems/activerecord-jdbc-adapter/versions/1.0.3-java](https://rubygems.org/gems/activerecord-jdbc-adapter/versions/1.0.3-java)

关于您的另一个问题，如果 IBM_DB 在新版本中得到修复？

我认为不是，根据文档，在 JRuby 和 ActiveRecord-JDBC 适配器成熟之前它不会工作。

我发现和 IBM 的文档说可以考虑在 ActiveRecord-JDBC 适配器中进行设置，它可以模拟以前的管理提供 IBM_DB 适配器。

[http://publib.boulder.ibm.com/infocenter/db2luw/v9r5/index.jsp?topic=%2Fcom.ibm.db2.luw.apdv.ruby.doc%2Fdoc%2Fc0052771.html](http://publib.boulder.ibm.com/infocenter/db2luw/v9r5/index.jsp?topic=%2Fcom.ibm.db2.luw.apdv.ruby.doc%2Fdoc%2Fc0052771.html)

# javascript - 为什么 (new RegExp("\\w") === /\w/) 在 JS 中为假？

> ID：12124919
> 
> 赞同：7
> 
> 时间：2012-08-25T19:17:46.377
> 
> 标签：javascript, regex

我在 Chrome 的控制台中尝试了以下操作：

```
var r1 = new RegExp("\\w"); // → /\w/
var r2 = /\w/; // → /\w/
r1 === r2; // → false
r1 == r2; // → false
r1.toString() === r2.toString(); // → true
r1.source === r2.source; // → true 
```

我不明白为什么会这样。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-25T19:20:35.473

它们是两个不同的`RegExp`实例，因此通过直接将它们与`==`or`===`你比较两个不相等的引用，导致`false`.

但是，当您比较它们的`toString()`序列化或源时，您是在按值比较它们的字符串表示形式。由于它们基本上是完全相同的模式和标志，因此比较它们的字符串表示将返回`true`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T21:54:04.443

这是MDN 上比较运算符文档[的](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)引用：

> 请注意，当且仅当其比较对象是原始对象时，对象才会转换为原始对象。**如果两个操作数都是对象，则将它们作为对象进行比较，并且仅当两个操作数都引用同一个对象时，相等性测试才为真。**

`new RegExp("\\w")`是一个对象， 也是`/\w/`。两者分别实例化。需要我多说？

# javascript - jQuery/Python - 禁用对话框

> ID：12124921
> 
> 赞同：1
> 
> 时间：2012-08-25T19:17:55.247
> 
> 标签：javascript, jquery, python, spynner

我有一个网页，每当我离开页面时，都会出现一个对话框，询问我是否“真的想离开页面”，并带有“离开”或“留下”选项。此框由 javascript 创建。

我目前正在使用 Spynner for Python 作为此页面上的浏览器工具。Spynner 具有注入 Javascript 的能力。这是我想出的，但似乎并没有在 Python 中完成这项工作。

```
browser.runjs("""window.alert = function() {};""") 
```

我还尝试了诸如这些的替代方法，这些替代方法用于将以前的脚本注入到页面中，但是在使用它时出现语法错误，我似乎无法指出。

**注入有效的脚本：**

```
browser.runjs("""jQuery(document.elementFromPoint(204,51)).click();""",debug=True) 
```

**注入不起作用但需要开始工作的脚本：**

```
browser.runjs("""jQuery(window.alert = function()) {};""") 
```

非常感谢任何帮助，谢谢！

**编辑：** 尝试尝试一下。也没有用。我有点失落。

跑这个：

```
browser.runjs("""window.alert = function();""") 
```

控制台这样说：

```
Run Javascript code: window.alert = function(); 
Javascript console (undefined:1): SyntaxError: Parse error 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T19:50:47.937

对于您不需要的代码

```
jQuery(...) 
```

只需添加

```
window.alert = function(){}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T21:49:04.557

最终解决了以下问题。

```
def confirmcallback(url, message):
    return True
browser.set_javascript_confirm_callback(confirmcallback)

def cancel_answer(url, message, defaultvalue):
    return
browser.set_javascript_prompt_callback(cancel_answer) 
```

# php - PHP 排序速度

> ID：12124922
> 
> 赞同：6
> 
> 时间：2012-08-25T19:18:12.890
> 
> 标签：php, sorting, usort

首先，我将给出代码链接：http: [//ideone.com/6k8R6](http://ideone.com/6k8R6)

在我的 Intel Core 2 Duo 上，PHP 5.4.6 结果是：（
`usort: 7.8763520717621`
`quicksort: 2.9220938682556`
比`usort`慢`quicksort`）

但在 Ideone 上结果是
`usort: 0.0313699245453`
`quicksort: 0.0621209144592`
：（`usort`比`quicksort`)

我还在朋友的电脑上检查过代码（Intel Core i5，PHP 5.4.4），`usort`速度也更快。

我的问题是：为什么有时快速排序比 usort 更快，有时 usort 更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T19:22:16.453

快速排序被认为是对未排序数据最快的排序算法之一，而对已经排序（或接近排序）的数据来说是最慢的排序算法。

# java - 联系选择器不返回结果

> ID：12124924
> 
> 赞同：0
> 
> 时间：2012-08-25T19:18:41.407
> 
> 标签：java, android, android-contacts, contactscontract

从输入框中，我抛出一个对话框来获取联系人。我的代码如下所示

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        toContacts = (EditText)findViewById(R.id.To);
        toContacts.setOnClickListener(new EditText.OnClickListener(){public void onClick(View v){pickContacts();}});

    }

    public void pickContacts(){
        Intent intent = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI);
        startActivityForResult(intent, 1);
    }

    public void onActivityResult(int reqCode, int resultCode, Intent data){
        super.onActivityResult(reqCode, resultCode, data);
        String name = "";
          switch (reqCode) {
            case (1) :
              if (resultCode == Activity.RESULT_OK) {
                Uri contactData = data.getData();
                //@SuppressWarnings("deprecation")
                Cursor c = null;
                try{
                     //c =  managedQuery(contactData, null, null, null, null);
                     c = getContentResolver().query(contactData, null, Contacts.DISPLAY_NAME, null, null);
                     if (c.moveToFirst()) {
                          name = c.getString(c.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                          //String number = c.getString(c.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

                        }
                } catch(Exception e){
                    Log.e(DEBUG_TAG, "failed to get contacts data", e);
                } finally {
                    if(c != null){
                        c.close();
                    }
                    EditText toSendContact = (EditText) findViewById(R.id.To);
                    toSendContact.setText(name);
                }
              }
              break;
          }

    } 
```

但它不会在输入框中返回选定的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T21:11:42.033

代替

```
c = getContentResolver().query(contactData, null, Contacts.DISPLAY_NAME, null, null); 
```

和

```
c = getContentResolver().query(contactData, new String[] { ContactsContract.Contacts.DISPLAY_NAME }, null, null, null); 
```

您使用了选择而不是投影。

# java - 向上转型对静态方法有影响吗？

> ID：12124926
> 
> 赞同：0
> 
> 时间：2012-08-25T19:18:50.130
> 
> 标签：java, upcasting

为什么当我们在基类和派生类中将方法声明为静态并进行向上转换时，它会调用基类方法。

```
class Base
{
    static void show(){
        System.out.println("Base class....");
    }
}
class Derive extends Base
{
    static void show(){
        System.out.println("Drive class....");
    }//method hidding.....

    public static void main(String[] args) 
    {
        Base b= new Derive();
            b.show();           
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T19:21:55.893

这里有几个问题需要提一下：

*   静态方法不被子类继承和覆盖
*   静态方法不需要调用实例，它们需要一个类

所以，基本上，调用`b.show();`实际上意味着调用`Base.show();`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T19:24:06.963

你打电话`Base.show`，不是`Derive.show`。方法隐藏不是覆盖。

[§8.4.8.2。Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.8.2)的 给出了一个示例，该示例准确地演示了此处发生的情况：

> 可以通过使用类型是实际包含该方法声明的类的引用来调用隐藏的 class ( `static`) 方法。在这方面，`static`方法的隐藏不同于实例方法的覆盖。这个例子：
> 
> ```
> class Super {
>     static String greeting() { return "Goodnight"; }
>     String name() { return "Richard"; }
> }
> class Sub extends Super {
>     static String greeting() { return "Hello"; }
>     String name() { return "Dick"; }
> }
> class Test {
>     public static void main(String[] args) {
>         Super s = new Sub();
>         System.out.println(s.greeting() + ", " + s.name());
>     }
> } 
> ```
> 
> 产生输出：
> 
> `Goodnight, Dick`
> 
> 因为 greeting 的调用使用 的类型`s`，即`Super`在编译时确定要调用哪个类方法，而 的调用`name`使用 的类`s`，即`Sub`在运行时确定要调用哪个实例方法调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T19:39:55.067

只需完成以上答案即可。最好通过类而不是实例变量来调用类方法：`Base.show()` 不要`b.show()`明确该方法是静态方法。当您隐藏方法而不是覆盖它时，这在您的情况下特别有用。

# asp.net-mvc - 如何定义不需要查询字符串的控制器操作？

> ID：12124928
> 
> 赞同：1
> 
> 时间：2012-08-25T19:19:19.797
> 
> 标签：asp.net-mvc

以下操作不需要查询字符串，但确实需要在 URL 中传递 Id。

```
 public ViewResult Details(int id)
    {
        Domain domain = db.Domains.Find(id);
        return View(domain);
    } 
```

如何更改此名称，以便可以在 URL 中而不是 Id 中传递名称？

当我将其更改为以下内容时，无论我如何尝试执行它，它都会产生错误“序列不包含元素”。

```
 public ViewResult Details(String name)
    {
        Domain domain = db.Domains.Where(d => d.Name == name).First();
        return View(domain);
    } 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T19:20:58.897

***“序列不包含元素”***错误是因为您的 LINQ 查询没有返回此***where 子句***的任何结果，但您正尝试`First()`在结果集上应用该函数（在这种情况下不适用于您的 where 条件）。

当您确定要应用此函数的结果集中至少有一个元素可用时，请使用[First()函数。](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.first.aspx)如果 LINQ 表达式的结果没有元素，则 Applying`First`将引发上述错误。

要使 URL 具有`name`参数而不是整数 id，只需将参数类型更改为`string`. 将变量名称保留为**id**本身。因为这就是 MVC 路由将用来帮助您编写那些漂亮的 URL。

所以现在你的网址可以像

```
../SomeController/Details/someName 
```

您的操作方法`someName`的参数值在哪里。`Details`

我会使用`FirstOrDefault`and 来检查某个元素是否可用于 LINQ 表达式。[FirstOrDefault](http://msdn.microsoft.com/en-us/library/bb340482.aspx)将返回序列的第一个元素，如果序列不包含任何元素，则返回默认值。

```
public ViewResult Details(String id)
{
    Domain domain = db.Domains.Where(d => d.Name == id).FirstOrDefault();
    if(domain!=null)
       return View(domain);
    else
       return View("NotFound")  //Lets return the Not found View 
} 
```

# javascript - html5视频互动视频播放器

> ID：12124929
> 
> 赞同：1
> 
> 时间：2012-08-25T19:19:39.190
> 
> 标签：javascript, html, video, html5-video

我有一个构建交互式 HTML5 视频播放器的想法，我不想构建已经完成但想扩展现有想法的东西。是否有任何用于在 HTML5 视频中构建用户交互的库，我查看了 popcorn.js，但希望看到其他概念证明或库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-07T13:48:06.590

看看[H5P](http://h5p.org/interactive-video)。

H5P 是一个 Drupal 模块和 Joomla 扩展，允许您直接在浏览器中使您的视频具有交互性。与爆米花机的方式大致相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-19T08:31:39.340

如果您想使用更通用的框架 vi-two.js [https://github.com/nise/vi-two](https://github.com/nise/vi-two)，您可能会很感兴趣。它已被包含在 wordpress 和 mediawiki 中。它提供了许多不同类型的视频注释和超越 popcorn.js 的功能：

*   视频缩放
*   播放列表
*   时空超链接/循环链接
*   时间标签
*   目录
*   同步幻灯片/图像

# javascript - 在 D3 力有向图中有效地计算凸包

> ID：12124932
> 
> 赞同：3
> 
> 时间：2012-08-25T19:20:31.390
> 
> 标签：javascript, performance, d3.js, force-layout, convex-hull

我有一些类似于[力导向图](http://mbostock.github.com/d3/ex/force.html)示例的东西。主要区别在于没有强制力——布局是静态的，除了用户拖动交互。我添加了在用户定义的节点组周围绘制[凸包（作为 svg:path 元素）的代码。](http://en.wikipedia.org/wiki/Convex_hull)随着节点的移动（即`.on("drag")`），计算外壳的代码被触发。这意味着当节点被拖动时它会不断触发。通常有 10 到 30 个船体；一个节点可能在一个或多个外壳中。见下文：

![船体图示例](../Images/10f6cbd3a3b96ecf35705a10e072c01f.png)

我试图弄清楚是否有更有效（更高性能）的方式来做我正在做的事情。暂时保持高水平：

拖动时，更新所有船体图形：

1.  对于每个船体，创建组成节点坐标的数组。
2.  将上述数组中的每个坐标对替换为与原始点相距一定距离*r的 8 个点。*这是为了填充/扩张船体，因此它实际上不会接触任何节点。
3.  将计算出的坐标馈送到[`d3.geom.hull`](https://github.com/mbostock/d3/blob/master/src/geom/hull.js).

我在 Chrome 中获得了大约 50 fps，这一点也不差，但它似乎是一个非常低效的设置。

我唯一明确的想法是将节点包含在节点数组中的船体的 ID 存储在节点数组中，并且只更新那个/那些船体而不是所有船体。我还想知道更有效的数据结构来存储船体数据（而不是路径本身）。目前数据结构如下所示：

```
hulls = {1:{nodeIDs:[1,2,3,4,5], name:"hull1"}, 2:{...}, ...}; 
```

请原谅这个开放式问题，但我希望有一些我不熟悉的编程技术在这里可以很好地工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T19:55:58.123

最有效的方法是仅重新计算围绕正在拖动的节点运行的 8 元组坐标的位置，然后在父外壳中传播该信息以进行重绘。

您可以通过进行一些更改来做到这一点。

*   在每个节点的数据结构中，添加以下元素。
    *   对所有父外壳的引用（如您所建议的）
    *   围绕该节点运行的“填充”坐标的 8 元组（缓存它们）
*   在拖动时，只考虑被拖动的节点。
*   更新该节点的 8 元组。
*   收集该节点的父外壳的子节点并将它们的 8 元组折叠在一起并将它们提供给它们`hull`（如有必要，销毁前一个外壳）。

我对`d3.js`的 API 不熟悉，但我相信您可以填写我留下的任何空白。

# java - ProcessBuilder 向命令行添加额外的引号

> ID：12124935
> 
> 赞同：13
> 
> 时间：2012-08-25T19:21:20.547
> 
> 标签：java, windows, process, processbuilder

我需要使用 ProcessBuilder 构建以下命令：

```
"C:\Program Files\USBDeview\USBDeview.exe" /enable "My USB Device" 
```

我尝试使用以下代码：

```
ArrayList<String> test = new ArrayList<String>();
test.add("\"C:\\Program Files\\USBDeview\\USBDeview.exe\"");
test.add("/enable \"My USB Device\"");  

ProcessBuilder processBuilder = new ProcessBuilder(test);                       
processBuilder.start().waitFor(); 
```

但是，这会将以下内容传递给系统（使用 Sysinternals Process Monitor 验证）

```
"C:\Program Files\USBDeview\USBDeview.exe" "/enable "My USB Device"" 
```

注意前面`/enable`的引号和后面的两个引号`Device`。我需要去掉那些额外的引号，因为它们会使调用失败。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-11-15T20:02:15.640

Joachim 是正确的，但是当您的流程需要如下统一参数时，他的回答是不够的：

```
myProcess.exe /myParameter="my value" 
```

正如 stefan 所见，ProcessBuilder 将在您的参数中看到空格并将其括在引号中，如下所示：

```
myProcess.exe "/myParameter="my value"" 
```

按照 Joachim 的建议拆分参数值将导致`/myparameter=`和之间有一个空格`"my value"`，这对于这种类型的参数不起作用：

```
myProcess.exe /myParameter= "my value" 
```

根据 Sun 的说法，在他们[无限的智慧](http://bugs.sun.com/view_bug.do?bug_id=6511002)中，这不是一个错误，[可以转义](http://msdn.microsoft.com/en-us/library/17w5ykft.aspx)双引号以实现所需的行为。

因此，要最终回答 stefan 的问题，如果您调用的进程正确执行，这是一个应该有效的替代方法：

```
ArrayList<String> test = new ArrayList<String>();
test.add("\"C:\\Program Files\\USBDeview\\USBDeview.exe\"");
test.add("/enable \\\"My USB Device\\\""); 
```

这应该给你命令`"C:\Program Files\USBDeview\USBDeview.exe" "/enable \"My USB Device\""`，这可能会奏效；YMMV。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-25T19:26:08.863

据我了解，由于 ProcessBuilder 不知道如何将参数传递给命令，因此您需要将参数分别传递给 ProcessBuilder；

```
ArrayList<String> test = new ArrayList<String>();
test.add("\"C:\\Program Files\\USBDeview\\USBDeview.exe\"");
test.add("/enable");
test.add("\"My USB Device\""); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-07T07:54:15.720

首先，您需要自己拆分参数 -`ProcessBuilder`不会为您这样做 - 其次，您不需要在参数值周围加上转义引号。

```
ArrayList<String> test = new ArrayList<String>();
test.add("C:\\Program Files\\USBDeview\\USBDeview.exe");
test.add("/enable");
test.add("My USB Device"); 
```

命令行上的引号是必要的，以便告诉 cmd 解析器如何将单词分解为参数，但`ProcessBuilder`不需要它们，因为它已经预先分配了参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-09T00:31:43.673

我无法让它以上述任何方式工作。我最终将命令写入一个单独的脚本（每个空格都有“\”）并将其写入脚本文件，然后调用脚本文件。

# math - 二进制浮点可以表示哪些类型的数字？

> ID：12124936
> 
> 赞同：25
> 
> 时间：2012-08-25T19:21:30.567
> 
> 标签：math, language-agnostic, floating-point

我读过很多关于花车的文章，但都是不必要的。我*想*我已经很明白了，但是我只想确定一件事：

我知道，形式的分数`1/pow(2,n)`，带有`n`整数，可以用浮点数精确表示。这意味着如果我将`1/32`自身相加 3200 万次，我将得到精确`1,000,000`的 .

类似的东西`1/(32+16)`呢？这是二的二乘方之和的一，这行得通吗？或者它`1/32+1/16`有效吗？这是我感到困惑的地方，所以如果有人能为我澄清这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-25T19:26:21.083

规则可以总结为：

*   如果分母的素数分解仅包含 2，则可以用二进制精确表示一个数字。（即分母是 2 的幂）

所以`1/(32 + 16)`不能用二进制表示，因为它的分母是 3。但是`1/32 + 1/16 = 3/32`是。

也就是说，在浮点类型中可以表示的限制更多。例如，IEEE 中只有 53 位尾数，`double`因此`1/2 + 1/2^500`无法表示。

因此，只要指数的范围不超过 53 次方，您就可以进行二次幂之和。

* * *

将其推广到其他基础：

*   如果分母的素数分解仅由 2 和 5 组成，则可以以 10 为底精确表示一个数字。

*   如果 的分母的素数因式分解仅包含在 的因式分解中找到的素数，则有理数`X`可以精确地表示为基数。`N``X``N`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-25T20:08:19.467

^(当且仅当对于某些整数 M 和 e 等于 M•2 e)使得 -2 ^(53) < M < 2 ^(53)和 -1074 ≤ e ≤ 971时，有限数可以用常见的 IEEE 754 双精度格式表示。

对于单精度，-2 ^(24) < M < 2 ^(24)和 -149 ≤ e ≤ 104。

对于双精度，这些是双精度格式使用 52 位存储有效位（由于隐含 1 而通常具有 53 位）并使用 11 位存储指数这一事实的结果。11位编码从0到2047的数字，但是出于特殊目的排除了0和2047，并且编码后的数字有1023的偏差，因此它表示从-1022到1023的无偏指数。但是，这些无偏指数用于区间内的有效数字[1, 2)，并且那些有效数字有分数。为了将有效数表示为整数，我将指数范围调整了 52。单精度类似，用 23 位存储 24 位有效数，8 位用于存储指数，偏差为 127。

使用整数乘以 2 的幂而不是更常见的小数有效位来表示可表示的数字可以简化一些数论和其他关于浮点属性的推理。我在这个答案中使用了它，因为它允许简洁地表达一组可表示的值。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-25T19:27:53.417

浮点数使用以下形式逐字表示：

```
1.m * 2^e 
```

其中`1.m`是二进制分数，`e`是正整数或负整数。

因此，您可以`1/32 + 1/16`准确地表示为：

```
1.1000000 * 2^-4 
```

(`1.10`是相当于 1.5 的二进制小数。)`1/48`但是，不能以这种格式表示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T20:04:36.123

尚未提及的一点是，从语义上讲，浮点数可能最好被视为表示一系列值。值的范围有一个非常精确定义的中心点，并且 IEEE 规范通常要求浮点计算的结果是其范围包含在原始数字的中心点上操作的点的数字，但按顺序：

```
  双 N1 = 0.1;
  浮动 N2 = (浮动)N1;
  双 N3 = N2;

```

N2 是已在 N1 中表示的值的明确正确的单精度表示，尽管该语言愚蠢地要求使用显式强制转换。N3 将代表 N2 可以代表的值之一（语言规范恰好选择了`double`其范围以 的范围中间为中心的值`float`）。请注意，虽然 N2 表示其范围包含正确值的类型的值，但 N3 不表示。

顺便说一句，在 .net 和 .net 语言中将数字从字符串转换为浮点数似乎需要经过中间转换`double`，这有时可能会改变值。例如，即使值 13571357 可以表示为单精度浮点数，但值 13571357.499999999069f 会四舍五入为 13571358（尽管它显然更接近 13571357）。

# jquery - 使用 .each() 循环检查复选框和 .append 数据

> ID：12124938
> 
> 赞同：3
> 
> 时间：2012-08-25T19:21:38.517
> 
> 标签：jquery, loops, each

我在表中有一系列行，每行都有不同的值（价格），每一行都有一个复选框。该表是通过 PHP 循环生成的。

```
echo "<table border='0' cellpadding='10' id='booking-list'><tr>";
echo "<th>Booking ID</th><th>Customer ID</th><th>Start Date</th><th>Course Name</th><th>Amount Due</th><th>Date Payment Due</th><th>Add to basket</th></tr>";
$x = 0; 
while ($row = mysql_fetch_assoc($query)) {
    $balance = $row['price'] - $row['deposit'];

    echo "<td>" .$row['booking_id']. "</td><td>" .$cust_id. "</td><td>" .$row['start_date']. "</td><td>" .$row['name']. "</td><td>" .$balance. "</td><td>" .$row['balance_due_date']. "</td><td><input type='checkbox' name='' value='" .$x. "' /></td></tr>";
    $x++;
}
echo "</tr><table>"; 
```

对于选中的每个复选框，我想将 ( `.append`) 特定值 ( `$balance`) 添加到`form`输入字段。附加部分似乎正在工作，但我不确定如何遍历 jQuery 中的每个选中复选框以获取我需要的值。

```
function(){
    $('#booking-list input:checkbox').change(
        function(){
            if ($(this).is(':checked')) {
        $('<input />').attr({
                type: 'text',
            id: 'foo',
            name: 'bar',
        value: '<?php echo $balance; ?>'
        }).appendTo('#paypal-form form').text($(this).val());              
            } else {
                $('#paypal-form input:contains('+$(this).val()+')').remove();
            }
        }); 
```

现在，我只能得到最后`$balance`生成的值。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-25T19:29:00.900

要选择所有选中的复选框，您可以执行以下操作：

```
 $('#booking-list input:checkbox:checked').each(function(){
      $(this).doSomething();//this is the checked checkbox
  }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T19:33:54.640

您`$balance`在循环之后使用，这就是为什么您只获得最后一个值。

要直接在事件处理程序中使用该值，您必须为循环内的每个复选框创建一个单独的事件处理程序。相反，您可以将余额值放入复选框的数据中：

```
<input type='checkbox' name='' value='" .$x. "' data-balance='" .$balance. "' /> 
```

然后你可以在事件处理程序中使用它：

```
value: $(this).data('balance') 
```

旁注：现在你只有添加输入的代码，所以如果有人检查了某些东西然后取消选中它，输入仍然存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T19:30:50.977

我想可能是因为您正在重用 id 作为输入。您是否尝试过将输入的 id 作为 $cust_id？

以下每个的语法：

```
$('selector').each(function (index, currentObject) {
   // index starts with 0
   $(currentObject).doSomething();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-01T08:39:21.430

`onClick`您也可以在复选框事件 上调用此代码。

```
$(':checkbox:checked').each(function() {

}); 
```

# ruby-on-rails - # 的未定义方法“名称” 在 ActiveAdmin 行中

> ID：12124941
> 
> 赞同：2
> 
> 时间：2012-08-25T19:21:56.707
> 
> 标签：ruby-on-rails, activeadmin

我正在使用 ActiveAdmin，这是我的显示页面：

```
show do |product|
  attributes_table do
    row :name
    row :photos do
      @photos = product.photos
      @photos.each do |p|
        image_tag(p.photo)
      end
    end
  end
  active_admin_comments
end 
```

我收到此错误：`undefined method name' for #<Array:>`

它在这条线上：

```
@photos = product.photos 
```

为什么以及如何？我什至没有`name`照片。

## 更新

当我选择一张照片时——例如产品的第一张照片——它可以工作！真的很奇怪。

## 更新

它只是重置WEBRICK ...但现在我遇到了一个新问题。我的照片包含的网址是照片：字符串，当我使用上面的代码时，它会打印：

```
[#<Photo id: 1, created_at: "2012-08-31 20:34:15", updated_at: "2012-08-31 20:34:15", photo: "innoMicro.jpg", product_id: 3>] 
```

而不仅仅是网址..

## 更新（工作解决方案！）

这是我的最终和工作代码：

```
 show do |product|
    attributes_table do
      row :name
      row :description
      product.photos.each do |p|
        row :photo do
          image_tag(p.photo, :height => '256', :width => '256')
        end
      end
    end
    active_admin_comments
  end 
```

问题是每张照片都有一个新行..我可以把它们都放在同一行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T02:37:59.247

乍一看，有两件事看起来不太好：

1.  `@photos = product.photos`. 为什么`@`？这不像您在其他任何地方都需要该实例变量，您可能会无意中与 ActiveAdmin 在幕后生成的东西发生冲突。因此，请谨慎行事，只需将其设为局部变量即可。最简单的方法：丢失`@`.

2.  `image_tag(p.photo)`应该变成`image_tag(p.photo.url)`.

更正这两个并告诉我们它是否已修复，如果没有，新错误是什么。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T13:34:27.243

我不确定这是一个错字还是真正的错误，但你写的

```
product.images.all do |image|
    row :image do
        image_tag(image.image)
    end
end 
```

通常你应该使用 image_tag(image.url)

希望这是你的答案

# c# - 防止列表重复的代码合同

> ID：12124943
> 
> 赞同：0
> 
> 时间：2012-08-25T19:22:01.070
> 
> 标签：c#, code-contracts

我目前正在使用此合同检查参数和返回值是否不为空。现在，我需要一种方法来检查无论它采用哪个开关分支，生成的 IEnumerable 都不能在其代码值上有重复项。这是否可能使用代码合同。我尝试使用 Contract.ForAll 但没有运气。

```
internal static IEnumerable<MenuItemAction> GetMenuActions(MenuItem menuItem)
{
    Contract.Requires(menuItem != null);
    Contract.Ensures(Contract.Result<IEnumerable<MenuItemAction>>() != null);

    switch (menuItem.Code)
    {
        case 0:
            return new MenuItemAction[3] { 
        new MenuItemAction(){Code = 0, Label = "."}, 
        new MenuItemAction(){Code = 1, Label = ".."}, 
        new MenuItemAction(){Code = 2, Label = "..."}
    };
        case 1:
            return new MenuItemAction[2] { 
        new MenuItemAction(){Code = 3, Label = "."}, 
        new MenuItemAction(){Code = 4, Label = ".."}
    };
        case 2:
            return new MenuItemAction[2] { 
        new MenuItemAction(){Code = 5, Label = "."}, 
        new MenuItemAction(){Code = 6, Label = ".."}
    };
        default: return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T19:37:26.720

尝试

```
Contract.Ensures(
    Contract.Result<IEnumerable<MenuItemAction>>() != null &&
    Contract.Result<IEnumerable<MenuItemAction>>().Count() == 
        Contract.Result<IEnumerable<MenuItemAction>>()
           .Select(m => m.Code)
           .Distinct()
           .Count()
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T19:35:46.867

contract.ForAll 的代码是什么？你观察到了什么？

尽管您实际上并没有要求替代方案，但我建议您考虑使用 set 而不是 Array。

覆盖 MenuItemAction 上的 Equals 和 GetHashCode ，并且每次您想要不同项目的集合时 - 使用 Set 集合。

它保证值是唯一的，如果您想知道是否遇到重复项，您只需检查 Add 方法的返回值。

这一切都归结为您到底想要实现什么？您是要确保不同的值还是要确保没有人两次输入相同的值？（您是要保护内容还是使用？）。

无论如何，MenueItem 的代码是否可以超出 0-4 范围？或者换句话说 - 如果代码是 OutOfRange （提示提示 :-)），您实际上是否意味着该方法返回 null

# android - 在 FrameLayout 中定位视图

> ID：12124944
> 
> 赞同：0
> 
> 时间：2012-08-25T19:22:02.077
> 
> 标签：android

我试图在我的 FrameLayout 中放置一个视图，但是该视图以给定的宽度和高度定位在左上角。

```
/**
 * Adds a view to the window.
 */
public void AddPanel(PanelWrapper child, int Left, int Top, int Width, int Height) {
    this.window.addView(child.getObject(), new BALayout.LayoutParams(Left, Top, Width, Height));
    child.getObject().setPadding(Left, Top, 0, 0);

    for (int i=0;i<child.getNumberOfViews();i++) {
        Log.i("B4A", "View " + i);
        ViewEventListener vel = new ViewEventListener();
        vel.Initialize(this.ba, this.eventName, child.GetView(i).getObject());
    }

    ViewEventListener vel = new ViewEventListener();
    vel.Initialize(this.ba, this.eventName, child.getObject());
} 
```

我想要做的是将视图（PanelWrapper 是一个视图组）定位在给定尺寸的给定位置上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T20:03:04.610

如果它是像 ImageView 这样的视图，请尝试

```
android:scaleType="fitCenter" 
```

或者

```
android:gravity="center" 
```

在你的`layout.xml`. 可以在此处找到有关 android 布局的大量信息：http: [//www.learn-android.com/2010/01/05/android-layout-tutorial/3/](http://www.learn-android.com/2010/01/05/android-layout-tutorial/3/)

# ruby-on-rails - rails 3：如何从哈希创建时间，例如 Time.local，除了将哈希解释为位于不同的时区？

> ID：12124950
> 
> 赞同：0
> 
> 时间：2012-08-25T19:22:45.320
> 
> 标签：ruby-on-rails, datetime

给定一个包含时间和日期的哈希，当哈希是某个其他时区时，如何创建一个 UTC 时间对象？

例如，我的用户是 EST 并指定“15:04 8/25/2012”（通过视图中的 select_datetime），因此时间隐含 EST。

当他们提交表单时，time_hash = {"day"=>"25", "month"=>"8", "year"=>"2012", "hour"=>"15", "minute"=> “04”}

如果我设置

```
the_time = Time.local params[:date][:year], params[:date][:month], params[:date][:day], params[:date][:hour], params[:date][:minute] 
```

它创建了一个时间对象，即 2012 年 8 月 25 日 15:04 - 但在服务器的本地时间（太平洋），而不是用户的本地时间（东部）。

注意：我之前在同一方法中确实将 Time.zone 设置为东部时间，所以我认为 Time.local 会将哈希解释为东部时间，但事实并非如此。我也试过 Time.zone.local 但这会引发错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T22:22:04.513

```
Time.zone.local 
```

应该可以正常工作。它比选择器稍微好一点，`Time.local`并且只接受整数作为其参数，`Time.local`而不介意字符串。在那里打一些电话`to_i`，你应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T22:07:54.493

一个技巧似乎是：使用 Time.zone.parse 这也意味着手动将哈希转换为“YYYY-MM-DD HH:MM:00”格式。

```
the_time = Time.zone.parse("#{params[:date][:year]}-#{params[:date][:month]}-#{params[:date][:day]} #{params[:date][:hour]}:#{params[:date][:minute]}:00") 
```

# midl - 如何使用 MIDL 生成 x86 和 x64 代码？

> ID：12124951
> 
> 赞同：4
> 
> 时间：2012-08-25T19:23:15.837
> 
> 标签：midl

如何使用 MIDL 为 x86 和 x64 生成代码？

我在 Visual Studio 2010 中创建了一个 IDL 文件，当我在 x86 模式下编译产品时，然后在 x64 中编译产品时，我必须“触摸”该 IDL 文件，以便它重新生成与 x64 相关的代码。我可以以某种方式告诉 MIDL 将两个代码生成到同一个文件中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:18:15.563

如果您指的是 Generated Files 文件夹下的文件，如果您更改的只是目标平台，您将不会看到它们发生变化（好吧，除非您在 IDL 中放置了使用特定于平台的定义的 #ifdef 块） . 请记住，MIDL 的输出是源代码，而不是二进制文件。生成的代码中使用的数据类型的名称不会改变，因此 MIDL 的输出将是相同的，即使编译器所针对的机器架构不同。

您可以通过复制 XXX_i.h 和 XXX_i.c 文件并在平台之间进行比较来验证这一点。为此，构建、复制、重建，然后比较文件；唯一应该不同的是时间戳。

所以，回到你原来的问题：你已经这样做了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:16:26.933

IDL 文件定义了一个接口，该接口可以使用 64 位平台功能或 32 位平台功能。IDL 可用于生成存根；如果接口没有特定于 32 位平台的定义或特定于 64 位平台的定义，则可以生成存根（即一个 IDL 文件）。但是，这取决于您公开的接口。简短的回答：如果您将接口定义为 32 位和 64 位兼容，则您不需要两个不同的 IDL 文件——否则您需要两个不同的 IDL 文件。

在不知道“触摸”（通常意味着更新文件的日期/时间，软件工程）意味着什么的情况下，很难具体说明您需要做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-04T15:21:32.363

我知道这是一个老问题，但如果其他人在这里打这个是我解决它的方法。

在包含 IDL 文件的项目中，我向所有删除 MIDL 输出文件的平台和配置添加了一个预构建事件，如下所示......

```
if exist $(ProjectName).h del $(ProjectName).h
if exist $(ProjectName)_i.c del $(ProjectName)_i.c
if exist $(ProjectName)_p.c del $(ProjectName)_p.c 
```

我本可以只删除代理 (_p) 文件，因为这是唯一特定于平台的 MIDL 生成文件。

如果您的代理存根源文件具有不同的名称或扩展名，请使用它们。

# css - :before 和 :after 伪元素可以从父元素继承高度吗？

> ID：12124953
> 
> 赞同：27
> 
> 时间：2012-08-25T19:23:53.760
> 
> 标签：css, css-selectors, pseudo-element, inheritance

我想知道`:before`和`:after`伪元素是否可以使用该`inherit`值从父级继承高度，而实际元素没有这样做？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-25T19:27:08.327

不，伪元素可以从其生成元素的父元素继承值的唯一方法是生成元素本身也从其父元素继承。

这是因为继承发生从父级到子级，一次一个级别。为了使继承能够跨越多个后代级别，*每个后代都必须继承*。

例如，考虑以下 HTML：

```
<div class="parent">
    <div class="child">
    </div>
</div> 
```

使用以下 CSS：

```
.parent {
    width: 100px;
    height: 100px;
}

.parent > .child:before, .parent > .child:after {
    content: '';
    position: absolute;
    width: inherit;
    height: inherit;
} 
```

这将不起作用，因为即使伪元素具有 的值`inherit`，生成它们的元素，即`.parent > .child`，也不会继承自`.parent`。相反，它们继承了这两个属性的默认值`auto`。

为了使它起作用，您还需要`.parent > .child`继承：

```
.parent {
    width: 100px;
    height: 100px;
}

.parent > .child {
    width: inherit;
    height: inherit;
}

.parent > .child:before, .parent > .child:after {
    content: '';
    position: absolute;
    width: inherit;
    height: inherit;
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-08-22T11:13:56.273

I know this question is fairly old, but I stumbled on it today. According to [http://www.w3.org/TR/CSS21/generate.html](http://www.w3.org/TR/CSS21/generate.html), the accepted answer isn't accurate:

> The `:before` and :after pseudo-elements inherit any inheritable properties from the element in the document tree to which they are attached.

I just tried inheriting width and it worked.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-05T07:27:46.363

关于这些答案，我只是碰到了转型的方面。它可能类似于继承；我希望它可以帮助某人。

有这个：

```
<div class="box">    
  <div class="frame"></div>
</div> 
```

和这个转换`frame`：

```
transform: rotate(10deg); 
```

然后`frame:before`and`frame:after`也被转换。然而，它们不具有 的属性`frame`，例如`width`和`height`，就像上面解释的那样。完整示例请参见此处：

[http://jsfiddle.net/chafpgwt/1/](http://jsfiddle.net/chafpgwt/1/)

在这个小提琴上，有三个嵌套的正方形，每个旋转 10 度，但变换定义只为 设置，`frame`而不是为。`frame:after``frame:before`

认为转换也不是“继承的”是一个陷阱，因为其他一切都不是。这种转变在另一种情况下会产生影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-24T16:27:54.413

如果你想**使用你的`::before`伪元素来实现背景** ，诀窍是确保你定位了你的元素`absolute`和他的 parent `relative`。还要确保设置父级的宽度。

## 例子

```
&__item {

    position: relative;
    width: 100%;
    height: 100%;

        &::before {
            content: "";
            background-color: red;
            background-size: 100%;

            position: absolute;
            top: 0;
            left: 0;

            width: 100%;
            height: 100%;

        }
} 
```

# c++ - DoubleLinkedList 删除错误

> ID：12124958
> 
> 赞同：3
> 
> 时间：2012-08-25T19:24:22.817
> 
> 标签：c++, doubly-linked-list

我正在制作一个双重链接列表。该错误与我的 Remove 方法有关。我想不通。有人知道吗？

这是哪里的错误？

> 错误 1 ​​错误 C2027：使用未定义类型 'DoublyListNode' c:\users\conor\documents\college\c++\projects\repeat - doublylinkedlist\repeat - doublylinkedlist\doublylinkedlist.h 230 1 重复 - DoublyLinkedList

```
// -------------------------------------------------------------------------------------------------------
//  Name:           Remove
//  Description:    Removes the node that the iterator points to, moves iterator forward to the next node.
//  Arguments:      p_iterator: The iterator to remove
//                  isForward: Tells which direction the iterator was going through the list
//  Return Value:   None.
// -------------------------------------------------------------------------------------------------------
void Remove(DoublyListIterator<Datatype>& m_itr)
{
    DoublyListNode<Datatype>* node = m_head;
    // if the iteratordoesn’t belong to this list, do nothing.
    if (m_itr.m_list != this)
        return;
    // if node is invalid, do nothing.
    if (m_itr.m_node == 0)
        return;
    if (m_itr.m_node == m_head)
    {
        // move the iteratorforward and delete the head.
        m_itr.Forth();
        RemoveHead();
        m_size--;
    }
    else
    {
        // scan forward through the list until you find
        // the node prior to the node you want to remove
        while (node->m_next != m_itr.m_node)
            node = node->m_next;
        // move the iterator forward.
        m_itr.Forth();
        // if the node you are deleting is the tail,
        // update the tail node.
        if (node->m_next == m_tail)
        {
            m_tail = node;
        }
        // delete the node.
        delete node->m_next;
        // re-link the list.
        node->m_next = m_itr.m_node;
        m_size--;
    }
} 
```

如果需要更多代码，请询问。我不想在 Stack 溢出用户身上放很多代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T20:39:27.603

The problem was a typo of the class DoublyListNode. The class was names DLNode. So this gave the error being discussed above.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T19:39:00.023

您正在检查尾节点，但不检查头和尾之间的节点。甚至在将节点链接到下一个成员之前，您就通过删除节点来破坏链。

让我们分析一下：-

```
while (node->m_next != m_itr.m_node)
            node = node->m_next; 
```

在循环`node->m_next`点之后`m_itr.m_node`

```
 delete node->m_next;
    // re-link the list.
    node->m_next = m_itr.m_node; 
```

您正在分配一个已删除的节点！！！！

更改代码：-

```
node->m_next = m_itr.m_node;
delete m_itr; 
```

# python - 使用子进程导入 SQL 转储

> ID：12124959
> 
> 赞同：5
> 
> 时间：2012-08-25T19:24:26.287
> 
> 标签：python, mysql, subprocess

我正在尝试通过 Python 和子进程将 .sql 转储从磁盘导入 MySQL。即相当于

```
mysql -u user -ppassword db < dump.sql 
```

我的 Python 代码看起来像这样（但我尝试了很多替代方法 :)）：

```
proc = subprocess.Popen(
    ("mysql -u %s -p%s database"  % (MYSQL_USER, MYSQL_PASSWORD)).split(),
    stdin=subprocess.PIPE,
    stdout=subprocess.PIPE,
    shell=False)
out, err = proc.communicate('source /tmp/dump.sql') 
```

应用程序成功完成，但没有导入 MySQL 的行。我也尝试过`dump.sql`这样的管道：

```
proc = subprocess.Popen(
    ("mysql -u %s -p%s database < /tmp/dump.sql"  % (MYSQL_USER, MYSQL_PASSWORD)).split(),
    stdin=subprocess.PIPE,
    stdout=subprocess.PIPE,
    shell=False)
out, err = proc.communicate() 
```

如果重要的话，当我设置时`shell=True`我得到`ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)`）

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-02-01T18:38:47.700

如果您从 Google 访问此页面，请注意，sigi 的答案会起作用，但它会将所有转储文件加载到内存中，如果它太大而无法容纳，它将失败。

这是我的做法：

```
with open(dump_filename, 'r') as f: 
       command = ['mysql', '-u%s' % db_settings['USER'], '-p%s' % db_settings['PASSWORD'], db_settings['NAME']]
       proc = subprocess.Popen(command, stdin = f)
       stdout, stderr = proc.communicate() 
```

它做同样的事情，但是内存消耗是最小的，因为转储是直接流式传输到 mysql 的标准输入的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-25T19:41:15.173

您使用 Popen.communicate() 错误。

```
import subprocess

proc = subprocess.Popen(["mysql", "--user=%s" % USER, "--password=%s" % PASS, "database"],
                        stdin=subprocess.PIPE,
                        stdout=subprocess.PIPE)
out, err = proc.communicate(file("/tmp/dump.sql").read()) 
```

# silverlight - 使用 AutoFac 引导程序？

> ID：12124961
> 
> 赞同：0
> 
> 时间：2012-08-25T19:24:29.137
> 
> 标签：silverlight, xaml, autofac

我正在尝试使用 AutoFac 将使用 StructureMap 的 IOC 的 WPF 示例转换为 Silverlight

事实证明这是非常困难的

我已经定义了一个静态 BootStrapper 类

```
public class BootStrapper
{
  public static IContainer BaseContainer { get; private set; }

  public static FlexContractStructureViewModel FlexContractStructureViewModel()
  {
      return BaseContainer.Resolve<FlexContractStructureViewModel>();
  }

  public static void Build()
  {
      if (BaseContainer == null)
      {
          var builder = new ContainerBuilder();
          builder.RegisterAssemblyTypes();

          BaseContainer = builder.Build();
      }
  }

  static BootStrapper()
  {

  }

} 
```

这是在 App.xaml.cs 的 Application_Startup 中初始化的

```
private void Application_Startup(object sender, StartupEventArgs e)
{
  BootStrapper.Build();

  this.RootVisual = new MainPage();
} 
```

我已将我的一个视图的 DataContext 设置为使用我的 BootStrapper

```
DataContext="{Binding Path=FlexContractStructureViewModel, 
              Source={StaticResource classes:BootStrapper}}" 
```

但我收到错误找不到具有名称/密钥类的资源：BootStrapper

我正在使用状态来更改要添加的 App.xaml 的书

但我不能这样做，因为 ObjectDataProvider 无法识别

我已经尝试了下面的等价物，但没有运气

```
<bs:BootStrapper xmlns:bs="clr-namespace:SLDashboard2.Classes" x:Key="BootStrapper"/> 
```

我认为这可能与 BootStrapper 静态有关？但我不想不断创建新的容器

有人可以帮忙吗？

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T20:33:25.530

错误的。您不应该在 IoC 中注册所有 ViewModel 吗？然后你将它们注入你的构造函数。它们永远不应该是静态的，在我看来，我通常不使用静态资源作为我的数据上下文

# video - iTunes 的 Applescript：设置视频类型不起作用

> ID：12124965
> 
> 赞同：1
> 
> 时间：2012-08-25T19:24:42.590
> 
> 标签：video, applescript, itunes

如果我取消注释“视频类型”行，则并非所有文件都将添加到库中，并且部分添加的文件将不会被处理（包括可洗牌和可收藏的标志）。

```
on adding folder items to my_folder after receiving the_files
    repeat with i in the_files
        tell application "iTunes"
            set newAddition to add i
            tell newAddition
                (* set video kind to music video *)
                set shufflable to true
                set bookmarkable to false
            end tell
        end tell
    end repeat
end adding folder items to 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:24:02.563

也许“设置视频类型”不适用于每种类型的媒体（轨道）。

无论如何，对所有 iTunes 代码进行防错是很好的，因此每当您在 iTunes 中更改某些内容时，添加一个“尝试/错误”例程，以便您可以根据需要做出反应。

这向您显示了一个不错的错误对话框：

```
 try
      set video kind to music video
 on error the error_message number the error_number
      display dialog "Error: " & the error_number & ". " & the error_message buttons {"OK"} default button 1
 end try 
```

以这种方式尝试一次，当它失败时，您会收到错误号和消息。

希望有帮助。

顺便说一句：您可以在“Apple-Script Editor”中使用 CTRL-Click 选择并粘贴此类片段。

# android - 使用套接字的 2 部手机之间的 android 聊天

> ID：12124966
> 
> 赞同：0
> 
> 时间：2012-08-25T19:24:46.527
> 
> 标签：android, sockets, ip

这有点长，所以我将从问题开始：如何让 ip 连接 Android 手机上的套接字（不在专用网络上）？

以及如何检查电话 ISP 是否阻止了端口？

更多信息：

我有一个程序可以在地图上显示用户位置，您可以单击它们并开始聊天。我已经测试了套接字连接，它在 2 个模拟器上运行良好，但是当我在手机上尝试时，它无法连接套接字。

超时异常：

```
NotificationChat.ChatSocket = new Socket(serverAddr, 5000); 
```

我最好的猜测是服务器（又名电话 1）的 IP 不正确，或者端口可能被阻止或正在使用中。

我尝试了两种获取电话IP的方法：

```
public static String getLocalIpAddress() {      
    try {
        Socket socket = new Socket("www.google.com", 80);
        Log.i("iptest", socket.getLocalAddress().toString().substring(1));
        String ip=socket.getLocalAddress().toString().substring(1);
        socket.close();
        return ip;

    } catch (Exception e) {
        Log.i("", e.getMessage());
        return "exception in get ip";
    }

    /*
    try {
        for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
            NetworkInterface intf = en.nextElement();
            for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
                InetAddress inetAddress = enumIpAddr.nextElement();
                if (!inetAddress.isLoopbackAddress()) {
                    return inetAddress.getHostAddress().toString();
                }
            }
        }
    } catch (SocketException ex) {
        Log.e("b2264", ex.toString());
    }
    return null;  */
} 
```

我得到的IP是：10.227.130.191，如果我没记错的话是A类本地IP。

服务器端：

```
while(flag==1)
    {   
        if(ss==null)
        {
            try {
                    ss = new ServerSocket(SERVERPORT);

                } catch (IOException e) {
                    e.printStackTrace();
                }                     
        }
            try {
                    Log.d("thread","chatnotifiction befor ss accpect");
                    Socket NotAvilabale=null;
                     NotAvilabale = ss.accept();
                    if(ChatSocket!=null)
                    {
                        Log.d("test55","not avilable");
                        PrintWriter out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(NotAvilabale.getOutputStream())),true);
                        out.println("notav");
                        NotAvilabale.close();
                        continue;
                    }
                    ChatSocket=NotAvilabale;
                    Log.d("thread","chatnotifiction after ss accpect");
                    CharSequence contentText = "someone wants to talk to you";

                    PendingIntent contentIntent = PendingIntent.getActivity(this, 1, notificationIntent, 2);

                    notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);         

                    mNotificationManager.notify(NOTIFI_ID, notification);
            } catch (IOException e) {
                Log.d("chat notifi io exception","chat notifi io exception ");
                    e.printStackTrace();
            }catch (Exception e) {
                Log.d("chat notifi Exception 2","chat notifi Exception 2 ");
                // TODO: handle exception
            }

    } 
```

我对套接字没有太多经验。这是我第一次使用它们。我希望你们中的一个人有更多的经验，可以帮助我。

在此先感谢（对不起，绉纱英语）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T23:17:29.470

因此，虽然我不太了解蜂窝基础设施的工作原理，但我只能想象它与任何 ISP 都相似。

因此，想象一下您是一家拥有数百万客户的大型运营商。你不能给他们每个人自己保留的公共 IP，这将是昂贵和低效的。但是您必须为他们提供 IP 才能向他们发送数据。因此，您基本上将您的网络划分为多个部分。每个网段都有完整的私有 ip 网络。由于电话上的大多数连接都不是点对点的，因此可以安全地假设所有出站流量都通过一个网关或一组网关，直到它到达一个公共网关，该网关将把消息中继到任何公共主机被请求的地方。但是，无论该网关的 IP 是什么，您的服务器（以及 Internet 上的任何服务器）都可能将其视为客户端 IP（这可能与客户端报告的 IP 不同）。所有设备都以这种方式运行，假设您不能仅从同一网络中的可路由 IP 连接到 10.227.130.191 也是安全的，除非它有一个打开的端口，在这种情况下，这可能意味着运行您的软件。我认为手机的物理接近度可能会在某种程度上发挥作用，决定两部不同的手机放在哪个私人部分。然而在大多数情况下，仅仅因为他们没有足够的信息来知道是否有足够的信息来判断位于 Lat1、Lng1 IP 10.127.xx 的电话 A 可以与位于 Lat1、Lng1 IP 10.127.xy 的电话 B 通话，这还不够可预测。它们位于网络的同一物理段上。我认为手机的物理接近度可能会在某种程度上发挥作用，决定两部不同的手机放在哪个私人部分。然而在大多数情况下，仅仅因为他们没有足够的信息来知道是否有足够的信息来判断位于 Lat1、Lng1 IP 10.127.xx 的电话 A 可以与位于 Lat1、Lng1 IP 10.127.xy 的电话 B 通话，这还不够可预测。它们位于网络的同一物理段上。我认为手机的物理接近度可能会在某种程度上发挥作用，决定两部不同的手机放在哪个私人部分。然而在大多数情况下，仅仅因为他们没有足够的信息来知道是否有足够的信息来判断位于 Lat1、Lng1 IP 10.127.xx 的电话 A 可以与位于 Lat1、Lng1 IP 10.127.xy 的电话 B 通话，这还不够可预测。它们位于网络的同一物理段上。

因此，除非您在 wifi AP 上，否则很难允许手机之间直接连接，因为它们位于同一个可路由网络上的可能性非常低。

# c# - 如何创建 WinRT C# dll api

> ID：12124967
> 
> 赞同：0
> 
> 时间：2012-08-25T19:24:46.500
> 
> 标签：c#, dll, windows-runtime

我正在创建一个应用程序，我希望有一个成就系统。而不是只保存在应用程序中，我希望系统更像是一个 API，这样我就可以将用户信息存储在数据库中，并在我的其他应用程序中使用这个系统。我也可以将它提供给其他开发人员，作为 Windows 8 上 Xbox Live 的替代品。

我只是在进行一些早期测试和学习。我的代码将在单击按钮或其他内容时显示通知：

```
ToastTemplateType toastTemplate = ToastTemplateType.ToastImageAndText04;
        XmlDocument toastXml = ToastNotificationManager.GetTemplateContent(toastTemplate);
        XmlNodeList toastTextElements = toastXml.GetElementsByTagName("text");
        toastTextElements[0].AppendChild(toastXml.CreateTextNode("Achievement Unlocked! - ICE"));
        toastTextElements[1].AppendChild(toastXml.CreateTextNode("Your First Achievement"));
        toastTextElements[2].AppendChild(toastXml.CreateTextNode("You gained 10IP!"));
        XmlNodeList toastImageAttributes = toastXml.GetElementsByTagName("image");
        ((XmlElement)toastImageAttributes[0]).SetAttribute("src", "http://fc07.deviantart.net/fs28/f/2008/167/b/c/Pipboy_by_nully1.png"); //just a fun test photo
        ((XmlElement)toastImageAttributes[0]).SetAttribute("alt", "red graphic");
        ToastNotification toast = new ToastNotification(toastXml);
        ToastNotificationManager.CreateToastNotifier().Show(toast); 
```

我将如何将其放入 dll 中，以便您可以调用它而不必每次都使用这样的大代码块？

我希望这是有道理的。如果没有，请告诉我，我会尝试进一步解释！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T06:26:01.483

您可以创建一个 C# Windows 运行时组件并将您的 API 封装在一个类中。然后，您需要将实现您的类的 winmd 文件（如果您需要 Winrt API 表面所支持的 C# 功能之外的 C# 功能，可能还有与之关联的 DLL）连同将适当的注册信息添加到他们的步骤一起发送给客户应用程序清单。这应该允许您创建其他人可以使用的可再分发组件。

# wordpress - 本地主机：Wordpress nmedia 用户上传插件文件上传错误

> ID：12124969
> 
> 赞同：0
> 
> 时间：2012-08-25T19:25:11.540
> 
> 标签：wordpress, file-upload, xampp, localhost, filesize

在我的本地主机（XAMPP）环境中，我正在使用名为 nMedia User Uploader 的 Wordpress 插件，并且在上传文件时出现以下错误

```
Warning: filesize() [function.filesize]: stat failed for C:\xampp\htdocs\newsite/site-content/uploads/articles/user_uploads/jack_artist/Untitled-1.jpg in C:\xampp\htdocs\newsite\plugs\nmedia-user-file-uploader\nm_fileuploader.php on line 214 
```

我试图检查`var_dump($dt);`但无法理解这里有什么问题。

```
array(6) { ["fileName"]=> string(14) "Untitled-1.jpg" ["fileDescription"]=> string(0) "" ["userID"]=> int(3) ["fileType"]=> string(4) ".jpg" ["fileSize"]=> bool(false) ["fileUploadedOn"]=> string(19) "2012-08-25 19:20:37" } 
```

这是 $dt 数组

```
$dt = array(    'fileName'          => nmFileUploader::$file_name,
                'fileDescription'   => nmFileUploader::$desc,
                'userID'            => $user_id,
                'fileType'          => nmFileUploader::$file_type,
                'fileSize'          => filesize($filePath),
                'fileUploadedOn'    => current_time('mysql')
             ); 
```

那么 localhost xampp 是否存在此问题并且可以在实时服务器上运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:11:34.840

那么问题是由于本地主机上的文件权限设置，请在目录权限设置为 775 的实时或基于 Linux 的环境中检查。

# java - 面板背景图片截图

> ID：12124970
> 
> 赞同：3
> 
> 时间：2012-08-25T19:25:20.280
> 
> 标签：java, swing, graphics, jpanel, paintcomponent

我正在尝试在 JPanel 中绘制图像（使用鼠标），这是可行的，但是当我尝试截取面板的屏幕截图并生成此图像时，我只能看到图像背景而没有绘制鼠标。

*这是我生成背景* Panel.java的代码

```
@Override
protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    g.drawImage(this.createImage("/imagenes/cuerpoHumano.png").getImage(), 0, 0, null);
} 
```

*这是我在图像上绘制为铅笔的代码：* Panel.java

```
private void formMouseDragged(java.awt.event.MouseEvent evt) {
    x = evt.getX();
    y = evt.getY();

    this.getGraphics().setColor(Color.RED);
    this.getGraphics().fillOval(x, y, 4, 4);
} 
```

*这是生成屏幕截图的代码*

```
Dimension size = panel.getSize();
BufferedImage image = (BufferedImage) panel.createImage(size.width, size.height);
Graphics g = image.getGraphics();
panel.paint(g);
g.dispose();
try {
    String fileName = UUID.randomUUID().toString().substring(0, 18);
    ImageIO.write(image, "jpg", new File(path, fileName + ".jpg"));

} catch (IOException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T19:28:21.367

当您截取屏幕截图时，将`paintComponent()`调用该方法。这意味着它只会为您绘制图像。您必须将鼠标移动存储在某个模型中并在`paintComponent()`方法中绘制模型的内容。`repaint()`该方法通过在鼠标移动过程中在面板上调用来触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T22:48:17.183

我认为这是有效的代码。

```
public class PanelImagenCuerpoHumano extends JPanel {

    private int x = -1;
    private int y = -1;
    private Image image = null;
    private ArrayList<Point> puntos = new ArrayList<Point>();

    public PanelImagenCuerpoHumano() {

        image = new ImageIcon(getClass()
            .getResource("/imagenes/cuerpoHumano.png")).getImage();

        this.addMouseMotionListener(new MouseMotionListener() {

            @Override
            public void mouseDragged(MouseEvent e) {
                x = e.getX();
                y = e.getY();
                puntos.add(new Point(x, y));
                repaint();
            }

            @Override
            public void mouseMoved(MouseEvent e) {
            }
        });
    }

    @Override
    protected void paintComponent(Graphics g) {

        g.drawImage(image, 0, 0, null);
        for (Point p : puntos) {
            g.setColor(Color.red);
            g.fillOval(p.x, p.y, 3, 3);
        }
    }
} 
```

# c# - 为什么 System.Numerics.BigInteger 不能用于面向 .Net 4 的可移植库中

> ID：12124971
> 
> 赞同：3
> 
> 时间：2012-08-25T19:25:22.377
> 
> 标签：c#, visual-studio-2012

[`System.Numerics.BigInteger`](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger%28v=vs.100%29)在 .Net 4 和 Silverlight 4 中可用。但是，Visual Studio 2012 不允许在可移植库中使用。为什么需要.Net 4.5？

如果我通过编辑项目文件来强制它，它会拒绝编译，如果我使用“添加引用”添加它，它会将目标更新为 .Net 4.5

# api - 我如何学习 chrome.extension.sendRequest 方法？

> ID：12124976
> 
> 赞同：4
> 
> 时间：2012-08-25T19:27:03.590
> 
> 标签：api, google-chrome, google-chrome-extension

我试图浏览扩展 API 并搜索了谷歌。我可以找到 chrome.extension.sendMessage 可用的信息，但很难找到 chrome.extension.sendRequest 方法的任何信息。

请帮助获得 Chrome 扩展的最佳教程，因为至少在这里谷歌对我帮助不大:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-01T01:55:18.400

它已被弃用。

使用 sendMessage：http: [//developer.chrome.com/extensions/runtime.html#method-sendMessage](http://developer.chrome.com/extensions/runtime.html#method-sendMessage)

# .htaccess - URL 重写规则（子文件夹 .htaccess）

> ID：12124980
> 
> 赞同：0
> 
> 时间：2012-08-25T19:27:48.487
> 
> 标签：.htaccess, subdirectory

我有这个 .htaccess 文件

```
domain.com/modules/mymodule/.htaccess 
```

这个htaccess文件可以“处理”网址吗`domain.com/something`

我不能在根目录上放置或编辑 .htaccess，我只能将它放在 mymodule 子文件夹中

* * *

我不想让用户看到

```
domain.com/modules/mymodule/mymodulepage 
```

但类似的东西

```
domain.com/mymodulepage 
```

这可以做到吗？

我没有发布任何我尝试过的东西，因为它们只是绝望的尝试，比如玩 RewriteBase 等等.. 但我知道 url 没有被子文件夹的 htaccess 文件“处理”！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T19:32:14.340

> 这个 htaccess 文件可以“处理”诸如 domain.com/something 之类的 url

不，它不能。除非请求是针对该目录或其子目录中的某些内容，否则它不会被访问。

您可以`domain.com/modules/mymodule/mymodulepage`重定向到`domain.com/mymodulepage`，但是一旦它在那里，您将没有任何规则来处理它。

如果除了 中的 htaccess 文件之外，您无权访问任何类型的服务器配置`/modules/mymodule/`，那么您将无法执行此操作。如果您确实有权访问某种级别的配置，则可以执行以下操作：

```
Alias /mymodulepage /the/path/to/modules/mymodule/ 
```

这会将 URI 指向 URI所在`/mymodulepage`的文件路径。`/the/path/to/modules/mymodule/``/modules/mymodule/`

# regex - 使用 bash 脚本在文本文件中写入输入/操作值

> ID：12124984
> 
> 赞同：0
> 
> 时间：2012-08-25T19:28:07.063
> 
> 标签：regex, bash

我的 bash 脚本中有一些行计算值并显示在屏幕上。可以说，

```
Adder $a $b 
```

我想在文本文件中打印 Adder 返回的值。我该怎么做？

假设加法器运行了几个循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T19:33:01.550

尝试将其管道传输到`tee`：

```
Adder $a $b | tee output.txt 
```

[http://linux.die.net/man/1/tee](http://linux.die.net/man/1/tee)

# javascript - jQuery UI Accordian：如何保持特定窗口默认打开？

> ID：12124986
> 
> 赞同：-4
> 
> 时间：2012-08-25T19:28:11.303
> 
> 标签：javascript, jquery, jquery-ui

默认情况下，第一个手风琴窗口保持打开状态，如何指定默认打开另一个手风琴窗口而不是第一个？

[http://jqueryui.com/demos/accordion/#default](http://jqueryui.com/demos/accordion/#default)

```
$('.accordian').accordion({
   collapsible: true        
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T19:31:46.060

你可以尝试使用`active = 2`

尝试：

```
$(".accordian").accordion({
    collapsible: true,
    active: 2
}); 
```

或者：

```
$(".accordian").activate(index); //for example replace index with 2 
```

# asp.net - 具有缓存依赖关系的分布式缓存

> ID：12124993
> 
> 赞同：0
> 
> 时间：2012-08-25T19:29:06.047
> 
> 标签：asp.net, performance, caching, distributed-computing

是否有一个分布式缓存系统（最好带有 .NET 客户端）具有开箱即用的编程缓存依赖项？

在我的研究中，我只发现了基于时间的缓存过期的分布式缓存。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T14:21:02.373

您可以使用 GigaSpaces XAP 数据网格，并在客户端上有一个本地缓存，该缓存保存该客户端所需的缓存项，并具有用于在 .NET 中驱逐该缓存的完整编程 API。

参见： [http ://wiki.gigaspaces.com/wiki/display/XAP9NET/Local+Cache](http://wiki.gigaspaces.com/wiki/display/XAP9NET/Local+Cache)

如果您想控制远程（分布式）缓存驱逐策略，现在您需要用 Java 编写它。

因此，您可以混合搭配，拥有一个带有自定义本地驱逐策略的 .NET 客户端，并拥有用 Java 编写的远程分布式缓存策略，或者只有两者之一。

这个 Java eviction policy API 实际上只是在当前开发的 9.1 版本中改进为更简单的 API，将在两三个月后发布，您仍然可以使用此版本的早期访问权限，或者使用旧 API。

您可以在此处查看新 API 的自定义驱逐策略示例： [https ://github.com/OpenSpaces/PrioritizedEvictionStrategy](https://github.com/OpenSpaces/PrioritizedEvictionStrategy)

[您可以在此处阅读有关自定义驱逐策略的旧 API： http](http://wiki.gigaspaces.com/wiki/display/SBP/Custom+Eviction) ://wiki.gigaspaces.com/wiki/display/SBP/Custom+Eviction

新的 API 很快就会被记录在案，但从上面链接中的示例代码来看，它非常简单。

顺便说一句，我是 GigaSpaces 的员工。

# c++ - 对象的 reinterpret_cast

> ID：12124994
> 
> 赞同：0
> 
> 时间：2012-08-25T19:29:09.220
> 
> 标签：c++, casting, compilation, reinterpret-cast

采用这个结构：

```
struct Foo
{
    float m_foo;
    // no other member
};

// A Foo object.
Foo f; 
```

哪个更贵？

```
float result = std::sin(f.m_foo); 
```

或者

```
float result = std::sin(*(reinterpret_cast<float*>(&f)));
// f can be interpreted like float in this case 
```

我认为第二种情况更快，但我不确定，因为我不知道编译器将如何处理它。你能告诉我什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-25T19:35:34.933

> 哪个更贵？

IME，调用***未定义行为***的方法最终总是更昂贵。

如果你想把它移植到某个新平台，或者另一个编译器，或者你的编译器的新版本，***这样的代码可能会崩溃***。或者它可能会使其他一些看起来很无辜的代码爆炸。或者它可能只在周日这样做，因为您的客户无法致电支持。（他们会在星期一打电话，所以如果你写这样的代码，你应该尽可能多地在星期一起飞。）或者它可能只在你的老板在附近，或者在满月，或者在编译器版本构建的时候这样做。月初。

如果您有一些***具体案例***需要加速某些代码，并且***通过 profiling***发现这段代码是一个瓶颈，那么请***使用您的真实应用程序***和真实数据来***衡量这是否会带来任何相关的性能优势。***如果是这样，那么以上帝的名义*在这个地方*使用它，但要在那里放一些非常明显的评论，解释你做了什么以及为什么。

# c# - MVC (4) 和 EF (4) 中的导航属性验证

> ID：12124996
> 
> 赞同：0
> 
> 时间：2012-08-25T19:29:31.537
> 
> 标签：c#, asp.net-mvc, entity-framework, validation, asp.net-mvc-4

我用 EF 创建了一个模型，然后在 MVC 中创建了一个控制器和视图。模型类型`A`具有要键入的导航属性`B`。因此，当我创建时，`A`我想选择一个`B`.

MVC 向导创建控制器并仅查看为标量属性创建的字段。因此，我将创建操作更改`A`为：

```
public ActionResult Create() //Create action for A
{
    List<B> b = db.B.ToList(); //db is my DataContext

    ViewData["B"] = companies.Select(option => new SelectListItem
                    {
                        Text = (option.Name.ToString()),
                        Value = (option.Id.ToString())
                    });
    return View();
} 
```

并添加到我的观点：

```
<div class="editor-label">
    @Html.LabelFor(model => model.B)
</div>
<div class="editor-field">
    @Html.DropDownListFor(model => model.B,  (IEnumerable<SelectListItem>)ViewData["B"], "---- Select B ----")
    @Html.ValidationMessageFor(model => model.B)
</div> 
```

到目前为止一切都很好，我得到了 HTML

```
<select class="valid" id="B" name="B">
    <option value="">---- Select B ----</option>
    <option selected="selected" value="1">TestB</option>
</select> 
```

但是，当我提交时，我收到错误：

```
The value '1' is invalid. 
```

没有编写任何验证，它一定是在某处自动生成的。如何更正它以检查 ViewData["B"] 集合 ID 的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T19:47:44.260

问题是您的下拉列表的值是`Id`- 但属性是`B`.

您应该改为绑定到导航属性的 FK。我不确定你的模型（如果这没有帮助你应该发布它）

```
<div class="editor-field">
    @Html.DropDownListFor(model => model.BId,  (IEnumerable<SelectListItem>)ViewData["B"], "---- Select B ----")
    @Html.ValidationMessageFor(model => model.BId)
</div> 
```

注意我已更改`model.B`为`model.BId`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T21:38:33.787

所以我找到了一种（冗长的）方法来吃蛋糕并吃掉它，而不必为 FK id 输入额外的字段

我将 POST 创建操作更改为 FormCollection 格式。

```
[HttpPost]
public ActionResult Create(FormCollection collection) //POST create for A
{
    A a = new A();

    a.Name = collection["Name"];
    a.Description = collection["Description"];

    try
    {
        int bId = Int32.Parse(collection["B"]);
        a.B = db.B.First(option => option.Id == bId);
        ValidateModel(a);
    }
    catch
    {
        ModelState.AddModelError("B", new Exception("bId does not match an existing B"));
    }

    if (ModelState.IsValid)
    {
        db.A.Add(a);
        db.SaveChanges();
        return RedirectToAction("Index");
    }

    //Failed
    //Go back to create form
    List<B> blist = db.B.ToList();

    ViewData["B"] = blist.Select(option => new SelectListItem
    {
        Text = (option.Name.ToString()),
        Value = (option.Id.ToString())
    });

    return View(a);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-26T21:31:04.237

另一种不添加额外字段（A 类上的 BId）或从 FormCollection 读取模型字段的方法是直接在视图中绑定 model.b.Id。

```
<div class="editor-label">
    @Html.LabelFor(model => model.B)
</div>
<div class="editor-field">
    @Html.DropDownListFor(model => model.B.Id,  (IEnumerable<SelectListItem>)ViewData["B"], "---- Select B ----")
    @Html.ValidationMessageFor(model => model.B)
</div> 
```

此绑定将 Id 绑定到 A 的导航属性 B。要绑定 Name 属性，我们需要从数据库上下文中读取 B 一次。

```
[HttpPost]
public ActionResult Create(A a){
   B b = db.Bs.Find(a.B.Id);
   a.B = b;
   db.As.Add(a);
   db.SaveChanges();
} 
```

# c++ - 使用 QT 和参数在 SQLite 数据库中插入日期时间

> ID：12124997
> 
> 赞同：2
> 
> 时间：2012-08-25T19:29:33.470
> 
> 标签：c++, sqlite, qt, parameters

我正在尝试从 c++/QT 应用程序插入 SQLite 数据库。我要插入数据的表的列之一是日期时间（yyyy-mm-dd hh:mm:ss）。

我尝试使用此代码：

```
...
query.prepare("INSERT INTO table (table_date_time, ...) "
        " VALUES (?, ...);");
query.bindValue(0, "datetime('2004-12-11 13:00:00', '+1 day')");
... 
```

但它会插入文本“datetime('2004-12-11 13:00:00', '+1 day')”而不是值 2004-12-12 13:00:00。如果我尝试

```
...
query.prepare("INSERT INTO table (table_date_time, ...) "
        " VALUES (datetime(?), ...);");
query.bindValue(0, "2004-12-11 13:00:00, +1 day");
... 
```

或者

```
...
query.prepare("INSERT INTO table (table_date_time, ...) "
        " VALUES (datetime(?), ...);");
query.bindValue(0, "'2004-12-11 13:00:00',' +1 day'");
... 
```

日期时间字段未填写。沿参数使用日期时间函数的正确方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T21:48:23.723

绑定值仅替换一个参数，`datetime`函数的 2 个参数必须单独发送：

```
query.prepare("INSERT INTO table (table_date_time, ...) "
        " VALUES (datetime(?, ?), ...)");
query.bindValue(0, "2004-12-11 13:00:00");
query.bindValue(1, "+1 day"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-05T16:02:33.627

如果你使用`QDateTime`，你可以获得类似的结果。

```
query.prepare("INSERT INTO table (table_date_time, ...) "
        " VALUES (:datetime, ...)");
QDateTime timestamp = QDateTime::currentDateTime();
timestamp.addDays(1);
// Qt::ISODate format...
query.bindValue(":datetime", timestamp);// 2017-09-05T11:50:39
// Custom format
query.bindValue(":datetime", timestamp.toString("yyyy-MM-dd hh:mm:ss"));  // same as above but without the T 
```

请注意，对于 sqlite 中的文本字段， `QDateTime`to `QVariant`to 会`QString`产生默认格式“YYYY-MM-DDTHH:mm:ss”。

请参阅[Qt::ISODate](http://doc.qt.io/qt-5/qt.html#DateFormat-enum)和QDateTime [::toString](http://doc.qt.io/qt-5/qdatetime.html#toString)。