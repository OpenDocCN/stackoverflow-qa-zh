# StackOverflow 问答 10684000-10684999

# php - 在zend上保存xml文件

> ID：10684003
> 
> 赞同：0
> 
> 时间：2012-05-21T11:01:43.513
> 
> 标签：php, xml, zend-framework

这是我的代码。但我不知道为什么这段代码不能创建 xml 文件并且不显示任何错误！

它完美地显示了 xml 结果，但无法将此文件保存在确定的路径上！！

```
public function indexAction()
{

 // XML-related routine - <urlset>
    $xml = new DOMDocument('1.0', 'utf-8');
    $masterRoot = $xml->createElement('urlset');
    $xml->appendChild($masterRoot);
    $publicpath = "/public";

    $data = array(
    array('lastmod'=> date("Y-m-d"),'loc' => $this->view->serverUrl().$publicpath ,'changefreq' =>'daily','priority' =>'1.00'),
    array('lastmod'=> date("Y-m-d"),'loc' => $this->view->serverUrl().$publicpath ."/about us" ,'changefreq' =>'daily','priority' =>'0.98'),
    array('lastmod'=> date("Y-m-d"),'loc' => $this->view->serverUrl().$publicpath ."/contact us",'changefreq' =>'daily','priority' =>'0.98'),
    array('lastmod'=> date("Y-m-d"),'loc' => $this->view->serverUrl().$publicpath ."/useful links",'changefreq' =>'daily','priority' =>'0.98')        
    );
    $this->_url($xml,$masterRoot,$data);  
    $output = $xml->saveXML();

    $xml->save($this->view->serverUrl() . "/sitemap.xml" );

    // Both layout and view renderer should be disabled
    Zend_Controller_Action_HelperBroker::getStaticHelper('viewRenderer')->setNoRender(true);
    Zend_Layout::getMvcInstance()->disableLayout();

    // Setting up headers and body
    $this->_response->setHeader('Content-Type', 'text/xml; charset=utf-8')->setBody($output);
} 
```

* * *

```
protected function _url($xml,$masterRoot,$allData)
{
    foreach($allData as $data)
    {
            // <url>
                 $root = $xml->createElement('url');
                $masterRoot->appendChild($root);
             //<loc>http://www.example.com/</loc>
                $elem = $xml->createElement('loc');
                $root->appendChild($elem);
                $elemtext = $xml->createTextNode($data['loc']);
                $elem->appendChild($elemtext);
             //<lastmod>2005-01-01</lastmod>
                $elem = $xml->createElement('lastmod');
                $root->appendChild($elem);
                $elemtext = $xml->createTextNode($data['lastmod']);
                $elem->appendChild($elemtext);
             //<changefreq>monthly</changefreq>
                $elem = $xml->createElement('changefreq');
                $root->appendChild($elem);
                $elemtext = $xml->createTextNode($data['changefreq']);
                $elem->appendChild($elemtext);
             //<priority>0.8</priority>
                $elem = $xml->createElement('priority');
                $root->appendChild($elem);
                $elemtext = $xml->createTextNode($data['priority']);
                $elem->appendChild($elemtext);

    }

} 
```

这两个函数在一个控制器类中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:10:50.453

什么回报

```
$this->view->serverUrl() 
```

我认为它类似于[http://www.xxxx.xx](http://www.xxxx.xx)，因为它返回一个 URL。

这可能是问题吗？你需要类似的东西

```
$xml->save("foo.xml"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:10:24.207

```
$xml->save($this->view->serverUrl() . "/sitemap.xml"); 
```

您正在尝试保存到完整的 HTTP URL。除非您的服务器支持`PUT`方法上传（我对此表示怀疑，这是一件好事），否则这是行不通的。

`DOMDocument::saveXML()`需要一个本地文件系统路径。由于您似乎想将其保存在文档根目录中，我怀疑只是：

```
$xml->save("sitemap.xml"); 
```

...将完成这项工作。

# javascript - 什么会使用更少的 CPU 滴答声：insertBefore 与 innerHTML？

> ID：10684005
> 
> 赞同：2
> 
> 时间：2012-05-21T11:01:47.470
> 
> 标签：javascript, jquery, performance, google-chrome, browser

我有数百个项目列表，我需要定期更新 ajax 并在移动设备（主要是移动 wekbkit 浏览器）上显示。我更容易生成整个列表服务器端并使用`innerHTML`. 该列表主要是图片缩略图。我不希望屏幕闪烁过多或对他们的小型移动 CPU 造成太大的拖累。我的问题是：在更新`<ul>`列表、`insertBefore`客户端排序或`innerHTML`整个列表的情况下，什么表现更好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T11:06:16.243

最好的答案是：以两种方式编写它并在您的目标浏览器上对其进行配置。

但是，在我之前的实验中，我通常发现在进行大更新时，`innerHTML`明显比通过 DOM 接口工作要快。这是有道理的：从根本上说，浏览器将 HTML 解析为其内部结构并显示结果。这是他们存在的理由，他们为此进行了高度优化。相比之下，大量的 DOM 调用需要通过一个可能适合也可能不适合浏览器内部结构的 API 来跨越 JavaScript/浏览器内部接口。当然，今天的情况与几年前大不相同。DOM 更新比以前更常见，也更快。

但是同样，这些东西会根据您正在做的事情和您的目标浏览器而变化很大，因此最好以每种方式创建一个有代表性的测试并根据经验进行查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:04:45.237

1.  这将取决于浏览器的实现，对此没有定义，甚至没有经验法则。
2.  我非常怀疑是否有人会注意到差异。

因此，只需选择您最喜欢的那个，不要浪费宝贵的时间来讨论这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T11:09:29.933

您可能想查看此页面：[http](http://www.quirksmode.org/dom/innerhtml.html) ://www.quirksmode.org/dom/innerhtml.html并在几个移动设备上运行测试并获得一些数字。

但是，如果您关心性能，为什么不在服务器端排序并将其发送到客户端，那么每个节点都可以使用任何一种方法添加，但移动设备不必排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T07:12:35.140

如果你需要性能，你可以这样做

1.  从 DOM 树中移除父节点（UL 或 UL 的父节点....）
2.  通过 insertBefore 或 innerHTML 将所有子项 (LI) 添加到列表中。innerHTML 更快
3.  将父级添加到 DOM。

为什么要从 DOM 中删除父级？表现！浏览器只呈现两次页面。否则，它将为每个 DOM 操作呈现页面 - 每个插入！

# mercurial - 如何为 mercurial 编写智能推送，在推送之前进行拉取和合并？

> ID：10684020
> 
> 赞同：2
> 
> 时间：2012-05-21T11:03:20.660
> 
> 标签：mercurial

我正在寻找某种别名，`hg push`因此它会自动执行`hg pull`, `hg merge`,`hg commit`和`hg push`本身。

显然，如果出现任何问题，例如合并冲突，它将停止。

到目前为止，我写了这个，但是当你没有任何东西可以拉时它不起作用：

`hg pull -u && hg merge && hg ci -m "merge" && hg push`

当您没有任何要合并的内容时，它将失败：

`abort: there is nothing to merge`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T14:46:29.733

[一个名为fetch](http://mercurial.selenic.com/wiki/FetchExtension)的内置扩展可以完成所有这些工作，但 push 除外：

> 在最简单的情况下，hg fetch 的行为类似于`hg pull -u`- 它从远程存储库中提取更改到本地存储库并更新工作目录。（这类似于 Subversion 或 CVS 中的“更新”命令。）
> 
> 如果拉取的更改需要合并，则 fetch 扩展会尝试 an`hg merge`后跟`hg commit`.

启用扩展，然后执行：

```
$ hg fetch && hg push 
```

不过，请考虑进行 rebase（快进合并）而不是常规合并。`--keep`这有助于从无休止的“合并”提交中保持沿袭干净，如果您使用原始变更集，则与常规合并一样安全。

事实上，我在处理单个任务时通常的工作流程是这样的：

```
# edit some files, test
$ hg commit
# edit some more files, test
$ hg commit
$ hg pull --rebase
$ hg push 
```

# c++ - 来自静态方法的 typeid

> ID：10684021
> 
> 赞同：2
> 
> 时间：2012-05-21T11:03:36.713
> 
> 标签：c++, static-methods, rtti, typeid

我这里有以下问题：我编写（重构）一个记录器，并试图使用C++的运行时类型识别机制，专门`typeid`获取刚刚调用记录器的类的运行时类型信息。这进入一个宏，如：

```
#define debug() Streamer(__FILE__, __FUNCTION__, typeid(this).name(), LOG_DEBUG) 
```

其中 Streamer 是一个重载类`operator <<`以获得所需的流式传输功能，例如`debug() << "message " << 16;`等...

唯一的问题是当我`debug()`从静态函数调用宏时。因为那时`typeid(this)`会发疯并非常正确地抱怨静态方法没有`this`.

我想听听您的意见，也许还有一些关于将类作为字符串获取的代码片段，该字符串包含尝试记录的静态方法。

干杯，F。

# c# - 支持 Soap11WSAddressing10 的自定义绑定导致 ActionMismatch 错误

> ID：10684024
> 
> 赞同：0
> 
> 时间：2012-05-21T11:03:52.920
> 
> 标签：c#, .net, wcf, web-services, soap

我有一个定义的 wsdl 来支持需要支持 wsaddressing 的soap 1.1 的互操作性。结果，我已经设置了我的服务，因此使用自定义绑定配置了我的 wcf 服务，如下所示。

```
 <customBinding>
  <binding name="CustomWsHttpSoap11" closeTimeout="00:01:00"
    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00">
    <textMessageEncoding messageVersion="Soap11WSAddressing10"/>
    <httpTransport maxReceivedMessageSize="2147483647" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                   useDefaultWebProxy="true">
    </httpTransport>
  </binding>
</customBinding>

<services>
      <service behaviorConfiguration="TEST.BattleMountain.TestService"
        name="TEST.BattleMountain.TestService">
        <endpoint address="" behaviorConfiguration="TestMethod"
          binding="customBinding" bindingConfiguration="CustomWsHttpSoap11"
          name="TestMethod-v2-0_pttBinding" bindingNamespace="urn:test:services:201005"
          contract="ITestMethodV20_ptt" />
</service> 
```

当我使用 SOA 清洁器创建测试请求时，我得到了肥皂错误

对消息“”指定的 SOAP 操作与 HTTP SOAP 操作“urn:test:services:201005:TestMethod-v2-0”不匹配。

我不确定为什么会这样。要求如下

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Header>
    <Action s:mustUnderstand="1" xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none">urn:test:services:201005:TestMethod-v2-0</Action>
  </s:Header>
  <s:Body>
    <DistributionEnvelope xmlns="urn:test:ns:201005" />
  </s:Body>
</s:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:20:04.467

您发布的请求不是真正的请求。没有实际发送的肥皂动作（使用提琴手查看）。所以客户端（soacleaner？）并没有真正发送动作。详情见[这里](http://webservices20.blogspot.com/2008/10/dont-blindly-trust-wcf-logging.html)。

# asp.net-mvc-3 - 内联标记块不能嵌套。只允许一级内联标记。MVC 剃须刀

> ID：10684025
> 
> 赞同：11
> 
> 时间：2012-05-21T11:04:06.237
> 
> 标签：asp.net-mvc-3, razor, grid, telerik

我有一个带有 Telerik 网格的模态窗口。但我需要在我的网格中渲染图像，所以我知道我不能使用 @ 两次。这是关于此问题的博客文章[链接](http://blogs.telerik.com/xamlteam/posts/11-01-27/mvc3-and-grid-hierarchy.aspx)

有人可以帮助我吗？

我的代码

```
@{  Html.Telerik().Window()
    .Name("images")
    .Title("Select an Image")
    .Content(@<text>

@(Html.Telerik().ComboBox()
            .Name("AjaxComboBox66")
            .AutoFill(true)
            .SelectedIndex(0)
            .BindTo(new SelectList(Model.PhotoFolders, "ID", "Name"))
            .Filterable(filtering => filtering.FilterMode(AutoCompleteFilterMode.StartsWith))
            .HighlightFirstMatch(true)
            .ClientEvents(events => events
                .OnChange("onChange")
            )
      )

      @(Html.Telerik().Grid<AjaxImages>()
    .Name("Grid")
    .DataKeys(keys => keys.Add(c => c.ID))
  .Columns(columns =>
  {
      columns.Template(
          @<text>
               <img src='@item.Url' /> 
//Here is my error. I need helper function
           </text>

).Title("Picture");

  })

                              .DataBinding(dataBinding => dataBinding.Ajax().Select("GetImages", "UserProducts"))

                      .Scrollable(scrolling => scrolling.Enabled(true))
                      .Sortable(sorting => sorting.Enabled(true))
                          .Pageable(paging => paging.Enabled(true).PageSize(20).Total(100).Style(GridPagerStyles.NextPreviousAndNumeric))
                      .Filterable(filtering => filtering.Enabled(true))
                      .Groupable(grouping => grouping.Enabled(false))
                      .EnableCustomBinding(true)

                      .Footer(true))
              </text>)
    .Width(400)
    .Draggable(true)
    .Modal(true)
    .Visible(false)

    .Render();
} 
```

我的 GetImages 函数返回带有“ID”和“URL”的 json。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-21T18:09:16.803

在这些情况下，可以使用 MVC Razor 辅助函数。使用网格控件定义创建辅助函数，在本例中为`RenderGrid()`.

```
@helper RenderGrid()
{
     @(Html.Telerik().Grid<AjaxImages>()
     .Name("Grid")
     .DataKeys(keys => keys.Add(c => c.ID))
     .Columns(columns =>
     {
         columns.Template(
         @<text>
             <img src='@item.Url' /> 
         </text>
         ).Title("Picture");
     })
     .DataBinding(dataBinding => dataBinding.Ajax().Select("GetImages", "UserProducts"))
} 
```

在窗口的内容定义中调用辅助函数。如果需要，可以多次调用辅助函数。

```
 @{Html.Telerik().Window()
      .Name("images")
      .Title("Select an Image")
      .Content(
       @<text>
          @RenderGrid()
       </text>)
      .Width(400)
      .Draggable(true)
      .Modal(true)
      .Visible(false)
      .Render();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-03T11:16:11.783

在以前的 MVC`@helper`中，它被用作无法**嵌套** `@<text>`标签的解决方法。但是在 MVC CORE`@helper`中被省略了。在这里阅读更多：

[https://github.com/aspnet/Razor/issues/715](https://github.com/aspnet/Razor/issues/715)

# regex - Google Refine：正则表达式不起作用

> ID：10684031
> 
> 赞同：0
> 
> 时间：2012-05-21T11:04:20.707
> 
> 标签：regex, google-refine

我需要在谷歌细化中匹配文本外观的正则表达式。我试过这个表达式，它没有用。然后我尝试了一个在 www.lenovo.com 中使用匹配字符串 lenovo 的简单案例

```
value.match(/lenovo/) 
```

在某些行中，我的值取值`www.lenovo.com`，

为什么这么简单的字符串匹配，在谷歌细化中不起作用。我在 Windows 上运行。

如果我有任何明显的语法错误，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:23:19.247

你要回什么，又想回什么？

match() 函数的返回值要么是 null 表示不匹配，要么是一个数组

帮助选项卡说：

> 匹配（字符串或正则表达式）返回：字符串数组返回与给定正则表达式匹配的组数组

对于“lenovo”的输入值，
此函数： `value.match( /lenovo/ )`
应返回此值： `[]`

您想将其转换为您的构面的真/假值，以测试该文本字符串的存在/不存在吗？你可以这样做：

```
isNotNull( value.match( /lenovo/ ) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T21:40:04.027

您需要在正则表达式中创建一个组，例如：

```
 value.match(/lenovo/) 
```

这导致：

```
 [] 
```

应该：

```
 value.match(/(lenovo)/) 
```

这导致：

```
 ["lenovo"] 
```

这可能更像你想要的。然后，您可以索引数组以检索字符串值：

```
 value.match(/(lenovo)/)[0] 
```

# java - 确保运行时 Java 超类是正确的

> ID：10684032
> 
> 赞同：0
> 
> 时间：2012-05-21T11:04:22.173
> 
> 标签：java, inheritance, jvm

这来自一个真实世界的例子，一些 Hibernate 类继承了 Antlr 类并尝试填充一些字段，这仅在最近的 Antlr 版本中引入。

```
HibernateClass ---subclasses---> AntlrClass
HibernateClass uses AntlrClass.fieldX 
```

如果有人在运行时部署了较旧的 Antlr 库，则该超类字段将不存在，并且`NoSuchFieldError`会抛出 a。

确保在运行时动态绑定到的超类是兼容版本的标准 Java/JVM 方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:20:57.797

看一下这个 -

包 com.mobilous.mail；

```
 import java.io.IOException;
import java.util.Map;
import java.util.jar.Attributes;
import java.util.jar.JarFile;
 import java.util.jar.Manifest;

public class Test {

/**
 * @param args
 */
public static void main(String[] args) {
    Map<String,Attributes> map = null;
    try {
        JarFile file = new JarFile("Your library file path");
        Manifest manifest = file.getManifest();
        System.out.println(manifest.getMainAttributes().getValue("Specification-Version"));
        System.out.println(manifest.getMainAttributes().getValue("Implementation-Version"));
        map = manifest.getEntries();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

}

现在您应该首先检查您需要检查的每个 jar 文件的文件版本。如果发现较旧，只需显示错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:31:09.237

那我就给出我自己的答案——

Java 并非旨在在运行时确定编译时超类是否与运行时超类匹配/兼容。由于 Java 使用单独的类路径来构建和运行，并且由于子类不复制超类的内容，因此预计会出现 NoSuchFieldErrors。

Java 不能开箱即用地处理这个问题。

# c - 构建交流驱动程序时出错

> ID：10684035
> 
> 赞同：2
> 
> 时间：2012-05-21T11:04:34.607
> 
> 标签：c, visual-studio, mongodb, driver

我已经下载了源代码和 SCONS 工具。然后我尝试运行“scons”来构建，但构建失败并显示以下输出：

```
scons: Reading SConscript files ...
Compiling for amd64
Checking for C type int64_t... (cached) no
Checking for C type int64_t... (cached) yes
Checking for C library json... (cached) no

scons: warning: Two different environments were specified for target bson.lib,
        but they appear to have the same action: ${TEMPFILE('$AR $ARFLAGS /OUT:$TARGET $SOURCES')}
File "D:\c\mongodb-win32-x86_64-2.0.4\mongodb-mongo-c-driver-8f3bf8e\SConstruct", line 170, in <modu
le>
scons: done reading SConscript files.
scons: Building targets ...
link /nologo /dll /out:mongoc.dll /implib:mongoc.lib ws2_32.lib src\md5.obj src\mongo.obj src\env_wi
n32.obj src\gridfs.obj src\bson.obj src\numbers.obj src\encoding.obj
env_win32.obj : error LNK2005: mongo_clear_errors 已经在 mongo.obj 中定义
   正在创建库 mongoc.lib 和对象 mongoc.exp
mongoc.dll : fatal error LNK1169: 找到一个或多个多重定义的符号
scons: *** [mongoc.dll] Error 1169
scons: building terminated because of errors. 
```

关键信息的意思是：链接时发现`mongo_clear_errors`被定义了多次，定义在`mongo.c`和中`env_win32.c`。

如何消除此错误？我正在使用 64 位 win7 的 Visual Studio 2011。

谢谢大家。

# wcf - 通过 HTTPS 从 WCF Web 服务获取 404

> ID：10684037
> 
> 赞同：1
> 
> 时间：2012-05-21T11:04:45.260
> 
> 标签：wcf, web-services, https, http-status-code-404, wcf-binding

我一直在玩通过 SSL 和负载平衡处理 WCF 的乐趣和游戏:(

当前的立场是，我们似乎到达了服务器，但它不喜欢配置中的端点。

任何人都可以建议吗？

客户端配置。

```
<system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_IWorkflowAPI" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                    useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="TransportWithMessageCredential">
                        <transport clientCredentialType="None" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="https://ourserver.com/API/workflow.svc" binding="basicHttpBinding"
                bindingConfiguration="BasicHttpBinding_IWorkflowAPI" contract="Warms.IWorkflowAPI"
                name="BasicHttpBinding_IWorkflowAPI" />
        </client>
    </system.serviceModel> 
```

网络服务网络配置。

```
 <system.serviceModel>
  <behaviors>
    <serviceBehaviors>
      <behavior name="">
        <serviceMetadata httpGetEnabled="true" />
        <serviceDebug includeExceptionDetailInFaults="false" />
      </behavior>
      <behavior name="Originator Secured">
        <serviceMetadata httpGetEnabled="true" />
        <serviceDebug includeExceptionDetailInFaults="true" />
        <serviceCredentials>
          <userNameAuthentication userNamePasswordValidationMode="Custom" />
        </serviceCredentials>
      </behavior>
    </serviceBehaviors>
  </behaviors>
  <services>
    <service name="xx.xx.Web.UI.API.Workflow" behaviorConfiguration="Originator Secured">
      <endpoint address="https://ourserver/API/workflow.svc" binding="basicHttpBinding"
      bindingConfiguration="BasicHttpBinding_IWorkflowAPI" contract="xx.xx.Web.UI.API.IWorkflowAPI"
      name="BasicHttpBinding_IWorkflowAPI"  listenUri="/" />
    </service>
  </services>
  <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  <bindings>
    <basicHttpBinding>
           <binding name="BasicHttpBinding_IWorkflowAPI" closeTimeout="00:01:00"
                        openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                        allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                        maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                        messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                        useDefaultWebProxy="true">
        <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
        <security mode="TransportWithMessageCredential">
          <transport clientCredentialType="None" proxyCredentialType="None"
              realm="" />
          <message clientCredentialType="UserName" algorithmSuite="Default" />
        </security>
      </binding>
    </basicHttpBinding>
    <wsHttpBinding>
      <binding name="Workflow API Binding">
        <security mode="TransportWithMessageCredential">
          <transport clientCredentialType="None" />
          <message clientCredentialType="UserName" />
        </security>
      </binding>
    </wsHttpBinding>
    <customBinding>
      <binding name="CustomHttpBinding">
        <security allowInsecureTransport="True">
        </security>
        <httpTransport />
      </binding>
    </customBinding>
  </bindings>
</system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:47:52.860

也许您的负载均衡器没有使用 SSL 连接到真实的 Web 服务器。启用传输安全后，您的 WCF 服务将不会在端口 80 上响应，只会在 443 上响应。我认为您的选择是：1\. 让负载均衡器在其自身和 Web 服务器之间重新协商 SSL 2\. 在您的 WCF 中关闭传输安全配置并仅使用消息安全性，将 SSL 留给负载均衡器执行。

# drop-down-menu - Selenium 2 和 Junit 4 测试用例：从具有多个类名的下拉框中选择选项

> ID：10684041
> 
> 赞同：0
> 
> 时间：2012-05-21T11:05:12.477
> 
> 标签：drop-down-menu, automated-tests, selenium-webdriver, junit4

我想选择并单击当鼠标移动到网页上的文本或可见文本时通过下拉列表可见的选项之一。

所以基本上我将鼠标移动到下面的html页面中的文本“浏览”，然后我得到一个不同的选项，比如“页面”、“博客”。

因此，为了选择或单击“浏览”，我使用（在 Selenium 2.21.0 中）：

`driver.findElement(By.xpath("//a[@id='browse-menu-link']/span")).click()`.

有没有一种方法可以让我在不知道他们的 ID 的情况下选择其余选项（因为他们的 ID 可以更改或名称可以更改）。我可以按索引移动和选择不同的选项吗？
即我的要求是下拉菜单中可以有 4 个选项或 5 个选项。我不在乎他们的名字，只要他们在“浏览”文本下。

在 html 页面中，这些隐藏选项在鼠标移动或在“浏览”处单击时变得可见，其类名称为：

```
ajs-drop-down hidden 
```

在其他具有相同类名的下拉菜单下还有其他隐藏选项，因此按类名选择元素会出错。

这是 HTML 代码/页面：

```
<head>
<body id="com-test" class="" onload="placeFocus()">
<div id="full-height-container">
<fieldset class="hidden parameters">
<fieldset class="hidden parameters">
<div id="header" class="">
<form id="quick-search" class="quick-search" action="/dosearchsite.action"     method="get">
<fieldset>
<legend>Quick Search</legend>
<input id="quick-search-query" class="quick-search-query placeholded" type="text"   size="25" name="queryString" autocomplete="off" accesskey="q">
<input id="quick-search-submit" class="quick-search-submit" type="submit"   value="Search">
<div class="aui-dd-parent quick-nav-drop-down"></div>
</fieldset>
<fieldset class="hidden parameters">
<input id="quickNavEnabled" type="hidden" value="true">
</fieldset>
</form >
<ul id="header-menu-bar" class="ajs-menu-bar">
<li class="normal ajs-menu-item">
<a id="browse-menu-link" class="browse trigger ajs-menu-title" href="#">
<span>
**<span>Browse</span>**
</span>
</a>
<div class="ajs-drop-down hidden" hidden="" style="">
<ul id="browse-menu-link-leading" class="section-leading first">
<li class="">
<a id="space-pages-link" class="" title="Attachments: 5" href="/pages/listpages.action?   key=UNI">
**<span>Pages</span>**
</a>
</li>
<li class="">
<a id="space-blogposts-link" class="" title="Attachments: 5"   href="/pages/viewrecentblogposts.action?key=UNI">
**<span>Blog</span>**
</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T21:33:40.123

让我确定一下：将鼠标悬停在“浏览”链接上后，< div class="ajs-drop-down hidden" hidden="" style=""> 下的项目变得可见，并且您希望使用索引来访问它们有什么名字吗？

在这种情况下，我会执行以下操作

```
List<WebElemet> menuItems = driver.findElement(By.xpath("//*[@class='ajs-drop-down hidden']")).findElements(By.tagName("a"));
WebElement exampleItem = menuItems.get(1); //getting 2nd menu item 
```

你也可以玩一些丑陋的xpath

```
WebElement exampleItem = driver.findElement(By.xpath(//div[@className='ajs-drop-down hidden'/ul/li[1]/a])); 
```

不过我推荐第一种方法。

现在，您提到了其他下拉菜单下的其他选项。所以我假设像上面的例子一样定位适当的 div 并不是那么简单。如果是这种情况，我们需要首先使用链接的（一个元素）id 来定位 div。

```
List<WebElemet> menuItems = driver.findElement(By.xpath("//a[@id='browse-menu-link']/../div")).findElements(By.tagName("a")); 
```

这应该产生与第一个示例相同的结果。

**编辑**

如果您只想使用类名的一部分来查找元素，xpath 是您的朋友：

```
List<WebElemet> menuItems = driver.findElement(By.xpath("//*[contains(@class, 'hidden')]")).findElements(By.tagName("a")); 
```

driver.findElement 将返回满足指定条件的第一个元素。如果您想获得第二或第三，只需使用 findElement* *s* * 并从列表中获取元素（如我上面的第一个示例）

# jquery - 当我点击一个确切的链接时，应该会出现一个带有 jquery 和 timeout 的图像

> ID：10684043
> 
> 赞同：0
> 
> 时间：2012-05-21T11:05:28.150
> 
> 标签：jquery, image, timeout, onclick, fade

我需要做什么，因为我是 jquery 的新手，如下所示： 我想要：当用户点击一个确切的链接时。一个精确的图像应该出现在屏幕中间，带有淡入淡出效果或没有淡入淡出效果（更容易），然后它会在 4 秒后消失。

在我的头上包括了这个：

```
<script src="http://code.jquery.com/jquery-latest.js"></script> 
```

在正文中，我包括了这个： `<a href="#" id="myLink">click</a> <img src="achievement.png" id="myImage" style="display:none">`

我想通了，现在如何设置它以覆盖网站的内容？CSS可能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:12:13.667

像这样的东西怎么样：

```
$('#myLink').click(function(){
    $('#myImage').fadeIn().delay(4000).fadeOut();
}); 
```

这是使用 css 在屏幕上居中图像的好方法：

html:

`<div id="myImage"></div>`

CSS：

```
#myImage{
    position:fixed;
    left:0;
    right:0;
    top:0;
    bottom:0;
    background: url(path/to/image.png) center center no-repeat;
} 
```

请注意，我使用的是带有背景图像的 <div> 标记，而不是 <img> 标记。这更容易使用 css 居中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:33:17.760

您还可以使用[colorbox](http://www.jacklmoore.com/colorbox)插件轻松地以模式显示图像，并且该插件具有许多其他功能。之后需要自动关闭colorbox的代码`4 sec`如下

```
 $('.colorbox').colorbox({
        onOpen: function(){
           window.setTimeout(function() {
             $.colorbox.close();
          }, 4000);
        }
    }); 
```

[工作演示](http://jsfiddle.net/joycse06/jfFrt/)

# javascript - jQuery Mobile - 隐藏在持久标题下的页面内容

> ID：10684047
> 
> 赞同：1
> 
> 时间：2012-05-21T11:05:55.167
> 
> 标签：javascript, html, css, jquery-mobile

代码和演示可以在这里找到：[http ://chapp.stage.philosophydesign.com/](http://chapp.stage.philosophydesign.com/)

加载主页后一切正常。但是，当我使用页脚导航切换另一个页面时，新页面内容位于页眉下方。似乎没有正确计算标题高度。

为什么会发生这种情况，我该如何阻止它发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T11:50:53.617

这是一个已知问题。到目前为止，我已经开发了一种解决方法，另一种在[Github Bug Tracker](https://github.com/jquery/jquery-mobile/issues)中找到。

这是我们在“Stoppress”（WPSE）上聊天的总结结果

```
// From Bug tracker #4219 @TodParker
$( "[data-position='fixed']" ).fixedtoolbar( 'updatePagePadding' );
// My own solution
$( "[data-position='fixed']" ).trigger( 'updatelayout' );

// Summed up: (Note) `pageload` and `.bind()` and equals won't work here.
$( document ).on( "pageshow", function(){
    $( "[data-position='fixed']" ).trigger( 'updatelayout' );
} ); 
```

**如果您也遇到此问题/看到此行为，请介入并[帮助修复它或支持尝试修复它的拉取请求](https://github.com/jquery/jquery-mobile/pull/4260)！**

# java - GWT RPC 无法正常工作

> ID：10684052
> 
> 赞同：2
> 
> 时间：2012-05-21T11:06:27.170
> 
> 标签：java, gwt, smartgwt, gwt-rpc

我在我的 GWT 项目中制作 RPC 并且它正在运行，但是我想要处理的数据以某种方式消失了。我使用本地主机作为服务器。我在服务器包中有两个类：防御：

```
 package org.elsys.salvation.server;

import org.elsys.salvation.client.Defence;
import org.elsys.salvation.client.FunctionalityManager;

public class Defences {

    private ArrayList<Defence> netDefences;
    private ArrayList<Defence> hardDefences;
    private ArrayList<Defence> softDefences;

    public Defences(FunctionalityManager fm){
        netDefences = fm.getNetDefences();
        hardDefences = fm.getHardDefences();
        softDefences = fm.getSoftDefences();
    }

    public ArrayList<Defence> getNetDefences() {
        return netDefences;
    }

    public ArrayList<Defence> getHardDefences() {
        return hardDefences;
    }

    public ArrayList<Defence> getSoftDefences() {
        return softDefences;
    }
} 
```

和 DefenceServiceImpl.java ：

```
package org.elsys.salvation.server;

import java.util.ArrayList;

import org.elsys.salvation.client.DefenceService;
import org.elsys.salvation.client.FunctionalityManager;

import com.google.gwt.user.server.rpc.RemoteServiceServlet;

public class DefenceServiceImpl extends RemoteServiceServlet implements DefenceService {

    private Defences defences;

    @Override
    public void saveDefences(FunctionalityManager fm) {
        defences = new Defences(fm);
    }

    @Override
    public void getHardDefences(FunctionalityManager fm) {
        fm.setHardDefences(defences.getHardDefences());
    }

    @Override
    public void getNetDefences(FunctionalityManager fm) {
        fm.setNetDefences(defences.getNetDefences());
    }

    @Override
    public void getSoftDefences(FunctionalityManager fm) {
        fm.setSoftDefences(defences.getSoftDefences());
    }

} 
```

下面是 DefenceService 接口：

```
package org.elsys.salvation.client;

import com.google.gwt.user.client.rpc.RemoteService;
import com.google.gwt.user.client.rpc.RemoteServiceRelativePath;

@RemoteServiceRelativePath("defences")
public interface DefenceService extends RemoteService {

    void saveDefences(FunctionalityManager fm);
    void getHardDefences(FunctionalityManager fm);
    void getNetDefences(FunctionalityManager fm);
    void getSoftDefences(FunctionalityManager fm);
} 
```

和 DefenceServiceAsync：

```
package org.elsys.salvation.client;

import com.google.gwt.user.client.rpc.AsyncCallback;

public interface DefenceServiceAsync {

    void saveDefences(FunctionalityManager fm, AsyncCallback<Void> callback);

    void getHardDefences(FunctionalityManager fm, AsyncCallback<Void> callback);

    void getNetDefences(FunctionalityManager fm, AsyncCallback<Void> callback);

    void getSoftDefences(FunctionalityManager fm, AsyncCallback<Void> callback);

} 
```

这是我调用 saveDefences 方法的代码：

```
private void addDiploma() {

        final AsyncCallback<Void> callback = new AsyncCallback<Void>() {
            public void onFailure(Throwable caught) {

            }

            @Override
            public void onSuccess(Void result) {
                SC.say("Submited");
            }
        };

        some code...

        Button submitButton = new Button("Submit");
        submitButton.addClickHandler(new ClickHandler() {
            public void onClick(ClickEvent event) {
                FM.getDiploma(projectNameTextBox, diplomantsNameTextBox,
                        diplomaLeadersListBox, reviewersListBox,
                        specialtiesComboBox, typeComboBox);
                FM.generateDefences();
                defenceSvc.saveDefences(FM,callback);
                RootPanel.get("mainDiv").clear();
                showDefences();
            }
        });

        some more code...
    } 
```

下面是 FM 和 defenceSvc 的定义：

```
public FunctionalityManager FM = new FunctionalityManager();
private DefenceServiceAsync defenceSvc = GWT.create(DefenceService.class); 
```

这是我想将保存的数据返回客户端的地方：

```
protected void showDefence() {  
        FunctionalityManager funcM = new FunctionalityManager();
        final AsyncCallback<Void> callback = new AsyncCallback<Void>() {
            public void onFailure(Throwable caught) {

            }

            @Override
            public void onSuccess(Void result) {
                // TODO Auto-generated method stub  
            }
        };
        defenceSvc.getHardDefences(funcM, callback);  
        defenceSvc.getNetDefences(funcM, callback);  
        defenceSvc.getSoftDefences(funcM, callback);  
        final ListGrid DiplomaGrid = new ListGrid();  
        DiplomaGrid.setWidth(500);  
        DiplomaGrid.setHeight(224);  
        DiplomaGrid.setShowAllRecords(true);  
        DiplomaGrid.setCanEdit(true);  
        DiplomaGrid.setEditEvent(ListGridEditEvent.CLICK);  
        DiplomaGrid.setModalEditing(true);  

        DiplomaData dd= new DiplomaData(funcM);

        ListGridField nameField = new ListGridField("name", "Project Name");  
        ListGridField diplomantsField = new ListGridField("diplomants", "Diplomants");  
        ListGridField leaderField = new ListGridField("leader", "Leader");   
        ListGridField reviewerField = new ListGridField("reviewer", "Reviewer");  
        ListGridField typeField = new ListGridField("type", "Type"); 
        ListGridField dateField = new ListGridField("date", "Date");
        DiplomaGrid.setFields(new ListGridField[] {nameField, diplomantsField, leaderField,reviewerField, typeField, dateField});  
        DiplomaGrid.setData(dd.getRecords());

        RootPanel.get("mainDiv").add(DiplomaGrid);
    } 
```

web.xml：

```
<servlet>
    <servlet-name>defenceServiceImpl</servlet-name>
    <servlet-class>org.elsys.salvation.server.DefenceServiceImpl</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>defenceServiceImpl</servlet-name>
    <url-pattern>/salvation/defences</url-pattern>
  </servlet-mapping> 
```

当我在开发模式下运行它时，它正在运行，但是当我调用 showDefence() 方法时，我无法检索服务器数据上的序列化。有人可以告诉问题出在哪里吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T11:14:04.103

在服务器端，您正在修改 FM，但您不要将其发送回客户端：那是行不通的。客户端和服务器之间的对象传递是通过复制（序列化→反序列化），因此在服务器上进行更改只会影响服务器端的副本。您无法更新将其发送到服务器的对象；您正在发送它的副本，然后服务器必须发回应用了更改的另一个副本。

换句话说，对于您的代码，将方法的返回类型从FM 更改`void`为 FM，让服务器返回 FM 传递的参数，然后在客户端，在`onSuccess`方法中，使用结果更新您的*单例*对象（在回调中from `setHardDefences`，将 FM 设置为`hardDefences`来自`hardDefences`服务器返回的 FM；对于其他*防御*类似）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-02T00:30:30.280

我只是尝试了类似的事情。我想使用假数据来测试 UI，因为我还没有真实数据。我替换了一个包含静态数据成员的 Singleton 类。一个成员是一个有时被写入的列表。

写操作不起作用。

使用 Debug 遍历它，似乎每个到服务器的 RPC 每次都在实例化这些类。我跟踪了 Singleton 的**getInstance**，并为每个 RPC 实例化了该类。

Singleton 类的单元测试工作正常，但这是本地的，而不是服务器上的。

我相信这是有道理的，因为在 Google 服务器上，您可能有多个应用程序实例正在运行。由于每个都有自己的 Singleton，因此无需保留它。

基于此，我建议每次调用 RPC 时都实例化 DefenceServiceImpl，因此它始终是一个新类，即您可以保存数据。

# ipad - 如果 ipad 应用程序崩溃，向服务器发送崩溃报告？

> ID：10684056
> 
> 赞同：0
> 
> 时间：2012-05-21T11:06:37.643
> 
> 标签：ipad, ios5, crash, crash-reports

我现在正在开发 ipad 应用程序，我们正在使用 zendesk 处理各种用户反馈表，我想知道安装在 ipad 上的应用程序是否可以读取崩溃日志（如果应用程序之前发生过任何崩溃）和将其发送到我们的 zendesk 服务器。

我知道我可以将崩溃报告与 iTunes 同步并要求用户稍后发送，但有没有其他可用的替代方法？

任何类型的线索都会受到赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T11:22:31.980

您应该查看提供比 iTunes Connect 报告更详细的信息的第三方库。我不确定您是否可以从中导出任何信息，但是在崩溃日志方面，它们提供了相当不错的反馈：

*   [HockeyApp](http://www.hockeyapp.net/)：关于它们的好处是它们提供了与应用商店兼容的库版本
*   [TestFlight](https://testflightapp.com)：也不错，虽然我不确定他们是否提供任何与应用商店兼容的版本
*   [Apphance](http://www.apphance.com/) : 也是一个不错的框架，有完整的花哨的截图报告和绘图，但是他们还没有提供与应用商店兼容的版本

长话短说，你应该看看你的需求。如果您希望仅查看 Beta 版本的报告，请查看 Apphance 或 TestFlight。但是，如果您需要将发布到应用商店的东西 - 去 HockeyApp。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:18:24.087

您可以在应用程序中包含[TestFlight SDK](https://testflightapp.com/sdk/)或[QuincyKit 。](http://quincykit.net/)然后崩溃报告将自动发送。

# c# - 将视图中的下拉列表中的数据传递给控制器

> ID：10684058
> 
> 赞同：0
> 
> 时间：2012-05-21T11:06:40.440
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, view, controller

我们现在一直在寻找一天，我们无法弄清楚将数据从我们的视图传递到我们的控制器。事实上，我们希望用户从 Index() 视图的下拉列表中选择一个小时作为时间块的 StartTime。目前我们必须遵循代码。

我们在控制器中的操作

```
public ActionResult genBlocks(string StartTime, FormCollection collection)
{
    int blocksPerDay = 4;
    int strH, strM;
    List<Block> blocks = new List<Block>();
    for (int i = 0; i < blocksPerDay; i++)
    {
       if (i != 0)
       {
          strH = blocks[i-1].EndTime.Hour;
          strM = blocks[i-1].EndTime.Minute;
       }
       else
       {
          strH = Convert.ToInt32(collection["StartTime"]);
          strM = 0;
        }
        Block block = new Block
        {
            FieldDayId = 1,
            Available = true,
            StartTime = DateTime.Today + new TimeSpan(strH, strM, 0),
            EndTime = DateTime.Today + new TimeSpan(strH, strM + (db.Sports.Find(1).Duration*(i+1)), 0),
        };
        blocks.Add(block);
        db.Blocks.Add(block);
        db.SaveChanges();
    }
    return RedirectToAction("Index");
} 
```

在我们的视图中，我实现了一个表单

```
@using (Html.BeginForm("genBlocks"))
{
    <input type="text"name="StartTime" />
    @Html.DropDownList("StartTime", String.Empty)

        <div id="genBlocks" class="button">
            <input type="submit" />
        </div>
} 
```

所以我们用 dorpdownlist 和一个文本框尝试了它，但它们都没有成功......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T00:53:28.437

您的下拉列表实际上只发回一个标量值 - 当前选定的值。这可以是一个 int、string 等等。如果它是您模型的一部分，您可以使用 Html.DropDownListFor(m => m.Hour, [INSERT POSSIBLE SELECTITEMLIST ARRAY HERE])。

如果您只需要获取该值，则另一种选择是在您的操作方法上简单地接受一个 int、字符串等。

似乎这个问题被过度处理了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T19:47:51.720

```
@using (Html.BeginForm("genBlocks", "Block"))
{
@Html.DropDownList("StartTime", String.Empty)
<input type="submit" class="button" value="Generate blocks" />
} 
```

是索引的解决方案:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T11:41:28.793

尝试使用以下代码

控制器 - 确保将 HttpPost 属性放在那里

```
 [HttpPost]
 public ActionResult genBlocks(string StartTime,FormCollection collection)
 {
   return View();
 } 
```

你的观点——确保你把实际的动作和控制器名称放在 beginform 方法中

```
@using (Html.BeginForm("genBlocks","ControllerName"))
{
    <input type="text" name="StartTime" />

    <div id="genBlocks" class="button">
        <input type="submit" />
    </div>
} 
```

# ajax - 跨域请求 http://www.google.com/ig/api?weather= 有或没有 YQL

> ID：10684059
> 
> 赞同：0
> 
> 时间：2012-05-21T11:06:40.853
> 
> 标签：ajax, cross-domain, yql

我尝试向[http://www.google.com/ig/api?weather=](http://www.google.com/ig/api?weather=)发出 AJAX 请求，并且我使用了 YQL，但它没有得到谷歌的准确响应。谷歌会阻止 YQL 吗？或者你有任何基于 YQL 的解决方案吗？如果无法使用有效的 YQL，是否有任何其他方法可以成功向该 Google 服务发出跨域 AJAX 请求？

谢谢你的时间...

# liferay - 在 Liferay 搜索插件的公告中添加研究

> ID：10684060
> 
> 赞同：0
> 
> 时间：2012-05-21T11:06:46.023
> 
> 标签：liferay

我正在使用 Liferay 6.1 的搜索插件，但我注意到插入在公告 Liferay 插件中的新闻从未出现在搜索结果中，我在插件配置中添加了方面：`com.liferay.portlet.announcements.model.AnnouncementsEntry`但没有任何变化，

有人知道添加是否正确的liferay类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T13:03:21.703

我跟踪了代码，发现公告没有在Liferay中被索引，请看一下

> com.liferay.portlet.announcements.service.impl.addEntry()

这里没有索引器调用代码，但是看看

> com.liferay.portlet.bookmarks.service.impl.addEntry()

这里有一个书签索引器类，它负责存储用于搜索的数据。

现在，为了在搜索中获得公告，您需要创建一个索引器，就像书签一样，然后您将在 Liferay 搜索 portlet 中获得相同的结果。

# java - 使用 java 代码获取 Liferay 中的当前用户

> ID：10684061
> 
> 赞同：2
> 
> 时间：2012-05-21T11:06:55.620
> 
> 标签：java, authentication, liferay, vaadin

如何在 java 中获取当前 Liferay 用户：

我发现了这个： [如何在 Liferay 中获取当前用户？](https://stackoverflow.com/questions/10523382/how-can-i-get-the-current-user-in-liferay) 还有这个： [使用简单的 Java 代码获取当前用户 Liferay](https://stackoverflow.com/questions/10448193/get-the-current-user-liferay-using-a-simple-java-code)

但是任何人都告诉如何初始化“请求”

甚至这份文件[http://www.liferay.com/documentation/liferay-portal/6.0/development/-/ai/understanding-the-two-phases-of-portlet-execution](http://www.liferay.com/documentation/liferay-portal/6.0/development/-/ai/understanding-the-two-phases-of-portlet-execution)似乎也很复杂

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T07:33:41.517

让您的 Vaadin 应用程序实现`com.vaadin.terminal.gwt.server.PortletRequestListener`，然后您可以访问请求：

```
public class MyApp extends Application implements PortletRequestListener {

    public void init() {
    …
    }

    @Override
    public void onRequestStart(PortletRequest request, PortletResponse response) {
        User user = PortalUtil.getUser(request);
        setUser(user);
    }

    @Override
    public void onRequestEnd(PortletRequest request, PortletResponse response) {

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T16:31:10.883

我一直在使用 Vaadin 6.8.0 和 Liferay 6.1。这是使用 Henri Kerola 解决方案的一些不同的代码：

```
 @Override
public void onRequestStart(PortletRequest request, PortletResponse response) {
    try {
        this.setUser(request.getUserPrincipal().getName());
    } catch (Exception e) {
        this.setUser("anonymous");
    }
} 
```

其中用户属性是 Vaadin 标签。由于匿名用户（来自 Liferay 的客人）的 getUserPrincipal nullPointer，try/catch 是必要的。

此致，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T12:37:13.510

请求对象可用作操作或渲染方法以及 jsps 中的参数。您不需要对其进行初始化，它就在那里（参见例如 processAction(ActionRequest request, ActionResponse response) 的参数，渲染阶段、事件阶段和资源阶段也是如此（尽管与请求/响应的子类型不同） ）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T23:06:12.577

Have you try in your Vaadin Portlet (Application) to use the methode: `getUser()`?

Vaadin Portlet wraped a Liferay API with Vaadin specific framework. Hence the developing of Vaadin Portlet has this own specification, and the standard Liferay API are not simple useable here.

# c# - 在gridview中显示数据库中的图像

> ID：10684063
> 
> 赞同：0
> 
> 时间：2012-05-21T11:07:25.423
> 
> 标签：c#, asp.net, image, linq-to-sql, gridview

我有一个显示建筑物信息的 GridView。我正在将信息从这样的数据库加载到 GridView 中：

```
var buildings = (from t in dc.Towns
                         where (t.userid == userid) && (t.time < DateTime.Now) 
                         join b in dc.Buildings
                             on t.buildingid equals b.buildingid
                             into j1
                         from j2 in j1.DefaultIfEmpty()
                         group j2 by j2.buildingname
                         into grouped
                         select new
                                    {
                                        Building= grouped.Key,
                                        Picture= grouped.First().imagePath,
                                        Number= grouped.Count()
                                    });
        gvBuildings.DataSource = buildings.ToList();
        gvBuildings.DataBind(); 
```

但我无法显示图像，它只显示其保存的路径。如何在 GridView 中显示路径中的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:25:51.983

您必须具有可以显示图像的列类型，使用 Image Field 并使用该 URL 设置 DataImageUrlField 属性，请在此处查看详细信息：

[http://msdn.microsoft.com/en-us/library/aa479350.aspx](http://msdn.microsoft.com/en-us/library/aa479350.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:18:38.570

尝试使用 Image.FromFile(string path) 将图像加载为 Image 对象，并将它们放入绑定数据中以代替路径。

例如

```
 select new
                            {
                                Building= grouped.Key,
                                Picture= Image.FromFile(grouped.First().imagePath),
                                Number= grouped.Count()
                            }); 
```

当然，您需要进行一些错误处理，而且我还建议您将数据访问代码与显示逻辑分开，而不是使用一种方法。

# android - 如何在 phonegap 应用程序中添加滚动条

> ID：10684066
> 
> 赞同：3
> 
> 时间：2012-05-21T11:07:45.317
> 
> 标签：android, cordova, scrollbar

我正在为 Android 平台在 PhoneGap 中开发一个应用程序。

在此应用程序中，不显示滚动条。如何在我的应用程序中显示滚动条？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T18:26:07.593

这是我的示例活动，它将显示滚动条

```
public class MyActivity extends DroidGap {

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        super.loadUrl("file:///android_asset/www/index.html");

        // Display vertical scrollbar and hide horizontal scrollBar
        super.appView.setVerticalScrollBarEnabled(true);
        super.appView.setHorizontalScrollBarEnabled(false);
        // set scrollbar style
        super.appView.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T11:16:22.200

良好的滚动是在 phonegap/cordova 项目中看不到的效果，为此我们可以提供工具第三方库，您可以将它们包含在您的项目中。我用于我的项目的一个是[iscroll 4](http://cubiq.org/iscroll-4)。即使这样也有一些问题，但是可以通过浏览 iscroll4 的 google 组来解决，还有这个[jquery-mobile](http://jquerymobile.com/demos/1.1.0/)也可以为 phonegap 项目提供滚动效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-30T19:48:25.440

如果您想在主 div 内使用滚动 div，此解决方案并不能完全解决问题。

将其他元素放在主 div 上的绝对位置。

试试这个：[Apache cordova on android where are scrollbars?](https://stackoverflow.com/questions/21498967/apache-cordova-on-android-where-are-scrollbars)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-30T15:03:10.720

我们一直面临着同样的问题。Cordova 在 中禁用 web 视图上的滚动条`CordovaWebView.java`，因此我们创建了一个[插件](http://plugins.cordova.io/#/package/de.mayflower.cordova.android-scrollbar)，允许您从 JavaScript 以编程方式重新启用垂直滚动条，而无需破坏 Cordova：

```
mayflower.AndroidScrollbar.toggleVerticalScrollbarVisibility(true)
.then(
    function() {
        console.log('Vertical scrollbar enabled');
    }
); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-10T12:33:36.387

我正在使用 Cordova 5.2+ 并面临同样的挑战。但是，我在这里找到了解决方案：

*   您可以转到：位于 yourAppName\platforms\android\CordovaLib\src\org\apache\cordova\SystemWebViewEngine.java 中的*SystemWebViewEngine.java*

*   然后，设置：

    webView.setVerticalScrollBarEnabled(true);

希望对帕尔有帮助！

# text-to-speech - 通用文本到语音语音

> ID：10684067
> 
> 赞同：2
> 
> 时间：2012-05-21T11:07:53.553
> 
> 标签：text-to-speech

是否存在（或可能存在）*通用*TTS 语音，即不与某种语言（例如英语或德语）绑定的语音？

我正在寻找一种方法来以*相同*的声音阅读不同国家/地区的街道名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T01:24:35.693

目前，没有（我知道，或者搜索出现了）。

这是因为大多数高质量的 TTS 引擎都依赖于播放预先录制的单词。对于这样的 TTS 以所有语言以相同的声音说话，这意味着同一个人用所有这些语言录制了他/她的声音。今天大约有 6500 种语言，用一种语言记录一本字典大约需要一个月的时间。因此，记录所有语言需要541年。那个时候那个人早就死了。*请注意，这是夸大其词：一个像样的 TTS 不需要逐字记录字典。*

实现这一点需要完全由计算机生成的语音。然而，即使这也被分成方言，因为法语强调不同的字母，然后说西班牙语。如果不是，那么您的 TTS 引擎可能会说英式英语。

鉴于您在不同国家/地区的街道名称，最好的解决方案是使用[espeak](http://espeak.sourceforge.net/)。它内置了很多语言，而且听起来总是一样的：机器人，没有情感。它可以通过命令行调用，因此几乎可以在任何编程语言中使用。

如果您知道这条街在哪个国家/地区，您就可以拥有一个关于他们在不同国家/地区使用什么语言的数据库。我曾经为此使用过[geonames](http://www.geonames.org/)数据库，它运行良好。然后，您可以使用您要说的文本和语言调用 espeak。Geonames 提供每日[转储](http://download.geonames.org/export/dump/)，您可以下载并提取语言。然后，您可以将海量数据库存储在服务器上，例如[Dotcloud](https://www.dotcloud.com/)。或者，您可以使用他们的[API](http://www.geonames.org/export/ws-overview.html)，但每天只能使用 30,000 次。

如果您不知道街道所在国家/地区的语言，您可以采用更粗略的方法，但这并不总是有效。语言检测。由于大多数街道名称是不同国家/地区的真实单词，例如“Main Street”，您可以运行语言检测，并找出以这种方式使用的语言。我听说[detectlanguage.com](http://detectlanguage.com/)对此有好处。

所以，虽然没有现成的方法，你可以自己做一个，没有太多麻烦。

# yii - yii 网址管理器。路径格式的 url

> ID：10684069
> 
> 赞同：3
> 
> 时间：2012-05-21T11:07:57.483
> 
> 标签：yii, url-routing

我一直在开发基于 Yii 框架的 Web 应用程序。

我在尝试制作 sef 网址时遇到了麻烦。

我有的：

1.  配置已设置。

    'urlManager'=>array('urlFormat'=>'path', 'showScriptName'=>false, 'rules'=>array( // rules go here ) )

2.  这是用于测试的代码：

`echo $this->createUrl('site/test', array('help'=>'me')`

`$this`- 是控制器。

如果我在配置中的“规则”数组为空，我会得到这个`/site/test/help/me`。我预料到了这一点。

如果

```
'rules'=>array(
    '<controller:\w+>/<action:\w+>' => '<controller>/<action>',
) 
```

我得到了`/site/test?help=me`这也是预期的。

但如果

```
'rules'=>array(
    '<controller:\w+>/<action:\w+>' => '<controller>/<action>',
    '<controller:\w+>/<action:\w+>/<help:\w+>' => '<controller>/<action>/<help>',
) 
```

我还在`/site/test?help=me`。我期待看到`/site/test/me`

有人可以帮我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T11:22:42.080

更改规则的顺序并删除`<help>`. 它将自动添加到操作中。所以你的规则应该是这样的：

```
'<controller:\w+>/<action:\w+>/<help:\w+>' => '<controller>/<action>',
'<controller:\w+>/<action:\w+>' => '<controller>/<action>', 
```

规则的顺序很重要。你需要把最详细的放在第一位。

问候

# javascript - 在父框架和子框架之间共享 javascript 包含文件

> ID：10684071
> 
> 赞同：1
> 
> 时间：2012-05-21T11:08:00.520
> 
> 标签：javascript, frame, parent, inheritance

可以在父框架和子框架之间共享 JavaScript 文件吗？我的想法是防止在每一帧上重新加载相同的 JavaScript 文件。例如，如果我在父级上有 jquery.js 文件，则在子框架上，该脚本可以从父级继承。

帧源：

```
<frameset rows="78px,*" framespacing="0" frameborder="0" border="0">
    <frame src="indexFrame.html" name="status" id="status"/><!-- noresize="noresize" scrolling="no"-->
    <frame src="DeviceTreeMenu.html" name="desktop" id="TreeMenu"/>
    <noframes>
        <body>
            <p>This page requires frame support and apparently this Web browser doesn't support this feature. Please check the Browser configuration, switch to another browser or try the <a href="menu.html">menu page</a> as a resort.</p>
        </body>
    </noframes>
</frameset> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:49:27.817

您可以通过调用 parent 来访问父框架的 window 属性。通过这种方式，您可以从父级导入属性。

```
parent.document.body.appendChild(parent.document.createTextNode("Foobar"));
var $ = parent.$ // e.g. jquery instance of parentframe 
```

请注意，根据浏览器的实现，函数调用的上下文可能会或可能不会更改为父窗口。我还不能重新检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:09:55.620

您必须将其包含在两者中。框架类似于不同的窗口或选项卡。（通常浏览器会缓存它，所以你不会有性能问题）。

# asp.net - 更改树视图选定节点上的中继器标签更改

> ID：10684074
> 
> 赞同：1
> 
> 时间：2012-05-21T11:08:33.543
> 
> 标签：asp.net, vb.net

我有一个带有项目模板的中继器控件，如下所示：

```
 <ItemTemplate>
                    <table width="70%">
                        <tr id="rowSIC" runat="server">
                            <td width="10%">
                                <asp:Label ID="lblsSICCode" runat="server" Text='<%# Eval("SICCode") %>'></asp:Label>
                            </td>
                            <td width="70%">
                                <asp:Label ID="Label2" runat="server" Text='<%# Eval("IndustryName") %>'></asp:Label>
                            </td>
                            <td width="10%">
                                <asp:LinkButton ID="lnkSelect" runat="server" CommandArgument='<%# Eval("SICCode") %>'
                                    CommandName="MyUpdate">Select</asp:LinkButton>
                            </td>
                            <td width="10%">
                                <asp:Label ID="Label1" runat="server"></asp:Label>
                            </td>
                        </tr>
                    </table>
                </ItemTemplate> 
```

和 itemCommand 事件，我正在更改转发器行颜色并将其 id 保存在 viewstate 中，如下所示：

```
Protected Sub Repeater1_ItemCommand(source As Object, e As System.Web.UI.WebControls.RepeaterCommandEventArgs) Handles Repeater1.ItemCommand
        If e.CommandName.Equals("MyUpdate") Then
            Dim MyLabel As Label = TryCast(e.Item.FindControl("lblsSICCode"), Label)
            Dim Label1 As Label = TryCast(e.Item.FindControl("Label1"), Label)
            Dim rowSIC As HtmlTableRow = TryCast(e.Item.FindControl("rowSIC"), HtmlTableRow)

            If MyLabel IsNot Nothing Then
                ' Label1.Text = MyLabel.Text
                rowSIC.BgColor = "#FFDAB9"
                ViewState.Add("selectedItem", MyLabel.Text)
            End If
        End If
    End Sub 
```

我在此页面上有一个树视图，其中每个节点都有 Id 和值。在选定节点更改事件上，我想更改中继器选定节点的文本。我正在编写这样的代码：

Protected Sub TreeView1_SelectedNodeChanged(sender As Object, e As System.EventArgs) 处理 TreeView1.SelectedNodeChanged

```
 Dim EmployeeRepeater As Repeater = CType(Me.Form.Controls(1).FindControl("Repeater1"), Repeater)
    Dim EmployeeRepeaterItem As RepeaterItem
    Dim EmployeeName As Label

    For Each EmployeeRepeaterItem In Repeater1.Items

        Dim MyLabel As Label = TryCast(EmployeeRepeaterItem.FindControl("lblsSICCode"), Label)
        EmployeeName = CType(EmployeeRepeaterItem.FindControl("Label1"), Label)

        If ViewState("selectedItem") = TreeView1.SelectedValue Then
            EmployeeName.Text = TreeView1.SelectedNode.Text
        End If

    Next

End Sub 
```

但它不是 chagging MyLabel 文本。如何解决？

树视图和转发器都填充在 !Page.Ispostback 事件中

问候， 阿西夫·哈米德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:12:59.103

在方法中，

TreeView1_SelectedNodeChanged（发送者作为对象，e 作为 System.EventArgs）

您永远不会设置 MyLabel 的值。

你应该有类似 MyLabel.Text = "Hello";

# apache-flex - 如何使用 Flex HTTPService 从 302 HTTP 状态响应中获取 cookie

> ID：10684075
> 
> 赞同：1
> 
> 时间：2012-05-21T11:08:34.980
> 
> 标签：apache-flex, cookies, adobe, session-cookies, httpservice

在我的 Flex 应用程序中，我需要对 j_security_check 表单进行身份验证（这似乎是一种流行的身份验证方式），在 HTTP POST 请求中提供`j_username`和字段作为参数。`j_password`我打算用一个简单的 HTTPService 来实现（我知道的另一个选项是 URLLoader，但它提供了相同的结果）。发送 POST 请求后，我等待`jsessionid`包含`SetCookie`. 但是，我得到了一个 html 页面，它应该只在我收到`jsessionid`.

以下是 HTTP 数据包的实际样子：

1.  我的 POST 请求`[baseurl]/j_security_check`包含`j_username`和`j_password`
2.  `jsessionid`包含as的 HTTP 状态 302 响应`SetCookie`
3.  来自我的应用程序的 GET 请求*（我没有发送它！）*`[baseurl]/login.jsp`只包含`jsessionid`与前一个数据包一起收到的一个。
4.  一个 HTTP 状态 200 响应，其中包含一个 html 页面，成功登录后应在 Web 浏览器中查看该页面。

我需要`jsessionid`使用不同的、基于 SOAP 的 Web 服务作为身份验证手段的值。但我似乎无法获得它——Flex HTTPService 默默地捕捉到 302 响应并发送下一个 GET；之后cookie无处可寻。

..然而，cookie 肯定缓存在 Flex 的某个地方，因为它被提供给从任何 HTTPService 实例到该服务器的所有进一步请求！

我想知道它是否可以与网络服务一起使用。因此我的问题是：如何在 Flex 中获取此 cookie 的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T22:56:59.880

显然，在接收到`setCookie`HTML 标头后，Flex 会将其提供给任何后续的 HTTP 请求——无论是 an`HTTPService`还是 SOAP `WebService`。我还没有找到获取 this 值的方法`setCookie`，但是这种情况无论如何都适用于我的情况。

**更新**：这是 Adob​​e Flex JIRA 上已确认的错误：http: [//bugs.adobe.com/jira/browse/SDK-15049](http://bugs.adobe.com/jira/browse/SDK-15049) 分辨率“延迟”

# android - 警报管理器不工作

> ID：10684077
> 
> 赞同：25
> 
> 时间：2012-05-21T11:08:54.770
> 
> 标签：android, alarmmanager

我需要`AlarmReceiver`在 10 秒后开始活动（例如）。我需要在不运行应用程序的情况下激活它。但是无论应用程序是否运行，`AlarmReceiver`都不会被调用。有什么建议么？

```
Intent intent = new Intent(this, AlarmReceiver.class);
PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 111, intent, 0);
AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);

//alarmManager.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis() 
                                          //+ (10 * 1000), pendingIntent);
Toast.makeText(this, "Alarm set", Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-21T13:44:31.497

```
public class AlarmReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
          String message = "Hellooo, alrm worked ----";
          Toast.makeText(context, message, Toast.LENGTH_SHORT).show();
          Intent intent2 = new Intent(context, TripNotification.class); 
          intent2.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
          context.startActivity(intent2);
    }

    public void setAlarm(Context context){
        Log.d("Carbon","Alrm SET !!");

        // get a Calendar object with current time
         Calendar cal = Calendar.getInstance();
         // add 30 seconds to the calendar object
         cal.add(Calendar.SECOND, 30);
         Intent intent = new Intent(context, AlarmReceiver.class);
         PendingIntent sender = PendingIntent.getBroadcast(context, 192837, intent, PendingIntent.FLAG_UPDATE_CURRENT);

         // Get the AlarmManager service
         AlarmManager am = (AlarmManager) context.getSystemService(context.ALARM_SERVICE);
         am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), sender);
    }
} 
```

这是我设法开始工作的最终代码。您需要添加

```
 <receiver  android:process=":remote" android:name="AlarmReceiver"></receiver> 
```

就`</application>`在清单文件中的标签上方。

这将在调用该方法后设置警报在 30 秒内触发`SetAlarm()`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-21T12:18:27.753

截至目前，不运行应用程序就无法启动警报，您必须运行各自的应用程序才能激活警报..为此....!!

**在您的 ALARM_ACTIVITY 中：**

```
AlarmManager alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);

Intent intent = new Intent(ALARM_ACTIVITY.this,ALARM_RECEIVER.class); 

PendingIntent pendingIntent = PendingIntent.getBroadcast(SetReminder.this, ID, intent, PendingIntent.FLAG_UPDATE_CURRENT);

alarmManager.set(AlarmManager.RTC_WAKEUP, System.currentTimeInMillis() + 1000, pendingIntent); 
```

**在您的 ALARM_RECEIVER 中**：

```
NotificationManager notificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);

PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);

notification = new Notification(R.drawable.alarmicon, "charSequence", System.currentTimeMillis());

notification.setLatestEventInfo(context, "alarmTitle", "charSequence", pendingIntent);

notification.flags |= Notification.FLAG_AUTO_CANCEL;

notificationManager.notify(1, notification); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-20T15:45:40.790

如果它仍然不起作用，则摆脱该`android:process=":remote"`部分可能会有所帮助。为我工作:)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-06-20T19:31:07.453

另外，除了上述之外，我认为AlarmActivity中的方法应该在LAUNCHER活动的oncreate方法中。在这种情况下，Alarm Activity应该是应用程序的LAUNCHER活动。这解决了我的问题

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-11-12T14:59:43.500

只要您的应用程序运行一次以建立警报`AlarmManager`，即使您的应用程序没有运行，警报也会触发您的意图。设备重启后例外。要[在设备重新启动时启动警报](https://developer.android.com/training/scheduling/alarms#boot)，请实现 a`BroadcastReceiver`来设置警报，并将接收器添加到您的清单中`ACTION_BOOT_COMPLETED`：

```
<receiver android:name=".SampleBootReceiver"
        android:enabled="false">
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED"></action>
    </intent-filter>
</receiver> 
```

# java - 在控制台中接收到输入后，将相关的输入/输出输出到 GUI

> ID：10684079
> 
> 赞同：2
> 
> 时间：2012-05-21T11:08:58.987
> 
> 标签：java

我需要通过 gui 向用户显示一些相关信息（如介绍、是/否问题和其他问题），然后用户将他们的响应输入控制台。但是，我一生都无法想到或找到一种方法来做到这一点。如何运行 GUI 但仍允许输入到控制台？这是我拥有的一些精简代码，显示了我正在尝试做的事情。我正在从处理容器内容的 pps 框架类中执行此操作。我只需要添加按钮、文本字段以及稍后的操作事件。

```
public class gui extends XFrame
{
    private JTextField[] textFieldsUneditable;

        public gui()
        {
            super();
            textFieldsUneditable = new JTextField[10];
            for(int i=0; i<textFieldsUneditable.length; i++)
            {
                textFieldsUneditable[i] = new JTextField(42);
                textFieldsUneditable[i].setEditable(false);
                add(textFieldsUneditable[i]);
            }

            revalidate();
            repaint();
        }

        public void paintComponent(Graphics g)
        {
            super.paintComponent(g);
            // code code code
        } 
```

但是我拥有的是其他方法，在用户在控制台中做出响应后，我想运行这些方法，然后使用 GUI 中的 setText 将其输出到这些不可编辑的 JTextField 中。我希望这是有道理的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:16:40.090

我会做这样的事情（下面的例子）：

1.  创建 GUI 并保存对要更新的字段的引用
2.  逐行获取控制台输入，可以使用`Scanner`.
3.  找到要更新的字段
4.  使用线程安全的方式更新它，使用`SwingUtilities.invokeAndWait`or`invokeLater`
5.  *重复 3 和 4 直到完成。*

* * *

```
public static void main(String[] args) throws Exception {

    // create a new frame
    JFrame frame = new JFrame("Test");
    frame.setLayout(new GridLayout(0, 1));

    // create some fields that you can update from the console
    JTextField[] fields = new JTextField[10];
    for (int i = 0; i < fields.length; i++)
        frame.add(fields[i] = new JTextField("" + i)); // add them to the frame

    // show the frame (it will pop up and you can interact with in - spawns a thread)
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.pack();
    frame.setVisible(true);

    // Create a scanner so that you can get some input from the console (the easy way)
    Scanner s = new Scanner(System.in);

    for (int i = 0; i < fields.length; i++) {

        // get the field you want to update
        final JTextField field = fields[i];

        // get the input from the console
        final String line = s.nextLine();

        // update the field (must be done thread-safe, therefore this construct)
        SwingUtilities.invokeAndWait(new Runnable() {
            @Override public void run() { field.setText(line); }
        });
    }
} 
```

# php - 在列表框中选择值相关值在表格中显示

> ID：10684081
> 
> 赞同：-1
> 
> 时间：2012-05-21T11:09:06.407
> 
> 标签：php, drop-down-menu

选择任何值后如何在表格中显示所有相关数据..

就像一个选定的框值在我选择一个国家时显示所有国家名称然后表中列出的相关引用..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:16:29.157

假设您渲染了所有 HTML 数据（带有城市的框），您需要使用 javascript 来更改/显示一些信息、元素等。更具体。

**示例：（**使用 jquery）

```
<select id="countries">
 <option value="de">Germany
 <option value="gr">Greece
</select>

<select id="cities">
 <!-- empty for now; filled after user's selection -->
</select>

<!-- 2 greek cities for example -->
<select id="gr_cities" style="display:none">
 <option>Thessaloniki
 <option>Athens
</select>

<script type="text/javascript">
 $("#countries").change(function() {
    var sel_read = document.getElementById($(this)[0].value+"_cities");
    var sel_write = document.getElementById("cities");
    for(var x=0,sz=sel_read.length;x<sz;x++) {
       sel_write.options[x] = new Option(sel_read.options[x].text);
    }
 });
</script> 
```

......像这样的东西，现在你必须阅读它并尝试理解它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:16:37.893

您可以将引用放在隐藏表中，当用户选择一个国家/地区时，您可以在 select 上显示引用表，使用 javascript 来执行此操作

# android - 获取 HttpResponse 的响应体

> ID：10684086
> 
> 赞同：11
> 
> 时间：2012-05-21T11:09:38.390
> 
> 标签：android, http, entity

我已经这样做了：

```
response = httpclient.execute(targetHost, httppost); 
    if(response.getStatusLine().getStatusCode() == 200)
                        {
    HttpEntity entity = response.getEntity();
    System.out.println("Entity:"+entity);
  if (entity != null) 
                            {
        String responseBody = EntityUtils.toString(entity);
        System.out.println("finalResult"+responseBody.toString());
                            } 
```

关于它的事情是第一个`println()`显示这个：`org.apache.http.conn.BasicManagedEntity@481e8150`这很好。

但第二个`System.out.println("finalResult"+responseBody.toString());`只显示 this `finalResult`。那么这有什么问题：

```
String responseBody = EntityUtils.toString(entity);
            System.out.println("finalResult"+responseBody.toString()); 
```

？？？

**重要**这`HttpEntity entity = response.getEntity();`等于`org.apache.http.conn.BasicManagedEntity@481e8150`。所以问题一定出在这里：

字符串 responseBody = EntityUtils.toString(entity);。

请帮忙！！！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-21T11:18:00.457

首先，查看您的服务器是否没有返回空白响应：

```
response.getEntity().getContentLength();  //it should not be 0 
```

其次，尝试以下将响应转换为字符串：

```
StringBuilder sb = new StringBuilder();
try {
    BufferedReader reader = 
           new BufferedReader(new InputStreamReader(entity.getContent()), 65728);
    String line = null;

    while ((line = reader.readLine()) != null) {
        sb.append(line);
    }
}
catch (IOException e) { e.printStackTrace(); }
catch (Exception e) { e.printStackTrace(); }

System.out.println("finalResult " + sb.toString()); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-12-14T16:25:47.277

你可以使用这个：

```
String s = EntityUtils.toString(httpRes.getEntity()); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-01T07:53:01.220

```
 org.apache.http.conn.BasicManagedEntity@f8a5dec 
```

当我们直接打印 HttpEntity 对象时会出现响应。例如：

```
 HttpEntity httpEntity=httpResponse.getEntity(); 
```

现在要从服务器获取实际响应，我们需要执行以下步骤：

```
 public String convertStreamtoString(InputStream is){

    String line="";
    String data="";
    try{
        BufferedReader br=new BufferedReader(new InputStreamReader(is));
        while((line=br.readLine())!=null){

            data+=line;
        }
    }
    catch(Exception e){
        e.printStackTrace();
    }
        return  data;
} 
```

只需调用上述方法并将 httpEntity 作为参数传递。享受！！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T11:15:28.890

试试这个：

```
BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
String body = "";
while ((body = rd.readLine()) != null) 
{
    Log.e("HttpResponse", body);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-15T10:23:14.170

试试这个 ：

```
HttpEntity entity = response.getEntity();  
final String content;
    try
    {
        content = EntityUtils.toString(entity);

        runOnUiThread(new Runnable()
        {

            @Override
            public void run()
            {

                webView.loadData(content, "text/html", "UTF-8");

            }
        });
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-21T11:26:18.393

试试这个

```
 BufferedReader in = new BufferedReader(new InputStreamReader(response
                        .getEntity().getContent()));

                //SB to make a string out of the inputstream
                StringBuffer sb = new StringBuffer("");
                String line = "";
                String NL = System.getProperty("line.separator");
                while ((line = in.readLine()) != null) {
                    sb.append(line + NL);
                }
                in.close();

                //the json string is stored here
            String  result = sb.toString(); 
```

# java - Bean 验证中缺少 @NotBlank。如何效仿？

> ID：10684088
> 
> 赞同：3
> 
> 时间：2012-05-21T11:09:43.740
> 
> 标签：java, bean-validation

我正在迁移一个使用 Bean Validation 的参考 Hibernate 实现构建的应用程序。在此代码中使用了注解`@NotBlank`( `org.hibernate.validator.constraints.NotBlank`)。

但是，在我的新 Websphere 8 容器中，捆绑了一个我想要使用的 Bean Validation 实现。但是，`@NotBlank`它似乎不是[Bean Validation API](http://docs.oracle.com/javaee/6/api/javax/validation/constraints/package-summary.html)的一部分。

关于如何使用正确的 Bean Validation 注释来模拟标签的任何建议？我想从以下内容开始： `@NotNull@Size(min=1)`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-21T18:58:47.653

Hibernate Validator`@NotBlank`是一个[组合约束](http://docs.jboss.org/hibernate/stable/validator/reference/en-US/html/validator-customconstraints.html#validator-customconstraints-compound)，用`@NotNull`. 此外，它还有一个[约束验证器](https://github.com/hibernate/hibernate-validator/blob/5.1/engine/src/main/java/org/hibernate/validator/internal/constraintvalidators/NotBlankValidator.java)，用于检查验证值的修剪长度是否 > 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-01T10:26:43.503

我不允许添加注释，所以这是我对 Gunnar 上述回答的“注释”。指向 GitHub 的链接已损坏。这是两个相关的地方：

*   这是注解本身[NotBlank.java](https://github.com/hibernate/hibernate-validator/blob/master/engine/src/main/java/org/hibernate/validator/constraints/NotBlank.java)
*   这是执行[NotBlankValidator.java工作的约束](https://github.com/hibernate/hibernate-validator/blob/master/engine/src/main/java/org/hibernate/validator/internal/constraintvalidators/hv/NotBlankValidator.java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-27T22:36:28.237

添加大小约束只会确保空的“”字符串不会通过，但像“”这样的字符串将被允许通过，因为它们的大小超过 1。我遇到了类似的问题。我无法使用休眠的 NotBlank 注释，因为我的架构是自动生成的。所以我使用了这个

```
 regex=".*[\S]+.*" 
```

这对我有用。PS：由于某种原因， * 符号与 (.) 一起被接受为注释

# email - 自定义电子邮件标头可以触发垃圾邮件过滤器吗？

> ID：10684097
> 
> 赞同：8
> 
> 时间：2012-05-21T11:10:33.987
> 
> 标签：email, header, spam, email-spam, sendgrid

我们做了很多邮件，我们使用 Sendgrid 给它独特的论点和类别。但是对于存储、归档、过滤和搜索功能，我也想给他们一些其他的自定义标题，比如这个数组的 json 格式

```
array('user' => 300, 'item' => 8842, 'country' => 'Croatia'); 
```

现在，这样的自定义标题是否有可能损害我们电子邮件的通过率？换句话说，我们的电子邮件是否有可能由于具有此类自定义标头而触发垃圾邮件过滤器？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-21T16:00:39.567

用户定义的标头的约定是在它们前面加上一个`X-`. 例如

```
X-my-custom-header: foo 
```

长期以来，这一直是电子邮件规范的一部分（请参阅：[https](https://www.rfc-editor.org/rfc/rfc822) ://www.rfc-editor.org/rfc/rfc822 ），不应该损害您的交付能力。

* * *

另外，相关问题：[自定义标头邮件（）和垃圾邮件分数](https://stackoverflow.com/questions/3362552/custom-header-mail-and-spam-score)

# javascript - jquery 多个和不断变化的 ids 选择器

> ID：10684098
> 
> 赞同：0
> 
> 时间：2012-05-21T11:10:38.667
> 
> 标签：javascript, jquery

我有一个简单的问题，我想根据他们的 id 显示和隐藏我的 div，但无法弄清楚，例如我有不同的 div 和具有不同 id 的输入：

```
<input onfocus="showtip(1)" onblur="hidetip(1); />
<div id="tip1"></div>
<input onfocus="showtip(2)" onblur="hidetip(2); />
<div id="tip2"></div> 
```

和

```
function showtip(id) {
    $('.tip[id]').show('slow');
}
function hidetip(id) {
    $('.tip[id]').hide('slow');
} 
```

我可以用javascript编写它，使其工作，但我不能用动画隐藏它，因此我使用了jquery，但我无法定义ids :(谢谢大家的帮助！我真的很感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:12:32.710

要`id`在 jQuery 中使用该属性，请使用[id 选择器](http://api.jquery.com/id-selector/)：

```
$('#<yourid>').show('slow'); 
```

所以你的方法是：

```
function showtip(id) {
   $('#tip'+id).show('slow');
} 
```

（注意：`ids`在整个文档中应该是唯一的，因此不需要`div`在选择器中包含该位）

如果您`id`的属性包含字符，例如`.`这意味着其他事物（即类选择器），那么您可以使用属性等于选择器：

```
$('[id="123.abc"]').show('slow') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T11:13:06.220

你的意思是：

```
function showtip(id) {
    $('#'+tip).show('slow');
    //OR
    $('yourElement[id="'+tip+'"]').show('slow');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T11:14:34.647

@ManseUK 的方法是迄今为止最常见的。但它在技术上是不正确的，例如它会因为 id 包含在 CSS 中具有其他含义的字符而失败，例如`.`. 最正确的解决方案是：

```
function showTip(id) {
    $(document.getElementById(id)).show("slow");
}

// This will work:
<div id="abc.123"></div>
showTip("abc.123"); 
```

这个解决方案也稍微快一点，因为在内部这就是 jQuery 将转换`$("#" + id)`的内容（在它工作的情况下）。

这是如何工作的：

*   `document.getElementById(id)`获取原始 DOM 节点。
*   `$(...)`将原始 DOM 节点包装在 jQuery 对象中，该对象具有 jQuery 方法，例如`show`.

# delphi - 如何通过蓝牙在手机上获取信息，通过我的笔记本发送信息

> ID：10684102
> 
> 赞同：1
> 
> 时间：2012-05-21T11:10:53.340
> 
> 标签：delphi, java-me, bluetooth, communication, delphi-xe2

我想让手机和我的笔记本通讯。我正在使用 Delphi 进行 Windows 编程和组件 nrComm Lib，该组件用于发送和接收 Char、String 的方法。

```
 nrBT1.SendString();
  nrBT1.SendString();
  nrBT1.SendData(); 
```

但是我的问题是在电话上如何获取信息。我不是专业的Java编程人员。我已经阅读了这篇文章但不会使用组件nrComm Lib:(

[jsr-82-sample-spp-服务器和客户端。](http://www.jsr82.com/jsr-82-sample-spp-server-and-client/) 我认为以下代码无法在Delphi中实现：

```
//Create a UUID for SPP
UUID uuid = new UUID("1101", true);
//Create the servicve url
String connectionString = "btspp://localhost:" + uuid +";name=Sample SPP Server"; 
```

# php - “复制”一个 php 文件并包含 POST 变量

> ID：10684105
> 
> 赞同：0
> 
> 时间：2012-05-21T11:11:27.060
> 
> 标签：php

我在一个带有一些实时功能等的 PHP 应用程序上工作。我创建了一个 PHP 脚本，它执行以下操作：

*   基于表单输入，它创建一个具有输入名称的文件夹，例如。约翰。（称为 $dir）
*   然后它创建一个名为 prefix_JOHN 的 MySQL 数据库表。
*   然后它将系统模板文件复制并移动到 JOHN 文件夹。

然后我的问题是 - 我需要脚本来创建两个具有特定内容的文件 - 但是必须包含从表单输入调用的变量，以便它从数据库中的特定（此处）JOHN 表调用。

我试图只是复制 - 但它需要手动编辑文件。由于将创建无限的表，我不想这样做。:)

然后我试图让脚本创建一个新文件。工作 - 除了它不能包含 PHP 变量或标签 - 这当然是有道理的，但我现在被困住了。:(

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:13:34.757

*   将所有特定于实例的数据保存到中央数据库。
*   让所有实例查询该数据库的特定变量，如数据库名称、根文件夹等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T12:15:03.773

南尼的回答是要走的路。但如果你真的对此感到好奇，当然可以编写代码来编辑脚本。

1.  将主 PHP 文件复制到用户特定的 PHP 文件
2.  获取新创建文件的内容
3.  用 替换所有变量`str_replace`。也许是这样的：

    `$contents = str_replace('$name = "NAME"', '$name = "John"', $contents)`

4.  将内容保存回文件。

# visual-studio - Visual Studio - 检测源代码管理提供程序

> ID：10684106
> 
> 赞同：3
> 
> 时间：2012-05-21T11:11:32.747
> 
> 标签：visual-studio, version-control

我正在使用VS2010。我正在从事的项目使用不同的源代码控制提供程序、TFS、Mercurial 或 SVN。有没有一种方法可以配置 VS 以选择特定的源代码控制提供程序，具体取决于我正在加载的解决方案？

例如，如果 VS 允许我指定它应该选择的源代码控制提供程序作为启动参数，我可以为每个特定的解决方案创建一个启动器。

一个更优雅的解决方案是 VS 扫描解决方案的文件夹以查找特定文件（例如 Mercurial 项目的 .hg ）并自动选择提供程序，但我不确定这是否可能。如果有人可以用这种方法为我指明正确的方向，我肯定会尝试编写一个可以做到这一点的 VS 插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T06:49:52.933

我已经对此进行了大量研究，到目前为止我发现的唯一解决方案是创建自己的解决方案。

最初我不打算公开这个项目，但以防万一其他人会在其中找到一些用途，这里是项目的链接： [https ://scs.codeplex.com/](https://scs.codeplex.com/)

任何贡献将不胜感激。

# java - 可以通知多次唤醒同一个线程吗？

> ID：10684111
> 
> 赞同：11
> 
> 时间：2012-05-21T11:11:57.280
> 
> 标签：java, multithreading, synchronization, notify

想象一下，您在 Java 中有一个典型的生产者-消费者模式。为了提高效率，您希望使用`notify()`而不是`notifyAll()`在将新元素添加到队列时使用。如果两个生产者线程调用通知，是否保证两个不同的等待消费者线程将被唤醒？或者可能是两个`notify()`s 在彼此之后不久触发导致同一个消费者线程排队等待唤醒两次？我找不到该部分是描述其工作原理的 API。java是否有一些原子内部操作来唤醒线程一次？

如果只有一个消费者在等待，那么第二个通知将丢失，那没问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-21T12:40:07.200

我的回答有一些特定于实现的信息。它基于我对 Sun JVM 和其他线程库行为的工作知识。

> 如果两个生产者线程调用通知，是否保证两个不同的等待消费者线程将被唤醒？

不它不是。不能保证会有任何消费者被唤醒。可以保证的是，如果有 2 个线程在等待，那么 2 个*不同*的线程将被放入运行队列。

> 或者可能是两个`notify()`s 在彼此之后不久触发导致同一个消费者线程排队等待唤醒两次？

不会。两次`notify()`调用不会导致同一个消费者线程排队两次。然而，它可能会导致一个线程被唤醒并且可能没有其他线程在等待，因此第二个`notify()`调用可能什么也不做。当然，线程可能已经被唤醒，然后又马上回来等待，所以以`notify()`这种方式获得第二个电话，但我认为这不是你要问的。

> java是否有一些原子内部操作来唤醒线程一次？

是的。该`Thread`代码有许多同步点。一旦一个线程被通知，它就会被移出`wait`队列。未来的调用`notify()`将查看`wait`队列而不是找到线程。

还有一点*很重要*。对于生产者/消费者模型，请始终确保您在`while`循环中测试条件。原因是消费者在锁上被阻塞但没有等待条件时存在竞争条件。

```
 synchronized (workQueue) {
     // you must do a while here
     while (workQueue.isEmpty()) {
         workQueue.wait();
     }
     workQueue.remove();
 } 
```

`Consumer1`可以等待`workQueue`。 `Consumer2`可以`synchronized`在运行队列中被阻塞。如果将某些内容放入`workQueue`并`workQueue.notify()`调用。 `Consumer2`现在被放入运行队列，但在谁最先出现的*后面。* `Consumer1`这是一个常见的实现。因此`Consumer1`，从通知的项目中删除`workQueue`项目`Consumer2`。 `Consumer2`如果队列为空，则必须再次测试，`workQueue`否则`remove()`将抛出，因为队列再次为空。[有关比赛](http://256stuff.com/gray/docs/misc/producer_consumer_race_conditions/)的更多详细信息，请参见此处。

同样重要的是要意识到虚假唤醒已被记录，因此`while`循环可以防止线程在没有`wait()`调用的情况下被唤醒。

综上所述，如果您可以按照其他答案中的建议使用 a 来减少生产者/消费者代码，`BlockingQueue`那么您应该这样做。`BlockingQueue`代码已经解决了所有这些问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T11:48:50.443

**是的，你所描述的可能会发生。**

如[javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#notify%28%29)中所述，`notify`唤醒任意线程。因此，如果您的线程已完成并`wait`在 next 之前调用过`notify`，那么它就是唤醒的任意候选者之一。

我在多线程应用程序方面拥有丰富的经验，我发现我使用以下两种模式之一：

1.  有多个睡眠线程需要在一个事件中唤醒，它们唤醒的顺序无关紧要。在这种情况下，我`notifyAll`用来唤醒他们。

2.  有一个睡眠线程需要在事件中唤醒。在这种情况下，我用`notify`它来唤醒它。

如果我曾经遇到过有多个睡眠线程并且我只想唤醒其中一个的情况，我会使用不同的设计来实现这一点。基本上，我自己构建了一些东西，这样运行时环境就不会做出任意决定。我总是想确切地知道什么会醒来。

我将设计分解为这两个场景之一，或者我使用[java.util.concurrent](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-frame.html)包中的某些内容。我从来没有遇到过虚假通知的问题，但我对用于锁定的对象也非常小心。我倾向于创建 vanilla`Object`实例，其唯一目的是成为锁定操作的目标，但偶尔我会使用一个类类型已明确定义且在我控制之下的对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T11:21:33.943

从[notify() 的 javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#notify%28%29)：

选择通知哪个线程“是任意的，由实现决定”

它几乎肯定不会是唤醒线程的“公平”（该术语用于计算机科学和并行）算法。同一个线程完全有可能连续两次被唤醒。另请注意，虚假通知也是可能的。

一般来说，我同意建议使用[BlockingQueue](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html)实现而不是自己做的评论。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-21T11:52:00.773

您可以使用[ReentrantLock](http://docs.oracle.com/javase/7/docs/api/index.html?java/util/concurrent/locks/ReentrantReentrantLock.html)来获得公平的到达顺序策略。接口[ReadWriteLock](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReadWriteLock.html)，获取生产者-消费者行为。[ReentrantReadWriteLock](http://docs.oracle.com/javase/7/docs/api/index.html?java/util/concurrent/locks/ReentrantLock.html)类结合了这两种功能。

或者

您应该使用已实现此模式的[ArrayBlockingQueue 。](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ArrayBlockingQueue.html)

```
int capacity = 10;
boolean fair = true;
new ArrayBlockingQueue(capacity, fair); 
```

# c# - 从字母数字中拆分数字部分

> ID：10684116
> 
> 赞同：2
> 
> 时间：2012-05-21T11:12:19.497
> 
> 标签：c#, regex

我有一个 AlphaNumeric 值，其中可能包含空格或低于分数。我想从中拆分数字并将值加一，并且需要将数字部分连接回 Alpha 部分。

例如，字母数字可能是：1- BA 123 或 2\. BA_123

我使用了 Regex，如果字符串不包含任何空格或下划线，它就可以工作。这是用于拆分和递增一的代码：

```
string StrInputNumber="BA123" 
var numAlpha = new Regex("(?<Alpha>[a-zA-Z]*)(?<Numeric>[0-9]*)"); 
var match = numAlpha.Match(StrInputNumber); 
var alpha = match.Groups["Alpha"].Value; 
int num = int.Parse(match.Groups["Numeric"].Value); 
```

这仅适用于没有任何特殊字符的字母和数字

请指导解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T11:51:29.100

您只需要在您期望它们的位置添加这些字符。

```
string[] StrInputNumber = { "BA123", "BA_123", "BA 123", "Foo 1"};
foreach (String item in StrInputNumber) {

    Console.Write(item + "\t==>\t");
    var numAlpha = new Regex("(?<Alpha>[a-zA-Z]*[ _]?)(?<Numeric>[0-9]*)");
    var match = numAlpha.Match(item);
    var alpha = match.Groups["Alpha"].Value;
    int num = int.Parse(match.Groups["Numeric"].Value) + 1;

    Console.WriteLine(alpha + num);
} 
```

这将允许（可选地）`_`在字母后留一个空格或一个空格。

如果你想更灵活，你可以在字母所在的类中添加字符。

```
var numAlpha = new Regex("(?<Alpha>[a-zA-Z _]*)(?<Numeric>[0-9]*)"); 
```

这将允许在字符串中的数字之前的任何位置使用任意数量的空格和下划线（例如“ `Foo _ bar ___ 123`”将匹配）。

**统一码**

如果您想匹配所有字母而不仅仅是 ASCII 字母，请尝试[Unicode 代码属性](http://www.regular-expressions.info/unicode.html#prop)

`\p{L}`可以是任何语言的任何字母

`\d`是数字的简写字符类

```
var numAlpha = new Regex("(?<Alpha>[\p{L} _]*)(?<Numeric>\d*)"); 
```

**进一步阅读**

对于一些正则表达式基础知识，您可以看到

*   我的博客文章[每个程序员都应该知道的关于正则表达式的知识](http://blog.xisb.de/?p=4)

*   [正则表达式](http://www.regular-expressions.info/tutorial.html)教程（正则表达式的一个很好的来源）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:30:46.553

不确定这是否是您所要求的，但是 - 如果您有 1 个空格或下划线：

```
var numAlpha = new Regex("(?<Alpha>[a-zA-Z]*)[ _]{1}(?<Numeric>[0-9]*)"); 
```

如果你有很多：

```
var numAlpha = new Regex("(?<Alpha>[a-zA-Z]*)[ _]*(?<Numeric>[0-9]*)"); 
```

# c# - 无法向存储库添加条目

> ID：10684128
> 
> 赞同：0
> 
> 时间：2012-05-21T11:13:02.597
> 
> 标签：c#, jquery, asp.net-mvc-3, jquery-ui, postgresql

我有一个 db 和 ET DBModel。我使用 PostgreSQL。

当我试图向我的网格中添加一个条目时，什么也没有发生。但删除和编辑工作正常。我应该怎么办？

谢谢。

**这是控制器代码**

```
 public ActionResult GetFormForAddOrEdit(string id)
    {
        if (string.IsNullOrEmpty(id))
        {
            return PartialView(new TypeDictModel());
        }
        else
        {
            TypeDict td = typeDictRepo.GetById(id);
            TypeDictModel tdt = new TypeDictModel() { Oid = td.Oid, FormOfProduction = td.FormOfProduction };
            return PartialView(tdt);
        }
    }

    public virtual string SaveTypeDictEntry(TypeDictModel tdm)
    {
        string newTDE = typeDictRepo.Save(tdm.Oid, tdm.FormOfProduction);
        return newTDE;
    }

    public virtual void DeleteEntry(string id)
    {
        typeDictRepo.Delete(id);
    } 
```

**这是视图**

```
 function CloseTypeDictModal() {
    $('#EditTypeDictModal_Close').click();
}

function SaveNewEntry() {
    $.ajax({
        url: '@Url.Action("SaveTypeDictEntry", "TypeDict")',
        async: true,
        dataType: "html",
        type: 'POST',
        data: $('#TypeDictForm').serialize(),
        success: function (data) {

            CloseTypeDictModal();
            $('#newTypeDictGrid').jqGrid().trigger("reloadGrid");
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T17:03:34.860

修复了我的存储库。错过了这一行 Context.SaveChanges(); ^^

# android - 我们可以从服务器访问android应用程序而不安装到手机上吗

> ID：10684133
> 
> 赞同：0
> 
> 时间：2012-05-21T11:13:23.753
> 
> 标签：android

我是Android新手，所以我想知道这一点：

有没有办法在不安装 .apk 的情况下从云服务器访问应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:15:40.860

您可以创建一个 Web 应用程序，例如 Youtube。

这意味着您可以从 Android 浏览器或通过 WebView 访问它，但使用 WebView 意味着用户必须下载应用程序。

[在这里](http://developer.android.com/guide/webapps/index.html)了解更多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:36:00.200

> **有没有办法在不安装.apk**的情况下从云服务器访问应用程序？

答案：没有

如果您希望应用在云端进行管理，您可以创建一个 webapp 并使用 Android Webview 对其进行包装。但是您仍然需要在设备上安装该应用程序。

另一种方法是，您可以使用 Jquery Mobile 或 Sencha Touch 等用户界面系统（看起来很原生）创建一个 Web 应用程序，然后将其托管在您的服务器上，并要求您的用户通过浏览器启动它，并将该 Web 应用程序添加到他们的 Android 设备主屏幕。因此，用户无需安装该应用程序，该应用程序（但不是本机）将作为已安装的应用程序在他/她的主屏幕上可用。

# javascript - 制作列表后刷新jQuery画廊 动态清空

> ID：10684135
> 
> 赞同：0
> 
> 时间：2012-05-21T11:13:29.560
> 
> 标签：javascript, jquery, page-refresh

我正在使用 jQuery 库，默认情况下第一次使用 js 加载图像；单击按钮时，我清空列表并再次加载图像，但即使我使用该功能，图像也不会显示`.reload()`。在 .reload() 页面再次加载并再次显示默认图像，但我希望在使列表为空后单击按钮上加载的图像。我还使用了仅刷新页面某些部分的方法。IE ![在此处输入图像描述](../Images/2024ecd3751929d22e04e1b8d8d904f5.png)

这里“list” id my，我首先将其清空，“1”是我要重新加载的 div，其中包含 id =“slider”的画廊，下面是我的全部功能：

```
("#list").empty(); 
    $("#1").reload(location.href+" #slider>*");

    var button=i;
    if(button==1){
            alert('1')
        $('ul').append('<li> <img src="images/round.jpg" style="height:400px;width:900px;" /> <center> <strong>Capacity   :</strong>500 <br>    <strong>Rent       : </strong>5000 Rs.<br> <strong>Arrangment : </strong>Circular Table Arrangement.<br></center></li>');
    }

    if(button==2){

        $('ul').append('<li> <img src="images/round.jpg" style="height:400px;width:900px;" /> <center> <strong>Capacity   :</strong>500 <br>    <strong>Rent       : </strong>5000 Rs.<br> <strong>Arrangment : </strong>Circular Table Arrangement.<br></center></li>');
        $('ul').append('<li> <img src="images/square.jpg" style="height:400px;width:900px;" /> <center> <strong>Capacity   : </strong>10,000<br><strong>Rent       : </strong>35,000 Rs.<br><strong>Arrangment : </strong>Square Table Arrangement. <br></center>  </li>');                                 

    }
    if(button==3){

        $('ul').append('<li> <img src="images/round.jpg" style="height:400px;width:900px;" /> <center> <strong>Capacity   :</strong>500 <br>    <strong>Rent       : </strong>5000 Rs.<br> <strong>Arrangment : </strong>Circular Table Arrangement.<br></center></li>');
        $('ul').append('<li> <img src="images/square.jpg" style="height:400px;width:900px;" /> <center> <strong>Capacity   : </strong>10,000    <br>                                <strong>Rent       : </strong>35,000 Rs.<br><strong>Arrangment : </strong>Square Table Arrangement. <br></center>  </li>'); 
        $('ul').append('<li> <img src="images/square.jpg" style="height:400px;width:900px;" /> </li>');

    }
    if(button==4){
        $('ul').append('<li> <img src="images/round.jpg" style="height:400px;width:900px;" /> <center> <strong>Capacity   :</strong>500 <br>    <strong>Rent       : </strong>5000 Rs.<br> <strong>Arrangment : </strong>Circular Table Arrangement.<br></center></li>');
        $('ul').append('<li> <img src="images/square.jpg" style="height:400px;width:900px;" /> <center> <strong>Capacity   : </strong>10,000    <br>                                <strong>Rent       : </strong>35,000 Rs.<br><strong>Arrangment : </strong>Square Table Arrangement. <br></center>  </li>'); 
        $('ul').append('<li> <img src="images/line.jpg" style="height:400px;width:900px;" /> </li>');
        $('ul').append('<li> <img src="images/square.jpg" style="height:400px;width:900px;" /> <center> <strong>Capacity   : </strong>10,000    <br>                                <strong>Rent       : </strong>35,000 Rs.<br><strong>Arrangment : </strong>Square Table Arrangement. <br></center>  </li>'); 

    }
} 
```

# android - Android - 丢失 PNG 图像 OnDraw 的质量

> ID：10684137
> 
> 赞同：1
> 
> 时间：2012-05-21T11:13:34.580
> 
> 标签：android, bitmap, png

我有图片（粒子图片，不移动，只是单个png），我在photoshop上准备好了，当在Android设备上，当你点击屏幕粒子图片时，它是一个sufraceview上的位图（通过OnDraw方法绘制），但是它正在严重失去其质量

有什么建议（查看测试的 Photoshop 图像和设备的真实截图）？

谢谢

![不同之处](../Images/375b879b34b20e34be023e677fc81fd6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:31:40.040

以高质量保存 png(24)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T16:18:30.863

不确定这是否是同一个问题，但我也得到了一个模糊的 png 图像，我从我的布局 xml 文件中的 ImageView 中引用它。它也是一个 24 位图像，但直到我保存了具有更大宽度和高度的图像，它才真正看起来不错。我从 88 到 250 的宽度，现在图像看起来很棒。

# mysql - SQL中Join之前或之后的过滤

> ID：10684139
> 
> 赞同：4
> 
> 时间：2012-05-21T11:13:48.010
> 
> 标签：mysql, sql, join, explain

我有两个查询来获取相同的数据，它们或多或少具有相同的执行时间。

```
SELECT name AS prog_name,d.chap_name,d.vid_name,d.idvideo FROM program 
     JOIN (SELECT name AS chap_name,chapter.idprogram, c.vid_name,c.idvideo FROM chapter 
     JOIN (SELECT a.name AS vid_name, a.idvideo, b.idchapter FROM video a 
     JOIN (SELECT idvideo,idchapter,x.idchaptervideo FROM chaptervideo 
     JOIN (SELECT idchaptervideo FROM prescriptionvideo  WHERE idprescription=50)x 
     ON x.idchaptervideo=chaptervideo.idchaptervideo) b 
     ON b.idvideo=a.idvideo)c 
     ON c.idchapter=chapter.idchapter) d 
     ON d.idprogram=program.idprogram

SELECT program.name AS prog_name,chapter.name as chap_name,video.name as vid_name,video.idvideo FROM prescriptionvideo
JOIN chaptervideo ON prescriptionvideo.idchaptervideo=chaptervideo.idchaptervideo
JOIN video on chaptervideo.idvideo=video.idvideo
JOIN chapter on chaptervideo.idchapter=chapter.idchapter
JOIN program on chapter.idprogram=program.idprogram
where idprescription=50 
```

有人可以指导我其中哪一个更好。我在前者的加入之前和后者的加入之后使用了过滤。MySQL 解释显示，与后者相比，前者的行扫描更多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:24:28.720

> MySQL 解释显示，与后者相比，前者的行扫描更多。

好吧，你有它！除了一个小细节。与将相同条件放在 where 子句中相比，将过滤条件放在 join 语句中可能会返回不同的结果。您的两个 SQL 查询并不完全相同，即使它们返回相同的结果集。

```
SELECT program.name AS prog_name,chapter.name as chap_name,video.name as vid_name,video.idvideo FROM prescriptionvideo 
JOIN chaptervideo ON prescriptionvideo.idchaptervideo=chaptervideo.idchaptervideo 
JOIN video on chaptervideo.idvideo=video.idvideo 
JOIN chapter on chaptervideo.idchapter=chapter.idchapter and chapter.idprescription=50
JOIN program on chapter.idprogram=program.idprogram 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:23:36.510

第一个更好，因为它易于读写并且具有较低的行扫描值，否则查询具有相同的结果集。

# ios - 无法在 iphone 应用程序中添加某些字体

> ID：10684143
> 
> 赞同：0
> 
> 时间：2012-05-21T11:14:09.423
> 
> 标签：ios, fonts

在我的应用程序中，我需要添加两种字体：

Insight_screen_Regular-e 和 Insight_screen_Bold-e

我已将它们以 ttf 格式拖放到 Xcode 项目资源文件夹中。在 application-info.plist 文件中，我已将键“应用程序提供的字体”添加到新行，然后添加了两个项目以添加字体。然后我构建了项目。

但是我无法从 xib 文件中访问这些字体。可能是什么原因。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:31:07.467

阅读[这个答案](https://stackoverflow.com/a/2616101/463892)。

您可能没有在`fontWithName:size:`. 您需要使用字体的*PostScript*名称`fontWithName:size:`，您可以通过在 OS X 上的 Font Book 中打开字体，选择字体，然后按 cmd+I 来找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:18:00.707

从 .m 文件中，我正在使用这样的自定义字体

```
btnPhotoLibrary.titleLabel.font = [UIFont fontWithName:@"Hand Of Sean" size:18]; 
```

![在此处输入图像描述](../Images/0ca3d1f944bf63f24cf00450000f6adc.png)

# javascript - 如何从 Javascript 中检索 xml 数据

> ID：10684145
> 
> 赞同：16
> 
> 时间：2012-05-21T11:14:24.767
> 
> 标签：javascript, xml, xml-parsing

> **可能重复：**
> [如何使用 Javascript 从 XML 文档中提取值](https://stackoverflow.com/questions/5415452/how-to-extract-values-from-an-xml-document-using-javascript)

我的 demo.xml 文件包含以下数据：

```
<?xml version="1.0"?>
<user>
<details>
<name>abc</name>
<class>xyz</class>
<city>pqr</city>
</details>
<info>
<id>123</id>
<code>456</code>
</info>
</user> 
```

我想使用 Javascript 将文件 demo.xml 中的所有这些数据提取到我的代码中。我怎样才能得到这个？有什么解决办法吗？谢谢....

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-21T11:26:53.523

这是一个可以让您朝着正确方向前进的示例：

```
var request = new XMLHttpRequest();
request.open("GET", "/path/demo.xml", false);
request.send();
var xml = request.responseXML;
var users = xml.getElementsByTagName("user");
for(var i = 0; i < users.length; i++) {
    var user = users[i];
    var names = user.getElementsByTagName("name");
    for(var j = 0; j < names.length; j++) {
        alert(names[j].childNodes[0].nodeValue);
    }
} 
```

# android - Android MediaPlayer - 每当实例化活动时都会创建不需要的新实例

> ID：10684146
> 
> 赞同：1
> 
> 时间：2012-05-21T11:14:29.907
> 
> 标签：android, media-player, android-activity, recreate

我在一个活动中有一个 MediaPlayer，每当用户单击特定歌曲时都会调用它。播放 MediaPlayer 后，如果用户单击返回，他们可以选择另一首歌曲。

问题是，在选择第二首歌曲时，MediaPlayer 会再次创建，并且两首歌曲同时开始播放。我尝试在活动开始时使用“if MediaPlayer.isplaying, MediaPlayer.stop”，但是一旦用户按下并滚动播放另一首歌曲，MediaPlayer 就会停止。

代码如下所示。如果您能保持基本的答案，我将不胜感激，因为我对 java 的了解有限（我正在尝试开发！）。

包含 MediaPlayer 的 Activity：

```
package music.tabber;

import java.io.IOException;

import android.app.Activity;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.widget.ImageButton;
import android.widget.TextView;

public class MusicPlayer extends Activity {

    private ImageButton playButton;
    private TextView songTitleLabel;
    private TextView songArtistLabel;
    private MediaPlayer mediaPlayer = new MediaPlayer();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.playing);

        Bundle extras = getIntent().getExtras();
        String songPath = extras.getString("songPath");
        String songTitle = extras.getString("songTitle");
        String songArtist = extras.getString("songArtist");

        playButton = (ImageButton) findViewById(R.id.playButton);
        songTitleLabel = (TextView) findViewById(R.id.songTitleLabel);
        songArtistLabel = (TextView) findViewById(R.id.songArtistLabel);

        playSong(songPath); 

        songArtistLabel.setText(songArtist);
        songTitleLabel.setText(songTitle);

        playButton.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                if(mediaPlayer.isPlaying()){
                    if(mediaPlayer!=null){
                        mediaPlayer.pause();
                        playButton.setImageResource(R.drawable.ic_play);
                    }

                }else{
                    if(mediaPlayer!=null){
                        mediaPlayer.start();
                        playButton.setImageResource(R.drawable.ic_pause);
                    }
                }
           }

        });

    }

    private void playSong(String songPath) {
        try {
            mediaPlayer.reset();
            mediaPlayer.setDataSource(songPath);
            mediaPlayer.prepare();
            mediaPlayer.start();

            // Changing Button Image to pause image
            playButton.setImageResource(R.drawable.ic_pause);

        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }

} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:18:59.593

也许您想考虑[服务](http://developer.android.com/guide/topics/fundamentals/services.html)对 MediaPlayer 进行灵活控制。从任何活动中播放/暂停都很简单。

# html - 需要在 HTML5 中自定义输入类型=数字的格式

> ID：10684149
> 
> 赞同：0
> 
> 时间：2012-05-21T11:14:42.487
> 
> 标签：html

我需要使用 type="number" 以便出现数字键盘。该数字也应采用十进制。千位分隔符将是 . 小数点分隔符将是逗号。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:46:02.193

键盘的格式将取决于用户设备的键盘设置。

# jquery - jquery自动完成不打印结果

> ID：10684152
> 
> 赞同：0
> 
> 时间：2012-05-21T11:15:06.490
> 
> 标签：jquery, css, autocomplete, jquery-autocomplete

我正在尝试第一次使用`autocomplete`jquery ui 的功能，但我无法让它正常工作

javascript代码：

```
$("#search_input").autocomplete({
  source: function(request, response) {
    $.getJSON( "do.php", { OP: "news_search", category: cat_id, get: request }, function(result){
      /*response($.map(result, function(item) {
        return item.NAME;
      }));*/
      response(result);
      console.log(result);
    })
  },
  minLength: 2
}); 
```

它返回数据，但不会显示：http: [//i46.tinypic.com/1z85c0.png](http://i46.tinypic.com/1z85c0.png)

我什至尝试添加一些 css 以查看它是否有效：

```
.ui-autocomplete{
    position: absolute;
    z-index: 1000;
    border: 1px solid red;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:17:34.280

您的 JSON 应该返回`label`and`value`参数，而不是`id`and `headline`。

> 具有标签和值属性的对象数组：
> [ { label: "Choice1", value: "value1" }, ... ]

[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T15:19:03.347

我最终阅读了这篇文章： http: [//net.tutsplus.com/tutorials/javascript-ajax/how-to-use-the-jquery-ui-autocomplete-widget/](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-use-the-jquery-ui-autocomplete-widget/)

所以这就是我使用它的方式并且它可以工作：

```
$("#search_input").autocomplete({
    source: function(request, add) {
        $.getJSON("do.php", { OP: "news_search", category: cat_id, get: request }, function(results){

          consoloe.log(results)
          var suggestions = [];

          $.each(results, function(i, val){
            suggestions.push(val.headline)
          });

          add(suggestions);

        });
    },
    minLength: 2
}); 
```

# c++ - ::socket 返回 0 并且 ::connect 将 errno 设置为 EBADF

> ID：10684153
> 
> 赞同：2
> 
> 时间：2012-05-21T11:15:12.177
> 
> 标签：c++, sockets

我正在使用 BSD 套接字，我想用来`::connect`连接到`example.com`端口 80。手册页`::socket`告诉我它返回一个有效的文件描述符，或者返回`-1`错误。

```
auto fd = ::socket(AF_INET, SOCK_STREAM, 0);

struct ::sockaddr_in addr;
::bzero(&addr, sizeof(addr));
addr.sin_family = family_;

struct ::hostent* hostent = ::gethostbyname(host.c_str());
::bcopy(hostent->h_addr, &addr.sin_addr.s_addr, hostent->h_length);
addr.sin_port = port;

auto err = ::connect(fd,
                     reinterpret_cast<struct ::sockaddr*>(&addr),
                     sizeof(addr)); 
```

`fd == 0`，所以`::socket`成功了（否则它会返回`-1`）。但是，`err == -1`和`errno`设置为`EBADF`，表示这`fd`是一个错误的文件描述符。

这里会发生什么？为什么`::connect`告诉我我给了它一个错误的文件描述符，而我显然没有？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:27:05.167

您应该确认`socket`实际上*返回*0？除非您关闭了标准文件描述符，否则这将是非常不寻常的。确保在套接字调用后立即检查它，以防它被其他调用破坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:22:00.047

尝试将第三个参数作为 IPPROTO_TCP 显式传递给 ::socket() 调用。

```
auto fd = ::socket(AF_INET, SOCK_STREAM, IPPROTO_TCP); 
```

'0' 值是 IPPROTO_IP，这不是您需要的。

另一个猜测：尝试设置

```
addr.sin_addr = htons(port); 
```

您可能正在连接不可用的东西（端口不是 80，如您所料，而是 0x5000 == 20480）。

第三次尝试。您正在使用 BSD/MacOS、Linux 或其他 POSIX 系统？还是 WinSock ？如果是 Windows，请检查 WSAStartup 调用。

# iphone - KVO - 如何获取已注册观察者的对象列表

> ID：10684160
> 
> 赞同：8
> 
> 时间：2012-05-21T11:15:46.803
> 
> 标签：iphone, ios, key-value-observing, nsnotificationcenter, nsnotification

我正在动态地在一堆 tableview 控制器上注册一个观察者，所以如果他们在同一个对象上注册，我需要删除以前的观察者。为此，我需要检查对象上是否存在观察者。

这可能吗？我知道使用 NSNotification 你可以使用 NSNotification 中心单例，但是这对于 KVO 是一样的吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-21T11:24:20.667

我不知道，您如何删除在同一对象上注册的观察者。

但我认为以下方法将帮助您提前找到解决方案。

`observationInfo`

返回一个指针，该指针标识有关向接收者注册的所有观察者的信息。

```
- (void *)observationInfo 
```

此方法的默认实现从由接收者指针键入的全局字典中检索信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T11:35:12.447

不，我知道没有简单的方法。KVO 和 NSNotification 在这方面有所不同。如果您需要该功能，为什么不使用 NSNotification 而不是 KVO 来实现您的解决方案？

# textbox - 控件会自动从一个文本框转移到另一个文本框？

> ID：10684162
> 
> 赞同：0
> 
> 时间：2012-05-21T11:15:52.410
> 
> 标签：textbox, webpage

我的网页包含两个文本框。默认情况下，页面焦点在第一个文本框上。当我在第一个文本框中键入第三个字符时，我希望控件自动转移到第二个文本框。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:24:37.297

```
function ThirdCharPressed(){
 var char=1;
 $('#yourtextbox').keypress(function()
 char++;
 if(char==3)
 $('#yourSecondtextbox').foucus();
 });
} 
```

我猜这可能有用

# javascript - 如何更改此 Greasemonkey 脚本以在不同页面上工作？

> ID：10684164
> 
> 赞同：-1
> 
> 时间：2012-05-21T11:16:03.963
> 
> 标签：javascript, jquery, greasemonkey, visited

我尝试了[如何检测页面上已访问和未访问的链接中的脚本？](https://stackoverflow.com/questions/7290959/how-can-i-detect-visited-and-unvisited-links-on-a-page)，它适用于测试页面，但不适用于我的。

那里的答案说我需要改变`SelectorStr`，但要改变什么？
我如何检查哪些是我的选择。我试图搜索`ui.topicList`但`a.topicTItle`在这些值上找不到任何东西。

编辑（来自下面的评论）：
我在页面源代码中找到了这个 HTML：

```
<td class="plist"> 
    <a target="_top" href="/smartphones/clik-where-suppose.html" target="_self" ... 
```

但是，如果设置`SelectorStr`为`td.plist a._top`，它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-21T12:01:48.573

我还没有尝试过代码，但我想你必须在那里放一个选择器字符串。在示例中，使用了两件事。第一个是类名为 topicList 的无序列表，第二个是类 topicTitle 的链接。

因此，如果您想将该代码与 SelectorStr 一起应用，您的 html 应该如下所示：

```
<ul class="topicList">
      <li><a class="topicTitle" href="#">listitem 1</a></li>
      <li><a class="topicTitle" href="#">listitem 2</a></li>
      <li><a class="topicTitle" href="#">listitem 3</a></li>
</ul> 
```

# parallel-processing - 是否可以使 lzw 压缩/解压缩并行？

> ID：10684166
> 
> 赞同：0
> 
> 时间：2012-05-21T11:16:14.977
> 
> 标签：parallel-processing, compression, lzw

我已经阅读[了这篇](http://marknelson.us/2011/11/08/lzw-revisited/)关于如何使用 LZW 压缩/解压缩数据的文章，但我希望让它使用多个线程......但我认为这是不可能的。你怎么看？关于这个主题的任何论文或文章？甚至提示如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:09:05.980

您可能想阅读[这篇论文](http://u.cs.biu.ac.il/~wiseman/dam2005.pdf)，特别是第 2.2 节准确解释了如何并行化 LZW 方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T19:52:17.677

在低级别并行化压缩算法将提供有限的加速，并且可能比它的价值更麻烦。原因是真正的好处在于压缩大量数据。在这种情况下，简单地将数据分解成碎片并使用普通算法单独压缩它们要容易得多。

LZW 很老，效果不是很好。其他方法可以更快更有效地压缩。您可以查看从[lz4](http://code.google.com/p/lz4/)到[zlib](http://zlib.net/)到[lzma](http://www.7-zip.org/sdk.html)到 ppmd、paq 等的各种方案，按照从最快压缩最少到最慢压缩最好的顺序。并行化的一个例子是[pigz](http://zlib.net/pigz/)，它使用[zlib](http://zlib.net/)使用尽可能多的处理器和内核将大文件压缩为[gzip 格式。](https://www.rfc-editor.org/rfc/rfc1952)它以并行方式提供从先前块到后续块的历史记录，以便与串行、单处理器 gzip 压缩相比不会失去压缩效率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-14T10:36:36.880

当需要进行大量整数运算时，使用多线程并行化压缩或解压缩算法是合理的。但`lzw`不需要它。例如，您可以查看[lzws](https://github.com/andrew-aladev/lzws/tree/master/src/compressor)源代码。

整数运算量很少。主要瓶颈是`dictionary`。您可以使用内存超频和自定义 malloc realloc 策略获得更高的性能。

# c++ - 预处理器宏作为其他宏的参数

> ID：10684169
> 
> 赞同：13
> 
> 时间：2012-05-21T11:16:19.647
> 
> 标签：c++, macros, c-preprocessor, legacy-code, visual-studio-macros

以下 C++ 代码编译并作为程序员在 GCC (4.0.4) 上工作

```
#define FOO(x,y,z) ((x)*(y)*(z))
#define BAR(x) FOO(x,1)
#define BAZ 3,7

int main()
{
    return BAR(BAZ); /* interpreted as return ((3)*(7)*(1)); */
} 
```

但是，宏会在 Microsoft Visual C++ Express 2010 上导致错误：

> main.cpp(7): 警告 C4003: 没有足够的实际参数用于宏'FOO'
> main.cpp(7): 错误 C2059: 语法错误: ')'

问题似乎是 Microsoft 编译器在内部处理 BAR 宏时，并未将 BAZ 宏扩展为可用作宏 FOO 的两个单独参数的参数。

根据标准，哪个编译器正确处理这种情况？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-21T11:38:08.193

根据 ISO/IEC 14882:2003 (C++ Stardard) 的 16.3.4 宏扩展执行如下：

1.  宏调用被宏的替换列表（主体）替换，其中每个参数名称（除非它受 # 或 ## 影响）被宏调用中指定的相应参数的完整宏扩展替换。
2.  *重新扫描*第 1 步的结果。如果其中有更多的宏调用（除了那些已经扩展的正在考虑的文本），它们会根据相同的过程递归地扩展。

您指定的代码的步骤顺序是：

1.  `BAR(BAZ)`
2.  `FOO(3,7,1)`
3.  `((3)*(7)*(1))`

所以 GCC 是对的，而 VC 不是。但是 VC 抱怨的错误是`FOO`有 3 个参数并且`BAR`只指定了其中的 2 个。VC 显然试图尽快捕获错误，但做得有点过头了。

# c# - 在 MvvmCross 中导航到没有 ViewModel 的视图

> ID：10684174
> 
> 赞同：1
> 
> 时间：2012-05-21T11:16:30.007
> 
> 标签：c#, xamarin.android, mvvmcross

我的一般问题：有没有办法导航到没有 ViewModel 的视图？

例如：

我有一个不包含 ViewModel 的 Activity，因为它在短时间内只显示一张图片，然后就消失了。现在正常的方法是执行 requestNavigate()。但我没有 ViewModel 可以进入那里。我如何导航到此活动？

感谢您的回答！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T11:36:52.657

我的意见：**是的 - 您应该始终使用 ViewModel。**

在每个平台上，mvvmcross 框架使用 ViewModel 的类型来识别要显示的视图。

如果您不使用 ViewModel，那么客户端应用程序如何知道要显示什么 View？

* * *

如果你发现你有很多这样的空 ViewModel 类，那么你当然可以总是使用 ViewModel，比如：

```
 public class StaticViewModel : BaseViewModel
  {
      public enum WhichOne
      {
          AboutPage,
          InfoPage,
          HelpPage,
          // etc
      }

      public WhichOne WhichPage { get; set; }

      public StaticViewModel(string which)
      {
          WhichPage = (WhichOne) Enum.Parse(typeof(WhichOne), which, false);
      }
  } 
```

但总的来说，我认为这不会比每个视图使用一个 ViewModel 获得任何好处......

# openstreetmap - 安装 Mapsforge-Mapwriter-plugin

> ID：10684179
> 
> 赞同：2
> 
> 时间：2012-05-21T11:16:44.803
> 
> 标签：openstreetmap

我正在尝试安装用于渗透的 mapsforge-mapwriter-plugin，但我无法使其正常工作。

我尝试了普通的基于 shell 的版本和页面上提到的方法：“ [http://code.google.com/p/mapsforge/wiki/GettingStartedMapWriter](http://code.google.com/p/mapsforge/wiki/GettingStartedMapWriter) ”，但在我的电脑上没有任何工作。

我的硬盘驱动器上也不存在名为 Application Data 的目录，我也没有得到以下行：“2\. 将下载的插件复制到当前目录中的子目录插件”，在这种情况下，当前目录是我提取的文件夹osm 或不实际的文件夹方法。

第三种方法也不起作用，可能我做错了什么，我将 MapWriter.jar 提取到 osmosis 文件夹中，一次提取到子文件夹插件（我必须手动创建），一次提取到 osmosis/bin 文件夹和一个在它自己的渗透文件夹中。

但结果总是一样的：错误。在第二种情况下，osmosis 不知道插件并且总是说命令 --mw unknown。

在第三种情况下，当我输入： C:\usertemp\Map\osmosis-0.40.1\bin>osmosis -plugin org.mapsforge.mapwriter.osmosis.MapFileWriterPluginLoader 它说无法加载插件类...

我期待可能的建议，因为我真的不知道如何让插件工作

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T16:02:55.530

我也尝试了各种方法，但唯一让 Osmosis 插件运行的方法是在执行以下操作后：

> 将插件 jar 放入`$OSMOSIS_HOME/lib/default`目录并将 `org.openstreetmap.osmosis.plugin.elasticsearch.elasticsearchWriterPluginLoader` （插件加载器的完整命名空间）行添加到 `$OSMOSIS_HOME/config/osmosis-plugins.conf`文件中（如果需要，创建它）。

*[-- 从elasticsearch-osmosis-plugin](https://github.com/ncolomer/elasticsearch-osmosis-plugin#12-install-elasticsearch-osmosis-plugin)的 README中提取的过程*

您还可以编辑`$OSMOSIS_HOME/config/plexus.conf`并添加一行，例如包含您的插件的目录`load ${app.home}/lib/plugins/*.jar`。`${app.home}/lib/plugins/`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T10:17:21.277

刚刚尝试从[http://code.google.com/p/mapsforge/wiki/GettingStartedMapWriter#Plugin_Installation](http://code.google.com/p/mapsforge/wiki/GettingStartedMapWriter#Plugin_Installation)遵循相同的程序，它确实有点搞砸了。

`mapsforge.jar`然而，投入做到`$OSMOSIS_HOME/lib/default`了。请注意，我没有使用`-plugin`选项，只是复制文件并启动`osmosis --read-xml ... --mapfile-writer file ...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-07T01:25:18.943

完全同意@Osman-pasha 我还没有看过关于插件安装的[文档](https://wiki.openstreetmap.org/wiki/Osmosis/Detailed_Usage_0.47#Plugin_Tasks)帮助我一次。

这里有一些关于如何让你的依赖项至少安装在 Windows 上的更多细节（对于像我这样的傻瓜）：

1.  首先你需要找到正确的插件`.jar-with-dependencies`文件。大多数插件库为您提供 maven 和 sonatype 的链接。我永远无法在他们身上找到我想要的东西。我终于在 sonatype 存储库中找到了我需要的插件（您可能需要向下滚动，因为有很多不同的版本）[。](https://oss.sonatype.org/content/repositories/snapshots/org/mapsforge/)

2.  下载`.jar-with-dependencies`您需要的文件并将其粘贴到`$OSMOSIS_HOME/lib/default`.

就是这样。它应该不会在插件目录中进一步搞乱

# python - Python 检查 fork() 进程是否完成

> ID：10684180
> 
> 赞同：11
> 
> 时间：2012-05-21T11:16:45.093
> 
> 标签：python, fork

只是想知道是否有人可以帮助我。我遇到的问题是我 os.fork() 获取几位信息并将它们发送到文件，但检查 fork 进程是否不起作用。

```
import sys
import time
import os
import re

ADDRESS  = argv[1]
sendBytes = argv[2]

proID2 = os.fork()
if proID2 == 0:
    os.system('ping -c 20 ' + ADDRESS + ' > testStuff2.txt')
    os._exit(0)

print proID2

finn = True
while finn == True:
time.sleep(1)
finn = os.path.exists("/proc/" + str(proID2))
print os.path.exists("/proc/" + str(proID2))
print 'eeup out of it ' + str(proID2) 
```

我认为 os.path.exists() 可能不是正确的使用方法。

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-21T11:20:09.267

要等待子进程终止，请使用其中一个`os.waitXXX()`函数，例如[`os.waitpid()`](http://docs.python.org/library/os.html#os.waitpid). 这种方法可靠；作为奖励，它会给你状态信息。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-21T11:37:13.640

虽然您可以使用`os.fork()`and `os.wait()`（参见下面的示例），但您最好使用[subprocess](http://docs.python.org/library/subprocess.html#module-subprocess)模块中的方法。

```
import os, sys

child_pid = os.fork()
if child_pid == 0:
    # child process
    os.system('ping -c 20 www.google.com >/tmp/ping.out')
    sys.exit(0)

print "In the parent, child pid is %d" % child_pid
#pid, status = os.wait()
pid, status = os.waitpid(child_pid, 0)
print "wait returned, pid = %d, status = %d" % (pid, status) 
```

# plot - 带有误差线绘图的 gnuplot

> ID：10684182
> 
> 赞同：16
> 
> 时间：2012-05-21T11:16:48.463
> 
> 标签：plot, gnuplot

我的“file.txt”文件中的数据如下（显示示例行）

```
31 1772911000 6789494.2537881 
```

请注意，第二列是平均值，第三列是我的输入样本的标准差。因此，对于误差条，我需要 x 轴值 31 处的条，误差条从（第二列值）-（第三列值）开始，到（第二列值）+（第三列值）结束）。我尝试了以下方法：

```
plot "file.txt" using ($1-$2):1:($2+$1) with errorbars 
```

但结果是不合适的。有什么帮助吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-21T11:38:20.910

你需要 x:y:err，所以试试

```
plot "file.txt" using 1:2:3 with yerrorbars 
```

[![误差线](../Images/caec71fecad70493862c1293d5de3d16.png)](https://i.stack.imgur.com/mgIxu.png)

您可能需要烛台。这些通常是一个带有从顶部和底部延伸出来的误差线的盒子，但是将最小值和最大值设置为相同应该会给你所需大小的盒子：

```
plot "file.txt" using 1:($2-$3):($2-$3):($2+$3):($2+$3) with candlesticks 
```

[![烛台](../Images/d9ed9a7298d58c8c45133cdbb143967a.png)](https://i.stack.imgur.com/DiH1m.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-14T16:55:28.287

你也可以试试：

```
plot "file.txt" using 1:2:($2-$3):($2+$3) with errorbars 
```

($2-$3) 是 y 误差线低值，($2+$3) 是 y 误差线高值

但是，我认为您应该使用标准误差 = 标准偏差 / 平方根（样本大小）而不是标准偏差来计算误差线。

# php - 使用 preg_match_all 从字符串中提取单词

> ID：10684183
> 
> 赞同：2
> 
> 时间：2012-05-21T11:16:49.220
> 
> 标签：php, regex, string, keyword

我不擅长正则表达式，但我想用它从字符串中提取单词。

**我需要的单词至少应包含 4 个字符，并且提供的字符串可以是 utf8。**

示例字符串：

> Sus azahares presentan gruesos pétalos blancos teñidos de rosa o violáceo en la parte externa, con numerosos estambares (20-40)。

期望的输出：

```
Array(
    [0] => azahares
    [1] => presentan
    [2] => gruesos
    [3] => pétalos
    [4] => blancos
    [5] => teñidos
    [6] => rosa
    [7] => violáceo
    [8] => parte
    [9] => externa
    [10] => numerosos
    [11] => estambres
) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T12:44:35.330

如果要查找的单词是 UTF-8（根据规范至少 4 个字符长），由 ISO-8859-15 的字母字符组成（这对于西班牙语很好，但也适用于英语、德语、法语、 ETC。）：

```
$n_words = preg_match_all('/([a-zA-Z]|\xC3[\x80-\x96\x98-\xB6\xB8-\xBF]|\xC5[\x92\x93\xA0\xA1\xB8\xBD\xBE]){4,}/', $str, $match_arr);
$word_arr = $match_arr[0]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-21T11:28:03.073

您可以将下面的正则表达式用于简单的字符串。它将匹配任何最小长度 = 4 的非空白字符。

```
preg_match_all('/(\S{4,})/i', $str, $m); 
```

现在`$m[1]`包含您想要的数组。

***更新：***

正如 Gordon 所说，该模式也将匹配“（20-40）”。可以使用此正则表达式删除不需要的数字：

```
preg_match_all('/(\pL{4,})/iu', $str, $m); 
```

但我认为它只有在 PCRE 编译时支持 UTF-8 才有效。请参阅[PHP PCRE (regex) does not support UTF-8?](https://stackoverflow.com/questions/2106889/php-pcre-regex-doesnt-support-utf-8) . 它可以在我的电脑上运行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-18T04:52:19.220

那应该为您完成工作

```
function extractCommonWords($string) {
    $stopWords = array('i','a','about','an','and','are','as','at','be','by','com','de','en','for','from','how','in','is','it','la','of','on','or','that','the','this','to','was','what','when','where','who','will','with','und','the','www');

    $string = preg_replace('/\s\s+/i', '', $string); //echo $string, "<br /><br />"; // replace whitespace
    $string = trim($string); // trim the string
    $string = preg_replace('/[^a-zA-Z0-9 -_]/', '', $string); // only take alphanumerical characters, but keep the spaces and dashes too…
    $string = strtolower($string); // make it lowercase

    preg_match_all('/([a-zA-Z]|\xC3[\x80-\x96\x98-\xB6\xB8-\xBF]|\xC5[\x92\x93\xA0\xA1\xB8\xBD\xBE]){4,}/', $string, $matchWords);
    $matchWords = $matchWords[0];

    foreach($matchWords as $key => $item) {
        if($item == '' || in_array(strtolower($item), $stopWords) || strlen($item) <= 3) {
            unset($matchWords[$key]);
        }
    }

    $wordCountArr = array();
    if(is_array($matchWords)) {
        foreach($matchWords as $key => $val) {
            $val = strtolower($val);
            if(isset($wordCountArr[$val])) {
                $wordCountArr[$val]++;
            } else {
                $wordCountArr[$val] = 1;
            }
        }
    }

    arsort($wordCountArr);
    $wordCountArr = array_slice($wordCountArr, 0, 10);
    return $wordCountArr;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-21T11:50:37.440

使用`u`修饰符时，可以使用以下模式（[demo](http://codepad.viper-7.com/cvUTP9)）：

```
preg_match_all('(\w{4,})u', $string, $matches);
print_r($matches[0]); 
```

[`u`修饰符](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)的意思是：

> u (PCRE_UTF8)：此修饰符打开与 Perl 不兼容的 PCRE 的附加功能。模式字符串被视为 UTF-8。此修饰符在 Unix 上的 PHP 4.1.0 或更高版本以及 win32 上的 PHP 4.2.3 中可用。自 PHP 4.3.5 起检查模式的 UTF-8 有效性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-21T11:21:50.003

用空格分解你的字符串（这将创建一个包含所有单词的数组），然后检查单词是否大于 4 个字母。

```
//The string you want to explode
$string = "Sus azahares presentan gruesos pétalos blancos teñidos de rosa o violáceo en la parte externa, con numerosos estambres."
//explode your $string, which will create an array which we will call $words
$words = explode(' ', $string);

//for each $word in $words
foreach($words as $word)
{
    //check if $word length if larger then 4
    if(strlen($word) > 4)
    {
        //echo the $word
        echo $word;
    }
} 
```

[strlen();](http://php.net/manual/en/function.strlen.php)

> strlen — 获取字符串长度

[爆炸（）;](http://php.net/manual/en/function.explode.php)

> explode — 逐个字符串拆分

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-21T11:22:57.163

```
$string = Sus azahares presentan gruesos pétalos blancos teñidos de rosa o violáceo en la parte externa, con numerosos estambres

$words = explode(' ', $string);
echo $words[0];
echo $words[1]; 
```

等等

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-21T11:47:49.767

试试这个：

```
$str='Sus azahares presentan gruesos pétalos blancos teñidos de rosa o violáceo en la parte externa, con numerosos estambres (20-40).';
preg_match_all('/([^0-9\s]){4,}/i', $str, $matches);
echo '<pre>';
var_dump($matches);
echo '</pre>'; 
```

# lua - LuaSocket 需要超级用户来创建服务器

> ID：10684184
> 
> 赞同：0
> 
> 时间：2012-05-21T11:17:00.060
> 
> 标签：lua, serversocket, luasocket

当我尝试在 Ubuntu 上使用 LuaSocket 创建侦听任何端口的套接字时，套接字的创建失败并显示“权限被拒绝”：

```
require("socket")

server, msg = socket.bind("*", 23)

if not server then print(msg) end 
```

但是，当以超级用户身份（使用 sudo）执行相同的脚本时，服务器的创建工作正常。LuaSocket有什么原因不能正常创建服务器吗？我可以做任何事情（在 Lua 中或在 Ubuntu 服务器上），这样就不需要以超级用户身份执行脚本吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T11:21:22.277

这不是 LuaSocket 特定的问题，而是故意的 Ubuntu（和许多其他 Linux/UNIX）安全限制。非特权用户无法绑定到 1024 以下的端口。您可以使用它[`privbind`](http://manpages.ubuntu.com/manpages/lucid/man1/privbind.1.html)来解决此限制。

# android - android：提取和加密文件的标题部分

> ID：10684188
> 
> 赞同：0
> 
> 时间：2012-05-21T11:17:14.663
> 
> 标签：android, encryption, filesystems

我正在尝试对文件进行加密/解密。我可以成功加密文件。但是当文件大小像视频文件一样巨大时，该算法需要很长时间。为了解决这个问题，我只想加密文件的一部分，这样它就不能被任何其他应用程序打开。

我不确定这是否是正确的方法。所以请帮我找到答案：

这是仅加密部分文件或仅加密标题的可行解决方案吗？我怎样才能只得到标题部分？

是否有更好的解决方案以获得更好的性能？

提前感谢您的时间和帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:35:52.300

> 这是仅加密部分文件或仅加密标题的可行解决方案吗？我怎样才能只得到标题部分？

这取决于内容。如果是视频的头文件，很可能可以很容易地重新创建它（流式视频适用于帧，只要您能找到可以播放视频的帧）。当然，什么构成标题完全取决于文件类型。

> 是否有更好的解决方案以获得更好的性能？

即时加密/解密。真正应该困扰您的可能是 IO，而不是加密时间。如果加密/解密本身的性能太慢，您可以使用高性能流式密码。CTR 模式下的 AES 将是一个很好的安全选择，RC4 具有更好的性能，但也有很多陷阱。

# jakarta-ee - Jetty Web 服务器中的 Web 应用部署

> ID：10684190
> 
> 赞同：0
> 
> 时间：2012-05-21T11:17:26.823
> 
> 标签：jakarta-ee, jetty, opennms

我在 Netbeans 中开发了一个 Java EE Web 应用程序并构建到一个 war 文件中。在 GlassFish 应用程序服务器中部署时它工作正常。但是，我的目标是让这个 Web 应用程序在包含内置 Jetty Web 服务器的 OpenNMS 应用程序服务器中工作。为此，我提取了 .war 文件的内容并将其放在 Jetty Web 服务器的目录下（即 /opt/opennms/jetty-webapps/）并尝试运行 default.jsp 页面，该页面应该只是显示一些来自数据库的信息。然后，我在浏览器上收到 HTTP 404 Not Found 错误。这意味着 Jetty 根本无法识别我的应用程序。我尝试重新启动整个 openNMS 但仍然收到相同的 404 消息。

我的问题是如何将我的 web 应用程序作为 war 文件部署到 Jetty web 服务器中。我想将提取的内容放在 jetty-webapps 文件夹下就足够了。我在这里想念什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:24:37.667

首先，必须将 opennms 配置为在给定位置扫描新的 webapps，我不知道它是否存在。如果是，那么您只需将 war 文件放入配置为扫描新 Web 应用程序的任何目录中。

您还必须确保将其配置为在启用 jsp 支持的情况下启动。

要真正回答这个问题，*是*的， jetty 可以部署您的 web 应用程序，但我认为您并没有真正在这里处理股票码头，您处理的是 opennms 配置以及它如何使用码头。它可能只是使用股票码头分布，也可能以某种方式使用它嵌入。我也为你重新标记了这个 opennms，也许你会找一个知道 opennms 如何工作的人，因为这不是严格意义上的“码头”问题或问题。

# objective-c - 如何在 ios 的核心图中使用多点触控事件获取 PlotAreaPoint？

> ID：10684195
> 
> 赞同：0
> 
> 时间：2012-05-21T11:17:46.387
> 
> 标签：objective-c, ios, core-plot

在为我的 defaultPlotSpace 设置委托后，我使用 CPPlotSpaceDelegate 协议在 iOS 和以下方法上接收触摸：

```
- (BOOL)plotSpace:(CPTPlotSpace *)space shouldHandlePointingDeviceDownEvent:(id)event 
          atPoint:(CGPoint)point{

}

-(BOOL)plotSpace:(CPPlotSpace *)space shouldHandlePointingDeviceDraggedEvent:(id)event atPoint:(CGPoint)point{

   NSSet *allTouches = [event allTouches];
   UITouch *touch1 = [[allTouches allObjects] objectAtIndex:0];
   UITouch *touch2 = [[allTouches allObjects] objectAtIndex:1];

   /*
    CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)space;
    CPTScatterPlot *scatterPlot = [[[plotSpace graph] allPlots] objectAtIndex:0]; 
    CGPoint plotAreaPoint = [[plotSpace graph] convertPoint:point toLayer:scatterPlot];
    NSLog(@"PlotAreaPoint : %.1f, %.1f", plotAreaPoint.x, plotAreaPoint.y);
   */

}
-(BOOL)plotSpace:(CPPlotSpace *)space shouldHandlePointingDeviceUpEvent:(id)event atPoint:(CGPoint)point{
} 
```

如何通过多次触摸获得“PlotAreaPoint”？有人请帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T01:07:44.933

托管视图将忽略除捏手势外的多点触控事件。只有一次触摸的事件才会传递到图形，然后传递到绘图和绘图空间。

如果您需要以这种方式捕获多点触控事件，您可以更改`-touchesBegan:withEvent:`方法`CPTGraphHostingView`以传递所需的事件。该方法还展示了如何从事件中获取点并将其转换为正确的坐标系。

请注意，`self`在此代码中是托管视图，而不是绘图空间：

```
CGPoint pointOfTouch = [[[event touchesForView:self] anyObject] locationInView:self];
if ( !collapsesLayers ) {
    pointOfTouch = [self.layer convertPoint:pointOfTouch toLayer:hostedGraph];
}
else {
    pointOfTouch.y = self.frame.size.height - pointOfTouch.y;
} 
```

# javascript - $ 和 $$ 和有什么不一样

> ID：10684198
> 
> 赞同：0
> 
> 时间：2012-05-21T11:17:53.220
> 
> 标签：javascript, jquery, jquery-selectors

`$`和有什么区别`$$`？似乎它们都返回节点列表，但`filter`不适用于`$$`并引发异常。
其他的区别是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:48:48.207

`$`是一个变量名。`$$`是不同的变量名。

jQuery 为变量分配一个函数`$`。

jQuery 对`$$`变量什么都不做（默认情况下）（所以`undefined`除非有别的东西给它赋值）。

# ios - 如何在 iOS 中以编程方式将多个 UISwitches 设置为 ON？

> ID：10684200
> 
> 赞同：1
> 
> 时间：2012-05-21T11:17:55.927
> 
> 标签：ios, uiswitch

我已经完成了以下代码，用于以编程方式创建多个 UISwitches 并处理特定的开关。

```
for (int i =0; i < 3; i++) {

    CGRect frame = CGRectMake(x, y, height, width);
    UISwitch *switchControl = [[UISwitch alloc] initWithFrame:frame];

    //add tag as index 
    switchControl.tag = i;
    [switchControl addTarget:self action:@selector(flip:) forControlEvents: UIControlEventValueChanged];

    [switchControl setBackgroundColor:[UIColor clearColor]];
    [self.view addSubview:switchControl];

    y= y+50.0;
}

- (IBAction) flip: (id) sender {
    UISwitch *onoff = (UISwitch *) sender;
    NSLog(@"no.%d %@",onoff.tag, onoff.on ? @"On" : @"Off");
    //use onoff.tag , you know which switch you got 
} 
```

完成此代码后，我想在 UIButton 选择所有单击时将所有 UISwitches 设置为 ON。如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:25:14.167

为了设置它们，`ON`我会将它们保存在一个数组中以便于访问。然后你可以这样做：

```
for (int i = 0; i < [switchArray count]; i++) {
  UISwitch *sw = (UISwitch *)[switchArray objectAtIndex:i];
  [sw setOn:YES];
} 
```

你也可以这样做：

```
for (int i = 0; i < 3; i++) {
  UISwitch *sw = (UISwitch *)[self.view viewWithTag:i];
  [sw setOn:YES];
} 
```

只要确保标签是唯一的。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:29:49.120

在那里使用这个东西，请以 100 或 1000 开头的标签号

```
-(void) selectAll {
for(int i=100;i<(100+3);i++){
UISwitch *refSwitch=[self.view viewWithTag:i];
refSwitch.on=YES;
}
} 
```

这对你有用

# android - 使第一个按钮固定在滚动视图上

> ID：10684203
> 
> 赞同：2
> 
> 时间：2012-05-21T11:18:00.903
> 
> 标签：android, xml, android-layout, android-emulator

我需要将第一个按钮固定在屏幕上，因为它就像应用程序徽标。我更改了 ScrollView，但随后出现“滚动视图只能有一个孩子”之类的错误。

以下是xml文件

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:ads="http://schemas.android.com/apk/res/com.apperspray.scarface"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/bg1"
android:orientation="vertical" >

<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scrollview1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:id="@+id/home_layout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#000000"
        android:orientation="vertical" >

        <Button
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/masthead"
            android:layout_width="fill_parent"
            android:layout_height="80dp"
            android:background="@drawable/mastbg"
            android:gravity="left|center" >
        </Button>

        <Button
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/button01"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/buttonbg"
            android:gravity="left|center"
            android:padding="10dp"
            android:shadowColor="#f5f5f5"
            android:shadowDx="1"
            android:shadowDy="1"
            android:shadowRadius="1"
            android:textColor="#6c6c6c"
            android:textSize="10pt" >
        </Button>

        <Button
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/button02"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/buttonbg"
            android:gravity="left|center"
            android:padding="10dp"
            android:shadowColor="#f5f5f5"
            android:shadowDx="1"
            android:shadowDy="1"
            android:shadowRadius="1"
            android:textColor="#6c6c6c"
            android:textSize="10pt" >
        </Button>

        <Button
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/button03"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/buttonbg"
            android:gravity="left|center"
            android:padding="10dp"
            android:shadowColor="#f5f5f5"
            android:shadowDx="1"
            android:shadowDy="1"
            android:shadowRadius="1"
            android:textColor="#6c6c6c"
            android:textSize="10pt" >
        </Button>

        <Button
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/button04"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/buttonbg"
            android:gravity="left|center"
            android:padding="10dp"
            android:shadowColor="#f5f5f5"
            android:shadowDx="1"
            android:shadowDy="1"
            android:shadowRadius="1"
            android:textColor="#6c6c6c"
            android:textSize="10pt" >
        </Button>

        <Button
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/button05"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/buttonbg"
            android:gravity="left|center"
            android:padding="10dp"
            android:shadowColor="#f5f5f5"
            android:shadowDx="1"
            android:shadowDy="1"
            android:shadowRadius="1"
            android:textColor="#6c6c6c"
            android:textSize="10pt" >
        </Button>

        <Button
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/button06"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/buttonbg"
            android:gravity="left|center"
            android:padding="10dp"
            android:shadowColor="#f5f5f5"
            android:shadowDx="1"
            android:shadowDy="1"
            android:shadowRadius="1"
            android:textColor="#6c6c6c"
            android:textSize="10pt" >
        </Button>

        <Button
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/button07"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/buttonbg"
            android:gravity="left|center"
            android:padding="10dp"
            android:shadowColor="#f5f5f5"
            android:shadowDx="1"
            android:shadowDy="1"
            android:shadowRadius="1"
            android:textColor="#6c6c6c"
            android:textSize="10pt" >
        </Button>

        <Button
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/button08"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/buttonbg"
            android:gravity="left|center"
            android:padding="10dp"
            android:shadowColor="#f5f5f5"
            android:shadowDx="1"
            android:shadowDy="1"
            android:shadowRadius="1"
            android:textColor="#6c6c6c"
            android:textSize="10pt" >
        </Button>

        <Button
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/button09"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/buttonbg"
            android:gravity="left|center"
            android:padding="10dp"
            android:shadowColor="#f5f5f5"
            android:shadowDx="1"
            android:shadowDy="1"
            android:shadowRadius="1"
            android:textColor="#6c6c6c"
            android:textSize="10pt" >
        </Button>

        <Button
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/button10"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/buttonbg"
            android:gravity="left|center"
            android:padding="10dp"
            android:shadowColor="#f5f5f5"
            android:shadowDx="1"
            android:shadowDy="1"
            android:shadowRadius="1"
            android:textColor="#6c6c6c"
            android:textSize="10pt" >
        </Button>

        <Button
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/button11"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/buttonbg"
            android:gravity="left|center"
            android:padding="10dp"
            android:shadowColor="#f5f5f5"
            android:shadowDx="1"
            android:shadowDy="1"
            android:shadowRadius="1"
            android:textColor="#6c6c6c"
            android:textSize="10pt" >
        </Button>

        <Button
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/button12"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/buttonbg"
            android:gravity="left|center"
            android:padding="10dp"
            android:shadowColor="#f5f5f5"
            android:shadowDx="1"
            android:shadowDy="1"
            android:shadowRadius="1"
            android:textColor="#6c6c6c"
            android:textSize="10pt" >
        </Button>

        <Button
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/button13"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/buttonbg"
            android:gravity="left|center"
            android:padding="10dp"
            android:shadowColor="#f5f5f5"
            android:shadowDx="1"
            android:shadowDy="1"
            android:shadowRadius="1"
            android:textColor="#6c6c6c"
            android:textSize="10pt" >
        </Button>

        <Button
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/button14"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/buttonbg"
            android:gravity="left|center"
            android:padding="10dp"
            android:shadowColor="#f5f5f5"
            android:shadowDx="1"
            android:shadowDy="1"
            android:shadowRadius="1"
            android:textColor="#6c6c6c"
            android:textSize="10pt" >
        </Button>

        <Button
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/button15"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/buttonbg"
            android:gravity="left|center"
            android:padding="10dp"
            android:shadowColor="#f5f5f5"
            android:shadowDx="1"
            android:shadowDy="1"
            android:shadowRadius="1"
            android:textColor="#6c6c6c"
            android:textSize="10pt" >
        </Button>

        <Button
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/button16"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/buttonbg"
            android:gravity="left|center"
            android:padding="10dp"
            android:shadowColor="#f5f5f5"
            android:shadowDx="1"
            android:shadowDy="1"
            android:shadowRadius="1"
            android:textColor="#6c6c6c"
            android:textSize="10pt" >
        </Button>

        <Button
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/button17"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/buttonbg"
            android:gravity="left|center"
            android:padding="10dp"
            android:shadowColor="#f5f5f5"
            android:shadowDx="1"
            android:shadowDy="1"
            android:shadowRadius="1"
            android:textColor="#6c6c6c"
            android:textSize="10pt" >
        </Button>

        <Button
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/button18"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/buttonbg"
            android:gravity="left|center"
            android:padding="10dp"
            android:shadowColor="#f5f5f5"
            android:shadowDx="1"
            android:shadowDy="1"
            android:shadowRadius="1"
            android:textColor="#6c6c6c"
            android:textSize="10pt" >
        </Button>

        <Button
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/button19"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/buttonbg"
            android:gravity="left|center"
            android:padding="10dp"
            android:shadowColor="#f5f5f5"
            android:shadowDx="1"
            android:shadowDy="1"
            android:shadowRadius="1"
            android:textColor="#6c6c6c"
            android:textSize="10pt" >
        </Button>

        <Button
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/button20"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/buttonbg"
            android:gravity="left|center"
            android:padding="10dp"
            android:shadowColor="#f5f5f5"
            android:shadowDx="1"
            android:shadowDy="1"
            android:shadowRadius="1"
            android:textColor="#6c6c6c"
            android:textSize="10pt" >
        </Button>

        <Button
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/button21"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/buttonbg"
            android:gravity="left|center"
            android:padding="10dp"
            android:shadowColor="#f5f5f5"
            android:shadowDx="1"
            android:shadowDy="1"
            android:shadowRadius="1"
            android:textColor="#6c6c6c"
            android:textSize="10pt" >
        </Button>

        <Button
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/button22"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/buttonbg"
            android:gravity="left|center"
            android:padding="10dp"
            android:shadowColor="#f5f5f5"
            android:shadowDx="1"
            android:shadowDy="1"
            android:shadowRadius="1"
            android:textColor="#6c6c6c"
            android:textSize="10pt" >
        </Button>

        <Button
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/button23"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/buttonbg"
            android:gravity="left|center"
            android:padding="10dp"
            android:shadowColor="#f5f5f5"
            android:shadowDx="1"
            android:shadowDy="1"
            android:shadowRadius="1"
            android:textColor="#6c6c6c"
            android:textSize="10pt" >
        </Button>

        <Button
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/button24"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/buttonbg"
            android:gravity="left|center"
            android:padding="10dp"
            android:shadowColor="#f5f5f5"
            android:shadowDx="1"
            android:shadowDy="1"
            android:shadowRadius="1"
            android:textColor="#6c6c6c"
            android:textSize="10pt" >
        </Button>

        <Button
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/button25"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/buttonbg"
            android:gravity="left|center"
            android:padding="10dp"
            android:shadowColor="#f5f5f5"
            android:shadowDx="1"
            android:shadowDy="1"
            android:shadowRadius="1"
            android:textColor="#6c6c6c"
            android:textSize="10pt" >
        </Button>

        <WebView
            android:id="@+id/accesskey"
            android:layout_width="fill_parent"
            android:layout_height="100dp" />
    </LinearLayout>
</ScrollView>

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/res/com.murdersquirrel.newboard"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/home_layout"
    android:layout_alignParentBottom="true"
    android:background="#ffffff"
    android:gravity="bottom"
    android:orientation="vertical" >

    <com.google.ads.AdView
        android:id="@+id/adView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        ads:adSize="BANNER"
        ads:adUnitId="a14fb507753fada" />
</LinearLayout> 
```

按钮，

```
<Button
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/masthead"
        android:layout_width="fill_parent"
        android:layout_height="80dp"
        android:background="@drawable/mastbg"
        android:gravity="left|center" >
    </Button> 
```

充当应用程序徽标，所以我不喜欢滚动。我需要把它固定在上面。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:26:40.110

只需将您的xml设计为...

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:ads="http://schemas.android.com/apk/res/com.apperspray.scarface"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/bg1"
android:orientation="vertical" >

<Button
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/masthead"
        android:layout_width="fill_parent"
        android:layout_height="80dp"
        android:background="@drawable/mastbg"
        android:gravity="top"
        android:layout_alignParentTop="true">
    </Button>

<ScrollView
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/scrollview1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_below="@+id/masthead">

<LinearLayout
    android:id="@+id/home_layout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#000000"
    android:orientation="vertical" >

    <Button
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/button01"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/buttonbg"
        android:gravity="left|center"
        android:padding="10dp"
        android:shadowColor="#f5f5f5"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="1"
        android:textColor="#6c6c6c"
        android:textSize="10pt" >
    </Button>

    <Button
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/button02"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/buttonbg"
        android:gravity="left|center"
        android:padding="10dp"
        android:shadowColor="#f5f5f5"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="1"
        android:textColor="#6c6c6c"
        android:textSize="10pt" >
    </Button>

    <Button
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/button03"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/buttonbg"
        android:gravity="left|center"
        android:padding="10dp"
        android:shadowColor="#f5f5f5"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="1"
        android:textColor="#6c6c6c"
        android:textSize="10pt" >
    </Button>

    <Button
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/button04"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/buttonbg"
        android:gravity="left|center"
        android:padding="10dp"
        android:shadowColor="#f5f5f5"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="1"
        android:textColor="#6c6c6c"
        android:textSize="10pt" >
    </Button>

    <Button
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/button05"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/buttonbg"
        android:gravity="left|center"
        android:padding="10dp"
        android:shadowColor="#f5f5f5"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="1"
        android:textColor="#6c6c6c"
        android:textSize="10pt" >
    </Button>

    <Button
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/button06"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/buttonbg"
        android:gravity="left|center"
        android:padding="10dp"
        android:shadowColor="#f5f5f5"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="1"
        android:textColor="#6c6c6c"
        android:textSize="10pt" >
    </Button>

    <Button
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/button07"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/buttonbg"
        android:gravity="left|center"
        android:padding="10dp"
        android:shadowColor="#f5f5f5"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="1"
        android:textColor="#6c6c6c"
        android:textSize="10pt" >
    </Button>

    <Button
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/button08"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/buttonbg"
        android:gravity="left|center"
        android:padding="10dp"
        android:shadowColor="#f5f5f5"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="1"
        android:textColor="#6c6c6c"
        android:textSize="10pt" >
    </Button>

    <Button
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/button09"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/buttonbg"
        android:gravity="left|center"
        android:padding="10dp"
        android:shadowColor="#f5f5f5"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="1"
        android:textColor="#6c6c6c"
        android:textSize="10pt" >
    </Button>

    <Button
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/button10"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/buttonbg"
        android:gravity="left|center"
        android:padding="10dp"
        android:shadowColor="#f5f5f5"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="1"
        android:textColor="#6c6c6c"
        android:textSize="10pt" >
    </Button>

    <Button
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/button11"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/buttonbg"
        android:gravity="left|center"
        android:padding="10dp"
        android:shadowColor="#f5f5f5"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="1"
        android:textColor="#6c6c6c"
        android:textSize="10pt" >
    </Button>

    <Button
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/button12"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/buttonbg"
        android:gravity="left|center"
        android:padding="10dp"
        android:shadowColor="#f5f5f5"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="1"
        android:textColor="#6c6c6c"
        android:textSize="10pt" >
    </Button>

    <Button
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/button13"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/buttonbg"
        android:gravity="left|center"
        android:padding="10dp"
        android:shadowColor="#f5f5f5"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="1"
        android:textColor="#6c6c6c"
        android:textSize="10pt" >
    </Button>

    <Button
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/button14"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/buttonbg"
        android:gravity="left|center"
        android:padding="10dp"
        android:shadowColor="#f5f5f5"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="1"
        android:textColor="#6c6c6c"
        android:textSize="10pt" >
    </Button>

    <Button
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/button15"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/buttonbg"
        android:gravity="left|center"
        android:padding="10dp"
        android:shadowColor="#f5f5f5"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="1"
        android:textColor="#6c6c6c"
        android:textSize="10pt" >
    </Button>

    <Button
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/button16"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/buttonbg"
        android:gravity="left|center"
        android:padding="10dp"
        android:shadowColor="#f5f5f5"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="1"
        android:textColor="#6c6c6c"
        android:textSize="10pt" >
    </Button>

    <Button
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/button17"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/buttonbg"
        android:gravity="left|center"
        android:padding="10dp"
        android:shadowColor="#f5f5f5"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="1"
        android:textColor="#6c6c6c"
        android:textSize="10pt" >
    </Button>

    <Button
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/button18"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/buttonbg"
        android:gravity="left|center"
        android:padding="10dp"
        android:shadowColor="#f5f5f5"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="1"
        android:textColor="#6c6c6c"
        android:textSize="10pt" >
    </Button>

    <Button
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/button19"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/buttonbg"
        android:gravity="left|center"
        android:padding="10dp"
        android:shadowColor="#f5f5f5"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="1"
        android:textColor="#6c6c6c"
        android:textSize="10pt" >
    </Button>

    <Button
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/button20"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/buttonbg"
        android:gravity="left|center"
        android:padding="10dp"
        android:shadowColor="#f5f5f5"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="1"
        android:textColor="#6c6c6c"
        android:textSize="10pt" >
    </Button>

    <Button
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/button21"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/buttonbg"
        android:gravity="left|center"
        android:padding="10dp"
        android:shadowColor="#f5f5f5"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="1"
        android:textColor="#6c6c6c"
        android:textSize="10pt" >
    </Button>

    <Button
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/button22"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/buttonbg"
        android:gravity="left|center"
        android:padding="10dp"
        android:shadowColor="#f5f5f5"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="1"
        android:textColor="#6c6c6c"
        android:textSize="10pt" >
    </Button>

    <Button
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/button23"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/buttonbg"
        android:gravity="left|center"
        android:padding="10dp"
        android:shadowColor="#f5f5f5"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="1"
        android:textColor="#6c6c6c"
        android:textSize="10pt" >
    </Button>

    <Button
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/button24"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/buttonbg"
        android:gravity="left|center"
        android:padding="10dp"
        android:shadowColor="#f5f5f5"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="1"
        android:textColor="#6c6c6c"
        android:textSize="10pt" >
    </Button>

    <Button
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/button25"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/buttonbg"
        android:gravity="left|center"
        android:padding="10dp"
        android:shadowColor="#f5f5f5"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="1"
        android:textColor="#6c6c6c"
        android:textSize="10pt" >
    </Button>

    <WebView
        android:id="@+id/accesskey"
        android:layout_width="fill_parent"
        android:layout_height="100dp" />
</LinearLayout> 
```

```
 <com.google.ads.AdView
    android:id="@+id/adView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    ads:adSize="BANNER"
    ads:adUnitId="a14fb507753fada" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T12:39:40.803

像这样设计你的xml文件

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/bg1"
android:orientation="vertical">

<Your logout Button/>

<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scrollview1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:id="@+id/home_layout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#000000"
        android:orientation="vertical" >
<Your Button/>
<Your Button/>
<Your Button/>
<Your Button/>
...
....
...
<Your Button/>
<Your Button/>

</LinearLayout>
</ScrollView>

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/res/com.murdersquirrel.newboard"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/home_layout"
    android:layout_alignParentBottom="true"
    android:background="#ffffff"
    android:gravity="bottom"
    android:orientation="vertical" >

    <com.google.ads.AdView
        android:id="@+id/adView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        ads:adSize="BANNER"
        ads:adUnitId="a14fb507753fada" />
</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T11:32:51.667

然后在相对布局或线性布局下添加您的按钮，而不是在滚动视图下。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T11:21:17.693

将 FrameLayout 和 SetScrollview 上的按钮分别保留到您需要在布局中滚动的元素，希望这会起作用

# class - 扩展类之后 XQuery 和 XSLT 没用

> ID：10684209
> 
> 赞同：1
> 
> 时间：2012-05-21T11:18:34.047
> 
> 标签：class, wso2

我编写了一个类调解器（AbstractMediator）来转换客户端和服务之间的返回码。我的班级调解员返回消息是：

```
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope"><soapenv:Body>0000</soapenv:Body></soapenv:Envelope> 
```

之后我需要获取返回码，然后使用 XSLT 或 XQuery 构造响应消息。但是 XSLT 或 XQuery 没有用。它总是返回：

```
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope"><soapenv:Body>0000</soapenv:Body></soapenv:Envelope> 
```

为什么 XSLT 和 XQuery 在扩展类之后没有用？如何转换返回码？任何人都可以帮助我吗？此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:56:26.753

如果我的问题是正确的，那么在类调解器之后使用 XSLT 或 XQuery 调解器没有任何限制。您可以使用这些中介的组合进行适当的转换。在您的情况下，您必须编写适当的 XSLT 样式表来转换 SOAP 正文内容。

# javascript - Scrollspy jquery 在 Firefox、Opera 中不起作用

> ID：10684210
> 
> 赞同：0
> 
> 时间：2012-05-21T11:18:34.787
> 
> 标签：javascript, jquery, firefox, opera

请帮我解决这个问题。我的脚本在 firefox 和 opera 中不起作用，它只在 chrome 中起作用。 [http://jsfiddle.net/suenot/2Fju6/3/](http://jsfiddle.net/suenot/2Fju6/3/)

```
$(document).ready(function() {
    var navsPosition = $('#goods-navs').position().top;
    $(window).scroll(function() {
        if ( $('body').get(0).scrollTop > navsPosition) {
            $('#goods-navs').addClass('active');
        } else {
            $('#goods-navs').removeClass('active');
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T11:43:37.280

尝试：

```
$(document).ready(function() {
    var navsPosition = $('#goods-navs').position().top;
    $(window).scroll(function() {

        if ( $(window).scrollTop() > navsPosition) {
            $('#goods-navs').addClass('active');
        } else {
            $('#goods-navs').removeClass('active');
        }
    });
}); 
```

使用 "$(window).scrollTop()" 而不是 "$('body').get(0).scrollTop"

# jquery - 如果页面上有多个按钮，则 Jquery 对话框不起作用

> ID：10684214
> 
> 赞同：0
> 
> 时间：2012-05-21T11:18:44.827
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我的网页上发生了一些奇怪的事情。

我想在单击按钮时添加一个确认 jquery 对话框。问题是....我的页面上有多次该按钮，每个都有其“id”并且由 php 创建（因此页面上可以有 2、3、4、5 个按钮）。

该按钮如下所示：

```
 <a href="#" id="confirm" onclick="addlist(<?php echo $v['id'];?>);return false;"><img src="img/item_add.png" alt="add" width="100" height="46" /></a> 
```

这是我的jQuery

```
 $(document).ready( function(){

$('#dialog').dialog({
    autoOpen: false,
    width: 600,
    buttons: {
        "Ok": function() {
            $(this).dialog("close");
        },
    }
});

$('#confirm').click(function() {
    $('#dialog').dialog('open');
    return false;
    });
});​ 
```

问题是，我的 jquery 代码工作得很好，但只适用于第一个按钮，第二个，第三个......等等

你有我的例子：http: [//jsfiddle.net/S4vSU/1/](http://jsfiddle.net/S4vSU/1/)

我希望该对话框适用于每个按钮。哪里有问题 ？

先感谢您 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T11:25:02.357

特定元素的“ `id`”在整个页面上必须是唯一的......
如果不是，那么只有一个（第一个）元素将被处理......

解决方案：为所有按钮提供一些类，而不是通过类名来处理 id

例如：

```
<a class="temp" href="#" id="confirm" onclick="addlist(<?php echo $v['id'];?>);return false;">
    <img src="img/item_add.png" alt="add" width="100" height="46" />
</a> 
```

其他代码将是

```
$(document).ready( function(){

$('#dialog').dialog({
    autoOpen: false,
    width: 600,
    buttons: {
        "Ok": function() {
            $(this).dialog("close");
        },
    }
});

$('.temp').click(function() {
    $('#dialog').dialog('open');
    return false;
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T11:22:02.297

这是因为您的所有按钮都具有相同的 id。html 中元素的 ID 应该是唯一的。

[你可以让所有人都](http://jsfiddle.net/ankur20us/S4vSU/6/)和我一样上课

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T11:23:32.963

使用类或**使用不同的 id，**例如：

```
$('#confirm1, #confirm2').click(function() {
    $('#dialog').dialog('open');
    return false;
    });
}); 
```

或使用类： [jsFiddle](http://jsfiddle.net/S4vSU/10/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T11:24:37.660

`id`每个项目应该是唯一的..但你可以尝试使用`on()`虽然不推荐使用：

[http://jsfiddle.net/S4vSU/7/](http://jsfiddle.net/S4vSU/7/)

```
$(document).on('click','#confirm', function() {
    $('#dialog').dialog('open');
    return false;
    });
});​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-21T11:27:56.747

您也可以在元素和点击功能中使用类而不是 ID。

```
<a class="confirm" href="javascript:;">Confirm 1</a>
<a class="confirm" href="javascript:;">Confirm 2</a>
...
$('.confirm').click(function() {
    $('#dialog').dialog('open');
    return false;
    });
});​ 
```

# android - 在 YUV 颜色空间中操作亮度

> ID：10684220
> 
> 赞同：1
> 
> 时间：2012-05-21T11:19:14.817
> 
> 标签：android, image-processing, yuv

我不会以字节 [] 的形式在图像上设置对比度/亮度。图像在 YCbCr_420 颜色空间（安卓相机）中。我以这种方式获得亮度值：

```
for (int j = 0, yp = 0; j < height; j++) {
for (int i = 0; i < width; i++, yp++) {
    int y = (0xff & (yuv420sp[yp])) - 16;
    }
} 
```

如何操纵 y 值来设置更多的光线？我也不确定这是否是降低价值的直觉：

```
yuv420sp[yp] = (byte) ((0xff & y) +16); 
```

感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:44:15.140

我从这个 API 中知道的一点是 3 个通道的值被连接在一个字节数组中。因此，同样在使用 RGB 的 Windows 中，我猜这里你有相同的，我的意思是，每 3 个字节代表一个像素。所以我猜，你可以每跳 3 个位置访问它，只访问一个频道（在你的情况下是 Luma）。我只是不知道亮度是否由第一个、第二个或第三个字节表示。

其次，如果我理解你只是想改变亮度/对比度（增加/减少）是正确的吗？因为如果是这样，对比度只是乘法，亮度是加法。

例如 - 假设您正在使用 8 位通道的伪代码：

```
luma[y] = luma[y] * 1.10; //Increases contrast 
```

或者你可以有一个更通用的形式：

```
luma[y] = luma[y] + (luma[y] * contrast); //where contrast ranges from -1.0 to 1.0 
```

同样，您可以对亮度执行相同操作：

```
luma[y] = luma[y] + bright; //Where bright can range from -255 to 255 
```

在这两种情况下，在将最终像素结果分配给图像之前，您必须小心上溢和下溢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-24T05:04:00.793

YUV 处理在此示例应用程序的 APLEAGLView.m 文件中得到了最好的演示：

[https://developer.apple.com/library/ios/samplecode/AVBasicVideoOutput/Listings/AVBasicVideoOutput_APLEAGLView_m.html#//apple_ref/doc/uid/DTS40013109-AVBasicVideoOutput_APLEAGLView_m-DontLinkElementID_6](https://developer.apple.com/library/ios/samplecode/AVBasicVideoOutput/Listings/AVBasicVideoOutput_APLEAGLView_m.html#//apple_ref/doc/uid/DTS40013109-AVBasicVideoOutput_APLEAGLView_m-DontLinkElementID_6)

Shader.fsh 文件中演示了对亮度和对比度的适当调整，以便它们保持彼此成比例的关系：

[https://developer.apple.com/library/ios/samplecode/AVBasicVideoOutput/Listings/AVBasicVideoOutput_Shaders_Shader_fsh.html#//apple_ref/doc/uid/DTS40013109-AVBasicVideoOutput_Shaders_Shader_fsh-DontLinkElementID_9](https://developer.apple.com/library/ios/samplecode/AVBasicVideoOutput/Listings/AVBasicVideoOutput_Shaders_Shader_fsh.html#//apple_ref/doc/uid/DTS40013109-AVBasicVideoOutput_Shaders_Shader_fsh-DontLinkElementID_9)

如果您需要帮助解释代码，我可以提供帮助。不过，目前，使用用户指定的亮度阈值，亮度调整后的 Y 平面计算如下：

Y' = (Y - (16 / 255)) * lumaThreshold;

# php - 需要所有 joomla 页面 在除主页之外的页眉中

> ID：10684227
> 
> 赞同：0
> 
> 时间：2012-05-21T11:19:38.377
> 
> 标签：php, jquery, joomla

需要除了主页之外的所有joomla页面`<jdoc:include type="head" />`，解决方案是什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T11:41:36.210

Joomla 1.6、1.7 和 2.5

```
<?php
$app = JFactory::getApplication();
$menu = $app->getMenu();
if ($menu->getActive() != $menu->getDefault()):
?>

    <jdoc:include type="head" />

<?php endif; ?> 
```

[参考](http://docs.joomla.org/How_to_determine_if_the_user_is_viewing_the_front_page)。

# android - 未能将标题传递给 android 日历

> ID：10684228
> 
> 赞同：3
> 
> 时间：2012-05-21T11:19:42.343
> 
> 标签：android, calendar

这是从我的应用程序中的按钮调用的。除了通过标题外，它的效果很好。我究竟做错了什么？

```
public void addCalendarClicked(int position)
    {             
        Intent intent = new Intent(Intent.ACTION_EDIT);
        intent.setType("vnd.android.cursor.item/event");
        intent.putExtra("beginTime", MyStringUtils.dateFromRawTimestamp(_routes[position].getDepartureDateTime()).getTime());
        intent.putExtra("allDay", true);
        intent.putExtra("rrule", "FREQ=YEARLY");
        intent.putExtra("endTime", MyStringUtils.dateFromRawTimestamp(_routes[position].getArrivalDateTime()).getTime());
       intent.putExtra("title", "hello first alarm");

        startActivity(intent);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T08:15:48.057

```
 public void setRemindar(String titleD,String msgD,final String Title ,final String Description,final String day ,final String month,final String year){

                Calendar cal = Calendar.getInstance();     
                Uri EVENTS_URI = Uri.parse(getCalendarUriBase(AlAujairyHoneycombActivity.this) + "events");
                ContentResolver cr = getContentResolver();
                long startMillis = 0; 
                long endMillis = 0; 
                Calendar beginTime = Calendar.getInstance();
                beginTime.set(Integer.parseInt(year), Integer.parseInt(month), Integer.parseInt(day), 9, 0);
                startMillis = beginTime.getTimeInMillis();
                Calendar endTime = Calendar.getInstance();
                endTime.set(Integer.parseInt(year), Integer.parseInt(month), Integer.parseInt(day), 10, 0);
                endMillis = endTime.getTimeInMillis();
                // event insert
                ContentValues values = new ContentValues();
                values.put("calendar_id", 1);
                values.put("title", Title);
                values.put("allDay", 0);
                values.put("dtstart", startMillis ); // event starts at 11 minutes from now
                values.put("dtend", endMillis); // ends 60 minutes from now
                values.put("description", Description);
                values.put("visibility", 0);
                values.put("hasAlarm", 1);
                Uri event = cr.insert(EVENTS_URI, values);
                // reminder insert
                Uri REMINDERS_URI = Uri.parse(getCalendarUriBase(AlAujairyHoneycombActivity.this) + "reminders");
                values = new ContentValues();
                values.put( "event_id", Long.parseLong(event.getLastPathSegment()));
                values.put( "method", 1 );
                values.put( "minutes", 10 );
                cr.insert( REMINDERS_URI, values );

    }
    private String getCalendarUriBase(Activity act) {
        String calendarUriBase = null;
        Uri calendars = Uri.parse("content://calendar/calendars");
        Cursor managedCursor = null;
        try {
            managedCursor = act.managedQuery(calendars, null, null, null, null);
        } catch (Exception e) {
        }
        if (managedCursor != null) {
            calendarUriBase = "content://calendar/";
        } else {
            calendars = Uri.parse("content://com.android.calendar/calendars");
            try {
                managedCursor = act.managedQuery(calendars, null, null, null, null);
            } catch (Exception e) {
            }
            if (managedCursor != null) {
                calendarUriBase = "content://com.android.calendar/";
            }
        }
        return calendarUriBase;
    } 
```

在清单中

```
 <uses-permission android:name="android.permission.WRITE_CALENDAR" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T08:03:32.860

在您的代码中，您没有将 eventID 附加到 URI...它如何知道要编辑哪个...

```
long eventID = 208;
Uri uri = ContentUris.withAppendedId(Events.CONTENT_URI, eventID); 
Intent intent = new Intent(Intent.ACTION_EDIT) 
    .setData(uri) 
    .putExtra(Events.TITLE, "My New Title"); 
startActivity(intent); 
```

## 更新 ：

你可以试试这个：

```
Intent intent = new Intent(Intent.ACTION_INSERT)
    .setData(Events.CONTENT_URI) // `content://com.android.calendar/events`
    .putExtra(Events.TITLE, "Yoga")
    .putExtra(Events.DESCRIPTION, "Group class")
    .putExtra(Events.EVENT_LOCATION, "The gym");
startActivity(intent); 
```

# javascript - 在 WebApp 中配置启用 AJAX 的 WCF 服务以接收大数据

> ID：10684229
> 
> 赞同：1
> 
> 时间：2012-05-21T11:19:47.790
> 
> 标签：javascript, ajax, vb.net, wcf

使用 Visual Studio 2010 和 .NET 框架 4.0，我构建了一个简单的 HelloWorld WCF 服务，该服务基于此处的示例启用了 AJAX：http: [//msdn.microsoft.com/en-us/library/bb924552.asp](http://msdn.microsoft.com/en-us/library/bb924552.asp)

但是我需要将大量数据*传递给*服务，所以我添加了一个文本区域和另一个按钮来执行此操作。不幸的是，当我发布超过几百行文本时，我从服务器收到 400 错误（错误请求）。

**HelloWorldService.svc：**

```
<%@ ServiceHost Language="VB" Debug="true" Service="HelloWorldAjaxWCFServiceWebApp.HelloWorldService"
CodeBehind="HelloWorldService.svc.vb" Factory="System.ServiceModel.Activation.WebScriptServiceHostFactory" %> 
```

**HelloWorldService.svc.vb：**

```
Imports System.ServiceModel
Imports System.ServiceModel.Activation
Imports System.ServiceModel.Web

<ServiceContract(Namespace:="HelloWorldAjaxWCFServiceWebApp")>
<AspNetCompatibilityRequirements(RequirementsMode:=AspNetCompatibilityRequirementsMode.Allowed)>
Public Class HelloWorldService

    <OperationContract()>
    Public Function Echo(ByVal data As String) As String
        Return data
    End Function

    <OperationContract()>
    <WebInvoke(Method:="POST")>
    Public Function HelloWorld(ByVal Name As String) As String
        If Name.Length > 100 Then
            Return "Hello " & Name.Substring(0, 100)
        Else
            Return "Hello " & Name
        End If
    End Function

End Class 
```

**你好世界.aspx：**

```
<%@ Page Language="VB" AutoEventWireup="true" CodeBehind="HelloWorld.aspx.vb" Inherits="HelloWorldAjaxWCFServiceWebApp.HelloWorld" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <title>Untitled Page</title>
</head>
<body>
    <form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server">
        <Services>
            <asp:ServiceReference Path="HelloWorldService.svc" />
        </Services>
    </asp:ScriptManager>
    </form>
    <p>
        <input id="txtHello" type="text" value="Your Name Here" />
        <input id="btnHello" type="button" value="Hello World" onclick="return btnHello_onclick()" /></p>
    <p>
        <textarea id="txtLong" name="S1" rows="50" cols="50"></textarea>
        <input id="btnLong" type="button" value="Send Long Text"
            onclick="return btnLong_onclick()" /></p>
    <div id="Results"></div>
    <script language="javascript" type="text/javascript">
        // <!CDATA[

        function btnHello_onclick() {
            var txt = document.getElementById('txtHello');
            var service = new HelloWorldAjaxWCFServiceWebApp.HelloWorldService();
            //service.Echo('echo', onSuccess, FailedCallback, null);
            service.HelloWorld(txt.value, onSuccess, FailedCallback, null);
        }

        function btnLong_onclick() {
            var txt = document.getElementById('txtLong');
            var service = new HelloWorldAjaxWCFServiceWebApp.HelloWorldService();
            //service.Echo('echo', onSuccess, FailedCallback, null);
            service.HelloWorld(txt.value, onSuccess, FailedCallback, null);
        }

        function onSuccess(result) {
            alert(result);
        }

        // This is the failed callback function.
        function FailedCallback(error) {
            var stackTrace = error.get_stackTrace();
            var message = error.get_message();
            var statusCode = error.get_statusCode();
            var exceptionType = error.get_exceptionType();
            var timedout = error.get_timedOut();

            // Display the error.    
            var results = document.getElementById("Results");
            results.innerHTML =
                "Stack Trace: " + stackTrace + "<br/>" +
                "Service Error: " + message + "<br/>" +
                "Status Code: " + statusCode + "<br/>" +
                "Exception Type: " + exceptionType + "<br/>" +
                "Timedout: " + timedout;
        }

        // ]]>
    </script>
</body>
</html> 
```

我已经从 web 配置文件中删除了整个条目，它的工作原理如上所述。我在使用 web.config 文件时遇到了很多麻烦，并尝试了网络上建议的不同设置。有些没有明显的效果，而另一些则在 Javascript 中导致“服务未定义”错误，因此使配置“恰到好处”被证明是一个问题。

如何配置服务以接受大量数据？其次，对于提供的答案，特定设置在现实世界中实际上有什么影响？

请注意，jquery 不是一个选项。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:37:48.717

我最终通过从头开始重做配置解决了这个问题。

# mysql - 从多个 MySQL 表中选择字段，(1=2) 是什么意思？

> ID：10684230
> 
> 赞同：0
> 
> 时间：2012-05-21T11:20:03.747
> 
> 标签：mysql, coldfusion

我试图了解我必须更新的以下 Coldfusion/MySQL 查询中发生了什么（而且我正处于 CF/MySQL 的第一个月）。

我在搜索之前运行了一个查询，它设置了变量**pl** (pricelists)，如下所示：

```
<cfif variables.module IS "yes"> 
  <cfquery datasource="ds" name="qp">
      <!--- selects pricelist and seller --->
  </cfquery>
  <cfset variables.pl = "LEFT JOIN pricelist p ON ">
  <cfoutput query="qp" >
    <cfif qp.preislist IS ''>
        <cfset variables.pl= variables.pl & '(p.iln = a.iln AND p.preislist = "AAA" AND p.ean = a.ean AND p.iln = "#qp.seller#") OR '>
    <cfelse>
        <cfset variables.pl= variables.pl & '(p.iln = a.iln AND p.preisliste = "#qp.preislist#" AND p.ean = a.ean AND p.iln = "#qp.seller#") OR '>
    </cfif>
  </cfoutput>
  <cfset variables.pl = variables.preislisten & "(1=0)">
</cfif> 
```

然后将其“移植”到搜索查询中，这增加了我的困惑，如下所示：

```
<cfquery datasource="ds" name="getArt">
    SELECT a.* <cfif variables.module IS "yes">, p.ek, p.vk, p.waehrung, p.onlinepreis</cfif>
    FROM artdata a
    <cfif variables.module IS "yes">
        <cfqueryparam cfsqltype="cfsql_varchar" value="#variables.pl#"> 
    </cfif>
    .... 
```

**很多问题：**
- 不需要 cfparam 查询字段，例如*qp.seller*，或者有吗？
- 我不应该总是像在*artdata AS a*中那样使用 ALIAS 而不是只使用*artdata a*吗？
- 我可以像这样选择*p.ek, p.vk, ...*尽管价格表稍后将仅通过变量*variables.pl*声明（即*LEFT JOIN pricelist p ON* ...）
- 这是怎么回事（ 1=0)? 它的目的是什么？(3=2), (1=2) 的同上。

感谢您的启发！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T12:53:09.627

> 没有必要cfparam查询字段如qp.seller，还是有？

不是 cfparam，而是 cfqueryparam - 这是执行不同任务的两个不同标签。

使用 cfqueryparam 有两个关键原因：

1) 出于安全考虑 - 如果输入可能最初来自任何第三方，或者如果您不能保证输入是已知值，请使用 cfqueryparam 确保不会发生 SQL 代码注入（有意或无意）。

2) 性能方面——查询参数会产生一个执行计划，该计划可以被缓存并应用于多个查询（即参数变化的地方），因此通常会提高性能。

如果 qp.seller 是保证安全的数字外键，则您不需要它来确保安全，但它仍然可能从性能方面产生有益影响。

一般来说，**如果有疑问，请使用它**。

[（偶尔有人声称它会导致糟糕的执行计划，从而导致性能更差，但我对这些说法持谨慎态度，并且无论如何都必须根据具体情况进行处理 - 安全性很重要.)]

> 我不应该总是像在 artdata AS a 中那样使用 ALIAS 还是只使用 artdata a？

如果你更喜欢打字。:)

表名的 AS 关键字没有区别/好处。

> 我可以像这样选择 p.ek, p.vk, ...

是的，这会奏效。

可能希望将它们放在多行上以使其更具可读性。

> 虽然 pricelist 表只会在稍后通过变量 > variables.pl 声明（即 LEFT JOIN pricelist p ON...）

这是一个不正确的假设。

使用 cfqueryparam 专门防止 SQL 代码被注入，这是您在此处尝试使用它执行的操作。

您应该将生成的 SQL 直接输出到将使用它的 cfquery 标记中，而不是创建 variables.pl。

*（如果您不确定我的意思，我可以为此举个例子吗？）*

> (1=0) 怎么了？它的目的是什么？(3=2), (1=2) 的同上。

正如 Romain 的评论所解释的，这是一种常见的错误说法，用于动态查询。括号是可选的。

然而，更常见的是将它放在*开头*- 即`WHERE 1=0`或`JOIN 1=0`- 然后让动态语句开始`OR ...`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T12:58:37.710

**- 不需要cfparam查询字段如qp.seller，还是有？**

首先，这是`cfqueryparam`，不是`cfparam`。`cfqueryparam`用于数据清理。`cfparam`是为了确保存在具有某种值的变量。有必要使用吗？如果您明确创建/设置 variables.pl，则不。但这仍然是一个很好的做法。如果您或其他人稍后更改设置代码，则对数据进行 cfqueryparam-ing 可确保数据完整性。它还可以帮助您一目了然地了解变量包含的数据类型。

**- 我不应该总是在 artdata AS a 中使用 ALIAS 与仅使用 artdata a 吗？**

据我了解，你应该。我使用的所有数据库都支持该`tablename alias`语法，但我*相信*ANSI 标准是使用`AS`，这将使您的代码更具可移植性。

**- 我可以像这样选择 p.ek, p.vk, ... 虽然价格表稍后将通过变量 variables.pl 声明（左连接价格表 p ON...）**

是的。这是相当普遍的（至少在我工作的地方）。

**- (1=0) 怎么了？它的目的是什么？(3=2), (1=2) 的同上。**

这在 Romain 的评论中得到了很好的回答。这是一个强制的真/假值。它通常在动态生成 SQL 语句时使用，以确保至少`WHERE`生成一个子句。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T17:27:45.017

关于“不需要 cfparam 查询字段，例如 qp.seller，或者是否存在？”：我还没有看到提到的一件事是 cfqueryparam 仅在 cfquery 标记的上下文中有效。由于您在 cfquery 标记上下文之外构建 SQL 块，因此您将无法在该处为 qp.seller 使用 cfqueryparam。因此，您有一些选择——

1.  将您的 SQL 代码移动到您的 cfquery 块中并使用 cfqueryparam。
2.  在您的数据库中创建一个以 qp.seller 作为参数的存储过程或函数。
3.  使用某种数据验证正则表达式来验证#qp.seller# 是一个有效值。
4.  什么都不做，并相信由于您可以控制用作查询输入的数据源，因此您不必担心 SQL 注入（但是您仍然会失去可能的性能改进） .

其他海报已经很好地回答了你的其他问题——我没有什么要补充的了。

# iphone - 弱链接 C 函数

> ID：10684232
> 
> 赞同：5
> 
> 时间：2012-05-21T11:20:08.110
> 
> 标签：iphone, objective-c, ios

我正在开发获取屏幕截图的静态库，并且从 OpenGL 应用程序中获取它们需要特殊处理。

当客户端应用程序链接到我的静态库时，它必须添加我的库使用的框架，例如获取 OpenGL 屏幕截图，即使客户端应用程序不使用 OpenGL，它也必须与 OpenGLES.framework 链接，这很糟糕。如果客户端已与 OpenGLES.framework 链接并动态启用从 OpenGL 截屏，我正在尝试检查库。

问题是当我尝试使用 C 函数时出现编译错误，例如：

```
if(&glReadPixels != NULL) {
    glReadPixels(0, 0, size.width, size.height, GL_RGBA, GL_UNSIGNED_BYTE, buffer);
} 
```

如您所见，我可以检查方法是否存在，但是如何调用它才不会导致链接器错误？当我用我的库编译客户端时，我得到了这个：

```
Undefined symbols for architecture i386:
"_glReadPixels", referenced from:
  +[TakeScreenshotUtil takeOpenGLScreenshotWithContext:layerSize:] in libScr-iOS.a(TakeScreenshotUtil.o) 
```

我正在尝试使用

```
__attribute__ ((weak)) 
```

但它不起作用（不会改变任何东西）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:00:12.637

您可以打开正在执行的应用程序并检查它是否链接到 OpenGL。首先，使用 -rdynamic （或任何等效的 Apple GCC 理解）重新编译您的应用程序。然后使用以下代码查找函数：

```
#import <dlfcn.h>

void (*_glReadPixels)(int, int, float, float, int, int, void *);
_glReadPixels = dlsym(NULL, "glReadPixels");
if (_glReadPixels != NULL) {
    /* take screenshot */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:32:47.090

这是一组用于在不使用 OpenGL 库的情况下进行屏幕截图的代码的链接。甚至 OpenGL 视图也以 UIView 开头，因此如果您正在执行全屏屏幕截图，这应该仍然有效。 [http://www.icodeblog.com/2009/07/27/1188/](http://www.icodeblog.com/2009/07/27/1188/)

此外，如果它是您所追求的 OpenGL 视图部分的屏幕截图，那么我建议您仍然使用上面引用的代码，并将其裁剪为您需要/想要的，否则您可以沿着获取 OpenGL 视图中像素的部分捕获。如果您正在这样做，那么您的 API 的用户已经在使用 OpenGL，因此很可能无论如何都链接到该框架。

# java - 获取 Cookies & Session 并使用 HttpClient 再次设置

> ID：10684234
> 
> 赞同：1
> 
> 时间：2012-05-21T11:20:10.893
> 
> 标签：java, swing, file-upload, httpclient

大家好，我这里有个情况...

我正在开发一个 java 程序，我的客户想要使用给定的凭据登录到一个网站，然后将文件上传到同一网站的 url...问题是客户端知道用户登录是否经过身份验证并设置使用 cookie 或会话..

我使用 HttpClient 进行登录和上传，我完成了代码的编写。问题是上传文件时我得到“403 Forbidden”。有没有办法获取 cookie 和会话列表，以便我可以从登录 url 输出中获取它并将其设置为上传，以认为请求来自经过身份验证的用户。

如需更多参考，请附上脚本：

```
import java.io.File;
import java.io.IOException;
import java.io.UnsupportedEncodingException;
import java.util.logging.Level;
import java.util.logging.Logger;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.HttpVersion;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.mime.MultipartEntity;
import org.apache.http.entity.mime.content.StringBody;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.params.CoreProtocolPNames;
import org.apache.http.util.EntityUtils;
import org.apache.http.Header;
import org.apache.http.entity.mime.content.ContentBody;
import org.apache.http.entity.mime.content.FileBody;

public class Main {

    Header[] cookie = null;

    public void sendLoginRequest() {
        try {
            HttpClient httpclient = new DefaultHttpClient();
            httpclient.getParams().setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);

            HttpPost httppost = new HttpPost("http://website.com/login");

            MultipartEntity mpEntity = new MultipartEntity();
            mpEntity.addPart("email", new StringBody("user@website.com"));
            mpEntity.addPart("password", new StringBody("123456"));

            httppost.setEntity(mpEntity);
            System.out.println("executing request " + httppost.getRequestLine());
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity resEntity = response.getEntity();

            System.out.println(response.getStatusLine());
            if (resEntity != null) {
                System.out.println(EntityUtils.toString(resEntity));
            }
            if (resEntity != null) {
                resEntity.consumeContent();
            }

            cookie = (Header[]) response.getHeaders("Set-Cookie");
            for(int h=0; h<cookie.length; h++){
                System.out.println(cookie[h]);
            }

            httpclient.getConnectionManager().shutdown();

            sendFileRequest();
        } catch (IOException ex) {
            //Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public void sendFileRequest(){
        try {
            HttpClient httpclient = new DefaultHttpClient();
            httpclient.getParams().setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);

            HttpPost httppost = new HttpPost("http://website.com/uploadpage");
            httppost.setHeaders(cookie);

            File file = new File("somefile.jpg");

            MultipartEntity mpEntity = new MultipartEntity();
            ContentBody cbFile = new FileBody(file, "image/jpeg");
            mpEntity.addPart("Filedata", cbFile);
            mpEntity.addPart("MAX_FILE_SIZE", new StringBody("268435456"));

            httppost.setEntity(mpEntity);
            System.out.println("executing request " + httppost.getRequestLine());
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity resEntity = response.getEntity();

            System.out.println(response.getStatusLine());
            if (resEntity != null) {
                System.out.println(EntityUtils.toString(resEntity));
            }
            if (resEntity != null) {
                resEntity.consumeContent();
            }

            httpclient.getConnectionManager().shutdown();
        } catch (IOException ex) {
            //Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public static void main(String[] args) {
        new Main().sendLoginRequest();
    }
} 
```

我需要显示用户已登录的上传页面，以便它可以上传...

谢谢...

# java - Tomcat6 日志中出现奇怪的 struts2 异常（没有为动作名称映射的动作 [一些 HTML 代码！！！！]。）

> ID：10684241
> 
> 赞同：0
> 
> 时间：2012-05-21T11:20:39.843
> 
> 标签：java, jakarta-ee, tomcat, struts2

我有一个在 tomcat6 上运行的 webApplication(Java+Struts2+...)。我不知道日志显示这种异常的问题是什么：

```
WARNING: Could not find action or result
There is no Action mapped for action name ><script src=. - [unknown location]

OR

There is no Action mapped for action name li><li><a href='. - [unknown location]

OR

There is no Action mapped for action name dth: 342,maxHeight: 400}). - [unknown location]

and more and more...!!!! 
```

这是异常堆栈跟踪的示例：

```
May 18, 2012 12:28:48 AM com.opensymphony.xwork2.util.logging.commons.CommonsLogger warn
WARNING: Could not find action or result
There is no Action mapped for action name ><script src=. - [unknown location]
    at com.opensymphony.xwork2.DefaultActionProxy.prepare(DefaultActionProxy.java:178)
    at org.apache.struts2.impl.StrutsActionProxy.prepare(StrutsActionProxy.java:61)
    at org.apache.struts2.impl.StrutsActionProxyFactory.createActionProxy(StrutsActionProxyFactory.java:39)
    at com.opensymphony.xwork2.DefaultActionProxyFactory.createActionProxy(DefaultActionProxyFactory.java:47)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:478)
    at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:395)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:636) 
```

你觉得问题出在哪里？！或者我怎样才能找到更多关于这个的信息？！谢谢小伙伴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:31:14.633

看起来像是试图在您的应用程序中查找 XSS 漏洞。如果是这样，请注意有人试图攻击您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T19:03:55.923

看起来您可能输入了脚本 src=。在需要表单操作或 ajax url（即操作名称）的地方，显然不会有名为 script src= 的操作。在您的 struts.xml 文件中。

# c# - 带有 C# 文本框值 0 的 Asp.Net

> ID：10684242
> 
> 赞同：0
> 
> 时间：2012-05-21T11:20:42.527
> 
> 标签：c#, asp.net, textbox

我正在使用以下代码尝试在 textbox1.text ="" 时将 Textbox 值设置为 0。

```
if(textbox1.text=="")
{
     int.Parse(textbox1.Text) == 0.ToString();
} 
```

但是我收到以下错误：

`Error: CS0201: Only assignment, call, increment, decrement, and new object expressions can be used as a statement.`

如何在 C# 中将文本框的值设置为 0？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T11:21:30.420

一个简单的赋值运算符应该可以完成这项工作。你真的不需要做任何解析和相等比较运算符：

```
if(textbox1.Text == "")
{
    textbox1.Text = "0";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T11:22:56.490

**解决您的问题**

```
if (string.IsNullorEmpty(textbox1.Text))
{
    textbox1.Text = "0";
} 
```

**你的问题的原因**

1.  `int.Parse`返回一个整数，您正在尝试将字符串与 int 进行比较。
2.  `==`运算符用于检查左侧是否等于右侧，您尝试将其用作赋值运算符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T11:28:49.153

你正在解析`TextBox`整数的值，但你不想这样做，你想设置它的值，所以只需使用 setter 属性

```
yourTextBox.Text="0"; 
```

然后你使用条件 == 而不是赋值 = 设置错误

```
== is used to check if two things are equal ex: 1==1 
```

您应该使用它`=`来分配或设置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T11:25:58.753

```
if(String.IsNullOrEmpty(textbox1.Text))
{
     textbox1.Text = "0";
} 
```

`IsNullOrEmpty`wud 也检查空值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T11:26:24.213

代码有几处错误。

`int.Parse`如果它能够解析将`int`在您设置与 a 的比较时给出一个值`string`。

接下来，您可以使用`string.IsNullOrEmpty`检查是否`TextBox`为空。

最后，您可以将`"0"`字符串作为字符串分配`.Text`给`TextBox`

```
if(String.IsNullOrEmpty(textbox1.Text))
{
     textbox1.Text = "0";
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-06T10:12:30.110

尝试使用这个：

```
if(textbox1.Text == "")
{
    textbox1.Text = "0";
} 
```

# java - DBCP - 不同数据库的验证查询

> ID：10684244
> 
> 赞同：86
> 
> 时间：2012-05-21T11:20:53.930
> 
> 标签：java, connection-pooling, apache-commons-dbcp

我使用 DBCP 池，我想使用*testOnBorrow*和*testOnReturn*来测试连接是否仍然有效。
不幸的是，我必须设置属性validationQuery 才能使其工作。

问题：**validationQuery 应该是什么值？**

我知道，validationQuery 必须是一个 SQL SELECT 语句，它至少返回一行。

问题是我们使用各种数据库（DB2、Oracle、hsqldb）。

* * *

## 回答 #1

> 赞同：219
> 
> 时间：2012-05-21T11:21:40.963

所有数据库不仅有一个validationQuery。在每个数据库上，您必须使用不同的验证查询。

经过几个小时的谷歌搜索和测试，我收集了这张表：

数据库验证查询说明

*   **hsqldb** -`select 1 from INFORMATION_SCHEMA.SYSTEM_USERS`
*   **甲骨文**——`select 1 from dual`
*   **DB2** -`select 1 from sysibm.sysdummy1`
*   **mysql** -`select 1`
*   **microsoft SQL Server** - `select 1`（在 SQL-Server 9.0、10.5 [2008] 上测试）
*   **PostgreSQL** -`select 1`
*   **入口**——`select 1`
*   **德比**-`values 1`
*   **H2** -`select 1`
*   **火鸟**-`select 1 from rdb$database`
*   **玛丽亚数据库**-`select 1`
*   **Informix** -`select 1 from systables`
*   **蜂巢**-`select 1`
*   **黑斑羚**-`select 1`

我在我的博客上写了关于它[的各种数据库的验证查询](http://vondrnotes.blogspot.com/2012/05/validationquery-for-different-databases.html)。

预先有一个类的例子，它根据JDBC驱动返回validationQuery。

或者有人有更好的解决方案吗？

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-12-26T09:10:47.427

对于带有 Connector/J 驱动程序的 MySQL，有一个轻量级的验证查询，它只向服务器发送一个 ping 并返回一个虚拟结果集。验证查询可以是（或应该以）以下字符串：

```
/* ping */ 
```

有关更多信息，请参阅MySQL 驱动程序手册中的[验证连接](https://dev.mysql.com/doc/connector-j/en/connector-j-usagenotes-j2ee-concepts-connection-pooling.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-06-26T22:06:59.473

对于 Informix，验证查询是，从 systables 中选择 1

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-08T09:53:39.317

对于 MairaDB 验证查询是 "select 1" 。

# nhibernate - 使用 NHibernate 和存储库模式 - 如何处理模拟上下文和过滤表达式

> ID：10684246
> 
> 赞同：0
> 
> 时间：2012-05-21T11:21:02.843
> 
> 标签：nhibernate, design-patterns, moq, nhibernate-criteria

我正在开发使用 NHibernate 3 的项目，但代码非常混乱。我想做的是：

*   将测试代码引入项目
*   引入存储库模式 - 我在使用 Entity Framework 4 的项目中做到了，我很喜欢它，特别是有机会测试查询而不考虑使用的存储（我可以模拟内部存储并注入内存中的实现，如对象列表）
*   由于当前 DAO 代码使用 CreateCriteria 方法并创建特定于 NHibernate 的查询，因此不可能用另一个替换 NHibernate 存储（或者至少我不知道如何在 List 实例上执行 NHibernate.ICriteria。所以我需要一种创建方法无论存储实现如何，都可以使用查询。

有没有办法实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:57:57.030

这可能不是您正在寻找的。我们有两种测试：单元测试，它测试没有数据库的纯逻辑和数据库集成测试。

**单元测试**

我们有实现查询的类的接口。这样，域就没有对 NHibernate 的任何引用。在您的情况下，这可能是存储库。为它们编写简单而小的接口并模拟整个存储库。为此，您甚至不需要 NHibernate。[这就是执着无知](https://stackoverflow.com/questions/905498/what-are-the-benefits-of-persistence-ignorance)的美妙之处。

**数据库集成测试**

我们[在内存中的](http://www.sqlite.org/inmemorydb.html)[Sqlite 数据库](http://sqlite.phxsoftware.com/)上运行 NHibernate 。通过这种方式，我们正在测试依赖于 NHibernate 的映射、查询和其他内容。

# jquery - 使用 jQuery 查找特定的表头

> ID：10684247
> 
> 赞同：1
> 
> 时间：2012-05-21T11:21:06.633
> 
> 标签：jquery, class, html-table, head

jQuery中是否有一种方法可以计算多个表头类（`<th class="entity7">Machine Names</th>`标签），直到找到值为“机器名称”的表头？“机器名称”是我需要计算的特定表头单元格中的值。这将使我知道我想使用哪个数字列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:25:19.113

您可以`filter()`为此使用：

```
var $th = $("#myTable th").filter(function() {
    return $(this).text() == "Machine Names";
});
var columnNumber = $th.index(); 
```

# c# - 同一模型中的一对多 + 多对多

> ID：10684250
> 
> 赞同：1
> 
> 时间：2012-05-21T11:21:14.820
> 
> 标签：c#, .net, asp.net-mvc-3, entity-framework, ef-code-first

我在以下之间有一对多和多对多的关系：

```
public class User
{
    [Key]
    public Guid UserId { get; set; }
    public string Address { get; set; }
    public double Latitude { get; set; }
    public double Longitude { get; set; }
    public string Units { get; set; }
    public int Distance { get; set; }

    public List<Sport> Sports { get; set; }

    [InverseProperty("UserCreatorId")]
    public ICollection<Event> EventsCreated { get; set; }

    [InverseProperty("Users")]
    public ICollection<Event> Events { get; set; }

    public ICollection<Comment> Comments { get; set; }
} 
```

和：

```
public class Event
{
    [Key]
    public int EventId { get; set; }
    public string SportName { get; set; }
    public string Explanation { get; set; }

    [Required]
    public string Address { get; set; }
    public double Latitude { get; set; }
    public double Longitude { get; set; }

    public bool Active { get; set; }
    public int NumUsersJoined { get; set; }
    [Required, Range(2,50, ErrorMessage = "Must be between 2 and 50")]
    public int MaxNumUsers { get; set; }

    public Guid UserCreatorId { get; set; }    

    public ICollection<User> Users { get; set; }

    public ICollection<Comment> Comments { get; set; }
} 
```

多对多关系可以正常工作，但 1:many 不是，它在事件表 User_UserId 的数据库中创建了一个额外的列，并使其成为外键，而不是我想要的 UserCreatorId。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:31:04.913

尝试这样做，

在`Event`,

```
 [ForeignKey("UserCreator")]
 public Guid UserCreatorId { get; set; }  

  public User UserCreator{ get; set; }  
 [InverseProperty("Events")]
public ICollection<User> Users { get; set; } 
```

并且，在`User`

```
 [InverseProperty("UserCreator")]
    public ICollection<Event> EventsCreated { get; set; } 
```

# jquery - jQuery实现if语句问题

> ID：10684253
> 
> 赞同：0
> 
> 时间：2012-05-21T11:21:22.183
> 
> 标签：jquery

我试图在下面的代码中添加一个 if 语句。但由于我是 JQuery 的新手，所以我不知道如何把它放在那里。当我取消注释这些行时，我在 FireBug 上收到“缺少：属性 id 之后”错误。我怎样才能做到这一点？提前致谢。

```
$( ".droppable" ).droppable({
  //if ((this.firstChild) != "[object HTMLImageElement]") {
    drop: function( event, ui ) {
      var dropped = ui.draggable;
      var droppedOn = $(this);
      $(dropped).detach().css({top: 0,left: 0}).appendTo(droppedOn);
    }
  //}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:26:10.143

您不能在对象文字中包含代码。

首先创建对象，然后可选地添加属性：

```
var o = {};
if ((this.firstChild) != "[object HTMLImageElement]") {
  o.drop = function( event, ui ) {
    var dropped = ui.draggable;
    var droppedOn = $(this);
    $(dropped).detach().css({top: 0,left: 0}).appendTo(droppedOn);
  };
}
$( ".droppable" ).droppable(o); 
```

### 编辑：

如果您需要`this`从函数内部使用，那么整个方法都是错误的。对象始终必须具有该属性，并且您必须改为在函数内部进行检查：

```
$( ".droppable" ).droppable({
  drop: function( event, ui ) {
    if ((this.firstChild) != "[object HTMLImageElement]") {
      var dropped = ui.draggable;
      var droppedOn = $(this);
      $(dropped).detach().css({top: 0,left: 0}).appendTo(droppedOn);
    }
  }
}); 
```

# xml - XML Schema 的 IDREF 和 ENTITY 用例

> ID：10684255
> 
> 赞同：1
> 
> 时间：2012-05-21T11:21:27.587
> 
> 标签：xml, xsd

谁能提供有关如何在模式中使用内置类型的简要示例：IDREF/IDREFS 和 ENTITY/ENTITIES）？他们的主要目的是什么？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T14:37:49.573

这些类型被添加到 XML Schema 中是因为工作组希望从 DTD 中提供一个转换路径，以复制 DTD 中可用的所有功能；所以主要目的是向后兼容。

IDREF 和 IDREFS 并没有真正做任何使用 key/keyref 无法实现的事情，只是它们的范围始终限定为 XML 文档级别，而 key/keyref 的范围始终限定为元素。

ENTITY/ENTITES 与未解析的外部实体很少使用的特性相关联。基本上，它允许您将属性（或元素）的值限制为外部解析实体的名称——奇怪的是，它只能在 DTD 中声明。如果您今天没有使用此功能，那么您不需要知道它的作用，您可以放心地忽略它。

# ruby - 在 Ubuntu 中安装 rmagick gem 时遇到问题（已经成功安装了 ImageMagick）

> ID：10684263
> 
> 赞同：1
> 
> 时间：2012-05-21T11:21:43.593
> 
> 标签：ruby, ubuntu, gem, imagemagick, rmagick

当我告诉你我已经阅读了 Stack 上与这个问题相关的每一件事时，相信我（我知道其他一些人已经问过这个问题）。

操作系统：Ubuntu 10.04 红宝石：1.8.7

我按照他们的指南安装了最新版本的 ImageMagick。我有几个问题，但能够解决它们并最终设法让“测试”命令吐出正确的结果（即转换徽标：filename.png - 它成功地将我给它的 png 文件更改为ImageMagick 的标志，从而确认 ImageMagick 已正确安装）。

现在，当我执行 sudo gem install rmagick 时，我得到以下结果：

构建原生扩展。这可能需要一段时间... 错误：安装 rmagick 时出错：错误：无法构建 gem 原生扩展。

/usr/bin/ruby1.8 extconf.rb extconf.rb:1:in `require': no such file to load -- mkmf (LoadError) from extconf.rb:1

Gem 文件将继续安装在 /var/lib/gems/1.8/gems/rmagick-2.13.1 中以供检查。结果记录到 /var/lib/gems/1.8/gems/rmagick-2.13.1/ext/RMagick/gem_make.out

将永远感激这方面的一些帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:24:40.903

该错误表明您需要`mkmf.rb`哪个是`ruby1.8-dev`包的一部分。

尝试`sudo apt-get install ruby1.8-dev`和`sudo apt-get install libmagickwand-dev`。希望它应该在那之后工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T09:16:15.460

我终于设法解决了这个问题。

我将此添加到我的 .bashrc 文件中（以获取 MagickCore.pc）：

```
export PKG_CONFIG_PATH="/usr/local/lib/pkgconfig" 
```

然后我创建了两个符号链接：

```
ln -s /usr/local/include/ImageMagick/wand /usr/local/include/wand ln -s
/usr/local/include/ImageMagick/magick /usr/local/include/magick 
```

在此之后，我只需键入 gem install rmagick 即可安装 rmagick。

希望这可以帮助某人。

干杯。

# objective-c - 从 iPhone 读取 Java 服务器

> ID：10684265
> 
> 赞同：0
> 
> 时间：2012-05-21T11:21:53.553
> 
> 标签：objective-c, sockets

我正在尝试让 iPhone 与服务器（在 Java 中）进行通信。我得到了连接，客户端（iPhone）和服务器之间的通信。

现在我正在从服务器向 iPhone 写信：

JAVA代码：

```
 String message = "bye";

            byte[] msg = message.getBytes();    

            OutputStream bufferSalida = client.getOutputStream();  
            DataOutputStream datos = new DataOutputStream(bufferSalida);                
            datos.write(msg); 
```

iPhone 代码：

```
- (void)stream:(NSStream *)theStream handleEvent:(NSStreamEvent)streamEvent
{
 switch (streamEvent) {
    case NSStreamEventHasBytesAvailable: {
        NSLog(@"can read: %@", theStream);
        uint8_t *buffer;
        NSUInteger length;
        [(NSInputStream *)theStream getBuffer:&buffer length:&length];
        NSData *data = [NSData dataWithBytes:buffer length:length];
        NSString *string = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
        NSLog(@"bytes: %@", data);
        NSLog(@"string: %@", string);

        break;
    } 
```

在日志中，我可以阅读：

```
2012-05-21 13:03:50.500 sockets[2412:f803] can read: <__NSCFInputStream: 0x6d83e20>
2012-05-21 13:03:50.501 sockets[2412:f803] bytes: <>
2012-05-21 13:03:50.502 sockets[2412:f803] string: 
```

为什么字节和字符串无效？？？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:35:05.450

我很确定您实际上没有阅读任何内容。尝试并记录您的`NSUInteger length`. 看看它说什么。

# .net - powershell 或 .net - 如何接收带有域名的域帐户

> ID：10684268
> 
> 赞同：1
> 
> 时间：2012-05-21T11:22:01.267
> 
> 标签：.net, powershell, quest

几天前我在问如何将 Lotus Notes 数据与 Active Directory 中的数据结合起来。我确信从 AD 中检索用户帐户不会有问题，但实际上存在一个问题。我使用 Get-QADUser 来接收用户名，但我后来意识到，没有用户帐户。我只有 winxp 和 win2003 服务器，所以我不能为 PowerShell 使用 Active Directory 模块，它是 Search-ADAccount cmdlet。

我正在尝试 Get-QADUser，但没有任何效果。此命令以这种形式列出域名：

```
Markus Elen                user            CN=Markus Elen,OU=Users,OU=CENTRAL,DC=pb,DC=sk 
```

但我需要用户名和他的域帐户。

是否可以使用 QADUser 或 Search-ADAccount 以外的其他 cmdlet 执行此操作？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T15:48:50.780

PowerShell 允许您使用 [ADSISEARCHER] 类型快捷方式（它包装 System.DirectoryServices.DirectorySearcher 类型）在本机查询 AD。下面是从您的默认域中获取所有用户的示例。

```
$searcher = [adsisearcher]'(objectCategory=user)(objectClass=user)" 
$searcher.FindAll() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:47:30.880

`Get-QADUser`返回一个具有许多属性的对象，其中确实包括用户帐户名称。尝试

```
Get-QADUser markus |fl 
```

看到他们。你可能想要

```
Get-QADUser markus |ft Name, LogonName
Get-QADUser markus |ft Name, NTAccountName 
```

虽然如果您以编程方式阅读这些内容，您应该直接从 Get-QADUser 接受对象并直接从它们查询属性。

# php - 当 php 的 mysql_query 返回 0 时，会产生错误。怎么修？

> ID：10684273
> 
> 赞同：0
> 
> 时间：2012-05-21T11:22:30.883
> 
> 标签：php, mysql, function, variables

当用户没有要显示的标签时，查询返回`: Undefined variable: tags in`函数的最后一行。

处理此错误的最佳方法是什么？

我正在考虑这样做，`$tags == 0 {$tags=''}; else return $tags;`但这没有用。

```
function show_users_tags($userid){

    $sql="SELECT id, tag_name from tags WHERE user_id='$userid'";
    $result = mysql_query($sql);
    while($data = mysql_fetch_object($result)){
        $tags[] = array(    'tag_name' => $data->tag_name, 
                            'id' => $data->id       
                    );
    }
    return $tags;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T11:23:41.260

如果在查询中没有找到结果，`while`则不会执行循环，并且`$tags`永远不会写入变量，从而`Undefined variable`在返回时引起通知。

放在`$tags = array();`函数顶部以将变量初始化为空数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:24:58.870

写

```
$tags = array(); 
```

在while循环之外。

# java - 为什么我的 JTable 没有出现？

> ID：10684275
> 
> 赞同：0
> 
> 时间：2012-05-21T11:22:34.857
> 
> 标签：java, swing, jtable, jscrollpane, jtableheader

我的 JTable 没有出现。我不知道为什么。也许你可以帮助我。我有一个窗口类，它有一个右面板，右面板应该显示一个包含模型数据的表格。我使用虚拟数据开始，例如月份和日期。

这是正确的面板类

```
import model.*;

import java.awt.*;
import java.awt.event.*;
//import java.text.*;
import javax.swing.*;

public class RightPanel extends JPanel implements View
{
    private TablePanel songsnartists = new TablePanel();
    Shop shop;

    public RightPanel(Shop ourShop)
    {   
        shop = ourShop;
        setup();
        build();
        setVisible(true);
    }

    private void setup()
    {   
        setPreferredSize(new Dimension(300, 300));
        setLayout(new GridLayout(3,2));
        setBorder(BorderFactory.createLineBorder(Color.blue));
    }

    private void build()
    { 
        add(songsnartists);
    }

    public void update()
    {}
} 
```

/* 到目前为止很简单，只是试图将表格面板添加到我的右侧面板 */

这是我创建的 TablePanel 类。它继承了 JTable 并使用了一个继承 AbstractTableModel 的私有类 MyTableModel，以便我制作一个不可编辑的表。

```
import javax.swing.*;
import javax.swing.table.*;

public class TablePanel extends JTable
{
    //private int ROWS = 3;
    //private int COLUMNS = 2;
    private final String [][] data = {{"Jan", "31"}, {"Feb","28"},{"Mar","31"}};
    private final String[] headers = {"Month", "Days"};
    JTable table;

    public TablePanel()
    {
        table = new JTable(new MyTableModel(data, headers));
        JTableHeader header = table.getTableHeader();
        //header.setBackground(Color.blue);
        setVisible(true);
    }

    private class MyTableModel extends AbstractTableModel
    {
        private String[] columnNames = {"Month", "Days"};
        private String[][] data = {{"Jan", "31"}, {"Feb","28"},{"Mar","31"}};

        public MyTableModel(String [][] data, String [] header)
        {
            int rows, cols, rowCounter, colCounter;

            rows = getRowCount();
            cols = getColumnCount();

            for (rowCounter=0; rowCounter < rows; rowCounter++)
                {
                    for (colCounter=0; colCounter < cols; colCounter++)
                        {
                            setValueAt(data[rowCounter][colCounter],rowCounter,colCounter);
                        }
                }           
        }

        public int getColumnCount()
        {
            return columnNames.length;
        }

        public int getRowCount()
        {
            return data.length;
        }

        public String getColumnName(int col)
        {
            return columnNames[col];
        }

        public Object getValueAt(int row, int col)
        {
            return data[row][col];
        }

        public Class getColumnClass(int c) 
        {
            return getValueAt(0, c).getClass();
        }

        public boolean isCellEditable(int row, int col)
        {
            return false;
        }
    }
} 
```

如您所见，抽象方法在私有类中被覆盖。谁能帮我告诉我为什么我的 JTable 没有出现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T11:39:38.390

*   阅读教程[如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

*   把[JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#show)放到[JScrollPane](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)

*   不要忘记使用正确的`JScrollPane`LayoutManager[放入](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)[JPanel](http://docs.oracle.com/javase/tutorial/uiswing/components/panel.html)，我看不到您添加到的地方，不确定 new是否适合`JTable``JPanel``GridLayout(3,2)``LayoutManager``JTable view`

# java - 为客户端服务器身份验证生成唯一 ID

> ID：10684283
> 
> 赞同：2
> 
> 时间：2012-05-21T11:23:00.797
> 
> 标签：java, mysql, uniqueidentifier

我正在创建一个应用程序，其中客户端向服务器发送请求，然后获取唯一的请求 ID。当客户端想要再次与服务器交互时，将使用这个唯一的请求 ID 对客户端进行身份验证。

客户端的请求分为两种：

1.  新请求，它没有现有的 id，并且来自服务器的响应生成并返回一个 id。
2.  带有 id 的现有请求。然后服务器处理客户端对提供的 id 的请求。

我的问题是如何生成 id？我正在使用 Java 和 MySQL 服务器数据库。如果我使用自动递增的数据库生成的 id，那么客户端就很容易猜出 id。另一个客户端可以通过猜测和滥用它们来恶意生成一些 id（客户端/服务器之间没有身份验证，除了 id :< ）

如果我使用 UUID 或其他随机算法生成随机 id，那么我需要检查整个数据库（可能有数千条记录），以真正检查并保证随机 id 是否确实是唯一的？还是在数据库中快速检查 id 是否存在并且不会导致性能问题？

我应该采取什么措施？除了唯一 ID 之外，我是否需要对客户端和服务器之间的身份验证采取更多安全措施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:25:53.747

为每个会话创建一个编码且唯一的*密钥*，该密钥将使用您拥有的该用户的唯一数据创建，例如他的电子邮件、当前时间等。

```
String yourString = "user@email.com"+"timestamp"; 
byte[] bytesOfMessage = yourString.getBytes("UTF-8");
MessageDigest md = MessageDigest.getInstance("MD5");
byte[] thedigest = md.digest(bytesOfMessage); 
```

将为每个请求生成一个唯一的 id，将它们存储在数据库中的一个表中，其中包含到期时间戳、用户 ID 和密钥。在每个请求上，如果它仍然有效，则更新“到期”时间，如果它过期或无效，则返回错误。

我使用的有效键表类似于：

```
userId(int)
key(varchar(32))
expiry(int) 
```

然后，如果您想查看用户是否打开了有效会话，您只需检查该表`userId`并确保它是唯一列，以避免存储以前会话的历史记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T11:27:52.147

您可以使用 Java 的 UUID。就像是 ：

```
UUID uniqueKey = UUID.randomUUID(); 
```

如果你不想使用它，你可以使用时间，因为它总是在变化，如果你想确定的话，添加一个随机数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T11:29:11.403

使用`java.util.UUID.randomUUID();`您可以生成加密安全的随机 UUID。

由于 UUID 是 128 位长，因此发生冲突的机会可以忽略不计，但如果您真的想检查冲突，您可以通过将活动 UUID 存储在数据库中并在生成后检查重复项来做到这一点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-18T14:31:32.227

如果您使用**Spring Framework**，您可能会发现另一个有用的 UUID 实现`org.springframework.util.AlternativeJdkIdGenerator`：

```
IdGenerator generator = new AlternativeJdkIdGenerator();
UUID uuid = generator.generateId(); 
```

这是来自文档：

> 一个 {@link IdGenerator}，它使用 {@link SecureRandom} 作为初始种子，然后 * {@link Random}，而不是每次 * 调用 {@link UUID#randomUUID()} 作为 {@link org.springframework.util .JdkIdGenerator JdkIdGenerator} 可以。* 这在安全随机 ID 和性能之间提供了更好的平衡。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-21T11:30:19.110

如果您想在 MySQL 端生成它，我认为这会很好

```
md5(concat(UNIX_TIMESTAMP(),<user_id>)) 
```

如果该字段被索引，查询不会花费很长时间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-21T14:44:56.390

1.  Use a UUID to generate a base ID that is nearly always unique.
2.  Hash the base ID to make it difficult for clients to guess and spoof.
3.  Store the hashed ID in the database using a column with a unique constraint.
4.  On the rare occasion the unique constraint is violated, repeat the above steps.

# asp.net - 如何通过不同的类对象将类对象绑定到网格视图中？

> ID：10684285
> 
> 赞同：0
> 
> 时间：2012-05-21T11:23:06.510
> 
> 标签：asp.net, data-binding, gridview, exception-handling, .net-2.0

我有 2 节课：

```
public class clsShipper 
{
    public string ShipperName { get; set; }
} 
```

和

```
public class clsJobInfo 
{
    public long JobID { get; set; }

    public clsShipper oShipper = new clsShipper();
} 
```

我的 GridView 如下

```
<asp:GridView ID="dgvJobCostList" runat="server" CellPadding="4" ForeColor="#333333" style="font-family:Verdana;font-size:10px;" AutoGenerateColumns="False" OnSelectedIndexChanged="dgvJobCostList_SelectedIndexChanged">
    <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
    <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
    <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
    <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
    <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
    <EditRowStyle BackColor="#999999" />
    <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:CheckBox ID="chkRowCheck" runat="server" />
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="ID">
            <ItemTemplate>
                <asp:Label ID="lblJobID" runat="server" Text='<%# Bind("JobID") %>' />
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Shipper">
            <ItemTemplate>
            <asp:Label ID="lblShipperName" runat="server" Text='<%# Bind("ShipperName") %>' />
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

我正在尝试通过 JobInfo 类对象绑定 Shipper 类的 ShipperName 属性。我在下面试过

```
protected void btnSearch_Click(object sender, EventArgs e)
{
    if (oOutputJobInfo.Length < 1)
    {
        lblMessage.Text = "Error : No Data Found";
        lblMessage.Visible = true;
        return;
    }
    else
    {
        dgvJobCostList.DataSource = oOutputJobInfo;
        dgvJobCostList.DataBind();
        dgvJobCostList.Visible = true;
    }
} 
```

但给出以下错误

> DataBinding：“Nucleus.BOL.clsJobInfo”不包含名为“ShipperName”的属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:37:34.137

像这样导入命名空间：

```
<%@ Import namespace="MyNamespace.ToclsJobInfo" %> 
```

如果与 clsJobInfo 不同，您可能需要命名空间到 clsShipper

然后您可以强制转换/取消装箱 clsJobInfo 并使用属性 oShipper

```
<asp:TemplateField HeaderText="Shipper">    
  <ItemTemplate>    
    <asp:Label ID="lblShipperName" runat="server" Text='<%# ((clsJobInfo)Container.DataItem).oShipper.ShipperName %>' />    
  </ItemTemplate>  
</asp:TemplateField> 
```

# php - 将 Windows-1256 转换为 UTF-8

> ID：10684288
> 
> 赞同：1
> 
> 时间：2012-05-21T11:23:26.047
> 
> 标签：php, utf-8, encode, windows-1255

我通过 curl 获取网页的内容，字符集设置为 Windows-1256。

现在我想用 charset utf8_general_ci 将此数据插入 MySQL 数据库。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T11:26:50.407

你需要[`iconv()`](http://php.net/manual/en/function.iconv.php)：

```
$utf8 = iconv('windows-1256', 'utf-8', $win1256); 
```

...虽然[`Supported character sets depend on the iconv implementation of your system.`](http://php.net/manual/en/intro.iconv.php)，所以 YMMV。

如果你想要一个 100% 安全的、随处可用的方法来做到这一点，最简单的做法就是使用查找表`str_replace()`。

# javascript - html5 图像未加载到画布中

> ID：10684290
> 
> 赞同：1
> 
> 时间：2012-05-21T11:23:34.387
> 
> 标签：javascript, html

我正在尝试将图片加载到 HTML5 Canvas 中。当我使用 URL 加载图像时，一切正常，但是如果我将图像放在本地驱动器上并指向它，则没有任何反应。

注意：当我使用常规标签时，一切正常并且图像已加载。

这是代码：

> ```
>  var canvas = document.getElementById("rightSide");
>     var context = canvas.getContext("2d");
>     var imageObj = new Image();
>     imageObj.src = "cloud.gif";
>     context.drawImage(imageObj, 650, 55, 93, 104); 
> ```
> 
> <canvas id="rightSide" width="800px" height="800">

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-21T11:27:30.500

尝试这样的事情。

```
<canvas id="canvas"></canvas>

var can = document.getElementById('canvas');
var ctx = can.getContext('2d');

var img = new Image();
img.onload = function(){
    can.width = img.width;
    can.height = img.height;
    ctx.drawImage(img, 0, 0, img.width, img.height);
}
img.src = 'image.jpg'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:35:11.450

加载到画布中的本地文件被视为来自不同的来源，因此被“污染”。这就是为什么它不适用于您的本地文件，但适用于 URL。

# ruby - 为什么这个 Rails 包含验证失败？

> ID：10684291
> 
> 赞同：0
> 
> 时间：2012-05-21T11:23:35.960
> 
> 标签：ruby, validation, ruby-on-rails-3.1, inclusion

顺便说一下，使用 Rails 3.1.1。要重现这一点，请创建一个新的 Rails 项目。在此项目中创建一个名为 Example 的新模型。为此模型创建一个迁移，如下所示...

```
class CreateExamples < ActiveRecord::Migration
    def change
        create_table :examples do |t|
            t.integer :status, :null => false
            t.timestamps
        end
    end
end 
```

让示例模型代码如下所示...

```
class Example < ActiveRecord::Base
    VALID_VALUES = [0, 1, 2, 3]

    validates :status, :presence => true, :inclusion => {:in => VALID_VALUES}
end 
```

现在编辑此模型的单元测试并将以下代码添加到其中...

```
require 'test_helper'

class ExampleTest < ActiveSupport::TestCase
    test "whats going on here" do
        example = Example.new(:status => "string")
        assert !example.save
    end
end 
```

编辑夹具文件，使其不创建任何记录，然后使用诸如 bundle exec rake test:units 之类的命令运行单元测试。此测试应通过，因为“字符串”不是有效状态，因此示例对象应从调用保存返回 false。这没有发生。如果您将 0 从 VALID_VALUES 数组中取出，则此方法有效。有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T12:17:25.743

“字符串”在验证之前被转换为整数（因为您的状态列是整数）

```
"string".to_i # => 0 
```

您可以通过使用数值验证器来避免这种情况：

```
validates :status, :presence => true, :numericality => { :only_integer => true }, :inclusion => {:in => VALID_VALUES} 
```

顺便说一句，你可以使用#valid？或#invalid？在您的测试中使用方法而不是 #save

# c# - 为什么以及如何摆脱 NullReferenceException

> ID：10684292
> 
> 赞同：0
> 
> 时间：2012-05-21T11:23:37.113
> 
> 标签：c#, windows-phone-7, slider, nullreferenceexception

```
namespace WindowsPhoneApp
{

    Class MainPage()
    {
        private void ProcentSlider_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
        {
            ShowSliderValue.Text = ProcentSlider.Value.ToString(); //<-- NullReferenceException
        }

    }
} 
```

我无法将 Slider 控件的值引用到 TextBox 控件...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:29:30.983

试试这个 - 这可能是因为 ShowSliderValue 在不同的线程中运行.. 虽然有点猜测。

```
private void ProcentSlider_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
{
    Dispatcher.BeginInvoke(new Action(() => ShowSliderValue.Text = ProcentSlider.Value.ToString();));
} 
```

或者这个？

```
private void ProcentSlider_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
{
    var slider = (ProcentSlider)sender;
    ShowSliderValue.Text = slider.Value.ToString();
} 
```

# javascript - 当我从同一页面上的 javascript 函数访问隐藏字段值时，它返回 null

> ID：10684293
> 
> 赞同：0
> 
> 时间：2012-05-21T11:23:39.610
> 
> 标签：javascript, json, hidden

**我在我的 aspx 表单中写的内容::**

```
 <%@ Page Title="Sector Composition" Language="C#" MasterPageFile="~/UIPages/ApexM.Master"
     AutoEventWireup="true" CodeFile="Sector_Composition.aspx.cs" Inherits="Anonymous_Sector_Composition" %>

   <asp:Content ID="Content1" ContentPlaceHolderID="head" runat="Server">
   <script type="text/javascript">

    var browserData = [];
    var versionsData = [];
    var chart;

    function OnPageLoad()
    {

        var oJSON_DataTable_DataHolder = document.getElementById("JSON_DataTable_DataHolder");

        var oJSON = eval("(" + oJSON_DataTable_DataHolder.value + ")");

        var colors = Highcharts.getOptions().colors;

        for (var i = 0; i < oJSON.TABLE[0].ROW.length; i++) {

            for (var j = 0; j < oJSON.TABLE[0].ROW[i].COL.length; j++) {

                browserData.push({
                    name: oJSON.TABLE[0].ROW[i].COL[1].DATA,
                    y: oJSON.TABLE[0].ROW[i].COL[2].DATA,
                    color: colors[i].color

                });

                versionsData.push({
                    name: oJSON.TABLE[0].ROW[i].COL[1].DATA,
                    y: oJSON.TABLE[0].ROW[i].COL[4].DATA,
                    color: colors[i].color
                });

            }
        }

        // Create the chart
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'pie'
            },
            title: {
                text: 'Browser market share, April, 2011'
            },
            yAxis: {
                title: {
                    text: 'Total percent market share'
                }
            },
            plotOptions: {
                pie: {
                    shadow: false
                }
            },
            tooltip: {
                formatter: function () {
                    return '<b>' + this.point.name + '</b>: ' + this.y + ' %';
                }
            },
            series: [{
                name: 'Browsers',
                data: browserData,
                size: '60%',
                dataLabels: {
                    formatter: function () {
                        return this.y > 5 ? this.point.name : null;
                    },
                    color: 'white',
                    distance: -30
                }
            }, {
                name: 'Versions',
                data: versionsData,
                innerSize: '60%',
                dataLabels: {
                    formatter: function () {
                        // display only if larger than 1
                        return this.y > 1 ? '<b>' + this.point.name + ':</b> ' + this.y + '%' : null;
                    }
                }
            }]
        });

    }

   </script>

    </asp:Content>
    <asp:Content ID="Content2" ContentPlaceHolderID="cphContent" runat="Server">

   <div id="Container">

   </div>
     <div>

        <asp:HiddenField ID="JSON_DataTable_DataHolder"  runat="server" />

    </div>

  </asp:Content> 
```

**在我的代码后面 :::**

```
 protected void Page_Load(object sender, EventArgs e)
  {

    psp_Chart_Composition_MktCapTableAdapter composition = new psp_Chart_Composition_MktCapTableAdapter();

    DataTable compositions = composition.GetData();
    JSON_Class Object_JSON_Class = new JSON_Class();
    ///////// JSON String with Rows And Cols////////////////////////////
    JSON_DataTable_DataHolder.Value = Object_JSON_Class.JSON_DataTable(compositions);

   } 
```

代码有什么问题？？我无法在 javascript 函数中获取隐藏字段的值。我试过函数调用 window.onload= OnPageLoad; 还有一个按钮 onclientclick 事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:40:34.627

您可以更改代码：

```
var oJSON_DataTable_DataHolder = document.getElementById("JSON_DataTable_DataHolder"); 
```

至：

```
var oJSON_DataTable_DataHolder = document.getElementById("ctl00_cphContent_JSON_DataTable_DataHolder"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:33:17.153

更改此行

```
var oJSON_DataTable_DataHolder = document.getElementById("JSON_DataTable_DataHolder"); 
```

至

```
var oJSON_DataTable_DataHolder = document.getElementById("<%= JSON_DataTable_DataHolder.ClientID %>"); 
```

# sql - 如何在此查询中显示部门名称？

> ID：10684298
> 
> 赞同：1
> 
> 时间：2012-05-21T11:24:11.297
> 
> 标签：sql, sql-server-2008-r2

对于星型模式，我有以下数据库设计：

```
alll table: ID, user_id, cat_id, qa_id
user table: user_id, name, department
category table: cat_id, cat_text, sub_cat_text
QA table: aq_id, q_id, answer_id
question table: q_id, q_text, sub_q_text
answer table: answer_id, text 
```

我必须提出一个查询，显示每个问题的参与者总数，包括其子问题及其所有答案，即使这些答案中的任何一个都没有参与者。幸运的是，我可以提出一个查询，显示：问题、子问题、每个答案中的参与者总数。然而，现在的问题是展示部门。如果其中一个答案没有参与者，则部门将显示为 NULL。那么如何修改呢？

我的查询：

```
SELECT     dbo.question.q_text, dbo.question.sub_q_text, COUNT(dbo.[user].user_id) AS Expr1, dbo.answer.text, dbo.[user].department
FROM         dbo.alll INNER JOIN
                      dbo.category ON dbo.alll.cat_id = dbo.category.cat_id INNER JOIN
                      dbo.QA ON dbo.alll.qa_id = dbo.QA.aq_id INNER JOIN
                      dbo.[user] ON dbo.alll.user_id = dbo.[user].user_id INNER JOIN
                      dbo.question ON dbo.QA.q_id = dbo.question.q_id RIGHT OUTER JOIN
                      dbo.answer ON dbo.QA.answer_id = dbo.answer.answer_id
WHERE     (dbo.[user].department = 'pmod') AND (dbo.question.q_text = 'q1') OR
                      (dbo.[user].department IS NULL)
GROUP BY dbo.answer.text, dbo.question.q_text, dbo.question.sub_q_text, dbo.[user].department 
```

这是数据库的脚本：

```
USE [master]
GO
/****** Object:  Database [survey2]    Script Date: 05/22/2012 13:18:16 ******/
CREATE DATABASE [survey2] ON  PRIMARY 
( NAME = N'survey2', FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL10_50.SQLEXPRESS\MSSQL\DATA\survey2.mdf' , SIZE = 2048KB , MAXSIZE = UNLIMITED, FILEGROWTH = 1024KB )
 LOG ON 
( NAME = N'survey2_log', FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL10_50.SQLEXPRESS\MSSQL\DATA\survey2_log.ldf' , SIZE = 1024KB , MAXSIZE = 2048GB , FILEGROWTH = 10%)
GO
ALTER DATABASE [survey2] SET COMPATIBILITY_LEVEL = 100
GO
IF (1 = FULLTEXTSERVICEPROPERTY('IsFullTextInstalled'))
begin
EXEC [survey2].[dbo].[sp_fulltext_database] @action = 'enable'
end
GO
ALTER DATABASE [survey2] SET ANSI_NULL_DEFAULT OFF
GO
ALTER DATABASE [survey2] SET ANSI_NULLS OFF
GO
ALTER DATABASE [survey2] SET ANSI_PADDING OFF
GO
ALTER DATABASE [survey2] SET ANSI_WARNINGS OFF
GO
ALTER DATABASE [survey2] SET ARITHABORT OFF
GO
ALTER DATABASE [survey2] SET AUTO_CLOSE OFF
GO
ALTER DATABASE [survey2] SET AUTO_CREATE_STATISTICS ON
GO
ALTER DATABASE [survey2] SET AUTO_SHRINK OFF
GO
ALTER DATABASE [survey2] SET AUTO_UPDATE_STATISTICS ON
GO
ALTER DATABASE [survey2] SET CURSOR_CLOSE_ON_COMMIT OFF
GO
ALTER DATABASE [survey2] SET CURSOR_DEFAULT  GLOBAL
GO
ALTER DATABASE [survey2] SET CONCAT_NULL_YIELDS_NULL OFF
GO
ALTER DATABASE [survey2] SET NUMERIC_ROUNDABORT OFF
GO
ALTER DATABASE [survey2] SET QUOTED_IDENTIFIER OFF
GO
ALTER DATABASE [survey2] SET RECURSIVE_TRIGGERS OFF
GO
ALTER DATABASE [survey2] SET  DISABLE_BROKER
GO
ALTER DATABASE [survey2] SET AUTO_UPDATE_STATISTICS_ASYNC OFF
GO
ALTER DATABASE [survey2] SET DATE_CORRELATION_OPTIMIZATION OFF
GO
ALTER DATABASE [survey2] SET TRUSTWORTHY OFF
GO
ALTER DATABASE [survey2] SET ALLOW_SNAPSHOT_ISOLATION OFF
GO
ALTER DATABASE [survey2] SET PARAMETERIZATION SIMPLE
GO
ALTER DATABASE [survey2] SET READ_COMMITTED_SNAPSHOT OFF
GO
ALTER DATABASE [survey2] SET HONOR_BROKER_PRIORITY OFF
GO
ALTER DATABASE [survey2] SET  READ_WRITE
GO
ALTER DATABASE [survey2] SET RECOVERY SIMPLE
GO
ALTER DATABASE [survey2] SET  MULTI_USER
GO
ALTER DATABASE [survey2] SET PAGE_VERIFY CHECKSUM
GO
ALTER DATABASE [survey2] SET DB_CHAINING OFF
GO
USE [survey2]
GO
/****** Object:  Table [dbo].[category]    Script Date: 05/22/2012 13:18:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[category](
    [cat_id] [int] IDENTITY(1,1) NOT NULL,
    [cat_text] [varchar](50) NOT NULL,
    [sub_cat_text] [varchar](50) NULL,
 CONSTRAINT [PK_category] PRIMARY KEY CLUSTERED 
(
    [cat_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[answer]    Script Date: 05/22/2012 13:18:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[answer](
    [answer_id] [int] IDENTITY(1,1) NOT NULL,
    [text] [varchar](50) NOT NULL,
 CONSTRAINT [PK_answer] PRIMARY KEY CLUSTERED 
(
    [answer_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[user]    Script Date: 05/22/2012 13:18:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[user](
    [user_id] [int] IDENTITY(1,1) NOT NULL,
    [name] [varchar](50) NOT NULL,
    [department] [varchar](50) NOT NULL,
 CONSTRAINT [PK_user] PRIMARY KEY CLUSTERED 
(
    [user_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[question]    Script Date: 05/22/2012 13:18:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[question](
    [q_id] [int] IDENTITY(1,1) NOT NULL,
    [q_text] [varchar](50) NOT NULL,
    [sub_q_text] [varchar](50) NULL,
 CONSTRAINT [PK_question] PRIMARY KEY CLUSTERED 
(
    [q_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[QA]    Script Date: 05/22/2012 13:18:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[QA](
    [aq_id] [int] IDENTITY(1,1) NOT NULL,
    [q_id] [int] NOT NULL,
    [answer_id] [int] NOT NULL,
 CONSTRAINT [PK_QA] PRIMARY KEY CLUSTERED 
(
    [aq_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[alll]    Script Date: 05/22/2012 13:18:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[alll](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [user_id] [int] NULL,
    [cat_id] [int] NULL,
    [qa_id] [int] NULL,
 CONSTRAINT [PK_alll] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[showing number of participants in each Q]    Script Date: 05/22/2012 13:18:18 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[showing number of participants in each Q]
AS
SELECT     COUNT(dbo.question.q_id) AS Expr1, dbo.[user].department, dbo.category.cat_text, dbo.category.sub_cat_text, dbo.question.q_text
FROM         dbo.alll INNER JOIN
                      dbo.answer ON dbo.alll.answer_id = dbo.answer.answer_id INNER JOIN
                      dbo.category ON dbo.alll.cat_id = dbo.category.cat_id INNER JOIN
                      dbo.question ON dbo.alll.q_id = dbo.question.q_id INNER JOIN
                      dbo.[user] ON dbo.alll.user_id = dbo.[user].user_id
GROUP BY dbo.[user].department, dbo.category.cat_text, dbo.category.sub_cat_text, dbo.question.q_text
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[40] 4[20] 2[20] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "alll"
            Begin Extent = 
               Top = 61
               Left = 226
               Bottom = 178
               Right = 386
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "answer"
            Begin Extent = 
               Top = 182
               Left = 0
               Bottom = 269
               Right = 160
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "category"
            Begin Extent = 
               Top = 36
               Left = 426
               Bottom = 138
               Right = 586
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "question"
            Begin Extent = 
               Top = 189
               Left = 427
               Bottom = 291
               Right = 587
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "user"
            Begin Extent = 
               Top = 45
               Left = 0
               Bottom = 147
               Right = 160
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 9
         Width = 284
         Width = 2265
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 12
         Column = 1440
         Alias = 900
         Table' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'showing number of participants in each Q'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane2', @value=N' = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'showing number of participants in each Q'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=2 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'showing number of participants in each Q'
GO
/****** Object:  ForeignKey [FK_QA_answer]    Script Date: 05/22/2012 13:18:17 ******/
ALTER TABLE [dbo].[QA]  WITH CHECK ADD  CONSTRAINT [FK_QA_answer] FOREIGN KEY([answer_id])
REFERENCES [dbo].[answer] ([answer_id])
GO
ALTER TABLE [dbo].[QA] CHECK CONSTRAINT [FK_QA_answer]
GO
/****** Object:  ForeignKey [FK_QA_question]    Script Date: 05/22/2012 13:18:17 ******/
ALTER TABLE [dbo].[QA]  WITH CHECK ADD  CONSTRAINT [FK_QA_question] FOREIGN KEY([q_id])
REFERENCES [dbo].[question] ([q_id])
GO
ALTER TABLE [dbo].[QA] CHECK CONSTRAINT [FK_QA_question]
GO
/****** Object:  ForeignKey [FK_alll_category]    Script Date: 05/22/2012 13:18:17 ******/
ALTER TABLE [dbo].[alll]  WITH CHECK ADD  CONSTRAINT [FK_alll_category] FOREIGN KEY([cat_id])
REFERENCES [dbo].[category] ([cat_id])
GO
ALTER TABLE [dbo].[alll] CHECK CONSTRAINT [FK_alll_category]
GO
/****** Object:  ForeignKey [FK_alll_QA]    Script Date: 05/22/2012 13:18:17 ******/
ALTER TABLE [dbo].[alll]  WITH CHECK ADD  CONSTRAINT [FK_alll_QA] FOREIGN KEY([qa_id])
REFERENCES [dbo].[QA] ([aq_id])
GO
ALTER TABLE [dbo].[alll] CHECK CONSTRAINT [FK_alll_QA]
GO
/****** Object:  ForeignKey [FK_alll_user]    Script Date: 05/22/2012 13:18:17 ******/
ALTER TABLE [dbo].[alll]  WITH CHECK ADD  CONSTRAINT [FK_alll_user] FOREIGN KEY([user_id])
REFERENCES [dbo].[user] ([user_id])
GO
ALTER TABLE [dbo].[alll] CHECK CONSTRAINT [FK_alll_user]
GO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:38:09.057

这是*我认为*您正在寻找的查询。它首先交叉连接用户和问题。现在两者之间有所有可能的组合，您可以开始计算匹配的答案。

**编辑：**将连接更改为交叉连接，以便能够计算 0。

```
SELECT 
       dbo.[user].department, 
       dbo.question.q_text, 
       dbo.question.sub_q_text, 
       dbo.answer.text, 
       COUNT(qa.answer_id) AS Users_Answered
  FROM [user]
 CROSS JOIN question
 CROSS JOIN answer
  LEFT JOIN alll
    ON [user].User_ID = alll.User_ID
  LEFT JOIN qa
    ON alll.qa_id = qa.aq_id
   AND question.q_id = qa.q_id
   AND qa.answer_id = answer.answer_id
 GROUP BY      
       dbo.[user].department, 
       dbo.question.q_text, 
       dbo.question.sub_q_text, 
       dbo.answer.text
 ORDER BY 1, 2 
```

[你可以检查一下@Sql Fiddle](http://sqlfiddle.com/#!3/3c2b4/11)。

[新版查询@Sql Fiddle](http://sqlfiddle.com/#!3/3c2b4/13)。

# xml - 如何在 PowerShell 中编写 Xml.linq？

> ID：10684299
> 
> 赞同：12
> 
> 时间：2012-05-21T11:24:11.327
> 
> 标签：xml, powershell, linq-to-xml

我正在尝试在 PowerShell 中执行此操作：

```
XDocument document = XDocument.Load(@"web.config");

var comments = document.Descendants("client").DescendantNodes().OfType<XComment>().ToArray();

foreach (var comment in comments)
{
    XElement unCommented = XElement.Parse(comment.Value);
    comment.ReplaceWith(unCommented);
} 
```

我试过这样的事情：

```
$xDoc = [System.Xml.Linq.XDocument]::Load("web.config")

[System.Collections.Generic.IEnumerable[System.Xml.Linq.XElement]] $enum = $xDoc.Descendants("client")

$clients = [System.Xml.Linq.Extensions]::DescendantNodes($enum) 
```

但我收到一个错误消息

> 使用 1 个参数调用 DescendantNodes 的异常：值不能为空

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-21T13:32:22.823

我得到了这个工作，（从一个xml文档中取消注释）在powershell中使用linq：

```
[Reflection.Assembly]::LoadWithPartialName("System.Xml.Linq") | Out-Null

$xDoc = [System.Xml.Linq.XDocument]::Load("web.config")
$endpoints = $xDoc.Descendants("client") | foreach { $_.DescendantNodes()}               
$comments = $endpoints | Where-Object { $_.NodeType -eq [System.Xml.XmlNodeType]::Comment -and $_.Value -match "net.tcp://localhost:9876/RaceDayService" }        
$comments | foreach { $_.ReplaceWith([System.Xml.Linq.XElement]::Parse($_.Value)) }

$xDoc.Save("web.config") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-17T18:43:28.187

如果您要编写 PowerShell [Modules](https://docs.microsoft.com/en-us/powershell/developer/module/understanding-a-windows-powershell-module)，您将创建一个[Manifest](https://docs.microsoft.com/en-us/powershell/developer/module/how-to-write-a-powershell-module-manifest)文件，该文件将在调用时加载类似的依赖项`Import-Module MyModule`：

```
# Comma-separated assemblies that must be loaded prior to importing this module
RequiredAssemblies = @("System.Xml.Linq") 
```

对于编写模块的人来说，这是推荐的方式。

# grails - 在 Grails 1.3.7 中使用 Geb、Selenium 和 Spock 进行功能测试时出错

> ID：10684301
> 
> 赞同：2
> 
> 时间：2012-05-21T11:24:12.883
> 
> 标签：grails, groovy, functional-testing, spock, geb

我正在尝试使用 Grails 1.3.7、Geb、Spock 和 Selenium 运行功能测试。这是我的 BuildConfig.groovy 文件：

```
 def seleniumVersion = "2.21.0"

    grails.project.dependency.resolution = {
    // inherit Grails' default dependencies
    inherits("global")
    log "warn" // log level of Ivy resolver, either 'error', 'warn', 'info', 'debug' or 'verbose'
    test("org.seleniumhq.selenium:selenium-chrome-driver:$seleniumVersion")
    test("org.seleniumhq.selenium:selenium-firefox-driver:$seleniumVersion")
    test "org.codehaus.geb:geb-spock:0.6.0"
}

plugins {
    test(":spock:0.5-groovy-1.7")
} 
```

测试代码是这样的：

登录页面.groovy：

```
package pages

import geb.Page

class LoginPage extends Page
{

static url = 'login'

static at = { title.endsWith("Login")}
} 
```

GeneralSpec.groovy：

```
import geb.spock.GebReportingSpec
import spock.lang.*
import pages.*

@Stepwise
class GeneralSpec extends GebReportingSpec
{

    def "I can access the login page"()
    {
        when: "I open the login page"
        to LoginPage

        then: "I'll be at the login page"
        at LoginPage
    }

} 
```

现在，当尝试使用 FirefoxDriver 运行此测试时，我收到此错误：

```
org.apache.http.conn.scheme.Scheme.<init>(Ljava/lang/String;ILorg/apache/http/conn/scheme/SchemeSocketFactory;)V
java.lang.NoSuchMethodError: org.apache.http.conn.scheme.Scheme.<init>(Ljava/lang/String;ILorg/apache/http/conn/scheme/SchemeSocketFactory;)V
    at org.openqa.selenium.remote.internal.HttpClientFactory.getClientConnectionManager(HttpClientFactory.java:59)
    at org.openqa.selenium.remote.internal.HttpClientFactory.<init>(HttpClientFactory.java:48)
    at org.openqa.selenium.remote.HttpCommandExecutor.<init>(HttpCommandExecutor.java:111)
    at org.openqa.selenium.firefox.internal.NewProfileExtensionConnection.start(NewProfileExtensionConnection.java:78)
    at org.openqa.selenium.firefox.FirefoxDriver.startClient(FirefoxDriver.java:200)
    at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:94)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:147)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:85)
    at geb.driver.NameBasedDriverFactory.getDriver(NameBasedDriverFactory.groovy:42)
    at geb.driver.CachingDriverFactory.getDriver(CachingDriverFactory.groovy:36)
    at geb.Configuration.createDriver(Configuration.groovy:210)
    at geb.Configuration.getDriver(Configuration.groovy:199)
    at geb.Browser.getDriver(Browser.groovy:100)
    at geb.Browser.go(Browser.groovy:300)
    at geb.Page.to(Page.groovy:157)
    at geb.Browser.to(Browser.groovy:333)
    at geb.Browser.to(Browser.groovy:323)
    at geb.Browser.to(Browser.groovy:313)
    at geb.spock.GebSpec.methodMissing(GebSpec.groovy:51)
    at GeneralSpec.I can access the login page(GeneralSpec.groovy:12)
org.apache.http.conn.scheme.Scheme.<init>(Ljava/lang/String;ILorg/apache/http/conn/scheme/SchemeSocketFactory;)V
java.lang.NoSuchMethodError: org.apache.http.conn.scheme.Scheme.<init>(Ljava/lang/String;ILorg/apache/http/conn/scheme/SchemeSocketFactory;)V
    at org.openqa.selenium.remote.internal.HttpClientFactory.getClientConnectionManager(HttpClientFactory.java:59)
    at org.openqa.selenium.remote.internal.HttpClientFactory.<init>(HttpClientFactory.java:48)
    at org.openqa.selenium.remote.HttpCommandExecutor.<init>(HttpCommandExecutor.java:111)
    at org.openqa.selenium.firefox.internal.NewProfileExtensionConnection.start(NewProfileExtensionConnection.java:78)
    at org.openqa.selenium.firefox.FirefoxDriver.startClient(FirefoxDriver.java:200)
    at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:94)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:147)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:85)
    at geb.driver.NameBasedDriverFactory.getDriver(NameBasedDriverFactory.groovy:42)
    at geb.driver.CachingDriverFactory.getDriver(CachingDriverFactory.groovy:36)
    at geb.Configuration.createDriver(Configuration.groovy:210)
    at geb.Configuration.getDriver(Configuration.groovy:199)
    at geb.Browser.getDriver(Browser.groovy:100)
    at geb.report.PageSourceReporter.getPageSource(PageSourceReporter.groovy:39)
    at geb.report.PageSourceReporter.writePageSource(PageSourceReporter.groovy:35)
    at geb.report.PageSourceReporter.writeReport(PageSourceReporter.groovy:27)
    at geb.report.ScreenshotAndPageSourceReporter.writeReport(ScreenshotAndPageSourceReporter.groovy:31)
    at geb.Browser.report(Browser.groovy:453)
    at geb.spock.GebReportingSpec.report(GebReportingSpec.groovy:43)
    at geb.spock.GebReportingSpec.cleanup(GebReportingSpec.groovy:39) 
```

我已经尝试运行这个简单的测试一周了，但是，所有这些版本和异常都让我非常困惑。如果有人可以提供帮助，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T09:40:59.197

这可能是由于包含的 http-client 版本不正确造成的。对我来说，这是由 Grails Release Plugin 引入的。如果它来自插件，您可以在 BuildConfig 中禁用它：

```
plguins {
    build ":release:$grailsVersion" {
        excludes = 'http-client'
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T14:03:59.290

（编辑）这取决于您所针对的 Firefox 版本。我正在运行 Firefox 3.6.28。使用 Grails 1.3.7 和 Geb 0.6.1

（编辑 2）您可以使用 selenium 版本 - 2.21.0。

快速解决方法是更改​​为以下内容。

(编辑 2) def seleniumVersion = "2.21.0"

# mysql - 哪个 MySQL 查询更快？

> ID：10684307
> 
> 赞同：1
> 
> 时间：2012-05-21T11:24:39.137
> 
> 标签：mysql, database

哪个查询执行得更快，哪个是完美查询？

```
SELECT
    COUNT(*) AS count
FROM
    students
WHERE
    status = 1
AND
    classes_id IN(
                    SELECT
                        id
                    FROM
                        classes
                    WHERE
                        departments_id = 1
                ); 
```

或者

```
SELECT
    COUNT(*) AS count
FROM
    students s
LEFT JOIN
    classes c
ON
    c.id = s.classes_id
WHERE
    status = 1
AND
    c.departments_id = 1 
```

我已经放置了两个查询都将输出相同的结果。现在我想知道哪种方法执行得更快，哪种方法是正确的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T15:11:07.737

您应该始终使用`EXPLAIN`来确定您的查询将如何运行。

不幸的是，MySQL 会将您的子查询作为 DEPENDENT QUERY 执行，这意味着将为外部查询中的每一行运行子查询。你会认为 MySQL 足够聪明，可以检测到子查询不是相关的子查询，并且只会运行一次，唉，它还没有那么聪明。

因此，MySQL 将扫描学生中的所有行，为每一行运行子查询，并且不使用外部查询上的任何索引。

将查询编写为 JOIN 将允许 MySQL 使用索引，以下查询将是编写它的最佳方式：

```
SELECT COUNT(*) AS count
FROMstudents s
JOIN classes c
  ON c.id = s.classes_id
  AND c.departments_id = 1
WHERE s.status = 1 
```

这将使用以下索引：

```
students(`status`)
classes(`id`, `departements_id`) : multi-column index 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T11:38:07.517

从设计和清晰度的角度来看，我会避免像第一个那样的内部选择。确实，要 100% 确定是否或如何优化每个查询以及哪个会“更好”运行，需要了解您使用的 SQL 服务器将如何解释它及其计划。在 Mysql 中，使用“解释”。

但是....即使没有看到这一点，我的钱仍然在仅加入版本上...内部选择版本必须在确定要在“IN”子句中使用的值之前完整地执行内部选择-我当您将东西包装在函数中时知道这是真的，并且非常肯定当将选择作为 IN 争论时这是真的。我也知道这是完全抵消内部选择中的表上的索引可能带来的任何好处的好方法。

我通常认为只有非常罕见的查询情况才真正需要内部选择。通常，那些使用它们的人经常像传统的迭代流程序员一样思考，而不是真正思考关系数据库结果集术语......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T11:39:35.823

**分别解释**两个查询

两个查询之间的区别在于子查询与连接

大多数情况下，连接比子查询快。Join 创建执行计划并预测将要处理的数据，因此可以节省时间。另一方面，子查询运行所有查询，直到加载所有数据。大多数开发人员使用子查询，因为它们比 JOIN 更具可读性，但在性能很重要的地方，JOIN 是更好的解决方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-13T22:40:50.780

找出答案的最好方法是测量它：

**无索引**

*   查询一：0.9s
*   查询2：0.9s

**有索引**

*   查询一：0.4s
*   查询2：0.2s

结论是：

*   如果您没有索引，那么您使用哪个查询没有区别。
*   如果您有正确的索引，连接会更快。
*   添加正确索引的效果大于选择正确查询的效果。如果性能很重要，请确保您拥有正确的索引。

当然，您的结果可能会因 MySQL 版本和您拥有的数据分布而异。

这是我测试它的方法：

*   1,000,000 名学生（25% 处于状态 1）。
*   50,000 门课程。
*   10个部门。

这是我用来创建测试数据的 SQL：

```
CREATE TABLE students
(id INT PRIMARY KEY AUTO_INCREMENT,
status int NOT NULL,
classes_id int NOT NULL);

CREATE TABLE classes
(id INT PRIMARY KEY AUTO_INCREMENT,
departments_id INT NOT NULL);

CREATE TABLE numbers(id INT PRIMARY KEY AUTO_INCREMENT);

INSERT INTO numbers VALUES (),(),(),(),(),(),(),(),(),();

INSERT INTO numbers
SELECT NULL
FROM numbers AS n1
CROSS JOIN numbers AS n2
CROSS JOIN numbers AS n3
CROSS JOIN numbers AS n4
CROSS JOIN numbers AS n5
CROSS JOIN numbers AS n6;

INSERT INTO classes (departments_id)
SELECT id % 10 FROM numbers WHERE id <= 50000;

INSERT INTO students (status, classes_id)
SELECT id % 4 = 0, id % 50000 + 1 FROM numbers WHERE id <= 1000000;

SELECT COUNT(*) AS count
FROM students
WHERE status = 1
AND classes_id IN (SELECT id FROM classes WHERE departments_id = 1);

SELECT COUNT(*) AS count
FROM students s
LEFT JOIN classes c
ON c.id = s.classes_id
WHERE status = 1
AND c.departments_id = 1;

CREATE INDEX ix_students ON students(status, classes_id); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-16T20:59:08.253

这两个查询不会产生相同的结果：

```
SELECT
    COUNT(*) AS count
FROM
    students
WHERE
    status = 1
AND
    classes_id IN(
                    SELECT
                        id
                    FROM
                        classes
                    WHERE
                        departments_id = 1
                ); 
```

...将返回学生表中具有 classes_id 字段的行数，该字段也在 classes 表中，并且部门 ID 为 1。

```
SELECT
    COUNT(*) AS count
FROM
    students s
LEFT JOIN
    classes c
ON
    c.id = s.classes_id
WHERE
    status = 1
AND
    c.departments_id = 1 
```

...将返回状态字段为 1 的学生表中的总行数，并且可能更多，具体取决于您的数据的组织方式。

如果您希望查询返回相同的内容，则需要将 LEFT JOIN 更改为 INNER JOIN，以便它只匹配同时满足这两个条件的行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-21T11:27:16.047

在两个查询上运行`EXPLAIN SELECT ...`并检查哪一个在做什么；）

# jsp - EL 变量在 WAS 8 中不起作用

> ID：10684309
> 
> 赞同：0
> 
> 时间：2012-05-21T11:24:41.603
> 
> 标签：jsp, jstl, el, websphere-8

我使用 websphere 8 和 RAD 8，这个 scriptlet 输出正确的值：

`<%= ansokanInfo.getPSystem() %>`

但是使用 EL 它什么也不输出：

`${ansokanInfo.PSystem}`

我可以在`${`and之间写任何东西`}`，它不会呈现。我究竟做错了什么？应该怎么做才能启用 EL 表达式？这也不起作用：

`<c:out value="${ansokanInfo.PSystem}" />`

但这是有效的：

```
<c:forEach var="i" begin="1" end="5" >     <c:out value="${i}" />    </c:forEach> 
```

我的 web.xml 像这样开始：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T04:50:11.613

*Scriptlet*和 EL 不共享相同的变量范围。*Scriptlet*变量在 JSP 主体中声明，而 EL 变量应该设置为页面、请求、会话或应用程序范围的属性。

因此，要`ansokanInfo`在 EL 中使用它，您需要将其设置在其中一个范围内。假设它表示请求范围的数据，请执行以下操作：

```
request.setAttribute("ansokanInfo", ansokanInfo); 
```

您可以在此变量的第一次 EL 评估之前在*scriptlet中执行此操作。*但更明智的做法是在预处理 servlet 中执行此操作。

要正确学习和理解这些概念，请查看我们关于必修主题的 wiki 页面：

*   [我们的 EL 维基页面](https://stackoverflow.com/tags/el/info)
*   [我们的 JSP 维基页面](https://stackoverflow.com/tags/jsp/info)
*   [我们的 Servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)

# jquery - 将 div 高度舍入到一定数量

> ID：10684310
> 
> 赞同：0
> 
> 时间：2012-05-21T11:24:47.070
> 
> 标签：jquery

我正在尝试使用 Isotope 将各种元素保留在网格布局中，它们需要根据其中的内容量扩展到不同的大小，始终以一定的量递增 - 网格单位高度为 77px，排水沟为 7px。扩展的宽度将始终保持不变，因此在这里并不重要。

扩展元素的最小高度为 329 像素，但如果计算的高度达到 330 像素或更高，则最小高度需要为 413 像素（77 像素 + 7 像素间距）。然后如果计算的高度> 414px，那么它将跳转到下一个阈值 497px 等等。

使用 JS 设置这个高度值有什么帮助吗？（大多数情况下，这已经用 jQuery 完成了）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:31:06.340

jQuery[`height`](http://api.jquery.com/height/)会告诉你元素的自然高度。然后，您只需使用一系列`if...else`语句（或计算）将高度设置为特定值[`css`](http://api.jquery.com/css/)。因此，在调整大小时，您需要删除强制高度，测量，然后应用（新）强制高度。

# eclipse - 转移依赖失败，被缓存在本地仓库中

> ID：10684311
> 
> 赞同：12
> 
> 时间：2012-05-21T11:24:49.377
> 
> 标签：eclipse, maven, maven-2, m2eclipse

我正在 Eclipse 上开发 maven 2 项目，并且我有 m2e 插件，我在 Eclipse 中收到以下错误：

```
Failure to transfer com.thoughtworks.xstream:xstream:pom:1.3.1 from http://repo1.maven.org/maven2 was cached in the 
 local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced. 
 Original error: Could not transfer artifact com.thoughtworks.xstream:xstream:pom:1.3.1 from/to central (http://
 repo1.maven.org/maven2): Failed to create a selector. to http://repo1.maven.org/maven2/com/thoughtworks/xstream/
 xstream/1.3.1/xstream-1.3.1.pom 
```

请告知如何解决它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-21T12:57:52.183

删除`.lastUpdated`文件和依赖项然后再次下载后问题已解决。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T02:01:56.227

您可以使用`-U`参数强制检查远程存储库上的更新版本和快照，并解决此问题。

实际上，您可以通过使用`mvn -h`显示 Maven 帮助来找到此解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-05-27T18:28:50.063

由于您的目录中存在 Maven 工具的旧缓存，因此发生错误。所以你必须删除它。转到`C\User\"your user name"\m2`然后删除它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-11T06:03:02.087

如果您使用的是 Eclipse：

*   转到`Window->Preferences->Maven`：
    检查下载工件源代码，工件javadoc，启动时更新maven项目。

*   在包含 的文件夹中`pom.xml`，运行：
    `mvn clean install -U`

它对我有用:)。

# html - 将 div 拉伸到最大尺寸

> ID：10684312
> 
> 赞同：2
> 
> 时间：2012-05-21T11:24:58.457
> 
> 标签：html, css

我的CSS：

```
#main {
  display: block;
  top: 0px;
  bottom: 0px;
  height: auto;
  margin-top: 55px;
  max-width: 100%;
  overflow: scroll;
  position: absolute;
}

#content {
  background-color: #fff;
  -moz-border-radius: 5px;
  border-radius: 5px;
  -webkit-border-radius: 5px;
  border: 1px solid #eee;
  -moz-box-shadow: inset 0 0 5px #000;
  -webkit-box-shadow: inset 0 0 5px #000;
  box-shadow: inset 0 0 5px #000;
  margin: 5px;
} 
```

我想要的是： ![在此处输入图像描述](../Images/50c7cf02dc104aeca2f3272429b4defa.png)

我得到什么： ![在此处输入图像描述](../Images/7625363172b193e042160d319e979572.png)

红色=绝对标题
白色=带有“蓝色”滚动条的#main
绿色=带有文本的#content边框。

我想这很容易解决，但尝试了很长时间后我仍然无法解决：P

更新/简化 jsfiddle：http: [//jsfiddle.net/YAgW2/9/](http://jsfiddle.net/YAgW2/9/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:36:07.653

添加浮动：左；to #content 解决了显示问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:35:58.930

你能不能移动`#content`到`#main`你想要的地方，即在上面`#main`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T11:43:26.227

你的 CSS 应该是：

```
#main {
  display: block;
  top: 0px;
  bottom: 0px;
  height: auto;
  margin-top: 55px;
  max-width: auto;
  overflow: scroll;
  position: absolute;
}

#content {
  background-color: #fff;
  -moz-border-radius: 5px;
  border-radius: 5px;
  -webkit-border-radius: 5px;
  border: 1px solid #eee;
  -moz-box-shadow: inset 0 0 5px #000;
  -webkit-box-shadow: inset 0 0 5px #000;
  box-shadow: inset 0 0 5px #000;
  margin: 5px;
  width:auto;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T11:47:09.860

使用以下**CSS**：

```
#main {
  display: block;
  top: 0px;
  bottom: 0px;
  height: auto;
  margin-top: 55px;
  max-width: 100%;
  overflow: scroll;
  position: absolute;
  background-color: green;
}

#content {
  white-space: nowrap;
  padding: 5px;
  color: white;
  background-color: red;
  -moz-border-radius: 5px;
  border-radius: 5px;
  -webkit-border-radius: 5px;
  border: 1px solid #eee;
  -moz-box-shadow: inset 0 0 5px #000;
  -webkit-box-shadow: inset 0 0 5px #000;
  box-shadow: inset 0 0 5px #000;
  margin: 5px;
} 
```

以及以下**HTML**：

```
<div>
<div id="main">

</div>
<div id="content" style="position:absolute">
    Try to extend this text
    </div>
</div> 
```

# synchronization - 使用二进制信号量作为互斥体 - 是否无饥饿？

> ID：10684314
> 
> 赞同：0
> 
> 时间：2012-05-21T11:25:01.293
> 
> 标签：synchronization, mutex, semaphore

考虑以下用法：

```
Shared data: semaphore lock; // initially lock = 1
...
down(lock);
CRITICAL SECTION
up(lock); 
```

这段代码是否满足饥饿自由（即，如果一个进程等待进入 CS，它最终会成功）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:41:40.013

这实际上取决于多个线程在等待时选择线程时使用的策略`down(lock)`。

例如

1.  如果此策略基于队列，则保证您不会挨饿。
2.  如果任意选择多个等待线程之一，那么您可能会因运气不佳而饿死。
3.  如果它基于优先级，那么只要高优先级线程继续请求锁，低优先级线程就会饿死。

例如，Java 的 count[`Semaphore`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Semaphore.html#Semaphore%28int,%20boolean%29)在创建时可以配置为“公平”或不“公平”。这里，“公平”是指等待线程将被放入 FIFO 中，以便首先执行等待时间最长的线程。

# sql-server - 使用while循环计数器更新动态where子句？

> ID：10684317
> 
> 赞同：0
> 
> 时间：2012-05-21T11:25:08.940
> 
> 标签：sql-server, stored-procedures

请检查此查询：

```
declare @T table
(
 FirstColumn datetime primary key,
 S_E1 float
)

insert into @T(FirstColumn, S_E1) values
('2012-01-01T00:00:01', 1),
('2012-01-01T00:00:02', 2),
('2012-01-01T00:00:03', 3),
('2012-01-01T00:00:04', 4),
('2012-01-01T00:00:05', 5),
('2012-01-01T00:00:06', 6)

declare @Take varchar = '1'
declare @StartDate varchar(10)='2012-01-01T00:00:01'
declare @EndDate varchar(10) = '2012-01-01T00:00:06'
declare @count varchar(Max)
DECLARE @SQL nvarchar(Max)
set @count = (select count(FirstColumn) from @T Where FirstColumn Between ''+@StartDate+'' and ''+@EndDate+'')

set @SQL =' select S_E1 from @T where S_E1 ='+ @Take+''

BEGIN try
while(CAST(@Take AS int) < CAST(@count AS int))
Begin

   print @SQL;  
   set @Take = CONVERT(varchar,CAST(@Take AS int)+1)

 end
END TRY
BEGIN CATCH
    select ERROR_MESSAGE() as errormessage
END CATCH 
```

**问题：** 在上面的查询中，我无法更新@Take 变量值。请让我知道我在哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:35:53.687

更改了一些数据类型并将@SQL 的分配移动到循环中。

```
declare @T table
(
 FirstColumn datetime primary key,
 S_E1 float
)

insert into @T(FirstColumn, S_E1) values
('2012-01-01T00:00:01', 1),
('2012-01-01T00:00:02', 2),
('2012-01-01T00:00:03', 3),
('2012-01-01T00:00:04', 4),
('2012-01-01T00:00:05', 5),
('2012-01-01T00:00:06', 6)

declare @Take int = 1
declare @StartDate datetime = '2012-01-01T00:00:01'
declare @EndDate datetime = '2012-01-01T00:00:06'
declare @count int
declare @SQL nvarchar(Max)

set @count = (select count(FirstColumn)
              from @T
              where FirstColumn Between @StartDate and @EndDate)

begin try
  while @Take <= @count
  begin

     set @SQL =' select S_E1 from @T where S_E1 ='+ cast(@Take as varchar(10))+''
     print @SQL;  

     set @Take = @Take + 1
  end
end try
begin catch
    select error_message() as errormessage
end catch 
```

# android - 在项目“HelloAndroid”上运行构建器“Android Package Builder”时出错。sun/security/x509/X500Name

> ID：10684318
> 
> 赞同：5
> 
> 时间：2012-05-21T11:25:09.137
> 
> 标签：android, eclipse, adt

我刚刚安装了 Eclipse-Classic 3.7.2 和 android SDK。还使用 ADT 插件安装/配置了 eclipse。

现在，按照[http://developer.android.com/resources/tutorials/hello-world.html](http://developer.android.com/resources/tutorials/hello-world.html)中的步骤创建“Hello World”应用程序后，我尝试在 Android 模拟器中运行该应用程序。但这会引发错误

> 构建过程中发生错误。在项目“HelloAndroid”上运行构建器“Android Package Builder”时出错。sun/security/x509/X500Name

你能解释一下我在这里做错了什么，或者我需要解决这个错误吗？

谢谢泽山

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-10T07:14:13.797

就我而言，ADT 插件试图使用启动 eclipse 的 JVM 中的 keytool 实用程序。这是 IBM JDK，这失败了，因为 IBM JDK 附带的 keytool 与 Sun 版本不兼容——它的语法与 Google 文档不匹配，它会自动在 ~/.keystore 中创建密钥库文件（没有实际上告诉你它是在哪里创建的）。

**以下解决方案**对我有用：
1\. 安装 sun jvm
2\. 从终端执行： eclipse -vm path_to_sun_java/javaw

代替第 2 步，您可以编辑 eclipse.ini 来告诉使用哪个 jvm（参考[eclipse.ini](http://wiki.eclipse.org/Eclipse.ini)）

```
-vm
/usr/lib/sunjdk/bin/javaw 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T05:10:14.003

该问题与您正在使用的 JVM 有关，还与必须使用此 JVM 中的 keytool 生成的证书有关。

这是我在我的 Linux Ubuntu v11.04 系统中用来解决这个问题的命令：

1.  我已经在我的计算机上安装了 Oracle/Sun SDK 1.6（SDK 不是 JRE 之一）。

2.  我使用以下指令将此新的 SUN JVM 设为默认值

    sudo update-alternatives --config java

    **注意**将显示一个列表，其中包含系统上所有可用的 JVM，选择 SUN 之一。

3.  现在您将能够使用 SUN 提供的 JVM 执行此命令：

    ```
    keytool -genkey -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android -keypass android -keyalg RSA -validity 14000 
    ```

**注意**在执行此命令之前，您应该删除旧的 debug.keystore 文件，或者根据需要重命名它。

现在您的系统已启动并正在运行，那么您需要在 Eclipse 中配置新的 JVM 以便使用这个新版本进行编译。

# android - Android，是否有任何 adwhirl 选择的广告加载事件？

> ID：10684321
> 
> 赞同：1
> 
> 时间：2012-05-21T11:25:19.847
> 
> 标签：android, adwhirl

我想知道何时点击了 adwhirl 广告并且选择的广告已加载到浏览器中。是否有可能做到这一点？如果有怎么办？

我已经在自定义 adwhirl 布局中尝试了一个 onInterceptTouchEvent 事件处理程序，至少告诉我正在加载一个广告，但这实际上不起作用，因为可以在不实际加载广告的情况下点击广告横幅，因为某些广告需要一个按钮横幅被点击

也许我可以在自定义 adwhirl 布局中尝试其他一些东西？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:01:08.830

欢迎来到移动广告网络的阴暗世界 :)

不，你不能，如果它不在 sdk 中，你不能。而且您将无法监控点击次数以检查它们是否在欺骗您。

主要原因：

欺诈活动：大多数广告网络都有无效/欺诈点击算法来检测可疑行为。有些人不会计算可疑点击，有些像 Admob 怪人会干脆完全删除您的帐户而没有任何解释，即使无效活动不是您的错，也会保留您的收入。所以无论如何，即使你可以计算点击次数，你的数字和他们的数字也不匹配。

**还一如既往地提醒一句：**永远不要使用单一的移动网络！曾经 ！他们的服务条款允许他们删除您的帐户，恕不另行通知，也没有上诉。

Admob 以猛烈抨击开发者而闻名，而且大多数故事（包括我自己的故事）都是由开发者撰写的，他们不会为了更多的欺骗点击而冒着所有收入的风险。

Adwhirl 是一个良好的备份开始，但它仍然是 Admob 的产品，所以为了安全起见，我个人实现了另一个，我可以通过更改我的 Web 服务器上的开关来打开所有已安装的应用程序。

# android - ListView 滚动混乱

> ID：10684322
> 
> 赞同：2
> 
> 时间：2012-05-21T11:25:41.617
> 
> 标签：android, android-layout

我已经扩展了基本适配器——我遇到了一些奇怪的问题……当我滚动这个列表视图时——我的最后一项被第一项替换，下一次当我滚动时——另一个项目和所有……有时它是正确的。 .为什么它发生在这段代码中？

```
@Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        // sets the view onto list view
        LinearLayout rowLayout = null;

        System.out.println("getView " + position + " " + convertView);
        rowLayout = (LinearLayout) mInflater.inflate(
                R.layout.apps_list_row_items, parent, false);
        if (convertView == null) {
            // inflating the row

            vh.mAppIcon = (ImageView) rowLayout.findViewById(R.id.icon);
            vh.mAppName = (TextView) rowLayout.findViewById(R.id.application);

            vh.mAppHint = (TextView) rowLayout.findViewById(R.id.hint);

            mDownloadButton = (Button) rowLayout.findViewById(R.id.download);
            mDownloadButton.setFocusable(false);

        } else {
            // convertView.getTag();
            rowLayout = (LinearLayout) convertView;
        }
        // convertView.getTag();

        // On Click of the download button which triggers an async to download
        // the file.

        mIcon = mAppIconMapList.get(position);
        System.out.println("Icon " + mIcon);
        mCurrentApplication = mAvaiableApps.get(position);
        System.out.println("Current App " + mCurrentApplication);
        vh.mAppIcon.setImageBitmap(mIcon.get(mCurrentApplication));
        vh.mAppName.setText(mCurrentApplication.replace(".apk", ""));
        vh.mAppHint.setText("Click here to view Description");

        return rowLayout;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:35:19.727

问题是 listadapter 有时会重用这些行。如果要解决此问题，请删除以下内容：

```
if (convertView == null) {   <----remove
   //code
}                            <----remove
else{                        <----remove
   ...                       <----remove
}                            <----remove 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:29:54.550

您的**getView**方法看起来有点可疑，请尝试如下更改：

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {
        // sets the view onto list view

        ViewHolder vh = null;

        System.out.println("getView " + position);

        if (convertView == null) {
            // inflating the row
            LinearLayout rowLayout = (LinearLayout) mInflater.inflate(
                R.layout.apps_list_row_items, parent, false);

            vh.mAppIcon = (ImageView) rowLayout.findViewById(R.id.icon);
            vh.mAppName = (TextView) rowLayout.findViewById(R.id.application);

            vh.mAppHint = (TextView) rowLayout.findViewById(R.id.hint);

            mDownloadButton = (Button) rowLayout.findViewById(R.id.download);
            mDownloadButton.setFocusable(false);

            convertView.setTag(vh);

        } else {
            vh = (ViewHolder) convertView.getTag();
        }

        // On Click of the download button which triggers an async to download
        // the file.

        mIcon = mAppIconMapList.get(position);
        System.out.println("Icon " + mIcon);
        mCurrentApplication = mAvaiableApps.get(position);
        System.out.println("Current App " + mCurrentApplication);
        vh.mAppIcon.setImageBitmap(mIcon.get(mCurrentApplication));
        vh.mAppName.setText(mCurrentApplication.replace(".apk", ""));
        vh.mAppHint.setText("Click here to view Description");

        return convertView;
} 
```

# asp.net - MVP asp.Net 中的 Ajax 调用

> ID：10684327
> 
> 赞同：0
> 
> 时间：2012-05-21T11:26:05.040
> 
> 标签：asp.net, ajax, mvp

我正在开发一个使用 Ajax、JQuery 实现 MVP 的小项目。

我实现了被动视图 MVP 模式，所有演示者都通过事件处理从视图连接。

该方案通过单击主行上的链接显示主列表中的详细信息弹出框。

我必须进行 ajax 调用才能显示详细信息列表。现在我的问题是如何从客户端通过 Ajax 进行调用以调用事件。

我知道 AJAX 调用中有两种情况：

1.  调用页面方法：在此，如何调用在演示者内部调用事件的页面方法（默认为静态）？如果我直接在我的视图中调用演示者方法，那么它违反了 MVP 模式。
2.  调用 Web 服务：如何调用 Web 服务（应该在哪里创建？）演示者如何处理此服务？

我用谷歌搜索了很多网站，但找不到正确的答案来实施。

请澄清我的问题并感谢您的支持。

感谢 Kalyan P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:34:44.590

我在[自己构建的 MVP 框架](http://nucleo.codeplex.com)中所做的是使用 Web 服务，并且该 Web 服务实现了一个演示者。因此，您调用 Web 服务，Web 服务向演示者触发一个事件，演示者响应模型，然后 Web 服务返回模型中的任何内容。

> 如果我直接在我的视图中调用演示者方法，那么它违反了 MVP 模式。

这取决于您与谁交谈；有些人赞成在演示者上调用方法，而不是使用视图事件（[杰里米·米勒（Jeremy Miller）对此发表了博文](http://codebetter.com/jeremymiller/2007/06/04/build-your-own-cab-part-6-view-to-presenter-communication/)）。

# codeigniter - Codeigniter：在控制器中显示查询结果

> ID：10684329
> 
> 赞同：4
> 
> 时间：2012-05-21T11:26:13.597
> 
> 标签：codeigniter, codeigniter-2

我试图在我的控制器中显示我的数据库查询结果，但我不知道该怎么做。你能告诉我吗？

控制器

```
 function get_name($id){

 $this->load->model('mod_names');
 $data['records']=$this->mod_names->profile($id);

// I want to display the the query result here 
 // like this:  echo $row ['full_name'];

 } 
```

我的模特

```
function profile($id)
    {  

        $this->db->select('*');
        $this->db->from('names');
        $this->db->where('id', $id); 
        $query = $this->db->get();

        if ($query->num_rows() > 0)
        { return $query->row_array();
        }
        else {return NULL;}

    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T12:22:50.780

```
echo '<pre>';
print_r($data['records']); 
```

或者

```
 echo $data['records'][0]['fullname']; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T13:21:23.217

模型：

```
function profile($id){  
    return $this->db->
    select('*')->
    from('names')->
    where('id', $id)->
    get()->row_array();
} 
```

控制器：

```
function get_name($id){

    $this->load->model('mod_names');
    $data['records']=$this->mod_names->profile($id);

    print_r($data['records']); //All 
    echo $data['records']['full_name']; // Field name full_name

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-21T12:07:49.157

您可以在视图中执行此操作，就像这样。

控制器：

```
 function get_name($id){

    $this->load->model('mod_names');
    $data['records']=$this->mod_names->profile($id);
    $this->load->view('mod_names_view', $data); // load the view with the $data variable

 } 
```

查看（mod_names_view）：

```
 <?php foreach($records->result() as $record): ?>
     <?php echo $record->full_name); ?>
 <?php endforeach; ?> 
```

然后我会将您的模型修改为这样的（它对我有用）：

```
function profile($id)
{  
    $this->db->select('*');
    $this->db->from('names');
    $this->db->where('id', $id); 
    $query = $this->db->get();

    if ($query->num_rows() > 0)
    {
     return $query; // just return $query
    }
} 
```

# iphone - iPhone - facebook 登录后，UISwitch 的状态未在 -(void)fbDidLogin 方法中设置为“开启”

> ID：10684330
> 
> 赞同：4
> 
> 时间：2012-05-21T11:26:15.413
> 
> 标签：iphone, ios, xcode, facebook, uiswitch

我已经实现了 Facebook 登录并检查了我的访问令牌的状态

```
-(void)fbDidLogin 
```

现在，我`UITableView`有一个切换开关，如果我有访问令牌`Button`，它就会打开。`UISwitch`问题是，当我获得访问令牌时

```
-(void)fbDidLogin 
```

方法被调用。在这里，我通过调用来设置切换按钮的开关

```
[self.switch setOn:YES animated:YES]; 
```

但它没有发生。当我返回并再次打开该页面时，它显示正确的状态，但当我将其设置为`fbDidLogin`. 任何猜测为什么会这样？

对于 facebook 身份验证，它会超出应用程序并返回，也许这就是它发生的原因？但我正在调用一个网络服务`fbDidLogin`，它工作正常。

代码很简单

```
- (void)fbDidLogin {    
    [self.switch setOn:YES animated:YES];    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:20:52.427

您在哪里获得 fb 的访问令牌添加发布通知

**[[NSNotificationCenter defaultCenter] postNotificationName:@"fbDidLogin" object:nil];**

现在初始fb登录的方法是

```
-(void)fbLogin
{
[[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(fbDidLogin) name:@"fbDidLogin" object:nil];
 // some logic for intial fb login page
 } 
```

同样在 fbDidLogin 方法中添加这个

```
- (void)fbDidLogin 
{   
[[NSNotificationCenter defaultCenter]removeObserver:self name:@"fbDidLogin" object:nil]; 
[self.switch setOn:YES animated:YES];    
} 
```

收到访问令牌后，将立即调用 fbDIdLogin

如果访问令牌为 nil，则可以对 fb login failed 执行类似的过程。

# facebook - 如何以特定方式将 fbApp 嵌入到 fbPage 中？

> ID：10684334
> 
> 赞同：1
> 
> 时间：2012-05-21T11:26:25.673
> 
> 标签：facebook, url, get

如何以如下方式将我的应用程序嵌入我的 Facebook 页面：www.facebook.com/SzkolaSTRAMA?v=app_323694844330149

我已使用魔术 URL 将应用程序附加到我的页面：http: [//facebook.com/add.php?api_key](http://facebook.com/add.php?api_key=) = &pages=1&page=

并尝试使用 v 参数以某种方式打开应用程序，但似乎并非如此。有人可以给我一个线索吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:33:45.173

现在，您可以通过转到下面提到的 url 将应用程序添加到页面选项卡中的页面

[https://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&next=YOUR_URL](https://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&next=YOUR_URL)

您需要用您的 app_id 更改“app_id”，您可以在应用设置中找到它，“Your_url”应替换为您的应用程序完整 url，例如“https://www.facebook.com/TestApplication?sk=app_389610254390000”

更改值后按 Enter，如果您是任何 Facebook 页面的管理员，那么您将被带到一个屏幕，您可以在其中选择页面，完成此步骤后，您的应用程序将添加到页面选项卡。

如需进一步说明，请访问此[链接](https://developers.facebook.com/docs/appsonfacebook/pagetabs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T23:39:47.503

[https://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&next=YOUR_URL](https://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&next=YOUR_URL)

`YOUR_URL`应替换为您的 Canvas 网址。（正在加载到 Facebook 上 iframe 的页面）

`APP_ID`带有页面选项卡应用程序的 id。

也在这里解释 [https://stackoverflow.com/a/10535905/1520297](https://stackoverflow.com/a/10535905/1520297)

# jquery - android Jquery Mobile 示例不起作用

> ID：10684337
> 
> 赞同：0
> 
> 时间：2012-05-21T11:26:36.227
> 
> 标签：jquery, android, jquery-mobile

我在我的 android 设备中使用 jquery mobile 的示例示例。我使用这段代码尝试创建简单的列表视图，但我没有结果，它只是像一个简单的浏览器一样打印，没有任何样式或列表视图。我应该怎么做才能解决这个问题？

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Intro to jQuery Mobile</title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0a2/jquery.mobile-1.0a2.min.css" />
    <script src="http://code.jquery.com/jquery-1.4.4.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.0a2/jquery.mobile-1.0a2.min.js"></script>
</head>
<body>

<div data-role="page">

    <div data-role="header">
        <h1>Facebook Friends</h1>
    </div><!-- /header -->

    <div data-role="content">
        <p>

        <ul data-role="listview" data-inset="true">

            <li>
                <a href="index.html">Get Friends</a>
            </li>

            <li>
                <a href="index.html">Post to Wall</a>
            </li>

            <li><a href="index.html">Send Message</a></li>
        </ul>

        </p>

    </div><!-- /content -->

    <div data-role="footer">
        <p>&nbsp; Select an action</p>
    </div><!-- /footer -->
</div><!-- /page -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T12:00:11.157

请尝试以下说明：

下载 .js 文件并将其保存在 assets 文件夹中并给出路径，您的代码会给出错误，因为您的模拟器可能无法访问互联网

欢迎！

# iphone - InitWithNibName 和 viewDidLoad？

> ID：10684342
> 
> 赞同：2
> 
> 时间：2012-05-21T11:26:51.047
> 
> 标签：iphone, objective-c, init, viewdidload

> **可能重复：**
> [initWithNibName VS viewDidLoad](https://stackoverflow.com/questions/8735393/initwithnibname-vs-viewdidload)

我是 iOS 开发的新手。我只想知道这两个功能之间的主要区别？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T11:34:21.600

```
 viewDidLoad 
```

当视图加载并启动/取消归档并加载到内存中时调用。这是一个很棒的定制站。

```
 initWithNibName: 
```

用于使用 xib 文件名初始化某个类（它是一个被覆盖的 init 方法），bundle 参数指定文件的位置，您可以将 nil 传递给主包，即项目文件夹。

您应该在 viewDidLoad 中设置您的属性。initWithNibName: 是从 nib 文件创建控制器实例时调用的东西。我不会把自定义代码放在那里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T11:49:15.233

**viewDidLoad：**

`viewDidLoad`是 iPhone 应用程序生命周期的一部分。在读取 .xib 文件并将出口和操作连接到视图控制器后调用此方法。在这种方法中，您可以对您的网点进行分配。此方法被调用的次数与视图加载和卸载的次数一样多。

**initWithNibName:**

此方法是UIViewController 类的*指定初始化程序。*每当您在代码中创建 UIViewController 对象时都会使用它。此方法将 UIViewController 设置为能够按需加载 nib。当您在 init 方法中执行不同的逻辑时，此方法很有帮助。

# wpf - WPF 事件系统如何知道事件路由？

> ID：10684347
> 
> 赞同：0
> 
> 时间：2012-05-21T11:27:01.210
> 
> 标签：wpf, routed-events, raise

我试图了解 RoutedEvents 是如何工作的。好吧 - 我浏览了一些教程并理解了为什么 RoutedEvents 很有用以及它们是如何工作的。但有一件事，我不明白：

假设我写了一个类（例如“MyClass”），它有一个RoutedEvent 属性……。像这样：

```
public class MyClass 
{
public static readonly RoutedEvent myEvent;
...
} 
```

好吧 - 仅仅提供一个属性是不够的 - 所以我必须在 EventManager 的帮助下注册 RoutedEvent：

```
...
myEvent = EventManager.RegisterRoutedEvent("MyEvent", RoutingStrategy.Bubble, typeof(RoutedEventHandler), typeof(MyClass));
... 
```

好的 - 现在 WPF 事件系统知道这个事件。如果我这样做，我编写的每个类都会有它自己的 RoutedEvent。但这对我来说毫无意义。

我想要的是其他类监听相同的事件——而不是 MyClass 的类型。

例如：我有一个堆栈面板，堆栈面板中有一个按钮。单击堆栈面板将引发 onClick 事件。单击按钮将引发按钮的 onClick 事件 - 然后是堆栈面板上的 onClick 事件。但是怎么做？

抱歉 - 我很难描述这个问题 - 我太困惑了 :)

多谢。代码食人族

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:52:02.890

***我想要的是其他类监听相同的事件——而不是 MyClass 的类型。***

您期望从中获得权利，这就是它所提供的。我的意思是通过注册一个 RoutedEvent 你并没有将它强绑定到类型；相反，您使用字符串 "MyEvent" ***EventManager.RegisterRoutedEvent("MyEvent", ...***

RoutedEvent 遍历逻辑树并在处理时停止遍历（存在异常）。

因此，StackPanel 不需要从 MyClass 派生。您只需要通过指定操作/处理程序在 StackPanel 注册 RoutedEvent。每当 RoutedEvent 遍历 StackPanel 时，它都会调用相应的操作。

例如：

用户控件1.cs

```
//Routed Event
public static readonly RoutedEvent ThisIsEvent = EventManager.RegisterRoutedEvent("ThisIs", RoutingStrategy.Bubble, typeof(RoutedEventHandler), typeof(UserControl1));

// .NET wrapper
public event RoutedEventHandler ThisIs
{
    add { AddHandler(ThisIsEvent, value); }
    remove { RemoveHandler(ThisIsEvent, value); }
}

//local handler where RaiseEvent is called
private void button1_Click(object sender, RoutedEventArgs e)
{
    RaiseEvent(new RoutedEventArgs(ThisIsEvent));
} 
```

下面是您在 XAML 中订阅该事件的方式。您也可以在代码文件中执行此操作...

```
<StackPanel Orientation="Vertical" **local:UserControl1.ThisIs="StackPanel_ThisIs"** >
    <local:UserControl1></local:UserControl1>
</StackPanel> 
```

我希望这能消除你的疑虑。

# paypal - 使用 PayPal 或其他支付处理器的自动订阅服务？

> ID：10684349
> 
> 赞同：0
> 
> 时间：2012-05-21T11:27:05.400
> 
> 标签：paypal, payment, subscription, payment-processing, paypal-subscriptions

我正在开发一个可以从 Apple App Store 免费下载的应用程序。但是，用户将能够订阅高级功能，包括使用网络服务。我希望能够检测那些已订阅然后取消订阅的用户，以便我可以停止使用网络服务。我想自动执行此操作。

我知道 PayPal 是一种设置订阅的方式，但它是否能够检测人们何时取消订阅并以可以自动更新我的网络服务的方式通知我？

欢迎任何其他建议或指示 - 我不能成为第一个希望这样做的人/公司。但我真的不知道从哪里开始！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T03:26:51.917

听起来您需要两个特定功能：定期计费和 webhook。定期计费将负责订阅，而 webhook 会自动提醒您取消订阅，以便可以更新您的 web 服务。Webhook 是实时通知，可在我们的系统中发生自动事件时提醒您。Braintree 等支付网关提供这两种功能。

# facebook - 设置 Facebook 注册插件“文本字段”的默认值

> ID：10684351
> 
> 赞同：1
> 
> 时间：2012-05-21T11:27:10.310
> 
> 标签：facebook, plugins, field, default, registration

下午好，

我现在使用 Facebook 的注册插件，我想设置文本类型字段的默认值。

但是不知道有没有可能？如何在 PHP 和插件中设置文本字段的默认值？感谢您的帮助 ！

```
<iframe src="https://www.facebook.com/plugins/registration?
         client_id=APP_ID&
         redirect_uri=[...]&
         fields=[{'name':'name'},
                {'name':'last_name'},
                {'name':'first_name'},
                {'name':'birthday'},
                {'name':'gender'},
                {'name':'email'},
                {'name':'telephone', 'description':'T\u00e9l\u00e9phone', 'type':'text', 'default':'sith'},
                {'name':'portable', 'description':'Portable (facultatif)', 'type':'text','no_submit':true},
                {'name':'fax', 'description':'Fax (facultatif)', 'type':'text','no_submit':true},
                {'name':'adresse','description':'Adresse','type':'text','default':'truc'},
                {'name':'adresse_suite','description':'Adresse (suite)','type':'text','no_submit':true},
                {'name':'code_postal','description':'Code postal','type':'text'},
                {'name':'ville','description':'Ville','type':'text'},
                {'name':'pays','description':'Pays','type':'select',
                'options':[...]},
                {'name':'password'},
                {'name':'captcha'},
                {'name':'abonnement','description':'Re\u00e7evoir la Newsletter','type':'checkbox'},
                {'name':'stop_pub','description':'Re\u00e7evoir des offres marketing et bons d\'achat','type':'checkbox'},
                {'name':'offre_sortir','description':'Re\u00e7evoir des bons plans Sortir Malin dans votre r\u00e9gion','type':'checkbox'},
                {'name':'offre_partenaire','description':'Offres publicitaires de la part d\'autres partenaires','type':'checkbox'}]"
            scrolling="auto"
            frameborder="no"
            style="border:none"
            allowTransparency="true"
            width="100%"
            height="850"
            onvalidate="validate">
    </iframe> 
```

对不起我的英语不好，我是法国人！=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:07:50.220

根据[文档](https://developers.facebook.com/docs/plugins/registration/)，该`default`参数仅适用于`type:select`and`type:checkbox`字段，而不适用于文本字段）：所以你有点搞砸了。

供参考： [默认仅适用于选择和复选框字段 http://o7.no/K5jDj0](http://o7.no/K5jDj0)

但是，如果是我，我会构建一个完整的选项数组，其中包含我想要发送的选项，并且一次完成，`json_encode`而不是直接在`<iframe>`标签内定义它们，例如：

```
<?php
$regOptions = array(
    array('name' => 'name'),
    array('name' => 'last_name'),
    array('name' => 'birthday'),
    //the other fields
    array('name' => 'telephone',
          'description' => 'T\u00e9l\u00e9phone',
          'type' => 'text'
    ),
    //the other fields  
);
?>

//Then in your iframe:
<iframe src="https://www.facebook.com/plugins/registration?
     client_id=APP_ID&
     redirect_uri=[...]&

     fields="<?= urlencode(json_encode($regOptiosn)); ?>

     scrolling="auto"
     frameborder="no"
     style="border:none"
     allowTransparency="true"
     width="100%"
     height="850"
     onvalidate="validate">
</iframe> 
```

这使您可以利用`json_encode`和`urlencode`定义您的字段，而不必担心浏览器会因为不稳定的字符串而混淆请求。

至于某些字段是可选的、必需的，请查看文档中的[高级注册按钮功能](https://developers.facebook.com/docs/plugins/registration/advanced/)。FB 为您提供了几种验证表单的方法，这应该允许您在字段无效/未填写时阻止表单提交。

# .net - 在 AWS EC2 上使用 .NET 线程池

> ID：10684354
> 
> 赞同：1
> 
> 时间：2012-05-21T11:27:21.297
> 
> 标签：.net, c#-4.0, amazon-ec2, plinq

有没有人在 Amazon EC2 实例上使用 .NET 4 Parallel 或 Task 框架使用默认 .NET ThreadPool 的经验？

文档说 .NET 将使用 Environment.ProcessorCount 来计算最佳线程数。但是，我不确定 EC2 实例是否会为您提供正确的 ProcessorCount，因为它是在计算单元上测量的，并且分配可能会因需要而异。

这样做的正确方法是什么？您是否必须制定并设置[ParallelOptions.MaxDegreeOfParallelism 属性](http://msdn.microsoft.com/en-us/library/system.threading.tasks.paralleloptions.maxdegreeofparallelism.aspx)？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T11:35:47.197

EC2 实例以计算单元衡量，但它们也有虚拟内核。例如，一个 X-Large 实例有 4 个核心 @ 2 个计算单元 - 总共 8 个计算单元。

完整的规范在这里： http: [//gevaperry.typepad.com/main/2009/03/figuring-out-the-roi-of-infrastructureasaservice.html](http://gevaperry.typepad.com/main/2009/03/figuring-out-the-roi-of-infrastructureasaservice.html)

鉴于您仍在使用核心，尽管是虚拟核心。最好让 .NET 找出它自己的线程池大小。从 .NET 框架的角度来看，EC2 实例与专用服务器没有太大区别。有些服务器有很多内核和一个大线程池，有些服务器有少量内核，因此线程池较小。把它留给 .NET 来解决。

# typo3 - 下载前显示许可协议

> ID：10684355
> 
> 赞同：2
> 
> 时间：2012-05-21T11:27:22.707
> 
> 标签：typo3, eula

我必须为我们的大学主页解决以下任务：

*   每当请求 pdf 时，用户必须接受许可证，该许可证会弹出。
*   在同意下载开始。如果没有，则无法下载。

我搜索了扩展程序，但没有找到任何扩展程序来完成这项工作。也许你认识一个...

所以我尝试实现我自己的扩展。利用**securelinks**（*允许对可配置目录中的文件进行访问控制......在下载之前接受许可*）和**naw_securedl**（*“安全下载”：将TYPO3访问权限应用于所有文件资产（PDF、TGZ或JPG等）。 - 可配置） - 保护它们免受直接访问。*）我想将这两个扩展结合起来，使其具有：

1.  每当请求 pdf 文件时 (naw_securedl)
2.  显示一个许可证，如果接受，则会重定向到该文件（安全链接）。

这个任务听起来很简单，因为我只需要将这两个任务结合起来。无论如何，我失败了。

你怎么解决这个问题？你知道一些扩展做这项工作吗？有没有人对我们尝试创建一个可以完成工作的扩展的合作感兴趣？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:40:24.613

假设所有下载都存储在一个文件夹中，我建议编写自己的小扩展，将每个链接替换为中间站点的链接，如下所示：
`www.mydomain.com/acceptlicense.html?downloadfile=myhighqualitycontent.pdf`.

在*接受许可页面*，用户需要勾选接受许可复选框，然后点击提交按钮，将他们引导到*下载页面*，仍然带有 GET 参数： `www.mydomain.com/download.html?downloadfile=myhighqualitycontent.pdf`。

如果不是所有文件都在同一个文件夹中，您可以将文件路径中的斜杠替换为其他字符（它们需要在 URL 中工作）。或者您可能需要一个索引文件的数据库表，因此您可以为下载文件使用 ID：
`www.mydomain.com/acceptlicense.html?downloadfileID=99`

如果您根本不知道如何编写 TYPO3 扩展，请考虑在 TYPO3 上下文之外使用单独的 php/html 文件。

# string - toString.map 和 toString.toArray.map 的性能差异

> ID：10684356
> 
> 赞同：4
> 
> 时间：2012-05-21T11:27:26.780
> 
> 标签：string, performance, scala

在编写欧拉问题时，我遇到了我认为很奇怪的问题：

toString.map 方法比 toString.toArray.map 慢。

这是一个例子：

```
def main(args: Array[String]) 
{
    def toDigit(num : Int) = num.toString.map(_ - 48) //2137 ms
    def toDigitFast(num : Int) = num.toString.toArray.map(_ - 48) //592 ms

    val startTime = System.currentTimeMillis;

    (1 to 1200000).map(toDigit)

    println(System.currentTimeMillis - startTime)
} 
```

String 上的方法映射不应该回退到数组上的映射吗？为什么会有如此明显的差异？（请注意，增加数字甚至会导致非数组情况下的堆栈溢出）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T12:13:47.700

**原来的**

可能是因为`toString.map`使用了`WrappedString`隐式，而`toString.toArray.map`使用了`WrappedArray`隐式来解决`map`。

让我们看看`map`，定义在`TraversableLike`：

```
def map[B, That](f: A => B)(implicit bf: CanBuildFrom[Repr, B, That]): That = {
  val b = bf(repr)
  b.sizeHint(this)
  for (x <- this) b += f(x)
  b.result
} 
```

`WrappedString`使用 a`StringBuilder`作为构建器：

```
def +=(x: Char): this.type = { append(x); this }

def append(x: Any): StringBuilder = {
  underlying append String.valueOf(x)
  this
} 
```

`String.valueOf`调用在实例上`Any`使用 Java ，可能首先被装箱。这些额外的操作可能是速度差异的原因，而不是 Array 构建器的所谓较短的代码路径。`Object.toString``Char`

这是一个猜测，但必须测量。

**编辑**

修改后，一般观点仍然存在，但我提到了错误的隐含，因为这些`toDigit`方法返回一个 Int 序列（或类似），而不是我误读的翻译字符串。

`toDigit`使用`LowPriorityImplicits.fallbackStringCanBuildFrom[T]: CanBuildFrom[String, T, immutable.IndexedSeq[T]]`， with `T = Int`，它只是遵循一般的 IndexedSeq 构建器。

`toDigitFast`使用 type 的直接 Array 隐式`CanBuildFrom[Array[_], T, Array[T]]`，这无疑是更快的。

显式传递以下 CBF`toDigit`会使这两种方法相提并论：

```
object FastStringToArrayBuild {

  def canBuildFrom[T : ClassManifest] = new CanBuildFrom[String, T, Array[T]] {
    private def newBuilder = scala.collection.mutable.ArrayBuilder.make()
    def apply(from: String) = newBuilder
    def apply() = newBuilder
  }  

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T17:50:47.300

你被内存不足所愚弄。该`toDigit`版本*确实*创建了更多的中间对象，但如果您有足够的内存，那么 GC 不会受到严重影响（并且它会运行得更快）。例如，如果我不是创建 120 万个数字，而是连续创建 12k 100x，则这两种方法的时间大致相等。如果我连续创建 1.2k 5 位数字 1000 倍，我发现这`toDigit`大约快 5%。

鉴于该`toDigit`方法产生了一个*不可变*的集合，当所有其他条件都相同时它会更好，因为它更容易推理，并且考虑到除高要求任务之外的所有其他*条件都是*相同的，我认为该库应该是它应该的样子。

在尝试提高性能时，当然需要牢记各种技巧；其中之一是对于已知长度的集合，数组具有比 Scala 库中花哨的集合更好的内存特性。此外，需要知道地图并不是完成工作的最快方式。如果你*真的*想让这个速度很快，你应该

```
final def toDigitReallyFast(num: Int, accum: Long = 0L, iter: Int = 0): Array[Byte] = {
  if (num==0) {
    val ans = new Array[Byte](math.max(1,iter))
    var i = 0
    var ac = accum
    while (i < ans.length) {
      ans(ans.length-i-1) = (ac & 0xF).toByte
      ac >>= 4
      i += 1
    }
    ans
  }
  else {
    val next = num/10
    toDigitReallyFast(next, (accum << 4) | (num-10*next), iter+1)
  }
} 
```

在我的机器上，它比其他任何一个都快 4 倍。如果您将所有内容都放在 Long 中并将结果打包到数组中而不是使用，您可以再次快 3 倍`1 to N`：

```
final def toDigitExtremelyFast(num: Int, accum: Long = 0L, iter: Int = 0): Long = {
  if (num==0) accum | (iter.toLong << 48)
  else {
    val next = num/10
    toDigitExtremelyFast(next, accum | ((num-10*next).toLong<<(4*iter)), iter+1)
  }
}

// loop, instead of 1 to N map, for the 1.2k number case
{ 
  var i = 10000
  val a = new Array[Long](1201)
  while (i<=11200) { 
    a(i-10000) = toDigitReallyReallyFast(i)
    i += 1
  }
  a
} 
```

与许多事情一样，性能调整高度依赖于您想要做什么。相比之下，图书馆设计必须平​​衡许多不同的关注点。我确实认为值得注意的是库在性能方面不是最佳的，但这并不是 IMO 的真正案例之一；对于常见的用例，灵活性是值得的。

# c# - 如何在我的 Windows Phone 7 应用程序中读取收到的短信？

> ID：10684358
> 
> 赞同：0
> 
> 时间：2012-05-21T11:27:45.040
> 
> 标签：c#, silverlight, windows-phone-7

> **可能重复：**
> [如何以编程方式从 Windows 手机访问 SMS 消息线程](https://stackoverflow.com/questions/8987858/how-to-access-sms-message-threads-from-windows-phone-programmatically)

我正在尝试访问将在后面运行的应用程序中的传入短信，并检查短信中的某些文本，如果文本与应用程序中指定的格式匹配，则执行任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:29:38.457

不允许第三方开发者访问短信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:30:20.187

我认为这在当前的 API 中是不可能的。

# c# - 当我将双精度数与零进行比较时，为什么 Resharper 会抱怨？

> ID：10684365
> 
> 赞同：18
> 
> 时间：2012-05-21T11:28:09.097
> 
> 标签：c#, floating-point, resharper

如果我做

```
double d = 0;
if (d == 0) {
  ...
} 
```

Resharper 在比较`d == 0`中抱怨“浮点数与相等运算符的比较。四舍五入时可能会丢失精度。”

为什么？将精确的零表示为双精度或浮点数并不难，可以吗？

我知道，如果我与没有精确二进制表示的其他值（例如 0.2）进行比较，这样的警告将是相关的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-21T11:36:40.277

Resharper 没有分析 double 变量是如何得到它的值的。

经过几次计算后，double 值很少是精确的，因此 resharper 警告您将 double 值与精确值进行比较不是一个好主意。

```
double x = Math.Sqrt(2);
double d = x * x;

Console.WriteLine(d == 2); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-21T11:50:38.790

[自 R# 6 以来，许多此类检查都有“为什么 ReSharper 建议这样做？”](http://blogs.jetbrains.com/dotnet/2011/03/resharper-enhances-suggestions-with-explanations/) Alt+Enter 菜单上的[项目。](http://blogs.jetbrains.com/dotnet/2011/03/resharper-enhances-suggestions-with-explanations/)在这种情况下，[解释涉及对浮点值进行相等比较可能产生的意外后果](http://confluence.jetbrains.net/display/ReSharper/Compare+of+float+numbers+by+equality+operator)：

> 使用`==`运算符比较浮点数通常是个坏主意。问题源于这样一个事实：通常，计算结果必须“拟合”到浮点表示中，这并不总是与*应该*产生什么结果的感知现实相匹配。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-21T11:38:47.163

通常用双精度计算是不精确的。将双精度值与精确值进行比较可能会有问题。与间隔比较可能更安全。

```
if ((d > -0.000001) && (d < +0.000001)) {
   ...
} 
```

比较日期时同样适用

```
if ((date >= DateTime.parse("2012-05-21T00:00:00")) && 
   (date <= DateTime.parse("2012-05-21T23:59:59"))) {
} 
```

# io - 重负载下IO性能差

> ID：10684366
> 
> 赞同：0
> 
> 时间：2012-05-21T11:28:29.953
> 
> 标签：io, filesystems, linux-kernel

看来我的 Linux IO 性能有问题。使用一个项目我需要`clear`从内核空间中完整的文件。我使用以下代码模式：

```
for_each_mapping_page(mapping, index) {
    page = read_mapping_page(mapping, index);
    lock_page(page);
    { kmap // memset // kunmap }
    set_page_dirty(page);
    write_one_page(page, 1);
    page_cache_release(page);
    cond_resched();
} 
```

一切正常，但对于大文件（对我来说约为 3Gb+）我发现我的系统以一种奇怪的方式停止：虽然此操作未完成，但我无法运行任何东西。换句话说，在此操作之前存在的所有进程都运行良好，但是如果我在此操作期间尝试运行某些东西，在它完成之前我什么也看不到。

是内核的 IO 调度问题还是我错过了什么？我该如何解决这个问题？

谢谢。

升级版：

根据 Kristof 的建议，我重新编写了代码，现在看起来像这样：

```
headIndex = soff >> PAGE_CACHE_SHIFT;
tailIndex = eoff >> PAGE_CACHE_SHIFT;

/**
 * doing the exact @headIndex .. @tailIndex range
 */

for (index = headIndex; index < tailIndex; index += nr_pages) {
    nr_pages = min_t(int, ARRAY_SIZE(pages), tailIndex - index);

    for (i = 0; i < nr_pages; i++) {
        pages[i] = read_mapping_page(mapping, index + i, NULL);
        if (IS_ERR(pages[i])) {
            while (i--)
                page_cache_release(pages[i]);
            goto return_result;
        }
    }

    for (i = 0; i < nr_pages; i++)
        zero_page_atomic(pages[i]);

    result = filemap_write_and_wait_range(mapping, index << PAGE_CACHE_SHIFT,
                          ((index + nr_pages) << PAGE_CACHE_SHIFT) - 1);

    for (i = 0; i < nr_pages; i++)
        page_cache_release(pages[i]);

    if (result)
        goto return_result;

    if (fatal_signal_pending(current))
        goto return_result;

    cond_resched();
} 
```

结果，我获得了更好的 IO 性能，但是在导致操作的同一用户中进行并发磁盘访问时，仍然存在大量 IO 活动的问题。

无论如何，感谢您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T15:03:33.000

本质上，您完全绕过了内核 IO 调度程序。

如果您查看 ext2 实现，您会看到它 never (well ok, once) calls `write_one_page()`。对于大规模数据传输，它`mpage_writepages()`改为使用。

这使用块 I/O 接口，而不是立即访问硬件。这意味着它通过 IO 调度程序。大型操作不会阻塞整个系统，因为调度程序会自动确保其他操作与大型写入交错。

# download - 文件未完全下载

> ID：10684367
> 
> 赞同：0
> 
> 时间：2012-05-21T11:28:30.277
> 
> 标签：download, php

我已经编写了下载音频文件的代码。当我尝试通过 PHP 下载超过 50MB 的文件时，它并没有完全下载。它最多下载 45MB。每次我尝试下载时，下载大小从 36MB 到 45MB 不等。

我已将 php.ini 中的配置更改如下：

```
memory_limit 512M
post_max_size 512M
upload_max_filesize 512M 
```

在`phpinfo()`中，在我更改配置后它显示上述值。我仍然有同样的问题。

我使用以下代码下载：

```
<?php
$file = "file to download";
header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename='.basename($file));
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Pragma: public');
header('Content-Length: ' . filesize($file));
readfile($file);
?> 
```

帮我解决这个问题

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:46:19.650

有人对此有想法吗？我使用下载管理器下载文件。当它达到 65% 时，它显示错误消息“数据传输已中断，服务器不支持恢复。只能从头开始下载”..

如何解决这个问题？

# php - 为选择添加标签

> ID：10684368
> 
> 赞同：0
> 
> 时间：2012-05-21T11:28:31.890
> 
> 标签：php, javascript, forms

我正在使用此 Javascript 对所选文本进行以下更改：

```
 function formatText(el,tag){
var selectedText = document.selection?document.selection.createRange().text:el.value.substring(el.selectionStart,el.selectionEnd);// IE:Moz
if (selectedText == "")
{return false}
var newText='"#28'+tag+'"'+selectedText+'"#28'+tag+'"';
if(document.selection){    //IE
document.selection.createRange().text=newText;
}
else{   //Moz
el.value=el.value.substring(0,el.selectionStart)+newText+el.value.substring(el.selectionEnd,el.value.length);
}
} 
```

但是，我希望新标签仅在另一个文本区域中可见，而不是我实际进行选择的区域。在这种情况下，我有 2 个文本区域，一个称为“message_text”，另一个称为“message”……我将在“message_text”中输入和选择文本，但对选择所做的任何更改只能反映在“消息”中文本区域。

目前我已经尝试过这个：

```
<button type="button" value="D" onclick="formatText(message,'D')" class="blue">D</button> 
```

但这仅在我在“消息”文本区域中选择了 anytnin 时才有效。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:10:08.480

您必须扩展 javascript 代码：

```
function formatText(el_from, el_to, tag) {
    var selectedText = document.selection ? document.selection.createRange().text : el_from.value.substring(el_from.selectionStart, el_from.selectionEnd);// IE:Moz

    if (selectedText == "") {
        return false;
    }

    var start_index = el_to.value.indexOf(selectedText);
    var sel_t_len = selectedText.length;
    var copy_selText = el_to.substring(start_index, sel_t_len);

    var newText='"#28'+tag+'"'+copy_selText+'"#28'+tag+'"';

    el_to.value = el_to.value.substring(0, start_index) + newText + el_to.value.substring(sel_t_len, el_to.value.length);
} 
```

然后你可以这样称呼它：

```
<button type="button" value="D" onclick="formatText(document.getElementById('message_text'), document.getElementById('message'),'D')" class="blue">D</button> 
```

PS：我不确定`document.getElementById`- 自从使用 jQuery 以来已经多年没有使用它了......你也应该转换为 jQuery......你不会为 IE 或 FF 或 Chrome 等解决 JS - jQuery 句柄这本身...

**编辑：**好的，我做了一些定制，它应该适合您的需求......

# sql - 如何优化 sql 以读取多棵树？

> ID：10684369
> 
> 赞同：0
> 
> 时间：2012-05-21T11:28:32.030
> 
> 标签：sql, tree, derby

我有一个监视应用程序，它监视可能有子调用的调用。因此，如果我想读取监控数据，我想获取包括子调用在内的调用列表。调用可能会无限嵌套。

--开始编辑
在我当前的测试表中，大约有 700 万个条目。在生产使用中，它可能是两倍的大小。每个根条目的预期子代从 0 到大约 15 个，在极少数情况下可能有大约 50 个子代。层级很低，最高5级左右。

下面是我用我的数据模型读取有限数量的这些条目的方法。如果您对改进数据模型或查询有任何建议，我很乐意听取您的意见。
编辑结束——

基本上，我发现的所有论坛条目都是关于优化从一棵树而不是多棵树的阅读。

目前，我只有一张这样的表：

```
create TABLE montest2
(
   rootId VARCHAR(45) NOT NULL,
   messageId VARCHAR(45) NOT NULL,
   requestMessageId VARCHAR(45),
   sessionId VARCHAR(45),
   PRIMARY KEY (messageID)
); 
```

rootId 对于属于一棵树的所有调用都是相同的。如果 sessionId 有一个值，我们就知道它是一个顶级（根）调用。messageId 对于每个调用都是唯一的。requestMessageId 将包含父母的 messageId。

现在我想阅读前 5 个 root 调用，包括他们的孩子。我可以使用这些语句来做到这一点：

编辑：请注意，我将问题缩小到此查询。我有一个额外的 WHERE 子句用于读取父母，以便我能够选择不同的父母。但是我的测试表明，这些并不是性能问题的原因。（编辑结束）。

1.  读书家长：

    SELECT am.messageId montest2 am (am.sessionID IS NOT null ) 仅前 5 行

2.  读书的孩子：

    SELECT ac.messageId FROM montest2 ac INNER JOIN ( SELECT am.rootID FROM montest2 am WHERE (am.sessionID 不为空) 仅获取前 5 行) 父在 ac.rootID = parents.rootID WHERE (ac.sessionID 为 NULL);

我知道第二个语句对于许多条目来说并不快。谁能给我一些建议如何优化这个查询？或者我应该对我的数据模型进行哪些更改？

PS：我使用 Derby 作为数据库，但它应该适用于任何数据库 - 它只是意味着更改限制（获取前 x 行）语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:57:58.120

我现在已经解决了我的问题如下：

我已将包含所有条目的单个表拆分为两个表。一个表包含树的所有根条目，另一个包含所有子项（以及子项的子项等）。
所以第一个查询是针对根表进行的，第二个查询是针对子表的。因为 children 表现在只有大约四分之一大小，所以查询速度要快得多。
此外，我意识到我的一个索引定义错误，因此它没有生效。当我使用 db2 工具在 db2 数据库上尝试我的问题时，我通过解释意识到了这一点。

所以，我给大家的提示：保持你的表小并使用解释来查看你的索引是否在做他们应该做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:53:44.797

为什么不将连接移到 where 子句中，看看这是否更好？

```
SELECT messageId 
FROM montest2
WHERE rootID in (
         SELECT rootID from montest2 
         WHERE sessionID IS NOT null 
         FIRST 5 ROWS ONLY ) AND 
      sessionID IS NOT null 
```

# jsf-2 - 试图在 JSF 中显示带有 gmap 对象的地图

> ID：10684371
> 
> 赞同：1
> 
> 时间：2012-05-21T11:28:35.180
> 
> 标签：jsf-2

我正在使用 JSF2，我想显示带有对象 gmap 的地图。正如我所看到的，gmap 对象在richfaces 4.x 中不再存在，所以我尝试导入 gmap4jsf.jar 来渲染我的地图......

举个例子，我从 Richfaces 演示中提取了一部分代码：[Richfaces live demo](http://livedemo.exadel.com/richfaces-demo/richfaces/gmap.jsf;jsessionid=0DD8E6A0722E3392981481479E7940BB?c=gmap&tab=usage)

地图显示得很好，但是如果我想使用rich:panel 中的jsf 元素来控制它（更改类型、缩放...），我在Firebug 中收到错误：“地图未定义”... 可以请有人帮我找出问题，因为我没有在其他线程中找到答案......这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:rich="http://richfaces.org/rich"
xmlns:m="http://code.google.com/p/gmaps4jsf/"><h:head><title>JSF 2.0: Ajax Support</title><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="../css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=myPersonnalKeyIsWrittenHere"></script>
<script type="text/javascript"
    src="http://code.jquery.com/jquery-1.7.1.js"></script>

<style>.optionList {height: 30px;}</style></h:head><h:body>
<div id="container">
    <ui:include src="tpl/menu.xhtml" />
    <h1>Gmap4Jsf</h1>
    <div align="center">

        <f:view contentType="text/html">
            <h:panelGrid columns="2">
                <h:form id="mapform" prependId="false">
                    <m:map var="map" mapVar="map" gmapKey="#{gmapBean.gmapkey}" id="map" /> 
                </h:form>
                <h:panelGroup>
                    <h:form>

                        <rich:tabPanel switchType="ajax" width="350" height="400">
                            <rich:tab label="Using Google Map API">
                                <h:panelGrid columns="2" columnClasses="optionList">
                                    <h:outputText value="Controls:" />
                                    <h:panelGroup>
                                        <a href="javascript: void 0" onclick="map.hideControls()">Hide</a>
                                        <a href="javascript: void 0" onclick="map.showControls()">Show</a>
                                        <br />
                                    </h:panelGroup>

                                    <h:outputText value="Zoom:" />
                                    <rich:inputNumberSlider id="zoom" showInput="false"
                                        minValue="1" maxValue="18" value="#{gmapBean.zoom}"
                                        onchange="map.setZoom(this.value)" />

                                    <h:outputText value="Map Type:" />
                                    <h:panelGroup>
                                        <a href="javascript: void 0"
                                            onclick="map.setMapType(G_NORMAL_MAP)">Normal</a>
                                        <a href="javascript: void 0"
                                            onclick="map.setMapType(G_SATELLITE_MAP)">Satellite</a>
                                        <a href="javascript: void 0"
                                            onclick="map.setMapType(G_HYBRID_MAP)">Hybrid</a>
                                        <br />
                                    </h:panelGroup>

                                </h:panelGrid>
                            </rich:tab>

                            <rich:tab label="Using Ajax with JSON">
                                <rich:dataGrid var="place" value="#{gmapBean.point}"
                                    columns="2">
                                    <h:graphicImage onclick="showPlace('#{place.id}')"
                                        style="cursor:pointer" value="resource://#{place.pic}" />
                                </rich:dataGrid>
                            </rich:tab>
                        </rich:tabPanel>
                    </h:form>
                </h:panelGroup>
            </h:panelGrid>
        </f:view>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:32:41.910

好吧我发现了...

我必须定义由 JSF 生成的 Javascript 变量的名称。所以，我只是将属性“jsVariable”添加到我的 gmap 元素中。

```
<m:map jsVariable="map" var="map" mapVar="map" gmapKey="#{gmapBean.gmapkey}" id="map" /> 
```

再见

# epplus - 使用 EPPlus 在 Excel 中删除/清除注释

> ID：10684372
> 
> 赞同：2
> 
> 时间：2012-05-21T11:28:42.763
> 
> 标签：epplus

我在使用 EPPlus 处理 Excel 文档中的注释时遇到了一些问题。我可以添加评论并删除它们，但有时它并不成功。

我正在使用注释来显示处理 Excel 文件的结果中的验证消息，当重新处理此文件时，我想在再次运行验证之前清除所有现有注释。

我目前清除评论的方法是这样的：

```
 _sheet.Cells.Style.Fill.PatternType = ExcelFillStyle.None;
  while (_sheet.Comments.Count > 0)
  {
      // Note: not using _sheet.Comments.RemoveAt(0) since this can throw [Exception: Key does not exist] OfficeOpenXml.RangeCollection.Delete(UInt64 key) 
      _sheet.Comments.RemoveAt(_sheet.Comments.Count - 1);
  } 
```

这似乎可以很好地清除它们。但是当我尝试添加如下评论时：

```
 const string author = "...";
  cell.Style.Fill.PatternType = ExcelFillStyle.Solid;
  cell.Style.Fill.BackgroundColor.SetColor(Color.LemonChiffon);
  if (cell.Comment == null)
  {
      cell.AddComment(message, author);
  }
  else
  {
      cell.Comment.Text = message;
      cell.Comment.Author = author;
  } 
```

其中单元格是特定单元格的 ExcelRange 实例，我得到以下堆栈跟踪：

```
System.NullReferenceException : Object reference not set to an instance of an object.
at OfficeOpenXml.Drawing.Vml.ExcelVmlDrawingCommentCollection.AddDrawing(ExcelRangeBase cell)
at OfficeOpenXml.Drawing.Vml.ExcelVmlDrawingCommentCollection.Add(ExcelRangeBase cell)
at OfficeOpenXml.ExcelComment..ctor(XmlNamespaceManager ns, XmlNode commentTopNode, ExcelRangeBase cell)
at OfficeOpenXml.ExcelCommentCollection.Add(ExcelRangeBase cell, String Text, String author)
at OfficeOpenXml.ExcelRangeBase.Set_Comment(Object value, Int32 row, Int32 col)
at OfficeOpenXml.ExcelRangeBase.SetSingle(_setValue valueMethod, Object value)
at OfficeOpenXml.ExcelRangeBase.AddComment(String Text, String Author) 
```

谁能帮我这个？我究竟做错了什么？

谢谢，

詹姆士

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T08:35:44.707

我就此事联系了 Jan Kallman，结果发现这是 VML 图纸未排序的错误，并已在库的补丁/[提交 5027f556c029](http://epplus.codeplex.com/SourceControl/changeset/changes/5027f556c029)中修复。

# windows-ce - 是否有适用于 windows ce 的 md5 校验和生成器

> ID：10684374
> 
> 赞同：1
> 
> 时间：2012-05-21T11:28:50.273
> 
> 标签：windows-ce, md5

我需要一个用于 windows ce 的命令行工具来从目录递归地生成 md5 校验和，并最好生成一个 xml 文件作为结果。

有人知道这样的工具吗？我已经搜索了整个互联网，包括这个页面，但找不到一个。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T17:15:33.353

使用 RAPI 工具中的 dump.exe。在这里获取：http: [//itsme.home.xs4all.nl/projects/xda/tools.html](http://itsme.home.xs4all.nl/projects/xda/tools.html)。从他们的页面引用：

> 使用 -md5、-sha1、-sha256、-crc 或 -sum 选项，您可以使用 dump.exe 计算文件特定区域的校验和、crc 或哈希

# jquery - 确保在keyup事件上过滤jquery中的可打印字符

> ID：10684375
> 
> 赞同：2
> 
> 时间：2012-05-21T11:28:51.170
> 
> 标签：jquery, key, keyup

如何确保用户在 jquery 中按下“可打印”字符？

我试试这个，但它不起作用

```
$("#foo").keyup(function (e) {
    if (e.charCode) {
        console.debug('this is printable char');
    }
}); 
```

我只想要数字、AZ az 字符以及“è,$,%”等，但不想要箭头、输入、f5 等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:31:12.217

尝试：

```
$("#foo").keyup(function (e) {
    if (e.which < 0x20) {
        console.debug('this is not printable char');
        return;
    }
    else {
        console.debug('this is printable char');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:31:15.267

```
<script type="text/javascript">
    $("input").keypress(function (e) {
        if (e.which !== 0 && e.charCode !== 0) {
            alert(String.fromCharCode(e.keyCode|e.charCode));
        }
    });
</script> 
```

似乎拖曳与 jQuery 1.4.2、FF、IE、Chrome 一起工作得很好。

要深入研究 JS 键盘事件处理的混乱，请参阅： [JavaScript Madness: Keyboard Events](http://unixpapa.com/js/key.html)

[礼貌](https://stackoverflow.com/questions/2284844/jquery-how-to-filter-out-non-character-keys-on-keypress-event/2291807#2291807)

# android - 来自mp3的专辑封面

> ID：10684377
> 
> 赞同：0
> 
> 时间：2012-05-21T11:29:06.490
> 
> 标签：android

我设法从我的 mp3 文件（在 sdcard 上）读取专辑插图，但图片比活动大。如何将图片缩小（压缩）到 150x150 像素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:32:32.223

您可以使用“fitXY”来缩放 ImageView：

```
<ImageView android:layout_width="150dp" 
           android:layout_height="150dp"
           android:scaleType="fitXY" /> 
```

您可以通过编程方式设置 ImageView 的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:39:24.420

下面的代码可以解决问题；）

```
public static Bitmap decodeFile(File f, boolean goodQuality){
        try {
            //Decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f),null,o);

            //The new size we want to scale to
            final int REQUIRED_SIZE=100;

            //Find the correct scale value. It should be the power of 2.
            int scale=1;
            if(!goodQuality){
                while(o.outWidth/scale/2>=REQUIRED_SIZE && o.outHeight/scale/2>=REQUIRED_SIZE)
                    scale*=2;
            }
            //Decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize=scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        } catch (FileNotFoundException e) {}
        return null;
    } 
```

# c - mmap 是内置函数吗？

> ID：10684381
> 
> 赞同：3
> 
> 时间：2012-05-21T11:29:21.017
> 
> 标签：c, linux, gcc, gdb, glibc

我知道*mmap*是一个系统调用，但是 glibc 中必须有一些包装器来执行系统调用。然而，当我尝试使用*gdb*在我的程序中单步执行*mmap*函数时，*gdb*会忽略它，因为它找不到任何源文件（注意我从源代码编译了我自己的 glibc）。我可以单步执行其他 glibc 库函数，例如*printf*和*malloc*但不是*mmap*。我还使用标志*-fno-builtin*以便 gcc 不使用内置函数。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T19:20:40.327

我不知道你的问题是什么。它对我来说非常好。

使用 system `libc.so.6`，安装调试符号：

```
// mmap.c
#include <sys/mman.h>

int main()
{
  void *p = mmap(0, 4096, PROT_READ, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0);
  return 0;
}

gcc -g mmap.c

$ gdb -q a.out
Reading symbols from /tmp/a.out...done.
(gdb) start
Temporary breakpoint 1 at 0x40052c: file mmap.c, line 5.

Temporary breakpoint 1, main () at mmap.c:5
5         void *p = mmap(0, 4096, PROT_READ, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0);
(gdb) step
mmap64 () at ../sysdeps/unix/syscall-template.S:82
82      ../sysdeps/unix/syscall-template.S: No such file or directory.
(gdb) 
mmap64 () at ../sysdeps/unix/syscall-template.S:83
83      in ../sysdeps/unix/syscall-template.S
(gdb) 
main () at mmap.c:6
6         return 0;
(gdb) q 
```

使用我自己的 glibc 构建：

```
gdb -q a.out
Reading symbols from /tmp/a.out...done.
(gdb) start
Temporary breakpoint 1 at 0x40056c: file mmap.c, line 5.
warning: Could not load shared library symbols for linux-vdso.so.1.
Do you need "set solib-search-path" or "set sysroot"?

Temporary breakpoint 1, main () at mmap.c:5
5         void *p = mmap(0, 4096, PROT_READ, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0);
(gdb) step
mmap64 () at ../sysdeps/unix/syscall-template.S:81
81      T_PSEUDO (SYSCALL_SYMBOL, SYSCALL_NAME, SYSCALL_NARGS)
(gdb) 
mmap64 () at ../sysdeps/unix/syscall-template.S:82
82              ret
(gdb) 
main () at mmap.c:6
6         return 0;
(gdb) q 
```

# asp.net-mvc - 有哪些方法可以将 ASP.NET 应用程序部署到多个 EC2 实例？

> ID：10684383
> 
> 赞同：4
> 
> 时间：2012-05-21T11:29:35.517
> 
> 标签：asp.net-mvc, amazon-ec2, amazon-web-services

我创建了一个 EC2 实例（称为 A），并想在其上测试开源的 NerdDinner。

在为我的数据库创建了 RDS 实例并创建了一个数据库之后，如何将我的 NerdDinner 部署到 A 实例？

之后，我想创建另外两个 EC2 实例（B，C），它们可以使用相同的数据库运行相同的应用程序。这就是负载平衡所做的吗？

如果我更新应用程序，是否每次都必须在三个实例（A、B、C）上部署应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T21:30:22.200

如果您不想处理负载均衡器配置和手动部署，您应该查看[AppHarbor](https://appharbor.com/)，它会为您自动完成所有这些工作。

（披露：我是[AppHarbor](https://appharbor.com/)的联合创始人）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T19:17:45.010

Amazon Elastic Beanstalk 将为您完成所有这些工作。甚至还有以 Nerd Dinner 应用程序为例的示例文档！

[弹性 Beanstalk .NET](http://aws.typepad.com/aws/2012/05/net-support-for-aws-elastic-beanstalk-amazon-rds-for-sql-server-.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-04T19:42:02.680

您可以尝试新的云部署工具[Appveyor](http://www.appveyor.com)。它将为您的数据库编写脚本并将其部署到动态创建的 EC2 实例。您可以使用 Appveyor 为 Web 创建新的 EC2 实例并使用相同的数据库实例。

免责声明：我是 Appveyor 开发人员。

# c# - 拦截 Web 服务请求的 HTML 消息或登录页面

> ID：10684384
> 
> 赞同：1
> 
> 时间：2012-05-21T11:29:36.663
> 
> 标签：c#, windows-phone-7, response, webclient

我正忙于开发从 Web 服务检索数据的移动应用程序。当然，一切都运行良好，我得到了我需要的一切，我可以毫不费力地使用这些服务......在模拟器上。

但是，当我转而在设备上测试此应用程序时，我并没有取回我期望的数据，而是返回了一个网站。我该怎么处理这个？

目前我正在使用它来调用我的服务：（使用 system.net - 我不知道这是否是我应该在 windows phone 7 上使用的）

```
WebClient proxy = new WebClient();
string strURI = "http://www.google.co.za";
proxy.OpenReadCompleted +=
        new OpenReadCompletedEventHandler(proxy_openreadcompleted);
proxy.OpenReadAsync(new Uri(strURI)); 
```

请注意：我并不是真的打电话给谷歌，这只是一个例子。所以无论如何我希望我的 JSON 会被返回，而不是我从服务提供商那里收到一条消息以更改移动选项......我可以将它放入隔离存储并使用浏览器呈现它，但是我不知道来源是什么消息的内容是，当您单击一个按钮时，表单使用相对 URL，因此它没有做它打算做的事情，我只是看看它试图调用什么。

反正有没有得到响应的来源？我正在寻找像[http://vodafonelive.mobi/](http://vodafonelive.mobi/)这样的来源或类似的东西。如果有人能告诉我该怎么做，我将不胜感激，我目前的想法是，如果我能确定来源，我可以创建一个 webbrowser 任务，这样我的应用程序就不需要处理这个，但是......因为我在打电话一个特定的来源我不知道如何确定响应的来源。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T16:23:18.277

这很可能是由于模拟器和设备的用户代理不同。检查发送的内容或明确设置它以确保 2 的行为方式相同。确保服务器不会尝试重定向到其他位置。

或者，它可能是移动运营商代理“有帮助”并调整通过其网络的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T08:43:37.220

好的，所以在花了一些时间之后，我终于找到了一种方法，可以通过使用另一种方法调用服务来获取响应 uri（响应来自哪里）：

所以基本上这是电话：

```
WebRequest request = HttpWebRequest.Create(strURI);
var result = (IAsyncResult)request.BeginGetResponse(ResponseCallback, request); 
```

所以在函数 ResponseCallBack 函数中我做了这样的事情：

```
WebRequest request = (HttpWebRequest)result.AsyncState;
WebResponse response = request.EndGetResponse(result); 
```

然后，我可以检查响应 uri（截获消息的来源）并让本机浏览器处理我没想到的 html。

```
WebBrowserTask webBrowserTask = new WebBrowserTask();
webBrowserTask.Uri = response.ResponseUri; 
```

不过感谢您的帮助，希望这对有类似问题的人有所帮助。

# facebook - 在“喜欢”帖子后邀请用户进行推广

> ID：10684387
> 
> 赞同：0
> 
> 时间：2012-05-21T11:29:41.713
> 
> 标签：facebook, policy

我们的应用程序会向喜欢帖子的用户发送自定义邀请以加入 FB 促销活动。然后，用户可以通过点击促销链接来决定他是否想参与。只要用户没有被激励来点赞帖子并且可以在不点赞帖子的情况下访问促销活动，我们就符合下面的 FB 平台政策，对吗？

1.您不得激励用户使用 Facebook 社交渠道（或在使用后屏蔽内容），或暗示激励与使用我们的渠道直接相关。

提前谢谢了！弗洛里安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:35:47.417

我不确定它是否违反了 TOS，但有一些超级简单的 javascript 可以使这项工作

```
 FB.Event.subscribe('edge.create', function(href, widget) {
    alert('You just liked the page!'); //Invite the user to promotion
  }); 
```

编辑：是的，在这种情况下，[在 facebook 上鼓励喜欢是可以的。](https://www.facebook.com/help/?faq=222089304469115#Is-incentivizing-Liking-an-app-allowed?)

# html - 我可以强制文本打印为白色吗？

> ID：10684392
> 
> 赞同：28
> 
> 时间：2012-05-21T11:30:00.547
> 
> 标签：html, css

假设我有一些文本显示在图像或其他一些可打印的颜色上。打印时是否可以将此文本强制为白色？在大多数浏览器中，默认行为是强制将白色变为黑色或灰色。当您在删除了背景颜色/图像的容器中打印文本时，这显然是有意义的，但在您将文本覆盖在图像上的情况下强制文本是没有意义的。

我可能应该提一下，我非常了解打印样式表，碰巧无论在 IE/chrome/firefox 中设置字体颜色如何，字体都不会显示为白色。根据浏览器的不同，它最终会变成黑色或灰色。如果您认为实际上可行，请在图像上显示白色文本的示例。

为了说明见：

[http://jsfiddle.net/NSwYE/](http://jsfiddle.net/NSwYE/)

我个人认为这是不可能的，因为印刷的方式。还是挺烦人的。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-23T19:43:12.920

## 这并不完全由网页作者控制。

例如，[这个小提琴](http://jsfiddle.net/Y3HFm/3/)将在三个黑色背景中的任何一个上打印（至少在戴尔 1720 激光打印机上对我来说是这样）白色文本

## IE9

***如果******用户***选中了旁边的框：

> 工具 -> 打印 -> 页面设置 -> “打印背景颜色和图像”

如果未选中该框，则它根本不会在前两个上打印黑色，但会在最后一个上打印（因为它是一个`img`标签），但它会将文本打印为灰色，即使在`img`标签上也是如此。因此，“打印背景颜色和图像”的设置似乎会影响浏览器解释文本的方式，如果选中则允许真正的白色（剔除效果），但如果未选中则不会。

## 火狐

在此处找到的复选框（似乎有效）：

> 文件 -> 页面设置 -> “打印背景（颜色和图像）”

## 对于铬？网页作者受控制？

我还没有验证[这篇文章中的信息是否会这样做（在](https://stackoverflow.com/questions/8768717/css-media-type-print-using-background-color-in-chrome)[我的下一个小提琴](http://jsfiddle.net/Y3HFm/4/)中它对我不起作用，但可能是因为它在 iframe 中）。对于应该在 Chrome 中打印的元素，请尝试设置：

```
-webkit-print-color-adjust: exact; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-08-11T13:19:31.097

标记的答案是错误的。**您可以在每个浏览器中控制文本颜色！**您只需要在 svg 中输出文本。浏览器不会改变 svg 中的颜色。这是一个例子：

```
<svg height="40" width="200">
   <text font-size="28px" y="25" x="30" fill="#ffffff" >
   Some text
   </text>
</svg> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-21T11:32:57.793

`print.css`会帮助你的，Eric meyer 有一篇关于它的[帖子。](http://meyerweb.com/eric/articles/webrev/200001.html)

例如[html5boilerplate在](http://html5boilerplate.com/)[他的 css](https://github.com/h5bp/html5-boilerplate/blob/master/css/style.css)上使用这种样式：

```
@media print {
  * { background: transparent !important; color: black !important; box-shadow:none !important; text-shadow: none !important; } /* Black prints faster: h5bp.com/s */
  a, a:visited { text-decoration: underline; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; } /* Don't show links for images, or javascript/internal links */
  pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }
  thead { display: table-header-group; } /* h5bp.com/t */
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page { margin: 0.5cm; }
  p, h2, h3 { orphans: 3; widows: 3; }
  h2, h3 { page-break-after: avoid; }
} 
```

**更新：**

使用您的示例 html：

```
<img src="http://www.clipart.dk.co.uk/DKImages/Halloween/image_halloween002.jpg" alt="black cat">
<div id="sometext">Cat</div> 
```

和我的CSS：

```
#sometext {
    position: absolute;
    top: 125px;
    left: 220px;
    color: #FFF; 
}

@media only print {

#sometext {
    color: #FFF !important;
    /* actually trick with white text-shadow not work ( */
    text-shadow: 0 0 3px #FFF !important;
}

} 
```

我得到[了这个演示](http://jsfiddle.net/matmuchrapna/NSwYE/5/embedded/result/)。这是一个可接受的解决方案吗？

![在此处输入图像描述](../Images/b493539676c4dd3b66f48f6a6c9b4fc6.png) ​</p>

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-04-23T14:12:26.437

**解决方案：**

```
 @media print {
      h1 {
        color: rgba(0, 0, 0, 0);
        text-shadow: 0 0 0 #fff;
      }

      @media print and (-webkit-min-device-pixel-ratio:0) {
        h1 {
          color: #fff;
          -webkit-print-color-adjust: exact;
        }
      }
   } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-23T19:57:19.217

示例[http://jsfiddle.net/NSwYE/](http://jsfiddle.net/NSwYE/)为我在猫的顶部打印白色文本。但我使用的是 Firefox 3.6 和 Brother 激光打印机。

**打印机的行为完全取决于打印机驱动程序和应用程序。**我的打印机将使用 Firefox 正确打印示例。它将正确地从 Microsoft Publisher 打印灰度文本。它不会在 Microsoft Word 中打印灰度文本：文本始终为黑色。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-21T11:32:03.040

可能，如果您使用打印特定样式表来设置它的样式。

例如

```
<link href="print.css" rel="stylesheet" media="print" /> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-14T21:34:03.567

这可能有点矫枉过正，但如果这是您反复需要的东西，您可以考虑使用画布或 SVG 生成内容（Raphael.js 将提供 IE 支持）。画布和 SVG/VML 元素都将在主要浏览器中以准确的颜色打印。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-11-29T15:19:37.587

```
/* Text color */
.element
{
   color:transparent; 
   text-shadow:0 0 0 #fff; 
}

/* Background color */
.element
{
   box-shadow:0 0 0 1000px #000 inset; 
} 
```

在 Internet Explorer 中，您需要启用后台打印。在 Chrome 70、Firefox 60（禁用后台打印也可以）和 IE11 中测试。

它不需要计算 SVG 宽度，因为没有使用 SVG。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2021-12-29T14:51:30.140

尝试向 css 添加一个 !important 属性以使其正确打印，例如“color: white !important”

# php - 如何在 PHP 中检索 -> 查看 -> 删除文件？

> ID：10684394
> 
> 赞同：0
> 
> 时间：2012-05-21T11:30:10.587
> 
> 标签：php, download, flush

这是一个从服务器检索文件（例如 .doc）的代码，将其存储在临时文件夹中，然后使用 api（例如 google 查看器）显示它，然后将其删除。

```
<?php 
$body = "....."; //data from imap server
$name = "abc.doc";

$file = fopen("temp/" . $name,'w'); 
fwrite($file,$body); 
fclose($file); 
$url = rawurlencode("http://www.xxx.com/temp/".$name); 
// I do not have a direct url to the file on the imap server, thus have to store it in a temporary folder

echo "<iframe src=\"http://docs.google.com/viewer?url={$url}&embedded=true\" width=\"100%\" height=\"100%\" style=\"border: none;\"></iframe>";

unlink("temp/".$name);
?> 
```

现在的问题是，由于 php 脚本首先执行自身，然后回显缓冲区，谷歌查看器无法找到该文件，因为它已经被删除。使用 flush() 也无济于事。

一种解决方法是删除“取消链接”命令并创建一个 cron-job 以删除临时文件夹中的所有文件（例如每 2 分钟后）。有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:03:00.730

我会链接到

```
echo "<iframe src=\"http://docs.google.com/viewer?url="http://www.domain.com/viewthis.php?name=abc.doc&embedded=true\" width=\"100%\" height=\"100%\" style=\"border: none;\"></iframe>"; 
```

然后让 viewthis.php 流式传输文件......然后一旦它被送达，你就可以删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:38:58.587

我假设（查看第 2 行的评论）您正在尝试查看邮件附件。您可以做的是动态创建一个文件 url 供 google 查找文件。你要做的是创建一个脚本，比如“view_file.php”，它加载/下载文件并将文件推回，并带有一些自定义标题来告诉“浏览器”（谷歌）它是什么类型的文件。这样，您不必保存文件。缺点是文件总是可以从外部访问，所以你仍然应该设置一个计时器或类似的东西。

对于图像，您可以执行以下操作：

```
$im = file_get_contents('http://www.site.com/url_to_your_image'); // or any other function to retrieve the image data itself
header('content-type: image/gif'); 
echo $im; 
```

对于任何其他文件，只需更改内容类型标头即可。

# python - 处理器 ID Python 3

> ID：10684397
> 
> 赞同：1
> 
> 时间：2012-05-21T11:30:22.713
> 
> 标签：python, windows, python-3.x, processor

我想知道我在 Python 3.2 中的处理器 ID。所以，谷歌说我应该使用 WMI，但它只适用于 2.* 版本。还有其他方法可以解决这个问题吗？

我的操作系统是 Windows。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T12:06:38.620

您可以使用原生模块，例如[pycpuid](http://www.bramz.net/projects-code/pycpuid/)或[cpuidpy](http://code.google.com/p/cpuidpy/)。

或者，使用支持 Python 3.2的[Python WMI 模块。](http://timgolden.me.uk/python/wmi/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T21:19:18.447

Python 3.2，Windows 7：

```
>>> import os
>>> os.environ['PROCESSOR_IDENTIFIER']
'x86 Family 6 Model 37 Stepping 5, GenuineIntel' 
```

# c# - 复制/恢复 - mongo db

> ID：10684401
> 
> 赞同：1
> 
> 时间：2012-05-21T11:30:46.787
> 
> 标签：c#, mongodb, nosql

我是 mongo db 的新手。我从我的客户那里得到了一个 Web 应用程序和“数据”文件夹。在数据文件夹中，有很多文件夹。我安装了 mongo db 并创建了一个测试数据库。如果我想使用我从客户那里获得的数据，我是否必须复制和粘贴这些文件，或者我必须创建这些数据库并使用导入选项。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T15:40:22.940

听起来您从客户端获得的文件是 mongodb 数据文件。如果是这种情况，您应该能够按原样使用这些数据文件启动 mongod。为此，首先您应该关闭正在运行的 mongod 并删除其现有的数据文件（默认位于 /data/db）。然后你可以将你从客户端得到的数据文件复制到mongod正在使用的数据目录中，然后重新启动它。

此外，您可能需要也可能不需要包含 --directoryperdb 标志，具体取决于您收到的数据文件的结构。你说在你得到的数据文件夹中有几个子文件夹。每个子文件夹是否仅包含与文件夹同名的文件，后跟 . 或.ns？如果是这样，那么每个数据库的数据文件都有一个文件夹，并且应该以 --directoryperdb 标志开头。如果没有，您将拥有一个文件夹，其中包含 .ns 和 . 多个 dbname 的文件，则不应使用 --directoryperdb 标志。

# javascript - HTML5 getUserStream 直播

> ID：10684402
> 
> 赞同：4
> 
> 时间：2012-05-21T11:30:51.777
> 
> 标签：javascript, flash, html, video-streaming, rtmp

下午好。我需要为视频会议编写一个 Web 应用程序，但我不想使用 Flash 或桌面应用程序。听众课程，客户端可能是 Flash 播放器，但在我这边，我希望有 html5/js 页面来捕获视频/音频流。

我发现 WebRTC API getUserMedia 和 peerConnection 是一个很好的起点，但是我需要向数百个用户广播视频，这意味着我需要一个服务器来重新限制。关于 RED5 或 Wowza 的一些相似之处，但要使用它们，我需要对视频流进行编码和打包。但是怎么做？是否有返回 getUserMedia 的流的描述？我应该使用什么容器？有没有现成的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:43:57.777

目前任何浏览器都不支持 getUserMedia API，尽管有些浏览器在实验版本中可用。因此，您将无法使用它。

Opera 有一个在[Playing with HTML5 video & getUserMedia support](http://dev.opera.com/articles/view/playing-with-html5-video-and-getusermedia-support/)中使用它的例子。

peerConnection API 也不受支持（并且不完整！）。

# ruby-on-rails - Rails Server 命令返回 CL 错误

> ID：10684404
> 
> 赞同：0
> 
> 时间：2012-05-21T11:30:55.147
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

我正在尝试遵循 Michael Hartl 的 rails 教程，但是每当我发出 rails server 命令时，都会返回以下错误。任何帮助将非常感激。

```
C:\Users\Justin\Documents\rails_projects\first_app>rails server
C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/requirement.rb:81:
in `parse': Illformed requirement ["2.0.0."] (ArgumentError)
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/requi
rement.rb:106:in `block in initialize'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/requi
rement.rb:106:in `map!'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/requi
rement.rb:106:in `initialize'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/requi
rement.rb:44:in `new'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/requi
rement.rb:44:in `create'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/depen
dency.rb:50:in `initialize'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/dependency.rb:28:in `initialize'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/dsl.rb:58:in `new'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/dsl.rb:58:in `gem'
        from C:/Users/Justin/Documents/rails_projects/first_app/Gemfile:25:in `e
valuate'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/dsl.rb:7:in `instance_eval'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/dsl.rb:7:in `evaluate'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/definition.rb:17:in `build'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:22:44.257

格式错误的 gemfile 是正确的，添加了一个额外的 . 在版本“2.0.0”之后。

# asp.net-mvc - 好奇的起始页（ASP.NET 相关）

> ID：10684405
> 
> 赞同：0
> 
> 时间：2012-05-21T11:30:58.480
> 
> 标签：asp.net-mvc, visual-studio

我是网页开发的新手，我的第一个问题总是——我们通常在设计网页时声明一个起始页吗？

有时我在 VS 中构建 Web 应用程序时会感到困惑，我注意到在构建 Web 应用程序时，我们通常无法执行“开始调试”，并且会出现一个新窗口来调试应用程序。相反，我们通常会转到浏览器并键入“起始页”的地址。

我对网页开发相对较新，我一直很好奇我们为什么要这样做以及我们如何轻松地从哪个页面开始？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:37:02.907

您可以指定 Web 应用程序的起始页：

1.  右键单击您的网络应用项目，
2.  选择`properties`,
3.  选择`Web`标签，
4.  单击`specific page`并浏览要开始的页面

此技术还允许您将参数传递到起始页面并在应用程序`querystring`中指定逻辑- 例如`routes``MVC`

*   /Home/User/bobbyGreen <--- 实际页面是 /Views/User/index.aspx
*   /FindUser?id=bobbygreen <---- 在启动时将 id 参数传递给页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:41:31.423

在 Visual Studio IDE 中，如果您正在使用 ASP.NET Web 应用程序/网站，您可以右键单击页面并选择“ `Set as Start page`”。如果是 MVC 项目，则不能这样做。但是您可以转到项目属性并在项目属性的“web”选项卡下进行设置。

# c++ - 两个线程类共享的 Posix pthread_cond_t 不起作用

> ID：10684414
> 
> 赞同：0
> 
> 时间：2012-05-21T11:31:15.803
> 
> 标签：c++, posix

我有两个类评估线程，但我无法将信号从一个发送到另一个，一些想法为什么它不起作用：

第一类：

```
#include "timer.h"
#include <ncurses.h>
#include <stdlib.h>
#include <time.h>
#include <unistd.h>
#include "mutexy.h"

Timer::Timer() {
}

Timer::~Timer() {
}

void Timer::startThread() {
    pthread_create(&thread, NULL, runInstance, reinterpret_cast<void *>(this));
}

void Timer::joinThread() {
    pthread_join(thread, NULL);
}

void Timer::init() {
    this->hh = 0;
    this->day = 1;
    this->month = 1;
    this->year = 2011;
}

void Timer::run() {
    while(true) 
    {
        if(hh==24) {
            hh = 0;
            day++;
            if(day==31) {
                day=1;
                month++;
                if(month==13) {
                    year++;
                    month==1;
                }
            }
        }
        for (int i=0; i<10; i++) {
            if(hh==7) {
                hh=20;
                pthread_cond_signal(&brak_biletow_treshold);
            }
        }

        sleep(1);
        hh++;
        pthread_yield();
    }
}

void* Timer::runInstance(void *instance) {
    Timer *d = reinterpret_cast<Timer *>(instance);

    d->run();

    return NULL;
} 
```

类2：

```
#include "flight_list.h"
#include <ncurses.h>
#include <stdlib.h>
#include <time.h>
#include <unistd.h>
#include "mutexy.h"

string cities[8] = {"Warszawa","Berlin","Paryz","Londyn","Dublin","Madryt","Wieden","Moskwa"};

FlightList::FlightList() {
    srand(time(NULL));
}

FlightList::~FlightList() {
}

void FlightList::startThread() {
    pthread_create(&thread, NULL, runInstance, reinterpret_cast<void *>(this));
}

void FlightList::joinThread() {
    pthread_join(thread, NULL);
}

void FlightList::init() {
    flightTab = new Flight *[10];
    for (int i=0; i<10; i++) {
        int city = rand()%7+1;
        flightTab[i] = new Flight(i*2+2,i+2,1,2011,60,cities[0],cities[city]); 
    }
}

void FlightList::run() {
    while(true) 
    {
        pthread_mutex_lock(&bilety_mutex);
        pthread_cond_wait(&brak_biletow_treshold, &bilety_mutex);
        for (int i=0; i<10; i++) {
                for(int i=0; i<9; i++)
                    flightTab[i] = flightTab[i+1];
                int city = rand()%7+1;
                flightTab[9] = new Flight(4,10,2,2011,60,cities[0],cities[city]); 

        }
        pthread_mutex_unlock(&bilety_mutex);
        pthread_yield();
    }
}

void* FlightList::runInstance(void *instance) {
    FlightList *d = reinterpret_cast<FlightList *>(instance);

    d->run();

    return NULL;
} 
```

以及带有互斥锁和 cond_t 的头文件：

```
#include <pthread.h>

static pthread_mutex_t bilety_mutex;
static pthread_mutex_t loty_mutex;
static pthread_cond_t brak_biletow_treshold = PTHREAD_COND_INITIALIZER 
```

;

互斥锁正在工作，但线程没有接收到信号：S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:37:28.053

每个翻译单元都有自己的`brak_biletow_treshold`实例，因为您已经声明了它们`static`（这实际上将范围限制为当前翻译单元）。

您需要更改声明和访问“全局变量”的方式。我建议您将条件传递给两个类的构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T11:37:50.700

这是因为每个包含头文件的 C 源文件都有*自己*的静态变量副本。它们不在翻译单元之间共享。

互斥锁*似乎*只起作用，因为它们在这种情况下的作用是不相互影响。对于互斥体，它看起来一直工作到您的数据被破坏的地步。

对于条件变量，分离意味着它看起来*不像*在工作，实际上它不是。

`extern`一种解决方案是在头文件*声明*中标记它们并在某个 C 文件中*定义它们，例如：*

```
my_thread_stuff.h:
    extern pthread_mutex_t bilety_mutex;
    extern pthread_mutex_t loty_mutex;
    extern pthread_cond_t brak_biletow_treshold;

global_thread_stuff.c:
    #include "my_thread_stuff.h"
    pthread_mutex_t bilety_mutex;
    pthread_mutex_t loty_mutex;
    pthread_cond_t brak_biletow_treshold = PTHREAD_COND_INITIALIZER; 
```

# c# - 如何使用 C# 语言在 Monotouch 中的两个 UITableView 之间拖放

> ID：10684416
> 
> 赞同：0
> 
> 时间：2012-05-21T11:31:26.267
> 
> 标签：c#, drag-and-drop, xamarin.ios

我在使用 C# 的 Monotouch 应用程序中有两个 UItableViews。我想将一行从一个 uitableview 拖放到另一个 tableview。我怎样才能做到这一点。请回复我.... 注意：我使用的语言是 C#。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:41:26.043

我知道这不是你的期望，但我想给出一些想法！！！

我对 Mono touch 没有任何了解，但请查看下面的链接以拖放图像可能会为您的问题提供一些想法

[http://marcusfollrud.net/2009/09/23/monotouch-how-to-drag-and-drop-image/](http://marcusfollrud.net/2009/09/23/monotouch-how-to-drag-and-drop-image/)

并检查以下链接以创建一些 customUitableview

[http://www.alexyork.net/blog/2011/07/18/creating-custom-uitableviewcells-with-monotouch-the-correct-way/](http://www.alexyork.net/blog/2011/07/18/creating-custom-uitableviewcells-with-monotouch-the-correct-way/)

[http://www.infoq.com/articles/monotouch-custom-tables](http://www.infoq.com/articles/monotouch-custom-tables)

**下面的链接代码是在 Xcode 中开发的，看看它并理解它**

[ipad：将 UITableViewCell 从一个 UITableViewController 拖放到另一个](https://stackoverflow.com/questions/6506946/ipad-drag-a-uitableviewcell-from-one-uitableviewcontroller-and-drop-it-into-ano/6572871#6572871)

基兰

# ruby - 使用 Sinatra 无法刷新 Sprockets

> ID：10684417
> 
> 赞同：1
> 
> 时间：2012-05-21T11:31:31.523
> 
> 标签：ruby, sinatra, sprockets

我正在使用我的 Sinatra 应用程序中的 Sprockets。我有以下设置：

```
set :sprockets, Sprockets::Environment.new(root) { |env|
      env.append_path(root.join('app', 'assets', 'stylesheets'))
      env.append_path(root.join('app', 'assets', 'javascripts'))
      env.append_path(root.join('app', 'assets', 'images'))
    } 
```

一切正常，但是当我运行我的应用程序时，CSS 样式不会在我重新启动服务器的情况下更新。有没有办法让这些资产在开发中即时编译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:40:11.220

较新版本的 Sinatra 不会在请求之间[重新加载任何内容。](http://www.sinatrarb.com/faq.html#reloading)使用[shot弹枪](https://github.com/rtomayko/shotgun)应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T00:37:34.067

唔。我不知道你为什么会遇到这个问题。[我在https://github.com/jch/sinatra-sprockets](https://github.com/jch/sinatra-sprockets)的基础上也使用了带链轮的 sinatra，并且“它可以正常工作”。所以你可以尝试一下，我认为它也适合你。

# sql - 聚合值和枢轴

> ID：10684420
> 
> 赞同：1
> 
> 时间：2012-05-21T11:31:59.680
> 
> 标签：sql, sql-server, sql-server-2008, tsql, pivot

我正在部分解决这个问题，但遇到了一个绊脚石，我认为可以通过枢轴来解决。

我有以下 SQL 查询，结合了两个临时表变量（可能会将它们更改为临时表，因为我认为性能可能会出现问题，因为它们会被多次命中）：

```
SELECT MeterId, MeterDataOutput.BuildingId, MeterDataOutput.Value, 
            MeterDataOutput.TimeStamp, UtilityId, SnapshotId 
        FROM @MeterDataOutput as MeterDataOutput INNER JOIN @InsertOutput AS InsertOutput 
                ON MeterDataOutput.BuildingId = InsertOutput.BuildingId
                AND MeterDataOutput.[Timestamp] = InsertOutput.[TimeStamp] 
```

这将产生下表：

![第1步](../Images/fca886bd4fd5d471de86610cbec91833.png)

然后，我将查询修改为按 BuildingId、SnapshotId、Timestamp、Utility 分组，并应用 SUM() 函数来聚合 Value 字段（并删除 MeterId，因为它不需要），如下所示：

```
SELECT MeterDataOutput.BuildingId, SUM(MeterDataOutput.Value) AS Value, MeterDataOutput.TimeStamp, UtilityId, SnapshotId 
FROM @MeterDataOutput as MeterDataOutput 
INNER JOIN @InsertOutput AS InsertOutput 
    ON MeterDataOutput.BuildingId = InsertOutput.BuildingId
    AND MeterDataOutput.[Timestamp] = InsertOutput.[TimeStamp]
GROUP BY MeterDataOutput.BuildingId, MeterDataOutput.TimeStamp, UtilityId, SnapshotId 
```

此查询为我提供了下表：

![第2步](../Images/976413f0e62e59b30e9046a84d83c5e1.png)

现在我遇到的问题是将 UtilityId 值转换为列，并将值字段中的值放在每列下。IE：

![我的问题](../Images/8070b1c22858032b2c47e1d3baf9f152.png)

作为参考 buildingId、Timestamp、Snapshot 和 Value 是可变的。UtilityId 值 6 始终为“电力”，7 始终为“燃气”，8 始终为“水”。

我实际上开始掌握 SQL 百灵鸟 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:41:56.817

也许是这样的：

```
SELECT
    pvt.BuildingId,
    pvt.SnapshotId,
    pvt.TimeStamp,
    pvt.[6] AS Electricity,
    pvt.[7] AS Gas,
    pvt.[8] AS Water
FROM
    (
    SELECT 
        MeterDataOutput.BuildingId, 
        MeterDataOutput.Value, 
        MeterDataOutput.TimeStamp, 
        UtilityId, 
        SnapshotId 
    FROM @MeterDataOutput as MeterDataOutput 
    INNER JOIN @InsertOutput AS InsertOutput 
        ON MeterDataOutput.BuildingId = InsertOutput.BuildingId
        AND MeterDataOutput.[Timestamp] = InsertOutput.[TimeStamp]
    ) AS SourceTable
PIVOT
(
    SUM(Value)
    FOR UtilityId IN ([6],[7],[8])
) AS pvt 
```

# expressionengine - 内部标签无法使用 Expression Engine 2 自定义插件解析

> ID：10684434
> 
> 赞同：0
> 
> 时间：2012-05-21T11:33:13.010
> 
> 标签：expressionengine

我写了一个简单的插件，基本上循环了一堆条目。该插件仅用于显示包含特征图像的条目，以及其他一些次要逻辑条件。我的标签的使用看起来像这样：

```
{exp:myentries:withimages channel="mychannel"}
    <!-- This works fine -->
    <h1>{title}</h1>
    <!-- But nested exp:... tags don't seem to parse? -->
    <p>{exp:ce_img:single src="feature_image"}</p> 
{/exp:myentries:withimages} 
```

我打电话

```
return $this->EE->TMPL->parse_variables($this->EE->TMPL->tagdata, $data); 
```

从我的自定义 EE 插件中，数据在那里，但只有嵌套的 {exp:... 标签不想解析。

我已经按照在线用户指南尽可能接近地创建插件，但是我需要一些帮助来解析其他标签？如果我只是输出 {feature_image}，该字段会按预期呈现图像的 src 值。

任何人都可以阐明我做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T08:45:01.883

您想将 parse="inward" 参数放在 {exp:myentries:withimages 标记中，否则模板将尝试在 {feature_image} 设置之前解析 exp:ce_img 调用。

```
{exp:myentries:withimages parse="inward" channel="mychannel"} 
```

parse="inward" 将告诉 EE 在解析标签对中的任何其他标签之前先运行此标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T12:07:38.573

您的代码中有两个重要的拼写错误。

`{exp:ce_img:singe src="feature_image"}`

应该读：

`{exp:ce_img:single src="{feature_image}"}`

如果您的模板中确实存在这些差异，那么我相信就是这样。

# c# - VS 团队测试：使用 Excel 作为数据源的 .Net 单元测试：适配器失败

> ID：10684441
> 
> 赞同：5
> 
> 时间：2012-05-21T11:33:22.057
> 
> 标签：c#, .net, visual-studio-2010, unit-testing

我正在尝试使用 Excel 作为数据源进行单元测试。我收到以下异常。我们如何纠正它？

> 单元测试适配器连接数据源或读取数据失败。有关解决此错误的更多信息，请参阅“数据驱动单元测试故障排除”

* * *

```
 [TestMethod]
  [Owner("Lijo ")]
  [TestProperty("TestCategory", "Developer"), 
      DataSource("Microsoft.ACE.OLEDB.12.0", 
     "Data Source=C:/Sheets/DataSheet.xlsx;Extended Properties=Excel 12.0;",
     "[Sheet1$]", 
     DataAccessMethod.Sequential)]
  public void ChangePasswordTest()
  {

     int a = Convert.ToInt32(TestContext.DataRow[0]); //(int)Column.UserId
     int b = Convert.ToInt32(TestContext.DataRow[1]);
     int expectedResult = Convert.ToInt32(TestContext.DataRow[2]);

     MyClass myObj = new MyClass(1, "P@ssw0rd");
     int actualResult = myObj.GetAdditionResult(a, b);
     Assert.AreEqual<int>(expectedResult, actualResult, "The addition result is incorrect.");

  } 
```

* * *

读数：

1.  [单元测试错误 - 单元测试适配器未能连接到数据源或读取数据](https://stackoverflow.com/questions/2783045/unit-testing-error-the-unit-test-adapter-failed-to-connect-to-the-data-source)

2.  [数据驱动的单元测试问题](https://stackoverflow.com/questions/7548761/data-driven-unit-tests-problem)

3.  [如何为 Visual Studio 测试项目创建启动和清理脚本？](https://stackoverflow.com/questions/2304549/how-to-create-startup-and-cleanup-script-for-visual-studio-test-project)

4.  [MSTEST/Visual Studio 2008 Team Test 如何决定测试方法的执行顺序？](https://stackoverflow.com/questions/288805/how-does-mstest-visual-studio-2008-team-test-decide-test-method-execution-order)

5.  [Visual Studio 2010 Ultimate - 数据生成计划为列设置不正确的数据类型](https://stackoverflow.com/questions/10218072/visual-studio-2010-ultimate-data-generation-plan-setting-incorrect-data-type-f)

6.  [我应该如何对一个简单的 CRUD 类进行单元测试？](https://stackoverflow.com/questions/761462/how-should-i-unit-test-a-simple-crud-class)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T17:41:13.643

我今天淡化了同样的任务。经过一些头痛后，我能够在没有 app.config 的情况下解决：

```
[TestMethod]
[DataSource("System.Data.OleDB",
  @"Provider=Microsoft.ACE.OLEDB.12.0; Data Source=C:\Sheets\DataSheet.xlsx; Extended Properties='Excel 12.0;HDR=yes';",
  "Sheet1$",
  DataAccessMethod.Sequential
)]       
public void ChangePasswordTest()
{
 //Arrange

 //Act

 //Assert

} 
```

如果您在测试项目中使用 excel 文件作为资源，则必须将文件的 Copy to Output Directory 属性设置为`Copy always`或`Copy if newer`。并将`DeploymentItem`属性添加到您的测试中：

```
[TestMethod]
[DataSource("System.Data.OleDB",
  @"Provider=Microsoft.ACE.OLEDB.12.0; Data Source=.\DataSheet.xlsx; Extended Properties='Excel 12.0;HDR=yes';",
  "Sheet1$",
  DataAccessMethod.Sequential
)]       
[DeploymentItem(".\DataSheet.xlsx")]
public void ChangePasswordTest()
{
 //Arrange

 //Act

 //Assert

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T12:55:09.320

自己以不同的方式解决了它。欢迎其他答案。

请参阅：演练：使用配置文件定义数据源 [http://msdn.microsoft.com/en-us/library/ms243192.aspx](http://msdn.microsoft.com/en-us/library/ms243192.aspx)

```
 [TestMethod]
  [DeploymentItem("C:/Sheets/DataSheet.xlsx")]
  [DataSource("MyExcelDataSource")]
  public void ChangePasswordTest()
  {

     int a = Convert.ToInt32(TestContext.DataRow[0]); //(int)Column.UserId
     int b = Convert.ToInt32(TestContext.DataRow[1]);
     int expectedResult = Convert.ToInt32(TestContext.DataRow[2]);

     MyClass myObj = new MyClass(1, "P@ssw0rd");
     int actualResult = myObj.GetAdditionResult(a, b);
     Assert.AreEqual<int>(expectedResult, actualResult, "The addition result is incorrect.");

  } 
```

**应用程序配置**

```
<configuration>

<configSections>

<section name="microsoft.visualstudio.testtools" 
 type="Microsoft.VisualStudio.TestTools.UnitTesting.TestConfigurationSection, Microsoft.VisualStudio.QualityTools.UnitTestFramework, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/>

 </configSections>

 <connectionStrings>

<add name="MyExcelConn" 
     connectionString="Dsn=Excel Files;dbq=C:/Sheets/DataSheet.xlsx;defaultdir=.; driverid=790;maxbuffersize=2048;pagetimeout=5" providerName="System.Data.Odbc" />

 </connectionStrings>

 <microsoft.visualstudio.testtools>

  <dataSources>

      <add name="MyExcelDataSource" 
      connectionString="MyExcelConn" 
      dataTableName="Sheet1$" 
      dataAccessMethod="Sequential"/>

  </dataSources>

</microsoft.visualstudio.testtools>

</configuration> 
```

对于 VS 2010，使用的 TestTools 版本是 Version=10.0.0.0

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-01T14:31:17.600

尽管它与问题不是 100% 相关，而且可能有些微不足道，但我想在这个一般主题上投入两分钱（这是我能找到的最相关的问题）。

在我目前正在进行的项目中，我遇到了做一些简单的数据驱动单元测试的需求（例如，对于给定的测试，可能需要 20 行左右）。我对数据驱动的“框架”的愿望清单是：

1.  在 Visual Studio 测试资源管理器中轻松集成
2.  能够继续使用我现有的键盘快捷键来运行/调试光标所在的测试方法
3.  无需管理外部文件或数据库（即没有“数据源”）
4.  C# 和 Visual Studio 中的“本机”支持，即不需要额外的包

尽管希望 #4，我还是研究了 xUnit 和 NUnit 等外部库。他们似乎解决了愿望 #3，但在愿望 #1 和 #2 方面做得并不好。

由于缺乏简单的解决方案而感到沮丧，我决定自己实现一个非常基本的数据驱动助手：

```
 public static void DataDrivenTest(Action<List<object>> testAction, List<List<object>> dataRows)
    {
        foreach (var dataRow in dataRows)
            testAction(dataRow);
    } 
```

我这样使用它：

```
 [TestMethod]
    public void Unit_Can_Add_Two_Numbers()
    {
        UnitTestUtilities.DataDrivenTest(
            dataRow =>
            {
                // Tests a+b=c
                var a = (int)dataRow[0];
                var b = (int)dataRow[1];
                var c = (int)dataRow[2];
                Assert.AreEqual(a + b, c);
            },
            new List<List<object>>
                {
                    // Rows of arguments a,b,c respectively
                    new List<object>{1,2,3},
                    new List<object>{4,5,9}
                });
    } 
```

虽然它满足了我上面的所有愿望，但它也有缺点：

1.  测试动作定义中需要强制转换（可能可以通过一些通用参数魔术来修复）
2.  更新数据行中参数的顺序意味着操作方法中的访问器也必须更新
3.  显然不适合大型数据驱动的测试（例如，对于超过 20 个测试行，这个助手会很混乱）
4.  显然缺乏“复杂性”，即我确信像 xUnit 这样的库有一些它没有的时髦特性
5.  它将所有行作为一个单元测试运行（即每个数据行没有单独的单元测试和报告）

无论如何，它以一种简单的方式解决了我的基本问题。我希望这可以帮助像我一样寻找简单解决方案的人。毕竟，如果你发现你需要大量的测试行来测试一个方法，那么可能值得考虑进行重构，将被测函数分解成更小的组件（然后与 mocks/fakes、依赖注入等结合使用） ）。

# javascript - 检查输入是否被检查总是返回 true

> ID：10684442
> 
> 赞同：1
> 
> 时间：2012-05-21T11:33:25.380
> 
> 标签：javascript, jquery, forms, checkbox

我正在尝试这样：

```
if($('input:checkbox:checked').length > 0 == false){ 
```

但这总是会返回true，不管是否选中

注意：DOM 中只有一个复选框。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T11:35:08.287

尝试：

```
if(!$("input:checkbox").is(":checked")){
  //not checked
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T11:35:01.240

```
 if(!$('input:checkbox').prop('checked')){ //do stuff 
```

注意：jquery 版本 > 1.6 需要`prop()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T11:37:15.060

```
if($('input[type="checkbox"]:checked').length ==0){ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T12:00:14.767

试试这个

```
if($("input:checkbox").is(":checked")){
      alert('checkbox is checked')
    }
    else
    {
      alert('checkbox is not checked')
    } 
```

如果您的表单中有多个复选框而不是像这样迭代每个复选框

```
$('input:checkbox:checked').each(function () {
      var value = $(this).attr('value');
      alert(value);// it returns on or off, depends on checked or unchecked               
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T12:13:15.853

```
 $.extend($.expr[':'], {
        unchecked: function (obj) {
            return ((obj.type == 'checkbox' || obj.type == 'radio') && !$(obj).is(':checked'));
        }
    });

    if(($('input:unchecked').length > 0)=== false) 
```

# email - 通过电子邮件创建 Asana 任务

> ID：10684445
> 
> 赞同：1
> 
> 时间：2012-05-21T11:33:31.723
> 
> 标签：email, header, task, asana, trello

我想通过电子邮件在[Asana中创建任务。](http://asana.com)我找到[了这个链接](http://help.asana.com/customer/portal/articles/69313)，它描述了如何做到这一点，但创建仅限于“发件人”电子邮件标题。

所以，我的问题是：**“是否可以通过电子邮件创建体式任务，而不是从'发件人'电子邮件标题，而是从其他电子邮件标题？”**

*如果您知道如何在[Trello](https://trello.com/)中执行此操作，不客气。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:44:16.073

*回答“奖励”问题*：
trello 开发板中有一张关于此的卡片。所以这正在讨论......
见[https://trello.com/c/245izli3](https://trello.com/c/245izli3)

# iphone - 如何在 iOS 中访问需要身份验证的 URL

> ID：10684448
> 
> 赞同：0
> 
> 时间：2012-05-21T11:33:54.607
> 
> 标签：iphone, ios, url

目前我正在我的 iPhone 应用程序中从 URL 加载图像，这工作正常。但现在我想访问受保护的 URL。请用一段代码指导我如何使用凭据（用户名/密码）访问 URL。

下面给出了我的应用程序从 URL 加载图像的简单代码

```
 NSURL *url = [NSURL URLWithString: @"http://www.somedirectory.com"];
    UIImage *image = [UIImage imageWithData: [NSData dataWithContentsOfURL:url]]; 
    [Pic setImage:image]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:43:25.463

寻找这两个回调

```
- (BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace
{
    // IF to handle NTLM authentication.
    if([[protectionSpace authenticationMethod] isEqualToString:NSURLAuthenticationMethodNTLM])
        return YES;  

    // Mostly sent by IIS. 
    if([[protectionSpace authenticationMethod] isEqualToString:NSURLAuthenticationMethodServerTrust])
        return YES;

    return NO;
}

- (void) connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge*)challenge 
{   
    if ([[[challenge protectionSpace] authenticationMethod] isEqual:NSURLAuthenticationMethodNTLM]) 
    {
        [[challenge sender]  useCredential:[NSURLCredential 
                                                credentialWithUser:Username 
                                                password:password
                                                persistence:NSURLCredentialPersistenceNone]
                    forAuthenticationChallenge:challenge];
    } 
    else if ([[[challenge protectionSpace] authenticationMethod] isEqual:NSURLAuthenticationMethodServerTrust])
    {
          [[challenge sender]  useCredential:[NSURLCredential 
                                                credentialWithUser:Username  
                                                password:password 
                                                persistence:NSURLCredentialPersistenceNone]
                    forAuthenticationChallenge:challenge];
    } 
    else 
    {  
        [challenge.sender continueWithoutCredentialForAuthenticationChallenge:challenge];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:45:45.890

您可以使用一些第三方库，例如[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/)，这很容易。

```
NSURL *url = [NSURL URLWithString:@"http://allseeing-i.com/top_secret/"];
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
[request setUsername:@"username"];
[request setPassword:@"password"]; 
```

或者您可以使用`NSURLConnection`类，但身份验证实现有点棘手。

# events - 处理 UITableViewCell 的按钮事件？

> ID：10684451
> 
> 赞同：0
> 
> 时间：2012-05-21T11:34:17.020
> 
> 标签：events, uitableview, uibutton

我有一个带有一个按钮和一个 uilabel 的自定义 TableViewCell。实际上 mi 在哪里处理这个下载事件以及如何处理？![在此处输入图像描述](../Images/45f261b293feeac127a6d0d3bd21c692.png)

这是我的自定义单元格。我试图这样处理但得到了错误

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-    [downloadPageCell downloadSong:]: unrecognized selector sent to instance 0x94b1490'
*** First throw call stack: 
```

我的代码在这里

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
  {
  downloadPageCell *newCell = nil;

  newCell = [tableView dequeueReusableCellWithIdentifier:identifier];

   if(newCell == nil)
   {
     NSLog(@"newCell ===================");
     NSArray *nibViews = [[NSBundle mainBundle] loadNibNamed:@"downloadPageCell" owner:self options:nil];
     newCell  = [ nibViews lastObject];
  }

  newCell.titleText.text=[URLTitle objectAtIndex:indexPath.row];

    [newCell.downloadButton addTarget:self action:@selector(DOWNLOAD:) forControlEvents:UIControlStateNormal];

return newCell;
} 
```

处理来自单元格的按钮事件的真正代码是什么？

**编辑**

```
 -(void)downloadButtonPressed:(UIButton*)sender
 {
   NSLog(@"download button pressed");

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:02:01.387

您可以通过以下方式为每个按钮分配标签

```
newCell.downloadButton.tag=cell.indexPath.row 
```

＆在行动中，您可以找到按钮标签按下了哪个按钮，并对所有按钮进行不同的操作。您可以使用以下方法找到按钮。

```
UIButton *btn1 = (UIButton *)sender;

if(btn1.tag==1) {
  // call action for that first cell button
} 
```

等等。

# file - 合并/追加文件并重新编号unix中的第一列

> ID：10684454
> 
> 赞同：2
> 
> 时间：2012-05-21T11:34:29.937
> 
> 标签：file, unix, sed, awk

我在不同的目录（3 个不同的名称）中有很多（3 个只是一个例子）文本文件，如下所示：

目录：A、文件名：run.txt 格式：txt 制表符分隔

```
; file one 
10     0.2   0.5   0.3
20     0.1   0.6   0.8
30     0.2   0.1   0.1
40     0.1   0.5   0.3 
```

目录：B，文件名：run.txt 格式：txt 制表符分隔

```
; file two 
10     0.2   0.1   0.2
30     0.1   0.6   0.8
50     0.2   0.1   0.1
70     0.3   0.4   0.4 
```

目录：C，文件名：run.txt 格式：txt 制表符分隔

```
; file three 
10     0.3   0.3   0.3
20     0.3   0.6   0.8
30     0.1   0.1   0.1
40     0.2   0.2   0.3 
```

我想将所有三个 run.txt 文件合并为一个并重新编号第一列。生成的新文件将如下所示：

```
; file combined 
10     0.2   0.5   0.3
20     0.1   0.6   0.8
30     0.2   0.1   0.1
40     0.1   0.5   0.3

50     0.2   0.1   0.2
70     0.1   0.6   0.8
90     0.2   0.1   0.1
110    0.3   0.4   0.4

120    0.3   0.3   0.3
130    0.3   0.6   0.8
140    0.1   0.1   0.1
150    0.2   0.2   0.3 
```

这就是我的代码所在：

```
cat A/run.txt B/run.txt C/run.txt > combined.txt 
```

(1) 我不知道如何按第一列重新编号

(2) 我也不怎么处理以“;”开头的评论

**编辑：**

让我明确一下编号方案：A/run.txt、B/run.txt 和 C/run.txt 实际上是并行运行合并为一个。因此每个都将存储带有运行编号的样本。但是，运行之间的差距可能是不均匀的。

(1) 对于第一个文件 A/run.txt (gap is 10, 20-10, 30-20)

```
10, 10+10, 20+10, 30+10 
```

(2) 对于第二个文件 B/run.txt，从 10 开始，但间隔为 20（例如 30-10、50-70、70-50）

```
40 (from last line of the first file) + 10 (first in file two) = 50, 
 50 + 20 = 70,70 + 20 = 90,  90+ 20 = 110 
```

(3) 文件 C/run.txt 从 10 开始，增量为 10

```
110 (last number in file 2) + 10 = 120, 120+ 10 = 130,
 130+10 = 140, 140+10 = 150` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T12:09:24.220

你可以使用`awk`：

```
 awk 'BEGIN{l=0;print "; file combined"}; {if($1!=";")print l,$2,$3,$4;l=l+10}'  A/run.txt B/run.txt C/run.txt > combined.txt 
```

**编辑**

我猜测了您的编号方案（您仍然没有提供规范）并提出：

```
 awk 'BEGIN{line=0;last=0;print "; file combined"}; !/^;/{if($1<last){line=last+$1}else{line=line+$1-last;last=$1};print line,$2,$3,$4}' \
  A/run.txt B/run.txt C/run.txt > combined.txt 
```

是你的意思吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T14:16:40.320

```
#!/usr/bin/awk -f
BEGIN {
    OFS = "\t"
    printf "%s\n", "; file combined"
}
! /^;/ {
    if (FILENAME != prevfile) {
        prevnum = $1
        prevfile = FILENAME
        interval = 10
        c = 0
    }
    c++
    if (c == 2) {
        interval = $1 - prevnum
    }
    $1 = (i += interval)
    print
} 
```

要运行它：

```
$ ./renumber {A,B,C}/run.txt 
```

给定您的样本输入，它会产生与您的样本完全匹配的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T12:40:35.583

```
awk '{$1="";print NR"0",$0}' A/run.txt B/run.txt C/run.txt > combined.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T13:32:32.003

这可能对您有用：

```
awk -F'[\t]' 'lastfile!=FILENAME{lastfile=FILENAME;i=l};{$1+=i;l=$1};1' A/run.txt B/run.txt C/run.txt > combined.txt 
```

# wcf - WCF 中的 ServiceAuthenticationManager

> ID：10684458
> 
> 赞同：0
> 
> 时间：2012-05-21T11:34:49.010
> 
> 标签：wcf

在我的自定义 ServiceAuthenticationManager 中，在 Authenticate 之前是否会调用任何方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:45:44.930

不，因为它是唯一不从对象继承的可用方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:55:43.303

如果我没记错的话，将 Global.asax 文件添加到您的服务中，然后为“Application_Start”添加一个事件处理程序：

```
protected void Application_Start(object sender, EventArgs e)
{
    // YOUR CODE
} 
```

首次调用应用程序（包括 WFC 服务）时会触发此事件。查看[应用程序周期概述](http://msdn.microsoft.com/en-us/library/ms178473.aspx)

# django - 为什么这个查询集过滤器会静默崩溃？

> ID：10684459
> 
> 赞同：2
> 
> 时间：2012-05-21T11:34:56.653
> 
> 标签：django, django-models

基本上，我要做的是在查询中过滤掉一家公司，而这段代码是大量调试的结果。我们已将其简化为尽可能简单，并且无法弄清楚为什么“对于 Company.objects.filter(pk="E0433CAE-1756-11E1-A97B-7071BC08AB6F"):”中的公司失败。其他任何地方，它都可以完美运行：s

Autovivification，是自动嵌套字典。请参阅[自动嵌套字典的最佳方法](https://stackoverflow.com/questions/651794/whats-the-best-way-to-initialize-a-dict-of-dicts-in-python)

要运行的代码：

```
def run_code(code, query_dict):
    code = code.replace('\r\n', '\n')
    import jmsdirectory.advert.models
    import jmsdirectory.boughtin.models
    import jmsdirectory.contacts.models
    import jmsdirectory.generic.models
    import jmsdirectory.joinerysoft.models
    import jmsdirectory.scheduler.models
    import jmsdirectory.suppliers.models
    # g = {'__builtins__': False }
    # try:
    print "WOOPS"
    # print g
    print query_dict
    class AutoVivification(dict):
        print "AutoVivification: 1"
        """Implementation of perl's autovivification feature."""
        def __getitem__(self, item):
            try:
                return dict.__getitem__(self, item)
            except KeyError:
                value = self[item] = type(self)()
                return value
    print "AutoVivification: 69"
    models = AutoVivification()
    print "AutoVivification: 71"

    for company in Company.objects.filter(pk="E0433CAE-1756-11E1-A97B-7071BC08AB6F"):
        print "AutoVivification: 74"
        for address in Address.objects.filter(company=query_dict['company']).exclude(allow_download=0):
            print "AutoVivification: 76"
            for contact in Contact.objects.filter(address=address.uuid).exclude(allow_download=0):
                print "AutoVivification: 78"
                for supplier in Supplier.objects.filter(company=query_dict['company']):
                    print "AutoVivification: 80"
                    for supplies in Supplies.objects.filter(supplier=supplier.uuid):
                        print "AutoVivification: 82"
                        models[company][address][contact][supplier] = supplies
                        print "AutoVivification: 84"
                        print models
    print "Rage!"
    result = models
    # exec code in locals()
    print "MEH!"
    # except:
        # print "Error in query set"
        # print traceback.print_exc()
        # return False
    return result 
```

输出：

```
Django version 1.2.7, using settings 'jmsdirectory.settings'
Development server is running at http://127.0.0.1:8002/
Quit the server with CTRL-BREAK.
[21/May/2012 12:22:18] "POST /transfer/server/ HTTP/1.0" 200 162
[21/May/2012 12:22:18] "POST /transfer/server/ HTTP/1.0" 200 531
[21/May/2012 12:22:18] "POST /transfer/server/ HTTP/1.0" 200 162
1
2
3
4
5
6
7
8
9
WOOPS
{'company': u'E0433CAE-1756-11E1-A97B-7071BC08AB6F', 'contact': u'E047B1A8-1756-11E1-A97B-7071BC08AB6F', 'address': u'E0452488-1756-11E1-A97B-7071BC08AB6F'}
AutoVivification: 1
AutoVivification: 69
AutoVivification: 71
[21/May/2012 12:22:18] "POST /transfer/server/ HTTP/1.0" 200 129 
```

公司型号：

```
class Company(models.Model):
    uuid = UUIDField(primary_key=True)
    name =  models.CharField(null=True, blank=True,max_length=255,verbose_name=_('Company Name'))
    internal_name = models.CharField(null=True, blank=True,max_length=255,verbose_name=_('Internal Name'))
    reference = models.CharField(null=True, blank=True,max_length=255,verbose_name=_('Reference'))
    company_status = models.ForeignKey(CompanyStatus, null=True, db_column='company_status_uuid',verbose_name=(_('Company Status')), serialize=False)
    vat_number = models.CharField(null=True, blank=True,max_length=255,verbose_name=(_('Vat Number')))
    registration_number = models.CharField(null=True, blank=True,max_length=255,verbose_name=(_('Company Number')))
    discount = models.FloatField(null=True, blank=True)
    notes = models.TextField(null=True, blank=True,max_length=255)
    jms_code = models.TextField(null=True, blank=True,max_length=255)
    logo = models.TextField(null=True, blank=True,max_length=255)
    date_created = models.DateTimeField(null=True, blank=True, auto_now_add=True,verbose_name=_('Date Time'), serialize=False)
    date_modified = models.DateTimeField(null=True, blank=True, auto_now=True,verbose_name=_('Date Time Updated'), serialize=False)
    hidden = models.NullBooleanField(null=True, blank=True,default=0, serialize=False)
    user = UserField(null=True, blank=True, serialize=False)
    allow_download = models.NullBooleanField()
    is_modified = ModifiedField(serialize=False)
    companyid = models.IntegerField(null=True, blank=True, serialize=False)
    seqno = models.IntegerField(null=True, blank=True, serialize=False)

    def __unicode__(self):
        return self.name

    def advertiser_uuid(self):
        uuid = self.uuid
        today = date.today()

        from jmsdirectory.advert.models import Advertiser
        a=Advertiser.objects.filter(company=self,start_date__lte=today,end_date__gte=today)
        if len(a) > 0:
            return a[0].uuid
        else:
            return ''

    def advertiser(self):
        if self.advertiser_uuid() != '':
            return True
        else:
            return False

    def get_sequence (self) :

        if self.seqno is None :
            from django.db.models import Max
            max = Company.objects.all().aggregate(Max('seqno'))['seqno__max']
            if max is None :
                   self.companyid = 1
            else : self.companyid = max + 1
            self.seqno = 1
        else :
            self.seqno += 1

        self.save()
        return self.companyid, self.seqno

    class Meta:
        verbose_name_plural = ('Companies')
        ordering = ('name',)
        db_table = 'company' 
```

固定的：

```
def run_code(code, query_dict):
    code = code.replace('\r\n', '\n')

    class AutoVivification(dict):
        """Implementation of perl's autovivification feature."""
        def __getitem__(self, item):
            try:
                return dict.__getitem__(self, item)
            except KeyError:
                value = self[item] = type(self)()
                return value

    models = AutoVivification()

    companies = Company.objects.filter(pk="E0433CAE-1756-11E1-A97B-7071BC08AB6F")
    addresses = Address.objects.filter(company=query_dict['company']).exclude(allow_download=0)
    suppliers = Supplier.objects.filter(company=query_dict['company'])
    for company in companies:
        for address in addresses:
            for contact in Contact.objects.filter(address=address.uuid).exclude(allow_download=0):
                for supplier in suppliers:
                    for supply in Supplies.objects.filter(supplier=supplier.uuid):
                        models[company][address][contact][supplier] = supply
    result = models

    return result 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T12:38:36.390

简短的回答是 - 它没有崩溃，它根本没有返回任何东西，所以你正在迭代空集，因此没有任何东西被打印出来。

长答案：

我会尽力帮助您，但我的第一个建议是将您的问题简化为基本问题。例如，使用[`defaultdict`](http://docs.python.org/library/collections.html#collections.defaultdict)而不是您的 autovivi 类。

您还有一些我可以看到的其他问题，例如：

`for address in Address.objects.filter(company=query_dict['company'])`

您正在尝试针对字符串过滤 PK，我认为您的意思是：

`for address in Address.objects.filter(company__uuid=query_dict['company'])`

根据您的其他模型判断，我怀疑您的初始查询应该是：

`for company in Company.objects.filter(uuid="E0433CAE-1756-11E1-A97B-7071BC08AB6F")`

同样，您应该修复其他查询：

`contact in Contact.objects.filter(address__uuid=address.uuid)``contact in Contact.objects.filter(address=address)`或者，如果您有适当的 FK 关系，那就更好 了。

然而，即使你做到了，正如丹尼尔暗示的那样，这也是非常低效的。您应该利用[过滤器链接](https://docs.djangoproject.com/en/dev/topics/db/queries/#chaining-filters)和[外键查找](https://docs.djangoproject.com/en/dev/topics/db/queries/#related-objects)。

# linux - gdb 和 nasm 缺少调试信息

> ID：10684468
> 
> 赞同：3
> 
> 时间：2012-05-21T11:35:24.670
> 
> 标签：linux, gcc, assembly, gdb, nasm

我有一个带有以下生成文件的简单汇编程序：

```
all : calc

calc : calc.o
    gcc -m32 -g -o calc calc.o

calc.o : calc.s
    nasm -f elf -g -F stabs calc.s 
```

我尝试使用它来调试它，`gdb`但它总是说：

> 单步执行直到退出函数 asc2int，它没有行号信息。

我尝试了许多解决该问题的方法，包括`-F dwarf`但没有一个有效。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T14:55:03.047

我没有看到你的makefile有任何问题。

快速谷歌搜索给出以下[nasm](http://www.csee.umbc.edu/portal/help/nasm/nasm.shtml)。文档示例显示您需要反汇编才能查看代码，但这有点奇怪，因为已经调试了汇编代码，为什么调试器会要求进一步反汇编它。然而，反汇编代码与汇编源文件是内联的。

形成您提到的内容，您似乎可以调试。`nexti`如果您正在使用指令`next`进行单步执行，请使用它。您可以`disassemble`命令每次查看执行控制所在的位置。或者，如果您希望它自动化，您可以将以下内容保存为脚本。`asm_next`成为您进入代码的新指令。

```
set language asm
set disassembly-flavor intel
define asm_next
nexti
disassemble
end 
```

使用命令运行它

```
gdb -x <script> calc 
```

PS 对于较大的程序，您可能需要添加 -O0 标志以获取调试器反汇编代码与 .s 文件中的汇编代码之间的关联。

# android - imageView 中的圆角

> ID：10684469
> 
> 赞同：2
> 
> 时间：2012-05-21T11:35:26.130
> 
> 标签：android, android-layout, android-imageview

这是我的 xml 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="75dp"
    android:padding="3dp" >
    <ImageView
        android:id="@+id/img"
        android:layout_width="75dp"
        android:layout_height="75dp"
        android:scaleType="fitCenter" 

        />

    <TextView
        android:id="@+id/name"
        android:layout_width="208dp"
        android:layout_height="75dp"
        android:paddingLeft="15dp"
        android:paddingTop="15dp" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="30dp"
        android:layout_gravity="center"
        android:src="@drawable/ash_arrow" />

</LinearLayout> 
```

我怎样才能显示我`ImageView`的圆角？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-21T11:40:19.693

使用下面的代码。它可以帮助你——

```
public static Bitmap getRoundedCornerBitmap(Bitmap bitmap) {
Bitmap output = Bitmap.createBitmap(bitmap.getWidth(),
    bitmap.getHeight(), Config.ARGB_8888);
Canvas canvas = new Canvas(output);

final int color = 0xff424242;
final Paint paint = new Paint();
final Rect rect = new Rect(0, 0, bitmap.getWidth(), bitmap.getHeight());
final RectF rectF = new RectF(rect);
final float roundPx = 12;

paint.setAntiAlias(true);
canvas.drawARGB(0, 0, 0, 0);
paint.setColor(color);
canvas.drawRoundRect(rectF, roundPx, roundPx, paint);

paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
canvas.drawBitmap(bitmap, rect, rect, paint);

return output;
} 
```

将您的位图图像传递给此方法并将其作为圆角。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T11:38:19.887

**ash_arrow.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<shape
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval">

    <!--Background with solid color-->

    <solid android:color="@color/colorWhite"/>

    <!--background with gradient-->
    <!--<gradient-->
    <!--android:centerColor="#fff"-->
    <!--android:centerX="50%"-->
    <!--android:centerY="50%"-->
    <!--android:endColor="#f0f"-->
    <!--android:gradientRadius="100"-->
    <!--android:startColor="#f00"-->
    <!--android:type="radial"/>-->

    <!--Stoke with dashed line-->
    <!--<stroke-->
    <!--android:width="8dp"-->
    <!--android:color="#f00"-->
    <!--android:dashGap="8dp"-->
    <!--android:dashWidth="8dp"/>-->

    <!--Stroke normal-->
    <stroke
        android:width="1dp"
        android:color="@color/willow_grove"/>

    <padding
        android:bottom="0dp"
        android:left="0dp"
        android:right="0dp"
        android:top="0dp"/>

</shape> 
```

[![在此处输入图像描述](../Images/db6341ac708ccfaba3d46fff7bf68dd9.png)](https://i.stack.imgur.com/c7o0U.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T11:38:11.417

如果您尝试为 ImageView 设置背景，在 xml 中定义一个仅包含“角”属性的 Shape，该怎么办？像这样的东西：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >
    <corners android:radius="20dip" />
</shape> 
```

# c# - 如何有条件地将 UserControl 添加到中继器控件？

> ID：10684476
> 
> 赞同：2
> 
> 时间：2012-05-21T11:35:48.937
> 
> 标签：c#, asp.net, user-controls, repeater

我想知道如何有条件地将用户控件添加到中继器控件。我试图将它添加到中继器控件中但无法加载用户控件的占位符。以下代码不起作用。

```
<asp:Repeater ID="ResultsRepeater" runat="server">
        <HeaderTemplate></HeaderTemplate>
        <ItemTemplate>  
        <div>
            <asp:PlaceHolder ID="PlaceHolder1" runat="server">
            </asp:PlaceHolder>
        </div>
        </ItemTemplate>
</asp:Repeater>

 public void GetStatus(int i)
    {
        UserControl uc = new UserControl();
        if(i==1)
        {
            uc = LoadControl("DraftList.ascx") as UserControl;
        }
        else if(i==2)
        {
             uc = LoadControl("FinalList.ascx") as UserControl;
        }

        PlaceHolder p1 = (PlaceHolder)ResultsRepeater.Items[0].FindControl("PlaceHolder1");
        p1.Controls.Add(uc);

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T14:13:08.503

是否有某种原因您不想只在 aspx 中处理所有这些？那将是最简单和最干净的选择：

```
<asp:Repeater runat="server" ID="ResultsRepeater">
    <ItemTemplate>
        <uc1:DraftList ID="DraftList1" runat="server" Visible='<%# ((int)Eval("Status") == 1)%>' />
        <uc2:FinalList ID="FinalList1" runat="server" Visible='<%# ((int)Eval("Status") == 2)%>' />
    </ItemTemplate>
</asp:Repeater> 
```

如果控件不可见（即`Visible=false`），则不会呈现任何标记，因此以这种方式编码不会为服务器或客户端浏览器创建更多工作，同时具有更易于阅读和提供用户控制的好处设计时的属性。

您只需要确保在页面顶部注册您的控件：

```
<%@ Register src="DraftList.ascx" tagname="DraftList" tagprefix="uc1" %>
<%@ Register src="FinalList.ascx" tagname="FinalList" tagprefix="uc2" %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T10:23:10.650

为什么不尝试在中继器 ItemDataBound 事件中添加它？IE，

```
<asp:Repeater ID="ResultsRepeater" OnItemDataBound="ResultsRepeater_ItemDataBound" runat="server">
        <HeaderTemplate></HeaderTemplate>
        <ItemTemplate>  
        <div>
            <asp:PlaceHolder ID="PlaceHolder1" runat="server">
            </asp:PlaceHolder>
        </div>
        </ItemTemplate>
</asp:Repeater> 
```

在后面的代码中

```
protected void ResultsRepeater_ItemDataBound(object sender, RepeaterItemEventArgs e)
    {
        if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
        {
            Panel PlaceHolder1 = (Panel)e.Item.FindControl("PlaceHolder1");

            // declare/obtain the value of i given the DataItem
            // e.g.,
            int i = ((int)e.Item.DataItem); // or however you're getting i

            if (i == 1)
            {
                var uc = LoadControl("~/DraftList.ascx");
                PlaceHolder1.Controls.Add(uc);
            }
            else if (i == 2)
            {
                var uc = LoadControl("~/FinalList.ascx");
                PlaceHolder1.Controls.Add(uc);
            }
        }
    } 
```

从您最后的评论（对问题）来看，您可能还需要确保您已将数据源附加并绑定到转发器。IE，

```
ResultsRepeater.DataSource = dataSource; //whatever your datasource is e.g., datatable, IEnumerable list etc
ResultsRepeater.DataBind(); 
```

# php - 我可以在 php 中编写没有 PDF 库的 PDF 吗？

> ID：10684478
> 
> 赞同：-6
> 
> 时间：2012-05-21T11:35:56.010
> 
> 标签：php, pdf

我想以**PDF**格式编写用户信息。**我可以在没有PDF**库的情况下写这个吗，如果我不能，请给我推荐一个 pdf 库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:40:14.010

[http://www.tcpdf.org/](http://www.tcpdf.org/) TPDF
[http://www.fpdf.org/](http://www.fpdf.org/) FPDF。

根据您的要求进行评估并集成到您的代码中。

# javascript - jQuery css 显示 div？

> ID：10684482
> 
> 赞同：0
> 
> 时间：2012-05-21T11:36:09.630
> 
> 标签：javascript, jquery, html

好的，这是我的问题，似乎没有人能回答。我有两个正在使用的javascript。一次是我的弹出窗口，并告诉它在关闭时保持关闭 24 小时。另一种是在页面上的某个位置放置一个链接以显示此弹出窗口，直到刷新并保持隐藏直到 cookie 过期。现在 div 弹出窗口设置为`display:none`. cookie 告诉它在按下关闭按钮之前一直显示。无论我似乎在我的 javascript 中重新设计以暂时显示来自链接的弹出窗口，它都不会显示。一些 cookie javascript 将如何修改，因此必须`display:none`在弹出 div 上删除 css:。我不知道该怎么做。

这是当前代码：

*   [http://jsfiddle.net/Dv7DR/-](http://jsfiddle.net/Dv7DR/-)
*   [http://pastebin.com/fHvv5spn](http://pastebin.com/fHvv5spn)

* * *

```
<script type="text/javascript"> 
$("#linkshow").click(function {
$("#window").show()
});        
</script>

<a href="#" id="linkshow">Submit a comment</a>
<div id="window">
...
<div>
<script type="text/javascript">
...cookie popup hide for 24hr on close
</script> 
```

注意：我已经尝试过：

```
$(document).ready(function() {
   $("#linkshow").click(function(e) {
      e.preventDefault();
      $("#window").show();
   });
}); 
```

和...

```
$(document).ready(function() {
     $("#window").hide();

   $("#linkshow").live('click', function(e) {
      e.preventDefault();
      $("#window").show();
   });
}); ​ 
```

和...

```
$(function() {
        $("#linkshow").click(function() {
            $("#window").show()
        });        
    }); 
```

和...

```
<div id="window" style="display:none;"> 
```

到

```
<div id="window"> 
```

* * *

然后其他 24 小时 cookie javascript 不会隐藏弹出窗口。我假设我需要取出`id="window" style="display:none;`代码底部的 javascript cookie 和一些高级程度，因此当被要求隐藏 24 小时时它将隐藏，并在需要在当前页面上显示时显示，直到刷新但我处于空白关于做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:38:11.783

你的语法错误，试试

```
$(document).ready(function() {
   $("#linkshow").click(function(e) {
      e.preventDefault();
      $("#window").show();
   });
}); 
```

为我工作：见[jsFiddle](http://jsfiddle.net/S4vSU/11/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:38:13.913

您需要将代码包装在 DOM 就绪处理程序中，并且您还错过了函数声明后面的括号。试试这个：

```
<script type="text/javascript"> 
    $(function() {
        $("#linkshow").click(function() {
            $("#window").show()
        });        
    });
</script> 
```

# https - 具有多个 https 站点的 HAproxy

> ID：10684484
> 
> 赞同：12
> 
> 时间：2012-05-21T11:36:20.113
> 
> 标签：https, haproxy

我们有几个在负载均衡器后面运行的 http 站点（具有使用 heartbeat 的故障转移功能）和一个 https 站点。一切运行良好，但现在我想添加另一个 https 站点。我找不到托管多个 https 站点的任何参考资料。

有没有人使用 HAproxy 托管多个 https 站点？你能告诉我我怎样才能做到这一点吗？请帮助我输入您的信息。

谢谢，

桑托什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T09:30:45.563

您必须根据前端（IP 地址）、主机标头或 TLS SNI（“服务器名称指示符”）编写规则来选择后端。什么是最好的取决于你的应用程序。如果您需要支持不支持 SNI 的客户端（真的很老）；那么他们将无法获得真正的 TLS，您必须根据 Host 标头选择后端。

自从我在下面写了答案以来，haproxy 已将 ssl 添加为新功能。我在[https://manage.ntppool.org/](https://manage.ntppool.org/)上使用它，它运行良好。您需要最新的 1.5 开发版本（或 1.6，如果在您阅读本文时已经发布）。

在 HAProxy 1.8 中也支持 http/2。

2012 年的答案是：

HAProxy 本身不支持 SSL，你必须在前面运行一个“SSL unwrapped”。流行的选择是 stunnel 和[stud](https://github.com/bumptech/stud)。对于 HTTP，您还可以使用 Apache 或 Nginx。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:18:28.830

您可以使用 HAProxy 启动任意数量的启用 HTTPS 的网站。您必须在 HAProxy 框中进行 SSL 卸载。并且 ha-proxy 将通过 HTTP 将请求重定向到您的服务器（站点框）。在 HA-Proxy 进行 SSL-ffload 之后，您可以通过解析 URI 来区分来自 2 个不同 https 网站的请求

有关更多详细信息，请参阅 HA-Proxy 文档，请参阅 hdr_dom 和 acl 部分，这将解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-03T14:13:16.127

仅供参考，您可以通过以下方式获得它：

```
frontend http
    bind :80
    redirect scheme https code 301 if !{ ssl_fc }

frontend https
    bind :443 ssl crt /etc/haproxy/ssl
    reqadd X-Forwarded-Proto:\ https
    option http-server-close
    option forwardfor

    # ACL for example1.com
    acl ACL_example1.com hdr(host) -i example1.com
    use_backend backend1 if ACL_example1.com

    # ACL for example2.com
    acl ACL_example2.com hdr(host) -i example2.com
    use_backend backend2 if ACL_example2.com

backend backend1
    balance roundrobin
    server server1 192.168.1.10:80 check
    server server2 192.168.1.20:80 check

backend backend2
    balance roundrobin
    server server3 192.168.1.30:80 check
    server server4 192.168.1.40:80 check 
```

在`/etc/haproxy/ssl`您必须拥有[格式`.pem`包含`crt`和`key`](http://cbonte.github.io/haproxy-dconv/configuration-1.5.html#5.1-crt)的证书：

```
example1.com.pem
example2.com.pem 
```

并使用 1.5 以上版本的 HAProxy

# iphone - iOS：如何允许所有手势/事件*除了几个例外*通过顶级视图传递到其子视图

> ID：10684486
> 
> 赞同：1
> 
> 时间：2012-05-21T11:36:34.717
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我有一个非典型的 iOS 界面。也许这不实用，但我正在尝试。希望有人能帮忙！

我有一个 UIVIew 形式的菜单。它包含 5 个小的 UIImageViews。UIPinchGestureRecognizer 附加到 UIVIew。当向内捏合时，5 个 UIImageView 会从屏幕外动画化，在窗口中间形成一个圆圈。当向外捏时，它们会在屏幕外显示动画。那里一切都很好。

我希望能够在应用程序的任何时候捏住屏幕以显示菜单，选择“按钮”之一（UIImageView），然后加载相关的子视图。

真正的问题是，如果当前可见视图是 UIScrollView 或 UITableView，我的应用程序无法确定菜单或其他子视图是否应该处理触摸事件。如果我真的专注并确保两根手指同时触摸屏幕，那么捏合就会起作用并将菜单向内拉。但除此之外，它会尝试滚动当前可见视图。

我希望除捏手势（以及菜单可见时的点击手势）之外的所有事件都通过菜单视图传递到其余的子视图。

我知道我可以重写 hitTest:withEvent 方法来确定处理事件的正确视图，但目前我不清楚如何准确地使用它。Apple 文档和我在堆栈溢出方面阅读的任何答案都没有让我清楚地了解这种方法。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:48:04.447

由于 UITableView 是 UIScrollView 的子类，它继承了 UIScrollView 的所有属性，包括它的手势识别器。

UIScrollView 声明了一个 UIPinchGestureRecognizer 和 UIPanGestureRecognizer。我不确定实现细节，但我想 UITableView 会禁用捏合手势识别器，因为您不应该能够缩放表格视图！

在任何情况下，您都可以将自己的 UIPinchGestureRecognizer 附加到表格视图：

```
UIPinchGestureRecognizer *yPGR = [[UIPinchGestureRecognizer alloc]
initWithTarget:probablySelf action:yourMenuShowSelectorHere];

UITableView *tv = ...
// ...
[tv addGestureRecognizer:yPGR]; 
```

然后，您可以确保 UITableView scoll 在您的捏合失败之前不会滚动：

```
[tv.panGestureRecognizer requireGestureRecognizerToFail:yPGR]; 
```

这样，UITableView 将不会滚动，直到确定它没有检测到捏合。

编辑： UIScrollView 仅在 iOS 5 及更高版本中使用（或至少声明公开访问） UIGestureRecognizers。

# iphone - 通过 performSelectorOnMainThread 调用方法与普通方法调用

> ID：10684488
> 
> 赞同：3
> 
> 时间：2012-05-21T11:36:45.730
> 
> 标签：iphone, ios5

任何人都可以告诉我当我调用方法使用`performSelectorOnMainThread`和调用相同的方法而不使用 performSelector 时有什么不同。

对于 Exa。

```
-(void)sampleCALL{
     ..........
} 
```

现在使用这两个 senario 调用此方法：

```
[[self performSelectorOnMainThread:@selector(sampleCALL) withObject:nil waitUntilDone:NO];]; 
```

或者

```
[self sampleCALL]; 
```

这两种方法是如何执行的？请帮助我正确地找到这个概念。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:43:03.473

在第一种情况下，`[self sampleCALL];`您的方法将在当前控制所在的线程中调用。它将维护所有堆栈操作，就像它为从另一个方法调用方法所做的那样。

尽管

```
[[self performSelectorOnMainThread:@selector(sampleCALL) withObject:nil waitUntilDone:NO];]; 
```

无论控制当前线程是什么，都调用主线程中的方法。所有 UI 操作始终在主线程中执行。

# c++ - WinAPI C++ - RegisterClassEx '参数不正确'

> ID：10684498
> 
> 赞同：1
> 
> 时间：2012-05-21T11:37:20.807
> 
> 标签：c++, winapi

我的代码有问题。我正在制作一个类来包装一些 WinAPI 以创建 GUI，但是在尝试注册该类时遇到问题。

我的代码：

```
inline Window::Window(const TCHAR *windowName, const int x, const int y, const int width, const int height, const TCHAR *className) : abstractWindow() {
    Window(0, className, windowName, WS_OVERLAPPEDWINDOW, x, y, width, height, NULL, NULL, NULL, NULL);
}    

Window::Window(const DWORD dwExStyle, const TCHAR *lpClassName, const TCHAR *lpWindowName, const DWORD dwStyle, const int x, const int y, const int nWidth, const int nHeight, const HWND hWndParent, const HMENU hMenu, const HINSTANCE hInstance, const LPVOID lpParam) : abstractWindow() {
    _proc           = (WNDPROC*) &abstractWindow::msgRouter;

    _styleEx        = dwExStyle;
    _className      = (!lpClassName) ? TEXT("MyGuiClass") : lpClassName;
    _windowName     = lpWindowName;
    _style          = dwStyle;
    _x              = x;
    _y              = y;
    _width          = nWidth;
    _height         = nHeight;
    _hwndParent     = hWndParent;
    _hInstance      = (!hInstance) ? ::GetModuleHandle(NULL) : hInstance;
    _hMenu          = hMenu;
    _lpParam        = lpParam;

    _wndClassEx.cbSize          = sizeof(_wndClassEx);
    _wndClassEx.style           = CS_HREDRAW | CS_VREDRAW;
    _wndClassEx.lpfnWndProc     = abstractWindow::msgRouter;
    _wndClassEx.cbClsExtra      = 0;
    _wndClassEx.cbWndExtra      = 0;
    _wndClassEx.hInstance       = _hInstance;
    _wndClassEx.hIcon           = ::LoadIcon(NULL, IDI_APPLICATION);
    _wndClassEx.hCursor         = ::LoadCursor(NULL, IDC_ARROW);
    _wndClassEx.hbrBackground   = (HBRUSH) COLOR_WINDOW;
    _wndClassEx.lpszMenuName    = NULL;
    _wndClassEx.lpszClassName   = _className;
    _wndClassEx.hIconSm         = ::LoadIcon(NULL, IDI_APPLICATION);
} 
```

**_wndClassEx**已经在**WNDCLASSEX**的类头中定义，并且注册函数只运行 RegisterClassEx(&_wndClassEx)。

以下是我如何调用这些类：（但是一次只调用一个）

```
Window gui (TEXT("Title"), 10, 10, 500, 250);
Window gui (0, NULL, TEXT("Title"), WS_OVERLAPPEDWINDOW, 10, 10, 500, 200, NULL, NULL, hInstance, NULL); 
```

第二个工作得很好，但是当我调用第一个（较短的参数，将其传递给第二个）类注册失败。我已经完整地编写了 _wndClassEx 并且经历了每一个并且修改它没有成功。我已经使用了调试器，一切*似乎*都很好。所以我完全不知道该怎么做。

顺便说一句， abstractWindow::msgRouter 是静态的。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:51:31.347

问题出在这个构造函数上：

```
inline Window::Window(const TCHAR *windowName, const int x, const int y, const int width, const int height, const TCHAR *className) : abstractWindow() {
    Window(0, className, windowName, WS_OVERLAPPEDWINDOW, x, y, width, height, NULL, NULL, NULL, NULL);
} 
```

您不能像这样从另一个构造函数调用构造函数。最终发生的是创建了一个临时对象，然后立即丢弃。实现这一点的方法（仅当您有一个从新 C++11 标准实现此功能的编译器时才有效）是如果您说

```
inline Window::Window(const TCHAR *windowName, const int x, const int y, const int width, const int height, const TCHAR *className) : Window(0, className, windowName, WS_OVERLAPPEDWINDOW, x, y, width, height, NULL, NULL, NULL, NULL) {}; 
```

另一种方法是按照@aztaroth 所说的去做：创建一个单独的方法并从两个构造函数中调用它（即使使用较旧的编译器也可以）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T11:47:44.430

编写一个初始化窗口的方法（基本上是剪切和粘贴第二个构造函数），然后使用两个构造函数的正确值调用它。

# c - 在 Linux 中多个独立程序之间共享同一个变量

> ID：10684499
> 
> 赞同：13
> 
> 时间：2012-05-21T11:37:24.750
> 
> 标签：c, linux, ipc

我想在 Linux 中多个独立的 C 可执行文件之间共享一个变量。也就是说，一个程序将在一个数组上写入并设置一个标志，以便其他程序无法使用它，并且在此操作之后它将取消设置标志，然后另一个程序将读取该数组。我尝试在每个程序中使用相同的自定义头文件（包含变量），但似乎在调用程序时创建了不同的变量实例。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-21T12:17:25.297

您在标头中声明的变量将在您包含它们的地方生成一个副本（[除非您声明它们`extern`](https://stackoverflow.com/a/1433387/1025391)）。当然，在处理单独的进程时，每个进程都会有自己的内存空间。您需要使用更复杂的技术来规避这一点，即进程间通信 (IPC)。例如：

*   （命名）管道
*   插座
*   共享内存

您的问题看起来像[共享内存](http://en.wikipedia.org/wiki/Shared_memory)就是您想要的，因为多个进程可以访问相同的内存区域以共享一些变量。也许看看[这个问题](https://stackoverflow.com/q/8186953/1025391)及其答案作为一个例子。

您的程序需要创建一些共享内存，例如使用[shmget](http://linux.die.net/man/2/shmget)并使用[shmat](http://linux.die.net/man/2/shmat)附加共享内存对象。当多个进程访问相同的内存区域时，在变量的读/写期间添加进程同步始终是一种健康的方法，例如使用共享信号量（[semget](http://linux.die.net/man/2/semget)，[semop](http://linux.die.net/man/2/semop)）。

完成共享内存后，您需要从中分离（[shmdt](http://linux.die.net/man/2/shmdt)）。因此，您告诉内核您的进程不再需要访问它。创建共享内存/信号量对象的进程也需要在程序结束时销毁它们。否则它将驻留在内存中，可能直到您重新启动机器（请参阅[shmctl](http://linux.die.net/man/2/shmctl)、[semctl](http://linux.die.net/man/2/semctl)，尤其是`IPC_RMID`）。

请注意，对于共享内存对象，*“只有在最后一个进程将其分离后，该段才会真正被销毁”*。因此，您要确保这实际上发生在您的所有进程（[shmdt](http://linux.die.net/man/2/shmdt)）中。

* * *

作为对评论的回应，这里是 POSIX 方法：

> System V 共享内存（shmget(2)、shmop(2) 等）是较旧的共享内存 API。POSIX 共享内存提供了一个更简单、设计更好的接口；另一方面，与 System V 共享内存相比，POSIX 共享内存的可用性稍差（尤其是在旧系统上）。

*   [shm_open](http://linux.die.net/man/3/shm_open) - 获取共享内存（通过文件描述符）
*   [ftruncate](http://linux.die.net/man/2/ftruncate) - 设置共享内存的大小
*   [mmap](http://linux.die.net/man/3/mmap) - 获取指向内存的指针
*   [sem_open](http://linux.die.net/man/3/sem_open) - 获取信号量
*   [sem_wait](http://linux.die.net/man/3/sem_wait) , [sem_post](http://linux.die.net/man/3/sem_post) - 用于您的读/写同步
*   [shm_unlink](http://linux.die.net/man/3/shm_unlink) , [sem_close](http://linux.die.net/man/3/sem_close) - 毕竟要清理

另请参阅[此概述](http://linux.die.net/man/7/shm_overview)和[此处](http://mij.oltrelinux.com/devel/unixprg/#ipc__posix_shm_examples)的示例。

最后，请注意

> POSIX 共享内存对象具有内核持久性：共享内存对象将一直存在，直到系统关闭，或者直到所有进程都取消映射该对象并使用 shm_unlink(3) 将其删除

* * *

为了考虑共享内存对象的持久性，不要忘记向应用程序添加信号处理程序，以便在异常终止（SIGINT、SIGTERM 等）的情况下执行清理操作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-21T12:29:46.323

[`shm_open`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/shm_open.html)研究通过and使用 POSIX 共享内存[`shm_unlink`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/shm_unlink.html)...我个人觉得它们比旧的 System-V IPC 调用（例如`shmget`等）更容易使用和更直接，因为返回的句柄与您的文件描述符完全一样可以与 , 等调用一起使用`read`。`write`否则，如果您想通过普通指针访问由文件描述符表示的共享内存对象，您可以`mmap`在 . 返回的文件描述符上使用[`shm_open`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/shm_open.html)。

# snmp - 如何使用 snmpwalk 查询 UCD-SNMP-MIB

> ID：10684505
> 
> 赞同：2
> 
> 时间：2012-05-21T11:37:43.147
> 
> 标签：snmp, net-snmp

我在windows 2003服务器上安装了MRTG、snmpd、snmpwalk、snmpget；我在 192.168.100.88 上配置了 SNMP 代理

当我运行此 SNMP walk 命令时，我收到 UCD-SNMP-MIB 的空响应

```
snmpwalk -v 1 -c community 192.168.100.88  .1.3.6.1.4.1.2021.4 
End of MIB 
```

我也看...

```
snmpget -v1 -c community 192.168.100.88 memAvailReal.0
Error in packet
Reason: (noSuchName) There is no such variable name in this MIB.
Failed object: UCD-SNMP-MIB::memAvailReal.0 
```

我错过了什么？我应该在主机或客户端上安装 UCD-SNMP-MIB，如何安装？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T02:33:20.087

试试这个（根据您的需要修改，例如网络信息）

[https://gist.github.com/2848189](https://gist.github.com/2848189)

创建现有 snmpd.conf 的备份，然后重新加载 snmpd 并再次尝试您的 snmpwalk

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:46:54.257

请检查您传递的 OID(memAvailReal.0)。尝试使用 OID（点分整数）而不是名称。

如果再次出现同样的错误“no such name”，请确认设备支持OID。

**PS：** *“没有这样的名字”*这意味着设备中没有这样的对象来响应。

# playframework - 如何使用 sbt/play 2.0 为 Dart 定义一个外部“构建器工具”？

> ID：10684508
> 
> 赞同：6
> 
> 时间：2012-05-21T11:37:54.387
> 
> 标签：playframework, sbt, dart

目前 Play2.0 在 /app/assets 目录中支持 coffee script to javascript 和 less to css "out of the box"。

有没有办法为 dart 获得类似的功能（可能是通过在 play 2.0 中配置 sbt）？如果处理得当，它会导致 frogc（或 dart2js'）的 js 输出以编程方式在资产中可用，但当然确实在 resources_managed 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T16:46:12.320

我记得这是不久前在 Play Google Group 中提出的，所以快速搜索了一下。似乎有人得到了这个工作

[https://github.com/nelsonsilva/Play20/commit/b365ca56aa285355752d39487fc38a40ad88be5e](https://github.com/nelsonsilva/Play20/commit/b365ca56aa285355752d39487fc38a40ad88be5e)

基于[这个converstaion](https://groups.google.com/forum/?fromgroups#!topic/play-framework/4xc_gTtOBl0)。

不过，似乎还没有一个实际的模块（截至 22/5/2012）。

# android - 从数据库中删除项目 - ListView - Android

> ID：10684511
> 
> 赞同：2
> 
> 时间：2012-05-21T11:38:10.410
> 
> 标签：android, database, listview

```
public class DataViewActivity extends Activity{
SQLiteDatabase db;
SimpleCursorAdapter adapter;
String dbTable = "users";

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.listview_layout);
ListView listView = (ListView) findViewById(R.id.dbPop);

DBHelper dbhelper = new DBHelper(DataViewActivity.this);
db = dbhelper.getWritableDatabase();

Cursor cursor = db.query(dbTable, null, null, null, null, null, null);
startManagingCursor(cursor);

String[] from = new String[] { "name","_id"};
int[] to = new int[] { android.R.id.text1 };
adapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1, cursor, from,
        to);

    listView.setAdapter(adapter);
  }
} 
```

如何对此代码实施 onClick 侦听器以删除选定的数据库行。我对 Android 了解不多，所以对我来说这是一个学习曲线。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T11:45:46.233

设置`setOnItemClickListener`为您的列表视图...

```
listview.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {

            database.remove(id);//create removemethod in database class

        }
    }); 
```

**并在删除方法中**

```
 public void remove(long id){
        String string =String.valueOf(id);
        database.execSQL("DELETE FROM favorite WHERE _id = '" + string + "'");
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T11:49:23.683

```
 listview.setOnItemClickListener(new OnItemClickListener(){

    public void onItemClick(AdapterView<?> arg0, View v, int pos,long id) {
            // TODO Auto-generated method stub
      {
             TextView tv=(TextView)v;
     String s1=tv.getText().toString();
            //delete row
            String delgrp="DELETE FROM (tablename) WHERE  (row)='"+s1+"'";
    sdb.execSQL(delgrp);
      } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T11:41:14.103

`ListView.onListItemClick`，因为第三个参数有`position`。`Position`是返回的条目`Adpater.getItem(int)`。因此，当您单击 的一行时`ListView`，将`ListView.onListItemClick`触发 。在那里您可以检索您的适配器条目并使用您需要的信息从数据库中删除该条目。

```
public void onListItemClick(ListView parent, View v, int position, long id) {
      // do something with the cursor
} 
```

# jquery - 重置这个 jQuery 动画

> ID：10684519
> 
> 赞同：0
> 
> 时间：2012-05-21T11:38:25.387
> 
> 标签：jquery, css

我试着看

[如何重置 jquery 动画以重新开始？](https://stackoverflow.com/questions/5069841/how-to-reset-a-jquery-animation-to-start-over)

但这在这种情况下似乎不起作用。

我正在尝试通过将函数添加为最后一个节目的回调来重新启动此[动力学动画。](http://demo.campolar.me/Kinetic-Animation/)

这有效，但重置动画对象没有。

我错过了什么？-**现在下面的代码似乎可以工作**

[演示](http://plungjan.name/test/animation.html)

**代码**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>jQuery Powered Kinetic Text Animation</title>
<link href="http://demo.campolar.me/Kinetic-Animation/css/font-face.css" rel="stylesheet" type="text/css" />
<link href="http://demo.campolar.me/Kinetic-Animation/css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript">
function animation() {

   // my attempt to reset
        $('.first').removeAttr('style');
        $('.second').removeAttr('style');
        $('.shadow1').removeAttr('style');
        $('.second .a').removeAttr('style');
        $('.second .b').removeAttr('style');
        $('.second .c').removeAttr('style');
        $('.third').removeAttr('style');
        $('.fourth').removeAttr('style');
        $('.fifth').removeAttr('style');
        $('.fifth .a').removeAttr('style');
        $('.fifth .b').removeAttr('style');
        $('.fifth .c').removeAttr('style');
        $('.fifth .d').removeAttr('style');
        $('.sixth').removeAttr('style');
   // end reset attempt

   // original code

        $('.first').animate({right: '1500px'}, 3000);
        $('.first').animate({left: '1000px'}, 500);
        $('.shadow1').delay(3800).show(1000);
        $('.second .a').delay(3800).show(500);
        $('.second .b').delay(4000).show(500);
        $('.second .c').delay(4200).show(500);
        $('.third').delay(6200).animate({bottom: '125px'}, 500);
        $('.shadow1').delay(1800).hide(500);
        $('.second .a').delay(3500).animate({bottom: '30px'}, 300);
        $('.second .b').delay(3800).animate({bottom: '30px'}, 300);
        $('.second .c').delay(4100).animate({bottom: '30px'}, 300);
        $('.second').delay(10000).hide(500);
        $('.third').delay(3500).animate({top: '125px'}, 500);
        $('.fourth').delay(10500).show(500);
        $('.fifth .a').delay(12000).animate({left: '85px'}, 300);
        $('.fifth .b').delay(12300).animate({left: '95px'}, 300);
        $('.fifth .c').delay(12600).animate({left: '180px'}, 300);
        $('.fifth .d').delay(12900).animate({left: '100px'}, 300);
        $('.fourth').delay(4000).animate({'font-size': '150px', 'bottom': '50px', 'right': '50px'}, 300);
        $('.fifth').delay(15000).hide(500);
        $('.fourth').delay(2000).hide(500);
        $('.sixth').delay(18000).show(1000,function() {
                setTimeout(animation,2000)
            });
}
$(function() {
  animation()   
});

</script>
</head>

<body>

<div id="wrapper">
    <h1>Kinetic Text Animation using jQuery</h1>
    <p>Welcome to my try at making a small kinetic animation using jquery. It doesn&#39;t 
    include many fancy things, but this is just something i wanted to try and looks 
    like I&#39;ve done it. To play this, click the play button below (not visible? Enable javascript or wait for it to load). You need javascript 
    enabled and a @font-face supporting browser.</p>
    <p>The animation works in the black box, which is 650x400 pixels. So make sure 
    the visible portion of your screen fits it. This will be fine on a least of 
    1024x768 pixel resolution.</p>
    <p><a href="http://campolar.me/2010/05/kinetic-text-animation-using-jquery/">Read the whole article here!</a></p>
    <p>I hope you like it :)</p>
    <p class="play"><img src="images/play.png" alt="Play" />Play!</p>
</div>
<div class="animationwindow">
    <div class="first nevis">
        Do you know?</div>
    <!-- slides from hidden left to hidden right -->
    <div class="second museo">
        <div class="a">
            WHAT</div>
        <div class="b">
            THIS</div>
        <div class="c">
            IS?</div>
    </div>
    <div class="shadow1">
    </div>
    <div class="third museo">
        DO YOU KNOW? </div>
    <div class="fourth nevis">
        No? </div>
    <div class="fifth museo">
        <div class="a">
            Are</div>
        <div class="b">
            You</div>
        <div class="c">
            Kidding</div>
        <div class="d">
            Me?</div>
    </div>
    <div class="sixth museo">
        This is a kinetic animation, achieved using <br />
        <span>jQuery!!!</span> </div>
</div>
<div id="CampolarDesigns">
</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:53:37.960

这 ：

```
$('.sixth').delay(18000).show(1000,
setTimeout(function() { // my change to loop the animation
  animation()
},2000)); 
```

简单的意思是：

```
$('.sixth').delay(18000).show(1000, timeoutIdThatReturnedBySetTimeoutFunction); //
setTimeout(function() { // my change to loop the animation
  animation()
},2000); 
```

这就是为什么，`animation`将在您的动画完全完成之前调用。这意味着您的属性将在动画期间恢复，而不是在动画结束之后。

可能你需要这个：

```
$('.sixth').delay(18000).show(1000,function(){
    setTimeout(function() { // my change to loop the animation
       animation()
    },2000);
}); 
```

或者：

```
$('.sixth').delay(18000).show(1000,function(){
    setTimeout( animation, 2000 );
}); 
```

在这种情况下，`animation`将在*完成*后重复，而不是何时*开始*（你现在在做什么）。

# html - CSS：样式选择列表中的选定内容

> ID：10684521
> 
> 赞同：0
> 
> 时间：2012-05-21T11:38:36.603
> 
> 标签：html, css, forms

我有一个选择列表：

```
<select multiple="multiple">
<option value="1">Macrostructures</option>
<option value="2">Woven</option>
<option value="3">Mystic Bird</option>
</select> 
```

现在，当 somepody 选择一个选项时，该选项具有蓝色背景。我知道想改变背景颜色。

我已经尝试过：

```
select option:checked { background: #787878; } 
```

但这不起作用。正确的选择器如何？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:22:49.600

检查这个

```
$('select').change(function() {
$('option').css('background', 'none');
$('option:selected').css('backgroundColor', 'red');
}).change(); 
```

# php - 作曲家：如何找到一个包的确切版本？

> ID：10684523
> 
> 赞同：140
> 
> 时间：2012-05-21T11:38:44.030
> 
> 标签：php, dependency-management, package-managers, composer-php

假设我正在编写一个库 A，它依赖于另一个库，例如 monolog。

我想安装最新版本的独白，所以我把这个放在composer.json里面：

```
{
    "require": {
        "monolog/monolog": "*.*.*"
    }
} 
```

然后我跑`$ php composer.phar install`。

我期待在composer.lock中找到安装的版本，但它不存在：

```
{
    "hash": "d7bcc4fe544b4ef7561918a8fc6ce009",
    "packages": [
        {
            "package": "monolog/monolog",
            "version": "dev-master",
            "source-reference": "2eb0c0978d290a1c45346a1955188929cb4e5db7"
        }
    ],
    "packages-dev": null,
    "aliases": [

    ],
    "minimum-stability": "dev",
    "stability-flags": [

    ]
} 
```

我需要这个版本，因为我想将我的库绑定到一组特定的版本，例如：如果我发现版本是 1.3.5，在我的 composer.json 中我想放这样的东西：

```
 "require": {
        "monolog/monolog": "1.3.*"
    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：209
> 
> 时间：2014-01-15T14:00:03.693

我知道这是一个老问题，但是...

```
composer.phar show 
```

将显示所有当前安装的软件包及其版本信息。`-i`（这仅在使用现已弃用的选项时才在 Composer 的早期版本中显示。）

要查看更多详细信息，请同时指定包的名称：

```
composer.phar show monolog/monolog 
```

这将显示很多东西，包括提交 MD5 哈希、源 URL、许可证类型等。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2017-10-18T11:27:10.230

您可以像这样使用作曲家表演：

```
composer show package/name 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2018-09-30T02:48:00.693

如果您只想将输出作为包版本号获取，例如：**1.7.5**或**1.x-dev**或**dev-master**。

Linux 控制台片段（composer & sed）：

```
composer show 'monolog/monolog' | sed -n '/versions/s/^[^0-9]\+\([^,]\+\).*$/\1/p' 
```

或（作曲家，grep & cut）：

```
composer show 'monolog/monolog' | grep 'versions' | grep -o -E '\*\ .+' | cut -d' ' -f2 | cut -d',' -f1; 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2020-03-06T15:03:44.440

您可以使用 show all，特别是当没有 package.json 文件时，从 packagist.org 获取可用的包：

```
composer show "monolog/monolog" --all 
```

您也可以指定版本

```
composer show "monolog/monolog" 1.* --all 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-05-21T17:07:49.490

从技术上讲，“dev-master”是您最终在那里使用的确切版本。它是开发分支，因此是最新版本。

为作曲家包寻找可用版本的最佳位置是[Packagist](http://packagist.org)，因为这是作曲家在安装包时加载版本的地方。独白版本列在[http://packagist.org/packages/monolog/monolog](http://packagist.org/packages/monolog/monolog)上。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2021-05-31T15:24:09.967

如果您使用[git 版本控制系统](https://git-scm.com/)。您将轻松搜索任何包

```
composer show |grep packagename 
```

例如

```
composer show |grep monolog 
```

如果你没有安装 git。[您可以从此链接](https://sourceforge.net/projects/gnuwin32/)安装 grep 程序。并将其与环境变量链接，如果您在链接程序后不知道[如何将程序与环境变量](https://stackoverflow.com/q/3036325/5661396)链接，则可以查看此链接 在上面编写相同的命令

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-10T09:33:55.843

如果要检查 PHP 本身的版本，可以使用 composer Runtime Utilities：

```
\Composer\InstalledVersions::getVersion('my/package') 
```

有关更多信息，请参阅[https://getcomposer.org/doc/07-runtime.md](https://getcomposer.org/doc/07-runtime.md)。

# html - 如何在 html 元素上制作圆形边框？

> ID：10684524
> 
> 赞同：1
> 
> 时间：2012-05-21T11:38:43.887
> 
> 标签：html, css

基本上，我需要制作一个标题，样式如下：

![圆形斜头](../Images/d5c5698992c58f23cb8bc55fb8299322.png)

是否有完整的 css 方式，还是我需要使用背景图像？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T11:41:00.113

是的，你可以只使用 CSS 来做到这一点，但这并不容易，结果是……嗯，丑陋的。您可能还想检查一下：[CSS for倒置弯曲标签](https://stackoverflow.com/questions/10677526/css-for-inverted-curved-tabs/)

**编辑**：我今天有一个更好的主意，请查看此[http://dabblet.com/gist/2762234](http://dabblet.com/gist/2762234)

CSS如下：

```
h1 {
    min-width: 150px;
    height: 30px;
    margin: 0;
    /**border: solid 2px #979797;/**/
    border-bottom: none;
    border-radius: 8px 0 0 0;
    box-shadow: -2px -2px 2px #a5a5b1;
    display: inline-block;
    position: relative;
    background: linear-gradient(#e8e8ea, #f8f8fa);
}
h1:before {
    /**top: -2px;/**/
    /**/top: 0;/**/
    right: -23px;
    width: 30px;
    height: 30px;
    border-radius: 0 8px 0 0;
    /**border: solid 2px #979797;/**/
    border-left: none;
    border-bottom: none;
    box-shadow: 2px -2px 2px #a5a5b1;
    /** outline: solid 1px red; /* uncomment this to check position */
    transform: skewX(30deg);
    position: absolute;
    background: linear-gradient(#e8e8ea, #f8f8fa);
    content: '';
}
h1:after {
    right: -44px;
    /**bottom: 0;/**/
    /**/bottom: 2px;/**/
    width: 16px;
    height: 8px;
    /**border: solid 2px #979797;/**/
    border-top: none;
    border-right: none;
    border-radius: 0 0 0  8px;
    box-shadow: inset 2px -2px 2px #a5a5b1, -4px 4px 2px #f8f8fa;
    /** outline: solid 1px red; /* uncomment this to check position */
    transform: skewX(30deg);
    position: absolute;
    content: '';
}
div {
    min-height: 130px;
    margin-top: -7px;
    /**border: solid 2px #979797;/**/
    border-radius: 0 8px 0 0;
    box-shadow: -2px -2px 2px #a5a5b1, 2px -2px 2px #a5a5b1;
    background: linear-gradient(#f8f8fa, #f6f6f8);
} 
```

它可以看起来更漂亮，但这需要标题的固定宽度和 div 上的伪元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:43:59.433

您可能可以通过使用堆叠在一起的几个元素来实现这一点。
我不认为这是你想要的生产，所以我的建议是选择背景图像。

# java - Java读取pptx文件

> ID：10684526
> 
> 赞同：1
> 
> 时间：2012-05-21T11:38:47.397
> 
> 标签：java, powerpoint

有人可以帮我如何在 java 中读取 pptx 文件吗？如果可以使用 apache POI 读取，我会更喜欢，我已经搜索过本教程，但我找不到它。我已经成功地使用此代码读取了 ppt 文件：

```
try {
    FileInputStream fis = new FileInputStream(file);
    fs = new POIFSFileSystem(fis);
    HSLFSlideShow show = new HSLFSlideShow(fs);
    SlideShow ss = new SlideShow(show);
    Slide[] slides=ss.getSlides();
    for (int x = 0; x < slides.length; x++) {
        System.out.println("Slide = " + (x + 1) + " :" + slides[x].getTitle());

        TextRun[] runs = slides[x].getTextRuns();
        for (int i = 0; i < runs.length; i++) {
            TextRun run = runs[i];
            if (run.getRunType() == TextHeaderAtom.TITLE_TYPE) {
                System.out.println("Slide title " + (i + 1) + ": " + run.getText());
            } else {
                System.out.println("Slide text run " + (i + 1) + ": "  + run.getRunType() + " : " + run.getText());
            }
        }
    }
} catch (IOException ioe) {
    ioe.printStackTrace();
} 
```

有人能告诉我必须修改这段代码的哪一部分才能读取 pptx 文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T11:55:35.557

根据[http://poi.apache.org/slideshow/index.html](http://poi.apache.org/slideshow/index.html)您需要使用一组单独的类来读取 OOXML .pptx 文件。食谱中有示例代码：http: [//poi.apache.org/slideshow/xslf-cookbook.html](http://poi.apache.org/slideshow/xslf-cookbook.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-12T01:39:37.730

以下链接给出了从 ppt 读取数据的完整代码... [http://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/xslf/usermodel/DataExtraction。爪哇](http://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/xslf/usermodel/DataExtraction.java)

为了提供一个简短的总结，我可以记录以下步骤：首先使用创建幻灯片对象

```
XMLSlideShow ppt = new XMLSlideShow(new FileInputStream("url of your ppt")); 
```

使用以下方法获取 ppt 中的边列表：

```
final List<XSLFSlide> slide = ppt.getSlides(); 
```

遍历幻灯片并使用以下方法获取每张幻灯片中的形状列表：

```
List<XSLFShape> shapes = selectedslide.getShapes(); 
```

检查形状的类型，它应该是 XSLFTextShape 或 XSLFPictureShape。然后您可以相应地处理和显示数据。

这是进一步阅读有关形状的链接。
[https://poi.apache.org/apidocs/org/apache/poi/xslf/usermodel/XSLFShape.html](https://poi.apache.org/apidocs/org/apache/poi/xslf/usermodel/XSLFShape.html)

@Arne de Bruijn 的回复希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T11:51:23.773

根据apache poi release notes，3.8版本可以用来阅读PPTX。不过，您必须查看文档。

# fork - 让程序运行 x 秒但保留控制能力-C

> ID：10684531
> 
> 赞同：0
> 
> 时间：2012-05-21T11:38:56.237
> 
> 标签：fork, sh

我正在寻找一种方法来运行脚本几秒钟，并且仍然有可能在这些几秒钟过去`x`之前中断它。`x`

如果我不需要 Ctrl-C 的能力，我会写

```
./my_script &
sleep $x
kill $! 
```

但是在这里，如果我在脚本期间按 Ctrl-C，则 fork 会继续运行。

如果在子外壳中启动，我有点知道如何杀死脚本：

```
trap "echo sub-script terminated" INT
(./my_script)
trap - INT 
```

但我不知道如何将其转换为分叉（我不清楚我必须承认的两个概念之间的区别）。

**编辑**：我想知道解决方案的便携性，如果你能在你的答案中提到这一点，那对我来说很有价值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:30:47.343

```
timeout $x ./my_script 
```

如果您有一个相当新的 GNU Coreutils，[`timeout`](http://www.gnu.org/software/coreutils/manual/html_node/timeout-invocation.html)则包含在其中。以前，曾经有许多`timeout`来自不同来源的稍微不兼容的变体（我在大多数地方拥有的变体来自最初 IIRC 的 Postfix 发行版）。

如果你`timeout`的发行版没有，那里有很多 shell 和 Perl hacks。

# html - 文本对齐但向右？

> ID：10684533
> 
> 赞同：35
> 
> 时间：2012-05-21T11:38:58.710
> 
> 标签：html, css, layout

我们想让 text-align:justify 占据列的所有宽度，但它应该从右侧开始。有没有办法用 css 或以某种方式制作它？

**编辑：**

正如建议 [的http://jsfiddle.net/dVbJr/33/](http://jsfiddle.net/dVbJr/33/)

```
.text {
  text-align: justify;
  direction:rtl;
} 
```

有效，但它有标点符号问题。

**解决了**

```
 <span style="float:right">...</span> 
```

最后附上的这个解决了标点符号的问题。感谢大家的努力！那么我将接受第一个答案。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-05-21T11:48:23.127

我相信你可能想要这样的东西：

```
direction:rtl;
text-align:justify; 
```

示例：http: [//jsfiddle.net/aew75/](http://jsfiddle.net/aew75/)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-21T12:26:37.617

```
text-align-last: right;
-moz-text-align-last: right; 
```

如果我正确理解了这个问题，那么问题实际上只是如何右对齐对齐文本块的最后一行。以上就是这样做的，使用[CSS 3 Text](http://www.w3.org/TR/css3-text/#text-align-last)中的属性（带有供应商前缀版本以获得更好的支持），现代浏览器支持但不是普遍支持。

尽管将书写方向设置为从右到左会导致这种情况，但除其他外，它还有其他几个更基本的影响。如果您在文本中没有固有的从右到左的字符，您可能会侥幸逃脱。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-04-30T11:32:56.157

可以通过添加 text-align-last 来解决：

```
div.a {
    text-align: justify;  /* For Edge */
    text-align-last: right;
} 
```

来源：[链接](https://www.w3schools.com/cssref/css3_pr_text-align-last.asp)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-21T11:51:15.543

检查这个[样本](http://jsfiddle.net/6qrLF/)

因为`right-to-left`你只需要设置`direction:rtl`

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-05-21T11:44:48.603

**CSS**

```
text-align: justify; 
text-align: right; // or text-align: left right; 
```

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2012-05-21T11:49:12.347

试试这个。

```
text-align:right justify;
direction:rtl; 
```

# jquery - 可以在 dom 就绪和 jQuery 的窗口加载中使用相同的事件侦听器吗？

> ID：10684534
> 
> 赞同：0
> 
> 时间：2012-05-21T11:39:04.107
> 
> 标签：jquery

Ive used when a select list's option is changed as an event listener, with something like this:

```
$('#mySelect').change(function() {
        functionToRun();
}); 
```

可以多次使用事件监听器吗？所以像下面这样。我知道对于这个确切的例子它没有意义，但是对于更复杂的带有条件的代码，如果我使用了两次事件监听器，我会更容易维护我的代码。

```
$('#mySelect').change(function() {
        functionToRun();
});

//other code

$('#mySelect').change(function() {
        functionToRunTwo();
}); 
```

另外，我有一些在 dom 就绪上运行的代码和一些在窗口加载时运行的代码。在两个实例中使用相同的事件侦听器是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:41:46.133

您可以这样做，但如果您想根据上下文使用该功能，请确保取消绑定您不需要的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:44:06.453

它将按预期工作：两个事件侦听器都将被触发，这当然没有问题。从[`jQuery.bind()`](http://api.jquery.com/bind/)（由 内部调用`jQuery.change()`）：

> 当一个事件到达一个元素时，所有绑定到该元素的事件类型的处理程序都会被触发。如果注册了多个处理程序，它们将始终按照它们被绑定的顺序执行。在所有处理程序都执行后，事件将沿着正常的事件传播路径继续。

我不确定这是否回答了你的第二个问题。

# java - java中如何处理URI和Uri？

> ID：10684535
> 
> 赞同：0
> 
> 时间：2012-05-21T11:39:07.523
> 
> 标签：java, android, uri, type-conversion

我正在使用一个需要我将`Uri`对象作为参数传递的库。

目前我正在这样做：

```
File file = new File(someFileDir, "test.pdf");
someObject.someFunction(file.toURI()); 
```

请注意，该`File`对象具有功能`toURI()`。它返回一个`URI`对象。

现在我的问题是我调用的函数需要一个`Uri`参数，但它抱怨我传递了一个`URI`对象。

这些东西不完全一样吗？如何输出`Uri`对象？或者我如何转换`URI`为`Uri`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:42:15.980

您可以使用 Uri.Builder() 创建一个 Uri ！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T11:42:58.730

供您参考，URI 似乎来自 JAVA 语言（java.net.URI），而 Uri 似乎来自 Android SDK（android.net.Uri）。所以我建议你使用“Uri”类......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T11:40:57.803

只需将其作为字符串处理，这更容易。

# java - 将参数传递给javascript函数

> ID：10684536
> 
> 赞同：1
> 
> 时间：2012-05-21T11:39:21.813
> 
> 标签：java, rhino

所以这是交易：我阅读[了这篇文章](http://java.sun.com/developer/technicalArticles/J2SE/Desktop/scripting/) 并开始*尝试*使用 Rhino。到目前为止，我了解了如何调用一个函数，以及如何获得它的返回。我不能做的是传递函数的参数。这是我的代码：

```
ScriptEngineManager engineMgr = new ScriptEngineManager();
ScriptEngine engine = engineMgr.getEngineByName("ECMAScript");

String js = "";
js += "function add(a, b) {";
js += " var sum = parseFloat(a) + parseFloat(b);";
js += " println(sum);";
js += "}";

engine.put("a", 3);
engine.put("b", 5);

Object returnn = null;
try {
    engine.eval(js);

    Invocable invocableEngine = (Invocable) engine;
    returnn = invocableEngine.invokeFunction("add");
} catch (ScriptException e) {
    System.out.println("Script error.");
} catch (NoSuchMethodException e) {
    System.out.println("Method error.");
}

System.out.println(returnn); 
```

我没有任何异常，但返回返回为 NaN。我尝试打印 a 和 b （参数），它们总是为空。如果这不是调用函数的最佳方式，请指出一些有用的线程。（我自己没有找到）

TYVM 提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:53:58.257

这对我有用：

```
Object params[] = {1,2,3};
Invocable invocable = (Invocable) script.getEngine();
invocable.invokeFunction("myFunction", params); 
```

# elasticsearch - 如何使用 ReST API 在弹性搜索中保持重复数据计数？

> ID：10684541
> 
> 赞同：2
> 
> 时间：2012-05-21T11:39:45.667
> 
> 标签：elasticsearch

# ***如何使用 ReST API 在弹性搜索中保持重复数据计数？***

是否可以在弹性搜索中保留具有相同索引的相同数据，但我们应该能够看到它的各种版本？并且在概述区域它应该显示文档 5(6)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:50:44.567

只要您使用不同的 ID，您就可以存储任意多个版本的文档。（请注意，`_version`ES 为您管理一个属性，但它仅用于解决冲突。ES 不会让您访问旧版本的文档。）

```
 % curl -s -XPUT localhost:9200/test/foo/1 -d '{"yo":"brah","version":1}' | j
   {
       "_id": "1", 
       "_index": "test", 
       "_type": "foo", 
       "_version": 1, 
       "ok": true
   }
   % curl -s -XPUT localhost:9200/test/foo/2 -d '{"yo":"brah","version":2}' | j
   {
       "_id": "2", 
       "_index": "test", 
       "_type": "foo", 
       "_version": 1, 
       "ok": true
   }
   % curl -s localhost:9200/test/_search | j
   {
       "_shards": {
           "failed": 0, 
           "successful": 5, 
           "total": 5
       }, 
       "hits": {
           "hits": [
               {
                   "_id": "1", 
                   "_index": "test", 
                   "_score": 1.0, 
                   "_source": {
                       "version": 1, 
                       "yo": "brah"
                   }, 
                   "_type": "foo"
               }, 
               {
                   "_id": "2", 
                   "_index": "test", 
                   "_score": 1.0, 
                   "_source": {
                       "version": 2, 
                       "yo": "brah"
                   }, 
                   "_type": "foo"
               }
           ], 
           "max_score": 1.0, 
           "total": 2
       }, 
       "timed_out": false, 
       "took": 12
   } 
```

# java - 带有 maven 和 hibernate 的 JSP - java.lang.NoSuchMethodError，可能与项目结构有关

> ID：10684542
> 
> 赞同：0
> 
> 时间：2012-05-21T11:39:45.847
> 
> 标签：java, hibernate, jsp, maven, nosuchmethoderror

我的学校项目有问题。我使用 hibernate、jsp 和 maven 进行依赖管理。Hibernate 和 maven 工作正常，但是当我尝试使用登录屏幕制作一个简单的 jsp 页面时。它不工作。我认为问题在于 Maven 以及他如何处理项目结构，因为如果我让测试类一切正常。我无法找到有关 maven 如何与 webapps 一起使用的任何信息。

对不起我的英语错误:)。

我的项目结构：

```
├── src
│   └── main
│       ├── java
│       │    │
│       │    pro3
│       │     ├── model
│       │     │   ├── dao
│       │     │   │   ├── DaoInterface.java
│       │     │   │   └── HibernateDao.java
│       │     │   ├── hibernate
│       │     │   │   ├── hibernate.cfg.xml
│       │     │   │   ├── hibernate.reveng.xml
│       │     │   │   ├── HibernateUtil.java
│       │     │   │   ├── mapping
│       │     │   │   │   ├── Meal.hbm.xml
│       │     │   │   │   ├── ...
│       │     │   │   │   
│       │     │   │   └── Test.java
│       │     │   └── pojo
│       │     │       ├── Meal.java
│       │     │       ├── ...
│       │     │      
│       │     │      
│       │     └── utils
│       │         └── LoginHandler.java
│       └── webapp
│           └── index.jsp 
```

索引.jsp：

```
<jsp:useBean id="login" scope="page" class="cz.fim.pro3.utils.LoginHandler" />
...
login.verifyUser(request.getParameter("userName"), request.getParameter("password")); 
```

登录处理程序.java：

```
public class LoginHandler {
    DaoInterface dao = new HibernateDao();

    public boolean verifyUser(String userName,String password){
        return dao.verifyUser(userName, password);
    }
} 
```

HibernateDao.java：

```
public boolean verifyUser(String userName, String password) 
```

在我的测试类中，当我将它作为 java 应用程序运行时，一切正常。

测试：

```
public static void main(String[] args) {
    new Test();
    LoginHandler login = new LoginHandler();
    login.verifyUser("sdf", "asda");
} 
```

pom.xml：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <configuration>
                <archive>
                    <manifest>
                        <addClasspath>true</addClasspath>
                        <classpathPrefix>lib/</classpathPrefix>
                    </manifest>
                </archive>
                <webResources>
                    <resource>
                        <!-- this is relative to the pom.xml directory -->
                        <directory>src/main/webapp</directory>
                        <targetPath>/</targetPath>
                        <!-- enable filtering -->
                        <filtering>false</filtering>
                    </resource>
                </webResources>
            </configuration>
        </plugin>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.7</source>
                <target> 1.7</target>
            </configuration>
        </plugin>
    </plugins>
</build>

<packaging>war</packaging> 
```

错误跟踪：

```
Stacktrace:] with root cause
java.lang.NoSuchMethodError: org.hibernate.SessionFactory.openSession()Lorg/hibernate/Session;
    at cz.fim.pro3.model.dao.HibernateDao.verifyUser(HibernateDao.java:11)
    at cz.fim.pro3.utils.LoginHandler.verifyUser(LoginHandler.java:11)
    at org.apache.jsp.index_jsp._jspService(index_jsp.java:83)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:419)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:391)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T20:09:05.967

我可以推荐的第一件事是更改文件的位置，因为在 Maven 中你必须[遵循一些约定](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)：

Java 文件应该放在*src/main/java*加上适当的包名。hibernate.cfg.xml 文件和 hibernate.reveng.xml**不**属于 src/main/java 它们必须位于*src/main/resources*以及您希望将它们放入的适当包名中。此外，在休眠中，映射应该由注释处理，而不是由 hbm 文件处理。但是，如果您必须坚持使用映射文件，它们也必须放入*src/main/resources*中。

如果您有某种测试（通常是单元测试），例如 Test.java，则必须将它们放入*src/test/java*任何属于单元测试的资源只需放入*src/test/resources*加上合适的包名。jsp 文件已正确定位到*src/main/webapp*中。

除了上述之外，您还必须在**HibernateDao.java**第 11行中调用正确的方法，在该第**11**行中您试图调用显然不存在的方法**openSession 。**

# android - Android - http 连接 java.net.UnknownHostException 中的错误：

> ID：10684543
> 
> 赞同：4
> 
> 时间：2012-05-21T11:39:55.917
> 
> 标签：android, json, http

我试图将 mysql 与 android 连接，但它给我一个错误。 **http 连接 java.net.UnknownHostException 中的错误：**

下面是我的代码：

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://www.pherma.net84.net/admin/getAllPeopleBornAfter.php");
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
HttpResponse response = httpclient.execute(httppost);
HttpEntity entity = response.getEntity(); 
```

但是 URL 工作正常。请复制并粘贴网址。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T08:20:42.610

我忘记将网络权限放在清单中。现在工作正常。

# php - PHP SoapClient 原始 SOAP 到对象

> ID：10684545
> 
> 赞同：0
> 
> 时间：2012-05-21T11:40:09.253
> 
> 标签：php, xml, soap, client

是否可以将原始 SOAP Web 服务响应（从文件中读取）作为字符串输入到 PHP SoapClient 并获取映射到类映射中的响应对象？

与通常使用 SoapClient 基本相同，但我已经有响应 XML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:50:20.980

也许您可以在 PHP 中创建一个本地 SOAP 服务器，并使用您的 SOAP 客户端在其上调用一个方法。然后，通过从对象构造它，以正确的方式或使用快速而肮脏的方法，使服务器方法返回您的 SOAP 字符串：[https](https://stackoverflow.com/a/8749213/1174378) ://stackoverflow.com/a/8749213/1174378 ，它允许您更改内容在将 SOAP 消息发送到客户端之前对其进行处理。

# nhibernate - 从哪里获得最新的流利的 nhibernate 二进制文件

> ID：10684547
> 
> 赞同：1
> 
> 时间：2012-05-21T11:40:12.977
> 
> 标签：nhibernate, fluent-nhibernate

在哪里可以找到流畅的 nhibernate 的二进制文件。这个页面现在改变了[http://www.fluentnhibernate.org/](http://www.fluentnhibernate.org/)我在里面找不到任何二进制文件。

流利的 nhibernate 还活着吗？我在哪里可以获得二进制代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T11:42:23.060

您可以使用 nuget 下载它。

[http://nuget.org/packages/FluentNHibernate/1.3.0.717](http://nuget.org/packages/FluentNHibernate/1.3.0.717)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T12:08:24.723

如果您使用的是 NuGet，则可以下载最新的 Fluent NHibernate 包，它与最新版本的 NHibernate (3.3.0.4000) 兼容。如果您不使用 NuGet，我强烈推荐它。

# iphone - 如何实现“更新应用”机制

> ID：10684556
> 
> 赞同：1
> 
> 时间：2012-05-21T11:40:40.143
> 
> 标签：iphone, ipad

是否可以为未提交到 App Store 的应用程序实施“更新可用并安装”机制。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:48:39.023

您应该查看[iVersion](https://github.com/nicklockwood/iVersion)，它利用应用程序包标识符来检查应用程序的新版本是否已上传到 iTunes（使用公开可用的 iTunes 提要）。

由于 bundle id 技巧，你应该没问题，这意味着你可以安全地将它嵌入到你发布到 App Store 的第一个版本中。

对于非 App Store 版本，iVersion 提供了一种简单的机制，可以从给定 URL 的 plist 中检查新版本。此外，对于 beta ad-hoc 构建，您应该看看[TestFlight](https://testflightapp.com/)，它旨在帮助人们在 AppStore 之外分发他们的应用程序（但仅适用于 beta 构建）。

# java - Java SystemV 时区和 JodaTime

> ID：10684563
> 
> 赞同：5
> 
> 时间：2012-05-21T11:40:57.960
> 
> 标签：java, timezone, jodatime

我正在使用 JodaTime 在 Java 应用程序中处理时区。尝试从 java 时区的 id 构建 DateTimeZone (JodaTime) 对象时遇到问题。乔达扔了一个

```
 java.lang.IllegalArgumentException: The datetime zone id 'SystemV/HST10' is not recognised 
```

对于以下时区列表：

*   SystemV/HST10
*   系统V/YST9
*   SystemV/YST9YDT
*   SystemV/PST8
*   SystemV/PST8PDT
*   SystemV/MST7
*   SystemV/MST7MDT
*   系统V/CST6
*   SystemV/CST6CDT
*   系统V/EST5
*   SystemV/EST5EDT
*   SystemV/AST4
*   SystemV/AST4ADT

这些时区是做什么用的？它们与非程序员有关吗？为一般用途设计的应用程序是否应该支持这些时区？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T07:48:31.357

SystemV 时区 ID 已过时且已弃用。[但是，您可以通过重新编译](http://joda-time.sourceforge.net/tz_update.html)包含 systemv 时区数据文件的 joda-time jar 文件来使 Joda-Time 理解它们。请参阅systemv 数据文件中[注释掉的](https://github.com/JodaOrg/joda-time/blob/master/src/main/java/org/joda/time/tz/src/systemv)行。（即取消注释这些行并重建 jar 文件）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T06:52:44.723

我会将其添加为新帖子，因为它提供了我的问题的答案。SystemV 时区用于旧的 UNIX 操作系统，你猜对了，它被命名为 UNIX SYSTEM V。在与我的团队讨论后，我们决定它们对非程序员甚至现在的程序员都不重要。所以我们决定不在我们的应用程序中使用它们。

关于 SystemV 时区的一些参考资料：

*   [http://en.wikipedia.org/wiki/IANA_time_zone_database#Files_in_tzdata](http://en.wikipedia.org/wiki/IANA_time_zone_database#Files_in_tzdata)
*   [http://en.wikipedia.org/wiki/System_V](http://en.wikipedia.org/wiki/System_V)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T13:48:05.960

您可以使用 DateTimeZone#forTimeZone 方法简单地将 java TimeZone 转换为 DateTimeZone

```
TimeZone tz = //...  
DateTimeZone dtz = DateTimeZone.forTimeZone(tz); 
```

其中一些区域可以在没有“ *SystemV/* ” 的情况下解析

所以你可以使用

```
String tzId = "SystemV/MST7MDT";
DateTimeZone tz = DateTimeZone.forID(tzId.replaceAll("SystemV/", "")); 
```

你也可以让下一个

```
TimeZone tz = TimeZone.getTimeZone("SystemV/MST7MDT");
DateTimeZone jodaTz = DateTimeZone.forTimeZone(tz); 
```

# ruby-on-rails-3 - Rails 3.2.2 RVM 系统范围 Capistrano 安装找不到宝石

> ID：10684571
> 
> 赞同：3
> 
> 时间：2012-05-21T11:41:25.017
> 
> 标签：ruby-on-rails-3, gem, rvm, capistrano, ubuntu-11.04

在这个问题上，我真的非常需要帮助，而且有点失落。

我正在尝试使用 Capistrano Ext 部署新的生产服务器以允许登台和生产服务器，但它无法成功运行 bundle install --deployment。

cap staging deploy 在现有的 Ubuntu 系统上运行良好，但新服务器经常失败，如下所示

```
my-app$ sh -c 'cd /var/www/html/rails/myapp/releases/20120519174459&& export PATH=/usr/local/bin:/usr/local/mysql/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/git/bin:/opt/local/bin:/usr/local/rvm/gems/ruby-1.9.3-p194/bin:/usr/local/rvm/gems/ruby-1.9.3-p194@global/bin:/usr/local/rvm/rubies/ruby-1.9.3-p194/bin:/usr/local/rvm/bin && bundle install --deployment'
  Fetching gem metadata from http://rubygems.org/......
  Fetching gem metadata from http://rubygems.org/..
  Installing rake (0.9.2.2) 
  Gem::LoadError: Could not find rubygems-bundler (>= 0) amongst []
  An error occured while installing rake (0.9.2.2), and Bundler cannot continue.
  Make sure that `gem install rake -v '0.9.2.2'` succeeds before bundling. 
```

在任何其他目录中， ruby​​ -v 和 rails -v 都会产生预期的结果

```
my-home$ ruby -v
 ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux]

my-home$ rails -v
 Rails 3.2.2 
```

生产服务器上的本地 Gem 列表显示它们都可用

```
my-home$ gem list

*** LOCAL GEMS ***

actionmailer (3.2.3, 3.2.2)
actionpack (3.2.3, 3.2.2)
active_utils (1.0.3)
activemerchant (1.21.0)
activemodel (3.2.3, 3.2.2)
activerecord (3.2.3, 3.2.2)
activeresource (3.2.3, 3.2.2)
activesupport (3.2.3, 3.2.2)
addressable (2.2.7)
ansi (1.4.2)
arel (3.0.2)
bcrypt-ruby (3.0.1)
bootstrap-sass (2.0.1)
builder (3.0.0)
bundle (0.0.1)
bundler (1.1.3, 1.0.21)
cancan (1.6.7)
capistrano (2.12.0, 2.11.2)
capistrano-ext (1.2.1)
cocaine (0.2.1)
coffee-rails (3.2.2)
coffee-script (2.2.0)
coffee-script-source (1.3.3, 1.2.0)
daemon_controller (1.0.0)
devise (2.0.4)
erubis (2.7.0)
execjs (1.3.2, 1.3.0)
faraday (0.7.6)
fastthread (1.0.7)
haml (3.1.4)
hashie (1.2.0)
highline (1.6.12, 1.6.11)
hike (1.2.1)
i18n (0.6.0)
journey (1.0.3)
jquery-datatables-rails (1.9.1.3)
jquery-rails (2.0.2, 2.0.1)
jquery-ui-rails (0.3.0)
jruby-pageant (1.0.2)
json (1.7.3, 1.6.5)
libv8 (3.3.10.4 x86_64-linux)
mail (2.4.4)
metaclass (0.0.1)
mime-types (1.18, 1.17.2)
minitest (2.11.3)
mocha (0.10.5)
money (3.7.1)
multi_json (1.3.5, 1.1.0)
multipart-post (1.1.5)
mysql2 (0.3.11)
net-scp (1.0.4)
net-sftp (2.0.5)
net-ssh (2.4.0, 2.3.0)
net-ssh-gateway (1.1.0)
nifty-generators (0.4.6)
oauth (0.4.5)
oauth2 (0.5.2)
omniauth (1.0.3)
omniauth-facebook (1.2.0)
omniauth-google (1.0.1)
omniauth-linkedin (0.0.6)
omniauth-oauth (1.0.1)
omniauth-oauth2 (1.0.0)
omniauth-twitter (0.0.8)
orm_adapter (0.0.6)
paperclip (3.0.2)
passenger (3.0.12)
polyamorous (0.5.0)
polyglot (0.3.3)
rack (1.4.1)
rack-cache (1.2)
rack-ssl (1.3.2)
rack-test (0.6.1)
rails (3.2.3, 3.2.2)
railties (3.2.3, 3.2.2)
rake (0.9.2.2)
rdoc (3.12)
RedCloth (4.2.9)
rubygems-bundler (1.0.0)
rvm (1.11.3.3)
sass (3.1.18, 3.1.15)
sass-rails (3.2.5)
simple_form (2.0.1)
simple_oauth (0.1.5)
sprockets (2.1.3, 2.1.2)
sqlite3 (1.3.6)
squeel (1.0.1)
therubyracer (0.10.1, 0.9.10)
thor (0.14.6)
tilt (1.3.3)
timeliness (0.3.4)
treetop (1.4.10)
turn (0.9.4)
twitter (2.2.0)
tzinfo (0.3.33, 0.3.32)
uglifier (1.2.4, 1.2.3)
validates_timeliness (3.0.8)
warden (1.1.1)
will_paginate (3.0.3) 
```

服务器上的 rvm 系统范围似乎是正确的

```
my-home$ rvm list

  rvm rubies

  =* ruby-1.9.3-p194 [ x86_64 ]

  # => - current
  # =* - current && default
  #  * - default

 my-home$ rvm info

  RVM is not a function, selecting rubies with 'rvm use ...' will not work.
  You need to change your terminal settings to allow shell login.
  Please visit https://rvm.io/workflow/screen/ for example.

  ruby-1.9.3-p194:

    system:
      uname:       "Linux totg01 2.6.38-14-generic #58-Ubuntu SMP Tue Mar 27 20:04:55 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux"
      bash:        "/bin/bash => GNU bash, version 4.2.8(1)-release (x86_64-pc-linux-gnu)"
      zsh:         " => not installed"

    rvm:
      version:      "rvm 1.13.5 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]"
      updated:      "4 days 2 hours 5 minutes 13 seconds ago"

     ruby:
       interpreter:  "ruby"
       version:      "1.9.3p194"
       date:         "2012-04-20"
       platform:     "x86_64-linux"
       patchlevel:   "2012-04-20 revision 35410"
       full_version: "ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux]"

    homes:
      gem:          "/usr/local/rvm/gems/ruby-1.9.3-p194"
      ruby:         "/usr/local/rvm/rubies/ruby-1.9.3-p194"

    binaries:
      ruby:         "/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby"
      irb:          "/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/irb"
      gem:          "/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/gem"
      rake:         "/usr/local/rvm/gems/ruby-1.9.3-p194/bin/rake"

    environment:
      PATH:         "/usr/local/rvm/gems/ruby-1.9.3-p194/bin:/usr/local/rvm/gems/ruby-1.9.3-p194@global/bin:/usr/local/rvm/rubies/ruby-1.9.3-p194/bin:/usr/local/rvm/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games"
      GEM_HOME:     "/usr/local/rvm/gems/ruby-1.9.3-p194"
      GEM_PATH:     "/usr/local/rvm/gems/ruby-1.9.3-p194:/usr/local/rvm/gems/ruby-1.9.3-p194@global"
      MY_RUBY_HOME: "/usr/local/rvm/rubies/ruby-1.9.3-p194"
      IRBRC:        "/usr/local/rvm/rubies/ruby-1.9.3-p194/.irbrc"
      RUBYOPT:      ""
      gemset:       "" 
```

但是应用程序目录中有一个史诗般的失败，因为 ./vendor/bundle 中没有任何内容

```
app-dir$ ruby -v
 ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux]

app-dir$ rails -v
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.3/lib/bundler/spec_set.rb:90:in `block in materialize': Could not find rake-0.9.2.2 in any of the sources (Bundler::GemNotFound)
  from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.3/lib/bundler/spec_set.rb:83:in `map!'
  from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.3/lib/bundler/spec_set.rb:83:in `materialize'
  from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.3/lib/bundler/definition.rb:127:in `specs'
  from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.3/lib/bundler/environment.rb:27:in `specs'
  from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/rubygems-bundler-1.0.0/lib/rubygems-bundler/noexec.rb:41:in `candidate?'
  from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/rubygems-bundler-1.0.0/lib/rubygems-bundler/noexec.rb:59:in `setup'
  from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/rubygems-bundler-1.0.0/lib/rubygems-bundler/noexec.rb:74:in `<top (required)>'
  from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require'
  from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
  from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
  from /usr/local/rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:9:in `<main>' 
```

系统是 Ubuntu 11.04，ruby 使用 rvm 系统范围安装，默认为 1.93

deploy.rb 如下：

```
# This has been added due to multi deployment staging
set :stages, %w(staging production)
set :default_stage, "staging"

require 'capistrano/ext/multistage'

default_run_options[:pty] = true 

set :user, 'appuser'
set :application, "app"
set :keep_releases, 10

set :deploy_to, "/var/www/html/rails/#{application}"
set :repository,  "appuser@gitserver:/myapps/rails/#{application}.git"
set :deploy_via, :copy
set :ssh_options, {:forward_agent => true}
set :scm, :git 
set :branch, 'master'
set :scm_verbose, true
set :use_sudo, false

# This has been added due to multi deployment staging
# since :domain is defined in another file (staging.rb and production.rb),
# we need to delay its assignment until they're loaded
set(:domain) { "#{domain}" }
role(:web) { domain }
role(:app) { domain }
role(:db, :primary => true) { domain }

# If you are using Passenger mod_rails uncomment this:
namespace :deploy do
  desc "cause Passenger to initiate a restart"
  task :restart do
    run "touch #{current_path}/tmp/restart.txt"
  end
  desc "reload the database with seed data"
  task :seed do
    run "cd #{current_path}; rake db:seed RAILS_ENV=production"
  end
end

before "deploy:assets:precompile", :bundle_install

after "deploy:update_code", :bundle_install
desc "install the necessary prerequisites"
task :bundle_install, :roles => :app do
  run "cd #{release_path}&& export PATH=/usr/local/bin:/usr/local/mysql/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/git/bin:/opt/local/bin:/usr/local/rvm/gems/ruby-1.9.3-p194/bin:/usr/local/rvm/gems/ruby-1.9.3-p194@global/bin:/usr/local/rvm/rubies/ruby-1.9.3-p194/bin:/usr/local/rvm/bin && bundle install --deployment"
  run "cp -Rf #{shared_path}/config/* #{release_path}/config/"
end 
```

其他两个暂存和生产文件是....

部署/登台.rb

```
set :domain, "staging.myapp.com"
set :rails_env, "staging"
set :default_environment, {  
   'PATH' => "/usr/local/bin:/usr/local/mysql/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/git/bin:/opt/local/bin"  
} 
```

部署/生产.rb

```
set :domain, "production.myapp.com"
set :rails_env, "production"
set :default_environment, {  
  'PATH' => "/usr/local/rvm/gems/ruby-1.9.3-p194/bin:/usr/local/rvm/gems/ruby-1.9.3-p194@global/bin:/usr/local/rvm/rubies/ruby-1.9.3-p194/bin:/usr/local/rvm/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/mysql/bin"  
 } 
```

所以失败是试图将 install --deployment 捆绑在新交付的应用程序目录中。如果 bundle install --nodeployment 运行它工作正常！

我做错了什么或没有配置。我花了 2 天时间试图解决这个问题，但为什么 thios 不起作用似乎没有任何意义

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T13:58:02.870

您必须错过 capistrano 的 rvm 说明：[https ://rvm.io/integration/capistrano/](https://rvm.io/integration/capistrano/)

只需阅读它们，我会建议您使用 gem 版本，它基本上可以让您选择合适的 ruby​​：

安装：

```
gem install rvm-capistrano 
```

或添加到 Gemfile：

```
gem 'rvm-capistrano' 
```

示例 Capfile deploy.rb ：

```
set :rvm_type, :system    # :user is the default
set :rvm_ruby_string, ENV['GEM_HOME'].gsub(/.*\//,"") # Read from local system

require "rvm/capistrano"  # Load RVM's capistrano plugin. 
```

但最好去查看文档，因为有更多选项可用：[https ://rvm.io/integration/capistrano/](https://rvm.io/integration/capistrano/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-12T20:02:33.380

1.  *不要*使用 rvm1/capistrano3 或 rvm/capistrano；*不要*设置：pty。

2.  将服务器上的 runner 用户更改`~/.rvmrc`为 - 请注意，它必须位于它在不以交互方式运行时杀死自己的行*之前：*

```
# get rvm for non-interactive shells (eg capistrano) too
source /etc/profile.d/rvm.sh
export BASH_ENV=$HOME/.bashrc
export rvm_is_not_a_shell_function=0

# If not running interactively, don't do anything
[ -z "$PS1" ] && return 
```

# android - 有什么方法可以加快 Android 应用程序的调试速度？

> ID：10684574
> 
> 赞同：5
> 
> 时间：2012-05-21T11:41:30.463
> 
> 标签：android, debugging

我正在构建 android 应用程序，但是我在设计我的应用程序时感到厌烦，每次我更改字体大小时我都必须等待重新安装有没有办法加快这种设计方式？而且，如果我每次都必须重新调试时更改代码，是否也有任何方法可以加快这项任务的速度？

我的主要问题是，如果我导航到 10 Activity 并且更改在 11 中，那么我每次忙碌时都必须重新导航。我不能直接进入第 11 个活动，因为我需要以前活动的一些值和另外一件事

```
some thing like on web page we do just refresh that particular page and see changes 
```

## 注意：这个问题将对这个问题有很大帮助，[请参见此处](https://stackoverflow.com/questions/10648009/debuging-using-virtual-machine-like-vmware-virtualbox)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T11:45:11.093

我觉得直接在设备上调试比使用模拟器更快。此外，如果您在 Windows 中工作，它会比 Linux 和 MacOS 慢一点。你也可以试试这些平台

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T11:50:22.440

kishu27 说在设备上调试比使用模拟器快得多是正确*的*。如果你没有可用的设备，你可以在运行之间保持模拟器打开，这样你就不必每次都等待它初始化（这真的很慢）。

另一个提示 - 如果项目中有大量资源导致 APK 文件很大，则可以在调试应用程序的特定部分时删除所有不必要的资源。如果 APK 变得相当小，这可以加快安装过程。（这来自于我在编写一个包含许多示例视频进行测试的应用程序时的经验——除了一个视频之外的所有视频都被剪掉，并尽可能使用那个*视频*，这意味着 APK 小得多且速度极快安装时间。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T11:50:31.880

有时，您不可避免地必须重新安装 apk 来测试一些更改。为了加快速度，唯一的方法是尝试微调您的系统，使其运行得更快。

但是，为了测试一个简单的更改，例如新的字体大小，您不必重新安装 apk。您可以在 Eclipse 中可视化更改或使用[DroidDraw 之](http://droiddraw.org/)类的工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-04T18:55:50.047

是的，不过有一种更快的方法，第一步是在 Android Studio 中运行调试器。您注意到的第一件事是调试器断点可能会显着减慢调试速度（类似这样）。然后点击这个...

[![在此处输入图像描述](../Images/e809e914e8416a83ecb0a49bf8b0836b.png)](https://i.stack.imgur.com/Zemo6.png)

[![在此处输入图像描述](../Images/a6114dc187a741e0d0d1cad17682048e.png)](https://i.stack.imgur.com/3fenX.png) 在这里，您可以看到项目中的所有断点。

[![](../Images/03d21ae8332399313915ce916196bc2e.png)](https://i.stack.imgur.com/VqCyR.png)

您可以在底部框中删除保留在您项目中的调试点。这提高了我在任何设备中的调试过程，这是最好的解决方案。

# java - 如何按字母顺序对自定义列表视图进行排序？

> ID：10684578
> 
> 赞同：1
> 
> 时间：2012-05-21T11:41:51.363
> 
> 标签：java, android

我有一个带有 ImageView 和 textview 的自定义列表视图。我正在通过这种方法检索该列表视图：

```
private List<Currency> getModel() {
        List<Currency> list = new ArrayList<Currency>();
        for (int i = 0; i < countryCode.length; i++) {

            list.add(get(countryCode[i], flag[i]));
        }

        return list;
    } 
```

此方法返回特定列表项中的图像和文本视图列表，我在适配器中设置它以在列表视图中显示它。但是如何通过按字母顺序与列表中该文本视图的文本进行比较来对该列表进行排序？我试过这个

```
Collections.sort(list, new Comparator<String>() {
        @Override
        public int compare(String s1, String s2) {
            return s1.compareToIgnoreCase(s2);
        }
    }); 
```

但是这种方法只适用于字符串类型列表，但我的列表不是字符串类型？该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:46:12.330

尝试以这种方式进行比较

```
Collections.sort(list, new Comparator<Currency>() {
        @Override
        public int compare(Currency c1, Currency c2) {
            return c1.getCurrencyName().compareToIgnoreCase(c2.getCurrencyName());
        }
    }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T11:46:26.230

```
Collections.sort(list, new Comparator<Currency>() {
        @Override
        public int compare(Currency s1, Currency s2) {
            return s1.compareTo(s2); 
        }
}); 
```

不要忘记实现 `Comparable<Currency>`接口以实现`compareTo(Currency o);`您想要的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T11:57:09.770

您的`list`contains`Currency`对象，因此您需要创建一个比较器来比较`Currency`. 现在，我不确定`Currency`正在使用哪种类，但如果它是[来自标准 JDK](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Currency.html)的类，那么它有一个`getCurrencyCode()`返回字符串的方法（或者您可以使用`countryCode`您传递给`get()`调用的方法）。

然后，您只需创建一个`Comparator`这样的实例：

```
Collections.sort(list, new Comparator<Currency>() {
    @Override
    public int compare(Currency s1, Currency s2) {
        return s1.getCurrencyCode()
                 .compareToIgnoreCase(s2.getCurrencyCode());
    }
}); 
```

请注意，该`return`子句不必进行字符串比较。你所要做的基本上是返回一个小于零的值，如果你认为`s1`它“小于” `s2`，或者一个大于零的值，如果你认为它“大于” `s2`（或者如果它们相等则返回零） . 比较算法由您决定。

# android - android - 如何并排排列两个文本视图

> ID：10684582
> 
> 赞同：1
> 
> 时间：2012-05-21T11:41:56.307
> 
> 标签：android, textview

我有两个文本视图（TV_1，TV_2）。我想将 TV_2 设置在 TV_1 的右侧。它的意思是

1.  假设 TV1 占据屏幕中的一整行，那么 TV2 将设置在 TV1 下方。
2.  假设 tv1 占据了一个半线，那么 tv2 将占据其余的空间。如何实施？我试过了，但我没有。它类似于一个段落。

![在此处输入图像描述](../Images/9d5901cbb427e5725be709c333f82650.png)

```
 <RelativeLayout
        android:id="@+id/xrays_dicom_alert_TnC" 
        android:layout_height="wrap_content" 
        android:layout_width="fill_parent"
        android:layout_marginTop="20dp">                            

        <CheckBox
            android:id="@+id/xrays_dicom_alert_cb"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"/>     

        <TextView
            android:id="@+id/xrays_dicom_alert_TnC_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" 
            android:layout_toRightOf="@id/xrays_dicom_alert_cb"             
            android:text="I have read I agree to the following"
            android:textColor="@color/black"
            android:textAppearance="?android:attr/textAppearanceMedium" />  
        <TextView
            android:id="@+id/xrays_dicom_alert_statement"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" 
            android:layout_toRightOf="@id/xrays_dicom_alert_cb"
            android:layout_below="@id/xrays_dicom_alert_TnC_text"
            android:layout_alignRight="@id/xrays_dicom_alert_TnC_text" 
            android:text="Statement"
            android:textColor="@color/black"
            android:layout_weight="1"
            android:textAppearance="?android:attr/textAppearanceMedium" />     

    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:43:22.530

这在 Android 中是不可能的行为。

一个视图在屏幕上占据一个矩形区域。

[http://www.androidadb.com/class/android/view/View.java.html](http://www.androidadb.com/class/android/view/View.java.html)

或者你必须做这样的事情

![在此处输入图像描述](../Images/2d74daf962d9f0f914b1a2dc69e56295.png)

要使 TextView 中的某些文本可点击，可以使用*Spannable*概念。 [http://developer.android.com/reference/android/text/Spannable.html](http://developer.android.com/reference/android/text/Spannable.html)

使用`URLSpan` [http://www.androidadb.com/class/ur/URLSpan.html](http://www.androidadb.com/class/ur/URLSpan.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T11:54:29.780

我认为在你所问的模式中是不可能的。

# c# - 如何在函数期间找出调用者对象的名称？

> ID：10684585
> 
> 赞同：0
> 
> 时间：2012-05-21T11:42:03.947
> 
> 标签：c#, winforms, function, linklabel

我正在尝试使用链接标签创建一个“列表”来识别附件（在邮件客户端中）。所以，我有这个来创建链接：

```
Label newLabel = new LinkLabel();
newLabel.Name = "anexo" + Convert.ToString(anexos_file.Count); //anexos_file is a list where all the attachments Paths exist
newLabel.Text = Path.GetFileName(file);
newLabel.Left = bt_anexos.Left;
newLabel.Top = label2.Top;
newLabel.Width = 150;
newLabel.AutoSize = true;
newLabel.Click += new System.EventHandler(Click_anexo); //Click_anexo is the name of the function 
```

现在我需要知道如何创建一个功能，当我单击链接时，会删除链接本身。

那么，有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:45:14.397

在`Click_anexo`委托中你必须有`sender`参数。

该参数属于`object`类型，但实际上是引发该事件的控件。

只需将其转换为您需要的类型即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T11:50:22.300

```
private void Click_anexo(object sender, EventArgs arg)
{

} 
```

对象`sender`参数包含有关触发此事件的控件的信息。投射`sender`为标签

```
LinkLabel lbl = (LinkLabel)sender; 
```

并使用它

```
lbl.Visible = false; 
```

我认为使其不可见与删除一样好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:10:40.147

回应您的陈述并澄清我的一些评论。

> 要删除我只需添加： this.Controls.RemoveByKey(lbl.Name);

您在这里所做的只是从 ControlCollection 中删除您创建的控件。控件仍然存在，如果您创建了很多这些控件，它们仍然会在内存中徘徊。如果您打算重用这些控件，那么这很好，但如果它们只是一次性使用，您将导致内存泄漏。我会这样做的方式是删除事件处理程序并像这样处理对象：

```
private void Click_anexo(object sender, EventArgs e)
{
    LinkLabel lbl = (LinkLabel)sender;
    lbl.Click -= new EventHandler(Click_anexo);
    lbl.Dispose();
} 
```

# java - 用c编写一个关键监听器

> ID：10684594
> 
> 赞同：-2
> 
> 时间：2012-05-21T11:42:39.417
> 
> 标签：java, c, java-native-interface, hook, keylogger

我想使用 Java 编写自己的键盘记录器。要编写键盘记录器，我需要一个挂钩文件来捕获用户的键盘事件。我如何编写这个钩子文件，以便我能够获取用户按下的键。我不知道如何在 C 中编写全局键侦听器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:57:59.223

您正在尝试做的事情不会独立于平台。因此，我只能提示您如何在 Windows 上执行此操作。

在 Windows 中，执行此操作的方法是使用 winapi。您可以使用带有以下参数的[SetWindowsHookEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx)函数`WH_KEYBOARD`：

> 安装一个挂钩程序来监视击键消息。有关详细信息，请参阅 KeyboardProc 挂钩过程。

这样，您基本上会在每次按下某个键时告诉 Windows 调用您的预定义函数（作为 SetWindowsHookEx 的参数发送）。你可以阅读我给你的网页上的细节。

由于 SetWindowsHookEx 函数是特定于 windows 的，请注意您不能在 linux 或任何其他操作系统上使用它。此外，对于一个基本程序来做你想做的事，你并不真的需要 Java。你几乎可以用 C/C++ 做所有事情。

# c - malloc(0) 的行为

> ID：10684595
> 
> 赞同：8
> 
> 时间：2012-05-21T11:42:41.133
> 
> 标签：c, pointers

```
int main()
{
    char *p;
    p = (char* ) malloc(sizeof(char) * 0);
    printf("Hello Enter the data without spaces :\n");
    scanf("%s",p);
    printf("The entered string is %s\n",p);
    //puts(p);
} 
```

在编译并运行上面的代码时，即使我们为指针 p 分配了一个 0 字节的内存，程序也能够读取字符串。

声明中实际发生了什么`p = (char* ) malloc(0)`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-21T11:43:46.040

它是实现定义的`malloc()`将返回的内容，但使用该指针是未定义的行为。未定义的行为意味着任何事情都可能发生，从程序正常运行到崩溃，所有安全的赌注都被取消了。

C99 标准：

**7.22.3 内存管理功能**
**第 1 段：**

> 如果请求的空间大小为零，则行为是实现定义的：要么返回空指针，要么行为好像大小是某个非零值，但返回的指针不应用于访问对象.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:35:59.237

出于好奇，我在 linux 上使用 gcc 测试了您的代码，它比我预期的要强大得多（毕竟，将数据写入长度为 0 的字符缓冲区是未定义的行为......我*希望*它会崩溃） .

这是我对您的代码的修改：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    char *p;
    p = malloc(sizeof(char)*0);
    printf("Hello Enter some without spaces :\n");
    scanf("%s",p);

    char *q;
    q = malloc(sizeof(char)*0);
    printf("Hello Enter more data without spaces :\n");
    scanf("%s",q);

    printf("The first string is '%s'\n",p);
    printf("The second string is '%s'\n",q);
} 
```

我的第一个想法是，您可能会因为您只将数据读取到单个内存位置这一事实而节省 - 如果您使用两个缓冲区，第二个可能会覆盖第一个......所以我将代码分解为输入和输出部分：

```
Hello Enter some without spaces :
asdf
Hello Enter more data without spaces :
tutututu
The first string is 'asdf'
The second string is 'tutututu' 
```

如果第一个缓冲区被覆盖，我们会看到

```
The first string is 'tutututu'
The second string is 'tutututu' 
```

所以事实并非如此。[但这取决于您将多少数据打包到每个缓冲区中......见下文]

然后，我将大量数据粘贴到两个变量中：

```
perl -e 'print "c" x 5000000 . "\n" ' | xsel -i 
```

（这将 4+ MB 的 'c' 放入复制缓冲区）。我将其粘贴到第一个和第二个 scanf 调用中。该程序在没有分段错误的情况下使用它。

即使我没有分段错误，第一个缓冲区*确实*被覆盖了。我说不出来，因为太多的数据飞到了屏幕上。这是一个数据较少的运行：

```
$ ./foo
Hello Enter some without spaces :
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
Hello Enter more data without spaces :
ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
The first string is 'aaaaaaaaaaaa'
The second string is 'ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc' 
```

在 aaaaaaaaaaaa 之后有一个小字形，这就是我的终端如何表示它无法显示的 unicode 字符。这是典型的覆盖数据：你不知道*什么*会覆盖你的数据......这是未定义的行为，所以你很容易出现鼻恶魔。

底线是，当您写入尚未分配空间的内存时（显式使用 malloc 或隐式使用数组），您就是在玩火。迟早，你会覆盖记忆，给自己带来各种各样的悲伤。

这里真正的教训是*C 不做边界检查*。它会很*高兴地*让你写入你不拥有的内存。你可以整天这样做。您的程序可能会正确运行，也可能不会。它可能会崩溃，它可能会写回损坏的数据，或者它可能会工作，直到您扫描的字节比测试时使用的多一个字节。它不在乎，所以你必须这样做。

的情况只是[这个问题](https://stackoverflow.com/questions/1240970/c-why-do-you-specify-the-size-when-using-malloc/1241055#1241055)`malloc(0)`的一个特例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T12:29:14.380

除了 Als 评论 - 会发生什么：您将某处写入内存并从那里检索数据。因此，根据您的系统和操作系统类型，您会遇到异常或只是一些未定义的行为

# cruisecontrol.net - 即使 Soursecontrol 不可访问，Cruisecontrol 任务也可以执行

> ID：10684597
> 
> 赞同：0
> 
> 时间：2012-05-21T11:42:50.517
> 
> 标签：cruisecontrol.net, nunit-console, prebuild

我已经部署了 CruiseControl.Net（版本 1.6.7981.1）服务器，它执行以下任务：

1.  构建触发器
2.  贴标机
3.  VSTS Soursecontrol 块（从 TFS 2010 服务器获取源代码）
4.  在调试模式下构建代码
5.  使用 Nanat 任务运行 NUnit 测试
6.  合并 NUnit-Result.xml（发布者任务）

由于我每次运行 NUnit 任务之前都需要清除 NUnit-Result.xml 文件，因此我在 Nant.build 文件中添加了一个删除任务，该任务在 NUnit 任务运行之前删除 NUnit-results.xml。

现在我的问题是当我的构建触发时，如果我的 TFS 服务器不可访问，构建失败并且只有发布者任务运行，所以旧 Nunit 结果文件合并到失败的构建中。

我尝试运行“预构建”任务，但它仅在 TFS 服务器可访问时才有效。

现在我想要的是删除 Nunit-result.xml 的任务，即使我的 TFS 不可访问也可以运行（在源控制块之前或发布者块内/之后）

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:40:56.190

另一种选择是在 nunit 任务运行之前创建一个要运行的任务，这会删除 nunit-result.xml 文件。

例如执行 cmd /c "del NUnit-Result.xml"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T15:33:00.920

最后有一个发布者移动 nunit 结果文件或删除它。然后它不会出现在下一个构建中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T10:09:13.327

您可以添加 exec 任务以在文件合并之前删除发布者设置中的文件

像这样：

```
<publishers>
  <xmllogger />
  <statistics />
  <buildpublisher>
    <sourceDir>$(buildDir)\_PublishedWebsites\$(projectName)</sourceDir>
    <publishDir>$(webDir)</publishDir>
    <useLabelSubDirectory>false</useLabelSubDirectory>
    <alwaysPublish>false</alwaysPublish>
  </buildpublisher>
  <exec>
    <executable>$(workingDir)\deleteNunitResultxml.cmd</executable>
  </exec>
   ...
</publishers> 
```

# android - 我应该在哪里使用 Service 、 AsyncTask 和 Broadcast Receiver？

> ID：10684601
> 
> 赞同：4
> 
> 时间：2012-05-21T11:42:59.777
> 
> 标签：android, service, android-asynctask, broadcastreceiver

我有点困惑，在什么情况下我需要使用 Service、asyncTask 和 Broadcast Receiver 等应用程序组件。

任何人都可以解释它们之间的确切区别以及我需要在哪里使用这些组件吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T11:47:16.943

AsyncTask 是一种创建异步执行某些工作的新线程的友好方式。

广播接收器类似于系统事件的事件处理程序。它可以在后台运行并在发生某些事情时执行操作，例如关闭手机或打开 wifi..

服务只是一个在后台工作的应用程序（如守护程序）并为应用程序提供信息或仅执行任务。

对不起我的英语，我试着让我理解，但这不是我的母语

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T12:34:00.267

到目前为止，我将直接介绍我在项目中应用这三个的地方：

1.Service：你想在后台执行的事情，不需要任何用户交互。例如连续获取位置数据或连续发送一些数据到你的服务器。你也可以使用服务每隔几个时间单位执行任务。例如发送十分钟背景更新。

2.AsyncTask：创建一个新的执行线程。到目前为止我遇到的最佳用途是调用 Web 服务..我使用 AsyncTask 执行以下操作以进行 Web 服务调用 1.在 onPreExecute() 中显示进度条 2.执行我的 Web doInBackground(Params...) 中的服务调用 3.In onPostExecute(Result) 更新 UI 或使用来自 Web 服务的响应做一些其他事情。

3.BroadCastRecievers 就像您的应用程序的全局接收器。它们可以侦听系统事件，例如手机重启或您的应用程序中的自定义事件。我用它们在手机重启时启动服务，当我们关闭时停止电话。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T05:57:26.170

让我用一个用例来解释，这样你就更好地理解了——

1.  AsyncTask - 想要从服务器获取一些东西，或者向服务器发布一些东西？如果我们在主线程上这样做，用户将无法与应用程序交互。因此使用了 Asynctask，它在不同的线程中执行网络活动。

2.  服务 - 想在后台管理一些东西？比如每 10 分钟或 1 小时获取用户的位置，或者在用户穿越特定区域时根据位置提醒用户。即使应用程序未打开，Service 也会使应用程序运行（用户可能正在做其他事情，或者手机被锁定，Service 仍然在后台运行）。

3.  广播接收器 - 假设您正在跟踪位置并在本地存储（当互联网关闭时）。不是在互联网启动时，您想发送所有这些。因此，您向操作系统注册，希望监听该特定事件，并获得控制权。或者当你想让服务器知道设备重启了，那么我们只需要实现它。

清除？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T11:58:55.557

“服务”是一个在后台运行的组件，不与用户交互。每个开发人员都可以在他的应用程序中创建新的服务。服务支持真正的 Android 多任务处理，因为它们可以在自己的进程中运行。

“AsyncTask”封装了Threads和Handlers的创建。AsyncTask 通过 execute() 方法启动。execute() 方法调用 doInBackground() 和 onPostExecute() 方法。主要目的是在没有用户交互的情况下下载一些东西。

“广播接收器”是一个扩展广播接收器的类，它通过 AndroidManifest.xml 文件（或通过代码）在 Android 应用程序中注册为接收器。您可以通过 Context.registerReceiver() 方法动态注册广播接收器。BroadcastReceiver 类定义了 onReceive() 方法。只有在这个方法中你的BroadcastReceiver对象才有效，之后Android系统才能回收BroadcastReceiver。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-21T11:48:10.630

服务及其本地内存变量被加载到内存中并始终运行

广播接收器只保证在内存中并在处理事件时运行。

如果内存不足，操作系统可以从内存中删除广播接收器。

# business-intelligence - 使用 SSIS 将具有相同列的 Excel 文件合并到一个 Excel 文件中

> ID：10684603
> 
> 赞同：3
> 
> 时间：2012-05-21T11:43:10.193
> 
> 标签：business-intelligence, ssis

任何人都可以帮助我如何使用 SQL Server 集成服务（SSIS）将具有相同列且保存在一个文件夹中的 excel 文件合并到一个目标 excel 文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:16:30.813

为每个文件添加一个 Excel 源，一个“联合所有”任务来加入它们，所以如果你的第一个 excel 有 20 行，第二个有 30 行，你最终会得到 50 行：

![在此处输入图像描述](../Images/dd6842478329adfbc6f3bd2108e46426.png)

要设置源路径和目标路径，只需双击每个任务并设置连接管理器

编辑：

如何在[此处读取 excel 文件的示例](http://www.techrepublic.com/blog/datacenter/how-to-import-an-excel-file-into-sql-server-2005-using-integration-services/205)

# sql - SQL Server：完全外连接的顺序重要吗？

> ID：10684604
> 
> 赞同：6
> 
> 时间：2012-05-21T11:43:13.253
> 
> 标签：sql, sql-server, join

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T12:18:43.470

不，重新排列 JOIN 订单不应影响性能。MSSQL（与其他 DBMS 一样）有一个[查询优化器](http://en.wikipedia.org/wiki/Query_optimizer)，其工作是为任何给定查询找到最有效的查询计划。一般来说，这些做得很好 - 所以你不太可能轻易击败优化器。

也就是说，他们确实偶尔会出错。这就是[阅读执行计划](http://www.simple-talk.com/sql/performance/execution-plan-basics/)发挥作用的地方。您可以添加[JOIN 提示](http://msdn.microsoft.com/en-us/library/ms173815.aspx)来告诉 MSSQL 如何连接您的表（此时，排序*确实*很重要）。您通常会从最小到最大的表进行排序（尽管使用 a`FULL JOIN`可能不太重要）并遵循连接类型[的经验法则](http://blogs.msdn.com/b/craigfr/archive/2006/08/16/702828.aspx)。

既然你在做`FULL JOINS`，你基本上是从磁盘上读取全部 4 个表。这可能非常昂贵。您可能想重新检查问题，看看是否可以用不同的方式完成。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T12:16:11.637

*   改变⋈的顺序会改变结果吗？

不，顺序`FULL JOIN`无关紧要，结果都是一样的。但是请注意，您不能使用这样的东西（***以下可能会根据连接的顺序给出不同的结果***）：

```
SELECT 
    COALESCE(a.id, b.id, c.id, d.id) AS id,  --- Key columns used in FULL JOIN
    a.*, b.*, c.*, d.*                       --- other columns                 
FROM a 
  FULL JOIN b
      ON b.id = a.id
  FULL JOIN c
      ON c.id = a.id
  FULL JOIN d
      ON d.id = a.id ; 
```

你必须使用这样的东西（***无论连接顺序如何，结果都没有区别***）：

```
SELECT 
    COALESCE(a.id, b.id, c.id, d.id) AS id,   
    a.*, b.*, c.*, d.*                                   
FROM a 
  FULL JOIN b
      ON b.id = a.id
  FULL JOIN c
      ON c.id = COALESCE(a.id, b.id) 
  FULL JOIN d
      ON d.id = COALESCE(a.id, b.id, c.id) ; 
```

* * *

*   更改 ⋈ 连接的顺序会对性能产生影响吗？

考虑到第二个和第三个连接必须`COALESCE()`在列而不是列本身上完成，我认为只有使用足够大的表进行测试才能显示索引是否可以有效使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T11:48:20.527

更改完全外部联接的顺序不应影响性能或结果。唯一会根据完全外连接的顺序受到影响的是使用 SELECT * 时生成的列的默认顺序。您可能仅仅因为尝试对大型表进行多个联接而遇到性能问题。如果没有 where 子句来限制表，您可能会经历数十万个结果。

# emacs - 在 emacs 中禁用 sql 模式自动完成

> ID：10684622
> 
> 赞同：1
> 
> 时间：2012-05-21T11:44:25.757
> 
> 标签：emacs, sql-mode

我正在尝试以下列方式编写我的 pl/sql 代码：`id_sel`然后点击`TAB`or `Enter`，我已经`id_select`完成了！它适用于任何`...sel`单词。我认为这是一个`sql-mode`特点。如何禁用此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T15:12:10.633

这都是关于`abbrev-mode`。 `abbrev-mode`默认情况下使用`.abbrev_defs`文件，该文件利用`sql-mode-abbrev-table`来自`sql-mode.sql`.

# java - 使用泛型 GenericEntity

> ID：10684623
> 
> 赞同：3
> 
> 时间：2012-05-21T11:44:36.617
> 
> 标签：java, generics, jersey

我有几个客户端类通过 PUT 方法将 bean 列表发送到球衣网络服务，因此我决定使用泛型将它们重构为一个类。我的第一次尝试是这样的：

```
public void sendAll(T list,String webresource) throws ClientHandlerException {
    WebResource ws = getWebResource(webresource);
    String response = ws.put(String.class, new GenericEntity<T>(list) {});
} 
```

但是当我用以下方式调用它时：

```
WsClient<List<SystemInfo>> genclient = new WsClient<List<SystemInfo>>();
genclient.sendAll(systemInfoList, "/services/systemInfo"); 
```

它给了我这个错误：

```
com.sun.jersey.api.client.ClientHandlerException: A message body writer for Java type, class java.util.ArrayList, and MIME media type, application/xml, was not found 
```

所以我尝试取出 GenericEntity 声明的方法，它可以工作：

```
public void sendAll(T list,String webresource) throws ClientHandlerException {
 WebResource ws = ws = getWebResource(webresource);
 String response = ws.put(String.class, list);
} 
```

调用它：

```
 WsClient<GenericEntity<List<SystemInfo>>> genclient = new WsClient<GenericEntity<List<SystemInfo>>>();
 GenericEntity<List<SystemInfo>> entity;
 entity = new GenericEntity<List<SystemInfo>>(systemInfoList) {};
 genclient.sendAll(entity, "/services/systemInfo"); 
```

那么，为什么我不能在类中生成泛型类型的泛型实体，而在外部生成呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:14:16.963

GenericEntity 类用于绕过 Java 的类型擦除。在创建 GenericEntity 实例时，Jersey 会尝试获取类型信息。

`list`在第一个示例中，使用type的参数调用 GenericEntity 构造函数`T`，在第二个示例中，使用参数调用它`systemInfoList`，这似乎提供了更好的类型信息。我不知道 GenericEntity 构造函数在内部做什么，但由于 Java 的类型擦除，这两种情况似乎不同。

尝试绕过类型擦除绝不是明智之举，因为这些解决方案通常不起作用。您可以责怪 Jersey 尝试这样做（或责怪 Sun/Oracle 的类型擦除）。

# outlook-2007 - Outlook 2007 对话显示不正确

> ID：10684624
> 
> 赞同：0
> 
> 时间：2012-05-21T11:44:42.220
> 
> 标签：outlook-2007

在 Office 2007 中，当在其自己的窗口中查看消息时，对话非常奇怪且无序。

例如，3 条消息将显示为 -

```
Message 2 header
<break>
Message 1 header
Message 1
Message 2
Message 3 
```

这很奇怪，而且各种令人困惑，因为您必须滚动到消息底部才能找到已发送的回复。

预期的格式应该是 -

```
Message 3
<break>
Message 2 header
Message 2
<break>
Message 1 header
Message 1 
```

有人知道改变这个的设置吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:37:24.970

最后，这被证明是设置我们的免责声明软件（Mail Exclaimer）时出现的错误。

# java - 用 Java JNA 编写的关键监听器。无法停止线程

> ID：10684631
> 
> 赞同：1
> 
> 时间：2012-05-21T11:45:07.810
> 
> 标签：java, jna

我使用以下代码来监听全局键事件：

Win32HookManager.java

```
import com.sun.jna.platform.win32.Kernel32;
import com.sun.jna.platform.win32.User32;
import com.sun.jna.platform.win32.WinDef.HMODULE;
import com.sun.jna.platform.win32.WinDef.LRESULT;
import com.sun.jna.platform.win32.WinDef.WPARAM;
import com.sun.jna.platform.win32.WinUser;
import com.sun.jna.platform.win32.WinUser.HHOOK;
import com.sun.jna.platform.win32.WinUser.KBDLLHOOKSTRUCT;
import com.sun.jna.platform.win32.WinUser.LowLevelKeyboardProc;
import com.sun.jna.platform.win32.WinUser.MSG;

import java.awt.event.KeyEvent;

public class Win32HookManager {
    private static HHOOK keyboardHook;

    public static boolean installKeyboardHook(final NativeKeyboardListener listener) {
        final User32  lib  = User32.INSTANCE;
        final HMODULE hMod = Kernel32.INSTANCE.GetModuleHandle(null);

        final LowLevelKeyboardProc keyboardHookProc = new LowLevelKeyboardProc() {
            @Override
            public LRESULT callback(int nCode, WPARAM wParam, KBDLLHOOKSTRUCT info) {
                NativeKeyboardEvent ev = null;
                long                ti = System.currentTimeMillis();
                boolean             nh = true;

                if (nCode >= 0) {
                    switch (wParam.intValue()) {
                        case WinUser.WM_KEYDOWN:
                        case WinUser.WM_SYSKEYDOWN:
                            ev = new NativeKeyboardEvent(KeyEvent.KEY_PRESSED, ti, 0, info.vkCode);
                            nh = listener.keyPressed(ev);
                            break;

                        case WinUser.WM_KEYUP:
                        case WinUser.WM_SYSKEYUP:
                            ev = new NativeKeyboardEvent(KeyEvent.KEY_RELEASED, ti, 0, info.vkCode);
                            nh = listener.keyReleased(ev);
                            break;
                    }
                }

                if(nh) {
                    return lib.CallNextHookEx(keyboardHook, nCode, wParam, info.getPointer());
                }
                return new LRESULT(1);
            }
        };

        new Thread() {
            @Override
            public void run() {
                keyboardHook = lib.SetWindowsHookEx(WinUser.WH_KEYBOARD_LL, keyboardHookProc, hMod, 0);
                msgLoop();
                lib.UnhookWindowsHookEx(keyboardHook);
            }
        }.start();

        return keyboardHook != null;
    }

    public static boolean uninstallKeyboardHook() {
        if(keyboardHook != null) {
            return User32.INSTANCE.UnhookWindowsHookEx(keyboardHook);
        }

        return false;
    }

    private static void msgLoop()
    {
        final User32 lib = User32.INSTANCE;

        int result;
        MSG msg = new MSG();
        while ((result = lib.GetMessage(msg, null, 0, 0)) != 0) {
            if (result == -1) {
                System.err.println("error in get message");
                break;
            }
            else {
                System.err.println("got message");
                lib.TranslateMessage(msg);
                lib.DispatchMessage(msg);
            }
        }
    }
} 
```

NativeKeyboardListener

```
public interface NativeKeyboardListener {
    public boolean keyPressed (NativeKeyboardEvent e);
    public boolean keyReleased(NativeKeyboardEvent e);
} 
```

本机键盘事件

```
public class NativeKeyboardEvent {
    private int  id;
    private int  keyCode;

    public NativeKeyboardEvent(int id, long when, int modifiers, int keyCode) {
        this.id        = id;
        this.keyCode   = keyCode;
    }

    public int getId() {
        return id;
    }

    public int getKeyCode() {
        return keyCode;
    }
} 
```

不幸的是，它并没有像我预期的那样工作，即它检测到何时按下/释放一个键，但由于 msgLoop 方法中的 GetMessage()，它无法完成由 installKeyboardHook() 方法启动的线程。是的，我可以停止监听关键事件，但我不能停止线程。但是，此代码中似乎需要 GetMessage()。您是否看到任何解决此问题的方法？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T12:03:11.123

正如@SLaks 建议的那样，您需要某种标志来指示消息循环是否应该继续运行。然后，您可以使用[`PeekMessage`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644943%28v=vs.85%29.aspx)( [JNA Doc](http://twall.github.com/jna/3.3.0/javadoc/com/sun/jna/platform/win32/User32.html#PeekMessage%28com.sun.jna.platform.win32.WinUser.MSG,%20com.sun.jna.platform.win32.WinDef.HWND,%20int,%20int,%20int%29) )`GetMessage`从队列中检索消息，但不是阻塞操作。然后，您的消息循环应更改为以下内容：

```
while (!shouldQuit) {
    while ((result = lib.PeekMessage(msg, null, 0, 0, 1)) != 0) {
        // ...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T11:49:53.893

您应该制作一个`private boolean shouldQuit`标志，如果标志为真，则跳出消息循环。

然后，要停止线程，只需将该标志设置为 true。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T12:05:34.227

不要在您的消息处理线程中安装/卸载。

只有`GetMessage`处理（和退出检查）需要在附加`Thread`（应该是守护线程，顺便说一句）中发生。安装和拆卸挂钩应在其他地方进行。

查看 JNA 中贡献的[键盘钩子](https://github.com/twall/jna/blob/master/contrib/w32keyhook/com/sun/jna/contrib/demo/KeyHook.java)以获取正确过程的示例。

# cakephp - Cake php默认分页获取第一页和最后一页分页链接

> ID：10684644
> 
> 赞同：2
> 
> 时间：2012-05-21T11:45:48.387
> 
> 标签：cakephp, cakephp-1.3

如何获取Cake php默认分页以获取第一页和最后一页分页链接

```
<p>
    <?php
    echo $this->Paginator->counter(array(
        'format' => __('Page %page% of %pages%, showing %current% records out of %count% total, starting on record %start%, ending on %end%', true)
    ));
    ?>    </p>

<div class="paging">
    <?php echo $this->Paginator->prev('<< ' . __('previous', true), array(), null, array('class' => 'disabled'));?>
    |     <?php echo $this->Paginator->numbers();?>
    |
    <?php echo $this->Paginator->next(__('next', true) . ' >>', array(), null, array('class' => 'disabled'));?>
</div> 
```

这将输出

```
Page 1 of 89, showing 15 records out of 1326 total, starting on record 1, ending on 15

<< previous | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | next >> 
```

我如何使用默认分页获得首页和最后一页链接

```
first | << previous | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | next >> | last 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-21T12:05:54.880

我尝试了这段代码，它在 cakephp 1.3 中为我工作：--

```
<?php echo $this->Paginator->first(__('<< First', true), array('class' => 'number-first'));?>
<?php echo $this->Paginator->numbers(array('class' => 'numbers', 'first' => false, 'last' => false));?>
<?php echo $this->Paginator->last(__('>> Last', true), array('class' => 'number-end'));?> 
```

尝试实现这个...

这就是你要找的：--

```
 <?php echo $this->Paginator->first(__('First', true), array('class' => 'disabled'));?>
|     <?php echo $this->Paginator->prev('<< ' . __('Previous', true), array(), null, array('class'=>'disabled'));?>
|     <?php echo $this->Paginator->numbers(array('class' => 'numbers', 'first' => false, 'last' => false));?>
|     <?php echo $this->Paginator->next(__('Next', true) . ' >>', array(), null, array('class' => 'disabled'));?>
|     <?php echo $this->Paginator->last(__('Last', true), array('class' => 'disabled'));?> 
```

![在此处输入图像描述](../Images/44f4594a5df5a25fb8370f7ea7bfea1e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T11:56:30.430

我不确定我是否正确理解了您的问题，但只需打开帮助页面：

[PaginatorHelper::first()](http://api13.cakephp.org/class/paginator-helper#method-PaginatorHelperfirst)

[PaginatorHelper::last()](http://api13.cakephp.org/class/paginator-helper#method-PaginatorHelperlast)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-12T06:28:53.510

对于 cakephp-3.x

您一直希望首页链接会显示出来，当您到达第 5 页或更高时，您可以使用：

```
<?php if ($this->Paginator->counter('{{page}}') >= 5): ?>
    <li class="">
    <?php echo $this->Paginator->first('First'); ?>
    </li>
<?php endif; ?> 
```

同样对于最后一页，如果您只有 5 页或更少的页面，则不需要最后一页链接。在这种情况下，您可以使用：

```
<?php if ($this->Paginator->counter('{{pages}}') > 5): ?>
    <li class="paginate_button last">
    <?php echo $this->Paginator->last('Last') ?>
    </li>
<?php endif; ?> 
```

# java - 寻找关于 trie 的良好介绍

> ID：10684646
> 
> 赞同：6
> 
> 时间：2012-05-21T11:45:55.177
> 
> 标签：java, algorithm, data-structures, trie

我正在寻找关于`Tries`.
我发现谷歌搜索的大多数链接对我来说要么太简洁抽象，要么太琐碎。
有人可以提供一个很好的 Java 示例供我学习吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T12:04:55.157

谷歌搜索发现[这个博客](http://www.technicalypto.com/2010/04/trie-in-java.html)包含一系列 Java 文章。

但我建议买一本教科书。许多面向 Java 的数据结构和算法书籍都可以从您最喜欢的在线书店获得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T11:49:33.767

当然，看看[Steve Hanov 的网站](http://stevehanov.ca/)，比如[Fast and Easy Levenshtein distance using a Trie](http://stevehanov.ca/blog/index.php?id=114)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T12:41:10.857

我最近用 Java 编写了[Trie](http://code.google.com/p/java-algorithms-implementation/source/browse/src/com/jwetherell/algorithms/data_structures/Trie.java)和[Patricia Trie](http://code.google.com/p/java-algorithms-implementation/source/browse/src/com/jwetherell/algorithms/data_structures/PatriciaTrie.java)。它们的编写易于理解。所有的数据结构都是根据他们的维基百科描述构建的。

相关类：[Radix Trie](http://code.google.com/p/java-algorithms-implementation/source/browse/src/com/jwetherell/algorithms/data_structures/RadixTrie.java)、[Suffix Trie](http://code.google.com/p/java-algorithms-implementation/source/browse/src/com/jwetherell/algorithms/data_structures/SuffixTrie.java)、[Trie Map](http://code.google.com/p/java-algorithms-implementation/source/browse/src/com/jwetherell/algorithms/data_structures/TrieMap.java)。

如果您有任何问题随时问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T12:40:41.433

我推荐 Stefan Nilsson 的博士。1996 年的论文，[Radix Sorting & Searching](http://www.nada.kth.se/~snilsson/publications/Radix-sorting-searching/text.pdf)（搜索部分就是您要查找的内容。）对于研究出版物而言，这很容易阅读，并且包含很多关于尝试的理论和实践。

这些示例是用 C 语言编写的，而不是 Java 语言，但如果您了解 Java，那么理解它们应该不会有太大困难。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-06T12:04:50.560

在 trie 上发现这个 topcoder 链接非常有用：

[http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=usingTries](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=usingTries)

# json - 我们可以将 JSON 对象作为 RESTful Web 服务的 http get 的输入参数吗？

> ID：10684649
> 
> 赞同：3
> 
> 时间：2012-05-21T11:46:05.417
> 
> 标签：json

我是 RESTful Web 服务的新手。我可以有一个像下面这样接受 JSON 作为对象的方法吗？

```
@GET
   @Produces("application/json")
   @Consumes("application/json")
   @Path("/test")
   public Response modifyJson(JSONObject input); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T12:50:50.657

我相信默认情况下不可能将 Json 作为输入发送到 GET，只能发送其他动词（POST、PUT ...）

话虽如此，从技术上讲，这取决于服务是否允许您在 GET 上发送输入。通常是使用 GET 发送查询字符串参数。

希望能帮助到你

阿德马尔

# firefox-addon - XUL 浏览器内容中的工具提示（标题）不起作用？

> ID：10684653
> 
> 赞同：1
> 
> 时间：2012-05-21T11:46:26.683
> 
> 标签：firefox-addon, tooltip, xul

我正在为 FireFox 开发一个扩展。我使用包含[XUL`deck`元素的](https://developer.mozilla.org/en/XUL/deck)[XUL`browser`元素](https://developer.mozilla.org/en/XUL/browser)。不幸的是，只要浏览器中显示的页面具有 HTML[`title`](http://www.w3schools.com/tags/att_standard_title.asp)属性，该属性的值[`title`](http://www.w3schools.com/tags/att_standard_title.asp)就不会显示为工具提示。

如何让工具提示正确显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T19:33:11.943

没有`title`在工具提示中自动显示属性的机制 - 浏览器窗口有专门的代码，您需要在扩展中复制此代码。这意味着您需要定义一个[`<tooltip>`元素](https://developer.mozilla.org/en/XUL/tooltip)，例如：

```
<popupset>
  <tooltip id="browserTooltip" onpopupshowing="return fillTooltip(this);"/>
</popupset> 
```

您应该在`<browser>`元素中使用此工具提示，如下所示：

```
<browser tooltip="browserTooltip"/> 
```

并且您应该创建一个`fillTooltip()`在您的工具提示出现时将被调用的函数。它将需要查看鼠标指针悬停在的 HTML 元素，检查其`title`属性并将该属性的值放入工具提示中。在 Firefox 中执行这项工作的功能是[`FillInHTMLTooltip()`](http://hg.mozilla.org/mozilla-central/file/0e2cc686b07b/browser/base/content/browser.js#l3090)虽然您可能想要使用这样的更简单的变体（未经测试的代码）：

```
function fillTooltip(tooltip)
{
  // Walk up the DOM hierarchy until we find something with a title attribute 
  var node = document.tooltipNode;
  while (node && !node.hasAttribute("title"))
    node = node.parentNode;

  // Don't show tooltip if we didn't find anything
  if (!node)
    return false;

  // Fill in tooltip text and show it
  tooltip.setAttribute("label", node.getAttribute("title"));
  return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T08:52:36.817

我为那些感兴趣的人找到了解决方案，它是通过向具有以下值的 XUL 浏览器元素添加一个工具提示属性：
`tooltip="aHTMLTooltip"`
或者使用 javascript 以编程方式添加它，如下所示：
`browser.setAttribute('tooltip','aHTMLTooltip');`

更多细节检查：[https ://bugzilla.mozilla.org/show_bug.cgi?id=451792#c1](https://bugzilla.mozilla.org/show_bug.cgi?id=451792#c1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-19T12:33:42.207

工作示例：

```
<?xml version="1.0"?>
<?xml-stylesheet href="chrome://global/skin" type="text/css"?>
<window id="mainWindow" xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul" title="NanoFL" width="800" height="600" persist="screenX screenY width height sizemode">
<script>
    <![CDATA[

    function fillTooltip(tooltip)
    {
        var nodes = document.getElementById("browser").contentWindow.document.querySelectorAll(":hover");
        for (var i=nodes.length-1; i>=0; i--)
        {
            if (nodes[i].hasAttribute("title"))
            {
                tooltip.setAttribute("label", nodes[i].getAttribute("title"));
                return true;
            }
        }
        return false;
    }

    ]]>
</script>
<browser id="browser" src="chrome://nanofl/content/index.html" flex="1" disablehistory="true" tooltip="browserTooltip" />
<tooltip id="browserTooltip" onpopupshowing="return fillTooltip(this)"/>
</window> 
```

# arrays - 在 Perl 中存储和读取文件中的哈希和数组

> ID：10684656
> 
> 赞同：9
> 
> 时间：2012-05-21T11:46:35.400
> 
> 标签：arrays, perl, file, hash, save

我是菜鸟。我需要一些关于如何在 perl 下保存和读取数据的基本知识。说要保存一个哈希和一个数组。应该使用什么格式（扩展名）的文件？文本？到目前为止，我只能将所有内容保存为 string`print FILE %hash`并将它们读回 string `print <FILE>`。如果我需要来自文件的函数哈希和数组输入，我应该怎么做。如何将它们放回散列和数组？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-21T11:55:09.457

您正在寻找数据**序列化**。稳健的流行选择是[Sereal](http://p3rl.org/Sereal)、[JSON](http://p3rl.org/JSON) [::XS](http://p3rl.org/JSON::XS)和[YAML::XS](http://p3rl.org/YAML::XS)。鲜为人知的格式有：[ASN.1](http://enwp.org/ASN.1)、[Avro](http://avro.apache.org/)、[BERT](http://bert-rpc.org/)、[BSON](http://bsonspec.org/)、[CBOR](https://www.rfc-editor.org/rfc/rfc7049)、[JSYNC](http://jsync.org/)、[MessagePack](http://msgpack.org/)、[Protocol Buffers](http://code.google.com/p/protobuf/)、[Thrift](http://thrift.apache.org/)。

其他经常提到的选择是[Storable](http://p3rl.org/Storable)和[Data::Dumper](http://p3rl.org/Data::Dumper) (或类似的)/ `eval`，但我不推荐它们，因为 Storable 的格式取决于 Perl 版本，并且`eval`不安全，因为它执行任意代码。截至 2012 年，解析对应的[Data::Undump](http://p3rl.org/Data::Undump)还没有取得很大进展。我也不推荐使用 XML，因为它不能很好地映射 Perl 数据类型，并且存在多个竞争/不兼容的模式如何在 XML 和数据之间进行转换。

* * *

代码示例（已测试）：

```
use JSON::XS qw(encode_json decode_json);
use File::Slurp qw(read_file write_file);
my %hash;
{
    my $json = encode_json \%hash;
    write_file('dump.json', { binmode => ':raw' }, $json);
}
{
    my $json = read_file('dump.json', { binmode => ':raw' });
    %hash = %{ decode_json $json };
} 
```

* * *

```
use YAML::XS qw(Load Dump);
use File::Slurp qw(read_file write_file);
my %hash;
{
    my $yaml = Dump \%hash;
    write_file('dump.yml', { binmode => ':raw' }, $yaml);
}
{
    my $yaml = read_file('dump.yml', { binmode => ':raw' });
    %hash = %{ Load $yaml };
} 
```

* * *

从这里开始的下一步是[**对象持久性**](https://stackoverflow.com/questions/281803/is-there-an-object-centric-perl-orm)。

* * *

另请阅读：[Perl 的序列化程序：何时使用什么](http://blogs.perl.org/users/aristotle/2015/01/perl-serializers.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T11:57:44.817

Perlmonks 对序列化有两个很好的讨论。

*   [如何保存和重新加载我的哈希](http://www.perlmonks.org/?node_id=510202)
*   [如何可视化我的复杂数据结构？](http://www.perlmonks.org/?node_id=481746)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T12:00:42.950

这实际上取决于您希望如何将数据存储在文件中。我将尝试编写一些基本的 perl 代码，以使您能够将文件读入数组或将哈希写回文件中。

```
#Load a file into a hash.
#My Text file has the following format.
#field1=value1
#field2=value2  
#<FILE1> is an opens a sample txt file in read-only mode.
my %hash;
while (<FILE1>)
{
  chomp;
  my ($key, $val) = split /=/;
  $hash{$key} .= exists $hash{$key} ? ",$val" : $val;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T14:54:52.507

如果您是新手，我只是建议使用 join() 从数组/散列生成字符串，然后他们使用“print”将其写入，然后读取并使用 split() 再次生成数组/散列。这将是更简单的方式，例如 Perl 教课本示例。

# c# - DataGrid 不显示数据

> ID：10684657
> 
> 赞同：0
> 
> 时间：2012-05-21T11:46:40.407
> 
> 标签：c#, windows-mobile, compact-framework, compact-framework2.0

`DataGrid`在读取 CSV 文件并对其进行处理后，我试图在我的移动应用程序上显示一个。这是我到目前为止所拥有的：

```
private void btOpenFile_Click(object sender, EventArgs e)
{
    try 
    {           
        // Process all data into an array of Object 
        // this.records array contains objects of type MyRecord

        // Create datatable and define columns
        DataTable dt = new DataTable("myDt");
        dt.Columns.Add( new DataColumn("String A",typeof(string)));
        dt.Columns.Add( new DataColumn("Int 1", typeof(int)));                   

        // Loop through and create rows
        foreach(MyRecord record in records) {
            DataRow row = dt.NewRow();                        
            row[0] = record.stringA;
            row[1] = record.int1;
            dt.Rows.Add(row);
        }   

        // Create dataset and assign it to the datasource..
        DataSet ds = new DataSet("myDs");
        ds.Tables.Add(dt);                                          
        dataGrid.DataSource = ds;
        dataGrid.Refresh();

    }
    catch (Exception ex)
    {
        MessageBox.Show("Error: " + ex.Message,"Error");
    }
} 
```

运行我的应用程序时，我得到的只是一个空白的数据网格组件。有人可以指出我的错误吗？或者如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:52:32.883

尝试不使用 DataSet dataGrid.DataSource = dt;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T12:34:12.130

试试这个会有所帮助...

```
DataSet Ds = new DataSet();
DataTable Dt = new DataTable();

Ds.Tables.Add(Dt);
Dt.Columns.Add(new DataColumn("String A", typeof(string)));                
Dt.Columns.Add(new DataColumn("Int 1", typeof(int)));      

Dt.Rows.Add(new object[] { "Patricia", 3 });
Dt.Rows.Add(new object[] { "John", 4 });
Dt.Rows.Add(new object[] { "Mayer", 5 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T11:53:56.930

代替：

```
dataGrid.DataSource = ds;         
dataGrid.Refresh(); 
```

尝试：

```
dataGrid.SetDataBinding(ds, "myDt"); 
```

这具有同时设置数据源和数据成员的效果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T12:43:22.580

问题是您不能仅将数据源引用为 Dataset 它应该类似于 Dataset.Datatable ... 这是一个示例

```
Dataset DS = new Dataset();
DS.Tables.Add(TableName);

//
Populate dataset
//

mydatagrid.Datasource = DS.Tables[0]; 
```

所以简而言之，你必须参考数据集中的表格来显示数据......希望这有帮助...... :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T12:44:53.533

如果您也将 DataSource 设置为 DataSet 内的表，它应该也能正常工作..类似于：

```
datagrid.DataSource = ds.Tables["myDt"]; 
```

请记住，一个数据集可能包含多个表，我们必须明确告诉它使用哪一个或在哪里查找 :)

hth

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-03-02T21:30:31.200

我知道现在回答很晚......但这对其他人会有所帮助......

```
DataSet ds = gridUpdate.GridUpdate(); 
```

（不用担心 gridUpdate.GridUpdate() 它是我创建数据集的功能）

```
dataGridView1.DataSource = ds.Tables[0] 
```

# java - MediaPLayer 出现错误

> ID：10684667
> 
> 赞同：0
> 
> 时间：2012-05-21T11:47:15.297
> 
> 标签：java, android, media-player, android-mediaplayer

我使用`MediaPlayer`来自 http 的流音乐

我有两个问题：

1.  是`MediaPlayer`在流中播放音乐还是下载音乐并在它之后播放？

2.  为什么我有这个错误`LogCat`：

    > MediaPlayer(3438)：无法在客户端打开文件，正在尝试服务器端

    但在 sec 或 2 音乐开始播放后。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T12:08:08.200

*   它使用渐进式流媒体。见[http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)
*   在我看来，这是一个调试语句，而不是一个错误。这就是它的来源：`MediaPlayer.java: Log.d(TAG, "Couldn't open file on client side, trying server side");`。似乎它正在尝试在本地查找 URI，并且只有在未找到时才会在数据源中设置媒体 URI（读取 - 打开网络连接）。

# javascript - Jplayer 2.1.0 不能在 IE9 上运行

> ID：10684678
> 
> 赞同：0
> 
> 时间：2012-05-21T11:48:14.813
> 
> 标签：javascript, jquery, internet-explorer-9, jplayer

我不能让 Jplayer 2.1.0 在 IE9 上工作（没有检查以前的版本——我不理会它们）。此代码在 Firefox、Chrome 和 Opera 上运行良好。它应该自动启动并循环播放。我已经尝试了一切来完成这项工作，但由于我不是真正的编码员，所以我的努力​​是徒劳的。

```
$(document).ready(function(){
    $("#jquery_jplayer_1").jPlayer({
        ready: function (event) {
            $(this).jPlayer("setMedia", {
                mp3:"http://www.tomziebinski.com/sounds/1.mp3"
            }).jPlayer("play");
        },
        ended: function(){
            $(this).jPlayer("setMedia", {
                mp3:"http://www.tomziebinski.com/sounds/2.mp3"
            }).jPlayer("play");
        },

        swfPath: "http://www.tomziebinski.com/jQuery.jPlayer.2.1.0",
        supplied: "mp3",
        loop: "true",
        volume: 0.3
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:30:20.833

您是否检查过是否添加了正确的 MIME 类型？当文件在一个浏览器中播放但在另一个浏览器中播放时，这通常是一个很好的起点。

查看服务器响应下的 MIME 类型章节：http: [//jplayer.org/latest/developer-guide/](http://jplayer.org/latest/developer-guide/) 和此处： http://forums.contribs.org/index.php?topic= [38947.0](http://forums.contribs.org/index.php?topic=38947.0)

# javascript - Requirejs + jQuery 失败，但仅在远程服务时

> ID：10684681
> 
> 赞同：1
> 
> 时间：2012-05-21T11:48:17.200
> 
> 标签：javascript, jquery, requirejs

我的应用程序在本地使用 Requirejs 已经有一段时间没有问题了，但是当我把它放在远程服务器上时，我又开始看到与 Requirejs 相关的问题。

我有一个 jQuery 包装脚本，我在其中加载了实际的 jquery 和一些 jQuery 插件，例如 jquery.cookie。

```
## boot.js

// Loaded via <script data-main="/boot.js" src="/vendor/requirejs/require.js"></script>
require({
  baseUrl: '/vendor/requirejs/',
  waitSeconds: 5,
  paths: {
    jquery: '/vendor/jquery/dist/jquery',
    jQuery: '/assets/javascripts/jquery-wrapper',
  }
}, [
  'jQuery'
], function($) {
    ...
  });
});

## /assets/javascripts/jquery-wrapper.js

define([
  'order!jquery',
  'order!/vendor/jquery-cookie/jquery.cookie.js'
], function($) {
  // In here I also define some on my own functions on $

  return $;
}); 
```

问题是当我访问远程服务器上的应用程序时，在评估 jquery.cookie 脚本时“jQuery”是未定义的，这意味着它在加载 jQuery 之前正在运行。

```
Uncaught ReferenceError: jQuery is not defined jquery.cookie.js:47
    (anonymous function) jquery.cookie.js:47 
```

我虽然命令！前缀应该防止这样的事情发生吗？

同样，这在本地也能正常工作。只有在为远程服务器提供服务时，我才会遇到问题。

如果相关，我在本地使用的是瘦服务器。远程我也使用 Thin 但在 Nginx 之后，尽管 Nginx 只是将所有东西都代理给 Thin。

没有迹象表明在 5 秒超时内未找到文件。错误立即出现在控制台中。

谁能告诉我哪里出错了？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:12:23.590

我看不出您使用 order 插件加载 JQuery 的方式有什么问题，但是如果它在本地而不是远程工作，您可以检查服务器返回的文件的 HTTP 标头，并查看它们是否支持浏览器缓存（ Cache-Control, Pragma, Expires, ...)，因为 order 插件仅在 javascript 文件可被浏览器缓存时才有效。

If this is not the case, maybe you can load JQuery using priority on your RequireJS configuration, to load JQuery before the other plugins, or if you want, you can also wrap the plungis in define functions

```
define(['JQuery'], function ($) {
    //Paste plugin code here.
}); 
```

# python - Django：Python全局变量重叠，即使是单独运行

> ID：10684685
> 
> 赞同：3
> 
> 时间：2012-05-21T11:48:32.170
> 
> 标签：python, django, global-variables

我有一个带有全局变量的 Django（所以 Python）程序：

```
g_variable = [] 
```

我使用这是几个函数，我还更改了值：

```
my_function()
    global g_variable 
    g_variable.append(some_value) 
```

在我开始多次重叠调用程序之前，这种方法效果很好——在 Django 中，这意味着我可以快速多次加载网页。我预计全局变量只会在每个单独的运行中是全局的，但事实并非如此。在一次运行中附加到 g_variable 的值可以在下一次运行中看到。

对我来说，这意味着我现在必须将此变量传递给我的所有函数：

```
my_function(non_g_variable)
    non_g_variable.append(some_value)
    return non_g_variable 
```

用

```
non_g_variable = my_function(non_g_variable) 
```

那是对的吗？在我更改所有代码之前，我只想确保我没有错过任何东西。它将添加很多额外的行和回电。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T12:30:01.953

正如其他答案和评论所说，您可能应该重新设计代码以摆脱全局变量。类似于以下内容：

```
class WebpageStructure(object):
    def __init__(self, html):
         # parse the html
         self.structure = self.parse(html)
    def contains_link(self):
         # figure it out using self.structure
         return ...

# in the view(s)
webpage = WebpageStructure(html_to_parse)
if webpage.contains_link():
    ... 
```

但是有以下选择：

1.  如果您的代码始终在单个线程中运行，您可以通过在每次运行之间设置`g_variable`来解决问题。`[]`可能有一个顶级函数（也许是 Django 视图函数？）总是标记每次运行的开始。`g_variable`您应该在此顶级函数中重新初始化。

2.  如果您的代码运行多线程，则不能使用普通的全局变量。并发线程将更新相同的全局变量。

    关于 1 和 2：要在单线程中运行 Django 站点，请使用`manage.py runserver --nothreading`开发服务器。如果您在 apache/mod_wsgi 中托管您的站点，您可以使用[daemon mode](http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide#Delegation_To_Daemon_Process)来控制它。请注意，您可以并行运行多个单线程进程。在这种情况下使用全局变量将起作用，因为进程是隔离的。

    如果可能，您的代码应该在任何进程/线程模型中工作。

3.  如果您的代码运行多线程并且您真的想避免传递`g_variable`列表，您可以使用线程局部变量。[此处](http://docs.python.org/library/threading.html#threading.local)和[此处](http://hg.python.org/cpython/file/4973c90ce9e6/Lib/_threading_local.py)的文档。

例子：

```
import threading
threadlocal = threading.local()

def mydjangoview(request):
    # In your top-level view function, initialize the list
    threadlocal.g_variable = []
    # Then call the functions that use g_variable
    foo()
    bar()

    # ... and then I guess you probably return a response?
    return Response(...)

def foo():
    threadlocal.g_variable.append(some_value)

def bar():
    threadlocal.g_variable.append(some_other_value) 
```

其他链接：

*   [为什么在 Django 中使用线程局部变量不好？](https://stackoverflow.com/questions/3227180/why-is-using-thread-locals-in-django-bad)
*   [threadlocals 有什么不好](https://stackoverflow.com/questions/1920053/what-is-so-bad-with-threadlocals)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T12:31:02.017

这就是全局变量在 Python 中的工作方式。只要 Web 应用程序服务器保持运行，全局状态就会持续存在。

一个常见的解决方案是将您的函数放在一个类中，将每个请求的状态存储在该类上，并为每个请求使用该类的一个新实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T12:23:39.080

使用全局变量（常量除外）几乎总是容易出错，并且经常产生难以阅读的代码。因此，这是错误的概念。接收参数、修改和返回它比动态修改全局变量更明确地说明函数正在做什么。

所以是的，我会继续实施接收-修改-返回概念，或者等到有人对您的问题有一个特殊的“djangonic”解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T12:43:33.720

您的问题可以通过实现[缓存](https://docs.djangoproject.com/en/dev/topics/cache/)来解决——缓存的简化解释是——跨*会话*的全局变量。

# mysql - 如何为 SUM() 选择 DISTINCT 行？

> ID：10684686
> 
> 赞同：1
> 
> 时间：2012-05-21T11:48:32.877
> 
> 标签：mysql

我正在尝试运行一份报告，该报告将为我提供过去 3 个月的每日“情节”销售额，但我很难让 SUM() 正确加起来。单个 Transaction_ID 可能跨越多个 Plot 记录。通过下面的查询，如果有 2 个具有相同 Transaction_ID 的地块，则将它们加在一起，这不是我想要的。我需要它在 SUM() 中只使用一次事务行。

```
SELECT 
    DATE_FORMAT(Transactions.CreateDate,'%m-%d') AS MonthAndDay, 
    DATE_FORMAT(Transactions.CreateDate,'%M, %D') AS Day, 
    SUM(Transactions.AmountTotal) AS DailySales 
FROM 
    Transactions, 
    Plots 
WHERE 
    Transactions.Transaction_ID = Plots.Transaction_ID AND 
    Transactions.CreateDate <= CURDATE() AND 
    Transactions.CreateDate >= DATE_SUB(CURDATE(),INTERVAL 3 MONTH) 
GROUP BY 
    MonthAndDay 
ORDER BY 
    MonthAndDay ASC 
```

表结构如下所示：

```
+-----------------------------------+----------------------------------------------------------------------------------------------------+------+-----+---------------------+----------------+
| Field                             | Type                                                                                               | Null | Key | Default             | Extra          |
+-----------------------------------+----------------------------------------------------------------------------------------------------+------+-----+---------------------+----------------+
| Transaction_ID                    | int(11)                                                                                            | NO   | PRI | NULL                | auto_increment | 
| CreateDate                        | datetime                                                                                           | NO   |     | 0000-00-00 00:00:00 |                | 
| AmountTotal                       | decimal(10,2)                                                                                      | NO   |     | 0.00                |                | 
+-----------------------------------+----------------------------------------------------------------------------------------------------+------+-----+---------------------+----------------+

+------------------------+-------------+------+-----+---------------------+----------------+
| Field                  | Type        | Null | Key | Default             | Extra          |
+------------------------+-------------+------+-----+---------------------+----------------+
| Plot_ID                | int(11)     | NO   | PRI | NULL                | auto_increment | 
| Transaction_ID         | int(11)     | YES  | MUL | NULL                |                | 
| Plot                   | varchar(10) | NO   |     | 0                   |                | 
+------------------------+-------------+------+-----+---------------------+----------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:51:21.920

以下解决方案有效，尽管使用了子查询：

```
SELECT
   DATE_FORMAT(Transactions.CreateDate,'%m-%d') AS MonthAndDay,
   DATE_FORMAT(Transactions.CreateDate,'%M, %D') AS Day,
   SUM(Transactions.AmountTotal) AS DailySales
FROM
   Transactions
WHERE
   Transactions.Transaction_ID IN (SELECT DISTINCT Transaction_ID FROM Plots) AND
   Transactions.CreateDate <= CURDATE() AND
   Transactions.CreateDate >= DATE_SUB(CURDATE(),INTERVAL 3 MONTH)
GROUP BY
   MonthAndDay
ORDER BY
   MonthAndDay ASC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:59:02.833

在我的脑海中，我认为以下方法会起作用，但我还没有测试过，所以可能是错误的：

```
SELECT 
    DISTINCT Transactions.Transaction_ID,
    DATE_FORMAT(Transactions.CreateDate,'%m-%d') AS MonthAndDay, 
    DATE_FORMAT(Transactions.CreateDate,'%M, %D') AS Day, 
    SUM(Transactions.AmountTotal) AS DailySales 
FROM 
    Transactions, 
    Plots 
WHERE 
    Transactions.Transaction_ID = Plots.Transaction_ID AND 
    Transactions.CreateDate <= CURDATE() AND 
    Transactions.CreateDate >= DATE_SUB(CURDATE(),INTERVAL 3 MONTH) 
GROUP BY 
    MonthAndDay 
ORDER BY 
    MonthAndDay ASC 
```

第二步：

```
SELECT 
    DATE_FORMAT(Transactions.CreateDate,'%m-%d') AS MonthAndDay, 
    DATE_FORMAT(Transactions.CreateDate,'%M, %D') AS DAY, 
    SUM(Transactions.AmountTotal) AS DailySales,
    COUNT(Transactions.Transaction_ID) AS Tmp
FROM 
    Transactions, 
    Plots
WHERE 
    Transactions.Transaction_ID = Plots.Transaction_ID AND 
    Transactions.CreateDate <= CURDATE() AND 
    Transactions.CreateDate >= DATE_SUB(CURDATE(),INTERVAL 3 MONTH) 
GROUP BY 
    Plots.Plot_ID, MonthAndDay 
ORDER BY 
    MonthAndDay ASC 
```

这在 Plots 表中产生了 3 行，其中两行引用 Transaction_ID 2，一行引用 Transaction_ID 1

这导致出现三个绘图行，但总和值显示正确。

# jquery-ui - 具有日期范围的 jQuery UI Datepicker，从当前日期开始

> ID：10684688
> 
> 赞同：1
> 
> 时间：2012-05-21T11:48:41.577
> 
> 标签：jquery-ui, uidatepicker, jquery-ui-datepicker

我正在为酒店活动创建功能，并使用 jQuery UI datepicker 输入两个字段，即活动开始日期和活动结束日期。

因此，似乎我想将开始日期输入到当前日期，这意味着事件开始日期不能设置为过去日期。那么你能告诉我它是如何用编码完成的吗？

[例如此演示中显示的日期选择器](http://www.phpjabbers.com/hotels-booking-system/demo.php)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T11:53:01.403

`$('#input').datepicker({ minDate : new Date() });`会做的。

看一个例子，抱歉，我不能包含 CSS 文件

[http://jsfiddle.net/xVAfP/](http://jsfiddle.net/xVAfP/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:14:26.050

```
<input type="text" id="tbStartDate" value="" disabled="disabled" />
<input type="text" id="tbEndDate" value="" disabled="disabled" />
<script type="text/javascript">
    $(document).ready(function () {
        $("#tbStartDate").datepicker({            
            dateFormat: 'dd-mm-yy',
            showOn: 'button',
            buttonImageOnly: true,
            buttonImage: '/Content/Calendar.png',
            buttonText: 'Click here (date)',
            onSelect: function (dateText, inst) {
                var $endDate = $('#tbStartDate').datepicker('getDate');
                $endDate.setDate($endDate.getDate() + 1);
                $('#tbEndDate').datepicker('setDate', $endDate).datepicker("option", 'minDate', $endDate);
            },
            onClose: function (dateText, inst) {
                //$("#StartDate").val($("#tbStartDate").val());
            }
        });

        $("#tbEndDate").datepicker({
            dateFormat: 'dd-mm-yy',
            showOn: 'button',
            buttonImageOnly: true,
            buttonImage: '/Content/Calendar.png',
            buttonText: 'Click here (date)',
            onClose: function (dateText, inst) {
                //$("#EndDate").val($("#tbEndDate").val());
            }
        });

            var $endDate = $('#tbStartDate').datepicker('getDate');
            $endDate.setDate($endDate.getDate() + 1);
            $('#tbEndDate').datepicker('setDate', $endDate).datepicker("option", 'minDate', $endDate);
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T12:14:35.603

在脚本 Jquery 上：

```
var dates = $( "#date_init, #date_final" ).datepicker({
   onSelect: function( selectedDate ) {
        var option = this.id == "date_init" ? "maxDate" : "minDate",
        instance = $( this ).data( "datepicker" ),
        date = $.datepicker.parseDate(
            instance.settings.dateFormat ||
            $.datepicker._defaults.dateFormat,
            selectedDate, instance.settings d
        );
        dates.not( this ).datepicker( "option", option, date );
    }

}); 
```

输入时：

使用 PHP：

```
<input type="text" maxlength="10" name="date_final" id="date_final" value="<? echo  date('Y/m/d'); ?>" > 
```

或者您可以使用 javascript 设置输入日期。！

再见。www.estevaosoberano.com

# iphone - 获取 flickr 联系人列表的问题

> ID：10684692
> 
> 赞同：0
> 
> 时间：2012-05-21T11:48:57.193
> 
> 标签：iphone, ios, flickr

我想在我的 iPhone 应用程序上获取 flickr 朋友列表。我阅读了文档并找到了它的 URL。但是在这个 URL 中，我不明白如何传递 api_sig 名称参数。网址如下。有谁能够帮我？

[http://api.flickr.com/services/rest/?method=flickr.contacts.getList&api_key=b201806ce09c404a786288dbd1840b2b&format=json&nojsoncallback=1&auth_token=72157629827571110-752bbff651a7654c&api_sig=a8c18f235e27220db724ac97d3216b1a](http://api.flickr.com/services/rest/?method=flickr.contacts.getList&api_key=b201806ce09c404a786288dbd1840b2b&format=json&nojsoncallback=1&auth_token=72157629827571110-752bbff651a7654c&api_sig=a8c18f235e27220db724ac97d3216b1a)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:14:07.820

Flickr 最近更新了其身份验证协议，因此@Nikunj R. Jadav 链接的信息（日期为 2009 年 7 月 28 日）可能需要更新。 [Flickr](http://www.flickr.com/services/api/auth.oauth.html)关于如何签署 API 调用的说明如下：

> 目前，Flickr 仅支持 HMAC-SHA1 签名加密。
> 
> 首先，您必须根据您的请求创建一个基本字符串。基本字符串是通过连接 HTTP 动词、请求 URL 和所有按名称排序的请求参数构成的，使用字典字节值排序，用“&”分隔。
> 
> 使用基本字符串作为文本，键是 Consumer Secret 和 Token Secret 的连接值，用“&”分隔。

然后散列基本字符串并将其作为 &api_sign 查询字符串参数传递。

除了签署 API 调用之外，您还需要进行身份验证。[flickr.contacts.getList](http://www.flickr.com/services/api/flickr.contacts.getList.html) API的文档说它需要使用 OAuth 进行身份验证。OAuth 身份验证（[也记录在案](http://www.flickr.com/services/api/auth.oauth.html)）有点棘手；拥有一个图书馆来为您管理一些工作会有所帮助。您可以在 OAuth 站点上找到[Objective-C 中 OAuth 支持的库目录。](http://oauth.net/code/)

# prolog - 简单：如何对虚假案例进行测试？

> ID：10684694
> 
> 赞同：2
> 
> 时间：2012-05-21T11:49:05.477
> 
> 标签：prolog

测试应该返回真：如果第一部分为真，第二部分为假。

试图做这样的事情：

```
f_test  :- f(x), % 1st part
           f(y) is false. % 2nd part 
```

但这给了我一个错误：

```
ERROR: is/2: Arithmetic: `false/0' is not a function. 
```

请告诉我，如何正确执行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T12:01:48.003

`(is)/2`是用于执行算术运算的谓词。即使您的测试是关于算术的，`(=:=)/2`也最好使用 （因为`(is)/2`用于实例化变量。当您使用它来检查变量值时，您会误用它。OTOH，`(=:=)/2`用于比较数字）。

但是在这里，您的测试不是关于算术，而是关于知道某事是否真实。有一个运算符用于检查给定术语是否可证明，它是`(\+)/1`，使用是：

```
f_test :-
    f(x),
    \+ f(y). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T12:00:43.350

你可以试试

```
f_test :- f(x), \+f(y). 
```

# javascript - 存在哪些 JavaScript 对象到对象映射库？

> ID：10684695
> 
> 赞同：15
> 
> 时间：2012-05-21T11:49:10.740
> 
> 标签：javascript, mapping

我目前正在处理一个大型 JavaScript 项目，并且正在努力将传入的 JSON 数据（来自后端）映射到我自己的 JavaScript 对象。

我正在使用 Knockout JavaScript MVVM 框架，虽然它包含一个[映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)，但它不允许我实际重新映射属性。我想实现这一点，因为传入的 JSON 数据粒度太细，我想“扁平化”我的 JS 对象。下面是一个例子。

传入数据。

```
Object : {
    Description: {
        Id : 1,
        Title : 'ProductX'
    },
    Price : {
        Last : 12,
        Currency : 3
    }
} 
```

我想将其重新映射/展平为：

```
var mappedObject = {
    id : 1,
    title: 'ProductX',
    price : 12,
    currency : 3
} 
```

因此**，我想提供一个映射配置，详细说明应该将哪些传入属性映射到哪些传出属性**。很像正在配置[推土机。](http://dozer.sourceforge.net/)

我的问题是：**是否有任何图书馆能够实现我想要实现的目标**，或者这是否需要我建立自己的图书馆？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-06-17T07:19:02.983

自上次更新此主题以来已经有一段时间了。由于人们现在可能仍在寻找对象到对象的映射器：

去年，我为这种场景创建了一个将 C# AutoMapper 实现移植到 TypeScript / JavaScript 的端口。我已将代码放在 GitHub ( [https://b.ldmn.nl/AutoMapperTS](https://b.ldmn.nl/AutoMapperTS) )。您还可以使用 automapper-ts NPM 或 Bower 包直接使用该库。

该库几乎完全记录在案。此外，已经有相当多的 Jasmine 单元测试可用（代码覆盖率约为 95%）。他们应该为您提供一些关于您需要什么的解释。

我希望这个库能满足你的需要。如果您有任何问题和/或意见，请不要犹豫与我联系！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-21T13:11:32.073

好吧，我认为没有任何图书馆可以做到这一点，因为这听起来很容易做到。

这是一个例子：

```
var obj = {
    Description: {
        Id : 1,
        Title : 'ProductX'
    },
    Price : {
        Last : 12,
        Currency : 3
    }
},
    mappedObject = {};

function mapThat( obj, mappedObject ) {
    Object.keys( obj ).forEach( function( key ) {
        if ( typeof obj[ key ] === 'object' ) {
            // If it's an object, let's go recursive
            mapThat( obj[ key ], mappedObject );
        }
        else {
            // If it's not, add a key/value
            mappedObject[ key.toLowerCase() ] = obj[ key ];
        }
    } );
}

mapThat( obj, mappedObject );

console.log( mappedObject );​ 
```

在这里演示：http: [//jsfiddle.net/qG6hm/](http://jsfiddle.net/qG6hm/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-21T13:17:45.270

实际上，knockoutjs 映射插件允许您这样做：

在`ko.mapping.fromJS`调用中，您可以提供一个映射对象，该对象将用于映射包含的属性...

```
var mapper = {
    create: function(options){
        return { name: ko.observable(options.data.name) };
    }
}; 
```

这意味着将这个映射器与映射插件一起使用，每个对象都将被展平为一个仅包含其名称作为可观察对象的对象。

你像这样使用它：

```
var viewModel = ko.mapping.fromJS({id: 1, name: "a", desc: "b"}, mapper); 
```

在这种情况下，`viewModel`将只有一个属性名称。

[您可以在此处](http://knockoutjs.com/documentation/plugins-mapping.html)的官方文档中阅读有关此功能的更多信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-07-16T12:29:12.273

1.  您可以使用[Object-mapper](https://www.npmjs.com/package/object-mapper)，这是用于 Javascript/JSON 中对象映射的非常基本且简单的库。使用此库时，您需要在单独的文件中指定映射属性组合以及源和目标类型。

* * *

2.  还有另一个库[AutoMapper](https://github.com/loedeman/AutoMapper)，这有点先进。它可以根据属性名称自动处理映射，但是您仍然可以提及自定义映射，因为它不是直截了当的。如果您来自 .net 背景，此库的实现方式与 C# automapper 相同。

# c# - MVC 3 隐藏字段

> ID：10684698
> 
> 赞同：0
> 
> 时间：2012-05-21T11:49:19.277
> 
> 标签：c#, asp.net-mvc-3, model-view-controller, view, viewmodel

我一直在努力研究几个非常长的视图，这些视图通过“ViewModel”中介附加到我的模型上。我的模型在一个单独的项目中。

一切正常，但我想隐藏视图中的某些字段。我大部分时间都用过，像这样：

```
 <td id="Left">@Html.LabelFor(x=>x.Id)</td>
        <td id="Right">@Html.TextBoxFor(model => model.Id)</td> 
```

到目前为止的所有字段（每个视图中有数百个。

对我来说，必须进入这些并将其中许多更改为 HiddenFor 是没有意义的，因为我必须在很多地方这样做。

我想知道是否可以选择将其放在视图模型的属性上，例如：

```
 [Display(Name = "ID:")]
    [HiddenInput(DisplayValue = false)]
    public int Id { get; set; } 
```

为了一次隐藏标签和输入文本框，所以只有我标记的字段才会显示。我在想我应该能够设置一个属性来做到这一点，所以我哪里出错了。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:01:38.627

不，就您而言，没有现成的解决方案。

有[ScaffoldColumnAttribute一起控制输入和标签的生成，但只有当您使用](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.scaffoldcolumnattribute.aspx)*动态生成的视图*时才能看到它的作用，使用`EditorForModel`. 而且这种技术完全去除了 html，这与生成隐藏输入是不一样的。

您可以尝试使用 jQuery 来管理它，并且[属性以选择器](http://api.jquery.com/attribute-ends-with-selector/)结尾

```
<script>
$(function () {
    $('input[name$="Id"]').closest('tr').hide();
});
</script> 
```

# php - 为 PHP 文件上的 CRON 作业设置电子邮件警报？

> ID：10684699
> 
> 赞同：0
> 
> 时间：2012-05-21T11:49:23.157
> 
> 标签：php, email, cron, email-validation

我在一个 php 文件上设置了一个 cron-job。我还设置了电子邮件，以便在执行 cron 时收到电子邮件警报。所以无论我在那个 php 文件中放入**echo**的任何语句，都会显示在电子邮件正文中。

我怀疑它不是检查代码条件，它只是流经代码并在邮件正文中显示回显语句。

看下面的代码-：

```
$query_update = "UPDATE  tier_price tp 
JOIN   catalog_product_entity cpe   ON    cpe.entity_id = tp.entity_id    
AND    cpe.name LIKE '$col2'   AND   website_id = $col4 
JOIN   customer_group cg   ON    cg.customer_group_id = tp.customer_group_id   AND   cg.customer_group_code =  $col1 SET cpetp.value = ".$col3.";";
mysql_query($query_update);
$count = mysql_affected_rows();
if($count == 1)
{
         echo "<br />"."Price for customer group $col1 for item $col2 is updated to $col3";
}
if($count == 0)
{
       $qry_fetch_product = "SELECT entity_id FROM catalog_product_entity WHERE name = '$col2'";
       $res_qry_fetch_product = mysql_query($qry_fetch_product);
       while($row = mysql_fetch_array($res_qry_fetch_product))
       {
        $entity_id = $row["entity_id"];
       }

       $qry_fetch_grp_code = "SELECT customer_group_id FROM customer_group WHERE customer_group_code = $col1 ";
       $res_qry_fetch = mysql_query($qry_fetch_grp_code);
       while($row = mysql_fetch_array($res_qry_fetch))
       {
        $customer_group_id = $row["customer_group_id"];     
       }

       $qry_insert_base = "INSERT into tier_price(entity_id,customer_group_id,qty,value,website_id) VALUES ($entity_id,$customer_group_id,1,$col3,$col4)";
       $res_qry_insert_base = mysql_query($qry_insert_base);    

  echo "<br />"."Price $col3 for customer group $col1 for item $col2 is inserted";
} 
```

我收到的邮件警报包含-：

```
<br />Price for customer group 101 for item abc is updated to 252<br />Price 252 for customer group 101 for item abc is inserted
<br />Price for customer group 102 for item pqr is updated to 252.49<br />Price 252.49 for customer group 102 for item pqr is inserted
<br />Price for customer group 103 for item xyz is updated to 15.5<br />Price 15.5 for customer group 103 for item xyz is inserted 
```

所以我的怀疑是，它在两个循环中都存在，这不应该是真实的情况。好像查询获取更新计数变为 1，所以它必须只通过 if($count == 1) 循环&类似地，如果没有更新计数变为 0，但从 o/p 我们可以看到它在两个循环中都进行，我们可以看到电子邮件警报中的两行，这非常令人困惑......

任何人都可以提供解决方案来避免这种情况......这样如果发生更新，它会在邮件中显示更新或插入发生，它会显示代码中的插入语句......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:59:51.140

请检查 [http://php.net/manual/en/function.mysql-affected-rows.php](http://php.net/manual/en/function.mysql-affected-rows.php) 使用类似下面的东西

```
<?php
$count = mysql_affected_rows();
if(mysql_affected_rows())
{
}else{

}
?> 
```

# sencha-touch - Sencha 1.1 无法扩展 DataView

> ID：10684704
> 
> 赞同：0
> 
> 时间：2012-05-21T11:49:39.740
> 
> 标签：sencha-touch, extend, dataview

我正在尝试扩展 Sencha 1.1 DataView 以构建我自己的 Picker。但是 - 扩展不起作用。似乎它甚至没有调用 initComponent，每当我试图通过调用它的一个方法来转向超类时 - 我都会收到一条消息，指出该方法不存在。我想我遗漏了一些关于如何扩展 DataView 的内容（尽管我从 Sencha 源代码中几乎逐字复制）。

这是我的代码：

```
 Ext.MyDV = Ext.extend(Ext.DataView, {
                flex: 1,
                displayField: 'text',
                valueField: 'value',
                align: 'center',
                itemSelector: 'div.x-picker-item',

                componentCls: 'x-picker-slot',
                renderTpl : ['<div class="x-picker-mask">',
                                '<div class="x-picker-bar"></div>',
                             '</div>'
                            ],
                selectedIndex: 0,
                getElConfig: function() {
                    return {
                        tag: 'div',
                        id: this.id,
                        cls: 'x-picker-' + this.align
                    };
                },
                initComponent : function() {
                    Ext.apply(this.renderSelectors, {
                        mask: '.x-picker-mask',
                        bar: '.x-picker-bar'
                    });
                    this.scroll = {
                        direction: 'vertical',
                        useIndicators: false,
                        friction: 0.7,
                        acceleration: 25,
                        snapDuration: 200,
                        animationDuration: 200
                    };
                    this.tpl = new Ext.XTemplate([
                        '<tpl for=".">',
                            '<div class="x-picker-item {cls} <tpl if="extra">x-picker-invalid</tpl>">{' + this.displayField + '}</div>',
                        '</tpl>'
                    ]);

                    var data = this.data,
                        parsedData = [],
                        ln = data && data.length,
                        i, item, obj;

                    if (data && Ext.isArray(data) && ln) {
                        for (i = 0; i < ln; i++) {
                            item = data[i];
                            obj = {};
                            if (Ext.isArray(item)) {
                                obj[this.valueField] = item[0];
                                obj[this.displayField] = item[1];
                            }
                            else if (Ext.isString(item)) {
                                obj[this.valueField] = item;
                                obj[this.displayField] = item;
                            }
                            else if (Ext.isObject(item)) {
                                obj = item;
                            }
                            parsedData.push(obj);
                        }

                        this.store = new Ext.data.Store({
                            model: 'x-textvalue',
                            data: parsedData
                        });

                        this.tempStore = true;
                    }
                    else if (this.store) {
                        this.store = Ext.StoreMgr.lookup(this.store);
                    }

                    this.enableBubble('slotpick');

                    Ext.MyDV.superclass.initComponent.call(this);
                    if (this.value !== undefined) {
                        this.setValue(this.value, false);
                    }
                },
                setupBar: function() {
                    this.el.setStyle({padding: ''});

                    var padding = this.bar.getY() - this.el.getY();
                    this.barHeight = this.bar.getHeight();

                    this.el.setStyle({
                        padding: padding + 'px 0'
                    });
                    this.slotPadding = padding;
                    this.scroller.updateBoundary();
                    this.scroller.setSnap(this.barHeight);
                    this.setSelectedNode(this.selectedIndex, false);
                },

                afterComponentLayout: function() {
                    // Dont call superclass afterComponentLayout since we dont want
                    // the scroller to get a min-height
                    Ext.defer(this.setupBar, 200, this);
                },
                initEvents: function() {
                    this.mon(this.scroller, {
                        scrollend: this.onScrollEnd,
                        scope: this
                    });
                },
                onScrollEnd: function(scroller, offset) {
                    this.selectedNode = this.getNode(Math.round(offset.y / this.barHeight));
                    this.selectedIndex = this.indexOf(this.selectedNode);
                    this.fireEvent('slotpick', this, this.getValue(), this.selectedNode);
                },

                /**
                 * @private
                 */
                scrollToNode: function(node, animate) {
                    var offsetsToBody = Ext.fly(node).getOffsetsTo(this.scrollEl)[1];
                    this.scroller.scrollTo({
                        y: offsetsToBody
                    }, animate !== false ? true : false);
                },

                /**
                 * @private
                 * Called when an item has been tapped
                 */
                onItemTap: function(node, item, index) {
                    Ext.MyDV.superclass.onItemTap.apply(this, arguments);
                    this.setSelectedNode(index);

                    this.selectedNode = item;
                    this.selectedIndex = index;
                    this.fireEvent('slotpick', this, this.getValue(), this.selectedNode);
                },
                getSelectedNode: function() {
                    return this.selectedNode;
                },

                setSelectedNode: function(selected, animate) {
                    // If it is a number, we assume we are dealing with an index
                    if (Ext.isNumber(selected)) {
                        selected = this.getNode(selected);
                    }
                    else if (selected.isModel) {
                        selected = this.getNode(this.store.indexOf(selected));
                    }

                    // If its not a model or a number, we assume its a node
                    if (selected) {
                        this.selectedNode = selected;
                        this.selectedIndex = this.indexOf(selected);
                        this.scrollToNode(selected, animate);
                    }
                },

                getValue: function() {
                    var record = this.store.getAt(this.selectedIndex);
                    return record ? record.get(this.valueField) : null;
                },

                setValue: function(value, animate) {
                    var index = this.store.find(this.valueField, value);
                    if (index != -1) {
                        if (!this.rendered) {
                            this.selectedIndex = index;
                            return;
                        }
                        this.setSelectedNode(index, animate);
                    }
                },

                onDestroy: function() {
                    if (this.tempStore) {
                        this.store.destroyStore();
                        this.store = null;
                    }
                    Ext.MyDV.superclass.onDestroy.call(this);
                }   
            }); 
```

但是，每当我使用 DataView 的一种方法时——例如**——getNode()** ——它都无法加载，说没有这种方法。

我错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-19T19:42:15.217

哦！重新审视这个问题一年后 - 我对javascript了解得更好 - 我理解我的问题。我不在同一背景下。eventHandler 中的“this”不是指数据视图，而是指事件目标。致电/申请将完成工作。

# qt - 在 Qt 中使用 OpenGL 加载纹理

> ID：10684705
> 
> 赞同：2
> 
> 时间：2012-05-21T11:49:48.060
> 
> 标签：qt, opengl

我正在尝试使用 OpenGL 在 Qt 中创建一个房间，现在我被纹理部分困住了。它不会将我的纹理放在墙上。

这是我的代码：

```
#include "glwidget.h"

GLWidget::GLWidget(QWidget *parent):QGLWidget(parent)
{

    camPosx = 0.0,  camPosy = 0.0,    camPosz = 1.0;
    camViewx = 0.0, camViewy = 0.0, camViewz = 0.0;
    camUpx = 0.0,   camUpy = 1.0,   camUpz = 0.0;
    timer = new QTimer();
    connect( timer, SIGNAL(timeout()), this, SLOT(updateGL()) );
}

void GLWidget::initializeGL() {

    loadGLTextures();
    glEnable(GL_TEXTURE_2D);
    glClearColor(1.0f,1.0f,1.0f,0.0f);
    glClearDepth(1.0f);
    glEnable(GL_DEPTH_TEST);
    glDepthFunc(GL_LESS);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();

    timer->start(50);
}

void GLWidget::resizeGL(int width, int height) {

    //set viewport
    glViewport(0,0,width,height);

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();

    //set persepective
    //change the next line order to have a different perspective
    GLdouble aspect_ratio=(GLdouble)width/(GLdouble)height;
    gluPerspective(45.0f, aspect_ratio, 0.1 , 100.0);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
}

void GLWidget::paintGL() {
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glLoadIdentity();

    // store current matrix
    glMatrixMode( GL_MODELVIEW );
    glPushMatrix( );

    gluLookAt(camPosx ,camPosy ,camPosz,
              camViewx,camViewy,camViewz,
              camUpx, camUpy, camUpz );

    glBindTexture(GL_TEXTURE_2D, texture[0]);
    glEnable( GL_LIGHTING );
    glEnable( GL_LIGHT0 );
    glScalef(2.0,2.0,2.0);
    glBegin(GL_QUADS);
    /* Floor */
    glColor3f(0,0,0);
    glVertex3f(-1,-1,-1);
    glVertex3f(1,-1,-1);
    glVertex3f(1,-1,1);
    glVertex3f(-1,-1,1);
    /* Ceiling */
    glVertex3f(-1,1,-1);
    glVertex3f(1,1,-1);
    glVertex3f(1,1,1);
    glVertex3f(-1,1,1);
    /* Walls */
    glVertex3f(-1,-1,1);
    glVertex3f(1,-1,1);
    glVertex3f(1,1,1);
    glVertex3f(-1,1,1);

    glVertex3f(-1,-1,-1);
    glVertex3f(1,-1,-1);
    glVertex3f(1,1,-1);
    glVertex3f(-1,1,-1);

    glVertex3f(1,1,1);
    glVertex3f(1,-1,1);
    glVertex3f(1,-1,-1);
    glVertex3f(1,1,-1);

    glVertex3f(-1,1,1);
    glVertex3f(-1,-1,1);
    glVertex3f(-1,-1,-1);
    glVertex3f(-1,1,-1);
    glEnd();
    glEnable( GL_LIGHTING );

    // restore current matrix
    glMatrixMode( GL_MODELVIEW );
    glPopMatrix( );

}
void GLWidget::loadGLTextures()
{
    QImage t;
    QImage b;

    if ( !b.load( "images/Naamloos.bmp" ) )
    {
        qDebug("Didn't found the image.");
        b = QImage( 16, 16, QImage::Format_RGB32 );
        b.fill( 1 );
    }

    t = QGLWidget::convertToGLFormat( b );
    glGenTextures( 1, &texture[0] );
    glBindTexture( GL_TEXTURE_2D, texture[0] );
    glTexImage2D( GL_TEXTURE_2D, 0, 3, t.width(), t.height(), 0, GL_RGBA, GL_UNSIGNED_BYTE, t.bits() );
    glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR );
    glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );
    glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);
}

void GLWidget::keyPressEvent( QKeyEvent * e ) {

    if(e->key() == Qt::Key_Up)
        this->camPosy += 0.5;
    if(e->key() == Qt::Key_Down)
        this->camPosy -= 0.5;

} 
```

它显示了我的广场（应该是我的房间），但它没有在墙上放置 .bmp 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T14:50:36.580

那么，您必须提供一些纹理坐标。OpenGL 没有内置水晶球，可以猜测您希望如何放置纹理。

* * *

附带说明：所有代码`initializeGL`（纹理加载除外）`resizeGL`最好放在绘图函数中。实际上，在绘图功能中按需加载纹理也是有意义的，但是只有与适当的几何剔除和按需几何加载相结合才有好处。

* * *

同样在错误消息中，请写

*“没找到图片。”* （过去时“do”暗示现在时动词）

或者

*“找不到图像。”* （如果没有使用“do”，请用过去时写动词）

然而，这更好地放在[https://english.stackexchange.com/](https://english.stackexchange.com/)

# asp.net-mvc-3 - IE 在返回 View() 时出错，Chrome 正确执行（ASP.Net MVC 3）

> ID：10684707
> 
> 赞同：1
> 
> 时间：2012-05-21T11:49:58.853
> 
> 标签：asp.net-mvc-3, internet-explorer, invalidoperationexception

我不能完全弄清楚为什么不同的浏览器会导致服务器代码的功能不同，但在 IE 中我得到了`InvalidOperationException`，而它在 Chrome 和 Firefox 中完美运行。

（对于 Facebook 选项卡应用程序`HomeController`，其中某些类型已被重命名以混淆客户端名称）中的代码如下：

```
[AcceptVerbs(HttpVerbs.Get | HttpVerbs.Post)]
public ActionResult Index()
{
    Nullable<long> facebookUserID = GetFacebookIDOrRedirect();

    Start start = new Start();
    start.FacebookUserID = facebookUserID;
    // More properties are set here...

    if (MyUser == null)
    {
        CurrentMyUser = new MyUser
        {
            UserID = Guid.NewGuid(),
            FacebookUserID = facebookUserID,
            Answers = new Dictionary<int, Answer>()
        };
    }
    else { start.SomeProperty = MyUser.SomeProperty; }

    ViewData.Model = start;
    // Some things are added to the ViewBag here.
    return View();
} 
```

现在 Chrome 和 Firefox 正确地进入下一个方法：

```
[HttpPost]
public ActionResult Start(Start model)
{
    if (ModelState.IsValid)
    {
        if (CurrentMyUser == null) return View();

        MyUser myUser = (MyUser) Session["MyUser"];
        myUser.SomeProperty = model.SomeProperty;
        // More properties are set here...

        return RedirectToAction("Question", "MyController", new { id = 1 });
    }

    return View();
} 
```

URL 为`http://domain.com/MyController/Question/1`. 但是，在同样的情况下，IE 正在尝试访问`http://domain.com/Home/Start`

看在`Global.asax.cs`里面，没有提到`Start`；唯一提到的`HomeController`是下面，应该被称为路线：

```
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    // Parameter defaults
);

routes.MapRoute(
    "FeedingTimes", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "FeedingTimes", action = "Question", id = 1 }
    // Parameter defaults
); 
```

Fwiw，我可以看到它工作的浏览器版本是最新的 Chrome (19.0.1084.46 m)，它在 Internet Explorer 9.0.8112.16421 中失败。我们的 QA 人员告诉我它在 Firefox 中工作正常，我不确定他们使用的是哪个 IE 版本，但他们已经去吃午饭了，所以我不能问。

这似乎与[Internet Explorer 7 + MVC 3 = bad urls 不是同一个问题？](https://stackoverflow.com/q/10089240/205245)或者作为[MVC、IMG 标记、Url.Action 和 TempData 的 IE9 意外行为](https://stackoverflow.com/q/8056552/205245)——在 Fiddler 中查看，我只收到一个请求：（`POST /Home/Start HTTP/1.1`使用我希望看到的 POSTdata）。但我不明白为什么 IE 会以不同的方式做这件事（或者为什么服务器代码甚至会知道浏览器版本！）

任何想法都非常感激。

# wpf - 删除 Scatter 视图项

> ID：10684710
> 
> 赞同：0
> 
> 时间：2012-05-21T11:50:08.377
> 
> 标签：wpf, pixelsense, scatterview

如果我使用包含库控件的散点图。用户可以将元素从库容器中拖到分散视图中。之后，用户可以删除图像。

我在视图框中创建了包含表面按钮和图像的样式作为拖动模板。

问题出在表面按钮的点击功能上？我应该写什么来删除图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:50:21.070

你想删除整个 ScatterViewItem 还是只删除图像并保留按钮？通常，您可以通过使用以下方法查找 Visual Ancestor 来删除 ScatterViewItems：

```
/// <summary>
    /// Attempts to get an ancestor of the passed-in element with the given type.
    /// </summary>
    /// <typeparam name="T">Type of ancestor to search for.</typeparam>
    /// <param name="descendent">Element whose ancestor to find.</param>
    /// <param name="ancestor">Returned ancestor or null if none found.</param>
    /// <returns>True if found, false otherwise.</returns>
    public static T GetVisualAncestor<T>(DependencyObject descendent) where T : class
    {
        T ancestor = null;
        DependencyObject scan = descendent;
        ancestor = null;

        while (scan != null && ((ancestor = scan as T) == null))
        {
            scan = VisualTreeHelper.GetParent(scan);
        }

        return ancestor;
    } 
```

然后您可以从项目集合中删除 SVI：ancestrate.items.remove(descendent);

# html - html5 画布在 IE8 中不起作用

> ID：10684711
> 
> 赞同：2
> 
> 时间：2012-05-21T11:50:09.430
> 
> 标签：html, internet-explorer, canvas, progress-bar

我在 html5 中构建了这个进度条。该栏是可单击的，当您单击每个部分时，您会得到一个解释。它可以工作，但不能在 IE8 中使用。谁能告诉我什么是wearg？我一直在研究它一个月，但没有！请帮忙。:-)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-21T11:57:41.563

IE8 本身不支持画布。您可以使用[explorercanvas](http://code.google.com/p/explorercanvas)将画布功能添加到 IE8。

您所要做的就是`excanvas.js`在您的页面中包含该文件。

[explorercanvas wiki](http://code.google.com/p/explorercanvas/wiki/Instructions)中的示例：

```
<head>
<!--[if IE]><script src="excanvas.js"></script><![endif]-->
</head> 
```

# sharepoint-2007 - 在 SharePoint 2007 上提交一个 q，将其定向到电子邮件地址

> ID：10684712
> 
> 赞同：1
> 
> 时间：2012-05-21T11:50:15.567
> 
> 标签：sharepoint-2007

我需要具有使用户能够在 SharePoint 2007 上提交问题的功能，然后将问题作为电子邮件发送给指定的用户。

sharepoint 中是否有任何内置函数允许这样做或确实需要对此进行编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:47:46.953

好吧，不编码的唯一方法是有一个带有提醒我功能的列表来发送电子邮件。

如果你想编码，你可以使用[SPUtility.SendEmail](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.utilities.sputility.sendemail.aspx)和你列表上的事件接收器来实现你想要的结果

# php - 超过最大执行时间的多维数组

> ID：10684715
> 
> 赞同：0
> 
> 时间：2012-05-21T11:50:27.510
> 
> 标签：php, arrays, multidimensional-array

我有一个 csv 文件列表，我需要 php 将其转换为一个大型多维数组，仅使用 2 个 php 进行测试超过了进行第二次转换时的最大执行时间。

第一次转换是从 csv 到数值多维数组

第二次转换是从数值多维数组到字符串和数值多维数组，这是 php 产生错误的地方。

我的代码如下：

```
function parse($data) {
    $i = 0;
    while (isset($data[$i])) {
      $row = 0;
      while (isset($data[$i][$row])) {
        switch ($row) {
          case 0:
            //General Item details
            $fOv = 0;
            while (isset($data[$i][$row][$fOv])) {
              $array['Item'][$i][$data[$i][row][$fOv]] = $data[$i][$row + 1][$fOv];
              $fOv++; // THIS IS THE PLACE OF THE ERROR
            }
            break;
          case 2:
            //General Transaction details
            $fOv = 0;
            while (isset($data[$i][$row][$fOv])) {
              $array['Transaction'][$i][$data[$i][$row][$fOv]] = $data[$i][$row + 1][$fOv];
              $fOv++;
            }
            break;
          case 4:
            //Buyer details
            $fOv = 0;
            while (isset($data[$i][$row][$fOv])) {
              $array['Transaction']['Buyer'][$i][$data[$i][$row][$fOv]] = $data[$i][$row + 1][$fOv];
              $fOv++;
            }
            break;
          case 6:
            //Shipping details
            $fOv = 0;
            while (isset($data[$i][$row][$fOv])) {
              $array['Transaction']['Shipping'][$i][$data[$i][$row][$fOv]] = $data[$i][$row + 1][$fOv];
              $fOv++;
            }
            break;
          case 8:
            //Status details
            $fOv = 0;
            while (isset($data[$i][$row][$fOv])) {
              $array['Transaction']['Status'][$i][$data[$i][$row][$fOv]] = $data[$i][$row + 1][$fOv];
              $fOv++;
            }
            break;
        }
      $row + 2;
      }
      $i++;
    }
    return $array;
  } 
```

这是数值数组的样子：

```
array (
  0 => array (
    0 => array (
      0 => 'field 1', 1 => 'field 2', 2 => 'field 3' //continues to field 17
    )
    1 => array (
      0 => 'value 1', 1 => 'value 2', 2 => 'value 3' //continues to value 17
      //these values are for the fields in array[0][0]
    )
    2 => array ( //same as array[0][0] )
    3 => array ( //same as array[0][1], values for array[0][2] )
    4 => array ( //same as array[0][0] )
    5 => array ( //same as array[0][1], values for array[0][4] )
    6 => array ( //same as array[0][0] )
    7 => array ( //same as array[0][1], values for array[0][6] )
    8 => array ( //same as array[0][0] )
    9 => array ( //same as array[0][1], values for array[0][8] )
  )
  1 => array (
    //same structure as array[0], different details
  )
) 
```

我试图为字符串和数字数组获取什么：

```
array (
  0 => array (
    'Item' => array (
      0 => array ( 
        'field 1' => 'value 1'
        'field 2' => 'value 2'
        //continues to field 17
      )
    )
    'Transaction' => array (
       0 => array (
        'field n' => 'value n' //repeated until field 17
        'Buyer' => array (
          //same as above in array[0]['Item'][0]
        )
        'Shipping' => array (
          //same as above in array[0]['Item'][0]
        )
        'Status' => array (
          //same as above in array[0]['Item'][0]
        )
      )
    )
  )
  1 => array (
    //same structure as array[0], different values
  )
) 
```

非常感谢任何帮助，在此先感谢。

**编辑：** 我不想增加最大执行时间，脚本应该花费不到 30 秒，与我首先将数据存储在 csv 文件中的工作脚本相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:54:20.550

快速而肮脏的方法：

```
ini_set('max_execution_time', 0); 
```

尽管请注意，如果您的脚本进入无限循环，它将永远不会结束:) 更有可能的是，删除时间限制会导致您达到内存限制，因此您最好通过命令行运行它以避免崩溃 apache。

**编辑：** 尝试改变你的代码不要使用像 $iii 这样的变量名，因为这很难阅读。您可能会发现仅此一项就可以使解决方案变得显而易见。

**编辑：** $row + 2; 应该是 $row += 2;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:57:18.303

或在您的`php.ini`文件中：

`max_execution_time = 0`

# c# - 防止发生异常时对输出参数进行封送处理

> ID：10684719
> 
> 赞同：0
> 
> 时间：2012-05-21T11:50:39.423
> 
> 标签：c#, .net, exception, interop, marshalling

我们有一个 C# 程序，它调用 C++ dll 中的函数来完成实际工作。这些函数都有输出参数，如果出现问题可能会抛出异常。在互操作障碍上抛出异常似乎工作正常。我们遇到的问题显然是，即使发生异常，编组器也会尝试从函数中检索输出参数。在某些情况下，这些将没有正确的值（由于异常），这会导致进程崩溃，并在 mscorlib.dll 中出现访问冲突。

在完成任何工作之前将所有输出参数初始化为有效值（例如 null）当然是可能的。然而，忘记其中之一的惩罚是严重的。

我们的分析是，当抛出异常时，marshaler 也会运行，对吗？有没有办法防止这种情况？

TIA。

# jquery - jQuery：在页面加载时隐藏图片

> ID：10684720
> 
> 赞同：4
> 
> 时间：2012-05-21T11:50:44.093
> 
> 标签：jquery, html, css, hide

我需要在我的网页加载时隐藏图片，并让它们稍后出现（它们是其他 div 出现/消失的触发器）。原因是我不希望它们是可点击的，直到我的 .animate() 函数真正让它们看起来真实......
所以无论如何，我尝试了一个简单的......

```
$(document).ready(function(){
    $("#img1").hide();
    $("#img2").hide();
}); 
```

...与 HTML ...

```
<img id="img1" src="./images/img1.png" alt="image 1" />
<img id="img2" src="./images/img2.png" alt="image 2" /> 
```

...和CSS

```
#img1
{
z-index: 4;
position: relative;
top: 0%;
left: 5%;
opacity: 0;
padding: 20px;
}
#img2
{
z-index: 4;
width: 350px;
height: 140px;
position: relative;
top: 0%;
left: 15%;
opacity: 0;
padding: 20px;
} 
```

...但它不工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T12:01:42.460

首先，我会尝试在您的 (document).ready 函数中放置一个 JS 警报，以确保代码被正确命中（jQuery 引用，JS 语法是好的）。此外，通过在 Mozilla Firebug（或其他 JS 调试器）中添加手表来检查 JQuery 是否正确拾取对象（“img1”、“img2”）。

您也可以尝试在标记中将 img 的样式设置为 display:none，如果每次加载页面时总是隐藏它。

IE，

```
<img src="imgs/image.jpg" style="display:none"></img> 
```

上面的逻辑可以移到 CSS 中。

然后在需要显示图像时使用您的 animate() 函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T12:08:37.403

试试这个。`opacity: 0;`行删除。

[http://jsfiddle.net/2wqwf/2/](http://jsfiddle.net/2wqwf/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T11:53:11.707

试试这个

```
$(document).ready(function(){
    $("#img1").css({display, 'none'});
    $("#img2").css({display, 'none'});
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T11:58:04.300

为所有图像添加一个类并默认隐藏可见属性，稍后在您的动画功能或其他东西上，删除该类。它会起作用的

```
<style>
.hiddenclass
{
   display:none;
}
</style>

<img src="imgs/image1.jpg" class="hiddenclass"></img>

<img src="imgs/image2.jpg" class="hiddenclass"></img>

 ------

<img src="imgs/image3.jpg" class="hiddenclass"></img> 
```

并在您的动画脚本中`hiddenclass`使用从所有图像中删除`removeClass`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-21T12:08:16.903

你也可以使用`.html()`函数

请参阅示例：http: [//jsfiddle.net/ipsjolly/jLNKL/](http://jsfiddle.net/ipsjolly/jLNKL/)

# c# - ADO.NET 从 datagrid1 中选择一行以在 datagrid2 中显示行

> ID：10684725
> 
> 赞同：2
> 
> 时间：2012-05-21T11:51:01.553
> 
> 标签：c#, sql-server, winforms, ado.net, datagridview

所以我有问题。我有一个带有数据库和 2 个表的 SQL 服务器：

```
1-|id|name|,
2-|id|id_id|name|;
id->id_id has a conection. 
```

我像 DataSource 一样将 SQL 连接到 VS。

我在 VS(C#) 中有 3 个表单：MainForm（用于选择带有 DataGridView 的表单）、带有 DGV1 的表单和带有 DGV2 的表单。

所以首先打开 MainForm，然后通过 DGV1 的按钮窗体。我可以添加、删除和更改行，但我需要选择行的按钮（需要选择 id 或获取他的值），下一个关闭表单 DGV1。接下来通过 MainForm 上的按钮打开表单 DGV2，在 opennig 时需要查询 DGV2，如下所示：

```
SELECT id, id_id, name FROM TABLE WHERE (id_id = selected id from DGV1) 
```

这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:57:19.037

如果我了解您想从给定 id_id 的第二个表中选择信息。

如果是这样，您必须将 DG1 中的 id 保存在某处，然后选择如下数据：

```
select id, id_id, name
FROM TABLE
WHERE id_id = @idDG1 
```

其中@idDG1 必须是值本身。如果您从 DG1 中选择 id 1，则查询必须是：

```
select id, id_id, name
FROM TABLE
WHERE id_id = 1 
```

等等。

* * *

最后一点，您可以使用@idDG1 并在构建查询时添加一个参数。

# fitnesse - 如何在 FitNesse 子维基中包含所有祖先的设置页面？

> ID：10684735
> 
> 赞同：5
> 
> 时间：2012-05-21T11:51:49.287
> 
> 标签：fitnesse

我在根级别有一个设置页面，它工作正常。但是，当我在 FitNesse 中添加子wiki 时，我想在子wiki 级别放置一个设置页面。这被包括在内，但根级别的 SetUp 不包括在内。

例如，具有以下结构：

```
Foo suite
  SetUp
  TestPage
  Bar suite
    SetUp
    NestedTestPage 
```

如何让 FitNesse 在 NestedTestPage 中包含两个设置页面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T20:54:29.363

我知道只有一种方法可以做到这一点。如果您手动将父级包含到子级中。

那么在你的 FooSuite.BarSuite.SetUp 你有以下行：

```
!include .FrontPage.FooSuite.SetUp 
```

然后，这将在您的 Bar SetUp 中包含 Foo 套件页面。

但一般规则是任何页面都只有一个设置，因此您必须强行绕过它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-25T08:36:23.693

如果您不想包含外部 Setup 的完整路径，可以使用以下语法

```
!include -c <FooSuite.SuiteSetUp 
```

# assembly - x86 汇编 - masm32：乘法和除法的绝对分解

> ID：10684736
> 
> 赞同：-4
> 
> 时间：2012-05-21T11:51:52.690
> 
> 标签：assembly, x86, divide

我已经在互联网上寻找了一个关于如何在 masm32 汇编中进行乘法和除法的简单易懂的评估。我的问题是：

1.  我应该把被相乘的数字放在哪里？

2.  我应该把被除数的数字放在哪里？

3.  其余部分在哪里？

有人可以为我回答这个问题吗？

谢谢，

程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T12:04:18.697

[通过查看Intel 64 and IA-32 Instruction Set Reference](http://download.intel.com/products/processor/manual/325383.pdf)的正确页面，可以很容易地找到这个问题的答案。在这种情况下，您正在寻找`MUL`and`DIV`指令（如果您正在对无符号操作数进行操作）或`IMUL`and`IDIV`指令，它们用于有符号整数乘法和除法。

所以，如果你真的不想看手册：

1.  `EAX`如果您使用的是乘法运算，其中一个操作数必须放在寄存器中`MUL`。如果您使用该指令，这将更加灵活`IMUL`，它允许您指定源寄存器和目标寄存器。
2.  在 32 位模式下，被除的数字始终是 64 位数字。高位进入`EDX`，而低位进入`EAX`。
3.  余数总是放在`EDX`.

# asp.net-mvc-3 - ASP.NET Web API 问题 - 授权/身份验证

> ID：10684739
> 
> 赞同：5
> 
> 时间：2012-05-21T11:52:06.807
> 
> 标签：asp.net-mvc-3, wcf, model-view-controller, asp.net-web-api

我被要求为客户创建一个 API。在开始之前，我有一些问题。我决定使用 ASP.NET Web API 技术。我创建了我的第一个方法，它工作正常，我能够以 XML/Json 格式返回一组产品结果。问题是，任何访问我网站上的 API 的人都可以看到我所有的产品。我已经有一个客户数据库，我该如何使用它，以便在访问我的 API 之前，他们必须设置一些凭据。

Web 和桌面客户端都应该可以访问 API

我想到的一种方法是，他们将用户名/密码作为参数传递，但这似乎不是很安全/对吗？例如：`api/products/GetById/750?username=bob&pass=123`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T12:33:18.380

您可以使用 AuthorizeAttribute 来装饰您的控制器/操作。

```
[Authorize]
public IEnumerable<Product> Get() {...} 
```

这可以将您的资源限制为仅对经过身份验证的用户可用。

实际的身份验证方法是另一回事。默认情况下，Web API 使用基于 cookie 的 ASP.NET 表单身份验证，如果 api 直接从 html+js Web 客户端使用，这很好。

另一方面，如果您的 API 将由桌面/移动应用程序或基于插件的 Web 客户端使用，则使用 HTTP Basic 身份验证可能会更好，因为您不必管理 cookie（请记住在这种情况下使用 SSL）。

您可能想查看我在[http://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-membership-provider/](http://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-membership-provider/)上的博客文章，其中展示了如何提供 http 基本身份验证使用 ASP.NET 成员资格和角色提供程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T11:54:45.530

绝对不是通过查询字符串。

为什么不使用 ASP.NET 成员资格？[MSDN](http://msdn.microsoft.com/en-us/library/yh26yfzy.aspx)

或者，您可以编写自己的身份验证并在传回产品列表之前检查用户是否具有适当的权限。

[http://sixgun.wordpress.com/2012/02/29/asp-net-web-api-basic-authentication/](http://sixgun.wordpress.com/2012/02/29/asp-net-web-api-basic-authentication/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-21T12:07:40.413

*   您希望将 API 托管在 SSL 文件夹中。这将加密所有通信（与通过网络发送您的信用卡 # 相同）

*   您还可以加密 URL，使其如下所示：

    `api/products/GetById/750?u=828s388332e328e38&p=328e23e2i38324r423ur29834`

    但这代表了一个挑战，因为现在您必须同步客户端使用的加密方法

*   您还可以使用令牌，并让您的客户端检索具有到期日期的令牌。令牌过期（1 小时或 1 天等）。然后 URL 可以如下所示：

    `api/products/GetById/750?token=1241824123yxxcn2r348`

*   您还可以使用私钥/公钥： [MSDN](http://msdn.microsoft.com/en-us/library/ff649260.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T16:29:36.763

使用用户名/密码组合很好，但不是通过查询字符串传递，而是以更标准化的方式（HTTP 基本身份验证）进行，即将此信息添加到消息的请求标头中。下面是代码的样子：

```
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(@"https://localhost:8010/api/Customer/1");
//Add a header to the request that contains our credentials
//DO NOT HARDCODE IN PRODUCTION!! Pull credentials real-time from database or other store.
string svcCredentials = Convert.ToBase64String(ASCIIEncoding.ASCII.GetBytes("user1"+ ":" + "test"));
req.Headers.Add("Authorization", "Basic " + svcCredentials); 
```

您的问题被标记为“WCF”和“Web API”，因此检查凭据服务器端有点不同。但是，您实际上是拉出“授权”标头并检查凭据以查看用户是否经过身份验证和授权。如果它们未通过身份验证，则返回 HTTP 401 消息。

对于托管在 IIS 中的基于 WCF REST 的服务，您可以从我的博客文章中查看完整的详细示例：

[在 IIS 中托管的基于 REST 的服务中使用基本身份验证](http://allen-conway-dotnet.blogspot.com/2012/07/using-basic-authentication-in-rest.html)

# c# - 在 WebView Metro Style 应用程序中加载本地 html 文件

> ID：10684741
> 
> 赞同：10
> 
> 时间：2012-05-21T11:52:13.710
> 
> 标签：c#, webview, microsoft-metro

我在 Metro 风格应用程序的 WebView 控件中加载 html 文件时遇到了一些麻烦。我一直在搜索互联网，发现您无法使用 NavigateTo 方法加载本地 html 文件。我还发现有一种解决方法，您可以在其中使用控件的 NavigateToString 方法。下面是我看到这个的链接： http: [//social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/9cd8614d-2dc8-48ac-9cd9-57b03a644930](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/9cd8614d-2dc8-48ac-9cd9-57b03a644930)

有人在关于该主题的帖子中举例说明了如何做到这一点。他们使用了一个字节数组，将调用 IInputstream.ReadAsync 方法获得的数据放入其中。我遇到的问题是，在我调用该方法后，字节数组中充满了 0，我认为这是不行的。谁能帮我这个？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-28T08:59:01.327

您可以使用`ms-appx-web:///`协议而不是切换上下文`ms-appx:///`，我已经在 HTML/JS Metro Style App 中成功加载了本地 Html 文件和关联的 CSS 和 JavaScript。

我没有在 XAML Metro Style App 中尝试过这个，但相信`ms-appx-web:///`可以使用该协议。限制是您的 Html（如果是本地的，即不是 Web 托管的）必须驻留*在*WinRT 包中，在您的情况下，它似乎是 /Assets。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-04T01:10:43.310

我遇到了同样的问题。在我的应用程序中，我有一个名为 Default.html 的文件被读取，它的内容显示在 WebView 控件中。

```
var html = await Windows.Storage.PathIO.ReadTextAsync("ms-appx:///Assets/Default.html");
MyWebView.NavigateToString(html); 
```

请注意，我正在使用`await`并且`ReadTextAsync`代码是异步的（在执行 IO 时应该这样做），您放置它的函数必须定义为异步，例如：

```
private async void LoadWebView( file ) { ... } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-25T23:27:18.937

这是一个快速示例，告诉我这是否对您有帮助：

我的资产文件夹中有一个名为 MyHTMLPage 的 Html 文件，它有一个内容类型的构建操作和一个复制到输出以始终复制。我的 HTML 文件：

```
<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
<div style="background-color: chartreuse">HELLO WORLD, from a webview</div>  
</body>
</html> 
```

在我的主页.xaml 上：

```
 <Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
        <WebView x:Name="MyWebView"  Width="200" Height="300"></WebView>
    </Grid> 
```

在我的主页.cs 上：

```
 public sealed partial class MainPage : Page
    {
        public MainPage()
        {
            this.InitializeComponent();
            Loaded += MainPage_Loaded;
        }

        private void MainPage_Loaded(object sender, RoutedEventArgs e)
        {
            string src = "ms-appx-web:///Assets/MyHTMLPage.html";
            this.MyWebView.Navigate(new Uri(src));
        }
    } 
```

瞧，这应该可行。

# iphone - 在自定义 UITableViewCell 中检测触摸

> ID：10684746
> 
> 赞同：0
> 
> 时间：2012-05-21T11:52:34.957
> 
> 标签：iphone, uitableview, detect, touchesbegan

我已经查看了网络，但没有找到适合我情况的答案。所以我有一个 UITableCellView 的子类（我尝试做一个与电子邮件应用程序中的单元格非常相似的单元格）。我在右侧添加了一个标签，我想在其中使用蓝色显示日期。现在，当我触摸单元格时，我想更改标签的颜色，因为蓝色突出显示会隐藏它。我已经实现了 thouchesBegan、Canceled 和 Ended，但问题是存在某种“滞后”，单元格获得蓝色突出显示，但标签在几毫秒后改变其颜色。我不知道如何改变它。

这是我的代码片段：

```
#import "AnnouncementCell.h"

@implementation AnnouncementCell
@synthesize date;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
    // Initialization code
    date=[[UILabel alloc] initWithFrame:CGRectMake(220, 13, 100, 22)];
    date.textColor=[UIColor blueColor];
    date.font=[UIFont fontWithName:@"Helvetica" size:14.0];
    [self addSubview:date];
}
return self;
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
date.textColor=[UIColor whiteColor];
[super touchesBegan:touches withEvent:event];

}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
date.textColor=[UIColor blueColor];    
[super touchesEnded:touches withEvent:event];

}

-(void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event {
date.textColor=[UIColor blueColor];   
[super touchesCancelled:touches withEvent:event];

}
- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
[super setSelected:selected animated:animated];

// Configure the view for the selected state
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:10:40.427

您可以尝试在 UITableViewController`date.textColor=[UIColor whiteColor];`的`didSelectRowAtIndexpath`方法中调用，我认为它是在您自己实现的方法之前调用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T15:02:12.153

您可以在这种情况下使用 UIGestures：

### 要使用此机制，您需要更改代码并且可能需要进行一些调整。

```
UITapGestureRecognizer *doubleTap = [[UITapGestureRecognizer alloc]
 initWithTarget:self 
 action:@selector(tapDetected:)];
doubleTap.numberOfTapsRequired = 1;
[self addGestureRecognizer:doubleTap];
[doubleTap release];

-(void)tapDetected:(UIGestureRecognizer*) gesture {
self.lblTitle.backgroundColor=[UIColor blueColor];
[self setNeedsDisplay];
} 
```

自我 = UITableViewCell。

也需要为相同的应用 longTapGesture。同样的事情在我的最后工作。

希望这会帮助你。

# php - 数组到字符串的转换和 str_replace 用法

> ID：10684769
> 
> 赞同：1
> 
> 时间：2012-05-21T11:54:31.573
> 
> 标签：php, arrays, str-replace, implode

我想将数组转换为字符串，而不是想用 str_replace 更改一些字符。一切正常，除了转换。我的代码中有什么问题？

```
function tr_cevir($text = "") {
    //converts turkish charters in to english chracters
    $TR = array('ç', 'Ç', 'ı', 'İ', 'ş', 'Ş', 'ğ', 'Ğ', 'ö', 'Ö', 'ü', 'Ü', 'I');
    $EN = array('c', 'c', 'i', 'i', 's', 's', 'g', 'g', 'o', 'o', 'u', 'u', 'i');
    $text = str_replace($TR, $EN, $text);
    $text = str_replace(" ", "", $text);
    return $text;
}

$my_array = array(çali, Şeli, Ğahmet);

$string = implode(", ", $my_array);

$string_converted = tr_cevir($string);

echo $string_converted; //output returns null 
```

我怎样才能得到这样的输出：

> 卡利、塞利、加梅特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:59:03.247

尝试用这个替换你的整个代码：

```
$my_array = array('çali', 'Şeli', 'Ğahmet');

$string = implode(", ", $my_array);

$string_converted = iconv('UTF-8', 'ISO-8859-1//TRANSLIT', $string);

echo $string_converted; 
```

[`iconv()`](http://php.net/manual/en/function.iconv.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T11:59:46.143

```
$my_array = array('çali', 'Şeli', 'Ğahmet'); 
```

它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T11:58:06.943

```
$my_array = array(çali, Şeli, Ğahmet); 
```

您忘记了字符串周围的 ' 或 "。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T11:58:06.970

你只需要引用你的数组内容：

```
$my_array = array('çali', 'Seli', 'Gahmet'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T11:59:58.537

您可能正在寻找这个：

```
$converted = iconv('UTF-8', 'US-ASCII//TRANSLIT', $text); 
```

它将任何非 ascii 字符音译为它们的 ascii '最接近的等价物'。
更多信息[`iconv()`](http://php.net/iconv)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-21T12:01:13.990

首先，引用数组中的值：

```
$my_array = array("çali", "Şeli", "Ğahmet"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-21T12:07:13.910

您不需要添加自己的翻译代码，已经有相同的库。请检查 [http://php.net/manual/en/function.iconv.php](http://php.net/manual/en/function.iconv.php)

# ios - CCSprite 的超类

> ID：10684775
> 
> 赞同：0
> 
> 时间：2012-05-21T11:54:57.060
> 
> 标签：ios, cocos2d-iphone, subclass, superclass, ccsprite

经过一番研究，我在超级类上找不到任何东西，所以我决定在这里问。

**例子**

```
@interface superClass : CCSprite
@end

@interface subClass : superClass
@end 
```

上述两个示例如何相互关联？另外，我被告知您可以在超类中添加一个方法，然后在子类中使用它（如何？）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:21:15.383

`CCSprite`是的超类`superClass` `superClass`是的超类`subClass`

在超类中有两种使用方法的方法，例如

```
@interface superClass : CCSprite
- (void)doSomething;
- (id)somethingElse;
@end

@implement superClass
- (void)doSomething {
    NSLog( @"do something in super class" );
}
- (id)somethingElse {
    return @"something else in super class";
}
@end

@interface subClass : superClass
- (void)doSomethingTwice;
@end
@implement subClass
- (void)doSomethingTwice {
    [self doSomething];
    [self doSomething];
}
- (id)somethingElse {
    id fromSuper = [super somethingElse];
    return @"something else in sub class";
}
@end 
```

* * *

```
subClass sub = [[subClass alloc] init];
[sub doSomethingTwice];   // this will call `doSomething` implemented is superClass twice
NSLog([sub somethingElse]); // this will call `somethingElse` in super class but return "something else in sub class" because it override it 
```

* * *

基本上你可以在子类的实例上调用超类中实现的方法

并且您可以覆盖子类中的方法以执行不同的操作和/或使用`[super methodName]`调用超类中的方法实现

# c++ - 在从 QWidget 派生的主类中添加菜单

> ID：10684776
> 
> 赞同：1
> 
> 时间：2012-05-21T11:54:57.653
> 
> 标签：c++, qt, menu, qwidget

我正在尝试在 Qt 中创建一个包含菜单的程序。主类是从 QWidget 派生的，我知道我可以使用 QMainWindow 来使用函数 menuBar()，但是我不能在 QMainWindow 中使用布局。我尝试使用 setMenuBar 在窗口布局中添加 QMenuBar，但它不像使用 menuBar() 那样显示，而且我不知道如何使其成为下拉菜单。

![这是使用 setMenuBar 添加的菜单](../Images/d4da4b7c75c4560bcbce433135664f88.png)

![这是使用 menuBar() 添加的菜单](../Images/0e16965a035e1f7686a0c2bce9d2fb65.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-01-28T05:43:58.133

```
QVBoxLayout *boxLayout = new QVBoxLayout(this); // Main layout of widget

QMenuBar* menuBar = new QMenuBar();
QMenu *fileMenu = new QMenu("File");
menuBar->addMenu(fileMenu);
fileMenu->addAction("Save");
fileMenu->addAction("Exit");

this->layout()->setMenuBar(menuBar); 
```

在上面的代码中，我使用了小部件布局的菜单栏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T14:45:01.343

You can use layouts in a `QMainWindow`. You need to provide a central widget. Within this widget, you can use a layout like you would in a stand-alone QWidget.

If you don't need the other stuff provided by `QMainWindow` (status and tool bars), you can add a menu by just creating a `QMenuBar` and placing it at the top of a suitable layout, then adding a `QMenu` to it. But I don't know if this works for window managers putting the menu bar outside the window, like OS X and Unity in Ubuntu do.

So `QMainWindow` should be the way to go. Try adding your layout to the `centralWidget()`, not to the main window itself.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-03T08:13:14.883

您需要创建一个**QMenuBar**对象并将其添加到您的布局中。然后调用**addMenu**函数将菜单添加到菜单栏。添加菜单后，可以调用**addAction**函数添加菜单项，并连接其**触发**信号来处理用户点击。

我找到了一个详细的教程来解释如何做到这一点：[Qt QWidget add menu bar](http://redino.net/blog/2014/05/qt-qwidget-add-menu-bar/)

# symfony - 奏鸣曲管理捆绑 acl-class-field 和 acl-object-field

> ID：10684778
> 
> 赞同：0
> 
> 时间：2012-05-21T11:55:05.400
> 
> 标签：symfony, symfony-sonata

我如何在奏鸣曲管理包中使用类字段范围设置 ACL

到目前为止，使用 SonataAdminBundle 设置 ACL 非常简单。现在我想深入挖掘一下。但我找不到任何关于类字段范围的文档。

我想做的是以下几点：

假设我有一个产品实体。现在我想限制 ROLE_ADMIN_PRODUCT_STAFF 用户对该实体的“field_XY”的访问。

ROLE_ADMIN_PRODUCT_EDITOR 应该可以访问（VIEW，EDIT）它。

有人有过这种要求的经验吗？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T12:47:24.987

您可以在 configureFormFields() 方法中使用 $this->isGranted('ROLE_ADMIN_PRODUCT_STAFF') 根据当前登录用户的角色添加字段。

例子：

```
protected function configureFormFields(FormMapper $formMapper)
{
    $formMapper
        ->add('first_field')
        ->add('second_field');

    if ($this->isGranted('ROLE_ADMIN_PRODUCT_STAFF') {
        $formMapper
            ->add('field_XY');
    }
} 
```

# math - 从标准 X、Y 坐标获取等距网格坐标

> ID：10684781
> 
> 赞同：0
> 
> 时间：2012-05-21T11:55:12.593
> 
> 标签：math, cocos2d-iphone, isometric

我目前正在尝试使用 cocos2d 中的对象将精灵添加到等距平铺 TMX 地图。问题是来自 TMX 对象的 X 和 Y 元数据是标准的 2d 格式（像素 x，像素 y），而不是等距网格 X 和 Y 格式。通常您只需将它们除以图块大小，但等距需要某种变换。

例如，在 64x32 大小为 40 瓦乘 40 瓦的等距瓦片地图上，位于 (20,21) 坐标处的对象显示为 (640,584)

所以问题真的是从 (640,584) 得到 (20,21) 的公式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T21:31:02.013

直接来自 cocos2d 的 CCTMXLayer 源代码：

```
-(CGPoint) positionForIsoAt:(CGPoint)pos
{
    CGPoint xy = {
        mapTileSize_.width /2 * ( layerSize_.width + pos.x - pos.y - 1),
        mapTileSize_.height /2 * (( layerSize_.height * 2 - pos.x - pos.y) - 2),
    };
    return xy;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:50:32.227

[维基百科的等距投影文章](http://en.wikipedia.org/wiki/Isometric_projection)是你的朋友。在数学部分：

```
cx   | 1  0  0 |  | c' 0 -s' |  ax
cy = | 0  c  s |  | 0  1  0  |  ay
cz   | 0 -s  c |  | s' 0  c' |  az 
```

其中 c 是通过某个角度 alpha（第一个矩阵）然后 beta（第二个矩阵）旋转 a 得到的向量，s = sin(alpha), c = cos(alpha), s' = sin(beta), c' = cos（测试版）。然后通过预乘 c 将其投影到 2d 上：

```
vx   | 1 0 0 |  cx
vy = | 0 1 0 |  cy
vz   | 0 0 1 |  cz 
```

将所有这些矩阵变换合并为一个：

```
vx   | c'  0  -s' |  ax
vy = | ss' c  sc' |  ay
vz   | 0   0   0  |  az 
```

要获得数字转换，请使用您自己的 alpha 和 beta 值来生成系数。

# wpf - Rhino Mock 和 WPF 窗口对话框

> ID：10684783
> 
> 赞同：2
> 
> 时间：2012-05-21T11:55:23.997
> 
> 标签：wpf, unit-testing, modal-dialog, rhino-mocks

我正在为 MvvM 场景中的 OK_Execute 命令编写单元测试。

现在一切正常，直到方法调用：

```
 obj.DialogResult = !datumExistiertBereits || datumUeberschreiben;
        obj.Close(); 
```

其中第一行触发以下 InvalidOperationException：

> DialogResult 只能在 Window 创建并显示为对话框后设置。

现在我想知道如何让我的窗口存根对象对这些调用负责而不在我的单元测试中真正显示对话框？

提前致谢

斯蒂夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T12:44:12.023

您需要将显示实际对话框（或任何窗口）的责任转移到一个单独的类中，该类实现一个接口，并且只将该类的一个实例交给使用它的 VM。

例子：

```
interface IDialogService
{
  Result ShowDialog();
}

class ViewModel
{
  ViewModel( IDialogService dlgService ) { ... }

  void ExecuteSomeCommand()
  {
    var result = dlgService.ShowDialog(); 
  }
}

//actual code
class ActualDialog : IDialogService { ... }

var vm = new ViewModel( new ActualDialog() );

//test pseudocode (sorry I don't know RhinoMock)
var vm = new ViewModel( RhinoMock.GetMeAMockFor<IDialogService>() ); 
```

您可以很容易地看到它的优点：vm 对对话框一无所知，并且不再依赖于显示/关闭窗口的代码，而且您可以通过模拟对话框服务来测试代码。

# javascript - 带有循环的 javascript 事件

> ID：10684786
> 
> 赞同：0
> 
> 时间：2012-05-21T11:55:46.033
> 
> 标签：javascript

> **可能重复：**
> [Javascript 仅设置数组中最后一项的属性](https://stackoverflow.com/questions/7004619/javascript-only-sets-attribute-for-last-item-in-array)

我刚刚深入学习了一些基本的 javascript+dom 学习，但不能完全理解只有最后一个元素被切换？我对为什么将事件附加到元素感到迷茫，似乎也覆盖了以前的事件。

**JavaScript：**

```
window.onload = function() {
    // Simple log
    var c = function(x) {
        return console.log(x);
    };

    var hasClass = function(ele, cls) {
        return ele.className.match(new RegExp('(\\s|^)' + cls + '(\\s|$)'));
    };

    var toggleClass = function(ele, cls) {
        if (!hasClass(ele, cls)) {
            ele.className += " " + cls;

        } else {
            var reg = new RegExp('(\\s|^)' + cls + '(\\s|$)');
            ele.className = ele.className.replace(reg, '');
        }
    };

    var toggle = function(clk) {
        c(clk);
    }

    var el = document.getElementsByClassName('time');
    for (i = 0; i < el.length; i++) {
        var btnToggle = el[i].getElementsByClassName('btn-toggle')[0];
        var clk = el[i].getElementsByClassName('clock')[0];
        btnToggle.addEventListener('click', function() {
            toggle(clk)
        }, false);
    }
};​ 
```

**HTML：**

```
<section>
    <div class="time">
        <a href="#" class="btn-toggle">Show the time</a>
        <div class="clock">Clock1</div>
    </div>

    <div class="time">
        <a href="#" class="btn-toggle">Show the time</a>
        <div class="clock">Clock2</div>
    </div>

    <div class="time">
        <a href="#" class="btn-toggle">Show the time</a>
        <div class="clock">Clock3</div>
    </div>

</section> 
```

感谢您的明智建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T11:57:06.813

您需要添加一个闭包：

```
for ( i=0;i<el.length;i++ ) {
    var btnToggle = el[i].getElementsByClassName('btn-toggle')[0];
    var clk = el[i].getElementsByClassName('clock')[0];
    (function(){
        var x = clk;
        btnToggle.addEventListener('click', function(){toggle(x)}, false);
    })();
} 
```

这样，每次迭代都有一个“私有”范围，并且`clk`不会被覆盖。

# php - 停止从应用程序外部访问的操作

> ID：10684790
> 
> 赞同：0
> 
> 时间：2012-05-21T11:56:24.487
> 
> 标签：php, post, yii

我有一个用 Yii 编码的 Web 应用程序。

应用程序中的一个这样的模块具有已使用 CListView 编码的分类页面。我对**jquery.yiilistview.js**进行了一些修改，通过它我可以将数据发布到特定操作，该操作又返回下一组要填充到分页视图中的数据项。

现在我的问题是，有什么方法可以保护我的 Action API，以便它仅在我的网站发布了请求参数时才返回数据。

[即：我不希望有一种“简单”的方式通过使用某种 cron 或 CURL 脚本或任何其他机制来获取包含在我的分类中的数据]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T16:22:28.637

你可以使用 Yii 的[CSRF-Prevention Feature](http://www.yiiframework.com/doc/guide/1.1/en/topics.security#cross-site-request-forgery-prevention)，虽然如果你有一个表单要提交，它是常用的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:53:25.253

为什么不直接使用 $_SERVER['REMOTE_ADDR'] 检查请求者的 IP 地址？只让函数为您的 IP 地址运行。这样，除非他们欺骗他们的 IP，否则你是安全的。

# sql - 水晶报表和sql命令

> ID：10684796
> 
> 赞同：0
> 
> 时间：2012-05-21T11:56:34.933
> 
> 标签：sql, vb.net, crystal-reports

我在水晶报表中显示连接表的数据内容时遇到问题，我的 sql 查询很好，它显示了我自己的数据，但是当我填充水晶报表数据源并显示水晶重复副本和更多数据时，我的代码是：

```
 Dim rep As CrystalReport1 = New CrystalReport1()
    Dim objcon = New SqlConnection("data source=(local);initial catalog=hesabres;user id='sa';password='Maysam7026'")
    Dim objcom = New SqlCommand
    Dim objdata As New DataTable
    Dim objdr As SqlDataReader
    objcom.CommandText = " SELECT customer.customer_name, customer.customer_tel, orders.order_stuff_name, orders.order_number" & _
" FROM   hesabres.dbo.orders orders inner JOIN hesabres.dbo.customer customer ON orders.order_customer_id=customer.customer_id"

    objcom.Connection = objcon
    objcon.Open()
    objdr = objcom.ExecuteReader
    objdata.Load(objdr)
    rep.SetDataSource(objdata)
    CrystalReportViewer1.ReportSource = rep 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:06:46.953

尝试更改这 2 行的顺序：

```
rep.SetDataSource(objdata)
CrystalReportViewer1.ReportSource = rep 
```

至：

```
CrystalReportViewer1.ReportSource = rep
rep.SetDataSource(objdata) 
```

# apache-pig - 尝试使用 TOP 时出错

> ID：10684797
> 
> 赞同：1
> 
> 时间：2012-05-21T11:56:48.887
> 
> 标签：apache-pig

我有一个 Hdfs 文件，它有 6 列，其中包含存储在 Hbase 表中的一些数据。数据看起来像这样 -

```
18.98   2000             1.21   193.46  2.64        58.17
52.49   2000.5   4.32           947.11  2.74        64.45
115.24  2001             16.8   878.58  2.66        94.49
55.55   2001.5   33.03  656.56  2.82        60.76
156.14  2002             35.52  83.75   2.6     59.57
138.77  2002.5   21.51  105.76  2.62        85.89
71.89   2003             27.79  709.01  2.63        85.44
59.84   2003.5   32.1           444.82  2.72        70.8
103.18  2004             4.09   413.15  2.8     54.37 
```

现在我必须把每条记录连同它接下来的 4 条记录一起做一些处理（例如，在第一次拍摄中我必须拍摄记录 1-5，在下一次拍摄中我必须拍摄 2-6 等等）。 .我正在尝试为此使用 TOP，但出现以下错误 -

2012-05-21 17:04:30,328 [main] 错误 org.apache.pig.tools.grunt.Grunt - 错误 1200：Pig 脚本无法解析：标量投影无效：参数：需要从关系中投影列将其用作日志文件中的标量详细信息：/home/mohammad/pig-0.9.2/logs/pig_1337599211281.log

我正在使用以下命令 -

```
grunt> a = load 'hbase://logdata'
>> using org.apache.pig.backend.hadoop.hbase.HBaseStorage(
>> 'cf:DGR cf:HD cf:POR cf:RES cf:RHOB cf:SON', '-loadKey true') 
>> as (id, DGR, HD, POR, RES, RHOB, SON);
grunt> b = foreach a { c = TOP(5,3,a);
>> generate flatten(c);
>> } 
```

谁能告诉我如何做到这一点？？？？非常感谢。

# solr - Solr 拼写检查

> ID：10684808
> 
> 赞同：1
> 
> 时间：2012-05-21T11:57:22.547
> 
> 标签：solr

Solr 拼写检查不适用于某些具有“停用词”的短语查询。例如，“stopword to solr”如果您删除“to”，那么它建议将 solr 拼写为 solar。谁能告诉我有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-01-28T11:46:56.333

**索引**之前。做两件事：i）您必须从**分析器**的索引和查询中删除/注释**Stopfilterfactory**。

 **ii) 不要使用**KeywordTokenizerFactory**，因为它将术语作为一个完整的字符串。使用**StandardTokenizerFactory**。

试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:33:08.543

这取决于已编入索引的文档。很可能您还没有**SOLR索引，或者它的频率与****SOLAR**相比相对较低。
尝试启用 spellcheck.extendedResults=true 以便查看频率**

# jquery - jQuery 可拖动对象列表 - 从开始设置偏移量？

> ID：10684819
> 
> 赞同：2
> 
> 时间：2012-05-21T11:58:20.960
> 
> 标签：jquery, draggable

新手问题:o)

我正在尝试使用 jQuery Draggable 对象生成一条水平线，并从 ul li 标签中获取“位置”偏移量。问题是从开始设置所有对象的偏移量。

任何人？

谢谢！

[http://jsfiddle.net/pYZYz/](http://jsfiddle.net/pYZYz/)

```
<script src="http://code.jquery.com/jquery-1.5.2rc1.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.11/jquery-ui.min.js"></script>

<br>
<div id="slider">
    <ul id="objects"> 
      <li position="300"> 
        1 
      </li> 

      <li position="30"> 
        2                  
      </li> 

       <li position="100"> 
        3 
      </li> 

    </ul> 
</div>

<br>

<p>
    Position:
    <input type="text" id="val" style="border:0; color:#f6931f; font-weight:bold;" />
</p>

$(document).ready(function() 
{    

    $("ul li").draggable
    ({
        containment: "#slider",
        axis: "x",
        snap: false,
        drag: function(event, ui)
        {
            $("#val").val(ui.position.left);

        }   

    });

    $("ul li").offset({left: $(this).attr('position')});

});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T12:16:54.523

您必须使用“每个”来设置位置。

```
$(document).ready(function() 
{

        $("ul li").draggable
        ({
            containment: "#slider",
            axis: "x",
            snap: false,
            drag: function(event, ui)
            {
                $("#val").val(ui.position.left);

            }   

        });

        $('ul li').each(function(index) {
            $(this).offset({left: $(this).attr('position')});
        });

    });​ 
```

# java - Java泛型传递参数

> ID：10684821
> 
> 赞同：7
> 
> 时间：2012-05-21T11:58:32.357
> 
> 标签：java, generics

希望有人可以帮助我摆脱这种困惑。

我做了这个方法：

```
public static <T> void myMethod(Map<Class<T>, MyInterface<T>> map) {
} 
```

使用参数 T 以确保用作键的类与用作 MyInterface 中的参数的类相同。

现在我想传递一个映射，其中不同的类作为键，当然还有 MyInterface 的相应实现。

但它不起作用，由于类型参数而出现语法错误。这是代码，我希望是不言自明的。

```
 import java.util.HashMap;
    import java.util.Map;

    public class Test {

    public static void main(String[] args) {
        Map<Class<?>, MyInterface<?>> map = new HashMap<Class<?>, MyInterface<?>>();

    //      Map<Class<Object>, MyInterface<Object>> map = new HashMap<Class<Object>, MyInterface<Object>>();

        map.put(Object.class, new MyObjectImpl());

        //if I use Map<Class<Object>, MyInterface<Object>> I get a compiler error here
        //because map<String> is not map<Object> basically
        map.put(String.class, new MyStringImpl());

        //this would be possible using <?>, which is exactly what I don't want
    //      map.put(String.class, new MyIntegerImpl());

        //<?> generates anyways a compiler error
        myMethod(map);
    }

    //use T to make sure the class used as key is the same as the class of the parameter "object" in doSomething  
    public static <T> void myMethod(Map<Class<T>, MyInterface<T>> map) {

    }

    interface MyInterface<T> {
        void doSomething(T object);
    }

    static class MyObjectImpl implements MyInterface<Object> {
        @Override
        public void doSomething(Object object) {
            System.out.println("MyObjectImpl doSomething");
        }
    }

    static class MyStringImpl implements MyInterface<String> {
        @Override
        public void doSomething(String object) {
            System.out.println("MyStringImpl doSomething");
        }
    }

    static class MyIntegerImpl implements MyInterface<Integer> {
        @Override
        public void doSomething(Integer object) {
            System.out.println("MyIntegerImpl doSomething");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T12:51:38.387

你不能这样做，因为在`Map`'`put()`方法中没有定义在`key`和之间的约束`value`。如果您想确保您的地图被正确填充（即创建这样的约束），请将地图隐藏在一些将检查正确性的 API 后面，例如：

```
public <T> void registerInterface(Class<T> clazz, MyInterface<T> intf) {
    map.put(clazz, intf);
} 
```

然后，只需调用`registerInterface`而不是手动填充地图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T12:55:44.547

据我所知，您不能像在 Java 中描述的那样声明 Map 。您所能做的就是执行类型检查和/或添加约束。

Guava 提供了一些可以解决[ClassToInstanceMap](http://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#ClassToInstanceMap)问题的方法。因此，一种方法是使用`MapConstraints.constrainedMap`（如下例所示）

```
import java.text.ParseException;
import java.util.HashMap;
import java.util.Map;

import com.google.common.collect.MapConstraint;
import com.google.common.collect.MapConstraints;

public class Main {

    interface MyInterface<T> {
        void doSomething(T object);

        Class<T> getType();
    }

    static class MyObjectImpl implements MyInterface<Object> {
        @Override
        public void doSomething(Object object) {
            System.out.println("MyObjectImpl doSomething");
        }

        @Override
        public Class<Object> getType() {
            return Object.class;
        }
    }

    static class MyStringImpl implements MyInterface<String> {
        @Override
        public void doSomething(String object) {
            System.out.println("MyStringImpl doSomething");
        }

        @Override
        public Class<String> getType() {
            return String.class;
        }
    }

    static class MyIntegerImpl implements MyInterface<Integer> {
        @Override
        public void doSomething(Integer object) {
            System.out.println("MyIntegerImpl doSomething");
        }

        @Override
        public Class<Integer> getType() {
            return Integer.class;
        }
    }

    public static void main(String[] args) throws ParseException {

        Map<Class<?>, MyInterface<?>> map = MapConstraints.constrainedMap(new HashMap<Class<?>, Main.MyInterface<?>>(),
                new MapConstraint<Class<?>, MyInterface<?>>() {
                    @Override
                    public void checkKeyValue(Class<?> key, MyInterface<?> value) {
                        if (value == null) {
                            throw new NullPointerException("value cannot be null");
                        }
                        if (value.getType() != key) {
                            throw new IllegalArgumentException("Value is not of the correct type");
                        }
                    }
                });
        map.put(Integer.class, new MyIntegerImpl());
        map.put(String.class, new MyStringImpl());
        map.put(Object.class, new MyObjectImpl());
        map.put(Float.class, new MyIntegerImpl()); //<-- Here you will get an exception
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T12:26:26.643

我认为这是不可能的：

`Class<T>`只接受`T.class`作为价值。`Class<Object>`不会接受`String.class`，即使 Object 是 String 的超类。

出于这个原因，任何带有`Class<T>`as 键的地图都只能有一个元素，带有`T.class`as 键值，无论`T`.

编译器只会接受具有确定值 T 的映射作为参数。你不能写`Map<Class<?>, MyInterface<?>>`，因为每个？假设是不同的：它不匹配`Map<Class<T>, MyInterface<T>>`要求 T 具有相同的值。

也就是说，myMethod 只会接受单条目映射，这似乎没有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T12:44:52.740

将您的方法签名更改为

```
public static <T> void myMethod(Map<Class<? extends T>, MyInterface<? extends T>> map) {

} 
```

现在您的声明和调用应该可以工作了..

```
Map<Class<?>, MyInterface<?>> map = new HashMap<Class<?>, MyInterface<?>>();
    map.put(Integer.class, new MyIntegerImpl());
    map.put(String.class, new MyStringImpl());
    map.put(Object.class, new MyObjectImpl());
    myMethod(map); 
```

# ms-access - Access 2007 可以在直接将数据上传到表后触发 VBA 代码吗？

> ID：10684831
> 
> 赞同：1
> 
> 时间：2012-05-21T11:59:07.537
> 
> 标签：ms-access, vba

当用户在表单控件中输入数据时，On Update 事件触发代码，该代码通过表单上的其他控件将数据输入到表中。因此，例如，在一个字段中输入 31 的 BMI 会更新相应的肥胖字段，以显示此人在临床上肥胖。

当我将数据直接上传到表中时，有没有办法让这个 VBA 代码运行并更新所有必要的值，而不必通过表单手动进入每条记录并执行一些操作来触发它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:07:31.713

不在 2007 版中，Access 2010 包括可以监视表更新的“数据宏”。对于 2007 年，您需要在某处独立机器上运行一个副本，该副本可以循环检查表，然后在检测到更改时触发事件。

# java - 排除依赖 Maven JAR 中的测试类

> ID：10684835
> 
> 赞同：0
> 
> 时间：2012-05-21T11:59:21.500
> 
> 标签：java, maven, jar, ear

我们有一个 EAR 项目，它组装了一个 WAR 文件并有一些 JAR 文件作为依赖项。EAR 的 POM.xml 如下所示：

```
<dependencies>
        <dependency>
            <groupId>our.package</groupId>
            <artifactId>package-impl</artifactId>
            <version>0.0.1-SNAPSHOT</version>
            <type>jar</type>
            <scope>runtime</scope>
        </dependency>   
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-ear-plugin</artifactId>
                <version>${maven.ear.plugin.version}</version>
                <configuration>
                    <version>5</version>
                    <generateApplicationXml>false</generateApplicationXml>
                    <defaultLibBundleDir>lib</defaultLibBundleDir>
                    <modules>
                        <webModule>
                            <groupId>de.project</groupId>
                            <artifactId>project.war</artifactId>
                            <bundleDir>/</bundleDir>
                            <bundleFileName>project.war</bundleFileName>
                            <contextRoot>project</contextRoot>
                        </webModule>
                    </modules>
                </configuration>
            </plugin>
        </plugins>
    </build> 
```

package-impl 作为 JAR 包含在 EAR 中，其中包含一些测试类。不幸的是，在组装 EAR 时，这些测试类与 JAR 捆绑在一起。除了方面，Maven 应该包含测试类，当组装 EAR 时，如何在 JAR 中排除这些测试类？

package-impl 中的所有测试类都在 src/test/java 源文件夹中。

问候斯文

**更新：** 当我手动从 EAR 构建独立的 package-impl 时，不包括测试类（如预期的那样）。

**更新2**

这是完整的 package-impl POM.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <artifactId>project-impl</artifactId>
    <parent>
        <groupId>de.company</groupId>
        <artifactId>project</artifactId>
        <version>0.0.1-SNAPSHOT</version>
        <relativePath>../project</relativePath>
    </parent>
    <dependencies>
        <dependency>
            <groupId>org.jboss.spec</groupId>
            <artifactId>jboss-javaee-6.0</artifactId>
            <version>${jee6.version}</version>
            <type>pom</type>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.hibernate.javax.persistence</groupId>
            <artifactId>hibernate-jpa-2.0-api</artifactId>
            <version>${hibernate.jpa-api.version}</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.jboss</groupId>
            <artifactId>jboss-vfs</artifactId>
            <version>${jboss-vfs.version}</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>commons-lang</groupId>
            <artifactId>commons-lang</artifactId>
            <version>${commons-lang.version}</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>dom4j</groupId>
            <artifactId>dom4j</artifactId>
            <version>${dom4j.version}</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.faces</groupId>
            <artifactId>jsf-api</artifactId>
            <version>${jsf-api.version}</version>
            <scope>provided</scope>
        </dependency>

        <!-- depenencies on third party modules -->
        <dependency>
            <groupId>org.jboss.solder</groupId>
            <artifactId>solder-impl</artifactId>
            <version>${jboss.solder.solder-impl.version}</version>
        </dependency>
        <dependency>
            <groupId>org.jboss.seam.persistence</groupId>
            <artifactId>seam-persistence</artifactId>
            <version>${org.jboss.seam-persistence.version}</version>
            <exclusions>
                <!-- already provided by jboss as -->
                <exclusion>
                    <groupId>org.jboss.spec.javax.servlet</groupId>
                    <artifactId>jboss-servlet-api_3.0_spec</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.richfaces.core</groupId>
            <artifactId>richfaces-core-impl</artifactId>
            <version>${jboss.richfaces.version}</version>
        </dependency>
        <dependency>
            <groupId>org.richfaces.ui</groupId>
            <artifactId>richfaces-components-ui</artifactId>
            <version>${jboss.richfaces.version}</version>
        </dependency>
        <dependency>
            <groupId>org.reflections</groupId>
            <artifactId>reflections</artifactId>
            <version>${org.reflections.version}</version>
        </dependency>
        <dependency>
            <groupId>org.jboss.arquillian</groupId>
            <artifactId>arquillian-bom</artifactId>
            <version>1.0.0.Final</version>
            <scope>import</scope>
            <type>pom</type>
        </dependency>
        <dependency>
            <groupId>org.jboss.arquillian.junit</groupId>
            <artifactId>arquillian-junit-container</artifactId>
            <version>1.0.0.Final</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.jboss.arquillian.container</groupId>
            <artifactId>arquillian-weld-ee-embedded-1.1</artifactId>
            <version>1.0.0.CR3</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.jboss.weld</groupId>
            <artifactId>weld-core</artifactId>
            <version>1.1.5.Final</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-simple</artifactId>
            <version>1.6.4</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.1</version>
            <scope>test</scope>
        </dependency>       
    </dependencies>
</project> 
```

**更新3**

这最终成为一个日食设置。EAR-Project 有一个包含测试文件夹的文件夹列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T15:30:04.870

过去，我不小心将测试类放在 src/main/java 而不是 src/test/java 中，这在 eclipse 中有效（编译、运行）但我的构建失败了，因为 JUnit 不在构建的类路径中。在您的情况下可能正确，也可能不正确，但值得检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:14:12.893

问题必须出在依赖 JAR 文件的模块中。也许有人已经将构建配置为在 JAR 中包含测试类。如果是这样，您应该修复模块（即它的 POM 文件）以不这样做，而不是尝试在您的 EAR 模块中处理它。

# javascript - 在谷歌地球插件中创建 3d 形状

> ID：10684839
> 
> 赞同：0
> 
> 时间：2012-05-21T11:59:34.957
> 
> 标签：javascript, 3d, google-earth-plugin

首先感谢您的阅读。我有一个网络应用程序，它大量使用谷歌地球插件来显示一些传感器数据和其他东西。我试图让用户能够定义在插件中绘制它们的区域和体积。我能够添加区域特征（例如创建、可视化、编辑和删除）。现在我正在处理卷，但我真的不知道处理它们的最佳方法是什么。需要注意的重要一点是，我只对具有平行上下表面的体积感兴趣（没有金字塔，没有复杂的图形，只有[棱镜](http://en.wikipedia.org/wiki/Prism_%28geometry%29)）我想到的第一个想法是创建一个由 2 个多边形和一组边，用于将上表面的每个多边形顶点连接到下表面中的相应顶点。就像是：

```
 //Create the upper surface (polygon)  
    var aPolygonUpperPlacemark = ge.createPlacemark("");
    var aPolygonUpper = ge.createPolygon("");
    aPolygonUpper.setAltitudeMode(ge.ALTITUDE_RELATIVE_TO_GROUND);
    aPolygonUpperPlacemark.setGeometry(aPolygonUpper);
    var aOuterUpper = ge.createLinearRing("");
    aPolygonUpper.setOuterBoundary(aOuterUpper);
    ge.getFeatures().appendChild(aPolygonUpperPlacemark);

    //Create the lower surface (polygon)
    var aPolygonLowerPlacemark = ge.createPlacemark("");
    var aPolygonLower = ge.createPolygon("");
    aPolygonLower.setAltitudeMode(ge.ALTITUDE_RELATIVE_TO_GROUND);
    aPolygonLowerPlacemark.setGeometry(aPolygonLower);
    var aOuterLower = ge.createLinearRing("");
    aPolygonLower.setOuterBoundary(aOuterLower);
    ge.getFeatures().appendChild(aPolygonLowerPlacemark);

    var myPrism = {
        upperSurface: aPolygonUpperPlacemark,
        lowerSurface: aPolygonLowerPlacemark,
        edges: new Array()
    }; 
```

这里的问题是侧面不会显示为真实表面，而只会显示为线条。另一方面，我可能会为每个侧面创建另一个多边形，但这会使这种 3d 形状的管理比我想要的更复杂。
所以我的问题是，有没有更好的方法来处理 3d 形状或内置几何？
请注意，我不能依赖 3d 模型（因此无法加载外部 Kmz），因为最后创建 3d 形状将是用户的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T00:33:58.543

只需创建上部多边形（例如确保坐标包括高度），然后确保设置为 1。您可以在 API 中使用 setExtrude(true) 执行此操作。

有关详细信息，请参阅[https://developers.google.com/kml/documentation/kml_tut#polygons](https://developers.google.com/kml/documentation/kml_tut#polygons)

I'd also recommend you check out the utility library - it makes things like this much more concise. See for example this extruded polygon example: [http://earth-api-utility-library.googlecode.com/svn/trunk/extensions/examples/poly-draw-extruded.html](http://earth-api-utility-library.googlecode.com/svn/trunk/extensions/examples/poly-draw-extruded.html)

# android - 通过maven安装apk

> ID：10684840
> 
> 赞同：1
> 
> 时间：2012-05-21T11:59:43.567
> 
> 标签：android, unit-testing, apk, pom.xml, android-maven-plugin

我想知道如何将 .apk 文件添加到我的 pom.xml 中，以便从 apk 文件安装应用程序，并在第二步中使用测试、午餐模拟器、安装将要测试的 apk 等构建项目。现在第一个apk是手动安装的，但我需要安装那个apk whit maven，然后进入第二步。有没有其他人遇到同样的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T22:59:53.143

好的，我自己解决了，这是 pom.xml 的一部分

```
<executions>
  <execution>
   <id>startEmulator</id>
       <phase>initialize</phase>
       <goals>
         <goal>emulator-start</goal>
       </goals>
   </execution>
   <execution>
   <id>install-client</id>
       <phase>initialize</phase>
       <configuration>
          <file>my.apk</file>
       </configuration>
       <goals>
          <goal>deploy</goal>
       </goals>
   </execution>
</executions> 
```

# c++ - c++中的3维向量-传递给函数之前的部分大小定义

> ID：10684844
> 
> 赞同：1
> 
> 时间：2012-05-21T12:00:01.483
> 
> 标签：c++, memory-management, resize, segmentation-fault, pass-by-reference

我想定义一个 3 维向量，其中前两个维度是固定的，但我希望第三个向量由循环内调用的函数动态填充。

我不完全确定这是否被允许，但我已经尝试通过以下方式实现它：

```
#define NUM 6

vector<vector<vector<double> > > foo;

foo.resize(NUM);
for(int j1=0; j1 < NUM; j1++){
    foo[j1].resize(NUM);
}

while(<condition>){
    fun(foo);
} 
```

我将函数 fun 声明为

```
void fun(vector<vector<vector<double> > >& foo){
    for(int j1=0; j1<NUM; j1++){
        for(int j2=j1+1; j2<NUM; j2++){
             if(<condition>){
                   foo[j1][j2].push_back(<value>);
             }
         }
     }
 } 
```

我最初测试了 NUM 等于 5 并且一切看起来都很好，但是当我尝试将其更改为 6 时，我遇到了分段错误。

我已经看到，即使我不尝试用 push_back 填充第三维（即我注释 push_back 行），对以 foo 作为参数的函数的简单调用也会弄乱 foo 的维度，即如果我插入一个

```
 cout << foo.size() << endl; 
```

在 while 循环中，我看到 foo 的维度在第一次迭代后发生了变化，从 NUM 变为随机数。

我还发现这取决于平台，因为我在 Linux Ubuntu 上遇到错误，但在 MacOSX 上却没有。所以我想我在做一些与内存分配有关的真正错误的事情，但我不知道到底是什么。有人可以向我解释一下吗？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:47:05.287

实际上，您可以使用向量构造函数创建一个具有固定数字大小的 3D 矩阵和所需大小的 2D 矩阵，该向量构造函数将元素的数量和一个用于制作副本以填充向量的元素作为参数。这是它的样子：

```
#include <iostream>
#include <vector>

int main() {
    const size_t NUM = 6;
    std::vector< std::vector< std::vector<double> > > Matr(NUM, std::vector< std::vector<double> >(NUM, std::vector<double>()));
    std::cout << "num 2D matrices - " << Matr.size() << std::endl;
    for(size_t j1 = 0; j1 < Matr.size(); ++j1){
        std::cout << "num rows - " << Matr[j1].size() << std::endl;
        for(size_t j2 = 0; j2 < Matr[j1].size(); ++j2) {
            Matr[j1][j2].push_back(0.09l);
            std::cout << "num columns - " << Matr[j1][j2].size() << " ";
        }
        std::cout << std::endl;
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T12:23:14.230

```
foo.resize(NUM);  
for(int j1=0; j1 < NUM; j1++){  
    foo[j1].resize(NUM);
} 
```

在这里你正在调整大小`foo[j1]`，但还没有任何东西`foo[j1]`..
所以`foo[j1]`只是一个垃圾。

# javascript - javascript - 检查var是否在数组中

> ID：10684846
> 
> 赞同：1
> 
> 时间：2012-05-21T12:00:06.927
> 
> 标签：javascript, arrays

我有两个整数数组`a=[1,3,5,7]`和`b=[2,4,6,8]`. 现在我需要检查给定的 var`$v`是否在`a`其中，如果是，则从`b`. 例子：

`if $v in a (and $x is its position) return $b[$x]`.

我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T12:02:55.520

该`indexOf`方法将返回找到该项目的数组的索引，如果未找到，则返回 -1。

```
var i = a.indexOf(v);
if (i != -1)
{
    return b[i]
} 
```

编辑：如果您的浏览器没有该方法，这将添加该方法。

```
if (!Array.prototype.indexOf)
{
    Array.prototype.indexOf = function(x)
    {
        var i;
        for (i = 0; i < this.length; i++)
        {
            if (this[i] === x)
            {
                return i;
            }
        }
        return -1;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T12:03:20.920

循环遍历数组中的项目：

```
for (var i = 0; i < a.length; i++) {
  if (a[i] == v) {
    return b[i];
  }
}
return -1; // not found 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T12:04:20.870

```
if(a.indexOf(v) > -1) {
  var id = a.indexOf(v);
  console.log(b[id]);
} 
```

参见[Array.indexOf的兼容性](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/IndexOf#Compatibility)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T12:09:49.833

```
var i = a.indexOf(v);
if (i !== -1)
{
    return b[i]
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T12:33:21.890

我想这会奏效。

```
>> function test(k){ return b[a.indexOf(k)]}

>> test(1)
2

>> test(9)
undefined 
```

在 js 中，`indexOf`总是返回一个整数，并且通过调用一个带有整数的数组（如`A[3]`），它总是返回一个值或`undefined`. `undefined`如果要确保应用程序代码没有损坏，请显式检查该值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-21T18:14:28.513

您可能想尝试以下功能。PHP.js 确实是一个很棒的函数集合，并向所有贡献者致敬，使其成为今天的样子。

[http://phpjs.org/functions/in_array:432](http://phpjs.org/functions/in_array:432)

# python - 从导入的脚本（tkinter，python）如何正确打开新窗口？

> ID：10684849
> 
> 赞同：2
> 
> 时间：2012-05-21T12:00:19.423
> 
> 标签：python, tkinter

来自 example_script.py 的小部件 tk.Entry 不保存值“textvariable”字段。

示例脚本.py：

```
import Tkinter as tk

class App(tk.Frame):
    def __init__(self, master, text):
        tk.Frame.__init__(self, master)
        textVar = tk.StringVar()
        textVar.set(text)
        entryVar = tk.Entry(self, textvariable=textVar).pack()
        self.pack()

def main():
    root = tk.Tk()
    text = ['text1', 'text2', 'text3']
    for i in text:
        App(root, i)
    root.mainloop() 
```

main_script.py：

```
import Tkinter import example_script as ex

if __name__ == '__main__':
    root = Tkinter.Tk()
    Tkinter.Button(root, text='press', command=lambda: ex.main()).pack()
    root.mainloop() 
```

如果我将行 'entryVar = tk.Entry(self, textvariable=textVar).pack()' 更改为

```
entryVar = tk.Entry(self)
entryVar.pack()
entryVar.insert(0, text) 
```

字段的值被更新。为什么？

如何从导入的脚本正确打开新窗口？Tkinter.Toplevel() 不适合。现在我使用 subprocess.Popen。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:14:05.253

当你这样做时`entryVar = tk.Entry(self).pack()`，`entryVar`将被设置为，`None`因为那是`pack()`返回的。当您`pack`在单独的线路上调用时，`entryVar`将设置为您认为它的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T12:26:20.973

您不能`Tk`在一个程序中创建该类的两个实例。Tkinter 并非旨在以这种方式工作。

# machine-learning - Weka java库：如何获取分类实例的字符串表示？

> ID：10684852
> 
> 赞同：2
> 
> 时间：2012-05-21T12:00:43.003
> 
> 标签：machine-learning, data-mining, weka, neural-network

目前，我正在开展一个项目，将搜索查询分为以下八种类型：{运动员、演员、艺术家、政治家、地理、设施、质量保证、定义}。经过一些工作后，当我使用分层 10 倍交叉验证评估分类器时，我使用多层感知器分类器为我的 300 个样本查询集正确分类了 78% 的实例，我认为这相当不错。

使用 weka java 库，我将整个事情实现到 java 代码中，因此我可以编写一个程序，将查询动态地提供给分类器并检索它的查询类型。我成功地实现了整个分类器训练部分。下一步是使用classifyInstance() 或distributionForInstance() 来确定查询被分类到的类。

但是，classifyInstance() 只返回一个我不知道从中获取实际查询类型的双精度值。[weka wikispaces](http://weka.wikispaces.com/Use+WEKA+in+your+Java+code#Classification-Classifying%20instances)告诉我我可以使用

```
unlabeled.classAttribute().value((int) clsLabel); 
```

在调用classifyInstance() 以获取类的字符串表示之后，在我的情况下，这似乎总是返回空字符串。

使用 distributionForInstance() 我能够成功地检索一个具有 0 和 1 之间的八个双精度值的数组（这很好，因为我将其分类为八种查询类型）。但是，这个数组的顺序是什么？结果数组中的第一个元素是我的训练文件中出现的第一个类吗？或者这个结果数组中是否有其他一些预定义的元素顺序（例如按字母顺序）？[weka 文档](http://weka.sourceforge.net/doc/weka/classifiers/Classifier.html#distributionForInstance%28weka.core.Instance%29)没有提供任何相关信息。

我希望有人能帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T17:31:56.097

在内部，Weka 将所有值作为双精度值处理。当您创建 时`Attribute`，您向它传递一个字符串数组，其中列出了可能的标称值。分类返回的 double 是原始数组中所选属性的索引。因此，如果您的代码如下所示：

```
String[] attributeValues = {"a", "b", "c"};
Attribute a = new Attribute("attributeName", attributeValues); 
```

并`classifyInstance()`返回`2`，那么它选择的类将是`attributeValues[2]`or `c`。

使用该`distributionForInstance()`方法，两个数组的索引匹配，`attributeValues[0]`返回的数组第一个元素的字符串名称也是如此。

**更新**`Instances`（因为downvote） 如果您让weka自己创建对象（例如，如果您从arff 文件中读取），上述方法将不起作用。鉴于您的问题，情况似乎并非如此，但如果是，请发布代码，以便我们了解发生了什么。

# asp.net-mvc - MVC Web 应用程序的域驱动设计与数据库驱动设计

> ID：10684854
> 
> 赞同：8
> 
> 时间：2012-05-21T12:00:46.983
> 
> 标签：asp.net-mvc, architecture, domain-driven-design, database-driven

我正在将旧版 Web 窗体应用程序扩展/转换为全新的 MVC 应用程序。扩展既是技术方面的，也是业务用例方面的。遗留应用程序是一个完善的数据库驱动设计 (DBDD)。因此，例如，如果您有不同类型的员工，如操作员、主管、商店管理员等，并且您需要添加一个新类型，您只需在几个表中添加一些行，瞧，您的 UI 会自动添加所有内容/更新新类型的员工。然而，层的分离不是那么好。

新项目有两个主要目标

*   可扩展性（针对当前和未来的管道要求）
*   表现

我打算创建一个新项目，用域驱动设计 (DDD) 替换数据库驱动设计 (DBDD)，同时牢记可扩展性要求。然而，如果我将它与传统 DBDD 应用程序的性能进行比较，从数据库驱动设计转向领域驱动设计似乎会对性能要求产生负面影响。在遗留应用程序中，任何来自 UI 的数据调用都将直接与数据库交互，并且任何数据都将以 DataReader 或（在某些情况下）DataSet 的形式返回。

现在有了严格的 DDD，任何数据调用都将通过业务层和数据访问层进行路由。这意味着每次调用都会初始化一个业务对象和一个数据访问对象。单个 UI 页面可能需要不同类型的数据，这是一个 Web 应用程序，每个页面都可以由多个用户请求。此外，一个 MVC Web 应用程序是无状态的，每个请求都需要每次都初始化业务对象和数据访问对象。因此，对于 MVC 无状态应用程序而言，DBDD 似乎比 DDD 性能更可取。

或者在 DDD 中有一种方法可以同时实现 DDD 提供的可扩展性和 DBDD 提供的性能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T12:05:51.057

您是否考虑过某种形式的命令查询分离，其中更新通过域模型但读取来自 DataReaders？成熟的 DDD 并不总是合适的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T10:51:16.400

> *“现在有了严格的 DDD，任何数据调用都将通过业务层和数据访问层进行路由。”*

我不相信这是真的，当然也不实用。我相信这应该是：

> 现在有了严格的 DDD，任何对**事务**的调用都将通过业务层和数据访问层进行路由。

没有什么说您不能直接调用数据访问层来获取您需要在屏幕上显示的任何数据。只有当您需要修改数据时，您才需要调用基于其行为设计的域模型。在我看来，这是一个关键的区别。如果您通过域模型路由所有内容，您将遇到三个问题：

1.  时间 - 实现功能会花费您更长的时间，但没有任何好处。
2.  模型设计——你的领域模型会变形，以满足查询而不是行为的需要。
3.  性能 - 不是因为额外的层，而是因为您无法像直接从查询中那样快速地从模型中获取聚合数据。即考虑为特定客户下达的所有订单的总价值——为此编写查询比获取客户的所有订单实体、迭代和求和要快得多。

正如 Chriseyre2000 所提到的，CQRS 旨在解决这些确切的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T03:51:10.000

在您的场景中，使用 DDD 应该不会对性能产生重大影响。您担心的似乎更像是数据访问问题。你把它称为

> 初始化业务对象和数据访问对象

为什么“初始化”很昂贵？您使用什么数据访问机制？

存储在关系数据库中的长寿命对象的 DDD 通常使用 ORM 实现。**如果使用得当**，ORM 对大多数应用程序的性能影响很小（如果有的话）。如果存在已证实的瓶颈，您始终可以将应用程序中对性能最敏感的部分切换回原始 SQL。

对于它的价值，NHibernate 只需要在应用程序启动时初始化一次，之后它使用与常规数据读取器相同的 ADO.NET 连接池。因此，这一切都归结为正确的映射、获取策略和避免典型的数据访问错误，如“n+1 选择”。

# php - 向上滑动 DIV 容器

> ID：10684857
> 
> 赞同：1
> 
> 时间：2012-05-21T12:01:00.693
> 
> 标签：php, javascript, jquery

如何使用 jquery 制作一个向上滑动的水平 DIV 容器？到目前为止，我有以下提供的代码。问题是 的内容`<h1 id="filter_content">Content</h1>`最初没有隐藏。我还看到了非常漂亮的向上滑动菜单，就像[这里](http://www.zabbix.com/screenshots.php)的第一个屏幕截图一样。因此，当用户单击 + 时，内容会向上滑动。我在哪里可以找到示例代码或一些示例？

```
<div id="filter">
  <h1>Filter</h1><br>
</div>
<h1 id="filter_content">Content</h1>

<script>
$('#filter').click(function() {
    if ($("#filter").is(":hidden")) {
          $("#filter_content").show("slow");
        } else {
          $("#filter_content").slideUp("slow");
        }
    });
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T12:03:27.817

Hiya[**工作演示点击这里**](http://jsfiddle.net/PnLmQ/) **或** [**最初隐藏的演示在这里**](http://jsfiddle.net/PnLmQ/1/)

使用`slideToggle`API：很好阅读[http://api.jquery.com/slideToggle/](http://api.jquery.com/slideToggle/)将为您正在寻找的确切行为解决问题。

**代码**

```
$('#filter').click(function() {

          $("#filter_content").slideToggle("slow");

    });
​ 
```

# python - Sunburnt solr 通配符 *:*

> ID：10684870
> 
> 赞同：3
> 
> 时间：2012-05-21T12:01:56.317
> 
> 标签：python, solr, sunburnt

我需要一种使用 solr 通配符的方法*：*在 sunburnt solr 中，或者是否有另一种方法可以从索引中指定“所有文档”然后精炼。这是代码

```
....
si = sunburnt.SolrInterface(url=solr_url,http_connection=h)
search_terms = {SEARCH_TERMS_COMIN_FROM_A_FORM}

#!This is where I need help!
result = si.query(WILDCARD)#I need all the docs from the index

#then I can do this
if search_terms['province']:
    result = result.query(province=search_terms['province'])
if search_terms['town']:
    result = result.query(town=search_terms['town'])
.......#two other similar if statement blocks
#finally
results = result.execute() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T16:16:14.210

当然：出于这个确切原因，您可以只使用一个空查询 - 这将起作用：

```
result = si.query()

if search_terms['province']:
    result = result.query(province=search_terms['province'])
if search_terms['town']:
    result = result.query(town=search_terms['town']) 
```

# c++ - 在 X 轴“就地”（左/右）上翻转 QGraphicsItem

> ID：10684874
> 
> 赞同：0
> 
> 时间：2012-05-21T12:02:16.793
> 
> 标签：c++, qt, qt4, qgraphicsitem

我有一个`QGraphicsSvgItem`并且希望有两个彼此面对的实例。我已经认识到[`QGraphicsItem::setScale()`](http://doc-snapshot.qt-project.org/4.8/qgraphicsitem.html#setScale)在负值的情况下使用提到翻转和旋转的方法，但这并不是我想要的。

我可能只是缺少对基本转换的一些巧妙使用，但不知何故我还没有成功。使用 OpenGL，我可以为单轴设置缩放，这很成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:25:02.043

您可以使用`QTransform`：

```
item->setTransform(QTransform::fromScale(-1, 1)); 
```

# perl - Perl时间解析和“加天：小时：分钟”的差异计算

> ID：10684875
> 
> 赞同：3
> 
> 时间：2012-05-21T12:02:20.827
> 
> 标签：perl

我有一个带有时差的字符串，例如：

```
12:03:22  <- where
 ^  ^  ^
 |  |  +minutes
 |  +hours
 +days 
```

强制性的只有分钟，小时和天可以省略，但这里可以是例如 120:30，所以 120 小时和 30 分钟。

需要计算**NOW +** Difference 的日期和时间，例如：

```
when now is "May 20, 13:50" and
the string is "1:1:5"
want get as result: "2012 05 21 14 55" (May 21, 14:55) 
```

我知道 DateTime，但是解析输入字符串的简单方法是什么？我敢肯定，这是一种更好的方法：

```
use _usual_things_;
my ....
if($str =~ m/(.*):(.*):(.*)/) {
   $d = $1; $h = $2; $m = $3;
}
elsif( $str =~ m/(.*):(.*)/ ) {
   $h = $1; $m = $2;
} elsif ($str =~ m/\d+/ ) {
   $m = $1;
}
else {
  say "error";
} 
```

以及如何将解析的天数、小时数、分钟数添加到当前日期？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T12:08:59.577

如何使用`reverse`来避免检查格式？

```
my ($m, $h, $d) = reverse split /:/, $str; 
```

要将其添加到当前日期，只需使用 DateTime：

```
print DateTime->now->add(days    => $d // 0,
                         hours   => $h // 0,
                         minutes => $m); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-21T12:12:48.100

解析可以进行一次，但基于否进行分支。令牌是无法避免的。这是示例实现。

```
$Str = '12:03:22' ;

@Values = ($Str=~/\G(\d\d):?/g) ;

print "error with input" if not @Values;

if( @Values == 3) { print "Have all 3 values\n" }
elsif( @Values == 2) { print "Have 2 values\n" } 
```

# iphone - 实例化一个传递可变数组的 NSArray 将数组更改为可变数组？

> ID：10684876
> 
> 赞同：0
> 
> 时间：2012-05-21T12:02:34.880
> 
> 标签：iphone, objective-c

如果我实例化一个 NSArray 并传递一个 NSMutableArray，它会变成一个 NSArray 还是只是看起来是一个。

即最终释放的可变数组

```
- (NSArray *)getObjectivesWithPerspective:(Perspective *)perspective
{
    NSMutableArray *result = [NSMutableArray array];

    for (ObjectiveManagedObject *objective in self.objectives)
    {
        if (objective.perspective.objectID == perspective.objectID) {
            [result addObject:objective];
        }
    }

    return [NSArray arrayWithArray:result];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:23:38.890

看到这个答案：[https ://stackoverflow.com/a/1392051/254422](https://stackoverflow.com/a/1392051/254422)

基本上，它将对象复制到一个新的、自动释放的、不可变的 NSArray 中。

使用 +array 创建的 NSMutableArray 是自动释放的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:02:40.587

作为`NSMutableArray`的子类`NSArray`，您可以`result`直接返回，而无需创建新`NSArray`对象：

```
- (NSArray *)getObjectivesWithPerspective:(Perspective *)perspective
{
    NSMutableArray *result = [NSMutableArray array];

    for (ObjectiveManagedObject *objective in self.objectives)
    {
        if (objective.perspective.objectID == perspective.objectID) {
            [result addObject:objective];
        }
    }

    return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T12:23:38.307

您可以在此处找到有关此的一些信息：[-arrayWithArray 实际上做了什么？](https://stackoverflow.com/questions/1391914/what-does-arraywitharray-actually-do). 但是你得到的数组应该是不可变的。NSArray 会将引用复制到不可变数组中。

如有疑问，请进行测试。从方法中获取一个数组，将其转换为 NSMutableArray 并尝试添加一个对象。执行此操作时应该会出现错误。

# c# - 从网络位置读取文件

> ID：10684879
> 
> 赞同：3
> 
> 时间：2012-05-21T12:02:58.730
> 
> 标签：c#, asp.net, .net, network-share

我在网络驱动器上共享的文件夹中有一堆文件。我正在尝试将这些文件访问到我的代码中。但它给出了一个错误：

> System.IO.DirectoryNotFoundException 未被用户代码处理

```
Fname = txtwbs.Text;
DirectoryInfo objDir = new DirectoryInfo("Y:\\");
_xmlpath = objDir + "\\" + Fname + "\\" + Fname + ".xml";
if (File.Exists(_xmlpath ))
{
    reader(_xmlpath);
} 
```

我还使用过：

```
file = fopen("\\\\10.0.2.20\\smartjobs\\Eto\\"+Fname); 
```

我能够从我的本地 PC 读取文件，但它只对网络位置给出例外。请让我知道如何从网络共享位置读取文件。

以及如何在 Asp.net Web 应用程序中制作文件夹的树形视图。

目录结构是这样的

```
\\10.0.2.20\Smartjobs\Eto\ 
```

这是父目录 它包含具有 XML 文档的文件夹编号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:10:40.013

在 asp.net 中，您无法直接访问网络文件夹，因为 asp.net 在匿名用户帐户下运行，该帐户无权访问该位置。

您可以在该共享位置向“所有人”授予权限，并查看它是否正常工作。然而，这是不可取的。

或者，当访问网络位置时，您可能必须在 asp.net 代码中进行模拟。您将不得不对有权访问该共享位置的用户进行模拟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T12:11:24.530

您可能已将共享目录映射为用户，但您忘记了 asp.net 正在池的帐户下运行，并且您没有将 y:\ 与共享目录连接。

接下来认为您可以做的是直接尝试通过网络共享名进行连接，例如：`\\SharedCom\fulldir\file.xml`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T12:09:58.090

您需要指定 ASP.net 页面以有权访问该文件的特定用户身份运行。然后，您需要`impersonation`在`web.config`文件中启用，以便 ASP.net 以`user`.

> 您的 Y 驱动器是映射的网络驱动器。您需要使用网络网址，例如`\\server\Smartjobs\Eto\xyz.xml`

您可以像在其他任何地方一样指定`name`文件的名称：`network`

```
Dim myStream As IO.FileStream = IO.File.Open("\\myserver\myshare\myfile", IO.FileMode.Open)
Dim myBytes As Byte()
myStream.Read(myBytes, 0, numberOfBytesToRead) 
```

更多参考：
[无法使用共享驱动器在 ASP.NET 页面上列出文件或目录内容](https://stackoverflow.com/questions/7922240/unable-to-list-file-or-directory-contents-on-asp-net-page-using-shared-drive)
[通过 IIS 使用网络上的文件](https://stackoverflow.com/questions/7670761/using-file-on-network-via-iis)

# android - 在android的SQLite数据库中插入数组

> ID：10684881
> 
> 赞同：8
> 
> 时间：2012-05-21T12:03:03.260
> 
> 标签：android, sqlite, arraylist

我想将工作日保存在数据库中，所以我想通过为每一天分配 int 值来存储它。IE

**1** -> 选中， **0** -> 未选中。

星期一 = 0/1

星期二 = 0/1

. . . . .

星期日 = 0/1。

但这将在**DB**中生成 7 列。所以我在想是否有人可以帮助我解决这个问题，如果我应该将它存储在一个数组中并检索值以供进一步使用。我正在通过互联网阅读一些示例，但并没有以简单的方式得到它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-21T12:20:58.063

要在一列中插入 7 个值，您可以像这样使用逗号分隔符

其中 Total_Score_P1 是一个字符串数组

//字符串数组

```
String[]  Total_Score =  new String[] { p1e1,p1e2,p1e3,p1e4,p1e5,p1e6 };

// Convderting it into a single string 

String result_ScoreP1 = ("" + Arrays.asList(Total_Score_P1)).
             replaceAll("(^.|.$)", "  ").replace(", ", "  , " ); 
```

result_ScoreP1 将是

//这个的输出

```
result_ScoreP1 = "p1e1,p1e2,p1e3,p1e4,p1e5,p1e6"; 
```

将其作为单个字符串插入数据库中，然后在再次检索时将其拆分为类似的部分

// 一个字符串数组列表

// 查询被触发

```
public ArrayList<String> rulTable(String id) {
        // TODO Auto-generated method stub
        ArrayList<String> Ruleob = new ArrayList<String>();

        Cursor c_rule;

        try
        {
            c_rule = db.query(NameTable, new String[]{
                    columns1        
            },
            Rule_COurseID + "=" + id ,
                              null, null, 
                              null, null, null);

            c_rule.moveToFirst();

            // if there is data available after the cursor's pointer, add
            // it to the ArrayList that will be returned by the method.
            if (!c_rule.isAfterLast())
            {
                do
                {

                    Ruleob.add(c_rule.getString(0));

                }
                while (c_rule.moveToNext());
            }

            // let java know that you are through with the cursor.
            c_rule.close();
        }
        catch(Exception e)
        {

        }
        return Ruleob;

    }

//list to get elements 

 ArrayList<String>  ListOne = new ArrayList<String>();

ArrayList<String> row ;

    try{
// received values
        row = db.TheTable(id);
        String r1 = row .get(0);

}

catch(Exception e)

{

}

 StringTokenizer st2 = new StringTokenizer(r1, "||");

            while(st2.hasMoreTokens()) {
            String Desc = st2.nextToken();
               System.out.println(Desc+ "\t" ); 
            ListOne.add(Desc); 

//   
            } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-21T12:08:58.367

您可以使用二进制整数 1= 已选择 0 = 未选择 (1111111) (0000000)

总共 7 天，所以索引 0=mon, 1=tues, 2=wed, 3=thurs, 4=friday, 5=sat, 6=sunday..等等..

这里 1111111 表示选择全天，0000000 全天未选择，0001000 仅选择星期四。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T13:08:50.693

我还发现了一种方法，即将您所谓的值转换为**JSON 数组**，然后将完整的**JSON 字符串**存储到数据库中的实体/字段。

它有助于轻松有效地服务于价值观。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-21T12:42:07.447

创建另一个表，其中包含每天的列，布尔值。通过整数 id 与该表建立关联（使用外键）这是解决问题的关系方式。

# android - Android 4 上的传感器融合

> ID：10684883
> 
> 赞同：5
> 
> 时间：2012-05-21T12:03:08.970
> 
> 标签：android, sensors

似乎已经在 SDK 级别 15 中实现了加速度计/陀螺仪/指南针的适当传感器融合：

[关联](http://code.google.com/p/android/issues/detail?id=17780)

在那个线程上，他们引用了 android 源代码：

*“frameworks/base/services/sensorservice：重力、方向和旋转矢量虚拟传感器现在基于融合加速度计/陀螺仪/罗盘读数的卡尔曼滤波器”*

但我真的找不到文件夹*层次结构“框架/基础/服务/传感器服务：”*？！

有人能帮我吗？非常感谢！

编辑：好的，我自己在 android 框架源中找到了它，例如可以在这里浏览：[https ://android.googlesource.com/platform/frameworks/native/+/master/services/sensorservice/](https://android.googlesource.com/platform/frameworks/native/+/master/services/sensorservice/)

# c++ - C++：如何阻止 map 的 operator[] 插入虚假值？

> ID：10684888
> 
> 赞同：4
> 
> 时间：2012-05-21T12:03:27.293
> 
> 标签：c++, stl, map

我的代码执行了以下操作：

1.  从 a 中检索一个值`map`with `operator[]`。
2.  检查返回值以及是否`NULL`用于`insert`在地图中插入新元素。

`0`神奇的是，地图中出现了一个有值的元素。

经过几个小时的调试，我发现了以下内容：如果找不到键`map`，`operator[]` [则插入一个新元素，](http://www.cplusplus.com/reference/stl/map/operator%5B%5D/)而如果键存在，则`insert` [不会更改值](http://www.cplusplus.com/reference/stl/map/insert/)。

即使映射值类型的默认构造函数不存在，代码也会编译并`operator[]`插入`0`。

有没有办法（例如从现在开始我可以遵循的一些编码约定）我可以防止这伤害我？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T12:06:04.170

我想显而易见的是要知道那些确实是索引运算符的语义，所以你不应该用它来测试容器中元素的存在。

相反，使用`[find()](http://www.cplusplus.com/reference/stl/map/find/)`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-21T12:10:35.607

> 有没有办法（例如从现在开始我可以遵循的一些编码约定）我可以防止这伤害我？

这可能听起来很尖刻，但是：通过阅读文档。

由于您所做的是地图的某种*预期*行为，因此您无法采取任何措施来防范它。

*您将来可以*注意的一件事是以下内容。在您的第二步中，您做错了什么：

> 检查返回值，如果为 NULL，则使用 insert 在地图中插入新元素。

这不适用于 C++ 标准库函数（除了 C 兼容函数和）：标准库**不**`new`处理指针，尤其是空指针，因此检查`NULL`(or `0`or `nullptr`) 很少有意义。`operator []`（除此之外，地图首先返回指针是没有意义的。它*显然会*返回*元素类型*（或者更确切地说，是对它的引用））。

事实上，标准库主要使用*迭代器*`end()`，所以如果有的话，通过与容器的比较来检查迭代器的有效性。

不幸的是，`NULL`编译后的代码（检查）`NULL`实际上是一个在 C++ 中等于的宏，`0`因此您可以将其与整数进行比较。

通过引入`nullptr`具有不同类型的关键字，C++11 变得更安全，因此将其与整数进行比较不会编译。所以这是一个有用的编码约定：永远不要使用`NULL`，而是在启用 C++11 支持的情况下编译并使用`nullptr`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-21T12:05:15.437

实际上，当您调用 时`operator []`，如果未找到该键的值，则会插入**值初始化的**默认值。

如果您不希望发生这种情况，则必须检查`find`：

```
if ( mymap.find(myKey) == mymap.end() )
{
    //the key doesn't exist in a map
} 
```

仅当它是指向指针的映射（或值初始化为 0 的类型，但您非常具体）时，`operator []`才会返回的值。`NULL``NULL`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-21T12:06:31.433

> 即使映射值类型的默认构造函数不存在，代码也会编译

这绝对是错误的。`operator[]`如果默认构造函数不存在，则应该无法编译。其他任何事情都是您实施的错误。

您的代码应该只使用`insert`过一次。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-21T12:09:43.017

std::map 的最新实现还有一个`.at(const Key& key)`成员函数，它检查值是否存在，`std::out_of_range`如果未找到键则返回异常。

[http://en.cppreference.com/w/cpp/container/map/at](http://en.cppreference.com/w/cpp/container/map/at)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-21T12:05:45.787

不要使用 [] 运算符，而是在地图上调用 find 。如果未找到匹配项，则不会插入条目。它返回一个迭代器到找到的项目。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-28T02:21:24.970

以下是地图查找和插入用例的几个示例，您有时想要处理已经存在的项目的情况，查看旧值是什么等。

```
class Foo
{
    // Use a typedef so we can conveniently declare iterators
    // and conveniently construct insert pairs
    typedef map<int, std::string> IdMap;
    IdMap id_map;

    // A function that looks up a value without adding anything
    void one(int id)
    {
        IdMap::iterator i = id_map.find(id);

        // See if an entry already exists
        if (i == id_map.end())
            return; // value does not exist

        // Pass the string value that was stored in the map to baz
        baz(i->second);
    }

    // A function that updates an existing value, but only if it already exists
    bool two(int id, const std::string &data)
    {
        IdMap::iterator i = id_map.find(id);

        if (i == id_map.end())
            return false;

        i->second = data;
        return true;
    }

    // A function that inserts a value only if it does NOT already exist
    // Returns true if the insertion happened, returns false if no effect
    bool three(int id, const std::string &data)
    {
        return id_map.insert(IdMap::value_type(id, data)).second;
    }

    // A function that tries to insert if key doesn't already exist,
    // but if it does already exist, needs to get the current value
    void four(int id, const std::string &data)
    {
        std::pair<IdMap::iterator,bool> i =
            id_map.insert(IdMap::value_type(id, data));

        // Insertion worked, don't need to process old value
        if (i->second)
            return true;

        // Pass the id to some imaginary function that needs
        // to know id and wants to see the old string and new string
        report_conflict(id, i->first->second, data);
    }
}; 
```

出于懒惰或无知，程序员经常对 进行多次冗余调用`operator[]`，或者一次调用`find`然后对 进行冗余调用`operator[]`，或者对 调用`find`然后对 进行冗余调用。`insert`如果您了解地图的语义，那么有效地使用地图是非常容易的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-07-15T15:57:58.213

operator[] 实际上返回一个 Value& 所以如果您确定要插入元素，您可以执行以下操作：

```
map<Key, Value*> my_map;

Value& entry = my_map[key];  // insert occurs here, using default constructor.
if (entry == nullptr) entry = my_new_entry;  // just changing the value 
```

额外的好处是您只需在地图中查找一次。

# iphone - 从 Objective-C 中的 SQLite 语句中检索计数

> ID：10684892
> 
> 赞同：1
> 
> 时间：2012-05-21T12:03:36.203
> 
> 标签：iphone, objective-c, ios, sqlite

目前我正在使用以下代码，但是如何在执行语句后检索计数以查看表是否包含数据？

```
NSString *sql2 = @"SELECT COUNT( * ) FROM myTable";
sqlite3_stmt *stmt2 = [Cn OpenSQL:[sql2 UTF8String]];

if (stmt2 != nil) 
{
    if(sqlite3_step(stmt2)){
    NSLog(@"success")
    }
    else NSLog(@"err2: %@",sql2);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T12:07:25.763

```
NSString *sql2 = SELECT COUNT(*) FROM `myTable`; 
```

如果结果为 0，则表示表为空。

```
if (sqlite3_open([self.dataBasePath UTF8String], &articlesDB) == SQLITE_OK)
    {
        const char* sqlStatement = "SELECT COUNT(*) FROM MYTABLE";
        sqlite3_stmt *statement;

        if( sqlite3_prepare_v2(articlesDB, sqlStatement, -1, &statement, NULL) == SQLITE_OK )
        {
            //Loop through all the returned rows (should be just one)
            while( sqlite3_step(statement) == SQLITE_ROW )
            {
                NSInteger count = sqlite3_column_int(statement, 0);
                NSLog(@"Rowcount is %d",count);
            }
        }
        else
        {
            NSLog( @"Failed from sqlite3_prepare_v2\. Error is:  %s", sqlite3_errmsg(articlesDB) );
        }

        // Finalize and close database.
        sqlite3_finalize(statement);
        sqlite3_close(articlesDB);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T14:24:53.093

```
NSInteger count = sqlite3_column_int(statement, 0); 
// value of count will give you the answer 
```

如果`count == 0`，则没有数据。

如果`count > 0`，则表中有一个可用的元组。

# sql - 删除 DB2 中第一次出现的字符

> ID：10684898
> 
> 赞同：1
> 
> 时间：2012-05-21T12:03:50.333
> 
> 标签：sql, database, db2

我有一列的值如下：

```
BOOK # ,7,8
BOOK # ,2
BOOK # ,13,14 
```

我正在使用复杂的 xml 聚合函数生成上面的列，如下所示：

```
SELECT 
CONCAT('BOOK # ',XMLSERIALIZE(XMLAGG(XMLTEXT(CONCAT(',', SUBSTR(TRIM(TEMP.BOOK_NUM),    
LOCATE('.',TEMP.BOOK_NUM)+1)))) AS VARCHAR(1024 )))
FROM TEMP 
GROUP BY BOOK_ID 
```

Temp.book_num 的类型为 123.2、123.4，位于两个不同的行中。所以 book_id 123 将有两本书 2、4。因此要从两行相同的 book_id 中提取 2 和 4，我必须编写上面的查询。

很明显，在 'BOOK #' 之后有一个额外的 ',' 逗号，这是多余且不需要的。

我无法修改上述查询以将其删除。

有什么方法可以从上面的查询中可以容纳的列值中删除第一次出现的字符（这里是逗号）？

我的输出应该是：

```
BOOK # 7,8
BOOK # 2
BOOK # 13,14 
```

谢谢阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:11:30.147

很简单，使用[REPLACE](http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/admin/r0000843.htm)功能。

将“书#”替换为“书#”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T20:32:31.010

尽管措辞几乎相同，但删除第一个字符比删除第一次出现的特定字符要容易得多。幸运的是，只需删除第一个字符即可解决您的问题。您可以通过将`XMLSERIALIZE()`表达式填充到这样的`SUBSTR()`调用中来做到这一点：

```
CONCAT('BOOK # ',
    SUBSTR(
        XMLSERIALIZE(XMLAGG(XMLTEXT(CONCAT(',', SUBSTR(TRIM(TEMP.BOOK_NUM),  
           LOCATE('.',TEMP.BOOK_NUM)+1)))) AS VARCHAR(1024))
       ,2
    )
) 
```

感谢 Serge Rielau 在他的[博客](https://www.ibm.com/developerworks/mydeveloperworks/blogs/SQLTips4DB2LUW/entry/aggregating_strings42?lang=en_us)中发布这个技巧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-27T00:24:53.580

```
SELECT REPLACE (colname , (SUBSTR(colname ,1 ,LOCATE(',',colname)-1)) , (SUBSTR(colname ,1 ,LOCATE(",",colname)-1))|| ' ') from *sometable* 
```

# netbeans - xdebug - 在 netbeans 中等待连接

> ID：10684899
> 
> 赞同：1
> 
> 时间：2012-05-21T12:03:56.857
> 
> 标签：netbeans, port, xdebug

我正在使用 Netbeans 调试 PHP。我无权访问，`php.ini`所以我使用`.htaccess`：

```
php_value   xdebug.remote_host   "localhost"    
php_value   xdebug.idekey               "netbeans-xdebug"
php_flag    xdebug.remote_autostart       Off
php_flag    xdebug.remote_enable          On
php_value   xdebug.remote_port            9000
php_value   xdebug.remote_handler         dbgp
php_flag    xdebug.profiler_enable        on
php_flag    xdebug.remote_connect_back    On
php_flag    xdebug.extended_info          On 
```

`sub.mydomain.com`使用端口 8080 和 8090 运行。我之前曾在此服务器上将 xdebug 与 Eclipse 一起使用。

`sub.mydomain.com`服务器的列表`phpinfo()`xdebug 与上面的设置一起安装：

```
Zend Engine v2.3.0, Copyright (c) 1998-2011 Zend Technologies
with Xdebug v2.1.3, Copyright (c) 2002-2012, by Derick Rethans 
```

在 Netbeans 中，我配置了“属性”和“运行配置”条目，端口和 id 也匹配（9000，netbeans-xdebug）。

有很多开发者`sub.mydomain.com`，如果有人使用9000端口会不会有问题？

尽管如此，如果我在 Netbeans 中运行“调试”，就会永远出现“等待连接”。

我需要做什么？

编辑：固定到本地主机

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:14:12.770

我已经设法使用以下配置启动调试器：

```
php_value   xdebug.remote_host   "192.168.1.149"
php_value   error_reporting               22527
php_flag    xdebug.remote_autostart       Off
php_flag    xdebug.remote_enable          On
php_value   xdebug.remote_port            9009
php_value   xdebug.remote_handler         dbgp
php_value   xdebug.remote_log             "..."
php_flag    xdebug.profiler_enable        off
php_flag    xdebug.extended_info          On
php_flag    xdebug.coverage_enable        On
php_value   error_log                     "..." 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T08:07:58.570

这是错误的：

```
php_value   xdebug.remote_host   "sub.mydomain.com" 
```

xdebug.remote_host 设置需要包含装有*IDE*的机器的 IP 。这当然也意味着运行 PHP/Xdebug 的机器需要能够连接到该 IP 地址。这也记录在[http://xdebug.org/docs/remote#communication](http://xdebug.org/docs/remote#communication)

# iphone - 连接到 APNS 服务器错误

> ID：10684903
> 
> 赞同：0
> 
> 时间：2012-05-21T12:04:10.867
> 
> 标签：iphone, xcode, notifications, push, apple-push-notifications

我和一个朋友正在开发一个带有推送通知的 iPhone 应用程序。我们有一个带有 APNS 的服务器，但是当我们按照说明连接它时，我们在构建过程中遇到错误。我们必须导入一个 .a 文件 (libappconnect.a) 和一个名为 APPconnect.h 的类，如下所示：

```
#import <Foundation/Foundation.h>

@interface APPconnect : NSObject {
    NSString *apikey;
    NSString *sharedSecret;
    NSString *apiurlString;
}

- (id)initWithUrl:(NSString *)urlString api:(NSString *)key andSharedsecret:(NSString *)shared;

-(NSDictionary *)registerDevice:(NSString *)deviceToken withCustomInfo:(NSString *)custom error:(NSError **)error;

@end 
```

当我们运行应用程序时，我们会收到以下错误：

架构 i386 的未定义符号：“_OBJC_CLASS_$_APPconnect”，引用自：AppDelegate.o 中的 objc-class-ref ld：找不到架构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v查看调用）

我不知道怎么了。这是我第一次使用推送通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:35:46.880

if you are using APNS first time and want to test is Application receiving notification or not then you can use the "PushMeBaby" app

download link : [http://stefan.hafeneger.name/download/PushMeBabySource.zip](http://stefan.hafeneger.name/download/PushMeBabySource.zip)

and description for using the push me baby app: [http://ameyashetti.wordpress.com/2009/07/31/apple-push-notification-service-tutorial/](http://ameyashetti.wordpress.com/2009/07/31/apple-push-notification-service-tutorial/)

Hope from here you can find answer.

# cmake - 使用cmake编译

> ID：10684912
> 
> 赞同：3
> 
> 时间：2012-05-21T12:04:50.383
> 
> 标签：cmake, build-automation, scons

我来自一个 unixy 背景，所以比起 ide，我更喜欢命令行风格的自动化。

我正在尝试更深入地了解 Windows 开发。我之前在 Windows 上编写过程序，只是使用 cl 编译器来编译 c 代码。我想转向像 cmake 这样的自动化构建系统。

我可以让 cmake 创建一个可以编译的 Visual Studio 解决方案。但这并不是我想要的。我正在寻找的是让 cmake 调用 cl 来编译/链接代码本身，就像 make 调用 gcc 一样。

cmake 能够做到这一点还是 Scons 更适合我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T15:10:37.297

使用 CMake 创建项目后，cmake 也可以运行构建。

cd builddir cmake --build 。

您还可以使用 CMake 创建 nmake 或 jom（并行 nmake）makefile，甚至 gmake。因此，当然可以从命令行使用 CMake 并使用 VS 编译器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T11:55:40.393

根据彼得的评论，发现 cmake 是一个构建生成器工具。它生成外部构建工具可以运行的makefile。所以我要么使用 cmake+namke 要么使用 scons。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-21T12:15:10.237

我对 cmake 不太确定，但 SCons 有一些专门用于 Microsoft Visual Studio 的构建器。

[在 SCons构建器文档](http://www.scons.org/doc/production/HTML/scons-user/a8121.html)中查找以下内容：

*   MSVS项目（）
*   MSVS解决方案（）

加上 SCons 有一个更好的语法，它的 python！:)

# c# - StyleCop 自定义规则：检查分配时获取变量的类型

> ID：10684917
> 
> 赞同：0
> 
> 时间：2012-05-21T12:05:13.080
> 
> 标签：c#, stylecop

我正在编写自定义 StyleCop 规则以防止`String`分配变量`null`，但遇到了问题！

我可以使用以下代码轻松防止在声明期间`String`分配变量：`null`

```
if (expression.ExpressionType == ExpressionType.VariableDeclarator)
{
    VariableDeclaratorExpression variableDeclarator = ((VariableDeclaratorExpression)expression);

    if (variableDeclarator.Initializer == null)
    {
        if ((parentStatement.StatementType != StatementType.Catch) &&
            (parentStatement.StatementType != StatementType.Foreach))
        {
            this.AddViolation(parentElement, expression.LineNumber, "InitialiseVariablesOnDeclaration");
        }
    }
    else
    {
        Boolean isString = false;

        foreach (CsToken token in variableDeclarator.ParentVariable.Tokens)
        {
            if ((token.Text.Equals("String")) || (token.Text.Equals("string")))
            {
                isString = true;
                break;
            }
        }

        if (isString)
        {
            foreach (CsToken token in variableDeclarator.Initializer.Tokens)
            {
                if (token.CsTokenType == CsTokenType.Null)
                {
                    this.AddViolation(parentElement, expression.LineNumber, "DoNotAssignStringsToNull");
                    break;
                }
            }
        }
    }
} 
```

（请注意，此代码还验证变量在声明时是否已显式分配）。

我在检查声明后`String`分配的变量时遇到问题`null`，StyleCop API 似乎没有公开任何机制来查找赋值语句左侧的变量类型。

因此，这段代码触发了我刚才的规则：

```
String someString = null; 
```

但是这段代码没有：

```
String someOtherString = String.Empty;
someOtherString = null; 
```

我目前使用的是 StyleCop 版本 4.7.19.0。任何正确方向的指示将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T15:51:03.863

StyleCop 规则旨在强制执行正确的源代码格式标准。他们只对作为文本的源代码感兴趣：标点符号、空格、拼写等。StyleCop 规则可以访问您的源代码，因为它在编译器获取它之前就已经存在。在某些方面这很好，因为它允许 StyleCop 强制执行对编译器无意义的事情，例如大括号、逗号或空格的放置、命名空间的顺序或注释的存在。

但是，您所要求的需要更深入的分析形式来理解标记的*语义含义*，并且可以跟踪给定标记的含义，因为它在您的代码中出现。那是静态代码分析（以前称为“FxCop”）的领域，它发生*在*编译器将您的源代码处理成 IL 之后。静态代码分析了解语言元素：类型、运算符、标识符等。它可以执行程序流分析、类型验证和其他依赖于已经将源代码文本处理为语言元素的编译器的操作。

在这种情况下，您要问的问题是：

> 有没有给类型标识符`System.String`赋值的实例`null`？

这个问题需要知道每个标识符的类型，并且能够在流程通过您的函数时遵循该类型。这是代码分析规则，而不是样式规则，因此您需要构建自定义 CA 规则来处理它。

# android - 如何在运行时检测 OpenGL 版本。安卓

> ID：10684918
> 
> 赞同：2
> 
> 时间：2012-05-21T12:05:14.007
> 
> 标签：android, opengl-es

如何检测我的设备正在运行的女巫 openGl 版本？我发现的所有内容都是 android 说所有设备 2.3+ 都支持 openGL 2.0。Witch 不是真的，因为我发现设备已升级到 2.3 版，但它们的系统不支持它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T17:22:50.713

`glGetString(GL_VERSION)`

查看更多信息：[http ://www.khronos.org/opengles/documentation/opengles1_0/html/glGetString.html](http://www.khronos.org/opengles/documentation/opengles1_0/html/glGetString.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T03:54:31.100

来自 Android CTS（兼容性测试套件）的[OpenGlEsVersionTest.java](https://android.googlesource.com/platform/cts/+/master/tests/tests/graphics/src/android/opengl/cts/OpenGlEsVersionTest.java)：

```
private static int getVersionFromPackageManager(Context context) {
    PackageManager packageManager = context.getPackageManager();
    FeatureInfo[] featureInfos = packageManager.getSystemAvailableFeatures();
    if (featureInfos != null && featureInfos.length > 0) {
        for (FeatureInfo featureInfo : featureInfos) {
            // Null feature name means this feature is the open gl es version feature.
            if (featureInfo.name == null) {
                if (featureInfo.reqGlEsVersion != FeatureInfo.GL_ES_VERSION_UNDEFINED) {
                    return getMajorVersion(featureInfo.reqGlEsVersion);
                } else {
                    return 1; // Lack of property means OpenGL ES version 1
                }
            }
        }
    }
    return 1;
}

/** @see FeatureInfo#getGlEsVersion() */
private static int getMajorVersion(int glEsVersion) {
    return ((glEsVersion & 0xffff0000) >> 16);
} 
```

它实际上还提供了一些其他方法，并且测试验证它们都返回相同的结果。

# java - Jenkins - 通过一项工作构建所有子模块向 Sonar 报告

> ID：10684921
> 
> 赞同：1
> 
> 时间：2012-05-21T12:05:23.837
> 
> 标签：java, maven, build, module, sonarqube

我们公司有很多子模块。我们想添加 Sonar 来检查我们的代码质量等等。如果我们从项目顶部开始构建，构建运行不会失败并为声纳创建报告。

我们的架构是这样的：

```
<Project>
   <module1>
   <module2>
   <module3>
       .
       .
       .
       .
   <moduleX> 
```

但问题是，如果其中一个子模块失败，整个构建将不会成功。

现在的问题是：是否可以为每个模块构建和创建声纳报告而不为每个模块创建一个詹金斯作业？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T12:16:49.080

简短的回答是否定的。

长答案：如果您将所有项目放在顶级项目中并对其进行声纳分析，显然如果项目失败，那么声纳构建就会停止。原因是 Sonar 认为您正在分析单个项目（因为您使用“模块”列表创建的顶级 POM）。所以这是正常的，如果项目分析在某个时候失败，那么 Sonar 不会在分析中走得更远。

所以是的：您必须为每个项目定义 1 个 Jenkins 作业（或者可能有一些 Jenkins 插件允许您将作业配置应用于一组存储库 - 谁知道，那里有这么多插件）。

请注意，Jenkins 也可以通过 Groovy 脚本进行配置：如果您知道如何操作，这可以节省时间（您可以查看我们为迁移 Sonar Jenkins 插件编写的以下脚本 => [http:// docs.codehaus.org/display/SONAR/Migration+from+Jenkins+Sonar+Plugin+1.6+to+1.8](http://docs.codehaus.org/display/SONAR/Migration+from+Jenkins+Sonar+Plugin+1.6+to+1.8)）。

# wpf - WPF：动态开发更容易方便吗？

> ID：10684927
> 
> 赞同：0
> 
> 时间：2012-05-21T12:05:33.370
> 
> 标签：wpf, dynamic, user-interface, datagrid, grid

我有一个可以添加和删除记录的 DataGrid (dataGrid1)。

基于该 dataGrid1，我想根据 ID 和类型创建一个带有按钮的新网格。Cols 还必须动态提供 add 的 DataSource，但这只是在 Window_Loaded 本身中第一次生成时。可以根据 dataGrid1 中的更改添加/删除行。我想要这样的东西：

![在此处输入图像描述](../Images/e765328952e340e9d9e27a7aa10bf0ae.png)

每次单击 Btn 时，都会打开一个新窗口，用于输入特定类型和特定 ID。如果已输入详细信息，则 btn 的文本将为“更新”，否则为“添加”。

执行此操作的最佳资源/控制可能是什么？目前，我刚刚做了一个 Grid 有 2 个稳定的 cols。以上使用 Grid、DataGrid 或其他东西的任何想法。添加/删除行将以何种方式和方式很容易。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:47:51.647

好的，让我尝试举一个与您的需求相似的示例

假设我们使用这个类：

```
public class MyObject
{
   public int MyID;
   public string MyString;
   public ICommand MyCommand;
} 
```

我们愿意显示`DataGrid`ID 列表，并将 a 作为第二列`Button`，并将属性`MyString`作为内容，单击该属性会启动`ICommand` `MyCommand`在新窗口中打开的任何您想要的内容。

这是您在视图方面应该拥有的：

```
 <DataGrid ItemsSource="{Binding MyList}" AutoGenerateColumns="False">
        <DataGrid.Columns>
            <DataGridTextColumn Header="ID" Binding="{Binding MyID}" />
            <DataGridTemplateColumn Header="Buttons">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Button Content="{Binding MyString}" Command="{Binding MyCommand}" />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid> 
```

这将显示`DataGrid`获取`IEnumerable<MyObject>`名为“MyList”中的所有内容，并显示之前定义的两列。

现在，如果您需要定义命令。首先，我建议您阅读[此 MVVM 的介绍性链接](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx#id0090030)并参加`RelayCommand`课程（这就是我们将用于解决您的问题的内容）

因此，在`ViewModel`定义 的 中`MyList`，您应该如何定义一些有用的对象：

```
public ObservableCollection<MyObject> MyList { get; set; }

// blah blah blah

public void InitializeMyList()
{
  MyList = new ObservableCollection<MyObject>();
  for (int i = 0; i < 5; i++)
  {
    MyList.Add(InitializeMyObject(i));
  }
}

public MyObject InitializeMyObject(int i)
{
  MyObject theObject = new MyObject();
  theObject.MyID = i;
  theObject.MyString = "The object " + i;
  theObject.MyCommand = new RelayCommand(param =< this.ShowWindow(i));
  return theObject
}

private void ShowWindow(int i)
{
  // Just as an exammple, here I just show a MessageBox
  MessageBox.Show("You clicked on object " + i + "!!!");
} 
```

这应该足以创建您想要的任何内容。如您所见，每个`Button`人都会调用一个方法（`ShowWindow`），该方法被定义为显示您的新窗口，在里面做任何您需要的事情。`RelayCommand`顾名思义，它实际上只是在这里将按钮触发的命令传递给包含执行逻辑的方法。

而且......我认为这就是你所需要的。抱歉，BTW 回复晚了

**编辑 - 手动/动态生成列**

以下代码是我遇到类似问题时必须执行的代码的一部分。我的问题是，每次 a 发生变化时，我都需要更改显示的`ComboBox`列`SelectedItem`。所以我把它放在一个`SelectionChanged`事件处理程序中。我不知道你究竟需要在哪里生成你的列，但我会给你一个一般的例子。

假设你`ItemsSource`是一个`ObservableCollection<MyNewObject>`

`MyNewObject`如下：

```
public class MyNewObject
{
   public IList<string> MyStrings { get; set; }
} 
```

您应该在代码中的某个位置（应该是当您需要生成列时）以下代码，该代码生成的列数等于`MyNewObject`列表中第一个列的长度（注意：这是在代码隐藏中，并且`DataGrid`您正在处理的名为 dataGrid ）

```
ObservableCollection<MyNewObject> source = dataGrid.ItemsSource as ObservableCollection<MyNewObject>;

if (source == null || source.Count == 0)
{
  return;
}
MyNewObject firstObject = source[0];

for(int i = 0; i < firstObject.MyStrings.Count; i++)
{
   // Creates one column filled with buttons for each string
   DataGridTemplateColumn columnToAdd = new DataGridTemplateColumn();
   columnToAdd.Width = 110; // I set a manual width, but you can do whatever you want
   columnToAdd.Header = "Header number " + i;

    // Create the template with a Button inside, bound to the appropriate string
    DataTemplate dataTemplate = new DataTemplate(typeof(Button));
    FrameworkElementFactory buttonElement = new FrameworkElementFactory(typeof(Button));

    Binding binding = new Binding("MyStrings[" + i + "]");
    binding.Mode = BindingMode.TwoWay;
    binding.UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged;

    buttonElement.SetBinding(Button.ContentProperty, binding);

    // Do the same here for your command, or for whatever you want to do when the user clicks on this button

    dataTemplate.VisualTree = buttonElement;
    columnToAdd.CellTemplate = dataTemplate;
    dataGrid.Columns.Add(columnToAdd);
} 
```

这将为在第一个对象中找到的每个字符串创建一列。然后，使用您需要的任何命令或显示技巧来增强它！

# android - 如何获取 WebView 中的滚动位置？(安卓 1.6)

> ID：10684928
> 
> 赞同：0
> 
> 时间：2012-05-21T12:05:33.960
> 
> 标签：android, scroll

我试图使用这个答案：

> 对于这个问题，我找到了更好的答案。事实证明，WebView 确实具有您所期望的 scrollTo()、getScrollX() 和 getScrollY() 方法。它们在文档中有点隐藏，因为它们是从 View 继承的（通过 AbsoluteLayout -> ViewGroup -> View）。这显然是一种比有些繁琐的 JavaScript 界面更好的方式来操纵 WebView 的滚动位置。

但我每次尝试时，它都告诉我它有一个 0 scrollX 和一个 0 scrollY。

知道我该怎么做吗？

# string - 字符串为空时不执行存储过程

> ID：10684935
> 
> 赞同：-1
> 
> 时间：2012-05-21T12:05:53.703
> 
> 标签：string, stored-procedures, parameters, sqldatasource

我有一个非常奇怪的问题，我似乎无法找到解决方案。我有一个带有一组参数和一个存储过程形式的选择命令的 SqlDataSource。其中一个参数是一个名为@SearchPhrase 的字符串，它从一个文本框中获取其值，当该文本框为空时，假定返回所有帖子。该参数通过搜索按钮获取其值，该按钮首先将 searchBox.Text.Trim() 的值设置为 @SearchPhrase，然后数据绑定显示搜索结果的网格视图。

只要在文本框中输入了一个值，存储过程就可以正常工作并返回结果，但是当留空时，结果表明存储过程永远不会执行。我知道这一点是因为我在其中添加了一行来存储每次调用时插入的所有参数。

如果不在文本框中输入内容，为什么我无法运行它？我可以让它执行的唯一方法是输入一个空格并将“”传递给存储过程，然后对其进行左右修剪。为什么不传递长度 = 0 的字符串？

这是数据源和参数分配的代码。只有@SearchPhrase 参数引起了问题，其余的工作都很好。如果我想分配一个“”，那么点击事件的前三行（注释）是一种有点丑陋的方式，并且这样可以让它工作。

```
 <asp:SqlDataSource ID="enterprisesDS" runat="server" 
            ConnectionString="<%$ ConnectionStrings:CRMdb %>" 
            SelectCommand="entGetEnterprises" SelectCommandType="StoredProcedure">

            <SelectParameters>
                <asp:Parameter Name="SearchPhrase" Type="String" />
                <asp:Parameter Name="IsActive" Type="Boolean" DefaultValue="true" />
                <asp:Parameter Name="Country" Type="Byte" />
                <asp:Parameter Name="LocalReference" Type="String" />
                <asp:Parameter Name="Class" Type="String" />
                <asp:Parameter Name="LocationID" Type="Byte" />
            </SelectParameters>

        </asp:SqlDataSource>

        protected void search_Click(object sender, EventArgs e)
    {
        //string searchPhrase = " ";

        //if (searchBox.Text.Trim().Length > 0)
        //    searchPhrase = searchBox.Text.Trim();

        enterprisesDS.SelectParameters["SearchPhrase"].DefaultValue = searchBox.Text;
        enterprisesDS.SelectParameters["Country"].DefaultValue = countries.SelectedValue;
        enterprisesDS.SelectParameters["LocalReference"].DefaultValue = localReferences.SelectedValue;
        enterprisesDS.SelectParameters["Class"].DefaultValue = classes.SelectedValue;

        string locID = "0";
        if (locations.SelectedValue != null)
            locID = locations.SelectedValue;

        enterprisesDS.SelectParameters["LocationID"].DefaultValue = locID;

        enterprises.DataBind();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:13:04.890

会是这样吗？SqlDataSource 上的 CancelSelectOnNullParameter 属性。

[SqlDataSource 和存储过程调用问题](https://stackoverflow.com/questions/8351308/sqldatasource-and-stored-procedure-call-issue)

# mercurial - 如何使用完整路径而不是相对路径显示 hg 状态？

> ID：10684937
> 
> 赞同：1
> 
> 时间：2012-05-21T12:06:03.830
> 
> 标签：mercurial

我想`hg status`用完整路径运行并显示更改的文件？

为什么？因为我想显示对 3 个不同存储库的更改，默认情况下 hg 显示它们相对于存储库根目录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T13:34:22.123

[`hg status`手册页](http://www.selenic.com/mercurial/hg.1.html#status)中没有任何内容表明 Mercurial 直接支持这一点。

来点`sed`魔法怎么样？

```
$ pwd
/var/www/mysite

$ hg st
A static/logo.png
M static/style.css
? temp.txt

$ hg st | sed -e "s~^\(.\) ~\1 ${PWD}/~g"
A /var/www/mysite/static/logo.png
M /var/www/mysite/static/style.css
? /var/www/mysite/temp.txt 
```

您可以使用 shell 别名（在[手册](http://www.selenic.com/mercurial/hgrc.5.html#alias)中描述）让 Mercurial 执行此操作，而不是常规的`hg st`.

# android - Android：授权自己访问第 3 方网站

> ID：10684940
> 
> 赞同：2
> 
> 时间：2012-05-21T12:06:05.030
> 
> 标签：android, authentication, accountmanager, auth-token

我正在开发一个客户端-服务器应用程序，它需要访问服务器上的一些数据库（比如[http://www.someserver.com/](http://www.someserver.com/)之类的东西）。

如何使用手机上现有的 Google 帐户从 Android 手机授权服务器上的用户？

我在考虑 AccountManager 和 AccountManager.getAuthToken()，但我找不到如何将它们用于指定任务的方法。

# ios - 苹果与 Cocos2d 的关系

> ID：10684941
> 
> 赞同：-3
> 
> 时间：2012-05-21T12:06:22.743
> 
> 标签：ios, cocos2d-iphone, publish

我是项目中期，我正在使用 cocos2d。我今天想知道苹果对 cocos2d 框架的看法，以及提交过程与不使用 cocos2d 的人有何不同。如果你使用 cocos2d，苹果有什么特殊要求吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-21T12:09:43.610

不，使用 cocos2d 并在 App Store 上分发绝对没问题。如果存在错误或崩溃，或者您的应用程序通常不符合指南，那么您当然可以。但是 Apple 可以很好地分发任何公共 API，**而不是**私有 API，但有一些例外。您甚至可以销售使用**beta** cocos2d 的应用程序。

没有关系，我认为Apple通常不会关心您的应用程序是否使用Cocos2D。只要确保它表现良好。

# iphone - 用于在 ipad/iphone 上定位 safari 的媒体查询或条件 css？

> ID：10684943
> 
> 赞同：0
> 
> 时间：2012-05-21T12:06:31.667
> 
> 标签：iphone, ipad, safari, media

我一直在使用媒体查询来更改 iphone 和 ipad 用户的电子邮件。基本上，当使用这两种设备的“邮件”访问电子邮件时，我已经取得了成功，但是当使用 Safari 登录任何电子邮件客户端访问电子邮件时，电子邮件作为桌面版本响应。

这是我正在使用的：

```
 @media only screen and (min-device-width: 768px) and (max-device-width: 1024px) { 
/// REST OF MY CODE HERE  /// 
}

@media only screen and (max-device-width: 480px) {
/// REST OF MY CODE HERE  /// 
} 
```

经过一番研究，我也尝试了

```
@media only screen and (max-device-width: 480px) and(-webkit-min-device-pixel-ratio:0) {  
/* CSS Statements that only apply on webkit-based browsers (Chrome, Safari, etc.) */  
/// REST OF MY CODE HERE  /// 
} 
```

一些类似的问题指向了这个页面： [https ://developer.apple.com/library/archive/documentation/AppleApplications/Reference/SafariWebContent/OptimizingforSafarioniPhone/OptimizingforSafarioniPhone.html](https://developer.apple.com/library/archive/documentation/AppleApplications/Reference/SafariWebContent/OptimizingforSafarioniPhone/OptimizingforSafarioniPhone.html)

但我不太确定从中收集什么解决方案。

大多数电子邮件客户端都去掉了 javascript，所以我猜对象检测在这里不合适。用户代理字符串选项似乎更多地针对特定的浏览器版本。

有没有我错过的简单解决方案，或者有人可以向我指出一篇可能解决这个特定问题的文章。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:25:36.347

一些（大多数）电子邮件提供商在 webmail 端重写了 html/css。这意味着，带有媒体查询的 css 很可能被解析出来。您可以通过使用常规桌面浏览器并检查邮件代码来轻松验证这一点，或者设置一些花哨的颜色并检查它是否显示。

但是，我认为用户在 iphone 上查看/访问他们的网络邮件并不是一个如此大的用例。是吗？

# spring - spring security：如何将@PreAuthorize 应用于 SwitchUserFilter

> ID：10684944
> 
> 赞同：0
> 
> 时间：2012-05-21T12:06:35.190
> 
> 标签：spring, spring-security, spring-3

我必须检查用户是否有切换用户的权限，基于他的`userId`. 在我的安全 xml 中，在`<http>`元素内部，我指定了一个自定义过滤器：

```
<custom-filter after="FILTER_SECURITY_INTERCEPTOR" ref="switchUserProcessingFilter"/>

<beans:bean id="switchUserProcessingFilter" class="com.something.MySwitchUserFilter">
        <beans:property name="userDetailsService" ref="userServices" />
        <beans:property name="switchUserUrl" value="/admin/switchUser" />
        <beans:property name="exitUserUrl" value="/exitUser" />
        <beans:property name="successHandler" ref="userSwitchSuccessHandler"></beans:property>
    </beans:bean> 
```

在`MySwitchUserFilter`中，我只覆盖了一个方法：

```
 @Override
    @PreAuthorize("canISwitchToThisUser(#{request.getAttribute('userId')}")
    protected Authentication attemptSwitchUser(HttpServletRequest request) throws AuthenticationException {
        return super.attemptSwitchUser(request);

    } 
```

`@PreAuthorize`在其他地方工作，但我想知道为什么它不在这里工作。请注意，我还传递了一个请求参数“ `userId`”以及惯用的“ `j_username`”。请注意，我可以切换用户，只是注释没有被处理。

# javascript - 如何从某些按钮单击条件后面的代码中调用 java 脚本函数？

> ID：10684948
> 
> 赞同：0
> 
> 时间：2012-05-21T12:06:42.433
> 
> 标签：javascript, jquery, asp.net

我想打开一个模型，在代码中单击某个按钮时弹出一个模型，该模型后面有一些 if else 条件。首先，我无法解决最好的方法。我认为我的选择是followign。1) 调用 jquery 模型弹出 2) ajax 模型弹出

这是一个修复某些按钮单击条件以打开模型弹出窗口的按钮，如果模型弹出窗口说是，那么我希望客户重定向到某个付款页面，他将支付购买该物品的费用。

现在我正在使用我这样调用的Jquery模型弹出窗口

```
 protected void imgClientFreeEval_Click(object sender, System.Web.UI.ImageClickEventArgs e)
    {
-----
---some code not typed
 if (SurveyCount > 1)
            {
                Session["YourAssessment"] = true;
                Session["MyAssessment"] = false;
                ScriptManager.RegisterStartupScript(this, this.GetType(), "tmp", "<script>xyz()</script>", true);
                //Response.Redirect("~/yourAssessment.aspx");

            }
} 
```

我有这样的模型弹出

```
 function xyz() {
            //  alert('hi tpo all');
            // a workaround for a flaw in the demo system (http://dev.jqueryui.com/ticket/4375), ignore!
            //            $("#dialog:ui-dialog").dialog("destroy");
            $(document).ready(function () {
                $("#dialog-confirm").dialog({
                    resizable: false,
                    height: 140,
                    modal: true,
                    autoOpen: false,
                    buttons: {
                        "OK": function () {
                            $(this).dialog("close");
                            window.location.replace("http://stackoverflow.com");

                        },
                        Cancel: function () {
                        window.location.replace("http://stackoverflow.com");
                            $(this).dialog("close");
                        }
                    }
                });
            });
        } 
```

现在的问题是这个函数根本没有被调用。这有什么问题，我辛苦了很长时间，如果可能的话，请建议我最好的方法我应该如何执行它。我无法从按钮单击后面的代码中调用此 javasccipt 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:14:43.817

我用来从我的代码隐藏中获取 javascript 警报的方法是这样的：

```
public void AMessage(string message)
{
    ScriptManager.RegisterStartupScript(this.Page, Page.GetType(), "info only", "alert('" + message + "');", true);
} 
```

如果您没有在按钮中使用 OnClientClick 事件，则通过类似的处理程序发送消息。在您的情况下，不要调用`"alert('" + message + "');"`您编写的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T12:25:41.750

如果您想获得警报，然后在单击“确定”时重定向您的页面。你可以试试：

```
ClientScript.RegisterStartupScript(this.GetType(), "My alert", "alert('" Your time has been finished "');", true);
    System.Text.StringBuilder sbs = new System.Text.StringBuilder();
    sbs.Append("<script language='javascript'>");
    sbs.Append("window.location = 'http://www.google.com/'");//or whatever you want:-
    sbs.Append("</script>");
    Type tr = this.GetType();
    ClientScript.RegisterClientScriptBlock(tr, "PopupScript2", sbs.ToString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T12:15:01.347

尝试使用这个：

```
function xyz() {
            //  alert('hi tpo all');
            // a workaround for a flaw in the demo system (http://dev.jqueryui.com/ticket/4375), ignore!
            //            $("#dialog:ui-dialog").dialog("destroy");
                $("#dialog-confirm").dialog({
                    resizable: false,
                    height: 140,
                    modal: true,
                    autoOpen: false,
                    buttons: {
                        "OK": function () {
                            $(this).dialog("close");
                            window.location.replace("http://stackoverflow.com");

                        },
                        Cancel: function () {
                        window.location.replace("http://stackoverflow.com");
                            $(this).dialog("close");
                        }
                    }
                });
            });
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T13:33:02.243

我在您的代码中指出的一个问题是：

```
ScriptManager.RegisterStartupScript(this, this.GetType(), "tmp", "<script>xyz()</script>", true); 
```

您将最后一个参数作为 true 传递，即 addScriptTags，但您已经在调用中添加了脚本标记，因此可能会在那里产生问题。

干杯

# asp.net - 将 jqGrid 与 asp.net 网络表单一起使用（免费版）

> ID：10684949
> 
> 赞同：3
> 
> 时间：2012-05-21T12:06:50.373
> 
> 标签：asp.net, jqgrid, webforms, jqgrid-asp.net

我正在使用 Asp.net Web Forms，之前我使用[了这个不是免费的 jqGrid 示例](http://www.trirand.net/demoaspnet.aspx)，后来我意识到，现在混淆已经消除，我现在必须使用 jqGrid 开源的东西，因为我不会选择商业的，谁能指出我开始使用 jqGrid 和 Asp.Net Web 表单的链接，如果有人给出一个示例，它将显示 jqGrid 中示例表中的免费列，那将是非常棒的，我在网上找到了一些文章，但无法理解如何有用。欢迎任何建议。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T12:33:21.607

我认为工作中的 Visual Studio 演示项目对您的帮助最大。

[答案中](https://stackoverflow.com/a/7666711/315935)[的演示](http://www.ok-soft-gmbh.com/jqGrid/jqGridInWebForm.zip)在ASP.NET Web 窗体应用程序中使用了 ASHX 处理程序。它仅使用仅由 JavaScript 代码组成的[免费开源包 jqGrid 。](http://www.trirand.com/blog/?page_id=6)您可以从[github](https://github.com/tonytomov/jqGrid)下载最新版本的源代码。

[答案中的](https://stackoverflow.com/a/10258377/315935)另一个[演示](http://www.ok-soft-gmbh.com/jqGrid/jqGridInWebForm1.zip)也在 ASP.NET Web 窗体应用程序中使用了 ASHX 处理程序。它显示了如何实现网格的编辑。

我认为拥有这两个演示项目，您可以创建使用全套 jqGrid 功能的应用程序。此外，在 ASP.NET Web 窗体中使用 ASHX 处理程序仅定义客户端与服务器通信的方式。因此，您可以使用您喜欢的*任何技术进行数据库访问。*因此，您可以使用 Entity Framework 或 LINQ to SQL 甚至更老的版本，但在许多情况下，从性能的角度来看`SqlCommand`，使用`SqlDataReader`.

重要的是要了解，您可以从为另一种技术（如 ASP.NET MVC）创建的代码示例中获得大部分内容（参见[示例](https://stackoverflow.com/a/5501644/315935)、[另一个](https://stackoverflow.com/a/7392816/315935)、[这个](https://stackoverflow.com/a/9349688/315935)或[这个](https://stackoverflow.com/a/10461964/315935)）。因此，您可以在 ASP.NET Web 表单解决方案的 ASHX 处理程序中实现自动完成、导出到 Excel 等功能。

# php - 从分解的字符串中删除垃圾信息

> ID：10684950
> 
> 赞同：0
> 
> 时间：2012-05-21T12:06:51.457
> 
> 标签：php, arrays

我正在使用一个 API，它向我发送一串信息，由未定义数量的空格分隔。当我尝试爆炸它时，我最终会得到一些仅由空格组成的元素。我已经尝试使用`foreach`, `preg_replace`, `preg_match`, 几乎所有我能找到的东西来摆脱这些空格，但仍然有一些剩余，奇怪的是，即使我用另一个符号替换这些空格然后分解字符串并删除仅由该符号组成的元素，仅保留空间元素。此外，任何删除它们的方法都会删除一些，但通常在每个包含有用信息的数组位置之间保留 2 或 3 个。

示例：我收到一个看起来像这样的字符串（我使用 // 来分隔元素）：

> // // // // // // // // // //1000 // // // // // // // // // // // //0 // // // // // // // //1 // // // // // // //1 // // // //101 // // // // // / / // //272 // // // // // // //ubuntu-10.04-x86 // // // //基本 // // // // // // // //true // // // //正在运行 // // // //0 // // // // // // // // // // // //1000 // // // // // // // // // // //0 // // // // // // //1 // // // // // // // //2 // // //102 // // // // // // //272 // // // // // // // //ubuntu-10.04 -x86 // // // //基本 // // // // // // //true // // // //运行 // // // //0 // // // // // // // // // // // //1000 // // // // // // // // // // // //0 // // // // // // // //1 // // // // // // // //3 // // // //103 // // // // // / / // //0 // // // // // // // //ubuntu-10。04-x86 // // // //vswap-256m // // // // // // //false // // // // 停止 // // // // // // //

当我做

```
$result  = preg_replace('/\s[\s]+/', '-', $result);
$result = preg_split('~-~', $result, -1, PREG_SPLIT_NO_EMPTY);

foreach($result as $item){
    echo "$item //";
} 
```

例如，我最终得到了这个：

> // // //1000 // // //0 // //1 // //1 //101 // //272 // //ubuntu //10.04 //x86 //基本 // // true //正在运行 //0 // // // //1000 // // //0 // //1 // //2 //102 // //272 // //ubuntu //10.04 / /x86 //基本 // //true //正在运行 //0 // // // //1000 // // //0 // //1 // //3 //103 // //0 // //ubuntu //10.04 //x86 //vswap //256m // //false //停止 // // //

任何人都知道我怎样才能摆脱数组中的那些空元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T12:10:45.090

您可以使用[array_filter](http://php.net/array_filter)根据您自己的条件过滤掉元素。

```
$result = array_filter($result,
                       function($e) { return trim($e) != ''; }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T12:13:30.027

我可能在这里遗漏了一些东西，但你不能：

```
$array = preg_split('/\s\s+/', $input, 0, PREG_SPLIT_NO_EMPTY); 
```

?

[像这样](http://codepad.org/vHDXjtHx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T12:12:55.950

首先删除空元素：

```
$str = preg_replace('%//\s+%', '', $str); 
```

这会`//<space>`从字符串中删除

[这里的例子](http://codepad.org/OhWtzMw2)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T12:15:06.920

尝试

```
$match = array();
preg_match_all ( '/[^\s]+/' , $result, $matches);
print_r($match); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T12:32:27.897

```
// Where $str is the crazy string.    
$fixed = preg_replace('/\s/', '', $str);
$result = preg_split('~//~', $fixed, -1, PREG_SPLIT_NO_EMPTY);
var_export($result); 
```

# c# - XMLDatasource - 只显示前两个条目

> ID：10684952
> 
> 赞同：0
> 
> 时间：2012-05-21T12:07:07.920
> 
> 标签：c#, asp.net, xml

我有一点 XML 问题。我有一个包含例如 7 个条目的 XML。但我只想显示前两个条目。

```
<asp:XmlDataSource ID="xmlDSName" DataFile="test.xml"> XPath="Direx/Person" runat="server" />

<asp:ListView ID="DirexUserName" DataSourceID="xmlDSName" ItemPlaceholderID="PlcaID" runat="server">
  <ItemTemplate>
     <%# XPath("GivenName")%>
  </ItemTemplate>
</asp:ListView> 
```

是否有一个选项，我可以说，它应该加载多少条目？

非常感谢您的帮助！

卢卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:50:04.893

如何使用位置？

```
<asp:XmlDataSource ID="xmlDSName" DataFile="test.xml" XPath="Direx/Person[position()<3]" runat="server"/> 
```

# javascript - 获取 [object XrayWrapper [object HTMLDivElement]] 对象的 innerHTML

> ID：10684962
> 
> 赞同：2
> 
> 时间：2012-05-21T12:07:44.630
> 
> 标签：javascript, userscripts

在我的用户脚本中，我创建了一个 document.createElement 挂钩，我使用的代码是 Brock adams 在下面的帖子中提供的解决方案

[使用用户脚本记录网页的动态创建的 DOM 元素](https://stackoverflow.com/questions/10083010/log-a-web-pages-dynamically-created-dom-elements-with-a-userscript)

现在，当我在 Firefox 中运行这个用户脚本并像这样打印`elem`in`LogNewTagCreations ()`方法`console.log(elem)`时，我得到了`[object XrayWrapper [object HTMLDivElement]]`这种格式的输出。现在我怎样才能`innerHTML`像这样获得标签或整个标签的属性，`<div>Sometext</div>`以便我可以从中`innerHTML`获得

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T16:04:52.520

看起来`XrayWrapper`Greasemonkey 用来包装*DOM 元素*的包装器是一个非常不完美的包装器，因为它并不真正支持`innerHTML`getter/setter。

我给你写了一个简单的递归`innerHTML`实现，这样称呼它：`html(element)`. 它会忽略除元素、属性和文本节点之外的所有内容，但只要`XrayWrapper`支持我在函数中使用的其他*DOM 属性*，它就应该发挥其作用。

```
var html = (function() {
  var ELEMENT = this.Node?Node.ELEMENT_NODE:1,
         TEXT = this.Node?Node.TEXT_NODE:   3;
  return function html(el, outer) {
    var i = 0, j = el.childNodes, k = outer?"<" + (m = el.nodeName.toLowerCase()) + attr(el) + ">":"",
        l = j.length, m, n;
    while(i !== l) switch((n = j[i++]).nodeType) {
      case ELEMENT: k += html(n, true); break;
      case TEXT:    k += n.nodeValue;
    } return k + (outer?"</" + m + ">":"");
  }; function attr(el) {
    var i = 0, j = el.attributes, k = new Array(l = j.length), l, m;
    while(i !== l) k[i] = (m = j[i++].nodeName) + "=\"" + el.getAttribute(m) + "\"";
    return (l?" ":"") + k.join(" ");
  }
})(); 
```

# mediawiki - 将一个 mediawiki 页面的内容列表嵌入到另一个页面

> ID：10684964
> 
> 赞同：1
> 
> 时间：2012-05-21T12:07:55.597
> 
> 标签：mediawiki, wiki, transclusion

我使用 Mediawiki 写了一本简单的书。它有 10 章和一页一章。

我想创建一个名为 的页面`index`，并在此页面中制作每个页面的内容列表`index`。

例子：`Python document`

我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T14:28:13.470

如果你把所有章节放在子页面中，即“书名/章节名”，那么你可以嵌入Special:Prefixindex: {{Special:Prefixindex/Book name/}}

# javascript - fileUpload phonegap 插件在 iOS 中不起作用

> ID：10684975
> 
> 赞同：0
> 
> 时间：2012-05-21T12:08:26.200
> 
> 标签：javascript, ios, cordova, phonegap-plugins

我正在使用 fileupload phonegap 插件将 jpeg 文件从 iPad 上传到我的服务器。它不适合我。

这是我的代码：

```
window.plugins.fileUploader.uploadByUri('http://192.168.1.54:8080/POC/fileUploader', 'file://Documents/flower.jpg', null, 'myPhoto', 'flower.jpg', 'image/jpeg', 
        function(result) {
            console.log('Done: ' + result);
        }, 
        function(result) {
            console.log("Error: " + result);
        } 

    ); 
```

在 fileUploader.js 文件中，我在 uploadbyuri 方法下方放置了一个警报。但它没有显示。这意味着该方法没有调用。

我犯了什么错误？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T11:38:30.570

我也有同样的情况。FileUploader 在cordova1.9.0 中运行良好。当我更改为cordova2.7.0 时面临同样的情况。在解决了这个问题很长时间之后，我通过在 www 文件夹中的 fileuploader.js 文件中将“Phonegap”重命名为“cordova”来使其工作。

```
PhoneGap.addConstructor(function()  {.... 
```

至

```
cordova.addConstructor(function()  {.... 
```

和

```
 return PhoneGap.exec('FileUploader.' + method, callback + '.success', callback + '.fail', callback + '.progress', server, file, fileKey, fileName, mimeType, params); 
```

至

```
 return cordova.exec(null,null,"FileUploader", "uploadByUri",[ callback + '.success', callback + '.fail', callback + '.progress', server, file, fileKey, fileName, mimeType, params]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T12:16:57.373

请检查此插件是否适合我。

[https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/FileUploader](https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/FileUploader)

如果它不起作用，请指定您为上传图像获得的正确错误。

# excel - Excel 2010：通过外部连接替换表格而不影响其他工作表

> ID：10684976
> 
> 赞同：8
> 
> 时间：2012-05-21T12:08:34.577
> 
> 标签：excel, excel-2010

我有一个包含大量数据的大工作簿。在一张纸上，我有一张桌子。此表用于其他工作表中使用的许多数据透视表，这些数据透视表也用于其他工作表。

该表的数据是定期手动复制的。我现在有一个外部连接来自动导入数据，但我想避免影响其他工作表。

如何在不丢失表的情况下使用外部连接？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-27T20:31:36.260

这可能是一个有用的解决方法。我已经成功地做到了这一点，但它可能需要一些返工，而不是你期望的确切答案。（我使用的是 Excel 2010）。

解决方法的原因是我假设这是一个**常规表（不是数据透视表）**作为源表。不幸的是，我认为切换连接选项不适用于 Excel 2010 中的常规表格。

1.  通过转到“数据”选项卡 > 获取外部数据 > 现有连接，在同一工作表中的另一个下方重新创建一个新表

2.  选择您的数据连接（假设它已创建），然后选择您希望如何查看数据。即：表

3.  放置在您现有的工作表中。使用旧表作为参考，将所有连接重新连接到其他工作表，然后删除旧表。

在这一点上，我发现使用外部数据重建/复制这些现有链接到新表更容易。

好消息：如果您的源表是具有现有连接的**数据透视表或数据透视图**，您可以轻松地将表更改为具有外部数据连接（并在数据连接之间切换）。

1.  对于具有要更改的现有连接的数据透视表，请在表中选择一个单元格。在上面的“数据透视表工具”>“选项”选项卡>“更改数据源”的功能区中，您将能够选择此选项并重新连接到“选择连接”下的另一个源。

2.  对于包含静态数据的数据透视表来引入新连接，我建议使用上述类似的解决方法。

我希望这对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-05T22:16:09.273

我也在经历这个。我已经做了一些测试，这就是我要采取的方法。

1.  保存文件副本（以防万一！）
2.  创建一个新工作表，并创建指向您的数据库的链接，并将其作为表格输入到这个新工作表上
3.  确保您的旧表（手动输入）与您要连接的数据表的布局相同（相同的列顺序和列名）
4.  对于每个数据透视表，将源更改为新表（如果列标记相同，它应该保持所有设置相同）
5.  执行查找和替换以更改引用新表名的所有公式。
6.  更改 VBA 中引用旧表的任何代码

这应该会在进行更改时产生最少的问题。只是不要忘记第一步！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-09-11T20:43:11.380

如果两个连接/查询都是 SQL 或 PostgreSQL，您可以简单地将查询代码从新查询复制到旧查询。然后你甚至不必更换任何东西。“编辑”-“高级编辑器”

# jquery - Jquery自动完成动态文本框问题

> ID：10684982
> 
> 赞同：2
> 
> 时间：2012-05-21T12:08:39.443
> 
> 标签：jquery, dynamic, autocomplete, textbox

```
$('.txtAlignLeft').live('focus.autocomplete', function(){
var $textBox = $(this);
var curId = $textBox.attr("id");
var vtxtmtlCode = $('#txtmtlCode').val();
pmidvalue = (curId).replace( /(^.+\D)(\d+)($)/i,'$2');

$(this).removeData('events').autocomplete(gMasterAjaxPath+"filename.php?vValid=3",{
    //delay:10,
    minChars:1,
    //cacheLength:20,
    //mustMatch:true,
    matchContains: true,
    mustMatch: false,
    //selectFirst: false,
    extraParams: {
    txtmtlCode: function() {return $('#txtmtlCode').val()},
},
    formatItem: function(data, i, n, value) {
        return value.split("#-#")[0]
    },
    formatResult: function(data, value) {
        return(value.split("#-#")[0]);
    }

}).result(function(event, item, data) {
    // Result updation

    });         
}); 
```

当我在输入框中键入单个字符时，数据库命中发生了 10 到 20 次以上（在控制台中）。而且当我单击其他选项卡或文本框时，数据库会持续不断地运行..我该如何解决这个问题..我的代码有什么错误吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:13:27.690

你把答案注释掉了...

使用延迟组合 - 它在 MS 中，所以 1000 = 1 秒。

并使用 minchar... 所以它只会在输入 2 或 3 个字符时进行搜索。

# c++ - 在 Cython 中处理自定义 C++ 异常

> ID：10684983
> 
> 赞同：9
> 
> 时间：2012-05-21T12:08:40.393
> 
> 标签：c++, exception-handling, cython

从 Cython 调用时，我在处理自定义 C++ 异常时遇到了一些麻烦。我的情况如下：我有一个`CustomLibraryException`用于所有异常的库。我想要的基本上是得到错误消息并用它引发 Python 错误。

[用户指南](http://docs.cython.org/src/userguide/wrapping_CPlusPlus.html#exceptions)有一些提示，但有点不具体。第一种可能性是：

cdef int bar() 除了 +ValueError

这会将 转换`CustomLibraryException`为 a `ValueError`，但会丢失错误消息。

另一种可能性是使用显式转换错误

```
cdef int raise_py_error()
cdef int something_dangerous() except +raise_py_error 
```

我真的不明白这个解决方案。我知道 raise_py_error 必须是一个以某种方式处理错误的 C++ 函数。我不知道如何处理它。该函数没有参数，而是`catch`在 C++ 的块内调用。

如果有人有在 Cython 中处理 C++ 异常的工作示例，那将有很大帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-03-12T05:21:20.077

同意文档页面中的措辞有待改进。虽然“ *Cython 不能抛出 C++ 异常*”，但这里有一个 raise_py_error 可以满足我们的要求。

首先，在 cython 中定义自定义异常类，并使用“public”关键字对其进行处理

```
from cpython.ref cimport PyObject

class JMapError(RuntimeError):
  pass

cdef public PyObject* jmaperror = <PyObject*>JMapError 
```

然后编写异常处理程序（文档不是很清楚，这必须用 C++ 编写并导入）：

```
#include "Python.h"
#include "jmap/cy_utils.H"
#include "jmap/errors.H"
#include <exception>
#include <string>

using namespace std;

extern PyObject *jmaperror;

void raise_py_error()
{
  try {
    throw;
  } catch (JMapError& e) {
    string msg = ::to_string(e.code()) +" "+ e.what();
    PyErr_SetString(jmaperror, msg.c_str());
  } catch (const std::exception& e) {
    PyErr_SetString(PyExc_RuntimeError, e.what() );
  }
} 
```

最后，使用 extern 块将处理程序带入 cython，并使用它：

```
cdef extern from "jmap/cy_utils.H":
  cdef void raise_py_error()

void _connect "connect"() except +raise_py_error 
```

完毕。我现在看到了新的异常，它按预期使用错误代码构造：

```
JMapError: 520 timed connect failed: Connection refused 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T15:15:27.773

Cython 中的默认 C++ 异常处理程序应准确说明如何完成您要执行的操作：

```
static void __Pyx_CppExn2PyErr() {
  // Catch a handful of different errors here and turn them into the
  // equivalent Python errors.
  try {
    if (PyErr_Occurred())
      ; // let the latest Python exn pass through and ignore the current one
    else
      throw;
  } catch (const std::bad_alloc& exn) {
    PyErr_SetString(PyExc_MemoryError, exn.what());
  } catch (const std::bad_cast& exn) {
    PyErr_SetString(PyExc_TypeError, exn.what());
  } catch (const std::domain_error& exn) {
    PyErr_SetString(PyExc_ValueError, exn.what());
  } catch (const std::invalid_argument& exn) {
    PyErr_SetString(PyExc_ValueError, exn.what());
  } catch (const std::ios_base::failure& exn) {
    // Unfortunately, in standard C++ we have no way of distinguishing EOF
    // from other errors here; be careful with the exception mask
    PyErr_SetString(PyExc_IOError, exn.what());
  } catch (const std::out_of_range& exn) {
    // Change out_of_range to IndexError
    PyErr_SetString(PyExc_IndexError, exn.what());
  } catch (const std::overflow_error& exn) {
    PyErr_SetString(PyExc_OverflowError, exn.what());
  } catch (const std::range_error& exn) {
    PyErr_SetString(PyExc_ArithmeticError, exn.what());
  } catch (const std::underflow_error& exn) {
    PyErr_SetString(PyExc_ArithmeticError, exn.what());
  } catch (const std::exception& exn) {
    PyErr_SetString(PyExc_RuntimeError, exn.what());
  }
  catch (...)
  {
    PyErr_SetString(PyExc_RuntimeError, "Unknown exception");
  }
} 
```

因此，您可以`#define __Pyx_CppExn2PyErr your_custom_exn_handler`在包含的 .h 文件中覆盖通用行为，或者使用一次性自定义处理程序作为

```
cdef extern from "...":
    void your_exn_throwing_fcn() except +your_custom_exn_handler 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T12:57:06.557

如果`CustomLibraryException`派生自`std::runtime_error`（作为行为良好的 C++ 异常应该），那么您看到的行为是 Cython 中的错误。

如果没有，那么最简单的做法是将您正在调用的 C++ 函数包装在转换异常的 C++ 辅助函数中：

```
double foo(char const *, Bla const &);  // this is the one we're wrapping

double foo_that_throws_runtime_error(char const *str, Bla const &blaref)
{
    try {
        return foo(str, blaref);
    } catch (CustomLibraryException const &e) {
        throw std::runtime_error(e.get_the_message());
    }
} 
```

这将导致`RuntimeError`在 Python 端引发 a。或者，`throw`an `std::invalid_argument`to `raise`a`ValueError`等（请参阅您链接到的页面中的表格）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-12T23:07:23.273

在 Cython 的来源中，[https://github.com/cython/cython/blob/master/tests/run/cpp_exceptions.pyx](https://github.com/cython/cython/blob/master/tests/run/cpp_exceptions.pyx)他们实际上是`raise_py_error`在 .pyx 文件中实现的。这使得在其他 .pyx 文件之间共享错误处理变得更加容易。

一个快速的解决方案只涉及 2 个文件：myerror.pyx：

```
class MyError(RuntimeError):
    "Base class for errors raised from my C++."
    pass
cdef int raise_my_py_error() except *:
    raise MyError("There was a problem") 
```

和 myerror.pxd ：

```
cdef int raise_my_py_error() except * 
```

它允许您`except +my_py_error`在所有文件中添加一个。

但是，这“丢失”了`e.what()`C++ 异常。所以一个更有趣的解决方案需要更多的帮助文件：

my_error_helper.h ：

```
extern const char* get_my_py_error_message(); 
```

my_error_helper.cxx ：

```
#include <exception>
const char* get_my_py_error_message()
{
  try {
    throw;
  } catch (const my_custom_cxx_exception& e) {
    return e.what();
  }
} 
```

my_error_helper.pxd ：

```
cdef extern from "my_error_helper.h": 
    const char* get_my_py_error_message() 
```

my_error.pxd ：

```
cdef int raise_my_py_error() except * 
```

my_error.pyx：

```
cimport my_error_helper

class MyError(RuntimeError):
    "Base class for errors raised from my C++."
    pass

cdef int raise_my_py_error() except *:
    msg = my_error_helper.get_my_py_error_message().decode('utf-8')
    raise MyError(msg) 
```

# jquery - 查找显示在隐藏溢出的 div 元素中的文本长度

> ID：10684989
> 
> 赞同：2
> 
> 时间：2012-05-21T12:09:09.780
> 
> 标签：jquery, css

```
像这样的 div 元素中有一些文本
```

div{ 宽度：100px; 溢出：隐藏；高度：20px；}

现在，我只想获取可见文本的长度，而不是 div 元素的整个文本。

我怎样才能做到这一点...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:17:23.810

为什么不将文本框限制为否。输入的字符数。您访问一个演示，您可以在其中检查编号。输入的字符数并加以限制[单击此处](http://www.mediacollege.com/internet/javascript/form/limit-characters.html) 您可以实施相同的功能并将其用于您的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T12:43:36.597

我发现这个问题很有趣，所以我设计了一种有效测量可见文本字符长度的方法。

你可以在那里测试它：http: [//jsfiddle.net/6nYFb/](http://jsfiddle.net/6nYFb/)

这个想法是迭代地填充文本，直到达到 100px 宽度。

CSS：

```
#txt{ max-width:100px; overflow:hidden;height:20px;}​ 
```

HTML：

```
<span id=txt>My long text is long. My long text.My long text. My long text... My long text. My long text, so long...</span>
<br>Nb chars : <span id=mes></span>​ 
```

JS：

```
var text = $('#txt').text();
var nbchars = 0;
$('#txt').html('');
var increment = function() {
    $('#txt').html(text.substring(0, nbchars));
    if (nbchars<text.length-1 && $('#txt').width()<100) {
        nbchars++;
        window.setTimeout(increment, 1);
    } else {
        $('#mes').html(nbchars);
    }
};
window.setTimeout(increment, 1); 
```

当然，最好不要过度使用这种解决方案，但我没有看到没有画布更直接的东西。它有效。

另一个（不太兼容的）解决方案可能是使用内存画布而不是修改 DOM，但是在 css 中定义的某些文本转换（或：之前）可能难以重现......

# .htaccess - htaccess 在多域上登录

> ID：10684990
> 
> 赞同：1
> 
> 时间：2012-05-21T12:09:10.883
> 
> 标签：.htaccess, login

我有一个多域站点（自定义 CMS），其中所有站点都具有相同的 documentroot。根据 url（域），它将服务于不同的站点。只有 1 个根，他们也只有 1 个 .htaccess

现在我想用一个简单的 .htacess 登录来保护 1 个域（[像这样](http://www.htaccesstools.com/htaccess-authentication/)）

如何指定此登录到 1 个域？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T15:35:08.173

您可以使用[mod_setenvif](http://httpd.apache.org/docs/2.2/mod/mod_setenvif.html)支持来仅保护您的一个域。以下是您需要在 common`.htaccess`下放入的代码`$DOCUMENT_ROOT`：

```
SetEnvIfNoCase Host ^www\.subdomain\.com$ SECURED=yes

AuthType Basic
AuthName "My Protected Area"
AuthUserFile /your/path/to/passwords
Require valid-user
Satisfy         any
Order           allow,deny
Allow from      all
Deny from       env=SECURED 
```

上面的代码将仅显示基本身份验证弹出窗口，`www.subdomain.com`同时保持其他域打开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T14:50:14.593

要启用`.htpasswd`文件，您必须使用该受保护域的特定子目录。`%{HTTP_HOST}`诀窍是使用基于docroot文件中的变量的基于子域的内部重定向`.htaccess`，例如

```
RewriteEngine On
RewriteBase   /

RewriteCond   %{HTTP_HOST}   =admin.example.com
RewriteRule   ^(?!admin).*   admin/$0               [L] 
```

这将在内部重定向任何`htttp://admin.example.com/`对 DOCROOT/admin 子目录的引用，该子目录可以拥有自己的文件`.htaccess`和`.htpasswd`文件。

您可能需要将 CMS 条目脚本和子目录符号链接回共享实例。 [这](http://blog.ellisons.org.uk/article-25)就是我为 phpBB 所做的。

# javascript - 单击元素后如何触发“聚焦”？

> ID：10684995
> 
> 赞同：2
> 
> 时间：2012-05-21T12:09:25.093
> 
> 标签：javascript, jquery, combobox

我有以下标记：

```
<select style="display:none">
    <option value='1'>1</option>
    <option vlaue='2'>2</option>
</select>
<input type="text" id="comboBox" />
<ul id="comboBoxData" style="display:none">
    <li id='1'>1</li>
    <li id='2'>2</li>
</ul> 
```

以及以下 JQuery 代码：

```
$(document).ready(function() {
    $('select').each(function() {
        var parent = this;
        $('#comboBoxData').on('click', 'li', function() {
            var value = $(this).prop('id');
            $(parent).val(value);
            $('#comboBox').val(value);
        });
    });   
    $('#comboBox').bind('focusin', function () {
        $('#comboBoxData').show();
    });   
    $('#comboBox').bind('focusout', function () {
        $('#comboBoxData').hide();
    });
}); 
```

当我单击 LI 之一时，“comboBoxData”元素在单击触发器发生之前消失。有没有办法解决这个问题或替代事件，我可以使用它来产生与焦点输出相同的效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T13:35:54.083

放置 mouseenter 和 mouseleave 事件并更改全局变量的值，例如 isOver。

```
$('select').each(function() {
    var parent = this;
    $('#comboBoxData').on('click', 'li', function() {
        var value = $(this).prop('id');
        $(parent).val(value);
        $('#comboBox').val(value);
        $('#comboBoxData').hide();
    });
}); 
$('#comboBoxData').mouseover(function(){
    isOver = true;
}).mouseleave(function(){
    isOver = false;
});
$('#comboBox').bind('focusin', function () {
    $('#comboBoxData').show();
});   
$('#comboBox').bind('focusout', function () {
    if(!isOver){
        $('#comboBoxData').hide();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T12:56:44.093

你不需要这个：

```
 $('#comboBox').bind('focusout', function () {
        $('#comboBoxData').hide();
 }); 
```

而是在里面使用这个`$('#comboBoxData').on('click', 'li', function() {`

如果你对插件没问题，你可以这样使用：

```
$('#menu').bind('clickoutside', function (event) {
    $(this).hide();
}); 
```

[你可以在这里](http://benalman.com/projects/jquery-outside-events-plugin/)得到那个插件

另外，我在不使用插件的情况下更改了代码：请检查更新的答案：

[演示](http://jsfiddle.net/vZwRk/32/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:16:57.110

尝试`blur()`功能

```
$('#comboBox').blur(function () {
        $('#comboBoxData').hide();
    }); 
```

> blur 事件在失去焦点时发送到元素。

来自[http://api.jquery.com/blur/](http://api.jquery.com/blur/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T13:51:10.557

不完全优雅，但它有效。

```
$("body").click(function(event){   
    if(!$(event.target).is("#comboBoxData") && !$(event.target).is("#comboBox") ){    
        $("#comboBoxData").hide(); }
}); 

$(document).ready(function() {
    $('select').each(function() {
        $('#comboBoxData').on('click', 'li', function() {
        var value = $(this).prop('id');
                $('#comboBox').val(value);
           $('#comboBoxData').hide();
        });
    });   

    $('#comboBox').bind('focusin', function () {
    $('#comboBoxData').show();
  });
}); 
```

# linux - 是否有任何用于 Linux 服务器的 SVN 存储库管理的 GUI 工具？

> ID：10684996
> 
> 赞同：2
> 
> 时间：2012-05-21T12:09:35.763
> 
> 标签：linux, svn, centos, visualsvn

我试图在 linux 服务器上安装 SVN。我尝试过 UberSVN（但我的老板不喜欢它）。然后我尝试了（默认）Apache SVN。但是管理起来很困难，因为一切都是在命令行中完成的。我在堆栈中搜索，但发现有关 windows SVN [SVN 管理员管理 GUI 工具的问题](https://stackoverflow.com/questions/672431/svn-admin-management-gui-tool)

我想要一个很好的 SVN 工具，它有很好的 GUI 用于管理目的，它可以在 Linux 中工作。请建议。

提前致谢

**更新 1**

svn 应该与以下所有客户端兼容。Eclipse, Adob​​e Dreamweaver, Xcode (MAC), Tortoise svn

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-12-17T08:07:33.863

这可能是一个选项，看起来不错：

[http://www.svn-access-manager.org/downloads/](http://www.svn-access-manager.org/downloads/)