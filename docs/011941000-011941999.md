# StackOverflow 问答 11941000-11941999

# hadoop - Hadoop数据拆分和数据流控制

> ID：11941002
> 
> 赞同：0
> 
> 时间：2012-08-13T19:29:51.793
> 
> 标签：hadoop, mapreduce, hdfs, hadoop-streaming, hadoop-plugins

对于将 hadoop 作为存储系统，我有 2 个问题。

1.  我有一个包含 3 个数据节点的 hadoop 集群，我想将一个大小为 128mb 的大文件（假设拆分大小为 64mb ）直接拆分到我选择的数据节点。这就是在这种情况下如何控制哪个拆分到哪个 DataNode。我的意思是说我们有 3 个数据节点（即 D1、D2、D3）并且我们想要特定的拆分（比如说“A”），我希望它移动到特定的数据节点让它成为 D2。

    我们应该怎么做 ？

2.  hadoop 文件系统的最小可能拆分大小是多少。我们如何将其配置为最小的拆分大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T00:47:04.927

1）你无法控制数据块的放置位置

2）尽可能小（虽然应该是 1024 字节的倍数，但我认为这没有实际的限制），但在现代硬件上，任何小于 64 / 128 MB 的东西都是低效的（你可以指定如果您在 MR 作业中执行任何 CPU 密集型操作，则处理拆分大小更小）

# jquery - 如何生成具有创建/销毁条件的动画 div

> ID：11941008
> 
> 赞同：0
> 
> 时间：2012-08-13T19:30:15.213
> 
> 标签：jquery, animation, jquery-animate

我正在尝试创建一系列缓慢消失的 div，并在其容器上漂浮一段距离。一旦浮动 div (floater) 离开容器/屏幕外，它就会重新出现在它产生的位置并再次淡入，永远循环。

我已经成功地创建了基本动画，但我不知道有一种有效的方法来生成多个 div 并相互浮动/跟随到容器的边缘。

有谁知道我该怎么做？

这是我迄今为止的单个 div 动画：

```
function floaters()
{
$('.floater').each(function(){
    $(this).animate({'opacity': '1'}, {queue: false, duration: 5000}) ;
    $(this).animate({'left': '-=652'}, 2000, 'linear', function(){
        $(this).css('left', '622px') ;
        $(this).css('opacity', '0.0') ;
        floaters() ;
    }) ;
})
} 
```

我不确定“每个”是否是我应该使用的。

* * *

你可以在这里看到我到目前为止所做的以及我正在努力实现的目标：

[http://jsfiddle.net/Y73TZ/](http://jsfiddle.net/Y73TZ/)

我基本上希望一系列框相互跟随并在每个框到达页面末尾时循环，与这个框完全相同，但每个框之间的起始距离是随机的。

* * *

@r0m4n 我想要的那种，但我希望每个盒子从同一个位置开始，它们之间有一个延迟，所以它们之间的空间是均匀的，并且一次不超过 8 个盒子。对脚本进行哪些调整以实现这一目标？

* * *

我重新编写了脚本，希望它能更好地解释我正在尝试做的事情。我改用了 setInterval，因为它可以让我更好地控制我想在动画中的某些点发生的事件：

```
var creationTimer ;
var moveTimer ;
function floaters()
{
var firstTime = 1 ;
moveTimer = setInterval(function(){
    $('.floater').each(function(){
        var pos = $(this).position() ;
        $(this).css('left', (pos.left-2)+'px') ;
        if(pos.left < -32 || firstTime == 1)
        {
            firstTime = 0 ;
            $(this).css('left', '620px') ;
            $(this).hide() ;
            $(this).show(500);
        }
        if(pos.left < 500 && pos.left > 450)
        {
            clearTimeout(creationTimer) ;
            creationTimer = setTimeout(function(){
                $('#latest').append('<div class="floater"></div>') ;
            }, 1000)
            clearInterval(moveTimer);
        }
    })
}, 50)
} 
```

在调用 clearInterval(moveTimer) 时，我希望出现一个新的 div 并跟随前面的框。我希望该循环重复 X 次。我希望我能很好地解释这一点。感谢您一直以来的帮助。

* * *

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:56:40.317

它可能需要一些改进，但你可以做这样的事情来创建一个从右到左移动的选取框：

jQuery：

```
$(document).ready(function() {
    $('.floater').css('opacity', '0');
    var randomNumber = 0;
    var $flot = null;
    floaters();
})

function floaters($current) {
    if ($current != null) $flot = $current;
    else $flot = $('.floater');

    $flot.each(function() {
        randomNum = Math.ceil(Math.random() * 320); /*Random number from 1 to 320*/
        $(this).css("left", randomNum);
        $(this).animate({
            'opacity': '1'
        }, {
            queue: false,
            duration: 5000
        });
        $(this).animate({
            'left': '0'
        }, 10000 * (randomNum / 320), 'linear', function() {
            $(this).css('opacity', '0.0');
            floaters($(this));
        });
    })
} 
```

我更新了您的 CSS 以包含绝对位置，因为从技术上讲，所有框都需要在同一位置完成。

```
#latest {
    background:#000000;
    height:35px;
    width:320px;
    position:absolute;
}
.floater {
    width:32px;
    height:32px;
    background:#fff;
    position:absolute;
    left:320px;
} 
```

基本上你想找到所有的浮动框，开始动画功能，但有一个相对于它们开始的时间。当一个浮动框确实到达它的目的地时，该过程会重复，但会将自身传递给函数以重新分配其起始位置。这个脚本不适应浮动框的碰撞，尽管可以添加。

[http://jsfiddle.net/r0m4n/Y73TZ/4/](http://jsfiddle.net/r0m4n/Y73TZ/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:56:24.727

我试着做点什么。抱歉，如果我不重用您的代码。我希望您可以根据需要进行配置。

```
var distance_to_walk = $("#latest").width();
var interval_between_floater = 50; // distance in pixel between each floater
var distance_pop = distance_to_walk - 32; // replace 32 by the width of a floater
var step = 2; // the number pixel through by floater at each step
var number_floaters = 8; // number of floater to display
var delay_between_frame = 10;
var duration_animation = 1000 * 10 * 3;

$('.floater').each(function(){
    $(this).css('left',distance_pop + 'px') ;
});

var i=0;
var number_frames = duration_animation/ (delay_between_frame + 2);
var cpt_frames = 0;
var interval = setInterval(function(){

$('.floater').each(function(){
   $(this).css('left', ($(this).offset().left-2) + "px");
    if(!$(this).hasClass("spawned") &&
       ($(this).offset().left + $(this).width() + interval_between_floater)  <= distance_pop ){
       // If a spawner can spawn another floater
       if( i < number_floaters){
          //If the maximum floaters is not good
          var new_floater = $(this).clone();

          $("#latest").append( new_floater );
          // Move the floater at the beginning
          $(new_floater).css('left', distance_pop + 'px');
          // Add this to disable the spawning with this floater
          $(this).addClass("spawned");
          i++;
      }
    }
    if( $(this).offset().left <= -($(this).width())){
        // If the floater is out of screen
        $(this).css("left", distance_pop + 'px');
    }
});

cpt_frames++;

if(cpt_frames >= number_frames){
  console.log("fin");
  clearInterval(interval);
  return;
}
}, delay_between_frame); 
```

[您可以在此处](http://jsfiddle.net/charlesjourdan/MZhDh/3/)测试示例

编辑 ：

[这里](http://jsfiddle.net/charlesjourdan/MZhDh/10/)的新例子。

编辑 2：

[这里](http://jsfiddle.net/MZhDh/17/)有相对位置的例子

# backbone.js - Backbone 中仅客户端的属性

> ID：11941010
> 
> 赞同：5
> 
> 时间：2012-08-13T19:30:39.647
> 
> 标签：backbone.js

我有一个相当通用的模型和该模型的集合（见下文），我正在处理作为一系列视图的基础。在几个视图中，选择其中一个模型会生成操作（通过“选择”属性），我需要能够仅在客户端跟踪选择。

但是，在 Backbone 中似乎没有干净的方法可以做到这一点。客户端模型上添加/更改的任何属性都将同步到服务器。更改该属性时我不能使用，因为当事件在该属性上`{silent : yes}`触发时，我需要触发我的视图中的更改。`change`我想出的唯一方法是`save`在`Backbone.Model`

我的问题：有没有办法让我缺少的只有客户端的属性，或者我的方法在结构上存在一些我没有看到的其他方式的缺陷？

```
 var CSEvent = Backbone.Model.extend({
        idAttribute: "_id",
        urlRoot : '/api/events',
        defaults: {
            title : "",
            type : "Native",
            repeatOrOneTime : "OneTime",
            selected : false
        }
    });    

    var CSEventCollection = Backbone.Collection.extend({
        model: CSEvent,
        url: '/api/events',
        getSelectedEvent : function() {
            return this.find(function(csevent) { return csevent.get('selected') === true; });
        },
        selectEvent : function(eventId) {
            this.deselectEvent();
            this.get(eventId).set({selected : true});
        },
        deselectEvent : function() {
            this.getSelectedEvent().set({selected : false});
        }
    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T19:53:01.890

尝试覆盖该`Model.toJSON()`方法，正如您在[Backbone Model 代码](https://github.com/documentcloud/backbone/blob/master/backbone.js#L227-229)中看到的那样，此方法不是很复杂。官方文档还建议在特殊需要的情况下覆盖它。

尝试这样的事情：

```
var CSEvent = Backbone.Model.extend({
  toJSON: function(){
    return _.clone( _.pick( this.attributes, "title", "type", "repeatOrOneTime" ) );
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T03:51:43.947

我不建议重写`Model.toJSON()`，因为您可能想在代码的其他部分使用 JSON 表示，例如将 Backbone 模型传递给微模板时。

自定义保存哪些属性的更好方法是覆盖模型对象中[的同步方法：](http://backbonejs.org/#Sync)

```
 sync: function(method, model, options) {
        if (method == 'update' || method == 'create') {
            var newModel = this.clone();
            newModel.unset('ignoredAttribute', {silent: true);
            return Backbone.sync.call(newModel, method, newModel, options);
        } else {
            return Backbone.sync.call(this, method, this, options);
        }
    }, 
```

此示例忽略名为 的属性`ignoredAttribute`。

在您的代码中，它将是这样的：

```
 var CSEvent = Backbone.Model.extend({
    idAttribute: "_id",
    urlRoot : '/api/events',
    defaults: {
        title : "",
        type : "Native",
        repeatOrOneTime : "OneTime",
        selected : false
    },
    sync: function(method, model, options) {
        if (method == 'update' || method == 'create') {
            var newModel = this.clone();
            newModel.unset('selected', {silent: true);
            return Backbone.sync.call(newModel, method, newModel, options);
        } else {
            return Backbone.sync.call(this, method, this, options);
        }
    }
}); 
```

另一个简单的选择是`selected`作为对象属性（而不是作为 Backbone 托管属性），您仍然可以使用`trigger`. 对我来说，这是解决您问题的最简单方法：

```
 var CSEvent = Backbone.Model.extend({
    idAttribute: "_id",
    urlRoot : '/api/events',
    selected : false,
    defaults: {
        title : "",
        type : "Native",
        repeatOrOneTime : "OneTime"
    },
    select: function() {
         this.selected = true;
         this.trigger('selected'); // you can use another event name here, ie. change
    },
    deselect: function() {
         this.selected = false;
         this.trigger('deselected');
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T10:53:33.677

我想提出一种使用上述两个原则来实现这一目标的方法，而不会覆盖`toJSON()`.

这种模式提供了许多好处——例如，在仅将必要的属性发送到服务器之前对所有属性进行客户端验证。

以下面的示例为例，我们为用户提供了一种更改密码的方法。

```
var UserModel = Backbone.Model.extend({

  defaults: {
    username: "",
    password: {
      old: "",
      new: "",
      confirm: ""
    }
  },

  validate: function(attrs) {
    if (attrs.password.new !== attrs.password.confirm) {
      return "Passwords must match";
    }
  },

  toRemoteJSON: function() {
    var payload = this.toJSON();
    delete payload.password.confirm;
    return payload;
  },

  sync: function(method, model, options) {
    if (method == 'update' || method == 'create') {
      var newModel = this.clone();
      newModel.clear({ silent: true });
      newModel.set(this.toRemoteJSON(), { silent: true });
      return Backbone.sync.call(newModel, method, newModel, options);
    } else {
      return Backbone.sync.call(this, method, this, options);
    }
  }

}); 
```

当模型为`save`d 时，该`validate()`方法在该方法之前被调用`sync()`，因此它检查两个新密码是否匹配。然后，该方法将在发送到服务器之前删除确认密码字段`sync`委托给哪个。`toRemoteJSON()`

该`toRemoteJSON()`函数只是对`newModel.unset()`Diego 解决方案中的部分进行抽象。但这现在意味着您可以`sync`在基础对象中定义被覆盖的对象，而从该对象扩展的对象只需要定义`toRemoteJSON()`.

# perl - 使用 WWW::Mechanize 凭证

> ID：11941016
> 
> 赞同：4
> 
> 时间：2012-08-13T19:30:54.420
> 
> 标签：perl, credentials, ntlm, www-mechanize

我在使用 WWW:Mechanize 的凭据代理来访问和 Web 抓取需要 NTLM 身份验证的站点时遇到问题。我在网上看到凭证代理需要 4 个参数：基础、领域、用户名和密码。我不确定基础或领域使用什么，因此这些示例将非常有帮助。当我运行我的代码时，我在 $url get 的行上得到一个未经授权的错误。任何帮助，将不胜感激

```
#!/usr/bin/perl
use strict;
use warnings;

use WWW::Mechanize;

use HTML::TokeParser;

my $url= shift || "mywebsite.com";

my $agent = WWW::Mechanize->new( autocheck => 1 );

$agent->credentials ( "proxy:port", '', 'domain/username', 'password' );

$agent->proxy(['https', 'http', 'ftp'], 'proxy:port');

$agent->get( $url );

print $agent->content(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:41:29.373

它有助于阅读您正在使用的软件的文档。WWW::Mechanize 覆盖该[`credentials`方法](http://p3rl.org/WWW%3a%3aMechanize#mech-credentials-username-password-)，因此它也只接受用户名和密码。这些最终传递给 Authen::NTLM。

# javascript - 使用 jQuery 检查/取消选中复选框

> ID：11941021
> 
> 赞同：2
> 
> 时间：2012-08-13T19:31:26.770
> 
> 标签：javascript, jquery

我正在尝试使用以下代码在选中和未选中之间切换复选框，但它似乎只是取消选中。

```
var checkbox = $this.find('[name="category"]');

if ('checkbox:checked') {
    checkbox.prop("checked", false);
} else {
    checkbox.prop("checked", true);
} 
```

我怎样才能让它正确切换？

有没有更好的方法来代替 if/else 语句？.toggle() 似乎不适用于复选框，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T19:33:09.350

尝试切换功能，如

```
$('[name="category"]').toggle(
 function() { 
    $(this).find(':checkbox').prop('checked', true); },
 function() { 
    $(this).find(':checkbox').prop('checked', false);
 }); 
```

或者

试试这样

```
 var checkbox = $this.find('[name="category"]'); 
   $checkbox.attr('checked', !$checkbox.attr('checked')); 
```

或者对于 jquery 1.6

```
 $checkbox.prop('checked', !$checkbox[0].checked); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T19:36:10.790

由于它似乎只有一个元素，因此只需使用`checkbox.checked`

```
var checkbox = $this.find('[name="category"]').get(0);

checkbox.checked = !checkbox.checked; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T19:32:43.530

尝试

```
 if (checkbox.is(':checked')) { ... } 
```

或者

```
checkbox.prop('checked', checkbox.is(':checked')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T19:32:51.143

尝试

```
if (checkbox.is(':checked')) { 
```

或者，更复杂一点：

```
if ($this.find('[name="category"]:checked').length) { 
```

[http://api.jquery.com/checked-selector/](http://api.jquery.com/checked-selector/)

[http://api.jquery.com/is/](http://api.jquery.com/is/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T19:34:34.767

您需要重新审视您的 IF 语句。您基本上是在检查字符串 'checked:checked'

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-13T19:35:25.727

```
var checkbox = $this.find('[name="category"]');
checkbox.prop("checked", !checkbox.is(":checked") ); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-13T19:35:31.063

试试这个：

```
checkbox.prop('checked', checkbox.is(':checked')); 
```

# php - 行显示为未执行

> ID：11941022
> 
> 赞同：0
> 
> 时间：2012-08-13T19:31:39.757
> 
> 标签：php, phpunit

我有这个代码：

```
public function checkKeyConstraint($key) {
    if ($this->hasKey($key)) {
        throw new Exception('Key already exists '.$key);
    }

    return $this;
} 
```

我也有两种带有数据提供者的 PHPUnit 测试方法，一种用于存在的键，另一种用于不存在的键。**问题**是代码覆盖工具将该`throw new Exceptions('Key already exists '.$key);` **行显示****为未执行**。

PHP_CodeCoverage 1.1.3、PHPUnit 3.6.12、PHP 5.4.4、xdebug 2.2.1-5.4-vc9

UPD：测试方法和数据提供者

```
/**
 * @covers            Dict::checkKeyConstraint
 *
 * @dataProvider      providerNonexistentKeys
 */
public function testCheckKeyConstraintNonExistent($key) {
    $this->assertEquals(self::$object, self::$object->checkKeyConstraint($key));
}

/**
 * @covers            Dict::checkKeyConstraint
 *
 * @expectedException Exception
 * @dataProvider      providerValidKeyValues
 */
public function testCheckKeyConstraintExistent($key) {
    $this->assertEquals(self::$object, self::$object->checkKeyConstraint($key));
    $this->fail();
}

public function providerNonexistentKeys() {
    $data = array();

    for ($i = 0; $i < 10; $i++) {
        $data[] = array('randKey:' . rand());
        $data[] = array(rand());
    }

    return $data;
}

public function providerValidKeyValues() {
    $data = array();

    for ($i = 0; $i < 20; $i++) {
        $stub   = new Key('id#' . $i, 'val#' . $i . '#string');
        $data[] = array($stub, $stub);
        $stub   = new Key($i, 'val#' . $i . '#numeric');
        $data[] = array($stub, $stub);
    }

    return $data;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T19:52:24.897

我是个白痴。问题是在这种`testCheckKeyConstraintExistent`方法中我检查整个对象，而不是它的关键。应该改写为：

```
public function testCheckKeyConstraintExistent(Key $key) {
    $this->assertEquals(self::$object, self::$object->checkKeyConstraint($key->_id()));
    $this->fail();
} 
```

# python - 在python中构建矩阵

> ID：11941027
> 
> 赞同：1
> 
> 时间：2012-08-13T19:32:01.933
> 
> 标签：python, list, text, matrix

Python初学者在这里。我有两个具有相同格式的制表符分隔信息的文本文件。它们包含 3 列（标识符、染色体和位置）的行，例如：

文件 1：

```
2323 2 125
2324 3 754 
```

... ETC

文件 2：

```
2323 2 150
2324 3 12000 
```

... ETC

我想通过遍历一个文件中的每个标识符（每行中的第一列）并关联它与它的位置（column3），然后在下一个文件中找到这个匹配的标识符，并将另一个位置（column3）保存在这个文件中。所以最后每个标识符将与来自两个不同文件的 2 个不同位置相关联。

这是我需要帮助的。对于下一步，我将寻找位置之间数值差异最大的标识符。

非常感谢任何帮助、提示或解决方案，我是一个具有非常基础知识的 Python 初学者。

提前谢谢了！

鲁巴尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T19:46:36.537

```
import collections
d=collections.defaultdict(list)
for f in ('file1','file2'):
    with open(f) as f1:
        for line in f1:
            ident, chrom, pos = line.split()
            d[ident].append(int( pos ))

#big differences at end of list
items = sorted(d.items(), key = lambda item: abs(item[1][1] - item[1][0])) 

#big differences at beginning of list
#items = sorted(d.items(), reverse = True, key = lambda item: abs(item[1][1] - item[1][0])) 
```

在此解决方案中，我将文件中的信息存储为字典。键是标识符，值是包含位置的列表。然后，我根据位置列表中第一个和第二个元素之间差异的绝对值对该字典的项目进行排序。换句话说，最大的区别在`items`列表的末尾。

为了使它起作用，它假定`file1`和`file2`具有*相同的标识符*。如果没有，您首先需要过滤项目以仅挑选出长度为 2 的字典条目。例如

```
items = [(k,v) for k,v in d.items() if len(v) == 2]
items = sorted(items, ...) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T19:42:37.810

您的问题可以有几个答案：

1.  如果您打算对矩阵进行大量计算，我建议您查看非常有效的[numpy库。](http://numpy.scipy.org/)[您可以在此处](http://docs.scipy.org/doc/numpy/reference/generated/numpy.matrix.html)查看如何使用 numpy 创建矩阵。
2.  您的问题的第二个可能答案是使用[biopython](http://biopython.org/wiki/Main_Page)库（我已经得出结论，您正在使用染色体）。
3.  您可以使用 Python 嵌套列表来创建矩阵。

这是如何执行此操作的代码片段（假设我们正在从文件 2 中读取）

```
matrix = []
with open(path_to_file2, 'rt') as f:
    for line in f:
        matrix.append(map(int, line.strip().split(' '))) 
```

然后，您可以获取创建的矩阵的值：

```
matrix[0]     # First row == [2323, 2, 150]
matrix[0][1]  # Second column, first row == 2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T19:46:22.493

您可以使用以标识符作为键、位置列表作为值的字典。然后您可以计算位置之间的差异并将其作为列表的第三个元素。然后，您可以遍历字典，在字典值的位置 [2] 中找到最大值。

```
d = {}
for each line in file1:
   d[identifier] = [position]

for each line in file2:
   d[identifier].append(position)
   d[identifier].append(d[identifier][1]-d[identifier][0])

maxDiff = 0
for x in d:
    value = d[x][2]
    if value > maxDiff:
        maxDiff = value 
```

# svg - CSS 规则不适用于 svg 组转换

> ID：11941029
> 
> 赞同：2
> 
> 时间：2012-08-13T19:32:05.617
> 
> 标签：svg, transform

我有关于 svg 组转换的问题。

我在css中指定元素样式，就像这样。

```
#uGroup1 {
transform: translateY(200px);
-ms-transform: translateY(200px);
-moz-tranform: translateY(200px);
-webkit-transform: translateY(200px);
-o-tramsform: translateY(200px); } 
```

我正在通过 javascript 到 svg 元素创建包含元素的组。它就像魅力一样，但不知何故，当我用检查器搜索它时，它并没有让这些规范符合匹配的 CSS 规则。

我意识到，在创建组后，当我将组 id 更改为其他组并将其恢复为“正确”id 时，它会获得那些 CSS 规则。它可以工作，但是当我用相同的想法创建新元素时，它又在做同样的事情。

我有很多 svg 组，我想通过变换来定位这些组。

它实际上与一些团体合作。我在组内有组..这可能是问题？？

我用**uGroup1**制作了元素，而且它在 css 中与我之前展示的完全相同。

ID 中带有大写字母的元素存在一些问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:11:39.927

拥有多个具有相同 ID 的元素是错误的。这不是一个有效的 XML 文档，CSS 选择器除了第一个具有该 ID 的元素之外不匹配任何内容是正常的。

您应该改用类名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-31T20:35:07.250

解决方案很简单，只需**不要在 ID:S 上使用用户大写字母**

```
#ugroup1 {
    transform: translateY(200px);
    -ms-transform: translateY(200px);
    -moz-tranform: translateY(200px);
    -webkit-transform: translateY(200px);
    -o-tramsform: translateY(200px); 
} 
```

# c++ - 在不使用虚函数的情况下覆盖对 C++ 中基类的调用？

> ID：11941046
> 
> 赞同：2
> 
> 时间：2012-08-13T19:33:28.783
> 
> 标签：c++, inheritance, overriding

给定一个基类`A`，定义了`A::get`和`A::add`函数。

```
class A { 
public:
  int get() { return 3; }
  int add() {
    return get() + get();
  }
}; 
```

注意`A::add`调用`A::get`. 派生类是否`B`可以调用`A::add`但使用它自己的`B::get`函数？就像是：

```
class B : public A {
  int get() { return 7; }
};

#include <iostream>

int main() {
  A foo;
  std::cout << foo.add() << std::endl;

  B bar;
  std::cout << bar.add() << std::endl;
  return 0;
} 
```

在第二种情况下，预期的输出`14`不是。`6`如果可以控制`A`，我可以创建`::get`一个虚函数，每个派生类都可以根据需要实现它。但是，让我们假设它`A`是不可变的 - 我如何称呼正确的`::get`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T19:36:31.327

不，这是不可能的：想象一下它`A`是单独编译并作为预编译库提供给您的，以了解原因。

由于`A::get`不是虚拟的，编译器直接将调用插入到其输出中，而不通过[vtable](http://en.wikipedia.org/wiki/Virtual_method_table)`A::get`进行任何间接调用。此外，如果编译器选择这样做，它甚至可以内联调用，将返回“烘焙”到其输出中。`A::add``3`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T19:35:46.373

像这样：

```
class B : public A {
  int get() { return 7; }
  int add() {
    return get() + get();
  }
}; 
```

那是因为当你定义`A::add()`为

```
int add() {
  return get() + get();
} 
```

**您告诉编译器**使用`A::get()`，因为它不是`virtual`，并且调用是静态解析的。

重要提示：如果你需要这样做，你可能做错了什么。最有可能的是，作者`A`希望它以某种方式运行，而不希望`get`或`add`虚拟。这只是一种解决方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T19:42:02.793

如果`A`是不可变的，您可以创建一个代理来`A`定义您需要的虚拟接口。

```
class A_Proxy : public A {
public:
  virtual ~A_Proxy () {}
  virtual int get() { return A::get(); }
  int add() { return get() + get(); }
}; 
```

现在，您可以`B`改为继承自`A_Proxy`，并获得您想要的行为。

**编辑：**根据您对 Luchian 的评论，我认为模板方法更适合您。您进行修改`A`，以便您的`add`例程从模板方法参数中检索值。然后，您创建一个新`add`的调用模板化版本的模板参数，该模板参数与原始行为匹配。

```
class A {
public:
  int get() { return 3; }

  template <typename GET>
  int add(const GET &g) { return g(this) + g(this); }

  struct DefaultGet {
    int operator () (A *p) const { return p->get(); }
  };

  int add() { return add(DefaultGet()); }
}; 
```

然后，`B`调用模板化`add`例程，传入它想要的 get 参数。

```
class B : public A {
public:
  struct BGet {
    int operator () (A *) const { return 7; }
  };
  int add() { return A::add(BGet()); }
}; 
```

# java - 使用 Java 的 IP 地址

> ID：11941059
> 
> 赞同：4
> 
> 时间：2012-08-13T19:34:41.983
> 
> 标签：java, ip, ip-address

如何获取用户 IP 地址？

```
InetAddress ip;
try {

 ip = InetAddress.getLocalHost();
 System.out.println("Current IP address : " + ip.getHostAddress());

} catch (UnknownHostException e) {

e.printStackTrace();

 } 
```

返回：127.0.0.1

我知道那不是我的IP。这是我的本地IP地址。如何使用 java.. 获取用户 IP？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T19:38:13.163

最短的方法是：

```
try {
InetAddress thisIp =InetAddress.getLocalHost();
System.out.println("IP:"+thisIp.getHostAddress());
}
catch(Exception e) {
e.printStackTrace();
} 
```

但是 `getLocalHost`文档说：

> 如果有安全管理器，则使用本地主机名和 -1 作为其参数调用其 checkConnect 方法，以查看是否允许该操作。如果不允许该操作，则返回表示环回地址的 InetAddress。

并且在某些情况下`InetAddress.getLocalHost()`不咨询您的接口，它只是返回常量 127.0.0.1（对于 IPv4））

我认为`NetworkInterface.getNetworkInterfaces`你需要列举所有的可能性。这是一个不显示虚拟地址但适用于“主”接口的示例：

```
import java.net.*;
import java.util.*;

public class Test
{
    public static void main(String[] args)
        throws Exception // Just for simplicity
    {
        for (Enumeration<NetworkInterface> ifaces = 
               NetworkInterface.getNetworkInterfaces();
             ifaces.hasMoreElements(); )
        {
            NetworkInterface iface = ifaces.nextElement();
            System.out.println(iface.getName() + ":");
            for (Enumeration<InetAddress> addresses =
                   iface.getInetAddresses();
                 addresses.hasMoreElements(); )
            {
                InetAddress address = addresses.nextElement();
                System.out.println("  " + address);
            }
        }
    }
} 
```

**或者：**

尝试使用这个（第一个输出应该是 PC 名称后的 IP）：

```
 InetAddress[] localaddr;

    String computername = null;

    try {
        computername = InetAddress.getLocalHost().getHostName();//get pc name
    } catch (UnknownHostException ex) {
        ex.printStackTrace();
    }

    System.out.println(computername);

    try {
        localaddr = InetAddress.getAllByName(computername);
        for (int i = 0; i < localaddr.length; i++) {
            System.out.println("\n" + localaddr[i].getHostAddress());
        }
    } catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

**参考资料**：

*   [在java中没有获得IP地址](https://stackoverflow.com/questions/1062041/ip-address-not-obtained-in-java)
*   [http://www.roseindia.net/java/java-get-example/get-ip-address.shtml](http://www.roseindia.net/java/java-get-example/get-ip-address.shtml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T19:42:40.837

当您打电话时，`getLocalHost()`您正在询问您所连接的路由器的相对地址，即（如预期的那样）`127.0.0.1`。要使用 确定 IP 地址`InetAddress`，请尝试：

```
InetAddress.getByName("http://yoururl.com/path/"); 
```

还有一种`getAllByName(String)`方法可以为您的目的服务。阅读 javadoc。

[http://docs.oracle.com/javase/1.4.2/docs/api/java/net/InetAddress.html#getHostAddress](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/InetAddress.html#getHostAddress) ()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-02T16:27:10.460

它获取您机器的IP地址，

```
 InetAddress inet= InetAddress.getLocalHost();
    String str[]=inet.toString().split("/");
    for (int i=0;i<str.length;i++)
    System.out.println(inet.toString() +" "+ str[i]);
    InetAddress[] inetAd=InetAddress.getAllByName(str[0]);
    for(int j=0;j<inetAd.length;j++ ){
    System.out.println(inetAd[j].toString()); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-13T22:59:14.047

这将返回您当前使用的接口地址：

```
NetworkInterface ni;
try {
    Enumeration<NetworkInterface> interfaces NetworkInterface.getNetworkInterfaces();
    while (interfaces.hasMoreElements()) {
        ni = interfaces.nextElement();
        if (ni.isUp()) {
            Enumeration<InetAddress> inetAddresses = ni.getInetAddresses();
            while (inetAddresses.hasMoreElements()) {
                InetAddress ia = inetAddresses.nextElement();
                if (!ia.isLinkLocalAddress()) {
                    return ia;
                }
            }
        }
    }
} catch (SocketException ex) {
    throw new RuntimeException(ex);
} 
```

# user-interface - PyQt 和 QThreads：单独的线程仍然冻结主 GUI 线程？

> ID：11941060
> 
> 赞同：2
> 
> 时间：2012-08-13T19:34:44.993
> 
> 标签：user-interface, pyqt, qthread

我正在尝试在 Python 中的单独线程中做一些工作。我正在使用 PyQt，所以我的线程是 QThreads。

这项工作本身涉及使用 PIL 加载大图像并将图像转换为 QImage。

下面是一些在工作线程中反复加载图像的代码示例：

```
class testThread(QtCore.QThread):
    def run(self):
        while True:
            im = Image.open('c:\zheadline.tif')
            try:
                imgData = ImageQt.ImageQt(im)
                print (imgData.width())
            except:
                print ("Image load error") 
```

图像非常大（16k），因此实际加载它可能需要几秒钟。但是，在此期间，GUI 变得非常迟钝，通常会冻结几百毫秒。

为什么是这样？我的机器有 16 个内核，所以没有理由为什么 1 个线程的工作会导致所有其他线程的速度变慢，对吧？

基本上我希望能够在后台加载这些大图像而不会中断用户体验。有谁知道如何将主要工作推到另一个线程而不干扰主 GUI 线程？

其他一些信息：我正在使用“thread.start()”启动 QThreads。此外，GUI 在加载期间并没有完全冻结……它只是变得非常缓慢和缓慢，间歇性地冻结。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T21:46:44.193

python 解释器一次只能在一个线程中运行（阅读有关 Global Interpreter Lock 的信息），因此 Image.open 和 ImageQt.ImageQt 中的一个或两个可能在 python 中做很多工作而不释放 GIL。

一种可能的解决方案是在单独的进程中加载​​图像并通过共享内存传输数据。我最近做了这样的事情：http://bazaar.launchpad.net/~luke-campagnola/pyqtgraph/dev/view/head: [/widgets/RemoteGraphicsView.py](http://bazaar.launchpad.net/~luke-campagnola/pyqtgraph/dev/view/head:/widgets/RemoteGraphicsView.py)。请参阅“remoteSceneChanged”方法了解如何从共享内存中重建 QImage。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-28T02:57:47.863

根据[“Python、线程和 Qt：繁荣！” - Teijo Holzer (Kiwi Pycon 2019)](https://www.youtube.com/watch?v=ol5IuJyw-Tg) , [Multithreading with Qt / qthread - Giuseppe D'Angelo](https://www.youtube.com/watch?v=dcSsjxhazu0)和 Qt 文档，您不能从主线程外部调用以下对象：

1.  `QWidget`
2.  `QQuickItem`
3.  `QPixmap`
4.  通常，所有绘图/可见/小部件事件

因此，我怀疑传递`im`到`ImageQt.ImageQt(im)`辅助线程会导致问题。我建议在主线程中执行此操作，然后`Image.open`在您的`QThread`.

# vb.net - 以下需要实施什么

> ID：11941061
> 
> 赞同：-2
> 
> 时间：2012-08-13T19:34:50.300
> 
> 标签：vb.net, asp.net-mvc-3

我正在尝试在 VB 中的一个类中的方法中实现以下内容，但出现构建错误：

```
Public Sub sendMessage()
    Dim sUrl As String
    Dim sAPI_ID, sPassword, sUsername, sMobileNo, sText As String
    Dim oXMLHTTP, sPostData, sResult
    sUrl = "http://api.clickatell.com/http/sendmsg"
    sAPI_ID = "xxxx"
    sPassword = "xxxx"
    sUsername = "xxxx"
    sMobileNo = "xxxx"
    sText = "This is an example message"
    sPostData = "api_id=" & sAPI_ID
    sPostData = sPostData & "&user=" & sUsername
    sPostData = sPostData & "&password=" & sPassword
    sPostData = sPostData & "&to=" & sMobileNo
    sPostData = sPostData & "&text=" & sText
    oXMLHTTP = Server.CreateObject("Microsoft.XMLHTTP")
    oXMLHTTP.Open("POST", sUrl, False)
    oXMLHTTP.SetRequestHeader("Content-Type", "application/x-www-form-urlencoded")
    oXMLHTTP.Send(sPostData)
    sResult = oXMLHTTP.responseText
    oXMLHTTP = Nothing
    Response.Write(sResult)
End Sub 
```

以下两行加下划线，我认为缺少导入：

```
oXMLHTTP = Server.CreateObject("Microsoft.XMLHTTP") 
```

和

```
Response.Write(sResult) 
```

谁能告诉我我需要导入什么或缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:11:24.997

这些是旧 ASP 中内置的 COM 对象：

[http://msdn.microsoft.com/en-us/library/ms524716(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms524716(v=vs.90).aspx)

正如您在该 MSDN 页面上看到的那样，在 ASP.NET 中，`System.Web`命名空间中有提供等效功能的新类。可以在此处找到有关 .NET 中的新类的更多信息：

[http://msdn.microsoft.com/en-us/library/x6w6xys5(v=VS.71).aspx](http://msdn.microsoft.com/en-us/library/x6w6xys5(v=VS.71).aspx)

# android - jQuery Mobile / Phonegap - 选择菜单不会在 android 上打开

> ID：11941062
> 
> 赞同：3
> 
> 时间：2012-08-13T19:34:51.530
> 
> 标签：android, html, css, jquery-mobile, cordova

我正在使用 JQM 1.1.1 和 phonegap 2.0，我在选择菜单时遇到了这个问题。它们不会在 android 上打开（95% 的时间），但在 iOS 上可以正常工作。

我已经尝试了所有的修复（[webkit-backface-visibility](http://blogs.bytecode.com.au/glen/2011/07/14/eliminating-annoying-flicker-transitions-with.html)，从按钮中删除绝对/相对位置）但无济于事。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:58:15.493

这是 jquery mobile 上的已知错误，不幸的是他们还没有修复它。当您修复页眉或页脚并在其中使用选择框时，选择框在 android 中停止工作。如果您在固定页眉或页脚之外使用选择框，它将正常工作。

# php - 下拉隐藏值

> ID：11941065
> 
> 赞同：0
> 
> 时间：2012-08-13T19:35:08.113
> 
> 标签：php, javascript, html, css

我希望只有当用户选择一个月而不是空白值时才显示 1 的日期值，但它不起作用......我认为该功能是错误的。我希望只有在没有选择月份的情况下，当天下拉菜单中的 1 才显示无。请帮我....

```
<html>
<head>
<script type="text/javascript">
function show(x) {
var mon = document.getElementById(x).innerHTML
if (mon == "") {
document.getElementById("one").style.display="none";
} else {
document.getElementById("one").style.display="";
}
}
</script>

</head>

<body>
Calendar<br>
<hr align="left" width="200px"/>

--Year ------ Month ----- Day<br>
<select name="year">
<option value="defaulty"></option>
<option value="2012">2012</option>
<option value="2013">2013</option>
<option value="2014">2014</option>
<option value="2015">2015</option>
</select>

<select name="month" onchange="show(this)">
<option id="defaultm"></option>
<option id="January">January</option>
<option id="February">February</option>
<option id="March">March</option>
<option id="April">April</option>
<option id="May">May</option>
<option id="June">June</option>
<option id="July">July</option>
<option id="August">August</option>
<option id="September">September</option>
<option id="October">October</option>
<option id="November">November</option>
<option id="December">December</option>
</select>

<select name="day">
<option id="defaultd" value="defaultd"></option>
<option id="one" value="one" style="display:none">1</option>

</select>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T19:47:45.570

因此，您希望仅在正确选择月份的情况下才能使用日列？如果我对您的理解正确，这将起到作用。

```
<html>
<head>
    <script type="text/javascript">

        function show() {

            if (document.getElementById("month").selectedIndex != 0) {
                document.getElementById("day").disabled = false;
            }
            else {
                document.getElementById("day").disabled = true;
            }
        }
    </script>
</head>
<body>

    Calendar<br>
    <hr align="left" width="200px"/>
    <form actn="">
        --Year ------ Month ----- Day<br>
        <select name="year" id="year">
            <option value="defaulty"></option>
            <option value="2012">2012</option>
            <option value="2013">2013</option>
            <option value="2014">2014</option>
            <option value="2015">2015</option>
        </select>
        <select name="month" id="month" onchange="show()">
            <option value="defaultm"></option>
            <option value="January">January</option>
            <option value="February">February</option>
            <option value="March">March</option>
            <option value="April">April</option>
            <option value="May">May</option>
            <option value="June">June</option>
            <option value="July">July</option>
            <option value="August">August</option>
            <option value="September">September</option>
            <option value="October">October</option>
            <option value="November">November</option>
            <option value="December">December</option>
        </select>
        <select name="day" id="day" disabled="disabled">
            <option id="defaultd" value="defaultd"></option>
            <option id="one" value="one">1</option>
        </select>
    </form>
</body> 
```

# java - ItemListener.itemStateChanged(ItemEvent e)

> ID：11941068
> 
> 赞同：0
> 
> 时间：2012-08-13T19:35:21.220
> 
> 标签：java, swing, jcombobox, itemlistener

这个 API 有什么用？

几个月前我采用了它，当时我的想法是，一旦用户做出选择，我可以使用它来捕获 ComboBox 中的键盘和鼠标操作，以调用业务逻辑。作为一名开发人员，我只使用鼠标，幸福地无知，认为我的解决方案很好，直到测试人员参与进来，并实际尝试使用带有键盘的组合框。似乎 itemStateChanged() 对更改项目状态的含义有一种非常违反直觉的（无论如何对我来说）感觉。

当与鼠标一起使用时，用户可以使用鼠标在下拉列表上移动，下拉列表突出显示当前包含鼠标光标但不生成事件的组合框条目。该事件在用户实际单击某个项目时生成。这是非常直观的，也是我所期望的。

另一方面，使用键盘时，每次按下向下箭头都会生成一个 itemStateChanged 事件。这是违反直觉的，不是我想要的。我只想在用户通过按下 Enter 键来表明他的选择时才生成一个事件，表明已经做出了选择 - 即鼠标点击的模拟，而不是鼠标移动的模拟。有没有办法让组合框以这种方式运行，或者我不能使用 itemStateChanged 来捕获这些事件？

我还应该补充一点，ItemEvent 本身不包含任何可以帮助我消除歧义的内容。

更新：好的，这是问题的关键：如何让 Swing 将向下箭头通过组合框的下拉列表视为等同于在下拉列表的元素中移动鼠标？ItemListener 和 ActionListener 都将箭头键操作视为“选择”而不是导航。而我希望键盘类似于鼠标。我们的要求是让一切都与键盘一起工作。鼠标是一个不错的选择，这个应用程序的有经验的用户不会使用太多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:13:15.813

当用户选择或取消选择项目时，将调用[Javadoc 。](http://docs.oracle.com/javase/7/docs/api/java/awt/event/ItemListener.html#itemStateChanged%28java.awt.event.ItemEvent%29) `itemStateChanged(ItemEvent e)`你看到的是完全相同的行为。使用箭头键，每按下一个键，您就可以有效地选择（*同时取消选择*）组合中的一个特定项目。

对于您的情况，我认为您应该考虑将您的业务逻辑作为`JButton`该服务器的一部分来实现，以确认用户选择，或者尝试`FocusListener` 将`JComboBox`您的逻辑作为`public void focusLost(FocusEvent e)`. [这是一个教程](http://docs.oracle.com/javase/tutorial/uiswing/events/focuslistener.html)，可帮助您获得更好的图片`FocusListener`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T20:07:39.320

从`JComboBox`文档

> aListener 会在选中项发生变化时收到一两个 ItemEvents

现在，我将第一个声明措辞有点轻，但这是说，当用户选择和项目（从下拉列表中）时，您将至少收到一次通知，可能两次。

你真正想要使用的是`ActionListener`

> 做出选择后，ActionListener 将收到一个 ActionEvent。如果组合框是可编辑的，那么当编辑停止时会触发一个 ActionEvent。

# winapi - 操作 ShellItemArray

> ID：11941072
> 
> 赞同：2
> 
> 时间：2012-08-13T19:35:26.663
> 
> 标签：winapi, windows-shell

如何从给定的 ShellItemArray 中删除项目？或者，从当前数组的特定 shell 项创建一个新的 ShellItemArray？没有 SHCreateShellItemArray*** 函数可以帮助我（有一个名为 SHCreateShellItemArrayFromShellItem 的函数，但它从单个 shell 项创建一个数组，而不是几个）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:54:56.293

我不认为您可以修改现有数组而不直接弄乱内存中的对象，因此您最好的选择可能是使用[SHCreateShellItemArrayFromIDLists](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762146%28v=vs.85%29.aspx)创建一个新数组。您可以在构建 pidl 数组时使用[SHGetIDListFromObject 。](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762184%28v=vs.85%29.aspx)

# ruby-on-rails - 无法在 ruby 中通过 SSL 读取服务器响应

> ID：11941073
> 
> 赞同：0
> 
> 时间：2012-08-13T19:35:29.033
> 
> 标签：ruby-on-rails, ruby, ssl

我的应用程序中有一个自定义类，它使用服务器创建一个套接字并从服务器读取输出。问题是输出不正确。因为我看到的输出是在 ssl 加密下，当我读到它时它是错误的。

这是我创建 ssl 连接的女巫的方法

```
 def self.feedback_connection
    raise "The path to your pem file is not set. (APNS.pem = /path/to/cert.pem)" unless self.pem
    raise "The path to your pem file does not exist!" unless File.exist?(self.pem)

    context      = OpenSSL::SSL::SSLContext.new
    context.cert = OpenSSL::X509::Certificate.new(File.read(self.pem))
    context.key  = OpenSSL::PKey::RSA.new(File.read(self.pem), self.pass)

    fhost = self.host.gsub('gateway','feedback')
    puts fhost

    sock         = TCPSocket.new(fhost, 2196)
    sock.setsockopt Socket::SOL_SOCKET, Socket::SO_KEEPALIVE, true
    ssl          = OpenSSL::SSL::SSLSocket.new(sock,context)
    ssl.sync = true
    ssl.connect

    return sock, ssl
  end 
```

然后，在我的主要方法中

```
 def self.feedback
    sock, ssl = self.feedback_connection

    apns_feedback = []

    while line = sock.gets # Read lines from the socket << the problem is here
      line.strip!
      f = line.unpack('N1n1H140')       
      apns_feedback << [Time.at(f[0]), f[2]]
    end

    ssl.close
    sock.close

    return apns_feedback
  end 
```

在线：`while line = sock.gets`如果我使用`sock.gets`我得到编码的字符串。如果我使用`ssl.read(38)`this 返回 null。

我当时需要读取 38 个字节，在这种情况下：

```
1..4 => timestamp (big endian)
5..6 => length (big endian)
7..38 => token (binary) quoting: The token in binary format. 
```

所以我的问题是：使用 ssl 我根本无法读取，每次使用套接字时我得到一个不同的字符串

我该怎么做才能阅读正确的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:01:57.493

发现了问题。

服务器没有发送任何东西，因为 ssl 协议，ssl 中的空响应在没有 ssl 的情况下是不可读的。

检查后，一切正常。

# visual-studio-2010 - Visual Studio 新文件具有子应用程序相关 url

> ID：11941077
> 
> 赞同：1
> 
> 时间：2012-07-12T10:45:17.463
> 
> 标签：visual-studio-2010, iis-7

我有一个包含多个项目的典型解决方案。

在 IIS 中，我配置了一个新网站来访问我的开发区域。在此之下，我有另一个子应用程序，指向同一个地方。（这允许我拥有 mysite.com 和 mysite.com/au/）

这一切都很好。

我现在遇到的问题是，当我创建一个新文件（比如一个 aspx 页面）并指定一个母版页（可能还有其他场景）时，所创建的相对链接`~/au/masterpage.master`不是`~/masterpage.master`人们所期望的。

除了没有加载到母版页的 CPH 中（非常烦人），这也破坏了我的页面。所以我的问题是：有没有人遇到过这种情况，他们是如何解决的？

**编辑**

我发现如果我删除了子应用程序并重新启动 VS，下次创建文件时它会按预期工作（没有`/au/`. 但是，如果我可以将子应用程序留在原处，那就太好了。

# c# - 为什么这是一个无效的差异？

> ID：11941080
> 
> 赞同：6
> 
> 时间：2012-08-13T19:35:48.890
> 
> 标签：c#, silverlight-4.0, covariance

我正在尝试构建的确切代码：

```
 public interface IMapContainer<out T> where T : MapRoomBase
    {
        String GetName();

        IEnumerable<T> GetRooms();
    } 
```

我收到此错误：无效方差：类型参数“T”必须在“MapLibrary.IMapContainer.GetRooms()”上始终有效。“T”是协变的。

我的印象是这将是有效的，因为 IEnumerable 只是返回项目，并且不能添加任何项目。为什么这不安全+有效？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T19:41:00.060

确保您不是针对旧的框架版本。`IEnumerable<T>`从 .NET 4 开始是协变的。您的代码在 .NET 4 下编译良好，但由于您在 .NET 3.5 上提到的错误而失败。

# tsql - T-SQL 函数以驼峰式命名一个值

> ID：11941082
> 
> 赞同：3
> 
> 时间：2012-08-13T19:35:51.723
> 
> 标签：tsql

我正在编写一个实用程序脚本，它将从数据库表中获取一列并生成一段 javascript 代码。我想要的是返回一个像“First_Name”这样的值并将它的骆驼大小写为“firstName”。有没有一种简单的方法可以在 SQL 中做到这一点？我正在使用 T-SQL。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T19:42:02.507

这个怎么样：

```
CREATE FUNCTION [dbo].[udfCamel]
(
    @Name   VARCHAR(50)
)
RETURNS varchar(50)
AS
BEGIN
    declare @newstring varchar(50)

    set @newstring = stuff(replace(@Name, '_', ''), 1, 1, lower(left(@Name, 1)))

    RETURN @newstring
END 
```

然后当你执行它时：

```
declare @str varchar(50)
set @str = 'First_Name'
select dbo.udfCamel(@str) 
```

返回：`firstName`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-21T18:34:17.370

要转换为“camelCase”（不是 CamelCase），这应该有效：

```
ALTER FUNCTION dbo.camelCase(
 @input VARCHAR(8000)
)
RETURNS VARCHAR(8000)
AS
BEGIN
 SET @input = LTRIM(RTRIM(@input))

 DECLARE
  @i INT = 0
 ,@len INT = LEN(@input)
 ,@upper BIT = 0
 ,@output varchar(8000) = ''
 ,@char NCHAR
 ,@ascii INT

 WHILE @i < @len BEGIN
  SELECT
   @i = @i + 1
  ,@char = SUBSTRING(@input, @i, 1)
  ,@ascii = ASCII(@char)

  IF NOT ((@ascii >= 65 AND @ascii <= 90) OR (@ascii >= 97 AND @ascii <= 122) OR (@ascii 
 >= 48 AND @ascii <= 57)) BEGIN
   SET @upper = 1
   CONTINUE
  END

  IF (@upper = 1) SET @output = @output + UPPER(@char)
  IF (@upper = 0) SET @output = @output + LOWER(@char)
  SET @upper = 0
 END

 RETURN @output
END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T19:43:15.377

您可以使用标量函数返回骆驼大小写。这也将处理小写场景。这是一个可能对您有用的示例：

```
DECLARE @MyText VARCHAR(MAX)

SET @MyText = 'Convert_This_to_Camel_Case'
WHILE(CHARINDEX('_',@MyText) > 0)
BEGIN
    SET @MyText = REPLACE(@MyText,'_' +SUBSTRING(@MyText,(CHARINDEX('_',@MyText) + 1),1), UPPER(SUBSTRING(@MyText,(CHARINDEX('_',@MyText) + 1),1)))
END
    SELECT LOWER(SUBSTRING(@MyText,1,1))+ SUBSTRING(@MyText, 2, LEN(@MyText) -1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-20T17:28:26.760

我只是碰巧完成了类似的工作并且仍然启动了 SQL，所以我想我会在这个线程上测试选定的答案，但我并没有完全得到我想要的结果，所以我想我会提供另一种选择

```
//dbo.udfCamel is script above set as answer
//dbo.CamelCase is script being added below 
SELECT dbo.CamelCase('microSoft sql server'), dbo.udfCamel('microSoft sql server')

//results:
//   dbo_CamelCase           dbo_udfCamel
//   microsoftSqlServer      microSoft sql server

CREATE FUNCTION [dbo].[CamelCase]
   (@Str varchar(8000))
   RETURNS varchar(8000) AS
   BEGIN
     DECLARE @Result varchar(2000)
     SET @Str = LOWER(@Str) + ' '
     SET @Result = ''
     WHILE 1=1
        BEGIN
        IF PATINDEX('% %',@Str) = 0 BREAK
        SET @Result = @Result + UPPER(Left(@Str,1))+ SubString  (@Str,2,CharIndex(' ',@Str)-1)
        SET @Str = SubString(@Str, CharIndex(' ',@Str)+1,Len(@Str))
    END
    SET @Result = Left(@Result,Len(@Result))
    SET @Result = REPLACE(@Result, ' ', '')
    SET @Result = LOWER(SUBSTRING(@Result, 1, 1)) + SUBSTRING(@Result, 2, LEN(@Result)-1)

    RETURN @Result
    END 
```

# google-analytics - 在第三方网站上跟踪像素的解决方案？

> ID：11941083
> 
> 赞同：0
> 
> 时间：2012-08-13T19:35:56.710
> 
> 标签：google-analytics, analytics, tracking, ads

我的业务与我们向其发送流量的附属公司合作，当在他们的网站上发生注册时，我们会获得报酬。我们需要一种方法来确认他们向我们报告的内容是准确且可信的 - 因此我们为他们提供了一个托管在我们网站上的像素，该像素将在他们的转化页面上实施。不幸的是，数据似乎非常不准确，他们说这是我们的像素，而不是他们的报告系统。他们建议我们给他们买一个“Google Pixel，如果可能的话 javascript”。

我一直在试图弄清楚如何/在哪里执行此操作或进行设置。任何线索，伙计们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T20:27:35.013

基本上你需要做的是设置你的实现来跟踪其他域： [https ://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite)

向他们提供 GA 提供给您的 javascript 代码段，然后为他们的转化页面（感谢页面？）设置转化目标。我会让他们将这段代码放在通往转化页面的每个页面上，然后在目标步骤中声明它，以防您计划分析您的流量可能在漏斗报告中下降的位置。

编辑：重要的是他们没有自己的 GA 帐户来跟踪页面，因为（来自 Google）：

[https://developers.google.com/analytics/resources/concepts/gaConceptsCookies#top](https://developers.google.com/analytics/resources/concepts/gaConceptsCookies#top)

> 给定页面上的多个分析帐户
> 
> 一些用户希望在多个 Analytics 帐户中跟踪同一页面或一组页面。>Analytics 旨在有效地处理单个帐户到网络资产 > 关系。如果您有多个帐户跟踪同一网络资源（例如页面或 > 页面集），则两个帐户将读取并设置相同的 cookie 集。一般不推荐这种设置。

# sql - 顺序时间的 SQL 日期更新查询

> ID：11941087
> 
> 赞同：1
> 
> 时间：2012-08-13T19:36:11.250
> 
> 标签：sql, sql-server, date

我有一个带有文本格式日期字段的数据库。我想更新我表中的一些日期。所以，基本上，当前日期应该更改为新日期，问题是我至少有 1000 条记录需要更新。唯一的优点是我的日期字段中的时间是连续的。

我尝试了以下查询：

```
UPDATE my_table set Date='05-10-2012 00:00:00' WHERE Date like '%04-26-2012%' 
```

但是，它忽略了我的日期字段中的时间部分。

为了说明我的意图

```
 Current Date                     New Date
04-26-2012 02:45:00             05-10-2012 01:19:00
04-26-2012 02:47:00             05-10-2012 01:20:00
04-26-2012 02:48:00             05-10-2012 01:21:00
04-26-2012 02:49:00             05-10-2012 01:22:00
04-26-2012 02:50:00             05-10-2012 01:23:00 
```

那么，如何使用我想要的时间部分将我的日期更新为新日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T19:51:25.123

您可以在更新语句之前声明一个变量。到开始时间前一分钟。然后在设置字段之前增加更新语句中的变量。我在下面粘贴了一个示例。

```
declare @testData table (oldDate datetime)

insert into @testData (oldDate) values ('04-26-2012 02:45:00')

insert into @testData (oldDate) values ('04-26-2012 02:47:00')

insert into @testData (oldDate) values ('04-26-2012 02:48:00')

insert into @testData (oldDate) values ('04-26-2012 02:49:00')

insert into @testData (oldDate) values ('04-26-2012 02:50:00')

-- Set a default start date.

declare @newStartDate as dateTime

set @newStartDate = '05-10-2012 01:18:00'

update @testData set @newStartDate = DATEADD(MINUTE,1,@newStartDate),
    oldDate = @newStartDate

select * from @testData 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T19:57:36.037

抛开所有数据类型问题，来吧...

```
declare @from datetime, @thru datetime, @dateSeed datetime;
set @from = '4/26/2012';
set @thru = '4/27/2012';
set @dateSeed = '5/10/2012 1:19:00';

with cte as (
    select
        Date,
        rn = row_number() over(order by Date)
    from
        my_table
    where
            Date >= @from and Date < @thru
        --Date like '%04-26-2012%'
)

update cte set
    --110 = USA m/d/y format + 108 = hh:mm:ss 24 hour format
    --Date = convert(varchar(10), dateadd(mi, rn-1, @dateSeed), 110) + ' ' + convert(varchar(8), dateadd(mi, rn-1, @dateSeed), 108)
   Date = dateadd(mi, rn-1, @dateSeed) 
```

# windows-phone-7 - 什么是 Windows Phone 7.1 开始屏幕磁贴边距？

> ID：11941088
> 
> 赞同：2
> 
> 时间：2012-08-13T19:36:16.580
> 
> 标签：windows-phone-7

我试图弄清楚 WP7.1 开始屏幕图块的默认边距是多少，更具体地说，是前两个图块的确切位置，从那里我可以找出其余部分。另外，我想知道在纵横比为 480*800 的设备上设计时明确设置这些值是否会影响在纵横比为 340*480 的设备（或任何新设备）上的外观？

另外，如果有人知道，由于将引入更多的瓷砖尺寸，这些边距是否会在 WP8 中发生变化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T19:45:13.940

使用模拟器，您可以[制作屏幕截图](http://msdn.microsoft.com/en-us/library/windowsphone/develop/gg442300%28v=vs.92%29.aspx)并计算像素：

![截屏](../Images/1ba84942a054ad34c4c5fa424147b86c.png)

**瓷砖之间有 12 个像素**

**从左边到第一个图块 28 像素**

**从顶部到第一个图块 93 像素**

据我所知，目前没有关于新设备的信息。

# php - PHP jQuery 表单提交

> ID：11941092
> 
> 赞同：0
> 
> 时间：2012-08-13T19:36:37.800
> 
> 标签：php, jquery, forms

我已经构建了一个简单的表单，我想在不刷新页面的情况下发送它，因此我使用 jQuery。当我提交表单但 process.php 报告数据未转换时出现问题，并且 process.php 打印消息“未收到帖子”。这是表单文件的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1255">
<title>Insert title here</title>
</head>
<script type="text/javascript">
$(function(){
      $('#submit').click(function(){
          var getField = $("#field").val();
          $.ajax({
             url: 'process.php' , 
             type: 'POST',
             data: 'data: ' + getField,
             success: function(result){     
               $('#container').text('<p>' + result + '</p>')      
             }
          });   
          return false;     
       });
    });
</script>

<body>

<div id="container">
<form method="post" action="process.php">
<input name="field" id="field" type="text" />
<input type="submit" value="submit" id="submit" />
</form>
</div>

</body>
</html> 
```

这是 process.php 代码：

```
<?php
if($_POST){
    echo $_POST['field'];
}
else
    echo "no post received";
?> 
```

你知道 jQuery / 表单有什么问题吗？欢迎任何建议，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T19:40:57.733

看起来你`data`的格式不正确。它应该是一个完整的 JavaScript 对象：

```
data: '{ data: "' + getField + '"}', 
```

请参阅[http://api.jquery.com/jQuery.ajax/#entry-examples](http://api.jquery.com/jQuery.ajax/#entry-examples)

或者，更方便的是，尝试使用该[`.serialize()`](http://api.jquery.com/serialize/)方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T19:41:36.903

```
data: 'data: ' + getField 
```

将 getField 的值作为“数据”而不是“字段”发布到 process.php，因此您需要获取 $_POST['data'] 的值，尽管将变量命名为“数据”通常不是一个好主意。您可能还想查找 jQuery post 函数，该函数正是为您正在做的事情而设计的。

# google-apps-script - 如何向谷歌文档添加侧窗格和注释锚？

> ID：11941096
> 
> 赞同：1
> 
> 时间：2012-08-13T19:37:15.383
> 
> 标签：google-apps-script, google-docs

作为 Google Docs 编程的新手，我将不胜感激有关遵循要求的可行性的一些指导，以及一些指向正确的 Google Docs/Apps 文档的指针，以便开始。

从功能上讲，我想在我的 Google Docs 文档的右侧实现一个注释窗格。我的目标是能够用想法、待办事项等来注释文本。并在右窗格中编辑与这些注释相关的描述，以保持文档清晰。显然，这样的注释描述必须是折叠的。

以编程方式我必须

*   在 Google Doc 文档旁边添加一个窗格
*   发现何时添加了特殊的“标记字符串”，例如“一些文本 {annotate:Remember-XYZ} 更多文本”。
*   锚定文档中的注释
*   保持注释相对于它们的锚点流动。

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T18:26:25.720

DocumentApp 最近引入了向 google 文档添加菜单和侧边栏项目的功能。有关介绍，请参阅[扩展 Google 文档](https://developers.google.com/apps-script/guides/docs)。

# php - PHP XML 解析到 MySQL

> ID：11941100
> 
> 赞同：0
> 
> 时间：2012-08-13T19:37:35.837
> 
> 标签：php, mysql, xml, cron

我的问题更多地基于理论而不是语法，但任何语法建议都非常受欢迎。我的项目范围更大，范围更小。我将解释两者，但我最关心的是较小的范围。欢迎任何有关更大范围的建议。

我需要完成的事情的简写（较小的范围）：

解析多个 (2-4) xml 文件。以重复出现的单个元素为目标。从每次出现时将该元素（字符串）中的数据插入到 mySQL 中。从数据库中读回插入了多少行该数据（我只需要计算该元素在每个文件中出现的次数，我不会立即关注元素中的数据）。
我仍然需要存储数据，但我最终只关心元素在每个 xml 文件中出现的次数。然后我需要回显每个 xml 文件的总和，并最终通过电子邮件发送结果。

对于更大的范围：最终这个脚本需要自动化。它需要每小时一次，以查找存储在本地服务器上、插入到 mySQL 中的这些 xml 文件的新出现，然后回显该小时的新总和。我对此的想法是 cron 工作。

我知道这是一个非常重要的问题，但任何帮助将不胜感激。提前感谢任何帮助/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T19:48:05.457

我的建议是开始编写脚本，设置数据库连接，使用[SimpleXML](http://www.php.net/manual/en/simplexml.examples-basic.php)，是的，除非您可以使用有机流量触发脚本，否则只需 crontab 即可。

这并不难，只是它是一个劳动密集型的脚本编写的事实。

但是你可以做这样的事情（伪代码）......

```
$XML = new SimpleXMLElement($xmlstr);

    foreach($XML->elements as $XML)
    {
     if(isset($XML->tag_you_are_looking_for))
     {
      //Insert $XML->tag_you_are_looking_for to DB
     }
    } 
```

对于多个文件，只需循环您创建的解析器类。对于远程文件，首先使用[cURL](http://us.php.net/manual/en/curl.examples-basic.php)获取它们。

我的建议总体上只是从这些事情开始，如果您遇到任何更具体的问题，请单独提出这些问题。

# scala - Play 2 Scala - 使用 Iteratee 上传大 CSV 文件以响应式处理每一行的最佳方式

> ID：11941102
> 
> 赞同：11
> 
> 时间：2012-08-13T19:37:43.963
> 
> 标签：scala, playframework, iterate

我想使用 Play2 在 elasticsearch 上上传一个非常大的 CSV 文件（数百万行）。我编写了以下运行良好的代码。

我对跳过第一块中的 http 响应标头的方式不满意。应该有一种方法可以将这个 iteratee 与第一个 Iteratee 链接起来，跳过 http 标头并直接切换到 Done 状态，但我还没有找到方法。

如果有人可以帮忙

```
object ReactiveFileUpload extends Controller {
  def upload = Action(BodyParser(rh => new CsvIteratee(isFirst = true))) {
    request =>
      Ok("File Processed")
  }
}

case class CsvIteratee(state: Symbol = 'Cont, input: Input[Array[Byte]] = Empty, lastChunk: String = "", isFirst: Boolean = false) extends Iteratee[Array[Byte], Either[Result, String]] {
  def fold[B](
               done: (Either[Result, String], Input[Array[Byte]]) => Promise[B],
               cont: (Input[Array[Byte]] => Iteratee[Array[Byte], Either[Result, String]]) => Promise[B],
               error: (String, Input[Array[Byte]]) => Promise[B]
               ): Promise[B] = state match {
    case 'Done =>
      done(Right(lastChunk), Input.Empty)

    case 'Cont => cont(in => in match {
      case in: El[Array[Byte]] => {
        // Retrieve the part that has not been processed in the previous chunk and copy it in front of the current chunk
        val content = lastChunk + new String(in.e)
        val csvBody =
          if (isFirst)
            // Skip http header if it is the first chunk
            content.drop(content.indexOf("\r\n\r\n") + 4)
          else content
        val csv = new CSVReader(new StringReader(csvBody), ';')
        val lines = csv.readAll
        // Process all lines excepted the last one since it is cut by the chunk
        for (line <- lines.init)
          processLine(line)
        // Put forward the part that has not been processed
        val last = lines.last.toList.mkString(";")
        copy(input = in, lastChunk = last, isFirst = false)
      }
      case Empty => copy(input = in, isFirst = false)
      case EOF => copy(state = 'Done, input = in, isFirst = false)
      case _ => copy(state = 'Error, input = in, isFirst = false)
    })

    case _ =>
      error("Unexpected state", input)

  }

  def processLine(line: Array[String]) = WS.url("http://localhost:9200/affa/na/").post(
    toJson(
      Map(
        "date" -> toJson(line(0)),
        "trig" -> toJson(line(1)),
        "code" -> toJson(line(2)),
        "nbjours" -> toJson(line(3).toDouble)
      )
    )
  )
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-01T10:47:12.627

要将两个迭代器链接在一起，请使用`flatMap`.

```
val combinedIteratee = firstIteratee.flatMap(firstResult => secondIteratee) 
```

或者，使用 for 理解：

```
val combinedIteratee = for {
  firstResult <- firstIteratee
  secondResult <- secondIteratee
} yield secondResult 
```

您可以使用 flatMap 将任意数量的迭代排序在一起。

您可能想要执行以下操作：

```
val headerAndCsvIteratee = for {
  headerResult <- headerIteratee
  csvResult <- csvIteratee
} yield csvResult 
```

# wt - 为什么wt总是使用post而不使用get方法？

> ID：11941108
> 
> 赞同：2
> 
> 时间：2012-08-13T19:38:06.783
> 
> 标签：wt

我正在尝试使用 firebug 的 Wt 示例，我看到 Wt 总是使用 POST 方法而不是 GET 方法。我会知道这是否更有效，或者是否有另一种使用 GET 而不是 POST 的方法。

# java - 多次访问自定义对象的原子属性

> ID：11941111
> 
> 赞同：2
> 
> 时间：2012-08-13T19:38:13.213
> 
> 标签：java, optimization

哪个函数更快（p 是 MyObject 的 atomic public int 属性）：

```
public static boolean check(MyObject o1, List<MyObject> list) {

    int p = o1.p;
    for (int i = 0; i < 1000000; i++) {
        MyObject o = list.get(i);
        if (o.p < p) return false;
    }

    return true;
} 
```

或者

```
public static boolean check(MyObject o1, List<MyObject> list) {

    for (int i = 0; i < 1000000; i++) {
        MyObject o = list.get(i);
        if (o.p < o1.p) return false;
    }

    return true;
} 
```

那么通过使用局部变量 p 我们缓存对象属性调用还是由编译器优化内联完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T19:40:56.457

编译器`javac`几乎没有优化。

然而，JIT 可以显着优化代码，包括将字段存储在寄存器中，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T19:47:05.630

虽然不是直接在主题上，但您可以通过使用“foreach”循环来改进样式并实现更*恒定的速度：*

```
for (MyObject o : list) {
    if (o.p < o1.p) return false;
} 
```

切换到 foreach 的测试结果：

*   `ArrayList`慢 10%
*   `LinkedList`仅使用 100000 个元素，速度提高 700 倍

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T11:03:39.067

简短的回答：这取决于

稍长 答案：这取决于编译器、VM 和 VM 的设置。

背景：在服务器模式下使用 HotSpot VM（最常见的风格）将使两种变体相等，因为 VM 在服务器模式下会循环不变提升。在客户端模式下，如果 VM 认为值得优化，这*可能会完成*，*可能不会完成*，甚至*可以稍后完成。*

[循环不变提升](http://en.wikipedia.org/wiki/Compiler_optimization#Loop_optimizations)是循环优化之一，它在大多数现代编译器（或者在 Java 的情况下，VM）中实现。至于 javac 生成的代码：如果 VM 没有进一步优化，您的第一个代码片段将执行得更快。

```
public static boolean check(Test$MyObject, java.util.List);
  Code:
   0:   aload_0
   1:   getfield        #7; //Field Test$MyObject.p:I
   4:   istore_2
   5:   iconst_0
   6:   istore_3
   7:   iload_3
   8:   ldc     #4; //int 1000000
   10:  if_icmpge       42
   13:  aload_1
   14:  iload_3
   15:  invokeinterface #11,  2; //InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
   20:  checkcast       #5; //class Test$MyObject
   23:  astore  4
   25:  aload   4
   27:  getfield        #7; //Field Test$MyObject.p:I
   30:  iload_2
   31:  if_icmpge       36
   34:  iconst_0
   35:  ireturn
   36:  iinc    3, 1
   39:  goto    7
   42:  iconst_1
   43:  ireturn 
```

--

```
public static boolean check(Test$MyObject, java.util.List);
  Code:
   0:   iconst_0
   1:   istore_2
   2:   iload_2
   3:   ldc     #4; //int 1000000
   5:   if_icmpge       38
   8:   aload_1
   9:   iload_2
   10:  invokeinterface #11,  2; //InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
   15:  checkcast       #5; //class Test$MyObject
   18:  astore_3
   19:  aload_3
   20:  getfield        #7; //Field Test$MyObject.p:I
   23:  aload_0
   24:  getfield        #7; //Field Test$MyObject.p:I
   27:  if_icmpge       32
   30:  iconst_0
   31:  ireturn
   32:  iinc    2, 1
   35:  goto    2
   38:  iconst_1
   39:  ireturn 
```

如您所见，第二个示例中第 20 行的 getfield 操作位于第一个示例中的第 1 行，并且位于循环之外（变体 1 中的第 7 到 39 行和变体 2 中的第 2 到 35 行），因此仅执行ondced 而不是 1000000 次。

# java - Dialog中EditText焦点的咨询

> ID：11941114
> 
> 赞同：-2
> 
> 时间：2012-08-13T19:38:36.693
> 
> 标签：java, android

我尝试专注于对话框中的 EditText

主要形式：

```
data myDialog = new data(context, "MyDialog", new OnReadyListener());
myDialog.show(); 
```

在对话框中：

```
public EditText CC;

public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.data);
        CC = (EditText) findViewById(R.id.txtQty);
        CC.requestFocus(); 
```

在xml文件中我放了这个：

```
 <EditText
            android:id="@+id/txtQty"
            android:layout_width="match_parent"
            android:layout_height="40dp"
            android:textSize="14dp"
            android:textStyle="bold"
            android:ems="10"
            android:gravity="left"
            android:inputType="numberDecimal"
            android:selectAllOnFocus="true"
             >
            <requestFocus />
        </EditText> 
```

但我没有专注于我的 EditText，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:28:12.263

我假设那`data`是`Dialog`. 在这种情况下，请尝试`EditText`在显示对话框后请求将注意力集中在您的身上。

例如，您可以尝试`show()`使用如下实现覆盖该方法：

```
@Override
public void show()
{
    super.show();
    CC.requestFocus();
} 
```

# sql - 获取数据库中唯一约束和索引的列表

> ID：11941118
> 
> 赞同：7
> 
> 时间：2012-08-13T19:39:23.213
> 
> 标签：sql, sql-server, sql-server-2008

我必须获取所有唯一键约束的列表和特定数据库的索引。我正在做这样的事情：

```
SELECT * FROM sys.sysobjects WHERE type!='u' AND name LIKE <tablename> 
```

只是想确认这是否是正确的方法，还是有更好的方法来做同样的事情？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T19:52:37.360

由于唯一约束在幕后作为索引实现，因此您可以直接从 sys.indexes 获取所有这些信息：

```
SELECT
  [schema] = OBJECT_SCHEMA_NAME([object_id]),
  [table]  = OBJECT_NAME([object_id]),
  [index]  = name, 
  is_unique_constraint,
  is_unique,
  is_primary_key
FROM sys.indexes
-- WHERE [object_id] = OBJECT_ID('dbo.tablename'); 
```

对所有数据库重复（并且可能没有特定表的过滤器）：

```
DECLARE @sql NVARCHAR(MAX) = N'';

SELECT @sql += 'SELECT db = ' + name + ',
    [schema] = OBJECT_SCHEMA_NAME([object_id]),
    [table]  = OBJECT_NAME([object_id]),
    [index]  = name, 
    is_unique_constraint,
    is_unique,
    is_primary_key
  FROM ' + QUOTENAME(name) + '.sys.indexes;'
FROM sys.databases
WHERE database_id BETWEEN 4 AND 32766;

EXEC sp_executesql @sql; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-30T05:28:35.223

其他答案没有为我返回完整的列表。此查询对我有用，可以返回不是主键或系统表的所有唯一索引：

```
select i.name as index_name, o.name as object_name
from sys.indexes i
    join sys.objects o on i.object_id= o.object_id
where (i.is_unique_constraint = 1 OR i.is_unique = 1) 
    and i.is_primary_key = 0 and o.type_desc <> 'SYSTEM_TABLE' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T19:46:21.093

唯一约束在 sys.objects 中由类型“UQ”表示

```
 select name from sys.objects where type='UQ' 
```

获取索引

```
 select i.name, o.name from sys.indexes i
inner join sys.objects o on i.object_id= o.object_id 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T19:51:57.413

您可以从 sys.indexes 获取唯一键约束和索引。具体来说，独特的约束：

```
select * from sys.indexes where is_unique_constraint = 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-23T08:19:28.367

我一直在寻找解决方案 - 查找特定表上的所有唯一索引。我以这个问题为出发点。

最后我整理了自己的脚本，我会在这里分享。

这个脚本的好处是它给出了索引的列。

所有的荣耀都归于原始脚本的作者，链接包含在代码中。

```
--====================================================================================
-- Display SQL Server Index Details – Type, Key Columns, Included Columns
-- https://www.ptr.co.uk/blog/sql-server-display-indexes-their-columns-included-columns
--====================================================================================

--Display all indexes along with key columns, included columns and index type

DECLARE @TempTable AS TABLE (SchemaName VARCHAR(100), 
                             ObjectID INT, 
                             TableName VARCHAR(100), 
                             IndexID INT, 
                             IndexName VARCHAR(100), 
                             ColumnID INT, 
                             column_index_id INT, 
                             ColumnNames  VARCHAR(500), 
                             IncludeColumns  VARCHAR(500), 
                             NumberOfColumns INT, 
                             IndexType  VARCHAR(20),
                             IS_UNIQUE BIT,
                             Is_Primary_Key BIT,
                             Is_Unique_Constraint BIT,
                             LastColRecord INT);

WITH CTE_Indexes (SchemaName, ObjectID, TableName, IndexID, IndexName, 
                  ColumnID, column_index_id, ColumnNames, IncludeColumns, 
                  NumberOfColumns, IndexType, Is_Unique,Is_Primary_Key,Is_Unique_Constraint)
AS
(
SELECT s.name, t.object_id, t.name, i.index_id, i.name, c.column_id, ic.index_column_id,
        CASE ic.is_included_column WHEN 0 THEN CAST(c.name AS VARCHAR(5000)) ELSE '' END, 
        CASE ic.is_included_column WHEN 1 THEN CAST(c.name AS VARCHAR(5000)) ELSE '' END, 
        1, i.type_desc,I.is_unique,i.Is_Primary_Key,i.Is_Unique_Constraint 
    FROM  sys.schemas AS s
        JOIN sys.tables AS t ON s.schema_id = t.schema_id
            JOIN sys.indexes AS i ON i.object_id = t.object_id
                JOIN sys.index_columns AS ic 
                  ON ic.index_id = i.index_id 
                 AND ic.object_id = i.object_id
                    JOIN sys.columns AS c 
                      ON c.column_id = ic.column_id 
                     AND c.object_id = ic.object_id
                     AND ic.index_column_id = 1
UNION ALL
SELECT s.name, t.object_id, t.name, i.index_id, i.name, c.column_id, ic.index_column_id,
        CASE ic.is_included_column WHEN 0 THEN CAST(cte.ColumnNames + ', ' + c.name AS VARCHAR(5000))  
                                          ELSE cte.ColumnNames END, 
        CASE  
            WHEN ic.is_included_column = 1 AND cte.IncludeColumns != '' 
                THEN CAST(cte.IncludeColumns + ', ' + c.name AS VARCHAR(5000))
            WHEN ic.is_included_column =1 AND cte.IncludeColumns = '' 
                THEN CAST(c.name AS VARCHAR(5000)) 
            ELSE '' 
        END,
        cte.NumberOfColumns + 1, i.type_desc,I.is_unique,I.Is_Primary_Key,i.Is_Unique_Constraint 
    FROM  sys.schemas AS s
        JOIN sys.tables AS t ON s.schema_id = t.schema_id
            JOIN sys.indexes AS i ON i.object_id = t.object_id
                JOIN sys.index_columns AS ic 
                  ON ic.index_id = i.index_id 
                 AND ic.object_id = i.object_id
                    JOIN sys.columns AS c 
                      ON c.column_id = ic.column_id 
                     AND c.object_id = ic.object_id 
                    JOIN CTE_Indexes cte 
                      ON cte.Column_index_ID + 1 = ic.index_column_id  
                    --JOIN CTE_Indexes cte ON cte.ColumnID + 1 = ic.index_column_id  
                     AND cte.IndexID = i.index_id AND cte.ObjectID = ic.object_id

)
INSERT INTO  @TempTable 
SELECT *, 
  RANK() OVER (PARTITION BY ObjectID, IndexID ORDER BY NumberOfColumns DESC) AS LastRecord 
  FROM CTE_Indexes AS cte;

SELECT SchemaName, TableName, IndexName, ColumnNames, IncludeColumns, IndexType, Is_Unique,Is_Primary_Key,Is_Unique_Constraint   
  FROM @TempTable
 WHERE LastColRecord = 1
 --WHERE T.object_id=OBJECT_ID('dbo.invoiceSelectedOptionalFees')
 --AND objectid=OBJECT_ID('dbo.accountTransaction')
 AND objectid=OBJECT_ID('dbo.invoiceSelectedOptionalFees')
ORDER BY objectid, TableName, indexid, IndexName 
```

在上面的示例中，我使用了下表：

```
IF OBJECT_ID('[dbo].[invoiceSelectedOptionalFees]') IS NOT NULL 
DROP TABLE [dbo].[invoiceSelectedOptionalFees] 
GO
CREATE TABLE [dbo].[invoiceSelectedOptionalFees] ( 
[Id]         INT              IDENTITY(1,1)                 NOT NULL,
[invoiceId]  INT                              NOT NULL,
[feeTypeId]  INT                              NOT NULL,
CONSTRAINT   [PK__invoiceS__3214EC0703C8693D]  PRIMARY KEY CLUSTERED    ([Id] asc),
CONSTRAINT   [CK_invoiceSelectedOptionalFees_invoice_feeType]  UNIQUE      NONCLUSTERED ([invoiceId] asc, [feeTypeId] asc),
CONSTRAINT   [FK_invoiceSelectedOptionalFees_invoice]                      FOREIGN KEY ([invoiceId]) REFERENCES [invoice]([invoiceID]),
CONSTRAINT   [FK_invoiceSelectedOptionalFees_feeTypes]                     FOREIGN KEY ([feeTypeId]) REFERENCES [feeTypes]([feeTypeID])) 
```

这给了我以下结果：

[![在此处输入图像描述](../Images/7f628e74ef2c850650cac56ff9422d67.png)](https://i.stack.imgur.com/jKMkV.png)

# jsf - 通过javascript更新primefaces数据表中的可编辑单元格

> ID：11941122
> 
> 赞同：1
> 
> 时间：2012-08-13T19:39:27.623
> 
> 标签：jsf, primefaces, datatable

我正在使用 Primefaces 3.2/JSF 2.0。我有一个 In-Cell 可编辑数据表。当我进入编辑模式时，我有一个输入框和一个按钮，当我单击该按钮时，它会打开一个带有单个选择数据表的对话框。选择一行后，我会更新整个数据表，该表将恢复为只读视图。

我想用我的回调函数中的值更新可编辑单元格。使数据表保持可编辑模式，由于单元格的 id 中有行索引，我不确定如何获取该 id，以便我可以更新我的输入框

**这是我的页面**

```
<h:panelGroup id="placesTable">
     <h:form id="placesform" prependId="false" method="post" > 
        <p:dataTable var="item" value="#{placesBean.items}"   id="placesList" widgetvar="placesListVar" editable="true">

        <p:ajax event="rowEdit" listener="#{placesBean.saveRow}" />
...
<p:column headerText="Select Country" style="width:125px" nowrap="nowrap">
        <p:cellEditor>
            <f:facet name="output">
                <h:outputText value="#{item.country}" />
            </f:facet>
            <f:facet name="input">
                <p:inputText id="countryInput"  value="#{item.country}" style="float:left"/>
                <h:outputLink style="float:left" value="javascript:void(0)" onclick="countrySelectDialog.show()">   
                    <p:graphicImage value="/resources/images/select-icon.png" />
                </h:outputLink>
            </f:facet>
        </p:cellEditor>
    </p:column> 
```

**我的选择器对话框的侦听器看起来像这样** 我正在为我的选择器使用复合组件

```
<p:dialog id="countrySelectDialog" header="Indicator Groups"  height="250" showEffect="explode" hideEffect="explode">
        <h:form prependId="false">
            <selector:countrySelect data="#{countrySelector.countries}" selection="#{placesBean.selectedCountry}">
                <f:facet name="footer">
                    <p:commandButton actionListener="#{placesBean.processSelection}" value="Ok" icon="ui-icon ui-icon-search" oncomplete="countrySelectDialog.hide()" update=":placesTable" process="@form"/>

                </f:facet>              
            </selector:countrySelect>
        </h:form>

</p:dialog> 
```

我的输入框的 id 像这样 **的 placesList:0:countryInput**，我如何在我的 ajax 回调中获取这个 id 以便我可以更新这个单元格而不是更新整个数据表。这将确保我的表格仍处于可编辑模式，然后在处理 rowEdit 事件时将保存数据。

# javascript - JQuery AJAX 轮询语法

> ID：11941123
> 
> 赞同：3
> 
> 时间：2012-08-13T19:39:31.747
> 
> 标签：javascript, jquery, ajax, polling

我有点绿，所以请多多包涵。

我需要轮询 SharePoint Web 服务，直到它返回一个值。我相信我的代码格式不正确。如果有一个预先存在的线程可以解决这个问题，请指出它；我相对有限的理解可能使我无法识别它。

```
function Poll2(){
    $.ajax({
        //Use an ABSOLUTE reference to your target webservice
        url: "https://mydomain.com/Sandbox/bitest/_vti_bin/lists.asmx",
        type: "POST",
        dataType: "xml",
        data: soapEnv,
        success:processResult,
        complete: Poll2,
        timeout: 5000,
        contentType: "text/xml; charset=\"utf-8\"",
        async: true
    });
} 
```

我的愿望是它会每 5 秒轮询一次服务，直到成功，此时它将继续处理所有数据的“processResult”函数。恐怕我通过引用父函数创建了一个无限循环。

**-------------------编辑和新代码-------------------**

我[在这篇博客文章](http://blog.falafel.com/Blogs/basem-emara/2012/06/06/polling-ajax-requests-in-javascript)中找到了一个*大致*完成我正在寻找的解决方案。事实证明，我真的只希望我的请求触发一次。但是，对于“无限”轮询例程，这可以很好地完成工作。

```
(function poll() {
    setTimeout(function () {
        $.ajax({
            type: 'POST',
            dataType: 'json',
            url: 'http://somewhere.com/rest/123',
            success: function (data) {
                MyNamespace.myFunction(data); //DO ANY PROCESS HERE
            },
            complete: poll
        });
    }, 5000);
})(); 
```

但是，我要注意，该例程在执行后 5 秒才初始化其第一次轮询。一段简单的代码！非常感谢作者。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T13:42:27.730

正如上面在我的编辑中提到的，我[在这篇博文](http://blog.falafel.com/Blogs/basem-emara/2012/06/06/polling-ajax-requests-in-javascript)中找到了一个*大致*完成我正在寻找的解决方案。事实证明，我真的只希望我的请求触发一次。但是，对于“无限”轮询例程，这可以很好地完成工作。

```
(function poll() {
    setTimeout(function () {
        $.ajax({
            type: 'POST',
            dataType: 'json',
            url: 'http://somewhere.com/rest/123',
            success: function (data) {
                MyNamespace.myFunction(data); //DO ANY PROCESS HERE
            },
            complete: poll
        });
    }, 5000);
})(); 
```

但是，我要注意，该例程在执行后 5 秒才初始化其第一次轮询。一段简单的代码！非常感谢作者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T19:45:20.537

超时设置告诉 jQuery 在放弃之前它应该等待服务器的响应多长时间。

```
function Poll2(){
    $.ajax({
        //Use an ABSOLUTE reference to your target webservice
        url: "https://example.com/Sandbox/bitest/_vti_bin/lists.asmx",
        type: "POST",
        dataType: "xml",
        data: soapEnv,
        success:processResult,
        timeout: 5000,
        contentType: "text/xml; charset=\"utf-8\"",
        async: true
    });
} 
```

如果您希望它每五秒尝试一次直到成功，您可以执行以下操作：

```
function Poll2(){
    $.ajax({
        //Use an ABSOLUTE reference to your target webservice
        url: "https://example.com/Sandbox/bitest/_vti_bin/lists.asmx",
        type: "POST",
        dataType: "xml",
        data: soapEnv,
        success:processResult,
        complete: Poll2,
        timeout: 5000,
        contentType: "text/xml; charset=\"utf-8\"",
        async: true
        error: function(xhr) {
            setTimeout(Poll2, 5000);
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T19:42:43.880

你肯定是对的，创建了一个无限循环。

但是您可以检查是否必须再次发出请求，如果不需要，只需处理数据（如果需要）并从 Poll2 函数返回。

# java - 在检票口中添加指向表格的链接

> ID：11941124
> 
> 赞同：2
> 
> 时间：2012-08-13T19:39:35.737
> 
> 标签：java, wicket

我使用 Apache Wicket 中的 DefaultDataTable 对象打印了一个表格。
现在我想为每个表格单元格添加一个链接。

我发现[这个链接](https://cwiki.apache.org/WICKET/adding-links-in-a-defaultdatatable.html)解释了其中的一些内容，但我对第一种方法有疑问。

```
 columns[0] = new TextFilteredPropertyColumn(new Model("Id"), "id", "id") {
        // add the LinkPanel to the cell item
        public void populateItem(Item cellItem, String componentId, IModel model) {
            final Transaction transaction = (Transaction) model.getObject(cellItem);
            cellItem.add(new TransactionList.LinkPanel(componentId, transaction));
        }
    };

private class LinkPanel extends Panel {
    public LinkPanel(String id, Transaction transaction) {
        super(id);
        final String name = transaction.getId();
        PageParameters param = new PageParameters("id=" + name);
        BookmarkablePageLink link = new BookmarkablePageLink("link", TransactionDetail.class, param);
        link.add(new Label("label", name));
        add(link);
    } 
```

什么是交易，交易做什么？什么是 LinkPanel 类？如果有更简单的方法，我很想知道！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T12:19:12.573

“事务”是单元模型中的对象（它可能来自示例，因为它不是来自检票口）。“LinkPanel”类是一个内部类，也不是来自检票口。此类的目的是制作一个包含链接的面板。您可以直接在单元格中添加链接，而无需使用 LinkPanel 之类的面板

```
columns[0] = new TextFilteredPropertyColumn(new Model("Id"), "id", "id") {
 // add the LinkPanel to the cell item
 public void populateItem(Item cellItem, String componentId, IModel model) {
    cellItem.add(new Link<String>(componentId) {

       @Override
       public void onClick() {
         setResponsePage(aPage.class);
         //or do what you want when the link is clicked
       }

       @Override
       public IMarkupFragment getMarkup() {
           // display the content you like - access the properties of your object
           return Markup.of("<div wicket:id='cell'>" + model.getObject() + "</div>");
       }
    });

    // Populate your item here
 }
}; 
```

但我建议保留内部面板（如 LinkPanel）方法，因为我认为直接添加链接是一种更好的做法。通过拥有内部面板，您将能够非常轻松地向链接添加标签或图像，如果您直接添加链接，这将更加困难。

当我需要在表格中添加链接时，我通常会这样做（请注意，CallDetailRecord 不是来自检票口，它只是我在这种情况下使用的对象）：

```
...

columns.add(new UserActionsColumn(new Model<String>(" ")));

...

private class UserActionsColumn extends AbstractColumn<CallDetailRecord> {
private static final long serialVersionUID = 1L;

public UserActionsColumn(IModel<String> displayModel) {
  super(displayModel);
}

@Override
public void populateItem(Item<ICellPopulator<CallDetailRecord>> cellItem,
                         String componentId,
                         final IModel<CallDetailRecord> rowModel)
{
  cellItem.add(new UserActionPanel(componentId, rowModel));
}
}

private class UserActionPanel extends Panel {
private static final long serialVersionUID = 1L;

public UserActionPanel(String id, final IModel<CallDetailRecord> model) {
  super(id);
  add(new AjaxLink<CallDetailRecord>("viewLink", model) {
    private static final long serialVersionUID = 1L;

    @Override
    public void onClick(AjaxRequestTarget target) {

      //actions to do when link is clicked
    }
  });
}
} 
```

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:05:08.307

事务只是一个模型类。这是一个例子，Wicket 没有提供任何东西。这同样适用于 LinkPanel 类。它是模型的内部类，扩展了 Wickel Panel 类。需要一个 Panel 类来为链接提供标记。

另一种选择是使用这样的东西：

```
columns[0] = new TextFilteredPropertyColumn(new Model("Id"), "id", "id") {
    // add the LinkPanel to the cell item
    public void populateItem(Item cellItem, String componentId, IModel model) {
        cellItem.add(new AjaxEventBehaviour("onclick") {

            protected void onEvent(final AjaxRequestTarget target) {
               // Put Link logic here
            }
        });

        // Populate your item here
    }
}; 
```

使整个单元格可点击（但需要 Ajax）...

# vb.net - Silverlight 5 和网络服务

> ID：11941125
> 
> 赞同：1
> 
> 时间：2012-08-13T19:39:40.233
> 
> 标签：vb.net, silverlight, web-services, silverlight-5.0

我有一个在浏览器中运行的 Silverlight 5 应用程序。它已经工作了一年多。当我查看服务引用时，它显示了地址，访问级别是公共的，数据类型集合类型是 system.collections.generic.list，字典集合类型是 system.collections.generic.dictionary。

Silverlight 应用程序运行并将使用 web 服务。直到我修改为 web 服务调用调用的 _DoWorkCompleted 私有子。一旦我修改了那个子（像 Dim x as string=string.empty 这样简单的东西），web 服务就不再工作了。我收到关于它不是相同文档类型的错误。当我回到网络服务时，所有信息看起来都一样。我试图删除服务引用并重新创建它，它再次告诉我文档类型不同。我尝试连接的网络服务位于公共网络服务器上。在这方面没有任何改变。唯一改变的是 _DoWorkerCompleted 中的任何代码。

发生了什么事，我做错了什么？

已编辑我需要修改 _DoWorkCompleted 事件 arg 中的代码，该事件发生在 web 服务调用完成时。这是如果我修改它，它不再想连接到 web 服务的子。

这是创建调用的代码...

> 将客户端调暗为新的 wsTypingTest.TypingTestClient

```
 AddHandler client.DoWorkCompleted, AddressOf client_DoWorkCompleted 
```

然后我有

> Private Sub client_DoWorkCompleted(ByVal sender As Object, e As wsTypingTest.DoWorkCompletedEventArgs)

就在这里..在我需要更新代码的 DoWorkComplete 上。所以我没有修改 web 服务引用，我正在修改一些代码，但这种修改似乎是什么使 web 服务引用不再起作用。

这些帮助有用

# django - 根据视图中现有的唯一字段更新字段

> ID：11941129
> 
> 赞同：1
> 
> 时间：2012-08-13T19:39:58.667
> 
> 标签：django, unique-key, modelform

我已经在这个问题上戳了几个小时，我对这个问题感到很困惑。这个视图应该做两个操作。第一个工作操作是使用提交的表单数据创建对象。第二个操作是根据唯一字段“bar_code”更新“状态”字段。最初保存后，然后更新我得到由唯一属性“%s with this %s already exists.”引起的错误，这是预期的。我真的很想保留视图来执行这两个操作。

```
def check_in_part_two(request):
    errlst=[]
    c={}
    c.update(csrf(request))
    if request.method == 'POST':
        form = PartForm(request.POST)
        if form.is_valid():
            try:
                # Test if the part row exists based on bar_code
                instance = Part.objects.get(bar_code=request.POST['bar_code'])
            except Part.DoesNotExist:
                # Clean the sn and create new row
                form.cleaned_data['serial_number']
                form.save()
                return http.HttpResponseRedirect('/current_count/')
            else:
                edit = PartForm(request.POST, instance=instance, fields=['status'])
                if edit.is_valid():
                    edit.cleaned_data['bar_code']
                    edit.save()
                    return http.HttpResponseRedirect('/current_count/')

    else:
        form = PartForm(initial={'status':3L, 'serial_number':'placeholder'})
    return render(request,'add_part.html',{
                                           'title':'Add Item',
                                           'form': form,
                                           }) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T19:58:24.367

首先，我不知道你在用`form.cleaned_data['serial_number']`and`edit.cleaned_data['bar_code']`线做什么。这些是 dict 中的键，而不是方法，因此仅将它们单独放在一行中没有任何作用。

其次，你让这太复杂了。下面的代码在功能上是等价的，而且可能更实用：

```
def check_in_part_two(request):
    if request.method == 'POST':
        try:
            part = Part.objects.get(bar_code=request.POST.get('bar_code'))
        except Part.DoesNotExist:
            form = PartForm(request.POST)
        else:
            form = PartForm(request.POST, instance=part)

        if form.is_valid():
            form.save()
            return http.HttpResponseRedirect('/current_count/')

    else:
        form = PartForm(initial={'status':3L, 'serial_number':'placeholder'})

    return render(request, 'add_part.html', {
        'title':'Add Item',
        'form': form,
    }) 
```

# javascript - 通过删除相关的 DOM 来重新初始化 jQuery 插件

> ID：11941132
> 
> 赞同：1
> 
> 时间：2012-08-13T19:40:04.690
> 
> 标签：javascript, jquery, html

我正在使用[jQuery Tokeninput 插件](http://loopj.com/jquery-tokeninput/)，它运行良好。虽然我缺少的是一种用新标签数据重新初始化它的方法。我不能只`$('.mytokeninput').tokenInput('init', new_tags_list);`在现有的启用令牌输入的字段上运行类似的东西。我使用解决方法 - 我清除 div 的包装器`.mytokeninput`，添加一个新`.mytokeninput`的，然后在其上运行一个新的 tokenInput 实例。

我想知道这是否是一个非常糟糕的主意，我应该以不同的方式来做，或者从最佳实践的角度来看它或多或少可以接受。请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T19:42:48.997

你有没有试过这个：

```
$( input ).tokenInput( 'clear' );
// where input is a reference to your text field 
```

它从令牌输入中清除所有令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T22:41:55.833

以上关于init的回答评论对我不起作用。我这样做的方式如下：（coffeescript）

```
# remove the tokens input list that it creates everytime the item is initialized
$('.token-input-dropdown').remove()    
$('.token-input-list').remove()

# initialize the list
$('#tokenList').tokenInput(
  [{'id':'1', 'name':'first'}]
) 
```

必须删除 div 并不理想，但这对我来说绝对有用。（此外，如果您使用不同的主题，则必须将 $('.token-input-dropdown') 更改为 $('.token-input-dropdown-facebook') 或您使用的任何主题。

# php - MySQL选择和排序欧元货币

> ID：11941136
> 
> 赞同：-1
> 
> 时间：2012-08-13T19:40:31.697
> 
> 标签：php, mysql, wordpress

我有一个插件，用于根据自定义字段对 Wordpress 帖子进行排序。该字段是价格字段。该插件适用于所有使用欧元和美元的国家。我有一个来自荷兰的客户，他使用欧元但有特殊字符来定义美分。这些特殊字符在插件中引发了排序错误。

以下是按价格检索和排序的 MySQL 代码：

```
function price_sort_it() {
global $wpdb, $thisorder;

    if($thisorder == 'price-lowest') {
        $this_order = 'ASC';
    }
    else if($thisorder == 'price-highest') {
        $this_order = 'DESC';
    }

return "(SELECT CAST(REPLACE(REPLACE(REPLACE($wpdb->postmeta.meta_value, ',', ''), '€',''),' ','') AS SIGNED)
           FROM $wpdb->postmeta
          WHERE $wpdb->posts.ID = $wpdb->postmeta.post_id
            AND $wpdb->postmeta.meta_key = 'ad_price')" . $this_order;
}
add_filter('posts_orderby', 'price_sort_it'); 
```

此代码删除了千位逗号分隔符，还删除了排序前的货币符号。它完美无缺。

问题是荷兰客户的广告价格如下：

*   5 欧元
*   5欧元，-
*   5,00 欧元

连同正常值，例如：

*   10,000 欧元
*   500.29 欧元
*   10 欧元

其中逗号表示小数，逗号和负数表示小数和 2 个零的缩写。

关于如何应对这一壮举的明智之举？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:39:05.640

您将客户的数字格式描述为不是“正常”格式。这是我的第一个警钟。

在任何特定位置用点或逗号格式化数字都没有“正常”或其他方式。不同的国家有不同的格式约定，事实上*大多数*国家使用逗号作为小数字符，点作为千位分隔符。这几乎适用于所有欧洲大陆国家。

因此，不要将您的首选格式视为“正常”。客户认为他们的格式正常，而您的格式很奇怪。客户是为此付出代价的人。

处理这个问题的标准方法是处理程序中所有未格式化的数字，并使用 PHP 的[`number_format()`函数](http://www.php.net/manual/en/function.number-format.php)以客户端所需的格式显示它们。

例如：

```
$number_in_dutch_format = number_format($unformatted_number, 2, ',', '.'); 
```

您可以将逗号和点设置为变量，这样您就可以在程序中对其进行配置，这样每个客户都可以使用他们喜欢的任何格式。

如果您需要更复杂的格式，诸如此类的功能[`sprintf()`](http://www.php.net/manual/en/function.sprintf.php)也可能很有用。

但是，您应该指定的一件事是，您应该为给定的客户端坚持单一格式。

您还可以在 SO 上阅读有关该主题的其他问题，例如：[PHP：Locale-aware number format](https://stackoverflow.com/questions/437371/php-locale-aware-number-format)

希望有帮助。

# php - 通过命令行 php 传递参数

> ID：11941137
> 
> 赞同：2
> 
> 时间：2012-08-13T19:40:37.827
> 
> 标签：php, command-line, scraper

所以我有这个脚本，我试图通过命令行传递参数。但是，不能让它工作。这是脚本的代码：

```
#!/usr/bin/php 

<?php
$argv[1] = $scraper;
require_once('Scraper.php');
$scraper = new JonH_Scraper();

if (empty($argv[1])) {
    echo 'whats the URL?';
    }

$scraper->scrape($url);
var_dump($scraper); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T19:47:09.307

错误就在这里

```
$argv[1] = $scraper; 
```

它应该是

```
$scraper = $argv[1]; 
```

问候

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T19:47:45.763

我相信问题出在这条线上：

```
$argv[1] = $scraper; 
```

您分配`$scraper`给`$argv[1]`但`$scraper`未定义，因此分配变为空。稍后您检查是否`$argv[1]`为空，因为它的`NULL`.

也许它应该被扭转？

```
$scraper = (isset($argv[1])) ? $argv[1] : null;

if (empty($scraper)) die('No url provided'); 
```

编辑：您可能希望使用不同的变量名称，因为您继续创建一个新`Scraper`对象并将其分配给同一个变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T19:49:36.043

应该是这样的：

```
php script.php <URL>

#!/usr/bin/php 
<?php
require_once('Scraper.php'); 
$url = $argv[1];
if(empty($url)){
 die('URL is EMPTY');
}
$scraper = new Scraper();
$results = $scraper->scrape($url);
var_dump($results); 
```

# javascript - Facebook API：确定 FB.ui 发送方法的接收者数量

> ID：11941150
> 
> 赞同：0
> 
> 时间：2012-08-13T19:41:09.620
> 
> 标签：javascript, ajax, facebook, jquery, facebook-javascript-sdk

我的 WP 站点允许用户使用`FB.ui()`send 方法向其他 FB 用户发送消息：

```
 FB.ui(
              method: 'send',
              name: 'Bla Bla Bla',
              link: 'http://www.example.com',
              show_error: true,
              display: 'popup'
              },

              function (data) {
                console.log(data);
                if ( data.success=true ) {
                    console.log('SUCCESS');                 
                    jQuery.post('http://www.example.com/wp-admin/admin-ajax.php',               {
                            action : 'my_ajax_function',
                            user_id: '###',
                            postID : MyAjax.postID
                        }, function(returned) { console.log(returned);  }
                    );                  

                } else {
                    console.log('Failed to send FB invite');
                };
             }   
              ); 
```

如您所见，我在回调函数中进行了 AJAX 调用。我真的很希望 AJAX 调用能够**访问刚刚收到消息的收件人的数量。**当我记录传递给回调函数的数据时，除了`success : true`.

有人知道检索收件人数量的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:50:59.517

> 当我记录传递给回调函数的数据时，除了成功之外，我没有看到任何有用的信息：true

这只是因为您自己*设置*了 data.success 的值——`data.success=true`不是比较，**而是**分配。

> 有人知道检索收件人数量的方法吗？

没有直接的方法，请参阅[https://developers.facebook.com/docs/reference/dialogs/send/](https://developers.facebook.com/docs/reference/dialogs/send/)：

> “如果发送消息成功，用户将被重定向到redirect_uri。否则，将显示错误。*与 Like 按钮不同的是，它本身没有返回值。*”</p>

您*可以*尝试查找用户`user/outbox`在请求`read_mailbox`许可后刚刚通过连接发送的消息——但您仍然需要通过查看`created_time`和/或`message`内容来确定其中的哪条消息是正确的。

# android - 从代码更改按钮的状态

> ID：11941155
> 
> 赞同：0
> 
> 时间：2012-08-13T19:41:40.727
> 
> 标签：android, android-layout

如何从代码中更改按钮的状态。我无法使用 xml 文件，因为我从服务器获取图像。

使用 ：

```
Drawable d = new BitmapDrawable(getResources(),bitmap); 
```

我有drawable，但是如何分配不同的状态，然后为按钮附加相应的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T19:55:03.773

在 xml 中，我们使用`<selector>`element 来做到这一点。在代码中，我们使用[StateListDrawable](http://developer.android.com/reference/android/graphics/drawable/StateListDrawable.html)：

```
StateListDrawable content = new StateListDrawable();
Drawable pressedDrawable = new BitmapDrawable(getResources(),bitmap);
//Your other drawables (focused, .....)

content.addState(new int[] { android.R.attr.state_pressed }, pressedDrawable);
//Add the other drawables the same way

Button button = (Button) view.findViewById(R.id.my_button);
button.setBackground(content); 
```

# javascript - JavaScript Print() 样式不一致

> ID：11941160
> 
> 赞同：0
> 
> 时间：2012-08-13T19:42:01.740
> 
> 标签：javascript, browser, printing, webpage

编辑：

有什么推荐的hack吗？

我目前正在考虑在后端生成图像，然后在新窗口中打开它，然后打印出图像。

* * *

我通过隐藏其他元素来打印页面的一部分

```
$(...).hide(); 
```

然后通过调用 print

```
window.print(); 
```

但是在所有浏览器中，我都会遇到一些样式不一致。具体来说，背景颜色消失了。

常规网页视图：

![在此处输入图像描述](../Images/699b7e97e0647e1455afb70aa35f6eb9.png)

打印预览：

![在此处输入图像描述](../Images/75cc771e7731dbe6a9e8752064f3e0ce.png)

相关的html（玉）如下：

```
amount-due.span2
  dl
    dt Amount Due
    dd.align-right <%= RP.util.currency_to_symbol[invoice.currency.toLowerCase()] %>
      <% if (invoice.state !== "paid") { %>
      span <%= invoice.total_amount %>
      <% } else { %>
      span 0
      <% } %> 
```

和

```
d.darken <%= RP.util.currency_to_symbol[invoice.currency.toLowerCase()] %><%= invoice.total_amount %> 
```

相关CSS如下：

![在此处输入图像描述](../Images/7fd8118f1959c4b5a7c756be95a3488d.png)

和

![在此处输入图像描述](../Images/86b45508c9e2ffedcaa3fb5b51234f2e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T19:45:35.927

我不知道有任何浏览器为了节省墨水/墨粉而关闭背景颜色和图像以进行打印。

有些提供用户偏好以重新启用它。

假设您的所有背景都是白色的，设计您的样式表，并使用其他方式（例如粗体文本）突出显示特定的内容位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T19:49:38.170

那是因为您的浏览器不打印背景。

如果你使用 Firefox，你可以这样做：

文件 > 页面设置... > 格式和选项 > 选项 > 打印背景（颜色和图像）

或者

Firefox 按钮 > 打印... > 页面设置... > 格式和选项 > 选项 > 打印背景（颜色和图像）

# ios - 在 TableView 中使用两指手势

> ID：11941163
> 
> 赞同：0
> 
> 时间：2012-08-13T19:42:11.323
> 
> 标签：ios, uitableview, uigesturerecognizer

我正在尝试使用表格视图，以便我可以用一根手指向下滚动列表，但也有一个两指手势可以在不滚动的情况下转到另一个视图。我曾尝试将自定义手势识别器添加到表格视图中，但似乎无法使其正常工作；它忽略了手势。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T19:51:28.880

检查这个：[UIButton inside a view that has a UITapGestureRecognizer](https://stackoverflow.com/questions/3344341/uibutton-inside-a-view-that-has-a-uitapgesturerecognizer)您可能想检查您的案例中是否也存在类似情况。此外，您可能想确保将手势识别器添加到 tableview 而不是 tableviewcell 的`contentview`.

# jquery - @Url.Action 带参数

> ID：11941168
> 
> 赞同：0
> 
> 时间：2012-08-13T19:42:37.857
> 
> 标签：jquery, dialog, url-action

我正在尝试 tyUrl.Action 需要将多个参数传递给

我需要使用 url.action 加载带有多个参数的对话框。我怎样才能做到这一点？我尝试了几种方法，但没有任何效果：

```
diag.load('@Url.Action("Action", "Controller", new {para1=val,para2=val2})', '', function () {
} 
```

更不用说，所有的价值观都是动态的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T14:21:55.927

是的，这应该工作。但是，它确实依赖于您已专门使用 para1 和 para2 设置了该控制器操作的路由这一事实。它需要知道如何从这些位构建 url，因此它使用路由表。

# java - SpringsourceTool Suite 2.9.2：抱怨未使用的 grails 2.0.3 安装缺少 groovy-all-1.8.6.jar

> ID：11941173
> 
> 赞同：2
> 
> 时间：2012-08-13T19:43:04.720
> 
> 标签：java, eclipse, grails, groovy, sts-springsourcetoolsuite

我沮丧得说不出话来。我升级到 STS 2.9.2，希望摆脱我在 2.9.1 中遇到的过多问题。现在看来问题更严重了。

除了 jline_.dll 问题，它不断抬起丑陋的头（我找到的唯一解决方案是退出 STS，删除 .ivy-cache 并重新启动 STS），现在我什至无法运行我的任何项目，由于一些关于找不到 groovy-all-1.8.6.jar 的奇怪错误。

```
The archive: C:/springsource/**grails-2.0.3**/lib/org.codehaus.groovy/groovy-all/jars/groovy-all-1.8.6.jar which is referenced by the classpath, does not exist. 
```

但是 - 我所有的项目都是为 grails 2.1.0 配置的！？！？

我需要在哪里找到这个对 grails 2.0.3 的恶意引用？

谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T20:27:23.607

经过大量搜索，我发现了问题。错误报告正在引用 grails 2.0.3 jar，当然，这不是任何活动项目中的设置偏好。我搜索了所有首选项和 .project 文件。没有找到任何东西。

然后我在 .metadata 中看到了文件：

```
./plang1/.metadata/.plugins/org.eclipse.debug.core/.launches/planG (run-app).launch:<listEntry value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot
; standalone=&quot;no&quot;?&gt;&#13;&#10;&lt;runtimeClasspathEntry externalArchive=&quot;C:/springsource/grails-2.0.3/lib/org.codehaus.groovy/groovy-all/jars/g
roovy-all-1.8.6.jar&quot; path=&quot;3&quot; type=&quot;2&quot;/&gt;&#13;&#10;"/>
./plang1/.metadata/.plugins/org.eclipse.debug.core/.launches/planG (run-app).launch:<listEntry value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot
; standalone=&quot;no&quot;?&gt;&#13;&#10;&lt;runtimeClasspathEntry externalArchive=&quot;C:/springsource/grails-2.0.3/dist/grails-bootstrap-2.0.3.jar&quot; pat
h=&quot;3&quot; type=&quot;2&quot;/&gt;&#13;&#10;"/>
./plang1/.metadata/.plugins/org.eclipse.debug.core/.launches/planG-Admin (run-app).launch:<listEntry value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-
8&quot; standalone=&quot;no&quot;?&gt;&#13;&#10;&lt;runtimeClasspathEntry externalArchive=&quot;C:/springsource/grails-2.0.3/lib/org.codehaus.groovy/groovy-all/
jars/groovy-all-1.8.6.jar&quot; path=&quot;3&quot; type=&quot;2&quot;/&gt;&#13;&#10;"/>
./plang1/.metadata/.plugins/org.eclipse.debug.core/.launches/planG-Admin (run-app).launch:<listEntry value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-
8&quot; standalone=&quot;no&quot;?&gt;&#13;&#10;&lt;runtimeClasspathEntry externalArchive=&quot;C:/springsource/grails-2.0.3/dist/grails-bootstrap-2.0.3.jar&quo
t; path=&quot;3&quot; type=&quot;2&quot;/&gt;&#13;&#10;"/>
./plang1/.metadata/.plugins/org.eclipse.debug.core/.launches/planG-Admin .launch:<listEntry value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; s
tandalone=&quot;no&quot;?&gt;&#13;&#10;&lt;runtimeClasspathEntry externalArchive=&quot;C:/springsource/grails-2.0.3/lib/org.codehaus.groovy/groovy-all/jars/groo
vy-all-1.8.6.jar&quot; path=&quot;3&quot; type=&quot;2&quot;/&gt;&#13;&#10;"/>
./plang1/.metadata/.plugins/org.eclipse.debug.core/.launches/planG-Admin .launch:<listEntry value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; s
tandalone=&quot;no&quot;?&gt;&#13;&#10;&lt;runtimeClasspathEntry externalArchive=&quot;C:/springsource/grails-2.0.3/dist/grails-bootstrap-2.0.3.jar&quot; path=&
quot;3&quot; type=&quot;2&quot;/&gt;&#13;&#10;"/>
./plang1/.metadata/.plugins/org.eclipse.search/dialog_settings.xml:                     <item value="/springsource/grails-2.0.3/lib/org.codehaus.groovy/groovy-a
ll/jars/groovy-all-1.8.6.jar" key="textPattern"/> 
```

有内容

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<launchConfiguration type="com.springsource.sts.grails.core.launchconfig">
<stringAttribute key="com.springsource.sts.grails.core.ORG_SCRIPT" value="run-app"/>
<stringAttribute key="com.springsource.sts.grails.core.PROJECT_DIR" value="C:\workspaces\plang1\planG"/>
<stringAttribute key="com.springsource.sts.grails.core.SCRIPT" value="run-app"/>
<booleanAttribute key="org.eclipse.debug.core.appendEnvironmentVariables" value="true"/>
<mapAttribute key="org.eclipse.debug.core.environmentVariables">
<mapEntry key="GRAILS_STS_RUNNING" value="true"/>
</mapAttribute>
<listAttribute key="org.eclipse.jdt.launching.CLASSPATH">
<listEntry value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;&#13;&#10;&lt;runtimeClasspathEntry containerPath=&quot;org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/jdk1.7.0&quot; path=&quot;2&quot; type=&quot;4&quot;/&gt;&#13;&#10;"/>
<listEntry value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;&#13;&#10;&lt;runtimeClasspathEntry externalArchive=&quot;C:/springsource/grails-2.0.3/lib/org.codehaus.groovy/groovy-all/jars/groovy-all-1.8.6.jar&quot; path=&quot;3&quot; type=&quot;2&quot;/&gt;&#13;&#10;"/>
<listEntry value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;&#13;&#10;&lt;runtimeClasspathEntry externalArchive=&quot;C:/springsource/grails-2.0.3/dist/grails-bootstrap-2.0.3.jar&quot; path=&quot;3&quot; type=&quot;2&quot;/&gt;&#13;&#10;"/>
<listEntry value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;&#13;&#10;&lt;runtimeClasspathEntry externalArchive=&quot;C:/Program Files/Java/jdk1.7.0/lib/tools.jar&quot; path=&quot;3&quot; type=&quot;2&quot;/&gt;&#13;&#10;"/>
</listAttribute>
<booleanAttribute key="org.eclipse.jdt.launching.DEFAULT_CLASSPATH" value="false"/>
<stringAttribute key="org.eclipse.jdt.launching.MAIN_TYPE" value="org.codehaus.groovy.grails.cli.support.GrailsStarter"/>
<stringAttribute key="org.eclipse.jdt.launching.PROJECT_ATTR" value="planG"/>
<stringAttribute key="process_factory_id" value="com.springsource.sts.grails.core.processFactory"/>
</launchConfiguration> 
```

我关闭了 STS，删除了所有启动文件，重新启动了 STS，瞧，它工作了。没有更多关于 2.0.3 jar 文件丢失的运行时错误。

# git - Git fetch/pull/clone 在接收对象时挂起

> ID：11941175
> 
> 赞同：56
> 
> 时间：2012-08-13T19:43:09.820
> 
> 标签：git, ssh, scp

当从 git 存储库中获取或拉取数据或克隆存储库时，我会做到这一点：

```
remote: Counting objects: 6666, done.
remote: Compressing objects: 100% (5941/5941), done.
Receiving objects:  23% (1534/6460), 11.68 MiB | 23 KiB/s 
```

它挂了。23%/对象的数量不是给定的，它的范围从个位数到最多 60 个，似乎。列出的下载速度也冻结了——它不像是慢慢地爬到零。

我旁边的那个人没有问题，所以这不是路由器问题。我们将 beanstalk 用于我们的工作存储库，但我有来自 beanstalk 和 github 的问题（尽管有时似乎 github 会完成）。

自从升级到 Mountain Lion 并更新 Xcode 后，这个问题似乎才出现。我已经擦除了 git（包括 XCode）并尝试使用自制软件安装它。那没有用，所以我将其删除并尝试使用他们提供的 Mac 安装包，但也没有解决问题。

Beanstalk 为 git 存储库提供 SSH url，但我通过 SCP 或 SSH 连接到我已经完成工作的服务器没有问题。

这正在扼杀我的工作流程，因此我们将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2017-01-19T09:21:02.253

*NAT*上的VMware 对我来说有这个问题。将其更改为*Bridged（复制状态）*解决了该问题。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-05T18:26:31.367

看起来和我的问题类似。在一段时间后，Git 似乎挂在了 fetch 或 push 上。我可以建议你投入`~/.ssh/config`：

```
Host *

ServerAliveInterval 60 
```

我有一个 MBP 和山狮。我希望这个超时是你问题的原因。（大约三十或四十分钟后，我注意到它还在继续。）

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-07T17:06:39.077

尝试检查您的网络连接。也许路由表中有垃圾。可能是路由器上的端口损坏或计算机的网络接口问题。尝试 ping 您正在克隆 git repo 的服务器，可能您的计算机和此服务器之间的链接不稳定。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-24T01:03:42.913

在 Mac 上，使用 Git 2.22（2019 年第二季度）， git fetch 应该更能抵抗此类问题：在“git fetch”被 SIGPIPE 杀死的平台上（例如 OSX），`upload-pack`在另一端运行后挂断的检测到错误可能会导致 " `git fetch`" 因信号而死，从而导致不稳定的测试。
" `git fetch`" 现在在其操作的网络部分忽略 SIGPIPE（这不是问题，因为我们检查了 write(2)s 的返回状态）。

请参阅[Jeff King ( ) 的提交](https://github.com/peff)[1435889](https://github.com/git/git/commit/143588949c8a0672302403c722fc433a5bb2ea2a) （ 2019 年 3 月 3 日）和[提交 37c8001](https://github.com/git/git/commit/37c80012f1415bc4ff23def735a87cbd395bca31)（2019 年 3月 5 日[）](https://github.com/peff)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 27cdbdd](https://github.com/git/git/commit/27cdbdd134f181fc97f9589039ed7c0d12759b5a))^(中，2019 年 3 月 20 日）)[`peff`](https://github.com/peff)
^([`gitster`](https://github.com/gitster))

> ## `fetch``SIGPIPE`:网络运行时忽略
> 
> 默认`SIGPIPE`行为对于生成大量输出的命令很有用：如果我们的输出的接收者消失了，我们将被异步通知停止生成它（通常通过终止程序）。
> 
> 但是对于像这样的命令`fetch`，它主要关注接收数据并将其写入磁盘，意外`SIGPIPE`可能会很尴尬。我们已经在检查所有`write()` 调用的返回值，并且由于信号而死，我们失去了优雅地处理错误的机会。
> 
> 在 Linux 上，我们通常`SIGPIPE`在 fetch 期间根本看不到。如果网络连接的另一端挂断，我们将看到`ECONNRESET`.
> 但是在 OS X 上，我们得到一个`SIGPIPE`，并且进程被杀死。
> 
> `SIGPIPE`让我们在 fetch 的网络部分忽略它，这将导致我们`write()`返回`EPIPE`，从而为我们提供跨平台的一致行为。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-23T09:39:30.157

重置 git 凭据对我有用。

```
git config --global credential.helper store 
```

* * *

## 回答 #6

> 赞同：-26
> 
> 时间：2015-12-15T16:10:15.020

首先尝试通过键入初始化 git 存储库文件夹

```
$ git init 
```

它应该有帮助

# r - R中的write.table将数字写入4e + 07而不是完整数字

> ID：11941178
> 
> 赞同：1
> 
> 时间：2012-08-13T18:39:20.017
> 
> 标签：r

> **可能重复：**
> [R：数字格式，写 1e-5 而不是 0.00001](https://stackoverflow.com/questions/3978266/r-number-format-writing-1e-5-instead-of-0-00001)

这是一个简短而简单的 Q，但我还没有找到解决方案。

我有一个带有数字列的 df，我如何使用 write.table 将其写为表格，以便 R 写入完整的数字 40000000 而不是 4e+07 例如？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T18:42:43.577

检查谷歌的选项（scipen）

# javascript - Web 应用程序的可用键盘快捷键

> ID：11941180
> 
> 赞同：33
> 
> 时间：2012-08-13T19:43:24.440
> 
> 标签：javascript, internet-explorer, firefox, google-chrome

我正在开发一个 Web 应用程序，我想添加一些键盘快捷键。诸如 Ctrl-N 或 Ctrl-Space 之类的东西。但是，我**不想**使用浏览器已经使用的键盘快捷键。

例如，在 OS X 上的 Google Chrome 中使用 Ctrl-Space 快捷方式很好，但在 OS X 上的 Firefox 中，它会在浏览器中显示一个右键菜单。

是否有已知的跨浏览器/操作系统键盘快捷键列表可以安全（或不安全）用于 Web 应用程序？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-13T19:48:21.307

如果您只需要了解标准浏览器键盘快捷键，它们会在[此处](http://www.codinghorror.com/blog/2006/02/standard-browser-keyboard-shortcuts.html)列出。

单独的浏览器快捷方式列表：

*   Internet Explorer 的快捷方式可在[此处](https://support.microsoft.com/en-us/help/15357/windows-internet-explorer-11-keyboard-shortcuts)找到。

*   火狐[来了](http://support.mozilla.org/en-US/kb/keyboard-shortcuts-perform-firefox-tasks-quickly?redirectlocale=en-US&redirectslug=Keyboard%20shortcuts)。（向下滚动一点）

*   谷歌浏览器在[这里](https://support.google.com/chrome/bin/answer.py?hl=en&answer=157179)。

*   Safari 的[官方来源在这里](https://support.apple.com/guide/safari/keyboard-and-other-shortcuts-cpsh003/mac)，但更好的来源在[这里](https://shortcutworld.com/Safari/mac/Safari-Browser_Shortcuts)。

*   歌剧[来了](https://help.opera.com/en/latest/shortcuts/)。

我觉得[这个](http://dmcritchie.mvps.org/firefox/keyboard.htm)比较表很丑，但非常有用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-11-23T17:32:59.600

如果没有输入焦点，则应使用普通键，例如`a`, `s`,`d`等。

否则，这里是主要来自 Chrome (OSX) 的开放式键盘快捷键列表（在撰写本文时），还有一些来自 F. David McRitchie 的[比较表](http://dmcritchie.mvps.org/firefox/keyboard.htm)和@leonbloy 的额外消除。

这个列表不考虑`Alt`/`Option`因为它们对用户来说不太熟悉并且通常不太符合人体工程学，但它们中的大多数都是开放的。

*由于跨浏览器列表实际上是特定于浏览器的列表的逻辑与，因此下面的列表实际上缩小了搜索范围。*

```
// (Ctrl ≅ ⌘ on OSX)
Ctrl + B
Ctrl + I
Ctrl + U
Ctrl + Shift + F
Ctrl + Shift + L
Ctrl + Shift + O
Ctrl + Shift + S
Ctrl + Shift + U
Ctrl + Shift + Y 
```

如果其中任何一个在 Windows 或其他浏览器上不可用，请发表评论，我将相应地编辑列表以使其最有用。

# asp.net - Google 如何根据我的位置或浏览器语言检测要提供哪个版本的 google.com？

> ID：11941181
> 
> 赞同：1
> 
> 时间：2012-08-13T19:43:23.620
> 
> 标签：asp.net, asp.net-mvc, localization

我正在尝试在 ASP.NET MVC 中检测用户喜欢的语言，并且我知道该`Request.UserLanguages`属性。问题是，互联网上最受欢迎的网站（例如 Google.com）似乎不使用这些设置，而是使用一些基于位置的设置。这就是为什么默认情况下我总是看到 Google.com 的斯洛文尼亚语版本，即使我们从浏览器中的语言中删除了所有斯洛文尼亚语的痕迹（无论是 IE、Chrome 等）

出国并连接到那里的网络也将导致显示，例如，在德国旅行时显示德国 Google.com。

我的问题是：

1.  他们使用什么检测机制？

2.  你喜欢 UserLanguages 还是喜欢位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T19:45:32.863

> 他们使用什么检测机制？

基于IP。

> 你喜欢 UserLanguages 还是喜欢位置？

取决于你的要求。正如您已经注意到的那样，如果您使用 UserLanguages，您可能在中国有一个用户将他的浏览器配置为 en-EU，您会得到英语，而如果您使用基于 IP 的检测，您会得到中国。因此，这实际上取决于您是要特权用户位置还是用户浏览器设置。

# php - 使用 HTTPS 和 cookie 安全地传输密码

> ID：11941185
> 
> 赞同：0
> 
> 时间：2012-08-13T19:43:59.823
> 
> 标签：php, cookies, ssl, login, https

我对 PHP 比较陌生，所以请多多包涵。我创建了一个使用基本身份验证和 SSL（Apache 服务器）保护的网站。但是，这种情况并不安全，因为用户名和密码是以纯文本形式传输的。我考虑过摘要身份验证，但由于不相关的原因，这并不完全可行。

因此，我现在正在考虑对整个站点进行 SSL 加密（已经是这种情况），并使用基于 cookie 的机制进行会话身份验证。我已阅读并（我相信）了解如何使用 PHP 设置和取消设置 cookie 的基础知识，但我找不到一个很好的示例来说明如何实现安全登录机制。然而，这一定是一个非常常见的登录场景，因此我认为一些预制的登录页面可能已经可以用于轻松定制。

如果有人能指导我学习如何实现基于 cookie 的安全登录的分步教程，我将不胜感激！提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T19:55:51.673

如果您为整个站点使用 SSL，则用户名和密码不会以纯文本形式传输，而是作为加密连接的一部分。

对于大多数 Web 应用程序来说，基本身份验证与 SSL 相结合是一种足够安全的设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T23:30:22.950

这里有一些术语混淆。首先，您说通过 SSL 发送密码不安全是不正确的。其次，您将身份验证与授权混淆了。身份验证证明用户就是他所说的那个人。用户名和密码就是这样做的，所以这部分就完成了。此时，您为用户创建一个会话，其中包含他的身份和他可能承担的角色。会话通过 cookie 跨请求保留。然后，当他访问站点的某些部分时，您必须检查他的角色以查看它们是否与您定义为访问该区域所需的角色匹配。您可以通过 Apache 配置完成所有这些工作，而无需编写任何代码。

# xml - VBS 追加子节点

> ID：11941186
> 
> 赞同：0
> 
> 时间：2012-08-13T19:44:00.573
> 
> 标签：xml, xpath, vbscript

我正在尝试将子节点添加到 GG 节点。

```
Dim objCurrNode : objCurrNode = "/AA/BB/CC/DD/EE/FF[@name=""Hello""]/GG"
Set objKid = oXML.createElement("HH")
objCurrNode.appendChild (objKid) 
```

我需要对象...我做错了什么？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T19:57:59.517

要使`objCurrNode.appendChild objKid`（没有（），因为你调用了一个Sub）工作，`objCurNode`必须是一个对象，它必须被分配给与Set。XPath 表达式

```
"/AA/BB/CC/DD/EE/FF[@name=""Hello""]/GG" 
```

不能用于创建对象，但您可以使用 .selectSingleNode 方法来查找节点。

# tsql - 如何使用 EXCEPT 插入静态表？

> ID：11941188
> 
> 赞同：7
> 
> 时间：2012-08-13T19:44:31.493
> 
> 标签：tsql, sql-server-2008, except

我正在开发一个 SSMS 2008 R2 T-sql 查询。目前我的查询看起来像：

```
INSERT rd_scs_only_clients
SELECT DISTINCT en.clientid_c
FROM cd.enrollments en 
WHERE en.agency_c in ('SCCR','SCRP') AND DATEDIFF(DAY, GETDATE(), startdate_d) > 90
EXCEPT
SELECT DISTINCT en.clientid_c
FROM cd.enrollments en 
WHERE en.agency_c not in ('SCCR','SCRP') 
```

但这会导致 0 条记录，因为它似乎没有将 INSERT 语句下方的所有代码识别为属于同一查询。我该如何重写这个？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-13T20:01:08.423

将您的语句包装在 select * from 中，它应该可以工作。

```
INSERT rd_scs_only_clients

select * from (
SELECT DISTINCT en.clientid_c
FROM cd.enrollments en 
WHERE en.agency_c in ('SCCR','SCRP') AND DATEDIFF(DAY, GETDATE(), startdate_d) > 90
EXCEPT
SELECT DISTINCT en.clientid_c
FROM cd.enrollments en 
WHERE en.agency_c not in ('SCCR','SCRP')
)DATA 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T20:01:16.800

试试这个

```
insert rd_scs_only_clients (yourclientfieldname)
Select * from
(
SELECT DISTINCT en.clientid_c 
FROM cd.enrollments en  
WHERE en.agency_c in ('SCCR','SCRP') AND DATEDIFF(DAY, GETDATE(), startdate_d) > 90 
EXCEPT 
SELECT DISTINCT en.clientid_c 
FROM cd.enrollments en  
WHERE en.agency_c not in ('SCCR','SCRP') 
)v 
```

如果这不起作用，则其他地方可能存在问题。尝试不带插入部分的 SQL

# sql - 在 Access 2007 中将表达式添加到查询的正确语法（

> ID：11941192
> 
> 赞同：0
> 
> 时间：2012-08-13T19:44:47.310
> 
> 标签：sql, ms-access-2007

我遇到了这个[How Do I Sequentially Number Records in an Access Query](http://www.ehow.com/how_5976723_do-number-records-access-query_.html) 以便根据我发布的这个[stackoverflow 问题](https://stackoverflow.com/questions/11935615/keep-query-order-results-view-as-entered-in-the-sql-view-using-access-2007/11935712#11935712)（我从来没有做我想要做的事情）做我想做的事情，但每次我尝试将 AS Counter 添加到我得到的查询中

```
The expression you entered contains invalid syntax
You may have entered an operand without an operator 
```

使用以下 sql：

```
SELECT Maintable.NumBR, Maintable.*, [Ehow] AS Expr1
FROM Maintable
WHERE (((Maintable.[NumBR])="" 
  Or (Maintable.[NumBR]) Like "3101" 
  Or (Maintable.[NumBR]) Like "3541" 
  Or (Maintable.[NumBR]) Like "4381" 
  Or (Maintable.[NumBR]) Like "AS3281" 
  Or (Maintable.[NumBR]) Like "4260" 
  Or (Maintable.[NumBR]) Like "4315" 
  Or (Maintable.[NumBR]) Like "4330" 
  Or (Maintable.[NumBR]) Like "4382" 
  Or (Maintable.[NumBR]) Like "9410" 
  Or (Maintable.[NumBR]) Like "9570" 
  Or (Maintable.[NumBR]) Like "AS3710" 
  Or (Maintable.[NumBR]) Like "AS4450" 
  Or (Maintable.[NumBR]) Like "K400" 
  Or (Maintable.[NumBR]) Like "3100" 
  Or (Maintable.[NumBR]) Like "3130" 
  Or (Maintable.[NumBR]) Like "3280" 
  Or (Maintable.[NumBR]) Like "3495" 
  Or (Maintable.[NumBR]) Like "3540" 
  Or (Maintable.[NumBR]) Like "3610" 
  Or (Maintable.[NumBR]) Like "3700" 
  Or (Maintable.[NumBR]) Like "4110" 
  Or (Maintable.[NumBR]) Like "4200")

AND (([Ehow])=DCount("[NumBR]","[Maintable]"," [NumBR] <= " & [NumBR]))); 
```

**编辑**上一个 stackoverflow 问题中提出的问题回答了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T19:53:33.290

您的查询中不需要*AS Counter短语。*在链接的示例中，它被添加到*SELECT*语句中以别名列；在您的示例中，您正在使用*WHERE*子句，因此*AS*短语不会做任何事情（实际上是无效的）。

# visual-c++ - Vc++/CLI 中的文本框格式

> ID：11941204
> 
> 赞同：0
> 
> 时间：2012-08-13T19:45:49.353
> 
> 标签：visual-c++

我正处于使用 Vc++ (C++/CLI) 的陡峭学习曲线的开端

**如何在表单的文本框中格式化文本（数字）？**

`printf()`很容易，在过去的美好时光;-)

以下有效，但有很多小数位。

我只需要显示一位小数。

那是**22.4** 而不是**22.4178301**

```
//Calculate the Power and current

fPower2 = (pow((fVoltagePkPk * 0.5 * 0.707),2) / 2);

fCurrent2 = fPower2 / (fVoltagePkPk * 0.5 * 0.707);

//Display the Power amd current in the text boxes

txtPower2->Text = Convert::ToString(fPower2);

txtCurrent2->Text = Convert::ToString(fCurrent2); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T19:56:47.457

您可以使用

```
fPower2.ToString("F1")
fCurrent2.ToString("F1") 
```

F1 指 1 个固定数字。有关更多格式选项，请参阅[http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#Y2205](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#Y2205)。

# asp.net - 母版页上的句柄菜单

> ID：11941206
> 
> 赞同：1
> 
> 时间：2012-08-13T19:45:55.563
> 
> 标签：asp.net, menu

我有一个母版页和一个带有内容页的菜单。如果我转到内容页面 A.aspx，我希望菜单项选择 css 类。如果我使用 B.aspx，我希望母版页内的 B 菜单项显示为已选中（具有 cssClass='seleced'）。如何在 asp.net 母版页上轻松实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:20:04.110

经过一些研究，这似乎不是最容易完成的事情，除非您按照 MS 的意图构建您的网站。

如果您有一个 web.sitemap(xml-) 文件，那么它真的很容易，因为您默认获得该功能。

这意味着您必须在菜单中添加数据源并将站点地图文件用作数据源。我不知道它如何与其他数据源一起工作，但我真的希望 ASP.NET 足够聪明来修复它。

你可以看看[这个](http://msdn.microsoft.com/en-us/library/305w735z%28v=vs.80%29.aspx)演练

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T07:44:14.720

使用[Css 友好的菜单控制](http://cssfriendly.codeplex.com/)

选定的将附加一个 css 类 AspNet-Menu-Selected。

# php - phpdocx - 通过 phpdocx 库生成 word 文档

> ID：11941207
> 
> 赞同：0
> 
> 时间：2012-08-13T19:46:03.487
> 
> 标签：php, docx, phpdocx

我需要从 php 和 mysql 以可编辑的单词形式动态制作文件。我找到了很好的库 PHPdocx，它现在可以工作，但是它将输出文件保存到服务器。我只想在浏览器窗口上从网络服务器打开 word 文档文件。首先我试过：

> header("位置：example_text.docx");

不幸的是它不起作用，因为它仍然在 php 文件而不是 docx 中打开。然后我找到了一个更好的方法：

```
echo "
<script>
    window.location.replace('example_text.docx')
</script>
"; 
```

它工作正常，但仍然不能满足我 - 它打开一个带有问题的标准浏览器窗口 - 打开或将文件保存到本地硬盘。我想自动查看生成的文件，然后决定是否要将其保存到本地硬盘。有没有办法做到这一点？我想这是浏览器偏好的问题，但不确定。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T12:34:15.243

您可以使用 COM 实现此目的，但它不兼容浏览器。不过试试这种方式。

```
header('Content-disposition: inline');
header('Content-type: application/msword');
readfile('yourwordfile.doc');
exit; 
```

# jquery - jQuery：多个组，每个组都有全局选择器

> ID：11941208
> 
> 赞同：0
> 
> 时间：2012-08-13T19:46:03.603
> 
> 标签：jquery

我正在创建一个页面来管理电子邮件订阅，但我无法确定*从所有*每个组中取消订阅选项。

**问题**

我的问题是我不知道如何让*Un-subscribe from all*选项激活 Un-subscribe 列中与该特定组对应的单选按钮。

在检查取消订阅列中的单选按钮时，我还需要向`.selected`它们的标签添加一个类，以便为它们设置样式，以直观地帮助传达该选项已被选中。

Also note that within a specific group, when a *Subscribe* option is checked, the *Un-subscribe from all* checkbox of that specific group becomes unchecked and the class `.selected`is removed.

我知道这有点令人困惑（或很多），所以我创建了一个***[演示](http://jsfiddle.net/rzea/JpmFc/1/)***。

正如您将在 JS 注释中看到的那样，我可以选择单选按钮，但所有组的所有单选按钮都会被选中，而不是特定的单选按钮组。

我也尝试过使用`.parent()`, `.parents()`,`.closest()`方法，但我只是无法使其工作。

非常感谢您对此的任何帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T19:51:04.997

[http://jsfiddle.net/8MHHa/1/](http://jsfiddle.net/8MHHa/1/)

```
$(".unsubs-chkbx-group").click(function() {
    $(this).parents('table').first().find('.opt-out input:radio').attr('checked', true);
    $(this).parents('table').first().find('.opt-out label').addClass('active');
    //$('.opt-out input:radio').attr('checked', true);
    //$('.opt-out label').addClass('active');    
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T20:09:10.700

您可以这样做：

```
$(".unsubs-chkbx-group").change(function() {
    var $table = $(this).closest('tbody');

    // uncheck all
    $('tr:not(.group) input', $table).prop('checked', false);
    $('label', $table).removeClass('selected');

    if(this.checked) {
        var $elements = $('.opt-out', $table);
        $('label', $elements).addClass('selected');
        $('input', $elements).prop('checked', true);
    }
});

$('tbody input[type=radio]').change(function() {
    var $element = $(this);
    var $row = $element.closest('tr');
    $('label', $row).removeClass('selected');

    $element.parent().addClass('selected');
}); 
```

​</p>

[**演示**](http://jsfiddle.net/JpmFc/8/)

# python - 在文本文件中查找字符串，然后在 Python 中打印多个字符

> ID：11941210
> 
> 赞同：0
> 
> 时间：2012-08-13T19:46:11.730
> 
> 标签：python, search, line, substring, nltk

使用 Python，我需要在文本文件中搜索字符串“that/”

然后我需要获取行号（目前使用枚举这样做），并打印出“that\”+剩余的文本，直到下一个空格。

示例文本：First/LS thing/NN I/PRP want/VBP to/TO ask/VB is/VBZ if/IN you/PRP remember/VBP any/DT books/NNS that/IN you/PRP read/VBP as/ IN a/DT 孩子/NN

示例输出：that/IN 14

这是我现在拥有的代码，它可以正常运行，但是无论它应该在哪里打印“that/xx”，它什么都不会打印。

```
with open(filename) as f:
            for num, line in enumerate(f, 1):
                if 'that/' in line:
                    myString = line
                    mySub = myString[myString.find('that/'):myString.find(' ')]
                    print(mySub, str(num))
                    formattedLines.append(mySub + ' ' + str(num) + '\n') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T19:48:52.987

我认为`myString.find(' ')`是问题所在。那可以在 'that/' 之前找到一个字符串，因此您可以尝试获取`myString[50:3]`.

相反，试试这个：

```
with open(filename) as f:
    for num, line in enumerate(f, 1):
        if 'that/' in line:
            start = myString.find('that/')
            offset = myString[start:].find(' ')
            end = start + offset if offset != -1 else len(myString)
            mySub = myString[start:end]
            print(mySub, str(num))
            formattedLines.append(mySub + ' ' + str(num) + '\n') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T19:51:04.157

我认为问题在于空格可能发生在`that/`. 在找到的索引处开始搜索空格`that/`：

```
with open(filename) as f:
    for num, line in enumerate(f, 1):
        if 'that/' in line:
            myString = line
            where_is_that = myString.find('that/')
            mySub = myString[where_is_that:myString.find(' ', where_is_that)]
            print(mySub, str(num))
            formattedLines.append(mySub + ' ' + str(num) + '\n') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T21:10:29.157

我决定采用不同的方法，并使用正则表达式：

```
import re

def analyze(line, word):
    regex = r'\b{0}/[^\W]*'.format(word)
    match = re.search(regex, line)
    return match.group() if match else None

def extract(filename, word):
    output = []
    with open(filename) as f:
        for num, line in enumerate(f, 1):
        result = analyze(line, word)
        if result:
            output.append(result + ' ' + str(num) + '\n')
    return output 
```

# iphone - 如何使用 AWS iOS SDK 删除对象？

> ID：11941212
> 
> 赞同：5
> 
> 时间：2012-08-13T19:46:15.820
> 
> 标签：iphone, ios, ipad, amazon-s3, amazon-web-services

我正在尝试删除上传到 S3 存储桶的公共图像（上传图像`cannedACL`的属性）。`S3PutObjectRequest``[S3CannedACL publicRead]`

`S3DeleteObjectRequest`AWS SDK[文档](http://docs.amazonwebservices.com/AWSiOSSDK/latest/)中有一个类，但[该类](http://docs.amazonwebservices.com/AWSiOSSDK/latest/Classes/S3DeleteObjectRequest.html)似乎没有任何属性或初始化方法。

根据其他语言的示例代码，看起来应该有`key`or`bucket`属性或设置这些属性的初始化方法，就像在 iOS SDK 的[`S3PutObjectRequest`](http://docs.amazonwebservices.com/AWSiOSSDK/latest/Classes/S3PutObjectRequest.html)类中一样，用于将文件上传到存储桶。

这里发生了什么？SDK只是不完整吗？有没有办法使用 iOS AWS 开发工具包删除对象？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-03-03T21:56:16.280

对于 S3 V2 的 iOS SDK，此代码派上用场

```
AWSS3 *s3 = [AWSS3 defaultS3];
                AWSS3DeleteObjectRequest *deleteRequest = [AWSS3DeleteObjectRequest new];
                deleteRequest.bucket = S3BucketName;
                deleteRequest.key = climb.imageKey;
                [[[s3 deleteObject:deleteRequest] continueWithBlock:^id(BFTask *task) {
                    if(task.error != nil){
                        if(task.error.code != AWSS3TransferManagerErrorCancelled && task.error.code != AWSS3TransferManagerErrorPaused){
                            NSLog(@"%s Error: [%@]",__PRETTY_FUNCTION__, task.error);
                        }
                    }else{
                        // Completed logic here
                    }
                    return nil;
                }] waitUntilFinished];
```

这很大程度上基于此处为库编写的单元测试：[https ://github.com/aws/aws-sdk-ios/blob/master/AWSS3Tests/AWSS3Tests.m](https://github.com/aws/aws-sdk-ios/blob/master/AWSS3Tests/AWSS3Tests.m)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-16T18:38:00.300

只是关闭您链接到的文档，但这不起作用吗？

```
[s3Client deleteObjectWithKey:@"objectKey" withBucket:@"my-bucket"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-15T09:37:10.187

Art Gillespie 的回答对我来说也很好。

但是，我还发现您可以通过在 S3 删除对象请求上设置`key`和属性来实现相同的目的：`bucket`

```
S3DeleteObjectRequest *dor = [[S3DeleteObjectRequest alloc] init];
dor.key = AWS_OBJ_PATH;
dor.bucket = AWS_BUCKET;

[s3Client deleteObject:dor]; 
```

# asp.net-mvc-3 - 将 [JsonIgnore] 应用于属性会导致 DataAnnotation 属性“丢失”

> ID：11941223
> 
> 赞同：1
> 
> 时间：2012-08-13T19:46:55.310
> 
> 标签：asp.net-mvc-3, data-annotations, json.net

给定以下代码：

```
 [JsonIgnore]
    [Display(Name = "Loan Cap")]
    public virtual string SomeProperty { get; protected set; } 
```

当 ASP.NET MVC 调用 DataAnnotationsModelMetadataProvider.CreateMetadata 以完成以下调用时：

```
@Html.DisplayNameFor(model => model.SomeAttribute) 
```

传递给 CreateMetadata 的属性列表不包括 [Display] 属性（或就此而言的 [JsonIgnore]）。如果我删除 [JsonIgnore]，则找到 [Display] 并将其传递给 CreateMetadata。有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-01-31T21:14:26.267

这似乎是旧版本 Newtonsoft.Json nuget 包中的错误/问题。
我确认该问题存在于软件包的 9.0.1 版本中

> **此问题已在版本 10.0.1 中修复**

就我而言，我在执行时遇到实体框架迁移挂起更改错误，但不是来自包管理器控制台。我发现这是因为同样的问题，导致所有属性“丢失”的 JsonIgnore 属性控制台命令“Update-Database”和“Add-Migration”仍然看到 ForeignKey 属性。但是，如果代码正在执行，Entity Framework 看不到 ForeignKey 属性并抛出了一个挂起的更改迁移错误。

# asp.net-web-api - 对字符串以外的数据类型使用 oData substringof

> ID：11941231
> 
> 赞同：2
> 
> 时间：2012-08-13T19:47:23.377
> 
> 标签：asp.net-web-api, odata

我想知道是否可以对字段`substringof`的 oData 使用（或类似的？）过滤器`int`？因为我想`Enquiries`根据他们查询我的所有内容，`EnquiryID`但我希望它是包含而不是完全匹配。这可以进行强制转换/转换吗？

到目前为止，这是我的查询：

`/api/Enquiries?filter=substringof('123', EnquiryID)`

但我收到以下错误：

```
Method 'Boolean Contains(System.String)' declared on type 'System.String' 
cannot be called with instance of type 'System.Int32' 
```

我希望它返回包含`123`在其`EnquiryID`. 使用`DateTime`类型时我也得到相同的结果..

## 编辑

这是我`Get`在`Enquiries`控制器中的方法：

```
[Queryable]
public IQueryable<EnquiryDTO> Get()
{
    var query = from enquiry in context.Enquiries
                select new EnquiryDTO
                {
                    CustomerID = enquiry.CustomerID,
                    OrderDate = (DateTime)enquiry.EnquiryDate,
                    OrderID = enquiry.EnquiryID,
                    Owner = enquiry.Owner
                };
    return query.AsQueryable();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:48:11.590

这是不可能的。OData 不支持在查询中转换原始类型。如果不出意外，麻烦将在于使用什么格式（特别是对于行日期时间等）。不过，您可以编写一个服务操作来为您处理这个问题（假设您的查询提供程序支持这个）。

# jquery - 隐藏默认选项卡面板

> ID：11941234
> 
> 赞同：0
> 
> 时间：2012-08-13T19:47:43.010
> 
> 标签：jquery, tabs, hide

我有在加载时显示所有面板的选项卡。尽管它恢复为仅显示默认值，但它在 iframe 高度设置中产生了问题。经过一番搜索，我找到了这个 jquery。首先用css隐藏其他面板

```
.hide { position: absolute; top: -9999px; left: -9999px; } 
```

而jquery替换隐藏类是

```
 // Accessible hiding fix
        $(".hide").css({
            "position": "relative",
            "top": 0,
            "left": 0,
            "display": "none"
        }); 
```

起初它看起来不错，但在切换选项卡后它会一起显示面板内容。因此，无论第三次单击哪个选项卡，它都会将所有内容与上一个选项卡混合

我不确定在这里做什么。这是完整页面的链接。 [http://tinyurl.com/c5nhet5](http://tinyurl.com/c5nhet5)

我应该如何修复代码以摆脱这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:06:56.130

您应该只删除隐藏类，而不是尝试覆盖它的作用。

```
$("#tabs").tabs();
$(".hide").removeClass("hide"); 
```

# c# - 从 C# 中具有相同名称的 xml 标记中提取值

> ID：11941238
> 
> 赞同：0
> 
> 时间：2012-08-13T19:47:52.523
> 
> 标签：c#, xml

我有一个包含动态生成的 xml 文档的 C# .NET 应用程序。它跟踪订单信息，例如名称、下订单的日期，所有这些东西。使用 innerText 提取这些标签中包含的信息没有问题。

但是，当我们的客户“构建”订单时，他们可以附加文件....

每个文件都保存在标签下的xml doc中

所以我最终得到了这样的东西（简化）：

```
<order>
   <Number>1</Number>
   <Email>example@stack.com</Email>
   <Date>2012-08-13</Date>
   <File>File1.txt</File>
   <File>File2.txt</File>
</order> 
```

正如我所说，我使用提取其他信息

```
 foreach (XmlElement element in file.SelectNodes("/order"))
   {
       String strNumber = element.SelectSingleNode("Number").InnerText,
               strEmail = element.SelectSingleNode("Email").InnerText,
                strDate = element.SelectSingleNode("Date").InnerText;
   } 
```

但是，当我使用名称执行此操作时，我收到一个关于未设置为实例的错误...我完全理解。

我的问题是，我怎样才能得到这些信息？可以附加任意数量的文件，从零到用户想要的任意数量。

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:00:58.560

这是代码示例。

订单代表xml订单

```
[TestFixture]
public class ForTest
{
    [Test]
    public void Test()
    {
        var root = XElement.Load("order.xml");
        var order = CreateOrder(root);
    }

    private Order CreateOrder(XElement element)
    {
        var result = new Order
        {
            Number = int.Parse(element.Element("Number").Value),
             Date = DateTime.Parse(element.Element("Date").Value),
            Email = element.Element("Email").Value,
            Files = element.Descendants("File").Select(x => x.Value).ToList()
        };
        return result;
    }
}
public class Order
{
    public int Number { get; set; }
    public string Email { get; set; }
    public DateTime Date { get; set; }
    public List<string> Files { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T20:05:15.287

如果您知道属性，则可以使用序列化来执行此操作

```
[XmlRoot("order")]
public class order
{
[XmlElement("Number")]
public string  Number{get;set;}
[XmlElement("Email")]
public string  Email{get;set;}
[XmlElement("Date")]
public string  Date{get;set;}
[XmlElement("File")]
public string[] File{get;set;}
} 
```

下面的代码是反序列化的

```
 public static T DeSerializeXMLString<T>(string xmlString)
    {
        XmlSerializer xs = new XmlSerializer(typeof(T));
        MemoryStream memoryStream = new MemoryStream(StringToUTF8ByteArray(xmlString));
        XmlTextWriter xmlTextWriter = new XmlTextWriter(memoryStream, Encoding.UTF8);
        return (T)xs.Deserialize(memoryStream);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T20:01:06.797

这是一个基于 LINQ 的解决方案：

```
XDocument XMLDoc = XDocument.Load("XMLFile.xml");
var LoadInfo =  from Node in XMLDoc.Descendants("order")                       
                select new
                  {
                    Number = Node.Element("Number").Value,
                    Email = Node.Element("Email").Value,
                    Date = Node.Element("Date").Value,
                    File = Node.Element("File").Value,
                  }; 
```

用法：

```
 foreach(var Info in LoadInfo)
    {
      //Do something with the info.
      //Console.WriteLine(Info.Email);
    } 
```

# asp.net - 在 C#.net 中使用存储过程检索多个表

> ID：11941243
> 
> 赞同：0
> 
> 时间：2012-08-13T19:48:08.167
> 
> 标签：asp.net, c#-4.0

如何创建可以从多个表中选择并在 HTML 表中显示结果的存储过程？我通过只使用一个表并使用 C# 在 ASP.NET 中使用来做到这一点。

我使用了网格视图，但只有一张表就成功了。我本可以使用只使用一个表的存储过程。我也使用了 DataSource，但它只适用于一张表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T20:02:32.240

那将是这样的：

```
CREATE PROCEDURE MyProc 
as
BEGIN

  SELECT a.columna, b.columnb, c.columnc 
  from table a join table b on a.id=b.id
  join table c on c.id=a.id

END 
```

现在你的标记：

```
<asp:gridview id="grid" runat="server" DataSource="SqlDataSource1" .../>

<asp:SqlDataSource id="SqlDataSource1" SelectCommand="MyProc" 
SelectCommandType="StoredProcedure"  ConnectionString="<%$ ConnectionStrings:MyConnectionString%>" 
```

而已。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T20:07:19.123

您可以从存储过程返回多个表。每个`SELECT`语句一个，然后从 dataAdapter 填充一个数据集。每个`SELECT`语句的数据将在数据集中的单独表中。

我希望这就是你的意思！

# java - 显示图像并转换为灰度 - OpenCV for Android, Java API

> ID：11941251
> 
> 赞同：3
> 
> 时间：2012-08-13T19:48:42.213
> 
> 标签：java, android, image, opencv

我正在使用[OpenCV4Android](http://code.opencv.org/projects/opencv/wiki/OpenCV4Android) API 在 Eclipse 中编写一个 Android 应用程序。如何`Mat`轻松显示图像，仅用于调试？在 C++ 中，根据 OpenCV 教程，您可以执行以下操作：

```
namedWindow( "Display window", CV_WINDOW_AUTOSIZE );// Create a window for display.
imshow( "Display window", image ); // Show our image inside it. 
```

但 Android 的 Java API 内部似乎没有`namedWindow`函数`org.opencv.highgui.Highgui`。

另外，我想将图像加载为灰度。在 C++ 中，根据[imread not working in Opencv](https://stackoverflow.com/questions/7417637/imread-in-opencv)，你会这样做：

```
imread("blackandwhite.jpg", 0); 
```

但 Java API`Highgui.imread()`只有文件名参数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T02:57:19.057

概括：

将图像转换为灰度：`Imgproc.cvtColor(image, image, Imgproc.COLOR_BGR2GRAY);`

显示图像：请参见[此处](https://stackoverflow.com/questions/12344700/)和[此处](https://stackoverflow.com/questions/12360810/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T04:22:43.737

这是一个示例代码，它将使用 OpenCV 在 imageView 中显示图像（必须在可绘制文件夹中包含图像）：

```
 ImageVIew imgView = (ImageView) findViewById(R.id.sampleImageView);
        Mat mRgba = new MAt();
        mRgba = Utils.loadResource(MainAct.this, R.drawable.your_image,Highgui.CV_LOAD_IMAGE_COLOR);
        Bitmap img = Bitmap.createBitmap(mRgba.cols(), mRgba.rows(),Bitmap.Config.ARGB_8888);
        Utils.matToBitmap(mRgba, img);
        imgView.setImageBitmap(img); 
```

和 xml 必须有一个 ImageView 如下：

```
<ImageView
        android:id="@+id/sampleImageView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"/> 
```

希望这有助于解决您的问题..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T19:56:19.623

> 但 Android 的 Java API 似乎在 org.opencv.highgui.Highgui 中没有 namedWindow 函数。

因为你必须在`View`. 查看来自 WEB 的示例。

> 另外，我想将图像加载为灰度。

与此类转换`cvCvtColor`的代码一起使用。`CV_BGR2GRAY`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-31T13:53:07.853

虽然这不处理图像的显示，但这是一个快速的纯 java 静态方法，通过文件路径读取图像，然后将其转换（并写入）为灰度。

```
/**
 * Get an OpenCV matrix from an image path and write the image as grayscale.
 * @param filePath The image path.
 * @return The matrix.
 */
public static Mat loadOpenCvImage(final String filePath) {
    Mat imgMat = Highgui.imread(filePath, Highgui.CV_LOAD_IMAGE_GRAYSCALE);
    if (imgMat == null) {
        Log.e(TAG, "error loading file: " + filePath);
    } else {
        Log.d(TAG, "Ht: " + imgMat.height() + " Width: " + imgMat.width());
        final String outPath = filePath + "_gray.jpg";
        Log.d(TAG, outPath);
        Highgui.imwrite(outPath, imgMat);
    }
    return imgMat;
} 
```

# postgresql - 我如何索引此查询以进行自由文本搜索

> ID：11941253
> 
> 赞同：3
> 
> 时间：2012-08-13T19:48:47.883
> 
> 标签：postgresql, pg-search

嗨亲爱的 postgres 用户，

短篇小说，我有一个与州相关的地址表（每个地址都有一个州）。我将运行以下查询进行搜索：

```
SELECT "addresses".*, (ts_rank((to_tsvector('simple', coalesce("addresses"."name"::text, '')) || to_tsvector('simple', coalesce(pg_search_85240c410826a2b0e0f0e5.pg_search_442c4ad3183a256248ef8d::text, ''))), (to_tsquery('simple', ''' ' || 'test' || ' ''' || ':*')), 0)) AS pg_search_rank 
FROM "addresses" 
LEFT OUTER JOIN (SELECT "addresses"."id" AS id, string_agg("states"."name"::text, ' ') AS pg_search_442c4ad3183a256248ef8d 
            FROM "addresses" INNER JOIN "states" ON "states"."id" = "addresses"."state_id" GROUP BY "addresses"."id") pg_search_85240c410826a2b0e0f0e5 ON pg_search_85240c410826a2b0e0f0e5.id = "addresses"."id" 
            WHERE (((to_tsvector('simple', coalesce("addresses"."name"::text, '')) || to_tsvector('simple', coalesce(pg_search_85240c410826a2b0e0f0e5.pg_search_442c4ad3183a256248ef8d::text, ''))) @@ (to_tsquery('simple', ''' ' || 'test' || ' ''' || ':*')))) AND (company_id = 2142) 
            ORDER BY pg_search_rank DESC, "addresses"."id" ASC 
```

直截了当，对吧？这在一台好机器和一个 8581 地址上大约需要 1.226 毫秒。我需要改进这一点，所以我创建了这 2 个索引

```
CREATE INDEX index_addresses_search_by_name ON addresses USING gin(to_tsvector('simple', COALESCE((public.addresses.name)::text, '')))
CREATE INDEX index_state_search_by_name ON states USING gin(to_tsvector('simple', COALESCE((public.states.name)::text, ''))) 
```

这应该会有所帮助，在 Addresses 上创建索引并在 States 上创建索引，但它没有:( 查询和以前一样慢，并且*解释*显示索引没有被使用。

请提供建议，

编辑：

以下是解释分析将显示的内容：

```
"Sort  (cost=11.39..11.40 rows=1 width=4824) (actual time=0.947..0.947 rows=0 loops=1)"
"  Sort Key: (ts_rank((to_tsvector('simple'::regconfig, COALESCE((public.addresses.name)::text, ''::text)) || to_tsvector('simple'::regconfig, COALESCE((string_agg((states.name)::text, ' '::text)), ''::text))), '''test'':*'::tsquery, 0)), public.addresses.id"
"  Sort Method: quicksort  Memory: 17kB"
"  ->  Nested Loop Left Join  (cost=6.19..11.38 rows=1 width=4824) (actual time=0.905..0.905 rows=0 loops=1)"
"        Join Filter: (public.addresses.id = public.addresses.id)"
"        Filter: ((to_tsvector('simple'::regconfig, COALESCE((public.addresses.name)::text, ''::text)) || to_tsvector('simple'::regconfig, COALESCE((string_agg((states.name)::text, ' '::text)), ''::text))) @@ '''test'':*'::tsquery)"
"        ->  Seq Scan on addresses  (cost=0.00..5.14 rows=1 width=4792) (actual time=0.904..0.904 rows=0 loops=1)"
"              Filter: (company_id = 2142)"
"        ->  HashAggregate  (cost=6.19..6.20 rows=1 width=520) (never executed)"
"              ->  Hash Join  (cost=1.02..6.18 rows=1 width=520) (never executed)"
"                    Hash Cond: (public.addresses.state_id = states.id)"
"                    ->  Seq Scan on addresses  (cost=0.00..5.11 rows=11 width=8) (never executed)"
"                    ->  Hash  (cost=1.01..1.01 rows=1 width=520) (never executed)"
"                          ->  Seq Scan on states  (cost=0.00..1.01 rows=1 width=520) (never executed)"
"Total runtime: 1.226 ms" 
```

编辑2

地址 ddl

```
--
-- PostgreSQL database dump
--

SET statement_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SET check_function_bodies = false;
SET client_min_messages = warning;

SET search_path = public, pg_catalog;

SET default_tablespace = '';

SET default_with_oids = false;

--
-- Name: addresses; Type: TABLE; Schema: public; Owner: trucking; Tablespace: 
--

CREATE TABLE addresses (
    id integer NOT NULL,
    name character varying(255),
    street character varying(255),
    city character varying(255),
    zip_code character varying(255),
    primary_phone character varying(255),
    alternate_phone character varying(255),
    fax character varying(255),
    email character varying(255),
    contact character varying(255),
    company_id integer DEFAULT 0 NOT NULL,
    motor_carrier_number character varying(12),
    state_id integer,
    created_at timestamp without time zone,
    updated_at timestamp without time zone,
    alternate_phone2 character varying(12),
    insurance_expires_on date,
    notes text
);

ALTER TABLE public.addresses OWNER TO trucking;

--
-- Name: addresses_id_seq; Type: SEQUENCE; Schema: public; Owner: trucking
--

CREATE SEQUENCE addresses_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

ALTER TABLE public.addresses_id_seq OWNER TO trucking;

--
-- Name: addresses_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: trucking
--

ALTER SEQUENCE addresses_id_seq OWNED BY addresses.id;

--
-- Name: id; Type: DEFAULT; Schema: public; Owner: trucking
--

ALTER TABLE ONLY addresses ALTER COLUMN id SET DEFAULT nextval('addresses_id_seq'::regclass);

--
-- Name: addresses_pkey; Type: CONSTRAINT; Schema: public; Owner: trucking; Tablespace: 
--

ALTER TABLE ONLY addresses
    ADD CONSTRAINT addresses_pkey PRIMARY KEY (id);

--
-- Name: index_addresses_on_company_id; Type: INDEX; Schema: public; Owner: trucking; Tablespace: 
--

CREATE INDEX index_addresses_on_company_id ON addresses USING btree (company_id);

--
-- Name: index_addresses_on_state_id; Type: INDEX; Schema: public; Owner: trucking; Tablespace: 
--

CREATE INDEX index_addresses_on_state_id ON addresses USING btree (state_id);

--
-- Name: index_addresses_search_by_city; Type: INDEX; Schema: public; Owner: trucking; Tablespace: 
--

CREATE INDEX index_addresses_search_by_city ON addresses USING gin (to_tsvector('simple'::regconfig, COALESCE((city)::text, ''::text)));

--
-- Name: index_addresses_search_by_email; Type: INDEX; Schema: public; Owner: trucking; Tablespace: 
--

CREATE INDEX index_addresses_search_by_email ON addresses USING gin (to_tsvector('simple'::regconfig, COALESCE((email)::text, ''::text)));

--
-- Name: index_addresses_search_by_name; Type: INDEX; Schema: public; Owner: trucking; Tablespace: 
--

CREATE INDEX index_addresses_search_by_name ON addresses USING gin (to_tsvector('simple'::regconfig, COALESCE((name)::text, ''::text)));

--
-- Name: index_addresses_search_by_street; Type: INDEX; Schema: public; Owner: trucking; Tablespace: 
--

CREATE INDEX index_addresses_search_by_street ON addresses USING gin (to_tsvector('simple'::regconfig, COALESCE((street)::text, ''::text)));

--
-- PostgreSQL database dump complete
-- 
```

国家 DDL

```
--
-- PostgreSQL database dump
--

SET statement_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SET check_function_bodies = false;
SET client_min_messages = warning;

SET search_path = public, pg_catalog;

SET default_tablespace = '';

SET default_with_oids = false;

--
-- Name: states; Type: TABLE; Schema: public; Owner: trucking; Tablespace: 
--

CREATE TABLE states (
    id integer NOT NULL,
    name character varying(255) NOT NULL,
    abbrev character varying(255) NOT NULL,
    country character varying(255)
);

ALTER TABLE public.states OWNER TO trucking;

--
-- Name: states_id_seq; Type: SEQUENCE; Schema: public; Owner: trucking
--

CREATE SEQUENCE states_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

ALTER TABLE public.states_id_seq OWNER TO trucking;

--
-- Name: states_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: trucking
--

ALTER SEQUENCE states_id_seq OWNED BY states.id;

--
-- Name: id; Type: DEFAULT; Schema: public; Owner: trucking
--

ALTER TABLE ONLY states ALTER COLUMN id SET DEFAULT nextval('states_id_seq'::regclass);

--
-- Name: states_pkey; Type: CONSTRAINT; Schema: public; Owner: trucking; Tablespace: 
--

ALTER TABLE ONLY states
    ADD CONSTRAINT states_pkey PRIMARY KEY (id);

--
-- Name: index_states_search_by_abbrev; Type: INDEX; Schema: public; Owner: trucking; Tablespace: 
--

CREATE INDEX index_states_search_by_abbrev ON states USING gin (to_tsvector('simple'::regconfig, COALESCE((abbrev)::text, ''::text)));

--
-- Name: index_states_search_by_name; Type: INDEX; Schema: public; Owner: trucking; Tablespace: 
--

CREATE INDEX index_states_search_by_name ON states USING gin (to_tsvector('simple'::regconfig, COALESCE((name)::text, ''::text)));

--
-- PostgreSQL database dump complete
-- 
```

迄今为止最好的重写

```
SELECT consolidated_address.id, (ts_rank((to_tsvector('simple', coalesce(consolidated_address.name::text, '')) || to_tsvector('simple', coalesce(consolidated_address.state_name::text, ''))), (to_tsquery('simple', ''' ' || 'Gallaway' || ' ''' || ':*')), 0)) AS pg_search_rank 
FROM (
 SELECT "addresses".id,
    "addresses".name,
    string_agg("states".name::text, ' ') as state_name
    FROM addresses
    LEFT OUTER JOIN "states"
    ON "states".id = "addresses".state_id
    GROUP BY "addresses".id) consolidated_address
WHERE 
    (((to_tsvector('simple', coalesce(consolidated_address.name::text, '')) || to_tsvector('simple', coalesce(consolidated_address.state_name::text, ''))) @@ (to_tsquery('simple', ''' ' || 'Gallaway' || ' ''' || ':*')))) 
```

它有点快，但仍然不使用任何索引

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T01:25:19.913

我对您的解释分析输出的阅读是您的表太小而无法从使用索引中获利。PostgreSQL 上的顺序扫描相对便宜，因为表是作为物理文件加载的，并且 PostgreSQL 可以利用操作系统预取等。

请记住，没有任何计划比从磁盘加载单个页面并按顺序扫描它更快。使用索引只会增加开销。顺序扫描不需要花费任何时间，因此在您拥有真实数据之前不要担心。

值得注意的是，在 PostgreSQL 上，在获得数据之前优化查询是导致问题多于解决方案的秘诀。我真诚的建议是等待分析查询，直到你有一个真实的返回真实数据。然后我们可以确定哪些索引会有所帮助。

编辑：你说查询很慢。但计划显示它在 1 毫秒内执行。你预计需要多长时间？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T17:48:50.487

从 Github 交叉发布的答案[https://github.com/Casecommons/pg_search/issues/51](https://github.com/Casecommons/pg_search/issues/51)

我是生成此查询的[pg_search Ruby gem 的作者。](http://github.com/Casecommons/pg_search)

* * *

是的，不幸的是，我不知道如何让 :associated_against 查询对索引起作用，至少目前实现的方式是这样。

这是因为 :associated_against 搜索所有关联记录的文本，而不是一次搜索单个记录。

因此，例如，如果您加入了一个标签表，并且有 3 条记录（“foo”、“bar”和“baz”），那么您会期望搜索“foo baz”来找到它。更容易索引的解决方案只适用于“foo”或“baz”查询，但不适用于“foo baz”，因为没有一个单独的标签行与这两个术语匹配，如果你知道我的意思的话。

不可能跨多个记录建立索引（至少据我所知）。

也许我们可以在 pg_search 中显示一个选项来逐条搜索记录，它可以使用索引，但不能跨记录匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T23:42:17.587

This query is slow because the query you are joining to via left outer join is using aggregating the entire address table then restricting by company_id. Does the address table have a company_id? Try moving the where clause to the inner query to restrict the number of records returned.

# javascript - 覆盖/扩展 Magento 核心 javascript 文件

> ID：11941257
> 
> 赞同：14
> 
> 时间：2012-08-13T19:48:57.333
> 
> 标签：javascript, magento, magento-1.6

最近几天，由于一些客户的抱怨和与我们的营销人员的讨论，我收到了更改可配置产品选项的默认行为的请求。他们要求我从选项下拉列表中删除 + $xx.xx，因为它会使客户/访客感到困惑，并且只留下可用选项而不显示价格变化。从他们的角度来看，这很公平，但从开发人员的角度来看，我认为这有点棘手。该站点运行 Magento CE 1.6.2，我们需要覆盖/更改的文件是 /public_html/js/varien/configurable.js。我们需要更改其中的 getOptionLabel 函数，使其不显示价格变化。所以我的问题是：更改此文件而不触及核心 javascript 文件的正确 Magento 方法是什么？提前致谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-13T20:35:02.773

从原型手册[http://prototypejs.org/doc/latest/language/Function/prototype/wrap/](http://prototypejs.org/doc/latest/language/Function/prototype/wrap/)中查看此内容，您可以包装任何对象方法，甚至在需要时调用“父级”，这是一个伪示例：

```
//where Product.Config is the object/class you need to "override"
Product.Config.prototype.getOptionLabel  = Product.Config.prototype.getOptionLabel.wrap(function(parentMethod){
    //replace the original method here with your own stuff
    //or call parentMethod(); if conditions don't match
}); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-08-14T06:22:54.047

只是为了添加到@anton-s 的绝对正确答案，您还可以进行“完整”类重写：

```
// Create the original class
var ClassA = Class.create();
ClassA.prototype = {
    initialize: function(config) {
        this.config = config;
    },
    test: function(msg) {
        console.log('Hi from class A with message ' + msg);
    }
};

// Create new class extending the original class
var ClassB = Class.create(ClassA, {
    // $super is a reference to the original method
    test: function($super, msg) {
        console.log('Hi from class B');
        console.log('this.config is accessible in class B: ' + this.config);
        $super(msg + ' ...')
    }
});

// To make the extend an override, you can do this:
ClassA = ClassB;
// ClassA now is ClassB overriding the original ClassA
var a = new ClassA('some config data');
a.test('Call A 1'); 
```

由于所有这些仅适用于原型类，而不适用于已实例化的对象，因此我还将介绍这个 hack，这也几乎是 wrap() 所做的：

```
// Overriding a method of an already instantiated object
// There are many ways to do this more elegantly thanks to the amazing JS scoping magic
a.origTest = a.test;
a.test = function(msg) {
    console.log('Hi from the patched method');
    this.origTest(msg);
}
a.test('Call A 2'); 
```

请记住，尽管该`wrap()`方法更好，并且也可以用于类定义或具体实例。

```
// Wrap method of concrete instance
spConfig.getOptionLabel = spConfig.getOptionLabel.wrap(function(parentMethod, option, price) {
    return parentMethod(option, price);
});

// Wrap method of class declaration
Product.Config.prototype.getOptionLabel = Product.Config.prototype.getOptionLabel.wrap(function(parentMethod, option, price) {
    return parentMethod(option, price);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-07T12:26:04.207

**如何在 Magento 1.9 EE 中覆盖 \js\varien\configurable.js 并添加新的数据属性**

创建文件 \js\jsoverride\configurable.js：

```
 Product.Config.prototype.reloadOptionLabels = Product.Config.prototype.reloadOptionLabels.wrap(function (parentMethod, element) {
    var selectedPrice;
    if (element.options[element.selectedIndex].config && !this.config.stablePrices) {
        selectedPrice = parseFloat(element.options[element.selectedIndex].config.price);
    } else {
        selectedPrice = 0;
    }
    for (var i = 0; i < element.options.length; i++) {
        if (element.options[i].config) {
            element.options[i].text = this.getOptionLabel(element.options[i].config, element.options[i].config.price - selectedPrice);
            element.options[i].setAttribute('data-in-stock', element.options[i].config.in_stock);
        }
    }
}); 
```

创建或使用文件：\app\design\frontend\enterprise\YOUR_THEME\layout\local.xml 并添加下一行：

```
<?xml version="1.0"?>
<layout version="0.1.0">
  <catalog_product_view>
    <reference name="head">
      <action method="addJs"><script>jsoverride/configurable.js</script></action>
    </reference>
  </catalog_product_view>
</layout> 
```

注意，将数据填充到文件中的 element.options[i].config.in_stock

> app\design\frontend\enterprise\YOUR_THEME\template\catalog\product\view\type\options\configurable.phtml

与下一行

```
var spConfig = new Product.Config(UPDATED JSON WITH NEW ATTRIBUTE); 
```

# python - 正则表达式基于可选子字符串捕获可选组

> ID：11941259
> 
> 赞同：0
> 
> 时间：2012-08-13T19:49:09.293
> 
> 标签：python, regex, regex-group

我想创建一个正则表达式来捕获基于可选子字符串的可选组。示例可能是：

```
DATEF[[%d/%m/%Y %H:%M 
DATEF[[%H:%M]]
DATEF
TIME 
```

等等

我想捕获`DATE`and 参数。`%H:%M`该表达式`(.*?)\[\[(.*?)\]\]`适用于参数，但可选的排除字符串失败并返回 null。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:32:44.117

我建议这个：

`/^([a-zA-Z]+)(?:\[\[([^\]]+)\]\])?$/`

第 1 组保存函数名，如果 a`[[`存在，第 2 组捕获和 之间的所有内容`[[`，`]]`如果正方形不存在，第 2 组将根本不存在。

**编辑：**

请注意，外部非捕获组包含一个捕获组：

```
/^([a-zA-Z]+)         #captures the command
    (?:\[\[           #matches, but not captures the opening brackets
        ([^\]]+?)     #captures the content of the brackets
    \]\])?            #matches the closing brackets
$/x 
```

# java - DAO 和域中的继承

> ID：11941260
> 
> 赞同：0
> 
> 时间：2012-08-13T19:49:10.797
> 
> 标签：java, subclass, dao

假设一个域有一个继承链。例如，它可能有一个`Fruit`超类，可能的子类是`Apple`and `Banana`。如何形成相应的 DAO？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:08:39.483

根据[模式](http://java.sun.com/blueprints/corej2eepatterns/Patterns/DataAccessObject.html)- 每个具体类一个。然而，在实践中，您应该创建一个通用 DAO，然后在您有特定查询时将该 DAO 子类化。

# matlab - 是否可以加载已保存在 .mat 文件中的矩阵的单列？

> ID：11941261
> 
> 赞同：2
> 
> 时间：2012-08-13T19:49:11.830
> 
> 标签：matlab, file-io

我得到了一个大的 .mat 文件，如下所示：

```
whos('-file','grips.mat')
  Name       Size               Bytes  Class     Attributes

  grip1      1x1              1662198  struct              
  grip2      1x1              2032758  struct              
  grip3      1x1              1660278  struct              
  grip4      1x1              1650678  struct              
  grip5      1x1              1607478  struct              
  grip6      1x1             63353718  struct 
```

每个抓握都有几个记录的人抓握的肌肉信号 (EMG)，来​​自多个传感器。我只想为这些手柄之一加载这些传感器信号之一。我想执行以下操作，但它不起作用：

```
EMG_signal = load('grips', 'grip6.data(1,:)') 
```

我能得到的最接近的是：

```
EMG_signal = load('grips', 'grip6');
EMG_signal = EMG_signal.grip6.data(1,:); 
```

然而，这涉及加载数倍于我需要的数据，然后丢弃它。有没有简单的捷径？

这也适用于存储在 .mat 文件中的对象——当然我不必加载整个对象只是为了获取其变量（属性）之一的值。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T02:45:35.347

很好的问题。看起来这取决于您运行的是哪个版本的 Matlab。从 R2011b 开始， Mathworks 添加了[matfile 函数](http://www.mathworks.com/help/techdoc/ref/matfile.html)。

但不幸的是，您的具体问题仍然无法解决，因为您有结构而不是直接存储的矩阵。如果“grip6”是一个矩阵，您可以像这样访问子矩阵：

```
matObj = matfile('grips.mat')
EMG_signal = matObj.grip6(1,:) 
```

但正如文件所说，

> matfile 不支持索引到：
> 
> *   结构体字段

有关 Matlab 如何不支持从 mat 文件加载部分矩阵或数组的进一步阅读，请参阅这个[matlab 中心线程](http://www.mathworks.com/matlabcentral/answers/9208)。

# sql - IN 语句中的 case 语句

> ID：11941266
> 
> 赞同：0
> 
> 时间：2012-08-13T19:49:51.107
> 
> 标签：sql, sql-server

我有一个变量年龄用于我的查询，如下所示：

```
Declare @age as int 11

Select * from people p where p.age = @age 
```

但是当我在@age 上设置 0 时，我想向所有 10 到 13 岁的人展示，所以我正在尝试做这样的事情：

```
Select * 
from people p 
where p.age in( case 
                     when @age = 0 
                          then 10, 11, 12, 13
                          else @age
                     end
              ) 
```

谁能给我一盏灯？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T19:54:07.080

你不需要`CASE`声明，你可以`WHERE`稍微改变你的条款。这应该返回相同的结果：

```
Select * 
from people p 
where 
( 
    @age = 0 
    AND p.age IN (10, 11, 12, 13)
)
OR
(
    @age != 0 
    AND p.age = @age
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T19:54:11.717

您不需要 case 语句：

```
SELECT col1, col2, ..., coln
FROM people AS p 
WHERE (@age = 0 AND p.age BETWEEN 10 AND 13)
OR (@age <> 0 AND p.age = @age) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T19:54:01.123

这似乎最简单

如果业务规则发生变化，也很容易修改。

```
declare @min int
declare @max int
declare @age int

set @age = 0

if (@age = 0)
begin
   SET @min = 10
   SET @max = 13
end
else
begin
   SET @min = @age
   SET @max = @age
end 

Select * 
from people p 
where age >= @min and age <= @max 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T19:51:39.110

```
select *
from people
where (age between 10 and 13 and @age=0) 
or (age = @age) 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-13T20:04:31.320

您需要将 SELECT 添加到您的 IN() 部分

```
Select * 
from people p 
where p.age in (SELECT case 
                     when @age = 0 
                          then 10, 11, 12, 13
                          else @age
                     end
              ) 
```

# jquery - Uncaught SyntaxError with Infinite Scroll wordpress 插件

> ID：11941270
> 
> 赞同：0
> 
> 时间：2012-08-13T19:50:05.043
> 
> 标签：jquery, wordpress, plugins, syntax-error

我刚刚移动了主机，现在我的网站上出现了这个错误：[http](http://craigmdennis.com/articles/) ://craigmdennis.com/articles/我不知道为什么。

```
Uncaught SyntaxError: Unexpected token < infinitescroll.init.js.php:1 
```

任何人都可以阐明它吗？会不会是一个没有打开的 PHP 扩展？

编辑：当我单击控制台中的错误时，它显示以下内容：

```
警告：require_once(../../../wp-load.php) [<a href='function.require-once'>function.require-once</a>]：无法打开流：没有这样第 5 行 D:\Sites\Craig M Dennis\content\plugins\infinite-scroll\infinitescroll.init.js.php 中的文件或目录

```

和

```
致命错误：require_once() [<a href='function.require'>function.require</a>]：无法打开所需的 '../../../wp-load.php' (include_path='. ;C:\php\pear') 在 D:\Sites\Craig M Dennis\content\plugins\infinite-scroll\infinitescroll.init.js.php 第 5 行

```

在这些之前是一个`<br>`似乎导致控制台中的初始错误但似乎存在潜在错误的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:38:23.740

试试这个，如果文件路径有问题：

```
$c = 0;
$f = '';
while($c < 6) {
  $f .= '../';
  if(file_exists($f.'wp-load.php')) {
    include_once($f.'wp-load.php');
    break;
  }
  $c++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T19:53:06.067

你可能会使用`<?php`两次。尝试删除其中之一。

# javascript - 为什么在没有单击按钮的情况下加载页面时会触发我的脚本函数？

> ID：11941273
> 
> 赞同：0
> 
> 时间：2012-08-13T19:50:17.963
> 
> 标签：javascript, jquery, .net, events

我正在尝试使用 JQuery 的 on() 函数将事件附加到按钮以及稍后将动态创建和注入的任何按钮。但是，当我运行测试网站时，它会调用 alertMe() 而不单击按钮。alertMe 在 .js 文件中，当然，我有 JQuery 文件。这是我可以创建的最简单的示例 - 我是否在这里遗漏了使用 JQuery 附加此事件的内容？

```
<body>
    <script src="Scripts/JScript.js" type="text/javascript"></script>
    <script src="Scripts/jquery.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('button').on("click", alertMe());
        });
    </script>
    <form id="form1" runat="server">
    <div id="1">
        <button data-attr="1">
            Say Sumfin'</button>
    </div>
    </form>
</body> 
```

`data-attr`只是一个自定义属性，我将使用它来识别我将要附加的按钮。

## 编辑

所以问这个问题的原因仍然很明显，我保持原样。但这是我过去实际将事件正确附加到动态添加的元素的原因。

```
$(document).on('click', '[data-attr]', alertMe); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T19:51:10.490

这：

```
$( 'button' ).on( 'click', alertMe ); 
```

The `.on()` method expects a function reference as its second argument. Notice the difference:

```
alertMe // function reference

alertMe() // function invocation 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T19:52:02.547

Because you're putting parentheses after the function name! That means, "call this function".

# bash - windows cmd环境

> ID：11941274
> 
> 赞同：1
> 
> 时间：2012-08-13T19:50:25.007
> 
> 标签：bash, batch-file, cmd, environment

我有一个程序可以启动具有特定环境的 cmd 控制台。通过单击按钮启动控制台的问题，因此我无法在该环境中自己创建自定义启动器。

我想要什么：给定一个带有设置变量的文件（通过在自定义启动的 cmd 中运行 set 命令生成），我想通过读取该文件在当前 cmd 控制台中设置环境。

例子：

in.txt（注意右侧相同变量中的空格）：

```
var1=c:\program files
path=c:\;c:\bin
var2=d:\folder with libs 
```

运行脚本后如：`./script.sh in.txt`当前cmd控制台中的环境应该是（运行`set`命令后输出）：

```
var1=c:\program files
path=c:\;c:\bin
var2=d:\folder with libs 
```

注意：只要环境设置正确，可以在脚本内部使用 bash 脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:40:00.307

我已经编写了以下工作脚本：

*   用法：script.bat 文件名
*   如果未提供 file_name 打印使用情况
*   使用环境变量创建备份文件**envbkp.bat**，然后再删除它们以进行可能的恢复

    ```
    @echo off

    set _exitStatus=0
    set _argcActual=0
    set _argcExpected=1

    echo.

    for %%i in (%*) do set /A _argcActual+=1

    if %_argcActual% NEQ %_argcExpected% (
        call :_ShowUsage %0%
        set _exitStatus=1
        goto:_EOF
    )

    set _exitStatus=
    set _argcActual=
    set _argcExpected=

    if exist ".\envbkp.bat" del ".\envbkp.bat"
    echo @echo off > envbkp.bat
    for /f "tokens=1* delims==" %%a in ('set') do (
        echo set %%a=%%b>> .\envbkp.bat
        set %%a=
    )

    for /f "tokens=1* delims==" %%a in ('type %~1') do (
        set %%a=%%b
    )
    goto:_EOF

    :_ShowUsage
        echo [USAGE]: %~1 env_file
        echo.
    if NOT "%~2" == "" (
        echo %~2
        echo.
    )
    goto:eof

    :_EOF 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T20:23:16.980

只需将 in.txt 重命名为 in.bat 即可，内容应为：

```
set var1=c:\program files
set path=c:\;c:\bin
set var2=d:\folder with libs 
```

并在.bat 中运行

# android - 应该将什么 Uri 传递给应用程序，以便它可以读取另一个应用程序内部存储中的文件 (MODE_WORLD_READABLE)？

> ID：11941280
> 
> 赞同：0
> 
> 时间：2012-08-13T19:50:57.790
> 
> 标签：android, android-widget, android-imageview, android-file

我正在制作一个`ImageView`可以显示图像的小部件。我将一些图像存储在内部存储器中，模式为`MODE_WORLD_READABLE`. 现在我需要发送一张`Uri`这张图片，这样我就可以使用`setImageUri`. 如何创建这样的 Uri ？

我相信这是必需的，因为小部件由主屏幕进程处理。另外，`setImageBitmap()`这对我来说不是一个选择，因为它在许多情况下会导致 BINDER TRANSACTION 失败。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:06:18.093

[使用Uri.fromFile(file)](http://developer.android.com/reference/android/net/Uri.html#fromFile%28java.io.File%29) api创建您的 uri 。

# actionscript-3 - 为什么桌面上没有 StageVideo？

> ID：11941286
> 
> 赞同：2
> 
> 时间：2012-08-13T19:51:09.537
> 
> 标签：actionscript-3, air

**空气版：** 3.1.0.4880

**描述符 XML 包含：**

```
<renderMode>direct</renderMode> 
```

（在默认位置，在 initialWindow 块内）

**编译器参数：** -locale en_US -swf-version=13

**显卡：** nVidia GTX 560

在调试器和独立运行时都尝试过。纳达。（也尝试通过 AIR 安装哪个接缝使用 3.3，仍然没有）

**检测代码为：**

```
public function MainClass()
    addEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
}

private function onAddedToStage(evt:Event) {
    stage.addEventListener(StageVideoAvailabilityEvent.STAGE_VIDEO_AVAILABILITY, onStageVideoReady);
    removeEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
}

private function onStageVideoReady(evt:StageVideoAvailabilityEvent) :void{
    trace(evt.availability); //<-- outputs "unavailable"
} 
```

知道我错过了什么吗？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T21:35:10.610

查找有关 Adob​​e AIR 平台公共计划的信息的最佳位置是查看[Flash 平台路线图](http://www.adobe.com/devnet/flashplatform/whitepapers/roadmap.html)。

这可能会回答您的问题：

> Adobe 计划在 2013 年发布的版本中添加对 Adob​​e AIR 中硬件加速 StageVideo 的支持。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-18T14:53:33.213

Adobe 发布了 3.8 版本，为桌面版本启用了 StageVideo（万岁！）。我已经成功测试过，1080p/h264 视频的 CPU 不超过 5%！

但不适用于所有系统...不确定要求，但似乎完全取决于显卡。

*   Win 7 / 英特尔图形媒体加速器 3150 > 失败
*   赢 7 / Nvidia ION > 好的
*   Win 7 / Intel 高清显卡 > 好的
*   Win XP / Intel 82945G Express 芯片组系列 > 失败

# c# - 确定所选电子邮件是来自收件箱还是已发送邮件

> ID：11941288
> 
> 赞同：4
> 
> 时间：2012-08-13T19:51:12.530
> 
> 标签：c#, outlook, vsto, outlook-addin

我正在编写**Outlook 加载项**，需要确定所选电子邮件是否来自`Inbox`或`Sent Items`以便在将电子邮件保存在数据库中时可以使用文件夹 =“收件箱”或“已发送”来标记电子邮件。

我知道我可以将文件夹名称与收件箱或已发送邮件进行比较并确定文件夹，但是，我如何确定所选电子邮件何时位于收件箱的子文件夹之一中。是否有一个`FolderType`属性可以检查所选电子邮件的文件夹是**收件箱**还是已**发送**（*类似于用 标识项目类型`OlItemType`*）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T20:48:35.533

您需要查看[`MailItem.Parent`](http://msdn.microsoft.com/en-us/library/office/ff863655.aspx)并将其转换为[`Outlook.Folder`](http://msdn.microsoft.com/en-us/library/office/ff863890.aspx). 拥有 后`Folder`，您可以通过 访问显示名称[`Folder.Name`](http://msdn.microsoft.com/en-us/library/office/ff869734.aspx)。如果要确定所选项目是否是 的子文件夹`Inbox`，则需要递归调用`Parent`树直到`Parent`为空才能找到根父文件夹。

```
Outlook.Explorer explorer = Globals.ThisAddIn.Application.ActiveExplorer();
Outlook.MailItem mailItem = explorer.Selection.OfType<Outlook.MailItem>().First();
Outlook.Folder parentFolder = mailItem.Parent as Outlook.Folder;
if (parentFolder.Parent == null) // we are at the root
{
  string folderName = parentFolder.Name;
}
else
  // .. recurse up the parent tree casting parentFolder.Parent as Outlook.Folder... 
```

您显然应该在此示例代码中添加*错误处理*和*对象处理。*

# php - CodeIgniter 的会话类是否特定于用户的 IP 地址？

> ID：11941291
> 
> 赞同：-1
> 
> 时间：2012-08-13T19:51:24.763
> 
> 标签：php, codeigniter, session, cookies, ip

基本上，我的客户在我托管多个 CodeIgniter 项目的服务器上发现了一个错误。对于所有项目，我对程序的某些部分使用相同的 CodeIgniter 会话变量，例如登录/成员资格。我的客户完全位于不同的位置、不同的 IP 地址，他们遇到了问题，这让我相信这是因为 CodeIgniter 的会话变量名称在项目之间发生冲突。

那么，如果用户在不同的位置，不同的 IP 地址，CodeIgniter 的会话类不应该处理这些吗？还是我有设置/配置来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T19:56:57.253

如果你想匹配用户的 IP 地址，你可以在你的`./application/config/config.php`:

```
$config['sess_match_ip'] = TRUE; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T19:57:26.460

CodeIgniter 制作专用的会话 ID，其中用户的 IP 地址作为组件之一。至少可以说，重复会话 ID 的可能性非常小。

更多信息：[http ://codeigniter.com/user_guide/libraries/sessions.html](http://codeigniter.com/user_guide/libraries/sessions.html)

您可以尝试将用户数据添加到会话 ID 以进一步减少重复 ID 的可能性，但我怀疑问题出在 CodeIgniter 类中。

# html - 在另一个 z-index 图层中围绕固定溢出元素移动文本

> ID：11941296
> 
> 赞同：6
> 
> 时间：2012-08-13T19:51:49.850
> 
> 标签：html, css, text, overflow, css-position

情况：我的模板中有一个固定的图像溢出了内容。因为它是固定的，所以有时图像会溢出文本。有没有一种方法可以解决这个问题并使文本在图像周围移动，就好像它`float`在内容 div 中一样。

请参阅[html 示例](http://jsfiddle.net/cLnz6/)。

首选 CSS 答案，可以接受 Javscript/jQuery 答案。

*一些额外的细节：*

*   内容随机。它可以很长，也可以很短，包含图像并具有 html。
*   `#cloud`必须与任何内容保持相同的位置。

> 该问题在实时网站上不再可见，因为它已通过将#cloud 置于较低的 z-index 层中来解决。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T07:53:45.137

您正在寻找的是所谓的[CSS Exclusions 和 Shapes](http://dev.w3.org/csswg/css3-exclusions/)。这是相对较新的，并没有被浏览器广泛支持。您可能还对[这篇关于 CSS Exclusions 的精彩文章](http://galjot.si/css-exclusions)感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T11:04:18.470

我相信这就是你要找的东西：http: [//jsfiddle.net/pG3AG/](http://jsfiddle.net/pG3AG/)

云 div 必须相对定位，而不是绝对定位，因为绝对定位会导致元素根据视口定位，而不是相对于其他元素（如本例中的内容元素）。此外，盒子的 right:20px 位置需要减少或删除，以便该行中“未完成”单词的最后一个字母不会出现在云框后面。

希望这对你有用！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T15:24:55.177

设法用 JQuery 解决了 JS Fiddle 示例（抱歉，无法提出 CSS 解决方案）

```
var _top = $('#cloud').offset().top;
var _left = $('#cloud').offset().left;
var _height = $('#cloud').height();

var _contentTop = $('#content').offset().top;
var _contentLeft = $('#content').offset().left;
var _contentWidth = $('#content').width();

var _floatWidth = (_contentLeft+_contentWidth)-_left
    var _floatTop = _top-_contentTop;

$('#content').prepend('<div id="virtual" style="float:right">&nbsp;</div>');
$('#virtual').css('margin-top',_floatTop).css('width',_floatWidth).css('height',_height); 
```

基本上，我添加了一个隐藏的 div 浮动到云的位置，因此它位于内容中，将文本推到周围，云出现在前景中。

查看您链接到的网站上的内容，您可能需要将 div 移到周围的容器中并稍微调整一下数字，但它或多或少在这里工作[http://jsfiddle.net/cLnz6/58/](http://jsfiddle.net/cLnz6/58/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T04:06:52.873

如果我明白

( [http://jsfiddle.net/VG4Ef/1/](http://jsfiddle.net/VG4Ef/1/) )

```
body{
    background-color: #8888FF;
}

#container{
    float:left;
    width: 400px;
    background-color:#CFCFFF;
    height: auto;
    margin: 10px auto;
    padding: 10px;
    margin-right:10px;
}

#content{
    background-color: #FFDFDF;
    width: 340px;
    padding: 5px;
    position:relative;
    float:left:
}

#cloud{
    width: 130px;
    height: 100px;
    background-color:#FFF;
    float:right;
    top: 120px;
    text-align: center;
    line-height: 100px;
    color: #999;
    font-size: 12px;
    float:right;
    display:inline-block;
    margin-top:-100px;
    margin-right: -100px;
    background: yellow;
}
​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T14:20:13.930

就个人而言，我会做的是将云缩小一点，那个云足够大，可以做到这一点。然后我会将这些云放在具有透明背景的固定 Div 中，这样它们就可以留在屏幕上，使其看起来像是在漂浮。

第二件事。如果第一个不是一个选项。我会通过更改云的那个小尖端上没有任何东西而将云放在主要提要后面`Z-index` ，而背景中的其他云也在提要后面，所以我不认为如果那个小尖端会引起任何问题一朵云挂在饲料后面。

# python - python-找出二进制表示中等于1的数字与输入数字中的数字相同

> ID：11941297
> 
> 赞同：0
> 
> 时间：2012-08-13T19:51:56.527
> 
> 标签：python, count, binary

我是python编程的新手。刚刚被这个问题困住了。我必须将自然数 n 作为输入，输出将是自然数 m，使得 m>n 并且 m 二进制表示中 1 的数量 = n 二进制表示中 1 的数量。（示例输入：23，输出：27）这就是我写的。我在使用 while 循环时遇到了问题。

```
n=int(input('input number:'))
x=''
for i in range(1,n+1):
    x=str(n%2)+x 
    n>>=1

List=[]

for i in x:
    List.append(i)
n_count=List.count('1') 
m=n+1
y=''
while m>n:
    for i in range(1,m+1):
        y=str(m%2)+y 
        m>>=1

    List2=[]
    for i in y:
        List2.append(i)
    m_count=List2.count('1')

    if m_count==n_count:
        print (m)
        break

    m=m+1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T19:58:57.860

这听起来像家庭作业，所以我只是给你一个提示。您可以使用该`bin`函数来获取整数的二进制表示，而不是做所有这些位的操作。要获得一个具有相同数量的数字，只需在除第一个位置之外的任何位置添加一个零，然后检查第二个参数做什么`int`来获取一个数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T20:28:53.793

由于`bin()`返回一个表示二进制值的字符串并`count()`返回子字符串在字符串中出现的次数，因此您可以循环直到找到一个数字。由于这看起来像家庭作业，因此有一个总体思路：

```
while m > n: # this may as well say "while True:", so maybe think of a better condition.
    m += 1
    if bin(m).count('1') == bin(n).count('1'): # if you find a better condition you won't need an if statement.
        break 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T19:59:19.767

一般来说，这确实是理解二进制数的问题。请记住，将数字乘以 2 不会改变 1 的数量。所以你可以这样做`n*2`。

您可以通过执行来验证它

```
n=int(input('input number:'))
m= n*2

print 'm is', m
print "n's 1s", bin(n).count('1')
print "m's 1s", bin(m).count('1')
print "m > n", m > n 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T20:02:37.343

`m = n<<1`

运算符`<<`是左*二元移位*。它将二进制表示中的所有内容向左移动一个位置，并在右端插入一个零。这将使数字的值加倍，但请注意影响 s 的数量，`1`因为您只是在移动位。

一些例子

```
0001 << 1 == 0010
0010 << 2 == 1000
0101 << 1 == 1010
1000 >> 1 == 0100 
```

此操作比乘法更快，并且可以在乘以 2 的幂时替换它。

```
>>> 5*2 == 5 << 1
True
>>> 10*4 == 10 << 2
True
>>> 3*8 == 3 << 3
True 
```

这样想吧。如果我问你“868554 * 6 是什么？” 你必须做一些思考。但如果我说“456103284 * 10 是什么？” 您只需在右端添加一个 0 即可。计算机可以做类似的事情，但使用 *2 而不是 *10

# r - 使用 effects 包绘制 logit 概率

> ID：11941300
> 
> 赞同：0
> 
> 时间：2012-08-13T19:52:02.947
> 
> 标签：r

我正在尝试运行一个 logit 模型并绘制一些重要预测变量的概率曲线。我正在尝试使用 Effects 包来做到这一点。

```
df=data.frame(income=c(5,5,3,3,6,5),
              won=c(0,0,1,1,1,0),
              age=c(18,18,23,50,19,39),
              home=c(0,0,1,0,0,1))
str(df)

md1 = glm(factor(won) ~ income + age + home, 
          data=df, family=binomial(link="logit"))

summary(md1)

plot(effect("income", md1), grid=TRUE) 
```

但我想知道如何绘制图表，以便显示基于收入（或任何其他预测变量）的获胜概率（响应）。

但是，我想要做的是生成相同的图，y 轴为赢，x 轴为收入，但曲线显示年龄和家庭的概率（在单独的图中）。

在效果文档中没有看到如何执行此操作。帮助！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:26:18.067

如果我理解正确，您需要在模型中引入交互项。例如，

```
md1 <- glm(factor(won) ~ income*age + home,
  data=df, family=binomial(link="logit"))

with(df, mean(age))
#[1] 27.83333
with(df, mean(age)-sd(age))
#[1] 14.33642
with(df, mean(age)+sd(age))
#[1] 41.33025

plot(effect("income*age", md1, 
  xlevels=list(income=0:10, age=c(14.3, 27.8, 41.3))), multiline=TRUE) 
```

将向您展示收入对不同年龄值的韩元的影响。

# string - 在matlab中以单元格格式查找信息

> ID：11941301
> 
> 赞同：0
> 
> 时间：2012-08-13T19:52:12.140
> 
> 标签：string, matlab, cell

我有以下单元格：

```
matr = '01/07/2012'    '00:00'    [ 0.2000]
       '05/07/2012'    '17:00'    [      1]
       '05/07/2012'    '20:00'    [ 8.4000]
       '05/07/2012'    '21:00'    [ 1.2000]
       '06/07/2012'    '02:00'    [ 0.4000]
       '06/07/2012'    '19:00'    [      5]
       '07/07/2012'    '01:00'    [      7]
       '08/07/2012'    '00:00'    [ 4.2000]
       '08/07/2012'    '01:00'    [      3]
       '08/07/2012'    '04:00'    [ 0.2000]
       '09/07/2012'    '16:00'    [ 0.2000]
       '09/07/2012'    '23:00'    [      3]
       '22/07/2012'    '20:00'    [ 4.2000]
       '23/07/2012'    '20:00'    [ 1.2000]
       '23/07/2012'    '22:00'    [ 5.4000]
       '25/07/2012'    '22:00'    [14.6000]
       '27/07/2012'    '21:00'    [ 0.2000]
       '28/07/2012'    '23:00'    [ 0.2000]
       '30/07/2012'    '20:00'    [ 0.2000] 
```

我只想选择 20:00 到 23:00 之间的信息。一旦 matr(:,2) 是字符串信息，我该如何继续？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:48:04.583

如果您只关心小时，那么只需使用该列来创建索引数组。这可以通过 datevec 函数快速完成。

```
[~,~,~,H] = datevec(matr(:,2));
idx = H >= 20 & H <= 23;
matr(idx,:) 
```

# git - Git 签出远程裸仓库到旧分支

> ID：11941306
> 
> 赞同：1
> 
> 时间：2012-08-13T19:52:40.607
> 
> 标签：git, deployment, web-deployment

我目前正在测试通过 Git 部署网站，但无法理解以下内容：

目前，我的 DEV 环境中有一个裸远程仓库，带有一个接收后挂钩，它将 GIT_WORK_TREE 设置为我的 webroot。我使用“git push DEV master”之类的语法从本地仓库推送到那里。这很好用。但是，我也有一个“开发”分支，我将其推送到 DEV（接收后挂钩设置为“git checkout -f [BRANCH_NAME]”），这也很好用。

我的问题是针对以下情况：假设我在 DEV 上发现了一个错误（从“开发”分支推送）但我没有时间修复它（也许那天有客户评论）。我希望能够做一个“git push DEV master”（master 分支对 DEV 进行了最后一次无错误推送，并且是当前 DEV 上的开发提交的祖先）并完成它。但是，当我这样做时，远程仓库告诉我“一切都是最新的！” 我认为这是有道理的，但我想做的是强制 git 从“主”分支接受推送并触发 post-receive 钩子，这对于正确部署 Web 资产是必要的。

我尝试直接进入 ssh 中的远程仓库并尝试从那里签出 master，但它告诉我我需要一个工作树来执行此操作（因为它是裸露的，我假设）。

这样做的正确方法是什么？如果可能，我想避免进行还原或变基，但也许这是唯一的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:29:47.060

> ，但我想做的是强制 git 从“主”分支接受推送并触发 post-receive 钩子，这对于正确部署 Web 资产是必要的。

问题是您已经将更改推送到遥控器，因此没有什么可推送的。您的选择包括：

*   强制更改您的本地分支...例如，通过更新文件中的序列号、提交和推送。
*   只需`post-receive`手动在服务器上运行钩子，填写必要的环境变量。

转到远程存储库并尝试签出主分支应该可以工作，前提是您同时拥有存储库和工作树（可能通过`GIT_WORK_TREE`自己设置）。但是，这不会触发您的`post-receive`钩子，因此您需要手动处理那里的任何其他逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:49:34.337

使用标签。例如，将您当前部署的版本标记为“当前”，推送此标签并让您的 post-receive-hook 作用于此标签。

```
#!/bin/sh
read oldrev newrev refname 
```

$refname 现在包含 /revs/tags/current 并且 $newrev 包含标记提交的哈希。要更改为不同的修订版，请删除“当前”标签并将其设置在别处并推送标签。这样您就不需要在文件中进行虚拟更改。

# java - 数组的读锁

> ID：11941307
> 
> 赞同：0
> 
> 时间：2012-08-13T19:52:43.717
> 
> 标签：java, concurrency, multidimensional-array, thread-safety, scalability

我正在编写一个应用程序来模拟图书市场。

考虑一本名为“BookA”的书，其中包含以下数据：

```
 45   47  50  51  55    70  73  75  79 81

**Bookstore1 Buy Qty**  2   3   5   11  1   
**Bookstore2 Buy Qty**  1   3   5   1   10

**Bookstore1 Sell Qty**                       1   11  7   8  20
**Bookstore2 Sell Qty**                       2   5   2   5  10

                             **Data for BookA** 
```

数值数据存储为`volatile int[][] dataStorage = new int[5][10]`row[0] 包含价格的位置。

row[1] ..row[4] 包含每个书店的可用数量。例如，row[1]col[0] 表示以 45 美元的价格，Bookstore1 愿意购买 2 份 BookA。类似地，row[4][5] 表示 Bookstore2 愿意以 70 美元出售 2 本。

我的市场上有大约 500 本书，每本书的数据都存储在 ConcurrentHashMap 中：（`ConcurrentMap<String, int[][]> map = new ConcurrentHashMap<String, int[][]>(500)`）

“BookA”----> int[][]

“Bookn”----> int[][]

Bookstore1 和 Bokstore2 中的数据通过两个单独的线程到达。目前，我将原始数据对象存储在阻塞队列中，并使用单个线程（“ProcessingThread”）来创建和修改（在更新的情况下）上述数组。

![在此处输入图像描述](../Images/fcc45364e24eaaa9c89fdc3d9d5205c8.png)

最后，我的客户在一个单独的线程（“CustomerThread”）中向我发送购买/出售书籍的订单。

一个典型的订单如下所示：“以 50 美元购买 3 份 BookA”：

收到订单后，我执行以下操作：

1) 检查地图是否包含键“BookA”。

2) 如果是，那么我在持有**ReadLock** (ReentrantReadWriteLock.ReadLock) 的同时克隆 BookA 的数据 (int[][])。

3）然后我遍历克隆数据以找到价格和总数量。

我的问题是：

a）有人可以确认我不需要同步生产者（“ProcessingThread”）。由于 dataStorage (int[][]) 仅由“ProcessingThread”线程更改。此外，由于 dataStorage 是易失的，因此当我写入它时将建立一个“之前发生”（因此，“CustomerThread”将看到最新更新的数据）。

b) 是否有更好的（比使用锁更具可扩展性）方法来确保“Cu​​stomerThread”中的线程安全？我可以通过使用 AtomicIntegerArray 逃脱吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:08:28.280

我在这里看到了一些麻烦。您的数组是易变的，但元素不是。只有一个线程修改元素，你在那里是安全的。但是您不能保证 CustomerThread 会看到元素更改。此外，即使元素本身*是*易变的（不容易做到），数组也会发生点点滴滴的变化，并且 CustomerThread 很容易看到不完整的数据。

第一个解决方案是对每个阵列进行适当的锁定。然后 CustomerThread 必须等到完整的数组准备就绪。（多个 CustomerThreads 可以让您解决一本书阻止对其他书籍的操作的问题，我认为这不会使您的并发问题变得更糟。）

另一种解决方案是替换整个数组而不是修改它们。数组实际上是不可变的。从一组数据到下一组数据的变化是瞬时的，并且数据始终是一致的。*现在，数组引用*是 volatile的事实确保了更改将立即对 CustomerThread 可见，而现在不必等待锁定。

我喜欢第二种解决方案，它更能回答你的问题 B。（原子往往很昂贵。如果你可以用一把原子替换一把锁，那么你就遥遥领先，但如果你用 100 把锁替换一把锁原子，甚至只有 10 个，你都落后了。）

但是，我有点担心多个订单进来的结果。如果还剩一本书，你不想卖给 5 个不同的人。在我看来，从您所写的内容来看，CustomerThread 上的订单和从阻塞队列进入 ProcessingThread 的信息需要仔细同步。ProcessingThread 和 CustomerThread 都是一个线程，所以它们单独可以。但他们可以同时做一些事情，比如减少可用书籍的数量并订购一些书籍。这两个事件需要按顺序发生，所以我们知道谁拿到了书，而正式的 Java 同步块让我觉得最好的方式是这样做。

但是您最清楚自己要做什么（我对书店将哪种数据放入队列感到有些困惑）。如果它实际上没有回答您的问题，希望这可以为您提供一些信息。

# java - Java 正则表达式不同的分组

> ID：11941308
> 
> 赞同：2
> 
> 时间：2012-08-13T19:52:44.243
> 
> 标签：java, regex

我想通过的例子是：

1.  “..”
2.  “废话”
3.  “废话*”
4.  “废话。废话”
5.  “废话。废话*”
6.  2-5（非 1）中的任何一个，末尾附加 [@attrib="value"]**或**[@attrib="value" and @attrib2="value2" and ...]

我不想通过的例子是：

1.  “”
2.  “。”
3.  " "
4.  “……”
5.  “.blah”
6.  “-废话”

基本上想要“..”

**或者**

可以包含但不以点或破折号开头的 az 字符串（可选地后跟 *）（可选地后跟属性/值列表）

组是：

1.  ".." 或字符串 az 包括但不以点/破折号开头
2.  "*" 或 StringUtils.EMPTY 如果不匹配
3.  属性组或 StringUtils.EMPTY 如果不匹配

我目前拥有的正则表达式是：

```
"^([a-z]+[a-z.\\-]*)([\\*]*)[\\[]*([^\\]]*)[\\]]*" 
```

...如果只有“..”或者第一组以字母开头但以点或破折号结尾，则不起作用。我为使其适用于这两种情况所做的一切努力都把整个事情搞砸了。

感谢所有帮助。

通过我下面评论中的正则表达式并稍微更改与此正则表达式一起使用的代码，我让它为“..”工作，但是，我还没有让它与仅以字母结尾的第一组一起工作。我尝试将 [az]+$ 添加到该组的末尾：

```
"^(\\.\\.|^([a-z]+[a-z.\\-]*[a-z]+$)([\\*]*)[\\[]*([^\\]]*)[\\]]*)$" 
```

...但这会导致后一组出现问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T00:23:22.233

此正则表达式似乎满足您的问题中指定的要求：

```
^(?:(\.{2})|([a-z]+\.?[a-z]*\*?)\s?\[?(?:(@\w+="\w+")(?:\sand\s)?)*\]?)$ 
```

我假设您能够进行开始/结束行断言，因为您正在尝试进行它们。如果不是，请分别从开头和结尾删除“^”和“$”。

在 java 中，使用以下代码运行：

```
Pattern regex = Pattern.compile("^(?:(\\.{2})|([a-z]+\\.?[a-z]*\\*?)\\s?\\[?(?:(@\\w+=\"\\w+\")(?:\\sand\\s)?)*\\]?)$", Pattern.CASE_INSENSITIVE | Pattern.UNICODE_CASE);
Matcher matcher = regex.matcher("target string");
if (matcher.matches()) {
    for (int i = 1; i <= matcher.groupCount(); i++) {
        String targetGroup = matcher.group(i)
    }
} 
```

希望这可以帮助。

# slickgrid - 如何在 SlickGrid 单元格编辑器中实现 jQuery 自动完成

> ID：11941311
> 
> 赞同：5
> 
> 时间：2012-08-13T19:52:55.990
> 
> 标签：slickgrid

我正在设置 SlickGrid 并且需要有一个带有自动完成编辑器的列。我尝试了修改 TextEditor 或 DateEditor。没有任何效果。

任何人都可以通过使用 TextEditor 作为基础给我一个粗略的实现草图吗？

非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T20:19:13.663

我在 slick.editors.js 中执行了此操作 - 可能有一些错误，但应该可以工作并帮助您入门：

```
$.extend(true, window, {
    "Slick": {
      "Editors": {
        "Auto": AutoCompleteEditor,
        "Text": TextEditor,
        "Integer": IntegerEditor,
        "Date": DateEditor,
        "YesNoSelect": YesNoSelectEditor,
        "Checkbox": CheckboxEditor,
        "PercentComplete": PercentCompleteEditor,
        "LongText": LongTextEditor
      }
    }
  });

  var availableTags = [
                        "ActionScript",
                        "AppleScript",
                        "Asp",
                        "BASIC",
                        "C",
                        "C++",
                        "Clojure",
                        "COBOL",
                        "ColdFusion",
                        "Erlang",
                        "Fortran",
                        "Groovy",
                        "Haskell",
                        "Java",
                        "JavaScript",
                        "Lisp",
                        "Perl",
                        "PHP",
                        "Python",
                        "Ruby",
                        "Scala",
                        "Scheme"
                      ];

   function AutoCompleteEditor(args) {
     var $input;
     var defaultValue;
     var scope = this;
     var calendarOpen = false;

     this.init = function () {
       $input = $("<INPUT id='tags' class='editor-text' />");
       $input.appendTo(args.container);
       $input.focus().select();
       $input.autocomplete({
            source: availableTags
        });
     };

     this.destroy = function () {
       $input.autocomplete("destroy");
     };

     this.focus = function () {
       $input.focus();
     };

     this.loadValue = function (item) {
       defaultValue = item[args.column.field];
       $input.val(defaultValue);
       $input[0].defaultValue = defaultValue;
       $input.select();
     };

     this.serializeValue = function () {
       return $input.val();
     };

     this.applyValue = function (item, state) {
       item[args.column.field] = state;
     };

     this.isValueChanged = function () {
       return (!($input.val() == "" && defaultValue == null)) && ($input.val() != defaultValue);
     };

     this.validate = function () {
       return {
         valid: true,
         msg: null
       };
     };

     this.init();
   } 
```

让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-28T02:49:44.857

**只是对上一个答案的一点补充。**要使箭头键起作用，您可能需要这样做`stopPropagation`。这是编辑器`init`方法的一个片段。它在 CoffeeScript 中，但你会明白的：

```
$input.bind "keydown.nav", (e) ->
    e.stopPropagation() if (e.keyCode == $.ui.keyCode.DOWN || e.keyCode == $.ui.keyCode.UP || e.keyCode == $.ui.keyCode.ENTER) && $('ul.ui-autocomplete').is(':visible')
    e.stopImmediatePropagation() if e.keyCode == $.ui.keyCode.LEFT || e.keyCode == $.ui.keyCode.RIGHT 
```

上述片段的常规 JQuery 翻译：

```
$input.bind("keydown.nav", function(e) {
    if ((e.keyCode == $.ui.keyCode.DOWN || e.keyCode == $.ui.keyCode.UP ||
         e.keyCode == $.ui.keyCode.ENTER)
      && $('ul.ui-autocomplete').is(':visible')) e.stopPropagation();

    if (e.keyCode == $.ui.keyCode.LEFT || e.keyCode == $.ui.keyCode.RIGHT)
        e.stopImmediatePropagation();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-25T08:25:53.483

为了完整性以及与 ganeshk 和 arkadiy 的答案有关：

一个名为 Extazystas 的用户在 github 上包含了 ganeshk 解决方案：

[https://gist.github.com/Extazystas/b64d98f072344ec395fa](https://gist.github.com/Extazystas/b64d98f072344ec395fa)

要使自动完成功能起作用，您需要在 init 函数中包含 arkadiy 代码段，如下所示：

```
 $input.focus().select();

// insert from here ------------------------------
$input.bind("keydown.nav", function(e) {
    if ((e.keyCode == $.ui.keyCode.DOWN || e.keyCode == $.ui.keyCode.UP ||
         e.keyCode == $.ui.keyCode.ENTER)
      && $('ul.ui-autocomplete').is(':visible')) e.stopPropagation();

    if (e.keyCode == $.ui.keyCode.LEFT || e.keyCode == $.ui.keyCode.RIGHT)
        e.stopImmediatePropagation();
});
// insert to here ------------------------------

  $input.autocomplete({
    source: availableOptions
  }); 
```

# vba - Range.Rows = 2 上的循环中断 -- VBA

> ID：11941312
> 
> 赞同：1
> 
> 时间：2012-08-13T19:52:59.593
> 
> 标签：vba, excel

我将继续扩展对从大型机中提取的数据进行排序和组织的功能。这个问题是关于从这个[问题的焦点](https://stackoverflow.com/questions/11904443/pushing-data-from-datasheet-into-generated-template-worksheets)扩展功能。[数据是字母数字的，与之前提出的问题](https://stackoverflow.com/questions/11872651/filtering-column-based-on-range-vba)中的数据相似。

我试图允许用户在我的数据集的标准表中使用 1 个项目的列表，以及多个项目。我的代码如下：

```
'This subroutine is intended to take filtered data and use it to fill forms.
'These forms use a very basic text template worksheet, which is copied over for each worksheet.
'In general, these forms will number from 1 to 100, for discussion purposes.
'The idea is that each row of data in the DataSheet will be used to fill each worksheet tab.

Sub Shifter()

Dim RngOne As Range, RngCell As Range
Dim RngTwo As Range
Dim RngThree As Range, RngCell2 As Range 'RngCell2 is not currently in use
Dim RngRow As Range

Dim LastCell As Long

Dim arrList() As String, LongCount As Long

'Define range data within the Criteria Sheet
With Sheets("Criteria")
    LastCell = .Range("A" & Sheets("Criteria").Rows.Count).End(xlUp).Row
    If LastCell <= 1 Then
        MsgBox ("Please do not leave the Criteria sheet blank. Note that all criteria belong under Column A.")
        Exit Sub
    ElseIf LastCell = 2 Then
        Set RngOne = .Range("A2")
    Else
        Set RngOne = .Range("A2:A" & LastCell)
    End If
End With

'Push values into the array
LongCount = 0
For Each RngCell In RngOne
    ReDim Preserve arrList(LongCount)
    arrList(LongCount) = RngCell.Text
    LongCount = LongCount + 1
Next

'Filter the values to the desired criteria stored in the array.
With Sheets("Sheet1")

LastSheetCellCheck = .Range("A" & Sheets("Sheet1").Rows.Count).End(xlUp).Row
If LastCell <= 1 Then
    MsgBox ("Please do not leave the Criteria sheet blank. Note that all criteria belong under Column A.")
    Exit Sub
End If

Call ShiftToText
'For when this process is repeated.
If .FilterMode Then .ShowAllData

.Range("A:A").AutoFilter Field:=1, Criteria1:=arrList, Operator:=xlFilterValues

End With

'Add a Sheet to contain the filtered criteria
Sheets.Add After:=Sheets(1)
Sheets(2).Name = "DataSheet"

'With the original dataset, snag all existing data based on the range in Sheet Criteria.
'This avoids potential empty junk data and potential blanks pulled from the mainframe.
With Sheets("Sheet1")

LastCell = .Range("A" & Sheets("Criteria").Rows.Count).End(xlUp).Row
Set RngTwo = .Range("A2:AA" & LastCell)

End With

'Push data into DataSheet worksheet, so data is sequential
Sheets(1).Select
RngTwo.Copy
Sheets("DataSheet").Select
ActiveSheet.Paste

'Define the ranges used within the sheet
With Sheets("DataSheet")

If LastCell = 2 Then

    Set RngThree = .Range("A2")

Else

    LastCell = .Range("A" & Sheets("Criteria").Rows.Count).End(xlUp).Row
    Set RngThree = .Range("A2:A" & LastCell)

End If

End With

'For each row in the range, (1) generate a new datasheet, and copy the form from the template to the new sheet.
'(2) Rename the datasheet to be the value in Row 1, Column 1 ("A1").
'(3) Copy over information to the form based on column location in the Datasheet.
'This method, even if made functional, is both procedural and limited in scope. Recursion with text matching will be the end goal for this form.
For Each RngRow In RngThree.Rows

Sheets.Add After:=Sheets(1)

'Grab the text form from the Template and push it into the new sheet.
Sheets("TemplateSheet").Select
Cells.Select
Selection.Copy
Sheets(2).Select
ActiveSheet.Paste

Sheets(2).Name = Sheets("DataSheet").Cells(RngRow.Row, 1).Value

Sheets(2).Range("B3").Value = Sheets("DataSheet").Cells(RngRow.Row, 1).Value

Sheets(2).Range("B5").Value = Sheets("DataSheet").Cells(RngRow.Row, 2).Value

Sheets(2).Range("D3").Value = Sheets("DataSheet").Cells(RngRow.Row, 3).Value

Sheets(2).Range("F3").Value = Sheets("DataSheet").Cells(RngRow.Row, 4).Value

Sheets(2).Range("B10").Value = Sheets("DataSheet").Cells(RngRow.Row, 5).Value

Sheets(2).Range("B7").Value = Sheets("DataSheet").Cells(RngRow.Row, 6).Value

Sheets(2).Range("D10").Value = Sheets("DataSheet").Cells(RngRow.Row, 7).Value

Sheets(2).Range("F10").Value = Sheets("DataSheet").Cells(RngRow.Row, 8).Value

Sheets(2).Range("B13").Value = Sheets("DataSheet").Cells(RngRow.Row, 9).Value

Sheets(2).Range("D13").Value = Sheets("DataSheet").Cells(RngRow.Row, 10).Value

Sheets(2).Range("F13").Value = Sheets("DataSheet").Cells(RngRow.Row, 11).Value

Sheets(2).Range("B16").Value = Sheets("DataSheet").Cells(RngRow.Row, 12).Value

Sheets(2).Range("D16").Value = Sheets("DataSheet").Cells(RngRow.Row, 13).Value

Sheets(2).Range("F16").Value = Sheets("DataSheet").Cells(RngRow.Row, 14).Value

Sheets(2).Range("B19").Value = Sheets("DataSheet").Cells(RngRow.Row, 15).Value

Sheets(2).Range("D19").Value = Sheets("DataSheet").Cells(RngRow.Row, 16).Value

Sheets(2).Range("F19").Value = Sheets("DataSheet").Cells(RngRow.Row, 17).Value

Sheets(2).Range("B21").Value = Sheets("DataSheet").Cells(RngRow.Row, 18).Value

Sheets(2).Range("D21").Value = Sheets("DataSheet").Cells(RngRow.Row, 19).Value

Sheets(2).Range("B23").Value = Sheets("DataSheet").Cells(RngRow.Row, 20).Value

Sheets(2).Range("D23").Value = Sheets("DataSheet").Cells(RngRow.Row, 21).Value

 'Concatenate values from certain fields into one field
Sheets(2).Range("A26").Value = Sheets("DataSheet").Cells(RngRow.Row, 23).Value & Cells(RngRow.Row, 24).Value & Cells(RngRow.Row, 24).Value & Cells(RngRow.Row, 25).Value & Cells(RngRow.Row, 26).Value & Cells(RngRow.Row, 27).Value

Next RngRow

End Sub 
```

目前，执行代码会导致第 106 行出现“1004”运行时错误：`Sheets(2).Name = Sheets("DataSheet").Cells(RngRow.Row, 1).Value`。

`On Error Resume`我尽可能避免使用代码块，因为我认为它们是最后的手段，但我有点走投无路，并且可以将帮助/建议用于面向对象/通用 VBA 解决方案。

**编辑**

* * *

为了进一步澄清，添加简单的代码

```
MsgBox (Sheets(2).Name) 
```

后

```
Sheets(2).Name = Sheets("DataSheet").Cells(RngRow.Row, 1).Value 
```

[在 Rng.Rows = 1 处为“A2”返回“100-AAA”的测试值。此外，通过调用使用此问题开发](https://stackoverflow.com/questions/11888291/deleting-worksheets-based-on-multiple-worksheet-criteria)的删除脚本，在代码执行开始时删除测试表。代码在 Rng.Rows = 2 处失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:32:40.777

I think I've found your answer...

In your code:

```
With Sheets("Sheet1")

LastCell = .Range("A" & Sheets("Criteria").Rows.Count).End(xlUp).Row
Set RngTwo = .Range("A2:AA" & LastCell)

End With

'Push data into DataSheet worksheet, so data is sequential
Sheets(1).Select
RngTwo.Copy
Sheets("DataSheet").Select
ActiveSheet.Paste 
```

You `Set RngTwo = .Range("A2:AA" & LastCell)`, which means your header is not being included when pasted into `DataSheet`. Then below that, this block

```
If LastCell = 2 Then

    Set RngThree = .Range("A2") 
```

Will not work, because you've only copied 1 row of data, thus `A2` is blank. You may not have noticed, since there was no error, but this also means the case when the criteria are greater than 1 was always leaving out the first element in the list on `DataSheet`.

* * *

There are two solutions as I see it: Change the `LastCell` check to set the range starting at row 1:

```
If LastCell = 2 Then
    Set RngThree = .Range("A1") 'CHANGE THIS LINE
Else
    LastCell = .Range("A" & Sheets("Criteria").Rows.Count).End(xlUp).Row
    Set RngThree = .Range("A1:A" & LastCell) 'CHANGE THIS LINE
End If 
```

**OR** Set your copy range to include the first, header row:

```
With Sheets("Sheet1")

LastCell = .Range("A" & Sheets("Criteria").Rows.Count).End(xlUp).Row
Set RngTwo = .Range("A1:AA" & LastCell) 'CHANGE THIS LINE

End With

'Push data into DataSheet worksheet, so data is sequential
Sheets(1).Select
RngTwo.Copy
Sheets("DataSheet").Select
ActiveSheet.Paste 
```

* * *

For the record, I did test both the above options with both one and many criteria. All seemed to work just fine for me.

I hope this helps...

# facebook-graph-api - 已发布 67k 故事，其中 0 故事印象

> ID：11941313
> 
> 赞同：3
> 
> 时间：2012-08-13T19:53:01.733
> 
> 标签：facebook-graph-api, facebook-opengraph, facebook-insights, insight

我的 Facebook Insights 显示我在上个月发布了 67k 篇故事，但故事印象数[为零](http://o7.no/RIqphI)。我是否设置错误？这怎么可能？

# powershell - 将 Get-Item 与 Get-ChildItem 结合使用？

> ID：11941316
> 
> 赞同：3
> 
> 时间：2012-08-13T19:53:26.430
> 
> 标签：powershell

我以为我得到了所有的容器 `$containers = Get-ChildItem -path $Path -recurse | ? {$_.psIscontainer -eq $true}`，但它似乎只返回了我的`$Path`. 我真的很想`$containers`包含`$Path`及其子目录。我试过这个：

```
$containers = Get-Item -path $Path | ? {$_.psIscontainer -eq $true}
$containers += Get-ChildItem -path $Path -recurse | ? {$_.psIscontainer -eq $true} 
```

但它不允许我这样做。我是不是用`Get-ChildItem`错了，或者我如何`$Path`通过将 Get-Item 和 Get-ChildItem 与 -recurse 组合来让 $containers 包含它及其 $subdirectories？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T20:37:19.933

在您第一次调用 get-item 时，您没有将结果存储在数组中（因为它只有一项）。这意味着您不能将数组附加到您的`get-childitem`行中。只需通过将结果包装成这样的形式来强制您的容器变量成为一个数组`@()`：

```
$containers = @(Get-Item -path $Path | ? {$_.psIscontainer})
$containers += Get-ChildItem -path $Path -recurse | ? {$_.psIscontainer} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T06:27:14.340

用于`Get-Item`获取父路径并`Get-ChildItem`获取父子路径：

```
$parent = Get-Item -Path $Path
$child = Get-ChildItem -Path $parent -Recurse | Where-Object {$_.PSIsContainer}
$parent,$child 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T20:04:34.493

以下对我有用：

```
$containers = Get-ChildItem -path $Path -recurse | Where-object {$_.psIscontainer} 
```

我最终得到的`$path`是`$path`.

在您的示例中，您有`$.psIscontainer`，但应该是`$_.psIscontainer`. 这也可能是您的命令的问题。

# nginx - 将 Apache 迁移到 nginx 时无法重写

> ID：11941317
> 
> 赞同：0
> 
> 时间：2012-08-13T19:53:27.987
> 
> 标签：nginx, http-status-code-404, php

我想将我的一个服务器 Apache 更改为，`nginx+php-fpm`但使用重写存在一个小问题。请求是这样的`/dispatcher.php/foo/foo/foo/1`

我无法决定如何发送这个请求，`php-fpm`因为当我发送这个请求时，`php-fpm`我得到了找不到错误。没有这样的文件或路径，但我必须像这样发送整个 url，并且 dispatcher.php 获取并处理这个 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:15:07.793

尝试像这样添加一个位置块：

```
location /dispatcher.php/ {
  fastcgi_param SCRIPT_FILENAME /path/to/dispatcher.php;
  #rest of your fastcgi bits go here
} 
```

到您的 fastcgi 指令（显然替换路径以指向您的实际 dispatcher.php 位置）

# php - php 操作符有问题

> ID：11941318
> 
> 赞同：0
> 
> 时间：2012-08-13T19:53:31.737
> 
> 标签：php, operator-keyword

我想比较两个值，如果一个大于另一个，那么它会在数据库中执行一些更新，但是结果总是返回 false。这是我正在努力解决的代码部分的示例：

```
<?php 
$page = mysql_fetch_object(mysql_query("SELECT * FROM `site` WHERE `id`='{$posts['him']}'"));
$count = file_get_contents($site->site_url . 'count/numbercheck.php?url=' . ($page->url));
if(is_numeric($count) && $count > $posts['count'])
{
    echo 'true';
}else{
    echo 'false';   
}

?> 
```

这与错误相呼应。$posts['count'] 来自另一个页面上的 jquery 帖子。我确信 $count 大于 $posts['count']。只是为了确定然后我这样做了：

```
<?php 
$page = mysql_fetch_object(mysql_query("SELECT * FROM `site` WHERE `id`='{$posts['him']}'"));
$count = file_get_contents($site->site_url . '/count/numbercheck.php?url=' . ($page->url));
if(is_numeric($count) && $count > $posts['count'])
{
    echo 'true' . $count . ' ' . $posts['count'];
}else{
    echo 'false' . $count . ' ' . $posts['count'];  
}

?> 
```

返回“false 86 85”。我不明白，我做错了什么？我很清楚 86 大于 85。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T19:57:47.627

`file_get_contents()`返回一个字符串值，因此它总是会像`false`使用时一样评估`is_numeric()`

如果你想返回一个数组（文件中的每一行一个项目），你应该使用`file()`而不是`file_get_contents()`

# scala - Scala：拦截函数以使用 Akka Futures 提供隐式参数

> ID：11941322
> 
> 赞同：0
> 
> 时间：2012-08-13T19:53:51.830
> 
> 标签：scala, akka, implicit-conversion, future, implicit-parameters

好的，所以我对返回 Akka Futures 的函数进行了一系列调用，并且我通过使用 flatMap 和 map 将它们链接起来，如下所示：

```
doAsyncCall(..).flatMap { res1 =>
  doAsyncCall2(..).flatMap { res2 =>
    doAsyncCall3(..).map { res3 =>
      res
    }
  }
} 
```

它可以分布在不同的函数调用中。现在每个 doAsyncCallX 调用都返回一个 Future[Result]，我希望能够组合这些结果，将它们传递到链上，直到最后我可以返回链中所有结果的组合结果。

为此，我考虑让每个 doAsyncCallX 接收前一个结果的隐式参数，并将获得的结果与前一个结果结合起来。问题是，如果不使用像这样的隐式 val 乱扔我的库的使用，我就看不到这样做的方法：

```
doAsyncCall(..).flatMap { res1 =>
  implicit val implicitRes1 = res1
  doAsyncCall2(..).flatMap { res2 =>
    implicit val implicitRes2 = res2
    doAsyncCall3(..).map { res3 =>
      res
    }
  }
} 
```

我想做的是能够拦截 flatMap 的应用，以确保之前的响应作为下一个 doAsyncCallX 调用的隐式参数正确传递。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T01:02:10.420

Perhaps I'm missing something, but is there a reason to use implicits at all?

```
for(res1 <- doAsyncCall1(..);
    res2 <- doAsyncCall2(res1);
    res3 <- doAsyncCall3(res2)) yield(res3) 
```

If you need to return a result composing multiple of the intermediate results, change the yield to yield something different, perhaps a tuple, like `yield((res1,res2,res3))`. The result of which would be something like `Future[(Result1,Result2,Result3)]`

# asp.net - asp.net 子菜单项的 css 样式

> ID：11941323
> 
> 赞同：0
> 
> 时间：2012-08-13T19:54:00.237
> 
> 标签：asp.net, css, menuitem

使用 asp:MenuItem 控件如何设置子菜单文本的样式？

这是我的标记；

```
 <div class="clear hideSkiplink">
            <asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" EnableViewState="false" IncludeStyleBlock="false" Orientation="Horizontal">

               <Items>
                    <asp:MenuItem NavigateUrl="~/Default.aspx" ToolTip="Home" Text="Home"></asp:MenuItem>
                    <asp:MenuItem NavigateUrl="~/Products.aspx" Value="Products" Text="Products">
                        <asp:MenuItem Text="EnerBurn" Value="EnerBurn"></asp:MenuItem>
                        <asp:MenuItem Text="EnerKool" Value="EnerKool"></asp:MenuItem>
                        <asp:MenuItem Text="PEx(Particulate Extraction)" Value="PEx"></asp:MenuItem>
                    </asp:MenuItem>
                    <asp:MenuItem NavigateUrl="~/About.aspx" Text="Investor Info" >
                         <asp:MenuItem Text="Press Releases" Value="Contact Support"></asp:MenuItem>
                        <asp:MenuItem Text="Quarterly Filings" Value="Send E-mail"></asp:MenuItem>
                        <asp:MenuItem Text="Annual Reports" Value="Contact By Phone"></asp:MenuItem>
                        <asp:MenuItem Text="Corporate Information" Value="Send E-mail"></asp:MenuItem>
                        <asp:MenuItem Text="Update Letters from Management" Value="Contact By Phone"></asp:MenuItem>
                   </asp:MenuItem>
                    <asp:MenuItem Text="Contact" Value="Contact" NavigateUrl="~/Contact.aspx">
                        <asp:MenuItem Text="Contact us" Value="Contact Support"></asp:MenuItem>
                        <asp:MenuItem Text="Login Request" Value="Send E-mail"></asp:MenuItem>
                      </asp:MenuItem>
                </Items>

            </asp:Menu>
        </div> 
```

我希望 submenuitems 框有圆角，我尝试应用具有零效果的适当 css 的 .submenu 类。

# uiwebview - 使用视口标签在 UIWebView 中捏合缩小到比最小值更远

> ID：11941331
> 
> 赞同：1
> 
> 时间：2012-08-13T19:54:36.230
> 
> 标签：uiwebview, scale, viewport, meta, pinch

我为此使用 UIWebView 可能听起来很奇怪，但是对于这个项目是如何组合在一起的，我必须这样做。

我创建了一个显示图像的 UIWebView：

```
[webView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"flatPano" ofType:@"html"]isDirectory:NO]]];

webView.frame = CGRectMake(0, 0, 1024, 768);    

for (id subview in webView.subviews)
    if ([[subview class] isSubclassOfClass: [UIScrollView class]])
        ((UIScrollView *)subview).bounces = NO; 
```

在我的 html 文件中，我有一个视口元标记：

```
<meta name="viewport" content="target-densitydpi=device-dpi, width=device-width, initial-scale=1.5, minimum-scale=1.5, maximum-scale=3.0, user-scalable=yes"/> 
```

在我的身体中，我有一个简单的 img 标签，以便显示图像。初始、最小和最大比例在大多数情况下都可以正常工作，但问题是我可以通过捏合来缩小*最小*比例，然后我放手，它会重新回到最小比例。从外观上看，这不可能发生，因为没有白色背景可以显示。

# ms-word - Open XML：Word - 将所有段落标记为“Heading1”样式

> ID：11941332
> 
> 赞同：7
> 
> 时间：2012-08-13T19:54:37.770
> 
> 标签：ms-word, openxml, openxml-sdk

使用 Word 我创建了一个带有标准 normal.dot 的 Docx 作为测试。Hello-world 级别的复杂性。

我希望得到在 Word 中`all the paragraphs`带有“ `Heading1`”样式的样式。`style`

我可以得到所有的段落，但不知道如何过滤到 Heading1。

```
using (var doc = WordprocessingDocument.Open(documentFileName, false))
{
    paragraphs = doc.MainDocumentPart.Document.Body
                    .OfType<Paragraph>().ToList();
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-13T20:34:56.533

```
 [Test]
    public void FindHeadingParagraphs()
    {

        var paragraphs = new List<Paragraph>();

        // Open the file read-only since we don't need to change it.
        using (var wordprocessingDocument = WordprocessingDocument.Open(documentFileName, false))
        {
            paragraphs = wordprocessingDocument.MainDocumentPart.Document.Body
                .OfType<Paragraph>()
                .Where(p => p.ParagraphProperties != null && 
                            p.ParagraphProperties.ParagraphStyleId != null && 
                            p.ParagraphProperties.ParagraphStyleId.Val.Value.Contains("Heading1")).ToList();
        }
    } 
```

# r - 在 R 中将 1 分钟 OHLC 数据转换为 5 分钟 OHLC 数据

> ID：11941333
> 
> 赞同：0
> 
> 时间：2012-08-13T19:54:41.373
> 
> 标签：r, finance, xts, trading

我目前有需要转换为 5 分钟数据的 OHLC 盘中数据。有没有办法在 R 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T19:58:08.377

`to.minutes5`是的，从[xts](http://cran.r-project.org/package=xts)包中调用一个微不足道的调用就可以做到这一点。

# jquery-ui - 选定的选项卡链接到原始链接位置

> ID：11941337
> 
> 赞同：0
> 
> 时间：2012-08-13T19:55:10.657
> 
> 标签：jquery-ui

我正在使用 jquery UI 选项卡来创建选项卡式内容。选择选项卡标题后，我希望它链接到原始位置。

```
 $(function() {
  $("div.tabs").tabs("div.items > div"); 
    });

<div id="items">
    <div class="tabs">
    <div class="tab"><a href="http//www.example1.com">Tab title 1</a></div>
    <div class="tab"><a href="http//www.example2.com">Tab Title 2</a></div>
    <div class="tab"><a href="http//www.example3.com">Tab title 3</a></div>
    </div>
  </div> 
```

未选中时，单击选项卡标题 1 会显示选项卡内容。选择后，标签标题 1 将链接到 http//www.example1.com。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T01:06:50.333

如果选项卡已经被单击过一次，我添加了一个类，然后使用鼠标按下来触发链接。

```
$(".tabs").tabs(".items > div"); 
$(".tabs .tab:first a").addClass("lasttab");
        $(".tabs .tab").mousedown(function() {
            if ($(this).find('a').hasClass("lasttab")) {
        window.location.href = $(this).find('a').attr('href');
    }
    $(".tabs .lasttab").removeClass("lasttab");
    $(this).find("a").addClass("lasttab");
}); 
```

# java - 转换链表 到字符串[][]

> ID：11941357
> 
> 赞同：-2
> 
> 时间：2012-08-13T19:56:35.570
> 
> 标签：java, linked-list

如果我有一个 String[] 的链表，如何将它转换为 String[][]。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:05:18.267

你可以使用这个：

```
LinkedList<String[]> list = new LinkedList<String[]>();
// add elements
String[][] myArray = list.toArray(new String[][] {}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T20:01:18.660

Java 列表定义了一个可以调用的[toArray()方法。](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#toArray%28T%5B%5D%29)将来使用 JavaDoc 检查是一个很好的起点。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-13T20:03:15.507

你会使用：

```
LinkedList<String[]> myLinkedList = new LinkedList<String[]>();
// add elements or whatever
String[][] myArray = null;
myArray = myLinkedList.toArray(myArray); 
```

这个问题表明研究工作非常差。这是一个库类，您需要的方法在线 javadocs 中有记录。一个简单的谷歌搜索就会找到它。

[链表 Javadocs](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html)

# c# - 我应该如何/何时初始化取决于视图中的选择的模型字段？

> ID：11941369
> 
> 赞同：1
> 
> 时间：2012-08-13T19:57:52.437
> 
> 标签：c#, asp.net-mvc, razor

我需要根据上面下拉列表中的选定值初始化“ConditionalAnalysisInput”。我需要访问`dbset`才能做到这一点。

初始化 ConditionalAnalysisInput 字段的最佳方法是什么？

这是视图代码：

```
@using (Ajax.BeginForm("_ListConditionalAnalysis",
                    new AjaxOptions { UpdateTargetId = "_conditionals",
                                      InsertionMode = InsertionMode.InsertAfter}))
{
        @Html.DropDownListFor(model=>model.AvailableConstructs,Model.AvailableConstructs)
    <p>
        <input type="submit" value="Populate" />
    </p>
}
<div id="_conditionals">
  @*** Need to init ConditionalAnalysisInput here depending on the selected value from the dropdown list. Access to dbset needed *@
   @foreach (var item in Model.ConditionalAnalysisInput)
   {
       @Html.Partial("_ListConditionalAnalysis",item)
   }
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:03:42.887

您真的很想对服务器进行回调以获取下一部分所需的新模型数据。初始化模型（并连接到数据库）是服务器端的职责，不应该直接在客户端处理。

我将创建一个操作，该操作采用所选项目并返回您需要处理的 ConditionalAnalysisInput 对象列表。每当更改下拉列表时，发出 AJAX 调用以获取新数据并刷新您的 _conditionals div。

正常的免责声明认为这是非常简单的，而不是你不应该清理它就过去的东西，这里有一个简单的例子，我把它放在一起来说明我的意思：

我有两个测试模型，显然是简化的。第一个是您最初需要的网页数据（即下拉列表）。第二个模型用于您的局部视图，这取决于下拉列表中的选定项目：

```
public class DropDownModel
{
    public IEnumerable<string> DropDownOptions
    {
        get;
        set;
    }

    public DropDownModel()
    {
    }

    public DropDownModel(IEnumerable<string> dropDownOptions)
    {
        DropDownOptions = dropDownOptions;
    }
}

public class ConditionalsModel
{
    public IEnumerable<string> ConditionalAnalysisInput
    {
        get;
        set;
    }

    public ConditionalsModel()
    {
    }

    public ConditionalsModel(string selectedOption)
    {
        if (selectedOption == "Option A")
        {
            ConditionalAnalysisInput = new List<string>
            {
                "Input A 1",
                "Input A 2",
                "Input A 3"
            };
        }
        else if (selectedOption == "Option B")
        {
            ConditionalAnalysisInput = new List<string>
            {
                "Input B 1",
                "Input B 2",
                "Input B 3"
            };
        }
    }
} 
```

接下来是控制器。主要操作只是填充主模型并返回视图。您还需要添加第二个方法，该方法将所选项目作为参数并返回 PartialViewResult：

public class AjaxTestController : Controller { // // GET: /AjaxTest/ public ActionResult Index() { var model = new DropDownModel(new List { "Option A", "Option B" }); 返回视图（模型）；}

```
 public PartialViewResult GetDataForDiv(string selectedOption)
    {
        var model = new ConditionalsModel(selectedOption);
        return PartialView("Conditionals", model);
    }
} 
```

创建一个“条件”部分视图，其中包含要在 _conditionals div 中显示的所有标记：

```
@model TestMvcProgram.Models.ConditionalsModel

<ul>
@foreach (var item in Model.ConditionalAnalysisInput)
{
    <li>@item</li>
}
</ul> 
```

在您的主视图上，为 DropDownList 的更改事件添加一个处理程序。在更改事件期间，您可以向服务器发出 get 请求以调用 GetDataForDiv 方法，然后使用生成的部分视图更新 _conditionals div。这是我的例子：

```
@model TestMvcProgram.Models.DropDownModel

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!DOCTYPE html>

<html>
    <head>
        <title>title</title>
    </head>
    <body>
        <div>
            @Html.DropDownList("selectedOption", Model.DropDownOptions.Select(x => new SelectListItem { Selected = false, Text = x, Value = x }), new {id = "selectedOption"})

            <div id="_conditionals"></div>
        </div>

        <script type="text/javascript" language="javascript">
            $(function () {
                $('#selectedOption').change(function () {
                    $.get('@Url.Action("GetDataForDiv", "AjaxTest")' + "?selectedOption=" + $(this).val(), function(data, textStatus, jqXHR) {
                        $("#_conditionals").html(data);
                    });
                });
            });
        </script>
    </body>
</html> 
```

# python - 如何在 WSGI 环境中处理本地长寿命对象

> ID：11941375
> 
> 赞同：1
> 
> 时间：2012-08-13T19:58:30.123
> 
> 标签：python, wsgi, pyramid

*介绍*

在经历了大约 10 年的 PHP 开发和习惯之后，我最近转向了 Python。

例如。在 Symfony2 中，对服务器（例如 Apache）的每个请求都必须加载，例如。容器类并实例化它，以构造对象的“其余部分”。

据我了解（我希望）Python的WSGI env，一个应用程序被创建一次，直到该应用程序关闭，每个请求都只调用方法/函数。

这意味着我可以拥有例如。某个类的一个实例，每次都可以访问，请求被分派，而不必在每个请求中实例化它。我对吗？

*问题*

我想要一个类实例，因为调用`__init__`非常昂贵（在计算和资源锁定方面）。在 PHP 中，在每个请求中实例化它会降低性能，我是否可以使用 Python 的 WSGI 我可以在应用程序启动时实例化一次，并通过请求使用它？如果是这样，我该如何实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T08:26:35.563

WSGI 只是一个标准化的接口，它使得构建 Web 服务器架构的各种组件成为可能，以便它们可以相互通信。

Pyramid 是一个框架，其组件通过 WSGI 相互粘合。

Pyramid 与其他 WSGI 框架一样，可以选择堆栈的实际*服务器*部分，例如[gunicorn](http://gunicorn.org/)、 Apache 或其他。这个选择是由你来做的，这就是你问题的最终答案。

您需要知道的是您的服务器是多线程还是多进程。在后一种情况下，检查全局变量是否已被实例化以初始化昂贵的资源是不够的，因为后续请求可能最终在不共享状态的单独进程中结束。

如果您的模型是多线程的，那么您可能确实依赖于全局状态，但请注意您在代码中引入了强依赖性这一事实。也许单例模式与依赖注入相结合可以帮助保持你的代码更干净，更容易改变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T09:24:17.420

Pyramid 文档中提到了我发现的最佳方法（我之前错过了）：

来自[Pyramid Docs#Startup](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/startup.html#deployment-settings)

> Note that an augmented version of the values passed as `**settings` to the `Configurator` constructor will be available in Pyramid view callable code as `request.registry.settings`. You can create objects you wish to access later from view code, and put them into the dictionary you pass to the configurator as settings. They will then be present in the `request.registry.settings` dictionary at application runtime.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T20:10:14.800

有很多方法可以做到这一点`pyramid`，具体取决于您最终要完成的任务。仔细查看[Pyramid/SQLAlchemy 教程](http://docs.pylonsproject.org/projects/pyramid/en/1.2-branch/tutorials/wiki2/basiclayout.html)作为如何处理昂贵的初始化（数据库连接和元数据设置）然后将其传递到请求处理引擎的示例可能会很有用。

请注意，在引用的链接中，您问题的重要部分是`__init__.py`文件的处理`initialize_sql`和随后的`DBSession`.

# php - 在 PHP 中搜索时出现linkedin API 框架 403 错误

> ID：11941378
> 
> 赞同：0
> 
> 时间：2012-08-13T19:58:44.993
> 
> 标签：php, api, curl, oauth, linkedin

我正在使用我在网上找到的这个linkedin api框架，它非常有帮助，但我遇到的这个问题是我登录后能够访问我帐户中的信息并被重定向到demo.php页面但是有一个facebook返回 403 访问被拒绝的员工搜索。

linkedin 网站说我无权访问或油门已满。我可以看到它无法访问它，因为它无法读取我的 oAuth 代码。

在我想要回显的变量上执行 var_dump 后，它返回一个空值。我的猜测是它没有读取授权，但是当我 var_dump $linkedin 变量时，oAuth 就在那里。

就像我说的那样，当涉及到我的个人资料时，我可以得到输出，但是当我尝试拨打其他电话时，就会出现错误。

如果有帮助，我必须将 CURLOPT_SSL_VERIFYPEER 放入代码中以访问登录页面。

除了这一件事，一切都很好。登录、重定向和我能够访问我自己的信息。

有什么想法或建议吗？

谢谢

编辑 - 我刚刚尝试了 simple-linkedin，但我仍然收到 403 错误。
所以一定要得到许可。在所有的演示页面中，他们都可以访问这些信息，我为什么不能？我登录了，即使是我的联系人中的人我也无法搜索。

弄清楚了。在linkedin.php 文件中，您必须修改 '= $this->base_url 。“/v1/...” 到您要查找的内容。

希望这对某人有所帮助。

编辑--------当我尝试搜索人员时，我仍然收到 403 错误。有人可以解释为什么会发生这种情况以及其他人如何能够访问这些信息。

这是我正在使用的行： [http](http://api.linkedin.com/v1/people-search:(people:(id,first-name,last-name,picture-url,headline) ://api.linkedin.com/v1/people-search:(people:(id,first-name,last-name,picture-url,headline ))

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:05:06.957

从提问者的编辑到他原来的问题：

> 弄清楚了。在linkedin.php 文件中，您必须修改 '= $this->base_url 。“/v1/...” 到您要查找的内容。
> 
> 希望这对某人有所帮助。

# php - 如何进行php 4维数组排序

> ID：11941381
> 
> 赞同：-1
> 
> 时间：2012-08-13T19:58:58.127
> 
> 标签：php

Cassandra Json 格式看起来像这样

```
 "recommendResult":[{
       "mediaId":"",
       "mediaEntry":[{
           "user1":{
               "name":"sooin",
               "rating":"3",
               "views":"2",
               "like":"ture",
               "comment":"good"
           },
           "user2":{
               "name":"sara",
               "rating":"1",
               "views":"4",
               "like":"ture",
               "comment":"good!"
           }
       }],
       "view":"4",
       "rating":"4",
       "like":"10",
       "smallUrl":"/photo/smallUrl",
       "largeUrl":"/photo/largeUrl",      
       "title":"aaaa"                  
    }] 
```

这是我的php代码

```
$rows=$column_family->get_range();
$count=0;

    foreach($rows as $key => $columns) {

     $returnkey[$count]=array('mediaId'=>$key,   
              'columns'=>$columns,'user'=>array_slice($columns,1,2));
     $count++;
}
natcasesort($returnArray['key']['comment']['photoInfo']['view']);
print_r($returnArray['key']['comment']['photoInfo']['view']); 
```

我正在尝试根据视图进行排序。我尝试使用 natcasesort 但它不起作用。任何想法。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T21:15:36.200

PHP doesn't have a built-in sorting algorithm that will sort multidimensional arrays based on a certain key/value pair. You should write your own sorting algorithm to handle this data.

Here's somewhere to get started (all of these can easily be modified to work with your particular array):

[Comparison of sorting algorithms](http://www.cprogramming.com/tutorial/computersciencetheory/sortcomp.html)

# python - Python 扭曲：异步操作后写入连接的服务器？

> ID：11941382
> 
> 赞同：2
> 
> 时间：2012-08-13T19:59:02.123
> 
> 标签：python, networking, asynchronous, twisted, deferred

我有一个服务器，我在其中实现了 NetstringReceiver 协议的一个子协议。我希望它根据客户端的请求执行异步操作（使用 txredisapi），然后以操作结果进行响应。我的代码的概括：

```
class MyProtocol(NetstringReceiver):
  def stringReceived(self, request):
    d = async_function_that_returns_deferred(request)
    d.addCallback(self.respond)
    # self.sendString(myString)

  def respond(self, result_of_async_function):
    self.sendString(result_of_async_function) 
```

在上面的代码中，连接到我的服务器的客户端没有得到响应。但是，如果我取消注释，它确实会得到 myString

```
# self.sendString(myString) 
```

我也知道 result_of_async_function 是一个非空字符串，因为我将它打印到 stdout 。

我该怎么做才能让我用异步函数的结果响应客户端？

更新：可运行的源代码

```
from twisted.internet import reactor, defer, protocol
from twisted.protocols.basic import NetstringReceiver
from twisted.internet.task import deferLater

def f():
  return "RESPONSE"

class MyProtocol(NetstringReceiver):
  def stringReceived(self, _):
    d = deferLater(reactor, 5, f)
    d.addCallback(self.reply)
    # self.sendString(str(f())) # Note that this DOES send the string.

  def reply(self, response):
    self.sendString(str(response)) # Why does this not send the string and how to fix?

class MyFactory(protocol.ServerFactory):
  protocol = MyProtocol

def main():
  factory = MyFactory()
  from twisted.internet import reactor
  port = reactor.listenTCP(8888, factory, )
  print 'Serving on %s' % port.getHost()
  reactor.run()

if __name__ == "__main__":
  main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:18:09.773

关于 有一个特定的功能`NetstringReceiver`：

> 如果收到非法消息，连接将丢失

您确定您的消息符合 [djb 的 Netstring 协议](http://cr.yp.to/proto/netstrings.txt)吗？

显然客户端发送了无法解析的非法字符串，并且由于协议条件而导致连接丢失。*在您的代码中，其他一切看起来都不错*。

如果你不需要那个特定的协议，你最好继承[`LineReceiver`](http://twistedmatrix.com/documents/8.2.0/api/twisted.protocols.basic.LineReceiver.html)而不是`NetstringReceiver`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-25T22:24:32.980

您从未收到响应的原因是因为在发送时连接已关闭。连接关闭的原因是因为您使用 'nc' 发送的消息是：
`1:a,\n`
因为您必须键入换行符才能让 nc 发送消息，但 nc 将其作为消息的一部分包含在内。这违反了 NetString 协议...我通过发送此消息来解决它（您的代码修改了一些额外的打印）：
`1:a,40:\n blahblahblah`**不要在此处点击返回，只需等待回复**
`8:RESPONSE,`

# arrays - 对新数组进行排序？

> ID：11941387
> 
> 赞同：0
> 
> 时间：2012-08-13T19:59:19.233
> 
> 标签：arrays, filtering, array-filter

我得到了这个数组

```
$arr =('1-1.jpg','1-2.jpg','11-3.jpg', '1-4.jpg', '3-5.jpg', '41-5.jpg','1-3.jpg','4-5.jpg','14-5.jpg','54-5.jpg','64-5.jpg','14-5.jpg', '1-5.jpg'); 
```

我需要这个数组

```
$newarray=('1-1.jpg','1-2.jpg','1-3.jpg', '1-4.jpg', '1-5.jpg'); 
```

我得到了这个功能

```
$new =array_filter( $arr, function( $el) { 
return substr( $el, 0, 2) == '1-';; 
}); 
```

但我总是收到这个错误：

**解析错误：语法错误，意外的 T_FUNCTION**

# java - 让 Java Webdriver '向下箭头' 动作起作用

> ID：11941390
> 
> 赞同：0
> 
> 时间：2012-08-13T19:59:38.193
> 
> 标签：java, selenium, webdriver, keydown, typeahead

所以我一直试图解决这个问题几个小时。我不知道我做错了什么。

这是我正在寻找的类型提前字段是`<input type="text" id="id_attendees" name="attendees">`。当我在那里输入时，会创建一个 js 下拉列表。当我按下键盘上的向下箭头时，它可以正常工作并选择首选。当我`keyDown --- id=id_attendees --- \40`在 IDE 中执行此操作时，它可以正常工作并且还可以选择选项。

我无法让它在 Java webdriver 中做同样的事情

```
Actions actionObject = new Actions(driver);
actionObject.sendKeys(Keys.ARROW_DOWN); 
```

^不起作用。

```
driver.findElement(By.id("id_attendees")).sendKeys(Keys.ARROW_DOWN); 
```

^不起作用

我在这两种情况下都尝试过 Keys.DOWN，但也没有用。我创建了一个文字`String altm = "\u0040";`，所做的只是输入一个`@`符号。

我也尝试了很多其他的东西，但没有任何效果。我不知道我错过了什么。

**编辑1：**

@Roddy 谢谢！- 鉴于该链接，我添加了以下确实有效的内容（在导入 DefaultSelenium 和 WebDriverBackedSelenium.

```
DefaultSelenium sel = new WebDriverBackedSelenium(driver,vars.siteurl);
sel.fireEvent("//input[@id='id_attendees']", "keydown"); 
```

**编辑 2：** --> 不起作用的 DOH。显然是我太热心了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-18T20:11:35.007

我认为您对**Actions**的使用不太正确。

该实现是一种构建器模式。调用*sendKeys*不会发送事件，它只会在调用 perform 时暂存要触发的*事件*。请注意，*sendKeys*的返回值是一个**Actions**实例。

```
Actions actionObject = new Actions(driver);
actionObject = actionObject.sendKeys(Keys.ARROW_DOWN); //ASSIGN the return or you lose this event.
actionObject.perform();  //Should do what you want.  Note that this will reset the builder. 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-24T20:10:37.743

使用 Actions 类，在定义了它将为您做什么之后，您需要首先 build() 它。所以在你的情况下，它会是这样的：

```
Actions actionObject = new Actions(driver);
actionObject.sendKeys(Keys.ARROW_DOWN).build(); 
```

当您希望脚本执行该操作时，您需要 perform() 它。您可以在您的 build() 方法之后（例如，如果您只使用它一次）或稍后在您需要它的代码中链接它，如下所示：

```
actionObject.sendKeys(Keys.ARROW_DOWN).build().perform(); 
```

或者

```
actionObject.perform(); 
```

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-17T07:17:20.130

一些时间脚本需要一些时间来加载列表，所以需要添加等待，

```
WebElement ar=driver.findElement(By.id("id_attendees"));
Thread.sleep(1000);
ar.sendKeys(Keys.ARROW_DOWN); 
```

# ios - 检测 UIPopover 调整大小事件

> ID：11941391
> 
> 赞同：1
> 
> 时间：2012-08-13T19:59:42.247
> 
> 标签：ios, cocoa-touch, uiview, uiviewcontroller, uipopover

在 iOS 中，我在 a`UIView`中显示一些内容`UIPopover`。有时在显示键盘时弹出框会调整大小。是否有特定事件`UIView`可用于调整子视图等的大小？如果不是，检测调整大小事件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:11:19.937

您可能必须在调用键盘的委托方法中检测到这一点，例如，如果它`UITextField`类似于`- (void)textFieldDidBeginEditing:(UITextField *)textField`

[这篇文章](https://stackoverflow.com/a/1492436/716216)中描述的另一个选项是使用一个`UIKeyboardListener`列表来获取有关键盘是否可见的通知。

`UIPopoverController`不幸的是，只有两个委托方法，它们与弹出关闭有关。

```
 - (void)popoverControllerDidDismissPopover:(UIPopoverController
   *)popoverController
 - (BOOL)popoverControllerShouldDismissPopover:(UIPopoverController *)popoverController 
```

# php - 遍历数组并对具有相同 id 的值求和

> ID：11941399
> 
> 赞同：1
> 
> 时间：2012-08-13T20:00:23.043
> 
> 标签：php, arrays

我完全停电了。我有一个包含 n 个元素的数组，其中包含一个团队的结果，例如：

数组（团队，胜利，失败，平局，进球）；

```
array(1, 2, 3, 4, 5);
array(2, 2, 3, 4, 5);
array(1, 1, 2, 2, 6);
array(2, 2, 3, 4, 5); 
```

我想遍历这个数组并在第二个数组中总结每个团队 ID 的值。如：

```
$results = getResults();
$final = array();

foreach ($results as $result) {
foreach ($results as $res) {
if ($res['team_id'] == $result['team_id']) {
...
}
}
}

foreach ($final as $finalresult) {
...print result
} 
```

最后，我想要一个数组，例如在本例中，有 2 个值和 2 个不同的团队 id，每个值相加，但目前我有一个停电。

有人有解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:09:01.073

您正在运行嵌套的循环，这意味着您实际上是在汇总 n^2 条记录。假设两个数组之间的数组键相同，那么您只需要一个循环：

```
$arr1 = array(...);
$arr2 = array(...);
$sum = 0;

foreach($arr1 as $key => $value) {
    $sum += $arr1[$key] + $arr2[$key];
} 
```

如果键不相同，那么您将不得不找出匹配两个数组的成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T20:08:29.640

您的代码令人困惑，但我想它会给出提示：

```
$results = getResults();
$final = array();

foreach ($results as $result) {
    if(!isset($final[$result['team_id']])) {
        $final[$result['team_id']] = $result['wins'];
    } else {
        $final[$result['team_id']] += $result['wins'];
    }
}

foreach($final as $key=>$value) {
    echo $key . ' ' . $value . '</br>';
} 
```

# c# - 如何使用 wpf 和使用 mvvm 将窗口置于前面

> ID：11941401
> 
> 赞同：6
> 
> 时间：2012-08-13T20:00:31.307
> 
> 标签：c#, wpf, mvvm

我有一个基本上运行计时器的窗口。当计时器达到 0 时，我想将窗口放在前面，以便它可见而不是隐藏在其他应用程序后面。

据我所知，我只需调用 window.activate() 即可完成此操作，但使用 mvvm 我的视图模型没有对窗口的引用。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-03T21:29:53.163

“纯粹”的 MVVM 解决方案是使用行为。下面是`Window`带有`Activated`属性的 a 的行为。将该属性设置为 true 将激活窗口（如果它被最小化则恢复它）：

```
public class ActivateBehavior : Behavior<Window> {

  Boolean isActivated;

  public static readonly DependencyProperty ActivatedProperty =
    DependencyProperty.Register(
      "Activated",
      typeof(Boolean),
      typeof(ActivateBehavior),
      new PropertyMetadata(OnActivatedChanged)
    );

  public Boolean Activated {
    get { return (Boolean) GetValue(ActivatedProperty); }
    set { SetValue(ActivatedProperty, value); }
  }

  static void OnActivatedChanged(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs e) {
    var behavior = (ActivateBehavior) dependencyObject;
    if (!behavior.Activated || behavior.isActivated)
      return;
    // The Activated property is set to true but the Activated event (tracked by the
    // isActivated field) hasn't been fired. Go ahead and activate the window.
    if (behavior.AssociatedObject.WindowState == WindowState.Minimized)
      behavior.AssociatedObject.WindowState = WindowState.Normal;
    behavior.AssociatedObject.Activate();
  }

  protected override void OnAttached() {
    AssociatedObject.Activated += OnActivated;
    AssociatedObject.Deactivated += OnDeactivated;
  }

  protected override void OnDetaching() {
    AssociatedObject.Activated -= OnActivated;
    AssociatedObject.Deactivated -= OnDeactivated;
  }

  void OnActivated(Object sender, EventArgs eventArgs) {
    this.isActivated = true;
    Activated = true;
  }

  void OnDeactivated(Object sender, EventArgs eventArgs) {
    this.isActivated = false;
    Activated = false;
  }

} 
```

该行为需要引用`System.Windows.Interactivity.dll`. 幸运的是，现在可以在[Blend.Interactivity.Wpf](https://nuget.org/packages/Blend.Interactivity.Wpf/)包中的 NuGet 上使用它。

该行为附加到 XAML 中的窗口，如下所示：

```
<Window ...>
  <i:Interaction.Behaviors>
    <Behaviors:ActivateBehavior Activated="{Binding Activated, Mode=TwoWay}"/>
  </i:Interaction.Behaviors> 
```

视图模型应该公开一个布尔`Activated`属性。将此属性设置为 true 将激活窗口（除非它已被激活）。作为额外的奖励，它还将恢复一个最小化的窗口。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T20:05:13.323

您可以通过几种方式来解决它 - 添加对窗口的引用可能会起作用，因为 viewmodel 不与视图耦合而是与之相关，但我不太喜欢这种方法，因为它几乎可以耦合您的视图到您的视图模型 - 这并不是 MVVM 的真正重点

更好的方法可能是让您的视图模型引发视图可以处理的事件或命令。通过这种方式，视图可以决定与命令/事件相关联的 UI 操作

例如简单地

```
class SomeView 
{
    void HandleSomeCommandOrEvent() 
    {
        this.Activate();
    }
} 
```

当然，你如何连接这取决于你，但我可能会尝试让路由命令发生

编辑：你不能真正“绑定”一个简单的事件，因为它是从视图模型中调用的。

一个简单的基于事件的示例只是将事件添加到视图模型并直接处理它......例如想象以下带有 ViewModel 属性的 MainWindow

```
public partial class MainWindow : Window
{
    MainWindowViewModel ViewModel { get; set; }

    public MainWindow()
    {
        InitializeComponent();

        ViewModel = new MainWindowViewModel();
        ViewModel.ShowMessage += ViewModel_ShowMessage;
        this.DataContext = ViewModel;
    }

    void ViewModel_ShowMessage(object sender, ShowMessageEventArgs e)
    {
        MessageBox.Show(e.Message, "Some caption", MessageBoxButton.OK);
    }

} 
```

然后 ViewModel 可以触发事件：

```
// The view model
public class MainWindowViewModel
{
    // The button click command
    public RelayCommand ButtonClickCommand { get; set; }

    // The event to fire
    public event EventHandler<ShowMessageEventArgs> ShowMessage;

    public MainWindowViewModel()
    {            
        ButtonClickCommand = new RelayCommand(ButtonClicked);            
    }

    void ButtonClicked(object param)
    {
        // This button is wired up in the view as normal and fires the event
        OnShowMessage("You clicked the button");
    }

    // Fire the event - it's up to the view to decide how to implement this event and show a message
    void OnShowMessage(string message)
    {
        if (ShowMessage != null) ShowMessage(this, new ShowMessageEventArgs(message));
    }
}

public class ShowMessageEventArgs : EventArgs
{
    public string Message { get; private set; }

    public ShowMessageEventArgs(string message)
    {
        Message = message;
    }
} 
```

XAML 将是：

```
<Button Command="{Binding ButtonClickCommand}">Click me!</Button> 
```

因此按钮调用命令，该命令反过来触发视图（MainWindow）处理的事件并显示消息框。通过这种方式，视图/UI 根据引发的事件类型决定操作过程。当然可能是你的计时器触发了这个事件

你总是可以走更复杂的路线，比如这个问题的一些答案......

[ViewModel 应该如何关闭表单？](https://stackoverflow.com/questions/501886/wpf-mvvm-newbie-how-should-the-viewmodel-close-the-form)

但老实说，这取决于你是否真的需要它 - 一个简单的事件效果很好 - 有些人为了优雅而将事情过度复杂化，但却损害了简单性和生产力！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-08T19:04:50.283

我会这样：

```
using GalaSoft.MvvmLight;
using GalaSoft.MvvmLight.Command;    
using GalaSoft.MvvmLight.Messaging; 

// View

public partial class TestActivateWindow : Window
{
    public TestActivateWindow() {
        InitializeComponent();
        Messenger.Default.Register<ActivateWindowMsg>(this, (msg) => Activate());
    }
}

// View Model

public class MainViewModel: ViewModelBase
{
    ICommand _activateChildWindowCommand;

    public ICommand ActivateChildWindowCommand {
        get {
            return _activateChildWindowCommand?? (_activateChildWindowCommand = new RelayCommand(() => {
                Messenger.Default.Send(new ActivateWindowMsg());
        }));
        }
    }
}

public class ActivateWindowMsg
{
} 
```

# .net - 我的数据库可能对 aprox 不可用。1秒几次。如何防止实体框架连接错误？

> ID：11941405
> 
> 赞同：3
> 
> 时间：2012-08-13T20:01:01.213
> 
> 标签：.net, entity-framework

我们有一个在 ASP.NET MVC 3 上运行的关键应用程序。

由于我们的故障转移解决方案，当机器崩溃时，数据库可能需要一些时间来恢复，比如说 1 秒。

Entity Framework 每次保存更改或物化对象时都会创建一个连接。此连接可能会失败。

我想用实体框架实现一些东西，这样当数据库连接失败时，它会在给定时间后再次尝试连接。

我希望每个 ObjectContext 实例只实现一次此解决方案，也就是说，我不想在每个`ToList`or周围放置一个 try/catch `First`。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:06:49.303

您可以尝试创建自己的[EF Provider Wrapper](http://code.msdn.microsoft.com/EFProviderWrappers-c0b88f32)。这将允许您更改数据库连接和数据库命令的逻辑。您将不得不与 EF 一起玩一点，以找到将重试逻辑准确放置在包装器中的位置，但恕我直言，它是无需创建全新提供程序即可使用的最佳集中位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:09:43.473

查看Microsoft 的[瞬态故障处理](http://msdn.microsoft.com/en-us/library/hh680906%28v=pandp.50%29.aspx)，它的创建正是为了满足您的要求。

# macos - 如何赋予apache在Mac Os 10.8（Mountain Lion）上的文档根目录中写入的权利

> ID：11941406
> 
> 赞同：2
> 
> 时间：2012-08-13T20:01:04.447
> 
> 标签：macos, apache, osx-mountain-lion

我在使用 os-x 山狮时遇到了很多关于 PHP 和 Apache 的问题。基本上我的插件需要 wordpress 来移动一些文件，但它总是要求提供 ftp 服务器凭据，就像 apache 没有写入这些目录的权限一样。

Apache 正在运行

> 用户守护进程
> 组守护进程

如果我做

> ls -lad htdocs/

我明白了

> drwxrwxr-x 7 根人员 238 13 前 21:51 htdocs/

我正在使用 zend 服务器 ce 5.6。我应该怎么做才能确保 apache 拥有做所有事情的全部权利？我会给它root访问权限（它是我的开发机器，我必须让事情正常工作，所以我不关心安全问题，但我不知道该怎么做，如果我能用更清洁的方式做到这一点，为什么我'我会很高兴，但我需要这个才能工作）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:12:12.150

您的 htdocs 目录由 root 拥有，并且在组人员中。它的用户权限是rwx，组权限是rwx，世界权限是rx。因此 apache 需要以 root 用户或组人员身份运行才能拥有完整的读/写/执行权限。否则，将您的 htdocs 目录的所有者和/或组更改为 daemon 并且 apache 将拥有完整的 rwx 权限。如果您真的根本不关心安全性，只需执行 chmod 777 htdocs（不推荐）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T20:36:41.040

WordPress 并没有真正检查它是否有权写入目录（插件安装也是如此），它只是检查它通过 Apache 运行的用户和组是否与父文件夹相同。

因此，唯一的方法确实是将文件夹 chmod 到您的 Apache 用户/组

# javascript - 站点之间的 Cookie

> ID：11941411
> 
> 赞同：0
> 
> 时间：2012-08-13T20:01:15.070
> 
> 标签：javascript, jquery, cookies

我正在建立一个网站，其全部目的本质上是一个登陆页面。当用户填写正确的表格时，此页面将创建一个 cookie。为了处理 cookie，我使用[了这个 jquery 插件。](https://github.com/carhartl/jquery-cookie)

**我的问题是**，我有一个单独的站点，只有在用户拥有来自第一个站点（登录页面）的 cookie 时才能查看该站点。到目前为止，在我的测试中，我一直遇到问题，因为我在登陆页面上设置的 cookie 没有出现在其他网站上。*登陆页面正在 localhost 上进行测试，但要求用户在查看之前拥有 cookie 的站点在 Internet 上是实时的。*

这是我设置cookie的方式：

```
$('#submit')[0].addEventListener("click", $.cookie("test-cookie", "test-value")); 
```

然后，在另一个站点我有这样的东西来检查 cookie：

```
var cookie = $.cookie("test-cookie");
if (cookie != null && cookie != "") {
    console.log("TRUE");
} else {
    window.location = "http://www.thelandingpagesite.com";
} 
```

现在，我不确定问题是否出在 cookie 上（据我所知，我不知道它们是否可以如此轻松地在站点之间传输，它们存在于用户计算机上），或者我是否只是设置错误。任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:03:34.100

Cookie 由用户的浏览器存储，但它们的存储是参考设置它们的站点。

站点 A 无法为站点 B 设置 cookie。

Cookie 用于（除其他外）存储偏好。允许任何任意站点为任何其他任意站点设置用户偏好会招致破坏行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T20:05:41.343

据我所知，一个站点 (www.example.com) 无法从另一个站点 (www.Second-example.com) 的浏览器中检索 cookie。

如果允许这样做，这将是一个重大的安全漏洞，因为有人很容易窃取您的 cookie 并访问您的帐户和个人详细信息。

恐怕您将不得不使用 cookie 以外的其他机制。

您可以按照您在对另一个答案的评论中的建议存储他们的 IP。请注意，该局域网上的任何人都可以访问该页面......例如，如果学校的学生填写您的表格......整个学校都可以访问您试图限制的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T20:11:28.147

对用户进行身份验证似乎不是您的问题，您只是希望用户在访问站点 B 之前访问站点 A。

这个问题可能有一些用处： [Cross domain iframe content load detection](https://stackoverflow.com/questions/2754282/cross-domain-iframe-content-load-detection)

在**站点 B**上，您可以有一个指向**站点 A**上的页面的 Iframe，该页面反过来加载指向**站点 B**上的页面的 Iframe 。如果指向**站点 A**的 iframe没有 cookie，它可以将该信息传递给**站点 B**的 iframe （可能通过加载不同的页面），加载时可以调用`parent.parent.cookieNotSet()`（或者您决定调用该函数的任何内容）以便**站点 B**将重定向到**站点 A**。

我希望这是有道理的。这是一个很大的解决方法，但需要解决跨域问题。所有这些显然都需要在浏览器上启用 JavaScript，但是现在哪个浏览器没有启用 JavaScript？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T20:16:40.077

Cookie 是为特定域或一组子域设置的。它们可以跨多个子域读取，因此可以为域“.domain.com”设置一个 cookie，该 cookie 将与所有对“www.domain.com”、“landingpage.domain.com”的请求一起发送，等等

如果最终您将登录页面和它们发送到的页面放在同一个根域上，这是可能的。

# c++ - 将 Dijkstra 算法与 Lemon Graph Library 一起使用

> ID：11941415
> 
> 赞同：1
> 
> 时间：2012-08-13T20:01:23.790
> 
> 标签：c++, dijkstra, lemon-graph-library

[我对从 Lemon Graph Libraries（Lemon's Dijkstra's http://lemon.cs.elte.hu/pub/tutorial/a00009.html](http://lemon.cs.elte.hu/pub/tutorial/a00009.html)）运行 Dijkstra 算法所需的一些参数有疑问。要运行该算法，可以编写类似图形`dijkstra(g, length).distMap(dist).run(s,t);`在哪里、起始节点是什么以及目标节点是什么的东西。我的问题是什么是and ，以及它们是如何使用的。谢谢！`g``s``t``length``dist`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:25:58.167

我读它的方式，它们都需要是地图，一个到边长（输入）一个到顶点距离（输出），

还要检查 lgf_demo.cc 和 dijkstra_test.cc 并注意

> Dijkstra& distMap (DistMap & m) [内联]
> 
> 设置存储算法计算的节点距离的地图。如果在调用 run() 或 init() 之前不使用此函数，则会自动分配一个实例。当然，析构函数会释放这个自动分配的映射。
> 
> 返回： (*this)
> 
> * * *
> 
> const DistMap& distMap ( ) const [内联]
> 
> 返回对节点映射的 const 引用，该节点映射存储由算法计算的节点的距离。
> 
> 前提条件：在使用此函数之前，必须调用 run() 或 init()。

所以这是你的 Dijstra 输出。

# tsql - 如何更简洁或优雅地编写此 tsql 日期时间代码

> ID：11941420
> 
> 赞同：0
> 
> 时间：2012-08-13T20:01:59.090
> 
> 标签：tsql, datetime

我需要获取当月第一天的 tsql 日期时间以在查询中使用。

我想出了

```
declare @StartDate datetime
set  @StartDate =  cast( MONTH( getdate()) as char(2))+ '/1/' 
       +  cast( Year( getdate()) as char(4))
select @StartDate 
```

但是想知道一个更好的方法来做到这一点。

建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T20:04:10.203

这个怎么样：

```
SELECT DATEADD(month, DATEDIFF(month, 0, getdate()), 0) AS FirstOfMonth 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T20:04:25.693

```
select dateadd(month, datediff(month, 0, getdate()), 0) 
```

# emacs - 在初始化时加载 iMenu

> ID：11941424
> 
> 赞同：0
> 
> 时间：2012-08-13T20:02:32.183
> 
> 标签：emacs, elisp, gnu, init

我很抱歉这个非常基本的问题。我试图在初始化时在 GNU Emacs 中加载 iMenu。通常它通过执行加载`M-x imenu-add-menubar-index`。我知道我需要将一些东西放入我的`~/.emacs`文件中，但我尝试的一切都不起作用。

我是 GNU Emacs 和 Lisp 的新手，我需要放什么才能自动生成索引菜单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T21:16:10.900

`imenu-add-menubar-index`通过添加到其模式挂钩，您可以为属于某个主要模式的所有缓冲区提供一个 Imenu“索引”菜单栏项。例如，

```
(add-hook 'c-mode-hook #'imenu-add-menubar-index)      ; c
(add-hook 'python-mode-hook #'imenu-add-menubar-index) ; python 
```

# java - 在 PHP 中使用 .NET、Java、JGSoft RegEx 风格

> ID：11941426
> 
> 赞同：3
> 
> 时间：2012-08-13T20:02:44.087
> 
> 标签：java, php, .net, regex, pcre

您可能知道，RegEx 不止一种风格：PCRE，一种来自 Java，一种来自 .NET ......等等，它们都有一些不同的语法，有些或多或少有一个特性。

现在我的问题是，如果有人知道是否可以使用例如**来自 .NET in PHP 的风味**。

我分别需要这个我想知道这是否可能，因为我想为我的网站制作一个小正则表达式检查器，并且我想让用户选择你选择他的风格......

或者是唯一一种手动将模式从一种风格转换为另一种风格的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T23:39:03.380

我能想到的唯一方法是编写自己的 php 模块，它为您提供诸如 等`net_match`功能`java_match`。这些模块或多或少是简单的包装器，可以对用相应语言编写的外部程序进行系统调用。因为我从来没有写过 php mod，所以我不知道你是否必须用特定的语言编写它。我也认为，您的网络服务器*必须*在 Windows 机器上，因为我不知道 .net [1的 unix 端口](http://www.mono-project.com/Main_Page)

**编辑**

[1](http://www.mono-project.com/Main_Page)正如 Ghost 指出的那样，有一种方法可以让 .net 在 UNIX 机器上运行，名为[mono](http://www.mono-project.com/Main_Page)

# c# - 使用 Linq 更新列表

> ID：11941428
> 
> 赞同：2
> 
> 时间：2012-08-13T20:02:47.690
> 
> 标签：c#

假设我有一些这样的对象：

```
Class NetworkSwitch
{  
   private String _name; 
   String name { get {return _name;} set {_name=value;}}
   Dictionary<int, VLAN> VLANDict = new Dictionary<int, NetworkSwitch>();

public List<CiscoSwitch> GetAllNeigbors()
         {
           List<CiscoSwitch> templist = new List<CiscoSwitch>();

        foreach (KeyValuePair<int, CiscoVSAN> vlanpair in this.VLANDict)
        {

            templist.AddRange((vlanpair.Value.NeighborsList.Except(templist, new SwitchByNameComparer())).ToList());
        }
        return templist;
}

Class VLAN
{ 
  private Int _VLANNum;
  Int VLANNum {get {return _VLANNum ;} set {_VLANNum =value;}}

  //a neighbor is another switch this switch is connected to in this VLAN
  // the neighbor may not have all same VLANs
  List<NetworkSwitch> Neighbors = new List<NetworkSwitch>();
} 
```

上面是这样设计的，因为物理连接的两台交换机可能没有分配所有相同的 VLAN。我正在尝试做的是单步执行给定交换机上每个 VLAN 中的邻居列表，如果名称与输入列表中的名称匹配，则更新对另一台交换机的引用。这是我尝试过的，它不会编译。我想知道 LINQ 是否可以以某种方式做到这一点，或者是否有更好的方法。

```
// intersect is the input list of NetworkSwitch objects
//MyNetworkSwitch is a previously created switch

foreach (NetworkSwitch ns in intersect)
{
  foreach (KeyValuePair<int, VLAN> vlanpair in MyNetworSwitch.VLANDict)
  {
      foreach (CiscoSwitch neighbor in vlanpair.Value.Neighbors)
      {   // this is the line that fails - I can't update neighbor as it is part of the foreach
          if (ns.name == neighbor.name) { neighbor = ns; }
      }
  }
} 
```

另一个问题 - 我添加了获取 NetworkSwitch 对象的所有邻居的方法。假设我要获取该列表，然后使用对具有相同名称的交换机的不同实例的引用来更新它，这会更新 VLAN 中 NetworkSwitch 对象的引用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:11:01.720

由于`IEnumerable`工作原理，不支持在迭代时更改 Enumerable 的内容。

您要么必须返回一个包含更改值的新列表，然后更新原始引用，要么使用普通的 ol'`for (...; ...; ...)`循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T20:22:37.417

像这样的东西应该工作：

```
 foreach (NetworkSwitch ns in intersect) 
        {   
            foreach (KeyValuePair<int, VLAN> vlanpair in ns.VLANDict)
            {
                if(vlanpair.Value.Neighbors.RemoveAll(n => n.name == ns.name) > 0)
                    vlanpair.Value.Neighbors.Add(ns);
            } 
        } 
```

# java - 禁用浏览器从远程位置访问 tomcat

> ID：11941430
> 
> 赞同：0
> 
> 时间：2012-08-13T20:02:52.170
> 
> 标签：java, apache, security, tomcat

我已经安装了 mod_jk 我想直接使用 localhost:8080/webApp 禁用对 tomcat 的访问。它应该只能通过使用 mod_jk 模块的 apache 服务器访问，并且用户也无法`webApp`在 url 中看到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:05:30.843

您可以在 server.xml 文件中注释掉 http 类型的连接器。

这将使 tomcat 仅在 ajp 连接器上侦听。

问候

菲利普

# c# - 修改传入的变量到javascript

> ID：11941433
> 
> 赞同：0
> 
> 时间：2012-08-13T20:03:00.430
> 
> 标签：c#, javascript, asp.net-mvc

我只是在 mvc 3 中使用 javascript/jquery，只是好奇是否有办法将 C# 变量传递给 javascript，然后在脚本中进行修改。虽然玩弄它，但我注意到这是不可能的，因为传入的变量只是值，而不是地址。

本质上，我想做的是在单击 html 按钮时将 bool 值从 false 更改为 true。我想我可以通过 javascript 做到这一点，但遇到了上述问题。反正有这样做吗？更好的是，我确信有办法，但我的设计模式有缺陷吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:10:13.990

这就是 ASP.Net/MVC 的设置方式...不，您不能在 JavaScript 中修改服务器端 C# 变量。JavaScript 在浏览器中运行，而 C# 页面的代码在服务器上运行。为每个请求创建和销毁所有 C# 类，并且 JavaScript 代码确实在不同的时间运行（通过 GET/POST 每次页面导航后再次销毁）。

有多种方法可以向/从 JavaScript 传递数据，最简单的方法是在 GET 上呈现并提交 (POST) 以将更改的字段返回到服务器。

# matrix - SSRS - 使用矩阵中其他数据集中的列计算的字段（交叉表）

> ID：11941438
> 
> 赞同：1
> 
> 时间：2012-08-13T20:03:17.473
> 
> 标签：matrix, ssrs-2008, ssrs-tablix

我在 SSRS 报告中有几个数据集。如何在具有相同数据字段的另一个 DataSet 的公式中使用来自一个 DataSet 的求和矩阵（交叉表）列（只是选择标准不同（类别不同））。当我在另一个 DataSet 中指定该字段时，它每次只给我 First（我没有使用 First()）；它不会使用第二个数据集中的交叉表自动移动它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:04:40.697

您不能在 SSRS 2008 中执行此操作。此功能首先在 SSRS 2008 R2 中可用。根据您在报表布局中使用数据的方式，您可能能够使用 ReportItems 集合来获取值。例如，您可以在如下表达式中将 Textbox1 的内容与不同数据集中的字段（称为 MyColumn1 的字段）一起使用：

```
=ReportItems!Textbox1.Value + Fields!MyColumn1.Value 
```

ReportItems 集合在页面呈现后使用文本框的值，因此您只获得结果而不是原始数据，因此您必须使用原始数据。

# c++ - C++ 访问继承类的成员，其中继承类是模板参数

> ID：11941439
> 
> 赞同：1
> 
> 时间：2012-08-13T20:03:20.093
> 
> 标签：c++, templates, inheritance, disambiguation

我正在使用 libMesh FEM 库并尝试开发一个继承自 libMesh 的类（EqCore）。这个类将提供一些额外的特性，这些特性被我想要实际使用的类（MainEq）再次继承。

这两个函数 set_constant 和 get_constant 导致以下错误。它们使用不同的继承方案如图所示工作（请参阅[模板类的继承与 C++ 中的模板成员函数](https://stackoverflow.com/questions/11042531/inheritance-of-template-class-with-a-template-member-function-in-c)）。这个问题的不同之处在于，现在模板参数（Type）实际上是一个被继承的类。这是一种危险的做法吗？

我将不胜感激使此代码正常工作或找到替代方法的任何帮助。

错误信息：

> 在成员函数 'void EqCore::set_constant(std::string, ParamType)': test_libmesh.cpp:26:57: error: expected primary-expression before '>' token
> 
> 在成员函数“ParamType EqCore::get_constant(std::string)”中：/home/slaughter/Documents/programs/source/test_libmesh.cpp:31:76: 错误：“>”标记之前的预期主表达式

程序：

```
//! \example test_libmesh.cpp

#include <string>
using std::string;

// libMesh includes
#include <libmesh.h>
#include <libmesh_common.h> 
#include <equation_systems.h>
#include <transient_system.h>
#include <explicit_system.h>
#include <parameters.h>
#include <mesh.h>
using namespace libMesh;

// Fundamental behavior that will be used among many classes
template <typename Type> class EqCore : Type{
    public:

        // Class constructor
        EqCore(EquationSystems& sys, string name) : Type(sys, name, 1){}

        // A function for storing a constant value (causes error)
        template<typename ParamType> void set_constant(std::string name, ParamType var){  
            Type::get_equation_systems().parameters.set<ParamType>(name) = var;
        }

        // A function for retrieving a constant value (causes error)
        template<typename ParamType> ParamType get_constant(std::string name){  
            ParamType output = Type::get_equation_systems().parameters.get<ParamType>(name);
            return output;
        } 
};

// A test class derived
class MainEq : public EqCore<ExplicitSystem>{
    public: 

        // Constructor
        MainEq(EquationSystems& sys) : EqCore(sys, "main"){ }   

};  

// Begin main function
int main (int argc, char** argv){

    // Initialize libMesh and create an empty mesh
    LibMeshInit init (argc, argv);
    Mesh mesh;

    // Test w/o any of the above classes
    EquationSystems eq_sys(mesh);
    eq_sys.parameters.set<double>("test1") = 1;
    printf("Test 1: %f\n", eq_sys.parameters.get<double>("test1"));

    // Test my class set/get functions
    MainEq eq(eq_sys);
    eq.set_constant<double>("test2", 2);
    printf("Test 2: %f\n", eq.get_constant<double>("test2"));   
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T20:07:09.793

因为您在模板中，所以编译器无法`set`在解析期间自动确定这是一个模板，并且假设它`set`是一个非模板，因此解析失败。

解决方案是显式通知编译器`set`是成员模板，因此。

`Type::get_equation_systems().parameters.template set<ParamType>(name) = var`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T20:20:22.020

在*C++ Template Metaprogramming: Concepts, Tools, and Techniques from Boost and Beyond*中，David Abrahams 和 Aleksey Gurtovoy ( [Amazon](https://rads.stackoverflow.com/amzn/click/com/0321227255) ) 解释如下：

```
double const pi = 3.14159265359;

template <class T>
int f(T& x)
{
    return x.convert<3>(pi);
} 
```

> `T::convert`可能是成员函数模板，在这种情况下，突出显示的代码传递`pi`给`convert<3>`. 它也可能是一个数据成员，在这种情况下`f`返回 `(x.convert < 3 ) > pi`。这不是一个非常有用的计算，但编译器不知道。
> 
> 关键字告诉编译器`template`依赖名称是成员模板：

```
template <class T>
int f(T& x)
{
    return x.template convert<3>(pi);
} 
```

> 如果我们省略`template`，编译器假定`x.convert`没有命名模板，并且它后面的 < 被解析为小于运算符。

# javascript - 如果语句，$(this) == $("#div")

> ID：11941442
> 
> 赞同：2
> 
> 时间：2012-08-13T20:03:41.747
> 
> 标签：javascript, jquery

嗨，

仅当焦点文本框具有特定 ID 时，我才想运行一些代码。这是我的代码：

```
$("input:text").focus(function() {
        if ($(this) == $("#divid")) {
                //action
        }
}); 
```

它不起作用，我不确定为什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T20:05:10.263

尝试直接通过 id 进行比较。

```
if (this.id === "divid") {
    // do something
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-13T20:05:43.540

这永远不会奏效，因为每次调用`$()`都会返回一个新对象。

然而：

```
this == $('#divid')[0] 
```

应该管用。或者，正如 Kevin B 明智地建议的那样，只需查看您的元素是否具有相关的“id”。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-13T20:06:33.220

您可以使用 jQuery`.is`进行检查。

```
if($(this).is('#divid')){
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T20:06:20.693

```
$(function(){ // insure your code is runing after document is ready

    $("input[type='text']").focus(function() { //css selector
        if ($(this).is("#divid")) { // use .is to check the jquery way
           //action
        }
    });

}); 
```

# c# - 时间：2019-04-10 标签：c#ssurfing web with vpn

> ID：11941445
> 
> 赞同：1
> 
> 时间：2012-08-13T20:03:48.130
> 
> 标签：c#, networking, proxy, vpn

我正在考虑构建一个简单的软件，我可以使用该`WebBrowser`对象在网上冲浪。但是，请确保我在 vpn 或代理下。

我想知道是否有可能使用一些 api 连接到 vpn 或代理服务，并且每隔一个小时或我选择的时间获取一个新的 ip。

如果可能的话，你能给我一些参考吗？就像，我需要学习什么才能实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:08:16.800

这实际上很简单，这是一个让您开始使用 WebBrowser 控件的示例，您可以在几分钟内完成它。[网络浏览器示例](http://www.dreamincode.net/forums/topic/59025-create-a-webbrowser/)

在此之后，您只需为您的 VPN 或代理添加逻辑，这完全取决于您的选择。

如果您试图不影响 IE 的系统设置，这可能会有所帮助：[代理设置](https://stackoverflow.com/questions/2499568/how-to-set-a-proxy-for-webbrowser-control-without-effecting-the-system-ie-proxy)

虽然如果可以的话，如果您不介意影响 IE，将它们设置在注册表中可能会更容易。这在更改注册表时：注册表[中的代理设置](https://stackoverflow.com/questions/1393713/enabling-disabling-proxy-app-doesnt-work-properly-with-ie)

至于特定于如何获取代理、身份验证等的信息，您需要选择要使用的代理服务并阅读它们。那应该只是一个搜索引擎研究项目。

# xcode - install_name_tool 更改未在分发中传播

> ID：11941446
> 
> 赞同：2
> 
> 时间：2012-08-13T20:04:02.363
> 
> 标签：xcode, macos, dynamic-linking, dylib, install-name-tool

我正在使用 py2app 将 python GUI 包装到应用程序中。在移植到另一台机器时，我注意到我遇到了 libpng12.0.dylib 的依赖问题。这是由系统提供的存储，带有 X11，因此传统上不由 py2app 捆绑。

另一个 dylib（捆绑）需要更新版本的 libpng。使用下面的命令，我尝试链接到我将包含在 OS X 中的 libpng 的副本。这在本地工作得很好，但是当我尝试复制应用程序时，它会恢复到旧路径。下面的命令应该更好地解释这一点。

将我的 libpng 复制到我的应用程序的框架目录。

```
cp /usr/X11/lib/libpng12.0.dylib dist/PyStretch.app/Contents/Frameworks/ 
```

查看libgdal.1.dylib的依赖路径（需要较新的libpng）

```
 mbp:pystretch drferling$ otool -L   
   dist/PyStretch.app/Contents/MacOS/../Frameworks/libgdal.1.dylib 
   dist/PyStretch.app/Contents/MacOS/../Frameworks/libgdal.1.dylib:
   @executable_path/../Frameworks/libgdal.1.dylib (compatibility version 18.0.0, current version 18.1.0)
    ...CLIPPED
    /usr/X11/lib/libpng12.0.dylib (compatibility version 47.0.0, current version 47.0.0)
    @executable_path/../Frameworks/libcfitsio.dylib (compatibility version 0.0.0, current version 0.0.0) 
```

所以 libpng 链接到系统安装。我们需要将其更改为链接到本地​​（应用程序）安装。

```
install_name_tool -change /usr/X11/lib/libpng12.0.dylib @executable_path/../Frameworks/libpng12.0.dylib dist/PyStretch.app/Contents/MacOS/../Frameworks/libgdal.1.dylib 
```

然后我们需要验证它是否有效。

```
mbp:pystretch drferling$ otool -L 
dist/PyStretch.app/Contents/MacOS/../Frameworks/libgdal.1.dylib dist/PyStretch.app/Contents/MacOS/../Frameworks/libgdal.1.dylib:
@executable_path/../Frameworks/libgdal.1.dylib (compatibility version 18.0.0, current version 18.1.0)
...CLIPPED
@executable_path/../Frameworks/libpng12.0.dylib (compatibility version 47.0.0, current version 47.0.0)
@executable_path/../Frameworks/libcfitsio.dylib (compatibility version 0.0.0, current version 0.0.0) 
```

所以它奏效了。libpng 现在链接到包含的副本，而不是系统副本。

然后我将应用程序复制到另一台机器上进行测试，libpng 恢复为静态链接到 libpng 的系统安装！

为什么？

我也尝试使用 install_tool_name -id，但结果是一样的。当我将应用程序复制到另一台机器时，我的 dylib 的链接不断变化。

# asp.net-web-api - Web Api：未找到 System.Net.Http 版本 2.0.0.0

> ID：11941447
> 
> 赞同：6
> 
> 时间：2012-08-13T20:04:07.403
> 
> 标签：asp.net-web-api, .net-assembly, nuget-package, system.net, system.net.httpwebrequest

当我为 WebApi 安装 NuGet 包时，它为我提供了 System.Net.Http 的 1.0.0.0 版本，但它引用了版本 2。

我似乎无法为我的生活找到第 2 版。当我下载 .net 4.5 时，我得到 System.Net.Http 版本 4.0.315.x，但我不能使用它，因为 Web Api 程序集引用版本 2.0.0.0。

有人知道我在哪里可以找到这个版本 2.0.0.0 吗？我已经尝试过 NuGet 包管理器、mvc4、.net 4.5，但没有给我版本 2。

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-24T11:40:29.487

在节点下的 Web.config 文件中添加以下配置`<system.web>`（假设您的应用在 .NET 4.5 上运行，`targetFramework`属性设置为 4.5）：

```
<compilation targetFramework="4.5">
  <assemblies>
    <add assembly="System.Net.Http, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
  </assemblies>
</compilation> 
```

还在`<configuration>`节点下的根级别添加以下内容：

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
      <assemblyIdentity name="System.Net.Http" publicKeyToken="b03f5f7f11d50a3a" />
      <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
    </dependentAssembly>
  </assemblyBinding>
</runtime> 
```

这应该可以解决您的问题。

# jquery - 如何使用 jQuery Mobile 过滤可折叠集？

> ID：11941451
> 
> 赞同：2
> 
> 时间：2012-08-13T20:04:16.160
> 
> 标签：jquery, listview, jquery-mobile, filter, collapse

我有一个简单的可折叠集，我想使用单个过滤器进行过滤，该过滤器将显示在集上方。期望的结果是只看到与我的搜索匹配的项目（而不是项目出现的整个可折叠块）。

请告知如何处理此任务...

```
<div data-role="content">
    <div data-role="collapsible-set">   
        <div data-role="collapsible" data-content-theme="c">
            <h3>Firs Collapsed list</h3>
            <ul data-role="listview" data-inset="false" data-theme="d">
                <li><a href="index.html">Acura</a></li>
                <li><a href="index.html">Audi</a></li>
                <li><a href="index.html">BMW</a></li>
            </ul>
        </div>
        <div data-role="collapsible" data-content-theme="c">
            <h3>Second Collapsed list</h3>
            <ul data-role="listview" data-inset="false" data-theme="d">
                <li><a href="index.html">Cadillac</a></li>
                <li><a href="index.html">Chrysler</a></li>
                <li><a href="index.html">Dodge</a></li>
            </ul>
        </div>
        <div data-role="collapsible" data-content-theme="c">
            <h3>Third Collapsed list</h3>
            <ul data-role="listview" data-inset="false" data-theme="d">
                <li><a href="index.html">Ferrari</a></li>
                <li><a href="index.html">Ford</a></li>
            </ul>
        </div>
    </div><!--/content-primary -->
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T20:39:12.210

您可以将`data-role="collapsible"`元素放在列表项中的`data-role="listview"`元素中，该元素可以具有`data-filter="true"`自动创建过滤器搜索输入的属性。这是一个例子：

```
 <ul data-role="listview" data-filter="true" id="outer-ul">
        <li>
            <div data-role="collapsible" data-content-theme="c">
                <h3>Firs Collapsed list</h3>
                <ul>
                    <li><a href="index.html">Acura</a></li>
                    <li><a href="index.html">Audi</a></li>
                    <li><a href="index.html">BMW</a></li>
                </ul>
            </div>
        </li>
    </ul> 
```

这是一个演示：http: [//jsfiddle.net/Awg8W/2/](http://jsfiddle.net/Awg8W/2/)

请注意，您必须处理一些 CSS 问题。其中之一是具有内部`data-role="listview"`元素会创建多个搜索输入。我用这个 CSS 隐藏了除了第一个之外的所有内容：

```
#page .ui-listview-filter:nth-child(n+2) {
    display : none;
}​ 
```

**更新**

然后，您可以使用以下 jQuery 代码复制手风琴效果：

```
//wait for page to initialize
$(document).on('pageinit', '#page', function () {

    //find the headings we want to watch
    $(this).find('#outer-ul').find('.ui-collapsible-heading').on('click', function () {

        //cache the parent collapsible widget
        var that = $(this).closest('.ui-collapsible')[0];

        //collapse all other collapsible widgets
        $(this).closest('ul').find('.ui-collapsible').filter(function () {

            //filter-out the collapsible widget that got clicked, so it functions
            return this !== that;
        }).trigger('collapse');

        //since we are messing around with the listview widget, let's refresh it
        $(this).closest('ul').trigger('refresh');
    });
});​​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-16T20:08:29.147

我知道这个问题有点老了，但我遇到了同样的问题。我找到了一个不需要编写 JavaScript 或 CSS 的解决方案。我希望这对其他遇到此问题的人有用。 [jsfiddle](http://jsfiddle.net/e8gxU/)

编辑： [使用嵌套列表的更新](http://jsfiddle.net/e8gxU/48/)

```
<div data-role="page" id="page">
    <div data-role="content">
        <h1>Collapsible set with search</h1>
        <div data-role="collapsible-set" data-filter="true">
            <div data-role="listview" data-inset="true" data-filter="true">
                <div data-role="collapsible">
                    <h1>Numero uno</h1>
                    <div>some text</div>
                </div>
                <div data-role="collapsible">
                    <h1>Number two</h1>
                    <div>some text</div>
                </div>
            </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T15:35:19.743

这个问题有点老了，但是当我今天遇到同样的问题时，这里是我的解决方法的演示：http: [//jsfiddle.net/2Vg4z/](http://jsfiddle.net/2Vg4z/)。

因此，关于 JS，我只是从原始[列表视图过滤器](https://github.com/jquery/jquery-mobile/blob/master/js/widgets/listview.filter.js)中复制/粘贴代码并对其进行了一些修改，以便可以将其应用于多个列表视图。

创建搜索字段的`ul`对象必须设置 2 个属性：

*   `data-x-filter`, 一个布尔值`data-filter`
*   `id`，以便能够识别搜索字段

必须通过此搜索字段过滤的其他`ul`必须设置 1 个属性：

*   `data-x-filter-id`，之前设置的id

[要使用它，只需从这个 pastebin](http://pastebin.com/nW3y9SSY)复制/粘贴来自 jsfiddle 的代码！

在演示中，我添加了一个空列表以将其放在可折叠组的顶部，但如果列表不为空，它也会过滤自己的项目。

我希望它有所帮助。

**注意：**这个解决方案并不完美，但我只是想快速完成。更好的解决方案是创建一个“搜索字段小部件”以避免需要空列表，但它需要更多的编码。

# c# - 如何将两个 WPF 组合框绑定到一个 XML 文件？

> ID：11941454
> 
> 赞同：0
> 
> 时间：2012-08-13T20:04:22.847
> 
> 标签：c#, wpf, xml, xaml, data-binding

我有以下 XML 文件：

```
<Palettes>
  <Palette>
    <Primary Name="Black"/>
    <Other Name="Blue"/>
    <Other Name="Red"/>
  </Palette>
  <Palette>
    <Primary Name="Green"/>
    <Other Name="Orange"/>
    <Other Name="Yellow"/>
    <Other Name="Violet"/>
  </Palette>
</Palettes> 
```

我想要两个组合框：一个显示每个调色板的原色，另一个显示在第一个组合中选择的调色板的“其他”颜色。

如果可能的话，我希望在 XAML 文件中而不是在代码隐藏中完成此数据绑定。

我有以下 XAML 文件：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="80" Width="350">
    <Window.Resources>
        <XmlDataProvider x:Key="Palettes" Source="pack://siteoforigin:,,,/Palettes.xml" />
    </Window.Resources>
    <Grid>
        <ComboBox x:Name="cbxPrimary"
                  DisplayMemberPath="Primary/@Name"
                  ItemsSource="{Binding Mode=OneWay, Source={StaticResource Palettes}, XPath=/Palettes/Palette}"
                  Margin="10,10,175,10"
                  SelectedIndex="0"/>
        <ComboBox x:Name="cbxOther"
                  DisplayMemberPath="Other/@Name"
                  ItemsSource="{Binding ElementName=cbxPrimary, Mode=OneWay, Path=SelectedItem}"
                  Margin="175,10,10,10"
                  SelectedIndex="0"
                  SelectedValue="{Binding XPath=./Other/@Name}"
                  SelectedValuePath="./Other/@Name"/>
    </Grid>
</Window> 
```

但是，这将在第二个组合框中显示“其他”颜色的空白条目：

![空白组合框](../Images/6fb461823b895c31e6c4ed66f810bbf7.png)

我无法弄清楚我是否遗漏了什么，或者是否编码不正确。如何纠正？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:15:28.200

顾名思义`DisplayMemberPath`，它是成员的路径，而不是任意嵌套的节点或属性。我将按如下方式更改绑定：

```
<ComboBox x:Name="cbxOther"
          DataContext="{Binding ElementName=cbxPrimary, Path=SelectedItem}"
          ItemsSource="{Binding XPath=./Other/@Name}"
          Margin="175,10,10,10"
          SelectedIndex="0"/> 
```

使用`SelectedValue`/`Path`并且`DisplayMemberPath`仅在显示应该与基础值不同时才有意义。

# extjs - 为 Ext JS 3.4 添加动态列

> ID：11941467
> 
> 赞同：1
> 
> 时间：2012-08-13T20:05:21.843
> 
> 标签：extjs, extjs3, gridpanel

有没有办法在 Ext JS 3.4 中动态地将列添加到网格面板？

我正在尝试将行扩展器列添加到我的网格面板。

就像[这里](http://dev.sencha.com/deploy/ext-3.4.0/examples/grid/grid-plugins.html)的一样（第一个插件）

我可以通过修改 ui.js 并手动添加一列（就像[后面代码](http://dev.sencha.com/deploy/ext-3.4.0/examples/grid/grid-plugins.js)中的那一列）来做到这一点，但我尽量不这样做。

任何解决方法将不胜感激！

**编辑**：我为 Ext JS 4 找到[了这个](http://www.sencha.com/forum/showthread.php?134529-How-to-add-columns-in-grid-panel-by-clicking-on-add-column-button-in-extjs-4)。在 3.4 中有类似的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T16:53:34.577

在 3.4 中，您必须在网格上使用重新配置方法： [http ://docs.sencha.com/ext-js/3-4/#!/api/Ext.grid.GridPanel-method-reconfigure](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.grid.GridPanel-method-reconfigure)

# jquery - jQuery UI 定位

> ID：11941469
> 
> 赞同：0
> 
> 时间：2012-08-13T20:05:32.010
> 
> 标签：jquery, jquery-ui, jquery-plugins

我正在尝试定位默认设置为“Null”的 jQuery 键盘（直接显示在输入元素下方）。

```
$.keyboard.defaultOptions = {

        // *** choose layout & positioning ***
        layout       : 'qwerty',
        customLayout : null,

        position     : {
            of : null, // optional - null (attach to input/textarea) or a jQuery object (attach elsewhere)
            my : 'center top',
            at : 'center top',
            at2: 'center bottom' // used when "usePreview" is false (centers the keyboard at the bottom of the input/textarea)
        } 
```

然而，我想要做的是将键盘连接到 id 为“foo”的 div。

如果进行了这种更改，上面的代码会是什么样子？

谢谢。

# java - 获取结果集的 2 行连续

> ID：11941476
> 
> 赞同：1
> 
> 时间：2012-08-13T20:05:44.233
> 
> 标签：java, sql, rows, resultset

如果行字符串与特定字符串匹配，我需要将 ResultSet 的一行与连续行进行比较。

```
 while(rs.next())
    {
       String name = rs.getString("name");
     if(name.equalsIgnoreCase("SomeName")
      {
       String nextName =    //code to get the next consecutive row
        if(nextName.contains(name)
        {
         name = "NA";
         }

      }
     stringList.add(name);
     } 
```

当光标仍在该行上时，如何获取下一行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:07:05.177

方法提示：尝试将第一个存储在变量中，然后在读取下一行时进行比较。

在这里真正教你如何钓鱼，而不是把渔获交给你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T20:14:43.137

充实这一点（一点点）：

```
String lastName = null;
while (rs.next()) {
    // do stuff with this row
    if (name.equalsIgnoreCase("SomeName") && lastName != null) {
        // work with lastName & SomeName
    }

    // save/assign lastName
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T20:12:32.650

提示：尝试存储第一行值，然后使用另一个循环并比较该值。提示：使用嵌套循环

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T20:08:06.463

您可以使用 rs.next()、rs.getString() 和 rs.previous() 向前移动一行。

然而，更好的选择是将先前的字符串值存储在局部变量中，并在下一次迭代时进行比较。

# simulation - 仿真与软件工程

> ID：11941477
> 
> 赞同：-1
> 
> 时间：2012-08-13T20:05:48.410
> 
> 标签：simulation, agent, agent-based-modeling

我想开始一个模拟项目，这将是一个离散时间的模拟。目的是模拟涉及一些非自治物理模型的代理通信，因此不一定限于纯粹的基于代理的模拟。在开始之前，我想问一下确实存在哪些特定于仿真的软件工程实践，例如测试实践（适合 TDD？仿真往往是高度不确定的），从软件工程的角度来看，哪些问题是常见的、经常发生的问题等等。我说的不是建模过程，而是使用现有模型实现系统的过程。非常欢迎相关书籍推荐。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:28:50.483

Marcin 是对的，这个问题太宽泛了，除了*It Depends之外没有*[正确的答案。](https://stackoverflow.com/faq#dontask)™</p>

*主要原因是仿真软件首先仍然“只是”软件，工程部分在很大程度上**取决于您的要求**（编程语言、软件目的、时间预算、资源限制等） . 当然，可能会涉及*额外*的步骤（例如 VV&A），并且某些任务需要格外小心，例如测试，但这一切都取决于上下文。*

 *另外，在你开始破解之前，你有没有看过现有的工具——也许有一个你可以依赖的库或框架？如果是这样，哪些方法在那里有效？

除了一般性的介绍（像[这样](https://rads.stackoverflow.com/amzn/click/com/0071255192)），大多数书籍和论文还专注于仿真软件的特定子集（例如 C++ 中的仿真软件，或基于代理的仿真，或并行和分布式仿真）。因此，如果没有更多上下文，甚至很难将您指向相关材料。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:19:44.130

软件工程和（基于代理的）仿真软件开发中的一个常见问题是处理**浮点数**。

由于并非所有实数都可以用计算机中使用的浮点格式精确表示，因此随着时间的推移，在进行许多操作的模拟中会产生小错误，并影响最终结果。

此外，在不同硬件和软件平台上如何实现浮点运算的微小差异可能会导致在不同系统上运行模拟时产生不同的结果。

有关此对基于代理的模型的影响的一些广泛研究，请参阅这些链接：

[http://www.macaulay.ac.uk/fearlus/floating-point/](http://www.macaulay.ac.uk/fearlus/floating-point/)
[http://jass.soc.surrey.ac.uk/8/1/5.html](http://jasss.soc.surrey.ac.uk/8/1/5.html)*

# php - in_array 的问题

> ID：11941478
> 
> 赞同：0
> 
> 时间：2012-08-13T20:05:58.270
> 
> 标签：php, arrays

我有以下相当简单的代码，我需要确定某个值是否存在于数组中：

```
$testvalue = $_GET['testvalue']; // 4
$list = '3, 4, 5';
$array = array($list);

if (in_array($testvalue, $array)) { // Code if found } else { // Code if not found } 
```

即使数字 4 在数组中很明显，代码也会返回 else 括号内的代码。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T20:07:57.407

`$array`这是：

```
$array = array('3, 4, 5'); 
```

这与以下内容不同：

```
$array = array(3, 4, 5); 
```

所以，修复你创建这个数组的方式。不要从字符串中做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T20:10:05.223

更改第三行：

```
$array = array_map('trim', explode(',',$list)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T20:07:28.803

您的数组只包含一个值，即字符串`3, 4, 5`。

请参阅[CodePad](http://codepad.org/Yxy2WDs0)上的示例。

如果要将字符串转换为数组，可以使用：

```
$array = explode(', ', $list); 
```

我在逗号后面添加了一个空格，但更安全的方法是只使用一个逗号，然后修剪所有值。

# javascript - 在鼠标悬停时更改 div 颜色

> ID：11941480
> 
> 赞同：0
> 
> 时间：2012-08-13T20:06:15.217
> 
> 标签：javascript, jquery, css

我在 div 中有一行文本（链接）。我希望鼠标悬停在链接上时 div 颜色会发生变化。我尝试了各种没有成功的事情。您可以在此处查看我当前的代码：http: [//jsfiddle.net/Grek/D3TzM/](http://jsfiddle.net/Grek/D3TzM/)请注意，我不一定要寻找 jquery 解决方案。谢谢你的帮助

CSS

```
.source-title-box a{
    color:#467FD9;
    display:inline-block;   
}
.source-title-box a:hover{
    color:#666666;
}
.source-title-box hover{background:#cb2326;} 
```

JS：

```
$('a').hover(function(){
    $(this).parent().toggleClass('hover');
});​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T20:12:08.003

您可以在下面选择一个伪类，例如`:hover`. 根本不需要javascript。

[http://jsfiddle.net/7bFKq/](http://jsfiddle.net/7bFKq/)

```
.source-title-box:hover{
    background-color:#467FD9;

}

.source-title-box:hover a{
    color:#FFFFFF;
} 
```

​</p>

* * *

如果必须将鼠标悬停在 a 上，则需要 javascript。

[http://jsfiddle.net/7wwdb/](http://jsfiddle.net/7wwdb/)

```
$('a').hover(function(){
    // .closest will get you to the div regardless of what might
    // be in between. With .parent you get to the absolute parent, which
    // in your case is a span
    $(this).closest('.source-title-box').toggleClass('hover');
});​ 
```

css基本一样，只是`:hover`为了`.hover`

```
.source-title-box.hover{
    background-color:#467FD9;

}

.source-title-box.hover a{
    color:#FFFFFF;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T20:14:29.833

[**jsFiddle 演示**](http://jsfiddle.net/4pMSz/)

只需寻找最接近的 div，*immidiate* `.parent()`是一个`<span>`标签（本质上不会自动阻止元素，除非您以这种方式制作它们）。

```
$('.activity-title a').on('mouseover', function () {
    $(this).closest('div').toggleClass('hover');
});

$('.activity-title a').on('mouseout', function () {
    $(this).closest('div').toggleClass('hover');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T20:11:47.313

保留你拥有的 JavaScript，并添加这个 CSS 类：

```
.hover {
    background-color: #f00;
} 
```

[http://jsfiddle.net/RLjvB/](http://jsfiddle.net/RLjvB/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T20:18:03.977

改变这个：

```
.source-title-box a
{
    color:#467FD9;
    display:block;
    text-decoration:none;    
} 
```

到：

```
.source-title-box a
{
    color:#467FD9;
    display:block;
    text-decoration:none;  
    padding:15px;
} 
```

还有这个：

```
.source-title-box
{
    color: #000;
    background: #fff;
    padding: 15px;
    width: 200px;
    position: relative;
    margin-top:10px;
    border: 1px dotted #666;
} 
```

到：

```
.source-title-box
{
    color:#000;
    background:#fff;
    width:230px;
    position:relative;
    margin-top:10px;
    border:1px dotted #666;
} 
```

**[演示](http://jsfiddle.net/D3TzM/7/)**

不需要 JS。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-13T20:43:09.513

格雷格，有2点：

1) jquery .hover() 函数需要两个处理程序作为参数。一个用于 handlerin（鼠标悬停）和一个用于 handlerout（鼠标移出）。只给出一个参数将该参数用作 In-Out 处理程序，即两个鼠标事件的处理程序相同。

2）确保您编写的脚本（js）包含在页面底部。即，就在关闭“body”标签之前。
这是因为：脚本执行时可能没有加载 html 元素。

```
...Your HTML Code...
<script>
    $('a').hover(function(){
    $(this).parent().toggleClass('hover');
    });​
</script>
</body> 
```

希望这可以帮助。

# java - 布尔变量名称的 Java 命名约定：writerEnabled 与 writerIsEnabled

> ID：11941485
> 
> 赞同：17
> 
> 时间：2012-08-13T20:06:41.860
> 
> 标签：java, naming-conventions, boolean

以下哪个声明符合 Java 的命名约定？

```
private boolean writerIsEnabled;
// with methods like
public boolean getWriterIsEnabled() 
public void setWriterIsEnabled() 
```

或者

```
private boolean writerEnabled;
// with methods like
public boolean getWriterEnabled() 
public void setWriterEnabled() 
```

我个人认为名字“writerIsEnabled”更具可读性，尤其是当您在这样的 if 语句中使用它时 -

```
if(writerIsEnabled)
 {
    //...
 } 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-13T20:09:48.567

据我所知，是这样的：

```
private boolean writerEnabled;
// with methods like
public boolean isWriterEnabled();
public void setWriterEnabled(boolean enabled); 
```

当类型为`boolean`或`Boolean`时，不同之处在于 Getter 以`is`而不是开头`get`。

我个人更喜欢这种`isWriterEnabled`方法。例如，像 JSF 这样的技术在访问属性时尊重该标准。EL 表达式用`is`和确认`get`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T20:09:59.833

如果这是在 writer 类中，您可能希望从变量中删除 Writer。

我通常不会`Is`在我的字段名称中使用，但会在方法中使用。

像这样的东西：

```
private boolean writerEnabled;

public boolean isWriterEnabled();
public void setWriterEnabled(boolean enabled); 
```

虽然这是我个人的命名约定，但您可能应该与您正在使用的任何其他人交谈，看看他们会使用什么。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-13T20:10:14.617

```
private boolean writerEnabled;
public boolean isWriterEnabled() 
public void setWriterEnabled() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-13T20:12:29.800

对于 getter 和 setter 方法，我相信约定是`public boolean isWriterEnabled()`and `public boolean isReaderEnabled()`。至于变量，应该是`private boolean writerEnabled`.

# php - 仅当帐单信息完整时才在结帐中显示“状态”值 - LemonStand

> ID：11941486
> 
> 赞同：0
> 
> 时间：2012-08-13T20:06:42.687
> 
> 标签：php

使用**LemonStand，**我使用以下代码片段在侧边栏中的“**结帐摘要**”部分中显示州名称：

`<?=Shop_CountryState::create()->find_by_id($billing_info->state)->name;?><br />`

但是，在我选择我的州之前，它在该区域显示“阿拉巴马州”。

有没有办法在结帐中完成计费和运输信息之前禁用运行上述代码？

谢谢

# javascript - Javascript Regexp：如果字母与数字相邻，则添加下划线

> ID：11941487
> 
> 赞同：1
> 
> 时间：2012-08-13T20:06:42.700
> 
> 标签：javascript, regex, space

我需要检查数字是否在字母旁边，如果是，请添加下划线。

例如：

```
Grapes23 --> Grapes_23 
```

我已经尝试了很长时间，但我对正则表达式很陌生。我试过这个但它不起作用：

```
str=str.replace(/([A-z]+)([0-9])/i, '_'); //if number next to letter, add underscore 
```

我会很感激任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T20:11:50.293

查找一个字母后跟一个数字：

```
str = str.replace(/([a-z])(?=[0-9])/ig, '$1_'); 
```

[http://regexr.com?31qsr](http://regexr.com?31qsr)

这个正则表达式的工作原理：

*   `([a-z])`是任何小写字母，将其包裹在括号中使其成为“匹配组”
*   `(?=[0-9])`是“前瞻”。它基本上意味着“后跟[0-9]（任何数字）”
*   `i`表示忽略大小写（否则我们将不得不使用`[a-zA-Z]`）
*   `g`表示全局，或替换它找到的每个匹配项（默认只替换第一个匹配项）
*   `$1`表示“第一个匹配组”，或上面第一个项目符号匹配的字母。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T20:11:14.287

`str.replace(/([a-zA-Z])(\d)/g,'$1_$2')`在你的字符串上运行。这将查找后跟数字的任何字母，捕获字母和数字（注意括号），然后用两者之间的下划线替换它们。$1 和 $2 是对在正则表达式匹配中找到的捕获的字母和数字的回调。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-13T20:11:23.100

最简单的方法是：

```
string.replace(/(\D​​​​​​​​​​​​)(\d)/,'$1_$2') 
```

[JS小提琴](http://jsfiddle.net/davidThomas/Gy3A5/)。

请注意，这只会替换第*一个*实例，如果您希望替换*所有*实例，那么我建议使用上述方法，但使用`g`（全局）标志：

```
string.replace(/(\D​​​​​​​​​​​​)(\d)/g,'$1_$2') 
```

[JS小提琴](http://jsfiddle.net/davidThomas/Gy3A5/1/)。

# python - 从具有复合（分层）索引的 Pandas 数据框中选择行

> ID：11941492
> 
> 赞同：33
> 
> 时间：2012-08-13T20:07:07.033
> 
> 标签：python, pandas, dataframe, multi-index

我怀疑这是微不足道的，但我还没有发现可以让我根据分层键的值从 Pandas 数据框中选择行的咒语。因此，例如，假设我们有以下数据框：

```
import pandas
df = pandas.DataFrame({'group1': ['a','a','a','b','b','b'],
                       'group2': ['c','c','d','d','d','e'],
                       'value1': [1.1,2,3,4,5,6],
                       'value2': [7.1,8,9,10,11,12]
})
df = df.set_index(['group1', 'group2']) 
```

df 看起来和我们预期的一样：

![在此处输入图像描述](../Images/1cd940261ebb179b9a1c06a2f575a8d5.png)

如果 df 没有在 group1 上被索引，我可以执行以下操作：

```
df['group1' == 'a'] 
```

但是在这个带有索引的数据帧上失败了。所以也许我应该把它想象成一个带有层次索引的熊猫系列：

```
df['a','c'] 
```

没有。那也失败了。

那么如何选择所有行：

1.  组 1 == 'a'
2.  group1 == 'a' & group2 == 'c'
3.  组 2 == 'c'
4.  ['a','b','c'] 中的组 1

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-08-13T21:37:08.807

尝试使用`xs`非常精确：

```
In [5]: df.xs('a', level=0)
Out[5]: 
        value1  value2
group2                
c          1.1     7.1
c          2.0     8.0
d          3.0     9.0

In [6]: df.xs('c', level='group2')
Out[6]: 
        value1  value2
group1                
a          1.1     7.1
a          2.0     8.0 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-13T20:26:38.163

如下语法将起作用：

```
df.ix['a']
df.ix['a'].ix['c'] 
```

因为`group1`和`group2`是索引。请原谅我之前的尝试！

要仅获得第二个索引，我认为您必须交换索引：

```
df.swaplevel(0,1).ix['c'] 
```

但我敢肯定，如果我错了，韦斯会纠正我的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-20T09:02:01.477

在 Python 0.19.0 中，有一种新的建议方法，此处解释[1](http://pandas.pydata.org/pandas-docs/stable/advanced.html#advanced-indexing-with-hierarchical-index)。我相信他们给出的最清晰的例子如下，他们从一个四级索引中分割出来。这就是数据框的制作方式：

```
In [46]: def mklbl(prefix,n):
   ....:     return ["%s%s" % (prefix,i)  for i in range(n)]
   ....: 

In [47]: miindex = pd.MultiIndex.from_product([mklbl('A',4),
   ....:                                       mklbl('B',2),
   ....:                                       mklbl('C',4),
   ....:                                       mklbl('D',2)])
   ....: 

In [48]: micolumns = pd.MultiIndex.from_tuples([('a','foo'),('a','bar'),
   ....:                                        ('b','foo'),('b','bah')],
   ....:                                       names=['lvl0', 'lvl1'])
   ....: 

In [49]: dfmi = pd.DataFrame(np.arange(len(miindex)*len(micolumns)).reshape((len(miindex),len(micolumns))),
   ....:                     index=miindex,
   ....:                     columns=micolumns).sort_index().sort_index(axis=1)
   ....: 

In [50]: dfmi
Out[50]: 
lvl0           a         b     
lvl1         bar  foo  bah  foo
A0 B0 C0 D0    1    0    3    2
         D1    5    4    7    6
      C1 D0    9    8   11   10
         D1   13   12   15   14
      C2 D0   17   16   19   18
         D1   21   20   23   22
      C3 D0   25   24   27   26
...          ...  ...  ...  ...
A3 B1 C0 D1  229  228  231  230
      C1 D0  233  232  235  234
         D1  237  236  239  238
      C2 D0  241  240  243  242
         D1  245  244  247  246
      C3 D0  249  248  251  250
         D1  253  252  255  254 
```

这就是他们选择不同行的方式：

```
In [51]: dfmi.loc[(slice('A1','A3'),slice(None), ['C1','C3']),:]
Out[51]: 
lvl0           a         b     
lvl1         bar  foo  bah  foo
A1 B0 C1 D0   73   72   75   74
         D1   77   76   79   78
      C3 D0   89   88   91   90
         D1   93   92   95   94
   B1 C1 D0  105  104  107  106
         D1  109  108  111  110
      C3 D0  121  120  123  122
...          ...  ...  ...  ...
A3 B0 C1 D1  205  204  207  206
      C3 D0  217  216  219  218
         D1  221  220  223  222
   B1 C1 D0  233  232  235  234
         D1  237  236  239  238
      C3 D0  249  248  251  250
         D1  253  252  255  254 
```

所以很简单，在 中`df.loc[(indices),:]`，您指定要选择的每个级别的索引，从最高级别到最低级别。如果您不想选择最低级别的索引，则可以省略指定它们。如果您不想在其他指定级别之间进行切片，请添加`slice(None)`. 示例中显示了这两种情况，其中省略了 D 级，在 A 和 C 之间指定了 B 级。

# image - 如何避免在 Coldfusion 中调整大小的图像模糊？

> ID：11941494
> 
> 赞同：0
> 
> 时间：2012-08-13T20:07:17.163
> 
> 标签：image, coldfusion, resize, cfimage

我正在调整大小并使用`Coldfusion8`. 但是，所有图像，无论大小都是模糊的，我不知道如何将其关闭。

这就是我正在做的事情：

```
<cfimage action="read" source="#variables.basePath#" name="base">
<cfscript>
    variables.height = 127;
    variables.width = "";
    ImageScaleToFit(base, variables.width, variables.height);
    variables.offset = ImageGetWidth( base ) - 100;
    if ( variables.offset GT 0 )
    {
        imageCrop( base, variables.offset/2, 0, 100, 127 );
    }
    variables.filekey = "s_" & img_paths.bilddateiname;
    variables.filename = variables.tempDirectory & variables.keyName;
    imageWrite( base, variables.filename, ".99" );
 </cfscript> 
```

知道我做错了什么吗？无论我转换为 800x1110px 还是上述 100x127，图像都会模糊。基础图片很清晰，所以它一定是我在调整大小时正在做的事情。

感谢您的投入！

**编辑：** 原始图像：

![在此处输入图像描述](../Images/3087245c9b7c0f484e18bffaed9774fa.png)

调整大小的图像：

![在此处输入图像描述](../Images/8b75f1a46ccebf4c9cfbb1d691fc70e1.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T21:36:56.273

使用 CF9.0.2

使用您的源 jpeg、您的代码并将输出硬编码为`y.jpg`：

![8KB](../Images/4de8b75b5edaf291dd4d04fb81944615.png)

怎么了？这不是你所期望的吗？

# mysql - 在 SQL 中快速查询链式数据的序列

> ID：11941496
> 
> 赞同：0
> 
> 时间：2012-08-13T20:07:20.583
> 
> 标签：mysql, sql, optimization, inner-join, sequence

问题：
给定的是具有以下结构的表：

```
Table:  ID, ID_POINTER, DATA 
```

我想在这个表中查询一个链式数据序列。
如何以最快的速度查询以下“慢”查询：

```
SELECT * FROM Table 1, ...., Table n WHERE
Table 1.ID = TABLE 2.ID_POINTER and .........  and TABLE n-1.ID = Table n.ID_POINTER
and Table 1.DATA = wish data 1  AND .......... AND Table n.DATA = wish data n 
```

?

我的问题：
替换`Table , Table`为有效`Table INNER JOIN Table`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T10:37:41.190

我认为你需要像这样[的 SQLFIDDLE](http://sqlfiddle.com/#!2/a2d6d/3)

```
SELECT ID ,@pv:=ID_POINTER AS IDP, DATA FROM test
JOIN
(SELECT @pv:=1)tmp
WHERE ID=@pv

CREATE TABLE IF NOT EXISTS `test` (
  `ID` int(8) unsigned NOT NULL ,
  `ID_POINTER` int(8) unsigned NOT NULL,
  `DATA` varchar(128)  NOT NULL
) ENGINE=InnoDB  DEFAULT CHARSET=latin1  ;

INSERT INTO `test` VALUES(1,2,"data1"),
(2,3,"data2"),
(3,4,"data3"),
(4,5,"data4"),
(5,11,"data5"),
(8,9,"data6"),
(9,10,"data7"); 
```

结果：对于 id = 1（在查询中检索 id 1 集**@pv:=1**的链式数据）

```
ID  IDP DATA
1   2   data1
2   3   data2
3   4   data3
4   5   data4
5   11  data5 
```

对于 id = 8（在查询中检索 id 8 集**@pv:=8**的链式数据）

```
SELECT ID ,@pv:=ID_POINTER AS IDP, DATA FROM test
JOIN
(SELECT @pv:=8)tmp
WHERE ID=@pv 
```

结果：

```
ID  IDP DATA
8   9   data6
9   10  data7 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T20:18:38.373

首先，重写查询以使用正确的连接语法。“，”表示“交叉连接”，是一项非常昂贵的操作（或者，有时更糟糕的是，如果其中一个表为空，可能会导致没有行）。

使用“，”时，在 where 子句中很容易出错，从而导致性能下降。

其次，查询优化器应该选择最佳连接路径。但是，要做到这一点，需要更新表的统计信息。因此，请确保您已更新统计信息（这因数据库而异）。

第三，您应该始终提及正在使用的数据库，尤其是在优化方面。

最后，通过在连接列上设置索引，此类查询通常（但并非总是）更快。当您有一个选择所有行的一小部分的过滤器时尤其如此。

# java - 在morphia中嵌入带有@Id的对象

> ID：11941498
> 
> 赞同：0
> 
> 时间：2012-08-13T20:07:28.020
> 
> 标签：java, mongodb, morphia

我们正在向我们的应用程序添加修订历史记录，并且在将归档文档嵌入我们的历史记录对象时遇到了一些问题。我们的状态是这样的：

```
@ToString
@EqualsAndHashCode
@Entity("bookOrder")
@Converters({DateTimeConverter.class, LocalDateConverter.class})
public class BookOrderState {
    @Id
    @Getter
    private Long id;

    @Indexed
    @Getter
    private final BookOrderStatus status;

    @Getter private Long version;
... 
```

我们的历史对象看起来像：

```
@ToString
@Entity("bookOrderHistory")
@Converters(DateTimeConverter.class)
public class BookOrderStateHistory {

    @Id
    @Getter
    private String id;

    @Getter
    private DateTime createdDate;

    @Getter
    private BookOrderState bookOrder;
... 
```

当我们更新一个订单时，我们从数据库中获取它的当前状态，将它包装在一个历史对象中，该对象获取它自己的 id 和时间戳，并将新`bookOrderStateHistory`的和更新的都保存`bookOrderState`到数据库中。此过程正确写入，但在检索时，我们最终会得到多个具有相同`bookOrderState`. 我们将其追溯到`@Id`BookOrderState 上。由于许多历史对象将具有相同的状态对象`_id`（但对象的实际状态有所不同），吗啡似乎假设它们都应该获得相同的状态对象。我们已经一起破解了一种方法来拦截嵌入的状态对象并将其切换`_id`到仅`id`在写入时（以及在读取时相反的方式），但这感觉是错误的。

**Tl; 博士：**有没有一种简单的方法可以防止 morphia`id -> _id`在另一个文档中时对对象进行操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T02:28:29.410

我正在使用 Morphia 做几乎完全相同的事情，并且没有遇到任何问题。我在上面的代码中没有看到它，但如果“bookOrder”属性用@Reference 注释，那么你会看到你描述的行为。如果你不放@Reference，Morphia 似乎默认为@Embedded，所以你应该没问题。
我有一个名为“Snapshot”的简单类，用于存储对象的历史记录：

```
@Entity("snapshots")
public class Snapshot<T>
{
  @Id
  protected ObjectId id;

  @Embedded
  protected T data;
} 
```

每当对象更改时，我都会创建它的快照并将快照保存到数据库中。使用以下简单的测试用例，我似乎得到了正确的行为：

```
Point pt = new Point();
pt.setLatitude( 40.0 );
pt.setLongitude( 40.0 );

ds.save( pt ); //ds is Datastore

Snapshot<Point> ts1 = new Snapshot<Point>();
ts1.setData( pt );
ds.save( ts1 );

pt.setLatitude( 50.0 );
ds.save( pt );

pt = ds.get( Point.class, pt.getId() );

Snapshot<Point> ts2 = new Snapshot<Point>();
ts2.setData( pt );

ds.save( ts2 );

ts1 = ds.get( Snapshot.class, ts1.getId() );
ts2 = ds.get( Snapshot.class, ts2.getId() );

Assert.assertEquals( 40.0, ts1.getData().getLatitude() );
Assert.assertEquals( 50.0, ts2.getData().getLatitude() );

Assert.assertEquals( 40.0, ts1.getData().getLongitude() );
Assert.assertEquals( 40.0, ts2.getData().getLongitude() ); 
```

两个快照中的点具有与原始点对象相同的 ObjectId，但“ts2”中的点的纬度为 50.0，而“ts1”中的点的纬度为 40.0。ObjectId 值在对象插入数据库时​​分配并且永远不会更改（http://www.mongodb.org/display/DOCS/Object+IDs）。

抱歉，我不确定你的问题到底是什么，但想让你知道我正在做一些非常相似的事情，而且它似乎正在工作。也许尝试将 @Embedded 注释添加到 BookOrderStateHistory 中的“bookOrder”？

祝你好运！

# spring - 用Java开启bean注解处理

> ID：11941503
> 
> 赞同：0
> 
> 时间：2012-08-13T20:07:52.360
> 
> 标签：spring

什么是 Java 等价于以下 Spring bean XML 配置语句？

```
<context:annotation-config/> 
```

我正在寻找打开注释处理的上下文的 API 调用。

# java - 番石榴比较链与列表？

> ID：11941506
> 
> 赞同：5
> 
> 时间：2012-08-13T20:07:58.140
> 
> 标签：java, guava

我正在尝试使用 ComparisonChain 在类中实现 compareTo() 但是该类包含一个 List 并且 compare() 不接受它们，因为 List 没有实现 Comparable。关于如何使这项工作的任何想法？

代码子集如下所示：

```
public class User() {
  String name;
  List<String> emails;

  ...

  public int compareTo(User that) {
    return ComparisonChain().start()
                            .compare(this.name, that.name)
                            .compare(this.emails, that.emails)  // Fails on this line
                            .result();
  }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-13T20:39:26.657

```
ComparisonChain.start()
    .compare(this.name, that.name)
    .compare(this.emails, that.emails,
       Ordering.<String>natural().lexicographical())
    .result(); 
```

# c# - 在异步套接字客户端中处理消息的最佳设计

> ID：11941507
> 
> 赞同：1
> 
> 时间：2012-08-13T20:08:02.417
> 
> 标签：c#, sockets, asynchronous

我正在尝试编写一个异步套接字客户端，它具有来自服务器的连续馈送。客户端需要获取数据，然后将其显示在 GUI 上。它还需要一种处理用户消息的方法，例如按钮点击。

实现这一点的最佳方法是什么？

1.  定时器事件触发时使用定时器并调用读取函数？
2.  使用 while(true) 循环读取数据并在读取函数中的某个位置产生以允许消息处理？但是我认为我无法控制 C# 中的读取线程进程。
3.  还有什么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:14:06.947

[SignalR](https://github.com/SignalR/SignalR)似乎是一个值得考虑的好工具，它允许客户端和服务器（不仅仅是基于 Web 的客户端）之间的异步通信。

# java - 在点击列表器上访问按钮内的类 MapView

> ID：11941510
> 
> 赞同：3
> 
> 时间：2012-08-13T20:08:12.717
> 
> 标签：java, android, android-mapview

我无法在我的按钮 onclick 列表器中获取地图视图（m）来切换视图。任何人都可以帮助我。

```
MapView mapView = (MapView)findViewById(R.id.mapview);
mapView.setBuiltInZoomControls(true);
mc = getController();
mc.animateTo(p);
mc.setZoom(10);

Button btn=(Button)findViewById(R.id.button1);

btn.setOnClickListener(new OnClickListener(){
  @Override
  public void onClick(View v) {
     if (mapView.isSatellite()) 
     {   
        mapView.setSatellite(false);
        mapView.setStreetView(true);
     } else 
     {
        mapView.setSatellite(true);
        mapView.setStreetView(false); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:12:14.963

在您的 Activity/Fragment 中，为您的 MapView 创建一个类成员变量：

```
private MapView m; 
```

在您的 onCreate() 方法中，将此变量分配给 MapView 的视图：

```
 public void onCreate (Bundle savedInstanceState)
    {

     m = (MapView)findViewById(R.id.mapView);   // the @id setting in your layout of your MapView

    .
    .
    .
    } 
```

然后你可以在你的按钮 onClick 处理程序中使用 m

# jar - $PATH/repository/components/lib/ 中的依赖 wso2 应用程序

> ID：11941511
> 
> 赞同：1
> 
> 时间：2012-08-13T20:08:14.303
> 
> 标签：jar, dependencies, wso2

我将一个jar粘贴到repository/components/lib/中作为依赖，但是wso2app在访问服务时没有找到它，它抛出了异常：

```
java.lang.ClassNotFoundException: Class Not found : br.org.test.MyClassTest 
```

我怎样才能解决这个问题？我应该把依赖的罐子放在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:56:12.530

尝试将jar文件放在`$CARBON_HOME/repository/components/extensions`目录中，添加库后不要忘记重新启动服务器。

**来源：** [如何将外部 Jar 库添加到 WSO2 碳基产品中。](http://wso2.org/library/knowledgebase/add-external-jar-libraries-wso2-carbon-based-products "如何将外部 Jar 库添加到基于 WSO2 碳的产品中。")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-30T15:53:12.317

经过长时间的研究，我终于能够通过将我的依赖项放在 /lib/runtimes/ext 中来解决这个问题。

遵循本文档。[https://docs.wso2.com/display/AS530/Configuring+Runtime+Environment](https://docs.wso2.com/display/AS530/Configuring+Runtime+Environment)

# apache2 - 启用时如何配置 vhost 以读取系统路径

> ID：11941512
> 
> 赞同：0
> 
> 时间：2012-08-13T20:08:14.740
> 
> 标签：apache2, config, virtualhost, vhosts

我正在尝试设置一个虚拟主机以允许公共目录下的特定文件系统路径。

当前配置：

```
<VirtualHost *:80>
    ServerName   mysite.com
    DocumentRoot "..etc/www/mysite.com/public_html"
</VirtualHost> 
```

我想在“../etc/www/mysite.com/library”中包含路径“../etc/bin/zend/library”我不确定是否需要将documentroot更改为public_html并参考public_html 的所有公共流量，或者我是否可以使用 mod_rewrite 或目录来包含系统目录。该目录也应该只运行/读取；没有写权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:57:35.273

也许这不是 apache 问题...您应该创建一个符号链接：

```
cd .etc/www/mysite.com/
ln -s ../etc/bin/zend/library library 
```

它应该工作。

问候

咪咪兹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:39:06.580

尝试使用`Alias`：

```
<VirtualHost *:80>
    ServerName   mysite.com
    DocumentRoot "..etc/www/mysite.com/public_html"
    Alias /library ../etc/bin/zend/library
</VirtualHost> 
```

所以如果你去`http://mysite.com/library`，它将提供来自的内容`../etc/bin/zend/library`

# ruby-on-rails-3 - 任何用于在服务器和移动设备之间同步数据的 gem 或插件？

> ID：11941514
> 
> 赞同：0
> 
> 时间：2012-08-13T20:08:16.907
> 
> 标签：ruby-on-rails-3

我想确保移动和服务器使用相同的数据。我使用 uuid 来确保每个条目都是唯一的，但我想知道是否有 gem 可以帮助合并数据。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:05:18.510

这是一个老问题，但我只想指出，在 Rails 的开发和生产之间同步数据库和文件有两个宝石：

卡尔的[数据同步](https://github.com/carr/data_sync)

和

Infinum 的[数据同步](https://github.com/infinum/data_sync)

第二个可以与 一起使用`gem 'data_sync'`，第一个需要作为插件安装。

# objective-c - 使用新服务项更新 OSX 右键单击 上下文菜单

> ID：11941516
> 
> 赞同：6
> 
> 时间：2012-08-13T20:08:30.807
> 
> 标签：objective-c, macos, cocoa

我创建了一个应用程序，通过在我的应用程序 info.plist 中添加一个 NSService 条目来为某些文件公开 OSX 服务（如[http://www.macosxautomation.com/services/learn/](http://www.macosxautomation.com/services/learn/)），但我发现在安装我的新机器上的应用程序该服务不会在查找器右键单击上下文菜单中快速显示。

我知道这是因为粘贴板服务没有重新索引 /Applications 文件夹并“发现”新安装的服务。

我也知道我可以通过手动运行 /System/Library/CoreServices/pbs 来强制重新索引和发现。

这里的问题是，对于第一次安装我的应用程序的用户来说，确保我的服务尽快出现的最佳方式是什么。

我可以在我的应用程序启动时对“/System/Library/CoreServices/pbs”执行系统调用——如果用户立即启动我的应用程序——但这只能部分解决问题（此外我想知道是否有更好的基于 Cocoa API 的方法）。

如果我的应用程序通常只能通过上下文菜单访问，那么用户一开始就不会想到出去启动应用程序。当上下文菜单不存在时，他们只会认为它已损坏。

我没有使用安装程序分发我的应用程序。我只是提供一个可以拖放到 /Applications 的捆绑包（我相信苹果通常会建议这样做）。

以这种方式进行安装时，有没有办法加快服务发现的过程，这样用户就没有任何时间没有新安装的服务？

附带说明一下，该问题似乎在 10.8 中可能不存在（或至少不那么明显）。Apple 可能在其最新版本中更快地实现了这种索引。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T23:10:05.227

我实际上最终使用了

```
system("killall pbs;/System/Library/CoreServices/pbs -flush"); 
```

正如您所描述的，在我的一个应用程序中，尽管这是很久以前的事了，当时 10.5 也是有问题的。

但是，您可能想尝试此功能：

```
void NSUpdateDynamicServices(void) 
```

根据文档，它的作用就像冲洗 pbs，但它是一种更清洁的解决方案。

此外，如果（根据您的描述）该应用程序只不过是一项服务，请考虑使其成为一项真正的服务 - 请参阅[（安装服务）](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/SysServices/Articles/providing.html)

```
To build a standalone service, use the extension .service and store it in Library/Services. 
```

# iphone - 无法在设备上测试 iOS 应用内购买，只有模拟器

> ID：11941520
> 
> 赞同：3
> 
> 时间：2012-08-13T20:08:51.187
> 
> 标签：iphone, ios, xcode, in-app-purchase

当我检索应用内购买的详细信息时，它们在 iPhone 模拟器上显示良好，但模拟器不允许我完成测试购买。然后我从 iOS 设备（用 4.x 和 5.x 测试）尝试它，它不显示任何应用内购买数据

我知道代码很好，因为模拟器可以正常工作（直到购买）并且当应用程序提交并获得批准时，但这反过来使应用程序内测试对我来说非常棘手......

**如何在我的设备上测试应用内购买？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:41:34.613

首先要检查并且这是经典的，是查看您是否使用不是测试用户的另一个帐户登录。检查设备的设置。

另一件事是，我在使用 3 个不同的设备之前遇到过 3 次这个问题：文件系统损坏。唯一对我有用的解决方案是将设备重置为出厂固件。这是在 iTunes 中完成的。它将擦除您的设备并使用当前 iOS 版本重新安装固件。准备好至少 50 分钟的快乐和愤怒，同时等待所有东西都被擦除和重新安装。

不要忘记先备份，如果出现问题不要怪我......

# c# - 创建动态 linq 查询

> ID：11941525
> 
> 赞同：0
> 
> 时间：2012-08-13T20:09:09.880
> 
> 标签：c#, .net

我有一个[EventLogEntry](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlogentry.aspx)对象：

```
EventLog aLog = new EventLog("Application");
IEnumerable<EventLogEntry> logentry=aLog.Entries.Cast<EventLogEntry>(); 
```

现在我正在尝试`logentry`通过它的[InstanceId](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlogentry.instanceid.aspx)创建一个动态 linq 查询。我可以运行这个：

```
int id=123;
IEnumerable<EventLogEntry> filteredByEventId = logentry.Where((x) => x.InstanceId == id); 
```

但我正在尝试在运行时创建 linq 术语。像这样的东西：

```
int id=123;
int id2=456;
IEnumerable<EventLogEntry> filteredByEventId = logentry.Where((x) => x.InstanceId == id || x.InstanceId == id2); 
```

虽然我知道还有“id2”也可以在运行时添加该术语。

**更新：** 我的主要目标是用户可以询问 InstanceId 范围，如 123、456-789、1000-1005，我需要创建正确的查询（动态），它将向他显示所有事件，其 InstanceId 为 123，介于 456-789 之间（和 1000-1005）

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:12:20.940

为什么不将 Linq*包含*与列表/数组一起使用？

```
var ids = new List<int>();
ids.Add(123);
ids.Add(456);
// etc...

IEnumerable<EventLogEntry> filteredByEventId = logentrey.Where((x) => ids.Contains(x.InstanceId)); 
```

**编辑**

要应用多个范围，您可以使用最小/最大元组的集合，然后使用 Linq *All*方法按每个范围进行过滤：

```
// setup ranges
var ranges = new List<Tuple<int, int>>();
ranges.Add(new Tuple<int,int>(123,123));
ranges.Add(new Tuple<int,int>(456,789));
ranges.Add(new Tuple<int,int>(1000,1005));

// apply filter
var filteredByEventId = logentry.Where(x => 
    ranges.All(range => x >= range.Item1 && x <= range.Item2)
); 
```

# c# - CompiledQuery 抛出 ArgumentException

> ID：11941531
> 
> 赞同：5
> 
> 时间：2012-08-13T20:09:41.673
> 
> 标签：c#, .net, linq-to-sql, compiled-query

我试图在扩展方法中使用一个非常简单的预编译查询来使用 LINQ to SQL 检索数据。SytelineRepository 是我使用外部映射文件的自定义 DataContext，我正在查询 JobOrders 表。我已经使用自定义 DataContext 很长时间没有问题，并且执行相同的查询也没有问题；我只是想提高性能。但是，当我尝试使用 CompiledQuery.Compile 时，我得到下面的 ArgumentException。

这是代码：

```
public static class Queries
{
    public static readonly Func<SytelineRepository, String, IQueryable<JobOrder>> GetOpenJobOrdersForItemQuery =
        CompiledQuery.Compile(
        (SytelineRepository r, String itemNumber) => 
            from job in r.JobOrders
            where job.ItemNumber == itemNumber
            select job
        );

    public static IQueryable<JobOrder> GetOpenJobOrdersForItem(this SytelineRepository r, System.String itemNumber)
    {
        return GetOpenJobOrdersForItemQuery(r, itemNumber);
    }

} 
```

作为对比，这有效：

```
 public static IEnumerable<JobOrder> GetOpenJobOrdersForItem(this SytelineRepository r, System.String itemNumber)
    {
        return GetOpenJobOrdersForItemUncompiledQuery(r, itemNumber);
    }

    public static IQueryable<JobOrder> GetOpenJobOrdersForItemUncompiledQuery(SytelineRepository r, String itemNumber)
    {
        return
            from job in r.JobOrders
            where job.ItemNumber == itemNumber
            select job;
    } 
```

这是完整的错误：

> System.ArgumentException 未处理
> 
> Message=Property 'System.String ItemNumber' 没有为类型 'System.Linq.IQueryable`1[Mpicorp.SytelineDataModel.JobOrder]' 定义

```
 at System.Linq.Expressions.Expression.Property(Expression expression, PropertyInfo property)
   at System.Data.Linq.SqlClient.SqlBinder.Visitor.AccessMember(SqlMember m, SqlExpression expo)
   at System.Data.Linq.SqlClient.SqlVisitor.Visit(SqlNode node)
   at System.Data.Linq.SqlClient.SqlBinder.Visitor.VisitExpression(SqlExpression expr)
   at System.Data.Linq.SqlClient.SqlBinder.Visitor.VisitBinaryOperator(SqlBinary bo)
   at System.Data.Linq.SqlClient.SqlVisitor.Visit(SqlNode node)
   at System.Data.Linq.SqlClient.SqlBinder.Visitor.VisitExpression(SqlExpression expr)
   at System.Data.Linq.SqlClient.SqlBinder.Visitor.VisitSelect(SqlSelect select)
   at System.Data.Linq.SqlClient.SqlVisitor.Visit(SqlNode node)
   at System.Data.Linq.SqlClient.SqlBinder.Visitor.VisitIncludeScope(SqlIncludeScope scope)
   at System.Data.Linq.SqlClient.SqlVisitor.Visit(SqlNode node)
   at System.Data.Linq.SqlClient.SqlBinder.Bind(SqlNode node)
   at System.Data.Linq.SqlClient.SqlProvider.BuildQuery(ResultShape resultShape, Type resultType, SqlNode node, ReadOnlyCollection`1 parentParameters, SqlNodeAnnotations annotations)
   at System.Data.Linq.SqlClient.SqlProvider.BuildQuery(Expression query, SqlNodeAnnotations annotations)
   at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Compile(Expression query)
   at System.Data.Linq.CompiledQuery.ExecuteQuery(DataContext context, Object[] args)
   at System.Data.Linq.CompiledQuery.Invoke[TArg0,TArg1,TResult](TArg0 arg0, TArg1 arg1)
   at Mpicorp.SytelineDataModel.Queries.GetOpenJobOrdersForItem(SytelineRepository r, String itemNumber) in C:\SVN\Mpicorp.SytelineDataModel\trunk\SytelineDataModel\Queries.cs:line 21
   at Mpicorp.SytelineDataModel.SytelineRepository.GetTimePhasedInventory(String itemNumber, Boolean includeForecast) in C:\SVN\Mpicorp.SytelineDataModel\trunk\SytelineDataModel\SytelineRepository.cs:line 242
   at RepriceWorkbench.TimePhasedInventoryForm..ctor(SytelineRepository repository, String itemNumber) in C:\SVN\spirepriceutility\trunk\src\POWorkbench\TimePhasedInventoryForm.cs:line 32
   at RepriceWorkbench.TimePhasedMenuForm.goBtn_Click(Object sender, EventArgs e) in C:\SVN\spirepriceutility\trunk\src\POWorkbench\TimePhasedMenuForm.cs:line 25
   at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ButtonBase.WndProc(Message& m)
   at System.Windows.Forms.Button.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
   at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
   at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
   at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
   at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
   at RepriceWorkbench.Program.Main() in C:\SVN\spirepriceutility\trunk\src\POWorkbench\Program.cs:line 66
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:07:51.123

The comment from usr led me to review the definition underlying the code I posted, and that's where I stumbled across the long-forgotten fact that my table stores several different objects and I was differentiating between them using the repository's accessors, like this:

```
 public IQueryable<JobOrder> JobOrders
    {
        get { return GetTable<JobOrder>().Where(j => j.JobType == 'J'); }
    } 
```

Changing the method to use GetTable<>(), as in the following fixed the issue.

```
 public static readonly Func<SytelineRepository, String, IEnumerable<JobOrder>> GetOpenJobOrdersForItemQuery =
        CompiledQuery.Compile(
        (SytelineRepository r, String itemNumber) =>
            from job in r.GetTable<JobOrder>()
            where job.ItemNumber == itemNumber && job.JobType == 'J' && (job.Status == "F" || job.Status == "R")
            select job
        ); 
```

# ios - 如何定义水平线的起点终点

> ID：11941532
> 
> 赞同：0
> 
> 时间：2012-08-13T20:09:45.130
> 
> 标签：ios

我想在 loc 550 处绘制一条带有渐变的水平线。

```
CGFloat colors[6] = { 
    138.0f / 255.0f, 1.0f,
    162.0f / 255.0f, 1.0f,
    206.0f / 255.0f, 1.0f};
CGFloat locations[3] = { 0.05f, 0.45f, 0.95f };
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceGray();
CGGradientRef gradient = CGGradientCreateWithColorComponents(colorSpace, colors, locations, 3);
CGColorSpaceRelease(colorSpace);

CGPoint startPoint = CGPointMake(0, 0);
CGPoint endPoint   = CGPointMake(0, 550);

 CGContextRef context = UIGraphicsGetCurrentContext(); 
 CGContextSaveGState(context);
 CGContextAddRect(context, CGRectMake(0, 550, self.view.bounds.size.width, 1));
 CGContextClip(context);

CGContextDrawLinearGradient (context, gradient, startPoint, endPoint, 0);
CGContextRestoreGState(context); 
```

这段代码中没有画线，Xcode 给了我这个错误：

```
 CGContextAddRect: invalid context 0x0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:38:30.857

您需要将此代码放在对象的`drawRect:`方法中`UIView`以确保`context`存在电流。否则你需要使用`UIGraphicsPushContext`来获取当前的`context`.

从[文档](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIKitFunctionReference/Reference/reference.html)中`UIGraphicsGetCurrentContext()`：

> 当前图形上下文默认为 nil。在调用它的 drawRect: 方法之前，视图对象将一个有效的上下文压入堆栈，使其成为当前的。但是，如果您不使用 UIView 对象进行绘图，则必须使用 UIGraphicsPushContext 函数手动将有效上下文推送到堆栈上。
> 
> 您应该只从应用程序的主线程调用此函数。

# c++ - C ++如何使用此sqlite语句执行返回行数

> ID：11941533
> 
> 赞同：0
> 
> 时间：2012-08-13T20:09:45.143
> 
> 标签：c++, sqlite

我想从 abe_account 执行 select count(*)；并将返回结果赋值给 int 计数器；

但是如果我已经执行了下面的 sql 语句，我该如何执行。

我不确定在哪里插入以添加另一个 sql 命令并获取结果并将其重新转换为 int 计数器；

```
 sqlite3 *db;
   sqlite3_stmt * stmt;
   std::vector< std::vector < std:: string > > result;

   for( int i = 0; i < 4; i++ )
        result.push_back(std::vector< std::string >());

   if (sqlite3_open("abeserver.db", &db) == SQLITE_OK)
   {
       sqlite3_prepare( db, "SELECT * from abe_account;", -1, &stmt, NULL );//preparing the statement
       sqlite3_step( stmt );//executing the statement

       while( sqlite3_column_text( stmt, 0 ) )
       {
           for( int i = 0; i < 4; i++ )
               result[i].push_back( std::string( (char *)sqlite3_column_text( stmt, i ) ) );

           sqlite3_step( stmt );
       }
   } 
```

# jquery - jQuery ui - 克隆的代码不响应排序

> ID：11941536
> 
> 赞同：2
> 
> 时间：2012-08-13T20:09:57.843
> 
> 标签：jquery, jquery-ui, sorting

我正在处理一个页面，该页面需要从 DOM 中添加、删除和排序常量 HTML 元素。我有一个隐藏的 DIV，其中包含我使用 clone() 的所有代码块，并将其附加到 DOM。sortable() 适用于 DOM 中已经存在的列表项，但不适用于 DOM 加载完成后注入的 DOM 列表项。我有以下列表，出于示例目的进行了简化：

```
<ul class="sprite-list">
    <li>
        <a href="#">
            <img src="icon.png">
        </a>
    </li>
    <li>
        <a href="#">
            <img src="icon.png">
        </a>
    </li>
    <li class="sprite-add">
        <a href="#">Add</a>
    </li>
</ul> 
```

我使用以下 jQuery 代码：

```
$('ul.sprite-list').sortable({
    items: 'li:not(.sprite-add)',
    containment: 'parent',
    opacity: 0.7
}).disableSelection(); 
```

将该列表硬编码在页面中，效果很好。但是在我将同一个列表克隆到 DOM 之后，我似乎无法拖放它们。

我已经阅读并看到了 sortable() 的[工作示例。](http://jsfiddle.net/dhoerster/VxYmw/1/)我还看到人们推荐使用[.sortable('refresh')](http://jqueryui.com/demos/sortable/#method-refresh)。所以我尝试了

```
$('ul.sprite-list').sortable('refresh'); 
```

或者

```
$.fn.sortable('refresh'); 
```

但都没有成功。我在这里想念什么？

**编辑**：我注意到在注入克隆代码后，列表确实具有所有可排序列表都获得的类*ui-sortable*。

**编辑 2**：我不知道它是否相关，但我使用单独的函数来获取克隆的元素：

```
function cloneElement(element){
    var container = $('#sprite-clone');

    if(element == 'generationContainer'){
        return container.find('.sprite-generation-container').clone(true);
    }
    else if(element == 'groupContainer'){
        return container.find('.sprite-group-container').clone(true);
    }
    else if(element == 'sprite'){
        return container.find('>li:first').clone(true);
    }
    else if(element == 'customForm'){
        return container.find('.customForm').clone(true);
    }
} 
```

然后在需要时使用 var generationContainer = cloneElement('generationContainer'); 我不确定这是否会影响任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:41:40.310

好吧，工作示例代码不会克隆，而是添加新内容，所以它是另一回事。

由于我看不到其余的代码，所以我只是在理论上。可以通过调用 sortable 来完成修复。因此，如果您将可排序代码放在函数中，请在文档准备好时调用它，然后在添加元素时再次调用。

**示例：http: [//jsfiddle.net/BWkFp/](http://jsfiddle.net/BWkFp/)**

**HTML**

```
<ul class="sprite-list">
    <li>
        test 1
    </li>
    <li>
        test 2
    </li>
    <li>
        test 3
    </li>
    <li class="sprite-add">
        <a href="#">Add</a>
    </li>
</ul> 
```

**JS**

```
MakeUlSortable = function () {
    $('ul.sprite-list').sortable({
        items: 'li:not(.sprite-add)',
        opacity: 0.7
    }).disableSelection();
};

$(document).ready(function () {
    MakeUlSortable();
});

$('.sprite-add a').click(function () {
    $(this).before($('.sprite-list li:first-child').clone());
    MakeUlSortable();
    return false;
}); 
```

希望你明白我的意思。这段代码对我很有效:)

# ruby-on-rails-3 - 定义自己的设计控制器会阻止设计使用自定义视图

> ID：11941543
> 
> 赞同：2
> 
> 时间：2012-08-13T20:10:18.093
> 
> 标签：ruby-on-rails-3, view, controller, devise, routes

我曾经让 Devise 使用我自己的视图，而不是我的两个角色（管理员和订阅者）的默认视图`config.scoped_views = true`。`initializers/devise.rb`这很好，我继续定制我的观点。

然后今天早些时候，我添加了我自己的控制器，这些控制器是 Devise 控制器的子类，并告诉 devise 在使用时使用这些控制器`routes.rb`：

```
 devise_for :subscribers, :controllers => { 
    :registrations => "subscriber_registrations",
    :sessions => "subscriber_sessions",
    :passwords => "subscriber_sessions"
  } 
```

这很好用，但是它似乎产生了不想要的副作用，即让 Devise 恢复为我的订阅者角色使用其默认视图。

在我的日志中，当我加载订阅者的登录页面时，我可以看到：

```
 Rendered /Users/myName/.rvm/gems/ruby-1.9.3-p0/gems/devise-2.1.0/app/views/devise/sessions/new.html.erb 
```

难道我做错了什么？我现在是否需要手动添加所有视图渲染，因为我已经定义了自己的控制器？

# iphone - 为 CGContextRef 设置颜色

> ID：11941544
> 
> 赞同：3
> 
> 时间：2012-08-13T20:10:20.777
> 
> 标签：iphone, objective-c, core-graphics

我只是想知道如何知道在方法中根本没有提到何时`setStroke`设置笔划？`context``context``setStroke`

```
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSetLineWidth(context, 10);
[[UIColor colorWithRed:0.6 green:0.6 blue:0.6 alpha:1.0] setStroke]; 
```

顺便说一句，您多久以编程方式绘制自己的对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T20:33:14.040

这是`setStroke`您的颜色的实现：

```
- (void)setStroke {
    CGContextSetStrokeColorWithColor(UIGraphicsGetCurrentContext(), self.CGColor);
} 
```

它使用相同的函数来获取您正在使用的上下文。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T20:23:29.397

您检索上下文以设置线宽的方式与颜色设置笔触的方式相同。原因是因为 . 检索到的主线程只有一个当前图形上下文[`UIGraphicsGetCurrentContext()`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html)。您可以推送和弹出不同的上下文，但该函数将始终返回当前上下文。请记住，在 iOS 中，此函数不是线程安全的，只能从主线程调用。

# sql - SQL语句——如何构建时间线图

> ID：11941545
> 
> 赞同：3
> 
> 时间：2012-08-13T20:10:33.030
> 
> 标签：sql

嗨，我有一个包含以下列的表格：

*   ID
*   学生卡
*   分数（整数）
*   扫描日期
*   关闭日期。

每周运行一个脚本。它每周为每个学生收集一个分数。每周分数保持不变。第一次运行脚本时，它会为每个学生输入 ID、Student_id、score、scanned_date 和 Null for Close_date。

对于每个额外的扫描，如果分数与上周的分数相同，则脚本不执行任何操作。但如果找到新分数，则在 close_date 字段中输入日期并输入包含 id、student_id、score、scanned_date 和 Null 的新行作为结束日期。

我正在尝试构建一个 sql 语句，它将帮助我构建一个时间线图。对于每个不同的扫描日期，它将返回每个学生所有分数的总和，以便我可以构建一个图表。

那有可能吗？

-玛丽亚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T20:15:56.190

以下查询提取所有不同的扫描日期，并将它们连接回表以查找每个日期的活动记录。然后它按日期聚合结果：

```
select dates.scanned_date,
       count(t.id) as numids,
       sum(score) as sumscore
from (select distinct scanned_date from t) as dates left outer join
     t
     on dates.scanned_date >= t.scanned_date and
        dates.scanned_date < t.close_date
group by dates.scanned_date
order by 1 
```

# math - 连续坐标旋转中的浮点误差

> ID：11941547
> 
> 赞同：4
> 
> 时间：2012-08-13T20:10:49.487
> 
> 标签：math, language-agnostic, floating-accuracy, rotational-matrices

我有代码（Python）必须执行一些关于曲线反射段之间距离的操作。

为了使思路和代码更清晰，我在执行实际计算之前应用了两次旋转（使用矩阵乘法）。我想可以完全不进行任何旋转来执行计算，但是代码和思维会更加尴尬。

我要问的是：由于舍入浮点错误，三个旋转是否会导致精度损失过多？有没有办法估计这个误差的大小？

谢谢阅读

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T07:15:52.680

作为数值计算的经验法则——只认真对待前 12 位数字:)

现在，假设 3D 旋转，并且三角函数的结果是无限精确的，矩阵乘法将涉及旋转向量中每个元素的 3 次乘法和 2 次加法。由于您进行*了两次*旋转，这相当于每个元素 6 次乘法和 4 次加法。

如果您阅读[本文](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)（您应该在一天内从前到后阅读）、或[this](http://www.daemonology.net/papers/complexmultiply.pdf)或[this](http://en.wikipedia.org/wiki/Floating_point#Machine_precision_and_backward_error_analysis)，您会发现 IEEE 754 的各个算术运算保证在半个 ULP 以内（=最后一个小数位）。

应用于您的问题，这意味着结果向量中每个元素的 10 次操作将精确到 5 ULP 以内。

换句话说——假设你正在旋转一个单位向量。旋转矢量的元素将精确到 0.000000000000005——我想说这没什么好担心的。

包括触发函数中的错误，嗯，这有点复杂......这实际上取决于您的编程语言和/或编译器的版本等。但我保证它可以与 5 个 ULP 相媲美。

如果您*确实*认为这种准确性还不够，那么我建议您一次执行两次旋转。解析地计算出矩阵乘法，并将旋转实现为*单个*矩阵乘法。或者：看看[四元数](http://en.wikipedia.org/wiki/Quaternion)（虽然我怀疑这对你的情况来说有点过分了）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T22:51:48.967

您需要做的是计算您的操作的[条件数](http://en.wikipedia.org/wiki/Condition_number)，并确定它是否可能导致[重要性损失](http://en.wikipedia.org/wiki/Loss_of_significance)。这应该允许您估计可能引入的错误。

# php - 用于网站的 SQLite 和 MySQL

> ID：11941553
> 
> 赞同：-1
> 
> 时间：2012-08-13T20:11:02.797
> 
> 标签：php, mysql, database, security, sqlite

我正在创建一项允许人们购买可配置网站的服务。但我试图让他们尽可能轻松地保存配置设置。

我应该坚持使用 MySQL 还是应该尝试 SQLite？如果文件位于 Web 根目录中，SQLite 是否安全？我正在使用 PHP 访问数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:20:51.477

> 我应该坚持使用 MySQL 还是应该尝试 SQLite？

是的，除非你知道更好的第三个。

> 如果文件位于 Web 根目录中，SQLite 是否安全？我是

只要人（黑客）有智能并且我们不发明人工智能，就没有文件/程序/系统/计算机是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T20:21:57.540

> 我应该坚持使用 MySQL 还是应该尝试 SQLite？如果文件位于 Web 根目录中，SQLite 是否安全？

它们满足不同的要求。MySQL 是一个 SQL 服务器引擎（我假设您不是在谈论嵌入式版本），而 SQLIite 是一个文件数据库。
用于具有小数据的小型应用程序的 SQLite 可以为您带来性能优势。

> 如果文件位于 Web 根目录中，SQLite 是否安全？

只要您的 Web 应用程序和*特定用户帐户（除了您的 Web 应用程序帐户之外，可能只有 root）*具有对该目录的读/写访问权限，就可以

# c - 在 Ruby 中创建 C 扩展

> ID：11941554
> 
> 赞同：2
> 
> 时间：2012-08-13T20:11:05.863
> 
> 标签：c, ruby, ruby-c-extension

我正在尝试为 ruby​​ 创建一个 C 扩展。我对开发非常陌生，刚刚熟悉 Ruby，所以我真的迷路了。

我看过“如何在五分钟内用 Ruby 创建 C 扩展”，这很有意义。问题是我不知道使用什么程序来编译 C 代码和 Ruby 代码。我一直在为我的 Ruby 编程使用文本文档，所以我从来不需要编译它们。

如果我想做一个 C 扩展（按照前面提到的模型）我应该使用什么 IDE，我应该编译成什么文件格式？另外，我在哪里放置 Ruby 文件和 C 编译文件？最后，一个简单的记事本编辑器能用于这个 Ruby 开发吗？请记住，我一般是编程新手，所以这些问题可能显得幼稚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:40:08.093

在为 Ruby 创建 C 扩展之前，您确实应该熟悉 C 编程。一旦您学习了 C 的基础知识，您应该能够轻松地学习 Ruby 扩展教程。

至于如何学习C，这取决于你的平台和你有什么可用的资源。

要回答您的具体问题，您可以使用任何 C 编译器，并且您通常将源代码编译为`.so`文件，Ruby 可以`require`直接将其编译（因此文件的位置并不重要）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-09T17:24:39.827

对我来说，第一步是为我的特定平台建立一个构建环境，那就是适用于 Windows 的 DevKit。现在这取决于您的操作系统是什么。只要您了解一些 Ruby，那么我建议您学习如何使用 Rake。你可以从你的 Rakefile 运行一些任务来编译你的 C 扩展。您应该熟悉设置目录结构。我认为我有很多关于我维护的 github 存储库的信息以供参考。

[Ruby_C_extensions](https://github.com/DouglasAllen/Ruby_C_extensions)

对您帮助最大的一个是在 stree 文件夹下。自述文件有教程的链接。

享受！

# google-app-engine - 删除 Google App Engine 别名应用程序？

> ID：11941558
> 
> 赞同：7
> 
> 时间：2012-08-13T20:11:16.947
> 
> 标签：google-app-engine

我最近将 App Engine 应用程序从主/从数据存储迁移到高复制数据存储。这创建了两个应用程序（使用示例应用程序名称）：

```
myapp
myapp-hd 
```

myapp.appspot.com 是 myapp-hd.appspot.com 的别名。我的问题是，现在删除原始 myapp 应用程序是否安全？如果我删除 myapp 应用程序，别名会继续工作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T20:18:22.907

是的，您可以删除旧的应用 ID，别名将继续有效。但是，在删除它之前，请确保您*再也不会*想要它，因为该应用程序 ID 将永远消失。

# datetime - 为什么 cxf jax-rs 日期字段序列化有冒号？

> ID：11941559
> 
> 赞同：2
> 
> 时间：2012-08-13T20:11:19.190
> 
> 标签：datetime, serialization, cxf, jettison

我的 rest cxf 服务的类实体有一个 Date 字段。Jettison JsonProvider 的格式为：

`"date":"2012-08-13T16:40:07.281-03:00"`

但从 Gson 客户端，它被格式化为符合 iso8601（没有冒号时区）为：

`"date":"2012-08-13T16:40:07.281-0300"`.

抛弃 jax-rs 发生了什么？

CXF Jettison 中是否有任何简单的方法来指定日期时区格式？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-01T13:17:38.760

您可以使用 org.apache.cxf.jaxrs.ext.ParameterHandler：

```
@Component
public class DateHandler implements ParameterHandler<Date> {

      public Date fromString(String s) {
          DateTimeFormatter fmt = ISODateTimeFormat.dateTime();
          return fmt.parseDateTime(s).toDateTime(DateTimeZone.UTC).toDate();
      }
} 
```

您必须在构造 ServerFactoryBean 时获取它。这可以在 Spring 中的 XML 配置中完成，也可以使用 Spring Java 配置来实现。我使用了 Spring Java 配置。

```
@Bean
public List<Object> jaxRSProviders() {
    return new ArrayList<>(Arrays.asList(Your other providers, e.g. error handlers, fault barriers
           dateHandler));
}

JAXRSServerFactoryBean factory = ...
providers.addAll(jaxRSProviders);
factory.create(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-02T18:56:27.650

@ user1036 - 谢谢你的建议。这是我的老问题。在那段时间里，我通过使用 cxf 处理程序/拦截器解决了它，并在发送操作之前的时间部分之间插入冒号。谢谢。

# python - Django 模板标签中的相同结果

> ID：11941570
> 
> 赞同：1
> 
> 时间：2012-08-13T20:12:07.157
> 
> 标签：python, django, django-templates

有一个注册按钮，可以为该特定事件创建一个参加者。（有效）。但是，单击“注册”后，模板会识别`'is_attending'= True`（已注册！）中的每个事件`upcoming`。

看法：

```
def index(request):
    upcoming = Event.objects.filter(date__gte=datetime.now())
    if request.user.is_authenticated():
        profile = Profile.objects.get(user=request.user)
    is_attending = False
    for event in upcoming:
        attendees = [a.profile for a in Attendee.objects.filter(event=event)]
        if profile in attendees:
            is_attending = True 
```

模板

```
{% if is_attending %}
     <a><Registered!</a>
{% else %}
     <form>... registration form ... Register Now... 
```

我想正在发生的事情是：

```
event 1  : Registered!
event 2  : Registered!
event 3  : Registered! 
```

当我需要的是：

```
event 1  : Registered!
event 2  : Register Now
event 3  : Register Now 
```

我不太确定为什么这对我不起作用？我如何循环以`is_attending`仅返回那些在`upcoming`事件中注册的人？

楷模：

```
class Attendee(models.Model):
    event = models.ForeignKey(Event)
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    profile = generic.GenericForeignKey('content_type', 'object_id') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:15:25.000

`is_attending`每次通过 for 循环时，您都在重写值 ；您的模板会看到 的（单个）值`is_attending`，`upcoming`由`request.user`.

为了获得所需的行为`is_attending`，*每个* `Event`. 我认为最简单的方法是[使用自定义模板标签](https://docs.djangoproject.com/en/1.4/howto/custom-template-tags/#simple-tags)：

```
@register.simple_tag(takes_context=True)
def user_is_attending(context, event):
    if type(event) != Event:
        raise template.TemplateSyntaxError("Must provide event")
    request = context['request']
    if event.attendee_set.filter(profile__user=request.user).exists():
        return 'attending'
    else:
        return 'not attending' 
```

然后，当您在模板中循环您的事件时：

```
{% user_is_attending event %} 
```

您还可以根据需要考虑使用[分配标签](https://docs.djangoproject.com/en/1.4/howto/custom-template-tags/#assignment-tags)或[包含标签。](https://docs.djangoproject.com/en/1.4/howto/custom-template-tags/#inclusion-tags)

# iphone - 在 App 中创建 App

> ID：11941580
> 
> 赞同：2
> 
> 时间：2012-08-13T20:12:35.707
> 
> 标签：iphone, ios, ipad

我收到了一个非常有趣的项目。我必须完成的任务是想办法让合作伙伴在不放弃源代码的情况下参与应用程序。代码将包含在应用程序的主包中，因此不会动态存储。合作伙伴有一个功能齐全的应用程序，需要在适当的时间在主应用程序的窗口中运行。我知道让合作伙伴创建一个网络应用程序是理想的，因此它被视为网页，但我更关心必须在 iOS 中本地编写的代码。

我的问题是解决这个问题的最佳方法是什么？理论上它就像一个应用程序中的一个应用程序。如果他们放弃了他们的 .app 文件，有没有办法我可以将它包含在包中，然后在我捕捉到某个事件时运行它？我应该让合作伙伴在框架中创建他们的代码，然后导入到 shell 项目中吗？解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:16:56.300

如果您的第二方不想为您提供源代码，他为什么不将其编译为目标代码，然后让您简单地将其链接到您的应用程序？

顺便说一句，至少在官方（非越狱）iDevices 上，应用程序不能以这种方式相互“嵌入”或“打开”——如果 1\. 它是一个单独的应用程序 2\. 它有，您可以以编程方式打开一个应用程序与其捆绑包关联的已注册特殊 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T21:03:29.847

> 如果他们放弃了他们的 .app 文件，有没有办法我可以将它包含在包中，然后在我捕捉到某个事件时运行它？

不，您需要让他们创建一个库。然后，您可以将该库包含在您的项目中。

创建库很简单：

1.  在 Xcode 中选择 File->New...->Project...。

2.  选择“Cocoa Touch 静态库”项目模板。

3.  添加您的代码。

4.  建造。

结果是一个静态库，您可以将其添加到您的应用程序中。该库将包含您添加的已编译代码，但不包含源代码。库开发人员应提供使用库中代码所需的任何头文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-19T01:16:37.623

应用程序中的应用程序是可能的，但它需要一个通用数据框架，允许一个应用程序引用相同的数据，而不会混淆数据的来源和目的地。这样的框架允许一个应用程序与另一个引用相同数据的应用程序进行交互。

# excel - Excel 在录制宏时冻结

> ID：11941581
> 
> 赞同：0
> 
> 时间：2012-08-13T20:12:39.187
> 
> 标签：excel, vba

我有一个现有的 .xlsm 文件，可以完美地与所有宏一起运行。问题是，当我尝试录制另一个宏时，我添加了一个列，按 Enter 键，然后收到消息“Microsoft Excel 已停止响应”。然后我必须结束这个过程。我假设这与从 Excel 2003 导入并修改为适用于 2010 年的现有宏有关。

此宏中是否存在任何可能导致此问题的不兼容性？

```
 Sub Auto_Open()

    Wbname = ActiveWorkbook.Name  ' this needs to be first so the move works properly
    fileToOpen = Application.GetOpenFilename("CSV files (*.csv), *.csv", 1, "Select file to open")
    If fileToOpen <> False Then
        Workbooks.Open (fileToOpen)
    End If

    sheetname = ActiveSheet.Name

    Sheets(sheetname).Select
    Sheets(sheetname).Move Before:=Workbooks(Wbname).Sheets(1)

    Call Weekly_RTP

 End Sub

Sub Weekly_RTP()
'
' Macro recorded 01/12/12 by Robert Gagliardi
'
'   This next section (up to call sort_data) is needed until we get the formatting correct.
'   Clearing the last rows and adding misc headers will solve the short term problem
'   Need this once pivot table is created.  Can't have heading row without names in it
    Range("L1").Select
    ActiveCell.FormulaR1C1 = "Misc"
    Range("M1").Select
    ActiveCell.FormulaR1C1 = "Misc1"
    Columns("N:Z").Select
    Selection.ClearContents

    Call Sort_data

    ' concat mui & object to make it easy to find dups use countifs once at excel 2007 or greater
    Range("N1").Select
    ActiveCell.FormulaR1C1 = "Junk"
    Range("N2").Select
    ActiveCell.FormulaR1C1 = "=RC[-7]&RC[-5]"
    Range("N2").Select
    Selection.Copy
'    need to find last row using column K2
    lastrow = ActiveSheet.Range("K2").End(xlDown).Select
'    Selection.Offset(0, 3).Select   Moves over 3 cells
    Range("N2", Selection.Offset(0, 3)).Select
    ActiveSheet.Paste
    Application.CutCopyMode = False

    Columns("C:C").Select
    Selection.Insert Shift:=xlToRight
    Range("C1").Select
    ActiveCell.FormulaR1C1 = "Alerts"
    Range("C2").Select
    ActiveCell.FormulaR1C1 = "=IF(COUNTIF(R2C[12]:RC15,RC[12])=1,COUNTIF(C[12],RC[12]),"" "")"
    Range("C2").Select
    Selection.Copy
'    need to find last row using column B2 since column C was just added
    lastrow = ActiveSheet.Range("B2").End(xlDown).Select
'    Selection.Offset(0, 1).Select   Moves over 1 cell from last cell in column B
    Range("C2", Selection.Offset(0, 1)).Select
    ActiveSheet.Paste
    Application.CutCopyMode = False

    Call Create_pivot
    Call Save_data

'   how to select a range of cells with data in them
'    Worksheets(ActiveSheet.Name).Activate
'    ActiveCell.CurrentRegion.Select

End Sub

Sub Create_pivot()

    Wbname = ActiveWorkbook.Name

'   Insert columns to make room for pivot table
    Columns("A:I").Select
    Selection.Insert Shift:=xlToRight

    myData = Sheets(ActiveSheet.Name).[J1].CurrentRegion.Address
    mySheet = ActiveSheet.Name & "!"
    tableDest = "[" & Wbname & "]" & mySheet & "R1C1"
    ActiveWorkbook.PivotCaches.Add(SourceType:=xlDatabase, SourceData:= _
        mySheet & myData).CreatePivotTable TableDestination:=tableDest, TableName _
        :="RTP_alerts", DefaultVersion:=xlPivotTableVersionCurrent
    With ActiveSheet.PivotTables("RTP_alerts").PivotFields("Application")
        .Orientation = xlRowField
        .Position = 1
    End With
    With ActiveSheet.PivotTables("RTP_alerts").PivotFields("Object")
        .Orientation = xlRowField
        .Position = 2
    End With
    ActiveSheet.PivotTables("RTP_alerts").AddDataField ActiveSheet.PivotTables( _
        "RTP_alerts").PivotFields("Alerts"), "Count of Alerts", xlCount
    ActiveWorkbook.ShowPivotTableFieldList = False
    Application.CommandBars("PivotTable").Visible = False

    Columns("G:I").Select
    Selection.Delete Shift:=xlToLeft
    Range("D2").Select
    ActiveCell.FormulaR1C1 = "Owner"
    Range("E2").Select
    ActiveCell.FormulaR1C1 = "Problem Ticket"
    Columns("E:E").ColumnWidth = 13
    Range("F2").Select
    ActiveCell.FormulaR1C1 = "Comments"
    Columns("F:F").ColumnWidth = 48

End Sub

Sub Save_data()

    Filename = ActiveWorkbook.Name
    Do
        Fname = Application.GetSaveAsFilename(Filename, fileFilter:="Excel Files (*.xlsm), *.xlsm")
    Loop Until Fname <> False
    ActiveWorkbook.SaveAs Filename:=Fname, FileFormat:=52

End Sub

Sub Sort_data()

    Columns("A:M").Select
    Selection.Sort Key1:=Range("G2"), Order1:=xlAscending, Key2:=Range("I2") _
        , Order2:=xlAscending, Header:=xlGuess, OrderCustom:=1, MatchCase:= _
        False, Orientation:=xlTopToBottom, DataOption1:=xlSortNormal, DataOption2 _
        :=xlSortNormal
    Range("A1").Select

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:58:39.630

我遇到了同样的问题，你可以试试这里。转到`start-->run`，然后`%temp%`在框中键入。这将打开您的临时文件。

删除全部或部分，重新​​启动计算机并重试。

# c# - 连接 int 和 byte

> ID：11941583
> 
> 赞同：1
> 
> 时间：2012-08-13T20:12:48.810
> 
> 标签：c#, udp

首先，我对 c# 很陌生，所以请多多包涵。我正在尝试通过 UDP 为计算机设置 3 个整数和 4 个字节。我已经使用这个线程来帮助连接我的变量[在 C# 中组合两个或多个字节数组的最佳方法](https://stackoverflow.com/questions/415291/best-way-to-combine-two-or-more-byte-arrays-in-c-sharp)。目前，我在尝试将字节块复制到数组中时出错。我的数组长 12 个字节，我需要字节 9、4、5 和 6。我的代码是

```
byte[] UDPPacket = new byte[16];
Buffer.BlockCopy(button[9],0,UDPPacket,0,1); 
```

它出错了

```
(parameter)byte[]buttons 
```

我相信该`BlockCopy`方法适用于将一个数组按字节复制到另一个数组。任何洞察我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:17:04.767

表达式`button[9]`不是一个数组，它是一个字节。

改为使用索引作为偏移量：

```
Buffer.BlockCopy(button,9,UDPPacket,0,1); 
```

# oracle - Spring JDBC lob插入失败：无效的列类型

> ID：11941585
> 
> 赞同：1
> 
> 时间：2012-08-13T20:12:59.463
> 
> 标签：oracle, spring-jdbc, lob

编码：

```
 jdbcTemplate.update("MERGE INTO app_role_data x USING (select ? name, ? xml FROM dual) d ON (x.app_name = d.name) WHEN MATCHED THEN UPDATE SET x.xml_blob = d.xml WHEN NOT MATCHED THEN INSERT(app_name, xml_blob) VALUES(d.name, d.xml)",
                    new AbstractLobCreatingPreparedStatementCallback(lobHandler) {
                            protected void setValues(PreparedStatement ps, LobCreator lobCreator) throws SQLException {
                                    ps.setString(1, appName);
                                    lobCreator.setClobAsString(ps, 2, xmlBlob);
                            }
                    }); 
```

lobHandler 是在上下文中注入的 OracleLobHandler 的一个实例。

例外：

```
Caused by: java.sql.SQLException: Invalid column type
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:112)
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:146)
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:208)
    at oracle.jdbc.driver.OraclePreparedStatement.setObjectCritical(OraclePreparedStatement.java:9231)
    at oracle.jdbc.driver.OraclePreparedStatement.setObjectInternal(OraclePreparedStatement.java:8812)
    at oracle.jdbc.driver.OraclePreparedStatement.setObjectInternal(OraclePreparedStatement.java:9534)
    at oracle.jdbc.driver.OraclePreparedStatement.setObject(OraclePreparedStatement.java:9517)
    at org.springframework.jdbc.core.StatementCreatorUtils.setValue(StatementCreatorUtils.java:351)
    at org.springframework.jdbc.core.StatementCreatorUtils.setParameterValueInternal(StatementCreatorUtils.java:216)
    at org.springframework.jdbc.core.StatementCreatorUtils.setParameterValue(StatementCreatorUtils.java:144)
    at org.springframework.jdbc.core.ArgPreparedStatementSetter.doSetValue(ArgPreparedStatementSetter.java:65)
    at org.springframework.jdbc.core.ArgPreparedStatementSetter.setValues(ArgPreparedStatementSetter.java:46)
    at org.springframework.jdbc.core.JdbcTemplate$2.doInPreparedStatement(JdbcTemplate.java:815)
    at org.springframework.jdbc.core.JdbcTemplate$2.doInPreparedStatement(JdbcTemplate.java:1)
    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:586) 
```

这是 Spring 框架 3.0.5.RELEASE。

我们的 oracle 驱动程序依赖项是

```
 <dependency>
        <groupId>com.oracle</groupId>
        <artifactId>ojdbc14</artifactId>
        <version>10.2.0.3.0</version>
      </dependency> 
```

桌子：

```
SQL> desc app_role_data
 Name                      Null?    Type
 ----------------------------------------- -------- ----------------------------
 APP_NAME                       VARCHAR2(64)
 XML_BLOB                       CLOB 
```

我什至不确定我可以添加哪些其他信息，但如果我遗漏了一些信息，我会很乐意这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T19:41:25.410

结果是，execute() 采用 PreparedStatementCallback，而 update() 采用 PreparedStatementSetter。但是两者都有接受 Object 的重载，所以编译器不会抱怨。

叽。那是我一生中再也回不来的一天。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T20:17:05.687

我对这里的列名有点怀疑

你能在你的`MERGE`

```
select ? as name, ? as xml FROM dual 
```

但我也对此持怀疑态度，因为您可以拥有动态列名的方式是创建一个动态 sql 并使用`EXECUTE IMMEDIATE`.

或者可能是这样的（就Oracle而言不是最好的）-

```
jdbcTemplate.update("MERGE INTO app_role_data x USING dual d ON (x.app_name = ?) WHEN MATCHED THEN UPDATE SET x.xml_blob = ? WHEN NOT MATCHED THEN INSERT(app_name, xml_blob) VALUES(?, ?)",...... 
```

# css - 在不使用垂直空间的情况下在图像上对齐按钮

> ID：11941586
> 
> 赞同：0
> 
> 时间：2012-08-13T20:13:03.207
> 
> 标签：css, positioning

JSFiddle：http: [//jsfiddle.net/eFNAF/17/](http://jsfiddle.net/eFNAF/17/)

注意绿色背景和覆盖它的图像。上一个/下一个“按钮”位于照片上方。这会导致按钮最初放置的照片上方有空白区域。我想如图所示将按钮浮动在照片上，但不“使用”照片上方的空间。例如，我希望按钮绝对定位，但仍相对于它们的容器。另请注意，`div.Image`使用自动左/右边距居中。这使得它`position: absolute`无法使用。

**编辑：**图像应与绿色框顶部对齐。按钮应偏移图像顶部下方 10 像素，距离图像左侧/右侧 10 像素。将显示不同大小的图像，因此无法在 CSS 中设置图像大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:34:18.017

**CSS**

```
.Image,
.Image img
{
    width:366px;
    height:341px;
    border:0;
}
.Image
{
    position:relative;
}
.Image a
{
    position:absolute;
    top:10px;
    width:28px;
    height:28px;
    background-color:red;
    border:1px solid black;
    text-align:center;
    z-index:2;
    text-decoration:none;
    display:block;
}
.Image a.Previous
{
    left:10px;
}
.Image a.Next
{
    right:10px;
}​ 
```

**HTML**

```
<div class="Image">
    <a href="" class="Previous">&lt;</a>
    <a href="" class="Next">&gt;</a>
    <img src="http://images5.fanpop.com/image/photos/31500000/Happy-Hyena-hyenas-31563531-385-358.jpg">
</div> 
```

**​<a href="http://jsfiddle.net/eFNAF/19/" rel="nofollow">演示**

* * *

## 更新：

改变这个：

```
.Image,
.Image img
{
    width:366px;
    height:341px;
    border:0;
}
.Image
{
    position:relative;
} 
```

到：

```
img
{
    border:0;
    vertical-align:bottom;
}
.Image
{
    position:relative;
    display:inline-block;
} 
```

**[演示 2](http://jsfiddle.net/eFNAF/27/)**

# android - Android ExpandableListAdapter 视图布局未按需要显示:-(

> ID：11941587
> 
> 赞同：0
> 
> 时间：2012-08-13T20:13:04.723
> 
> 标签：android, android-layout, android-xml

我有一个 XML 布局，用于表示由 ExpandableListAdapter 显示的一个项目。（为每个列表项复制一次的 XML，而不是主活动布局）。我最初尝试了 LinearLayout 但这隐藏了三个小部件中的最后一个（图像按钮）。我明白为什么这不起作用，但我尝试了 RelativeLayout 但文本视图没有显示。

我将首先显示相对布局以及屏幕截图，并将我的初始布局和屏幕截图附加到 FWIW 底部。谢谢你的帮助。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="55dip"
    android:orientation="horizontal" >
    <CheckBox
        android:id="@+id/chkParent"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:checked="false"/>
    <EditText
        android:id="@+id/edtParent"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_toLeftOf="@id/chkParent"
        android:textSize="17dip"
        android:inputType="text"
        android:hint="@string/strItem"/>
     <ImageButton
        android:id="@+id/btnExpand"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_toLeftOf="@id/edtParent"
        android:src="@drawable/dark_expand"
        android:clickable="true"
        android:hint="@string/strViewSubItems"
        android:contentDescription="@string/strViewSubItems"
        android:background="@null"/>  
 </RelativeLayout> 
```

![相对布局截图](../Images/a744a684468714b724c45d8fb1df5c3c.png)

原始线性布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="55dip"
    android:orientation="horizontal" >
    <CheckBox
        android:id="@+id/chkParent"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="false"/>
    <EditText
        android:id="@+id/edtParent"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textSize="17dip"
        android:inputType="text"
        android:hint="@string/strItem"/>
    <ImageButton
        android:id="@+id/btnExpand"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:src="@drawable/dark_expand"
        android:clickable="true"
        android:hint="@string/strViewSubItems"
        android:contentDescription="@string/strViewSubItems"
        android:background="@null"/>  
 </LinearLayout> 
```

![线性布局的屏幕截图](../Images/db89d3a2f9366f629601ffdf1b283036.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:20:16.653

很确定你的`toLeftOf`属性应该是`toRightOf`属性。试一试，看看会发生什么。

实际上，你的`EditText`应该设置为`toRightOf="@id/chkParent"`and `toLeftOf="@id/btnExpand`。你`ImageButton`甚至不需要`toRightOf`修饰符，`alignParentRight`属性应该覆盖它。

# c# - 使用 Contains() 列表方法评估列表内容

> ID：11941593
> 
> 赞同：0
> 
> 时间：2012-08-13T20:13:31.543
> 
> 标签：c#, visual-studio-2010, list, find, contains

我有一个包含 3 个项目的列表，两个 type_1 和一个 type_2。我想返回第二个列表，其中包含存在的该类型的类型和编号。当单步执行在 foreach 循环中设置的断点时，IF 语句永远不会为真。我认为我尝试使用 Contains() 方法有问题。

输出应该是这样的：

```
 type_1    2
 type_2    1 
```

相反，它评估为：

```
 type_1    1
 type_1    1
 type_2    1 
```

我对 Contains() 的使用不正确吗？

```
public List<item_count> QueryGraphListingsNewAccountReport()

  List<item> result = new List<items>();

  var type_item1 = new item { account_type = "Type_1" };
  var type_item2 = new item { account_type = "Type_1" };
  var type_item3 = new item { account_type = "Type_2" };

  result.Add(type_item1);
  result.Add(type_item2);
  result.Add(type_item3);

 //Create a empty list that will hold the account_type AND a count of how many of that type exists:

  List<item_count> result_count = new List<item_count>();

  foreach (var item in result)
  {  
  if (result_count.Contains(new item_count { account_type = item.account_type, count = 1 } ) == true)
   {
     var result_item = result_count.Find(x => x.account_type == item.account_type);
     result_item.count += 1;
     result_count.Add(result_item);
   }
   else
   {
     var result_item = new item_count { account_type = item.account_type, count = 1 };
     result_count.Add(result_item);
   }   
  }
  return result_count;
}

public class item
{
    public string account_type { get; set; }
}
public class item_count    
{
    public int count {get; set;}
    public string account_type { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:19:00.507

你可以做：

```
myList.GroupBy(x=>x.type).Select(x=>new {x.Key, x.Count()}); 
```

如果你想使用for循环，最好使用linq`Count`函数来实现，如果你想使用包含你应该按照你使用的方式实现等于运算符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T20:23:14.000

我认为您的问题是您根本不想使用包含。您正在 contains 语句中创建一个新对象，显然，它尚未包含在您的列表中，因为您只是创建了它。比较是比较参考，而不是值。

为什么不直接使用您在下一行中执行的 find 语句呢？如果它返回 null，那么您就知道没有该类型的项目。

所以你可以做这样的事情：

```
var result_item = result_count.Find(x => x.account_type == item.account_type);
if (result_item != null) 
{
    result_item.count++;
    // note here you don't need to add it back to the list!
}
else
{
    // create your new result_item here and add it to your list.
} 
```

**注意**：Find 是 o(n)，所以如果你有大量类型，这可能无法很好地扩展。在这种情况下，你可能会更好地接受 Saeed 的分组建议。

# gem - rc 在红宝石中是什么意思？

> ID：11941594
> 
> 赞同：5
> 
> 时间：2012-08-13T20:13:43.800
> 
> 标签：gem, package, versioning

我正在阅读 bundler 的[文档](http://gembundler.com/rationale.html)，并注意到本文档中提到的几个 gem 版本的 rc 扩展（如 rails 3.0.0.rc）。这有什么特殊含义吗？这是否适用于 Rails 框架以外的其他 gem？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T20:16:55.013

发布候选，更多信息可以在[这里找到](http://en.wikipedia.org/wiki/Software_release_life_cycle#Release_candidate)

# grails - GORM/groovy 自动将 String 强制转换为各种对象

> ID：11941596
> 
> 赞同：0
> 
> 时间：2012-08-13T20:13:52.757
> 
> 标签：grails, groovy, casting, grails-orm

另一个新手问题。我有一种情况，我必须在 groovy 中为域类属性分配一个值。

代码是

> cf."$it.key" = it.value

cf."$it.key" 的属性类型可以是 Integer、Long 或 String - 但 it.value 始终是 String。我已经看到当 cf."$it.key" 为 Integer 或 Long 时，groovy 将 it.value 转换为 ascii 值（例如如果 it.value 为 "6"，则 cf."$it.key" 变为 54，当它是“7”，它变成 55 等等）。到目前为止，我已经通过引入如下所示的检查方法解决了这个问题。但想知道是否有更好的解决方案。

> ```
>  if (it.value.isInteger()){
>                   cf."$it.key" = new Integer(it.value)
>               }
>               else if (it.value.isLong()){
>                   cf."$it.key" = new Long(it.value)
>               } 
> ```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:30:47.630

假设您正在遍历地图，您应该能够[使用 bindData](http://grails.org/doc/2.1.0/ref/Controllers/bindData.html)，即

```
bindData( cf, map ) 
```

确保您阅读了文档的该部分，因为存在安全隐患

# python - django如何自动生成方法？

> ID：11941600
> 
> 赞同：1
> 
> 时间：2012-08-13T20:14:09.717
> 
> 标签：python, django

我只是好奇 Django 自动生成具有灵活参数名称的方法的方式，比如`c = p.choice_set.filter(choice_startswith = 'Just hacking')` 你能解释一下它是如何完成的吗？

这是示例的代码

```
 import datetime
from django.db import models
from django.utils import timezone

class Poll(models.Model):
    question = models.CharField(max_length = 200)
    pub_date = models.DateTimeField('date published')
    def was_published_recently(self):
        return self.pub_date >= timezone.now() - datetime.timedelta(days = 1)

    def __unicode__(self):
        return self.question

class Choice(models.Model):
    poll = models.ForeignKey(Poll)
    choice = models.CharField(max_length = 200)
    votes = models.IntegerField()
    def __unicode__(self):
        return self.choice 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T20:25:12.143

这是通过分析函数的关键字参数按字段名称和条件拆分它们来完成的。对概念验证进行一些简化，如下所示：

```
def filter(**kwargs):
    for i in kwargs:
        field, condition = i.split('__')
        print field, condition

>>> filter(choice__startswith='prefix-')
choice startswith 
```

然后使用字段名称和条件对真实对象执行某些操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T20:26:47.480

我假设您在示例中谈论的是choice_startswith 参数。本质上，这是通过利用 python 对关键字参数的处理来实现的。这是非常简单的魔法，我会在这里告诉你。

本质上，您定义了一个方法或函数，其签名类似于：：

```
def somefunc(*args, **kwargs):
    print args
    print kwargs 
```

正如你在这里看到的，我们定义了看起来很奇怪的参数。然而，这些不是正常的论点。args 前面的`*`表示任何非关键字参数都将`args`作为元组存储在变量中。kwargs`**`前面的表示任何关键字参数都将 `kwargs`作为字典存储在变量中。

所以如果你像这样运行这个函数：

```
>>> somefunc('a', 'b', alpha='alpha', beta='beta') 
```

你会得到这个输出：

```
>>> ('a', 'b')
>>> {'alpha': 'alpha', 'beta': 'beta'} 
```

您可以分别将 args 和 kwargs 操作为元组或字典。如果你分析这些，你可以做 django 用 filter 方法做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T20:41:20.367

ForeignRelatedObjectsDescriptor 类在相关字段中提供了像 objectname_set 或 related_name 这样的管理器

见： [https ://github.com/django/django/blob/master/django/db/models/fields/related.py#L433](https://github.com/django/django/blob/master/django/db/models/fields/related.py#L433)

# bash - Win 可执行文件运行但在 Cygwin 命令行上调用命令停止

> ID：11941604
> 
> 赞同：0
> 
> 时间：2012-08-13T20:14:38.927
> 
> 标签：bash, windows-7, makefile, cygwin

我正在为 TI 芯片重建闪存加载程序实用程序，并面临一个影响我的工作流程的小问题。我正在使用 64 位 Win7 PC 并在 cygwin bash shell 上使用 make 重建该实用程序。make 和 cygwin 版本号如下。

```
$ make -v
GNU Make 3.82.90
Built for i686-pc-cygwin
Copyright (C) 2010  Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

$ uname -a
CYGWIN_NT-6.1-WOW64 DEEDAA 1.7.15(0.260/5/3) 2012-05-09 10:25 i686 Cygwin 
```

构建过程中的一个步骤调用先前生成的实用程序（Windows 可执行文件）来生成 TI 处理器所需的 bin 文件。

**../../AISUtils//HexAIS_OMAP-L138.exe -ini ../sft_hexais.ini -o ../sft_C6748_SPI_MEM.bin ../sft_C6748_SPI_MEM.out**

调用此命令后，在 cygwin 命令行上看不到任何进展。但是，该命令的执行确实完成，生成此步骤中指定的文件并继续执行 makefile 中的后续步骤。只是我永远无法重新控制这个窗口。我总是需要杀死窗口，启动另一个 cygwin 实例。

如果我尝试立即终止 cygwin 窗口，我会收到以下消息。

```
mintty
Processes are running in session
Close anyway? 
```

如果我等待一段时间（完成以下步骤的时间），那么我可以在不弹出此消息的情况下终止窗口。

windows命令行上的相同命令执行时没有任何停顿，我确实重新获得了我的命令行。

```
 c:\ti\boot_tools\OMAP-L138_FlashAndBootUtils_2_40\OMAP-L138\GNU\AISUtils>HexAIS_OMAP-L138.exe -ini ..\sft\sft_hexais.ini
     -o ..\sft\sft_C6748_SPI_MEM.bin ..\sft\sft_C6748_SPI_MEM.out
    -----------------------------------------------------
       TI AIS Hex File Generator for OMAP-L138
       (C) 2012, Texas Instruments, Inc.
       Ver. 1.27
    -----------------------------------------------------

Begining the AIS file generation.
AIS file being generated for bootmode: UART.
Parsing the input object file, ..\sft\sft_C6748_SPI_MEM.out.
AIS file generation was successful.
Wrote 15464 bytes to file ..\sft\sft_C6748_SPI_MEM.bin.
Conversion is complete. 
```

在我看来，命令的构造方式是将命令推送到另一个 shell 或强制它在后台运行。关于可能发生的事情或我可以尝试调试问题的步骤有什么想法吗？

停滞的可执行文件的文件格式

```
$ file AISUtils/HexAIS_OMAP-L138.exe
AISUtils/HexAIS_OMAP-L138.exe: PE32 executable (console) Intel 80386 Mono/.Net assembly, for MS Windows 
```

链接到解释构建过程的 TI wiki。该链接提供了有关重建实用程序的一般说明，并且不太可能提供与我的问题相关的任何具体信息。我只包括它以防有人需要更多关于工具或过程的背景。

[http://processors.wiki.ti.com/index.php/Rebuilding_the_Flash_and_Boot_Utils_Package](http://processors.wiki.ti.com/index.php/Rebuilding_the_Flash_and_Boot_Utils_Package)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:39:56.970

在 Cygwin (MinTTY) 终端中运行 Windows 控制台应用程序通常是一个糟糕的主意。

尝试在 Windows (cmd) 控制台中运行或使用`cygstart`在新窗口中启动（在 Makefile 中，`-w`可能也很有用）。

# iphone - IOS 应用 UIWebView 或导航控制器

> ID：11941605
> 
> 赞同：1
> 
> 时间：2012-08-13T20:14:40.827
> 
> 标签：iphone, ios, uinavigationcontroller

我开始在 iPhone 上开发应用程序，我想知道你是否帮助我。

**Instagram 应用程序**，**Foursquare 应用程序**都使用底部的导航按钮栏？或者只是一个用 CSS 制作的精美导航栏，所有内容在 UIWebView 中加载为 html。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:23:07.357

抓住 class-dump 并自己找出来！

（......很可能，这些伟大的企业不会雇用敢于使用 UIWebView 和 HTML 制作“原生”iOS 应用程序的开发人员......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T20:28:35.410

它可以随心所欲，并不意味着它不是原生的。我们都熟悉的开箱即用控件和 UI 并不是唯一的选择，如果您愿意，您可以从头开始子类化甚至创建自己的“标签栏”。

这些应用程序使用的是本机代码，而不是 HTML/CSS

# cakephp - 数据验证失败时重定向到所需页面

> ID：11941611
> 
> 赞同：0
> 
> 时间：2012-08-13T20:15:18.663
> 
> 标签：cakephp

在正常情况下，用户在表单字段中输入详细信息并提交数据。提交模型验证数据，如果验证失败，用户将被重定向到带有错误通知的同一页面。

我有一个特殊的场景，如果验证失败，用户应该被重定向到指定的页面。我不希望用户被重定向到他发布数据的同一页面。

我浏览了蛋糕文档。但找不到任何提及数据验证失败重定向的内容。如果我使用来自控制器的验证，它可以实现。但这里我只在模型中使用规则进行验证。

有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:05:39.930

默认情况下，如果数据验证失败，用户不会被“重定向”到任何地方。Cake 显示相同的视图，没有任何重定向。该视图始终显示验证错误（如果存在）。所以，第一次加载表单当然是没有错误的，但是提交了错误的数据之后，就会出现错误。但两次都是完全相同的视图，并且没有使用重定向。

要解决您的问题，请在此处修改示例：http: [//book.cakephp.org/2.0/en/models/saving-your-data.html](http://book.cakephp.org/2.0/en/models/saving-your-data.html)您应该能够执行以下操作：

```
// If the form data can be validated and saved...
if ($this->Recipe->save($this->request->data)) {
    $this->Session->setFlash("Recipe Saved!");
    $this->redirect('/success-page');
} else {
    $this->Session->setFlash("We Have Errors!");
    $this->redirect('/my-custom-error-page'); // REDIRECT TO YOUR PAGE HERE
} 
```

有什么不适合你的理由吗？

# wordpress - wordpress 的高级自定义字段

> ID：11941614
> 
> 赞同：0
> 
> 时间：2012-08-13T20:15:33.780
> 
> 标签：wordpress, advanced-custom-fields

wordpress 的高级自定义字段...插件

来源： http: [//support.advancedcustomfields.com/discussion/2784/image-fields-on-custom-post-type-values-have-all-gone](http://support.advancedcustomfields.com/discussion/2784/image-fields-on-custom-post-type-values-have-all-gone)

我更新了我的高级自定义字段，所有图像字段值都消失了。

我检查了数据库，我仍然看到信息，但它们没有正确链接。

上帝..有什么想法吗？:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:05:53.940

你最好检查一下贬值的代码。我在 the_repeater_field (http://www.advancedcustomfields.com/docs/functions/the_repeater_field/) 上发现了同样的问题，它被贬值了，我不得不将我的代码更新为正确的函数。

查看此页面以查看其中是否与您的问题有关：http: [//www.advancedcustomfields.com/docs/functions/](http://www.advancedcustomfields.com/docs/functions/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-23T04:18:36.257

结帐 Bonzer 自定义字段创建者： **[https ://wordpress.org/plugins/bonzer-custom-fields/](https://wordpress.org/plugins/bonzer-custom-fields/)**

它在 wordpress 管理面板内的不同位置创建大量输入字段。wordpress 管理面板中适用自定义字段的位置包括：

*   所有帖子类型
*   所有分类法
*   页数：
    *   仪表板（主页）
    *   用户（您的个人资料）
    *   设置（所有页面）

试一试，我相信你会喜欢的。

# java - ExecutorService 在调用线程中运行任务？

> ID：11941617
> 
> 赞同：5
> 
> 时间：2012-08-13T20:15:40.700
> 
> 标签：java, threadpool, executorservice

是否有任何`java.util.ExecutorService`实现可以简单地在调用线程中运行所有已执行的任务？如果默认情况下这不包含在 Java 中，是否有一个库包含这样的实现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T19:37:51.923

您可以使用 Guava com.google.common.util.concurrent.MoreExecutors.sameThreadExecutor() 完全符合您的要求：[https ://github.com/google/guava/blob/0434c5199c83c3f43b8b6a86c62e121d518fe7d0/guava/src/com/google/ common/util/concurrent/MoreExecutors.java#L267](https://github.com/google/guava/blob/0434c5199c83c3f43b8b6a86c62e121d518fe7d0/guava/src/com/google/common/util/concurrent/MoreExecutors.java#L267)

编辑：该方法已重命名为 com.google.common.util.concurrent.MoreExecutors.newDirectExecutorService() [https://github.com/google/guava/blob/f67ab864bde63fa6602b5688de0440957ffeaa2e/guava/src/com/google/common/util /并发/MoreExecutors.java#L369](https://github.com/google/guava/blob/f67ab864bde63fa6602b5688de0440957ffeaa2e/guava/src/com/google/common/util/concurrent/MoreExecutors.java#L369)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T20:32:37.350

我能找到的唯一现有实现是[`SynchronousExecutorService`](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.camel/camel-core/2.10.0/org/apache/camel/util/concurrent/SynchronousExecutorService.java/)- 不幸的是埋在[骆驼](/questions/tagged/camel "显示标记为“骆驼”的问题")图书馆的某个地方。

在此处粘贴源代码（不带注释）以供将来参考：

```
package org.apache.camel.util.concurrent;

import java.util.List;
import java.util.concurrent.AbstractExecutorService;
import java.util.concurrent.TimeUnit;

public class SynchronousExecutorService extends AbstractExecutorService {

    private volatile boolean shutdown;

    public void shutdown() {
        shutdown = true;
    }

    public List<Runnable> shutdownNow() {
        return null;
    }

    public boolean isShutdown() {
        return shutdown;
    }

    public boolean isTerminated() {
        return shutdown;
    }

    public boolean awaitTermination(long time, TimeUnit unit) throws InterruptedException {
        return true;
    }

    public void execute(Runnable runnable) {
        runnable.run();
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T20:19:51.400

你看过 java.util.concurrent.ThreadPoolExecutor 吗？

# javascript - 将值设置为不存在的对象

> ID：11941619
> 
> 赞同：2
> 
> 时间：2012-08-13T20:15:52.543
> 
> 标签：javascript

假设我有这个对象：

```
test = {
    testObj: {
        "1": {
            "key": "value"
        }
    }
} 
```

我想像这样添加值`testObj`：

```
test.testObj["2"].key = "my value"; 
```

我收到错误`TypeError: Cannot set property 'key' of undefined`

现在我知道`key`它还不存在，但`2`也不存在，但我可以为它设置值：

`test.testObj["2"] = "something";`

那么我能做些什么呢？

**编辑** 哇，我觉得自己没有弄清楚这一点很愚蠢......无论如何，谢谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T20:18:04.483

Javascript 不知道`test.testObj["2"]`在这种情况下应该是什么，因此最终将其作为现有属性进行测试：

```
test.testObj["2"].key = "my value"; 
```

分配只能应用于左侧结构的最后一部分。

但是您可以通过首先创建对象来告诉它它是什么：

```
test.testObj["2"]={};
test.testObj["2"].key = "my value"; 
```

或者一步：

```
test.testObj["2"] = { key: "my value"}; 
```

# javascript - Jshint.com | 分配给“这个”

> ID：11941627
> 
> 赞同：3
> 
> 时间：2012-08-13T20:16:36.697
> 
> 标签：javascript, jshint

每当我这样做时，在 jshint.com

```
var this_hold = this; 
```

我得到一个错误。

我违反了严格错误。

该应用程序是这样的，我需要使用这个（从事件处理程序传入）或者我需要自己使用`document.getElementById()`

这就是这个函数的最佳工作方式......否则我必须为每种情况编写两次。

我希望错误消失..我不想将其关闭。我希望 jshint.com 100% 快乐。

这是有问题的功能与违规评论

```
/**
 *vFlipBP - eliminate select_element in favor of 'this'
 */

function vFlipBP( element_or_string ) {
    var previous_page_element,
        previous_tag_element,
        current_page_element,
        select_element;
    console.log( 'element_or_string ' + element_or_string ); 
    if( typeof ( element_or_string ) === 'string' ) {
        select_element = document.getElementById( element_or_string );
    } else {
        select_element = this;  // violation of strict here
    }
    if( vFlipBP.previous_id === undefined ) {
        var probe_id = select_element.parentElement.firstChild.id;
        if ( ( probe_id === select_element.id ) && ( select_element.parentElement.firstChild.nextSibling ) ) {
            probe_id = select_element.parentElement.firstChild.nextSibling.id;
            vFlipBP.previous_id = probe_id;
        } else {
            vFlipBP.previous_id = select_element.id;
        }
    }
    current_page_element = document.getElementById( select_element.id + '_page' );
    current_page_element.style.display = '';
    select_element.style.background = "#eeeeee";
    if( vFlipBP.previous_id !== select_element.id ) {
        previous_page_element = document.getElementById( vFlipBP.previous_id + '_page' );
        previous_tag_element = document.getElementById( vFlipBP.previous_id );
        if( ( ( previous_page_element !== current_page_element ) ) && ( previous_page_element !== null ) ) {
            previous_page_element.style.display = 'none';
            previous_tag_element.style.background = "#ffffff";
        }
    }
    vFlipBP.previous_id = select_element.id;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:18:28.947

您不能分配给`this`; 它是只读的。

但是，将 的值分配`this`给另一个变量并*没有*错误，也没有违反“使用 stict”规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T20:29:35.220

您可以使用一个选项`validthis`来关闭该警告。不幸的是，您不能仅通过静态分析来检测所有严格模式违规，因此 JSHint 会进行猜测——有时它是错误的。

`validthis`有关我们文档中的更多信息和其他选项：http: [//www.jshint.com/docs/](http://www.jshint.com/docs/)

# qt - 这是使用 QWebPage 设置 SSL 协议的正确方法吗？

> ID：11941630
> 
> 赞同：2
> 
> 时间：2012-08-13T20:16:51.813
> 
> 标签：qt, ssl, qtwebkit

我一直在 Qt 中使用 SSL，我需要设置一个特定的协议（而不是默认的“安全协议”）。看起来像这样有效：

```
QSslConfiguration config = QSslConfiguration::defaultConfiguration();
config.setProtocol(QSsl::TlsV1_0);
QSslConfiguration::setDefaultConfiguration(config); 
```

`QWebPage`但是像这样以全局方式设置协议，而不是在or`QWebView`或其他东西上设置它让我感到不舒服。我是否遗漏了一些明显的东西，或者这真的是最好的方法吗？我知道我可以在 SSL 套接字上设置它，但我使用的是 QtWebKit，并且无法访问各个套接字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T21:49:42.407

我发现这样做的方法是扩展`QNetworkAccessManager`和设置协议[`createRequest`](http://qt-project.org/doc/qt-4.8/qnetworkaccessmanager.html#createRequest)：

```
class NetworkAccessManager : public QNetworkAccessManager
{
    Q_OBJECT
public:
    explicit NetworkAccessManager(QObject *parent = 0);

protected:
    virtual QNetworkReply * createRequest(Operation operation, const QNetworkRequest & request, QIODevice * outgoingData = 0) {
        // I have no idea why request is const, but I need to change it
        QNetworkRequest notConstRequest = request;
        QSslConfiguration conf = notConstRequest.sslConfiguration();
        conf.setProtocol(QSsl::TlsV1_0);
        notConstRequest.setSslConfiguration(conf);
        return QNetworkAccessManager::createRequest(operation, notConstRequest, outgoingData);
    }
}; 
```

然后我可以在我的`QWebpage`using中设置它[`setNetworkAccessManager`](http://qt-project.org/doc/qt-4.8/qwebpage.html#setNetworkAccessManager)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T16:04:30.070

您可能会发现这很有帮助：[Https page works in Windows but not in Linux](http://qt-project.org/forums/viewthread/19690)，他使用与设置协议相同的方法（靠近页面底部）。

我找不到很多资源，但是诺基亚的 Qt 文档明确指出您*可以*专门在 QSslSocket 对象上设置协议。相关位：

> 请注意，更改 QSslConfiguration 中的设置并不足以更改相关 SSL 连接中的设置。您必须在修改后的 QSslConfiguration 对象上调用 setSslConfiguration 才能实现此目的。以下示例说明了如何在 QSslSocket 对象中将协议更改为 TLSv1：

```
QSslConfiguration config = sslSocket.sslConfiguration();
config.setProtocol(QSsl::TlsV1);
sslSocket.setSslConfiguration(config); 
```

所以是的，最好的方法可能是在每个套接字对象的基础上设置它，但是如果这不可用，您的方法也可以工作。诺基亚页面：[QSslConfiguration](http://doc.qt.nokia.com/qt-maemo/qsslconfiguration.html)

# asp.net - 使用带有 GET 方法和操作参数的 MVC Html.BeginForm

> ID：11941636
> 
> 赞同：3
> 
> 时间：2012-08-13T20:17:12.930
> 
> 标签：asp.net, asp.net-mvc, razor

我知道我可以使用 Html.BeginForm 使用如下操作参数进行 POST：

```
@using (Html.BeginForm("Details", "Home", new { name = Model.Name })) 
```

我可以像这样得到：

```
@using (Html.BeginForm("Details", "Home", FormMethod.Get)) 
```

但我似乎不能两者都做。我如何能？

## 更新

以下是相关表格的全部内容：

```
@using (Html.BeginForm("Details", "Home", new { name = Model.Name }))
{
    <div style="text-align: center">
        @Html.DropDownList("viewMonth", 
                                  new List<SelectListItem>(ViewBag.MonthNames))
        @Html.TextBox("viewYear", Model.ViewYear, new {style = "width: 30px"})
        <input type="submit" value="Go"/>
        <br/>
        <br/>
    </div>
} 
```

其中`viewMonth`和`viewYear`是 A​​ction/Details 中的参数名称。如果我尝试

```
@using (Html.BeginForm("Details", "Home", new { name = Model.Name }, 
                        FormMethod.Get)) 
```

它将传递 viewMonth 和 viewYear，但不传递名称。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T20:18:30.337

> 但我似乎不能两者兼得

你可以两者都做......你可以使用[`overload`](http://msdn.microsoft.com/en-us/library/dd492719)你需要的

例如，如果`name`是`routeValue`：

```
@using (Html.BeginForm("Details", "Home", new { name = Model.Name }, 
                        FormMethod.Get)) 
```

如果 name 是`htmlAttribute`以下形式：

```
@using (Html.BeginForm("Details", "Home", FormMethod.Get, 
                        new { name = Model.Name })) 
```

如果你想同时使用 routeValues 和 htmlAttributes：

```
@using (Html.BeginForm("Details", "Home", new { name = Model.Name }, 
                        FormMethod.Get, new { name = "foo_bar" })) 
```

# wordpress - 设置缩略图特色图像大小无法正常工作

> ID：11941637
> 
> 赞同：0
> 
> 时间：2012-08-13T20:17:13.270
> 
> 标签：wordpress, wordpress-theming

嗨，我今天刚开始创建我的第一个 Wordpress 主题，我正在尝试为每个帖子创建一个特色图片。Aldo 我已经设法完成，我给它的尺寸似乎没有生效。这是我的代码：

```
if(function_exists('add_theme_support')){
   add_theme_support('post-thumbnails' , array('post'));
   set_post_thumbnail_size(200,120);
}

if(function_exists('has_post_thumbnail') && has_post_thumbnail()){
      the_post_thumbnail();
} 
```

似乎我的特色图像并不总是设置为相同的尺寸。例如，如果图像较小，那么我设置的尺寸将保持不变，对于大图像，宽度是相同的，但对于某些高度是不同的。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T00:17:39.110

您是否在functions.php 中设置缩略图大小？如果它只是在 index.php 或其他主题文件中，它将无法正常工作。

来自[法典](http://codex.wordpress.org/Function_Reference/add_theme_support)：

> 必须在触发 init 挂钩之前调用此功能。这意味着它需要直接放入functions.php 或附加到'after_setup_theme' 钩子的函数中。对于自定义帖子类型，您还可以使用 register_post_type 函数添加帖子缩略图。

`the_post_thumbnail()`显示缩略图并应放置在您希望显示缩略图的位置。

# php - iframe php 注入到我的 html 网站

> ID：11941639
> 
> 赞同：0
> 
> 时间：2012-08-13T20:17:14.180
> 
> 标签：php, html, iframe

我有一个很小的网站，总共有 3 个网页，仅包含 html、css 和 jquery...现在在我的一个 .html 页面上，我添加了这个烦人的 iframe 注入（源文件是 php）每次我加载我的页面时，在我的身体标签上。现在我一一删除了所有引用的样式表、插件等，但摆脱它的唯一方法是删除该页面的所有内容。如何摆脱这个 iframe？有小费吗？

请注意，我在这个“被黑页面”上使用的其他页面上使用的插件相同，除了一个插件......但删除那个插件并不能修复它......？

这是我通过检查元素得到的 iframe 代码：下面的整个部分被注入

```
<div style="padding-left: 120px;">
<iframe width="728" scrolling="no" height="90" frameborder="0" allowtransparency="yes" src="http://b.admedia.com/banner.php?id=18793&sr=1&injection_code=true&subid=FC&ip=[IP]&ua=[UA]&transparency=[TR]&highlight=0&style=1&appnxsId=860932&size=728x90&search=digital cameras&force=1&ref=&bpage=">
<html>
<head>
</head>
<body>
</body>
</html>
</iframe>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:41:05.613

您几乎可以肯定您的 PC 上有恶意软件。

例如，查看[this](http://www.threatexpert.com/report.aspx?md5=48e60a603f2b11cb5180fdbe545e8173)和[this](http://contagiodump.blogspot.co.nz/2012/02/purple-haze-bootkit.html)。很可能您有一个将代码注入资源管理器的木马，使攻击者能够进行广告点击。

您可以通过尝试不同的浏览器或运行病毒/恶意软件扫描程序来确认。

# ruby-on-rails-3 - 缓存在变量中的 Rails 路由

> ID：11941642
> 
> 赞同：2
> 
> 时间：2012-08-13T20:17:37.133
> 
> 标签：ruby-on-rails-3, lambda, routes

如何使用 lambda 将路由缓存到变量中，但如何在路由块之外创建它？

在调用 routes.rb 块之前加载的 somefile.rb：

```
x = lambda do
  namespace :test do

    root to: 'application#index'

    get 'page/:page', to: 'pages#show', as: :page

  end
end 
```

路线.rb：

```
Rails.application.routes.draw do

  x.call if yep

end 
```

由于某些 DSL 类加载错误，这样的代码不起作用。我真的不明白范围是如何在块内工作的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T01:23:40.023

您可以简单地将您的 lambda`draw`直接传递给该方法：

```
# config/routes.rb
conditional_routes = lambda {
  namespace :test do
    root to: 'application#index'
    match 'page/:page' => 'pages#show', as: :page
  end
}

TestApp::Application.routes.draw do
  # default routes
end

TestApp::Application.routes.draw(&conditional_routes) if yep 
```

在这个例子中，我在同一个文件`config/routes.rb`（

```
# config/initializers/conditional_routes.rb
module ConditionalRoutes
  def self.routes
    lambda {
      # ...
    }
  end
end

# config/routes.rb
TestApp::Application.routes.draw(&ConditionalRoutes.routes) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T19:14:10.670

在您的初始化程序中：

```
class Routes
    attr_accessor :routes

    def initialize(routes)
        @routes = routes
    end

    module Helper
        def test_namespace
            Routes.new(self).create_routes
        end
    end

    def self.install!
        ActionDispatch::Routing::Mapper.send :include, Routes::Helper
    end

    def create_routes
        routes.namespace :test do
            root to: 'application#index'
            get 'page/:page', to: 'pages#show', as: :page
        end
    end
end

Routes.install! 
```

在您的路线中

```
Rails.application.routes.draw do
    test_namespace if yep
end 
```

我真的不确定它会起作用，但它可能会给你一些想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T08:13:00.073

*在 routes.rb*中保持明确的路由声明通常是一个好习惯。routes.rb 文件旨在成为您必须查看的唯一位置，以了解如何定义路由。

此外，无需拨打`routes.draw`两次电话。

路线.rb

```
TestApp::Application.routes.draw do

  constraints(Yep) do
    namespace :test do
      root to: 'application#index'
      get 'page/:page', to: 'pages#show', as: :page
    end
  end

end 
```

lib/yep.rb

```
class Yep
  def self.matches?(request)
    # if this returns true, your routes block will be drawn
  end
end 
```

# bash - 使用 sudo 的命令后在路径后添加空格

> ID：11941645
> 
> 赞同：-1
> 
> 时间：2012-08-13T20:17:52.067
> 
> 标签：bash, linux-mint

当我尝试以超级用户身份执行后跟路径的命令时，自动完成（制表符）将在文件夹后产生一个空格：

例如，在我的主文件夹中：

```
"sudo cat Doc" <tab> 
```

生产

```
"sudo cat Documents " 
```

与

```
"sudo cat Documents/" 
```

这很烦人。有什么想法可能是错的吗？我打破了它还是这只是一个错误？我正在运行 Linux Mint 13 Mate 64。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:21:54.233

你可以使用 bash-completion 来解决这个问题。对于 Debian/Ubuntu

```
sudo apt-get install bash-completion

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T20:32:43.637

[这个话题](https://askubuntu.com/questions/41707/bash-auto-completion-with-added-spaces-why-and-how-to-fix)似乎解决了它。我仍然不确定为什么会发生这种情况。我很确定直到今天这不是问题。

# c++ - 包装 STL 以扩展

> ID：11941670
> 
> 赞同：3
> 
> 时间：2012-08-13T20:19:04.280
> 
> 标签：c++, stl, wrapper, stdvector

所以我读到从 STL 继承是一个坏主意。但是如何将 STL 类包装在其他类中以扩展它们。这样做的主要目的是分离抽象级别等。

就像是：

```
template<class T>
class MyVector{
public:
T& last(){
  return data[data.size() - 1]
}

bool include(T& element);

//etc.

private:
vector<T> data;
} 
```

这是一个好主意吗？这是 c++ 程序员经常做的事情吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T20:25:04.187

是的，包装比继承更好，但前提是您需要向现有数据结构添加状态。否则，添加非成员函数。[这在 C++ 编码标准 ( Amazon](https://rads.stackoverflow.com/amzn/click/com/0321113586) )的第 35 项中有更详细的解释

> 要添加状态，更喜欢组合而不是继承。诚然，必须为要保留的成员函数编写传递函数很乏味，但这样的实现比使用公共或非公共继承要好得多，也更安全。

```
template<typename T>
class MyExtendedVector
{
public:
    // pass-through functions for std::vector members
    void some_existing_fun() { return vec_.some_existing_fun(); }

    // new functionality that uses extra state
    void some_new_fun() { // your implementation here }   

private: 
    std::vector<T> vec_;
    // extra state e.g. to do logging, caching, or whatever
}; 
```

> 要添加行为，最好添加非成员函数而不是成员函数。

但是，请确保您的算法尽可能通用：

```
// if you CAN: write algorithm that uses iterators only 
// (and delegates to iterator category that container supports)
template<typename Iterator, typename T>
bool generic_contains(Iterator first, Iterator last, T const& elem)
{
    // implement using iterators + STL algorithms only
    return std::find(first, last, elem) != last;
}

// if you MUST: write algorithm that uses specific interface of container
template<typename T>
void vector_contains(std::vector<T> const& v, T const& elem)
{
    // implement using public interface of Container + STL algorithms
    return generic_contains(v.begin(), v.end(), elem);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T20:25:38.163

我只能为自己说话，但我没有这样做，而且我一般不会建议这样做。

几乎在每种情况下，基于迭代器的算法都更易于实现*，*并将算法与容器分开。例如，假设您的`include`方法只是确定元素是否在向量中，您将使用`find`、`binary_search`或 ，`lower_bound`具体取决于容器的内容和搜索需求。

有时我*通过*提供开始/结束方法实现了一个在外界*看来像容器的类。*在这种情况下，它有时确实有一个标准容器底层，但您只实现一个最小的公共接口来表示您的类实际建模的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T21:05:16.150

正如最后一个人回答的那样，我会避免这样做。我了解您希望容器将一些更复杂的操作包装成更简单的方法的地方，并且认为您可以在某些时候更改底层容器而无需更改接口。然而，话虽如此，您的对象应该对您的业务需求进行建模，然后这些对象的实现将使用最佳的数据容器和访问模式。我想我的意思是你最终不会重新使用这个新的向量类，因为你的业务需求的数据访问每次都会不同，你将再次使用一些标准的通用容器，如 std::vector 和基于迭代器的算法来访问数据。

现在，如果某些算法不存在，您可以为该特定项目编写基于迭代器的算法，然后保留您可以重用的算法代码。下面显示了我编写的一个基于集合交集的集合 grep 算法，但并没有完全按照我想要的方式做。我可以再次重用这个算法。

```
#include <utility>
#include <algorithm>

//  this is a set grep meaning any items that are in set one
// will be pulled out if they match anything in set 2 based on operator pred 
template<typename _InputIterator1, typename _InputIterator2,
  typename _OutputIterator, typename _Compare>
  _OutputIterator
setGrep(_InputIterator1 __first1, _InputIterator1 __last1,
    _InputIterator2 __first2, _InputIterator2 __last2,
    _OutputIterator __result, _Compare __comp)
{
  while (__first1 != __last1 && __first2 != __last2)
    if (__comp(*__first1, *__first2))
      ++__first1;
    else if (__comp(*__first2, *__first1))
      ++__first2;
    else
    {
      *__result = *__first1;
      ++__first1;
      ++__result;
    }
  return __result;
} 
```

# bash - 为什么`echo -e`在与变量一起使用时不起作用？

> ID：11941673
> 
> 赞同：0
> 
> 时间：2012-08-13T20:19:17.903
> 
> 标签：bash, echo

```
#!/bin/bash
RESULT=$(ls)

echo -e "$RESULT"  # prints the result of 'ls' with new lines
echo -e $RESULT    # prints the result of 'ls' in one line 
```

为什么第二种方法在一行中打印所有内容而不是每个项目的新行？该`-e`选项不应该触发对字符的解释`\n`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T20:25:14.560

当您运行此命令时：

```
echo -e $RESULT 
```

Bash在;上执行[*分词。*](http://www.gnu.org/software/bash/manual/bashref.html#Word-Splitting)`$RESULT`也就是说，它通过空格将其拆分，并将生成的标记作为单独的参数传递给`echo`. 所以你基本上是在运行这个：

```
echo -e file1.txt file2.txt file3.txt 
```

并且`echo`无法知道其中`$RESULT`包含换行符。

（`-e`顺便说一句，这里并不真正相关。`-e`不影响换行符的处理，只影响实际序列，例如`\n`- 反斜杠后跟`n`.）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T20:25:42.990

`-e`无关紧要。

`echo "$RESULT"`看到一个参数，一个带有嵌入换行符的字符串。

`echo $RESULT`看到的参数与`$RESULT`. 分隔这些单词的空格（包括换行符）被 shell 吃掉了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T20:25:22.483

在这种情况下，它将不同的行视为单独的参数。

# javascript - 如何防止我的引导可折叠框滚动页面？

> ID：11941684
> 
> 赞同：0
> 
> 时间：2012-08-13T20:20:39.353
> 
> 标签：javascript, twitter-bootstrap

我有 5 个 DIV，它们使用 Twitter 引导程序来显示或隐藏其中的信息。当我的页面呈现时，其中两个框默认打开。当打开的框的高度高于屏幕时，页面被强制滚动到底部。

我想让页面保持滚动到顶部，同时强制溢出到底部，但不知道该怎么做。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-21T13:54:45.680

用这个 CSS 规则解决了这个问题：

```
body.modal-open {
    overflow: hidden ; 
} 
```

不需要额外的 JavaScript，因为引导模式会自动将 'modal-open' 类添加到正文中。

# android - Android 部分 TextView 不可见

> ID：11941685
> 
> 赞同：0
> 
> 时间：2012-08-13T20:20:48.650
> 
> 标签：android, textview

我在表格布局中有一些文本视图。当我单击布局中的按钮时，文本视图的部分消失了。我曾尝试重新启动 eclipse 和模拟器几次，但没有任何改变。我完全被难住了。关于为什么会发生这种情况的任何建议？我已经发布了前后截图和表格布局的 xml 代码

点击前

![](../Images/65d160a4406e87cab501faadeb6cb390.png)

点击后

![在此处输入图像描述](../Images/26a0181aa6bcff3491eff93e3c0c1022.png)

XML 代码的部分...

```
 <TableLayout
                android:id="@+id/tableLayout1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/tv_rank"
                android:stretchColumns="1" >

             <TextView
                    android:id="@+id/textView4"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="5dp"
                    android:background="#acacac"
                    android:text="Public"
                    android:textColor="#000000" />

                <TableRow
                    android:id="@+id/tableRow2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="#acacac"
                    android:paddingTop="5dp" >

                    <TextView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="10dp"
                        android:layout_weight="1.35"
                        android:text="Parties Thrown:"
                        android:textColor="#000000"
                        android:textSize="12dp" />

                    <LinearLayout
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1" >

                        <TextView
                            android:id="@+id/tv_PublicPartyAmount"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="0"
                            android:textColor="#000000"
                            android:textSize="12dp"
                            android:textStyle="bold" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text=" parties"
                            android:textColor="#000000"
                            android:textSize="8dp" />
                    </LinearLayout>

                    <TextView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1.35"
                        android:text="Average Score:"
                        android:textColor="#000000"
                        android:textSize="12dp" />

                    <LinearLayout
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1" >

                        <TextView
                            android:id="@+id/tv_PublicAverageScore"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="0"
                            android:textColor="#000000"
                            android:textSize="12dp"
                            android:textStyle="bold" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text=" points"
                            android:textColor="#000000"
                            android:textSize="8dp" />
                    </LinearLayout>
                </TableRow>

                <TableRow
                    android:id="@+id/tableRow3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="#acacac"
                    android:paddingBottom="5dp"
                    android:paddingTop="5dp" >

                    <TextView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="10dp"
                        android:layout_weight="1.35"
                        android:text="Biggest Party:"
                        android:textColor="#000000"
                        android:textSize="12dp" />

                    <LinearLayout
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1" >

                        <TextView
                            android:id="@+id/tv_PublicBiggestParty"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="0"
                            android:textColor="#000000"
                            android:textSize="12dp"
                            android:textStyle="bold" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text=" guests"
                            android:textColor="#000000"
                            android:textSize="8dp" />
                    </LinearLayout>

                    <TextView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1.35"
                        android:text="Highest Score:"
                        android:textColor="#000000"
                        android:textSize="12dp" />

                    <LinearLayout
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1" >

                        <TextView
                            android:id="@+id/tv_PublicHighestScore"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="0"
                            android:textColor="#000000"
                            android:textSize="12dp"
                            android:textStyle="bold" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text=" points"
                            android:textColor="#000000"
                            android:textSize="8dp" />
                    </LinearLayout>
                </TableRow>

                <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="5dp" >
                </LinearLayout>

                <TextView
                    android:id="@+id/textView13"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="#acacac"
                    android:text="Private"
                    android:textColor="#000000" />

                <TableRow
                    android:id="@+id/tableRow4"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="#acacac"
                    android:paddingTop="5dp" >

                    <TextView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="10dp"
                        android:layout_weight="1.35"
                        android:text="Parties Thrown:"
                        android:textColor="#000000"
                        android:textSize="12dp" />

                    <LinearLayout
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1" >

                        <TextView
                            android:id="@+id/tv_PrivatePartyAmount"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="0"
                            android:textColor="#000000"
                            android:textSize="12dp"
                            android:textStyle="bold" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text=" parties"
                            android:textColor="#000000"
                            android:textSize="8dp" />
                    </LinearLayout>

                    <TextView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1.35"
                        android:text="Average Score:"
                        android:textColor="#000000"
                        android:textSize="12dp" />

                    <LinearLayout
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1" >

                        <TextView
                            android:id="@+id/tv_PrivateAverageScore"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="0"
                            android:textColor="#000000"
                            android:textSize="12dp"
                            android:textStyle="bold" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text=" points"
                            android:textColor="#000000"
                            android:textSize="8dp" />
                    </LinearLayout>
                </TableRow>

                <TableRow
                    android:id="@+id/tableRow5"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="#acacac"
                    android:paddingBottom="5dp"
                    android:paddingTop="5dp" >

                    <TextView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="10dp"
                        android:layout_weight="1.35"
                        android:text="Biggest Party:"
                        android:textColor="#000000"
                        android:textSize="12dp" />

                    <LinearLayout
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1" >

                        <TextView
                            android:id="@+id/tv_PrivateBiggestParty"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="0"
                            android:textColor="#000000"
                            android:textSize="12dp"
                            android:textStyle="bold" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text=" guests"
                            android:textColor="#000000"
                            android:textSize="8dp" />
                    </LinearLayout>

                    <TextView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1.35"
                        android:text="Highest Score:"
                        android:textColor="#000000"
                        android:textSize="12dp" />

                    <LinearLayout
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1" >

                        <TextView
                            android:id="@+id/tv_PrivateHighestScore"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="0"
                            android:textColor="#000000"
                            android:textSize="12dp"
                            android:textStyle="bold" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text=" guests"
                            android:textColor="#000000"
                            android:textSize="8dp" />
                    </LinearLayout>
                </TableRow>
            </TableLayout> 
```

# sql - 给定childID时如何爬取公司结构

> ID：11941687
> 
> 赞同：2
> 
> 时间：2012-08-13T20:20:53.040
> 
> 标签：sql, sql-server, sql-server-2008

我想知道使用父 ID 爬取公司结构的有效方法是什么。基本上我要做的是找到存在的第一个 ContactID，因为这些联系人被继承到子位置。

例如：

```
Test Account
-North
--Michigan - Bob
---Detroit
----Algoma
-South
-East
-West 
```

所以鲍勃将被继承到底特律和阿尔戈马。每个级别都有一个 ID 和一个父 ID，这当然与父 ID 匹配。如果给定 ChildID(Algoma)，我将如何爬上并检查 Algoma 上方的每个级别以查找联系人，直到我到达密歇根州？每个级别只有 1 个联系人。没有固定的结构，因此联系人可能位于子位置，或者在您到达联系人之前可能是 20 级，但在结构上它始终是树上的第一个 1。任何想法都适用。

桌子：

```
ID ParentID LevelName ContactID
1     NULL   TestCo.    NULL
2     3      Algoma     NULL
3     4      Detroit    NULL
4     5      Michigan   2
5     1      North      3
6     1      South      1
7     1      East       3
8     1      West       NULL 
```

传入@ID = 2，它会返回ContactID = 2。这不是每个公司的静态结构，可以有很多更深或更短的层次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T21:01:30.503

递归查询来拯救！
还有一个父母优先的版本：

```
WITH Parent (id, contactId) as (SELECT id, contactId
                                FROM Company
                                WHERE parentId IS NULL
                                UNION ALL
                                SELECT Company.id, 
                                       COALESCE(Company.contactId, 
                                                Parent.contactId)
                                FROM Company
                                JOIN Parent
                                ON Parent.id = Company.parentId)

SELECT *
FROM Parent
WHERE id = 2; 
```

（有一个有效的 SQLFiddle[示例](http://www.sqlfiddle.com/#!3/2c837/6/0)。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T20:58:18.137

使用递归[公用表表达式](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)是解决问题的有效方法。

```
WITH CTE AS
(
    SELECT
        ID,
        ParentID,
        ContactID,
        0 AS depth
    FROM tbl
    WHERE tbl.ID = 2 --Start point

    UNION ALL

    SELECT
        tbl.ID,
        tbl.ParentID,
        tbl.ContactID,
        CTE.depth + 1
    FROM tbl
    JOIN CTE ON CTE.ParentID = tbl.ID
    WHERE CTE.ContactID IS NULL
)
SELECT TOP 1 ContactID
FROM CTE
ORDER BY depth desc 
```

# jquery - 带有 Excel 的 Datatables TableTools，pdf 导出功能不适用于 firefox

> ID：11941689
> 
> 赞同：2
> 
> 时间：2012-08-13T20:21:01.457
> 
> 标签：jquery, datatables

带有 Excel 的 Datatables TableTools，pdf 导出功能不适用于 firefox

我尝试了夜间构建[http://datatables.net/download/build/TableTools.nightly.min.js](http://datatables.net/download/build/TableTools.nightly.min.js)，不同的版本并检查了所有其他帖子，似乎没有什么可以让它在 Firefox 中工作；它在 chrome 和 IE 中运行良好。请给我建议。非常感谢。

这里有更多信息：[http](http://debug.datatables.net/ohiwuy) ://debug.datatables.net/ohiwuy 和 firefox 版本：14.0.1

[http://datatables.net/extras/tabletools/](http://datatables.net/extras/tabletools/)上的示例也不起作用。复制、pdf、excel的选项在加载页面时出现并再次消失。打印选项正在工作。

# c# - BackgroundWorker ShowDialog 导致应用程序停止

> ID：11941690
> 
> 赞同：0
> 
> 时间：2012-08-13T20:21:03.757
> 
> 标签：c#, user-interface, backgroundworker

我一直在尝试在我的应用程序中实现一个 BackgroundWorker，但到目前为止，进展并不顺利。在一个新线程上，我想打开一个新的表单，它有一个进度条和一个标签来报告进度，但是，这不是很好。当我调用 ShowDialog 时，应用程序不再响应。这是因为我的代码是从我的 Form1 运行的，并且我正在显示 WorkingForm？另外，这可以更清洁地实施吗？

```
private void button14_Click(object sender, EventArgs e)
{
    List<object> param = new List<object>();
    object[] objectparams = new object[1];
    objectparams[0] = null;
    Opera opera = new Opera();
    System.Reflection.MethodInfo clearOpera = opera.GetType().GetMethod("ClearOpera");
    param.Add(clearOpera);
    param.Add(opera);
    param.Add(objectparams);
    backgroundWorker1.RunWorkerAsync(param);
}

private void button2_Click_1(object sender, EventArgs e)
{
    Browser.cancelPending = true;
}
private delegate void getnewform();

private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    mainForm main = new mainForm();
    TestURLGUI4.Form1 form = (TestURLGUI4.Form1)Application.OpenForms[0];
    var variab = (bool)form.Invoke(new getnewform(main.AskForConfirmation));
        List<object> param = e.Argument as List<object>;

        List<object> result = new List<object>();
        var method = param[0] as MethodInfo;
        object[] parameters = param[2] as object[];
        if (parameters[0] == null)
        {
            result.Add(method.Invoke(param[1], null));
            result.Add(false);
        }
        else
        {
            result.Add(method.Invoke(param[1], parameters));
            if (parameters.Contains(true))
                result.Add(true);
        }
        int progress = (100 * Browser.progressValue) / Browser.progressMax;

        backgroundWorker1.ReportProgress(progress);

        // If the BackgroundWorker.CancellationPending property is true, cancel
        if (backgroundWorker1.CancellationPending)
        {
            Console.WriteLine("Cancelled");
            Browser.cancelPending = true;
        }
        e.Result = result;
}

private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
        TestURLGUI4.WorkingForm form = (TestURLGUI4.WorkingForm)Application.OpenForms[1];
        form.progressBar1.Value = e.ProgressPercentage;

        form.label1.Text = Browser.progressValue + "/" + Browser.progressMax;
        Application.DoEvents();
}

private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    List<object> param = e.Result as List<object>;
    if (e.Cancelled == false && param.Contains(true))
    {
        Display.DisplayURLs(param[0] as SortableBindingList<URL>);
        TestURLGUI4.WorkingForm form = (TestURLGUI4.WorkingForm)Application.OpenForms[1];
        MessageBox.Show("Done");

    }
    else if (e.Cancelled == false && param.Contains(false))
    {
        TestURLGUI4.WorkingForm form = (TestURLGUI4.WorkingForm)Application.OpenForms[1];
        MessageBox.Show("Done");
    }

}

    public class mainForm
{
public void AskForConfirmation()
{
    TestURLGUI4.Form1 form = (TestURLGUI4.Form1)Application.OpenForms[0];
    var workingForm = new TestURLGUI4.WorkingForm();
    workingForm.ShowDialog(form);
    workingForm.DialogResult = DialogResult.None;

}
} 
```

编辑：好的，我已经根据建议更新了我的代码，现在，这会在 System.Windows.Forms.dll 中产生一个 stackoverflowexception：

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    mainForm main = new mainForm();
    TestURLGUI4.Form1 form = (TestURLGUI4.Form1)Application.OpenForms[0];
        List<object> param = e.Argument as List<object>;
        List<object> result = new List<object>();
        var method = param[0] as MethodInfo;
        object[] parameters = param[2] as object[];
        if (parameters[0] == null)
        {
            result.Add(method.Invoke(param[1], null));
            result.Add(false);
        }
        else
        {
            result.Add(method.Invoke(param[1], parameters));
            if (parameters.Contains(true))
                result.Add(true);
        }
        int progress = (100 * Browser.progressValue) / Browser.progressMax;

        backgroundWorker1.ReportProgress(progress);

        // If the BackgroundWorker.CancellationPending property is true, cancel
        if (backgroundWorker1.CancellationPending)
        {
            Console.WriteLine("Cancelled");
            Browser.cancelPending = true;
        }
        e.Result = result;

}

private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    TestURLGUI4.Form1 form1 = (TestURLGUI4.Form1)Application.OpenForms[0];
    if (Application.OpenForms.Count >= 2)
    {
        TestURLGUI4.WorkingForm form2 = (TestURLGUI4.WorkingForm)Application.OpenForms[1];
        form2.progressBar1.Value = e.ProgressPercentage;

        form2.label1.Text = Browser.progressValue + "/" + Browser.progressMax;
        Application.DoEvents();
    }
    else if(Application.OpenForms.Count == 1)
    {
        var workingForm = new TestURLGUI4.WorkingForm();
        workingForm.ShowDialog(form1);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T20:25:40.363

a 的目的`BackgroundWorker`是调用另一个线程（不是 UI 线程）上的代码。通过调用`Invoke`该`DoWork`方法，您完全绕过了`BackgroundWorker`. 在启动 worker 之前完成所有 UI 工作。如果您需要在工作人员工作*时*`ProgressChanged`与用户交互，请在处理程序中进行 - 它在 UI 线程上运行，您不需要`Invoke`在`ProgressChanged`.

通过调用 UI 工作`DoWork`，您将面临死锁的风险，这将挂起您的程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T20:22:20.713

你不能在其他线程上运行 UI。必须在主线程上。

在启动新线程之前实例化 UI。在新线程中，对要使用的控件使用跨线程调用方法。看这里例如[http://msdn.microsoft.com/en-us/library/ms171728.aspx](http://msdn.microsoft.com/en-us/library/ms171728.aspx)

# string - 如何在matlab中替换字符串的一部分

> ID：11941691
> 
> 赞同：1
> 
> 时间：2012-08-13T20:21:04.127
> 
> 标签：string, matlab

我有一个字符串矩阵，里面充满了类似的数据

```
matrix = ['1231231.jpeg','4343.jpeg',...] 
```

我想删除它的文件扩展名并得到

```
matrix  = ['1231231', '4343'] 
```

我该怎么做？有什么功能或什么:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T20:24:37.530

用户文件部分，它返回文件的`path`、`name`和三个变量`extension`。所以这应该适合你

```
[~, fName, ext] = fileparts(fileName) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T20:23:18.730

在matlab中有一个函数

[http://www.mathworks.com/help/techdoc/ref/fileparts.html](http://www.mathworks.com/help/techdoc/ref/fileparts.html)

```
file = 'H:\user4\matlab\classpath.txt';
[pathstr, name, ext] = fileparts(file)

pathstr =
H:\user4\matlab

name =
classpath

ext =
.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T20:45:11.493

假设矩阵看起来像

```
 matrix = ['1231231.jpeg';
           '4343.jpeg';
            ....]; 
```

（; 代替 ，）。如果使用 ','，矩阵中的字符会自动连接。

您可以使用`arrayfun`对矩阵的每个索引执行操作。以下命令应该可以工作

```
arrayfun(@(x) matrix(x,1:strfind(a(matrix,:),'.jpeg')-1), str2num(matrix(:,1))', 'UniformOutput' , false) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T20:57:21.180

您总是可以遍历它们并像这样解析它们：

```
r[i] = regexp(char(string), '(?<dec>\d*).(?<ext>\w*)', 'names'); 
```

使用 r[i].dec 作为数值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-13T22:39:25.540

注意：来自（垂直）不同长度字符串串联的矩阵将不起作用（等长字符串的特殊情况除外）。`vertcat`调用时，每个字符都被视为单个矩阵元素`[A;B].`

或者，使用元胞数组和`cellfun`（+独立于文件扩展名）：

```
matrix = {'1231231.jpeg','4343.jpeg'};
matrix_name = cellfun(@(x) x(1:find(x == '.', 1, 'last')-1), matrix, 'UniformOutput', false); 
```

# bash - 在 Unix 中运行作业

> ID：11941693
> 
> 赞同：2
> 
> 时间：2012-08-13T20:21:33.673
> 
> 标签：bash, unix

我有以下小脚本 - myjob.qsub：

```
#!/bin/sh -login
#PBS -l walltime=00:15:00
#PBS -l nodes=1:ppn=1
#PBS -l mem=2gb 
#PBS -N myrun05168
/myexecutable >mylog.log 
```

我确实通过以下方式使其可执行：

```
chmod u+x myexecutable 
```

当我尝试通过将目录更改为可执行文件的文件夹来运行然后提交作业时：

```
qsub myjob.qsub 
```

给我没有 /myexecutable 文件或目录的错误。

我尝试使用“./”：

```
 #!/bin/sh -login
     #PBS -l walltime=00:15:00
      #PBS -l nodes=1:ppn=1
      #PBS -l mem=2gb 
     #PBS -N myrun05168
    ./myexecutable >mylog.log 
```

但没有帮助。

当我试图在命令行中运行我的可执行文件时，它可以工作：

```
./myexecutable 
```

由于我无法运行此作业，因为此作业需要作为群集计算机中的作业提交。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:49:36.220

您的脚本使用 -login 运行，需要吗？

您应该更改脚本以使用相对路径名，例如

```
myruns/p_runs/Fw2010/seed1/myexecutable >mylog.log 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T20:24:33.690

您需要提供脚本的完整路径，我假设脚本实际上不在您的根目录中，也许它应该是 /home/username/myexecutable

# enterprise-architect - 如何在 Enterprise Architect 中调整 UML 图的打印比例？

> ID：11941695
> 
> 赞同：5
> 
> 时间：2012-08-13T20:21:45.340
> 
> 标签：enterprise-architect

我有一个 54 页的 UML 图要打印。我想缩小图像大小或页面大小，以便打印不超过 12 页？有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T20:38:00.307

1.  打开图表
2.  使用图表->属性
3.  在图表选项卡上，单击页面设置下的“高级...”
4.  单击“自定义”单选按钮并选择宽高页数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:07:09.100

您也可以CTRL+A 标记全部，然后将其完整粘贴到例如Word 中。

这有效，您可以使用所有调整大小/等。来自 word 的选项。

# asp.net-mvc - DriverResult Editor 在 Orchard 中渲染自定义模板

> ID：11941696
> 
> 赞同：0
> 
> 时间：2012-08-13T20:21:45.753
> 
> 标签：asp.net-mvc, c#-4.0, orchardcms

我正在处理这个模块（[扩展注册](http://extendedregistration.codeplex.com/)）。此模块提供了一种在注册中显示自定义用户字段的简单方法。覆盖 AccountController 表单用户并在注册模板中加载编辑器模板

帐户控制器

```
 var shape = _orchardServices.New.Register();

        var user = _orchardServices.ContentManager.New("User");
        if (user != null) {
            shape.UserProfile= _contentManager.BuildEditor(user);
        }

        return new ShapeResult(this, shape); 
```

注册.cshtml

```
 </div>
    @if (Model.OERegister != null) {
        <fieldset>
            @Display(Model.UserProfile)
        </fieldset>
    }
    <div> 
```

这里的形状是编辑器模板（EditorTemplate/Parts/template）

它工作得很好，但我需要从注册表单中隐藏一些字段。

我有点迷失在这里，我想以最Orchish的方式来做。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:22:32.933

据我了解，这里的问题是如何通常隐藏表单中的某些字段。

根据表单代码的作者如何设计它或您是否是开发人员，有多种方法：

*   将表单的各个部分设置为单独的形状，并在来自驱动程序的组合驱动程序结果中返回它们的工厂。这意味着，通过为部件编辑器提供形状来构建表单的一部分的驱动程序将注册多个形状（这类似于 BodyPartDriver.Display() 所做的：它返回三个单独的形状注册）。现在这些可以通过放置单独控制，因此您也可以隐藏它们。
*   如果您无法很好地控制表单的构建方式，您仍然可以覆盖包含要隐藏的字段的形状模板。然后在覆盖中您可以自由自定义表单的外观。请注意，与第一个解决方案不同，这不会自动阻止用户将隐藏字段的数据发布到服务器，从而将其保存。

顺便说一句，我认为 ContentManager.New() 永远不会返回 null。即使内容类型不是静态定义的（即从迁移或通过 ContentDefinitionManager 创建），它也会返回一个内容项。

# .net - 使用 .NET 解析 MYSAPSSO2 登录令牌

> ID：11941698
> 
> 赞同：1
> 
> 时间：2012-08-13T20:21:48.477
> 
> 标签：.net, sap

通过阅读 SAP 社区网络上的一篇旧[博](http://scn.sap.com/people/siddhartha.jain/blog/2005/10/25/reading-netweaver-portal-s-logon-ticket--mysapsso2-cookie-in-bsp-applications)文，我发现了一些关于解析 MYSAPSSO2 登录令牌的用户名和系统 ID 的说明。

我很好奇是否有人偶然发现了一个 .NET 库来获取这些信息而无需自己编写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T09:06:51.390

注意：此方法有时会失败，具体取决于票证字符串的格式。

```
void SetUserNameFromTicket1(string Ticket)
{
    this.UserName = string.Empty;
    try
    {
        // Decoded Ticket "1100 \0portal:USERNAME1(char65533)\0basicauthentication\0\nUSERNAME2\0000\..."
        string TicketData = this.base64Decode(ticket);
        MessageBox.Show(strTicketData);
    }
    catch (Exception ex)
    {
        mobjLog.Debug("Exception in GetUserNameFromTicket: " + ex.Message);
    }
}
private string base64Decode(string data)
{
    string result = string.Empty;
    try
    {
        data = System.Web.HttpUtility.UrlDecode(data); 
        System.Text.UTF8Encoding encoder = new System.Text.UTF8Encoding();
        System.Text.Decoder utf8Decode = encoder.GetDecoder();
        // if base64 were to be embedded in a URL, the use of the forward slash would be interpreted as a URL divider rather than
        // part of the base64\. As a result, other characters such as dash (-), underscore (_), period
        // (.), colon (:) and exclamation point (!) are used in some implementations.
        // http://www.sans.org/reading_room/whitepapers/auditing/base64-pwned_33759
        // base64-pwned_33759.pdf
        data = data.Replace('-', '/');
        data = data.Replace('_', '/');
        data = data.Replace('.', '/');
        data = data.Replace(':', '/');
        data = data.Replace('!', '/');
        byte[] todecode_byte = Convert.FromBase64String(data);
        int charCount = utf8Decode.GetCharCount(todecode_byte, 0, todecode_byte.Length);
        char[] decoded_char = new char[charCount];
        utf8Decode.GetChars(todecode_byte, 0, todecode_byte.Length, decoded_char, 0);
        result = new String(decoded_char);
    }
    catch (Exception ex)
    {
        mobjLog.Debug("Error in base64Decode" + ex.Message);
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T07:03:18.923

您应该考虑使用 SAP SSO EXT Lib (SAPSSOEXT - (SAP note 1040335)) 来解析登录票据详细信息。它是 SAP 的官方标准库，用于解析 SAP/Portal 登录票据。它可用于 C、Java 和 .NET 应用程序。

更多信息
[SAP SSO Authentication with verify.pse 使用 SAPSSOEXT](http://wiki.sdn.sap.com/wiki/display/ERPHCM/SAP+SSO+Authentication+with+verify.pse+using+SAPSSOEXT)

# sql - 数据库规范化 - 一些问题

> ID：11941702
> 
> 赞同：0
> 
> 时间：2012-08-13T20:22:02.707
> 
> 标签：sql, database, database-design, normalization

我正在为 Uni 完成一些工作，并有一个数据表，我需要将其排列为第一、第二和第三范式，我试图在下面这样做，但我已经遇到了障碍。

我会很感激任何有用的意见，因为我的导师正在度假，我不想使用错误的表格/关系开始其余的工作。

基本上，该系统应该允许用户添加电影、导演和演员。允许多个用户查看电影并按类型对电影进行分类。

### 联合国基金会

```
**filmID**
title
directorID
categoryID
categoryName
notes
directorName
actorName
actorID
role
userID
userName
reviewDate
reviewText 
```

### 1NF

```
**filmID**
title
notes

**directorID**
directorName

**categoryID**
categoryName

**actorID
filmID***
actorName
role

**userID**
userName

**filmID*
userID***
reviewDate
reviewText 
```

### 2NF

```
**filmID**
title
notes

**directorID**
directorName

**categoryID**
categoryName

**actorID**
actorName

**actorID
filmID***
role

**userID**
userName

**filmID*
userID***
reviewDate
reviewText 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:31:11.967

你会在 Stack Overflow 上发现人们不会为你回答你的作业。

但是，这里有一个非常好的教程的链接。

[规范化教程](http://phlonx.com/resources/nf3/)

如果您自己完成并完成它，而不是从这里复制和粘贴答案，您会更好地理解它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T20:35:35.113

这里有一些问题要问你...

*   演员也能当导演吗？
*   一部电影可以有多个导演吗？
*   用户可以多次评论一部电影吗？
*   流派是预定义的吗？
*   一个演员可以在一部电影中扮演多个角色吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T20:51:49.220

完全有可能满足第二范式标准的数据库也满足第三范式标准。看起来就是这种情况。

# ios - ios - 如何创建一个包含大量文本和按钮的屏幕而不使用 UIWebView

> ID：11941703
> 
> 赞同：1
> 
> 时间：2012-08-13T20:22:06.713
> 
> 标签：ios, cocoa-touch, uikit

我不能使用`UIWebView`，因为我希望即使用户的手机没有 Internet 访问权限，也可以访问文本。此外，我需要在应用程序的其他屏幕上设置按钮，我认为这是不可能的`UIWebView`（对吗？）

有没有办法让我直接在 Xcode 中编辑屏幕的 xml？我的要求是在每个部分之前有大约 10 个带有标题标签和按钮的部分，所以如果我必须在情节提要屏幕上对其进行调整，那将是一场噩梦。

对我来说什么是合理的方法？我认为只能手动编辑 xml 并使用样式和文本对其进行硬编码，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:31:58.893

这里有几件事：

1.  如果您正在下载视图的内容，webviews 只需要互联网连接（这看起来不像您想要的，您不是只是在本地构建它吗？）

2.  你可以让 webview 中的按钮做任何你想做的事情。看到[这个](https://stackoverflow.com/questions/5920102/custom-buttons-on-uiwebviewiphone)答案。

3.  这个 UI 有什么复杂的地方，以至于你不能在代码或 IB 中以常规方式构建它？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T20:32:31.320

仅仅因为您考虑使用`UIWebView`它并不意味着您将应用程序功能限制为互联网访问。

您也可以在 Web 视图中显示的应用程序包中包含 HTML 文档。这基本上就是PhoneGap正在做的事情。

如果您不想使用 webviews，那么没有什么能阻止您使用`UIViews`,`UILabels`等`UIImageViews`并按照您的意愿编写您的应用程序。

# c - gtk3新的Height-for-width Geometry Management方法的实现

> ID：11941707
> 
> 赞同：1
> 
> 时间：2012-08-13T20:22:16.437
> 
> 标签：c, gtk, gtk3

继续我之前的问题

[在固定容器上拖放会改变其大小](https://stackoverflow.com/questions/11925643/drag-and-drop-on-a-fixed-container-changes-its-size)

我遵循了 ergosys 的建议，并阅读了他提供的链接中的信息。
如果我理解正确的话，新的声明方式

```
/* LEFT FRAME */

frame1= gtk_frame_new(NULL);
gtk_table_attach(GTK_TABLE(table), frame1, 0,14,0,49,GTK_SHRINK,GTK_SHRINK,0,0);
gtk_widget_set_size_request(frame1, 360,570); 
```

是（暂时忽略高度）

```
static void
my_widget_get_preferred_width (GtkWidget *widget,
                               gint      *minimal_width,
                               gint      *natural_width)
{
  GtkRequisition requisition;

  gtk_widget_get_requisition (widget, &requisition);

  *minimal_width = *natural_width = requisition.width;
}

....

/* LEFT FRAME */

frame1= gtk_frame_new(NULL);
gtk_table_attach(GTK_TABLE(table), frame1, 0,14,0,49,GTK_SHRINK,GTK_SHRINK,0,0);

gint min_width=360;
gint nat_width=360;

GTK_WIDGET_GET_CLASS(frame1)->get_preferred_width=my_widget_get_preferred_width;
my_widget_get_preferred_width(frame1,&min_width,&nat_width); 
```

它编译好，但是，运行时，它给了我这个错误：

```
(conky_companion:19700): Gtk-WARNING **: GtkFrame 0xa00e660: widget tried to     gtk_widget_get_width inside  GtkWidget     ::get_width implementation. Should just invoke GTK_WIDGET_GET_CLASS(widget)->get_width directly rather than using gtk_widget_get_width 
```

没有绘制窗口，一段时间后它会出现段错误。

我在这里想念什么？
或者，TL；DR，相当于

```
gtk_widget_set_size_request(frame1, 360,570); 
```

在gtk3？

# php - json解码错误 - Facebook

> ID：11941709
> 
> 赞同：0
> 
> 时间：2012-08-13T20:22:27.587
> 
> 标签：php, facebook, facebook-graph-api, json

我有这段代码：-

```
<?php 
$xml = file_get_contents("http://graph.facebook.com/fql?q=SELECT%20url,%20normalized_url,%20share_count,%20like_count,%20comment_count,%20total_count,%20commentsbox_count,%20comments_fbid,%20click_count%20FROM%20link_stat%20WHERE%20url='http://www.facebook.com/nokia'");
echo $xml;
$obj = json_decode($xml);
print $obj;
print $obj->{'like_count'};
?> 
```

它给了我以下错误： -

```
{"data":[{"url":"http:\/\/www.facebook.com\/nokia","normalized_url":"http:\/\/www.facebook.com\/nokia","share_count":1240,"like_count":8622663,"comment_count":287,"total_count":8624190,"commentsbox_count":2,"comments_fbid":404897301238,"click_count":10}]}
Catchable fatal error: Object of class stdClass could not be converted to string in C:\xampp\htdocs\nokia_app\test.php on line 5 
```

我怎样才能纠正它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:27:59.107

在提出此类问题之前，您需要研究 API 返回的内容。

```
$xml = file_get_contents("http://graph.facebook.com/fql?q=SELECT%20url,%20normalized_url,%20share_count,%20like_count,%20comment_count,%20total_count,%20commentsbox_count,%20comments_fbid,%20click_count%20FROM%20link_stat%20WHERE%20url='http://www.facebook.com/nokia'");
$obj = json_decode($xml);
var_dump($obj->data[0]->{'like_count'}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T20:31:36.990

如果您确实需要处理数组中的数据，请尝试以下操作：

```
class ObjectToArray {
    public static function convert( $object ) {
    if( !is_object( $object ) && !is_array( $object ) ) {
        return $object;
    }

    if( is_object( $object ) ) {
        $object = get_object_vars( $object );
    }

    return array_map( 'ObjectToArray::convert', $object );
     }
}

$aData = ObjectToArray::format($theObject);

print_r($aData); 
```

# vb.net - 将长字符串转换为传入 URL 的代码

> ID：11941710
> 
> 赞同：-1
> 
> 时间：2012-08-13T20:22:27.870
> 
> 标签：vb.net, asp.net-mvc-3

我正在尝试获取像“Hello my name is Nick”这样的字符串并将其转换为“Hello+my+name+is+Nick”以通过 URL 传递。这可以通过用 + char 替换所有空格来轻松完成，但是我还需要用它们的 ASCII 值替换所有特殊字符（. , ! &）。我已经搜索了网络，但找不到任何东西。我想知道是否有人知道现有代码可以将其作为一项相当常见的任务来执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:34:43.480

我认为您正在寻找这个：[HttpUtility.UrlEncode Method (String)](http://msdn.microsoft.com/en-us/library/4fkewx0t.aspx) 处理不符合 URL 的字符和空格。

# c# - 使用字符串数组作为值更新数据表

> ID：11941714
> 
> 赞同：0
> 
> 时间：2012-08-13T20:22:43.473
> 
> 标签：c#, database, string, datatable, arrays

我有一个问题，我试图用字符串数组中的值更新数据表的列，然后将这些更新提交到数据库。我已经调试过了，认为有错误，但没有抛出异常。

我还设置了我的适配器的 select 语句和连接，以便我可以修改最初触发事件时重新调整的数据。

这是我的代码（_updateParams 字符串数组包含我试图更新表和数据库的值）。

```
DataSet ds = new DataSet("SearchedRecord");
        using (OracleConnection oc = new OracleConnection(DBConnection))
        {
    try
            {
                oc.Open();

                OracleDataAdapter adap = new OracleDataAdapter(@"SELECT * FROM NEW_DATABASE", oc);
                adap.FillSchema(ds, SchemaType.Source, "NEW_DATABASE");
                adap.Fill(ds, "NEW_DATABASE");

                OracleCommandBuilder bld = new OracleCommandBuilder(adap);

                DataTable dt = ds.Tables["NEW_DATABASE"];
                dt.PrimaryKey = new DataColumn[] { dt.Columns["ID"] };
                int key = int.Parse(dt.Rows[0]["ID"].ToString());

                DataRow dr;
        dr = dt.Rows.Find(key);

                dr.BeginEdit();
                for (int i = 0; i < _updateParams.Length; i++)
                {
                    dr[0] = i.ToString();
                }
                dr.EndEdit();
                dr.AcceptChanges();
                dt.AcceptChanges();

                adap.Update(ds, "NEW_DATABASE");
                adap.UpdateCommand = bld.GetUpdateCommand();
                adap.UpdateCommand.ExecuteNonQuery();
                adap.UpdateCommand.Transaction.Commit();
            }catch (Exception x)
            {
                x.Message.ToString();
            }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T03:06:50.863

好吧，首先，当您添加字符串的值时，您实际上并没有这样做：

```
for (int i = 0; i < _updateParams.Length; i++){
    dr[0] = i.ToString(); //You need to change this to _updateParams[i].ToString();
                          //And also concatenate it with "+" for example
} 
```

而且，我不确定您使用的是什么语言（假设是一些基于 .Net 的 C#），但是这个“dr [0]”不应该是这样的“dr（'YourColumName'）”，所以在最后你的代码应该是这样的：

```
String tmp = "";
for (int i = 0; i < _updateParams.Length; i++){
    tmp = tmp + _updateParams[i].ToString(); //The ToString is not needed if the _updateParams is a String array already
}

dr("YourColumnName") = tmp; 
```

希望它有帮助，但如果没有，请**删除您的 try catch 语句以查看**它抛出的错误并指定您使用的语言。

# php - 如何解决未定义的索引

> ID：11941716
> 
> 赞同：0
> 
> 时间：2012-08-13T20:22:55.980
> 
> 标签：php, mysql, html, database, phpmyadmin

我的数据库中有一个错误。据说代码中的第 41 行到第 50 行有未定义的索引。在我的网站中，我尝试将表单中的数据插入到 PhpMyAdmin 数据库中，除此之外一切正常。 ..

错误是：注意：未定义索引：第 41 - 50 行 C:\xampp\htdocs\ers\Database.php 中的服务

数据库.php：

```
<html>
<body>
<?php
$con = mysql_connect("localhost","root","123");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

// some code

?>

<table border="1">
    <tr >
        <td>Finding</td>
        <td>ServiceType</td>
        <td>Title</td>
        <td>RootCause</td>
        <td>RiskRating</td>
        <td>Impact</td>
        <td>Efforts</td>
        <td>Likelihood</td>
        <td>Finding</td>
        <td>Implication</td>
                <td>Recommendation</td>
                        <td>Report</td>
    </tr>

<?php

mysql_select_db ( "ers_1", $con);
$sql="INSERT INTO findings (ServiceType_ID, Title, RootCause_ID, RiskRating_ID, Impact_ID, Efforts_ID, Likelihood_ID, Finding,Implication,  Recommendation, Report_ID) VALUES (

    '$_POST[Services]',
    '$_POST[title]',
    '$_POST[RootCause]',
    '$_POST[RiskRating]',
    '$_POST[impact]',
    '$_POST[Efforts]',
    '$_POST[likelihood]',
    '$_POST[Finding]',
    '$_POST[Implication]',
    '$_POST[Recommendation]',
    '1'
    )";

$result = mysql_query("SELECT * FROM findings");

while($row = mysql_fetch_assoc($result)) 
  {
  echo "<tr>";
  echo "<td>" . $row['Finding_ID'] . "</td>";                                           
  echo "<td>" . $row['ServiceType_ID'] . "</td>";
  echo "<td>" . $row['Title'] . "</td>";
  echo "<td>" . $row['RootCause_ID'] . "</td>";
  echo "<td>" . $row['RiskRating_ID'] . "</td>";
  echo "<td>" . $row['Impact_ID'] . "</td>";
   echo "<td>" . $row['Efforts_ID'] . "</td>";
    echo "<td>" . $row['Likelihood_ID'] . "</td>";
    echo "<td>" . $row['Finding'] . "</td>";
    echo "<td>" . $row['Implication'] . "</td>";

    echo "<td>" . $row['Recommendation'] . "</td>";
    echo "<td>" . $row['Report_ID'] . "</td>";
  //echo "<td><a href='edit.php'>[EDIT]</a> <a href='delete_risk.php?risk_no=" . $row['risk_no'] . "'>[DELETE]</a></td>";
  echo "</tr>";
  }

mysql_close($con);
?> 

<input type="button" value="Back" onclick="window.location.href='option_Frame.php'" />

</body>
</html 
```

>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:25:02.783

听起来 $_POST['Services'] 没有发布，而不是数据库问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T20:26:54.607

检查您的 HTML；可能没有输入元素`name="Services"`。

# java - SPNEGO：未在 GSS-API 级别指定故障（机制级别：校验和失败）

> ID：11941717
> 
> 赞同：2
> 
> 时间：2012-08-13T20:23:05.983
> 
> 标签：java, jboss, spnego

我正在尝试使用 SPNEGO + JBoss 7 + Windows 2008 R2 + JDK 7，但我遇到了这个异常：

```
Unable to authenticate - Failure unspecified at GSS-API level
  (Mechanism level: Checksum failed) 
```

我创建了密钥表：

```
ktpass -ptype KRB5_NT_PRINCIPAL -crypto All -princ HTTP/win2008@TEST.COM
  -mapuser win2008 -pass *** -out krb5.keytab 
```

任何想法为什么我会收到此错误以及如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:28:07.647

我可以通过以下网址解决：[https ://community.jboss.org/wiki/ConfiguringJBossNegotiationInAnAllWindowsDomain](https://community.jboss.org/wiki/ConfiguringJBossNegotiationInAnAllWindowsDomain)

但是当我执行 ktpass 时，我包含了以下参数：

```
-ptype KRB5_NT_PRINCIPAL -crypto All
ktpass -ptype KRB5_NT_PRINCIPAL -crypto All -princ  HTTP/win2008.mydomain.com@MYDOMAIN.COM -pass *** -mapuser MYDOMAIN\user_name 
```

接着：

```
ktab -k krb5.keytab -n 0 -a HTTP/win2008.mydomain.com@MYDOMAIN.COM 
```

# html - 自定义 CSS 图像悬停状态

> ID：11941726
> 
> 赞同：0
> 
> 时间：2012-08-13T20:23:32.803
> 
> 标签：html, css, image, hover, hyperlink

我遇到了一些问题。我有一个菜单列表，我在其中为列表项自定义了一些图像悬停状态。在我需要更改菜单项（列表项文本长度等）之前，这工作得非常好。每次发生变化时，我都必须返回并重新制作所有图像。

以下是我正在尝试完成的一些图像：

![在此处输入图像描述](../Images/e0f28980304a9c455e5e52bbb3d58d3d.png)

![在此处输入图像描述](../Images/fda416d90f3c0f12173362f3729f2b4a.png)

基本上，悬停添加了红色背景和旋转了约 2 度的红色区域的副本，并且颜色较浅。是否可以通过 CSS`:after`和来做到这一点`transform: rotate()`？如果不是，那么对于不同的字长实现这种效果的好方法是什么？

提前谢谢！

特雷

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T20:46:33.630

正如您所说，这可以通过转换轻松完成。不过，您需要在每个按钮中有两个元素，一个用于文本，一个用于倾斜背景：

```
<div class="menu-button">
    <div class="text">Screenings</div>
    <div class="hover-bg"></div>
</div> 
```

并为`.hover-bg`类设置如下样式：

```
#menu .menu-button:hover .hover-bg
{
    z-index: 1;
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    background-color: rgba(220, 50, 50, 0.4);
    transform: rotate(2deg) scale(1.05, 1);
    transform-origin: center right;
}​ 
```

[这是一个关于 JSFiddle 的例子](http://jsfiddle.net/LukAB/2/)

[这是一个让我玩转转折的例子](http://jsfiddle.net/LukAB/4/)。由于懒惰，我只费心让它在 Webkit 中工作，即 Chrome 和 Webkit。

请注意，为了实现跨浏览器兼容性，您需要供应商特定的属性前缀（`-webkit-`、`-moz-`等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T21:56:15.160

这可以在纯 CSS（*甚至不是 3*）中完成。

悬停时有一个倾斜的背景图像，将其放置在左侧和顶部几个像素处并添加背景颜色。

由于背景颜色的原因，您只会看到图像的一部分：

```
<div class="text">Screenings</div>

.text {
  color: #000;
  margin-left: 5px;/*to make room for the hover image */
  padding: 4px;
}
.text:hover {
  background: #900 url(tiltedimage.png) no-repeat -5px -5px;
  color: #fff;
} 
```

这将为您指明解决方案。

# android - 如何为 Activity 转换的单个视图设置动画？

> ID：11941728
> 
> 赞同：3
> 
> 时间：2012-08-13T20:23:56.073
> 
> 标签：android, android-layout, android-animation, android-view

切换活动时如何在单个视图上触发动画？即，如果用户单击一个按钮转到下一页，我希望我的一些视图飞出屏幕，并让背景交叉淡入淡出到下一个屏幕，而不是让整个屏幕作为一个整体进行动画处理。

这可能吗？如果是这样，应该怎么做？（我使用的是最新的 API 4.1，它不必向后兼容）

编辑：目前，通过在 onResume() 中调用它来进行过渡动画效果很好，但是当我按下返回时，活动的切换速度比在 onPause() 中启动的任何动画都快，所以这让我觉得有更好的方式/地方去做这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T19:26:14.923

> 覆盖 onResume() 可以正常工作，但 onPause/onStop 在移动到下一个屏幕之前不要等待动画完成。

什么开始事件前。按钮单击需要在调用启动活动之前启动动画。

```
button.setOnClickListener(new ViewOnClickListener() {

    @Override
    void onClick(... {

        // start animations
        // wait till they are finished
        // start activity
    }
}); 
```

由于启动新活动的每个事件都将具有动画代码，我还建议将其移动到某种帮助程序类中，以避免到处都有重复的代码。前任。

```
button1.setOnClickListener(new ViewOnClickListener() {

    @Override
    void onClick(... {

        helper.AnimateViews(/* probably pass activity or context */); 

        // start activity
    }
});

button2.setOnClickListener(new ViewOnClickListener() {

    @Override
    void onClick(... {

        helper.animateViews(/* probably pass activity or context */); 

        // start activity
    }
});

public class ViewAnimiationHelper {

    public void animateViews(Activity activity) {

        // find all views if not found then don't animate them
        View view1 = activity.findViewById(R.id.view1);

        if(view1 != null) {

            // animate view
        }

        View view2 = activity.findViewById(R.id.view1);

        if(view2 != null) {

            // animate view
        }
    }
} 
```

这都是 sudo java 代码，但希望足以让您明白这一点。祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T20:34:23.823

当您在这样的活动之间切换时，您可以设置动画（如幻灯片）：

1.  在 res 文件夹中，创建一个 anim 文件夹
2.  例如，为幻灯片放置两个 xml 文件。

幻灯片输入.xml

```
 <set xmlns:android="http://schemas.android.com/apk/res/android"
         android:shareInterpolator="false">
        <translate android:fromXDelta="100%" android:toXDelta="0%"
          android:fromYDelta="0%" android:toYDelta="0%"
         android:duration="200"/>
  </set> 
```

slie_out.xml

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
         android:shareInterpolator="false">
      <translate
       android:fromXDelta="100%" android:toXDelta="0%"
       android:fromYDelta="0%" android:toYDelta="0%"
       android:duration="200" />
    </set> 
```

1.  然后在你的java代码上写这个：

    ```
    Intent i = new Intent(YourActivity.this, OtherActivity.class);
        this.startActivity(i);
        overridePendingTransition(R.anim.slide_in, R.anim.slide_out); 
    ```

如果您在真实设备上进行测试，请不要忘记让它播放动画（设置 -> 显示 -> 动画 -> 所有动画）

希望能帮助到你 ！：）

# perl - 如何将各种尺寸的 TIFF 文件转换为页面大小为 8.5″×11″ 的统一大小的 PDF 文件而不损失质量？

> ID：11941729
> 
> 赞同：2
> 
> 时间：2012-08-13T20:23:58.447
> 
> 标签：perl, pdf, image-processing, imagemagick, libtiff

目前，我正在尝试使用 Perl/ImageMagick 和/或 Ghostscript 将存储为 TIFF 的扫描文本文档转换为 8.5″×11″（[ANSI A “Letter”大小](http://enwp.org/ANSI/ASME_Y14.1)）的 PDF 文件。

我已经尝试了许多调整大小的 ImageMagick 过滤器，但仍然发现一些以前完全清晰的文件现在变得难以辨认。这些图像通常为 72 dpi，当转换为 8.5″×11″ 时，最终会得到 612×792 像素。原件为1700×2200；如您所见，在重新调整大小时丢失了相当多的像素。

除了调整大小，我还应该使用其他东西吗？会不会像 ImageMagick 报告图像是 72 dpi 而实际上是 200 dpi？将图像重新采样到适合 8.5 英寸×11 英寸区域的最高 dpi 会有帮助吗？

有没有人有任何其他选择来最终创建一个所有页面都是 8.5″×11″ 的 PDF 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T21:29:50.823

**(Mantra: 'Use the right tool for the job...')**

You possibly shouldn't use ImageMagick for the job, but rather LibTIFF's `tiff2pdf` commandline utility:

```
tiff2pdf          \
    -z            \
    -o output.pdf \
    -p letter     \
    -F            \
     input.tiff 
```

`-z` is for (lossless) Zip/Flate compression.
`-o` defines the output filename.
`-p` sets the media size.
`-F` fills the page.

# iphone - 尝试用 Cocos2d 2.X 实现径向重力

> ID：11941731
> 
> 赞同：1
> 
> 时间：2012-08-13T20:24:01.613
> 
> 标签：iphone, ios, cocos2d-iphone, gravity, game-development

我正在尝试学习如何对特定对象实施径向重力，我正在使用（http://www.vellios.com/2010/06/11/radial-gravity-w-box2d-source/）上的教程，但是本教程是用旧版本的 Cocos2d 编写的。我已尽力修复它。如果有人能指出我正确的方向，我将不胜感激。这是我到目前为止所拥有的。我评论了我遇到问题的地方。谢谢你。

HelloWorldLayer.h

```
#import <GameKit/GameKit.h>

// When you import this file, you import all the cocos2d classes
#import "cocos2d.h"
#import "Box2D.h"
#import "GLES-Render.h"

#define PTM_RATIO 32

// HelloWorldLayer
@interface HelloWorldLayer : CCLayer <GKAchievementViewControllerDelegate, GKLeaderboardViewControllerDelegate>
{
    b2World* world;                 // strong ref
    GLESDebugDraw *m_debugDraw;     // strong ref
}

// returns a CCScene that contains the HelloWorldLayer as the only child
+(CCScene *) scene;

@end 
```

HelloWorldLayer.mm

```
// Import the interfaces
#import "HelloWorldLayer.h"

// Needed to obtain the Navigation Controller
#import "AppDelegate.h"
#define PTM_RATIO 32

#define kRADIAL_GRAVITY_FORCE 250.0f
enum {
    kTagParentNode = 1,
    kTagTileMap = 1,
    kTagSpriteSheet = 1,
    kTagAnimation1 = 1,
};

#pragma mark - HelloWorldLayer

@interface HelloWorldLayer()
-(void) initPhysics;
-(void) addNewSpriteAtPosition:(CGPoint)p;
-(void) createMenu;
@end

@implementation HelloWorldLayer

+(CCScene *) scene
{
    // 'scene' is an autorelease object.
    CCScene *scene = [CCScene node];

    // 'layer' is an autorelease object.
    HelloWorldLayer *layer = [HelloWorldLayer node];

    // add layer as a child to scene
    [scene addChild: layer];

    // return the scene
    return scene;
}

-(id) init
{
    if( (self=[super init])) {
        // enable events
        self.isTouchEnabled = YES;
        self.isAccelerometerEnabled = YES;

        CGSize screenSize = [CCDirector sharedDirector].winSize;
        CCLOG(@"Screen width %0.2f screen height %0.2f",screenSize.width,screenSize.height);

        b2Vec2 gravity;
        gravity.Set(0.0f, -10.0f);

        // This will speed up the physics simulation
        bool doSleep = true;

        // Construct a world object, which will hold and simulate the rigid bodies.
        world = new b2World(gravity);
        world->SetAllowSleeping(doSleep);
        world->SetContinuousPhysics(true);

        //Set up sprite

        CCSprite *sheet = [CCSprite spriteWithFile:@"blocks.png"];
        [self addChild:sheet z:0 tag:kTagSpriteSheet];

    [self addNewSpriteAtPosition:ccp(screenSize.width/2, screenSize.height/2)];

     //ERROR Use of undeclared identifier 'CCLabel'
    //ERROR Use of undeclared identifier 'label'    
       CCLabel *label = [CCLabel labelWithString:@"Tap Screen" fontName:@"Marker Felt" fontSize:32];
        // ERROR Use of undeclared identifier 'label'   
        [self addChild:label z:0];
        //ERROR Use of undeclared identifier 'label'
        [label setColor:ccc3(0,0,255)];
        //ERROR Use of undeclared identifier 'label'
        label.position = ccp( screenSize.width/2, screenSize.height-50);

        // Create our static "Planet" - Nick
        b2CircleShape shape;
        shape.m_radius = 1.0f;
        shape.m_p.Set(8.0f, 8.0f);
        b2FixtureDef fd;
        fd.shape = &shape;
        //ERROR Use of undeclared identifier 'planet'
        planet = groundBody->CreateFixture(&fd);
        // End Create Planet - Nick

        [self schedule: @selector(tick:)];

        // init physics
        [self initPhysics];

        [self scheduleUpdate];
    }
    return self;

}

-(void) dealloc
{
    delete world;
    world = NULL;

    delete m_debugDraw;
    m_debugDraw = NULL;

    [super dealloc];
}   

-(void) createMenu
{

}

-(void) initPhysics
{

    CGSize s = [[CCDirector sharedDirector] winSize];

    b2Vec2 gravity;
    gravity.Set(0.0f, -10.0f);
    world = new b2World(gravity);

    // Do we want to let bodies sleep?
    world->SetAllowSleeping(true);

    world->SetContinuousPhysics(true);

    // Debug Draw functions
    m_debugDraw = new GLESDebugDraw( PTM_RATIO );
    world->SetDebugDraw(m_debugDraw);

    uint32 flags = 0;
    flags += b2Draw::e_shapeBit;
    //      flags += b2Draw::e_jointBit;
    //      flags += b2Draw::e_aabbBit;
    //      flags += b2Draw::e_pairBit;
    //      flags += b2Draw::e_centerOfMassBit;
    m_debugDraw->SetFlags(flags);       

    // Define the ground body.
    b2BodyDef groundBodyDef;
    groundBodyDef.position.Set(0, 0); // bottom-left corner

    // Call the body factory which allocates memory for the ground body
    // from a pool and creates the ground box shape (also from a pool).
    // The body is also added to the world.
    b2Body* groundBody = world->CreateBody(&groundBodyDef);

    // Define the ground box shape.
    b2EdgeShape groundBox;      

    // bottom

    groundBox.Set(b2Vec2(0,0), b2Vec2(s.width/PTM_RATIO,0));
    groundBody->CreateFixture(&groundBox,0);

    // top
    groundBox.Set(b2Vec2(0,s.height/PTM_RATIO), b2Vec2(s.width/PTM_RATIO,s.height/PTM_RATIO));
    groundBody->CreateFixture(&groundBox,0);

    // left
    groundBox.Set(b2Vec2(0,s.height/PTM_RATIO), b2Vec2(0,0));
    groundBody->CreateFixture(&groundBox,0);

    // right
    groundBox.Set(b2Vec2(s.width/PTM_RATIO,s.height/PTM_RATIO), b2Vec2(s.width/PTM_RATIO,0));
    groundBody->CreateFixture(&groundBox,0);
}

-(void) draw
{
    //
    // IMPORTANT:
    // This is only for debug purposes
    // It is recommend to disable it
    //
    [super draw];
    // Default GL states: GL_TEXTURE_2D, GL_VERTEX_ARRAY, GL_COLOR_ARRAY, GL_TEXTURE_COORD_ARRAY
    // Needed states:  GL_VERTEX_ARRAY,
    // Unneeded states: GL_TEXTURE_2D, GL_COLOR_ARRAY, GL_TEXTURE_COORD_ARRAY
    glDisable(GL_TEXTURE_2D);
    glDisable(GL_COLOR_BUFFER_BIT);

    world->DrawDebugData();

}

-(void) addNewSpriteAtPosition:(CGPoint)p
{

    CCLOG(@"Add sprite %0.2f x %02.f",p.x,p.y);
    CCSprite *sheet = (CCSprite*) [self getChildByTag:kTagSpriteSheet];
    int idx = (CCRANDOM_0_1() > .5 ? 0:1);
    int idy = (CCRANDOM_0_1() > .5 ? 0:1);

    //ERROR Cannot initialize a parameter of type 'CCTexture2D *' with an lvalue of type 'CCSprite *'

    CCSprite *sprite = [CCSprite spriteWithTexture:sheet rect:CGRectMake(32 * idx,32 * idy,32,32)];
    [sheet addChild:sprite];

    sprite.position = ccp( p.x, p.y);

    // Define the dynamic body.
    //Set up a 1m squared box in the physics world
    b2BodyDef bodyDef;
    bodyDef.type = b2_dynamicBody;

    bodyDef.position.Set(p.x/PTM_RATIO, p.y/PTM_RATIO);
    bodyDef.userData = sprite;
    b2Body *body = world->CreateBody(&bodyDef);

    // Define another box shape for our dynamic body.
    b2PolygonShape dynamicBox;
    dynamicBox.SetAsBox(.5f, .5f);//These are mid points for our 1m box

    // Define the dynamic body fixture.
    b2FixtureDef fixtureDef;
    fixtureDef.shape = &dynamicBox;
    fixtureDef.density = 1.0f;
    fixtureDef.friction = 0.3f;
    body->CreateFixture(&fixtureDef);

    }

-(void) update: (ccTime) dt
{

    //It is recommended that a fixed time step is used with Box2D for stability
    //of the simulation, however, we are using a variable time step here.
    //You need to make an informed choice, the following URL is useful
    //http://gafferongames.com/game-physics/fix-your-timestep/

    int32 velocityIterations = 8;
    int32 positionIterations = 1;

    // Instruct the world to perform a single step of simulation. It is
    // generally best to keep the time step and iterations fixed.
    world->Step(dt, velocityIterations, positionIterations);

    //Iterate over the bodies in the physics world
    for (b2Body* b = world->GetBodyList(); b; b = b->GetNext())
    {
        b2Body* ground = planet->GetBody();
        b2CircleShape* circle = (b2CircleShape*)planet->GetShape();
        // Get position of our "Planet" - Nick
        b2Vec2 center = ground->GetWorldPoint(circle->m_p);
        // Get position of our current body in the iteration - Nick
        b2Vec2 position = b->GetPosition();
        // Get the distance between the two objects. - Nick
        b2Vec2 d = center - position;
        // The further away the objects are, the weaker the gravitational force is - Nick
        float force = kRADIAL_GRAVITY_FORCE / d.LengthSquared(); // 150 can be changed to adjust the amount of force - Nick
        d.Normalize();
        b2Vec2 F = force * d;
        // Finally apply a force on the body in the direction of the "Planet" - Nick
        b->ApplyForce(F, position);

        if (b->GetUserData() != NULL) {
            //Synchronize the AtlasSprites position and rotation with the corresponding body
            CCSprite *myActor = (CCSprite*)b->GetUserData();
            myActor.position = CGPointMake( b->GetPosition().x * PTM_RATIO, b->GetPosition().y * PTM_RATIO);
            myActor.rotation = -1 * CC_RADIANS_TO_DEGREES(b->GetAngle());
        }
    }

}

- (void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    //Add a new body/atlas sprite at the touched location
    for( UITouch *touch in touches ) {
        CGPoint location = [touch locationInView: [touch view]];

        location = [[CCDirector sharedDirector] convertToGL: location];
        [self addNewSpriteAtPosition:location];

    }
}

- (void)accelerometer:(UIAccelerometer*)accelerometer didAccelerate:(UIAcceleration*)acceleration
{
    static float prevX=0, prevY=0;

    //#define kFilterFactor 0.05f
#define kFilterFactor 1.0f  // don't use filter. the code is here just as an example

    float accelX = (float) acceleration.x * kFilterFactor + (1- kFilterFactor)*prevX;
    float accelY = (float) acceleration.y * kFilterFactor + (1- kFilterFactor)*prevY;

    prevX = accelX;
    prevY = accelY;

    // accelerometer values are in "Portrait" mode. Change them to Landscape left
    // multiply the gravity by 10
    b2Vec2 gravity( -accelY * 10, accelX * 10);

    world->SetGravity( gravity );
}

#pragma mark GameKit delegate

-(void) achievementViewControllerDidFinish:(GKAchievementViewController *)viewController
{
    AppController *app = (AppController*) [[UIApplication sharedApplication] delegate];
    [[app navController] dismissModalViewControllerAnimated:YES];
}

-(void) leaderboardViewControllerDidFinish:(GKLeaderboardViewController *)viewController
{
    AppController *app = (AppController*) [[UIApplication sharedApplication] delegate];
    [[app navController] dismissModalViewControllerAnimated:YES];
}

@end 
```

# c# - 并发将值类型传递给“Thread.Start”不能按预期工作

> ID：11941734
> 
> 赞同：1
> 
> 时间：2012-08-13T20:24:33.127
> 
> 标签：c#, .net, multithreading

在我下面的代码中， 的`Id`属性`ThreadClass`未按预期确定性设置（`ThreadArray[0]'s ThreadClass.Id = 0, ThreadArray[1]'s ThreadClass.Id = 1,`等）。

如果我调试并放慢速度`Thread.Start()'s`，一切都会按预期工作。但是当程序全速运行时，我得到了所有`Id's = 4`（或类似的）。我无法锁定`i`，因为它不是参考变量。显然，我遇到了竞争条件。我究竟做错了什么？

**主文件**

```
for (int i = 0; i < ThreadCount; i++)
{
    ThreadArray[i] = new Thread(() =>
        {
            new ThreadClass(i);
        });
    ThreadArray[i].Start();
} 
```

**线程类.cs**

```
private int Id { get; set; }

public ThreadClass(int i) {
    Id = id;
    while(true)
    {
        Console.WriteLine("I am thread " + i");
        Thread.Sleep(5000);
    }
} 
```

**预期输出：**

```
I am thread 0
I am thread 1
I am thread 2
I am thread 3
... 5 second wait ...
I am thread 0
I am thread 1
I am thread 2
I am thread 3 
```

**实际输出：**

```
I am thread 4
I am thread 4
I am thread 4
I am thread 4
... 5 second wait ...
I am thread 4
I am thread 4
I am thread 4
I am thread 4 
```

请注意，此时每个实例都`ThreadArray`被初始化为一个有效`Thread`对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:31:45.897

您使用的 C# 版本不会关闭`i`变量的新副本。到线程执行时，`i`处于或接近`ThreadCount`. 只需创建变量的副本，以便闭包可以捕获它：

```
for (int i = 0; i < ThreadCount; i++) 
{  
    int temp = i;
    ThreadArray[i] = new Thread(() =>  
        {              
            new ThreadClass(temp); 
        });      
} 
```

顺便说一句，VS 2012（或 .NET 4.5）中的 C# 版本修复了这个问题。请参阅[http://msdn.microsoft.com/en-us/library/hh678682(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/hh678682(v=vs.110).aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-13T20:29:17.507

将 ThreadArray[i].Start() 移到 for 循环之外，并在启动线程之前简单地设置所有类。即使您必须循环两次，它也应该确保一切都按照您想要的顺序/状态发生。

——编辑达尼特在我之前得到了答案——:)

# python - Python 使用 sqlite3 创建两个带有外键的表？

> ID：11941739
> 
> 赞同：0
> 
> 时间：2012-08-13T20:24:40.630
> 
> 标签：python, sqlite, foreign-keys

我正在编写一个小函数来帮助学习如何一起使用 python 和 sqlite3。在此函数中，我想为词汇表创建一个表，并为单词的定义创建一个单独但链接的表。

我有这个：

```
import sqlite3

con = sqlite3.connect'words.db'
with con:
    cur = con.cursor()
    cur.execute("CREATE TABLE vocab(vocab_id INTEGER PRIMARY KEY, word TEXT)") 
```

当我尝试为定义创建一个单独的表时，这很好用。

我将在上面的代码下面继续下一行，如下所示：

```
 cur.execute("CREATE TABLE definitions(def_id INTEGER, def TEXT, word_def INTEGER, FOREIGN KEY(word_def) REFERENCES(vocab,vocab_id)") 
```

我正在阅读有关如何使用外键的 sqlite3 文档，上面这一行的最后一部分是我认为应该如何完成的。

这是返回的错误消息：

```
<sqlite3.Cursor object at 0xb782b720>
Traceback (most recent call last):
  File "<stdin>", line 4, in <module>
sqlite3.OperationalError: near "(": syntax error 
```

我不知道为什么这是不正确的或如何正确地做到这一点。我跟着文档，仍然得到错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:31:14.230

您的 SQL 语法错误：[REFERENCES](http://www.sqlite.org/foreignkeys.html#fk_basics)应该是 的形式`table(column)`，并且您需要另一个右括号。尝试

```
cur.execute("CREATE TABLE definitions (def_id INTEGER, def TEXT,"
           "word_def INTEGER, FOREIGN KEY(word_def) REFERENCES vocab(vocab_id))")
#                                                             ^     ^         ^ 
```

# ruby - Ruby中GET oauth中的参数

> ID：11941741
> 
> 赞同：0
> 
> 时间：2012-08-13T20:24:44.000
> 
> 标签：ruby, oauth, parameters, get

我正在使用[Oauth-Ruby gem](https://github.com/oauth/oauth-ruby)，并且可以通过执行以下操作来获取特定资源：

```
@photos = @access_token.get('/photos.xml') 
```

我想知道如何将参数传递给那个get。我试过做：

```
@photos = @access_token.get('/photos.xml', :parameters => {:id => 1} ) 
```

但没有运气。我在文档中找不到任何内容。有谁知道？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T12:10:40.307

这是 Oauth 获取方法的来源

```
 # File lib/oauth/tokens/access_token.rb, line 23
   def get(path, headers = {})
     request(:get, path, headers)
   end 
```

如您所见，它不支持参数。如果您在轨道上，则哈希上有一个方法 .to_query

```
{a: "b", c: "d"}.to_query #=> "a=b&c=d" 
```

如果没有，您可以使用诸如可寻址宝石之类的东西

```
Addressable::URI.form_encode({a: "b", c: "d"}) #=> "a=b&c=d" 
```

# turing-machines - 计算模型的等价性

> ID：11941749
> 
> 赞同：2
> 
> 时间：2012-08-13T20:25:18.537
> 
> 标签：turing-machines, lambda-calculus, computation-theory

我正在寻求解释如何证明计算模型是等价的。我一直在阅读有关该主题的书籍，但省略了等价证明。我对两个计算模型等效意味着什么有一个基本概念（自动机视图：如果它们接受相同的语言）。是否有其他思考等价的方法？如果你能帮助我理解如何证明图灵机模型等价于 lambda 演算，那就足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T14:34:14.697

要证明模型`A`等价于模型`B`，您需要证明：

1.  模型`A`并不比模型强`B`
2.  模型`B`并不比模型强`A`

要证明模型 X 并不比模型 Y 更强，必须证明：

> 对于来自 X 的每一台机器，存在来自 Y 的一台机器，使得 L(M_X) = L(M_Y)

[其中 M_X 和 M_Y 分别是每个型号的不同机器]

一个常见的众所周知的证明是：

*   DFA 等价于 NFA
*   NFA 等价于带有 epsilon 移动的 NFA
*   [多带图灵机](http://en.wikipedia.org/wiki/Turing_machine_equivalents#Multi-tape_Turing_machines)相当于一台带图灵机

可以在[图灵机等效项下阅读有关此主题的更多信息](http://en.wikipedia.org/wiki/Turing_machine_equivalents)

另请注意，声明：`the automata view: if they accept the same languages`不正确。
您不需要在两个模型中显示*相同的自动机*接受相同的语言。
**您需要证明，对于 A 中的每个自动机，B 中都有一个自动机，使得 L(M_A) = L(M_B) 反之亦然**

# javascript - jquery - ie8 和 substr 函数不起作用？

> ID：11941751
> 
> 赞同：1
> 
> 时间：2012-08-13T20:25:25.420
> 
> 标签：javascript, jquery, internet-explorer-8

我制作了一个在 Chrome/FF/IE9 中运行良好的考勤卡计算器。

出于某种原因，我在 IE8 上遇到错误 -`Error: Object doesn't support this property or method`在第 217 行，即：

```
timeIn_hrs = timeIn.substring(0,2); 
```

随着时间在：

```
timeIn = $("#timein").val(); 
```

输入中的数值。

这是一个完整的 jsFiddle：http: [//jsfiddle.net/m2rQw/](http://jsfiddle.net/m2rQw/)

我是新手，所以任何建议都值得赞赏。

**编辑：将它们声明为 var timeIn 而不仅仅是 timeIn 修复了它。谢谢威利**

# desire2learn - 访问从 D2L 传递到外部学习工具的数据

> ID：11941756
> 
> 赞同：0
> 
> 时间：2012-08-13T20:25:41.067
> 
> 标签：desire2learn

设置外部学习工具的链接时，有标记为“安全设置”的复选框，允许将信息（例如上下文信息）传递给外部工具。

如何从该工具访问这些信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T01:56:05.133

根据[LTI 规范](http://www.imsglobal.org/lti/blti/bltiv1p0/ltiBLTIimgv1p0.html)，参数作为表单后变量传递。

例如，访问联系人电子邮件地址的 php 代码将是：

```
//Grab some LTI related parameters 
if (isset($_REQUEST['lis_person_contact_email_primary']))
{
    $email = $_REQUEST['lis_person_contact_email_primary'];
} 
```

在 D2L 中，您还可以将 LTI 启动与 Valence API 调用结合起来，如[LTI 和 Valence](http://devs.valence.desire2learn.com/2012/06/05/blti-and-valence-sample/)文章中所述。

（您还应该验证 LTI oauth 签名，以便对您的工具有信心，请求来自具有您工具的密钥和秘密的 D2L 实例）

# android - 调试android时Eclipse挂起

> ID：11941764
> 
> 赞同：3
> 
> 时间：2012-08-13T20:26:08.197
> 
> 标签：android, eclipse

我正在使用 ADT 插件在 Ubuntu 12.04 64 位上运行 Eclipse Juno。我正在开发一个适用于 android 的应用程序，我可以开发得很好，但是每当我的应用程序在调试时抛出未捕获的异常时，eclipse 就会冻结，我必须强制退出程序并重新启动。这使得确定我的应用程序中的错误几乎是不可能的，因为我什至无法获得异常的堆栈跟踪。

编辑：它似乎有时会起作用，而且我注意到日食挂起时没有明显的模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-11T15:19:13.850

尝试在 Windows 8 工作站和常规 Android ADT 捆绑包上进行调试时，我遇到了完全相同的问题。我通过不使用标准 ADT 包解决了这个问题。[相反，我下载了最新的 eclipse (4.3.1/Kepler) 并使用http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)中名为“设置现有 IDE”的说明手动安装了 SDK 和 eclipse 插件。

所以至少在我的情况下，问题似乎是 Eclipse Juno 版本。当迁移到 Eclipse Kepler 时，它起作用了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T10:27:03.493

将 Android->LOgcat->要缓冲的最大 logcat 消息数的首选项更改为“5000”。那应该可以解决问题。

[更新] 您也可以点击 logcat 上的 [x] clear 按钮来清除所有最近的 logcat 消息。

祝你好运！

# mysql - 选择值大于当前字段值的所有字段

> ID：11941766
> 
> 赞同：1
> 
> 时间：2012-08-13T20:26:12.050
> 
> 标签：mysql, mysql5

我有一张看起来像这样的桌子。

| 路径 ID | 步骤 | point_id | 延迟时间 | 待机时间 | 访问 |

| 202 | 1 | 111 | 0 | 0 | 7 |

其中按步骤顺序列出了 point_id。例如：111 - 步骤 1、181 - 步骤 2 等。

我需要编写一个查询，该查询将采用 point_id，选择所有具有给定值的 path_id 中具有更高步长的所有值，并返回一组 point_id 的分组。

我目前正在使用此查询

```
SELECT DISTINCT `pdb`.`point_id` AS `id` 
FROM `path_detail` AS `pda` INNER JOIN 
`path_detail` AS `pdb` ON pda.path_id = pdb.path_id 
 AND pda.step < pdb.step
WHERE 
(pda.point_id = 111) 
GROUP BY `pdb`.`path_id` 
```

这似乎不太可靠。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:41:05.677

尝试：

```
SELECT Distinct `pdb`.`point_id` AS `id` 
FROM `path_detail` AS `pda`, `path_detail` AS `pdb`  
WHERE 
pda.point_id = 111
AND pda.path_id = pdb.path_id 
AND pda.step < pdb.step
Order by `pdb`.`point_id` ASC 
```

# c# - db4o 继承的对象没有被索引：错误还是设计？

> ID：11941767
> 
> 赞同：1
> 
> 时间：2012-08-13T20:26:13.530
> 
> 标签：c#, db4o

似乎 db4o 将忽略配置参数，当您尝试索引从另一个对象继承的对象上的字段时。例如，如果我有以下内容：

```
public class foo
{
    private int theId;
    public int TheId {get{return theId;}set{theId=value;}}
}

public class bar:foo
{
    private string name;
    public string Name{get{return name;}set{name=value;}}
} 
```

我的配置可能类似于：

```
IEmbeddedConfiguration config = Db4oEmbedded.NewConfiguration();
config.Common.ObjectClass(typeof(foo)).ObjectField("theId").Indexed(true); 
```

这将起作用。但是，如果我尝试这样做：

```
IEmbeddedConfiguration config = Db4oEmbedded.NewConfiguration();
config.Common.ObjectClass(typeof(bar)).ObjectField("theId").Indexed(true); 
```

配置被忽略；`bar`. `TheId`未编入索引。

我可以看到为什么这可能是设计的，但我找不到引用此行为的文档，或者将其视为可能的“陷阱”。那么这是一个错误，还是设计使然？在我看来，很多时候您可能只想在特定子类上索引该字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T01:41:07.287

我认为这是设计使然。您只能在声明它的类上索引字段。这也适用于所有子类。

Afaik, indexing a inherited field only on a subclass is not possible right now.

Added a documentation task for [this](http://tracker.db4o.com/browse/DOC-708).

# datasource - 使用 ListGrid 和 Datasource 时如何使缓存无效

> ID：11941768
> 
> 赞同：0
> 
> 时间：2012-08-13T20:26:21.143
> 
> 标签：datasource, smartgwt, listgrid

根据我在阅读其他网站时发现的内容：

SmartGWT 使用数据缓存来优化客户端-服务器连接并减少网络流量。在您的示例中，假设您的数据库中有以下内容：

**一个词**

**两个字**

**一个句子**

当你输入 word 时，fetch 返回：

**一个词**

**两个字**

这些值缓存在您的客户端中。

当你在word中加一个时，因为这是一个更严格的搜索条件，不需要服务器获取，只需要客户端过滤，结果是：

**一个词**

有没有办法避免这种情况并始终针对服务器进行搜索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T23:16:03.117

在 listgrid 组件上手动调用 invalidateCache() 应该使用实际条件运行 fetch 方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:59:13.297

**您可以使用DataSource**的以下属性来关闭缓存。

```
dataSource.setCacheAllData(false);
dataSource.setAutoCacheAllData(false); 
```

如果要打开缓存，请将“true”传递给两个函数调用。

# php - 输入字段在 HTML 表中并且其类型为“隐藏”时的表单验证

> ID：11941771
> 
> 赞同：0
> 
> 时间：2012-08-13T20:26:32.750
> 
> 标签：php, javascript, jquery, mysql, html

我有一个工作代码可以在单击彩色按钮时更改表格单元格的颜色，当鼠标拖到表格单元格上时，拖动中涉及的所有单元格都会获得该颜色，这里是代码[http://jsfiddle.net/ 28SMv/76/](http://jsfiddle.net/28SMv/76/) ,

现在我想做表单验证，比如当第一个表格单元格获得颜色时，我想回显值并将其发送到数据库，我无法将表格单元格值设置为所选颜色，请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:46:13.160

试试看！

显示要存储在数据库中的行和列 ID 和值。

**[现场演示](http://jsfiddle.net/28SMv/82/)**

要保存数据，请使用：

```
var Params = { identificador: identificador, color : color };
$.ajax({
    url: 'pagetosave.php',
    type: 'post',
    data: Params,
    success: function (data) {
        alert('saved...');
    }
}); 
```

在每个命令上替换它。

每次触发一次......

您的 php 页面将收到两个参数.... identificador e 颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T20:39:48.967

你可以这样尝试：

```
$('our_table td').click(function(){
           $(this).css('background-color', selectedColor);
            alert($(this).children("input").val());
            $.ajax({
                    url: "add-product.php",
                    type: "post",
                    data: $(this).children("input").val().serialize(),
                    error: function(data){
                        alert("There was an error while inserting into the database. );
                    },
                    success: function(data) {
                        Display_Load();
                        $("#content").load("pagination_data.php?page=1", function() {
                            Hide_Load()
                        });
                    }
                });
    }); 
```

它似乎并没有让我在 Fiddle 中发出警报，但是一旦您可以获得变量，只需执行 AJAX 调用即可在某处更新数据库。

如果您需要更多帮助，请告诉我。

# android - 在 Android 上打开特定的应用程序设置屏幕？

> ID：11941773
> 
> 赞同：12
> 
> 时间：2012-08-13T20:26:44.387
> 
> 标签：android, android-intent

我试图找出在 Android 上打开特定应用程序设置屏幕的意图值，该屏幕允许您“清除数据”、“强制停止”、“卸载”......

谢谢，

亚当。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-10-02T22:17:08.763

CommonsWare 已经回答了这个问题。这是您可以直接复制/粘贴并使用的代码：

```
Intent intent = new Intent(android.provider.Settings.ACTION_APPLICATION_DETAILS_SETTINGS);
intent.setData(Uri.parse("package:" + getPackageName()));
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T21:00:31.330

将[`ACTION_APPLICATION_DETAILS_SETTINGS`](http://developer.android.com/reference/android/provider/Settings.html#ACTION_APPLICATION_DETAILS_SETTINGS), 与`Uri`of一起使用`package:the.app.goes.moo`（将包名称替换为您想要的名称）。

请注意，这是 API 级别 9 的新功能，它可能不适用于所有设备。

# ios - UIGestureRecognizer 在屏幕外渲染

> ID：11941777
> 
> 赞同：2
> 
> 时间：2012-08-13T20:27:00.523
> 
> 标签：ios, cocoa-touch, uikit, uigesturerecognizer, uitapgesturerecognizer

我有一个`UIGestureRecognizer`附加到`UILabel`屏幕外渲染的一个，稍后进入视图时。进入视野后，点击手势识别器不起作用。如果在视图中渲染，它工作正常。

任何想法为什么这不起作用？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:53:17.270

我严重怀疑它与将其“渲染”出屏幕有关（以及您的意思是什么）。无论如何，我建议当标签被带到屏幕上时，您验证标签是否已启用，然后执行以下操作：

```
NSArray *grs = label.gestureRecognizers; 
for(UIGestureRecognizer *gr in grs) {
  NSLog(@"Recognizer: %@ enabled=%d state=%d del=%@", NSStringFromClass[gr class]), gr.enabled, gr.state, gr.delegate);
} 
```

比较屏幕外和屏幕上的结果会很有趣。事情正在发生，只需要找出不同的属性。但是没有办法获得目标/动作对的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T14:47:28.017

子类化`UILabel`和实现`hitTest:withEvent:`解决了这个问题

# visual-studio - 打开解决方案时通知 TFS 签入

> ID：11941778
> 
> 赞同：2
> 
> 时间：2012-08-13T20:27:00.720
> 
> 标签：visual-studio, tfs

VS 有没有办法（可能是插件）在您打开解决方案时通过弹出窗口通知您，并且您当前拥有的任何文件都已过时（即您应该运行 get latest）？

理想情况下，这也适用于分支机构。例如，我对整个解决方案进行了分支。现在我正在工作，但我不想等到工作一周才知道主分支发生了变化。我宁愿找出我何时打开解决方案并查看更改的内容并决定是否合并。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:23:24.927

当您打开解决方案时，有一种方法可以强制它获取最新代码。这不完全是一个弹出窗口，但我认为这是您所要求的：

```
Tools -> Options -> Source Control -> Environment -> Get everything when solution or project is opened 
```

# c# - 具有不明确的返回类型和重载解决方案的 Lambda 转换

> ID：11941779
> 
> 赞同：10
> 
> 时间：2012-08-13T20:27:03.670
> 
> 标签：c#, lambda, overload-resolution

如果我有一个 lambda `() => { throw new Exception(); }`，则不清楚它是否有返回类型。因此，它可以（隐式）转换为`Action`and `Func<object>`（或任何其他`Func<T>`）。这是因为，根据C# 4 规范的§6.5*匿名函数转换：*

> [A] 委托类型`D`与提供的匿名函数兼容`F`：
> 
> *   …</p>
>     
>     
> *   如果`D`有一个`void`返回类型并且主体`F`是一个语句块，当 [...] 主体`F`是一个有效的语句块，其中没有返回语句指定一个表达式。
>     
>     
> *   如果`D`具有非 void 返回类型并且主体`F`是语句块，则当 [...] 主体`F`是具有不可到达终点的有效语句块时，其中每个`return`语句都指定一个可隐式转换为返回的表达式的类型`D`。

但是，如果我有一个方法的两个重载，其中一个有一个类型的参数，另一个有一个类型的参数`Action`，`Func<object>`并且我从上面将 lambda 传递给它，`Func<object>`则使用重载。为什么？规范的哪一部分说这`Func<object>`比`Action`这种情况更好？

我看过 §7.5.3.2 *Better function member*，但这并没有解释它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-13T20:27:03.670

我应该看低一节：§7.5.3.3 *Better conversion from expression*解释说：

> 给定从 expression 转换为 type 的隐式转换，以及从 expression转换为 type的隐式转换，是比以下至少一项成立时更好的转换：`C[1]``E``T[1]``C[2]``E``T[2]``C[1]``C[2]`
> 
> *   …</p>
>     
>     
> *   `E`是一个匿名函数，是委托类型或表达式树类型，是委托类型或表达式树类型，并且满足以下条件之一：`T[1]``D[1]``Expression<D[1]>``T[2]``D[2]``Expression<D[2]>`
>     
>     
>     *   …</p>
>         
>         
>     *   `D[1]`并具有相同的参数列表，并且满足以下条件之一：`D[2]`
>         
>         
>         *   …</p>
>             
>             
>         *   **`D[1]`有返回类型`Y`，并且返回无效`D[2]`**

# jquery - 样式化自动生成的 HTML

> ID：11941787
> 
> 赞同：0
> 
> 时间：2012-08-13T20:27:42.640
> 
> 标签：jquery, html, css

我有以下 HTML 输出，我无法更改。我想为文本（即名称）指定宽度和文本右对齐`label`，但因为我无法更改输出，所以我无法做到这一点。是否仍然可以在不更改 HTML 的情况下做到这一点？

```
<label>Name:<br><input type="text" value="" name="name"></label> 
```

PS。我想在同一行显示标签文本和输入字段，所以我设置`float: left`了`<br>`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:30:43.507

只需设置`BR`为`display: none;`应该使所有内容都出现在同一行。`input`您也可以在标签上设置文本对齐方式`text-align: right`：

[http://jsfiddle.net/kkkgbV/1/](http://jsfiddle.net/kkgbV/1/)

您还可以制作`label`一个块元素，并`input`向右浮动：

[http://jsfiddle.net/kkgbV/4/](http://jsfiddle.net/kkgbV/4/)

# javascript - 从选择菜单中使用 JQuery 多次渲染部分

> ID：11941791
> 
> 赞同：0
> 
> 时间：2012-08-13T20:27:56.377
> 
> 标签：javascript, jquery, ajax, javascript-events

我有一个选择菜单，用户可以在其中选择产品。

```
%fieldset
      %legend
        Select a Product
      %ul.input_group
        %li
          %label{:for => "product"}
            Product
          %select#product
            %option
              Please Select
            %option
              2 recipients fo $65
            %option
              4 recipients for $100
            %option
              8 recipients for $150 
```

如果用户选择`2 recipients for $65`，我想将位于`/transcripts/products/recipients/select-recipient`两次的部分加载到 div`#recipient-list`中。我想这样做的另一个词：

```
#recipient-list
  .recipient
    ...
  .recipient
    ... 
```

如果选择了其他选项，我希望此 div 以适当数量的项目进行响应。

我将如何为此编写 JQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:42:22.550

尝试这样的事情：

```
$('#product option:selected').each(function(index, product)) {
  $('#recipient-list').append($.get('/transcripts/products/recipients/select-recipient/' + product.val()));
} 
```

然后将您的选项更改为以下

```
%fieldset
  %legend
    Select a Product
  %ul.input_group
    %li
      %label{:for => "product"}
        Product
      %select#product
        %option
          Please Select
        %option{value: "2"}
          2 recipients fo $65
        %option{value: "4"}
          4 recipients for $100
        %option{value: "8"}
          8 recipients for $150 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T20:43:23.413

我*想*你正在寻找这样的东西：

```
 $('#product').on('change', function() {
     var val = parseInt($(this).text(), 10);
     if (val < 1) {
         $('#recipient-list').empty();
         return;
     }

     $('#recipient-list').load('/transcripts/products/recipients/select-recipient',
         function() {
             var copy = $(this).children().clone();
             while (val-- > 1) {
                 $('#recipient-list').append(copy);
             }
         }
     );
 }); 
```

# entity-framework - 实体框架的多个/快速 ajax 请求和并发问题

> ID：11941794
> 
> 赞同：1
> 
> 时间：2012-08-13T20:28:08.023
> 
> 标签：entity-framework, asp.net-mvc-4

我有一个使用 Unity 作为 IoC 的 asp.net MVC4 应用程序。我的控制器的构造函数接受一个存储库，而该存储库接受一个 UnitOfWork (DBContext)。一切似乎都正常，直到来自同一会话的多个 ajax 请求发生得太快。`Store update, insert, or delete statement affected an unexpected number of rows (0)`由于并发问题，我收到错误。这是从 ajax 请求调用的方法的样子：

```
public void CaptureData(string apiKey, Guid sessionKey, FormElement formElement)
{
        var trackingData = _trackingService.FindById(sessionKey);
        if(trackingData != null)
        {
             formItem = trackingData.FormElements
                          .Where(f => f.Name == formElement.Name)
                          .FirstOrDefault();

             if(formItem != null)
             {
                formItem.Value = formElement.Value;
                _formElementRepository.Update(formItem);
             }
        }
} 
```

这仅在 ajax 请求快速发生时才会发生，这意味着快速。当请求以正常速度发生时，一切似乎都很好。就像应用程序需要时间来赶上一样。不知道我需要如何处理我的存储库中的并发检查，所以我不会错过更新。另外，我尝试将“MultipleActiveResultSets”设置为 true，但没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:57:33.150

正如您在评论中提到的，您使用的是行版本列。此列的重点是防止同时覆盖同一行。你有两个操作：

*   读取记录 - 读取记录和当前行版本
*   更新记录 - 使用指定的键和行版本更新记录。行版本自动更新

现在，如果这些操作是由并发请求执行的，您可能会收到以下信息：

*   请求 A：读取记录
*   请求 B：读取记录
*   请求 A：写入记录 - 更改行版本！
*   请求 B：写入记录 - 触发异常，因为在读取记录期间检索到的行版本的记录不存在

触发异常是为了告诉您您正在尝试更新过时的数据，因为已更新记录的新版本。通常您需要刷新数据（通过从数据库重新加载当前记录）并尝试再次保存它们。在高度并发的情况下，这种处理可能会重复很多次，因为您的数据库就是为了防止这种情况而设计的。您的选择是：

*   删除行版本并让请求根据需要覆盖该值。如果您确实需要并发请求处理并且您很高兴拥有“一些”价值，那么这可能是要走的路。
*   不允许并发请求。如果您需要处理所有更新，您很可能还需要它们的真实顺序。在这种情况下，您的应用程序不应允许并发请求。
*   请改用 SQL / 存储过程。通过使用表提示，您将能够在读取操作期间锁定记录，并且在第一个请求保存更改并提交或回滚事务之前，没有其他请求能够读取该记录。

# google-visualization - 如何与使用 google graphs api 绘制的仪表板中的表格进行交互？

> ID：11941795
> 
> 赞同：2
> 
> 时间：2012-08-13T20:28:08.307
> 
> 标签：google-visualization, dashboard, getselection

我有一个包含表格和字符串过滤框的仪表板。我想与表进行交互，以便能够选择行并从中检索相应的数据。

稍作更改后，我得到了 getSelection() 方法，但出现了另一个问题。使用下面的代码，我尝试过滤表，然后选择并获取行数据。一切似乎都很好，但是当我这样做时，过滤后的表行数字和实际数据中的行号不匹配。也就是说，我最终会参考预先过滤的表来提醒行数据...再次，任何建议都受到高度重视..谢谢..

```
 var dashboard, table, data;

  function drawVisualization() {

    var array = new Array(['ticker','time','bid','open','high','low','volume']);
    var ticker, time, bid, open, high, low, volume; 
        $.get('php/getdata.php', {input: 'stocklist'}, function(data1){

        $.each(data1, function(index, value){           
            ticker = value.ticker;
            time = value.time;
            bid = parseFloat(value.bid);
            open = parseFloat(value.open);
            high = parseFloat(value.high);
            low = parseFloat(value.low);
            volume = parseFloat(value.volume);
            array.push([ticker, time, bid, open, high, low, volume]);
        });

    data = google.visualization.arrayToDataTable(array);

    var stringFilter = new google.visualization.ControlWrapper({
      'controlType': 'StringFilter',
      'containerId': 'control1',
      'options': {
        'filterColumnLabel': 'ticker'
      }
    });

    table = new google.visualization.ChartWrapper({
      'chartType': 'Table',
      'containerId': 'chart1',
      'options': {'showRowNumber': false, 'height': '130px', 'width': '1000px'}
    });

    dashboard = new google.visualization.Dashboard(document.getElementById('dashboard'))
    dashboard.bind(stringFilter, table);
    dashboard.draw(data);

    google.visualization.events.addListener(table, 'select', selectHandler);
  }, "json");
  }

  function selectHandler() {
    var selection = table.getChart().getSelection();

  for (var i = 0; i < selection.length; i++) {
    var item = selection[i];
    if (item.row != null && item.column != null) {
        } else if (item.row != null) {
        stockID = data.getFormattedValue(item.row, 0);
        } else if (item.column != null) {
        stockID = data.getFormattedValue(0, item.column);
        }
    }
    if (stockID == '') {
    return;
    }       
alert(stockID);
}

  google.setOnLoadCallback(drawVisualization); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-16T11:41:15.687

我有一个类似的问题。应用过滤器后，您必须获取新的 DataTable。尝试改变

```
stockID = data.getFormattedValue(item.row, 0); 
```

至

```
stockID = table.getDataTable().getFormattedValue(item.row, 0); 
```

对于另一种情况也是如此。

干杯

# jquery - 服务器离线时未调用jQuery ajax错误

> ID：11941802
> 
> 赞同：1
> 
> 时间：2012-08-13T20:29:02.707
> 
> 标签：jquery, ajax, internet-explorer-9

我正在使用 jquery.ajax 从服务器加载一些数据

```
 $.ajax({
        url: myurl,
        cache: false,
        dataType: "json",
        timeout: 10000,
        success: function (data) {
            showData(data);
        },
        error: function (e) {
            showErrorDetails(e);
        }
    }); 
```

当服务器离线或客户端根本没有连接到网络时，我希望执行错误功能 - 这在 Chrome 中有效 - 但是当我在 IE9 中测试它时，错误功能永远不会执行。

**更新：**

myurl 例如具有以下值：“GetPlants?x=43.49&y=54.78&x2=60.50&y2=-12.43&zl=3”

这是同一个域（没有子域）。在服务器端，我使用的是 ASP.net MVC 3，尽管这无关紧要，因为在无法访问服务器时应该执行错误函数。

**更新 2：** 如果服务器离线（如果有帮助），也不会调用成功函数

**更新 3：**

我想我找到了问题所在。如果页面上的某些图像元素以及与服务器的连接丢失并且某些图像尚未加载，则我设置 src 在某些情况下，不执行 ajax 调用的错误功能。我无法创建一个小示例来重新创建此问题，似乎还有另一个因素会影响此行为。

# java - 如何在 java 的 SimpleDateFormat 中转义单引号

> ID：11941807
> 
> 赞同：10
> 
> 时间：2012-08-13T20:29:28.847
> 
> 标签：java, date, simpledateformat

我有一个这样的日期输入日期：{ts'2012-08-13 02:30:01'}

我相信我可以用单引号转义无效部分，但我在无效部分中有一个单引号。我该如何逃避呢？我尝试了几种模式，但它不起作用。

谢谢，

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-13T20:38:53.427

根据[SimpleDateFormat 的 javadocs](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

> 可以使用单引号 (') 引用文本以避免解释。**`"''"`代表单引号**。

所以像这样的格式字符串：

```
"'{ts '''yyyy-MM-dd HH:mm:ss'''}'" 
```

应该匹配`{ts '2012-08-13 02:30:01'}`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-07-23T15:53:21.727

# tl;博士

```
LocalDateTime.parse( 
    "{ts '2012-08-13 02:30:01'}"
    .replace( "{ts '" , "" )       // Delete prefix.
    .replace( "'}" , "" )          // Delete suffix.
    .replace( " " , "T" )          // Yields `2012-08-13T02:30:01`. In standard ISO 8601 format.
)                                  // Returns a `LocalDateTime` object. 
```

# *java.time*

`SimpleDateFormat`已过时，几年前被JSR 310 中定义的现代*java.time类所取代。*

## `java.time.DateTimeFormatter`

改为使用`DateTimeFormatter`来定义用于解析/生成字符串的格式化模式。

该类使用一对单引号`''`作为单引号的转义值。否则，将使用单引号来标记要被格式化程序忽略的文本。

## 获取 ISO 8601 字符串的简单文本操作

但在您的情况下不需要自定义格式模式。您的内部文本几乎符合*java.time*默认使用的 ISO 8601 标准。只需对输入文本进行一些字符串操作。

```
String input = 
    "{ts '2012-08-13 02:30:01'}"
    .replace( "{ts '" , "" ) 
    .replace( "'}" , "" ) 
    .replace( " " , "T" )
; 
```

产量`2012-08-13T02:30:01`。

## 解析为`LocalDateTime`

然后解析为一个`LocalDateTime`对象。

```
LocalDateTime ldt = LocalDateTime.parse( input ) ; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T20:33:58.893

您是否尝试过用另一个单引号转义单引号？否则，更好的方法可能是使用正则表达式提取相关部分（引号之间），然后才应用 SimpleDateFormat。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-23T12:09:34.933

这对我有用

```
SimpleDateFormat("dd MMM''yy", Locale.ENGLISH)

01 Jan'20 
```

# java - 日期的 Hamcrest 库

> ID：11941810
> 
> 赞同：5
> 
> 时间：2012-08-13T20:29:38.260
> 
> 标签：java, unit-testing, junit, hamcrest

我一直在环顾四周，但没有发现任何有用的东西。是否有任何与具有广泛日期匹配的 hamcrest 一起使用的第三方库？

具体来说，我正在寻找以下方面的匹配器：

```
assertThat(myDate, is(withinMinutes(sourceDate, 10)));
assertThat(myDate, is(afterDate(sourceDate)));
assertThat(myDate, is(betweenDates(startDate, endDate))); 
```

在我推出自己的产品之前，我想看看那里是否有任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T19:25:59.787

我写了一组日期匹配器，看起来像你所追求的。来源在这里[https://github.com/eXparity/hamcrest-date](https://github.com/eXparity/hamcrest-date)。如何使用内部匹配器的示例

```
assertThat(dateUnderTest, DateMatchers.within(2, TimeUnit.SECONDS, new Date())); 
```

您可以使用 maven 将其添加到您的 pom.xml

```
<dependency>
    <groupId>org.exparity</groupId>
    <artifactId>hamcrest-date</artifactId>
    <version>2.0.1</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:39:38.200

您应该尝试[fest-assert](http://fest.easytesting.org/)，它不符合 hamcrest 但恕我直言，它优于它（“更流畅”）。例如日期：

```
@Test
public void is_between_date_assertions_examples() {

    // various usage of isBetween assertion,
    // Note that isBetween(2002-12-17, 2002-12-19) includes start date but end date :
    assertThat(theTwoTowers.getReleaseDate())
            // = 2002-12-18
            .isBetween(theFellowshipOfTheRing.getReleaseDate(), theReturnOfTheKing.getReleaseDate())
            .isBetween(parse("2002-12-17"), parse("2002-12-19")) // [2002-12-17, 2002-12-19[
            .isBetween("2002-12-17", "2002-12-19") // [2002-12-17, 2002-12-19[
            .isNotBetween("2002-12-17", "2002-12-18") // [2002-12-17, 2002-12-18[
            .isBetween("2002-12-17", "2002-12-18", true, true); // [2002-12-17, 2002-12-18]
} 
```

日期的完整示例在[这里](https://github.com/joel-costigliola/fest-examples/blob/master/src/main/java/org/fest/assertions/examples/DateAssertionsExamples.java)，其他的都[在那里](https://github.com/joel-costigliola/fest-examples/tree/master/src/main/java/org/fest/assertions/examples)。

# node.js - 尝试在 node.js 中创建自定义模块并从另一个文件引用

> ID：11941815
> 
> 赞同：0
> 
> 时间：2012-08-13T20:29:45.867
> 
> 标签：node.js, heroku, cloud9-ide

这是我的设置：

*   托管[Cloud9 IDE](http://c9.io)
*   Heroku 托管环境
*   渴望学习 node.js

我正在学习[http://www.nodebeginner.org上的教程](http://www.nodebeginner.org)

Manuel 展示了如何创建一个名为 server.js 的自定义模块：

```
var http = require("http");

function start() {
  function onRequest(request, response) {
    console.log("Request received.");
response.writeHead(200, {"Content-Type": "text/plain"});
response.write("Hello World");
response.end();
}

http.createServer(onRequest).listen(8888);
console.log("Server has started.");
}

exports.start = start; 
```

他展示了如何从 index.js 中引用这个自定义模块：

```
var server = require("./server");
server.start(); 
```

我尝试在 cloud9 ide 中运行 index.js，但它挂起或给我一个 Service Temporarily Unavailable 错误。我认为这可能是 cloud9 的问题，所以我将它推送到我的 Heroku 实例。从 Heroku，我收到一个应用程序错误页面。Heroku 日志显示：

```
←[33m2012-08-13T19:03:19+00:00 heroku[slugc]:←[0m Slug compilation finished
←[35m2012-08-13T19:03:21+00:00 heroku[web.1]:←[0m Starting process with command `node index.js`
←[35m2012-08-13T19:03:21+00:00 app[web.1]:←[0m
←[35m2012-08-13T19:03:21+00:00 app[web.1]:←[0m     at Object.<anonymous> (/app/index.js:1:70)
←[35m2012-08-13T19:03:21+00:00 app[web.1]:←[0m     at Module._compile (module.js:446:26)
←[35m2012-08-13T19:03:21+00:00 app[web.1]:←[0m     at Object..js (module.js:464:10)
←[35m2012-08-13T19:03:21+00:00 app[web.1]:←[0m Error: require.paths is removed. Use node_modules folders, or the NODE_PATH environment variable instead.
←[35m2012-08-13T19:03:21+00:00 app[web.1]:←[0m     at Function.<anonymous> (module.js:383:11)
←[35m2012-08-13T19:03:21+00:00 app[web.1]:←[0m     at Module.load (module.js:353:31)
←[35m2012-08-13T19:03:21+00:00 app[web.1]:←[0m     at Function._load (module.js:311:12)
←[35m2012-08-13T19:03:21+00:00 app[web.1]:←[0m     at Array.0 (module.js:484:10)
←[35m2012-08-13T19:03:21+00:00 app[web.1]:←[0m     at EventEmitter._tickCallback(node.js:190:38)
←[35m2012-08-13T19:03:23+00:00 heroku[web.1]:←[0m Process exited with status 1
←[35m2012-08-13T19:03:23+00:00 heroku[web.1]:←[0m State changed from starting to crashed 
```

我用谷歌搜索了它，发现与本地 cloud9 安装有关的问题，但在托管版本上没有。我还尝试将 server.js 从根目录移动到 node_modules 文件夹，但似乎无法让它工作。我的第一步是启动并运行标准的“Hello World”应用程序，以证明调试模式和 heroku 部署，一切正常。这是我遇到困难的自定义模块。

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:38:48.913

它不在 Cloud9 上运行的原因是因为您监听的是 port`8888`而不是`process.env.PORT`.

您显示的 heroku 错误是一种不同类型的错误，它抱怨删除了该`require.paths`功能，该功能已在节点 0.4.x 中删除。所以这是完全不同的东西。您确定您正在观看正确的日志文件吗？`process.env.PORT`无论如何，将端口更改为那里应该可以工作。

如果您想查看 codez，我将它们放在 Cloud9 项目中：[webserver](https://c9.io/janjongboom/webserver)。

# python - 如何避免“RuntimeError：迭代期间字典更改大小”错误？

> ID：11941817
> 
> 赞同：410
> 
> 时间：2012-08-13T20:30:07.770
> 
> 标签：python, list, dictionary, loops

我检查了所有其他具有相同错误的问题，但没有找到有用的解决方案 =/

我有一个列表字典：

```
d = {'a': [1], 'b': [1, 2], 'c': [], 'd':[]} 
```

其中一些值为空。在创建这些列表结束时，我想在返回我的字典之前删除这些空列表。目前我正在尝试按如下方式执行此操作：

```
for i in d:
    if not d[i]:
        d.pop(i) 
```

但是，这给了我运行时错误。我知道您在遍历字典时无法在字典中添加/删除元素......那么有什么办法解决这个问题？

* * *

## 回答 #1

> 赞同：655
> 
> 时间：2012-08-13T20:33:21.450

在 Python 3.x 和 2.x 中，您可以使用 use[`list`](https://docs.python.org/3/library/stdtypes.html#list)来强制制作密钥的副本：

```
for i in list(d): 
```

在 Python 2.x 中，调用[`keys`](https://docs.python.org/3/library/stdtypes.html#dict.keys)创建了密钥的副本，您可以在修改 时对其进行迭代`dict`：

```
for i in d.keys(): 
```

但请注意，在 Python 3.x 中，第二种方法对您的错误没有帮助，因为`keys`它返回一个[视图对象](https://docs.python.org/3/library/stdtypes.html#dict-views)，而不是将键复制到列表中。

* * *

## 回答 #2

> 赞同：98
> 
> 时间：2016-03-31T10:35:48.013

您只需要使用“复制”：

这样您就可以遍历原始字典字段，并且可以动态更改所需的字典（d 字典）。它适用于每个 python 版本，所以更清楚。

（顺便说一句 - 通常迭代你的数据结构的副本，而不是使用“.copy”作为“dict”或切片“[:]”作为“list”，你可以使用`import copy`-> `copy.copy`（对于相当于“copy”的浅拷贝" 由 "dict" 支持或切片 "[:]" 由 "list" 支持）或`copy.deepcopy`在您的数据结构上）。

```
In [1]: d = {'a': [1], 'b': [1, 2], 'c': [], 'd':[]}

In [2]: for i in d.copy():
   ...:     if not d[i]:
   ...:         d.pop(i)
   ...:         

In [3]: d
Out[3]: {'a': [1], 'b': [1, 2]} 
```

* * *

## 回答 #3

> 赞同：61
> 
> 时间：2012-08-13T20:38:00.337

只需使用字典理解将相关项目复制到新字典中

```
>>> d
{'a': [1], 'c': [], 'b': [1, 2], 'd': []}
>>> d = { k : v for k,v in d.iteritems() if v}
>>> d
{'a': [1], 'b': [1, 2]} 
```

为此在 Python 3

```
>>> d
{'a': [1], 'c': [], 'b': [1, 2], 'd': []}
>>> d = { k : v for k,v in d.items() if v}
>>> d
{'a': [1], 'b': [1, 2]} 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2020-01-31T09:05:44.443

这对我有用：

```
dict = {1: 'a', 2: '', 3: 'b', 4: '', 5: '', 6: 'c'}
for key, value in list(dict.items()):
    if (value == ''):
        del dict[key]
print(dict)
# dict = {1: 'a', 3: 'b', 6: 'c'} 
```

将字典项转换为列表会创建其项的列表，因此您可以对其进行迭代并避免`RuntimeError`.

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2012-08-13T20:42:10.400

我会尽量避免首先插入空列表，但是，通常会使用：

```
d = {k: v for k,v in d.iteritems() if v} # re-bind to non-empty 
```

如果在 2.7 之前：

```
d = dict( (k, v) for k,v in d.iteritems() if v ) 
```

要不就：

```
empty_key_vals = list(k for k in k,v in d.iteritems() if v)
for k in empty_key_vals:
    del[k] 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2016-01-14T16:14:07.930

对于 Python 3：

```
{k:v for k,v in d.items() if v} 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2019-05-17T09:28:31.323

您不能在 for 循环期间更改字典时迭代字典。制作一个列表并迭代该列表，它对我有用。

```
 for key in list(d):
        if not d[key]: 
            d.pop(key) 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2021-03-19T22:59:26.893

以避免“迭代错误期间字典更改大小”。

例如：“当您尝试删除某个键时”，

只需将 'list' 与 '.items()' 一起使用，这是一个简单的示例：

```
my_dict = {
    'k1':1,
    'k2':2,
    'k3':3,
    'k4':4

    }

print(my_dict)

for key, val in list(my_dict.items()):
    if val == 2 or val == 4:
        my_dict.pop(key)

print(my_dict) 
```

+++ 输出：

{'k1'：1，'k2'：2，'k3'：3，'k4'：4}

{'k1'：1，'k3'：3}

+++

这只是示例，并根据您的案例/要求进行更改，我希望这会有所帮助。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-12-26T22:23:53.150

Python 3 不允许在迭代（使用上面的 for 循环）字典时删除。有多种选择；一种简单的方法是更改​​以下行

```
for i in x.keys(): 
```

和

```
for i in list(x) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-10-06T21:00:28.953

运行时错误的原因是，当数据结构在迭代过程中发生变化时，您无法迭代数据结构。

实现您正在寻找的一种方法是使用 list 来附加您要删除的键，然后在字典上使用 pop 函数在迭代列表时删除识别的键。

```
d = {'a': [1], 'b': [1, 2], 'c': [], 'd':[]}
pop_list = []

for i in d:
        if not d[i]:
                pop_list.append(i)

for x in pop_list:
        d.pop(x)
print (d) 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-03-15T08:11:00.333

```
dictc={"stName":"asas"}
keys=dictc.keys()
for key in list(keys):
    dictc[key.upper()] ='New value'
print(str(dictc)) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-10-30T20:41:08.113

对于这样的情况，我喜欢在修改原始字典时制作一个深层副本并循环遍历该副本。

如果查找字段在列表中，则可以在列表的for循环中枚举，然后将位置指定为索引以访问原始dict中的字段。

# jquery - PhotoSwipe 与手动无限滚动混淆

> ID：11941820
> 
> 赞同：0
> 
> 时间：2012-08-13T20:30:27.897
> 
> 标签：jquery, ruby-on-rails, gallery, infinite-scroll, photoswipe

我已经为我的个人网站建立了一个图片库，并且我有一个显示相册中照片缩略图的页面。示例标记如下：

```
<div class="photos">
  <a href="largephoto.jpg"><img src="smallPhoto.jpg" /></a>
  <a href="largephoto.jpg"><img src="smallPhoto.jpg" /></a>
  <a href="largephoto.jpg"><img src="smallPhoto.jpg" /></a>
  <a href="largephoto.jpg"><img src="smallPhoto.jpg" /></a>
  <a href="largephoto.jpg"><img src="smallPhoto.jpg" /></a>
</div> 
```

我在页面底部有一个按钮，它手动触发 Paul Irish 的无限滚动，它从下一页抓取下一批图像并将它们附加到 .photos。

现在，当访问者单击照片并能够滚动浏览它们时，我使用 PhotoSwipe 作为照片查看器。

我遇到的问题是您加载页面，单击第一张照片并开始滚动，您到达当前页面的最后一张照片，图片为图像 20，然后跳回图像 1。

我需要的是一种 PhotoSwipe 可以处理整批照片的方式，以便相册中的所有 80 张照片，而不是最初显示的前 20 张照片。

所以我想有两种选择：

1.  让 PhotoSwipe 在一组隐藏或背景的照片链接上工作，以便显示全部 80 个。

2.  当 photoSwipe 到达图像 20 时，它会触发手动无限滚动并将新照片附加到自身以供用户继续滚动。

我真的不确定如何实现这一点并让它以一种明显而简单的方式工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:26:16.837

也许有点晚了，但我在这里找到了你问题的答案：[https ://github.com/codecomputerlove/PhotoSwipe/issues/243](https://github.com/codecomputerlove/PhotoSwipe/issues/243)

具体来说，这段代码：

```
image={url: 'images/full/014.jpg', caption: 'Image 014'}
src = photoSwipeInstance.settings.getImageSource(image);
caption = photoSwipeInstance.settings.getImageCaption(image);
metaData = photoSwipeInstance.settings.getImageMetaData(image);
photoSwipeInstance.cache.images.push(new PhotoSwipe.Image.ImageClass(image, src, caption, metaData)); 
```

# c - 使用 strtok 解析数据

> ID：11941825
> 
> 赞同：0
> 
> 时间：2012-08-13T20:30:55.693
> 
> 标签：c, parsing, strtok

我有一行数据

```
211L    CRYST1   60.970   60.970   97.140   90.000   90.000  120.000  P 32 2 1         6 
```

我想在 C 中解析。具体来说，我想提取`P 32 2 1`为单个字符串。

当我使用 strtok 时，它使用所有空格作为分隔符，让我返回单个字符串

```
P
32
2
1 
```

更简洁的问题表述：

如果我有可变数量的字符串（在这种情况下为 4 个），我如何将它们连接成一个字符串？

到目前为止我的代码：

```
while (fgets(line,sizeof line, PDBlist)!=NULL)
{
    p=0;
    pch=strtok(line,"\t");
    sprintf(space[p],"%s",pch);

    while(pch!=NULL){
        pch=strtok(NULL," ");
        p++;
        sprintf(space[p],"%s",pch);

    }

for(i=8;i<(p-1);i++){

        if(i==(p-2))printf("%s\n",space[i]);
        else printf("%s ",space[i]);

        }   }* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:49:32.940

如果行的格式始终与发布的示例相同，则使用的替代方法`strtok()`是[`sscanf()`](http://en.cppreference.com/w/c/io/fscanf). 它为行内容提供了一定程度的验证，无需额外编码（例如，验证`float`值）：

```
const char* input = "211L    CRYST1   ....";
char first_token[32];
char second_token[32];
float float_1, float_2, float_3, float_4, float_5, float_6;
char last_token[32];

/* The '%31s' means read next sequence of non-whitespace characters
   but don't read anymore than 31\. 31 is used to leave space
   for terminating NULL character.

   '%f' is for reading a float.

   '%31[^\n]' means read next sequence of characters up to newline
   but don't read anymore than 31\. */
if (9 == sscanf(input, "%31s %31s %f %f %f %f %f %f %31[^\n]",
                first_token,
                second_token,
                &float_1,
                &float_2,
                &float_3,
                &float_4,
                &float_5,
                &float_6,
                last_token))
{
    /* Successfully read 9 tokens. */
} 
```

[请参阅http://ideone.com/To4ZP](http://ideone.com/To4ZP)上的在线演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:20:38.647

谢谢您的帮助！

这是我想出的解决方案：

如果您有可变数量的令牌，请首先为每个令牌创建一个数组：

```
while(pch!=NULL){
                pch=strtok(NULL," ");
                p++;
                sprintf(space[p],"%s ",pch);    

            } 
```

首先使用 strcpy 然后使用 strcat 提取所需的标记并将它们连接成单个字符串

```
 for(i=8;i<(p-1);i++){

                if(i==8)strcpy(dummy,space[i]);
                else strcat(dummy,space[i]);

            } 
```

再次感谢！我认为我在原来的问题中使问题变得更加混乱。如果您有任何建议，请让我知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T10:53:31.737

例如

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(){
    char line[128] = "211L    CRYST1   60.970   60.970   97.140   90.000   90.000  120.000  P 32 2 1         6\n";
    char field8_11[32];
    char *p, *field[13];
    int i=0;
    for(p=line;NULL!=(p=strtok(p," \t\n"));p=NULL){
        field[i++]=p;
    }
    sprintf(field8_11, "%s %s %s %s", field[8], field[9], field[10], field[11]);
    printf("%s\n", field8_11);
    return 0;
} 
```

# java - 多次使用 Box 变量

> ID：11941831
> 
> 赞同：2
> 
> 时间：2012-08-13T20:31:25.617
> 
> 标签：java, swing

我正在做一个任务，我必须创建三行三个盒子，每个盒子里都有一个从 1 到 9 的数字。出于某种原因，这段代码不起作用，它只打印一行，中间有一个 1：

```
import javax.swing.*;
import java.awt.*;

public class PracticeTwo extends JPanel {

  private JFrame mainFrame = new JFrame("");
  private Box bigBox = Box.createVerticalBox();
  private Box smallBox = Box.createHorizontalBox();
  private Box numBox = Box.createVerticalBox();

  public void makeGui () {

    mainFrame.add(bigBox);
    bigBox.setAlignmentX(Component.LEFT_ALIGNMENT);

    while (num < 10) {

    bigBox.add(smallBox);
    smallBox.add(numBox);
    numBox.add(numIncrement);
    smallBox.add(numBox);
    numBox.add(numIncrement);
    smallBox.add(numBox);
    numBox.add(numIncrement);
    num++;
    }

    mainFrame.setVisible(true);
    mainFrame.pack();
  }
} 
```

我想我的问题是：我可以多次使用同一个 Box 变量来使创建这个 GUI 更容易，还是每次制作同一种盒子时都必须创建不同的变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:33:29.110

由于 a`Box`只是 another `JComponent`，因此您必须为组件层次结构中的每个位置创建一个单独的。换句话说，你不能重复使用一个`Box`，就像你不能重复使用一个一样`JTextField`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T20:38:16.737

Variables are used to hold references to object instances so that you can access these instances later when needed. Using variables isn't the only way you can keep these references handy. Another way is via data structures. Some examples of data structures are: arrays, trees, lists, tables, etc. I guess at this point in your course you may not have yet learned about how to use data structures, so having to define multiple variables is fine for now. In real code, you wouldn't be doing this.

# javascript - 使用jquery按类隐藏同一父级内的元素

> ID：11941834
> 
> 赞同：1
> 
> 时间：2012-08-13T20:31:39.207
> 
> 标签：javascript, jquery, dom, onclick

采取以下html：

```
<div class="box">
<a href="javascript:;" onclick="toggle_content(1)">Toggle</a>
<h2>Some Title</h2>
<div class="box_content box_content_1"></div>
<div class="box_content box_content_2"></div>
</div>

<div class="box">
<a href="javascript:;" onclick="toggle_content(1)">Toggle</a>
<h2>Some Title</h2>
<div class="box_content box_content_1"></div>
<div class="box_content box_content_2"></div>
</div>

<script>
function toggle_content(key){
   $('.box_content_'+key,$(this).parent()).toggle();
}
</script> 
```

基本上，当单击切换链接时，我希望切换具有匹配类名的同一父级内的元素。上面的代码似乎没有做任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:36:18.157

`$(this).parent()`不是指你认为它做了什么。`this`在这种情况下是什么？窗户。

以下将起作用：

```
$('.box_content_'+key,".box").toggle(); 
```

不过，我会这样做：

HTML

```
<a href="#" class="toggle" data-toggle-id="1">Toggle</a> 
```

jQuery

```
$(".toggle").click(function() {
  var key = $(this).data("toggle-id");
  console.log(key);
  $('.box_content_'+key, $(this).parent()).toggle();
}); 
```

[**演示**](http://jsbin.com/oyagep/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T20:36:56.080

当您使用 jQuery 时，您可以使用 jQuery`click`和`siblings()`方法，请尝试以下操作：

> 获取匹配元素集中每个元素的兄弟姐妹，可选地由选择器过滤。

```
$('.box a').click(function(){
   $(this).siblings('.box_content_1').toggle()
}) 
```

* * *

您可以使用`data=*`属性来选择锚点的目标元素：

```
<div class="box">
   <a href="#" data-toggle="1">Toggle</a>
   <h2>Some Title</h2>
   <div class="box_content box_content_1"></div>
   <div class="box_content box_content_2"></div>
</div>

<div class="box">
   <a href="#" data-toggle="2">Toggle</a>
   <h2>Some Title</h2>
   <div class="box_content box_content_1"></div>
   <div class="box_content box_content_2"></div>
</div> 
```

```
$('.box a').click(function(e){
    e.preventDefault();
    var which = $(this).data('toggle');
    $(this).siblings('.box_content_'+ which).toggle()
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T20:37:47.263

试试这个**[jsFiddle 示例](http://jsfiddle.net/j08691/tveyF/)**。

**HTML**

```
<div class="box">
<a href="javascript:;" onclick="toggle_content(1,$(this))">Toggle</a>
<h2>Some Title</h2>
<div class="box_content box_content_1">a</div>
<div class="box_content box_content_2">b</div>
</div>
<div class="box">
<a href="javascript:;" onclick="toggle_content(2,$(this))">Toggle</a>
<h2>Some Title</h2>
<div class="box_content box_content_1">a</div>
<div class="box_content box_content_2">b</div>
</div>​ 
```

**jQuery**

```
function toggle_content(key,link){
   link.siblings(".box_content_"+key).toggle();
}​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/VLhQw/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T20:37:57.733

我有你的答案！

**HTML：**

```
<div class="box">
    <a href="javascript:toggle_content(1);">Toggle</a>
    <h2>Some Title</h2>
    <div class="box_content box_content_1">1</div>
    <div class="box_content box_content_2">2</div>
</div> 
```

**JS：**

```
function toggle_content(key) {
    $('.box_content_' + key).toggle();

}​ 
```

**[演示](http://jsfiddle.net/PWvsj/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T20:46:10.503

`this`您可以使用设置in`toggle_content`的上下文[`call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)

```
onclick="toggle_content.call(this, 1)" 
```

[http://jsfiddle.net/eyWBq/](http://jsfiddle.net/eyWBq/)

# perl - 催化剂全局子程序

> ID：11941836
> 
> 赞同：1
> 
> 时间：2012-08-13T20:31:47.060
> 
> 标签：perl, global, catalyst, subroutine

在我正在构建的 Catalyst 应用程序中，我有几个子例程基本上做同样的事情，但它们都位于应用程序的不同部分。Catalyst 中是否有一个中心位置，我可以从应用程序的任何位置调用子例程？我想避免重复代码。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T21:30:49.637

不知道这是否是最佳实践，但我没有任何问题将我的主模块与这样的功能混淆。然后可以从任何有您的上下文对象的地方（即任何地方）轻松调用它们。

```
 package MyApp;
 ...
 sub my_frequently_used_sub {
     my ($c, @args) = @_;
     ...
 }

 package MyApp::Controller::Foo;
 ...
 sub some_action :Path {
     my ($self, $c, @args) = @_;
     ...
     my $result = $c->my_frequently_used_sub();
     ...
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T21:37:36.747

`Catalyst`基于[`Moose`](http://metacpan.org/module/Moose)现在。您可以使用[它的角色](http://metacpan.org/module/Moose%3a%3aManual%3a%3aRoles)作为解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T13:10:53.567

如果这些函数应该在您的 Catalyst 应用程序之外可用，例如因为它们被您的模型使用，它们应该进入一个完全独立的模块。如果它们确实是特定于 Catalyst 的，您可能想要创建可以转发或分离的私有操作，例如 403 not allowed 或 404 not found 错误页面。如果它们只是普通的 Perl 子程序，您可以按照 mob 或 Root 控制器的建议将它们放在应用程序类中。您能说出一些功能，以便我们为您提供更好的解决方案吗？

# sql - PLSQL：更改年份的前两位数

> ID：11941838
> 
> 赞同：0
> 
> 时间：2012-08-13T20:32:21.937
> 
> 标签：sql, plsql

日期列中的某些日期的年份不正确。如何更改年份的前两位数字？

例如：

```
select 
ID,
to_char(END_DT,'yyyy-mm-dd hh:mi:ss') as dt
From DB 
```

结果：

```
ID   dt
1    0207-08-10 12:00:00
2    0208-03-31 12:00:00
3    0200-11-10 12:00:00 
```

我希望结果如下所示：

```
ID   dt
1    2007-08-10 12:00:00
2    2008-03-31 12:00:00
3    2000-11-10 12:00:00 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:36:43.757

如果您只想“获取”正确的日期，您可以使用类似

```
select 
  substr(to_char(END_DT,'yyyy'),2,1) ||
  substr(to_char(END_DT,'yyyy'),1,1) || 
  substr(to_char(END_DT,'yyyy'),3,2) ||'-'||
  to_char(END_DT,'mm-dd hh:mi:ss')
  as dt
From DB; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:02:37.773

如果这是一致的格式问题，则以下逻辑应该可以解决问题：

```
select (case when left(to_char(END_DT, 'yyyy'), 2) = '02'
             then '20'||substr(to_char(END_DT,'yyyy-mm-dd hh:mi:ss'), 3, 100)
             else to_char(END_DT,'yyyy-mm-dd hh:mi:ss')
        end) as BetterFormat 
```

这假设问题在于前两位数字颠倒了，并且这在 2000 年之前没有发生。

但是，我必须强调，数据库中的数据不正确。正确的做法是修复数据库中的数据。从中期来看，掩盖问题可能会使事情变得更糟。

# .net - 终端服务：第二个并发用户导致部署的 .NET 应用程序实例崩溃

> ID：11941844
> 
> 赞同：1
> 
> 时间：2012-08-13T20:32:45.203
> 
> 标签：.net, service, concurrency, terminal, rdp

以下是我试图解决的事实模式：

其客户端 (WinForms) 和服务器 (WCF Soap) 组件部署到同一终端服务器的应用程序。

有两个用户试图通过 RDP 远程访问桌面应用程序。这个应用程序完全依赖与 SOAP 服务器的连接——没有直接的 SQL Server 访问。

当第二个用户同时登录第一个用户在他们的 RDP 会话中运行桌面应用程序时，他的桌面应用程序实例立即崩溃。Windows 提供了解决问题的方法，但显然没有任何结果。

第一个用户的会话不受故障的影响，并按预期工作。

奇怪的是，当两个用户都是管理员时，他们都可以在各自的会话中同时访问应用程序。

我不是系统管理员，这听起来像是配置问题。任何关于根本原因可能是什么以及我们如何进一步解决问题的想法将不胜感激。

# mysql - 将数据从矩阵转换为矢量格式

> ID：11941845
> 
> 赞同：0
> 
> 时间：2012-08-13T20:32:48.657
> 
> 标签：mysql, excel

我在以下格式的 excel 文件中有大量数据

```
School_id   percentage  year    subject

1100        90          2005    maths
1100        95          2006    maths
1100        81          2005    science
2310        45          2007    biology 
```

我想将此数据转换为这种格式

```
School_id   year    maths   science  biology

1100        2005    90      81
1100        2006    95
23100       2007                      45 
```

我不知道如何进行这种转换。使用 excel 或 mysql 或任何其他工具可以做到这一点吗？需要一些建议。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:55:42.207

是的，就像他们说的数据透视表一样。为了得到你的结果，我必须使用 CONCATENATE 函数。可能有更好的方法。但这就是我的做法：

首先做一个CONCATENATE列： ![连接柱](../Images/9af7f28bbc5e769f0f6bfd05d66092fd.png)

然后插入您的数据透视表并选择正确的选项： ![数据透视表](../Images/fc75f3a66d484e9ca5e88fc068bbd657.png)

然后去连接你的 School_id 和 Year ![去连接 1](../Images/d39f267713ce615f35989f200f9609c1.png) ![去连接 2](../Images/8769058a01245fe74c3b06c4ccd73355.png)

就像我说的那样，可能有更好的方法来做到这一点 - 但是你只需要按照你想要的方式组织你的标题，你应该有你正在寻找的东西。祝你好运。

# jquery - 更改 jQuery mobile 中数据过滤器的默认行为

> ID：11941848
> 
> 赞同：0
> 
> 时间：2012-08-13T20:32:56.453
> 
> 标签：jquery, listview, jquery-mobile

我有一个带有`data-filter="true"`属性的无序列表。过滤框为空时如何隐藏列表项？我应该覆盖默认的列表视图行为吗？如何？

这实际上是一种解决方法，以便在每个可折叠块中使用 UL 过滤可折叠集。我最后要做的是显示带有隐藏内容的数据过滤器和可折叠集，因此如果用户选择使用过滤器，则应隐藏可折叠集，并且只会显示过滤后的结果。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:23:36.977

不幸的是，没有办法为此覆盖 jquery mobile 的默认行为。您需要在 jquery 移动代码之上添加您的处理。尝试以下操作：

为此，您需要按如下方式定义样式表：

```
 .ui-hidden-component {
    display: none !important;
  } 
```

并添加以下脚本代码：

```
$(document).delegate('[data-role="page"]', 'pageinit', 
      function() { 
        var $listview = $(this).find('[data-role="listview"][data-filter="true"]'); 
        $(this).delegate('input[data-type="search"]', 'keyup change', 
          function () { 
            var $this = $(this); 
            if ($this.val() == '') {
              $listview.children().addClass("ui-hidden-component");
            } else {
              $listview.children().removeClass("ui-hidden-component");
            }
          });
        if ($('input[data-type="search"]').val() == '') {
          $listview.children().addClass("ui-hidden-component");
        }
    }); 
```

# ajax - $request->isXmlHttpRequest() 在 symfony2 中可靠吗？

> ID：11941849
> 
> 赞同：10
> 
> 时间：2012-08-13T20:33:00.653
> 
> 标签：ajax, symfony

让我们考虑如下场景：

1.  用户选择过滤器按钮，该按钮创建对 symfony2 控制器的 AJAX 调用并以 JSON 格式返回结果。
2.  用户选择其他一些链接，系统会将他重定向到该页面
3.  用户选择浏览器后退按钮。
4.  用户将看到 JSON 响应，但他应该看到原始页面。

我的控制器如下所示：

```
/**
 * 
 *
 * @Route("/ajax", name="ajax_route" , options={"expose"=true})
 * @Template()
 */
public function someAction()
{
    $request = $this->getRequest();

    $json = array( );

    if($request->isXmlHttpRequest())
    {

        $res = json_encode($json);

        return new Response($res , 200 , array( 'Content-Type' => 'application/json' ));
    }

    return array( );
} 
```

换句话说，如果用户按下返回按钮，则`if($request->isXmlHttpRequest())`返回 true，这不是我正在寻找的结果。这是正常行为还是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T21:11:40.997

[`Symfony\Component\HttpFoundation\Request::isXmlHttpRequest()`](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php#L1612)是一个简单的实用方法，用于检查 HTTP 请求是否带有`X-Requested-With`带有 value 的标头`XMLHttpRequest`。`X-Requested-With`所以它和标题一样可靠。

然而，这并不是很重要。需要注意的重要一点是，当用户单击后退按钮时，浏览器不会**向**服务器发送新的 HTTP 请求。它只是从其内部存储器/缓存中恢复页面。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-28T14:29:00.277

我知道这是一个老问题，但同样的问题刚刚引起了我的注意，所以我想我还是会写一个答案。

在大多数情况下，您可以通过将 onUnload 处理程序附加到窗口来使后退按钮缓存无效，如下所示：

```
window.addEventListener('unload',function(){}); 
```

或者，如果您更喜欢 jQuery：

```
$(window).unload(function(){}); 
```

但是，由于您的 AJAX 响应是 JSON 格式，这显然是不可能的，因为您不能包含脚本片段。在这种情况下，我认为最好的办法是设置`cache-control: no-store`标头，这样浏览器就不会尝试缓存结果。

您可以在 OP 的情况下使用 Symfony2 执行此操作：

```
return new Response($res , 200 , array(
    'Content-Type' => 'application/json',
    'Cache-Control' => 'no-store',
)); 
```

或者对于更一般的 PHP：

```
header('Cache-Control: no-store'); 
```

这里有一个警告，它可能会大大降低您的性能，具体取决于您的应用程序的结构，在这种情况下，您最好的选择可能是为您的 AJAX 调用使用不同的 URL。糟透了，我知道。

[您可以在此处](https://developer.mozilla.org/en-US/docs/Using_Firefox_1.5_caching)找到有关 bfcache 的一些文档，这在不同情况下可能会更有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-31T23:28:51.373

浏览器仅使用 url 和请求方法（GET、POST 等）作为键来缓存响应。

如果您希望浏览器识别其他变体，您可以通过在响应中设置 Vary 标头来告诉它这样做。因此，在您的情况下，您想告诉浏览器来自服务器的响应将根据请求中是否设置了“X-Requested-With”标头而有所不同。

这是如何做到的：

```
$response = new Response();

$response->setVary("X-Requested-With"); // <=========== Set the Vary header

if($request->isXmlHttpRequest()) {
    //...
}

return $response; 
```

注意：您想在两个版本的响应上设置 Vary 标头（这就是我在 if 语句之外设置它的原因）。

# c++ - 从 Win32 包装器 WndProc 调用另一个类中的函数

> ID：11941858
> 
> 赞同：0
> 
> 时间：2012-08-13T20:33:28.673
> 
> 标签：c++, winapi

我有一个带有功能 WndProc 的 win32 包装类（我使用静态 wndproc 将消息转发到 WndProc 成员函数）。

我还有另一个应用程序类，它创建了我的 win32 包装类的实例。

我希望应用程序类的用户能够编写自己的表示事件的函数，例如 OnMouseClick() 或 OnMouseMove()，但为了使其工作，我需要从 win32 包装器调用事件函数类的 Wndproc（不了解应用程序类）。

最好的方法是什么？我应该将指向每个事件函数的指针发送到我的 win32 包装类，并通过指针调用它吗？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:42:49.757

您的课程结构及其用途尚不清楚。然而，包装类的典型推荐结构如下：

```
class BaseClass
{
public:
    virtual void OnMouseClick(...) { }   // Empty body
    virtual void OnMouseMove(...) { }   // Empty body
};

class AppClass : public BaseClass
{
public:
    void OnMouseClick(...) { AppCode }
    void OnMouseMove(...) { AppCode }
}; 
```

基类在其静态 WndProc 处理程序中接收 Windows 事件时调用虚拟方法。这会触发应用程序代码的执行。

# jquery - 如何获取单击状态以覆盖 jQuery 中的悬停状态

> ID：11941859
> 
> 赞同：3
> 
> 时间：2012-08-13T20:33:29.923
> 
> 标签：jquery, css, slidedown, slideup

我认为这应该是一个简单的解决方法，或者我可能走错了路。

我有一个手风琴菜单，点击一个按钮就可以上下滑动。激活手风琴的按钮具有静态、悬停和单击状态，只需更改文本颜色即可。

一切正常，除非您在向下滚动页面**后关闭手风琴菜单。**浏览器窗口向上移动折叠手风琴，但它从不激活悬停功能，因此按钮保持单击状态。如果您将鼠标悬停在按钮上，一切都会恢复到应有的状态。

有没有办法让点击状态覆盖悬停关闭状态，所以它回到静态颜色？

有一些代码。它可能有助于解释我在说什么。

[我在这里](http://jsfiddle.net/fpFCj/)做了一个小提琴

您将无法真正看到问题的实际情况，因为它都在独立的小提琴盒中。

让我知道我是否可以尝试进一步解释这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:50:15.670

您应该将更改下拉菜单颜色的代码放在动画完成后要执行的函数中。

代替：

```
 submenu.stop().slideDown('fast');
 $(this).css('color','#000'); 
```

采用：

```
submenu.stop().slideDown('fast', function() { 
    dropdown.css('color','#000');  //this part gets executed after the animation
}); 
```

这是更新的小提琴：http: [//jsfiddle.net/fpFCj/2/](http://jsfiddle.net/fpFCj/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T20:50:50.913

正如 Sam Dufel 所说，使用`:hover`会产生更好的结果。您还可以使用类而不是直接设置 css 属性，这样浏览器将为您完成决定在某个特定时刻显示哪种样式的艰巨工作。

```
.dropdown.expanded {
    color:#000;
}

.dropdown.collapsed {
    color:#BDBDBD;
}

.dropdown:hover {
    color:#6e6e6e;
}

...

// Remove the whole $.hover

if (submenu.is(":hidden")) {
    submenu.stop().slideDown('fast');
    $(this).removeClass("collapsed").addClass("expanded");
}
else {
    submenu.stop().slideUp('fast');
    $(this).removeClass("expanded").addClass("collapsed");
} 
```

在[jsFiddle](http://jsfiddle.net/fpFCj/3/)演示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T21:03:43.317

```
$('.dropdown').on({
    click: function() {
        $(this).css('color', $(this).siblings('.sublinks').is(":hidden") ? '#000' : '#BDBDBD')
               .siblings('.sublinks').stop().slideToggle('fast');
    },
    mouseenter: function() {
        if (!$(this).next().is(":visible")) $(this).css('color','#6e6e6e');
    },
    mouseleave: function() {
        if (!$(this).next().is(":visible")) $(this).css('color','#BDBDBD');
    }
}); 
```

[小提琴](http://jsfiddle.net/fpFCj/4/)

# opengl - OpenGL投影裁剪

> ID：11941861
> 
> 赞同：2
> 
> 时间：2012-08-13T20:33:43.697
> 
> 标签：opengl, opengl-3

例如，如果我们有正射投影：

```
left = -aspect, right = aspect, top = 1.0, bottom = -1.0, far = 1.0, near = -1.0 
```

并将在 -2.0 处绘制三角形，它将被剪裁平面附近的剪裁切掉。它真的会节省一些宝贵的渲染时间吗？

剔除决定我们是否需要绘制某些东西，如果超出我们的视野则丢弃（由程序员在顶点着色器/主程序中编写）。剪裁 == 便宜的自动剔除？

也只是在廉价剔除的主题 - 将是

```
if(dist(cam.pos, sprite.pos) < MAX_RENDER_DIST)
draw_sprite(sprite); 
```

只够简单的 2d 游戏吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T21:18:17.997

对于 x、y 和 z，默认 OpenGL 裁剪空间为 -1 到 +1。

精灵距离的条件测试将起作用。这有点不需要，因为远剪裁平面几乎可以做同样的事情。通常它已经足够好了。在某些情况下需要进行测试。剪切平面内拐角处的对象可能会随着相机转动而出现在远剪切平面之外。原因是相机到角点的距离大于相机到远裁剪平面的垂直距离。如果您有 2D 游戏并且不允许更改摄像机视角，这不是问题。

如果你有一个简单的 2D 游戏，你很有可能不需要担心图形优化。如果您在剪裁平面之外绘制精灵，您可以节省时间。但是你节省多少时间取决于。如果大量精灵在外面，您可以节省大量时间。但是，您可能应该考虑使用什么算法，而不是绘制无论如何都不会显示的东西。如果只有一小部分精灵在外面，那么节省的时间将可以忽略不计。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T21:21:49.897

GPU 中的裁剪问题在于它在[管道](http://www.opengl.org/wiki/Rendering_Pipeline_Overview)中发生得相对较晚，就在光栅化之前，因此很多计算可能已经白费了。

在 CPU 上执行可以避免这些计算的发生，而且非常重要的是，可以减少实际绘制命令的数量（这也可能是一个瓶颈）。

但是，您确实希望在 CPU 中快速执行此操作，通常您将使用[八叉树](https://en.wikipedia.org/wiki/Octree)或类似的树来表示数据，以便您可以一次丢弃整个子树。如果您必须分别检查每个多边形甚至对象，这可能会变得很昂贵。

总而言之：有用性取决于瓶颈所在的位置（cpu、顶点着色器、传输速率……）。

# oracle - 如何为未知级别的钻取构造查询

> ID：11941870
> 
> 赞同：1
> 
> 时间：2012-08-13T20:34:40.640
> 
> 标签：oracle, coldfusion

我拥有的是存储在 Oracle 中的一堆类别和子类别。这种关系仅以一种方式表示：每一行都有一个 categoryid 和一个 parentid，如果它有一个，则它是该行的父级的 categoryid。如果没有父级，则 parentid 为 0。即：

**工具：** categoryid，1；父母，0

**材料：** categoryid，2；父母，0

**锤子：** categoryid，3；父母，1

**钉子：** categoryid，4；父母，2

**等等**

在另一张桌子上，我有物品。它们每个都有唯一的 ID 和相关的 categoryid：

**短指甲：** itemid，1个；类别ID，4

**长指甲：** itemid，2；类别ID，4

**双面：** itemid，3；类别ID，3

**橡胶：** itemid，4；类别ID，3

**等等**

我正在使用coldfusion 构建一个“浏览类别”网络应用程序。当他们选择一个类别时，结果表应该从所选类别中提取所有项目，以及该类别子类别中的项目。也就是说，如果使用选择的类别工具，则没有项目的 categoryid 为 1，但有两个项目的 categoryid 为 3，这是工具的子类别，因此应显示这些项目：

**单击“工具”链接>>显示双面和橡胶锤**

我现在遇到的问题是无法判断类别的范围。类别列表可能有数百行长，类别/子类别关系种类繁多。目前，有一个 6 级深的子类别。

我的问题是我应该如何构造我的查询而不用无休止的“如果一个类别的父 id 为*任何*然后查询项目”？这不可能是唯一的方法。查询具有所选 categoryid 的 parentid 的类别，然后查询具有在上一个查询中找到的那些类别的 parentid 的类别，然后用新结果再次重复，然后用新结果再次重复，每次以指数方式增加查询的数量 I将是手工编码！

我最初的反应是这样做：循环一个最初填充有第一个“parentid 查询”的数组。当它循环通过时，查询每个数组项的 parentid。如果找到任何东西，请将其添加到当前循环的数组中。像这样的东西：

```
<!--- populate Inital 'parentid query' array --->
<cfset newArray = ArrayNew(1)>
<cfloop from="1" to="10" index="i">
    <cfset #ArrayAppend(newArray,i)#>
</cfloop>

<!--- if parentid is found for index, add to newArray --->
<cfloop array="#newArray#" index="i">
    <query for parentid with 'i'>
    <if successful>
        ArrayAppend(newArray,everythingTheQueryFoundWithParentIdOfI)
    </if>
</cfloop> 
```

但是我发现在循环中附加到数组是有效的代码，但实际上并没有增加循环的迭代次数。:/ 将循环设置为整数变量并增加它。有什么想法我能做什么？感谢您阅读我的长文哈哈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:30:51.443

您的查询可以使用 connect_by 语法：

```
SELECT cat.cat_desc, items.item_desc
  FROM cat JOIN items ON cat.category_id = items.category_id
 START WITH cat.category_id = 1  -- ID of the starting category
 CONNECT BY PRIOR cat.category_id = cat.parent_category_id; 
```

# apache-flex - Flex Spark Datagrid 单元格 1 * 单元格 2 存储在单元格 3 中

> ID：11941873
> 
> 赞同：0
> 
> 时间：2012-08-13T20:34:47.177
> 
> 标签：apache-flex, datagrid, flex-spark

我对数据网格和火花有点陌生，并且一直在绞尽脑汁想弄清楚这一点。我有一个使用 XMLList 加载的数据网格。一个字段是一个数值，将计算乘以另一个字段，并且该结果将即时存储并显示在网格中。

例子：

XML

```
<SampleTable>
 <Row>
  <Item>Item 1</Item>
  <Quantity>10</Quantity>
  <Price></Price>
  <Cost></Cost>
 </Row>
</SampleTable> 
```

因此，用户将输入价格，并且成本将在网格中更新为价格 * 数量值，并在保存表单时使用结果更新数据提供者。

添加网格并且 XML 已经绑定。我可以对单元格进行简单的更新以使其正常工作。我需要帮助弄清楚在哪里进行计算。只有价格是可编辑的，当该单元格更改值时，我希望计算成本。

编辑会话的处理程序：

```
 import spark.components.gridClasses.CellPosition;
        import spark.events.GridEvent;
        private var mouseDownRowIndex:int;
        private var mouseDownColumnIndex:int;
        protected function dataGrid_gridMouseDownHandler(event:GridEvent):void
        {
            mouseDownRowIndex = event.rowIndex;
            mouseDownColumnIndex = event.columnIndex;
        }

        protected function dataGrid_gridMouseUpHandler(event:GridEvent):void
        {
            // Start a grid item editor if:
            // - the rowIndex is valid
            // - mouseUp is on the same cell and mouseDown
            // - shift and ctrl keys are not down
            // - cell is editable
            // - an editor is not already running
            // An editor may already be running if the cell was already
            // selected and the data grid started the editor.
            if (event.rowIndex >= 0 &&
                event.rowIndex == mouseDownRowIndex && 
                event.columnIndex == mouseDownColumnIndex &&
                !(event.shiftKey || event.ctrlKey) &&
                event.column.editable &&
                !event.grid.dataGrid.itemEditorInstance)
            {
                event.grid.dataGrid.startItemEditorSession(event.rowIndex, event.columnIndex);
            }
        }

<s:DataGrid id="dgTest" x="10" y="68" width="900" editable="true" electionMode="singleCell" requestedRowCount="4"                   gridMouseDown="dataGrid_gridMouseDownHandler(event)" gridMouseUp="dataGrid_gridMouseUpHandler(event)">
<s:columns>
<s:ArrayList>
<s:GridColumn width="250" dataField="Item" headerText="Item" resizable="true" sortable="false" editable="false"></s:GridColumn>
<s:GridColumn width="160" dataField="Quantity" headerText="Quantity" resizable="false" sortable="false" editable="false"></s:GridColumn>
<s:GridColumn width="90" dataField="Price" headerText="Price" resizable="false" sortable="false" ></s:GridColumn>
<s:GridColumn width="90" dataField="Cost" headerText="Cost" resizable="false" sortable="false" editable="false"></s:GridColumn>
</s:ArrayList>
</s:columns>
</s:DataGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T21:45:19.190

使用 itemrenderer 让它工作。这很丑陋但有效。

我遇到的问题是将此事件移动到更改 PercentComplete 字段而不是该字段上的单击事件时。这是我遇到麻烦的时机。

```
 <s:GridColumn width="90" dataField="Extension" headerText="Extension" resizable="false" sortable="false" rendererIsEditable="true">
                    <s:itemRenderer>
                        <fx:Component>
                            <s:GridItemRenderer mouseDown="itemrenderer1_dataChangeHandler(event)">
                                <fx:Script>
                                    <![CDATA[
                                        import mx.events.FlexEvent;
                                        import spark.events.GridEvent;

                                        protected function itemrenderer1_dataChangeHandler(event):void
                                        {

                                            if(data){
                                                var data_field:String = ((parseFloat(data['PercentComplete'])/100)*parseFloat(data['Weight'])).toFixed(2).toString();
                                                this.dataLabel.text = data_field;
                                                data.Extension[0] = data_field;
                                            }
                                        }
                                    ]]>
                                </fx:Script>
                                <s:Label id="dataLabel" text="{data.Extension}" height="100%" width="100%" textAlign="left" verticalAlign="middle"/>

                            </s:GridItemRenderer>
                        </fx:Component>
                    </s:itemRenderer>
                </s:GridColumn> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T07:56:30.617

Datagrid 是数据源的所有者，而不是 GridItemRenderer。因此，您不应使用 mouseDownEvents。（当 Tab 穿过你的单元格时会发生什么？）。您甚至可以考虑将这种业务逻辑从您的视图移到您的控制器（或您的模型）中。

对于您的示例，您真的不需要“花哨”的 GridItemRenderer。一切都必须在您的数据网格之外计算。

spark Datagrid 有一个称为“gridItemEditorSessionSave”的事件。

> **spark.components.DataGrid.gridItemEditorSessionSave**
> 
> 在项目编辑器中的数据保存到数据提供者并关闭编辑器后调度。
> 
> **事件类型：** spark.events.GridItemEditorEvent.GRID_ITEM_EDITOR_SESSION_SAVE
> 
> **语言版本：** 3.0
> 
> **播放器版本：** Flash 10、AIR 2.5
> 
> **产品版本：** Flex 4.5

就我个人而言，我会实现一个 Bindable ValueObject 并将我的 XMLList 转换为 IList 实现，例如和 ArrayCollection，其中包含一组这些对象。示例如下：

```
[Bindable]
public class MyValueObject
{
   public var percentComplete:Number;
   public var weight:Number;

   public function get extension():Number
   {
      return percentComplete*weight;
   }
} 
```

如果您使用这些 ValueObject 填充数据网格，您可以使用哑视图，甚至更好的是，您可以使用您喜欢的任何视图，而无需更改您的实际应用程序。（这不是面向对象编程的目的吗？）

这个问题与第一个问题完全不同。我愿意提供答案，但你应该自己做一些研究。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T13:55:50.213

您应该使您的数据源可绑定。

所以在代码（AS）中，这将是：

```
[Bindable]
var myXMLList:XMLList; 
```

但是，我认为不可能绑定到 XMLList。您应该改用 XMLListCollection。

我仍然不清楚您是想将数据保存在某处，还是只想可视化......

s:GridColumn 有一个名为“labelFunction”的属性。也许这足以满足您的需求。

```
public function myLabelFunction(item:Object, column:DataGridColumn):String
{
    var amount:Number = item.Quantiy;
    var price:Number = item.Price;
    return amount*price as String
} 
```

在你的例子中

```
<s:GridColumn width="90" dataField="Cost" headerText="Cost" resizable="false"  sortable="false" editable="false"></s:GridColumn> 
```

会变成

```
<s:GridColumn width="90" dataField="Cost" headerText="Cost" resizable="false"  sortable="false" editable="false" labelFunction="myLabelFunction"></s:GridColumn> 
```

提供的代码绝不是完整的。它作为一个例子。

祝你好运。

# c# - 如何将 UserControl xaml 保存到 XML 文件，而不是获取所有不必要的详细信息？

> ID：11941874
> 
> 赞同：0
> 
> 时间：2012-08-13T20:34:48.750
> 
> 标签：c#, xaml

我正在尝试将以下 UserControl 保存到文件中：

```
<local:MyUserControl Name="uc1" ></local:MyUserControl> 
```

我正在使用以下代码将用户控件保存到文件中：

```
FileStream fs = new FileStream("File.xml", FileMode.Open, FileAccess.ReadWrite);
System.Windows.Makrup.XamlWriter.Save(uc1, fs); 
```

这有效，只是输出不仅仅是上面的一行。它列出了我的用户控件（标签、文本框、组合框等）中的所有 XAML。

当我将多个用户控件实例保存到一个 .xaml 文件中，然后尝试重新读取该 XAML 文件时，XamlReader 会出现使用相同名称的问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:15:16.417

基于这篇文章：

[http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/cdf0cf6c-3f8e-42cf-a81e-008f3af3b95c/](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/cdf0cf6c-3f8e-42cf-a81e-008f3af3b95c/)

我发现不允许在用户控件中命名控件。自定义控件似乎是更好的方法。

# javascript - 正确抑制数据表中的警告？

> ID：11941876
> 
> 赞同：30
> 
> 时间：2012-08-13T20:34:53.550
> 
> 标签：javascript, jquery, jquery-datatables

我正在尝试正确抑制 DataTables 中的警告（警报）。DataTables 的标准行为是在发生错误时抛出 javascript 警报；但是，这对我来说目前不方便。我一直在尝试将警告转换为 javascript 错误

```
$.fn.dataTableExt.sErrMode = 'throw'; 
```

哪个工作正常，但这会停止当前的 javascript 执行，这不是我想要的。因此，我将 DataTables 操作（初始化和更改）包装在一个没有错误处理的 try-catch 中；但是，这也会停止 javascript 的执行。（在 Chrome 和 Firefox 上测试）

我的问题是如何摆脱这些错误/警报以进行调试？我正在尝试调试我的脚本的其他部分，但这些警报一直在妨碍我。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-12-04T21:49:57.563

我使用此闭包函数修改了本机警报，以将 DataTables 警告重定向到控制台。

```
window.alert = (function() {
    var nativeAlert = window.alert;
    return function(message) {
        window.alert = nativeAlert;
        message.indexOf("DataTables warning") === 0 ?
            console.warn(message) :
            nativeAlert(message);
    }
})(); 
```

它在第一次触发时将其恢复`window.alert`到其本机功能。如果您不希望它恢复到原始警报，只需注释掉该`window.alert = nativeAlert;`行。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-01-17T05:53:55.173

[这是此处提出](https://datatables.net/forums/discussion/14680/warning-level-control-with-suggestion)的解决方案，该解决方案稍作修改，可在 v1.10.2 中使用，无需更改任何供应商文件：

```
$.fn.dataTableExt.sErrMode = "console";

$.fn.dataTableExt.oApi._fnLog = function (oSettings, iLevel, sMesg, tn) {
  var sAlert = (oSettings === null)
    ? "DataTables warning: "+sMesg
    : "DataTables warning (table id = '"+oSettings.sTableId+"'): "+sMesg
  ;

  if (tn) {
    sAlert += ". For more information about this error, please see "+
              "http://datatables.net/tn/"+tn
    ;
  }

  if (iLevel === 0) {
    if ($.fn.dataTableExt.sErrMode == "alert") {
      alert(sAlert);
    } else if ($.fn.dataTableExt.sErrMode == "thow") {
      throw sAlert;
    } else  if ($.fn.dataTableExt.sErrMode == "console") {
      console.log(sAlert);
    } else  if ($.fn.dataTableExt.sErrMode == "mute") {}

    return;
  } else if (console !== undefined && console.log) {
    console.log(sAlert);
  }
} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-03-02T23:06:38.667

**注意：这个答案适用于 dataTables 1.9.x！**

`$.fn.dataTableExt.sErrMode`唯一重要的是“警觉” 。它是“警报”或其他任何东西。`sErrMode`由内部调度程序函数处理`_fnLog`，在 v1.9.2 中关于第 4575 行`media/js/jquery.dataTables.js`：

```
function _fnLog( oSettings, iLevel, sMesg )
{
    var sAlert = (oSettings===null) ?
        "DataTables warning: "+sMesg :
        "DataTables warning (table id = '"+oSettings.sTableId+"'): "+sMesg;

    if ( iLevel === 0 )
    {
        if ( DataTable.ext.sErrMode == 'alert' )
        {
            alert( sAlert );
        }
        else
        {
            throw new Error(sAlert);
        }
        return;
    }
    else if ( window.console && console.log )
    {
        console.log( sAlert );
    }
} 
```

不幸的是，没有办法覆盖 dataTables 的内部函数，相信我 - 我已经尝试过了，原型或其他任何东西都不可能。您可以在[**此处**](http://datatables.net/forums/discussion/1150/overriding-a-function/p1)阅读作者 Allan Jardines 对此的评论：

> 很抱歉，由于目前 DataTables 的构造方式，无法使用 DataTables 范围之外的 Javascript 覆盖内部函数。每当我开始做 2.x 系列（可能需要一段时间！）时，都会解决这个问题 - 但目前您需要更改核心。

有人可能会想：*嘿，也许 iLevel-flag 可以在设置中的某处更改*？同样，不幸的是没有。`iLevel`在对 .的每个内部调用中被硬编码`_fnLog`。

令人失望的是，我们不得不在丑陋的警报和完全停止执行之间做出选择，因为抛出了一个错误。简单地覆盖`window.onerror`也不起作用。解决方法是修改`_fnLog`，只需注释掉抛出自定义错误的行：

```
else
{
  // throw new Error(sAlert); <-- comment this line
} 
```

如果您有`$.fn.dataTableExt.sErrMode = 'throw'`（除了“警报”之外的任何其他内容）并且如果发生错误，则继续执行。更好的是，在其他情况下可能需要那些抛出的错误，在外面设置一个标志，比如

```
window.isDebugging = true; 
```

和

```
else
{
  if (!window.isDebugging) throw new Error(sAlert); 
} 
```

在我看来，这不是一个“hack”，而是推翻了一般的、无法避免的 jQuery dataTables 行为，这种行为有时并不令人满意。正如 Allan Jardine 本人在上述链接中所写：

> 为什么不能只修改源？这就是开源的全部意义 :-)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-09-13T05:01:31.600

试试这个：

```
$.fn.DataTable.ext.oApi._fnLog = function (settings, level, msg, tn) {
    msg = 'DataTables warning: ' +
            (settings !== null ? 'table id=' + settings.sTableId + ' - ' : '') + msg;

    if (tn) {
        msg += '. For more information about this error, please see ' +
                'http://datatables.net/tn/' + tn;
    }
    console.log( msg );
}; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-05-05T11:36:41.477

从 DataTables 版本**1.10.15 开始**，您可以将**$.fn.dataTableExt.errMode**设置为 ' **ignore** '，它会默默地忽略错误消息：

```
 $(document).ready(function () {
        $.fn.dataTableExt.errMode = 'ignore';
    }); 
```

**_fnLog** DataTables 函数具有以下代码：

```
 if ( type == 'alert' ) {
            alert( msg );
        }
        else if ( type == 'throw' ) {
            throw new Error(msg);
        }
        else if ( typeof type == 'function' ) {
            type( settings, tn, msg );
        } 
```

默认值是“**警报**”，这是有问题的。

您也可以设置为“**抛出**”。它会产生 javascript 错误，但不会打扰用户。

' **ignore** ' 或任何其他值只会悄悄地跳过错误。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-04T08:33:35.487

让我将我的 2 美分加到上面大卫康拉德的[答案](https://stackoverflow.com/a/22134916/188862)中。在不更改文件的情况下修改`_fnLog`函数的一种方法是从数据表设置中的 Api 实例获取对该方法的引用：

```
$.fn.dataTableSettings[0].oApi._fnLog = function(settings, level, msg, tn) {
    // Modified version of _fnLog
} 
```

希望这对某人有所帮助。

# javascript - Rails 以一种方式格式化 DateTime.now 和 DateTime.yesterday 另一种方式 - 我如何获得过去的日期格式，如 DateTime.now？

> ID：11941880
> 
> 赞同：2
> 
> 时间：2012-08-13T20:34:57.373
> 
> 标签：javascript, ruby-on-rails, datetime

我有 2 行代码尝试在 JavaScript 中放置开始和结束日期时间。 `new Date('<%= DateTime.now.beginning_of_day.to_s %>')`是一个例子。`DateTime.now.beginning_of_day`返回`2012-08-13T00:00:00-04:00`JavaScript 转换为 8/13/2012 00:00的字符串。完美的。但是，`DateTime.yesterday.beginning_of_day.to_s`返回“2012-08-11 20:00:00-04:00”，JavaScript 将其转换为 2012 年 8 月 11 日 20:00。我不要前天晚上八点。我想昨天午夜。我已经尝试过`Date.yesterday`,`.in_time_zone("Eastern Time (US & Canada)")`和`.utc`无数其他排列。我必须做什么才能获得格式相同的过去日期`DateTime.now`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T21:07:59.127

试试这个：

```
DateTime.now.yesterday.beginning_of_day 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T03:20:02.573

我会使用 Time.zone

然后一些 hacky to_date 回到 to_time 确保它在午夜归零

```
new Date('<%= Time.zone.now.to_date.to_time.to_s %>')

new Date('<%= (Time.zone.now - 1.day).to_date.to_time.to_s %>') 
```

你应该可以使用`Time.zone.now.yesterday.to_date.to_time.to_s`- 1.day

# php - 如何显示类别描述？

> ID：11941882
> 
> 赞同：-1
> 
> 时间：2012-08-13T20:35:01.710
> 
> 标签：php, wordpress

我正在开发一个 wordpress 网站，我正在使用这个主题：[Ermark Adora](http://themeforest.net/item/ermark-adora-wordpress/152713)

我希望能够为我的类别添加描述。这是代码所在的函数文件中的代码。[这是整个功能页面（接近页面末尾）](https://www.dropbox.com/s/7q42z71lf61plwf/functions.txt)。

```
<li class="categ">
<h3> - '.$categ->name.' - </h3>';
if ($products_full=='true') {
$src['full_categ'] .= '<a href="#" class="less-products">'.__('view all','adora').'</a>';
$src['full_categ'] .= '</li>' 
```

我需要在 oder 中添加什么代码来显示类别的描述？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:41:43.350

在问这样的问题之前请谷歌。答案在 WP 法典中：

[http://codex.wordpress.org/Function_Reference/category_description](http://codex.wordpress.org/Function_Reference/category_description)

`echo category_description( $category_id );`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:33:40.990

我找到了答案：`<h3> - '.$categ->name.' -</h3><p> '.$categ->description.' </p>';`

# jquery - 加载字体后调用 jQuery 函数。

> ID：11941883
> 
> 赞同：8
> 
> 时间：2012-08-13T20:35:10.047
> 
> 标签：jquery, load

我在网站上有多种字体它加载非常缓慢，我有一些 jquery 功能，我需要在加载字体时加载它们。

我试图调用它

```
jQuery(window).load(function () { 
 //my_function()
}); 
```

不工作怎么办？？？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-20T01:51:55.393

[Google 字体加载器回调/事件](https://developers.google.com/webfonts/docs/webfont_loader)的一个问题是，如果您使用的是 jQuery——您可能不想在加载 DOM 之前运行事件处理程序——但您不想在确定所有内容之前冒险运行它字体已加载。

这是我的解决方案。假设：

*   您正在使用 Google 字体加载器
*   您只想在加载所有字体、css 和 DOM 后运行某些东西
*   在字体加载器启动之前加载 jQuery 没问题（因为我正在使用`$.Callbacks()`）

这就是我在 jQuery`<script>`标记之后立即执行的操作

```
 var activeCallback = $.Callbacks();

 WebFontConfig = {
     google: { families: ['Open+Sans:400italic,400,300,600:latin'] },
     active: function () { activeCallback.fire(); }
 };

 // ... 
```

然后是一个标准的 jQuery 就绪函数

```
 $(function() 
 {
    // start slide show when all fonts are loaded (need to calculate heights)
    activeCallback.add(function ()
    {
        startSlideshow();
    });

    // other DOM manipulation
 }); 
```

只要 Google 字体加载器完成，回调就会触发 - 但如果文档尚未完成，事件将不会被触发，直到它完成（这就是 jQuery[回调](http://api.jquery.com/jQuery.Callbacks/)的工作方式）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T20:41:38.280

为了捕获事件，您需要使用字体加载器。遗憾的是，没有跨浏览器加载字体的方式，所以我建议你试试[Google WebFont Loader](https://developers.google.com/webfonts/docs/webfont_loader)：

```
var WebFontConfig = {
  monotype: {  // Fonts.com 
    projectId: 'YourProjectId'
  },
  active: function() {
    // do something
  }
};

(function() {
  var wf = document.createElement('script');
  wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
  wf.type = 'text/javascript';
  wf.async = 'true';
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(wf, s);
})(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T20:39:58.467

如果你想控制@font-faces 的加载过程，请使用由 Google 和 Typekit 开发的 WebFont Loader。

[https://developers.google.com/webfonts/docs/webfont_loader](https://developers.google.com/webfonts/docs/webfont_loader)

# android - DialogFragment - setting initial values and retaining state after rotation

> ID：11941884
> 
> 赞同：3
> 
> 时间：2012-08-13T20:35:11.183
> 
> 标签：android, android-fragments, android-lifecycle, android-dialogfragment

I have created an *DialogFragment* which is building and returning *AlertDialog* from *onCreateDialog* method. The AlertDialog contains two EditText views.

I'm setting the initial values of these two edit texts in the *onCreateDialog* method which works great until I rotate the phone and all changes get lost/restored to initial values because the *onCreateDialog* is recalled.

So my question is where should I place the initial values so they are only set the very first time you open the dialog and if you have done changes and you rotate your phone, the last state i retained and retached?

Below I have pasted simplified version of my code. One solution could be initializing the class attributes at newInstance() method, but then I need to make them static. Other solution could be passing the values through the Bundle, but no put-methods take Calendar as parameter type.

What is best practice?

```
public class MyDialogFragment extends DialogFragment implements OnClickListener, OnDateSetListener, OnQuantitySetListener 
{
private EditText editText1, editText2
private MyObject myObject;

public static MyDialogFragment newInstance() 
{
    return new MyDialogFragment ();
}

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    LayoutInflater factory = LayoutInflater.from(getActivity());
    final View v = factory.inflate(R.layout.my_layout, null);

    editText1 = (EditText) v.findViewById(R.id.text1);
    editText2 = (EditText) v.findViewById(R.id.text2);

    myObject = <get the object from database>;

    editText1.setText(myObject.attribute1);
    editText2.setText(myObject.attribute2);

    bindDataToViews();

    return new AlertDialog.Builder(getActivity())
            .setIconAttribute(R.drawable.add)
            .setTitle("Title of the dialog")
            .setView(v)).create();
}

... other methods using getting the values from EditText and putting them back to MyObject 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:46:43.290

`Calendar` is `Serializable` so you can put it as that in the `Bundle`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-13T20:46:12.573

You can store your data in onSaveInstanceState(Bundle outState) method, and read them again in onRestoreInstanceState() method. onSaveInstanceState will be called before screen rotation, and onRestoreInstanceState() after change. This is a good place to store data between orientation changes.

Or you can also add in Manifest file

```
android:configChanges="orientation" 
```

Add this value to activitiy, which contains your alertDialog.

# visual-studio-2010 - 在 Visual Studio 2010 中从构建中排除 moc-ed 文件

> ID：11941885
> 
> 赞同：1
> 
> 时间：2012-08-13T20:35:22.697
> 
> 标签：visual-studio-2010, qt-vs-addin

我有一个带有几个基于 Qt 的项目的 VS2010 解决方案。每次我从某个项目修改文件时，生成的文件（moc_*.cpp 文件）都会更改其属性以从构建中排除。检查了所有可用属性，但找不到与该问题相关的任何内容（虽然没有尝试从头开始重新创建项目）。

有机会解决吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T01:36:41.110

有一个相关的[问题](https://stackoverflow.com/questions/1200268/qt4-in-visual-studio-2008-moc-ed-files-get-excluded-from-build)。

首先，您必须检查 Qt 项目设置中的 MocDirectory。原来我设置为错误的值$(Configuration)，遇到了和你一样的问题。

在我将其更改为 $(ConfigurationName) 后，问题就消失了。

设置错误值时，MocDirectory 指向同一个目录以用于不同的项目配置（例如调试和发布）的原因。项目构建时，相对于其他项目配置，将排除 MocDirectory 中生成的文件。由于所有配置都指向同一个 MocDirectory，因此将排除所有生成的文件。

# java - 将 XML 属性限制为枚举值

> ID：11941886
> 
> 赞同：3
> 
> 时间：2012-08-13T20:35:33.103
> 
> 标签：java, xsd, jaxb, schema

这是我为 WS 创建的 XSD 架构

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    elementFormDefault="qualified" attributeFormDefault="unqualified">

<xs:element name="shipmentStatus" type="shipmentStatusType" />

<xs:complexType name="shipmentStatusType">
    <xs:sequence>
        <xs:element name="orderNumber" type="xs:int"/>
    </xs:sequence>

    <xs:attribute name="requestStatus">
        <xs:simpleType>
            <xs:restriction base="xs:string">
                <xs:enumeration value="SHIPPED"/>
                <xs:enumeration value="PENDING"/>
            </xs:restriction>
        </xs:simpleType>
    </xs:attribute>

</xs:complexType> 
```

当我使用 JAXB 2.1 生成 Java 类时，它只生成了一个类，即 shippingStatusType。我期待它会生成 requestStatus 作为 JAVA 枚举，但它没有。这是预期的行为还是我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T22:44:35.507

只需将您的枚举/简单类型声明提取到顶层，并将其用作 XML 属性的类型：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema targetNamespace="http://www.example.com" xmlns="http://www.example.com"
    xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified"
    attributeFormDefault="unqualified">

    <xs:simpleType name="requestStatus">
        <xs:restriction base="xs:string">
            <xs:enumeration value="SHIPPED" />
            <xs:enumeration value="PENDING" />
        </xs:restriction>
    </xs:simpleType>

    <xs:complexType name="shipmentStatus">
        <xs:sequence>
            <xs:element name="orderNumber" type="xs:int" />
        </xs:sequence>
        <xs:attribute name="requestStatus" type="requestStatus" />
    </xs:complexType>

    <xs:element name="shipmentStatus" type="shipmentStatus" />

</xs:schema> 
```

它会给你这样一个枚举：

```
/**
 * <p>Java class for requestStatus.
 * 
 * <p>The following schema fragment specifies the expected content contained within this class.
 * <p>
 * <pre>
 * &lt;simpleType name="requestStatus">
 *   &lt;restriction base="{http://www.w3.org/2001/XMLSchema}string">
 *     &lt;enumeration value="SHIPPED"/>
 *     &lt;enumeration value="PENDING"/>
 *   &lt;/restriction>
 * &lt;/simpleType>
 * </pre>
 * 
 */
@XmlType(name = "requestStatus")
@XmlEnum
public enum RequestStatus {

    SHIPPED,
    PENDING;

    public String value() {
        return name();
    }

    public static RequestStatus fromValue(String v) {
        return valueOf(v);
    }

} 
```

和拥有它的班级：

```
/**
 * <p>Java class for shipmentStatus complex type.
 * 
 * <p>The following schema fragment specifies the expected content contained within this class.
 * 
 * <pre>
 * &lt;complexType name="shipmentStatus">
 *   &lt;complexContent>
 *     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
 *       &lt;sequence>
 *         &lt;element name="orderNumber" type="{http://www.w3.org/2001/XMLSchema}int"/>
 *       &lt;/sequence>
 *       &lt;attribute name="requestStatus" type="{http://www.example.com}requestStatus" />
 *     &lt;/restriction>
 *   &lt;/complexContent>
 * &lt;/complexType>
 * </pre>
 * 
 * 
 */
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "shipmentStatus", propOrder = {
    "orderNumber"
})
public class ShipmentStatus {

    protected int orderNumber;
    @XmlAttribute(name = "requestStatus")
    protected RequestStatus requestStatus;

    /**
     * Gets the value of the orderNumber property.
     * 
     */
    public int getOrderNumber() {
        return orderNumber;
    }

    /**
     * Sets the value of the orderNumber property.
     * 
     */
    public void setOrderNumber(int value) {
        this.orderNumber = value;
    }

    /**
     * Gets the value of the requestStatus property.
     * 
     * @return
     *     possible object is
     *     {@link RequestStatus }
     *     
     */
    public RequestStatus getRequestStatus() {
        return requestStatus;
    }

    /**
     * Sets the value of the requestStatus property.
     * 
     * @param value
     *     allowed object is
     *     {@link RequestStatus }
     *     
     */
    public void setRequestStatus(RequestStatus value) {
        this.requestStatus = value;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T20:40:24.003

我认为您问的问题[与此 SO post](https://stackoverflow.com/questions/6031572/howto-generate-java-enum-from-xml-schema-with-jaxb)相同。您需要创建一个自定义绑定文件来将此简单类型映射到枚举。

绑定文件：

```
<jaxb:bindings xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:jaxb="http://java.sun.com/xml/ns/jaxb" xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc" jaxb:extensionBindingPrefixes="xjc" version="2.1"> 
    <jaxb:globalBindings generateIsSetMethod="true" fixedAttributeAsConstantProperty="true"> 
        <xjc:serializable/> 
    </jaxb:globalBindings> 
    <jaxb:bindings schemaLocation="file:/..../restricting-xml-attribute-to-enum-values.xsd"> 
        <jaxb:bindings node="//xs:complexType[@name='shipmentStatusType']/xs:attribute[@name='requestStatus']/xs:simpleType"> 
            <jaxb:typesafeEnumClass name="MyEnumType"/> 
        </jaxb:bindings> 
    </jaxb:bindings> 
</jaxb:bindings> 
```

生成的类（相关部分）：

```
/**
 * <p>Java class for null.
 * 
 * <p>The following schema fragment specifies the expected content contained within this class.
 * <p>
 * <pre>
 * &lt;simpleType>
 *   &lt;restriction base="{http://www.w3.org/2001/XMLSchema}string">
 *     &lt;enumeration value="SHIPPED"/>
 *     &lt;enumeration value="PENDING"/>
 *   &lt;/restriction>
 * &lt;/simpleType>
 * </pre>
 * 
 */
@XmlType(name = "")
@XmlEnum
public enum MyEnumType {

    SHIPPED,
    PENDING;

    public String value() {
        return name();
    }

    public static ShipmentStatusType.MyEnumType fromValue(String v) {
        return valueOf(v);
    }

} 
```

# php - PHP：格式化时间 Stackoverflow 或 Apple Mail 样式

> ID：11941888
> 
> 赞同：1
> 
> 时间：2012-08-13T20:35:37.283
> 
> 标签：php, datetime, formatting, string-formatting

php.net 文档中有一个[非常好的函数，](http://php.net/manual/en/function.time.php)它使您能够以 Facebook 样式的方式（例如，、、`2 minutes ago`或`4 weeks ago`）格式化时间`3 years ago`。

但是，我更喜欢 Stackoverflow 和 Apple Mail 的方式，通常如下：

1.  当前日期在`x seconds ago`或`x hours ago`或时间中列出（例如，`4:35pm`）。
2.  昨天被列为“昨天”。
3.  之后的所有日子都按月/日/年列出。

有没有人改编这个 php.net 脚本来做到这一点，或者可能共享一个不同的脚本来实现相同的目标？

```
<?php 

  function nicetime($date)
 {
    if(empty($date)) {
      return "No date provided";
    }

$periods         = array("second", "minute", "hour", "day", "week", "month", "year", "decade");
$lengths         = array("60","60","24","7","4.35","12","10");

$now             = time();
$unix_date         = strtotime($date);

   // check validity of date
if(empty($unix_date)) {    
    return "Bad date";
}

// is it future date or past date
if($now > $unix_date) {    
    $difference     = $now - $unix_date;
    $tense         = "ago";

} else {
    $difference     = $unix_date - $now;
    $tense         = "from now";
}

for($j = 0; $difference >= $lengths[$j] && $j < count($lengths)-1; $j++) {
    $difference /= $lengths[$j];
}

$difference = round($difference);

if($difference != 1) {
    $periods[$j].= "s";
}

  return "$difference $periods[$j] {$tense}";
}

$date = "2009-03-04 17:45";
$result = nicetime($date); // 2 days ago

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:22:16.843

好的，我回答了我自己的问题。

`for`关键是要跟踪循环经历了多少轮除法，直到当前时间减去输入时间的商`$difference`除以数组项的第 th 值小`$j`于此数组的第 th 值。`$lengths``$j+1`

我通过在以下修改版本中增加变量`$i`（注意演示我上面提到的 3 点中的每一个的子句）来跟踪这一点：`if/elseif/else``nicetime()`

```
 ///http://php.net/manual/en/function.time.php
  function nicetime($date)
 {
    if(empty($date)) {
      return "No date provided";
    }

$periods         = array("second", "minute", "hour", "day", "week", "month", "year", "decade");
$lengths         = array("60","60","24","7","4.35","12","10");

$now             = time();
$unix_date         = strtotime($date);

   // check validity of date
if(empty($unix_date)) {    
    return "Bad date";
}

// is it future date or past date
if($now > $unix_date) {    
    $difference     = $now - $unix_date;
    $tense         = "ago";

} else {
    $difference     = $unix_date - $now;
    $tense         = "from now";
}
$i=0;
for($j = 0; $difference >= $lengths[$j] && $j < count($lengths)-1; $j++) {
    $i++;
    $difference /= $lengths[$j];
}

$difference = round($difference);

if($difference != 1) {
    $periods[$j].= "s";
}

if($i<3){
    $day="$difference $periods[$j] {$tense}";
    return $day;
    //satisfies case #1 where time is listed as seconds, minutes, hours ago
}

elseif($i==3){
    $difference == 1 && $periods[$j]=='day' ? $day='yesterday':     
    $day="$difference $periods[$j] {$tense}";
    return $day;        
    //satisfies case #2 where time is listed as yesterday if not the current day

}
else{
    return $date;       
    // satisfies case #3 where date is listed as M/D/Y if greater than a week old
}   

}

echo "case#1: ".nicetime('2012-08-13 23:12:16');
echo "case#2: ".nicetime('2012-08-12 23:12:16');
echo "case#3: ".nicetime('2012-07-07 23:12:16'); 
```

# objective-c - 加载测试图像以进行单元测试

> ID：11941890
> 
> 赞同：12
> 
> 时间：2012-08-13T20:35:57.000
> 
> 标签：objective-c, unit-testing

我正在为一个加载图像并进行一些颜色处理的类编写测试。图像已加载

```
 UIImage* image = [UIImage imageNamed:imageName]; 
```

如果我运行该应用程序，一切都很好，并且图像按预期加载。我添加了一个单元测试，该测试应使用在测试期间加载的特定测试图像。如果我运行测试夹具，则不会加载图像。到目前为止我读到的是方法 imageNamed 总是从应用程序包的资源文件夹中加载。如何将其更改为我的测试包？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2017-01-27T09:32:32.137

在 Swift 3.0 中，你会这样做：

```
let bundle = Bundle.init(for: NameOfYourTestClass.self)
let image = UIImage(named: "TestImage", in: bundle, compatibleWith: nil) 
```

`NameOfYourTestClass`你的测试班的名字在哪里✌️

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-06T23:45:27.467

为此做了一个方便的类别。

```
image = [UIImage testImageNamed:@"image.png"]; 
```

就像：

```
@interface BundleLocator : NSObject
@end

@interface UIImage (Test)
+(UIImage*)testImageNamed:(NSString*) imageName;
@end

@implementation BundleLocator
@end

@implementation UIImage (Test)
+(UIImage*)testImageNamed:(NSString*) imageName
{
    NSBundle *bundle = [NSBundle bundleForClass:[BundleLocator class]];
    NSString *imagePath = [bundle pathForResource:imageName.stringByDeletingPathExtension ofType:imageName.pathExtension];
    return [UIImage imageWithContentsOfFile:imagePath];
}
@end 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-24T01:39:20.177

如果您的意思是您在测试包中有一个只想在测试中使用的图像（即测试夹具），请查看[此答案](https://stackoverflow.com/questions/8602876/accessing-a-uiimage-inside-a-ocunit-test-target)。

您可以通过使用来定制该答案以获取实际应用程序的 NSBundle `[NSBundle bundleForClass:[SomeClassThatExistsInTheAppOnly class]]`。这使您可以专门针对测试包中的应用包。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-25T15:38:56.750

你也可以使用它（在 Swift 中）：

```
let bundle = NSBundle(forClass: MyClass.self)
let img = UIImage(named: "TestImage", inBundle: bundle, compatibleWithTraitCollection: nil) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-06T17:34:51.530

要更改应用程序包：

让 bundle = Bundle（标识符：“org.cocoapods.ACSPLib”）

let photo = UIImage(named: nameofThePhoto, in: bundle, compatibleWith: nil)

捆绑标识符

[pod 的包标识符](https://i.stack.imgur.com/fK38M.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-13T20:50:27.513

好吧，一种选择是将该资源添加到您的测试（应用程序）中。

就个人而言，我只使用路径（`initWithContentsOfFile:`）、数据（`initWithData:`）等。这可能涉及引入一些参数——但这在许多情况下都*很好*，因为该参数可用于测试更多输入图像文件（如果您愿意），而不会过多地更改/克隆/重新打包应用程序。

# javascript - 在主干视图中的每个方法之后是否需要“返回这个”？

> ID：11941892
> 
> 赞同：0
> 
> 时间：2012-08-13T20:36:26.750
> 
> 标签：javascript, backbone.js

在 Backbone 视图中的每个方法的末尾是否需要“return this”？

```
render: function() {
this.editElem();
// I realize it wouldn't be necessary here, but...
},

renderElem: function() {
this.$el.addClass('foobar');
return this // is this one necessary?
}, 
```

**编辑** 这个例子怎么样？

```
render: function() {
this.editElem();
},

renderElem: function() {
this.$el.addClass('foobar');
return this;
}, 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T20:39:38.780

我没有使用过 Backbone，所以我不确定它是否需要（可能不需要），但您通常会看到使用的模式，以便您可以将函数调用“链接”在一起。它被称为[流畅的界面](http://en.wikipedia.org/wiki/Fluent_interface)。

例如，使用这种模式，您可以编写紧凑的代码，例如：

```
myVariable.editElem().somethingElse().anotherMethod(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T20:44:38.653

引用官方[文档](http://backbonejs.org/#View-render)所说的

> 一个好的约定是在渲染结束时返回 this 以启用链式调用。

所以不，这不是必需的，但这可能是一个好主意。

通常，您将在修改/渲染视图的方法中看到它`el`，通过返回`this`其中一种方法，您可以更轻松地访问视图`el`，因此您现在可以执行类似的操作

```
$("#somelist").append(myview.render().el); 
```

而不是像两行一样

```
myview.render();
$("#somelist").append(myview.el); 
```

# php - 没有 PDO 的 MySQL 的 PHP ORM

> ID：11941893
> 
> 赞同：1
> 
> 时间：2012-08-13T20:36:28.543
> 
> 标签：php, mysql, orm

> **可能重复：**
> [有人知道不使用 PDO 的良好 PHP ORM 吗？](https://stackoverflow.com/questions/4708117/anyone-know-of-a-good-php-orm-that-does-not-use-pdo)

我一直在将 RedBeanPHP 用于许多项目的 ORM，但我目前正在使用的网络主机不支持 PDO。由于 RedBeanPHP 需要 PDO，所以我不能使用它。

是否有不使用 PDO 的 MySQL 的 PHP ORM？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T21:16:26.077

I agree the real answer is you need to move hosting providers. If they don't offer a php build with pdo enabled, I can only image what other issues they have.

The answer you're looking for however will vary based on what type of DB libraries you are allowed... mysql, mysqli, mdb2, adodb, etc...

Most likely, you'll need to find an older version of an ORM, back in the day when they allowed you to specify if you wanted to use mysqli or pdo.

However, until we know what you have, no one can answer your question fully.

Run `php -m` on the command line and paste the result into the question so we can see what options you have.

# java - 无法从 Android/Java 应用程序发布到 PHP + MYSQL

> ID：11941899
> 
> 赞同：0
> 
> 时间：2012-08-13T20:36:50.730
> 
> 标签：java, android, mysql, http-post

我一直在尝试让我的 Android 应用程序将数据发布到 PHP 文件，然后将该数据写入数据库，但是我遇到了一些麻烦。

我收到此错误，但它不是强制关闭或任何东西。

日志输出：

```
08-13 20:29:42.859: I/postData(11950): HTTP/1.1 200 OK
08-13 20:29:42.859: E/log_tag(11950): Error in http connectionjava.lang.IllegalStateException: Content has been consumed 
```

这是有问题的代码，它正在做我所有的 HTTP POST 工作，即 android 方面的事情：

```
SubmitWord task = new SubmitWord(); 
task.execute(new String[] { "http://www.hanged.comli.com/main.php" }); 
```

上面的代码调用了这个异步任务：

```
 private class SubmitWord extends AsyncTask<String, Void, String> 
    {
        @Override
        protected String doInBackground(String... urls) 
        {
          String response = "";
          try
          {
            URL = urls[0];
            ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(4);
            nameValuePairs.add(new BasicNameValuePair("victim",myId));
            nameValuePairs.add(new BasicNameValuePair("rival",newname));
            nameValuePairs.add(new BasicNameValuePair("word","HELLOHOMO"));
            nameValuePairs.add(new BasicNameValuePair("won","0"));

              HttpClient httpclient = new DefaultHttpClient();
              HttpPost httppost = new      
              HttpPost(URL);
              httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

              HttpResponse execute = httpclient.execute(httppost);
              HttpEntity entity = execute.getEntity();
              InputStream is = entity.getContent();

             Log.i("postData", execute.getStatusLine().toString());
             //HttpEntity entity = response.getEntity();
              is = entity.getContent();
          }
          catch(Exception e)
          {
                  Log.e("log_tag", "Error in http connection"+e.toString());
          }
                return response;
            } 

        @Override
        protected void onPostExecute(String result) 
        {
          mText.setText("DONE");
        }

      } 
```

这是PHP方面的事情：

```
<?php

 /// REMOVED DATABASE DETAILS

$connect = mysql_connect("$mysql_host", "$mysql_user", "$mysql_password")or die("cannot   connect");
 mysql_select_db("$mysql_database", $connect)or die("cannot select DB");

session_start();

$victim = $_POST['victim'];
$rival = $_POST['rival'];
$word = $_POST['word'];
$won = $_POST['won'];

mysql_query("INSERT INTO currentgames (victim, rival, wordguess, won) VALUES('$victim',       '$rival', '$word', '$won'))"); 
```

我很确定这只是我弄错的 Java/Android 部分，但我一生都无法弄清楚我做错了什么，我尝试了各种不同的 POSTING 数据方法并阅读了使用 HTTPOST 的教程数量。也许我只是没有正确理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:39:10.950

罪魁祸首是你打`getContent();`了两次电话。

根据[javadoc](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/HttpEntity.html#getContent%28%29)

> 返回实体的内容流。可重复实体应为每次调用此方法创建一个新的 InputStream 实例，因此可以多次使用。不可重复的实体应返回相同的 InputStream 实例，因此不得多次使用。

# android - 重新启动应用程序时Android堆增长

> ID：11941902
> 
> 赞同：0
> 
> 时间：2012-08-13T20:37:00.183
> 
> 标签：android, memory-management, heap-memory, andengine

嗨，我已经阅读了与 android 中的增长堆有关的错误

```
08-13 21:46:22.382: I/dalvikvm-heap(10859): Grow heap (frag case) to 20.578MB for 2400016-byte allocation 
```

下面是我反复退出我的应用程序并一遍又一遍地重新启动它的日志（过滤）。如您所见，每次重新启动时堆都会增长。这个怎么可能？完全退出时不应该清除应用程序堆吗？

如果我对代码进行任何更改并重新启动应用程序，堆将重置为其原始值。这种行为正常吗？

每次我在应用程序中切换活动时，也会发生相同的堆增长。我在andengine中编写了我的应用程序。我得到了高达 80MB 的堆，并且随着堆的增大，加载变得更慢。

```
I/dalvikvm-heap(13094): Grow heap (frag case) to 13.198MB for 2400016-byte allocation
I/dalvikvm-heap(13094): Grow heap (frag case) to 13.354MB for 2400016-byte allocation
I/dalvikvm-heap(13094): Grow heap (frag case) to 13.350MB for 2400016-byte allocation
I/dalvikvm-heap(13094): Grow heap (frag case) to 13.350MB for 2400016-byte allocation
I/dalvikvm-heap(13094): Grow heap (frag case) to 13.406MB for 2400016-byte allocation
I/dalvikvm-heap(13094): Grow heap (frag case) to 13.268MB for 2400016-byte allocation
I/dalvikvm-heap(13094): Grow heap (frag case) to 13.265MB for 2400016-byte allocation
I/dalvikvm-heap(13094): Grow heap (frag case) to 13.264MB for 2400016-byte allocation
I/dalvikvm-heap(13094): Grow heap (frag case) to 14.818MB for 2400016-byte allocation
I/dalvikvm-heap(13094): Grow heap (frag case) to 14.814MB for 2400016-byte allocation
I/dalvikvm-heap(13094): Grow heap (frag case) to 14.813MB for 2400016-byte allocation
I/dalvikvm-heap(13094): Grow heap (frag case) to 14.813MB for 2400016-byte allocation
I/dalvikvm-heap(13094): Grow heap (frag case) to 16.421MB for 2400016-byte allocation
I/dalvikvm-heap(13094): Grow heap (frag case) to 16.427MB for 2400016-byte allocation
I/dalvikvm-heap(13094): Grow heap (frag case) to 16.426MB for 2400016-byte allocation
I/dalvikvm-heap(13094): Grow heap (frag case) to 16.426MB for 2400016-byte allocation
//**-Not A log message: here i simply changed a variables name and restarted**
I/dalvikvm-heap(13497): Grow heap (frag case) to 12.995MB for 2400016-byte allocation
I/dalvikvm-heap(13497): Grow heap (frag case) to 13.002MB for 2400016-byte allocation
I/dalvikvm-heap(13497): Grow heap (frag case) to 13.002MB for 2400016-byte allocation
I/dalvikvm-heap(13497): Grow heap (frag case) to 13.002MB for 2400016-byte allocation 
```

这就像关闭应用程序后保留的内存泄漏，在应用程序中我确实使用 sharedPreferences 来保存东西。但我看不出这如何在这里产生影响。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:02:30.943

Android 应用程序不会简单地关闭，请参阅此主题的精彩博文：http: [//blog.radioactiveyak.com/2010/05/when-to-include-exit-button-in-android.html](http://blog.radioactiveyak.com/2010/05/when-to-include-exit-button-in-android.html)

堆增长是因为您的应用程序没有关闭，它只是被隐藏了。尽管如此，您似乎确实有内存泄漏。当您更改变量名称时，堆会缩小，因为生成了新的 apk，手机上的应用程序被终止并重新安装应用程序。

# html - Div 容器未扩展 - 请帮助新手

> ID：11941903
> 
> 赞同：-2
> 
> 时间：2012-08-13T20:37:02.213
> 
> 标签：html, containers

网页是[http://www.naifaraleigh.com/template2.php](http://www.naifaraleigh.com/template2.php) css 是[http://www.naifaraleigh.com/layerstyle.css](http://www.naifaraleigh.com/layerstyle.css)

我非常希望它能够工作，学习如何做到这一点，但我开始讨厌 CSS，并认为表格毕竟不是一件坏事！咧嘴一笑！只是在开玩笑！

一切都包含在名为容器的 div 中

我已经设法使主要内容 div 在 white_back 中稍微偏离中心和圆角

我设法在右侧放置了一个绝对 div，其中包含导航和徽标

但无论我尝试什么，我都无法让 white_back div 向下延伸以包围网页的内容。

请帮助，阻止我回到表格布局的“黑暗面”！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:50:32.650

你的意思是`#white_back{height:auto;}`？？？

`#white_back{height: 458px;}`如果你想让它向下伸展，你为什么要这样做？

# javascript - 正文中的 CSS 样式表和脚本。可能的？

> ID：11941906
> 
> 赞同：2
> 
> 时间：2012-08-13T20:37:27.030
> 
> 标签：javascript, html, css, content-management-system, typo3

我是内容管理系统 (TYPO3) 的用户，它不允许我向`head`html 文档添加内容。是否可以在正文中定义 css 样式表和脚本，这样我就不会在我添加的 html 代码中到处重复相应的样式和 javascript？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T20:41:22.227

`style`从技术上讲，在正文中放置标签是无效的，但大多数（如果不是所有）浏览器都会实际实现它。

我一直认为`link`标签应该`head`根据规范在内部，但经过快速测试，它看起来就像`link`在验证中使用标签`body`作为 HTML 5，所以这可能是一个选项。请参阅下面的 Alohci 对此的评论。

是的，你可以`script`在你的身体里放置一个标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T20:41:48.717

您可以在 中添加脚本`<body>`，但 css 应该在`<head>`.

`<style>`主流浏览器在 中识别`<body>`，但无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T21:07:55.680

如果没有其他可能性，请使用 type 与 TYPO3 后端一起执行此`Content Element`操作。`HTML`

当然，正如其他答案中所建议的那样，您不应该在正文中添加 CSS，所以对所需元素使用内联样式可能会更好？

```
<div style="color: red">title</div> 
```

# c# - Unity 无法从配置中解析注入的属性

> ID：11941909
> 
> 赞同：0
> 
> 时间：2012-08-13T20:37:40.290
> 
> 标签：c#, dependency-injection, unity-container, app-config

我有一个简单的对象，我正在尝试向其中注入属性。我不清楚为什么这似乎不起作用。在我调用 resolve 后，我的属性最终为空。

这是我的对象：

```
public interface IBasePage
{
    [Dependency]
    string Title { get; set; }

    [Dependency]
    string BaseUrl { get; set; }
} 
```

这是我的统一配置文件中的内容：

```
<register type="IWebActionDriver" mapTo="ConcreteWebDriver"/>

<register type="IBasePage" name="LoginPage" mapTo="LoginPage">
    <property name="Title" value="Login Page Title"/>
    <property name="BaseUrl" value="http://dev1.company.com"/>
  </register> 
```

在我的单元测试的启动方法中，这就是我想要做的：

```
_container = new UnityContainer();
        UnityConfigurationSection configSection =
            (UnityConfigurationSection) ConfigurationManager.GetSection("unity");

 configSection.Configure(_container, "testContainer");
 _page = _container.Resolve<LoginPage>(); 
```

我的具体课程如下所示：

```
[InjectionConstructor]
public LoginPage(IWebActionDriver driver)
    {
        _driver = driver;
        _driver.Initialize();

        this.CurrentPage = _driver;
    } 
```

瞧，Title 和 BaseUrl 的属性为空。可以在对象上同时使用构造函数注入*和*设置属性吗？我在这里做其他奇怪的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:42:46.517

LoginPage 注册为命名注册（这很有意义，因为您显然可以拥有多个 IBasePage 具体类型）。因此，您应该能够通过名称解析 IBasePage 来实现您想要的行为：

`_page = _container.Resolve<IBasePage>("LoginPage");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T20:43:41.803

您需要在配置文件中包含命名空间和程序集名称，例如：

```
 <namespace name="MyNameSpace" />
 <assembly name="MyAssemblyName" /> 
```

# jquery - 使用 TableSorter 使用纪元时间进行排序

> ID：11941916
> 
> 赞同：0
> 
> 时间：2012-08-13T20:38:08.763
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-selectors, tablesorter

我有基于 java 的网络应用程序。在前端，我收到一组对象。对象中的字段之一是日期。

现在我正在尝试使用 . 但我没有看到排序结果。

```
 function update() {

var rows = $('#results tr:gt(0)'); 
 rows.each(function(index) {    
 //code to show or hide rows based on some logic
 }

 $('#results').tablesorter({
            sortList:[[8,0]]
        });

} 
```

在我的第 9 个领域是纪元时间。所以我试图根据该列进行排序。该列是隐藏的

但我没有看到效果。

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:22:37.507

我猜测更新功能应该在显示/隐藏行后重新使用表格。如果要重新使用表格，请不要重新初始化插件，只需触发`sorton`方法：

```
$("#results").trigger("sorton", [ [[8,0]] ]); 
```

请注意，在 sortList 值周围有一组额外的括号，这是因为触发方法需要通过数组（[ref](http://api.jquery.com/trigger/)）传递参数。也看看[这个例子](http://tablesorter.com/docs/example-trigger-sort.html)。

# google-maps-api-3 - 谷歌地图 api-3

> ID：11941921
> 
> 赞同：0
> 
> 时间：2012-08-13T20:38:26.783
> 
> 标签：google-maps-api-3, kml

我的应用程序无法识别我的 KML 文件。应用程序将转到正确的位置（纬度/经度）和缩放级别，但无法识别 KML 文件位置。我试图使用两个不同的服务器来检查问题，所以我相信问题出在代码上。

```
 <!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDOJCBv2WGJRJ7uxOyAMehKAMiAKXkkHFU&sensor=true">
    </script>
    <script type="text/javascript">
      function initialize() {
        var mapOptions = {
          center: new google.maps.LatLng(44.88119,-93.314798),
          zoom: 15,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);

        var nyLayer = new google.maps.KmlLayer('http://webgis.uwm.edu/engelki7/KMLFiles/Richfield_Homes2.kml',{suppressInfoWindows: true});

        google.maps.event.addListener(nyLayer, 'click', function(kmlEvent) {
         var text = kmlEvent.featureData.description;
         showInDiv(text);
        });
      }

      function showInDiv(text) {
         var sidediv = document.getElementById('content_window');
         sidediv.innerHTML = text;
        }
    </script>
  </head>
  <body onload="initialize()">
     <div id="map_canvas" style="width:79%; height:100%; float:left"></div>
    <div id="content_window" style="width:19%; height:100%; float:left"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T21:45:19.627

您的 kml 文件不存在。

[http://webgis.uwm.edu/engelki7/KMLFiles/Richfield_Homes2.kml](http://webgis.uwm.edu/engelki7/KMLFiles/Richfield_Homes2.kml)

给我：HTTP 错误 404 - 找不到文件或目录

如果您认为它在那里（服务器上的路径是正确的），那么服务器可能不知道如何处理 kml/kmz 文件。请参阅有关 kml 文件的文档的[这一部分](https://developers.google.com/kml/documentation/kml_tut#kml_server)。

# javascript - Rally App SDK 2.0：所有卡片加载/渲染到看板后的回调函数

> ID：11941922
> 
> 赞同：0
> 
> 时间：2012-08-13T20:38:26.423
> 
> 标签：javascript, extjs, extjs4, rally

在加载/渲染所有卡片之后，我需要专门运行一个函数。但是，我看不到这种回调的任何方法，所以我不完全确定如何做到这一点。

如果您有任何建议，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T21:48:27.450

您是指看板应用程序还是 Cardboard 组件？

对于 Cardboard 组件，当 cardboard 完全加载所有内容时会触发 [load事件。](https://rally1.rallydev.com/apps/2.0p3/doc/#!/api/Rally.ui.cardboard.CardBoard-event-load)

```
Ext.create({
     xtype: 'rallycardboard',
     types: ['User Story'],
     attribute: 'ScheduleState',
     listeners: {
        load: function() {
              // cardboard is done loading
        }
     }
}); 
```

# algorithm - 如何使用解析树解决表达式？

> ID：11941923
> 
> 赞同：1
> 
> 时间：2012-08-13T20:38:27.920
> 
> 标签：algorithm, parsing, antlr, grammar, context-free-grammar

嗨，我一直在学习一些基本的解析教程，我已经能够理解[CFG](http://en.wikipedia.org/wiki/Context-free_grammar)和解析树的基础知识。

对基本方程采取以下语法：

```
term
  : INTEGER
  | '(' expression ')'
  ;

mult
  : term ('*' term)*
  ;

add
  : mult ('+' mult)*
  ;

expression
  : add
  ; 
```

我想知道的是它如何帮助我们解方程？所有的教程都以制作解析树或编写解析器（如预测解析器）结束，但所有解析器检查的是该表达式是否符合语法但它不评估它。

任何人都可以帮助我吗？

# powershell - 获取 Active Directory 中的所有空组

> ID：11941929
> 
> 赞同：4
> 
> 时间：2012-08-13T20:38:43.447
> 
> 标签：powershell, quest

我一直试图弄清楚如何获取所有空的 Active Directory 组。我想出了这个命令，它选择没有成员并且不是任何成员的组。

```
Get-QADGroup -GroupType Security -SizeLimit 0 | where-object {$_.Members.Count -eq 0 -and $_.MemberOf.Count -eq 0} | select GroupName, ParentContainer | Export-Csv c:\emptygroups.csv 
```

这基本上是正确的，但它表示某些组，如默认组**域计算机**是空的，但它不是空的。此特定组只有计算机成员，但似乎没有选择其他也只有计算机的组。

有谁知道为什么这个命令会吸引一些有成员的人？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T03:04:09.283

`Get-QADGroup`cmdlet 有一个`-Empty`参数。帮助中的描述提示了返回这些默认组的原因：

> 注意：如果未设置“成员”属性，则该组被视为空组。因此，此参数可以检索仅包含将组设置为主组的成员的组。一个示例是域用户组，它通常是任何用户帐户的主要组，但未设置“成员”属性。

我不太熟悉 Quest 的东西，但我能够通过这种方式找到空组（可能不是最有效的）：

```
Get-ADGroup -Filter {GroupCategory -eq 'Security'} | ?{@(Get-ADGroupMember $_).Length -eq 0} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-06T10:45:00.870

这条线会做（`Import-Module ActiveDirectory`首先使用）：

```
Get-ADGroup -Filter * -Properties Members | where { $_.Members.Count -eq 0 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-20T20:30:14.740

此版本将仅显示 groupcategory 和 SAMaccountname。Name 也可以用来代替 samaccountname。groupcategory 将显示它是安全组还是 DL。

```
Get-ADGroup –Filter * -Properties Members | where { $_.Members.Count –eq 0 } |select groupcategory,samaccountname >c:\temp\nomembers.csv 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-06T15:57:50.270

实际上，在具有多个域、大量组（和大量用户）的环境中将其作为脚本运行会更快。注意：您需要加载 PowerShell 活动目录模块（import-module activedirectory）

```
 $domains = Get-ADForest|select -ExpandProperty domains
     $empties = @()
     $oops = @()
     foreach ($d in $domains){
     $groups = get-adgroup -filter * -server $d
     foreach ($g in $groups){
     $q = get-adgroup $g -properties members -server $d|select -expandproperty members
     If(!$?){$oops += $g
     write-host $g.name}
     if ($q -eq $null) {$empties += $g}
     }
     }
     $empties|select name,distinguishedname|export-csv .\empties.csv
     $oops|select name,distinguishedname|export-csv .\oops.csv 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-10T15:19:44.673

这对我有用。

```
Get-ADGroup -Filter {GroupCategory -eq 'Security'} -Properties Members | where { $_.Members.Count -eq 0 } | Select Name | Sort-Object Name 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T17:48:30.603

能够通过管道输入并获取可以过滤的*Members*和*MemberOf*`Get-QADGroupMember`的计数来正确获取值。这似乎非常低效，但它的目的是获得所需的计数。

 **```
Get-QADGroup -SizeLimit 0 | Select-Object Name,@{n='MemberCount';e={ (Get-QADGroupMember $_ -SizeLimit 0 | Measure-Object).Count}},@{n='MemberOfCount';e={ ((Get-QADGroup $_).MemberOf | Measure-Object).Count}} 
```

如果有人有更好的方法来做到这一点，请告诉。**

# javascript - javascript - 尝试根据 id/class 发出 onClick 警报

> ID：11941932
> 
> 赞同：0
> 
> 时间：2012-08-13T20:38:53.367
> 
> 标签：javascript, onclick, alert

我是编程新手，想知道如何制作自定义警报，当我单击它时显示对象的 id 或类名。我的网站有一张 8 种不同动物的图片，我希望它每次点击其中一种动物时都会出现“这是一个（动物的名字）”的警报。为什么下面的 javascript 代码不起作用？

我应该使用“this”而不是“parama”吗？我不明白我的函数 clicky 是否有任何参数。

```
var images = new Array()
images[0] = "bison"
images[1] = "frog"

function clicky(parama){
    for (entry in images){
        if (parama.attributes["name"].value === images[entry]){
            $(parama).onClick(alert("This is a" + parama.attributes["name"].value));
        } else {
            $(parama).onClick(alert("dang it");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:47:42.187

我建议在图像上使用`title`or`alt`属性而不是 JS 数组——这对 SEO 更加友好和语义化。更不用说`alt`图像需要使您的 HTML 有效 -[**演示**](http://jsfiddle.net/dnysh/1/)

```
var images = document.getElementsByTagName("img");

for ( var i = 0, count = images.length; i < count; i++ ) {
    images[i].addEventListener("click", function() {
        alert( this.getAttribute("alt") );
    });
} 
```

**更新**

如果你打开使用 jQuery - [**DEMO**](http://jsfiddle.net/dnysh/2/)

```
$("img").on("click", function() {
    alert( $(this).prop("alt") );
});​ 
```

您可以使用`.click()`，但建议使用`.on()`将不同类型的事件侦听器附加到元素。jQuery 还提供了获取属性的简写 -`.prop()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:48:14.363

结合你的两个答案，我想出了一种方法，用比我原来少得多的代码来做到这一点。看看这个！（图片都有“pic”类）

```
$('.pic').click(function(){
    alert("This is a " + this.getAttribute('alt'))
}); 
```

# ios - 撰写 Twitter DM 而不显示对话框

> ID：11941934
> 
> 赞同：0
> 
> 时间：2012-08-13T20:39:06.473
> 
> 标签：ios, twitter

我在 iOS 5 Twitter 框架上看到 @Cirrostratus 的回答 [：Tweeting without user input and Confirm (modal view controller)](https://stackoverflow.com/questions/9423447/ios-5-twitter-framework-tweeting-without-user-input-and-confirmation-modal-vie)，它非常适合推文。我将如何更改此设置以发送 DM？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T01:39:31.543

知道了：

```
 NSString *dmString = @"d @RecipientTwitterName ";
    NSString *statusString = [dmString stringByAppendingString:stringForTweet];

   postRequest = [[TWRequest alloc] initWithURL:[NSURL URLWithString:@"http://api.twitter.com/1/statuses/update.json"]
                                     parameters:[NSDictionary dictionaryWithObject:statusString forKey:@"status"]
                                  requestMethod:TWRequestMethodPOST]; 
```

只需在前面加上 d 和收件人的 Twitter 名称。

# c# - 刷新后的“ListView”位置

> ID：11941935
> 
> 赞同：0
> 
> 时间：2012-08-13T20:39:09.357
> 
> 标签：c#, .net, sql, winforms

我正在`ListView`使用来自 SQL 的两个数据集填充 a。这每 15 秒发生一次。如何保持滚动到位置并仍然刷新数据？我在这里看到了一些与相关问题有关的问题，但没有一个真正解决我的具体问题。我尝试了 TopMost 选项，但效果有限。

关于如何保持滚动到位置的任何建议？这是我用来填充数据的一些代码`ListBox`。

```
private void PopulateData()
{        
    _agent.Stop();
    listView1.Items.Clear();
    listView1.Groups.Clear();
    listView1.BeginUpdate();
    string filter;

    DataTable dt1 = new DataTable();
    DataTable dt2 = new DataTable();

    dt1.Columns.Add("Name", typeof(string));
    dt1.Columns.Add("Status", typeof(string));
    dt1.Columns.Add("Time", typeof(double));
    dt1.Columns.Add("Calls", typeof(double));
    dt1.Columns.Add("InProgress", typeof(double));
    dt1.Columns.Add("Region", typeof(string));

    dt2.Columns.Add("Name", typeof(string));
    dt2.Columns.Add("CChats", typeof(double));
    dt2.Columns.Add("AChats", typeof(double));

    foreach (DataRow dr in _agentStates.Rows)
    {
        DataRow row = dt1.NewRow();
        row["Name"] = dr[0].ToString();
        row["Status"] = dr[1].ToString();
        row["Time"] = Convert.ToDouble(dr[2].ToString());
        row["Calls"] = Convert.ToDouble(dr[3].ToString());
        row["InProgress"] = Convert.ToDouble(dr[4].ToString());
        row["Region"] = dr[5].ToString();
        dt1.Rows.Add(row);
    }

    foreach (DataRow dr in _chatCount.Rows)
    {
        DataRow row = dt2.NewRow();
        row["Name"] = dr[0].ToString();
        row["CChats"] = Convert.ToDouble(dr[1].ToString());
        row["AChats"] = Convert.ToDouble(dr[2].ToString());
        dt2.Rows.Add(row);

    }

    var result = from table1 in dt1.AsEnumerable()
                 join table2 in dt2.AsEnumerable()
                 on (string)table1["Name"] equals (string)table2["Name"]
                 into joinedDt
                 from table2 in joinedDt.DefaultIfEmpty()
                 select new
                 {
                     Name = (string)table1["Name"],
                     Status = (string)table1["Status"],
                     Time = (double)table1["Time"],
                     Calls = (double)table1["Calls"],
                     InProgress = (double)table1["InProgress"],
                     Region = (string)table1["Region"],
                     CChats = (table2 != null ? (double)table2["CChats"] : 0),
                     AChats = (table2 != null ? (double)table2["AChats"] : 0)
                 };

    foreach (var item in result)
    {
        if (item.Status != "NLO" && item.Status !="Webchat Account")
        {
            var calls = item.Calls + item.CChats;
            var lvi = new ListViewItem(item.Name);
            lvi.SubItems.Add(item.Status);
            lvi.SubItems.Add(Conv.Time(item.Time));
            lvi.SubItems.Add(item.Calls.ToString());
            lvi.SubItems.Add(item.CChats.ToString());
            lvi.SubItems.Add((item.AChats + item.InProgress).ToString());
            lvi.SubItems.Add(calls.ToString());
            this.listView1.Items.Add(lvi);
        }
    }

    listView1.EndUpdate();
    _agent.Start();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:47:02.140

在模式下使用列表视图[`VirtualMode`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.virtualmode.aspx)并实现[`RetrieveVirtualItem`事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.retrievevirtualitem.aspx)。

它可以让您更好地控制可见内容，并且您无需清除所有项目即可对其进行更新。

如果`VirtualMode`设置为`true`，您只需将 设置为`VirtualListSize`要在列表中显示的项目数。该`RetrieveVirtualItem`事件将为列表视图想要显示给用户的每个项目触发。因此，如果您的数据发生变化，您可以调用`Refresh`listview 的方法，您的`RetrieveVirtualItem`处理程序将返回新的项目数据。

考虑这个例子：

```
public partial class Form1 : Form
{
    private int i = 0;

    public Form1()
    {
        InitializeComponent();
        listView1.View = View.Details;
        listView1.Columns.Add("Col", 250);
        listView1.VirtualMode = true;
        listView1.RetrieveVirtualItem += listView1_RetrieveVirtualItem;
        listView1.VirtualListSize = 25;
        button1.Click += button1_Click;
    }

    private void listView1_RetrieveVirtualItem(object sender, RetrieveVirtualItemEventArgs e)
    {
        e.Item = new ListViewItem((i + e.ItemIndex).ToString());
    }

    private void button1_Click(object sender, EventArgs e)
    {
        // simulate data update
        i += 10;
        //listView1.VirtualListSize += 5; // you can even change the virtual list size while keeping current scroll position
        listView1.Refresh();
    }
} 
```

# debugging - Lua 调试 - 检测变量值何时发生变化

> ID：11941938
> 
> 赞同：1
> 
> 时间：2012-08-13T20:39:12.910
> 
> 标签：debugging, variables, lua, hook

是否可以使用 lua 调试库检测变量的值何时发生变化。类似于回调函数的东西，它会提供详细信息，例如更改值的函数、先前的值等。这样的事情可能吗？

我阅读了有关钩子的信息，但我不确定钩子是否可以设置为变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:43:14.177

您可以在 Lua 中通过使用元表并保留“代理”表并使用 __newindex 函数调用来检测添加变量的尝试在一定程度上做到这一点。

这在“跟踪表访问”部分的 Lua 编程一书中有所介绍：

[http://www.lua.org/pil/13.4.4.html](http://www.lua.org/pil/13.4.4.html)

**另见**
[http://www.gammon.com.au/forum/?id=10887](http://www.gammon.com.au/forum/?id=10887)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T21:50:23.600

如果您不介意使用调试器，那么某些调试器允许您设置 Watch 表达式，当表达式中的条件为真时将触发该表达式。我将展示如何在[MobDebug](https://github.com/pkulchenko/MobDebug)中完成此操作（它使用 lua 调试库，但据我所知，没有直接的方法来检测变量更改）。

假设我们有一个`start.lua`像下面这样的脚本，并且想要检测`foo`值 2 的位置：

```
print("Start")
local foo = 0
for i = 1, 3 do
  local function bar()
    print("In bar")
  end
  foo = i
  print("Loop")
  bar()
end
print("End") 
```

1.  下载[mobdebug.lua](https://github.com/pkulchenko/MobDebug/blob/master/src/mobdebug.lua)并使其可用于您的脚本（最简单的方法是将其与您的脚本一起放入文件夹中）。
2.  `lua -e "require('mobdebug').listen()"`使用命令启动服务器。
3.  `lua -e "require('mobdebug').loop()"`使用命令启动客户端。
4.  您将在服务器窗口中看到提示：'>'。键入`load start.lua`以加载脚本。
5.  键入`step`，然后`step`再次键入。你会看到“Paused at file start.lua line 3”。
6.  让我们看看它的价值`foo`是多少。键入`eval foo`，您应该会看到 0。
7.  现在我们可以设置我们的手表了。键入`setw foo == 2`。你可以在 setw 命令之后指定任何 Lua 表达式；当条件被评估为真时，脚本的执行将停止。
8.  使用“运行”命令继续执行脚本。
9.  手表现在触发，它将向您显示如下消息：“Paused at file start.lua line 8 (watch expression 1: [foo == 2])”。这意味着前面的表达式将值更改`foo`为 2 并且执行在第 8 行停止。然后您可以检查您的脚本和当前值（您可以使用“eval”和“exec”命令运行任何 Lua 代码在您的脚本环境中评估）以查找触发更改的原因。

这种方法的好处是您不仅可以监视表值，还可以指定任何表达式。主要缺点是您的脚本在调试器下运行，并且在每一步之后都会评估表达式，这可能会变得非常慢。

# hibernate - 多对多休眠映射和中间表对象

> ID：11941939
> 
> 赞同：1
> 
> 时间：2012-08-13T20:39:21.523
> 
> 标签：hibernate, orm, mapping, many-to-many

如何在中间表映射到对象的休眠中定义多对多关系？即构建可以有另一个构建作为依赖，并且这个依赖也可以在其他构建中选择。“构建依赖”对象应类似于：

```
BuildDep{
   int id;
   Build parent;
   Build child;
   ....
} 
```

映射到具有列的中间表：

```
id, child_build_id, parent_build_id 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T14:57:46.107

根据定义，只有当关联表除了父表的外键之外没有任何其他列时，才能使用多对多关联。

相反，您应该使用两个 ManyToOne/OneToMany 关联。

这是有关此主题的论坛主题（带有示例）：

[http://www.coderanch.com/t/218431/ORM/databases/Hibernate-Annotations-many-many-association](http://www.coderanch.com/t/218431/ORM/databases/Hibernate-Annotations-many-many-association)

# jsf - 将输入文本值传递给 bean 方法而不将输入值绑定到 bean 属性

> ID：11941943
> 
> 赞同：40
> 
> 时间：2012-08-13T20:39:36.190
> 
> 标签：jsf, parameter-passing, managed-bean

我可以将输入文本字段值传递给 bean 方法而不将值绑定到 bean 属性吗？

```
<h:inputText value="#{myBean.myProperty}" />
<h:commandButton value="Test" action="#{myBean.execute()} /> 
```

我可以在不进行临时保存的情况下执行此操作`#{myBean.myProperty}`吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-08-13T22:33:50.520

将组件绑定[`UIInput`](http://docs.oracle.com/javaee/7/api/javax/faces/component/UIInput.html)到视图并用于[`UIInput#getValue()`](http://docs.oracle.com/javaee/7/api/javax/faces/component/UIOutput.html#getValue--)将其值作为方法参数传递。

```
<h:inputText binding="#{input1}" />
<h:commandButton value="Test" action="#{myBean.execute(input1.value)}" /> 
```

和

```
public void execute(String value) {
    // ...
} 
```

请注意，这种方式的值已经转换并验证了通常的 JSF 方式。

### 也可以看看：

*   [JSF 中的“绑定”属性如何工作？何时以及如何使用它？](https://stackoverflow.com/questions/14911158/how-does-the-binding-attribute-work-in-jsf-when-and-how-should-it-be-used)
*   [没有 bean 属性的 JSF 组件绑定](https://stackoverflow.com/questions/8168302/jsf-component-binding-without-bean-property/)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-13T21:26:24.843

[您可以通过获取请求并使用纯 Java EE ServletRequest#getParameter](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameter(java.lang.String))来恢复表单的参数。使用此方法时，请记住设置组件的 id 和名称：

```
<h:form id="myForm">
    <h:inputText id="txtProperty" /> <!-- no binding here -->
    <input type="text" id="txtAnotherProperty" name="txtAnotherProperty" />
    <h:commandButton value="Test" action="#{myBean.execute()} /> 
</h:form> 
```

托管豆：

```
@ManagedBean
@RequestScoped
public class MyBean {
    public void execute() {
        HttpServletRequest request = (HttpServletRequest)FacesContext.getCurrentInstance().getExternalContext().getRequest();
        String txtProperty = request.getParameter("myForm:txtProperty");
        //note the difference when getting the parameter
        String txtAnotherProperty= request.getParameter("txtAnotherProperty");
        //use the value in txtProperty as you want...
        //Note: don't use System.out.println in production, use a logger instead
        System.out.println(txtProperty);
        System.out.println(txtAnotherProperty);
    }
} 
```

另一个提供更多信息的线程：

*   [在 JSF 中获取请求参数值](https://stackoverflow.com/a/3352796/1065197)

# ruby-on-rails - Rails Test::Unit 不起作用。但是应用程序有效，控制台有效，甚至 Test::Unit 中的控制台有效

> ID：11941945
> 
> 赞同：0
> 
> 时间：2012-08-13T20:39:39.290
> 
> 标签：ruby-on-rails, unit-testing, testing

我有一个简单地更新属性的方法。：

```
@objects.each do |thingamabobber|
  thingamabobber.update_attributes( { attribute_one: false, attribute_two: true } )
end 
```

它做了一点点，但在大多数情况下，就是这样。我在该更新部分之前和之后放置了一个调试器。我注意到在运行 Unit::Test 时，它不会更新属性。

但是，如果在同一个调试器中，只需将代码复制并粘贴到 Test::Unit 控制台中，它就会更新而没有错误。如果我使用 Rails 控制台，或者我将应用程序作为一个整体使用，这将适用。一切正常。考试除外。

请注意，我的测试对象中没有任何内容被存根。我正在使用 Factory girl 来创建我的对象。

此外，如果我将调试器扔到测试中，并在我正在更新的属性上运行一个集合，它们将返回*原样*，**但仍然通过测试**，也就是说，除了一个确保 attribute_one 的测试已更新。

这告诉我..Test::Unit 正在默默地处理数据，并且它失败了，但不是因为它告诉我的任何原因。

有谁知道这可能是什么症状？

**更新**

这里真的很简单：

```
should "update all items" do
  @item.items.last.update_all_recurring_items( {"name" => 'Ooooohhhh Yeeeeeea! Kooolaid Goooooood!'} )
  assert_equal @item.name, @item.items.last.name
end 
```

然后我的模型中的方法：

```
def update_all_recurring_items params = {}
  parent = self.recurring_items.present? ? self : Item.find(self.recurring_item_id)
  parent.recurring_items.each do |item|
    # Everything ok up to here. If I run the below method it works.
    item.update_attributes( params )
    # But! The Test Suit just skips over this like nothing ever happened.
  end
  parent.update_attributes(params) if self != parent
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:21:49.927

我意识到答案是*重新加载*对象，以便测试实例化对象。

所以简单地这样做：

```
@object.reload 
```

允许所有测试通过，并且控制台反映 Test::Unit 中的更改。

不过，我很好奇为什么会这样。

# jquery - Firefox 正在更改我的代码？

> ID：11941951
> 
> 赞同：0
> 
> 时间：2012-08-13T20:39:57.937
> 
> 标签：jquery, firefox, cross-browser

这是 chrome 和 firefox 读取的同一个 .js 文件……（最新版本）有人能看出区别吗？firefox将'fadeTo'更改为'fadeOut'和'fadeIn' 我写的原始脚本是fadeTo 为什么会这样？

火狐：

```
$('document').ready(function(){
$('#errors').css('display', 'none');
$('#errors').fadeIn('fast');

if ($('#errors').length){
    $('#content').fadeOut('slow');
}
$('#container').click(function(){ 
$('#errors').fadeOut('slow'); 
$('#content').fadeIn('fast');
});

}); 
```

铬合金：

```
$('document').ready(function(){
$('#errors').css('display', 'none');
$('#errors').fadeIn('slow');

if ($('#errors').length){
$('#content').fadeTo('slow', 0.5);
}

$('#container').click(function(){ 
$('#errors').fadeOut('fest'); 
$('#content').fadeTo('slow', 1.0);
});

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:41:49.153

我敢打赌，好钱缓存是罪魁祸首。一个浏览器正在缓存此文件的旧副本。清除两个浏览器中的缓存并刷新。或者尝试换档刷新。

# string - Java - 搜索分隔符

> ID：11941957
> 
> 赞同：0
> 
> 时间：2012-08-13T20:40:30.777
> 
> 标签：string, search, char, character, identifier

我正在纠正一个程序来帮助我跟踪我的工作里程。我只去特定的地方。我做了一个开关，它具有我可能拥有的所有可能的开始和结束位置，以及它们的距离。现在当我运行我的程序时，会弹出一个窗口询问我是否去了每个位置。我每次都必须输入结束位置作为下一个开始位置。我希望能够输入一个长字符串（例如：location1>location2+location3>location4）并让它计算总里程。

```
 `import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Scanner;

import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JTextField;

public class Main extends JFrame {
    public static void main(String[] agrs) {
        double total = 0;
        double d = 0;
        int c = 0;
        int t = 0;
        //Scanner input = new Scanner(System.in);
        // Scanner input1 = new Scanner(System.in);
        // String place;
        JOptionPane.showMessageDialog(null, "MILEAGE CALCULATOR \n\nLocations: ADMIN, AE, BE, CE, CHS, CJHS, IE, NSE, PKE, RHS, SMS, SPE \nFormat: Location1>Location2");
    //  JOptionPane.showMessagedialog(null,"Locations: ADMIN, AE, BE, CE, CHS, CJHS, IE, NSE, PKE, RHS, SMS, SPE");

        //System.out.println("MILAGE CALCULATOR \nLocations: ADMIN, AE, BE, CE, CHS, CJHS, IE, NSE, PKE, RHS, SMS, SPE \nFormat: LOCATION1>LOCATION2");
        t = Integer.parseInt(JOptionPane.showInputDialog(null, "How many places did you go to from the admin building?"));
        //t = input.nextInt();
        //t++;

        // System.out.println(t);
        // System.out.println(c);
        while (t > c) {
            String place = JOptionPane.showInputDialog(null, "where did you go?");
            //String place = input.nextLine();
        //  place.equalsIgnoreCase(place);
            d=0;
            switch (place.toUpperCase()) {
            case "ADMIN>AE":
            case "AE>ADMIN":
                d = 7;
                break;
            case "ADMIN>BE":
            case "BE>ADMIN":
                d = 2.8;
                break;
            case "ADMIN>CE":
            case "CE>ADMIN":
                d = 1.5;
                break;
            case "ADMIN>CHS":
            case "CHS>ADMIN":
                d = .6;
                break;
            case "ADMIN>CJHS":
            case "CJHS>ADMIN":
                d = 1.5;
                break;
            case "ADMIN>IE":
            case "IE>ADMIN":
                d = 2.3;
                break;
            case "ADMIN>NSE":
            case "NSE>ADMIN":
                d = 4.5;
                break;
            case "ADMIN>PKE":
            case "PKE>ADMIN":
                d = 2.6;
                break;
            case "ADMIN>RHS":
            case "RHS>ADMIN":
                d = 1.5;
                break;
            case "ADMIN>SMS":
            case "SMS>ADMIN":
                d = 3.9;
                break;
            case "ADMIN>SPE":
            case "SPE>ADMIN":
                d = 3.2;
                break;
            case "AE>BE":
            case "BE>AE":
                d = 9.5;
                break;
            case "AE>CE":
            case "CE>AE":
                d = 6.3;
                break;
            case "AE>CHS":
            case "CHS>AE":
                d = 7.6;
                break;
            case "AE>CJHS":
            case "CJHS>AE":
                d = 6.3;
                break;
            case "AE>IE":
            case "IE>AE":
                d = 6.3;
                break;
            case "AE>NSE":
            case "NSE>AE":
                d = 8;
                break;
            case "AE>PKE":
            case "PKE>AE":
                d = 7.6;
                break;
            case "AE>RHS":
            case "RHS>AE":
                d = 6.3;
                break;
            case "AE>SMS":
            case "SMS>AE":
                d = 8.2;
                break;
            case "AE>SPE":
            case "SPE>AE":
                d = 7.5;
                break;
            case "BE>CE":
            case "CE>BE":
                d = 3.7;
                break;
            case "BE>CHS":
            case "CHS>BE":
                d = 2.7;
                break;
            case "BE>CJHS":
            case "CJHS>BE":
                d = 3.7;
                break;
            case"BE>IE":
            case "IE>BE":
                d = 5;
                break;
            case "BE>NSE":
            case "NSE>BE":
                d = 4.2;
                break;
            case "BE>PKE":
            case "PKE>BE":
                d = 2.8;
                break;
            case "BE>RHS":
            case "RHS>BE":
                d = 3.7;
                break;
            case "BE>SMS":
            case "SMS>BE":
                d = 4.2;
                break;
            case "BE>SPE":
            case "SPE>BE":
                d = 7.4;
                break;
            case "CE>CHS":
            case "CHS>CE":
                d = 1.9;
                break;
            case "CE>CJHS":
            case "CJHS>CE":
                d = 0;
                break;
            case "CE>IE":
            case "IE>CE":
                d = 2.5;
                break;
            case "CE>NSE":
            case "NSE>CE":
                d = 3.5;
                break;
            case "CE>PKE":
            case "PKE>CE":
                d = 2.3;
                break;
            case "CE>RHS":
            case "RHS>CE":
                d = 0;
                break;
            case "CE>SMS":
            case "SMS>CE":
                d = 3.7;
                break;
            case "CE>SPE":
            case "SPE>CE":
                d = 3.3;
                break;
            case "CHS>CJHS":
            case "CJHS>CHS":
                d = 1.8;
                break;
            case "CHS>IE":
            case "IE>CHS":
                d = 2.9;
                break;
            case "CHS>NSE":
            case "NSE>CHS":
                d = 3.2;
                break;
            case "CHS>PKE":
            case "PKE>CHS":
                d = 2;
                break;
            case "CHS>RHS":
            case "RHS>CHS":
                d = 1.9;
                break;
            case "CHS>SMS":
            case "SMS>CHS":
                d = 3.3;
                break;
            case "CHS>SPE":
            case "SPE>CHS":
                d = 3.8;
                break;
            case "CJHS>IE":
            case "IE>CJHS":
                d = 2.5;
                break;
            case "CJHS>NSE":
            case "NSE>CJHS":
                d = 4.3;
                break;
            case "CJHS>PKE":
            case "PKE>CJHS":
                d = 2.3;
                break;
            case "CJHS>RHS":
            case "RHS>CJHS":
                d = 0;
                break;
            case "CJHS>SMS":
            case "SMS>CJHS":
                d = 3.7;
                break;
            case "CJHS>SPE":
            case "SPE>CJHS":
                d = 3.3;
                break;
            case "IE>NSE":
            case "NSE>IE":
                d = 5.8;
                break;
            case "IE>PKE":
            case "PKE>IE":
                d = 4.6;
                break;
            case "IE>RHS":
            case "RHS>IE":
                d = 2.5;
                break;
            case "IE>SMS":
            case "SMS>IE":
                d = 6;
                break;
            case "IE>SPE":
            case "SPE>IE":
                d = 3.1;
                break;
            case "NSE>PKE":
            case "PKE>NSE":
                d = 1.3;
                break;
            case "NSE>RHS":
            case "RHS>NSE":
                d = 3.5;
                break;
            case "NSE>SMS":
            case "SMS>NSE":
                d = .2;
            break;
            case "NSE>SPE":
            case "SPE>NSE":
                d = 7.2;
                break;
            case "PKE>RHS":
            case "RHS>PKE":
                d = 2.2;
                break;
            case "PKE>SMS":
            case "SMS>PKE":
                d = 1.5;
                break;
            case "PKE>SPE":
            case "SPE>PKE":
                d = 5.5;
                break;
            case "RHS>SMS":
            case "SMS>RHS":
                d = 3.7;
                break;
            case "RHS>SPE":
            case "SPE>RHS":
                d = 3.3;
                break;
            case "SMS>SPE":
            case "SPE>SMS":
                d = 7.4;
                break;
            }

            // System.out.println(total);
            total = d + total;
            // System.out.println(total);
            // JOptionPane.showMessageDialog("miles Driven ", d+total);
            c++;
        }
        JOptionPane.showMessageDialog(null, "Miles Driven: " + total);
        //System.out.println(total);

    }
}` 

            回答 #1

赞同：0

时间：2012-08-14T13:46:29.600

您可以执行以下操作：

```
int total = 0;
String[] places = place.split(">"); //Split your input string place into a list 
for(int i = 0; i < places.length - 1; i++){
    String leg = places[i] + ">" + places[i+1]; //Create string representing this leg of the journey

    //Figure out the length of this leg of the journey using your switch statement

    total += d; //d is the variable you were using in the switch

} 
```

因此，如果您输入“AE>Admin>BE>CJHS”，则循环的第一次迭代会将大小写设置为 AE>Admin，并使用您的开关将距离设置为 7，总距离为 7，第二次通过应该得到 Admin>BE，距离 = 2.8 和总计 = 9.8，第三次迭代 BE>CJHS，距离 = 3.7 和总计 = 13.5，如果我的心算正确的话。然后 i 将递增到 3，由于数组的长度只有 4，它会跳出循环。

如果您希望以不同的方式格式化您的字符串，这里是字符串类的 java 文档和它的 split 方法。[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split(java.lang.String](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split(java.lang.String) )

```

# php - MySQL Query 未打印所有表数据

> ID：11941960
> 
> 赞同：1
> 
> 时间：2012-08-13T20:40:46.673
> 
> 标签：php, mysql

这里可能是一个简单的解决方案，但这是我的代码：

```
<?php
include("connect.php");
$data = mysql_query("SELECT * FROM table ORDER BY name");
$info = mysql_fetch_array($data);
?> 
```

然后打印它：

```
<select>
 <?php
  while($info = mysql_fetch_array($data)) {
     echo '<option value="'.$info['value'].'" rel="'.$info['del'].'">'.$info['name'].'</option>';
  }
 ?>
</select> 
```

出于某种原因，它会返回除第一个结果之外的所有结果？前任。我按名称订购，第一个应该是苹果（id = 9），但它跳过了它并返回蓝莓（id = 5）

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:42:22.177

```
$data = mysql_query("SELECT * FROM table ORDER BY name");
$info = mysql_fetch_array($data); 
```

第一个 mysql_fetch_array 行加载一行数据；当您进入 for 循环时，然后加载下一行，因此第一行被丢弃。

最简单的解决方案就是删除第一个电话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T20:42:29.857

您在循环之前`mysql_fetch_array()`立即调用`mysql_query()`，该循环检索一行`$info`并将记录指针前进到第二行。然后，当您进入 fetch 循环时，行集已经指向第二行。

```
$data = mysql_query("SELECT * FROM table ORDER BY name");
// Don't do this!
// $info = mysql_fetch_array($data);
// Instead just proceed with your while loop to fetch rows... 
```

# fullscreen - Xlib 在多显示器上全屏

> ID：11941961
> 
> 赞同：1
> 
> 时间：2012-08-13T20:40:50.447
> 
> 标签：fullscreen, xlib

我在多显示器配置和 xlib 全屏窗口方面遇到了一些问题。当虚拟桌面进入全屏时（发送_NET_WM_STATE_FULLSCREEN时），可以检测到虚拟桌面上的哪个屏幕包含窗口和窗口大小？我有两个显示器 1024x768 组合成大桌面 2048x768，Xinerama 正确报告两个 1024x768 屏幕，但 WM 可以将窗口提升到一个屏幕或两个屏幕（在 WM 设置中启用/禁用）。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:53:03.583

好的，我找到了解决方案。非常简单：在等待显示时捕获 ConfigureNotify 事件。

# crystal-reports - 如何在水晶报表的文本字段中添加前导零

> ID：11941962
> 
> 赞同：7
> 
> 时间：2012-08-13T20:40:56.593
> 
> 标签：crystal-reports, formula, leading-zero, crystal-reports-formulas

我正在想办法将前导零添加到字符串字段值。例如，我有 12345，但需要一个将其转换为 012345 的公式。我是 Crystal 的新手，因为我知道这可能是一个简单的公式，但似乎无法让它工作。

```
12345 => 012345  (add leading zero to make it 6 chars) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-10-24T09:53:25.673

尝试这个

> totext(your_number, "000000");

第一个参数：嗯，这是输入。

第二个参数：输出中需要的位数。

例如，

> 数 = 1234;
> 
> totext(num, "000000");

输出：

> 001234

而且，如果要添加固定数量的零，则可以使用（添加 3 个前导零）：

> "000" + totext(your_number, 0); // 添加 3 个前导零

**注意：最终输出是字符串而不是数字。**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T16:33:18.843

用零填充*数字*字符串值到一定长度：

```
local numbervar yournum := tonumber({table.your_string}); //convert to number
totext(yournumnum, '000000') //convert back to padded string of length 6
```

或用于通用字符串

```
local stringvar yourstring:= {table.your_string};
local numbervar LENGTH := 10; //The desired padded string length

if length(yourstring) >= LENGTH then yourstring else
  replicatestring('0',LENGTH-length(yourstring)) + yourstring 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-25T10:35:14.887

如何在水晶报告中使用公式，将下面提到的公式放入（打开（字段资源管理器）->然后右键单击（公式字段）-->选择新的--->创建公式名称（xyz）-->然后放 ** **ToText({DataTable1.Sr_No},"0000")** **

复制/粘贴**之间的粗体文本，然后保存并关闭

在将该公式添加到水晶报告并运行之后，您需要的答案就在那里，

Sr_No. 0001 0002 0003

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T20:44:06.033

只需输入您的字段 '0'+yourstringchar

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-09T20:03:50.557

以上逻辑有效，它是左填充的通用公式

如果你想要正确的填充使用这个

```
 local stringvar yourstring:= {table.your_string};
  local numbervar LENGTH := 10; //The desired padded string length

  if length(yourstring) >= LENGTH 
        then yourstring 
  else
        yourstring + replicatestring('0',LENGTH-length(yourstring)) 
```

--kanthi

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-10T21:27:11.790

```
Right("00000000"&ToText({Table.correla}),8) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-27T22:11:04.740

我用这个：

```
replace((space((20)-len({Table.Field}))+({Table.Field}))," ","0") 
```

基本上它会产生前导空格，然后用零替换这些空格。通过从添加的空格中减去字段的长度，该字段将始终是**space((XX)** ...

它看起来过于复杂，但实际上简化了需要大量固定长度字段的报表。在开发报告时，我可以将此代码复制粘贴到新公式中，更改空格数以匹配所需的字段长度，然后更改我的字段名称。

# django - 如何覆盖 Django 管理员更改表单中的字段值显示

> ID：11941971
> 
> 赞同：10
> 
> 时间：2012-08-13T20:41:40.667
> 
> 标签：django, admin, field

如何覆盖在 Django 管理员中为字段显示的值？该字段包含 XML，当在管理员中查看它时，我想对其进行漂亮的格式化以便于阅读。我知道如何对字段本身的读写进行重新格式化，但这不是我想要做的。我希望存储的 XML 被去掉空格，并且我只想在管理员更改表单中查看它时重新格式化它。

如何控制此字段的管理员更改表单的文本区域中显示的值？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-13T21:59:47.303

```
class MyModelForm(forms.ModelForm):
    def __init__(self, *args, **kwargs):
        super(MyModelForm, self).__init__(*args, **kwargs)
        self.initial['some_field'] = some_encoding_method(self.instance.some_field)

class MyModelAdmin(admin.ModelAdmin):
    form = MyModelForm
    ... 
```

在哪里，`some_encoding_method`将是您为确定间距/缩进或您借用的其他一些第三方功能而设置的东西。但是，如果您编写自己的方法，最好将其放在模型本身上，然后通过实例调用它：

```
class MyModel(models.Model):
    ...
    def encode_some_field(self):
        # do something with self.some_field
        return encoded_some_field 
```

然后：

```
self.instance.encode_some_field() 
```

# html - 解释为什么 Height=100% 会破坏设计

> ID：11941975
> 
> 赞同：0
> 
> 时间：2012-08-13T20:41:45.797
> 
> 标签：html, css, height

我对 CSS 中的高度标签有疑问。我希望页面在没有任何滚动条的情况下显示，只是无法弄清楚为什么当我将正文标签中的“高度”从 99% 更改为 100% 时，滚动条突然出现并破坏了设计。

我想知道为什么会发生这种情况以及原因是什么。

谢谢！

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">

html {
    height:100%;
}

body {
    height: 99%;
    margin-left: 20px;
    margin-top:0px;

}

.gallerytitle {
    position: absolute;
    top: 20px;
    font-family: serif;
    font-size: 20px;
    text-align: left;
}

.fullgallerytitle {
text-align: left;
font-family: sans-serif;
font-size: 12px;}

.events{
position: absolute;
font-family: sans-serif;
font-size: 12px;
top: 20px;
right: 20px;}

/* Center Text Section */

.area {
  width: 100%;
  height: 100%;

  position: relative;
}

.middlespace {
  position: absolute;
  left: 50%;
  top: 50%;
  display: table;
}

.middlespace p {
  display: table-cell;
  vertical-align: middle;
  text-align: center;
}

.bottom-left {

    position: absolute;
    font:sans-serif;
    bottom: 15px;
    left: 15px;
}

.contact {
    font-size: 11px;
    font-family: sans-serif;
    border-bottom: 1px black dotted;
}

.exhibitiontitle {
    color: #d4d4d4;
    font-style: italic;
    font-family: sans-serif;
    font-size: 10px;
    text-align: center;
}

.contact {
    font-size: 11px;
    font-family: sans-serif;
    border-bottom: 1px black dotted;
}

.bold {
    font-family: serif;
}

.about {
    font-size: 11px;
    font-family: sans-serif;
}

.address {
font-size: 11px;
border-bottom: 1px grey dotted;
}

.bottom-right {
    position: absolute;
    bottom: 15px;
    right:15px;
      font-style: italic;
    color: #8e8e8e;
    font-size: 11px;
}

.openinghours {
    font-style: italic;
    color: #8e8e8e;
    font-size: 11px;
    }
.subscribebutton
{

height:10px;
font-size: 9px;

}

.subscribebox
{

height:10px;
font-size: 9px;

}

</style>

<title>XYZ</title>

</head>
<body>
    <div class="gallerytitle">XYZ<br /></div>
    <div class="events">LOREM</div>

<div class="bottom-left">
        <span class="about">

            <span class="bold">XYZ</span> is a project by XZY.&nbsp;&nbsp;&#124;&nbsp;
            <span="address">Website Information</span> &mdash; <a href="mailto:info@info.eu">info@info.com</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

        </span>
</div>

<div class="bottom-right">
    <span class="openinghours">Open by Appointment</span><span class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sponsored by XYZ</span>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:53:13.860

身体也有底部边缘。

```
body {
    height: 100%;
    margin: 0 0 0 20px;    
} 
```

尽管您应该考虑使用 css 重置，例如 eric meyers reset 或 normalize

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T20:50:56.550

用这个替换你的体型应该可以解决问题：

```
body {
height: 100%;
margin-left: 20px;
margin:0px; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T21:27:15.997

它破坏了页面，因为您使用了 99% 的页面，然后您将所有内容移动到 20px 的右侧。它将 99% 移到外面并使用更多。这是解决方案，我认为它们都有效：

```
body {
    height: 100%;
    margin-left: 20px;
    margin-right: -20px;
    margin-top:0px;
} 
```

或者

```
body {
    height: 100%;
    padding-left: 20px;
    padding-right: -20px;
    margin-top:0px;
} 
```

# javascript - 如何仅使用纯 JavaScript 获得 iframe 或窗口视口大小？

> ID：11941978
> 
> 赞同：0
> 
> 时间：2012-08-13T20:41:49.180
> 
> 标签：javascript, html, cross-browser, doctype

我正在寻找一种跨浏览器和跨站点（任何文档类型）的方法来获取视口大小。我知道您可以使用`document.documentElement.clientHeight/Width`or `document.body.clientHeight/Width`，但它们似乎取决于文档类型。

请注意，这个问题仅指纯 js。

# ruby-on-rails - 创建基本可重用 Rails 应用程序的最佳方法

> ID：11941981
> 
> 赞同：0
> 
> 时间：2012-08-13T20:42:08.403
> 
> 标签：ruby-on-rails, ruby, generator, code-reuse

当我开始一个新的 Rails 应用程序时，我发现自己一遍又一遍地写同样的东西。

它们中的大多数只是超出原型阶段的实验，如果您想这样称呼它们，则为“最小可行产品”。

他们都有一个共同点，那就是有某种用户模型、用于注册和登录的表单、向注册用户发送电子邮件以激活帐户……你明白了。拥有某种已经具有此类功能的基本应用程序会很好。不幸的是，这个问题对于 gem 来说不够通用，这让我有以下选择：

1.  编写一个基本应用程序，将其放在某个地方，然后在开始一个新项目时将其复制过来。这感觉很脏！
2.  使用[Rails 生成器](http://guides.rubyonrails.org/generators.html)创建用户模型并引入我正在使用的 gem。我还没有编写生成器，但是查看文档并回忆我在哪里看到生成器在运行，我觉得我的问题对于生成器来说有点太大了。
3.  其他我没想到的方法...

我基本上正在寻找的是来自有同样问题或比我更了解发电机的人的建议，哪些选项更可行。在当前状态下，我可能会选择第一个选项，然后在我有东西工作后尝试将其变成发电机。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T12:25:33.470

听起来像应用程序模板可能是您的问题的解决方案。查看[http://edgeguides.rubyonrails.org/rails_application_templates.html](http://edgeguides.rubyonrails.org/rails_application_templates.html)以获得一般概述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T20:58:45.343

我在 Rails 项目中遇到过几次类似的情况。

如果您愿意牺牲一些可定制性，我发现[ActiveAdmin是一个可靠的管理员平台。](http://activeadmin.info/)对于常规用户登录，您可以使用[Devise](https://github.com/plataformatec/devise/)（ActiveAdmin 也使用），您的所有用户问题都应该得到解决。

如果您使用这些，我建议您查看有关该主题的[RailsCasts](http://railscasts.com)。

祝你好运！

# javascript - 扩展 Twitter Bootstrap 的 Modal 插件

> ID：11941983
> 
> 赞同：1
> 
> 时间：2012-08-13T20:42:10.357
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在尝试扩展 Twitter Bootstrap 的模态插件。当显示和隐藏模式弹出窗口时，是否有一种干净的方法来触发操作。

```
$("#xyz").clone().modal({"backdrop": "static", "keyboard":true, "show":true});
$("#xyz").on("shown", function(e){ console.log("hi");}); 
```

尝试了上述方法，但什么也没做。

我不想为我的代码中的所有模式调用指定上述函数。我真正想要的是在显示或隐藏时为所有模态创建一个通用函数。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:48:37.513

您的代码无法正常工作，因为您将事件处理程序附加到`$('#xyz')`，但您正在从 创建一个模式`$('#xyz').clone()`，这是一个单独的对象。

尝试：

```
$("#xyz").on("shown", function(e){ console.log("hi");});
$("#xyz").clone(true).modal({"backdrop": "static", "keyboard":true, "show":true}); 
```

首先附加事件处理程序，然后克隆它，确保`true`作为参数传递，以便将所有事件处理程序和附加到`$('#xyz')`的数据传递给克隆对象。

# unix - 如何在unix中将行转换为列

> ID：11941991
> 
> 赞同：2
> 
> 时间：2012-08-13T20:42:39.617
> 
> 标签：unix

我希望将我的 Unix 文件输出（在新行上输出每个值）转换为分组行，如下所示。

假设我在 Unix 中的输出文件如下所示：

```
jobname
userid
starttime
endtime
jobname2
userid
starttime
endtime 
```

我希望输出为：

```
jobname1 userid starttime endtime
jobname2 userid starttime endtime 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T00:14:34.387

这是一个最小的`awk`解决方案：

```
awk 'ORS=NR%4?" ":"\n"' input.txt 
```

### 输出

```
jobname userid starttime endtime
jobname2 userid starttime endtime 
```

（如果你想对齐字段，管道到`column -t`）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-14T08:18:51.253

这会将每四行连续粘贴为四个制表符分隔的字段：

```
cat source_file | paste - - - - > destination_file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T22:29:20.367

使用 GNU sed：

```
tr '\n' ' ' < file | sed -r 's/(\w+ +){4}/&\n/g' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T20:56:59.537

如果您正在寻找一个 shell 脚本，您可以这样做，因为要在输出中打印的行数似乎必须是固定长度：

```
while read line1; do
  read line2
  read line3
  read line4
  echo $line1 $line2 $line3 $line4 >>output
done <file 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T21:07:22.753

有点难看，但不需要 shell 脚本：

```
cat outputfile | tr "\n" " " | sed -e 's/\W*\(\w*\) \(\w*\) \(\w*\) \(\w*\)\W*/\1 \2 \3 \4\n/g' 
```

# asp-classic - x64 PC 无法从经典 ASP 连接到 Salesforce

> ID：11941992
> 
> 赞同：0
> 
> 时间：2012-08-13T20:42:45.220
> 
> 标签：asp-classic, salesforce

我可以在我的 x86 计算机上使用经典 ASP 连接到 Salesforce，但是当我尝试在我的 x64 (Windows 7) PC 上连接时，我收到错误：“ActiveX 组件无法创建对象”。

我使用的代码是： Set SforceApi = server.CreateObject("SForceOfficeToolkit4.SForceSe​ssion4")

我下载并安装了 Office 工具包。还将“SF_MSApi4.dll”复制到“sysWOW64”文件夹并使用“regsvr32.exe”在那里注册。（也在 System32 文件夹中尝试过）。

我使用以下 VBA（来自 word doc）将 x64 PC 连接到 Salesforce 没有问题：
Set g_sfApi = New SForceOfficeToolkitLib4.SForceSession4

只是无法让它在经典 ASP 中的 x64 上工作。

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:29:19.990

您需要打开 IIS 管理器并找到运行 ASP 应用程序的应用程序池。打开高级设置并将“启用 32 位应用程序”设置设置为 true。

# foursquare - Foursquare API 没有在无用户 API 调用中返回公共场所照片？

> ID：11941996
> 
> 赞同：1
> 
> 时间：2012-08-13T20:43:11.957
> 
> 标签：foursquare, photos

我正在以无用户 API 调用的形式发出以下请求：

```
https://api.foursquare.com/v2/venues/xxx123yyy/photos?v=20120321&group=venue 
```

但我得到的响应显示项目计数为 0：

```
"response":  {
    "photos":  {
      "count": 0,
      "items":  []
    } 
```

我可以从 Foursquare 网页（无需登录）前往同一地点并查看那里公开列出的照片。如果我尝试另一个场所，我会得到预期的响应，其中包含与网络上可见的相同照片项目。阻碍预期响应的该场所的具体情况是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:54:41.490

我注意到这也开始发生在今天早些时候。`venues/`端点似乎需要一个oauth_token ，有效地中断无用户调用**。**

```
{"meta":{"code":401,"errorType":"invalid_auth","errorDetail":"Missing oauth_token. See https:\/\/developer.foursquare.com\/docs\/oauth.html for details."},"response":{}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T06:23:32.153

要使用场地 ID 获取照片，需要访问令牌...

如果你想要所有非朋友的公开照片 [https://api.foursquare.com/v2/venues/](https://api.foursquare.com/v2/venues/) {你管理的Vanue ID}/photos?group=venue&oauth_token={Your Access Tiken}&v={Current Data in yyyyMMdd format }

如果您想要所有公开照片 [https://api.foursquare.com/v2/venues/](https://api.foursquare.com/v2/venues/) {您管理的Vanue ID}/photos?&oauth_token={您的访问令牌}&v={当前数据，格式为 yyyyMMdd}