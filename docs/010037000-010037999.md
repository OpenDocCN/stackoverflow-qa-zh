# StackOverflow 问答 10037000-10037999

# android - RelativeLayout 的属性 alignWithParentIfMissing 没有给出预期的结果

> ID：10037003
> 
> 赞同：0
> 
> 时间：2012-04-05T22:40:30.297
> 
> 标签：android, layout, android-relativelayout

在此先感谢您的时间。我正在使用 RelativeLayout 来显示我的列表项。我有图像按钮左对齐父和图像右侧的一堆 TextViews。只有始终可见的文本视图是**ordersummaryrow.itemtitle**和**ordersummaryrow.itemprice**。我正在根据 CustomAdapter 中的条件设置其余文本视图的可见性。例如，如果提供了特殊请求，那么它应该显示在底部，如果提供了项目选项，那么在请求的顶部，如果提供了额外的项目，那么它应该显示在项目选项的顶部，最后是主项目。另外，如果没有其他文本视图可见，我希望 Main Item Title 居中对齐，如此处[所述](http://developer.android.com/resources/articles/layout-tricks-efficiency.html). 但这不是我通过这种行布局得到的。如果提供了特殊要求，那么这就是我看到的唯一文本视图。它甚至没有显示主要项目标题。我确信它是可行的，我一定错过了一些东西。感谢你的帮助。

ordersummaryrow.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/listitem_background"
    >
<LinearLayout
    android:id="@+id/ordersummaryrow.buttons"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:layout_alignParentTop="true"
    android:layout_alignParentLeft="true"
    android:layout_marginRight="5dp">
<ImageView
    android:id="@+id/ordersummaryrow.delete"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/orderdelete"
    android:layout_weight="1" />
<ImageView
    android:id="@+id/ordersummaryrow.update"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/orderedit"
    android:layout_weight="1" />
</LinearLayout> 
<TextView
    android:id="@+id/ordersummaryrow.splrequest"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textColor="@color/custom_black_color"
    android:layout_toRightOf="@id/ordersummaryrow.buttons"
    android:layout_alignParentBottom="true" />
<TextView
    android:id="@+id/ordersummaryrow.itemoption"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textColor="@color/custom_black_color"
    android:text="Item Option"
    android:layout_toRightOf="@id/ordersummaryrow.buttons"
    android:layout_above="@id/ordersummaryrow.splrequest" 
    android:layout_alignWithParentIfMissing="true"
    />
<TextView
    android:id="@+id/ordersummaryrow.extraitem"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textColor="@color/custom_black_color"
    android:text="Extra Item Title"
    android:layout_toRightOf="@id/ordersummaryrow.buttons"
    android:layout_above="@id/ordersummaryrow.itemoption" 
    android:layout_alignWithParentIfMissing="true"
    />
<TextView
    android:id="@+id/ordersummaryrow.extraitemprice"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textColor="@color/custom_black_color"
    android:text="$"
    android:layout_above="@id/ordersummaryrow.itemoption" 
    android:layout_alignParentRight="true"
    android:layout_alignWithParentIfMissing="true" 
    />

<TextView
    android:id="@+id/ordersummaryrow.itemtitle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textColor="@color/custom_black_color"
    android:layout_above="@id/ordersummaryrow.extraitem" 
    android:layout_toRightOf="@id/ordersummaryrow.buttons"
    android:layout_alignWithParentIfMissing="true"
    android:gravity="center_vertical"
    android:text="Item Title" />

<TextView
    android:id="@+id/ordersummaryrow.itemprice"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textColor="@color/custom_black_color"
    android:text="$$"
    android:layout_alignTop="@id/ordersummaryrow.itemtitle"
    android:layout_alignParentRight="true" 
    />
</RelativeLayout> 
```

这是自定义适配器中的 GetView()

```
@Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        View row = convertView;
        if(row == null)
        {
            LayoutInflater vi = (LayoutInflater)m_context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            try{
                row = vi.inflate(R.layout.ordersummaryrow, null);
            }
            catch(Exception e)
            {
                Log.i("SUBMENU", e.getMessage());
            }
        }
        OrderSummaryRowViewHolder holder = (OrderSummaryRowViewHolder)row.getTag();
        if(holder == null)
        {
            holder =  new OrderSummaryRowViewHolder(row);
            row.setTag(holder);
        }
        OrderedItem orderItem = m_orderedItem.get(position);
        if (orderItem != null) 
        {
            if(m_updateListener != null)
                holder.m_updateBtn.setOnClickListener(m_updateListener);
            else
                Log.i("OrderSummaryRowAdapter", "Update Listener is not registered");

            if(m_deleteListener != null)
                holder.m_deleteBtn.setOnClickListener(m_deleteListener);
            else
                Log.i("OrderSummaryRowAdapter", "Delete Listener is not registered");

            holder.m_titleTxt.setText(orderItem.get_orderItem().getName());
            holder.m_priceTxt.setText("$" + (String.valueOf(orderItem.get_orderItem().getPrice())));
            if(orderItem.get_extraItems().size() == 0) //No extra items added so hide corresponding text box
            {
                holder.m_extraItemTxt.setVisibility(View.GONE);
                holder.m_extraItemPriceTxt.setVisibility(View.GONE);
            }
            else
            {
                StringBuilder sbItemName = new StringBuilder();
                StringBuilder sbItemPrice = new StringBuilder();
                for (SubMenu extraItem : orderItem.get_extraItems()) 
                {
                    sbItemName.append(extraItem.getName());
                    sbItemName.append("\n");
                    sbItemPrice.append("$" + (String.valueOf(extraItem.getPrice())));
                    sbItemPrice.append("\n");
                }
                holder.m_extraItemTxt.setText(sbItemName);
                holder.m_extraItemPriceTxt.setText(sbItemPrice);
            }

            if(orderItem.get_options().size() == 0)
                holder.m_optionTxt.setVisibility(View.GONE);
            else
            {
                StringBuilder sbOption = new StringBuilder();
                for (ItemOption option : orderItem.get_options()) 
                {
                    sbOption.append(option.getName());
                    sbOption.append("\n");
                }
                holder.m_optionTxt.setText(sbOption);
            }

            if(orderItem.getspecialRequest() != null && 
                    orderItem.getspecialRequest().length() > 0)
                holder.m_splRequestTxt.setText(orderItem.getspecialRequest());
            else
                holder.m_splRequestTxt.setVisibility(View.GONE);

        }
        return row;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T02:00:15.077

在所有 if()..else() 语句中，添加 setVisibility(View.VISIBLE) 语句。例如，

```
if(orderItem.getspecialRequest() != null && 
                orderItem.getspecialRequest().length() > 0){
            holder.m_splRequestTxt.setVisibility(View.VISIBLE);
            holder.m_splRequestTxt.setText(orderItem.getspecialRequest());
        }else{
            holder.m_splRequestTxt.setVisibility(View.GONE);
        } 
```

对于我们所有其他案例也是如此。

**更新**

请尝试此代码并检查它是否有效

```
@Override
public View getView(int position, View convertView, ViewGroup parent)
{
    View row = convertView;
    if(row == null)
    {
        LayoutInflater vi = (LayoutInflater)m_context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        try{
            row = vi.inflate(R.layout.ordersummaryrow, null);
        }
        catch(Exception e)
        {
            Log.i("SUBMENU", e.getMessage());
        }
    }
    OrderSummaryRowViewHolder holder = (OrderSummaryRowViewHolder)row.getTag();
    if(holder == null)
    {
        holder =  new OrderSummaryRowViewHolder(row);
        row.setTag(holder);
    }
    OrderedItem orderItem = m_orderedItem.get(position);
    if (orderItem != null) 
    {
        if(m_updateListener != null)
            holder.m_updateBtn.setOnClickListener(m_updateListener);
        else
            Log.i("OrderSummaryRowAdapter", "Update Listener is not registered");

        if(m_deleteListener != null)
            holder.m_deleteBtn.setOnClickListener(m_deleteListener);
        else
            Log.i("OrderSummaryRowAdapter", "Delete Listener is not registered");

        if(orderItem.getspecialRequest() != null && 
                orderItem.getspecialRequest().length() > 0)
            holder.m_splRequestTxt.setText(orderItem.getspecialRequest());
        else
            holder.m_splRequestTxt.setVisibility(View.GONE);

        if(orderItem.get_options().size() == 0)
            holder.m_optionTxt.setVisibility(View.GONE);
        else
        {
            StringBuilder sbOption = new StringBuilder();
            for (ItemOption option : orderItem.get_options()) 
            {
                sbOption.append(option.getName());
                sbOption.append("\n");
            }
            holder.m_optionTxt.setText(sbOption);
        }

        if(orderItem.get_extraItems().size() == 0) //No extra items added so hide corresponding text box
        {
            holder.m_extraItemTxt.setVisibility(View.GONE);
            holder.m_extraItemPriceTxt.setVisibility(View.GONE);
        }
        else
        {
            StringBuilder sbItemName = new StringBuilder();
            StringBuilder sbItemPrice = new StringBuilder();
            for (SubMenu extraItem : orderItem.get_extraItems()) 
            {
                sbItemName.append(extraItem.getName());
                sbItemName.append("\n");
                sbItemPrice.append("$" + (String.valueOf(extraItem.getPrice())));
                sbItemPrice.append("\n");
            }
            holder.m_extraItemTxt.setText(sbItemName);
            holder.m_extraItemPriceTxt.setText(sbItemPrice);
        }

        holder.m_titleTxt.setText(orderItem.get_orderItem().getName());
        holder.m_priceTxt.setText("$" + (String.valueOf(orderItem.get_orderItem().getPrice())));

    }
    return row;
} 
```

# java - 如何声明一个 Class对象，即 Java 中的枚举和接口

> ID：10037008
> 
> 赞同：3
> 
> 时间：2012-04-05T22:41:10.217
> 
> 标签：java, generics, interface, enums

我有一个实用程序类，它需要在通用类上工作，但必须限于那些是枚举并实现特定接口的工具类。

```
// These two work
Class<? extends Enum<?>> enumClass;
Class<? extends MyInterface> interfaceClass;

// This is what I want but does not work
Class<? extends MyInterface & Enum<?>> enumAndInterfaceClass; 
```

对于泛型，我可以成功使用它

```
public class MyClass<T extends Enum<T> & MyInterface> {
    public MyClass(Class<T> theClass) {
        ...
    }
} 
```

但是我不能在任何地方使用泛型，需要单独声明。我不确定这是否可能。
所以我的问题归结为如何声明具有这些约束的成员变量？

所以目前 MyClass 是一个单例，然后可以根据需要更新枚举/接口。其操作的返回值将根据给定的枚举而改变。我希望没有泛型，因为这需要为枚举的每次更改创建一个新实例。已经有很多代码在使用它，因此偏离单例将不会被批准。所以必须保留参考。我想我只能强制执行接口要求，然后在 setter 方法中检查它是一个枚举，否则会抛出异常，但这并不理想。

**编辑**（更新问题并添加更多细节）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T22:51:15.310

这应该有效：

```
public interface MyInterface {

    void foo();
}

public final class Utils {

    public static <E extends Enum<E> & MyInterface> void doWork(Class<E> clazz) {
        for(E enumConstant : clazz.getEnumConstants) {
            enumConstant.foo();
        }
    }
} 
```

**编辑**我没有注意到您关于将捕获的类型用作局部变量的说法。您当然可以在参数化方法的整个主体中使用它，请参阅上面的修订片段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T22:53:22.787

据我记得，您只能为类和方法的类型参数声明**交集类型**（这是`&`创建的）。您不能直接声明具有交集类型的局部变量；您可以在类或方法类型参数的帮助下创建此类变量，如 milkplusvellocet 的答案所示。

请参阅此答案中类似问题的 JLS 参考： [https ://stackoverflow.com/a/6643378/282229](https://stackoverflow.com/a/6643378/282229)

# android - 运行活动未从小部件带到前面

> ID：10037016
> 
> 赞同：1
> 
> 时间：2012-04-05T22:42:15.410
> 
> 标签：android, android-intent, android-widget, android-activity

我有一个主屏幕小部件，它有一个图标，如果它已经准备好运行，它会启动/因此将应用程序活动带到堆栈的前面。

如果它已经在运行并且我不想要它，它会破坏活动 - 只需在它点击小部件时从主屏幕将其重新显示。

我已经尝试了所有可能的标志，但没有占上风：FLAG_ACTIVITY_REORDER_TO_FRONT、FLAG_ACTIVITY_BROUGHT_TO_FRONT、FLAG_ACTIVITY_NEW_TASK 等等....

该应用程序的最低 API 为 13，开发设备使用 API 16（真的！）。有什么想法还是我有什么问题？谢谢！

```
public class AndaeroWidget extends AppWidgetProvider
{
 . . .//Some stuff . . .

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager,int[] appWidgetIds)
    {
    super.onUpdate(context, appWidgetManager, appWidgetIds);

    RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.home_widget);
    // When we click the widget, we want to open our main activity.
    Intent launchActivity = new Intent(context, MainActivity.class);
    launchActivity.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, launchActivity, 0);
    remoteViews.setOnClickPendingIntent(R.id.widget, pendingIntent);;

    ComponentName thisWidget = new ComponentName(context, AndaeroWidget.class);
    AppWidgetManager manager = AppWidgetManager.getInstance(context);
    manager.updateAppWidget(thisWidget, remoteViews);
    }
. . .
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T21:58:21.447

在清单中将 MainActivity launchMode 设置为 singleInstance。

android:launchMode="singleInstance"

# scala - 排除的 Squeryl 语法是什么（即 != ）？

> ID：10037018
> 
> 赞同：2
> 
> 时间：2012-04-05T22:42:29.660
> 
> 标签：scala, squeryl

做一个简单的 Squeryl 数据库查找，但试图排除一个值。我试过了：

`j.id not jobExclude`和`j.id != jobExclude`

但是第一个触发编译器错误，第二个触发运行时错误。

整个交易：

```
from(DB.jobs)(j =>
      where((j.startTime >= todayStart)
      and (j.startTime <= todayEnd)
      and (j.userId === userId)
      and (j.teamId === teamId)
      and (j.startOrder >= index)
      and (j.id not jobExclude))
      select (j)).toList 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T23:15:11.923

由 Squeryl 集团提供：

不等于是`<>`

所以在更大的范围内：

`(job.id <> jobExclude)`

见[http://squeryl.org/functions.html](http://squeryl.org/functions.html)

信用[https://groups.google.com/forum/?fromgroups#!topic/squeryl/Hw7iVyvLLNM](https://groups.google.com/forum/?fromgroups#!topic/squeryl/Hw7iVyvLLNM)

# css - 高度：100% 不工作，尽管应用于 html、body 和所有 wrap 元素

> ID：10037022
> 
> 赞同：1
> 
> 时间：2012-04-05T22:42:47.787
> 
> 标签：css, height

我一直在努力解决这个高度：100% 的问题。你会认为这会很简单。只需确保所有包装元素和 html、body 都具有 height:100% 但无论我做什么，容器都不会延伸到页面底部。这里也不使用任何花车。我必须遗漏一些明显的东西，但到目前为止我一直无法解决它。

示例：http: [//jsfiddle.net/uxable/KfjGU/14/](http://jsfiddle.net/uxable/KfjGU/14/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T22:50:07.347

您可以从正文中删除“height:100%”，它会按照您的预期工作。不需要这种限制。

# javascript - 使用 AJAX 创建元素时，如何不显眼地将函数绑定到元素的单击

> ID：10037026
> 
> 赞同：0
> 
> 时间：2012-04-05T22:43:08.267
> 
> 标签：javascript, jquery, ajax, coffeescript

我的应用程序中有一个嵌套表单，它使用 AJAX 加载额外的字段集。其中一个字段是文件上传，我想隐藏它并有效地替换为用于粘贴 Youtube 链接的文本字段。它适用于第一组字段，但是由于该函数绑定在 document.ready 上，因此它不适用于新的 AJAX 字段。我需要以其他方式绑定它。做什么？

```
$ ->
  $(".foo").click ->
    $(this).css "display", "none" 
```

更新：我运气不好，所以我去阅读[jQuery .on() 文档](http://api.jquery.com/on/)，它让我想起了 Fresheyeball 所说的将它绑定到父 div 上。在那之后，它完美地工作了。感谢您的宝贵意见！

```
$ ->
  $("#create").on "click", ".foo", ->
    $(this).css display : "none" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T22:50:39.797

新的 jQuery .on 应该适合你：

```
$(document).ready ->
   $(window).on 'click', '.multiswitchr', ->
      that = $(this)
      that.css display : 'none'
      that.closest(".fields").find(".f-upload").first().css          display : "none"
      that.closest(".fields").find(".attachment-holder").first().css display : "none"
      that.closest(".fields").find(".youtube-link").first().css      display : "inline" 
```

这项工作的方式是将侦听器绑定到`window`（或者您可以使用直接父级）以侦听事件的存在`.multiswitchr`并将`'click'`事件绑定到它。

PS在coffeescript中文档准备好的简写就是`$ ->`

# c# - 我的 WCF 服务 SL4 应用程序出现通信异常

> ID：10037028
> 
> 赞同：0
> 
> 时间：2012-04-05T22:43:09.750
> 
> 标签：c#, wcf, silverlight

对不起，如果标题有点模糊，但事实是我不明白我的问题，我以前从未遇到过这个，我没有做过任何不寻常的事情。

是的，我有一个使用业务应用程序模板的基本 Silverlight 4 应用程序。我还创建了一个 WCF 服务应用程序项目，用于简单地为我的数据库中的某些条目返回一个 Observable 集合，

我将此发布到我的本地计算机，然后我在我的 SL4 应用程序中引用了它，我得到了这个异常

```
[System.ServiceModel.CommunicationException: The remote server returned an error:     NotFound. ---> System.Net.WebException: The remote server returned an error: NotFound. --->     System.Net.WebException: The remote server returned an error: NotFound.
at System.Net.Browser.BrowserHttpWebRequest.InternalEndGetResponse(IAsyncResult  asyncResult)
at System.Net.Browser.BrowserHttpWebRequest.<>c__DisplayClass5\.  <EndGetResponse>b__4(Object sendState)
at System.Net.Browser.AsyncHelper.<>c__DisplayClass4.<BeginOnUI>b__0(Object sendState)
--- End of inner exception stack trace ---
at System.Net.Browser.AsyncHelper.BeginOnUI(SendOrPostCallback beginMethod, Object  state)
at System.Net.Browser.BrowserHttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
at  System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelAsyncRequest.  CompleteGetResponse(IAsyncResult result)
--- End of inner exception stack trace ---
at System.ServiceModel.AsyncResult.End[TAsyncResult](IAsyncResult result)
at System.ServiceModel.Channels.ServiceChannel.EndCall(String action, Object[] outs,  IAsyncResult result)
at System.ServiceModel.ClientBase`1.ChannelBase`1.EndInvoke(String methodName, Object[]  args, IAsyncResult result)
at  RMServiceRIA.rService.Service1Client.Service1ClientChannel.EndgetBuildings(IAsyncResult  result)
at  RMServiceRIA.rService.Service1Client.RMServiceRIA.rService.IService1.EndgetBuildings(IAsync Result result)
at RMServiceRIA.rService.Service1Client.OnEndgetBuildings(IAsyncResult result)
at System.ServiceModel.ClientBase`1.OnAsyncCallCompleted(IAsyncResult result)} 
```

我有一个客户端访问策略和跨域策略，出于测试目的设置为允许任何访问，

[客户访问政策](http://pastebin.com/mFFgKqEd)

[跨域](http://pastebin.com/5UH9A6Jj)

关于如何解决这个问题的任何想法，我调试了我的 WCF 服务并接收到调用，执行的方法到达它的返回语句，但我的 SL4 甚至从未收到结果，只要我的 WCF 服务有结果，我就会得到一个异常扔在我的 SL4 应用程序中，对我来说，似乎连接已关闭，但我不知道，我试图研究，但你从哪里开始你不完全理解的东西？我发现很多人都有相同类型的错误消息，但是 WCF 太神秘了……我确实尝试在我的 webconfig 中启用调试信息。我也尝试在我的 Web 服务器上托管 WCF 服务，但没有运气，我有几个 WCF 服务运行在类似的设置上，所以我不确定为什么这不起作用

[WCF 服务的 Web 配置](http://pastebin.com/sBdKnjCY)

[客户端配置](http://pastebin.com/j1wipnCT)

感谢您查看，如果您需要更多信息，请询问我很乐意为您提供，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T22:53:33.090

最好的办法是打开 WCF 跟踪，这样您就可以看到发生了什么。

[http://software.intel.com/en-us/blogs/2010/02/03/adventures-with-silverlight-and-wcf-the-remote-server-returned-an-error-notfound/](http://software.intel.com/en-us/blogs/2010/02/03/adventures-with-silverlight-and-wcf-the-remote-server-returned-an-error-notfound/)

序列化某些东西很可能存在问题。Not found 只是 Silverlight 版本的 500 错误。

# ruby - 使用class << self，何时使用类或模块？

> ID：10037031
> 
> 赞同：7
> 
> 时间：2012-04-05T22:43:27.803
> 
> 标签：ruby, class, module, self

用法上有区别吗

```
class Helper
  class << self
    # ...
  end
end 
```

和

```
module Helper
  class << self
    # ...
  end
end 
```

您什么时候会使用其中一种？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T23:13:17.590

这`class<<self`似乎是一条红鲱鱼，因为这里唯一的区别是类与模块。也许您在问*“我想创建一个我不打算实例化的对象，但它仅作为某些方法的命名空间存在（并且可能作为具有自己的全局状态的单例）存在。”*

如果是这种情况，两者都将发挥同样的作用。如果您有可能想要创建一个派生类（另一个继承相同方法的对象），那么您应该使用一个类，因为它更容易编写：

```
class Variation < Helper 
```

代替

```
module Helper
  module OwnMethods
    # Put methods here instead of class << self
  end
  extend OwnMethods
end

module Variation
  extend Helper::OwnMethods 
```

但是，对于命名空间，我通常会在类上使用模块，因为类意味着将发生实例化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T23:14:49.443

模块和类之间的区别在于您可以创建类的实例，但不能创建模块。如果您需要创建 Helper 的实例 (h = Helper.new)，那么它应该是一个类。如果没有，最好保留一个模块。我不确定您的其余代码与该问题有何关联；您是否在 Module 或 Class 上有类方法与您是否需要创建该对象的实例无关。

# ruby-on-rails - Rails 中的 Delayed_job 引发“nil object”错误

> ID：10037036
> 
> 赞同：0
> 
> 时间：2012-04-05T22:44:21.637
> 
> 标签：ruby-on-rails, ruby, amazon-s3, delayed-job

我正在努力使用 Delayed_job（Rails 2.3.8 应用程序中的集体想法 v2.0）。

我从 application_controller 方法调用作业：

```
...
Delayed::Job.enqueue(S3MoverJob.new(docs)) 
```

其中 docs 是带有文件 ID 和名称的哈希。

在我的 Lib 目录中，我有 S3MoverJob 类：

```
class S3MoverJob < Struct.new(:docs)

  def perform
    #setup connection to Amazon
    ...
    #connect
    ...

    #loop to move files not transfered already
    docs.each do |id,file_name|
     # Move file
      begin
        doc = Document.find(id)
        ... perform actions
      rescue Exception => exc
         raise "failed!"
      end
    end
  end

end 
```

问题是它正在引发：**S3MoverJob failed with NoMethodError: You have an nil object when you didn't expect it！**

我查看了数据库中的处理程序，它正在将带有 id 和文件名列表的 Yaml 文件传递​​给 perform 方法，如下所示：

```
docs:
   3456: name_of_file_01.png
   4567: name_of_file_02.txt 
```

我错过了什么？谢谢你帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T12:59:40.200

我的错。我不知道这是一个独立的过程并且需要一些要求：

```
require 'yaml'
require 'uri'
class Document < ActiveRecord::Base
end 
```

之后，一切正常。

不管怎么说，还是要谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T04:43:06.817

我认为您应该为调试提供更多信息。如：在perform方法下添加'Rails.logger.info "some stuff"'之类的语句来查看异常是在哪里抛出的

# css - 尝试将 CSS 类与 Nth-child 选择器一起使用

> ID：10037038
> 
> 赞同：0
> 
> 时间：2012-04-05T22:44:28.873
> 
> 标签：css, css-selectors

嗨，我已经查看了各种资源，包括 Stackoverflow 关于如何一起使用第 N 个子选择器和 Class 的资源，但到目前为止我仍然失败。

基本上我的菜单有主要类别（class =cat）和子类别（class=subcat）

我希望每个主要类别都有不同的颜色。子类别都保持不变。每只主猫之间可能有多个子猫。所以，例如：

**牛排** 烤**鸡胸** 鸡腿 翅膀**鱼** 三文鱼
_ _

 ****只要我不把类放进去，我就可以让它工作——类进入第 n 个子选择器的那一刻就会失败。

CSS：

```
 #nav ul li.cat a {
display:block;
background-color: #265054;
font-size: 1em;
padding-left: 25px;
height: 18px;
padding-top: 2px;
margin: 1px 0px;
color: #FFFF00;

}

#nav ul li.cat a:nth-child(2)  {
background-color: #728c8c;
} 
```

代码：

```
<?php 
    if (count($navlist)){ 
        echo "<ul>"; 
        foreach ($navlist as $key => $list){ 
            foreach ($list as $topkey => $toplist){ 
                echo "<li class='cat'>"; 
                echo anchor("welcome/cat/$topkey",$toplist['name']); 
                echo "</li>\n"; 

                if (count($toplist['children'])){ 
                    foreach ($toplist['children'] as $subkey => $subname){ 
                        echo "\n<li id='subcat'>"; 
                        echo anchor("welcome/cat/$subkey",$subname); 
                        echo "</li>"; 
                    } 
                } 
            } 
        } 

        echo "</ul>\n"; 
    } 
?> 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T23:11:50.420

您的选择器是错误的，在这里已更正，并且由于您只想设置主要类别的样式，因此我添加了一个 `>`子选择器。

```
#nav ul li.cat:nth-child(2) > a  {
  background-color: #728c8c;
} 
```

**演示：[jsfiddle.net/kjxtg](http://jsfiddle.net/Marcel/kjxtg/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T23:28:21.097

因此，根据我自己的观察，如果元素是直接子元素，“nth-child”将起作用。请参考这里 [http://jsfiddle.net/fuPJs/](http://jsfiddle.net/fuPJs/)

如果您在代码中注意到，这些行：

```
<li class="cat">
        <a href="">Beef</a>
        <a href="">Steak</a>
        <a href="">Raost</a></li>
    </li> 
```

它们是 class="cat" 的直接子代，因此您的 css 选择器适用于“nth-child”。其余的不是直接孩子，这就是为什么它不起作用。

希望有帮助。

最好的，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T23:03:58.740

如果你的目标只是让每个类别的孩子有不同的颜色，试试这个小提琴：http: [//jsfiddle.net/2yqaz/](http://jsfiddle.net/2yqaz/)。如果您查看 HTML 标记，您会看到标记它的“常见”方式：

```
<nav>
    <ul>
        <li class="cat">
            <a href="">Beef</a>
            <ul>
                <li><a href="">Steak</a></li>
                <li><a href="">Raost</a></li>
            </ul>
        </li>
        <li class="cat">
            <a href="">Chicken</a>
            <ul>
                <li><a href="">Breast</a></li>
                <li><a href="">Drumstick</a></li>
                <li><a href="">Wing</a></li>
            </ul>
        </li>
        <li class="cat">
            <a href="">Fish</a>
            <ul>
                <li><a href="">Salmon</a></li>
            </ul>
        </li>
    </ul>
</nav> 
```

HTH。****

# c# - 将变量从用户表单传递到类

> ID：10037046
> 
> 赞同：1
> 
> 时间：2012-04-05T22:45:48.003
> 
> 标签：c#, .net, winforms

我经常遇到这个问题，我并不真正了解如何将用户表单变量传递到类中。例如我有一个按钮：

```
private void button1_Click(object sender, EventArgs e)
{
    DoStuff();
} 
```

和表单类中的一个方法：

```
DoStuff()
{

    Class123 myclass = new Class123();

}

...
...

class Class123
{

    //how do i pass for example in myotherClass whether or not my checkbox on the userform is checked? i dont want to have to pass from method to method to class to class. what is the logical/smart way of handling this?
    ClassData myotherClass = new ClassData();
} 
```

例如，我如何在 myotherClass 中传递我的用户表单上的复选框是否被选中？我不想必须从方法传递到方法到类到类。处理此问题的逻辑/智能方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T23:12:11.987

我认为您正在寻找*函数参数*：

```
// notice the declared function argument isMyCheckboxChecked
DoStuff(bool isMyCheckboxChecked)
{
    Class123 myclass = new Class123(isMyCheckboxChecked);

}

private void button1_Click(object sender, EventArgs e)
{
    // passing the state of the checkbox to DoStuff as an argument
    DoStuff(chkMyCheckbox.Checked);
}

class Class123
{
     readonly ClassData myotherClass = new ClassData();

     Class123(bool isMyCheckboxChecked) 
     { 
          myOtherClass.isMyCheckboxChecked = isMyCheckboxChecked;
     }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T23:15:49.820

我可以在这里看到一些东西。发布的代码相当模糊，因此很难说正确的答案可能是什么。

1.  如果 myOtherClass 需要知道*复选框更改时是否选中了复选框，*那么您可能应该考虑使用订阅者模式。

2.  但是，如果您的意思是您只需要知道在 DoStuff() 运行时是否选中了复选框，那么传递变量并没有错。事实上，传递一个变量是首选的方式——这就是变量存在的目的。也就是说，您需要智能地传递变量；如果你发现你只是不断地在类之间传递参数，那就是代码设计不佳的标志。如果您需要将一些参数传递给 myClass 以告诉它要做什么，请将它们构建到它们自己的（描述性命名的）类中，并将该类传递给 myClass 的构造函数，而不是传递一长串参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T22:55:43.813

我不同意这种做法。
任何“智能”方法，即使存在，也将打破面向对象编程的黄金法则。对象是只能以受控方式访问或更改的自包含数据项。这可以防止副作用，这是程序代码中的一个常见问题，其中数据是全局可访问的。在 OOP 中，对象只能通过调用它们的方法来接收或发送消息给其他对象。

编辑：展示一种方法

```
public static class MyApp
{
    public static bool MyCheckBox {get; set;}
} 
```

在你的 doStuff 中

```
MyApp.MyCheckBox = this.checkBox1.Checked; 
```

在您的 myOtherClass 的方法中

```
 if(MyApp.MyCheckBox == true)
   ... 
```

这与在过去的过程语言中使用全局变量相同。这为难以跟踪的错误铺平了道路，并创建了使应用程序难以维护的状态模式

# java - 获取有序的值对

> ID：10037048
> 
> 赞同：3
> 
> 时间：2012-04-05T22:46:01.023
> 
> 标签：java, collections

我正在寻找实现一个数据结构来添加/呈现一对有序的值。例如。

```
orderedPair.add(value1, text1)  
orderedPair.add(value1, text2)  
orderedPair.add(value2, text3, data1)  
orderedPair.add(value2, data2)  
orderedPair.add(value1, text5) 
```

当我得到时，我希望它迭代地返回

```
value1, text1  
value1, text2  
value2, text3, data1 and so on. 
```

LinkedHashMaps 或 HashMaps 的任何变体都不起作用，因为它们只返回基于键的值，而我想要得到的是值、值对。请注意，值/文本或数据都不是唯一的，我可能无法根据任何键获取它。另外，我不想要一个排序列表，我只需要一个有序列表。

问题是：Java 中是否有任何数据结构可用于完成此任务？

我没有遇到任何用于此目的的东西。在这种情况下，我正在考虑编写一个可以实现此目的的自定义集合。欢迎任何建议/帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T23:08:14.227

将评论中的讨论包装成答案，因为它似乎对 OP 有用：

创建一个`class Tuple`，这将是你的对/三元组。
请注意，此类可以使用固定数量的参数来实现，也可以作为包含对象列表的容器来实现。

将这些`Tuple`对象放在一个`List<Tuple>`中，你就完成了。

您还可以实现`hashCode()`并`equals()`使其实现`Comparable`到此类 - 您将能够将它与其他集合一起使用，例如`TreeSet`和`HashSet`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T23:12:21.440

只需使用列表映射，例如 Treemap

```
Map<Integer, List<Integer>> content = new Treemap<Integer, List<Integer>>();

if (not content.containsKey(value1)) {
   content.put(value1, new LinkedList<Integer>());
}
content.get(value1).add(text1) 
```

这将是函数 orderedPair.add

然后对于输出，遍历Map，对于每一个entry，写出对应List的每一项

由于您希望对其进行排序，请将 Comparator 传递给 Treemap 构造函数。

# c# - 在 ASP.net MVC 3 C# 中保存 HTML 表单中的图像

> ID：10037050
> 
> 赞同：0
> 
> 时间：2012-04-05T22:46:15.780
> 
> 标签：c#, html, asp.net-mvc, asp.net-mvc-3, forms

我希望有人可以在下面修改我的代码，以准确地告诉我如何让它做我想做的事。

我有一个发布到以下操作的 HTML 表单：

```
public ActionResult Create(string EntryTitle, string EntryVideo, HttpPostedFileBase ImageFile, string EntryDesc)
    {
        if (Session["User"] != null)
        {
            User currentUser = (User)Session["User"];

            string savedFileName = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, Path.GetFileName(ImageFile.FileName)); 
            ImageFile.SaveAs(savedFileName);

            Entry newEntry = new Entry();

            newEntry.Title = EntryTitle;
            newEntry.EmbedURL = EntryVideo;
            newEntry.Description = EntryDesc;
            newEntry.ImagePath = savedFileName;
            newEntry.UserId = currentUser.UserId;

            db.Entries.Add(newEntry);
            db.SaveChanges();

        }

        return RedirectToAction("MyPage", "User");
    } 
```

这会将图像保存到根解决方案目录（或尝试这样做，没有权限并引发异常）。

我想做的是以下几点：

1.) 验证文件大小是否低于某个最大值，现在假设为 500kb

2.）假设文件大小没问题，将其保存到以下目录

```
mywebsite.com/uploads/<userid>/<entryid>/entry-image.<jpg/png/gif> 
```

我不确定如何重命名文件，因为我想接受不同的文件扩展名（.jpeg、.jpg、.png、.gif）。或者不确定如何将其放入上述正确目录。或者如何验证文件大小，因为如果用户使用的是 IE，显然你只能使用 javascript 来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T23:17:30.533

1.验证文件大小是否低于某个最大值，现在假设为 500kb

您可以使用[HttpPostFileBase.ContentLength](http://msdn.microsoft.com/en-us/library/system.io.path.getextension.aspx)属性来获取文件的大小（以字节为单位）。

```
if (ImageFile.ContentLength > 1024 * 500) // 1024 bytes * 500 == 500kb
{
    // The file is too big.
} 
```

2.假设文件大小没问题，保存到以下目录

```
string savedFileName = Server.MapPath(string.Format("~/uploads/{0}/{1}/entry-image{2}",
    currentUser.UserId,
    newEntry.EntryId,
    Path.GetExtension(ImageFile.FileName))); 
```

我看到的唯一问题是您的 Entry.EntryId 看起来可能是在数据库中生成的，因此在生成之前您将无法将其用作保存路径的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T23:44:51.377

希望这有助于或至少为您指明正确的方向

```
 if (ImageFile.ContentLength < 1024 * 500)
            {
                Entry newEntry = new Entry();

                newEntry.Title = EntryTitle;
                newEntry.EmbedURL = EntryVideo;
                newEntry.Description = EntryDesc;
                newEntry.UserId = currentUser.UserId;

                db.Entries.Add(newEntry);
                db.SaveChanges();  //this helps generate an entry id

                string uploadsDir = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "uploads");
                string userDir = Path.Combine(uploadsDir, <userid>);
                string entryDir = Path.Combine(userDir, newEntry.EntryID );

                if (Directory.Exists(userDir) == false)
                    Directory.CreateDirectory(userDir);

                if (Directory.Exists(entryDir) == false)
                    Directory.CreateDirectory(entryDir);

               string savedFileName = Path.Combine(entryDir, <entry-image>);
               ImageFile.SaveAs(savedFileName);

               newEntry.ImagePath = savedFileName;  //if this doesn't work pull back out this entry and adjust the ImagePath
               db.SaveChanges();

            } 
```

您应该授予“上传”目录的写入权限。

您还可以从 web.config 限制您的 Web 应用程序的文件大小

```
 <system.web>
       <httpRuntime   maxRequestLength="500"/> 
```

# php - 良好分离的 PHP 应用程序的标准

> ID：10037051
> 
> 赞同：1
> 
> 时间：2012-04-05T22:46:18.250
> 
> 标签：php, standards

我最近开始研究一个预先存在的 PHP 应用程序，当谈到我应该如何提高这个应用程序的可伸缩性时，我遇到了一些麻烦。我来自 C#.NET 背景，所以关注点分离的想法对我来说并不新鲜。

首先，我想告诉你我到底在寻找什么。目前，这个应用程序的规模相当不错，由大约 70 个数据库表和约 200 个页面组成。在大多数情况下，这些页面只是简单地对数据库执行 CRUD 操作，很少有真正的程序密集型操作。目前几乎所有的页面都在使用类似这样的代码：

```
$x = db->query("SELECT ID, name FROM table ORDER BY name");
if ($x->num_rows > 0) {
    while ($y = $x->fetch_object()) {
        foreach ($y as $key => $value)
            $$key = $value; 
```

显然，这对于与我应该处理的应用程序一样大的应用程序来说并不是很好。现在，我来自 C#.NET 背景，习惯于构建小型应用程序，并且通常为我的应用程序中的每个对象构建一个小型业务对象（与我的数据库表几乎一对一匹配）。它们遵循以下形式：

```
namespace Application
{
public class Person
{

            private int _id = -1;
    private string _name = "";

    private bool _new = false;

    public int ID
    {
        get{ return _id; }
    }

    public string Name
    {
        get { return _name; }
        set { _name = value; }
    }

    public Person(int id)
    {
        DataSet ds = SqlConn.doQuery("SELECT * FROM PERSON WHERE ID = " + id + ";");

        if (ds.Tables[0].Rows.Count > 0)
        {
            DataRow row = ds.Tables[0].Rows[0];

            _id = id;

            _name = row["Name"].ToString();
        }
        else
            throw new ArgumentOutOfRangeException("Invalid PERSON ID passed, passed ID was " + id);         
    }

    public Person()
    {
        _new = true;
    }

    public void save()
    {
        if (_new)
        {
            doQuery(" INSERT INTO PERSON " +
                " ([Name]) " +
                " VALUES " +
                " ('" + Name.Replace("'", "''") + "'); ");
        }
        else
        {
            SqlConn.doNonQuery(" UPDATE PERSON " +
                " SET " +
                " [Name] = '" + _name.Replace("'", "''") + "' WHERE " +
                " ID = " + _id);
        }

    } 
```

简而言之，它们只是具有模仿表的属性、属性、提取信息的构造函数以及`save`将提交对对象所做的任何更改的调用方法。

关于我的实际问题：首先，这是一种很好的做事方式吗？它一直对我很有效。其次，更重要的是，这也是在 PHP 中做事的好方法吗？我已经注意到 PHP 的松散类型导致我做事的方式出现问题，而且没有方法重载是全新的。如果这不是一个好的做法，是否有任何好的例子说明我应该如何将该项目调整为 3 层？或者，出于某种原因，我可能不应该尝试这样做。

对于问题的长度，我很抱歉，但我已经在互联网上挖掘了一个星期左右，但无济于事，我似乎发现的只是语法标准，而不是结构标准。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T23:16:05.123

有几种模式可以遵循。我自己喜欢使用[MVC 模式](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)。MVC 是[将用户界面交互拆分为三个不同的角色](https://stackoverflow.com/questions/5274911/folder-structure-for-a-php-project#answer-5276065)。虽然还有其他模式，但为了清楚起见（帖子的结束长度我只会进入 MVC）。[只要您使用SOLID 原则](http://en.wikipedia.org/wiki/SOLID_(object-oriented_design))，您希望遵循哪种模式并不重要。

> 我来自 C#.NET 背景，所以关注点分离的想法对我来说并不新鲜。

那太棒了。在这一点上，尝试学习 PHP 只是一个实现细节。

> 显然，这对于与我应该处理的应用程序一样大的应用程序来说并不是很好。

很高兴我们同意:-)

* * *

在 MVC 模式中，您将拥有：

**模型**：完成“所有工作”
**View**：负责演示的
**控制器**：处理请求

当请求一个页面时，它将由控制器处理。如果控制器需要完成一些工作（例如获取用户），它会要求模型执行此操作。当控制器拥有所有需要的信息时，它将呈现一个视图。该视图**仅**呈现所有信息。

您正在谈论的那个人对象将是 MVC 模式中的模型。

> 我已经注意到 PHP 的松散类型导致我做事的方式出现问题

PHP 松散类型非常好（如果您知道自己在做什么），但同时也很糟糕。请记住，您始终可以使用三个`=`符号进行严格的比较：

```
if (1 == true) // truthy
if (1 === true) // falsy 
```

> 也没有方法重载是全新的

PHP 确实不*支持*方法重载，但它可以被模仿。考虑以下：

```
function doSomething($var1, $var2 = null)
{
    var_dump($var1, $var2);
}

doSomething('yay!', 'woo!'); // will dump yay! and woo!
doSomething('yay!'); // will dump yay! and null 
```

另一种方法[是](http://php.net/manual/en/function.func-get-args.php)：

```
function doSomething()
{
    $numargs = func_num_args();
    $arg_list = func_get_args();
    for ($i = 0; $i < $numargs; $i++) {
        echo "Argument $i is: " . $arg_list[$i] . "<br />\n";
    }
}

doSomething('now I can add any number of args', array('yay!', 'woo!', false)); 
```

> 或者，出于某种原因，我可能不应该尝试这样做。

当然，您应该尝试一下。当您已经有编程经验时，它应该不会太难。

* * *

如果您还有其他问题，您可以在明天的[PHP 聊天](https://chat.stackoverflow.com/rooms/11/php)中找到我空闲的时间（我现在真的需要睡觉 :-)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T22:56:30.113

> 这是做事的好方法吗？

没有理想的方法；确定的情况有好有坏。

关于打字，PHP 不会松懈；我们称之为动态类型。

关于架构，当我们开发企业级 Web 应用程序时，从大中型到大型，我们倾向于每天谈论性能。

一个好的起点是阅读一些最知名的 PHP 框架，例如：

*   曾德
*   Symfony
*   小花

从那你可以开始思考建筑。

# c# - 在 Parallel.Foreach 中处理类的正确方法

> ID：10037055
> 
> 赞同：1
> 
> 时间：2012-04-05T22:46:39.753
> 
> 标签：c#

我有一个简单的 Parallel.Foreach 循环，在 DataTable 中有大约 1000 行，这些行中的每一个都调用一个新类，但是，内存会不断增加，直到内存不足。我想知道你如何正确地处理一个关于并行的新类。如果您说的是一个新手问题，那是因为并行和线程对我来说是新的。

```
 var options = new ParallelOptions();
        options.MaxDegreeOfParallelism = 5;
        Parallel.ForEach(urlTable.AsEnumerable(),options, drow =>
        {
            WebSiteCrawlerClass WCC = new WebSiteCrawlerClass();
            if (drow.ItemArray[0].ToString().Contains("$"))
            {

                WCC.linkGrabberwDates(drow.ItemArray[0].ToString(), "www");
            }
            else
            {
                WCC.NoDatesCarCrawler(drow.ItemArray[0].ToString(), "www");
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T22:52:38.187

如果 WebSiteCrawlerClass 是一次性的，那么你会这样做

```
 using( var WCC = new WebSiteCrawlerClass() )
    {
        if (drow.ItemArray[0].ToString().Contains("$"))
        {
            WCC.linkGrabberwDates(drow.ItemArray[0].ToString(), "www");
        }
        else
        {
            WCC.NoDatesCarCrawler(drow.ItemArray[0].ToString(), "www");
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T23:07:14.773

使用异步而不是并行可以更好地解决此类问题。发出所有请求，并在它们返回给您时对其进行处理。只是一个想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T23:45:22.367

您要做的是为每个线程创建一个 WebSiteCrawlerClass 对象，而不是为每个循环初始化一个对象。这可以使用[Parallel.ForEach](http://msdn.microsoft.com/en-us/library/dd783538.aspx)的“localInit”重载来完成。就像是：

```
 var options = new ParallelOptions();
    options.MaxDegreeOfParallelism = 5;
    Parallel.ForEach(urlTable.AsEnumerable(),
      options,
      () => new WebSiteCrawlerClass(),
      (drow, dummyLoopState, WCC) =>
      {
        if (drow.ItemArray[0].ToString().Contains("$"))
        {
            WCC.linkGrabberwDates(drow.ItemArray[0].ToString(), "www");
        }
        else
        {
            WCC.NoDatesCarCrawler(drow.ItemArray[0].ToString(), "www");
        }
        return WCC;
      },
      (wcc) => { } ); 
```

这假设您的 WebSiteCrawlerClass 对象是可重用的。如果您需要重置其状态或其他内容，请在最后的 finally 委托期间完成（就像`(wcc) => { wcc.Reset(); }`在最后一样）。

# c++ - 如何在 Anjuta 中找到变量和函数定义？

> ID：10037058
> 
> 赞同：2
> 
> 时间：2012-04-05T22:46:55.070
> 
> 标签：c++, linux, ide, gnome, anjuta

Anjuta 是否能够告诉您变量或函数的首次定义位置？

如果是这样，你怎么做？

编辑：有没有办法像在其他 IDE 中一样将鼠标悬停在符号上并跳转到定​​义？例如，在 netbeans 中，您可以 ctrl+单击一个符号，它会将您带到定义，而在 KDevelop 中，您可以悬停和交互式工具提示帮助您导航到定义。安居塔没有这样的东西吗？没有插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T05:24:37.180

正如评论中提到的，这似乎是唯一的方法（除非有未提及的插件）：

“打开符号左侧面板，然后双击您想要的符号应该让您更接近您的目标。自从使用 Anjuta 已经有一段时间了，但我记得很好地这样做是为了跟踪变量和方法定义。编辑：在菜单，按照 View -> Symbols"

# wcf - SharePoint 2010 的自定义 WCF 服务

> ID：10037059
> 
> 赞同：0
> 
> 时间：2012-04-05T22:46:55.477
> 
> 标签：wcf, sharepoint, sharepoint-2010

我阅读了几篇关于为 SharePoint 2010 创建自定义 WCF 服务的文章，每篇文章都建议在 SharePoint 项目下创建它（与创建单独的 WCF 应用程序项目或 WCF 库相反）。此外，我遇到了[SharePoint WCF 最佳实践](http://social.technet.microsoft.com/wiki/contents/articles/8665.sharepoint-2010-best-practices-where-to-publish-a-wcf-service-en-us.aspx)。

所以我的问题是：是否可以创建一个独立的 WCF 服务并可以选择在 SharePoint 内部部署它（假设我不希望该服务成为我的 wsp 的一部分）？最佳实践是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T17:52:57.030

如果要在 SharePoint Web 应用程序中部署它，它必须是 wsp 文件的一部分。您可以创建可以连接到 SharePoint 网站集的独立 wcf 服务，还可以使用 SharePoint 客户端对象模型远程连接到 SharePoint 网站集。有很多关于如何做到这一点的演练。

这是客户端对象模型的一个很好的起点[http://msdn.microsoft.com/en-us/library/ee537247.aspx](http://msdn.microsoft.com/en-us/library/ee537247.aspx)

# objective-c - 映射 RestKit 后响应

> ID：10037065
> 
> 赞同：2
> 
> 时间：2012-04-05T22:47:20.210
> 
> 标签：objective-c, ios, mapping, restkit

我正在使用 RestKit 发布到 uri

```
 NSString* path = [NSString stringWithFormat:@"myPathHere"];
    NSDictionary *params = [NSDictionary dictionaryWithKeysAndObjects:@"rating",[rating stringValue], nil];
   [[RKObjectManager sharedManager].client post:path params:params delegate:self]; 
```

服务器将响应我的 managedObject“项目”的更新版本。

我该如何去映射这个项目。我是否使用以下委托方法？

```
- (void)request:(RKRequest *)request didLoadResponse:(RKResponse *)response{} 
```

我知道从这里我可以获得响应 JSON 值，但是如何将其更改为映射对象？

任何帮助深表感谢。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T11:47:30.007

当我需要映射我的服务器对象时，我会发出这样的请求：

```
 [[RKObjectManager sharedManager] 
         loadObjectsAtResourcePath:[qualifiedResourceURL
                                    appendQueryParams:params] 
         delegate:self  
         ]; 
```

然后对象以这种方法返回：

```
 - (void)objectLoader:(RKObjectLoader*)objectLoader didLoadObjects:(NSArray*)objects 
```

然后我使用通知管理器发布更新的对象

```
 [[NSNotificationCenter defaultCenter] postNotificationName:GotFotosInRegion_Fotos_Array_Response object:objects]; 
```

最好的文档位于[https://github.com/RestKit/RestKit/blob/master/Docs/Object%20Mapping.md](https://github.com/RestKit/RestKit/blob/master/Docs/Object%20Mapping.md)

# file - Qt：列出目录中的文件别名

> ID：10037073
> 
> 赞同：0
> 
> 时间：2012-04-05T22:47:58.923
> 
> 标签：file, qt, alias

我正在尝试使用 Qt 列出 Mac Osx 中的所有别名文件。我正在使用以下功能：

```
QString QDir::fromNativeSeparators ( const QString & pathName ) 
```

通过指定目录的相对路径。它仅列出普通文件并跳过别名。

请让我知道是否有更好的方法来使用 Qt 列出普通文件和别名文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:53:13.043

使用 QDirIterator，Qt 文档在这里：

[http://doc.qt.io/qt-4.8/qdiriterator.html](http://doc.qt.io/qt-4.8/qdiriterator.html)

# android - 如何从我们的安卓应用接收短信？

> ID：10037081
> 
> 赞同：-1
> 
> 时间：2012-04-05T22:49:18.970
> 
> 标签：android

我想从我们的应用程序发送和接收短信并且发送成功，但接收在我的代码的 SmsMessage 类中显示弃用，这由我在网络上的网站演示。所以，我想要一种不被弃用的 SMS 接收接收方法。请向我建议正确的解决方案。

接收代码：

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.gsm.SmsMessage;
import android.widget.Toast;

public class SmsReceiver extends BroadcastReceiver
{

    @Override
    public void onReceive(Context context, Intent intent) 
    {
        //---get the SMS message passed in---
        Bundle bundle = intent.getExtras();        
        SmsMessage[] msgs = null;
        String str = "";            
        if (bundle != null)
        {
            //---retrieve the SMS message received---
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];            
            for (int i=0; i<msgs.length; i++){
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
                str += "SMS from " + msgs[i].getOriginatingAddress();                     
                str += " :";
                str += msgs[i].getMessageBody().toString();
                str += "\n";        
            }
            //---display the new SMS message---
            Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
        }                         
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T03:09:25.937

`import android.telephony.gsm.SmsMessage;`

以上应改为：

`import android.telephony.SmsMessage;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-06T14:27:53.587

将 BROADCAST_SMS 权限添加到您的接收器，并使启用和导出为 true：

```
<receiver android:name="com.mohamedtest.sendandreceivesms_m.SMSReceiver"
        android:enabled="true"
        android:exported="true"
        android:permission="android.permission.BROADCAST_SMS">
        <intent-filter>
            <action android:name="android.provider.Telephony.SMS_RECEIVED"/>
        </intent-filter>
    </receiver> 
```

# linux - SO_PEERCRED vs SCM_CREDENTIALS - 为什么两者都有？

> ID：10037086
> 
> 赞同：12
> 
> 时间：2012-04-05T22:50:12.527
> 
> 标签：linux, credentials, unix-socket

SO_PEERCRED 是获取连接的 AF_UNIX 流套接字的 pid/uid/gid 的简单方法，SCM_CREDENTIALS 或多或少相同，但更复杂（各种辅助消息）。[显示两种方式的示例链接](http://man7.org/tlpi/code/online/dist/sockets/scm_cred_recv.c.html)。

1.  为什么有两种方法可以获取或多或少相同的信息？
2.  为什么更舒适的 SO_PEERCRED 没有在 unix(7) 联机帮助页中列出？
3.  哪个在实际应用中使用得更多？

我应该使用什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-26T18:16:24.467

1.  如果我理解正确，两者之间存在细微差别。`SO_PEERCRED`检索对等进程的凭据，而不需要来自对等进程的任何交互。相反，`SCM_CREDENTIALS`是一种发送/接收对等进程凭据的机制，然后由内核检查。当进程以 UID 0 运行时，这种细微的差异可能很重要。`SCM_CREDENTIALS`允许以 UID 0 运行的进程声明自己的特权较低（例如，UID 50），而对于`SO_PEERCRED`.

2.  看上面。我想`SCM_CREDENTIALS`鼓励使用，`SO_PEERCRED`仅支持兼容性。

3.  dbus 守护进程似乎使用`SO_PEERCRED`and `getpeereid()`。我认为最好复制他们的代码以便便携地获取凭据。

[http://cgit.freedesktop.org/dbus/dbus/tree/dbus/dbus-sysdeps-unix.c?id=edaa6fe253782dda959d78396b43e9fd71ea77e3](http://cgit.freedesktop.org/dbus/dbus/tree/dbus/dbus-sysdeps-unix.c?id=edaa6fe253782dda959d78396b43e9fd71ea77e3)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-18T02:59:23.197

`SO_PEERCRED`返回套接字对等方的凭据。`SCM_CREDENTIALS`允许您传递您拥有特权的任何凭据。这特别有价值，因为内核将转换 id，因此一个 pid 命名空间中的任务可以发送一个 pid 到另一个命名空间中的进程，并确保接收到的 pid 将引用它预期的同一进程。

如果您想要对等方的凭据，请使用`SO_PEERCRED`. `SCM_CREDENTIAL`是调用者指定的凭证（它确实必须拥有特权），不一定是对等方的凭证。

# objective-c - nomore UDID - 如何存储每个设备的推送通知设置？

> ID：10037089
> 
> 赞同：2
> 
> 时间：2012-04-05T22:50:32.543
> 
> 标签：objective-c, ios, xcode, udid

Udid 已弃用 - 您现在如何存储每个设备的推送通知设置？

其他人如何存储每台设备的推送设置？

我们可以使用 iphone/ipad MAC 地址吗？还是苹果会禁止该应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T23:06:29.570

像这样：

```
@interface UIDevice (UIDeviceAppIdentifier)
@property (readonly) NSString *deviceApplicationIdentifier;
@end

@implementation UIDevice (UIDeviceAppIdentifier)
- (NSString *) deviceApplicationIdentifier
{ 
  static NSString *name     = @"a string identifying your application, like its name";
  NSUserDefaults  *defaults = [NSUserDefaults standardUserDefaults];  
  NSString        *value    = [defaults objectForKey: name];

  if (!value)
    {
      value = (NSString *) CFUUIDCreateString (NULL, CFUUIDCreate(NULL));    
      [defaults setObject: value forKey: name];
      [defaults synchronize]; // handle error
  }
  return value;
}
@end 
```

iOS 文档或多或少描述了使用 CFUUIDCreate() 创建标识符并建议使用 UserDefaults 来存储它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T00:06:37.263

你可以试试这个项目

[http://www.secureudid.org/](http://www.secureudid.org/)

# android - 自定义列表视图（复选框问题） ...setOnCheckedChangeListener

> ID：10037091
> 
> 赞同：1
> 
> 时间：2012-04-05T22:50:42.357
> 
> 标签：android, listview, checkbox

我有一个自定义列表视图，其中的每一行都由文本视图和复选框组成。（1）当我单击列表中的项目时，它应该转到其他活动和（2）当复选框被选中时，文本视图中的值应该被添加到数组中//当它未被选中时，值应该从数组中删除。第一个要求与我一起成功运行，但第二个要求不起作用。这是我的代码：

```
public class DataAdapter extends ArrayAdapter<ItemInList> {

public ArrayList<ItemInList> list;

public Activity context;
public LayoutInflater inflater;
public static ArrayList<String> array=new ArrayList<String>();
ItemInList element=new ItemInList();

public DataAdapter(Activity context,int x,ArrayList<ItemInList> list) {
    super(context, 0, list);
    this.context = context;
    this.list = list;
    this.inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

static class ViewHolder {
    protected TextView name,Description;
    protected CheckBox checkbox;
}

public int getCount() {
    // TODO Auto-generated method stub
    return list.size();
}

@Override
public ItemInList getItem(int position) {
    // TODO Auto-generated method stub
    return list.get(position);
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {

   final ViewHolder holder;

    if (convertView == null) {

         holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.row1, null);

        holder.name = (TextView) convertView.findViewById(R.id.food_title);
        holder.name.setTextColor(Color.BLACK);

        holder.Description = (TextView) convertView.findViewById(R.id.food_description);
        holder.Description.setTextColor(Color.GRAY);

        holder.checkbox = (CheckBox) convertView.findViewById(R.id.add_food_item);

        holder.checkbox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
                    @Override
                    public void onCheckedChanged(CompoundButton buttonView,
                        boolean isChecked) {
                        element = (ItemInList) holder.checkbox.getTag();
                        element.setSelected(buttonView.isChecked());
                            if(element.isSelected())
                            {
                                array.add(element.getName());
                            }
                            else
                            {
                                array.remove(position);
                            }
                                            }
                });
         convertView.setTag(holder);

    } else {
         holder=(ViewHolder)convertView.getTag();

            ItemInList bean = (ItemInList) list.get(position);

            holder.name.setText( bean.getName());
            holder.Description.setText( bean.getDescription()+"");
            holder.checkbox.setChecked( bean.isSelected());

              return convertView;
    }

    holder.name.setText(list.get(position).getName());
    holder.Description.setText(list.get(position).getDescription()+"");
    holder.checkbox.setChecked(list.get(position).isSelected());

      return convertView;
} 
```

错误：

```
 null pointer exception..
                                at  DataAdapter$1.onCheckedChanged(DataAdapter.java:92)
    E/AndroidRuntime(543):  at android.widget.CompoundButton.setChecked(CompoundButton.java:125)
    E/AndroidRuntime(543):  at sehaty.com.DataAdapter$1.onCheckedChanged(DataAdapter.java:92)
   E/AndroidRuntime(543):   at android.widget.CompoundButton.setChecked(CompoundButton.java:125)
                                at android.widget.CompoundButton.performClick(CompoundButton.java:99) 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T02:05:04.990

正如我在评论中所说：您尝试从您的复选框中获取标签，但您从未设置标签。所以`element`必须为空。这样你就得到了一个 NullPointer。问题是..你为什么要尝试获取标签？无需使用该方法（如果我正确理解您的意图）。您想访问`element`相应职位的变量。该元素在您的列表中，因此您可以尝试以下操作（代码未经测试..只是从您那里复制并进行了一些更改）：

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {

final ViewHolder holder;

   if (convertView == null) {
        holder = new ViewHolder();
        convertView = inflater.inflate(R.layout.row1, null);
        holder.name = (TextView) convertView.findViewById(R.id.food_title);
        holder.name.setTextColor(Color.BLACK);
        holder.checkbox = (CheckBox) convertView
                .findViewById(R.id.add_food_item);
        convertView.setTag(holder);

    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    final ItemInList element = list.get(position);
    holder.name.setText(element.getName());
    holder.checkbox.setChecked(element.isSelected());
    holder.checkbox
            .setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
                @Override
                public void onCheckedChanged(CompoundButton buttonView,
                        boolean isChecked) {
                    element.setSelected(buttonView.isChecked());

                    if (element.isSelected()) {
                        array.add(element.getName());
                    } else {
                        if (position < array.size())
                            array.remove(position);
                    }
                }
            });

    return convertView;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T01:49:33.317

在下一行

```
element = (ItemInList) holder.checkbox.getTag(); 
```

您正在尝试从复选框中获取标签，该标签未在 getView() 中的任何位置设置。结果它返回null。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T22:59:25.493

检查 DataAdapter 类中的第 92 行。看起来适配器（或其他 var？）为空。您是否实例化了所有对象？如果这没有帮助，请发布您的完整代码，包括 XML。

# javascript - JQuery：不需要的动画减速

> ID：10037096
> 
> 赞同：1
> 
> 时间：2012-04-05T22:51:05.610
> 
> 标签：javascript, jquery, menu, jquery-animate

大家好，这是我在 stackoverflow 上的第一个问题，
我创建了一个简单的代码来管理菜单。这是代码。
[http://jsfiddle.net/corvallo/97x89/5/](http://jsfiddle.net/corvallo/97x89/5/)

如果我点击“gestione news”，所有菜单元素都会以不同的延迟向左滑动，并且会出现带有文本“Articoli”的图像（在 jsfiddle 上你看不到）。
所以我点击图像，文本“articoli”将淡出，菜单元素将重新出现在与以前相同的位置。
所以问题是，如果我尝试 4-5 次，第一个动画（即菜单元素的向左滑动）会变慢，如果我再试一次，动画会越来越慢。

我不认为问题出在 delay() 函数中，而是在 $.each() 中，也许我错了。
有人可以帮我弄这个吗。
先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T23:08:04.760

在显然完成工作后，动画似乎还在运行一段时间。使用以下命令查看它们何时在 Firebug 或 Chrome 中停止：

```
$(this).animate({"marginLeft":"0px"},"slow", function(){console.log("anim stopped");}); 
```

我不确定它们为什么仍在运行，但您可以在运行新动画之前停止它们，如下所示：

```
$(this).stop().animate({"marginLeft":"0px"},"slow"); 
```

这似乎可以解决您遇到的减速问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T22:56:09.723

将您的菜单放在一个 div 中。不是对每个元素执行 foreach，而是为主 div 设置动画。

延迟不应该导致您的问题，因为所做的只是等待开始动画计时，但是同时运行这么多动画会启动多个内部计时器，而不仅仅是一个，这可能会导致打嗝。

# pdf - 将多页 PDF 转换为多页 TIFF 的工具

> ID：10037101
> 
> 赞同：7
> 
> 时间：2012-04-05T22:51:15.257
> 
> 标签：pdf, imagemagick, tiff, ghostscript, document-conversion

我正在编写一个小型应用程序来将多个多页 PDF 转换为多页 TIFF 文件。根据该站点上的其他问题和答案，我已经尝试了 ghostscript 和 ImageMagick，但是这两个软件在我运行它们时只会隐藏第一页。是否有任何其他工具可以用来完成此任务，最好是开源工具？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-06T15:02:15.887

Actually Ghostscript can convert a multi-page PDF into a multi-page TIFF. Just be sure to have a rather recent version of Ghostscript installed. Be careful when examining the resulting TIFF as your viewer may not show all the pages of the TIFF or it may not be apparent how to advance to subsequent pages in the TIFF.

Consider the following 3 commands:

```
gs                        \
  -o multipage-tiffg4.tif \
  -sDEVICE=tiffg4         \
   multipage-input.pdf 
```

and

```
gs                          \
  -o multipage-tiff24nc.tif \
  -sDEVICE=tiff24nc         \
   multipage-input.pdf 
```

and

```
gs                          \
  -o multipage-tiff32nc.tif \
  -sDEVICE=tiff32nc         \
   multipage-input.pdf 
```

Each of these commands generates a multi-page TIFF, but with different [output devices](http://ghostscript.com/doc/current/Devices.htm):

1.  The *tiffg4* one is grayscale and uses a resolution of 204dpi by 196dpi (as the TIFF G4 fax standard requires).
2.  The *tiff24nc* one is in RGB color (with 8 bits per color component) and uses a resolution of 72dpi by 72dpi.
3.  The *tiff32nc* one is in CMYK color (with 8 bits per color) also using a resolution of 72dpi.

There are a number of additional output devices for TIFF at the link above.

All the resolution values for the TIFF files result from Ghostscript's default settings. If you want to override these, for example because you require 600dpi by 600dpi, just add

```
-r600x600 
```

to any of the above commandlines.

To prove that you have multipage TIFFs, use the following command:

```
identify multipage-tiff*.tif 
```

(`identify` is a command from the ImageMagick package, which you seem to have installed anyway.) As a result, you should see multiple lines for each of the *.tif files -- with each line representing 1 page of the respective *.tif.

I suspect it may have worked all the way for you -- that you were just unable to recognize the multiple pages in your resulting TIFFs. Not all TIFF viewers are able to display these -- they display the first page only if they can't otherwise, which may have fooled you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T02:06:18.103

如果您有兴趣在 php 中而不是 bash 脚本中进行操作，也可以使用[Imagick php 扩展。](http://www.php.net/manual/en/class.imagick.php)

# php - 正确的 Facebook 画布重定向

> ID：10037104
> 
> 赞同：0
> 
> 时间：2012-04-05T22:51:17.627
> 
> 标签：php, facebook, redirect

我在从 facebook 画布重定向到我想要的网站时遇到问题。

我目前正在使用 php 解决方案来重定向网站

```
header( 'Location: http://www.example.com' ) ; 
```

虽然我觉得这应该可以解决问题，但它只是将网站加载到画布中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T00:19:11.277

你必须使用javascript

```
<script>top.location.href="http://www.expample.com";</script> 
```

# javascript - 谷歌地球插件点击崩溃

> ID：10037110
> 
> 赞同：2
> 
> 时间：2012-04-05T22:52:24.690
> 
> 标签：javascript, debugging, browser, kml, google-earth-plugin

我目前正在尝试在浏览器的调试窗口中设置断点。每当发生点击事件时，断点都会导致 Google 地球插件崩溃。

为了避免崩溃，我是否缺少一种方法？我只想轻松访问在断点上尝试不同的 kml 属性。希望我错过了一个类似于警报框超时的功能，以在单击 GE 时阻止框崩溃。

尝试在 Chrome 和 IE 中进行调试。

这是基本的 Google 地球代码。

```
google.earth.createInstance(this, initCB, failureCB, earthArgs); 
```

`this`是地图 div 并`earthArgs`保存数据库位置

…………

点击事件代码：

```
function initCB(instance) {
  gep = instance;
  gep.getWindow().setVisibility(true);

  google.earth.addEventListener(gep.getGlobe(), 'click', function(event) { 
    //set breakpoint here
  });
} 
```

代码可以正常工作并毫无问题地加载 GE，问题是单击 GE 时断点会冻结。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T20:50:05.207

如果你使用不同的事件呢？说“mousedown”还是“mouseup”？

```
google.earth.addEventListener(gep.GetGlobe(), 'mouseup', function(event){ 
    //do something here  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T00:23:31.310

这可能是因为您为事件处理程序使用了匿名委托。要设置断点，请尝试创建一个命名函数并将其传递给 addEventListener 方法。

```
 // handle click events on the globe
 // e is the KmlMouseEvent object
 var globeClickHandler = function(e) {
   // set breakpoint here
 };

 // in initCB
 google.earth.addEventListener(gep.getGlobe(), 'click', globeClickHandler); 
```

# php - Mysql查询语法失败

> ID：10037112
> 
> 赞同：1
> 
> 时间：2012-04-05T22:52:39.140
> 
> 标签：php, mysql, sql, mysql-error-1064

我一直在尝试在我的 php 文件中执行这个 mysql 查询，但是我认为它可能有问题，因为每当它到达代码时都会出错。

这是查询：

```
"INSERT INTO " . $my_tableName . "(mycolumn, myothercolumn)
values ('myvariable', " . $pass . ");" .
"INSERT INTO " .  $my_othertableName . "(morecolumns) values ('morevalues');" 
```

这是错误：

SQLSTATE[42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ':)' 附近使用正确的语法";i:1;s:978:"#0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T22:55:41.147

也许您需要引用您的 $pass 值：

```
"INSERT INTO " . $my_tableName . "(mycolumn, myothercolumn)
values ('myvariable', '" . $pass . "');" . 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T22:57:24.717

在 PHP 中，您不能执行多个用 ; 分隔的插入语句。您需要将这些作为单独的查询执行。这是为了防止注射。尝试作为 2 个查询运行，它应该适合您。

# c# - 使用 linq 按月总计小时数

> ID：10037114
> 
> 赞同：1
> 
> 时间：2012-04-05T22:52:44.210
> 
> 标签：c#, linq, sum

我正在尝试逐月计算一整年的总小时数。但是，我已经遇到了几个月的问题，该问题在一周中结束并开始。这是我的解决方案，但是，我必须对 linq 进行硬编码才能在这个特定的星期日期工作。在这个例子中

```
 WeekStart is Febuary 26 2012 - SUNDAY
    WeekEnd is March 1 2012 - THURSDAY 
```

现在在我的硬编码示例中，当它是正常的一周时，它被使用（参考 sumval）

```
.ToUpper()).Sum(y => y.TOTALHOURS).Value; 
```

当它是下个月的拆分周时，它将使用（参考 sumval1）

```
.ToUpper()).Sum(y => y.THURSDAY + y.FRIDAY + y.SATURDAY).Value; 
```

当是上个月的拆分周时（请参阅 sumval2）

```
.ToUpper()).Sum(y => y.SUNDAY + y.MONDAY + y.TUESDAY + y.WEDNESDAY).Value; 
```

基于这些，小时数将按两个月之间的周数计入适当的月份。

问题是我不想在一周中的这些日子硬编码，我如何动态填充应该为 sumval1 和 sumval2 添加的日子

```
 double sumval =    data.Where(x => 
    //ExportHelper.isSplitWeek(x.WKENDDATE, x.WKENDDATE.AddDays(6)) != true &&
    x.PORTFOLIO.ToUpper() == item.portfolio.ToUpper() &&
    x.PHASE.ToUpper() == portitem.phase.ToUpper() && 
    x.PHASEDESCRIPTION.ToUpper() == portitem.phasedesc.ToUpper() && 
    x.WKENDDATE.ToString("MMM yyyy").ToUpper() == monitem.monthname.ToString() 
   .ToUpper()).Sum(y => y.TOTALHOURS).Value;

  double sumval1 =
       data.Where(x =>
       ExportHelper.isSplitWeek(x.WKENDDATE, x.WKENDDATE.AddDays(6)) == true &&
       x.PORTFOLIO.ToUpper() == item.portfolio.ToUpper() &&
       x.PHASE.ToUpper() == portitem.phase.ToUpper() &&
       x.PHASEDESCRIPTION.ToUpper() == portitem.phasedesc.ToUpper() &&
       ExportHelper.getSplitEndDate(x.WKENDDATE).AddDays(1).ToString("MMM yyyy").ToUpper() == monitem.monthname.ToString()
      .ToUpper()).Sum(y => y.THURSDAY + y.FRIDAY + y.SATURDAY).Value;

  double sumval2 =
      data.Where(x =>
      ExportHelper.isSplitWeek(x.WKENDDATE, x.WKENDDATE.AddDays(6)) == true &&
      x.PORTFOLIO.ToUpper() == item.portfolio.ToUpper() &&
      x.PHASE.ToUpper() == portitem.phase.ToUpper() &&
      x.PHASEDESCRIPTION.ToUpper() == portitem.phasedesc.ToUpper() &&
      x.WKENDDATE.ToString("MMM yyyy").ToUpper() == monitem.monthname.ToString()
     .ToUpper()).Sum(y => y.SUNDAY + y.MONDAY + y.TUESDAY + y.WEDNESDAY).Value; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T00:07:16.303

我认为您最好将数据放入自定义类中，该类更能代表您希望如何查看数据。我假设数据是每周一次，因为您正在对周末日期进行比较并访问一周中每一天的属性。

鉴于此，我建议将任何类型转换`data`为日常级别的内容，并`datetime`为每一天提供实际的表示。假设您创建了一个这样的类：

```
public class MyClass
{
    DateTime Date {get;set;}
    int Val {get;set;}
    ... //other properties
} 
```

您可以将一条记录`data`转换为一堆`MyClass`这样的实例（假设`WKENDDATE`代表星期六）：

```
List<MyClass> transformed = new List<MyClass>
foreach(var item in data)
{
    var sunday = new MyClass{Date = item.WKENDDATE.AddDays(-6), Val = item.SUNDAY};
    var monday = new MyClass{Date = item.WKENDDATE.AddDays(-5), Val = item.MONDAY};
    ...
    transformed.Add(sunday);
    transformed.Add(monday);
    ...
} 
```

一旦你有了这种形式的数据，按月求和就很简单了：

```
int month = 1; 
int year = 2012; 
var jan2012 = transformed.Where(x => x.Date.Month == month && x.Date.Year == year).Sum(x=>x.Val); 
```

# python - 比较 Python 中的 float 和 int

> ID：10037115
> 
> 赞同：9
> 
> 时间：2012-04-05T22:52:53.930
> 
> 标签：python

我试图查看两点之间的计算距离是否小于给定半径，如下所示：

```
if distance(lat1, long1, lat2, long2) < radius:
      print "Distance: %s Radius: %s" % (distance(lat1, long1, lat2, long2), radius) 
```

这里`distance`将有效地返回 a`float`并且`radius`是 a `int`。

我知道我不应该直接比较浮点数，而应该与阈值比较。鉴于此，是否有更好的方法来检查浮点数是否小于 int（或另一个浮点数）。

**更新** 从所有回复来看，这种比较似乎都还可以。但我确实观察到了这一点：

```
>>> 1.2000000000000001 > 1.2
True
>>> 1.20000000000000001 > 1.2
False 
```

这不是问题吗？我在 Mac 上使用 Python 2.6.7

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-05T22:54:31.573

直接比较就行了，没什么坏处。

Python 可以很好地比较不同类型的数量：

```
>>> type(1.1)
<class 'float'>
>>> type(1)
<class 'int'>
>>> 1.1 > 1
True
>>> 1.1 < 1
False
>>> 1 < 2
True
>>> 2.2 == 2.2
True
>>> 2 == 2.2
False
>>> 1.6 < 2
True
>>> 1.6 > 2
False
>>> 1.6 == 2
False 
```

Python 是鸭子类型的，所以通常你不应该直接担心类型，只要它们可以按照你需要的方式工作。

由于[精度错误，将](http://docs.python.org/tutorial/floatingpoint.html)*浮点数*与其他浮点数进行比较可能会出现一些问题：

```
>>> 0.3+0.3+0.3 == 0.9
False
>>> 0.3+0.3+0.3
0.8999999999999999 
```

但是与`int`s 和/或`<`or`>`操作相比，您不必担心。

在您的更新中，我们可以使用该[`decimal`](http://docs.python.org/library/decimal.html)模块来显示原因：

```
>>> Decimal(1.2000000000000001)
Decimal('1.20000000000000017763568394002504646778106689453125')
>>> Decimal(1.20000000000000001)
Decimal('1.1999999999999999555910790149937383830547332763671875') 
```

但这真的重要吗？这是浮点数的固有问题，但仅在您需要非常高精度的情况下才重要。

# php - Mysql/PHP 代码返回除第一行和最后一行之外的所有行

> ID：10037119
> 
> 赞同：-2
> 
> 时间：2012-04-05T22:53:25.787
> 
> 标签：php, mysql, arrays

我有时间尝试从数据库中提取所有记录。例如我有以下

```
$result = mysql_query("SELECT * FROM `plant_info` ORDER BY id LIMIT 0, 50") or die(mysql_error());
// Variables to pull from the database
// I know the line below is the culprit now, so i must change the code below correct? ///
$returneddata = mysql_fetch_array($result);
///////////////////////////////////////////
$LatinName = $returneddata['Latin_Name'];
$CommonName = $returneddata['Common_Name'];
$Category = $returneddata['Category'];
$Type = $returneddata['Type'];
$Fruit = $returneddata['Fruit'];
$Flower = $returneddata['Flower'];
$MinHeight = $returneddata['Min_Height'];
$MaxHeight = $returneddata['Max_Height'];
$MinWidth = $returneddata['Min_Width'];
$MaxWidth = $returneddata['Max_Width'];
$Exposure = $returneddata['Exposure'];
$Comments = $returneddata['Comments'];
$SoilType = $returneddata['Soil_Type'];
$Zone = $returneddata['Zone'];
$PotSize = $returneddata['Pot_Size'];
$CostPrice = $returneddata['Cost_Price'];
$RetailPrice = $returneddata['Retail_Price'];
$ImageName = $returneddata['Image_Name'];
$ImageNameThumb = $returneddata['Image_Name_Thumb'];
$num_rows = mysql_num_rows($result); echo "$num_rows Rows\n";

while ($row = mysql_fetch_array($result)) {

echo "                           <tr>
                            <td align=\"center\" bgcolor=\"#000000\">
                                <p><img src=\"$row[Image_Name]\" style=\"width:120px;height:auto;\"></p>
                            </td>
                            <td align=\"center\" bgcolor=\"#90c084\">
                                <p>$row[Latin_Name]</p>
                            </td>
                            <td align=\"center\" bgcolor=\"#90c084\">
                                <p>$row[Common_Name]</p>
                            </td>
                            <td align=\"center\" bgcolor=\"#90c084\">
                                <p>$row[Category]</p>
                            </td>
                            <td align=\"center\" bgcolor=\"#90c084\">
                                <p>$row[Type]</p>
                            </td>

                            <td align=\"center\" bgcolor=\"#90c084\">
                                <p>$row[Flower]</p>

                            </td>
                            <td align=\"center\" bgcolor=\"#90c084\">
                               <p>$row[Comments]</p>
                            </td>

                            </td>
                            <td align=\"center\" bgcolor=\"#90c084\">
                               <p><a href=\"editplant.php?get=$row[id]\">Edit</a></p>
                               <p><a href =\"print_sign_div.php?get=$row[id]\">Print</a></p>
                            </td>
                        </tr>

";
} 
```

我遇到的问题是它会提取除第一个之外的所有记录。其他记录显示，目前只有 5 条记录。

我错过了一些我知道的愚蠢的东西。我浏览了问题，但找不到答案。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T23:02:24.653

这可能是因为您`mysql_fetch_array`两次调用该命令。

```
$row = mysql_fetch_array($result);
while ($row = mysql_fetch_array($result)) { 
```

您只需要声明`mysql_fetch_array`一次，即在`while`参数内部。

这应该是您的代码：

```
$result = mysql_query("SELECT * FROM `plant_info` ORDER BY id LIMIT 0, 30");
while ($row = mysql_fetch_array($result)) {

echo "                           <tr>
                            <td align=\"center\" bgcolor=\"#000000\">
                                <p><img src=\"$row[Image_Name]\" style=\"width:120px;height:auto;\"></p>
                            </td>
                            <td align=\"center\" bgcolor=\"#90c084\">
                                <p>$row[Latin_Name]</p>
                            </td>
                            <td align=\"center\" bgcolor=\"#90c084\">
                                <p>$row[Common_Name]</p>
                            </td>
                            <td align=\"center\" bgcolor=\"#90c084\">
                                <p>$row[Category]</p>
                            </td>
                            <td align=\"center\" bgcolor=\"#90c084\">
                                <p>$row[Type]</p>
                            </td>

                            <td align=\"center\" bgcolor=\"#90c084\">
                                <p>$row[Flower]</p>

                            </td>
                            <td align=\"center\" bgcolor=\"#90c084\">
                               <p>$row[Comments]</p>
                            </td>

                            </td>
                            <td align=\"center\" bgcolor=\"#90c084\">
                               <p><a href=\"editplant.php?get=$row[id]\">Edit</a></p>
                               <p><a href =\"print_sign_div.php?get=$row[id]\">Print</a></p>
                            </td>
                        </tr>

";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T22:59:58.567

你没有发布有效/所有的 PHP - 没有`mysql_query()`电话。

```
SELECT * FROM `plant_info` ORDER BY id LIMIT 0, 30
$row = mysql_fetch_array($result);
while ($row = mysql_fetch_array($result)) { 
```

那里的第 2 行取一行，但无论如何都没有做任何事情，丢掉了第一行。试试这个：

```
$result = mysql_query("SELECT * FROM `plant_info` ORDER BY id LIMIT 0, 30");
while ($row = mysql_fetch_array($result)) { 
```

问题更新后，您似乎想从第一行提取信息，然后遍历所有行。这是一种方法：

```
$result = mysql_query("SELECT * FROM `plant_info` ORDER BY id LIMIT 0, 30");
while ($row = mysql_fetch_array($result)) {
  $rows[] = $row;
}

$row = $rows[0];
$LatinName = $returneddata['Latin_Name'];
...

foreach ($rows as $row){
    ...
} 
```

# iphone - 无法显示带有文本字段的 UIAlertView

> ID：10037123
> 
> 赞同：0
> 
> 时间：2012-04-05T22:53:41.393
> 
> 标签：iphone, objective-c, ios, xcode

这段代码应该显示一个带有文本输入的警报窗口：

```
self.alert = [[UIAlertView alloc] initWithTitle:@"Hello" message:@"How are you?" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"OK", nil];
self.alert.alertViewStyle = UIAlertViewStylePlainTextInput;
[self.alert show]; 
```

导致此错误：

```
Thread 7: Program received signal: "EXC_BAD_ACCESS" 
```

这是 self.alert 的定义方式：

```
@interface MyClass : NSObject
{
    UIAlertView *alert;
    id <MyClassDelegate> __unsafe_unretained delegate;
}

@property (nonatomic, retain) UIAlertView *alert;
@property (unsafe_unretained) id <MyClassDelegate> delegate; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T00:17:25.103

问题可能是因为自定义。

我不知道为什么，但在我看来问题是因为使用线程+自定义警报。

您可以尝试在主线程上显示此警报吗？发生什么事？

您可能会在这一行中遇到错误： self.alert.alertViewStyle = UIAlertViewStylePlainTextInput;

如果是，您需要做的是在主线程中执行此操作。

```
- (void) yourMethod{
    [self performSelectorOnMainThread:@selector(yourMethod2) withObject:nil waitUntilDone:NO];
}

- (void) yourMethod2{
    self.alert = [[UIAlertView alloc] initWithTitle:@"Hello" message:@"How are you?" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"OK", nil];
    self.alert.alertViewStyle = UIAlertViewStylePlainTextInput;
    [self.alert show];
} 
```

很抱歉不能帮助你更多，但我不知道到底发生了什么，但我已经在其他线程中阅读了关于编辑要显示的内容时的问题。

希望对你有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T13:06:43.697

这`EXC_BAD_ACCESS`是由访问已释放的对象引起的。为避免这种情况，请调用`UIAlertView`某种模式：

函数体：

```
-(void)checkSaving
{
    UIAlertView *alert = [[UIAlertView alloc]
        initWithTitle:@"Do you want to add these results to your database?"
        message:@"\n\n"
        delegate:self
        cancelButtonTitle:@"No"
        otherButtonTitles:@"Save", nil];

    alert.alertViewStyle = UIAlertViewStyleDefault;
    [alert show];

    //this prevent the ARC to clean up :
    NSRunLoop *rl = [NSRunLoop currentRunLoop];
    NSDate *d;
    d= (NSDate*)[d init];
    while ([alert isVisible]) 
    {
     [rl runUntilDate:d];

    }
} 
```

您的选择结果：

```
- (void)alertView:(UIAlertView *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
    // the user clicked one of the OK/Cancel buttons

    if (buttonIndex == 1)//Save
    {
        //do something

    }
    if (buttonIndex == 0)//NO
    {
        //do something
    }
} 
```

在接口声明中注册函数：

```
@interface yourViewController ()
    -(void)checkSaving
    - (void)alertView:(UIAlertView *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
//...
@end 
```

致电：

```
[self checkSaving]; 
```

我希望这会对你有所帮助。

# c# - 这个演员代码在做什么？

> ID：10037124
> 
> 赞同：1
> 
> 时间：2012-04-05T22:53:41.923
> 
> 标签：c#, casting

这段代码在做什么？具体`default(XX)`部分。我以前从未见过它。

```
Entities.BizTalkRequestResult result = default(Entities.BizTalkRequestResult); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T22:55:07.140

这不是演员表；它编译为默认值`Entities.BizTalkRequestResult`。例如，对于引用类型，可能是`null`. 请参阅 MSDN： http: [//msdn.microsoft.com/en-us/library/xwth0h0d (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/xwth0h0d(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T22:55:10.083

它在括号内为您提供特定类型的默认值。例如`0`，对于像 int 或 float 这样的原始数字类型，或者`null`对于引用类型。当类型可能不同并且您想要编写适用于所有可能类型的通用代码时，它尤其有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T22:59:32.753

存在误解；这根本不是铸造。`default`运算符或函数返回默认值。例如：0 表示 int，null 表示引用类型。
`default`通常与泛型 ( `default(T)`) 一起使用，因为我们在编译时不知道实际类型。

# android - ActionBarSherlock + Maps + Loaders = java.lang.NoClassDefFoundError

> ID：10037125
> 
> 赞同：8
> 
> 时间：2012-04-05T22:53:46.953
> 
> 标签：android, android-maps, actionbarsherlock, android-loadermanager

**编辑：**有关详细的操作方法，请查看[我的答案](https://stackoverflow.com/a/10041252/180538)。

我这两天一直在苦苦挣扎，希望有人能帮忙。

我正在尝试将最新的 ActionBarSherlock (4.0) 与 MapView 一起使用。我知道片段有问题，但我在这个活动中不需要它们。但是我需要加载器，而且看来，要使用加载器，我也必须扩展 FragmentActivity。没问题，我想，我们有来自 Pete Doyle的[android-support-v4-googlemaps 。](https://github.com/petedoyle/android-support-v4-googlemaps)正如许多 SO 线程和 Google 组所建议的那样，我使用 android-support-v4-googlemaps JAR（实际上是 android-support-v13-r7-googlemaps.jar）而不是 android-support-v4.jar 构建 ABS。然后我将它用作我的项目的库。

**现在，我想以这种方式进行活动：**

`public class BananoutMapActivity extends SherlockFragmentActivity implements LoaderCallbacks<ArrayList<EventItem>>{`

**问题：**

它可以编译，但会引发运行时错误：`E/AndroidRuntime(29159): java.lang.NoClassDefFoundError: ndl.klimczak.bananout.BananoutMapActivity`

**我已经三重检查的事情：**

*   ActionBarSherlock 库项目和我的项目都针对 Google API 4.0.3
*   我有`<uses-library android:name="com.google.android.maps" />`并且我有它在应用程序标签中。
*   我的项目的构建路径中也有相同的 android-support-v13-r7-googlemaps.jar
*   我已经`.BananoutMapActivity`在我的清单中声明

**有趣的是：**

*   当我在 ICS 模拟器上运行它时它可以工作（错误出现在 2.* 模拟器和我的 2.3.7 设备上），在 Honeycomb 上它很可能也可以工作，我猜这是使用 ACL 的问题

*   当我删除`implements LoaderCallbacks<ArrayList<EventItem>>`它也可以工作的部分时，但是这样我就无法使用 LoaderManager

**为什么会出现 NoClassDefFoundError 错误以及如何让加载程序在我的 MapCapableSherlockEnabledFragmentActivity 中工作？**

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-06T08:56:26.630

**已弃用**：我想[Google Maps Android API v2](https://developers.google.com/maps/documentation/android/)会解决这个问题。如果您决定使用已弃用的 v1，则解决方案如下。

* * *

所以 Jake 回答了确切的问题，但我认为对于某人来说，或多或少详细的操作方法会很有用。**那么如何让 ActionBarSherlock 与地图一起工作呢？**

我假设你已经设置了 ActionBarSherlock 并作为一个库项目工作，你可以找到很多关于如何做到这一点的教程。

如果您只想将 MapActivity 与 ActionBarSherlock 一起使用 - 这很简单：

1.  下载 Jake 的 MapsPlugin [https://github.com/JakeWharton/ActionBarSherlock-Plugin-Maps](https://github.com/JakeWharton/ActionBarSherlock-Plugin-Maps) ,
2.  将它放在应用程序的 libs 文件夹中，并将其包含在构建路径中。

如果您想将 MapView 与 Fragments 或 Loaders 等 Honeycomb 功能一起使用：

1.  使用谷歌地图下载 Pete Doyle 的 android 支持包：[https](https://github.com/petedoyle/android-support-v4-googlemaps) ://github.com/petedoyle/android-support-v4-googlemaps ，
2.  制作一个 jar（如果您下载预编译的 jar，只需将 zip 重命名为 jar，以防您不知道）。您可以获得 v13 版本，它包括 v4，
3.  在工作区中复制 ActionBarSherlock 库（将其命名为 ActionBarSherlockMaps 或类似的名称），只是为了不与原始库混淆，您可能需要稍后使用它或其他东西，
4.  请记住针对最新的 Google API 构建 ActionBarSherlockMaps 和您的项目。如果您使用没有 Google API 的常规 Android 4.0.3，它将无法工作
5.  将jar（例如android-support-v13-r7-googlemaps.jar）放在新ActionBarSherlockMaps的libs文件夹中，从构建路径中排除android-support-v4.jar并包含android-support-v13-r7-googlemaps 。罐
6.  在修订版 7 中，您将在 SherlockFragmentActivity 的这一步中遇到编译错误。查找`protected void supportInvalidateOptionsMenu()`并将其可见性更改为`public`（新版ABS不需要此步骤）
7.  将相同的 jar 放在项目的 libs 文件夹中，从构建路径中排除 android-support-v4.jar 并包含 android-support-v13-r7-googlemaps.jar
8.  确保你把`<uses-library android:name="com.google.android.maps" />`你的清单文件的应用程序标签
9.  确保为片段、加载器和其他东西使用正确的导入！你应该使用例如`import android.support.v4.app.LoaderManager;`insted of`import android.app.LoaderManager;`
10.  **享受 ActionBarSherlock + Google Maps + Fragments + Loaders**

这是目前最好的解决方法，直到 Google 将地图放入兼容性库中。我希望他们能在 4.* 设备数量超过 2.*...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-05T23:10:15.747

您需要使用支持库中的加载器，而不是平台中的加载器。由于这些仅在 Android 3.0+ 上可用，并且您将它们包含在类定义中的事实将导致 3.0 之前的类加载器完全拒绝您的类。将您的导入切换到支持库变体应该是所有需要的。

如果您查看 Logcat 中的异常上方，您应该会看到一个或多个 VerifyErrors，它们将具体概述问题所在。

您也只能`android-support-v13`在 Android 3.2 及更高版本上使用该库（因此`v13`得名）。

# sql - 如何在sql server中选择彼此相隔一小时的记录

> ID：10037126
> 
> 赞同：3
> 
> 时间：2012-04-05T22:53:47.653
> 
> 标签：sql, sql-server

我有一组带有时间戳的 user_id 的登录数据。

一个用户可以多次登录，但我们需要从最小记录开始，至少相隔一小时返回记录。重复数据删除必须在用户级别进行（可以有多个用户）

例如。

*   用户 1 2012-03-07 14:24:30.000
*   用户 1 2012-03-07 14:34:30.000
*   用户 1 2012-03-07 15:14:30.000
*   用户 1 2012-03-07 15:20:30.000
*   用户 1 2012-03-07 15:30:30.000
*   用户 1 2012-03-08 09:20:30.000
*   用户 1 2012-03-08 09:50:30.000
*   用户 1 2012-03-08 10:30:30.000
*   用户2 2012-03-07 15:20:30.000

我只想看到以下记录

*   用户 1 2012-03-07 14:24:30.000
*   用户 1 2012-03-07 15:30:30.000
*   用户 1 2012-03-08 09:20:30.000
*   用户 1 2012-03-08 10:30:30.000
*   用户2 2012-03-07 15:20:30.000

==================================================== =======================

有没有办法以干净的方式做到这一点？我们可以递归地做到这一点，但我希望可能有一种方法来使用 row_number 分区。

任何帮助深表感谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T23:39:34.920

在 Sql Server 2005 或更新版本中，此 CTE 将返回 LoginAt 日期时间表，从已选择的 LoginAts 中删除不到一小时的时间。

```
;with SkipHour(UserID, LoginAT, rn) as (
  select UserID, min(LoginAt), cast (1 as bigint)
    from LogTable
   group by UserID
  union all
  select SkipHour.UserID, LogTable.LoginAt,
         row_number() over (partition by SkipHour.UserID 
                            order by Logtable.LoginAt) rn
  from SkipHour
     inner join LogTable
        on LogTable.UserID = SkipHour.UserID
     where datediff(minute, SkipHour.LoginAt, LogTable.LoginAt) >= 60
     -- Only first rows from previous generation qualify to have children
        and rn = 1
)
select *
from SkipHour
where rn = 1
order by UserID, LoginAT 
```

关键部分是 row_number()。由于 Sql Server 既不允许聚合函数也不允许顶级谓词，row_number() 是唯一的方法（IMO）来订购 loginAt 日期时间并只保留第一个。

[Sql Fiddle 游乐场是这样的](http://sqlfiddle.com/#!3/db937/4)。

**更新**：

行号分别适用于每一代。从[WITH common_table_expression 中提取 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms175972%28v=sql.105%29.aspx)提取：

> CTE 递归部分中的分析和聚合函数应用于当前递归级别的集合，而不是应用于 CTE 的集合。像 ROW_NUMBER 这样的函数只对当前递归级别传递给它们的数据子集进行操作，而不是对传递给 CTE 递归部分的整个数据集进行操作。有关更多信息，请参阅 J. 在递归 CTE 中使用分析函数。

# silverlight - 如何在 Silverlight 中检测时区？

> ID：10037133
> 
> 赞同：0
> 
> 时间：2012-04-05T22:54:22.843
> 
> 标签：silverlight, timezone, silverlight-5.0

如何在 Silverlight 中检测时区？这是一个超出浏览器的应用程序

你会使用 p/Invoke 吗？Silverlight 在时间类中是否默认支持此功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T23:15:08.057

[时区信息.Local](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.local%28v=vs.95%29.aspx)

# jquery - 为什么成功消息在这个 jquery ajax 中不起作用？

> ID：10037139
> 
> 赞同：0
> 
> 时间：2012-04-05T22:54:47.133
> 
> 标签：jquery, html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>

<script src="http://code.jquery.com/jquery-1.7.2.min.js" type="text/javascript"></script>

<script type="text/javascript">

    $(document).ready(function () {

        var Celcius = 0;
        $.ajax({
            type: "POST",
            url: "http:\//www.w3schools.com/webservices/tempconvert.asmx/CelsiusToFahrenheit",
            contentType: "application/x-www-form-urlencoded",
            data: 'Celsius=0',
            dataType: "text/html",
            success: function (msg) {
                alert(msg);
            },
            error: function (xhr, msg) {
                alert('fail');
            }
        });

    });

</script>
</head>
<body>

</body>
</html> 
```

将上面的页面保存为桌面上的 .htm。如果您在浏览器中打开该页面，它会显示“失败”消息。但是如果你签入提琴手，调用实际上是成功的。在 fiddler 中，您还可以看到响应正确地给出了 32 作为答案（Web 服务将 0 摄氏度转换为 32 华氏度）。这在我的桌面上工作了一段时间，然后突然停止工作！

对于那些使用过提琴手的人。这是从提琴手监控的响应

```
HTTP/1.1 200 OK
Date: Thu, 05 Apr 2012 23:18:10 GMT
Server: Microsoft-IIS/6.0
MicrosoftOfficeWebServer: 5.0_Pub
X-Powered-By: ASP.NET
X-AspNet-Version: 4.0.30319
Cache-Control: private, max-age=0
Content-Type: text/xml; charset=utf-8
Content-Length: 87

<?xml version="1.0" encoding="utf-8"?>
<string xmlns="http://tempuri.org/">32</string> 
```

有任何想法吗？

更新：伙计们，网址[http://www.w3schools.com/webservices/tempconvert.asmx/CelsiusToFahrenheit](http://www.w3schools.com/webservices/tempconvert.asmx/CelsiusToFahrenheit)是一种网络方法。您无法通过浏览器直接访问它。如果您想通过浏览器发出请求，您可以使用[http://www.w3schools.com/webservices/tempconvert.asmx?op=CelsiusToFahrenheit](http://www.w3schools.com/webservices/tempconvert.asmx?op=CelsiusToFahrenheit)

请仅在您有使用 jquery ajax 调用 Web 服务的经验时回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T23:03:11.803

它失败了，因为您违反[了同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)

浏览器成功发出请求，但由于该请求没有您的站点查看数据的[权限](http://caniuse.com/#search=cors)，它不允许您的 JavaScript 访问它。

这显示在浏览器的 JavaScript 控制台中。例如

> XMLHttpRequest 无法加载`http://www.w3schools.com/webservices/tempconvert.asmx/CelsiusToFahrenheit`。Access-Control-Allow- Origin`http://fiddle.jshell.net`不允许 Origin。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T21:00:50.397

在托管 html 文件的文件夹中托管 jquery。您对 jquery 的引用将是这样的（而不是 Web 引用）。这足以克服[同源政策](https://developer.mozilla.org/en/Same_origin_policy_for_JavaScript)的实施。

```
 <script src="Scripts/jquery-1.4.1.min.js" type="text/javascript"></script> 
```

您的示例仅适用于 Internet Explorer。正如其他用户正确指出的那样，它无法在 firefox 和 chrome 中运行的原因是由于 [相同的原产地政策](https://developer.mozilla.org/en/Same_origin_policy_for_JavaScript)。您成功地从 Web 服务获得响应，但浏览器拒绝它。Fiddler 只是向您显示浏览器的流量（而不是浏览器对其执行的操作）。这可以解释为什么它似乎在提琴手中工作。

[您可以在此处](https://stackoverflow.com/questions/3595515/xmlhttprequest-error-origin-null-is-not-allowed-by-access-control-allow-origin)找到绕过相同来源政策的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T23:01:33.293

您的 ajax 调用应该在域内。再次查看上面指出的更正`http://`

# javascript - 一些帮助理解窗口对象

> ID：10037145
> 
> 赞同：-4
> 
> 时间：2012-04-05T22:55:14.647
> 
> 标签：javascript, object, window

> **可能重复：**
> [JS 窗口全局对象](https://stackoverflow.com/questions/10035771/js-window-global-object)

有人可以帮我理解这个`window`对象是如何工作的吗？

我知道它是顶级对象，并且该`window`对象代表浏览器中的打开窗口。

有人可以帮助我更多地了解它吗？`window`也许是关于该对象的链接或小解释？我知道它具有所有对象属性和方法。我告诉 bean 可以通过调用来重新创建`window.constructor`并获取它的本机代码，这也是获取对象实例的唯一方法。

如果有人能帮助我获得更多关于它的信息，我会很高兴。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T00:24:18.590

该`window`对象实际上是两件事：

1.  基于浏览器的 JavaScript 的全局对象。所有本机对象和方法（`Array`, `String`, `setTimeout()`）以及您在任何函数范围之外声明的任何内容都进入`window`对象。要对此进行测试，请尝试打开 JavaScript 控制台并检查：

    ```
    window.String === String
    // Returns true 
    ```

2.  该`window`对象还处理浏览器窗口。`window.innerWidth`是窗口的宽度；`window.onresize`是在窗口调整大小时触发的函数。因为它是“最顶层”的对象，你也可以说`innerWidth`获取窗口的宽度。

一般来说，引用 write`window.location`而不是仅仅引用`location`. 尽管它们会在很多时候工作，但有时您会遇到这样的情况（您不希望出现这种情况！）：

```
function something() {
    var location = 'the moon';
    location.reload();    // Should be window.location.reload()
} 
```

在上面的示例中，您可能打算刷新`window.location`而不是`location`此函数内部的范围。

这就是窗口对象！

# php - 如何使用 php-mysql 中的 pdo 从一台服务器连接（拉数据）到（插入到创建表）另一台服务器，可能获取？

> ID：10037147
> 
> 赞同：0
> 
> 时间：2012-04-05T22:55:23.597
> 
> 标签：php, mysql, pdo, database-connection

谁能告诉我如何在下面修复此代码？这样我就可以从 host1 （数据库 x ，表 1 ）中提取数据以在 host2 （数据库 dx，table2 ）中创建表，

我在这里想念什么？有人告诉我使用准备然后获取数组然后插入到 table2 中，任何人都可以告诉我，怎么做？

这是我的代码

```
<?php
echo 'Database Connection <br>';

$hostname = "host1";
$hostname1 = "host2";
$username = "myname";
$password = "mypassword";

try {
    $dbh = new PDO("mysql:host=$hostname;dbname=x", $username, $password);
    echo "Connected to database x<br>"; // check for connection
    $dbup = new PDO("mysql:host=$hostname1;dbname=dx", $username, $password);
    echo "Connected to database dx<br>"; // check for connection

    /*** The SQL SELECT statement ***/
    $sql = $dbh->query("select name, choices from table1")or die(print_r($dbh->errorInfo(), true));
    $sql1 = $dhup->query("CREATE TABLE api(
    `name` VARCHAR(40) NOT NULL,
    `choices` VARCHAR(255) NOT NULL )")or die(print_r($dbh->errorInfo(), true));

    foreach ($sql as $row)
        {
           $dbup->exec("insert into table2('name','choices') values('" . $row['name'] . "','" . $row['choices'] . "')") or die(print_r($dbup->errorInfo(), true));
        }

//    /*** close the database connection ***/
    $dbh = null;
    $dbup = null;
   }
catch(PDOException $e)
    {
    print 'Exception : '.$e->getMessage();
    }

?> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T23:09:42.557

我注意到您并没有始终以相同的方式拼写“dbup”。

在：

```
$dbup = new PDO... 
```

你用了 d'B'up。

在：

```
$dhup->query("CREATE TABLE... 
```

你用了 d'H'up。

也许这是一个简单的印刷错误案例？

# ios - 有没有办法检查iOS之前是否下载了应用程序？

> ID：10037148
> 
> 赞同：0
> 
> 时间：2012-04-05T22:55:34.223
> 
> 标签：ios, app-store

我在 appstore 上有一个我的应用程序，目前它是免费的。我想让未来的版本不是免费的，但对于那些以前下载过它的用户来说，这个应用程序仍然是免费的，有没有办法做到这一点？我可以检查用户第一次下载特定应用程序的时间以及日期是否在某个日期之前它仍然免费，否则用户要求为使用此应用程序付费。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T23:01:11.577

如果用户下载了一个应用程序并且它是免费的，那么在以后的更新中对他们来说仍然是免费的。出于这个原因，免费付费很好。一般来说，从付费到免费往往会让那些为你的应用付费的人感到不安。

要更改应用程序的价格，您可以在 iTunes Connect 中进行管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T23:00:57.447

如果是已经下载它的免费用户完全拥有它。

设置价格不会影响以前的下载，他们将能够下载未来的版本作为更新，而无需支付任何费用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T23:01:09.970

用户购买应用程序后，该应用程序的所有更新都是免费的。您可以将价格更改为您想要的任何价格，所有现有用户将继续获得可用的更新。

您似乎不需要任何工作即可获得所需的效果。

# javascript - 填写另一个文本框时动态创建新文本框

> ID：10037154
> 
> 赞同：0
> 
> 时间：2012-04-05T22:55:59.233
> 
> 标签：javascript, jquery

为了说明：[http ://sas98.user.srcf.net/guestlist/](http://sas98.user.srcf.net/guestlist/)

当用户在底部的来宾列表字段中键入内容时，我希望创建一个新的输入字段。

是否可以这样做而不是必须使用 onClick 按下按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T23:02:46.183

您可以添加一个在第一个输入框失去焦点时触发的模糊事件。可以进行额外检查以确保有人将一些文本放入第一个输入字段，如果有值添加一个新的输入字段

```
$('#guest_list_input').blur(function() {
    if($(this).val().length>0) {
         $('#myPlaceWhereIWantToAddANewInputField').append('<input value='test' name='test' />');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T23:05:14.580

您可能希望在或事件`focus`之后附加一个新输入。`blur``change`

我的选择是创建一个字段`focus`（以便用户可以通过按 Tab 切换到它），并可选择删除`blur`事件上的空字段。可能带有一些花哨的淡入/淡出效果。

# java - 爪哇矢量 class method access I am trying to use a vector to hold my classes. These classes inherit methods from another class and have their own methods as well. What I am having trouble with is using the vector with objects to call 问问题 问问题 2012-04-05T22:56:09.387 2850 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I am trying to use a vector to hold my classes. These classes inherit methods from another class and have their own methods as well. What I am having trouble with is using the vector with objects to call the methods from the class within the object. I thought it would be something like: public static void vSort(Vector vector) { vector[0].generate(); } with generate being a custom method i created with the student class within the object. A better example public class Method { protected String name; public void method() { // some code } } public class Student extends Method { protected String last; public void setUp() { // some code } } public class Main { public static void main(String[] args) { Vector vector = new Vector(); Student stu = new Student(); // pretend this generates something vector.add(stu); } The problem i am running into is there are many classes like student that build on Method. If i cant use Object that is fine with me but i need to access the code within the Method class. Full disclosure: I have not used Turbine. Having said that, I think it might solve your problem for you or at least show you how to solve it. They have a Unity Nuget package here: http://nuget.org/packages/MvcTurbine.Unity And you can find more detail on their codeplex site here: http://mvcturbine.codeplex.com/ Hope that helps. java 4 3 回答 3 This answer is useful 3 Java doesn't have operator overloads. So the syntax is: vector.get(0).generate(); However, this won't work at all in your case, because you have a Vector, and an Object doesn't have a generate method. [Tangential note: vector is de facto deprecated; you should probably use ArrayList instead.] 于 2012-04-05T22:58:38.380 回答 This answer is useful 2 you should use vector.get(0) to retrieve your object. Also note, that Object does not declare generate() - so you are going to need to cast or specify your object as the generic type. 于 2012-04-05T22:58:50.070 回答 This answer is useful 0 当你有 aVector时，所有的检索方法都会返回Object，所以除非你明确地向下转换，否则你不能调用子类方法。您应该Vector<yourclass>改用，这样您从向量中得到的引用是类型的YourClass，您不必向下转换它们。 于 2012-04-05T22:59:28.513 回答 Related 3 javascript - 如何使用javascript在字符串中获取'@'之后的下两个单词 1 html - 创建巨大的 html 列表结构的最简单的方法是什么？ 1 php - 403 错误 - 发出 curl 请求时出现禁止错误 2 .net - 从 MVC3 升级到 MVC4 后出现“元素未关闭”错误 1 ruby - 如何解决哈希比较问题 3 c# - 骰子游戏无法正确显示奖金 2 wordpress - 创建页面的 Wordpress 表单 1 php - 无法使用 PHP PDO 查询 MS Access 数据库中保存的查询 2 javascript - 这个事件处理程序在做什么？ 3 javascript - JavaScript json 拆分对象并更新 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10037158
> 
> 赞同：2
> 
> 时间：
> 
> 标签：java

I am trying to use a vector to hold my classes. These classes inherit methods from another class and have their own methods as well. What I am having trouble with is using the vector with objects to call the methods from the class within the object. I thought it would be something like:

```
public static void vSort(Vector<Object> vector) {
vector[0].generate();
} 
```

with generate being a custom method i created with the student class within the object.

A better example

```
public class Method {
protected String name;

public void method() {
// some code
}
}
public class Student extends Method {
protected String last;

public void setUp() {
// some code
}
}
public class Main {
public static void main(String[] args) 
{
Vector<Object> vector = new Vector<Object>();
Student stu = new Student(); // pretend this generates something

vector.add(stu);

} 
```

The problem i am running into is there are many classes like student that build on Method. If i cant use Object that is fine with me but i need to access the code within the Method class.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T22:58:38.380

Java doesn't have operator overloads. So the syntax is:

```
vector.get(0).generate(); 
```

However, this won't work at all in your case, because you have a `Vector<Object>`, and an `Object` doesn't have a `generate` method.

[*Tangential note: `vector` is de facto deprecated; you should probably use `ArrayList` instead.*]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T22:58:50.070

you should use [`vector.get(0)`](http://docs.oracle.com/javase/6/docs/api/java/util/Vector.html#get%28int%29) to retrieve your object.

Also note, that `Object` does not declare `generate()` - so you are going to need to cast or specify your object as the [generic](http://docs.oracle.com/javase/tutorial/java/generics/index.html) type.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T22:59:28.513

当你有 a`Vector<Object>`时，所有的检索方法都会返回`Object`，所以除非你明确地向下转换，否则你不能调用子类方法。您应该`Vector<YourClass>`改用，这样您从向量中得到的引用是类型的`YourClass`，您不必向下转换它们。</yourclass>

# ios - 带有 NSStrikethroughColorAttributeName 的 NSAttributedString 示例

> ID：10037164
> 
> 赞同：0
> 
> 时间：2012-04-05T22:56:25.150
> 
> 标签：ios

我正在寻找将 NSAttributedString 与 NSStrikethroughColorAttributeName 一起使用的示例

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T16:40:23.510

我没有看到您列出的字符属性“NSStrikethroughColorAttributeName”在 iOS 中可用。有几个与[NSAttributedString 参考中列出的相似](http://developer.apple.com/library/ios/documentation/UIKit/Reference/NSAttributedString_UIKit_Additions/Reference/Reference.html#//apple_ref/doc/uid/TP40011688-CH1-SW16)

```
NSStrikethroughStyleAttributeName
NSStrokeColorAttributeName 
```

如有必要，您可以将这两者结合起来以获得您想要的。

# tsql - 从字符表递归替换

> ID：10037168
> 
> 赞同：4
> 
> 时间：2012-04-05T22:56:40.973
> 
> 标签：tsql, sql-server-2005, recursion

简而言之，我正在寻找一个可以对一个字符串执行多次替换的递归查询。我有一个想法可以做到，但我没能完全理解它。

当然，我更喜欢应用程序的 biz 层，甚至是 CLR，来进行替换，但在这种情况下，这些不是选项。

更具体地说，我想用 TVF 替换下面的混乱 - 这是 8 个不同存储过程中的 C&P。

```
SET @temp = REPLACE(RTRIM(@target), '~', '-')
SET @temp = REPLACE(@temp, '''', '-')
SET @temp = REPLACE(@temp, '!', '-')
SET @temp = REPLACE(@temp, '@', '-')
SET @temp = REPLACE(@temp, '#', '-')
-- 23 additional lines reducted
SET @target = @temp 
```

这是我开始的地方：

```
-- I have a split string TVF called tvf_SplitString that takes a string 
-- and a splitter, and returns a table with one row for each element.
-- EDIT: tvf_SplitString returns a two-column table: pos, element, of which
--       pos is simply the row_number of the element.
SELECT REPLACE('A~B!C@D@C!B~A', MM.ELEMENT, '-') TGT
FROM   dbo.tvf_SplitString('~-''-!-@-#', '-') MM 
```

请注意，我已将所有违规字符加入到一个由“-”分隔的单个字符串中（知道“-”永远不会成为违规字符之一），然后将其拆分。此查询的结果如下所示：

```
TGT
------------
A-B!C@D@C!B-A
A~B!C@D@C!B~A
A~B-C@D@C-B~A
A~B!C-D-C!B~A
A~B!C@D@C!B~A 
```

所以，替换显然有效，但现在我希望它是递归的，所以我可以拉顶部 1 并最终得出：

```
TGT
------------
A-B-C-D-C-B-A 
```

关于如何通过一个查询完成此操作的任何想法？

编辑：好吧，如果有另一种方法，则不需要实际的递归。我也在考虑在这里使用数字表。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-01-26T02:48:43.260

您可以在标量函数中使用它。我用它从一些外部输入中删除所有控制字符。

```
SELECT @target = REPLACE(@target, invalidChar, '-')
FROM (VALUES ('~'),(''''),('!'),('@'),('#')) AS T(invalidChar) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-05T23:48:07.813

我想到了。我没有提到 tvf_SplitString 函数将行号返回为“pos”（尽管分配 row_number 的子查询也可以工作）。有了这个事实，我可以控制递归调用和拆分之间的交叉连接。

```
-- the cast to varchar(max) matches the output of the TVF, otherwise error.
-- The iteration counter is joined to the row number value from the split string
-- function to ensure each iteration only replaces on one character.
WITH XX AS (SELECT CAST('A~B!C@D@C!B~A' AS VARCHAR(MAX)) TGT, 1 RN
            UNION ALL
            SELECT REPLACE(XX.TGT, MM.ELEMENT, '-'), RN + 1 RN
            FROM   XX, dbo.tvf_SplitString('~-''-!-@-#', '-') MM
            WHERE  XX.RN = MM.pos)
SELECT TOP 1 XX.TGT  
FROM   XX
ORDER  BY RN DESC 
```

不过，我对其他建议持开放态度。

# css - Adsense flexibility for holy grail fluid layout?

> ID：10037171
> 
> 赞同：1
> 
> 时间：2012-04-05T22:57:03.443
> 
> 标签：css, adsense

This is my situation, I have a css 3 column fluid layout (finally mastered the holy grail, thanks everyone!) and in my left column I have a google adsense advert. For those of you familiar with this, they aren't very flexible in the advert sizes, but I am curious if there is a way to change the advert based on the width of the column. Currently this column sits at 20%, so I am thinking maybe a good old fashioned "If - Else" statement might do the trick, but I haven't got it to work yet. The logic is that say we have two ads, a 180 px wide one (a) and a 280 px wide one (b), so if the column is greater than 280 px then it will display advert b, if not then it will display advert a. Has anyone else done this? Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T03:37:21.677

这里有一些考虑。首先，你用 css 标记了这个问题。如果您只是想使用 css 隐藏您的逻辑已确定不应显示的广告，这样做很简单，但这是一个糟糕的主意。一方面，您将隐藏 Google 明确禁止的已加载广告。接下来，您可能最终隐藏了一个首先加载的广告，因此在您的页面上获得了最“有价值”的点击。您不希望被留下展示价值较低的广告。

您需要做的是**在页面加载**时使用 javascript来确定视口宽度是多少，然后选择在您正在谈论的广告位中加载哪个广告代码。在尽可能多的浏览器中进行测试，因为您需要确保获得正确的视口宽度才能使该策略起作用。如果由于某种原因它不起作用，请确保后备不会灾难性地折叠布局。这种方法的缺点是如果用户在页面加载后更改视口大小，那么广告将打破边界。您至少可以使用 CSS 来缓解这种极端情况，隐藏或裁剪广告的父 div ( `overflow: hidden;`)，以便视口大小的更改不会破坏布局。

# jquery - Binding autocomplete to a dynamically added form field

> ID：10037175
> 
> 赞同：0
> 
> 时间：2012-04-05T22:57:47.943
> 
> 标签：jquery, dynamic, input, autocomplete

I'm trying to bind the jQuery UI autocomplete widget to a dynamically added input field. I've read some of the posts here, but none seem to help.

The code I'm using comes from [Dynamically adding a form to a Django formset with Ajax](https://stackoverflow.com/questions/501719/dynamically-adding-a-form-to-a-django-formset-with-ajax) and I've slightly modified it to bind the autocomplete.

However, the bind doesn't seem to be working. Whenever I type in the newly added field, the autocomplete box doesn't show. The code I am using follows:

```
function cloneMore(selector, type,field) {
    var newElement = $(selector).clone(true);
    var total = $('#id_' + type + '-TOTAL_FORMS').val();
    newElement.find(':input').each(function() {
        var name = $(this).attr('name').replace('-' + (total-1) + '-','-' + total + '-');
        var id = 'id_' + name;

        if ($(this).attr('type') != 'hidden') {
            $(this).val('');
        }
        $(this).attr({'name': name, 'id': id}).removeAttr('checked');
    });
    newElement.find('label').each(function() {
        var newFor = $(this).attr('for').replace('-' + (total-1) + '-','-' + total + '-');
        $(this).attr('for', newFor);
    });
    total++;
    $('#id_' + type + '-TOTAL_FORMS').val(total);
    $(selector).after(newElement);

    /* create the selector string and bind autocomplete */
    var select_string = "#id_"+type+"-"+(total-1)+"-"+field;
    $( select_string).autocomplete({
        source: asset_universe_codes,
    });

} 
```

I have checked that the autocomplete source is accessible within the function, so I'm at a loss.

Can anyone help?

Thanks,

Jason

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T23:05:11.967

似乎 newElement 尚未附加到 DOM，如果是这种情况，那么附加它（在调用自动​​完成之前）应该可以解决您的问题。

# c# - 如何在对象之间继承事件

> ID：10037178
> 
> 赞同：0
> 
> 时间：2012-04-05T22:57:53.497
> 
> 标签：c#, winforms, inheritance, picturebox

我需要继承事件和属性。例如，我需要在表单周围移动图片。我有这个代码来移动一张图片，但我需要创建多个具有相同行为的图像。

```
private void pictureBox_MouseDown(object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Left)
    {
         x = e.X;
         y = e.Y;
     }
 }

private void pictureBox_MouseMove(object sender, MouseEventArgs e)  
{
    if (e.Button == MouseButtons.Left)
    {
        pictureBox.Left += (e.X -x);
        pictureBox.Top += (e.Y - y);
    }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T23:11:11.440

创建自定义控件：

```
public class MovablePictureBox : PictureBox
{
    private int x;
    private int y;

    protected override void OnMouseDown(MouseEventArgs e)
    {
        base.OnMouseDown(e);

        if (e.Button == MouseButtons.Left)
        {
            x = e.X;
            y = e.Y;
        }
    }

    protected override void OnMouseMove(MouseEventArgs e)
    {
        base.OnMouseMove(e);

        if (e.Button == MouseButtons.Left)
        {
            Left += (e.X - x);
            Top += (e.Y - y);
        }
    }
} 
```

更新：您应该覆盖继承的事件功能，而不是附加委托，正如 Microsoft[在此处](http://msdn.microsoft.com/en-us/library/tc568dw7.aspx)建议的那样。创建此控件后，只需编译程序并将您的 MovablePictureBoxes 从 Toolbox 拖到窗体中。它们都是可拖动的（或可移动的，如果你愿意的话）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T23:07:22.400

您真正想要做的是让您的多个 PictureBoxes 共享相同的事件处理程序：

```
private void pictureBox_MouseMove(object sender, MouseEventArgs e)   
{ 
    if (e.Button == MouseButtons.Left) 
    { 
        // the "sender" of this event will be the picture box who fired this event
        PictureBox thisBox = sender as PictureBox;            

        thisBox.Left += (e.X -x); 
        thisBox.Top += (e.Y - y); 
    } 
 } 
```

您在表单上创建的每个 PictureBox 都会将它们连接到相同的、已创建的事件。如果您查看上面的代码，您会注意到它确定了哪个 PictureBox 调用它并只影响那个图片框。

# asp.net - 上传多个/大文件

> ID：10037181
> 
> 赞同：3
> 
> 时间：2012-04-05T22:58:11.333
> 
> 标签：asp.net, asp.net-mvc-3

我有这个页面，用户可以在其中上传文档（多个文档，每个大小限制为 10MB）。这是一个两步过程。第 1 步有输入表单。第 2 步是带有提交按钮的预览页面。

我应该如何处理用户在预览页面上关闭浏览器而不提交表单的情况？我应该在步骤 1 之后将文件保存在临时位置吗？这是一个体面的解决方案吗？

上传（合理）大文件的最佳实践是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T23:01:17.187

看看这个：

[http://www.codeproject.com/Articles/68374/Upload-Multiple-Files-in-ASP-NET-using-jQuery](http://www.codeproject.com/Articles/68374/Upload-Multiple-Files-in-ASP-NET-using-jQuery)

无论如何，您最终可能会查看 jQuery/AJAX 控件来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T23:12:27.457

如果用户离开，那么让他们重新开始。他们离开的可能性很大。如果发生事故，责任由他们承担。如果您选择在他们不提交的情况下存储他们的数据，这可能会让恶意用户利用您的存储。

您还可以研究一个称为分块的过程。

有关 mvc3 中文件上传的更深入讨论，请参阅此 SO 帖子：[MVC 3 文件上传和模型绑定](https://stackoverflow.com/q/4784225/1026459)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T13:55:22.067

您可以使用临时文件夹来保存文件并仅在提交表单时将文件复制到其最终位置。

无论如何，最好实现一个垃圾收集器。垃圾收集器可以每晚清空临时文件夹。但是在使用垃圾收集器时，如果您有办法识别未提交的文件（例如，如果在提交时将一行添加到数据库中），您可以将文件从头开始放在它们的最终位置，然后让垃圾收集器每晚都会清除它们。

可以使用诸如 Uploadify 的 JQuery UI 插件上传大文件：[http](http://www.uploadify.com/) ://www.uploadify.com/ 。需要注意的是，它使用了flash，一方面非常适合上传大文件，但另一方面会阻碍你的应用程序支持iPad等苹果机器。

# jquery - How do I get my thumbnails to scroll left and right on click with jquery?

> ID：10037182
> 
> 赞同：0
> 
> 时间：2012-04-05T22:58:32.207
> 
> 标签：jquery

So here is all of my code for my slideshow and everything works except the thumbnails moving left to right on mouse click of `#slideshow-thumbs-prev` and `#slideshow-thumbs-next`.

I am new at jquery so please be as descriptive as possible. Let me know whats going on here if I am missing something or the code isn't labeled correctly to my html. Thanks

```
 <script type="text/javascript">

var index = 0;

$(document).ready(function(){
function next() {
    index++;
    if ( index > 11 ) {
        index = 0;
    } // end if 
    show_slide();
} // end next()

function prev() {
    index--;
    if ( index < 0 ) {
        index = 11;
    } // end if
    show_slide();
} // end prev()

$("#slideshow-thumbs-next").click(function(){
    index ++;
    if ( index > 11 ) {
        index = 0;
    }           
    var position = $('#slidesthumbnails>div').eq(index).position();
    $('#slidesthumbnails').animate({left:-position.left+'px',top:-position.top+'px'});
});

$("#slideshow-thumbs-prev").click(function(){
    index --;
    if ( index > 0 ) {
        index = 11;
    }           
    var position = $('#slidesthumbnails>div').eq(index).position();
    $('#slidesthumbnails').animate({left:-position.left+'px',top:-position.top+'px'});
});

function show_slide() {
    $("#slideshow-container>.slideshow-stage>img").eq(index).fadeIn(500).siblings().fadeOut(500);
    $("#slide-caption-box>.slide-caption>div").eq(index).fadeIn(500).siblings().fadeOut(500);
    //highlight thumbnail
    $("#thumbnails-container>#thumbnails-wrapper>#slidesthumbnails>.thumbnails").removeClass("selected").eq(index).addClass("selected");
}

$(function() {
    $( "#slideshow-container>.slideshow-stage>img" ).aeImageResize({ height: 476, width: 680 });
});

    $("#slideshow-container>.slideshow-stage>img").eq(0).siblings().hide();
    $("#slide-caption-box>.slide-caption>div").eq(0).siblings().hide();

    $("#thumbnails-container>#thumbnails-wrapper>#slidesthumbnails>.thumbnails").click(function(){
        var index = $(this).index();
        $(this).addClass("selected").siblings().removeClass("selected");
        $("#slideshow-container>.slideshow-stage>img").eq(index).fadeIn(500).siblings().fadeOut(500);
        $("#slide-caption-box>.slide-caption>div").eq(index).fadeIn(500).siblings().fadeOut(500);       
    });

    //click functions,
    $("#slideshow-container>.slideshow-stage>.slideshow-next").click(function(){
        index = $(this).index();
        $(this).addClass("selected").siblings().removeClass("selected");
        show_slide();
    });

    $("#thumbnails-container>#thumbnails-wrapper>#slidesthumbnails>.thumbnails").click(function(){
        index = $(this).index();
        $(this).addClass("selected").siblings().removeClass("selected");
        show_slide();

    });

            $("#slideshow-next").click( next );
            $("#slideshow-prev").click( prev );

            $("#slideshow-thumbs-next").click( next );
            $("#slideshow-thumbs-prev").click( prev );

    $(function() {           
    $("#thumbnails-container>#thumbnails-wrapper>#slidesthumbnails>.thumbnails").mouseover(function (event) {
        $(this).siblings().stop().animate({opacity: 0.4}, 200);       
        $(this).stop().animate({opacity: 1.0}, 200); 
        event.stopPropagation();     // don't fire the body click handler
    });
    });

    $(function() {           
    $("#thumbnails-container>#thumbnails-wrapper>#slidesthumbnails>.thumbnails").mouseout(function (event) {             
        $(this).siblings().stop().animate({opacity:1.0}, 200);       
        $(this).stop().animate({opacity: 1.0}, 200); 
        event.stopPropagation();     // don't fire the body click handler
    });

    }); 
    }); 
```

```
<LINK REL="SHORTCUT ICON" HREF="http://benlevywebdesign.webatu.com/images/favicon.ico">

</head>

<body>

<div id="container">
<div id="headerReplacement">
  <p>&nbsp;</p>
  <p>benlevygraphics</p>
</div>

<span class="class1"><div id="mainnav">
      <ul>
        <li><a href="http://benlevywebdesign.webatu.com/"><img src="../images/homevector_v1.png" alt="" onmouseout="this.src='../images/homevector_v1.png'" onmouseover="this.src='../images/homevector_v2.png'"></a></li>
      </ul>
      </div></span>
      <div id="titlegallery">
      <p class="photographs">"The Best" - A Graphic Design Gallery</p>
      </div>

<!--This is the gallery code here-->
<div id="gallery1">

    <div id="slideshow-container">

    <div class="slideshow-stage">
        <img src="img/Building.jpg" />
        <img src="img/Magazine Cover.jpg" />
        <img src="img/Clocks.jpg" />
        <img src="img/hitsdraft.jpg" />
        <img src="img/regenwebsite.jpg" />
        <img src="img/BrendanSchaffer.jpg" />
        <img src="img/logobml.jpg" />
        <img src="img/studiox.jpg" />
        <img src="img/benlevygraphicsspace.jpg" />
        <img src="img/five.jpg" />
        <img src="img/backofcdcover.jpg" />
        <img src="img/frontofcdcover.jpg" />
    </div>

    <div id="slide-caption-box">
    <div id="imagedescription">
        <img src="../images/Image-Description.png">
    </div>
        <div class="slide-caption">
                <div>
                    <h4>Vector Building</h4>
                    <p>Drawn using Illustrator </p><p class="creatednote">*AAU</p>
                </div>

                <div>
                    <h4>Magazine Cover</h4>
                    <p>designed using Illustrator </p><p class="creatednote">*AAU</p>
                </div>

                <div>
                    <h4>Clocks</h4>
                    <p>designed using Illustrator </p><p class="creatednote">*AAU</p>
                </div>

                <div>
                    <h4>Hole in the Sky Tours Website</h4>
                    <p>website draft designed using Illustrator  <a href="http://benlevywebdesign.webatu.com/holeintheskytours"> View the finished Hole in the Sky Tours Website here</a> </p><p class="creatednote">*AAU</p>
                </div>

                <div>
                    <h4>Regen Website Mock-up</h4>
                    <p>designed using Illustrator </p><p class="creatednote">*AAU</p>
                </div>

                <div>
                    <h4>BrendanSchaffer Logo Design</h4>
                    <p>designed using Illustrator </p><p class="creatednote">*HS</p>
                </div>

                <div>
                    <h4>B M L Logo</h4>
                    <p>Version 1 designed using Illustrator </p><p class="creatednote">*HS</p>
                </div>

                <div>
                <h4>Studio X</h4>
                    <p>Studio X Bio Page Mock-Up designed using Illustrator </p><p class="creatednote">*AAU</p>
                </div>

                <div>
                    <h4>Ben Levy Graphics</h4>
                    <p>Ben Levy Graphics name logo designed using Photoshop </p><p class="creatednote">*HS</p>
                </div>

                <div>
                    <h4>Five</h4>
                    <p>A printed out number 5 with hand drawn lines, then scanned in and colored using Photoshop </p><p class="creatednote">*HS</p>
                </div>

                <div>
                    <h4>Five</h4>
                    <p>A printed out number 5 with hand drawn lines, then scanned in and colored using Photoshop </p><p class="creatednote">*HS</p>
                </div>

                <div>
                    <h4>Five</h4>
                    <p>A printed out number 5 with hand drawn lines, then scanned in and colored using Photoshop </p><p class="creatednote">*HS</p>
                </div>

                </div>
                </div>

    <div id="thumbnails-container">
            <a class="prev" id="slideshow-thumbs-prev"><span>prev</span></a>
            <a class="next" id="slideshow-thumbs-next"><span>next</span></a>

        <div id="thumbnails-wrapper">
        <div id="thumbnails-box">
    <div class="thumbnails"><img src="imglorez/Building.jpg" width="58" height="40" /></div>      
    <div class="thumbnails"><img src="imglorez/Magazine Cover.jpg" width="31" height="40" /></div>
    <div class="thumbnails"><img src="imglorez/Clocks.jpg" width="62" height="40" /></div>
    <div class="thumbnails"><img src="imglorez/hitsdraft.jpg" width="56" height="40" /></div>
    <div class="thumbnails"><img src="imglorez/regenwebsite.jpg" width="60" height="40" /></div>
    <div class="thumbnails"><img src="imglorez/BrendanSchaffer.jpg" width="50" height="40" /></div>
    <div class="thumbnails"><img src="imglorez/logobml.jpg" width="55" height="40" /></div>
    <div class="thumbnails"><img src="imglorez/studiox.jpg" width="56" height="40" /></div>
    <div class="thumbnails"><img src="imglorez/benlevygraphicsspace.jpg" width="64" height="40" /></div>
    <div class="thumbnails"><img src="imglorez/five.jpg" width="29" height="40" /></div>
    <div class="thumbnails"><img src="imglorez/backofcdcover.jpg" width="52" height="40" /></div>
    <div class="thumbnails"><img src="imglorez/frontofcdcover.jpg" width="80" height="40" /></div>
</div>
</div>
</div>

    <div id="slideshow-prev"></div>
    <div id="slideshow-next"></div>

</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T00:02:22.673

好吧，有一个 js 错误.. 不知道这是否会导致某些事情：

```
Uncaught Error: Syntax error, unrecognized expression: >
http://analytics.hosting24.com/count.php
Failed to load resource 
```

# c# - 将 chrome 与 Selenium 2.0 与 C# 一起使用

> ID：10037186
> 
> 赞同：1
> 
> 时间：2012-04-05T22:58:55.840
> 
> 标签：c#, google-chrome, selenium, selenium-chromedriver

我的 ChromeDriver.exe 有问题 运行测试时，Google Chrome 窗口已打开，但随后 chromedriver 控制台出现错误。它说的是：

> [0405/175241：警告：scoped_temp_dir.cc<15>] 无法删除 dtor 中的临时目录。

任何人都可以帮助我吗？....顺便说一句，我正在使用 C#。

我想上传图片，但我不能，因为我是新用户...

-JM

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-19T11:54:20.300

**ChromeDriver 中的 Selenium WebDriver C#：**

**先决条件：**安装Visual Studio（我的是VS 2017），谷歌Chrome浏览器

要遵循的步骤：

1.  打开 VS 2017 并创建解决方案/项目
2.  使用 C# 代码编写测试，如下所示：

    IWebDriver driver = new ChromeDriver(); driver.Navigate().GoToUrl("你的测试 URL");

现在按照以下步骤安装“Selenium.WebDriver.ChromeDriver”：

1.  右键单击项目-> 管理 NuGet 包...
2.  点击顶部的浏览并搜索 ChromeDriver
3.  选择“Selenium.WebDriver.ChromeDriver”并安装
4.  执行/运行你的测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T00:48:46.547

在创建 ChromeDriver 的新实例时，您可以将 exe 的文件路径作为参数而不是移动您的 chromedriver.exe。这与 IE 相同。例如：driver = new ChromeDriver("C:\ChromeDriverFolder"); 将在 C 盘上名为“ChromeDriverFolder”的文件夹中查找 cromedriver.exe。

# c++ - X11：如何连续渲染

> ID：10037189
> 
> 赞同：0
> 
> 时间：2012-04-05T22:59:18.153
> 
> 标签：c++, c, x11

我正在为游戏创建一个 X11 窗口，但它似乎只偶尔进行一次暴露事件（如最大化和调整大小），有没有办法让 X11 调用不断暴露？glutPostRedisplay() 是如何产生的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T23:02:45.010

暴露事件只是告诉你以前被遮蔽的窗口的一部分现在是可见的，所以你可能需要重绘。*仅*在公开事件时重绘没有任何限制。

# php - 使用 Sendgrid Web API 发送动态 PHP HTML

> ID：10037190
> 
> 赞同：2
> 
> 时间：2012-04-05T22:59:23.000
> 
> 标签：php, html-email, sendgrid

我想使用 Sendgrid WebAPI 最好不使用 SMTP 或 Swiftmailer 使用下面的代码。是否可以将整个动态网页传递给 'html' $params 数组而不创建长字符串变量并且需要转义每个引号并回显每个变量？每封电子邮件差异很大，因此 Sendgrid 的模板/邮件合并选项对我不起作用。谢谢！

这是一个简单的 html 示例（我的有更多动态内容）：

```
<html>
  <head></head>
  <body>
    <p>Hi I'm <?php echo $name; ?>!<br>
       <span style="color: #999999; font-size: 11px;">How are you?</span><br>
    </p>
  </body>
</html>

$url = 'http://sendgrid.com/';
$user = 'USERNAME';
$pass = 'PASSWORD'; 

$params = array(
    'api_user'  => $user,
    'api_key'   => $pass,
    'to'        => 'example3@sendgrid.com',
    'subject'   => 'testing from curl',
    'html'      => 'testing body',
    'text'      => 'testing body',
    'from'      => 'example@sendgrid.com',
  );

$request =  $url.'api/mail.send.json';

// Generate curl request
$session = curl_init($request);
// Tell curl to use HTTP POST
curl_setopt ($session, CURLOPT_POST, true);
// Tell curl that this is the body of the POST
curl_setopt ($session, CURLOPT_POSTFIELDS, $params);
// Tell curl not to return headers, but do return the response
curl_setopt($session, CURLOPT_HEADER, false);
curl_setopt($session, CURLOPT_RETURNTRANSFER, true);

// obtain response
$response = curl_exec($session);
curl_close($session);

// print everything out
print_r($response); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T23:23:02.590

生成所需 HTML 的最佳方法是使用[Smarty](http://www.smarty.net/)之类的模板引擎。因此，在您的示例中，在实际发送电子邮件的上方某处，您将执行以下操作：

```
include('Smarty.class.php');

$smarty = new Smarty;
$smarty->assign('name', 'Swift');
$smarty->assign('name', 'SendGrid');
$smarty->assign('address', '123 Broadway');

// Store it in a variable
$emailBody = $smarty->fetch('some_dynamic_template.tpl'); 
```

然后当您实际需要使用新的动态 HTML 正文发送电子邮件时：

```
....

$params = array(
    'api_user'  => $user,
    'api_key'   => $pass,
    'to'        => 'example3@sendgrid.com',
    'subject'   => 'testing from curl',
    'html'      => $emailBody,
    'from'      => 'example@sendgrid.com',
);

.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T14:24:10.147

在同样的情况下，使用替换标签更容易使用 SMTP API，更多细节：[http ://sendgrid.com/docs/API_Reference/SMTP_API/substitution_tags.html](http://sendgrid.com/docs/API_Reference/SMTP_API/substitution_tags.html)

# android - 当我在代码中创建布局时，为什么 android 试图从 /res/layout 读取 xml 布局文件？

> ID：10037196
> 
> 赞同：-1
> 
> 时间：2012-04-05T22:59:50.730
> 
> 标签：android, android-layout, android-widget

这个问题是关于 RemoteViews 的。它在正常活动中可以正常工作，但在小部件中却不行：

我的 ids.xml 中有这个：

```
 <item type="layout" name="linear_layout_for_widget"></item> 
```

我的 WidgetProvider 类中有这个：

```
 RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.widget4x1_layout);
    LinearLayout linearLayoutForWidget = layout4x1Provider.createLinearLayoutForWidget(backgroundColor, 
            textColor, borderColor, borderWidth, false);
    RemoteViews nestedView = new RemoteViews(context.getPackageName(), R.layout.linear_layout_for_widget);
    remoteViews.removeAllViews(R.id.frame_layout_root);
    remoteViews.addView(R.id.frame_layout_root, nestedView);
    appWidgetManager.updateAppWidget(widgetId, remoteViews); 
```

其中 Layout4x1Provider 是一个辅助类，它在代码中构建我的布局树。如果我在我的配置活动中执行此操作（以显示预览），它将正确显示：

```
 Layout4x1Provider layout4x1Provider = new Layout4x1Provider(this);
FrameLayout frameLayoutRoot = (FrameLayout) findViewById(R.id.frame_layout_root);
    LinearLayout linearLayoutWidget = layout4x1Provider.createLinearLayoutForWidget(backgroundColor, 
            textColor, borderColor, borderWidth, true);
frameLayoutRoot.removeAllViews();
frameLayoutRoot.addView(linearLayoutWidget); 
```

作为 RemoteView，尽管文档声明 RemoteView 类的 addView() 方法等同于 ViewGroup 类的 addView() 方法，但它不起作用。

代码编译，Logcat中只抛出异常：

```
04-06 00:42:12.843: W/AppWidgetHostView(4671): updateAppWidget couldn't find any view, using error view
04-06 00:42:12.843: W/AppWidgetHostView(4671): android.content.res.Resources$NotFoundException: File  from xml type layout resource ID #0x7f060003
04-06 00:42:12.843: W/AppWidgetHostView(4671):  at android.content.res.Resources.loadXmlResourceParser(Resources.java:1916)
04-06 00:42:12.843: W/AppWidgetHostView(4671):  at android.content.res.Resources.loadXmlResourceParser(Resources.java:1871)
04-06 00:42:12.843: W/AppWidgetHostView(4671):  at android.content.res.Resources.getLayout(Resources.java:731)
04-06 00:42:12.843: W/AppWidgetHostView(4671):  at android.view.LayoutInflater.inflate(LayoutInflater.java:318)
04-06 00:42:12.843: W/AppWidgetHostView(4671):  at android.widget.RemoteViews.apply(RemoteViews.java:1303)
04-06 00:42:12.843: W/AppWidgetHostView(4671):  at android.widget.RemoteViews$ViewGroupAction.apply(RemoteViews.java:844)
04-06 00:42:12.843: W/AppWidgetHostView(4671):  at android.widget.RemoteViews.performApply(RemoteViews.java:1328)
04-06 00:42:12.843: W/AppWidgetHostView(4671):  at android.widget.RemoteViews.apply(RemoteViews.java:1305)
04-06 00:42:12.843: W/AppWidgetHostView(4671):  at android.appwidget.AppWidgetHostView.updateAppWidget(AppWidgetHostView.java:218)
04-06 00:42:12.843: W/AppWidgetHostView(4671):  at android.appwidget.AppWidgetHost.createView(AppWidgetHost.java:218)
04-06 00:42:12.843: W/AppWidgetHostView(4671):  at org.adw.launcher.Launcher.realAddWidget(Launcher.java:4005)
04-06 00:42:12.843: W/AppWidgetHostView(4671):  at org.adw.launcher.Launcher.access$25(Launcher.java:3984)
04-06 00:42:12.843: W/AppWidgetHostView(4671):  at org.adw.launcher.Launcher$3.onClick(Launcher.java:1069)
04-06 00:42:12.843: W/AppWidgetHostView(4671):  at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:159)
04-06 00:42:12.843: W/AppWidgetHostView(4671):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-06 00:42:12.843: W/AppWidgetHostView(4671):  at android.os.Looper.loop(Looper.java:130)
04-06 00:42:12.843: W/AppWidgetHostView(4671):  at android.app.ActivityThread.main(ActivityThread.java:3687)
04-06 00:42:12.843: W/AppWidgetHostView(4671):  at java.lang.reflect.Method.invokeNative(Native Method)
04-06 00:42:12.843: W/AppWidgetHostView(4671):  at java.lang.reflect.Method.invoke(Method.java:507)
04-06 00:42:12.843: W/AppWidgetHostView(4671):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
04-06 00:42:12.843: W/AppWidgetHostView(4671):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
04-06 00:42:12.843: W/AppWidgetHostView(4671):  at dalvik.system.NativeStart.main(Native Method)
04-06 00:42:12.843: W/AppWidgetHostView(4671): Caused by: java.io.FileNotFoundException: 
04-06 00:42:12.843: W/AppWidgetHostView(4671):  at android.content.res.AssetManager.openXmlAssetNative(Native Method)
04-06 00:42:12.843: W/AppWidgetHostView(4671):  at android.content.res.AssetManager.openXmlBlockAsset(AssetManager.java:486)
04-06 00:42:12.843: W/AppWidgetHostView(4671):  at android.content.res.Resources.loadXmlResourceParser(Resources.java:1898)
04-06 00:42:12.843: W/AppWidgetHostView(4671):  ... 21 more 
```

所以，显然 android 正在寻找相应的 xml 文件......那么，我如何告诉 android 不要寻找 xml 文件。我假设 ids.xml 中布局资源的声明应该阻止 android 查找物理文件。在创建布局的代码中，我有：

```
 linearLayoutForWidget.setId(R.layout.linear_layout_for_widget); 
```

为什么这可以作为活动而不是在小部件/RemoteView 中工作？不显示小部件，而是显示“加载小部件时出现问题”。附带说明：我已经将资源项的类型从“布局”更改为“id”和resp。在代码中，无济于事。

这真的让我很恼火，因为我见过许多可以即时配置的小部件，以至于我怀疑它们是基于大量资源文件的。例如，允许用户使用颜色选择器选择任何背景颜色的小部件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T00:55:02.797

因为你告诉它：

```
RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.widget4x1_layout); 
```

也就是说，我认为它几乎总是如此。

但是，从代码修改/添加`View`s 与使用 XML 布局并不相互排斥。只需在您的 XML 布局中添加最少的数量，也许只是一个`LinearLayout`. 然后您可以根据需要添加到它`addView`。

# asp.net-mvc - 将富含子域的请求路由到 MVC 3 应用程序中的区域视图

> ID：10037198
> 
> 赞同：0
> 
> 时间：2012-04-05T23:00:04.037
> 
> 标签：asp.net-mvc, asp.net-mvc-3, subdomain, asp.net-mvc-routing

我在 MVC 3 应用程序中使用[Maarten Balliauw 方法进行子域路由。](http://blog.maartenballiauw.be/post/2009/05/20/ASPNET-MVC-Domain-Routing.aspx)

基本上，我在 RouteTable.Routes 中添加了以下两条路线：

```
 _routes.Add("DomainRoute", new DomainRoute(
                        "{user}.localhost",                                             
                        "{action}/{id}",                                                
                        new { controller = "FileUpload", action = "Index", user = "" });  

 _routes.MapRoute("Default",                                                                  
                "{controller}/{action}/{id}",                                               
                new { controller = "Home", action = "Index", id = "" }); 
```

问题是我的`FileUpload`控制器应该驻留在单独的 MVC `Area`（称为上传）中。

我还需要将 {user} 参数传递到 FileUpload 控制器的 Index 操作中。我应该如何设置这个子域到区域的动作重定向？

PS我可以向你保证，这个问题似乎没有重复。其他人在询问如何将子域视为一个区域，而不是如何将子域视为参数，然后将请求路由到区域内的控制器。

重要提示：当用户仅导航到子域（如 max.localhost.com）时，我需要使用子域到区域的视图路由，而不是在导航到 max.localhost.com/upload 时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T23:07:16.160

它应该像这样简单：

```
_routes.Add("DomainRoute", new DomainRoute(
                        "{user}.localhost",                                             
                        "upload",                                                
                        new { controller = "FileUpload", action = "Index", user = "" });

[HttpPost]
public ActionResult Index(HttpPostedFileBase file, string user) 
{

} 
```

当您发布到[http://maxim.localhost/upload](http://maxim.localhost/upload)时，用户变量将设置为“maxim”。

# python - Django 在不使用“request.path”的情况下获取 url 路径

> ID：10037200
> 
> 赞同：4
> 
> 时间：2012-04-05T23:00:17.747
> 
> 标签：python, django, url, path, http-status-code-404

我正在 django 中创建一个 404.html 页面，当我提出“Http404”时将调用该页面

我不知道 404.html 是否会被传递一个“RequestContext”对象，但我可以在不使用请求变量的情况下生成请求的 url 路径

我尝试了“request.path”和“request.get_full_path”，但它们对我不起作用。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T23:18:50.517

404 模板*将*使用请求上下文呈现（与 500 服务器错误模板不同）。

确保[`django.core.context_processors.request`](https://docs.djangoproject.com/en/dev/ref/templates/api/#django-core-context-processors-request)上下文处理器在您的`TEMPLATE_CONTEXT_PROCESSORS`设置中。请注意，默认情况下不包含它。

完成后，您提到的[请求方法](https://docs.djangoproject.com/en/dev/ref/request-response/#methods)`get_full_path`应该可以工作。

# javascript - 图库脚本仅在某些页面上运行

> ID：10037211
> 
> 赞同：0
> 
> 时间：2012-04-05T23:01:53.717
> 
> 标签：javascript, gallery

我在我网站上的以下帖子中使用带有缩略图的图库脚本

[http://www.lookbookcookbook.com/2012/03/apple-cinnamon-pancakes.html](http://www.lookbookcookbook.com/2012/03/apple-cinnamon-pancakes.html)

它工作正常，但是当您转到主页（第三个帖子）时，它停止工作。是因为我有另一个帖子使用相同的脚本进行干扰吗？

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T23:24:21.087

您的脚本使用 id 来定位要显示的图片。Id 应该是唯一的，只有一个元素可以具有任何给定的 Id。

您的两个画廊的 img 共享相同的 ID：#pic-0、#pic-1 等。所以点击时，只显示找到的第一个，即第一个画廊中的 img。

解决起来应该不会太难，但是你的很多代码必须是 CMS 生成的，所以我必须知道你可以改变什么来提供更多帮助。

（那是处理您的画廊的一段代码：）

```
function myshowImages(id) {
 /* $(".mainPic").hide(); 
$("#pic-"+id).show();*/ 
$('.mainPic').css({'display':'none'}); 
$("#pic-"+id).fadeIn('slow');  
} 
```

评论后编辑：

所以，老实说，你的代码有点乱，要实现干净的东西会有很多变化。但是，为了您的迫切需要，您应该使用两个 showImage 函数：

```
function myshowImages1(id) {
$('.mainPic1').css({'display':'none'}); 
$("#pic-"+id).fadeIn('slow');  
}

function myshowImages2(id) {
$('.mainPic2').css({'display':'none'}); 
$("#pic-"+id).fadeIn('slow');  
} 
```

并编辑您的链接：对于第一个画廊。对于第二个。

请记住，它丑陋且不可扩展：如果您有三个画廊，它会坏掉。我将查看您的代码，看看您如何才能拥有独特的功能。

编辑2：

因此，您可以使用更清洁的功能：

1/ 设置：为每个链接/图像对选择一个类名。例如：

```
<a href="" class="image_1">
<img alt="" height="80" src="(some long path)/lookbookcookbooksaya267b.jpg" title="" width="80">
</a> 
```

拇指链接和要显示的图像：

```
<a href="(some long path)/lookbookcookbooksaya267.jpg">
<img alt="" class="image_1" height="470" src="(some long path)/lookbookcookbooksaya267.jpg"></a> 
```

然后，我看到你有 JQuery，所以这种功能：

```
$(document).ready(function()
{
     $(".gallery div div a").on("click",function()
     {
     var myClass = $(this).attr('class');
     var $parentGallery = $(this).parents('.gallery');
     $parentGallery.find("div > a > img").css("display","none").find("myClass").fadeIn();
     return false;
    });
}); 
```

首先，它在所有链接上绑定一个点击事件，这些链接是 .gallery 元素中的两个 div 深度。那是你的拇指。单击时，它会获取单击的拇指链接的类。然后它搜索此链接的父 .gallery，隐藏所有图像并显示好的图像。

我不能真正保证它会解决问题，因为您的标记非常复杂，但它应该。

# objective-c - 替换另一个类中的变量值

> ID：10037212
> 
> 赞同：0
> 
> 时间：2012-04-05T23:02:01.717
> 
> 标签：objective-c, xcode

我有课程 *ColorViewController *DrawRectangle

在 ColorViewController.h 中：

```
#import "DrawRectangle.h"
@interface ColorViewController : UIViewController {
DrawRectangle *DrawRectangle;
}

@property (nonatomic,retain) DrawRectangle *DrawRectangle; 
```

在 DrawRectangle.h 中：

```
@interface DrawRectangle : UIView {
CGFloat redc;
}
@property (nonatomic) CGFloat redc; 
```

我还将 ViewController.xib 中的 DrawRectangle 类添加到 UIView 之一。

我想从文件 ColorViewController.m 更改 CGFloat redc 的值我这样做是这样的：

```
- (void)viewDidLoad
{
CGFloat myfloat = 1.0;
self.DrawRectangle.redc = myfloat; 
```

我在 DrawRectangle 中用这个“redc”调用 NSLog，但它每次都说 0.0000000。

如何从 ViewController 替换“redc”的值？我认为我不需要使用 NSNotification，如果我将 DrawRectangle 加载到 ViewController 中，一定有更简单的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T23:06:04.043

看起来您的对象尚未实例化。尝试：

```
-(void)viewDidLoad {
    [super viewDidLoad];

    CGFloat myfloat = 1.0;
    [drawRectangle setRedc:myfloat];
} 
```

作为一般编程实践，您还应该避免将对象命名为与类相同的名称。我建议将对象重命名为`drawRectangle`.

您还需要在您的 xib 中连接您的 drawRectangle 对象

```
@property (nonatomic, retain) IBOutlet DrawRectangle *drawRectangle; 
```

# javascript - 如何捕获我的 jsdom.jqueryify 回调引发的错误？

> ID：10037221
> 
> 赞同：1
> 
> 时间：2012-04-05T23:03:45.447
> 
> 标签：javascript, node.js, jsdom

此代码在 node.js 中运行时的输出是最后一行（第 9 行）发生的错误的堆栈跟踪。第 7 行发生的错误以某种方式被节点“吸收”。即使我将它包装在 try/catch 语句中，我似乎也无法像从节点的默认错误处理代码中那样获得详细的堆栈跟踪输出。

如何在第 7 行捕获错误并从第 9 行获取尽可能多的详细信息？

```
jsdom = require('jsdom');
var testHTML = "<html><head><title>Hi!</title></head><body><p>Hi!</p></body></html>";
jsdom.jQueryify(
    jsdom.jsdom(testHTML).createWindow(),
    'http://code.jquery.com/jquery-1.4.2.min.js' ,
    function() {
        var a = broken();
    });
var a = broken(); 
```

（注意：这是一个简化的示例，来自我正在编写的一个更复杂的脚本，其中错误发生在“深度”嵌套堆栈中，该堆栈是由于从 jQueryify 回调中调用而形成的，并且调试它是现在*绝对*痛苦，无法获得有关错误的详细统计信息）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T21:21:35.223

它是异步的，因此您不能`try/catch`在对`jQueryify`. 您必须在回调的顶级回调中放置一个 try catch

```
jsdom = require('jsdom');
var testHTML = "<html><head><title>Hi!</title></head><body><p>Hi!</p></body></html>";
jsdom.jQueryify(
    jsdom.jsdom(testHTML).createWindow(),
    'http://code.jquery.com/jquery-1.4.2.min.js' ,
    function() {

        try {
            var a = broken();
        } catch(e) {
            // Handle the error here
        }
    });
var a = broken(); 
```

# heroku - 如果我设置了 Heroku 自定义域，是否仍可通过其 herokuapp.com 地址访问它？

> ID：10037230
> 
> 赞同：1
> 
> 时间：2012-04-05T23:04:31.173
> 
> 标签：heroku

如果我在 myapp.herokuapp.com 有一个站点并且我设置它有一个自定义域 app.mydomain.com，除了自定义域之外，它是否仍然可以在 myapp.herokuapp.com 访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T23:09:33.530

是的，默认情况下，您可以从两个位置访问它...

# java - 音频频谱效果 iOS/Android

> ID：10037231
> 
> 赞同：2
> 
> 时间：2012-04-05T23:04:49.353
> 
> 标签：java, android, objective-c, ios, audio

我想知道是否有任何方法可以获得像 Java 和/或 Objective C 中的音频效果[。](http://www.youtube.com/watch?v=WWNnBpuZMuI&feature=plcp&context=C4fa98fdVDvjVQa1PpcFNfPjU4bg9M-7EQuFCJBJ8NdC8hL11KSog=) 它通常在 After Effects 中完成，但我想在智能手机上创建它。我知道x轴是频率，y轴是音量。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-05T23:53:39.137

我不确定 iOS，但如果您不介意额外的空间，Eclipse 可以处理 .mp3 文件，您可以使用 MediaPlayer 类播放它。至于创建文件，我不确定 .raw 是否有足够独特的声音。

我使用单独的 Music.java 类在 Android 中播放 mp3，然后在 res/raw/*.mp3 中使用 mp3 调用它

```
import android.content.Context;
import android.media.MediaPlayer;

public class Music
{
private static MediaPlayer mp = null;

//Stop old song, play new one
public static void play(Context context, int resource)
{
    stop(context);

    if (Prefs.isMusic(context)) //is music on?
    {
        mp = MediaPlayer.create(context, resource);
        mp.setLooping(true);
        mp.start();
    }//end if
}//end play method

//Stop the music
public static void stop(Context context)
{
    if(mp != null)
    {
        mp.stop();
        mp.release();
        mp = null;
    }//end if
}//end stop method
}//end class Music 
```

以及我的 Game.java 文件中的调用：

```
Music.play(this, R.raw.game);
Music.stop(this); 
```

# r - 大数据集上的随机森林

> ID：10037239
> 
> 赞同：7
> 
> 时间：2012-04-05T23:05:59.290
> 
> 标签：r, machine-learning, random-forest

我在 R 中有一个大型数据集（1M+ 行 x 6 列），我想用它来训练随机森林（使用`randomForest`包）用于回归目的。不幸的是，我`Error in matrix(0, n, n) : too many elements specified`在尝试一次完成整个事情时遇到错误，并且在数据子集上运行时*无法分配足够的内存*类型的错误 - 低至 10,000 左右的观察。

看到我不可能在我的机器上添加更多 RAM 并且随机森林非常适合我尝试建模的进程类型，我真的很想完成这项工作。

非常感谢任何建议或解决方法的想法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-06T03:44:49.507

您可能会要求`randomForest`为数据创建邻近矩阵，如果您考虑一下，它将*非常*大：100 万 x 100 万。无论您设置多小，都需要这样大小的矩阵`sampsize`。事实上，简单地谷歌搜索错误消息似乎证实了这一点，因为包作者[指出](https://stat.ethz.ch/pipermail/r-help/2011-January/266206.html)，在整个源代码中唯一 `n,n)`可以找到的地方是计算邻近矩阵。

但是很难提供更多帮助，因为您没有提供有关您正在使用的实际代码的详细信息。

# asp.net - 如何区分来自浏览器的帖子和尝试以编程方式发布的人

> ID：10037240
> 
> 赞同：1
> 
> 时间：2012-04-05T23:06:02.420
> 
> 标签：asp.net, security, browser, viewstate

有没有办法确定到达处理程序的请求（假设处理程序响应获取和发布）是由真正的浏览器还是由编程客户端执行的？

我已经知道欺骗 User Agent 和 Referrer 之类的东西很容易，但是还有其他更难欺骗的标头吗？也许在.net 的 HttpWebRequest 之类的类中不常见的标头？

我看到的另一条路径可能是使用加密视图状态向浏览器发送一个值，该值在服务器端得到验证，尽管不能简单地从先前的响应中抓取该值并作为 post 参数添加到下一个请求？

任何帮助将不胜感激，干杯，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T23:17:28.153

最常见的方法是使用[验证码](http://en.wikipedia.org/wiki/CAPTCHA)。当然，验证码有其自身的问题（用户并不真正关心它们），但它们确实使以编程方式发布数据变得更加困难。尽管您可以强制他们在交付内容之前解决验证码，但对 GET 并没有真正的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T23:23:35.533

没有简单的方法来区分，因为最终，从程序上看，帖子在服务器上看起来与用户从浏览器中发布的帖子相同。

As mentioned, captcha's can be used to control posting but are not perfect (as it is very hard but not impossible for a computer to solve them). They also can annoy users.

Another route is only allowing authenticated users to post, but this can also still be done programatically.

If you want to get a good feel for how people are going to try to abuse your site, then you may want to look at [http://seleniumhq.org/](http://seleniumhq.org/)

This is very similar to the famous Halting Problem in computer science. See some more on the proof, and Alan Turing here: [http://webcache.googleusercontent.com/search?q=cache:HZ7CMq6XAGwJ:www-inst.eecs.berkeley.edu/~cs70/fa06/lectures/computability/lec30.ps+alan+turing+infinite+loop+compiler&cd=1&hl=en&ct=clnk&gl=us](http://webcache.googleusercontent.com/search?q=cache:HZ7CMq6XAGwJ:www-inst.eecs.berkeley.edu/~cs70/fa06/lectures/computability/lec30.ps+alan+turing+infinite+loop+compiler&cd=1&hl=en&ct=clnk&gl=us)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-05T23:09:58.407

有很多方法可以做到这一点，比如动态生成的 XHR 请求只能通过人工任务完成。

这是一篇关于 NP-Hard 问题的精彩文章。我可以在这里看到一个巨大的可能性： [http ://www.i-programmer.info/news/112-theory/3896-classic-nintendo-games-are-np-hard.html](http://www.i-programmer.info/news/112-theory/3896-classic-nintendo-games-are-np-hard.html)

一种方法：您可以使用一些棘手的 JS 来处理点击时的标记。因此，您的服务器在后端渲染阶段向页面上的元素发出令牌 ID。将这些记录在数据库或数据文件中。然后，当用户点击并提交时，您可以比较通过 onclick() 函数发送的 id。有很多方法可以解决这个问题，但是您可以应用一些启发式方法来确定帖子是否太快而无法成为人类，也就是说，即使他们编写了劫持令牌 ID 并自动提交的脚本，您也可以检查点击事件之间的时间自动显示。最近注册了推特账号？他们使用被动人体检测，虽然不是 100% 万无一失，但它更慢且更难破解。许多（如果不是全部）垃圾邮件帐户必须由人工打开。

另一种方式：[http ://areyouahuman.com/](http://areyouahuman.com/)

只要您使用加密方法来验证人性，而没有糟糕的 CAPTCHA 是可能的。我的意思是，也不要忽略您的标题。这些是免费的方式。

关键是要有足够的复杂性来解决一个 NP-Complete 问题，就解决问题总数的方法数量而言是非同寻常的。[http://en.wikipedia.org/wiki/NP-complete](http://en.wikipedia.org/wiki/NP-complete)

当人工智能可以自行解决多个复杂的人类问题的那一天到来时，除了请求篡改之外，我们还有其他事情要担心。

[http://louisville.academia.edu/RomanYampolskiy/Papers/1467394/AI-Complete_AI-Hard_or_AI-Easy_Classification_of_Problems_in_Artificial](http://louisville.academia.edu/RomanYampolskiy/Papers/1467394/AI-Complete_AI-Hard_or_AI-Easy_Classification_of_Problems_in_Artificial)

另一家进行有趣研究的公司是[http://www.vouchsafe.com/play-games](http://www.vouchsafe.com/play-games)，他们实际上使用旨在欺骗 RTT 的游戏来训练 RTT 如何更容易被人类解决！

# php - 合并两个 MYSQL 查询

> ID：10037243
> 
> 赞同：0
> 
> 时间：2012-04-05T23:06:27.087
> 
> 标签：php, mysql

我必须合并需要组合的 mysql 查询：

第一个查询将列出所有用户名和密码：

```
$query=mysql_query("SELECT Username, Password from user");

while($row = mysql_fetch_array($query)) {

echo $row['Username'].' '.$row['Password'];

} 
```

第二个将只打印与某个用户名对应的密码：

```
$user=$_SESSION['user'];

$query2=mysql_query("SELECT Username, Password from user WHERE Username = '$user'");

while($row2 = mysql_fetch_array($query2))
{

 echo $row2['Password'];

} 
```

我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T23:19:28.797

这应该这样做。

```
$query=mysql_query("SELECT Username, Password from user");
$user=$_SESSION['user'];

while($row = mysql_fetch_array($query)) {
echo $row['Username'].' '.$row['Password'];
if ($row['Username'] == $user) {
 echo $row['Password'];
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T23:18:27.283

您的第一个结果数组已经有了答案。我假设您的用户名是唯一的。所以你可以像这样组合它们。

```
$user=$_SESSION['user'];
$query=mysql_query("SELECT Username, Password from user");
while($row = mysql_fetch_array($query)) {
  echo $row['Username'].' '.$row['Password']."<br />";
  if($row['Username']==$user)echo "THIS IS THE PASSWORD: ".$row['Password'];
} 
```

它们是哈希密码吗？或者你做任何类型的加密？

# sql - SQL Server ORDER BY [聚合] DESC/ASC

> ID：10037245
> 
> 赞同：2
> 
> 时间：2012-04-05T23:06:36.957
> 
> 标签：sql, sql-server

我希望能够通过升序或降序对 [comment] 进行排序。我已经尝试在“order by”子句中再次执行聚合，但这没有用。我还尝试在子查询之外进行排序，这让我可以使用别名 [comment]，但它只在第 0 行和第 10 行之间排序。

此查询是更大查询的较小版本。

```
 SELECT *
FROM   (SELECT ISNULL((SELECT COUNT("order")
                       FROM   order_comment
                       WHERE  "order" = "order"."id"
                       GROUP  BY "order"), 0)                 AS [comment],
               Row_number() OVER (ORDER BY "order"."id" DESC) AS [rownum]
        FROM   [order]
        WHERE  ISNULL((SELECT COUNT("order")
                       FROM   order_comment
                       WHERE  "order" = "order"."id"
                       GROUP  BY "order"), 0) > 0) AS [filter]
WHERE  [rownum] BETWEEN 0 AND 10 
```

在 MySql 中如此简单！

```
 SELECT Ifnull((SELECT COUNT(`order`)
               FROM   order_comment
               WHERE  `order` = `order`.`id`
               GROUP  BY `order`), 0) AS `comment`
FROM   `order`
HAVING `comment` > 0
ORDER  BY `comment` DESC
LIMIT  0, 10 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T18:07:56.473

在最新的编辑嫌疑人之后，你想要这样的东西

```
;WITH oc AS
(
SELECT [order], 
       COUNT([order]) AS order_count
FROM   order_comment 
GROUP  BY [order]
), occ AS
(
SELECT o.*,
       order_count AS comment,
       ROW_NUMBER() OVER (ORDER BY order_count DESC) AS  [rownum]
FROM [order] o
INNER JOIN oc ON oc.[order] = o.id
)
SELECT *
FROM occ 
WHERE  [rownum] BETWEEN 0 AND 10
ORDER BY [rownum] 
```

将`INNER JOIN`已经排除任何没有子行的行`order_comment`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T23:20:17.613

我假设您不知道可以将[`OVER`子句](http://msdn.microsoft.com/en-us/library/ms189461.aspx)与聚合函数一起使用。

```
COUNT(order) OVER(PARTITION BY id) AS [comment]
....
ORDER BY [comment] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T23:53:02.303

在 SQL Server 中，您可以按查询中的列号排序，如 ORDER BY 1 more info here [http://blog.sqlauthority.com/2010/12/27/sql-server-order-by-columnname-vs-order-按列号/](http://blog.sqlauthority.com/2010/12/27/sql-server-order-by-columnname-vs-order-by-columnnumber/)

```
SELECT *
FROM   (SELECT ISNULL((SELECT COUNT("order")
                      FROM   order_comment
                   WHERE  "order" = "order"."id"
                   GROUP  BY "order"), 0)                 AS [comment],
           Row_number() OVER (ORDER BY "order"."id" DESC) AS [rownum]
    FROM   [order]
    WHERE  ISNULL((SELECT COUNT("order")
                   FROM   order_comment
                   WHERE  "order" = "order"."id"
                   GROUP  BY "order"), 0) > 0) AS [filter]
WHERE  [rownum] BETWEEN 0 AND 10
 ORDER BY 1 
```

# opengl - windows下如何判断opengl版本？

> ID：10037251
> 
> 赞同：5
> 
> 时间：2012-04-05T23:07:20.303
> 
> 标签：opengl

我知道 Windows 带有 Opengl 驱动程序。如果我也有 NVidia 驱动程序，如何终止 OpenGL 版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T23:50:28.997

> 我知道 Windows 带有 Opengl 驱动程序。

实际上并没有。Windows 带有 OpenGL 仿真。但实际的 OpenGL 驱动程序只能通过供应商的原始驱动程序获得。

> 如何终止OpenGL版本？

创建一个 OpenGL 上下文并使用该`glGetString`函数来检索标识值。最感兴趣的是 GL_VERSION 和 GL_RENDERER。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T23:22:42.690

您可以使用它[`glGetString(GL_VERSION)`](http://www.opengl.org/wiki/GlGetString)来检索当前正在执行的 OpenGL 版本。

# x++ - 生成设计中数据方法的参考控制

> ID：10037252
> 
> 赞同：1
> 
> 时间：2012-04-05T23:07:21.717
> 
> 标签：x++, axapta

如何从当前字符串控件的datamethod中引用控件或控件名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T07:14:44.407

将`AutoDeclation`控件的属性设置为`Yes`，然后直接使用控件名称。

# android - 当应用程序不工作时，Android BroadcastReceiver 使应用程序崩溃

> ID：10037256
> 
> 赞同：0
> 
> 时间：2012-04-05T23:07:40.153
> 
> 标签：android, service, android-activity, broadcastreceiver

我有一个 Radio 应用程序，它使用媒体播放器服务和 BroadcastReceiver 来检查传入和传出呼叫以停止或重新启动媒体播放器服务，它可以工作，但是当我退出我的应用程序时，BroadcastReceiver 仍在检查呼叫，它使我的崩溃应用程序即使消失了（已经完成）这里是代码

显现

```
<service android:name=".PlayerService" 
            android:label="@string/app_name"> 
            <intent-filter>
        </intent-filter>    
    </service>
    <receiver android:name=".IncomingCallInterceptor">                     
        <intent-filter>                                                   
             <action android:name="android.intent.action.PHONE_STATE"/> 
             <action android:name="android.intent.action.NEW_OUTGOING_CALL" />  
        </intent-filter>
    </receiver> 
```

广播接收器

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.telephony.TelephonyManager;

public class IncomingCallInterceptor extends BroadcastReceiver {                                  

@Override
public void onReceive(Context context, Intent intent) {                                         
    String state = intent.getStringExtra(TelephonyManager.EXTRA_STATE);  

    if (PlayerService.getInstance() != null) {
    if (TelephonyManager.EXTRA_STATE_RINGING.equals(state)) {  
            PlayerService.getInstance().stopMusic();
    }
    if (TelephonyManager.EXTRA_STATE_OFFHOOK.equals(state)) { 
            PlayerService.getInstance().stopMusic();
    }
    if (TelephonyManager.EXTRA_STATE_IDLE.equals(state)) {  
            PlayerService.getInstance().startMusic();
    }

    }else{}

}

} 
```

我怎样才能让它停止？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T00:09:17.933

从您的清单中删除接收器并在您的服务中本地注册它：

在您的服务方法中使用此代码`onCreate()`：

```
IncomingCallInterceptor interceptor;

public void onCreate() {
    super.onCreate();

    //your code here

    incerceptor = new IncomingCallInterceptor();
    IntentFilter f = new IntentFilter();
    f.addAction("android.intent.action.PHONE_STATE");
    f.addAction("android.intent.action.NEW_OUTGOING_CALL");
    registerReceiver(interceptor, f);
} 
```

不要忘记在您的服务`onDestroy`方法中取消注册接收器：

```
public void onDestroy() {
    unregisterReceiver(interceptor);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T23:12:59.227

您已经在清单中定义了广播接收器，这就是为什么即使您还没有启动应用程序（或运行服务），您的应用程序仍然可以收听这些广播。要解决此问题，请在您的服务中以编程方式注册您的广播接收器，以便它仅在播放器运行时有效，而不是一直有效。

或者在您当前的接收器中，在调用开始/停止音乐方法之前，您应该检查服务是否已经在运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-31T12:08:36.373

如果您提供崩溃日志，它将有更多帮助。通过查看您的代码，一切都很好，但是当您检查 PlayerService.getInstance() not null 时，它将始终为您提供实例，只需在您要播放或停止或暂停时也应用一个 mediaplayer 对象而不是 null 检查。

希望它会帮助你。

# actionscript-3 - 构建小型 GUI 引擎：可见与 addChild/removeChild

> ID：10037262
> 
> 赞同：5
> 
> 时间：2012-04-05T23:08:13.063
> 
> 标签：actionscript-3, flash, user-interface

目前，我正在尝试一个非常简单的 GUI 绘图......“引擎”（我想你可以这么称呼它）。它的要点：

1.  有一个 FrontController 被用户请求击中；每个请求都有一个**uid**
2.  每个**uid**（读作“页面”）都有其上存在的组件（“模块”）的声明
3.  组件是**Sprite**的子类，本质上是唯一的

自然，我需要一种隐藏/显示这些精灵的方法。目前，我拥有它就像 Flex 默认拥有它一样 - 方式是“如果我们在一个 comp 可见的地方，创建它，缓存它并在每次它再次可见时重用它”。

问题是——这将是更合适和更有效的隐藏和显示方式——通过`addChild`/`removeChild`或切换`visible`。

我的看法是：

*   `visible`又快又脏（在第一次测试中）
*   `visible`不会创建一连串冒泡事件，例如`Event.ADDED`或`Event.REMOVED`
*   不可见的组件不会获得鼠标事件

当我`removeChild`确定组件将不再需要在屏幕上时（或者缓存太大，例如），我会调用它

stackoverflow'ers / AS3-crazy 的人是怎么想的？

**更新**：这是一本[很好的读物](http://www.developria.com/2008/11/visible-false-versus-removechi.html)（忘记了谷歌）。

我会坚持`visible`; 它似乎更适合我的任务；Adobe 的手册“优化 FLASH 平台的性能”，第 15 页。69给了我更多的信心。

这是我为感兴趣的人测试的代码片段：

```
package 
{
import flash.display.Sprite;
import flash.display.Stage;
import flash.events.Event;
import flash.events.KeyboardEvent;
import flash.ui.Keyboard;
import flash.utils.getTimer;

/**
 * Simple benchmark to test alternatives for hiding and showing
 * DisplayObject.
 * 
 * Use:
 * <code>
 * new DisplayBM(stage);
 * </code>
 * 
 * Hit:
 * - "1" to addChild (note that hitting it 2 times is expensive; i think
 * this is because the player has to check whether or not the comp is
 * used elsewhere)
 * - "q" to removeChild (2 times in a row will throw an exception) 
 * - "2" to set visible to true
 * - "w" to set visible to false
 * 
 * @author Vasi Grigorash
 */    
public class DisplayBM{
    public function DisplayBM(stage:Stage){
        super();

        var insts:uint = 5000;
        var v:Vector.<Sprite> = new Vector.<Sprite>(insts);
        var i:Number = v.length, s:Sprite
        while (i--){
            s = new Sprite;
            s.graphics.beginFill(Math.random() * 0xFFFFFF);
            s.graphics.drawRect(
                Math.random() * stage.stageWidth, 
                Math.random() * stage.stageHeight,
                10, 
                10
            );
            s.graphics.endFill();
            v[i] = s;
        }

        var store:Object = {};
        store[Event.ADDED] = null;
        store[Event.REMOVED] = null;
        var count:Function = function(e:Event):void{
            store[e.type]++;
        }
        var keydown:Function = function (e:KeyboardEvent):void{
            var key:String
            //clear event counts from last run
            for (key in store){
                store[key] = 0;
            }

            stage.addEventListener(Event.ADDED, count);
            stage.addEventListener(Event.REMOVED, count);

            var s0:uint = getTimer(), op:String;
            var i:Number = v.length;
            if (e.keyCode === Keyboard.NUMBER_1){
                op = 'addChild';
                while (i--){
                    stage.addChild(v[i]);
                }
            }
            if (e.keyCode === Keyboard.Q){
                op = 'removeChild';
                while (i--){
                    stage.removeChild(v[i]);
                }
            }
            if (e.keyCode === Keyboard.NUMBER_2){
                op = 'visibile';
                while (i--){
                    v[i].visible = true;
                }
            }
            if (e.keyCode === Keyboard.W){
                op = 'invisibile';
                while (i--){
                    v[i].visible = false;
                }
            }
            if (op){
                //format events
                var events:Array = [];
                for (key in store){
                    events.push(key + ' : ' + store[key])
                }

                trace(op + ' took ' + (getTimer() - s0) + ' ' + events.join(','));
            }

            stage.removeEventListener(Event.ADDED, count);
            stage.removeEventListener(Event.REMOVED, count);
        }

        //autodispatch
        stage.addEventListener(KeyboardEvent.KEY_DOWN, keydown);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T23:28:58.873

Visible 对我来说更有意义（因为删除一个孩子表示一个终结），并且是我在自己的项目中显示/隐藏时倾向于使用的。

我还假设 addChild 的性能稍差，但我没有做过任何测试。

编辑：我刚刚看到这篇 Adob​​e 文章[http://help.adobe.com/en_US/as3/mobile/WS5d37564e2b3bb78e5247b9e212ea639b4d7-8000.html](http://help.adobe.com/en_US/as3/mobile/WS5d37564e2b3bb78e5247b9e212ea639b4d7-8000.html)它指定在使用 GPU 渲染模式时只需设置 visible = false 就会产生性能影响是绘制重叠对象的成本（即使它们不可见）。相反，建议完全移除孩子：

> 尽可能避免过度绘制。过度绘制是将多个图形元素分层，以使它们相互遮蔽。使用软件渲染器，每个像素只绘制一次。因此，对于软件渲染，无论有多少图形元素在该像素位置相互覆盖，应用程序都不会导致性能损失。相比之下，硬件渲染器为每个元素绘制每个像素，无论其他元素是否遮挡了该区域。如果两个矩形相互重叠，则硬件渲染器将重叠区域绘制两次，而软件渲染器仅绘制一次该区域。
> 
> 因此，在使用软件渲染器的桌面上，您通常不会注意到过度绘制对性能的影响。但是，许多重叠的形状会对使用 GPU 渲染的设备的性能产生不利影响。最佳做法是从显示列表中删除对象，而不是隐藏它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T03:14:34.503

删除子项可以更好地减少实例、事件并从您的 Flash 电影中释放内存，您可能会发现经过一段时间后精灵可能会相互影响。从它们的绘制方式或那里的侦听器来看，当此方法使用时，垃圾收集通常会发挥作用最终可以与您的应用程序一起实施

Visible 仍然在内存中有精灵，它只是当前没有绘制。您也可以保存精灵然后删除它，然后在需要时重新加载它，这将是所有解决方案的理想选择。使用数组存储数据是另一种解决方案，也取决于您的应用程序是如何实现的，很难说，因为我们不知道，哈哈

添加孩子的表演我会说压力较小，因为它仍然是唯一添加的项目与隐藏的倍数。此外，在这些隐藏的孩子中，属性与听众一起存储在内存中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-24T00:07:07.547

以下是 Moock 关于该主题的一些硬数据：http: [//www.developria.com/2008/11/visible-false-versus-removechi.html](http://www.developria.com/2008/11/visible-false-versus-removechi.html)

```
 Children on the                     Single-frame 
                  Display List    .visible   .alpha   Elapsed Time (ms)
No Children       0               --         --       4
Non-visible       1000            false      1        4
Zero Alpha        1000            true       0        85
Fully Visible     1000            true       1        1498
90% Transparent   1000            true       .1       1997 
```

# android - android 平板电脑模拟器不是以 1024 ram 大小开始的

> ID：10037264
> 
> 赞同：2
> 
> 时间：2012-04-05T23:08:34.513
> 
> 标签：android, android-emulator, ram

为了提高性能，我想为平板电脑模拟器分配 1024 MB RAM。问题是它不会启动，即当我在虚拟设备管理器中单击开始时没有显示窗口/控制台。如果我让设备恢复到默认的 256 MB，它就会启动。我怎样才能解决这个问题？

我正在使用带有 Intel i7-2.2 GHz 和 8 GB RAM DDR3 的 Windows 7 Ultimate。它曾经在 32 位 Windows 上运行良好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T14:03:25.787

我知道这不是对您提出的特定问题的回答，但它可能有助于解决根本问题：您可以通过切换到 x86 版本来提高模拟设备的性能。

Android 模拟器对我来说一直很慢，即使在具有 8 GB RAM 的四核设备上也是如此，所以我开始关注[Android x86](http://www.android-x86.org/documents/virtualboxhowto)项目。不久前，我终于开始尝试设置它，而且比我预想的要容易——而且速度非常*非常*快。

如果您安装了 VirtualBox，您所要做的就是从项目网站下载 eeepc.iso（对于您喜欢的任何 Android 版本），在 VirtualBox 中为它创建一个 VM，无论您希望它拥有多少 RAM，然后启动它. 从菜单中选择 VESA 模式，禁用 VM 上的鼠标集成，并跳过 google 帐户登录过程。你会很高兴去的。

然后只需为 ADB 设置从 guest:5555 到 localhost:whatever-port-you-choose 的端口转发，并将 ADB 指向 localhost:whatever-port-you-choose，它会比附带的 ARM 模拟器更好用使用 SDK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T16:55:47.990

我禁用了相机支持，我可以使用**1024MB 的 RAM**。

# android - 菜鸟帮助；设置安卓环境

> ID：10037268
> 
> 赞同：1
> 
> 时间：2012-04-05T23:09:01.923
> 
> 标签：android, sdk, installation

尝试安装 jdk-6u31-windows-i586 和 eclipse-java-galileo-SR2-win32 和 android-sdk_r17-windows 尝试添加

> 无法完成安装，因为找不到一项或多项所需项目。正在安装的软件：Android Development Tools 17.0.0.v201203161636-291853 (com.android.ide.eclipse.adt.feature.group 17.0.0.v201203161636-291853) 缺少要求：Android Development Tools 17.0.0.v201203161636-291853 ( com.android.ide.eclipse.adt.feature.group 17.0.0.v201203161636-291853) 需要 'org.eclipse.ui 3.6.0' 但找不到

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T23:35:36.730

从[ADT 插件站点](http://developer.android.com/sdk/eclipse-adt.html#notes)：

> ADT 17 - 依赖项：[..] ADT 17.0.0 需要 Eclipse Helios（版本 3.6.2）或更高版本。

Eclipse Galileo 太旧且不受支持。选择一个较新的版本*（Indigo，它是最新的，对我来说很好用）*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T23:36:30.483

Eclipse 3.6 是 Helios，而 Eclipse 3.5 是 Galileo；您正在安装的 ADT 版本似乎需要 3.6 或更高版本。3.7现在稳定了。

# javascript - 更改 html 下载的名称

> ID：10037273
> 
> 赞同：1
> 
> 时间：2012-04-05T23:09:53.040
> 
> 标签：javascript, html, download

```
<a href="original_filename.pdf">Download this file</a> 
```

将文件名保存为 original_filename.pdf。如果我想在下载之前重命名文件怎么办？

我希望有一个客户端解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-14T13:04:13.007

HTML5 规范允许在链接上设置一个名为“下载”的属性。

[http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#attr-hyperlink-download](http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#attr-hyperlink-download)

> 如果存在该`download`属性，则表明作者打算将超链接用于下载资源。属性可能有值；该值（如果有）指定作者推荐用于标记本地文件系统中的资源的默认文件名。允许的值没有限制，但作者提醒大多数文件系统对文件名支持的标点符号有限制，用户代理可能会相应地调整文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T22:00:16.997

解决了[重复的问题](https://stackoverflow.com/a/10049272/1255842)。

```
Content-Disposition: attachment; filename=somecustomname.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T23:12:06.437

我认为这不容易。当然，您可以在下载文件后重命名文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T23:14:05.013

除了在服务器上重命名它或告诉人们右键单击并选择“另存为”之外，我唯一能想到的就是创建一个临时副本，您可以以不同的名称提供下载。付出了巨大的努力，却一无所获。

# html - 如何使溢出：滚动 div 与其容器的高度相同？里面的细节

> ID：10037276
> 
> 赞同：0
> 
> 时间：2012-04-05T23:10:28.890
> 
> 标签：html, css, position, overflow

我有一个包含两列的网站，在一个包装器 div 中。

包装器具有与最高 div 相同的高度，方法是提供浮动所有内容并提供包装器`height:100%`。

这是我的问题：其中一列是一个带有溢出的 div:scroll 和几个图像。我试图将它的高度设置为 100%，认为它会占据包装器的整个高度。相反，它变成了所有图像相互叠加的高度。

如果我将带有图像 ( ) 的列的高度设置为`#rightbox`以像素为单位的特定高度，就会发生[这种](http://i.stack.imgur.com/arvio.png)情况。

我希望它与其他带有文本的 div 具有相同的高度，因此我将其高度设置为 100%。然后发生[这种](http://i.stack.imgur.com/oJ39h.png)情况。

如何使两列具有相同的高度？

编辑：我忘了提到文本的数量会有所不同，所以我无法为包装器定义特定的高度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T23:47:27.613

`100%`除非您的父母提供实际高度，否则您不能将高度定义为。

```
#wrapper {
   height: 800px;
}

/* Now you can make the columns inside take the full height of its parent *?
#wrapper .columns {
   height: 100%;
   overflow: auto;
} 
```

**注意：**如果包装器位于`body`元素内部，那么您需要先设置`html,body { height: 100%; }`包装器才能设置为`100%`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T23:42:13.780

鉴于提供的代码数量有限......这里是一个纯 css 解决方案。

[http://jsfiddle.net/rlemon/Q7MvS/](http://jsfiddle.net/rlemon/Q7MvS/)

```
.wrapper {
 height: 600px;
 width: 800px;   
}
.panel {
 float: left;
 width: 400px;  
 height: 100%;    
}
.panel.right {
 overflow: scroll;
} 
```

​</p>

# python - 如果元组被描述为序列类型，为什么长度为 1 的元组被视为标量？

> ID：10037277
> 
> 赞同：1
> 
> 时间：2012-04-05T23:10:33.047
> 
> 标签：python, list, operators, tuples

我刚刚开始学习 Python，并`in`在解释器中玩弄运算符并发现了一些有趣的东西。为什么会这样`False`：

```
# case 1
>>> [1] in [1,2,3]
False 
```

但这些是`True`？

```
# case 2
>>> [1] in [[1],2,3]
True

# case 3
>>> (1) in [(1),2,3]
True

# case 4
>>> (1) in [1,2,3]
True

# case 5
>>> 1 in [(1),2,3]
True 
```

我可以理解为什么 #1 是`False`，因为`[1]`它是一个列表对象并且它不会出现在列表中`[1,2,3]`。我也明白为什么 #2 是`True`. 但是，如果元组是不可变的列表（正如 Norm Matloff 在他的[教程](http://heather.cs.ucdavis.edu/~matloff/python.html)中描述的那样）或者是不可变的序列（如 TUPLES 的 Python 文档所述），为什么`(1)`等同于`1`而不是`[1]`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T23:11:29.617

括号不构成元组，逗号可以。

```
>>> (1)
1
>>> (1,)
(1,) 
```

所以你在哪里`(1)`，它实际上只是意味着`1`。

```
>>> (1,) in [1,2,3]
False 
```

# python - 从 1 个单词的字符串中提取一个数字

> ID：10037279
> 
> 赞同：5
> 
> 时间：2012-04-05T23:11:12.470
> 
> 标签：python, python-3.x

在我尝试制作的这个程序中，我有一个表达式（例如“I = 23mm”或“H = 4V”），我试图从中提取23（或4），这样我就可以把它变成一个整数。

我一直遇到的问题是，由于我试图从中取出数字的表达式是 1 个单词，所以我不能使用 split() 或任何东西。

我看到但不起作用的一个例子是 -

```
I="I=2.7A"
[int(s) for s in I.split() if s.isdigit()] 
```

这不起作用，因为它只需要数字由空格分隔。如果单词 int078vert 中有一个数字，它不会提取它。另外，我的没有空间来分隔。

我试过一个看起来像这样的，

```
re.findall("\d+.\d+", "Amps= 1.4 I") 
```

但它也不起作用，因为传递的数字并不总是 2 位数。它可能是 5 或 13.6 之类的东西。

我需要编写什么代码，以便如果我传递一个字符串，例如

```
I="I=2.4A" 
```

或者

```
I="A=3V" 
```

这样我只能从这个字符串中提取数字吗？（并对其进行操作）？没有空格或其他可以分隔的常量字符。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-05T23:19:52.977

```
>>> import re
>>> I = "I=2.7A"
>>> s = re.search(r"\d+(\.\d+)?", I)
>>> s.group(0)
'2.7'
>>> I = "A=3V"
>>> s = re.search(r"\d+(\.\d+)?", I)
>>> s.group(0)
'3'
>>> I = "I=2.723A"
>>> s = re.search(r"\d+(\.\d+)?", I)
>>> s.group(0)
'2.723' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T00:38:48.757

RE 可能对此有好处，但由于已经发布了一个 RE 答案，我将采用您的非正则表达式示例并对其进行修改：

* * *

```
One example I saw but wouldnt work was - 

I="I=2.7A"
[int(s) for s in I.split() if s.isdigit()] 
```

* * *

好处是`split()`可以接受争论。试试这个：

```
extracted = float("".join(i for i in I.split("=")[1] if i.isdigit() or i == ".")) 
```

顺便说一下，这是您提供的 RE 的细分：

```
"\d+.\d+"
\d+ #match one or more decimal digits
. #match any character -- a lone period is just a wildcard
\d+ #match one or more decimal digits again 
```

一种方法（正确）是：

```
"\d+\.?\d*"
\d+ #match one or more decimal digits
\.? #match 0 or 1 periods (notice how I escaped the period)
\d* #match 0 or more decimal digits 
```

# cruisecontrol.net - 有没有办法在特定时间停止巡航控制处理？

> ID：10037285
> 
> 赞同：1
> 
> 时间：2012-04-05T23:11:59.187
> 
> 标签：cruisecontrol.net, clearcase

我正在尝试使用我们的 ClearCase 源代码控制来实现 Cruisecontrol.net。ClearCase 存储库有时不可用。（计划的备份时间）。有没有办法告诉 Cruisecontrol.net 在停电期间不要处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T23:55:50.673

最简单的方法是，根据 CC Server 端 ClearCase 的可用性，为每个[CCNet Build 循环设置一个变量。](http://cruisecontrol.sourceforge.net/main/index.html)

确保 ClearCase 正确备份的方法之一是停止 albd（Atria 位置代理服务）。
对于所有类型的 ClearCase 命令，如`cleartool lsview myView`.

我没有特定的 CCNet 方式来做到这一点，但至少你有一个明确的方式来确定 ClearCase 是否停止以进行备份。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T07:35:20.887

如果您知道 ClearCase 不可用的时间，那么[cron 触发器](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Cron_Trigger)应该可以解决问题。[您可以使用带参数的多触发器](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Multi_Trigger)子句将其与另一个触发器组合`And`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T20:02:57.970

我通过使用包含“过滤器触发器”和“间隔触发器”的多触发器解决了这个问题。过滤器触发器用于定义中断时间段，间隔触发器与源代码控制结合使用以确定是否需要构建。

# python - 使用 Python 和 lxml 从 HTML 中删除类属性

> ID：10037289
> 
> 赞同：18
> 
> 时间：2012-04-05T23:12:12.220
> 
> 标签：python, html, lxml

# 问题

如何使用 python 和 lxml 从 html 中删除类属性？

## 例子

我有：

```
<p class="DumbClass">Lorem ipsum dolor sit amet, consectetur adipisicing elit</p> 
```

我想：

```
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit</p> 
```

## 到目前为止我尝试过的

我已经检查了[lxml.html.clean.Cleaner](http://lxml.de/api/lxml.html.clean.Cleaner-class.html)但是，它没有去除类属性的方法。但是，您可以设置`safe_attrs_only=True`，这不会删除类属性。

重要的搜索没有发现任何可行的方法。`class`我认为在 html 和 python 中都使用的事实进一步混淆了搜索结果。许多结果似乎也严格处理 xml。

我也对提供人性化界面的其他 python 模块持开放态度。

非常感谢。

* * *

# 解决方案

感谢@Dan Roberts 下面的回答，我想出了以下解决方案。为将来到达这里尝试解决相同问题的人们提供。

```
import lxml.html

# Our html string we want to remove the class attribute from
html_string = '<p class="DumbClass">Lorem ipsum dolor sit amet, consectetur adipisicing elit</p>'

# Parse the html
html = lxml.html.fromstring(html_string)

# Print out our "Before"
print lxml.html.tostring(html)

# .xpath below gives us a list of all elements that have a class attribute
# xpath syntax explained:
# // = select all tags that match our expression regardless of location in doc
# * = match any tag
# [@class] = match all class attributes
for tag in html.xpath('//*[@class]'):
    # For each element with a class attribute, remove that class attribute
    tag.attrib.pop('class')

# Print out our "After"
print lxml.html.tostring(html) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-05T23:27:48.810

我目前无法对此进行测试，但这似乎是一般的想法

```
for tag in node.xpath('//*[@class]'):
    tag.attrib.pop('class') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-11-24T15:14:03.387

lxml.html.clean.Cleaner 确实有效，但需要适当的配置。

```
import lxml.html
from lxml.html import clean

html_string = '<p id="test" class="DumbClass">Lorem ipsum dolor sit amet, consectetur adipisicing elit</p>'
tree = html.fromstring(html_string)

cleaner = html.clean.Cleaner()
cleaner.safe_attrs_only = True
cleaner.safe_attrs=frozenset(['id'])
cleaned = cleaner.clean_html(tree)
print(html.tostring(cleaned)) 
```

导致 ：

```
b'<p id="test">Lorem ipsum dolor sit amet, consectetur adipisicing elit</p>' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-28T08:52:18.577

对于`lxml`elment，`.attrib`对象包含属性的dict，您可以随意`del`使用。

下面只是一个简单的例子来展示如何替换 html 中的属性名称。

给定`html`：

```
<div><img src="http://www.example.com/logo.png"></div> 
```

代码：

```
from lxml.html import fromstring
from lxml.html import _transform_result

html = "<div><img src=\"http://www.example.com/logo.png\"></div>"
doc = fromstring(html)
for el in doc.iter('img'):
    if "src" in el.attrib:
        el.set('data-src', el.get('src'))
        del el.attrib["src"]
print _transform_result(type(html), doc) 
```

结果：

```
<div><img data-src="http://www.example.com/logo.png"></div> 
```

# c# - 正则表达式：匹配字符集特定次数

> ID：10037290
> 
> 赞同：8
> 
> 时间：2012-04-05T23:12:12.913
> 
> 标签：c#, regex, notepad++

好的，所以这可能是一个可笑的愚蠢问题，但我似乎找不到可行的答案，所以如果答案很明显，请原谅我的无知。我想要的只是一个正则表达式，它将精确匹配一个十六进制值 8 次。所以我尝试了这样的事情：

**我的正则表达式：**

```
 [0-9a-fA-F]{8} 
```

**样本输入：**

```
 D651000000060D60FADF0DFCE080E020636263633534623231386339 
```

**示例失败输入（当我不想要它时，我给定的正则表达式匹配）：**

```
 ........@%........$dc073bcc-6aa5 
```

然而由于某种原因，这对我不起作用。据我了解，`{8}`应该匹配前面的正则表达式 8 次......但这似乎在 C# 或 notepad++ 中都不起作用。

提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-05T23:23:29.773

你的问题有点令人困惑，如果你想要 6 个十六进制字符，8 次：

`([0-9a-fA-F]{6}){8}`

或 8 位十六进制字符：

`[0-9a-fA-F]{8}`或者`[0-9a-fA-F]{4,8}` 如果您不想要求 8 个字符。

我建议测试：

[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)

如果这些不明白，您能否发布您尝试匹配的值的示例（请注意，如果您在记事本++ 中的多行中有这些值，您还需要寻找换行符）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-08T21:03:28.960

更直接的答案！为了简单起见，我将在这些示例中使用的**字符集都是***从 0 到 9 的数字*。

*   **匹配所有数字，8 次：** `[0-9]{8}`
*   **匹配所有数字，8 次或更多：（** `[0-9]{8}[0-9]*`先匹配 8 次，然后匹配任意次数）

你可以在这里测试：[https ://regexr.com/](https://regexr.com/)

# asp.net - 将 ASP.NET 控件与 CSS 相结合

> ID：10037293
> 
> 赞同：0
> 
> 时间：2012-04-05T23:12:51.410
> 
> 标签：asp.net, css

我对网站设计相对较新，特别是在 ASP.NET 中工作，我正在使用 CSS 来设置我的网站的样式，但是当我使用 ASP.NET 控件（如 GridView、导航控件等）时……它们被样式表弄乱了, 在你运行网站之前你是看不到的, 因为控件被翻译成 HTML 并且受到 CSS 的影响, 你无法预测, 如何解决这个问题, 有没有更好的布局和ASP.NET 中的设计站点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T23:17:25.913

您可以使用[ControlAdapters](http://msdn.microsoft.com/en-us/magazine/cc163543.aspx)或更好地使用 ASP.NET MVC

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T23:24:57.487

一个对我很有效的好方法是为您的 ASP.NET 控件创建外观。

[http://msdn.microsoft.com/en-us/library/ykzx33wh.aspx](http://msdn.microsoft.com/en-us/library/ykzx33wh.aspx)

[http://www.asp.net/web-forms/videos/how-do-i/how-do-i-use-skins-with-css-for-a-flexible-and-maintainable-aspnet-web-地点](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-use-skins-with-css-for-a-flexible-and-maintainable-aspnet-web-site)

在为我的 ASP.NET 控件的不同部分创建皮肤和 CSS 类之后，我将在具有良好开发工具的浏览器中运行我的应用程序，Google Chrome 有一组出色的开发工具，允许你修改你的 css 类和样式就在页面中，因此您可以立即看到结果。然后，我将更新我的 Skin CSS 类以匹配我使用浏览器开发工具创建的样式。

# c++ - dynamic_cast 中的模棱两可的转换

> ID：10037295
> 
> 赞同：5
> 
> 时间：2012-04-05T23:12:56.177
> 
> 标签：c++, templates, dynamic-cast

考虑获取一个对象作为参数并打印其类型的问题：

```
#include <iostream>

class A { };
class B : public A { };
class C : public A { };
class D : public C, public B { };

using namespace std;

template<class T>
void print_type(T* info)
{
    if(dynamic_cast<D*>(info))
        cout << "D" << endl;
    else if(dynamic_cast<C*> (info))
        cout << "C" << endl;
    else if(dynamic_cast<B*>(info))
        cout << "B" << endl;
    else if(dynamic_cast<A*> (info))
        cout << "A" << endl;
}

int main(int argc, char** argv)
{
    D d;
    print_type(&d);
    return 0;
} 
```

它给了我以下错误：“*从派生类 'D' 到基类的模糊转换*。”
但是我看不出哪里有歧义：如果 main(d) 中声明的对象是 D 类型，为什么不能直接转换为 A 类型？

另外，如果我传递一个字符串类型的参数，我当然会得到其他错误：
*`'std::basic_string<char>' is not polymorphic`*

在 Java 中，泛型有如下语法：`<T extends A>`; 在这种情况下，它会很有用。如何在 C++ 中使用模板制作类似的东西？

* * *

我以这种方式修改了代码：

```
#include <iostream>
#include <vector>

class A { };
class B : virtual public A { };
class C : virtual public A { };
class D : public C, public B { };

using namespace std;

template<class T>
void print_type(T* info)
{
    if(dynamic_cast<D*>(info))
        cout << "D" << endl;
    else if(dynamic_cast<C*> (info))
        cout << "C" << endl;
    else if(dynamic_cast<B*>(info))
        cout << "B" << endl;
    else if(dynamic_cast<A*> (info))
        cout << "A" << endl;
}

int main(int argc, char** argv)
{
    string str;
    print_type(&str);
    return 0;
} 
```

但我仍然得到错误：*`'std::basic_string<char>' is not polymorphic`*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T23:21:03.333

首先，这不是模板问题。如果您删除模板并只`print_type`使用 a `D*`，您会看到错误仍然存​​在。

发生的事情是您*不*使用虚拟继承，因此您会遇到这种情况：

```
A   A
|   | 
B   C
 \ /
  D 
```

dynamic_cast 不知道您指的是**哪个。** `A`

为了实现这一点：（我认为这是你想要的）

```
 A
 / \
B   C
 \ /
  D 
```

...您应该使用**[虚拟继承](http://www.cprogramming.com/tutorial/virtual_inheritance.html)**，因此：

```
class A
{
};

class B : virtual public A
{
};

class C : virtual public A
{
};

class D : public C,public B
{
}; 
```

...现在它编译没有问题:)（请记住，虚拟继承是邪恶的）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T23:19:43.747

这被称为[*致命的死亡钻石*](http://en.wikipedia.org/wiki/Diamond_problem)，或者简称为钻石问题。通往 A 的“路径”可以通过 B 或 C，因此存在潜在的矛盾。

此外，模板的想法是使其通用，而不是类型感知。模板本身不是编译代码，它是针对其使用进行编译的。这很像一个大宏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T23:41:32.423

> 考虑获取一个对象作为参数并打印它的类型的问题：

叹息...使用 RTTI。

```
#include <iostream>
#include <string>
#include <typeinfo>

template<class T> void print_type(const T& info){
    std::cout << typeid(info).name() << std::endl;
}

int main(int argc, char** argv){
    D d;
    int a = 3;
    std::string test("test");
    print_type(d);
    print_type(a);
    print_type(test);
    return 0;
} 
```

# grails - 在 Grails 中保护用户的控制器操作

> ID：10037297
> 
> 赞同：1
> 
> 时间：2012-04-05T23:13:01.010
> 
> 标签：grails, spring-security, grails-plugin

我在一个项目中使用 Grails 安全插件。我正在使用控制器操作上的注释来限制对某些类别的用户的访问，例如“ROLE_ADMIN”或“ROLE_USER”。

（以此作为我正在做的事情的基础：http: [//grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/5%20Configuring%20Request%20Mappings%20to%20Secure% 20URLs.html#5.1%20Defining%20Secured%20Annotations](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/5%20Configuring%20Request%20Mappings%20to%20Secure%20URLs.html#5.1%20Defining%20Secured%20Annotations) )

我的问题是，我如何限制一个操作，以便用户只能看到关于他们自己的信息。例如，假设我有一个 id = 1 的用户。如果我有一个显示用户信息的操作：

```
mySite/User/Show/1 
```

如何防止 id=1 的同一用户访问

```
mySite/User/Show/2 
```

? 有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T20:28:19.920

如果要将相同的逻辑应用于多个操作，也可以使用 Grails 控制器拦截器

```
class SomeController {

 def beforeInterceptor = [action: this.&checkUser ] 

   def springSecurityService

def checkUser() {
    User user = User.get(params)
       User logged = User.get(springSecurityService.principal.id)
       if (user.id != logged.id) {
   {
       redirect(action: "accessDenied", controller='access' id: params.long("id")) //re-direct accessDenied page
   return false
   }
    return true;
} 
```

}

```
 Class AccessController{
     def accessDenied= {

        render(view: "accessDenied")

    }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T01:02:35.190

以下会有什么问题？：

```
class SomeController {
    springSecurityService
    // other stuf ...
    def show () {
       User user = User.get(params)
       User logged = User.get(springSecurityService.principal.id)
       if (user.id != logged.id) {
          flash.message = "You can't see the profile of other users"
          redirect action:"list" // You can redirect to other controller/action
          return //Since grails 2 this is needed
       }
       // Logic for display your user
    }
    // other stuf ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T18:48:18.953

我不同意您需要重新定义业务逻辑与安全逻辑。这是一个常见的用例，授权应该涵盖它。这就是 Grails 有过滤器的原因。使用授权过滤器添加如下功能：

```
class AuthorizationFilters {
    def filters = {
        userCheck(controller: 'user', action: '*') {
            before = {
                // Check current user id is param.id here
            }
        }
    }
} 
```

因此，您的安全逻辑在您的控制器之外。您可以添加其他控制器，如果它们传入用户 ID，甚至可以在此处检查域类是否由当前用户拥有的其他方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T00:59:54.317

您要问的是您的业务规则的一部分。所以你应该在你的代码中处理这些场景，而不是寻找一些插件或帮助代码。

为此，您可以做的是，确保访问用户详细信息的用户的 ID 与被询问详细信息的用户的 ID 相同。

您也可以在对象级别进行此检查，但这意味着对数据库进行额外查询以获取用户详细信息。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T13:21:36.590

我必须同意您正在尝试实施具有安全方面的业务规则。如果用户创建了某种文档，您不会使用授权来选择他们的个人资料页面上可见的内容，对吗？

您必须在授权方面达到的位置和业务规则的开始位置划清界限。

根据我的经验，为了避免模糊界限，我总是使用授权角色作为与一组功能相关联的用户类型。特定的用户类型可以访问一系列故事或用例。这些用例仅限于特定角色。

如果您开始询问有关数据可见性的问题（页面上隐藏的内容，取决于任何业务因素），那么您应该远离您的安全框架

# mysql - 是否有理由不在mysql中使用<=>（空安全等于运算符）而不是=？

> ID：10037298
> 
> 赞同：14
> 
> 时间：2012-04-05T23:13:03.673
> 
> 标签：mysql, null, operators, equals, equals-operator

MySQL 提供了一个很好的运算符`<=>`，可以处理可能包含 null 的比较，例如`null <=> null`or`null <=> 5`等​​。与许多编程语言一样，返回直观的结果。而普通的 equals 运算符总是只返回 null，这让许多新的 MySQL 用户（比如我自己）犯了错误。

是否有原因 MySQL 两者兼而有之，而不仅仅是其中的功能`<=>`？谁真正需要使用内置语言类型有效地未定义的运算符？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-09T14:01:17.810

> 谁真正需要使用内置语言类型有效地未定义的运算符？

您要求提供一些真实世界的示例。这是一个虚假的。假设您有一个住宿青年计划或类似项目，其中一个要求是孩子们只能与同性的人共用一个房间。您的数据库中有一个可为空的 M/F 字段 - 可以为空，因为您的数据馈送不完整（您仍在追踪一些数据）。你的房间匹配代码绝对不应该匹配 t1.Gender<=>t2.Gender 的学生，因为它最终可能匹配两个性别未知的孩子，他们可能是异性。相反，您匹配它们相等而不是两者都为空的位置。

这只是一个例子。我承认这些年来操作符`NULL`和`=`操作符的行为引起了很多混乱，但归根结底，错误可能在于过多的在线 MySQL 教程，没有提及如何`NULL`与操作符交互，也没有提及操作符的存在`<=>`。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-05T23:19:20.033

mySQL 和编程语言中的 null 之间的最大区别在于，在 mySQL 中，null 表示**未知**值，而在编程中它表示**未定义**值。

在 mySQL 中，null 不等于 null（未知不等于未知）。在编程语言中，null 确实等于 null（未定义等于未定义）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-17T09:33:09.793

> 谁真正需要使用内置语言类型有效地未定义的运算符？

您还需要它来处理数据库内的关系。特别是如果您使用外键约束。

例如，如果您有一个任务表（在您的公司中）。然后您将这些任务分配给员工。所以你有一个从你的任务表到你的员工表的关系。
并且总会有一些未分配的任务。在这种情况下，您用于与员工表的关系的任务表中的字段将包含`NULL`. 这将确保该任务未分配。这意味着：不可能与employees表有关系。

如果`NULL = NULL`是`true`，那么在我的示例中，员工表中的外键总是有可能也是`NULL`。因此，该任务将分配给一名或几名员工。而且您永远无法确定某项任务是否已分配给某个员工。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-05T23:28:40.667

> MySql 两者兼有而不仅仅是 <=> 中的功能是否有原因？运营商完全不同。

`<=>`像运算符一样执行相等比较`=`，但返回`1`而不是`NULL`如果两个操作数都是`NULL`，`0`而不是`NULL`如果一个操作数是`NULL`。

> 谁真正需要使用内置语言类型有效地未定义的运算符？

这个要看具体情况，你没遇到过这种情况，不代表没人需要。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-06-23T13:22:00.040

是的。

这一定是因为关系数据库使用了[三值逻辑](https://en.wikipedia.org/wiki/Three-valued_logic)（`TRUE`, `NULL`, `FALSE`）的理论。

三值逻辑必须如此工作，因为它必须是内部一致的。

它遵循数学规则。

[与 NULL 和三值逻辑的比较](https://en.wikipedia.org/wiki/Null_(SQL)#Comparisons_with_NULL_and_the_three-valued_logic_.283VL.29)

# http - gawk 在没有超时的情况下通过管道读取二进制数据的最后一位？

> ID：10037301
> 
> 赞同：2
> 
> 时间：2012-04-05T23:13:34.020
> 
> 标签：http, awk, wget, gawk

我有一个已经用 gawk 编写的程序，它可以从互联网上下载很多小信息。（媒体扫描仪和索引器）

目前它启动 wget 来获取信息。这很好，但我想*简单地*重用调用之间的连接。程序的运行可能会对同一个 api 服务进行 200-2000 次调用。

我刚刚发现 gawk 可以做网络并找到[geturl](http://www.gnu.org/software/gawk/manual/gawkinet/html_node/GETURL.html) 但是该页面底部的建议很受重视，我找不到一种简单的方法来阅读最后一行并保持连接打开。

由于我主要读取 JSON 数据，我可以设置 RS="}" 并在正文长度达到预期的内容长度时退出。不过，这可能会与任何尾随空格中断。我想要一个更强大的方法。有没有人有更好的方法来实现在 awk 中保持连接打开的零星 http 请求。目前我有以下结构......

```
con="/inet/tcp/0/host/80";

send_http_request(con);

RS="\r\n";

read_headers();

# now read the body - but do not close the connection...
RS="}"; # for JSON
while ( con |& getline bytes ) {
    body = body bytes RS;
    if (length(body) >= content_length) break;
    print length(body);
}
# Do not close con here - keep open 
```

可惜这件小事似乎破坏了这里的所有潜力。万一有人问:) ..

*   最初选择 awk 是出于历史原因——当时这个嵌入式平台上没有太多其他语言选项。
*   提前收集所有 URL 并传递给 wget 并不容易。
*   在 perl/python 等中重新实现不是一个快速的解决方案。
*   我已经研究过尝试将 url 传送到命名管道并进入 wget -i - ，但这是行不通的。数据被缓冲，并且 unbuffer 不可用 - 我认为 wget 在处理之前收集所有 URL 直到 EOF。
*   数据很小，因此缺乏压缩不是问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T00:25:44.627

连接重用的问题来自 HTTP 1.0 标准，而不是 gawk。要重用连接，您必须[使用 HTTP 1.1 或尝试其他一些 HTTP 1.0 的非标准解决方案](http://en.wikipedia.org/wiki/HTTP_persistent_connection)。不要忘记`Host:`在您的 HTTP/1.1 请求中添加标头，因为它是强制性的。

在阅读响应正文时，您对缺乏稳健性的看法是正确的。对于面向线路的协议，这不是问题。此外，即使在使用 HTTP 1.1 时，如果您的脚本在不应该等待更多数据时锁定等待更多数据，服务器将再次由于不活动而关闭连接。

作为最后的手段，你可以用你喜欢的任何语言编写你自己的 HTTP 检索器，它重用连接（我认为都是到同一个远程主机）并且还为你插入一个特殊的记录分隔符。然后，您可以[从 awk 脚本](http://www.gnu.org/software/gawk/manual/html_node/Two_002dway-I_002fO.html#Two_002dway-I_002fO)中控制它。

# backbone.js - 骨干事件未触发和有关框架使用的一般反馈

> ID：10037303
> 
> 赞同：2
> 
> 时间：2012-04-05T23:13:44.360
> 
> 标签：backbone.js

我对backbone.js 很陌生，我有点挣扎。我想出了一种从服务器（以 json 格式）成功获取数据到屏幕上的方法，但我这样做是正确/最好的方法吗？

我所有的视图都设置了this.el，但视图的事件没有触发（）......最好的前进方式是什么？

这是代码：

```
var surveyUrl = "/api/Survey?format=json&callback=?";

AnswerOption = Backbone.Model.extend({});

AnswerOptionView = Backbone.View.extend({

    initialize: function () {
        _.bindAll(this, 'updateCheckedState');
    },

    events: {
        "click .answerOptionControl": "updateCheckedState" //still noy firing :-(
    },

    render: function() {
        this.model.get('answerOption').questionChoiceType = this.model.get('questionChoiceType');
        var template = _.template($("#questionAnswerOptionTemplate").html(), this.model.get('answerOption'));

        $(this.el).html(template);
        return this;
    },

    updateCheckedState: function(e) {
        alert("Here is my event origin: " + e.target)
    }
});

Question = Backbone.Model.extend({});

QuestionView = Backbone.View.extend({
    render: function() {

        var template = _.template($("#questionTemplate").html(), this.model.get('question'));
        $(this.el).html(template);

        /*validator code removed*/

        for (var i = 0; i < this.model.get('question').answerOptions.length; i++) {
            var qModel = new AnswerOption({
                answerOption: this.model.get('question').answerOptions[i]
            });

            var view = new AnswerOptionView({ model: qModel });

            this.$('fieldset').append(view.render().el.innerHTML);
        }

        return this;
    }
});

Survey = Backbone.Model.extend({
    url: function () { return this.get("id") ? surveyUrl + '/' + this.get("id") : surveyUrl; }
});

SurveyList = Backbone.Collection.extend({
    model: Survey,
    url: surveyUrl
});

SurveyView = Backbone.View.extend({
    initialize: function () {
        _.bindAll(this, 'render');
        this.model.bind('refresh', this.render);
        this.model.bind('change', this.render);
    },

    // Re-render the contents
    render: function () {
        for (var i = 0; i < this.model.attributes[0].questions.length; i++) {

            var view = new QuestionView();
            var qModel = new Question({
                question: this.model.attributes[0].questions[i]
            });

            view.model = qModel;
            $(this.el).append(view.render().el.innerHTML);
        }

        this.el.trigger('create');
    }
});

$(document).ready(
function () {
    aSurvey = new Survey({ Id: 1 });
    window.App = new SurveyView({ model: aSurvey, el: $("#questions") });
    aSurvey.fetch();
}); 
```

-html

```
<body>
    <div id="questions"></div>
    <!-- Templates -->
    <script type="text/template" id="questionAnswerOptionTemplate">
        <input name="answerOptionGroup<%= questionId %>" id="answerOptionInput<%= id %>" type="checkbox" class="answerOptionControl"/> 
        <label for="answerOptionInput<%= id %>"><%= text %></label> 
    </script>
    <script type="text/template" id="questionTemplate">
        <div id="question<%=id %>" class="questionWithCurve">
            <h1><%= headerText %></h1>
            <h2><%= subText %></h2>
            <div data-role="fieldcontain" id="answerOptions<%= id %>" >
                <fieldset data-role="controlgroup" data-type="vertical">
                    <legend> </legend>
                </fieldset>
            </div>
        </div>
    </script>
</body> 
```

以及来自服务器的 JSON：

```
? ({
    "name": "Survey",
    "questions": [{
        "surveyId": 1,
        "headerText": "Question 1",
        "subText": "subtext",
        "type": "Choice",
        "positionOrder": 1,
        "answerOptions": [{
            "questionId": 1,
            "text": "Question 1 - Option 1",
            "positionOrder": 1,
            "id": 1,
            "createdOn": "\/Date(1333666034297+0100)\/"
        }, {
            "questionId": 1,
            "text": "Question 1 - Option 2",
            "positionOrder": 2,
            "id": 2,
            "createdOn": "\/Date(1333666034340+0100)\/"
        }, {
            "questionId": 1,
            "text": "Question 1 - Option 3",
            "positionOrder": 3,
            "id": 3,
            "createdOn": "\/Date(1333666034350+0100)\/"
        }],
        "questionValidators": [{
            "questionId": 1,
            "value": "3",
            "type": "MaxAnswers",
            "id": 1,
            "createdOn": "\/Date(1333666034267+0100)\/"
        }, {
            "questionId": 1,
            "value": "1",
            "type": "MinAnswers",
            "id": 2,
            "createdOn": "\/Date(1333666034283+0100)\/"
        }],
        "id": 1,
        "createdOn": "\/Date(1333666034257+0100)\/"
    }, {
        "surveyId": 1,
        "headerText": "Question 2",
        "subText": "subtext",
        "type": "Choice",
        "positionOrder": 2,
        "answerOptions": [{
            "questionId": 2,
            "text": "Question 2 - Option 1",
            "positionOrder": 1,
            "id": 4,
            "createdOn": "\/Date(1333666034427+0100)\/"
        }, {
            "questionId": 2,
            "text": "Question 2 - Option 2",
            "positionOrder": 2,
            "id": 5,
            "createdOn": "\/Date(1333666034440+0100)\/"
        }, {
            "questionId": 2,
            "text": "Question 2 - Option 3",
            "positionOrder": 3,
            "id": 6,
            "createdOn": "\/Date(1333666034447+0100)\/"
        }],
        "questionValidators": [{
            "questionId": 2,
            "value": "3",
            "type": "MaxAnswers",
            "id": 3,
            "createdOn": "\/Date(1333666034407+0100)\/"
        }, {
            "questionId": 2,
            "value": "1",
            "type": "MinAnswers",
            "id": 4,
            "createdOn": "\/Date(1333666034417+0100)\/"
        }],
        "id": 2,
        "createdOn": "\/Date(1333666034377+0100)\/"
    }, {
        "surveyId": 1,
        "headerText": "Question 3",
        "subText": "subtext",
        "type": "Choice",
        "positionOrder": 3,
        "answerOptions": [{
            "questionId": 3,
            "text": "Question 3 - Option 1",
            "positionOrder": 1,
            "id": 7,
            "createdOn": "\/Date(1333666034477+0100)\/"
        }, {
            "questionId": 3,
            "text": "Question 3 - Option 2",
            "positionOrder": 2,
            "id": 8,
            "createdOn": "\/Date(1333666034483+0100)\/"
        }, {
            "questionId": 3,
            "text": "Question 3 - Option 3",
            "positionOrder": 3,
            "id": 9,
            "createdOn": "\/Date(1333666034487+0100)\/"
        }],
        "questionValidators": [{
            "questionId": 3,
            "value": "3",
            "type": "MaxAnswers",
            "id": 5,
            "createdOn": "\/Date(1333666034463+0100)\/"
        }, {
            "questionId": 3,
            "value": "1",
            "type": "MinAnswers",
            "id": 6,
            "createdOn": "\/Date(1333666034470+0100)\/"
        }],
        "id": 3,
        "createdOn": "\/Date(1333666034457+0100)\/"
    }, {
        "surveyId": 1,
        "headerText": "Question 4",
        "subText": "subtext",
        "type": "Choice",
        "positionOrder": 4,
        "answerOptions": [{
            "questionId": 4,
            "text": "Question 4 - Option 1",
            "positionOrder": 1,
            "id": 10,
            "createdOn": "\/Date(1333666034500+0100)\/"
        }, {
            "questionId": 4,
            "text": "Question 4 - Option 2",
            "positionOrder": 2,
            "id": 11,
            "createdOn": "\/Date(1333666034507+0100)\/"
        }, {
            "questionId": 4,
            "text": "Question 4 - Option 3",
            "positionOrder": 3,
            "id": 12,
            "createdOn": "\/Date(1333666034507+0100)\/"
        }],
        "questionValidators": [{
            "questionId": 4,
            "value": "3",
            "type": "MaxAnswers",
            "id": 7,
            "createdOn": "\/Date(1333666034493+0100)\/"
        }, {
            "questionId": 4,
            "value": "1",
            "type": "MinAnswers",
            "id": 8,
            "createdOn": "\/Date(1333666034497+0100)\/"
        }],
        "id": 4,
        "createdOn": "\/Date(1333666034490+0100)\/"
    }],
    "id": 1,
    "createdOn": "\/Date(1333666034243+0100)\/"
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T08:26:06.877

由于您附加子视图的方式，它不起作用

```
this.$('fieldset').append(view.render().el.innerHTML); 
```

Backbone.Views 中事件处理的工作方式是事件而不是附加到元素，而是附加到视图的根元素，然后将它们委托给子元素。在您的情况下，您不是将子视图的根元素附加到父视图，而是附加它的内容来破坏事件处理，因为您绑定事件的元素永远不会进入 DOM。

```
this.$('fieldset').append(view.render().el); 
```

删除该`innerHTML`属性，它将再次起作用。如果您不想在实例化 Backbone.Views 时使用包装元素，您始终可以将要声明的元素传递为`el`选项属性。

```
var view = new AnswerOptionView({ model: qModel, el: this.$('fieldset') }).render(); 
```

这样，AnswerOptinView 将声明 fieldset 元素并将事件绑定到它。

# javascript - Jquery 构建多个计时器和 .each(function() {

> ID：10037304
> 
> 赞同：0
> 
> 时间：2012-04-05T23:13:47.997
> 
> 标签：javascript, jquery

我正在尝试为我的网页构建多个计时器，到目前为止，

```
$('.timer').each(function() {
var timer = setInterval(function() {
    var time = $(this).text().split(':');
    var minutes = parseInt(time[0], 10);
    var seconds = parseInt(time[1], 10);
    // TIMER RUN OUT 
    if (!minutes && !seconds) {
        // CLEAR TIMER
        clearInterval(timer);
    // MINUS SECONDS
    } else {
        seconds -= 1;
    }
    // MINUS MINUTES
    if (seconds < 0 && minutes != 0) {
        minutes -= 1;
        seconds = 59;
    // ADD ZERO IF SECONDS LESS THAN 10
    } else {
        if (seconds < 10) {
            seconds = '0' + seconds;
        }
    }
    // ADD ZERO IF MINUTES LESS THAN 10
    if (minutes < 10) {
        minutes = '0' + minutes;
    }
}, 1000);
}); 
```

这虽然行不​​通！我哪里错了！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T23:21:22.113

首先，在你的`setInterval`回调中，`this`不再引用`.timer`元素。尝试将其更改为`self`并`var self = this;`在调用之前添加`setInterval`。其次，你永远不会把你的时间写回你的`.timer`元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T23:18:32.707

你想显示一个倒计时的时钟吗？在这种情况下，您不会在所有计算后更新文本。尝试添加：

```
$(this).text(minutes+':'+seconds); 
```

# eclipse - 在 Eclipse 中尝试从 eGit 提交到 git 时出现“内部错误”

> ID：10037305
> 
> 赞同：4
> 
> 时间：2012-04-05T23:13:49.463
> 
> 标签：eclipse, git, version-control, github, egit

[已解决] 不知何故，我设法没有对 .git 目录的“写入”权限。所以试图写提交并被退回。

我已经使用 Eclipse 几个月了，但只是从 CLI 运行 git。我认为这是低效的，我想使用 eGit，所以我开始学习本教程 (http://www.slideshare.net/loianeg/using-the-egit-eclipse-plugin-with-git-hub-2578587?从=嵌入）。

我正在尝试添加一个现有项目，所以我做了 Team-->Share Project-->Git 并选择了与我的项目对应的 .git 。Eclipse 似乎已经把它捡起来了，好吧，但是当我尝试提交时，我得到一个弹出窗口说

“提交更改时遇到问题”——发生内部错误。

当我单击详细信息时，它说“在执行提交命令期间发生内部错误异常捕获”

...我什至不知道从哪里开始。我用谷歌搜索了错误并没有得到任何有用的信息。

任何人都知道如何解决这个问题，或者至少如何开始调试？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-07-16T22:26:10.907

我已经解决了从项目的 git 文件夹中删除 index.lock 文件的情况。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-06T00:30:39.390

*   开始调试？
    检查“错误”Eclipse 视图以获取与该错误消息关联的完整堆栈跟踪

错误视图示例：

![显示错误视图](../Images/df95da7cbce5879be0dc3b7e0b7bead0.png)
![Eclipse 错误视图](../Images/02b3024818644f8caeedc8487c6ef8b3.png)

*   修理它？
    如果异常是 NPE 异常 (NullPointerException)，如[错误 329611](https://bugs.eclipse.org/bugs/show_bug.cgi?id=329611)中所示，那么您可以在 shell 中尝试 git commit -m "a message"，以便通过 GUI 的初始第一次提交。

* * *

正如[OP rogueleaderr 所](https://stackoverflow.com/users/998687/rogueleaderr)提到的，错误视图和异常背后的确切堆栈跟踪就足够了：

> **不知何故，我设法没有对该`.git`目录的“写入”权限。**
> 所以试图写提交并被退回。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-12T04:31:17.453

我也面临这个问题，错误选项卡不再显示任何内容。所以我改用 GitExtension 提交，问题解决了。

使用并行 eGit 和 GitExtension 跟踪本地 git 存储库是一个好主意。当我们对每一个进行更改时，它会在 Eclipse 和 GitExtension 上更新运行时。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-27T08:11:55.893

我遇到了这个问题。我删除了`.git`文件夹并将`.gitignore`文件推送到上游它可以正常工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-08T21:33:34.383

我有同样的问题。我通过使用（按此顺序）从终端手动提交来解决它：

`git add .`然后`git commit`，最后，`git push`从本地 repo 目录。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-05T23:39:01.653

我遇到了类似的问题，在删除 .git\ 文件夹中的 index.lock 文件后解决了。

# linux-kernel - 我在哪里可以找到 linux 的键盘映射？

> ID：10037310
> 
> 赞同：0
> 
> 时间：2012-04-05T23:14:15.787
> 
> 标签：linux-kernel, kernel, driver, linux-device-driver

让我拥有所有的密钥代码。如果我想在我的 ascii 字符中查找“a”，即按下时的扫描码 30，这将通过键盘映射转换为 0141。我在哪里可以找到这个键盘映射？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T23:45:34.060

键盘扫描码可[在此处](http://www.win.tue.nl/~aeb/linux/kbd/scancodes.html)获得。

# ios - 在 iOS 3+ 中对称加密字符串的正确且安全的方法

> ID：10037311
> 
> 赞同：2
> 
> 时间：2012-04-05T23:14:24.843
> 
> 标签：ios, string, encryption, cryptography

我几乎是密码学的新手，但我正在尝试加密一些数据并将其保存在 iOS 3 中的文件中，因为我不希望用户只是进入并编辑文件。在 iOS 3 中安全（相对）加密数据的正确方法是什么？我在网上找到的大多数文档都是针对 iOS 5 的。

任何帮助，将不胜感激！

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T16:23:36.680

“正确”的做法是在 IOS 中使用 Apple 的钥匙串。不幸的是，正如[这篇](https://stackoverflow.com/a/6712642/980922)文章所说，这对于 IOs3 来说并不是那么安全。对于 ios4，它工作正常。

有人可能有一个付费的解决方案，但你很可能最终自己写一个。你会想要

1.  使用密钥派生函数（例如[PBKDF2](https://stackoverflow.com/questions/5526853/how-to-create-pbkdf2-key-on-ios-device) ）从用户提供的密码中派生您的密钥。实际上，您需要派生两个密钥，因此您将使用两种不同的[RANDOM](https://developer.apple.com/library/ios/#documentation/Security/Reference/RandomizationReference/Reference/reference.html#//apple_ref/doc/uid/TP40007281)盐运行它两次。

2.  将 AES 与[RANDOM](https://developer.apple.com/library/ios/#documentation/Security/Reference/RandomizationReference/Reference/reference.html#//apple_ref/doc/uid/TP40007281) IV 和您的派生密钥之一一起使用（这部分很重要，而我看到的所有示例代码都没有）。在密文中添加盐和 IV

3.  对上述所有数据使用带有其他派生密钥的 hmac。预先设置。

4.  要解密，使用带有密码和前置盐的密钥派生算法重新派生密钥，重新生成 hmac，获取生成密钥的 sha1 哈希值，并分别获取消息中密钥的 sha1 哈希值，并验证它们是否相同（不要直接直接比较 hmacs），然后使用另一个派生密钥和附加的 IV 解密数据。

这对用户来说是一种痛苦和烦恼，因为他们需要输入一个单独的密码，但是没有办法安全地做到这一点。如果您将密钥存储在 iPhone 上，则有人可以读取它并解密数据。是的，您可以加密密钥，但是您如何存储该密钥？

我不相信苹果对此有体面的客观 c 绑定，因此您需要使用通用的加密 c API。它记录[在这里](https://developer.apple.com/library/ios/#documentation/System/Conceptual/ManPages_iPhoneOS/man3/Common%20Crypto.3cc.html#//apple_ref/doc/man/3cc/CommonCrypto)。似乎没用的 Objective-c API 记录[在这里](https://developer.apple.com/library/ios/#documentation/Security/Conceptual/cryptoservices/GeneralPurposeCrypto/GeneralPurposeCrypto.html#//apple_ref/doc/uid/TP40011172-CH9-SW1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T15:16:47.097

我对 iOS3 的了解不够好，无法建议已经内置的东西。如果你需要从头开始开发加密，那么[RC4](http://en.wikipedia.org/wiki/RC4)是非常容易编程的。它现在已经过时了，但仍然相当安全。从您的角度来看，它的主要错误是您需要使用良好的 KDF（密钥派生函数）选择安全密钥，例如[PBKDF2](http://en.wikipedia.org/wiki/PBKDF2)。

# c# - c#委托不能正常工作？

> ID：10037313
> 
> 赞同：10
> 
> 时间：2012-04-05T23:14:50.507
> 
> 标签：c#, delegates

我对 c# 有点陌生，所以我想出了这个问题。问题：为什么调用func2？哦，还有一件事。假设我向委托添加了一个函数。在这个函数中，我调用了另一个委托，但是我想确保在这个函数调用这个委托之前调用添加到第一个委托的所有其他函数，是否有任何干净的解决方案（对 getInvocationList 并不真正感兴趣）。谢谢各位，你们是最棒的。

```
class Program
{
    delegate void voidEvent();
    voidEvent test;

    private void func1()
    {
        Console.Write("func1");
        test -= func2;
    }

    private void func2()
    {
        Console.WriteLine("func2");
    }

    static void Main(string[] args)
    {
        Program p = new Program();
        p.test += p.func1;
        p.test += p.func2;
        p.test();
    }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-05T23:18:52.567

每次更改委托（+= 或 -=）时，您实际上是在创建调用列表的完整副本（将被调用的方法）。

因此，当您调用 时`p.test();`，您将在*该时间点*调用调用列表中的每个委托。在其中一个处理程序中更改 this 将为下一次调用更改它，但不会更改当前正在执行的调用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-06T06:37:03.583

里德当然是正确的。这是另一种思考方式。

```
class Number
{
    public static Number test;
    private int x;
    public Number(int x) { this.x = x; }
    public Number AddOne() 
    {
        return new Number(x + 1);
    }
    public void DoIt()
    {
        Console.WriteLine(x);
        test = test.AddOne();
        Console.WriteLine(x);
    }
    public static void Main()
    {
        test = new Number(1);
        test.DoIt(); 
    }
} 
```

应该打印 1、1 还是 1、2？为什么？

它应该打印 1, 1。当你说

```
test.DoIt(); 
```

这并不意味着

```
 Console.WriteLine(test.x);
        test = test.AddOne();
        Console.WriteLine(test.x); 
```

！相反，这意味着

```
Number temporary = test;
Console.WriteLine(temporary.x);
test = test.AddOne();
Console.WriteLine(temporary.x); 
```

更改 的值`test` **不会更改`this`**DoIt 中的值。

你正在做同样的事情。更改 的值`test`不会更改您正在调用的函数列表；您要求调用特定的函数列表，并且*该列表将被调用*。你不能在中途改变它，就像你不能在`this`方法调用中途改变它的含义一样。

# ios - 使字体发光效果

> ID：10037315
> 
> 赞同：0
> 
> 时间：2012-04-05T23:15:02.143
> 
> 标签：ios

我想知道是否有人有字体发光效果的例子？我试图查看 NSAttributedString ，但在属性中找不到发光文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T21:20:15.727

尝试这个：

```
#include <Quartzcore/Quartzcore.h>
.......
yourLabel.layer.shadowColor = [[UIColor glowColor] CGColor]; //Replace glowColor with the desired color (redColor, greenColor, etc.)
yourLabel.layer.shadowOffset = CGSizeMake(0.0, 0.0); //The glow starts from the center

yourLabel.layer.shadowRadius = 20.0; //You can change this to the desired amount
yourLabel.layer.shadowOpacity = 0.5; //You can change this to the desired amount

yourLabel.layer.masksToBounds = NO; //Keep this the same to avoid shadow being clipped by the label bounds 
```

希望这可以帮助！

# python - 如何判断 Python 的多处理模块是否正在使用我所有的内核进行计算？

> ID：10037319
> 
> 赞同：5
> 
> 时间：2012-04-05T23:15:17.307
> 
> 标签：python, module, multiprocessing, porting, cpu-cores

我有一些来自这样的教程的简单代码：

```
from multiprocessing import Process, Lock
import os

def f(i):
    print 'hello world', i
    print 'parent process:', os.getppid()
    print 'process id:', os.getpid(), "\n\n"

if __name__ == '__main__':
    lock = Lock()

    for num in range(10):
        p = Process(target=f, args=(num,))
        p.start()
    p.join() 
```

我如何判断这是否同时使用了我的两个内核？目前我正在运行 Ubuntu 11.04 w/3 GB RAM 和 Intel Core 2 Duo @ 2.2GHz。

我正在为此学习的项目将被转移到某人办公室的一台巨大机器上，其马力比我目前拥有的要多得多。具体来说，处理器至少有 4 个内核，我想确保让我的算法自动检测和利用所有可用的内核。此外，该系统可能不是 Linux，所以在操作系统之间移动多处理模块时是否有任何常见的错误需要注意？

哦，是的，脚本的输出看起来像这样：

```
hello world 0
parent process: 29362
process id: 29363 

hello world 1
parent process: 29362
process id: 29364 

hello world 2
parent process: 29362
process id: 29365 

and so on... 
```

因此，据我所知，PPID 都是相同的，因为上面的脚本在运行时是调用子进程的父进程，每个子进程都是不同的进程。那么多处理是否会自动检测和处理多个内核，还是我必须告诉它在哪里查找？此外，根据我在搜索这个问题的副本时所读到的内容，我不应该产生比核心更多的进程，因为它会占用原本用于计算的系统资源。

提前感谢您的帮助，我的论文爱您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T23:33:55.190

这是我用来从命令行监视我的核心的一个方便的小命令：

```
watch -d "mpstat -P ALL 1 1 | head -n 12" 
```

请注意，该`mpstat`命令必须在您的系统上可用，您可以通过安装`sysstat`软件包在 Ubuntu 上获得该命令。

```
sudo apt-get install sysstat 
```

如果您想从 Python 中检测可用内核的数量，您可以使用该`multiprocessing.cpu_count()`函数来实现。在具有超线程的 Intel CPU 上，这个数字将是实际内核数的两倍。只要进程有足够的工作要做并且不会因通信而陷入困境，启动与可用内核一样多的进程通常会扩展以完全占用计算机上的所有内核。Linux 的进程调度程序将从那里获取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T23:29:06.203

关于您的代码示例的一些事情。即使您创建了一个，您当前也没有使用您的锁。而且，您只是加入了您开始的最后一个过程。现在它们可能结束得很快，以至于您不会看到任何问题，但是如果任何早期的过程比上一个过程花费的时间更长，我认为您可能会在它们完成之前终止。

关于确保每个过程最终都在不同的核心上。不幸的是你不能。这是操作系统的调度程序将做出的决定。您只是在编写使用多个进程的代码，以允许系统并行调度它们。有些可能在同一个核心上。

陷阱（pratfalls？），可能是您的实际代码实际上并不需要多个进程，而是可以从线程中获得更好的收益。此外，您必须非常小心在多处理中共享内存的方式。与进程间通信相比，进程间通信涉及更多开销。因此，它通常保留用于线程根本无法满足您的需求的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T23:18:18.150

如果您使用的是 unix 系统，您可以尝试运行“top”命令并查看有多少进程同时显示。虽然它有点经验，但很多时候只看进程列表就会让你看到倍数。

尽管查看了您的脚本，但我看不到您在哪里调用多个进程。您可以导入 multiprocessing.pool，然后将您的函数映射到不同的处理器。
[http://docs.python.org/library/multiprocessing.html](http://docs.python.org/library/multiprocessing.html)

# php - 如何通过 url 提供登录到 wordpress 网站？

> ID：10037320
> 
> 赞同：0
> 
> 时间：2012-04-05T23:15:26.903
> 
> 标签：php, wordpress, url, login

我正在通过我的网站链接到受保护的 Wordpress 网站，并且我想提供一个链接，该链接在单击时会自动提供登录凭据。

我正在运行一个使用 php5 服务的 apache，尽管我没有 php 经验并且想知道是否有一种简单的方法可以通过 url 提供登录凭据。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T01:55:52.250

您可以通过在目标站点上编写插件来做到这一点。该插件将挂钩到“身份验证”操作挂钩。在您的实现中，您可以使用 $_GET 变量而不是 $_POSTed 数据。有关执行此操作的一些代码示例，请参阅此博客文章：~~[http://www.johnkolbert.com/wordpress/how-to-add-your-own-authentication-criteria/](http://www.johnkolbert.com/wordpress/how-to-add-your-own-authentication-criteria/)~~

您必须将用户重定向到目标站点上的 wp-login 页面，并包含一个 redirect= 选项，以将用户再次重定向到所需的页面。

注意：在 URL 中提供密码通常被认为是危险的。Apache 会记录 URL，如果有人破坏了服务器或跟踪用户访问的 URL，那么他们将拥有密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T00:37:38.673

由于 Wordpress 用户的身份验证方式，无法使用简单的 URL 来执行此操作。看看这个相关的问题：[PHP, cURL post to login to WordPress](https://stackoverflow.com/questions/728274/php-curl-post-to-login-to-wordpress)

我建议您消除用户登录 Wordpress 以完成您打算让他们执行的任务的需要，而不是这种强制他们登录的“hacky”方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-10T11:38:11.077

从字面上看，没有登录本身就没有办法做到这一点。我建议您浏览一下里面有哪些类型的 WordPress 登录 URL。

此外，出于安全目的，不建议将我们的登录信息包含在重定向 URL 中。尽管您可以尝试使用 WordPress“密码保护”插件来保护您的密码，然后考虑添加重定向。

# html - 为什么这个 CSS 表单不渲染？

> ID：10037321
> 
> 赞同：0
> 
> 时间：2012-04-05T23:15:31.177
> 
> 标签：html, css

这有点尴尬，但由于某种原因，我无法让他`CSS`与我的`HTML`. 我不知道我是否没有正确浏览目录或什么。在浏览器`HTML`中加载正常但`CSS`不是。这是我的目录的图像和我在标题中使用的代码：

![在此处输入图像描述](../Images/f9ad421960803444be6e1347f821fc54.png)

```
 <link rel="stylesheet" href="staging.mesantos.com/_/css/desktop.css" type="text/css"> 
```

桌面.css：

```
 body {
    background-color: red;
    font-family: Rokkitt, 'Times New Roman', serif;
    font-size: 50px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T23:18:47.217

我无法从屏幕截图中真正看出，但 index.html 文件不是已经在 staging.mesantos.com 目录中了吗？如果是这样，您可以将该部分从href中取出。

# django - 尝试运行 unittest 时，djutils 抱怨它无法导入 Highlighter.highlight

> ID：10037322
> 
> 赞同：0
> 
> 时间：2012-04-05T23:15:42.347
> 
> 标签：django

django utils 无法导入 utils highlighter.highlight

我尝试运行 manage.py test 时遇到的错误

> 文件“C:\Python27\lib\site-packages\djutils-0.3.2-py2.7.egg\djutils\tests__init__.py”，第 7 行，从 djutils.tests.templatetags 导入 * 文件“C:\Python27 \lib\site-packages\djutils-0.3.2-py2.7.egg\djutils\tests\templatetags.py”，第 5 行，从 djutils.templatetags.djutils_tags 导入（文件“C:\Python27\lib\site -packages\djutils-0.3.2-py2.7.egg\djutils\templatetags\djutils_tags.py"，第 19 行，从 djutils.utils.highlighter 导入高亮 ImportError：无法导入名称高亮

我确认 djutils 文件存在，并且这只发生在我尝试运行测试而不是运行服务器时。

test.py 文件实际上并不使用、导入或以其他方式与 djutils 相关。

# c++ - 使用函数的事件系统 好主意？

> ID：10037330
> 
> 赞同：4
> 
> 时间：2012-04-05T23:16:12.687
> 
> 标签：c++, boost, event-handling, c++11, boost-any

我做了一个模块系统，如下所示：

```
//setting event
module->set_event("started", [](boost::any ev) {
  cout << "The module have been successfully started" << endl;
});

//somewhere else
module->start();

//impl
void Module::start() {
  //run once protection here
  this->trigger_event("start");//pre start
  this->_impl->start(); //on error, throw exception
  this->trigger_event("started"); //post start
}

void Module::trigger_event(string str,boost::any ev = boost::any() )
{
  //mutex
  //invokes every handler which have been invoked set_event
} 
```

真的很简单，很容易理解。第一个缺点是没有“remove_event”，但是为了允许它（如果我需要它），我可以只返回一个 std::function（在 set_event 方法中），它在调用时会删除处理程序，所以如果用户想要删除事件，只需调用返回的处理程序：

```
function<void ()> h = module->set_event(...);
//... somewhere later
h() //removes the handler safely 
```

但我很好奇这是否是一个好的设计？或者我会突然发现使用我的方法的非常大的缺点并且需要重写大多数代码？我可以说“trigger_event”方法也将用作模块之间的消息系统，就像 JavaScript 库 jQuery 方法：“bind”允许的那样。一个例子：

```
module->set_event("message", [](boost::any message) {
 //deal with the message here
});

//send message
module->trigger_event("message", MyMessageTypeHere); 
```

在大多数情况下，这是一种公认​​的设计吗？我想要一种非常灵活的方法，因此我的想法是使用 boost::any，但总的来说这是一个好主意（可扩展性、性能、灵活性）吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T01:14:33.653

有几件事我会改变。

首先，让我们暂时忽略 return 并关注与 that`boost::any`混合的内容`std::string`。这对于事件系统来说确实是个坏主意，因为它允许潜在的运行时类型不匹配。*您只是不想要一种可能会犯此类错误的设计（因为最终会*犯这些错误，并且*会*出现需要修复的错误，从而浪费未来的时间）。

通常，您真正想要的是：

```
void Module::trigger_event(shared_ptr<Event> const& event)
{
    // Event is a base interface
    // pull off event->ID() to get identifier and lookup
    // dispatch to something that has the signature
    //   void (shared_ptr<SpecificEvent>)
} 
```

做类似调度员的事情，你通常有

```
map<IDType, shared_ptr<Dispatcher>> dispatchDictionary_; 
```

和

```
template <typename SpecificEvent>
class SpecificDispatcher : public Dispatcher
{
public:
    SpecificDispatcher(function<void (shared_ptr<SpecificEvent>)> handler)
        handler_(handler)
    {}

    virtual void dispatch(shared_ptr<Event> event)
    {
        auto specificEvent(static_ptr_cast<SpecificEvent>(event));

        handler_(specificEvent);
    }
}; 
```

（使用以明显方式定义的接口类和注册/注销方法来关联映射中的事件类型 ID）。关键是将 ID 与类中的 EventType 相关联，以确保它始终是相同的关联，并以处理程序本身不需要重新解释数据的方式进行调度（容易出错）。做可以在你的图书馆内自动化的工作，这样就不会在外面做错了。

好的，现在你用你的方法返回什么？返回一个对象，而不是一个函数。如果他们不需要显式调用它，那么您已经保存了另一个潜在的错误来源。就像所有 RAII 一样 - 您不希望人们必须记住调用删除、解锁或......类似地，使用“unregister_event”（或任何你称之为的）。

人们必须在程序中关注四个生命周期：表达式、函数范围、状态和程序。这些对应于它们可以存储您返回的对象的四种类型的东西：匿名（让它掉在地板上 - 它可以在表达式中使用但永远不会分配给命名对象），自动范围对象，对象它是存在于两个异步转换事件之间的 State 类（在 State 模式中）的成员，或者是在退出之前一直存在的全局范围对象。

所有生命周期管理都应使用 RAII 进行管理。这是析构函数的重点，也是面对异常时应该如何管理资源清理。

* * *

编辑：我有点留下一堆未说明的部分，指出你会“以明显的方式”连接这些点。但我想我会填写更多的部分（因为我正在构建和安装操作系统，我的错误现在已经下降到最后一个，正在等待安装......）

关键是有人应该能够打字

```
callbackLifetimeObject = module->set_event<StartEvent>([](shared_ptr<StartEvent> event){
    cout << "Module started: " << event->someInfo() << endl;
}); 
```

所以 set_event 需要有那种签名来接受这个，它应该将适当的调度程序插入到字典中。有几种方法可以从此处的类型中获取 ID。“显而易见”的方式是创建一个临时的并将其称为“ID”成员——但这会产生对象创建开销。另一种方法是将其转换为“虚拟静态”，然后获取静态（这也是虚拟方法所做的所有事情）。每当我有虚拟静态时，我倾向于将它们转化为特征——同样的东西，但封装稍微好一些，并且还能够修改“已经关闭的类”。然后虚方法也只是调用特征类来返回相同的东西。

所以...

```
template <typename EventType>
struct EventTrait
{
    // typedef your IDType from whatever - looks like you want std::string
    static IDType eventID()
    { /* default impl */ }
};

template <>
struct EventTrait<StartEvent>
{
    // same as above
    static IDType eventID()
    { return "Start"; }
}; 
```

那么你就可以

```
template <typename EventType>
EventRegistration set_event(function<void (shared_ptr<EventType>)> handler)
{
    auto id(EventTrait<EventType>::eventID());

    dispatchDictionary_.insert(make_pair(id, 
        make_shared<SpecificDispatcher<EventType>>(handler)));

    return EventRegistration(bind(& Module::unset_event, this, id));
} 
```

这应该更好地说明如何将这些部分组合在一起以及您拥有的一些选项。其中一些说明了可能随每个事件重新编码的样板代码。这也是您可能想要自动化的类型。有很多先进的技术可以对这种生成进行元编程，从使用另一个需要规范的构建步骤到在 c++ 元编程系统内部工作。同样，与前面的几点一样，您可以自动化的越多，您遇到的错误就越少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T01:07:56.543

它有问题有两个原因。

首先，您将事件限制为只接收一个参数的处理程序，同时从您的用例判断您可能有各种不同的事件。所以，这是有限制的（是的，您*可以*将 an`std::tuple`放入 any 类型中，以编码多个参数，但您真的想要这个吗？）。

更重要的是，削弱类型安全意味着削弱（类型）安全。如果您的事件处理程序只能与山羊一起工作，请不要给它一只羔羊。你想要的，似乎可以用模板来做（至少在 C++11 中），因为你可以创建`trigger_event`一个接收任意数量参数的类型函数。然后它会尝试使用此参数调用处理程序，这将产生编译错误，如果您没有提供正确数量和类型的参数。

在这里，在您的调度程序中，您可以隐藏类型解析，这有点棘手，因为您想存储任意类型的事件。这可能是使用的地方`any`，但保留*在*您的调度程序实现/逻辑中，不会泄露给您的用户。

编辑：为了实现这个解决方案，我的方法是拥有一些内部抽象`Event`类型（您可以存储指针）和一些`template <typename Hnd> classs ConcreteEvent : public Event`允许您将客户事件处理程序保留为`ConcreteEvent<EventType>`（假设`EventType`是您的`set_event`方法的模板参数）。`Event*`使用 rtti 您可以稍后在检索它时检查它是否与您要调用的类型匹配（您只会将其检索为）。

# php - wordpress 侧边栏中的页面加载缓慢

> ID：10037333
> 
> 赞同：0
> 
> 时间：2012-04-05T23:16:39.090
> 
> 标签：php, wordpress

所以基本上，我对 PHP 一无所知，但不知何故，我设法让这个脚本工作。
（脚本会检查直播是否在线 [在 www.own3d.tv 上]，如果在线，则显示主播和观众的姓名。如果离线，则不显示任何内容。）

我将其插入到我的 Wordpress 侧边栏中。但问题是，当我打开我的页面时，所有其他内容都会加载，但侧边栏需要几秒钟才能加载。我想检查直播需要很长时间。
那么，有没有办法让它加载得更快，或者让它先加载侧边栏上的其他东西？

提前感谢您的回复。
问候

```
<html>
<body>
<p style="width:300px; height:250px; padding:1px; border:5px solid #66a">
<?php

function  pageTime()
{
static $_pt;
    if($_pt == 0) $_pt = microtime(true);
    else return (string)(round(microtime(true)-$_pt ,3));
}

pageTime();

//Froggen
$xml = simplexml_load_file("http://api.own3d.tv/liveCheck.php?live_id=112348");
$resultlive = $xml->xpath("/own3dReply/liveEvent/isLive");
$resultviewers = $xml->xpath("/own3dReply/liveEvent/liveViewers");

if ($resultlive[0] == 'true'){
echo 'Froggen - Viewers: '; echo ($resultviewers[0]); echo ' - <a href="http://www.own3d.tv/live/112348/">Watch now!</a> <br>';
}
else {
echo '';
}

//Athene
$xml = simplexml_load_file("http://api.own3d.tv/liveCheck.php?live_id=42146");
$resultlive = $xml->xpath("/own3dReply/liveEvent/isLive");
$resultviewers = $xml->xpath("/own3dReply/liveEvent/liveViewers");

if ($resultlive[0] == 'true'){
echo 'Athene - Viewers: '; echo ($resultviewers[0]); echo ' - <a href="http://www.own3d.tv/live/42146/">Watch now!</a> <br>';
}
else {
echo '';
}

//Guardsman Bob
$xml = simplexml_load_file("http://api.own3d.tv/liveCheck.php?live_id=34046");
$resultlive = $xml->xpath("/own3dReply/liveEvent/isLive");
$resultviewers = $xml->xpath("/own3dReply/liveEvent/liveViewers");

if ($resultlive[0] == 'true'){
echo 'Guardsman Bob - Viewers: '; echo ($resultviewers[0]); echo ' - <a href="http://www.own3d.tv/live/34046/">Watch now!</a> <br>';
}
else {
echo '';
}

//The Rain Man
$xml = simplexml_load_file("http://api.own3d.tv/liveCheck.php?live_id=38853");
$resultlive = $xml->xpath("/own3dReply/liveEvent/isLive");
$resultviewers = $xml->xpath("/own3dReply/liveEvent/liveViewers");

if ($resultlive[0] == 'true'){
echo 'The Rain Man - Viewers: '; echo ($resultviewers[0]); echo ' - <a href="http://www.own3d.tv/live/38853/">Watch now!</a> <br>';
}
else {
echo '';
}

//TheOddOne
$xml = simplexml_load_file("http://api.own3d.tv/liveCheck.php?live_id=6416");
$resultlive = $xml->xpath("/own3dReply/liveEvent/isLive");
$resultviewers = $xml->xpath("/own3dReply/liveEvent/liveViewers");

if ($resultlive[0] == 'true'){
echo 'TheOddOne - Viewers: '; echo ($resultviewers[0]); echo ' - <a href="http://www.own3d.tv/live/6416/">Watch now!</a> <br>';
}
else {
echo '';
}

//Dyrus
$xml = simplexml_load_file("http://api.own3d.tv/liveCheck.php?live_id=37905");
$resultlive = $xml->xpath("/own3dReply/liveEvent/isLive");
$resultviewers = $xml->xpath("/own3dReply/liveEvent/liveViewers");

if ($resultlive[0] == 'true'){
echo 'Dyrus - Viewers: '; echo ($resultviewers[0]); echo ' - <a href="http://www.own3d.tv/live/37905/">Watch now!</a> <br>';
}
else {
echo '';
}

//Xpecial
$xml = simplexml_load_file("http://api.own3d.tv/liveCheck.php?live_id=10953");
$resultlive = $xml->xpath("/own3dReply/liveEvent/isLive");
$resultviewers = $xml->xpath("/own3dReply/liveEvent/liveViewers");

if ($resultlive[0] == 'true'){
echo 'Xpecial - Viewers: '; echo ($resultviewers[0]); echo ' - <a href="http://www.own3d.tv/live/10953/">Watch now!</a> <br>';
}
else {
echo '';
}

//Chaox
$xml = simplexml_load_file("http://api.own3d.tv/liveCheck.php?live_id=33356");
$resultlive = $xml->xpath("/own3dReply/liveEvent/isLive");
$resultviewers = $xml->xpath("/own3dReply/liveEvent/liveViewers");

if ($resultlive[0] == 'true'){
echo 'Chaox - Viewers: '; echo ($resultviewers[0]); echo ' - <a href="http://www.own3d.tv/live/33356/">Watch now!</a> <br>';
}
else {
echo '';
}

//Wickd
$xml = simplexml_load_file("http://api.own3d.tv/liveCheck.php?live_id=18755");
$resultlive = $xml->xpath("/own3dReply/liveEvent/isLive");
$resultviewers = $xml->xpath("/own3dReply/liveEvent/liveViewers");

if ($resultlive[0] == 'true'){
echo 'Wickd - Viewers: '; echo ($resultviewers[0]); echo ' - <a href="http://www.own3d.tv/live/18755/">Watch now!</a> <br>';
}
else {
echo '';
}

//Lapaka
$xml = simplexml_load_file("http://api.own3d.tv/liveCheck.php?live_id=214");
$resultlive = $xml->xpath("/own3dReply/liveEvent/isLive");
$resultviewers = $xml->xpath("/own3dReply/liveEvent/liveViewers");

if ($resultlive[0] == 'true'){
echo 'Lapaka - Viewers: '; echo ($resultviewers[0]); echo ' - <a href="http://www.own3d.tv/live/214/">Watch now!</a> <br>';
}
else {
echo '';
}

//Snoopeh
$xml = simplexml_load_file("http://api.own3d.tv/liveCheck.php?live_id=112350");
$resultlive = $xml->xpath("/own3dReply/liveEvent/isLive");
$resultviewers = $xml->xpath("/own3dReply/liveEvent/liveViewers");

if ($resultlive[0] == 'true'){
echo 'Snoopeh - Viewers: '; echo ($resultviewers[0]); echo ' - <a href="http://www.own3d.tv/live/112350/">Watch now!</a> <br>';
}
else {
echo '';
}

//Dedrayon
$xml = simplexml_load_file("http://api.own3d.tv/liveCheck.php?live_id=265558");
$resultlive = $xml->xpath("/own3dReply/liveEvent/isLive");
$resultviewers = $xml->xpath("/own3dReply/liveEvent/liveViewers");

if ($resultlive[0] == 'true'){
echo 'Dedrayon - Viewers: '; echo ($resultviewers[0]); echo ' - <a href="http://www.own3d.tv/live/265558/">Watch now!</a> <br>';
}
else {
echo '';
}

//Malaco
$xml = simplexml_load_file("http://api.own3d.tv/liveCheck.php?live_id=259259");
$resultlive = $xml->xpath("/own3dReply/liveEvent/isLive");
$resultviewers = $xml->xpath("/own3dReply/liveEvent/liveViewers");

if ($resultlive[0] == 'true'){
echo 'Malaco - Viewers: '; echo ($resultviewers[0]); echo ' - <a href="http://www.own3d.tv/live/259259/">Watch now!</a> <br>';
}
else {
echo '';
}

?>
</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T01:33:37.033

您应该缓存这些 simplexml_load_file() 调用的结果。第一次调用会花费正常的时间，但随后的调用会加载缓存的数据并执行得非常快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T23:36:18.913

尝试在侧边栏中创建一个简单的文本小部件并将其粘贴到内容中。只需确保您的主题已安装 jQuery：

```
Froggen - Viewers: <a class="live-viewers" href="http://www.own3d.tv/live/112348/">Loading...</a> 

<script type='text/javascript'>
$(document).ready(function () {
    $.get("http://api.own3d.tv/liveCheck.php?live_id=112348", function (res) {
    var xml = $.parseXML(res);
    $('.live-viewers').text(res.own3dReply.liveEvent.liveViewers[0];
});
</script> 
```

# php - PCRE 在不支持 UTF 的情况下编译

> ID：10037336
> 
> 赞同：6
> 
> 时间：2012-04-05T23:16:51.967
> 
> 标签：php, apache, freebsd, pcre

每个人！FreeBSD noobie 正在寻找一些关于 PCRE 和 Apache 与 mod_php 集成的帮助。

是）我有的：

*   FreeBSD 8.2-RELEASE-p3
*   Apache/2.2.22（FreeBSD，由端口构建）
*   带有 Suhosin-Patch (cli) 的 PHP 5.3.10（内置：2012 年 4 月 6 日 02:58:27）（不是来自端口）
*   PCRE 版本 8.30 2012-02-04

    ```
    Compiled with
      8-bit support only
      UTF-8 support
      Unicode properties support
      No just-in-time compiler support
      Newline sequence is LF
      \R matches all Unicode newlines
      Internal link size = 2
      POSIX malloc threshold = 10
      Default match limit = 10000000
      Default recursion depth limit = 10000000
      Match recursion uses stack 
    ```

`php -i | grep -i pcre`告诉我，他使用下面的 PCRE 版本：

```
Configure Command =>  './configure'  '--with-layout=GNU' 
                      '--localstatedir=/var' '--with-config-file-scan-dir=/usr/local/etc/php' 
                      '--disable-all' '--enable-libxml' '--enable-mysqlnd' 
                      '--with-libxml-dir=/usr/local' '--with-pcre-regex=/usr/local/lib' 
                      '--with-zlib-dir=/usr' '--program-prefix=' '--with-apxs2=/usr/local/sbin/apxs' 
                      '--with-regex=php' '--with-zend-vm=CALL' 
                      '--enable-zend-multibyte' '--prefix=/usr/local' 
                      '--mandir=/usr/local/man' '--infodir=/usr/local/info/' 
                      '--build=i386-portbld-freebsd8.2'
pcre
PCRE (Perl Compatible Regular Expressions) Support => enabled
PCRE Library Version => 8.30 2012-02-04
pcre.backtrack_limit => 1000000 => 1000000
pcre.recursion_limit => 100000 => 100000 
```

当我尝试以这种方式从命令行运行我的 php 应用程序时，一切正常`php < somecode.php`。

但是当我通过 apache 执行它时，我收到了这个错误：`Compilation failed: this version of PCRE is compiled without UTF support at offset 0`

我试图从端口重建 apache `--with-pcre=/usr/local/bin`，但它失败并显示 apache 找不到 pcre-config 脚本的消息。

有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T20:39:12.347

已解决的问题只是使用系统 pcre 而不是默认重建 apache。为此，请使用选项构建您的 apache `--with-pcre`，该选项应包含包含`pcre-config`pcre-config 本身的完整路径。就我而言，它是`--with-pcre=/usr/local/bin/pcre-config`.

谢谢大家）

# java - EasyMock 2.5 不能用于多个参数捕获

> ID：10037337
> 
> 赞同：1
> 
> 时间：2012-04-05T23:16:53.723
> 
> 标签：java, mockito, easymock

当我尝试使用 EasyMock 捕获多个值时出现异常。

easymock 2.5.2
easymockclassextension 2.2
mockito-all 1.8.5
hamcrest-all 1.1

如何使用 EasyMock 解决它？

## 初始代码：

```
package easymock;

public class User {
    public static final int INT_VALUE = 1;
    public static final boolean BOOLEAN_VALUE = false;
    public static final String STRING_VALUE = "";
    private Service service;

    public void setService(Service service) {
        this.service = service;
    }

    public String userMethod(){
        return service.doSomething(INT_VALUE, BOOLEAN_VALUE, STRING_VALUE);
    }
} 
```

```
package easymock;

public class Service {
    public String doSomething(Integer a, boolean b, String c){
        return null;
    }
} 
```

```
package easymock;

import org.easymock.Capture;
import org.easymock.classextension.EasyMock;
import org.junit.Before;
import org.junit.Test;
import org.mockito.ArgumentCaptor;

import static org.easymock.EasyMock.anyBoolean;
import static org.easymock.EasyMock.anyObject;
import static org.easymock.classextension.EasyMock.capture;
import static org.easymock.classextension.EasyMock.expect;
import static org.easymock.classextension.EasyMock.replay;
import static org.easymock.classextension.EasyMock.verify;
import static org.hamcrest.CoreMatchers.is;
import static org.junit.Assert.assertThat;
import static org.mockito.Mockito.mock;
import static org.mockito.Mockito.when;

public class UserTest {

    private User user;
    private Service easyMockNiceMock;
    private Service mockitoMock;

    @Before
    public void setUp() throws Exception {
        user = new User();
        easyMockNiceMock = EasyMock.createNiceMock(Service.class);
        mockitoMock = mock(Service.class);
    }

    @Test
    public void easyMockTest() throws Exception {
        // given
        user.setService(easyMockNiceMock);

        Capture<Integer> integerCapture = new Capture<Integer>();
        Capture<Boolean> booleanCapture = new Capture<Boolean>();
        Capture<String> stringCapture = new Capture<String>();
        expect(easyMockNiceMock.doSomething(capture(integerCapture), capture(booleanCapture), capture(stringCapture))).andReturn("");
        replay(easyMockNiceMock);
        // when
        user.userMethod();
        // then
        verify(easyMockNiceMock);
        assertThat(integerCapture.getValue(), is(User.INT_VALUE));
        assertThat(booleanCapture.getValue(), is(User.BOOLEAN_VALUE));
        assertThat(stringCapture.getValue(), is(User.STRING_VALUE));
    }

    @Test
    public void easyMockTestValid() throws Exception {
        // given
        user.setService(easyMockNiceMock);

        Capture<Integer> integerCapture = new Capture<Integer>();
        expect(easyMockNiceMock.doSomething(capture(integerCapture), anyBoolean(), (String) anyObject())).andReturn("");
        replay(easyMockNiceMock);
        // when
        user.userMethod();
        // then
        verify(easyMockNiceMock);
        assertThat(integerCapture.getValue(), is(User.INT_VALUE));
    }

    @Test
    public void mockitoTest() throws Exception {
        // given
        user.setService(mockitoMock);

        ArgumentCaptor<Integer> integerArgumentCaptor = ArgumentCaptor.forClass(Integer.class);
        ArgumentCaptor<Boolean> booleanArgumentCaptor = ArgumentCaptor.forClass(Boolean.class);
        ArgumentCaptor<String> stringArgumentCaptor = ArgumentCaptor.forClass(String.class);

        when(mockitoMock.doSomething(integerArgumentCaptor.capture(), booleanArgumentCaptor.capture(), stringArgumentCaptor.capture())).thenReturn("");
        // when
        user.userMethod();
        // then
        assertThat(integerArgumentCaptor.getValue(), is(User.INT_VALUE));
        assertThat(booleanArgumentCaptor.getValue(), is(User.BOOLEAN_VALUE));
        assertThat(stringArgumentCaptor.getValue(), is(User.STRING_VALUE));
    }
} 
```

## 测试结果：

1.  mockitoTest - 总是通过
2.  easyMockTestValid - 如果它在没有 easyMockTest 的情况下运行，则通过
3.  easyMockTest - 总是失败并显示消息：

```
java.lang.NullPointerException
        at easymock.UserTest.easyMockTest(UserTest.java:41)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
        at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
        at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
        at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
        at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
        at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
        at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
        at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
        at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:71)
        at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:202)
        at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:63)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T08:52:43.670

首先，您使用的是不同版本的 EasyMock 和 EasyMock 类扩展。我不认为你的情况有这个问题，但我宁愿建议你有连贯的版本。

其次，我使用 EasyMock 3.1 版尝试了您的代码，不再需要类扩展，并且测试通过了。不过，我在更改日志中没有看到任何有趣的内容，Henri 可能会更改代码中的某些内容，从而使您的代码正常工作。

希望有帮助。

# php - 如何防止用户通过表单欺骗数据？

> ID：10037339
> 
> 赞同：0
> 
> 时间：2012-04-05T23:17:02.653
> 
> 标签：php, javascript, forms, firebug

我有一个已经运行了一段时间的站点，它使用大量用户输入来构建站点。网站上自然有几十种表格。在构建站点时，我经常使用隐藏的表单字段将数据传回服务器，以便我知道要更新哪条记录。

一个例子可能是： `<input type="hidden" name="id" value="132" />` `<input type="text" name="total_price" value="15.02" />`

提交表单时，这些值会传递到服务器，然后我根据传递的数据更新记录（即记录 132 的价格将更改为 15.02）。

我最近发现你可以通过像萤火虫这样简单的东西来改变属性和值。所以...我打开 firebug 并将 id 值更改为“155”，将价格值更改为“0.00”，然后提交表单。中提琴！我在网站上查看产品编号 155，现在它说它是 0.00 美元。这让我很担心。

如果没有查询字符串（容易修改）或隐藏的输入元素将 id 传递给服务器，我如何知道要更新哪个记录？

如果没有更好的方法（我已经看到数以千计的网站以这种方式传递数据），那么我将如何做到这一点，以便如果用户更改这些值，服务器端的数据不会被执行（或其他东西类似解决问题）？

我曾考虑过加密 id 然后在另一边解密它，但这仍然不能保护我免受有人更改它并且碰巧得到与数据库中另一个 id 匹配的东西。

我也考虑过 cookie，但我听说它们也可以被操纵。

有任何想法吗？这对我来说似乎是一个巨大的安全风险。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T23:52:20.730

`$_SERVER['HTTP_REFERER']`通过执行以下操作检查敏感页面总是很好的：

```
if ($_SERVER['HTTP_REFERER'] !== "previous_page.php") {
 header("Location: error_page.php");
 session_destroy();
 exit;
} 
```

但这并不是完全的证明，因为如果攻击者在 previous_page.php 上，他可以简单地浏览到我们试图保护的页面，因此需要进一步的保护。

您可以（并且应该）实施令牌系统。在您的表单页面上，您将添加以下 PHP 代码：

```
$_SESSION['token'] = md5(uniqid(rand(), TRUE));
$token = $_SESSION['token']; 
```

在表格的某处，添加：

```
<input type="hidden" name="token" value="<?php echo $token; ?>"/> 
```

这将生成一个漂亮的长字符串，该字符串对于浏览该页面的人来说是唯一的。这样做的目的是将此会话变量作为 $_POST 变量传递到下一页，然后在接收页面上将 与 进行比较`$_POST`以`$_SESSION`确保它们彼此相等。这在接收页面上是这样完成的：

```
$token = $_SESSION['token']; //re declaring your session variable

if ($_POST['token'] !== $_SESSION['token']) {
 header("Location: error_page.php");
 session_destroy();
 exit;
} 
```

我建议对“CSRF Forgery”进行更多研究。希望这能让你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T23:19:09.317

不要试图控制提交的数据（因为你不能）。

检查进行提交的用户是否有权进行它将触发的任何更改。

例如，如果他们将 id 更改为 155 并将价格更改为 0.00，那么请确保他们有权更新记录 155 并将价格设置为 0.00。

# android - DOM解析Android

> ID：10037340
> 
> 赞同：3
> 
> 时间：2012-04-05T23:17:10.960
> 
> 标签：android, xml, parsing

我想将 XML 解析为 android，这是我的 xml。当我转到我的 xml 的链接时，它向我显示了特殊字符（阿拉伯字母）。但是当我运行我的应用程序时，它向我显示了奇怪的字符

```
<?xml version="1.0" encoding="ISO-8859-6"?>
<music>
  <song>
    <id>1</id>
    <title>  السلام عليكم هلا </title>
    <artist>نعم</artist>
    <duration>4:44</duration>
    <plays>234</plays>
    <thumb_url>http://api.androidhive.info/music/images/adele.png</thumb_url>
  </song>
</music> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:35:05.210

您可以将字体文件（Arebic_Font.ttf）放入资产文件夹并编写以下代码以将解析的 arebic 标题显示到 TextView 小部件中。

```
TextView mTitleTextView = (TextView)findViewById(R.id.title);    
Typeface mTypeface = Typeface.createFromAsset(getAssets(),"Arebic_Font.ttf");
mTitleTextView.setTypeface(getDefaultTypeFace()); 
```

**注意：新字体****不需要root设备**，**只要字体是预定义的**并且我们有字体资源的.ttf文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T23:20:53.700

这是因为 android 支持还不包括阿拉伯字体。您必须自己在有根设备上安装字体，然后才能正确显示。如果它在标准设备上，请暂时忘记它。

# asp.net - 带有撇号的 Asp.net 元名称 =“描述”

> ID：10037347
> 
> 赞同：3
> 
> 时间：2012-04-05T23:18:22.863
> 
> 标签：asp.net, html

我正在从数据库中动态加载我的页面中的**元名称 =“描述”**。我有一些包含撇号的内容，例如

> 男士运动衫

当我检查页面源时，我看到元描述为

```
Men&#39;s Sweat Shirt 
```

这是应该的吗？

是的，我知道谷歌对我的元描述不太感兴趣，但是，我更愿意遵循正确的指导方针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T23:27:33.100

除非它打扰某些事情，否则这可能是最好的方式。如果不加以检查，撇号或单引号可能会破坏很多代码。`&#39;`是撇号的 html 转义序列。实际上，我很惊讶它没有破坏数据库中的任何内容，因为 SQL 使用单引号作为字符串分隔符。

如果你觉得你需要摆脱它，看看`HttpUtility.HtmlDecode()`

# .htaccess - Htaccess - 引荐来源网址重定向

> ID：10037348
> 
> 赞同：0
> 
> 时间：2012-04-05T23:18:23.720
> 
> 标签：.htaccess, mod-rewrite, redirect

我正在尝试将引荐来源网址重定向到链接到我的网站的一部分而不是公开的*主页。*（*http://www.example.com/my-private-page.html* **重定向到** *http://www.example.com*）

如何使用 .htaccess 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T23:28:26.930

像这样的东西？

```
RewriteEngine On
RewriteRule ^my-private-page$ / [R] 
```

顺便说一下，这需要您安装 mod_rewrite，但它可能已经安装，除非您自己托管网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T23:29:18.463

我认为这会起作用：

```
RewriteEngine On
RewriteRule ^(http://www.example.com/)my-private-page $1 [L] 
```

还是我的私人页面是一个文件夹？然后在该文件夹中放置一个带有简单重定向的 htaccess 文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T23:31:37.127

有了这个推荐人：

```
RewriteEngine on
RewriteCond %{HTTP_REFERER} example\.com [NC,OR] 
RewriteCond %{HTTP_REFERER} example\.net [NC,OR] 
RewriteCond %{HTTP_REFERER} example\.org 
RewriteRule ^my-private-page$ / 
```

或者，您可以这样做：

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{HTTP_REFERER} yourstring\.com [NC]
RewriteCond %{REQUEST_URI} !^/my-private-page.html
RewriteRule /*$ http://www.example.com/ [R=302,L] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-13T14:48:36.537

您可以在 mod_rewrite 中使用 apache 变量 %{HTTP_REFERER} 匹配 HTTP_REFERER。

在这里，我提供了一个简单的解决方案，将 http_referer 重定向到网站上的不同页面。

```
RewriteEngine on

RewriteCond %{HTTP_REFERER} !^https?://(www\.)?mydomain\.com [NC]
RewriteRule ^protected_page\.html$ /another_page.html [NC,L,R] 
```

RewriteCond 检查 HTTP_REFERER 是否不是**mydomain.com**然后将请求**/protected_pa​​ge.html**重定向到**/another_page.html**。

该代码将在您的 root/htaccess 文件中运行，只需将 mydoman.com 替换为您的域名即可。

# java - Java中有没有办法确定是否在静态初始化程序中调用了一个方法（或没有）？

> ID：10037352
> 
> 赞同：2
> 
> 时间：2012-04-05T23:18:48.177
> 
> 标签：java, static-initialization

作为检查静态注册表的适当使用的一种方式：

```
class AClass {
     static final IDType = IDregistry.registerId(...);
}

class IDRegistry {
     public static registerId(...)
     {
          if(isCalledInStaticInitializer()) {
               return(new IDType(...));
          }
          assert false : "NO NO - can't do this !!!";
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T23:50:58.597

我认为你不应该这样做。但如果你坚持，这会让你开始：

```
public static boolean isCalledInStaticInitializer()
{
    for (StackTraceElement ste : Thread.currentThread().getStackTrace())
    {
        if("<clinit>".equals(ste.getMethodName()))
        {
            return true;
        }
    }
    return false;
} 
```

资料来源：在[JVM 规范](https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.9)（“特殊方法”）的第 2.9 节中：

*“一个类或接口最多有一个类或接口初始化方法，并通过调用该方法进行初始化（第 5.5 节）。类或接口的初始化方法具有特殊名称`<clinit>`”*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T23:31:57.390

您的意图是不必要的（从来没有人这样做过-我从未见过等）。

你想要的只是这样：

```
static final IDType id = new IDType(...); 
```

如果您需要在某处注册 ID，请将代码放在`IDType`IDType 是否不可变或可变（不太可能）的构造函数中，一种选择是使用 IDType 中的工厂方法来创建和注册：

```
public class IDType() {
    ...
    public static IDType createAndRegister(...) {
        IDType idType = new IDType(...);
        SomeClass.register(idType);
        return idType;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T03:46:50.353

静态初始化是在每个类的基础上完成的。所以你可能需要问自己的问题是“哪个类的静态初始化？”。从您的用例看来，IDRegistry 的静态初始化是在任何注册自己的类之前运行的。您可能会采用不同的方法，并查看您想要强制执行的关于可以添加到注册表的其他内容。

顺便说一句，您在单个类的初始化过程中检测到，通过使用您在类的开头声明的最终变量，然后在类的最后设置一个静态块。由于静态初始化是按源顺序完成的，因此作为类静态初始化的一部分执行的任何代码都将看到该类型的 java 默认值（即 false、0、null），并且在静态初始化之后执行的任何代码都将看到最终集价值。

```
class AClass {
    static final boolean staticInitDone;

    // Any static initialization done here will see
    // staticInitDone as false, e.g. the
    // Y constructor below would see false.
    static X = new Y();

    static {
        staticInitDone = true;
    }
} 
```

但是你会注意到这并不适应你想要的跨类协调。

# git - 如何通过“hunk”合并 Git 中的分支

> ID：10037356
> 
> 赞同：7
> 
> 时间：2012-04-05T23:19:05.640
> 
> 标签：git, github

这是场景。我在“master”分支上做了一个“dev”分支，并做了一些新的提交。其中一些更改将仅与我的本地开发机器相关。例如，我将 URL 变量更改为指向本地 apache 服务器，而不是在线发布的真实 URL（我在测试阶段这样做是为了提高速度）。现在我想将 dev 分支中的更改合并到 master 分支中，但不是那些仅在我的本地环境中有意义的更改。

我设想了类似 merge --patch 的东西，它允许我选择我想要逐行合并的更改。

或者，也许我可以签出“master”分支，但将文件保留在我的工作目录中，就像它们在“dev”分支中一样，然后执行 git add --patch。那行得通吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T00:21:23.090

一种方法是合并来自另一个分支的更改，但在提交合并之前删除特定于开发的内容。

首先，获取更改，而不用`git merge --no-ff --no-commit dev`.

`git add`通过编辑受影响的文件并编辑它们，或`git reset HEAD`受影响的文件然后`git add --patch`是您想要的部分来删除特定于开发的更改。

然后提交合并。进行合并提交的一个优点是未来的合并将是无痛的。因为开发特定的提交被认为是合并的，未来不涉及开发特定部分的合并可以使用简单的`git merge dev`. 通过这种方式，您可以无限期地维护一个具有自己配置的单独分支，同时仍然可以轻松地将更改合并到主分支中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T23:25:59.030

也许你可以尝试这样的事情？

```
git merge --squash --no-commit $YOUR_OTHER_BRANCH
git reset HEAD
git add -p
git commit 
```

# android - 从android中的脚本运行脚本

> ID：10037357
> 
> 赞同：1
> 
> 时间：2012-04-05T23:19:06.257
> 
> 标签：android, unix, background, nohup

我正在尝试使用 init.d 脚本在后台执行另一个脚本。init.d 脚本必须在后台执行其他脚本后立即继续，以便我的设备可以完全启动，然后执行的脚本可以执行其命令。我google了一下，发现可以在脚本名末尾使用&符号在后台执行。这有效，但我的 init.d 脚本一直等到后台脚本完成。所以我用谷歌搜索了一些，发现与 & 一起使用的 nohup 命令会做我想做的事。完美的。但是，当我在 android 上使用终端模拟器时，我输入了 nohup，然后我得到“nohup：找不到小程序”

因此，如上所述，如果不等待后台脚本，我将无法继续执行 init.d 脚本。我在问，有谁知道如何在后台运行脚本，同时在 android 上继续当前脚本？

或者，有人知道我是否可以将“nohup”小程序添加到我的 android 设备中吗？

再次感谢所有回复的人！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T04:35:56.990

您可以使用 daemonize 来运行您的脚本：

```
Usage: daemonize [-f logfile] [-a] [-d delay] <program> 
```

# java - 在输入流上设置编码

> ID：10037360
> 
> 赞同：1
> 
> 时间：2012-04-05T23:19:09.937
> 
> 标签：java

我正在用 Java 处理 xml，我有以下代码：

```
 dbf.setValidating(false);
  dbf.setIgnoringComments(false);
  dbf.setIgnoringElementContentWhitespace(true);
  dbf.setNamespaceAware(true);

  DocumentBuilder db = null;
  db = dbf.newDocumentBuilder();
  db.setEntityResolver(new NullResolver());
  _logger.error("Before processing the input stream");
  processXml(db.parse(is)); 
```

其中 (is) 是一个 InputStream。

这导致错误：

> com.sun.org.apache.xerces.internal.impl.io.MalformedByteSequenceException：2 字节 UTF-8 的第 2 字节无效

这听起来像是由于编码错误而导致的错误。我想在 InputStream 上设置编码，但我不确定如何。我找到了在 InputSource 或 InputStreamReader 上设置编码的方法，但是 db.parse 不采用 reader/InputSource。

解决此问题的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T23:47:14.510

`DocumentBuilder.parse`可以拿一个`InputSource`。请参阅[javadocs](http://docs.oracle.com/javase/1.4.2/docs/api/javax/xml/parsers/DocumentBuilder.html#parse%28org.xml.sax.InputSource%29)。

因此，您应该尝试将您的包装`InputStream`在一个`InputReader`（您可以在其中指定字符集）中，然后`InputSource`基于它创建一个。

这有点令人费解，但这些事情发生在 Java 中。

类似的东西

# c# - EF 代码优先 - 如何对此建模？

> ID：10037365
> 
> 赞同：1
> 
> 时间：2012-04-05T23:19:34.197
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, entity-framework, ef-code-first

我正在开发一个使用实体框架代码的网络应用程序（MVC），我试图弄清楚如何对此进行建模。我当然可以向一个类（数据库中的位）添加 15 个布尔值，但这似乎是一种可悲的方式。我目前有一个客户对象，其中包含下图中显示的策略的对象。

![在此处输入图像描述](../Images/6801d74831aca5d13455c7901ecd0392.png)

我希望我的视图看起来就像上面的一样，目前没有计划添加第 6 个，但是构建模型以支持这种可能性很重要。

```
public class customer{
   //some random properties like Id, Name, Owner, Etc.
   //I could put 15 bools here for the policies in the image
   //I could put a policy object here?
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T02:24:09.867

这是一个简单、自我描述、可扩展、规范化和可扩展的设计。您可以添加其他策略类型或患者类型，而无需重新编译系统。您没有说明您使用的是哪个数据库引擎，因此为了使其在大多数数据库平台上工作，我建议您使用[TPC](http://blogs.microsoft.co.il/blogs/gilf/archive/2010/01/25/table-per-concrete-type-inheritance-in-entity-framework.aspx)。

![图表](../Images/478f230ab9b2435d524ad09937325700.png)

病人只是一个人（又名当事人）在系统中扮演的角色。您可以拥有其他角色，例如“医生”、“员工”、“保单持有人”等，每个角色都有自己的数据。重要的是要注意角色是临时性的，这意味着可以取消单个角色，而该人在系统中执行其他角色。

如果“Existing”、“AgeIn”、“NewPatient”可以通过查看 Role 或 Party 的属性来确定，则不需要 PatientType。我添加它是因为尚不清楚耐心的类型是如何定义的。您很可能只是在 Patient 上有一个属性来定义它。

一方代表任何法律实体。各方之间的关系通常对企业很重要。因此，当“Sam”（一个人）来到“Doc​​tor”（一个扮演角色的人）时，重要的是要知道她的父亲 Bob（一个人）的“政策”将支付账单。因此，一个人被映射到不同的表中的原因。

PolicyType 定义策略的真正类型。在您的情况下，您可能有 18 种不同的保单类型，例如 ExistingOriginalMediCare、AgeInOriginalMediCare 等。您可以在此处存储影响策略“规则”的数据。例如，某些类型的政策仅适用于居住在加利福尼亚州的人。我使用的一个系统有数千种策略类型，每种策略类型都有数百个应用程序用来推断业务规则的属性。这允许企业创建新的策略类型和“规则”，而无需重新编译系统和依赖它的所有内容。

但是，可以通过在保持相同功能的同时取出继承来简化它。在这里，我们假设除了“患者”之外没有其他“角色”，除了“人”之外没有其他“当事人”。

![简化模型](../Images/4c5d805dda5f26a49635f41b45852e2b.png)

也就是说，这实际上取决于数据是否会被其他应用程序重用，以及时间数据和关联的真实情况如何。随意适应。我在设计系统时经常参考这些书：

1.  [企业模式和 MDA：使用原型模式和 UML 构建更好的软件](http://my.safaribooksonline.com/book/software-engineering-and-development/uml/032111230x)
2.  [企业模型模式：描述世界（UML 版本）](http://my.safaribooksonline.com/book/software-engineering-and-development/uml/9781935504054)
3.  [数据模型资源书，第 3 卷：数据建模的通用模式](http://my.safaribooksonline.com/book/software-engineering-and-development/9780470178454)

它们从根本上改变了我看待“数据”的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T23:26:52.587

您可以为此查看 TPT（每种类型的表），请查看此处[http://blogs.microsoft.co.il/blogs/gilf/archive/2010/01/22/table-per-type-in​​heritance -in-entity-framework.aspx](http://blogs.microsoft.co.il/blogs/gilf/archive/2010/01/22/table-per-type-inheritance-in-entity-framework.aspx)

这意味着您可以为每个扩展基表的不同概念创建一个表。这样做的好处是稍后您可以将附加信息添加到特定类型。

例如，客户将是您的根表，然后使用 OriginalMedicareCustomer 等概念进行扩展

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T23:29:03.253

如果您想对其进行规范化，我建议您这样做：

```
public class Customer {
  // id, name, owner, etc
  public virtual IList<CustomerPolicy> Policies { get; set; }
}

public class CustomerPolicy {
  // id, name, etc
  public bool ExistingPatient { get; set; }
  public bool AgeInPatient { get; set; }
  public bool NewPatient { get; set; }
} 
```

在不了解您的应用程序的情况下，我不能说，但我猜每个策略的三个布尔值是互斥的？如果是这样，我会改为这样做：

```
public enum PatientType { Existing, AgeIn, NewPatient };

public class CustomerPolicy {
  // id, name, etc
  public PatientType PatientType { get; set; }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T00:01:36.037

我不完全确定您的数据要求，但我会保持简单，在一两个表内，像这样......

```
public class Customer
{
    public int CustomerID { get; set; }
    // or implement it via enum like below for policy type
    public bool Existing { get; set; }
    public bool AgeIn { get; set; }
    public bool New{ get; set; }
    // no 'virtual' means it's 'required', with virtual could be 'null'
    public Policy Policy { get; set; }
}
public enum PolicyBits
{
    None = 0x00,
    ExistingOriginalMediCare = 0x01,
    // ...
    AgeInOriginalMediCare = 0x100,
    // ...
}
public class Policy
{
    public int PolicyID { get; set; }
    public int PolicyTypeValue { get; set; }
    [NotMapped]
    public PolicyBits PolicyType
    {
        get { return (PolicyBits)PolicyTypeValue; }
        set { PolicyTypeValue = (int)value; }
    }
} 
```

...枚举将帮助您缩减“位”的数量 - 但它尚未得到官方支持，它将来自下一个版本，到目前为止仅在实验性 VS 2011 和 .NET 4.5 中（我记得）。

但是您可以使用以下方法暂时解决它。

至于表格的模型——我不确定你想如何在现有用户、新用户或老用户之间“切换”——或者你是否可以同时拥有这三个或所有三个等等。因为所有这些都是我的'我认为一个字段应该足够了 - 并且可能将它放在一个单独的表中进行分离 - 即你可以重新定义它，添加新事物或引入新记录等。

# php - 在 PDO 中使用动态准备好的语句

> ID：10037369
> 
> 赞同：1
> 
> 时间：2012-04-05T23:20:08.157
> 
> 标签：php, coding-style, pdo

有时根据查看我的页面时的用户类型，我需要添加一个 JOIN，甚至只是限制结果。有没有更清洁的方法呢？我应该为每种类型的请求单独声明吗？什么更“合适”？

这是我的代码最终的样子：

```
// Prepare statement
$stmt = $this->db->prepare('
    SELECT *
    FROM    Documents
    LEFT JOIN Notes ON ID = D_ID
    '.($user_id ? "INNER JOIN Users ON UID = ID AND UID = :userid" : '')."
    ". ($limit ? 'LIMIT :offset, :limit' : '')
);

// Bind optional paramaters
if ($user_id) $stmt->bindParam(':userid', $user_id, DB::PARAM_INT);

if ($limit)
{
    $stmt->bindParam(':offset', $limit[0], DB::PARAM_INT);
    $stmt->bindParam(':limit', $limit[1], DB::PARAM_INT);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T23:43:50.077

为了清楚起见，也许只是将插入字符串包装到自己的方法中，例如`getUserInsertString($user_id)`，并尝试使您的引用使用更加一致。

另外，您是否正在测试是否仅通过 go 来定义`$user_id`和定义？如果是这样，如果您将错误报告转向所有，您将收到一堆未定义的变量警告。您可能要考虑改用。`$limit``if ($user_id)``if (isset($user_id))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T23:56:58.763

我会创建单独的（受保护的）函数，它们返回只需要执行的准备好的语句。

```
/**
* @returns PDOStatement
*/
protected function prepareStatementForCase1(PDO $dbObject,Object $dataToBind){...}
/**
* @returns PDOStatement
*/
protected function prepareStatementForCase2(PDO $dbObject,Object $dataToBind){...} 
```

然后，我会在外面决定，必须叫哪一个。您可以更轻松地重建、维护和阅读代码。

例子：

```
class Document{
  protected $dbObject;

  public function __construct(PDO $dbObject){
    $this->dbObject=$dbObject;
  }
  public function doQuery($paramOne,$paramTwo,...){
    $logicalFormulaOne=...; // logical expression here with parameters
    $logicalFormulaTwo=...; // logical expression here with parameters
    if($logicalForumlaOne){
      $dbStatement=$this->prepareStatementForCase1($dataToBind);
    }else if($logicalFormuleTwo){
      $dbStatement=$this->prepareStatementForCase2($dataToBind);
    }
    $dbResult=$dbStatement->execute();
  }
  protected function prepareStatementForCase1(Object $dataToBind){
    $dbStatement=$this->dbObject->prepare("query string");
    $dbStatement->bindParam(...);
    return $dbStatement;
  }
} 
```

但是，当您的 PDOResult 对象表示不同类型的数据库元组时，或者当您在其中一种情况下返回更多行时，我不建议这样做。

我通常做的是创建一个代表（在您的示例中）文档的类。只有一个。我可以按其字段插入、删除、选择、修改，并处理一项。当我需要（例如）获取更多它们时，我创建一个新类，例如 DocumentList，它处理文档集合。这个类在获取更多 Document 对象时会给我一个数组。

# dictionary - 在 Groovy 中循环遍历地图？

> ID：10037374
> 
> 赞同：187
> 
> 时间：2012-04-05T23:20:38.280
> 
> 标签：dictionary, groovy

我有一个非常简单的任务，我想在 Groovy 中完成，但似乎无法让它工作。我只是想在 groovy 中循环遍历一个地图对象并打印出键和值，但是这段代码不起作用。

```
// A simple map
def map = [
        iPhone : 'iWebOS',
        Android: '2.3.3',
        Nokia  : 'Symbian',
        Windows: 'WM8'
]

// Print the values
for (s in map) {
    println s + ": " + map[s]
} 
```

我试图让输出看起来像这样：

```
iPhone: iWebOS
Android: 2.3.3
Nokia: Symbian
Windows: WM8 
```

有人可以详细说明如何做到这一点吗？

* * *

## 回答 #1

> 赞同：353
> 
> 时间：2012-04-05T23:23:29.697

非常简单的闭包：

```
def map = [
           'iPhone':'iWebOS',
           'Android':'2.3.3',
           'Nokia':'Symbian',
           'Windows':'WM8'
           ]

map.each{ k, v -> println "${k}:${v}" } 
```

* * *

## 回答 #2

> 赞同：109
> 
> 时间：2013-04-19T19:08:16.977

或者，您可以使用[Groovy Docs](http://groovy-lang.org/semantics.html#_looping_structures)`for`中所示的循环：

```
def map = ['a':1, 'b':2, 'c':3]
for ( e in map ) {
    print "key = ${e.key}, value = ${e.value}"
}

/*
Result:
key = a, value = 1
key = b, value = 2
key = c, value = 3
*/ 
```

与闭包相比，使用`for`循环的一个好处`each`是更容易调试，因为您不能在闭包内遇到断点`each`（使用 Netbeans 时）。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-04-06T06:15:47.477

使用for循环时，s的值是一个Map.Entry元素，也就是说可以从s.key中获取key，从s.value中获取值

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2016-01-19T00:12:36.083

另外的选择：

```
def map = ['a':1, 'b':2, 'c':3]
map.each{
  println it.key +" "+ it.value
} 
```

# java - CLI 进程的线程池

> ID：10037379
> 
> 赞同：5
> 
> 时间：2012-04-05T23:21:00.460
> 
> 标签：java, php, command-line, threadpool, stdin

我需要通过 Java 的标准输入将消息传递给 CLI PHP 进程。我想在一个池中保持大约 20 个 PHP 进程运行，这样当我将消息传递到池时，它会将每条消息发送到一个单独的线程，保留一个要传递的消息队列。我希望这些 PHP 进程尽可能长地保持活力，如果一个进程死了，就会产生一个新进程。我研究过使用静态线程池来执行此操作，但它似乎更适合执行并简单地死掉的任务。我怎么能做到这一点，通过一个简单的界面将消息传递到池？我是否必须实现自己的自定义“线程池”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T01:49:26.923

我提供了一些代码，因为我认为它会让事情变得更清楚。基本上，您需要保留一个进程对象池。请注意，这些流程中的每一个都有您需要以某种方式管理的输入、输出和错误流。在我的示例中，我只是将错误和输出重定向到主进程控制台。如果需要，您可以设置回调和处理程序以获取 PHP 程序的输出。如果您只是在处理任务并且不在乎 PHP 说什么，那么请保持原样或重定向到文件。

我正在为 ObjectPool 使用[Apache Commons Pool](http://commons.apache.org/pool/)库。无需重新发明一个。

您将拥有一个包含 20 个进程的池来运行您的 PHP 程序。仅此一项并不能满足您的需要。您可能希望“同时”针对所有 20 个进程处理任务。因此，您还需要一个 ThreadPool 来从您的 ObjectPool 中提取一个进程。

您还需要了解，如果您杀死或 CTRL-C 您的 Java 进程，该`init`进程将接管您的 php 进程，它们将就在那里。您可能希望记录您生成的 PHP 进程的所有 pid，然后在重新运行 Java 程序时清理它们。

```
public class StackOverflow_10037379 {

    private static Logger sLogger = Logger.getLogger(StackOverflow_10037379.class.getName());

    public static class CLIPoolableObjectFactory extends BasePoolableObjectFactory<Process> {

        private String mProcessToRun;

        public CLIPoolableObjectFactory(String processToRun) {
            mProcessToRun = processToRun;
        }

        @Override
        public Process makeObject() throws Exception {
            ProcessBuilder builder = new ProcessBuilder();
            builder.redirectError(Redirect.INHERIT);
            // I am being lazy, but really the InputStream is where
            // you can get any output of the PHP Process. This setting
            // will make it output to the current processes console.
            builder.redirectOutput(Redirect.INHERIT);
            builder.redirectInput(Redirect.PIPE);
            builder.command(mProcessToRun);
            return builder.start();
        }

        @Override
        public boolean validateObject(Process process) {
            try {
                process.exitValue();
                return false;
            } catch (IllegalThreadStateException ex) {
                return true;
            }
        }

        @Override
        public void destroyObject(Process process) throws Exception {
            // If PHP has a way to stop it, do that instead of destroy
            process.destroy();
        }

        @Override
        public void passivateObject(Process process) throws Exception {
            // Should really try to read from the InputStream of the Process
            // to prevent lock-ups if Rediret.INHERIT is not used.
        }
    }

    public static class CLIWorkItem implements Runnable {

        private ObjectPool<Process> mPool;
        private String mWork;

        public CLIWorkItem(ObjectPool<Process> pool, String work) {
            mPool = pool;
            mWork = work;
        }

        @Override
        public void run() {
            Process workProcess = null;
            try {
                workProcess = mPool.borrowObject();
                OutputStream os = workProcess.getOutputStream();
                os.write(mWork.getBytes(Charset.forName("UTF-8")));
                os.flush();
                // Because of the INHERIT rule with the output stream
                // the console stream overwrites itself. REMOVE THIS in production.
                Thread.sleep(100);
            } catch (Exception ex) {
                sLogger.log(Level.SEVERE, null, ex);
            } finally {
                if (workProcess != null) {
                    try {
                        // Seriously.. so many exceptions.
                        mPool.returnObject(workProcess);
                    } catch (Exception ex) {
                        sLogger.log(Level.SEVERE, null, ex);
                    }
                }
            }
        }
    }

    public static void main(String[] args) throws Exception {

        // Change the 5 to 20 in your case. 
        // Also change mock_php.exe to /usr/bin/php or wherever.
        ObjectPool<Process> pool =
                new GenericObjectPool<>(
                new CLIPoolableObjectFactory("mock_php.exe"), 5);         

        // This will only allow you to queue 100 work items at a time. I would suspect
        // that if you only want 20 PHP processes running at a time and this queue
        // filled up you'll need to implement some other strategy as you are doing
        // more work than PHP can keep up with. You'll need to block at some point
        // or throw work away.
        BlockingQueue<Runnable> queue = 
            new ArrayBlockingQueue<>(100, true);

        ThreadPoolExecutor executor = 
            new ThreadPoolExecutor(20, 20, 1, TimeUnit.HOURS, queue);

        // print some stuff out.
        executor.execute(new CLIWorkItem(pool, "Message 1\r\n"));
        executor.execute(new CLIWorkItem(pool, "Message 2\r\n"));
        executor.execute(new CLIWorkItem(pool, "Message 3\r\n"));
        executor.execute(new CLIWorkItem(pool, "Message 4\r\n"));
        executor.execute(new CLIWorkItem(pool, "Message 5\r\n"));
        executor.execute(new CLIWorkItem(pool, "Message 6\r\n"));
        executor.execute(new CLIWorkItem(pool, "Message 7\r\n"));
        executor.execute(new CLIWorkItem(pool, "Message 8\r\n"));
        executor.execute(new CLIWorkItem(pool, "Message 9\r\n"));
        executor.execute(new CLIWorkItem(pool, "Message 10\r\n"));
        executor.execute(new CLIWorkItem(pool, "Message 11\r\n"));

        executor.shutdown();
        executor.awaitTermination(4000, TimeUnit.HOURS);

        pool.close();        
    }
} 
```

程序运行的输出：

```
12172 - Message 2
10568 - Message 1
4804 - Message 3
11916 - Message 4
11116 - Message 5
12172 - Message 6
4804 - Message 7
10568 - Message 8
11916 - Message 9
11116 - Message 10
12172 - Message 11 
```

仅输出输入内容的 C++ 程序代码：

```
#include <windows.h>
#include <iostream>
#include <string>

int main(int argc, char* argv[])
{
    DWORD pid = GetCurrentProcessId();
    std::string line;
    while (true) {      
        std::getline (std::cin, line);
        std::cout << pid << " - " << line << std::endl;
    }

    return 0;
} 
```

**更新**

抱歉耽搁了。这是任何感兴趣的人的 JDK 6 版本。您必须运行一个单独的线程来从进程的 InputStream 读取所有输入。我已将此代码设置为在每个新进程旁边生成一个新线程。只要该线程还活着，它就总是从进程中读取。我没有直接输出到文件，而是将其设置为使用 Logging 框架。这样，您可以设置日志配置以转到文件、翻转、转到控制台等，而无需硬编码以转到文件。

你会注意到我只为每个进程启动一个 Gobbler，即使一个进程有标准输出和标准错误。我将 stderr 重定向到 stdout 只是为了让事情变得更容易。显然 jdk6 只支持这种类型的重定向。

```
public class StackOverflow_10037379_jdk6 {

    private static Logger sLogger = Logger.getLogger(StackOverflow_10037379_jdk6.class.getName());

    // Shamelessy taken from Google and modified. 
    // I don't know who the original Author is.
    public static class StreamGobbler extends Thread {

        InputStream is;
        Logger logger;
        Level level;

        StreamGobbler(String logName, Level level, InputStream is) {
            this.is = is;
            this.logger = Logger.getLogger(logName);
            this.level = level;
        }

        public void run() {
            try {
                InputStreamReader isr = new InputStreamReader(is);
                BufferedReader br = new BufferedReader(isr);
                String line = null;
                while ((line = br.readLine()) != null) {
                    logger.log(level, line);
                }
            } catch (IOException ex) {
                logger.log(Level.SEVERE, "Failed to read from Process.", ex);
            }
            logger.log(
                    Level.INFO, 
                    String.format("Exiting Gobbler for %s.", logger.getName()));
        }
    }

    public static class CLIPoolableObjectFactory extends BasePoolableObjectFactory<Process> {

        private String mProcessToRun;

        public CLIPoolableObjectFactory(String processToRun) {
            mProcessToRun = processToRun;
        }

        @Override
        public Process makeObject() throws Exception {
            ProcessBuilder builder = new ProcessBuilder();
            builder.redirectErrorStream(true);
            builder.command(mProcessToRun);
            Process process = builder.start();
            StreamGobbler loggingGobbler =
                    new StreamGobbler(
                    String.format("process.%s", process.hashCode()),
                    Level.INFO,
                    process.getInputStream());
            loggingGobbler.start();
            return process;
        }

        @Override
        public boolean validateObject(Process process) {
            try {
                process.exitValue();
                return false;
            } catch (IllegalThreadStateException ex) {
                return true;
            }
        }

        @Override
        public void destroyObject(Process process) throws Exception {
            // If PHP has a way to stop it, do that instead of destroy
            process.destroy();
        }

        @Override
        public void passivateObject(Process process) throws Exception {
            // Should really try to read from the InputStream of the Process
            // to prevent lock-ups if Rediret.INHERIT is not used.
        }
    }

    public static class CLIWorkItem implements Runnable {

        private ObjectPool<Process> mPool;
        private String mWork;

        public CLIWorkItem(ObjectPool<Process> pool, String work) {
            mPool = pool;
            mWork = work;
        }

        @Override
        public void run() {
            Process workProcess = null;
            try {
                workProcess = mPool.borrowObject();
                OutputStream os = workProcess.getOutputStream();
                os.write(mWork.getBytes(Charset.forName("UTF-8")));
                os.flush();
                // Because of the INHERIT rule with the output stream
                // the console stream overwrites itself. REMOVE THIS in production.
                Thread.sleep(100);
            } catch (Exception ex) {
                sLogger.log(Level.SEVERE, null, ex);
            } finally {
                if (workProcess != null) {
                    try {
                        // Seriously.. so many exceptions.
                        mPool.returnObject(workProcess);
                    } catch (Exception ex) {
                        sLogger.log(Level.SEVERE, null, ex);
                    }
                }
            }
        }
    }

    public static void main(String[] args) throws Exception {

        // Change the 5 to 20 in your case. 
        ObjectPool<Process> pool =
                new GenericObjectPool<Process>(
                new CLIPoolableObjectFactory("mock_php.exe"), 5);

        BlockingQueue<Runnable> queue = new ArrayBlockingQueue<Runnable>(100, true);

        ThreadPoolExecutor executor = new ThreadPoolExecutor(20, 20, 1, TimeUnit.HOURS, queue);

        // print some stuff out.
        executor.execute(new CLIWorkItem(pool, "Message 1\r\n"));
        executor.execute(new CLIWorkItem(pool, "Message 2\r\n"));
        executor.execute(new CLIWorkItem(pool, "Message 3\r\n"));
        executor.execute(new CLIWorkItem(pool, "Message 4\r\n"));
        executor.execute(new CLIWorkItem(pool, "Message 5\r\n"));
        executor.execute(new CLIWorkItem(pool, "Message 6\r\n"));
        executor.execute(new CLIWorkItem(pool, "Message 7\r\n"));
        executor.execute(new CLIWorkItem(pool, "Message 8\r\n"));
        executor.execute(new CLIWorkItem(pool, "Message 9\r\n"));
        executor.execute(new CLIWorkItem(pool, "Message 10\r\n"));
        executor.execute(new CLIWorkItem(pool, "Message 11\r\n"));

        executor.shutdown();
        executor.awaitTermination(4000, TimeUnit.HOURS);

        pool.close();
    }
} 
```

*输出*

```
Apr 11, 2012 8:41:02 PM stackoverflow.StackOverflow_10037379_jdk6$StreamGobbler run
INFO: 9440 - Message 3
Apr 11, 2012 8:41:02 PM stackoverflow.StackOverflow_10037379_jdk6$StreamGobbler run
INFO: 8776 - Message 2
Apr 11, 2012 8:41:02 PM stackoverflow.StackOverflow_10037379_jdk6$StreamGobbler run
INFO: 6100 - Message 1
Apr 11, 2012 8:41:02 PM stackoverflow.StackOverflow_10037379_jdk6$StreamGobbler run
INFO: 10096 - Message 4
Apr 11, 2012 8:41:02 PM stackoverflow.StackOverflow_10037379_jdk6$StreamGobbler run
INFO: 8868 - Message 5
Apr 11, 2012 8:41:02 PM stackoverflow.StackOverflow_10037379_jdk6$StreamGobbler run
INFO: 8868 - Message 8
Apr 11, 2012 8:41:02 PM stackoverflow.StackOverflow_10037379_jdk6$StreamGobbler run
INFO: 6100 - Message 10
Apr 11, 2012 8:41:02 PM stackoverflow.StackOverflow_10037379_jdk6$StreamGobbler run
INFO: 8776 - Message 9
Apr 11, 2012 8:41:02 PM stackoverflow.StackOverflow_10037379_jdk6$StreamGobbler run
INFO: 10096 - Message 6
Apr 11, 2012 8:41:02 PM stackoverflow.StackOverflow_10037379_jdk6$StreamGobbler run
INFO: 9440 - Message 7
Apr 11, 2012 8:41:02 PM stackoverflow.StackOverflow_10037379_jdk6$StreamGobbler run
INFO: 6100 - Message 11
Apr 11, 2012 8:41:02 PM stackoverflow.StackOverflow_10037379_jdk6$StreamGobbler run
INFO: Exiting Gobbler for process.295131993.
Apr 11, 2012 8:41:02 PM stackoverflow.StackOverflow_10037379_jdk6$StreamGobbler run
INFO: Exiting Gobbler for process.756434719.
Apr 11, 2012 8:41:02 PM stackoverflow.StackOverflow_10037379_jdk6$StreamGobbler run
INFO: Exiting Gobbler for process.332711452.
Apr 11, 2012 8:41:02 PM stackoverflow.StackOverflow_10037379_jdk6$StreamGobbler run
INFO: Exiting Gobbler for process.1981440623.
Apr 11, 2012 8:41:02 PM stackoverflow.StackOverflow_10037379_jdk6$StreamGobbler run
INFO: Exiting Gobbler for process.1043636732. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T20:02:16.657

你最好的选择是使用 pcntl 函数来分叉一个进程，但是进程之间的通信很困难。我建议创建一个您的进程可以读取的队列，而不是尝试将消息传递到命令行。

[Beanstalk](http://kr.github.com/beanstalkd/)有几个 PHP 客户端，您可以使用它们来处理进程之间的消息传递。

# java - 在Java中的android ListActivities之间传递数据

> ID：10037383
> 
> 赞同：0
> 
> 时间：2012-04-05T23:21:13.603
> 
> 标签：java, android, listview, listactivity

我在使此代码正常工作时遇到问题。

基本上我从一个列表活动转到另一个，并通过活动的意图将列表项中的文本传递到新列表视图，然后在新列表活动中检索该文本，然后根据该列表的值执行 http 请求物品。

**原木猫**

```
04-05 17:47:32.370: E/AndroidRuntime(30135): FATAL EXCEPTION: main
04-05 17:47:32.370: E/AndroidRuntime(30135): java.lang.ClassCastException:android.widget.LinearLayout
04-05 17:47:32.370: E/AndroidRuntime(30135): at com.thickcrustdesigns.ufood.CatogPage$1.onItemClick(CatogPage.java:66)
04-05 17:47:32.370: E/AndroidRuntime(30135): at android.widget.AdapterView.performItemClick(AdapterView.java:284)
04-05 17:47:32.370: E/AndroidRuntime(30135): at android.widget.ListView.performItemClick(ListView.java:3731)
04-05 17:47:32.370: E/AndroidRuntime(30135): at android.widget.AbsListView$PerformClick.run(AbsListView.java:1959)
04-05 17:47:32.370: E/AndroidRuntime(30135): at android.os.Handler.handleCallback(Handler.java:587)
04-05 17:47:32.370: E/AndroidRuntime(30135): at android.os.Handler.dispatchMessage(Handler.java:92)
04-05 17:47:32.370: E/AndroidRuntime(30135): at android.os.Looper.loop(Looper.java:130)
04-05 17:47:32.370: E/AndroidRuntime(30135): at android.app.ActivityThread.main(ActivityThread.java:3691)
04-05 17:47:32.370: E/AndroidRuntime(30135): at java.lang.reflect.Method.invokeNative(Native Method)
04-05 17:47:32.370: E/AndroidRuntime(30135): at java.lang.reflect.Method.invoke(Method.java:507)
04-05 17:47:32.370: E/AndroidRuntime(30135): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
04-05 17:47:32.370: E/AndroidRuntime(30135): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
04-05 17:47:32.370: E/AndroidRuntime(30135): at dalvik.system.NativeStart.main(Native Method) 
```

**列表活动 1**

```
package com.thickcrustdesigns.ufood;

import java.util.ArrayList;
import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONException;
import org.json.JSONObject;
import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.Button;
import android.widget.ListView;
import android.widget.TextView;

public class CatogPage extends ListActivity {

    ListView listView1;
    Button btn_bk;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.definition_main);

        btn_bk = (Button) findViewById(R.id.btn_bk);

        listView1 = (ListView) findViewById(android.R.id.list);

        ArrayList<NameValuePair> nvp = new ArrayList<NameValuePair>();

        nvp.add(new BasicNameValuePair("request", "categories"));

        ArrayList<JSONObject> jsondefs = Request.fetchData(this, nvp);

        String[] defs = new String[jsondefs.size()];

        for (int i = 0; i < jsondefs.size(); i++) {
            try {
                defs[i] = jsondefs.get(i).getString("Name");
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        uFoodAdapter adapter = new uFoodAdapter(this, R.layout.definition_list,
                defs);

        listView1.setAdapter(adapter);
        ListView lv = getListView();
        lv.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                TextView tv = (TextView) view;
                String p = tv.getText().toString();
                Intent i = new Intent(getApplicationContext(), Results.class);
                i.putExtra("category", p);
                startActivity(i);
            }
        });

        btn_bk.setOnClickListener(new View.OnClickListener() {
            public void onClick(View arg0) {
                Intent i = new Intent(getApplicationContext(),
                        UFoodAppActivity.class);
                startActivity(i);
            }
        });

    }

}

**ListActivity 2**

package com.thickcrustdesigns.ufood;

    import java.util.ArrayList;
    import org.apache.http.NameValuePair;
    import org.apache.http.message.BasicNameValuePair;
    import org.json.JSONException;
    import org.json.JSONObject;
    import android.app.ListActivity;
    import android.os.Bundle;
    import android.widget.ListView;

    public class Results extends ListActivity {

    ListView listView1;

    enum Category {
        Chicken, Beef, Chinese, Cocktails, Curry, Deserts, Fish, ForOne {
            public String toString() {
                return "For One";
            }
        },
        Lamb, LightBites {
            public String toString() {
                return "Light Bites";
            }
        },
        Pasta, Pork, Vegetarian
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        this.setContentView(R.layout.definition_main);

        listView1 = (ListView) findViewById(android.R.id.list);

        Bundle data = getIntent().getExtras();
        String category = data.getString("category");

        Category cat = Category.valueOf(category);

        String value = null;

        switch (cat) {
        case Chicken:
            value = "Chicken";
            break;
        case Beef:
            value = "Beef";
            break;
        case Chinese:
            value = "Chinese";
            break;
        case Cocktails:
            value = "Cocktails";
            break;
        case Curry:
            value = "Curry";
            break;
        case Deserts:
            value = "Deserts";
            break;
        case Fish:
            value = "Fish";
            break;
        case ForOne:
            value = "ForOne";
            break;
        case Lamb:
            value = "Lamb";
            break;
        case LightBites:
            value = "LightBites";
            break;
        case Pasta:
            value = "Pasta";
            break;
        case Pork:
            value = "Pork";
            break;
        case Vegetarian:
            value = "Vegetarian";
        }

        ArrayList<NameValuePair> nvp = new ArrayList<NameValuePair>();

        nvp.add(new BasicNameValuePair("request", "category"));

        nvp.add(new BasicNameValuePair("cat", value));

        ArrayList<JSONObject> jsondefs = Request.fetchData(this, nvp);

        String[] defs = new String[jsondefs.size()];

        for (int i = 0; i < jsondefs.size(); i++) {
            try {
                defs[i] = jsondefs.get(i).getString("Name");
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        uFoodAdapter adapter = new uFoodAdapter(this, R.layout.definition_list,
                defs);
        listView1.setAdapter(adapter);

           }

       } 
```

**要求**

```
package com.thickcrustdesigns.ufood;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONObject;
import android.content.Context;
import android.util.Log;
import android.widget.Toast;

public class Request {

    @SuppressWarnings("null")
    public static ArrayList<JSONObject> fetchData(Context context,
            ArrayList<NameValuePair> nvp) {
        ArrayList<JSONObject> listItems = new ArrayList<JSONObject>();
        InputStream is = null;
        try {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(
                    "http://co350-11d.projects02.glos.ac.uk/php/database.php");
            httppost.setEntity(new UrlEncodedFormEntity(nvp));
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();
        } catch (Exception e) {
            Log.e("log_tag", "Error in http connection" + e.toString());
        }

        // convert response to string

        String result = "";
        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            InputStream stream = null;
            StringBuilder sb = null;

            while ((result = reader.readLine()) != null) {
                sb.append(result + "\n");
            }

            stream.close();
            result = sb.toString();

        } catch (Exception e) {
            Log.e("log_tag", "Error converting result " + e.toString());
        }

        try {
            JSONArray jArray = new JSONArray(result);

            for (int i = 0; i < jArray.length(); i++) {

                JSONObject jo = jArray.getJSONObject(i);

                listItems.add(jo);

            }

        } catch (Exception e) {
            Toast.makeText(context.getApplicationContext(), "None Found!",
                    Toast.LENGTH_LONG).show();

        }
        return listItems;

    }

}

package com.thickcrustdesigns.ufood;

import java.util.ArrayList;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONException;
import org.json.JSONObject;
import android.app.ListActivity;
import android.os.Bundle;
import android.widget.ListView;

public class Results extends ListActivity {

    ListView listView1;

    enum Category {
        Chicken, Beef, Chinese, Cocktails, Curry, Deserts, Fish, ForOne {
            public String toString() {
                return "For One";
            }
        },
        Lamb, LightBites {
            public String toString() {
                return "Light Bites";
            }
        },
        Pasta, Pork, Vegetarian
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        this.setContentView(R.layout.definition_main);

        listView1 = (ListView) findViewById(android.R.id.list);

        Bundle data = getIntent().getExtras();
        String category = data.getString("category");

        Category cat = Category.valueOf(category);

        String value = null;

        switch (cat) {
        case Chicken:
            value = "Chicken";
            break;
        case Beef:
            value = "Beef";
            break;
        case Chinese:
            value = "Chinese";
            break;
        case Cocktails:
            value = "Cocktails";
            break;
        case Curry:
            value = "Curry";
            break;
        case Deserts:
            value = "Deserts";
            break;
        case Fish:
            value = "Fish";
            break;
        case ForOne:
            value = "ForOne";
            break;
        case Lamb:
            value = "Lamb";
            break;
        case LightBites:
            value = "LightBites";
            break;
        case Pasta:
            value = "Pasta";
            break;
        case Pork:
            value = "Pork";
            break;
        case Vegetarian:
            value = "Vegetarian";
        }

        ArrayList<NameValuePair> nvp = new ArrayList<NameValuePair>();

        nvp.add(new BasicNameValuePair("request", "category"));

        nvp.add(new BasicNameValuePair("cat", value));

        ArrayList<JSONObject> jsondefs = Request.fetchData(this, nvp);

        String[] defs = new String[jsondefs.size()];

        for (int i = 0; i < jsondefs.size(); i++) {
            try {
                defs[i] = jsondefs.get(i).getString("Name");
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        uFoodAdapter adapter = new uFoodAdapter(this, R.layout.definition_list,
                defs);
        listView1.setAdapter(adapter);

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T23:06:12.833

基本上我改变了它通过使用 onitemclick 的位置参数从用于填充列表视图的数组中获取项目来检索要发送的数据的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T23:25:37.223

您的问题可能就在`TextView tv = (TextView) view;`这里`LinearLayout``TextView`

# quartz.net - Quartz.Net 即时创造就业机会

> ID：10037387
> 
> 赞同：3
> 
> 时间：2012-04-05T23:22:06.123
> 
> 标签：quartz.net

Job 类必须实现 Job 接口。”我使用 Quartz.Net 1.0.3 创建了简单的作业

```
 public class SimpleTestJob : IJob
    {
        public virtual void Execute(JobExecutionContext context)
        {
             System.Diagnostics.EventLog.WriteEntry("QuartzTest", "This is a test run");

                   }
    } 
```

然后我尝试将上面的作业动态添加到 Quartz 服务器

首先我收到了一个使用反射的类型

```
 string jobType = "Scheduler.Quartz.Jobs.SimpleTestJob,Scheduler.Quartz,Version=1.0.0.0,Culture=neutral,PublicKeyToken=null";    

 var schedType= Type.GetType(jobType, false, true); 
```

它正在工作。然后我正在尝试创建 JobDetail 对象

```
JobDetail job = job = new JobDetail(jobName, groupName, schedType.GetType()); 
```

但我收到来自 Quartz.Net 框架的错误。

```
"Job class must implement the Job interface." 
```

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T19:35:59.443

尝试删除 virtual 关键字，您可能还想尝试使用具有 schedType.GetType() 的 typeof 运算符。我不确定 schedType 的最终类型是什么，它被定义为 var。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T20:03:11.527

我使用的是 Quartz 1.0.3，它是用 .net 3.5 编译的。

但是 schedType.GetType

返回具有属性 RunTime 版本 4 的类型。

真的我不需要使用 GetType 函数，因为我已经有一个类型，我之前收到过

```
var schedType= Type.GetType(jobType, false, true); 
```

所以我的解决方法是

```
JobDetail job = new JobDetail(jobName, groupName, schedType); 
```

# widget - 如何仅在 YUI3 小部件父/子中订阅子事件？

> ID：10037393
> 
> 赞同：0
> 
> 时间：2012-04-05T23:23:15.517
> 
> 标签：widget, yui, yui3

再会！

我正在尝试使用 YUI3 Widget-parent 和 widget-child 构建分层小部件，目前正在研究 Hierarchical [ListBox Widget](http://yuilibrary.com/yui/docs/widget/widget-parentchild-listbox.html)。

我只想订阅被点击的特定孩子的点击事件。从上面的页面继续使用示例，我正在做：

 `````
listbox.on("listbox:click", function(e) {...}); 
````  `现在，当我单击列表中的“项目三 - 二”条目时，会为“项目三 - 二”、“项目三”和根小部件触发此事件。在该事件处理程序中，我找不到确定 e.target 是我单击的原始小部件还是其父小部件的方法。

所以我的问题是：

1.  我如何发现我在被点击的原始小部件的事件处理程序中？
2.  是否可以使单击的小部件成为唯一触发事件的小部件？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:20:39.357

[这是一个示例小提琴。](http://jsfiddle.net/mjhm/A6nqR/)

如果您只想`e.target`使用叶节点：

```
listbox.on('option:click', function (e) {... 
```

在我的示例中，订阅`listbox:click`实际上并没有获取叶节点，但它获取了两个父`listbox`祖先小部件的点击。``

# c - 在 fread() 之后访问内存缓冲区

> ID：10037397
> 
> 赞同：2
> 
> 时间：2012-04-05T23:23:42.567
> 
> 标签：c, buffer, fread

我对如何`fread()`使用感到困惑。以下是来自[cplusplus.com的示例](http://www.cplusplus.com/reference/clibrary/cstdio/fread/)

```
/* fread example: read a complete file */
#include <stdio.h>
#include <stdlib.h>

int main () {
  FILE * pFile;
  long lSize;
  char * buffer;
  size_t result;

  pFile = fopen ( "myfile.bin" , "rb" );
  if (pFile==NULL) {fputs ("File error",stderr); exit (1);}

  // obtain file size:
  fseek (pFile , 0 , SEEK_END);
  lSize = ftell (pFile);
  rewind (pFile);

  // allocate memory to contain the whole file:
  buffer = (char*) malloc (sizeof(char)*lSize);
  if (buffer == NULL) {fputs ("Memory error",stderr); exit (2);}

  // copy the file into the buffer:
  result = fread (buffer,1,lSize,pFile);
  if (result != lSize) {fputs ("Reading error",stderr); exit (3);}

  /* the whole file is now loaded in the memory buffer. */

  // terminate
  fclose (pFile);
  free (buffer);
  return 0;
} 
```

假设我还没有使用`fclose()`。我现在可以将`buffer`其视为一个数组并访问类似的元素`buffer[i]`吗？还是我必须做其他事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T23:25:55.203

当然可以，当你调用`fread`数据时，实际上是在缓冲区内复制的。您可以安全地关闭文件并对缓冲区本身做任何您想做的事情。

如果您询问是否可以通过修改缓冲区和原始文件来访问缓冲区，那么答案是否定的，您必须通过以写入模式打开文件并使用`fwrite`.

如果您有一个二进制文件，其中包含例如 2 个浮点数、1 个整数和 16 个字符的字符串，您可以轻松定义一个结构

```
struct MyData
{
  float f1;
  float f2;
  int i1;
  char string[16];
}; 
```

and read it directly with:

```
struct MyData buffer;
fread(&buffer, 1, sizeof(struct MyData), file);
.. buffer.f1 .. 
```

# python - 导入 pywiiuse 进行测试

> ID：10037401
> 
> 赞同：0
> 
> 时间：2012-04-05T23:24:21.183
> 
> 标签：python, python-2.7

## 这可能是一个简单的问题。[但是我从这里](http://code.google.com/p/pywiiuse/)下载了 pywiiuse 库，还下载了示例。但是，当我尝试运行其中一个示例时，我最终会遇到导入问题。我不确定我是否已正确配置所有内容以运行。我在尝试运行 example.py 时收到一个错误：

```
Press 1&2
Traceback (most recent call last):
  File "example.py", line 73, in <module>
    wiimotes = wiiuse.init(nmotes)
  File "/home/thed0ctor/Descargas/wiiuse-0.12/wiiuse/__init__.py", line 309, in init
    dll = ctypes.cdll.LoadLibrary('libwiiuse.so')
  File "/usr/lib/python2.7/ctypes/__init__.py", line 431, in LoadLibrary
    return self._dlltype(name)
  File "/usr/lib/python2.7/ctypes/__init__.py", line 353, in __init__
    self._handle = _dlopen(self._name, mode)
OSError: libwiiuse.so: cannot open shared object file: No such file or directory 
```

* * *

我真的只是从这个库开始，并没有真正看到任何关于如何配置 pywiiuse 的文档，因此非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T23:39:11.810

pywiiuse 库是[wiiuse C 库](http://sourceforge.net/projects/wiiuse/)的 Python 包装器。

在您可以使用包装器之前，您首先需要安装它包装的库，从[这个下载页面](http://sourceforge.net/projects/wiiuse/files/wiiuse/)选择最新版本并为您的系统下载适当的安装包（可能是 .tar.gz，因为您似乎在 Linux 上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T02:49:22.053

将 libwiiuse.so 的链接添加到 /usr/local/lib。

我也遇到过这种情况，我知道它为什么快乐，但我不知道深层原因。

# ruby-on-rails - 如何使用 rvm 在 Rails 上安装 ruby ？

> ID：10037404
> 
> 赞同：1
> 
> 时间：2012-04-05T23:24:29.110
> 
> 标签：ruby-on-rails, ruby-on-rails-3, osx-snow-leopard, rvm

我一直在寻找如何通过我的 Mac 上的终端安装它。我用的是雪豹。当我使用命令时： rvm install 1.9.3 我还遵循了导致我安装的其他程序，现在当前版本是 1.8.3

> 运行'./configure --prefix="/Users/jose/.rvm/usr"'时出错，请阅读/Users/jose/.rvm/log/ruby-1.9.3-p125/yaml/configure.log

然后它提到了一些关于 xcode 的内容，并且在 PATH 中找不到 autoreconf。

> 运行 'patch -F 25 -p1 -N -f <"/Users/jose/.rvm/patches/ruby/1.9.3/p125/xcode-debugopt-fix-e34840.diff"' 时出错，请阅读 /Users/ jose/.rvm/log/ruby-1.9.3-p125/patch.apply.xcode-debugopt-fix-r34840.log rvm 需要 autoreconf 来安装选定的 ruby​​ 解释器，但是在 PATH 中找不到 autoreconf

我已经尝试了一段时间，发现我需要有 Xcode 用于我找不到的雪豹。所以我的最后一个选择是升级到狮子，但我不知道升级。有点害怕升级，一切都变得有问题。

> Rails 2.3.5
> Jose-Gomezs-MacBook-Pro:~ josegomez$ ruby​​ -v
> ruby​​ 1.8.7 (2009-06-12 patchlevel 174) [universal-darwin10.0]
> Jose-Gomezs-MacBook-Pro:~ josegomez$ gem -v
> 1.8.15
> 何塞-戈麦斯-MacBook-Pro:~ josegomez$ rvm -v
> 
> rvm 1.11.6 (stable) by Wayne E. Seguin，Michal Papis > [https://rvm.beginrescueend.com/]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T00:31:27.747

安装 brew，然后：

```
brew install automake 
```

将 autoreconf 添加到您的路径中。

1.9.3 现在可以与 XCode 4.3 中的 LLVM 编译器一起使用，因此从 App Store 安装最新版本应该不会有任何问题。

我昨晚重建了我的 Mac，一切都非常标准。来自 App Store 的 RVM、Brew、XCode、来自 XCode 的命令行工具、来自 brew 的 autoreconf、来自 rvm 的 1.9.3-p125。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T00:34:41.477

对于获取补丁应用程序问题 - 使用`rvm reinstall 1.9.3`.

要安装 ruby​​ 1.8.7，您需要 GCC 4.2（如（gcc-4.2 程序）而不是基于 LLVM 的编译器（如 clang），最简单的方法是 osx-gcc-installer，您也可以安装 Xcode 4.1 - 但这是更难。

请注意`1.9.3-p125`尚未完全准备好clang，您仍然可以更好地使用`gcc-4.2`表格`osx-gcc-installer`/`Xcode 4.1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T23:45:46.067

我是在我的 Mac 上完成的，我记得在我的 .bash_profile 中更改了一些设置。这是我遵循的链接。希望它也适用于你。

[http://net.tutsplus.com/tutorials/ruby/how-to-install-ruby-on-a-mac/](http://net.tutsplus.com/tutorials/ruby/how-to-install-ruby-on-a-mac/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T00:39:34.213

在 Apple 注册一个免费的开发者帐户，您就可以访问 Xcode for Snow Leopard。一旦你安装了 Xcode 和包含的开发者工具，你就可以使用 RVM 安装 Ruby on Rails。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T00:48:54.387

只有标题相关：

```
bash -s stable --rails < <(curl -s https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer) 
```

您可以在此处获取更多详细信息：[https](https://gist.github.com/2246595) ://gist.github.com/2246595 - 这将进入引导模式，有助于获取应用程序并运行

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-06T01:49:18.773

试试 ThoughtBot 的这个脚本来自动配置你的系统： [https ://github.com/thoughtbot/laptop](https://github.com/thoughtbot/laptop)

它做了很多，通常需要一个 Lion 系统，安装 gcc，并获得 rvm，最后是 rails。极力推荐。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-09T22:36:45.473

只是为了关闭它，我发现我必须将我在 Mac 上的日期推迟到 2012 年 1 月之前的某个时间并安装 xcode。安装后，您可以将时间设置为正常，您应该一切顺利。但是我从我的导师那里得到了一份非常酷的 xcode。

# php - PHP & AJAX SEO - 适用于使用 javascript 和非 javascript 的用户

> ID：10037406
> 
> 赞同：1
> 
> 时间：2012-04-05T23:24:42.790
> 
> 标签：php, jquery, ajax

所以我知道这可能是一个悬而未决的问题，但我需要离开来解决这个问题。

我可以让网站执行加载正文内容的 ajax 请求，或者我可以拥有重新加载整个页面的链接。

我需要网站符合 SEO，并且我真的希望标题在内容更改时不会重新加载，原因是我们有一个播放实时音频的媒体播放器。

是否存在如果 Google BOT 或没有启用 ajax 的人会像正常的 href 那样做网站，但如果 ajax 或 javascript 允许做 ajax 方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T23:33:22.970

首先在没有 JS 的情况下构建网站，确保它按预期工作，每个链接都链接一个新的唯一页面。Google 会在没有 JS 的情况下解析您的网站，因此您在关闭 JS 时所看到的就是他所看到的。

然后添加 JS，使用单击处理程序来防止默认页面重新加载并改为执行您的 ajax 逻辑。您可以使用 JQuery 和 .load() 很容易地做到这一点。

其他解决方案，您可以使用推荐的 Google 方法（[https://developers.google.com/webmasters/ajax-crawling/](https://developers.google.com/webmasters/ajax-crawling/)），但它的工作量更大，SEO 效率更低。

或者，您可以将音频播放器放在 iFrame 中...

# c - 在 C 中识别这个 typedef 结构的各个部分？

> ID：10037407
> 
> 赞同：4
> 
> 时间：2012-04-05T23:24:43.457
> 
> 标签：c, syntax

请帮助我识别此部分`typdef`以及每个部分的作用以及如何使用它：

```
typedef struct my_struct
{
        int a;
        int b;
        int c;
} struct_int, *p_s;

struct_int struct_array[5]; 
```

我认为他们是什么，如果错了请纠正：

1.  `typedef struct`正在创建一种新类型。
2.  `my_struct`是此类型的名称，但未在其余代码中使用。
3.  `struct_int`是我们可以在代码中使用的类型的一个实例。
4.  `*p_s`是专门指向我们创建的一个实例的指针。
5.  `struct_array`是我们创建的实例的数组。（这部分让我很困惑，因为我们已经创建了一个实例......）

此外，在创建结构数组时，为什么我们使用`struct_int`而不是`my_struct`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T23:34:35.283

`struct my_struct`是类型的名称，`my_struct`是标签名称而不是类型。

`typedef`不在 C 中创建类型，而是为现有类型创建别名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T23:38:17.990

不完全的！以下是不同部分的含义：

`struct my_struct`：在这里，您正在创建一个新的数据类型，`struct my_struct`每当您想要创建对象的新实例时，您都会引用它。例如你应该说：`struct my_struct a;`而**不是** `my_struct a;`

`typedef struct my_struct {} struct_int;`: 在这里您只需为其创建一个别名`struct my_struct`并为其命名`struct_int`。从现在开始，你可以说，`struct_int a;`而不是`struct my_struct a;`

`typedef struct my_struct {} *p_s;`在这里，您为指向 的数据类型创建一个新别名`struct my_struct`。你可以像这样使用它：`p_s newStruct = malloc(sizeof(struct_int));`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-05T23:40:15.197

> `typedef struct`正在创建一种新类型。

`typedef`是定义`struct_int`和，它们分别是和的`p_s`同义词。这个想法是为了让您不必长时间输入内容并提高可读性（并非总是如此）。`struct my_struct``struct my_struct*`

> `my_struct`是此类型的名称，但未在其余代码中使用。

因为您必须使用`my_struct`as `struct my_struct`，但您必须`typedef`引用`struct_int`该类型并且它更简单。

> `struct_int`是我们可以在代码中使用的类型的一个实例。

不，请阅读以上内容。如果您删除了`typedef`，那么您*将*创建两个变量`struct_int`和`p_s`.

> `*p_s`是专门指向我们创建的一个实例的指针。

不，请阅读以上内容。

> `struct_array`是我们创建的实例的数组。（这部分让我很困惑，因为我们已经创建了一个实例......）

`struct_array`是一个类型数组`struct_int`，因此它是一个类型数组`struct my_struct`。在*您*的`struct`.

> 此外，在创建结构数组时，为什么我们使用`struct_int`而不是`my_struct`？

与上述问题之一相同；你可以使用`struct my_struct`or `struct_int`,`struct_int`更短，它会破坏`typedef`ing的目的`struct_int`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-05T23:38:57.570

`my_struct`是此类结构的名称。以后可以使用它来声明更多这种类型的结构。

`struct_int`是 typedef 创建的别名的名称。

`*p_s`是指向`my_struct`(aka `struct_int`) 类型结构的指针。它可以指向这种类型的结构。

`struct_array`是 s 数组的名称`my_struct`。但是，由于它是用 alias 声明的`struct_int`，我们稍后应该将其称为 one。

使用别名是个人偏好，实际上可以删除其中一个`my_struct`或另一个。`struct_int`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-05T23:44:22.700

您的假设部分正确。我想进入 3\. 和 4.

如果你删除了`typedef`并且有这个：

```
struct my_struct {
  // ...
} struct_int_v, *p_s_v; 
```

然后，您将声明两个*变量* `struct_int_v`并`p_s_v`使用您期望的类型（一个是`struct my_struct`，另一个是`struct my_struct*`）。

但是，在引入**stroage 说明符** `typedef`时，您是在告诉 C 不要创建变量而是创建类型，而声明语法是相同的。

因此，`struct_int`将是变量将具有的类型，并且将是变量*将*`struct_int_v`具有`p_s`的类型`struct_int_v`。

请注意，存储说明符`typedef`（或`static`就此而言）适用于所有*变量*（而其他限定符如 eg`const`或`volatile`适用于相反的*类型*）最多`;`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-05T23:44:54.997

您主要回答了您自己的问题，所以我将解决我看到的剩下的两点：

首先，`struct`定义创建的类型的名称是`struct my_struct`。您可以声明变量，例如

```
struct my_struct a;
struct my_struct b; 
```

但你不想一直写`struct`，所以你使用`typedef`. 单独定义结构和别名可能会更清楚一些：

```
struct my_struct {
  int a, b, c;
};
typedef struct my_struct struct_int;
typedef struct my_struct *p_s; 
```

这首先定义了一个名为的类型，然后定义为该类型的别名`struct my_struct`，然后定义为该类型的别名。您编写的代码将所有这三件事合二为一，但它的含义相同。`struct_int``struct my_struct``p_s``struct my_struct *`

其次，类型别名`p_s`与数组无关`struct_array`。`*p_s`没有定义结构的实例，因为它是 a 的一部分：`typedef`它定义了一个类型别名。但即使没有`typedef`，`p_s`因此是一个实际的指针变量，之后定义的数组也是一个单独且不相关的变量。

# c# - 文件夹删除不起作用

> ID：10037408
> 
> 赞同：1
> 
> 时间：2012-04-05T23:24:55.470
> 
> 标签：c#, asp.net, vb.net

```
If System.IO.Directory.Exists(HttpContext.Current.Server.MapPath("images/TravelogueGallery/" & getMaxID())) Then
    System.IO.Directory.Delete(HttpContext.Current.Server.MapPath("images/TravelogueGallery/" & getMaxID()), True)
End If 
```

我正在使用上面的代码片段来删除一个目录，但我收到了这个错误：

> 'G:\Projects\Latest\LTCIndia 05-04-12 1415\images\TravelogueGallery\19' 不是有效的虚拟路径。

代码有什么问题？

**更新：**我已经用正确的答案更新了问题。上面的代码片段工作得很好。谢谢你们的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T23:47:32.667

```
If System.IO.Directory.Exists(HttpContext.Current.Server.MapPath("images/TravelogueGallery/" & getMaxID())) Then
    System.IO.Directory.Delete(HttpContext.Current.Server.MapPath("images/TravelogueGallery/" & getMaxID()), True)
End If 
```

这是正确的答案。我已经用正确的答案更新了这个问题。上面的代码片段工作得很好。谢谢你们的时间。

# java - 向 JPanel 添加未知数量的 JComponent

> ID：10037410
> 
> 赞同：0
> 
> 时间：2012-04-05T23:25:23.417
> 
> 标签：java, user-interface, applet, jpanel, jscrollpane

再会，

我正在构建一个小程序（确切地说是 JApplet），我将它分成两个面板。顶部面板称为 DisplayPanel，它是扩展 JPanel 的自定义类。底部面板称为 InputPanel，它也扩展了 JPanel。

如上所述，我可以将这两个面板添加到小程序中，它们可以正常显示。我想做的下一件事是让*InputPanel*能够保存随机数量的 JComponent 对象，所有这些对象都是垂直列出的。这意味着*InputPanel*应该能够向其抛出 JButton、JLabels、JTextField 等。然后我希望*InputPanel*显示某种滚动功能。

问题是，由于这两个面板已经在我的小程序中，我需要*InputPanel*保持与添加到小程序时相同的大小。因此，例如，如果我的小程序（来自网络浏览器 html 代码）的大小为 700,700，然后*DisplayPanel*为 700 x 350，并且*InputPanel*在其下方具有相同的尺寸，我希望能够添加很多 JComponents 像按钮，到*InputPanel*和面板将保持 700 x 350 的位置在它所在的相同位置，如果需要，只有面板会有滚动条。

我玩过许多不同的 JScrollPane 组合，但就是无法获得它。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T13:06:20.263

再会，

好的，我能够回答我想要做的事情，所以我想我会发布一个答案以供将来参考。请记住，我的目标是将两个面板附加到 JApplet 上，然后底部面板应该能够容纳尽可能多的 JComponents 并且 Applet 的大小不会改变，但底部面板将可以滚动与 JScrollPane。

如果您在顶部面板中选择了一个对象，然后在下方显示一个面板，您可以控制您选择的对象，这将非常有用。我正在制作一个网络模拟器，在顶部面板中，您有一个网络图，您可以选择一个主机，例如，然后设置其 IP 地址。但是，如果您选择防火墙，例如，您可以确定要阻止哪些端口。

我希望这会有所帮助并感谢@Andrew Thompson。

```
import java.awt.Dimension;

import javax.swing.BoxLayout;
import javax.swing.JApplet;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;

public class Applet extends JApplet
{
    JPanel p1;
    JPanel p2;
    JPanel p3;

    JScrollPane s1;

    public Applet()
    {
        p1 = new JPanel();
        p2 = new JPanel();
        p3 = new JPanel();

        s1 = new JScrollPane(p3,s1.VERTICAL_SCROLLBAR_ALWAYS,s1.HORIZONTAL_SCROLLBAR_ALWAYS);

    }

    @Override
    public void init()
    {
        super.init();
        for(int i=0;i<100;i++)
        {
            p3.add(new JButton("Hello"));
            p3.add(new JLabel("blah"));
            p3.add(new JButton("Sup"));
        }

        p1.setPreferredSize(new Dimension(this.getWidth(), this.getHeight()));
        p2.setPreferredSize(new Dimension(this.getWidth(),(int) (this.getHeight()*0.6667)));

        p3.setLayout(new BoxLayout(p3,BoxLayout.PAGE_AXIS));
        s1.setPreferredSize(new Dimension(this.getWidth(),(int)(this.getHeight()*0.33333)));

        p1.add(p2);
        p1.add(s1);

        this.add(p1);
    }

} 
```

# c# - 写入csv文件

> ID：10037414
> 
> 赞同：2
> 
> 时间：2012-04-05T23:25:49.560
> 
> 标签：c#, text, csv

我收到了以下文本形式的警报

```
NE=JKHGDUWJ3  Alarm=Data Center STALZ AC Failure  Occurrence=2012/4/3 22:18:19 GMT+02:00  Clearance=Details=Cabinet No.=0, Subrack No.=40, Slot No.=0, Port No.=5, Board Type=EDS, Site No.=49, Site Type=HSJYG500 GSM, Site Name=Google1  . 
```

我需要将它填充到 csv 文件中，以便稍后我可以执行一些分析

我想出了这个

```
if (!File.Exists(filesName)) {
    string header = "NE,Alarm,Occurrence,Clearance,Details";
    File.AppendAllText(filesName,header+Environment.NewLine);
}
StringBuilder sb = new StringBuilder();
string line = textBoxAlarm.Text;

int index = line.IndexOf("  ");
while (index > 0) {
    string token = line.Substring(0, index).Trim();
    line = line.Remove(0, index + 2);

    string[] values = token.Split('=');
    if (values.Length ==2) {
        sb.Append(values[1] + ",");
    } else {
        if (values.Length % 2 == 0) {
            string v = token
                .Remove(0, values[0].Length + 1)
                .Replace(',', ';');
            sb.Append(v + ",");
        } else {
            sb.Append("********" + ",");
            string v = token
                .Remove(0, values[0].Length + 1 + values[1].Length + 1)
                .Replace(',', ';');
            sb.Append(v + ",");
        }
    }
    index = line.IndexOf("  ");
}
File.AppendAllText(filesName, sb.ToString() + Environment.NewLine); 
```

结果如我所愿，除非我到达

```
Details=Cabinet No.=0, Subrack No.=40, Slot No.=0,
Port No.=5, Board Type=KDL, Site No.=49, Site Type=JDKJH99 GSM, Site Name=Google1 . 
```

我无法将它们分成单独的字段。

结果显示为

![示例结果](../Images/f3f5bdb99358313526eb2447714eeb7e.png)

我想拆分详细信息我希望详细信息中的每个元素都在列中

变得像

![在此处输入图像描述](../Images/f6baa1c73cfd767c9a7449e71fa3df76.png)

它真的很烦人:-)

请帮忙，提前谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T23:37:38.873

在这一行之后：

```
string v = token.Remove(0, values[0].Length + 1 + values[1].Length + 1).Replace(',', ';') 
```

做：

```
var detailParts = v.Split(";".ToCharArray()); 
```

现在填充细节部分。并将它们附加到`sb`，以填充您需要执行此类操作的详细信息部分。

```
detailPart[i].Split("=".ToCharArrray())[1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T23:58:58.970

使用此正则表达式拆分

```
string[] values = Regex.Split(line,
                              @",?\s*\w+(\sNo\.|\sType|\sName)?=",
                              RegexOptions.ExplicitCapture); 
```

它应该立即拆分整条线。它唯一不能做的就是删除“。” 在该行的末尾，它还会产生一些您必须删除的不需要的条目（我用减号标记它们）。这是我得到的结果：

```
    [0]-：“”  
    [1]：“JKHGDUWJ3”  
    [2]：“数据中心 STALZ AC 故障”  
    [3] : "2012/4/3 22:18:19 GMT+02:00"  
    [4]：“”  
    [5]-：“”  
    [6]：“0”  
    [7]：“40”  
    [8]：“0”  
    [9]：“5”  
    [10]：“EDS”  
    [11]：“49”  
    [12]：“HSJYG500 GSM”  
    [13]：“谷歌1。”  

```

--

让我解释一下正则表达式`,?\s*\w+(\sNo\.|\sType|\sName)?=`

`,?`                                             可选逗号
`\s*\w+`                                     可能前面有空格的单词
`(\sNo\.|\sType|\sName)?`   可选 a`" No."`或 a`" Type"`或`" Name"`
`=`                                               等号

* * *

**更新**

完整的代码如下所示

```
if (!File.Exists(filesName)) {
    string header = "NE,Alarm,Occurrence,Clearance,CabinetNo,SubrackNo,SlotNo,PortNo,BoardType,SiteNo,SiteType,SiteName";
    File.AppendAllText(filesName, header + Environment.NewLine);
}
string line = textBoxAlarm.Text.TrimEnd(' ', '.');
string[] values = Regex.Split(line, @",?\s*\w+(\sNo\.|\sType|\sName)?=",
                              RegexOptions.ExplicitCapture);
List<string> valuesList = values.ToList();
valuesList.RemoveAt(5); // Remove the empty Details part.
valuesList.RemoveAt(0); // Remove the first empty part.
values = valuesList
    .Select(s => s == "" ? "********" : s)
    .ToArray();
File.AppendAllText(filesName, String.Join(",", values) + Environment.NewLine); 
```

# javascript - 花式框图像有时会呈现在框外

> ID：10037416
> 
> 赞同：0
> 
> 时间：2012-04-05T23:25:58.267
> 
> 标签：javascript, jquery, html, django-templates, fancybox

编辑：问题可以在这里看到： http: [//school.collegebrain.com/images/university-of-washington/](http://school.collegebrain.com/images/university-of-washington/)。它只发生了 1/15 次，但这仍然太频繁了。

我有以下 Django 模板：

```
<script type="text/javascript" src="{{ STATIC_URL }}js/ 
jquery.fancybox-1.3.4.pack.js"></script> 
<link rel="stylesheet" href="{{ STATIC_URL }}css/ 
jquery.fancybox-1.3.4.css" type="text/css" media="screen" /> 
{% include "submission-form.html" with section="photos" %} 
<div class="commentables"> 
        {% load thumbnail %} 
    {% for story in objects %} 
            <div class="image {% if forloop.counter|add:"-1"| 
divisibleby:picsinrow %}left{% else %}{% if forloop.counter| 
divisibleby:picsinrow %}right{% else %}middle{% endif %}{% endif %}"> 
                {% if story.image %} 
                    {% thumbnail story.image size crop="center" as full_im %} 
                                <a rel="gallery" href="{% url post slug=story.slug %}"> 
                                <img class="preview" {% if story.title %} 
alt="{{ story.title }}" {% endif %} src="{{ full_im.url }}" full- 
image="{% if story.image_url %}{{ story.image_url }}{% else %} 
{{ story.image.url }}{% endif %}"> 
                                        </a> 
                    {% endthumbnail %} 
                {% else %} 
                        {% if story.image_url %} 
                            {% thumbnail story.image_url size crop="center" as 
full_im %} 
                                <a rel="gallery" href="{% url post slug=story.slug %}"> 
                                        <img class="preview" {% if story.title %} 
alt="{{ story.title }}" {% endif %} src="{{ full_im.url }}" full- 
image="{{ story.image_url }}"> 
                                                </a> 
                            {% endthumbnail %} 
                        {% endif %} 
                {% endif %} 
        </div> 
    {% endfor %} 
        {% if rowid != "last" %} 
        <br style="clear: both" /> 
        {% endif %} 
    {% if not no_more_button %} 
    <p style="text-align: right;" class="more-results"><a href="{% url 
images school_slug tag_slug %}">more...</a></p> 
    {% endif %} 
</div> 
<script> 
    $(document).ready(function(){ 
        function changeattr(e){ 
            var f = $(e.clone()); 
            $(f.children()[0]).attr('src', $(f.children() 
[0]).attr("full-image")); 
            $(f.children()[0]).attr('height', '500px'); 
            return f[0].outerHTML; 
        } 
        $('.image a').each(function(idx, elem) { 
          var e = $(elem); 
          e.fancybox({ 
              title: $(e.children()[0]).attr('alt'), 
          content: changeattr(e) 
            }); 
        }); 
    }); 
</script> 
```

我偶尔会遇到奇怪的显示错误，盒子要么根本不渲染任何东西（所以它基本上只会显示为一个细白条），或者它只会渲染大约 30 px 宽，并将自身定位在中间页。在这两种情况下，如果我检查元素，我可以看到完整图片的“阴影”，大小合适，url 正确。

图像源似乎没有什么不同，我没有收到任何错误，这在 chrome 和 firefox 中都发生了。有没有人有任何想法？

编辑：一个混乱的盒子上的视图选择源给出

```
<div id="fancybox-outer"><div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div><div style="border-width: 10px; width: 165px; height: auto; opacity: 1;" id="fancybox-content"><div style="width: auto; height: auto; overflow: auto; position: relative;"><a rel="gallery" href="/post/shit-is-about-to-get-real/">
                            <img class="preview" alt="shit IS about to get real" src="http://i.imgur.com/Le8Kv.jpg" full-image="http://i.imgur.com/Le8Kv.jpg" height="500px">
                        </a></div></div><a style="display: inline;" id="fancybox-close"></a><a style="display: inline;" href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a><a style="display: inline;" href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T16:46:39.257

关于图像和 javascript 问题，我的第一个建议是确保 javascript 知道图像的大小。设置尺寸（宽度和高度）并查看您的问题是否已解决。

# php - 使用 php 和 html 表单发送电子邮件

> ID：10037420
> 
> 赞同：1
> 
> 时间：2012-04-05T23:26:49.733
> 
> 标签：php, html, webforms, html-email

我有一个表格，我想用它来收集用户信息。我有一个获取信息并存储在变量中的 php。当用户单击提交按钮时，表单 gest 提交并成功重定向到感谢页面。但是由于某种原因，我没有按预期收到电子邮件。有人可以解释我在哪里做错了。

下面是我的 HTML 和 PHP 文件。稍后我将添加 javascript 验证。此时我只想让表单提交工作。

**PHP**

```
<?php

//This page should not be accessed directly. Need to submit the form.
if(!isset($_POST['submit'])){
echo "ERROR. This page cannot be accessed directly";
}

//Variables from the form
$name               = $_POST['fullname'];
$ageGroup           = $_POST['ageGroup'];
$gender             = $_POST['gender'];
$visit              = $_POST['visit'];
$purposeOfVisit     = $_POST['purposeOfVisit'];
$otherReferrer      = $_POST['otherReferrer'];
$member             = $_POST['member'];
$socialMedia        = $_POST['socialMedia'];
$difficulties       = $_POST['difficulties'];
$easeOfUse          = $_POST['easeOfUse'];
$whatDifficulties   = $_POST['whatDifficulties'];
$specialCondition   = $_POST['specialCondition'];
$browser            = $_POST['browser'];
$preferredFormat    = $_POST['preferredFormat'];
$contentsForWebsite = $_POST['contentsForWebsite'];
$oldContents        = $_POST['oldContents'];
$expectations       = $_POST['expectations'];

$message = "Fullname:"; // will compose later

// Compose email
$email_from = "subash.adikari@gmail.com";
$email_subject = "Infinity User Questionnaire";
$email_body = "You have received a new message from the user $name.\n".
"Here is the message:\n $message".

$to = "subash.adhikari@gmail.com";

$headers = "From: $email_from \r\n";

//Send the email!
mail($to,$email_subject,$email_body,$headers);

//done. redirect to thank-you page.
header('Location: thankyou.html');

if(IsInjected($visitor_email))
{
    echo "Bad email value!";
    exit;
}

// Function to validate against any email injection attempts
function IsInjected($str)
{
  $injections = array('(\n+)',
          '(\r+)',
          '(\t+)',
          '(%0A+)',
          '(%0D+)',
          '(%08+)',
          '(%09+)'
          );
  $inject = join('|', $injections);
  $inject = "/$inject/i";
  if(preg_match($inject,$str))
    {
    return true;
  }
  else
    {
    return false;
  }
}
?> 
```

[如果需要，您可以在此处](http://dl.dropbox.com/u/3230707/web_form/index.php)下载 index.php 。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T23:45:31.453

由于这是在您的本地计算机上，因此您需要首先[`mail()`](http://php.net/manual/en/function.mail.php)在[`php.ini`](http://php.net/manual/en/configuration.file.php). 例如，您可以将其配置为使用您的 ISP 的 SMTP 服务器：

```
[mail function]
SMTP = smtp.isp.net
smtp_port = 25
sendmail_from = me@isp.net 
```

有关详细信息，请参阅[PHP 文档](http://au2.php.net/manual/en/mail.configuration.php#ini.smtp)。

编辑：我刚刚在我的一台服务器上测试了您的代码，并按预期发送了电子邮件。这进一步使我相信您配置该`mail()`功能的方式有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T23:42:05.880

我建议您使用[http://phpmailer.worxware.com/](http://phpmailer.worxware.com/)中的 PHPMailer来发送邮件。使用 PHPMailer，您可以跟踪错误、发送 HTML 和 TEXT 邮件、更改编码和管理 word warpers。

另外，正如有人所说，您的脚本不会阻止它直接执行，我认为标题必须以换行符“\n”结束，而不是回车符“\r”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T09:27:49.430

问题出在我的托管服务上。我不得不给他们打电话，他们为我修好了。

# javascript - 如何在不减慢输入速度的情况下将输入键绑定到 Javascript 中的回调？

> ID：10037422
> 
> 赞同：1
> 
> 时间：2012-04-05T23:26:53.670
> 
> 标签：javascript, jquery

我需要这个作为聊天框。当用户按下回车时，我想触发一个回调（发送消息并清理输入字段）

到目前为止，我得到了这个，但是打字变慢了：

```
$('#chat_input').keydown(function(event) {
  if(event.keyCode == '13') {
    // do something
  }
}); 
```

你会如何优化这个？

**更新**：这不是一个巨大的减速，但我能感觉到。我很确定这段代码是负责任的。我一直有这个问题，所以我想如果可能的话，是时候找到一种不同的方法了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T23:37:51.323

不，您的代码在这里不是有罪的。由于您正在构建聊天系统，因此您还必须运行其他脚本。但这里有另一种方式来研究这个问题。

制作迷你表格

```
<form name="chatline" ... >
   <input type="text" />
   <input type="submit" />
</form> 
```

然后捕捉表单的提交事件，该事件会在浏览器进入时自动触发

```
$("form").submit(function() {
    //there you go, you caught your enter
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T23:55:11.920

我会试试这个：

```
document.onkeydown = function(event) {
  if(event.keyCode == '13') {
    // do something
    return false;
  }
}; 
```

这将事件侦听器置于 DOM 图的顶部，使其第一次有机会响应。返回*false*还会告诉浏览器该事件已被处理。这将防止它“询问”有关事件的其他元素。此外，放弃 jQuery 并直接管理事件将避免执行比需要更多的 JS。

如果这仍然很慢，我不得不认为其他地方的逻辑会减慢它的速度。如果这是一个聊天，在聊天正文中添加/重新排列 DOM 元素可能会导致显着的浏览器开销。您应该尝试使用*setInterval*每隔几秒左右触发一次“输入”逻辑。尝试打字（它会随机发送消息），但如果您仍然遇到速度变慢，那一定是其他一些逻辑。

# memory - 四端口内存从单端口还是双端口内存？

> ID：10037425
> 
> 赞同：3
> 
> 时间：2012-04-05T23:27:46.627
> 
> 标签：memory, vhdl, verilog, system-verilog

在我目前正在进行的设计中，我需要四端口内存。但是，在查找表中实现它会占用大量区域，并且我无法通过该设置达到所需的性能。因为，我的 FPGA 有用于单端口和双端口 ram 的硬件块，我是否可以将它们组合成四端口内存？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T23:33:48.660

您可以考虑为块 RAM 提供双时钟，尽管这会对时序等产生影响。

参见例如[http://www.xilinx.com/support/documentation/application_notes/xapp228.pdf](http://www.xilinx.com/support/documentation/application_notes/xapp228.pdf)。

如果您只需要四重读取访问，那么您只需要两个双端口块 RAM，它们都连接到相同的写入启用和写入数据。

# c# - 如何将 XAML 中的 Canvas 元素绑定到代码后面的 Canvas 属性？

> ID：10037439
> 
> 赞同：0
> 
> 时间：2012-04-05T23:29:27.963
> 
> 标签：c#, silverlight, windows-phone-7

我正在为 Windows Phone 使用 C# 和 Silverlight。

我有一个 ListBox listBoxOfItemsA，它的 ItemsSource 属性绑定到 ObservableCollection observableCollectionOfItemsA。ListBox 中的每个 TypeA 项都是使用 ListBox.ItemTemplate 绘制的，如 XAML 中所示。注意 Canvas 元素。没有它，一切都很好。现在，我已将 TypeA 的每个实例与 0 个或多个 TypeB 实例相关联。TypeB 的每个实例都定义了一个 HighlightColor。对于 ListBox 中的每个 TypeA 项目，我需要某种方式来显示与其关联的所有 TypeB 项目的 HighlightColor。我正在考虑为每个 ListBox 项目添加一个薄 Canvas 元素，将其水平划分为 0 个或多个区域（0 只会留下黑色背景），并在该 Canvas 中绘制与 TypeB 实例相关联的矩形ListBox 项（以便所有这些矩形的总宽度不变）。

问题：我必须在“????”处写什么 位置，以便我可以将 Canvas 属性（在 TypeA 中）与 ListBox.ItemTemplate 中的 Canvas 元素绑定？

谢谢你。

**编辑 20120406_0202 ：每个 TypeA 实例可以****同时**映射到多个 TypeB 实例。例如：每个 TypeA 是货币的流动（从一个账户到另一个账户，在某个日期，属于某个类别等），每个 TypeB 是每个 TypeA 可能满足也可能不满足的一组条件（例如，它的日期在某个范围内，它的目标帐户等于某个帐户，等等）。对于每个 TypeA，我想一目了然地显示它满足哪些条件集。每套满意的颜色都会显示额外的颜色。

```
public class TypeA
{
    public int Id { get; set; }
    public string Name { get; set; }
    public Canvas CanvasForItemsB {...}  // I would like something like this, here, and to bind it to the Canvas element in the XAML.
}

public class TypeB
{
    public SolidColorBrush HighlightColor {...}
}

ObservableCollection<TypeA> observableCollectionOfItemsA;
listBoxOfItemsA.ItemsSource  =observableCollectionOfItemsA;

<ListBox x:Name="listBoxOfItemsA">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel>
                <TextBlock Text="{Binding Id, Mode=OneWay}" />
                <TextBlock Text="{Binding Name, Mode=OneWay}" />
                <Canvas ????="{Binding CanvasForItemsB, Mode=OneWay}" Width="480" Height="10" Background="Black" />
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T23:37:31.320

如果您试图突出显示列表框中的元素，那么只需在 ItemTemplate 中的 StackPanel 周围放置一个边框，然后在边框的背景属性上设置一个绑定可能会更简单。这样您就不必担心在内存中存储一​​堆 Canvas 对象或将它们注入您的 ListBox。

# ruby - 用值填充散列的更好方法

> ID：10037443
> 
> 赞同：0
> 
> 时间：2012-04-05T23:30:26.907
> 
> 标签：ruby

鉴于我有一个响应一些方法的对象。我想在哈希中收集其中一些，我总是这样写一个片段。

```
class Person
  # ...

  def some_selected_attributes
    attrs = {}
    [:first_name, :last_name, :zip].each do |attr|
      attrs[attr] = self.__send__(attr)
    end
    attrs
  end
end 
```

我相信有一种更优雅的方式来做到这一点。

:wq！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T23:41:08.020

由于只有三个属性，我认为没有理由不直接编写它：

```
def some_selected_attributes
  {
    first_name: first_name,
    last_name: last_name,
    zip: zip
  }
end 
```

你也可以这样做`inject`：

```
def some_selected_attributes
  [:first_name, :last_name, :zip].inject({}) do |hash, attr|
    hash[attr] = __send__ attr
    hash
  end
end 
```

另一种选择，使用`Hash[]`：

```
def some_selected_attributes
  Hash[[:first_name, :last_name, :zip].map {|attr| [attr, __send__ attr] }]
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T02:29:56.383

如果你真的想要一个哈希，LBg 给了你一些很好的模式。但是您可能需要考虑制作小型结构对象而不是原始哈希。结构的行为类似于用于索引和枚举的哈希，但也具有访问器方法，因此它们可以与发送和点表示法一起使用。

```
class Person
  # ...
  SomeSelectedPersonAttrs = Struct.new :first_name, :last_name, :zip

  def some_selected_attributes
    SomeSelectedPersonAttrs[ * SomeSelectedPersonAttrs.members.map{|a| send a } ]
  end

end

pa = person.some_selected_attributes
pa.first_name    # => "Joe"
pa[:first_name]  # => "Joe"
pa['first_name'] # => "Joe"
p.zip = 12345    # sets zip to 12345
p[:zip] = 12345
p['zip'] = 12345

pa.values       # => ["Joe","Blow",12345]
pa.each_pair {|k,v| ... } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-06T03:29:34.713

我认为有更好的方法来完成你想要做的事情。编写一个方法来返回类中已经存在的参数散列没有多大意义。您可以使用 attr_accessor 使实例变量或方法可访问：

```
class Person
  attr_accessor :first_name, :last_name, :zip

end 
```

那么你就不需要 some_selected_attributes() 方法了。您可以直接访问变量或方法：

```
p = Person.new
p.first_name  # => value of first_name 
```

如果你想要一个哈希，你可以创建它：

```
p = Person.new
hash = {:first_name => p.first_name, :last_name => p.last_name, :zip => p.zip } 
```

我也不确定您为什么要构建此哈希。似乎这是一种更“面向对象”的方式来完成您想要做的任何事情（通过将整个对象作为参数传递）。

我建议不要使用选定字段的散列，而是使用整个对象。

# java - 检查某些值的 xml 标签并进行转换 - 最佳实践

> ID：10037444
> 
> 赞同：1
> 
> 时间：2012-04-05T23:30:50.033
> 
> 标签：java, xml, xslt, batch-processing

我想做以下事情：此时我们收到一些 xml 文件，其中一些 xml 标记被错误地填充。为了帮助我们的合作伙伴，我们希望通过使用“Pass-through”文件夹来捕获这些错误值，在导入我们的应用程序之前，所有 xml 文件都放置在该文件夹中。

该文件夹将每 X 分钟读取一次，并且对于每个文件都需要进行一些检查，例如：标签中值的长度、标签的值等。

因为这只是一个临时解决方案，我们不想在我们的应用程序中实现它。

我在考虑两种可能的设置：

*   使用 java 并调用 XSLT 文件来转换每个文件并将其放在另一个文件夹中
*   仅使用 java 检查 xml 文件并进行转换。这两种情况都将由每 X 分钟运行一次的 .bat 调用。

现在我的问题：

*   您认为最好的解决方案是什么？又名最快、最安全等（可能不是建议的？）
*   你能不能给我一些例子来说明如何做这样的事情？

我不像其他严格要求代码的人。如果你能给我类似的东西，我可以自己做。在写这篇文章的时候，我已经在其他网站上寻找解决方案了，但是因为很紧急，问问社区也是有帮助的。

谢谢你的回答，亲切的问候，马丁

编辑：这两个答案对我帮助很大。谢谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T07:04:50.217

[http://www.ibm.com/developerworks/xml/library/x-javaxmlvalidapi/index.html](http://www.ibm.com/developerworks/xml/library/x-javaxmlvalidapi/index.html)

或者

[http://www.java-tips.org/java-se-tips/javax.xml.validation/how-to-create-xml-validator-from-xml-s.html](http://www.java-tips.org/java-se-tips/javax.xml.validation/how-to-create-xml-validator-from-xml-s.html)

或者

[http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/validation/package-summary.html](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/validation/package-summary.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T07:32:40.933

如果您想使用 .bat 脚本在给定文件夹中的每个 XML 文件上运行 XSLT（您在 OP 中的第一个选项），我可以想到 3 种方法：

* * *

**A.**基本上做一个“for”循环来通过命令行处理每个单独的文件。（哇。）

* * *

**B.**用于`collection()`指向输入文件夹并用于`xsl:result-document`在新文件夹中创建输出文件。

**这是一个示例 XSLT 2.0**（使用 Saxon 9 测试）：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:param name="pInputDir" select="'input'"/>
  <xsl:param name="pOutputDir" select="'output'"/>
  <xsl:variable name="vCollection" select="collection(concat($pInputDir,'/?*.xml'))"/>

  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/">
    <xsl:for-each select="$vCollection">
      <xsl:variable name="vOutFile" select="tokenize(document-uri(document(.)),'/')[last()]"/>
      <xsl:result-document href="{concat($pOutputDir,'/',$vOutFile)}">
        <xsl:apply-templates/>   
      </xsl:result-document>
    </xsl:for-each>    
  </xsl:template>

</xsl:stylesheet> 
```

**笔记：**

这个样式表只是做一个身份转换。它通过未更改的方式传递 XML。您需要通过添加新模板来覆盖身份模板来进行检查/更改。

另请注意，输入和输出文件夹名称有 2 个参数。

您可能会遇到内存问题，`collection()`因为它将文件夹中的所有 XML 文件加载到内存中。如果这是一个问题，请参见下文...

* * *

**C.**让您的 XSLT 处理目录中所有文件的列表。使用组合`document()`和 Saxon 扩展函数`saxon:discard-document()`来加载和丢弃文档。

这是我不久前用于测试的一个示例。

**XML 文件列表（XSLT 的输入）：**

```
<files>
  <file>file:///C:/input_xml/file1.xml</file>
  <file>file:///C:/input_xml/file2.xml</file>
  <file>file:///C:/input_xml/file3.xml</file>
  <file>file:///C:/input_xml/file4.xml</file>
  <file>file:///C:/input_xml/file5.xml</file>
  <file>file:///C:/input_xml/file6.xml</file>
  <file>file:///C:/input_xml/file7.xml</file>
  <file>file:///C:/input_xml/file8.xml</file>
  <file>file:///C:/input_xml/file9.xml</file>
  <file>file:///C:/input_xml/file10.xml</file>
</files> 
```

**XSLT 2.0**（用 Saxon 9 测试）：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:param name="pOutputDir" select="'output'"/>

  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="files">
    <xsl:apply-templates/>      
  </xsl:template>

  <xsl:template match="file">
    <xsl:variable name="vOutFile" select="tokenize(document-uri(document(.)),'/')[last()]"/>
    <xsl:result-document href="{concat($pOutputDir,$vOutFile)}">
      <xsl:apply-templates select="document(.)/saxon:discard-document(.)" xmlns:saxon="http://saxon.sf.net/"/>          
    </xsl:result-document>
  </xsl:template>

</xsl:stylesheet> 
```

**笔记：**

同样，此样式表只是进行身份转换。它通过未更改的方式传递 XML。您需要通过添加新模板来覆盖身份模板来进行检查/更改。

另请注意，输出文件夹名称只有一个参数。

# android - 如何使视频视图离开屏幕？

> ID：10037446
> 
> 赞同：1
> 
> 时间：2012-04-05T23:30:59.777
> 
> 标签：android, resize, screen, android-videoview

如何使视频视图从屏幕顶部开始，然后继续向下并最终离开屏幕底部？无论如何，我尝试的一切都只是调整视频大小以适应屏幕。那么我将如何更改它以使视频一直不适合屏幕。感谢您的帮助，尤其是示例。

就像这张高质量的图表所示：

```
 ________
    |      |
    |   V  |
    |   I  |
    |   D  |
    |___E__|
        O 
```

视频离开屏幕。但是你真的看不到O，因为它会不在屏幕上。

# python - 将凭证从桌面应用程序传递到 Django 应用程序

> ID：10037447
> 
> 赞同：0
> 
> 时间：2012-04-05T23:31:19.340
> 
> 标签：python, django, desktop-application, credentials

这更像是一个一般的新手问题：

连接到服务的桌面应用程序通常如何验证用户？我将如何为 Django 应用程序执行此操作？是否像将凭据传递给检查用户名/密码的空白视图一样简单？

它通常是如何通过的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:59:20.233

您可以在 django 端创建自定义登录视图，详见[此处](https://docs.djangoproject.com/en/dev/topics/auth/#authentication-in-web-requests%5D "Django 文档")。让它根据用户名和密码参数（可能应该通过 HTTP POST，最好通过 SSL 发送）是否有效返回消息。在桌面客户端上，如果响应有效，它应该获取与响应一起发送的 cookie 的值，并且应该将该 cookie 保留在为会话的其余部分发出的每个 HTTP 请求中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:50:44.860

不确定你的意思，但例如，如果你想通过 django 应用程序中的某种方法从桌面 python 应用程序检查用户的凭据，你可以使用 httplib 模块并发送 POST 请求，然后检查你得到的响应。做一些事情：

```
>>> import urllib
>>> params = urllib.urlencode({'spam': 1, 'eggs': 2, 'bacon': 0})
>>> f = urllib.urlopen("http://www.musi-cal.com/cgi-bin/query", params)
>>> print f.read() 
```

（示例取自[Python 文档](http://docs.python.org/library/urllib.html?highlight=urllib#examples)）

# spring - spring-context 和 spring-core 依赖有什么区别？

> ID：10037450
> 
> 赞同：38
> 
> 时间：2012-04-05T23:31:50.603
> 
> 标签：spring, maven, dependencies, spring-context

您好，我是 Spring 和 maven 世界的新手，我想知道这两个依赖项之间有什么区别？

这是一个简单的问题..我的`pom.xml`文件有问题，所以我想知道一切:)。

提前致谢。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-04-06T07:30:58.590

这些实际上是许多 Spring Framework 模块中的 2 个。您可以使用此站点轻松找到这些工件包含的包：

[http://mvnrepository.com/artifact/org.springframework/spring-core/3.1.1.RELEASE](http://mvnrepository.com/artifact/org.springframework/spring-core/3.1.1.RELEASE)

这可以为您提供有关特定工件中包含的类的信息，并可能提供有关其用途的信息。

对于 Spring Framework，`spring-core`主要包含核心实用程序和常见的东西（如枚举），并且因为它对 Spring 非常重要，可能所有其他 Spring 模块都依赖它（直接或传递）。

反过来`spring-context`提供应用程序上下文，即 Spring 的依赖注入容器，它可能总是在以某种方式使用 Spring Framework 的工件的 POM 中定义。事实上，通过将`spring-context`依赖`spring-core`定义`spring-context`为您的依赖，您`spring-core`的类路径中也有依赖。

# c#-4.0 - c# Entity Framework - linq 到带有子查询的实体查询

> ID：10037453
> 
> 赞同：0
> 
> 时间：2012-04-05T23:32:38.707
> 
> 标签：c#-4.0, linq-to-entities

如果我有以下表格/实体：

发票
- InvoiceId (PK)
- InvoiceAmount

InvoicePayment
- InvoicePaymentId (PK)
- InvoiceId (FK)
- PaymentAmount

我如何构建一个 Linq to Entity 查询来选择具有未结金额的发票 - 请记住付款的存在并不表示发票没有未结金额（即可以部分付款）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T23:38:11.710

我会按照这样的方式去做

```
from i in invoices
where i.Payments.Sum(p=>p.PaymentAmount) < i.InvoiceAmount
select i; 
```

# java - 没有当前上下文

> ID：10037454
> 
> 赞同：1
> 
> 时间：2012-04-05T23:33:18.447
> 
> 标签：java, netbeans, boolean

我在 NetBeans 中使用了一个调试器，并监视了某个布尔变量。在断点处，它说该变量“没有当前上下文（堆栈帧）<”我只是想知道这到底是什么意思。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T23:45:28.050

简单的答案：调试器只是告诉您它无法评估您的变量，因为您的布尔变量不在断点处的内存中。

问候。

# pdf - 使用 ASP.Net 的 IE 8 及更高版本中的 PDF 呈现问题

> ID：10037457
> 
> 赞同：1
> 
> 时间：2012-04-05T23:33:24.800
> 
> 标签：pdf, iframe

由于 PDF 渲染问题，我一直在拔头发并撞到我的头。当我们使用 IE 7 及以下版本时，一切都很好。但今年我们开始支持最新的浏览器 IE 8 及更高版本，一切都变得疯狂。

实际上我已经使用 iframe 来呈现内联 PDF，这适用于 IE7 及以下版本但现在使用 IE8，很多用户开始抱怨 PDF 在 iframe 内显示为空白（仅显示一个灰色框）。我使用以下代码在 iframe 中呈现 pdf。

```
 Response.Clear();
 Response.ClearHeaders();
 Response.ClearContent();
 Response.Buffer = false;

 Response.ContentType = "application/pdf";
 Response.AddHeader("content-length", doc.Length.ToString());
 Response.AddHeader("content-disposition", "inline; filename=\"" + fileName + "\"");

 Response.AddHeader("Accept-Header", doc.Length.ToString());
 Response.BinaryWrite(doc);
 Response.Flush();
 Response.Close();
 Response.End(); 
```

但它没有正常工作。然后在谷歌搜索后，我想到了使用标签来呈现 pdf。因此，为此我首先创建了 pdf 文档并存储在服务器中。但在这种方法中，我也有两个问题：

1) 文件未正确创建。请参阅以下我尝试使用 byte[] 数组创建 PDF 文件的方法。此外，这在我的本地工作得很好，但在服务器中，这两种方法都会创建一个 1 KB 的文件。我认为它无法写入整个 byte[] 数组。

```
 a) System.IO.File.WriteAllBytes(fileFullPath, doc);
 b) using (System.IO.Stream stream = new System.IO.FileStream(fileFullPath,  System.IO.FileMode.Create))
   {
       stream.Write(attestationDoc, 0, attestationDoc.Length);
   } 
```

2）这是我正在使用的对象标记，但问题是，这仅在文件位于项目的根目录中时有效，如果文件位于任何其他项目文件夹中，则它不起作用。实际上我尝试使用 Server.MapPath 但它不起作用。

```
 <object data="data\test.pdf" type="application/pdf" width="860px" height="470px">
        <embed src="data\test.pdf" type="application/pdf"/>
 </object> 
```

所以，请帮帮我，这非常紧急。

如果上述任何一种方法都有效，那我很好。

# linux - 允许多个目录树相互叠加。这可能吗？

> ID：10037458
> 
> 赞同：0
> 
> 时间：2012-04-05T23:33:31.383
> 
> 标签：linux, git, apache, filesystems, layer

好的，这个问题需要一些背景知识。我有一个 apache 网络服务器，它将托管一个包含基础目录树的开发测试站点 - 一组文件夹和文件。

在这个基础目录树的顶部，我想在顶部“分层”另一个部分目录树。如果在顶层找不到文件，那么我希望查找基础层中的文件。

对于我的项目，我需要 4 个相互叠加的部分目录树，它们的行为方式都相同：如果在顶层找不到文件，它将在下面的层中查找它，如果它不存在它将转到该层下方的下一层，直到到达基础层。

我一直在尝试为这个问题假设一个解决方案，我想出了两个：或者使用 linux 文件系统，并以某种方式将目录与这个提议的行为链接起来，或者可能通过 apache 网络服务器，以某种方式告诉 apache 搜索一个如果它不存在，则将文件放在不同的文件夹中 - 可能在某个地方的 httpd.conf 文件或自定义模块中。

理想情况下，某种 linux 文件系统特殊文件夹链接将是最好的解决方案，其中文件夹可以链接到不同的文件夹，但也可以在其中包含文件夹和文件？

好吧，这听起来很疯狂，但我想要这个系统设置的原因是我可以使用通过 url 访问的 Git 分支。每个 Git 存储库分支都将在自己的目录树中拥有自己修改过的文件，并在其下方有一个基础文件层（比如主 Git 分支）。这样我可以导航到一个 url 并访问不同的分支，例如：branch1.newsite.com branch2.newsite.com 等。

我对此进行了很多思考，并且有一个近乎可行的模型，除了最后一个将目录树分层的警告。任何帮助或想法表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T23:35:00.823

也许你正在寻找这个：

[http://en.wikipedia.org/wiki/UnionFS](http://en.wikipedia.org/wiki/UnionFS)

*“[Unionfs] 允许不同文件系统（称为分支）的文件和目录透明地覆盖，形成一个单一的连贯文件系统。”*

# ruby-on-rails - ActiveRecord find_all_by_X 是否保留顺序？如果不是，应该改用什么？

> ID：10037460
> 
> 赞同：3
> 
> 时间：2012-04-05T23:33:50.900
> 
> 标签：ruby-on-rails, activerecord

假设我有一个非空`ids`的`Thing`对象 id 数组，我想使用`things = Thing.find_all_by_id(ids)`. 我的印象是`things`不一定会有类似于`ids`.

1.  我的印象正确吗？

2.  如果是这样，我可以使用什么来代替`find_all_by_id`保留顺序并且不会不必要地多次访问数据库？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T23:43:58.087

1.  是的
2.  使用[数组#sort](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-sort)

一探究竟：

```
Thing.where(:id => ids).sort! {|a, b| ids.index(a.id) <=> ids.index(b.id)} 
```

`where(:id => ids)`将使用`IN()`. 然后排序！方法将遍历查询结果并比较 id 在 ids 数组中的位置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-26T19:59:17.457

@tybro0103 的答案会起作用，但对于大量的 ID 来说效率很低。特别是，Array#index 在 N 中是线性的。散列对于大 N 效果更好，如

```
by_id = Hash[Thing.where(:id => ids).map{|thing| [thing.id, thing]}]
ids.map{|i| by_id[i]} 
```

您甚至可以使用此技术按任何不必要的唯一属性任意排序，如

```
by_att = Thing.where(:att => atts).group_by(&:att)
atts.flat_map{|a| by_att[a]} 
```

在 rails 4 中不推荐使用 find_all_by_id ，这就是我在这里使用 where 的原因，但行为是相同的。

# java - Java：如何及时停止 HttpURLConnection.getInputStream？

> ID：10037462
> 
> 赞同：3
> 
> 时间：2012-04-05T23:34:34.410
> 
> 标签：java

这是一个简单的测试程序。主线程启动多个子线程。我已添加到 main: Runtime.getRuntime().addShutdownHook(hookThread);

当 JVM 进程按下 ^C 时，这个 hookThread 将设置一个全局关闭标志，并调用 interrupt() 到所有子线程。

我希望所有子线程都返回，但是如果它在 HttpURLConnection.getInputStream() 中，interrupt() 对子线程没有任何作用。子线程在超时（30 秒）后返回，这对我来说延迟太大了。

及时中断 HttpURLConnection.getInputStream() 调用的最佳方法是什么？

在调用了 interrupt() 之后，在子线程堆栈的顶部之后：

```
"Thread-0" prio=10 tid=0x0000000040b0f800 nid=0x3eab runnable [0x000000004211b000]
   java.lang.Thread.State: RUNNABLE
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(SocketInputStream.java:129)
        at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
        at java.io.BufferedInputStream.read1(BufferedInputStream.java:258)
        at java.io.BufferedInputStream.read(BufferedInputStream.java:317)
        - locked <0x00000000fd99ac88> (a java.io.BufferedInputStream)
        at sun.net.www.http.HttpClient.parseHTTPHeader(HttpClient.java:687)
        at sun.net.www.http.HttpClient.parseHTTP(HttpClient.java:632)
        at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1195)
        - locked <0x00000000fd997670> (a sun.net.www.protocol.http.HttpURLConnection)
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T01:49:58.367

你不能打断这个电话。

您可以在调用之前设置更短的超时时间，或者您可能会通过 NIO 包找到支持可中断 I/O 的 HTTP 客户端库。

此外，您应该只中断您拥有的线程。如果你在进程中创建了每一个线程，并且了解它们如何响应中断，那没关系，但否则盲目地中断线程是危险的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T23:52:11.843

您可能必须关闭流。根据 Java 错误[#4514257](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4514257)，在任何 InputStream.read() 上调用 Thread.interrupt() 都会失败。

# node.js - 如何在node.js中获取子进程操作的结果

> ID：10037464
> 
> 赞同：0
> 
> 时间：2012-04-05T23:34:54.120
> 
> 标签：node.js

我想将命令传递给 python 子进程，然后得到结果。我会使用 exec，但我想让子进程保持打开状态，这样我就不必每次执行新命令时都打开它。这是我目前什么都不做的代码：

```
var connect = require('connect'),
    io = require("socket.io").listen(1032),
    util = require("util"),
    child = require('child_process'),
    python = child.spawn("python");

var app = connect()
    .use(connect.static(__dirname + '/www'))
    .use(connect.logger('dev'))
    .listen(3000);

io.sockets.on('connection', function (socket) {
    console.log("Socket " + socket.id + " opened");

    python.stdout.on('data', function (data) {
        console.log("computed", data.toString("utf-8"));
        socket.emit("python", { result : data.toString("utf-8") });
    });

    socket.on('python', function (data) {
        console.log("received data" + data.cmd);

        python.stdin.resume();

        python.stdin.write(data.cmd);

        python.stdin.end();
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T01:23:08.250

您的 python 代码是否包含任何非 ascii 字符？

这工作正常：

```
var
    spawn = require('child_process').spawn,
    python  = spawn('python');

python.stdin.write('print ("a")');
python.stdin.end();

python.stdout.on('data', function (data) {
        console.log(data.toString());
}); 
```

但是，如果我将字母“a”更改为俄语字母“п”，它就会停止工作。事件未触发。

但它与节点解释器（任何 utf8 字符）完美配合。

```
var
    spawn = require('child_process').spawn,
    node  = spawn('node');

node.stdin.write('console.log("п");');
node.stdin.end();

node.stdout.on('data', function (data) {
        console.log(data.toString());
}); 
```

我认为您需要在 python 部分中询问它。

# php - 没有数据库的php登录表单只是一个文本文件

> ID：10037465
> 
> 赞同：0
> 
> 时间：2012-04-05T23:34:55.563
> 
> 标签：php, forms, login

我有下面的 php，它在 localhost apache 服务器（WAMP 服务器）上的工作方式各不相同，但是当我在没有任何原因或错误的情况下将它放到网上时，它就无法完成它的工作！请需要一个答案，虽然我会更改我的托管服务器，但我不喜欢他们的服务，因为有许多功能被禁用。（更新：我有一个“html 代码”，这是该代码应该登录的配置文件。配置文件 html 在 php 之后。**即使用户和密码正确，这个 php 也有显示死亡消息的问题。这个问题仅在在线服务器上**）

* * *

```
<?php

function password($username='noneuser') {

  $tegjitha=file_get_contents("pasetkkadmin.txt");
  $infot=preg_split('/'.PHP_EOL.'/',$tegjitha,-1,PREG_SPLIT_NO_EMPTY);
  $final=null;
  foreach ($infot as $info) {
    $pos=preg_split('/:/',$info,-1,PREG_SPLIT_NO_EMPTY);

    if ($pos[0]==$username){
      $final=$pos[1];
    }

  }
  return $final;

}

function isuser($input) {
  $tegjitha=file_get_contents("pasetkkadmin.txt");
  $infot=preg_split('/'.PHP_EOL.'/',$tegjitha,-1,PREG_SPLIT_NO_EMPTY);
  $rezultati=false;
  foreach ($infot as $info) {
    $pos=preg_split('/:/',$info,-1,PREG_SPLIT_NO_EMPTY);
    if ($input==md5('albipatozi'.$pos[0])) { $rezultati=true;}

  }
  return $rezultati;
}

if  ( isset($_GET['dil'])  ) {
  setcookie('mbajmend','',time()-3600*24*365);
  die('<meta http-equiv="REFRESH" content="0;url=index.php" />');

}

if  ( isset($_POST['username']) && !empty($_POST['username']) ) {
  $username=$_POST['username'];

} else {$username=null;}

if  ( isset($_POST['pass']) && !empty($_POST['pass']) ) {
  $passwd=sha1('justastring£"'.$_POST['pass']);

} else {$passwd='none';}

if  ( isset($_POST['mbajmend']) && !empty($_POST['mbajmend']) ) {
  $koha=time()+3600*24*60;
} else {$koha=null;}

$duhet=password($username);
if ($passwd==$duhet) { 

  setcookie('mbajmend',md5('sdaggs'.$username),$koha);

} elseif (!( isset($_COOKIE['mbajmend']) && isuser($_COOKIE['mbajmend'])  )) {

  setcookie('mbajmend','',time()-3600*24*360);
  if (isset($_SERVER['HTTP_REFERER']) &&     (preg_match('/[index.php]$/',$_SERVER['HTTP_REFERER']) ||     preg_match('/[admin\/]$/',$_SERVER['HTTP_REFERER'])) ) { $textshtes='Perdoruesi ose     Fjalkalimi jane Gabim !  '; }
  else { $textshtes='Ju Lutem Vendosni Te Dhenat Thuaja'; }

die('<body style="background:lightgrey;">
<div id="trupi" style="position:relative; background:#999999; margin:auto; width:360px;     margin-top:160px; height:260px;">
<form id="form1" name="form1" method="post" action="" style="position:absolute;     margin:56px; text-shadow:black; font-style:oblique; color:darkred">
  <label><strong>Perdoruesi:&nbsp;</strong>
  <input type="text" name="username" />
   </label>
  <p>
   <label><strong>Fjalekalimi:</strong>
   <input type="password" name="pass" />
   </label>
  </p>
  <p>
    <label>
    <input type="checkbox" name="checkbox" value="checkbox" />
    Me Mbaj Mend te Ky Kompjuter</label>
  </p>
  <p>
    <label style="float:right;">
    <input type="submit" value="Identifikohu"  />
    </label>
  </p>
  </form><p style="text-align:center; color:darkred; background:grey">    <b>'.$textshtes.'</b></p>
 </div>
 </body>

  ');

 } 

 ?>
<html>
this should be shown when user and passord is correct :)
</html> 
```

我试图一步一步地回显每一个变量，一切都很好，除了它不起作用的事实

passdords txt 文件是 pasetkkadmin.txt- 它的模型是

超级管理员：a3b22231bbe113a948a349af09cea4e4129584de

第一行是：superadmin，它的密码是：albi，该数据应该可以工作，但不能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T01:17:58.757

您在本地使用 WAMP（它是 windows），但在线服务器通常在 Linux 系统上运行。

不同之处在于，PHP_EOL 在 Windows(CR+LF) 和 Linux(LF) 上具有不同的值，因此当您在 Windows 上创建它并将其上传到 Linux 时，您的 pasetkkadmin.txt 将无法像预期的那样使用所使用的 PHP 代码-服务器。

示例 pasetkkadmin.txt

```
foo:bar[CR][LF]
foo2:bar2 
```

在 Windows 上，由 PHP_EOL( `[CR][LF]`) 分割的它将是：

```
array(0=>foo:bar,
      1=>foo2:bar2) 
```

在 linux 上，由 PHP_EOL( `[LF]`) 分割的它将是：

```
array(0=>foo:bar[CR],
      1=>foo2:bar2) 
```

# scheme - 此代码的适当 Racket/Scheme 习语是什么？

> ID：10037466
> 
> 赞同：8
> 
> 时间：2012-04-05T23:34:57.460
> 
> 标签：scheme, racket, dcpu-16

我是球拍/方案的新手，所以我决定通过为[DCPU-16](http://0x10c.com/doc/dcpu-16.txt)（一个简单的 16 位处理器）实现一个模拟器来学习。

因此，我的问题是：实施我的解决方案的更好方法是什么？

这是我一起破解来控制 CPU 寄存器的解决方案。要点是允许将修改寄存器的函数链接在一起。例如：

```
; Increment value stored in register r-id
; returns the updated register
;
; Reg - the register structure 
; (reg-inc Reg 'SP)
(define (reg-inc reg r-id)
    (reg-write reg r-id (+ (reg-read reg r-id) 1 )))

; chain them together
;(reg-inc (reg-inc Reg 'SP)
;         'PC)
;
; returns structure with both 'SP and 'PC incremented 
```

我的注册解决方案的全文如下。[我的完整程序](https://github.com/psycocoffey/Babys-First-DCPU16)也在 github 上。有这么多重复的逻辑，我知道一定有一个更简单的方法：

```
(struct registers (A B C X Y Z I J SP PC O Pa Pb Paadr Pbadr CLK)
  #:transparent)

(define Reg (registers 0 0 0 0 0 0 0 0 #x10000 0 0 0 0 0 0 0))

(define (reg-name n)
  (case n
    [(0) 'A]
    [(1) 'B]
    [(2) 'C]
    [(3) 'X]
    [(4) 'Y]
    [(5) 'Z]
    [(6) 'I]
    [(7) 'J]
    [(8) 'SP]
    [(9) 'PC]
    [(10) 'O]
    [(11) 'Pa]
    [(12) 'Pb]
    [(13) 'Paadr]
    [(14) 'Pbadr]
    [(15) 'CLK]
    [else (error "Invalid register")]))

(define (reg-id s)
  (cond
    [(eq? 'A s) 0]
    [(eq? 'B s) 1]
    [(eq? 'C s) 2]
    [(eq? 'X s) 3]
    [(eq? 'Y s) 4]
    [(eq? 'Z s) 5]
    [(eq? 'I s) 6]
    [(eq? 'J s) 7]
    [(eq? 'SP s) 8]
    [(eq? 'PC s) 9]
    [(eq? 'O s) 10]
    [(eq? 'Pa s) 11]
    [(eq? 'Pb s) 12]
    [(eq? 'Paadr s) 13]
    [(eq? 'Pbadr s) 14]
    [(eq? 'CLK s) 15]))

(define (reg-read reg r)
  (if (symbol? r)
      (reg-read reg (reg-id r))
      (case r
        [(0) (registers-A reg)]
        [(1) (registers-B reg)]
        [(2) (registers-C reg)]
        [(3) (registers-X reg)]
        [(4) (registers-Y reg)]
        [(5) (registers-Z reg)]
        [(6) (registers-I reg)]
        [(7) (registers-J reg)]
        [(8) (registers-SP reg)]
        [(9) (registers-PC reg)]
        [(10) (registers-O reg)]
        [(11) (registers-Pa reg)]
        [(12) (registers-Pb reg)]
        [(13) (registers-Paadr reg)]
        [(14) (registers-Pbadr reg)]
        [(15) (registers-CLK reg)]
        [else (error "Invalid register")])))

(define (reg-write reg r val)
  (if (symbol? r)
      (reg-write reg (reg-id r) val)
      (let ([mask-val (bitwise-and val #xffff)])
        (case r
          [(0) (struct-copy registers reg [A mask-val])]
          [(1) (struct-copy registers reg [B mask-val])]
          [(2) (struct-copy registers reg [C mask-val])]
          [(3) (struct-copy registers reg [X mask-val])]
          [(4) (struct-copy registers reg [Y mask-val])]
          [(5) (struct-copy registers reg [Z mask-val])]
          [(6) (struct-copy registers reg [I mask-val])]
          [(7) (struct-copy registers reg [J mask-val])]
          [(8) (struct-copy registers reg [SP mask-val])]
          [(9) (struct-copy registers reg [PC mask-val])]
          [(10) (struct-copy registers reg [O mask-val])]
          [(11) (struct-copy registers reg [Pa mask-val])]
          [(12) (struct-copy registers reg [Pb mask-val])]
          [(13) (struct-copy registers reg [Paadr mask-val])]
          [(14) (struct-copy registers reg [Pbadr mask-val])]
          [(15) (struct-copy registers reg [CLK mask-val])]
          [else (error "Invalid register")])))) 
```

更新：

感谢 oobviat 的建议，我使用列表进行了重构。唯一棘手的部分是更新列表中的值。我为 map 编写了一个程序，它将更新所需的寄存器并让其他寄存器保持原始值：

```
;; a-list of registers and initial values
(define (build-reg)
  '((A . 0)  (B . 0)     (C . 0)      (X . 0)
    (Y . 0)  (Z . 0)     (I . 0)      (J . 0)
    (SP . 0) (PC . 0)    (O . 0)      (Pa . 0)
    (Pb . 0) (Paadr . 0) (Pbadr . 0)  (CLK . 0)))

(define *REF-REG* (build-reg)) ; used to determine structure

(define (reg-name n)
  (if (symbol? n)
      n
      (car (list-ref *REF-REG* n))))

(define (reg-id s)
  (- (length *REF-REG*)
     (length (memf (lambda (arg)
                     (eq? s (car arg)))
                   *REF-REG*))))

(define (reg-write reg r val)
  (let ([r-name (reg-name r)])
    (define (reg-write-helper entry)
      (if (eq? r-name
               (car entry))
          (cons r-name val)
          entry))
    (map reg-write-helper reg)))

(define (reg-read reg r)
  (cdr (assoc (reg-name r) reg))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T16:11:19.487

这不是用 Racket 编写的，因此它可能无法按原样运行。如果它抛出错误，请尝试在文件顶部指定 R5RS 代码类型。为简单起见，我会使用 a-list 而不是结构来做这样的事情。

```
;; a-list of registers and initial values
(define *reg*
  '((A . 0) (B . 0) (C . 0) (X . 0) (Y . 0) (Z . 0)
    (I . 0) (J . 0) (SP . #X10000) (PC . 0) (O . 0)
    (Pa . 0) (Pb . 0) (Paadr . 0) (Pbadr . 0) (CLK . 0)))

(define (reg-write register val)
  (set-cdr! (assoc register *reg*) val) ;write new value to register
  val) ; return newly written value

(define (reg-read register)
  (cdr (assoc register *reg*)))

(define (reg-inc register)
  (reg-write register (+ 1 (reg-read register))))

;; to do many operations
;; input:  a list of registers
;;    EX:  '(a b x)
(define (do-incs registers)
  (if (null? registers)
      'done       ; return something when the incs are done
      (begin      ; lets you evaluate multiple expressions since `if` doesn't          
        (reg-inc (car registers))
        (do-incs (cdr registers))))) 
```

我假设 Racket 有一个类似的内置函数，可以`assoc`从 a-list 中返回正确的列表。另外，请注意，`*reg*`在这种情况下，它被定义为全局变量，这样我们就可以定义一次，然后使用它`set-cdr!`来向其写入值。

最后，这可能会对您的`SP`寄存器产生奇怪的影响。我的方案将其视为 65536.. 如果这不正确，您可能必须添加一个`if`to`reg-write`并`reg-read`确保您在那里获得正确的值。

`<EDIT>` 因此，我阅读了一些关于 Racket 程序的内容，并且这段代码几乎肯定不会在正常的 Racket 中运行，因为它们显然同时具有可变和非可变对。如果您想在 Racket 而不是 R5RS 下运行它，您必须进行的更改如下：

您可能需要使用可变列表/对构造函数来制作寄存器列表，而不仅仅是使用带引号的列表`(define *reg* (mlist (mcons 'A 0) (mcons 'B 0) ... )`。

而不是使用`set-cdr!`Racket 版本，`set-mcdr!`并且仅适用于可变对。`</EDIT>`

# php - 抓取网站以检索某些 li 元素

> ID：10037472
> 
> 赞同：0
> 
> 时间：2012-04-05T23:36:29.207
> 
> 标签：php, jquery, scrape

我正在经营一个彩票集团，并希望自动化我们的系统来检查彩票号码（英国国家彩票）

我得到的网址是：[https ://www.national-lottery.co.uk/player/p/results/lotto.ftl](https://www.national-lottery.co.uk/player/p/results/lotto.ftl)

我正在使用

```
<?php
$html = file_get_contents("https://www.national-lottery.co.uk/player/p/results/lotto.ftl");
?> 
```

我希望能够抓取页面的这个区域，即数字：

![在此处输入图像描述](../Images/a42e335bffbd77dfbce52946b38a3f93.png)

问题是，该页面上有很多内容，我不知道我将采取的第一步将其全部分解。

有谁知道在 PHP 或 jQuery 中执行此操作的方法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T23:51:44.883

现有的 rss 提要怎么样？[http://www.alllotto.co.uk/rss/latest.rss](http://www.alllotto.co.uk/rss/latest.rss)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T23:41:07.460

我会看一下[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)。它简化了抓取并满足您的要求。

使用它，查找 LI 元素就像这样简单：

```
foreach($html->find('li') as $element) {
       echo $element . '<br>';
} 
```

# android - Android ListView 将数据传递给另一个列表视图

> ID：10037477
> 
> 赞同：0
> 
> 时间：2012-04-05T23:36:58.163
> 
> 标签：android

如何编写可以将数据从一个 lisview 传递到另一个 listview 的代码，例如，如果我从汽车品牌列表中选择 BMW，我将能够在 listview 中选择特定的汽车系列

**主要的.XML**

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp"
    android:textSize="20sp" >
</TextView> 
```

**CarActivity.JAVA**

```
package car.brand.test;

package car.brand.test;

import android.app.ListActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class CarActivity extends ListActivity {
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        String[] values = new String[] { "BMW", "Mercedes","Nissan"};
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, values);
        setListAdapter(adapter);
    }

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    String item = (String) getListAdapter().getItem(position);
    Toast.makeText(this, item + " selected", Toast.LENGTH_LONG).show();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T01:14:10.847

您不需要将数据传递给另一个 ListView，只需要一个 ListView 即可实现您想要的。您必须自己进行映射，即 BMW 映射到包含所有 BMW 汽车系列车型的列表（java.util.ArrayList），而梅赛德斯映射到包含所有梅赛德斯汽车系列车型的列表等。

当您选择汽车品牌时，您将基础数据集交换为 ListView 并调用`notifyDataSetChanged()`.

片段：

```
MyAdapter myAdapter = ...;
Map<String, List<String>> carSeriesMap = ...;
protected void onListItemClick(ListView l, View v, int position, long id) {
    String brand = (String) getListAdapter().getItem(position);
    List<String> carSeriesList = carSeriesMap.get(brand);
    // set carSeriesList as the underlying dataset for the adapter
    myAdapter.setDataset(carSeriesList);
}

class MyAdapter extends BaseAdapter {
    List<String> dataset;
    public void setDataset (List<String> newDataset) {
        dataset = newDataset;
        notifyDataSetChanged();
    }
    public View getView(int position, ......) {
        // get data from dataset
        String text = dataset.get(position);
        // other code here...
    }
} 
```

# c# - 如果它不能安全地用于生产并且不能描述索引之类的东西，为什么我应该首先使用实体 框架代码

> ID：10037480
> 
> 赞同：8
> 
> 时间：2012-04-05T23:37:17.447
> 
> 标签：c#, database, asp.net-mvc, entity-framework, linq-to-sql

我刚刚开始一个非常大的网络项目，并且真的试图把所有事情都做好。

到目前为止我使用的工具是

*   ASP.NET MVC 3
*   实体框架 4.3
*   忍者3

一切进展顺利，但我发现 Entity Framework CodeFirst 的一些事情有点粗略。

例如，我必须使用[http://codefirstmembership.codeplex.com/](http://codefirstmembership.codeplex.com/)来设置会员信息作为代码优先设置的一部分。不得不使用第三方的东西感觉有点麻烦。显然我应该是 1337 足以“自己动手”，但我不想从一开始就咬太多。运行 aspnet_regsql 感觉很糟糕，每次更新数据库都会迷失方向。无论如何，都可以使用上面的库，这还不错。然而，脚手架似乎已经坏了。

现在除此之外，现在看来，当我在实时环境中运行时，这些东西会变得很有问题。无论如何，我想要在 dev db 和 live db 之间进行的任何架构更改都必须使用脚本手动管理，所以在这一点上，我不会首先失去代码的意义吗？

去年我一直在使用 Google App Engine，希望代码首先以同样的方式工作？即，进行更改，然后他们会修改实时数据。现在我假设，由于没有在应用引擎中进行严重的重构，它基本上不会损害生产中的任何东西。因此，您永远无法使用 AppEngine 重命名表。它总是会创建一个新表，并留下旧表。您将不得不手动移植数据。

所以我现在在想。为什么不先去数据库呢？我已经使用 linq2sql 3 年了，并且非常喜欢先使用 db。虽然 TBH 我的数据库源代码控制策略有点......缺乏。所以我希望代码优先能够强制改善这种情况，但它实际上让我觉得我应该首先使用 DB，并且严格控制它。

我真的很感激对这种情况有任何想法，而且，这与使用 Nhibinate 相比如何？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T18:56:18.390

您正在描述的升级方案已添加到 EF-Migrations 中。该版本的上线版本已经可用，它应该很快就会作为官方支持的版本发布。

查看：[https ://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-automatic-migrations-walkthrough.aspx?Redirected=true](https://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-automatic-migrations-walkthrough.aspx?Redirected=true)

查看：[http ://coding.abel.nu/tag/ef-migrations/](http://coding.abel.nu/tag/ef-migrations/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T18:29:52.277

只是我对此的看法...

你不需要永远做出选择——

您可以使用`Seed`自定义初始化程序（和迁移携手并进 - 通过迁移，您实际上可以手动更改它们，例如在此处添加索引等 - 尽管要小心），以“注入”原始 SQL（并且大部分需求可以通过那）。据我所知，您可以运行自定义批处理文件表单初始化程序（但没有尝试过，尽管我不明白为什么不这样做）。迁移是通过 PS 完成的，所以我猜这方面也有整合空间。

您可以使用它来制作原型和启动 - 让您的 C# 结构到位并快速同步 - 然后稍后对其进行调整 - 或者一旦修复使用一些“使用现有初始化程序”，它不会从代码中执行任何操作并将所有内容移动到 Db 端和你的 DBA。

IMO，从这个意义上说，在真正需要关闭 CF 并仅从 Db 工作之前，您可以“走得很远”。

对于较大的数据库或企业环境，它绝对不是适合这项工作的工具。

我认为现在可以安全生产了-但取决于您认为安全的内容，很少有...

此外，EF/CF 从一开始就已经走了很长一段路——我从一开始就使用它——最初它有很大的问题。最新版本现在在各个方面都非常可靠，所以我认为它已经到了那里。

...不利的一面 - 我已经使用代码优先方法（EF 和其他方法）制定了一些非常复杂的场景。然而，EF 几乎没有什么事情让我退缩（除了你提到的）......

UDF 支持，视图（使用 linq - 好像你不使用 LINQ 一个大的“专业人士”已经消失了） - 这应该出现在 EF 5.0 中（我没有检查，但这是他们所承诺的） - 作为对于更复杂的场景，您需要在 SQL 端进行优化（或者能够在后面执行自定义查询，然后再映射回来，即在那方面更灵活）。因此，如果它来了，那将是一件很有希望的事情（尽管我期望它并不完美）。（从好的方面来说，您实际上可以运行自定义查询，然后映射到您的对象 - 但这种工作，您不能做所有事情，所以它在某种程度上受到限制）

查询性能以及更苛刻的重型场景 - 这是我的主要问题。这也有望在 EF 5.0 中得到更好的体现 - 所以请拭目以待。

话虽如此 -
我最喜欢的是自定义或开源代码，例如解决方案 ORM - 您可以在其中控制更多事情。从长远来看，仍然有许多供应商支持等是使“官方”或 MS 实现更可行的原因。

希望这对任何人都有帮助

# java - 移动设备和电脑之间的无线连接

> ID：10037482
> 
> 赞同：0
> 
> 时间：2012-04-05T23:37:30.957
> 
> 标签：java, android, ios

我想在移动设备和计算机之间建立连接，以便它们可以相互交互。我应该能够在两端发送和接收数据，就像聊天客户端一样。我该怎么做？我只想知道所涉及的步骤。我正在考虑将数据从设备发送到数据库服务器，然后通过 PC 访问它，并在移动设备上做同样的事情。这是一个好主意吗？有哪些选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T02:40:19.473

由于您使用的是android，这很容易。一个简单的选择是为您的 android 设备和 pc 编写客户端和服务器应用程序。或者，您可以只在 UDP 无连接协议上发送数据。

我假设您知道如何[为 Android 手机构建应用程序](http://developer.android.com/guide/index.html)。如果这里的目标只是来回发送数据那么小，则不需要中间节点（数据库服务器等）。

[这](http://systembash.com/content/a-simple-java-udp-server-and-udp-client/)是 UDP 服务器/客户端实现的一个很好的例子。这是一个很好的 TCP 服务器/客户端[。](http://systembash.com/content/a-simple-java-tcp-server-and-tcp-client/)

希望有帮助。

# c++ - 二叉树的分段错误

> ID：10037484
> 
> 赞同：1
> 
> 时间：2012-04-05T23:37:36.147
> 
> 标签：c++, binary-tree, binary-search-tree

当我尝试插入二叉搜索树时，我的程序出现分段错误。这是节点的声明：

```
template < class T > class binTreeNode {
friend class binTree < T >;
friend class binSTree < T >;
public:
    // default constructor
    binTreeNode ( const T& newData =T( ), binTreeNode < T >* newLeft = 0, binTreeNode < T >* newRight = 0 ) {
        data = newData;
        left = newLeft;
        right = newRight;
    }
private:
    T data; // data value in node
    binTreeNode < T > *left, *right; // links to other nodes
}; 
```

下面的函数都是新的，其他的（比如高度函数和构造函数）都是在父类中完成的，应该不相关。新功能是：

```
template <class T>
class binSTree : public binTree<T> {
public:
    void insert (const T& newData) {
        if (root == NULL) {
            root = new binTreeNode<T>(newData);
        }
        else
            insert(root,newData);
    }
    bool search (const T& x) const {
        if (root != NULL)
            return search(root,x);
        else
            return false;
    }
    bool remove (const T& x) {
        if (root == NULL)
            return false;
        remove(root,x);
        return true;
    }
protected:
    binTreeNode<T>* root;
private:
    void insert (binTreeNode<T>*& ptr, const T& x) {
        if (ptr == NULL) {      // Base case, actual insertion
            binTreeNode<T>* newNode;
            newNode = new binTreeNode<T>(x);
            ptr = newNode;
            return;
        }
        if (x == ptr->data)
            return;
        else if (x < ptr->data)
            insert(ptr->left,x);
        else
            insert(ptr->right,x);
        return;
    }
    bool search (binTreeNode<T>* ptr, const T& x) const {
        if (ptr->data == x)
            return true;
        else if (x < ptr->data && ptr->left != NULL)
            search(ptr->left,x);
        else if (ptr->right != NULL)
            search(ptr->right,x);
        else
            return false;
    }
    binTreeNode<T>* remove (binTreeNode<T>* ptr, const T& x) {
        if (ptr == NULL)
            return NULL;
        else if (ptr->data == x && leaf(ptr)) {
            delete ptr;
            ptr = NULL;
            return ptr;
        }
        else if (ptr->data == x && !leaf(ptr))
            return ptr;
        else if (x < ptr->data) {
            ptr->left = remove(ptr->left,x);
            return ptr;
        }
        else {
            ptr->right = remove(ptr->right,x);
            return ptr;
        }
    }
    bool leaf (binTreeNode<T>* node) const {
        if (node->left != NULL || node->right != NULL)
            return false;
        return true;
    }
}; 
```

根据 valgrind，分段错误出现在我检查 if (x == ptr->data) 的条件中的私有插入中。有谁知道这是为什么？我已经完全撞墙了。谢谢：3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T23:43:23.977

您的代码中存在一个问题`remove`，可能是也可能不是导致崩溃*的*原因，但绝对应该修复：当您递归删除`ptr->left`或`ptr->right`导致删除节点时，您还应该将父级中的`left`or`right`指针设置为`NULL`; 否则，您将代码打开到与悬空指针相关的错误。

# git - 将文件提交到 github 然后取消暂存，因为它包含敏感数据

> ID：10037489
> 
> 赞同：2
> 
> 时间：2012-04-05T23:38:03.207
> 
> 标签：git, oauth, commit, stage

我正在尝试在 Twitter Github 项目上工作。我有一个 OAuth 类，我想上传一次以提供 OAuth 的布局，但是之后我不想再提交它，所以我可以将我的数据放入其中而不是已经上传了。有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T15:16:57.977

您可以使用 update-index 告诉 git 它应该始终假定文件永远不会更改：

```
git update-index --assume-unchanged oath.class 
```

您可以使用 --no-assume-unchanged 将其切换回来

```
git update-index --no-assume-unchanged oath.class 
```

这将使 git 通知再次更改文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T23:42:40.537

您可以使用 .gitignore 在未来的提交中忽略某些文件。见[http://book.git-scm.com/4_ignoring_files.html](http://book.git-scm.com/4_ignoring_files.html)

# c++ - 从 OpenGL 程序到可导入对象的顶点列表

> ID：10037490
> 
> 赞同：0
> 
> 时间：2012-04-05T23:38:05.280
> 
> 标签：c++, opengl, blender

我正在对我研究的双星类型进行新的可视化，我从现有的代码开始，在给定一些合理的物理参数的情况下，它可以很好地观察它们。

但是，我希望在动画方面有更多的自由，我的第一个想法是以我读过的其他东西（搅拌机？）可以读取的格式输出程序制作的模型（Wavefront？） .OBJ 格式，虽然它看起来很简单，但我似乎无法正确理解；导入失败，我怀疑这是因为我不了解对象的实际存储方式。

我开始的程序是一个名为[BinSim](http://www.phys.lsu.edu/~rih/binsim/)的 C++ 项目，它已经有一个标志，可以将所有创建的对象的顶点输出到日志文件。看起来很简单，只是一个索引列表，x、y、z 和 R、G、B（有时是 A）值。我一直在使用的示例输出格式可以在[这里](http://pastebin.com/RPhcxfEF)找到；每个对象都被分成一个纬度/经度网格，这是一个小片段（创建的所有对象的完整文件超过 180 MB）。

我已经能够看到这些对象被定义为三角形条带，但是我对所有这些都感到困惑，以至于我看不到将顶点列表转换为 .OBJ（或其他）格式的清晰路径. 对不起，如果这真的属于另一个领域（GameDev？），谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T23:55:53.597

OpenGL 不是场景管理系统。它是一个绘图 API，并且从 OpenGL 数据结构开始用于模型存储是乏味的。如前所述，OpenGL*绘制*事物。有几个绘图图元，三角形条就是其中之一。您从两个顶点（形成一条线）开始，每个下一个传入顶点将最后两个指定顶点的线延伸为一个三角形。Wavefront OBJ 格式不知道三角形条带，您必须将它们分解为单独的三角形，模仿 OpenGL 的做法。

另外不要忘记 Blender 可以使用 Python 脚本轻松扩展，您可以为已有的任何数据编写一个导入脚本，而无需经历使用一些不合适的格式的麻烦。

# jquery - 嵌套在 DIV 中的顺序 FadeIn 和 FadeOut 元素

> ID：10037491
> 
> 赞同：1
> 
> 时间：2012-04-05T23:38:11.160
> 
> 标签：jquery

（大家好）我正在尝试创建一个`<li>`元素一个接一个地淡入和淡出的场景 -***我可以开始工作。***

当我将鼠标悬停在`<li>`当前正在动画的元素上时，我还试图停止动画过程 -***我也可以开始工作。***

但是，`<li>`一旦将元素设置为 display:none，我就无法显示它，而是我必须等待动画循环播放。

### 这是我当前的 HTML 标记；

```
<div id="content">
    <li class="one">one</li>
    <li class="two">two</li>
    <li class="three">three</li>
</div> 
```

但是我想如果我可以将元素嵌套`<li>`在一个不会被我的 jQuery 隐藏的元素中，那么`<li>`当我将鼠标悬停在`<div>`.

### 建议的标记；

```
<div id="content">
    <div class="wrap"><li class="one">one</li></div>
    <div class="wrap"><li class="two">two</li></div>
    <div class="wrap"><li class="three">three</li></div>
</div> 
```

但是，使用下面粘贴的我的 jQuery，您可以看到它仅在`<li>`元素是 #content 的兄弟元素时才处理元素，而不是在它们嵌套时处理元素。

```
jQuery(document).ready(function($) {
    $('#content li').hide();
    InOut($('#content li:first'));

    function InOut(elem) {
        elem.delay().fadeIn(1500).delay(5000).fadeOut(1500, function() {
            if (elem.next().length > 0) {
                InOut($(this).next());
            }
            else {
                InOut($(this).siblings(':first'));
            }

        });
    }

    $('#content li').mouseover(function() {
        $(this).fadeIn(500).stop(true, true);
    });
    $('#content li').mouseout(function() {
        if ($(this).is(":visible") == true) {
            InOut($(this));
        }
    });

}); 
```

为了举例，我在下面按顺序创建了当前动画的小提琴；

[http://jsfiddle.net/pusher/TuGES/1/](http://jsfiddle.net/pusher/TuGES/1/)

任何帮助总是受到赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T23:41:11.003

当您将显示设置为“无”时，该元素实际上不再可以在代码之外访问。它以编程方式使更改内容变得很棒，但对于用户的可点击内容来说并不是那么好。我建议改用可见性：隐藏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T00:32:25.873

要允许将鼠标悬停在隐藏元素上，您必须不要使用`fadeOut()`，因为这会将项目保留为 display: none 不会接收鼠标事件。相反，您需要将其保留为 0 的不透明度，这意味着您需要使用`fadeTo()`. 这是代码的固定版本（缩短了测试时间间隔）。

我已经修复了它，因此它具有以下行为：

*   当您将鼠标悬停在淡出的项目上时，它会弹回完全可见并且所有动画都停止。
*   当您将鼠标悬停在淡入的项目上时，它会弹出以完全可见并且所有动画都停止。
*   当您将鼠标悬停在可见的项目上时，它将将该项目保持为可见性并且不启动动画。
*   当您将鼠标移出某个项目时，它会启动动画。
*   当您将鼠标悬停在隐藏的项目上时，它会立即显示该项目并隐藏所有其他项目。

修复的关键之一是停止所有动画和`.hide()`所有其他元素（可能是动画），因为这是正常的完成状态，`.fadeOut()`它将允许动画以正常方式再次启动。隐藏所有元素后，我们显示当前元素并将其不透明度设置为 1 以使其处于完全可见状态。

```
jQuery(document).ready(function($) {
    $('#content li').css("opacity", 0);
    InOut($('#content li:first'));

    function InOut(elem) {
        elem.delay().fadeTo(1500, 1).delay(1000).fadeTo(1500, 0, function() {
            if (elem.next().length > 0) {
                InOut($(this).next());
            }
            else {
                InOut($(this).siblings(':first'));
            }

        });
    }

    $('#content li').mouseover(function() {
        $(this).siblings().add(this).stop(true, false).css("opacity", 0);
        $(this).show().css("opacity", 1);
    });
    $('#content li').mouseout(function() {
        if ($(this).is(":visible") == true) {
            InOut($(this));
        }
    });
});​ 
```

而且，这是一个工作演示：http: [//jsfiddle.net/jfriend00/k4ASz/](http://jsfiddle.net/jfriend00/k4ASz/)

PS我也不得不更新你的CSS，因为页面中的所有项目都在任何时候，布局有点不同。

# c# - lambda 到表达式树

> ID：10037495
> 
> 赞同：1
> 
> 时间：2012-04-05T23:38:38.097
> 
> 标签：c#, expression-trees

如何将以下 lambda 转换为表达式树？

```
source.Join(lookup, s => s.Id, l => l.Id, (s,l) => l) 
```

我想我已经涵盖了所有内容，除了 resultSelector (s, l) => l。

这是我的代码.. 谢谢！

```
public static IQueryable<TLookup> GetLookupSource<T, TLookup, TKey>(this IQueryable<T> source, IQueryable<TLookup> lookup{
   ParameterExpression s = Expression.Parameter(source.ElementType, "s");
   Expression<Func<T, TKey>> outerKeySelector = Expression.Lambda<Func<T, TKey>>(Expression.PropertyOrField(s, "Id"), s);

   ParameterExpression l = Expression.Parameter(lookup.ElementType, "l");
   Expression<Func<TLookup, TKey>> innerKeySelector = Expression.Lambda<Func<TLookup, TKey>>(Expression.PropertyOrField(l, "Id"), l);

   Expression<Func<T, TLookup, IQueryable<TLookup>>> resultSelector = null;//<---How to compose this

   MethodInfo joinMethod = typeof(Queryable).GetMethods(BindingFlags.Static | BindingFlags.Public).Where(m => m.Name == "Join" && m.GetParameters().Length == 5).First();
   var genericJoinMethod = joinMethod.MakeGenericMethod(typeof(T), typeof(TLookup), typeof(TKey), typeof(IQueryable<TLookup>));
   var result = genericJoinMethod.Invoke(source, new object[] { source, lookup, outerKeySelector, innerKeySelector, resultSelector });
   return (IQueryable<TLookup>)result;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T00:24:18.920

我认为应该这样做：

```
var resultSelector = Expression.Lambda<Func<T, TLookup, TLookup>>(l, s, l); 
```

# sencha-touch - sencha touch - 隐藏 Ext.navigation.View 的标题栏

> ID：10037497
> 
> 赞同：4
> 
> 时间：2012-04-05T23:38:54.813
> 
> 标签：sencha-touch

是否可以隐藏 Ext.navigation.View 的标题栏？我在文档中看不到任何选项。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-06T01:19:41.110

是的，你可以这样做：

```
Ext.define('Nav', {
  extend: 'Ext.navigation.View',

  config: {
    fullscreen: true,

    navigationBar: {
        hidden: true
    }
  }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-01T07:19:15.863

作为 jurodr 答案的变体：

```
Ext.define("Nav", {   
  'Ext.navigation.View',
   config: {   
     fullscreen: true,
     navigationBar:false   
     }   
}); 
```

# java - 在 web 服务中找不到类异常 Class.forName("com.mysql.jdbc.Driver")

> ID：10037499
> 
> 赞同：4
> 
> 时间：2012-04-05T23:39:07.210
> 
> 标签：java, eclipse, web-services, classnotfoundexception

`Class.forName("com.mysql.jdbc.Driver")`当我从 eclipse 运行 webservice 时，我遇到了一个问题，需要帮助，但是当我创建新的 java 项目时，它运行得很好。

我`mysql-connector-java-5.1.19-bin.jar`在两个项目的构建路径中添加了，但我不知道 web 服务中的问题是什么。

```
 public String insertOrder(
         int current_id, 
        int table_id) 
        {
            try {
      Class.forName("com.mysql.jdbc.Driver");
      Connection con = 
    DriverManager.getConnection("jdbc:mysql://localhost:3306/myhoteldb", "root", "mypassword");
      PreparedStatement st = 
    con.prepareStatement("insert into orders(orders.current_id,orders.table_id) values(?,?)");
      st.setInt(1, current_id);
      st.setInt(2, table_id);

      st.executeUpdate();
      } catch (Exception e) {
      System.out.println(e.getMessage());
      }
      return "record inserted";
      }
    } 
```

这是错误日志

```
 java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Unknown Source)
at pkg.MyServices.insertOrder(MyServices.java:124)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.apache.axis2.rpc.receivers.RPCUtil.invokeServiceClass(RPCUtil.java:194)
at org.apache.axis2.rpc.receivers.RPCMessageReceiver.invokeBusinessLogic(RPCMessageReceiver.java:102)
at org.apache.axis2.receivers.AbstractInOutMessageReceiver.invokeBusinessLogic(AbstractInOutMessageReceiver.java:40)
at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:114)
at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:173)
at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:173)
at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:144)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-06T03:56:31.680

如果此代码在您的 J2SE 中有效，则意味着您需要在某处包含`com.mysql.jdbc.Driver`类（所谓的 JDBC 驱动程序）的 JAR 文件。这个 JAR 需要在 Tomcat 中可见。因此，我建议将`mysql-jdbc.jar`物理位置放置在`/WEB-INF/lib`您的项目目录中。

过去很多次，我都经历过`ClassNotFoundException`jar 是否不在物理位置。然后重新启动Tomcat应该可以工作。

# objective-c - -initWithContentsOfFile：对于 NSMutableArray

> ID：10037502
> 
> 赞同：0
> 
> 时间：2012-04-05T23:39:58.273
> 
> 标签：objective-c, ios, nsmutablearray, viewdidload

我将图像存储在 NSMutableArray 中，现在我正试图让它们显示在 viewDidLoad 中。我尝试调用 initWithContentsOfFile，但这似乎不起作用。这是代码的样子： `imageView.image = [[UIImage alloc] initWithContentsOfFile:[self.array objectAtIndex:0]];`

我不确定我应该使用什么而不是 initWithContentsOfFile 来加载保存的图像，我什至不确定是否可以通过用户默认值将图像保存在 plist 中。我已经研究了一段时间了，但无济于事。非常感谢任何帮助，谢谢！

编辑：这是附加代码：

```
- (IBAction)grabImage {
    self.imgPicker = [[UIImagePickerController alloc] init];
    self.imgPicker.delegate = self;
    self.imgPicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
        _popover = [[UIPopoverController alloc] initWithContentViewController:imgPicker];
        [_popover presentPopoverFromRect:self.imageView.bounds inView:self.imageView permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
    } 

    else {
        [self presentModalViewController:imgPicker animated:YES];
    }
    [self.imgPicker resignFirstResponder];
}
// Sets the image in the UIImageView
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)img editingInfo:(NSDictionary *)editInfo {
    if (imageView.image == nil) {
        imageView.image = img;

        [self.array addObject:imageView.image];

        [picker dismissModalViewControllerAnimated:YES];
        [self.popover dismissPopoverAnimated:YES];
        return;

    }

    if (imageView2.image == nil) {
        imageView2.image = img;
        NSLog(@"The image is a %@", imageView);
        [self.array addObject:imageView2.image];

        [picker dismissModalViewControllerAnimated:YES];
        [self.popover dismissPopoverAnimated:YES];
        return;
    }

    if (imageView3.image == nil) {
        imageView3.image = img;

        [self.array addObject:imageView3.image];

        [picker dismissModalViewControllerAnimated:YES];
        [self.popover dismissPopoverAnimated:YES];
        return;
    }
}

- (void)applicationDidEnterBackground:(UIApplication*)application {
    NSLog(@"Image on didenterbackground: %@", imageView);

   [self.array addObject:imageView.image];
    [self.array addObject:imageView2.image];
     [self.array addObject:imageView3.image];

            [self.user setObject:self.array forKey:@"images"];
    [user synchronize];

            }

- (void)viewDidLoad
    {
        self.user = [NSUserDefaults standardUserDefaults];
        NSLog(@"It is %@", self.user);
        self.array = [[self.user objectForKey:@"images"]mutableCopy];
        imageView.image = [[UIImage alloc] initWithContentsOfFile:[self.array objectAtIndex:0]];
        imageView2.image = [[UIImage alloc] initWithContentsOfFile:[self.array objectAtIndex:1]];
        imageView3.image = [[UIImage alloc] initWithContentsOfFile:[self.array objectAtIndex:2]];

        UIApplication *app = [UIApplication sharedApplication];
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(applicationDidEnterBackground:)
                                                     name:UIApplicationDidEnterBackgroundNotification
                                                   object:app];

        backToGalleryButton.hidden = YES;
        tapToDeleteLabel.hidden = YES;
        deleteButton1.hidden = YES;
        [super viewDidLoad];

    } 
```

编辑：这就是我标记图像并根据它们的标签删除它们的方式：

```
- (IBAction)deleteButtonPressed:(id)sender {
    NSLog(@"Sender is %@", sender);
    UIAlertView *deleteAlertView = [[UIAlertView alloc] initWithTitle:@"Delete"
                                                              message:@"Are you sure you want to delete this photo?"
                                                             delegate:self
                                                    cancelButtonTitle:@"No"
                                                    otherButtonTitles:@"Yes", nil];
    [deleteAlertView show];

    int imageIndex = ((UIButton *)sender).tag;
    deleteAlertView.tag = imageIndex;
}

- (UIImageView *)viewForTag:(NSInteger)tag {
    UIImageView *found = nil;
    for (UIImageView *view in self.array) {
        if (tag == view.tag) {
            found = view;
            break;
        }
    }
    return found;
}

- (void)alertView: (UIAlertView *) alertView 
clickedButtonAtIndex: (NSInteger) buttonIndex
{

    if (buttonIndex != [alertView cancelButtonIndex]) {
        NSLog(@"User Clicked Yes. Deleting index %d of %d", alertView.tag, [array count]);
        NSLog(@"The tag is %i", alertView.tag);

        UIImageView *view = [self viewForTag:alertView.tag];
        if (view) {
            [self.array removeObject:view];
        }

        NSLog(@"After deleting item, array count  = %d", [array count]);
    NSLog(@"Returned view is :%@, in view: %@", [self.view viewWithTag:alertView.tag], self.view);
        ((UIImageView *)[self.view viewWithTag:alertView.tag]).image =nil;
    }

    [self.user setObject:self.array forKey:@"images"];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T00:37:14.043

问题是您不能将图像存储在属性列表中，这是您将其保存在用户默认值中时尝试执行的操作。您需要使用存档器将图像转换为可以存储的 NSData 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T00:03:11.150

看起来您没有将有效的图像路径传递给初始化方法。确保路径正确，并且包含图像扩展名。

但实际上，您不应该[`initWithContentsOfFile:`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIImage_Class/Reference/Reference.html#//apple_ref/occ/clm/UIImage/imageWithContentsOfFile%3a)在这种情况下调用，因为[`UIImageView`](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIImageView_Class/Reference/Reference.html)' 的[`image`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIImageView_Class/Reference/Reference.html#//apple_ref/occ/instp/UIImageView/image)属性会在您设置图像时保留它。这通常会导致内存泄漏（除非您使用自动引用计数）。改用静态初始化程序之一，例如[`imageNamed:`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIImage_Class/Reference/Reference.html#//apple_ref/occ/clm/UIImage/imageNamed%3a)，它具有使用系统缓存的额外好处，并且还根据设备的特性自动加载正确版本的图像（例如，它将加载更高分辨率的变体如果设备具有视网膜显示器，则为图像）。

# ruby-on-rails - 使用 redirect_to 并传递额外的参数

> ID：10037505
> 
> 赞同：3
> 
> 时间：2012-04-05T23:40:38.930
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试返回 redirect_to 并传递额外的参数。这是我的控制器中的内容：

```
redirect_to(env['omniauth.origin'], :hello => "hello world") 
```

这是正确地重定向到 URL，但 hello 没有被传递。想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T02:18:14.817

是`env['omniauth.origin']`字符串吗？如果是这样，我认为这行不通。您可以尝试将参数添加为：

```
redirect_to(env['omniauth.origin'] + "?hello=helloworld") 
```

或类似的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T02:57:46.620

`redirect_to`最终调用[`url_for`](http://api.rubyonrails.org/classes/ActionDispatch/Routing/UrlFor.html#method-i-url_for)，如果参数`url_for`是一个字符串，它只是简单地返回该字符串不变。它忽略任何其他选项。

我建议简单地使用 Rails 的`Hash#to_query`方法：

```
redirect_to([env['omniauth.origin'], '?', params.to_query].join) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T02:30:31.883

在您的路线中为其添加路径并将 helloworld 作为参数传递

```
redirect_to(route_in_file_path('helloworld')) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T05:08:28.947

`ApplicationController`向类添加函数

```
class ApplicationController  < ActionController::Base    
  def update_uri(url, opt={})
    URI(url).tap do |u|
      u.query = [u.query, opt.map{ |k, v| "#{k}=#{URI.encode(v)}" }].
                 compact.join("&")
    end
  end
  helper_method :update_uri # expose the controller method as helper
end 
```

现在您可以执行以下操作：

```
redirect_to update_uri(env['omniauth.origin'], :hello => "Hello World") 
```

# android - ibuildapp.com 中的 Android 应用程序权限

> ID：10037506
> 
> 赞同：0
> 
> 时间：2012-04-05T23:40:44.603
> 
> 标签：android, security, google-play

我一直在使用网站 ibuildapp.com 构建一些 android 应用程序，但问题是每个应用程序都需要如此多的权限，尽管该应用程序不使用这些功能。我的问题是，该应用程序可以将个人信息发送到他们的服务器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T18:36:05.643

我是 iBuildApp 团队开发人员，所以我可以回答您的问题。:)

我们在每个应用程序中要求所有这些权限的唯一原因是，这就是我们的服务目前的工作方式。它有大量的小部件（即页面类型/功能），每个小部件都有自己需要的权限。我们的一项功能是您可以动态管理您的应用程序（修改内容、更改页面类型等），而在大多数情况下，无需重新构建原生应用程序：所有更改都将在已构建的应用程序中可见。这意味着所有模块都内置在应用程序中（而如前所述，每个小部件都需要它自己的权限）。

所以总的来说：是的，如果一个应用程序（我假设不是我们的应用程序，而是任何应用程序）要求一些权限，那么它可能会以“坏”的方式使用它们。但对于我们来说：不。我们对您的个人数据不感兴趣。我们只对提供优质服务感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T02:19:23.320

您是在询问该应用程序是否可以将信息发送到 ibuildapp.com 服务器或一般服务器？

应用程序仅在需要它们提供主要功能时才应请求权限。我对 ibuildapp.com 一无所知，但如果它请求很多权限，它就会在我的“嫌疑人”名单上名列前茅。

permission.READ_CONTACTS、permission.READ_CALENDAR、permission.READ_PROFILE 等等，都不能随便发！[Android.Manifest.Permission javadoc](http://developer.android.com/reference/android/Manifest.permission.html)中列出了完整的权限列表 以及文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T08:06:06.937

嗨，我是 ibuildapp android 开发人员。您可以解压缩收到的 apk 文件并编辑清单文件。一旦你完成压缩它。

# iphone - iPhone 无法让 Xcode 从 4.1 升级到 4.3

> ID：10037507
> 
> 赞同：0
> 
> 时间：2012-04-05T23:40:53.510
> 
> 标签：iphone

我有3个登录名。我安装了 Xcode 4.1 并且运行良好。后来我升级了，在App Store按升级按钮，一开始觉得还可以。但后来我注意到只有一个登录升级到 Xcode 4.3.1，其他 2 个登录仍然运行 Xcode 4.1。我想我可以在其他 2 次登录中运行升级，但是......当我去 App Store 时，它​​安装了 Xcode 4.3.1 并且没有升级按钮。

有谁知道我该如何解决这个问题？？？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T23:51:01.140

我认为对于 Xcode，你必须下载整个东西，这就是它的更新方式，所以只需下载 Xcode 4.3 并安装。确保先卸载另一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T00:37:00.373

Xcode 4.1 通常安装在 /Developer 中，而 Xcode 4.3 是 Mac App Store 应用程序，应该位于 /Applications 中。

切换到其他帐户之一，打开 Finder，导航到 /Applications。在该文件夹中打开 Xcode，检查版本，如果是 4.3，则“保留在 Dock 中”并删除 /Developer。

# html - 在图像上放置文本

> ID：10037514
> 
> 赞同：0
> 
> 时间：2012-04-05T23:41:19.080
> 
> 标签：html, css

我想不出在图像上放置文本的好方法。这是我想做的事情：

这就是我所拥有的。我想在左侧的黄色导航标志上放置文本（如主页、联系我们、关于我们等的正常导航），但我真的想不出一个好的方法来做到这一点。我试着做同样的事情，我把它们的实际标志放在绝对位置上，但没有成功。我还计划将文本放在页面中间的蓝色条上，但这将以相同的方式完成。

我不需要将字母本身作为指向下一页的链接，但是如果我将文本放在上面时会发生这种情况，那就这样吧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T23:44:42.230

您可能会将图像合并为背景的一部分。我对此相当陌生，因此知识有限，但是将所有这些图像添加到单个“背景图像”CSS 属性中可能是您​​最好的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T23:50:59.623

在图像所在的位置使用跨度，并将其设置为绝对位置，顶部和左侧将其放置在正确的位置。这是一个示例，可以尝试使用杆子上的帖子顶部来获取中间的文本测试：

```
<a href="index.html">
 <img src="images/rightArrow.png" id="img2">
 <span style="position:absolute;left:95px;top:33px">test</span>
</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T23:53:58.267

这样的事情怎么样？[http://jsfiddle.net/UMtXy/1/](http://jsfiddle.net/UMtXy/1/)

您可以单独定位每个元素，添加悬停样式，更改背景等。​</p>

## HTML

*（比仅使用 DIV 更具语义）*

```
<nav>
   <ul>
    <li>Some Text</li>
    <li>Some Text</li>
    <li>Some Text</li>
    <li><a href="#">Links can go here too</a></li>
   </ul>
</nav> 
```

## CSS

```
NAV LI{
    background-image:url(http://people.eecs.ku.edu/~ageoffri/unavitSite/images/rightArrow.png);    
    background-repeat: no-repeat;
    background-position: top left;
    width: 200px;
    height: 40px;
    padding: 12px 32px;
    font: 12px/12px arial, sans-serif;
}

NAV LI:hover {
    color: red;
} 
```

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T23:55:33.690

正如 mike jones 所说，您将使用 css 变量 background/background-image ，它只是 1 个路标，您将重复此类，但仅更改文本，例如：

**CSS 样式代码（必须添加）：**

```
.yellowarrow{
background: url(http://people.eecs.ku.edu/~ageoffri/unavitSite/images/leftArrow.png);
background-repeat: no-repeat;
width: 170px;
height: 35px;
margin-bottom: 12px;
} 
```

**代替：**

```
<img src="images/leftArrow.png" id="img3" /><img src="images/leftArrow.png" id="img4" /><img src="images/leftArrow.png" id="img5" /><a href="contact.html"><img src="images/leftArrow.png" id="img6" /></a> 
```

**和：**

```
 <div class="yellowarrow">Menu 1</div>
<div class="yellowarrow">Menu 2</div>
<div class="yellowarrow">Menu 3</div>
<div class="yellowarrow">Menu 4</div>
<div class="yellowarrow">Menu 5</div>
<div class="yellowarrow"><a href="contact.html">Contact Us</a></div> 
```

就个人而言，这将是最方便的方法，我还建议在菜单 DIV(s) 上使用 onclick 选项，而不是在文本周围使用 href。

# c# - C# IDisposable 类，正确使用 Dispose，获取错误“dispose”需要 1 个参数

> ID：10037523
> 
> 赞同：1
> 
> 时间：2012-04-05T23:42:52.173
> 
> 标签：c#

下面是我正在使用的整个课程，我有两个问题，1 这是 Dispose() 的正确使用，还有，为什么我收到错误 No Overload for method 'dispose' 需要 1 个参数。

```
使用系统；
使用 System.Collections.Generic；
使用 System.Linq；
使用 System.Text；

命名空间爬虫
{
    类 LoggingClass : IDisposable
    {
        public void GenericLogging(string systemMsg, string SystemClass, string SystemSection, string ID, string FixID, string baseURL, string mysqlQueryName, string mysqlQuery)
        {
            字符串 Loggingall = " 插入 tblLogs " +
                            "set SystemMsg='" + systemMsg.Replace("'","''") + "'" +
                            ",SystemClass = '" + SystemClass.Replace("'", "''") + "'" +
                            ",SystemSection = '" + SystemSection.Replace("'", "''") + "'" +
                            ",ID = '" + CarID.Replace("'", "''") + "'" +
                            ",FixID = '" + FixID.Replace("'", "''") + "'" +
                            ",baseurl = '" + baseURL.Replace("'", "''") + "'" +
                            ",mysqlqueryName = '" + mysqlQuery.Replace("'", "''") + "'" +
                            ",mysqlquery = '" + mysqlQuery.Replace("'", "''") + "'" +
                            ",TimeStamp = Now()";
            MySQLProcessing.MySQLProcessor MYSQLP = new MySQLProcessing.MySQLProcessor();
            MYSQLP.MySQLInsertUpdate(Loggingall, "Loggingall");
        }

        公共无效处置（）
        {
            处置（真）；
            // 将自己从终结队列中移除
            // 防止该对象的终结代码
            // 从第二次执行。
            GC.SuppressFinalize(this);
        }
    }
}

```

这是我更新的代码：}

这是正确的称呼方式吗？我也必须调用处置吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T23:51:44.400

正如其他回答者所提到的，您似乎不需要实现 IDisposable。你根本没有类字段，所以没有什么要清理的。

假设该类的内容比您所展示的要多，那么您正在遵循实现 IDisposable 的模式，但您只完成了一半。

模式是 to`IDisposable.Dispose()`和 finalizer ( `~LoggingClass`) 都调用一个公共方法，`Dispose(bool)`。在该`Dispose(bool)`方法中，如果布尔值为 true，则应清理托管资源和非托管资源，如果传递 false，则仅清理非托管资源。

这是我用于实现 IDisposable 的代码。

```
~LoggingClass()
{
    this.Dispose(false);
}

protected bool Disposed { get; private set; }

public void Dispose()
{
    this.Dispose(true);
    GC.SuppressFinalize(this);
}

protected virtual void Dispose(bool disposing)
{
    if (!this.Disposed)
    {
        if (disposing)
        {
            // Perform managed cleanup here.

        }

        // Perform unmanaged cleanup here.

        this.Disposed = true;
    }
} 
```

## 编辑

看起来您添加了更新的代码，然后将其删除。但是，这是我对你如何称呼它的评论。

使用您当前拥有的 GenericLogging 方法，您根本不需要 IDisposable。但是，我会做几件事来改进您的代码。

1.  在构造函数中创建 MySQLProcessing.MySQLProcessor 实例，而不是在 GenericLogging 方法中。
2.  在 Dispose(bool) 的托管清理部分调用 MySQLProcessing.MySQLProcessor.Dispose()（或 .Close()，或任何该类具有的）。
3.  让您的 LoggingClass 对象保持更长时间。是的，您所演示的是一个正确实现的`using`语句，但您最终会在代码中创建和销毁数千个对象。创建一个 LoggingClass 对象，并在程序的整个长度内保留它，而不仅仅是一条日志语句。
4.  当您的应用程序即将退出时调用 LoggingClass.Dispose()。手动执行此操作（而不是使用`using`语句）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T23:48:10.953

不，这不是 的正确使用`IDisposable`，即因为您似乎实际上并没有处理任何东西。这也是您错误的原因；您已经取出了一些自动生成的代码。把它放回去（它看起来像这样）并按照评论：

```
private bool disposed = false;

protected virtual void Dispose(bool disposing)
{
    if(!disposed) {
        disposed = true;

        if(disposing) {
            // Clean up managed resources, like files or GDI objects
        }

        // Clean up unmanaged resources, like COM components
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-05T23:48:27.663

> 为什么我收到错误 No Overload for method 'dispose' 需要 1 个参数。

因为您没有接受 a`bool`方法的重载`Dispose()`。

> 这是 Dispose() 的正确使用吗？

很难说。您的类没有您显示的托管或非托管资源，因此该方法基本上什么都不做。（实际上它只`GC.SuppressFinalize(this)`会让事情变得更糟）

# python - PySide 中的自定义委托

> ID：10037529
> 
> 赞同：1
> 
> 时间：2012-04-05T23:44:06.207
> 
> 标签：python, qt, delegates, pyside

我一直在尝试让 tabeView 将其列之一显示为组合框。为此，我为自定义委托编写了代码：

```
class comboBoxDelegate(QStyledItemDelegate):

def __init__(self, model, parent=None):
    super(comboBoxDelegate, self).__init__(parent)
    self.parent= parent
    self.model= model

def createEditor(self, parent, option, index):

    if not index.isValid():
        return False

    self.currentIndex=index  

    self.comboBox = QComboBox(parent)
    self.comboBox.setModel(self.model)
    value = index.data(Qt.DisplayRole)
    self.comboBox.setCurrentIndex(value)

    return self.comboBox

def setEditorData(self, editor, index):
    value = index.data(Qt.DisplayRole)
    editor.setCurrentIndex(value)

def setModelData(self, editor, model, index):

    if not index.isValid():
        return False

    index.model().setData(index, editor.currentIndex(), Qt.EditRole)

def paint(self, painter, option, index):
    currentIndex= index.data(Qt.DisplayRole)

    opt= QStyleOptionComboBox()
    opt.rect= option.rect
    currentComboIndex= self.model.createIndex(currentIndex,0)
    opt.currentText= self.model.data(currentComboIndex, Qt.DisplayRole)

    QApplication.style().drawComplexControl(QStyle.CC_ComboBox, opt, painter) 
```

问题是当我尝试它时，组合框一开始不显示任何文本（只有在你点击它之后）。似乎 currentText 属性不起作用。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-17T14:01:14.077

我知道这是旧的，但你真的根本不需要处理这幅画。组合框不显示值，因为组合框当前索引可能设置为字符串而不是 int。

```
class ComboBoxDelegate(QtGui.QStyledItemDelegate):
    """ComboBox view inside of a Table. It only shows the ComboBox when it is
       being edited.
    """
    def __init__(self, model, itemlist=None):
        super().__init__(model)
        self.model = model
        self.itemlist = None
    # end Constructor

    def createEditor(self, parent, option, index):
        """Create the ComboBox editor view."""
        if self.itemlist is None:
            self.itemlist = self.model.getItemList(index)

        editor = QtGui.QComboBox(parent)
        editor.addItems(self.itemlist)
        editor.setCurrentIndex(0)
        editor.installEventFilter(self)
        return editor
    # end createEditor

    def setEditorData(self, editor, index):
        """Set the ComboBox's current index."""
        value = index.data(QtCore.Qt.DisplayRole)
        i = editor.findText(value)
        if i == -1:
            i = 0
        editor.setCurrentIndex(i)
    # end setEditorData

    def setModelData(self, editor, model, index):
        """Set the table's model's data when finished editing."""
        value = editor.currentText()
        model.setData(index, value)
    # end setModelData
# end class ComboBoxDelegate 
```

此委托仅在编辑项目时显示组合框，否则将显示普通文本项目委托。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T21:23:28.037

您可以重写`QStyledItemDelegate.displayText()`方法以使您的委托显示文本，而无需重新实现paint()。就像是

```
class comboBoxDelegate(QStyledItemDelegate):
    ...
    def displayText(self, value, locale=None):
        return get_appropriate_text_representation_for_value(value) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T21:59:55.000

我认为你应该调用父类paint() 方法。添加：

```
QStyledItemDelegate.paint(self, painter, option, index) 
```

在你的类中的paint方法结束时，在调用之后`drawComplexControl`

# apache - 如何更改 APXS 环境变量？

> ID：10037538
> 
> 赞同：0
> 
> 时间：2012-04-05T23:45:21.260
> 
> 标签：apache, unix, module, ftp

**如何更改 APXS 环境变量以使用来自不同位置的 apxs 工具？**

* * *

我正在尝试将 Apache 模块安装到我的 MAMP 安装中。我可以使用`$ apxs -cia mod_ftp_example.c`. 但是，全局`apxs`命令使用的是为 MAC OS X 预安装的 Apache 服务器配置的 apxs 工具，而不是使用位于我的 MAMP 构建中的 apxs 工具。

这意味着当我`apxs`在终端中执行命令时，模块的 .so 文件安装在这里：

```
/usr/libexec/apache2 
```

这是将模块安装到 Mac 附带的 Apache 服务器，而不是**我的**MAMP 版本。我想将模块的 .so 文件安装到的库模块的路径实际上是在这里：

```
/Applications/MAMP/Library/modules 
```

现在，当我执行命令时`$ whereis apxs`，我看到 apxs 工具位于`/usr/sbin/apxs`- 再次，这是默认 OS X Apache 服务器的 httpd 构建内部，而**不是**我的 MAMP 服务器。

我的理论是，如果我可以更改`whereis`apxs 的位置，那么我可以将我的模块安装到正确的位置。那么我怎样才能改变那个位置呢？我尝试了以下方法，但它似乎不起作用：/

```
$ APXS=/applications/mamp/library/bin/apxs 
```

有任何想法吗？？？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T00:59:48.377

如果您只是直接运行 APXS，则可以使用完整路径，即

```
apxs -cia mod_ftp_example.c 
```

你可以做

```
/applications/mamp/library/bin/apxs -cia mod_ftp_example.c 
```

如果你运行 apache ./configure.apxs 你可以

```
export APXS=/applications/mamp/library/bin/apxs 
```

如果您执行其他类型的脚本，您总是可以更改路径的优先级：

```
export PATH=/applications/mamp/library/bin/:$PATH 
```

# xcode - 使用 Mac OS X (Xcode 4.1) 进行 FreeBSD 开发

> ID：10037548
> 
> 赞同：1
> 
> 时间：2012-04-05T23:46:13.110
> 
> 标签：xcode, macos, cross-platform, cross-compiling, freebsd

嗨 stackoverflow 社区！

我即将开始使用 C 编程语言为 FreeBSD Ports Collection（pkgng 实用程序）开发补丁。

问题是我使用的是 Mac OS X，我真的不想切换到另一个操作系统。我已经在 Parallels Desktop VM 上安装了 Freebsd 9.0。Xcode 4.1 似乎是相当不错的 C 开发工具。

是否可以通过 Xcode 4.1 实现 FreeBSD 的开发？如何为这种形式的开发设置项目环境并为 FreeBSD 编译源代码？

我也愿意接受有关使用 MacOS X 为 FreeBSD 开发补丁的跨平台开发的任何其他建议。哪个是组织所有必要物品的最佳方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T14:48:39.943

X Code 非常好，我倾向于使用它，但随后在实际运行 FreeBSD 的系统上进行常规构建。如果你有你正在使用的所有东西的源代码（除了接口匹配的标准库），没有理由不使用 Xcode 在 OS X 上工作。如果需要，您可以构建自己的库。编写跨平台的一件事（假设您经常在另一个平台上构建）是使您的代码更具可移植性。避免使用特定于平台的“扩展”更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T14:26:26.863

由于您想为 pkgng 开发补丁，我强烈建议您在 FreeBSD 上编译和测试代码，因为它是唯一使用 pkgng 接口的端口和包系统的系统。因此，除非它可以为 FreeBSD 进行交叉编译，否则使用任何 OS X IDE 可能都不是一个好主意。

我对 Parallels 不熟悉，但您可能可以在 OS X 和在 VM 中运行的 FreeBSD 之间设置文件共享机制。这样您就可以在 OS X 上编辑文件并在 FreeBSD 下使用它们。

# android - isBluetoothA2dpOn 无法正常工作

> ID：10037551
> 
> 赞同：2
> 
> 时间：2012-04-05T23:46:54.573
> 
> 标签：android

我有一项在通话期间使用的服务，我正在尝试确定是否连接了蓝牙耳机。但是当我使用 am.isBluetoothA2dpOn() 它*总是*返回 false。在通话期间，而不是在通话期间，一直！

这是我正在做的一个示例：

```
AudioManager am = (AudioManager) getSystemService(AUDIO_SERVICE);
if(am.isBluetoothA2dpOn())
{
    Log.v(TAG, "Bluetooth headset is connected!");
} 
```

我还在 AndroidManifest.xml 中使用以下权限

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.BLUETOOTH" /> 
```

另外：am.isWiredHeadsetOn() 工作得很好！？！

蓝牙设备已连接，我可以像使用它一样使用它。所以任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:52:04.943

你想检查 isBluetoothScoOn() 而不是 A2DP

A2DP主要用于音乐和游戏，高品质的音频。高级音频分发配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T17:09:59.363

如果您没有 android.permission.MODIFY_AUDIO_SETTINGS

我建议检查 isBluetoothA2dpOn() 是否需要相同的权限

# google-app-engine - GAE：如何重定向？

> ID：10037560
> 
> 赞同：0
> 
> 时间：2012-04-05T23:48:22.653
> 
> 标签：google-app-engine, web, dns

我有一个 GoDaddy 域。

我有一个 Google App Engine 帐户。

我已将我的域链接到 Google Apps。

这是实际的网站：[www.htmltetris.com](http://www.htmltetris.com)

我在这里要做的是确保尽可能多的人可以通过该域突然访问我的网站（托管在 GAE 上）。

目前看起来一切都已经运行，至少我的域（htmltetris.com）实际上进入了 GAE 服务器。

不过，如果您前往[htmltetris.com](http://htmltetris.com)，您最终会遇到垃圾。我必须改变什么？我应该添加一个 CNAME 条目以重定向到 www 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T02:53:01.083

[http://support.google.com/a/bin/answer.py?hl=en&answer=2518373](http://support.google.com/a/bin/answer.py?hl=en&answer=2518373)

# java - 需要使用hadoop native

> ID：10037562
> 
> 赞同：1
> 
> 时间：2012-04-05T23:48:28.303
> 
> 标签：java, hadoop, mapreduce

我正在从我的 java 程序中调用 mapreduce 作业。今天，当我将 mapreduce 作业的输入 fromat 设置为：`LzoTextInputFormat` mapreduce 作业失败：

```
Could not load native gpl library
java.lang.UnsatisfiedLinkError: no gplcompression in java.library.path
at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1738)
at java.lang.Runtime.loadLibrary0(Runtime.java:823)
at java.lang.System.loadLibrary(System.java:1028)
at com.hadoop.compression.lzo.GPLNativeCodeLoader.<clinit>(GPLNativeCodeLoader.java:32)
at com.hadoop.compression.lzo.LzoCodec.<clinit>(LzoCodec.java:67)
at com.hadoop.mapreduce.LzoTextInputFormat.listStatus(LzoTextInputFormat.java:58)
at org.apache.hadoop.mapreduce.lib.input.FileInputFormat.getSplits(FileInputFormat.java:241)
at com.hadoop.mapreduce.LzoTextInputFormat.getSplits(LzoTextInputFormat.java:85)
at org.apache.hadoop.mapred.JobClient.writeNewSplits(JobClient.java:885)
at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:779)
at org.apache.hadoop.mapreduce.Job.submit(Job.java:432)
at org.apache.hadoop.mapreduce.Job.waitForCompletion(Job.java:447)
at company.Validation.run(Validation.java:99)
at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
at company.mapreduceTest.main(mapreduceTest.java:18)
Apr 5, 2012 4:40:29 PM com.hadoop.compression.lzo.LzoCodec <clinit>
SEVERE: Cannot load native-lzo without native-hadoop
java.lang.IllegalArgumentException: Wrong FS: hdfs://D-SJC-00535164:9000/local/usecases /gbase014/outbound/seed_2012-03-12_06-34-39/1_1.lzo.index, expected: file:///
at org.apache.hadoop.fs.FileSystem.checkPath(FileSystem.java:310)
at org.apache.hadoop.fs.RawLocalFileSystem.pathToFile(RawLocalFileSystem.java:47)
at org.apache.hadoop.fs.RawLocalFileSystem.getFileStatus(RawLocalFileSystem.java:357)
at org.apache.hadoop.fs.FilterFileSystem.getFileStatus(FilterFileSystem.java:245)
at org.apache.hadoop.fs.FileSystem.exists(FileSystem.java:648)
at com.hadoop.compression.lzo.LzoIndex.readIndex(LzoIndex.java:169)
at com.hadoop.mapreduce.LzoTextInputFormat.listStatus(LzoTextInputFormat.java:69)
at org.apache.hadoop.mapreduce.lib.input.FileInputFormat.getSplits(FileInputFormat.java:241)
at com.hadoop.mapreduce.LzoTextInputFormat.getSplits(LzoTextInputFormat.java:85)
at org.apache.hadoop.mapred.JobClient.writeNewSplits(JobClient.java:885)
at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:779)
at org.apache.hadoop.mapreduce.Job.submit(Job.java:432)
at org.apache.hadoop.mapreduce.Job.waitForCompletion(Job.java:447)
at company.Validation.run(Validation.java:99)
at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
at company.stopTransfer.mapreduceTest.main(mapreduceTest.java:18)
Apr 5, 2012 4:40:29 PM company.Validation run
 SEVERE: LinkExtractor: java.lang.IllegalArgumentException: Wrong FS: hdfs://D-SJC-00535164:9000/local/usecases/gbase014/outbound/seed_2012-03-12_06-34-39/1_1.lzo.index, expected: file:///
at org.apache.hadoop.fs.FileSystem.checkPath(FileSystem.java:310)
at org.apache.hadoop.fs.RawLocalFileSystem.pathToFile(RawLocalFileSystem.java:47)
at org.apache.hadoop.fs.RawLocalFileSystem.getFileStatus(RawLocalFileSystem.java:357)
at org.apache.hadoop.fs.FilterFileSystem.getFileStatus(FilterFileSystem.java:245)
at org.apache.hadoop.fs.FileSystem.exists(FileSystem.java:648)
at com.hadoop.compression.lzo.LzoIndex.readIndex(LzoIndex.java:169)
at com.hadoop.mapreduce.LzoTextInputFormat.listStatus(LzoTextInputFormat.java:69)
at org.apache.hadoop.mapreduce.lib.input.FileInputFormat.getSplits(FileInputFormat.java:241)
at com.hadoop.mapreduce.LzoTextInputFormat.getSplits(LzoTextInputFormat.java:85)
at org.apache.hadoop.mapred.JobClient.writeNewSplits(JobClient.java:885)
at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:779)
at org.apache.hadoop.mapreduce.Job.submit(Job.java:432)
at org.apache.hadoop.mapreduce.Job.waitForCompletion(Job.java:447)
at company.Validation.run(Validation.java:99)
at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
at company.stopTransfer.mapreduceTest.main(mapreduceTest.java:18) 
```

但是在 lib/native 中，它们是一些文件扩展为 a,la,so... 我试图在我的路径环境变量中设置它们，但仍然不起作用。

谁能给我的建议！！！！

非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T01:53:43.793

您的错误与 hadoop 本机库文件夹中不存在 Lzo 的实际共享库有关。

的代码`GPLNativeCodeLoader`正在寻找一个名为`gplcompression`. Java 实际上是在寻找一个名为`libgplcompression.so`. 如果您的文件夹中不存在此文件，`lib/native/${arch}`那么您将看到此错误。

In a terminal, navigate to your hadoop base directory and execute the following to dump the native libraries installed, and post back to your original question

```
uname -a
find lib/native 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-12T09:59:33.713

If you are using Cloudera Hadoop, you can install lzo easily according to the following instruction:

[http://www.cloudera.com/content/cloudera/en/documentation/cloudera-impala/v1/v1-0-1/Installing-and-Using-Impala/ciiu_lzo.html](http://www.cloudera.com/content/cloudera/en/documentation/cloudera-impala/v1/v1-0-1/Installing-and-Using-Impala/ciiu_lzo.html)

# image - Node.js Base64 图像解码和写入文件

> ID：10037563
> 
> 赞同：19
> 
> 时间：2012-04-05T23:48:46.103
> 
> 标签：image, apache-flex, node.js, base64, decoding

我正在将此 Flex 表单的内容（不要问为什么）发送到 node.js。有一个名为“photo”的后置参数，它是一个 base64 编码的图像。

照片内容发送成功。问题是当我试图解码内容并将它们写入文件时。

```
 var fs = require("fs");

  fs.writeFile("arghhhh.jpg", new Buffer(request.body.photo, "base64").toString(), function(err) {}); 
```

我也尝试过 toString("binary") 。但似乎节点没有解码所有内容。似乎它只解码 jpg 标头信息并留下其余部分。

谁能帮我解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-06T00:03:40.963

尝试`.toString()`完全删除并直接写入缓冲区。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-10-16T06:27:20.687

这是我的完整解决方案，它可以读取任何 base64 图像格式，对其进行解码并以正确的格式保存在数据库中：

```
 // Save base64 image to disk
    try
    {
        // Decoding base-64 image
        // Source: http://stackoverflow.com/questions/20267939/nodejs-write-base64-image-file
        function decodeBase64Image(dataString) 
        {
          var matches = dataString.match(/^data:([A-Za-z-+\/]+);base64,(.+)$/);
          var response = {};

          if (matches.length !== 3) 
          {
            return new Error('Invalid input string');
          }

          response.type = matches[1];
          response.data = new Buffer(matches[2], 'base64');

          return response;
        }

        // Regular expression for image type:
        // This regular image extracts the "jpeg" from "image/jpeg"
        var imageTypeRegularExpression      = /\/(.*?)$/;      

        // Generate random string
        var crypto                          = require('crypto');
        var seed                            = crypto.randomBytes(20);
        var uniqueSHA1String                = crypto
                                               .createHash('sha1')
                                                .update(seed)
                                                 .digest('hex');

        var base64Data = 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAZABkAAD/4Q3zaHR0cDovL25zLmFkb2JlLmN...';

        var imageBuffer                      = decodeBase64Image(base64Data);
        var userUploadedFeedMessagesLocation = '../img/upload/feed/';

        var uniqueRandomImageName            = 'image-' + uniqueSHA1String;
        // This variable is actually an array which has 5 values,
        // The [1] value is the real image extension
        var imageTypeDetected                = imageBuffer
                                                .type
                                                 .match(imageTypeRegularExpression);

        var userUploadedImagePath            = userUploadedFeedMessagesLocation + 
                                               uniqueRandomImageName +
                                               '.' + 
                                               imageTypeDetected[1];

        // Save decoded binary image to disk
        try
        {
        require('fs').writeFile(userUploadedImagePath, imageBuffer.data,  
                                function() 
                                {
                                  console.log('DEBUG - feed:message: Saved to disk image attached by user:', userUploadedImagePath);
                                });
        }
        catch(error)
        {
            console.log('ERROR:', error);
        }

    }
    catch(error)
    {
        console.log('ERROR:', error);
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-06T19:47:02.100

在 nodejs 8.11.3`new Buffer(string, encoding)`中已弃用，取而代之的是新的方法`Buffer.from(string, encoding)`总是没有`.toString()`. 有关更多详细信息，请阅读[nodejs 文档中的文档：缓冲区](https://nodejs.org/dist/latest-v8.x/docs/api/buffer.html#buffer_buffer_from_buffer_alloc_and_buffer_allocunsafe)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-22T06:33:43.073

消除`.toString()`

在这里，您将 base64 解码为缓冲区，这很好，但随后您将缓冲区转换为字符串。这意味着它是一个字符串对象，其代码点是缓冲区的字节。

# iphone - Objective-c 初学者：getter setter prob 和 EXC_BAD_ACCESS 错误

> ID：10037564
> 
> 赞同：0
> 
> 时间：2012-04-05T23:48:49.377
> 
> 标签：iphone, objective-c, cocoa-touch, getter-setter, accessor

我一直在收到 EXC_BAD_ACCESS，我不知道为什么......

简单的任务：

Parser Class 在名为 listArray 的 NSMutableArray 中使用 touchXML 传递 XML。在 GrabCountry 方法中，我可以访问 listArray 和 listArray.count 效果很好。

现在我需要 MasterViewController 的另一个类中的 listArray.count。但我一直收到 EXC_BAD_ACCESS 错误。请帮忙！

这是代码片段：Parser.h

```
#import <Foundation/Foundation.h>

@interface Parser : NSObject

@property (strong, retain) NSMutableArray *listArray;
@property (strong, retain) NSURL *url;

-(void) grabCountry:(NSString *)xmlPath;
@end 
```

解析器

```
#import "Parser.h"
#import "TouchXML.h"

@implementation Parser
@synthesize listArray;
@synthesize url;

-(void) grabCountry:(NSString *)xmlPath {

    // Initialize the List MutableArray that we declared in the header
    listArray = [[NSMutableArray alloc] init];  

    // Convert the supplied URL string into a usable URL object
    url = [NSURL URLWithString: xmlPath];

   //XML stuff deleted

    // Add the blogItem to the global blogEntries Array so that the view can access it.
   [listArray addObject:[xmlItem copy]];

  //works fine
  NSLog(@"Amount: %i",listArray.count);
}

 @end 
```

主视图控制器.h

```
#import <UIKit/UIKit.h>
#import "AppDelegate.h"
#import "TouchXML.h"
#import "Parser.h"

@class Parser;

    @interface MasterViewController : UITableViewController{

    Parser *theParser;

}
@end 
```

MasterViewControlelr.m

```
- (void)viewDidLoad
{
NSString *xmlPath = @"http://url/to/xml.xml";

theParser = [[Parser alloc] init];
//Starts the parser
[theParser grabCountry:xmlPath];

//Here I want to access the Array count, but getting an BAD ACCESS error
NSLog(@"Amount %@",[theParser.listArray count]);

[super viewDidLoad];
} 
```

谁能解释一下这里的问题是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T00:12:50.833

在内部，每个`@property`都有一个对应的实例变量。

在您的`-grabCountry`方法中，您直接访问语句中的实例变量`listArray = [[NSMutableArray alloc] init];`（与 相同`url = [NSURL URLWithString: xmlPath];`），而不是 的`@property`setter 方法，导致`NSMutableArray`您`alloc-init`不会被属性保留。要调用`@property`的 setter 方法，您应该调用

```
NSMutableArray *temp = [[NSMutableArray alloc] init];
self.listArray = temp; // or [self setListArray:temp];
[temp release]; 
```

如果您希望在直接访问 的实例变量时让 Xcode 显示错误`@property`，可以使用`@synthesize listArray = _listArray`，它将实例变量的名称更改为`_listArray`.

通常，如果有`alloc-init`，则必须有相应的`release`（除非使用自动引用计数）。

* * *

此外，在语句中，不需要`[listArray addObject:[xmlItem copy]];`调用 to ，因为s 保留添加到它们的每个对象。调用还会增加保留计数，这是另一个泄漏。相反，你应该有`copy``NSArray``copy``[self.listArray addObject:xmlItem];`

* * *

您得到 EXC_BAD_ACCESS 因为在 中`NSLog(@"Amount %@",[theParser.listArray count]);`，您使用的是`%@`格式说明符，它是用于`NSString`s 的。你想打印数组的计数，一个整数，所以你应该使用`%d`or `%i`。

# dns - 带有 API 的分布式 DNS 系统

> ID：10037567
> 
> 赞同：1
> 
> 时间：2012-04-05T23:49:05.570
> 
> 标签：dns, distributed

当客户注册我的服务时，我想为他们创建一个**A** DNS 条目：

**用户名**。*mydomain.tld*指向托管其页面的服务器的 IPv4 地址

理想情况下，此 DNS 系统将：

*   相当轻巧
*   分布。主/从模型会很好，可能具有主故障转移或在主脱机时变为只读。
*   支持通过一个不错的 API 进行更改（主要是创建/删除 A 条目）
*   立即应用更改（了解 DNS 需要时间来传播）
*   在 Linux 上运行

有什么很棒的东西适合这个描述吗？

谢谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T01:13:34.843

您可以只使用动态 DNS 更新。这是一个非常基本的应用程序：

1.  生成将由 DNS 服务器和更新客户端使用的共享对称密钥：

    ```
    dnssec-keygen -a HMAC-MD5 -b 512 -n HOST key.name. 
    ```

    密钥名称是一个域名，但您可以使用任何您想要的名称：它或多或少只是密钥的名称。

2.  配置绑定以允许此密钥对区域*mydomain.tld*进行更改：

    ```
    key "key.name." {
        algorithm hmac-md5;
        secret "copy-the-base64-string-from-the-key-generated-above==" ;
    }

    zone "mydomain.tld" {
        ...
        allow-update { key key.name. ; };
        ...
    } 
    ```

3.  使用 nsupdate 进行更改：

    ```
    nsupdate -k <pathname-to-file-generated-by-dnssec-keygen> 
    ```

    作为`nsupdate`命令的输入：

    ```
    server dns.master.server.name
    update delete username.mydomain.com
    update add username.mydomain.com a 1.2.3.4
    update add username.mydomain.com aaaa 2002:1234:5678::1 
    ```

    不要忘记`update`命令后的空行。`nsupdate`在看到空行之前不会向服务器发送任何内容。

与 bind 和其他 DNS 服务器一样，主服务器没有高可用性，但是您可以拥有任意数量的从属服务器，如果它们获得增量更新（默认情况下应该如此），那么更改将很快传播. 你也可以选择使用一个隐蔽的主服务器，它的唯一工作就是接收和处理这些 DDNS 更新并将结果提供给从属服务器。

# iphone - iOS - UITableView 非静态背景图片

> ID：10037568
> 
> 赞同：1
> 
> 时间：2012-04-05T23:49:12.867
> 
> 标签：iphone, ios, uitableview

我已经阅读了很多将背景图像添加到 UITableView 的解决方案，其中图像将是静态的，并且单元格将在其上方滚动。但是，我还没有找到一种解决方案来设置将随表格滚动的图像。当我执行以下代码时，背景图像的部分将被传播到每个单元格的背景图像中。

```
self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"paper.png"]]; 
```

有人可以告诉我是否有办法在 iOS 5 中做我想做的事？干杯布赖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T23:52:02.590

您必须继承 UIView 并实现自定义 drawRect: 方法，并使用 UIImage 绘图方法（甚至 Core Graphics 方法）将图像平铺在那里。

# mongodb - MongoDB java驱动下Mapreduce命令作用域；将函数添加到 Scope

> ID：10037569
> 
> 赞同：5
> 
> 时间：2012-04-05T23:49:15.110
> 
> 标签：mongodb, mapreduce

他们是一种通过 java 驱动程序执行 MongoDB map reduce 作业的方法，您可以在其中创建包含函数的范围 DBObject。

我可以在 javascript 中执行我的 map reduce 配置，其中传入的范围包含实用程序函数，但我不知道如何使用 java 驱动程序执行此操作。

我使用 mapReduceCommand 设置范围

`c.addExtraOption("scope",new BasicDBObject().append('average',function(){ return false;}));`

但是，我无法让映射器/缩减器将范围组件“例如”平均值识别为一个函数。如果我使用引号，map reduce 上下文认为它是一个字符串，但如果不是，我似乎无法解析范围组件。

如何通过java驱动获取scope组件中的一个函数？

> 感谢Ren的回答，这是一个spring bean配置，用于为具有函数的mongodb java驱动程序设置范围。

```
 <util:map id="mrScope" 
              key-type="java.lang.String" 
              value-type="java.lang.Object">
    <entry key="buckets"><bean class="com.mongodb.util.JSON" factory-method="parse"><constructor-arg value="[0,10,15,20,25,30,35,40,45,50,55,60,65]"/></bean></entry>
    <entry key="average">
        <bean class="org.bson.types.CodeWScope">
            <constructor-arg value="function () {var s = 0;for (var i = 0; i &gt; arguments.length; i++) s += arguments[i];return s / arguments.length;}"/>
            <constructor-arg><bean class="org.bson.BasicBSONObject"/></constructor-arg>
        </bean>
    </entry> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T15:52:31.247

服务器代码会自动将 map 和 reduce 转换为 Javascript 函数，但范围不是这样。要在范围选项中传递函数，您可以这样做：

```
c.addExtraOption("scope", new BasicBSONObject("average",
  new CodeWScope("function(){ return false;}", new BasicBSONObject()))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-17T13:12:49.780

对于那些难以使用 MongoTemplate 在范围内应用函数的人，下面的示例似乎有效：

```
 Map<String, Object> scopeVariables = new HashMap<>();
    String scopeFunction="function(){ //do something }";
    scopeVariables.put("transform", new CodeWScope(scopeFunction,new BasicBSONObject()));

    MapReduceOptions options = new MapReduceOptions();
    options.scopeVariables(scopeVariables);
    options.outputTypeInline();

    MapReduceResults<ValueObject> result = template.mapReduce("collection", mapFunction, reduceFunction, options, ValueObject.class); 
```

运行上述代码后，transform() 函数将在 map 函数中可见：

```
var mapFunction=function(){  
  transform(); 
  emit(key,value); 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-23T13:07:12.340

使用新的 api (3.0).. 我发现下面的选项正在工作

`collection .mapReduce(map, reduce) .scope(new Document("key", value)) .limit(100);`

# sql - 使用 SQL Server Rank 函数对行进行排名而不跳过排名号

> ID：10037570
> 
> 赞同：8
> 
> 时间：2012-04-05T23:49:18.607
> 
> 标签：sql, sql-server, rank

我想对表中的行进行排名而不跳过排名中的数字。请看下面的例子。

```
CREATE TABLE #test(
apples int NOT NULL,
) ON [PRIMARY]
GO

insert into #test( apples ) values ( 10 )
insert into #test( apples ) values ( 10 )
insert into #test( apples ) values ( 20 )
insert into #test( apples ) values ( 30 )

select *, RANK() over (order by apples) as theRank from #test

drop table #test
go 
```

结果是

```
apples   theRank
10       1
10       1
20       3
30       4 
```

我怎样才能让排名不跳过数字 2，这样结果看起来像

```
apples   theRank
10       1
10       1
20       2<--
30       3<-- 
```

我不必使用 Rank 函数，只要我得到所需的排序即可。

谢谢！！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-05T23:53:23.497

尝试使用[DENSE_RANK](http://msdn.microsoft.com/en-us/library/ms173825%28v=sql.105%29.aspx)而不是 RANK

```
select *, DENSE_RANK() over (order by apples) as theRank from #test 
```

# c - 无法弄清楚此分段错误的原因

> ID：10037574
> 
> 赞同：1
> 
> 时间：2012-04-05T23:50:18.730
> 
> 标签：c, pointers, linked-list, segmentation-fault, structure

我被卡住了，无法弄清楚为什么会出现分段错误。当我将第一个添加添加到播放列表时，一切都很好。然后，当我打印播放列表然后尝试向播放列表添加更多内容时，我会遇到分段错误。gdb 在这里报告错误`if( (curr_playlist -> album) == NULL && (curr_playlist -> track_num) == NULL){`。谁能帮我找到问题？打印功能是否在修改链接列表？

```
struct playlist_ {
  int album;
  int track_num;
  struct playlist_ *next;
};
typedef struct playlist_  playlists;

struct users_ {
  int user_ID;
  struct playlist_ *playlist;
  struct users_ *next;
};
typedef struct users_ users;

/*This is how I created the user list*/

fscanf(transaction_file,"%d\n",&account_number);

      /*Checks for empty list, if true creates the first user*/
      if( head_users == NULL){
        p_users = malloc(sizeof(users ));
        p_users -> user_ID = account_number;
        head_users = p_users;
        curr_users = p_users;
        head_users -> next = NULL;
        users_pointer = head_users;

      /*If list is not empty create new user and puts it in front of list*/
      }else{
        p_users = malloc(sizeof(users));
        p_users -> user_ID = account_number;
        curr_users = p_users;
        curr_users -> next = head_users;
        head_users = curr_users;
        users_pointer = head_users;
      }

      /*Create an empty playlist for user and set everything to null, empty playlist*/
        p_playlists = malloc(sizeof(playlists));
        curr_playlists = p_playlists;
        curr_playlists -> album = FALSE;
        curr_playlists -> track_num = FALSE;
        curr_playlists -> next = NULL;
        curr_users -> playlist = p_playlists;

int add_playlist(users *user_pointer,album *all_albums,int user_ID,int album_ID,int track_num){

  playlists *head_playlist,*tail_playlist,*curr_playlist,*p_playlist;
  users *curr_users;

  curr_users = user_pointer;
  while(curr_users){

    /* Find this user in link list */
    if(curr_users -> user_ID == user_ID){
      curr_playlist = curr_users -> playlist;

      /* Check if playlist is empty for this user if so, update the empty list*/
      if( (curr_playlist -> album) == NULL && (curr_playlist -> track_num) == NULL){
        tail_playlist = curr_users -> playlist;
        curr_playlist -> album = album_ID;
        curr_playlist -> track_num = track_num;
        curr_playlist -> next = NULL;

      }else{

        /*Creates a new playlist node with the request album and track number*/
        p_playlist = (playlists *)malloc(sizeof(playlists ));
        p_playlist -> album = album_ID;
        p_playlist -> track_num = track_num;
        p_playlist -> next = NULL;

        /*Traverse Playlist, find the tail node*/
        curr_playlist = curr_users -> playlist;
        while(curr_playlist ){
          tail_playlist = curr_playlist;
          curr_playlist = curr_playlist -> next;
        }

        /* Adds the new playlist at the end */
          tail_playlist -> next = p_playlist;
      }

    }
    curr_users = curr_users -> next;
  }
  /*Updates the playlist hits for each new playlist node*/
  *all_albums[album_ID].playlist_hits[track_num] = *all_albums[album_ID].playlist_hits[track_num] + 1;
}

int print_account(album *all_albums,int account_number,users *user_pointer){
  users *curr_users;
  playlists *curr_playlist;

  int i;
  curr_users = user_pointer;

  /*Check playlist for each user if NULL, playlist is empty*/
  while (curr_users){
    if(curr_users -> user_ID == account_number){

      printf("ACCOUNT %d\n",curr_users->user_ID);
      if(curr_users -> playlist -> album == -100 && curr_users -> playlist -> track_num == -100){
        printf("  EMPTY Playlist\n");

      }else{
        /*Goes through the user playlist and prints out the information*/
        for(curr_playlist = curr_users -> playlist; curr_playlist; curr_playlist = curr_playlist -> next){
          printf("  ALBUM %d:  %s\n",curr_users -> playlist -> album,
                 all_albums[curr_users -> playlist -> album].tracks[curr_users -> playlist -> track_num]);
          curr_users -> playlist = curr_users -> playlist -> next;
        }
      }
    }
      curr_users = curr_users -> next;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T00:00:55.147

问题的一部分似乎可能是假设`curr_users -> playlist`已经用指向“空”播放列表的指针进行了初始化。如果为NULL或者有一个未初始化的值，那么`album`在后面的语句中检查时会导致segmentation fault。该代码没有显示最初如何创建用户列表，所以我推测了一下。

如果用户列表最初不是使用“空”播放列表条目创建的，`playlist`则应将成员初始化为 NULL，并且此语句：

```
 if ( (curr_playlist -> album) == NULL && (curr_playlist -> track_num) == NULL ) 
```

应该可能是：

```
if ( curr_playlist == NULL ) 
```

然后它应该分配（通过`malloc`）一个类似于 else 部分的新播放列表。（当然，还有`if`块和`else`块都在分配和初始化播放列表结构的模块化问题）。

# java - 如何返回私有内部类对象java的对象

> ID：10037575
> 
> 赞同：1
> 
> 时间：2012-04-05T23:50:23.367
> 
> 标签：java, inner-classes

如何返回私有内部类的对象

```
public class MainClass{
   public InnerClass getObj(){
       return this.new InnerClass()
   }
   private class InnerClass{
       InnerClass(){
       }
   }
}
-------------
MainClass mc = new MainClass();
mc.getObj(); // assume I am not holding it anywhere. 
```

当我检查`try-catch`块时，上面的代码给出了一个空指针异常。此外，在调试模式下尝试时，它会说“ `ClassNotFoundException`”

但我可以看到生成为 MainClass$InnerClass.class 的类文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T00:02:26.557

嗯，我没有同样的问题。这是我修改后的代码版本：

```
class MainClass {
    public static void main( String[] args ) {
        MainClass mc = new MainClass();
        InnerClass ic = mc.getObj();
        System.out.println( ic );
    }

    public InnerClass getObj() {
        return this.new InnerClass();
    }

    private class InnerClass {
        InnerClass() {}
    }
} 
```

这段代码的结果是：

```
MainClass$InnerClass@64c3c749 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T00:06:11.490

正如其他人已经指出的那样，您需要做的就是修复方法的返回类型。

但是，您应该知道您会收到警告，因为您在公共方法中导出非公共类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T00:08:32.520

由于您`getObj()`是公开的，因此您应该保持内部类私有并返回 an `Object`，或者将其公开并返回 an `InnerClass`，具体取决于您的需要。

以下代码在示例中返回一个对象：

```
public class MainClass {
        private class InnerClass {
                InnerClass() { System.out.println("InnerClass"); }
        }

        public Object getObj(){
                return new InnerClass();
        }

        public static void main (String[] argc) {
                MainClass a = new MainClass();
                System.out.println(a.getObj());
        }
} 
```

它打印出来：

```
bash-4.2$ java MainClass
InnerClass
MainClass$InnerClass@53c059f6 
```

如您所见，构造函数没有问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T00:01:30.663

您只是忘记了 getObj 方法的返回类型。

```
 public InnerClass getObj(){return new InnerClass();} 
```

# php - while循环返回数据

> ID：10037576
> 
> 赞同：0
> 
> 时间：2012-04-05T23:50:24.923
> 
> 标签：php, loops

在下面的代码中，我将从我的数据库中提取所有即将到来的培训课程。我正在检查是否`endDate`已通过，我也在检查是否`status !='2'`

我希望它返回 4 个最近的结果。`status`在dos = 2之前它工作正常。我知道循环在技术上运行了 4 次，但只显示结果`status !='2'`

我怎样才能改变这个，如果`status = '2'`循环将继续，直到找到 4 个符合条件的结果？

```
<?php
$today = date("Y-m-d");
$count = 0;
$sth = $dbh->query('SELECT * from training ORDER BY startDate ASC');  
        $sth->setFetchMode(PDO::FETCH_ASSOC); 
            while($count <= 4 && $row = $sth->fetch()) { 
                if($row['endDate'] > $today && $row['status'] != '2') {?>
                    <li>
                    <img class="post_thumb" src="/images/img.jpg" alt="" />
                    <div class="post_description">
                        <small class="details">
                            <?php echo date("m/d/Y", strtotime($row['startDate'])) . ' - ' . date("m/d/Y", strtotime($row['endDate'])) ?>
                        </small>
                        <a class="post_caption" href="/register.php?course_id=<?php echo $row['courseId'] . '&id=' . $row['id'] ?>"><?php echo $row['title'] ?></a>
                    </div>
                    </li>
                <?php }
                    $count++;
                    }
                ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T23:57:16.993

你必须把循环放在`$count++`里面`if`，否则它总是会增加。如：

```
<?php
$today = date("Y-m-d");
$count = 0;
$sth = $dbh->query('SELECT * from training ORDER BY startDate ASC');  
        $sth->setFetchMode(PDO::FETCH_ASSOC); 
            while($count <= 4 && $row = $sth->fetch()) { 
                if($row['endDate'] > $today && $row['status'] != '2') {?>
                    <li>
                    <img class="post_thumb" src="/images/img.jpg" alt="" />
                    <div class="post_description">
                        <small class="details">
                            <?php echo date("m/d/Y", strtotime($row['startDate'])) . ' - ' . date("m/d/Y", strtotime($row['endDate'])) ?>
                        </small>
                        <a class="post_caption" href="/register.php?course_id=<?php echo $row['courseId'] . '&id=' . $row['id'] ?>"><?php echo $row['title'] ?></a>
                    </div>
                    </li>
                <?php 
                $count++;
                }
            }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T23:59:53.467

你可以跳出循环，如果它的四个

```
while($row = $sth->fetch()) { 
        ....
        if($row['status']=='2' && $count >="4") break;
        $count++;
} 
```

# makefile - 如何编写目标文件和源文件具有相同扩展名的 Makefile？

> ID：10037581
> 
> 赞同：1
> 
> 时间：2012-04-05T23:50:41.490
> 
> 标签：makefile

我有一些每小时获取的数据文件。它们的文件名如下所示：

```
20120101-00.raw
20120101-01.raw
...
YYYYMMDD-HH.raw 
```

我必须将每小时文件聚合到每天、每天到每月等。聚合脚本的语法如下：

```
aggregate output-file input-file1 input-file2 ... 
```

聚合的模式是：

```
20120101-[0-2][0-9].raw -> 20120101.raw
201201[0-3][0-9].raw -> 201201.raw
etc. 
```

我正在尝试编写 Makefile 来自动化流程，但我完全陷入困境 - 我不知道如何处理扩展问题 - 源文件和目标文件具有相同的扩展名。我用：

```
$(shell find . -type f | grep -e "\.raw1$$" | cut -c 8 | sort -u ) 
```

查找我必须生成的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T00:44:17.217

如果我为此编写了一个脚本，它将读取 .raw 文件名列表，对列表进行排序，通过删除最后两位数字为每个文件名创建一个缩短的名称，如果这个缩短的名称与以前的缩短的名称相同，添加要聚合的列表的完整文件名，如果缩短的名称与之前的缩短的名称不同，则根据添加到列表中的最后一个条目创建输出文件名，如果输出文件已经存在并且比添加的最后一个条目更新到列表什么都不做，因为它已经是最新的，否则使用输出文件名和输入文件列表运行聚合命令。

要使用该脚本，首先使用所有每小时文件运行它，然后使用所有每日文件再次运行它，（如果需要，它可以使用所有每月文件再次运行以生成年度文件。）

概述的脚本有一些限制：

1.  一次只能提供一种文件类型的列表（例如，每小时、每天）
2.  要聚合的每个组中的所有文件都需要位于同一目录中，或者初始排序只需要使用文件名的基本名称（而不是目录）部分作为排序键。
3.  如果这些是可能在脚本运行时更新的日志文件，则可能会丢失聚合命令运行时记录的数据。这是因为输出文件上的时间戳（用于确定相对于输入文件是否是最新的）是聚合完成的时间，而不是它开始的时间。一种解决方法是在开始聚合之前触摸时间戳文件（基于输出文件名），并使用时间戳文件而不是输出文件来确定输出文件是否是最新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:21:58.090

我同意 Oli Charlesworth 的观点，即 Make 不是这项工作的最佳工具——我会使用 Perl 脚本。但是如果你想使用Make，它是可以做到的。这是使用对`sed`. 它可以收紧一点，但我会追求可读性。

```
FILES := $(shell ls *-??.raw)

DAYS :=   $(sort $(shell ls *-??.raw | sed 's/\(........\).*/\1.raw/'))
MONTHS := $(sort $(shell ls *-??.raw | sed 's/\(......\).*/\1.raw/'))
YEARS :=  $(sort $(shell ls *-??.raw | sed 's/\(....\).*/\1.raw/'))

all.raw: $(YEARS)
    aggregate $@ $^

$(YEARS): %.raw : $(MONTHS)
    aggregate $@ $(filter $*%, $^)

$(MONTHS): %.raw : $(DAYS)
    aggregate $@ $(filter $*%, $^)

$(DAYS): %.raw :
    aggregate $@ $(filter $*%, $(FILES)) 
```

# ruby - Ruby OptionParser empty switch "-" behavior

> ID：10037585
> 
> 赞同：0
> 
> 时间：2012-04-05T23:51:07.513
> 
> 标签：ruby, optionparser

EDITED:

I've wrote code that uses OptionParser to handle command line input gracefully. I am facing two major hits.

1.  Passing an empty switches '-' doesn't give an error. Of course some programs take that as valid, but mine shouldn't.
2.  The program requires two mandatory switches, but it accepts one switch without complaining! e.g. `program.ruby -f foo -b bar` is the valid input and both switches are :REQUIRED. But providing only one switch passes without problem and this is not the desired behavior.

For the first case I've done this:

```
opts.on('-', /\A-\Z/) do
  $stderr.print "Invalid empty switch"
  exit 1
end 
```

It works fine. But is this the proper way of doing it?

For the second case, I've looked around for a solution within the OptionParser.new block but I couldn't find one. e.g.

```
unless options.foo && options.bar
  puts "Error."
  exit 2
end 
```

Doing it outside the OptionParser.new block is the normal way?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:23:22.247

If you are using OptionParser, then yes, you need to explicitly disallow the empty switch and manually check the required parameters.

However, if you used another tool for option parsing, such as [defunkt's gem choice](https://github.com/defunkt/choice), you could mark options as required and the invalid options (such as the empty switch) would cause the help to be printed and application to exit. I understand that in some cases it makes more sense to use OptionParser, but personally I prefer to use [the more convenient tools out there](https://www.ruby-toolbox.com/categories/CLI_Option_Parsers).

Even though making options required is pretty easy one way or the other, I would recommend that you think your API decision through. How many command line utilities do you know, that have required options? There's a reason why command line is usually separated into options and arguments, with the former being usually optional and the latter usually required. I would stick to that established convention.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T04:29:52.910

I think Thor(https://github.com/wycats/thor) can resolve your problem more efficiently.

# javascript - 街景和谷歌地图

> ID：10037588
> 
> 赞同：1
> 
> 时间：2012-04-05T23:51:28.927
> 
> 标签：javascript, maps

我试图解决一个问题。我有一张定位停车的地图，想放街景。我有一个地方，但“位置”的数组不能完全工作。地图只显示街景中的最后一个数组（ps：必须点击图标才能显示街景）

[http://www.clicrbs.com.br/sites/swf/paulMapa/mapspaul.html](http://www.clicrbs.com.br/sites/swf/paulMapa/mapspaul.html)

```
 function initialize() {
    var pinkParksStyles = [
        {
          featureType: "all",
          stylers: [
            { saturation: -80 }
          ]
        },
        {
          featureType: "poi.park",
          stylers: [
            { hue: "#ff0023" },
            { saturation: 40 }
          ]
        }
      ];

    var pinkMapType = new google.maps.StyledMapType(pinkParksStyles,
        {name: "Paul em Floripa"});
    var mapOptions = {
        zoom: 15,
        center: new google.maps.LatLng(-27.619279,-48.527896),
        mapTypeControlOptions: {
          mapTypeIds: [google.maps.MapTypeId.ROADMAP,'pink_parks','satellite' ],
          streetViewControl: true
        }
      };

    var map = new google.maps.Map(document.getElementById('map_canvas'),  mapOptions);
    var marker = new google.maps.Marker();
    var infowindow = new google.maps.InfoWindow();
    var kmlLayer = new google.maps.KmlLayer('http://www.clicrbs.com.br/sites/swf/paulMapa/trajetoComum.kml');

    var locations = [
                       ['Estacionamento 1', -27.626216,-48.526806, 1],
                       ['Estacionamento 2', -27.622654,-48.528102, 2],
                       ['Estacionamento 3', -27.618236,-48.528598, 3],
                       ['Estacionamento 4', -27.615011,-48.529491, 4],
                       ['Estacionamento 5', -27.613015,-48.532554, 5],
                       ['Estacionamento 6', -27.612033,-48.534453, 6],
                       ['Estacionamento 7', -27.611326,-48.530995, 7],
                       ['Estacionamento 8', -27.613811,-48.527514, 8],
                       ];
    var pano = null;

    var marker, i;
      for (i = 0; i < locations.length; i++) {  
        marker = new google.maps.Marker({
          icon: 'images/stopcar.png',
          position: new google.maps.LatLng(locations[i][1], locations[i][2]),
          map: map

        });

        google.maps.event.addListener(marker, 'click', (function(marker, i ) {
          return function() {
            infowindow.setContent(locations[i][0]);
            infowindow.open(map, marker);
          }
       })(marker, i))

        google.maps.event.addListener(infowindow, 'domready', function() {
            if (pano != null) {
            pano.unbind("position");
            pano.setVisible(false);
            }
        pano = new google.maps.StreetViewPanorama(document.getElementById("content"), {
            navigationControl: true,
            enableCloseButton: true,
            addressControl: true,
            linksControl: false,
            });

        pano.bindTo("position", marker);
        pano.setVisible(true);
        });

        google.maps.event.addListener(infowindow, 'closeclick', function() {
            pano.unbind("position");
            pano.setVisible(true);
            pano = null;
        });

    }

kmlLayer.setMap(map);
map.mapTypes.set('pink_parks', pinkMapType);
map.setMapTypeId('pink_parks');
map.setStreetView(pano);

} 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:38:54.053

我决定

```
function initialize() {
    var pinkParksStyles = [
                           {
                             featureType: "all",
                             stylers: [
                               { saturation: -80 }
                             ]
                           },
                           {
                             featureType: "poi.park",
                             stylers: [
                               { hue: "#ff0023" },
                               { saturation: 40 }
                             ]
                           }
                         ];

    // Create the map 
    // No need to specify zoom and center as we fit the map further down.
    var pinkMapType = new google.maps.StyledMapType(pinkParksStyles,
            {name: "Paul em Floripa"});
        var mapOptions = {
            zoom: 15,
            center: new google.maps.LatLng(-27.619279,-48.527896),
            mapTypeControlOptions: {
              mapTypeIds: [google.maps.MapTypeId.ROADMAP,'pink_parks','satellite' ],
              streetViewControl: true
            }
          };

        var map = new google.maps.Map(document.getElementById('map_canvas'),  mapOptions);
        var kmlLayer = new google.maps.KmlLayer('http://www.clicrbs.com.br/sites/swf/paulMapa/trajetoComum.kml');

    // Define the list of markers.
    // This could be generated server-side with a script creating the array.
    var markers = [
       { lat:-27.626216, lng:-48.526806, name:"Estacionamento 1"},
       { lat:-27.622654, lng:-48.528102, name:"Estacionamento 2"},
       { lat:-27.618236, lng:-48.528598, name:"Estacionamento 3"},
       { lat:-27.615011, lng:-48.529491, name:"Estacionamento 4"},
       { lat:-27.613015, lng:-48.532554, name:"Estacionamento 5"},
       { lat:-27.612033, lng:-48.534453, name:"Estacionamento 6"},
       { lat:-27.611326, lng:-48.530995, name:"Estacionamento 7"},
       { lat:-27.613811, lng:-48.527514, name:"Estacionamento 8"},
       ];

    // Create the markers ad infowindows.
    for (index in markers) addMarker(markers[index]);
    function addMarker(data) {
      // Create the marker
      var marker = new google.maps.Marker({
        position: new google.maps.LatLng(data.lat, data.lng),
        icon: 'images/stopcar.png',
        map: map,
      });

      // Create the infowindow with two DIV placeholders
      // One for a text string, the other for the StreetView panorama.
      var content = document.createElement("DIV");
      var title = document.createElement("DIV");
      title.innerHTML = data.name;
      content.appendChild(title);
      var streetview = document.createElement("DIV");
      streetview.style.width = "400px";
      streetview.style.height = "400px";
      content.appendChild(streetview);
      var infowindow = new google.maps.InfoWindow({
        content: content
      });

      // Open the infowindow on marker click
      google.maps.event.addListener(marker, "click", function() {
        infowindow.open(map, marker);
      });

      // Handle the DOM ready event to create the StreetView panorama
      // as it can only be created once the DIV inside the infowindow is loaded in the DOM.
      google.maps.event.addListenerOnce(infowindow, "domready", function() {
        var panorama = new google.maps.StreetViewPanorama(streetview, {
            navigationControl: true,
            enableCloseButton: true,
            addressControl: true,
            linksControl: false,
            visible: true,
            position: marker.getPosition()
        });
      });
    }

    // Zoom and center the map to fit the markers
    // This logic could be conbined with the marker creation.
    // Just keeping it separate for code clarity.
    var bounds = new google.maps.LatLngBounds();
    for (index in markers) {
      var data = markers[index];
      bounds.extend(new google.maps.LatLng(data.lat, data.lng));
    }
    map.fitBounds(bounds);
    map.mapTypes.set('pink_parks', pinkMapType);
    map.setMapTypeId('pink_parks');
    kmlLayer.setMap(map);
  } 
```

# android - Android - 没有 SD 卡时强制关闭

> ID：10037589
> 
> 赞同：0
> 
> 时间：2012-04-05T23:51:35.367
> 
> 标签：android, nullpointerexception, sd-card, instrumentation

所以我有一个应用程序，它将文件存储在我创建的目录中，当用户到达某个地理位置的一定距离内时。一切正常，除了某些通常使用 sd 卡的设备将其删除，然后当用户登录时应用程序崩溃。我尝试了 droid x，我能够复制崩溃。当我有 sd 卡时它工作正常，但是当 sd 卡被移除时，我得到一个空指针异常并强制关闭。

以下是市场上的日志转储：

```
java.lang.RuntimeException: Unable to resume activity       {graffit.cores/graffit.cores.GraffView}: java.lang.NullPointerException
at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2208)
at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2228)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1721)
at android.app.ActivityThread.access$1500(ActivityThread.java:124)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:968)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3806)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at graffit.cores.GraffView.onResume(GraffView.java:1201)
at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1150)
at android.app.Activity.performResume(Activity.java:3882)
at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2191)
... 12 more
java.lang.NullPointerException
at graffit.cores.GraffView.onResume(GraffView.java:1201)
at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1150)
at android.app.Activity.performResume(Activity.java:3882)
at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2191)
at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2228)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1721)
at android.app.ActivityThread.access$1500(ActivityThread.java:124)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:968)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3806)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method) 
```

由于日志转储说明了有关检测失败的信息，我猜我应该抓住它或寻找是否有可用的 SD 卡。

我确定我可以找到如何查找 sd 卡，但我怎样才能赶上这次崩溃并使用内部存储来代替丢失的 sd 卡。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T23:55:21.720

在对外部存储进行任何操作之前，您应该始终调用 getExternalStorageState() 来检查媒体是否可用。媒体可能并不总是可用，例如您的情况。Android Docs 给出了一个关于如何处理这个的例子：http: [//developer.android.com/guide/topics/data/data-storage.html#filesExternal](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)

最好的办法可能是在一个函数中执行此检查，该函数返回一个关于您是否可以访问外部存储的布尔值，然后在每次需要从卡中获取数据时检查它。

```
if (sdCardAvalableForRead())
{
   // get file.
}
else
{
   // show warning or message to user.
} 
```

# javascript - 'alt' 跨度内

> ID：10037590
> 
> 赞同：0
> 
> 时间：2012-04-05T23:51:42.670
> 
> 标签：javascript, html, alt

如果“alt”在“span”内，我需要更改以下脚本

```
 function setNavi( $c, $i ) {
                var title = $i.attr( 'alt' );
                $('#title').text( title );

                var current = $c.triggerHandler( 'currentPosition' );
                $('#pagenumber span').text( current+1 );

            }

    $(function() {

        $('#carousel').carouFredSel({
            debug: true,
            responsive: true,
            circular: false,
            auto: true,
            prev: '#prev',
            next: '#next',
            items: {
                visible: 1,
                width: 200,
                height: '66%'
            },
            scroll: {
                onBefore: function( $oI, $nI ) {
                    setNavi( $(this), $nI );
                }
            },
                onCreate: function( $vI ) {
                    setNavi( $(this), $vI );
                }
            }); 
```

html:

```
<div id="carousel">
<span id="1"><img src="images/someimage.jpg"  alt="sometitle" /></span>
<span id="2"><img src="images/someimage2.jpg" alt="sometitle2" /></span>
</div>

<div id="navi">
 <p id="pagenumber">Now showing image <span></span> of 7.</p>
 <p id="title"></p>
</div> 
```

页码显示正确，但图像标题显示不正确。也尝试使用'title'而不是'alt'，但它仍然导致空白标题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T23:53:21.513

是的，你会的。`alt`用于图像。从代码来看，我会说该`title`属性是一个合适的替代方案，它甚至会显示与图像相同的工具提示`alt`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T23:56:44.230

你不需要这样做，它的语义**不正确**。有`title`跨度字段。使用它而不是`alt`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T23:56:59.640

如果`$i`对象不包含`alt`属性，则不能将其指定为另一个元素的文本。元素是否在另一个元素中并不重要，这取决于您通过函数传递的**参数。**正如 Sime 所说，这取决于是什么`$i`。

# objective-c - 在 iOS 4.2.1 上未在此范围内声明 strnlen

> ID：10037595
> 
> 赞同：0
> 
> 时间：2012-04-05T23:52:03.367
> 
> 标签：objective-c, ios, xcode, string

我有在 .mm 文件中使用 strnlen 的代码

使用 Xcode 4.2 时的编译器可以很好地构建。Xcode 3.2.5 但是找不到 strnlen()...

我已经尝试过为 strlen 发布的解决方案

```
#include <cstring> // doesn't work
using std::strlen; // doesn't work

#include <string> // doesn't work 
```

有没有办法在 iOS 4.2.1 上使用 strnlen？

现在我只是转换为 NSString 对象并使用长度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T00:33:06.930

使用标准 C 函数 strlen 有什么问题吗？我查了一下 strnlen ，它似乎是一个 GNU 扩展。

# ruby - 简单的 Ruby 程序...需要帮助

> ID：10037600
> 
> 赞同：1
> 
> 时间：2012-04-05T23:52:55.743
> 
> 标签：ruby

只是想在这里写一个简单的 Ruby 程序。我试图让程序询问用户最喜欢的号码，然后建议一个更大的新的最喜欢的号码。下面的代码有什么问题？

```
puts "hey, whats your favorite number?" 

favnumber = gets.chomp 

newfavnumber = favnumber.to_i + 1 

puts "how about " + newfavnumber "?" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T00:06:58.783

```
puts "how about " + newfavnumber "?" 
```

首先，你可能想要一个`+`之前的`"?"`。现在这样写，它解析为`puts("how about " + newfavnumber("?"))`，即你正在调用一个名为 的函数`newfavnumber`，这显然不是你想要的。

但是，如果您将其更改为`puts "how about " + newfavnumber + "?"`您可能想要的，它仍然无法工作：`newfavnumber`是一个数字并且`"how about "`是一个字符串。在 ruby​​ 中，您不能将数字添加到字符串中。要解决此问题，您可以调用`to_s`将`newfavnumber`其转换为字符串。

编写此代码的更好方法是使用字符串插值：`puts "how about #{newfavnumber}?"`. 这样你就不需要打电话了`to_s`，因为你可以在里面使用任何类型`#{}`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T23:54:53.727

您缺少一个`+`after`newfavnumber`和一个转换为字符串。

```
puts "how about " + newfavnumber.to_s + "?" 
```

# extjs4 - 在 ExtJS 网格中，如何访问属于排序集的数据存储字段

> ID：10037603
> 
> 赞同：2
> 
> 时间：2012-04-05T23:53:19.680
> 
> 标签：extjs4

如何访问属于排序集的列/数据存储字段。

我正在寻找修改网格的排序参数以进行远程排序。我需要远程排序参数的排序键来匹配列的字段的映射属性。尽管正常的“列标题单击对数据进行排序”功能，但我需要这些事情发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:47:14.660

**远程排序和字段映射 (ExtJS 4.1)**

这个功能似乎没有在 ExtJS 中实现。这是使用自 ExtJS 4 以来提供的[encodeSorters](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.proxy.Server-method-encodeSorters)函数的解决方案。通过模型的原型访问字段映射有点脏，但它可以完成工作：

```
var store = Ext.create('Ext.data.Store', {
    ...,
    proxy: {
        ...,
        encodeSorters: function (sorters) {
            var model = store.proxy.model,
                map = model.prototype.fields.map;
            return Ext.encode(Ext.Array.map(sorters, function (sorter) {
                return {
                    property : map[sorter.property].mapping || sorter.property,
                    direction: sorter.direction
                };
            }));
        }
    }
}); 
```

[但是，覆盖原始方法](http://docs.sencha.com/ext-js/4-0/source/Server.html#Ext-data-proxy-Server-method-encodeSorters)会更相关：

```
Ext.data.proxy.Server.override({
    encodeSorters: function(sorters) {
        var min, map = this.model.prototype.fields.map;
        min = Ext.Array.map(sorters, function (sorter) {
            return {
                property : map[sorter.property].mapping || sorter.property,
                direction: sorter.direction
            };
        });
        return this.applyEncoding(min);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T15:57:35.810

假设您使用的是 simpleSortMode，您可以在商店中执行类似的操作。

```
listeners: {
        beforeload: function( store, operation, eOpts ) {
            if (store.sorters.length > 0) {

                var sorter = store.sorters.getAt(0),
                dir = sorter.direction,
                prop = sorter.property,
                fields = store.model.getFields(),
                i,
                applyProp = prop;

                for (i = 0; i < fields.length; i++) {
                    if (fields[i].name == prop) {
                        applyProp = fields[i].mapping || prop;
                        break;
                    }
                } 

                //clearing the sorters since the simpleSortMode is true so there will be only one sorter
                store.sorters.clear();
                store.sorters.insert(0, applyProp, new Ext.util.Sorter({
                     property : applyProp,
                     direction: dir
                 }));
            }

        }

    }, 
```

# iphone - 自定义表格单元格加载数据目标 C iOS -

> ID：10037604
> 
> 赞同：0
> 
> 时间：2012-04-05T23:53:21.437
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uitableview

目前我有以下方法，但它不太管用......

```
 - (UITableViewCell *)tableView:(UITableView *)tableView 
         cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *MyIdentifier = @"cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];
    if (cell == nil) {
        [[NSBundle mainBundle] loadNibNamed:@"TVCell" owner:self options:nil];
        cell = tvCell;
        self.tvCell = nil;
    }

    UILabel *label;
    label = (UILabel *)[cell viewWithTag:5];
    label.text = [NSString stringWithFormat:@"Hole #%d", indexPath.row];

    return cell;
} 
```

表格视图创建时没有错误，但每个单独的单元格都不包含任何内容，但显然 TVCell.xib 有一个标签为 5 的标签。我唯一的问题是这个。我不太明白苹果在这里给出的这些步骤......

1.  在 nib 文档窗口中选择 File's Owner，打开检查器的 Identity 窗格，并将 File's Owner 的类设置为您的自定义视图控制器类。

2.  将 File's Owner 的单元出口（现在是您的自定义子类的占位符实例）连接到 nib 文件文档中的 table-view 单元对象。

这是这些步骤的所在...... [http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7)

有人可以为像我这样的菜鸟解释这些步骤吗？我认为那是我搞砸的，但我本可以做错任何事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T00:15:47.273

我不认为 TcCell 成为自我的财产。当单元队列为空时，请尝试此操作：

```
if (cell == nil) {
    cell=[[NSBundle mainBundle] loadNibNamed:@"TVCell" owner:self options:nil];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T00:19:23.713

你说你不明白的步骤很难用语言解释。我建议寻找有图像或视频的教程。（我做了一个快速搜索，有很多可用的，但我真的不想在没有更仔细阅读它们的情况下选择一个来指导你）。

但是，我更喜欢以这种方式创建自定义表格视图单元格： [http ://www.mobilesce.com/2011/12/27/the-best-way-to-do-custom-reusable-uitableviewcells/](http://www.mobilesce.com/2011/12/27/the-best-way-to-do-custom-reusable-uitableviewcells/)

它与苹果文档中描述的方式略有不同，但我看到很多人使用它，我发现它更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T00:23:28.283

NSBundle 方法`loadNibNamed:owner:options:`返回一个包含 nib 文件中顶级对象的 NSArray。试试这个：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];
if (cell == nil) {
    NSArray *nibArray = [[NSBundle mainBundle] loadNibNamed:@"TVCell" owner:self options:nil];
    cell = [nibArray objectAtIndex:0];
} 
```

# c++ - 如何检测 boost::property_tree 中的重复条目

> ID：10037607
> 
> 赞同：1
> 
> 时间：2012-04-05T23:53:33.870
> 
> 标签：c++, boost-propertytree

我想递归遍历 boost::property_tree 以查找和剔除重复条目的特定目的。一旦发现树中的路径，有没有办法在父树上发出 get() 排除指定路径的某些实例？我担心解决这个问题可能需要对每个元素（从当前分支开始）进行另一次递归遍历，以积极识别重复条目。

# lua - 如果两个单词的第一个和最后一个字母与特定模式匹配，如何用连字符替换两个单词之间的空格？

> ID：10037611
> 
> 赞同：0
> 
> 时间：2012-04-05T23:53:49.283
> 
> 标签：lua, replace

我正在使用一种对拼写有一些特殊规则的语言。当单词放在一起时，它们没有空格，但偶尔会使用`'`or`-`来`-`区分一个单词的开头和结尾，在极少数情况下会发生混淆。

我当前显示的单词之间带有空格，例如：

```
The cat caught the mouse. 
```

但是，我需要删除空格，例如：

```
Thecatcaughtthemouse. 
```

但是，在删除这些空格之前，必须考虑有关放置`'`和的规则：`-`

首先，如果一个单词的第一个字母（也跟在另一个单词后面）以元音开头（`a`, `a`, `á`, `à`, `ǎ`, `ā`, `b`, `c`, `d`, `e`, `e`, `é`, `è`, `ě`, `ē`, , `i`, `i`, `í`, `ì`, `ǐ`, `ī`, `o`, `o`, `ó`, `ò`, `ǒ`, `ō`, `u`, `u`, `ú`, `ù`, `ǔ`, `ü`, `ǘ`, `ǜ`, `ǚ`, `ǖ`, or `ū`)，然后将空格替换为 a `'`（单词之间），例如：

```
The cat ate the sandwich and the ice cream. 
```

这变成：

```
Thecat'atethesandwichandthe'icecream. 
```

这不适用于句子开头的单词。

接下来，如果一个单词的最后一个字母以“a”、“u”或“ü”开头（`a`, `a`, `á`, `à`, `ǎ`, `ā`, `u`, `u`, `ú`, `ù`, `ǔ`, `ü`, `ǘ`, `ǜ`, `ǚ`, `ǖ`, or `ū`），句子中的下一个单词以“n”，然后将空格替换为`-`（单词之间），例如：

```
The people from Australia needed a car to visit the plateau near the river. 
```

这变成：

```
Thepeoplefrom'Australia-needed'acartovisittheplateau-neartheriver. 
```

最后，如果一个单词的最后一个字母以“n”结尾，而句子中的下一个单词以“g”开头，则将空格替换为a `-`（单词之间），例如：

```
The Australian grasshopper was lost in the overgrown grove. 
```

这变成：

```
The'Australian-grasshopperwaslostinthe'overgrown-grove. 
```

如何用`'`and替换匹配这些模式的单词之间的空格`-`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T01:16:32.807

你不说你为什么这样做。希望这不是作业问题。

假设一个单词以元音结尾，下一个单词以“f”或“t”开头，我想用星号代替空格，我写

```
sentence:gsub('([aeiouy])%s+([ft])', '%1*%2') 
```

你可以从那里拿走它。

# c++ - C ++中的二进制字符串到字节[]？

> ID：10037612
> 
> 赞同：1
> 
> 时间：2012-04-05T23:53:55.133
> 
> 标签：c++, string, qt, byte

我实际上在 Qt 中使用 QString 。所以如果有一个简单的功能请告诉我:)

我正在考虑将二进制字符串逐字节存储到文件中：

```
QString code = "0110010101010100111010 /*...still lots of 0s & 1s here..*/";
ofstream out(/*...init the out file here...*/);
for(; code.length() / 8 > 0; code.remove(0, 8))    //a byte is 8 bits
{
    BYTE b = QStringToByte(/*...the first 8 bits of the code left...*/);
    out.write((char *)(&b), 1);
}
/*...deal with the rest less than 8 bits here...*/ 
```

我应该如何编写我的 QStringToByte() 函数？

```
BYTE QStringToByte(QString s)    //s is 8 bits
{
    //?????
} 
```

感谢你的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T00:00:37.747

QString 有一个不错的[toInt](http://doc.qt.nokia.com/3.3/qstring.html#toInt)方法，它可以选择将基数作为参数（在您的情况下为基数 2）。只需剥离 8 个字符以形成一个新的 QString，然后执行`str.toInt( &somebool, 2 )`.

如果没有错误检查，它可能是：

```
BYTE QStringToByte(QString s)    //s is 8 bits
{
  bool ok;
  return (BYTE)(s.left( 8 ).toInt( &ok, 2 ));
} 
```

（不过不要相信我的话，我一生中从未在 Qt 中写过一行）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T00:03:02.117

您可以尝试`boost::dynamic_bitset`将位写入文件。

```
void write_to_file( std::ofstream& fp, const boost::dynamic_bitset<boost::uint8_t>& bits )
{
     std::ostream_iterator<boost::uint8_t> osit(fp);
     boost::to_block_range(bits, osit);
} 
```

# ruby-on-rails - 新的查找视图正在作为新的创建请求进行处理

> ID：10037622
> 
> 赞同：0
> 
> 时间：2012-04-05T23:55:27.017
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我之前有一个问题，我正在尝试制作一个 ldap 搜索表单。到目前为止，我为用户/查找做了 rails generate。在模型中，我有一个在 ldap 中搜索用户的功能，该功能在 Rails 之外独立工作。但是通过此视图的请求实际上被视为创建新用户的请求，而不是仅在 ldap 中搜索用户。我是 Rails 新手，不知道缺少的链接是什么。在这里需要一些帮助来理解这一点，将来我必须在这个测试应用程序中添加很多这样的功能/特性。我认为这可能会导致同样的问题。

```
# rails generate controller users find 
```

错误 -

```
undefined method `gsub' for nil:NilClass
Started GET "/users/find" for 10.85.41.23 at 2012-04-05 19:56:27 -0400
Processing by UsersController#find as HTML
Completed 500 Internal Server Error in 15ms

NoMethodError (undefined method `gsub' for nil:NilClass):
  app/models/user.rb:54:in `FindActiveDirectory'
  app/controllers/users_controller.rb:10:in `find' 
```

模型 -

```
class User < ActiveRecord::Base
  attr_accessible :user_id, :firstname, :lastname, :email, :role, :misc, :password

  validates_presence_of :user_id, :firstname, :lastname, :email, :role, :on => :create
  validates_uniqueness_of :user_id, :email

  ROLES = ['Admin','User']

####################
  SERVER = '10.10.10.1'   
  PORT = 389                    
  BASE = 'DC=User,DC=mysite,DC=com'   
  DOMAIN = 'ldap.mysite.com'       
####################

  def self.ActiveDirectoryAuthenticate(login, pass)
     user = find_by_user_id(login)

     if user
     nil
     else
     return false
     end
        conn = Net::LDAP.new :host => SERVER,
                         :port => PORT,
                         :base => BASE,
                         :auth => { :username => "#{login}@#{DOMAIN}",
                                    :password => pass,
                                    :method => :simple }
        if conn.bind
        return user
        else
        return false
        end
        rescue Net::LDAP::LdapError => e
        return false
end

  def self.FindActiveDirectory(login)
        conn = Net::LDAP.new :host => SERVER,
                         :port => PORT,
                         :base => BASE,
                         :auth => { :username => 'admin',
                                    :password => 'adminpass',
                                    :method => :simple }

if  conn.bind
        conn.search(:base => BASE, :filter => Net::LDAP::Filter.eq( "sAMAccountName", login ),
        :attributes => ['givenName','SN','mail'], :return_result => true) do |entry|
        entry.each do |attributes, values|

        if "#{attributes}" == "sn"
        values.each do |value|
        puts "Lastname: "+"#{value}"
        $lastname = "#{value}"
        end
        end

        if "#{attributes}" == "givenname"
        values.each do |value|
        puts "Firstname: "+"#{value}"
        $firstname = "#{value}"
        end
        end

        if "#{attributes}" == "mail"
        values.each do |value|
        puts "Email: "+"#{value}"
        $email = "#{value}"
        end
        end

        end
        end

    return true
    else
    return false
    end

    rescue Net::LDAP::LdapError => e
    return false
   end

end 
```

控制器 -

```
class UsersController < ApplicationController

  def new
        @user = User.new
  end

  def find
   @user = User.FindActiveDirectory(params[:user_id])
  end

  def create
        @user = User.new(params[:user_id])
        if @user.save
                redirect_to users_added_url, :notice => "Signed up!"
        else
                render "new"
        end
  end

end 
```

看法 -

```
<h1>Users#find</h1>
<%= form_for @user do |f| %>
  <% if @user.errors.any? %>
    <div class="error_messages">
      <h2>Form is invalid</h2>
      <ul>
        <% for message in @user.errors.full_messages %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
 <p>
    <%= f.label :Username %><br />
    <%= f.text_field :user_id %>
  </p>
  <p class="button"><%= f.submit %></p>
<% end %> 
```

路线 -

```
rubyapp::Application.routes.draw do

  get "users/find"

get "myapp/new"

root :to => "sessions#new"
#root :to => "home#index"
get "sessions/new"
get "users/new"
get "users/added" => "users#added"
get "myapp" => "myapp#new"
get "log_out" => "sessions#destroy", :as => "log_out"
get "log_in" => "sessions#new", :as => "log_in"
get "sign_up" => "users#new", :as => "sign_up"

resources :users
resources :sessions
 end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T06:38:53.917

您需要另一种方法来处理您返回的数据：

控制器：

```
def find
end

def display_result
  @result = User.findActiveDirectory( params[:user_id] )

  if @result.empty?
    render action: "find", notice: "Could not find a user with id #{params[:user_id]}"
  end
end 
```

下一步是向 routes.rb 添加路由：

```
get 'users/find'
post 'users/display_result' 
```

现在我们必须更新查找的视图：

```
<h1>Users#find</h1>

<p><%= notice %></p>

<%= form_tag users_display_result_path do %>
  <p>
    <%= label_tag :Username %><br />
    <%= text_field_tag :user_id %>
  </p>
  <p class="button"><%= submit_tag %></p>
<% end %> 
```

并创建用于显示结果的新视图（这是一个非常基本的视图，我想您需要对其进行大量改进，但这应该会给您一个想法）：

```
<h1>Users#display_result</h1>
<%= debug @result %> 
```

最后但并非最不重要的一点是更改模型中的一些内容：

```
def self.FindActiveDirectory(login)
  conn = Net::LDAP.new :host => SERVER,
                       :port => PORT,
                       :base => BASE,
                       :auth => { :username => 'admin',
                                  :password => 'adminpass',
                                  :method => :simple }

  if  conn.bind
    result = HashWithIndifferentAccess.new

    conn.search( :base => BASE,
                 :filter => Net::LDAP::Filter.eq( "sAMAccountName", login ),
                 :attributes => ['givenName','SN','mail'],
                 :return_result => true
    ) do |entries|

      entries.each do |attribute, value|
        result[attribute] = value
      end
  end

  return result

  rescue Net::LDAP::LdapError => e
    return false
end 
```

您最终将在控制器/视图中使用名为@result 的变量。该变量是以属性为键的散列。所以你可以在视图中做这样的事情：

```
<% @result.each do |key,value| %>
  <%= key.to_s.normalize + ": " + value.to_s %>
<% end > 
```

# acs - 如何增加 Azure ACS 登录超时

> ID：10037625
> 
> 赞同：2
> 
> 时间：2012-04-05T23:55:44.403
> 
> 标签：acs

Azure 培训工具包包括一个名为“IntroToACS2”的实验室。在其中，您创建一个 WebRole 并启用 ACS，以便您可以使用您的 Google、Live 或 Yahoo id 登录。登录后，如果我等待 10 分钟左右然后刷新页面，我将被重定向回登录页面。

如何增加 Azure ACS 登录超时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T18:49:09.230

这是我发现的：

[http://msdn.microsoft.com/en-us/library/gg185906.aspx#BKMK_5](http://msdn.microsoft.com/en-us/library/gg185906.aspx#BKMK_5)

> 令牌生命周期
> 
> 令牌生命周期属性允许您指定 ACS 向依赖方应用程序颁发的安全令牌保持有效的时间量。默认情况下，在 ACS 中，此值设置为 10 分钟（600 秒）。在 ACS 中，该值必须大于零但小于或等于 24 小时（86400 秒）。

![在此处输入图像描述](../Images/9c0a13c35ec6c9f4d9ca4dce2b622b26.png)

虽然最长生命周期是 24 小时，但可以通过在 ShowSigninPage 函数中添加以下 6 行代码来自动更新 ACS 令牌，就在 identityProviders 的现有循环之前：

```
for (var i in identityProviders) {
    if (cookieName !== null && cookieName == identityProviders[i].Name) {
        window.location = identityProviders[i].LoginUrl;
        return null;
    } }

// Loop through the identity providers for (var i in identityProviders) {
... 
```

有关自动续订方法的更多信息，请参阅：[http ://social.msdn.microsoft.com/Forums/en-US/windowsazuresecurity/thread/0430c4aa-ab10-4a72-b115-91b2600bfcd0](http://social.msdn.microsoft.com/Forums/en-US/windowsazuresecurity/thread/0430c4aa-ab10-4a72-b115-91b2600bfcd0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:32:11.803

我认为您真正想要的是增加应用程序的会话生命周期，而**不是**ACS 颁发的令牌生命周期。

[如何使用 WIF / SAML 令牌 / FedAuth cookie 增加会话超时](https://stackoverflow.com/questions/5452488/how-do-i-increase-session-timeout-with-w-i-f-saml-tokens-fedauth-cookie)

# php - PHP CMS 重载

> ID：10037626
> 
> 赞同：0
> 
> 时间：2012-04-05T23:55:45.713
> 
> 标签：php, oracle, drupal, joomla, content-management-system

我一直在研究 CMS，但我的大脑很痛。因此，如果您愿意，请在下面查看我的要求，让我知道哪个 CMS 可能是最好的选择。

所以我的任务是使用 CMS 重写我们的一个 Intranet 工具。该工具最初完全由我们使用 HTML、CSS、PHP 和 JavaScript 编写。我们有一个 Apache 服务器和一个 Oracle 数据库。我们的许多工具包括制作表单供用户填写并显示它们以供其他视图阅读/编辑/添加。除了这个基本功能之外，还有一些其他功能，我可以看到已经有解决方案：

-首页新闻

-所有用户的联系人列表

- 消息和电子邮件用户（用户到用户和系统到用户）

-上传文件并将它们分配给某些用户和用户组（对其他人隐藏）

-文件/文件夹/子文件夹系统用于对上传的文件进行排序

- 任务跟踪（非常基本，分配任务，接受，完成结果）

- 使用指标

- 日历（每周、每月、甘特图）显示多天的事件

- 允许用户订阅页面并在进行更改时获取更新

由于所有开发人员都具有编程背景，因此我不担心学习曲线。我目前的研究重点是 Drupal 和 Joomla，因为这两个似乎是我见过的建议最多的两个，但我当然对其他任何事情持开放态度。因此，如果您对我需要的任何功能有任何好的或不好的体验，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T02:49:35.760

Drupal 非常适合这样的项目，我认为您甚至不需要做很多自定义编码（仅用于指标部分）。Joomla 也不错。

# c# - Asp.net 通过 ssh 访问 unix 框

> ID：10037629
> 
> 赞同：0
> 
> 时间：2012-04-05T23:56:06.797
> 
> 标签：c#, asp.net

基本上我想通过 ssh 访问我的 unix 机器并开始在那里执行一些命令。这在 asp.net Web 应用程序上怎么可能。任何想法tnx。我将使用 c#

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T00:43:58.883

我之前成功地使用[过 Ssh.net](http://sshnet.codeplex.com/)来做到这一点。

# javascript - 在 javascript 或 jquery 中调整窗口大小时调整所有元素的大小，包括屏幕上的可拖动图像

> ID：10037635
> 
> 赞同：0
> 
> 时间：2012-04-05T23:57:12.593
> 
> 标签：javascript, jquery, html, jquery-ui

我正在尝试在调整窗口大小时调整网页上所有元素的大小。背景图像需要与可拖动项目、文本框、字体大小和其他图像一起拉伸。可拖动项目需要与背景图像成比例地保持在同一位置。一切都需要保持纵横比。我尝试了很多方法，但似乎都没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T02:03:06.280

As far as the background image scaling to whatever is going on on the page, see my reply to this guys similar question.

[resize the image to fit the dimensions of TD](https://stackoverflow.com/questions/12518441/resize-the-image-to-fit-the-dimensions-of-td/12518664#12518664)

as far as other objects changing but maintaining aspect rations you may want to look into css Media Queries.

good luck

# java - 如何从内部方法更改对象的值？

> ID：10037637
> 
> 赞同：0
> 
> 时间：2012-04-05T23:57:15.297
> 
> 标签：java

我需要更改`newiconid[0]`to `arg2`from method的值`onItemSelected()`。我需要在`onClick()`. 以下代码不起作用，它只是保留`newiconid[0]`as的值`0`。如何做到这一点？

```
@Override
public void onClick(DialogInterface dialog,
        int which) {
    final int newiconid[] = new int[1];
    spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(
                AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            // TODO Auto-generated method stub
            System.out.println("" + arg1 + arg2
                    + arg3);
            newiconid[0] = arg2;
        }

        @Override
        public void onNothingSelected(
                AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }
    });
    // TODO Auto-generated method stub
    System.out.println("updateicon "+newiconid[0]+" "+itemid);
    datasource.updateVSIcon(newiconid[0], itemid);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T00:01:17.733

您已将其设为**FINAL**， Final 是常量，一旦初始化就不要更改。尝试先进行决赛，然后让我们知道会发生什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T00:02:09.287

你可以尝试做`newiconid`一个班级成员吗？然后它应该可以在两个范围内访问。是的，正如@Agent404 所说，不要成功`final`

# c++ - 为什么不经常使用命名参数？

> ID：10037639
> 
> 赞同：9
> 
> 时间：2012-04-05T23:57:21.933
> 
> 标签：c++, named-parameters

我设计了一个参数类，它允许我编写如下代码：

```
//define parameter
typedef basic_config_param<std::string> name;

void test(config_param param) {

  if(param.has<name>()) { //by name
    cout << "Your name is: " << param.get<name>() << endl;
  }

  unsigned long & n = param<ref<unsigned long> >(); //by type
  if(param.get<value<bool> >(true)) { //return true if not found
    ++n;
  }
}

unsigned long num = 0;
test(( name("Special :-)"), ref<unsigned long>(num) )); //easy to add a number parameter
cout << "Number is: " << num; //prints 1 
```

该类的性能非常快：一切都只是堆栈上的一个引用。为了保存所有信息，我在进行堆分配之前使用最多 5 个参数的内部缓冲区来减小每个对象的大小，但这很容易改变。

为什么不经常使用这种语法，重载`operator,()`来实现命名参数？是因为潜在的性能损失吗？

另一种方法是使用命名的成语：

```
object.name("my name").ref(num); //every object method returns a reference to itself, allow object chaining. 
```

但是，对我来说，重载`operator,()`看起来更“现代”C++，只要你不要忘记使用双括号。即使它比正常功能慢，性能也不会受到太大影响，因此在大多数情况下可以忽略不计。

我可能不是第一个提出这样的解决方案的人，但为什么它不更常见呢？在我编写一个接受它的类之前，我从未见过像上面的语法（我的例子）这样的东西，但对我来说它看起来很完美。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-04-06T01:18:04.220

> 我的问题是为什么不更多地使用这种语法，重载 operator,() 来实现命名参数。

因为它是违反直觉的、非人类可读的，并且可以说是一种糟糕的编程实践。除非您想破坏代码库，否则请避免这样做。

```
test(( name("Special :-)"), ref<unsigned long>(num) )); 
```

假设我第一次看到这个代码片段。我的思考过程是这样的：

1.  乍一看，它看起来像是[“最令人烦恼的解析”](http://en.wikipedia.org/wiki/Most_vexing_parse)的示例，因为您使用了双括号。所以我假设 test 是一个变量，并且想知道你是否忘记写变量的类型。然后我突然想到这个东西实际上可以编译。在那之后，我不得不怀疑这是否是一个立即销毁的类型测试类的实例，并且您对所有类类型都使用小写名称。
2.  然后我发现它实际上是一个函数调用。伟大的。
3.  代码片段现在看起来像一个带有两个参数的函数调用。
4.  现在对我来说很明显这不能是带有两个参数的函数调用，因为您使用了双括号。
5.  所以，现在我必须弄清楚里面到底发生了什么`()`。
6.  我记得有一个逗号运算符（在过去 5 年中我从未在真正的 C++ 代码中看到过）它丢弃了前面的参数。所以现在我不得不想知道 name() 的有用副作用是什么，以及 name() 是什么 - 函数调用或类型（因为您不使用大写/小写字母来区分类/函数（即`Test`是一个类，但是`test`是一个函数），并且你没有`C`前缀）。
7.  在源代码中查找后`name`，我发现它是类。并且它使`,`运算符重载，因此它实际上**不再**丢弃第一个参数。

看看这里浪费了多少时间？坦率地说，写这样的东西会给你带来麻烦，因为你使用语言特性使你的代码看起来与你的代码实际所做的不同（你用一个参数进行函数调用看起来有两个参数，或者它是一个可变参数函数）。这是一种不好的编程习惯，大致相当于重载 operator+ 以执行减法而不是加法。

现在，让我们考虑一个[QString](http://qt-project.org/doc/qt-4.8/qstring.html)示例。

```
 QString status = QString("Processing file %1 of %2: %3").arg(i).arg(total).arg(fileName); 
```

假设我有生以来第一次看到它。我的思考过程是这样的：

1.  有一个`status`QString 类型的变量。
2.  它是从一个 QString() 类型的临时变量初始化的。
3.  ...在调用 QString::arg 方法之后。（我知道这是一种方法）。
4.  我在文档中查找[.arg](http://qt-project.org/doc/qt-4.8/qstring.html#arg)以查看它的作用，并发现它替换了`%1`-style 条目并返回 QString&。因此，调用链`.arg()`立即变得有意义。请注意，可以对 QString::arg 之类的东西进行模板化，并且您可以为不同的参数类型调用它，而无需在`<>`.
5.  该代码片段现在有意义了，所以我转到另一个片段。

> 看起来更“现代”的 C++

“新的和闪亮的”有时意味着“有问题的和坏的”（slackware linux 是建立在一个有点类似的想法上的）。如果您的代码看起来很现代，这无关紧要。它应该是人类可读的，它应该做它打算做的事情，并且你应该在编写它时浪费尽可能少的时间。即您应该（个人建议）旨在“以最少的成本（包括维护）在最少的时间内实现最多的功能”，但这样做可以获得最大的回报。遵循 KISS 原则也是有意义的。

您的“现代”语法不会降低开发成本，不会减少开发时间，并且会增加维护成本（违反直觉）。因此，应该避免这种语法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T00:12:06.980

没有必要。您的动态调度（行为不同，取决于参数的*逻辑*类型）可以使用模板专业化来实现a）更容易和b）更快。

如果您确实需要基于仅在运行时可用的信息进行区分，我会尝试将您的`test`函数移动为该`param`类型的虚拟方法并简单地使用动态绑定（这就是它的用途，这就是您的用途一种重新发明）。

这种方法更有用的唯一情况可能是多调度场景，您希望减少代码并找到一些相似模式。

# java - 在简单的 Java 程序中从 JButton 打开 URL？

> ID：10037644
> 
> 赞同：0
> 
> 时间：2012-04-05T23:58:32.243
> 
> 标签：java, swing, hyperlink, awt, jbutton

你好社区:)，所以我是一个真正的java新手，对吧？我似乎无法从我的 LINK GUI 中打开 URL。目前，它只显示字段值。

这是我的 handler.java 代码：

```
google = new JButton("Google");
google.setToolTipText("Open Google");
add(google); 
```

我希望它打开一个 URL 而不是显示字段值。这是我的动作监听器代码：

```
 private class HandlerClass implements ActionListener {

    public void actionPerformed(ActionEvent event) {

        JOptionPane.showMessageDialog(null, String.format("%s", event.getActionCommand()));

    }

} 
```

如果这是可能的，我可以得到一些帮助吗？：） 谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T00:07:30.333

见[`Desktop.browse(URI)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Desktop.html#browse%28java.net.URI%29)。

> 我得到一个错误，`Cannot make a static reference to the non-static method browse(URI) from the type Desktop`

不，当您尝试在类上调用实例方法时会发生这种情况。你需要一个`Desktop`对象。

```
URI uri = new URI("http://google.com/");
Desktop dt = Desktop.getDesktop();
dt.browse(uri.toURL()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T19:48:14.227

这可能对其他人有用。安德鲁汤普森的答案几乎就在那里。

```
try {

     String url ="http://www.stackoverflow.com";

     Desktop dt = Desktop.getDesktop();
     URI uri = new URI(url);
     dt.browse(uri.resolve(uri));

 } catch (URISyntaxException ex) {
     Logger.getLogger(Setting.class.getName()).log(Level.SEVERE, null, ex);
 } catch (IOException ex) {
     Logger.getLogger(Setting.class.getName()).log(Level.SEVERE, null, ex);
 } 
```

上面的代码需要用 try catch 块包围，其中包括 URISyntaxException 和 IOException。

# android - Sqlite错误码1，msg语法错误

> ID：10037645
> 
> 赞同：0
> 
> 时间：2012-04-05T23:58:33.197
> 
> 标签：android, sqlite

据我所知，似乎它以错误的顺序传递了 addTask 内容值，但我不明白为什么。addUser 方法以相同的方式实现并且工作正常。

我得到的错误和所有相关代码都在这里。任何帮助表示赞赏。

> 04-05 23:09:37.465: I/SqliteDatabaseCpp(606): sqlite 返回: 错误代码 = 1, msg = near >"id": 语法错误, db=/data/data/edu.flying.panda.taskmanager/数据库/dbManager
> 
> 04-05 23:09:37.545：E/SQLiteDatabase(606)：插入细节时出错=类型=学校日期=位置=用户 ID=1 描述=sdfg 完成=假
> 
> 04-05 23:09:37.545: E/SQLiteDatabase(606): android.database.sqlite.SQLiteException: 在“id”附近: 语法错误: , 编译时: INSERT INTO tasks(detail,type,date,location,user id ,description,completed) 值 (?,?,?,?,?,?,?)

```
package edu.flying.panda.taskmanager;

import java.util.ArrayList;
import java.util.List;
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DatabaseHandler extends SQLiteOpenHelper {
    // current user id
    private static int CURRENT_USER_ID;
    // db version
    private static final int DATABASE_VERSION = 1;
    // db name
    private static final String DATABASE_NAME = "dbManager";
    // table name
    private static final String TABLE_USERS = "users";
    private static final String TABLE_TASKS = "tasks";
    // user table column names
    private static final String USER_KEY_ID = "id";
    private static final String USER_KEY_USERNAME = "username";
    private static final String USER_KEY_PASSWORD = "password";
    private static final String USER_KEY_NAME = "name";
    private static final String USER_KEY_EMAIL = "email";
    // task table column names
    private static final String TASK_KEY_ID = "id";
    private static final String TASK_KEY_USERID = "user id";
    private static final String TASK_KEY_DESCRIPTION = "description";
    private static final String TASK_KEY_LOCATION = "location";
    private static final String TASK_KEY_DATE = "date";
    private static final String TASK_KEY_DETAIL = "detail";
    private static final String TASK_KEY_TYPE = "type";
    private static final String TASK_KEY_COMPLETED = "completed";

    // constructor
    public DatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }
    // Creating Tables
    @Override
    public void onCreate(SQLiteDatabase db) {
        String CREATE_USERS_TABLE = 
                String.format("CREATE TABLE %s (%s INTEGER PRIMARY KEY, %s TEXT, %s TEXT, %s TEXT, %s TEXT);",
                        TABLE_USERS, USER_KEY_ID, USER_KEY_USERNAME, USER_KEY_PASSWORD,
                        USER_KEY_NAME, USER_KEY_EMAIL);
        String CREATE_TASKS_TABLE =
                String.format("CREATE TABLE %s (%s INTEGER PRIMARY KEY, %s INTEGER, %s TEXT, %s TEXT, %s TEXT, %s TEXT, %s TEXT, %s INTEGER);",
                        TABLE_TASKS, TASK_KEY_ID, TASK_KEY_USERID, TASK_KEY_DESCRIPTION, TASK_KEY_LOCATION, TASK_KEY_DATE, TASK_KEY_DETAIL, TASK_KEY_TYPE, TASK_KEY_COMPLETED);

        db.execSQL(CREATE_TASKS_TABLE);
        db.execSQL(CREATE_USERS_TABLE);

    }
    // Upgrading database
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // Drop older table if existed
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_USERS);
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_TASKS);
        // Create tables again
        onCreate(db);
    }
    public void addUser(User user) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(USER_KEY_USERNAME, user.getUsername());
        values.put(USER_KEY_PASSWORD, user.getPassword());
        values.put(USER_KEY_NAME, user.getName());
        values.put(USER_KEY_EMAIL, user.getEmail());

        // inserting row
        db.insert(TABLE_USERS, null, values);
        db.close();
    }

    public void addTask(Task task){
    SQLiteDatabase db = this.getWritableDatabase();
    ContentValues values = new ContentValues();

    values.put(TASK_KEY_USERID, getCURRENT_USERID());
    values.put(TASK_KEY_DESCRIPTION, task.getDescription() );
    values.put(TASK_KEY_LOCATION, task.getLocation() );
    values.put(TASK_KEY_DATE, task.getDueDate());
    values.put(TASK_KEY_DETAIL, task.getDetailedDescription() );
    values.put(TASK_KEY_TYPE, task.getType() );
    values.put(TASK_KEY_COMPLETED,  task.isCompleted());

    db.insert(TABLE_TASKS, null, values);
    db.close();     
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T00:35:47.077

该错误似乎在您的 TASK_KEY_USERID 中，因为您的值中有一个空格。它应该是一个下划线吗？要添加的另一个注意事项是，android 喜欢您的主键列名称以“_id”结尾，而您的只是“id”。

# css - 如何将两个相同大小的画布堆叠在一起？

> ID：10037649
> 
> 赞同：10
> 
> 时间：2012-04-05T23:58:53.493
> 
> 标签：css, html

下面是文件代码。我想在画布下移动画布。

```
<html>
<head>
  <script type="text/javascript" src="game.js"></script>
</head>
<body>

  <canvas id="canvas" width="710" height="597" style="border:1px solid #c3c3c3;">
    <p>Your browser doesn't support canvas!</p>
  </canvas>

  <canvas id="movementCanvas" width="710" height="597" style="border:1px solid #c3c3c3;">
  </canvas>

</body>
</html> 
```

第二个问题。在更高的层次上，我试图隐藏下面的画布。moveCanvas 是一个颜色编码的地图，我将在其中查找单击时的值，访问像素的唯一方法是使用 HTML5 画布和上下文。顶部的“画布”是前端，应该看起来不错。这听起来像一个理智的方法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-06T00:11:49.047

使用 CSS 的`position: absolute`. 将以下 CSS 添加到您的页面：

```
canvas {
    position: absolute;
    top: 0;
    left: 0;
} 
```

这会将两幅画布放在同一个位置：最左上角的部分。

您可能希望将它们放在一个包装器元素中，这需要`position: relative`它的子元素才能存在。例如，您的 HTML 将如下所示：

```
<div class="wrapper">
    <canvas id="canvas1" width="400" height="300"></canvas>
    <canvas id="canvas2" width="400" height="300"></canvas>
</div> 
```

您的 CSS 将如下所示：

```
.wrapper {
    position: relative;
    width: 400px;
    height: 300px;
}

.wrapper canvas {
    position: absolute;
    top: 0;
    left: 0;
} 
```

然后定位包装器 div，但是您可以定位其他东西。

# ruby-on-rails - Michael Hartl 的 Ruby on Rails 教程：第 8.3 章 - 网站表单显示两次

> ID：10037651
> 
> 赞同：1
> 
> 时间：2012-04-05T23:59:05.233
> 
> 标签：ruby-on-rails, ruby, railstutorial.org

我目前正在关注 Ruby on Rails 教程，在完成教程中的[第 8.3 节后](http://ruby.railstutorial.org/chapters/sign-in-sign-out#sec-cucumber)遇到了一个小问题。从功能上讲，一切正常，我可以通过我的表单和所有内容添加用户。但是，现在我的表单在网站的每个页面上都出现了两次。我已经多次查看代码，但无法弄清楚导致这种情况发生的原因。这是我的 Heroku 网站的链接，您可以在其中看到问题：[http ://deep-mist-5284.heroku.com/](http://deep-mist-5284.heroku.com/)

当我在 Rails 服务器中运行该网站时，它会输出它正在使用的这些文件，但我查看了这些文件并没有发现任何错误。

```
Started GET "/signup" for 127.0.0.1 at 2012-04-05 16:43:13 -0700
Processing by UsersController#new as HTML
Rendered shared/_error_messages.html.erb (1.2ms)
Rendered layouts/_stylesheets.html.erb (17.9ms)
Rendered layouts/_header.html.erb (10.6ms)
Rendered layouts/_footer.html.erb (2.6ms)
Rendered users/new.html.erb within layouts/application (280.3ms) 
```

有谁知道是什么导致了这个问题？

用户控制器类用户控制器 < 应用控制器

```
 def show
    @user = User.find(params[:id])
    @title = @user.name
  end

  def new
    @user = User.new
    @title = "Sign up"
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      flash[:success] = "Welcome to the Sample App!"
      redirect_to @user
    else
      @user.password = ""
      @user.password_confirmation = ""
      @title = "Sign up"
      render 'new'
    end
  end
end 
```

共享/_error_messages.html.erb

```
<% if @user.errors.any? %>
  <div id="error_explanation">
    <h2><%= pluralize(@user.errors.count, "error") %> 
        prohibited this user from being saved:</h2>
    <p>There were problems with the following fields:</p>
    <ul>
    <% @user.errors.full_messages.each do |msg| %>
      <li><%= msg %></li>
    <% end %>
    </ul>
  </div>
<% end %> 
```

布局/_stylesheets.html.erb

```
<!--[if lt IE 9]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<%= stylesheet_link_tag 'blueprint/screen', :media => 'screen' %>
<%= stylesheet_link_tag 'blueprint/print',  :media => 'print' %>
<!--[if lt IE 8]><%= stylesheet_link_tag 'blueprint/ie' %><![endif]-->
<%= stylesheet_link_tag 'custom', :media => 'screen' %> 
```

布局/_header.html.erb

```
<header>
  <%= link_to logo, root_path %>
  <nav class="round">
    <ul>
      <li><%= link_to "Home", root_path %></li>
      <li><%= link_to "Help", help_path %></li>
      <li><%= link_to "Sign in", '#' %></li>
    </ul>
  </nav>
</header> 
```

布局/_footer.html.erb

```
<footer>
  <nav class="round">
    <ul>
      <li><%= link_to "About", about_path %></li>
      <li><%= link_to "Contact", contact_path %></li>
      <li><a href="http://news.railstutorial.org/">News</a></li>
      <li><a href="http://www.railstutorial.org/">Rails Tutorial</a></li>
    </ul>
  </nav>
</footer> 
```

用户/new.html.erb

```
<h1>Sign up</h1>

<%= form_for(@user) do |f| %>
  <%= render 'shared/error_messages' %>
  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label :email %><br />
    <%= f.text_field :email %>
  </div>
  <div class="field">
    <%= f.label :password %><br />
    <%= f.password_field :password %>
  </div>
  <div class="field">
    <%= f.label :password_confirmation, "Confirmation" %><br />
    <%= f.password_field :password_confirmation %>
  </div>
  <div class="actions">
    <%= f.submit "Sign up" %>
  </div>
<% end %> 
```

布局/应用

```
<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <%= csrf_meta_tag %>
    <%= render 'layouts/stylesheets' %>
  </head>
  <body>
    <div class="container">
      <%= render 'layouts/header' %>
      <section class="round">
        <% flash.each do |key, value| %>
          <%= content_tag(:div, value, :class => "flash #{key}") %>
        <% end %> 
        <%= yield %>
      </section>
      <section class="round">
        <%= yield %>
      </section>
      <%= render 'layouts/footer' %>
      <%= debug(params) if Rails.env.development? %>
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T00:27:43.803

您的 layouts/application.html.erb 中有两个 <%= yield %>。您让 Rails 将 users/new.html.erb（以及所有其他页面）的内容两次放入您的 layouts/application.html.erb 中。删除一个，所有将被修复。

# schema - 如何在 RDBMS 中为每个数据库列实现多个关系

> ID：10037653
> 
> 赞同：0
> 
> 时间：2012-04-05T23:59:12.787
> 
> 标签：schema, relational-database, rdbms, database-schema

我有一个表 A，其中包含“属性”列。我有另一个表 B 列名称，描述。RDBMS 中是否有任何方法可以让 A.properties 指向表 B 中的多条记录？例如：

```
A.properties --> [<B instance#1>, <B instance#2>, ...] 
```

这可以做到吗？有没有一种传统的和/或优雅的方式来做到这一点？

如果不需要的话，我不想诉诸 NoSQL……即使如此，从我所读到的内容来看，在 NoSQL 中也不可能存在关系（至少对于 MongoDB 而言）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T00:06:35.870

是的，这很正常。一种方法是将 A 的主键放在 B 的列中。另一种方法是创建第三个“链接”表，将 A 与多个 B 链接起来。

# winapi - 如何用 Haskell 编写 Windows 服务应用程序？

> ID：10037654
> 
> 赞同：46
> 
> 时间：2012-04-05T23:59:22.880
> 
> 标签：winapi, haskell, callback, windows-services, ffi

我一直在努力用 Haskell 编写一个 Windows 服务应用程序。

## 背景

服务应用程序由 Windows 服务控制管理器执行。[在启动时，它会对StartServiceCtrlDispatcher](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686324%28v=vs.85%29.aspx)进行阻塞调用，该调用提供了一个回调，用作[服务的主要功能](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685138%28v=vs.85%29.aspx)。

服务的主函数应该注册第二个回调来处理传入的命令，例如启动、停止、继续等。它通过调用[RegisterServiceCtrlHandler](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685054%28v=vs.85%29.aspx)来实现。

## 问题

我可以编写一个程序来注册一个服务主要功能。然后我可以将该程序安装为 Windows 服务并从服务管理控制台启动它。该服务能够启动，报告自己正在运行，然后等待传入的请求。

问题是我无法调用我的[服务处理程序函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683240%28v=vs.85%29.aspx)。查询服务状态显示它正在运行，但只要我发送它一个“停止”命令窗口就会弹出一条消息说：

```
Windows could not stop the Test service on Local Computer.

Error 1061: The service cannot accept control messages at this time. 
```

根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685141%28v=vs.85%29.aspx)，StartServiceCtrlDispatcher 函数会阻塞，直到所有服务报告它们已停止。在调用服务主函数后，调度程序线程应该等到服务控制管理器发送命令，此时该线程应该调用处理程序函数。

## 细节

下面是我正在尝试做的一个非常简化的版本，但它演示了我的处理函数没有被调用的问题。

首先，一些名称和进口：

```
module Main where

import Control.Applicative
import Foreign
import System.Win32

wIN32_OWN_PROCESS :: DWORD
wIN32_OWN_PROCESS = 0x00000010

sTART_PENDING, rUNNING :: DWORD
sTART_PENDING = 0x00000002
rUNNING = 0x00000004

aCCEPT_STOP, aCCEPT_NONE :: DWORD
aCCEPT_STOP = 0x00000001
aCCEPT_NONE = 0x00000000

nO_ERROR :: DWORD
nO_ERROR = 0x00000000

type HANDLER_FUNCTION = DWORD -> IO ()
type MAIN_FUNCTION = DWORD -> Ptr LPTSTR -> IO () 
```

我需要使用 Storable 实例定义一些特殊的数据类型以进行数据编组：

```
data TABLE_ENTRY = TABLE_ENTRY LPTSTR (FunPtr MAIN_FUNCTION)

instance Storable TABLE_ENTRY where
  sizeOf _ = 8
  alignment _ = 4
  peek ptr = TABLE_ENTRY <$> peek (castPtr ptr) <*> peek (castPtr ptr `plusPtr` 4)
  poke ptr (TABLE_ENTRY name proc) = do
      poke (castPtr ptr) name
      poke (castPtr ptr `plusPtr` 4) proc

data STATUS = STATUS DWORD DWORD DWORD DWORD DWORD DWORD DWORD

instance Storable STATUS where
  sizeOf _ = 28
  alignment _ = 4
  peek ptr = STATUS 
      <$> peek (castPtr ptr)
      <*> peek (castPtr ptr `plusPtr` 4)
      <*> peek (castPtr ptr `plusPtr` 8)
      <*> peek (castPtr ptr `plusPtr` 12)
      <*> peek (castPtr ptr `plusPtr` 16)
      <*> peek (castPtr ptr `plusPtr` 20)
      <*> peek (castPtr ptr `plusPtr` 24)
  poke ptr (STATUS a b c d e f g) = do
      poke (castPtr ptr) a
      poke (castPtr ptr `plusPtr` 4)  b
      poke (castPtr ptr `plusPtr` 8)  c
      poke (castPtr ptr `plusPtr` 12) d
      poke (castPtr ptr `plusPtr` 16) e
      poke (castPtr ptr `plusPtr` 20) f
      poke (castPtr ptr `plusPtr` 24) g 
```

只需要制造三个外国进口产品。我将提供给 Win32 的两个回调有一个“包装器”导入：

```
foreign import stdcall "wrapper"
    smfToFunPtr :: MAIN_FUNCTION -> IO (FunPtr MAIN_FUNCTION)
foreign import stdcall "wrapper"
    handlerToFunPtr :: HANDLER_FUNCTION -> IO (FunPtr HANDLER_FUNCTION)
foreign import stdcall "windows.h RegisterServiceCtrlHandlerW"
    c_RegisterServiceCtrlHandler
        :: LPCTSTR -> FunPtr HANDLER_FUNCTION -> IO HANDLE
foreign import stdcall "windows.h SetServiceStatus"
    c_SetServiceStatus :: HANDLE -> Ptr STATUS -> IO BOOL
foreign import stdcall "windows.h StartServiceCtrlDispatcherW"
    c_StartServiceCtrlDispatcher :: Ptr TABLE_ENTRY -> IO BOOL 
```

## 主程序

最后，这里是主要的服务应用程序：

```
main :: IO ()
main =
  withTString "Test" $ \name ->
  smfToFunPtr svcMain >>= \fpMain ->
  withArray [TABLE_ENTRY name fpMain, TABLE_ENTRY nullPtr nullFunPtr] $ \ste ->
  c_StartServiceCtrlDispatcher ste >> return ()

svcMain :: MAIN_FUNCTION
svcMain argc argv = do
    appendFile "c:\\log.txt" "svcMain: svcMain here!\n"
    args <- peekArray (fromIntegral argc) argv
    fpHandler <- handlerToFunPtr svcHandler
    h <- c_RegisterServiceCtrlHandler (head args) fpHandler
    _ <- setServiceStatus h running
    appendFile "c:\\log.txt" "svcMain: exiting\n"

svcHandler :: DWORD -> IO ()
svcHandler _ = appendFile "c:\\log.txt" "svcCtrlHandler: received.\n"

setServiceStatus :: HANDLE -> STATUS -> IO BOOL
setServiceStatus h status = with status $ c_SetServiceStatus h

running :: STATUS
running  = STATUS wIN32_OWN_PROCESS rUNNING aCCEPT_STOP nO_ERROR 0 0 3000 
```

## 输出

我之前使用`sc create Test binPath= c:\Main.exe`.

这是编译程序的输出：

```
C:\path>ghc -threaded --make Main.hs
[1 of 1] Compiling Main             ( Main.hs, Main.o )
Linking Main.exe ...

C:\path> 
```

然后我从服务控制监视器启动服务。这是我对 SetServiceStatus 的调用被接受的证明：

```
C:\Path>sc query Test

SERVICE_NAME: Test
        TYPE               : 10  WIN32_OWN_PROCESS
        STATE              : 4  RUNNING
                                (STOPPABLE, NOT_PAUSABLE, IGNORES_SHUTDOWN)
        WIN32_EXIT_CODE    : 0  (0x0)
        SERVICE_EXIT_CODE  : 0  (0x0)
        CHECKPOINT         : 0x0
        WAIT_HINT          : 0x0

C:\Path> 
```

这是 的内容`log.txt`，证明我的第一个回调`svcMain`被调用了：

```
svcMain: svcMain here!
svcMain: exiting 
```

一旦我使用服务控制管理器发送停止命令，我就会收到错误消息。我的处理程序函数应该在日志文件中添加一行，但这不会发生。然后我的服务出现在停止状态：

```
C:\Path>sc query Test

SERVICE_NAME: Test
        TYPE               : 10  WIN32_OWN_PROCESS
        STATE              : 1  STOPPED
        WIN32_EXIT_CODE    : 0  (0x0)
        SERVICE_EXIT_CODE  : 0  (0x0)
        CHECKPOINT         : 0x0
        WAIT_HINT          : 0x0

C:\Path> 
```

## 问题

有没有人对我可以尝试调用我的处理程序函数有什么想法？

## 更新 20130306

我在 Windows 7 64 位上遇到了这个问题，但在 Windows XP 上没有。其他版本的 Windows 尚未经过测试。当我将编译后的可执行文件复制到多台机器并执行相同的步骤时，我会得到不同的结果。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-15T05:08:20.567

我承认，这个问题已经困扰我好几天了。通过遍历返回值和 的内容[`GetLastError`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679360%28v=vs.85%29.aspx)，我确定此代码应该根据系统正常工作。

因为它显然不是（它似乎进入了阻止服务处理程序成功运行的未定义状态），所以我发布了我的完整诊断和解决方法。这是微软应该意识到的确切情况，因为它的接口保证没有得到兑现。

## 检查

`sc interrogate service`当我尝试询问服务（通过并允许`sc control service`使用固定选项）时，对 Windows 报告的错误消息非常不满意后`control`，我编写了自己的调用`GetLastError`以查看是否发生了任何有趣的事情：

```
import Text.Printf
import System.Win32

foreign import stdcall "windows.h GetLastError"
    c_GetLastError :: IO DWORD 

...

d <- c_GetLastError
appendFile "c:\\log.txt" (Text.Printf.printf "%d\n" (fromEnum d)) 
```

我发现，令我懊恼的是，当你按顺序运行你的操作时[`ERROR_INVALID_HANDLE`，`ERROR_ALREADY_EXISTS`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681382%28v=vs.85%29.aspx)它被抛出了。`appendFile`Phooey，在这里我以为我在做某事。

然而，这确实告诉我的是`StartServiceCtrlDispatcher`,`RegisterServiceCtrlHandler`和`SetServiceStatus` *并没有*设置错误代码。确实，我得到`ERROR_SUCCESS`了完全的希望。

## 分析

令人鼓舞的是，Windows 的任务管理器和系统日志将服务注册为`RUNNING`. 所以，假设等式的一部分确实有效，我们必须回到为什么我们的服务处理程序没有被正确命中。

检查这些行：

```
fpHandler <- handlerToFunPtr svcHandler
h <- c_RegisterServiceCtrlHandler (head args) fpHandler
_ <- setServiceStatus h running 
```

我试图`nullFunPtr`作为我的`fpHandler`. 令人鼓舞的是，这导致服务在该`START_PENDING`状态下挂起。好：这意味着`fpHandler`当我们注册服务时，实际上正在处理的内容。

然后，我尝试了这个：

```
t <- newTString "Foo"
h <- c_RegisterServiceCtrlHandler t fpHandler 
```

而这，不幸的是，采取了。但是，[这是预期的](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686001%28v=vs.85%29.aspx)：

> 如果使用服务类型安装`SERVICE_WIN32_OWN_PROCESS`服务，则忽略此成员，但不能为 NULL。此成员可以是空字符串 ("")。

根据我们的钩子`GetLastError`和从[`RegisterServiceCtrlHandler`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685054%28v=vs.85%29.aspx)和[`SetServiceStatus`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686241%28v=vs.85%29.aspx)（分别是有效的`SERVICE_STATUS_HANDLE`和`true`）的返回，根据系统，一切都很好。这不可能是正确的，而且为什么这不起作用也是完全不透明*的*。

## 当前的解决方法

因为不清楚您的声明`RegisterServiceCtrlHandler`是否有效工作，所以我建议[在您的服务运行时在调试器中询问您的代码的这个分支](http://msdn.microsoft.com/en-us/library/7a50syb3%28v=vs.80%29.aspx)，更重要的是，就这个问题与 Microsoft 联系。总而言之，您似乎已经正确地满足了所有功能依赖关系，系统返回了成功运行所需的所有内容，但是您的程序仍然进入未定义状态，看不到明确的补救措施。那是一个错误。

与此同时，一个可用的解决方法是使用 Haskell [FFI](http://www.haskell.org/haskellwiki/FFI_Introduction)以另一种语言（例如 C++）定义您的服务架构，并通过 (a) 将您的 Haskell 代码公开给您的服务层或 (b) 公开您的服务来挂钩您的代码Haskell 的代码。在这两种情况下，这里都是用于构建服务[的起始参考。](http://msdn.microsoft.com/en-us/library/windows/desktop/bb540475%28v=vs.85%29.aspx)

我希望我能在这里做得更多（老实说，我合法地尝试过），但即使是这么多也应该能极大地帮助你完成这项工作。

祝你好运。看起来您有相当多的人对您的结果感兴趣。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-11T18:04:51.063

我能够解决这个问题，并发布了一个关于 hackage 的库[Win32-services](http://hackage.haskell.org/package/Win32-services)，用于在 Haskell 中编写 Windows 服务应用程序。

解决方案是一起使用某些 Win32 调用组合，同时避免其他组合。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T21:22:47.167

用 C 语言编写与服务交互的部分，并使其调用用 Haskell 编写的 DLL 不是更容易吗？

# sql - Sql - 如何进行此查询

> ID：10037656
> 
> 赞同：0
> 
> 时间：2012-04-05T23:59:49.813
> 
> 标签：sql, sql-server-ce

我正在尝试查询**SQL Compact**

基本上是这些查询，但我希望我可以将它们合并为一个。

1.

```
SELECT schoolId,opponent 
FROM TEAM_SCHEDULE
WHERE seasonId = " & i & "
AND gameid = " & currentGame & "
ORDER BY id"

These are variables, trying to eliminate them at some point
currentMatch(0) = schoolId
currentMatch(1) = opponent 
```

2.

```
SELECT id
FROM player
WHERE school = " & currentMatch(0) & "
AND starter = 'TRUE'
AND game_id = " & currentGame & "
ORDER BY weight 
```

3.

```
SELECT id
FROM player
WHERE school = " & currentMatch(1) & "
AND starter = 'TRUE'
AND game_id = " & currentGame & "
ORDER BY weight 
```

我在想我可以做这样的事情，但我遇到了一个问题，试图弄清楚如何将这两个学校添加到查询中。

```
 cmd.CommandText = "SELECT b.id, player.id" &
                            " FROM player b" &
                            " WHERE player.school = " & currentMatch(0) &
                            " OR player.school = " & currentMatch(1) &
                            " INNER JOIN player" &
                            " ON b.weight = player.weight" &
                            " ORDER BY player.weight" 
```

为了希望消除任何困惑，我正在尝试：

1.  从 team_schedule、schoolId 和对手中选择 2 个学校（int）。
2.  从这两所学校中选择每个权重的所有初学者（'True'）。
3.  根据体重将每所学校的首发球员配对。
4.  能够选择每一对并操作数据。

感谢任何帮助！

这是来自您的查询 Nikola 的解析错误， ![错误](../Images/7bffbd190516b5b974807557ca19f537.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T00:32:14.787

这可能是您的查询。您可以多次声明同一个表，但您需要为每个表提供不同的别名。在这种情况下，玩家被列为 p1 和 p2 两次。玩家权重的匹配也在 join 部分完成，但可能在 where 子句中。

```
SELECT 
  schoolId,
  opponent, 
  p1.id Player1, 
  p1.Weight Player1Weight, 
  p2.id Player2, 
  p2.Weight Player2Weight
FROM TEAM_SCHEDULE
inner join player p1
   on TEAM_SCHEDULE.schoolId = p1.school
 and TEAM_SCHEDULE.GameID = p1.Game_id
 AND p1.starter = 'TRUE'
inner join player p2
   on TEAM_SCHEDULE.opponent = p2.school
  and TEAM_SCHEDULE.GameID = p2.Game_id
  AND p2.starter = 'TRUE'
-- tricky part - do weights match perfectly 
-- or do you need additional weight range table?
  AND p1.weight = p2.weight
WHERE TEAM_SCHEDULE.seasonId = " & i & "
AND TEAM_SCHEDULE.gameid = " & currentGame & "
ORDER BY id 
```

# c# - Silverlight、EF4、WCF RIA：不能将具有空 EntityKey 值的对象附加到对象上下文？

> ID：10037658
> 
> 赞同：0
> 
> 时间：2012-04-06T00:00:08.727
> 
> 标签：c#, silverlight, entity-framework, silverlight-4.0, wcf-ria-services

首先，我要感谢大家的努力和投入。Stack Overflow 一直是我的首选资源，我觉得我在这个论坛上学到的东西比我在大学的整个 4 年学到的还要多！

那么问题来了。我有一个使用 EF 和 WCF RIA 的 Silverlight 4 项目。在我的一个页面中，我通过 Ria Web 服务调用检索表的内容并将结果存储在`ObservableCollection<T>`

银光代码：

```
//class variables;
public ObservableCollection<Data> DataSource { get; set; }   //Data entity
public ApplicationDomainContext Context { get; set; } //Ria Service

...
EntityQuery<Data> query = this.Context.GetDatasQuery();
this.Context.Load(query, loadedCallBack =>
{
   if( loadedCallBack.HasError )
   {
       loadedCallBack.MarkErrorAsHandled();
       MessageBox.Show("Unable to retrieve the desired data...");
       return;
   }

   this.DataSource = new ObservableCollection<Data>(loadedCallback.Entities);
}

...
private void CreateUserAction()
{
    string userName = WebContext.Current.User.Name;
    this.Context.CreateUserAction(userName, this.DataSource, callBack =>
    {
        if(callBack.HasError)
        {
            callBack.MarkErrorAsHandled();
            MessageBox.Show("Error creating user action");
            return;
        }
    }
} 
```

服务代码：

```
public partial class ApplicationDomainService :  LinqToEntitiesDomainService<ApplicationDomainModel> 
{
    [Invoke]
    public void CreateUserAction(string userName, IEnumerable<Data> dataItems)
    {
        foreach(Data dataItem in dataItems)
        {
            if( dataItem.EntityState == EntityState.Detached )
            {
                this.ObjectContext.Attach(dataItem); //ERROR???
            }
        } 
    }
} 
```

所以代码执行到内部`if( dataItem.EntityState == EntityState.Detached)`并在我尝试附加对象时给我一个错误：

`An object with a null EntityKey value cannot be attached to an object context.`

有趣的是，我根本没有修改 Data 对象，它们确实带有一个 Id 和客户端上的所有其他内容。

如果有人能指出我做错的方向，我将不胜感激！！！

谢谢 `Martin, aka <bleepzter/>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T01:20:55.283

我还没有使用过最新版本的 RIA 和 EF，但您可能想尝试以下更改：

改变这个：

```
 this.ObjectContext.Attach(dataItem); 
```

对此：

```
 this.ObjectContext.Data.AttachAsModified(dataItem) 
```

根据您的设置，ObjectContext 上的数据可能是复数形式。

# php - preg_replace 排除“以”开头

> ID：10037660
> 
> 赞同：0
> 
> 时间：2012-04-06T00:00:15.303
> 
> 标签：php, regex, preg-replace

我有一个数组，其中的值可以由一个单词或多个创建短语的单词组成。这个数组的每个值也可以有 html 标签。我只想匹配不以 html 标记开头的那些并替换数组中的单词。

我正在寻找“如何”。

```
"how it's made" 
```

变成

```
"<b>how</b> it's made" 
```

尽管

```
<span style="somethig:value">how it's made</span> 
```

应该保持不变。

我试过这个

```
$words_result = preg_replace('/^(?!<span).*('.$word.')/', '<b>$1</b>', $words_result); 
```

但我总是得到混合结果，我不知道调试它。另外，我在处理正则表达式时总是遇到问题：D 例如，如果表达式匹配，对应的 $NI 应该使用什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T02:00:22.463

也许我在这里遗漏了一些东西，但似乎解决这个问题的一种简单方法就是检查尖括号的第一个字符：

```
$phrases = array(
    "how it's made",
    "another phrase",
    "<b>Eat the food, Tina!</b>",
    "<i>Fizz</i><u>buzz</u>"
);
foreach ($phrases as $index => $phrase) {
    if ($phrase[0] == '<')
        continue;
    $replacement = preg_replace('/^([A-Za-z0-9]+)/', '<b>$1</b>', $phrase);
    $phrases[$index] = $replacement;
} 
```

如果可能的话，我完全赞成避免过度设计。:)

**编辑：**删除伪代码并替换为真正的 PHP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T00:11:59.510

美元数字代表您添加的括号。$1 是它在正则表达式的第一个括号中捕获的任何内容，$2 是匹配第二个括号的内容，等等。在许多正则表达式引擎中，$0 将包含整个匹配项。因此，在这种情况下，您会发现您的第一个单词存储在 $1 中。

变量`$word`有什么值？替换`$word`为`\w+`和可能有效`.*`。`.*?`需要问号以使句号尽可能少地抓取符号以匹配整个术语（有关更多详细信息，请查看[此 Regex 参考](http://www.regular-expressions.info/reference.html "Reg Exp 参考")`*`并与进行比较`*?`）

编辑：根据您的评论，您的实际问题是您的正则表达式匹配从行首到您的单词的所有内容，并且您将*所有*这些替换为`<b>(word)</b>`. 您可以尝试将`.*`括号放入：`(.*)`，所以现在您将得到：`$1`包含单词*之前*的所有内容，并`$2`包含单词本身。然后制作替换字符串`'$1<b>$2</b>'`。

# svn - 在 Hudson 构建后承诺使用 Tortoise SVN？

> ID：10037661
> 
> 赞同：0
> 
> 时间：2012-04-06T00:00:35.923
> 
> 标签：svn, tortoisesvn, hudson

我发现了这个：[提交 hudson build artifact 的插件，](https://stackoverflow.com/questions/2446136/plugin-to-commit-hudson-build-artifact)但是在尝试了可以​​想象的每种设置组合约 5-6 小时后，我无法成功提交我们的 https'svn。

我正在考虑通过批处理文件执行此操作 - 但不知道是否可以隐藏密码......如果不是，那么这也不是一个真正的选择。

有人成功做到这一点吗？可以使用一些建议..谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T01:34:56.403

主要问题是 Tortoise 没有“真正的”SVN 命令行客户端。命令行几乎不能提交 - 它会打开一个窗口并提示输入更多信息。

你看过[Maven 发布插件](http://maven.apache.org/plugins/maven-release-plugin/)吗？您可以将它与 SVN 命令行（不是 Tortoise）一起使用。您可以加密[Maven 密码](http://maven.apache.org/guides/mini/guide-encryption.html)。虽然我已经成功地将这些用于 Nexus，但我还没有尝试使用它们来访问 SVN。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:17:46.780

我最终只是使用批处理脚本来检查我的目标文件夹，将文件复制到该文件夹​​，将它们添加到 SVN，然后提交文件。唯一的障碍是提供凭据。我的解决方案是登录到 Hudson 正在执行的机器并手动提交一次。这使我可以在构建服务器上加密“保存我的登录详细信息”。理想情况下，您应该使用受限访问帐户来执行此步骤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T17:38:18.053

我不会将 Subversion 构建的文件提交回 Subversion 存储库。那只是自找麻烦。一旦你向 Subversion 提交了一些东西，它就会永远留在那里。您永远无法删除过时的信息。

文本文件的更改并没有那么糟糕，因为它们的差异非常好，Subversion 以差异格式存储每个修订。但是，二进制文件并没有那么好区分。如果您的二进制输出大小为 500 Mb，则每次提交都会将 500 Mb 添加到您的 Subversion 存储库中。使用 Hudson 执行此操作，并在每次构建后执行此操作，您在不到一年的时间内谈论数百 GB 的数据——其中大部分将是您根本不需要的代码的过时版本.

使用 Hudson 本身来存储您的构建。构建过程中的步骤之一是*归档 Artifacts*。我只是使用我的构建文件将我想要存储的所有工件复制到一个`target/archive`目录中，然后让 Hudson 存储它。

我们将 Hudson 作业定义为*Delete Old Builds*，但将*Days to Keep*和*Maximum to Keep*留空。相反，我们单击*Advance*按钮并指定保留*Artifacts*的时间。这样，我们永远不会删除构建，但我们会在 Hudson 服务器上保留足够的空间。

在特定构建中，您可以单击*Keep this build forever*，它将保存工件而不是删除它们。这允许您保留已发布的工件，但仍会删除您不再感兴趣的日常构建内容。

您甚至可以使用`wget`或`curl`获取工件并部署它们。我们使用我们的部署脚本来做到这一点。

如果您想变得更高级（谁不想），请将您的构建工件放在 Maven 存储库中。即使您的构建过程不使用 Maven，您也可以这样做。同样，这会存储您的工件，但允许您删除和修剪您不想保留的工件。

If you really, really want to store your build artifacts in Subversion, you can do what you did with the `batch` file, and use `svn co` and `svn commit -m"Some sort of message %BUILD_NUMBER%"` commands to do it. However, once something is in your Subversion repository, it's very, very difficult to remove it. Be prepared to burn through gobs of diskspace.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-12T12:33:57.950

Try adding following piece of script in 'Execute shell' under configure.

```
echo "Committing build.number file to SVN.."
cd $APPROPRIATE_PATH

svn commit -m "some svn commit comment" MyApp/etc/build/build.number

echo "Build file committed " 

```

# spring - 我可以使用 PropertyPlaceholderConfigurer 在运行时替换 String 上的属性吗？

> ID：10037663
> 
> 赞同：2
> 
> 时间：2012-04-06T00:00:47.640
> 
> 标签：spring, ehcache

在我们的 Spring 配置的一个领域中，我们正在使用：

**应用上下文.xml**：

```
<bean class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean" lazy-init="true">
    <property name="configLocation" value="classpath:ehcache.xml"/>
</bean> 
```

但是，ehcache.xml 不是标准的 spring bean 配置文件，而是包含 ${ehcache.providerURL}，我们希望根据我们在其他地方使用 PropertyPlaceHolderConfigurer 配置的内容来替换它：

**ehcache.xml**：

```
<cacheManagerPeerProviderFactory
   ...
   providerURL=${ehcache.providerURL}
   ...
</cacheManagerPeerProviderFactory> 
```

我可以使用 Maven/profile/filter 组合，但这会创建一个特定于它正在构建的环境的构建。我真正想做的是在运行时预处理 ehcache.xml，根据 PropertyPlaceHolderConfigurer 读取的属性执行替换，然后将结果传递给 EhCacheManagerBean。

此时，我正在考虑以某种方式复制 @Value 注释背后的功能，因为它可以替换“bla bla bla ${property} bla bla bla”，除非我需要在从磁盘读取文件后执行此操作。

关于如何解决这个问题的任何想法？

谢谢。-AP_

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T20:44:13.840

要直接操作字符串，您可以使用 org.springframework.util.PropertyPlaceholderHelper

```
String template = "Key : ${key} value: ${value} "
PropertyPlaceholderHelper h = new PropertyPlaceholderHelper("${","}");
Properties p = new Properties(); 
p.setProperty("key","mykey");
p.setProperty("value","myvalue");
String out = h.replacePlaceholders(template,p); 
```

它用相应的属性值替换模板中的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T08:02:22.437

经过一番搜索，这是我想出的精髓。我将它打包成一个接受资源的工厂，并在将所有行替换为 ${propertyPlaceHolder} 与持有者的实际值后转换它。

```
 final ConfigurableListableBeanFactory
        factory =
            ((ConfigurableApplicationContext) applicationContext).getBeanFactory();

    String line = null;
    while ((line = reader.readLine()) != null) {
        try {
            final String
                result = factory.resolveEmbeddedValue(line);
            writer.println(result);
        }
        catch (final Exception e) {
            log.error("Exception received while processing: " + line, e);
            throw e;
        }
    } 
```

这个解决方案的好处是它使用了与 Spring 用于解析 @Value("${fooBar}") 注释相同的工具。这意味着您可以使用 SpEL 以及 Spring 通常在 @Value 注释中接受的任何其他内容。它还与 PropertyPlaceholderConfigurer 集成。

希望这可以帮助某人。

-AP_

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T00:57:07.297

PropertyPlaceholderConfigurer 用于替换 Spring 配置文件中的属性。它不会替换外部文件中的属性。PropertyPlaceholderConfigurer 无法解决您的问题。

在创建 CacheManager 之前，您可以覆盖`org.springframework.cache.ehcache.EhCacheManagerFactoryBean.afterPropertiesSet()`方法并使用 xml 做任何您想做的事情。您知道它有多干净 :)

# actionscript-3 - Flex 绑定到名为 private var arial:String 的嵌入 Arial 字体变量？

> ID：10037665
> 
> 赞同：1
> 
> 时间：2012-04-06T00:01:03.090
> 
> 标签：actionscript-3, apache-flex

我像这样嵌入到我的应用程序中：

```
[Embed(source="/assets/arial.ttf", fontName="Arial")]
private const arial:String; 
```

Flex 错误如下：

警告：为 mx.core::UITextField (UITextField75) 指定了不兼容的嵌入字体“Arial”。此组件要求使用 embedAsCFF=false 声明嵌入字体。

将上述内容更改为 private const embArial:String; 摆脱错误。为什么是这样？对此的解释的内部原理是什么？

更改字体名称无法解决。将变量更改为 Arial:String 确实可以解决。更改为 arial:Class 无法解决。很奇特。它似乎绑定到变量名 arial。

没有任何关于字体的教程或规范真正解决当字体嵌入绑定到变量时会发生什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T04:15:53.200

如果您的组件是 MX (Halo)，您希望 embedAsCFF 为 false。

对于 Spark 组件，您可以嵌入 AsCFF: true。

CSS实现：

火花示例：

```
@字体脸
{
    font-family: "万维网专业版";
    src: url("./assets/fonts/MyriadWebPro.ttf");
    字体粗细：正常；
    嵌入AsCFF：真；/*火花*/
    高级抗锯齿：真；
    unicode范围：
        U+0041-U+005A, /* 大写 [A..Z] */
        U+0061-U+007A, /* 小写 az */
        U+0030-U+003F, /* 数字 [0..9] */
        U+0020-U+002F, /* 空格+标点符号 [ !"#$%&'()*+,-./ ] */
        U+003A-U+0040；/* 特殊字符 [ :;?@ ] */
}

```

MX 光环示例：

```
@字体脸
{
    font-family: "万维网专业版";
    src: url("./assets/fonts/MyriadWebPro.ttf");
    字体粗细：正常；
    嵌入AsCFF：假；/* 光环 */
    高级抗锯齿：真；
    unicode范围：
        U+0041-U+005A, /* 大写 [A..Z] */
        U+0061-U+007A, /* 小写 az */
        U+0030-U+003F, /* 数字 [0..9] */
        U+0020-U+002F, /* 空格+标点符号 [ !"#$%&'()*+,-./ ] */
        U+003A-U+0040；/* 特殊字符 [ :;?@ ] */
}

```

使用 Flex，我发现使用 CSS 处理字体更容易。只需在您的主应用程序中链接您的样式表：

```
<!--- CSS style -->
<fx:Style source="assets/css/common.css" /> 
```

如果你喜欢嵌入，它应该是`Class`转码类型。

嵌入实现：

```
 [Embed(systemFont = "Arial", fontWeight = "Regular", fontName = "Arial", mimeType = "application/x-font", embedAsCFF = "false", unicodeRange = "U+0020-U+002F,U+0030-U+0039,U+003A-U+0040,U+0041-U+005A,U+005B-U+0060,U+0061-U+007A,U+007B-U+007E,U+00A1-U+00A1,U+00A3-U+00A3,U+00A9-U+00A9,U+00AE-U+00AE,U+00B0-U+00B0,U+00BC-U+00BE,U+00BF-U+00BF,U+00C0-U+00FF,U+2013-U+2014,U+2018-U+2019,U+201C-U+201D,U+2022-U+2023,U+2120-U+2120,U+2122-U+2122")]
    private static const Arial:Class; 
```

在您的嵌入中，分别为 Spark 或 MX Halo 组件添加`embedAsCFF=true`或。`embedAsCFF=false`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T02:09:27.997

此[Adob​​e 页面具有](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7f5f.html#WS2db454920e96a9e51e63e3d11c0bf6320a-7ffa)使用元数据在 Actionscript 中嵌入字体所需的语法（注意，您也可以使用 CSS 嵌入字体）。

# php - 在上一页将变量添加到（指定文本字段）

> ID：10037667
> 
> 赞同：2
> 
> 时间：2012-04-06T00:01:19.193
> 
> 标签：php, javascript, jquery, html

我一直在寻找一种方法来从上一页的变量中添加信息（字符串）。

据我所知，这应该可以以某种方式使用 javascript。

**新**的不能让旧的正常工作..

```
<script type="text/javascript">
function newPopup(url) {
    popupWindow = window.open(
        url,'popUpWindow','height=510,width=350,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes')
}
</script>
<a href="JavaScript:newPopup('(url)');">Armory Avatar</a> 
```

我有一段代码可以将链接打开到一个新的弹出窗口（它会记住上一页的 url）。在这个窗口中，人们可以插入一些关于 WoW 角色和这个角色所在领域的信息。在他们执行此操作并点击提交后，该站点会显示从暴雪军械库中检索到的头像的 URL。

[http://eu.battle.net/static-render/eu/(图像路径)](http://eu.battle.net/static-render/eu/(imagepath))

弹出页面的代码：**更新了当前代码 (7-4-2012)**

```
 <?php
if (!isset($_POST['submit'])) { 
?>
<!-- The fill in form -->
<html>
<head>
<title>Armory Avatar</title>
</head>
<body>
<form method="post" action="<?php echo $PHP_SELF;?>">
Character Name:<input type="text" size="12" maxlength="50" name="cname"><br />
Realm Name:
<select name="rname">
<optgroup label="English Realms">
<option value="aerie-peak">Aerie-Peak</option>
<option value="agamaggan">Agamaggan</option>
<option value="aggramar">Aggramar</option>
etc etc etc.
</optgroup>
</select><br />
<input type="submit" value="submit" name="submit">
</form>
<?php
} else {  //If form is submitted execute this

    $charname = $_POST["cname"]; //input character name
    $realmname = $_POST["rname"]; //input realm name

    $charurl = urlencode(utf8_encode($charname)); //prepares character name for url usage
    $realmurl = 'http://eu.battle.net/api/wow/character/'.$realmname.'/';  //combines the basic url link with the realm name
    $toon = $realmurl.$charurl; //adds the charactername behind the realm url
    $data = @file_get_contents($toon); //retrieves the data from the armory api
        if ($data) {
            // if armory data is found execute this 

            $obj = json_decode($data); //converts the data from json to be used in the php code ?>
            <img src='http://eu.battle.net/static-render/eu/<?php echo $obj->thumbnail; ?>'> </img><br /> <?php //Is url link to image 
            $armoryname = utf8_decode($obj->name); //makes the name readable again
            echo "Name: " . $armoryname . "<br />";  //character name
            echo "Level: " . $obj->level . "<br />";  //character level
            echo "Achievement Points : " . $obj->achievementPoints . "<br />"; //Achievement Points
            if ( $obj->gender == 1 ){  //Deteremines the gender of the character
                echo "Gender : Female <br />" ;  //displays gender as female
            }else{
                echo "Gender : Male <br />" ; //dispalays gender as male
            } 
            $image = "http://eu.battle.net/static-render/eu/".$obj->thumbnail;
            ?>
            Image: <a href='http://eu.battle.net/static-render/eu/<?php echo $obj->thumbnail; ?>'> http://eu.battle.net/static-render/eu/<?php echo $obj->thumbnail; ?></a><br /> 

            <!--Button submit code-->

            <script type="text/javascript">
            $('button.cancel_link').click(function() {

            // Change the value of the input with an ID of 'avatarurl'
            // with the dynamic value given to you by the external JSON link

            window.opener.getElementById('avatarurl').value = '<?php echo $image; ?>';

            });
            </script>
            <input> <!-- The button here -->

        <?php   

        }
        else { // if armory data is not found execute this  ?>

            error code stuf
        }
}
?> 
```

现在我需要这行代码：

$image = " [http://eu.battle.net/static-render/eu/](http://eu.battle.net/static-render/eu/) ".$obj->thumbnail;

当窗口关闭或简单地通过点击另一个提交按钮时返回（最好在关闭按钮上发生）。当其中任何一个发生时，它需要将其插入到这个字符串中：

```
<input type="text" class="textbox" name="avatarurl" size="25" maxlength="100" value="{$avatarurl}" /></td> 
```

texbox 称为 avatarurl。

希望你们中的任何人都知道如何修改或创建为您执行此操作的 javascript。由于我的 php 已经受到严重限制，而且我的 javascript 知识几乎没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T00:13:30.037

您需要修改关闭弹出窗口的方式。尝试这样的事情：

```
// When a BUTTON with the class name 'cancel_link'
// is clicked, it activates the following

$('button.cancel_link').click(function() {

   // Change the value of the input with an ID of 'avatarurl'
   // with the dynamic value given to you by the external JSON link

   window.opener.getElementById('avatarurl').value = '<?php echo $image; ?>';

}); 
```

您需要确保关闭链接`cancel_link`的类名是其类名，并且父文档中的输入元素的 id 为`avatarurl`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T14:20:38.653

因此，在尝试搜索并感谢@Jamie 之后，我知道该去哪里找。

我找到了[http://www.codingforums.com/showthread.php?t=213298](http://www.codingforums.com/showthread.php?t=213298) 这终于奏效了。

在打开它的 php 页面上，我添加了：

```
<script type="text/javascript">

function open_pop(){
window.open('armory.php','AvatarArmory','height=510,width=350,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes')
}
</script>
<html>
.....
<input type="button" value = "OpenArmory" onClick="open_pop()" /> 
```

并添加`id="blogbox"`到文本框的输入中。

```
<input type="text" class="textbox" name="avatarurl" size="45" value="{$avatarurl}" id="blogbox"/> 
```

在 armoury.php 页面上，我使用 javascrip 函数添加了这个按钮：

```
<script type="text/javascript">

            function pops(avatar){
            textcontent=opener.document.getElementById("blogbox").value;
            opener.document.getElementById("blogbox").value = textcontent + " " + avatar;
            }
            </script>
            <input type="button" value = "Insert Avatar.." onClick="pops('<?php echo $image; ?>');window.close()" /> 
```

这非常有效。

谢谢杰米的帮助。

# ruby-on-rails - Rails::Engine 路由未在生产环境中加载

> ID：10037672
> 
> 赞同：4
> 
> 时间：2012-04-06T00:02:02.460
> 
> 标签：ruby-on-rails, routes, mount, rails-engines

我遇到了一个非常奇怪的问题，即我的路线在开发模式下运行良好，但在生产中却不行。

我的大部分应用程序都包含在一个引擎中，该引擎被加载到主应用程序中，主应用程序的路由文件像这样开始......

```
SandersteadParish::Application.routes.draw do
  mount Cms::Engine => "/cms" 
```

我在引擎中的路由文件的前几行看起来像这样......

```
Cms::Engine.routes.draw do
  scope '(groups/:group_id)' do
  resources :pages do
    resources :widgets
      collection do
      post :layout, :add_panel, :split_panel
    end
  end 
```

如果我运行 RAILS_ENV=development rails server，路由工作正常，但如果我运行 RAILS_ENV=production，它们不会被加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-22T15:49:58.263

当您添加添加引擎时，默认情况下是“隔离的”，这意味着需要使用引擎范围访问它的所有路由，例如`Cms.pages_path`您可以在此处找到更多信息[http://edgeguides.rubyonrails.org/engines.html#routes](http://edgeguides.rubyonrails.org/engines.html#routes)

# ios - 如何检测有人在 UIImageView 之外点击

> ID：10037679
> 
> 赞同：4
> 
> 时间：2012-04-06T00:02:21.110
> 
> 标签：ios, uigesturerecognizer, uitouch

我有一个作为子视图添加的 UIImageView。它在按下按钮时显示。

当有人在应用程序的任何部分中的 UIImageView 之外点击时，我希望 UIImageView 消失。

```
@interface SomeMasterViewController : UITableViewController <clip>

<clip>

@property (strong, nonatomic) UIImageView *someImageView; 
```

stackoverflow 和 Apple 的文档中有一些提示听起来像是我需要的。

*   [Apple 的：手势识别器](https://web.archive.org/web/20121126095610/http://developer.apple.com/library/iOS/documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizers/GestureRecognizers.html)
*   [苹果的：UIView hitTest:withEvent](https://developer.apple.com/documentation/uikit/uiview)
*   [Apple 的：UITouch 类参考](https://developer.apple.com/documentation/uikit/uitouch)
*   [Stackoverflow：与 UIGestureRecognizer 一起监听 UITouch 事件](https://stackoverflow.com/questions/9780022/listening-to-uitouch-event-along-with-uigesturerecognizer)
*   [（不太可能需要，但是..） - CGRectContainsPoint，如以下标题为：将 UITouch 位置与 UIImageView 矩形进行比较](https://stackoverflow.com/questions/2221367/comparing-a-uitouch-location-to-uiimageview-rectangle)

但是，我想在这里检查我的方法。我的理解是代码需要

1.  注册一个 UITapGestureRecognizer 以获取应用程序中可能发生的所有触摸事件

2.  UITapGestureRecognizer 应该将其 cancelsTouchesInView 和 delaysTouchesBegan 和 delaysTouchesEnded 设置为 NO。

3.  将这些触摸事件与 someImageView 进行比较（如何？使用 UIView hitTest:withEvent？）

更新：我正在向主 UIWindow 注册一个 UITapGestureRecognizer。

**最终未解决的部分**

我有一个 UITapGestureRecognizer 将调用的 handleTap:(UITapGestureRecognizer *)。如何获取给定的 UITapGestureRecognizer 并查看点击是否落在 UIImageView 之外？识别器的 locationInView 看起来很有希望，但我没有得到我期望的结果。我希望在单击某个 UIImageView 时看到它，而在单击另一个位置时看不到 UIImageView。我感觉**locationInView**方法使用错误。

这是我对 locationInView 方法的调用：

```
- (void)handleTap:(UITapGestureRecognizer *)gestureRecognizer
{
    if (gestureRecognizer.state != UIGestureRecognizerStateEnded) {
        NSLog(@"handleTap NOT given UIGestureRecognizerStateEnded so nothing more to do");
        return;        
    }

    UIWindow *mainWindow = [[[UIApplication sharedApplication] delegate] window];
    CGPoint point = [gestureRecognizer locationInView:mainWindow];
    NSLog(@"point x,y computed as the location in a given view is %f %f", point.x, point.y);

    UIView *touchedView = [mainWindow hitTest:point withEvent:nil];
    NSLog(@"touchedView = %@", touchedView); 
} 
```

我得到以下输出：

```
<clip>point x,y computed as the location in a given view is 0.000000 0.000000

<clip>touchedView = <UIWindow: 0x8c4e530; frame = (0 0; 768 1024); opaque = NO; autoresize = RM+BM; layer = <UIWindowLayer: 0x8c4c940>> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T08:37:54.547

我*想*你可以说`[event touchesForView:<image view>]`。如果返回一个空数组，则关闭图像视图。在表格视图控制器中执行此`touchesBegan:withEvent:`操作，并确保调用`[super touchesBegan:touches withEvent:event]`，否则您的表格视图将完全停止工作。您甚至可能不需要实现`touchesEnded:/Cancelled:...`, 或`touchesMoved:...`.

在这种情况下，UITapGestureRecognizer 绝对看起来有点矫枉过正。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T08:28:56.613

您可以使用触摸功能来做到这一点：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event; 
```

当用户首先触摸屏幕时，您的 touchBegan 函数会被调用。

联系开始：

```
 -(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{

    CGPoint pt = [[touches anyObject] locationInView:self]; 
} 
```

所以你有用户触摸的点。那么你必须发现这个点是否在你的 UIImageView 中。

但是如果你可以给你的 UIImageViews 标签。这将非常容易。

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{

      UITouch *touch = [touches anyObject ];

      if( yourImageView.tag==[touch view].tag){

         [[self.view viewWithTag:yourImageView.tag] removeFromSuperView];
         [yourImageView release];

      }
} 
```

# java - BlueCove 蓝牙设备发现

> ID：10037682
> 
> 赞同：3
> 
> 时间：2012-04-06T00:02:31.307
> 
> 标签：java, bluetooth, jsr82

我已经为[BlueCove 2.1.1](http://snapshot.bluecove.org/bluecove/apidocs/overview-summary.html#DeviceDiscovery)构建并运行了 RemoteDeviceDiscovery 示例项目。该程序将发现所有可发现的蓝牙设备，但它也会在 deviceDiscovered() 中报告曾经配对过的设备。

有没有办法只发现你周围的设备（比如在 Android 中）？下面的代码返回发现的设备和配对的设备...

```
public void deviceDiscovered(RemoteDevice btDevice, DeviceClass cod) {
            System.out.println("Device " + btDevice.getBluetoothAddress() + " found");
            devicesDiscovered.addElement(btDevice);
            try {
                System.out.println("     name " + btDevice.getFriendlyName(false));
            } catch (IOException cantGetDeviceName) {
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-13T13:10:44.687

是的 - 使用[http://bluecove.org/bluecove/apidocs/javax/bluetooth/RemoteDevice.html#isTrustedDevice()](http://bluecove.org/bluecove/apidocs/javax/bluetooth/RemoteDevice.html#isTrustedDevice())过滤未配对的设备（或配对设备，如果您愿意）。

# foursquare - FourSquare 场地搜索限制参数上限为 20？

> ID：10037683
> 
> 赞同：1
> 
> 时间：2012-04-06T00:02:38.133
> 
> 标签：foursquare

foursquare[场地搜索 api 文档](https://developer.foursquare.com/docs/venues/search)指出限制参数可以达到 50，但如果我将其设置为 50，我只能得到 20 个结果。我知道我正确使用了 api，因为如果我将限制设置为 5，我会得到 5 个结果。为了获得 50 个结果，我需要做些什么特别的事情吗？

作为参考，这是我正在使用的网址：

```
https://api.foursquare.com/v2/venues/search?ll=' + latlong + '&client_id=myclientid&client_secret=myclientsecret&v=20120214&limit=50 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T21:27:22.143

在我开始查看结果之前，我发现在我的代码的另一部分中删除了所有超过 20 的场所。所以这完全是用户错误。哎呀！

# android - Fedora 16 上 Eclipse 中的 Android SDK 和 AVD 管理器 - 没有关闭窗口按钮

> ID：10037687
> 
> 赞同：5
> 
> 时间：2012-04-06T00:03:13.050
> 
> 标签：android, eclipse, android-2.2-froyo

我已经安装了 Android SDK 和所有相关的 Eclipse 插件，以及所需的 GWT。所有安装报告成功。

但是，当我转到 SDK 管理器或 AVD 管理器时，当窗口弹出时，它缺少一个关闭窗口按钮，我无法关闭它或返回 Eclipse 主程序。然后我必须找到 Eclipse 顶级 PID`ps aux | grep eclipse`并终止该进程。

更新：我正在使用 GNOME-Shell。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:40:30.507

这是 GNOME 中的一个问题。一旦我切换到 KDE，问题就消失了。

# entity-framework - 如何将继承鉴别器映射为实体框架中的复合键？

> ID：10037688
> 
> 赞同：7
> 
> 时间：2012-04-06T00:03:34.827
> 
> 标签：entity-framework

是否可以使用父键和鉴别器值映射一对一的关系？我知道代码首先不喜欢具体类上的鉴别器属性，并且只在 Map 方法中引用它。

```
FlightTypes { Inbound = 1, Outbound = 2} 

public class Transaction
- int TransactionId
- int? InboundFlightId
- InboundTransactionFlight InboundFlight
- int? OutboundFlightId
- OutboundTransactionFlight OutboundFlight

public abstract class TransactionFlight
- TransactionFlightId

public class InboundTransactionFlight : Flight
- List<Transaction> InboundFor

public class OutboundTransactionFlight : Flight
- List<Transaction> OutboundFor

Entity<InboundTransactionFlight>().Map(m => m.Requires("FlightTypeId").HasValue(1));        
Entity<OutboundTransactionFlight>().Map(m => m.Requires("FlightTypeId").HasValue(2)); 
```

/ ***这是当前生成的*** /

```
CREATE TABLE Transactions (
    TransactionId    int NOT NULL,
    InboundFlightId  int NULL,
    OutboundFlightId int NULL
)

CREATE TABLE TransactionFlights (
    TransactionFlightId int NOT NULL,
    FlightTypeId        int NOT NULL,
    ...
    CONSTRAINT PK_TransactionFlights PRIMARY KEY CLUSTERED ( TransactionFlightId )
) 
```

/ *** 是否可以生成/映射 this 并保持继承？*** /

```
CREATE TABLE Transactions (
    TransactionId    int NOT NULL,
)

CREATE TABLE TransactionFlights (
    TransactionId int NOT NULL,
    FlightTypeId  int NOT NULL,
    ...
    CONSTRAINT PK_TransactionFlights PRIMARY KEY CLUSTERED ( TransactionId, FlightTypeId )
) 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T08:19:19.293

据我所知，这是不可能的，因为 EF 不允许在任何其他映射中使用鉴别器列。此外，您的目标映射将要求您的事务类也具有`FlightTypeId`属性（类必须具有整个键的属性）但它会破坏继承的含义，因为您将能够更改该属性的值并使您的继承不一致。

# java - Eclipse：如何提示用户选择一个应用程序来打开文件？

> ID：10037694
> 
> 赞同：11
> 
> 时间：2012-04-06T00:04:39.123
> 
> 标签：java, eclipse, eclipse-plugin

我想从 Eclipse 打开任意文件。目前我正在这样做：

```
if (((File) selectedElement).isFile()) {
    try {
            Desktop.getDesktop().open((File) selectedElement);
    } catch (IOException e) {
        //TODO prompt for the appropriate application to open this file.
        e.printStackTrace();
    }
} 
```

不幸的是，这仅在操作系统具有与文件类型关联的默认应用程序时才有效。这就是为什么，如果没有定义任何默认应用程序，我想问用户我应该使用哪个应用程序。但我不知道如何 1）找到可用应用程序的列表和 2）使用该应用程序打开文件。任何提示如何以独立于平台的方式实现它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T19:28:10.030

我能想到的任何解决方案都取决于操作系统。例如，如果您的应用程序在 Windows 中运行，您可以为用户提供*Program Files 文件*夹中所有 *.exe 文件的列表。或 /bin、/sbin、/usr/bin、/usr/share/bin 中的所有应用程序（对于 linux 操作系统）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T00:44:51.100

已经有另一个线程被标记为已解决，请查看：[Open WITH dialog in Java](https://stackoverflow.com/questions/1238991/open-with-dialog-in-java)

# actionscript-3 - 在 soundcloud 上更新播放列表时指定曲目的问题

> ID：10037696
> 
> 赞同：2
> 
> 时间：2012-04-06T00:05:48.230
> 
> 标签：actionscript-3, apache-flex, soundcloud, urlrequest

我正在使用 Soundcloud AS3 库来构建应用程序。我能够为用户创建/获取所有播放列表。但是在更新现有播放列表时，我不明白我可以指定要放入该播放列表的曲目 ID 的语法。基本上，我正在尝试这样的事情：

```
var params:Object = {};
            params["playlist[id]"] = "1822522";
            params["playlist[title]"] = "Set 3";
            params["playlist[tracks][][id]"] = '41938358';
            params["playlist[tracks][][id]"] = '41938359';
            params["playlist[tracks][][id]"] = '41937715';

            playlistID = '1822522';

            var delegate:SoundcloudDelegate = soundcloudClient.sendRequest("playlists/" + playlistID, URLRequestMethod.POST, params); 
```

在文档中，它说请求（对于 curl）必须是这样的：

```
curl -X PUT "https://api.soundcloud.com/playlists/98866.json" \
       -F 'oauth_token=A_VALID_TOKEN' \
       -F 'playlist[tracks][][id]=222'\
       -F 'playlist[tracks][][id]=333'\
       -F 'playlist[tracks][][id]=444'\
       -F 'playlist[tracks][][id]=555' 
```

如何创建我的播放列表参数以发出正确的请求。

PS-41938358 等是我的曲目 ID。

编辑 - 在创建播放列表时，如果我只是传递播放列表的名称+描述，它就可以正常工作。但是，如果我必须传递轨道 ID 列表，由于我的语法错误，我不能这样做。

# asynchronous - 异步中毒——我不能是唯一的受害者

> ID：10037697
> 
> 赞同：6
> 
> 时间：2012-04-06T00:06:05.967
> 
> 标签：asynchronous

还记得 C++ 中的“const 中毒”，当你将一个方法标记为`const`，然后你意识到你必须标记它调用的所有方法`const`，然后标记它们调用的所有方法，等等？

我在Javascript中遇到了异步中毒问题，尽管我认为这无关紧要，尽管它是向上传播而不是向下传播。当一个函数可能调用一个异步函数时，它本身必须被重写为异步的，然后所有调用它的函数都必须是等等。

我在这里没有一个格式正确的问题（对不起，mods），但我希望有人有（a）建议或（b）可能有（a）的参考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T03:37:24.307

这不是一个坏问题。然而，有几种方法可以完全破坏你的控制流。注意：我没说它漂亮。

假设您有对象 A、B、C 和 D，`A.Amethod`不返回任何内容并调用 B 的方法`getBData`，B 调用`getCData`C 的方法，问题是 C 调用 D 类似这样

```
var data = D.getRawData();
... something to be done with data ...
... something else to be done with data... 
```

现在它必须写成

```
D.getData(function(data){
  ... something to be done with data ...
  ... something else to be done with data...  
}); 
```

好吧，你总是可以为你的每个方法添加一个回调参数，这样对于代码，以前的代码看起来像：

```
 var A = {  
//I'm not recommending coding like this, just for demonstration purposes.
 ...
    Amethod: function(x,y,z){
        var somethingForA = this.B.getBData(1,2,3);
        astatement1;
        astatement2;
        ...
     }
  ...
  }    
  //end of A
  ...
 var B = {  
 ...
    Bmethod: function(x,y,z){
        var somethingForB = this.C.getCData(1,2,3);
        bstatement1;
        var somethingFromB = bstatement2;
        return somethingFromB;
     }
  ...
  }    
  //end of B
  ...
 var C = {  
 ...
    Cmethod: function(x,y,z){
        var somethingForC =  this.D.getRawData(1,2,3)
        cstatement1;
        var somethingFromC = cstatement2;
        return somethingFromC;
     }
  ...
  }    
  //end of C
  ... 
```

你现在有：

```
 var A = {  
  ...
    Amethod: function(x,y,z){
        this.B.getBData((1,2,3,function(somethingForA){
            astatement1;
            astatement2;
        });
        ...
     }
  ...
  }    
  //end of A
  ...
 var B = {  
 ...
    Bmethod: function(x,y,z,callback){
        this.C.getCData(1,2,3,function(somethingForB){
          bstatement1;
          var somethingFromB = bstatement2;
           callback(somethingFromB);
        });
        ...
     }
  ...
  }    
  //end of B
  ...
 var C = {  
 ...
    Cmethod: function(x,y,z,callback){
        this.D.getRawData(1,2,3,function(somethingForC) {
           cstatement1;
           var somethingFromC = cstatement2;
           callback(somethingFromC);
        });
     }
  ...
  }    
  //end of C
  ... 
```

这几乎是一个简单的重构，使用匿名函数来实现保持控制流的所有功能。我不知道那将是多么真实的转换。您可能需要对变量范围进行一些调整。显然，它不是那么漂亮。

还有其他方法吗？当然。如您所见，上面的代码很混乱，我们希望不要编写混乱的代码。混乱程度取决于上下文。

您不必传递回调参数，任何必要的回调都可以预先传递给对象，或者它可以作为参数*中*的一项传递。回调可能不需要直接调用，而是使用可用的各种事件处理方法之一间接调用（您必须查看您可能想要使用哪些库），并且可以在何时传入数据事件被触发。或者，也许有一个全局“DataGetter”，A 可以在“获取”数据时注册回调，以完全避开中介 B 和 C。

最后，需要考虑的是，如果您在调用中深陷其中只是为了发现您需要一些只能异步获得的东西，并且数据必须向上传递命令链，那么您可能会在以下方面做一些倒退的事情哪些对象应该控制程序逻辑的流程（不过，我真的很困惑如何描述为什么我认为这种情况是有问题的。）。我倾向于认为，由于 A 的实例必须包含 B 的实例，B 包含 C 的实例等，因此创建子实例作为其组合的一部分的实例应该对子实例的填充方式有一定程度的控制他们自己，而不是让子实例完全决定....如果这有意义:-(

在这一点上，我觉得我有点漫不经心……希望有人能比我更好地解释这些问题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-02T19:26:55.227

到目前为止我见过的最好的解决方案是[promises](http://en.wikipedia.org/wiki/Futures_and_promises)。当然，所有发生的事情都是用异步中毒换取 Promise 中毒（因为任何依赖于 Promise 本身的计算都必须返回一个 Promise，但 Promise 比回调更灵活、更强大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T01:09:10.223

如果问题是 b() 应该阻塞直到完成但调用异步 a()，那么也许来自 a() 的回调可以设置一个标志，并且 b() 监视该标志。如果 a() 不提供回调，那么一旦 a() 完成，某处的值可能会发生变化。

# html - 在 HTML5 的段落中放置列表的正确方法是什么？

> ID：10037703
> 
> 赞同：16
> 
> 时间：2012-04-06T00:07:27.840
> 
> 标签：html, html-lists

`<p>`我得到了关于为什么元素不能包含元素的技术解释`<ul>`。不幸的是，当这是内容的结构时，这对我没有帮助。

在元中，我都不了解

*   语义解释，也不
*   推荐的结构

对于我实际上想要显示带有正常内容的“内联”项目列表的情况。

[此页面](http://developers.whatwg.org/grouping-content.html)建议将列表与段落分开：

```
<p>For instance, this fantastic sentence has bullets relating to</p>
<ul>
 <li>wizards,
 <li>faster-than-light travel, and
 <li>telepathy,
</ul>
<p>and is further discussed below.</p> 
```

或使用段落的替代标签：

```
<div>For instance, this fantastic sentence has bullets relating to
<ul>
 <li>wizards,
 <li>faster-than-light travel, and
 <li>telepathy,
</ul>
and is further discussed below.</div> 
```

但是这两个让我觉得是可怕的骇客，是对 HTML5 所谓的语义内容的嘲弄。

在第一种情况下，`<p>`标签在语义上有何意义？更不用说如果我想消除列表周围的间距（然后如果我有其他真正是单独的内容块的列表 - 哦！）

在第二种情况下，如果我需要一个`<div>`表示“这是一段内容”的意思，我不妨`<p>`完全放弃，而不是根据段落中出现的内容来回切换。

ISTM 认为最具语义意义的版本可能是这样的：

```
<p>For instance, this fantastic sentence has bullets relating to
 <span class="li">wizards,</span>
 <span class="li">faster-than-light travel, and</span>
 <span class="li">telepathy,</span>
and is further discussed below.</p> 
```

将跨度设置为块或列表项（谁知道还有哪些其他调整）以获得正确的渲染。实际上，这听起来非常令人恼火。

渲染此类内容有什么好的建议吗？

*编辑*

看起来，这实际上并不是那么难以设计。我不确定是否有办法获取所有浏览器默认设置，但我可以复制默认列表样式（至少在 OS X Chrome 上）：

```
span.li {
  display: list-item;
  list-style-type: disc;
  margin-left: 40px;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T00:28:24.827

对我来说，这是一个列表炎的例子，或者将每一个事物序列都视为一个需要标记的列表。

我的第一种方法是将您拥有的内容标记为：

```
<p>For instance, this fantastic sentence has bullets relating to wizards, 
faster-than-light travel, and telepathy, and is further discussed below.</p> 
```

如果您需要对这些项目应用通用样式，那么适当的样式挂钩`<span>`就像您在最后一个示例中所使用的那样。不过，我不会`li`用作类名；每个文本片段是否构成一个列表项并不是很有意义。在不了解页面的整体内容以及它在上下文中的使用方式的情况下，总是很难选择正确的类名，但这可能`topic`是一个合适的选择。所以加价变成

```
<p>For instance, this fantastic sentence has bullets relating to <span
class="topic">wizards</span>, <span class="topic">faster-than-light 
travel</span>, and <span class="topic">telepathy</span>, and is further 
discussed below.</p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T00:32:49.700

在我看来，如果您正在使用 a`ul`或者`ol`您正在有效地结束它之前的段落（或其他元素），除非您正在嵌套列表。如果它真的是一个句子并且这些项目是内联的（并且在你提议的情况下，我认为所有这些都是一个句子），那么我只需将它们列在`<p>`逗号作为分隔符中：

```
<p>For instance, this fantastic sentence has bullets relating to:
wizards, faster-than-light travel, and telepathy,
and is further discussed below.</p> 
```

如果你真的想要项目符号，也许标题会更合适：

```
<h2>For instance, this fantastic heading has bullets relating to:</h2>
<ul>
 <li>wizards,
 <li>faster-than-light travel, and
 <li>telepathy,
</ul> 
```

# ruby-on-rails - 载波 + RSpec 测试

> ID：10037705
> 
> 赞同：3
> 
> 时间：2012-04-06T00:07:39.330
> 
> 标签：ruby-on-rails, carrierwave

我正在通过设置测试我的文件上传对于带有 RSpec 的模型是否正确`Model#filename = File.open(etc)`

当我的规格运行时，一切都很好。但是测试套件完成后，这些文件仍然保留在我的 public/uploads 目录中。

如何在运行结束时将文件与记录一起删除？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T06:37:42.810

[https://github.com/jnicklas/carrierwave/wiki/How-to:-Cleanup-after-your-Rspec-tests](https://github.com/jnicklas/carrierwave/wiki/How-to:-Cleanup-after-your-Rspec-tests)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-14T03:34:30.030

一种方法是在测试结束时使用carrierwave公开的实例方法删除它们。您的实例`@user`和您的carrierwave文件属性的示例`avatar`是：`@user.remove_avatar!`

# ruby-on-rails - 销售点和库存数据库架构

> ID：10037710
> 
> 赞同：17
> 
> 时间：2012-04-06T00:08:14.967
> 
> 标签：ruby-on-rails, database-design, point-of-sale, inventory

我正在尝试创建一个*基本*的销售点和库存管理系统。

需要考虑的一些事项：

*   整个系统中的产品始终是相同的（相同的 ID），但每个位置的库存（每个产品的可销售单位）是唯一的。位置 Y 和 Z 可能都有产品 X 的待售单位，但例如，如果从位置 Y 出售两个单位，则位置 Z 的库存不应该受到影响。**它的**库存单位仍然完好无损。
*   从位置 Y 销售一 (1) 单位产品 X，意味着位置 Y 的库存应从其库存中减去一单位。

由此，我想到了这些表：

*   地点

    *   ID
    *   姓名
*   产品

    *   ID
    *   姓名
*   交易

    *   ID
    *   描述
*   库存标题

    *   ID
    *   location_id
    *   product_id
*   库存详细信息

    *   库存ID
    *   transaction_id
    *   单位成本
    *   单价
    *   数量
*   orders_header

    *   ID
    *   日期
    *   总计（根据orders_detail数量*价格计算；仅用于未来数据验证）
*   订单详情

    *   order_id
    *   transaction_id
    *   product_id
    *   数量
    *   价格

好的，那么，有什么问题吗？当然。

1.  如何跟踪单位成本的变化？如果有一天我开始为某种产品支付更多费用，我需要以某种方式跟踪边际效用 ( `(cost*quantity) - (price*quantity) = marginal utility`)。我主要为此想到了inventories_detail。否则我不会在意的。
2.  关系是否稳固？我仍然很难考虑这些地点是否有库存，或者库存是否有多个地点。真让人抓狂。
3.  您将如何保持/了解您当前的库存水平？由于我必须分离库存表以跟上成本更新，我想我只需要将inventories_detail 中列出的所有数量相加即可。
4.  您想分享任何建议吗？

我确定我仍然有一些问题，但这些主要是我需要解决的问题。另外，由于我是第一次使用 Ruby on Rails，实际上，作为一种学习体验，在设计上停下来，不让我更快地完成实现是一种耻辱，但我想这就是应该的方式。

提前致谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-06T01:34:37.577

这里棘手的部分是您所做的不仅仅是 POS 解决方案。你也在做一个库存管理和基本的成本会计系统。

您需要解决的第一个场景是您将使用哪种会计方法来确定任何已售商品的成本。最常见的选项是先进先出、后进先出或特定标识（所有可以用谷歌搜索的术语）。

在所有 3 个场景中，您都应该在数据结构中记录您对商品的购买（通常称为 PurchaseOrder，但在这种情况下，我将其称为 SourcingOrder 以区别于原始问题中的订单表）。

下面的结构假设每个采购订单行将用于一个位置（否则事情会变得更加复杂）。换句话说，如果我为商店 A 购买 2 个小部件，为商店 B 购买 2 个小部件，我会在订单中添加 2 行，每行数量为 2，而不是数量为 4 的一行。

```
SourcingOrder
 - order_number
 - order_date

SourcingOrderLine
 - product_id
 - unit_cost
 - quantity
 - location_id 
```

库存可以是一级...

```
InventoryTransaction
 - product_id
 - quantity
 - sourcing_order_line_id
 - order_line_id
 - location_id
 - source_inventory_transaction_id 
```

每次在商店收到 SourcingOrderLine 时，您将创建一个 InventoryTransaction ，其中包含正数量和对`sourcing_order_line_id`、`product_id`和的 FK 引用`location_id`。

每次进行销售时，您都将创建一个 InventoryTransaction，其数量为负，并且对`order_line_id`,`product_id`和`location_id`,的 FK 引用`source_inventory_transaction_id`。

这`source_inventory_transaction_id`将是从负数量 InventoryTransaction 返回到使用您选择的任何会计方法计算的正数量 InventoryTransaction 的链接。

一个位置的当前库存将是`SELECT sum(quantity) FROM inventory_transactions WHERE product_id = ? and location_id = ? GROUP BY product_id, location_id`。

边际成本将通过从销售追溯至 SourcingOrder 行的 2 个相关库存交易来计算。

注意：您必须处理在 2 个库存交易中分配一个订单行的情况，因为订购的数量大于下一个要分配的库存交易中剩余的数量。此数据结构将处理此问题，但您需要自己处理逻辑和查询。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-24T16:47:08.983

布赖恩是正确的。只是为了添加其他信息。如果您正在为您的企业或客户构建一个完整的系统。我建议您从组织层面开始工作，直至 POS 和会计流程。这将使您的数据库体验更加广泛......：P 在我的系统开发经验中，库存模块总是以盘点+（购买 - 购买退货）=可供销售的 SKU 开始。POS 不直接附加到库存模块，而是由销售主管每天对账。然后，每日总销售量将扣除可供销售的 SKU。您还将制定成本计算和定价模块。数据库的正确规范化始终是必须的。

# java - 如何为返回对象的方法编写测试用例

> ID：10037712
> 
> 赞同：2
> 
> 时间：2012-04-06T00:08:50.117
> 
> 标签：java, object, junit, testcase

我有一个返回类型为对象的方法。如何为此创建测试用例？我如何提到结果应该是一个对象？

例如：

```
public Expression getFilter(String expo)
{
    // do something
    return object;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T17:00:34.220

试试这样的东西。如果您的函数的返回类型被`Object`替换`Expression`为`Object`：

```
//if you are using JUnit4 add in the @Test annotation, JUnit3 works without it.
//@Test
public void testGetFilter(){
    try {
        Expression myReturnedObject = getFilter("testString");
        assertNotNull(myReturnedObject); //check if the object is != null
        //check if the returned object is of class Expression.
        assertTrue(true, myReturnedObject instanceof Expression);
    } catch(Exception e){
        // let the test fail, if your function throws an Exception.
        fail("got Exception, i want an Expression");
     }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T00:10:55.477

在您的示例中，返回类型是 Expression? 没看懂问题，能详细点吗？

该函数甚至**无法**返回除表达式（或派生类型或 null）以外的任何内容。所以“检查类型”是没有意义的。

```
[TestMethod()]
public void FooTest()
{
    MyFoo target = new MyFoo();
    Expression actual = target.getFilter();

    Assert.IsNotNull(actual);  //Checks for null
    Assert.IsInstanceOfType(actual, typeof(Expression)); //Ensures type is Expression
} 
```

我在这里假设 C#；你没有标记你的问题，也没有提到你的问题中的语言。

# java - 从 arraylist 调用子类方法

> ID：10037717
> 
> 赞同：1
> 
> 时间：2012-04-06T00:09:57.090
> 
> 标签：java, methods, arraylist, subclass, superclass

我有一个名为 dvdToRent 的子类，在类中有一个名为 dvdRental 的方法，我想直接从名为 dvdCompany 的 arrayList 调用它

```
public void dvdRental (int dvdNumber, String customer)
{         

    if (dvds.size() < 0) {
       System.out.println("Empty list");
       }
       else if (dvdNumber >= dvds.size()) {
           System.out.println("Doesn't exist!!");
        }
    else {

        dvd  = dvds.get(dvdNumber);
        dvdToRent.dvdrental(customer);
    } 
} 
```

这就是我在想的可能它可以调用该方法但它没有，它在最后一行给了我一个错误。有什么建议么？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T01:52:05.467

假设它`dvd`被声明为`dvdToRent`，看起来你希望你的最后一行是

```
dvd.dvdrental(customer); 
```

代替

```
dvdToRent.dvdrental(customer); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T00:14:21.860

您不能直接从 List 调用方法，因为 List 是对象的集合。您必须选择此集合中的一个特定元素。

例如像这样：

```
dvdToRent.get(0).dvdrental(customer); 
```

这会从名为 dvdToRent 的 List 中取出第一个元素，然后使用该元素调用带有参数 customer 的 dvdrental。

# delphi - 光标不工作的完整课程

> ID：10037719
> 
> 赞同：15
> 
> 时间：2012-04-06T00:10:04.483
> 
> 标签：delphi, ide, delphi-xe2, code-completion, aqtime

我一直在 Delphi、2010 年和 XE2 中广泛使用 Complete Class at Cursor 函数。最近，在为 XE2 安装更新 4 后，光标处的完整类停止工作。经过一番研究，我发现卸载“AQTime”可以解决这个问题。所以我这样做了（必须重新安装 Delphi 才能删除它），果然它又开始工作了。

只不过，今天突然又停了下来。AQTime 没有安装，我也没有在 IDE 中做任何事情（据我所知）可能会导致这种情况。我没有安装/卸载任何软件包，没有更改任何库路径，甚至没有更改任何设置。它只是在我的开发过程中突然停止工作。工作了一分钟，而不是下一分钟。我重新启动了 Delphi，重新启动了我的 PC，甚至尝试了一个全新的项目。它不再起作用了。

任何人都知道为什么这停止工作？我怎样才能让它再次工作？这是一个非常有用的工具，我一直在使用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T12:47:13.183

我遇到了同样的问题，但在从 Windows 卸载程序中卸载**Smartbear AQTime后就解决了。**（先关闭Delphi）

无需重新安装 Delphi。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T05:43:17.463

在 XE2/Update 4 中遇到了完全相同的问题。执行了以下操作（没有卸载 AQTime），它又回来了。

工具 > 选项 > 编辑器选项 > 代码洞察

验证已检查代码完成（确实如此），然后将延迟更改为低（设置为无）> OK

我的 IDE 中的代码完成功能再次开始工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-02T15:11:58.180

我在柏林德尔福遇到了同样的问题。以上都不适合我。我也尝试重新生成 .dproj 文件，但这也没有帮助。

（到目前为止）有效的一件事是为 Delphi Berlin 安装出色的 IDEFixPack。[Delphi IDE 修复包](https://www.idefixpack.de/blog/ide-tools/ide-fix-pack/)

Please let me take this opportunity also for a quick moan. Code completion is an absolutely essential feature of Delphi and it is very slow and flaky at best. Embarcadero (if you are listening) - please focus on making these core features much more robust.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-01T15:10:59.750

取消 IDE 中的 AQTime8.20 集成也为我解决了这个问题 - 无论如何都在 IDE 之外使用了 AQtime。

# .net - XPathNavigator.Select ("self::node()/../..[@numberOfLocationsAdded!='0']")

> ID：10037720
> 
> 赞同：2
> 
> 时间：2012-04-06T00:10:06.490
> 
> 标签：.net, xpath, xpathnavigator

当我调用 XPathNavigator.Select ("self::node()/../..[@numberOfLocationsAdded!='0']") 我得到一个异常“有一个无效的令牌”

这是因为 XPathNavigator 不能超过它所在的根目录吗？如果是这样，关于如何最好地处理这种情况的任何建议？

当用户设置他们想要迭代的节点时，我们调用 select 并获取 XPathNodeIterator。
然后对于每次迭代，我们调用 XPathNodeIterator.Current，它为我们所在的节点提供了一个 XPathNavigator。

然后针对我们所在的节点进行 XPath 选择，调用 XPathNavigator.Select()

有没有办法有效地做到这一点？或者，如果我们需要支持 ../.. 我们是否需要始终处理根节点并预先添加他们想要迭代的节点的 XPath？

谢谢 - 戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T03:54:27.263

**这在 XPath 1.0 中在语法上是无效的**：

```
..[condition] 
```

**使用**：

```
self::node()/../../self::*[@numberOfLocationsAdded!='0'] 
```

或等价或更短的：

```
../parent::*[@numberOfLocationsAdded!='0'] 
```

# java - 分析/可视化程序的两个版本之间的 GC 使用模式？

> ID：10037723
> 
> 赞同：3
> 
> 时间：2012-04-06T00:10:20.327
> 
> 标签：java, performance, garbage-collection, visualvm

我刚刚花了几天时间极大地改进了我们的软件，摆脱了许多不必要的对象分配。改进是巨大的，我现在可以运行一个（几乎）没有分配新对象的进程。在我修复之前创建了数兆字节刚刚丢弃的对象。

现在，我想以某种令人印象深刻的方式可视化改进（这都是关于可衡量的影响:)。有小费吗？我将 VisualVM 用于很多检测，但它并没有真正显示出来。监视器显示了一些称为“GC 活动”的东西，但它并没有那么有用。理想情况下，我希望能够保持修复前后进程中创建的所有对象大小的累积计数。有什么工具可以让我这样做吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T03:43:23.850

您可以使用[GCMV](http://www.ibm.com/developerworks/java/jdk/tools/gcmv/ "GCMV")。它支持许多不同的详细 GC 格式，并允许您将比较图表放在一起。我们经常这样做是为了内存泄漏等。我们想要展示“之前和之后”的故事。

它还围绕总 GC、总 GC 时间等内容进行了有趣的总结，在这些情况下看起来非常引人注目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:01:42.850

使用 VisualVM，您有两种选择。您可以使用内存分析，它跟踪每个类分配的实例数，或者您可以使用[对基于每个线程分配的累积 Java 堆字节的跟踪支持](http://java.net/jira/browse/VISUALVM-452)，这是在 VisualVM 1.3.3 中添加的。

# iphone - 协助解决使用 OAuth2 登录 Google for iPhone 的错误

> ID：10037725
> 
> 赞同：2
> 
> 时间：2012-04-06T00:10:39.103
> 
> 标签：iphone, objective-c, xcode, oauth, gdata

我目前正在实施 GData 框架来进行身份验证并发布到 picasa。到目前为止，我有一个工作框架配置。这使我可以推送和验证 / 尝试验证 google。我似乎遇到的唯一问题是当应用程序在身份验证后返回时，我收到崩溃并出现以下错误

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '+[NSInvocation invocationWithMethodSignature:]: method signature argument cannot be nil' 
```

***第一掷调用堆栈：（0x281c022 0x43c3cd6 0x2781a52 0x1d134b 0x27824ed 0x2782407 0x1ce0fa 0x1cdf0b 0x1cdebb 0x27824ed 0x2782407 0x22185e 0x221670 0x22270a 0x1926a49 0x1924e84 0x1925ea7 0x1924e3f 0x1924fc5 0x1869f5a 0xca3a39 0xd70596 0xc9a120 0xd70117 0xc99fbf 0x27f094f 0x2753b43 0x2753424 0x2752d84 0x2752c9b 0x29ae7d8 0x29ae88a 0xf23626 0x1c332d 0x2995）

我的验证码如下

```
 NSString *clientID = @"blogityblaablaa";
        NSString *clientSecret = @"somecrazycrap";

        auth = [GTMOAuth2ViewControllerTouch authForGoogleFromKeychainForName:kKeychainItemName
                                                                     clientID:clientID
                                                                 clientSecret:clientSecret];
        [[self photoservice] setAuthorizer:auth];

        NSString *scope = [GDataServiceGooglePhotos authorizationScope];

        SEL finishedSel = @selector(viewController:finishedWithAuth:error:);

        GTMOAuth2ViewControllerTouch *viewController;
        viewController = [GTMOAuth2ViewControllerTouch controllerWithScope:scope
                                                                  clientID:clientID
                                                              clientSecret:clientSecret
                                                          keychainItemName:kKeychainItemName
                                                                  delegate:self
                                                          finishedSelector:finishedSel];

        NSString *html = @"<html><body bgcolor=silver><div align=center>Loading sign-in page...</div></body></html>";
        viewController.initialHTMLString = html;

        [[del navigationController] pushViewController:viewController animated:NO]; 
```

无论如何，请提供帮助。非常感谢你！- 吉姆

更新：发生这种情况的原因是由于选择器“finishedSelector:finishedSel”配置错误。当应用程序返回时，找不到选择器，因此会导致此崩溃。上面的身份验证代码运行良好，因此我希望这对需要 oAuth 以进行 GData 身份验证的任何人都有用。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T11:03:20.693

验证声明的选择器finishedSet 是否正确，是否正确声明了当前对象的viewController:finishedWithAuth:error:？

```
SEL finishedSel = @selector(viewController:finishedWithAuth:error:); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-08T11:46:00.963

替换这一行：

> [[del navigationController] pushViewController:viewController Animation:NO];

有了这个：

> [[self navigationController] pushViewController:viewController Animation:NO];

# templates - Mediawiki 多级嵌入

> ID：10037728
> 
> 赞同：1
> 
> 时间：2012-04-06T00:11:51.003
> 
> 标签：templates, mediawiki, mediawiki-templates

我正在使用 Mediawiki 尝试格式化一些文章，以便它们在逻辑上一起流动。这是我得到的：

模板 A 是基础模板

页面 B 是使用模板 A 的页面

页面 C 是包含页面 B 的一部分的页面

我在模板 A 中有：

```
<onlyinclude>

  <includeonly>'''Role'''</includeonly>
  {{{role}}}
</onlyinclude> 
```

在页面 B 中：

```
{{PageB|role=Admin}}  //Page B combined to avoid whitespace questions 
```

C页：

```
{{:PageB}}  //Again name combined in order to avoid whitespace questions 
```

结果：

我在页面 C 上得到了预期的结果，这是页面 B 的“角色”部分。

我不想要的部分是页面 B 现在只有模板 A 的“角色”部分。

期望：

我希望页面 B 显示模板 A 的所有内容，而页面 C 仅包含我感兴趣的页面 B 的部分。除了放置页面 B 的每个实例（模板 A 被制作为一个...模板...对于页面 B 的所有变体），当页面 B 被嵌入时，我如何使用模板（模板 A）来做到这一点？甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:33:35.807

我不确定我是否完全理解您的问题，但是，让我们看看我们是否可以澄清一下。您拥有`Template:Role`以下内容：

```
<onlyinclude><includeonly>'''Role'''</includeonly>{{{role}}}</onlyinclude> 
```

哪个应该返回：

**角色**{{{role}}}

您还拥有`Page_B`以下内容：

```
B Some text<br />
{{Role|role=Admin}}<br />
B Some more text<br />
B And more text 
```

应该看起来像：

B 一些文本
**角色**管理员
B 一些更多文本
B 更多文本

然后，您拥有`Page_C`以下内容：

```
{{:Page_B}}<br />
C Some text<br />
C Some more text 
```

结果会像：

B 一些文本
**角色**管理员
B 更多文本
B 更多文本
C 一些文本
C 更多文本

但！你希望它像这样出来：

**角色**管理员
B 更多文本
C 一些文本
C 更多文本

如果这是正确的，那么您对`<noinclude>`​​、`<onlyinclude>`和的理解`<includeonly>`就会略有偏差。 `<noinclude>`用于将内容仅保留在它所写的页面上，不会被嵌入。`<onlyinclude>`主要用于控制通过模板传递的内容。帮助编辑器定义将被嵌入的内容。它有助于为空白和不需要的换行设置边界。设置`<includeonly>`标签之间的内容可防止该内容在其写入的页面上被看到，而只能在被嵌入的页面上看到。

所以，`Template:Role`必须看起来像这样：

```
<onlyinclude>'''Role'''{{{role}}}</onlyinclude> 
```

而且，`Page_B`必须看起来像这样：

```
B Some text<br />
<onlyinclude>{{Role|role=Admin}}<br />
B Some more text<br /></onlyinclude>
B And more text 
```

我希望这能满足您的问题并对您有所帮助。

# html - Bootstrap 折叠的标题在第一次点击时闪烁

> ID：10037729
> 
> 赞同：3
> 
> 时间：2012-04-06T00:11:54.840
> 
> 标签：html, twitter-bootstrap

我在使用引导导航栏时遇到了一些奇怪的问题。当窗口足够小时，展开按钮会按预期显示。但是，一旦单击按钮，它的行为就非常奇怪。第一次单击会闪烁下拉菜单的内容，然后消失。第二次单击时，下拉菜单正常显示，但没有动画。

代码（由服务器呈现）

```
 <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
     <div class="container">
     <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
     </a>
     <a href="/" class="brand"></a>

      <div class="nav-collapse">
        <ul class="nav">
          <li><a href="/businesses">Businesses</a></li>
          <li><a href="/about">About Us</a></li>
          <li><a href="/contact">Contact</a></li>
          <li><a href="/advertise">Advertise</a></li>
        </ul>
        <ul class="nav pull-right">
          <li><a href="/users/sign_in">Login</a></li>
          <li><a href="/users/sign_up">Sign Up</a></li>
        </ul>
      </div>
    </div>
  </div>
</div> 
```

有什么想法吗？

编辑：品牌锚中通常会有一个图像

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-23T10:23:50.640

我遇到了同样的问题，发现我的页面中有这个小脚本块，我一定是从某个地方复制的。

```
<script type="text/javascript">
    $('.nav a').on('click', function () {
        $(".navbar-toggle").click();
    });
</script> 
```

删除这个解决了这个问题。

我不确定它来自哪里，我假设来自 Bootstrap 2.x 或其他东西的一些例子。

# jquery - 从不同的页面运行 jQuery

> ID：10037738
> 
> 赞同：0
> 
> 时间：2012-04-06T00:13:45.517
> 
> 标签：jquery

所以我有以下文件`a.html`，，，`b.html`。`c.js`我希望能够实现以下目标：

当我单击 上的链接时`a.html`，被重定向到`b.html`，并且只有在`b.html`完全加载后，我才会`c.js`运行并引用`b.html`. 例如打开一个面板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T00:24:48.840

> 当我单击 a.html 上的链接时，被重定向到 b.html

这只是一个标准链接，因此与问题无关

> 只有在 b.html 完全加载后，我的 c.js 才会运行并引用 b.html 的元素

所以你有一个“运行”的 c.js。一个简单的解决方案是编辑 c.js 并包装它

```
jQuery(document).ready(function () {

    // original contents of c.js go here

}); 
```

在 b.html 中，在文档的开头包含 jQuery 和 c.js（按此顺序）。

但是，您可以将 c.js 脚本作为正文中的最后一个标记包含在内

```
<body>

   ... some contents here ...

    <script type="text/javascript" src="c.js">
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T00:18:19.703

在 b.html 中：

```
<script>
  $(document).ready(function(){  ...  });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T00:37:57.733

如果您正在等待页面完全加载，则需要将其包装在`$(window).load()`.

# python - 在Python中替换部分字符串？

> ID：10037742
> 
> 赞同：65
> 
> 时间：2012-04-06T00:14:29.070
> 
> 标签：python, string

我使用正则表达式从网页获取字符串，部分字符串可能包含我想用其他内容替换的内容。怎么可能做到这一点？我的代码是这样的，例如：

```
stuff = "Big and small"
if stuff.find(" and ") == -1:
    # make stuff "Big/small"
else:
    stuff = stuff 
```

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-04-06T00:16:00.123

```
>>> stuff = "Big and small"
>>> stuff.replace(" and ","/")
'Big/small' 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-04-06T00:16:10.537

`replace()`在字符串上使用方法：

```
>>> stuff = "Big and small"
>>> stuff.replace( " and ", "/" )
'Big/small' 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-08-24T12:56:57.077

`.replace()`您也可以像前面描述的那样轻松使用。但同样重要的是要记住字符串是不可变的。因此，如果您不将所做的更改分配给变量，那么您将看不到任何更改。让我解释一下；

```
 >>stuff = "bin and small"
    >>stuff.replace('and', ',')
    >>print(stuff)
    "big and small" #no change 
```

要观察您要应用的更改，您可以分配相同或另一个变量；

```
 >>stuff = "big and small"
    >>stuff = stuff.replace("and", ",")   
    >>print(stuff)
    'big, small' 
```

# r - 当我在 R 中使用 apply 时丢失类信息

> ID：10037745
> 
> 赞同：2
> 
> 时间：2012-04-06T00:15:44.187
> 
> 标签：r, class, apply

当我使用 apply 将数据框的一行传递给函数时，我丢失了该行元素的类信息。他们都变成了“性格”。下面是一个简单的例子。我想在 3 个臭名昭著的年龄上再增加几年。当我尝试添加 2 一个数值时，R 表示“二元运算符的非数值参数”。我该如何避免这种情况？

```
age = c(20, 30, 50) 
who = c("Larry", "Curly", "Mo") 
df = data.frame(who, age) 
colnames(df) <- c( '_who_', '_age_')
dfunc <- function (er) {

   print(er['_age_'])
   print(er[2])
   print(is.numeric(er[2]))

  print(class(er[2]))
  return (er[2] + 2)
}
a <- apply(df,1, dfunc) 
```

输出如下：

```
_age_ 
 "20" 
_age_ 
 "20" 
[1] FALSE
[1] "character"
Error in er[2] + 2 : non-numeric argument to binary operator 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T00:35:09.183

`apply`仅适用于矩阵（所有元素都具有相同的类型）。当您在 a 上运行它时`data.frame`，它只是`as.matrix`首先调用。

解决此问题的最简单方法是仅处理数字列：

```
# skips the first column
a <- apply(df[, -1, drop=FALSE],1, dfunc)

# Or in two steps:
m <- as.matrix(df[, -1, drop=FALSE])
a <- apply(m,1, dfunc) 
```

`drop=FALSE`需要避免获得单列向量 。`-1`表示除第一列之外的所有列，您可以改为显式指定所需的列，例如`df[, c('foo', 'bar')]`

**更新**

如果您希望您的函数一次访问一个完整的 data.frame 行，则（至少）有两个选项：

```
# "loop" over the index and extract a row at a time
sapply(seq_len(nrow(df)), function(i) dfunc(df[i,]))

# Use split to produce a list where each element is a row
sapply(split(df, seq_len(nrow(df))), dfunc) 
```

第一个选项可能更适合大型数据帧，因为它不必预先创建巨大的列表结构。

# mysql - 快速刷新摘要数据以最大程度地减少停机时间

> ID：10037746
> 
> 赞同：1
> 
> 时间：2012-04-06T00:15:45.187
> 
> 标签：mysql, sql, performance

为了增加报告的响应时间，我创建了一个汇总表，其作用类似于物化视图。我尚未确定刷新数据的频率，因为我仍在决定如何实际交换数据。

基于键更新数据不是当前结构的选项，因为每条记录都是从许多列的不同组合创建的，其中一些可以为空。当涉及空值时，这会导致更新匹配多行。数据库中的数据每天只更新一到两次，因此实际上没有必要非常频繁地更新它。

正如我目前设置的那样，我的存储过程只是截断汇总表中的数据，然后立即重新运行查询以从头开始重新填充它。由于我从数百万条记录中提取，这可能需要一些时间。是否有一种标准做法可以极快地替换大型数据集以最大程度地减少数据的停机时间？比如将新的汇总数据加载到临时表中，然后在查询完成后将其移动到汇总表中，也许？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T01:21:12.763

这是我用来解决此类问题的一些 DB 功夫：您使用一个简单的数据驱动开关在当前和下一个数据版本之间切换。

这里有一些 SQL 来演示这一点。

在某处创建一个表来保存开关（你可以在这里使用任何东西 - 如果你有一个设置表等）：

```
create table data_switch(val int not null); // this will hold one row 
```

接下来，更改您的数据表以包含数据版本号的列：

```
alter table my_data add column data_version int; 
```

最后，创建一个链接这两者的视图，使 data_version 值驱动使用哪组数据：

```
create view current_data as
select * from my_data
where data_version = (select val from data_switch); 
```

生成数据时，为 data_version 分配一个新值。当您准备好使用它时，您只需更新 data_switch 中的值以匹配您使用的新值。

这使您可以保留旧版本，在新版本损坏时切换回来，只要您需要计算新数据，就可以随时截断旧版本，并使版本之间的切换即时进行。这很简单，而且很有效。

你可以完全改变你如何实现它，但这是一般的想法。

# c# - 如何将列表放入组合框 AddRange？

> ID：10037748
> 
> 赞同：0
> 
> 时间：2012-04-06T00:15:50.017
> 
> 标签：c#, list, combobox

我有这个列表：

```
public static List<int> getData(OdbcConnection conn)
{
    List<int> myData = new List<int>();
    string myQuery = "some Sql text";
    // ...............some other code
    return myData;
} 
```

我需要使用 AddRange 将 List 中的参数添加到组合框：

`this.comboBox1.Items.AddRange( new object[] { ??????????? });`

我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T00:18:12.490

this.comboBox1.Items.AddRange(getData(conn).ToArray());

# c++ - 主机游戏地图的巨型字符或多个字符？

> ID：10037750
> 
> 赞同：0
> 
> 时间：2012-04-06T00:16:05.693
> 
> 标签：c++, multidimensional-array, char, console-application

我是一个非常新手的 C++ 编码器，我开始制作一个控制台冒险游戏。我的冒险游戏目前包含一个玩家角色，该角色在 80 个字符宽度 x 40 行的控制台应用程序窗口内四处走动。

我不确定如何为我的游戏存储地图。每张地图将由 80 x 40 具有颜色属性的 ASCII 字符组成。

我应该将每个 80 x 40 地图存储在自己的字符中吗？所以一张地图看起来像......

```
int cHeight = 5; // Reduced size for this example
int cHeight = 10; // Reduced size for this example  

// Set up the characters:

char map[cHeight][cWidth+1] = {
    "1234567890",
    "1234567890",
    "1234567890",
    "1234567890",
    "1234567890",
};

CHAR_INFO mapA[cWidth * cHeight];

for (int y = 0; y < cHeight; ++y) {                                                                 
    for (int x = 0; x < cWidth; ++x) {                                                                                                                                                                              
        mapA[x + cWidth * y].Char.AsciiChar = map[y][x];                        
        mapA[x + cWidth * y].Attributes = FOREGROUND_BLUE | Black; //I have an enum setup with background colours.          
    }
}

// Set up the positions:
COORD charBufSize = {cWidth,cHeight};
COORD characterPos = {0,0};
SMALL_RECT writeArea = {0,0,cWidth-1,cHeight-1}; 

// Write the characters:
WriteConsoleOutputA(wHnd, mapA, charBufSize, characterPos, &writeArea); 
```

我不确定这是否完全是显示字符的正确方法，但我认为只在 for 循环中找出每个字符并不是一个好主意。

所以.. 假设我的控制台窗口（在上面的代码中）是 10 个字符宽和 5 行高。在上面的代码中，我在 Char 中有一个地图，因此在加载每个地图时，我会将每个地图放在自己的数组中。

我正在考虑将整个地图放入单个字符中，但随后仅通过在 for 循环中偏移 x 和 y 来显示我需要的内容。

```
mapA[x + cWidth * y].Char.AsciiChar = map[y+offset][x+offset]; 
```

所以地图看起来更像这样；

```
char map[cHeight][cWidth+1] = {
    "1234567890ABCDEFGHIJ",
    "1234567890ABCDEFGHIJ",
    "1234567890ABCDEFGHIJ",
    "1234567890ABCDEFGHIJ",
    "1234567890ABCDEFGHIJ",
}; 
```

有了偏移量，我可以在 5 行上分别显示 '1234567890' 和 5 行上的 'ABCDEFGHIJ'。

所以简而言之，我想知道最有效的方法，我应该有多个字符吗？我应该创建一个类吗？那么我可以将字符存储为颜色吗？（在 C++ 中，类'对我来说仍然是新的）。

我应该只在地图中绘制地形，然后添加对象（房屋、树木）吗？或者只是手动在地图中绘制它？

我想我只是想了太久，需要一点方向谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T03:33:15.007

我会做的方式是创建一个地图

```
Node* map[height][width] 
```

这意味着您将创建指向 Node* 元素的映射，并且您可以将 Node* 元素定义为...

```
class Node{
char displayCharacter;
int posx,poxy
unsigned int r;  //red
unsigned int g;  //green
unsigned int b;  //blue
unsigned int a;  //alpha
display(); // This function will know how to display a node using the colour etc
}; 
```

然后你可以例如，如果你想创建一个房子，你会给它模型的中心点等......以绘制一个函数

```
void createHouse(Node* center)
{
    if((center->posh > 0)&&(center->posh< maxheight))
    {
        if(map[center->posy-1][center->posx]!=NULL)
        {
             map[center->posy-1][center->posx]->displayCharacter = '_';
             map[center->posy-1][center->posx]->r = 255;
        }
    }

} 
```

然后主要你会有类似的东西......

```
while(true)
{
     for(int i=0; i<maxheight; i++)
    {
        for(int j=0; j< maxwidth; j++)
        {
            map[i][j]->Display();
        }
    }

} 
```

我希望所有这些示例代码对您有所帮助并回答了您的问题。我没有调试或查找任何语法错误。如果代码中有任何错误，您将不得不修复它们！

祝你好运！

# android - Android 类不工作

> ID：10037754
> 
> 赞同：1
> 
> 时间：2012-04-06T00:16:30.130
> 
> 标签：android, database

我正在尝试运行一个类，该类将检查数据库中的信息，然后将其显示在屏幕上。它昨天还在工作，直到我为它添加代码以检查第二个表中的信息我将同时发布代码和 logcat，因为我不知道为什么会这样

```
public class WorkoutProgress extends ListActivity {

  private DataBaseHelper datasource;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    /*requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);*/
    super.onCreate(savedInstanceState);
    setContentView(R.layout.progress);

    datasource = new DataBaseHelper(this);
    datasource.open();
    fillData();
    datasource.close();
  }
  private void fillData() {
    // Get all of the notes from the database and create the item list
    Cursor c = datasource.getAllTitles();
    startManagingCursor(c);

    String[] from = new String[] {DataBaseHelper.KEY_CODE,  DataBaseHelper.KEY_DAYS,DataBaseHelper.KEY_BMI };
    int[] to = { R.id.code, R.id.Days, R.id.BMI };
    String[] from2 = new String[] {DataBaseHelper.KEY_DATE,  DataBaseHelper.KEY_STEPS,DataBaseHelper.KEY_CALs };
    int[] to2 = { R.id.date, R.id.steps, R.id.cals };
    // Now create an array adapter and set it to display using our row
    SimpleCursorAdapter notes =
     new SimpleCursorAdapter(this, R.layout.notes_row, c, from, to);
    setListAdapter(notes);
    SimpleCursorAdapter notes2 =
      new SimpleCursorAdapter(this, R.layout.notes_row, c, from2, to2);
    setListAdapter(notes);
  }

  public void add(View view) {
    //Do nothing
  }

  public void delete(View view) {
     datasource.open();
     datasource.deleteFirst();
     fillData();
     datasource.close();
  }
} 
```

当我尝试访问此类时，日志猫是

```
04-06 01:10:42.293: E/global(22219): java.lang.UnsupportedOperationException
04-06 01:10:42.293: E/global(22219):    at java.lang.VMThread.stop(VMThread.java:85)
04-06 01:10:42.293: E/global(22219):    at java.lang.Thread.stop(Thread.java:1391)
04-06 01:10:42.293: E/global(22219):    at java.lang.Thread.stop(Thread.java:1356)
04-06 01:10:42.293: E/global(22219):    at com.b00348312.workout.Splashscreen$1.run(Splashscreen.java:42)
04-06 01:10:45.393: I/Database(22219): sqlite returned: error code = 1, msg = AUTOINCREMENT is only allowed on an INTEGER PRIMARY KEY
04-06 01:10:45.393: E/Database(22219): Failure 1 (AUTOINCREMENT is only allowed on an INTEGER PRIMARY KEY) on 0x2c0e38 when preparing 'create table goals (_id primary key autoincrement, code text not null,days title text not null, bmi text not null);'.
04-06 01:10:45.403: D/AndroidRuntime(22219): Shutting down VM
04-06 01:10:45.403: W/dalvikvm(22219): threadid=1: thread exiting with uncaught exception (group=0x400259f8)
04-06 01:10:45.453: D/dalvikvm(22219): GC_FOR_MALLOC freed 4012 objects / 253248 bytes in 32ms
04-06 01:10:45.453: E/AndroidRuntime(22219): FATAL EXCEPTION: main
04-06 01:10:45.453: E/AndroidRuntime(22219): java.lang.RuntimeException: Unable to start  activity ComponentInfo{com.b00348312.workout/com.b00348312.workout.WorkoutProgress}: android.database.sqlite.SQLiteException: AUTOINCREMENT is only allowed on an INTEGER PRIMARY KEY: create table goals (_id primary key autoincrement, code text not null,days title text not null, bmi text not null);
04-06 01:10:45.453: E/AndroidRuntime(22219):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2787)
04-06 01:10:45.453: E/AndroidRuntime(22219):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2803)
04-06 01:10:45.453: E/AndroidRuntime(22219):    at android.app.ActivityThread.access$2300(ActivityThread.java:135)
04-06 01:10:45.453: E/AndroidRuntime(22219):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2136)
04-06 01:10:45.453: E/AndroidRuntime(22219):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-06 01:10:45.453: E/AndroidRuntime(22219):    at android.os.Looper.loop(Looper.java:144)
04-06 01:10:45.453: E/AndroidRuntime(22219):    at android.app.ActivityThread.main(ActivityThread.java:4937)
04-06 01:10:45.453: E/AndroidRuntime(22219):    at java.lang.reflect.Method.invokeNative(Native Method)
04-06 01:10:45.453: E/AndroidRuntime(22219):    at java.lang.reflect.Method.invoke(Method.java:521)
04-06 01:10:45.453: E/AndroidRuntime(22219):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
04-06 01:10:45.453: E/AndroidRuntime(22219):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
04-06 01:10:45.453: E/AndroidRuntime(22219):    at dalvik.system.NativeStart.main(Native Method)
04-06 01:10:45.453: E/AndroidRuntime(22219): Caused by: android.database.sqlite.SQLiteException: AUTOINCREMENT is only allowed on an INTEGER PRIMARY KEY: create table goals (_id primary key autoincrement, code text not null,days title text not null, bmi text not null);
04-06 01:10:45.453: E/AndroidRuntime(22219):    at android.database.sqlite.SQLiteDatabase.native_execSQL(Native Method)
04-06 01:10:45.453: E/AndroidRuntime(22219):    at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1817)
04-06 01:10:45.453: E/AndroidRuntime(22219):    at com.b00348312.workout.DataBaseHelper$DatabaseHelper.onCreate(DataBaseHelper.java:59)
04-06 01:10:45.453: E/AndroidRuntime(22219):    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:106)
04-06 01:10:45.453: E/AndroidRuntime(22219):    at com.b00348312.workout.DataBaseHelper.open(DataBaseHelper.java:78)
04-06 01:10:45.453: E/AndroidRuntime(22219):    at com.b00348312.workout.WorkoutProgress.onCreate(WorkoutProgress.java:21)
04-06 01:10:45.453: E/AndroidRuntime(22219):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1069)
04-06 01:10:45.453: E/AndroidRuntime(22219):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2751)
04-06 01:10:45.453: E/AndroidRuntime(22219):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T00:22:36.713

堆栈跟踪说：

> 准备“创建表目标（_id 主键自动增量，代码文本不为空，天标题文本不为空，bmi 文本不为空）；”时在 0x2c0e38 上失败 1（仅允许在整数主键上使用自动增量）。

看起来您忘记在语句中将该`_id`字段声明为 an 。`INTEGER``create table`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T00:25:41.413

您的 DataBaseHelper 可能没有`_ID`在创建数据库时指定列的类型。您必须将其定义为`INTEGER`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T20:12:02.663

我刚刚开始 Android 编程，我使用 USB 调试来试用我的应用程序。我意识到在可能的 SQL 失败后，下次运行数据库时不会从您的设备中删除数据库，并且您所做的任何更改都不会生效。

所以说你的“创建表”SQL语句在某种程度上是错误的。你的程序崩溃了。你找到问题并解决它。如果您再次运行程序，除非您增加版本，否则将使用相同的旧数据库。

因此，请转到您的设备并卸载该程序，然后从您的计算机再次运行它。这一次，我认为将使用您新的“创建表”SQL 重新创建数据库。

Since I'm new, this might not be what is happening and I'm open to correction if that's so.

# javascript - jquery ui自动完成：如何将“空格”分隔的查询与准确的“逗号”分隔记录匹配

> ID：10037755
> 
> 赞同：0
> 
> 时间：2012-04-06T00:16:33.133
> 
> 标签：javascript, jquery, regex, jquery-ui-autocomplete

我已经在客户端**预加载**了 xml 记录，在该记录上应用了**jquery ui 自动完成**功能。
假设有这样的记录：**"car,bike,plane"**。

当前（在使用**jquery ui 自动完成**时）如果用户键入：**“car,bike”** -> 它将找到上面提到的记录。
但是，如果用户键入：**“car bike”**（这意味着不是**逗号，而是空格**）--> 将不会显示任何结果。

如何将“car bike”与给定的“comma”分隔记录匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T00:53:33.167

我认为您可以拆分两个数组并循环其中一个数组，以搜索另一个数组中循环项的索引。

```
<script type="text/javascript">

    var str="car,bike,plane";
    var strToSearch= "car bike";

    var splitted = str.split(",");
    var strToSearchSplitted = strToSearch.split(' ');
    var found = false;

    for (var i in splitted){
      if (strToSearchSplitted.indexOf(splitted[i]) != -1){
        found = true;
        break;
      }
    }
<script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T04:49:02.567

对于可能正在处理相同情况的窥视者，这是我提出的**解决方案**，首先简要说明：

*   首先，我在空白处**拆分搜索词（查询）**
*   **然后，我通过将拆分的单词**与更多的正则表达式属性连接起来，动态地构建一个正则表达式定义。**例如**：假设用户搜索**“Car Bike”** -->拆分后我动态构建以下字符串：
    [ *str = **“Car”** +（任何字符）+ **“自行车”** +（任何字符）* ] ，然后将其馈送到 javascript **RegExp**。

为了更清楚，这是我的**代码：（希望它可以帮助你）**

```
$( "#field" ).autocomplete({
         source:function(request, response) {
         var query_array = request.term.toUpperCase().split(/\s+/g);//split on white space
         if(query_array.length >1)// if two ore more words, separated by whitespace
         {
           if(!/^\s*$/.test(query_array[query_array.length-1]))//if last word is not only whitespace
             {
                var new_query = '';
                for (var i=0; i<query_array.length; ++i )
                {
                   new_query+='(\\b' +query_array[i]+'\\b)';//word boundaries
                   if(i<query_array.length-1)
                   {
                     new_query+="([\\s\\S\\.]*)";// match ALL characters including newline , * is for many
                   }
                }

                 var matcher = new RegExp('^'+new_query, "g");//must Start with query term, apply regex global
                 var a = $.grep( autocomplete_data_array, function(item,index){
                               return matcher.test(item.value);
                     });

                 if(a.length>0)
                 {
                   response(a);
                 }
               }
         } 
```

# facebook - 从照片中选择来源

> ID：10037756
> 
> 赞同：-2
> 
> 时间：2012-04-06T00:16:48.960
> 
> 标签：facebook, facebook-fql, photo

我有`aid`权限`user_photo`，我想要照片的来源。所以我这样做：

```
select source from photo where id = ID_PHOTO 
```

它不起作用。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T00:26:15.470

没有列`id`

我想你想要`pid`（用引号括起照片 id，pid 是一个字符串）

```
select src from photo where pid = "ID_PHOTO" 
```

[参考](https://developers.facebook.com/docs/reference/fql/photo/)

编辑：

看起来 pid 也不起作用。如果 pid 不起作用，请尝试使用 object_id。

```
select src from photo where object_id = "ID_PHOTO" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T00:30:44.537

您应该使用[Graph API](http://en.wikipedia.org/wiki/Facebook_Platform#Graph_API)。以下是它的工作原理：

*   获取专辑：`https://graph.facebook.com/me/albums?access_token=...`

*   要获取照片：`https://graph.facebook.com/me/photos?access_token=...`

*   要获取特定相册中的照片：`https://graph.facebook.com/*[album_id_here]*/photos?access_token=...`

# php - 通过分隔符将字符串拆分为两个变量

> ID：10037757
> 
> 赞同：0
> 
> 时间：2012-04-06T00:16:53.137
> 
> 标签：php

我有一个看起来像这样的字符串

```
$string = 'Name of product | 34'; 
```

我想把它分成两个新的字符串：

```
$productName = 'Name of product';
$productPrice = '34'; 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T00:18:49.740

你可以很简单地使用[`list()`](http://php.net/list)and来做到这一点[`explode()`](http://php.net/explode)：

```
list($productName, $productPrice) = explode(" | ", $string); 
```

```
$productName string(15) "产品名称"
$productPrice 字符串（2）“34”

```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T00:20:09.593

```
$newarray = explode(" | ", $string);
echo $newarray[0]; //Name of product
echo $newarray[1]; //34 
```

# javascript - jQuery拖放z-index

> ID：10037758
> 
> 赞同：0
> 
> 时间：2012-04-06T00:16:54.443
> 
> 标签：javascript, jquery, html, css

我在受容器限制的页面元素上使用 Jquery Drag Drop UI 脚本，我只是想知道是否有一种方法可以始终将拖动的 div 放在其他子可拖动元素的顶部。

**Javascript函数：**

```
function dragIT(parent){
$("#"+parent).draggable({ containment: "#dashboard", scroll: false });
} 
```

该函数由 child/div - onmousedown / ondrag 调用。但是，拖动的元素有时会隐藏在其他 div 后面，这是我不想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T00:34:19.580

[http://jqueryui.com/demos/draggable/#visual-feedback](http://jqueryui.com/demos/draggable/#visual-feedback)有一个例子

```
function dragIT(parent){
$("#"+parent).draggable({ containment: "#dashboard", scroll: false, stack:"#"+parent+" div" });
} 
```

# ruby - 如何在 OptionParser 中处理单个“-”（破折号）？

> ID：10037762
> 
> 赞同：2
> 
> 时间：2012-04-06T00:17:50.670
> 
> 标签：ruby, optionparser

> **可能重复：**
> [Ruby OptionParser 空开关“-”行为](https://stackoverflow.com/questions/10037585/ruby-optionparser-empty-switch-behavior)

我编写了使用 OptionParser 优雅地处理命令行输入的代码。我面临两个重大打击。

1.  传递一个空开关 '-' 不会产生错误。
2.  该程序需要两个强制开关，但它接受一个开关而不会抱怨！

对于第一种情况，我这样做了：

```
opts.on('-', '--') do |value|
  $stderr.print "Invalid empty switch"
  exit 1
end 
```

编辑（很快就成功了）：它适用于空开关的情况，但也适用于开关不为空的情况。我怎样才能做到这一点？

对于第二种情况，我在 OptionParser.new 块中四处寻找解决方案，但找不到。在 OptionParser.new 块之外做是正常的方式吗？

# c# - 无法使用 IE 自动化将 HTMLInputElementClass 转换为 HTMLButtonElementClass？

> ID：10037764
> 
> 赞同：1
> 
> 时间：2012-04-06T00:18:04.377
> 
> 标签：c#, internet-explorer

嗨，我正在尝试使用 c# 单击按钮，但我不断收到转换错误

`Unable to cast COM object of type 'mshtml.HTMLInputElementClass' to class type 'mshtml.HTMLButtonElementClass'`. 表示 COM 组件的类型的实例不能转换为表示 COM 组件的不同类型；但是，只要底层 COM 组件支持对接口的 IID 的 QueryInterface 调用，它们就可以转换为接口。

我究竟做错了什么？代码如下：

```
namespace IEAutomation {
    /// <summary>
    /// Summary description for IEDriverTest.
    /// </summary>
    /// 
    using mshtml;
    using System.Threading;
    using SHDocVw;
    public class IEDriverTest {
        public IEDriverTest() {
        }

        public void TestGoogle() {

            object o = null;
            SHDocVw.InternetExplorer ie = new
            SHDocVw.InternetExplorerClass();
            IWebBrowserApp wb = (IWebBrowserApp)ie;
            wb.Visible = true;
            //Do anything else with the window here that you wish
            wb.Navigate("https://adwords.google.co.uk/um/Logout", ref o, ref o, ref o, ref o);
            while (wb.Busy) { Thread.Sleep(100); }
            HTMLDocument document = ((HTMLDocument)wb.Document);
            IHTMLElement element = document.getElementById("Email");
            HTMLInputElementClass email = (HTMLInputElementClass)element;
            email.value = "testtestingtton@gmail.com";
            email = null;
            element = document.getElementById("Passwd");
            HTMLInputElementClass pass = (HTMLInputElementClass)element;
            pass.value = "pass";
            pass = null;
            element = document.getElementById("signIn");

            HTMLButtonElementClass subm = (HTMLButtonElementClass)element;//ERROR HERE
            subm.click();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T00:24:30.563

A[`<button>`](http://particletree.com/features/rediscovering-the-button-element/)不是or 。*_* _[`<input type="submit">`](http://www.w3.org/TR/html401/interact/forms.html#h-17.4)`<input type="button">`

`<input>` *DOM 元素*由表示，`mshtml.HTMLInputElementClass`而`<button>` *DOM 元素*由 表示`mshtml.HTMLButtonElementClass`。因此，转换是无效的，因为 ButtonElement 不能从 InputElement 分配（可转换），并且不同的类型代表两个不同的 HTML 实体。公开了对 DOM 的“字面”解释。

强制转换不会*（*也不能）改变实际对象的类型。解决方案是处理对象的本来面目：`mshtml.HTMLInputElement`.

（好在[HTMLInputElement 也有一个`click`](http://www.codeproject.com/Articles/16738/Automating-web-browsing).）

快乐编码。

# tsql - 使用表格结构化数据从 SQL Server 2000 发送 dbMail？

> ID：10037777
> 
> 赞同：1
> 
> 时间：2012-04-06T00:20:28.840
> 
> 标签：tsql, sql-server-2000, sp-send-dbmail, dbmail

我正在尝试从我的 select 语句中获得这种格式化数据，并让它通过 SQL SERVER 2000 中的数据库邮件发送。我知道如何在 SQL 2008 中执行此操作。

```
Column1 | Column 2
------------------
Value 1 | Value 2
Value 1 | Value 2
Value 1 | Value 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T22:16:55.740

我已经意识到这是做不到的。为此，我创建了 .bat 文件和存储过程以及 sendmail 实用程序。

首先在你的 .bat 文件中调用它

> osql -S %ServerName% -d %dbname% -U %username% -P %password% -Q "EXEC" -o %TempFile1% -s "|" -w 5000 >>%日志文件%

然后打电话

> C:\Tools\SendEmail\sendEmail.exe -f -t -u "[%ServerName%] 处理的记录数：%lineCount%" -m "生成的数据文件：%DataFile%" -a %DataFile% -s

# c++ - RapidJSON 库通过索引获取数组中的值

> ID：10037778
> 
> 赞同：15
> 
> 时间：2012-04-06T00:20:37.737
> 
> 标签：c++, c, json

```
{"hi": "hellow",
"first":
    {"next":[
            {"key":"important_value"}
        ]
    }

} 
```

访问数组内的 RapidJSON：

这有效：`cout << "HI VALUE:" << variable["hi"].GetString() << endl;`这将输出：`hellow`正如预期的那样，问题是访问内部值，例如如果我想获得“Important_Value”，我尝试过这样的事情：`cout << "Key VALUE:" << variable["first"]["next"][0]["key"].GetString() << endl ;`但这不起作用，我希望能够获得“important_value” " 由数组的第一项，在这种情况下，它`[0]`是导致错误的原因。

我该怎么做才能通过它的索引来获取它？我希望我的解释很清楚。

提前致谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-06T19:14:58.717

JSON

```
 {"hi": "hellow", "first":  {"next":[{"key":"important_value"}  ] } } 
```

代码：

```
rapidjson::Document document;       

if (document.Parse<0>(json).HasParseError() == false)
{
    const Value& a = document["first"];

    const Value& b = a["next"];

    // rapidjson uses SizeType instead of size_t.
    for (rapidjson::SizeType i = 0; i < b.Size(); i++)
    {
        const Value& c = b[i];

        printf("%s \n",c["key"].GetString());
    }        
} 
```

将打印**important_value**

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-14T07:41:39.433

[更新]

通过贡献者的巧妙工作，RapidJSON 现在可以消除`0`字符串与文字的歧义。所以问题不再发生。

[https://github.com/miloyip/rapidjson/issues/167](https://github.com/miloyip/rapidjson/issues/167)

* * *

正如 mjean 所指出的，问题是编译器无法通过 literial 来确定是应该调用对象成员访问器还是数组元素访问器`0`：

```
GenericValue& operator[](const Ch* name)
GenericValue& operator[](SizeType index) 
```

使用`[0u]`or`[SizeType(0)]`可以解决这个问题。

解决此问题的另一种方法是停止使用 operator[] 的重载版本。例如，`operator()`用于一种访问。或使用普通函数，例如`GetMember()`，`GetElement()`。但我现在对此没有偏好。欢迎提出其他建议。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-17T14:47:47.850

我在 tutorial.cpp 文件中注意到了这一点；

```
// Note:
//int x = a[0].GetInt();         // Error: operator[ is ambiguous, as 0 also mean a null pointer of const char* type.
int y = a[SizeType(0)].GetInt(); // Cast to SizeType will work.
int z = a[0u].GetInt();          // This works too. 
```

我没有测试它，但您可能想尝试其中一种；

变量["first"]["next"][0u]["key"].GetString()

变量["first"]["next"][SizeType(0)]["key"].GetString()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-05T06:37:36.310

如果要使用括号访问它，则可以使用以下命令：

```
int i=0;
cout<<"Key VALUE:"<<variable["first"]["next"][i]["key"].GetString()<<endl ; 
```

输出：键值：important_value

它对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-10T11:56:01.400

```
auto value = my_array[rapidjson::SizeType(index)].GetFoo();
// replace GetFoo with the type of element you are retrieving, e.g. GetString, GetObject 
```

# php - 保护 php 到数据库通信

> ID：10037782
> 
> 赞同：1
> 
> 时间：2012-04-06T00:22:20.673
> 
> 标签：php, mysql, security, database-connection

我有一个带有表单的 PHP 页面。表单有`method="POST"`，动作是另一个将值插入 MySQL 的 PHP 文件。这一切都正常工作。

我的问题是，将信息发送到数据库的第二个 PHP 页面包含信息应该去的用户名、密码、数据库名和表名。我担心有人可以创建自己的 PHP 或 HTML 表单并 POST 到我的第二个 PHP 文件并将任何值提交到我的数据库。

我想将用户名、密码、数据库名和表名放在第一个 PHP 页面（带有表单）上，并将它们作为变量传递给第二个 PHP 表单，从而消除其他人创建自己的表单并发布他们想要的任何内容的威胁。（如果这是可能的并且是正确的方法，你能建议如何传递变量吗？）

这是保护数据库输入的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T01:33:35.787

将您的服务器视为一个黑匣子。它接受请求并响应它们。对于意味着任何时候访问 URL、单击链接或提交表单的网站，这就是请求。服务器对这些请求执行某些操作，并以新网站、重定向、要下载的文件或其他任何内容进行响应。

HTML 表单实际上只是一个从用户那里获取数据并将其打包成请求的接口。重要的不是生成该 HTML 的 HTML 或 PHP，而是发送到服务器的结果请求，其中包含用户输入表单的数据。您甚至可以在没有 HTML 表单的情况下轻松生成此类请求。

使用 Chrome/Safari 中的 Web Inspector、Firefox 中的 Firebug 或 IE 开发人员工具，并查看那里的网络检查工具以查看所有请求-响应并查看其详细信息。

如果您需要对请求进行任何类型的验证，服务器必须这样做。您不能依赖 HTML 表单进行验证。**任何人都可以随时随地将任何数据发送到您的服务器。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T00:28:41.240

> 我担心有人可以创建自己的 PHP 或 HTML 表单并 POST 到我的第二个 PHP 文件并将任何值提交到我的数据库。

他们可以，而且他们甚至不需要费力地创建一个 HTML 页面来做到这一点。

> 这是保护数据库输入的正确方法吗？

这样做的正确方法是永远不允许输入指定表或列名（或任何 SQL 标识符）。输入应仅指定列值或 WHERE 子句中比较中使用的值。

枚举您需要的查询，并想出一种方法让表单指定您想要的特定查询，并确保您正确地对该特定查询进行身份验证。

如果您正在尝试进行[临时报告](http://en.wikipedia.org/wiki/Ad_hoc#Ad_hoc_querying)，请为此明确设计。 [开源和免费的即席/最终用户报告工具](https://stackoverflow.com/questions/1765478/open-source-free-adhoc-end-user-reporting-tool)解决了 PHP 的问题。

> “临时”报告系统允许用户自己创建特定的、定制的查询。

临时报告很难安全地执行，因为许多 SQL 安全最佳实践（如[准备好的语句](https://stackoverflow.com/questions/134099/are-pdo-prepared-statements-sufficient-to-prevent-sql-injection)）不允许使用表名参数化查询，并且临时报告经常存在泄漏[PII](http://en.wikipedia.org/wiki/Personally_identifiable_information)的极端情况，而这些 PII本来是不可用的。

> 我想将用户名、密码……放在第一个 PHP 页面（带有表单）上，并将这些作为变量传递给第二个 PHP 表单

从您的问题中不清楚您正在这样做，但为了清楚起见，您永远不应该导出**数据库**用户名和密码或允许表单输入影响您的数据库连接配置。这使得攻击者更容易

1.  将在防火墙内运行低功耗 shell 的能力隐藏为对数据库的部分接管，
2.  暴力破解你的数据库的管理密码，只给网络访问和时间，然后将任何 SQL 注入漏洞转化为完全接管你的数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T00:31:47.953

不要将databasename 和tablename 放在表单中。在那里放一些有意义的值，然后在服务器端代码上，选择适当的表名和数据库。

例如，添加一个可以采用值“bluepill”或“redpill”的选择字段。收到 POST 数据后，为 bluepill 选择表“good_users”，为 redpill 选择表“evil_users”。

如果表单是注册表单，可以考虑其他验证用户的方法，比如邮箱链接、验证码等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T08:11:18.133

I would agree with deceze response. You can always use captcha or additionally you can do `$_SERVER['HTTP_REFERER']` check ([see here for HTTP_REFERER](http://php.net/manual/en/reserved.variables.server.php)) for the request to your php2.php and bypass all requests which are not from your server.

# c++ - 在文件中维护链接列表

> ID：10037785
> 
> 赞同：1
> 
> 时间：2012-04-06T00:22:50.153
> 
> 标签：c++, file, serialization, linked-list

作为编程作业的一部分，我必须在文本文件中维护一个链表。我对链表数据结构非常方便，但对于 C++ 中的文件却不是很方便。有人可以给我一个想法或概述如何处理它。我应该能够添加或删除链表，也能够添加或删除链表中的节点，或者应该重用在一个链表上删除的空间。每个列表都有一个数字（整数），所有节点的大小相同，包含整数。

我的想法是，

1）维护一个带有数字的文件（包含链接列表数字）

```
0 - NULL
1 - head_offset for_linked_list_num 1
0 - NULL 
1 - head_offset_for_linked_list_num 3
1 - head_offset_for_linked_list_num 3
1 - head_offset_for_linked_list_num 3 
```

等等，其中 -1 是终止符指示，位置中的 1 表示第 i 个位置具有与之关联的位置

2）打开另一个文件并像这样维护链表

```
data next_offset
data next_offset
data NULL 
```

通过这样做，我可以跟踪链表并有效地添加/删除/显示数组。

为了在 C++ 中做我需要了解和学习的功能。我的时间非常少，我可以将其视为基本功能级别的代码。请指教。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T00:42:52.773

对于使用什么函数的问题，您可以参考： [http](http://www.gnu.org/software/libc/manual/html_node/I_002fO-on-Streams.html#I_002fO-on-Streams) ://www.gnu.org/software/libc/manual/html_node/I_002fO-on-Streams.html#I_002fO-on-Streams 阅读本节可能需要15 分钟，涵盖基础知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T00:53:43.170

一种解决方案可能是让每个列表都有它自己的文件。该数字将是磁盘上的文件名。在文件内部，第一行始终是头节点。每行将是两个数据。节点数据后跟文件中下一个节点的行。这将允许您重新使用已删除的空白空间。（下一个节点行的 -1 将是列表的末尾。例如：

1.txt：

```
(data) (next node lines number)
18     2
32     4
4      -1
5      3 
```

所以这个链接列表将是 18 -> 32 -> 5 -> 4

# objective-c - 从另一个类中调用一个类中的 segue

> ID：10037787
> 
> 赞同：0
> 
> 时间：2012-04-06T00:23:38.160
> 
> 标签：objective-c, ios, uiviewcontroller, uialertview, segue

我有一个`UIViewController`在单例对象上调用一个方法的方法，在给定特定条件的情况下，该方法显示一个`UIAlertView`. 当用户点击`UIAlertView`我希望`UIAlertView`消失的按钮时（目前它确实消失了），然后点击它`UIViewController`后面的按钮以转到另一个场景。我的问题是`UIAlertView`来自单例类，而 segue 需要在`UIViewController`.

在`Singleton.m`：

```
-(void)alertView:(UIAlertView *)alertView
clickedButtonAtIndex:(NSInteger)buttonIndex {
    NSString *buttonTitle = [alertView buttonTitleAtIndex:buttonIndex];
    if ([buttonTitle isEqualToString:@"Button!"]) {
        [self performSegueWithIdentifier: @"Segue!" sender: self];
    }
} 
```

我的问题是我用什么来代替`self`它可以让我通知`UIViewController`它是时候做一个 segue 了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T01:13:21.047

“通知”是个好词。:) 我建议让视图控制器监听一个 NSNotification，当它希望 segue 发生时，单例将发布该通知。然后`perform...`代码将移动到响应通知而调用的视图控制器方法中。

# html - 定位 li 元素以覆盖其父 ul 边框以制作标签？

> ID：10037789
> 
> 赞同：0
> 
> 时间：2012-04-06T00:24:03.257
> 
> 标签：html, css

我有一个我正在尝试的[jsFiddle ：](http://jsfiddle.net/rUmyt/)

我的问题是让`<li>`元素在内部下降 1 个像素，`<ul>`因此它们的边框将覆盖`<ul>`边框。

我希望这可以在没有额外标记的情况下完成，但我遇到了麻烦。

有任何想法吗？

```
<ul class="tabs">
    <li class="act">Active</li>
    <li>Not Active</li>
</ul>

body {background:#eee;}
ul
{
   margin:10px; padding-left:20px;
   overflow:hidden;
   border-bottom:solid 1px rgba(0,0,0,.2);
}
li
{
   display:inline-block; margin-right:1px;
   border-bottom:solid 1px transparent; border-radius:7px 7px 0 0;
   height:35px; padding:0 9px;
   font:bold 12px/35px Arial; color:#444;
}
li.act
{
   border-bottom:solid 1px #D4D4D4;
   box-shadow:0 1px rgba(255, 255, 255, 0.75) inset, 0 2px 5px rgba(0, 0, 0, 0.5);              

   background: -moz-linear-gradient(top, #EDEDED 0%, #D4D4D4 65%);
   background: -webkit-linear-gradient(top, #EDEDED 0%, #D4D4D4 65%);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T01:15:34.547

`ul`拥有`border-bottom` *and* 将无法实现您想要的`overflow:hidden`，因为您`li`将在边界之前（上方）被切断。

我看到你希望你`ul`保留`overflow:hidden`隐藏`li`的`box-shadow`。没关系，但我们需要伪造边界。我们可以通过创建一个伪元素来做到这一点，并将其放在`li`'s 后面。这是 CSS 和一个分叉的 JSFiddle：http: [//jsfiddle.net/rgthree/2xfkB/](http://jsfiddle.net/rgthree/2xfkB/)

```
ul {
   position:relative;
   margin:10px; padding-left:20px;
   overflow:hidden;
}
ul:before{
    content:'\0020';
    display:block; height:1px; overflow:hidden;
    position:absolute; bottom:0px; left:0px; right:0px; z-index:1;
    background:rgba(0,0,0,.2);
}
li {
    position:relative; z-index:2; /* position on top of "border" pseudo-element */
    display:inline-block; margin-right:1px;
    border-bottom:solid 1px transparent; border-radius:7px 7px 0 0;
    height:35px; padding:0 9px;
    font:bold 12px/35px Arial; color:#444;
}
li.act{
    border-bottom:solid 1px #D4D4D4;
    box-shadow:0 1px rgba(255, 255, 255, 0.75) inset, 0 2px 5px rgba(0, 0, 0, 0.5);              
    background: -moz-linear-gradient(top, #EDEDED 0%, #D4D4D4 65%);
    background: -webkit-linear-gradient(top, #EDEDED 0%, #D4D4D4 65%);
}​ 
```

# python - 将对象传递给其他对象 - 通过方法或构造函数？

> ID：10037790
> 
> 赞同：2
> 
> 时间：2012-04-06T00:24:05.550
> 
> 标签：python, oop, class, theory

这是情况。我有以下伪类：

```
class Agent:
    def __init__(self):
       self.blah = whatever
       self.boo = thingy

    def doA(self, transport):
       res = transport.doX(self.blah)

    def doB(self, transport):
       res = transport.doY(self.boo)

class Transport:
    def __init__(self):
        self.bah = weee

    def doX(self, item):
        #.. do some other stuff here

    def doY(self, item):
        #.. do some more stuff here 
```

现在，我的问题是 - 我应该将我的传输对象传递给需要它的方法的代理方法，还是应该简单地将传输对象传递给代理构造函数并从方法中调用它？IE

```
transport = Transport()
agent = Agent(transport)
class Agent:
    def __init__(self, transport):
        self.blah = whatever
        self.transport = transport

    def doA(self):
        res = self.transport.doX(self.blah) 
```

我将 Transport 移到它自己的班级的原因是：

1) 代理实例可以共享相同的传输对象 - 即：我只需要一个传输对象用于一组代理。我可以有多个传输（一个用于agentA..N，另一个用于agentO..Z）。

2) 传输包含将代理列表作为参数的方法。例如，给定代理对象列表，它可以对代理运行并发通信测试。

但是，代理本身有时需要在传输中设置的属性（SSL 证书的位置等），以便在代理类中有意义的一些方法（远程重新启动代理等）。

我是否应该采用需要代理列表的方法并将它们移动为 Transport 的类方法，然后在包含 Transport 实例的 Agent 对象中创建一个属性？我是否应该继续我正在做的事情，只需要将 Transport 对象传递给某些 Agent 对象方法？我应该以我没有看到的某种方式重构这一切吗？

任何有用的意见将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T01:25:29.143

由于您甚至考虑将传输作为参数添加到代理的构造函数，因此我假设一个代理永远不会与多个传输一起使用。

我假设一个传输实例可以在没有任何代理连接的情况下做一些有用的事情，反之亦然。

如果我的假设是正确的，我会提出这个建议：

```
class System:
  def associate_transport_and_agent(transport, *agents):
    for agent in agents:
      transport.add_agents(*agents)
      agent.set_transport(transport)

class Transport:
  def __init__(self):
    self.bah = weee
    self.agents = set()
  def add_agents(self, *agents):
    self.agents.update(agents)
  def remove_agent(self, agent):
    self.agents.remove(agent)
  def doX(self, item):
    # ...

class Agent:
  def __init__(self):
    self.blah = whatever
    self.transport = None
  def set_transport(self, transport):
    if self.transport == transport:
      return
    if self.transport is not None:
      self.transport.remove_agent(self)
    self.transport = transport

  def doA(self):
    res = self.transport.doX(self.blah) 
```

如果您打算删除对象，您可能需要通过使用从任一代理到传输或另一个方向的弱引用来帮助垃圾收集器（或者实际上，在您的情况下，在两个方向上，因为您可能在其他地方包含对它们的强引用）。

编辑：

更新以反映代理可能会更改其传输：

*   将代理列表更改为代理集
*   添加了 Transport.remove_agent
*   修改 Agent.set_transport 以检查之前是否已设置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T16:39:31.400

鉴于“代理只能使用 1 个传输，尽管可以切换该传输”，我建议您使用（可选）参数来`__init__`设置传输，并将代理的传输属性设为公共。如果您需要在分配时运行代码，请创建一个属性。

# cakephp - cakephp 将复选框放在单独的行上

> ID：10037791
> 
> 赞同：0
> 
> 时间：2012-04-06T00:24:10.233
> 
> 标签：cakephp, cakephp-2.0

我正在生成这样的复选框

```
foreach($apps as $app){
        echo $this->Form->input($app['Application']['description'], array('type'=>'checkbox','value' => $app['Application']['description']));

    } 
```

它把复选框像

```
checkbox 1
checkbox 2
checkbox 3 
```

我想在哪里

```
checkbox1 checkbox2 checkbox3 
```

**试过了**

```
$x = '';
    foreach($apps as $app){
            $x .= $this->Form->input($app['Application']['description'], array('div'=>false,'type'=>'checkbox','value' => $app['Application']['description']));

        }

echo $x; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T06:15:51.300

Cake 没有把它放在单独的行上，CSS 为你的输入 div 或 label 做。查看您的 CSS 中的输入 div 和标签（通过查看源代码检查类名）以确保您已`display:inline`设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-01T19:39:14.467

这个问题的一个可能的解决方案：

在您的 css 文件（在我的情况下为“cake.generic.css”）中输入：

```
.checkbox{
   padding-right: 15px;
   display:inline-block;
} 
```

在您的 .ctp 文件中：

```
$this->Form->input('fieldName',[
    'type' => 'select',
    'multiple' => 'checkbox'
  ]); 
```

# code-contracts - 如何在 MS 代码合同中找到“屏蔽”断言

> ID：10037797
> 
> 赞同：11
> 
> 时间：2012-04-06T00:25:02.683
> 
> 标签：code-contracts

我在 CodeContracts 的错误列表中有以下消息级条目：

*CodeContracts：检查 410 断言：404 正确（6 屏蔽）*

我想不通：

1.  什么是蒙面断言
2.  如何找到它提到的 6
3.  我是否应该关心他们

抱歉没有发布代码......我不知道如何在一个小样本中重新创建它:)

非常感谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T10:31:54.520

这很简单，在您的项目属性>代码合同>静态检查>中将警告放在“hi”处。

现在 ccCheck 发出了更多警告。

再见。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T21:47:25.377

这些似乎是由于包含在“基线”文件中而被掩盖的断言。从文档（强调我的）：

> 6.6.8 基线
> 
> 将现有代码库带到验证者仅发出少量警告的地步是困难且耗时的，因为它需要添加大量合约。为了更容易在现有代码库上使用合约，并关注由新代码或代码更改引入的警告，可以使用基线功能。
> 
> 要使用基线功能，请选中标有标签的框`Baseline`并提供用于存储基线的文件名。路径相对于项目输出目录。当分析运行且基线文件不存在时，将创建基线。在此运行期间，所有警告都显示在输出中并作为 XML 存储在基线文件中。
> 
> 当分析运行并且基线文件存在时，基线充当过滤器并且***已经在基线中找到的警告不会再次显示。***新警告显示并存储在名为 的文件中`<baseline>.new`，其中`<baseline>`是基线文件的文件名。由于文件存储为文本 XML，因此可以编辑它们并将其他故障添加到基线。该格式不依赖于方法排序，并且可以自由引入用于分组的附加 XML 标记。

我也想知道“蒙面”消息；我关闭了“基线”选项，它们不再出现。因此，您第二个问题的答案似乎是“清除‘基线’复选框。”

至于你是否应该关心他们，我会说，是的，你应该。

# r - 使用递归合并函数或其他方法查找父级的所有后代？

> ID：10037798
> 
> 赞同：1
> 
> 时间：2012-04-06T00:25:04.393
> 
> 标签：r

所以我有一个很大的data.frame。第一列是父项，第二列是子项。

*   1 -> 2
*   1 -> 3
*   2 -> 3
*   2 -> 4
*   2 -> 5
*   6 -> 7
*   6 -> 8
*   7 -> 9

等等..

问题：对于父母的子样本，我想找到他们所有的后代。也就是说，对于一组父母来说，我需要他们的孩子、孙子等等……

输出示例：使用上面的数字，如果我想获得一个包含 1 的后代的 data.frame，我会得到

*   1 -> 2
*   1 -> 3
*   2 -> 3
*   2 -> 4
*   2 -> 5

但不在下面，因为这些不是 1 的后代。他们来自不同的家庭。

*   6 -> 7
*   6 -> 8
*   7 -> 9

最好的方法是什么？

使用合并函数的自连接递归函数？如果是这样，有什么好的例子吗？

还是已经有具有此功能的软件包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T01:27:36.523

也许您想要拆分，但我不完全确定我是否清楚您想要什么：

```
DF <- data.frame(par=rep(1:4, each=4), child = 5:20, granchild = 21:36)
split(DF, DF$par) 
```

# php - PHP 带状数字

> ID：10037799
> 
> 赞同：1
> 
> 时间：2012-04-06T00:25:06.093
> 
> 标签：php, regex, yii

您好，我需要在第一个数字和第二个数字之间加上点，我的结果是：

`11`我要怎么让他这样`1.1`？

```
if ( strlen($model->rate) == 2 )
{

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T00:27:06.143

```
$model->rate = $model->rate[0] . '.' . $model->rate[1]; 
```

**此外**，您的 if 条件应如下所示（注意[等号的数量](http://php.net/manual/en/language.operators.comparison.php)）：

```
if ( strlen($model->rate) == 2 ) 
```

# php - 使用 IP 地址敏感的视图计数器是否会为 MYSQL/PHP 带来过多的工作量？

> ID：10037806
> 
> 赞同：1
> 
> 时间：2012-04-06T00:26:39.950
> 
> 标签：php, mysql, database

我很确定对于 10,000 行 MYSQL 来说这不是什么大问题，但是如果我们有数十万甚至数百万行呢？

有人可能会告诉我 cookie 可以解决问题，但由于我是一名新手程序员，我认为使用 cookie 可能会引发更多问题而不是解决问题。

有没有其他选择？还是我应该坚持使用非 IP 敏感计数器？在我的应用程序中，这个计数器只能被商品的卖家查看，而不是用户，其中一些人可能想要玩弄计数器并多次刷新。因此，如果他们没有看到柜台，他们就不会玩弄提神了。

提前致谢，

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T01:10:02.927

IP 地址基本上是整数。

将它们存储为整数并在相应列上使用索引——这样查询会非常快。请记住，ipv6 地址对于 32 位整数来说太大了，因此您可能需要考虑使用 varchar(16) 代替并存储您的 ip 地址的二进制表示。

关于你的应用程序的性能，在我看来，为这种统计数据使用某种缓存系统总是好的。例如，仅当某个时间间隔已经过去时才重新生成统计信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T01:10:38.773

有很多不同的方法可以解决这个问题。一种方法是记录 item_id、ip_address 和 date，并在所有三列中使用唯一索引。然后`INSERT IGNORE`进入表格 -

```
CREATE TABLE `test`.`view_log` (
  `item_id` INTEGER UNSIGNED NOT NULL,
  `ip_address` INTEGER UNSIGNED NOT NULL,
  `date` DATE NOT NULL,
  PRIMARY KEY (`item_id`, `ip_address`, `date`)
);

INSERT IGNORE INTO view_log ($item_id, INET_ATON('$ip_address'), CURRENT_DATE); 
```

注意：这仅适用于 IPv4。要支持 IPv6，您需要使用不同的方法来存储 IP 地址。

# jquery - 如何在 jquery 中增加 .clone() 的值

> ID：10037807
> 
> 赞同：0
> 
> 时间：2012-04-06T00:27:05.007
> 
> 标签：jquery, forms, clone, auto-increment

我正在尝试克隆一个表单并将表单名称从（例如）#form 和当克隆到 #form1 并在输入上执行相同的操作时，我真的被困在如何做到这一点上！任何帮助都将不胜感激，因为我花了一整天的时间试图弄清楚。这是我的代码：

HTML：

```
<div class="avail">
<form action="submit.php" id="form1" method="post">
<input type="text" name="input1" />
<input type="text" name="anotherinput1" />
<input type="text" name="onemoreinput1" />
<input type="submit" name="submit1" value="submit" />
</form>
</div>

 <input type="submit" value="+" id="copy" /> 
```

JQUERY（用于克隆 div 和表单）：

```
$("#copy").click(function(e) {
       $(".avail").clone().removeAttr('id').insertBefore(this);
       e.preventDefault();
    }); 
```

请如果有人知道如何做到这一点，我将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T03:02:41.900

您可以只计算您有多少可用对象并将其用作新表单 ID 的运行计数。

```
$("#copy").click(function(e) {
   var avails = $(".avail");
   var cnt = avails.length + 1;
   avails.eq(0).clone().insertBefore(this).find("form").attr("id", "form" + cnt);
   e.preventDefault();
}); 
```

你可以在这里看到它的工作原理：http: [//jsfiddle.net/jfriend00/9CU85/](http://jsfiddle.net/jfriend00/9CU85/)

如果您还需要更新元素`name`属性上的数字`input`，那么您也可以使用此代码来执行此操作：

```
$("#copy").click(function(e) {
   var avails = $(".avail");
   var cnt = avails.length + 1;
   avails.eq(0).clone().insertBefore(this)
       .find("form").attr("id", "form" + cnt)
       .find("input").each(function() {
           this.name = this.name.replace(/\d+/, cnt);
       });
   e.preventDefault();
});​ 
```

你可以在这里看到这项工作：http: [//jsfiddle.net/jfriend00/SKjMN/](http://jsfiddle.net/jfriend00/SKjMN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T00:37:57.733

```
$('#copy').click(function(e){
    var formNode = $('.avail form')[0];
    var idAttibute = $(formNode).attr('id');
    var id = id.charAt(idAttibute.length-1);

    var copy = $(".avail").clone().removeAttr('id');
    $(copy).find('form').attr('id', 'form' + id);
    $(copy).insertBefore(this);

}); 
```

# ruby-on-rails - Rails3-autocomplete-jquery 一个控制器中的多个自动完成方法 rails3

> ID：10037809
> 
> 赞同：0
> 
> 时间：2012-04-06T00:27:31.217
> 
> 标签：ruby-on-rails, ruby, autocomplete

我正在使用[rails3-autocomplete-jquery](https://github.com/crowdint/rails3-jquery-autocomplete)。我已经在我的应用程序上运行了基本案例。基本情况是针对下面所述的代码`autocomplete :vendor, :name_en`

我专门用一个控制器来处理名为 auto_controller.rb 的自动完成功能

```
class AutoController < SplashController
  autocomplete :vino, :wine_name
  autocomplete :vendor, :name_en
end 
```

路由.rb

```
get "auto/autocomplete_wine_name" => "auto#autocomplete_wine_name", :controller => 'auto', :action => "autocomplete_wine_name", :via => :get
get "auto/autocomplete_vendor_name_en" => "auto#autocomplete_vendor_name_en", :controller => 'auto', :action => "autocomplete_vendor_name_en", :via => :get 
```

我在访问时收到未知操作`/auto/autocomplete_wine_name`，但是当我访问时`/auto/autocomplete_vendor_name_en`它工作正常。我得到的错误如下：

```
Unknown action

The action 'autocomplete_wine_name' could not be found for AutoController 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T01:34:41.667

我认为您忘记了路线中的类名（vino），您的路线文件不应该是：

```
get "auto/autocomplete_vino_wine_name" => "auto#autocomplete_vino_wine_name", :controller => 'auto', :action => "autocomplete_vino_wine_name", :via => :get 
```

# php - 使用 Sendgrid WebAPI 和 Cron PHP 发送电子邮件

> ID：10037813
> 
> 赞同：1
> 
> 时间：2012-04-06T00:28:37.980
> 
> 标签：php, cron, crontab, sendgrid

我在 PHP 文件中使用以下标准 Sendgrid WebAPI 代码，该代码在通过 Web 浏览器和 Cron wget 访问时成功发送电子邮件。但是，当我尝试使用 Cron php 执行它时，它不起作用。这是示例 SendGrid 代码：

```
$url = 'http://sendgrid.com/';
$user = 'USERNAME';
$pass = 'PASSWORD'; 

$params = array(
    'api_user'  => $user,
    'api_key'   => $pass,
    'to'        => 'example3@sendgrid.com',
    'subject'   => 'testing from curl',
    'html'      => 'testing body',
    'text'      => 'testing body',
    'from'      => 'example@sendgrid.com',
  );

$request =  $url.'api/mail.send.json';

// Generate curl request
$session = curl_init($request);
// Tell curl to use HTTP POST
curl_setopt ($session, CURLOPT_POST, true);
// Tell curl that this is the body of the POST
curl_setopt ($session, CURLOPT_POSTFIELDS, $params);
// Tell curl not to return headers, but do return the response
curl_setopt($session, CURLOPT_HEADER, false);
curl_setopt($session, CURLOPT_RETURNTRANSFER, true);

// obtain response
$response = curl_exec($session);
curl_close($session);

// print everything out
print_r($response); 
```

这是有效的cron：

```
*/5 * * * * root /usr/bin/wget -O /dev/null "http://www.mysite.com/directory/test.php" 
```

这是我想要的 cron，但不起作用：

```
*/5 * * * * /usr/bin/php /var/www/html/directory/test.php 
```

非常困惑...非常感谢您对此的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T00:40:50.073

通常，您会编写一个可以从命令行（或 cron 作业）运行的 php 脚本，如下所示：

```
#!/usr/bin/php
<?php

...

?> 
```

您只需要确保 /usr/bin/php 是 php 可执行文件的路径。通过输入“whereis php”或“which php”找到它

我的猜测是这就是你的脚本没有运行的原因。

# wpf - SQL LocalDB 在 SQL Mgmt Studio 运行脚本中打开

> ID：10037816
> 
> 赞同：1
> 
> 时间：2012-04-06T00:29:54.367
> 
> 标签：wpf, sql-server, sql-server-ce, ssms, sql-server-2012

我在我的 WPF 项目中从 Visual Studio 创建了一个新的 LocalDB 数据库。现在我想运行一个 SQL 脚本来创建其中的所有表。但是我找不到如何使用 SQL Management Studio 打开数据库？它是否应该像 .sdf 文件一样工作，您可以在其中浏览以打开数据库？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T08:38:30.460

您必须按照此处所述安装 SQL Server 2012 Management Studio (Express)：http: [//blogs.msdn.com/b/sqlexpress/archive/2011/10/27/net-framework-4-now-supports-localdb.aspx](http://blogs.msdn.com/b/sqlexpress/archive/2011/10/27/net-framework-4-now-supports-localdb.aspx) - 下载位置：[http ://www.microsoft.com/download/en/details.aspx?id=29062](http://www.microsoft.com/download/en/details.aspx?id=29062)

# python - Python cgi 脚本仅将整数插入 mysql 数据库

> ID：10037820
> 
> 赞同：0
> 
> 时间：2012-04-06T00:30:43.580
> 
> 标签：python, python-3.x, cgi, mysql-python, cgi-bin

我开始用 Python 编写脚本，但遇到了一个奇怪的问题。

我正在尝试将一些值插入 mysql 数据库。数据库字段为 varchar、utf-8 unicode

使用 Python 3.2 和 wamp 服务器 2.2（apache 2.2.21，mysql 5.5.20）

如果我尝试 print(ime)、print(prezime) 等，它会从另一个页面打印表单的值，所以我得到了正确的值。

如果我将 sql 语句写为：

```
"INSERT INTO Clanovi(CL_Ime,CL_Prezime, CL_Email, CL_Tel) VALUES ("aa","aa","aa","aa")" 
```

它将这些值插入数据库

如果我写：

```
sql = "INSERT INTO Clanovi(CL_Ime,CL_Prezime, CL_Email, CL_Tel) VALUES (%s,%s,%s,%s)",(ime,prezime,email,tel) 
```

它不起作用

最后，如果我放

sql = "插入 Clanovi(CL_Ime,CL_Prezime, CL_Email, CL_Tel) 值 (%s,%s,%s,%s)"%(ime,prezime,email,tel)

如果我只在表单字段中输入数字，它将提交到数据库（添加新数据） ime= 21 prezime= 232 email =123 tel=123 如果我输入任何其他内容，例如字母，它不会向数据库添加新行 ime= smth prezime=blabla电子邮件 = aa 电话 =dada

（我知道这种方法有安全风险）

这是整个代码（我放了 print(sql) 只是为了看看我的查询最后是什么样子）

```
#!c:\python32\python.exe
import MySQLdb
import cgi
print ("Content-type: text/html\n\n")

form = cgi.FieldStorage()
ime =form["ime"].value
prezime = form["prezime"].value
email= form["email"].value
tel = form["tel"].value 
print(ime)      
db = MySQLdb.connect("localhost","root","","biblioteka" )

cursor = db.cursor()

sql = "INSERT INTO Clanovi(CL_Ime,CL_Prezime, CL_Email, CL_Tel) VALUES (%s,%s,%s,%s)"%(ime,prezime,email,tel)
print(sql)
try:
   cursor.execute(sql)
   db.commit()
except:
   db.rollback()
db.close() 
```

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T05:41:58.957

你不应该使用 Python 的字符串操作来组装你的查询，因为这样做是不安全的；它使您的程序容易受到 SQL 注入攻击。相反，使用 DB-API 的参数替换。将`?`作为占位符放在要使用值的任何位置，然后提供一个值元组作为游标`execute()`方法的第二个参数：

```
sql = "INSERT INTO Clanovi(CL_Ime,CL_Prezime, CL_Email, CL_Tel) VALUES (?,?,?,?)"
print(sql)
try:
   cursor.execute(sql, (ime, prezime, email, tel))
   db.commit()
except:
   db.rollback()
db.close() 
```

**更新**：卢克是对的（见评论）：MySQL 使用 '%s' 而不是 '?

更新的 sql 语句：`sql = "INSERT INTO Clanovi(CL_Ime,CL_Prezime, CL_Email, CL_Tel) VALUES (?,?,?,?)"`

# r - 如何在不明确命名的情况下按测量变量的总和进行分组？

> ID：10037823
> 
> 赞同：3
> 
> 时间：2012-04-06T00:31:01.333
> 
> 标签：r, aggregate, plyr

我想编写一个函数来分析一个数据集，我需要在其中对每个标识变量组合进行聚合/分组/拆分。不幸的是，测量变量很多，经常改变和枚举它们会导致输入中的脆弱代码和错误。

```
dat <- data.frame(id.a=c('aa','bb','aa','bb'),id.b=c('x','y','x','x'),m.c=c(1:4),m.d=c(5:8)) 
id.vars <- c('id.a', 'id.b')
measure.vars <- setdiff(names(dat),id.vars) 
```

我想总结一下我的测量变量。我找到了方法，但它们都很老套。结果将是

```
id.a id.b m.c m.d
1   aa    x   4  12
2   bb    y   2   6
3   bb    x   4   8 
```

我认为 reshape2 或 ddply 可能是一个解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T01:05:53.657

使用您提供的代码：

```
dat <- data.frame(id.a=c('aa','bb','aa','bb'),id.b=c('x','y','x','x'),m.c=c(1:4),m.d=c(5:8)) 
id.vars <- c('id.a', 'id.b')
measure.vars <- setdiff(names(dat),id.vars) 
```

然后运行：

```
aggregate(dat[measure.vars],dat[id.vars],sum) 
```

产生：

```
 id.a id.b m.c m.d
1   aa    x   4  12
2   bb    x   4   8
3   bb    y   2   6 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T01:29:30.000

使用 plyr：

```
ddply(dat, .(id.a,id.b), numcolwise(function(x) sum(x))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T03:04:06.790

这是一个`data.table`内存效率高的解决方案

```
dat <- data.frame(id.a=c('aa','bb','aa','bb'),id.b=c('x','y','x','x'),m.c=c(1:4),m.d=c(5:8)) 
id.vars <- c('id.a', 'id.b')
measure.vars <- setdiff(names(dat),id.vars)
DT <- as.data.table(dat)
DT[, lapply(.SD, sum), by = id.vars, .SDcols =measure.vars]
##   id.a id.b m.c m.d
## 1:   aa    x   4  12
## 2:   bb    y   2   6
## 3:   bb    x   4   8 
```

假设所有非 id 列都是测量列（隐含在问题中，但未明确说明为要求），那么以下将起作用

```
 DT[, lapply(.SD, sum), by = id.vars] 
```

# python - Python自省：在函数定义中访问函数名和文档字符串

> ID：10037825
> 
> 赞同：20
> 
> 时间：2012-04-06T00:31:22.657
> 
> 标签：python, introspection

考虑以下python代码：

```
def function():
    "Docstring"

    name = ???
    doc = ???

    return name, doc

>>> function()
"function", "Docstring" 
```

我需要用什么替换问号，以便从同一个函数中获取函数的名称和文档字符串？

编辑：到目前为止，大多数答案都明确地将函数的名称硬编码在其定义中。是否有可能做类似下面的事情，新函数 get_name_doc 将从调用它的外部框架访问该函数，并返回其名称和文档？

```
def get_name_doc():
    ???

def function():
    "Docstring"

    name, doc = get_name_doc()

    return name, doc

>>> function()
"function", "Docstring" 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-06T00:36:21.713

这是不可能以一致的方式干净地完成的，因为名称可以更改和重新分配。

但是，只要函数没有被重命名或修饰，您就可以使用它。

```
>>> def test():
...     """test"""
...     doc = test.__doc__
...     name = test.__name__
...     return doc, name
... 
>>> test()
('test', 'test')
>>> 
```

这根本不可靠。这是一个出错的例子。

```
>>> def dec(f):
...     def wrap():
...         """wrap"""
...         return f()
...     return wrap
... 
>>> @dec
... def test():
...     """test"""
...     return test.__name__, test.__doc__
... 
>>> test()
('wrap', 'wrap')
>>> 
```

这是因为名称`test`在函数实际创建时没有定义，并且是函数中的全局引用。因此，每次执行时都会在全局范围内查找它。因此，在全局范围内更改名称（例如装饰器）会破坏您的代码。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-06T01:38:49.837

下面的代码解决了函数名称的问题。但是，它无法检测到 aaronasterling 给出的示例的正确文档字符串。我想知道是否有办法回到与字节码对象关联的抽象语法树。那么阅读文档字符串就很容易了。

```
import inspect

def get_name_doc():
    outerframe = inspect.currentframe().f_back
    name = outerframe.f_code.co_name
    doc = outerframe.f_back.f_globals[name].__doc__    
    return name, doc

if __name__ == "__main__":

    def function():
        "Docstring"

        name, doc = get_name_doc()

        return name, doc

    def dec(f):
        def wrap():
           """wrap"""
           return f()
        return wrap

    @dec
    def test():
        """test"""
        return get_name_doc()

    assert function() == ('function', "Docstring")
    #The assertion below fails:. It gives: ('test', 'wrap')
    #assert test() == ('test', 'test') 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-06T03:59:19.360

这个怎么样：

```
import functools

def giveme(func):
    @functools.wraps(func)
    def decor(*args, **kwargs):
        return func(decor, *args, **kwargs)
    return decor

@giveme
def myfunc(me):
    "docstr"
    return (me.__name__, me.__doc__)

# prints ('myfunc', 'docstr')
print myfunc() 
```

很快，`giveme`装饰器将（装饰的）函数对象添加为第一个参数。这样，函数在被调用时可以访问自己的名称和文档字符串。

由于装饰，原来的`myfunc`功能被替换为`decor`. 为了使第一个参数与 完全相同`myfunc`，传递给函数的是`decor`和不是`func`。

`functools.wraps`装饰器用于给出原始函数的`decor`属性（名称、文档字符串等） 。`myfunc`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-06T01:03:32.243

这将找到调用 get_doc 的函数的名称和文档。在我的意义上， get_doc 应该将函数作为参数（这会使它变得更容易，但实现起来的乐趣更少；））

```
import inspect

def get_doc():
    """ other doc
    """
    frame = inspect.currentframe()

    caller_frame = inspect.getouterframes(frame)[1][0]
    caller_name = inspect.getframeinfo(caller_frame).function
    caller_func = eval(caller_name)

    return caller_name, caller_func.__doc__

def func():
    """ doc string """
    print get_doc()
    pass

def foo():
    """ doc string v2 """
    func()

def bar():
    """ new caller """
    print get_doc()

func()
foo()
bar() 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-25T21:45:32.490

```
>>> import inspect
>>> def f():
...     """doc"""
...     name = inspect.getframeinfo(inspect.currentframe()).function
...     doc = eval(name + '.__doc__')
...     return name, doc
... 
>>> f()
('f', 'doc')
>>> class C:
...     def f(self):
...         """doc"""
...         name = inspect.getframeinfo(inspect.currentframe()).function
...         doc = eval(name + '.__doc__')
...         return name, doc
... 
>>> C().f()
('f', 'doc') 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-10-04T15:43:32.183

对于我的个人项目，我为函数和类方法开发了函数名称和**文档恢复技术。****这些是在一个可导入的模块（SelfDoc.py）中实现的，该模块在其main**中有自己的自检。它包含在下面。此代码在 Linux 和 MacOS 上的 Python 2.7.8 中执行。它正在积极使用中。

```
#!/usr/bin/env python

from inspect import (getframeinfo, currentframe, getouterframes)

class classSelfDoc(object):

    @property
    def frameName(self):
        frame = getframeinfo(currentframe().f_back)
        return str(frame.function)

    @property
    def frameDoc(self):
        frame = getframeinfo(currentframe().f_back)
        doc = eval('self.'+str(frame.function)+'.__doc__')
        return doc if doc else 'undocumented'

def frameName():
    return str(getframeinfo(currentframe().f_back).function)

def frameDoc():
    doc = eval(getframeinfo(currentframe().f_back).function).__doc__
    return doc if doc else 'undocumented'

if __name__ == "__main__":

    class aClass(classSelfDoc):
        "class documentation"

        def __init__(self):
            "ctor documentation"
            print self.frameName, self.frameDoc

        def __call__(self):
            "ftor documentation"
            print self.frameName, self.frameDoc

        def undocumented(self):
            print self.frameName, self.frameDoc

    def aDocumentedFunction():
        "function documentation"
        print frameName(), frameDoc()

    def anUndocumentedFunction():
        print frameName(), frameDoc()

    anInstance = aClass()
    anInstance()
    anInstance.undocumented()

    aDocumentedFunction()
    anUndocumentedFunction() 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-06T00:35:06.687

您必须使用函数的名称来获取它：

```
def function():
    "Docstring"

    name = function.__name__
    doc = function.__doc__

    return name, doc 
```

还有一个名为检查的模块：http: [//docs.python.org/library/inspect.html](http://docs.python.org/library/inspect.html)。这对于获取有关函数（或任何 python 对象）的更多信息很有用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-04-06T00:35:38.063

```
def function():
    "Docstring"

    name = function.__name__
    doc = function.__doc__

    return name, doc 
```

这应该做到这一点，在你的情况下使用函数的名称，`function`.

这是一个非常好的教程，讨论它：[http ://epydoc.sourceforge.net/docstrings.html](http://epydoc.sourceforge.net/docstrings.html)

当然：[http ://docs.python.org/tutorial/controlflow.html#documentation-strings](http://docs.python.org/tutorial/controlflow.html#documentation-strings)

**编辑：**请参阅您编辑的问题版本，我认为您可能不得不`inspect.stack()` [从这个 SO question](https://stackoverflow.com/questions/900392/getting-the-caller-function-name-inside-another-function-in-python)中弄乱。Ayman Hourieh 的回答举了一个小例子。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-04-06T00:36:30.213

```
>>> def function():
        "Docstring"

        name = function.__name__
        doc = function.__doc__

        return name, doc

>>> function()
('function', 'Docstring') 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-04-29T18:20:20.380

对于与“表现良好”的装饰器一起工作的硬编码版本。它必须在函数之后声明。如果函数稍后反弹，则会在此处更新更改。

```
def get_name_doc():
    # global function # this is optional but makes your intent a bit more clear.
    return function.__name__, function.__doc__ 
```

这是一个相当讨厌的 hack，因为它滥用了默认 args 的工作方式。它将使用在此函数“初始化”时绑定到的任何函数，并且即使该函数被反弹，也要记住它。用 args 调用它会导致有趣的结果。

```
def get_name_doc(fn=function):
    return fn.__name__, fn.__doc__ 
```

还有一个动态的，它仍然是硬编码的，但在函数被调用时会更新，参数为 True。基本上这个版本只会在被告知这样做时更新。

```
def get_name_doc(update=False):
    global fn
    if update:
        fn = function
    return fn.__name__, fn.__doc__ 
```

现在当然也有装饰器的例子。

```
@decorator  # applying the decorator decorator to make it well behaved
def print_name_doc(fn, *args, **kwargs):
    def inner(*args, **kwargs):
         print(fn.__doc__, fn.__name__)  # im assuming you just want to print in this case
         return fn(*args, **kwargs)
return inner 
```

你应该阅读装饰器装饰器（至少）。查看 NamedTuple 源（来自集合模块），因为它涉及到硬编码。可悲的是，命名元组代码相当奇怪。它是一种与 eval 而非传统代码一起使用的字符串格式，但它工作得非常巧妙。这似乎是最有希望的变体。您也可以使用元类来做到这一点，这会导致代码简洁，但隐藏在幕后的讨厌的东西，您需要编码。这个 id 建议不要

我怀疑可能有一种比进入检查/反射/模板/元类更简单的方法，只需在模块末尾添加以下行。

```
help(<module>) 
```

您正在处理的模块的名称在哪里（字符串）。甚至是变量 __name__。*如果使用多个模块或单个类，我认为*这也可以在 __init__.py 文件中完成。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-08-28T13:28:53.837

正如多次提到的，在函数内部使用函数名实际上是在当前模块的 globals() 中动态查找。使用任何类型的 eval() 只是它的一种变体，因为它的名称解析将再次与 globals() 字典一起使用。大多数示例都会因成员函数而失败 - 您需要先从 globals() 查找类名，然后才能从中访问成员函数。所以实际上

```
def function():
    """ foo """
     doc = function.__doc__

class Class:
    def function():
        """ bar """
        doc = Class.function.__doc__ 
```

相当于

```
def function():
    """ foo """
     doc = globals()["function"].__doc__

class Class:
    def function():
        """ bar """
        doc = globals()["Class"].function.__doc__ 
```

在许多情况下，这种动态查找就足够了。但实际上你必须在函数中重新输入函数名。但是，如果您编写一个辅助函数来找出调用者的文档字符串，那么您将面临这样一个事实，即辅助函数可能存在于具有不同 globals() 字典的不同模块中。所以唯一正确的方法是使用当前的帧信息来查找函数——但是 Python 的帧对象没有对函数对象的引用，它只携带对它使用的“f_code”代码的引用。它需要通过引用的“f_globals”字典来查找从f_code到函数对象的映射，例如像这样：

```
import inspect

def get_caller_doc():
    frame = inspect.currentframe().f_back.f_back
    for objref in frame.f_globals.values():
        if inspect.isfunction(objref):
            if objref.func_code == frame.f_code:
                return objref.__doc__
        elif inspect.isclass(objref):
            for name, member in inspect.getmembers(objref):
                if inspect.ismethod(member):
                    if member.im_func.func_code == frame.f_code:
                        return member.__doc__ 
```

它被命名为 get_caller_doc() 而不是 get_my_doc() 因为在绝大多数情况下，您确实希望将文档字符串作为参数传递给某个辅助函数。但是辅助函数可以很容易地从它的调用者那里获取文档字符串——我在我的单元测试脚本中使用它，其中一个辅助函数可以使用测试的文档字符串将其发布到一些日志中或将其用作实际的测试数据。这就是为什么提供的帮助程序只查找测试函数和测试成员函数的文档字符串。

```
class MyTest:
    def test_101(self):
        """ some example test """
        self.createProject("A")
    def createProject(self, name):
        description = get_caller_doc()
        self.server.createProject(name, description) 
```

留给读者扩展其他用例的示例。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-01-14T23:19:53.167

参考[http://stefaanlippens.net/python_inspect](http://stefaanlippens.net/python_inspect)

```
import inspect
# functions
def whoami():
    return inspect.stack()[1][3]
def whocalledme():
    return inspect.stack()[2][3]
def foo():
    print "hello, I'm %s, daddy is %s" % (whoami(), whocalledme())
    bar()
def bar():
    print "hello, I'm %s, daddy is %s" % (whoami(), whocalledme())
johny = bar
# call them!
foo()
bar()
johny() 
```

**输出：**

```
hello, I'm foo, daddy is ?
hello, I'm bar, daddy is foo
hello, I'm bar, daddy is ?
hello, I'm bar, daddy is ? 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-10-21T03:33:46.867

你可以试试这个：

```
import inspect

def my_function():
    """
    Hello World!
    """
    print(eval(inspect.currentframe().f_code.co_name).__doc__)

my_function()  # Hello World! 
```

# delphi - 如何强制 TFrame 上的组件拥有自己的事件处理程序？

> ID：10037833
> 
> 赞同：2
> 
> 时间：2012-04-06T00:32:24.850
> 
> 标签：delphi, event-handling, delphi-2006, tframe

我很难让 Delphi 2006 将事件处理程序分配给 TFrame 上独立的组件。

假设我有一个`TComboFrame`包含 TCombo 的框架，`Combo1`我在主窗体的几个地方使用它。

当我将 TComboFrame 的实例放置`MyFrame1`到我的主窗体上，并且我想为组合分配一个事件处理程序时，我通过单击`MyFrame1`放置在窗体上的框架内的 TCombo 并双击空白 `OnChange`字段来实现在对象检查器事件选项卡中。

通常会创建一个新的处理程序，其名称如下：

```
procedure TMainForm.MyFrame1Combo1Change(Sender: TObject); 
```

并且事件处理程序名称源自祖先 TComboFrame ( `Combo1`) 上的组件名称和我放置在表单 ( `MyFrame1`) 上的实例名称 - 即对于 TComboFrame 的该实例是唯一的。然后，我可以对放在主窗体上的框架的其他实例执行此操作，并且它们每个都有自己的事件处理程序。

如果我想要一个为框架的所有实例触发的事件处理程序，我会打开祖先框架本身并在那里执行。

这是我对它应该如何工作的理解，但是某处出了点问题。在我的主窗体上的几个框架实例中，有些有自己的事件处理程序，有些有一个通用的事件处理程序，

```
procedure TDMainForm.ComboFrame1Combo1Change(Sender: TObject); 
```

我尝试过的任何事情都没有破坏这个幻像链接 Delphi 似乎与这个由多个框架共享的公共事件处理程序具有。

我该如何修复这种状态，首先是什么原因造成的？

** 更新 1 **

在阅读了回复和一些实验后，我发现我可以通过以下过程修复有问题的组件：

1）删除框架的所有事件处理程序。
2）删除框架，记住它的名字。
3）复制另一个已知可以的（即有自己的“个人”事件名称）。
4）粘贴那个代替你删除的那个。
5）恢复原名。
6) 创建您的事件处理程序。

...至少，它至少对我有用一次...

** 更新 2 **

另一种解决方法似乎是改写它在对象检查器中双击空事件字段时创建的事件处理程序名称，并使用一个新的唯一名称，然后再次双击该名称。Delphi 然后创建一个具有唯一名称的空处理程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T01:19:38.990

我会在框架中编写另一个事件并在我想要另一个 OnChange 事件时设置它，如下所示：

```
type
  TFrame2 = class(TFrame)
    ComboBox1: TComboBox;
    procedure ComboBox1Change(Sender: TObject);
  private
    FMyChangeEvent: TNotifyEvent;
  public
    property MyChangeEvent: TNotifyEvent read FMyChangeEvent write FMyChangeEvent
  end;

implementation

{$R *.dfm}

procedure TFrame2.ComboBox1Change(Sender: TObject);
begin
  //Your default combo behavior here
  if Assigned(FMyChangeEvent) then
    FMyChangeEvent(Self);
end; 
```

我需要在 OnChange 行为中添加一些内容：

```
type
  TForm1 = class(TForm)
    MyLittleFrame: TFrame2;
  private
    procedure MyOwnCustomLittleOnChangeBehavior(Sender: TObject);
  public
    constructor Create(AOwner: TComponent); override;
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

constructor TForm1.Create(AOwner: TComponent);
begin
  inherited;
  MyLittleFrame.MyChangeEvent :=  MyOwnCustomLittleOnChangeBehavior;
end;

procedure TForm1.MyOwnCustomLittleOnChangeBehavior(Sender: TObject);
begin
  ShowMessage('42');
end; 
```

我通常这样做是因为我不相信在 DFM 中设置事件的 delphi 方式，很容易在不注意的情况下删除整个事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T01:23:16.057

只需单击`TCombo`要断开链接`OnClick`的对象，在 Object Inspector 中清除其事件处理程序分配，然后双击该事件以生成新的事件处理程序。当然，如果生成的事件处理程序名称已经存在，它会被重新使用，但至少 Object Inspector 会在生成事件时重新评估所有的对象名称。

当然，这不是一种非常面向对象的方法。法比奥建议的是更好的选择。尽管我建议将`TFrame`事件声明为，`published`而不是`public`这样，您可以像任何其他事件一样在设计时分配它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T10:00:01.023

我无法在 Delphi6 或 Delphi 2009 中重新创建这种行为。在我看来，有很多框架（并且可能会更改它们的名称添加和删除）你已经愚弄/迷惑了 Delphi 的命名约定，它默认使用它来链接事件和框架最终与以前的名称相同。

因此，双击事件处理程序只会将您置于与由先前删除（或重命名）的框架创建的事件处理程序同名的事件处理程序（但删除框架不会删除旧的事件处理程序。IYSWIM :)

因此，我的回答是，你把框架名称和事件处理程序名称弄得一团糟！

# asp.net-mvc - 面向非 EF/LINQ/ORM 开发人员的 ASP.NET MVC 书籍/教程

> ID：10037838
> 
> 赞同：-1
> 
> 时间：2012-04-06T00:32:56.807
> 
> 标签：asp.net-mvc, data-access

到目前为止，我一直在使用 WebForms，现在想学习 MVC。然而，我能接触到的所有在线资源都更喜欢使用实体框架作为数据库示例。我不想讨论 EF（或一般的 ORM）是好是坏，但我想学习 MVC 而不是任何 ORM。那么您能否推荐一个专注于 MVC 并使用一些更*经典*的数据访问方法（例如 DataReaders）或更简单的抽象层（一些封装数据的集合）的资源（在线或书籍）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T00:42:45.843

与 MVC 一起使用不需要实体框架 - 它只是一种方法。您可以选择任何主要的 MVC 书籍（我推荐 John Galloway 等人或 Dino Esposito 撰写的那些），然后通过专门讨论 EF 的部分（如果这本书确实有这样的部分）。

# javascript - 如何使用 jquery 显示具有相同 id 的众多 div 之一？

> ID：10037841
> 
> 赞同：2
> 
> 时间：2012-04-06T00:33:21.597
> 
> 标签：javascript, jquery, html, css

我正在尝试使用 JQuery 在悬停具有共享 ID 的链接之一时显示/隐藏具有相同 ID 的众多 div 之一。

标记片段

```
<div id='menuOption'>
<a href='#'><div id='cat_name'>$sub[cat_title]</div></a>
<div id='sub_menu' style='display:none;'>$itemlist</div></div>"; 
```

查询片段（我试过的）：

```
$("#cat_name", this).hover(function(){
      $("#sub_menu", this).show();
});
$("#cat_name", this).mouseleave(function(){
      $("#sub_menu", this).hide();
}); 
```

我很感激任何可能帮助我解决这个问题的信息。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T00:41:03.860

HTML id 必须是唯一的。改为使用类来选择 html 元素。

示例：http: [//jsfiddle.net/GPhsC/2/](http://jsfiddle.net/GPhsC/2/)

HTML

```
<div class='menuOption'>
    <a href='#'><div class='cat_name'>$sub[cat_title]</div></a> 
    <div class='sub_menu' style='display:none;'>$itemlist</div>
</div> 
```

jQuery

```
$(".cat_name").hover(function(){
    $(this).parent().parent().find(".sub_menu").show();
},
function() {
    $(this).parent().parent().find(".sub_menu").hide();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T00:34:57.123

拥有多个具有相同 ID 属性的元素是不正确的标记。

您应该通过它们的类属性来识别元素组。

对于你的例子

```
<div class='menuOption'> <a href='#'><div class='cat_name'>$sub[cat_title]</div></a> 
<div class='sub_menu' style='display:none;'>$itemlist</div></div>"; 
```

和

```
$(".cat_name", this).hover(function(){
       $(".sub_menu", this).show();
});
$(".cat_name", this).mouseleave(function(){
      $(".sub_menu", this).hide(); 
}); 
```

# python - 如何使用 C 库创建 Python pypi 包？

> ID：10037842
> 
> 赞同：4
> 
> 时间：2012-04-06T00:33:39.597
> 
> 标签：python, setuptools, distutils, buildout, pypi

我想将IP2Location [Python 库](http://www.ip2location.com/developers/python)放在我正在运行的本地 Pypi / Cheeseshop 服务器上，以便我可以使用 buildout 将其自动包含在项目中。

首先，我按照 IP2Location（简洁）文档中解释的方式安装库来测试库：1）下载[IP2Location C 库](http://www.ip2location.com/developers/c)并编译它 2）`python setup.py build && python setup.py install`在 IP2Location Python 库中运行。

我得到了这个工作，所以我尝试通过运行将 Python 库上传到我的本地 pypi 服务器：

```
python setup.py register -r local sdist upload -r local 
```

它将一个包上传到我的本地 pypi 服务器，但该包只包含库的 Python 部分，而不包含 C 部分。我希望 C 库也包含在内，然后在像 buildout 这样的工具从我的本地 pypi 服务器下载它时自动编译。

我对pypi很陌生。我想要做的甚至可能吗？如果是这样，怎么做？

谢谢，斯科特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T16:49:18.480

不幸的是，没有，至少不是 setup.py 在 python 库中的结构方式。不过，您可能会通过尝试以下方法获得可重复性（请注意，我没有尝试过，IP2Location 是一个专有库）：

通过[zc.recipe.cmmi](http://pypi.python.org/pypi/zc.recipe.cmmi/)在您的构建中构建 C 库。类似于以下的部分应该可以完成这项工作。

```
[iplocationc]
recipe = zc.recipe.cmmi
url = http://www.ip2location.com/downloads/ip2location-c-4.0.2.tar.gz 
```

然后，使用[zc.recipe.egg](http://pypi.python.org/pypi/zc.recipe.egg/1.2.2)将 python 对应项安装为鸡蛋：

```
[iplocation]
recipe = zc.recipe.egg:custom
eggs = iplocation
include-dirs = ${buildout:directory}/parts/iplocationc/includes_dir_goes_here
rpath = ${buildout:directory}/parts/iplocationc/libs_dir_location_goes_here 
```

您可能需要稍微修改一下配方参数，并且可能会摆弄 setup.py，但希望这应该可以做到。

# sql - 构建一个复杂的 rails 查询（或者简单，我可能只是愚蠢）

> ID：10037843
> 
> 赞同：0
> 
> 时间：2012-04-06T00:33:49.187
> 
> 标签：sql, ruby-on-rails

曾几何时，我的sql功夫很强。从那以后，我成为了一名客户端开发人员。

问题出在：我有订阅源、订阅和排名 订阅源有订阅和排名（每个国家代码一个排名） 排名有订阅源和国家代码

我需要的是对于给定的国家代码，获取上周创建的订阅最多的提要

我到底该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T00:40:34.353

很难准确，因为您没有提供列名等，例如

```
select top 10 Feeds.id, Feeds.name from Feeds 
  inner join (
    select count(*) count, feedId from Subscriptions
      where date > ?
      ) as Sub on Sub.feedId=Feeds.id
  inner join Rankings on Rankings.feedId=Feeds.id
  where Rankings.countryCode=? 
  order by Sub.count desc 
```

（我对此的信心不如我之前的回答，但那当然是错误的......）

# java - Java - 静态定义的字符列表

> ID：10037848
> 
> 赞同：2
> 
> 时间：2012-04-06T00:34:59.667
> 
> 标签：java, string, character-class

在任何标准库中是否有字符类（字母、数字、字母数字）的定义？我正在检查字符串是否仅包含字母数字字符或冒号：

```
StringUtils.containsOnly(input, ALPHA_NUMERIC + ":"); 
```

我可以自己定义 ALPHA_NUMERIC，但似乎通用字符类将在标准库中定义，尽管我一直无法找到定义。

编辑：我确实考虑过正则表达式，但对于我的特定用例，执行时间很重要，简单的扫描更有效。

编辑：这里是使用 Regex、CharMatcher 和简单扫描的测试结果（对每个测试使用相同的一组有效/无效输入字符串）：

有效输入字符串：

**CharMatcher**，运行次数：1000000，有效字符串：true，时间（毫秒）：**1200**

**正则表达式**，运行次数：1000000，有效字符串：true，时间（毫秒）：**909**

**扫描**，运行次数：1000000，有效字符串：true，时间（毫秒）：**96**

无效的输入字符串：

**CharMatcher**，运行次数：1000000，有效字符串：false，时间（毫秒）：**277**

**正则表达式**，运行次数：1000000，有效字符串：false，时间（毫秒）：**253**

**扫描**，运行次数：1000000，有效字符串：false，时间（毫秒）：**36**

这是执行扫描的代码：

```
public boolean matches(String input) {
    for(int i=0; i<input.length(); i++) {
        char c = input.charAt(i);
        if( !Character.isLetterOrDigit(c) && c != ':') {
            return false;
        }
    }
    return true;
} 
```

编辑：我重新编译为一个独立的程序（我正在通过 eclipse 运行）：

CharMatcherTester，运行次数：1000000，有效字符串：true，时间（毫秒）：418

RegexTester，运行次数：1000000，有效字符串：true，时间（毫秒）：812

ScanTester，运行次数：1000000，有效字符串：true，时间（毫秒）：88

CharMatcherTester，运行次数：1000000，有效字符串：false，时间（毫秒）：142

RegexTester，运行次数：1000000，有效字符串：false，时间（毫秒）：223

ScanTester，运行次数：1000000，有效字符串：false，时间（毫秒）：32

来源：[https](https://bitbucket.org/jdeveloperw/testing) ://bitbucket.org/jdeveloperw/testing （这是我第一次将测试结果发布到 SO，因此感谢您的评论。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T00:38:42.833

您最好的选择可能是正则表达式[Pattern](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)。

它应该匹配：

```
[\p{Alnum}:]* 
```

*   `\p{Alnum}`- ASCII 字母数字
*   `[]`- 字符类（里面的任何字符都会匹配一个字符）
*   `:`- 字面意思：
*   `*`- 0 个或更多

如果都是字母数字（或:)。

您可以使用[匹配](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#matches%28java.lang.String,%20java.lang.CharSequence%29)或预编译正则表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T00:42:38.207

试试这个，使用正则表达式：

```
boolean containsOnlyAlphanumeric = input.matches("[\\p{Alnum}:]+"); 
```

**编辑 ：**

为了获得最佳性能，您可以预编译模式，将其存储在静态定义的模式常量中，并在必要时重用它：

```
// part of the class declaration
private static final Pattern ALPHANUMERIC_PLUS_COLON = Pattern.compile("[\\p{Alnum}:]+");

// whenever you need to check if the input matches the pattern
boolean containsOnlyAlphanumeric = ALPHANUMERIC_PLUS_COLON.matcher(input).matches(); 
```

我同意 Matthew Flaschen 的观点，您不应该立即丢弃正则表达式，一个精心构建的预编译正则表达式可以与检查输入字符串中所有可能的有效字符的扫描一样快。基准第一！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T00:40:56.047

好吧，当您谈论`regex`在这种情况下，字符类`\w`就代表它时，它确实存在。这就是 String 类具有[matches](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#matches%28java.lang.String%29)方法的原因。

编辑：当添加matches方法时，那个StringUtils类可能早于Java 1.4。Apache Commons 类提供的许多功能已被合并到标准库中。当您必须使用旧版本的 Java 或使用标准库中没有的东西时，它们仍然很有用，但这似乎不是其中一种情况。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T01:42:54.567

[番石榴](http://guava-libraries.googlecode.com) [`CharMatcher`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/base/CharMatcher.html)几乎*正是*您所要求的。这是[维基文章](http://code.google.com/p/guava-libraries/wiki/StringsExplained#CharMatcher)。（披露：我为 Guava 做出了贡献。）

```
CharMatcher matcher = CharMatcher.JAVA_LETTER_OR_DIGIT.or(
  CharMatcher.is(':'));
return matcher.matchesAllOf(string); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T00:47:06.340

正则表达式匹配可以完成这项工作。例如 MyString.matches("[a-zA-Z0-9:]*");

# c# - 确保此代码文件中定义的类与“继承”属性匹配

> ID：10037856
> 
> 赞同：2
> 
> 时间：2012-04-06T00:35:41.493
> 
> 标签：c#, asp.net, sql-server, inheritance

我正在设置一个自定义选项卡，用户可以在其中查看和编辑数据。我需要建立一个受信任的 SQL 连接并将数据显示在网格视图中。

我应该构建控制台还是 Web 应用程序？

我在下面提供了我的 .aspx 和 aspx.cs 文件。

我在运行它时收到以下错误消息：

> “错误：确保此代码文件中定义的类与 'inherits' 属性匹配，并且它扩展了正确的基类（例如 Page 或 UserControl）”。

这是我的 Default.aspx 代码：

```
<%@PageLanguage="C#"AutoEventWireup="true"CodeFile="Default.aspx.cs"Inherits="_Default"%>
<!DOCTYPEhtmlPUBLIC"-//W3C//DTD XHTML 1.0 Transitional//EN""http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <headrunat="server">
        <title></title>
    </head>
    <body>
        <formid="form1"runat="server">
        </form>
    </body>
</html> 
```

这是我的 Default.aspx.cs 代码：

```
///<summary>
///Demonstrates how to work with SqlConnection objects
///</summary>
class SqlConnectionDemo
{
    static void Main()
    {
        // 1\. Instantiate the connection
        SqlConnectionconn = newSqlConnection("Data Source=TestDB;Initial Catalog=Impresario;Integrated Security=SSPI");
        SqlDataReaderrdr = null;
        try
        {
            // 2\. Open the connection
            conn.Open();
            // 3\. Pass the connection to a command object
            SqlCommandcmd = newSqlCommand("select * from LT_WEB_DONATIONS_EXTRA_INFO_TEMP", conn);

            //
            // 4\. Use the connection
            //
            // get query results
            rdr = cmd.ExecuteReader();

            // print the CustomerID of each record
            while (rdr.Read())
            {
            Console.WriteLine(rdr[0]);
            }
        }
        finally
        {
            // close the reader
            if(rdr != null)
            {
                rdr.Close();
            }

            // 5\. Close the connection
            if(conn != null)
            {
                conn.Close();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-01T14:23:24.247

虽然已经有一个选定的答案，而且我的答案并不完全适用于这个特定问题，但我不止一次遇到过这个问题，并且偶尔会有其他原因。就在今天早上，当我尝试构建并且我正确地从 System.Web.UI.Page 继承时，我遇到了这个错误。事实上，我搜索了代码文件，一切看起来都很好。但是，经过仔细检查，我发现缺少的是条件语句上的一个右括号，它以某种方式导致了不相关的错误。

我并不是说我的答案是这个问题的正确答案，因为在问题的代码中开括号和右括号的数量似乎很好，我只是说值得检查。如果这可以节省一个人 10 分钟，那值得我花时间。谢谢！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-06T00:47:30.693

您的代码隐藏页面必须继承自`System.Web.UI.Page`，如下所示：

```
public partial class _Default : System.Web.UI.Page
{

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T00:41:38.923

如果你想在 gridview 中显示数据，那么控制台应用程序没有意义……它必须是一个 Web 应用程序。来到你的错误..在你的 aspx 文件中发布第一行，它看起来像这样

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Login.aspx.cs"
    Inherits="Login" MasterPageFile="~/MasterPage.master" %> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-21T09:58:44.227

我在使用 Visual Studio 2005 时遇到了这个问题，我刚刚删除了代码的命名空间部分并清除了所有错误

我是这样设计的：

public partial class bla : System.Web.UI.Page { ***你所有的代码和东西*** }

这就是它对我有用的方式。

# iis - 是否可以使用 Microsoft.Web.Administration 在基于云的 Appharbor 或 Azure 上操作 IIS 7？

> ID：10037862
> 
> 赞同：1
> 
> 时间：2012-04-06T00:36:23.650
> 
> 标签：iis, azure, appharbor

我一直在[AppHarbor](https://appharbor.com/)上托管一些应用程序，这非常棒，但现在我遇到了需要以编程方式在 IIS 中启动虚拟目录/应用程序和应用程序池。根据我*迄今为止*有限的理解，这种类型的操作似乎最适合 Microsoft.Web.Administration。

根据我对 AppHarbor 架构的理解，这似乎不是一个可行的期望，对吗？

Azure 怎么样？我已经进行了一些挖掘，它似乎“完全支持” IIS，但我不确定 IIS 应用程序的传统概念如何/是否与这些基于云的服务融为一体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T01:16:12.037

AppHarbor 不支持此功能，但请注意，您可以[使用我们的 API 创建新应用程序](http://support.appharbor.com/kb/api/applications-api)。

这在 Azure 上可能是可行的，特别是如果您选择一个可以自己管理所有内容的 vm 角色。配置应用程序池 [显然是可能的](http://things.smarx.com/#Configure IIS Application Pools)。

# bash - 管道文件名从 grep 到函数

> ID：10037863
> 
> 赞同：0
> 
> 时间：2012-04-06T00:36:25.550
> 
> 标签：bash, shell, grep

我正在使用一个简单的函数，它输出一些关于我在集群上运行的作业的有用信息。它被称为报告：

```
function report()
{
   for FILE in $*;
      do tac $FILE | grep best -m1;
   done;
} 
```

我想对我生成的输出文件调用报告，但前提是出现问题并且作业终止。输出文件将`Terminated`作为最后一行。因此，例如：

```
[XXXXXX@login-0-0 scripts]$ grep Term optim_HGF.o1910512 -n
242:Terminated

[XXXXXX@login-0-0 scripts]$ report optim_HGF.o1910512
New best fit at function call 4496\.  Took 6.292452e+00 seconds. Objective = 4.129260e-01 
```

现在我尝试使用 grep 来查找出现问题的文件并通过管道传输名称以进行报告。

```
[XXXXXX@login-0-0 scripts]$ grep optim_HGF.o* -l | report 
```

但这没有输出。我怎样才能完成我的目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T00:38:44.497

您缺少的命令是`xargs`：

```
grep -l Term optim_HGF.o* | xargs report 
```

# ruby - 在 Rails 中使 TimeWithZone 对象变得惰性

> ID：10037865
> 
> 赞同：2
> 
> 时间：2012-04-06T00:36:45.793
> 
> 标签：ruby, performance, profiling

我怎样才能`ActiveSupport::TimeWithZone`更快地构建或懒惰？

我一直在分析我的 Rails 应用程序，我发现三分之一的 cpu 时间用于构建这些`TimeWithZone`对象。我对此束手无策。看似简单的时间对象怎么可能构建起来如此昂贵？

这是每个请求运行无数次的代码：

```
def deserialize_from_cache(json)
  attributes = ActiveSupport::JSON.decode(json)
  attributes.keys.to_a.each do |k|
    v = attributes[k]
    if v.is_a? Array and v.length == 2 and v[0] == 'Time'
      attributes[k] = Time.at(v[1]).in_time_zone # This is the expensive code
    end
  end
  self.allocate.init_with('attributes' => attributes)
end 
```

我对普通的旧`Time`对象构造进行了基准测试，发现它比`TimeWithZone`构造快一个数量级：

```
puts Benchmark.measure { 200000.times { Time.at(1330367843) } }
  0.070000   0.000000   0.070000 (  0.068956)

puts Benchmark.measure { 200000.times { Time.at(1330367843).in_time_zone } }
  0.720000   0.000000   0.720000 (  0.715802) 
```

我可以做些什么来以编程方式将所有模型的日期时间属性替换`TimeWithZone`为普通旧（且便宜）`Time`对象的惰性对象，直到它们被使用时它们变成`TimeWithZone`对象？这远远超出了我的 Ruby 能力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:27:18.177

这个问题让我印象深刻的是，您关注的代码是从内部调用的`deserialize_from_cache(json)`。为什么经常这么叫*？*您能否进一步查看调用链，看看是否可以减少 json-to-time 解析的数量？

# java - eclipse checkstyle自定义检查与maven

> ID：10037869
> 
> 赞同：2
> 
> 时间：2012-04-06T00:37:02.523
> 
> 标签：java, eclipse, plugins, maven, checkstyle

我编写了一些自定义 checkstyle 检查并将它们存储在一个 jar 中以与 maven checkstyle 插件一起使用。我为 eclipse checkstyle 插件使用了同一个 jar。如果我需要更新自定义检查，在 maven 中很容易（只需更新 pom 中的版本）。要更新插件，我需要在 eclipse 中手动替换该插件文件。有没有办法让这两个文件自动保持同步？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T22:25:10.450

您应该添加一个`maven-eclipse-plugin`并添加 checkstyle 构建器和 checkstyle 性质，并使用自定义配置来指示要使用的检查。
由于您已经在 jar 中进行了自定义检查，因此您必须在 maven-eclipse-plugin 中向该 jar 添加依赖项。[在这里](http://jgonian.wordpress.com/2010/12/12/maven-checkstyle-and-eclipse/)

解释得更好

# javascript - 如何从html中删除数据元素

> ID：10037871
> 
> 赞同：2
> 
> 时间：2012-04-06T00:37:07.493
> 
> 标签：javascript, html

我有一个带有 data-toggle="dropdown" 的 href，我正在尝试删除它。这个片段似乎不起作用：

```
$(document).on('click','a',function() {
$(this).data('toggle','Phillip Senn');
}); 
```

相反，Firebug 显示 data-toggle 仍然等于“dropdown”，并且有一个新的“toggle”属性等于“Phillip Senn”。

我想做的是完全删除它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T00:51:12.527

如果你在 HTML 上有一个属性并且你想同时删除它和 jQuery 数据，那么你可以使用这个：

```
this.removeAttribute("data-toggle");
$(this).removeData('toggle'); 
```

只是，jQuery 数据会随着后续写入而更新`.data()`，但如果您想删除最初在 HTML 对象上的属性，那么您也必须调用`removeAttribute()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T00:41:26.350

我认为它是这样的......

```
$(this).removeData('toggle'); 
```

要删除属性：

```
$(this).removeAttr("the-name-of-the-attribute"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T00:41:49.547

[删除数据](http://api.jquery.com/jQuery.removeData/)

我不明白人们如何在谷歌搜索[jquery 删除数据](http://riii.nl/5mk3x)并单击第一个结果时花时间发布问题只会在很短的时间内给他们答案......

# google-app-engine - 将 Google App Engine 与 GoDaddy 域结合使用

> ID：10037876
> 
> 赞同：3
> 
> 时间：2012-04-06T00:37:52.667
> 
> 标签：google-app-engine

我在 GoDaddy 设置中设置了 301 重定向。它仍然没有更新，我越来越不耐烦了。

如果我将 DNS A 条目设置为 google 的服务器会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:57:49.057

谷歌表明您可以将裸网址重定向到您需要做的子域。

例如 mydomain.com 到 www.mydomain.com 这样用户无论如何都可以访问您的应用程序。

[http://support.google.com/a/bin/answer.py?hl=en&answer=2518373](http://support.google.com/a/bin/answer.py?hl=en&answer=2518373)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T00:51:56.990

如果您使用 Go Daddy 域转发，您需要在停放的名称服务器上，并且您需要确保您使用的是 IP 64.202.189.170。如果您没有将此 IP 用于您的 A 记录，则转发将不起作用。

# java - 如何使用片段将标题放入 ViewPager？

> ID：10037887
> 
> 赞同：7
> 
> 时间：2012-04-06T00:39:14.157
> 
> 标签：java, android, android-fragments, android-viewpager, android-fragmentactivity

我正在使用 ViewPager 允许用户在片段之间滑动。

如何在屏幕上添加每个片段的标题？

```
package com.multi.andres;

import java.util.List;
import java.util.Vector;

import com.viewpagerindicator.TitlePageIndicator;
import com.viewpagerindicator.TitleProvider;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.view.ViewPager;

public class ViewPagerFragment extends FragmentActivity{

    private PagerAdapter mPagerAdapter; //contiene el pager adapter
    private static String[] titulosPaginas = { "APP 1", "APP 2" };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.setContentView(R.layout.lcmeter); //layout que contiene el ViewPager

        initialisePaging(); //inicializo las paginas
    }

    private void initialisePaging() {

        List<Fragment> fragments = new Vector<Fragment>();
        fragments.add(Fragment.instantiate(this, FragmentPrueba1.class.getName()));
        fragments.add(Fragment.instantiate(this, FragmentPrueba2.class.getName()));
        this.mPagerAdapter  = new PagerAdapter(super.getSupportFragmentManager(), fragments);

        ViewPager pager = (ViewPager)super.findViewById(R.id.pager);
        pager.setAdapter(this.mPagerAdapter);

        //Agrega los titulos
        TitlePageIndicator titleIndicator = (TitlePageIndicator) findViewById(R.id.titulos);    //layout XML
        titleIndicator.setViewPager(pager);
    }

    /** *************************************************************************************************
    /** Clase:   public class PagerAdapter extends FragmentPagerAdapter implements TitleProvider
    /** Notas:   extends FragmentPagerAdapter permite el uso de las paginas de ViewPager pero con Fragments
    /**          implements TitleProvider permite el uso de los titulos en las paginas
    /** Funcion: crea paginas por las cuales deslizarse horizontalmente las cuales son usadas
    ****************************************************************************************************/
    public class PagerAdapter extends FragmentPagerAdapter implements TitleProvider {

        private List<Fragment> fragments;

        public String getTitle(int position) {
            // TODO Auto-generated method stub
            return titulosPaginas[position];    // titulo de la pagina
        }

        public PagerAdapter(FragmentManager fm, List<Fragment> fragments) {
            super(fm);
            this.fragments = fragments;
        }

        @Override
        public int getCount() {
            return this.fragments.size();
        }

        @Override
        public Fragment getItem(int position) {
            return this.fragments.get(position);
        }

    }

} 
```

但它没有显示 ViewPager 的标题，我不知道为什么。我以前使用带有标题的 ViewPager，但没有使用片段，现在我无法使标题正常工作。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-06T04:53:34.427

您还可以使用 Jake Wharton 的[ViewPagerIndicator](http://viewpagerindicator.com/)库来获得所需的效果。`ViewPager`Davek804 的答案也有效，但它需要您参考整个 ActionBarSherlock 库，如果您只需要支持自定义/样式标题的，那么这不是可取的。

设置它以使其正常工作只需要编写一点点 XML，`ViewPager`在 your 中初始化`Activity`，并实现一个`FragmentAdapter`(which `extends FragmentPagerAdapter implements TitleProvider`) 来指定哪些页面保存 which `Fragment`s。

1.  XML 布局

    ```
    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <com.viewpagerindicator.TabPageIndicator
            android:id="@+id/titles"
            android:layout_height="wrap_content"
            android:layout_width="match_parent"/>

        <android.support.v4.view.ViewPager
            android:id="@+id/pager"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"/>

    </LinearLayout> 
    ```

2.  在你的初始化`Activity`

    ```
    //Set the pager with an adapter
    ViewPager pager = (ViewPager)findViewById(R.id.pager);
    pager.setAdapter(new CustomAdapter(getSupportFragmentManager()));

    //Bind the title indicator to the adapter
    TitlePageIndicator titleIndicator = (TitlePageIndicator) findViewById(R.id.titles);
    titleIndicator.setViewPager(pager); 
    ```

3.  实施一个`CustomFragmentAdapter`

    ```
    public static class CustomFragmentAdapter extends FragmentPagerAdapter 
            implements TitleProvider {

            public static final int POSITION_PAGE_1 = 0;
            public static final int POSITION_PAGE_2 = 1;
            public static final int POSITION_PAGE_3 = 2;

            private static final String[] TITLES = new String[] { 
                "Title 1", 
                "Title 2", 
                "Title 3" 
            };

            public static final int NUM_TITLES = TITLES.length;

            public CustomFragmentAdapter(FragmentManager fm) {      
                super(fm);
            }

            @Override
            public Fragment getItem(int position) {     
                switch (position) {
                case POSITION_TITLE_1:              
                    return PageOneFragment.newInstance();
                case POSITION_TITLE_2: 
                    return PageTwoFragment.newInstance();
                case POSITION_TITLE_3:
                    return PageThreeFragment.newInstance();         
                }
                return null;
            }

            @Override
            public int getCount() {
                return NUM_TITLES;
            }

            @Override
            public String getTitle(int position) {
                return TITLES[position % NUM_TITLES].toUpperCase();
            }
        } 
    ```

* * *

## 编辑：

该[`ViewPagerIndicator`](http://viewpagerindicator.com/)库支持标题功能：

1.  `TitlePageIndicator`

    ![标题页指示器](../Images/4460d585a1c4453a0ac02adf604537ba.png)

2.  `TabPageIndicator`

    ![标签页指示器](../Images/081cc87815497b7a237e5d199a240c04.png)

3.  `CirclePageIndicator`

    ![圆形页面指示器](../Images/48e038cc04950731900ccc9a52112298.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-06-18T10:43:09.817

或者如果您不喜欢使用第三方库，您可以使用支持 v4 PagerTabStrip 类。例如：

```
<android.support.v4.view.ViewPager
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="0px"
    android:layout_weight="1">
    <android.support.v4.view.PagerTabStrip
        android:id="@+id/pts_main"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />
</android.support.v4.view.ViewPager> 
```

并在 PagerAdapter 覆盖 getPageTitle 方法：

```
public static class MyAdapter extends FragmentPagerAdapter  {
    ...
    @Override
    public CharSequence getPageTitle(int position) {
        return String.valueOf(position);
    }
} 
```

您可以从如下代码访问 xml 元素：

```
protected void onCreate(Bundle savedInstanceState) {
    setContentView(R.layout.pager);
    ...
    mAdapter = new MyAdapter(getSupportFragmentManager());
    // Add custom adapter
    mPager = (ViewPager)findViewById(R.id.pager);
    mPager.setAdapter(mAdapter);

    // Get PagerTabStrip
    PagerTabStrip strip = (PagerTabStrip) findViewById(R.id.pts_main);
    strip.setDrawFullUnderline(false);
    ... 
```

我希望它对某人有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T00:52:51.843

在我说 SherlockFragmentActivity 的地方，你可以只拥有 FragmentActivity。getSupportActionBar 可以是 getActionBar()。

```
public class Polling extends SherlockFragmentActivity implements OnMenuItemClickListener {
    private ViewPager mViewPager;
    private TabsAdapter mTabsAdapter;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mViewPager = new ViewPager(this);
        mViewPager.setId(R.id.pager);
        setContentView(mViewPager);
        bar = getSupportActionBar();
        bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        bar.setDisplayShowTitleEnabled(false);
        bar.setDisplayShowHomeEnabled(false);
        mTabsAdapter = new TabsAdapter(this, mViewPager);
        mTabsAdapter.addTab(bar.newTab().setText(R.string.login),
                LoginFragment.class, null);
        mTabsAdapter.addTab(bar.newTab().setText(R.string.economics),
                EconFragment.class, null);
        mTabsAdapter.addTab(bar.newTab().setText(R.string.elections),
                ElectionsFragment.class, null);
        mTabsAdapter.addTab(bar.newTab().setText(R.string.politics),
                PoliticsFragment.class, null);
        mTabsAdapter.addTab(bar.newTab().setText(R.string.science),
                ScienceFragment.class, null);
        mTabsAdapter.addTab(bar.newTab().setText(R.string.finance),
                FinanceFragment.class, null);
        mTabsAdapter.addTab(bar.newTab().setText(R.string.religion),
                ReligionFragment.class, null);
        mTabsAdapter.addTab(bar.newTab().setText(R.string.military),
                MilitaryFragment.class, null);
        mTabsAdapter.addTab(bar.newTab().setText(R.string.international),
                InternationalFragment.class, null); 
    }

    public static class TabsAdapter extends FragmentPagerAdapter
    implements ActionBar.TabListener, ViewPager.OnPageChangeListener {
        private final Context mContext;
        private final ActionBar mActionBar;
        private final ViewPager mViewPager;
        private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

        static final class TabInfo {
            private final Class<?> clss;
            private final Bundle args;

            TabInfo(Class<?> _class, Bundle _args) {
                clss = _class;
                args = _args;
            }
        }

        public TabsAdapter(SherlockFragmentActivity activity, ViewPager pager) {
            super(activity.getSupportFragmentManager());
            mContext = activity;
            mActionBar = activity.getSupportActionBar();
            mViewPager = pager;
            mViewPager.setAdapter(this);
            mViewPager.setOnPageChangeListener(this);
        }

        public void addTab(ActionBar.Tab tab, Class<?> clss, Bundle args) {
            TabInfo info = new TabInfo(clss, args);
            tab.setTag(info);
            tab.setTabListener(this);
            mTabs.add(info);
            mActionBar.addTab(tab);
            notifyDataSetChanged();
        }

        public int getCount() {
            return mTabs.size();
        }

        public SherlockFragment getItem(int position) {
            TabInfo info = mTabs.get(position);
            return (SherlockFragment)Fragment.instantiate(mContext, info.clss.getName(), info.args);
        }

        public void onPageSelected(int position) {
            mActionBar.setSelectedNavigationItem(position);
        }
        public void onPageScrollStateChanged(int state) {}
        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {}

        public void onTabSelected(Tab tab, FragmentTransaction ft) {
            mViewPager.setCurrentItem(tab.getPosition());
            //Log.v(TAG, "clicked");
            Object tag = tab.getTag();
            for (int i=0; i<mTabs.size(); i++) {
                if (mTabs.get(i) == tag) {
                    mViewPager.setCurrentItem(i);
                }
            }
        }
        public void onTabUnselected(Tab tab, FragmentTransaction ft) {}
        public void onTabReselected(Tab tab, FragmentTransaction ft) {}
        public void onTabReselected(Tab tab, android.app.FragmentTransaction ft) {}
        public void onTabUnselected(Tab tab, android.app.FragmentTransaction ft) {}
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T00:52:42.460

@Alex Lockwood 谢谢你 :) 我还有一个问题：/ 这是我的 XML：

**lcmeter.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </android.support.v4.view.ViewPager>

    <com.viewpagerindicator.TitlePageIndicator
        android:id="@+id/titulos"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

如果在“android.support.v4.view.ViewPager”之前放置“TitlePageIndicator”，则在第一篇文章中使用我的原始代码，我可以看到标题，但我不能只点击标题更改页面并且我的片段没有显示，而是显示XML 这样我可以浏览我的片段，但我看不到标题：/。我以这种方式尝试了whit构造函数：

```
package com.multi.andres;

import java.util.List;
import java.util.Vector;

import com.viewpagerindicator.TitlePageIndicator;
import com.viewpagerindicator.TitleProvider;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.view.ViewPager;

public class ViewPagerFragment extends FragmentActivity{

    private PagerAdapter mPagerAdapter; //contiene el pager adapter
    String[] titulosPaginas = { "APP 1", "APP 2" };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.setContentView(R.layout.lcmeter); //layout que contiene el ViewPager

        initialisePaging(); //inicializo las paginas
    }

    private void initialisePaging() {

        List<Fragment> fragments = new Vector<Fragment>();
        fragments.add(Fragment.instantiate(this, FragmentPrueba1.class.getName()));
        fragments.add(Fragment.instantiate(this, FragmentPrueba2.class.getName()));
        this.mPagerAdapter  = new PagerAdapter(super.getSupportFragmentManager(), fragments);

        ViewPager pager = (ViewPager)super.findViewById(R.id.pager);
        pager.setAdapter(this.mPagerAdapter);

        //Agrega los titulos
        TitlePageIndicator titleIndicator = (TitlePageIndicator) findViewById(R.id.titulos);    //layout XML
        titleIndicator.setViewPager(pager);
    }

    /** *************************************************************************************************
    /** Clase:   public class PagerAdapter extends FragmentPagerAdapter implements TitleProvider
    /** Notas:   extends FragmentPagerAdapter permite el uso de las paginas de ViewPager pero con Fragments
    /**          implements TitleProvider permite el uso de los titulos en las paginas
    /** Funcion: crea paginas por las cuales deslizarse horizontalmente las cuales son usadas
    ****************************************************************************************************/
    public class PagerAdapter extends FragmentPagerAdapter implements TitleProvider {

        private List<Fragment> fragments;

        public String getTitle(int position) {
            // TODO Auto-generated method stub
            return titulosPaginas[position];    // titulo de la pagina
        }

        public PagerAdapter(FragmentManager fm, List<Fragment> fragments) {
            super(fm);
            this.fragments = fragments;
        }

        @Override
        public int getCount() {
            return this.fragments.size();
        }

        @Override
        public Fragment getItem(int position) {
            try {
                FragmentPrueba1.class.newInstance();
            } catch (InstantiationException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return this.fragments.get(position);
        }

    }

} 
```

但是当我打开应用程序时，我有一个 FC。这是我的片段两者都相等：

```
package com.multi.andres;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.LinearLayout;

public class FragmentPrueba1 extends Fragment {

    FragmentPrueba1 (){

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        return (LinearLayout)inflater.inflate(R.layout.prueba1, container, false);

    }

} 
```

它是 XML 片段：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:background="#FF0000" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Numero 1 !!" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Esto es un boton XD" />

</LinearLayout> 
```

我已经阅读了有关 Fragments 的信息，但我无法获得带有标题的 Fragments，这没有任何意义：/ 我是新手，但我正在学习，对我来说非常复杂，这种事情非常感谢你的帮助，我真的很感激:)

***编辑：***

我想我已经找到了问题所在，它不在 Java 代码上，问题出在 XML 文件 ViewPager 上：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </android.support.v4.view.ViewPager>

    <com.viewpagerindicator.TitlePageIndicator
        android:id="@+id/titulos"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

这似乎“克服”了标题，因为如果我使用在 android.support.v4.view.ViewPager 上添加 android:layout_weight="1" 的 Google 示例的 XML 文件，我可以在屏幕底部看到标题，不是在顶部而是一个进步:)

# sql - 在sql中对月份进行排序

> ID：10037898
> 
> 赞同：1
> 
> 时间：2012-04-06T00:41:00.007
> 
> 标签：sql, tsql, reporting-services

我有这样的查询

```
SELECT [Year], Month, AVG(salary) AS [salary] FROM table1 
    GROUP BY [Year],[Month]
    ORDER BY Year,Month 
```

但是月份被填充为一月，二月，......等。当我说`order by month`我将通过字母订购它们时。我在想是否有任何范围，比如将 jan 设为 1，将 feb 设为 2 等等，然后对数字进行排序

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T00:47:50.077

尝试使用以下内容：

```
ORDER BY Year, CASE Month WHEN 'Jan' THEN 1 WHEN 'Feb' THEN 2 .... END 
```

填写`....`剩余月份。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T11:05:43.503

尝试以下操作：

```
ORDER BY convert(date, '01 ' + [Month] + ' ' + convert(varchar,[Year]) , 106) 
```

# api - Thrift 作为 REST 的公共 API 替代品？

> ID：10037900
> 
> 赞同：22
> 
> 时间：2012-04-06T00:41:18.350
> 
> 标签：api, rest, thrift

我开始为我正在开发的新网站创建 API。

我最初想让它成为一个普通的 REST API，但我一直在想，如果能够在一批中编译多个客户端库，那会是多么酷。

Thrift 是公共 API、套接字和所有的可行选项，还是我应该坚持使用 REST？

如果使用 REST，创建多个客户端库的最佳方法是什么，或者我是否只需要放下心来并实际编写它们？

否则，如果 Thrift，我会编译库并只提供下载链接还是简单地给开发人员 .thrift 文件以生成他们自己的库？

**注意：它仍然是一个小站点，所以我会为 API 创建 Thrift 规范文件。**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-12T00:18:23.693

首先，REST 和 Thrift 是对橘子的苹果——前者是通用风格，后者是特定的二进制 RPC 系统。

但是对于公共接口，我认为使用标准文本格式（通常是 JSON 或 XML）的 REST 更有意义；因为它更容易从任何语言或平台访问；尽管在许多平台上都有 Thrift 客户端，但它仍然需要做更多的工作。它还强制客户端使用特定的访问方式，几乎必须使用特定的 Thrift 客户端库。

所以问题宁愿是你究竟想要获得什么？您到底认为那里“酷”是什么？如果你只是想玩新技术，那没有错，但你应该先玩它，然后看看它是否有意义。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-06T07:11:41.217

如果您的 API 足够简单，您可以使用 REST 来表达它并具有可接受的性能，那么坚持 REST 可能会更好，因为为基于 REST 的 API 编写客户端代码的障碍通常较低。

另一方面，如果 REST 存在复杂性或性能问题，请使用 thrift 或其他更合适的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-26T12:39:27.937

如果您自己开发不同的库，您将处于同一条船上。我认为即使没有库（或者如果他们实现自己的库），人们也更容易使用 REST。另一方面，如果您喜欢 Thrift 是二进制的，json 也可以以类似的方式使用，请查看此处了解更多信息[http://bsonspec.org/](http://bsonspec.org/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-04T19:16:22.020

REST 的一大优势是您不必创建客户端库。您可以将开发人员指向您的端点列表，他们应该能够从那里找出答案。一些设计不佳的大型 REST 服务将提供客户端库来掩盖它们的丑陋，但如果 API 简单且设计良好，则没有必要。

# browser - 浏览器游戏地图

> ID：10037905
> 
> 赞同：2
> 
> 时间：2012-04-06T00:41:38.783
> 
> 标签：browser, map

我正在制作一个基于浏览器的游戏，并且需要一个地图页面，玩家可以在其中移动并前往不同的位置。

当前，每次移动时，它都会从数据库中加载视图中的每个图块（大约 8x8）。这可能不是一个好方法。

我想要一张大约 2000x2000 像素的地图，但在一个大约 300x300 的小窗口中。如果它必须是一个图像，那么我想那将不得不这样做。

它不需要平滑滚动，每次移动只需跳跃 16 像素左右。

我环顾四周，它们有很多不同的变化。我的网站是 php 和 jquery，jquery 是要走的路吗？还是html5会更好？

寻找这方面的一些指示。

# html - FTP 传输后带有双“/”的 Firebug 请求

> ID：10037906
> 
> 赞同：0
> 
> 时间：2012-04-06T00:41:46.187
> 
> 标签：html, css, ftp, firebug, filezilla

为什么有时我将图像（或 CSS、JS 等）发送到 FTP，但它们没有上传（或被缓存）？

```
#container {
    background: url("../images/bg.jpg") no-repeat scroll 0 0 transparent;
    height: 895px;
    overflow: hidden;
} 
```

但是使用`//`( `../images//bg.jpg`)，我可以看到新图像

```
#container {
    background: url("../images//bg.jpg") no-repeat scroll 0 0 transparent;
    height: 895px;
    overflow: hidden;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T21:34:07.037

似乎文件已上传，但已被浏览器缓存。

尝试在 Firefox/IE 中使用 CTRL+F5 重新加载（其他浏览器可能有不同的快捷方式），您应该始终看到新文件。

资源（JS、CSS 和图像文件）以某种方式更积极地被浏览器缓存。而对于 HTML 页面，一般每次刷新都会有一个新的 HTTP 请求，而对于资源，有时根本不会产生 HTTP 请求。您可以通过查看例如 Firebug 的网络面板来看到它。

**缓存通常是一个非常棘手的话题，很大程度上取决于服务器和浏览器的设置和实现。**

浏览器缓存通常通过精确的 URL 匹配来实现。所以，`http://someserver/bg.jpg`和`http://someserver//bg.jpg`是两个**完全不同的**URL。但是，许多 HTTP 服务器会假定您请求了相同的内容，并将发送存储在您的服务器根文件夹中的 bg.jpg 文件的内容（您必须看到 URL 和与此 URL 链接的内容之间的区别）。

如果您访问了第一个 URL，它将被浏览器缓存。然后，在您上传新版本的图像后，很大程度上取决于浏览器对缓存的实现，以及您第一次下载“bg.jpg”时发送的服务器缓存设置。例如，在带有图像的 HTTP 响应标头中发送的服务器设置可能是，在接下来的 1 小时内，图像可能会被浏览器缓存，并直接从缓存中加载，甚至无需询问服务器（服务器设置可能以这种方式配置以避免不必要的流量）。

始终获取“新”版本文件的（有点笨拙，但非常常用）的方法是向请求添加当前时间戳（但通常仅限于服务器端生成或 JavaScript 脚本中）-在 CSS 中没有多大意义。

所以，在我写它的时候，脚本会询问服务器， `http://someserver/bg.jpg?1334442703` 但几秒钟后，当我刷新页面时，它将是 `http://someserver/bg.jpg?1334442711`

大多数服务器会丢弃查询字符串（'?' 之后的字符串），并且只会`bg.jpg`为两个查询返回相同的文件内容，但由于图像的 URL 不同，因此任何浏览器都不应该从缓存中读取图像。

# xcode - XCode 打破 managedObjectModel？

> ID：10037908
> 
> 赞同：1
> 
> 时间：2012-04-06T00:42:26.383
> 
> 标签：xcode, core-data

嗯，这很尴尬。直到昨晚深夜，发展还算顺利。我最近将 XCode 升级到 4.3.2（iPhone 一直在抱怨）。享受实现和测试几个新功能；不时编译。当我想，好吧，为了最终运行，让我们从设备中删除应用程序，并在将其提交给 Apple 之前完成整个过程。

然后它发生了。突然，应用程序直接编译成一面墙，抱怨 managedObjectModel 为 nil。由于我没有更改有关核心数据的任何代码，因此我得出的结论是，我丝毫不知道问题出在哪里。

升级到 XCode 是否有可能破坏 CoreData 版本迁移？我能做些什么呢？

```
- (NSManagedObjectModel *)managedObjectModel
{
    if (__managedObjectModel != nil)
    {
        return __managedObjectModel;
    }

    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"userinfo" withExtension:@"momd"];

    NSLog(@"Model URL %@" , modelURL);

    __managedObjectModel =[[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL]  ;

    NSLog(@"Model Entities %@" , [__managedObjectModel entities]);

    return __managedObjectModel;

} 
```

以下是上述代码的输出： 正如我们所见，没有分配 managedObjectModel。怎么会这样 ？就在前一天，它工作得很好。

模型 URL 文件://localhost/var/mobile/Applications/[ID Info]/[App Name].app/userinfo.momd/

2012-04-06 07:39:50.375 [应用程序名称][861:707] 模型实体（空）

# ms-access - MS Access 和自动竞争

> ID：10037915
> 
> 赞同：0
> 
> 时间：2012-04-06T00:43:10.270
> 
> 标签：ms-access, autocomplete

假设我现在有两张桌子

```
Table A{ID,Description}
Table B{ID,QTY} 
```

当用户在表 B 中输入列 ID 时，预计会根据表 A 中的列 ID 显示一个自动完成框。MS access 可以这样做吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T01:44:30.610

是的，您应该能够使用 Access 中的组合来执行此操作。

在设计视图中查看组合时，请查看“属性表”窗口。您应该能够设置“控制源”以允许您将用户选择的任何值存储到正确的字段中（在本例中为表 B 中的 ID 字段）。

接下来，更改名为 Row Source Type 的属性以显示表/查询。然后转到行源属性并单击三个虚线按钮以使用表 A 创建一个新的查找查询。

最后，您需要更改属性以显示 2 列。将宽度设置为 0";2" 这样您就不会显示 ID，只显示描述。

这应该是完成这项工作所需要做的一切。

# java - java thead pool executor如何处理被中断的线程

> ID：10037918
> 
> 赞同：10
> 
> 时间：2012-04-06T00:44:14.690
> 
> 标签：java, threadpool

我在其中创建了`ThreadPool`10 个固定线程。有时我需要中断线程池中一个长时间运行的线程，主要是因为它们在某些操作中阻塞并且发生超时并且我中断了线程。我抓住`InterruptedException`并将线程的状态设置为中断。在这种情况下，我的问题是，是否`ThreadPool`创建一个新的线程并用新的 One 替换中断的线程？下面是由线程执行的示例代码。问题是，当这个线程被中断时，线程池会用一个新线程替换这个线程吗？

```
 public ResponseMessage call(){
    Future<ResponseMessage> future = CacheManager.getInstance().asyncFetch();
    ResponseMessage response = null;
    try {
        response = future.get();
    }
    catch (InterruptedException e) {
        Thread.currentThread().interrupt();
    } catch (ExecutionException ex) {
        //create a blank response
    }

    return response;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T01:06:07.187

您不应该中断您不“拥有”的线程，因为您不知道它们如何响应。由于您无法控制线程调度，因此您真的不知道给定线程在您中断它的那一刻正在执行特定任务

如果你想取消你已经给执行器服务的任务，调用`cancel(true)`它关联的`Future`. 当您的任务检测到中断请求时，它应该通过调用来保持中断状态`Thread.currentThread().interrupt()`。

如果你这样做，执行器会干净地处理中断，因为它中断了线程本身，并且知道在中断发生时线程正在执行任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-01T03:25:14.043

从一步一步的调试来看，我想被中断的线程会继续从工作队列中获取任务。在getTask之前已经清理了中断状态。

例如，如果您将 FixedThreadPool 与 LinkedBlockingQueue 一起使用，则中断状态`queue.take()`由 `ReentrantLock.lockInterruptibly()`

```
public final void acquireInterruptibly(int arg) throws InterruptedException {
    if (**Thread.interrupted()**)
        throw new InterruptedException();
    if (!tryAcquire(arg))
         doAcquireInterruptibly(arg);
} 
```

# testing - Haskell QuickCheck 最佳实践（尤其是在测试类型类时）

> ID：10037923
> 
> 赞同：20
> 
> 时间：2012-04-06T00:45:18.933
> 
> 标签：testing, haskell

我刚刚开始使用带有一堆 Haskell 代码的 QuickCheck。我已经落后于时代了，我知道。这个问题分为两部分：

首先，快速检查的一般最佳实践是什么？到目前为止，我已经收集了以下内容：

*   将您的测试命名为 prop_* （烦人，因为其他所有内容都是驼峰式）
*   测试导出的代码（如果你正在测试内部，你可能做错了）
*   测试属性，而不是示例
    *   不要说`X is out of range, Y is in range`
    *   相反，说`if x is out of range, normalize x ≠ x`（或其他一些这样的属性）

但我仍在掌握其他最佳实践。特别：

*   财产保存在哪里？
    *   同一个文件？
    *   在`test/`目录中？（如果是这样，那么你如何导入这些东西`src/`？）
    *   在?下的`Properties/`目录中`src`

最重要的是，我们倾向于如何测试类型类的属性？例如，考虑以下（简化的）类型类：

```
class Gen a where
    next :: a -> a
    prev :: a -> a 
```

我想测试财产`∀ x: prev (next x) == x`。当然，这涉及为每个实例编写测试。为每个实例编写相同的属性很乏味，尤其是在测试更复杂的情况下。概括此类测试的标准方法是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-06T01:06:08.603

> 为每个实例编写相同的属性很乏味

你不这样做。您为该类编写一次属性：

```
class Gen a where
    next :: a -> a
    prev :: a -> a

np_prop :: (Eq a, Gen a) => a -> Bool
np_prop a = prev (next a) == a 
```

然后为了测试它，你转换为一个特定的类型：

```
quickCheck (np_prop :: Int -> Bool)
quickCheck (np_prop :: String -> Bool) 
```

你的其他问题我无能为力。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-06T02:37:53.960

我相信`prop_`约定来自 QC 附带一个脚本，该脚本运行所有`prop_`以测试开头的功能。所以没有真正的理由这样做，但它在视觉上*确实*很突出（所以函数的属性`foo`是`prop_foo`）。

测试内部并没有错。有两种方法：

*   将属性放在与内部相同的模块中。这使得模块更大，并且需要对项目的 QC 无条件依赖（除非您使用 CPP 黑客）。

*   在非导出模块中有内部结构，实际导出的功能从另一个模块重新导出。然后，您可以将内部模块导入到定义 QC 属性的模块中，并且只有在使用 .cabal 文件中指定的标志时才会构建该模块（并且具有 QC 依赖项）。

如果您的项目很大，那么拥有单独的`src/`和`test/`目录可能会很有用（尽管有区别可能会阻止您测试内部）。但是，如果您的项目不是那么大（并且无论如何都位于一个整体模块层次结构下），那么就没有必要像那样拆分它。

正如 Norman Ramsey 在他的回答中所说，对于类型类，您可以将属性定义为类型类*上*并相应地使用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-28T14:03:45.517

尝试

```
{-# LANGUAGE GADTs, ScopedTypeVariables #-}
import Test.QuickCheck hiding (Gen)

class Gen a where
  next :: a -> a
  prev :: a -> a

np_prop :: SomeGen -> Bool
np_prop (SomeGen a) = prev (next a) == a

main :: IO ()
main = quickCheck np_prop

instance Gen Bool where
  next True = False
  next False = True
  prev True = False
  prev False = True

instance Gen Int where
  next = (+ 1)
  prev = subtract 1

data SomeGen where
  SomeGen :: (Show a, Eq a, Arbitrary a, Gen a) => a -> SomeGen

instance Show SomeGen where
  showsPrec p (SomeGen a) = showsPrec p a
  show (SomeGen a) = show a

instance Arbitrary SomeGen where
  arbitrary = do
    GenDict (Proxy :: Proxy a) <- arbitrary
    a :: a <- arbitrary
    return $ SomeGen a
  shrink (SomeGen a) =
    map SomeGen $ shrink a

data GenDict where
  GenDict :: (Show a, Eq a, Arbitrary a, Gen a) => Proxy a -> GenDict

instance Arbitrary GenDict where
  arbitrary =
    elements
    [ GenDict (Proxy :: Proxy Bool)
    , GenDict (Proxy :: Proxy Int)
    ]

data Proxy a = Proxy 
```

类型类被具体化为一个存在量化的字典，在该字典上`Arbitrary`定义了一个实例。然后使用这个`Arbitrary`字典实例来定义`Arbitrary`存在量化值的实例。

另一个示例在[https://github.com/sonyandy/var/blob/4e0b12c390eb503616d53281b0fd66c0e1d0594d/tests/properties.hs#L217](https://github.com/sonyandy/var/blob/4e0b12c390eb503616d53281b0fd66c0e1d0594d/tests/properties.hs#L217)中给出。

如果您愿意使用`ConstraintKinds`. 以下仅定义一次。

```
data Some c where
  Some :: (Show a, Arbitrary a, c a) => a -> Some c

instance Show (Some c) where
  showsPrec p (Some a) = showsPrec p a
  show (Some a) = show a

instance Arbitrary (Dict c) => Arbitrary (Some c) where
  arbitrary = do
    Dict (Proxy :: Proxy a) :: Dict c <- arbitrary
    a :: a <- arbitrary
    return $ Some a
  shrink (Some a) =
    map Some $ shrink a

data Dict c where
  Dict :: (Show a, Arbitrary a, c a) => Proxy a -> Dict c

data Proxy a = Proxy

class (c a, d a) => (c &&# d) a
instance (c a, d a) => (c &&# d) a 
```

对于您要测试的每个类型类，都需要一个`Arbitrary`实例`Dict`。

```
instance Arbitrary (Dict (Eq &&# Gen)) where
  arbitrary =
    elements
    [ Dict (Proxy :: Proxy Bool)
    , Dict (Proxy :: Proxy Int)
    ]

np_prop :: Some (Eq &&# Gen) -> Bool
np_prop (Some a) = prev (next a) == a 
```

# ios - 我可以旋转没有黑条的 UIView 吗？

> ID：10037924
> 
> 赞同：4
> 
> 时间：2012-04-06T00:46:05.390
> 
> 标签：ios, uiview, uiviewcontroller, uiinterfaceorientation, uideviceorientation

我有一个 UIView 占据了 iphone 上的整个窗口。当它旋转到横向时，边缘会出现小黑条，直到它卡入到位，正如我所期望的那样。

我想让那个 uiview 比屏幕大，这样旋转它就不会显示那些黑条，而是显示通常不在屏幕上的视图部分。我已经尝试增加视图的框架和边界，但这似乎并没有奏效。

有没有人成功地做到了这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T03:16:33.700

你需要做两件事来实现这一点。

首先，窗口的根视图控制器将始终将其视图调整为窗口的大小。所以你的大视图需要是根视图控制器视图的子视图（以防止它被缩小），并且你的根视图控制器的视图需要`clipsToBounds`设置为 NO。实际上所有祖先的大视图都需要`clipsToBounds`设置为NO。

其次，当窗口旋转时，它会为自己提供黑色子视图，以显式隐藏任何会出现在窗口边界之外的视图。它将这些黑色子视图放在其根视图控制器的视图前面。您需要将根视图控制器的视图移到前面，如下所示：

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    UIWindow *window = self.view.window;
    [window bringSubviewToFront:window.rootViewController.view];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-18T07:58:30.123

当您有两个 UIWindows 重叠时，我发现了另一种方法。（如果您希望在后台显示不可旋转的内容，并在顶部浮动一个可旋转的界面，则可能会出现这种情况。）这个想法是在调用 willAnimateRotationToInterfaceOrientation 时直接搜索最前面的 UIWindow 中的黑条子视图，并显式隐藏它们. 以下代码搜索两层深度：

```
-(void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation duration:(NSTimeInterval)duration {
    UIWindow* window = self.view.window;
    for (UIView* view in [window subviews]) {
        if (!CGRectIntersectsRect(window.bounds, view.frame)) {
            view.hidden = YES;
        }

        for (UIView* view_ in [view subviews]) {
            CGRect frame = [view_ convertRect:view_.frame toView:window];
            if (!CGRectIntersectsRect(window.bounds, frame)) {
                view_.hidden = YES;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-30T09:58:25.330

我目前正在开发一个需要屏幕以低于标准速度旋转的应用程序。为了在我自己的旋转开始之前停止黑色旋转矩形裁剪视图（以标准旋转速度），我只需选中**General -> Deployment Info -> Requires Full Screen**旁边的框。

[![在此处输入图像描述](../Images/4bb9272011f109bfcacc775e512c6e52.png)](https://i.stack.imgur.com/Ep0Lp.png)

尽管未选中隐藏状态栏框，但我也确实在视图控制器上隐藏了状态栏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-10T15:16:26.000

UINavigationController 和 UITabBarController 都有系统子视图（UINavigationController: UINavigationTransitionView; UITabBarController: UITransitionView 和 UIViewControllerWrapperView），它们的 layer.masksToBounds 默认设置为 YES。为了消除旋转过程中的黑边，您必须将这些以及所有其他分层视图的 layer.masksToBounds 设置为 NO。

但是，我不确定更改上述系统视图层的效果是什么，因此我建议在完成动画后将它们的 layer.masksToBounds 重置为 YES。

# ios - 在 Singleton 类中使用数组在视图控制器 IOS 之间传递数据？

> ID：10037929
> 
> 赞同：1
> 
> 时间：2012-04-06T00:47:43.407
> 
> 标签：ios, uitableview, singleton, nsarray

我一直在寻找 tableviews 和单例类，但找不到任何解决方案，所以我在这里。

当用户选择一行时，我在视图控制器中有一个表格视图，我想将所选数据发送到单例类中的数组并将其打印到另一个视图控制器的屏幕上。

这是我的单例类代码：

```
#import <Foundation/Foundation.h>

@interface DataController : NSObject {
    NSArray* standLoc;
}

@property (readonly)NSArray* standLoc; // stand location 

+(DataController*)sharedInstance;

@end

#import "DataController.h"

@implementation DataController

@synthesize standLoc;

+(DataController*)sharedInstance
{
    static DataController* sharedInstance = nil;
    if (!sharedInstance)
    {
        sharedInstance = [[DataController alloc]init];
    }
    return sharedInstance;
}

@end 
```

那么我应该如何将数据传递给我尝试遵循的单例类中的数组，

```
- (void) tableView: (UITableView *) tableView didSelectRowAtIndexPath: (NSIndexPath *) indexPath {

    StartHuntViewController *startHuntController = [[StartHuntViewController alloc] initWithNibName:@"StartHuntView" bundle:nil];

    DataController* sharedSingleton = [DataController sharedInstance];
    sharedSingleton = [stands objectAtIndex:indexPath.row];

    startHuntController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
    [self presentModalViewController:startHuntController animated:YES];;

    [startHuntController release];
    startHuntController =nil;
} 
```

在调试中，我可以看到所选项目在 sharedSingleton 中，但我怎样才能将它传递给 NSArray* standLoc？

**编辑**

* * *

所以我编辑了我的代码，它现在可以正常工作多个控制器视图

我的单身 .m 和 .h ：

```
#import <Foundation/Foundation.h>

@interface DataController : NSObject {
    NSString* standLoc;
}

@property (nonatomic,retain)NSString* standLoc; // stand location 

+(DataController*)sharedInstance;
-(void) setData: (NSString *) data;

@end
#import "DataController.h"

@implementation DataController

static DataController* sharedInstance = nil;

@synthesize standLoc;

+(DataController*)sharedInstance
{

    @synchronized (self) { //this ensure this methods will not be called at the same time..
        if(sharedInstance == nil){
            [[self alloc] init];
        }
    }
    return sharedInstance;
}
+(id) allocWithZone:(NSZone *)zone{
    @synchronized (self){
        if (sharedInstance == nil) {
            sharedInstance = [super allocWithZone:zone];
            return sharedInstance;
        }
    }
    return nil;
}
-(id)copyWithZone:(NSZone *)zone{ // incase if we want to copy our singleton instance
    return self;
}
//to protect singleton from deallocation, we need to override some functions of memory allocation
-(id) retain {
    return self;
}

-(id) autorelease{
    return self;
}
-(NSUInteger ) retainCount{
    return NSUIntegerMax;
}

-(id) init{ // lets set the default data in it
    @synchronized (self){
        [super init];
        standLoc = [[NSString alloc] initWithString:@"Stand Loc"];//for performance, as we expect 5 digits from server, it's size was set to another 5 digits..
        return self;
    }
}
-(void) setData: (NSString *) data{ // this is the function to set static data which is the member of the class, reaching data will be allowed with this method
    @synchronized (self){
        if (standLoc != data) {
            [standLoc release];
            standLoc = [data retain];
        }
    }
}
-(NSString *) standLoc{
    @synchronized(self){
        return standLoc;
    }
} 
```

将数据传递给单例：

```
DataController* sharedSingleton = [DataController sharedInstance];
    NSString* transfer = [stands objectAtIndex:indexPath.row];
    [sharedSingleton setData:transfer]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T00:58:50.993

为什么需要单例？如果您只是将数据直接从一个视图控制器传递到下一个视图控制器，您的代码将更简单、更易于维护。听起来您正在使用导航控制器，因此当点击表格中的单元格时，表格的视图控制器可以推送新的细节控制器，如下所示：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    DetailViewController *detailController = [[DetailViewController alloc] initWithNibName:nil bundle:nil];
    detailViewController.data = [tableData objectAtIndex:[indexPath row]];
    [self.navigationController pushViewController:detailController animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T01:06:17.417

*   如果您想从其他类更新它，请不要将 standLoc 设为只读。
*   如果要将一个对象从“stands”中传递出去，为什么要让 standLoc 成为一个数组？
*   您想要的语法类型（在解决上述两点之后）是：

    DataController* sharedSingleton = [DataController sharedInstance];

    sharedSingleton.standLoc = // 无论数据元素是什么，都应该在单例中；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-29T07:15:24.380

你为什么使用@同步？

（它在iOS上很少使用..）无论如何，如果您使用（非原子）然后@synchronized，这似乎有点奇怪..

所以让 Apple 编译器更好地完成它的工作：

（[https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html)）

> 默认情况下属性是原子的 默认情况下，Objective-C 属性是原子的：
> 
> @interface XYZObject : NSObject @property NSObject *implicitAtomicObject; // 默认原子 @property (atomic) NSObject *explicitAtomicObject; // 显式标记原子 @end 这意味着合成访问器确保始终通过 getter 方法完全检索或通过 setter 方法完全设置值，即使访问器从不同线程同时调用也是如此。

最后一点：正如苹果所说，使用锁、原子等，并不能保证对来自不同线程的数据进行深度访问：

如果你有一个数组并且你用原子/同步保护它（它的引用..），你保护对它的访问，而不是对包含的对象的访问。（您将不得不非常小心地手动锁定......可能会发生竞争条件......）

# knockout.js - 如何使用 Knockout.js foreach 绑定迭代此 JSON 视图模型？

> ID：10037932
> 
> 赞同：1
> 
> 时间：2012-04-06T00:48:17.167
> 
> 标签：knockout.js

我正在尝试使用 Knockout.js 从 Bing API 访问 JSON 响应。下面是我在 html 中使用的 javascript 代码和相应的 Knockoutjs 绑定。我还附上了我正在尝试访问的对象的屏幕截图。我需要从对象中获取 Thumbnail.Url 并将该值分配给页面上的 HREF 属性。有人能发现我做错了什么吗？我认为问题可能出在我的 attr 绑定中。

JS

```
function bindModel(data) {
var viewModel = ko.mapping.fromJSON(data);
ko.applyBindings(viewModel);

}

$.ajax({
                url: fullUri,
                type: 'post',
                dataType: 'jsonp',
                jsonp: true,
                jsonpCallback: 'searchDone',
                success: function(data, textStatus, jqXHR){
                    console.log(data);
                    bindModel(data);
                }
}) 
```

HTML

```
 <ul class="thumbnails" data-bind="foreach: Image.Results">
    <li class="span2"><img data-bind="attr: {href: Thumbnail.Url}"></img></li>
    </ul> 
```

控制台屏幕截图

![在此处输入图像描述](../Images/83b0774dd35f7e382a6289b7a44bfca2.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T02:05:56.437

几件事。

如果您直接在控制台中绑定对象，那么您将需要从该属性中引用，`SearchResponse`因为这将是您的 viewModel 中的第一个属性。

此外，图像标签通常是自动关闭的，轻微的抱怨，但它不会使用，`href`而是您应该设置`src`.

正确的标记是。

```
<ul class="thumbnails" data-bind="foreach: SearchResponse.Image.Results">
    <li class="span2"><img data-bind="attr: {src: Thumbnail.Url}" /></li>
</ul> 
```

您对映射插件的使用我认为应该使用 fromJS，因为我很确定 jquery 会负责将 json 字符串解析为对象，因此此时您的数据值不再是原始字符串。

因此，正确的绑定方法是。

```
function bindModel(data) {
    viewModel = ko.mapping.fromJS(data);
    console.log(viewModel);
    ko.applyBindings(viewModel);
} 
```

这是一个小提琴。

[http://jsfiddle.net/madcapnmckay/udDGP/](http://jsfiddle.net/madcapnmckay/udDGP/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T01:57:27.790

`img`标签使用`src`而不是`href`. 你想做`attr: { src: Thumbnail.Url }`

# html - HTML 框模型不正确

> ID：10037934
> 
> 赞同：1
> 
> 时间：2012-04-06T00:48:27.770
> 
> 标签：html, css

盒子模型一直让我头疼。我正在使用模板（[此处](http://themeforest.net/item/cupcake-premium-admin-template-mobile-theme/full_screen_preview/1296055)）并将其集成到 Spring MVC + Apache Tiles 项目（[此处](http://24.210.38.163/Services)）中。当我查看 Firebug 时，我可以看到`main`div 没有正确包装其内容。下面是 HTML 的最外层部分。我很抱歉没有在此处放置更多代码，但现场站点（显示问题）有望弥补它（使用管理员/管理员登录）。

```
<html>
    <head> ... </head>
    <body>
        <div class="wrapper">
            <div id="header"> ... </div>
            <div id="main">
                <div id="sidebar"> ... </div>
                <div id="page"> ... </div>
            </div>
        </div>
    </body>
</html> 
```

**编辑**这已经解决了，所以我让我的演示离线了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T00:55:36.210

`#main`在*root.css*中定义。我认为您只需要触发该 div 以扩展以覆盖它的孩子。您可以通过向`overflow:auto; zoom:1;`规则集中添加一个来做到这一点。

# jquery - slideUp相关的UI设计

> ID：10037935
> 
> 赞同：1
> 
> 时间：2012-04-06T00:48:37.117
> 
> 标签：jquery, css, user-interface

我正在研究一个在这里可见的 UI 概念[http://jsfiddle.net/nudeape/CZsjw/1/](http://jsfiddle.net/nudeape/CZsjw/1/)

我希望当我单击“更多”时，额外的文本会向上滑动，并且超级容器（li.update）的整体高度会相应增加。li.update 的底部应保持原样，其顶部边缘应向上滑动，与“标题”文本及其上方的行重叠。

有人能帮帮我吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T00:22:18.577

非常好的主意。你刚刚遇到了一个非常简单的问题。

您的 css 有一个小错误。

如果你改变这个：

```
.update ul.expand{
    display:none;
    position:absolute;
    bottom: 25px;
} 
```

对此：

```
​.update ul.expand{
    display:none;
} 
```

效果很好！

这是固定的 jsFiddle [http://jsfiddle.net/CZsjw/11/](http://jsfiddle.net/CZsjw/11/)

# javascript - 服务器和客户端上带有 Handlebars.js 的 Node.js

> ID：10037936
> 
> 赞同：34
> 
> 时间：2012-04-06T00:48:42.453
> 
> 标签：javascript, node.js, handlebars.js, express

我在 Node.js 中有一个使用 Expressjs 和 Handlebars 作为模板引擎的应用程序。

Expressjs 使用布局，然后呈现视图。布局 (layout.hbs) 如下所示：

```
<!doctype html>
<html lang="en">
    <head>
    </head>
  <body>
    {{{body}}}
  </body>
</html> 
```

当`{{{body}}}`您访问路由时，在 node.js 中被替换为服务器端。例如：

```
app.get('/', function(req, res){
   res.render('index'})
}) 
```

将`{{{body}}}`标签替换为 index.hbs 的内容。

现在，在客户端，我正在使用 Backbone.js，并希望将 Handlebars 用于通过 Backbone 控制的视图。问题是因为这些页面已经通过 Handlebars 呈现，所以当我尝试在其中使用 Handlebars（或 Handlebars 中的 Handlebars）时，它不起作用。没有错误，它只是不会用数据替换标签。

有没有人遇到过这种情况或有任何解决方法？

谢谢！

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-12-14T18:56:54.703

您应该使用预编译的客户端模板。它们执行速度更快，并允许您在服务器和客户端上使用相同的模板语言。

1.  全球安装车把`npm install handlebars -g`
2.  预编译您的模板`handlebars client-template1.handlebars -f templates.js`
3.  包括 templates.js`<script src="templates.js"></script>`
4.  执行模板`var html = Handlebars.templates["client-template1"](context);`

[https://stackoverflow.com/a/13884587/8360](https://stackoverflow.com/a/13884587/8360)

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-09-03T22:57:21.600

一个简单的方法是在 Handlebars 文件中的`\`前面附加一个。`{{`例如：

```
<script type="text/x-template" id="todo-item-template">
<div class="todo-view">
    <input type="checkbox" class="todo-checkbox" \{{checked}}>
    <span class="todo-content" tabindex="0">\{{text}}</span>
</div>

<div class="todo-edit">
    <input type="text" class="todo-input" value="\{{text}}">
</div>

<a href="#" class="todo-remove" title="Remove this task">
    <span class="todo-remove-icon"></span>
</a> 
```

上面的代码将在保留 {{..}} 标签的情况下呈现在客户端上。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-04-06T08:19:23.270

是的，这是一个棘手的问题 --- 有点像 shell 脚本中的引用问题，它变成了引用引号的老鼠窝。

我的解决方案是在expressjs（服务器端）中使用jade（a la haml）为客户端输出基于把手的模板。这样，服务器使用一种语法（jade），而客户端使用另一种语法（handlebars）。我和你在同一个十字路口，所以我有同样的挑战。

当然，jade 不是必需的（尽管它是为 expressjs 准备的）。您可以为服务器选择任何（非把手）模板引擎，和/或您可以在服务器上使用把手，在客户端上使用非把手模板 --- 只要您选择的模板引擎的两种语法不碰撞。由于我在客户端使用 emberjs 并且它使用把手语法（默认情况下），我更喜欢在客户端使用 emberjs + 把手语法。于是 expressjs +jade 成为了服务器的天作之合。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-04-23T20:52:21.393

**Shameless self-promotion!**

I wanted to do this same client/server sharing thing, so I wrote a little npm package to assist:

**[node-handlebars-precompiler](https://github.com/jwietelmann/node-handlebars-precompiler)**

I whipped it up in a couple hours based on the command-line compiler in wycats' handlebars repo. It's not the greatest code in the world, but it's been getting the job done for me very well.

**EDIT: I am no longer maintaining this package. If you would like to take over, please contact me via Github. I mainly use Jade templates now, so it doesn't make sense for me to continue as the maintainer.**

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-14T08:30:39.060

我通过服务器端模板传递客户端模板来解决这个问题。

因此，在服务器端将所有客户端模板读取到一个数组并将其传递给服务器端的渲染函数

在您的路由处理程序中执行以下操作：

```
readTemplates(function(err, clientTemplates) {
  res.render("page", {
    clientTemplates: clientTemplates;   
  });
}); 
```

然后在 layout.hbs 中：

```
{{#each clientTemplates}}
<script type="text/handlebars id="{{this.filename}}" >
{{{this.template}}}
</script>
{{/each}} 
```

在这里，我使用不带扩展名的文件名作为模板 id，以便可以从 Backbone 视图中引用它们。哦，记得为生产模式实现缓存。

是的，这很糟糕。

我认为我们应该为此编写一个 Handlebars/Express/Connect 助手。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-08T21:12:28.490

您有 2 个选项。第二个是最好的方法：

1）摆脱胡须

```
<script type="text/x-handlebars" data-hbs="example">
  <p>\{{name}}</p>
</script> 
```

**2) 预编译**

这将在发送到客户端之前在服务器上编译模板。这将使模板准备好使用并减轻浏览器的负担。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-20T01:44:19.850

我不喜欢预编译解决方案（因为我想在我将使用它们的同一个文件中定义模板）也不喜欢天真的`\{{`转义解决方案（因为它需要完整的 Handlebars 编译器和更多的 javascript 代码）所以我想出了一个混合使用 Handlebars 助手的解决方案：

1）在服务器配置上注册一个名为“模板”的新助手

```
var hbs = require('hbs');
hbs.registerHelper("template", function(key, options){
    var source = options.fn().replace("\\{{", "{{");
    var ret =
    '<script>\n' + 
        key + ' = function(opt){\n' +
            'return Handlebars.template(' + hbs.handlebars.precompile(source) + ')(opt);\n' +
        '}\n' + 
    '</script>';
    return ret;
}); 
```

2）在客户端网页的任何地方使用它（`\{{`客户端参数使用转义）

```
{{#template "myTemplate"}}
    <div>
        <p>Hello \{{this.name}}!</p>
    </div>
{{/template}} 
```

（服务器会像这样预编译它）

```
<script>
    myTemplate = function(opt){
        return Handlebars.template(/* HBS PRECOMPILATED FUNCTION */)(opt);
    }
</script> 
```

3）只需在客户端javascript中调用您需要的函数

```
var generatedHtml = myTemplate("world");   // = <div><p>Hello world!</p></div>
$("#myDiv").html(generatedHtml);           // or whatever 
```

# events - 访问 Facebook 活动照片

> ID：10037939
> 
> 赞同：0
> 
> 时间：2012-04-06T00:49:21.813
> 
> 标签：events, facebook-graph-api

我正在尝试使用[Graph API](http://en.wikipedia.org/wiki/Facebook_Platform#Graph_API)来访问发布到事件墙上的图像。我尝试通过查询将开发人员指南中的示例事件与 API 资源管理器一起使用`331218348435/photos`，然后我得到一组照片。

但是当我用我自己的事件替换 ID 时，它返回一个空数据集。如果我删除`/photo`，我会得到有关该事件的信息。该活动是公开的，并且有两张图片张贴在墙上。为什么它返回一个空数据集？我的活动 ID 是`328289597226043`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T01:10:02.143

这可能是一个错误，看看这个看起来像类似问题的问题[。](https://stackoverflow.com/questions/10031905/facebook-graph-api-does-not-return-the-event-picture)

我尝试为自己创建一个活动并尝试使用图像，但我似乎没有从中得到任何照片。

# linux - LKM：最后一个块写入设备

> ID：10037944
> 
> 赞同：2
> 
> 时间：2012-04-06T00:50:32.717
> 
> 标签：linux, linux-kernel, kernel-module

我试图在模块内找到一种方法来跟踪写入块设备的最后一个块。我需要的特定设备是安装在根目录下的设备（如果有帮助，我会提前知道 /dev/ 名称。）

我最初的想法是包装 submit_bio 函数，因为如果您“echo 1 > /proc/sys/vm/block_dump”，它已经具有日志记录功能。不幸的是，我似乎需要修改源代码以使该函数成为指针。如果可能的话，我想把这一切都保留在模块中。

之后，我研究了查找文件系统类型，并包装了默认文件操作（毕竟这些已经是函数指针）。但是，这些被声明为 const，所以同样的问题。

我明白，这是一件很奇怪的事情。无论如何都需要这样做。有没有人有任何想法可以让我继续前进？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T01:50:31.953

Linux 内核提供了几种不同的跟踪工具包；这些[`blktrace`工具](http://brick.kernel.dk/snaps/)是专门为块设备设计的。该`blkparse(1)`工具将解析`blktrace(8)`实用程序的输出。（至少 Ubuntu 将这些打包在`blktrace`包中；我希望其他发行版也类似。）该`bklparse(1)`工具可以为您提供扇区信息。

`Documentation/trace/events.txt`描述了另一种跟踪机制——一种允许您跟踪`block:block_bio_complete`事件的机制，其中包括扇区信息。这不需要安装`bkltrace`工具包，但我会（不好意思地）承认我不知道在哪里*阅读*跟踪日志。

# hibernate - Struts 中的 java.lang.ExceptionInInitializerError 与休眠

> ID：10037947
> 
> 赞同：2
> 
> 时间：2012-04-06T00:50:59.867
> 
> 标签：hibernate

我的问题是，当我通过 ANT 构建（构建成功）运行我的应用程序时，我收到以下运行时错误，即使我在构建文件夹中添加了所有必需的 jar。请参阅我的构建文件夹的附件供您参考。

```
05:49:00,562 ERROR [DispatchAction] Dispatch[/loginUser] to method 'userLogin' returned an exception

06:01:49,656 ERROR [[action]] Servlet.service() for servlet action threw exception
java.lang.ExceptionInInitializerError
    at com.SupportLMS.dbutils.HibernateUtil.buildSessionFactory(HibernateUtil.java:18)
    at com.SupportLMS.dbutils.HibernateUtil.<clinit>(HibernateUtil.java:8)
    at com.SupportLMS.daoImpl.CommonDAOImpl.isValidUser(CommonDAOImpl.java:23)
    at com.SupportLMS.actions.HomeAction.userLogin(HomeAction.java:29)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:276)
    at org.apache.struts.actions.DispatchAction.execute(DispatchAction.java:196)
    at com.SupportLMS.commons.BaseAction.execute(BaseAction.java:20)
    at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)
    at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)
    at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)
    at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:166)
    at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:175)
    at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:166)
    at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
    at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:810)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
    at org.jboss.web.tomcat.security.CustomPrincipalValve.invoke(CustomPrincipalValve.java:54)
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:174)
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:74)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:831)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:639)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1196)
    at java.lang.Thread.run(Thread.java:619)
Caused by: java.lang.LinkageError: loader constraint violation: loader (instance of org/jboss/web/tomcat/tc5/WebAppClassLoader) previously initiated loading for a different type with name "org/hibernate/cfg/Configuration"
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:620)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:1812)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:866)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1319)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1198)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)
    at com.SupportLMS.dbutils.HibernateUtil.buildSessionFactory(HibernateUtil.java:14)
    ... 39 more 
```

我不相信配置是错误的，但是我的配置文件在下面。

```
 <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="connection.url">jdbc:mysql://localhost:3306/SupportLMS</property>
    <property name="connection.username">root</property>
    <property name="connection.password">admin</property>

    <!-- JDBC connection pool (use the built-in) -->
    <property name="connection.pool_size">1</property>

    <!-- SQL dialect -->
    <property name="dialect">org.hibernate.dialect.MySQLDialect</property>

     <!-- Echo all executed SQL to stdout -->
    <property name="show_sql">true</property>

    <property name="hbm2ddl.auto">update</property>

     <!-- Mapping files -->
    <mapping class="com.SupportLMS.model.SupportUsers" /> 
```

* * *

这是我的 HibernateUtil.java 文件。

```
package com.SupportLMS.dbutils;

import org.hibernate.SessionFactory;
import org.hibernate.cfg.AnnotationConfiguration;

public class HibernateUtil {

    private static final SessionFactory sessionFactory = buildSessionFactory();

    private static SessionFactory buildSessionFactory() {
        try {
            // Create the SessionFactory from hibernate.cfg.xml
            System.out.println("session start ");
            return new AnnotationConfiguration().configure()
                    .buildSessionFactory();
        } catch (Throwable ex) {
            System.err.println("Initial SessionFactory creation failed." + ex);
            throw new ExceptionInInitializerError(ex);
        }
    }

    public static SessionFactory getSessionFactory() {
    System.out.println("sesion factory is   "+sessionFactory);
        return sessionFactory;
    }
} 
```

我注意到 SessionFactory 返回 null，我不知道如何破解..

# http - 使用 NGINX 进行浏览器特征检测

> ID：10037951
> 
> 赞同：3
> 
> 时间：2012-04-06T00:51:24.340
> 
> 标签：http, nginx

有谁知道 NGINX 的插件，它允许服务器根据浏览器的功能提供特定文件？例如：

```
if(Browser.Features.CSS3) {
  url.rewrite .../super_combined_css.css
}
else {
  url.rewrite .../basic_combined_css.css
} 
```

我假设它只有一个预定义的浏览器列表，这些浏览器属于某些类别（比如 CSS3 支持、CSS 动画、SVG 支持等）。一旦请求进来，它就会分析用户代理字符串以确定浏览器属于哪个类别。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T10:34:09.840

还没有特征检测插件或第三方之类的东西。但是，您可以使用此模块检测现代或古代浏览器：

[http://wiki.nginx.org/HttpBrowserModule](http://wiki.nginx.org/HttpBrowserModule)

**更新**

[在此处](http://nginx.org/en/docs/http/ngx_http_browser_module.html)查找新文档！

# javascript - 什么是您“需要”原型函数与内部函数的示例场景？

> ID：10037952
> 
> 赞同：3
> 
> 时间：2012-04-06T00:51:34.663
> 
> 标签：javascript, prototyping

我很难想到我需要这样做的真实场景：

```
function foo() {};
foo.prototype.myFunction = function() { return something; }; 
```

而不是简单地这样做：

```
function foo() { this.myFunction = function() { return something; } }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T00:55:24.930

当您需要实例化大量“foo”对象时，一个很好的例子就是它产生巨大差异的地方。基于原型的解决方案将比第二个解决方案更快、更高效。

在这种情况下产生巨大差异的原因是，在第二个示例中，您为每个新实例创建一个新函数，而在第一个示例中，所有对象共享相同的函数。

需要使用基于原型的继承来提高性能的现实世界的一个很好的例子是像 jQuery 这样的库。在非平凡的 Web 应用程序中，您可以轻松地最终创建 2000 多个对象实例。想象一下，如果这些对象中的每一个都必须有自己的功能而不是共享它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T01:01:05.377

让我们有两个实例`foo`（实际上，因为它是一个构造函数，所以它应该大写；））

```
var myFoo1 = new foo();
var myFoo2 = new foo(); 
```

在第一种情况下，`myFunction`是 in`foo`的原型，因此内存中只存在此函数的一个实例。`myFoo1`并且`myFoo2`都可以将这个函数用于自己的目的，因为他们用不同的`this`.

在第二种情况下，`myFunction`每次创建实例时`foo`都会创建一个新副本。内存中会有多个实例。

所以...如果将对象的方法（或只读成员变量，或简单的其他共享内容）放入原型中，它可以节省内存。另一方面，它也稍微减慢了成员查找速度——该函数并不直接存在于对象中，而是在其原型链上更上一层楼。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T01:01:24.287

从来没有*必*要这样做，但有一些优点，也有缺点。

*   `foo`一个优点：原型函数在从构造函数创建的所有对象之间共享。

*   `foo`缺点：原型函数无法直接访问构造函数调用的直接变量范围内的变量。

* * *

除了使用`prototype`构造函数之外，还可以在构造函数中直接分配函数，而无需为每个对象创建新函数。

你可以这样做...

```
var foo = (function() {

    var myFunction = function() { return something; };

    return function foo() { this.myFunction = myFunction; };

})(); 
```

这与原型函数具有相同的限制，因为`myFunction`显然无法访问构造函数范围内的变量。

# windows-8 - 共享 Windows 8 应用程序信息的方法

> ID：10037956
> 
> 赞同：0
> 
> 时间：2012-04-06T00:52:16.697
> 
> 标签：windows-8, microsoft-metro

我想发送信息以从 SMS 侦听器中检索信息。

Windows 8 Metro 应用程序不支持在 XML 文件、SQL 管理工作室中存储信息。唯一的方法是通过使用 SQL Azure 的 Web 服务。我做不到，因为我不够熟练。有没有其他方法可以从一个应用程序获取信息到另一个应用程序？或一个项目到另一个项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T01:26:37.557

Metro 应用程序可以读取和写入 XML 文件，Windows.Data.Xml 具有可让您读取和写入它们的 API。

如果您的应用程序可以访问文档库，则它可以读取和写入文档库中的文件。

您不需要使用 SQL azure 的 Web 服务来保存 Metro 应用程序中的数据。

# python - 在后台启动程序并在其中一个因退出代码而死亡时立即杀死它们

> ID：10037959
> 
> 赞同：2
> 
> 时间：2012-04-06T00:52:33.677
> 
> 标签：python, bash, shell, subprocess, kill

在 Linux 上，我想生成一些服务器作为后台服务。

**一旦其中一个以退出代码 != 0 终止**，他们**都**将被 SIGTERMed，如果他们不想去，则在 3 秒宽限期后被杀死。

按下 Ctrl-C 时也会发生同样的情况。

我想要一个粗略的等价物

```
set -e
server1 &
server2 &
server3 &
wait (+ kill on error) 
```

（不幸的是，上面的代码**没有**所有提到的属性。）

儿童不得**盗取/逃避 Ctrl-C 信号。**

我接受**Bash**和**Python**中的解决方案（使用`subprocess`）。对于 Python，它们可能只使用标准库函数（我不必先下载模块`pip`）。如果你有一种很酷的方法可以用另一种语言做到这一点，请不要犹豫，展示它。

如果它也适用于 Mac OS，则可以加分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T01:11:25.937

我不会为您编写解决方案，而是建议在哪里查看： `setpgrp`、`waitpid`、`kill`。请注意“儿童不能窃取/逃避 Ctrl-C 信号。” 既不可能（唯一不能回避的信号是`SIGSTOP`and `SIGKILL`）也不有意义（你没有`SIGINT`向他们传递）。

您无法正确执行此操作，`bash`因为`wait`等待所有指定的（或者，如果没有指定，则只是所有）进程；您需要“任何”语义，而不是“全部”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T14:18:58.617

```
#!/bin/sh
# Avoid <() process substitutions for portability's sake
set -bm
trap clean SIGCHLD
trap 'kill 0' SIGINT
trap 'sleep 3; kill -9 0' SIGTERM

clean() {
        while read spec pid extra; do
                wait $pid || kill 0
        done << EOF
                $( jobs -l | grep 'Exit\|Done' )
EOF
}

server1 &
server2 &
server3 &
wait 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T08:10:36.387

技术上可以直接在 bash*中*执行此操作，但我不会，因为它需要大量轮询并且效率低且容易出错（基本上您必须`kill -0 $pid`测试该过程是否仍然存在）。这是一些 bash 代码（来自我身边的一个脚本），它显示了如何记录后台进程 pid：

```
start_tail() {
    if [ x$TAIL_PID != x ]; then
        echo "internal error: already running tail (pid $TAIL_PID)"
    fi
    tail -0f $1 &
    TAIL_PID=$!
    trap "kill $TAIL_PID" 0 1 2 3 15
}

stop_tail() {
    if [ x$TAIL_PID != x ]; then
        kill $TAIL_PID; trap 0 1 2 3 15
        TAIL_PID=""
    fi
} 
```

在这种特殊情况下，您可能会使用“协同处理”和相当多的黑客攻击使其工作得更好（比上面故意限制的）。

在 Python 中会更容易，但不要使用`subprocess`; 使用直接操作系统调用（如上面描述的@geekosaur）。@jldupont 对[http://supervisord.org/](http://supervisord.org/)的推荐看起来不错（尤其是因为它是用 Python 编写的）。

# javascript - 如何将文件链接不仅存储在文件输入中，还存储在隐藏输入中？

> ID：10037962
> 
> 赞同：0
> 
> 时间：2012-04-06T00:53:19.910
> 
> 标签：javascript, html

我有一个 Javascript 代码，它将一个空白文件输入附加到一个表格行和一个清除按钮中。

```
 $('.imageFile').each( function() {

    var $this = $(this);
var $imagefile = $("<input type='file' class='imageFileRow'>").attr('name',$this.attr('name')+"[]")
               .attr('value',$this.val());

$image.append($imagefile);

            var $imageclear = $('<input />')
    .attr({
        type: 'button',
        name: 'imageClear',
        class: 'imageClear',
        value: 'Clear File'
    });

    $image.append($imageclear);

}); 
```

但是我想知道是否有可能是，如果用户使用上面的文本框选择一个文件，它显然会将文件链接存储在该文件输入文本框中，但我希望它将文件链接存储在我拥有的隐藏输入中在下面的表单代码中。此外，如果用户单击“清除文件”按钮，它不仅会清除上面文件输入文本框中的文件，还会清除隐藏输入中的文件。

下面是包含隐藏输入的表单代码：

```
<form id="QandA" action="insertQuestion.php" method="post" >

<input type="hidden" class="imageFile" name="fileImage">

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T00:58:11.573

据我所知，您无法访问该信息；沙盒将防止这种情况发生（我很高兴它这样做了；我将文档存储在 C:\porn\girlfriend\hellokitty.jpg 中与您无关；-)

还; 您确实意识到，即使*您*可以访问该信息，表单也只会发布文件位置而不是实际文件？

**编辑/更新**查看这个简单的[测试用例](http://jsfiddle.net/YXnM4) IE、Opera、Safari 和 Chrome return `c:\fakepath\`+ *<actual filename>*，我相信其他浏览器也会这样做。

# delphi - 需要帮助决定 Delphi XE2 Enterprise 还是 Delphi XE2 Professional

> ID：10037963
> 
> 赞同：0
> 
> 时间：2012-04-06T00:53:30.130
> 
> 标签：delphi, upgrade, delphi-xe2

我目前有 Delphi 2010 Professional，我想升级到 Delphi XE2。我很难决定是升级到 XE2 Enterprise 还是 XE2 Professional。我查看了[Delphi XE2 功能矩阵](http://www.embarcadero.com/images/dm/products/delphi_xe2_feature_matrix.pdf "特征矩阵")，但我仍然无法决定走哪条路。

成本差异为 700 美元，这是一个很大的考虑因素。当您升级到 XE2 的 Enterprise 或 Professional 版本时，您的决定是由哪些因素决定的，您后来后悔您的升级决定吗？

如果是就后悔，请解释原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T01:28:31.717

主要区别在于您是否需要进行客户端/服务器数据库开发。如果是这样，那么您将需要 Enterprise。否则，专业应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T10:20:53.680

我从不担心工具的成本，额外的 700 美元可能会以每小时 25 美分的价格计算出来！如果您认为您可能需要它，或者它使开发环境更加灵活或增加您的收入潜力，那么只需将其放入购物车并考虑您将在 25 美分之上赚取的每小时费率 :)

当然，这只是我的看法，并不是一个确定的答案。

# imap - 检索选定电子邮件列表的 IMAP 标头？

> ID：10037967
> 
> 赞同：1
> 
> 时间：2012-04-06T00:53:45.650
> 
> 标签：imap

我想查询收件箱中所有未删除的电子邮件，然后检索这些电子邮件的标题。它不工作。

首先，我查询未删除的电子邮件：

```
a0003 SEARCH UNDELETED
* SEARCH 14 56 242 243 244 405 
```

然后，我想查询一些标题信息：

```
a0004 FETCH 14,56,242,243,244,405 (FLAGS BODY.PEEK[HEADER.FIELDS (SUBJECT DATE FROM)]) 
```

...这会产生一个错误：

```
a0004 BAD Error in IMAP command FETCH: Invalid arguments. 
```

现在，如果我为我的消息列表执行类似 14:* 的操作，这将起作用。但这不是我想要的。我想查询一个非常具体的消息编号列表。

我也尝试使用 UID 来查看是否解决了问题：

```
a0003 UID SEARCH UNDELETED
* SEARCH 5536 5537 5538 5561 5568 5655

a004 UID FETCH 5536,5537,5538,5561,5568,5655, etc. 
```

...但我得到一个类似的错误。

关于如何最好地做到这一点的任何建议？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T17:33:18.313

虚惊。我解决了我自己的问题。事实证明，a`\r`正在潜入 FETCH 字符串。我清理了它，它工作正常。

感谢您确认它确实应该工作！

# javascript - Chrome webkitRequestFileSystem 和 file:// 协议

> ID：10037968
> 
> 赞同：0
> 
> 时间：2012-04-06T00:53:46.180
> 
> 标签：javascript, html, file, google-chrome

如果在运行时没有将某种调试开关传递给 Chrome，似乎不可能从本地文件中使用 webkitRequestFileSystem 方法。有没有办法要求用户允许保存由 javascript 在本地运行的 html 应用程序/文件中生成的文本文件（他们已经请求过的文件）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T02:00:40.540

有点，只要它不是太多的数据，你不需要支持旧版本的 IE。您可以使用[Data URI](http://en.wikipedia.org/wiki/Data_URI_scheme)来完成。

[10000173](https://stackoverflow.com/questions/10000173/data-uri-for-csv-file-in-firefox-not-putting-csv-extension)展示了该技术，[283956](https://stackoverflow.com/questions/283956/is-there-any-way-to-specify-a-suggested-filename-when-using-data-uri)提供了一些关于您如何无法轻松指定浏览器选择的文件名的答案。

# c++ - 多个对象的静态实例变量 - C++

> ID：10037969
> 
> 赞同：0
> 
> 时间：2012-04-06T00:53:52.220
> 
> 标签：c++, multithreading, static

我需要一个指向自身的静态变量，以便在线程方法中引用对象时使用。我试图在这种类型的许多对象中使用该`_beginthread`方法`process.h` 将使用线程方法。目前这是失败的，因为实例变量在整个类中共享。我需要实例变量是静态的才能在 threadLoop 中使用，并且需要它来引用对象。有什么建议么？

标题： `static Nodes *instance;`

执行： `Nodes *Nodes::instance = NULL;`

主.cpp：

```
for(int c = 0; c < 7; c++)
{
    nodesVect.push_back(Nodes(c, c+10));
}

for(int c = 0; c < 7; c++) 
{
   nodesVect.at(c).init(); // init() {  instance = this;  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T01:16:12.720

我的 _beginthreadex() 用法如下；

一个 cStartable 基类

```
virtual bool Start(int numberOfThreadsToSpawn);
virtual bool Stop();
virtural int Run(cThread &myThread) = 0;
//the magic...
friend unsigned __stdcall threadfunc(void *pvarg);
void StartableMain(); 
```

大事是：

```
unsigned __stdcall threadfunc(void *pvarg)
{
    cStartable *pMe = reinterpret_cast<cStartable*>(pvarg);
    pMe->StartableMain();
}
void cStartable::StartableMain()
{
   //Find my threadId in my threadMap
   cThread *pMyThread = mThreadMap.find( GetCurrentThreadId() );
   int rc = Run( pMyThread );
}
bool cStartable::Start()
{
   cThread *pThread = new cThread();
   pThread->Init();
   mThreadMap.insert( tThreadMapData(pThread->mThreadId, pThread) );
} 
```

和一个实用程序 cThread 类。

```
bool cThread::Init(cStartable *pStartable)
{
    _beginthreadex( NULL, /*stack*/ 65535), &threadfunc, pStartable, /*initstate*/0, &mThreadId );
     // now cThread has a unique bit of info that can match itself up within the startable's run.   
} 
```

需要线程的东西从 startable 继承并实现它们的 Run。

```
class Node : public cStartable {} 
```

我在这里编辑了很多代码。能够从单个对象一次生成多个线程实例并使其在子类级别如此干净，这一切都非常健壮和安静。

所有这一切的重点是 cNode::Run() 被传递给每个线程实例对象，每个线程实例堆数据可以附加到该对象中。否则所有线程实例共享它们的单个类实例作为它们的“内存空间”。我喜欢它:) 如果您需要更多详细信息，我很乐意分享。

# qt - 关闭从 mouseReleaseEvent RightClick 启动的 QDialog 会导致出现空白上下文菜单

> ID：10037970
> 
> 赞同：1
> 
> 时间：2012-04-06T00:54:05.773
> 
> 标签：qt, contextmenu, mouseevent, qgraphicsitem, qdialog

这发生在我弹出的每个从 QGraphicsItem 上的 mouseReleaseEvent 或从 QContextMenu 触发的 QDialog 上。我不明白问题是什么 - 代码很简单..

```
...
void MyQGfxItem::mouseReleaseEvent(QGraphicsSceneMouseEvent *event)
{
    if(event->button() == Qt::RightButton)
    {
        MyDialog someDlg;
        if(someDlg.exec())
        {

        }
    }
}
... 
```

只要通过 OK 或 Cancel 关闭对话框，就会在触发事件的位置出现一个空的上下文菜单：

![在此处输入图像描述](../Images/74926909b98973c97e3b5c4f604d98fb.png)

空白项似乎可以控制我的 QDockWidget 是隐藏还是可见。知道发生了什么吗？许多谷歌搜索让我陷入困境。

编辑 - 看起来只有在使用鼠标右键时才会发生这种情况..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T02:53:52.910

根据 QEvent 的文档，您应该接受不希望传播到父小部件的事件。所以在你的 mouseReleaseEvent 的某个地方，你应该添加

```
event->setAccepted(true); 
```

或者

```
event->accept(); 
```

请注意，您可能还需要将此代码放入 mousePressEvent 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T03:51:00.507

哈！知道了。看起来 QMainWindow 在一切都完成后抓住了右键单击事件。在 QMainWindow 中调用 this->setContextMenuPolicy(Qt::NoContextMenu) 会抑制它。

# ipad - “隐藏键盘”按钮不隐藏 iPad 模拟器上的键盘

> ID：10037972
> 
> 赞同：0
> 
> 时间：2012-04-06T00:54:55.543
> 
> 标签：ipad, keyboard, uitextfield, uitextview

我有这个非常奇怪的问题。在我的问题中，我有一个导航视图控制器，它将我原来的视图控制器推到另一个（我们称之为 AViewController）

附有一个xib文件。在 xib 中，有 2 个文本字段和 1 个文本视图。我已经确保所有的连接都是正确的，内存管理的东西也是如此。

问题是当我在文本视图内按下时，会出现一个键盘（这是正常的）。但是右下角的“关闭键盘”按钮没有响应。我可以看到，当我按下一次按钮时，它会改变颜色，但不会改变连续的颜色。可能是在我稍微移动鼠标并再次按下它之后，当我再次按下按钮时它会改变颜色。（当我说改变颜色时，通常是按下按钮时按钮颜色的改变）。

2个文本字段工作正常；当我按下“关闭键盘”按钮时，键盘隐藏起来。只有文本视图不起作用。

我还检查了代表团部分。我做了如果触摸背景，将调用resignfirst responder，并且它可以工作（触摸背景时键盘会消失），但按下“关闭键盘”按钮时不会消失。只有在我按下背景后（调用 resignfirstresponder 时）才会调用“textviewdidendediting”，但在按下“dismiss keybaord”按钮时不会调用。

我尝试了以下答案，但到目前为止没有任何效果： [Dismiss keyboard on IPAD](https://stackoverflow.com/questions/3316700/dismiss-keyboard-on-ipad)

“关闭键盘按钮是这样的： [检测 iPad 键盘隐藏按钮](https://stackoverflow.com/questions/3532846/detect-ipad-keyboard-hiding-button) （我不想弄乱按钮，我只是希望键盘在单击该按钮时正常消失）

再次，我在屏幕上有 2 个其他文本字段工作正常。按下按钮时，不会向委托调用任何方法

希望有人能帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-13T07:33:51.503

```
func textView(_ textView: UITextView, shouldChangeTextIn range: NSRange, replacementText text: String) -> Bool {

            textView.resignFirstResponder()
            return false
    } 
```

# javascript - 理解和实现基于力的图形布局算法

> ID：10037974
> 
> 赞同：2
> 
> 时间：2012-04-06T00:55:03.790
> 
> 标签：javascript, algorithm, layout, graph-algorithm

我正在尝试实现基于[http://en.wikipedia.org/wiki/Force-based_algorithms_(graph_drawing](http://en.wikipedia.org/wiki/Force-based_algorithms_(graph_drawing) )的强制基础图形布局算法

我的第一次尝试没有成功，所以我看了看

[http://blog.ivank.net/force-based-graph-drawing-in-javascript.html](http://blog.ivank.net/force-based-graph-drawing-in-javascript.html)

和

[https://github.com/dhotson/springy](https://github.com/dhotson/springy)

我根据我认为我从这两个方面理解的内容更改了我的实现，但我没有设法让它正确，我希望有人能提供帮助？JavaScript 不是我的强项，所以要温柔……如果您想知道为什么要编写我自己的。实际上，我没有真正的理由自己编写我只是想了解算法是如何实现的。尤其是在我的第一个链接中，该演示非常出色。

这就是我想出的

```
 //support function.bind - https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind#Compatibility
if (!Function.prototype.bind) {
    Function.prototype.bind = function (oThis) {
        if (typeof this !== "function") {
            // closest thing possible to the ECMAScript 5 internal IsCallable function
            throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");
        }
        var aArgs = Array.prototype.slice.call(arguments, 1),
        fToBind = this,
        fNOP = function () {},
        fBound = function () {
            return fToBind.apply(this instanceof fNOP
                ? this
                : oThis || window,
                aArgs.concat(Array.prototype.slice.call(arguments)));
        };
        fNOP.prototype = this.prototype;
        fBound.prototype = new fNOP();
        return fBound;
    };
}
(function() {
    var lastTime = 0;
    var vendors = ['ms', 'moz', 'webkit', 'o'];
    for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
        window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];
        window.cancelAnimationFrame =
        window[vendors[x]+'CancelAnimationFrame'] || window[vendors[x]+'CancelRequestAnimationFrame'];
    }
    if (!window.requestAnimationFrame)
        window.requestAnimationFrame = function(callback, element) {
            var currTime = new Date().getTime();
            var timeToCall = Math.max(0, 16 - (currTime - lastTime));
            var id = window.setTimeout(function() {
                callback(currTime + timeToCall);
            },
            timeToCall);
            lastTime = currTime + timeToCall;
            return id;
        };
    if (!window.cancelAnimationFrame)
        window.cancelAnimationFrame = function(id) {
            clearTimeout(id);
        };
}());
function Graph(o){
    this.options=o;
    this.vertices={};
    this.edges={};//form {vertexID:{edgeID:edge}}
}
/**
 *Adds an edge to the graph. If the verticies in this edge are not already in the
 *graph then they are added
 */
Graph.prototype.addEdge=function(e){
    //if vertex1 and vertex2 doesn't exist in this.vertices add them
    if(typeof(this.vertices[e.vertex1])==='undefined')
        this.vertices[e.vertex1]=new Vertex(e.vertex1);
    if(typeof(this.vertices[e.vertex2])==='undefined')
        this.vertices[e.vertex2]=new Vertex(e.vertex2);
    //add the edge
    if(typeof(this.edges[e.vertex1])==='undefined')
        this.edges[e.vertex1]={};
    this.edges[e.vertex1][e.id]=e;
}
/**
 * Add a vertex to the graph. If a vertex with the same ID already exists then
 * the existing vertex's .data property is replaced with the @param v.data
 */
Graph.prototype.addVertex=function(v){
    if(typeof(this.vertices[v.id])==='undefined')
        this.vertices[v.id]=v;
    else
        this.vertices[v.id].data=v.data;
}

function Vertex(id,data){
    this.id=id;
    this.data=data?data:{};
    //initialize to data.[x|y|z] or generate random number for each
    this.x = this.data.x?this.data.x:-100 + Math.random()*200;
    this.y = this.data.y?this.data.y:-100 + Math.random()*200;
    this.z = this.data.y?this.data.y:-100 + Math.random()*200;
    //set initial velocity to 0
    this.velocity = new Point(0, 0, 0);
    this.mass=this.data.mass?this.data.mass:Math.random();
    this.force=new Point(0,0,0);
}
function Edge(vertex1ID,vertex2ID){
    vertex1ID=vertex1ID?vertex1ID:Math.random()
    vertex2ID=vertex2ID?vertex2ID:Math.random()
    this.id=vertex1ID+"->"+vertex2ID;
    this.vertex1=vertex1ID;
    this.vertex2=vertex2ID;
}
function Point(x, y, z)
{
    this.x = x;
    this.y = y;
    this.z = z;
}
Point.prototype.plus=function(p){
    this.x +=p.x
    this.y +=p.y
    this.z +=p.z
}
function ForceLayout(o){
    this.repulsion  = o.repulsion?o.repulsion:200;
    this.attraction = o.attraction?o.attraction:0.06;
    this.damping    = o.damping?o.damping:0.9;
    this.graph          = o.graph?o.graph:new Graph();
    this.total_kinetic_energy =0;
    this.animationID=-1;
}
ForceLayout.prototype.draw=function(){
    //vertex velocities initialized to (0,0,0) when a vertex is created
    //vertex positions initialized to random position when created
  cc=0;  do{
        this.total_kinetic_energy =0;
        //for each vertex
        for(var i in this.graph.vertices){
            var thisNode=this.graph.vertices[i];
            // running sum of total force on this particular node
            var netForce=new Point(0,0,0)
            //for each other node
            for(var j in this.graph.vertices){
                if(thisNode!=this.graph.vertices[j]){
                    //net-force := net-force + Coulomb_repulsion( this_node, other_node )
                    netForce.plus(this.CoulombRepulsion( thisNode,this.graph.vertices[j]))
                }
            }
            //for each spring connected to this node
            for(var k in this.graph.edges[thisNode.id]){
                //(this node, node its connected to)
                //pass id of this node and the node its connected to so hookesattraction
                //can update the force on both vertices and return that force to be
                //added to the net force
                this.HookesAttraction(thisNode.id,
                    this.graph.edges[thisNode.id][k].vertex2
                    )
            }
            // without damping, it moves forever
            //         this_node.velocity := (this_node.velocity + timestep * net-force) * damping
            thisNode.velocity.x=(thisNode.velocity.x+thisNode.force.x)*this.damping;
            thisNode.velocity.y=(thisNode.velocity.y+thisNode.force.y)*this.damping;
            thisNode.velocity.z=(thisNode.velocity.z+thisNode.force.z)*this.damping;
            //this_node.position := this_node.position + timestep * this_node.velocity
            thisNode.x=thisNode.velocity.x;
            thisNode.y=thisNode.velocity.y;
            thisNode.z=thisNode.velocity.z;
            //normalize x,y,z???
            //total_kinetic_energy := total_kinetic_energy + this_node.mass * (this_node.velocity)^2
            this.total_kinetic_energy +=thisNode.mass*((thisNode.velocity.x+thisNode.velocity.y+thisNode.velocity.z)*
            (thisNode.velocity.x+thisNode.velocity.y+thisNode.velocity.z))
        }
        cc+=1;
    }while(this.total_kinetic_energy >0.5)
    console.log(cc,this.total_kinetic_energy,this.graph)
    this.cancelAnimation();
}
ForceLayout.prototype.HookesAttraction=function(v1ID,v2ID){
    var a=this.graph.vertices[v1ID]
    var b=this.graph.vertices[v2ID]
    var force=new Point(this.attraction*(b.x - a.x),this.attraction*(b.y - a.y),this.attraction*(b.z - a.z))
    //  hook's attraction
    a.force.x += force.x;
    a.force.y += force.y;
    a.force.z += force.z;
    b.force.x += this.attraction*(a.x - b.x);
    b.force.y += this.attraction*(a.y - b.y);
    b.force.z += this.attraction*(a.z - b.z);
    return force;
}
ForceLayout.prototype.CoulombRepulsion=function(vertex1,vertex2){
    //http://en.wikipedia.org/wiki/Coulomb's_law
    // distance squared = ((x1-x2)*(x1-x2)) + ((y1-y2)*(y1-y2)) + ((z1-z2)*(z1-z2))
    var distanceSquared =
    (
        (vertex1.x-vertex2.x)*(vertex1.x-vertex2.x)+
        (vertex1.y-vertex2.y)*(vertex1.y-vertex2.y)+
        (vertex1.z-vertex2.z)*(vertex1.z-vertex2.z)
        );
    if(distanceSquared==0) distanceSquared = 0.001;
    var coul = this.repulsion / distanceSquared;
    return new Point(coul * (vertex1.x-vertex2.x),coul * (vertex1.y-vertex2.y), coul * (vertex1.z-vertex2.z));
}
ForceLayout.prototype.animate=function(){
    if(this.animating)
        this.animationID=requestAnimationFrame(this.animate.bind(this));
    this.draw();
}
ForceLayout.prototype.cancelAnimation=function(){
    cancelAnimationFrame(this.animationID);
    this.animating=false;
}
ForceLayout.prototype.redraw=function(){
    this.animating=true;
    this.animate();
}
$(document).ready(function(){
    var g= new Graph();
    for(var i=0;i<=100;i++){
        var v1=new Vertex(Math.random(), {})
        var v2=new Vertex(Math.random(), {})
        var e1= new Edge(v1.id,v2.id);
        g.addEdge(e1);
    }
    console.log(g);
    var l=new ForceLayout({
        graph:g
    });
    l.redraw();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T18:03:29.993

这不起作用的至少一个原因是您错误地实现了弹簧。（[胡克定律](http://en.wikipedia.org/wiki/Hooke%27s_law)）

也就是说，你现在有两个点之间的弹簧一直把它们拉在一起。弹簧实际上做的是它有两个参数，一个自然长度和一个弹簧常数`k`。如果弹簧被拉伸，它会以`(length-naturalLength)*springConstant`. 如果弹簧被压缩，它会以 0 的力向外推`-(length-naturalLength)*springConstant`。

打印出所有东西的最终位置给你的调试信息很少。我强烈建议如果您仍然遇到问题，请立即编写显示代码（无论如何您都必须这样做），这样您就可以直观地看到正在发生的事情。或者，您应该只跟踪 2 个粒子的运动，它们之间有一个弹簧，在每个时间步输出调试信息。您应该将打印的内容限制为仅一个感兴趣的向量。

此外，如果您进一步遇到麻烦，您可以减少您的时间步长。

# sencha-touch - 单击按钮时呈现新视图

> ID：10037979
> 
> 赞同：2
> 
> 时间：2012-04-06T00:55:27.770
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我是 Sencha 2 的菜鸟，我正在尝试找到一种在单击按钮时呈现新视图的方法。具体来说，我有这个视图叫做 Home

**家**

```
Ext.define("Blog.view.Home", {
  extend:'Ext.Panel',
  xtype:'homepanel',

  config:{
    iconCls:"home",
    title:"Home",
    items:[
      {
        defaults:{
          iconMask:true
        },
        xtype:'toolbar',
        title:'Recent Blogs',
        docked:'top',
        items:[
          {
            id:'newBlog',
            xtype:'button',
            iconCls:'add',
            handler:function () {
              //What do I do here?
            }
          }
        ]
      },

      {
        html:"Recent Blogs"
      }
    ]
  }
}); 
```

我希望该按钮在单击时呈现新视图。我只是不确定我会怎么做这样的事情。有人可以给我一些指导吗？这是最好的方法吗？我应该把它移到我的控制器上吗？如果是，我应该听什么事件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T01:53:59.503

我这样做的方式（我也在学习）是定义我的按钮的属性“动作”，例如：

```
{
  xtype: 'button'
  action: 'doSomething',
} 
```

并在我的控制器的控制配置中处理事件：

```
control: {
  'button[action=doSomething]' : {
     tap: function() {
       getMainView().push(...);
     }
 } 
```

在处理程序中，如果您使用[NavigationView](http://docs.sencha.com/touch/2-0/#!/api/Ext.navigation.View)或直接向[ViewPort](http://docs.sencha.com/touch/2-0/#!/api/Ext.Viewport)添加新视图，则可以推送新视图。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T02:16:37.963

在 Sencha Touch 2（遵循 MVC 模式）中执行此操作的最佳实践是定义对按钮的引用并在控制器中将控制功能粘贴到它。例如：

```
refs:{
button_which_renders_a_new_view: '#newBlog' //create a reference to your button

control: {
button_which_renders_a_new_view: 'create_a_new_view'
}

create_a_new_view: {
// do whatever you want here
} 
```

有关更多详细信息，让我们更深入地了解一下：[http ://docs.sencha.com/touch/2-0/#!/api/Ext.app.Controller](http://docs.sencha.com/touch/2-0/#!/api/Ext.app.Controller)

# django - 过滤 django 查询集，包括 manytomany 字段中的特定对象

> ID：10037985
> 
> 赞同：4
> 
> 时间：2012-04-06T00:56:01.440
> 
> 标签：django, filter, many-to-many

这是我的模型，

```
class Age(models.Model):
    layer = models.CharField(max_length=50)
    order = models.PositiveIntegerField()
    ...
class Course(models.Model):
    target_age = models.ManyToManyField('Age')
    ... 
```

如何获得包含特定年龄的课程查询集？
意见：

```
request_courses = Course.objects.filter(target_age ... 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-06T01:10:33.350

你的问题有点含糊。首先，阅读有关[跨关系查询的文档。](https://docs.djangoproject.com/en/dev/topics/db/queries/#lookups-that-span-relationships)

如果您想获得仅`Age`与具有特定字段值的课程相关的课程：

```
Course.objects.filter(target_age__FIELD=...) 
```

其中 FIELD 是`Age`您要查询的模型中的字段。

或者，如果您有一个`Age`对象并且想要获取与特定`Age`对象实际相关的所有课程，您需要：

```
age = Age.objects.get(...)
courses = Course.objects.filter(target_age=age) 
```

或者，如果您想获得与许多可能的至少之一相关的课程`Age`：

```
ages = Age.objects.filter(...)
courses = Course.objects.filter(target_age__id__in=ages.values_list('id')) 
```

**编辑**

最后一个例子是[使用`in`查找](https://docs.djangoproject.com/en/dev/ref/models/querysets/#in)

# c# - 如何在带有 WCF 后端的 WPF 中正确使用 .NET 数据注释进行数据验证？

> ID：10037986
> 
> 赞同：3
> 
> 时间：2012-04-06T00:56:34.493
> 
> 标签：c#, .net, wpf, wcf, data-annotations

问题标题几乎解释了我想要做的事情。

出于示例目的简化我的代码：

示例 WCF 服务的位：

```
 pulic class Restaurant
    {
         //RegEx to only allow alpha characters with a max length of 40
         //Pardon if my regex is slightly off
         [RegularExpression(@"^[a-zA-Z''-'\s]{1,40}$")]
         public string Name { get; set; }
    }

    public class RestaurantService
    {
         List<Restaurant> restaurants = new List<Restaurant>();

         public AddRestaurant(string name)
         {
              Restaurant restaurant = new Restaurant();
              restaurant.Name = name;
              restaurants.Add(restaurant);
         }
    } 
```

示例 XAML 的位：

```
 <TextBox name="txt1" Text="{Binding Restaurant.Name, ValidatesOnDataErrors=True}"/> 
```

当我的数据注释被违反时，如何让我的视图执行某些操作？

我可以在这里和其他地方找到的所有示例要么不完全是我正在寻找的，要么与 ASP.NET 有关。我对 WPF 和数据注释知之甚少，而且我对 WCF 非常熟悉。

我已经尝试实现 IDataErrorInfo 接口，但我似乎无法在其中触发任何东西。我在 StackOverflow 上的另一个不同问题中找到了这段代码。我在 WCF 服务的 Restaurant 类中实现了这一点。

```
 public string this[string columnName]
    {
        get 
        {
            if (columnName == "Name")
            {
                return ValidateProperty(this.Name, columnName);
            }
            return null;
        }
    }

    protected string ValidateProperty(object value, string propertyName)
    {
        var info = this.GetType().GetProperty(propertyName);
        IEnumerable<string> errorInfos =
              (from va in info.GetCustomAttributes(true).OfType<ValidationAttribute>()
               where !va.IsValid(value)
               select va.FormatErrorMessage(string.Empty)).ToList();

        if (errorInfos.Count() > 0)
        {
            return errorInfos.FirstOrDefault<string>();
        }
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T06:21:06.957

Classes that are to be bound in XAML must inherit from INotifyDataErrorInfo or IDataErrorInfo interface. To my knowledge, INotifyDataErrorInfo does not exist in WPF (4) but only in Silverlight and .Net 4.5.

To answer your question - your class must inherit from IDataErrorInfo to make WPF react where there is an error (any error) in your class. So you have to have

```
public class Restaurant : IDataErrorInfo
{...} 
```

Implemented. Server classes can be annotated with ValidationAttribute but this will not flow if you simply add Service Reference. If you can share the DLL across the client and the service then you should have a working solution as long as your class inherits from IDataErrorInfo.

You can see an example [here](https://stackoverflow.com/questions/3739059/prism-idataerrorinfo-validation-with-dataannotation-on-viewmodel-entities)

# javascript - 将html元素转换为dojo节点？

> ID：10037988
> 
> 赞同：2
> 
> 时间：2012-04-06T00:56:51.433
> 
> 标签：javascript, dojo

我试着做

```
var div = document.createElement('div');
var nodeList = new query.NodeList();
nodeList.push(div);
nodeList.children(".someClass");
// I get error Uncaught TypeError: Object [object HTMLDivElement] has no method 'children' 
```

所以我猜我必须将 html 元素转换为 dojo Node 元素？你怎么做到这一点？

此外，当将父级作为没有 id 或类的 htmlElement 变量以及具有类名的子级时，您是否知道查询元素的子节点（基于子级的类名）的更好方法？

谢谢克雷格摇摆的解释

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T09:13:24.283

`dijit.findWidgets(DOMNode)`在 DOMNode 中查找并返回小部件。这将返回该 DOMNode 中的所有顶级小部件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T02:00:19.667

当您阅读文档中的 Node 时，它​​指的是 dom 节点，而不是特定于 Dojo 的任何内容。

如果你想创建一个新的 dom 节点，那么你应该使用 dom-construct。

[http://dojotoolkit.org/reference-guide/1.7/dojo/dom-construct.html](http://dojotoolkit.org/reference-guide/1.7/dojo/dom-construct.html)

给定一个特定节点，您可以使用以下命令查询其所有子节点：

```
var parentNode = ...
dojo.query('> *', parentNode).forEach(....); 
```

[http://dojotoolkit.org/reference-guide/1.7/dojo/query.html#dojo-query](http://dojotoolkit.org/reference-guide/1.7/dojo/query.html#dojo-query)

# jquery - 如何使用 ViewModel 数组字符串属性绑定多个文本框？

> ID：10037991
> 
> 赞同：2
> 
> 时间：2012-04-06T00:58:37.813
> 
> 标签：jquery, .net, asp.net-mvc, asp.net-mvc-3, c#-4.0

在下面的链接中有一个添加按钮，它允许您添加我在我的应用程序中使用的多个文本框。

[http://jsfiddle.net/cN5SR/200/](http://jsfiddle.net/cN5SR/200/)

现在我想知道如何将字符串值数组与我的 ViewModel 绑定。

假设我在 ViewModel 中的属性如下：

```
Public class MyViewmodel
{
   Public string[] players { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T03:24:26.577

如果我静态地执行它，我会使用 Razor 语法按如下方式执行它。

```
@for(int i = 0; i < Model.players.Length; i++)
{
   @Html.EditorFor(m => m.players[i]);
} 
```

这会产生以下标记：

```
<input class="text-box single-line" id="players_0_" name="players[0]" type="text" value="Bob" />
<input class="text-box single-line" id="players_1_" name="players[1]" type="text" value="Sam" /> 
```

因此，如果您使用如下所示的 javascript 添加两个输入并将其发布到您的控制器，则默认绑定器将创建一个包含 4 个项目的玩家数组。我希望你能看到模式。

```
<input class="text-box single-line" id="players_2_" name="players[2]" type="text" value="Pete" />
<input class="text-box single-line" id="players_3_" name="players[3]" type="text" value="Dirk" /> 
```

有一些挑战。我以前做过这个，并且在删除方面遇到了一些问题。我不记得确切的问题以及我在这一点上做了什么来解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T06:11:08.080

Steven Sanderson 就这个主题写了一篇[非常好的博客文章](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)。

# python - Python urllib 简单登录脚本

> ID：10037992
> 
> 赞同：1
> 
> 时间：2012-04-06T00:58:48.010
> 
> 标签：python, login, urllib2, urllib

我正在尝试使用 python 为我的大学制作一个脚本来登录我的“检查卡余额”服务。基本上它是一个网络表格，我们在其中填写我们的 PIN 和 PASS，它显示我们的卡上还剩下多少 $$$（用于食物）......

这是网页：[url]http://www.wcu.edu/11407.asp[/url]

这是我填写的表格：

```
<FORM method=post action=https://itapp.wcu.edu/BanAuthRedirector/Default.aspx><INPUT value=https://cf.wcu.edu/busafrs/catcard/idsearch.cfm type=hidden name=wcuirs_uri> 
<P><B>WCU ID Number<BR></B><INPUT maxLength=12 size=12 type=password name=id> </P>
<P><B>PIN<BR></B><INPUT maxLength=20 type=password name=PIN> </P>
<P></P>
<P><INPUT value="Request Access" type=submit name=submit> </P>
</FORM> 
```

如您所见，我需要填写的字段是：

```
<input maxlength="12" size="12" type="password" name="id">
<input maxlength="20" type="password" name="PIN"> 
```

然后我需要按下按钮：

```
<input value="Request Access" type="submit" name="submit"> 
```

当我在浏览器中执行此操作时，这会将我带到另一个页面，在该页面中以简单的 html 显示我的余额和 id ...

因此，我尝试编写一个 python 脚本来提供该页面的 html（这样我就可以解析出我剩下的金额并将其打印到屏幕上）

这是我到目前为止所拥有的：

```
import urllib                                                                   
import urllib2                                                                  
import sys                                                                      
import cookielib                                                                
import hashlib                                                                  

cookieJar = cookielib.LWPCookieJar()                                            
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cookieJar))           

opener.addheaders = [('User-agent', "Mozilla/5.0")]                             

username = "xxxxxxx"                                                          
password = "xxxxxxxx"                                                             
action   = "https://itapp.wcu.edu/BanAuthRedirector/Default.aspx"        

print hashlib.md5(hashlib.md5(password).hexdigest()).hexdigest()                
#url = "http://www.wcu.edu/11407.asp"                                           
url = "http://www.wcu.edu/11407.asp"                                            
form = {"action" : action,                                                      
        "id" : username,                                                        
        "PIN" : password}                                                       

encodedForm = urllib.urlencode(form)                                            
request = urllib2.Request(url, encodedForm)                                     
page = opener.open(request)                                                     
contents = page.read()                                                          

f = open("mycatpage.txt", "w")                                                  
f.write(contents)                                                               
f.close() 
```

为什么这不起作用？？？

提前致谢

**编辑** 我制作了一个新版本的脚本，但它给了我一个错误：

```
Traceback (most recent call last):
  File "checkbalance3.py", line 20, in <module>
    open("mycatpage.html", 'w').write(opener.open(request))
  File "/usr/lib/python2.7/urllib2.py", line 400, in open
    response = meth(req, response)
  File "/usr/lib/python2.7/urllib2.py", line 513, in http_response
    'http', request, response, code, msg, hdrs)
  File "/usr/lib/python2.7/urllib2.py", line 438, in error
    return self._call_chain(*args)
  File "/usr/lib/python2.7/urllib2.py", line 372, in _call_chain
    result = func(*args)
  File "/usr/lib/python2.7/urllib2.py", line 521, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
urllib2.HTTPError: HTTP Error 500: Internal Server Error 
```

这是代码：

```
from urllib import urlopen, urlencode                                           
import urllib2                                                                  

myId = 'xxxxxxxx'                                                              
myPin = 'xxxxxxx'                                                                

data = {                                                                        
            'id':myId,                                                          
            'PIN':myPin,                                                        
            'submit':'Request Access',                                          
            'wcuirs_uri':'https://cf.wcu.edu/busafrs/catcard/idsearch.cfm'      
        }                                                                       

opener = urllib2.build_opener()                                                 
opener.addheaders = [('User-agent','Mozilla/5.0')]                              

url = 'https://itapp.wcu.edu/BanAuthRedirector/Default.aspx'                    
request = urllib2.Request(url, urlencode(data))                                 

open("mycatpage.html", 'w').write(opener.open(request)) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T01:27:48.783

我试过这个（似乎工作，至少没有例外）：

```
from urllib import urlopen, urlencode
myId = '<your_id_here>'
myPin = '<your_pin_here>'
data = {
            'id':myId,
            'PIN':myPin,
            'submit':'Request Access',
            'wcuirs_uri':'https://cf.wcu.edu/busafrs/catcard/idsearch.cfm'
        }

url = 'https://itapp.wcu.edu/BanAuthRedirector/Default.aspx'
response = urlopen(url, urlencode(data))
open("mycatpage.txt",'w').write(response.read()) 
```

# flash - Flash builder：Datagrid 上的奇怪行为

> ID：10037993
> 
> 赞同：0
> 
> 时间：2012-04-06T00:58:49.000
> 
> 标签：flash, apache-flex, datagrid

这个问题让我发疯了，我真的需要你们的帮助。

我有一个显示从 mysql 查询的数据的数据网格。如果用户向数据库添加新记录，我正在尝试向我的数据网格添加一个新行。换句话说，我希望数据网格能够反映数据库中上传的数据。数据网格似乎只适用于我添加的第一条记录。如果我尝试添加第二条记录，则会添加新行，但它也会将第一行更改为新更新的记录。我知道这有点难以理解，所以我在这里画了一张图。

```
DATAGRID

id   name     number
1    test1     111
2    test2     222 
```

假设我添加了一条新记录，数据网格将是

```
id   name     number
1    test1     111
2    test2     222
3    test3     333  //new record, works fine. 
```

但如果我添加另一条记录，它将变成

```
id   name     number
1    test1     111
2    test2     222
4    test4     444  //old record, the values change to the newest record.
4    test4     444  //new record, but also change the previous record 
```

如果我再次添加另一条记录，它将变为

```
id   name     number
1    test1     111
2    test2     222
5    test5     555  //first record, the values change to the newest record.
5    test5     555  //second record, the values change to the newest record.
5    test5     555  //newest record, change the previous 2 records 
```

我已经做了任何我能想到的调试，但仍然没有运气。以下是我的代码：

```
// my php data service
<s:CallResponder id="addResult" result="addResult_resultHandler(event)" />

<script>

        //The handler after the user click ADD button

        protected function addBtn_clickHandler(event:MouseEvent):void
            {
                var newData:object = new Object();  
                newData.test1=formField1.text;
                newData.test2=formField2.text;
                newData.test3=formField3.text;
                newData.test4=formField4.text;

                            addResult.token=Service.createJob(newData);

            }

  //the result handler for data service. 
        protected function addResult_resultHandler(event:ResultEvent):void
                {
                           //jobData is my dataProvider in my datagrid component 
                          //not sure why addItem() would mess me up so badly...
                           //newData is an Object created after user click the update    
                           //button

                           jobDG.jobData.addItem(newData);          
                }

    Mxml

    <components:dataGridPanel  id="jobDG"
                               jobData="{getJobsResult.lastResult}"/>

    My datagrid component

    mxml
        <s:DataGrid id="dg" editable="true" x="5" y="3" width="734" height="253">
            <s:columns>
              <s:ArrayList>

                <s:GridColumn dataField="test1" headerText="text1">      
                            </s:GridColumn>
                <s:GridColumn dataField="test2" headerText="text2">            
                            </s:GridColumn>
                <s:GridColumn dataField="test3" headerText="text3">  
                            </s:GridColumn>
                <s:GridColumn dataField="test4" headerText="text4">  
                            </s:GridColumn>
               </s:ArrayList>
            </s:columns>
            <s:typicalItem>
            <fx:Object text1="aaaaa" text2="bbbbb" text3="ccccc" text4="dddddd">  
                     </fx:Object>
            </s:typicalItem>
             <s:AsyncListView list="{jobData}" />
        </s:DataGrid> 
```

我现在真的很绝望。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:20:51.643

我同意其他评论者的观点，即您发布的代码不太可能是您实际使用的代码，但我认为它确实显示了您的问题的根源。我认为您有一个名为 newData 的实例变量，您可以在类的顶部而不是在 addBtn_clickHandler 函数中实例化它。

它第一次起作用，因为您以前从未将它添加到集合中。当您再次单击该按钮时，我怀疑您只是在更改同一对象的属性，然后将其添加到结果处理程序中的集合中（而不是查看事件的数据以获取从数据库）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T05:00:52.750

我不太擅长 Flex/Flash-Builder，但我擅长使用 actionscript。您的代码对我来说看起来有点截断/简化？你能发布完整的功能吗？

我对 DataProviders 也不是很好，但我理解这个概念并且以前使用过 DataGrids。我会仔细检查[DataGrids 上的 AS3 文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/controls/DataGrid.html)：看起来那里的每个示例都首先完整地定义了提供程序，然后将其应用于网格。您可能必须使用一些特殊的侦听器设置事件，甚至在更新数据后销毁并重建整个网格？我假设这只是前端显示问题，但如果没有更多代码，我们不能排除后端逻辑问题。

# regex - 三进制数，正则表达式

> ID：10037996
> 
> 赞同：0
> 
> 时间：2012-04-06T00:59:08.560
> 
> 标签：regex, automata, ternary-representation

我正在寻找一些正则表达式/自动机帮助。我仅限于`+`或 Kleene Star。解析表示三进制数的字符串（如二进制，只有 3），我需要能够知道结果是否为 1 小于 4 的倍数。

所以，例如`120 = 0*1+2*3+1*9 = 9+6 = 15 = 16-1 = 4(n)-1`。

即使是指向模式的指针也会非常有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T01:30:46.480

您可以生成一系列值以在 bash 中使用 bc 进行一些观察：

```
for n in {1..40}; do v=$((4*n-1)); echo -en $v"\t"; echo "ibase=10;obase=3;$v" | bc ; done 

3   10
7   21
11  102
15  120
19  201
23  212
27  1000
31  1011
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T05:56:16.927

请注意，每个数字的值（十进制）交替地比可被 4 整除的值大 1 或小 1。所以第 1（lsb）位是 0 多一，第 3（第 2）位是比 4 少 1，第 9（第 3）位是比 8 多 1，第 27（第 4）位是比 28 少 1，依此类推.
如果将所有偶数位和所有奇数位相加，然后将奇数位加 1（如果从 1 开始计数），您应该得到相等。

在您的示例中：奇数：(0+1)+1，偶数：(2)。所以它们是相等的，所以这个数是 4n-1 的形式。

# java - 应该花多少时间进行垃圾收集

> ID：10037998
> 
> 赞同：10
> 
> 时间：2012-04-06T00:59:48.797
> 
> 标签：java, garbage-collection

我有一个负责归档旧应用程序的应用程序，它一次会执行大量应用程序，因此它需要一次运行数天。

当我的公司开发这个时，他们对其进行了相当多的性能测试，他们似乎从中得到了不错的数字，但我最近一直在为一个客户运行一个存档，它似乎运行得很慢，性能似乎它运行的时间会越来越长。

似乎没有内存泄漏，因为我使用 jconsole 对其进行了监视，因此仍然有大量可用内存并且似乎没有缩小。

然而，我注意到堆的幸存者空间和终身代可以很快填满，直到垃圾收集出现并将其清除，这似乎发生得相当频繁，我不确定这是否可能是明显的来源减速。

该应用程序现在已经运行了 7 天 3 小时，根据 jconsole 的说法，它已经花费了 6 小时执行复制垃圾收集（772、611 次收集）和 12 小时 25 分钟进行标记扫描压缩（145,940 次收集）。

这似乎需要花费大量时间在垃圾收集上，我只是想知道是否有人以前研究过这样的事情并知道这是否正常？

**编辑**

本地处理似乎很慢，例如，我正在查看日志中的一部分，该部分需要 5 秒才能使用 xpath 从 SOAP 信封中提取一些 xml，然后将其与根标记一起附加到字符串缓冲区。仅此而已做。我还没有对其进行分析，因为它正在生产中运行，我要么不得不通过网络下载数据，要么在我们的开发环境中建立一个大型测试基地，这可能最终不得不这样做。

运行 Java HotSpot 客户端 VM 版本 10.0-b23

真的只需要高吞吐量，没有配置任何特定的垃圾收集参数，将运行默认值。不确定如何找到正在使用的收集器？

**使固定**

最终得到了一个分析器，结果发现速度变慢的原因是一些代码不断地从状态框中修剪行，输出日志语句，这是非常糟糕的。应该认为垃圾收集是不断将状态文本复制到内存中的症状，而不是实际原因。

干杯伙计们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T02:08:55.877

根据您的数据，在 7 天的执行时间中，总垃圾收集时间约为 18 小时。大约占总执行时间的 10%，这稍微提高了一点，但即使您设法将其降低到 0%，您也只会节省 10% 的执行时间......所以如果您正在寻找大量节省，您应该更好地查看其他 90%，例如使用分析器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T02:50:29.370

如果没有适当的分析，这是一个猜谜游戏。不过，作为一个轶事，几年前，我当时参与的一个 Web 应用程序在 JDK 升级后突然减慢了 10 倍（响应时间）。我们最终追查到一个显式的 GC 调用，该调用是由一个不再在公司工作的天才添加的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T03:27:32.060

您将尝试在 JVM 堆占用空间和 GC 时间之间保持平衡。另一个问题可能是您是否有堆（和代）（不足）分配的方式要求过于频繁的 GC。在这些系统上部署多租户 JVM 时，我尝试将平衡保持在 5% 以下的总 GC 时间以及积极的堆收缩以保持低占用空间（再次，多租户）。堆和代将大多总是填充以避免频繁 GCing 到任何设置。删除`-Xms`参数以查看更真实的稳定状态（如果它有任何空闲时间）

+1 对分析的建议；它可能与 GC 无关，而是与代码有关。