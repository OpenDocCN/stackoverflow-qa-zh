# StackOverflow 问答 11678000-11678999

# javascript - Javascript 非 DOM 对象事件和事件冒泡

> ID：11678001
> 
> 赞同：1
> 
> 时间：2012-07-26T21:02:17.620
> 
> 标签：javascript, events, composite, event-bubbling

有谁知道我可以用来在 javascript 对象图中实现事件和事件冒泡而不通过 DOM 的库或模式？

简而言之，我有一个包含其他类实例的类的实例，我想从子类中触发事件，这些事件可以使图形/链冒泡。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:03:46.743

[bob.js 框架](http://www.bobjs.com)公开了您可以使用的事件机制。作为事件的对象，或者要求 bob.js 在您的对象上创建函数。这是第二种方法，因为它更易于阅读（请参阅下面有关**冒泡**的说明）：

```
var DataListener = function() { 
    var fire = bob.event.namedEvent(this, 'received'); 
    this.start = function(count) { 
        for (var i = 0; i < count; i++) { 
            fire(i + 1); 
        } 
    }; 
}; 
var listener = new DataListener(); 
listener.add_received(function(data) { 
    console.log('data received: ' + data); 
}); 
listener.start(5); 
// Output: 
// data received: 1 
// data received: 2 
// data received: 3 
// data received: 4 
// data received: 5 
```

至于**冒泡**：bob.js 不支持冒泡（至少目前）。此外，***如果在父级上定义的事件与在子级上定义的事件相似，则冒泡是可能的（对于 Html DOM 元素是这种情况，但对于非 DOM 对象并非总是如此）***。但是，作为一种解决方法，您可以让子事件侦听器在父对象上触发事件 - 效果类似于冒泡。

# c# - C#将控件的MaximumSize设置为父控件的当前大小

> ID：11678003
> 
> 赞同：0
> 
> 时间：2012-07-26T21:02:33.670
> 
> 标签：c#, winforms

我有一个简单的拖放式图像查看器。设置如下

*   我有我的主要形式
*   我创建一个面板并将其拉伸到表单的大小，`autoscroll`= true
*   我在面板中停靠了一个图片框，`sizemode`=自动调整大小

我将图片拖到加载图像的图片框上。图片框调整为图像尺寸，我的面板根据需要显示滚动条。

现在我最大化表单......但面板没有调整大小。

所以我将面板停靠在主窗体中，现在我最大化窗体并调整面板大小。

除了现在滚动条消失了。我猜问题是允许面板调整到所需的大小，因此不再需要滚动条。

我将面板的`MaximumSize`字段硬编码为 1024x768 之类的东西，然后面板将自身调整为该大小，然后根据需要显示滚动条，因为图像更大。

但是每个人的分辨率都不一样，那么如何`MaximumSize`将面板的大小设置为其父级的当前大小呢？父级可以是另一个面板或表单，但在我的具体情况下不是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:10:52.600

要使用窗体动态调整控件的大小，可以使用 Windows 窗体控件的[Anchor](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.anchor%28v=vs.80%29.aspx)属性。

我的建议是您与 Docking 属性一起使用，这些属性也可以从设计器中设置

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T21:23:30.327

表单有一个名为 Size 的属性，它包含表单的高度和宽度（以像素为单位）。您可以使用它来设置控件的大小。我建议将该代码放在 OnResize 事件处理程序中，以便每次表单都调整控件的大小。

# python-2.7 - 如何处理 python/urllib 状态码仍为 200 的重定向？

> ID：11678004
> 
> 赞同：1
> 
> 时间：2012-07-26T21:02:35.550
> 
> 标签：python-2.7, web-scraping, beautifulsoup, urllib, http-status-code-302

我在使用 Python 处理某个重定向时遇到问题。我正在请求一个显然加载并立即重定向到 ww1.www.com 的页面。我假设是这种情况，因为我已经尝试了所有我知道的返回标头/状态代码的方法，并且总是以适当的结果结束（状态代码：200，适当的主机/引荐来源参数等）。

这是我所拥有的：

```
from BeautifulSoup import BeautifulSoup
import urllib
import psycopg2
import psycopg2.extras

db = psycopg2.connect(
                     host = 'myIP'
                     database = 'myDATABASE'
                     user = 'myUSERNAME'
                     password = 'myPASSWORD'
                     )

cursor = db.cursor(cursor_factory = psycopg2.extras.RealDictCursor)
cursor.execute("SELECT info FROM table")

for row in cursor:
    url = 'http://www.website.com/' + row['info']
    file_pointer = urllib.urlopen(url)
    html_object = BeautifulSoup(file_pointer)

    if file_pointer.getcode() != 200:
        continue 
```

如果状态代码不等于 200，if 语句应该阻止执行任何进一步的代码，但是我在本节之后的代码中出现索引错误，并且在调查提供错误的 url 之后，我发现它重定向而没有给我状态码：302。

关于为什么我会在重定向时收到 200 状态代码响应的任何想法？（我也尝试过 urllib2 和 httplib 的等价物）另外，我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T18:58:30.183

**一件事看起来不对**

`html_object = BeautifulSoup(file_pointer)`应该对来自的数据而`urlopen`不是句柄进行操作：-所以-`html_object = BeautifulSoup(file_pointer.read())`是这里想要的...

**用于调试**

如果您还没有安装[请求](http://docs.python-requests.org/en/latest/)，那么它是用于此类事情的一个很棒的库。

然后：

```
import requests
for row in cursor:
    page = requests.get('your url')
    for hist in page.history:
        print hist.status_code, hist.url 
```

看看这是否会抛出任何令人费解的东西......

# jquery - 使用下拉列表的 Ajax.beginform 回发表单

> ID：11678005
> 
> 赞同：2
> 
> 时间：2012-07-26T21:02:36.857
> 
> 标签：jquery, asp.net-mvc-3, html.dropdownlistfor, ajax.beginform

在 MVC 应用程序中，我们在表单上有一个下拉列表。我正在使用 Ajax.Beginform() 回发数据。

有没有办法使用 Ajax.Beginform() 使用下拉选择的索引更改事件来回发表单数据。请问有什么建议吗？

```
 @using (Ajax.BeginForm("_EditMailToData", "Work", new AjaxOptions() { UpdateTargetId = "MailToFieldSet", HttpMethod = "POST" }, new { @id = "mailTo" }))
        {
            <fieldset id="MailToFieldSet">
             <h4 style="color: black">Mail To:</h4>

                <table style="width: 100%; background-color: #FFFFFF;" border="0" align="left">
   <tr>
    <td align="left" style="border: solid 0px;" nowrap="nowrap">
        @Html.LabelFor(m => m.MailToLocation)
    </td>
    <td align="left" style="border: solid 0px #00457C;" nowrap="nowrap">
       @Html.DropDownListFor(m => m.MailToLocation, Model.Locations)

    </td>
</tr> 
<tr>
    <td align="left" style="border: solid 0px;" nowrap="nowrap">
        @Html.LabelFor(m => m.MailToName)
    </td>
    <td align="left" style="border: solid 0px #00457C;" nowrap="nowrap">
        @Html.TextBox("txtmailToName", (string)Model.MailToName)
    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T04:13:58.243

`change`如果您使用的是 jquery，则可以使用该事件

```
$("#MailToLocation").change(function(){
  $("#mailTo").submit();
}) 
```

# xml - 自动格式化和区分 XML

> ID：11678008
> 
> 赞同：1
> 
> 时间：2012-07-26T21:02:41.947
> 
> 标签：xml, diff

我有两个 xml 文件，我想区分它们。

问题是 xml 文件没有格式化并且都在一行中。我发现的常规差异工具无法自动格式化它们。

我想知道是否有任何工具可以做到这一点（需要能够在命令提示符下调用）。或者是否有一个我可以在命令提示符下调用的自动格式化程序，以便之后我会调用 diff 工具。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:04:59.340

[http://tidy.sourceforge.net/](http://tidy.sourceforge.net/)是一个很好的缩进 XML 的工具，所以比较容易区分。有一个带有 MinGW MSYS（或 Cygwin）的 GNU diff 工具的端口。WinMerge 是我个人比较喜欢的一个很好的图形差异工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:54:35.837

命令行程序[xmllint](http://xmlsoft.org/xmllint.html)可以以不同的方式格式化和规范化您的 xml：

```
xmllint --format file.xml > formatted_file.xml

xmllint --c14n file.xml > canonicalized_file.xml 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-13T16:05:56.140

Use tidy and diff on the command-line like this:

```
diff <(tidy -q -xml file1.xml) <(tidy -q -xml file2.xml) 
```

You might want to add -indent to the tidy-commands.

# pyqt - 类型错误：强制转换为 Unicode：需要字符串或缓冲区，找到布尔值...接收错误？

> ID：11678011
> 
> 赞同：1
> 
> 时间：2012-07-26T21:02:54.073
> 
> 标签：pyqt

在我的代码中读取文件名时，我不断收到“TypeError：强制转换为 Unicode：需要字符串或缓冲区，找到布尔值”。我似乎无法弄清楚，因为我明确使用 filename=str("QFileDialog.....")... 我哪里出错了？

```
class MainWindow(QMainWindow):
    def __init__(self, filename=None, parent=None):
        super(MainWindow,self).__init__(parent)

        self.fileheader=None
        self.frameheader = None

        self.initUI()
        self.resize(900,900)

        if filename:
            self.setDataFile(filename)

    def initUI(self):
        self.filetable=QTableWidget()

        self.frametable=QTableWidget()
        self.filetable.setEditTriggers(self.filetable.NoEditTriggers)
        self.frametable.setEditTriggers(self.filetable.NoEditTriggers)

        self.imageBrowser=ImageViewer()

        self.imagesplitter=QSplitter(Qt.Horizontal)
        self.tablesplitter=QSplitter(Qt.Horizontal)
        self.imagesplitter.addWidget(self.imageBrowser)
        self.tablesplitter.addWidget(self.imagesplitter)
        self.tablesplitter.addWidget(self.filetable)
        self.tablesplitter.addWidget(self.frametable)
        self.setCentralWidget(self.tablesplitter)

        self._setTables()
        self._createMenuBar()

        self.imageBrowser.slider.sliderMoved.connect(self.change_image_index)

    def _setTables(self):

        self.filetable.setRowCount(len(FileHeader.fileheader_fields))
        self.filetable.setColumnCount(2)
        self.filetable.setHorizontalHeaderLabels(['File Header','value'])
        for i,field in enumerate(FileHeader.fileheader_fields):
            # just set the field names...no data
            name=QTableWidgetItem(field)
            #value=QTableWidgetItem(unicode(getattr(self.fileheader,field)))
            self.filetable.setItem(i,0,name)
            #self.filetable.setItem(i,1,value)

        #self.frameheader=self.fileheader.frameAtIndex(0)
        self.frametable.setRowCount(len(Frame.frameheader_fields))
        self.frametable.setColumnCount(2)
        self.frametable.setHorizontalHeaderLabels(['Frame Header','Value'])
        for i,fields in enumerate(Frame.frameheader_fields):
            # name only...no data yet
            Name=QTableWidgetItem(fields)
            #Value=QTableWidgetItem(unicode(getattr(self.frameheader,fields)))
            self.frametable.setItem(i,0,Name)

    def _createMenuBar(self):

        menubar=self.menuBar()

        exitAction=QAction(QIcon('exit.png'),'&Exit',self)
        exitAction.setShortcut('Ctrl+Q')
        exitAction.triggered.connect(qApp.quit)

        openAction=QAction(QIcon('open.png'),'&Open',self)
        openAction.setShortcut('Ctrl+O')
        openAction.triggered.connect(self.openNewFile)
        openAction.triggered.connect(self.setDataFile)

        fileMenu=menubar.addMenu('&File')
        fileMenu.addAction(openAction)
        fileMenu.addAction(exitAction)

    def populate(self):
        if not self.frameheader:
            print "[DEBUG] populate(): self.frameheader is None"
            return

        for i,field in enumerate(FileHeader.fileheader_fields):
            name=QTableWidgetItem(field)
            value=QTableWidgetItem(unicode(getattr(self.fileheader,field)))
            self.filetable.setItem(i,0,name)
            self.filetable.setItem(i,1,value)

        #self.frametable.setRowCount(len(self.frameheader.frameheader_fields))
        #self.frametable.setColumnCount(2)
        #self.frametable.setHorizontalHeaderLabels(['Frame Header','Value'])
        for i,fields in enumerate(self.frameheader.frameheader_fields):
            Name=QTableWidgetItem(fields)
            Value=QTableWidgetItem(unicode(getattr(self.frameheader,fields)))
            self.frametable.setItem(i,0,Name)
            self.frametable.setItem(i,1,Value)

    def change_image_index(self,val):
        if not self.fileheader:
            print "[DEBUG] change_image_index(): self.fileheader is None"
            return

        self.frameheader=self.fileheader.frameAtIndex(val)
        self.populate()

    def setDataFile(self, filename):
        self.fileheader=FileHeader(filename)
        self.imageBrowser.setFileHeader(self.fileheader)
        #frame=Frame(filename) # you only need the frame on demand

        self.change_image_index(0)

    def openNewFile(self):
        filename=str(QFileDialog.getOpenFileName(None,"open file","C:/vprice/DIDSON/DIDSON Data","*.ddf"))
        self.setDataFile(filename)

if __name__=="__main__":
    app=QApplication([])
    w=MainWindow()
    w.show()
    w.raise_()
    app.exec_() 
```

和错误代码：

```
Traceback (most recent call last):
  File "C:\Users\Tory\Desktop\PYTHON NOAA\DIDSONGUIqwttest.py", line 197, in setDataFile
    self.fileheader=FileHeader(filename)
  File "C:\Python27\lib\fileheader.py", line 31, in __init__
    self.infile=open(filename,'rb')
TypeError: coercing to Unicode: need string or buffer, bool found 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T02:02:54.180

问题的根源在这里：

```
openAction.triggered.connect(self.openNewFile)
openAction.triggered.connect(self.setDataFile) 
```

你真的要连接`openAction`到`setDataFile`吗？

请注意，`triggered`信号的签名是：

```
void QAction::triggered ( bool checked = false ) [signal] 
```

这意味着该`setDataFile`方法不断被调用，其`filename`参数设置为`False`- 并解释了为什么您看到`TypeError`抱怨接收布尔值而不是字符串。

# magento - Magento 没有显示在管理员中以编程方式添加的新类别名称

> ID：11678012
> 
> 赞同：3
> 
> 时间：2012-07-26T21:03:03.120
> 
> 标签：magento

我刚刚使用以下代码以编程方式创建了一个新的根类别：

```
$category = new Mage_Catalog_Model_Category();
$category->setStoreId(0);
$category->setName('Storybloks6');
$category->setUrlKey('storyblocks6');
$category->setIsActive('1');
$category->setIncludeInMenu('0');
$category->setDescription('Produtos que aparecem em destaque no carrossel da home');
$category->setDisplayMode('PRODUCTS');
$category->setIsAnchor('0');
$category->setLevel('1');
$category->setParentId('1');

$parentCategory = Mage::getModel('catalog/category')->load('1');
$category->setPath($parentCategory->getPath()); 
$category->save(); 
```

类别已添加，但在管理类别页面中，其标签未出现在菜单上： ![新类别在菜单上显示为 (0)](../Images/93f4bf9acb1d2909aec48750587fa93e.png) 新类别在菜单上显示为 (0)。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:11:27.233

检查您是否在同一商店（管理商店 - 代码 0）的后端查看类别树，或者可能是另一个没有设置标签的商店。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-31T16:56:20.090

在 Magento 根文件夹中创建一个名为 somename.php 的文件，并将以下代码粘贴到该文件中并保存。只需通过您的网络浏览器运行脚本。它应该创建一个类别“汽车”-它在 1.4.2.0 上对我有用。

```
<?php
require_once 'app/Mage.php';
Mage::app('default'); // Default or your store view name.

//get a new category object
$category = Mage::getModel('catalog/category');
$category->setStoreId(0); // 0 = default/all store view. If you want to save data for a specific store view, replace 0 by Mage::app()->getStore()->getId().

//if update
if ($id) {
  $category->load($id);
}

$general['name'] = "Cars";
$general['path'] = "1/3"; // 1/3 is root catalog
$general['description'] = "Great new cars";
$general['meta_title'] = "Cars"; //Page title
$general['meta_keywords'] = "car, automobile";
$general['meta_description'] = "Some description to be found by meta search robots.";
$general['landing_page'] = ""; //has to be created in advance, here comes id
$general['display_mode'] = "PRODUCTS_AND_PAGE"; //static block and the products are shown on the page
$general['is_active'] = 1;
$general['is_anchor'] = 0;
$general['url_key'] = "cars";//url to be used for this category's page by magento.
$general['image'] = "cars.jpg";

$category->addData($general);

try {
    $category->save();
    echo "Success! Id: ".$category->getId();
}
catch (Exception $e){
    echo $e->getMessage();
} 
```

# php - 从数组键php中获取最大的数字

> ID：11678013
> 
> 赞同：0
> 
> 时间：2012-07-26T21:03:06.027
> 
> 标签：php, arrays

我有这些数组，我需要做的是让每个数组单独检查 [total]，然后得到最大的 5 个数字。我一直在努力，但我的头快要爆炸了，请帮忙！

```
Array ( 
[0] => Array ( [id] => 50 [faceid] => 1508653983 [fname] => Mario [lname] => Zelaya [email] => Email [handicap] => Handicap [province] => Province [country] => Country [gender] => male [hand] => [shot1] => Shot #1 [shot2] => Shot #2 [shot3] => Shot #3 [shot4] => Shot #4 [shot5] => Shot #5 [news] => 1 [total] => 0 )

[1] => Array ( [id] => 49 [faceid] => 1665349411 [fname] => Yair [lname] => Villar [email] => servidorv@gmail.com [handicap] => lefthanded [province] => Buenos Aires [country] => Argentina [gender] => male [hand] => RH [shot1] => 200 [shot2] => 98 [shot3] => 98 [shot4] => 98 [shot5] => 98 [news] => 1 [total] => 592 ) 

[2] => Array ( [id] => 48 [faceid] => 1665349411 [fname] => Yair [lname] => Villar [email] => servidorv@gmail.com [handicap] => lefthanded [province] => Buenos Aires [country] => Argentina [gender] => male [hand] => RH [shot1] => 500 [shot2] => 250 [shot3] => 80 [shot4] => 30 [shot5] => 20 [news] => 1 [total] => 88000 )

) 
```

我怎么能用 php 做这些。请帮忙！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T21:26:04.927

尝试使用 php 的 usort 函数对数组进行排序：

```
function cmp($a, $b)
{
    if ($a['total'] == $b['total'])
        return 0;

    return ($a['total'] > $b['total']) ? -1 : 1;
}

usort($yourarray, "cmp");

if (count($yourarray) > 5)
    $sortedArray = array_slice($yourarray, 0, 5);
else
    $sortedArray = $yourarray; 
```

您最终将得到一个包含 5 个得分最高的元素的数组。如果输入数组中的元素少于 5 个，则最终得到的元素与输入数组中的元素一样多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T21:36:58.313

```
function getTop5(array $data, $high2low = true)
{
    $total = array();

    foreach ($data as $val)
        $total[$val["id"]] = $val["total"];

    asort($total);
    return $high2low ? array_reverse($total) : $total;
}

$data = array(
        array("id" => 1, "total" => 25),
        array("id" => 2, "total" => 32),
        array("id" => 3, "total" => 21),
        array("id" => 4, "total" => 28)
        );

print_r(getTop5($data)); 
```

# node.js - d3.js 不与 Jade 内联渲染

> ID：11678016
> 
> 赞同：0
> 
> 时间：2012-07-26T21:03:13.547
> 
> 标签：node.js, express, d3.js, pug

我正在尝试使用 Jade 内联渲染一些 d3.js (javascript)。有没有人试图做类似的事情/人们是否认为我试图实现这一目标的方式有什么问题？我正在尝试将我的javascript附加到脚本下方的div中，即radial_chart ...

非常感激任何的帮助！提前致谢。

**带 d3.js 的翡翠**

```
!!! 5
html
  head
    meta(name='viewport', content='user-scalable=no, width=device-width')
    title Simple Radar Chart
    link(href='../css/radialCSS_Mobile.css', rel='stylesheet', type='text/css')
    script(src='http://mbostock.github.com/d3/d3.js?2.5.0')
    script(src='http://code.jquery.com/jquery-1.7.1.min.js')
  style
    .axis line {
    stroke: #222;
    }
    .axis path {
    fill: none;
    stroke: #222;
    }
    .axis + .axis g text {
    display: none;
    }
    #clearfooter {
    height: 200px;
    }
  body
    script
      $(document).ready(function(){

        var svgsrc = !{JSON.stringify(svgsrc)};
          console.log(svgsrc);
          var html = '<a href="#" id="playButton">Play</a>';

      //  html += '<div id="radial_chart">svgsrc</div>';
          document.getElementById("radial_chart").innerHTML = svgsrc;
      canvg();
      });
    script(src='text/javascript')
      height = 600;
      width = 400;
      widthPadding = 2;
      heightPadding = 20;
      var angle = d3.scale.linear()
      .range([0, 2 * Math.PI]);
      angle.domain([0, 3]);
      outerRadius = height / 2 - 100,
      innerRadius = 60;
      var radius = d3.scale.linear()
      .range([0, outerRadius]);
      radius.domain([0, 10]);
      //var svg = document.getElementById("mySVG");
      //var svg = d3.select("#radial_chart");
      var svg = d3.select("#radial_chart").selectAll(".axis");
      var capitalMeta = ["Social", "Focus", "Activity"];
      // create Axis
      svg.selectAll(".axis")
      .data(d3.range(angle.domain()[1]))
      .enter().append("g")
      .attr("class", "axis")
      .attr("transform", function(d) { return "rotate(" + angle(d) * 180 / Math.PI + ")"; })
      .call(d3.svg.axis()
      .scale(radius.copy().range([-13, -outerRadius]))
      .ticks(5)
      .orient("left"))
      .append("text")
      .attr("y",
      function (d) {
      if (window.innerWidth < 455){
      console.log("innerWidth less than 455: ",window.innerWidth);
      return -(window.innerHeight * .33);
      }
      else{
      console.log("innerWidth greater than 455: ",window.innerWidth);
      return -(window.innerHeight * .465);
      }
      })
      .attr("dy", ".71em")
      .attr("text-anchor", "middle")
      .text(function(d, i) { return capitalMeta[i]; })
      .attr("style","font-size:12px;");

    #radial_chart
  script(src='/Users/dereklo/Node/pie/canvg.js')
    canvg(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:34:48.503

发布呈现的 html 以查看问题所在通常会有所帮助。在这种情况下，您似乎在脚本标记之外有一些额外的代码。我想你想要在你的`body`标签里面。请注意，我不知道代码是否会执行您想要的操作，但至少`html`应该格式正确。

```
script(src='/Users/dereklo/Node/pie/canvg.js')
script
  $(document).ready(function(){

    var svgsrc = !{JSON.stringify(svgsrc)};
    console.log(svgsrc);
    var html = '<a href="#" id="playButton">Play</a>';

    //  html += '<div id="radial_chart">svgsrc</div>';
    document.getElementById("radial_chart").innerHTML = svgsrc;
    canvg();
  });

  height = 600;
  width = 400;
  widthPadding = 2;
  heightPadding = 20;
  var angle = d3.scale.linear()
  .range([0, 2 * Math.PI]);
  angle.domain([0, 3]);
  outerRadius = height / 2 - 100,
  innerRadius = 60;
  var radius = d3.scale.linear()
  .range([0, outerRadius]);
  radius.domain([0, 10]);
  //var svg = document.getElementById("mySVG");
  //var svg = d3.select("#radial_chart");
  var svg = d3.select("#radial_chart").selectAll(".axis");
  var capitalMeta = ["Social", "Focus", "Activity"];
  // create Axis
  svg.selectAll(".axis")
  .data(d3.range(angle.domain()[1]))
  .enter().append("g")
  .attr("class", "axis")
  .attr("transform", function(d) { return "rotate(" + angle(d) * 180 / Math.PI + ")"; })
  .call(d3.svg.axis()
  .scale(radius.copy().range([-13, -outerRadius]))
  .ticks(5)
  .orient("left"))
  .append("text")
  .attr("y",
  function (d) {
  if (window.innerWidth < 455){
  console.log("innerWidth less than 455: ",window.innerWidth);
  return -(window.innerHeight * .33);
  }
  else{
  console.log("innerWidth greater than 455: ",window.innerWidth);
  return -(window.innerHeight * .465);
  }
  })
  .attr("dy", ".71em")
  .attr("text-anchor", "middle")
  .text(function(d, i) { return capitalMeta[i]; })
  .attr("style","font-size:12px;"); 
```

# java - 为什么 ScheduledExecutorService 没有根据需要生成线程？

> ID：11678021
> 
> 赞同：11
> 
> 时间：2012-07-26T21:03:51.220
> 
> 标签：java

在我的应用程序中，我使用 ScheduledExecutorService，但只生成了一个线程来处理计划任务。这是因为 ScheduledExecutorService 没有产生线程来处理挂起的任务吗？

这是一个代码片段，它将仅输出“run() 1”而不是预期的“run() 1”，然后是“run() 2”...“run() 10”。

```
public class App {

    public static void main(String[] args) {
        int N = 10;
        Runnable runner = new Runnable() {

            public void run() {
                foo();
            }
        };
        for (int i = 0; i < N; i++) {
            executor.schedule(runner, i, TimeUnit.MILLISECONDS);
        }
    }

    private static void foo() {
        System.out.println("run() " + (++n));
        synchronized (executor) {
            try {
                executor.wait();
            } catch (InterruptedException ex) {
                Logger.getLogger(App.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
        System.out.println("finished()");
    }
    private static Logger logger = Logger.getLogger(App.class.getName());
    private static int n = 0;
    private static ScheduledExecutorService executor = Executors.newScheduledThreadPool(1);
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-26T21:22:30.073

只有一个线程，因为您使用创建线程池`Executors.newScheduledThreadPool(1)`，这意味着线程池仅包含 1 个线程。如果您想要 10 个线程，请将 10 作为参数传递。请注意，该方法返回的[ScheduledThreadPoolExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html)的文档明确指出线程池具有固定大小。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-26T21:20:32.640

从 javadoc 为`ScheduledThreadPoolExecutor`：

> 虽然这个类继承自 ThreadPoolExecutor，但一些继承的调优方法对它没有用。特别是，因为它充当使用 corePoolSize 线程和无界队列的固定大小的池，所以对 maximumPoolSize 的调整没有有用的效果。此外，将 corePoolSize 设置为零或使用 allowCoreThreadTimeOut 几乎不是一个好主意，因为这可能会使池没有线程来处理任务，一旦它们有资格运行。

换句话说，`maximumPoolSize == corePoolSize`. 您设置`corePoolSize`为`1`，这就是它会产生的全部内容。

# qunit - 在 Casper.js 中运行 QUnit 测试

> ID：11678028
> 
> 赞同：2
> 
> 时间：2012-07-26T21:04:18.277
> 
> 标签：qunit, casperjs

我当前的单元测试正在使用`QUnit`，它们按照 QUnit[网站](http://qunitjs.com/)上的描述执行。基本上我所有的测试都编译为 a `tests.js`，这包含在`index.html`：

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>QUnit Example</title>
  <link rel="stylesheet" href="/resources/qunit.css">
</head>
<body>
  <div id="qunit"></div>
  <script src="qunit.js"></script>
  <script src="tests.js"></script>
</body>
</html> 
```

所以我的问题是，如何在 Casper.js 中使用我现有的单元测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T00:36:55.673

首先将 QUnit 和您的测试注入您的网站，就像您将 jQuery 一样（在 casper.start 函数中执行此操作）。这些文件必须绝对位于您的本地机器上才能工作。

```
casper.page.injectJs('/path/to/qunit.js');
casper.page.injectJs('/path/to/tests.js'); 
```

您需要使用[评估功能](http://casperjs.org/api.html#casper.evaluate)

```
casper.evaluate(function() {
    // this code is run in the context of your website
    doTests();
}); 
```

执行您的测试。

您可以编写一个函数来返回您的测试结果并将它们写入命令行。或者，对于我们当中比较懒惰的人，您可以使用

```
casper.capture('testResults.png'); 
```

评估后。

我还没有测试过这种特殊的方法，但我最近一直在使用 CasperJS，并相信它是实现您想要完成的目标的合理途径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-13T04:34:53.807

[在https://github.com/ariya/phantomjs/wiki/Headless-Testing](https://github.com/ariya/phantomjs/wiki/Headless-Testing)列举了几种集成 QUnit 和 CasperJS 的方法

在撰写本文时，它已内置支持、Chutzpah、JS Test Runner、QLive 和 QUnited。

# opencl - opencl 内核中的位反转

> ID：11678030
> 
> 赞同：0
> 
> 时间：2012-07-26T21:04:21.717
> 
> 标签：opencl, fft

嗨，有人可以向我解释 OpenCL 算法以对复数执行位反转。我检查了 bit hacks 页面，在 GPU 上它们都不起作用。

谢谢回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:29:25.517

AMD 记录了一个使用 OpenCL 的示例：

[http://developer.amd.com/documentation/articles/pages/OpenCLOptimizationCaseStudy-PartI.aspx](http://developer.amd.com/documentation/articles/pages/OpenCLOptimizationCaseStudy-PartI.aspx)

# html - 如何创建格式良好的 HTML 代码并获得预期的结果

> ID：11678032
> 
> 赞同：1
> 
> 时间：2012-07-26T21:04:46.947
> 
> 标签：html, formatting

如果您想整齐地格式化您的 HTML 代码，例如

```
<div>
  <a href="#">Link 1</a>
  <a href="#">Link 2</a>
</div> 
```

呈现页面时，链接之间会有空白。我怎样才能像这样格式化我的代码并摆脱链接之间不需要的空格？

另一件事。如果您使用 JavaScript 并且在第一个链接上有一个 onclick，则下一个兄弟将是一个空格，而不是一个链接。如何通过一个不错的妥协来做到这一点？

# php - PHP：如何在 paypal IPN 系统中集成 userid？

> ID：11678033
> 
> 赞同：1
> 
> 时间：2012-07-26T21:04:48.597
> 
> 标签：php, paypal, paypal-ipn

当用户登录时，用户 ID 存储在 User::Data('id') 中。

如何在 html 表单中使用用户 ID，以及如何访问 IPN 侦听器中的变量，以便在付款成功时更新正确的帐户？

这是我当前的按钮代码。

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="..">
<table>
<tr><td><input type="hidden" name="on0" value="Amount">Amount</td></tr><tr><td><select name="os0">
    <option value="100">100$100,00 USD</option>
    <option value="150">150$140,00 USD</option>
</select> </td></tr>
</table>
<input type="hidden" name="currency_code" value="USD">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynow_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/no_NO/i/scr/pixel.gif" width="1" height="1">
</form> 
```

这是我当前使用的监听器：[https ://github.com/Quixotix/PHP-PayPal-IPN/tree/58e029c235133b041006a45a9ce614739d8eb550](https://github.com/Quixotix/PHP-PayPal-IPN/tree/58e029c235133b041006a45a9ce614739d8eb550)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T23:38:07.880

您是否尝试过在 HTML 中使用“隐藏”表单元素？像这样：

```
<input type="hidden" name="user_id" value="medusa1414" /> 
```

您可以使用带有用户 ID User::Data('id')? 如你所说。

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="..">
<table>
<tr><td><input type="hidden" name="on0" value="Amount">Amount</td></tr><tr><td><select name="os0">
    <option value="100">100$100,00 USD</option>
    <option value="150">150$140,00 USD</option>
</select> </td></tr>
</table>
<?php echo '<input type="hidden" name="user_id" value="' . $user_id . '" />'; ?>
<input type="hidden" name="currency_code" value="USD">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynow_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/no_NO/i/scr/pixel.gif" width="1" height="1">
</form> 
```

您将能够通过使用在 PHP 中接收此值

```
$user_id = $_POST['user_id']; 
```

# actionscript-3 - 如何在 AS3 中使用 swapDepths & getNextHighestDepth()？

> ID：11678038
> 
> 赞同：1
> 
> 时间：2012-07-26T21:05:18.157
> 
> 标签：actionscript-3, flash

我正在尝试转换以下代码：

```
DNA0.swapDepths(this.getNextHighestDepth()) 
```

我试过这样：

```
DNA0.swapChildren(stage.getChildIndex(DNA0)); 
```

但它不起作用......我想我不明白其中的逻辑。有人帮我吗？

----编辑---- @gladoscc，干得好。这是工作。但我还有其他转换问题..

像，

```
this['DNA'+DNAsy.length].y = this['DNA'+(DNAsy.length-1)].y;
this['DNA'+DNAsx.length].x = this['DNA'+(DNAsy.length-1)].x;
DNAsy.push(this['DNA'+DNAsy.length].y)
DNAsx.push(this['DNA'+DNAsx.length].x) 
```

我想，我会问一个新问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:33:44.720

```
DNA0.parent.setChildIndex( DNA0, DNA0.parent.numChildren -1 ); 
```

您可以将 DNA0.parent 替换为 DNA0 容器引用：

```
cont.setChildIndex( DNA0, cont.numChildren -1 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T23:15:54.827

如果您想脱颖而出，只需：

```
setChildIndex(myMC,numChildren – 1) 
```

# c# - 以编程方式从 Business Objects Enterprise 获取文件路径

> ID：11678039
> 
> 赞同：0
> 
> 时间：2012-07-26T21:05:18.690
> 
> 标签：c#, business-objects, crystal-reports-server

在 Visual Studios 标准的 Crystal Reports API 中，有没有办法从 Business Objects Enterprise 服务器上现有的报表中提取文件路径？我们创建一个 ReportDocument 对象并使用 InfoStore 和 EnterpriseSession 加载它。我们正在寻找一种以编程方式提取文件路径名的方法，以便我们可以在提取过程中将其用于元数据。此外，我们尝试在 ReportDocument 类中使用 FileName 属性，但它只返回一个报表 CUID。

如果我们无法找到一种方法来执行此操作，我们将通过递归函数以编程方式执行此操作，但我肯定*更愿意*找到一个存储了它的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:09:36.447

这仅在信息存储中是可能的。在您的查询中，您希望在回复中包含 SI_FILES。如果您已经在执行*select * from CI_INFOOBJECTS where SI_NAME='XYZ'*那么您已经将它返回了。

棘手的部分是 SI_FILES 属性位于属性包中，并且有两个您关心的部分：

1.  SI_FILE1
2.  SI_PATH

SI_FILE1 是真实的文件名，因为它存储在文件存储库系统 (FRS) 中。SI_PATH 是 FRS 中文件的路径。该路径类似于*frs://Input/a_135/028/000/7303/* 第一部分*frs://Input*指的是为 CMC 内的 FRS 配置的路径。路径的其余部分是存储 SI_FILE1 的常规文件系统路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:01:22.713

仅供参考，这就是我们提出问题解决方案的方式。

我们只使用一个`StringBuilder`和一个`InfoObject`查询，如下所示：

```
string sReportQueryString = 
    "SELECT SI_ID, SI_CUID, SI_NAME, SI_PATH, SI_PARENT_CUID " + 
    "FROM CI_INFOOBJECTS " + 
    "WHERE SI_PROGID='CrystalEnterprise.Report' AND SI_INSTANCE = 0"; 
```

之后，我们调用递归方法并执行以下代码：

```
if (rptInfo.ParentID != 0)
{
    pathName.Insert(0, "\\" + rptInfo.Parent.ToString());
    getPath(rptInfo.Parent, ref pathName);
} 
```

哪里`rptInfo`是一个`InfoObject`和`pathName`是一个`StringBuilder`。

# android - FileReader csv : FileNotFoundException: 该文件不能作为文件描述符打开；它可能被压缩了

> ID：11678043
> 
> 赞同：0
> 
> 时间：2012-07-26T21:05:24.703
> 
> 标签：android, csv, filenotfoundexception

我想阅读一个 csv 文件。为此，我找到了我使用的 CSVReader：

```
List myEntries = null;
    try {
        AssetFileDescriptor descriptor = getAssets().openFd("file.csv");
        CSVReader csvReader = new CSVReader(new FileReader(descriptor.getFileDescriptor()), ',', '"');
        myEntries = csvReader.readAll();
        csvReader.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

但是我收到了这个错误：FileNotFoundException：这个文件不能作为文件描述符打开；它可能被压缩了。

我的文件位于资产文件夹中。

我已经看过这个线程：[java.io.FileNotFoundException：这个文件不能作为文件描述符打开；它可能被压缩](https://stackoverflow.com/questions/6186866/java-io-filenotfoundexception-this-file-can-not-be-opened-as-a-file-descriptor) 了它根本没有帮助我。

所以，我必须做错什么，但是什么？我应该将我的文件放在另一个文件夹中并用另一种方法打开它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T23:25:15.757

Android 会压缩所有资产，但以下类型除外：

```
".jpg", ".jpeg", ".png", ".gif",
".wav", ".mp2", ".mp3", ".ogg", ".aac",
".mpg", ".mpeg", ".mid", ".midi", ".smf", ".jet",
".rtttl", ".imy", ".xmf", ".mp4", ".m4a",
".m4v", ".3gp", ".3gpp", ".3g2", ".3gpp2",
".amr", ".awb", ".wma", ".wmv" 
```

如果您对构建过程有足够的控制权，则可以使用带有 zip 或 aapt 的“-0”标志来添加资产。

-0 指定一个附加扩展名，此类文件不会被压缩存储在 .apk 中。空字符串意味着根本不压缩任何文件。

如果您有机会使用 CSVReader 进行操作，请将您的 csv 文件存放在 assets 文件夹以外的其他位置，例如 sdcard。

# keyboard-shortcuts - 如何在 kata 期间记录我的击键？

> ID：11678044
> 
> 赞同：0
> 
> 时间：2012-07-26T21:05:29.193
> 
> 标签：keyboard-shortcuts, keystroke

为了评估我在一个 kata 中的表现，我想记录我在那个 kata 期间完成的击键。我想比较 katas 之间的击键，以便我可以优化以减少击键（使用正确的快捷键）。

有没有一种工具可以让我做类似于录音或屏幕抓取的工具？（我不想安装一个邪恶的键盘记录器。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:05:27.200

在官方 Debian 存储库中有一个

> [日志键](http://packages.debian.org/squeeze/logkeys)
> 
> GNU/Linux 系统的键盘记录器
> 
> Logkeys 并不比其他可用的 Linux 键盘记录器更先进，但更新了一点，它不会不可靠地重复键，它不应该让你的 X 崩溃。总而言之，它似乎工作。它依赖于 Linux 输入子系统的事件接口。设置后，它会记录所有常见的字符和功能键，同时也完全了解 Shift 和 AltGr 键修饰符。

```
 sudo apt-get install logkeys 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-30T12:41:42.610

对于[IntelliJ IDEA](http://www.jetbrains.com/idea/)，JetBrains 插件列表中有一个插件“IntelliJ Code Golf”。我首先在 IDEA 13 中注意到它。

对于 Eclipse，我写了一个插件[Keystrokes](http://hg.code-cop.org/org.codecop.keystrokes)来记录你所有的击键和快捷键。开始录制后的典型输出如下所示

```
ctrl-f6 
end left ctrl-shift-left "new Array" ctrl-space "l" enter 
ctrl-f11 up up down down enter (run test - OK) 
```

# jquery - .chosen.change() - 如何判断它是选择还是取消选择操作

> ID：11678045
> 
> 赞同：20
> 
> 时间：2012-07-26T21:05:29.697
> 
> 标签：jquery, jquery-chosen

我们如何确定组件上触发的更改事件是选择还是取消选择的结果？我们如何才能仅获取选定值或仅取消选定值的值？

```
$("#airports-select-2").chosen().change(function(event) {
    console.log('select2 change', event, $(event.target).val());
}); 
```

此代码为我提供了迄今为止在多选组件上选择的所有值？如何将其更改为仅给我新选择或取消选择的组件的值？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-08-23T23:12:37.783

从选择的[文档](http://harvesthq.github.io/chosen/options.html)：

> 每当进行选择时，Chosen 都会触发标准 DOM 事件（它还会发送一个***selected***或***deselected***参数，告诉您哪个选项已更改）。

```
 $('select').on('change', function(event, params) {
    // can now use params.selected and params.deselected
  }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T21:12:50.903

在每个事件触发时，您都可以触发：

```
var  target = $(event.target),
     priorDataSet = target.data("chosen-values"),
     currentDataSet = target.val();

//Diff and compare the delta here.    

target.data("chosen-values", currentDataSet); 
```

在更新 DOM 元素的数据之前，您可以通过差异来确定值集之间的差异。如果它是在旧的而不是在新的，它就会被删除。如果它是新的而不是旧的，那么它已被添加。

如果您需要一个如何确定两个数组之间的增量的示例，请告诉我，我也会为此提供一个示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-05T18:46:24.527

所选文档描述了[触发事件](https://harvesthq.github.io/chosen/options.html#triggered-events)

要在“search-choice-close”上捕捉事件，您可以尝试以下操作：

```
 $('#selectID').on('change', function(change, deselected) { //selected OR deselected
    //do something
    console.log('Value Deselected');
  }); 
```

# machine-learning - 使用矩阵（NxN）观察创建离散隐马尔可夫模型？

> ID：11678046
> 
> 赞同：2
> 
> 时间：2012-07-26T21:05:33.940
> 
> 标签：machine-learning, hidden-markov-models

在我见过的所有离散 HMM 中，观察数据都由整数流组成。但是，如果观察结果实际上是离散的特征向量会发生什么？例如，如果我尝试使用 HMM 来学习视频帧灰度强度值的手势识别，该怎么办？也就是说，每个观察都由一个 nxn 矩阵描述，而不是单个值？我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:45:18.473

您可以对 HMM 的发射分量使用离散[多项式分布](http://en.wikipedia.org/wiki/Multinomial_distribution)。例如，每个状态都会发出一个长度为整数的数组，`n*n`其值在 0 到 255 之间，表示像素强度（灰度）。

当然，如果值是连续的（浮点数），只需使用多元正态分布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T21:04:59.853

根据您要使用的库，`ObservationVectors`可能会很好用。您可以将矩阵展平为 n² 维向量，并使用经过验证的数据训练模型。然后，您可以从一系列矢量观察中检测到任何手势。

# html - 延迟加载在 AnySlider 中嵌入 iframe 内容

> ID：11678050
> 
> 赞同：0
> 
> 时间：2012-07-26T21:05:48.743
> 
> 标签：html, iframe, lazy-loading, anythingslider

**问题：**
我一直在尝试创建一个站点，该站点在 AnySlider 的幻灯片中包含嵌入的 iframe（8tracks.com 播放列表）。页面完全加载后，一切正常，嵌入 iframe 运行良好，只是我有这么多内容（8 个不同类型的滑动面板），在某些情况下需要 30 多秒才能将所有 8 个滑动面板加载为一个大热门所以我想在请求幻灯片页面时延迟加载嵌入的 iframe 内容，但我无法为此目的调整图像延迟加载编码。

**迄今为止的尝试：**
我想我可以简单地将来自 AnythingSlider 记录的图像延迟加载编码的 img 标签引用与 iframe 的图像交换，因为它们都只是对 src 的引用，所以它可以工作，但到目前为止这已被证明不是就是这样。下面的代码为图库中的图像启用了延迟加载，但是将其切换到 iframe 到目前为止还没有奏效：

```
// This part of the code is
// for demo purposes only
// *************************
    var message = function(file, p, l) {
    var txt = l ? '<i>loading #' + p + '</i>' : '<b>preventing load #' + p + '</b>';
    // show loading message
    $('.message').append('<li>' + txt + ': ' + file + '</li>').find('li:first').remove();
};
// The code above is for this demo only
// *************************

// load image
var loadImg = function(slider, page) {
    slider.$items.eq(page).find('iframe').each(function() {
        if ($(this).attr('src') === '') {
            var newsrc = $(this).attr('data-src');
            $(this).attr('src', newsrc);

            // update loading message
            message(newsrc, page, true); // *** for demo only ***
        }
    });
};

$('#slider').anythingSlider({

resizeContents: false,

// *********** Callbacks ***********
// Callback when the plugin finished initializing
onInitialized: function(e, slider) {
    var start = slider.options.startPanel;
    // allow start & cloned panel images to load
    // the rest get the src removed.
    slider.$items.eq(start).siblings(':not(.cloned)').find('iframe').each(function() {
        var $el = $(this);
        $el.attr('src', function(i, src) {
            if (src !== '') {
                $el.attr('data-src', src);

                // update loading message
                message(src, i + 1, false); // *** for demo only ***
            }
            return '';
        });
    });
    // load current image
    loadImg(slider, slider.currentPage);
    // load first cloned slide #0
    loadImg(slider, 0);
    // load last cloned slide #6
    loadImg(slider, slider.pages+1);
},

// Callback when slide initiates, before control animation
onSlideInit: function(e, slider) {
    // preload the targeted page image
    loadImg(slider, slider.targetPage);
}

}); 
```

如果您甚至可以帮助我指出正确的方向，我将非常感激，因为这几乎是我在整个站点中尚未解决的最后一个小问题。

这是页面的框架，其中包含所有需要的组件作为 zip 包 (200kb)，如果有帮助，请从我的保管箱链接.. [http://dl.dropbox.com/u/23417244/AnythingSlider.zip](http://dl.dropbox.com/u/23417244/AnythingSlider.zip)

非常感谢您的帮助！！-布拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T20:04:22.873

此演示设置方式的主要问题是它加载了当前显示的幻灯片和克隆的幻灯片。因此，如果用户在第一张幻灯片上，它将总共加载 12 个 iframe。如果它们从任何其他页面开始，它将加载额外的 7-8 个 iframe。

因此，最简单的解决方案是设置`infiniteSlides`选项或将滑块设置为使用`mode: 'fade'`。这些解决方案中的任何一个都不会在滑块中包含克隆的滑动面板，因此滑块只会加载 iframe 的当前页面（5-8 个 iframe）。

无论如何，我不得不结合 AnySlider 初始化代码——第二个带有延迟加载代码的代码被忽略了，因为 AnySlider 已经初始化了。

试试这个代码（[演示](http://jsfiddle.net/aTKzP/3085/)）：

```
jQuery(function($){
    // This part of the code is
    // for demo purposes only
    // *************************
    var message = function(file, p, l) {
        var txt = l ? '<i>loading #' + p + '</i>' : '<b>preventing load #' + p + '</b>';
        // show loading message
        $('.message').append('<li>' + txt + ': ' + file + '</li>').find('li:first').remove();
    };
    // The code above is for this demo only
    // *************************

    // load image
    var loadImg = function(slider, page) {
        console.debug('iframe? ' + slider.$items.eq(page).find('iframe').length);
        slider.$items.eq(page).find('iframe').each(function() {
            if ($(this).attr('src') === '') {
                var newsrc = $(this).attr('data-src');
                $(this).attr('src', newsrc);
                // update loading message
                message(newsrc, page, true); // *** for demo only ***
            }
        });
    };

    $('#slider').find('iframe').each(function() {
        var $el = $(this);
        $el.attr('src', function(i, src) {
            if (src !== '') {
                $el.attr('data-src', src);
                // update loading message
                message(src, i + 1, false); // *** for demo only ***
            }
            return '';
        });
    });

    $('#slider').anythingSlider({

        resizeContents: false,
        buildStartStop      : false,
        navigationFormatter : function(index, panel){ // Format navigation labels with text
            return ['Featured', 'Hip Hop', 'Dubstep', 'D&B', 'Midnight Trip', 'Dance Party', 'Chillin Beats', 'Sexy'][index - 1];
        },

        // *********** Callbacks ***********
        // Callback when the plugin finished initializing
        onInitialized: function(e, slider) {
            // load current image
            loadImg(slider, slider.currentPage);
            // load first cloned slide #0
            loadImg(slider, 0);
            // load last cloned slide #6
            loadImg(slider, slider.pages+1);
        },

        // Callback when slide initiates, before control animation
        onSlideInit: function(e, slider) {
            // preload the targeted page image
            loadImg(slider, slider.targetPage);
        }

    });
}); 
```

# javascript - 预加载声音文件

> ID：11678053
> 
> 赞同：0
> 
> 时间：2012-07-26T21:06:17.600
> 
> 标签：javascript, jquery, html, internet-explorer

希望有人能帮忙，这让我发疯......

我正在开发一个需要预加载大量（106 个！）MP3 文件的 Intranet 应用程序。我正在像这样预加载这些......

```
for (i=0; i<mp3Files.length; i++) {

    soundSpan = document.createElement("span")

    soundFileLocation = "http://wss/sites/TDABQ/" + mp3Files[i]

    soundSpan.innerHTML="<embed src='" + soundFileLocation + "' hidden='true' autostart='false' loop='false' />"

    document.body.appendChild(soundSpan)
} 
```

这可行，但需要一点时间，但是延迟加载不是问题。

问题是我无法找到一种方法来确定所有文件何时加载，以便我可以提示用户页面已准备好。

问题：

1.  这必须在 Internet Explorer 6 上工作（是的，真的），以便排除 HTML5 / 音频

2.  我无法将任何内容加载到存储此应用程序的服务器上（不要问），到目前为止已经排除了 SoundManager。我可以让 SoundManager 在与应用程序位于同一服务器上时正常工作，但尝试从另一台服务器加载 SoundManager 会导致 Flash > JS（或者是 JS > Flash）安全设置出现问题。这些设置不能在客户端 PC 上更改。

3.  我尝试过使用 JQuery 的 Ajax 和 Get 方法，但由于某种原因无法让它跨域进行 Ajax 调用，例如以下代码从不显示警报框

    $(文档).ready(函数() {

    $.get({ url: "http://wss/sites/TDABQ/field1.mp3", crossDomain:true, success: function() { alert('yes!') } });

    });

因此我使用嵌入标签来进行预加载。嵌入标签似乎不响应 onLoad 或 onReadyStateChange 事件处理程序。

我已经没有想法了...

我如何找出所有文件何时加载？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:30:26.910

AJAX 调用不起作用，因为（对于跨域 AJAX）JSONP 请求是唯一允许发出的请求。当前示例不是请求 JSON，而是请求 mp3。您可以请求一个包含 .mp3 路径的 JSON 文件，但这并不能解决您的问题。

我不知道 Sound Manager 的内部工作原理。我会听从 Esailija 的建议并检查 crossdomain.xml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T06:22:27.513

Ty using

```
$("#yourEmbed").bind('load', function(){ 
  alert("Files loaded"); 
}); 
```

The ready handler wont work, as it is fired as soon as the DOM has fully loaded.

# bash - bash 脚本，它读取文件的每一行并存储到不同的变量（但得到命令未找到消息）

> ID：11678054
> 
> 赞同：1
> 
> 时间：2012-07-26T21:06:34.843
> 
> 标签：bash, loops, sed, command, execute

提前感谢您的帮助。我正在编写一个简单的 bash 脚本，它只读取文件的每一行，然后将每一行存储到不同的变量中。例如，我希望脚本执行以下命令：

```
d1=AER
d2=BHR
d3=CEF
... 
```

因此，我有一个包含 10 行的文本文件，每一行都是我要存储的变量的内容（例如，AER），并且我有以下 test.sh 脚本：

```
#!/bin/bash
for i in {1..10..1}
do
    $(d$i=$(sed -n ${i}p $HOME/textfile.txt))
done 
```

但是，在执行脚本时，它给了我

```
./test.sh: line 4: d1=AER: command not found
./test.sh: line 4: d2=BHR: command not found
./test.sh: line 4: d3=CEF: command not found
... 
```

，而不是将字符存储到相应的变量中。有人可以确定我在哪里做错了吗？非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T21:30:54.473

您的脚本的问题在于，如果您需要在第一行插入一个变量，bash 会认为它是一个程序的名称并尝试执行它。您可以对其进行评估，以制作变量：

```
eval "d$i=$(sed ...)" 
```

但是使用内置的 read bash 要简单得多，因为它将行输入到指定的变量。这是一种方法：

```
for ((i=1;; i++)); do
    read "d$i" || break;
done < textfile.txt
echo "$d1"
echo "$d2" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T21:16:39.763

使用数组，但方法正确。

```
read -a d -d '\n' < textfile.txt
echo "${d[1]}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T21:37:39.077

作为阵列解决方案的替代方案，您可以使用`eval`.

```
((lnum=1))
exec 3< ${filetoread}
while read -u3 line
do
  eval `echo d${lnum}=\"${line}\"`
  ((lnum=1+${lnum}))
done
exec 3<&- 
```

# c# - 从 SqlDataReader 对象绑定 WPF 数据网格

> ID：11678057
> 
> 赞同：0
> 
> 时间：2012-07-26T21:06:48.027
> 
> 标签：c#, .net

如何将 SqlDataReader 对象中的数据绑定到 WPF 数据网格控件中。我不会知道在运行时将获取的确切列数。所以它应该动态检测列数并将数据附加到网格中。谢谢您的帮助。史密斯

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-26T21:22:50.667

如果您真的想绑定数据读取器，可以将此代码添加到静态类

```
 public static IEnumerable<System.Data.IDataRecord> AsEnumerable(this System.Data.IDataReader reader)
    {
        while (reader.Read())
        {
            yield return reader;
        }
    } 
```

然后就做

```
myGrid.ItemsSource = myReader.AsEnumerable(); 
```

我没有尝试过，但它*可能会*起作用。由于多种原因，它也可能不起作用。

但是，我认为您最好绑定到 DataTable。它与 DataReader 是同一个“时代”

# pygtk - 将 GtkEditable 信号链接到 GtkEntry

> ID：11678059
> 
> 赞同：0
> 
> 时间：2012-07-26T21:06:56.237
> 
> 标签：pygtk, gtkentry

我正在寻找一种使用链接到[`gtk_editable_insert_text`](http://developer.gnome.org/gtk/2.24/GtkEditable.html#GtkEditable-insert-text)in的行为的方法[`GtkEntry`](http://developer.gnome.org/gtk/2.24/GtkEntry.html)。后者没有发出这种行为的信号，我能得到的最接近的是 using [`gtk_entry_activate`](http://developer.gnome.org/gtk/2.24/GtkEntry.html#GtkEntry-activate)，但是这需要在输入文本后按下 Enter 。我一直在用这个特定的信号转圈，为了可用性，我希望有这种`insert-text`行为而不是`activate`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T10:40:00.737

[我在AskUbuntu](https://askubuntu.com/users/20837/timo)上问过一个类似的问题，我得到了 @Timo 的回答。原来我遇到的问题是由于对`gtk_editable_instert_text`实际情况的误解造成的。最后，蒂莫建议我使用`gtk_focus_out_event`它就像一个魅力。

# java - 访问属性的属性时检查空值的正确方法是什么？

> ID：11678074
> 
> 赞同：2
> 
> 时间：2012-07-26T21:08:25.683
> 
> 标签：java, coding-style, nullpointerexception

在类作为其他类的属性嵌入的常见情况下，检查空值的最佳方法是什么？

为了说明我在说什么，假设我想访问`this.getObject1().getObject2().someMethod()`where`getObject1()`或`getObject2()`could return `null`。现在我正在做以下事情，这很丑陋，必须有更好的方法：

```
if (this.getObject1() != null)
        if (this.getObject1().getObject2() != null)
            if (this.getObject1().getObject2().someMethod())
                return whatever; 
```

为了避免 NPE，在访问 someMethod() 之前，我必须在每一步检查空值。有什么更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T21:09:44.577

另一种选择是将每个方法的结果设置为变量，这样您就不必每次都重新调用该方法。所以，像这样

```
Object obj1 = this.getObject1();
if (null != obj1)
{
    Object obj2 = obj1.getObject2();
    if (null != ob2)
    {
         Object obj3 = obj2.someMethod();
         if (null != obj3)
               return whatever;
    }
} 
```

如果这些方法不昂贵，您可以选择更少的代码，`if`就像 Chris Nava 的解决方案一样

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T21:14:41.763

我使用 && 代替嵌套的 if()s。它只是稍微干净一点（可以说），但仍然不是我想要的。

```
if (
    this.getObject1() != null
    &&
    this.getObject1().getObject2() != null
    &&
    this.getObject1().getObject2().someMethod()
  ) {
            return whatever;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T21:12:04.217

您可以更简化它（至少更容易阅读），例如：

```
Object o1 = getObject1();
if(o1 != null)
{
    Object o2 = getObject2();
    if(o2 != null)
    {
        if(o2.someMethod()) return whatever;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T21:12:06.817

你真的无能为力。我的意思是，你可以将每个步骤分配给一个变量，但它最终会变成更多的代码，你*可以*编写一个通用方法来使用反射来完成它，但它的性能会低得多，因为没有什么好的理由.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-26T21:48:51.400

应尽可能避免这种风格——参见得[墨忒耳法则](http://pragprog.com/articles/tell-dont-ask)——尽管我很欣赏库或遗留代码可能不会给你留下太多选择。

函数式编程语言（尤其是）通过使用`Option`or`Maybe`对象来避免这个问题，在 Java 中可以在一定程度上使用这些对象。例如，请参阅[这篇文章](http://blog.tackley.net/2010/09/option-in-scala-vs-null-in-java.html)。例如，使用 Scala for-comprehensions 可以简洁地避免长序列的空值检查。但是回到Java...

理想情况下，假设您可以修改您正在调用的代码，您将进行重组，以便您可以调用“外部”对象，然后该对象将调用“内部”对象，每个阶段只有一次空检查。或者重构代码以避免这种深度嵌套。

# c# - 将位数据绑定到复选框

> ID：11678076
> 
> 赞同：4
> 
> 时间：2012-07-26T21:08:33.957
> 
> 标签：c#, asp.net

我有一个复选框，它数据绑定到我的数据库中的一个字段，并且该字段在数据库中有点。

这是我的复选框：

```
<asp:CheckBox ID="chkDownloaded" runat="server" Checked='<%#DataBinder.Eval(Container.DataItem, "Downloaded")%>' /> 
```

当我运行代码时，出现以下错误：

```
Specified cast is not valid. 
```

知道如何解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T21:13:29.770

尝试

```
DataBinder.Eval(Container.DataItem, "Downloaded") ?? false 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T21:19:17.453

## 选项1

您的要求`Database`应如下所示....

```
Select Cast(IsNull(Downloaded, 0) as bit) as Downloaded From TableName 
```

## 选项 #2

在 的情况下`Business Logic Layer` `Convert`的`Downloaded`值。`false``Null`

## 选项#3

```
protected void GridView_RowDataBound(object sender, System.Web.UI.WebControls.GridViewRowEventArgs e)
{
    CheckBox c = e.Row.FindControl("chkDownloaded");
    (((YourClassName)e.Row.DataItem).YourPropertyName) == null ? false : ((YourClassName)e.Row.DataItem).YourPropertyName;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T21:13:40.430

您必须将其转换为布尔值并绑定

这边走

```
<asp:CheckBox ID="chkDownloaded" 
runat="server" 
Checked='<%#Eval("Downloaded").ToString() == "1")%>' /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T21:15:42.900

尝试：

```
<%#DataBinder.Eval(Container.DataItem, "Downloaded")!=0%> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-26T21:22:08.110

不是 ASP.NET 专家，但如果该列可以为空，那么

```
Checked='<%#(Eval("Downloaded") ?? 0).ToString() == "1")%>' /> 
```

# python - 在 BeautifulSoup 中查找不同的字符串并返回包含标签

> ID：11678078
> 
> 赞同：2
> 
> 时间：2012-07-26T21:08:45.100
> 
> 标签：python, beautifulsoup

假设我有以下 HTML：

```
<p>
If everybody minded their own business, the world would go around a great deal faster than it does.
</p>

<p>
Who in the world am I? Ah, that's the great puzzle.
</p> 
```

我希望能够找到包含我正在寻找的所有关键字的所有标签。例如（示例 2 和 3 不起作用）：

```
>>> len(soup.find_all(text="world"))
2

>>> len(soup.find_all(text="world puzzle"))
1

>>> len(soup.find_all(text="world puzzle book"))
0 
```

我一直在尝试想出一个允许我搜索所有关键字的正则表达式，但似乎 ANDing 是不可能的（只有 ORing）。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T23:28:48.840

进行这种复杂匹配的最简单方法是[编写一个执行匹配](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#a-function)的函数，并将该函数作为`text`参数的值传入。

```
def must_contain_all(*strings):                                                 
    def must_contain(markup):                                                   
        return markup is not None and all(s in markup for s in strings)         
    return must_contain 
```

现在您可以获得匹配的字符串：

```
print soup.find_all(text=must_contain_all("world", "puzzle"))
# [u"\nWho in the world am I? Ah, that's the great puzzle.\n"] 
```

要获取包含字符串的标签，请使用 .parent 运算符：

```
print [text.parent for text in soup.find_all(text=must_contain_all("world", "puzzle"))]
# [<p>Who in the world am I? Ah, that's the great puzzle.</p>] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T08:51:13.783

您可能需要考虑使用[lxml](http://codespeak.net/lxml/)而不是 BeautifulSoup。lxml 允许您通过 XPaths 查找元素：

使用此样板设置：

```
import lxml.html as LH
import re

html = """
<p>
If everybody minded their own business, the world would go around a great deal faster than it does.
</p>

<p>
Who in the world am I? Ah, that's the great puzzle.
</p>
"""

doc = LH.fromstring(html) 
```

`<p>`这会在包含字符串的所有标签中找到文本`world`：

```
print(doc.xpath('//p[contains(text(),"world")]/text()'))
['\nIf everybody minded their own business, the world would go around a great deal faster than it does.\n', "\nWho in the world am I? Ah, that's the great puzzle.\n"] 
```

这会找到所有`<p>`包含`world`and的标签中的所有文本`puzzle`：

```
print(doc.xpath('//p[contains(text(),"world") and contains(text(),"puzzle")]/text()'))
["\nWho in the world am I? Ah, that's the great puzzle.\n"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T21:41:20.107

这可能不是最有效的方法，但您可以尝试设置交叉点：

```
len(set(soup.find_all(text="world")
    & set(soup.find_all(text="book")
    & set(soup.find_all(text="puzzle"))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T21:50:09.963

有点骨架（我使用的是 lxml 而不是 BeautifulSoup，但你可以使用 soup.findAll 来适应它）：

```
html = """
<p>
If everybody minded their own business, the world would go around a great deal faster than it does.
</p>

<p>
Who in the world am I? Ah, that's the great puzzle.
</p>
"""

import lxml.html
import re

fragment = lxml.html.fromstring(html)
d = dict(
    (node, set(re.findall(r'\S+', node.text_content())))
    for node in fragment.xpath('//p'))

for node, it in d.iteritems():
    # then use set logic to go from here... 
```

# php - 留空时的多个下拉菜单查询结果

> ID：11678083
> 
> 赞同：0
> 
> 时间：2012-07-26T21:09:06.503
> 
> 标签：php, mysql, sql, drop-down-menu

我是 php 新手，我遇到了问题。

我有三个下拉菜单来对结果进行排序，但我想这样做，所以如果他们不选择任何内容，则默认值为 SELECT * FROM 餐厅，并且如果只选择一个下拉菜单以仅考虑该字段。

```
<form id="form" name="vicinity" method="post" action="restaurant-list.php">
   <select class="form-banner" size="1" id="vicinity" name="vicinity">
      <option value=""> Select one </option>
      <option value="Back Bay">Back Bay</option>
      <option value="Beacon Hill">Beacon Hill</option>
      <option value="Chinatown">Chinatown</option>
   </select><br><br>
   <p class="font-2">Search by Cuisines</p>
   <select class="form-banner" size="1" id="cuisine" name="cuisine">
      <option value=""> Select one </option>
      <option value="American">American</option>
      <option value="Chinese">Chinese</option>
      <option value="Indian">Indian</option>
   </select><br><br>
   <p class="font-2">Search by Price</p>
   <select class="form-banner" size="1"  id="price" name="price">
      <option value=""> Select one </option>
      <option value="$">$ - Cheap</option>
      <option value="$$">$$ - Moderate</option>
      <option value="$$$">$$$ - Pricey</option>
   </select><br><br>
   <input type="submit" id="banner-search" value="Search"/>
</form> 
```

餐厅页面（目前仅在选择所有字段时有效）如果留空，则不显示任何内容。

```
<?php
require ("db.php");
$vicinity = $_POST["vicinity"];
$cuisine = $_POST["cuisine"];
$price = $_POST["price"];

$query = "SELECT * FROM restaurant WHERE vicinity=\"$vicinity\" AND cuisine=\"$cuisine\" AND price=\"$price\"";
$result = mysql_query($query);
?> 
```

任何帮助或想法如何实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:19:00.160

确保在您的 PHP 代码中执行此操作：（已编辑以显示防止注入的一步）

```
<?php
require ("db.php");
$vicinity = mysql_real_escape_string($_POST["vicinity"]);
$cuisine = mysql_real_escape_string($_POST["cuisine"]);
$price = mysql_real_escape_string($_POST["price"]);

$query = "SELECT * FROM restaurant WHERE 1=1 ";
if($vicinity) $query .= "AND vicinity=\"$vicinity\" ";
if($cuisine)  $query .= "AND cuisine=\"$cuisine\" ";
if($price)    $query .= "AND price=\"$price\"";
$result = mysql_query($query);
?> 
```

将 1=1 放在 where 之后就可以了，这样您就不必担心在 where 语句前面是否需要 AND 进行测试，并且它不会改变您的查询结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T21:17:31.560

如果您的 SQL 数据库支持 LIKE 语句，则应该这样做。

```
<?php
require ("db.php");
$vicinity = $_POST["vicinity"];
$cuisine = $_POST["cuisine"];
$price = $_POST["price"];

$query = "SELECT * FROM restaurant WHERE vicinity LIKE \"%$vicinity%\" AND cuisine LIKE \"%$cuisine%\" AND price LIKE \"%$price\%"";
$result = mysql_query($query);
?> 
```

当心，这样你很容易受到[SQL 注入的攻击](http://en.wikipedia.org/wiki/SQL_injection)

为了防止这种情况发生，您应该检查您的输入是否有任何数据并根据它们是否包含您的某些值来构建查询，或者是否使用某些 SQL 框架（可能是 Zend_Db）或转义变量的值。

# curl - curl: (48) 一个未知的选项被传递给 libcurl

> ID：11678085
> 
> 赞同：27
> 
> 时间：2012-07-26T21:09:07.660
> 
> 标签：curl, installation, libcurl, meteor

这真是令人沮丧。尝试运行标准 curl 命令时，我不断收到此错误：

```
curl --url https://install.meteor.com | sh
curl: (48) An unknown option was passed in to libcurl 
```

谁知道怎么修它？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2017-01-14T15:00:18.080

Alpine Linux 刚刚遇到了这个确切的问题。

除了 curl 之外，修复方法是安装 curl-dev。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-27T18:51:40.450

很可能你有一个新的，它使用一个不知道 curl 尝试使用的一个或多个选项`curl`的旧的。`libcurl`

`curl -V`将显示这一点，并向`ldd [path to curl]`您展示 curl 使用的所有共享库。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-07-27T01:53:23.337

我自己也遇到过这个问题。一些粗略的研究让我找到了[这个 bug tracker entry](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=666089)，但更新并没有解决问题。不过，我最近构建了`libcurl`from source 的最新版本，所以我认为这一定与目录结构混淆有关。我确定您可能不会处于完全相同的情况，但也许 Mountain Lion 引入了一个足够相似的错误，我为解决问题而采取的步骤可能会有所帮助。

首先，运行`which curl`以确定从何处调用二进制文件。然后通过运行确保该位置确实存在`locate -r /curl$`。如果没有（这是我的问题），请尝试`curl`使用 提供的所有完整路径运行`locate`，忽略明显多余的路径，例如`python-pycurl`.

一旦你找到了一个可以工作的，你可以从找到的那个创建一个符号链接`which`，或者检查删除后者是否会允许 shell 自己找到正确的一个。对我来说，修复就像删除一样简单`/usr/local/bin/curl`，导致`which curl`正确响应`/usr/bin/curl`并`curl`返回正常操作。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-07-20T22:15:41.563

如果您只是从源代码构建 curl，请运行`sudo ldconfig`以修复它。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-04-17T14:21:09.983

这与我在 Ubuntu 上从源代码安装 cURL 后遇到的错误相同。

```
$ curl http://www.google.com
curl: (48) An unknown option was passed in to libcurl 
```

查看 cURL 的版本表明 curl 已更新，但使用的是旧版本的 libcurl：

```
$ curl --version
curl 7.41.0 (x86_64-unknown-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3 
```

为了解决我的问题，我`libcurl.so`从我下载的最新 curl 文件夹中复制了其他文件，并覆盖了我机器上已有的文件。

```
cp /tmp/curl-7.41.0/lib/.libs/libcurl.so* /usr/local/lib/ 
```

这解决了我的问题。

```
$ curl --version
curl 7.41.0 (x86_64-unknown-linux-gnu) libcurl/7.41.0 OpenSSL/1.0.1 zlib/1.2.3.4

$ curl -I http://www.google.com
HTTP/1.1 302 Found
[...snip...] 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-12-18T13:16:46.953

这可以通过将 cURL 重新安装到 /usr/bin 而不是 /usr/local/bin 来解决，因为 Ubuntu 12.04 在不同位置安装时会表现得很奇怪

此外，这可能是一个可能的修复，但要小心

```
ln -s /usr/bin/curl /usr/local/bin/curl 
```

这意味着，二进制文件`/usr/local/bin`并不是系统正在寻找的二进制文件，或者已经过时或无法正常运行。需要一个简单的符号链接。

* * *

为了安全起见，你也可以

```
mv /usr/local/bin/curl /usr/local/bin/curl.bak 
```

在`ln -s`版本`/usr/bin/curl`结束之前。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-11-07T04:53:21.477

我也遇到了这个错误，但我没有运行 Mountain Lion，我想要一种简单、干净的方法来确保它正确 - 在任何系统上。（注意 #1：我碰巧在旧 ARMv7 Chromebook 上的 crouton Ubuntu/LXDE chroot 中。）（注意 #2：我从源代码构建了每晚版本。以传统方式安装 curl 没有问题，即`sudo apt-get install curl`。）

当我检查版本`curl -V`时，它显示了我全新的 curl 夜间构建版本：7.51.1-20161107，但旧的 libcurl：7.22 ......

我有预感这就是问题所在。我试着弄乱符号链接，但它对我不起作用，我只是弄得一团糟，所以我查阅了官方安装页面：[https](https://curl.haxx.se/docs/install.html) ://curl.haxx.se/docs/install.html 。

> 要强制编译静态库，请通过运行如下配置禁用共享库创建：
> 
> ./configure --disable-shared

所以我从我的 curl 源目录中运行了以下内容：

1.  `sudo make uninstall`
2.  `./configure --disable-shared`
3.  `make`
4.  `sudo make install`

现在 curl 版本与 libcurl 版本匹配，并且可以正常工作。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-05-13T13:06:38.280

I had a similar problem (in Ubuntu 12.04). I manually installed curl in `usr/local/bin` and any command I type was giving `curl:(48) An unknown option was passed in to libcurl`

I fixed it uninstalling curl (`sudo make uninstall`) and installing it from apt-get (`sudo apt-get install curl`), which automatically placed curl in `usr/bin`. Then it worked!

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-05-11T12:52:31.430

在macos上得到了这个，不知何故从自制软件安装了curl并链接，解决方案是：

*   定位卷曲：（`which curl`在`/usr/local/bin/curl`我的情况下）
*   删除它（除非它已经是 /usr/bin 之一）`rm /usr/local/bin/curl`：.

现在`which curl`会给`/usr/bin/curl`

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-08-01T12:00:03.853

`cygwin`当我手动构建`curl`以使用`https`并且一切正常时，我遇到了同样的问题

直到有一天我`curl`通过运行`cygwin`setup 更新了包并且没有更新包`libcurl4`，并开始遇到同样的错误。

我通过运行检查了 curl 版本信息：

```
$ curl -V
curl 7.54.1 (i686-pc-cygwin) libcurl/7.52.1 OpenSSL/1.0.2j zlib/1.2.8 libidn2/2.0.2 libpsl/0.17.0 (+libidn2/0.11) libssh2/1.7.0 nghttp2/1.14.0
Release-Date: 2017-06-14
Protocols: dict file ftp ftps gopher http https imap imaps ldap ldaps pop3 pop3s rtsp scp sftp smb smbs smtp smtps telnet tftp 
Features: Debug IDN IPv6 Largefile GSS-API Kerberos SPNEGO NTLM NTLM_WB SSL libz TLS-SRP HTTP2 UnixSockets HTTPS-proxy Metalink PSL 
```

所以我发现 cygwin 更新包`curl`到**7.54.1**但`libcurl`还是在**7.52.1**

所以我卸载了软件包`curl`并`libcurl`重新安装，然后一切又运行良好。

```
$ apt-cyg remove libcurl4 curl
Removing libcurl4
Package libcurl4 removed
Removing curl
Package curl removed

apt-cyg install curl libcurl4
Installing curl
curl-7.54.1-1.tar.xz: OK
Unpacking...
Package curl requires the following packages, installing:
cygwin libcurl4 libmetalink3 libopenssl100 zlib0
Package cygwin is already installed, skipping
Installing libcurl4
libcurl4-7.54.1-1.tar.xz: OK
Unpacking...
Package libcurl4 requires the following packages, installing:
ca-certificates cygwin libgcc1 libgssapi_krb5_2 libidn2_0 libnghttp2_14 libopenldap2_4_2 libopenssl100 libpsl5 libssh2_1 zlib0
Package ca-certificates is already installed, skipping
Package cygwin is already installed, skipping
Package libgcc1 is already installed, skipping
Package libgssapi_krb5_2 is already installed, skipping
Package libidn2_0 is already installed, skipping
Package libnghttp2_14 is already installed, skipping
Package libopenldap2_4_2 is already installed, skipping
Package libopenssl100 is already installed, skipping
Package libpsl5 is already installed, skipping
Package libssh2_1 is already installed, skipping
Package zlib0 is already installed, skipping
Package libmetalink3 is already installed, skipping
Package libopenssl100 is already installed, skipping
Package zlib0 is already installed, skipping
Package curl installed
Package libcurl4 is already installed, skipping 
```

再次查看 curl 版本信息：

```
$ curl -V
curl 7.54.1 (i686-pc-cygwin) libcurl/7.54.1 OpenSSL/1.0.2j zlib/1.2.8 libidn2/2.0.2 libpsl/0.17.0 (+libidn2/0.11) libssh2/1.7.0 nghttp2/1.14.0
Release-Date: 2017-06-14
Protocols: dict file ftp ftps gopher http https imap imaps ldap ldaps pop3 pop3s rtsp scp sftp smb smbs smtp smtps telnet tftp 
Features: AsynchDNS Debug IDN IPv6 Largefile GSS-API Kerberos SPNEGO NTLM NTLM_WB SSL libz TLS-SRP HTTP2 UnixSockets HTTPS-proxy Metalink PSL 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-03-30T07:41:36.953

在 Ubuntu 16.04 LTS 上，我刚刚将 /usr/local/lib 添加到 /etc/profile 中的 LD_LIBRARY_PATH (LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH; export LD_LIBRARY_PATH)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-12-26T13:40:02.463

在通过打包安装从源代码编译后遇到了同样的问题，使用正确的标志解决了它`configure`：

```
./configure --prefix=/usr --libdir=/usr/lib64 
```

如果没有该`--libdir=`选项，我的安装的是*libcurl*的更新版本，`/usr/lib`而不是`/usr/lib64`新的`curl`二进制文件仍在访问旧库，导致不兼容。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2012-07-26T21:55:13.040

删除`--url`参数：

`curl https://install.meteor.com | /bin/sh`

# android - Android：带有图像和文本的搜索结果列表视图

> ID：11678092
> 
> 赞同：0
> 
> 时间：2012-07-26T21:09:40.820
> 
> 标签：android, android-layout, android-listview, android-linearlayout, android-ui

在我正在开发的 android 4.1 应用程序中，我希望搜索结果列表视图中的文本显示在缩略图的右侧。我通过解析 xml 文件得到结果。现在我的文字出现在图像下方，但我希望它出现在图像的右侧。

people_search_list.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <ListView android:id="@android:id/list"
        android:layout_width="fill_parent" android:layout_height="0dip"
        android:layout_weight="1" android:drawSelectorOnTop="false"
        />

    <ImageView
        android:id="@+id/image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:contentDescription="@string/description"
        android:gravity="left"
        android:scaleType="fitXY" />

        <TextView
        android:id="@+id/empty"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="left"
        android:text="" />

    <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="wrap_content">

    <LinearLayout
        android:id="@+id/footer"
        style="@android:style/ButtonBar"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/prev_10_results"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.14"
            android:text="@string/prev_10_results" />

        <Button
            android:id="@+id/next_10_results"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.5"
            android:text="@string/next_10_results" />
    </LinearLayout>

    </ScrollView>

    </LinearLayout> 
```

PeopleSearchAdapter.java（这是我从 xml 文件中获取内容后显示内容的地方）

```
 public PeopleListView (Context context, String itemName, String itemLocation, String image_url, String kudoRank)
        {
            super (context);
            setOrientation(LinearLayout.VERTICAL);

            LinearLayout.LayoutParams params = new  LinearLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT,
                    ViewGroup.LayoutParams.WRAP_CONTENT);
            params.setMargins(5, 3, 5, 0);

            image = new ImageView (context);
            Log.v("Image URL: ", image_url);
            if(image_url != null && !(image_url.equals("")))
            {
                try
                {
                    URL url = new URL (image_url);
                    URLConnection conn = url.openConnection();
                    conn.connect();
                    BufferedInputStream bis = new BufferedInputStream(conn.getInputStream());
                    Bitmap bm = BitmapFactory.decodeStream (bis);
                    bis.close ();
                    image.setImageBitmap(bm);
                }
                catch (IOException e)
                {
                    e.printStackTrace();
                }
            }

            else
            {
                image.setImageResource(R.drawable.no_image);
            }
            addView (image, params);

            name = new TextView (context);
            name.setText(itemName);
            name.setTextSize(16f);
            name.setTextColor(Color.BLACK);
            addView(name, params);

            kudo_rank = new TextView (context);
            kudo_rank.setText(kudoRank);
            kudo_rank.setTextSize(16f);
            kudo_rank.setTextColor(Color.BLACK);
            addView(kudo_rank, params);

            location = new TextView (context);
            location.setText(itemLocation);
            location.setTextSize(16f);
            location.setTextColor(Color.BLACK);
            addView(location, params);

        }

I've attached a screenshot of how the results are being displayed now and just want the three text fields that are displayed below the image right now to be displayed to its right instead. 
```

![搜索结果视图](../Images/6f2b457bbd7ea172b19d659502f49ac5.png)

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:21:25.163

最简单的方法是在`ListView`xml 中定义布局。这是我用的。我对应用程序做了类似的事情，希望对您有所帮助：

这是显示列表视图的位置：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/view" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:background="@drawable/logo"
        android:orientation="vertical" >
    </LinearLayout>

    <com.google.ads.AdView
            android:id="@+id/adView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            ads:adSize="BANNER"
            ads:adUnitId="a15009789e230a7" />
    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/linearLayout1"
        android:layout_above="@+id/adView"
        android:layout_centerHorizontal="true"
        android:background="@drawable/background"
        android:cacheColorHint="#00000000" >
    </ListView>

</RelativeLayout> 
```

这是`ListView`定义的地方，其布局类似于您想要的：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:padding="10dp" >

    <ImageView
        android:id="@+id/imgThumb"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_alignParentBottom="true"
        android:layout_alignParentTop="true"
        android:layout_marginBottom="5dp"
        android:layout_marginRight="15dp"
        android:layout_marginTop="5dp"
        android:background="@drawable/diningbutton"
        android:gravity="center_vertical" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@+id/imgThumb"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/diningTitle"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_alignParentBottom="true"
            android:layout_alignParentTop="true"
            android:gravity="top"
            android:paddingTop="5dp"
            android:textColor="#000000"
            android:textSize="16dp"
            android:textStyle="normal" />

        <TextView
            android:id="@+id/listSubHeader"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="bottom"
            android:paddingBottom="5dp"
            android:paddingTop="5dp"
            android:textColor="#000000"
            android:textSize="14dp"
            android:textStyle="italic" />
    </LinearLayout>

</RelativeLayout> 
```

这是适配器：

```
 @Override
protected void onCreate(Bundle savedInstanceState)
{

    super.onCreate(savedInstanceState);
    this.setContentView(R.layout.dining);

    // Create ListData object to hold list data
    ListData newListItem = new ListData();

    try
    {
        // parse data and populate the list view
        this.itemObject = newListItem.getData(DATAURL);
        Log.e(TAG, "item object: " + this.itemObject.toString());
        ListAdapter adapter = new ListAdapter(this, R.layout.dininglistview, this.itemObject);
        // Create listview
        this.listView1 = (ListView) this.findViewById(android.R.id.list);
        this.listView1.setAdapter(adapter);
        GetImagesTask imgTask = new GetImagesTask();
        imgTask.execute(this.itemObject);

        AdView adView = (AdView)this.findViewById(R.id.adView);
        AdRequest re = new AdRequest();
        adView.loadAd(re);

    }
    catch (InterruptedException e)
    {

        Log.e(TAG, "Unexpected error", e);
    }
    catch (ServiceException e)
    {
        AlertDialog alertDialog = new AlertDialog.Builder(DiningActivity.this).create();
        alertDialog.setTitle("Temporarily unavailable");
        alertDialog.setMessage("Please contact top25@uievolution.com");
        alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
            // if there is an error, send the user to the home page
            @Override
            public void onClick(DialogInterface dialog, int which)
            {
                Intent homeIntent = new Intent(DiningActivity.this, HomeActivity.class);
                DiningActivity.this.startActivity(homeIntent);

            }
        });
        alertDialog.show();
    }
    // implement dining adapter

} 
```

我希望这有帮助！祝你好运！

# android - 我如何在不同屏幕的android中安排小部件？

> ID：11678095
> 
> 赞同：0
> 
> 时间：2012-07-26T21:09:47.820
> 
> 标签：android, android-layout, android-widget

我想以这种方式用按钮填充布局：

![在此处输入图像描述](../Images/3ebd517b8968762cf919172ef0554062.png)

我尝试了表格布局，但我无法在按钮之间获得正确的空间，当我尝试不同的屏幕尺寸时，一切都搞砸了（即使我使用了 android:layout_weight）所以现在我正在使用相对布局，但是当屏幕改变时我无法让按钮采用正确的尺寸，我已经阅读了有关处理不同屏幕尺寸的提示，所以我正在使用 dp 和 wrap_content，但没有任何效果，这是我的代码：

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_alignParentRight="true"

        android:layout_marginLeft="24dp"
        android:layout_marginTop="31dp"
        android:layout_marginRight="150dp"

        android:background="@layout/press"
        android:drawableTop="@drawable/reading"
        android:text="@string/option" />

    <Button
        android:id="@+id/Button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/button1"
        android:layout_alignBottom="@+id/button1"
        android:layout_alignParentRight="true"
        android:layout_marginRight="28dp"

        android:layout_alignParentLeft="true"
        android:layout_marginLeft="150dp"

        android:background="@layout/press"
        android:drawableTop="@drawable/reading"
        android:text="@string/option" />
</RelativeLayout> 
```

我想设置第一行按钮，但是 Button2 没有按应有的大小调整大小，我做错了什么？或者我怎么能做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:21:40.107

尝试这个。

```
<LinearLayout
android:orientation = "vertical">

<LinearLayout
android:orientation = "horizontal"/>

2 Buttons here.
</LinearLayout>
</LinearLayout> 
```

不要忘记包括线性布局的高度和宽度。希望这可以帮助。

# php - 相关对象上的 object->delete() 不会立即持续存在

> ID：11678103
> 
> 赞同：0
> 
> 时间：2012-07-26T21:10:11.070
> 
> 标签：php, doctrine, symfony-1.4

我建立了一个（程序）对多（工具）的关系。有时我想删除与过程相关的所有工具：

```
class Procedure extends BaseProcedure
{
  ...

  function deleteTools()
  {
    $aProcedure = $this;
    $someCondition = true;

    foreach( $aProcedure->getTools() as $tool )
    {
      if($someCondition) {
        $tool->delete();
      }
    }

    $aProcedure->save();  // Right Here!
  }
}

class ProcedureActions extends sfActions
{
  ...

  public function executeTest(sfWebRequest $request)
  {
    $this->procedure = $this->getRoute()->getObject();
    $this->procedure->deleteTools();
    $this->action = "show";
    $this->setTemplate("show", "procedure");
  }

} 
```

在这一行，我收到以下错误消息：

> “SQLSTATE [23000]：违反完整性约束：1048 列 'procedure_id' 不能为空”。挖掘了一下，我看到这个 sql 语句正在准备中。
> 
> 执行：INSERT INTO procedure_tools (id, procedure_id, tool_id, status_id, itemcount, comment) VALUES (?, ?, ?, ?, ?, ?) - (, , , , , )

在我看来，相关程序还不知道删除。我不知道如何解决这个问题。删除工作*正常*。第二次刷新，一切正常。任何帮助表示赞赏，谢谢。

**(1)**编辑以澄清更准确地代表我的场景。很抱歉一开始没有这样做。

**(2)**编辑以显示整个函数的上下文。那里会有更多的逻辑（特别是评估 $someCondition，但目前这总是评估为真）。还会显示启动动作的内容，以防我以错误的方式召唤对象。

**(3)**编辑添加，来自 showSuccess 模板的代码。

```
<?php foreach($procedure->getTools() as $tool): ?>
<tr>
  <td><?php echo $tool->getId() ?></td>
  <td><?php echo $tool->getStatus() ?></td>
  <td><?php echo $tool->getName() ?></td>
</tr>
<?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:26:23.777

`foreach`循环不是必需的，并且可能是您遇到麻烦的原因。

```
$aProcedure->Tools->delete(); 
```

完毕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T07:50:07.323

为什么不执行所有删除之后？这样，您只需执行一个查询即可删除许多工具。

```
$toolsToDelete = array();
foreach( $aProcedure->getTools() as $tool )
{
  if($someCondition) {
    $toolToDelete[] = $tool->getId();
  }
}

$aProcedure->save();  // Right Here!

Doctrine_Query::create()
  ->delete('Tools t')
  ->whereIn('t.id', $toolsToDelete)
  ->execute(); 
```

**编辑：**

在您的模板中发生的事情是 Doctrine 已经获取了关系`Tools`，所以它以某种方式*被缓存*了。这就是为什么在您的模板中，您仍然删除了工具并且在页面重新加载时没有它们。

我不记得过去我是如何做到这一点的，但是您可以尝试[`refresh`](https://github.com/doctrine/doctrine1/blob/master/lib/Doctrine/Record.php#L956)对象及其关系。所以而不是：

```
$aProcedure->save();  // Right Here! 
```

尝试：

```
$aProcedure->refresh(true); 
```

ps：我假设您`$aProcedure`在`deleteTools()`函数中没有执行任何其他操作。否则，您不应删除`save()`.

# qt - 生成的 moc 名称不正确

> ID：11678106
> 
> 赞同：3
> 
> 时间：2012-07-26T21:10:17.993
> 
> 标签：qt, qt4, cmake, qobject, metaobject

我正在开发一个使用 cmake 的基于 Qt 的项目。我生成的所有 moc 文件都已命名`*.moc`，但我有一些文件，它们生成的 moc 文件具有名称`moc_*.cpp`，而不是`*.moc`. 为什么会发生这种情况以及如何修复这些文件。

**编辑：**

*   我想说这些类继承自 QObject 并具有 Q_OBJECT 和 Q_DECLARE_PUBLIC 宏，除非它们有 .moc，否则它们不会与我一起编译。

*   我必须在我的 .cpp 文件中包含 .moc 文件。

**- 让我发疯的事情是我有一个相同的类（与我的类相同的实现）生成一个 .moc 但我的类生成 moc_*.cpp。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T11:36:39.117

您不必在每次使用 Q_OBJECT 时都包含 *.moc 文件。.moc 文件仅为在 .cpp 文件中声明的类生成。在其他情况下， moc 会生成 moc_*.cpp ，其中包含您自己的基于 Q_OBJECT 的类。你没有什么可担心的。从您的 cpp 文件中删除 *.moc 包含。例如：

主文件

```
class E: public QObject
{
    Q_OBJECT
}; 
```

moc 将生成 main.moc 文件以包含在 main.cpp 中

另一个例子

类.h

```
class E: public QObject
{
     Q_OBJECT
public:
     void member();
}; 
```

类.cpp

```
#include "class.h"

void E::member()
{
} 
```

moc 将生成 moc_class.cpp 包含 class.h 并且是单独的编译单元

# search - 索引搜索在另一个页面中显示结果

> ID：11678107
> 
> 赞同：0
> 
> 时间：2012-07-26T21:10:26.133
> 
> 标签：search, typo3

我想在标题顶部有一个搜索框，但是当我提交关键字时，我不希望结果出现在标题上，而是出现在正文上。

为此，我认为 id 在页眉中有一个插件，在一个特殊的“搜索”页面的正文中有另一个插件，当用户使用此页面时，我可以在页眉中隐藏 from。但我不知道该怎么做，以便在搜索完成后跳转到另一个页面。（有点像 tt_news 有一个从 LIST 到 SINGLE 的 pid）

我该怎么做才能做到这一点？或者也许有更简单的方法来实现我想要的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T22:30:46.793

On common pages you need to construct "pure html" in the header part with the search form where its action is link to the another page - displaying search results. It uses `typolink` for generating proper form's action.

On the page with search results you don't need to hide the search form, instead you can use TypoScript to fill the search field with value entered on the common page.

There is `ready-to-use` sample of TypoScript for such scenario placed in `Introduction Package`, I don't use it so sorry, but I won't paste it here. Anyway you can install it locally and dig for nice snippets and techniques.

# html - 徽标不在 Firefox 中居中，但在 Chrome 中居中

> ID：11678108
> 
> 赞同：3
> 
> 时间：2012-07-26T21:10:49.013
> 
> 标签：html, css, firefox, stylesheet

这是我的网站：[**LINK**](http://tubebackgrounds.co.uk/portfolio/)

如您所见，我的徽标在 Firefox 中被推到***右侧***，但应该居中。例如，在 Chrome 中效果很好。

我尝试寻找仅 Firefox 的样式表，但我真的找不到正确的 CSS 设置来使其正常工作。

**这是包含在我到目前为止的`id`命名中的相关 HTML 代码：`container`**

```
<div id="nav">
  <ul id="index_cards">
    <li id="card-1">
        <h3><strong>Home</strong></h3>
    </li>
    <li id="card-2">
        <h3><strong>About/Contact</strong></h3>
    </li>
    <li id="card-4">
        <h3><strong>Portfolio</strong></h3>
    </li>
    <li id="card-5">
        <h3><strong>Services</strong></h3>
    </li>
  </ul>
</div>

<div id="header">
  <div id="logo">
    <img src="imgs/logo.png" name="ielogo" width="457" height="223" id="ielogo" />
  </div>
</div> 
```

**CSS：**

```
#container {
  top:-73px;
  margin-top:-70px;
  min-height:100%;
  position:relative;
  display:block;
}

#header {
  margin-top:-30px;
  height:250px;
  background-image:url(../imgs/header-top.png);
  background-repeat:repeat-x;
  padding:10px;
}

#logo {
  margin:0 auto;
  width:457px;
  height:223px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T21:23:19.153

问题在于图像把它放在css中

```
#logo img { display: block; } 
```

[http://jsbin.com/afuquq/3/](http://jsbin.com/afuquq/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T21:47:46.730

**修改后的答案：**解决方法是将并入`logo`到`navigation`网页***上***`#header`放置`position:absolute;`。

**HTML 片段：**

```
<div id="header"></div>

     <div id="container">

       <div id="nav">

          <ul id="index_cards">
             <li id="card-1">
                 <h3><strong>Home</strong></h3>

             </li>
             <li id="card-2">
                 <h3><strong>About/Contact</strong></h3>

             </li>
             <li id="card-4">
                 <h3><strong>Portfolio</strong></h3>

             </li>
             <li id="card-5">
                 <h3><strong>Services</strong></h3>

             </li>
          </ul>

          <div id="logo"></div>

       </div>

     <!-- continued-->

     </div> 
```

**CSS：**

```
/* This section is modified */
#header {
    background-image:url(http://tubebackgrounds.co.uk/portfolio/imgs/header-top.png);
    background-repeat:repeat-x;
    position: absolute;
    width: 100%;
    height: 250px;
    margin-top: 40px;
}

/* This section is modified. */
#logo {
    background-image:url(http://tubebackgrounds.co.uk/portfolio/imgs/logo.png);
    background-repeat:no-repeat;
    margin:0 auto;
    width:457px;
    height:250px;
} 
```

还额外添加了`margin-top: -20px;`应用于 CSS 选择器`#body`以补偿`@font-face`未加载这些字体时的单独问题。尽管如此，仍需要正确解决字体集成问题。

**注意：**`@font-face`由于安全设置，下面的 jsFiddle 不会渲染字体。

参考：[**jsFiddle**](http://jsfiddle.net/9VjBW/show/)

***在地址栏中访问上述 jsFiddle`/show/`以查看编辑页面。***

# asp.net - 为 List<> 创建自定义 gridview 模板字段

> ID：11678110
> 
> 赞同：0
> 
> 时间：2012-07-26T21:11:04.300
> 
> 标签：asp.net, list, gridview

我有一个字符串列表列表。我想使用 gridview 向用户展示它。由于不知道列数，我决定动态创建 gridview 字段。我找到了一些[教程](http://www.codeproject.com/Articles/13462/How-to-create-template-columns-dynamically-in-a-gr)，但它们都使用 DataTable 。我尝试使用相同的方法，但数据绑定事件的“_columnName”有问题：

```
 void field_DataBinding(object sender, EventArgs e)
    {

        TextBox txtdata = (TextBox)sender;

        GridViewRow container = (GridViewRow)txtdata.NamingContainer;

        object dataValue = DataBinder.Eval(container.DataItem, _columnName);

        if (dataValue != DBNull.Value)
        {
            txtdata.Text = dataValue.ToString();
        }

    } 
```

因为 list 中没有列。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:31:29.113

一个更简单的方法是设置`AutoGenerateColumns`为 true 并使用 a`DataTable`作为数据源。

例如（ aspx 可以是一个空的 GridView ）：

```
List<List<String>> data = new List<List<String>>() { 
    new List<String>(){"Row1_Col1", "Row1_Col2",  "Row1_Col3"},
    new List<String>(){"Row2_Col1", "Row2_Col2",  "Row2_Col3"},
    new List<String>(){"Row3_Col1", "Row3_Col2",  "Row3_Col3"},
    new List<String>(){"Row4_Col1", "Row4_Col2",  "Row4_Col3"},
    new List<String>(){"Row5_Col1", "Row5_Col2",  "Row5_Col3"},
};
var tbl = new DataTable();
int maxFieldCount = data.Max(l => l.Count);
for (int i = 1; i <= maxFieldCount; i++)
    tbl.Columns.Add("Column" + i);
foreach (var list in data)
{
    DataRow newRow = tbl.Rows.Add();
    newRow.ItemArray = list.ToArray();
} 
```

现在它可以用作以下的数据源`GridView`：

```
GridView1.DataSource = tbl;
GridView1.DataBind(); 
```

# python - numpy中二进制矩阵的有效操作

> ID：11678113
> 
> 赞同：4
> 
> 时间：2012-07-26T21:11:11.767
> 
> 标签：python, matrix, numpy

通过二进制矩阵，我的意思是矩阵中的每个元素都是 0 或 1，`Matrix`为此我使用 numpy 中的类。

首先，在 numpy 中是否存在特定类型的矩阵，或者我们只是使用填充了 0 和 1 的矩阵？

其次，考虑到类的维数，创建一个**全为 0 的方阵的***最快*方法是什么？注意：不是我想要的，因为它创建了一个带有浮点数的二维数组**`Matrix``numpy.zeros((dim, dim))``0.`**

 **第三，我想经常获取和设置矩阵的任何给定行。对于 get，我可以考虑使用`row = my_matrix.A[row_index].tolist()`，它将返回给定行的列表表示。对于集合，我似乎可以做一个`my_matrix[row_index] = row_list`与`row_list`给定行长度相同的列表。同样，我想知道它们是否是最有效的工作方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T21:36:29.123

要创建一个元素可以是 0 或 1 的 numpy 数组，请使用以下`dtype = 'bool'`参数：

```
arr = np.zeros((dim,dim), dtype = 'bool') 
```

或者，要转换`arr`为 numpy 矩阵：

```
arr = np.matrix(arr) 
```

要访问一行：

```
arr[row_num] 
```

并设置一行：

```
arr[row_num] = new_row 
```

是最快的方法。**

# javascript - HTML\Javascript - 获取 ATL\CTRL\SHIFT 按键

> ID：11678114
> 
> 赞同：3
> 
> 时间：2012-07-26T21:11:18.087
> 
> 标签：javascript

是否有能力捕捉任何按键？即`Ctrl`+ `Shift`+`Alt`按键（没有其他按键）。

在下面的代码片段中（在 Chrome 下检查），我只能在按下其他“常规”键时捕获转变。

**更新**：

```
<html>
<head>
    <script>
        function onKeyPressed(event) {
            event = event || window.event;
            var code = event.keyCode;
            var key = String.fromCharCode(event.keyCode);
            var shift = event.shiftKey;
            var alt = event.altKey;
            var ctrl = event.ctrlKey;
            var which = event.which;
            var str = "code = " + code + "\n" +
                      "key = " + key + "\n" +
                      "shift = " + shift + "\n" +
                      "alt = " + alt + "\n" +
                      "ctrl = " + ctrl + "\n" +
                      "which = " + which;
            alert(str);
        };

        function onClick(event) {
            event = event || window.event;
            var x = event.clientX;
            var y = event.clientY;
            var str = "x = " + x + "\n" +
                      "y = " + y;
            alert(str);
        };

        function onKeyUp(event) {
            alert("onKeyUp");
        };

        function onKeyDown(event) {
            alert("onKeyDown");
        }
    </script>
</head>
<body onmousedown="onClick(event)" onkeypress="onKeyPressed(event)" onkeyup="onKeyUp(event)" onkeydown="onKeyDown(event)"></body>
</html> 
```

如何捕获这些密钥？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T21:22:13.147

有一个非常好的新 JS 库，它可以很好地跟踪浏览器中的键盘事件。

它叫捕鼠器。这是链接：[http ://craig.is/killing/mice](http://craig.is/killing/mice)

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T21:13:23.660

允许使用 jQuery 吗？如果是这样，看看这个：

[http://www.stepanreznikov.com/js-shortcuts/](http://www.stepanreznikov.com/js-shortcuts/)

否则你可以给@Max Gherkins 的建议一个机会

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T21:19:08.687

AFAIK 您必须使用 keyup 或 keydown 事件来捕获移位，keyPress 不会捕获它。如果您需要更多详细信息，请查看每个事件捕获的密钥[列表](http://unixpapa.com/js/key.html)。由于 shift 是修饰键，因此不会被捕获。为什么会这样，我无法解释。

# session-state - 具有单个 Web 服务器的 InProc 与 AppFabric 会话状态

> ID：11678131
> 
> 赞同：9
> 
> 时间：2012-07-26T21:12:25.340
> 
> 标签：session-state, appfabric, inproc, appfabric-cache

我有一个 ASP.Net MVC 应用程序，它大量使用会话来保存状态（包括大型数据集合）。目前，它托管在单个 Web 服务器上。会话设置为默认的 InProc。

出现一个问题，即当许多用户在线时，某些用户的应用程序冻结。我猜这是因为 InProc 会话不能很好地扩展，并且进程可用的内存只有这么多。（如果内存需求超过可用内存会发生什么——它会换出到磁盘吗？）

我想到了几个有助于可扩展性的解决方案。(a) Sql server 会话状态；(b) 配置会话状态以使用 AppFabric 缓存。第一个选项看起来是一个不错的解决方案，只是它会影响性能并要求存储的项目是可序列化的。

在单个 Web 服务器也用作缓存主机的环境中配置会话状态以使用 AppFabric 缓存（又名 Velocity）怎么样？这与单服务器环境中的 InProc 有何不同？这会比 InProc 提供更多的可扩展性和可用内存，还是本质上会受到相同的限制？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T19:22:49.680

您最好为您的方案实施**AppFabric 缓存**。随着系统的增长，您可以为每个新的 Web 节点增加缓存服务器的数量——如果不增加成本，使用 SQL Server 就无法轻松做到这一点。SQL Server 许可的成本也远高于 AppFabric - 它与 Windows Server 许可捆绑在一起。

SQL Server 将提供的唯一好处是可恢复性，但对于您的需要，它可能是矫枉过正。

请参阅[有关会话的讨论 AppFabric 缓存与 SQL Server 的相关 SO 帖子](https://stackoverflow.com/a/10387402/175679)。

* * *

### 至于 AppFabric Cache 与 InProc ......

如果遇到内存限制，可以将**AppFabric 缓存**放在另一台服务器上。你不能用**InProc**做到这一点。

以下是 AppFabric 缓存的其他一些其他好处：

1.  支持[**本地缓存**](http://msdn.microsoft.com/en-us/library/ee790983%28v=azure.10%29.aspx)以加快序列化/反序列化所涉及的检索成本。
2.  [提供关于缓存驱逐和过期策略](http://msdn.microsoft.com/en-us/library/ee790981%28v=azure.10%29.aspx)的更细粒度的控制。
3.  支持[会话内容的压缩以减少网络带宽](http://msdn.microsoft.com/en-us/library/hh351483.aspx)。
4.  [Blob 模式与单项检索相比](http://msdn.microsoft.com/en-us/library/hh361709.aspx)，可改进大型对象的数据检索。
5.  [可以跨多个应用程序使用相同的会话状态存储](http://msdn.microsoft.com/en-us/library/ee790859%28v=azure.10%29.aspx)（*通过 sharedId*）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T10:36:25.110

最重要的是会话将在应用程序池回收甚至重新部署应用程序后继续存在。

AppFabric 还可以序列化`IXmlSerializable`对象以及`[Serializable]`. 如果您尝试使用进程外 ASP.NET 会话服务，讽刺的是您无法序列化`IXmlSerializable`对象，例如`XElement`. 如果需要，您还可以进行完全自定义的序列化。使用 AppFabric，如果您以这种方式移动，您的应用程序将更加“天蓝色”。

当然，如果您有需要，您可以使用它来缓存其他数据。

# php - 使用关联和烘焙蛋糕时如何显示除 id 以外的其他字段

> ID：11678140
> 
> 赞同：0
> 
> 时间：2012-07-26T21:13:14.510
> 
> 标签：php, cakephp, orm, cakephp-model

我在 CakePHP 中使用[关联将模型链接](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)在一起。

我有一个使用关系`Player`链接到模型的模型。所以基本上一个球员可以有很多统计数据。`Statistic``$hasMany`

在我建立了这些关系之后，我`cake bake`会为`Player`和`Statistic`模型生成控制器和视图。

一切正常并且按预期工作，但是当我使用添加模板添加统计信息时，它`player_id`被用作关联。

我的问题是如何设置模型以将其`player_id`用作关联，但使用玩家的名字和姓氏之类的东西作为添加模板中的下拉菜单。

目前，如果我要添加一个新的统计信息，我会得到一个名为“Player”的下拉框，其中列出了所有玩家 ID，但我想要的是玩家的名字和姓氏在该下拉框中而不是 ID . 我意识到我可以修改控制器或模板来完成此操作，但我想知道我是否可以在设置模型时执行此操作以便`cake bake`处理它。

播放器型号：

```
<?php
class Player extends AppModel {
    public $name = 'Player';
    public $belongsTo = array(
        'School' => array(
            'className'    => 'School',
            'foreignKey'   => 'school_id'
        )
    );
    public $hasMany = 'Statistic';
} 
```

统计模型：

```
<?php
class Statistic extends AppModel {
    public $name = 'Statistic';
    public $belongsTo = array(
        'Player' => array(
            'className'    => 'Player',
            'foreignKey'   => 'player_id'
        )
    );
} 
```

球员表

```
`id|school_id|first_name|last_name|number|position 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T21:38:56.990

在为列表选择默认列时，Cake 使用模型的[displayField属性。](http://book.cakephp.org/2.0/en/models/model-attributes.html#displayfield)如果没有为模型定义，它将查找`name`or `title`。因此，在您的模型中，您可以使用：

```
public $displayField = 'first_name'; 
```

这将在列表中显示玩家的名字。

如果您希望显示字段是两个字段的串联，则可以在模型中使用[虚拟字段](http://book.cakephp.org/2.0/en/models/virtual-fields.html)，如下所示：

```
public $virtualFields = array(
    'name' => "TRIM(CONCAT(Player.first_name, ' ', Player.last_name))"
); 
```

请注意以上适用于 Mysql。对于另一种数据库，您需要调整语法。例如，对于 Sqlite，它将是：

```
 TRIM(Player.first_name || ' ' || Player.last_name) 
```

然后添加您的模型：

```
public $displayField = 'name'; 
```

# scala - scala -i 选项在 v2.9.0 中有效，但在 v2.9.2 中无效

> ID：11678144
> 
> 赞同：3
> 
> 时间：2012-07-26T21:13:39.987
> 
> 标签：scala

v2.9.2 只是挂起。这是我要提供的文件`-i`：

```
println("I work") 
```

这是输出。首先从 v2.9.0 开始：

```
$ ~/opt/scala-2.9.0.final/bin/scala -i /tmp/t.scala
Loading /tmp/t.scala...
I work

Welcome to Scala version 2.9.0.final (OpenJDK 64-Bit Server VM, Java 1.7.0_03).
Type in expressions to have them evaluated.
Type :help for more information.

scala> :q
$ 
```

接下来，从 v2.9.2 开始：

```
$ ~/opt/scala-2.9.2/bin/scala -i /tmp/t.scala
Loading /tmp/t.scala...
^c
$ 
```

（我必须 Ctrl-c 它，因为它只是挂在那里。）

难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T16:05:48.997

是的，我有同样的问题。这是一个错误： [https](https://issues.scala-lang.org/browse/SI-4945) ://issues.scala-lang.org/browse/SI-4945 。希望2.10能解决

# apache - 我在 IE 中查询 Solr 时出现“通信错误”？

> ID：11678146
> 
> 赞同：1
> 
> 时间：2012-07-26T21:13:40.477
> 
> 标签：apache, internet-explorer, solr

当我尝试 ping Solr 时，我只在 IE 中失败。

```
if (!$solr->ping()) {
    echo 'service not available';
} 
```

`var_dump`在 IE 和其他浏览器中使用时，连接是相同的。它在标准 Solr 端口 localhost 上运行，并且路径正确。不确定不同的浏览器将如何影响与 Solr 的连接。

Solr 规范版本：1.4.1.2011.09.12.09.25.21

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:23:30.643

奇怪的是，似乎`allow_url_fopen`未启用是此问题的根本原因。看似无关，所以我认为问题出在使用的 WordPress 插件上。我不得不猜测一些奇怪的实现会导致这个失败，并且只在 IE 中引起问题。

可能对我的情况太具体了，无法帮助别人，但我想我会分享。

# c - c中的未知类型名称

> ID：11678147
> 
> 赞同：-1
> 
> 时间：2012-07-26T21:13:48.533
> 
> 标签：c

我的record.h文件

```
#ifndef _RECORD_H
#define _RECORD_H

void run_status_window(Recording *recording);
void stop_rec_button_clicked_cb(GtkButton *button, gpointer data);
GtkWidget* status_window(Recording *recording); 

#endif 
```

我的 .c 文件

```
#include "config.h
#include <string.h>
#include <fcntl.h>
#include <stdlib.h>
#include <gtk/gtk.h>

#include "record.h"

extern GtkWidget* mute_button;
extern GtkWidget *app;
... 
```

当我尝试编译得到这个错误：

```
error: unknown type name 'Recording' 
```

我应该怎么办 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:38:55.693

您需要包含`Recording`定义的头文件。没有头文件，编译器不知道是什么`Recording`，所以它会给你一个错误。

此外，您不应将宏`_RECORD_H`用于标头的包含保护。以下划线和大写字母开头的名称（以及以两个下划线开头的名称）由编译器保留。相反，使用类似的东西`RECORD_H`or `RECORD_H_INCLUDED`。

# python - 使用带有 DELETE 和 INSERT 的 FOR 循环填充 Numpy 数组

> ID：11678148
> 
> 赞同：0
> 
> 时间：2012-07-26T21:13:55.137
> 
> 标签：python, numpy, insert

到目前为止，我一直在犯的所有“错误”都是我遗漏的小事，希望这里就是这种情况。我决定主要使用 NUMPY 数组来调整数组大小。我注意到导入需要一段时间，但它本质上是在做我需要的事情，所以乞丐不能成为选择者。无论如何，在尝试从数组中“删除”项目并通过“插入”用新数据替换它们时，我仍然有一个包含全零的数组。所以，我很茫然。我知道 [archstartred]、[archstartgrn] 和 [archstartblu] 的值是正确的，因为我会在它们生成时打印它们。为什么值没有填充到数组中？这是我的代码：

```
#Frame Creation

from numpy import *
frames=array([0 for i in range (0,workingframes*archnodes*3)])
frames.resize(archnodes*3, workingframes)

#Frame Population

for f in range (0, workingframes):

    if f<=(workingframes/2):

        for x in range (0, archnodes):
            delete(frames,[x+f])
            insert(frames,[x+f],(archstartred[x]))
            print archstartred[x]
            delete(frames,[x+f+workingframes])
            insert(frames,[x+f+workingframes],(archstartgrn[x]))
            print archstartgrn[x]
            delete(frames,[x+f+workingframes*2])
            insert(frames,[x+f+workingframes*2],(archstartblu[x]))
            print archstartblu[x]

        print frames
        raw_input('Press control c')  #stop/troubleshoot program

        for y in range (0, nodesperframe):
            archstartred.pop()
            archstartgrn.pop()
            archstartblu.pop()
            archstartred.insert(0, backred)
            archstartgrn.insert(0, backgrn)
            archstartblu.insert(0, backblu)

        archstartred = [int(value) for value in archstartred]
        archstartgrn = [int(value) for value in archstartgrn]
        archstartblu = [int(value) for value in archstartblu]

    else:
        for y in range (0, nodesperframe):
            archstartred.pop(0)
            archstartgrn.pop(0)
            archstartblu.pop(0)
            archstartred.append(backred)
            archstartgrn.append(backgrn)
            archstartblu.append(backblu)

        archstartred = [int(value) for value in archstartred]
        archstartgrn = [int(value) for value in archstartgrn]
        archstartblu = [int(value) for value in archstartblu]

        for x in range (0, archnodes):
            delete(frames,[x+f])
            insert(frames,[x+f],(archstartred[x]))
            delete(frames,[x+f+workingframes])
            insert(frames,[x+f+workingframes],(archstartgrn[x]))
            delete(frames,[x+f+workingframes*2])
            insert(frames,[x+f+workingframes*2],(archstartblu[x])) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T21:23:31.463

numpy 函数`insert`并`delete`返回一个副本而不是就地发生。将结果分配回`frames`而不是丢弃它。

# networking - 将 DHCP 服务器的 MAC 提供给 DHCP 客户端

> ID：11678149
> 
> 赞同：0
> 
> 时间：2012-07-26T21:14:09.323
> 
> 标签：networking, embedded-linux, dhcp

**背景资料：**

我有一组专有的嵌入式 Linux 网络设备，其中一个将配置为 DHCP 服务器，其余的将是 DHCP 客户端。

我需要让客户端设备只接受来自服务器设备的 DHCP 租约，而忽略同一 LAN 上其他 DHCP 服务器提供的任何其他租约。同样，我需要使服务器设备仅向这组客户端提供 DHCP 请求，而忽略可能出现在未知网络环境中的任何其他 DHCP 请求。本质上，我需要能够在可能已经有 DHCP 服务器的网络环境中为我自己的设备提供 DHCP 服务。

我所有的设备都具有相同的 MAC 地址的前半部分，我打算将其用作过滤器。

我正在使用 BusyBox 中包含的 udhcpc 和 udhcpd，并且由于存储可用性有限，我试图避免将任何其他 DHCP 客户端/服务器包添加到我的设备，但我愿意修改 BusyBox 代码。

通过向 udhcpd.conf 添加一个选项，我可以轻松实现 DHCP 服务器限制，我称之为`chaddr_filter`，其中包含服务器应检查“客户端硬件地址 (chaddr)”的通配符 MAC 地址。这似乎工作得很好，服务器在为我自己的设备提供服务时忽略了来自其他设备的任何 DHCP 请求。

由于 DHCP 数据包中缺少“服务器硬件地址”字段，客户端过滤成为更大的挑战。

**所以这是我的问题：**

*将服务器的 MAC 传递给 udhcpc 客户端的最佳方式是什么？*

目前看起来没有从 DHCP 服务器传递的包含服务器 MAC 的字段或选项（看起来我无法从以太网层读取它）。我想保持符合标准，因此我正在研究可能用于此目的的潜在 DHCP 选项。

我希望我可以使用“选项 54：服务器标识符”，但 RFC 将其定义为 IP 地址。

我正在考虑将服务器的 MAC 放在“选项 60：类标识符”或“选项 43：供应商特定信息”中，有什么理由不应该这样做吗？有没有更好的领域呢？

我期待任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:42:52.053

取自[维基百科](http://en.wikipedia.org/wiki/Dynamic_Host_Configuration_Protocol)

> DHCP 使用 IANA 为 BOOTP 分配的两个相同端口：目标 UDP 端口 67 用于向服务器发送数据，UDP 端口 68 用于向客户端发送数据。DHCP 通信本质上是无连接的。

因此，您可以在客户端过滤端口 68/udp 上的传入数据包，仅接受来自前半部分良好的 mac 地址的数据包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-30T18:03:14.040

仅供参考，我能够通过使用`brctl`和`ebtables`实用程序过滤客户端上感兴趣的数据包来达到预期的效果。

# sql - 在分隔符内查找重复值

> ID：11678154
> 
> 赞同：3
> 
> 时间：2012-07-26T21:14:40.383
> 
> 标签：sql, oracle

太好了，这是我发布的第一个问题，我很快就得到了回复。:-)

让我的查询更清楚。这是表结构：-

```
CREATE TABLE ct_collreview_atg (csku NUMBER, merch_opt NUMBER, ri_seq VARCHAR2(4000));

Insert into CT_COLLREVIEW_ATG Values (100293, 17, ',5,');
Insert into CT_COLLREVIEW_ATG Values (100293, 17, ',10,');
Insert into CT_COLLREVIEW_ATG Values (100293, 17, ',70,');
Insert into CT_COLLREVIEW_ATG Values (100293, 17, ',30,60,');
Insert into CT_COLLREVIEW_ATG Values (100293, 17, ',30,80,');
Insert into CT_COLLREVIEW_ATG Values (100293, 17, ',30,50,');
Insert into CT_COLLREVIEW_ATG Values (100293, 17, ',20,50,');
Insert into CT_COLLREVIEW_ATG Values (100293, 17, ',40,');
Insert into CT_COLLREVIEW_ATG Values (100293, 17, ',110,');
Insert into CT_COLLREVIEW_ATG Values (100293, 17, ',90,');
Insert into CT_COLLREVIEW_ATG Values (100293, 17, ',100,');
COMMIT; 
```

现在，如果我执行“从 ct_collreview_atg 中选择 *；”

我得到了这个数据集：-

```
CSKU  |MERCH_OPT  |RI_SEQ

100293  |17 |,5,
100293  |17 |,10,
100293  |17 |,70,
100293  |17 |,30,60,
100293  |17 |,30,80,
100293  |17 |,30,50,
100293  |17 |,20,50,
100293  |17 |,40,
100293  |17 |,110,
100293  |17 |,90,
100293  |17 |,100, 
```

如果您看清楚，30 和 50 将在多行中重复。所以我想要的是一个查询，它只会显示我正在重复的数字。在这种情况下，它应该显示 30 和 50，因为其余所有数字都出现一次。

我的 oracle 版本是 (10.2.0.3.0) 谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T04:02:43.927

我很困惑——我在示例中没有看到重复项。

无论如何，一些谷歌搜索建议使用 GROUP BY 和 HAVING 可能是你的票：

```
select csku, merch_opt, ri_seq from ct_collreview_atg
where rec_type = 'PROD'
and row_status = 'A'
and csku = 100293
GROUP BY csku, merch_opt
HAVING ( count(cksu) > 1 ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T18:29:49.110

对于您的具体情况，**[正则表达式](http://docs.oracle.com/cd/B12037_01/appdev.101/b10795/adfns_re.htm)**可能会起作用：

```
 with dups as(
select 
          t.ri_seq
         , regexp_substr (t.ri_seq, '[^,]+', 1, rn) spl
    from CT_COLLREVIEW_ATG t
     cross
     join (select rownum rn
       from (select max (length (regexp_replace (t.ri_seq, '[^,]+'))) + 1 mx
                     from CT_COLLREVIEW_ATG t
                  )
          connect by level <= mx
          )
   where regexp_substr (t.ri_seq, '[^,]+', 1, rn) is not null)
select distinct spl from (
select spl, row_number() over (partition by spl order by 1) dp from dups)
where dp>1 
```

上面的查询首先将逗号分隔的值拆分为行，然后检测这些行中的重复项。在本例中，30&50。

**[这](http://nuijten.blogspot.com/2011/08/splitting-comma-delimited-string-regexp.html)**是原始查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T15:49:55.010

您必须使用列 RI_SEQ 中出现的值创建一个辅助表，例如 TSEQ（如果值是连续的，您可以生成此表）。

例如，

```
Create table TSEQ (SEQ varchar(3));
insert into tseq values ("5");
insert into tseq values ("50"),
...
insert into tseq values ("110"),
etc. 
```

然后，您在包含 SEQ 的 RI_SEQ 上加入 TSEQ 和 CT_COLLREVIEW_ATG 并通过具有这样的 count(*) 来获取使用 group 重复 SEQ 的行组：

```
select seq,count(*) from tseq join CT_COLLREVIEW_ATG t on ri_seq  like '%,'||seq||',%' group by 1 having count(*) >1; 
```

# c++ - 使用 C++ 在运行时生成声音

> ID：11678160
> 
> 赞同：4
> 
> 时间：2012-07-26T21:15:21.997
> 
> 标签：c++, runtime, audio

所以我在长时间的中断后开始使用 C++，我想创建一个程序，它可以在运行时根据数字字符串生成音乐（受到某些人[的 Pi 组合的](http://www.youtube.com/watch?v=YOQb_mtkEEE)启发），最终目标是一些一种程序音乐生成软件。

到目前为止，我已经能够使用 Beep() 函数制作一个非常原始的版本，并且只是通过输入 Pi 的第一个某某数字作为测试。奇迹般有效。

我现在正在寻找的是如何将它提升一个档次并获得更高质量的声音（因为 Beep() 字面上是最原始的声音......曾经），我意识到我完全不知道如何做这个。我需要的是一个库或某种 API，它可以：

1）在没有预先存在的文件的情况下生成声音。我希望结果是 100% 由代码生成的，而不是依赖于任何样本，最好。

2）如果我能做一些能够一次播放多种声音的东西，比如能够演奏和弦或带有节拍的旋律，那就太好了。

3）如果我可以通过方程式或其他某种数据以任何方式控制它播放的波（有点像chiptune混音器可以），那将非常有帮助。

我不知道这是否是一个奇怪的请求，或者我只是使用错误的术语对其进行了研究，但我只是无法找到任何符合这些原则的内容，或者至少没有任何有据可查的内容。：/

如果有人可以提供帮助，我将不胜感激。

编辑：另外，显然我只是超级不习惯在论坛上提问，我的目标平台是 Windows（特别是 7，虽然我认为这并不重要）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T21:24:13.530

我使用 portaudio (http://www.portaudio.com/)。它将让您以便携的方式创建 PCM 流。然后你只需将样本推送到流中，它们就会播放。

@edit：使用 PortAudio 非常简单。您初始化库。我使用浮点样本让它变得超级简单。我这样做：

```
PaError err = Pa_Initialize();
if ( err != paNoError ) 
   return false;

mPaParams.device = Pa_GetDefaultOutputDevice();
if ( mPaParams.device == paNoDevice ) 
   return false;

mPaParams.channelCount = NUM_CHANNELS;
mPaParams.sampleFormat = paFloat32;
mPaParams.suggestedLatency = 
   Pa_GetDeviceInfo( mPaParams.device )->defaultLowOutputLatency;
mPaParams.hostApiSpecificStreamInfo = NULL; 
```

然后稍后当您想要播放声音时，您创建一个流，2 个立体声通道，44khz，适合 mp3 音频：

```
PaError err = Pa_OpenStream( &mPaStream,
                             NULL, // no input
                             &mPaParams,
                             44100, // params
                             NUM_FRAMES, // frames per buffer
                             0,
                             sndCallback,
                             this
                           ); 
```

然后你实现回调来填充 PCM 音频流。回调是 ac 函数，但我只是调用我的 C++ 类来处理音频。我从我的代码中删除了这个，现在它可能不是 100% 正确，因为我删除了很多你不会关心的东西。但它的工作原理是这样的：

```
static int sndCallback( const void*                     inputBuffer, 
                        void*                           outputBuffer,
                        unsigned long                   framesPerBuffer,
                        const PaStreamCallbackTimeInfo* timeInfo,
                        PaStreamCallbackFlags           statusFlags,
                        void*                           userData )
{
  Snd* snd = (Snd*)userData;
  return snd->callback( (float*)outputBuffer, framesPerBuffer );
}

u32 Snd::callback( float* outbuf, u32 nFrames )
{
   mPlayMutex.lock(); // use mutexes because this is asyc code!

   // clear the output buffer
   memset( outbuf, 0, nFrames * NUM_CHANNELS * sizeof( float ));

   // mix all the sounds.
   if ( mChannels.size() ) 
   {   
      // I have multiple audio sources I'm mixing. That's what mChannels is.
      for ( s32 i = mChannels.size(); i > 0; i-- ) 
      {
         for ( u32 j = 0; j < frameCount * NUM_CHANNELS; j++ ) 
         {
             float f = outbuf[j] + getNextSample( i ) // <------------------- your code here!!!
             if ( f >  1.0 ) f = 1.0;     // clamp it so you don't get clipping.
             if ( f < -1.0 ) f = -1.0;
             outbuf[j] = f;
         }
      }
   }
   mPlayMutex.unlock_p();
   return 1; // when you are done playing audio return zero.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:48:34.610

本周早些时候我回答了一个非常相似的问题：[音符合成、谐波（小提琴、钢琴、吉他、贝斯）、频率、MIDI](https://stackoverflow.com/questions/10702942/note-synthesis-harmonics-violin-piano-guitar-bass-frequencies-midi/11615460#11615460)。在您的情况下，如果您不想依赖样本，那么波表方法就不适用了。因此，您最简单的选择是随时间动态改变正弦曲线的频率和幅度，这很简单，但听起来很糟糕（就像便宜的 Theremin）。您唯一真正的选择是更复杂的综合算法，例如物理建模算法之一（例如 Karplus-Strong）。那将是一个有趣的项目，但要注意它确实需要一些数学背景。

你确实可以使用像 Rafael 提到的 Portaudio 这样的东西来从 PC 中获取声音，事实上我认为 Portaudio 是最好的选择。但是生成数据使其听起来很悦耳是迄今为止您面临的最大挑战。

# objective-c - 推送视图控制器时保存变量

> ID：11678161
> 
> 赞同：0
> 
> 时间：2012-07-26T21:15:25.150
> 
> 标签：objective-c, xcode, cocoa-touch

我有两个视图控制器：在应用程序加载时看到的表格视图和在选择单元格时推送的控制器。我在其中一个表视图声明中有一个变量，当它被推送时需要转移到另一个视图控制器。该变量为每个表单元格提供一个数字（[objectAtIndex row] + 1），以便顶部的单元格为 1 . 下一个是 2\. 等。我需要视图控制器中使用的各种变量。我怎样才能做到这一点？谢谢你。

这是第一个视图控制器中的代码：

```
- (UITableViewCell *)tableView:(UITableView *)atableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

UITableViewCell *cell = [atableView dequeueReusableCellWithIdentifier:@"UITableViewCell"];

if (!cell) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                   reuseIdentifier:@"UITableViewCell"];
}

BNRItem *p = [[[BNRItemStore sharedStore] allItems] objectAtIndex:[indexPath row]];

//Variable that I need in the other view:
NSString *string = [NSString stringWithFormat:@"%d. %@",[indexPath row] + 1, p];

[[cell textLabel] setText:string];

 return cell;  
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T10:01:30.647

有很多方法，但这里有两种简单的方法......

一种简单的方法

在用户默认值中保存值

```
[[NSUserDefaults standardUserDefaults] setValue:@"Your Value" forKey:@"Your Key"]; 
```

在下一个控制器中检索值，写入 viewWillAppear

```
[[NSUserDefaults standardUserDefaults] objectForKey:@"Your Key"]; 
```

* * *

第二种方式是

```
 MessageBoxViewController *msgBoxController = [[MessageBoxViewController alloc]initWithNibName:@"MessageBoxViewController" bundle:nil];

[msgBoxController setReceverArray:urArray]; 

[self.navigationController pushViewController:msgBoxController animated:YES];
[msgBoxController release]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T21:30:27.513

`textLabel`从一个控制器类到另一个控制器类使用键值编码/观察。如果`UITableViewCell`符合 KVC，那么您可以通过在其属性上注册观察者来免费获得 KVO `text`（我使用的是 MacOS，而不是 iOS，所以我不知道是不是这种情况）。如果没有，在你设置`[self willChangeValueForKey:]`一些关键属性的文本调用之前，它会隐藏单元格的文本，然后调用`[self didChangeValueForKey:]`. 假设您的其他类已在第一个控制器类上设置了观察者，它将收到`observeValueForKeyPath:`通知。

更新：响应澄清请求。

假设我有两个班级`Foo`和`Bar`. 我希望在属性（即实例变量）发生更改`Foo`时得到通知。`Bar`如果`Bar`以适当的方式编写，它将符合键值编码。这意味着它的属性可以通过所谓的密钥路径访问，这是一种编码字符串表示。假设是这样`Bar`声明的：

。H

```
@interface Bar : public NSObject
@property (assign,readwrite) NSInteger x;
@end 
```

.m

```
#import "Bar.h"
@implementation Bar
@synthesize x;

...

@end 
```

`@property`和声明的组合`@synthesize`将自动生成一对 getter 和 setter 方法，分别称为`x`和`setX`。如果你已经这样做了，那么`x`就可以使用 KVC 访问。一个类可以执行以下操作：

```
Bar *bar=[[Bar alloc] init];
NSInteger barX=[bar valueForKey:@"x"];
[bar setValue:2 forKeyPath:@"x"]; // really needs an NSNumber wrapper object 
```

出于您的目的，这变得很有用，因为可以使符合 KVC 的类符合键值观察 (KVO)。要实现 KVO，您调用要观察的对象上的方法并在您希望进行`addObserver:forKeyPath:options:context:`观察的对象中实现该方法。`observeValueforKeyPath:ofObject:change:context:`因此，要`Foo`在每次`x`实例的属性`Bar`发生更改时通知类实例，您可以执行以下操作：

```
Foo *foo=[[Foo alloc] init];
Bar *bar=[[Bar alloc] init];

[bar addObserver:foo forKeyPath:@"x" options:NSKeyValueObservingOptionNew
   context:NULL]; 
```

在`Foo`类的实现中，您将覆盖观察者方法

```
-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object
   change:(NSDictionary *)change context:(void *)context
{
   if[keyPath isEqualToString:@"x"]
      {
      // extract new value from change dictionary
      }
} 
```

每次使用消息`bar`更改其`x`属性时`[self setX:<new value>]`，都会将其发送`observeValueForKeyPath:`到`foo`. 请注意，为了触发 KVO，必须使用 setter 方法。`x=2;`仅仅在实例方法内部说是不够的。

`NSObject`所有这些都是作为（或 iOS 等效）实现的一部分免费提供给您的。这些文档可从 Apple 的开发者网站获得。它们是键值编码编程指南和键值观察编程指南。

# php - 模拟框架返回具有不同名称和类型的类

> ID：11678166
> 
> 赞同：8
> 
> 时间：2012-07-26T21:15:49.690
> 
> 标签：php, unit-testing, mocking, phpunit, mockery

我正在尝试使用此代码创建一个模拟来满足类型提示（嘲弄）：

```
return \Mockery::mock('\Contracts\Helpers\iFileSystemWrapper'); 
```

或者这个（PHPUnit）：

```
return $this->getMock('\Contracts\Helpers\iFileSystemWrapper'); 
```

但是返回的模拟被称为`Mockery\Mock Object`or `Mock_iFileSystemWrapper_a5f91049`。当它不是我需要的任何一个框架的实例时，我应该如何输入检查？

为什么模拟框架试图加载真实的类？如果我想要真正的班级，我会包括真正的班级。

在编写测试时，这个问题已经让我慢了很多次，我将把类型提示扔出窗口并检查类名，或者只是使用生产对象，因为使用模拟很痛苦。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T08:28:21.193

我刚刚尝试了自己的现有测试，并通过将接口名称空间名称从存在的名称更改为不存在的名称，我得到的结果与您描述的完全相同（使用 phpunit）。我的模拟对象有类名`Mock_ViewInterface_c755461e`。当我将它改回正确的接口名称时，它工作正常。

因此，我会说：

1.  您正在尝试使用不存在的接口名称（例如拼写错误或缺少名称空间组件）。
2.  由于某种原因，您的库代码没有被加载，例如在您的单元测试引导程序中没有正确设置自动加载。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-02T22:24:48.837

您需要使用特殊功能来检查基类。像这样的东西：

```
$mock = $this->getMock('MyClass');
$this->assertInstanceOf('MyClass', $mock); 
```

# apache-flex - 如何读取存储在 Web 服务器上的 Flex 中的文本文件

> ID：11678176
> 
> 赞同：0
> 
> 时间：2012-07-26T21:17:07.440
> 
> 标签：apache-flex, web-applications, actionscript, remote-access

我有一个存储在网络服务器（Tomcat）上的文本文件。该文件每天由不同的程序更新。

现在，我希望我的 flex 应用程序从该文件中读取数据并在其中一个组件中显示数据，例如 DataGrid 、文本框。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:26:58.303

我认为有两种选择：

1) Flex 应用程序驻留在 tomcat 容器（或另一个 Java EE 容器）中。

因此，您可以使用 blaze ds 方案并通过 Java 应用程序访问文本文件，然后 Flex 通过远程对象方法调用 Java 应用程序

2) Flex 应用程序在 tomcat 容器外部

我可以使用的解决方案是开发一个返回文本文件内容的 Java Web 服务。

所以 Flex 应用调用 webservice 并使用 HttpService 方法返回内容

# iphone - /usr/bin/ iPhone 终端命令

> ID：11678177
> 
> 赞同：0
> 
> 时间：2012-07-26T21:17:11.337
> 
> 标签：iphone, binary, terminal

有没有地方可以找到所有`/usr/bin/`命令的目录？我知道 iPhone 在技术上不支持 NSTask，但这是出于教育目的，所以我导入了 NSTask.h。如果我运行`/usr/bin/cal`，那么它工作正常，但它不会工作`/usr/bin/ls`，我不知道为什么。

*注意：我已经尝试过`/usr/bin/whereis ls`，但这也给了我“找不到路径错误”

这是我的有效代码：

```
NSTask *task = [[NSTask alloc] init];
[task setLaunchPath: @"/usr/bin/cal"];  //@"/usr/bin/ls" produces cannot find path error

NSPipe *pipe;
pipe = [NSPipe pipe];
[task setStandardOutput: pipe];

NSFileHandle *file;
file = [pipe fileHandleForReading];

[task launch];

NSData *data;
data = [file readDataToEndOfFile];

NSString *string;
string = [[NSString alloc] initWithData: data encoding: NSUTF8StringEncoding];

label.numberOfLines=0;
label.text = string;

[label sizeToFit];

[string release];
[task release]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:48:55.260

由于 iOS 基本上是 Mac OS X，基本上是 Darwin，基本上是 Unix，所以你应该在你的 Mac/Darwin/Unix 系统上达到顶峰。

在您的终端（OSX）中，您将获得：

```
$ which ls
/bin/ls
$ 
```

现在，您可以使用任何目录（您具有读取+执行访问权限的目录）运行此命令以获取其内容。您可以`NSTask`为此使用：

```
$ /bin/ls /bin
(directory content of /bin)
...
$ /bin/ls /usr/bin
(directory content of /usr/bin)
... 
```

我不知道这会给未越狱的 iDevice 带来什么。

# javascript - Javascript错误对象函数没有方法'url'

> ID：11678180
> 
> 赞同：-3
> 
> 时间：2012-07-26T21:17:26.193
> 
> 标签：javascript, jquery, python

我正在考虑使用[syte](https://github.com/rigoneri/syte)作为博客。我已经设置好了，但是当我尝试使用侧面导航按钮时，我收到了这个 javascript 错误：

```
Object function (a,b){return new e.fn.init(a,b,h)} has no method 'url' [http://127.0.0.1:8000/static/js/components/links.js:15] 
```

这是links.js：

```
var $url;

function setupLinks() {

  $('a').click(function(e) {
      if (e.which == 2)
          return;

      e.preventDefault();
      e.stopPropagation();

      if (this.href == $url)
          return;

      var url = $.url(this.href.replace('/#!', ''));
      $url = this.href;

      if (this.id == 'home-link' && window.location.pathname == '/') {
         $('#github-profile').remove();
         $('#dribbble-profile').remove();
         $('#twitter-profile').remove();
         $('#instagram-profile').remove();
         $('#lastfm-profile').remove();
         $('.modal-backdrop').remove();
         adjustSelection('home-link');
      }
      else if(this.id == 'instagram-link' && instagram_integration_enabled) {
         $('#github-profile').remove();
         $('#dribbble-profile').remove();
         $('#twitter-profile').remove();
         $('#lastfm-profile').remove();
         $('.modal-backdrop').remove();
         adjustSelection('instagram-link');

         setupInstagram(this);
      }
      else if (twitter_integration_enabled && (url.attr('host') == 'twitter.com' || url.attr('host') == 'www.twitter.com')) {

         $('#github-profile').remove();
         $('#dribbble-profile').remove();
         $('#instagram-profile').remove();
         $('#lastfm-profile').remove();
         $('.modal-backdrop').remove();
         adjustSelection('twitter-link');

         setupTwitter(url, this);
      }
      else if (github_integration_enabled && (url.attr('host') == 'github.com' || url.attr('host') == 'www.github.com')) {

        $('#twitter-profile').remove();
        $('#dribbble-profile').remove();
        $('#instagram-profile').remove();
        $('#lastfm-profile').remove();
        $('.modal-backdrop').remove();
        adjustSelection('github-link');

        setupGithub(url, this);
      }
      else if (dribbble_integration_enabled && (url.attr('host') == 'dribbble.com' || url.attr('host') == 'www.dribbble.com')) {

         $('#twitter-profile').remove();
         $('#github-profile').remove();
         $('#instagram-profile').remove();
         $('#lastfm-profile').remove();
         $('.modal-backdrop').remove();
         adjustSelection('dribbble-link');

         setupDribbble(url, this);
      }
      else if (lastfm_integration_enabled && (url.attr('host') == 'lastfm.com' || url.attr('host') == 'www.lastfm.com')) {

        $('#twitter-profile').remove();
        $('#github-profile').remove();
        $('#dribbble-profile').remove();
        $('#instagram-profile').remove();
        $('.modal-backdrop').remove();
        adjustSelection('lastfm-link');

        setupLastfm(url, this);
      }
      else {
         window.location = this.href;
      }
  });
}

function adjustSelection(el) {
  $('.main-nav').children('li').removeClass('sel');
  $('#' + el).parent().addClass('sel');

  if (el == 'home-link')
    $url = null;
} 
```

这似乎是缺少 javascript 库的问题。Syte 安装说明要求您在部署站点之前运行 compress.py。它应该自动导入和压缩 javascript 库，但它似乎没有这样做。这是compress.py：

```
import os
import sys
import subprocess
import shlex
import traceback

path_to_here = os.path.abspath(os.path.dirname(__file__))
path_before_site = path_to_here[0:path_to_here.rfind('syte')]
sys.path.append(path_before_site)
os.environ['DJANGO_SETTINGS_MODULE'] = 'syte.settings'

from django.conf import settings

def compress_statics():
    try:
        #This won't work on windows.
        subprocess.check_call(shlex.split('mkdir -p static/css static/js/min'))
    except Exception:
        print 'Make sure to create "syte > static > css" and "syte > static > js > min" before compressing statics.'

    compress_styles()
    compress_js()

def compress_styles():
    less_path = 'static/less/styles.less'
    css_path = 'static/css/'

    try:
        subprocess.check_call(shlex.split('lessc {0} {1}styles-{2}.min.css -yui-compress'
            .format(less_path, css_path, settings.COMPRESS_REVISION_NUMBER)))
        print 'CSS Styles Generated: styles-{0}.min.css'.format(settings.COMPRESS_REVISION_NUMBER)
    except Exception:
        exc_type, exc_value, exc_traceback = sys.exc_info()
        stack_trace = traceback.format_exception(exc_type, exc_value, exc_traceback)
        print stack_trace

def compress_js():
    js_files = [
      'libs/jquery.url.js',
      'libs/require.js',
      'libs/handlebars.js',
      'libs/moment.min.js',
      'libs/bootstrap-modal.js',
      'libs/spin.min.js',
      'libs/prettify.js',

      'components/base.js',
      'components/mobile.js',
      'components/blog-posts.js',
      'components/links.js',
    ]

    if settings.TWITTER_INTEGRATION_ENABLED:
        js_files.append('components/twitter.js')

    if settings.GITHUB_INTEGRATION_ENABLED:
        js_files.append('components/github.js')

    if settings.DRIBBBLE_INTEGRATION_ENABLED:
        js_files.append('components/dribbble.js')

    if settings.INSTAGRAM_INTEGRATION_ENABLED:
        js_files.append('components/instagram.js')

    if settings.DISQUS_INTEGRATION_ENABLED:
        js_files.append('components/disqus.js')

    if settings.LASTFM_INTEGRATION_ENABLED:
        js_files.append('components/lastfm.js')

    combined = ''
    for js in js_files:
        f = open('static/js/' + js, 'r')
        combined += f.read()
        f.close()

    f = open('static/js/combined.js', 'w')
    f.write(combined)
    f.close()

    try:
        subprocess.check_call(shlex.split('uglifyjs -o static/js/min/scripts-{0}.min.js static/js/combined.js'.format(settings.COMPRESS_REVISION_NUMBER)))
        subprocess.check_call(shlex.split('rm -f static/js/combined.js'))
        print 'JavaScript Combined and Minified: scripts-{0}.min.js'.format(settings.COMPRESS_REVISION_NUMBER)
    except Exception:
        exc_type, exc_value, exc_traceback = sys.exc_info()
        stack_trace = traceback.format_exception(exc_type, exc_value, exc_traceback)
        print stack_trace

if __name__ == "__main__":
    compress_statics()
    sys.exit() 
```

我的 javascript 技能缺乏，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:21:32.313

您最有可能不包括页面上的依赖项，特别是[jquery.url.js](https://github.com/rigoneri/syte/blob/master/syte/static/js/libs/jquery.url.js)

包括所有[列出的依赖项](https://github.com/rigoneri/syte/tree/master/syte/static/js/libs)，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T21:19:43.483

```
var url = $.url(this.href.replace('/#!', '')); 
```

$.url 不存在

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T17:14:16.143

问题是我在我的一篇 tumblr 帖子中嵌入了 javascript，这会造成干扰。删除了javascript，现在它已修复。

# jquery - 过多的图像被垂直堆叠并且没有隐藏在 jcarousel 中

> ID：11678183
> 
> 赞同：0
> 
> 时间：2012-07-26T21:17:31.663
> 
> 标签：jquery, jquery-plugins, jcarousel

我正在使用 jQuery 1.7.2 和 ColdFusion。我不知道我们使用的是什么版本的 jcarousel，但这是插件的来源......

```
http://sorgalla.com/jcarousel/ 
```

我有一个页面的轮播不再起作用。我没有构建页面，但我需要修复它。这是该页面的链接：

```
http://dev.iqcatalogs.com/avcat/ctl1642/index.cfm?avprofile.detail=1443 
```

轮播右侧有八个图像。这些图像中只有四个应该显示。现在，所有八幅图像都是垂直堆叠的。

关于为什么这可能无法正常工作的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:33:56.100

实际上，我发现我们的 skin.css 已被删除，因此在调用时没有加载。

我再次下载了jcarousel并上传了skin.css。

问题解决了。

# objective-c - 为什么一个空的 UIScrollView 有两个子视图？

> ID：11678184
> 
> 赞同：4
> 
> 时间：2012-07-26T21:17:36.037
> 
> 标签：objective-c, xcode, ios5, uiscrollview, storyboard

我需要计算 UIScrollView 中内容的高度。

我将一个空的 UIScrollView 放到 XCode Storyboard 中，并使用以下代码给它一个自定义类：

```
- (id)initWithCoder:(NSCoder *)decoder
{
    self = [super initWithCoder:decoder];
    if (self) {

        int i;
        for (i = 0; i < [self.subviews count]; i++) {
            UIView *view =[self.subviews objectAtIndex:i];
            NSLog(@"sub view %@ x:%f, y:%f, w:%f, h:%f", [view class], view.frame.origin.x, view.frame.origin.y, view.frame.size.width, view.frame.size.height);
        }

    }
    return self;
} 
```

使用空的 UIScrollView 这是记录到控制台的内容：

```
sub view UIImageView x:233.000000, y:121.000000, w:7.000000, h:7.000000
sub view UIImageView x:233.000000, y:121.000000, w:7.000000, h:7.000000 
```

那些图像是什么？他们抛弃了我的计算，因为他们总是低于我的内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T21:36:58.130

它们是滚动条（或滚动指示器，如果您愿意的话）。一个是水平的，另一个是垂直的。

# asp-classic - Microsoft VBScript 运行时错误“800a0009”ASP

> ID：11678185
> 
> 赞同：1
> 
> 时间：2012-07-26T21:17:50.513
> 
> 标签：asp-classic, vbscript, runtime-error

我需要你的帮助。在我的经典 ASP 应用程序中添加购物车中的项目时会出现此错误（并非总是如此）

```
Microsoft VBScript runtime
error '800a0009'
Subscript out of range
/agrega_carrito.inc, line 71 
```

这是文件中的代码，第 56 - 86 行

```
if IsEmpty(Session("arrcarrito")) then
'Create shopping cart
Dim arrcarrito()
Redim arrcarrito(6, 1)
arrcarrito (0, 0) = idprod
arrcarrito (1, 0) = color
arrcarrito (2, 0) = talla
arrcarrito (3, 0) = cantidad
arrcarrito (4, 0) = precio
arrcarrito (5, 0) = peso
Session("arrcarrito") = arrcarrito
Else
'Add items to shopping cart
arrcarrito = Session("arrcarrito")
tamano_arr = Ubound(arrcarrito, 2)
Redim Preserve arrcarrito (6, tamano_arr + 1)   <- line 71
arrcarrito (0, tamano_arr) = idprod
arrcarrito (1, tamano_arr) = color
arrcarrito (2, tamano_arr) = talla
arrcarrito (3, tamano_arr) = cantidad
arrcarrito (4, tamano_arr) = precio
arrcarrito (5, tamano_arr) = peso
Session("arrcarrito") = arrcarrito
end if
arrcart = Session("arrcarrito")
l = 0
r = UBound(arrcart,2) - 1
s = UBound(arrcart,1)
Call QuickSort(arrcart, l, r, 1, s)
Session("arrcarrito") = arrcart 
```

谢谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:31:00.070

`Redim Preserve`当最后一个维度值小于 0 或任何其他维度值与首次创建数组时使用的原始值不同时，就会发生此错误。

我认为您的代码失败的唯一原因是其他页面已篡改会话值，因此返回的数组不是您期望的。

也许另一个页面是在更好地理解数组如何工作的情况下编写的，因此由于没有使用第六个条目，因此对第一个维度使用 5 的 UBound？

# wordpress - 自定义帖子类型的 get_categories

> ID：11678186
> 
> 赞同：3
> 
> 时间：2012-07-26T21:18:10.697
> 
> 标签：wordpress, custom-post-type

我有一个自定义帖子类型，'ioni_codex' 我使用内置的 Wordpress 类别作为分类

我想列出“ioni_codex”使用的所有类别。

我认为这段代码可以解决问题：

```
$myargs = array (
    'type' => 'ioni_codex'
); 
$categories = get_categories( $myargs ); 
```

但是，相反，我看到的是*所有类别*的列表，而不是“ioni_codex”分配的类别。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T21:35:41.407

`get_categories()`不接受`post_type`作为参数，`taxonomy`而是使用并通过您在注册时提供的名称来引用分类法。这是一个可以更详细地解释它的法典的链接 - [http://codex.wordpress.org/Function_Reference/get_categories](http://codex.wordpress.org/Function_Reference/get_categories)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:15:53.723

我在一个姊妹项目中有一个答案：Bainternet♦ 已经重写了 get_terms() 函数来提供 post_type

[请在此处](https://wordpress.stackexchange.com/questions/14331/get-terms-by-taxonomy-and-post-type)参考他的解决方案，或者从下面复制并过去：

```
/* get terms limited to post type 
 @ $taxonomies - (string|array) (required) The taxonomies to retrieve terms from. 
 @ $args  -  (string|array) all Possible Arguments of get_terms http://codex.wordpress.org/Function_Reference/get_terms
 @ $post_type - (string|array) of post types to limit the terms to
 @ $fields - (string) What to return (default all) accepts ID,name,all,get_terms. 
 if you want to use get_terms arguments then $fields must be set to 'get_terms'
*/
function get_terms_by_post_type($taxonomies,$args,$post_type,$fields = 'all'){
    $args = array(
        'post_type' => (array)$post_type,
        'posts_per_page' => -1
    );
    $the_query = new WP_Query( $args );
    $terms = array();
    while ($the_query->have_posts()){
        $the_query->the_post();
        $curent_terms = wp_get_object_terms( $post->ID, $taxonomy);
        foreach ($curent_terms as $t){
          //avoid duplicates
            if (!in_array($t,$terms)){
                $terms[] = $c;
            }
        }
    }
    wp_reset_query();
    //return array of term objects
    if ($fields == "all")
        return $terms;
    //return array of term ID's
    if ($fields == "ID"){
        foreach ($terms as $t){
            $re[] = $t->term_id;
        }
        return $re;
    }
    //return array of term names
    if ($fields == "name"){
        foreach ($terms as $t){
            $re[] = $t->name;
        }
        return $re;
    }
    // get terms with get_terms arguments
    if ($fields == "get_terms"){
        $terms2 = get_terms( $taxonomies, $args );
        foreach ($terms as $t){
            if (in_array($t,$terms2)){
                $re[] = $t;
            }
        }
        return $re;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-24T04:51:10.950

您必须设置 post_type 而不是 type ，默认情况下 get_categories 尝试隐藏空类别，如果您想显示它全部添加 hide_empty 属性设置为 false

```
 get_categories(array(
    'post_type' => 'ioni_codex',
    'hide_empty' => false,
   ) ); 
```

# asp.net - 子网站的 URL 重写？

> ID：11678189
> 
> 赞同：0
> 
> 时间：2012-07-26T21:18:17.360
> 
> 标签：asp.net, url, iis, redirect, rewrite

所以这就是我想要达到的目标......

我有一个 URL 格式如下的网站：

*somedb.mysite.com*

*somedb*可以是许多不同的数据库。问题是，不同的数据库需要不同版本的站点。这些不同的版本被设置为父站点的子站点。

例如*somedb.mysite.com/1.0*和*somedb2.mysite.com/2.0*

目前我在父站点中使用 Response.Redirect() 重定向到正确的版本。我希望做的是隐藏版本号，以便所有数据库看起来都在使用同一个站点，因此如果数据库更新到较新版本，URL 会显示相同。

我一直在使用 RewritePath 和 Server.Transfer 并没有取得很大的成功......主要问题（据我所知）是 Rewrite 和 Transfer 只能在同一个站点内工作，但各个版本在技术上是不同的子站点站点。

有没有人知道我如何能够实现我想要做的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:36:19.703

我建议您编写自己的处理程序来拦截子域的传入请求

为此，您可以实现 IHttpHandler 并在 ProcessRequest 方法中处理 url 重定向逻辑

这是一个很好的例子[http://www.codeproject.com/Articles/30907/The-Two-Interceptors-HttpModule-and-HttpHandlers](http://www.codeproject.com/Articles/30907/The-Two-Interceptors-HttpModule-and-HttpHandlers)

# javascript - Javascript向图像添加标记

> ID：11678192
> 
> 赞同：1
> 
> 时间：2012-07-26T21:18:28.143
> 
> 标签：javascript, image, onclick, marker

> **可能重复：**
> [在javascript中为图像添加标记？](https://stackoverflow.com/questions/1624202/add-a-marker-to-an-image-in-javascript)

是否有 Javascript 解决方案在加载时显示一组标记？理想情况下，当在触摸设备上单击或轻敲这些标记时，会打开一个信息窗口。这基本上是谷歌地图所做的。但是，我想为图像而不是在地图上执行此操作。

这是我刚刚画的一个例子。

![图像和标记](../Images/4db78f91921fe3a1fb7168f17386557b.png)

如果我要对此进行编码，您对使用其他库等有什么建议吗？我正在考虑制作一个 jQuery 插件。

图片[归功于 dancentury@flickr](http://www.flickr.com/photos/dancentury/160533445/sizes/o/in/photostream/)。

# amazon-ec2 - Amazon EC2 利用率之间的差异

> ID：11678196
> 
> 赞同：3
> 
> 时间：2012-07-26T21:18:47.617
> 
> 标签：amazon-ec2

**基于此：**预留实例的购买期限为 1 年或 3 年，每个实例的一次性费用不予退还。轻型和中型利用率预留实例也按实例处于运行状态的时间按实例小时计费；如果您在一小时内未运行实例，则使用费为零。消耗的部分实例小时数按完整小时数计费。高利用率预留实例在整个预留实例期限内按小时计费（这意味着无论一小时内是否发生任何使用，您都需要按小时付费）。

当我可以使用轻量包并在服务器不使用时节省资金时，为什么我还要购买重度使用包？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T03:45:52.057

为我之前的评论道歉，现在我再次阅读它似乎有争议。希望这个答案能弥补它。

借助 3 种不同的预留实例包，Amazon 让您在为预留实例预先支付的费用和为运行实例每小时支付的费用之间进行权衡。Light Utilization 实例的前期成本最低，Heavy Utilization 实例的前期成本最低，但每小时成本则相反；重利用率最低，轻利用率最高。

让我们做一些数学来说明，使用具有一年预留期限的小型 Linux 实例。以下是相对价格：

预付款：轻型 69 美元，重型 195 美元

每小时成本：轻型 0.039 美元，重型 0.016 美元

假设您每天仅运行实例 1 小时，或在 1 年的预留期内运行 365 小时。您的总费用为：

轻型：69.00 美元 + (365 * 0.039 美元) = **83.24 美元**

重：195.00 美元 + (365 * 0.016 美元) = **200.84 美元**

但是当我们每天运行实例 20 小时或总共 7300 小时时，我们会得到：

轻：69.00 美元 + (7300 * 0.039 美元) = **353.70 美元**

重磅：195.00 美元 + (7300 * 0.016 美元) = **311.80 美元**

因此，如果您仔细预测您的工作量，您可以通过选择正确的定价方案来节省大量成本。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-22T17:56:27.350

@gareth_bowles 的答案有一个错误——Heavy Utilization 实例每小时收费**一次**，无论机器是否开启。

不同利用率的成本如下所示：

```
Heavy:    $195 + (365 * 24 * $0.016) = $335.16       (independent of hours used)
Medium:   $160 + (365 *  N * $0.024) = $160 + 8.76N  (use N hours / day)
Light:     $69 + (365 *  N * $0.039) = $69 + 14.235N (use N hours / day)
On-Demand:  $0 + (365 *  N * $0.080) = $29.2N        (use N hours / day) 
```

收支平衡的使用点是：

```
Heavy:     > 80% utilization (20   hrs / day)
Medium:    < 80% utilization (20   hrs / day)
Light:     < 70% utilization (16.6 hrs / day)
On-Demand: < 20% utilization ( 4.6 hrs / day) 
```

# html - 在html中制作圆角框

> ID：11678198
> 
> 赞同：0
> 
> 时间：2012-07-26T21:18:59.620
> 
> 标签：html, css, border, css-tables

我通过在中间单元格中创建一个包含内容的 3x3 表格来制作一个圆角框（内部为白色），并将图像插入到外部单元格中，因为我已经有了表格边框的图像。但是，当我这样做时，角落图像会出现在右侧，但顶部、左侧、右侧和底部的图像会显得非常小。我没有为任何东西指定任何尺寸或测量值。有没有办法让它们正常出来？

编辑：使用插入 img src 的角图像和用作背景的顶部/l/r/底部图像工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T21:21:44.680

是的 - 将图像的高度和宽度设置为请求的大小，或者如果您使用背景图像，则使用 CSS3 的背景大小并将其设置正确，但是 - 当使用 CSS3 时 - 您最好只使用边框半径和节省大量工作:)

# java - Java控制台中的退格？

> ID：11678204
> 
> 赞同：3
> 
> 时间：2012-07-26T21:19:29.077
> 
> 标签：java, console, passwords, java.util.scanner, privacy

有没有办法退格并删除用户输入的一些字母/单词？

我正在创建一个文字加扰器游戏，在制作 GUI 之前，我正在做一些控制台的东西。因为当第一个玩家输入一个单词时我使用的是扫描仪，所以它会停留在那里。所以第二个玩家在猜测打乱的单词时可以只看它。
无论如何要从控制台中删除该词？或者让它显示为 * * * *？
我不希望`System.out.println("\n\n\n....");`
这会使输入出现在底部，我希望它出现在顶部。我可以删除用户输入的内容或使其显示为 * * * * * * 吗？
谢谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:28:08.827

请注意，在 GUI 中执行此操作实际上比使用`Scanner`IMOP 执行此操作要容易得多。

一种方法`Scanner`是使用一个线程在输入字符时擦除它们并用 * 替换它们

**EraserThread.java**

```
import java.io.*;

class EraserThread implements Runnable {
   private boolean stop;

   /**
    *@param The prompt displayed to the user
    */
   public EraserThread(String prompt) {
       System.out.print(prompt);
   }

   /**
    * Begin masking...display asterisks (*)
    */
   public void run () {
      stop = true;
      while (stop) {
         System.out.print("\010*");
     try {
        Thread.currentThread().sleep(1);
         } catch(InterruptedException ie) {
            ie.printStackTrace();
         }
      }
   }

   /**
    * Instruct the thread to stop masking
    */
   public void stopMasking() {
      this.stop = false;
   }
} 
```

**密码字段.java**

```
public class PasswordField {

   /**
    *@param prompt The prompt to display to the user
    *@return The password as entered by the user
    */
   public static String readPassword (String prompt) {
      EraserThread et = new EraserThread(prompt);
      Thread mask = new Thread(et);
      mask.start();

      BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
      String password = "";

      try {
         password = in.readLine();
      } catch (IOException ioe) {
        ioe.printStackTrace();
      }
      // stop masking
      et.stopMasking();
      // return the password entered by the user
      return password;
   }
} 
```

**主要方法**

```
class TestApp {
   public static void main(String argv[]) {
      String password = PasswordField.readPassword("Enter password: ");
      System.out.println("The password entered is: "+password);
   }
} 
```

我已经对其进行了测试，并且正在为我工​​作。

更多信息：

*   [Java 编程语言中的密码屏蔽](http://java.sun.com/developer/technicalArticles/Security/pwordmask/)。他们还展示了如何使用 AWT 来做到这一点。

# javascript - 如何忽略td中的复选框

> ID：11678205
> 
> 赞同：0
> 
> 时间：2012-07-26T21:19:41.077
> 
> 标签：javascript, jquery, event-delegation

我正在使用 jQuery 的事件委托向表行添加点击事件。我在该行的第一个 td 中也有一个复选框。当我单击行中的任意位置时，一切都按预期工作。但是，当我单击复选框时，我不希望该事件起作用。我尝试使用 :not() 选择器，但也许我遗漏了一些东西，因为当我单击复选框时我仍在触发事件。

**HTML**

```
<tr>
    <td>
        <div class="myCheckbox"><input type="checkbox" name="userName" /></div>
    </td>
    <td><a href="/go/to/user/profile"></a></td>
    <td>more info</td>
    <td>more info</td>
    <td>more info</td>
</tr> 
```

**jQuery**

```
$('table tr:not(':checkbox')').on('click', 'td', function(event) {

    // Do something
}); 
```

我可以得到帮助来解决我正在尝试做的事情吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T21:22:20.903

两个选项（都涉及`tr:not`从现有代码中删除内容，正如您所说的那样不起作用 -`tr`元素不能是复选框，并`:not`检查元素，而不是其内容）：

1.  将事件处理程序添加到调用[`e.stopPropagation`](http://api.jquery.com/event.stopPropagation/). 然后点击事件不会到达该行。您可以直接执行此操作，也可以通过委托执行此操作。这是一个直接[的活生生的例子。](http://jsbin.com/ewoder)如果您采用间接方式，请务必在`label`您打算支持的所有浏览器上测试单击激活复选框（如果您将拥有它们）的 s。

    或者

2.  将此添加到您的处理程序：

    ```
    if ($(event.target).is('input[type=checkbox]')) {
        return;
    } 
    ```

    例如：

    ```
    $('table').on('click', 'td', function(event) {

        if ($(event.target).is('input[type=checkbox]')) {
            return;
        }

        // Logic here
    }); 
    ```

    这可以通过测试事件的来源来查看它是否是一个复选框，并尽早退出。

在这两种情况下，如果您使用 a`label`来激活复选框，您可能需要对标签执行相同的操作。

我对#2 处理 s 的样子感到好奇`label`，结果证明它足以移动到函数中，但并不难&mdash 可能我会怎么做：[Live example](http://jsbin.com/ewoder/4) | [来源](http://jsbin.com/ewoder/4/edit)

```
jQuery(function($) {

  // The table cell click handler
  $("table").on("click", "td", function(e) {
    // Is the source a checkbox or the label for
    // one?
    if (isCheckbox($(e.target))) {
      return;
    }

    // Normal handling
    $(this).toggleClass("foo");
  });

  // Function to test whether the source is a
  // checkbox, or the label of a checkbox
  function isCheckbox($elm) {
    var chkid;

    if ($elm.is("input[type=checkbox]")) {
      return true;
    }
    if ($elm.is("label")) {
      chkid = $elm.attr("for");
      if (chkid) {
        return $("#" + chkid).is("input[type=checkbox]");
      }
      return !!$elm.find("input[type=checkbox]")[0];
    }
    return false;
  }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T21:24:15.890

尝试使用 stopPropagation() 来防止事件冒泡。

```
$('div.myCheckbox input[type=checkbox]').bind('change', function(e) {
  e.stopPropagation();

  //do stuff here
}); 
```

# css - 当滚动条出现时，内联块元素会被碰撞

> ID：11678206
> 
> 赞同：2
> 
> 时间：2012-07-26T21:19:42.353
> 
> 标签：css

我有一个选项框，里面装满了选项，如下所示：

```
<div class="OptionBox">
  <div class="Option">
    <div class="AddRemoveIcon"></div>
    <img src="images/users/user_1000000002.jpg">
    <span class="Label">Student Name<span class="SubLabel">Student</span></span>
  </div>
  <div class="Option">...</div>
</div> 
```

样式是这样的：

```
.OptionBox{
  overflow: auto;
  max-height: 200px;
  max-width:300px;
  display: inline-block;
}

.Option {
  display: block;
}

.Option .AddRemoveIcon,
.Option img,
.Option .Label {
  display: inline-block;
  vertical-align: middle;
  margin-right: 5px;
} 
```

我正在使用内联块，因为我喜欢垂直对齐：中间，并且子标签跨度并不总是存在......但是这个问题也发生在浮动：左......

我的问题是当我在选项框中有足够的选项导致溢出时。无论出于何种原因，浏览器都会正确调整大小（即计算每个选项的宽度并相应地调整选项框的宽度），然后添加滚动条。结果是最宽的选项的标签 div 向下移动了一行，因为滚动条从选项框的宽度中删除了 X 个像素。当我为 Option 的子级切换到 float:left 时，Label div 会根据滚动条进行换行。在任何一种情况下， .OptionBox 都不会被推到最宽选项的最佳宽度。包装应该只在达到最大宽度时发生，对吧？[这是它的一个小提琴](http://jsfiddle.net/TQDKq/1/)。

我所追求的——而且我确定我在寻求月亮——要么是一种重新定位滚动条的方式，这样它们就不会从 OptionBox 的宽度中消失，要么是一些神奇的 CSS 规则，它告诉浏览器在调整大小时考虑滚动条（有点像 box-sizing:border-box 告诉浏览器在设置元素宽度时考虑填充/边框）。

有什么想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-22T18:51:18.360

您应该可以通过将最外层的 div 设置为溢出来解决此问题：隐藏。这样你就不会得到 y-overflow 并且滚动条也不会出现。我很确定我看到了一些 CSS 来防止滚动条在没有这个的情况下出现，但在 atm 中找不到它。

# android - android上的语法错误

> ID：11678216
> 
> 赞同：-1
> 
> 时间：2012-07-26T21:20:21.463
> 
> 标签：android, syntax-error

我正在尝试开发一个应用程序，但我无法在模拟器上启动它。我这里有这段代码

```
import java.util.ArrayList;
import java.util.List;

import org.json.JSONException;
import org.json.JSONObject;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.os.Parcelable;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.view.animation.TranslateAnimation;
import android.view.inputmethod.InputMethodManager;
import android.widget.AdapterView;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.ImageButton;
import android.widget.LinearLayout;
import android.widget.ListView;
import android.widget.SeekBar;
import android.widget.TextView;
import android.widget.Toast;

public abstract class Calculator extends Activity
  implements SeekBar.OnSeekBarChangeListener
{
  private static final int SHOW_RECOMMEND_APP_MSG_ID = 65545;
  InputMethodManager adManager;

  ImageButton addButton;
  CompoundButton.OnCheckedChangeListener boxListener = new CompoundButton.OnCheckedChangeListener()
  {
    public void onCheckedChanged(CompoundButton paramCompoundButton, boolean paramBoolean)
    {
      Calculator.this.setResult();
    }
  };
  View.OnClickListener buttonListener = new View.OnClickListener()
  {
    public void onClick(View paramView)
    {
      Object localObject;
      switch (paramView.getId())
      {
      case 2131165186:
        localObject = new Intent(Calculator.this, inputarea.class);
        ((Intent)localObject).putExtra("INT", false);
        Calculator.this.startActivityForResult((Intent)localObject, 152);
        break;
      case 2131165189:
        Calculator.this.percentSeekBar.setProgress(Calculator.this.percentValue - setting.getButton1(Calculator.this));
        break;
      case 2131165190:
        Calculator.this.percentSeekBar.setProgress(Calculator.this.percentValue - setting.getButton2(Calculator.this));
        break;
      case 2131165191:
        Calculator.this.percentSeekBar.setProgress(Calculator.this.percentValue + setting.getButton3(Calculator.this));
        break;
      case 2131165192:
        Calculator.this.percentSeekBar.setProgress(Calculator.this.percentValue + setting.getButton4(Calculator.this));
        break;
      case 2131165201:
        localObject = new Intent(Calculator.this, inputarea.class);
        ((Intent)localObject).putExtra("INT", false);
        Calculator.this.startActivityForResult((Intent)localObject, 153);
        break;
      case 2131165202:
        if (Calculator.this.totalValue != 0.0F)
        {
          Calculator.this.setResult();
          if (Utils.getSDKVersionNumber() <= 3)
            break;
          Calculator.this.setAnimation();
        }
        else
        {
          Calculator.this.shake = AnimationUtils.loadAnimation(Calculator.this, 2130968578);
          Calculator.this.totalValueButton.startAnimation(Calculator.this.shake);
          Toast.makeText(Calculator.this, 2131034139, 0).show();
        }
        break;
      case 2131165203:
        Calculator.this.resetView();
        break;
      case 2131165204:
        Calculator.this.listPrice.add(Float.valueOf(Calculator.this.resultValue));
        Calculator.this.listDiscount.add(Integer.valueOf(Calculator.this.percentValue));
        Calculator.this.listOriginPrice.add(Float.valueOf(Calculator.this.totalValue));
        Calculator.this.listSaved.add(Float.valueOf(Calculator.this.savedValue));
        localObject = Calculator.this;
        ((Calculator)localObject).totalPriceValue += Calculator.this.resultValue;
        localObject = Calculator.this;
        ((Calculator)localObject).totalSavedValue += Calculator.this.savedValue;
        Calculator.this.setTotalText();
        if (!Calculator.this.taxBox.isChecked())
          Calculator.this.listTax.add(Float.valueOf(Float.parseFloat("0")));
        else
          Calculator.this.listTax.add(Float.valueOf(setting.getConfigTax(Calculator.this)));
        Calculator.this.setListStatus();
        Calculator.this.priceList.setOnItemClickListener(new AdapterView.OnItemClickListener()
        {
          private Builder setPositiveButton;

        public void onItemClick(AdapterView<?> paramAdapterView, View paramView, int paramInt, long paramLong)
          {
            Utils.l(paramInt + " was click");
            AlertDialog.Builder localBuilder = new AlertDialog.Builder(Calculator.this);
            localBuilder.setMessage(2131034150);
            setPositiveButton = localBuilder.setPositiveButton(Calculator.this.getString(2131034151), new DialogInterface.OnClickListener()
            {
              private int val$location;

            public void onClick(DialogInterface paramDialogInterface, int paramInt)
              {
                Calculator.this.removeItemFromList(this.val$location);
                Calculator.this.setTotalText();
                Calculator.this.setListStatus();
              }
            });
            localBuilder.setNegativeButton(Calculator.this.getString(2131034152), new DialogInterface.OnClickListener()
            {
              public void onClick(DialogInterface paramDialogInterface, int paramInt)
              {
              }
            });
            localBuilder.show();
          }
        });
      case 2131165187:
      case 2131165188:
      case 2131165193:
      case 2131165194:
      case 2131165195:
      case 2131165196:
      case 2131165197:
      case 2131165198:
      case 2131165199:
      case 2131165200:
      }
    }
  };
  Button calculateButton;
  Button clearButton;
  Context context;
  String ePercentString;
  Button firstButton;
  Button forthButton;
  private InfolifeEventListener infolifeEventListener = new InfolifeEventListener()
  {
    public void hasUpdate(JSONObject paramJSONObject)
    {
      Calculator.this.mHandler.obtainMessage(257).sendToTarget();
    }

    public void noUpdateNotification()
    {
      Calculator.this.mHandler.obtainMessage(259).sendToTarget();
    }

    public void onFetchedData(JSONObject paramJSONObject)
    {
      Message localMessage = Calculator.this.mHandler.obtainMessage(258);
      localMessage.obj = paramJSONObject;
      localMessage.sendToTarget();
    }

  private void checkUpdate()
  {
    boolean bool = true;
    if ((setting.getAutoUpdateStat(this)) && (Constants.market.shouldCheckUpdate()))
      bool = true;
    this.mChecker = new VersionChecker(this, this.infolifeEventListener, false);
    this.mChecker.checkUpdateinThread(bool, Constants.market.shouldShowRecommendApps());
    Utils.l("finish check :" + bool + "," + Constants.market.shouldShowRecommendApps());
  }

  private void removeItemFromList(int paramInt)
  {
    this.totalPriceValue = 0.0F;
    this.totalSavedValue = 0.0F;
    this.listPrice.remove(paramInt);
    this.listDiscount.remove(paramInt);
    this.listOriginPrice.remove(paramInt);
    this.listSaved.remove(paramInt);
    if (this.listPrice.size() == 0)
    {
      Utils.l("size=0");
      this.priceList.setVisibility(8);
      this.totalPriceLayout.setVisibility(8);
      this.totalSavedLayout.setVisibility(8);
    }
    for (int i = 0; i <= -1 + this.listPrice.size(); i++)
    {
      this.totalPriceValue += ((Float)this.listPrice.get(i)).floatValue();
      this.totalSavedValue += ((Float)this.listSaved.get(i)).floatValue();
    }
  }

  private void resetView()
  {
    this.percentSeekBar.setProgress(0);
    this.totalValueButton.setText(2131034123);
    this.totalValue = 0.0F;
    this.resultText.setText(2131034125);
    this.totalValueButton.requestFocus();
    this.totalPriceLayout.setVisibility(8);
    this.totalSavedLayout.setVisibility(8);
    this.priceList.setVisibility(8);
    this.listPrice.clear();
    this.listDiscount.clear();
    this.listOriginPrice.clear();
    this.listTax.clear();
    this.totalPriceValue = 0.0F;
    this.totalSavedValue = 0.0F;
    this.adapter = new priceListAdapter(this, this.listPrice, this.listOriginPrice, this.listDiscount, this.listTax);
    this.priceList.setAdapter(this.adapter);
  }

  private void setListStatus()
  {
    LinearLayout.LayoutParams localLayoutParams = (LinearLayout.LayoutParams)this.priceList.getLayoutParams();
    this.listHeight = (3 + Utils.dip2px(this));
    localLayoutParams.height = (this.listHeight * this.listOriginPrice.size());
    this.priceList.setLayoutParams(localLayoutParams);
    this.adapter = new priceListAdapter(this, this.listPrice, this.listOriginPrice, this.listDiscount, this.listTax);
    this.priceList.setAdapter(this.adapter);
  }

  private void setTotalText()
  {
    if (this.listSaved.size() != 0)
    {
      this.priceList.setVisibility(0);
      this.totalPriceLayout.setVisibility(0);
      this.totalSavedLayout.setVisibility(0);
    }
    this.totalPriceText.setText(Utils.currencyFormater.format(this.totalPriceValue));
    this.totalSavedText.setText(Utils.currencyFormater.format(this.totalSavedValue));
  }

  private void showDonateDialog()
  {
    new AlertDialog.Builder(this).setIcon(17301576).setTitle(2131034158).setMessage(2131034159).setPositiveButton(2131034160, new DialogInterface.OnClickListener()
    {
      public void onClick(DialogInterface paramDialogInterface, int paramInt)
      {
        Utils.openDonateApp(Calculator.this);
      }
    }).setNegativeButton(2131034161, new DialogInterface.OnClickListener()
    {
      public void onClick(DialogInterface paramDialogInterface, int paramInt)
      {
        Utils.gotoMarket(Calculator.this);
      }
    }).show();
  }

  private void showFeaturedDialog()
  {
    new AlertDialog.Builder(this).setTitle(2131034165).setMessage(2131034166).setPositiveButton(2131034156, new DialogInterface.OnClickListener()
    {
      public void onClick(DialogInterface paramDialogInterface, int paramInt)
      {
        Intent localIntent = new Intent(Calculator.this, FeaturedAppsActivity.class);
        Calculator.this.startActivity(localIntent);
      }
    }).setNegativeButton(2131034157, new DialogInterface.OnClickListener()
    {
      public void onClick(DialogInterface paramDialogInterface, int paramInt)
      {
      }
    }).show();
  }

  private void showRecommendDialog()
  {
    new AlertDialog.Builder(this).setIcon(2130837510).setTitle(2131034154).setMessage(2131034155).setPositiveButton(2131034156, new DialogInterface.OnClickListener()
    {
      public void onClick(DialogInterface paramDialogInterface, int paramInt)
      {
        Utils.openRecommendApp(Calculator.this);
      }
    }).setNegativeButton(2131034157, new DialogInterface.OnClickListener()
    {
      public void onClick(DialogInterface paramDialogInterface, int paramInt)
      {
      }
    }).show();
  }

  private void showUpdateDialog(String paramString)
  {
    new AlertDialog.Builder(this).setMessage(paramString).setPositiveButton(2131034148, new DialogInterface.OnClickListener()
    {
      public void onClick(DialogInterface paramDialogInterface, int paramInt)
      {
        Utils.gotoMarket(Calculator.this);
      }
    }).setNegativeButton(2131034149, new DialogInterface.OnClickListener()
    {
      public void onClick(DialogInterface paramDialogInterface, int paramInt)
      {
      }
    }).show();
  }

  public void cleanList()
  {
    this.listPrice.clear();
    this.listDiscount.clear();
    this.listOriginPrice.clear();
    this.listSaved.clear();
  }

  protected void onActivityResult(int paramInt1, int paramInt2, Intent paramIntent)
  {
    super.onActivityResult(paramInt1, paramInt2, paramIntent);
    if (paramIntent != null)
    {
      if ((paramInt1 == 152) && (paramInt2 == 100))
      {
        this.totalValue = Float.parseFloat(paramIntent.getStringExtra("value").toString());
        this.totalValueButton.setText(Utils.currencyFormater.format(this.totalValue));
        setResult();
      }
      if ((paramInt1 == 153) && (paramInt2 == 100))
      {
        this.taxValue = Float.parseFloat(paramIntent.getStringExtra("value").toString());
        this.taxValueButton.setText(Utils.floatFormater.format(this.taxValue));
        setting.setConfigTax(this.taxValue, this);
        setResult();
      }
    }
  }

  protected void onCreate(Bundle paramBundle)
  {
    super.onCreate(paramBundle);
    Utils.l("on creat");
    setContentView(2130903040);
    this.context = this;
    setView();
    this.mStatusChecker = new DataCollector(this, true);
    checkUpdate();
    int i = setting.getOpenRecommendStat(this);
    if ((i != 2) && (i != 4) && (i == 5))
      showFeaturedDialog();
    setting.setOpenRecommedTime(this, i + 1);
    this.listTax = new ArrayList();
    this.listPrice = new ArrayList();
    this.listOriginPrice = new ArrayList();
    this.listSaved = new ArrayList();
    this.listDiscount = new ArrayList();
  }

  public boolean onCreateOptionsMenu(Menu paramMenu)
  {
    super.onCreateOptionsMenu(paramMenu);
    paramMenu.add(2, 1, 5, getString(2131034131)).setIcon(17301568);
    paramMenu.add(2, 2, 1, getString(2131034130)).setIcon(17301566);
    paramMenu.add(4, 3, 6, getString(2131034129)).setIcon(17301569);
    paramMenu.add(2, 5, 0, getString(2131034133)).setIcon(17301577);
    paramMenu.add(3, 6, 4, getString(2131034153)).setIcon(17301586);
    paramMenu.add(3, 7, 3, getString(2131034158)).setIcon(17301576);
    paramMenu.add(1, 8, 2, getString(2131034164)).setIcon(17301619);
    return true;
  }

  public boolean onOptionsItemSelected(MenuItem paramMenuItem)
  {
    switch (paramMenuItem.getItemId())
    {
    case 1:
      new AlertDialog.Builder(this).setTitle(2131034131).setMessage(2131034138).setPositiveButton(2131034118, new DialogInterface.OnClickListener()
      {
        public void onClick(DialogInterface paramDialogInterface, int paramInt)
        {
        }
      }).setNegativeButton(2131034134, new DialogInterface.OnClickListener()
      {
        public void onClick(DialogInterface paramDialogInterface, int paramInt)
        {
          Intent localIntent = new Intent("android.intent.action.SEND");
          localIntent.putExtra("android.intent.extra.SUBJECT", Calculator.this.getString(2131034136));
          localIntent.putExtra("android.intent.extra.TEXT", Calculator.this.getString(2131034137) + "http://market.android.com/search?q=pname:" + Calculator.this.getPackageName());
          localIntent.setType("text/plain");
          Calculator.this.startActivity(localIntent);
        }
      }).show();
      break;
    case 2:
      Intent localIntent = new Intent("android.intent.action.SENDTO");
      localIntent.setData(Uri.parse("mailto:mars@infolife.mobi"));
      localIntent.putExtra("android.intent.extra.SUBJECT", getString(2131034112) + " Feedback");
      startActivity(localIntent);
      break;
    case 3:
      new AlertDialog.Builder(this).setTitle(2131034129).setMessage(2131034135).setPositiveButton(2131034118, new DialogInterface.OnClickListener()
      {
        public void onClick(DialogInterface paramDialogInterface, int paramInt)
        {
        }
      }).show();
      break;
    case 5:
      startActivity(new Intent(this, setting.class));
      break;
    case 6:
      startActivity(new Intent(this, FeaturedAppsActivity.class));
      break;
    case 7:
      showDonateDialog();
      break;

    case 4:
    }
    return super.onOptionsItemSelected(paramMenuItem);
  }

  public void onPause()
  {
    super.onPause();
    Utils.l("on pause");
    Data.onPause(this);
  }

  public void onProgressChanged(SeekBar paramSeekBar, int paramInt, boolean paramBoolean)
  {
    if (paramSeekBar.getId() == 2131165188)
    {
      this.percentText.setText("  " + paramInt + "% OFF");
      this.percentValue = paramInt;
    }
    setResult();
  }

  public void onResume()
  {
    super.onResume();
    Utils.l("on resume");
    Data.onResume(this);
    setButtonText();
  }

  public void onStartTrackingTouch(SeekBar paramSeekBar)
  {
  }

  public void onStopTrackingTouch(SeekBar paramSeekBar)
  {
  }

  void setAnimation()
  {
    View localView = findViewById(2131165184);
    TranslateAnimation localTranslateAnimation = new TranslateAnimation(localView.getWidth(), 0.0F, 0.0F, 0.0F);
    localTranslateAnimation.setDuration(1200L);
    localTranslateAnimation.setInterpolator(AnimationUtils.loadInterpolator(this, 17432586));
    localTranslateAnimation.setStartOffset(200L);
    localView.startAnimation(localTranslateAnimation);
  }

  void setButtonText()
  {
    this.firstButton.setText("-" + setting.getButton1(this) + "%");
    this.secondButton.setText("-" + setting.getButton2(this) + "%");
    this.thirdButton.setText("+" + setting.getButton3(this) + "%");
    this.forthButton.setText("+" + setting.getButton4(this) + "%");
  }

  void setResult()
  {
    boolean bool = false;
    this.resultValue = (this.totalValue * (100 - this.percentValue) / 100.0F);
    this.savedValue = (this.totalValue - this.resultValue);
    if (this.taxBox.isChecked())
    {
      bool = true;
      this.taxValue = Float.parseFloat(this.taxValueButton.getText().toString());
      this.resultValue += this.resultValue * this.taxValue / 100.0F;
      this.savedValue += this.totalValue * this.taxValue / 100.0F * this.percentValue / 100.0F;
    }
    setting.setTaxStat(Boolean.valueOf(bool), this.context);
    this.savedText.setText(getString(2131034124) + " " + Utils.currencyFormater.format(this.savedValue));
    this.resultText.setText(Utils.currencyFormater.format(this.resultValue));
  }

  void setView()
  {
    this.totalPriceLayout = ((LinearLayout)findViewById(2131165209));
    this.totalSavedLayout = ((LinearLayout)findViewById(2131165207));
    this.percentSeekBar = ((SeekBar)findViewById(2131165188));
    this.percentText = ((TextView)findViewById(2131165187));
    this.resultText = ((TextView)findViewById(2131165184));
    this.savedText = ((TextView)findViewById(2131165185));
    this.totalPriceText = ((TextView)findViewById(2131165210));
    this.totalSavedText = ((TextView)findViewById(2131165208));
    this.taxBox = ((CheckBox)findViewById(2131165200));
    this.totalValueButton = ((Button)findViewById(2131165186));
    this.taxValueButton = ((Button)findViewById(2131165201));
    this.firstButton = ((Button)findViewById(2131165189));
    this.secondButton = ((Button)findViewById(2131165190));
    this.thirdButton = ((Button)findViewById(2131165191));
    this.forthButton = ((Button)findViewById(2131165192));
    this.priceList = ((ListView)findViewById(2131165206));
    this.clearButton = ((Button)findViewById(2131165203));
    this.calculateButton = ((Button)findViewById(2131165202));
    this.addButton = ((ImageButton)findViewById(2131165204));
    this.resultText.setFocusable(true);
    this.resultText.setFocusableInTouchMode(true);
    this.totalValueButton.setFocusable(true);
    this.taxBox.setChecked(setting.getTaxStat(this.context));
    this.taxBox.setOnCheckedChangeListener(this.boxListener);
    this.taxValueButton.setText(String.valueOf(setting.getConfigTax(this)));
    this.taxBox.setText(2131034122);
    this.percentSeekBar.setOnSeekBarChangeListener(this);
    this.firstButton.setOnClickListener(this.buttonListener);
    this.secondButton.setOnClickListener(this.buttonListener);
    this.thirdButton.setOnClickListener(this.buttonListener);
    this.forthButton.setOnClickListener(this.buttonListener);
    this.totalValueButton.setOnClickListener(this.buttonListener);
    this.taxValueButton.setOnClickListener(this.buttonListener);
    this.clearButton.setOnClickListener(this.buttonListener);
    this.calculateButton.setOnClickListener(this.buttonListener);
    if (this.addButton != null)
      this.addButton.setOnClickListener(this.buttonListener);
    setButtonText();
  }
  } 
```

我在块的末尾有一个错误

```
Multiple markers at this line
    - Syntax error, insert "}" to complete 
     ClassBody
    - Syntax error, insert ";" to complete 
     FieldDeclaration
    - Syntax error, insert ";" to complete 
     FieldDeclaration 
```

有什么想法可以解决这个问题吗？我一直在寻找并没有找到任何东西。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T21:23:02.043

哇，你为什么在 findViewById 中使用硬编码的数字？您需要使用 R.id.buttonName 或其他东西，否则它们会不断变得混乱。您几乎需要立即进行更改，否则您将面临无穷无尽的麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T21:44:08.760

添加**;** 在最后一个**}**之后，并在底部的新行中添加**} 。**这应该可以解决您的错误

# c# - OPENROWSET BULK 行为和出错时缺少 ERRORFILE

> ID：11678218
> 
> 赞同：1
> 
> 时间：2012-07-26T21:20:27.203
> 
> 标签：c#, sql-server, sql-server-2008, bulkinsert, openrowset

我在使用 OPENROWSET BULK 时遇到了很大的困难

基本上，如果它尝试将 NULL 插入 NOT NULL 列，则会引发运行时错误。如果它试图将非数字插入到“int”中，则会引发运行时错误。如果我将 varchar(20) 放入 varchar(10) 中，则会引发运行时错误。这个名单还在继续......

我已经指定了一个错误文件，那么为什么不将行放入错误文件中？

如果这是正常行为，那么错误文件中的内容是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T21:29:17.930

ERRORFILE 用于无法从数据文件中读取的行。您引用的所有错误都是未能将成功读取的行插入目标表的错误。没有办法规避这些错误，您必须将正确的数据导入正确的表中。似乎您想要的更有可能是一个成熟的[SSIS](http://msdn.microsoft.com/en-us/library/ms141026.aspx)管道。

# cloud-foundry - 为什么我的 Cloundfoundry 应用程序将 JSP 文件显示为源文件，而不是呈现？

> ID：11678220
> 
> 赞同：0
> 
> 时间：2012-07-26T21:20:37.000
> 
> 标签：cloud-foundry

我使用 Spring 创建了一个 cloundfoundry 应用程序。但是，我的 jsp 文件被呈现为纯文本（好像 Tomcat 没有执行源代码）。浏览器在请求特定 URL 时会显示来源。

文件结构

```
webapps
 -jsp
 -javascripts
 -css
 -WEB-INF 
```

网页.xml：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath*:META-INF/spring/applicationContext*.xml</param-value>
</context-param>

<welcome-file-list>
    <welcome-file>/jsp/index.jsp</welcome-file>
</welcome-file-list>

<!-- Creates the Spring Container shared by all Servlets and Filters -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<!-- Handles Spring requests -->
<servlet>
    <servlet-name>Honesty</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>WEB-INF/spring/webmvc-config.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>Honesty</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

弹簧配置：

```
<!-- Turns on support for mapping requests to Spring MVC @Controller methods
     Also registers default Formatters and Validators for use across all @Controllers -->
<mvc:annotation-driven/>

<context:annotation-config />
<mvc:default-servlet-handler/> 
```

感谢您提供的任何见解。就好像 Tomcat 没有为 JSP 源显示的请求提供服务，而不是 JSP 呈现的页面。

响应标头显示 nginx 作为服务器：

```
Connection:keep-alive
Date:Mon, 30 Jul 2012 03:58:16 GMT
ETag:W/"611-1343620259000"
Keep-Alive:timeout=20
Server:nginx 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T00:56:34.583

你在使用 Spring MVC 吗？我想您将 JSP 放在某个可以访问的资源目录中。想看看你的spring配置文件和你的项目结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T04:22:01.383

问题是我的“/ *”的servlet映射。切换到“/”，现在一切都按预期工作。

# linux - linux内核函数_copy_to_user，想清楚了解

> ID：11678221
> 
> 赞同：0
> 
> 时间：2012-07-26T21:20:38.960
> 
> 标签：linux, linux-kernel, linux-device-driver, virtual-address-space

我正在使用此函数将一些结构复制到内核。但是，问题是我必须复制三个数据结构，它们是更大数据结构的一部分。注意：这 3 个数据结构在更大的数据结构中是连续的。

所以，在我的复制用户函数中，我传递第一个数据结构的指针并给出所有 3 个数据结构的长度。但是，当我进入用户空间并打印第二个数据结构的第一个元素时，它会给出一些其他值。

所以，我做错了什么。作为一个解决方案，我进行了 3 次 copt_to_user 调用，令我惊讶的是它运行良好。这是我进行一次 copy_to_user 调用时的问题。

请让我知道可能是什么原因。

嘿，谢谢大家的回答，这是一个对齐问题，但是，更进一步，如果我想填充内部结构，我该怎么做..？例子-

结构化的{

结构 b;

结构 c; //我想把这个结构做成一个填充的，怎么做？

结构d;

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T15:31:04.957

正如评论中提到的，这似乎真的是一个对齐问题。Gcc 可能会在结构 d 中的结构 a、b 和 c 之间添加一些填充。根据您在用户空间中实例化的方式，这可能是一个问题。您可以强制 gcc 不生成填充，`__atribute__ ((packed))`在您的结构上使用，但除非此结构映射到硬件寄存器，否则这通常是一个坏主意，因为它会在访问该结构的字段时导致更差的性能。

另一个可能的问题是如果您的内核是 64 位而您的用户态程序是 32 位，在这种情况下，您需要使用固定大小的类型来确保具有相同的布局。

# jakarta-ee - 我现在有一个使用 MySQL/Jboss/Tomcat 的基于 java mvc 的网站是什么？

> ID：11678222
> 
> 赞同：0
> 
> 时间：2012-07-26T21:20:38.483
> 
> 标签：jakarta-ee, tomcat, jboss, web

你如何把一个java网站放到互联网上？我开发了一个使用部署在 Jboss 上的 EAR 和部署在 tomcat 上的 WAR。

这是否意味着我实际上必须购买 2 个“托管解决方案”。一个给jboss，一个给tomcat，然后将tomcat链接到我的jboss IP并将我的域名发送到我的tomcat？

与 HTML/PHP/MySQL 网站相比，这相当昂贵。

顺便说一句，为什么我必须将代码放入 EJB 中，为什么不能简单地将其放入 jps 的 bean 中？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:29:40.427

如果您在 EAR 中有 webapp，并且您在 JBoss 上只部署了一个应用程序（显然包括一个 web 容器），那将会简单得多。

即使您保留当前架构，也没有什么会迫使您将这两个应用程序部署在 2 台不同的机器上。

关于 EJB，如果您不知道 EJB 提供什么，我觉得您选择使用 EJB 很奇怪。无论如何，他们提供的主要优势是

*   声明式（和程序化）事务管理
*   分布式事务
*   资源管理（线程和连接池、bean 池等）
*   依赖注入
*   JMS 集成消息驱动 bean
*   声明性（和程序化）安全
*   我可能忘记了一些

# c++ - 英特尔 C++ 编译器无法处理深度模板？

> ID：11678223
> 
> 赞同：1
> 
> 时间：2012-07-26T21:20:59.077
> 
> 标签：c++, expression-templates, icc, marray

我有一个使用[marray](https://github.com/bjoern-andres/marray)库的 C++ 项目。目前，它可以在 Windows 7 x64 上使用 MinGW g++ 4.7 和 msvc2010 以及在 Linux Mint x64 上使用 g++ 4.7 进行编译和运行。我决定尝试一下适用于 Linux 的 Intel C++ compiler v. 12.1.4。它能够编译代码，但是当它尝试执行任何干扰表达式模板的行时（如 c = a + b 其中所有三个项都是矩阵），它会因分段错误而崩溃。此问题会影响应用程序的调试和发布版本。

我还尝试为 marray 库编译单元测试和教程代码，英特尔 C++ 编译代码但如果它有任何表达式模板则无法运行它。英特尔 C++ 是否真的与深度模板一样糟糕，还是我遗漏了什么？我是否需要设置任何特殊的编译器标志才能使模板表达式起作用？或者也许只是我正在使用的特定库有问题，而不是一般的表达式模板技术？

我还尝试在 n 上使用各种各样的 -ftemplate-depth- n 标志设置***到***10 *^ **10***的大得可笑的值，并且在没有分段错误的情况下运行我的应用程序和 marray 单元测试/教程仍然没有运气。

 ***更新：**这是来自上述库的教程-marray 的 gdb 日志，该库在调试模式下使用 icpc 编译。

```
GNU gdb (Ubuntu/Linaro 7.3-0ubuntu2) 7.3-2011.08
Copyright (C) 2011 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-linux-gnu".
For bug reporting instructions, please see:
<http://bugs.launchpad.net/gdb-linaro/>...
Reading symbols from /home/dmitry/SOFT/Development/marray_orig/tutorial-marray...done.
(gdb) l 126
121                 size_t shape[] = {3, 4, 2};
122                 marray::Marray<int> a(shape, shape + 3, 2);
123                 marray::Marray<int> b(shape, shape + 3, 2);
124                 marray::Marray<int> c;
125
126                 ++a;
127                 --a;
128
129                 a += 2;
130                 a -= 2;
(gdb) break 126
Breakpoint 1 at 0x452de8: file /home/dmitry/SOFT/Development/marray_orig/marray/src/tutorial/tutorial.cxx, line 126.
(gdb) run
Starting program: /home/dmitry/SOFT/Development/marray_orig/tutorial-marray 
A(c,r,0) =
1 0 0 
0 0 0 
0 0 0 
0 0 0 

A(c,r,1) =
0 0 0 
0 0 0 
0 0 0 
0 0 2 

1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 2 
1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 2 

Breakpoint 1, main () at /home/dmitry/SOFT/Development/marray_orig/marray/src/tutorial/tutorial.cxx:126
126                 ++a;
(gdb) next
127                 --a;
(gdb) next
129                 a += 2;
(gdb) next
130                 a -= 2;
(gdb) next
131                 a /= 2;
(gdb) next
132                 a *= 2;
(gdb) next
134                 c = a + b;
(gdb) next

Program received signal SIGSEGV, Segmentation fault.
0x0000000000420fcf in marray::ViewExpression<marray::View<int, false, std::allocator<unsigned long> >, int>::operator marray::View<int, false, std::allocator<unsigned long> > const& (this=0x7fffffffcd88)
at /home/dmitry/SOFT/Development/marray_orig/marray/include/marray/marray.hxx:5409
5409            { return static_cast<const E&>(*this); }
(gdb) 
```

看起来问题一般不是源于表达式模板技术，数字数组算术工作正常。当我尝试将一个数组添加到另一个数组时，就会出现问题。

**更新。2：**实际上整个事情看起来很像[这里](https://stackoverflow.com/questions/9738975/crtp-compiler-dependent-issue-with-expression-template)提到的问题。解决方案应该是重写 operator E&() { return static_cast(*this); } 变成类似 E& get_ref() { return static_cast(*this); 和 const 引用相同。当然，在代码中改变这些东西的用法。我会尽快尝试并报告结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T12:14:13.840

该问题与[此处](https://stackoverflow.com/questions/9738975/crtp-compiler-dependent-issue-with-expression-template)报告的问题类似。问题的实际原因是英特尔 C++ 编译器生成的代码处理如下表达式：

```
operator E&() 
{ 
    return static_cast<E&>(*this); 
} 
```

作为此运算符的递归调用。一个简单的解决方法是将运算符更改为类似的方法

```
E& get_ref()
{
    return static_cast<E&>(*this);
} 
```

缺点是您必须更改使用该运算符的每一行代码。[幸运的是，使用提到的marray](https://github.com/bjoern-andres/marray)库并不太难，所以现在我的应用程序以及该库的教程和单元测试都像英特尔 C++ 编译器的魅力一样工作。*

# ruby - Xcode 4.4 + MacRuby =“找不到macruby.h”（OS X 10.8 Mountain Lion）

> ID：11678226
> 
> 赞同：10
> 
> 时间：2012-07-26T21:21:19.293
> 
> 标签：ruby, xcode, macos, macruby, osx-mountain-lion

尝试在 OS X 10.8 Mountain Lion 的 Xcode 4.4 上的 MacRuby 中运行基本的“Hello world”应用程序时出现以下错误：

> “找不到 macruby.h”

如何解决这个问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-26T21:35:35.493

尝试添加`/Library/Frameworks`到框架搜索路径。确保您也勾选了该复选框。

![截屏](../Images/6ffb3da7cf041a1154b57b8585e306ff.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-15T07:46:57.807

解决此问题的另一种方法是在 MacRuby 的 Xcode 默认搜索路径中添加符号链接。

打开终端并插入命令：

`sudo ln -s /Library/Frameworks/MacRuby.framework \ /Applications/Xcode.app/Contents/Developer/Library/Frameworks/MacRuby.framework`

# jquery - 悬停功能工作时悬停

> ID：11678227
> 
> 赞同：0
> 
> 时间：2012-07-26T21:21:19.560
> 
> 标签：jquery

如果我在同一个 div 上移动鼠标，当我的 div 向下或向上滑动时，悬停效果会发生第二次（甚至更多），如果该功能现在正在工作，我该怎么做它不应该重新启动，直到我采取鼠标移开并再次悬停？​</p>

```
<div id="hover">Hover on me<div id="hidden">You hovered!!</div></div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​

$(document).ready(function () {
$('#hover').show();
$('#hidden').hide();    
$('#hover').hover(function () {
    $('#hidden').slideDown(100);
    }, function () {
        $('#hidden').slideUp(100);
    });
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:25:55.030

**您应该使用 jQuery`.stop()`** ( [API](http://api.jquery.com/stop/) ) 请参阅[此处的 jsfiddle](http://jsfiddle.net/DWZQ7/9/)。

你想要做的是稍微改变你的悬停功能。

加入`.stop()`

```
$('#hover').hover(
    function () {
        $('#hidden').slideDown(100);
    }, function () {
        $('#hidden').stop().slideUp(100);
    }
); 
```

# delphi - 如何在不使用外部 DLL 或运行时压缩和加密大文件？

> ID：11678228
> 
> 赞同：6
> 
> 时间：2012-07-26T21:21:21.493
> 
> 标签：delphi, encryption, compression, components

我正在寻找一种组件或其他技术来将多个大文件（大小超过 4gb 的文件，因此不适合 win32 进程可用的内存）压缩和加密为单个文件。我希望加密非常强大（256 位 AES 或更好），但压缩对我来说并不重要。

现在，我正在使用`TJvZlibMultiple`创建自己的非 Zip 文件格式的组件，但我必须创建存档，然后在单独的步骤中对其进行加密（我现在正在使用 DcpCrypt）。我想在一次通过中做同样的事情，使用流，而不使用等于文件大小的内存（ergo，压缩和加密应该发生在流中，而不是在内存中）。

我已经看到并且不想使用任何需要像 7zip dll 这样的外部 DLL 的东西。商业工具是可以的，或者任何代码或示例 Delphi 源代码，但我正在寻找在 Delphi 中的彻底实现，而不是在 dll 中导入和调用函数的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T21:43:04.570

看看[DIZipWriter](http://www.yunqa.de/delphi/doku.php/products/zipwriter/index)。

支持 256 位 AES、流和压缩。

更新：版本 5 声称支持大型（64 位）条目，[`DIZipWriter History`](http://www.yunqa.de/delphi/doku.php/products/zipwriter/history).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:17:33.717

你可以看看 ComponentAce 的 FlexCompress：http: [//www.componentace.com/compression_component_compression_delphi_encryption_delphi_flexcompress.htm](http://www.componentace.com/compression_component_compression_delphi_encryption_delphi_flexcompress.htm)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-22T14:05:32.233

检查 FlexCompress：

FlexCompress 是一个压缩 delphi 组件，旨在创建具有强加密和比 WinZip 和 RAR 更好的压缩率的档案。本机 VCL，无 DLL，无 OCX，为文件、缓冲区、流和字符串提供压缩，支持内存存档，压缩大于 4 Gb 的大文件，内存消耗低，还有许多其他有用的功能。

[http://www.componentace.com/flexcompress_features.htm](http://www.componentace.com/flexcompress_features.htm)

通过这个链接：[http ://delphi.about.com/od/toppicks/tp/delphi_zip.htm](http://delphi.about.com/od/toppicks/tp/delphi_zip.htm)

# windows-runtime - 如何在 WinRT 上使用 Json.NET 序列化异常？

> ID：11678234
> 
> 赞同：1
> 
> 时间：2012-07-26T21:21:40.047
> 
> 标签：windows-runtime, json.net

这在经典 .NET 上运行良好：

```
string json = JsonConvert.SerializeObject(new Exception("Test")); 
```

但它在 WinRT (RP) 上失败了：

`Error getting value from 'TargetSite' on 'System.Exception'.
The API 'System.Exception.get_TargetSite()' cannot be used on the current platform. See http://go.microsoft.com/fwlink/?LinkId=248273 for more information.`

编辑：我还需要通过电线传输异常并在后端对其进行反序列化。

有人有任何解决方法吗？

# java - 使用 CsvBeanReader 读取具有可变列数的 CSV 文件

> ID：11678238
> 
> 赞同：9
> 
> 时间：2012-07-26T21:22:00.917
> 
> 标签：java, csv, supercsv

所以我正在解析一个 .csv 文件。我在 StackOverflow 的某个地方听取了另一个线程的建议并下载了 SuperCSV。我终于得到了几乎所有的工作，但现在我遇到了一个似乎很难修复的错误。

出现此问题的原因是最后两列数据可能已填充，也可能未填充。这是一个 .csv 文件的示例，其中第一行缺少最后一列，第二行完全完整：

> 2012:07:25,11:48:20,922,"uLog.exe","",按键,1246,341,-1.00,-1.00,1.00,Shift 2012:07:25,11:48:21,094," uLog.exe","",按键,1246,341,-1.00,-1.00,1.00,b,Shift

根据我对[Super CSV Javadoc](http://supercsv.sourceforge.net/javadoc/)的理解，如果列数可变，则无法使用[CsvBeanReader](http://supercsv.sourceforge.net/javadoc/org/supercsv/io/CsvBeanReader.html)填充 Java Bean 。这看起来真的很愚蠢，因为我觉得在初始化 Bean 时应该允许这些缺失的列为 null 或其他一些默认值。

作为参考，这是我的解析器的完整代码：

```
public class ULogParser {

String uLogFileLocation;
String screenRecorderFileLocation;

private static final CellProcessor[] cellProcessor = new CellProcessor[] {
    new ParseDate("yyyy:MM:dd"),
    new ParseDate("HH:mm:ss"),
    new ParseDate("SSS"),
    new StrMinMax(0, 100),
    new StrMinMax(0, 100),
    new StrMinMax(0, 100),
    new ParseInt(),
    new ParseInt(),
    new ParseDouble(),
    new ParseDouble(),
    new ParseDouble(),
    new StrMinMax(0, 100),
    new StrMinMax(0, 100),
};

public String[] header = {"Date", "Time", "Msec", "Application", "Window", "Message", "X", "Y", "RelDist", "TotalDist", "Rate", "Extra1", "Extra2"}; 

public ULogParser(String uLogFileLocation, String screenRecorderFileLocation)
{
    this.uLogFileLocation = uLogFileLocation;
    this.screenRecorderFileLocation = screenRecorderFileLocation;
}

public void parse()
{
    try {
        ICsvBeanReader reader = new CsvBeanReader(new BufferedReader(new FileReader(uLogFileLocation)), CsvPreference.STANDARD_PREFERENCE);
        reader.getCSVHeader(false); //parse past the header
        Entry entry;
        entry = reader.read(Entry.class, header, cellProcessor);
        System.out.println(entry.Application);
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public void sendToDB()
{
    Query query = new Query();
}
} 
```

以及 Entry 类的代码：

```
public class Entry
{
private Date Date;
private Date Time;
private Date Msec;
private String Application;
private String Window;
private String Message;
private int X;
private int Y;
private double RelDist;
private double TotalDist;
private double Rate;
private String Extra1;
private String Extra2;

public Date getDate() { return Date; }
public Date getTime() { return Time; }
public Date getMsec() { return Msec; }
public String getApplication() { return Application; }
public String getWindow() { return Window; }
public String getMessage() { return Message; }
public int getX() { return X; }
public int getY() { return Y; }
public double getRelDist() { return RelDist; }
public double getTotalDist() { return TotalDist; }
public double getRate() { return Rate; }
public String getExtra1() { return Extra1; }
public String getExtra2() { return Extra2; }

public void setDate(Date Date) { this.Date = Date; }
public void setTime(Date Time) { this.Time = Time; }
public void setMsec(Date Msec) { this.Msec = Msec; }
public void setApplication(String Application) { this.Application = Application; }
public void setWindow(String Window) { this.Window = Window; }
public void setMessage(String Message) { this.Message = Message; }
public void setX(int X) { this.X = X; }
public void setY(int Y) { this.Y = Y; }
public void setRelDist(double RelDist) { this.RelDist = RelDist; }
public void setTotalDist(double TotalDist) { this.TotalDist = TotalDist; }
public void setRate(double Rate) { this.Rate = Rate; }
public void setExtra1(String Extra1) { this.Extra1 = Extra1; }
public void setExtra2(String Extra2) { this.Extra2 = Extra2; }

public Entry(){}
} 
```

我收到的异常（请注意，这与我上面的示例不同，缺少最后两列）：

```
线程“主”中的异常值数组（大小 12）必须与处理器数组（大小 13）匹配：您可能正在读取列数与指定的单元处理器数不同的 CSV 行上下文：行：2 列：0生线：
[2012:07:25, 11:48:05, 740, uLog.exe, , 开始记录, -1, -1, -1.00, -1.00, -1.00, ]
 违规处理器：null
    在 org.supercsv.util.Util.processStringList（未知来源）
    在 org.supercsv.io.CsvBeanReader.read（未知来源）
    在处理.ULogParser.parse(ULogParser.java:59)
    在 ui.ParseImplicitData.main(ParseImplicitData.java:15)
```

是的，编写所有这些 getter 和 setter 是一件很痛苦的事情。另外，我很抱歉，我在使用 SuperCSV 时可能没有完美的约定（例如，如果您只想要未修改的字符串，则使用 CellProcessor），但您明白了。另外，这段代码显然不完整。现在，我只是想成功检索一行数据。

在这一点上，我想知道使用 CsvBeanReader 是否可以用于我的目的。如果不是，我有点失望，因为 CsvListReader（我会发布超链接，但 StackOverflow 也不允许我，也很愚蠢）就像根本不使用 API 一样简单，只使用 Scanner.next ()。

任何帮助，将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T05:56:17.567

**编辑：**[Super CSV 2.0.0-beta-1 的](http://supercsv.sourceforge.net/release_notes.html)更新

请注意，Super CSV 2.0.0-beta-1 中的 API 已更改（代码示例基于 1.52）。所有读者的`getCSVHeader()`方法是现在`getHeader()`（与`writeHeader`作家一致）。

此外，`SuperCSVException`已重命名为`SuperCsvException`.

* * *

**编辑：**超级 CSV 2.1.0 的更新

从 2.1.0 版开始，可以在使用新方法读取一行 CSV*后执行单元处理器。*`executeProcessors()`有关更多信息，请参阅项目网站上的[此示例。](http://supercsv.sourceforge.net/examples_reading_variable_cols.html)请注意，这仅与 相关`CsvListReader`，因为它是唯一允许可变列长度的阅读器。

* * *

你是对的 -`CsvBeanReader`不支持列数可变的 CSV 文件。根据大多数 CSV 规范（包括[RFC 4180](https://www.rfc-editor.org/rfc/rfc4180)），每行的列数必须相同。

出于这个原因（作为 Super CSV 开发人员），我不愿意将此功能添加到 Super CSV。如果您能想到一种优雅的添加方式，请随时在项目的 SourceForge 站点上提出建议。这可能意味着一个新的阅读器扩展`CsvBeanReader`：它必须将阅读和映射/处理分成两个单独的方法（除非你知道有多少列，否则你不能对 bean 的字段进行任何处理或映射） .

## 简单的解决方案

对此的简单解决方案（如果您可以控制正在使用的 CSV 文件）是在编写 CSV 文件时简单地添加一个空白列（示例中的第一行末尾有一个逗号 - 表示最后一列为空）。这样，您的 CSV 文件将是有效的（每行的列数相同）并且您可以`CsvBeanReader`像现在一样使用。

如果那不可能，那么*一切都不会丢失*！

## 花式解决方案

您可能已经意识到，`CsvBeanReader`使用名称映射将 CSV 文件中的每一列与 bean 中的一个字段相关联，并使用 CellProcessor 数组来处理每一列。换句话说，如果你想使用它，你必须知道有多少列（以及它们代表什么）。

`CsvListReader`另一方面，它非常原始，可以读取不同长度的行（因为它不需要处理或映射它们）。

因此，您可以通过使用两个阅读器并行读取文件来组合`CsvBeanReader`with的所有功能`CsvListReader`（如下例所示）：使用`CsvListReader`来确定有多少列，并`CsvBeanReader`进行处理/映射。

请注意，这假设它只是可能不存在的birthDate 列（即，如果您无法分辨缺少哪一列，它将不起作用）。

```
package example;

import java.io.StringReader;
import java.util.Date;

import org.supercsv.cellprocessor.ParseDate;
import org.supercsv.cellprocessor.ift.CellProcessor;
import org.supercsv.exception.SuperCSVException;
import org.supercsv.io.CsvBeanReader;
import org.supercsv.io.CsvListReader;
import org.supercsv.io.ICsvBeanReader;
import org.supercsv.io.ICsvListReader;
import org.supercsv.prefs.CsvPreference;

public class VariableColumns {

    private static final String INPUT = "name,birthDate,city\n"
        + "John,New York\n" 
        + "Sally,22/03/1974,London\n" 
        + "Jim,Sydney";

    // cell processors
    private static final CellProcessor[] NORMAL_PROCESSORS = 
    new CellProcessor[] {null, new ParseDate("dd/MM/yyyy"), null };
    private static final CellProcessor[] NO_BIRTHDATE_PROCESSORS = 
    new CellProcessor[] {null, null };

    // name mappings
    private static final String[] NORMAL_HEADER = 
    new String[] { "name", "birthDate", "city" };
    private static final String[] NO_BIRTHDATE_HEADER = 
    new String[] { "name", "city" };

    public static void main(String[] args) {

        // using bean reader and list reader together (to read the same file)
        final ICsvBeanReader beanReader = new CsvBeanReader(new StringReader(
                INPUT), CsvPreference.STANDARD_PREFERENCE);
        final ICsvListReader listReader = new CsvListReader(new StringReader(
                INPUT), CsvPreference.STANDARD_PREFERENCE);

        try {
            // skip over header
            beanReader.getCSVHeader(true);
            listReader.getCSVHeader(true);

            while (listReader.read() != null) {

                final String[] nameMapping;
                final CellProcessor[] processors;

                if (listReader.length() == NORMAL_HEADER.length) {
                    // all columns present - use normal header/processors
                    nameMapping = NORMAL_HEADER;
                    processors = NORMAL_PROCESSORS;

                } else if (listReader.length() == NO_BIRTHDATE_HEADER.length) {
                    // one less column - birth date must be missing
                    nameMapping = NO_BIRTHDATE_HEADER;
                    processors = NO_BIRTHDATE_PROCESSORS;

                } else {
                    throw new SuperCSVException(
                            "unexpected number of columns: "
                                    + listReader.length());
                }

                // can now use CsvBeanReader safely 
                // (we know how many columns there are)
                Person person = beanReader.read(Person.class, nameMapping,
                        processors);

                System.out.println(String.format(
                        "Person: name=%s, birthDate=%s, city=%s",
                        person.getName(), person.getBirthDate(),
                        person.getCity()));

            }
        } catch (Exception e) {
            // handle exceptions here
            e.printStackTrace();
        } finally {
            // close readers here
        }
    }

    public static class Person {

        private String name;
        private Date birthDate;
        private String city;

        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }

        public Date getBirthDate() {
            return birthDate;
        }

        public void setBirthDate(Date birthDate) {
            this.birthDate = birthDate;
        }

        public String getCity() {
            return city;
        }

        public void setCity(String city) {
            this.city = city;
        }
    }

} 
```

我希望这有帮助。

哦，你的类中的字段是否有任何理由`Entry`不遵循正常的命名约定（camelCase）？如果您将`header`数组更新为使用驼峰式，那么您的字段也可以是驼峰式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T22:04:55.090

好吧，SuperCSV 是开源的。如果您想添加功能，例如处理带有可变数量的尾随字段的输入，您基本上有两种选择：

1.  在 SourceForge 网站上发布支持请求，希望作者同意并有时间去做
2.  下载源代码，根据自己的喜好进行更改，并将更改贡献给项目。

这就是开源的工作方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-16T03:05:51.393

使用[uniVocity-parsers](https://github.com/uniVocity/univocity-parsers/)，您可以将具有不同列数的 CSV 文件映射到 Java bean。使用注释：

```
class TestBean {

// if the value parsed in the quantity column is "?" or "-", it will be replaced by null.
@NullString(nulls = { "?", "-" })
// if a value resolves to null, it will be converted to the String "0".
@Parsed(defaultNullRead = "0")
private Integer quantity;   // The attribute type defines which conversion will be executed when processing the value.
// In this case, IntegerConversion will be used.
// The attribute name will be matched against the column header in the file automatically.

@Trim
@LowerCase
// the value for the comments attribute is in the column at index 4 (0 is the first column, so this means fifth column in the file)
@Parsed(index = 4)
private String comments;

// you can also explicitly give the name of a column in the file.
@Parsed(field = "amount")
private BigDecimal amount;

@Trim
@LowerCase
// values "no", "n" and "null" will be converted to false; values "yes" and "y" will be converted to true
@BooleanString(falseStrings = { "no", "n", "null" }, trueStrings = { "yes", "y" })
@Parsed
private Boolean pending;
...
} 
```

要将 CSV 解析为`TestBean`实例列表：

```
// BeanListProcessor converts each parsed row to an instance of a given class, then stores each instance into a list.
BeanListProcessor<TestBean> rowProcessor = new BeanListProcessor<TestBean>(TestBean.class);
CsvParserSettings parserSettings = new CsvParserSettings();
parserSettings.setRowProcessor(rowProcessor);
//Uses the first valid row of the CSV to assign names to each column
parserSettings.setHeaderExtractionEnabled(true);

CsvParser parser = new CsvParser(parserSettings);
parser.parse(new FileReader(yourFile));

// The BeanListProcessor provides a list of objects extracted from the input.
List<TestBean> beans = rowProcessor.getBeans(); 
```

披露：我是这个库的作者。它是开源和免费的（Apache V2.0 许可证）。

# javascript - 使用 JavaScript/jQuery 检查 HTML 表中正在更新的列

> ID：11678239
> 
> 赞同：-1
> 
> 时间：2012-07-26T21:22:05.347
> 
> 标签：javascript, html-table

我正在开发一个允许用户更新 html 表中的文本的项目。唯一的事情是，我需要知道表格的哪些列正在被编辑以使程序相应地采取行动。我已经尝试了一些东西，但没有一个解决方案是实用的，而且太慢了。有谁知道解决这个问题的好方法？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:25:47.297

我假设您在表格单元格中使用 input 或 textarea 标签？如果是这样，您可以使用 jquery 库将处理程序绑定到生成的“keyup”事件，在该处理程序中，您可以查询引发事件的元素的属性。使用算法为行和列设置唯一的 id 或类可帮助您识别要查找的位置。然后，您可以向保存计算值的服务器发出 ajax 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T21:27:09.990

似乎对许多人来说这是答案：

```
$('td').click(function(){
   var col = $(this).parent().children().index($(this));
   var row = $(this).parent().parent().children().index($(this).parent());
   alert('Row: ' + row + ', Column: ' + col);
}); 
```

按照这里：[jQuery中的表格行号和列号](https://stackoverflow.com/questions/788225/table-row-and-column-number-in-jquery)

# cakephp - Meio 上传严格错误

> ID：11678249
> 
> 赞同：2
> 
> 时间：2012-07-26T21:23:08.267
> 
> 标签：cakephp, meio-upload

```
Strict (2048): Declaration of MeioUploadBehavior::setup() should be compatible with ModelBehavior::setup(Model $model, $config = Array) [APP/Plugin/MeioUpload/Model/Behavior/MeioUploadBehavior.php, line 26]

Strict (2048): Declaration of MeioUploadBehavior::beforeValidate() should be compatible with ModelBehavior::beforeValidate(Model $model) [APP/Plugin/MeioUpload/Model/Behavior/MeioUploadBehavior.php, line 26]

Strict (2048): Declaration of MeioUploadBehavior::beforeSave() should be compatible with ModelBehavior::beforeSave(Model $model) [APP/Plugin/MeioUpload/Model/Behavior/MeioUploadBehavior.php, line 26]

Strict (2048): Declaration of MeioUploadBehavior::afterSave() should be compatible with ModelBehavior::afterSave(Model $model, $created) [APP/Plugin/MeioUpload/Model/Behavior/MeioUploadBehavior.php, line 26]

Strict (2048): Declaration of MeioUploadBehavior::beforeDelete() should be compatible with ModelBehavior::beforeDelete(Model $model, $cascade = true) [APP/Plugin/MeioUpload/Model/Behavior/MeioUploadBehavior.php, line 26]

Strict (2048): Declaration of MeioUploadBehavior::afterDelete() should be compatible with ModelBehavior::afterDelete(Model $model) [APP/Plugin/MeioUpload/Model/Behavior/MeioUploadBehavior.php, line 26] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T06:12:07.753

的方法签名`MeioUploadBehavior`必须与类的方法签名相同`[ModelBehavior](http://api.cakephp.org/view_source/model-behavior)`。

例如，方法的方法签名`afterDelete`必须从 更改`function afterDelete(&$model)`为`function afterDelete(Model $model)`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-24T23:54:59.140

更改文件 MeioUploadBehavior

```
function beforeValidate(Model $model)
function beforeSave(Model $model)
function afterSave(Model $model, $created) 
```

经过：

```
function beforeValidate(Model $model, $options = array())
function beforeSave(Model $model, $options = array())
function afterSave(Model $model, $created, $options = array()) 
```

此更正是由于 CakePHP 版本所做的更改。

问候

@jvo_chile

# java - 如何为选定的日期和时间设置闹钟？

> ID：11678264
> 
> 赞同：2
> 
> 时间：2012-07-26T21:24:31.737
> 
> 标签：java, android

我有这段代码，我可以在其中一次从日期选择器和时间选择器中设置时间和日期：

```
 private void dialoguetime() {

    final Dialog dialog = new Dialog(this);
    dialog.setContentView(R.layout.custom_dialogue);
    dialog.setCancelable(true);
    dialog.setTitle("This is Dialog 1");
    dialog.show();

    TimePicker time_picker = (TimePicker) dialog
            .findViewById(R.id.timePicker1);
    hours = time_picker.getCurrentHour();
    minute = time_picker.getCurrentMinute();
    time_picker.setOnTimeChangedListener(new OnTimeChangedListener() {
        public void onTimeChanged(TimePicker view, int hourOfDay,
                int minutes) {
            // TODO Auto-generated method stub
            // Toast.makeText(CustomDialog.this,
            // "hourOfDay = "+hourOfDay+"minute = "+minute , 1000).show();
            hours = hourOfDay;
            minute = minutes;
        }
    });

    final DatePicker date_picker = (DatePicker) dialog
            .findViewById(R.id.datePicker1);
    Button btn = (Button) dialog.findViewById(R.id.button2);
    btn.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            xDate = date_picker.getYear() + "-"+ (date_picker.getMonth() + 1) + "-"+ date_picker.getDayOfMonth() + " " + hours+ ":" + minute + ":00";
            Toast.makeText(
                    getApplicationContext(),
                    xDate, Toast.LENGTH_LONG)
                    .show();
            dialog.cancel();
        }

    }

    );

} 
```

从这里我可以得到一个像这样的日期格式的字符串`yyyy-mm-dd hh:mm:ss`，现在我想向该选定时间的用户发出警报（作为警报）。我为此使用了警报管理器，但它不允许我选择那个日期？

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T15:54:32.063

如果您查看 AlarmManager 的 API (http://developer.android.com/reference/android/app/AlarmManager.html)，您可以看到该方法

```
set() 
```

需要以下参数：

```
public void set (int type, long triggerAtMillis, PendingIntent operation) 
```

在哪里

```
int type = One of ELAPSED_REALTIME, ELAPSED_REALTIME_WAKEUP, RTC or RTC_WAKEUP.
long triggerAtMillis = time in milliseconds that the alarm should go off, using the appropriate clock (depending on the alarm type).
PendingIntent operation = Action to perform when the alarm goes off 
```

所以基本上你应该做的是获取所选日期（DateFormat.parse() 以将日期格式的字符串解析为日期）和当前日期之间的时间。像这样的东西：

```
Date now = new Date();
SimpleDateFormat format = new SimpleDateFormat("yyyy-mm-dd hh:mm:ss");
Date parsedDate = format.parse(YOUR_PICKED_DATE_AS_STRING);
long alertTime = parsedDate.getTime() - now.getTime();

Intent someIntent = new Intent(getApplicationContext(), YourClass.class);
PendingIntent pending = PendingIntent.getBroadcast(getApplicationContext(), 0, someIntent, 0);

AlarmManager manager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
manager.set(AlarmManager. 
```

# joomla2.5 - Virtuemart，结帐前强制用户注册/登录

> ID：11678266
> 
> 赞同：0
> 
> 时间：2012-07-26T21:24:49.630
> 
> 标签：joomla2.5, virtuemart

我正在使用 VirtueMart 2.0 和 Joomla 2.5 创建一个站点。任何人都可以将产品添加到购物车，但我想强制用户在进入“购物车页面/Chekout 页面”之前登录/注册。有人知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T22:11:36.270

在 Virtuemart 配置面板的“结帐”选项卡上，您需要设置 2 个复选框：

1.  结帐时，要求注册
2.  只有注册用户才能结帐

# c# - 从 ContinueWith 抛出异常

> ID：11678267
> 
> 赞同：10
> 
> 时间：2012-07-26T21:24:54.663
> 
> 标签：c#, visual-studio-2010, task-parallel-library

我正在尝试使用`ContinueWith()`. 如果我只是从继续操作中抛出，事情似乎可以工作，但我的调试器声称异常未处理。我做错了什么还是这是 Visual Studio 的问题？有没有更干净的方法来做到这一点，或者有一种方法可以解决我的调试器停止最终处理的异常的问题？

下面的测试通过并打印“按预期捕获包装异常”，但是当我调试它时，该`throw new CustomException`行显示为“用户代码未处理”。

```
var task = DoWorkAsync().ContinueWith(t => {
    throw new CustomException("Wrapped", t.Exception.InnerException);  // Debugger reports this unhandled
}, TaskContinuationOptions.OnlyOnFaulted | TaskContinuationOptions.ExecuteSynchronously);

try {
    task.Wait();
    Assert.Fail("Expected work to fail");
} catch (AggregateException ag) {
    if (!(ag.InnerException is CustomException))
        throw;
}
Console.WriteLine("Caught wrapped exception as expected"); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-19T22:17:12.290

启用“仅我的代码”后，Visual Studio 在某些情况下会在引发异常的行中断并显示一条错误消息，指出“用户代码未处理异常”。这个错误是良性的。您可以按 F5 继续并查看这些示例中演示的异常处理行为。为防止 Visual Studio 在出现第一个错误时中断，只需取消选中“工具”、“选项”、“调试”、“常规”下的“仅我的代码”复选框。

来自[http://msdn.microsoft.com/en-us/library/dd997415.aspx](http://msdn.microsoft.com/en-us/library/dd997415.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-26T21:33:19.673

您似乎没有用延续来“包装”异常，您似乎是在延续中抛出异常。如果 DoWorkAsync 可以引发异常，我将继续“包装”它，如下所示：

```
DoWorkAsync().ContinueWith(t=>{
 Console.WriteLine("Error occurred: " + t.Exception);
}, TaskContinuationOptions.OnlyOnFaulted); 
```

或者，如果你想在异步方法之外“处理”异常，你可以这样做：

```
var task = DoWorkAsync();

task.Wait();
if(task.Exception != null)
{
  Console.WriteLine("Error occurred: " + task.Exception);
} 
```

如果要转换抛出的异常，可以执行以下操作：

```
var task = DoWorkAsync().ContinueWith(t=>{
 if(t.Exception.InnerExceptions[0].GetType() == typeof(TimeoutException))
 {
     throw new BackoffException(t.Exception.InnerExceptions[0]);
 }
}, TaskContinuationOptions.OnlyOnFaulted); 
```

你可以这样处理`BackoffException`：

```
if(task.IsFaulted)
{
   Console.WriteLine(task.Exception.InnerExceptions[0]);
   // TODO: check what type and do something other than WriteLine.
} 
```

# sql - 在 WHERE 语句中使用子查询的别名

> ID：11678269
> 
> 赞同：7
> 
> 时间：2012-07-26T21:25:16.683
> 
> 标签：sql, sql-server, sql-server-2008, subquery

我正在尝试使用在 SELECT 中创建的别名，但在 WHERE 语句中。我知道它不起作用，我只是在另一个 SO 问题中读到了为什么。

但我的问题是：在不重复子查询的情况下，我应该采取什么其他解决方案来完成这项工作？

```
SELECT p.PatientID, p.PatientType, p.AccountNumber, p.FirstName + ' ' + p.LastName PatientFullName, p.CreatedDate,
DATEDIFF(hour, p.CreatedDate, GETDATE()) TotalTime,
(SELECT AVG(BGValue) FROM BloodGlucose WHERE PatientID = p.PatientID) AvgBG
FROM Patients p
WHERE AvgBG > 60; 
```

我知道这有效：

```
SELECT p.PatientID, p.PatientType, p.AccountNumber, p.FirstName + ' ' + p.LastName PatientFullName, p.CreatedDate,
DATEDIFF(hour, p.CreatedDate, GETDATE()) TotalTime,
(SELECT AVG(BGValue) FROM BloodGlucose WHERE PatientID = p.PatientID) AvgBG
FROM Patients p
WHERE (SELECT AVG(BGValue) FROM BloodGlucose WHERE PatientID = p.PatientID) > 60; 
```

但我不想重复那个子查询。而且我很确定它在性能方面不是很明智，所以这就是我在这里寻求更好解决方案的原因。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-26T21:31:54.787

尝试改用派生表。

```
SELECT p.PatientID, p.PatientType, p.AccountNumber, p.FirstName + ' ' + p.LastName PatientFullName, p.CreatedDate, DATEDIFF(hour, p.CreatedDate, GETDATE()) TotalTime, bg.AvgBG 
FROM Patients p 
JOIN (SELECT PatientID, AVG(BGValue) AvgBG   FROM BloodGlucose group by PatientID ) BG
    ON BG.PatientID = p.PatientID 
WHERE AvgBG > 60; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T21:33:29.390

WHERE 子句中的别名只能来自 FROM 子句。这是一种重写查询的方法：

```
SELECT p.PatientID, p.PatientType, p.AccountNumber,
       p.FirstName + ' ' + p.LastName as PatientFullName, p.CreatedDate,
       DATEDIFF(hour, p.CreatedDate, GETDATE()) TotalTime,
       av.AvgBG
FROM Patients p join
     (SELECT PatientId, AVG(BGValue) as AvgBG
      FROM BloodGlucose
      group by PatientID
     ) av
     on p.PatientId = av.PatientId
WHERE av.AvgBG > 60; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T21:34:34.593

```
SELECT p.PatientID, p.PatientType, p.AccountNumber, p.FirstName + ' ' + p.LastName PatientFullName, p.CreatedDate, DATEDIFF(hour, p.CreatedDate, GETDATE()) TotalTime, bg.AvgBG  
FROM Patients p  
outer apply (SELECT PatientID, AVG(BGValue) AvgBG   
FROM BloodGlucose where PatientID = p.PatientID  
 group by PatientID ) BG 
 WHERE AvgBG > 60; 
```

这也应该很快工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T21:31:36.737

```
SELECT p.PatientID, p.PatientType, p.AccountNumber, p.FirstName p.LastName PatientFullName, p.CreatedDate,
DATEDIFF(hour, p.CreatedDate, GETDATE()) TotalTime, a.AvgBG
FROM Patients p,
(SELECT PatientID, AVG(BGValue) AvgBG
  FROM BloodGlucose
group by PatientID
having AVG(BGValue) > 60) a
where p.PatientID = a.PatientID 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T21:32:37.257

您可以尝试在标准 SQL 中使用*WITH*子句。

```
WITH Subquery AS
(
    Your Code
) 
```

然后你的代码

```
SELECT ....
Subquery As sq
From Patients p
WHERE(subquery)>60 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T21:33:32.653

使用公用表表达式：

```
;WITH CTE (PatientID, PatientType, AccountNumber, PatientFullName, CreatedDate, TotalTime, AvgBG) AS (
    SELECT p.PatientID, p.PatientType, p.AccountNumber, p.FirstName + ' ' + p.LastName PatientFullName, p.CreatedDate,
    DATEDIFF(hour, p.CreatedDate, GETDATE()) TotalTime,
    (SELECT AVG(BGValue) FROM BloodGlucose WHERE PatientID = p.PatientID) AvgBG
    FROM Patients p
)

SELECT PatientID, PatientType, AccountNumber, PatientFullName, CreatedDate, TotalTime, AvgBG
FROM CTE
WHERE AvgBG > 60 
```

# .net - 通过 xaml 在 DataContext 对象中设置属性

> ID：11678270
> 
> 赞同：0
> 
> 时间：2012-07-26T21:25:24.630
> 
> 标签：.net, xaml, mvvm

假设我有以下 xaml：

```
<UserControl x:Class="MainView" ...>
    :
    <my:ChildView />
    :
</UserControl> 
```

当 ChildView 被实例化时，它会自动创建一个 ChildViewModel 类型的对象并将其附加到它的 DataContext 中。ChildViewModel 有一个属性“Abc”。

MainView 有一个支持 MainViewModel 对象作为其 DataContext。MainViewModel 还有一个属性“Def”。

有没有办法通过 xaml 将属性 MainViewModel.Def 中的值发送到 ChildViewModel.Abc？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T06:03:36.467

视图模型之间的通信是通过 messenger/mediator 或 eventtaggregator 完成的。你不必走“通过xaml”的路

编辑：因为我喜欢 viewmodel fist - 我在我的项目中这样做

mainviewmodel 拥有 childviewmodel 的一个实例。ChildView 不再创建 ChildViewmodel。

```
<UserControl x:Class="MainView" ...>
  <UserControl.Resources>
   <DataTemplate DataType="{x:Type local:ChildViewmodel}">
    <my:ChildView />
   </DataTemplate>
  </UserControl.Resources>
 :
  <ContentPresenter Content="{Binding MyChildView"} />
  :
</UserControl> 
```

不，我可以简单地将 Def 属性值设置为 childviewmodel，因为我的 mainviewmodel 中有该实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:39:42.463

如果它像父子视图，则子视图不应创建 Viewmodel 本身，而是将该子视图模型创建为主视图模型的属性，并设置子视图的数据上下文，如下所示。现在主视图模型将可以访问子视图模型的属性

```
<UserControl x:Class="MainView" ...>
:
<my:ChildView DataContext{Binding ChildViewModelProperty}/>
:
</UserControl> 
```

# c# - 如何使用注册表重新填充文本框

> ID：11678274
> 
> 赞同：1
> 
> 时间：2012-07-26T21:25:48.313
> 
> 标签：c#, visual-studio-2010, registry

使用注册表停止程序后，如何使用以前的文本重新填充文本框。

我阅读了多篇文章，例如：

[堆栈溢出1](https://stackoverflow.com/questions/2680705/how-to-save-class-object-in-registry)

[堆栈溢出2](https://stackoverflow.com/questions/1748500/howto-save-a-password-in-the-registry)

[代码项目1](http://www.codeproject.com/Articles/19/Registry-Class)

[代码项目2](http://www.codeproject.com/Articles/3389/Read-write-and-delete-from-registry-with-C)

到目前为止，我什么都没有，因为什么都没有解决，我得到的只是错误 D：

```
 public string Read(string KeyName)
     { 
         RegistryKey rk = baseRegistryKey ;
         RegistryKey sk1 = rk.OpenSubKey(subKey);
         if ( sk1 == null )
              return null;
         else
         {
             try 
             {
                  return (string)sk1.GetValue(KeyName.ToUpper());
             }    
             catch (Exception ex)
             {

             }
         }
     } 
```

说 baseRegistryKey 和 subKey 不存在。它说 RegistryKey 不存在。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:51:48.307

前几天我也遇到了同样的问题，不要用那些景点，它们都很糟糕。

您的代码有几处问题：

*   baseRegistryKey 和 subKey 需要设置为某种参数。
*   如果 RegisterKey 不起作用，那么您可能没有这样做`using Microsoft.Win32`
*   我用来解决这个问题的代码是：

    ```
    public WindowsConsoleForm1();
        try
        {
            InitializeComponent();
            textBox1.Text = Application.UserAppDataRegistry.GetValue("example").ToString();
        }
        catch { } 
    ```

*   然后你在哪里有**ex:** `textbox1.text = Path.GetDirectoryName(saveFileDialoge1.FileName);`，在它下面你发布`Application.UserAppDataRegistry.SetValue("example", textbox1.text);`

# automapper - AutoMapper：如何进行简单的展平

> ID：11678279
> 
> 赞同：0
> 
> 时间：2012-07-26T21:26:21.197
> 
> 标签：automapper

我需要：

```
// SOURCE
class A { 
  public B B;
  public C C;
}

class B { public int X; }
class C { public int Y; }

// DESTINATION
class D { 
  public int X; 
  public int Y;
}

// I want to configure following operation
// without mapping each (X and Y) fields explicitly.
D.X = A.B.X;
D.Y = A.C.Y;

// here is the essence of what I am trying to accomplish.
Mapper.CreateMap<B, D>();
Mapper.CreateMap<C, D>();
var map = Mapper.CreateMap<A, D>();
map.ForMember(dst => dst, opt => opt.MapFrom(src => src.B));
map.ForMember(dst => dst, opt => opt.MapFrom(src => src.C)); 
```

有什么建议么？

注意：我知道如果我将 DX 更改为 D.BX 并将 DY 更改为 D.CY 它将起作用。我想在不添加 D 属性前缀的情况下完成此操作。我也可以通过使用地图的“填充”版本来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T22:59:57.900

```
// I want to configure following operation
// without mapping each (X and Y) fields explicitly.
D.X = A.B.X;
D.Y = A.B.Y; 
```

根据你的班级，B 没有 Y。B 有 X。你的意思是`D.Y = A.C.Y`？如果是这样：

```
Mapper.CreateMap<A, D>()
    .ForMember(d => d.X, o => o.MapFrom(s => s.B.X))
    .ForMember(d => d.Y, o => o.MapFrom(s => s.C.Y))
; 
```

# java - 在jsp页面中用java控制文本

> ID：11678280
> 
> 赞同：0
> 
> 时间：2012-07-26T21:26:23.743
> 
> 标签：java, html, forms, jsp

我在jsp页面中有这个表格 -

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<link rel="stylesheet" href="./Styles/Site.css" type="text/css" />
<title>Create new customer</title>
</head>
<body>
    <fieldset>
        <legend>Create new customer</legend>
        <form action="CreateCustomerServlet" method="GET">
            ID : <input type="text" name="customerId" />
            <br />
            First Name : <input type="text" name="customerFirstName" />
            <br />
            Last Name : <input type="text" name="customerLastName" />
            <br />
            Phone : <input type="text" name="customerPhone" />
            <br />
            Gender : <input type="radio" name="customerGender" value="Male">
            Male <input type="radio" name="customerGender" value="Female">
            Female
            <br>
            Password :<input type="password" size="25" name="customerPassword"><br/>
            re-Password :<input type="Password" size="25" name="reCustomerPassword">
            <br />
            <input type="submit" value="Create customer" />
        </form>
    </fieldset>
    <%
        // java section , here I want to control on the texts of the form
    %>

</body>
</html> 
```

`submit`当按下按钮时，我该怎么做？

**编辑：** 我会注意，我想在将其发送到 servlet 之前检查 java 部分中的文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T21:52:32.160

首先，您必须在代码中添加一些信息......
在表单标签中：
- 您必须首先分配一个“方法”值来定义您将使用的协议。
- 您必须指定一个“动作”值来说明表单将在何处获取这些值。

我认为还有更多步骤，您应该阅读一些教程等。

您需要一些技术来处理表单提交。
如果你喜欢使用 servlet，有一个很好的[链接](http://www.apl.jhu.edu/~hall/java/Servlet-Tutorial/Servlet-Tutorial-Form-Data.html)

您可以使用一些框架来做到这一点，但需要更多的工作来学习。您可以使用 Struts、Spring 等...

更新：

所以你想验证你的数据......我建议你使用一些框架，特别是 Spring MVC。它可以帮助您验证您的表格。如果没有框架，验证数据是一项庞大的工作，使用 javascript 或其他不那么专注于此目的的技术......
此外，Spring MVC 可以帮助您处理更多其他事情，您将在以后需要......这是一个简单的[你好世界的例子](http://www.mkyong.com/spring-mvc/spring-mvc-hello-world-example/)

希望能帮助到你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:01:28.853

我建议使用 Spring Webflow 来处理将前端 html 连接到后端 java。尤其是使用 JSF，两者之间的集成相对容易。

本[快速入门指南](http://static.springsource.org/spring-webflow/docs/2.0.x/reference/htmlsingle/spring-webflow-reference.html)应该可以帮助您入门。在您开始使用该框架之后，只需将一个名为“action”的属性附加到提交按钮，该属性将使用弹簧转换来调用一个支持 bean 上的操作。

没有框架很难上手，但祝你好运！

# java - 如何从 Eclipse 中的通用接口导航到实现类？

> ID：11678281
> 
> 赞同：4
> 
> 时间：2012-07-26T21:26:26.967
> 
> 标签：java, eclipse, generics

[与如何从 Eclipse 中的接口导航到实现类的](https://stackoverflow.com/questions/6430825/how-to-navigate-to-implementing-class-from-interface-in-eclipse)问题非常相似？ 除了添加泛型。考虑以下：

```
interface Foo<T> {
  void doStuff(T obj);
}

class FooImpl implements Foo<String> {
  public void doStuff(String obj) {
    // stuff
  }
}

class FooStringClient {
  private Foo<String> foo;
} 
```

如果我正在查看 FooStringClient，如何找到 Foo<String> 的实现？另一个问题的答案将向我展示所有 T 的 Foo<T> 的所有实现。如果各种 T 有许多 Foo<T> 的实现，则目视扫描列表以仅找到 Foo<String> 实现是粗略的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:05:33.927

有一个标记为 WONTFIX的[错误只需要此功能。](https://bugs.eclipse.org/bugs/show_bug.cgi?id=162062)

# python - 在 html 文件中使用图表（使用 matplolib 用 python 编写）

> ID：11678285
> 
> 赞同：0
> 
> 时间：2012-07-26T21:27:01.370
> 
> 标签：python, django, linux, matplotlib, ubuntu-10.04

我使用 django 创建了应用程序，该应用程序在 10 个 xml 文档中搜索用户输入的关键字，并为每个文件维护这些词的频率计数。结果以文件名和图表的可扩展超链接列表的形式返回给用户。我的html代码：

```
<html>
 <style type="text/css">
        h1 {
             position: absolute;
             top:   5px;
             left:  200px;      
           }    
        form #Edit1 { 
                     position: absolute;
                     top:    37px; 
                     left:   410px; 
                    }
        form #Edit2 { 
                     position: absolute; 
                     top:    37px; 
                     left:   840px; 
                    }
       </style>
       <font size="4" face="arial" color="#0000FF">
       <h1>XML Search</h1>
       </font>
       <br/>
       <br/>
       <Form Action ="/search/" Method ="POST">
       <div id="Edit1">
            <INPUT TYPE = 'VARCHAR'  name ='word' VALUE ="" size = "50">
       </div>
       <div id="Edit2">
            <INPUT TYPE = "Submit" VALUE = "Search">
       </div>
       <br/>
       <hr/>
       {% csrf_token %}
       </FORM>
       {% if list1 %}
          <input type="text" name="word" value="{{ word }}" />
          <ul> 
             {% for l in list1 %}
                  <li><a href="{{STATIC_URL}}static/{{l.file_name}}">{{l.file_name}}</a>, {{l.frequency_count}}</li>
             {% endfor %}
          </ul>
          <br/>     
     # -- charts to be employed -- #
       {% endif %}
</html> 
```

这个 html 页面是从 views.py 文件中重定向的。现在，我想在这个 html 代码中使用 matplotlib 编写图表代码。由于使用上述库创建图表的代码是用python编写的，所以我该如何在上面的html文件中编写这个python代码或者是否有其他出路，所以请告诉？

注意：我使用了谷歌图表并且工作得很好，但我想让这个应用程序独立于互联网，所以请不要建议我使用谷歌图表。

请帮助，我是图表和 django 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:33:35.643

[matplotlib 食谱](http://www.scipy.org/Cookbook/Matplotlib/Django)有一个关于在 django 中使用 matplotlib的[条目。](http://www.scipy.org/Cookbook/Matplotlib/Django)

它归结为以下几点：

*   在 urls.py 中，您为 png 添加一个条目，其中包含指向新视图的链接。
*   在您的新视图中，您使用 content_type image/png 创建一个 HttpResponse
*   使用 matplotlib 将图形作为 png 写入上述 HttpResponse

从食谱中直接复制/粘贴应该会让你继续前进。

也许您可以将问题分解成小块，以避免一次学习三件事：

1.  将静态 .png 添加到您的页面
2.  通过 urls.py 和新视图将动态 .png 添加到您的页面
3.  在 Matplotlib 中创建图形（离线）
4.  将步骤 3 中的 matplotlib 图放入步骤 2 中的动态图像中

# actionscript-3 - Child MovieClip 正在触发事件，且 mouseChildren 和 mouseEnabled 设置为 false

> ID：11678293
> 
> 赞同：1
> 
> 时间：2012-07-26T21:27:32.090
> 
> 标签：actionscript-3, flash

我已将缩略图加载到容器中。每个拇指都有一个 MOUSE_OVER 和 _OUT 监听器。我将每个拇指 mouseChildren 设置为 false。

在拇指后面创建的弹出窗口正在触发 MOUSE_OVER 事件。我在弹出窗口中将 mouseEnabled 设置为 false。

我不确定为什么会这样。我会很感激任何线索。

```
for (var i:uint = 0; i < numOfThumbs; i++) {

    // add thumb
    thumb = new Thumb
    thumb.buttonMode = true;
    thumb.mouseChildren = false;
    container.addChild(thumb);

    // add listener
    thumb.addEventListener(MouseEvent.MOUSE_OVER, rollOverHandler, false, 0, true);
    thumb.addEventListener(MouseEvent.MOUSE_OUT, rollOutHandler, false, 0, true);

    // add popup
    popup = new Popup;
    popup.mouseEnabled = false;
    thumb.addChildAt(popup, 0);
}

private function rollOverHandler(e:MouseEvent):void {
    // Hey popup.... stop triggering this. I just want the thumb to trigger this. jerk.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T22:57:05.803

它按预期工作。子对象影响父对象的边界（这是接收 mouseOver/Out 的内容）。

您最好的选择是：

A：将您的弹出窗口放在不同的 displayObject 容器中（不是拇指的孩子）

B：在弹出窗口可见时暂时禁用 Thumb 上的 mouseInput，

C：在弹出窗口上，设置 mouseEnabled = true （保持 mouseChildren = false）并检查你的 rollOverHandler 如果事件目标（e.target）是弹出窗口，如果为真则返回：

```
if(e.target == popup) return; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-26T22:50:39.103

为主影片剪辑设置`mouseChildren`为 false。

# sql - 将 SQL 日期数据类型转换为字符串

> ID：11678294
> 
> 赞同：1
> 
> 时间：2012-07-26T21:28:00.723
> 
> 标签：sql, vb.net

我正在用 VB 编写一些东西，需要将 SQL 日期（不是日期时间）转换为字符串。这应该是一个简单的转换，但是 toString 不起作用，我在网上找不到任何东西。我正在处理的代码部分如下所示：

```
 Dim incomingDate As String
    incomingDate = row.Cells(5).Text.ToString() 
```

当放入 gridview 的数据是 DateTime 数据类型时，这可以正常工作。如果它只是日期，它会给我以下错误消息：

“指定的参数超出了有效值的范围。参数名称：索引”

我也尝试过这种解决方法，但没有奏效

```
 Dim incomingDate As String
    Dim d As New DateTime
    d = DateTime.Parse(row.Cells(5).Text)

    incomingDate = Date.Parse(row.Cells(5).Text) 
```

同样的错误...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:33:14.927

在 SQL 中，您可以使用`convert(varchar, mySqlDate, 101)`来发出字符串而不是日期。你是这么想的吗？

# jquery - Fancybox jQuery 播放 YouTube 播放列表？

> ID：11678295
> 
> 赞同：1
> 
> 时间：2012-07-26T21:28:01.703
> 
> 标签：jquery, fancybox

我可以使用 Fancybox 播放 YouTube 视频，但无法使用 YouTube 播放列表。

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:00:43.847

是的。[在此处](http://jsfiddle.net/aTgsN/)查看一个工作示例（取自[此答案](https://stackoverflow.com/questions/11736744/fancybox-youtube-channel-embed)）。

我是根据 rel 属性而不是类进行选择的，所以我在 html 锚点中省略了 fancybox 类。一旦我添加了这个fancybox类，我就可以开始了。

```
<a class="fancybox.iframe" ... > ... </a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T18:05:23.570

您只需更改其锚点上的 href 即可获得 Youtube 播放列表。特别注意 listType 参数。该参数可以取两个值：playlist 和 user_uploads。如果要显示播放列表，请使用第一个值。但是，如果您只想显示一个频道，则必须使用第二个值。反过来，list 属性的值应该是第一种情况的列表 id 和第二种情况的 Youtube 用户名。

```
<a class="fancybox fancybox.iframe" href="http://www.youtube.com/embed?listType=user_uploads&list=Google"></a>

<a class="fancybox fancybox.iframe" href="http://www.youtube.com/embed?listType=playlist&list=PL590L5WQmH8f_0qlZ-tKrtbfw4n0jyHQh"></a> 
```

# twitter-bootstrap - 在 Twitter Bootstrap 中将表格中的文本居中

> ID：11678298
> 
> 赞同：127
> 
> 时间：2012-07-26T21:28:32.453
> 
> 标签：twitter-bootstrap

由于某种原因，表格内的文本仍然没有居中。为什么？如何使表格内的文本居中？

使其非常清晰：例如，我希望“Lorem”位于四个“1”的中间。​</p>

```
@import url('http://twitter.github.com/bootstrap/assets/css/bootstrap.css');
table,
thead,
tr,
tbody,
th,
td {
  text-align: center;
}
```

```
<table class="table">
  <thead>
    <tr>
      <th>1</th>
      <th>1</th>
      <th>1</th>
      <th>1</th>
      <th>2</th>
      <th>2</th>
      <th>2</th>
      <th>2</th>
      <th>3</th>
      <th>3</th>
      <th>3</th>
      <th>3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td colspan="4">Lorem</td>
      <td colspan="4">ipsum</td>
      <td colspan="4">dolor</td>
    </tr>
  </tbody>
</table>
```

[JSFiddle](http://jsfiddle.net/JeCpZ/)

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2014-02-17T14:36:45.447

在 Bootstrap 3 (3.0.3) 中，将`"text-center"`类添加到`td`元素中是开箱即用的。

即，`some text`表格单元格中的以下中心：

```
<td class="text-center">some text</td> 
```

* * *

## 回答 #2

> 赞同：163
> 
> 时间：2012-07-26T21:33:24.633

的`.table td`text-align 设置为左​​对齐，而不是居中。

添加它应该使您的所有`td`s 居中：

```
.table td {
   text-align: center;   
} 
```

* * *

```
@import url('https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css');
table,
thead,
tr,
tbody,
th,
td {
  text-align: center;
}

.table td {
  text-align: center;
}
```

```
<table class="table">
  <thead>
    <tr>
      <th>1</th>
      <th>1</th>
      <th>1</th>
      <th>1</th>
      <th>2</th>
      <th>2</th>
      <th>2</th>
      <th>2</th>
      <th>3</th>
      <th>3</th>
      <th>3</th>
      <th>3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td colspan="4">Lorem</td>
      <td colspan="4">ipsum</td>
      <td colspan="4">dolor</td>
    </tr>
  </tbody>
</table>
```

[更新了 JSFIDDLE](http://jsfiddle.net/JeCpZ/1/)

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2014-07-30T12:00:25.797

我认为 html 和 Css 的快速和干净 mod 的最佳组合是：

```
<table class="table text-center">
<thead>
        <tr>                    
        <th class="text-center">Uno</th>
        <th class="text-center">Due</th>
        <th class="text-center">Tre</th>
        <th class="text-center">Quattro</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
    </tr>
</tbody>
</table> 
```

关闭`<table>`初始化标签，然后复制到你想要的地方:) 我希望它有用 祝你有美好的一天 w stackoverflow

ps Bootstrap v3.2.0

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2013-06-21T06:14:21.433

您可以通过在单元格内添加一个具有“文本中心”类的 div 来使 td 对齐而不更改 css：

```
 <td>
        <div class="text-center">
            My centered text
        </div>
    </td> 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2013-06-04T12:00:46.907

```
<td class="text-center"> 
```

并修复 bootstrap.css 中的 .text-center：

```
.text-center {
    text-align: center !important;
} 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2014-05-09T15:30:41.070

如果它只是一次，你不应该改变你的样式表。只需编辑那个特定的`td`：

```
<td style="text-align: center;"> 
```

干杯

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2014-02-24T09:12:07.327

我有同样的问题，一个更好的解决方法`!important`是在我的 CSS 中定义以下内容：

```
table th.text-center, table td.text-center { 
    text-align: center;
} 
```

这样，`text-center`类的特殊性在表中可以正常工作。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-12-07T16:37:55.520

添加：

```
<p class="text-center"> Your text here... </p> 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-09-24T13:16:20.520

Bootstrap 的主要特点之一是它减少了 !important 标签的使用。使用上述答案会破坏目的。您可以通过修改自己的 css 文件中的类并在包含 boostrap css 后链接它来轻松自定义引导程序。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-05-16T12:42:23.953

只需给周围`<tr>`一个自定义类，例如：

```
<tr class="custom_centered">
  <td>1</td>
  <td>2</td>
  <td>3</td>
</tr> 
```

并让 css 只选择您的自定义类`<td>`中的 s 。`<tr>`

```
tr.custom_centered td {
  text-align: center;
} 
```

像这样，您不会冒险覆盖其他表，甚至不会覆盖引导基类（就像我的一些前辈建议的那样）。

# ios - xcode 在模拟器和硬件之间切换

> ID：11678299
> 
> 赞同：0
> 
> 时间：2012-07-26T21:28:38.850
> 
> 标签：ios, xcode4

我正在使用 XCode 4.4（最近从 4.2 升级）。今天刚刚设置了我的个人 iOS 开发人员程序许可证，并设法在物理 iPad 上配置和运行我的应用程序。现在我希望能够切换回模拟器（IOW 可以选择在硬件或模拟器上运行）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:32:06.533

在左上角有一个下拉菜单，上面写着“iPhone 5.1 Simulator”、“iPad 5.1 Simulator”和“My iPhone”。

只需选择您想要运行您的应用程序的内容，然后按播放 :)

（您还可以从菜单底部的选项中安装其他版本的模拟器，这对测试您的应用程序很有用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:01:10.993

在左手角，您有运行按钮、停止按钮和第三个选项。这将是一个带有 的两部分按钮`yourappname>youripad`。单击`youripad`零件，将显示一个下拉菜单。单击 iPhone 5.0 模拟器，然后按运行按钮。它应该重建您的项目，它将打开并运行该项目。

# javascript - PhotoSwipe 在新窗口中打开照片

> ID：11678301
> 
> 赞同：1
> 
> 时间：2012-07-26T21:28:40.787
> 
> 标签：javascript, jquery, html, ios, photoswipe

我正在尝试使用 javascript 在新窗口中打开当前可见的照片，但它也必须在 iPad 上运行。我尝试的是在工具栏上添加一个按钮（如示例中所示）。我还在photoswipe.css中添加了那个按钮的css。我添加了一个javascript函数：

```
function getImgUrl()
{
    var divHead = getElementsByClassName(document, 'ps-carousel-content');
    var imgElement = divHead[0].getElementsByTagName("img");
    var imgUrl = imgElement[1].getAttribute('src');
    window.open(imgUrl.toString())
} 
```

我确实使用示例中的代码来获取自定义工具栏，但添加了创建按钮的部分：

```
getToolbar: function(){
    return '<div class="ps-toolbar-close"><div class="ps-toolbar-content"></div></div><div class="ps-toolbar-play"><div class="ps-toolbar-content"></div></div><div class="ps-toolbar-previous" style="padding-top: 12px;"><div class="ps-toolbar-content"></div></div><div class="ps-toolbar-next"><div class="ps-toolbar-content"></div></div><div onclick="javascript: getImgUrl();" class="ps-toolbar-download"><div class="ps-toolbar-content"></div></div>';
} 
```

这在 chrome 和 safari 等 webkit 浏览器中完美运行（照片在新窗口/标签中打开）。但是当我在 iPad 上尝试时，它不起作用。当我按下按钮时，什么都没有发生。

有人可以帮我解决这个问题吗？也许我做错了，所以告诉我不同​​的方法是否会更好。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T20:33:11.573

iPad 可能会将此脚本作为“弹出窗口”来阻止。请参阅[这个](https://stackoverflow.com/questions/5649962/ipad-safari-popup)SO 问题。为确保问题是弹出窗口阻止程序，请转到设置> Safari >“阻止弹出窗口”将其关闭并查看它现在是否有效。

如果您确定这是弹出窗口阻止程序而不是其他问题，请尝试将打开图像的方式更改为以下内容：

```
function getImgUrl()
{
    var divHead = getElementsByClassName(document, 'ps-carousel-content');
    var imgElement = divHead[0].getElementsByTagName("img");
    var imgUrl = imgElement[1].getAttribute('src');
    return imgUrl.toString();
}

getToolbar: function(){
    return '<div class="ps-toolbar-close"><div class="ps-toolbar-content"></div></div><div class="ps-toolbar-play"><div class="ps-toolbar-content"></div></div><div class="ps-toolbar-previous" style="padding-top: 12px;"><div class="ps-toolbar-content"></div></div><div class="ps-toolbar-next"><div class="ps-toolbar-content"></div></div><a href="' + getImgUrl() + '" target="_blank" class="ps-toolbar-download"><div class="ps-toolbar-content"></div></a>';
} 
```

我更改了您的函数以将图像 url 作为字符串返回，然后将其插入到您的`getToolbar`返回字符串中。

# actionscript-3 - 提供的 DisplayObject 必须是调用者的子对象

> ID：11678304
> 
> 赞同：0
> 
> 时间：2012-07-26T21:28:57.093
> 
> 标签：actionscript-3, actionscript, displayobject

对于特定对象，我偶尔会收到此错误。出于某种原因，当我生成 2 个这个对象而不是一个时，这个问题似乎就开始了。我基本上有敌人掉落硬币，一个敌人掉落 2 个。当我同时捡起它们时，我开始收到此错误。

```
public function removeCoin(){
        removeEventListener(Event.ENTER_FRAME, moveCoin);
        if(this.parent){
            this.parent.removeChild(this);
        }
        parentMC.level.spawnedCoins.splice(this, 1);
} 
```

这是当玩家和硬币发生碰撞时碰撞检查调用的函数。当我从这个功能一次拿起两个硬币时，问题通常开始。

```
var dropCoin:Number = Math.random() * 100;
    if(dropCoin > 40){
        var newCoin1:coin = new coin(parentMC);
        var newCoin2:coin = new coin(parentMC);
        newCoin1.x = x+7;
        newCoin1.y = y;
        parentMC.level.levelObjects.addChild(newCoin1);
        parentMC.level.spawnedCoins.push(newCoin1);
        newCoin2.x = x-7;
        newCoin2.y = y;
        parentMC.level.levelObjects.addChild(newCoin2);
        parentMC.level.spawnedCoins.push(newCoin2);
     } 
```

编辑了代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:43:54.137

该错误意味着您尝试从显示列表中删除的项目（通过调用 removechild）不在显示列表中，或者不是您调用 removeChild 的对象的子项。

在不分析所有代码的情况下，快速检查可能会解决您的问题。

更改您现有的代码块：

```
if(this != null){
   parentMC.lvl1.levelObjects.removeChild(this);
} 
```

对此：

```
if(this.parent){
 this.parent.removeChild(this);
} 
```

这会检查 'this' 是否有父级，如果有，它将自己从父级中移除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:34:47.377

我认为您的问题可能是：
parentMC.level.spawnedCoins.splice(this, 1);

如果 spawnedCoins 只是一个数组，则 splice 应采用 2 个整数参数 startIndex 和 deleteCount[相关 adobe 帮助页面](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#splice%28%29)

通过传递一个对象，我认为正在发生的事情是将对象转换为一个int，值为'1'（即不是null）。

我认为你想要的是 parentMC.level.spawnedCoins.splice(parentMC.level.spawnedCoin.indexOf(this), 1);

# c# - 无法访问 ComboBox.SelectedItem 上的属性

> ID：11678320
> 
> 赞同：-1
> 
> 时间：2012-07-26T21:30:58.080
> 
> 标签：c#, winforms, parsing

Sooo，我不断收到错误消息：

> “object”不包含“text”的定义，并且找不到接受“object”类型的第一个参数的扩展方法“text”（您是否缺少 using 指令或程序集引用？）

对于下面的代码 - 谁能告诉我为什么？

```
 private void cboDataSets_SelectedIndexChanged(object sender, EventArgs e)
    {
        int cats = Int16.Parse(cboDataSets.SelectedItem.text);
        lblGenerateSelection.Text = ("you have selected " + (20 - cats) + "cats you'd like to adopt");
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T21:33:47.817

cboDataSets.SelectedItem 将返回一个*对象*。如果它确实包含一个具有 .Text 属性的对象，则必须对其进行强制转换

```
int name = 
    Int16.Parse(((SomeObectWithATextProperty)cboDataSets.SelectedItem).Text); 
```

如果 SelectedItem 真的是一个字符串，你可以这样做：

```
int name = 
    Int16.Parse(((string)cboDataSets.SelectedItem)); 
```

如果 SelectedItem 是已覆盖 ToString() 以显示有意义的数据的对象，您可以这样做

```
int name = 
    Int16.Parse(cboDataSets.SelectedItem.ToString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T21:34:40.200

SelectedItem 只返回一个对象类型的实例。您需要将其转换为实际具有属性“文本”的类型：

```
((MyType)(cboDataSets.SelectedItem)).text 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T21:34:02.030

错误似乎很明显：`cboDataSets.SelectedItem`不包含名为 的属性`text`，但您正在引用该属性。

你从哪里得到这个属性名称的？

`SelectedItem`将列表项作为对象返回。根据需要键入 cast 以获得所需的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T21:36:17.153

很可能您的属性是“文本”而不​​是“文本”:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T21:37:29.483

尝试使用大“T”，例如“Text”。

# continuous-integration - 根据选择构建参数在属性文件中设置变量

> ID：11678321
> 
> 赞同：0
> 
> 时间：2012-07-26T21:30:59.067
> 
> 标签：continuous-integration, jenkins, jenkins-plugins

我们正在设置一个 Jenkins CI 服务器来处理我们所有的 WebDriver 测试。理想情况下，我希望为我们的 QA 团队选择构建参数，以便为每个构建选择要测试（生产等）的服务器。我们有一个属性文件来处理这个问题，所以我们只需要对该文件进行更改。有没有可以做我们正在寻找的插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:03:02.800

您可以只使用 shell 构建步骤

```
echo $MY_BUILD_VAR > $WORKSPACE/somefile 
```

有时一个插件比你需要的多！（虽然如果你有混合的操作系统来支持（即 *nix 和 windows），EnvInject 会有所帮助，因为 Windows 运行批处理文件并且 *nix 与 shell 一起使用......虽然 windows 版本略有不同

```
echo %MY_BUILD_VAR% > %WORKSPACE%\somefile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T12:47:00.093

是的，[EnvInject 插件](https://wiki.jenkins-ci.org/display/JENKINS/EnvInject+Plugin)可以从属性文件中读取环境并使其可用于构建。

# excel - 如何在 Outlook2007 中使用 VB 代码使用 sendonbehalfof 作为代表发送一系列会议邀请

> ID：11678324
> 
> 赞同：2
> 
> 时间：2012-07-26T21:31:25.837
> 
> 标签：excel, vba, outlook, calendar

我正在尝试在 Excel 2007 中编写一些 VB 代码，该代码将在电子表格中指定的日期自动从 Outlook 2007 日历向 Excel 电子表格中列出的收件人列表发送会议邀请。这很有用，因为只需单击一下按钮，我就可以在不同的日期向不同的人发送数百个会议请求。使用以下代码从我自己的用户帐户发送时，我可以做到这一点：

```
' Create the Outlook session
Set myoutlook = CreateObject("Outlook.Application")
' Create the AppointmentItem
Set myapt = myoutlook.CreateItem(olAppointmentItem)     ' Set the appointment properties
With myapt
    .Subject = " Assessment Centre "
    .Location = "conference room A"
    .Start = Cells(5, 24 + j) & " 17:00:00 PM"
    .Duration = 120
    .Recipients.Add Cells(i, 1).Value
    .MeetingStatus = olMeeting
    ' not necessary if recipients are email addresses
    'myapt.Recipients.ResolveAll
    .AllDayEvent = "False"
    .BusyStatus = "2"
    .ReminderSet = False
    .Body = L1 & vbCrLf & vbCrLf & L2 & vbCrLf & vbCrLf & L3 & vbCrLf & vbCrLf & L4
        .Save
    .send
End With 
```

但现在我想从我是代表的虚拟用户帐户发送会议请求，使用类似“sendonbehalfof”的东西，以便虚拟日历存储所有会议邀请，其他代表也可以使用相同的虚拟用户来操作系统用户帐号。这在使用以下代码发送电子邮件时工作正常：

```
Set oApp = CreateObject("Outlook.Application")
Set oMail = oApp.CreateItem(0)

With oMail
    .To = " John.Smith@John_Smith.com "
    .Subject = "Subject"
    .Body = "Body"
    .SentOnBehalfOfName = "Fred.bloggs@fred_blogs.com"
    .send
End With 
```

电子邮件会说“我代表 Fred Bloggs”</p>

但我无法让它与日历约会一起使用。

我用'约会'、'会议请求'、sendonbehalfof'等词搜索了高低，似乎你应该能够用'sendusingaccount'进行约会，但这似乎不起作用（它没有'不会失败，只是忽略指令并像以前一样从我自己的用户帐户发送）。

谁能告诉我该怎么做？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:08:51.267

如果您对其他用户的邮箱具有代理访问权限，请使用`GetSharedDefaultFolder`获取对用户共享日历的引用，然后使用`Folders.Items.Add`将会议添加到他们的日历中。

前任：

```
Dim fldr As Outlook.Folder
Dim appt As Outlook.AppointmentItem
  Set fldr = Session.GetSharedDefaultFolder(_
    Outlook.CreateRecipient("Fred.bloggs@fred_blogs.com"), _
    olFolderCalendar)
  Set appt = fldr.Items.Add
  ' set up your appointment here
  ' i.e.:
  ' With appt
  '   .Start = Cells(5, 24 + j) & " 17:00:00 PM"
  '   .Duration = 120
  ' End With
  ' make sure you call the appt.Save method to save the appt! 
```

改编自：[http ://www.outlookcode.com/codedetail.aspx?id=43](http://www.outlookcode.com/codedetail.aspx?id=43)

# c++ - 将源代码中的文本逐行关联 - 太脆弱了

> ID：11678325
> 
> 赞同：2
> 
> 时间：2012-07-26T21:31:26.093
> 
> 标签：c++, c, text

我需要将文本数据与源代码文件中的行相关联。类似于“这些行是为了创建一个 Myclass 对象”-> 20 到 32 行。

问题是这种行跟踪非常脆弱：有人添加一个换行符来破坏我在关联文本和行之间的对应关系就足够了。

我需要一个想法来使这个链接更强大（不要太多，但至少要抵抗一些换行），非常欢迎提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T21:33:54.243

一个简单的解决方案是散列（`md5`非常容易且易于访问）行并将散列存储在数据中。

然后，您可以根据可能已修改的文件检查哈希。如果匹配，很好，否则开始检查上一行/下一行是否匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T21:34:40.547

一种方法可能是寻求源代码控制系统的帮助。例如，使用 Git，您可以将文本数据与特定*版本*的源代码相关联。如果更改了源代码，您可以使用“diff”算法来发现添加或删除了哪些行。使用该增量信息，您可以更新注释行（例如，在文件顶部添加一行将导致您的 20-32 注释移动到 21-33）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T21:38:24.827

您是否正在尝试实施某种形式的自动文档系统？如果是这样，那么基于行编号确实很脆弱。我建议使用某种标记将文本与语义代码块相关联，这些代码块在移动或更改时是健壮的。也许类似的东西`doxygen`可能是您正在寻找的东西。

# c# - 如何改进此查询以显示问题及其可能的答案？

> ID：11678329
> 
> 赞同：0
> 
> 时间：2012-07-26T21:31:43.777
> 
> 标签：c#, asp.net, sql-server-2008-r2

我是一名新的 ASP.NET 开发人员，我开发了一个简单的基于 Web 的测验引擎应用程序，类似于 ASP.NET 网站中解释的应用程序。该应用程序非常简单，它只显示多项选择题（只有 4 个可能的答案）。我现在必须改进它以显示不同类型的问题，例如具有单个答案或多个答案的多项选择问题。我现在正在努力解决将显示问题及其可能选择（两个选择或 4 个或 5 个选择）的查询. 我有以下数据库设计：

```
Questions Table: QuestionID, Question, QuestionOrder, AnswerExplanation
Answers Table: AnswerID, Answer
Quiz Table: QuizID, Title, Description
QuizContent Table: ID, QuizID, QuestionID, AnswerID, isCorrect 
```

*（isCorrect 是一个标志，表示该问题的正确答案）*

我的旧查询如下：

```
SELECT [QuestionID], [Question], [Answer1], [Answer2], [Answer3], [Answer4], [CorrectAnswer], [QuestionOrder] 
FROM [Question] 
WHERE ([QuizID] = @QuizID) 
ORDER BY [QuestionOrder] 
```

我的 ASP.NET 代码：

```
<asp:DetailsView ID="questionDetails" runat="server" Height="50px" Width="550px" AutoGenerateRows="False" CellPadding="4" DataSourceID="SqlDataSource1" ForeColor="#333333" GridLines="None">
                        <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                        <CommandRowStyle BackColor="#E2DED6" Font-Bold="True" />
                        <RowStyle BackColor="#F7F6F3" ForeColor="#333333" CssClass="generaltext" />
                        <FieldHeaderStyle BackColor="#E9ECF1" Font-Bold="True" CssClass="boldtext" Width="80px" />
                        <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
                        <Fields>
                            <asp:BoundField DataField="Question" HeaderText="Question:" SortExpression="Question" />
                            <asp:BoundField DataField="Answer1" HeaderText="A:" SortExpression="Answer1" />
                            <asp:BoundField DataField="Answer2" HeaderText="B:" SortExpression="Answer2" />
                            <asp:BoundField DataField="Answer3" HeaderText="C:" SortExpression="Answer3" />
                            <asp:BoundField DataField="Answer4" HeaderText="D:" SortExpression="Answer4" />
                        </Fields>
                        <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                        <EditRowStyle BackColor="#999999" />
                        <AlternatingRowStyle BackColor="White" ForeColor="#284775" CssClass="generaltext" />
                    </asp:DetailsView>
                    &nbsp;
                    <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:testConnectionString %>" 
                                    SelectCommand="SELECT [QuestionID], [Question], [Answer1], [Answer2], [Answer3], [Answer4], [CorrectAnswer], [QuestionOrder] FROM [Question] WHERE ([QuizID] = @QuizID) ORDER BY [QuestionOrder]">
                        <SelectParameters>
                            <asp:SessionParameter SessionField="QuizID" Type="Int32" Name="QuizID" DefaultValue="0" />
                        </SelectParameters>
                    </asp:SqlDataSource> 
```

现在，我必须提出一个查询，它可以显示任何类型的问题及其可能的答案或选择（2 个或 4 个或 6 个选择），那么**该怎么做呢？**

注意：我是否应该在我的设计中使用 QuizID 作为 SessionParameter，如 ASP.NET 代码所示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T06:24:46.653

如果您尝试在单独的查询中解决问题，那将是一项非常容易的任务。

1.  第一个查询将获得所有问题的列表
2.  第二个查询将获取特定问题的所有答案列表

就像是

```
1) Select your columns from questionsTable order by questionOrder where quizId=@yourQuizId
2) Select your columns from answersTable order by answerOrder where questionId=@questionId 
```

你现在需要做的是

1.  使用一些数据控件（Gridview 等）来映射所有问题

2.  在您的第一个网格视图和数据源的模板字段中放置另一个网格视图

3.  **使用FindControl**将 rowdatabound 事件（传递当前行的 rowId）上的嵌套 gridview 绑定到嵌套 griview 的数据源
***   这样，它将迭代所有问题以及所有可能的答案**

 **达米安。

![在此处输入图像描述](../Images/448c01fa592d4364ce639d5909dfa9e9.png)**

# asp.net - 如何防止在 AppHarbor 中丢失我的 Cache-Control 标头的 Max-Age 部分？

> ID：11678333
> 
> 赞同：1
> 
> 时间：2012-07-26T21:31:58.313
> 
> 标签：asp.net, asp.net-mvc, http, cache-control, appharbor

我有一个 ASP.NET / MVC Web 应用程序，它在本地运行时会生成此标头：

```
Cache-Control:public, max-age=3
Connection:Close
Content-Encoding:gzip
Content-Length:287122
Content-Type:text/javascript
Date:Thu, 26 Jul 2012 21:21:26 GMT
ETag:K5fBpkMM+t9XPl07ydQ54pR6bg8=
Expires:Thu, 26 Jul 2012 21:21:29 GMT
Server:ASP.NET Development Server/10.0.0.0
X-AspNet-Version:4.0.30319
X-AspNetMvc-Version:3.0 
```

但是当在他们的代理后面的 AppHarbor 中运行时，我得到的标题是：

```
Cache-Control:public
Connection:keep-alive
Content-Encoding:gzip
Content-Length:287122
Content-Type:text/javascript
Date:Thu, 26 Jul 2012 21:22:49 GMT
ETag:K5fBpkMM+t9XPl07ydQ54pR6bg8=
Expires:Thu, 26 Jul 2012 21:22:41 GMT
Server:nginx 
```

AppHarbor 正在剥离我的 Cache-Control 标头的 Max-Age 部分，并用一个我不同步的日期踩过我的日期。

我的目标是通过 CDN 提供 JavaScript 服务，其最大使用期限非常短，以便可以快速推出更改。经常更改网址不是一种选择。

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:51:34.937

一个更仔细检查[RFC](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9)的大学注意到它看起来像服务器和浏览器使用的此标头的常见单行形式：

```
Cache-Control: public, max-age=X 
```

实际上是无效的。将标题的两个部分分成两行，如下所示：

```
Cache-Control: public
Cache-Control: max-age=X 
```

作品！所以在我的 .net 代码中，这是：

```
response.Cache.SetCacheability(HttpCacheability.Public);
response.Cache.SetMaxAge(MaxAge); 
```

变成这样：

```
response.AddHeader("Cache-Control", "public");
response.AddHeader("Cache-Control", "max-age=" + (int)MaxAge.TotalSeconds); 
```

现在我可以从 AppHarbor 中获得最大年龄。

# networking - 在 ubuntu 上设置网络适配器

> ID：11678337
> 
> 赞同：0
> 
> 时间：2012-07-26T21:32:32.683
> 
> 标签：networking, ubuntu

嗨，我是网络域的新手。

我最近购买了一家名为 GMYLE 的公司的 WLAN 11n USB 适配器。我在我的 ubuntu 环境中设置相同的内容时遇到了困难。提供的驱动程序 cd 有在 ubuntu 上安装它的说明，但我发现使用命令行进行安装真的很混乱。我自己尝试了 GUI 方法。我去了系统->管理->网络工具，但设备没有在外面列出？这有什么具体原因吗？请帮忙。有没有更简单的方法（GUI 方法）可以帮助我在我的机器上设置网络适配器？

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:48:17.540

虽然这是题外话，但这里有一些可以帮助你的东西：

该设备使用的芯片组可能是 RTL8192cu。[您可以在此处](http://www.realtek.com.tw/downloads/searchView.aspx?keyword=RTL8192cu)下载驱动程序。

[您可以在此处](http://ubuntuforums.org/showpost.php?p=10656582&postcount=10)和[此处](http://forums.linuxmint.com/viewtopic.php?t=94495&f=53)阅读有关如何安装它的信息。

# facebook - Spotify Windows 桌面应用程序如何对用户进行身份验证？

> ID：11678339
> 
> 赞同：2
> 
> 时间：2012-07-26T21:32:41.040
> 
> 标签：facebook, authentication, desktop, spotify

我注意到 Windows 桌面 Spotify 应用程序在登录屏幕中询问我的 Facebook 用户名和密码。我想知道幕后发生了什么。

当我在浏览器中更改我的 fb 密码时，我必须在 Spotify 桌面应用程序登录屏幕中使用新密码。甚至在某些情况下，Spotify 桌面应用程序会向我显示一个 fb 弹出窗口，我必须在其中授予 Spotify 本身的权限。

我知道 Spotify 使用嵌入式 Chromium 浏览器引擎来完成所有繁重的工作。但是这样做不违反 Facebook 的 TOS 吗？

我的意思是，Spotify 是否会将我的用户名和密码发布到 facebook login.php 并拦截结果页面以获取我的 cookie？是否有记录的方法可以代表用户以适当的方式处理登录 Facebook？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T22:43:10.630

不，他们使用的是一种旧的且已弃用的 REST API 方法，称为`auth.login`： [https ://developers.facebook.com/docs/reference/rest/auth.login/](https://developers.facebook.com/docs/reference/rest/auth.login/)

显然，我不能阻止您在自己的应用程序中使用它，但考虑到该 API 的历史以及现在已完全弃用 REST API，依赖它是个坏主意。

相反，对于 Windows 桌面应用程序，我相信微软提供了一个 Facebook C# SDK，它将包含理想的身份验证方法。我更熟悉他们为 Metro Apps 提供的新方法，称为[Web Authentication Broker](http://msdn.microsoft.com/en-us/library/windows/apps/hh750287.aspx)。

这些几乎只是在应用程序中加载一个 web 框架，让用户登录到 Facebook，然后显示权限对话框（如果需要）。从那里，应用程序可以存储用户的 UID，并且可能是他们在身份验证时收到的长期存在的 access_token。这样，他们只需要每 60 天要求用户重新登录一次。

Facebook提供了[其他基于设备的身份验证方法](https://developers.facebook.com/docs/authentication/devices/)，但大多数仍在私人测试中，目前唯一推荐用于桌面应用程序的方法在[此页面](https://developers.facebook.com/docs/authentication/)标题**Windows、OS X 和 Linux 本地应用程序**下（底部页）。

**2013 年 12 月更新：**因为自从我写了这个答案以来，Facebook 登录文档发生了很大变化，我想指出一些新增内容：

*   [手动构建登录流程](https://developers.facebook.com/docs/facebook-login/manually-build-a-login-flow/)详细介绍了桌面应用程序可以用来登录用户的步骤。这里的新功能是，Windows 8 应用程序现在可以在登录对话框的 redirect_uri 中使用其深层链接 ID，这意味着它会在完成或取消时从登录对话框返回其应用程序的多任务。这是对之前 WebView 设置的改进，因为用户的默认浏览器可能已经让他们登录到 Facebook。
*   [Windows Phone 登录](https://developers.facebook.com/docs/facebook-login/login-for-windows-phone/)是 Windows Phone 8 应用程序使用的特殊指南。

# java - Android ScrollView 中的 ClassCastException

> ID：11678340
> 
> 赞同：1
> 
> 时间：2012-07-26T21:32:50.087
> 
> 标签：java, android, inheritance, multi-level

我的项目（B）中有一个类扩展（不是直接）ScrollView（A），可用于在垂直的月份字段滚动中设置一个值

这是继承层次结构： B 扩展 D 扩展抽象类 E 扩展 A

我正在使用一种机器人方法，该方法获取当前活动中的所有滚动视图，该活动返回一个 ArrayList 的 scrollviews(ArrayList) 。

我正在尝试分配该arraylist ArrayList.get(0) 的第一个元素并尝试将其强制转换为 B 对象，如下所示：

```
ScrollView scrview =  new ScrollView(a.getApplicationContext());
ChildScrollView scrview1 = new ChildScrollView(a.getApplicationContext());

scrview = solo.getScrollViews().get[0];
scrview1 = (ChildScrollView) scrview; // I get the classcastexception here 
```

有没有办法解决这个问题？

我也试过

```
ChildScrollView scrview1 = new ChildScrollView(a.getApplicationContext());
ScrollView scrview =  (ScrollView)new childScrollView(a.getApplicationContext());
//Also tried this --> ScrollView scrview = (ScrollView) scrview1;

scrview = solo.getScrollViews().get[0];
scrview1 = (ChildScrollView) scrview; // I get the classcastexception here 
```

任何帮助，将不胜感激。如果我遗漏了什么，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T21:52:05.497

你得到一个例外，因为演员不能那样工作。这样想：All `ChildScrollView`are also ，所以在上下文`ScrollView`中使用它们是有意义的。`ScrollView`但是一个`ScrollView`对象可能是也可能不是`ChildScrollView`。

您可以在强制转换之前使用[反射](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)尝试在运行时确定对象的类，以确保强制转换是安全的。但是，我不确定您要使用上面的代码完成什么。您创建了一个由 引用的新对象`scrview1`，但随后立即将该变量分配给`scrview`? 你能提供更多关于你想要完成的事情的细节吗？

# css - 我的菜单中使用的填充在 Firefox 和 Chrome 之间偏移了 1px，我该如何解决这个问题？

> ID：11678341
> 
> 赞同：0
> 
> 时间：2012-07-26T21:33:10.360
> 
> 标签：css, firefox, google-chrome, cross-browser, padding

我一直在通过堆栈溢出来寻找答案，但没有任何帮助（或者我一直在错误地添加它）。

我已经在网站上为客户设置了一个水平菜单，并试图将菜单项在菜单栏中居中，但是，左右填充在 firefox 和 chrome 之间偏移了 1px，这使得最后一个菜单项该行仅在 Firefox 中与右边缘对接。在菜单中的 li 标签上将 firebug 中的左右填充降低 1px 使其看起来就像在 Chrome 中使用我的原始 CSS 所做的那样。

问题代码似乎在 li 标签填充上。

这是一个带有我的菜单代码的 JSFiddle（没有背景图片，但问题仍然很明显）[http://jsfiddle.net/FxznT/1/](http://jsfiddle.net/FxznT/1/)

这是我一直在参考的原始网站：http: [//clients.taylordesign.com/LCBP/site/home.html](http://clients.taylordesign.com/LCBP/site/home.html)

我错过了什么？我已经在使用 CSS 重置。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T21:43:24.720

您可以尝试使用 CSS hack 仅选择 Firefox：

```
@-moz-document url-prefix() { 
  .ul.topNav li {
     padding: 16px 11px;
  }
} 
```

# python - psycopg2 安装：ValueError：[u'path']

> ID：11678347
> 
> 赞同：-2
> 
> 时间：2012-07-26T21:33:27.160
> 
> 标签：python, pip, psycopg2

尝试在我的 Windows 7（64 位）机器上安装 Django 的 Postgres 驱动程序时，该过程失败并出现大量输出，然后出现以下错误：

```
File "C:\Python27\lib\distutils\msvc9compiler.py", line 299, in query_vcvarsall

raise ValueError(str(list(result.keys())))

ValueError: [u'path'] 
```

安装命令是

```
pip install psycopg2 
```

你能帮我理解和纠正这个错误吗？

完整输出在这里： http: [//pastebin.com/BhLGe4Ti](http://pastebin.com/BhLGe4Ti)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:05:45.330

我通过安装[win-psycopg](http://www.stickpeople.com/projects/python/win-psycopg/)而不是使用 pip 安装 psycopg2 解决了这个问题。

# java - Lucene 4.0 索引编写器 - 创建单个索引

> ID：11678350
> 
> 赞同：0
> 
> 时间：2012-07-26T21:33:30.357
> 
> 标签：java, search, text, lucene

我正在尝试实现最简单的 lucene 搜索。我[以此](http://www.informit.com/articles/article.aspx?p=461633&seqNum=2)为出发点。

我可以理解示例代码：

```
public static void indexHotel(Hotel hotel) throws IOException {
    IndexWriter writer = (IndexWriter) getIndexWriter(false);
    Document doc = new Document();
    doc.add(new Field("id", hotel.getId(), Field.Store.YES,
    Field.Index.NO));
    doc.add(new Field("name", hotel.getName(), Field.Store.YES,
    Field.Index.TOKENIZED));
    doc.add(new Field("city", hotel.getCity(), Field.Store.YES,
    Field.Index.UN_TOKENIZED));
    doc.add(new Field("description", hotel.getDescription(),
    Field.Store.YES,
    Field.Index.TOKENIZED));
    String fullSearchableText = hotel.getName() + " " + hotel.getCity() + " " + hotel.getDescription();

    doc.add(new Field("content", fullSearchableText,
    Field.Store.NO,
    Field.Index.TOKENIZED));
    writer.addDocument(doc);
} 
```

我无法在这段代码中得到的东西是`getIndexWriter(false)`做什么。我关注的帖子中没有提到这种方法。此外在另一个代码块中：

```
public void rebuildIndexes() throws IOException {
   //
   // Erase existing index
   //
   getIndexWriter(true);
   //
   // Index all hotel entries
   //
   Hotel[] hotels = HotelDatabase.getHotels();
   for(Hotel hotel: hotels) {
     indexHotel(hotel);
   }
   //
   // Don’t forget to close the index writer when done
   //
   closeIndexWriter();
 } 
```

使用了一些未定义的方法。

对于像我这样的初学者来说有点混乱。

我只想创建一个索引。我认为`getIndexWriter(true);`并且`closeIndexWriter()`是一些实用方法只是为了得到`IndexWriter`，但我不能对它的用途做出任何`true`假设`getIndexWriter(true);`。

通过关注其他一些帖子，我对 IndexWriter 的创建感到更加困惑。

如果我做错了什么，有人可以让我走上正确的道路吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T22:48:06.013

好吧，取决于您的索引（RAM 或文件系统）在哪里，您可以打开不同的 indexWriters。假设您正在尝试将索引写入文件系统，您应该具有以下内容：

```
public static final Version luceneVersion = Version.LUCENE_40;

IndexWriter getIndexWriter(){

    Directory indexDir = FSDirectory.open(new File( INDEX_PATH ));

    IndexWriterConfig luceneConfig = new IndexWriterConfig(
                luceneVersion, new StandardAnalyzer(luceneVersion));

    return(new IndexWriter(indexDir, luceneConfig));
   } 
```

注意分析器类“StandardAnalyzer”，您应该根据应用要求选择分析器。我认为 StandardAnalyzer 足以满足您的需求。

输入参数可能会询问是否应该创建一个新作家？

# ios - iOS - 子类化 UIControl 以进行自定义开关 - 如何检测开/关？

> ID：11678355
> 
> 赞同：0
> 
> 时间：2012-07-26T21:33:46.547
> 
> 标签：ios, uiswitch, uicontrol

我正在使用此类进行自定义开关：[https ://github.com/robertchin/rcswitch](https://github.com/robertchin/rcswitch)

它是 UIControl 的子类。我可以打开和关闭它，但是如何在代码中检测到它？UISwitch 有一个 .on 属性，我可以在值更改时检查它，但 UIControl 没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:52:48.643

根据类的[头文件](https://github.com/robertchin/rcswitch/blob/master/Classes/RCSwitch.h)，`RCSwitch`有一个`on`属性，所以你应该可以使用`mySwitch.on`. 或者，您可以使用`[mySwitch isOn]`在属性声明中指定的 getter。

# ruby-on-rails-3 - 根据rails中模型上的标志限制下拉

> ID：11678357
> 
> 赞同：0
> 
> 时间：2012-07-26T21:33:49.050
> 
> 标签：ruby-on-rails-3, activerecord

我想根据 rails 表格上的状态列来限制下拉框的选项。例如，此模型将具有 T 或 F 的状态标志。如果该行是 TI，希望它在下拉框中显示为选项。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:36:46.663

这应该不难，只需在模型中创建一个返回散列的类方法，传入你需要的任何信息（T 或 F），只要它返回一个散列形式，助手就应该能够解析它。我一直使用模型内容填充选择框，原理相同。

# java - 将 JavaSwing 应用程序大小限制为屏幕大小？

> ID：11678361
> 
> 赞同：3
> 
> 时间：2012-07-26T21:34:06.180
> 
> 标签：java, swing, user-interface

我的应用程序目前对于`window(monitor)`. 我在应用程序中构建了一个滚动条来适应它，但它仍然延伸到窗口上而不是使用滚动条。原来，外框的初始化调用`pack()`, then `setVisible(true)`。

我尝试设置框架的大小，但似乎没有效果。外框是标头，我调用`getWindow()`它来设置尺寸。调用`mframe.getWindow().setSize(640, 480);`没有任何作用。

这是当前的行为： ![在此处输入图像描述](../Images/89716d5ef8ed36b96b849b56b9809679.png)

这就是我想要的： ![在此处输入图像描述](../Images/13319afec043b7dba9ae1e79c20af74c.png)

编辑：在启动时将应用程序设置为全屏的好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T21:37:55.050

> 我尝试设置框架的大小，但似乎没有效果。

那是因为你在窗口上调用了 pack。`pack()`将组件的大小设置为其包含的组件的最大值，这使您`setSize()`无用。

从api：

> `pack()`使此 Window 调整大小以适合其子组件的首选大小和布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T22:33:00.880

也许您想结合使用[Toolkit#getScreenSize](http://docs.oracle.com/javase/6/docs/api/java/awt/Toolkit.html#getScreenSize%28%29)和[setSize](http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html#setSize%28int,%20int%29)。类似的东西（例如，将其设置为屏幕大小的特定百分比）：

```
Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
component.setSize((int)(screenSize.width * widthPercent),
                  (int)(screenSize.height * heightPercent)); 
```

如果您希望您的应用程序开始最大化，您可能需要查看[setExtendedState](http://docs.oracle.com/javase/6/docs/api/java/awt/Frame.html#setExtendedState%28int%29)，例如

```
myFrame.setExtendedState(Frame.MAXIMIZED_BOTH); 
```

# sql-server-2008 - SSIS包中的输出变量名和值

> ID：11678365
> 
> 赞同：0
> 
> 时间：2012-07-26T21:34:35.910
> 
> 标签：sql-server-2008, ssis, custom-component

我正在尝试输出所有用户变量的名称及其值，然后将这些值存储在表中。我设法解析变量及其值，但现在它给了我所有变量（系统和用户）。另外，我似乎无法弄清楚如何将值分配给表。任何帮助将不胜感激..以下是我到目前为止的想法。

```
using System;
using System.Data;
using Microsoft.SqlServer.Dts.Runtime;
using System.Windows.Forms;
//using System;
////using Microsoft.SqlServer.Dts.Runtime;
namespace ST_81ec2398155247148a7dad513f3be99d.csproj
{
    [System.AddIn.AddIn("ScriptMain", Version = "1.0", Publisher = "", Description = "")]
    public partial class ScriptMain : Microsoft.SqlServer.Dts.Tasks.ScriptTask.VSTARTScriptObjectModelBase
    {

        #region VSTA generated code
        enum ScriptResults
        {
            Success = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Success,
            Failure = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Failure
        };
        #endregion

    public void Main()
    {

        Microsoft.SqlServer.Dts.Runtime.Application app = new Microsoft.SqlServer.Dts.Runtime.Application();
        // Load a sample package that contains a variable that sets the file name.
        Package pkg = app.LoadPackage(
          @"C:\PackagePath" +
          @"Template0719.dtsx",
          null);
        Variables pkgVars = pkg.Variables;
        foreach (Variable pkgVar in pkgVars)
        {

            MessageBox.Show(pkgVar.Name);
            MessageBox.Show(pkgVar.Value.ToString());
        }
        Console.Read();
    }
    }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T19:06:32.470

这对我有用

我创建了一个包含每种类型变量的包，因此以 SSIS 数据类型命名， ![每个数据类型的变量](../Images/75975cfd230741c966eaa68ec7852a7c.png)

使用您的应用程序和 pkg 声明/实例，我使用了以下内容

```
 boolean interactiveMode = true;
        foreach (Variable item in pkg.Variables)
        {
            try
            {
                if (!item.Namespace.Equals("System"))
                {
                    // item.Value.ToString()
                    string value = (item.Value == null) ? string.Empty : item.Value.ToString();
                    string name = item.Name;
                    string scope = item.Namespace;
                    string type = item.DataType.ToString();
                    string output = string.Format("Name {0, -20} | Scope {1, -10} | Data Type {2, -10} | Value {3, -20}", name, scope, type, value);
                    if (interactiveMode)
                    {
                        MessageBox.Show(output);
                    }
                    else
                    {
                        bool fireAgain = true;
                        Dts.Events.FireInformation(0, "Variable enumeration", output, string.Empty, 0, ref fireAgain);
                    }

                }

            }
            catch (Exception ex)
            {

                Dts.Events.FireError(0, "enumerate", ex.ToString(), string.Empty, 0);
            }
        } 
```

产生预期值

```
---------------------------

---------------------------
Name VariableDbNull       | Scope User       | Data Type Empty      | Value                     
---------------------------
OK   
---------------------------

---------------------------

---------------------------
Name VariableDouble       | Scope User       | Data Type Double     | Value 0                   
---------------------------
OK   
--------------------------- 
```

# javascript - 如何隐藏地面覆盖而不是通过调用 setMap(null) 将其移除

> ID：11678369
> 
> 赞同：0
> 
> 时间：2012-07-26T21:34:44.587
> 
> 标签：javascript, google-maps, google-maps-api-3

我在地图上加载了多个 GroundOverlay，我尝试让它们保持有序。看来我唯一能做的就是一个一个地加载（创建 GroundOverlay 对象和 setMap(map)）（如果有其他更好的方法，请告诉我），我现在可以忍受。但是，我也有控件（复选框）来打开/关闭单个图层，最终顺序完全混乱。例如，假设我有 L1、L2、L3 三层从下到上排序，如果我关闭 L2 并再次打开它，L2 将位于 L3 的顶部，因为 L2 在关闭时从地图中删除。

我的第一次尝试是找到一种方法来管理 GroundOverlays 的顺序，但我失败了（找不到任何东西）；第二次尝试是尝试在关闭图层时是否可以“隐藏”图层，而不是在调用 setMap(null) 时删除图层。

有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:32:18.577

您可以将不透明度设置为零：

```
myGroundOverlay.setOpacity(0); 
```

# vba - 根据多个条件复制同一行中的多个单元格

> ID：11678370
> 
> 赞同：0
> 
> 时间：2012-07-26T21:34:45.227
> 
> 标签：vba, excel

背景：我有一个用于跟踪信用卡应付账款的 Excel 文件。有 18 列数据（A 到 R）。在这 18 列中，我想使用一个宏来过滤特定的声明日期，然后是特定的公司代码。

每个公司代码将被分配一个新的工作表。在每个工作表中，我想根据标准从主工作表中引入特定的单元格。例如，宏应首先对语句日期（2012 年 7 月 31 日）排序，然后是公司代码 (ABC)。然后，我需要运行一个循环来提供详细信息。例如，在主工作表中，需要将 P 列中的 GL 代码复制到 H 列中的“ABC”工作表中。

以下是需要发生的事情的摘要：
1\. 清除过滤器范围 (A2:R2) 中的所有过滤器
2\. 在单元格 A3 开始的“主”工作表上过滤单元格 A1 中的日期（日期列）
3\. 过滤公司代码（ ABC) 在 O 列

这应该为特定公司的报表活动提供数据集。以下是接下来需要发生的事情：
4\. 将“主”工作表中的 P 列单元格值复制到“ABC”工作表中的 C
列 5.将“主”工作表中的 N 列单元格值复制到“ABC”工作表中的 D 列
6.复制“主”工作表中的 R 列单元格值到“ABC”工作表中的 H
列 7\. 将“主”工作表中的 F 列单元格值复制到“ABC”工作表中的 G 列，但最多 30 个字符
8\. 如果 G 列在“主”工作表 >=0，然后将该值复制到“ABC”工作表中的 E 列（否则需要为零）
9\. 如果“主”工作表中的 G 列值 <0，

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T06:06:54.843

这是一个可以帮助您入门的子程序。我没有实施你的所有步骤，但我相信这足以让你自己完成。如果您发现此答案有助于您到达目的地，请接受此答案。如果您在此处遇到任何问题，请在此答案中添加评论以寻求澄清。

我只测试了虚拟数据，但我所做的工作是成功的。

```
Option Explicit

Sub TransferData()
Dim Master As Worksheet
Dim NewSheet As Worksheet
Dim CompanyList As Object
Dim lRow As Long, lMaxRow As Long, lNewRow As Long
Dim vDictItem As Variant

Set CompanyList = CreateObject("Scripting.Dictionary")

Set Master = ThisWorkbook.Sheets("Master")

If Master.FilterMode Then
    Master.ShowAllData
End If

Master.Range("A:R").Sort Master.Range("A2"), xlAscending, Master.Range("O2"), , xlAscending, , , xlYes

lMaxRow = Master.Range("A" & Master.Rows.Count).End(xlUp).Row
For lRow = 3 To lMaxRow
    If Not CompanyList.Exists(Master.Range("A" & lRow).Value) Then
        CompanyList.Add Master.Range("A" & lRow).Value, Master.Range("A" & lRow).Value
    End If
Next lRow

For Each vDictItem In CompanyList.Keys
    Master.Range("A3:R" & lMaxRow).AutoFilter 1, vDictItem
    If Master.Cells.SpecialCells(xlCellTypeVisible).Count > 0 Then
        Set NewSheet = ThisWorkbook.Worksheets.Add
        NewSheet.Name = vDictItem
        lNewRow = 1
        For lRow = 3 To lMaxRow
            If Master.Rows(lRow).Hidden = False Then
                lNewRow = lNewRow + 1
                NewSheet.Range("C1").Value = Master.Range("P1").Value
                NewSheet.Range("C" & lNewRow).Value = Master.Range("P" & lRow).Value
                NewSheet.Range("G1").Value = Master.Range("F1").Value
                NewSheet.Range("G" & lNewRow).Value = Left(Master.Range("F" & lRow).Value, 30)
                NewSheet.Range("E1").Value = Master.Range("G1").Value & " (POS)"
                NewSheet.Range("F1").Value = Master.Range("G1").Value & " (NEG)"
                If Master.Range("G" & lRow).Value >= 0 Then
                    NewSheet.Range("E" & lNewRow).Value = Left(Master.Range("G" & lRow).Value, 30)
                Else
                    NewSheet.Range("F" & lNewRow).Value = Left(Master.Range("G" & lRow).Value, 30)
                End If
            End If
        Next lRow
    End If
Next vDictItem

End Sub 
```

# jquery - 使用 jQuery DataTables 在 FireFox 中出现样式错误

> ID：11678372
> 
> 赞同：2
> 
> 时间：2012-07-26T21:35:01.840
> 
> 标签：jquery, html, firefox, datatables, html-table

我正在使用我目前拥有的表来实现数据表，但是在 Chrome 和 IE 中，它正确加载看起来像： ![chrome和ie加载正确](../Images/87c8927bb805dc5cec6f9174d0844ddf.png) 更大的图片：http: [//i.imgur.com/Ms6lu.png](https://i.imgur.com/Ms6lu.png)

但是，当我使用 Firefox 时，它看起来像这样： ![令人惊讶的Firefox搞砸了](../Images/8091ba5393fa8d154d4c8a8e31455ca9.png)大图：http: [//i.imgur.com/fZcO8.png](https://i.imgur.com/fZcO8.png)

看起来插件没有在“显示 X 条目”之后创建新行。

表格设置为 Width="100%"。jquery如下：

```
$(document).ready(function () {
    var oTable = $('#table1').dataTable({
    "bStateSave": true,
    });
}); 
```

创建表如下：

```
<table id="table1" border="0" style="width:100%;">
    <thead>
        <tr>
            <td>ID</td><td>UserName</td><td>Sample Stuff</td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1234</td><td>user1</td><td>random stuff</td>
        </tr>
    </tbody>
    <tfoot>
        <tr>
            <td>
                <span>
                    <input type="text"  size="11" placeholder="Filter ID"/>
                </span>
            </td>
            <td>
                <span>
                    <input type="text"   size="10" Placeholder="Filter Username" />
                </span>
            </td>
            <td>
                <span>
                    <input type="text"  size="4"  Placeholder="Filter SampleStuff"/>
                </span>
            </td>
        </tr>
    </tfoot>
</table> 
```

关于为什么会发生这种情况的任何想法？我已经研究过与 Datatables 相比的其他替代方案，但 datatables 看起来是最好用的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T09:15:23.983

试试这个“sDom”：'T<"clear">lfrtip'，其中 clear 将清除浮动

```
$(document).ready(function () {
    var oTable = $('#table1').dataTable({
    "sDom": 'T<"clear">lfrtip',
    "bStateSave": true,
    });
}); 
```

# php - PHP/Codeigniter elseif 不处理

> ID：11678373
> 
> 赞同：0
> 
> 时间：2012-07-26T21:35:10.303
> 
> 标签：php, codeigniter

我似乎无法在下面的 php 代码中处理 elseif。我的数据库设置如下所示：

![在此处输入图像描述](../Images/85e640bfbf59110196332595df36138d.png)

```
<?php // the following php is the bootstrapper for the friendship connector
    $selectedId = $_REQUEST['id'];
    $myuserid = $this->session->userdata('userid');

    $friendshipQuery = $this->db->query("SELECT * FROM friends");
    $row = $friendshipQuery->row();
    foreach ($friendshipQuery->result() as $row) {
        if ($myuserid == $selectedId) { ?>
            <script type="text/javascript">
                $(document).ready(function() {
                    $("#addFriend").hide();
                });
            </script>
<?php } elseif ($row->relationType == 'requested') { ?>
            <script type="text/javascript">
                $(document).ready(function() {
                    alert("hello");
                    $("#addFriend").replaceWith(<input type="submit" value="Accept Friend" style="width: 95px; height: 28px" class="button1" />);
                });
            </script>
<?php } } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:42:29.327

你的问题就在这里：

```
$friendshipQuery = $this->db->query("SELECT * FROM friends");
    $row = $friendshipQuery->row();
    foreach ($friendshipQuery->result() as $row) { 
```

您将查询分配为 ->row() 元素。取出那条线，在 foreach 上添加以下内容：

```
foreach($friendshipQuery->result() as $row) 
```

那应该解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T21:38:18.453

你检查过生成的html吗？如果它不包含该部分，则意味着它`$myuserid == $selectedId`始终是正确的。

# properties - 静态属性的初始化

> ID：11678376
> 
> 赞同：0
> 
> 时间：2012-07-26T21:35:26.263
> 
> 标签：properties, initialization, haxe

不允许使用以下代码：

```
public static var steps(default, setSteps):Int = 1; 
```

是否可以在没有静态构造函数的情况下执行此操作（如果我是正确的，则为 __init__）？

特别是我只想让步骤成为一个公开可读的变量，它也应该是公开可写的，但只允许正值。将强制执行此约束的 setSteps 函数。

最干净（最紧凑）的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:51:11.703

我没有 haxe 的最新发布版本，但在夜间构建版本中，此代码是允许的并且可以按预期工作。

但是，如果你的 haxe 版本真的不支持这种初始化，那么使用**init**是唯一正确的方法（同时也是最紧凑的）来做你想做的事。

# python - 在 Windows 上使用 python 设置打印机权限不起作用

> ID：11678379
> 
> 赞同：0
> 
> 时间：2012-07-26T21:35:35.040
> 
> 标签：python, acl

我是 Python 新手。我正在尝试为此代码中的所有用户设置访问权限。脚本运行，但未反映或设置访问权限。我正在尝试为这些用户的所有打印机设置以下权限：

*   每个人 - 打印
*   CREATOR OWNER - 管理文档
*   任何管理员 - 打印、管理打印机、管理文档
*   管理员 - 打印、管理打印机、管理文档
*   所有其他用户 - 打印

这是代码：

```
import win32com.client
import win32security
from win32security import DACL_SECURITY_INFORMATION, TRUSTEE_IS_NAME, TRUSTEE_IS_USER
import win32net
import win32security
import win32netcon
import win32file

ManagePrinters = 983052
ManageDocuments = 983088
Print = 131080
ReadPermissions = 131072
GenericAll = 268435456
GenericExecute =  536870912

administrators = []

compliant = True

for x in win32net.NetLocalGroupGetMembers("localhost","Administrators", 2)[0]:
username =  x["domainandname"]
usersid = str(win32security.LookupAccountName("",username)[0])[6:]
administrators.append(usersid)

info=win32security.DACL_SECURITY_INFORMATION

strComputer = "."
objWMIService = win32com.client.Dispatch("WbemScripting.SWbemLocator")
objSWbemServices = objWMIService.ConnectServer(strComputer,"root\cimv2")
colItems = objSWbemServices.ExecQuery("SELECT * FROM Win32_Printer")
for objItem in colItems:
secDes = win32security.GetNamedSecurityInfo(objItem.DeviceID, win32security.SE_PRINTER, win32security.DACL_SECURITY_INFORMATION)
dacl = secDes.GetSecurityDescriptorDacl()
for count in range(dacl.GetAceCount()):
    ace = dacl.GetAce(count)
    accessMask = ace[1]
    sidArr = str(ace[2]).split(":",1)
    sid = sidArr[1]
    newAcl = win32security.ACL(128)

    if "S-1-3-0" in sid:
        newAcl.AddAccessAllowedAce(Print, ace[2])
        newAcl.AddAccessAllowedAce(ManageDocuments, ace[2])
        newAcl.AddAccessAllowedAce(GenericAll, ace[2])
        newAcl.AddAccessAllowedAce(ReadPermissions, ace[2])
    elif "S-1-1-0" in sid:
        newAcl.AddAccessAllowedAce(Print, ace[2])
        newAcl.AddAccessAllowedAce(GenericExecute, ace[2])
        newAcl.AddAccessAllowedAce(ReadPermissions, ace[2])
        newAcl.AddAccessAllowedAce(ManageDocuments, ace[2])
    elif "S-1-5-32-544" in sid:
        newAcl.AddAccessAllowedAce(Print, ace[2])
        newAcl.AddAccessAllowedAce(ManageDocuments, ace[2])
        newAcl.AddAccessAllowedAce(GenericAll, ace[2])
        newAcl.AddAccessAllowedAce(ReadPermissions, ace[2])
        newAcl.AddAccessAllowedAce(ManagePrinters, ace[2])
        newAcl.AddAccessAllowedAce(GenericExecute, ace[2])
        newAcl.AddAccessAllowedAce(ReadPermissions, ace[2])
    elif sid in administrators:
        newAcl.AddAccessAllowedAce(Print, ace[2])
        newAcl.AddAccessAllowedAce(ManageDocuments, ace[2])
        newAcl.AddAccessAllowedAce(GenericAll, ace[2])
        newAcl.AddAccessAllowedAce(ReadPermissions, ace[2])
        newAcl.AddAccessAllowedAce(ManagePrinters, ace[2])
        newAcl.AddAccessAllowedAce(GenericExecute, ace[2])
        newAcl.AddAccessAllowedAce(ReadPermissions, ace[2])
    else:
        newAcl.AddAccessAllowedAce(Print, ace[2])
        newAcl.AddAccessAllowedAce(GenericExecute, ace[2])
        newAcl.AddAccessAllowedAce(ReadPermissions, ace[2])

    secDes.SetSecurityDescriptorDacl(1, newAcl, 0)

print "done" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:28:57.723

看起来您实际上并未将修改后的 DACL 应用于打印机。尝试使用 win32security.SetNamedSecurityInfo。

# postgresql - postgres全文搜索字数

> ID：11678383
> 
> 赞同：2
> 
> 时间：2012-07-26T21:36:14.620
> 
> 标签：postgresql, full-text-search

我一直在 postgres 中搞乱全文搜索，我想知道，是否可以返回所有行的总字数？

所以，假设你有

```
 text_col
 _______
 'dog'
 'dog cat'
 'dog bird dog' 
```

“狗”的计数应该是四，“猫”的计数应该是一，鸟也应该是一。

现在，我也将所有 tsvectors 保存到 gin 索引列中。

当然，这将跨越所有行，您可以在其中说类似的话

```
select max(ts_count(text_col_tsvector)) from mytable; 
```

（这是我编的，但我希望你能大致了解）

是否只能返回词位的计数，如果可以，如何返回返回的词位的字典（或数组）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T22:41:28.027

怎么样：

```
select * from ts_stat('select text_col_tsvector from mytable') 
```

编辑：你的意思是：

```
with words as (
select regexp_split_to_table(text_column , E'\\W+') as word
from mytable
)
select word, count(*) as cnt from words group by 1 order by 2 desc 
```

?

# c# - 将接口派生类转换为另一个派生类

> ID：11678386
> 
> 赞同：0
> 
> 时间：2012-07-26T21:36:19.360
> 
> 标签：c#, casting

我正在尝试完成一种方法，将从接口派生的给定对象转换为也从同一接口派生的不同类型。这是为了防止必须完全重建对象。

```
interface IItem
{
}

class FryingPan : IItem
{
}

class CookingPan : IItem
{
} 
```

但这里有一个问题，我不“知道”我要投射到什么类型。我只知道类型变量。这是从组合框设置的。

```
Type SelectedItem { get; set; } 
```

这可以做到吗（最好不必实施`IConvertable`）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T22:19:04.787

如果您尝试将 CookingPan 转换为 FryingPan，则无法完成。一个必须从另一个派生才能铸造。想象;

```
interface IFruit
{ }

class Apple : IFruit
{ }

class Orange : IFruit
{ } 
```

显然，苹果永远不可能是橙子，反之亦然。但是，您*可以*将 Apple 或 Orange 投射到 IFruit，因为它们都有共同的祖先。或者，如果你是一个疯狂的科学家，也许你可以以某种方式**将苹果变成橘子。**;-)

我会说你以错误的方式处理你的问题。如果您需要根据 IItem 的 .Type 对其执行某些特定操作，那么您已经拥有该信息。如果您需要一些通用的排序标准，请考虑将其移至基类/接口，作为所有派生类型的共同祖先。

# c# - 使用 LINQ 进行标记的枚举合并（组合的逆）

> ID：11678389
> 
> 赞同：2
> 
> 时间：2012-07-26T21:36:34.337
> 
> 标签：c#, linq, enums, enum-flags

我正在尝试生成标记枚举的逆。下面是枚举：

```
[Flags]
public enum MyType
{
  Unknown = 0,
  A = 1 << 0,
  B = 1 << 2,
  C = 1 << 3,
  D = 1 << 4,
  E = 1 << 5,
  F = 1 << 6
} 
```

我已经定义了一个静态`MyType mtGroup1`值为`(A | B)`. 我想生成这个的倒数，不包括`Unknown`.

我的解决方案：

```
MyType t = MyType.Unknown;
foreach (var vType in Enum.GetValues(typeof(MyType)).OfType<MyType>())
{
    if ((mtGroup1 & vType) != vType)
         t = t | vType;   //Consolidates into a single enum, excluding unknown
} 
```

的结果值为，这`t`是`C | D | E | F`期望的结果。这种方法有效，但我希望有一种更简单的方法来使用 LINQ 进行整合，如上所示（如果更简单，其他非 LINQ 方法也可以接受）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T21:39:47.957

我的[不受约束的旋律](http://unconstrained-melody.googlecode.com)项目使这变得非常简单：

```
MyType inverse = mtGroup1.UsedBitsInverse(); 
```

该项目包含许多有用的方法（许多写为扩展方法），它们使用“不可言说”的泛型约束（C# 编译器可以理解但不能用 C# 表达的约束）将泛型类型参数约束为枚举类型或代表。通过这种方式，上面的代码可以在没有任何装箱的情况下工作 - 它实际上一次计算出枚举类型的所有“有趣”位，这是该类型第一次与 Unconstrained Melody 一起使用，所以这个操作非常高效.

如果您不想使用 Unconstrained Melody，您可以编写自己的方法来查找枚举的“使用位”一次，然后使用：

```
MyType t = UsedBitsOfMyType & ~mtGroup1; 
```

# sql-server - SQL Server 2008 R2 SSMS 默认登录用户名

> ID：11678390
> 
> 赞同：1
> 
> 时间：2012-07-26T21:36:35.523
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2, ssms

我最近在我的服务器上创建了几个测试帐户并使用 SSMS 登录。当我启动 SSMS 时，我的默认登录现在是测试帐户之一。如何清除登录下拉列表或将我的帐户重置为默认登录用户名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:44:25.290

看看这篇博文：http: [//blog.sqlauthority.com/2008/11/05/sql-server-clear-drop-down-list-of-recent-connection-from-sql-server-management-工作室/](http://blog.sqlauthority.com/2008/11/05/sql-server-clear-drop-down-list-of-recent-connection-from-sql-server-management-studio/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:39:16.233

我删除了文件夹 C:\Users\me\AppData\Roaming\Microsoft\Microsoft SQL Server\100\Tools\Shell 中的 sqlstudio.bin 文件。这清除了 SSMS 登录信息

注意 - 这也会删除您的服务器/实例历史记录，而不仅仅是服务器的默认数据库帐户

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T20:01:15.073

如果您只是想通过保存的凭据快速连接到您喜欢的数据库，那么在这篇文章中给出了答案： [https ://stackoverflow.com/a/11204012/1249405](https://stackoverflow.com/a/11204012/1249405)

# ssl - Heroku端点ssl：是否可以在同一个域上拥有https和http？

> ID：11678391
> 
> 赞同：1
> 
> 时间：2012-07-26T21:36:37.067
> 
> 标签：ssl, heroku

新的 heroku 端点 ssl 是否支持在单个域上同时拥有 http 和 https？

我想通过[http://www.mydomain.com](http://www.mydomain.com)提供一些页面，并通过[https://www.mydomain.com/profile](https://www.mydomain.com/profile)提供个人资料页面。

使用旧的 ssl，我需要为 https 创建secure.mydomain.com，但如果可能的话，我宁愿不这样做。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:36:09.440

是的，没关系。您使用端点 SSL 添加的所有内容都是支持 SSL 的实际应用程序前面的入口点。HTTP 仍然可以很好地通过这个，但显然不安全。

# c++ - 为什么我的服务器总是响应“无证书”？

> ID：11678392
> 
> 赞同：1
> 
> 时间：2012-07-26T21:36:37.660
> 
> 标签：c++, c, ssl, openssl, protocols

我正在尝试使用来自以下网址的 SSL 客户端/服务器示例：[http](http://simplestcodings.blogspot.com.br/2010/08/secure-server-client-using-openssl-in-c.html) ://simplestcodings.blogspot.com.br/2010/08/secure-server-client-using-openssl-in-c.html来创建安全连接使用 SSLv3，但没有成功。

我更改了客户端以尝试在客户端加载证书，添加了`LoadCertificates`服务器示例中存在的功能。我按照[本教程](https://help.ubuntu.com/community/OpenSSL)创建了我的证书。

我的问题是，当我连接到服务器时，客户端可以看到有关服务器证书的信息，但服务器从不加载有关客户端证书的信息。

这是我的客户代码：

```
//SSL-Client.c
#include <stdio.h>
#include <errno.h>
#include <unistd.h>
#include <malloc.h>
#include <string.h>
#include <sys/socket.h>
#include <resolv.h>
#include <netdb.h>
#include <openssl/ssl.h>
#include <openssl/err.h>

#define FAIL    -1

    //Added the LoadCertificates how in the server-side makes.    
void LoadCertificates(SSL_CTX* ctx, char* CertFile, char* KeyFile)
{
 /* set the local certificate from CertFile */
    if ( SSL_CTX_use_certificate_file(ctx, CertFile, SSL_FILETYPE_PEM) <= 0 )
    {
        ERR_print_errors_fp(stderr);
        abort();
    }
    /* set the private key from KeyFile (may be the same as CertFile) */
    if ( SSL_CTX_use_PrivateKey_file(ctx, KeyFile, SSL_FILETYPE_PEM) <= 0 )
    {
        ERR_print_errors_fp(stderr);
        abort();
    }
    /* verify private key */
    if ( !SSL_CTX_check_private_key(ctx) )
    {
        fprintf(stderr, "Private key does not match the public certificate\n");
        abort();
    }
}

int OpenConnection(const char *hostname, int port)
{   int sd;
    struct hostent *host;
    struct sockaddr_in addr;

    if ( (host = gethostbyname(hostname)) == NULL )
    {
        perror(hostname);
        abort();
    }
    sd = socket(PF_INET, SOCK_STREAM, 0);
    bzero(&addr, sizeof(addr));
    addr.sin_family = AF_INET;
    addr.sin_port = htons(port);
    addr.sin_addr.s_addr = *(long*)(host->h_addr);
    if ( connect(sd, (struct sockaddr*)&addr, sizeof(addr)) != 0 )
    {
        close(sd);
        perror(hostname);
        abort();
    }
    return sd;
}

SSL_CTX* InitCTX(void)
{   SSL_METHOD *method;
    SSL_CTX *ctx;

    OpenSSL_add_all_algorithms();  /* Load cryptos, et.al. */
    SSL_load_error_strings();   /* Bring in and register error messages */
    method = SSLv3_client_method();  /* Create new client-method instance */
    ctx = SSL_CTX_new(method);   /* Create new context */
    if ( ctx == NULL )
    {
        ERR_print_errors_fp(stderr);
        abort();
    }
    return ctx;
}

void ShowCerts(SSL* ssl)
{   X509 *cert;
    char *line;

    cert = SSL_get_peer_certificate(ssl); /* get the server's certificate */
    if ( cert != NULL )
    {
        printf("Server certificates:\n");
        line = X509_NAME_oneline(X509_get_subject_name(cert), 0, 0);
        printf("Subject: %s\n", line);
        free(line);       /* free the malloc'ed string */
        line = X509_NAME_oneline(X509_get_issuer_name(cert), 0, 0);
        printf("Issuer: %s\n", line);
        free(line);       /* free the malloc'ed string */
        X509_free(cert);     /* free the malloc'ed certificate copy */
    }
    else
        printf("No certificates.\n");
}

int main(int count, char *strings[])
{   SSL_CTX *ctx;
    int server;
    SSL *ssl;
    char buf[1024];
    int bytes;
    char *hostname, *portnum;
    char CertFile[] = "/home/myCA/cacert.pem";
    char KeyFile[] = "/home/myCA/private/cakey.pem";

    SSL_library_init();
 hostname=strings[1];
 portnum=strings[2];

    ctx = InitCTX();
    LoadCertificates(ctx, CertFile, KeyFile);
    server = OpenConnection(hostname, atoi(portnum));
    ssl = SSL_new(ctx);      /* create new SSL connection state */
    SSL_set_fd(ssl, server);    /* attach the socket descriptor */
    if ( SSL_connect(ssl) == FAIL )   /* perform the connection */
        ERR_print_errors_fp(stderr);
    else
    {   char *msg = "Hello???";

        printf("Connected with %s encryption\n", SSL_get_cipher(ssl));
        ShowCerts(ssl);        /* get any certs */
        SSL_write(ssl, msg, strlen(msg));   /* encrypt & send message */
        bytes = SSL_read(ssl, buf, sizeof(buf)); /* get reply & decrypt */
        buf[bytes] = 0;
        printf("Received: \"%s\"\n", buf);
        SSL_free(ssl);        /* release connection state */
    }
    close(server);         /* close socket */
    SSL_CTX_free(ctx);        /* release context */
    return 0;
} 
```

和服务器：

```
//SSL-Server.c
#include <errno.h>
#include <unistd.h>
#include <malloc.h>
#include <string.h>
#include <arpa/inet.h>
#include <sys/socket.h>
#include <sys/types.h>
#include <netinet/in.h>
#include <resolv.h>
#include "openssl/ssl.h"
#include "openssl/err.h"

#define FAIL    -1

int OpenListener(int port)
{   int sd;
    struct sockaddr_in addr;

    sd = socket(PF_INET, SOCK_STREAM, 0);
    bzero(&addr, sizeof(addr));
    addr.sin_family = AF_INET;
    addr.sin_port = htons(port);
    addr.sin_addr.s_addr = INADDR_ANY;
    if ( bind(sd, (struct sockaddr*)&addr, sizeof(addr)) != 0 )
    {
        perror("can't bind port");
        abort();
    }
    if ( listen(sd, 10) != 0 )
    {
        perror("Can't configure listening port");
        abort();
    }
    return sd;
}

SSL_CTX* InitServerCTX(void)
{   SSL_METHOD *method;
    SSL_CTX *ctx;

    OpenSSL_add_all_algorithms();  /* load & register all cryptos, etc. */
    SSL_load_error_strings();   /* load all error messages */
    method = SSLv3_server_method();  /* create new server-method instance */
    ctx = SSL_CTX_new(method);   /* create new context from method */
    if ( ctx == NULL )
    {
        ERR_print_errors_fp(stderr);
        abort();
    }
    return ctx;
}

void LoadCertificates(SSL_CTX* ctx, char* CertFile, char* KeyFile)
{
 /* set the local certificate from CertFile */
    if ( SSL_CTX_use_certificate_file(ctx, CertFile, SSL_FILETYPE_PEM) <= 0 )
    {
        ERR_print_errors_fp(stderr);
        abort();
    }
    /* set the private key from KeyFile (may be the same as CertFile) */
    if ( SSL_CTX_use_PrivateKey_file(ctx, KeyFile, SSL_FILETYPE_PEM) <= 0 )
    {
        ERR_print_errors_fp(stderr);
        abort();
    }
    /* verify private key */
    if ( !SSL_CTX_check_private_key(ctx) )
    {
        fprintf(stderr, "Private key does not match the public certificate\n");
        abort();
    }
}

void ShowCerts(SSL* ssl)
{   X509 *cert;
    char *line;

    cert = SSL_get_peer_certificate(ssl); /* Get certificates (if available) */
    if ( cert != NULL )
    {
        printf("Server certificates:\n");
        line = X509_NAME_oneline(X509_get_subject_name(cert), 0, 0);
        printf("Subject: %s\n", line);
        free(line);
        line = X509_NAME_oneline(X509_get_issuer_name(cert), 0, 0);
        printf("Issuer: %s\n", line);
        free(line);
        X509_free(cert);
    }
    else
        printf("No certificates.\n");
}

void Servlet(SSL* ssl) /* Serve the connection -- threadable */
{   char buf[1024];
    char reply[1024];
    int sd, bytes;
    const char* HTMLecho="<html><body><pre>%s</pre></body></html>\n\n";

    if ( SSL_accept(ssl) == FAIL )     /* do SSL-protocol accept */
        ERR_print_errors_fp(stderr);
    else
    {
        ShowCerts(ssl);        /* get any certificates */
        bytes = SSL_read(ssl, buf, sizeof(buf)); /* get request */
        if ( bytes > 0 )
        {
            buf[bytes] = 0;
            printf("Client msg: \"%s\"\n", buf);
            sprintf(reply, HTMLecho, buf);   /* construct reply */
            SSL_write(ssl, reply, strlen(reply)); /* send reply */
        }
        else
            ERR_print_errors_fp(stderr);
    }
    sd = SSL_get_fd(ssl);       /* get socket connection */
    SSL_free(ssl);         /* release SSL state */
    close(sd);          /* close connection */
}

int main(int count, char *strings[])
{   SSL_CTX *ctx;
    int server;
    char *portnum;

    char CertFile[] = "/home/myCA/cacert.pem";
    char KeyFile[] = "/home/myCA/private/cakey.pem";

    SSL_library_init();

    portnum = strings[1];
    ctx = InitServerCTX();        /* initialize SSL */
    LoadCertificates(ctx, CertFile, KeyFile); /* load certs */
    server = OpenListener(atoi(portnum));    /* create server socket */
    while (1)
    {   struct sockaddr_in addr;
        socklen_t len = sizeof(addr);
        SSL *ssl;

        int client = accept(server, (struct sockaddr*)&addr, &len);  /* accept connection as usual */
        printf("Connection: %s:%d\n",inet_ntoa(addr.sin_addr), ntohs(addr.sin_port));
        ssl = SSL_new(ctx);              /* get new SSL state with context */
        SSL_set_fd(ssl, client);      /* set connection socket to SSL state */
        Servlet(ssl);         /* service connection */
    }
    close(server);          /* close server socket */
    SSL_CTX_free(ctx);         /* release context */
} 
```

**编辑：**

我现在`LoadCertificates`在服务器上进行了如下更改。

```
void LoadCertificates(SSL_CTX* ctx, char* CertFile, char* KeyFile)
{
    //New lines
    if (SSL_CTX_load_verify_locations(ctx, CertFile, KeyFile) != 1)
        ERR_print_errors_fp(stderr);

    if (SSL_CTX_set_default_verify_paths(ctx) != 1)
        ERR_print_errors_fp(stderr);
    //End new lines

    /* set the local certificate from CertFile */
    if (SSL_CTX_use_certificate_file(ctx, CertFile, SSL_FILETYPE_PEM) <= 0)
    {
        ERR_print_errors_fp(stderr);
        abort();
    }
    /* set the private key from KeyFile (may be the same as CertFile) */
    if (SSL_CTX_use_PrivateKey_file(ctx, KeyFile, SSL_FILETYPE_PEM) <= 0)
    {
        ERR_print_errors_fp(stderr);
        abort();
    }
    /* verify private key */
    if (!SSL_CTX_check_private_key(ctx))
    {
        fprintf(stderr, "Private key does not match the public certificate\n");
        abort();
    }

    //New lines
    SSL_CTX_set_verify(ctx, SSL_VERIFY_PEER | SSL_VERIFY_FAIL_IF_NO_PEER_CERT, NULL);
    SSL_CTX_set_verify_depth(ctx, 4);
    //End new lines
} 
```

在这些更改之后`LoadCertificates`，当我启动服务器并从客户端建立连接时，它可以看到有关服务器证书的信息，服务器现在加载有关客户端证书的信息，但是 Wireshar 看到的协议没有改变。

实际上，按照接受的答案中建议的更改，服务器端和客户端都可以看到证书，但是查看来自 Wireshark 的连接显示协议 SSLv3(SSLv23, SSLv2, SSLv1) 不起作用。我不明白问题是什么。Wireshark 只显示协议 TCP 或 IPA，对于 IPA 数据包，信息始终是 RSL Malformed Packet。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T21:56:48.453

来自[http://www.openssl.org/docs/ssl/SSL_get_peer_certificate.html](http://www.openssl.org/docs/ssl/SSL_get_peer_certificate.html)

> 由于协议定义，TLS/SSL 服务器将始终发送证书（如果存在）。客户端只会在服务器明确请求时发送证书（请参阅 SSL_CTX_set_verify(3)）。

服务器应该调用类似：

```
SSL_CTX_set_verify(SSL_get_SSL_CTX(ssl), SSL_VERIFY_PEER, NULL); 
```

前：

```
if ( SSL_accept(ssl) == FAIL ) 
```

# haskell - 使用 Sublime 2 进行 Haskell 开发？

> ID：11678395
> 
> 赞同：29
> 
> 时间：2012-07-26T21:36:49.487
> 
> 标签：haskell, ghc, sublimetext, sublimetext2

Haskell 的 Sublime 2 集成的当前状态是什么？到目前为止，我看到了两个可能的包。一个代码高亮插件和一个 REPL 插件。

Haskell 有智能感知插件吗？也许也可以与 Hackage 集成？

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-19T07:03:29.513

[SublimeHaskell 插件](https://github.com/SublimeHaskell/SublimeHaskell)是使用 SublimeText 进行 Haskell 开发的现代选择。它维护得很好，并具有许多有用的功能。

其他非常有用的插件：

*   [Shell Turtlestein](https://github.com/misfo/Shell-Turtlestein)，它允许您在编辑器内通过一次击键快速输入 shell 命令。
*   [SublimeREPL](https://github.com/wuub/SublimeREPL)，它允许您从编辑器内部运行 GHCi。虽然还没有支持`cabal repl`。
*   [SideBarEnhancements](https://github.com/titoBouzout/SideBarEnhancements)，我主要用于重命名/移动文件而无需触摸鼠标。有了它，您可以点击`Ctrl/Cmd + P`并输入“重命名”或“移动”进入对话。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-31T12:00:30.320

我目前只使用 Sublime，虽然它并不是开箱即用的那么特别，但按照 Cubic 的建议安装 sublime-text-haskell 会更好一些（它会在您保存文件时编译并突出显示错误，并且显然增强了自动-完成）。

我已经尝试过编写自己的插件，但现实情况是，很多非常酷的可能性都难以实现，因为 API 实际上是一种限制（无法将类型签名等额外信息添加到自动完成选项中）例子）。

似乎开发人员正在努力添加一些请求的 API 功能，但在那之前，sublime-text-haskell 可能是最好的 Haskell 插件。

# iphone - 创建一个显示数字键盘但不格式化结果的文本输入

> ID：11678399
> 
> 赞同：1
> 
> 时间：2012-07-26T21:37:02.930
> 
> 标签：iphone, html

我正在开发与 iPhone 兼容的网页。我需要调出数字键盘，但要阻止该字段格式化输入。输入应该是由小数点分隔的三组数字 (##.##.##) 或由小数点分隔的四组数字 (##.##.##.##)。

```
type="number" 
```

格式化输入，以便只允许一个句点。

```
type="tel" 
```

在 iPad 上工作，但在 iPhone 上显示错误的键盘。

抱歉，如果这是一个简单的问题，我对 HTML 5 和 iPhone 开发都是新手。

# php - 计算数组中值的频率

> ID：11678400
> 
> 赞同：0
> 
> 时间：2012-07-26T21:37:10.990
> 
> 标签：php, arrays, histogram

我需要计算数组`$inputArr`中所有值的频率以构建频率直方图。

```
$query="SELECT delay FROM TestDB;";
$result=DatabaseConnector::ExecuteQueryArray($query);
$inputArr = array();
foreach ($result as $row) {
    $inputArr[] = array($row['delay']);
}

$freq = array_count_values ($inputArr); 
```

但`var_dump($freq)`返回数组（0）。这很奇怪，因为`var_dump($inputArr)`返回以下结果（只是一个示例）：

```
array(429) {
    [0]=>  array(1) { [0]=>  string(1) "0" }
    [1]=>  array(1) { [0]=>  string(1) "0" }
    [2]=>  array(1) { [0]=>  string(1) "0" }
    [3]=>  array(1) { [0]=>  string(1) "9" }
    [4]=>  array(1) { [0]=>  string(2) "12" }
    [5]=>  array(1) { [0]=>  string(1) "7" }
    [6]=>  array(1) { [0]=>  string(2) "15" }
    [7]=>  array(1) { [0]=>  string(1) "3" }
    [8]=>  array(1) { [0]=>  string(2) "13" }
    [9]=>  array(1) { [0]=>  string(1) "0" }
    [10]=>  array(1) { [0]=>  string(1) "1" }
    [11]=>  array(1) { [0]=>  string(2) "35" }
    [12]=>  array(1) { [0]=>  string(2) "24" }
    [13]=>  array(1) { [0]=>  string(2) "14" }
    [14]=>  array(1) { [0]=>  string(1) "4" }
    [15]=>  array(1) { [0]=>  string(1) "0" }
    [16]=>  array(1) { [0]=>  string(2) "26" }
    [17]=>  array(1) { [0]=>  string(1) "0" } 
```

从这个输出可以看出，`inputArr`具有重复值，例如 0。那么，为什么`$freq = array(0)`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T21:41:36.283

我会考虑跳过 PHP 部分并更改您的 SQL 语句来为您完成所有工作：

`SELECT delay, count(*) AS freq FROM TestDB GROUP BY delay;`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T21:40:51.897

```
$inputArr[] = array($row['delay']); 
```

您正在制作`$inputArr`数组中的每个元素。您在这里不需要二维数组，只需执行以下操作：

```
$inputArr[] = $row['delay']; 
```

# jquery - 悬停时突出显示多个元素

> ID：11678412
> 
> 赞同：2
> 
> 时间：2012-07-26T21:38:05.810
> 
> 标签：jquery, multiple-instances, jquery-hover

在悬停一个元素时突出显示多个元素是一个常见问题。[Stack](https://stackoverflow.com/questions/9576167/highlight-multiple-items-on-hovers-condition)上有一些关于这个问题的类似问题，但它通常只处理一层信息。

例如：*当我单击此框时，我想突出显示另一个框。*

我想将此功能添加到三层信息中，并使其可互换工作。

[看这里的小提琴。](http://jsfiddle.net/QW2xd/)

你可以看到它正在工作，但我想知道是否有办法做得更好。例如，当我每层有大约 12 个选项时是可以的，但如果是 50 或 100 怎么办？有没有办法简化它，所以在每个层中添加多个项目而不手动添加相对于 id 的每个类名会更容易？

似乎我可以通过将变量传递给函数来稍微打开显式类名，但我不知道如何获取悬停对象的所有类名，并将它们与另一个类中的类名进行检查层。

或者，如果你知道有一个插件可以神奇地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:53:00.870

这是使用 jQuery 实现它的最佳方式。您还可以使用应用于父元素的 CSS 和类来实现类似的效果。

例如：

```
<div>
    <div class="bob">This is Bob.</div>
</div> 
```

然后给父元素添加一个类：

```
<div class="show-bob">
    <div class="bob">This is Bob.</div>
</div> 
```

当然，这里的 CSS 很关键：

```
.bob { opacity: 0.75 }
.show-bob .bob { opacity: 1 } 
```

当然，您需要在那里添加一些 CSS 动画属性以实现真正的功能对等，但您明白了要点。

# email - 电子邮件中的 PNG Alpha 透明度

> ID：11678415
> 
> 赞同：7
> 
> 时间：2012-07-26T21:38:11.807
> 
> 标签：email, png, email-client

流行的电子邮件客户端是否支持 PNG alpha 透明度？

以下是我计划支持的主要电子邮件客户端列表：

基于网络*

*   邮箱
*   热邮件
*   雅虎

基于软件

*   展望 2007/2010
*   视窗邮件
*   Mac OSX 邮件
*   雷鸟

基于移动

*   iOS 设备邮件
*   Android 设备邮件

**这是基于浏览器的，所以不用担心这个*

从我所做的研究来看，似乎所有（基于移动设备的未列出，但我检查了我的手机）都支持 PNG（[http://en.wikipedia.org/wiki/Comparison_of_email_clients#Messages_features](http://en.wikipedia.org/wiki/Comparison_of_email_clients#Messages_features)）。但是，我不确定他们是否支持透明度。有人对此有什么好的见解吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T22:26:14.767

我已经想通了。我认为大多数人都会支持PNG。我认为outlook 2003 曾经有这个问题，因为它使用的是IE 渲染引擎。如今，PNG是相当可接受的。但是，要小心 alpha 透明度。

但无论如何，到目前为止，石蕊试纸是我用过的最好的东西。因此，如果您对在所有可用平台上进行测试非常认真，我建议您使用它

# python - 如何让 Python 找到这个模块？

> ID：11678418
> 
> 赞同：0
> 
> 时间：2012-07-26T21:38:23.323
> 
> 标签：python

大约 7 或 8 年前，我编写了一些 Python 程序，从那以后我就再也没有接触过它们，尽管它们仍然被我的公司大量使用。

我们已经搬到了一个新的服务器上，我正在尝试设置那个环境。我已经创建了所有代码，但显然我遇到了一些我不记得如何解决的路径问题。我至少有 6 年没有写过任何 Python 了。

在我试图执行的这个程序的顶部，我有这个：

```
from mycompany.initializer import Configurator 
```

我从一个名为的目录运行这个程序：

```
/usr/code/myapp/migrate 
```

“mycompany”python 模块位于：

```
/usr/code/mycompany 
```

我需要在我的用户帐户中导出什么路径或其他变量，以便上述程序可以找到适当的 Python 模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T21:43:17.087

您应该能够将目录添加到系统路径：

```
import sys
sys.path.append('/usr/code/') 
```

此外，不确定这是否在任何时候在 python 中发生了变化，但您应该`__init__.py`在“mycompany”目录（以及子目录中的任何模块组件/子模块......）中正确地使其成为可导入模块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T21:52:00.933

您可以手动添加路径（如 Kasapo 节目）。尽管我认为如果您设法正确安装模块以使其成为 python 搜索路径的一部分，那么它在 python 上会更可取。一种方法是使用 PYTHONPATH（即：在 shell 启动时导出 PYTHONPATH 以包含“/usr/code”）。

[http://docs.python.org/using/cmdline.html](http://docs.python.org/using/cmdline.html)

# c# - 动态更改部分视图的数据，同时维护绑定到父视图/模型的代码

> ID：11678420
> 
> 赞同：1
> 
> 时间：2012-07-26T21:38:48.580
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-partialview

我一直在努力思考如何制作这样的页面。我的模型包含一个对象列表，其中包含不同语言的文本字段。视图中有一个点需要动态更改以显示与下拉列表中选择的语言相关联的文本字段。文本字段还需要可编辑，以便在提交父表单时，文本字段需要在部分视图/模型中编辑后正确保存在父模型中。我在另一个页面中被暗示，部分视图是我应该尝试做的，也许是关于以编程方式为列表中的每种语言生成部分视图，并根据下拉菜单中的选择来更新/呈现正确的部分视图列表...？

我最初的尝试使我尝试使用对控制器的 ajax 调用来根据下拉菜单的值返回正确的局部视图，但我无法将其绑定到模型，因此无法更新/保存它提交主视图表单。到目前为止，这是我一直在使用的：

模型：

```
 public class EditModel
    {
        public List<TextField> TextFieldList;
        public List<string> DisplayList
            {
                get
                {
                    List<string> tempList = new List<string>();
                    foreach (TextField a in TextFieldList)
                    {
                        tempList.Add(a.Language.ToString() + "/" + a.Currency.ToString());
                    }
                    return tempList;
                }
            }
    } 
```

控制器：

```
 public ActionResult EditTextFields(int adId, int index)
    {
        Ad ad = this.Repository.GetById(adId);
        return PartialView("EditTextFields", ad.TextFieldsList[index]);
    } 
```

主视图：

```
 @model Models.EditModel
    <script type="text/javascript">

    $(function () {
        $(href('DisplayList').change(function () {
            var value = $(this).find(':selected').val();
            var adId = GetId();
            $.get('/Controllers/EditTextFields', "{\"adId\": " + String(adId) + ", \"index\":\"" + value + "\"}", function (data) {
                $('#TextFieldDiv').html(data);
            });
        }));
    });

    </script>

    @using (Html.BeginForm("Edit", "Widget", FormMethod.Post, new { id = "WidgetEditForm", enctype = "multipart/form-data" }))
    {
        <div>
            @Html.DisplayFor(m => m.DisplayList)
        </div>
        <div id="TextFieldDiv">
            @{Html.RenderPartial("EditTextFields", (TextField)@Model.TextFieldList[0]);}
        </div>
    } 
```

局部视图：

```
 @model Objects.TextField
    @using (Html.BeginForm())
    {
    <table>
    <tr>
        <td class="fieldName" style="vertical-align: top;">
            Headline Text:
        </td>
        <td>
            @Html.EditorFor(m => m.Headline)
            @Html.ValidationMessageFor(m => m.Headline)
        </td>
    </tr>
    <tr>
        <td class="fieldName">
            Sub-Headline Text:
        </td>
        <td>
            @Html.EditorFor(m => m.SubHeadline)
            @Html.ValidationMessageFor(m => m.SubHeadline)
        </td>
    </tr>
    </table>
    } 
```

有什么想法可以为我指明一个好的方向吗？

# c# - 高级搜索 - url 编码

> ID：11678422
> 
> 赞同：3
> 
> 时间：2012-07-26T21:38:52.673
> 
> 标签：c#, asp.net

我有一个非常奇怪的问题，我不知道如何解决这个问题。

我对我的项目有一个预先搜索，基本上是学校搜索

我的问题是我`LIKE`用来比较选项，在搜索结束时，我的查询应该如下所示：

```
select *
from tbl_schooldetails
where
  state = 'Gujarat'
  and city = 'Ahmedabad'
  and area = 'Navrangpura'
  and ( board = 'xx' or board LIKE '%CBSE Board%' or board LIKE '%Gujarat Board%') 
```

但相反，我得到以下查询：

```
select *
from tbl_schooldetails
where
  state = 'Gujarat'
  and city = 'Ahmedabad'
  and area = 'Navrangpura'
  and ( board = 'xx' or board LIKE '�SE Board%' or board LIKE '%Gujarat Board%') 
```

如果您注意到我`%CB`的已转换为“ �”符号，因此我无法搜索与“CBSE Board”选项相关的任何结果。

谁能告诉我如何摆脱这种 URL 编码？

这是我生成此查询的代码：

```
 string qry = "select * from tbl_schooldetails where state = '" + sdpd4.SelectedItem.Text + "'";

    if (sdpd2.SelectedItem.Text != "Select City")
    {
        qry += " and city = '" + sdpd2.SelectedItem.Text + "'";
    }

    if (sdpd1.SelectedItem.Text != "Select Area")
    {
        qry += " and area = '" + sdpd1.SelectedItem.Text + "'";
    }

    if (CheckBoxList3.SelectedItem != null)
    {
        qry = qry + " and ( board = 'xx'";

          for (int i = CheckBoxList3.Items.Count - 1; i >= 0; i--)
          {
              if (CheckBoxList3.Items[i].Selected == true)
              {

                  string mt = CheckBoxList3.Items[i].ToString();
                  qry = qry + " or board LIKE '" + '%' + mt + '%' + "'";

              }
          }
            qry = qry + ")";
    }

    if (RadioButtonList1.SelectedItem != null)
    {
        qry += " and gender ='" + RadioButtonList1.SelectedItem.Text + "'";
    }

    Response.Redirect("schoolsearchresult2.aspx?search=" + qry); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T21:46:15.077

**现在编辑**，原来的问题更清楚了。

只需更改此：

```
Response.Redirect("schoolsearchresult2.aspx?search=" + qry); 
```

对此：

```
Response.Redirect("schoolsearchresult2.aspx?search=" 
    + HttpServerUtility.UrlEncode(qry)); 
```

**...但是：**我的警告（以及其他所有人的警告）仍然正确：在查询字符串中传递 WHERE 子句是*非常危险*的——对结果 URL 的微不足道的调整可能会***破坏您的数据库。***

**原始答案**

您似乎将 %CB 放入 URL 中，该 URL 在服务器上被解释为十六进制数字。

如果您使用 %25CB，则应将其解释为“%CB”。

或者，您可以使用内置的 c# 函数之一。我认为您需要的是[HttpServerUtility.UrlEncode](http://msdn.microsoft.com/en-us/library/zttxte6w.aspx)。

**很重要：**

如果这是一个真正的应用程序，而不是一个概念验证项目，[那么您**不能**直接将数据从 URL 复制到您的 SQL 字符串中！](http://xkcd.com/327/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T21:55:53.377

我建议您以这种方式构建您的 sql 查询，这样您就不必担心 url 编码和 Sql Injection

```
string sqlQuery = "select *
from tbl_schooldetails
where
  state = @state
  and city = @city
  and area = @area
  and ( board = @board1 or board LIKE ";
 sqlQuery += "%@board2%";
sqlQuery += " or board LIKE %@board3%"); 
```

然后在执行查询时使用

例如

```
SqlCommand cmd = new SqlCommand(command);
cmd.Parameters.AddWithValue("@state", Request.Form["state"]); 
```

...... 等等

# c# - Selenium 打开 Firefox 并停止所有进程

> ID：11678427
> 
> 赞同：0
> 
> 时间：2012-07-26T21:39:07.437
> 
> 标签：c#, .net, firefox, selenium, selenium-rc

我正在使用 selenium 和 c# .NET4.0 在 Firefox 上自动执行一个过程：

```
 static void Main(string[] args)
    {
        selenium = new DefaultSelenium("localhost", 4444, "*firefox", "https://www.microsoft.com/");

        selenium.Start();
        selenium.SetSpeed("900");

        selenium.WindowMaximize();
        selenium.WindowFocus();

        Login();
     }

public static void LogIn()
        {
            verificationErrors = new StringBuilder();

        selenium.SetSpeed("900");
        selenium.Open("/Login.aspx");

        selenium.Type("id=ctl00_cphBody_objLogin_UserName", "user");

        selenium.Type("id=ctl00_cphBody_objLogin_Password", "P@assword");

        selenium.Click("id=ctl00_cphBody_objLogin_LoginImageButton");

        selenium.WaitForPageToLoad("30000");    

            try
            {
                selenium.IsTextPresent("Orders - Drug Testing");

            }
            catch (Exception)
            {
                Console.WriteLine("Could't find text: Orders - Drug Testing.");

            }

    } 
```

Firefox 打开，然后什么也没有发生。它不会导航到请求的页面。

这就是它的样子。我究竟做错了什么？一切正常`IE`

![在此处输入图像描述](../Images/bbce5c34930fa176f47aa28743048e23.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T05:01:52.910

要导航到请求的页面，需要使用以下代码。

Selenium 不会自动导航到页面或基本 url 直到 & 除非你打电话

```
selenium.open(" < your url goes here > "); 
```

前任 ：`selenium.open("https://mail.google.com");`

# django - 用 django 投票

> ID：11678431
> 
> 赞同：1
> 
> 时间：2012-07-26T21:39:27.417
> 
> 标签：django, django-models, django-urls, django-voting

我在使用 django-voting 注册投票时遇到问题：[https ://github.com/brosner/django-voting](https://github.com/brosner/django-voting)

我正在尝试从技术上对评论对象进行投票。从而增加它的分数。

这是我到目前为止所拥有的：

**模板：**

```
<form method="POST" action="/comments/{{ comment.id }}/up/vote/">
    {% csrf_token %}
    <button type="submit">Thumbs up!</button>
</form> 
```

**网址**

```
widget_dict = {
    'model': Comment,
    'template_object_name': 'comment',
    'allow_xmlhttprequest': True,
    }

 #users can comment on event objects, And VOTE on comments
 urlpatterns = patterns('',
    url(r'^$', 'event.views.index'),
    url(r'^(?P<id>\d+)/$', 'event.views.detail'),
    url(r'^comments/(?P<object_id>\d+)/(?P<direction>up|down|clear)/vote/?$', vote_on_object, widget_dict),
) 
```

有了这个，我被定向到 404。

**文档**给出了一个例子：

```
from django.conf.urls.defaults import *
from voting.views import vote_on_object
from shop.apps.products.models import Widget

widget_dict = {
    'model': Widget,
    'template_object_name': 'widget',
    'allow_xmlhttprequest': True,
}

urlpatterns = patterns('',
    (r'^widgets/(?P<object_id>\d+)/(?P<direction>up|down|clear)vote/?$', vote_on_object, widget_dict),
) 
```

另外，我不能通过管理员添加投票？ ![无法添加投票](../Images/8049b9c476aaabe0ec86513f54c713da.png)

我不知道 widget_dict 实际上是什么。我只是想将表单发布到`vote_on_object`. 有人成功投了票吗？如果是这样，我做错了什么？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:49:26.197

我认为你有一个错字，你忘记了一个'/'

您在表单中的 url 应该是`'/widgets/{{ comment.id }}/up/vote/'` 或者模式应该以`comments`

然后是模式，你忘记了一个斜线：

```
(?P<direction>up|down|clear)vote/?$ 
```

应该

```
(?P<direction>up|down|clear)/vote/?$ 
```

如果要检查路由，可以从 shell 执行

```
import re
re.match(r'^widgets/(?P<object_id>\d+)/(?P<direction>up|down|clear)/vote/?$', '/comment/1/up/vote/') 
```

看看它的工作原理

# android - 如何避免按钮上的文本被截断？

> ID：11678435
> 
> 赞同：5
> 
> 时间：2012-07-26T21:40:05.007
> 
> 标签：android, button

我正在自定义 Android 中的一个按钮，更改其背景（使用 9patch png 文件）并更改其字体。我将按钮放在 a 中，`RelativeLayout`因为我需要在自定义布局中对该项目进行精确定位和尺寸标注。我正在以编程方式完成所有这些工作（从创建到设置和显示）。

我发现[这个问题](https://stackoverflow.com/questions/8242005/why-is-my-buttons-text-cut-off)有同样的问题，但解决方案对我不起作用。我用了

```
continueBtn.setPadding(0,0,0,0); 
```

但图形输出保持不变。超过一半的文本在视图中被截断。

我正在使用的代码摘录如下：

```
Button continueBtn = new Button(getContext());
p = new RelativeLayout.LayoutParams(width, 45);
p.addRule(CENTER_HORIZONTAL);

continueBtn.setLayoutParams(p);
continueBtn.setTypeface(...);
continueBtn.setTextSize(14);
outerLayout.addView(continueBtn);
continueBtn.setPadding(0, 0, 0, 0); 
```

无论我把`setPadding`方法调用放在哪里，事情都不会改变。我究竟做错了什么？有任何想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-26T22:28:19.663

您正在为 45 的按钮设置一个恒定的高度（我猜是像素）。但是，显然您尝试输入的文本高于 android 允许您使用的空间量。使您的按钮更高（通过更改 LayoutParams），它将适合而不切断。或者，使用较小的文本大小，以使文本更短且更合适。

# ios - 如何跨多个 i 设备同步应用程序数据？

> ID：11678437
> 
> 赞同：1
> 
> 时间：2012-07-26T21:40:09.420
> 
> 标签：ios

我是 iOS 应用程序开发的新手，并且有兴趣开发一个需要利用现有技术在多个 i 设备（iPhone、iPad、Touch 等）之间同步应用程序特定数据的应用程序。例如，该应用程序可以安装在多个设备上。在一台设备上，用户最初将创建一个帐户。然后在后续的登录中，用户可以创建一个任务列表，每个任务项都可能包括一张拍摄的照片。在用户的第二个 i 设备上，当他登录时，他将能够（本地）查看和访问列表和图像。有人可以向我解释我可以利用哪些技术来实现这样的应用程序吗？

具体来说：

如何设置和管理用户帐户？我是否需要为我的整个用户群设置专用服务器和 sql 数据库？我需要学习哪些编程/脚本语言？

将应用程序数据从一台设备推送和拉取到另一台设备的机制如何？我是否需要某种云技术（SaaS？）来处理数据的存储和传输？

我可以利用任何特定的开源或商业产品吗？

提前致谢。

肯尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:58:03.787

我个人没有遇到过这样的情况，但这是我推荐的。

您将需要使用数据库软件设置服务器。您将需要基于 HTTP POST (REST) 为自己编写一个 api，或者您可以编写一个 SOAP 服务。

我**强烈**建议购买**SSL 证书**。对于您的服务器，您可以在请求中发送用户名和密码，它将自动加密。

对于 api，您可以使用各种语言和数据库。我个人偏向于带有 MSSQL 服务器的 asp 网络。

使用您的 api，您将需要编写方法来验证用户身份，然后保存并发送您的数据。

在您的应用程序中，您只需将 Web 请求发送到服务器（可能是 ASIHttpRequest 吗？），您可以接收 JSON 响应返回，然后您可以将其反序列化为可用对象，反之亦然。

如果您使用 asp net，您可以使用 newtonsoft JSON 库来转换您的对象以发送和转换接收到的对象。

我不记得名字了，但是还有一个用于 obj-c 的 JSON 库，可以在 iPhone 上使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T21:57:39.557

使用 SQL 服务器并托管登录名和密码数据库。然后，从每台设备创建到服务器的连接，并下载该帐户的登录信息。另外，不要粗鲁，而是：谷歌它。

# c# - SSIS 脚本任务获取所有变量名称和值

> ID：11678438
> 
> 赞同：0
> 
> 时间：2012-07-26T21:40:18.093
> 
> 标签：c#, sql-server-2008, ssis, custom-component

我需要解析我的 ssis 包中的所有用户变量。到目前为止，我能够获取包中所有变量的名称和值。我需要获取名称和值并将它们转储到表中。截至目前，我可以通过消息框显示名称和值，但我似乎无法弄清楚，如何在脚本任务中将这些值转储到表中。任何帮助将不胜感激。

```
using System;
using System.Data;
using Microsoft.SqlServer.Dts.Runtime;
using System.Windows.Forms;
//using System;
////using Microsoft.SqlServer.Dts.Runtime;
namespace ST_81ec2398155247148a7dad513f3be99d.csproj
{
    [System.AddIn.AddIn("ScriptMain", Version = "1.0", Publisher = "", Description = "")]
    public partial class ScriptMain : Microsoft.SqlServer.Dts.Tasks.ScriptTask.VSTARTScriptObjectModelBase
    {

        #region VSTA generated code
        enum ScriptResults
        {
            Success = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Success,
            Failure = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Failure
        };
        #endregion

    public void Main()
    {

        Microsoft.SqlServer.Dts.Runtime.Application app = new Microsoft.SqlServer.Dts.Runtime.Application();
        // Load a sample package that contains a variable that sets the file name.
        Package pkg = app.LoadPackage(
          @"C:\PackagePath\" +
          @"Template0719.dtsx",
          null);
        Variables pkgVars = pkg.Variables;
        foreach (Variable pkgVar in pkgVars)
        {

            MessageBox.Show(pkgVar.Name);
            MessageBox.Show(pkgVar.Value.ToString());
        }
        Console.Read();
    }
    }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-14T09:20:45.713

由于您知道如何获取变量列表，因此您可以创建一个数据源脚本组件。

# html - 无法将 CSS 应用于表格单元格

> ID：11678439
> 
> 赞同：0
> 
> 时间：2012-07-26T21:40:27.847
> 
> 标签：html, css, html-table

我有带有 class=image 的表格单元格，我似乎无法应用任何 CSS。这是我的标记（嵌套表），其中第一个表显示了典型行的示例：

```
<table class="outer">
        <tr>
            <td>
                <table class="column" id="leftColumn">
                    <tr>
                        <td>
                            <table class="cell" id="t1">
                                <tr>
                                    <td><asp:Literal runat="server" ID="t1r2c1" /></td>
                                    <td class="image">
                                        <span id="s1" runat="server">
                                            <asp:PlaceHolder ID="p1" runat="server">
                                            </asp:PlaceHolder>
                                        </span>
                                    </td>
                                    <td><asp:Literal runat="server" ID="t1r2c3" /></td>
                                    <td class="gray"><asp:Literal runat="server" ID="t1r2c4" /></td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <table class="cell" id="t2">
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
            <td>
                <table class="column" id="rightColumn">
                    <tr>
                        <td>
                            <table class="cell" id="t3">
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <table class="cell" id="t4">
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <table class="cell" id="t5">
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <table class="cell" id="t6">
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <table class="cell" id="t7">
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <table class="cell" id="t8">
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <table class="messages" id="t9">
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table> 
```

这是我的CSS：

```
.outer
{
    border: none;
    margin-left: auto;
    margin-right: auto;
}
.outer td
{
    vertical-align: top;
}
.column
{
    border: none;
}
#rightColumn table, #leftColumn table
{
    width: 100%;
}
.cell
{
    border-collapse: collapse;
    border: 2px solid black;
    margin: 5px;
}
.cell td
{
    border-collapse: collapse;
    border: 2px solid black;
    text-align: center;
    vertical-align: middle;
    padding-left: 3px;
    padding-right: 3px;
    padding-top: 0px;
    padding-bottom: 0px;
    font-size: 11pt;
}
.cell .image
{
    padding: 0;
    margin: 0;
    height: 2px;
    width: 7px;
}
.messages td
{
    border-collapse: collapse;
    border: 2px solid #FF0000;
    text-align: left;
}
h1
{
    text-align: center;
    font-size: 150%;
}
h2
{
    text-align: center;
}
th
{
    height: 24px;
    background-color: #2B60DE;
    color: #FFFFFF;
}
.gray
{
    background-color: #AAAAAA;
} 
```

我对 .cell .image 所做的任何事情似乎都无法将图像缩小到一定尺寸以下——这已经比实际图像小得多，所以我知道一些缩小已经在进行。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:51:39.937

可能是`line-height`或`font-size`阻止`td`变小。

尝试将`td`带有图像的行的 s 设置为`line-height: 0px`and`font-size: 0px`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T21:53:30.250

[我在http://jsfiddle.net/9xLqY/](http://jsfiddle.net/9xLqY/)上整理了`jsfiddle`你的一个例子。当我删除 ASP 组件时，样式应用得很好：

```
<span id="s1" runat="server">
    <asp:PlaceHolder ID="p1" runat="server"></asp:PlaceHolder>
</span> 
```

所以它必须是这些组件之一，它迫使细胞比你想要的大。您需要为`#s1`和添加样式`#p1`。

# c++ - 模板成员函数的接口

> ID：11678440
> 
> 赞同：1
> 
> 时间：2012-07-26T21:40:39.167
> 
> 标签：c++, templates, interface, virtual, member-functions

有没有一些通用的方法来定义模板成员函数的接口？我想创建一些带有模板成员函数声明的纯抽象基类，这些模板成员函数应该在派生类中被覆盖。比我希望能够通过接口调用派生类的功能。我知道不允许使用虚拟模板成员函数。所以直到现在我想出了以下解决方案（见下文）。我想知道的是我的方法是否是糟糕的设计，或者是否有一些更好的方法可以实现我的目标：

**编辑**：我想要实现的是一个序列化系统（类似于 boost::serialization）。因此，我希望有一个通用的基本接口函数*序列化*，可用于保存和加载对象。调用 *do_serialize* 函数时，正确的保存和加载函数调用将由提供的派生存档类确定。

因为我不确定我提供的解决方案，所以我想问一下是否有更好的方法（甚至更简单的方法）来实现我的目标？

接口：

```
template<typename Derived>
class Archive{
public:
  virtual ~Archive() = 0 {}

  template<typename T>
  Archive& serialize(T t) {
    Derived* derived = static_cast<Derived*>(this);
    return derived->serialize_derived(t);
  }
};

template<typename Derived>
class Writer : public Archive<Derived> {
public:
  virtual ~Writer() = 0 {}

  template<typename T> 
  void write(const T& t) {
    Derived* derived = static_cast<Derived*>(this);
    derived->write_derived(t);
  }
};

template<typename Derived>
class Reader : public Archive<Derived> {
public:
  virtual ~Reader() = 0 {}

  template<typename T> 
  void read(const T& t) {
    Derived* derived = static_cast<Derived*>(this);
    derived->read_derived(t);
  }
}; 
```

派生类：

```
class BinaryWriter : public Writer<BinaryWriter> {
public:
  template<typename T>
  BinaryWriter& serialize_derived(T t) {
    save(t);
    return *this;
  }

  template<typename T>
  void save(T t) {
    std::cout << "DerivedWriter::save: " << t << std::endl;
  }

  template<typename T> 
  void write_derived(const T& t) {
    std::cout << "DerivedWriter::write_derived: " << t << std::endl;
  }
};

class BinaryReader : public Reader<BinaryReader> {
public:
  template<typename T>
  BinaryReader& serialize_derived(T t) {
    load(t);
    return *this;
  }

  template<typename T>
  void load(T t) {
    std::cout << "DerivedWriter::load: " << t << std::endl;
  }

  template<typename T> 
  void read_derived(const T& t) {
    std::cout << "DerivedReader::read_derived: " << t << std::endl;
  }
}; 
```

示例测试函数和调用（注意：同样需要调用 Writer/Reader-interface（其他派生的 Writer/Reader-类在此省略（即 TextReader、XMLReader 等））：

```
template<typename Derived, typename T>
void do_serialize(Archive<Derived>& obj, T t) {
  obj.serialize(t);
}

DerivedWriter dw;
DerivedReader dr;

do_serialize(dw, 1);
do_serialize(dr, 2); 
```

输出：

```
DerivedWriter::save: 1
DerivedReader::read: 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T10:19:09.667

在知道这种技术称为 CRTP（感谢 pmr）后，我发现这篇文章[CRTP 是为了避免虚拟成员函数开销](https://stackoverflow.com/questions/6766893/crtp-to-avoid-virtual-member-function-overhead)，我认为这回答了我的问题。如该帖子中 Kerrek SB 的回答所述，该技术可用于提供接口。在我的例子中，这个接口甚至可以为模板成员函数定义。

似乎这种模式很常见（我不确定）所以我会接受它作为我问题的答案。

感谢您的回复！

# c# - Silverlight 将数组存储在文件中并稍后调用？

> ID：11678445
> 
> 赞同：0
> 
> 时间：2012-07-26T21:40:58.743
> 
> 标签：c#, silverlight

如果不使用 MySQL 数据库，我似乎无法做到这一点。

我不知道如何在文件中存储一组数据（ID 代码）并能够调用它。

我有 4,000 个唯一的 4 位代码需要存储在文件内的数组中。将运行 silverlight 应用程序的机器将无法访问 Internet，因此我无法创建数据库并使用 http 调用或任何东西.. 它需要在项目本地。我还在寻找一种方法来获取所述代码并能够针对这些代码进行测试，即传递用户输入并根据代码数组对其进行验证。

我已经看了一遍，不知道从哪里开始，甚至不知道如何实现它。我不是在寻找或关心处理能力或任何东西。我只需要功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:47:44.497

您可以将其存储在 txt 文件中，并将文件作为内容附加到项目中。

该文件将成为 silverlight xap 的一部分

像阅读内容文件一样阅读。

哈希集将非常有意义..存储您想要的任何内容并将数据加载到哈希集中..应该获得最快的查找

哈希集 [http://msdn.microsoft.com/en-us/library/bb359438(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/bb359438(v=vs.95).aspx)

# php - 尝试创建 MySQL 命令，它选择一列并搜索另外两行

> ID：11678450
> 
> 赞同：0
> 
> 时间：2012-07-26T21:41:37.820
> 
> 标签：php, mysql, post

所以我正在尝试创建一个 MySQL 命令来搜索表。我想要它做的是：

我的表有 4 列：`id`, `categories`, `brands`, `names`.

在搜索页面上的 php/html 中，用户从下拉列表中选择一个类别。这是类别，因此将其发布`category`到搜索页面。然后在文本框中输入关键字。这将发布`keyword`到搜索页面。

我想创建一个 MySQL 命令来选择已`categories`发布的类别，然后在这些选定的行中搜索我在`brands`, 和`names`列中发布的关键字

这是我尝试过的：

```
"SELECT brands, names 
   FROM tableName 
  WHERE categories LIKE".$_GET['category']." 
    AND (brands LIKE ".$_GET['keyword']." 
     OR names LIKE ".$_GET['keyword'].");"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:47:32.127

您需要在 SQL 中为字符串加上引号。试试这个：

```
"SELECT brands, names 
   FROM tableName 
  WHERE categories LIKE '".$_GET['category']."' 
    AND (brands LIKE '".$_GET['keyword']."' 
         OR names LIKE '".$_GET['keyword']."');"; 
```

除非您期望会有变化，例如几个开头相同的单词，否则使用 LIKE 并没有太大的作用。如果您期望这一点，则需要使用通配符来指定您期望方差的位置，例如

```
brands LIKE '".$_GET['keyword']."%' 
// User enters 'Mc', SQL end up as:
brands LIKE 'Mc%'
// Columns matched: 'McDonalds' 'McHenry' 
```

更多示例[在这里](http://www.techonthenet.com/sql/like.php)。

如果您不想这样做，只需使用 = 而不是 LIKE。

您还需要首先使用正则表达式或类似方法来清理这些变量，因为这目前允许有人使用[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击您的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T21:50:21.727

接受您的命令，并在您的 SQL 文档编辑器中使用它，我认为这与您的

```
(brands LIKE ".$_GET['keyword']." OR names LIKE ".$_GET['keyword'].");" 
```

我知道在 sqlite 中，你会使用等号，而不是 LIKE，

```
 (brands='".$_GET['keyword']."' OR names='".$_GET['keyword']."');" 
```

# javascript - 没有日历的日期验证插件

> ID：11678455
> 
> 赞同：13
> 
> 时间：2012-07-26T21:41:58.640
> 
> 标签：javascript, jquery, jquery-ui, date, datepicker

我们正在启动一个新的内容管理系统并重做我们的用户输入表单，使营销部门可以完全控制显示的内容、顺序等。我真的很想使用 jquery ui datepicker 插件，因为我们基本上可以插入在其验证规则中直接进入 CMS，允许完全可定制的控件而无需任何开发输入。我已经展示了它并展示了它是多么容易配置。

我们当前的表格使用三种不同的下拉菜单，日、月和年各一个。有一些人并没有改变这种外观/感觉。我们都见过他们，其中一个人：

```
<select>
    <option value="">-- Month --</option>
    <option value="1">Jan</option>
    <option value="2">Feb</option>
    <option value="3">etc.</option>
</select>
<select>
    <option value="">-- Day --</option>
    <option value="1">1</option>
    <option value="2">etc.</option>
    <option value="31">31</option>
</select>
<select>
    <option value="">-- Year --</option>
    <option value="etc.">etc.</option>                        
</select> 
```

毫无疑问，我可以实现这一点。我不想做的是编写和维护一个将规则从 CMS 转换为 js 输入的 javascript 库——必须有更好的方法。

我已经向他们展示了 jquery ui 插件中的月/年下拉选择器：http: [//jqueryui.com/demos/datepicker/#dropdown-month-year](http://jqueryui.com/demos/datepicker/#dropdown-month-year)但他们仍然没有购买它。关于显示一个月中的日子的一些事情......利益相关者。

我想知道的是是否有一个现有的可配置插件在可配置性方面匹配/竞争 jquery UI 插件并提供 3-select 外形尺寸。我特别使用`mindate`, `maxdate`（用于不同输入类型的不同日期范围）和`altformat`options （自动翻译我们后端期望的提交格式）。对不起，如果我的挫败感出来了......感谢您的意见。

编辑：只记得堆栈交换上有一个单独的 UI/UX 区域。如果这更适合那里，我深表歉意 - 我还没有帐户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:39:46.080

根据您的问题标题，您可以查看**datejs**以进行所有日期解析、验证和递增。

[http://code.google.com/p/datejs/](http://code.google.com/p/datejs/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:19:22.697

我不确定是否已经有完全适合您需要的东西。

但是，您可以使用[date-utils](https://github.com/JerrySievert/node-date-utils)，这将简化您的验证。以下是从文档中获取的一些示例：

```
Date.validateDay(day, year, month); // true/false whether a date is valid

d.between(date1, date2); // true/false if the date/time is between date1 and date2
d.isBefore(date); // true/false, true if this is before date passed
d.isAfter(date); // true/false, true if this is after date passed

d.toFormat(format); // returns date formatted with... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T19:33:42.030

[这个](http://www.ancientgeek.co.uk/2009/05/21/jquery-datepicker-widget-with-drop-downs/)呢？

示例的链接在[这里](http://www.ancientgeek.co.uk/datepicker-example.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T11:29:59.750

您可以尝试[mobiscroll](http://demo.mobiscroll.com/#display=inline&demo=date&mode=scroller&theme=sense-ui)，它仍然提供下拉式感觉的所有功能，而不会影响外观。

![移动滚动](../Images/81e51be985a54876665cd424b67523d7.png)

# continuous-integration - Jenkins - 如果父项目失败，有什么方法可以运行子项目？

> ID：11678458
> 
> 赞同：0
> 
> 时间：2012-07-26T21:42:10.440
> 
> 标签：continuous-integration, jenkins, jenkins-plugins

在 Jenkins 中，我有两个项目在两个独立的从站上运行构建。如果在从属设备上构建失败，则相应的 Jenkins 项目会失败——这是故意的。如果在 slave 上构建成功，则相应的 Jenkins 项目成功，并且该 Jenkins 项目的任何子项目都会执行。据我所知，这是 Jenkins 设计的正常现象和预期。

如果两个项目都成功，我想在 Mercurial 源代码管理中插入一个“SUCCESS”标签。如果其中一个 jenkins 项目失败，那么我想在 Mercurial 源代码管理中插入一个“FAIL”标签。我在想的是当其中一个或两个失败时执行一个詹金斯项目。

我知道如何实现我设计的成功方面。但是，如果父项目失败，有没有办法执行项目？

这在詹金斯可能吗？如果是这样，怎么做？

（不要担心 Mercurial 的细节......那些并不重要......我只是想解释一下，如果两个项目都成功，我想标记成功，如果其中一个项目失败，我想标记失败。

# c#-4.0 - 如何在 C# 4.0 中使用类型作为函数参数？

> ID：11678460
> 
> 赞同：1
> 
> 时间：2012-07-26T21:42:23.247
> 
> 标签：c#-4.0, types

Visual Studio 报告说“'PhoenixEngineTypes.BehaviorTypes' 是一种'类型'，但用作'变量'”。

```
public void AddBehavior(BehaviorTypes type)
    {
        if (Enum.IsDefined(BehaviorTypes, type))
        {
        switch (type)
        {
            case BehaviorTypes.render:
            break;   
        }
    } 
```

行为类型的定义是：

```
[Flags]
enum BehaviorTypes : uint
{
    default_behavior = 1 >> 0,
    select = 1 >> 1,
    render = 1 >> 2,
    animate = 1 >> 3,
    navigate = 1 >> 4,
    rotate = 1 >> 5,
    group = 1 >> 6,
    scale = 1 >> 7,
    collide = 1 >> 8,
    kill = 1 >> 9,
    attack = 1 >> 10,
    audio = 1 >> 11,
    all = UInt32.MaxValue
} 
```

最后：

```
public static bool IsDefined(Type enumType, object value); 
```

为什么我不能这样做？我尝试使用`typeof(type)`它并编译，但是当类型不是变量时为什么要浪费函数调用？我不应该能够直接使用令牌吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:44:39.147

您需要`IsDefined`按如下方式调用

```
Enum.IsDefined(typeof(BehaviorTypes), type) 
```

因为它期望一个实例`Type`作为输入。`BehaviorTypes`不是 的实例`Type`，但您可以`Type`使用 获取类型的对应实例`typeof`。

请参阅[http://msdn.microsoft.com/en-us/library/system.enum.isdefined.aspx](http://msdn.microsoft.com/en-us/library/system.enum.isdefined.aspx)

# vb.net - .Net 中的 ShowDialog

> ID：11678462
> 
> 赞同：3
> 
> 时间：2012-07-26T21:42:30.830
> 
> 标签：vb.net

我知道您应该始终在模态表单上调用 dispose 。但是，我有一个相关的问题。

如果我的应用程序中有一个方法，例如

```
Private Sub tempMethod

Dim expForm as new ExplorerForm(tempDataTable)
expForm.ShowDialog

'Should I call dispose here?
'or would the form be automatically disposed when it goes out of scope
'after this method exits?

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T14:47:16.983

当表单超出范围时，它将在将来的某个时间被垃圾收集，然后调用 Dispose，但在这种情况下最好使用 Using 关键字：

```
Private Sub tempMethod
    Using expForm As New ExplorerForm(tempDataTable)
        expForm.ShowDialog()

        'Other code here
    End Using      'Form disposed here
End Sub 
```

# git - Coda 2 山狮 git

> ID：11678463
> 
> 赞同：1
> 
> 时间：2012-07-26T21:42:32.367
> 
> 标签：git, coda, osx-mountain-lion

我刚刚升级到新的 OS X Mountain Lion，git 在 Coda 2 中不再工作。它在 Xcode 和源代码树（我正在使用的 git GUI 客户端）中工作正常。

我将 git 更新到最新版本，但它并没有解决我的问题。

终端：

```
git --version
git version 1.7.11.3
which git
/usr/local/bin/git 
```

所以 git 的版本是我更新的版本，并且 git 的路径是正确的（该路径也用于设置中的 Coda 2）。

在 Coda 2 站点中设置 SourceControl 开关为 OFF。当我打开保存并再次打开设置窗口时，它将关闭。

任何人都可以帮忙吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T11:48:27.113

我做的。现在它正在工作。您需要做的就是在 Xcode 中安装命令行工具（您可以在 Xcode 首选项中执行此操作）。万岁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T23:43:09.027

我有同样的问题，除非我输入哪个 git 我得到 /usr/local/git/bin/git。如果有人有想法，将不胜感激。

我尝试更改我的 $PATH，但没有运气。

更新：只需按照这些说明...

[http://www.hongkiat.com/blog/mountain-lion-git-fix/](http://www.hongkiat.com/blog/mountain-lion-git-fix/)

为我工作。

# php - 将.net DLLS 导入phalanger？

> ID：11678470
> 
> 赞同：0
> 
> 时间：2012-07-26T21:43:01.463
> 
> 标签：php, asp.net, interpolation, phalanger

我将如何将预先编写的 .net 库导入 Phalanger 中的 PHP 项目？我似乎找不到任何关于如何在 Phalanger 中实际使用现有的非.Net 库的文档。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:46:50.860

将任何 .NET 程序集添加到 classLibrary 配置部分，它的所有类、函数和常量都可以在 PHP 代码中使用，使用命名空间的 PHP 语法。

您所要做的就是在`<classLibrary>`配置部分指定程序集。有两种方法：

`<add assembly="Full Assembly Name" />`当程序集在 GAC 中时

`<add url="assembly relative file name" />`当程序集在当前目录或子目录中时。

这也刚刚在这里得到了回答[https://stackoverflow.com/a/11691812/601646](https://stackoverflow.com/a/11691812/601646)

# javascript - Javascript onclick没有触发

> ID：11678471
> 
> 赞同：1
> 
> 时间：2012-07-26T21:43:02.383
> 
> 标签：javascript

我有一个非常简单的 javascript 函数来返回选定字段的索引，它看起来像这样：

```
function validateForm() { 
    alert(document.getElementByID('textfieldAmount').selectedIndex);
    return false;
} 
```

这是从输入按钮 onClick 调用的，如下所示：

```
onclick="return validateForm();" 
```

但是从未调用过Javascript，并且无论如何都提交了页面。

如果我将警报更改为警报（“wibble”）；警报工作正常，页面未提交。

我正在查询的元素如下所示：

```
<select name="textfieldAmount" id="textfieldAmount" class="form"> 
```

任何想法为什么在我自杀之前它不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T21:45:47.890

javascript 区分大小写：

```
alert(document.getElementById('textfieldAmount').selectedIndex); 
```

# android - Android：如何拆分类似于“rowspan”的 TableLayout 行

> ID：11678473
> 
> 赞同：0
> 
> 时间：2012-07-26T21:43:03.820
> 
> 标签：android, android-layout, validation

我有一个表格布局，我想将一个单元格分成两行

下面是我的代码

```
<TableRow android:layout_marginBottom="10dp">

        <TextView android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="3dp"
                android:textSize="17dp"
                android:text="@string/cardiovascular_problems" />

            <Spinner android:id="@+id/cardiovascular_spinner"
                android:layout_width="200dp"
                android:layout_height="50dp" />

            <TextView android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="3dp"
                android:textSize="17dp"
                android:text="@string/if_yes_give_details" />

            </TableRow> 
```

在这一行中，我想要 2 个单元格。第一个单元格有一个文本视图

第二个单元格我想把它分成两行

第一行有一个微调器和文本视图，第二行有一个编辑文本

除了在这一行中使用另一个表格布局之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T17:32:12.833

它不一定是 TableLayout，您可以将第二列项目，例如放入 RelativeLayout。我怀疑是否可以在没有嵌套布局的情况下轻松做到这一点。

# php - 关闭浏览器后如何使会话结束

> ID：11678483
> 
> 赞同：1
> 
> 时间：2012-07-26T21:44:11.253
> 
> 标签：php, session

我用一个简单的会话来创建一个登录系统，

```
<?php
    session_start();
    $_SESSION['username'] = $username;
?> 
```

这只是代码的一部分，但它是生成我的会话的原因，到目前为止它工作正常，问题是这个会话不会以浏览器关闭结束，我尝试登录关闭浏览器，但是当我访问网站再次我发现我仍然登录，注销的唯一方法是使用注销系统，我想要的是在浏览器关闭时自动关闭会话，提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T21:46:43.943

简单的答案：你不能。会话存在于服务器上，浏览器存在于客户端机器上。浏览器在关闭时不会通知服务器。在许多情况下（例如：计算机故障或网络断开连接），即使浏览器愿意，也无法通知您的服务器。

复杂答案：您可以设置一个非常短的会话超时时间（即：5 分钟）并在每次用户 ping 服务器时更新它，但是如果他们离开键盘的时间超过了您的超时时间，这将使人们注销.

# azure - 就 Azure 上使用的服务级别向客户收费

> ID：11678484
> 
> 赞同：0
> 
> 时间：2012-07-26T21:44:21.740
> 
> 标签：azure, billing

我正在 azure 上构建服务，并想知道是否有任何方法可以知道客户在给定会话中使用了多少资源（下载或上传的数据、进行处理所需的时间）以及他们使用的服务级别以便相应地向他们收费。我们将整个框架暴露为一个服务，这由各种小级别的服务组成，例如从一些外部 FTP 服务器读取数据，将其下载到 blob，读取下载的文件并将它们存储在表中，并对数据执行一些操作。表，通过电子邮件发送用户所需服务的一些结果等。因此，根据客户使用的所有服务，我们希望相应地向他们收费。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T23:47:16.123

我能想到的唯一 Azure 特定功能将帮助您跟踪想要跟踪的内容是[Azure 存储日志记录](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/08/03/windows-azure-storage-logging-using-logs-to-track-storage-requests.aspx)，它将跟踪对 Azure 存储的每个请求，但我不确定这对您有多大帮助。

我认为您必须准确决定要向客户收取什么费用，然后自己开始跟踪。这可能是类似于 MS 向您收费的项目（跟踪传入请求的大小、计算事务数和存储到 Azure 存储的数据大小），或者可能只是基于其中一些信息的一些任意值

# jquery - $.getJSON 返回“未定义”值，数据读取 [object Object]

> ID：11678485
> 
> 赞同：1
> 
> 时间：2012-07-26T21:44:22.717
> 
> 标签：jquery, json, ajax, dom-events, getjson

在此先感谢您的帮助。我是 JSON 新手，我一直在尝试用它`$.getJSON`来填写一些表单字段，但没有运气。

我开始切块，直到我只需要测试来自服务器的响应（当在浏览器中查看下面列出的 URL 时，我的服务器正在提供 JSON）：

```
$(document).ready(function(){
    $('#button').live('click', function(){
        $.getJSON('http://localhost:8000/core/api/master-assembly/16', function(data) { 
        // alert(data); // uncomment for debug
           $('#showdata').html("<p>item1="+data.afAgeCounter+" item2="+data.afWordCounter+" item3="+data.idNumber+"</p>");
        });
    });
}); 
```

我的 JSON 数据看起来像：

```
{"success":true,"data":{"afWordCounter":123,"afAgeCounter":456,"idNumber":789, ... 
```

当我运行这个脚本时，我得到了输出：

> item1=未定义 item2=未定义 item3=未定义

如果我取消注释

```
alert(data); 
```

我得到的回报是`[object Object]`

那么这里给出了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T21:46:43.043

尝试

```
$('#showdata').html("<p>item1="+data.data.afAgeCounter+" item2="+data.data.afWordCounter+" item3="+data.data.idNumber+"</p>"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T21:46:58.897

您应该像这样访问它：

```
data.data.afWordCounter 
```

因为您的 json 变量具有以下结构：

```
data = {
    "success":true,
    "data":{
         "afWordCounter":123,"afAgeCounter":456,"idNumber":789,
         ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T21:50:40.127

您返回的数据没有`afAgeCounter`, etc. 属性。它有一个`data`拥有这些的属性。

您需要先获得该`data`属性。

```
if(data.success){
    data = data.data;
    $('#showdata').html("<p>item1="+data.afAgeCounter+" item2="+data.afWordCounter+" item3="+data.idNumber+"</p>");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T21:52:11.353

正如其他人所逃避的那样，您的整个 JSON 结果是回调的参数 - 'data'，它是一个对象。

它有两个属性，“成功”和“数据”。'data' 本身和对象 {} 具有它自己的属性，afWordCounter、afAgeCounter 等。因此要获得内部 'data' 对象的属性，您需要使用 data.data.afWordCounter 等

如果您将方法主体切换为以下内容，可能会更清楚发生了什么：

```
 $.getJSON('http://localhost:8000/core/api/master-assembly/16', function(jsonresult)         { 

       $('#showdata').html("<p>item1="+jsonresult.data.afAgeCounter+" item2="+jsonresult.data.afWordCounter+" item3="+jsonresult.data.idNumber+"</p>");
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T18:12:01.677

只是在这里堆积，但如果您想知道 js 对象中包含什么，您可以随时使用 JSON.stringify 将其打印到字符串：[https ://github.com/douglascrockford/JSON-js/blob/master/json2 .js](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)

因此，有问题的对象，您可以通过以下方式查看其中包含的内容：

```
alert(JSON.stringify(mysteryObject)); 
```

或者

```
console.log(JSON.stringify(mysteryObject); 
```

# c# - 在 C# 中制作程序生成的正方形网格？

> ID：11678491
> 
> 赞同：1
> 
> 时间：2012-07-26T21:44:57.400
> 
> 标签：c#, winforms

我正在开发一个 C#、Windows 形式的项目，我需要一个正方形网格来做到这一点。我已经能够生成正方形，但问题是我需要生成多达 20,736 个正方形。使用 SDL 库，我可以在 C++ 中毫无问题地做到这一点，但在 C# 中，我遇到了非常糟糕的延迟，有这么多的方块。

我希望方块每 1/100 秒更新一次，所以我使用计时器来重绘方块，但延迟令人难以置信。我首先尝试生成一个按钮网格，但程序刚刚停止。然后我尝试了一个 PictureBoxes 网格，改进了，但不多，然后我尝试了 Pen 和 Rectangle，它也产生了改进。那么在屏幕上绘制 20,000 个正方形最有效的方法是什么？

```
 //Timer that ticks every 1/100th of a second 

    public void MyTimer_Tick(object sender,EventArgs eArgs)   {
          count++;
          numLabel.Text = count.ToString();
          for (int i = 0; i < 60; i++)
          {
              for (int j = 0; j < 60; j++)
              {
                  editSquares((i * (18 + 2)), (j * (18 + 2)), 18, 18, Color.Black);
              }
          }
    }

    //Draw a square

    public void drawSquares(int x, int y, int w, int h)
    {
        cell = new System.Drawing.SolidBrush(System.Drawing.Color.Red);
        System.Drawing.Graphics formGraphics = this.CreateGraphics();
        formGraphics.FillRectangle(cell, new Rectangle(x, y, w, h));
        formGraphics.Dispose();
        cell.Dispose();
    }

    //Edit Squares      

    public void editSquares(int x, int y, int w, int h,Color color)
    {
        cell = new System.Drawing.SolidBrush(System.Drawing.Color.Red);
        cell.Color = color;
        System.Drawing.Graphics formGraphics = this.CreateGraphics();
        formGraphics.FillRectangle(cell, new Rectangle(x, y, w, h));
        cell.Dispose();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:52:31.370

您是否尝试过[此处详细说明的答案？](https://stackoverflow.com/questions/88488/getting-a-drawingcontext-for-a-wpf-writeablebitmap)

最佳答案与我们在工作中的做法相同。我们的应用程序不是超级图形密集型应用程序（所以我不保证我们的解决方案是最佳的），但我认为可写位图锁定可能会阻止不必要的错误检查或屏幕更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T21:56:52.350

不是每次都在editSquares中创建和处理画笔，而是在启动时为您需要的每种颜色创建一个画笔，然后将相关画笔作为参数传递。Graphics 对象也是如此。

然而，可能最好的效率增益可以通过仅重新绘制那些已更改的单元格来获得 - 感谢 Kal_Torak 指出这一点。

# php - 发生异常时捕获变量

> ID：11678495
> 
> 赞同：0
> 
> 时间：2012-07-26T21:45:18.223
> 
> 标签：php, magento

我有这个错误：

[2012 年 7 月 25 日星期三 15:48:09] [错误] [客户端 50.xxx.xxx.xxx] PHP 致命错误：在 /var/www/magento/app 中的非对象上调用成员函数 getSource() /code/core/Mage/Catalog/Model/Product.php 1389行

在这个函数中：

```
/**
 * Get attribute text by its code
 *
 * @param $attributeCode Code of the attribute
 * @return string
 */
public function getAttributeText($attributeCode)
{
    return $this->getResource()
       ->getAttribute($attributeCode)
            ->getSource()
                ->getOptionText($this->getData($attributeCode));
} 
```

而且我想在发生错误时记录 $attributeCode 值。所以我把函数改成这样：

```
public function getAttributeText($attributeCode)
{
    try {
        return $this->getResource()
           ->getAttribute($attributeCode)
                ->getSource()
                    ->getOptionText($this->getData($attributeCode));
    } catch (Exception $e) {
        Mage::log($attributeCode);
        throw($e);
    }
} 
```

…然后重新启动 Apache，但 server.log 中没有显示任何内容。如果我注释掉 throw($e)，异常仍然会被抛出。

./lib/Zend/Rest/Server.php 有 set_exception_handler(array($this, "fault"));

但是请告诉我，一旦你在某个地方设置了它，php 就不会忽略所有手动异常处理。因为那会很疯狂。

知道如何仅在发生异常时捕获 $attributeCode 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:45:17.803

尝试

```
$attributes = $this->getResource()->getAttribute($attributeCode);
if (!empty($attributes)) {
    return $attributes->getSource()->getOptionText($this->getData($attributeCode));
} else {
    Mage::log($attributeCode);
    throw new InvalidArgumentException('bla bla');
} 
```

// 不知道getAttribute($attributeCode)返回了什么；所以你可以使用 is_null(), isset() 而不是 empty()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T21:48:05.067

仅出于调试目的，我会这样做：

```
if (!is_object($this->getResource()->getAttribute($attributeCode)) {
    var_dump($attributeCode);
    exit();
} 
```

# javascript - 无法使用 Three.JS 删除对象

> ID：11678497
> 
> 赞同：7
> 
> 时间：2012-07-26T21:45:24.090
> 
> 标签：javascript, 3d, three.js

我正在使用 Three.JS 制作飞机并将一些盒子放在上面我有时需要移除所有盒子。所以我试图用下面的代码来做：

```
for ( i = 0; i < scene.children.length; i ++ ) {
    var object = scene.children[ i ];
    if ( object != plane && object != camera) {
        scene.remove(object);
    }
} 
```

/*这会杀死不是飞机或相机的每个物体;-)* /

它删除了一些框，但不是全部=（我怎样才能删除所有框？问候，何塞

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-28T08:20:11.960

像这样删除数组对象时，您需要从前到后，而不是从前到后。

```
var obj, i;
for ( i = scene.children.length - 1; i >= 0 ; i -- ) {
    obj = scene.children[ i ];
    if ( obj !== plane && obj !== camera) {
        scene.remove(obj);
    }
} 
```

正在发生的事情是当一个节点移除一个节点时，它转移后的所有节点。假设您删除了 scene.children[0]：children[1] 将成为新的 0，2 将成为 1，依此类推。当从 0 变为 array.length 时，for 循环已经继续并正在跳过 1 个节点你删除的每一个。

作为一个额外的好处，这应该会稍微快一点，特别是如果你有很多对象，因为 scene.children.length 只得到一次，而不是每个循环。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-21T19:30:27.570

@Crazycatz 的答案当然是正确的，但现在我们在 2016 年，我们可以调用`.slice()`并遍历数组副本，而不是手动迭代：

```
scene.children.slice().forEach(obj => scene.remove(obj)) 
```

或者没有 ES6 好东西：

```
scene.children.slice().forEach(function(obj) { scene.remove(obj); }) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T11:50:04.930

您应该使用 !== 而不是 != （它有点快）。之后您是否尝试过单步执行循环并检查场景子项？也许您在平面上添加了一些框作为子元素，这些框不会被此循环删除。

# jquery - 确定父事件处理程序单击了哪个子元素

> ID：11678498
> 
> 赞同：0
> 
> 时间：2012-07-26T21:45:26.220
> 
> 标签：jquery

两个点击处理函数

```
$('#current_options').on('click', 'td', function(){
    $('#product_options_list tbody').css('display', 'none');
    $('.sub_options tbody').css('display', '');
    var my_id = $(this).parent().find('input').val();
    $('#product_options_list thead').css('display', '');
    $('#product_options_list tbody#'+my_id).css('display', '');
});

$('#current_options').on('click', '.icon-minus-sign', function(e){
    e.preventDefault();
    var rem_id = $(this).parent().find('input').val();

    //remove corresponding option values
    $('#product_options_list tbody#'+rem_id).remove();

    //either highlight next options values or hide table header if no other values present          
    $('#product_options_list thead').css('display', 'none');
    $(this).parent().parent().remove();

}); 
```

html

```
<table id="current_options" class="table">
   <tbody>
      <tr>
         <td>
            Size<i class="icon-minus-sign"></i>
         </td> 
```

基本上，如果单击 td 内 i 上的单击处理程序，我想停止触发 td 上的单击处理程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T21:48:03.420

我认为您正在寻找 jQuery 的[`stopPropagation()`](http://api.jquery.com/event.stopPropagation/)，如下所示：

```
$('#current_options').on('click', '.icon-minus-sign', function(e){
    ..
    e.stopPropagation();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T21:49:32.913

你需要`stopPropagation`这样：

```
$('#current_options').on('click', '.icon-minus-sign', function(e){
    e.preventDefault();
    e.stopPropagation(); //this stops the event from moving up the parents

    var rem_id = $(this).parent().find('input').val();

    //remove corresponding option values
    $('#product_options_list tbody#'+rem_id).remove();

    //either highlight next options values or hide table header if no other values present          
    $('#product_options_list thead').css('display', 'none');
    $(this).parent().parent().remove();

}); 
```

如果你正在使用`.on()`，或者`.delegate()`只是`return false;`在你的末尾做一个正确的`function`

参考：[http ://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

# jquery - gmap在jquery对话框中一次加载后显示四分之一

> ID：11678501
> 
> 赞同：0
> 
> 时间：2012-07-26T21:45:28.697
> 
> 标签：jquery, asp.net, jquery-ui, google-maps-api-3, jquery-ui-dialog

我正在尝试根据可用的经度和纬度显示 gmap。这`repeater control data source`是我的代码

```
<script src="http://maps.google.com/maps/api/js?key=myapikey&sensor=false"
    type="text/javascript"></script>
<script type="text/javascript">
    $('document').ready(function () {
        $('.mapicon').click(function (e) {              
            init($(this).next('.hdnLatitude').val(), $(this).nextAll('.hdnLongitude').val(), $(this).nextAll('.hdnInfoWindow').val());
            $("#popup_container").dialog({ modal: true }, { border: 10 }, { width: 513 }, { height: 450 });
        });
    });
</script> 
```

这是加载 gmap 的 init 方法

```
<script type="text/javascript">

        function init(hdnLatitude, hdnLongitude, hdnInfoWindow) {
            //            alert(hdnLatitude);
            //            alert(hdnLongitude);

            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 10,
                center: new google.maps.LatLng(hdnLatitude, hdnLongitude),
                mapTypeId: google.maps.MapTypeId.ROADMAP
            });

            var infowindow = new google.maps.InfoWindow();

            var marker, i;

            var image = 'images/map-icon.gif';
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(hdnLatitude, hdnLongitude),
                map: map,
                icon: image
            });

            var infoWindow = new google.maps.InfoWindow();

            google.maps.event.addListener(marker, 'click', function () {
                infoWindow.setContent(hdnInfoWindow);
                infoWindow.open(map, marker);
            });

        }
    </script> 
```

这是HTML

```
<div id="popup_container" style="display: none;">
        <div id="map" style="width: 500px; height: 400px;">
        </div>
    </div> 
```

问题是当第一次单击时`mapicon`gmap 正确显示，但之后在每次调用弹出窗口中打开但地图出现四分之一并且标记未正确显示。

**已编辑**

不幸的是，我没有得到单一的答案，或者我的问题可能对 SO 用户不清楚。

我制作了一个测试页面，您可以在其中检查确切的问题。

第一次点击它显示完美的地图但是当你关闭弹出窗口一次又一次点击`gmap`然后弹出窗口打开但`gmap`显示四分之一。

[这是测试页面的链接](http://e-hotelspro.com/gmap.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:18:41.740

最后通过在对话框打开方法中进行一些更改或调整来解决问题

最初使用 `$("#popup_container").dialog({ autoOpen: false });`而不是

`style=display:none` 在页面加载时不显示弹出窗口。

第二个更改我使用此调用打开方法打开弹出窗口

```
$('#popup_container').dialog('open'); 
```

然后我调用该`init()`方法

问题就解决了。

这是最终`document.ready`方法

```
<script type="text/javascript">
        $('document').ready(function () {
            $("#popup_container").dialog({ autoOpen: false });
            $('#gmap').click(function () {
                $('#popup_container').dialog('open');
                $("#popup_container").dialog({ modal: true }, { border: 10 }, { width: 500 }, { height: 340 });
                init();
            });
        });
    </script> 
```

# django - 比较 save() 前后的字段

> ID：11678502
> 
> 赞同：2
> 
> 时间：2012-07-26T21:45:35.113
> 
> 标签：django

我想在 .save() 之前和之后比较一个字段（manytomany），以了解哪些条目已被删除。我试过了：

```
def save(self):
    differentiate_before_subscribed = Course.objects.get(id=self.id).subscribed.all()
    super(Course, self).save()  # Call the "real" save() method.
    differentiate_after_subscribed = Course.objects.get(id=self.id).subscribed.all()
        #Something 
```

但是 distinct_before_subscribed 和 distinct_after_subscribed 具有相同的值。我必须使用信号？如何？

**编辑 ：**

```
def addstudents(request, Course_id):
    editedcourse = Course.objects.get(id=Course_id)  # (The ID is in URL)

    # Use the model AssSubscribedForm
    form = AddSubscribedForm(instance=editedcourse)

    # Test if its a POST request
    if request.method == 'POST':
        # Assign to form all fields of the POST request
        form = AddSubscribedForm(request.POST, instance=editedcourse)
        if form.is_valid():
            # Save the course
            request = form.save()

            return redirect('Penelope.views.detailcourse', Course_id=Course_id)
    # Call the .html with informations to insert
   return render(request, 'addstudents.html', locals())

# The course model.
class Course(models.Model):
    subscribed = models.ManyToManyField(User, related_name='course_list', blank=True, null=True, limit_choices_to={'userprofile__status': 'student'}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T21:54:12.177

[保存模型表单](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#the-save-method)时，首先保存实例，然后`save_m2m`单独调用该方法（`save_m2m`除非您使用 保存表单，否则会自动`commit=False`调用，在这种情况下您必须手动调用它）。对于两个查询集，您会得到相同的结果，因为稍后会保存多对多字段。

您可以尝试使用[`m2m_changed`](https://docs.djangoproject.com/en/dev/ref/signals/#m2m-changed)信号来跟踪多对多字段的更改。

## 初步建议（无效）：

Django[查询集是惰性的](https://docs.djangoproject.com/en/dev/topics/db/queries/#querysets-are-lazy)。在这种情况下，第一个查询集直到模型保存后才被评估，因此它返回与第二个查询集相同的结果。

您可以使用 强制评估查询集`list`。

```
differentiate_before_subscribed = list(Course.objects.get(id=self.id).subscribed.all()) 
```

# actionscript-3 - 在 AS3 中初始化字典内联

> ID：11678503
> 
> 赞同：9
> 
> 时间：2012-07-26T21:45:36.510
> 
> 标签：actionscript-3, dictionary

我正在尝试找到一种在 ActionScript 3 中初始化 Dictionary inline 的方法，例如：

```
private var sampleDic:Dictionary = new Dictionary (
   { "zero", "Hello" },
   { "one", "World" }
); 
```

我尝试了很多方法，但没有一个有效。任何人都知道这是否可能，以及如何？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T22:03:05.697

不，你不能这样做。您必须构建一个字典，然后在循环中或单独添加值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-28T12:15:23.650

如果它是静态的，您可以使用块来执行此操作

```
private static var myDict:Dictionary = new Dictionary();
{
     myDict["zero"] = "Hello";
     myDict["one"] = "World";
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-26T23:44:59.140

如果你真的想要这样的东西，你可以使用 Dictionary 工厂：

```
 public class DictFactory 
    {
        public var dict:Dictionary;
        public function create(obj:Object):Dictionary
        {
            dict = new Dictionary();

            for (var key:String in obj) {
              dict[key] = obj[key];
            }

            return dict;
        }           
    } 
```

用法：

```
private var sampleDic:Dictionary = new DictFactory().create({ "zero":"Hello", "one": "World" }); 
```

`DictFactory.create`期望一个带有键值的对象，它将应用于返回的字典，如果您传递任何其他对象（在 AS3 中，任何类都是对象），结果可能是不受欢迎的。:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-27T15:25:21.583

您可以扩展字典类并使用接受初始键值梨的构造函数覆盖默认构造函数。

**编辑：**

你也可以使用这个肮脏的 JS 之类的解决方案 :)

```
import flash.utils.Dictionary;

var dict : Dictionary = function ( d : Dictionary, p : Object ) : Dictionary { for ( var i : String in p ) { d[i] = p[i] }; return d; }(new Dictionary(), {
   "zero": "Hello",
   "one": "World"
})

trace( dict["zero"] ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T22:05:54.173

如果没有特定的理由使用字典，你可以用一个对象来做。

```
private var sample:Object = {
   "zero": "Hello",
   "one": "World"
}; 
```

# jquery - jQuery 屏蔽输入插件与 jQuery 工具冲突（至少与覆盖）

> ID：11678505
> 
> 赞同：3
> 
> 时间：2012-07-26T21:46:05.097
> 
> 标签：jquery, jquery-plugins, jquery-tools, maskedinput

我发现 jQuery 屏蔽输入插件 (http://digitalbush.com/projects/masked-input-plugin/) 与 jQuery 工具覆盖方法 load() 和 close() 冲突。因此，当您先导入 jQuery 工具，然后再导入 jQuery 屏蔽输入插件并尝试运行时：

```
$("#overlay").overlay().load() 
```

出现以下错误：

```
TypeError: b.mask.load is not a function ...jquery.tools.min.js:87 (on Firefox) 
```

和

```
Uncaught TypeError: Object #<Object> has no method 'load'  ...jquery.tools.min.js:87 (on Chrome) 
```

另一种方式：如果你先导入 jQuery 屏蔽输入插件，然后导入 jQuery 工具，现在覆盖可以工作，但 jQuery 屏蔽输入插件不能。

有人知道 jQuery 屏蔽输入插件的另一种替代方案，它可以很好地与 jQuery 工具配合使用吗？

或者也许这个问题可以以某种方式解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T11:11:37.940

我已经分叉了项目并创建了拉取请求：[https](https://github.com/digitalBush/jquery.maskedinput/issues/94) ://github.com/digitalBush/jquery.maskedinput/issues/94 。

感谢 FagnerMartinsBrack 的帮助：[https](https://github.com/digitalBush/jquery.maskedinput/issues/94) ://github.com/digitalBush/jquery.maskedinput/issues/94 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:58:49.983

我不确定这是否可行，但您可以尝试弄乱[jQuery.noConflict()](http://api.jquery.com/jQuery.noConflict/)以避免更改原始掩码命名空间

也许是这样的：

```
//not tested
var $jMask = jQuery.noConflict();
$jMask.mask("99.99.99.99"); 
```

并使用带有常规 $ 的 jquery 工具

# gnu-screen - 从现有会话中切换屏幕会话

> ID：11678506
> 
> 赞同：4
> 
> 时间：2012-07-26T21:46:09.037
> 
> 标签：gnu-screen

我已经尝试了一堆命令，但它们都将会话附加到当前会话中，正如您可以想象的那样，当我稍后尝试重新附加它时它会保释，因为它已经附加在会话嵌套中。

我为我使用 Windows 处理的每个项目创建会话到远程服务器、日志和 vim。但是每次我想切换时，我都必须先 Ca d 然后 screen -DR

我宁愿只输入一个命令。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T00:41:59.670

AFAIK 这是不可能的`screen`，我知道没有办法轻松解决这个限制。这里的问题是每个`screen`会话都是独立的，并且不知道其他会话。

如果这是您经常使用的功能，我建议您切换到`tmux`使用`<C-b>s`. 在过去的一年中，每当需要终端多路复用器时，我都广泛使用了这两种方法`screen`，`tmux`并且不后悔偏爱。`tmux`

附带说明一下，运行嵌套屏幕会话并不太难，只需发送两个转义符和命令进入内部屏幕会话，如果转义符是单个字符，它会有所帮助，我喜欢：

```
escape `` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-05T19:42:02.247

为此有一个 bash 脚本，[https://github.com/scottxhe/switch-screen-session](https://github.com/scottxhe/switch-screen-session)使用循环和命名管道，它干净且易于设置和使用。我是作者。这是主要的 bash 功能。把它放在一个脚本中并获取它。`ss`应该是可调用的。

`ss my-session-name`从屏幕内部或外部。`my-session-name`可以是新的或现有的会话。如果您对其他细节感兴趣，请查看 github。

```
ss() {
    if [ -z $1 ]; then
        screen -ls
        return 0
    fi

    next_session=$1
    prev_session=$1

    if [ -z "$STY" ]; then

        if [ ! -e ~/.next_s ]; then
            mkfifo ~/.next_s
        fi

        if [ ! -e ~/.prev_s ]; then
            mkfifo ~/.prev_s
        fi

        (
            echo $next_session > ~/.next_s &
            echo $prev_session > ~/.prev_s &
        )

        while true; do
            next="$(cat ~/.next_s)"
            prev="$(cat ~/.prev_s)"

            if [ -z "$next" ] && [ -z "$prev" ]; then
                return 0
            elif grep -q "^~" <<< "$prev"; then
                next_session=$prev_session
                prev_session="$(sed s/~// <<<"$prev" | grep -v "^$")"
            else
                prev_session=$prev
                next_session=$(grep -v "^$" <<< "$next")
            fi

            screen -dR $next_session

            (
                echo '' > ~/.next_s &
                echo '' > ~/.prev_s &
            )
        done
    else
        (
            echo $next_session > ~/.next_s &
            echo $STY > ~/.prev_s &
        )

        screen -d $STY
    fi
} 
```

# ruby-on-rails-3 - “电子邮件不能为空” 使用用户名或电子邮件进行设计

> ID：11678508
> 
> 赞同：6
> 
> 时间：2012-07-26T21:46:12.030
> 
> 标签：ruby-on-rails-3, devise

我在[如何操作：允许用户使用他们的用户名或电子邮件地址登录](https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-sign-in-using-their-username-or-email-address)并执行所有详细步骤，但是当我尝试通过`registrations/new.html.erb`表单注册时，我收到此错误：

```
Email can't be blank 
```

在我的模型中，我有：

```
devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

attr_accessible :username, :email, :password, :password_confirmation, :remember_me

attr_accessor :login
attr_accessible :login 
```

和

```
def self.find_first_by_auth_conditions(warden_conditions)
    conditions = warden_conditions.dup
    if login = conditions.delete(:login)
      where(conditions).where(["lower(username) = :value OR lower(email) = :value", { :value => login.downcase }]).first
    else
      where(conditions).first
    end
  end 
```

对这个问题有什么建议吗？

======= 更新

我在这里找到了一些东西[■[rails]如何使用 Devise 和 Rails ，](http://d.hatena.ne.jp/ancou/20110811/p1)这里没有 EMail 是这样的：

```
 # Email is not required
  def email_required?
    false
  end 
```

在我的模型中添加它后，我可以使用用户名创建记录并将电子邮件字段留空，但是当我尝试创建没有电子邮件的第二条记录时，数据库会出现错误：

```
Mysql2::Error: Duplicate entry '' for key 'index_parents_on_email':... 
```

我应该使用它，从数据库中的表中删除索引，然后`username`在模型中验证吗？因为我真的不需要该模型上的电子邮件字段。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-17T03:08:02.557

**更新**

Asiniy在下面的回答实际上就像一个魅力（：

**原创（谁知道？）**

您的问题是 mysql 表上的索引，您可以将其从迁移中删除，但我不确定这会解决您的问题。不使用 Devise 中的电子邮件很棘手，我会建议一种解决方法，例如从 中发出假电子邮件`username`，类似这样

```
"#{user.username}@fake.me" 
```

它不是很干净，但是当您使用omniauth 时，我看到设计为密码做类似的事情。

**Rails 4 和强参数**

我`username`在 rails 4 中遇到了这个问题，我必须为以下配置允许的参数`sign_up`：

```
class ApplicationController < ActionController::Base

  before_filter :configure_permitted_parameters, if: :devise_controller?

  protected

    def configure_permitted_parameters
      devise_parameter_sanitizer.for(:sign_up) do |u|
        u.permit :username, :email, :password, :password_confirmation
      end
    end
end 
```

[这在设计文档中有描述](https://github.com/plataformatec/devise#strong-parameters)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-31T16:23:21.077

正常解决方案

```
class User < AR::Base
  devise_for tralala

  def email_required?
    false
  end
end 
```

请参考[https://github.com/plataformatec/devise/blob/master/lib/devise/models/validatable.rb#L29](https://github.com/plataformatec/devise/blob/master/lib/devise/models/validatable.rb#L29)

# sql - 仅包含具有特定列值的第一个条目

> ID：11678512
> 
> 赞同：4
> 
> 时间：2012-07-26T21:46:25.560
> 
> 标签：sql, ms-access, odbc

使用时，`SELECT * FROM myTable`我得到一个如下所示的列表：

```
A    473
A    234
B    752
C    136 
```

但是，我不想让多行具有相同的字母。我只想获取带有某个字母的第一个条目，然后跳到下一个，如下所示：

```
A    473
B    752
C    136 
```

现在，[当我知道我拥有什么类型的数据时，我就知道该怎么做了](https://stackoverflow.com/questions/1641718/how-to-select-unique-records-by-sql)。但是，我想编写一个不管表是什么样子都可以工作的 SQL 命令，也就是说，类似于以下内容：`SELECT * FROM myTable WHERE duplicates of column1 are discarded`.

**编辑：我真的不需要成为为每个唯一 column1 值选择的第一个条目。任何行都可以。**

**编辑 2：我非常希望该解决方案同时适用于字符串和数字。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T21:50:24.327

您可以使用某种聚合函数来获取您想要的 column2 的值。例子：

```
SELECT Column1, MAX(Column2)
FROM MyTable
GROUP BY Column1 
```

[您可以在此处](http://msdn.microsoft.com/en-us/library/ms173454.aspx)阅读各种聚合函数以及它们的作用。该链接特定于 SQL Server，但同样的想法也适用于许多 DBMS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T21:49:38.200

您可以使用`GROUP BY`. `SELECT column1 FROM myTable GROUP BY column1`会工作：

```
A
B
C 
```

如果您想要 column2，则需要选择一个聚合函数，例如`MAX`. `SELECT column1,MAX(column2) FROM myTable GROUP BY column1`：

```
A    473
B    752
C    136 
```

这将为每一行`myTable`提供一个给定`column1`的和最高的`column2`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-06-04T18:59:28.867

你可以使用函数“rownum”

**例如：**

```
select * from table_name where rownum < 2; 
```

o/p：它将显示第一行条目。

# mysql - 大表上的 MySQL 查询优化

> ID：11678513
> 
> 赞同：3
> 
> 时间：2012-07-26T21:46:28.570
> 
> 标签：mysql, optimization, group-by, average

我正在使用 mysql 查询一个具有 1200 万个寄存器的表，这些寄存器是所述数据的一年。查询必须选择某种数据（硬币、企业、类型等），然后为该数据的某些字段提供每日平均值，以便我们之后绘制图表。梦想能够实时做到这一点，因此响应时间不到 10 秒，但目前它看起来一点也不亮，因为它需要 4 到 6 分钟。例如，其中一个 where 查询提供 150k 个寄存器，每天拆分大约 500 个，然后我们使用 AVG() 和 GroupBy 平均三个字段（不在 where 子句中）。

现在，对于原始数据，查询是

```
SELECT 
`Valorizacion`.`fecha`, AVG(tir) AS `tir`, AVG(tirBase) AS `tirBase`, AVG(precioPorcentajeValorPar) AS `precioPorcentajeValorPar` 
FROM `Valorizacion` USE INDEX (ix_mercado2)
WHERE
(Valorizacion.fecha >= '2011-07-17' ) AND
(Valorizacion.fecha <= '2012-07-18' ) AND
(Valorizacion.plazoResidual >= 365 ) AND
(Valorizacion.plazoResidual <= 3650000 ) AND
(Valorizacion.idMoneda_cache IN ('UF')) AND
(Valorizacion.idEmisorFusionado_cache IN ('ABN AMRO','WATTS', ...)) AND
(Valorizacion.idTipoRA_cache IN ('BB', 'BE', 'BS', 'BU'))
GROUP BY `Valorizacion`.`fecha` ORDER BY `Valorizacion`.`fecha` asc;

248 rows in set (4 min 28.82 sec) 
```

索引是按顺序对所有 where 子句字段创建的

```
(fecha, idTipoRA_cache, idMoneda_cache, idEmisorFusionado_cache, plazoResidual) 
```

选择“where”寄存器，而不使用 group by 或 AVG

```
149670 rows in set (58.77 sec) 
```

并选择寄存器，分组并只做一个计数（*）而不是平均需要

```
248 rows in set (35.15 sec) 
```

这可能是因为它不需要去磁盘搜索数据，而是直接从索引查询中获得的。

因此，就我的想法而言，我想告诉我的老板“对不起，但它不能完成”，但在这样做之前，我会问你们是否认为我可以做些什么来改善这一点。我认为我可以通过索引时间来改进搜索，将具有最大基数的索引移到前面等等，但即使在那之后，访问每个记录的磁盘并执行 AVG 所需的时间似乎太多了。

有任何想法吗？

-- 编辑，表结构

```
CREATE TABLE `Valorizacion` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `idInstrumento` int(11) NOT NULL,
  `fecha` date NOT NULL,
  `tir` decimal(10,4) DEFAULT NULL,
  `tirBase` decimal(10,4) DEFAULT NULL,
  `plazoResidual` double NOT NULL,
  `duracionMacaulay` double DEFAULT NULL,
  `duracionModACT365` double DEFAULT NULL,
  `precioPorcentajeValorPar` decimal(20,15) DEFAULT NULL,
  `valorPar` decimal(20,15) DEFAULT NULL,
  `convexidad` decimal(20,15) DEFAULT NULL,
  `volatilidad` decimal(20,15) DEFAULT NULL,
  `montoCLP` double DEFAULT NULL,
  `tirACT365` decimal(10,4) DEFAULT NULL,
  `tipoVal` varchar(20) COLLATE utf8_unicode_ci DEFAULT NULL,
  `idEmisorFusionado_cache` varchar(20) COLLATE utf8_unicode_ci DEFAULT NULL,
  `idMoneda_cache` varchar(20) COLLATE utf8_unicode_ci DEFAULT NULL,
  `idClasificacionRA_cache` int(11) DEFAULT NULL,
  `idTipoRA_cache` varchar(20) COLLATE utf8_unicode_ci NOT NULL,
  `fechaPrepagable_cache` date DEFAULT NULL,
  `tasaEmision_cache` decimal(10,4) DEFAULT NULL,
  PRIMARY KEY (`id`,`fecha`),
  KEY `ix_FechaNemo` (`fecha`,`idInstrumento`) USING BTREE,
  KEY `ix_mercado_stackover` (`idMoneda_cache`,`idTipoRA_cache`,`idEmisorFusionado_cache`,`plazoResidual`)
) ENGINE=InnoDB AUTO_INCREMENT=12933194 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:12:41.057

无论您尝试做什么，从 12M 记录中选择 150K 记录并对其执行聚合函数都不会很快。

您可能主要处理历史数据，因为您的示例查询是针对一年的数据。更好的方法可能是预先计算您的每日平均值并将它们放入单独的表格中。然后，您可以查询这些表以获取报告、图表等。您需要决定何时以及如何运行此类计算，这样您就无需在相同的数据上再次重新运行它们。

当您需要对数百万条历史记录进行分析和报告时，您需要考虑使用数据仓库方法[http://en.wikipedia.org/wiki/Data_warehouse](http://en.wikipedia.org/wiki/Data_warehouse)而不是简单的数据库方法。

# javascript - 在 Javascript 中使用带有 while 循环的 .replace

> ID：11678515
> 
> 赞同：1
> 
> 时间：2012-07-26T21:46:33.257
> 
> 标签：javascript, replace, while-loop

我正在编写一个将文本块切成 1000 个字符块的函数。但是，在此之前，我想删除字符串“[edit]”的所有实例。出于某种原因，下面的代码不是为我做的。我究竟做错了什么？（对于整个代码字符串，[http://jsfiddle.net/ayoformayo/yTcRb/13/](http://jsfiddle.net/ayoformayo/yTcRb/13/)）

```
function cutUp(){
    var PAname= prompt("Determine PA type and PA Name");
var chunks = [];
var OGstring = document.getElementById('PATypes').value;
var my_long_string = OGstring.replace("[edit]","");

var i = 0;
var n = 0;
while(n < my_long_string.length) {
chunks.push(my_long_string.slice(n, n += 1000));

}
document.getElementById('PAType=Name=Value4').innerHTML = PAname + chunks[0];
document.getElementById('PAType=Name=Value5').innerHTML = PAname + chunks[1]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T21:51:17.370

默认情况下，String.prototype.replace 只会匹配您搜索的字符串的单个实例。要替换所有出现，您需要将全局标志传递给它。

```
myString.replace(/\[edit\]/g,"") 
```

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)

# jquery - chrome中的jquery自动高度问题

> ID：11678516
> 
> 赞同：0
> 
> 时间：2012-07-26T21:46:35.933
> 
> 标签：jquery, height

![在此处输入图像描述](../Images/b82c7f3f2c316854ec798bbf4caa9423.png)我创建了一个根据窗口屏幕大小调整高度的网站，这意味着不会有滚动。它按预期工作正常，但在 windows xp 中的 chrome 上不能正常工作，即使它在 chrome 中的 Windows 7 中工作正常。

这是[jsfiddle 演示](http://jsfiddle.net/ucZrx/)。

HTML：

```
<section id="mainWrapper">
    <header>Header Content</header>
    <div>panel Content</div>        
    <footer>Footer Content</footer>
</section> 
```

CSS：

```
#mainWrapper {
    background: pink;
    overflow: hidden;
    position: relative;
    /*padding-bottom: 50px;*/
}
header {
    background: yellow;
    height: 85px;
}
footer {
    background: orange;
    overflow: hidden;
    position: absolute;
    left:0;
    bottom:0;
    height:30px;
    width:100%;
}
div {
    background: purple;
    margin-top: 10px;
} 
```

Javascript：

```
var bodyheight = $(document).height();
$("#mainWrapper").height(bodyheight);
$("div").height($('#mainWrapper').height() - $("header").height() - $("footer").height() - 20); 
```

[以及来自Browser Shot](http://browsershots.org/http://jsfiddle.net/ucZrx/)的不同浏览器快照

我进行了很多搜索并尝试了很多次，但无法解决此问题。希望我的问题很清楚。

这是从 chorme-windows xp 获取的屏幕截图。

1.  [示例 1 http://api.browsershots.org/png/original/50/50a5be866ec601d18f396ff7176f8e4e.png](http://api.browsershots.org/png/original/50/50a5be866ec601d18f396ff7176f8e4e.png)

2.  [示例 2 http://api.browsershots.org/png/original/19/19f5f623ac0632361674f7e4f0606f94.png](http://api.browsershots.org/png/original/19/19f5f623ac0632361674f7e4f0606f94.png)

3.  [示例 3 http://api.browsershots.org/png/original/e7/e7e9bf808583080c88ea15f24e913071.png](http://api.browsershots.org/png/original/e7/e7e9bf808583080c88ea15f24e913071.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:56:37.673

您拥有的第一张图片来自不受支持的**CHROME 3**。

它应该适用于所有现代浏览器。

# java - 休眠：能够加载实体但不能保存。未知实体异常被抛出

> ID：11678522
> 
> 赞同：1
> 
> 时间：2012-07-26T21:46:55.027
> 
> 标签：java, oracle, hibernate, save, pojo

我注意到一个奇怪的问题。我有一个与实体类关联的休眠映射文件。

我可以通过以下方式从数据库中加载实体：

```
DetachedCriteria criteria = DetachedCriteria.forEntityName(entityName);
criteria.add(Restrictions.in(CAMPAIGN_ID, campaignIds));
itemsFromDB = hibernateTemplate.findByCriteria(criteria); 
```

我能够从数据库中获取项目。实体名称在休眠映射文件中定义。Hibernate 能够返回关联实体类的实例（在映射文件中定义）以及从数据库加载的数据。

但是，我无法保存新实体。我正在尝试将实体保存在事务中（使用 @Transactional 注释）。我得到以下异常：

```
org.hibernate.MappingException: Unknown entity: abc.com.MyClass
    at org.hibernate.impl.SessionFactoryImpl.getEntityPersister(SessionFactoryImpl.java:580)
    at org.hibernate.impl.SessionImpl.getEntityPersister(SessionImpl.java:1365)
    at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:121)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:210)
    at org.hibernate.event.def.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:56)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:195)
    at org.hibernate.event.def.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:50)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:93)
    at org.hibernate.impl.SessionImpl.fireSave(SessionImpl.java:562)
    at org.hibernate.impl.SessionImpl.save(SessionImpl.java:550)
    at org.hibernate.impl.SessionImpl.save(SessionImpl.java:546)
    at org.springframework.orm.hibernate3.HibernateTemplate$12.doInHibernate(HibernateTemplate.java:693)
    at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:419) 
```

如果有人能提供任何信息，我将不胜感激。

谢谢

# php - PHP 子类可以更改重写方法的参数吗？

> ID：11678525
> 
> 赞同：6
> 
> 时间：2012-07-26T21:47:28.497
> 
> 标签：php, oop

我可以覆盖子类中的 PHP 方法并更改签名中的参数，如下所示。

```
class theParent {
  function myMethod($param1) {
    // code here
  }
}

class theChild extends theParent {
  function myMethod($param1, $param2) {
    // code here
  }
} 
```

我对此进行了测试，它工作正常并且不会引发任何错误。我的问题是，这是不好的形式吗？还是 OOP 的基本原则？

如果父方法被声明为抽象，则子签名不能偏离。如果您需要强制执行接口的该方面，大概这是使用的机制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-13T07:01:15.937

通过不匹配该方法的父类的参数数量，您将抛出严格标准的错误消息。

更多信息在这里...

[为什么覆盖方法参数违反了 PHP 中的严格标准？](https://stackoverflow.com/questions/13423494/why-is-overriding-method-parameters-a-violation-of-strict-standards-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T21:50:51.960

只要

```
class theChild extends theParent {
} 
```

这是 OOP 的一个很好的例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T09:49:56.220

您所做的称为覆盖，这没什么不好，但是如果您想让子类更好地遵守父类的签名，则可以使用如下接口您应该只给出签名，子类必须按原样实现它们宣布。

```
 interface theParent {
      function myMethod($param1) ;
    }

    class theChild extends theParent {
      function myMethod($param1) {
        // code here
      }
    } 
```

希望能帮助到你 ：）

# c++ - How to resize an image to a specific size in OpenCV?

> ID：11678527
> 
> 赞同：29
> 
> 时间：2012-07-26T21:47:32.560
> 
> 标签：c++, opencv, image-resizing

```
IplImage* img = cvLoadImage("something.jpg");
IplImage* src = cvLoadImage("src.jpg");
cvSub(src, img, img); 
```

But the size of the source image is different from `img`.

Is there any opencv function to resize it to the `img` size?

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-27T00:06:48.860

You can use [`cvResize`](http://docs.opencv.org/modules/imgproc/doc/geometric_transformations.html?#void%20cvResize%28const%20CvArr%2a%20src,%20CvArr%2a%20dst,%20int%20interpolation%29). Or better use c++ interface (eg `cv::Mat` instead of `IplImage` and `cv::imread` instead of `cvLoadImage`) and then use `cv::resize` which handles memory allocation and deallocation itself.

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-07-27T09:26:20.093

The two functions you need are documented here:

1.  [imread](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html?highlight=imread#Mat%20imread%28const%20string&%20filename,%20int%20flags%29): read an image from disk.
2.  [Image resizing](http://docs.opencv.org/modules/imgproc/doc/geometric_transformations.html?highlight=resize#resize): resize to just any size.

In short:

```
// Load images in the C++ format
cv::Mat img = cv::imread("something.jpg");
cv::Mat src = cv::imread("src.jpg");

// Resize src so that is has the same size as img
cv::resize(src, src, img.size()); 
```

And please, please, stop using the old and completely deprecated IplImage* classes

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-15T15:14:05.560

For your information, the python equivalent is:

```
imageBuffer = cv.LoadImage( strSrc )
nW = new X size
nH = new Y size
smallerImage = cv.CreateImage( (nH, nW), imageBuffer.depth, imageBuffer.nChannels )
cv.Resize( imageBuffer, smallerImage , interpolation=cv.CV_INTER_CUBIC )
cv.SaveImage( strDst, smallerImage ) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-03T13:12:04.497

Make a useful function like this:

```
IplImage* img_resize(IplImage* src_img, int new_width,int new_height)
{
    IplImage* des_img;
    des_img=cvCreateImage(cvSize(new_width,new_height),src_img->depth,src_img->nChannels);
    cvResize(src_img,des_img,CV_INTER_LINEAR);
    return des_img;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-16T14:50:00.857

You can use `CvInvoke.Resize` for `Emgu.CV 3.0`

e.g

```
CvInvoke.Resize(inputImage, outputImage, new System.Drawing.Size(100, 100), 0, 0, Inter.Cubic); 
```

Details are [here](http://www.emgu.com/wiki/files/3.0.0/document/html/c9c13b1e-4f15-31ea-9d40-4a76d5bee079.htm)

# objective-c - iOS __autoreleasing 常量错误

> ID：11678528
> 
> 赞同：4
> 
> 时间：2012-07-26T21:47:37.650
> 
> 标签：objective-c, ios, automatic-ref-counting

所以我正在做通常的事情，我将一个指向 NSError 对象的指针传递给一个方法。以前很简单：

```
-(BOOL)foo:(NSString *)string error:(NSError **)error 
```

但现在有了 ARC：

```
-(BOOL)foo:(NSString *)string error:(NSError *__autoreleasing *)error 
```

所以如果我有一个变量：

```
NSError *error = nil; 
```

并尝试：

```
[foo:@"a string" error:&error]; 
```

我收到错误：

```
Sending 'NSError const __strong*' to parameter of type 'NSError *__autoreleasing*' changes retain/release properties of pointer. 
```

没关系，尽管我的印象是编译器会为您处理这个问题。所以我犯了错误：

```
__autoreleasing NSError *error = nil; 
```

我收到警告：

```
Sending 'NSError *__autoreleasing const *' to parameter of type 'NSError *__autoreleasing*' discards qualifier 
```

所以我真正的问题是为什么我的 NSError 是一个常量？我的下一个问题是如何解决这个问题？这是一个非常基本的情况，现在有了 ARC，我只是不确定如何处理这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T21:55:08.750

您可以在 Apple 标头中看到接口描述中不需要 __autoreleasing（即查看 NSFileManager attributesOfFileSystemForPath 的头文件）。所以使用：

```
(NSError **) 
```

代替

```
(NSError *__autoreleasing *) 
```

编辑：我有一个我玩的示例项目，其中启用了 ARC，我只是这样做没有问题：

```
-(BOOL)foo:(NSString *)string error:(NSError **)error
{
    return YES;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    __autoreleasing NSError *err = nil;
    [self foo:@"glop" error:&err];
    NSLog(@"%@", err); 
```

编译就好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T21:57:48.687

这在 XCode 4.4 中对我有用：

```
- (BOOL) foo: (NSString*) string error: (out NSError *__autoreleasing *) outError; 
```

# comments - 是否可以将 Facebook 评论发布到我的 Facebook 主页墙上？

> ID：11678533
> 
> 赞同：0
> 
> 时间：2012-07-26T21:48:02.390
> 
> 标签：comments, facebook-page, facebook-comments

我对每个壁纸页的页脚都有评论：

[http://www.socwall.com/desktop-wallpaper/30688/422-by-unknown-artist/](http://www.socwall.com/desktop-wallpaper/30688/422-by-unknown-artist/)

我想在我的 Facebook 主页墙上发表评论：

[http://www.facebook.com/SocWall](http://www.facebook.com/SocWall)

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:27:13.543

是的，但它需要一些编码。以下是基本步骤：

1.  在您的网站上包含[Javascript SDK并](https://developers.facebook.com/docs/reference/javascript/)[订阅 comment.create](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/) Javascript 事件，每当有人发表评论时就会触发该事件。
2.  为您的站点和应用程序验证您的用户（再次使用 JS SDK）并确保您请求`publish_stream`,`user_likes`和`publish_actions`权限。
3.  当您从用户那里获得这些权限时，对 /USERID/likes 执行 FB.api 调用并检查您的页面 ID 是否包含在这些喜欢列表中。
4.  如果它在那里，那么一旦触发步骤 1 中的事件，您就可以在 API 上执行 POST 到 PAGEID/feed 并`message`包含参数。这会将评论发布到您主页的供稿中。

其他几件事要记住：

*   如果用户**不是**您页面的粉丝，您将无法执行第 4 步。
*   您**必须**向用户说明，发表评论也会发布到您的主页。如果您不告诉他们，这将使您的应用违反[Facebook 平台政策](https://developers.facebook.com/policy/)，但更重要的是，它会破坏用户的信任，他们可能会举报您的应用。

# python - 如何使用 python 在文本块中查找文件名？

> ID：11678535
> 
> 赞同：0
> 
> 时间：2012-07-26T21:48:02.273
> 
> 标签：python, file, parsing, text

我已经使用 Python 获得了网页的 HTML，现在我想找到在标题中链接到的所有 .CSS 文件。我尝试了分区，如下所示，但是在运行它时出现错误“IndexError：字符串索引超出范围”并将每个都保存为自己的变量（我知道如何做这部分）。

```
sytle = src.partition(".css")
style = style[0].partition('<link href=')
print style[2]
c =1 
```

我不认为这是处理这个问题的正确方法，所以希望得到一些建议。提前谢谢了。这是我需要从中提取 .CSS 文件的文本的一部分。

```
 <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0" />

<!--[if gte IE 7]><!-->
<link href="/stylesheets/master.css?1342791430" media="screen, projection" rel="stylesheet" type="text/css" />

<link href="/stylesheets/adapt.css?1342791413" media="screen, projection" rel="stylesheet" type="text/css" />
<!-- <![endif]-->
<link href="/stylesheets/print.css?1342791421" media="print" rel="stylesheet" type="text/css" />
<link href="/apple-touch-icon-precomposed.png" rel="apple-touch-icon-precomposed" />
<link href="http://dribbble.com/shots/popular.rss" rel="alternate" title="RSS" type="application/rss+xml" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T21:55:19.733

您应该为此使用[正则表达式](http://docs.python.org/library/re.html)。尝试以下操作：

```
/href="(.*\.css[^"]*)/g 
```

**编辑**

```
import re
matches = re.findall('href="(.*\.css[^"]*)', html)
print(matches) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-29T21:24:08.257

我的答案与[Jon Clements 的答案](https://stackoverflow.com/a/11678978/519015)相同，但我测试了我的答案并添加了一些解释。

您不应该**使用**正则表达式。 [您无法使用 regex 解析 HTML](https://stackoverflow.com/a/1732454/519015)。正则表达式的答案*可能有效，但是使用*[lxml](http://lxml.de/lxmlhtml.html)编写一个健壮的解决方案非常容易。这种方法保证返回所有`<link rel="stylesheet">`标签的完整 href 属性，而不是其他标签。

```
from lxml import html

def extract_stylesheets(page_content):
    doc = html.fromstring(page_content)                        # Parse
    return doc.xpath('//head/link[@rel="stylesheet"]/@href')   # Search 
```

无需检查文件名，因为已知 xpath 搜索的结果是样式表链接，并且无法保证文件`.css`名无论如何都会有扩展名。简单的正则表达式只会捕获一个非常具体的形式，但一般的 html 解析器解决方案也会在这种情况下做正确的事情，在这种情况下，正则表达式会惨遭失败：

```
<link REL="stylesheet" hREf = 

     '/stylesheets/print?1342791421'
  media="print"
><!-- link href="/css/stylesheet.css" --> 
```

它也可以很容易地扩展为仅选择特定媒体的样式表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T22:29:36.467

对于它的价值（使用 lxml.html）作为解析库。

**未经测试**

```
import lxml.html
from urlparse import urlparse

sample_html = """<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0" />

<!--[if gte IE 7]><!-->
<link href="/stylesheets/master.css?1342791430" media="screen, projection" rel="stylesheet" type="text/css" />

<link href="/stylesheets/adapt.css?1342791413" media="screen, projection" rel="stylesheet" type="text/css" />
<!-- <![endif]-->
<link href="/stylesheets/print.css?1342791421" media="print" rel="stylesheet" type="text/css" />
<link href="/apple-touch-icon-precomposed.png" rel="apple-touch-icon-precomposed" />
<link href="http://dribbble.com/shots/popular.rss" rel="alternate" title="RSS" type="application/rss+xml" />
"""

import lxml.html
page = lxml.html.fromstring(html)
link_hrefs = (p.path for p in map(urlparse, page.xpath('//head/link/@href')))
for href in link_hrefs:
    if href.rsplit(href, 1)[-1].lower() == 'css': # implement smarter error handling here
        pass # do whatever 
```

# c++ - 表达式：字符串迭代器在使用 boost 正则表达式时不可取消引用

> ID：11678537
> 
> 赞同：3
> 
> 时间：2012-07-26T21:48:11.337
> 
> 标签：c++, regex, visual-c++, boost, boost-regex

我想从页面中恢复所有链接，在执行此代码时我得到：

> Microsoft Visual C++ 调试库
> 
> 调试断言失败！
> 
> 程序：C:\Users\Gandalf\Desktop\proxy\Debug\Proxy.exe 文件：C:\Program Files\Microsoft Visual Studio 10.0\VC\include\xstring 行：78
> 
> 表达式：字符串迭代器不可取消引用
> 
> 有关您的程序如何导致断言失败的信息，请参阅有关断言的 Visual C++ 文档。
> 
> （按重试调试应用程序）
> 
> 中止 重试 忽略

```
void Deltacore::Client::get_links() {
boost::smatch matches;
boost::match_flag_type flags = boost::match_default;
boost::regex URL_REGEX("^<a[^>]*(http://[^\"]*)[^>]*>([ 0-9a-zA-Z]+)</a>$");

if(!response.empty()) {

    std::string::const_iterator alfa = this->response.begin();
    std::string::const_iterator omega   = this->response.end();

    while (boost::regex_search(alfa, omega, matches, URL_REGEX))
    {
        std::cout << matches[0];
        //if(std::find(this->Links.begin(), this->Links.end(), matches[0]) != this->Links.end()) {
            this->Links.push_back(matches[0]);
        //}
        alfa = matches[0].second;
    }
}
} 
```

任何想法？

添加了更多代码：

```
 Deltacore::Client client;
    client.get_url(target);
    client.get_links();

            boost::property_tree::ptree props;
            for(size_t i = 0; i < client.Links.size(); i++)
                props.push_back(std::make_pair(boost::lexical_cast<std::string>(i), client.Links.at(i)));

            std::stringstream ss;
            boost::property_tree::write_json(ss, props, false);

            boost::asio::async_write(socket_,
                boost::asio::buffer(ss.str(), ss.str().length()),
                boost::bind(&session::handle_write, this,
                boost::asio::placeholders::error)); 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T22:40:53.510

问题出在这一行：

```
boost::asio::buffer(ss.str(), ss.str().length()) 
```

`str()`返回一个*临时* `std::string`对象，因此您实际上是在创建缓冲区后立即使其无效 - 正如我评论的那样，香草 UB。;-]

令牌[文档引用](https://www.boost.org/doc/libs/1_75_0/doc/html/boost_asio/reference/buffer/overload30.html)：

> 对给定字符串对象调用的任何非常量操作都会使缓冲区无效。

当然，销毁字符串符合非常量操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T22:43:49.570

跳过关于使用正则表达式解析 HTML 的讲座（以及你真的不应该如何......），你的正则表达式看起来不像你想要的那样工作。这是你的：

```
"^<a[^>]*(http://[^\"]*)[^>]*>([ 0-9a-zA-Z]+)</a>$" 
```

第一个字符类将是贪婪的，会吃掉你的 http 和以下部分。您想添加一个问号以使其不贪心。

```
"^<a[^>]*?(http://[^\"]*)[^>]*>([ 0-9a-zA-Z]+)</a>$" 
```

这可能与异常有关，也可能无关。

# jquery - phonegap jquery ajax 失败（$.support.cors = true）

> ID：11678541
> 
> 赞同：0
> 
> 时间：2012-07-26T21:48:37.797
> 
> 标签：jquery, cordova

jquery.mobile-1.1.1 jquery-1.7.2.min cordorva-1.9.0

我才刚刚开始使用它并且已经搞砸了一个星期......我已经阅读了那里的每一篇文章并尝试了我能想到的所有组合，但仍然没有任何效果。作为最后的手段，我将它从 phonegap 移到了一个真正的浏览器页面，我得到了一些未定义的错误：

```
// if these are NOT set I get the "NO Transport" error
$.support.cors = true;
$.mobile.allowCrossDomainPages = true;

// however, with the above defined (true), the following is the error:
// xhr.statusText = "error"
// textStatus = "error"
// errorThrown.message = "Access Denied"

function login(username, password)
{
  var serviceURL = "http://mobile.mydomain.com/";
  var strData = "username="+username +"&password="+password;

  // setup the paramaters for the ajax call
  var ajaxParams = {  
      type: 'POST',
      url: serviceURL + 'mypage.php',
      data: strData,
      datatype: 'json',
      success: function(xmlData, textStatus, xhr) { onLoginOK(xmlData, textStatus, xhr) },
      error: function(xhr, textStatus, errorThrown) { 
                      onLoginFailure(xhr, textStatus, errorThrown) },
      timeout: 5000,
      cache: false
  };

  // make the ajax call
  $.ajax(ajaxParams);
}

function onLoginOK(data, textStatus)
{
  // probably not right but haven't gotten this far!
  var what = jQuery.parseJSON(data); 

  alert("Login results: " + data); 
  if(what.status == "OK")
  {
    localStorage.setItem("door", what.username);
    localStorage.setItem("knock", what.password);
    localStorage.setItem("house", what.userid);
  }
  else if(what.status == "FAILED")
  {
      alert("Login failed: " +what.text);
  }
}

function onLoginFailure(xhr, textStatus, errorThrown)
{
  alert("There was an error: The server reported: " + xhr.responseText 
        +"\nstatus: " +textStatus 
        + "\nerror: " +errorThrown);
} 
```

在 cordova.xml 中，我允许通过以下方式访问我的域：

```
<access origin="http://mobile.mydomain.com" subdomains="true "/> 
```

有人有什么建议吗？

==================================================== ======================这是来自eclipse：

```
07-27 09:12:16.612: I/dalvikvm(1295): Could not find method android.webkit.WebView.<init>, referenced from method org.apache.cordova.CordovaWebView.<init>
07-27 09:12:16.612: W/dalvikvm(1295): VFY: unable to resolve direct method 3116: Landroid/webkit/WebView;.<init> (Landroid/content/Context;Landroid/util/AttributeSet;IZ)V
07-27 09:12:17.339: I/webviewdatabase(1295): openOrCreateDatabase1
07-27 09:12:17.362: I/CordovaLog(1295): Changing log level to DEBUG(3)
07-27 09:12:17.362: I/CordovaLog(1295): Found preference for useBrowserHistory=false
07-27 09:12:17.378: E/dalvikvm(1295): Could not find class 'android.webkit.WebResourceResponse', referenced from method org.apache.cordova.CordovaWebViewClient.generateWebResourceResponse
07-27 09:12:17.378: W/dalvikvm(1295): VFY: unable to resolve new-instance 451 (Landroid/webkit/WebResourceResponse;) in Lorg/apache/cordova/CordovaWebViewClient;
07-27 09:12:17.378: W/dalvikvm(1295): VFY: unable to find class referenced in signature (Landroid/webkit/WebResourceResponse;)
07-27 09:12:17.386: W/dalvikvm(1295): VFY: unable to find class referenced in signature (Landroid/webkit/WebResourceResponse;)
07-27 09:12:17.386: W/dalvikvm(1295): VFY: unable to find class referenced in signature (Landroid/webkit/WebResourceResponse;)
07-27 09:12:17.386: I/dalvikvm(1295): Could not find method android.webkit.WebViewClient.shouldInterceptRequest, referenced from method org.apache.cordova.CordovaWebViewClient.shouldInterceptRequest
07-27 09:12:17.386: W/dalvikvm(1295): VFY: unable to resolve virtual method 3127: Landroid/webkit/WebViewClient;.shouldInterceptRequest (Landroid/webkit/WebView;Ljava/lang/String;)Landroid/webkit/WebResourceResponse;
07-27 09:12:19.706: W/dalvikvm(1295): No implementation found for native Lcom/carrieriq/iqagent/client/NativeClient;.clientInit (Ljava/lang/Object;)I
07-27 09:12:21.979: I/Database(1295): sqlite returned: error code = 14, msg = cannot open file at source line 25467
07-27 09:12:22.198: I/Web Console(1295): Error: SyntaxError: Unexpected token ILLEGAL at file:///android_asset/www/cordova-1.9.0.js:1012
07-27 09:12:22.347: I/Flex(1295): loadOperatorCode() strOp is AT&T
07-27 09:12:22.347: I/Flex(1295): loadOperatorCode() strMccList is 
07-27 09:12:22.347: I/Flex(1295): loadOperatorCode() cr.query strMCC strMNC 
07-27 09:12:22.354: I/Flex(1295): loadOperatorCode() mOperatorIndex ==> 1
07-27 09:12:24.167: I/Web Console(1295): **Error** initializing Network Connection: Class not found at file:///android_asset/www/cordova-1.9.0.js:5317
07-27 09:12:26.854: I/Web Console(1295): **JSCallback Error:** Request failed. at file:///android_asset/www/cordova-1.9.0.js:3747
07-27 09:12:28.331: I/Database(1295): sqlite returned: error code = 14, msg = cannot open file at source line 25467
07-27 09:12:28.347: I/Web Console(1295): **Error:** SyntaxError: Unexpected token ILLEGAL at file:///android_asset/www/cordova-1.9.0.js:1012
07-27 09:12:28.386: I/Web Console(1295): **Error** initializing Network Connection: Class not found at file:///android_asset/www/cordova-1.9.0.js:5317 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T06:07:01.497

首先，您应该在添加您的 cordova 或 JQM 脚本之前添加这些

```
<script type="text/javascript">
$(document).bind("mobileinit", function() {
    $.support.cors = true;
    $.mobile.allowCrossDomainPages = true;
});
</script> 
```

然后你应该像这样发出一个ajax请求

```
$
.ajax({
    cache : false,
    type : 'POST',//While GET working
    async: false,
    url : "http://192.168.1.100/something.xml" + "?time=" + Date.now(),
    data : {
        key : "value"
        },
    dataType : "xml",
    success : function(xml) {
            },
    error : function(xhr, ajaxOptions, thrownError) {
        alert(xhr.status);
        alert(thrownError);
    }
}); 
```

如果这不适合您使用`XMLHttpRequest`

```
var req = new XMLHttpRequest();
req.open("POST", "http://192.168.1.100/something.JPG", true);
req.setRequestHeader("Content-type", "image/jpg");

req.onreadystatechange = function() {
    if (req.readyState == 4) {
        if (req.status == 200) {
            var data = req.responseText;
        }
    }
};
req.send(null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:21:35.663

你得到什么错误？你能发布来自 FireBug 或 IE 开发者工具的请求和响应文本吗？

查看您的代码，如果您还没有的话，我有一些想法可以尝试：

1) 指定内容类型。

```
 contentType: "application/json; charset=utf-8" // <-- or whatever contentType 
```

2) 如果 mypage.php 需要请求正文中的用户名和密码，则尝试将 strData 更改为 json

```
strData = {
     username:username, password:password
} 
```

3）和/或字符串化它取决于 mypage.php 是否需要一个对象或一个字符串

```
JSON.stringify(strData); 
```

此外，由于您的处理程序具有与匿名处理程序函数完全相同的参数，因此您可以替换：

```
success: function(xmlData, textStatus, xhr) {
         onLoginOK(xmlData, textStatus, xhr) 
},
error: function(xhr, textStatus, errorThrown) { 
       onLoginFailure(xhr, textStatus, errorThrown) 
}, 
```

直接分配：

```
success: onLoginOK,
error: onLoginFailure, 
```

通过消除可能的错误来源，可以使调试更容易一些。

生成的代码可能如下所示...

```
function login(username, password)
{
    var serviceURL = "http://mobile.mydomain.com/";
    var strData = JSON.stringify({
        username:username, password:password
    });

  // setup the paramaters for the ajax call
  var ajaxParams = {  
      type: 'POST',
      url: serviceURL + 'mypage.php',
      data: strData,
      datatype: 'json',
      contentType: "application/json; charset=utf-8" // <-- or whatever contentType 
      success: onLoginOK,
      error: onLoginFailure,
      timeout: 5000,
      cache: false
  };

  // make the ajax call
  $.ajax(ajaxParams);
} 
```

查看请求和响应文本真的很有帮助。如果以上都没有帮助，您可以将它们附加到您的回复中吗？

# image-processing - 使用 leptonica 进行 OCR 图像处理（反色文本）

> ID：11678542
> 
> 赞同：16
> 
> 时间：2012-07-26T21:48:41.570
> 
> 标签：image-processing, ocr, tesseract

我正在尝试使用 leptonica 处理以下图像以使用 tesseract 提取文本。

**原图：** ![原始图像](../Images/a817d8fc536094fa20caf9fb932f46ed.png)

原始图像上的 Tesseract 产生以下结果：

```
i s l
D2J1FiiE-l191x1iitmwii9 uhiaiislz-2 Q ~37
Bottom linez
With a little time!
you can learn social media technology
using free online resources-
And if you donity
youlll be at a significant disadvantage
to
other HOn-pFOiiTS- 
```

不是很好，尤其是顶部背景。所以使用 leptionica 我使用背景去除算法（模糊、差异、阈值、反转）来获得以下图像： ![处理后的图像](../Images/a528ba85928403a3a63111bf654155be.png)

但是 tesseract 并没有很好地处理它：

```
@@r-mair lkrm@W lh@w ilr@ mJs@ iklh@ ii@c2lhm1@ll
mm Mime
VWU1 a Mitt-Jle time-
@1m ll@@Wn Om @@@lh1
using free onhne resources-
Andifyoudoni
9110 ate a $0 D
to other non-profrts
I 
```

似乎主要的问题是现在所有的文本都是轮廓而不是实体的。我该如何调整我的算法或者我可以添加什么来使文本更牢固？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-27T22:17:57.483

似乎本文提出了一种解决您的问题的二值化方法：

T Kasar、J Kumar 和 AG Ramakrishnan。[字体和背景颜色无关的文本二值化](http://mile.ee.iisc.ernet.in/mile/publications/softCopy/DocumentAnalysis/CBDAR_Kasar_2007.pdf)。(2007)

![Kasar etal 方法性能](../Images/5af0b08bf8cbd089fb9d442d956c7b42.png)

# java - 如何查看 PreparedStatement 的外观？

> ID：11678556
> 
> 赞同：5
> 
> 时间：2012-07-26T21:49:53.937
> 
> 标签：java, jdbc, prepared-statement

> **可能重复：**
> [如何获取 PreparedStatement 的 SQL？](https://stackoverflow.com/questions/2382532/how-can-i-get-the-sql-of-a-preparedstatement)

我制作了一个 PreparedStatement (PS) 并在其上运行一些 setString(int a,String b)。在此之后，我如何看到我的 PS 最终的样子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T22:01:02.723

如果我理解你，你会想要这样的东西：

```
 PreparedStatement pstmt = 
           connection.prepareStatement("insert into table tab(col) values(?)");
    pstmt.setString(1, "my string value"); 
```

然后你想看到一个像这样的字符串：

```
"insert into table(col) values('my string value')" 
```

我理解你的意思了吗？

如果是这样，我认为你不能这样做。我认为该语句是在没有参数值的情况下预编译的，并且这些是分开保存的，因此您可以重用具有不同参数的语句。

您可以做的是检索参数元数据，如下所示：

```
 ParameterMetaData pmd = pstmt.getParameterMetaData(); 
```

然后调用类似的东西：

```
 pmd.getParameterCount();
    pmd.getParameterClassName(1);
    pmd.getParameterType(1); 
```

# php - 捕获事件的进程间推送

> ID：11678563
> 
> 赞同：0
> 
> 时间：2012-07-26T21:50:45.930
> 
> 标签：php, ajax, events, polling

我有一个基于 php 的 Web 应用程序，可以捕获数据库表中的某些事件。它还具有这些捕获事件的可视化：一个列出由 ajax 控制的事件的 html 表。

我想添加一个可选的“实时”功能：按下按钮（“打开”）后，从那一刻起捕获的所有事件都将插入到已经可见的表中。必须发生三件事：注意事件、获取事件数据并将其插入表中。为了将服务器负载保持在合理的范围内，我不想使用 ajax 请求轮询新事件，而是更喜欢长轮询策略。

这样做的问题显然是，在进行长轮询 ajax 调用时，服务器对应方必须监视事件。由于事件是由 php 脚本注册的，因此如果不再次轮询数据库以进行更改，就无法简单地注意到该事件。这是因为捕获操作在另一个进程中运行，而不是观察长轮询请求。我环顾四周，为这种进程间通信找到了一种可用的机制，正如我从 linux 下的富客户端所知道的那样。确实有信号量、共享内存甚至 posix 的 php 扩展。然而，它们都只存在于 linux（或类似 unix）系统下。虽然通常情况下，该应用程序可能会在极少数情况下在 MS-Windows 系统下使用。

所以我的简单问题是：在所有（大多数）系统上通常都有什么方法可以将此类事件推送到为长轮询 ajax 请求提供服务的 php 脚本？因为我在其他地方已经有一个事件，所以不需要不断地轮询文件或数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T00:41:46.090

所以，最初的警告：如果不做一些“特别”的事情，尝试使用普通 PHP 进行长轮询会消耗资源，直到你杀死你的服务器。

这是一个很好的基于 PHP 的长轮询的基本指南以及一些与走“简单”道路相关的挑战： [如何实现基本的“长轮询”？](https://stackoverflow.com/questions/333664/simple-long-polling-example-code)

就做这个真正跨平台的（并且足够简单开始）而言，您可能需要回退到某种简单的内部轮询 - 但目标应该是确保此操作比拥有客户端成本低得多轮询。

一种方法是本质上将其视为缓存数据库调用（此时您就是这样），并采用一些标准缓存方法。从 APC 到 memcached 再到轮询文件，一切都可能比让客户端每秒建立和断开连接给服务器带来的负载更少。让一个进程将数据放入正确的键中，然后定期在脚本中轮询它们。

以下是对您可能足够跨平台的各种缓存选项的一个很好的概述：http: [//simas.posterous.com/php-data-caching-techniques](http://simas.posterous.com/php-data-caching-techniques)

一旦你达到了这种方法的极限，无论如何你可能不得不转向不同的服务器架构。

# php - 如何在 if else 循环之外声明这个变量

> ID：11678564
> 
> 赞同：0
> 
> 时间：2012-07-26T21:50:50.637
> 
> 标签：php

所以这是我的问题；我正在处理其他团队成员交给我的一些代码（不是我的代码）；因此，要弄清楚所有变量和此类匹配的位置非常深入且乏味，我设法找出了这篇文章，这给我带来了麻烦，为什么我的代码在这里不起作用

```
<td nowrap style="border-left: 1px solid #dddddd;" align="center">&nbsp;&nbsp;

                     <?=$display_balance_details;?> 
```

这段代码显然将其设置为 $display_balance_details 仅在某些页面上设置，我的问题是我试图将其移至所有网页的标题；

```
 else if ($section == 'history')
    {
        $user = new user();
        $user->setts = &$setts;

        $row_user = $db->get_sql_row("SELECT * FROM
            " . DB_PREFIX . "users WHERE user_id=" . $session->value('user_id'));

        $template->set('user_details', $row_user);

        $template->set('display_account_status', $user->account_status($row_user['active'], $row_user['approved']));

        $user_payment_mode = $fees->user_payment_mode($session->value('user_id'));
        $template->set('user_payment_mode', $user_payment_mode);

        $template->set('display_payment_mode', $user->payment_mode_desc($user_payment_mode));

        (string) $display_balance_details = null;
        $display_balance_details = $user->show_balance($row_user['balance'], $setts['currency']);

        if ($user_payment_mode == 2 && $row_user['balance']>=$setts['min_invoice_value'])
        {
            $display_balance_details .= ' [ <a href="fee_payment.php?do=clear_balance">' . MSG_CLEAR_ACC_BALANCE . '</a> ]';
        }

        $template->set('display_balance_details', $display_balance_details);

        $show_history_table = false; 
```

这段代码告诉在哪些页面上设置它

```
<? } else if ($page == 'account') { ?>
<td nowrap <?=(($section == 'history') ? 'class="subcell_a"' : 'class="subcell_u"');?>><a href="<?=process_link('members_area', array('page' => 'account', 'section' => 'history'));?>"> 
```

所以我的问题是如何在不删除 $section == 'history' 位的情况下设置 $display_balance_details （因为这可能会导致一系列其他问题，不确定代码是如何编写的）以及如何最好地解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:59:55.627

您可以使变量全局：

```
global $display_balance_details; 
```

或者您在以下情况之前声明 $display_balance_details：

```
(string) $display_balance_details = null;
if ($section == 'history')
{
your code
} 
```

# c++ - Doxygen 警告：记录的函数未声明或定义

> ID：11678567
> 
> 赞同：3
> 
> 时间：2012-07-26T21:51:08.433
> 
> 标签：c++, warnings, doxygen

我第一次尝试使用 Doxygen。在运行 Doxygen 时，我会收到大量如下形式的警告：

<code>.cxx:<line number>: 警告：记录的函数 `<function>::<function>' 未声明或定义。

我不知道如何解决这个问题。我正在使用一个大型 C++ 包，并且在运行 Doxygen 时会引发数百次此类警告。

以下是更具体的信息：

示例警告：

```
 Accept.cxx:14: warning: documented function `Accept::Accept' was not declared or defined. 
```

相应的代码示例部分：

```
 #include "Analysis/Accept.h"
            #include "Analysis/Cutflow.h"
            #include "GlaNtp/GlaUtil/Steer/Steer.h"
            #include <iostream>

            Accept::Accept(unsigned int cutmask, unsigned int invertword, StringIntMap* CutTypeMap, Cutflow* analysis_cutflow): m_cutmask(cutmask), m_invertword(invertword), 
                                                                            m_cutword(0),m_cutword_set(false), m_CutTypeMap(CutTypeMap),
                                                                                    m_analysis_cutflow(analysis_cutflow){ 
                                                                                        // this is constructor
            InitBitOrder();

            }

            Accept::~Accept(){}

            void Accept::setCutWord(const unsigned int &cutword){
             m_cutword_set = true;
             m_cutword = cutword;
            }

            bool Accept::didBitPass(){
             //std::cout << "Rick Evnt Pass: " << rickTestCutWord() << std::endl;
             return testCutWord();
            }

            void Accept::InitBitOrder(){

             Steer* bitorsteer=new Steer(); 

             std::string configfile="ConFigFiles/ApplyBits/BitOrderConfigurationFile.txt";

            if(!bitorsteer->ReadFile(configfile)){
             std::cout << "Fatal ERROR: Failed to read Bit Order configuration steering file:  " << configfile << std::endl;
             delete bitorsteer;
             bitorsteer=0;
             exit(1);
            }

            m_bitOrderMap = new StringIntMap("BitOrder", bitorsteer);//  bit order

            delete bitorsteer;
            } 
```

我将不胜感激您在为我指明正确方向时可能提供的任何帮助。

先发制人的感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T22:11:42.207

我的猜测是 Doxygen 没有解析`Analysis/Accept.h`头文件，所以它没有看到`Analysis`类声明。在输出日志中，检查`Analysis/Accept.h`是否确实正在处理。

为确保 Doxygen 解析`Analysis`目录，您可能必须在 Expert->Input（在 Doxygen GUI 前端）中添加额外的源目录，和/或启用递归选项。也许您必须指定比您当前指定的目录高一级的源目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T11:08:11.923

我遇到了同样的问题，并遵循了 Emile Cormier 的建议。在我的情况下，相关的头文件确实没有被解析。这是因为我有一个扩展名为 .h 的 c++ 头文件。我最初在 Doxygen.in 文件中有以下内容：

```
EXTENSION_MAPPING      = .h=C++ 
```

仔细查看输出，我注意到语句：“添加自定义扩展映射：..h 将被视为语言 c++”，表示额外的“.”。从相关行中删除句号解决了我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-31T12:26:27.170

FWIW，我有另一个案例触发了这样的警告：在两个不同的地方完成了 typedef。这在 C++ 中没问题，但会导致 doxygen (1.8.7) 发出这个警告。重新排序以使单个定义修复它。

# php - PHP 开关功能无法识别“小于 0”

> ID：11678570
> 
> 赞同：3
> 
> 时间：2012-07-26T21:51:37.483
> 
> 标签：php

```
$bytes = 0;
switch($bytes){
    case $bytes == 0:
        echo 'Equal to 0.';
    break;
    case $bytes < 0:
        echo 'Less than 0.';
    break;
} 
```

这将输出“小于 0”。

为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T21:53:02.433

`switch`声明不是那样工作的。检查 each 时`case`，会将值与值进行比较`case`（使用`==`）。

所以，PHP 正在做：

*   有吗`$bytes == ($bytes == 0)`？即：`$bytes == (true)`。这是`false`，所以它被跳过了。
*   有吗`$bytes == ($bytes < 0)`？即：`$bytes == (false)`。这是`true`，所以它运行那个块。

你需要在`if/else`这里使用。

```
$bytes = 0;
if($bytes == 0){
    echo 'Equal to 0.';
}
elseif($bytes < 0){
    echo 'Less than 0.';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-03T14:33:26.363

一个老问题，但还有另一种使用 switch 的方法 :) 我在 SitePoint 上找到了它！

```
switch (true) {

    case $bytes == 0:      // result of this expression must be boolean
        echo 'Equal to 0.';
    break;

    case $bytes < 0:     // result also must be boolean
        echo 'Less than 0.';
    break;

    default:
} 
```

说明： if`true == ($bytes == 0)`或 if `true == ($bytes > 0)`or`default:`
你可以使用`switch (false) {}`if you have many falsy results 而不是`x != y`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T21:55:26.480

您不能在 switch 语句中使用运算符。它实际上应该是：

```
$bytes = 0;
switch($bytes){
    case 0:
        echo 'Equal to 0.';
    break;
    default:
        echo 'Something else';
    break;
} 
```

查看完整的文档：[http ://www.php.net/manual/en/control-structures.switch.php](http://www.php.net/manual/en/control-structures.switch.php)

为什么您的样本结果“小于零”？简单的问题： ($bytes < 0) 评估为假，因为它不是。False 等价于 0，因此它匹配 $bytes 并属于这种情况。

如果您需要匹配某些范围，则必须使用 if-else-constructs。

# joomla - 如何让我的新页面显示在 Joomla! 的正确菜单中？

> ID：11678578
> 
> 赞同：0
> 
> 时间：2012-07-26T21:52:08.820
> 
> 标签：joomla

我被要求为客户编辑网站，但该网站是使用我以前从未使用过的 joomla 构建的。

我已经建立了我想要的新页面，但我无法让它显示在正确的菜单中。我想我只需要它出现在“主菜单”部分，但我不知道如何告诉 joomla 来检测它......

现在讨厌 Joomla，但希望有人能提供帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T04:31:19.300

```
See below url:-

http://docs.joomla.org/Adding_a_menu_item_which_points_to_an_Article

Or

http://www.gradientpixels.ca/joomla-tutorials/129-what-are-joomla-hidden-menus 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:12:45.660

在顶部菜单的管理面板中，转到：

```
Menus >> Main Menu (or which ever menu the item belongs to) 
```

单击菜单项，然后在“父项”下的左侧，单击“整容手术”

希望这就是你要找的。

问候

# focus - 什么事件可以触发 wx.Checklist 控件的 GetFocus？

> ID：11678582
> 
> 赞同：0
> 
> 时间：2012-07-26T21:52:35.767
> 
> 标签：focus, wxpython, listcontrol

我正在尝试使用清单控件的焦点向用户提供信息以帮助他们进行选择。我可以 self.list.GetFocus 在检查项目事件上，但似乎无法在检查项目之外获得焦点。我的目标是让用户选项卡通过列表，并且随着列表焦点的变化，它会从焦点所在的行发送状态栏信息，以便通知用户。OnCheckItem 选择用于触发另一个操作。任何人都可以给我一些方向吗？谢谢

这是我正在使用的代码：

```
 #!/usr/bin/env python
    # encoding: ISO-8859-1
    """
    Simple Checkbox List Control.py

    """

    import wx
    import wx.lib.mixins.listctrl as listmix
    from wx.lib.pubsub import Publisher

    listhdr=('File', 'Info','Data')
    listdata=(  ( "file00","info00","data0"),
                ( "file01","info01","data1"),
                ( "file02","info02","data2"),
                ( "file03","info03","data3"),
                ( "file04","info04","data4"),
                ( "file05","info05","data5"))

    #=======================================================================
    #           CheckListControl Panel Class
    #=======================================================================

    class TestListCtrl(wx.ListCtrl, listmix.CheckListCtrlMixin, listmix.ListCtrlAutoWidthMixin):
        def __init__(self, *args, **kwargs):
            wx.ListCtrl.__init__(self, *args, **kwargs)
            # Initialize ListCtrl Widge
            listmix.CheckListCtrlMixin.__init__(self)
            listmix.ListCtrlAutoWidthMixin.__init__(self)
            self.setResizeColumn(3)

            self.checked = -1 # class container variable for the checked item index
            self.rowindex=[] # class container variable for selected row
            self.status={} # Dictionary to keep track of the checklist state
            #print self.GetFocus()
        def OnCheckItem(self, index, flag):
            self.msg1=''
            self.msg2=''
            if flag==True:
                #msg=str('Checked Item '+str(index))
                #The following insures only one checked item is checked at a time
                if self.checked==-1:
                    self.checked=index
                    self.msg1='Checked box %i '%(self.checked)
                else:
                    self.CheckItem( self.checked, False)
                    self.checked=index
                    self.msg1=' Checked box %i '%(self.checked)
            if flag==False:
                self.msg2=str('Unchecked Item '+str(index))
                #The following addresses checked item that was unchecked
                self.checked=-1
            self.status[index]=flag # set dictionary to current state of any changed item
            #print 'status ',self.status
            #msg='Check list Status: '+str(self.status)
            msg=self.msg2+self.msg1
            #print msg
            Publisher().sendMessage(('change_statusbar'), msg) # Communication with Main Frame
            print msg
            self.Refresh() # this just to insure the displayed list is current

    #=======================================================================
    #           CheckList Panel Class
    #=======================================================================            
    class CheckListPanel(wx.Panel):
        def __init__(self, parent):
            wx.Panel.__init__(self, parent, -1)
            self.SetBackgroundColour('blue')
            # Define CheckBoxList Layout
            self.list = TestListCtrl(self, style=wx.LC_REPORT) # Instantiate the checklist control
            self.list.InsertColumn(0, "File",width=100)
            self.list.InsertColumn(1, "Info")
            self.list.InsertColumn(2, "Data")
            self.list.Arrange()
            # Populate the List Table
            for entry in listdata:
                #self.list.Append([str(i), "", "It's the %d item" % (i)])   # this is from the source file template 
                self.list.Append(entry) # construct the table entries

            # add CheckListPanel widgets to vertical sizer
            self.sizer = wx.BoxSizer(wx.VERTICAL)
            self.sizer.Add(self.list,1, flag=wx.EXPAND | wx.ALL, border=5)  
            self.SetSizerAndFit(self.sizer) 

    #===========================================================================================================================
    #           Main Frame 
    #===========================================================================================================================
    class MainWindow(wx.Frame):
        def __init__(self, parent):
            wx.Frame.__init__(self, parent, -1, 'Panel with CheckBox List Control-Mixins Example', size=(700, 600))
            self.sb=self.CreateStatusBar()
            self.sb.SetStatusText("Check an Item")
            Publisher().subscribe(self.change_statusbar, 'change_statusbar')
            self.panel = wx.Panel(self)
            self.list = CheckListPanel(self.panel)

            # now add widgets to FramePanel
            self.sizer = wx.BoxSizer(wx.VERTICAL) # create Sizer
            self.sizer.Add(self.list,1, flag=wx.EXPAND | wx.ALL, border=5)
            self.panel.SetSizer(self.sizer) # 

            self.Show()

        # Set the methods to receive PubSub transfers
        def change_statusbar(self, msg):
            self.msg=msg
            self.SetStatusText(msg.data)        

    app = wx.App(False)
    win = MainWindow(None)
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T00:20:57.807

好吧，我可能已经想通了。以下代码在添加到 CheckListPanel 类时将允许识别所选项目。我猜必须先实例化列表控件，然后才能使用 GetSelectedItem() 方法，因为它需要 wx.ID 来绑定事件。我在填充设置面板大小的列表后添加了这个

```
 # bind selected event to selected row
    wx.EVT_LIST_ITEM_SELECTED(self,self.list.GetId(), self.OnSelectItem)

def OnSelectItem(self, index):
    print 'Selected item index=',self.list.GetFocusedItem()
    msg='Selected item index='+str(self.list.GetFocusedItem())
    Publisher().sendMessage(('change_statusbar'), msg) # Communication with Main Frame 
```

# javascript - 从具有相同名称的隐藏输入中获取值

> ID：11678583
> 
> 赞同：-2
> 
> 时间：2012-07-26T21:52:41.513
> 
> 标签：javascript, jquery

我如何从 cName 输入中获取价值：

```
<form method="post" action="">
  <input type="hidden" name="cName" value="test1" />
  <input type="submit" name="get" />
</form>

<form method="post" action="">
  <input type="hidden" name="cName" value="test2" />
  <input type="submit" name="get" />
</form> 
```

我希望当我单击 get with jquery 或 javascript 从 cName 获取值时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:56:02.520

当您说“单击”时，您的意思是单击提交按钮，从而提交表单吗？如果是这样，您应该改用该`submit`事件，因为它也会在用户按下 Enter 键时触发：

```
$("form").submit(function() {
    // finds the relevant input based on the submitted form
    // and then gets the value of that input
    var val = $(this).find("input[name='cName']").val();
    // the following line prevents the form submission, which I assume
    // you want to do because getting the value would otherwise be useless
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T21:57:56.190

这将给出您单击的表单的值，而不是其他表单的值：

```
$("[name=get]").click(function () {
    alert($(this).closest("form").find("[name=cName]").val();
    return false;  // prevent the submission
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T21:58:52.053

```
 $('input[name="get"]').click(function(){
  alert($(this).closest('form').find('input[name="cName"]').val());
 return false;
}); 
```

试试这个链接[http://jsfiddle.net/RqrH8/1/](http://jsfiddle.net/RqrH8/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T21:58:57.517

以下将返回您寻找的值的数组。

```
var arrCnameValues = $("input[name=cName]").map(function(i,c){ return c.value; }); 
```

arrCnameValues 将是 ["test1","test2"] ...然后您可以像操作任何文本值数组一样操作结果。

```
arrCnameValues.join(','); 
```

=测试1，测试2

```
arrCnameValues[0]; 
```

= 测试1

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T21:56:13.040

这是您要使用的选择器，但您需要缩小选择器的范围以提高性能并仅获得两个或多个 cName 输入中的一个。

```
$("input[name='cName']").val() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T21:58:56.503

```
$(document).ready(function(){
    $('input[type="submit"]').click(function(){
        alert($($('input[name="cName"]')[0]).val() + ' ' + $($('input[name="cName"]')[1]).val());
    });
}); 
```

# reporting-services - SSRS 2008：根据 DataSet1 中的计算值从 DataSet2 获取特定行值

> ID：11678584
> 
> 赞同：0
> 
> 时间：2012-07-26T21:52:45.920
> 
> 标签：reporting-services, ssrs-2008

我有两个数据集。第一个用于填充 tablix。在该 tablix 中，有一个计算百分比字段。我想根据百分比是否在某个范围内，换句话说，根据 KPI 阈值显示不同的背景颜色。我在第二个数据集中动态输入阈值，其中包含 ColorName、LowerLimit 和 UpperLimit 字段。我知道我需要使用某种查找函数来获取该行的颜色值，其中百分比落在该行的 LowerLimit 和 UpperLimit 内。我可以假设限制不会重叠。有什么功能/方法可以做到这一点？我动态拉它的原因是为客户提供一种配置阈值的方法（使用将管理该表的维护屏幕）。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T17:00:48.967

返回到 sql 并在数据集中添加另一个字段，以便阈值在 tablix 使用的数据集中

# php - 配置 Cake 2.x 为会话使用不同的数据库

> ID：11678587
> 
> 赞同：2
> 
> 时间：2012-07-26T21:52:50.620
> 
> 标签：php, cakephp, cakephp-2.0

Cake 1.x 有一个配置选项，允许为`Session.database`会话表使用完全不同的机器/数据库。在 Cake 2.0 中，默认的 core.php 配置文件似乎不再具有该选项。

如果不编写自定义会话处理程序，这仍然可能吗？

```
/**
 * Session configuration.
 *
 * Contains an array of settings to use for session configuration. The defaults key is
 * used to define a default preset to use for sessions, any settings declared here will override
 * the settings of the default config.
 *
 * ## Options
 *
 * - `Session.cookie` - The name of the cookie to use. Defaults to 'CAKEPHP'
 * - `Session.timeout` - The number of minutes you want sessions to live for. This timeout is handled by CakePHP
 * - `Session.cookieTimeout` - The number of minutes you want session cookies to live for.
 * - `Session.checkAgent` - Do you want the user agent to be checked when starting sessions? You might want to set the
 *    value to false, when dealing with older versions of IE, Chrome Frame or certain web-browsing devices and AJAX
 * - `Session.defaults` - The default configuration set to use as a basis for your session.
 *    There are four builtins: php, cake, cache, database.
 * - `Session.handler` - Can be used to enable a custom session handler.  Expects an array of of callables,
 *    that can be used with `session_save_handler`.  Using this option will automatically add `session.save_handler`
 *    to the ini array.
 * - `Session.autoRegenerate` - Enabling this setting, turns on automatic renewal of sessions, and
 *    sessionids that change frequently. See CakeSession::$requestCountdown.
 * - `Session.ini` - An associative array of additional ini values to set.
 *
 * The built in defaults are:
 *
 * - 'php' - Uses settings defined in your php.ini.
 * - 'cake' - Saves session files in CakePHP's /tmp directory.
 * - 'database' - Uses CakePHP's database sessions.
 * - 'cache' - Use the Cache class to save sessions.
 *
 * To define a custom session handler, save it at /app/Model/Datasource/Session/<name>.php.
 * Make sure the class implements `CakeSessionHandlerInterface` and set Session.handler to <name>
 *
 * To use database sessions, run the app/Config/Schema/sessions.php schema using
 * the cake shell command: cake schema create Sessions
 *
 */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T05:15:06.767

From my own staff:

" Ok, so the way seems to be to create a custom "session handler" model. Use the setting like this:

```
Configure::write('Session.handler.model', 'CustomSession'); 
```

where the CustomSession.php model file has the configs. 'sessions' is a config I added to my config/database.php file:

```
<?php
class CustomSession extends AppModel {
    var $useDbConfig = 'sessions';
    var $useTable = 'cake_sessions';
} 
```

"Unfortunately, the Cake documentation on this feature is terrible. The cake Session.handler, which actually defines the behavior of Session, is different than the Cake Session.handler.model. By default, the handler.model is AppModel (In Cake internals, see lib/Cake/Model/Session/DatabaseSession.php line 48 __construct() function - where it instantiates $this->_model. If you don't set a custom model, it will instantiate to AppModel. Try putting in a debug to see it in action.) The sparse documentation I linked to explains it as

The above will tell CakeSession to use the built in ‘database’ defaults, and specify that a model called CustomSession will be the delegate for saving session information to the database.

Also, see [http://api20.cakephp.org/class/database-session](http://api20.cakephp.org/class/database-session) _model property: "Reference to the model handling the session data"

So that's how/why it works....

-AWD"

# .net - Xml反序列化或格式错误？

> ID：11678588
> 
> 赞同：0
> 
> 时间：2012-07-26T21:52:55.070
> 
> 标签：.net, xml, serialization, xml-serialization

我有一些来自 3rd 方 API 的 XML，如下所示：

```
<root>
  <Data>
    <sub_id>3</sub_id>
    <email>something@something.test</email>
  </Data>
  <Data>
    <sub_id>7</sub_id>
    <email>test@what.biz</email>
  </Data>
</root> 
```

我想将它反序列化为这样的类：

```
public class root
    {
        //[XmlArray("Datas")]
        [XmlArrayItem("Data", typeof(Data))]
        public Data[] Data { get; set; }
    }

    public class Data
    {
        public int subscriber_id { get; set; }
        public string email { get; set; }
    } 
```

但这当然行不通。如果我插入一个元素来包装“数据”元素的数组，我已经注释掉的行“数据”将修复它，但我不能。正如我所说，这个 XML 来自第 3 方（对 XML 的工作方式有点松懈）。

那么这对一些不同的 C# 代码/属性是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T02:15:51.873

删除类根并反序列化数组本身（也将s​​ubscriber_id 重命名为Data 类中的sub_id）。这是代码

```
var serializer = new XmlSerializer(typeof(Data[]), new XmlRootAttribute("root"));
            Data[] datas;
            using (var tr = new StringReader(xml))
            {
                datas = (Data[])serializer.Deserialize(tr);
            } 
```

但是，如果您只需要反序列化并且源 xml 格式如此简单，那么您可以使用 XLinq 解析它，它更有效（在我的机器上进行 100 万次反序列化需要 10 秒对 20 秒）：

```
var xml =
@"<root>
  <Data>
    <sub_id>3</sub_id>
    <email>something@something.test</email>
  </Data>
  <Data>
    <sub_id>7</sub_id>
    <email>test@what.biz</email>
  </Data>
</root>";
var xdoc = XDocument.Parse(xml);
foreach (var dataElem in xdoc.Root.Elements("Data"))
{
    var subId = int.Parse(dataElem.Element("sub_id").Value);
    var email = dataElem.Element("email").Value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T07:35:30.453

xml 格式不正确。您所要做的就是使用`[XmlElement]`而不是`[XmlArray]`. 例子：

```
[XmlRoot("root")]
    public class Root
    {
        [XmlElement]
        public Data[] Data { get; set; }
    }

    public class Data
    {
        [XmlElement("sub_id")]
        public int SubscriberId { get; set; }

        [XmlElement("email")]
        public string Email { get; set; }
    } 
```

我刚刚用你的样品测试了上面的内容，它加载得很好。

# ruby-on-rails - 当玩家点击加载您的应用程序时，有没有办法获取提要帖子的 post_id ？

> ID：11678589
> 
> 赞同：0
> 
> 时间：2012-07-26T21:52:54.967
> 
> 标签：ruby-on-rails, facebook, feed

具体来说，我想做的是限制玩家可以点击墙贴的次数，并因此获得奖励。我知道在用户发布到他们的墙上后，有一个 post_id 是与该提要发布对象关联的 id。当玩家点击我的应用程序时，是否有任何迹象表明他们点击了哪个提要帖子对象（可能是通过帖子变量）？还是由我决定通过链接传递一个唯一变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T22:33:23.420

You should include your own unique URL parameter whenever you are creating the Post. You will see a `ref` parameter that is something like `newsfeed` or `nf`, but that refers to the location of the post, not the unique ID of it.

Alternatively, and preferably, you should [publish Open Graph Actions](https://developers.facebook.com/docs/opengraph/actions/) instead of just wall posts. With these you can add [Action Links](https://developers.facebook.com/docs/opengraph/actionlinks/) which will allow users who see an OG story from your app in feed to take an action directly from news feed. This is much simpler for them and will lead to greater click-thru and virality.

# git - 是否可以在我的本地计算机上拥有一个包含两个包含不同目录的分支的 GitHub 存储库？

> ID：11678592
> 
> 赞同：9
> 
> 时间：2012-07-26T21:53:09.907
> 
> 标签：git, github, jekyll

我有一个 jekyll 网站，我想在 GitHub 上托管。由于 GitHub 不支持 jekyll 插件，我希望我的 mater 分支只包含 _site 内的文件，并创建一个包含其他所有内容的开发分支。

这可能吗？如果是这样，我该怎么做？我不是 git 最好的。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-27T00:37:52.730

似乎您想要的只是拥有一个开发分支和一个主分支，其中将包含某个文件夹内容的镜像，例如_site。

我们开工吧！好的。我假设您有一个带有开发分支的存储库，其中包含`_site`您要“导出”的所有人员和文件夹。

让我们创建一个只包含文件夹**内容**的提交。`_site`

`echo 'Fill with a meaningful description' | git commit-tree development^{tree}:_site`创建一个提交并输出它的 id。它是`47651a42...`。在您的机器上**会有所不同。**

请注意，这`development^{tree}:_site`是树的修订版（sha1 sum），它对应于分支`_site`上最后一次提交的根目录中的文件夹。`development`

现在让**master**分支指向这个提交： `git update-ref refs/heads/master 47651a42`

现在`git log master`在我的机器上显示以下内容

```
commit 47651a42e6800f399c4352d0416f4ca96895f099
Author: Aleksandr Priymak <aleksandr.priymak@gmail.com>
Date:   Fri Jul 27 05:27:43 2012 +0400

    first commit 
```

如果您签出此分支，您将获得 _site 文件夹的内容！这很简单。只剩下一件事了。`47651a42`commit 没有任何父母，因此您需要添加`-f`到`git push`命令中以推送更新的 master。另一种方法是实际指定父级。为此，请使用此命令

`echo 'Fill with a meaningful description' | git commit-tree dev^{tree}:_site -p $(cat .git/refs/heads/master)`

您可以使用以下单线执行此操作

```
git update-ref refs/heads/master $(echo 'Add commit message here!' | git commit-tree dev^{tree}:_site -p $(cat .git/refs/heads/master)) 
```

# python - python类继承影响属性？

> ID：11678593
> 
> 赞同：0
> 
> 时间：2012-07-26T21:53:13.687
> 
> 标签：python, inheritance, properties

我遇到了一个奇怪的问题。请参阅我在下面粘贴的代码。在 myclass 我有一个@property datef。我可以设置获取属性；但是当我让 myclass 从 mybase 继承时，我不能再设置该属性了。为什么？

```
class mybase(object):
    pass

class myclass(mybase):
    @property     
    def dataf(self): return 1

var = myclass()
print var.dataf
var.dataf = 33
print var.__dict__ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T22:01:41.460

您需要定义属性 getter 和 setter：

```
class mybase(object):
    pass

class myclass(mybase):
    def dataf_get(self): return getattr(self, "_data_f", None)
    def dataf_set(self, value): self._data_f = value
    dataf = property(dataf_get, dataf_set)

var = myclass()
print var.dataf
>> None
var.dataf = 33
print var.dataf
>> 33
print var.__dict__
>> {'_data_f': 33} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T22:01:43.943

@property 装饰器[仅适用](http://docs.python.org/glossary.html#term-new-style-class)于新型类。

如果你试过

```
class myclass:
    @property     
    def dataf(self): return 1 
```

then`myclass`是一个老式的类，所以不要指望@property 能正常工作。

相反，当您创建`myclass`一个`mybase`继承自的子类时`object`，您正在创建`myclass`一个新型类。现在@property 可以正常工作。

现在，如果您希望能够设置属性，则需要定义一个 setter。

```
class mybase(object):
    pass

class myclass(mybase):
    @property     
    def dataf(self): return 1

    @dataf.setter
    def dataf(self, value):
        self._dataf = value

var = myclass()
print var.dataf
var.dataf = 33
print var.__dict__ 
```

产量

```
1
{'_dataf': 33} 
```

# php - PHP JQuery/JS - 将 PHP 变量设置为 Javascript 变量？

> ID：11678595
> 
> 赞同：0
> 
> 时间：2012-07-26T21:53:19.390
> 
> 标签：php, javascript, jquery, variables, load

我有一个巨大的`<select>`输入，我在许多页面上调用。我的想法是将这个下拉框作为它自己的 PHP 文件，并使用 JQuery 从外部加载它。这甚至可能吗？这是我正在尝试做的一个例子：

```
if ($variable) {
   echo '<select>
         <option value="A">A</option>
         <option value="B">B</option>
         <option value="C">C</option>
         </select>';
} 
```

如果我必须对下拉列表进行更改，那么浏览它所在的每个页面并编辑此下拉列表会非常令人沮丧。有没有办法用 JQuery 加载它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T22:02:19.087

为什么不将下拉内容存储在一个单独的 php 文件中的变量中，并将该文件包含在您需要使用它的任何脚本中？假设`dropdown.php`看起来像这样：

```
$dropdown = '<select>
     <option value="A">A</option>
     <option value="B">B</option>
     <option value="C">C</option>
     </select>'; 
```

然后就做

```
include "dropdown.php";
echo $dropdown; 
```

需要的地方

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T22:03:45.920

尽管 JQuery 具有通过 AJAX 加载页面片段的加载功能，但我不建议通过客户端语言包含此功能，因为您无法预测最终用户并且反过来可能会被操纵。

我建议通过 PHP 或最多使用 JQuery / Javascript AJAX 包含它 - 看看这个：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

有关您希望通过它实现的目标的更多信息也会有所帮助吗？例如，您考虑使用 JQuery 的任何原因？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T22:02:53.207

您可以使用 AJAX 异步加载它。

# ruby - 在 Sinatra“get”方法中，基本 If 语句未按预期执行

> ID：11678598
> 
> 赞同：0
> 
> 时间：2012-07-26T21:53:47.550
> 
> 标签：ruby, if-statement, sinatra

在我的 .erb 文件中，我有以下 jQuery 调用：

```
$.get(url, { point: pointValue, chore: investigate }); 
```

`point`和都是`chore`整数。

在我的 .rb 文件中，我有以下语句：

```
get '/estimate/:id' do

  print params[:chore]  # for debugging

  if params[:chore] == 1
    print "true!"
  end

end 
```

当我 print`params[:chore]`时，正确的值会在我的控制台中打印出来，0 或 1。

但是，即使是`1`，该`if`块也不会执行，即`"true!"`不会打印到控制台。

我完全被难住和困惑！有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T22:31:13.617

Parameters from a request always come back as type String. You need to convert that to an integer (via [String#to_i](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-to_i)) in order for your comparison to work (or, compare with "1" instead).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T22:06:08.043

该号码`1`属于`Fixnum`该类。你的`chore`价值可能没有。`if params[:chore].to_i == 1`在比较 ( ) 或检查`chore`参数键 ( )之前将其转换为整数`puts params[:chore].class`。

# java - Java SwingUtilities.invokeLater() 通过拖放计时

> ID：11678599
> 
> 赞同：1
> 
> 时间：2012-07-26T21:53:47.970
> 
> 标签：java, swing, drag-and-drop, swingutilities

Java Swing`SwingUtilities.invokeLater()`允许您在处理最后一个 AWT 事件（用户手势）后将线程排入队列以运行。

是否`invokeLater()`保证等到拖放手势完成后？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T22:27:33.663

不，[`EventQueue`](http://docs.oracle.com/javase/7/docs/api/java/awt/EventQueue.html)为 的排队实例保证两件事`Runnable`：

*   实例将按顺序执行。

*   该执行将与实例排队的顺序相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T23:57:31.010

工作方式`invokeLater`是将您添加`Runnable`到将在事件调度线程上按顺序执行的对象列表中。EDT 负责在您的应用程序中触发的每个事件，包括鼠标事件、按键事件、重绘等。为了`invokeLater`等到拖放手势结束，DnD 手势必须阻止 EDT，直到它完全完成了。这也意味着在 DnD 手势完成之前，您的应用程序将完全没有响应。

所以，不，*不会*`invokeLater`等到您的 DnD 手势完成。

# c++ - 无法在 C++ 中创建结构向量

> ID：11678605
> 
> 赞同：1
> 
> 时间：2012-07-26T21:54:11.880
> 
> 标签：c++, vector, struct

我正在尝试执行以下操作：

```
struct Code
{
    GF2X generator;
    vector<GF2X> codeWords;
};

vector<Code> allCodes; 
```

但是，我最终遇到了这个错误：

```
error: template argument for 'template<class _Alloc> class std::allocator' uses local type 'main()::Code'| 
```

我完全不知道这意味着什么。这也是我第一次用 C++ 编程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T21:59:20.057

在 C++03 中，本地类（在函数内部定义的类）不能用作模板参数。在 C++11 中取消了该限制，但如果您的编译器不支持此功能，您始终可以在命名空间级别将类型定义移到函数之外。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T21:56:06.847

在您的`int main()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T21:58:19.277

您尚未发布所有代码，但我猜您已将其放入`struct Code ...`main 函数中。尝试将它移到 main 开头的上方。

# c# - C# 以编程方式更改列表视图中的选定项

> ID：11678607
> 
> 赞同：0
> 
> 时间：2012-07-26T21:54:29.843
> 
> 标签：c#, listview

更新！

澄清问题。我想使用向上和向下箭头更改列表视图中的选定项目。我已将**keydown**绑定到文本框。如果用户按下句点键，我会使我的列表视图可见。但它没有重点，这就是为什么我将 keydown 事件绑定到文本框以便能够更改列表视图中的选定项。

visuaö 工作室抱怨的代码是这样的

```
index = listView1.SelectedIndices[0]; 
```

零在某种程度上是错误的？

我正在使用**列表视图**！

如何以`selecteditem`编程方式更改列表视图？我目前正在听向上箭头和向下箭头的按键事件。

当他们被按下时，我想更改所选项目的索引。这样它的行为就与按下向上或向下箭头使其聚焦时一样！

我一直在尝试，但它给了我一个丑陋的错误信息。

参数超出范围异常，附加信息如下：

> 值 0 对索引无效。这是我的向下箭头代码。

它真的应该工作我对此一无所知！

```
if (e.KeyCode == Keys.Down)
{
    if (listView1.Visible)
    {
        index = listView1.SelectedIndices[0];  
        index = index - 1;
        this.listView1.Items[index].Selected = true;
    }
} 
```

和向上箭头

```
if (e.KeyCode == Keys.Up)
{
    if (this.listView1.Visible)
    {
        index = listView1.SelectedIndices[0];
        index++;
        this.listView1.Items[index].Selected = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:57:47.033

试试这个：

```
if (e.KeyCode == Keys.Down)
{
    if (listView1.Visible && listView1.Items.Count > 0)
    {
        index = listView1.SelectedIndices[0];  
        index = index - 1;
        this.listView1.Items[index].Selected = true;
    }
} 
```

我认为你得到了一个，`IndexOutOfBound`因为你在列表中没有任何项目。

# servicestack - 为什么 servicestack 无法对 json post 请求进行模型绑定？

> ID：11678610
> 
> 赞同：2
> 
> 时间：2012-07-26T21:54:48.393
> 
> 标签：servicestack, model-binding

```
$.ajax({
        type: 'POST',
        url: "/api/student",  
        data:'{"x":3,"y":2}',
        dataType: "json",
        complete: function (r, s) {
            debugger;
        },

        success: function(response){
            debugger;
        },

        contentType: "application/json" // !!!!!!!!!!!! The reason of problem. I could see Json on firebug. It was false-positive for my code !

    }); 
```

我已经通过 Firebug 跟踪了流。Firebug 识别并显示 JSON 对象。

此代码访问了 RestServiceBase 的 OnPost 方法。但模型绑定不起作用。Json 对象和 C# 类的属性名称是否必须完全相同？

还是我错过了什么？（是的，你错过了一些东西！）

PS：我希望将 url 更改为“/api/student/json/asynconeway”，但后来出现 404 错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T22:43:11.797

[ServiceStack](http://www.servicestack.net/) **确实**模型绑定了 JSON POST（以及任何受支持的 Content-Types，包括 x-www-form-urlencoded）。

[ServiceStack.Examples](https://github.com/ServiceStack/ServiceStack.Examples/)中有很多例子可以做到这一点。

> 此代码访问了 RestServiceBase 的 OnPost 方法。但模型绑定不起作用。

您还没有显示您要绑定的 DTO。但是这个 JSON

```
{"x":3,"y":2} 
```

将映射到匹配的 DTO，例如：

```
public class Student { 
    public int X { get; set; }
    public int Y { get; set; }
} 
```

> Json 对象和 C# 类的属性名称是否必须完全相同？

当然，它们必须匹配名称，但**不区分大小写**，见上文。

> PS：我希望将 url 更改为“/api/student/json/asynconeway”，但后来出现 404 错误

这是错误的。如果您尝试使用[自动预定义路由](http://www.servicestack.net/ServiceStack.Hello/#predefinedroutes)，则正确的 url 是：

```
/api/json/asynconeway/student 
```

假设您的**Request DTO**被调用`Student`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:00:27.217

这是我的一些代码：

```
 $.ajax({
                type: "POST",
                url: "/artist/delete",
                data: { id: itemId },
                success: function () {
                    $("div#" + itemId).fadeOut(function () { $(this).remove(); });
                }
            }); 
```

**编辑：**对不起，我弄错了你想要的东西，所以我会问你一个问题，你为什么要将 json 发送到服务器，在那里你可以创建这样的函数：

```
[HttpPost]
        public ActionResult Delete(int id)
        {
            var artist = _db.Artists.Where(x => x.ID == id).SingleOrDefault();
            if (artist == null)
            {
                return Content("false");
            }
            else
            {
                _db.Artists.DeleteOnSubmit(artist);
                _db.SubmitChanges();
                return RedirectToAction("Post");
            }
        } 
```

**EDIT2：**你在这里有语法错误`data:'{"x":3,"y":2)}',`。
**EDIT3：**另一个语法错误

```
 }
        }
    }); 
```

在代码的末尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T23:27:45.643

我必须添加

dataType: "application/json" 属性到 ajax 请求！

# jquery - global:false 用于 MVC 中的 Ajax.BeginForm

> ID：11678612
> 
> 赞同：1
> 
> 时间：2012-07-26T21:54:52.517
> 
> 标签：jquery, asp.net-mvc, razor

在 jquery ajax 我们使用

```
$.ajax({
   url: "test.html",
   global: false
 }); 
```

在 Ajax.BeginForm() 中有一种方法可以指定 global: false 以不调用全局错误。我只想调用 localerror 然后停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:42:33.380

不，此选项不会与`Ajax.*`助手一起公开。[但是您可以使用$.ajaxSetup](http://api.jquery.com/jQuery.ajaxSetup/)方法为所有请求全局启用它。

```
$.ajaxSetup({
    global: false
}); 
```

# c# - 如何让 C# VSTO 在 .NET 框架 4.5 中构建

> ID：11678614
> 
> 赞同：8
> 
> 时间：2012-07-26T21:54:57.207
> 
> 标签：c#, vsto, .net-4.5

我的解决方案中的所有项目都设置为使用 .net 框架 4.5 构建。

我正在尝试创建一个 C# VSTO 项目，但无法分配 .net 4.5 目标框架。这是必需的，因此我可以在我的 VSTO 项目中引用其他项目。

该错误表明该项目不能用于目标框架（.net 4.5）。

或者，我是否必须在不使用 VSTO 项目的情况下实现 excel 加载项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T03:21:30.437

这里有一个更新的 VSTO 4 可再发行版：

[http://www.microsoft.com/en-us/download/details.aspx?id=35594](http://www.microsoft.com/en-us/download/details.aspx?id=35594)

请注意，在此版本中，版本已从 10.0.31119.0 升级到 10.0.40302.0，并且还支持 Office 2013。

此版本也适用于 x86 和 64 办公室安装，无需选择正确的安装程序，这很好。

**更新** 好像之前的下载页面已经被删除了。您可以尝试从直接链接获取安装程序：

[http://download.microsoft.com/download/9/4/9/949B0B7C-6385-4664-8EA8-3F6038172322/vstor_redist.exe](http://download.microsoft.com/download/9/4/9/949B0B7C-6385-4664-8EA8-3F6038172322/vstor_redist.exe)

**更新 2** Microsoft 已于 2012 年 12 月 21 日发布了 VSTO 10.0.40303.0，它是 10.0.40302.0 的修复程序，可从[http://www.microsoft.com/en-us/download/details.aspx?id=又是 35594](http://www.microsoft.com/en-us/download/details.aspx?id=35594)。

# android - ImageView 上的形状叠加（“反向路径”）

> ID：11678615
> 
> 赞同：0
> 
> 时间：2012-07-26T21:55:00.340
> 
> 标签：android

我有一个问题：我想在图像上绘制一个灰色叠加层。有一条路径，我想在路径*之外*着色。剪辑不好，因为边缘没有抗锯齿（我必须让它在 2.1 上工作）。

我已经让它在相机上工作（右侧）。有一个 FrameLayout，上面有一个 SurfaceView（相机预览）和一个 View。视图在整个画布上填充覆盖颜色，然后使用 xfermode 删除路径 (Mode.CLEAR)。

使用相同的方法，我得到了右边的图片。首先，我使我的 View 成为 ImageView 的后代，但这非常糟糕。然后，我在视图下方添加了一个带有图像的 ImageView（如相机预览），但结果相同。然后使用框架布局之外的其他图像视图，但相同。当然，我一直尝试将bgcolor设置为透明，绘制Color.TRANSPARENT，但没有成功。我不知道是什么问题。也许 Mode.CLEAR 会清除该区域的整个屏幕？为什么它使用相机表面视图而不是和图像视图（甚至另一个表面视图）？

我已经搜索了 7 个小时，但没有真正的解决方案。你能帮我做坏事，分享一些“技巧”吗？正如我之前所说，我需要抗锯齿边缘（几个形状有很多曲线和对角线），所以我不能剪辑（即使画笔画也不能，这很糟糕）。

先感谢您。

图：[http ://s16.postimage.org/72bcp5kad/img_overlay.jpg](http://s16.postimage.org/72bcp5kad/img_overlay.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T22:33:49.027

我找到了解决方案。我也构建了一个包含完整画布的路径，然后填充它 EVEN_ODD。所以从最左边的点开始 -> 左侧 ->topleft -> topright -> bottomright->bottomleft->leftside->leftmost point->other poly points。并且有效:-)

# ruby - 在 Ruby 中的特定 shell 中执行命令？

> ID：11678617
> 
> 赞同：0
> 
> 时间：2012-07-26T21:55:02.113
> 
> 标签：ruby, unix

我需要在 Ruby 文件中运行一些命令，而不是在 Bash 中运行它们，因为我在 Unix 上，我想在不同的 shell 中运行它们，称为“s3sh”。如何指定外壳？

例如，在我的 Ruby 代码中，我尝试过：

```
 system "export RUBYSHELL=s3sh"
 s3 = system "RightAws::S3Interface.new(#{S3ID}, #{S3KEY})"
 system "s3.copy(#{SRCBUCKET}, #{FILE}, #{DESTBUCKET}, #{FILE})"
 system "unset RUBYSHELL" 
```

但不可能将环境变量导出到运行 Ruby 脚本的 shell。（请参阅“[在 Ruby 中导出环境变量](https://stackoverflow.com/questions/2660571/exporting-an-environment-variable-in-ruby)”）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T22:30:27.517

`s3sh` is just a wrapper around the AWS::S3 gem, so you're over-complicating things. You don't need to shell out; you can just use Ruby:

```
require 'right_aws'

s3 = RightAws::S3Interface.new(S3ID, S3KEY)
s3.copy(SRCBUCKET, FILE, DESTBUCKET, FILE) 
```

# asp-classic - 在 ASP 脚本中组合文件和数据库上传时出错

> ID：11678619
> 
> 赞同：3
> 
> 时间：2012-07-26T21:55:02.160
> 
> 标签：asp-classic, upload

我正在使用的“纯 ASP”文件上传脚本给了我一个错误

```
Microsoft VBScript runtime error '800a0005'

Invalid procedure call or argument: 'MidB' 
```

在这一行（包含文件 clsUpload.asp 的第 103 行）：

```
mstrDelimiter = MidB(mbinData, 1, InStrB(1, mbinData, CRLF) - 1) 
```

当我在同一页面上结合文件上传和数据库上传脚本时。我认为这可能与类的实例化有关，并且我尝试在整个脚本中建立类，而不是将其设置为“无”并重新建立它，但这没有任何区别。有任何想法吗？

上传脚本工作正常，只要它们位于单独的页面上，由页面上的前两个表单分别发布（如下）。然而，第三种形式并不成功。非常感激！

（下面的完整代码）

注意：“clsUpload.asp”和“clsField.asp”文件太大，无法发布。但是，它们可以在这里找到： [http ://www.codeguru.com/dbfiles/get_file/upload_files_without_com_v2.zip?id=19297&lbl=UPLOAD_FILES_WITHOUT_COM_V2_ZIP](http://www.codeguru.com/dbfiles/get_file/upload_files_without_com_v2.zip?id=19297&lbl=UPLOAD_FILES_WITHOUT_COM_V2_ZIP)

表单页面如下：

```
 <H2>To Database</H2>
<FORM name="a" id="a" method="post" encType="multipart/form-data" action="ToDatabase.asp">
<INPUT type="File" name="File1">
<INPUT name="Submit" type="submit" value="Upload">
 </FORM>

<H2>To File System</H2>
<FORM name="b" id="b" method="post" encType="multipart/form-data" action="ToFileSystem.asp">
<INPUT type="File" name="File1">
<INPUT name="Submit" type="submit" value="Upload">
</FORM>

<H2>To Both Database and File System</H2>
<FORM name="c" id="c" method="post" encType="multipart/form-data" action="ToDatabaseAndFileSystem.asp">
<INPUT type="File" name="File1">
<INPUT name="Submit" type="submit" value="Upload">
</FORM>

<HR>
<P>
This script provided to you by <A href="http://www.lewismoten.com">Lewis Moten</A>.
Please help me out and link back to my site from your own website, news groups,
postings on other websites, email, etc.
</P>

<p>Database file list below
</p>
<ol>
<%
Dim objUpload
Dim strFileName
Dim objConn
Dim objRs
Dim lngFileID

Set objConn = Server.CreateObject("ADODB.Connection")
Set objRs = Server.CreateObject("ADODB.Recordset")
objConn.Open "DRIVER=Microsoft Access Driver (*.mdb);DBQ=" &     Server.MapPath("Files.mdb")
objRs.Open "SELECT * FROM Files", objConn, 2, 2

If Not (objRs.EOF And objRs.BOF) Then
objRs.MoveFirst
Do Until objRs.EOF = True
strFileName=objRs.Fields("FileName").Value
lngFileID = objRs.Fields("FileID").Value
%>
<li><A href="DataFile.asp?FileID=<%=lngFileID%>"><%=strFileName%></A></li>
<br />
<%
    objRs.MoveNext
Loop
Else
response.write("MsgBox """ & "There are not records in the recordset." & """<"&"/script>")
End If

objRs.Close
Set objRs = Nothing
Set objConn = Nothing
Set objUpload = Nothing
%>
</ol> 
```

表单处理页面（组合）

```
 <!--#INCLUDE FILE="clsUpload.asp"-->
 <%
 Dim objUpload
 Dim strFileName
 Dim objConn
 Dim objRs
 Dim lngFileID
 Dim strPath

 '///database upload section - begin///
 ' Instantiate Upload Class
 Set objUpload = New clsUpload

 ' Grab the file name
 strFileName = objUpload.Fields("File1").FileName
 strLength = objUpload.Fields("File1").Length

 Set objConn = Server.CreateObject("ADODB.Connection")
 Set objRs = Server.CreateObject("ADODB.Recordset")

 ' Sometimes I personally have errors with one method on different servers, but the      other works.
 objConn.Open "DRIVER=Microsoft Access Driver (*.mdb);DBQ=" & Server.MapPath("Files.mdb")
 'objConn.Open "PROVIDER=Microsoft.Jet.OLEDB.4.0;Data Source=" & Server.MapPath("Files.mdb")

 'objRs.Open "Files", objConn, 3, 3
 objRs.Open "Files", objConn, 2, 2

 objRs.AddNew

 objRs.Fields("FileName").Value = objUpload.Fields("File1").FileName
 objRs.Fields("FileSize").Value = objUpload.Fields("File1").Length
 objRs.Fields("ContentType").Value = objUpload.Fields("File1").ContentType
 objRs.Fields("BinaryData").AppendChunk objUpload("File1").BLOB & ChrB(0)

 objRs.Update

 objRs.Close

 'objRs.Open "SELECT Max(FileID) AS ID FROM Files", objConn, 3, 3
 objRs.Open "SELECT Max(FileID) AS ID FROM Files", objConn, 2, 2
 lngFileID = objRs.Fields("ID").Value
 objRs.Close

 Set objRs = Nothing
 Set objConn = Nothing
 Set objUpload = Nothing
 %>
 File has been saved in database.<BR>
 <BR>
 View this file:<BR>
 <BR>
 <A href="DataFile.asp?FileID=<%=lngFileID%>"><%=strFileName%></A>

 '///database upload section - end///

 '///file server upload section - begin///
 <%
 ' Instantiate Upload Class
 Set objUpload = New clsUpload

 ' Grab the file name
 strFileName = objUpload.Fields("File1").FileName
 ' Compile path to save file to
 strPath = Server.MapPath("Uploads") & "\" & strFileName
 ' Save the binary data to the file system
 objUpload("File1").SaveAs strPath

 ' Release upload object from memory
 Set objUpload = Nothing

 MyVariable = strFileName
 Response.Write "<script type='text/javascript'>alert('" & MyVariable & "');</script>"
 %>
 File has been saved in file system.<BR>
 <BR>
 View this file:<BR>
 <BR>
 <A href="Uploads\<%=strFileName%>">Uploads\<%=strFileName%></A>

 <!-- /////////////////////////////////////////////////// -->

 '///file server upload section - begin///

 <ol>
 <%
 Set objConn = Server.CreateObject("ADODB.Connection")
 Set objRs = Server.CreateObject("ADODB.Recordset")
 objConn.Open "DRIVER=Microsoft Access Driver (*.mdb);DBQ=" & Server.MapPath("Files.mdb")
 objRs.Open "SELECT * FROM Files", objConn, 2, 2

 If Not (objRs.EOF And objRs.BOF) Then
objRs.MoveFirst
Do Until objRs.EOF = True
 strFileName=objRs.Fields("FileName").Value
 lngFileID = objRs.Fields("FileID").Value%>
 <li><A href="DataFile.asp?FileID=<%=lngFileID%>"><%=strFileName%></A></li>
 <br />
 <%
    objRs.MoveNext
Loop
 Else
MsgBox "There are not records in the recordset."
 End If

 objRs.Close
 Set objRs = Nothing
 Set objConn = Nothing
 Set objUpload = Nothing
 %>
 </ol> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T09:29:06.623

问题出在 clsField.vbs 文件中

如果路径不包含“\”，则 FileName 字段保持空白：

我建议在 if 语句中添加一个 else 条件，如下所示：

```
 ' Parse File Name
    If Not InStrRev(pstrPath, "\") = 0 Then
        FileName = Mid(pstrPath, InStrRev(pstrPath, "\") + 1)
    else
        FileName = pstrPath
    End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:58:09.970

此行失败：

```
mstrDelimiter = MidB(mbinData, 1, InStrB(1, mbinData, CRLF) - 1) 
```

可能的原因：

*   mbinData 长度为零
*   mbinData 不包含 CRLF
*   mbinData 以 CRLF 开头
*   标识符 CRLF 不包含预期的字节序列

找出以上哪项在您的情况下是正确的，您会发现问题所在。

# javascript - 从扩展中使用 AJAX 访问远程域

> ID：11678620
> 
> 赞同：2
> 
> 时间：2012-07-26T21:55:02.650
> 
> 标签：javascript, ajax, google-chrome-extension, same-origin-policy

我正在尝试开发一个 AJAX 特定页面的 Chrome 扩展程序，然后将根据该页面上的内容显示通知。（使用`webkitNotifications`）

这个页面是一个票务系统，我要检查的是用户是否登录，以及他们是否有新票。更重要的是，我不拥有或控制远程页面。

[由于Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)，我陷入困境。基本上，当我尝试 AJAX 页面时，我收到以下错误：

```
XMLHttpRequest cannot load http://{{ Remote Site URL }}. Origin chrome-extension://gcagdmmcgmldhommhlckpbgdmlfojblp is not allowed by Access-Control-Allow-Origin. 
```

我从来没有为 Chrome 或任何其他浏览器开发过扩展，所以我不确定可能的解决方法。

我已经尝试通过 Google 和 SO 寻找解决方案，但我似乎找不到任何适合我需要的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T05:34:01.740

Google Chrome 扩展文档有一个专门用于[跨域 XHR](http://code.google.com/chrome/extensions/xhr.html)的页面。只需添加一个[`match pattern`](http://code.google.com/chrome/extensions/match_patterns.html)满足您希望获取的站点的 URL 作为清单的权限。一个好的匹配模式可能看起来像

*   `http://www.example.com/*`
*   `*://www.example.com/*`（对于 HTTP 和 HTTPS）
*   `https://*.example.com/*`（对于`example.com`通过 HTTPS 的所有子域）

# css - 向左/向右浮动在窗口调整大小时产生间隙

> ID：11678626
> 
> 赞同：2
> 
> 时间：2012-07-26T21:55:25.000
> 
> 标签：css, css-float

在我的网站上，我有三个 div、一个标题、一个主要内容和右侧的侧边栏。侧边栏是实际问题。我希望侧边栏始终贴在浏览器窗口的右侧，如果用户调整窗口大小以使宽度低于主边栏和侧边栏，侧边栏会停在主要内容的左边缘。

当用户第一次访问网页并至少在 Mac 上按下“绿色，最大化窗口按钮”时，窗口应该调整大小，以便主要内容和侧边栏边对边放置，没有间隙。

使用我的代码，一切正常，除了当我将窗口调整到可能的最小宽度然后按下最大化窗口按钮时，两个 div 之间有 16px 的间隙。

我的代码：

HTML：

```
 <div id="header">Header</div>
    <div id="container">        
        <div id="main">
        <p> Left </p>
        </div>

        <div id="sidebar">
        <p> Right </p>
        </div>
    </div> 
```

CSS：

```
body{
margin:0 0;
min-width:606px;
}

#header {
    padding:5px 10px;
    background:#00FF00;
    height:100px;
}

#container{
    min-width: 865px;
    min-height: 50px;
}

#main {
    float:left;
    min-width: 622px;
    background:#FF0000;
}

#sidebar {
    float:right;
    width:243px;
    min-height: 50px;
    background:#0000FF;
    margin-bottom: -20px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T05:12:30.823

**参考：** [**jsFiddle**](http://jsfiddle.net/zCjVF/1/show) （*在地址栏中，删除**`/show/`**以访问 jsFiddle 编辑页面。*）

与其`float`为你的布局打交道，不如使用它`table`来`table-cell`实现你的目标。在 XP 机器上的 Firefox、Chrome、IE8 中测试和工作。

**HTML：**

```
<div id="header">Header</div>

<div id="container">        

    <div id="main">
      <p>Main</p>
    </div>

    <div id="sidebar">
      <p>Sidebar</p>
    </div>

</div> 
```

**CSS：**

```
body{
    margin: 0 auto;
    padding: 0;
}

#header {
    background: green;
    height: 100px;
    min-width: 865px;          /* Optional: This size is the same as #container width. */
}

#container{
    display: table;
    width: 100%;
    min-width: 865px;
    height: 50px;
}

#main {
    display: table-cell;
    /*min-width: 622px;*/     /* Not needed since #container min-width less #sidebar width will use remainder percentage space (since #container is set at 100%) */
    height: 100%;             /* Maximum height is set via #container height */
    background: red;
}

#sidebar {
    display: table-cell;
    width: 243px;            /* The fixed width of the sidebar */
    height: 100%;            /* Maximum height is set via #container height */
    background: aqua;
} 
```

# c# - 为 TextBox 的后代获取绑定到 TextProperty 的值的更改事件

> ID：11678632
> 
> 赞同：1
> 
> 时间：2012-07-26T21:56:25.577
> 
> 标签：c#, .net, wpf, binding

我有自己的自定义 TextBox 类。它在某种程度上帮助我处理来自条形码阅读器的扫描。

为此，我需要一种方法来捕获绑定到 TextProperty 的值何时更改。

**注意：**我不是在寻找“TextChanged”事件或任何与按键相关的事件（除非该按键更新源）。

我需要一个仅在基础值更改时才会触发的事件，并且我需要能够在我的 TextBox 中访问它（这意味着它不能在 ViewModel 中）。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T22:26:39.570

是的，你可以这样做：

在你的类的构造函数中：

```
 var dpd = DependencyPropertyDescriptor.FromProperty(YourTextBoxClass.TextProperty, typeof(YourTextBoxClass));
 if (dpd != null)
 {
     dpd.AddValueChanged(this, ThisIsCalledWhenPropertyIsChanged);
 } 
```

然后处理程序：

```
private void ThisIsCalledWhenPropertyIsChanged(object sender, EventArgs e) { } 
```

希望能帮助到你，

问候

# facebook - 将 RSS 提要发布到 Facebook 页面时使用图像

> ID：11678633
> 
> 赞同：2
> 
> 时间：2012-07-26T21:56:36.127
> 
> 标签：facebook, image, facebook-graph-api, rss, feed

我创建了一个 RSS 提要，并通过使用此提要和第三方应用程序将提要项发布到我的 Facebook 页面中。

除了图像之外，Everyting 工作正常。我的提要中的每个项目都有一个图片链接。至于图像标签不允许作为 RSS2 我编码 HTML 代码并将其放在描述中，如下所示：

```
<item><title>My item</title>
<link>http://example.com/mypage1.html</link>
<description>This is very important item please read this
&amp;lt;img=&amp;quot;http://example.com/image.jpg&amp;quot;&amp;gt;</description>
</item> 
```

一切正常，但帖子的图像在项目描述标签中不一样。Facebook 将其中一张图片放在`http://example.com/mypage1.html`页面内。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:03:59.647

获取或构建将在帖子中包含图像参数的不同第三方应用程序。或者在您的页面上为图像放置正确的打开图形元标记，即：

```
<meta property="og:image" content="http://yoursite.com/image.jpg" /> 
```

更多信息在这里： [https ://developers.facebook.com/docs/sharing/best-practices](https://developers.facebook.com/docs/sharing/best-practices)

# php - 数组内的PHP变量

> ID：11678636
> 
> 赞同：3
> 
> 时间：2012-07-26T21:56:42.713
> 
> 标签：php, arrays

我有一个变量：

```
$my_var = page 
```

并想将其放入数组中：

```
 <?php 
    $opts = array(
        'page'=>'/subfolder/ <!-- $my_var ---> .php',
    );
    content_custom('content-area', $opts); 
?> 
```

我会得到这样的路径：

```
/subfolder/page.php 
```

我对php不是很熟悉。这可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T21:57:37.970

```
$opts = array(
    'page'=>"/subfolder/{$my_var}.php"
); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T21:57:48.463

那会很好用。但是，当您将字符串放在单引号中时，不会评估其中的变量。在您包含在字符串中的变量周围使用双引号，它将起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T22:31:46.417

您也可以使用 . 连接字符串的运算符：

尼尔的例子：

```
$opts = array(
    'page'=>'/subfolder/'.$my_var.'.php'
); 
```

# android - 为什么我在使用 min3d 框架加载 3d 模型时出现“android.content.res.Resources$NotFoundException: Resource ID #0x0”？

> ID：11678637
> 
> 赞同：1
> 
> 时间：2012-07-26T21:56:44.367
> 
> 标签：android, exception, resources, live-wallpaper

我尝试使用 min3d 在我的动态壁纸应用程序中加载 3d 对象，但我有这个例外：“E/AndroidRuntime(5989): android.content.res.Resources$NotFoundException: Resource ID #0x0”。

我把“sunflower_obj”和“sunflower_mlt”文件放到“res/raw”文件夹，“sunflower.jpg”放到“res/drawable”文件夹。这是我的代码：

```
package com.electricpunch.wallpaper;

import min3d.core.Object3dContainer;
import min3d.objectPrimitives.ParticleSprite;
import min3d.parser.IParser;
import min3d.parser.Parser;
import min3d.wallpaper.CommonRender;
import android.content.Context;
import android.content.res.Resources;
import android.util.Log;

public class TestRenderer extends CommonRender {

    private Context mContext;
    private float mCameraPosition;

    private Object3dContainer objModel;

    public TestRenderer(Context _context) {
        super(_context);
        this.mContext = _context;
        mCameraPosition = 0.5f;

    }

    @Override
    public void initScene() {
        IParser parser = Parser.createParser(Parser.Type.OBJ, mContext.getResources(), "com.electricpunch.wallpaper:raw/sunflower_obj", true);
        parser.parse();
        objModel = parser.getParsedObject();
        objModel.scale().x = objModel.scale().y = objModel.scale().z = .7f;
        scene.addChild(objModel);

    }

    @Override
    public void updateScene() {
        objModel.rotation().x++;
        objModel.rotation().z++;
    }

    @Override
    public void onTouchUp(int x, int y) {
        Log.i("TAG", "Touch");
    }

    @Override
    public void onOffsetsChanged(float xOffset, float yOffset, float xStep, float yStep, int xPixels, int yPixels) {
        mCameraPosition = xOffset;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:23:06.700

使用**sunflower_mtl**而不是**sunflower_mlt**

因为你得到了 ResourceNotFound-Exception 我也会检查 mtl+obj 中的纹理引用。它应该类似于 *"newmtl sunflower.jpg"、"map_Kd sunflower.jpg"、"mtllib sunflower_mtl"、"usemtl sunflower.jpg"*。

# php - PHP 数据库会话为同一会话 ID 创建多个记录

> ID：11678639
> 
> 赞同：2
> 
> 时间：2012-07-26T21:56:46.893
> 
> 标签：php, session, cakephp, mongodb, session-cookies

所以我有一个奇怪的问题，PHP 会话多次保存到数据库（MongoDB），所有这些都具有相同的 ID。第一条记录具有正确的会话数据，而第二条记录具有错误的会话数据。这导致我的会话在下一页（或下一个 AJAX 调用）上立即失败，因为它正在获取最新记录。

这是我的会话 ini 设置：

```
array(
'session.auto_start' => '0',
'session.bug_compat_42' => '',
'session.bug_compat_warn' => '',
'session.cache_expire' => '180',
'session.cache_limiter' => 'must-revalidate',
'session.cookie_domain' => '',
'session.cookie_httponly' => '1',
'session.cookie_lifetime' => '0',
'session.cookie_path' => '/',
'session.cookie_secure' => '1',
'session.entropy_file' => '',
'session.entropy_length' => '0',
'session.gc_divisor' => '1000',
'session.gc_maxlifetime' => '14400',
'session.gc_probability' => '1',
'session.hash_bits_per_character' => '5',
'session.hash_function' => '0',
'session.name' => 'Game',
'session.referer_check' => '',
'session.save_handler' => 'user',
'session.save_path' => '/var/lib/php/session',
'session.serialize_handler' => 'php',
'session.use_cookies' => '1',
'session.use_only_cookies' => '1',
'session.use_trans_sid' => '0'
) 
```

还有我的 CakePHP 设置：

```
Configure::write('Session', array(
'cookie' => PROJECT,
'checkAgent' => false,
'autoRegenerate' => false, // We don't want it to regenerate
'defaults' => 'database',
'handler' => array(
    'engine' => 'DatabaseSession',
    'model' => 'Session'
),
'ini' => array(
    'session.cookie_lifetime' => 0, // Until the browser is closed
    'session.cookie_httponly' => true,
    'session.referer_check' => '',
    'session.cache_limiter' => 'nocache'
),
)); 
```

下面是数据库中多条记录的示例（注意它们具有相同的 ID 但内容不同）：

```
{ "_id" : ObjectId("5011b8c9564d444d04000083"), "id" : "mnor9aspiacp3g41qq8g0fotk2", "data" : "Config|a:3:{s:9:\"userAgent\";s:0:\"\";s:4:\"time\";i:1343353096;s:9:\"countdown\";i:10;}fb_466806330012492_code|s:74:\"2.AQC3yKQXi2e-6_VjI.3600.1343343600.1-672639577|pkfXkSypomU_3RY2-xM3A93rGrVo\";fb_4668063X30012492_access_token|s:110:\"AAAGojtF6Xs0wBAIoUwOoMU3WIt4ZBAih0NUvwtGePBxYv6oOT1QvbEZAb77j2h8ZBXKnpHrXktxHmz1WXCyr5VR9RwdaiGzrxfNRgEPr06gAZDZD\";fb_466806330012492_user_id|s:9:\"xxxx\";Game|a:6:{s:7:\"user_id\";s:24:\"4ff60631ec0f92c5690002a6\";s:9:\"player_id\";s:24:\"4ff60631ec0f92c5690002a7\";s:7:\"game_id\";s:24:\"5009ce57d09b3efe03000000\";s:11:\"facebook_id\";s:9:\"xxx\";s:11:\"accessToken\";s:110:\"AAAGoXjtF6s0wBAIoUwOoMXU3WIt4ZBAih0NUvwXtGePBxYv6oOT1QvbEZAb77j2h8ZBKnpHrXktxHmz1WCyr5VR9RwdaiGzrxfNRgEXPr06gAZDZD\";s:5:\"round\";i:1;}", "expires" : NumberLong(1343338697), "modified" : ISODate("2012-07-26T21:38:17.083Z"), "created" : ISODate("2012-07-26T21:38:17.083Z") }

{ "_id" : ObjectId("5011b8ca564d445c0400008f"), "id" : "mnor9aspiacp3g41qq8g0fotk2", "data" : "Config|a:3:{s:9:\"userAgent\";s:0:\"\";s:4:\"time\";i:1343353098;s:9:\"countdown\";i:10;}", "expires" : NumberLong(1343338698), "modified" : ISODate("2012-07-26T21:38:18.689Z"), "created" : ISODate("2012-07-26T21:38:18.689Z") } 
```

我似乎无法弄清楚这个问题。我尝试切换到 memcache 存储，但同样的事情发生了。还有几点需要注意：

*   该站点正在使用 HTTPS
*   我正在使用添加到会话中的 Facebook API，但是我首先创建应用程序会话
*   具有会话 ID 的 cookie 确实存在，并且正在每个请求的所有标头中传递
*   我在 Amazon EC2 上运行

由于我的 ini 设置看起来正确，因此我的想法已经用完了，并且我已经在整个应用程序中放置了调试语句以确保操作顺序正确。到目前为止一切看起来都不错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-14T06:01:51.357

在 mongodb 方面，您可以使用 ensureIndex({id: 1}, {unique: true}) 来防止插入发生。

# nhibernate - 具有空白值的流畅 NHibernate 参考 FK

> ID：11678644
> 
> 赞同：1
> 
> 时间：2012-07-26T21:56:54.660
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping, fluent-nhibernate-mapping

我正在尝试在无法更改的旧系统（Jet db）中映射两个表。子表对父表中的字符串类型列具有 FK。父表中的 FK 列是必需的，但通常是空格，即“”。我知道这毫无意义，但这是我必须处理的。我的映射是；

```
 References(x => x.ParentObject)
              .Formula("NOT ParentFKColumn = ' '")
              .Column("ChildFKColumn")
              .LazyLoad()
              .Nullable(); 
```

此映射导致以下异常“非法访问加载集合：输入字符串''格式不正确”。这个错误似乎很明显——我只是不确定如何流畅地处理它。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T06:21:33.170

我假设父表中的字符串类型列不是主键，因此您需要将其映射为`property`并使用`property-ref`.

```
 References(x => x.ParentObject)
          .PropertyRef("stringProperty")
          .Column("ChildFKColumn")
          .Not.LazyLoad()      // to prevent creating invalid Proxies, but property-ref should already do this
          .NotFound.Ignore(); // threat all values in the foreign key which 
```

`.NotFound.Ignore();`告诉 NH 威胁外键中所有不指向有效记录的值为空。

# silverlight - 启用浏览器内提升的信任

> ID：11678646
> 
> 赞同：2
> 
> 时间：2012-07-26T21:57:05.863
> 
> 标签：silverlight, full-trust

我正在尝试提高浏览器内的信任以工作并遇到问题。我有：

1.  购买了证书
2.  使用该证书签署 xap
3.  在注册表中添加了 AllowElevatedTrustAppsInBrowser=1

然而，该应用程序仍然认为它并没有以更高的信任度运行。关于我可能遗漏的任何想法？

当然，运行 localhost 是可行的，因为它不需要上述任何内容。

下面包含的屏幕截图作为证据。

![在此处输入图像描述](../Images/30de5b7237accc8d8f8dd7d57e9f64c9.png) ![证书存储](../Images/ddbe5701a73ad817642881cea5b659d7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T18:28:20.933

因此，您从受信任的发布者那里获得了证书。您已签署 XAP。您已在客户端计算机上安装了证书。

您是否按照[本文](https://stackoverflow.com/questions/9784200/silverlight-5-signing-xap-file)所述在客户端上配置了注册表？

您还可以使用[组策略配置注册表设置](http://www.grouppolicy.biz/tag/allowelevatedtrustappsinbrowser/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-02T09:19:33.070

确保将 AppManifest.xaml 与 .xap 文件放在一起。我遇到了同样的问题，并通过 .xaml 解决了。这是一篇旧文章，但希望它对遇到同样问题的人有所帮助。

# ruby-on-rails - Phusion 乘客无法在 Mountain Lion 中编译

> ID：11678647
> 
> 赞同：3
> 
> 时间：2012-07-26T21:57:17.000
> 
> 标签：ruby-on-rails, ruby, xcode, passenger, osx-mountain-lion

我在使用新的 OSX Mountain Lion 安装程序编译 Phusion Passenger 时遇到问题。你有什么建议吗？

```
Installing Phusion Passenger Standalone...
[*******************************              ] Compiling Phusion Passenger... 
*** ERROR: the following command failed:
mkdir -p 'ext/ruby/ruby-1.9.3-x86_64-macosx/'
cd 'ext/ruby/ruby-1.9.3-x86_64-macosx/' && /Users/boris/.rvm/wrappers/ruby-1.9.3-p194@apps2/ruby '/Users/boris/.passenger/standalone/3.0.13-x86_64-ruby1.9.3-macosx-10.8/support/ext/ruby/extconf.rb'
checking for alloca.h... *** /Users/boris/.passenger/standalone/3.0.13-x86_64-ruby1.9.3-macosx-10.8/support/ext/ruby/extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=/Users/boris/.passenger/standalone/3.0.13-x86_64-ruby1.9.3-macosx-10.8/support/ext/ruby
    --curdir
    --ruby=/Users/boris/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
/Users/boris/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': The compiler failed to generate an executable file. (RuntimeError)
You have to install development tools first.
    from /Users/boris/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:506:in `try_cpp'
    from /Users/boris/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:931:in `block in have_header'
    from /Users/boris/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:790:in `block in checking_for'
    from /Users/boris/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:284:in `block (2 levels) in postpone'
    from /Users/boris/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /Users/boris/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:284:in `block in postpone'
    from /Users/boris/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /Users/boris/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:280:in `postpone'
    from /Users/boris/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:789:in `checking_for'
    from /Users/boris/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:930:in `have_header'
    from /Users/boris/.passenger/standalone/3.0.13-x86_64-ruby1.9.3-macosx-10.8/support/ext/ruby/extconf.rb:36:in `<main>'
rake aborted!
Command failed with status (1): [cd 'ext/ruby/ruby-1.9.3-x86_64-macosx/' &&...]
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/file_utils.rb:53:in `block in create_shell_runner'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/file_utils.rb:45:in `call'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/file_utils.rb:45:in `sh'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:39:in `sh'
/Users/boris/.passenger/standalone/3.0.13-x86_64-ruby1.9.3-macosx-10.8/support/build/ruby_extension.rb:43:in `block in <top (required)>'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/Users/boris/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:176:in `block in invoke_prerequisites'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `each'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `invoke_prerequisites'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:157:in `block in invoke_with_call_chain'
/Users/boris/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:176:in `block in invoke_prerequisites'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `each'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `invoke_prerequisites'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:157:in `block in invoke_with_call_chain'
/Users/boris/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:176:in `block in invoke_prerequisites'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `each'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `invoke_prerequisites'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:157:in `block in invoke_with_call_chain'
/Users/boris/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@apps2/bin/rake:23:in `load'
/Users/boris/.rvm/gems/ruby-1.9.3-p194@apps2/bin/rake:23:in `<main>'
Tasks: TOP => nginx => native_support => ext/ruby/ruby-1.9.3-x86_64-macosx//passenger_native_support.bundle => ext/ruby/ruby-1.9.3-x86_64-macosx//Makefile 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T22:19:27.750

1.  看起来你正在使用 RVM。所以继续重新编译 ruby

> rvm 卸载 1.9.3 rvm 安装 1.9.3

1.  重新安装乘客 Gem
2.  确保包含虚拟主机的 .conf 文件，升级到 Mountain Lion 可能会破坏这些文件

就我而言，我在`httpd.conf`文件末尾添加了以下行：

```
Include /etc/apache2/passenger_pane_vhosts/*.conf 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T18:55:13.863

如果您安装 rvm 的二进制版本，您也可能会遇到此问题。你也可以试试：

```
rvm uninstall 1.9.3-p327
rvm install 1.9.3-p327 --disable-binary 
```

完成后，您应该能够毫无问题地编译 Phusion Passenger。或者至少没有遇到*这个*问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T12:00:44.607

根本原因是找不到gcc-4.2。在我的情况下，gcc 4.2.1 已安装但只是调用`gcc`所以我链接`gcc-4.2`到`gcc`这允许我安装Passenger。命令行是`sudo ln /usr/bin/gcc /usr/bin/gcc-4.2`

在我尝试这个之前，我已经通过 rvm 重新安装了 Ruby 并重新下载了乘客 gem，但我认为这些都不是必需的。

# c# - 为什么在编程方法中尝试 catch 不起作用？

> ID：11678659
> 
> 赞同：1
> 
> 时间：2012-07-26T21:58:07.577
> 
> 标签：c#, asynchronous, windows-8, task-parallel-library, async-await

我对这个问题感到头疼。我无法实现我的尝试可以捕获我的异常。这是图片。

[![在此处输入图像描述](../Images/c871439344ca716640f8f764bbdcb63e.png)](https://i.stack.imgur.com/xVprD.png)

一会儿，我正在试验这个。它有效..

```
 var task = client.GetAsync(uri);
            try
            {
                task.Wait();
            }
            catch (Exception ex)
            {
                throw ex;
            } 
```

但上面的问题是用户界面冻结。我不希望那样。我能做什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T21:59:45.817

## 从不打电话`task.Wait()`。

`task.Wait()`将同步等待任务完成。
这将冻结用户界面。

您的 catch 块正在工作，但您在它被捕获之前看到了异常。
取消选中复选框并重试，应该会触发 catch 块。

# backbone.js - Backbone.xmpp：获取订阅

> ID：11678663
> 
> 赞同：0
> 
> 时间：2012-07-26T21:58:32.900
> 
> 标签：backbone.js, xmpp

如何使用 Backbone.xmpp 获取订阅？我知道我得到了它们，`XMPPConnection.PubSub.getSubscriptions();`但我如何使用集合、模型和视图进行订阅？我是否必须使用 Backbone.Collection 和 Backbone.Model，因为 Backbone.xmppSync 的集合和模型仅适用于叶节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:50:58.233

如[文档](http://ggozad.com/Backbone.xmpp/)中所述，订阅不直接由节点管理。Backbone.xmpp 提供的节点模型仅与 XMPP 节点同步并提供实时通知。

您必须通过使用 Strophe 的捆绑 pubsub 插件在服务器端（最好，因为您可以强加任何您喜欢的安全工作流程）或客户端进行。同样，它非常简单，请查看[内联文档](http://ggozad.com/strophe.plugins/docs/strophe.pubsub.html)。用户可以使用`subscribe`, `unsubscribe`,来管理他的订阅或获取所有订阅`getSubscriptions`。

例如，

```
var p = connection.PubSub.subscribe('/nodes/my_node')
    .done(function () { console.log('You are subscribed'); })
    .fail(function () { console.log('Ohoh, something went wrong'); }); 
```

将连接的用户订阅到节点`/nodes/my_node`

# arrays - Perl在输入条件之前更改条件内的值？

> ID：11678666
> 
> 赞同：5
> 
> 时间：2012-07-26T21:58:40.290
> 
> 标签：arrays, perl, hashmap, conditional-statements

我正在编写一个 Perl 脚本，以帮助自动扫描我们网络上的机器。我不是专业的程序员，但是这个项目已经分配给了我，我很困惑。在我解释困扰我的事情的性质之前，让我解释一下我正在做的事情的大纲。

基本上，此脚本将每 n 小时运行一次。运行时，它将检查一个包含活动 IP 日志的文件，并根据 DHCP 日志检查它们以仅挑选出那些是静态的。然后将它们放入哈希中（如果标记为初始化，则使用新的，否则使用 Storable 加载），密钥是 IP，在数组中它们的 MAC [0] 和“最后扫描”日期 [1] 最初设置为19700101。脚本的下一部分比较今天日期和“上次扫描”日期之间的日期 - 如果它低于某个阈值，它会向我们的扫描仪发送查询。

让我如此迷失的问题是，在检查日期时，在我看来，日期值（更新的“上次扫描”）是在输入条件之前设置的。虽然这对我来说似乎不太可能，但这是我能想到的唯一可能性。以下是相关的代码块：

将 IP/MAC 添加到哈希的代码

```
 if(init == 1){
            %SCAN = ();

            @data = ();

            foreach $key (keys %IPS){

                    $unsavedDB = 1;

                    $data[0] = $IPS{$key};
                    $data[1] = 19700101;

                    print $data[1];

                    $SCAN{$key} = \@data;
            }
 }else{
            #repeat of the above code, but with a if(exists...) to prevent duplicates from being added to the hash that is loaded via storables.
 } 
```

检查日期的代码（之前设置的，今天是 20120726）。在上面的代码和下面的代码之间只有注释

```
 $scanned = 0;

    foreach $key (keys %SCAN){

            $lastScanned = $SCAN{$key}[1];

            if(($date - $lastScanned) > $threshold){
                    $unsavedDB = 1;

                    $toScan = ${$key}[0];

                    #omitted data for security reasons, just basically forms a string to send to a scanner

                    $SCAN{$key}[1] = $date;

                    $scanned++;
            }
    }

    print "finished. $scanned hosts queued\n"; 
```

现在，我认为在进入循环之前值被更改的原因是当我在“if(($date...){”之前添加一个“print $lastScanned”语句时，打印了分配的任何内容的日期到 $date 之前 - 但是如果我注释掉 '$SCAN{$key}[1] = $date;' 语句，打印语句将打印 '19700101' 日期并且一切正常运行。发生了什么？ $SCAN{$key}[1] 除了上面显示的两个地方外，永远不会被触及。

对不起，如果这措辞很糟糕，或者没有意义。我尽力解释了困扰我几个小时的事情。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T22:13:52.063

因为您的`@data`数组是全局的，所以每次执行语句时

```
$SCAN{$key} = \@data; 
```

您正在分配对*同一*数组`$SCAN{$key}`的引用。因此，最终所有值都指向同一个数组，这可能不是您想要的。 *`@data``%SCAN`*

 *有几种方法可以解决这个问题。也许最简单的方法是通过将*上面*的`@data`行`$SCAN{$key}`更改为

```
$SCAN{$key} = [ @data ]; 
```

或者，您可以重写整个循环以使用`my`在循环内声明的词法数组 - 这样您就可以在每次迭代时创建一个新的单独数组：

```
foreach $key (keys %IPS) {
        $unsavedDB = 1;

        my @data;  # <--- this line is new!

        $data[0] = $IPS{$key};
        $data[1] = 19700101;

        print $data[1];

        $SCAN{$key} = \@data;
} 
```

然而，你真正*应该*做的，而不是仅仅修复这个特定错误的症状，是了解[变量作用域在 Perl 中](http://perl.plover.com/FAQs/Namespaces.html)是如何工作的以及它应该如何使用，并相应地重写你的代码。

特别是，查看您的代码，我非常怀疑您没有在代码中使用[编译`strict`指示](http://perldoc.perl.org/strict.html)。如果你想编写干净的 Perl 代码，你真正应该做的*第一*件事是在所有脚本前面加上以下两行，紧跟在该`#!`行之后：

```
use strict;
use warnings; 
```

`strict`pragma 迫使您避免某些不良和容易出错的习惯，例如使用符号引用或未声明的全局变量，而pragma[使`warnings`解释](http://perldoc.perl.org/warnings.html)器警告您有关其他各种愚蠢、危险、模棱两可或其他不受欢迎的事情（您确实应该处理这些事情）作为错误并修复，直到您不再收到警告）。

当然，这并不意味着您应该在脚本开头使用`my`(or `our`) 声明所有变量只是为了`strict`开心。相反，您应该做的是查看每个变量，查看它实际使用的位置，并在需要它的最内层范围内声明它。（如果您在代码的不同部分重用相同的变量名，请将它们视为单独的变量并分别声明它们。）请记住，您可以在循环语句中声明循环变量，如

```
foreach my $key (keys %IPS) { 
```

或者

```
while (my $line = <>) { 
```

* * *

附言。我还注意到您向我们展示的代码中有一条令人担忧的评论：

```
# repeat of the above code, but with ... 
```

一般来说，这种代码重复应该是一个很大的闪光信号，表明你可能做错了什么——编程的黄金法则是“[不要重复自己。](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself) ”

当然，在*极*少数非常罕见的情况下，您*确实*需要以两种不同的方式完成本质上相同的事情，但有如此多的小而随意的差异贯穿其中，因此将整个事情写两次会更清晰。但如果是这种情况，我会感到非常惊讶——我敢打赌，你只能编写该代码一次，然后插入一个

```
if (not $init and exists ...) { 
```

在合适的位置检查。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T00:46:03.443

正如 Ilmari 所说，您的问题是 的每个元素都`%SCAN`指向第一个代码块中的*同一个*二元素数组，因此所有 IP 地址的相同变量也是如此。`@data``$SCAN{<anything>}[1]`

为了解决这个问题，我的偏好是忘记`@data`并写

```
$SCAN{$key} = [ $IPS{$key}, '19700101' ]; 
```

每次执行语句时都会生成一个新的匿名数组，并将对它的引用分配为哈希值。

另请注意，我使用了一个字符串作为日期，因为你*不能*写出类似的东西`$date - $lastScanned`：日期算术比这更复杂。减去`31-JAN-2012`会`1-FEB-2012`变成`20120201 - 20120131`或70！

幸运的是，有一些模块可以让这更容易，您可以使用模块`Time::Piece`，它是一个核心模块（即，它从 Perl v5.9 开始与标准 Perl 一起安装）并且可以让您进行这种算术运算。

在程序的顶部，在`use strict`and之后`use warnings`，你写

```
use Time::Piece; 
```

然后稍后，在你最初的时候，写

```
my $initial = localtime(0); 
```

进而

```
my $date = localtime; 
```

您可以通过打印它们来查看这两个值对应的日期

```
print $initial, "\n";
print $date, "\n"; 
```

这将显示类似

```
Thu Jan  1 00:00:00 1970
Fri Jul 27 01:40:53 2012 
```

一个简单的减法会给你真正的区别，在几秒钟内

```
print $date - $initial; 
```

所以如果`$threshold`是几天，你可以通过写来检查间隔

```
if ( $date - $lastScanned > $threshold * 24 * 60 * 60 ) { ... } 
```

我希望我没有在这里吓到你，但它需要改变，我认为你应该知道。该模块的功能远不止于此，如果您想查看文档，请[点击此处](https://metacpan.org/module/Time%3a%3aPiece)。如果您遇到困难，请再问一个问题。*

# css - 相对 CSS 分层问题

> ID：11678667
> 
> 赞同：0
> 
> 时间：2012-07-26T21:58:45.173
> 
> 标签：css, z-index

我在relative `<div>`s的分层方面遇到了几个问题。现在的问题之一是，当你放大时，它会把所有东西都弄乱，而且我想做的事情是在包装层下有两个相关层。但是每次我尝试这样做时，即使使用`z-index`它也会使一切变得混乱。那么这两个问题是否有任何解决方案，索引代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Arakion - Homepage</title>
<html>
<link href="font/stylesheet.css" rel="stylesheet" type="text/css" />
<head>
<style type = "text/css">
body,td,th {
    font-family: KingthingsExeterRegular;
    background-size: cover;
    background-repeat:no-repeat;
    text-align: center;
    font-size: 13px;
}
a:link {
    color: #FFF;
    text-decoration: none;
}
a:visited {
    text-decoration: none;
    color: #FFF;
}
a:hover {
    color: #FFF;
}
a:active {
    text-decoration: none;
}
</style>
</head>
<body>
<img src="images/Backgrounds/Left.png" name="left" width="192" height="533" style="float:left; z-index:-9999; position:relative;" />
<img src="images/Backgrounds/Right.png" width="191" height="530" style="float:right; z-index:-9999; position:relative;" />
<div id="Wrapper">
  <div id="navbar" style="display: inline-block;">
<ul id="nav">
    <li id="top">
        <a href="#">HOME</a>
    </li>

    <li id="top">
        <a href="#">GUIDE</a>
        <ul>
        <li id="submenu"><a href="#">CLASSES</a></li>
        <li id="submenu"><a href="#">DUNGEONS</a></li>
        <li id="submenu"><a href="#">MONSTERS</a></li>
        <li id="submenu"><a href="#">PETS</a></li>
        <li id="submenu"><a href="#">RACES</a></li>
        <li id="submenu"><a href="#">TOWN BUILDINGS</a></li>
        <li id="submenu"><a href="#">UNIVERSE</a></li>
        <li id="submenu"><a href="#">WIKI</a></li>
        </ul>
    </li>
    <li id="top">
        <a href="#">BLOG</a>

        <ul>
        <li id="submenu"><a href="#">ARAKION</a></li>
        <li id="submenu"><a href="#">CHRIS TAYLOR</a></li>
        </ul>

    </li>
    <li id="top">
        <a href="#">MEDIA</a>
        <ul>
        <li id="submenu"><a href="#">CONCEPT ART</a></li>
        <li id="submenu"><a href="#">SCREENSHOTS</a></li>
        <li id="submenu"><a href="#">VIDEOS</a></li>
        </ul>
    </li>
    <li id="top">
        <a href="#">FORUM</a></li>
</ul>
</div>
<div style="display: inline-block;" id="sidebar_header"><img src="images/Progress/KickstarterGoalBar_0.png" width="310" height="80"/></div>
<div style="display: inline-block;" id="sidebar_banner">
  <div id="Sidebar_content">
    <p>&nbsp;</p>
    <p>Social Media</p>
    <p><img src="images/Side Banner_Line.png" width="100%" height="10" /></p>
    <p><a herf="#" target="_new"><img src="images/KickstarterIcon.png"/></a> <a href="http://www.indiedb.com/games/arakion" target="_new"><img src="images/IndieDBIcon.png" width="35" height="35" /></a> 
        <a href="http://www.facebook.com/Arakion" target="_new"><img src="images/FacebookIcon.png" width="35" height="35" /></a> <a href="http://twitter.com/arakiongame" target="_new"> 
            <img src="images/TwitterICon.png" width="35" height="35" /> </a> <a href="http://www.youtube.com/user/MrLavidimus" target="_new"> <img src="images/YoutubeICon.png" width="35" height="35" /> </a> </p>
    <p>&nbsp;</p>
    <p>Random Media</p>
    <p><img src="images/Side Banner_Line.png" width="100%" height="10" /></p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>Something</p>
    <p><img src="images/Side Banner_Line.png" width="100%" height="10" /></p>
    <p>&nbsp;</p>
  </div></div>
<div style="display: inline-block;" id="main_background">
  <div id="main_content"><div id="main_img"><img src="images/MainImages/Main_Placeholder_img.jpg"/></div>
    <table width="600" height="106" border="0" id="main_section_img" style="margin-left: 15px;">
      <tr>
        <td width="140"><img src="images/MainImages/Placeholder1.jpg"  height="100%" width="100%"/></td>
        <td width="140"><img src="images/MainImages/Placeholder2.jpg"  height="100%" width="100%"/></td>
        <td width="140"><img src="images/MainImages/Placeholder3.jpg"  height="100%" width="100%"/></td>
        <td width="140"><img src="images/MainImages/Placeholder4.jpg"  height="100%" width="100%"/></td>
      </tr>
  </table>
  <center>
    <table width="561" border="0">
      <tr>
        <td width="140">How Housing Works and why we have it</td>
        <td width="140">An In depth look at the Satyr race</td>
        <td width="140">We take a look at the role the alchemist plays in a group</td>
        <td width="140">Our doors are offically open to new employees apply today</td>
      </tr>
    </table></center>
    <p>&nbsp;</p>
  </div></div>
<div style="display: inline-block;" id="sub_background_1"><div id="sub_content">
  <div id="Sub_title">Kickstarter has just opened!</div><div id="Sub_subtitle">by Chris Taylor 7-24-2012</div><div id="Sub_image" style="display: inline-block;">
    <img src="images/MainImages/Sub_Placeholder.jpg"  height="100%" width="100%"/></div>
  <div id="Sub_text"> sUt enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborumLorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt  ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, <a href="index.html">Read More.</a></div></div></div>
<div style="display: inline-block;" id="sub_background_2"><div id="sub_content">
  <div id="Sub_title">Kickstarter has just opened!</div><div id="Sub_subtitle">by Chris Taylor 7-24-2012</div><div id="Sub_image" style="display: inline-block;">
    <img src="images/MainImages/Sub_Placeholder.jpg"  height="100%" width="100%"/></div>
  <div id="Sub_text">  Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborumLorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt  ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, <a href="index.html">Read More.</a></div></div></div>
<div style="display: inline-block;" id="sub_background_3"><div id="sub_content">
  <div id="Sub_title">Kickstarter has just opened!</div><div id="Sub_subtitle">by Chris Taylor 7-24-2012</div><div id="Sub_image" style="display: inline-block;">
    <img src="images/MainImages/Sub_Placeholder.jpg"  height="100%" width="100%"/></div>
  <div id="Sub_text"> sUt enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborumLorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt  ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, <a href="index.html">Read More.</a></div></div></div>
<div style="display: inline-block;" id="sub_background_4"><div id="sub_content">
  <div id="Sub_title">Kickstarter has just opened!</div><div id="Sub_subtitle">by Chris Taylor 7-24-2012</div><div id="Sub_image" style="display: inline-block;">
    <img src="images/MainImages/Sub_Placeholder.jpg"  height="100%" width="100%"/></div>
  <div id="Sub_text">  Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborumLorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt  ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, <a href="index.html">Read More.</a></div></div></div>
<div id="footer_background" style=" text-align: center; ">
    <img src="images/Footer_Divider.png" height="10px" width="600px"/>
    <p>&nbsp;</p>
COPYRIGHT 2012 CHRIS TAYLOR ALL RIGHTS RESERVED | CODED BY <a href="http://seanwhall.daportfolio.com/" target="_blank">SE</div> 
```

CSS代码：

```
@font-face {
    font-family: 'KingthingsExeterRegular';
    src: url('kingthings_exeter-webfont.eot');
    src: url('kingthings_exeter-webfont.eot?#iefix') format('embedded-opentype'),
         url('kingthings_exeter-webfont.woff') format('woff'),
         url('kingthings_exeter-webfont.ttf') format('truetype'),
         url('kingthings_exeter-webfont.svg#KingthingsExeterRegular') format('svg');
    font-weight: normal;
    font-style: normal;
}
body {
    font-family: 'KingthingsExeterRegular';
}
#full-screen-background-image {
  z-index: -999;
  width:900px ;
  height:800px ;
  position: absolute;
  top:0;
  left:0;
}
/*Body Css */
#Wrapper {
    width:1040px;
    margin:auto;
    margin-top:200px;
    z-index:5;
    position:relative;
}
#left{
    position:relative;
    float:left;
    z-index:!important -9;  
}
#right{
    position:relative;
    float:right;
    z-index:!important -9;  
}
/*------------------------------------*\
    NAV
\*------------------------------------*/
#navbar{
    position: static;
    top:5px;
    float:left;
    margin-top:30px;
    margin-left:5px;
    width:650px;
    height: 50px;
    z-index:4;
    margin-bottom:10px;
}
#nav{
    list-style:none;
    font-weight:bold;
    width:600;
    height:50;
    margin-bottom:5px;
}
#top{
    float:left;
    position:relative;
    background-image:url("../images/Button_NavBar_Unselected.png");
    height:55px;
    width:120px;
    margin-bottem:5px;
    font-size:15px;
}
#top li:hover{

}
#submenu{
    float:left;
    position:relative;
    height:20px;
    width:100px;
    font-size: 12px;
}
#nav a{
    display:block;
    padding-top:20px;
    z-index:-1;
    font-family:"Arial";
}
/*--- DROPDOWN ---*/
#nav ul{
    list-style:none;
    position:absolute;
    left:-9999px; /* Hide off-screen when not needed (this is more accessible than display:none;) */
}
#nav ul li{
    padding-top:1px; 
    float:none;
}
#nav ul a{
    white-space:nowrap;
}
#nav li:hover ul{ 
    left:-30px;
    top:40px;
}
#nav li:hover a{ /* These create persistent hover states, meaning the top-most link stays 'hovered' even when your cursor has moved down the list. */

}
#nav li:hover ul a{ /* The persistent hover state does however create a global style for links even before they're hovered. Here we undo these effects. */

}
#nav li:hover ul li a:hover{ /* Here we define the most explicit hover states--what happens when you hover each individual link. */

}
/* Main Block */
#main_background{
    width:680px;
    height:519px;
    float:left;
    background-image:url(../images/MainSection.png);
}
#main_content{
    width:590px;
    height:430px;
    text-align:left;
    margin-top:20px;
    margin-left:45px;
}
#main_img{
    margin:0 auto;
    margin-top:5px;
    background-image:url(../images/MainSection_BigImageHighlight.png);
    width:520px;
    height:300px;
    text-align:center;
    padding-top:4px;
}
#main_section_img{
    margin-top:10px;
    background-image:url(../images/MainSection_SmallImageInsett.png);
    width:560px;
    height:95px;
}
/* Sub Block */
/*  Sub Background Hierarchy */
#sub_background_1{
    position:relative;
    width:610px;
    height:270px;
    float:left;
    background-image: url(../images/SubSection_Base.png);
    z-index:-1;
    margin-left:30px;
    top:-38px;
    background-repeat:no-repeat;
}
#sub_background_2{
    position:relative;
    width:610px;
    height:270px;
    float:left;
    background-image: url(../images/SubSection_Base.png);
    z-index:-2;
    margin-left:30px;
    top:-52px;
    background-repeat:no-repeat;
}
#sub_background_3{
    position:relative;
    width:610px;
    height:270px;
    float:left;
    background-image: url(../images/SubSection_Base.png);
    z-index:-3;
    margin-left:30px;
    top:-65px;
    background-repeat:no-repeat;
}
#sub_background_4{
    position:relative;
    width:610px;
    height:270px;
    float:left;
    background-image: url(../images/SubSection_Base.png);
    z-index:-4;
    margin-left:30px;
    top:-77px;
    background-repeat:no-repeat;
}
#sub_background_5{
    position:relative;
    width:610px;
    height:270px;
    float:left;
    background-image: url(../images/SubSection_Base.png);
    z-index:-5;
    margin-left:30px;
    top:-83px;
    background-repeat:no-repeat;
}
#sub_background_6{
    position:relative;
    width:610px;
    height:270px;
    float:left;
    background-image: url(../images/SubSection_Base.png);
    z-index:-6;
    margin-left:30px;
    top:-81px;
    background-repeat:no-repeat;
}
#sub_background_7{
    position:relative;
    width:610px;
    height:270px;
    float:left;
    background-image: url(../images/SubSection_Base.png);
    z-index:-7;
    margin-left:30px;
    top:-81px;
    background-repeat:no-repeat;
}
#sub_background_8{
    position:relative;
    width:610px;
    height:270px;
    float:left;
    background-image: url(../images/SubSection_Base.png);
    z-index:-8;
    margin-left:30px;
    top:-85px;
    background-repeat:no-repeat;
}
/* Hierarchy End */
#sub_content{
    width:580px;
    height:220px;
    margin:0 auto;
    margin-top:10px;
}
#Sub_title{
    height:35px;
    width:400px;
    margin-top:30px;
    margin-left:10px;
    font-size:30px;
    text-align: left;
}
#Sub_subtitle{
    height:20px;
    width:200px;
    margin-left:10px;
    margin-top:65;
    font-size:15px;
    text-align: left;
}
#Sub_image{
    height:100px;
    width:100px;
    margin-top:10px;
    margin-left:15px;
    float:left;
}
#Sub_text{
    height:180px;
    width:400px;
    float:right;
    margin-top:10px;
    text-align: left;
}
/* SideBar Block */
#sidebar_header{
    position:relative;
    height:80px;
    width:350px;
    float:right;
    background-image:url(../images/Kickstarter.png);
    margin-right:5px;
    left:-20px;
    margin-top:10px;
    z-index:1;
}
#sidebar_header img {
    margin-top:61px;
    height:18px;
    width:310;

}
#sidebar_banner{
    position:relative;
    height:729px;
    width:360px;
    float:right;
    background-image: url(../images/Side%20Banner.png);
    left:-20px;
    z-index:-1;
}
#Sidebar_content{
    margin:0 auto;
    margin-top:20px;
    text-align:center;
    font-size: 20px;
    width:300px;
    height:700px;
    line-height: 3px;
}

/* Footer */
#footer_background{
    position:relative;
    background-image:url(../images/Footer.png);
    width:605px;
    height:75px;
    float:left;
    margin-left:35px;
    top:-89px;
    z-index:-9;
    line-height:1px;
    font-family:"Arial";
    font-size:10px;
}
#footer_background img {
    margin-top:100px;
} 
```

网站现在的样子，基本上就是放大时发生的情况。当我尝试将两个图像添加到两个相关的 div 层中时，也会发生这种情况。网站：[https](https://dl.dropbox.com/u/49665279/Arakion/index.html) ://dl.dropbox.com/u/49665279/Arakion/index.html任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T23:39:58.117

我刚刚经历了一个问题的关闭和重新打开。我学到的最好的教训是我建议你让这个问题更简洁。考虑进行编辑，删除多余的代码，只关注您的问题。但是，我将尝试提供答案。

据我了解，您所指的两个图像是背景中的图像。看到您已经固定了所有页面元素的宽度，您可以执行以下操作：

创建一个包含左侧和右侧的单个图像，中间有所需的空格。（缺点是图像包含空格，这很浪费）。

然后将以下内容添加到您的 body 元素的 css 中：

```
background: url('url/to/your/new/twoimage.jpg'); 
background-repeat: no-repeat; 
```

“固定布局与流体布局”的快速谷歌应该对定义宽度有所了解。

使用 safari，页面永远不会停止加载。我推荐 firebug [http://getfirebug.com/](http://getfirebug.com/) 它是检查网页问题的绝佳工具。随时提出更具体的问题

# c++ - 将向量元素分配给 CStringArray

> ID：11678674
> 
> 赞同：-1
> 
> 时间：2012-07-26T21:59:00.090
> 
> 标签：c++, visual-studio-2010

我将每个向量元素分配给一个 cstring？

```
 for(int i = 1; i <examplevector.size; i ++)
    {
    CStringArrayexample[i-1] = examplevector[i];
    } 
```

这里只是一个崩溃。可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:00:56.670

`CStringArray::operator[]`不做边界检查。崩溃的最可能原因是数组的大小小于向量。

另外，为什么你没有任何变量？如果你这样做了，为什么你的变量命名与你使用的类型相同？

如果要向数组添加新元素，请使用`Add`.

编辑后：

```
CStringArrayexample[i-1] = examplevector[i]; 
```

你知道什么时候`i==0`，你正在检查`-1`数组的元素，对吧？

# asp.net - 如何修复“在应用程序配置中找不到连接名称'LocalSqlServer'或连接字符串为空。” 错误？

> ID：11678677
> 
> 赞同：8
> 
> 时间：2012-07-26T21:59:22.550
> 
> 标签：asp.net, entity-framework-4, asp.net-membership, sql-server-ce, membership-provider

我有一个使用 SQL Server CE 4.0 和 Entity Framework 4.0 的 ASP.NET 项目。它在我的本地计算机上运行良好。

但是，当我将其移动到远程服务器并尝试登录到程序的管理部分时，我收到以下错误：

```
The connection name 'LocalSqlServer' was not found in the applications configuration or the connection string is empty. 
```

它引用远程服务器上 machine.config 中的以下行：

```
Line 237:    <membership>
Line 238:      <providers>
Line 239:        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" connectionStringName="LocalSqlServer" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="true" applicationName="/" requiresUniqueEmail="false" passwordFormat="Hashed" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="7" minRequiredNonalphanumericCharacters="1" passwordAttemptWindow="10" passwordStrengthRegularExpression="" />
Line 240:      </providers>
Line 241:    </membership> 
```

现在，确实我的 web.config 中没有引用名为“LocalSqlServer”的连接字符串的“AspNetSqlMembershipProvider”语句。相反，我有以下内容：

```
<membership defaultProvider="DefaultMembershipProvider">
  <providers>
    <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider" connectionStringName="PUGConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="1" passwordAttemptWindow="10" applicationName="/" />
  </providers>
</membership> 
```

这实际上在本地有效。连接字符串的名称是 PUGConnection，而不是 LocalSqlServer。

为什么这会在本地而不是远程工作？（远程服务器是共享服务器——我无权访问 machine.config。）

如果我将连接字符串的名称更改为 LocalSqlServer，它会起作用吗？如果是这样，为什么它会在我的本地计算机上以另一种方式工作？据我所知，我本地计算机上的 machine.config 看起来与远程服务器上的相同。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-26T22:02:47.170

您需要将其从配置中删除：

```
<remove name="AspNetSqlMembershipProvider" /> 
```

或者，更好的是，

```
<clear /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-01T12:08:11.407

您也可以尝试将连接字符串添加到您的配置文件中。即使不使用它，它也应该通过在配置中的其他位置引用它来修复出现的错误。

```
<connectionStrings>
    <add name="LocalSqlServer" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

这通常在`appSettings`和`system.data`标签之间。

# jquery - JQuery / HTML链接在第一次点击时不加载

> ID：11678679
> 
> 赞同：1
> 
> 时间：2012-07-26T21:59:24.037
> 
> 标签：jquery, html, css

jQuery + HTML + CSS

我正在尝试获取导航栏上的链接以更新我拥有的“div”标签。我得到了它的工作，但我必须单击每个超链接两次，然后才能将页面加载到主查看器上。为什么？如何一键加载？

测试.js：

```
function onScreen(id){
    $("a#" + id).click(function(){$("div#viewer").load(id + '.html')});  
} 
```

主.html：

```
<a href="#" id="about" onclick="onScreen('about')">About Us</a>
<a href="#" id="account" onclick="onScreen('account')">My Account</a> 
```

等等

```
<div class ="article" id="viewer">
    <p>welcome to this awesome site! </div> 
```

在同一个文件夹中有一个“about.html”文件（以及所有其他必要的文件）。再次，代码功能，只是不像它应该的那样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T22:01:26.797

第一次点击执行onScreen，它将加载函数与点击事件相关联。因此，第二次单击时会触发加载功能。

**编辑**

一个解决方案可能是删除标签`onclick`上的属性`<a href=#>`

```
$(function(){
    $("a[href='#']").click(function(){$("div#viewer").load(this.id + '.html')});
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T22:01:08.497

将屏幕更改为

```
function onScreen(id){
   $("div#viewer").load(id + '.html'); 
} 
```

**解释：**

您之前所做的是在单击时将单击事件附加到*链接*。这意味着当您第一次单击时，它启用了链接以加载您的内容以供下次单击，因此只能在第二次工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T22:03:24.300

你只是有一些冗余代码。您附加了两个点击事件。

1.  在标记中内联`onClick`属性。
2.  在`onScreen()`与`.click()`.

只有在您单击链接后，才会`.click()`创建实际的处理程序。因此，您必须单击一次以创建处理程序，然后第二次单击将触发回调函数。

您可以删除`.click()`并保留该函数中的代码。所以你的`onScreen()`功能看起来像这样 -

```
function onScreen(id){
  $("div#viewer").load(id + '.html');
} 
```

* * *

您还可以改用此语法来改进代码 -

```
$('a.internalLink').on('click',function(
  $("div#viewer").load($(this).id + '.html');
)); 
```

这假设您为所有`<a>`想要表现得像这样的标签提供了`internalLink`. 为相似的元素赋予相同的类名要容易得多，这样您就可以使用 jQuery 选择器轻松地对它们进行分组。

自 jQuery 1.7+ 起，较新的[`.on()`函数是首选](http://api.jquery.com/on/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-26T22:08:14.470

嗯...首先，这不是最好的解决方案。一个更好的解决方案是：

```
<a href="about.html" class="scriptable" id="about">About Us</a>
<a href="account.html" class="scriptable" id="account">My Account</a> 
```

和

```
$(document).ready(function(){
     function displayScreen(screenname){
         var url_to_load = screenname + '.html';
         $('#viewer').load(url_to_load);

     }
     $('.scriptable').live("click", function(ev){
         var screenname = $(this).attr('id');
         displayScreen(screenname);
         ev.preventDefault();
     });
}); 
```

Facebook 做了一个类似的解决方案，虽然他们使用 rel="ajaxify" 属性来做，但原理是完全一样的。

（下一步：使用某种历史 API 使 URL 跟随用户导航）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-26T22:04:12.833

看到您正在使用 jQuery，请放弃内联`onclick`并改为绑定。这使您的代码更清晰，更易于理解和修改。

```
<a href="#" id="about" class="viewer">About Us</a>
<a href="#" id="account" class="viewer">My Account</a>
<div class ="article" id="viewer">
    <p>welcome to this awesome site!</p>
</div>
​&lt;script>
$(function(){
    $("a.viewer").click(function(){
        alert($(this).attr('id') + '.html');
        $("div#viewer").load(this.id + '.html')
    });  
})​;
</script> 
```

[工作 JSFiddle](http://jsfiddle.net/faceleg/RuEPa/1/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T22:07:48.043

尝试

```
$(document).ready(function(){
  $("a").click(function(){
    $("div#viewer").load(this.id + '.html')
  });
}); 
```

# android - OnPause onResume 中的计时器会发生什么

> ID：11678680
> 
> 赞同：0
> 
> 时间：2012-07-26T21:59:35.137
> 
> 标签：android, timer, cycle

我对android中的生命周期还有些陌生。但是，在我的应用程序中，我有一个每十秒运行一次的计时器。我注意到当屏幕旋转时，应用程序返回主屏幕并崩溃（可能与计时器有关）。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T22:24:38.570

在 onPause 中，您必须停止计时器。阅读您的 logcat 日志以了解详细信息。

# javascript - 没有内馅饼的Highcharts甜甜圈图？

> ID：11678684
> 
> 赞同：40
> 
> 时间：2012-07-26T22:00:03.007
> 
> 标签：javascript, html, highcharts, donut-chart

我一直在寻找使用 Highcharts 库生成最简单的圆环图的解决方案。但是，Highcharts 的所有示例都显示了内馅饼和外甜甜圈的图表样式（参考：[http](http://www.highcharts.com/demo/pie-donut) ://www.highcharts.com/demo/pie-donut ）

我怎样才能摆脱内部馅饼而只保留外部甜甜圈，就像其他图书馆一样？（类似于 RGraph：[https](https://www.rgraph.net/demos/donut-3d.html) ://www.rgraph.net/demos/donut-3d.html ）

谢谢你。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-07-26T22:35:31.803

您只需将数据作为两个元素（键/值）数组的数组提供。指定 an`innerSize`以获取甜甜圈样式。

因此，您的参数将包含如下内容：

```
...
data: [["Firefox",6],["MSIE",4],["Chrome",7]],
innerSize: '20%',
... 
```

这是[一个完整示例的 jsFiddle](http://jsfiddle.net/HpdwR/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T05:51:27.043

```
**I hope this example of highchat will solve your problum

http://jsfiddle.net/e2qpa/3/

$(function() {
    var chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'pie'
        },

        plotOptions: {
            pie: {
                borderColor: '#000000',
                innerSize: '60%'
            }
        },
        series: [{
            data: [
                ['Firefox', 44.2],
                ['IE7', 26.6],
                ['IE6', 20],
                ['Chrome', 3.1],
                ['Other', 5.4]
                ]}]
    },
    // using

    function(chart) { // on complete

        var xpos = '50%';
        var ypos = '53%';
        var circleradius = 102;

    // Render the circle
    chart.renderer.circle(xpos, ypos, circleradius).attr({
        fill: '#ddd',
    }).add();

    // Render the text
    chart.renderer.text('THIS TEXT <span style="color: red">should be in the center of the donut</span>', 155, 215).css({
            width: circleradius*2,
            color: '#4572A7',
            fontSize: '16px',
            textAlign: 'center'
      }).attr({
            // why doesn't zIndex get the text in front of the chart?
            zIndex: 999
        }).add();
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-26T20:29:52.023

这是最热门的搜索结果，给出的答案对我不起作用。我需要对数据点进行更多控制，而不仅仅是一个简单的数组。我需要使用 JSON 对象来配置其他选项，例如特定数据的显式颜色。我通过一些研究发现您根本不需要修改数据格式。要将饼图制作成圆环图，您只需在数据系列中设置大于 0 的 innerSize 值即可。

从 highcharts 文档中：

> innerSize：饼图的内径大小。大于 0 的大小会呈现圆环图。可以是百分比或像素值。百分比与饼图大小相关。像素值以整数形式给出。

因此，您可以获得一个简单的圆环图，其数据如下：

```
 series: [{
            innerSize: '30%',
            data: [
                {name: 'Yellow Slice', y: 12, color: 'yellow'},
                {name: 'Red Slice', y: 10, color: 'red' },
                {name: 'Blue Slice', y: 33, color: 'blue'},
                {name: 'Green Slice', y: 20, color: 'green'}
            ]
        }] 
```

[JS小提琴](http://jsfiddle.net/KNFJE/486)

# jquery - 使用 Google Maps Javascript API v3 的 HTML/CSS 标记

> ID：11678685
> 
> 赞同：6
> 
> 时间：2012-07-26T22:00:03.083
> 
> 标签：jquery, html, google-maps

我们公司刚刚从 Leaflet.js 迁移到 Google Maps API；我到处搜索，试图找到一种将 HTML/CSS 标记/框作为叠加层集成到 Google Maps Javascript API v3 中的**简单方法。**

到目前为止，我已经找到了本教程：[https ://developers.google.com/maps/documentation/javascript/overlays#CustomOverlays](https://developers.google.com/maps/documentation/javascript/overlays#CustomOverlays)

尽管如此，我发现它非常笨重，而且我无法成功地将 HTML/CSS 代码注入到地图中。

**有人知道将 HTML/CSS 标记/框添加到 Google 地图的更简单方法吗？**

我可以通过将顶部/左侧坐标分配给分区来继续破解地图，然后使用 jQuery 将它们附加到地图上的谷歌地图上的标记，但这是一种解决方法/破解，必须有一种简单的方法来整合这些。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-21T16:47:52.857

为了节省读者的时间，我[在这里提供了演示网站](http://easysublease.org/mapcoverjs/)

对于这个问题。基本上，要添加 HTML/CSS 自定义标记，我建议`OverlayView`在一些外部库的帮助下实现一个子类。

*   首先我需要澄清为什么你应该继承`OverlayView`类。
*   其次，我需要证明为什么外部库可能会有所帮助。

好的。首先，`google.maps.Marker`类扩展`MVCObject`。该类`OverlayView`还扩展了`MVCObject`. 为了使您的 HTML/CSS 实现的自定义标记行为正常并`google.maps.Marker`在行为和事件通信级别（但不是视觉级别）类似于一个，扩展`OverlayView`类是一种安全的方法，因为构造一个实例`OverlayView`会以某种方式将实例本身“注册”到内部地图事件管理。我将在下面解释这种“注册”是如何发生的。

为了扩展`OverlayView`，您需要重写三个方法，`onRemove()` `onAdd()`，`draw()`。重写的目的`draw()`是，此方法本质上绑定到几个谷歌地图事件，例如`zoom_changed`. 的目的`draw()`是重绘 dom 元素，使其出现在地图画布的正确位置，并使其在地图画布上的大小正确。例如，`google.maps.Marker`每次用户放大或缩小地图时都会重新绘制自己。此外，还有许多不同的情况会触发`draw()` 类似地，`onAdd()`在地图瓦片准备好时调用，`onRemove()`在调用时`setMap()`调用。这三种方法正在监听一系列事件。在我看来，这就是“注册”的发生方式。这也解释了为什么扩展类`OverlayView`是实现 HTML/CSS 自定义标记的一种安全方法。因为您在扩展时不需要处理自己监听的地图事件`OverlayView`。否则，你必须这样做。

具体到这个问题，“实现一个定制制造商”，你也需要做上面描述的事情。

在您的问题中给出的“自定义 OverlayView 示例”上。我可以告诉您需要更改哪些内容才能使其表现得像一个标记。

在那个例子中。css`left`和`top`,`width`由预定义决定`google.maps.Bounds`，你应该改变它。您需要如下代码：

```
 CustomMarker.prototype.draw = function(){
      var overlayProjection = this.getProjection();
      // console.log("draw" + this.latLng);
      var anchor = overlayProjection.fromLatLngToDivPixel(this.latLng);

      if (this.dom_) {
        this.dom_.style.top = (Math.round(anchor.y- this.height_)).toString()+'px';
        this.dom_.style.left = Math.round( anchor.x - this.width_ / 2).toString() + 'px';
        $(this.dom_).outerWidth(this.width_); // I need to have this jQuery method 
      }

      // generally, the dom node left-top corner should not be generated at clicking poistion, but with offsets of both left and top
    }; 
```

`addDomListener()`您还需要通过 google maps API 提供的方法来处理所谓的“dom 事件” 。为什么它们是“所谓的”事件？

因为，为了使附加到扩展“OverlayView”类的标记实例的 HTML 节点能够响应用户行为（我在这里不调用浏览器事件），例如“单击”“双击”，开发人员应该将节点附加到窗格`overlayMouseTarget"。

原因是，实际上在`overlayMousetarget`窗格上方，还有其他几个非零宽度非零高度映射 HTML 节点，它们**“遮蔽”**了我们添加到 DOM 树的自定义标记节点。所以我们的标记不能直接接收类似的浏览器事件`onclick`，即使你已经为它实现了 DOM 事件处理函数。他们是“聋子”。

因此，将我们自定义的标记附加到`overlayMouseTarget`窗格（节点）的目的是，谷歌地图有自己的机制来处理接收到的最外面的浏览器事件。谷歌地图处理它们，然后通知附加到谷歌地图托管窗格的那些节点（这五个节点`floatPane` `mapPane` `markerLayer` `overlayLayer` `overlayMouseTarget`：）

现在您可以理解为什么我在调用“addDomListener()”时调用“所谓的”事件了。因为原始的“点击”浏览器事件从未到达我们糟糕的标记，相反，它通过侦听由最外面的原始“点击”​​浏览器事件触发的一个内部谷歌地图事件来响应“点击”动作。

现在，让我们关注第二点：“我需要证明为什么外部库可能会有所帮助”您必须处理不同的 google map dom 侦听器才能完成最初可以使用几行 CSS 代码完成的任务。

比如要实现伪类`hover`，就需要实现handler of`mouseover` `mouseout`等，做一些CSS类的增删。

使用诸如 mapcover.js 之类的外部库，您只需`set("mouseover": function cb() { /*your implementations here*/})`.

写了这么多，这里只展示一个demo：http: [//easysublease.org/mapcoverjs/](http://easysublease.org/mapcoverjs/)

[可以在此处](https://github.com/bovetliu/mapcover/blob/master/README.md)找到如何创建 HTML 标记的详细实现

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T22:06:38.980

您可能需要检查`google.maps.InfoWindow`（[https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows](https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows)）和`google.maps.Marker`（[https://developers.google.com/maps/documentation/javascript/reference#Marker](https://developers.google.com/maps/documentation/javascript/reference#Marker)）谷歌地图。您在页面上应用的任何 CSS 也将应用到 InfoWindow。

# python - 带有hma的python子进程

> ID：11678686
> 
> 赞同：0
> 
> 时间：2012-07-26T22:00:10.477
> 
> 标签：python, subprocess, popen

我正在尝试让子进程通过 linux 运行 hma 代理。我是 Python 新手，所以也许我没有使用正确的方法。我需要它做的是在后台运行 hma 并让程序检查我的公共 IP 是否与程序启动之前相同，如果不是每 30 分钟重新运行一次 hma 程序。

基本上程序需要检查当前IP然后连接到hma。如果第一个 IP 匹配第二个 IP，即 hma 没有连接，则打印等待。如果 IP 不匹配，则在 30 分钟内再次运行 hma。这是我到目前为止的代码。

```
import os
import webbrowser
import time
import socket
import urllib2
import subprocess

response = urllib2.urlopen("http://automation.whatismyip.com/n09230945.asp")
internal = response.read()
print "Internal IP Address is ", internal   
hma = ['cd', '/Desktop/hma', ';', './hma-start', '-r']
subprocess.Popen(hma, shell=True)
response = urllib2.urlopen("http://automation.whatismyip.com/n09230945.asp")
external = response.read()
while (internal == external):
    time.sleep(1)
    response = urllib2.urlopen("http://automation.whatismyip.com/n09230945.asp")
    external = response.read()
    print 'waiting'

while (internal != external):
    print 'It changed'
    hma = ['cd', '/Desktop/hma', ';', './hma-start', '-r']
    subprocess.Popen(hma, shell=True)
    response = urllib2.urlopen("http://automation.whatismyip.com/n09230945.asp")
    external = response.read()

print "External IP Address is ", external 
```

我究竟做错了什么？对不起，如果这是完全错误的。我是子流程模块的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:38:09.403

嗨，所以我不熟悉 hma，但是这样的东西应该可以工作。如果不是 dav1d ，请确保 hma-start 在您的路径中。我不太确定你为什么使用 /Desktop/hma？当您提升权限时，它在哪里并不重要。

```
import os
import webbrowser
import time
import socket
import urllib2
import subprocess
import socket

URL = "http://automation.whatismyip.com/n09230945.asp"
DIR = '/Desktop/hma'
HMA = ['./hma-start', '-r']
WAIT_TIME = 60 * 30 # 30 min
GET_IP = lambda: urllib2.urlopen(URL).read()

if __name__ == '__main__':
    external = internal = GET_IP()
    print "Internal IP Address is %s" % internal
    try:
        os.chdir(DIR)
    except OSError:
        print "%s not found" % DIR

    print "External IP Address is ", external
    while True:
        external = GET_IP()
        if external != internal:
            print "Proxied"
            time.sleep(WAIT_TIME)
        else:
            print "Not Proxied"
            proc = subprocess.Popen(HMA)
            proc.wait() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:26:20.487

如果你使用`shell=True`你的命令行必须是一个字符串：

```
hma = 'cd /Desktop/hma; ./hma-start -r'
subprocess.Popen(hma, shell=True) 
```

但是你也可以不这样做`shell=True`：

```
hma = ['/Desktop/hma/hma-start', '-r']
subprocess.Popen(hma) 
```

如果您想等到该过程完成，请调用`.communicate()`.`Popen-Object`

# objective-c - 区分点击和滚动 - iOS

> ID：11678687
> 
> 赞同：2
> 
> 时间：2012-07-26T22:00:17.920
> 
> 标签：objective-c, ios, uiscrollview, uigesturerecognizer

我有嵌入到 UIScrollView 对象中的图像。scrollView 的方向仅是水平滚动，并且启用分页以一次滚动一张图片。当用户单击图像时（例如在 Facebook 上），我希望能够通过另一个类使图像全屏显示。问题是，我如何区分点击图像和滚动？我希望它在用户平移视图时滚动并在他们点击它时放大到全屏视图。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:03:02.427

将标签手势识别器添加到您的`UIScrollView`对象，并通过它捕获点击手势。

这是您将点击识别器添加到视图的方式：

```
UITapGestureRecognizer * recognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(onTap:)];
recognizer.delegate = self;
[myScrollView addGestureRecognizer:recognizer]; 
```

这是`onTap`方法签名的样子：

```
- (IBAction)onTap:(UIPanGestureRecognizer *)recognizer {
    // Make image show up full screen
} 
```

# c# - 所有案例都涵盖了 Bresenham 的线算法

> ID：11678693
> 
> 赞同：10
> 
> 时间：2012-07-26T22:00:28.153
> 
> 标签：c#, .net, algorithm, line, bresenham

我需要检查一行中的所有像素，所以我使用 Bresenham 算法来访问其中的每个像素。特别是我需要检查所有像素是否都位于位图的有效像素上。这是代码：

```
private void Bresenham(Point p1, Point p2, ref List<Point> track) {
  int dx = p2.X - p1.X;
  int dy = p2.Y - p1.Y;

  int swaps = 0;
  if (dy > dx) {
    Swap(ref dx, ref dy);
    swaps = 1;
  }

  int a = Math.Abs(dy);
  int b = -Math.Abs(dx);

  double d = 2*a + b;
  int x = p1.X;
  int y = p1.Y;
  color_track = Color.Blue;
  Check_Pixel(ref area, new Point(x,y));
  track.Clear();
  track.Add(new Point(x, y));

  int s = 1;
  int q = 1;
  if (p1.X > p2.X) q = -1;
  if (p1.Y > p2.Y) s = -1;

  for(int k = 0; k < dx; k++) {
    if (d >= 0) {
      d = 2*(a+b) + d;
      y = y + s;
      x = x + q;
    }
    else {
      if (swaps == 1) y = y + s;
      else x = x + q;
      d = 2 * a + d;
    }
    Check_Pixel(ref area, new Point(x, y));
    track.Add(new Point(x, y));
  }
}

private void Swap(ref int x, ref int y) {
  int temp = x;
  x = y;
  y = temp;
} 
```

Check_Pixel 用于检查行像素是否在有效位图上。我将创建的像素添加到 a`List<Point>`以逐点渲染他的元素，并确保`Bresenham`检查正确的像素（确实如此）。问题是我的算法并没有涵盖所有情况，而是涵盖了大约 50% 的情况。

PS：我的坐标系原点在左上角（x从左到右，y从上到下）

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-27T07:58:35.460

查找完整版本：

```
public void line(int x,int y,int x2, int y2, int color) {
    int w = x2 - x ;
    int h = y2 - y ;
    int dx1 = 0, dy1 = 0, dx2 = 0, dy2 = 0 ;
    if (w<0) dx1 = -1 ; else if (w>0) dx1 = 1 ;
    if (h<0) dy1 = -1 ; else if (h>0) dy1 = 1 ;
    if (w<0) dx2 = -1 ; else if (w>0) dx2 = 1 ;
    int longest = Math.Abs(w) ;
    int shortest = Math.Abs(h) ;
    if (!(longest>shortest)) {
        longest = Math.Abs(h) ;
        shortest = Math.Abs(w) ;
        if (h<0) dy2 = -1 ; else if (h>0) dy2 = 1 ;
        dx2 = 0 ;            
    }
    int numerator = longest >> 1 ;
    for (int i=0;i<=longest;i++) {
        putpixel(x,y,color) ;
        numerator += shortest ;
        if (!(numerator<longest)) {
            numerator -= longest ;
            x += dx1 ;
            y += dy1 ;
        } else {
            x += dx2 ;
            y += dy2 ;
        }
    }
} 
```

# hadoop - 影响 Hbase 性能的因素

> ID：11678694
> 
> 赞同：1
> 
> 时间：2012-07-26T22:00:39.743
> 
> 标签：hadoop, mapreduce, hbase

我是 HBase 的初学者。我目前不确定是什么影响了 HBase 的性能。首先，我以独立模式运行 Hbase。我使用单机运行一个 Mapreduce 程序来处理 200 万行文本，并将结果输出到存储在本地文件系统中的 HBase 表中。大约花了 1 小时 40 分钟。然后我改为伪分布式模式。然后将 Htable 文件存储在 HDFS 中。包括程序在内的所有其他内容保持不变。然后花了3个多小时！！我完全糊涂了。谁能告诉我为什么会这样？

另一个问题，因为我在不是很强大的 Linux 机器上创建了 5 个虚拟机作为虚拟集群（8G ram。3GHz 4 核 CPU）。一个月前我运行 Mapreduce 程序时，我发现在单个主服务器或 5 个以上从服务器上运行它时没有太大区别。所以我认为 CPU 可能是瓶颈，但我仍然不确定。由于我对操作系统不太熟悉，任何人都可以肯定地给出答案吗？我不确定这是 IO 瓶颈还是 CPU 瓶颈。我只是在 6 台机器集群上运行程序，以完全分布式模式将记录插入 HBase 表。它太慢了，所以我放弃了这份工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T16:53:38.693

对于您问题的第一部分：

**很明显，伪分布式模式会比独立模式运行得慢。**在独立环境中，HBase 使用本地文件系统进行存储。在伪分布式模式下，HBase 使用 HDFS（反过来使用本地文件系统），因此您有一个额外的 IO 软件层。此外，在伪分布式模式下，您可能在同一台机器上有多个服务器线程，执行诸如复制之类的事情（每个数据都被复制几次），这在独立时不会发生。

一般来说，对于小（足够）数据，越集中的东西（如独立），您将拥有更好的性能。但是分布式模式对于大规模来说很重要，因为总有一天你会达到单台机器的可扩展性极限。然后在分布式模式下，我们需要处理诸如复制等最终会降低整体性能的事情。

关于问题的第二部分，您不应该期望在这些设置中具有良好的性能。您必须考虑到有许多软件层：**HBase、HDFS、Java、虚拟机**。这些层中的每一层都会增加开销。对于分布式从站，这会变得更慢，因为所有服务器共享相同的硬件。

如果您想看到一些性能提升，请考虑在 Linux 操作系统中使用独立模式，而不是作为虚拟机。然后在真正的集群中使用真正的分布式模式（不是在虚拟机中）（如果可以的话，即使是几台联网的消费者计算机也可以）。您应该期望每秒大约 1K~3K Puts。

# r - 比较向量

> ID：11678695
> 
> 赞同：1
> 
> 时间：2012-07-26T22:00:43.160
> 
> 标签：r

我想测试以下内容：对于 test 中的每个值，`x1`如果它介于`x2`和之间`x3`。基本上，如果`x2$x2`< `x1`<`x2$x3`为真，则返回其为真的值`x1`。在这种情况下，它们都是真实的。如果我应该编写一个函数或者是否有内置的东西来做到这一点，我很困惑？

```
x1 <- data.frame(x1=11:20, stringsAsFactors=FALSE)
> x1
   x1
1  11
2  12
3  13
4  14
5  15
6  16
7  17
8  18
9  19
10 20

x2 <- 1:10
x3 <- 21:30
x2 <- data.frame(x2, x3, stringsAsFactors=FALSE)

> x2
   x2 x3
1   1 21
2   2 22
3   3 23
4   4 24
5   5 25
6   6 26
7   7 27
8   8 28
9   9 29
10 10 30 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T22:23:21.773

尝试以下操作：

x1$x1[其中(x1$x1 > x2$x2 & x1$x1 < x2$x3)]

`which`返回等式的索引向量（在这种情况下，为`x1$x1 > x2$x2 & x1$x1 < x2$x3`真。然后我们使用`x1$x1[indices]`.

请注意在不等式中使用`&`而不是`&&`，因为您使用的是向量而不是单个元素。

# python - SQL Server、Python 和 OS X

> ID：11678696
> 
> 赞同：16
> 
> 时间：2012-07-26T22:00:45.623
> 
> 标签：python, sql-server, macos, pyodbc

将在 OS X 上运行的 Python 与基于云的 SQL Server 数据库接口的好方法是什么？

编辑：

使用 pyodbc 我收到此错误：

```
>>> import pyodbc
>>> cnxn = pyodbc.connect('DRIVER={SQL Server};SERVER=adsf.com;DATABASE=asdf;UID=asdf;PWD=asdf')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
pyodbc.Error: ('00000', '[00000] [iODBC][Driver Manager]dlopen({SQL Server}, 6): image not found (0) (SQLDriverConnect)') 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-12-01T23:54:06.500

**概括**

我在 Yosemite 版本 10.10.1 上使用 Mac 尝试连​​接到 MS SQL Server 数据库。我搜索并找不到更新的详细答案，所以这里有一篇文章，主要来自这篇精彩的[文章](http://www.cerebralmastication.com/2013/01/installing-debugging-odbc-on-mac-os-x/)。我将它添加到 stackoverflow 以防链接失效。这个想法是我们将有以下层来设置/连接。

**图层**

*   第 1 部分 - pyodbc
*   第 2 部分 - freeTDS（可以用 tsql 检查）
*   第 3 部分 - unixODBC（可以使用 isql 检查）
*   第 4 部分 - MS SQL（可以使用常规 python 程序检查）

**脚步**

1.  从[这里](http://brew.sh/)安装**Homebrew** - 这是 Mac OSX 的包管理器。本文展示了如何使用另一个包管理器“MacPorts”。根据我的指示，它们是自制的。基本上自制软件有一个文件夹“地窖”，其中包含不同版本的软件包。它不是修改您的普通文件，而是指向这些自制程序包。

2.  我们需要安装 Pyodbc，但 pyodbc 默认使用 iODBC 驱动程序（随 mac 一起安装），但很多人在使其工作时遇到问题。因此，我们将使用一个名为 的替代方案`unixodbc`，我们将在未来安装它。现在，我们需要配置 pyodbc 安装，使其与 unixodbc 一起使用。

转到 PyPi 并下载 pyodbc tarball 并解压缩它。然后将这些行更改为`setup.py`：

```
elif sys.platform == 'darwin':
        # OS/X now ships with iODBC.
        settings['libraries'].append('iodbc') 
```

至：

```
elif sys.platform == 'darwin':
        # OS/X now ships with iODBC.
        settings['libraries'].append('odbc') 
```

现在运行`python setup.py install`。

这使得我们的 pyodbc 安装默认使用 unixodbc 驱动程序。完美的！

3.  **安装 FreeTDS**（`brew install freetds --with-unixodbc`FreeTDS 是位于 Mac ODBC 和 MS SQL Server 之间的驱动程序，[此处](http://freetds.schemamania.org/userguide/choosingtdsprotocol.htm)的图表显示了您应该使用的 TDS 版本，具体取决于您的特定 Microsoft Server 版本；例如 Microsoft SQL Server 2008 的 tds 协议 7.2）。

4.  **配置`freetds.conf`**文件（该文件应该在“/usr/local/etc/freetds.conf”中，对于 Homebrew 来说是一个链接说“/usr/local/Cellar/freetds/0.91_2/etc”，但你的可能在某个地方因版本而异）。我编辑了全局并将我的数据库信息添加到末尾（出于某种原因，'tds version = 7.2' 会引发错误，但仍然可以工作，而 8.0 可以正常工作）：

    ```
    [global]
    # TDS protocol version
    tds version = 8.0

    [MYSERVER]
    host = MYSERVER
    port = 1433
    tds version = 8.0 
    ```

5.  **验证 FreeTDS**是否正确安装：（`tsql -S myserver -U myuser -P mypassword`如果有效，您应该会看到这样的提示）

    ```
    locale is "en_US.UTF-8"
    locale charset is "UTF-8"
    using default charset "UTF-8"
    1> 
    ```

6.  使用. **_** _`brew install unixodbc`

7.  设置您的**unixODBC 配置文件**，其中包括**odbcinst.ini**（驱动程序配置）和**odbc.ini**（DSN 配置文件）。默认情况下，我的文件位于：（`/Library/ODBC`注意：不是我的用户库，即 /Users/williamliu/Library）。或者它们也可能在您的自制软件安装目录`/usr/local/Cellar/unixodbc/<version>/etc`中。

8.  打开您的“ **odbcinst.ini** ”文件，然后添加以下内容（注意：如果您使用 MacPorts，则不同。对于 Homebrew，此文件是指向 Homebrew 版本的链接，例如我的位于 '/usr/local/Cellar/freetds/0.91 _2/lib/libtdsodbc.so'）：

    ```
    [FreeTDS]
    Description=FreeTDS Driver for Linux & MSSQL on Win32
    Driver=/usr/local/lib/libtdsodbc.so
    Setup=/usr/local/lib/libtdsodbc.so
    UsageCount=1 
    ```

9.  打开您的“ **odbc.ini** ”，然后添加以下内容（这通常与`odbcinst.ini`：

    ```
    [MYSERVER]
    Description         = Test to SQLServer
    Driver              = FreeTDS
    Trace               = Yes
    TraceFile           = /tmp/sql.log
    Database            = MYDATABASE
    Servername          = MYSERVER
    UserName            = MYUSER
    Password            = MYPASSWORD
    Port                = 1433
    Protocol            = 8.0
    ReadOnly            = No
    RowVersioning       = No
    ShowSystemTables    = No
    ShowOidColumn       = No
    FakeOidIndex        = No 
    ```

10.  **验证 unixODBC**是否正确安装：`isql MYSERVER MYUSER MYPASSWORD`。如果您遇到无法连接的错误，请添加`-v`以检查详细输出并修复它。否则，您应该看到：

    ```
    +---------------------------------------+
    | Connected!                            |
    |                                       |
    | sql-statement                         |
    | help [tablename]                      |
    | quit                                  |
    |                                       |
    +---------------------------------------+ 
    ```

11.  现在**验证 pyodbc**与 python 程序一起工作。在 shell 或 .py 文件中运行 python，你应该得到你的查询：

    ```
    import pyodbc
    import pandas
    import pandas.io.sql as psql

    cnxn = pyodbc.connect('DSN=MYSERVER;UID=MYUSER;PWD=MYPASSWORD')
    cursor = cnxn.cursor()
    sql = ("SELECT * FROM dbo.MYDATABASE")
    df = psql.frame_query(sql, cnxn) 
    ```

在此之后，您可以参考 pyodbc 的[文档](https://code.google.com/p/pyodbc/wiki/GettingStarted)以获得更多帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-26T22:16:12.133

[SQLAlchemy](http://www.sqlalchemy.org/)可能是你最好的选择。它有一个 ORM，但不需要使用它。MS SQL 通过许多 DBAPI 项目得到支持。

至于较低级别的接口，以下是 SQLAlchemy 网站上列出的三个 DBAPI 项目，它们具有 vanilla Python 和 Unix 支持：

*   [pymssql](http://code.google.com/p/pymssql/)似乎是最简单的设置；它不需要 FreeTDS。
*   [pyodbc](http://code.google.com/p/pyodbc/)似乎比 pymssql 处于更积极的开发阶段。
*   [mxODBC](http://www.egenix.com/products/python/mxODBC/)是许多数据库的商业许可接口。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-05-02T15:06:18.277

截至 2016 年 5 月，我已经能够简化它并反复让它在我的环境中工作：

# 安装 FreeTDS

```
brew install freetds --with-unixodbc 
```

# 安装 PYODBC

[从参考](https://stackoverflow.com/a/33695021/1584762)推断

```
pip install -U \
    --global-option=build_ext \
    --global-option="-I/usr/local/include" \
    --global-option="-L/usr/local/lib" \
    pyodbc 
```

# 告诉 UnixODBC 有关 FreeTDS 驱动程序的信息

注意：您可能有不同的版本

```
cat <<'EOF' >> /usr/local/Cellar/unixodbc/2.3.4/etc/odbcinst.ini
[FreeTDS]
Description=FreeTDS Driver for Linux & MSSQL on Win32
Driver=/usr/local/lib/libtdsodbc.so
Setup=/usr/local/lib/libtdsodbc.so
UsageCount=1
EOF 
```

从那里，我不得不告诉 pyodbc 使用`FreeTDS`驱动程序：

```
dsn = 'DRIVER=FreeTDS;DATABASE=MyDb;SERVER=...' 
```

`aioodbc`这太棒了，因为如果您在 Python 3.x 中进行异步编程，现在您可以使用它：

```
async with aioodbc.connect(dsn=dsn, loop=asyncio.get_event_loop()) as conn:
    async with conn.cursor() as cur:
        await cur.execute('SELECT 42')
        r = await cur.fetchall()
        print(r) 
```

或者：您可以使用`pymssql`flat out，但如果您想使用 odbc 或 asyncio，这将不起作用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-21T14:18:06.687

[威尔的回答](https://stackoverflow.com/questions/11678696/sql-server-python-and-os-x)对我真的很有帮助。

以下是我在此过程中遇到的一些差异的一些说明，以防他们帮助他人：

1.  [pyodbc tarball](https://pypi.python.org/packages/source/p/pyodbc/pyodbc-3.0.10.tar.gz#md5=3f6f205c979a0fe5dee05d37121a7b92)已经有了所需的更改，所以我所要做的就是下载并运行`python setup.py install`. （注意：我安装的版本`pip`还在使用iodbc，所以没有用。

2.  该`Verify FreeTDS installed`步骤不允许我连接到数据库，因为我无权访问`master`，并且显然无法指定。这似乎是一个众所周知的问题。我浪费了很多时间试图解决它，但失败了，最后它并没有阻止其他步骤的工作。

3.  这些说明说将用户名和密码放入`odbc.ini`. 由于我们需要在登录时再次说出登录凭据，因此我尝试从 中删除用户名和密码`odbc.ini`，希望它们不是真的必要。（我宁愿在更少的地方写下我的密码！）这很好用。

4.  我必须将主机添加到`isql MYSERVER myname@foo.bar.com MYPASSWORD`（以及 Python 代码中）的用户 ID。

（我希望这意味着我不需要 freetds.conf 中的主机，但可惜，它必须保留。）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-06-27T20:53:27.647

Pyodbc + MS 自己的 odbc 提供程序**msodbcsql**，而不是 FreeTDS。我的理由很简单——谁最有动力获得良好的 SQL Server 支持？多发性硬化症。

[https://docs.microsoft.com/en-us/azure/sql-database/sql-database-connect-query-python](https://docs.microsoft.com/en-us/azure/sql-database/sql-database-connect-query-python)

这真的很简单，主要的麻烦是他们的安装程序只适用于**Homebrew**，而不是我通常使用的**macports 。**我首先尝试将 Homebrew 安装到我的主目录，但是 pyodbc 并没有以这种方式“看到”实际的驱动程序，所以标准的 Homebrew 安装也是如此，然后`brew install msodbcsql`. 这导致了以下软件包：

```
(venv) jluc@sandbox$ brew list
 msodbcsql  openssl     unixodbc 
```

连接对我有用的字符串：

```
Driver={ODBC Driver 13 for SQL Server};Server=192.168.1.xxx;Database=mydb;Uid=myuser;Pwd=mypassword; 
```

而且，对于 SQL Alchemy：

```
"mssql+pyodbc://%(user)s:%(password)s@%(hostname)s:%(port)s/%(dbname)s?driver=ODBC+Driver+13+for+SQL+Server" 
```

如果您还要安装 MS SQL Server（我获得了 2016 开发人员版），请记住： 1) 使用**SQL Server 配置管理器**( `SQLServerManager13.msc`) 在端口 1433 上为您的 IP 启用 TCPIP。**2) 在Windows 防火墙**( )中打开 1433 端口`wf.msc`。 [MS 配置说明](https://docs.microsoft.com/en-us/sql/database-engine/configure-windows/configure-a-server-to-listen-on-a-specific-tcp-port)

版本：Sierra、Python 2.7、SQL Server 2016 开发版、Win 10 Pro。

注意：小心 MS 的 brew 安装。我认为它曾经主动安装 Homebrew。不确定这在实践中是否会成为问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-02-06T05:09:37.827

我在 macOS Sierra 10.12.3 上。pymssql 完美地完成了这项工作。如果其他赞成的答案没有任何效果，请按照以下步骤操作：

```
brew unlink freetds
brew install homebrew/versions/freetds091
pip install pymssql 
```

这是建立连接的示例片段：

```
conn = pymssql.connect(serverhostname, username, password, dbname)
cursor = conn.cursor()
cursor.execute('SELECT * FROM users') 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-11T10:28:59.450

有很多箍要跳过。威尔的回答概述了其中很多。

经过一番努力，我设法让它与 Docker 一起工作（所以这应该可以在任何运行 docker 的地方工作）。

我已经使用 Python 3.6 和 Python 2.7 测试了设置：使用 pyodbc==3.0.10、django-pyodbc-azure 和 Django 1.10.4（此设置适用于 Django，但也适用于 vanilla python）。

我创建了一个可以使用的公共图像：[https ://hub.docker.com/r/toast38coza/python-mssql/](https://hub.docker.com/r/toast38coza/python-mssql/)

这是一个简单的工作docker设置：

```
version: "3"
services:
  db:
    restart: on-failure:10
    image: microsoft/mssql-server-linux:latest
    environment:
      - ACCEPT_EULA=Y
      - SA_PASSWORD=SuperSecret(!)100
    ports:
      - "1433:1433"
  py:
    image: toast38coza/python-mssql
    links:
      - db
    environment:
      - SA_PASSWORD=SuperSecret(!)100
      - DB_NAME=mydb 
```

现在你可以运行：

```
docker-compose run --rm py python 
```

它将在`py`上面的服务中运行 python cli

然后尝试创建一个数据库：

```
>>> import pyodbc, os
>>> db_name = os.environ.get('DB_NAME')
>>> pwd = os.environ.get('SA_PASSWORD')
>>> connection_string = "driver=FreeTDS;server=db;PORT=1433 database=master;UID=sa;PWD={};TDS_Version=8.0;".format(pwd)
>>> conn = pyodbc.connect(connection_string, autocommit=True)
>>> conn.execute('create database {}'.format(db_name))
<pyodbc.Cursor object at 0x7fb3067f0e70> 
```

那应该创建一个名为`mydb`（`DB_NAME`来自 docker-compose 文件环境变量）的数据库。注意：因为我们已经创建了到`db`服务的链接（运行 MS SQL），所以我们可以使用主机名`db`。如果您要连接到外部 MS SQL 设置，您显然不需要该`db`服务（并相应地编辑您的连接字符串）

如果您使用的是 Django，[repo 中有一个更完整的示例](https://github.com/toast38coza/python-mssql)，但是，请注意，您需要`settings`看起来像这样：

```
DATABASES = {
    'default': {
        'ENGINE': "sql_server.pyodbc",
        'HOST': "db",
        'PORT':'1433',
        'USER': "sa",
        'PASSWORD': os.environ.get('SA_PASSWORD'),
        'NAME': os.environ.get('DB_NAME'),
        'OPTIONS': {
            "driver": "FreeTDS",
            "host_is_server": True,
            "unicode_results": True,
            "extra_params": "tds_version=8.0",
        }
    }
} 
```

# c# - 有没有办法通过网络摄像头直接将二维码扫描到网页中？

> ID：11678697
> 
> 赞同：0
> 
> 时间：2012-07-26T22:00:46.513
> 
> 标签：c#, javascript, asp.net-mvc, web, barcode-scanner

我想让用户能够通过简单地扫描二维码在网页中输入数据。

我不确定是否可以在页面中嵌入一些东西/与一些库结合来实现这一点，或者我是否需要考虑使用浏览器外部的东西？

如果它是一个特定于平台的解决方案，那么我主要想要一些适用于 Windows 的东西。但理想情况下，它可以在 PC 和平板电脑上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:23:43.423

好吧，对于 javascript，没有统一的网络摄像头处理，但是对于 flash，尽管用户必须先授予访问权限。

在我的浏览器中输入*qr code flash*会弹出这个网页： http: [//miniqr.com/reader.php/](http://miniqr.com/reader.php/)

或者尝试搜索*qr code actionscript* - 你需要一个阅读器库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:50:39.103

Web 代码在 Web 服务器上运行。Javascript 在客户端上运行。不幸的是，您无法通过 Javascript 控制客户的网络摄像头（想象一下，如果可以的话，我们会遇到的安全和隐私问题）。这为您提供了三个选择。

1）HTML5。HTML5 具有允许您控制网络摄像头的新标准。不幸的是，HTML5 仍然是新的，我相信 Google Chrome 和 Opera 是迄今为止唯一可以访问网络摄像头的浏览器。

2）银光。从 Silverlight 4 开始，您现在可以访问用户的网络摄像头。Silverlight 是一种很好的方法，而且很简单，但它的普及程度不如我们的最终选择：

3) Adob​​e Flash。使用 Flash，您可以访问用户的网络摄像头，好消息是 Flash 传播非常广泛，几乎所有计算机都可以运行您的代码。

所以这些是你的选择。选一个！祝你好运！

# javascript - 在展开-折叠段落中添加“关闭”按钮

> ID：11678698
> 
> 赞同：1
> 
> 时间：2012-07-26T22:00:48.230
> 
> 标签：javascript, html, css

我目前在我的网页中添加了一个可折叠的段落功能。我使用了在[http://www.javascriptsource.com/miscellaneous/expand-collapse-paragraph.html#comment_listing](http://www.javascriptsource.com/miscellaneous/expand-collapse-paragraph.html#comment_listing)上找到的代码。基本上，我有一个很长的段落在单击按钮之前是隐藏的，但是您必须一直滚动到顶部才能单击同一个按钮以折叠该段落。我想知道是否有一种方法可以在段落末尾添加一个“关闭”按钮，这样我就不必滚动到顶部。

谢谢你。

以下是 js、css 和 html 文件的代码：

**CSS**

```
input.button {
  color: #fff; background: #0034D0;
  font-size: .8em;
  font-weight:bold;
  font-family: Verdana, Arial, Helvetica, sans-serif;
  border: solid 1px #ffcf31;
} 
```

**名为：expandCollapse.js 的外部 JavaScript 文件**

```
function toggleMe(a){
  var e=document.getElementById(a);
  if(!e)return true;
  if(e.style.display=="none"){
    e.style.display="block"
  } else {
    e.style.display="none"
  }
  return true;
} 
```

**实际段落之前的 HTML 文档的 BODY 部分**

```
<center><input type="button" class="button" onClick="return toggleMe('para1')" value="Animation Characters Guide"></center>
    <div id="para1" style="display:none">

    </div> 
```

如果我想添加一个“关闭”按钮，它会是一个“a href”标签吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:04:53.253

> 如果我想添加一个“关闭”按钮，它会是一个“a href”标签吗？

是的，您可以使用链接：

```
<a href="#" onclick="toggleMe('para1'); return false"> hide </a> 
```

或者您可以使用另一个按钮：

```
<input type="button" class="button" onclick="return toggleMe('para1')" value="Are the JavaScripts here free?" /> 
```

# java - Spring 控制器永远不会被调用

> ID：11678699
> 
> 赞同：0
> 
> 时间：2012-07-26T22:00:54.253
> 
> 标签：java, spring, spring-mvc

我在 Spring 中创建了简单的 hello world 应用程序，它工作得很好，然后我在另一个项目中复制了相同的文件，突然间，应用程序中的主（也是唯一的）控制器永远不会被调用

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>TestApp</display-name>  
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>

  <!-- Processes application requests -->
  <servlet>
      <servlet-name>appServlet</servlet-name>
      <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
      <init-param>
          <param-name>contextConfigLocation</param-name>
          <param-value>/WEB-INF/spring/appServlet/appServlet-context.xml</param-value>
      </init-param>
      <load-on-startup>1</load-on-startup>
  </servlet>        

   <servlet-mapping>
      <servlet-name>appServlet</servlet-name>
      <url-pattern>/</url-pattern>
  </servlet-mapping>

</web-app> 
```

appServlet-context.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
        <beans xmlns="http://www.springframework.org/schema/beans"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xmlns:mvc="http://www.springframework.org/schema/mvc"
            xmlns:context="http://www.springframework.org/schema/context"
            xsi:schemaLocation="
                http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
                http://www.springframework.org/schema/beans 

http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

        <!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

        <!-- Scans within the base package of the application for @Components to configure as beans -->
        <!-- @Controller, @Service, @Configuration, etc. -->
        <context:component-scan base-package="com.testApp" />

        <!-- Enables the Spring MVC @Controller programming model -->
        <mvc:annotation-driven />   

    </beans> 
```

和 HomeController

```
package com.testApp.Controllers;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;

/**
 * Handles requests for the application home page.
 */
@Controller
public class HomeController {

    @RequestMapping(value = "/")
    public String home() {
        System.out.println("HomeController: Passing through...");
        return "WEB-INF/Views/Home.jsp";
    }
} 
```

问题是我总是得到 404 错误并且`HomeController: Passing through...`永远不会打印到控制台所以我怀疑 HomeController 甚至没有被调用

这在另一个项目中运行良好，它将打印`HomeController: ...`到控制台，但我无法显示视图，因此在尝试使其正常工作几个小时后，我决定创建新项目，现在似乎连控制器都没有被调用

任何人都知道可能是什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T02:16:05.880

我希望您只是访问了错误的 URL。您发布的所有内容都可以正常工作。我使用您发布的内容和一个简单的 Home.jsp组合[了一个示例项目。](https://github.com/zzantozz/testbed/tree/master/stackoverflow/11678699-basic-springmvc)您可以尝试一下，看看它是否适用于以下步骤：

```
git clone git://github.com/zzantozz/testbed.git tmp
cd tmp/stackoverflow/11678699-basic-springmvc
mvn jetty:run 
```

然后导航到`http://localhost:8080/11678699-basic-springmvc/`（抱歉，Stackoverflow 不再允许以“localhost”作为主机创建超链接）。您将看到“hi there” (Home.jsp)，并且您会看到控制器打印到控制台的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:55:57.723

我不确定这是否能帮助你，但你应该总是用小写字母命名你的包，因为它可能会造成混淆，因为在 Windows 机器上，因为不同包的文件夹名称是相同的（aAA 和 aaa将进入一个文件夹）。这反过来又以负面的方式影响自动扫描。

我在使用 Weblogic 服务器时遇到了这样的问题：在服务器启动期间选择了 bean，但是在应用程序重新部署组件扫描停止工作后，使一些 bean（控制器）神秘地从工作应用程序中消失。根本原因是首先我在包名中有一个拼写错误，迫使 weblogic 创建目录名称中带有大写字母的文件夹结构。在我手动删除了可怜的包目录后，一切都得到了修复（但花了几天时间才找到问题的根源）。

[包命名约定](http://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html)

至于 previos 项目 - 可能应该删除“WEB-INF\”（甚至“\Views\”）部分，您可以声明自己的视图解析器指定 jsp 前缀：

```
 <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
       <property name="prefix" value="/views/" />
       <property name="suffix" value=".jsp" />
    </bean> 
```

# python - 登录错误后的 Django 重定向

> ID：11678703
> 
> 赞同：0
> 
> 时间：2012-07-26T22:01:03.513
> 
> 标签：python, django, authentication

我是 Django 新手，我知道要在登录后重定向，我必须设置参数“页面”。但这仅在登录成功时有效。

当出现一些错误时，我怎么能做同样的事情？

Ps：我目前也在使用带有简单后端的 django-registration

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:58:25.013

我认为这就是您要寻找的东西：

```
# Login
def connection(request):

    # Redirect to dashboard if the user is log
    if request.user.is_authenticated():
        return redirect('YourProject.views.home')

    # Control if a POST request has been sent.
    if request.method == 'POST':
        username = request.POST['username']
        password = request.POST['password']
        user = authenticate(username=username, password=password)

        if user is not None: #Verify form's content existence
            if user.is_active: #Verify validity
                login(request, user)
                return redirect('/index') #It's ok, so go to index
            else:
                return redirect('/an_url/') #call the login view

    return render(request, 'login.html', locals())  #You can remove local() it is for user's data viewing.. 
```

# zend-framework - Zend 框架中的 defaultAdapter

> ID：11678706
> 
> 赞同：1
> 
> 时间：2012-07-26T22:01:08.403
> 
> 标签：zend-framework, zend-db-table

当我尝试在我的模型中构建对我的数据库的查询时

```
class Application_Model_DbTable_Resume extends Zend_Db_Table_Abstract
{

protected $_name = 'users';

public function getFiveLastResume (){

   $select= $db->select()->from('users')->order("id DESC")->limit(5);
   $stmt = $db->query($select);
   $row = $stmt->fetchAll();       
   return $row;

   }
} 
```

所以我有一个错误`Notice: Undefined variable: db`

如果我在查询之前写适配器

```
 $db = Zend_Db::factory('PDO_MYSQL',array(
'host'     => '127.0.0.1',
    'username' => 'root',
    'password' => '',
    'dbname'   => 'sport'       
)); 
```

多数民众赞成在工作好。为什么我的适配器不工作？

我的 application.ini 包含正确的数据库配置，因为更简单的查询在不包括适配器的情况下效果很好。我是zend的菜鸟，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T22:16:33.867

`$db`在本地范围内未定义，这就是您收到错误的原因。

由于您在`DbTable`对象内部，因此可以使用`$this`来获取 DB 适配器：

```
public function getFiveLastResume () {
    $select = $this->select()->from('users')->order("id DESC")->limit(5);
    $stmt   = $select->query();
    $row    = $stmt->fetchAll();       
    return $row;
} 
```

在您的应用程序的任何其他地方，您应该能够使用以下方法获取对默认数据库适配器的引用：

```
$db = Zend_Db_Table::getDefaultAdapter();
$select = $db->select()->from('table')...; 
```

这当然假设您已经创建了一个`Zend_Db_Table`对象并将其设置为默认适配器。

# php - 如何更改 jpg 质量导出？

> ID：11678713
> 
> 赞同：3
> 
> 时间：2012-07-26T22:01:34.263
> 
> 标签：php, jpeg

在以下代码中，将 jpg 存储在 db 中，我需要知道如何首先将 jpg 更改为 40% 质量然后保存？我试过了[`imagejpg`](http://php.net/imagejpeg)，但它保存了空文件：

```
function exportGraphics($table_name)
{
    $odbc_query = "SELECT * FROM " . $table_name;
    mkdir("TI/" . $table_name);

    $data = odbc_exec($this->odbc_id, $odbc_query);
    odbc_longreadlen($data, 10485760); // 10MB = 10485760
    while (odbc_fetch_row($data)) {
        $row = odbc_fetch_array($data);
        if ($row['GRD_ID'] != "") {
            $file_name_jpg = "TI/" . $table_name . "/" . $row['GRD_ID'] . ".jpg";
            $file = fopen($file_name_jpg, "w");
            fputs($file, $row['GRD_GRAPHIC']);
            fclose($file);
            set_time_limit(3600);
            unset($row);
        }
    }
    print "Ýêñïîðò êàðòèíîê èç òàáëèöû " . $table_name . " çàâåðøåí!";
} 
```

> 警告：imagecreatefromstring() [function.imagecreatefromstring]：gd 警告：内存分配乘法的一个参数为负数或零，在 X:\denwer\www\denwer\tecdoc3.php 第 103 行中优雅地失败操作
> 
> 警告：imagecreatefromstring() [function.imagecreatefromstring]：在第 103 行的 X:\denwer\www\denwer\tecdoc3.php 中传递的数据不是“WBMP”格式
> 
> 警告：imagecreatefromstring() [function.imagecreatefromstring]：Could't create GD Image Stream out of Data in X:\denwer\www\denwer\tecdoc3.php on line 103
> 
> 警告：imagecreatefromstring() [function.imagecreatefromstring]：gd 警告：内存分配乘法的一个参数为负数或零，在 X:\denwer\www\denwer\tecdoc3.php 第 103 行中优雅地失败操作

原始代码：

```
 function exportGraphics($table_name) {
 $odbc_query = "SELECT * FROM " . $table_name;
 mkdir("TI/" . $table_name);

 $data = odbc_exec($this->odbc_id, $odbc_query);
 odbc_longreadlen($data, 10485760); //10MB = 10485760
 while(odbc_fetch_row($data)) 
 { 
 $row = odbc_fetch_array($data);
 if($row['GRD_ID'] != "") {
 $file_name_jp2 = "TI/" . $table_name . "/" . $row['GRD_ID'] . ".jp2";
 $file = fopen ($file_name_jp2, "w");
 fputs($file, $row['GRD_GRAPHIC']);
 fclose($file);
 set_time_limit(0);
 unset($row);
 }
 }
 print "Ýêñïîðò êàðòèíîê èç òàáëèöû " . $table_name . " çàâåðøåí!";
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T22:09:29.673

试试这个：

```
function exportGraphics($table_name) {
    $odbc_query = "SELECT * FROM " . $table_name;
    mkdir("TI/" . $table_name);

    $data = odbc_exec($this->odbc_id, $odbc_query);
    odbc_longreadlen($data, 10485760); //10MB = 10485760
    while(odbc_fetch_row($data))
    {
        $row = odbc_fetch_array($data);
        if($row['GRD_ID'] != "") {
            $file_name_jpg = "TI/" . $table_name . "/" . $row['GRD_ID'] . ".jpg";

            // create GD graphic from string, call imagejpeg to save new image
            $im = imagecreatefromstring($row['GRD_GRAPHIC']);
            imagejpeg($im, $file_name_jpg, 40);

            set_time_limit(3600);
            unset($row);
        }
    }
    print "Ýêñïîðò êàðòèíîê èç òàáëèöû " . $table_name . " çàâåðøåí!";
} 
```

或者这正是你尝试过的？

如果由于某种原因不起作用，您可以尝试：

```
$im = imagecreatefromstring($row['GRD_GRAPHIC']);
ob_start();
imagejpeg($im, null, 40);
$imgData = ob_get_contents();
ob_end_clean();

$file = fopen ($file_name_jpg, "w+b");
fputs($file, $imgData);
fclose($file); 
```

编辑：*GD 不工作的原因是因为它不支持 JPEG-2000 文件格式*

可能的解决方案：`imagemagick`在服务器上安装并尝试如下代码：

```
$file_name_jpg = "TI/" . $table_name . "/" . $row['GRD_ID'] . ".jp2";
$file_out_jpg  = str_replace('.jp2', '.jpg', $file_name_jpg);

file_put_contents($file_name_jpg, $row['GRD_GRAPHIC']);

// execute imagemagick convert to change to jpeg with quality 40
exec("/usr/bin/convert $file_name_jpg -quality 40 -format jpg $file_out_jpg");
unlink($file_name_jpg); // get rid of temp jp2 file 
```

# java - 如何添加jlabel图像悬停？

> ID：11678722
> 
> 赞同：3
> 
> 时间：2012-07-26T22:02:35.420
> 
> 标签：java, swing, jframe, jlabel, imageicon

我将如何添加`JLabel`悬停？就像当您将鼠标移到 a 顶部时`JLabel`，新图像将与其重叠。我知道如何使它与按钮一起工作，但同样的技术不适用于`JLabel`s。有人会指导我添加`JLabel`悬停吗？请和谢谢。

```
package src;

import java.awt.Dimension;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;

/*
 * @Author - 0x29A
 * 
 * 
 */
public class Jframe {

    public static void main(final String args[]) {

        /*
         * @Images
         */
        final ImageIcon icon = new ImageIcon("Data/button.png");
        final JLabel label = new JLabel(icon);

        final ImageIcon icon1 = new ImageIcon("Data/button1.png");
        final JLabel label1 = new JLabel(icon1);

        final ImageIcon icon2 = new ImageIcon("Data/button2.png");
        final JLabel label2 = new JLabel(icon2);

        final ImageIcon icon3 = new ImageIcon("Data/button3.png");
        final JLabel label3 = new JLabel(icon3);

        final ImageIcon icon4 = new ImageIcon("Data/button4.png");
        final JLabel label4 = new JLabel(icon4);

        final ImageIcon icon5 = new ImageIcon("Data/button5.png");
        final JLabel label5 = new JLabel(icon5);

        final ImageIcon icon6 = new ImageIcon("Data/background.png");
        final JLabel label6 = new JLabel(icon6);

        /*
         * @Image Location
         */
        label.setBounds(282, 255, 96, 96);
        label1.setBounds(384, 255, 96, 96);
        label2.setBounds(282, 153, 96, 96);
        label3.setBounds(384, 153, 198, 96);
        label4.setBounds(181, 152, 96, 96);
        label5.setBounds(181, 255, 96, 96);
        label6.setBounds(0, 0, 765, 503);

        /*
         * @Frame
         */
        final JFrame frame = new JFrame("test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setPreferredSize(new Dimension(765, 503));
        frame.setLayout(null);
        frame.add(label);
        frame.add(label1);
        frame.add(label2);
        frame.add(label3);
        frame.add(label4);
        frame.add(label5);
        frame.add(label6);
        frame.pack();
        frame.setResizable(false);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T22:24:15.070

举一个简单的例子，它使用`MouseListener`and`MosueAdapter`来监视`mouseExited()`和`mouseEntered()`上的事件`JLabel`，并且当调用这些方法中的任何一个时（即，当鼠标悬停在标签上时）图片会发生变化：

```
import java.awt.BorderLayout;
import java.awt.Container;
import java.awt.event.MouseAdapter;
import javax.swing.*;

public class LabelHoverTest extends JFrame {

    Icon pic1;
    Icon pic2;
    JLabel label;

    public LabelHoverTest(String title) {
        super(title);
        pic1 = UIManager.getIcon("OptionPane.informationIcon");
        pic2 = UIManager.getIcon("OptionPane.questionIcon");
        createAndShowUI();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new LabelHoverTest("Label Hover Test").setVisible(true);
            }
        });
    }

    private void createAndShowUI() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setResizable(false);
        addComponentsToPane(getContentPane());
        setSize(300, 300);
        setLocationRelativeTo(null);
        setVisible(true);
    }

    private void addComponentsToPane(Container contentPane) {
        label = new JLabel(pic1);

        contentPane.add(label, BorderLayout.CENTER);

        label.addMouseListener(new MouseAdapter() {

            @Override
            public void mouseEntered(java.awt.event.MouseEvent evt) {
                label.setIcon(pic2);
            }

            @Override
            public void mouseExited(java.awt.event.MouseEvent evt) {
                label.setIcon(pic1);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T22:15:47.150

您可以`MouseEntered`为此使用鼠标事件并编写此代码 `JLabel.setIcon(new javax.swing.ImageIcon(getClass().getResource("image location")));`

# joomla - 如何扩展默认的 joomla 类/函数？

> ID：11678723
> 
> 赞同：0
> 
> 时间：2012-07-26T22:02:38.577
> 
> 标签：joomla, joomla-extensions

我想将 Joomla 中的提交文件功能扩展为自定义句柄文件的扩展，我该怎么做？请给我一些代码示例。

我被告知要在模型中扩展它们，但是每当我尝试扩展任何东西时，我都会遇到错误，即使我有一个只显示“..extends xxxx{}.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T04:27:07.380

```
see below url and read :-

http://docs.joomla.org/How_Joomla_pieces_work_together

Or

class <name>Controller extends JController
{

} 
```

# java - 在java中表示二维球堆

> ID：11678731
> 
> 赞同：1
> 
> 时间：2012-07-26T22:03:06.873
> 
> 标签：java, graphics, data-structures, location, 2d

我正在创建一个应用程序，我需要使用 java 建模（并显示）大量二维“球”（圆圈）。我首先创建了一个`ArrayList`对象`Circle`（我定义的一个类，它具有圆心的 x/y 像素坐标、半径、颜色和 x 和 y 方向的速度）。我使用`java.util.Timer`一个重复的对象`TimerTask`来控制圆圈的运动。圆圈的大小从大约 10-50 像素半径不等。

我想要发生的是让球从屏幕顶部落下（随机分布在 x 轴上）直到它们到达屏幕底部，这就像地板一样 - 到达它的球停止移动，而球到达停止的球在其他球上滚下山，直到它们停留在低/平坦点。将来我可能想让他们的行为更复杂一些，所以我想创建灵活的代码，以便我可以轻松扩展。现在它的工作原理是每个时间段每个圈子都会检查它们与其他圈子的距离。如果附近没有其他圆圈，它们会继续正常下降。如果两个（或更多）圆圈彼此靠近，则有代码来确定它们将如何交互。

我让它完美地适用于少量圆圈（< 200），但是当我得到大量圆圈（> 400）时，它开始显着减慢。我确信我可以优化一些逻辑以使比较更快一些，但我想知道除了无组织之外是否有任何方法可以将圆存储在某种结构中`ArrayList`这会让我很容易找到彼此靠近的圆圈，所以我不必做 N^2 操作来比较每个圆圈，而只需将一个圆圈与最接近的 5-10 个圆圈进行比较给它。例如，我考虑使用 2D 数组来表示每个像素（或者可能是 5x5 像素的正方形）并在其中心所在的位置存储一个圆圈（这样我就可以检查附近的任何单元格中是否有圆圈，并忽略休息）。但是，这似乎仍然非常低效，就好像我正在使用 800x1000 像素画布和 500 个圆圈一样，在二维数组中会有大量空白空间，我会浪费时间检查。我也考虑过某种哈希图，但我也没有想到使用它的好方法。

那么，谁能想到一种有效的方法来存储这些圆圈，这些圆圈对应于它在 2d 空间中的位置，并且可以很容易地找到附近的圆圈？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:06:36.040

您可以使用四叉树来查找近邻。或者您可以简单地按一个方向排序，这将更容易实现，并且仍应允许您将候选邻居的数量减少到一个小窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T22:14:35.410

也许您对 2D 数组的想法并没有那么疯狂。我认为您想要的是所有圈子的一个列表，以及一个也可以引用这些圈子的二维数组。所以每次，你都可以遍历你的`List<Circle>`来检查每一个。每个 Circle 都有 x,y 坐标，您只需在数组上循环 (x,y +/- 5)。无需检查 Circles 的整个可能空间，因为您已经在跟踪每个 Circle 的中心。只需抓住中心，然后检查它周围的其他圆圈。

# ormlite-servicestack - 如何将枚举属性映射到 ServiceStack.OrmLite 中的 int？

> ID：11678735
> 
> 赞同：0
> 
> 时间：2012-07-26T22:03:55.840
> 
> 标签：ormlite-servicestack

也许答案将是“设计”。但是枚举属性主要用于过滤。所以他们需要“数据库索引”。但是如果你将它们映射到 varchar(max) 我们无法在 Sql Server 中为它们创建索引。

因此，如果答案是“按设计”，您是否可以添加 [Flag] 样式绑定替代方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:37:39.970

这对我来说是架构错误，没有解决方案。

所以我们做了

```
int UserTypeId {get;set,} // It is for db
UserTypeEnum UserTypeEnum {get;set;} // It manipulates UserTypeId and read from UserTypeId 
```

# google-maps - 列出和计数标记

> ID：11678741
> 
> 赞同：-1
> 
> 时间：2012-07-26T22:04:38.883
> 
> 标签：google-maps, google-maps-markers

我需要计算并列出图形中的标记，无论是 Sirculo 还是矩形。

操作将是，当您在地图上插入一个图形时，我会列出并计算其中有多少个标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:57:04.247

Circle 和 Rectangle 类有一个 getBounds() 函数，它返回一个 LatLngBounds 对象。添加你的圆圈/矩形并获得它的界限。遍历您的标记，在每个标记上调用 contains() 函数以查看它是否包含在该 latlng 边界中。

您可能需要对圆圈稍微聪明一点，因为它的边界将是围绕它的边界框，因此您可能有位于圆圈之外但仍在该框内的标记。在这种情况下，您需要根据圆的半径计算出一些东西。

# javascript - Jquery UI 选项卡 - 根据输入字段值使用 Next/Previous 按钮推进选项卡

> ID：11678745
> 
> 赞同：1
> 
> 时间：2012-07-26T22:05:13.810
> 
> 标签：javascript, jquery, jquery-ui, tabs

我正在使用仅使用上一个和下一个按钮操作的 Jquery UI 选项卡。在我的第一个选项卡中，我有选择框，为了前进，您必须从选择框中选择一个选项。我担心的是 Tab#2 我有三个输入字段，我希望用户在继续之前填写它们。

如何禁用“下一步”按钮，以便用户在进入下一个选项卡之前被迫填写输入字段？[例子](http://www.google.com)

**JS-下一个/上一个**

```
<script>
        $(function() {

                var $tabs = $('#tabs').tabs({
                    disabled: [0, 1]
                });

                $(".ui-tabs-panel").each(function(i) {

                    var totalSize = $(".ui-tabs-panel").size() - 1;

                    if (i != totalSize) {
                        next = i + 2;
                        $(this).append("<a href='#' class='next-tab mover' rel='" + next + "'>Next Page &#187;</a>");
                    }

                    if (i != 0) {
                        prev = i;
                        $(this).append("<a href='#' class='prev-tab mover' rel='" + prev + "'>&#171; Prev Page</a>");
                    }

                });

                $('.next-tab, .prev-tab').click(function() {
                    var tabIndex = $(this).attr("rel");
                    if (
                        /*(1)*/ $('#tabs').tabs('option', 'selected') > 0 ||
                        /*(2)*/ ($('.update.last').length > 0 && parseInt($('.update.last').val(), 10) > 0)
                    ) {
                        $tabs.tabs('enable', tabIndex)
                            .tabs('select', tabIndex)
                            .tabs("option","disabled", [0, 1]);
                    }
                    return false;
                });

        });
</script> 
```

**HTML**

```
<div id="tab-2" class="ui-tabs-panel ui-tabs-hide">
  <label for="title"> Title: *</label>
    <input type="text"  id="title" name="title" class="" size="33" autocomplete="off" value="<? $title ?>"/><br>
    <label for="price"> Price: *</label>             
      <input type="text" name="price" class="" size="8" maxlength="9" id="price" autocomplete="off" value="<? $price ?>" /><br>
           <label for="description"> Description: *</label> 
         <textarea id="description" name="description" class=""><? $description ?></textarea><br />

</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T05:29:25.573

仅更改*下一个*或*上*一个按钮上的选项卡，如果

*   (A) 上一个*按钮*已被点击或
*   (B) 当前选项卡是第一个选项卡，*确实*存在最后一个选项，并且选择了一个选项或
*   （C）当前选项卡是第二个选项卡，所有（[修剪](http://api.jquery.com/jQuery.trim/)）文本值都不为空。

这是下一个未经测试的扩展：

```
$('.next-tab, .prev-tab').click(function() {
    var tabIndex = $(this).attr("rel");
    if (
        $(this).hasClass('prev-tab') ||                          /*(A)*/
        (
            $('#tabs').tabs('option', 'selected') == 0 &&        /*(B)*/
            $('.update.last').length > 0 && 
            parseInt($('.update.last').val(), 10) > 0
        ) ||
        (
            $('#tabs').tabs('option', 'selected') == 1 &&        /*(C)*/ 
            $.trim($('#title').val()).length > 0 && 
            $.trim($('#price').val()).length > 0 &&
            $.trim($('#description').val()).length > 0
        )
    ) {
        $tabs.tabs('enable', tabIndex)
            .tabs('select', tabIndex)
            .tabs("option","disabled", [0, 1]);
    }
    return false;
}); 
```

=== 更新 ===

添加了特定于选项卡的警报：

```
$('.next-tab, .prev-tab').click(function() {
    var prev = $(this).hasClass('prev-tab');
    var currentTab = $('#tabs').tabs('option', 'selected');
    if (
        prev ||                                                  /*(A)*/
        (
            currentTab == 0 &&                                   /*(B)*/
            $('.update.last').length > 0 &&
            parseInt($('.update.last').val(), 10) > 0
        ) ||
        (
            currentTab == 1 &&                                   /*(C)*/
            $.trim($('#title').val()).length > 0 &&
            $.trim($('#price').val()).length > 0 &&
            $.trim($('#description').val()).length > 0
        )
    ) {
        var tabIndex = $(this).attr("rel");
        $tabs.tabs('enable', tabIndex)
            .tabs('select', tabIndex)
            .tabs("option","disabled", [0, 1]);
    } else if (!prev) {
        switch (currentTab) {
            case 0:
                alert('Please choose an option.');
                break;
            case 1:
            case 2:
                alert('Please fill out all form inputs.');
                break;
        }
    }
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T22:22:36.350

修改点击事件处理程序：

```
$('.next-tab, .prev-tab').click(function() {
  var $t = $(this), tabIndex = $t.attr("rel");
  if ($t.hasClass("prev-tab")) {
    if ($("input").filter('[value=""]').length) {
      alert("Please fill out all form inputs.");
      return false;
    }
  }
... 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T22:09:29.197

您可以编写一个验证函数来查看选定的选项卡，然后查看需要填写的项目以供下一个启用。然后可以将此功能绑定到需要填写的每个项目的更改。

# ruby-on-rails - 标签将显示但不显示 text_field - Rails

> ID：11678746
> 
> 赞同：1
> 
> 时间：2012-07-26T22:05:18.507
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid, form-for

我正在开发我的第一个 Rails 应用程序并遇到一个奇怪的问题。我正在使用带有 mongodb 的 Rails 3.2.6。

在我看来，我可以像这样显示一个标签：

```
<%= f.label :percent  %> 
```

但是当我用这样的文本字段尝试同样的事情时：

```
<%= f.text_field :percent  %> 
```

页面甚至没有加载，没有任何反应。

这是我的控制器：

```
class TrimmingsController < ApplicationController
  def new
    @order = Order.find params[:order_id]
end 
```

我的模型：

```
class Trimming
  include Mongoid::Document

  embedded_in :order

  field :percent, type: String

end 
```

这是我的整体观点：

```
<%= form_for @order do |f| %>
<p>
     <%= f.text_field :percent  %>  
</p>
<% end %> 
```

我只想让一个 text_field 显示对这个简单问题的抱歉，但我已经尝试了 2 天来让这个文本字段弹出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:43:22.080

您需要使百分比 attr_accessible。将此添加到您的模型中。

```
attr_accessible: :percent 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T04:38:54.637

使用以下代码检查它：
`<%= form_for :order do |f| %>
<%= f.text_field :percent %>
<% end %>`

# ubuntu-12.04 - iRedMail 电子邮件服务器在 ubuntu 中不工作

> ID：11678749
> 
> 赞同：1
> 
> 时间：2012-07-26T22:05:32.427
> 
> 标签：ubuntu-12.04, mail-server, linode

嗨，我已经在 Linode 服务器的 ubuntu 12.04 中安装了 iredmail-0.8.1 服务器。所以安装顺利，没有错误。安装后，当我尝试访问邮件服务器或 cpanel（http://fqdn.linode.com/mail/ 或[https://fqdn.linode.com/iredadmin/](https://fqdn.linode.com/iredadmin/)）页面根本没有加载。

谁能告诉我可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:17:02.060

我遇到了和你一样的问题。要解决此问题，您必须编辑“/etc/apache2/conf.d/roundcubemail.conf”并将条目编辑为：

```
<Directory "/usr/share/apache2/roundcubemail/">
    Options FollowSymLinks -Indexes
    DirectoryIndex index.php
</Directory> 
```

重新加载 apache 守护进程，一切顺利！

# javascript - javascript 问题后的 onblur 和 onfocus

> ID：11678751
> 
> 赞同：0
> 
> 时间：2012-07-26T22:05:45.620
> 
> 标签：javascript, jquery, html, asp.net-mvc

我有一个输入表格

```
<input id="txtSearch" class="txtSearch" name="SearchPhraseText" type="text"http value="<%= ServiceSite.Resources.Resources.SITEMATER_ENTER_SEARCH_TERM %>" onfocus="handleSearchFocus(this)" onblur="handleSearchBlur(this)" onkeypress="if (event.keyCode == 13 ) {search();}"/> 
```

当我在我的 javascript 中将以下内容添加到 $(document).ready 时。

```
if ( window.location.search.indexOf( "search" ) != -1){
    $('#txtSearch').val( "<%= Session["SearchPhrase"] %>"v);
} 
```

鉴于我在我的 javascript 中的其他地方有这个

```
 function handleSearchFocus(searchBox) {

        if ($(searchBox).val() == "<%= ServiceSite.Resources.Resources.SITEMATER_ENTER_SEARCH_TERM%>") {
           $(searchBox).val("");
           $(searchBox).css("color", "black");
        }

    }

    function handleSearchBlur(searchBox) {
        if ($(searchBox).val() == "" ) {
           $(searchBox).css("color", "gray");
           $(searchBox).val("<%= ServiceSite.Resources.Resources.SITEMATER_ENTER_SEARCH_TERM%>"); //should reference config file
        }

    } 
```

这两个处理焦点和模糊的函数不再起作用。当我单击输入框或单击离开时，它们不会运行。我想要做的是如果有一个应该显示的搜索值，显示它。如果不是，它遵循上面模糊/聚焦函数中的逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:30:45.083

[我尝试将您的代码放在此处](http://jsfiddle.net/t2djh/)的 jsFiddle 中，并在开发人员工具控制台中出现以下错误：

> 未捕获的 ReferenceError：未定义 handleSearchFocus
> 
> 未捕获的 ReferenceError：未定义 handleSearchBlur

请注意，我将 jsFiddle 设置为运行脚本`onLoad`，这就是我假设您正在使用代码执行的操作。

通常，您会运行代码`onLoad`，因为您需要完成所有元素的加载才能操作和抓取页面上的元素。在你的情况下，你需要相反的事情发生。您的元素是使用与您的函数相关联的事件`onfocus`创建的。`onblur`但是，这些功能尚不存在，因此无法触发。请注意，如果您将 jsFiddle 更改`onLoad`为`no wrap (body)`.

换句话说，**元素试图在功能可用之前找到它们**。

您需要将函数放在`<script>`正文中的标签中（在元素之后），或者将其附加到`$(document).ready`代码中的事件中，如下所示：

```
$('#txtSearch').focus(function () {
    // code here
});
$('#txtSearch').blur(handleSearchBlur); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:57:19.680

MrOBrian 在问题评论中发现了导致此问题的错误。

# scala - 从 Java #map 调用 Scala Monad

> ID：11678756
> 
> 赞同：8
> 
> 时间：2012-07-26T22:06:26.930
> 
> 标签：scala, scala-collections

我有一个 a 的实例，`scala.collection.immutable.List`我想调用`map`它的方法，但是来自 Java。

我需要提供一个`CanBuildFrom`.

我注意到许多 scala 集合伴随对象包含隐式`CanBuildFrom`实例，但我无法确定我需要使用哪一个。

这是我的Java代码：

```
 Function1<WeatherData, BigDecimal> mapper = new AbstractFunction1<WeatherData, BigDecimal>(){
        @Override
        public BigDecimal apply(WeatherData data) {
            return data.getTemps().reduce(adder).divide(new BigDecimal(data.getTemps().size()));
        }
    };

    scala.collection.immutable.List<WeatherData> data = ...

    data.map(mapper, ???); 
```

我应该传递什么作为 CanBuildFrom （第二个参数？）

PS 使用 Scala 2.10-M5

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T23:19:48.643

您实际上可以在 Java 中正确获取类型，而无需大惊小怪：

```
import scala.collection.Traversable;
import scala.collection.generic.CanBuildFrom;
import scala.collection.immutable.List;
import scala.collection.mutable.Builder;
import scala.runtime.AbstractFunction1;

public class ScalaMapTest {
  public static List<Integer> parseInts(List<String> xs) {
    final CanBuildFrom<List<?>, Integer, List<Integer>> builder =
      List.<Integer>canBuildFrom();

    return xs.map(
      new AbstractFunction1<String, Integer>() {
        public Integer apply(String s) {
          return Integer.parseInt(s);
        }
      },
      new CanBuildFrom<Traversable<String>, Integer, List<Integer>>() {
        public Builder<Integer, List<Integer>> apply() {
          return builder.apply();
        }

        public Builder<Integer, List<Integer>> apply(Traversable<String> from) {
          return builder.apply(from.toList());
        }
      }
    );
  }
} 
```

它仍然像罪恶一样丑陋，但它有效。问题是`CanBuildFrom`您从对象的`canBuildFrom`方法中获得的通配符`List`，但幸运的是您可以使用正确的类型创建自己的`CanBuildFrom`包装器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T23:08:55.987

如果您想知道 scalac 对代码的作用，请询问它。;)

这可以通过`scalac -Xprint:typer <file>`2.10 中的任一或新的反射 API 实现：

```
scala> import reflect.runtime.universe._
import reflect.runtime.universe._

scala> reify{List(1,2,3).map(_+1)}
res0: reflect.runtime.universe.Expr[List[Int]] = Expr[List[Int]](immutable.this.List.apply(1, 2, 3).map(((x$1) => x$1.$plus(1)))(immutable.this.List.canBuildFrom)) 
```

因此，`map`用这个打电话，`CanBuildFrom`一切正常。真的吗？不，它没有！问题是 Java 编译器愚蠢地推断`map`. 那么该怎么办？我相信唯一的方法是创造所需的价值，然后他们将它们扔掉。最后混合一些`SuppressWarnings-Annotations`，代码应该可以正常工作。;)

这就是我想出的：

```
import scala.Function1;
import scala.collection.generic.CanBuildFrom;
import scala.collection.immutable.List;
import scala.collection.immutable.List$;
import scala.runtime.AbstractFunction1;

public class JTest {
  @SuppressWarnings({"unchecked", "rawtypes"})
  public static void main(final String... args) {
    final List<Integer> xxx = (List) List$.MODULE$.apply(Predef.wrapIntArray(new int[] {1,2,3}));
    System.out.println(xxx);

    System.out.println(Test.sum(1, 2));
    final Abc abc = new Abc();
    System.out.println(abc.hello("simon"));

    final List<Integer> xs = (List) Test.xs();
    final Function1<Integer, String> mapper = new AbstractFunction1<Integer, String>() {
      @Override
      public String apply(final Integer i) {
        return String.valueOf(i);
      }
    };
    final CanBuildFrom<List<Integer>, String, List<String>> cbf =
        (CanBuildFrom) List.<Integer>canBuildFrom();
    final List<String> ys = xs.<String, List<String>>map(mapper, cbf);
    System.out.println(ys);
  }
} 
```

名单：

```
object Test {
  def xs = List(1,2,3)
} 
```

我相信，最好的办法是不要使用 Java 中的 Scala 代码。它看起来很丑。至少，将它包装在一些帮助类中，这样看到这段代码的人就不会想到对他的视网膜进行酸攻击。

顺便说一句，有时您必须查看字节码才能了解 scalac 如何创建值。如果要创建 Scala List is Java，则必须使用以下命令反编译代码`javap -c -s -l -verbose -private <classfile>`：

```
 0:   aload_0
   1:   invokespecial   #20; //Method java/lang/Object."<init>":()V
   4:   aload_0
   5:   putstatic   #22; //Field MODULE$:LX$;
   8:   aload_0
   9:   getstatic   #27; //Field scala/collection/immutable/List$.MODULE$:Lscala/collection/immutable/List$;
   12:  getstatic   #32; //Field scala/Predef$.MODULE$:Lscala/Predef$;
   15:  iconst_3
   16:  newarray int
   18:  dup
   19:  iconst_0
   20:  iconst_1
   21:  iastore
   22:  dup
   23:  iconst_1
   24:  iconst_2
   25:  iastore
   26:  dup
   27:  iconst_2
   28:  iconst_3
   29:  iastore
   30:  invokevirtual   #38; //Method scala/LowPriorityImplicits.wrapIntArray:([I)Lscala/collection/mutable/WrappedArray;
   33:  invokevirtual   #42; //Method scala/collection/immutable/List$.apply:(Lscala/collection/Seq;)Lscala/collection/immutable/List;
   36:  new #44; //class X$$anonfun$1 
```

或者在更易读的 Java 代码中：

```
@SuppressWarnings({"unchecked", "rawtypes"})
final List<Integer> xs = (List) List$.MODULE$.apply(Predef.wrapIntArray(new int[] {1,2,3})); 
```

# firebreath - 如何更改升压路径

> ID：11678758
> 
> 赞同：1
> 
> 时间：2012-07-26T22:06:35.860
> 
> 标签：firebreath

我想用 prep2010.cmd 重新创建我的 build/ 文件夹，并将 boost 文件夹设置为我自己的 boost 安装。

我跑：

```
prep2010.cmd -D WITH_SYSTEM_BOOST=1 -D BOOST_ROOT="c:\boost" 
```

但是当我打开插件解决方案时，boost 包含文件夹仍设置为 firebreath 的文件夹。我错过了什么吗？

谢谢，克里斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:33:47.127

原来我必须 Boost_USE_STATIC_RUNTIME=off 这样 findboost.cmake 才能匹配我的 boost 二进制文件。我的 boost 库使用共享运行时库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T17:48:50.150

尝试：

```
prep2010.cmd "-DWITH_SYSTEM_BOOST=1" "-DBOOST_ROOT=C:\boost" 
```

windows prep 脚本有点搞笑。我们无法弄清楚他们为什么这样做，但如果有人比我有更多的批处理文件经验想要修复它们，他们欢迎这样做=]

# xcode - 高分辨率图标作曲家

> ID：11678760
> 
> 赞同：1
> 
> 时间：2012-07-26T22:06:41.720
> 
> 标签：xcode, icons, high-resolution

Icon composer 在 Xcode 4.4 中被删除，Apple 现在希望我们使用

```
iconutil -c icns 
```

为 Mac 应用程序生成高分辨率图标。一般来说，我会设计一个 1024 像素的图标。

以前我可以将该图像拖放到图标编辑器中的每个框中，但现在我必须手动创建每种尺寸的图标。

有谁知道任何第三方应用程序或命令行工具会从 1024 px 文件生成所有图标和 icns？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T22:37:01.337

应用商店中有大约一百万个 0.99 美元的应用，但你也可以使用苹果命令行工具`sips`

我很久以前写了一个小脚本，可能会给你一个开始。

[http://blog.jcmultimedia.com.au/2011/02/a-simple-bash-script-to-automatically-create-your-ios-icon-png-files.html](http://blog.jcmultimedia.com.au/2011/02/a-simple-bash-script-to-automatically-create-your-ios-icon-png-files.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T23:38:33.213

您实际上仍然可以下载 Icon Composer。

转到[https://developer.apple.com/downloads/index.action](https://developer.apple.com/downloads/index.action)并搜索“图形工具”，您将看到几个*Xcode*磁盘映像的图形工具。抓住最新的，你应该在里面找到 Icon Composer。

# drupal-7 - drupal 7-关于更新字段的整数值并保持运行记录

> ID：11678762
> 
> 赞同：0
> 
> 时间：2012-07-26T22:06:58.853
> 
> 标签：drupal-7

我有一个网站，我想让用户编辑一个字段（整数类型，类似于里程表读数），当用户输入一个值时，Drupal 将计算最新值与输入值之间的差异在那里，并保持一个连续的记录。如果计数超过一定数量，另一个字段将填充状态（或数字），例如“需要维修”。我想我可以使用规则模块来解决其中的一些问题。不过，我不知道如何使用新值之前的值。我该怎么做，或者有更好的方法吗？

# html - Struts2 单选按钮自定义

> ID：11678766
> 
> 赞同：1
> 
> 时间：2012-07-26T22:07:19.160
> 
> 标签：html, struts2

我在 html 中有这个单选按钮

```
<input type="radio" name="group1" value="1"> Gray Scale<br>
</td>
</tr>
<tr><td align="left" valign="top" width="200">

<input type="radio" name="group1" value="2"> Old Style<br>

</td><td align="left" valign="top" width="200">

<input type="radio" name="group1" value="3"> Sharpening<br></td></tr> 
```

但是我使用这个 Struts 代码会给我一个没有大小和任何东西的地方 `<s:radio name="option" list="#{'1':'Gray Scale', '2':'Old Style','3':'Sharpening'}" value="1" />`

如何单独为 struts 2s 设置此单选按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T02:52:27.573

为了更清楚地说明 Struts2 已经很好地描述了什么`Pigueiras`，Struts2 使用主题概念为基于 Struts2 的标签呈现 HTML，并在内部使用 freemarker 模板为您生成 HTML。

开箱即用 S2 带有以下三个主题

1.  xhtml
2.  css_xhtml 主题
3.  简单的
4.  ajax（带有已弃用的 DOJO 标签）

默认情况下，S2 使用 xhtml 主题来呈现 HTML，并且在这个主题下它会生成某些表格来呈现视图。

它提供了一种自定义主题的方法，或者您可以定义自己的主题并控制 S2 生成 HTML 的方式。

查看以下文档以获取更多详细信息

1.  [struts-2-主题](http://struts.apache.org/2.3.1/docs/struts-2-themes.html)
2.  [主题和模板](http://struts.apache.org/2.3.1/docs/themes-and-templates.html)
3.  [创建主题](http://www.vitarara.org/cms/struts_2_cookbook/creating_a_theme)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:27:16.543

如果您想`<s:radio>`标记以完全按照您的需要呈现，您必须修改您正在使用的 Struts2 主题。

在这里，您有一个解决类似问题的人的示例：[Struts 2 How To Customize The Theme that Controls How A Struts 2 Tag Is Display in the Browser](http://www.brucephillips.name/blog/index.cfm/2010/8/10/Struts-2-How-To-Customize-The-Theme-That-Controls-How-A-Struts-2-Tag-Is-Displayed-In-The-Browser)

# objective-c - XCode RSS Feed 无法正确解析

> ID：11678768
> 
> 赞同：0
> 
> 时间：2012-07-26T22:07:22.343
> 
> 标签：objective-c, ios

我按照从旧的 StackOverflow 答案中获得的教程（我将在底部链接）将 RSS 提要解析为 UITableView。该教程有点过时，但只有少数方法被弃用，我用（我希望是）适当的更新方法替换了它们。但是，我遇到了一些麻烦，不是替换方法，而是解析器没有启动解析过程。有一些 NSLogs 散布在各处，以提供有关正在发生的事情的线索，并且我的解析器没有调用 parseDidStartDocument:，它只是在运行并返回最后两个 NSLogs（“全部完成！”和“故事数组有 %d 个项目” ）。如果有人可以看一下代码并告诉我为什么它没有解析，我将非常感激。如果您需要查看我的一些代码，请告诉我您的哪些部分

[http://gigaom.com/apple/tutorial-build-a-simple-rss-reader-for-iphone/](http://gigaom.com/apple/tutorial-build-a-simple-rss-reader-for-iphone/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T22:50:58.700

哦，那个教程已经过时了——写于 2008 年！

试试这个为 iOS5 编写的[教程。](http://www.codeliscious.com/?p=784)

# ios - OpenGL ES 2.0 中 gl_TexCoord 的对应物是什么

> ID：11678769
> 
> 赞同：7
> 
> 时间：2012-07-26T22:07:25.610
> 
> 标签：ios, opengl-es, fragment-shader

我有一个使用 gl_TexCoord 的 OpenGL 着色器，如下所示。但在 OpenGL ES 中，不支持 gl_TexCoord。我想知道我能做些什么来重构代码以使其在 OpenGL ES 上工作。

```
void main() 
{
    //scene depth calculation
    float depth = linearize(texture2D(inputImageTexture2,gl_TexCoord[0].xy).x);
    if (depthblur)
    {
        depth = linearize(bdepth(gl_TexCoord[0].xy));
    }

    ...
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T22:23:45.933

没有一个。您可以使用`varying`从顶点着色器传递的用户定义手动执行此操作。无论如何，这就是一切。您的片段着色器采用的逐顶点输出。

# java - Java ProcessBuilder 关闭系统错误

> ID：11678771
> 
> 赞同：0
> 
> 时间：2012-07-26T22:07:39.240
> 
> 标签：java, processbuilder

```
 ProcessBuilder pb;
 Process process;
 String command ="shutdown -s";
    try {
        pb = new ProcessBuilder("cmd.exe", "/C", command) 
        process = pb.start();
        process.waitFor();
        if (process.exitValue() == 0) {                  
            //success
        } else {
            //handle error
        }
    } catch (Exception e) {
        //handle error
    } 
```

当我尝试获取输入流并运行该代码块时，系统会进入无限循环。然后我如上所示更改了代码。但是，当我运行它时，它的退出值为 1 并且无法关闭系统。

有任何想法吗？

**PS：**我不想使用 java 运行时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:23:21.740

尝试：

```
pb = new ProcessBuilder("cmd.exe", "/C", "shutown", "-s"); 
```

构造函数 ProcessBuilder(String... command) 的参数命令每个都作为 1 个参数传递给可执行文件，这允许在参数中有空格。

您执行命令的方式相当于

`cmd /C "shutdown -s"`

因此“shutdown -s”被解释为单个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T06:23:48.613

命令应该是：

```
String command ="shutdown.exe -s"; 
```

代替：

```
String command ="shutdown -s"; 
```

# cakephp - cakephp 模型关联不起作用

> ID：11678774
> 
> 赞同：0
> 
> 时间：2012-07-26T22:07:59.463
> 
> 标签：cakephp, associations

我有表“帖子”和“用户”：

```
CREATE TABLE `posts` (
`id` int(11) unsigned NOT NULL auto_increment,
`name` varchar(255) default NULL,
`date` datetime default NULL,
`content` text,
`user_id` int(11) default NULL,
PRIMARY KEY (`id`)
);

CREATE TABLE `users` (
`id` int(11) unsigned NOT NULL auto_increment,
`name` varchar(100) default NULL,
`email` varchar(150) default NULL,
`firstname` varchar(60) default NULL,
`lastname` varchar(60) default NULL,
PRIMARY KEY (`id`)
); 
```

和模型类：

```
<?php
 class Post extends AppModel {
var $name = 'Post';
 var $belongsTo = array(
'User'=>array(

            'className'=>'User',
            'foreignKey'=>'user_id',
            'conditions'=>null,
            'fields'=>null)
 );
 }
 ?>

<?php
class User extends AppModel {
 var $name = 'User';
 var $hasMany = array('Post');

 }
?> 
```

我正在使用 var $scaffold 进行测试。但是，在我添加一些用户后，我只能在添加帖子页面中看到一个空的选择菜单，这意味着关联不起作用。我不知道我的代码有什么问题。请帮帮我。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T04:13:55.960

```
See the below url:-

http://book.cakephp.org/1.3/view/1042/belongsTo
http://book.cakephp.org/1.3/view/1043/hasMany

//Try This for belongsTo :--

<?php
class Profile extends AppModel {
    var $name = 'Profile';

    var $belongsTo = array(
        'User' => array(
                    'className' => 'User',
                    'foreignKey' => 'user_id'
                )
        );
    }
?>

Or

<?php
class Profile extends AppModel {
    var $name = 'Profile';

    var $belongsTo = array('User');
    }
?>

//For hasmany

<?php
    class User extends AppModel {
        var $name = 'User';
        var $hasMany = array(
            'Post' => array(
            'className' => 'Post',
            'foreignKey' => 'user_id',
            'conditions' => array('Comment.status' => '1'),
            'order' => 'Comment.created DESC',
            'limit' => '5',
            'dependent'=> true
        )
    );
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T00:28:16.810

我也是从 cakePHP 开始的，并且在我意识到“约定”要求模型文件名是 CamelCased 之前撞了一段时间。尝试使用：

```
Post.php
User.php 
```

否则，模型似乎完全被忽略了。

# objective-c - Xcode 4.4 中架构 x86_64 的未定义符号

> ID：11678776
> 
> 赞同：2
> 
> 时间：2012-07-26T22:08:05.167
> 
> 标签：objective-c, osx-mountain-lion, xcode4.4

我最近开始了一个在 Mountain Lion 上运行的 Xcode 4.4 新项目。我有一个名为 的类`TSTopChartManager`，它位于我项目的 MainMenu nib 中。我还有一个名为 的数据容器`PodcastShow`，它基本上有一堆属性和一个从 Internet 获取图像的方法。这`TSTopChartManger`看起来像......

.h 文件...

```
#import <Foundation/Foundation.h>
#import "PodcastShow.h"

@interface TSTopChartManager : NSObject

@property NSMutableArray *topPodcasts;
@end 
```

.m 文件：

```
#import "TSTopChartManager.h"

@implementation TSTopChartManager
-(id) init
{
    if (self)
    {
        /*PodcastShow *myShow = [[PodcastShow alloc] init];
        myShow.title = @"This is a show";*/
    }
    return self;
}
@end 
```

现在，它运行完美。但是当我像这样删除init方法中的块注释时......

```
if (self)
    {
        PodcastShow *myShow = [[PodcastShow alloc] init];
        myShow.title = @"This is a show";
    } 
```

我收到以下错误..

```
Undefined symbols for architecture x86_64:
  "_OBJC_CLASS_$_PodcastShow", referenced from:
      objc-class-ref in TSTopChartManager.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我不知道为什么会这样。我以前没有见过这样的错误。我将如何解决它？有任何想法吗？谢谢！

*对于好奇：* `PodcastShow`在我的应用程序中被视为数据容器。它有一些属性和两种方法。如下`PodcastShow`所示：

。H：

```
#import <Foundation/Foundation.h>

@interface PodcastShow : NSObject
{
    NSString *title;
    NSString *network;
    NSString *imageURL;
    NSImage *image;
    NSString *link;
    NSString *description;
}
-(void) fetch;
@property (strong, readwrite) NSString *title;
@property (strong, readwrite) NSString *network;
@property (strong, readwrite) NSString* imageURL;
@property (strong) NSImage *image;
@property (strong, readwrite) NSString *identification;
@property (strong, readwrite) NSString *link;
@property (strong, readwrite) NSString *description;
@end 
```

米：

```
#import "PodcastShow.h"

@implementation PodcastShow
-(id) init
{
    if (self)
    {
        NSLog(@"initilized");
    }
    return self;
}

-(void) fetch
{
    [NSThread detachNewThreadSelector:@selector(getImageFromInternet) toTarget:self withObject:nil];
}

-(void) getImageFromInternet
{
    self.image = [[NSImage alloc] initWithContentsOfURL:[NSURL URLWithString:self.imageURL]];
}
@end 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T22:13:01.403

可能`PodcastShow.m`不是构建阶段的一部分。在项目导航器中单击它，然后在文件信息中查看屏幕右侧。确保您的应用目标已勾选。

# c# - 如何读取 ASCII 值在 128-130 范围内的字符并将其转换为 int 值

> ID：11678778
> 
> 赞同：0
> 
> 时间：2012-07-26T22:08:25.260
> 
> 标签：c#, .net, encoding, ascii, extended-ascii

我有一个字符数组，其中一些是十进制的 ASCII 128 和 130。我试图将它们作为普通字符读取，但我得到的不是 128，而是 8218 作为 int（转换为字节，得到 26）。我需要得到 128 到 130 之间的数字。我发现了一些关于 Encodings 的文章，有人说我需要使用 Encoding 439。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T22:44:21.427

CLR 环境中的 char (System.Char) 是一个无符号的 16 位数字，一个 UTF-16[代码单元](http://unicode.org/glossary/#code_unit)。来自[Unicode 标准，第 3 章，第 3.9 节](http://www.unicode.org/versions/Unicode6.1.0/ch03.pdf)：

> *代码单元：*可以表示用于处理或交换的编码文本单元的最小位组合。
> 
> *   代码单元是计算机存储的特定单元。其他字符编码标准通常使用定义为 8 位单元的代码单元，即八位字节。Unicode 标准使用 UTF-8 编码形式的 8 位代码单元、UTF-16 编码形式的 16 位代码单元和 UTF-32 编码形式的 32 位代码单元。
>     
>     
> *   码元在信息产业中也称为码值。
>     
>     
> *   在 Unicode 标准中，某些代码单元的特定值不能单独用于表示一个编码字符。此限制适用于 UTF-16 中的独立代理代码单元和 UTF-8 中的字节 80–FF。类似的限制适用于其他字符编码标准的实现；例如，SJIS (Shift-JIS) 中的字节 81–9F、E0–FC 本身不能表示编码字符。

一旦进入 CLR 世界，您的“ASCII”文本就不再是 ASCII。ASCII 是一种 7 位编码，为了兼容性，所有 Unicode 编码（UTF-8、-16、-24、-32）都保留了代码点 0x00–0x7F。在非 Unicode 世界中，0x80–0xFF 总是有多个字符映射（甚至不看 EBCDIC*与*ASCII）。还为奇偶校验提供了一些 ASCII 实现：将设置高位以保持所需的奇偶校验。

*   **甚至平价。**设置高位以在八位字节中保持偶数个“on”位。
*   **奇偶校验。**设置高位以在八位字节中保持奇数个“on”位。
*   **没有平价。**永远不会设置高位。

大概您正在使用 UTF-8 编码器/解码器（CLR 默认值）读取“ASCII”文本。要在字符中获得您期望的数值，您需要使用适合您的文本实际编码的编码/解码器来读取文本（Windows 1252？其他？）。

也许对您来说更好的方法是将八位字节的文本读取为二进制，使用`System.IO.FileStream`, 而不是`System.IO.TextReader`及其奴才。然后你得到了原始八位字节，你可以根据需要将它们转换为文本，或者对原始八位字节值进行数学运算。

# java - Java 转换：char[] 数组 --> 字符串

> ID：11678779
> 
> 赞同：12
> 
> 时间：2012-07-26T22:08:44.060
> 
> 标签：java, string, char

如何将字符数组转换为字符串？
我有这个代码

```
Console c = System.console();
if (c == null) {
    System.err.println("No console.");
    System.exit(1);
}
char [] password = c.readPassword("Enter your password: "); 
```

我需要将其转换为字符串，以便验证

```
if(stringPassword == "Password"){
    System.out.println("Valid");
} 
```

谁能帮我这个？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-26T22:10:06.687

使用`String(char[])`构造函数。

```
char [] password = c.readPassword("Enter your password: ");
String stringPassword = new String(password); 
```

当你比较时，不要使用`==`，使用`.equals()：

```
if(stringPassword.equals("Password")){ 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-26T22:12:01.373

你会想`new String`从`char[]`. 然后你会想使用`.equals()`方法来比较它们，而不是`==`.

所以而不是

```
if(stringPassword == "Password"){ 
```

你得到

```
if("password".equals(new String(stringPassword))) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-04T04:44:17.440

尽管效率不高，但您始终可以使用 for 循环：

```
char [] password = c.readPassword("Enter your password: ");
String str = "";

for(i = 0; i < password.length(); i++){
    str += password[i];
} 
```

这是一种非常简单的方法，不需要事先了解标准库中的函数/类！

# ios - 是否可以在没有原始私钥的情况下发布对 iOS 应用程序的更新？

> ID：11678784
> 
> 赞同：0
> 
> 时间：2012-07-26T22:09:15.627
> 
> 标签：ios

如果第一次用于签署应用程序的原始私钥丢失，是否可以更新 iOS App Store 中的实时应用程序？撤销当前的分发证书并根据新生成的密钥对创建新的证书会有什么后果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T22:11:16.970

您将需要私钥，但是是的，您可以撤销证书并使用新的密钥对创建一个新证书。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T22:12:24.680

是的，我必须这样做，一旦你所要做的就是撤销它并使用新的。

# iphone - iPhone 链接器错误：命令 /usr/sbin/chown 失败，退出代码为 1

> ID：11678787
> 
> 赞同：0
> 
> 时间：2012-07-26T22:09:29.540
> 
> 标签：iphone, linker

当我尝试归档我的应用程序时出现链接错误。错误的简要描述是

```
`Command /usr/sbin/chown failed with exit code 1` 
```

详细说明是

```
SetOwnerAndGroup "r499908:US-ADdomain" users /Users/r499908/Library/Developer/Xcode/DerivedData/W-akvlnuynzzkjqwcmnnsmrpjpgqfs/ArchiveIntermediates/Advisor/InstallationBuildProductsLocation/Applications/W.app
    cd /Users/r499908/Desktop/Projects/JPMorganFunds-Advisor-1.4
    setenv PATH "/xcode4-gm/Platforms/iPhoneOS.platform/Developer/usr/bin:/xcode4-gm/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /usr/sbin/chown -RH "r499908:US-AD\\domain users" /Users/r499908/Library/Developer/Xcode/DerivedData/W-akvlnuynzzkjqwcmnnsmrpjpgqfs/ArchiveIntermediates/Advisor/InstallationBuildProductsLocation/Applications/W.app

chown: US-AD\domain users: Invalid argument
Command /usr/sbin/chown failed with exit code 1 
```

这是因为 US-AD\domain 有一个反斜杠而不是前斜杠吗？如果是，我该如何纠正？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T22:18:09.713

问题是反斜杠。

通过搜索 US-AD\ 并将其更改为 admin 来解决

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T02:53:57.713

将安装组更改为管理员对我有用

# php - PHP：将数字设置为关联数组中的键

> ID：11678790
> 
> 赞同：3
> 
> 时间：2012-07-26T22:09:54.463
> 
> 标签：php, arrays, json

我正在尝试为客户端从数据库重新创建 json。不幸的是，json 中的一些键是数字，在 javascript 中可以正常工作，但结果 PHP 一直将它们视为数字而不是关联数组。每个键用于一个文档。让我演示给你看：

PHP：

```
 $jsonobj;
  while ($row = mysql_fetch_assoc($ms)) {

            $key = strval($row["localcardid"]);
            $jsonobj[$key] = json_decode($row["json"]);
    }
    // $jsonobj ist still a numeric array
    echo json_encode($jsonobj); 
```

生成的 json 应如下所示：

```
{
  "0": {
    "terd": "10",
    "id": 0,
    "text": "",
    "pos": 1,
    "type": 0,
    "divs": [
        {},
        {}
    ],
    "front": 1
 }
"1": {
     "terd": "10",
    "id": 0,
    "text": "",
    "pos": 1,
    "type": 0,
    "divs": [
        {},
        {}
    ],
    "front": 1
  }
} 
```

一个明显的解决方案是保存整个 json 而不会拆分。然而，关于分贝这似乎并不明智。我希望能够单独访问每个文档。使用

```
 $jsonobj = array ($key => json_decode($row["json"])); 
```

显然有效，但不幸的是只有一个键......

**编辑：为了澄清*** 在 php 中：有区别

```
array("a", "b", "c") 
```

和

```
 array ("1" => "a", "2" => "b", "3" => "c"). 
```

后者，当这样做时 $array["1"] = "a" 导致**array("a")**而不是**array("1" => "a")**

**[在这里](https://stackoverflow.com/questions/4100488/a-numeric-string-as-array-key-in-php "HERE")回答**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T22:13:38.700

尝试

```
echo json_encode((object)$jsonobj); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T22:37:13.233

我相信如果您通过该`JSON_FORCE_OBJECT`选项，它应该像您想要的那样输出带有数字索引的对象：

```
$obj = json_encode($jsonObj, JSON_FORCE_OBJECT); 
```

例子：

```
$array = array();

$array[0] = array('test' => 'yes', 'div' => 'first', 'span' => 'no');
$array[1] = array('test' => 'no', 'div' => 'second', 'span' => 'no');
$array[2] = array('test' => 'maybe', 'div' => 'third', 'span' => 'yes');

$obj = json_encode($array, JSON_FORCE_OBJECT);
echo $obj; 
```

输出：

```
{
    "0": {
        "test": "yes",
        "div": "first",
        "span": "no"
    },
    "1": {
        "test": "no",
        "div": "second",
        "span": "no"
    },
    "2": {
        "test": "maybe",
        "div": "third",
        "span": "yes"
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T22:15:59.490

只需将*两者*保存在数据库中的单个条目中：单独的字段值和整个 json 结构在单独的列中。这样，您可以通过单个字段进行搜索，并且仍然可以获得有效的 json 结构以便于处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-22T11:29:58.117

要将数字设置为关联数组中的键，我们可以使用以下代码

```
$arr=array(); //declare array variable
$arr[121]='Item1';//assign Value
$arr[457]='Item2';
.
.
.
print_r($arr);//print value 
```

# c++ - 将 VB.NET 转换为 libCURL - 如何检查发送的内容

> ID：11678791
> 
> 赞同：0
> 
> 时间：2012-07-26T22:10:04.437
> 
> 标签：c++, vb.net, libcurl

全部，我在 ASP 中有以下代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <div>
    <form id="Form2" Method="Post" EncType="Multipart/Form-Data" RunAt="Server">

   <%-- The File upload Html control --%>
   Choose Your File  To Upload <BR>
   <Input Name="MyFile" id="MyFile" Type="File" RunAt="Server">
   <BR>

   <%-- A button - when clicked the form is submitted and the
            Upload_Click event handler is fired... --%>
   <Input id="Submit1" Type="Submit" Value="Upload"
             RunAt="Server">

    </form> </div>
</body>
</html> 
```

以及客户端VB.NET中的以下算法：

1.  将内容类型设置为“multipart/form-data;boundary=---------------------------”+时间戳
2.  写“\n\r--------------”+时间戳+“\n\r”
3.  写入 "Content-Disposition: form-data; name="MyFile"; filename="12345.bmp"\r\nContent-Type: image/bitmap\r\n\r\n"
4.  发布“12345.bmp”的内容

我正在尝试使用 libCURL 将其转换为 C++。

这是我所做的：

```
 wxString header = wxString::Format( "Content-Disposition: form-data;
name=\"MyFile\"; filename=\"%s\"", fileName );
        post = curl_slist_append( post, "Content-Type: multipart/form-data;
boundary=---------------------------12345" );
        post = curl_slist_append( post, header.c_str() );
        if( !post )
        {
                return;
        }
        post = curl_slist_append( post, "Content-Type: image/bitmap" );
        if( !post )
        {
                curl_slist_free_all( post );
                return;
        }
        result = curl_formadd( &first, &last, CURLFORM_COPYNAME, "name",
CURLFORM_FILE, (const char *) fileName.c_str(), CURLFORM_END );
        result = curl_formadd( &first, &last, CURLFORM_COPYNAME, "filename",
CURLFORM_COPYCONTENTS, (const char *) fileName.c_str(),
CURLFORM_CONTENTHEADER, post, CURLFORM_END );
        result = curl_formadd(&first,  &last, CURLFORM_COPYNAME, "submit",
CURLFORM_COPYCONTENTS, "send", CURLFORM_END );
        if( result )
        {
                curl_slist_free_all( post );
                curl_formfree( first );
                return;
        }
        FILE *fp = fopen( "session.log", "w+" );
        if( !fp )
        {
                curl_slist_free_all( post );
                curl_formfree( first );
                return;
        }
        curl_easy_setopt( handle, CURLOPT_VERBOSE, 1L );
        curl_easy_setopt( handle, CURLOPT_HEADER, 1L );
        curl_easy_setopt( handle, CURLOPT_STDERR, fp );
        curl_easy_setopt( handle, CURLOPT_ERRORBUFFER, errorMsg );
        curl_easy_setopt( handle, CURLOPT_URL, "http://xxx.xxx.xxx.xxx/Default.aspx" );
        curl_easy_setopt( handle, CURLOPT_HTTPPOST, first );
        error = curl_easy_perform( handle );
        if( !error )
        {
                curl_slist_free_all( post );
                curl_formfree( first );
                return;
        }
        curl_slist_free_all( post );
        curl_formfree( first );
        curl_easy_setopt( handle, CURLOPT_HTTPPOST, NULL );
        curl_easy_setopt( handle, CURLOPT_HTTPHEADER, NULL ); 
```

但不幸的是，它失败了。人们在 Windows 上使用什么来检查数据包的发送方式？或者也许有人可以在我的代码转换中发现问题？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:16:11.370

不确定，但通过阅读 wxString 文档，我想知道是否

```
wxString header = wxString::Format( "Content-Disposition: form-data;
name=\"MyFile\"; filename=\"%s\"", fileName ); 
```

不应该

```
wxString header = wxString::Format( "Content-Disposition: form-data;
name=\"MyFile\"; filename=\"%s\"", fileName.c_str() ); 
```

希望这可以帮助。

# android - 如何在运行时为 Android UI 组件注册 EventListener

> ID：11678793
> 
> 赞同：0
> 
> 时间：2012-07-26T22:10:23.190
> 
> 标签：android, event-listener, android-testing

我正在为一堆 Android 应用程序编写测试程序。我计划首先在屏幕上获取所有视图对象（不是 ViewGroup 的实例），然后针对它们触发事件（通过 robotium 或 sdk 提供的方法）。问题是，我不知道向这些视图对象注册了哪种 EventListener。[我尝试对所有这些对象触发 CLICK，但是对于 LongCLICK、flip、doubletap等](http://developer.android.com/reference/android/view/GestureDetector.SimpleOnGestureListener.html)还有很多其他的事件处理程序。那么无论如何我可以在运行时为Android UI组件注册EventListener吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:03:20.467

您看过 Android SDK 附带的 Hierarchy Viewer 工具吗？我认为 Hierarchy Viewer 提供了这些信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T05:55:34.923

嗨，大卫，您可以为按钮使用侦听器是 setOnClickListener()。但是，如果您想要 CheckBox 的侦听器，您可以使用 setOnCheckedChangeListener()/setOnClickListener() 来识别 CheckBox 的状态。同样，您必须根据您的要求/用例为 View 实现侦听器。如果要为按钮实现监听器，可以通过以下方式进行。

```
 Button b= (Button)findViewById(R.id.yourBtnName);
 b.setOnClickListener(BtnListener);

 private OnClickListener  BtnListener = new OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        // Here you can perform your stuff
   }
  } 
```

# c# - c#哪里可以找到System.Windows.Controls.dll

> ID：11678794
> 
> 赞同：6
> 
> 时间：2012-07-26T22:10:26.823
> 
> 标签：c#, visual-studio-2010, dll

我的 dll 文件有问题，并且有需要此文件 System.Windows.Controls.dll 的项目

```
listBox1.ItemsSource 
```

错误修复，并使用此 dll 添加引用以修复错误。我在哪里可以找到这个dll文件？有下载链接吗？请分享！谢谢 ！

在“添加参考”中它不存在！

解决方法：http: [//download.microsoft.com/download/7/7/6/776875B7-AD81-44D4-AA47-648D1BCB097E/silverlight_sdk.exe](http://download.microsoft.com/download/7/7/6/776875B7-AD81-44D4-AA47-648D1BCB097E/silverlight_sdk.exe)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-09-03T17:49:48.310

以下是步骤：

1.  右键单击（解决方案资源管理器`References`在`Solutions Explorer`您的 IDE 右侧）
2.  选择`Add Reference`
3.  在打开的窗口中，选择`Assemblies > Framework`
4.  选中`PresentationFramework`组件框，然后单击确定

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-26T22:17:38.153

这应该在 PresentationFramework.dll 中，但该控件在 System.Windows.Controls 命名空间中。

[http://msdn.microsoft.com/en-us/library/system.windows.controls.listbox.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.listbox.aspx)

您可以通过转到您的项目来添加它，右键单击 References > Add Reference > .Net Tab > 然后选择这个 DLL

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-20T13:50:54.100

我可以通过在我的计算机上搜索“System.Windows.Controls.dll”来找到 dll 文件。我在以下文件位置找到它...“C:\Program Files (x86)\Microsoft SDKs\Silverlight\v3.0\Libraries\Client\System.Windows.Controls.dll”

希望这可以帮助！

# xcode - 在助理编辑器中转到下一个“呼叫者”的 Xcode 快捷方式？

> ID：11678795
> 
> 赞同：10
> 
> 时间：2012-07-26T22:10:30.590
> 
> 标签：xcode, xcode4.4

如果您在主编辑器中突出显示函数名称，然后在辅助编辑器中选择“调用者”，您可以查看调用突出显示的函数的位置。

助手编辑器顶部有左右箭头，可让您跳转到调用函数的上一个/下一个位置。这些有键盘快捷键吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T09:52:46.673

我认为你需要的捷径是：

control+option+command+j 是“在助手编辑器中跳转到定义”

control+command+left/right 是“后退/前进”

您可以在 Xcode->Preference->Key Bindings 上查看并设置所有快捷方式

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-29T12:17:04.360

*据我所知， Callers*助手编辑器顶部的左/右箭头没有快捷方式（至少在 Xcode 5 中没有）。

我发现的下一个最好的方法是使用`Command`+`J`跳转到*呼叫者*助理编辑器，然后使用`Ctrl`+`5`选择要显示的呼叫者。

# python - 如何从 Django 查询集中检索值？

> ID：11678797
> 
> 赞同：8
> 
> 时间：2012-07-26T22:10:44.760
> 
> 标签：python, django

我想知道如何从名为“my_movie_code_count”的变量中获取模板中的值：

```
my_movie_code_count = Code.objects.values('movie__title').annotate(Count('movie')) 
```

如果我对控制台执行 pprint，我会得到：

```
for m in my_movie_code_count:
    pprint.pprint(m) 
```

**控制台输出：**

```
{'movie__count': 1, 'movie__title': u'THE MEN WHO STARE AT GOATS'}
{'movie__count': 3, 'movie__title': u'PIRATE RADIO'}
{'movie__count': 1, 'movie__title': u'A SERIOUS MAN'}
{'movie__count': 3, 'movie__title': u'GREENBERG'}
{'movie__count': 1, 'movie__title': u'MILK'}
{'movie__count': 1, 'movie__title': u'TEST'} 
```

**模板：（目前它不显示任何输出。）**

```
 {% for movie in my_movie_code_count %}
    {{movie.title}}:{{movie.count}}
    {% endfor %} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T22:15:37.750

`my_movie_code_count[0].movie__count`现在我知道这不是完全想要的，所以你可以在注释中添加一个名称：

```
my_movie_code_count = Code.objects.values('movie__title').annotate(num=Count('movie'))
print my_movie_code_count[0].num
1 
```

你可以在这里查看文档：[https ://docs.djangoproject.com/en/dev/ref/models/querysets/#annotate](https://docs.djangoproject.com/en/dev/ref/models/querysets/#annotate)

它也没有显示任何内容，因为 django 在模板上静默失败（因此设计者不会破坏整个页面）。如果您检查属性，它们的名称是`movie__title`，`movie__count`因此您必须将模板属性更改为：

```
{{ movie.movie__title }}: {{ movie.movie__count }} 
```

# java - GAE - 使用枚举字段和“包含”运算符过滤数据时 JDO 查询失败

> ID：11678803
> 
> 赞同：1
> 
> 时间：2012-07-26T22:11:19.417
> 
> 标签：java, google-app-engine, jdo, contains

我在 Datastore 实体类中使用 Enum 字段。

```
public enum MyEnum{
  A(0x9001L),
  B(0x9002L),
  C(0x9003L),
  D(0x9004L),
  private long value;
  private MyEnum(long value) {
    this.value = value;
  }
}; 
```

实体

```
@PersistenceCapable
public class Log implements Serializable, Comparable<Object>, Cacheable {

    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    private Long id;

    @Persistent
    private MyEnum myEnumVariable;  
} 
```

当我通过仅过滤一种枚举类型进行查询时

```
declareParams.append(",Long myEnumVariable");
filterQuery.append(" this.myEnumVariable == myEnumVariable"); 
```

..然后代码工作正常。

但是当我进行查询以过滤多个枚举时

```
declareParams.append(",List myEnumList");
filterQuery.append(" myEnumList.contains(this.myEnumVariable )"); 
```

我收到一条错误消息 -

> java.lang.IllegalArgumentException: MyEnum : com.xxx.xxx.MyEnum 不是受支持的属性类型。在 com.google.appengine.api.datastore.DataTypeUtils.checkSupportedSingleValue(DataTypeUtils.java:184) 在 com.google.appengine.api.datastore.DataTypeUtils.checkSupportedValue(DataTypeUtils.java:149) 在 com.google.appengine.api .datastore.Query$FilterPredicate.(Query.java:619) 在 com.google.appengine.api.datastore.Query.addFilter(Query.java:261) 在 org.datanucleus.store.appengine.query.DatastoreQuery.addLeftPrimaryExpression( DatastoreQuery.java:1343) 在 org.datanucleus.store.appengine.query.DatastoreQuery.addExpression(DatastoreQuery.java:1070) 在 org.datanucleus.store.appengine.query.DatastoreQuery.addExpression(DatastoreQuery.java:1054) 在 org .datanucleus.store.appengine.query.DatastoreQuery。

注意：对象“myEnumList”是“MyEnum”类型元素的集合。当我使用“长”类型元素列表时，我看不到错误，但返回空结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T12:29:39.197

目前你可以通过引用来解决它，比如

```
filterQuery.append(" this.myEnumVariable == 'myEnumVariable'"); 
```

它对我有用。

# php - 使用 childNodes() 捕获元素 - 简单的 HTML DOM？

> ID：11678808
> 
> 赞同：0
> 
> 时间：2012-07-26T22:12:20.280
> 
> 标签：php, html-parsing, simple-html-dom

我使用 Simple HTML DOM 来捕获来自其他站点的动态内容。因为内容是动态的，所以它总是处于不同的位置。我正在尝试**childNodes()**。它有效，但前提是我知道元素的位置。

内容在 5 到 15 个元素之间变化。我对 PHP 很弱，所以我正在考虑循环改变元素的数量，然后如果成功获取**id**，将其带出循环并将元素插入**DB**。我不知道这是否是正确的方法，但我无法将**id**带出循环。**有什么办法吗？**

***这是我的代码：***

```
 foreach($html->find('.article') as $e) // Get Other Part of the Description
    {               
        for($i = 7; $i < 20; $i++)
        {

              $details_download=$e->childNodes($i); 

        }

   } 
```

# c# - 获取/设置注册表 ACL“SeSecurityPrivilege”时出现 C# 随机异常

> ID：11678810
> 
> 赞同：1
> 
> 时间：2012-07-26T22:12:21.060
> 
> 标签：c#, .net, exception, permissions, registry

我遇到了一个完全随机的异常，我可以运行同一组代码 1000 次（每次“运行”都是程序的完整结束，因此从命令行作为自己的进程开始，然后存在）并得到它失败一次，甚至150次。我的意思是我可以一遍又一遍地运行它，它会完全随机地失败。

```
System.Security.AccessControl.PrivilegeNotHeldException: The process does not possess the 'SeSecurityPrivilege' privilege which is required for this operation.
at System.Security.AccessControl.Win32.GetSecurityInfo(ResourceType resourceType, String name, SafeHandle handle, AccessControlSections accessControlSections, RawSecurityDescriptor& resultSd)
at System.Security.AccessControl.NativeObjectSecurity.CreateInternal(ResourceType resourceType, Boolean isContainer, String name, SafeHandle handle, AccessControlSections includeSections, Boolean createByName, ExceptionFromErrorCode exceptionFromErrorCode, Object exceptionContext)
at System.Security.AccessControl.RegistrySecurity..ctor(SafeRegistryHandle hKey, String name, AccessControlSections includeSections) 
at Microsoft.Win32.RegistryKey.GetAccessControl(AccessControlSections includeSections) 
```

调试时我无法让它失败，所以在尝试查看它随机决定失败的原因时遇到了问题。由于它在`(RegistryKey).GetAccessControl(AccessControlSections.All)`方法内部失败，我对接下来应该尝试什么感到困惑。

另外，我正在循环多个键，如果它决定在一个上出现此权限异常而失败，那么它们都将在该过程中失败。

我从命令行运行（作为管理员，UACed），启动进程，然后它就存在了。从同一命令行我再次启动该过程，它会随机失败。

我正在加载用户配置单元并确保提升了注册表权限，并且除了这个随机错误之外它可以正常工作。

此外，在系统 (psexec) 和管理员帐户下的多台计算机（始终在本地运行，而不是远程运行）上都会出现此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T02:10:11.993

我不认为系统帐户启用了 SeSecurityPrivilege，也没有启用管理员。

而不是`(RegistryKey).GetAccessControl(AccessControlSections.All)`，尝试：`(RegistryKey).GetAccessControl(AccessControlSections.Access)`

那仍然给你错误吗？但是，您将无法获得 SACL `Access`。

编辑：我从 pinvoke 获取了一些代码来调整访问令牌中的权限，你需要管理员权限才能做到这一点；我为 SeSecurityPrivilege 修改了它，您现在应该可以使用`(RegistryKey).GetAccessControl(AccessControlSections.All)`“SetPriv();”而不会出现任何错误 叫做。我能够通过使用 Process Hacker 2 并在之前和之后检查令牌来验证它是否正在工作，它正在启用 SeSecuirtyPrivilege：

```
 [DllImport("advapi32.dll", ExactSpelling = true, SetLastError = true)]
    internal static extern bool AdjustTokenPrivileges(IntPtr htok, bool disall, ref TokPriv1Luid newst, int len, IntPtr prev, IntPtr relen);

    [DllImport("kernel32.dll", ExactSpelling = true)]
    internal static extern IntPtr GetCurrentProcess();

    [DllImport("advapi32.dll", ExactSpelling = true, SetLastError = true)]
    internal static extern bool OpenProcessToken(IntPtr h, int acc, ref IntPtr
    phtok);

    [DllImport("advapi32.dll", SetLastError = true)]
    internal static extern bool LookupPrivilegeValue(string host, string name,
    ref long pluid);

    [StructLayout(LayoutKind.Sequential, Pack = 1)]
    internal struct TokPriv1Luid
    {
        public int Count;
        public long Luid;
        public int Attr;
    }

    internal const int SE_PRIVILEGE_ENABLED = 0x00000002;
    internal const int TOKEN_QUERY = 0x00000008;
    internal const int TOKEN_ADJUST_PRIVILEGES = 0x00000020;
    internal const string SeSecurity = "SeSecurityPrivilege";

    private bool SetPriv()
   {
       try
       {
           bool retVal;
           TokPriv1Luid tp;
           IntPtr hproc = GetCurrentProcess();
           IntPtr htok = IntPtr.Zero;
           retVal = OpenProcessToken(hproc, TOKEN_ADJUST_PRIVILEGES | TOKEN_QUERY, ref htok);
           tp.Count = 1;
           tp.Luid = 0;
           tp.Attr = SE_PRIVILEGE_ENABLED;
           retVal = LookupPrivilegeValue(null, SeSecurity, ref tp.Luid);
           retVal = AdjustTokenPrivileges(htok, false, ref tp, 0, IntPtr.Zero, IntPtr.Zero);
           return retVal;
       }
       catch (Exception ex)
       {
           throw;
           return false; 
       }

   } 
```

# plone - 在克隆中安装 cmfbibliography

> ID：11678817
> 
> 赞同：0
> 
> 时间：2012-07-26T22:12:46.783
> 
> 标签：plone, bibliography

我正在使用 plone 4.2 并想使用产品 CMFBibliographyAT。运行命令 buildout 后，我​​收到很多关于“'return' external function”的错误消息。当命令退出时，它会打印：

```
*************** PICKED VERSIONS ****************
[versions]
Products.ATExtensions = 1.0
Products.CMFBibliographyAT = 1.1.2
bibliograph.core = 1.0.3
bibliograph.parsing = 1.0.1
bibliograph.rendering = 1.0.2
psycopg2 = 2.4.5
pyisbn = 0.6.0
*************** /PICKED VERSIONS *************** 
```

当我进入 zope 界面时，我可以看到这些原型：

```
CMFBibliographyAT::LargeBibliographyFolder Uninstall
CMFBibliographyAT::DuplicatesBibliographyFolder Uninstall
CMFBibliographyAT::BibliographyFolder Uninstall 
```

但是，当我尝试添加一些内容时，没有参考书目。

任何想法为什么我可以使用这个产品？

佩德罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:48:04.490

您实际上并没有收到错误，您的构建完成得很好。

安装 egg 时，所有`.py`文件都会被编译为`.pyc`缓存的字节码文件。但是，Plone 皮肤层中的 Python 脚本文件是一种特殊形式的 Python，它被视为函数，并且对它们进行字节编译总是失败。*这是一个副作用，可以忽略*，请参阅[Buildout and Syntax Errors](http://collective-docs.readthedocs.org/en/latest/troubleshooting/buildout.html#buildout-and-syntaxerrors)。

统一安装程序构建配置已设置为通知您构建是否必须为您选择版本（如果没有明确固定到一个版本）。

您看到的输出会告诉您它选择的确切版本，您可以重新使用该输出来自己设置引脚。找到该文件`versions.cfg`并在该文件中的块下方添加行，在您将在该文件中找到`[versions]`的同一部分下方。`[versions]`

有关此类版本固定和其他构建问题的更多信息，请参阅：

*   [简版钉钉教程](https://weblion.psu.edu/trac/weblion/wiki/VersionPinning)
*   [构建故障排除手册](http://collective-docs.readthedocs.org/en/latest/troubleshooting/buildout.html#buildout-troubleshooting)
*   统一[安装程序手册](http://plone.org/documentation/manual/installing-plone)

如果您在运行 Zope 实例时确实遇到了这些包的问题并出现错误，错误将被记录到控制台（在前台模式下运行时）或错误日志。有关故障排除的帮助，请参阅[添加产品安装失败。](http://plone.org/documentation/kb/diagnosing-third-party-product-installation-problems)

# android - Android，如何添加我的应用程序以在用户单击电子邮件地址时出现

> ID：11678820
> 
> 赞同：1
> 
> 时间：2012-07-26T22:13:25.380
> 
> 标签：android, email, drop-down-menu

使用 Android，当我在默认浏览器中单击电子邮件地址时，会弹出一个菜单列表，其中包含 Gmail（内置电子邮件客户端）和 K-9（另一个电子邮件应用程序）。

我想将我的 android 应用程序添加到此列表中。这可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T22:22:40.157

您需要创建一个`IntentFilter`这需要 Java 代码，您可以在其中创建一个`Activity`当系统通知某人正在尝试发送电子邮件时触发的，并更改`AndroidManifest`您订阅该`Intent`操作的位置。这是一个 SO 帖子，解释了您需要哪些意图过滤器：[android intent-filter to listen for sent email addresses?](https://stackoverflow.com/questions/6796059/android-intent-filter-to-listen-for-sent-email-addresses)

您将这些添加到您的`Activity`条目中`AndroidManifest`，然后当有人单击电子邮件时，它将显示您的应用程序。当有人点击它时，它会打开`Activity`你想要阅读的关于从意图中提取数据的特定内容。具体来说，您需要从附加组件中提取：http: [//developer.android.com/reference/android/content/Intent.html#EXTRA_EMAIL 。](http://developer.android.com/reference/android/content/Intent.html#EXTRA_EMAIL)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T23:38:02.017

在清单中将此意图过滤器添加到您的活动中：

```
 <intent-filter>
            <action android:name="android.intent.action.SENDTO" />
            <data android:scheme="mailto" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.SEND" />
            <data android:mimeType="*/*" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.SEND_MULTIPLE" />
            <data android:mimeType="*/*" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <data android:scheme="mailto" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
        </intent-filter> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T22:35:34.050

在此处阅读有关意图过滤器的信息：
[https ://developer.android.com/training/sharing/receive.html](https://developer.android.com/training/sharing/receive.html)

# objective-c - ARC 禁止合成具有未指定所有权等的属性，但仅适用于我

> ID：11678822
> 
> 赞同：0
> 
> 时间：2012-07-26T22:13:35.230
> 
> 标签：objective-c, cocoa, memory-management, automatic-ref-counting, synthesize

我正在与一群人在 github 上开发 iPhone。我很晚才加入项目，今天才开始。我无法构建我觉得非常烦人的项目。原因是 Arc 禁止合成具有未指定所有权或存储属性的objective-c 对象的属性。有 8 个类似这样的错误阻止了构建，当我修复错误时，超过 300 个警告变成了错误，即如果我要修复 8 个错误中的 3 个，则 300 个警告中的 3 个会将它们替换为错误。因此，虽然我可以在整个项目中为所有这些许多属性添加弱或强，但它会有点乏味，我不完全确定它对项目有好处。与我一起工作的其他人对我有错误并且能够构建它感到惊讶。我的问题是他们怎么能建造它？是否有某个设置将默认值从分配更改为强或其他？在此先感谢，这让我发疯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T12:29:02.833

对于后代，这个问题在 Xcode 4.4 中得到解决。

# facebook-graph-api - 通过 Graph 发布链接现在似乎隐式添加“故事”和“故事标签”并覆盖我的字段？

> ID：11678827
> 
> 赞同：-1
> 
> 时间：2012-07-26T22:13:54.583
> 
> 标签：facebook-graph-api, post, xbox360, facebook-stream-story

通过 Graph 将链接发布到我的提要中，我注意到正在隐式添加新的“故事”和“故事标签”字段（我无意）。这是我们 2012 年 7 月 20 日左右的新行为，就好像我在我的提要中查看之前的链接一样，它们没有包含这些额外的 2 个字段。

我遇到的问题之一是“故事”和/或“story_tags”字段似乎正在触发一些新的东西，它意外地改变了我的提要上链接的显示，因为新帖子不再像我所做的那样07/19 及之前，如果链接指向 Facebook 上的页面。具体来说，我的“图片”、“标题”和“描述”值似乎被从我链接到的 FB 页面中提取的内容所覆盖。但是，如果我链接到外部页面，则不会发生这种情况（尽管奇怪的是，在这种情况下，“标题”字段现在似乎被链接覆盖了，或者完全被忽略了）。

此外，我有一个 Xbox 360 游戏，它发布了指向我的页面的链接（它链接到 Facebook 上的游戏页面）。我现在刚做了一个。当我在 Graph 的提要中查看它时，它不包含“故事”或“故事标签”字段。因此，当我将链接设置为 Facebook 页面时，它们的标题、描述和图片字段不会像我的那样被覆盖。他们是如何解决这个问题的？有什么方法可以通过 Graph 做同样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T07:28:05.977

我不确定您的确切意思，但是自从我开始使用 Graph 以来，我注意到了故事和故事标签。

据我所知，一条消息是由一个人自己发布的，一个故事就像 [user] 在图片中被标记，或者 [user] 喜欢一个故事。

事实上，Story 和 story_tags 并不包含大量信息。但是你应该检查图片标题和描述，因为我注意到它们并不总是在那里。

# android - 在这种情况下，我是否必须将字符串列表转换为二维数组？

> ID：11678836
> 
> 赞同：0
> 
> 时间：2012-07-26T22:15:08.233
> 
> 标签：android, api, list, multidimensional-array

我正在为**Android**开发一个应用程序，我正在使用**ExpandableListActivity**。

我正在从以下格式的 sqlite db 中提取数据：

```
Id | Category | Name 
```

**这里的CODE**
是抓取数据的代码：

```
List<String> groups = new ArrayList<String>();
List<String> books = new ArrayList<String>();
List<String> elecs = new ArrayList<String>();
List<List<String>> children = new ArrayList<List<String>>();

 Cursor c = mDbHelper.fetchAllItems();

        startManagingCursor(c);

        // for all rows
        for(int i=0; i<c.getCount(); i++)
        {
            c.moveToNext();
            String t = c.getString(c.getColumnIndex("category"));

            switch (getCat(t))
            {
            case Books:
                books.add(c.getString(c.getColumnIndex("name")));
                Log.d("FROM: ", c.getString(c.getColumnIndex("name")));
                if(!(groups.contains("Books"))) groups.add("Books");

                break;
            case Electronics:

                elecs.add(c.getString(c.getColumnIndex("name")));               
                Log.d("FROM: ", c.getString(c.getColumnIndex("name")));
                if(!(groups.contains("Electronics"))) groups.add("Electronics");

                break;
            default:
                break;
            }   // end switch
        } // end for loop

        children.add(books);
        children.add(elecs); 
```

**当我运行这个应用程序时的输出**
是屏幕的样子：

```
Books
Electronics 
```

当我点击书籍或电子产品时，它会显示所有内容。像这样：

```
Books
 [c programming, perl]
 [cd, laptop, psp]
Electronics
 [c programming, perl]
 [cd, laptop, psp] 
```

**ISSUE**
我认为问题来自这种方法（getChild）：

```
public class MyExpandableListAdapter extends BaseExpandableListAdapter {

        List<String> GRP;
        List<List<String>> CHLD;

        public MyExpandableListAdapter(List<String> grps, List<List<String>> chldrn) {
            GRP = grps;
            CHLD = chldrn;
        }
...
...
public Object getChild(int groupPosition, int childPosition) {
    // CHLD[groupPosition][childPosition]; ORIGINAL, where CHLD was a 2d array
     return CHLD.get(childPosition);   MODIFIED
} 
```

我必须将我的字符串列表转换为二维数组吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:01:23.503

我看不到你如何以及在哪里使用你的 ominous `getChild()`，我不知道是什么`CHLD`，以及使用了什么“原始”，因为起始 [XXX][XXX] 不是有效的 java 语法。另外，您确定电子产品清单与书籍清单相同吗？这可能暗示您的数据解析错误，或者数据库包含无效数据。

但是，以下内容可能对您有所帮助：

*   在您的第一个样本`children.get(i)`中将返回一个`List<String>`
*   我认为你的方法是有原因`groupPosition`的。但是您当前的实现完全忽略了。`childPosition``getChild()``groupPosition`

在不知道究竟是什么问题的情况下无法进一步帮助您。

***根据您的新编辑添加：***

你`CHLD`是一个字符串列表的列表。正确的实现如下：

```
public class MyExpandableListAdapter extends BaseExpandableListAdapter {

        List<String> GRP;
        List<List<String>> CHLD;

        public MyExpandableListAdapter(List<String> grps, List<List<String>> chldrn) {
            GRP = grps;
            CHLD = chldrn;
        }

    public Object getChild(int groupPosition, int childPosition) {
         return CHLD.get(groupPosition).get(childPosition);
    }
} 
```

# mysql - 倒置查询嵌套集模型

> ID：11678837
> 
> 赞同：0
> 
> 时间：2012-07-26T22:15:09.540
> 
> 标签：mysql, sql, nested-sets

我有一个网店，其中的类别树存储为嵌套集树（每个类别的 lft、rgt 和 lvl 属性）。

我想要做的是将包含某种类型产品的所有类别显示为完整的树。我可以通过单独的 SQL 或连接轻松获取所有相关类别的 ID。问题是; 我只得到了深子类别，而我真正需要的是该类别的完整路径。

示例 ( `SELECT * FROM categories ORDER BY lft`)：

*   音乐
    *   LP
    *   光盘
*   电影
    *   录像带
    *   DVD
*   图书
    *   平装
    *   精装

假设我想展示新材料的类别，而这恰好是 DVD 和 LP：

( `SELECT * FROM categories WHERE new > 0 (OR IS PARENT OF SUCH) ORDER BY lft`):

*   音乐
    *   LP
*   电影
    *   DVD

希望有人能够提供帮助，在此先感谢！

（只是出于好奇：是否可以向上累积一个数字？例如“新”计数器？所以 music.new 总是大于或等于 LP.new）

# javascript - clearInterval - 有问题

> ID：11678841
> 
> 赞同：1
> 
> 时间：2012-07-26T22:15:49.910
> 
> 标签：javascript, jquery, setinterval, clearinterval

看来大家对 clearInterval 都有几个问题。我建立了一个滑块，允许人们将鼠标悬停在箭头上。横幅也会每隔几秒钟旋转一次。我希望能够在有人单击其中一个箭头后关闭自动旋转。

这是我的代码：

```
$(function(){
    var intvl = 0;
    intvl = setInterval(heroTransitionNext, 2000);
    $('.rightArrow').click(function(){
       window.clearInterval(intvl);
    });
}); 
```

编辑：

这是它正在调用的函数：

```
function heroTransitionNext() {
    $('.HP-hero li').filter(':visible').fadeOut('normal', function () {
        if ($(this).next().length != 0) {
            activeZone = parseInt(activeZone) + 1;
            $(this).next().fadeIn('normal', heroNavHighlight(activeZone));
        } else {
            activeZone = 1;
            $('.HP-hero li:first-child').fadeIn('normal', heroNavHighlight(activeZone));
        }
        $(this).hide();
    });
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T22:34:56.673

根据您的 heroTransitionNext 函数所做的工作量，即使清除了间隔，它也可能仍在执行——换句话说，清除间隔将停止调用函数——但是，函数的任何实例在内存中执行将继续执行直到完成。

更清楚地说，这是一个用例（您可以使用 Firebug 或开发人员工具中的分析器自行检查）：

heroTransitionNext 执行时间为 2.1 秒。调用 setInterval 后 6.1 秒调用 clearInterval。在 6.1 秒时， heroTransitionNext 被调用了四次。前三个执行已经完成，但是，第四个在它完成执行之前不会完成（自调用 setInterval 以来的 8.1 秒）。注意：在这个用例中，每次连续调用都将在最后一次调用的执行仍在继续（再持续 100 毫秒）时执行——换句话说，您将执行从 2 到 2.1、4 到 4.1 和 6 到6.1 秒间隔。

如果函数的执行时间比设置的时间间隔长，请使用带有 setTimeout() 的递归函数。以下链接将为您提供一个很好的示例。

此外，一个很好的解释参考是[https://developer.mozilla.org/en/DOM/window.setInterval](https://developer.mozilla.org/en/DOM/window.setInterval)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T23:00:52.953

要停止动画，您可以使用`jquery`'s`.stop()`但不确定它是否会解决您面临的问题（没有可视化）但您可以尝试一下

```
$('.HP-hero li').stop(1,1); // or try $('.HP-hero li').stop()
window.clearInterval(intvl); 
```

如前所述`say2joe`，这`clearInterval`只会停止该函数下次调用，但不会清除当前队列（他是对的），因此在这种情况下`stop`可以使用。

[**关于停止**](http://api.jquery.com/stop/)。

# ms-word - 将文件导入 DOORS 时保留单词列表编号

> ID：11678843
> 
> 赞同：0
> 
> 时间：2012-07-26T22:15:52.977
> 
> 标签：ms-word, ibm-doors

我正在将在 Word 中创建的需求文档导入 DOORS 模块。我还希望能够将 DOORS 模块导出回 Word 文档，并让它们看起来非常相似。最简单的方法是什么？

我可以看到有两个选项可以做到这一点：

1.  在 Word 中，使用 DOORS 加载项“导出到 DOORS”
2.  在 DOORS 中，使用“导入 -> 富文本格式”（在保存为 RTF 的 Word 文件上）

在选项 1 中，不保留列表中项目的编号。在选项 2 中，行号被保留，但在导出回 Word 时，列表 Word 样式都是“正常的”，我失去了所有的格式和缩进。

在选项 1 中，我可以利用执行初始导出时填充的“段落样式”属性，使生成的 Word 文档看起来像原始文档。在选项 2 中，我看不到此选项/属性可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:09:36.447

DOORS/Word 中似乎没有办法本地处理这个问题。我能找到的最佳解决方案是首先使用 VBA 方法将 Word 自动编号转换为实际文本`ConvertNumbersToText()`。这样做可以让我在 DOORS 中保留格式/缩进，并且还能够将数据库导出回 Word 并使其看起来相同/相似。

唯一的小问题是生成的文档不再使用 Word 自动编号。就我的目的而言，这不是问题。

# jsf - 如何将 JSF h:table 重写为 h:panelGrid

> ID：11678844
> 
> 赞同：2
> 
> 时间：2012-07-26T22:15:54.457
> 
> 标签：jsf, jsf-2

我需要一种方法来创建这样的可编辑[表](http://www.mkyong.com/jsf2/how-to-update-row-in-jsf-datatable/)。我感兴趣的是可以`h:panelGrid`用来显示和编辑数据。从我的预览[帖子](https://stackoverflow.com/questions/11675369/how-to-display-arraylist-in-jsf-page)中，我看到简单的 JSF 表是可能的，但这可能`h:panelGrid`吗？

```
<table>
    <ui:repeat var="elem" value="#{yourMB.yourDataList}">
        <tr>
            <td>#{elem.userid}</td>
            <td>
               <h:outputText value="#{elem.name}" 
                    rendered="#{not elem.editable}" />
               <h:inputText value="#{elem.name}" rendered="#{elem.editable}" />
            </td>
            <td>
               <h:outputText value="#{elem.telephone}" 
                    rendered="#{not elem.editable}" />
               <h:inputText value="#{elem.telephone}"
                            rendered="#{elem.editable}" />
            </td>
            <td>
              <h:commandLink value="Edit" rendered="#{not elem.editable}"
                 action="#{yourMB.editAction(elem)}" />
            </td>
        </tr>
    </ui:repeat>
</table>
<h:commandButton value="Save Changes" action="#{yourMB.saveAction}" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:25:55.217

答案是不”。尝试使用 h:dataTable 而不是 h:panelGrid。

# jquery - jquery，禁用拖放到另一个可拖动对象的顶部

> ID：11678853
> 
> 赞同：0
> 
> 时间：2012-07-26T22:16:38.683
> 
> 标签：jquery, colors, drag-and-drop, grid

我正在尝试使用 div 制作一个基本的拖放界面，我拥有所有 div 和网格的工作，但我似乎无法弄清楚代码是什么来防止可拖动的对象被拖放到另一个或只允许在有空白空间的地方放置可拖动对象。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:19:37.920

这是一个拖放教程：[http ://www.ericbieller.com/2010/06/24/how-to-create-a-simple-drag-and-drop-with-jquery/](http://www.ericbieller.com/2010/06/24/how-to-create-a-simple-drag-and-drop-with-jquery/)

如果您需要更具体的答案，则需要提出更具体的问题（带代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:53:58.553

你可以这样做：

1.  为所有 droppables 元素创建一个类，`.cDrop`为 draggables创建另一个类`.cDrags`。

2.  对 drop 使用类似于此的匿名函数调用：

    ```
    $('.cDrop').each(function(){
        $(this).droppable({
            drop: function(event, ui) {
                if((ui.draggable.isDroppedOverOtherDrag())){
                        $(ui.draggable).draggable('option','revert','valid');
                }else{
                       //You do here whatever you need to do. For expample:         
                        alert('Good Job!!');

                }
            }
        });
    }); 
    ```

3.  使用与此类似的匿名函数调用进行拖动：

    ```
    $( ".selector" ).draggable({
        start: function(event, ui) {
            $(this).draggable('option','revert','invalid');

        }
    }); 
    ```

这样，您只需“说”何时必须还原可拖动对象（即，当它没有被放置在正确的位置时）。

`isDroppedOverOtherDrag()`如果拖放的拖动超过另一个拖动，该函数将返回 true。否则它将返回 false 。要实现它，您应该使用 ui.draggable 对象的当前位置、已正确放置的其余拖动的位置及其宽度/高度。向 drop 函数添加一些代码并巧妙地使用 Drags 的 id 将使您拥有一个 var，其中包含已正确放入特定 drop 的 Drags。

希望能帮助到你

# r - 绘制 TIFF 图像时 R 歪斜颜色

> ID：11678854
> 
> 赞同：0
> 
> 时间：2012-07-26T22:16:51.710
> 
> 标签：r

我正在尝试将我在 ArcGIS 中制作的 GeoTIFF 绘制为某些地图的背景画布，但我已经撞到了正确的颜色。

ArcGIS 输出：

![ArcGIS 输出](../Images/13ca81e704af342bc03f80b098645cff.png)

但是相同的 GeoTIFF - 读入 R`readGDAL() {rgdal}`并绘制`image()`- 会产生以下结果：

![在 R 中用 image() 绘制](../Images/0cc1d424903c0a36709acb2401674059.png)

我已经尝试过使用颜色选项 - 例如，配色方案（`rainbow`, `heat.colors`, `topo.colors`, `terrain.colors`）受到严格限制，并`grey()`产生可定制色调的统一灰色框！

非常感谢有关如何绘制 GeoTIFF 真实颜色的任何建议，或者一些不太花哨的东西。

（我使用的函数实际上是我给出的形式 - 没有额外的参数或设置）

提前致谢

罗宾

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T22:33:05.160

Try reading it with the raster package into a 'stack' (it should have three bands), then using plotRGB from the raster package.

```
require(raster)
map = stack("mymap.tif")
plotRGB(map) 
```

# mysql - 返回连续具有 NULL 或 0 值的列

> ID：11678858
> 
> 赞同：7
> 
> 时间：2012-07-26T22:17:14.503
> 
> 标签：mysql, sql, select, null

我`Table`有 10 个字段。每个`field`或`column`包含`Integer`值。

现在我只需要返回具有`Null`或`0`在结果集中的字段。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2017-06-20T14:30:57.650

这对我有用。例如：

代替：

```
where column_name is null or column_name = 0 
```

这将是：

```
where COALESCE(column_name,0) = 0 
```

[张贴者 Jon Gabrielson 于 2002 年 12 月 18 日](https://dev.mysql.com/doc/refman/5.7/en/working-with-null.html)

> 函数“COALESCE”可以简化空值的处理。例如，要将 null 视为零，您可以使用： select COALESCE(colname,0) from table where COALESCE(colname,0) > 1;

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T22:21:33.947

利用`where column_name is null or column_name = 0`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-26T22:39:06.857

不清楚你在问什么。

您能否详细说明结果集的外观，您是否希望返回所有 10 列，但只包括至少有一列包含 NULL 或 0 的行？通过在 WHERE 子句中指定适当的谓词，这很容易做到。

```
SELECT col0, col1, col2, col3, col4, col5, col6, col7, col8, col9
  FROM mytable
 WHERE IFNULL(col0,0) = 0
    OR IFNULL(col1,0) = 0
    OR IFNULL(col2,0) = 0
    OR IFNULL(col3,0) = 0
    OR IFNULL(col4,0) = 0
    OR IFNULL(col5,0) = 0
    OR IFNULL(col6,0) = 0
    OR IFNULL(col7,0) = 0
    OR IFNULL(col8,0) = 0
    OR IFNULL(col9,0) = 0 
```

这将返回至少在指定列之一中具有零或 NULL 的所有行。

但是你的问题似乎是在问一些有点不同的东西；您似乎在询问是否根据条件仅返回某些列。结果集中要返回的列由`SELECT`关键字后面的表达式列表确定。您不能根据列包含的值动态更改 SELECT 列表中的表达式。

要返回在该列中至少有一行包含 NULL 或零的列的名称，您可以编写这样的查询（这限制为 5 列，可以轻松扩展到 10 列或更多列）：

```
SELECT 'col0' AS col_name FROM mytable WHERE IFNULL(col0,0) = 0
 UNION SELECT 'col1' FROM mytable WHERE IFNULL(col1,0) = 0
 UNION SELECT 'col2' FROM mytable WHERE IFNULL(col2,0) = 0
 UNION SELECT 'col3' FROM mytable WHERE IFNULL(col3,0) = 0
 UNION SELECT 'col4' FROM mytable WHERE IFNULL(col4,0) = 0 
```

（该查询将对表进行一些认真的扫描。如果索引可用，则可以重写谓词以允许索引范围扫描。）

这是一种将 column_names 放在一行中的方法。（其中一列中的 NULL 表示该列不包含任何零或 NULL。）

```
SELECT (SELECT 'col0' FROM mytable WHERE IFNULL(col0,0)=0 LIMIT 1) AS col0
     , (SELECT 'col1' FROM mytable WHERE IFNULL(col1,0)=0 LIMIT 1) AS col1
     , (SELECT 'col2' FROM mytable WHERE IFNULL(col2,0)=0 LIMIT 1) AS col2
     , (SELECT 'col3' FROM mytable WHERE IFNULL(col3,0)=0 LIMIT 1) AS col3
     , (SELECT 'col4' FROM mytable WHERE IFNULL(col4,0)=0 LIMIT 1) AS col4 
```

但是对表进行一次扫描会快得多：

```
SELECT IF(c0>0,'col0',NULL)
     , IF(c1>0,'col1',NULL)
     , IF(c2>0,'col2',NULL)
     , IF(c3>0,'col3',NULL)
     , IF(c4>0,'col4',NULL)
  FROM ( SELECT SUM(IF(IFNULL(col0,0)=0,1,0)) AS c0
              , SUM(IF(IFNULL(col1,0)=0,1,0)) AS c1 
              , SUM(IF(IFNULL(col2,0)=0,1,0)) AS c2 
              , SUM(IF(IFNULL(col3,0)=0,1,0)) AS c3
              , SUM(IF(IFNULL(col3,0)=0,1,0)) AS c4
         FROM mytable 
       ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T22:48:29.060

我最近不得不用另一种语言制作类似的方法。逻辑是在处理记录之前检查记录中的所有“列”是否为“真”。

我解决它的方法是使用以下逻辑：

```
# loop through the records
for ($i=0; $i<count($records); $i++) {

  # in each record, if any column is 0 or null we will disgard it
  # this boolean will tell us if we can keep the record or not
  # default value is 'true', this gives it a chance to survive
  $keepit = true;

  # loop through each column
  for ($j=0; $j<count($records[$i]); $j++) {

    # add your boolean condition (true=go ahead, false=cant go ahead)
    $goahead = (!is_null($records[$i][$j]) && $records[$i][$j] != 0);

    # convert the boolean to a 0 or 1,
    # find the minimum number in a record
    # (so if any field in a record is false i.e. 0 or null, dont use the record)
    $keepit = min(+$goahead, +$keepit);

  }#end of col loop

  if ($keepit) {
    # keep the record
    array_push($anotherArray, $records[$i]);
  }

} 
```

我已经用 PHP 为你写了这个。它在 MySQL 中也可能是可行的，但我建议您获取所有记录，在 PHP 中处理它们，然后将它们发送回 MySQL。

将来，您应该设计您的数据库表，以便首先不允许/不存储无效记录。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T22:55:21.070

您是否需要具有 NULL 或 0 的列，或者具有 NULL 或 0*列的**行*，或者*所有*列都为 NULL 或 0 的行？

但我怀疑在精心设计的表中是否会有 10 个等效列，因此您可能需要重新设计数据模型——在另一个表中创建列行，并将两个表连接在一起。

你可能有这样的事情：

```
CREATE TABLE a(a_id int primary key, b0 int, b1 int, b2 int, ..., b9 int ); 
```

但是你想要这个：

```
CREATE TABLE a( a_id int primary key );
CREATE TABLE b( b_id int primary key );

INSERT INTO b (b_id) values (0), (1), ..., (9);

CREATE TABLE ab (
  a_id int, b_id int,
  v int not null, -- this would be the value of b0, b1, ...
  foreign key (a_id) references a(a_id),
  foreign key (b_id) references b(b_id),
  primary key(a_id, b_id)
); 
```

然后你可以写如下内容：

```
SELECT * FROM a, b -- cross join to get all possible combinations
WHERE (a_id, b_id) NOT IN (
  -- then remove the ones that have a value
  SELECT a_id, b_id FROM a JOIN ab ON a.id = ab.a_id JOIN b ON ab.a_id
  WHERE ab.v <> 0); 
```

如果在运行它之前删除所有 0 行，则最后一行是不必要的：

```
DELETE FROM ab WHERE v = 0; 
```

# cocoa - 可可范围滑块

> ID：11678863
> 
> 赞同：0
> 
> 时间：2012-07-26T22:17:42.593
> 
> 标签：cocoa

我想知道是否有办法在 Cocoa 中为 OS X 应用程序创建范围滑块。基本上它只是一个带有两个按钮而不是一个按钮的常规滑块，因此您可以设置一个范围（例如，对于图形）。我见过很多适用于 iOS 的自定义范围滑块（例如[http://www.cocoacontrols.com/platforms/ios/controls/rangeslider](http://www.cocoacontrols.com/platforms/ios/controls/rangeslider)），但没有适用于 OS X。

我能找到的最接近的东西是 SMDoubleSlider，它在 XCode 4 中似乎根本不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-18T21:10:30.220

警告：我刚刚了解到 SMDoubleSlider 使用无法通过 App Review 的私有 API 的艰难方式。如果您打算通过 Mac App Store 分发您的应用程序，请不要使用此类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T00:48:28.317

当然这是可能的，几乎任何事情都是可能的，但是您必须自己完成所有滑块运动的绘制和处理。

我不确定您所说的 SMDoubleSlider 在 Xcode 4 中不起作用是什么意思——我试过了，对我来说效果很好。我没有尝试 IB 插件的东西，我只是导入了 4 个文件（SMDoubleSlider .h 和 .m 以及滑块单元文件）并分配它以创建一个并将其添加到我的视图中。我能够获取和设置 hi 和 lo 滑块的值。如果您要使用它，请确保您遵守版权限制，它是开源的，但不是公共领域。

# c++ - 如何从 C++ OCX 模块导出自定义类型名称？

> ID：11678865
> 
> 赞同：0
> 
> 时间：2012-07-26T22:18:00.673
> 
> 标签：c++, visual-c++, ocx

我经常将 OCX 控件与 VB6 一起使用，并且一些为枚举类型导出自己的类型名称，例如这里：

![afioShow](../Images/3d313dbc98d64ea06bfe50ed03bebf0c.png)

`show`实际上是一个`Long`（有符号的 32 位数字），但由于只允许值 0-4 作为此函数的参数，因此 OCX 定义`_afioShow`为从 0 到 4 的枚举。这也意味着无论何时需要这种类型的值， VB6 IDE 会自动显示一个包含枚举成员（等）的下拉`showMinimized`列表`showMaximized`。

我想在我正在编写的 OCX 模块中做类似的事情。如何定义和导出这种类型？我正在使用 Visual C++ 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:07:56.130

只需为 IDL 中的枚举编写一个 typedef。一个随机的例子：

```
typedef enum {
  digitOne=1,
  digitTwo=2
} EnumDigits;

[
  object,
  uuid(5F3D3E00-0F66-4199-B548-654A9174552B),
  dual,
  pointer_default(unique)
]
interface IHandleDigits : IDispatch {
  [id(0),  propget] HRESULT Digit([out,retval] EnumDigits* retval);
} 
```

# ruby-on-rails - 在 Rails 中使用回形针上传到谷歌驱动器

> ID：11678877
> 
> 赞同：5
> 
> 时间：2012-07-26T22:19:14.907
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, paperclip, google-drive-api

您好，我是使用[谷歌驱动器](http://rubygems.org/gems/google_drive)gem 的新手，我不知道如何使用回形针将照片上传到[谷歌驱动器](http://rubygems.org/gems/google_drive)。它是我正在开发的一个简单的rails应用程序，可以将照片上传到[google drive](http://rubygems.org/gems/google_drive)，是否有任何rails应用程序示例可以让我开始使用gem，或者任何机构都可以在这里提供一个示例来帮助我们初学者使用[google drive gem](http://rubygems.org/gems/google_drive) . 应使用回形针上传文件。谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T01:27:28.040

您可能必须为 Paperclip 实现一个存储适配器。以[https://github.com/dripster82/paperclipdropbox](https://github.com/dripster82/paperclipdropbox)为例。在这种情况下，它看起来只支持上传到单个预授权帐户。如果没问题，那么修改它以与 Google Drive 而不是 Dropbox 对话应该很简单。如果您需要支持多个用户，则必须确保当前用户使用了正确的凭据。

无论如何，回形针文档可能是最好的开始 :)

# objective-c - NSDictionary ...代码在模拟器上运行时运行良好，但在设备上运行时运行良好

> ID：11678878
> 
> 赞同：0
> 
> 时间：2012-07-26T22:19:14.643
> 
> 标签：objective-c, ios, nsdictionary

我有一个代码，如果用户做出某种触摸手势，三个 UIImageView 将根据做出的手势改变其图像。

我通过制作一个 NSDictionary 来将某些手势与某些图像相关联来做到这一点。我放了一个 NSLog 以便它打印它正在显示的图像的地址。

当我在模拟器上运行它时，它可以工作......图像显示在屏幕上，NSLog 打印出图像的地址。但是当我在我的设备上运行它时，图像不会显示在屏幕上并且 NSLog 打印为空。

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T22:20:45.720

图像存储在哪里？它们是否与捆绑包一起打包？

# xcode - 如何卸载 Xcode 4.4 命令行工具（Mac OS X 10.8 Mountain Lion）？

> ID：11678882
> 
> 赞同：13
> 
> 时间：2012-07-26T22:19:48.307
> 
> 标签：xcode, macos, uninstallation, osx-mountain-lion, xcode4.4

[这篇 SO 帖子](https://stackoverflow.com/questions/9329243/xcode-4-4-command-line-tools)很好地解释了如何为 Xcode 4.4 安装命令行工具。

但是如何*卸载*它们？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-02T16:33:25.087

此页面上列出了一个脚本可以在 Mountain Lion 上执行此操作：http: [//www.cocoanetics.com/2012/07/you-dont-need-the-xcode-command-line-tools/](http://www.cocoanetics.com/2012/07/you-dont-need-the-xcode-command-line-tools/)

将脚本复制到文本文件中。
将其另存为`remove_CLI_tools.sh`
打开终端并导航到保存脚本的文件夹。
类型：`sh remove_CLI_tools.sh`

我只安装了独立的命令行工具（独立安装程序），而没有安装 Xcode 应用程序。所以我最终运行了两次脚本，为安装程序安装的每个包更改了顶部的变量
（您可以通过查看安装程序的 .dmg 图像的隐藏“包”文件来检查安装了哪些包） ：
`com.apple.pkg.DeveloperToolsCLI.bom and .plist` `com.apple.pkg.DevSDK.bom and .plist`

小心（有一个备份，就像帖子推荐的那样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T14:02:32.367

sudo /Developer/Library/uninstall-devtools –mode=all 适用于 10.8.5

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-06T21:30:13.210

这应该仍然可以删除 xcode。

```
sudo /Developer/Library/uninstall-devtools –mode=all 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-16T00:55:27.990

sudo /Library/Developer/Shared/uninstall-devtools --mode=all

# sql-server - 如何查找 SQL Server 2008 实例，包括默认实例

> ID：11678883
> 
> 赞同：1
> 
> 时间：2012-07-26T22:19:50.803
> 
> 标签：sql-server, find, default, instance

我正在创建一个使用 SQL Server 2008 的 Windows 表单应用程序。在我拥有的安装项目中，如果需要，我会在目标计算机上检查并安装 SQL Server 2008。我需要的是一种获取 SQL Server 2008 - 并且只有 2008 - 实例名称的方法。

现在我正在使用该`SmoApplication.EnumAvailableSqlServers`函数并检查返回的版本，但我发现它不显示默认实例。这对我来说是有问题的，因为如果在我的安装程序在目标机器上设置 SQL Server 2008 之后运行该程序，则没有可用的命名实例 - 只有默认实例。

我不想只是盲目地检查传统的`MSSQLSERVER`默认实例是否有效，原因有两个：

1.  它可能是 SQL Server 2008 安装遗留下来的默认实例，它无法访问我的应用程序使用的数据库。跳过它然后检查其他命名实例很可能不会给我任何回报。

2.  它也可能是较新版本的 SQL Server 2012 的默认实例。虽然此实例能够访问我的数据库，但我的经验是，它会将数据库“升级”到新的 SQL Server 版本，而早期版本不会无法访问它。由于我的应用程序旨在与 SQL Server 2008 一起使用，这给我带来了一些问题。

所以我需要使用任何 SQL Server 2008 命名实例，或者如果它是 2008，则使用默认实例。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:27:45.983

使用应该使用命名空间的类`SqlDataSourceEnumerator`（`System.Data.Sql`程序集`System.Data.dll`），这样：

```
SqlDataSourceEnumerator sdsEnumerator = SqlDataSourceEnumerator.Instance;

DataTable sqlServerInstances = sdsEnumerator.GetDataSources(); 
```

这些类不需要安装 Sql Server，但可以检索有关任何 Sql Server 实例的信息。提醒这一点：

"

由于 SqlDataSourceEnumerator 用于在网络上定位数据源的机制的性质，该方法不会总是返回可用服务器的完整列表，并且每次调用时该列表可能都不相同。如果您打算使用此功能让用户从列表中选择服务器，请确保您始终提供一个选项以键入不在列表中的名称，以防服务器枚举未返回所有可用服务器. 此外，此方法可能会花费大量时间来执行，因此在性能至关重要时调用它时要小心。

"

该方法`GetDataSource`是您所需要的：[这里的文档](http://msdn.microsoft.com/en-us/library/system.data.sql.sqldatasourceenumerator.getdatasources%28v=vs.100%29.aspx)，返回一个`DataTable`包含您需要的所有信息：

**ServerName 服务器** 的名称。

**InstanceName** 服务器实例的名称。如果服务器作为默认实例运行，则为空白。

**IsClustered** 指示服务器是否是集群的一部分。

**版本** 服务器的版本（SQL Server 2000 为 8.00.x，SQL Server 2005 为 9.00.x，SQL Server 2008 为 10.00.x，SQL Server 2008 R2 为 10.50.x，SQL Server 2012 为 11.00.x）。

`SqlDataSourceEnumerator`[您可以在此处](http://msdn.microsoft.com/en-us/library/system.data.sql.sqldatasourceenumerator%28v=vs.100%29.aspx)找到该课程的完整参考资料。

# facebook - Omniauth-facebook 覆盖 oauth_token

> ID：11678885
> 
> 赞同：1
> 
> 时间：2012-07-26T22:20:03.533
> 
> 标签：facebook, api, omniauth, facebook-oauth, facebook-access-token

我正在构建一个 Rails 3 应用程序，它将专门使用 Facebook 进行身份验证（通过 omniauth-facebook 和 koala 执行图形内容）。我希望能够允许 iOS 应用以与[此处](https://stackoverflow.com/a/7923937/443432)所述类似的方式使用我的应用对用户进行身份验证。

我想知道如果存在 ?access_token=X 参数是否有一种“覆盖”omniauth的好方法 - 我仍然想使用omniauth来创建或检索用户记录，但我想要一种传递它的方法访问令牌并让它忽略它通常的会话数据。

所以基本上如果用户点击我的应用程序，他们会以正常方式使用omniauth登录。如果使用 ?access_token=X 参数发出请求，则通常的身份验证将被忽略，并使用此令牌针对 Facebook 检查用户。（对于我所有的 RESTful 控制器）。

# php - 使 strip_tags 用实体代替 HTML，而不是什么都没有

> ID：11678887
> 
> 赞同：0
> 
> 时间：2012-07-26T22:20:19.090
> 
> 标签：php, regex

我有这行代码：

```
$content = strip_tags($content, '<a><br><b><i>'); 
```

它的工作原理应该如此，但我需要用户能够输入代码并将代码显示在网页上。
例如，

```
<?php
echo 'Hey';
?> 
```

什么都不显示。我需要它来显示

```
&lt;?php
echo 'Hey';
?&gt; 
```

例如。我应该使用什么功能来做到这一点？
编辑：为了澄清，用户看到 PHP 代码，它只是被 HTML 实体替换，因此服务器不会尝试运行它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T22:24:26.657

尝试：

```
$content = htmlspecialchars(strip_tags($content, '<a><br><b><i>')); 
```

或者

```
$content = htmlentities(strip_tags($content, '<a><br><b><i>'), ENT_QUOTES); 
```

见[`htmlspecialchars`](http://php.net/htmlspecialchars)和[`htmlentities`](http://php.net/htmlentities)。

# javascript - jQuery回调...？

> ID：11678888
> 
> 赞同：2
> 
> 时间：2012-07-26T22:20:24.590
> 
> 标签：javascript, jquery

感谢您的帮助..这是我的问题：下面的代码，当单击阅读更多...链接时应该显示链接下的 div，但只有在所有其他可能的 div 被隐藏之后...我需要按原样在回调中使用它，但是当这样使用时，第一个链接正确显示，最后三个显示，然后隐藏，然后显示......帮助！

Javascript：

```
var more_text="Read More...";
var less_text="Read Less...";

jQuery(document).ready(function() {
    $j(".dropdown").click( function () {
        if ($j(this).html() == more_text){
            var that = $j(this);
            $j(".extra").slideUp( function () {
                $j(".dropdown").html(more_text);
                that.html(less_text);
                that.next(".extra").slideDown();
            });
        }
    });
}); 
```

HTML：

```
<div class="dropdown">Read More...</div>
<div class="extra" style="display: none;">Here is more text!!</div>

<div class="dropdown">Read More...</div>
<div class="extra" style="display: none;">Here is more text!!</div>

<div class="dropdown">Read More...</div>
<div class="extra" style="display: none;">Here is more text!!</div>

<div class="dropdown">Read More...</div>
<div class="extra" style="display: none;">Here is more text!!</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:29:00.810

问题是当你调用`$j(".extra").slideUp(...`一些带有类的元素时`extra`已经隐藏了，所以那些会导致回调立即触发，然后当需要关闭的元素完成关闭时，你会再次触发回调。将该行更改为：

```
$j(".extra").slideUp().promise().done( function () { 
```

我认为它会按照您期望的方式工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:29:32.550

您必须过滤要向上滑动的元素。你应该使用这个：

```
jQuery(document).ready(function() {
    $j = jQuery;
    $j(".dropdown").click( function () {
        if ($j(this).html() == more_text){
            var that = $j(this);
            if ($j(".extra").filter(":visible").length > 0) {
                $j(".extra").filter(":visible").slideUp( function () {
                    $j(".dropdown").html(more_text);
                    that.html(less_text);
                    that.next(".extra").slideDown();
                });
            }
            else {
                $j(".dropdown").html(more_text);
                that.html(less_text);
                that.next(".extra").slideDown();
            }
        }
    });
}); 
```

这也有一个条件，它检查任何`.extra`元素是否可见，如果不可见则不向上滑动任何元素。

[http://jsfiddle.net/vExYL/](http://jsfiddle.net/vExYL/)

# smtp - 启用插件的 SMTP 服务器以添加过滤器功能

> ID：11678896
> 
> 赞同：0
> 
> 时间：2012-07-26T22:21:37.167
> 
> 标签：smtp, email-spam, mail-server

几天前，我想到了一个关于垃圾邮件防护技术的想法。

因此，我正在寻找可以通过**filter plugins增强的****SMTP-server**。

 **有人知道为插件提供 API的**SMTP 框架或 SMTP-server吗？**

我已经偶然发现了[Apache 的 james Project](http://james.apache.org)，它至少似乎提供了一组丰富的电子邮件相关模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:53:12.360

几天前我切换到[subethasmtp](http://code.google.com/p/subethasmtp/)并相信它的 api 支持您正在搜索的内容。

您可以实现一些处理程序来处理邮件。

```
final MessageHandlerFactory mhf = new MessageHandlerFactory() {

            @Override
            public MessageHandler create(final MessageContext ctx) {
                return new MessageHandler() {

                    @Override
                    public void recipient(final String recipient) throws RejectException {
                        // TODO Auto-generated method stub
                    }

                    @Override
                    public void from(final String from) throws RejectException {
                        // TODO Auto-generated method stub
                    }

                    @Override
                    public void done() {
                        // TODO Auto-generated method stub
                    }

                    @Override
                    public void data(final InputStream data) throws RejectException, TooMuchDataException, IOException {
                    }
                };
            }
        };
        final SMTPServer srv = new SMTPServer(mhf);
        srv.start(); 
```**

# javascript - 我如何知道 XHR 是使用 readyState 发送到服务器的？

> ID：11678898
> 
> 赞同：0
> 
> 时间：2012-07-26T22:21:41.903
> 
> 标签：javascript, ajax, xmlhttprequest

这个问题与我之前的问题有关： [是否 READYSTATE_LOADED 跨浏览器？](https://stackoverflow.com/questions/11495286/is-readystate-loaded-across-browsers)

所以我知道 readyState 跨浏览器不可靠。我目前只是在尝试在任何浏览器中进行概念验证。

我在我的插件中并且有这样的代码：

```
var xhr = new XMLHttpRequest();
xhr.onreadystatechange = function(){            

  if (xhr.readyState == 4){
      self._onComplete(id, xhr);                    
  }
  else if (xhr.readyState == 2 ){
    self._onSent( id, xhr );
  }

}; 
```

如果我记录回调，则在“完成”之前立即触发“发送”，在我的服务器端脚本响应之后。我是否误解了 readyState 2 是什么？我尝试了 1 踢球，但在服务器响应之前也没有触发。

我查看了 xhr 对象的上传对象，它至少有一个“进度”事件，但我仍然没有看到任何关于进度的信息。事实上，如果最后一个进度是 97%，它不会在文件完成发送到服务器时以 100% 触发。因此，当服务器处理上传时，在 readyState 变为 4 之前，进度会挂在 97%。

这使用户认为上传停滞不前，甚至认为它实际上一直在上升。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T22:37:01.127

没有状态可以检查以查看何时发送了请求。

`readyState`2 表示服务器已响应并且所有标头都已进入。这是在请求的主体部分进入之前触发的。

`send()`最好的选择是在发出命令时触发自己的事件。

```
var xhr = new XMLHttpRequest();
xhr.onreadystatechange = function(){            

  if (xhr.readyState == 4){
      self._onComplete(id, xhr);                    
  }
  else if (xhr.readyState == 2 ){
    // Headers received
  }

};

xhr.send(data)
self._onSend( id, xhr ); 
```

> 4.6 状态
> 
> UNSENT (数值 0) 对象已被构造。
> 
> OPENED（数值 1） open() 方法已成功调用。在此状态期间，可以使用 setRequestHeader() 设置请求标头，并且可以使用 send() 方法发出请求。
> 
> HEADERS_RECEIVED（数值 2）已遵循所有重定向（如果有）并且已收到最终响应的所有 HTTP 标头。该对象的几个响应成员现在可用。
> 
> LOADING（数值 3）正在接收响应实体主体。
> 
> DONE（数值 4） 数据传输已完成或传输过程中出现问题（例如无限重定向）。

[http://www.w3.org/TR/XMLHttpRequest/#states](http://www.w3.org/TR/XMLHttpRequest/#states)

**编辑**

```
var xhr = new XMLHttpRequest();
xhr.onreadystatechange = function(){            

  if (xhr.readyState == 4){
      self._onComplete(id, xhr);                    
  }
  else if (xhr.readyState == 2 ){
    // Headers received
  }
  else if (xhr.readyState == 1 ){
    // xhr.open() called
    // You can set headers here amoung other things
    xhr.send(data)
    self._onSend( id, xhr );
  }

};

xhr.open(method, url, async, user, password) 
```

[http://www.w3.org/TR/XMLHttpRequest/#the-open-method](http://www.w3.org/TR/XMLHttpRequest/#the-open-method)

# php - 如果 else 与 php 变量混淆

> ID：11678900
> 
> 赞同：-1
> 
> 时间：2012-07-26T22:21:49.680
> 
> 标签：php, if-statement

这是什么原因？

如果我进入我的设置页面并启用它

```
 <? if ( $setts['user_lang']) { ?>
                     <td nowrap style="border-left: 1px solid #dddddd;" align="center">&nbsp;&nbsp;
                        <?=$languages_list;?>
                        &nbsp;&nbsp;</td>
                     <? } ?> 
```

作品

如果我这样做

```
<? if (1==1) { ?>
                     <td nowrap style="border-left: 1px solid #dddddd;" align="center">&nbsp;&nbsp;
                        <?=$languages_list;?>
                        &nbsp;&nbsp;</td>
                     <? } ?> 
```

它只显示左边框位；什么会导致这个 if else 循环不显示变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:28:30.983

我会说，当`$setts['user_lang']`评估为假时，变量`$languages_list`尚未设置。所以它正在显示变量，但变量是空的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:29:40.657

您的 $languages_list 可能为空？

这有效

```
<?
$languages_list = 'blabla';
if (1==1) { 
?>
    <td nowrap style="border-left: 1px solid #dddddd;" align="center">
    &nbsp;&nbsp;
    <?=$languages_list;?>
    &nbsp;&nbsp;</td>
<? } ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T22:27:03.700

我认为您正在尝试做的是检查`$setts['user_lang']`元素的存在。在这种情况下，您应该使用[isset() 函数](http://php.net/manual/en/function.isset.php)来检查您的`$setts['user_lang']`元素是否存在。

`<?php if (isset($setts['user_lang'])) { /* do work here */ } ?>`

# python - 满足条件后从头开始迭代python

> ID：11678904
> 
> 赞同：1
> 
> 时间：2012-07-26T22:22:20.740
> 
> 标签：python

我有以下代码：

```
letters = 'abcdefg'    
for i in letters:
        if ...
        #condition that tests something I need
        #once condition is satisfied, something is done, the condition is modified
        # and letters becomes:
                letters = letters.replace(i,'')
                ### Now I want to start this for loop again because my condition
                ### may now be met with the initial letters 
```

如何让我的循环从头开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T22:27:41.943

您可以尝试以下方法（根据需要进行调整以适合您的代码）：

```
i = 0
while i < len(letters):
    if ....

       letters = letters.replace(letters[i], '')  # probably what you want
       i = 0
    else:
       i += 1 
```

循环中的迭代由 的值控制`i`。只要`i`小于字符串的长度 (7)，它就会一直循环，每次都会增加循环中的`i`（用作计数器）的值。当您设置时，`i = 0`您将再次（重新）启动计数器。

*请注意*，与您拥有的 for 循环不同`for i in letters`（并`i`连续获取字母的值），`i`它是一个简单的计数器，因此要访问给定的字母，您必须对其进行索引。IE，`letters[i]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:27:34.213

这样的事情可能会满足您的需求：

```
while letters and not breakCondition:
  for i in letters:
    if someLogic():
      letters = letters.replace(i, '')
      break 
```

# oauth-2.0 - 忘记密码的 OAuth 令牌撤销

> ID：11678905
> 
> 赞同：1
> 
> 时间：2012-07-26T22:22:29.147
> 
> 标签：oauth-2.0

如果客户经历忘记密码流程并更改密码，是否应该撤销 Oauth 令牌

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T23:14:29.540

更改密码的一个原因是当用户注意到其他人可以访问他的帐户时。在这种情况下，曾经使用旧密码访问并使用 OAuth 获取访问令牌的攻击者仍然可以访问该帐户，尽管用户更改了密码以防止这种情况发生。

例如，由于某些不明原因（密码弱、木马等），您的 GMail 帐户被黑客入侵并用于发送垃圾邮件。攻击者使用[带有 OAuth 功能的 Google IMAP](https://developers.google.com/google-apps/gmail/oauth_overview)并获​​得了有效的访问令牌。现在不知何故，您注意到他们以您的名义发送垃圾邮件，您更改了密码。攻击者仍然拥有有效的访问令牌，并且可以继续发送垃圾邮件。

撤销令牌应该与用户更改密码的原因无关。如果他更改它，您应该撤销所有令牌并让他重新注册。

# android - 在列表视图中使用具有更多视图的数组适配器

> ID：11678909
> 
> 赞同：11
> 
> 时间：2012-07-26T22:22:38.190
> 
> 标签：android, android-listview, android-arrayadapter

我偶然发现了一个我无法完全理解的问题，所以我希望也许这里有人遇到过同样的问题或知道解决问题的好方法。

我创建了一个包含 ListView 的视图。这个 ListView 包含两个 TextView。问题是我不知道我将使用 ArrayAdapter 的第二个文本视图中的值发送到哪里。有没有办法向 ArrayAdapter 发送更多信息，以便我可以提供“todaysmenu”TextView？

ArrayAdapter 方法：

```
private void createList() {
    ListView lv = (ListView) findViewById(R.id.mylist);
    String[] values = new String[] { "Android", "Linux", "OSX", 
            "WebOS", "Windows7", "Ubuntu", "OS/2"
    };
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,R.layout.rowlayout, R.id.restaurantname, values);
    lv.setAdapter(adapter);
} 
```

行标记：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/restaurantname"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/restaurantname"
        android:textSize="23dp" >

    </TextView>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@+id/todaysmenu" />

</LinearLayout> 
```

活动布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
    android:id="@+id/mylist"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">
    </ListView>

</LinearLayout> 
```

一开始我一切正常，但是当我添加第二个文本字段时，问题就出现了。在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-26T22:57:38.953

要实现这一点，您必须构建一个自定义适配器并扩展您的自定义行布局。使用[ArrayAdapter](http://developer.android.com/reference/android/widget/ArrayAdapter.html)不起作用，因为

> 默认情况下，此类期望提供的资源 id 引用单个 TextView。如果您想使用更复杂的布局，请使用也采用字段 id 的构造函数。该字段 id 应引用较大布局资源中的 TextView。

因此，您的自定义适配器类可能类似于：

```
public class CustomAdapter extends ArrayAdapter {
    private final Activity activity;
    private final List list;

    public CustomAdapter(Activity activity, ArrayList<Restaurants> list) {
        this.activity = activity;
        this.list = list;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View rowView = convertView;
        ViewHolder view;

        if(rowView == null)
        {
            // Get a new instance of the row layout view
            LayoutInflater inflater = activity.getLayoutInflater();
            rowView = inflater.inflate(R.layout.rowlayout, null);

            // Hold the view objects in an object, that way the don't need to be "re-  finded"
            view = new ViewHolder();
            view.retaurant_name= (TextView) rowView.findViewById(R.id.restaurantname);
            view.restaurant_address= (TextView) rowView.findViewById(R.id.textView1);

            rowView.setTag(view);
        } else {
            view = (ViewHolder) rowView.getTag();
        }

        /** Set data to your Views. */
        Restaurants item = list.get(position);
        view.retaurant_name.setText(item.getTickerSymbol());
        view.restaurant_address.setText(item.getQuote().toString());

        return rowView;
    }

    protected static class ViewHolder{
        protected TextView retaurant_name;
        protected TextView restaurant_address;
    }
} 
```

您的**Restaurant.java**类可以像我在下面描述的那样简单：

```
public class Restaurants {
    private String name;
    private String address;

    public Restaurants(String name, String address) {
        this.name = name;
        this.address = address;
    }
    public void setName(String name) {
        this.name= name;
    }
    public String getName() {
        return name;
    }
    public void setAddress(String address) {
        this.address= address;
    }
    public String getAddress() {
        return address;
    }
} 
```

现在，在您的主要活动中，只需将您的列表与一些数据绑定，例如；

```
/** Declare and initialize list of Restaurants. */
ArrayList<Restaurants> list = new ArrayList<Restaurants>();

/** Add some restaurants to the list. */
list.add(new Restaurant("name1", "address1"));
list.add(new Restaurant("name2", "address2"));
list.add(new Restaurant("name3", "address3"));
list.add(new Restaurant("name4", "address4"));
list.add(new Restaurant("name5", "address5"));
list.add(new Restaurant("name6", "address6")); 
```

此时您可以将自定义适配器设置为您的列表

```
ListView lv = (ListView) findViewById(R.id.mylist);

CustomAdapter adapter = new CustomAdapter(YourMainActivityName.this, list);
lv.setAdapter(adapter); 
```

这就是全部，它应该可以很好地工作，但我强烈建议您谷歌搜索一些更好的替代方案来实现其他[Adapters](http://developer.android.com/reference/android/widget/Adapter.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T22:54:29.620

你可以试试这个[https://devtut.wordpress.com/2011/06/09/custom-arrayadapter-for-a-listview-android/](https://devtut.wordpress.com/2011/06/09/custom-arrayadapter-for-a-listview-android/)。您必须使用您需要的字段创建一个自定义类 Item 并扩展[ArrayAdapter](http://developer.android.com/reference/android/widget/ArrayAdapter.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T22:59:41.420

我认为你的问题在这里：

而不是这个：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/restaurantname"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/restaurantname"
        android:textSize="23dp" >

    </TextView>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@+id/todaysmenu" />

</LinearLayout> 
```

尝试这样的事情：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/restaurantname"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="test text"
        android:textSize="23dp" >

    </TextView>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="test text" />

</LinearLayout> 
```

如果可行，请将您的文本放在 /res/val/string 文件夹中，如下所示：

```
<string name="testText">Put your text here...</string> 
```

然后像这样调用：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/restaurantname"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/testText"
        android:textSize="23dp" >

    </TextView>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/testText" />

</LinearLayout> 
```

然后，您将像这样设置动态值：

```
TextView tv = (TextView)findViewById(R.id.restaurantname);
tv.setText(values); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-05T01:50:31.157

我必须解决同样的问题并尝试使用上面回答的arrayadapter，但它没有用。

后来我成功地用baseadapter做到了——这是适配器：

```
public class BusinessAdapter2 extends BaseAdapter {
    private final ArrayList<Business> myList;
    LayoutInflater inflater;
    Context context;

    public BusinessAdapter2(Context context, ArrayList<Business> myList) {
        this.myList = myList;
        this.context = context;
        inflater = LayoutInflater.from(this.context);
    }
    @Override
    public int getCount() {
        return myList.size();
    }

    @Override
    public Object getItem(int position) {
        return myList.get(position);
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if (convertView==null) convertView = inflater.inflate(R.layout.business_list_item_2, parent, false);
        // assign the view we are converting to a local variable
        View v = convertView;
        Business b = myList.get(position);
        if (b != null) {
            TextView name = (TextView) v.findViewById(R.id.textview_name);
            TextView address = (TextView) v.findViewById(R.id.textview_address);
            TextView description = (TextView) v.findViewById(R.id.textview_description);
            TextView discount = (TextView) v.findViewById(R.id.textview_discount);

            // check to see if each individual textview is null.
            // if not, assign some text!
            if (name != null){
                name.setText(b.name);
            }
            if (address != null){
                address.setText(b.address);
            }
            if (description != null){
                description.setText(b.description);
            }
            if (discount != null){
                discount.setText(b.discountRate);
            }
        }

        // the view must be returned to our activity
        return v;
    }
} 
```

这是我使用的对象类（业务）：

```
public class Business {
    String name,address,description,discountRate;
    public Business(){}
    public Business(String name,String address,String description,String discountRate){
        this.name=name;
        this.address=address;
        this.description=description;
        this.discountRate=discountRate;
    }
} 
```

这就是我将列表视图填充到适配器中的方式：

```
ArrayList<Business> businesses2=new ArrayList<Business>(Arrays.asList(for_listview_objects));
    adapter_objects =new BusinessAdapter2(
            context, // The current context (this activity)
            businesses2);

    listView.setAdapter(adapter_objects); 
```

# apache - .htaccess - 除了两个地址，如何将一个域转发到另一个域？

> ID：11678910
> 
> 赞同：1
> 
> 时间：2012-07-26T22:22:37.777
> 
> 标签：apache, .htaccess

我有以下域 www.domainABC.com 和 www.domainABC.org

我必须将所有 www.domainABC.org 转发到 www.domainABC.com，但两个地址除外：

```
www.domainABC.org/mylist   and
www.domainABC.org/mylist/admin 
```

对 .org 域的所有其他请求都应转发到相应的 .com。

例如：

```
www.domain.org/mypage.html ... to www.domain.com/mypage.html
www.domain.org/blog/myblog?page=1 ... to www.domain.com/blog/myblog?page=1
etc., 
```

但

```
www.domainABC.org/mylist   and
www.domainABC.org/mylist/admin 
```

不应转发。

如何使用 .htaccess 上的条件来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:31:16.527

尝试将此添加到文档根目录中的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/mylist/?$
RewriteCond %{REQUEST_URI} !^/mylist/admin/?$
RewriteCond %{HTTP_HOST} ^(www.)?domainABC.org$ [NC]
RewriteRule ^(.*)$ http://www.domainABC.com/$1 [R=301,L] 
```

# jquery - jQuery 不允许我在 replaceWith 语句中操作数据

> ID：11678912
> 
> 赞同：0
> 
> 时间：2012-07-26T22:22:57.177
> 
> 标签：jquery

当页面加载时，我有一个初始 replaceWith 运行以下代码：

```
<span id="requestAlert>"
    <span class="font1">wants to be your friend&nbsp;</span>
    <input type="submit" id="acceptRequest" value="Accept" style="width: 60px; 
           height: 28px" class="button1" />&nbsp;
    <input type="submit" id="denyRequest" value="Deny" style="width: 50px; 
           height: 28px" class="button1" />
</span> 
```

然后我有以下代码，假设在页面完成加载时操作上面的代码：

```
$("#acceptFriend").live('click', function() {
   acceptFriend();
});

function acceptFriend() {
    var targetedUserId = $(document).getUrlParam("id");
    jQuery.ajax({
        type: "POST",
        dataType: "JSON",
        url: "<?=base_url()?>index.php/regUserDash/acceptFriend",
        data: { targetedUserId: targetedUserId },
        json: {acceptFriendSuccess: true},
        success: function(data) {
          if(data.acceptFriendSuccess == true) {
            $("#requestAlert").replaceWith('<span class="font1">You two are noe friends</span>');
          }
        }
    });
} 
```

我似乎无法获得上述代码来操作初始 replaceWith 代码。我想也许 .live() 可以解决问题，但显然不是。关于为什么它不起作用的任何想法？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T22:26:14.663

您的输入具有 id`acceptRequest`而您的 jQuery 具有 id `acceptFriend`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T22:25:07.210

您的 HTML 中有错误：

```
<span id="requestAlert>" 
```

应该

```
<span id="requestAlert"> 
```

# jsf-1.2 - 未调用 UnManagedBean 设置器

> ID：11678917
> 
> 赞同：0
> 
> 时间：2012-07-26T22:23:26.120
> 
> 标签：jsf-1.2, trinidad

我遇到了一个奇怪的问题，即我的 managedbean 中的属性设置器没有被调用。

我有 4 个 javabean，其中两个是托管 bean，两个是 POJO

`ManagedbeanA`有一个实例，`ManagedbeanB`它有一个`PojoA`对象的实例，它是`pojoB`在我的主 jsp 中包含的片段中呈现的列表。

对象列表`PojoB`呈现为表格，并且该表格包含可由用户编辑的文本框。问题是，当用户提交表单时，`PojoB`永远不会调用保存文本字段值的属性的设置器。

我在我的主 JSP 中包含的 JSF 片段中引用 pojoB 对象列表，如下所示，该片段包含在我的主 JSP 中，该 JSP 具有提交按钮，整个主页被

```
<t:dataList id="tableEx1"
            binding="#{managedbeanA.ManagedBeanB.pojoA.htmlDataTableforPojoB}"
            value="#{managedbeanA.ManagedBeanB.pojoA.listofpojoB}"
            var="PojoB">
  <h:outputText id="sampletext" value="#{pojoB.sampleText}"/>
</t:datalist> 
```

我正在使用特立尼达组件。

# java - 我在哪里可以找到金属外观的图标和其他资源？

> ID：11678921
> 
> 赞同：1
> 
> 时间：2012-07-26T22:23:51.740
> 
> 标签：java, customization, jbutton, look-and-feel

我希望我按下的按钮看起来被按下，但我希望通过修改 Photoshop 中金属外观的默认按钮来使其尽可能简单。从那里我可以简单地使用 jbutton.setPressedIcon() 方法并告诉它在按下时使用修改后的按钮。我没有运气，我用谷歌搜索了一堆，搜索了一堆 Stack Overflow，并在[http://docs.oracle.com/javase/6/docs/technotes/tools/linux/上检查了 JDK 文件结构的文档jdkfiles.html](http://docs.oracle.com/javase/6/docs/technotes/tools/linux/jdkfiles.html)。

我在 Mac OS X Lion 机器上，但我认为 linux 文件结构会是相似的，它只是没有引用与外观或图像相关的任何内容。

当然，我尝试使用 finder 在 jdk 文件夹中进行挖掘，并在那里找到了很多东西，但没有可以编辑的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:42:05.773

看起来这个问题解决了我的需求，我以错误的方式思考它。

[用不同的渐变重绘摇摆按钮](https://stackoverflow.com/questions/4458982/repaint-swing-button-with-different-gradient/5845007#5845007)

# java - 如何在事件驱动的通信中表示事件数据？

> ID：11678923
> 
> 赞同：1
> 
> 时间：2012-07-26T22:24:19.630
> 
> 标签：java, oop, events, data-representation

我正在尝试为我的小型 RPG 项目使用某种观察者模式创建一个中央事件调度系统，我需要有关如何最好地表示事件数据的建议。

我将有一个 EventManager，它为静态枚举中定义的不同事件类型注册侦听器类，例如 Event_Input_KeyPressed 或 Event_Game_ActorMoved。它将事件存储在一个队列中并将它们分派给相应的侦听器，每个侦听器都有一个方法 handleEvent(Event e) 或其他东西。

每个事件都将是 Event 类型的对象，其中包含诸如其事件类型之类的数据。

我的问题是，由于事件数据的性质在事件类型之间存在很大差异，应该如何表示这些数据？我还不确定我将来要创建什么类型的事件，所以我希望它尽可能灵活。例如，如果某些条件为真，一个事件可能会触发其他事件（即当玩家按下操作键时，如果玩家在某个位置并且有钥匙，则门会打开）。XML 或脚本是一个不错的选择吗？我能想到的另一种方法是为每个常规事件创建一个自定义类，例如 ActorEvent 或 MenuEvent，但这似乎效率低下且不灵活。此外，由于某些对象（例如 Character）只需要知道非常具体的事件，例如按下“w”键时，我认为当其他键（例如“h”）时不需要通知它们 被按下。创建特定的事件类型是否可行或有更好的方法？IE。Event_Input_KeyPressed_W

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T02:16:53.643

*   正如您所说，不同事件类型的结构不同，最好为每个事件创建具体的类。您不需要为每个键创建一个类！但通常是键盘事件
*   你说字符应该只被通知特定的键。我不知道通知角色并让该对象忽略不相关的键的开销是多少，但如果这是类之间的常见模式，例如您有 10 个不同的类可能会对一组特殊的键做出反应，那就太好了不重复代码并在事件和侦听器之间实现调度程序层。一种调度程序可以是 KeyFilterDispatcher，它接收键列表并基于该列表过滤事件。另一种调度程序可以是 seqDispatcher，它仅在以特定顺序考虑多个事件时才干扰侦听器！我喜欢 MadProrammer 所说的可插拔调度程序的想法。此外，您可能还想创建调度程序管道！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T22:55:14.357

1.  创建事件的具体实现，从`Event`基础对象扩展。首先，分发对象会更容易——即在您的队列中，您只需要`instanceof`确定如何处理对象。
2.  您的事件侦听器代码变得更加简单和更严格的控制。鼠标事件不可能超过键事件。此外，您无需在侦听器级别测试和强制转换事件对象
3.  我不明白为什么你不能创建一个“过滤”的事件监听器，它只想被通知特定事件的特定条件，事实上，我认为这是一个好主意。
4.  我可能会设计某种可插入的调度机制。这意味着当你添加一个新的事件类型时，你不需要更新队列，你可以简单地注册一个新的调度器。根据您可能想要实现的目标，您的队列会将事件传递给调度程序（为调度程序提供一些获取侦听器列表的方法）。调度程序将确定它是否知道如何处理事件。然后分派器将事件分派给所需的侦听器（并取决于您想要实现的目标），返回一个结果，说明事件是否已分派。

那是MHO

# php - 如果文件存在，则包含在所有文件中

> ID：11678927
> 
> 赞同：0
> 
> 时间：2012-07-26T22:24:31.590
> 
> 标签：php

我对 PHP 相当陌生，我想知道是否可以放置一个“如果文件存在则包含”所有列出的文件。我正在使用不同的 HTML 模板，其中一些不包含由 PHP 文件解释的代码。

编辑：请对评论进行投票和否决，因为我不知道要使用哪个答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:32:32.503

the *include* statement differs from the *require* statement that it only generates a warning (rather than an error), which could be silenced with the *@* operator.

However, I'd recommend getting used to error handling... writing a template engine isn't that hard in PHP... This one is about the shortest:

```
class Template {
  private $_scriptPath=TEMPLATE_PATH;//comes from config.php
  public function setScriptPath($scriptPath){
      $this->_scriptPath=$scriptPath;
  }
  public function render($filename){

      ob_start();
      if(file_exists($this->_scriptPath.$filename)){
          include($this->_scriptPath.$filename);
      } else throw new TemplateNotFoundException();
      return ob_get_clean();
  }
} 
```

Use it like

```
$v = new Template();
$v->someProperty="value";
$v->render('myview.php'); 
```

(Albeit this still has problems with non-existing properties (works, but will throw warnings), for that you'll need so-called magic functions like __set and __get)

As for not having any PHP code in an HTML, it doesn't matter for PHP... it'll just show the HTML instead. But you'll quickly move to frameworks hopefully..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T22:29:38.860

您可以使用 auto_prepend_file ini 设置在任何代码运行之前设置要包含的文件。如果您通过 CGI 使用 PHP，您可以通过在运行脚本的目录中添加 php.ini 来进行设置，然后添加

```
auto_prepend_file = ../prepend.php 
```

.. 在任何其他文件之前自动插入和解析 ../prepend.php。

如果您使用的是常规的 PHP Apache 模块，如果您的服务器允许覆盖 .htaccess 中的 PHP 值，则可以在 .htaccess 中设置它：

```
php_value auto_prepend_file ../prepend.php 
```

如果你想避免使用 .htaccess 文件，你也可以在指令中设置配置。

这确实要求您正在谈论的文件将被解析为 PHP（否则 PHP 的配置值不会做任何事情，因为没有为请求加载或初始化 PHP）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T22:33:28.880

尝试这样的事情：

```
function include_if_exists($path) {
    if( @file_exists($path) && is_file($path) ) {
        include($path);
    }
}

include_if_exists("lib/mylibrary.php");

//... 
```

您还可以使用自动加载器来搜索类库文件，具体取决于您要完成的任务。见[http://us2.php.net/manual/en/language.oop5.autoload.php](http://us2.php.net/manual/en/language.oop5.autoload.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T22:30:04.433

PHP 为我们提供了一些工具来测试文件是否存在。

1.  [`is_file()`](http://php.net/manual/en/function.is-file.php)— 判断文件名是否为普通文件

2.  [`file_exists()`](http://php.net/manual/en/function.file-exists.php)— 检查文件或目录是否存在

# python - 根据用户对函数的输入访问文件名的一部分——Python

> ID：11678933
> 
> 赞同：0
> 
> 时间：2012-07-26T22:25:19.657
> 
> 标签：python

我是一个新手，试图弄清楚如何完成以下任务：

我有以下格式的以用户命名的字典：

```
<user>_hx 
```

我想使用如下函数访问它们：

```
def foo(user, other_stuff):
  user_hx[key] 
```

......ETC。

我尝试使用 % 访问如下：

```
def foo(user, other_stuff):
  %r_hx %user[key] 
```

但由于显而易见的原因，我知道这是行不通的。

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:31:48.817

What I think you are asking is how to access a variable based on a string representing its name. Python makes this quite easy:

```
globals()['%s_hx' % user] 
```

will give you the variable `<user>_hx`, so you just want

```
globals()['%s_hx' % user][key] 
```

(I'm not sure whether you should be using `globals()` or `locals()`; it will depend on how your variables are defined and where you are trying to access them from)

That said, there is probably an easier/cleaner way to do whatever you are doing. For instance, have you considered putting all these dictionaries in a 'master' dictionary so that you can pass them around, as well as just access them

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T00:31:48.973

不要将名称用作变量。您可以将您的字典集合放在另一个顶级字典中，并将这些名称作为键。

```
users = {
    "user1_hx": {"name": "User 1"},
    "user2_hx": {"name": "User 2"),
    } 
```

等等

然后访问为：

```
realname = users["%s_hx" % name]["name"] 
```

等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T22:32:36.283

```
def foo(user,other_stuff):
     fname = "%s_hx"%user[key] #not sure where key is comming from... but would result in something like "bob_hx"
     with open(fname) as f:
          print f.read() 
```

maybe?/

# jquery - 如何更改表格中空单元格的背景颜色？

> ID：11678935
> 
> 赞同：1
> 
> 时间：2012-07-26T22:25:25.617
> 
> 标签：jquery, html, css

我在一个表中有四列，只有为空的字段才需要有红色背景。我正在编辑的数据库对所有列都有一个类（.data），所以我不知道是否需要向每一列添加单独的类以使其工作，或者是否有一种方法可以通过 jQuery 来区分在空白单元格之间并仅在表格的四列中更改背景颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T22:30:39.920

A very simple way of doing it would be:

```
$("td:empty").css('background-color', 'red'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:28:07.807

你想要的真的很简单：

*   对于`<td>`表中的每个
*   如果 不`<td>`包含文本
*   更改为`backgroundColor`红色

这给出了：

```
$('td').each(function () {
    if ($(this).text() == '') {
        $(this).css('backgroundColor', 'red');
    }
}); 
```

另一种使用 jQuery 选择器功能的更短的方法：

```
$('td:empty').css('backgroundColor', 'red'); 
```

都是一样的，只是更短。

最后，您可能会遇到一个特殊情况：如果您的代码使用空格缩进，即使您`<td>`不包含文本，jQuery 也会说您`<td>`的不是空的。要解决这种情况，请使用以下小代码：

```
$('td').text( $.trim( $('td').text() ) ); 
```

`$.trim()`删除无用的空格。

[试试这个演示来了解](http://jsfiddle.net/rHQnj/1)。

在您的情况下，像这样应用它：

```
$('td').each(function () {
    $(this).text( $.trim( $(this).text() ) );
    if ($(this).text() == '') {
        $(this).css('backgroundColor', 'red');
    }
}); 
```

# linux - 根据字典替换文本

> ID：11678939
> 
> 赞同：4
> 
> 时间：2012-07-26T22:25:52.140
> 
> 标签：linux, perl, unix, sed, awk

我需要做一些与这篇文章类似的事情（但有所不同）。这就是我问的原因。

[Unix shell：用字典替换](https://stackoverflow.com/questions/6385609/unix-shell-replace-by-dictionary)

我有一本字典（dict.txt）。它是空格分隔的，内容如下：

V7 动量

B6广达

……

（从某种意义上说，第一列是键，第二列是值）

我有一个用户文件（user.txt），它包含键（V7、B6 等）的出现。扭曲是键不在其自己的列中（因此上述帖子中的方法不适用）。

用户文件 (user.txt) 可以被视为字符流。我只想替换所有出现的键（例如，V7），无论它们是由空格限制还是由从字典中查找的值（Momentum）限制的其他字符。

例如：

“我们有 V7 作为输入”--> 应该更改为-->“我们有 Momentum 作为输入”

“我们有 somethingV7_as 输入”--> 应该更改为 --> “我们有 somethingMomentum_as 输入”

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T22:44:06.240

用法：`awk -f foo.awk dict.dat user.dat`
[http ://www.gnu.org/software/gawk/manual/html_node/String-Functions.html](http://www.gnu.org/software/gawk/manual/html_node/String-Functions.html)
[http://www.gnu.org/software/gawk/manual/html_node/Arrays.html](http://www.gnu.org/software/gawk/manual/html_node/Arrays.html)

```
NR == FNR {
  rep[$1] = $2
  next
} 

{
  for (key in rep)
    gsub(key, rep[key])
  print
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T00:01:23.633

只要你的字典键只包含字母数字字符，这个 Perl 就可以满足你的需要。

```
use strict;
use warnings;

open my $fh, '<', 'dict.txt' or die $!;
my %dict =  map { chomp; split ' ', $_, 2 } <$fh>;
my $re = join '|', keys %dict;

open $fh, '<', 'user.txt' or die $!;
while (<$fh>) {
  s/($re)/$dict{$1}/g;
  print;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-27T06:43:50.847

这可能对您有用（GNU sed）：

```
sed '/./!d;s/\([^ ]*\) *\(.*\)/\\|\1|s||\2|g/' dict.txt | sed -f - user.txt 
```

# html - 明确的问题：对；在 Internet Explorer 中

> ID：11678949
> 
> 赞同：0
> 
> 时间：2012-07-26T22:26:54.150
> 
> 标签：html, css, internet-explorer

当我清除时，IE 没有显示 Internet Explorer 无法正常工作，我遇到了一些问题：对；

```
<div style="border-width:1px 0 0 0; border-style:solid; border-color:#ffae00; height:100px; width:450px;">

<div style="border:1px solid #ffae00; height:100px; width:100px; margin:-1px; float:left;"> Image </div>
<div style="float:left; padding:10px 0 0 10px; height:70px;"> Topic </div>
<div style="float:right; padding:35px 30px 0 0; height:45px; width:50px;"> Select </div>
<div style="clear:right; text-align:center; height:20px; width:450px;"> more </div>

</div> 
```

这是我的代码。在 chrome 中，我的“更多”div 就在它上面最右边的 2 个 div 下方，但在 IE 中，它似乎只使用 clear 两者。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:24:50.657

弄清楚了。把右边的所有东西都放到自己的div里，然后用clear:both。因为它在自己的 div 中，所以它只影响最右边的 2 个 div。

```
<div style="border-width:1px 0 0 0; border-style:solid; border-color:#ffae00; height:100px; width:450px;">

<div style="border:1px solid #ffae00; height:100px; width:100px; margin:-1px; float:left;"> Image </div>

<div style="float:right; height:100px; width:349px;">
<div style="float:left; padding:10px 0 0 10px; height:80px"> Topic </div>
<div style="float:right; padding:35px 30px 0 0; height:45px; width:50px;"> Select </div>
<div style="clear:both; text-align:center; height:20px; width:100%;"> more </div>
</div>

</div> 
```

# python - Django DynamoDB 数据库后端

> ID：11678950
> 
> 赞同：8
> 
> 时间：2012-07-26T22:27:00.500
> 
> 标签：python, django, amazon-web-services, amazon-dynamodb, django-database

是否可以将 AWS DynamoDB 设置为支持 Django 服务器的数据库？如果是这样，我将如何去做？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T00:29:05.253

我认为答案是没有简单的方法。Django 支持关系数据库，但 DynamoDB 是 NoSQL。

django-nonrel 似乎没有后端，这是非关系数据库的非官方分支。

如果您想使用 amazon 来托管数据库，您可以使用他们的 RDS 服务并像配置 MySQL 一样配置 Django。

# javascript - FancyBox 将 DIV 的内容显示为 iFrame 类型

> ID：11678956
> 
> 赞同：4
> 
> 时间：2012-07-26T22:27:24.777
> 
> 标签：javascript, jquery, iframe, fancybox

这工作得很好：

```
<script type="text/javascript">
   $(document).ready(function() { 
       $.fancybox({'href' : 'http://www.cnn.com','frameWidth':500,'frameHeight':500,'hideOnContentClick': false,'type':'iframe'});
   });
</script> 
```

也就是说，FancyBox 打开并显示 CNN 主页。但是，如果我将 href 属性更改为“#pg”

并以这种方式编码页面：

```
 <body>

    <div id="pg"></div>

    <script type="text/javascript">
     document.getElementById("pg").innerHTML = "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"><html xmlns=\"http://www.w3.org/1999/xhtml\"><head><title></title></head><body>test me now</body></html>";
    </script>
</body> 
```

FancyBox 打开，但不显示任何文本。（文本“text me now”显示在#pg div 元素中。注意它被分配到页面末尾的 DIV 的 innerHTML。）

基本上，我想知道是否有一种方法可以动态初始化 DIV 的 innerHTML 属性并将其显示为 FancyBox 类型的 iFrame？（iFrame 的内容将有一个打印 iFrame 文档的按钮。）

TIA

**更新：2012 年 7 月 28 日**

正如@arttronics 建议的那样，我整理了一个[jsFiddle](http://jsfiddle.net/taa1953/tBTZQ/)

总而言之，最终目标是能够单击 FancyBox 中包含的按钮，该按钮打印 FancyBox 的**全部**内容，而**无需**打开另一个窗口。（我想使用 FancyBox 作为 Javascript 解析的内容的报告查看器。）

我假设我需要使用 FancyBox 的 iframe 播放器显示内容，但我可能错了。

**jsFiddle 显示：**

FancyBox 能够显示使用内联播放器验证为 HTML 页面的文本。文本可以通过`href`或引用`content`。

但是，当播放器为 an`iframe`且内容来自 时`href`，FancyBox 容器为空。如果内容来自`content`属性，FancyBox 会显示 404 错误。

只需注释和取消注释 jsFiddle 代码即可了解我的意思。

任何关于如何实现我的目标的想法都会受到赞赏，并将获得支持！

TIA。

**更新：2012 年 7 月 31 日**

这个新的 jsFiddle 示例：[Iframe 报告查看器可以工作，但不能在 FancyBox 中使用](http://jsfiddle.net/taa1953/BunDC/)

如您所见，我尝试了几种方法来`iframe`在 FancyBox 中显示。虽然 FancyBox 确实显示了 的内容`iframe`，但打印功能中断了。

我认为解决此问题的一种方法是在加载后将 myContent var 的内容写入 FancyBox，但我无法 (A) 找到要写入的正确 DOM 节点，并且 (B) 我可以' t 让 FancyBox`iframe`在`iframe` `src="about:blank"`.

有什么建议么？或者您是否看到了修复 jsFiddle 示例的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T11:59:53.573

你真的希望这会在 iframe`<iframe src="#myID"></iframe>`中打开一个具有 id 的元素吗？`myID`

如果要打印 fancyBox 的内容，可以添加打印按钮 - [http://jsfiddle.net/s3jRA/](http://jsfiddle.net/s3jRA/)

更新了演示 - [http://jsfiddle.net/qVrLr/](http://jsfiddle.net/qVrLr/) - 用于创建和更新 iframe 的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T13:07:36.540

通常情况下，我是在向后看。解决方案（带有警告）是这样的，而不是使用 iframe 播放器显示 div 元素，而是在 html 中隐藏 iframe 并使用内联播放器显示它。

请参阅此工作示例：[jsFiddle](http://jsfiddle.net/taa1953/ZZ8ZT/)

这解决了在不打开另一个窗口的情况下能够打印动态内容的问题。此外，如果文本溢出 FancyBox，仍会打印全部内容。（当我打印 FancyBox 并将各种页面元素的可见性样式更改为隐藏时，我无法做到这一点）。

**主要注意事项**

我已经在 IE 8 中对此进行了测试并且它可以工作，但是我仍然无法让它在 Chrome 中工作。

尝试这种方法的一个原因是我假设我能够在动态页面内容中包含@media 打印样式。由于某种原因，该技术不起作用（无论如何在 IE 中）。但是，内联样式与 HTML 标记标签一样工作（请注意`<strong>`jsFiddle 示例中的标签：var myContent）。所以有些奇怪。

# c# - 在 webBrowser 控件中隐藏滚动条

> ID：11678973
> 
> 赞同：15
> 
> 时间：2012-07-26T22:29:08.643
> 
> 标签：c#, winforms

我正在为 Windows 窗体开发 HTML 显示控件。我使用 webBrowser 控件作为控件的基础，我需要隐藏 webBrowser 滚动条，因为它看起来很糟糕，永远不会被使用，并且使控件看起来像破坏布局的网页。目前，滚动条呈现在控件上，看起来非常沮丧和变灰。有没有办法简单地将它全部删除？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-26T22:35:56.827

有一个属性：

```
webBrowser1.ScrollBarsEnabled = false; 
```

> 指定 WebBrowser 控件是否应具有滚动条。

但是，如果查看的网页大于当前控件的大小（并非在所有情况下），它们“可以”出现。

这个答案[允许用鼠标滚动但不显示浏览器滚动条？](https://stackoverflow.com/a/7639333/719186)显示此方法：

```
void webBrowser1_DocumentCompleted(object sender, 
                                   WebBrowserDocumentCompletedEventArgs e) {
  webBrowser1.Document.Body.Style = "overflow:hidden";
} 
```

# python - Python argparse：在使用字符串中显示 parse_known_args 模式

> ID：11678977
> 
> 赞同：7
> 
> 时间：2012-07-26T22:29:35.857
> 
> 标签：python, argparse

使用 Python 的[argparse](http://docs.python.org/library/argparse.html)模块时，您可以使用[`parse_known_args()`](http://docs.python.org/library/argparse.html#argparse.ArgumentParser.parse_known_args)它仅解析解析器已知的参数，并且单独返回任何其他参数。

然而，这个事实并没有在用法/帮助字符串中表示。当然我可以把它放在`description`解析器的领域，但我想知道是否有一种很好的方法可以将它包含在使用行中。

我正在寻找的是例如的输出`usage: test [-h] ...`而不是`usage: test [-h]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T22:45:17.400

我认为您可以结合[`format_usage()`](http://docs.python.org/library/argparse.html#printing-help)和 ArgumentParser 属性来做到这一点[`usage`](http://docs.python.org/library/argparse.html#usage)。请注意，该部分将用法显示为构造函数的关键字参数，但是，检查[源代码](http://hg.python.org/cpython/file/2.7/Lib/argparse.py#l1576)表明`usage`您可以在构造后访问它作为`parser.usage`.

我想你的最终解决方案看起来像：

```
parser = argparse.ArgumentParser()
# Add arguments...
usage = parser.format_usage()
parser.usage = usage.rstrip() + ' ...\n' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T01:02:39.743

`parse_known_args()`是为了方便程序员编写程序，不是程序用户需要操心的事情。如果您正确定义命令行参数，`argparse`则会自动为您提供类似的东西：

```
>>> import argparse
>>> p = argparse.ArgumentParser(prog='command')
>>> x=p.add_argument("foo", nargs=argparse.REMAINDER)
>>> p.parse_args(["--help"])
usage: command [-h] ...

positional arguments:
  foo

optional arguments:
  -h, --help  show this help message and exit 
```

# c# - 允许用户设置自己的菜单快捷方式

> ID：11678982
> 
> 赞同：1
> 
> 时间：2012-07-26T22:30:00.840
> 
> 标签：c#, winforms

我正在关注设置菜单快捷键的教程，并且已经弄清楚如何添加它们。
现在我在想，也许 ctrl+O 太繁琐而无法显示 openFile 对话框。或者用户可能缺少他们的 ctrl 键（或者从来没有任何开始！）

所以我想添加一个对话框，允许用户自定义快捷键。它可能会涉及一个列表视图，该列表视图获取所有菜单栏选项的列表以及他们想要使用的实际快捷方式的文本框。

*   这可以做到吗？我不确定是否可以动态修改快捷键。
*   我是否必须将快捷键保存在外部配置文件中，并通过从文件中读取而不是在设计器中设置来更改设置快捷键的方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T22:37:12.390

快捷键可以使用[Shortcut Property](http://msdn.microsoft.com/en-us/library/system.windows.forms.menuitem.shortcut%28v=vs.90%29.aspx)动态设置。为此，您必须将快捷键保存到某种 XML 配置文件中。当您的应用程序启动时，它应该读取此 XML 文件，然后通过设置我在上面链接您的属性来动态设置快捷方式！

# opengl-es - Using GLshort instead of GLfloat for vertices

> ID：11678986
> 
> 赞同：6
> 
> 时间：2012-07-26T22:30:12.193
> 
> 标签：opengl-es, opengl-es-2.0

I'm attempting to convert my program from GLfloat to GLshort for vertex positions and I'm not sure how to represent this in the shader. I was using a vec3 datatype in the shader but vec3 represents 3 floats. Now I need to represent 3 shorts. As far as I can tell OpenGL doesn't have a vector for shorts so what am I supposed to do in this case?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-26T22:33:38.640

> 我不确定如何在着色器中表示它。

那是因为这些信息并不存在于着色器中。

提供的所有值`glVertexAttribPointer`都将*转换*为浮点 GLSL 值（如果它们还不是浮点数）。这种转换基本上是免费的。因此，您可以将这些`glVertexAttribPointer`定义中的任何一个与`vec4`属性类型一起使用：

```
glVertexAttribPointer(0, 4, GL_FLOAT, GL_FALSE, ...);
glVertexAttribPointer(0, 4, GL_UNSIGNED_SHORT, GL_TRUE, ...);
glVertexAttribPointer(0, 4, GL_SHORT, GL_TRUE, ...);
glVertexAttribPointer(0, 4, GL_SHORT, GL_FALSE, ...); 
```

`vec4` *所有这些都将自动*转换为. 您的着色器不必知道或关心它正在被提供短裤、字节、整数、浮点数等。

第一个将按原样使用。第二个将无符号短范围 [0, 65535] 转换为 [0.0, 1.0] 浮点范围。第三个将带符号的短范围 [-32768, 32767] 转换为 [-1.0, 1.0] 范围（[尽管转换有点奇怪，并且对于某些 OpenGL 版本有所不同，以便允许整数 0 映射到浮点点 0.0](https://www.opengl.org/wiki/Normalized_Integer#Signed)）。第四个将 [-32768, 32767] 转换为 [-32768.0, 32767.0]，作为浮点范围。

您用于属性的 GLSL 类型只有在您使用`glVertexAttribIPointer`or时才会发生变化`glVertexAttribLPointer`，这在 OpenGL ES 2.0 中都不可用。

简而言之：您应该始终对属性使用浮点 GLSL 类型。OpenGL 将为您进行转换。

# asp.net-mvc-4 - ScriptBundle not rendering scripts that are in a VirtualDirectory

> ID：11678987
> 
> 赞同：2
> 
> 时间：2012-07-26T22:30:16.960
> 
> 标签：asp.net-mvc-4

I have a modular asp.net app where the modules are deployed inside virtual directories underneath the primary .net web application. We have a common module with a lot of stuff. I tried to move all of the common script files out of each client specific project into a common module.

If I create a script bundle that references files at the root level, it renders the script tag into the html. But it won't render script tags for bundles that point to files in a sub virtual directory.

For example:

```
bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                    "~/App_Modules/Common/Scripts/jquery-1.*")); 
```

no longer renders any script tag and now I get jquery errors client side. I looked at the resultant html, and now there's no more script tag to download the jquery library.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T11:35:50.820

我有同样的问题。根本原因是我在包中只包含了缩小的脚本。一旦我将未压缩的脚本放入脚本目录中，它就会正确呈现它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T19:40:38.680

不幸的是，捆绑还不支持 VirtualPathProviders，因此如果您的虚拟路径依赖于 VPP 来提供资源，捆绑将无法找到它们。这是我们目前正在调查的一个场景，希望很快能得到支持。

# iphone - phonegap vs objective-c web-kit

> ID：11678988
> 
> 赞同：0
> 
> 时间：2012-07-26T22:30:24.493
> 
> 标签：iphone, cordova, webkit

Can somebody tell me what are pros and cons when developing with phonegap or objective-c and web-kit. In other words, if you want to develop (html,css,js) based application is it better to develop it in phonegap or in objective-c with

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:38:11.927

首先，谷歌“Native vs web-app”。那里有几个很好的指南和比较，您在 phonegap 中所做的大部分工作都在 web-app 领域。使用网络技术的优点是它更容易移植到其他平台，它还允许您使用 HTML、CSS 和 Javascript 一些 Apache 声明和其他可能在未来几年内相对稳定的零食，而不是学习目标- C、Java 和许多 API。原生应用程序的一大优点是速度（对于大多数应用程序来说可能不是最大的问题），它也是一些无法通过浏览器或 Web 应用程序运行时实现的功能（这就是 Phonegap 试图填补空白的地方） . 还，

# eclipse - Can I build Google Closure projects in Eclipse while building with Plovr?

> ID：11678993
> 
> 赞同：1
> 
> 时间：2012-07-26T22:30:50.327
> 
> 标签：eclipse, google-closure, plovr

I want to use an IDE to develop my application that uses the Google Closure javascript library. I am currently editing all my javascript files in vim and compiling using Plovr.

However, I would like to harness the power of an IDE that can check for errors and show types to me as I develop. Can I use Eclipse to develop applications that use Google Closure?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T02:24:58.327

Closure Library 讨论组中有一些关于使用 IDE 开发 Closure Web 应用程序的主题，例如：***[IDE for use with google closure？](https://groups.google.com/forum/?fromgroups#!topic/closure-library-discuss/9X7oKXwX-lA)***

我使用 IntelliJ IDEA 结合 plovr 开发 Closure 应用程序，但使用 Eclipse 应该是非常相似的体验。当我在 Intellij 中编辑代码时，我经常运行 plovr 服务器，这样我只需刷新浏览器就可以快速查看应用程序中的代码更改情况。

***[Plovr 作者 Michael Bolin 在回答 stackoverflow 问题 Gettingclosure -compiler and Node.js to play nice](https://stackoverflow.com/a/8358980/1164465)***时分享了他的开发过程的一些见解。

# python - How can I report an error if the existing dictionary sees another item in python with the same key but different value

> ID：11678994
> 
> 赞同：1
> 
> 时间：2012-07-26T22:31:00.140
> 
> 标签：python

Firstly, Suppose I have a dictionary like given below:

```
temp = {'A': 3, 'S': 1} 
```

Now if I encounter an item like `'A': 4` will it be added to the dictionary something like:

```
temp = {'A': 4, 'S': 1} 
```

leaving behind the previously value of key `A` which was `3`

Secondly, if my dictionary is

```
{'A': 3, 'S': 1} 
```

How can I report an error if the dictionary sees another item like `'A': 4` or `'S': 5`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T22:34:20.517

您可以测试以查看字典中是否已存在键：

```
if 'A' in temp:
    # report the error 
```

要合并两个字典，您可以通过从它们中创建集合并确保交集为空来测试键是否重叠：

```
if set(temp.keys()).intersection(set(other.keys())):
    # report the error 
```

如果可以有一个重复的键，只要它是相同的值，对上面的一个简单的改变就会给你：

```
if 'A' in temp and temp['A'] != 4:
    # can't insert the new value 'A': 4

if [True for x in set(temp.keys()).intersection(set(other.keys())) if temp[x] != other[x]]:
    # at least one value in temp doesn't match a value in other 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T22:35:50.493

寻找这样的东西？

```
temp = {
  'A': 3
  'S' : 1
}

def insert_or_raise(k, v) {
   global temp # assuming temp is global and accessible
   val = temp.get(k, None)
   if not val:
       temp[k] = v
       return
   if v != val:
       raise Error("values are not same , already inserted %s for key %s " % (val, k)) 

}

insert('B', 1) # inserts okay
insert('B', 1) # does nothing, same key, value pair exists
insert('B', 2) # raise Error value is not 1 for key B 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T22:38:56.870

```
def strictInsert( existingDict, key, value ):
    # check to see if the key is present
    if key in existingDict:
        # assuming you only want an error if the new value is 
        # different from the old one...
        if existingDict[key] != value:
            # raise an error
            raise ValueError( "Key '%s' already in dict"%key )
    else:
        # insert into the dict
        existingDict[key] = value

temp = {'A': 3, 'S': 1} 

strictInsert( temp, 'A', 4 ) 
```

这产生：

```
Traceback (most recent call last):
  File "so.py", line 15, in <module>
    strictInsert( temp, 'A', 4 )
  File "so.py", line 8, in strictInsert
    raise ValueError( "Key '%s' already in dict"%key )
ValueError: Key 'A' already in dict 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T22:39:17.727

做到这一点的最好方法可能是子类化`dict`和覆盖`__setitem__()`以在密钥已经存在时引发异常。除非有人知道预先存在的一次性字典`collections`或其他东西......

```
class WriteOnceDict(dict):

    def __setitem__(self, key, value):
        try:
            retrieved_value = self[key]
        except KeyError:
            super(WriteOnceDict, self).__setitem__(key, value)
        if retrieved_value != value:
            raise KeyError('Different value already added for %s.' % key)

mydict = WriteOnceDict()
for key, value in input_data: #or appropriate code for whatever your input data is
    mydict[key] = value 
```

# ruby-on-rails - Complex use of cancan

> ID：11678996
> 
> 赞同：2
> 
> 时间：2012-07-26T22:31:13.370
> 
> 标签：ruby-on-rails, cancan

We're using cancan to authorize access to ~130 controllers, as things currently stand, this process takes ~100ms per authorization .. that is super slow (it literally takes around a second to just render the menu bar)

Is there techniques for breaking up cancan to simplify the work it needs to do per authorization, or in general speeding it up?

Does anyone have any cancan experiences to share?

* * *

Let me try to explain a bit better then .. We have cancan combined with a custom role system. Each role has a number of permissions, and based on if the user is allowed to do certain things, the cancan rules get dynamically built allowing it. In the end there is just one ability.rb file with a few hundred lines of rules which are dynamic based on the currently logged in user's role's permissions. (the roles are dynamic too).

The DB queries are already optimized, everything is eager loaded ahead of time and there is no wasteful queries done to fetch any of that stuff, but somewhere in there 100ms pass per check.

# asp.net-web-api - Why am I getting a 404 response from my POST in web api?

> ID：11678999
> 
> 赞同：20
> 
> 时间：2012-07-26T22:31:32.633
> 
> 标签：asp.net-web-api

I have the following action in my Web api controller:

```
 // POST api/<controller>
    [AllowAnonymous]
    [HttpPost]
    public bool Post(string user, string password)
    {
         return true; 
    } 
```

I am getting the following error with a 404 status when hitting it with either fiddler or a test jQuery script:

{"Message":"No HTTP resource was found that matches the request URI '[http://localhost/amsi-v8.0.0/api/account](http://localhost/amsi-v8.0.0/api/account)'.","MessageDetail":"No action was found on the controller 'Account' that matches the request."}

My http route is as follows:

```
 RouteTable.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

Gets work fine. I found another question here which talks about removing WebDAV from IIS. I tried that, still same issue.

Why do I get a 404?

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-27T09:07:39.303

ASP.NET Web API 中的默认操作选择行为也关心您的操作方法参数。如果它们是简单类型的对象并且它们不是可选的，则需要提供它们才能调用该特定的操作方法。在您的情况下，您应该发送一个针对 URI 的请求，如下所示：

> /api/account?user=Foo&password=bar

如果您想在请求正文而不是查询字符串中获取这些值（这是一个更好的主意），只需创建一个 User 对象并相应地发送请求：

```
public class User { 
    public string Name {get;set;}
    public string Password {get;set;}
} 
```

要求：

> POST http://localhost:8181/api/account HTTP/1.1
> 
> 内容类型：应用程序/json
> 
> 主机：本地主机：8181
> 
> 内容长度：33
> 
> {“名称”：“foo”，“密码”：“bar”}

您的操作方法应如下所示：

```
public HttpResponseMessage Post(User user) {

    //do what u need to do here

    //return back the proper response.
    //e.g: If you have created something, return back 201

    return new HttpResponseMessage(HttpStatusCode.Created);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-12T01:48:52.960

当我们发布一个 json 时，它需要一个类，所以像这样在模型文件夹中创建类

```
public class Credential
{
    public string username { get; set; }
    public string password { get;set; }
} 
```

现在更改参数

```
[HttpPost]
public bool Post(Credential credential)
{
     return true; 
} 
```

现在尝试一切都会顺利进行