# StackOverflow 问答 12087000-12087999

# javascript - 如何获得正确的 UIWebView 内容高度？

> ID：12087002
> 
> 赞同：1
> 
> 时间：2012-08-23T07:47:42.900
> 
> 标签：javascript, iphone, ios, uiwebview

我在 View 中添加 UIWebView，在 ScrollView 中添加该视图。

我想获取 UIWebView 内容的框架。那么我可以将框架设置为查看和滚动视图吗？

我知道我们可以通过使用 javascript 来获得高度。如下所述：

```
float height = [[webView stringByEvaluatingJavaScriptFromString:@"document.body.offsetHeight;"] floatValue]; 
```

但是当我在`didRotateFromInterfaceOrientation::(UIInterfaceOrientation)fromInterfaceOrientation`方法中旋转视图并重新计算 UIWebView 内容的高度时，内容高度增加了。

所以请建议我在旋转方向时如何获得合适的高度？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T07:57:47.810

采用这种方法：

```
- (void) webViewDidFinishLoad:(UIWebView *)webView{
    CGRect frame = wvContent.frame;
    CGSize fittingSize = [wvContent sizeThatFits:CGSizeZero];
    frame.size = fittingSize;
    wvContent.frame = frame;
} 
```

然后在每次设备旋转时调用此方法：

```
- (void) reloadContent
{
    CGRect frame = wvContent.frame;
    frame.size.height = 1;
    frame.size.width = wvContent.frame.size.width; // you should change webview's width here.
    wvContent.frame = frame;

    [wvContent loadHTMLString:yourHTML baseURL:nil]; // reload webview
} 
```

希望有所帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:35:29.520

确保在加载所有内容后检索高度。

`UIWebView`您可以在委托方法中添加一个计算高度的方法

```
- (void)webViewDidFinishLoad:(UIWebView *)webView{
    float height = [[webView stringByEvaluatingJavaScriptFromString:@"document.body.offsetHeight;"] floatValue];
} 
```

# java - .class 文件的名称和位置在哪里定义？

> ID：12087007
> 
> 赞同：3
> 
> 时间：2012-08-23T07:48:01.207
> 
> 标签：java, specifications, .class-file

[对此问题](https://stackoverflow.com/q/1654889/)最赞成的答案建议在特定文件夹中搜索具有特定名称的类文件，作为反映匿名内部类的解决方法。在哪个文档（如果有）中指定了 Java 类文件的名称和位置？

[VM-spec](http://docs.oracle.com/javase/specs/jvms/se7/html/index.html)包含类文件格式的详细规范，但似乎没有关于它们应该如何命名以及它们应该存储在哪里的规范。同样，[语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/index.html)似乎也没有涉及这个主题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T08:06:30.930

从[Class 类的源代码（getSimpleName 方法）](http://www.docjar.com/html/api/java/lang/Class.java.html)：

```
 1137           // According to JLS3 "Binary Compatibility" (13.1) the binary
 1138           // name of non-package classes (not top level) is the binary
 1139           // name of the immediately enclosing class followed by a '$' followed by:
 1140           // (for nested and inner classes): the simple name.
 1141           // (for local classes): 1 or more digits followed by the simple name.
 1142           // (for anonymous classes): 1 or more digits. 
```

提到的文件：[JLS3“二进制兼容性”（13.1）](http://docs.oracle.com/javase/specs/jls/se7/html/jls-13.html#jls-13.1)这样声明（更精确但不太简洁）：

> 此外，生成的类文件必须具有某些属性。专门选择了许多这些属性来支持保持二进制兼容性的源代码转换。所需的属性是：
> 
> 类或接口必须以其二进制名称命名，必须满足以下约束：
> 
> 顶级类型的二进制名称（第 7.6 节）是其规范名称（第 6.7 节）。
> 
> 成员类型的二进制名称（第 8.5 节、第 9.5 节）由其直接封闭类型的二进制名称、$ 和成员的简单名称组成。
> 
> 本地类的二进制名称（第 14.3 节）由其直接封闭类型的二进制名称、后跟 $、非空数字序列和本地类的简单名称组成。
> 
> 匿名类的二进制名称（第 15.9.5 节）由其直接封闭类型的二进制名称组成，后跟 $，后跟非空数字序列。
> 
> 由泛型类或接口（第 8.1.2 节，第 9.1.2 节）声明的类型变量的二进制名称是其直接封闭类型的二进制名称，后跟 $，然后是类型变量的简单名称。
> 
> 由泛型方法（第 8.4.4 节）声明的类型变量的二进制名称是声明该方法的类型的二进制名称，后跟 $，后跟 Java™ 虚拟机规范中定义的方法描述符， Java SE 7 Edition，后跟$，后跟类型变量的简单名称。
> 
> 由泛型构造函数（第 8.8.4 节）声明的类型变量的二进制名称是声明构造函数的类型的二进制名称，后跟 $，然后是 Java™ 虚拟机规范中定义的构造函数描述符， Java SE 7 Edition，后跟$，后跟类型变量的简单名称。

所以可以说，众所周知的命名方案**是**完美规范的，我们可以依赖它（因为必须依赖所有的类加载器来找到必要的类文件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:57:49.350

我相信命名方案没有在正式意义上指定，因为它（据说）是一个实现细节。

# java - 继承的 Spring 3.1 Hibernate 4 异常[不能强制转换为 org.hibernate.mapping.RootClass]

> ID：12087011
> 
> 赞同：43
> 
> 时间：2012-08-23T07:48:08.053
> 
> 标签：java, spring, hibernate, spring-orm

嗨，我刚刚开始使用 Spring 以及 Hibernate4 和 maven。基本上我的类层次结构是 HUmanMicroTask 扩展自 MicroTask 。将来可能会有几个其他类从 MicroTask 扩展而来。我试图为每个具体类创建一个表，这是使用 spring3 和 hibernate 4 启动和运行的最简单方法。但是当我运行我的代码时。我不断收到以下异常

```
13:11:52,260 ERROR TestContextManager:324 - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@6ef137d] to prepare test instance [HumanMicroTaskBaseHibernateTest@52c05d3b]
java.lang.IllegalStateException: Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [database-config.xml]: Invocation of init method failed; nested exception is java.lang.ClassCastException: org.hibernate.mapping.UnionSubclass cannot be cast to org.hibernate.mapping.RootClass
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:103)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)
    ... 24 more
Caused by: java.lang.ClassCastException: org.hibernate.mapping.UnionSubclass cannot be cast to org.hibernate.mapping.RootClass
    at org.hibernate.cfg.annotations.PropertyBinder.bind(PropertyBinder.java:212)
    at org.hibernate.cfg.annotations.PropertyBinder.makePropertyValueAndBind(PropertyBinder.java:203)
    at org.hibernate.cfg.AnnotationBinder.processElementAnnotations(AnnotationBinder.java:2013)
    at org.hibernate.cfg.AnnotationBinder.processIdPropertiesIfNotAlready(AnnotationBinder.java:768)
    at org.hibernate.cfg.AnnotationBinder.bindClass(AnnotationBinder.java:687)
    at org.hibernate.cfg.Configuration$MetadataSourceQueue.processAnnotatedClassesQueue(Configuration.java:3431)
    at org.hibernate.cfg.Configuration$MetadataSourceQueue.processMetadata(Configuration.java:3385)
    at org.hibernate.cfg.Configuration.secondPassCompile(Configuration.java:1337)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1727)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1778)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBuilder.buildSessionFactory(LocalSessionFactoryBuilder.java:184)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:314)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 38 more 
```

虽然我看过很多论坛，但我无法决定我在哪里犯了错误。我的 MicroTask 类如下所示：

```
@Entity
@Table(name = "MICROTASK")
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
public class MicroTask {
    @Id
    @GeneratedValue(generator = "system-uuid")
    @GenericGenerator(name = "system-uuid", strategy = "uuid")
    @Column(name = "MICROTASKID")
    private String microTaskId;
    @Column(name = "CREATIONDATE")
    private Date creationDate;
    @Column(name = "DESCRIPTION")
    private String description;

    public Date getCreationDate() {
        return creationDate;
    }
//More Getters and setters 
```

我的 HumanMicroTask 类如下所示：

```
 @Entity
    @Table(name = "HUMANMICROTASK")
    @AttributeOverrides({
        @AttributeOverride(name="microTaskId", column=@Column(name="MICROTASKID")),
        @AttributeOverride(name="creationDate", column=@Column(name="CREATIONDATE")),
        @AttributeOverride(name="description", column=@Column(name="DESCRIPTION"))
    })
    public class HumanMicroTask extends MicroTask {

        @Column(name = "TITLE")
        private String title;
        @Column(name = "CHANNEL")
        private String channel;
        @Id
        @Column(name = "HMTID")
        private String humanMicroTaskid;

        public String getId() {
            return humanMicroTaskid;
        }
//More Getters and setters 
```

我的 config.xml 如下所示：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context" xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
        ">

    <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
        destroy-method="close">
        <property name="driverClass">
            <value>${jdbc.driver.className}</value>
        </property>
        <property name="jdbcUrl">
            <value>${jdbc.url}</value>
        </property>
        <property name="user">
            <value>${jdbc.username}</value>
        </property>
        <property name="password">
            <value>${jdbc.password}</value>
        </property>

    </bean>

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource">
            <ref bean="dataSource"/>
        </property>
        <property name="packagesToScan" value="com.hp.hpl.crowdcloud" />
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">${jdbc.hibernate.dialect}</prop>
                <prop key="hibernate.hbm2ddl.auto">create</prop>
                <!-- uncomment this for first time run -->
                <prop key="hibernate.hbm2ddl.auto">create</prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>
    </bean>
    <bean id="transactionManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory">
            <ref bean="sessionFactory" />
        </property>
    </bean>
    <tx:annotation-driven />

</beans> 
```

我的 Maven 配置

```
 <maven.test.failure.ignore>true</maven.test.failure.ignore>
    <org.springframework.version>3.1.0.RELEASE</org.springframework.version>
    <hibernate.version>4.1.1.Final</hibernate.version>
    <sl4j.version>1.5.6</sl4j.version> 
```

请帮帮我。我不确定我在哪里犯了错误。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-08-23T08:16:37.887

这是由于两个类中的 Id 列。从 HumanMicroTask 中删除 Id。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-06-15T19:27:24.273

修复这个从子类中删除@Id

在微任务中保持

```
 @Id
    @GeneratedValue(generator = "system-uuid")
    @GenericGenerator(name = "system-uuid", strategy = "uuid")
    @Column(name = "MICROTASKID")
    private String microTaskId; 
```

在子类 HumanMicroTask 中删除

```
 @Id
    @Column(name = "HMTID")
    private String humanMicroTaskid; 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-03-15T14:40:35.767

前段时间我遇到了同样的问题，因为你的父类有一个主键：'Id'，当子类生成时，它们会自动生成一个外键，其名称与父类主键的确切名称相同

示例：（伪代码）

## 实体定义

家长班

```
 @Entity
    @Inheritance(strategy = InheritanceType.JOINED)
    @Table(name = "abstract_person", catalog = "catalog", schema = "")
    class AbstractPerson{

        //Primary Key
        @Id
        @Column(name = "idPerson")
        int idPerson;

        @Basic
        @Column(name = "name")
        String name;

        //corresponding getters and setters
    } 
```

儿童班：

```
 @Entity
    @Table(name = "concrete_person", catalog = "catalog", schema = "")
    class ConcretePerson extends AbstractPerson{

       //No id or primary key is defined here

        @Basic
        @Column(name="profession")
        String profession;

    } 
```

## 表生成

父类将映射到这个

表“abstract_person”
id：Int（主键）
名称：Varchar

子类将映射到：

表“concrete_person”
职业：varchar
idPerson：int（自动生成，外键到父表和该表的主类）

//假设
Mysql数据库；
Jpa 2 休眠实现；
NetBeans 7x IDE

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-16T08:07:23.317

对于 TABLE_PER_CLASS 层次结构，子类从父类继承唯一键，因此我们不应该在子实体中提及唯一键约束。

删除主键注释，这对我来说效果很好。

# facebook - 使用 Facebook 或 Twitter 登录的自定义 Wifi 热点

> ID：12087012
> 
> 赞同：9
> 
> 时间：2012-08-23T07:48:17.040
> 
> 标签：facebook, twitter, oauth, wifi

我想安装一个自定义的 Wi-fi 热点，它需要登录以启用具有此要求的 Internet 访问，我想知道是否有人安装了。

要求：

*   **登录服务器：**我有自己的使用 Java/Spring 构建的 OAuth 服务器，以允许用户通过 REST API 使用 Twitter 和 Facebook 登录。
*   **Wi-fi 接入点：**登录成功后允许用户上网。
*   当用户选择 Wi-Fi 网络时，登陆页面必须带有登录按钮。

我有登录模块，但我不知道如何安装某种带有自定义登录页面的 Wi-fi 热点，该页面可以链接到此登录服务器。我搜索了某种工具或软件，但我一无所获。请问有什么想法或建议吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-18T14:44:19.080

我刚刚偶然发现了一个[谷歌代码项目](http://www.google-melange.com/gsoc/project/details/google/gsoc2012/ntmq90/5668600916475904)，它实现了你想要的运行 openwrt 的路由器。

基本设置是这样的：您使用 openwrt 运行路由器（可以[在他们的 wiki](http://wiki.openwrt.org/toh/start)上找到支持的硬件列表）。然后您安装[wifidog](http://dev.wifidog.org)以提供您的门户页面并运行项目（现在似乎已移至[此处并已重命名为 KikiAuth](https://github.com/hongquan/KikiAuth)）作为 wifidog 的身份验证提供程序。

由于 KikiAuth 是开源的，因此如果您想自己管理登录过程，应该很容易采用它用来将 wifidog 的身份验证信息提供到您现有软件中的方法，并将其用作提供程序。

有关设置的更多详细信息，请参见[google 代码项目页面](http://www.google-melange.com/gsoc/project/details/google/gsoc2012/ntmq90/5668600916475904)。

# c# - 如何从 XML 文件中获取所有文本节点

> ID：12087014
> 
> 赞同：4
> 
> 时间：2012-08-23T07:48:22.813
> 
> 标签：c#, xml

我想从 XML 文件中获取所有文本节点。

我怎样才能做到这一点？

示例输入：

```
<root>
<slide>
<Image>hi</Image>
<ImageContent>this</ImageContent>
<Thumbnail>is</Thumbnail>
<ThumbnailContent>A</ThumbnailContent>
</slide>
</root> 
```

预期输出：

```
hi this is A 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-23T08:22:13.660

枚举任何 xml 中的所有文本节点的唯一解决方案（到目前为止），无论其结构如何：

```
string input = @"
    <root>
        <slide>
            <Image>hi</Image>
            <ImageContent>this</ImageContent>
            <Thumbnail>is</Thumbnail>
            <ThumbnailContent>A</ThumbnailContent>
        </slide>
    </root>";

foreach (XText text in (IEnumerable)XDocument.Parse(input).XPathEvaluate("//*/text()"))
{
    Console.WriteLine(text.Value);
} 
```

编辑：如果您想从文件中加载 xml，请`XDocument.Load`改用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T08:14:07.530

此代码将打印所有没有子节点的 xml 节点的内部文本：

```
 static void Main(string[] args)
    {
        XmlDocument x = new XmlDocument();
        x.Load("exp.xml");
        PrintNode(x.DocumentElement);
    }

    private static void PrintNode(XmlNode x)
    {
        if (!x.HasChildNodes)
            Console.Write(string.Format("{0} ", x.InnerText));

        for (int i = 0; i < x.ChildNodes.Count; i++)
        {
            PrintNode(x.ChildNodes[i]);
        }
    } 
```

在您的示例 XML 上，它将产生您想要的输出:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T07:54:33.823

你可以试试这个：

```
 string input = @"
            <root>
                <slide>
                    <Image>hi</Image>
                    <ImageContent>this</ImageContent>
                    <Thumbnail>is</Thumbnail>
                    <ThumbnailContent>A</ThumbnailContent>
                </slide>
            </root>";

        XDocument doc = XDocument.Parse(input);
        //You can also load data from file by passing file path to Load method
        //XDocument doc = XDocument.Load("Data.xml");
        foreach(var slide in doc.Root.Elements("slide"))
        {
            var words = slide.Elements().Select(el => el.Value);
            string s = String.Join(" ", words.ToArray());
        } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-23T08:05:10.283

这将起作用

```
static void Main(string[] args)
        {            
            XDocument xmlSkuDescDoc = XDocument.Parse
                (@"<root>
                                <slide>
                                <Image>hi</Image>
                                <ImageContent>this</ImageContent>
                                <Thumbnail>is</Thumbnail>
                                <ThumbnailContent>A</ThumbnailContent>
                                </slide>
                                </root> "
                ); 
             var result = (from data in xmlSkuDescDoc.Descendants("slide")
             select data).Elements().Select(i => i.Value).Aggregate((a, b) => a + " " + b); 
            Console.ReadKey();
        } 
```

NB~`XDocument.Load(filename)`如果从文件加载，请使用

例如

```
string fileName = @"D:\MyXml.xml";
XDocument xmlSkuDescDoc = XDocument.Load(filename); 
```

....其余的如上图所示

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-23T08:03:28.947

它可以使用`XDocument`类（LINQ to XML）来完成。假设您只有一个**幻灯片**元素：

使用普通`XDocument`导航：

```
var doc = XDocument.Load("file path here");

if (doc.Root == null)
    throw new ArgumentException(); // No root node!
var slideElement = doc.Root.Element("slide");
if (slideElement == null)
    throw new ArgumentException(); // No slide node!

var values = string.Join(" ", slideElement.Elements().Select(element => element.Value)); 
```

使用 XPath 节点选择：

```
var doc = XDocument.Load("file path here");
var slideElements = doc.XPathSelectElements("root/slide/*");
var values = string.Join(" ", slideElements.Select(element => element.Value)); 
```

# azure - TFSPreview.com 和 Azure 证书在部署时表现不佳

> ID：12087025
> 
> 赞同：1
> 
> 时间：2012-08-23T07:49:03.663
> 
> 标签：azure, tfs, continuous-deployment

所以我设置了 TFS 持续部署，我遇到了这样一种情况，即我的构建编译得很好，但在与 Azure 通信时在部署阶段失败。我的日志看起来像

```
Get Default Azure Cloud Service Publish Profile
Set Project to build CSPack
Run MSBuild for Project
Run Visual Studio Test Runner for Test Sources
Publish Output
Deploy application to Azure
8/23/2012 7:20:04 AM - Preparing deployment for rcfoapi with SubscriptionID: mysubscriptionidhere.veryverylong.andkeepsgoing...
8/23/2012 7:20:04 AM - Connecting...
 An attempted http request against URI https://management.core.windows.net:8443/mysubscriptionidhere.veryverylong.andkeepsgoing
 /services/hostedservices/myrolenamehere?embed-detail=true 
 returned an error: (403) Forbidden.
Additional Exception Information:
Error Code: AuthenticationFailed
Message: The server failed to authenticate the request. Verify that the 
         certificate is valid and is associated with this subscription.
         Typically, a response of (403) Forbidden from a Windows Azure 
         Management API means that the X509 certificate used to 
         authenticate the call is not valid. The certificate may have 
         been revoked or expired. Reconnect your Windows Azure 
         subscription to your Team Foundation account. 
```

我尝试了 Azure 门户中的“与 TFS 断开连接”链接，然后验证了 Azure 门户的“证书”部分中的证书。我使用指纹哈希确认相同的证书也在我的本地计算机的证书存储（“我的”存储）中。然后我通过 Azure 门户重新链接 TFS。

但我仍然得到同样的错误。任何想法？

***更新*****：** 我还尝试了一些额外的步骤，似乎没有任何工作:(

1.  删除了整个云服务
2.  创建了一个新的云服务（同名）
3.  VS2012 在生产和登台上部署到云服务（因为我需要为前端使用和后端测试提供服务）
4.  验证门户的云服务“证书”部分中的 Windows Azure 工具证书（与我的本地副本匹配）。我知道这与 TFS 和 Azure 之间的不同
5.  去了 TFSPreview.com => 左上齿轮 => 项目管理 => 服务 => 没有看到链接的服务
6.  转到用户配置文件 => 连接 => 列出 OAuth 连接（Windows Azure 的 MANAGE-PROD CLOUDAPP）=> 删除它
7.  在 Azure 门户中，将新设置的云服务链接回 TFSPreview.com
8.  在 VS2012 本地，断开 TFS ('team' => 'disconnect')
9.  在VS2012本地，退出TFS（'team' => 'connect' => 'sign out' at the bottom）
10.  重新登录 TFS，连接到团队项目
11.  做了一个微不足道的更改 => 签入 => 触发持续部署

=> 和以前一样的错误:?

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T00:26:17.377

如果您的证书需要在 Azure 控制面板中续订，则可能会发生这种情况。

如果您没有首先部署暂存或生产环境，也可能发生这种情况。我不完全确定为什么，因为它部署了一个新的，但这刚刚解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:36:52.570

TFS 预览版使用的证书与您在本地开发盒上的证书不同。当您连接帐户时，Azure 会为 TFS 提供不同的证书，该证书可能已过期或不再存在。如果您有多个项目连接到 Azure，唯一的选择是进入 TFSPreview 上的管理站点（右上角的齿轮）并断开连接到该订阅的所有项目，然后重新运行连接向导。这将确保我们为您的 Azure 订阅获得新的有效证书。当您将订阅重新连接到项目时，我们将找到现有的构建定义，而不是创建新的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-22T11:02:13.300

我有同样的问题，对我来说解决方案是更新证书。见这里：http: [//support.microsoft.com/kb/2780289](http://support.microsoft.com/kb/2780289)

# java - 连接邮件服务器

> ID：12087031
> 
> 赞同：-1
> 
> 时间：2012-08-23T07:49:22.683
> 
> 标签：java

我有以下异常：

```
 javax.mail.MessagingException: Connect failed;
      nested exception is: 
        java.io.IOException: Connect failed
        at com.sun.mail.pop3.POP3Store.protocolConnect(POP3Store.java:106)
        at javax.mail.Service.connect(Service.java:234)
        at javax.mail.Service.connect(Service.java:135)
        at SimpleReceiver.receive(SimpleReceiver.java:50)
        at SimpleReceiver.main(SimpleReceiver.java:29) 
```

我怎么解决这个问题？这是代码：

```
Store store = null;
        Folder folder = null;
        try {
            //Get hold of the default session
            Properties props = System.getProperties();
            props.put("mail.store.protocol", "pop3");
            props.put("mail.pop3.port", "25");
            props.put("mail.pop3.host", "admin");
            props.put("mail.pop3.auth", "true");
            //Session session = Session.getDefaultInstance(props, null);
            Session session = Session.getInstance(props);
            //Get hold of a POP3 message store, and connect to it
            store = session.getStore("pop3");
            store.connect("pop3", 25, "admin", "1234");
            //Try to get hold of the default folder --
            folder = store.getDefaultFolder();
            if (folder == null)
                throw new Exception("No default folder");
            // and its INBOX --
            folder = folder.getFolder("INBOX");
            if (folder == null)
                throw new Exception("No POP3 INBOX");
            //Open the folder for read only --
            folder.open(Folder.READ_ONLY);
            // Get the message wrappers and process them --
            Message[] msgs = folder.getMessages();
            for (int msgNum = 0; msgNum < msgs.length; msgNum++) {
                printMessage(msgs[msgNum]);
            }
        } catch (Exception ex) {
            ex.printStackTrace();
        } finally {
            //Close down nicely --
            try {
                if (folder != null)
                    folder.close(false);
                if (store != null)
                    store.close();
            } catch (Exception ex2) {
                ex2.printStackTrace();
            }
        }
    } 
```

那么为什么会发生以下异常：

```
 javax.mail.MessagingException: Connect failed;
      nested exception is: 
        java.io.IOException: Connect failed 
```

..................................................... ...................................................

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:16:07.433

```
store.connect("pop3","admin","Your_Required_Password"); 
```

您也可以查看以下链接：[1](https://stackoverflow.com/questions/6802208/why-do-i-get-this-exception) & [2](https://stackoverflow.com/questions/6805351/counting-the-number-of-emails-in-the-gmail-inbox)

# java - 如何使用模板匹配来识别opencv/javacv中不同大小的对象？

> ID：12087034
> 
> 赞同：3
> 
> 时间：2012-08-23T07:49:30.853
> 
> 标签：java, opencv, javacv

我浏览了几个模板匹配教程，我注意到大多数教程都试图匹配从原始图像裁剪的模板。但我想知道是否可以识别具有不同宽度和高度的相似物体？

在我的项目中，我生成了以下类型的图像。

![在此处输入图像描述](../Images/576356bdd0d656cbc18ad090c7df3cf4.png)

我需要从中识别以下组件。

![在此处输入图像描述](../Images/f04d14451b4cbc39d12ed623fd3ff1a5.png)

![在此处输入图像描述](../Images/41e5966f3563996da70bcd13726743d9.png)

![在此处输入图像描述](../Images/b2f06a06af3bc545d925b050a7bb3771.png)

如何使用 opencv 或 javacv 存档？是否可以为此使用模板匹配？因为这个对象可以有不同的大小，所以可以使用它吗？请有人可以给出简单的代码示例来识别这个对象吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:33:53.490

我不确定它在实际情况下是否对您有所帮助，但简单的阈值对您的输入图像起到了作用：

![在此处输入图像描述](../Images/2fbee66189b2d748e6709b76dcd85d7b.png)

代码：

```
Mat src = imread("input.jpg"), tmp;
cvtColor(src, tmp, CV_BGR2GRAY);
threshold(tmp, tmp, 200, 255, THRESH_BINARY); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:47:08.573

模板匹配/模式识别将为此工作。但是，据我所知，openCV 的模板匹配不使用缩放或旋转。它只是通过在图像上“滑动”模板并寻找最小的差异来找到最可能的位置。我个人会为此使用 HALCON，但这是一个非常昂贵的程序/包。

# javascript - 请帮助我找出正确的 Javascript 代码...请

> ID：12087037
> 
> 赞同：0
> 
> 时间：2012-08-23T07:49:41.587
> 
> 标签：javascript, redirect, drop-down-menu, onload, url-parameters

这里我有两个 HTML 页面，First_page.html 和 Second_page.html，

在 First_page.html 中，我有一个代码，当使用某个 URL 参数单击链接时，该代码会重定向到页面。

First_page.html 的代码是这样的。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<a href="Second_page.html?=1">one</a><br />
<a href="Second_page.html?=2">two</a><br />
<a href="Second_page.html?=3">three</a><br />
<a href="Second_page.html?=4">four</a>
</body>
</html> 
```

在 Second_page.html 中，我有一个读取 URL 参数并根据它更改下拉菜单的代码。

Second_Page.html 的代码是这样的

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript">
function show(choice) { 
  var success = -1;
  for (var i=0; i < document.form1.selecoption.length; i++) {
    if (document.form1.selecoption.options[i].value == choice) 
      success = [i];
  }
  document.form1.selecoption.selectedIndex=success;
}
</script>
</head>

<body onLoad="var choice = location.href.split('?')[1].split('=')[1];show(choice);">
<form name="form1">
  <select name="selecoption">
    <option value="1">ONE</option>
    <option value="2">TWO</option>
    <option value="3">THREE</option>
    <option value="4">FOUR</option>
  </select>
</form>
</body> 
```

现在，我想要的是如何使用 URL 参数在 Second_page.html 中选择两个不同的下拉菜单，即“selecoption”和“selecsecondoption”。请帮忙....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:58:50.250

尝试这个 ：

```
<script type="text/javascript">    
    document.getElementById('selecoption').value=String(choice);
</script> 
```

在 Second_Page.html 的末尾

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:23:31.817

首先，您必须使用正确的 URL 格式。将值传递给 URL 需要相应的变量名称。所以更正后的`First_page.html`文件应该如下所示。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<a href="Second_page.html?selecoption=1">one</a><br />
<a href="Second_page.html?selecoption=2">two</a><br />
<a href="Second_page.html?selecoption=3">three</a><br />
<a href="Second_page.html?selecoption=4">four</a>
</body>
</html> 
```

这是固定`Second_Page.html`文件。所有脚本代码都移动到脚本代码中。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript">
function getUrlVar(varName) { //returns empty string if variable name not found in URL
  if (!varName) return ''; //no variable name specified. exit and return empty string

  varName = varName.toLowerCase(); //convert to lowercase
  var params = location.search; //get URL

  if (params == '') return ''; //no variables at all. exit and return empty string

  var vars = params.split('?')[1].split('&'); //get list of variable+value strings

  for (var i = 0; i < vars.length; i++) { //check each variable
   var varPair = vars[i].split('='); //split variable and its value

   if (varPair.length > 1) { //has "=" separator

     if (varPair[0].toLowerCase() == varName) { //same variable name?
       return varPair[1]; //found variable. exit and return its value
     } //else: check next variable, if any

   } //else: is not an array. i.e.: invalid URL variable+value format. ignore it
  }
  return ''; //no matching variable found. exit and return empty string
}

function show() {
  var value = getUrlVar('selecoption'); //get variable value
  if (!value) return; //variable not found
  if (parseInt(value) == NaN) return; //value is not a number

  var sel = document.getElementById('form1').selecoption;
  for (var i=0; i < sel.length; i++) {
    if (sel.options[i].value == value) {
      document.getElementById('form1').selecoption.value = value;
      return;
    }
  }
}
</script>
</head>

<body onLoad="show();">
<form id="form1">
  <select name="selecoption">
    <option value="1">ONE</option>
    <option value="2">TWO</option>
    <option value="3">THREE</option>
    <option value="4">FOUR</option>
  </select>
</form>
</body>
</html> 
```

# asp.net - 通过调用 .ashx 页面下载文件

> ID：12087040
> 
> 赞同：8
> 
> 时间：2012-08-23T07:49:57.890
> 
> 标签：asp.net, jquery, ashx

我从母版页客户端脚本 (Jquery) 请求 .ashx 页面，该脚本具有下载 PDF 文件的代码。当我调试它时，我可以看到“文件下载”代码的执行，但文件没有下载。

```
$.ajax({
    type: "POST",
    url: "FileDownload.ashx",
    dataType: "html",
    success: function (data) { }
} );

public class FileDownload : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        //context.Response.ContentType = "text/plain";
        //context.Response.Write("Hello World");

        string fileName = "BUSProjectCard.pdf";
        string filePath = context.Server.MapPath("~/Print/");
        context.Response.Clear();
        context.Response.ContentType = "application/pdf";
        context.Response.AddHeader("Content-Disposition", "attachment; filename="+fileName);
        context.Response.TransmitFile(filePath + fileName);
        context.Response.End();
    } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-23T08:02:16.373

您的文件正在下载，但您在 javascript 上通过`data`调用参数获取它，因为您使用 Ajax 调用它。

您使用处理程序 - 所以这里不需要 ajax，使用 javascript 最简单的事情是：

```
window.location = "FileDownload.ashx?parametres=22"; 
```

或使用简单的链接作为

```
 <a target="_blank" href="FileDownload.ashx?parametres=22" >download...</a> 
```

啊，通过url发送参数，你不能那样发布它们。

您还可以阅读：[从服务器下载文件的最佳方式是什么](https://stackoverflow.com/questions/10912164/what-is-the-best-way-to-download-file-from-server)

# javascript - iOS Safari 上的 console.time()

> ID：12087041
> 
> 赞同：4
> 
> 时间：2012-08-23T07:50:08.333
> 
> 标签：javascript, ios, time, safari, console

我正在尝试为 iPad (iOS 5.1.1) 优化一个网络应用程序，我想知道**如何衡量花在一个功能上的时间**。

在桌面上，firebug 和 webkit 的控制台都有**console.time() 和 console.timeEnd()**。不幸的是，我无法让它**在 iOS 上运行**，似乎只支持 console.log() 。

有什么选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T07:54:18.763

```
var start = new Date().getTime();

// ....

var end = new Date().getTime();

console.log(end-start); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:40:45.987

根据**xdazz**的回答，我尝试替换这两个函数，以便它可以**在 iOS 上运行，而无需重构**所有计时器：

```
if(!console){var console = {};} // for those without a console - mind the context
console.timers = {};
console.time = function(timer)
{
    if(!timer){timer="Timer";}
    console.timers[timer] = new Date().getTime();
};
console.timeEnd = function(timer)
{
    if(!timer){timer="Timer";}
    console.log(timer+": "+(new Date().getTime()-console.timers[timer]));
}; 
```

**警告**：这样做将替换原始 API，因此可能会在您的桌面浏览器上提供不太准确的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T23:49:27.410

从运行 iOS 6 的 iPhone 4 CDMA 开始，移动 Safari 支持`console.time()`和`console.timeEnd()`.

# java - 不允许加载本地资源

> ID：12087062
> 
> 赞同：0
> 
> 时间：2012-08-23T07:50:56.040
> 
> 标签：java, google-chrome

用户将上传一个 index.html 文件和一些图像，这些图像将作为 HTML 电子邮件发送出去。我正在开发预览功能，因此他们可以在发送前进行检查。

尝试访问上传的文件时，我在 Chrome 中遇到“不允许加载本地资源”错误。

我在 JBoss 7.1 上运行我的应用程序。目前我的服务器在我的笔记本电脑上本地运行，这可能是问题吗？

我曾尝试使用 JBoss 临时文件夹，但我得到了同样的错误。

我曾想过将文件临时复制到 WAR 存档中的一个文件夹中，但我一直无法找到执行此操作的方法。

有解决方法或解决方案吗？或者有没有办法在窗口中显示 MimeMultipart 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:54:10.000

如果您的页面是从网络服务器提供的，由于安全原因，您不能使用本地文件资源。

您应该上传要访问的网络服务器并使用页面中的相对路径。

所以简而言之你必须使用`http://`来访问文件而不是`file:///`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-07T08:19:12.010

使用 Jboss 8.1 Wildfly，我找到了解决这个问题的替代方案。

向standalone.xml 添加一个额外的文件处理程序就可以了。

```
<server name="default-server">
    <http-listener name="default" socket-binding="http"/>
    <host name="default-host" alias="localhost">
        <location name="/" handler="welcome-content"/>
        <location name="/img" handler="images"/>
    </host>
</server>
<handlers>
    <file name="welcome-content" path="${jboss.home.dir}/welcome-content" directory-listing="true"/>
    <file name="images" path="/var/images" directory-listing="true"/>
</handlers> 
```

感谢 hwellman 对以下[问题的回复](https://stackoverflow.com/questions/22684037/how-to-configure-wildfly-to-serve-static-content-like-images)

# c# - Visual Studio 开始构建前的漫长等待

> ID：12087068
> 
> 赞同：24
> 
> 时间：2012-08-23T07:51:16.037
> 
> 标签：c#, visual-studio-2010, build

我们有一个中等规模的解决方案，大约有 20 个项目。在其中一个中，我有我的商业实体。在编译任何项目时，Visual Studio 会在这个 BusinessEntities 项目上等待并挂起大约一分半钟。

我在 SharpDevelop 中尝试了我们的解决方案，它在 18 秒内编译了我们的完整解决方案。与 MSBuild 类似的时间。

我的猜测是 VS 试图找出项目是否需要编译，但是这个过程比实际执行编译慢了大约 15 倍！

我不能切换到伟大的sharpdevelop，它缺少我们调试场景的一些小但必不可少的要求。

我可以阻止VS检查这个项目，并让它在没有这样检查的情况下编译项目，就像sharpdevelop一样？

我已经知道在配置管理中取消选中项目以防止构建一些项目，但是我的开发人员会忘记他们需要在更新到最新源后编译这个项目，并且他们面临着对他们来说似乎很奇怪的问题。

编辑：调查的有趣结果：延迟仅发生在其中一个项目上。在配置管理器中，我取消选中所有项目，然后单独编译每个项目。所有项目在几秒钟内编译！！关键是：如果该特殊项目是直接构建的，则在几秒钟内编译，如果它正在构建（或跳过，因为它是最新的）作为构建另一个依赖它的项目的结果，VS挂起大约一分半钟，然后决定编译它（或跳过它）。我的结论：Visual Studio 正在检查是否有任何文件被更改，但由于某些原因，对于这个特殊项目来说效率极低！！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-26T05:19:35.850

我会去`Tools -> Options -> Projects and Solutions -> Build and Run`然后将“MSBuild项目构建[输出|构建日志]详细程度”更改为诊断。在那个级别，它将包括可以帮助您追踪问题的时间安排。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-02T17:11:01.187

我们在 Visual Studio 2013 中运行的 ASP.NET MVC Web 项目遇到了同样的问题。我们构建了项目，大约一分钟左右没有任何反应，然后输出窗口显示我们正在编译。

这是修复它的原因...在文本编辑器中打开**.csproj 文件**并将 MvcBuildViews 设置为 false：

```
<MvcBuildViews>false</MvcBuildViews> 
```

我不得不使用 sysinternals 进程监视器来解决这个问题，但这显然是我遇到这种情况的原因。该网站现在在不到 5 秒的时间内完成编译，而之前则需要一分钟。在那一刻，Asp.net 编译过程将文件和目录放入 Temporary Asp.net Files 文件夹。

警告：如果您设置此选项，您将不再预编译视图，因此您将无法在构建时查看视图中的语法错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-01T04:57:16.277

为了当前编译项目的利益，您可能正在遭受 VS 检查其他新构建的程序集的痛苦。

构建程序集时，VS 将检查目标程序集的引用，如果它们是新构建的或新版本，可能包括实际将它们加载到 .Net 域中，它承担着加载程序集的所有负担，就好像你是要去运行它。随着重建越来越多的项目，构建可能会逐渐变慢。当一个组件更新时，其他组件会做更多的工作。这是一种可能的解释，为什么单独建造，与已经建造的，与建造干净的，都有看似相关的不同结果。它真的是其他人改变了，而不是关于正在编译的那个。

VS 将“标记”所引用程序集的最后一个“内部”构建号，并查看所引用程序集在其构建过程中是否实际发生了变化。如果没有什么不同，就会跳过大量工作。是的，有您无法控制的内部装配版本号。这很可能不是由于实际的 c# 编译器或其工作或任何后编译的原因，而是大多数情况下所需的预编译步骤。

您可以使用几种面向参考的设置，根据您的开发、测试或部署需求，功能差异可能无关紧要，但可能会*深刻*影响 VS 的行为方式和构建过程所需的时间。

转到解决方案资源管理器中某个项目的引用：

1）点击参考

2）如果不是（不是属性页或属性管理器）打开属性窗格

3) 查看“Copy Local”、“Embed Interop Types”、“Reference Output Assembly”；这些可能非常适用，并且无论如何都可能是值得了解的好东西。我强烈建议在 MSDN 上查找他们所做的事情。“参考输出程序集”可能会或可能不会显示在列表中。

4）卸载项目，在VS中将.proj文件编辑为文本。在 XML 中查找程序集引用并查找“私有”。这意味着从引用程序集的角度来看，是否将引用的程序集视为私有程序集，而不是共享程序集。这是一种冗长的说法，该组件是否会与其他组件一起部署为一个单元。这对于减轻负担非常重要。背景：http: [//msdn.microsoft.com/en-us/magazine/cc164080.aspx](http://msdn.microsoft.com/en-us/magazine/cc164080.aspx)

* * *

所以这里的基本想法是，您希望将所有这些配置为最便宜的，无论是在构建期间还是在部署之后。如果您将它们一起构建，那么例如您可能真的不需要“复制本地”。在不了解您的需求的情况下，我不想多说您应该如何配置它们，但是阅读一些关于每个的好段落是一件非常好的事情。然而，这变得非常棘手，因为您还会影响 VS 在重新构建引用的解决方案时是否会使用陈旧的旧解决方案。作为进一步的示例，说明阅读这些内容很好，Copy Local*可以*使用本地副本，即使它已经过时，所以拥有这一套可能是双重坏的。请记住，目前的目标是降低 VS 加载新构建的程序集 jsut 以编译其他程序集的负担。

最后，就目前而言，我可以轻松地说，仅挂 1.5 分钟就很幸运了。由于这样的事情，有些人的构建时间要差得多；）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T13:52:17.940

听起来很傻，但首先删除所有断点。它极大地加快了我的预构建检查 - 但仍然不知道为什么。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-27T00:54:39.373

一些未提及的故障排除思路：

*   清洁解决方案？

*   删除 Obj 和 Bin 文件夹？仅供参考，Clean 和 Rebuild 都不会删除非构建文件，例如在预构建命令期间复制的文件。

*   关闭 VS 扫描外部文件。选项>工具>环境>文档>检测文件何时在环境之外更改？

*   回滚 SVN 历史以确认它何时开始发生？发生了什么变化？如果第 1 天的项目文件花费相同的时间，请重新创建项目，添加所有文件并构建。

否则，您能否运行 Process Monitor 并让我们知道 Visual Studio 在准备构建阶段正在做什么？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-29T21:14:34.457

根据提供的（有限的）信息，一种可能性是项目文件中指定的预构建操作可能编译速度很慢。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-31T03:40:41.353

[尝试按照此处](http://blogs.msdn.com/vsdteam/archive/2006/09/15/756400.aspx)所述禁用平台验证任务。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-31T07:41:04.807

如果您的单个项目正在正确编译，那么您所能做的就是通过在配置中明确设置依赖项目来更改编译顺序。

尝试可视化您的项目依赖层次结构并设置依赖项目。例如，如果您的业务实体项目在每个项目中都被引用，那么在每个项目的配置中，必须选择该项目作为依赖项。

当未设置显式构建顺序时，Visual Studio 正在分析项目以创建构建项目的顺序。设置显式依赖项目 wiki 使 Visual Studio 跳过此步骤并使用您提供的顺序。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-09-01T02:27:44.640

由于单个项目的延迟如此之大，而且似乎没有其他途径可以提供理由，我会尝试构建该特定项目，同时从 sysinternals 运行[procmon](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)并过滤掉所有成功消息。您也可以将其范围缩小到文件系统操作。根据您的描述，我可能猜到文件被事件收集或工作流管理流程服务等外部源锁定。

其他要考虑的事情是这是否是一个完全干净的构建机器，或者它是否也被用来测试构建？如果是这样，是否有人将 IIS 应用程序路径直接映射到项目或将其注册为服务位置？

如果您运行 procmon 并且没有看到明显的锁定或冲突，我将创建一个全新的解决方案和项目并复制文件以查看该项目是否也有相同的延迟。如果它确实有相同的延迟，我会创建一个相同类型但通用数据（基本上是空的）的示例项目，看看它是否也很慢。如果具有相同文件的新项目构建良好，则可以比较目录以查看导致问题的差异（可能是配置或项目设置）。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-10-31T23:54:42.790

对我来说，按照此处的说明彻底禁用代码分析器会有所帮助： [https](https://docs.microsoft.com/en-us/visualstudio/code-quality/disable-code-analysis?view=vs-2019#net-framework-projects) ://docs.microsoft.com/en-us/visualstudio/code-quality/disable-code-analysis?view=vs-2019#net-framework-projects 。

我以为我的代码分析器已经关闭，但添加额外的 xml 有帮助。

感谢 Kaleb 建议将“MSBuild 项目构建 [输出|构建日志] 详细程度”设置为诊断。第一条消息用了 10 多秒才显示出来：

属性重新分配：C:\myProjectDirectory\packages\Microsoft.NetFramework.Analyzers.2.9.3\build\Microsoft 中的 $(Features)=";flow-analysis;flow-analysis"（上一个值：";flow-analysis"） .NetFramework.Analyzers.props (32,5)

这导致我使用代码分析器。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-03-28T20:29:43.643

以防万一其他人遇到这个问题：

在我的情况下，延迟是由**“其他包含目录”中的****无效路径**条目引起的，该条目引用了不可访问的 UNC 位置。

 **一旦纠正了这一点，延迟就消失了。**

# php - 如何使用 PHP 有效地构建站点地图？

> ID：12087070
> 
> 赞同：0
> 
> 时间：2012-08-23T07:51:29.567
> 
> 标签：php, html, xml, sitemap

我已经构建了一个简单的站点地图脚本，我无法在 URL 字段中获取 URL 输出。

我的 PHP 脚本。

```
 header("Content-Type: text/xml;charset=iso-8859-1");
    echo '<?xml version="1.0" encoding="UTF-8"?>
    <urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
          xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9
          http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd">
    ';

    require_once('_ls-global/php/sr-connect.php');
    $db = mysql_select_db($database,$connection) or trigger_error("SQL", E_USER_ERROR);
    $sqlquery = mysql_query("SELECT * FROM $tablename ORDER by id")or die (mysql_error());

    while ($list = mysql_fetch_assoc($sqlquery)){

      $pflink=$list['pflink'];
      $pagelink=$list['pagelink'];

      $site="http://mysite.com";

      $url='$site/$pflink/$pagelink';

      $changefreq="weekly";
      $priority="1.0";

      echo '<url>
          <loc>'.$url.'</loc>
          <changefreq>'.$changefreq.'</changefreq>
          <priority>'.$priority.'</priority>
            </url>';

    }

    echo '</urlset>'; 
```

这个脚本的输出是这样的。

```
 <url>
    <loc>$site/$pflink/$pagelink</loc>
    <changefreq>weekly</changefreq>
    <priority>1.0</priority>
    </url> 
```

如果我`$url='$site/$pflink/$pagelink';`改为`$url="$site/$pflink/$pagelink";`

然后我只得到一个值和错误“XML Parsing Error: not well-formed”。

请查看并建议任何修改以使其正常工作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:03:41.757

我猜你的 vars 中有字符会弄乱 XML。

例如`&`, `ä`, `<`, `>`... 您需要正确编码内容。

尝试包装输出：首先更改`$url`为`$url = $site .'/'. $pflink .'/'. $pagelink;`，然后将 XML 的输出更新为：

```
<?php
// ...
      echo '<url>
          <loc><![CDATA['.$url.']]></loc>
          <changefreq>'.$changefreq.'</changefreq>
          <priority>'.$priority.'</priority>
            </url>';
?> 
```

`CDATA`可在[http://en.wikipedia.org/wiki/CDATA](http://en.wikipedia.org/wiki/CDATA)获得说明

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:43:14.903

根据**thedom**和**FrontEndJohn**的回答和评论，我以这种方式得到了正确的答案。

更改`$url='$site/$pflink/$pagelink';`为`$url = $site .'/'. $pflink .'/'. $pagelink;`

并进行修改。

```
 echo '<url>
      <loc>'.$url.'</loc>
      <changefreq>'.$changefreq.'</changefreq>
      <priority>'.$priority.'</priority>
        </url>'; 
```

到

```
 echo '<url>';
echo '<loc><![CDATA['.$url.']]></loc>';
echo '<changefreq>'.$changefreq.'</changefreq>';
echo '<priority>'.$priority.'</priority>';
echo '</url>'; 
```

希望这对其他人也有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T07:55:50.197

如果我正确理解您的问题，由于使用 ' 但当尝试使用 " 时，您当前无法获取变量的值，以便变量回显 XML 变得不安。

**尝试：**

```
$url = $site . '/' . $pflink . '/' . $pagelink; 
```

这将在不使用“的情况下给出变量的值。如果我误解了你，请告诉我。

**编辑：**考虑一下，假设变量在使用 '. 如果您还没有这样做，则可能值得检查变量的内容是否存在问题。

# php - 如何在php页面中传递xml图像？

> ID：12087071
> 
> 赞同：0
> 
> 时间：2012-08-23T07:51:31.393
> 
> 标签：php, html, xml

我是 php 新手。我最近在 php (http://net.tutsplus.com/articles/news/build-a-login-and-registration-system-with-xml/) 中浏览了一个登录示例，并为我的测试站点实现了登录页面本地主机。

但是现在我想为每个用户分配一个图像，假设我有 3 个用户，并且我在用户文件夹下有 3 个用户 xml，每个 xml 应该看起来像这样

```
<?xml version="1.0"?>
<user>
    <password>some password will come here</password>
    <email>user@user.com</email>
    <img>images/mynewimage.jpg</img>
</user> 
```

我在 xml 中添加了`<img>`节点，但我不知道如何在 php 页面上调用它。对我来说最大的挑战是找出每个页面上的当前用户，因为登录后我有 3-4 个基本页面，并且我在每个页面上都保持他的登录，所以我希望他的图像也出现在我下面给出的所有页面上每个页面上的代码以维护会话

```
<?php
session_start();
if(!file_exists('users/' . $_SESSION['username'] . '.xml')){
    header('Location: login.php');
    die;
}
?> 
```

当我检查用户名时，`<?php echo ucfirst($_SESSION['username']); ?>`它会显示我当前的用户名，但以同样的方式，我无法调用用户名旁边的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:55:08.937

使用[simplexml_load_file()](http://br2.php.net/simplexml_load_file)

```
$xml = simplexml_load_file('users/' . $_SESSION['username'] . '.xml');
echo $xml->img; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:18:49.327

您要做的第一件事是解析您的 xml file.php 有一个功能：

```
$xmls = simple_xml_load_file(your_file's_exact_path);
$image = $xml->img; 
```

如果您的 xml 文件中有许多 img 元素，则必须为此使用 foreach 循环：

```
foreach($xmls as $xml)
{
 $xml->img;
 $image = implode(',',$$xml->img;);
} 
```

此代码解析您的 xml 文件并将所有图像保存到变量 $image。现在你可以随意使用它了。确保 img 元素的路径。试试这个。它会帮助你。快乐编码！

# javascript - 如何在 iFrame 上的 designMode 中使用 MathJax？

> ID：12087072
> 
> 赞同：1
> 
> 时间：2012-08-23T07:51:36.570
> 
> 标签：javascript, html, css, math

我正在 iFrame 上创建一个带有 designMode 的数学输入应用程序，并且我决定将[MathJax](http://www.mathjax.org/)用于方程。问题是，它似乎不会改变 iframe 上我的 designMode 中的内容，那么有没有办法克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:04:41.617

为什么不在`designMode='on'`JS中动态设置。

```
var iframe = $('iframe')[0],
  iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
  iframeDoc.designMode = "on"; 
```

演示：http: [//jsfiddle.net/codef0rmer/Vhv5F/](http://jsfiddle.net/codef0rmer/Vhv5F/)

# android - 谷歌地图缩放控件未完全显示

> ID：12087077
> 
> 赞同：0
> 
> 时间：2012-08-23T07:51:49.020
> 
> 标签：android, google-maps, webview

我有一个既用作 WebApp 又用作原生 Android webview 的网页。该网页显示来自 google Maps API v3 的内容。问题是 ：

我无法在较旧的 android 设备的页面加载时完全看到缩放控件。

我知道这是因为旧的 android 浏览器不允许多点触控事件到 javascript 运行时。因此，API 显示了缩放控件。需要找到一种至少完全显示缩放控件的方法。

您能否建议，也许是 CSS 修复：P

PFA 未完全呈现缩小按钮的屏幕截图：

![截屏](../Images/c164c25779af0451aa55e09aea7a856f.png)

```
 Code:
    HTML:
        <div class="mapBody">
           <div id="map">
           </div>
        </div> 
    CSS:
    #map {
        height: 90%;
        width: 100%;
        position: absolute !important;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:58:40.137

**解决方法**：由于在 JS 上支持多点触控事件的所有设备都可以显示，所以我只是在 JS 中的地图实例中添加了以下属性，它基本上指定了控件的位置/控件类型。

```
 zoomControl: true,
        zoomControlOptions: {
             position: google.maps.ControlPosition.TOP_LEFT
        } 
```

**注意**：这不是一个解决方案，而只是我使用的一种解决方法，因为我很着急，因为它不会对现有流程造成太大麻烦。

# css - CSS 页脚列未正确显示

> ID：12087082
> 
> 赞同：0
> 
> 时间：2012-08-23T07:52:09.630
> 
> 标签：css

我是css的新手并且卡住了，无法弄清楚我做错了什么。但我想让脚显示为三列。如果您查看图像布局并注意到页脚有三列，这就是我想要实现的。页脚虚线也显示在布局之外。

这是我的布局： http: [//gdisinc.com/barker/images/menubar/layout_barker.jpg](http://gdisinc.com/barker/images/menubar/layout_barker.jpg)

这是工作网站：[http ://www.gdisinc.com/barker/default.php#](http://www.gdisinc.com/barker/default.php#)

你能告诉我我必须做些什么来修复它。如果您有任何问题，请告诉我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:56:44.713

2个解决方案

增加内容的宽度

```
.content {
  width: 903px; 
} 
```

或删除内容中最后一个 ul 的边框

```
.content ul:last-child {
  border-right: 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:00:59.520

添加这个CSS

```
.content {
    padding:20px 0;
}

#footer ul {
  margin: 0 0 0 20px;
  width: 275px;
  height:120px;
} 
```

还要添加一个类到最后`ul`并添加这个

```
.last {
   border:none;
} 
```

最好按照 Emrah 的建议执行此操作

```
.content ul:last-child {
  border-right: 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T08:08:00.113

第三个`<ul>`下降的原因是因为您有额外的 1px 边框 ( `border-right: 1px dotted #FFFFFF;`)。

你这样做的方式是拥有一个 900px 的容器并将其分成 3 列。这是正确的。但是一旦你添加了 extra `border-right: 1px dotted #FFFFFF;`，列宽就会变成 301px （300px 宽度 + 1px 边框 = **301px**）。

要解决这个问题，要么将容器大小更改为 903px。或者您将宽度尺寸减小到 299 像素。

* * *

关于另一个问题

> 页脚虚线显示过去的布局。

小心`padding`。当您在 div 中添加填充时。它被视为额外宽度。

您的 CSS 的某些部分`<ul>`是：

```
 width:902px;
    padding:20px; 
```

总宽度是`902px (width) + 20px (left padding) + 20px (right padding) = **942px**`

要解决这个问题，您`padding`可以`<ul>`使用`padding:20px 0px;`. 第**一个**值表示顶部和底部填充，**第二个**值表示左右填充。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T07:57:49.330

您的列在父级中不够合适。设置`style="border:none;"`为最后一列。

# c# - 如何将 C# 中的时区信息转换为 Java 中的时区信息？

> ID：12087083
> 
> 赞同：6
> 
> 时间：2012-08-23T07:52:27.597
> 
> 标签：c#, java, timezone

我有一个由**C#**后端和**Java**前端组成的系统。**C#**后端与其他系统和一些移动设备进行通信。

在**C#**方面，我的任务之一是识别来自移动设备的时间戳的时区并创建相应的`TimeZoneInfo`对象。这工作没有任何问题。

在**Java**方面，我必须将时区信息与移动设备发送的数据一起显示。我正在使用`TimeZone`该类将时区信息存储在我的域对象中。

现在的问题是如何创建与**C#**`TimeZon`对应的 Java 的 e 对象**的`TimeZoneInfo`对象？AFAIK 时区没有任何唯一 ID。此外，名称也不同（例如，在**C#**中：“ `Central Europe Standard Time`”，在**Java**中为“ `Central Europe Time`”）。甚至 C# 和 Java 中的时区数量都不相同！**

 *** * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T08:00:32.830

你知道“时间”是独立于“时区”的，所以我不会强调这一点:)

“时区”实际上更像是操作系统的功能，而不是编程语言。

Android“时区ID”对应标准，IANA“奥尔森数据库”：

*   [http://developer.android.com/reference/java/util/TimeZone.html#getTimeZone%28java.lang.String%29](http://developer.android.com/reference/java/util/TimeZone.html#getTimeZone%28java.lang.String%29)

*   [http://en.wikipedia.org/wiki/Tz_database](http://en.wikipedia.org/wiki/Tz_database)

等式的另一半是将 .Net 时区映射到“标准”。这个链接应该有帮助：

*   [来自奥尔森时区的 .NET TimeZoneInfo](https://stackoverflow.com/questions/5996320/net-timezoneinfo-from-olson-time-zone)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-23T08:07:16.230

正如 paulsm4 所说，您*可以*将 Windows 名称映射到[TZDB](http://www.iana.org/time-zones)（aka Olson、aka tz、aka zoneinfo）名称 - 尽管映射会定期更改，您应该真正查看[Unicode CLDR](http://cldr.unicode.org/)了解更多详细信息。您应该知道映射表的格式随着时间的推移发生了变化，并且一些 Windows ID 映射到多个 TZDB ID。（有些完全丢失了。）

作为替代方案，您可以考虑完全放弃 Windows 时区 ID，并在整个堆栈中使用 TZDB，如果您使用[Noda Time](http://noda-time.googlecode.com)（我已经研究了一段时间的 .NET 日期/时间 API）。[如果您使用Joda Time](http://joda-time.sf.net) ，您*还会*发现您的 Java 日期/时间工作更容易，这是我基于 Noda Time 的“引擎”的库。它比在 Java 中使用and好得多。`Date``Calendar`**

# objective-c - 如何显示 MPMoviePlayerController 控件？

> ID：12087086
> 
> 赞同：3
> 
> 时间：2012-08-23T07:52:44.983
> 
> 标签：objective-c, ios, xcode, mpmovieplayercontroller

我有 MPMoviePlayerController，我想以编程方式显示控件，比如在用户点击之后，或者模拟用户点击。

![http://i.stack.imgur.com/KYMmG.jpg （对不起，我没有足够的声誉，无法发布图片）。](../Images/460253f0001c21b2317ce6f1e9519c30.png)

我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T08:11:49.760

以下列方式创建 MPMoviePlayerController 对象将为您提供视频控件的界面

```
yourMoviePlayerController = [MPMoviePlayerController new];     
yourMoviePlayerController.controlStyle=MPMovieControlStyleEmbedded;
[yourMoviePlayerController setContentURL:[NSURL fileURLWithPath:videoPath]];
yourMoviePlayerController.backgroundView.hidden = YES;

[yourMoviePlayerController setScalingMode:MPMovieScalingModeAspectFit];
yourMoviePlayerController.shouldAutoplay=YES;
yourMoviePlayerController.movieSourceType = MPMovieSourceTypeFile; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:12:54.420

我想有人已经[在这里](https://stackoverflow.com/questions/3961137/how-to-hide-control-before-mpmovieplayercontroller-movie-is-played?answertab=votes#tab-top)回答了这个问题

将`controlStyle`属性设置为`MPMovieControlStyleNone`最初，然后`MPMovieControlStyleFullscreen`使用`[performSelector:withObject:afterDelay:1]`. 它运作良好，在用户点击视频之前不会出现控件。

# jasper-reports - jasper 使用 style-Barcode 报告条形码

> ID：12087087
> 
> 赞同：5
> 
> 时间：2012-08-23T07:52:46.397
> 
> 标签：jasper-reports

我正在尝试在使用*barcode4j* jar的*JasperReports中使用条形码。*我正在使用的罐子是：

 **   条码4j-2.0.jar
*   commons-beanutils.jar
*   commons-codec-1.6.jar
*   commons-collections.jar
*   commons-digester-2.0.jar
*   commons-lang-2.0.jar
*   commons-logging.jar
*   commons-net-1.2.2.jar
*   commons-validator.jar
*   db2jcc.jar
*   db2jcc_license_cu.jar
*   itext-2.1.7.jar
*   jasperreports-4.5.0.jar
*   log4j-1.2.8.jar
*   poi-3.8-20120326.jar

我使用条形码的*jrxml文件内容如下所示：*

```
<title>    
    <band height="125">    
        <frame>    
            <reportElement x="0" y="0" width="555" height="40" />    
            <componentElement>    
                <reportElement style="Barcode" x="5" y="5" width="400" height="30"/>    
                <c:Code39 xmlns:c="http://jasperreports.sourceforge.net/jasperreports/components"    xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components    http://jasperreports.sourceforge.net/xsd/components.xsd">    
                    <c:codeExpression>$F{OPA_ACK_NO_PK}</c:codeExpression>    
                </c:Code39>    
            </componentElement>    
        </frame>    
    </band>    
</title> 
```

但我收到以下错误：

```
net.sf.jasperreports.engine.JRRuntimeException: Could not resolve style(s): Barcode4j
at net.sf.jasperreports.engine.fill.JRFillObjectFactory.checkUnresolvedReferences(JRFillObjectFactory.java:1577)
at net.sf.jasperreports.engine.fill.JRFillObjectFactory.setStyles(JRFillObjectFactory.java:1504)
at net.sf.jasperreports.engine.fill.JRBaseFiller.loadStyles(JRBaseFiller.java:912)
at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:804)
at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:746)
at net.sf.jasperreports.engine.fill.JRFiller.fillReport(JRFiller.java:58)
at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:417)
at Report.Test.main(Test.java:162) 
```

请指导我我做错了什么？

删除条码样式标签的注释后，我摆脱了该错误并得到另一个异常：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/batik/bridge/UserAgent
    at net.sf.jasperreports.components.barcode4j.BarcodeSVGImageProducer.createImage(BarcodeSVGImageProducer.java:69)
    at net.sf.jasperreports.components.barcode4j.BarcodeFillComponent.setBarcodeImage(BarcodeFillComponent.java:149)
    at net.sf.jasperreports.components.barcode4j.BarcodeFillComponent.fill(BarcodeFillComponent.java:113)
    at net.sf.jasperreports.engine.fill.JRFillComponentElement.fill(JRFillComponentElement.java:148)
    at net.sf.jasperreports.engine.fill.JRFillElementContainer.fillElements(JRFillElementContainer.java:570)
    at net.sf.jasperreports.engine.fill.JRFillFrame.fill(JRFillFrame.java:276)
    at net.sf.jasperreports.engine.fill.JRFillElementContainer.fillElements(JRFillElementContainer.java:570)
    at net.sf.jasperreports.engine.fill.JRFillBand.fill(JRFillBand.java:406)
    at net.sf.jasperreports.engine.fill.JRFillBand.fill(JRFillBand.java:352)
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillTitle(JRVerticalFiller.java:323)
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReportStart(JRVerticalFiller.java:257)
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReport(JRVerticalFiller.java:128)
    at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:836)
    at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:746)
    at net.sf.jasperreports.engine.fill.JRFiller.fillReport(JRFiller.java:58)
    at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:417)
    at Report.Test.main(Test.java:169) 
```

我添加了所需的蜡染、深红色、xerces 和 xercesImpl 罐子。但我收到以下错误：

```
Exception in thread "main" java.lang.IllegalAccessError: tried to access method org.apache.batik.bridge.ViewBox.getPreserveAspectRatioTransform([FSZFF)Ljava/awt/geom/AffineTransform; from class net.sf.jasperreports.renderers.BatikRenderer
    at net.sf.jasperreports.renderers.BatikRenderer.render(BatikRenderer.java:123)
    at net.sf.jasperreports.engine.export.JRPdfExporter.exportImage(JRPdfExporter.java:1405)
    at net.sf.jasperreports.engine.export.JRPdfExporter.exportElements(JRPdfExporter.java:757)
    at net.sf.jasperreports.engine.export.JRPdfExporter.exportFrame(JRPdfExporter.java:2554)
    at net.sf.jasperreports.engine.export.JRPdfExporter.exportElements(JRPdfExporter.java:765)
    at net.sf.jasperreports.engine.export.JRPdfExporter.exportPage(JRPdfExporter.java:721)
    at net.sf.jasperreports.engine.export.JRPdfExporter.exportReportToStream(JRPdfExporter.java:635)
    at net.sf.jasperreports.engine.export.JRPdfExporter.exportReport(JRPdfExporter.java:383)
    at net.sf.jasperreports.engine.JasperExportManager.exportReportToPdfFile(JasperExportManager.java:122)
    at Report.Test.main(Test.java:172) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-11-21T15:19:24.780

你应该添加图书馆蜡染桥：

```
<dependency>
    <groupId>batik</groupId>
    <artifactId>batik-bridge</artifactId>
    <version>1.6-1</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T08:32:34.717

昨天我遇到了完全相同的问题，我成功地使用以下方法解决了它：

```
 <componentElement>
            <reportElement x="311" y="166" width="180" height="10"/>
            <jr:barbecue xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd" type="Code39 (Extended)" drawText="false" checksumRequired="false">
                <jr:codeExpression><![CDATA[$P{barcode}]]></jr:codeExpression>
            </jr:barbecue>
        </componentElement> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-12T17:47:23.233

对我来说，添加`batik-bridge`以下依赖项到项目`pom.xml`工作：

```
<dependency>
    <groupId>org.apache.xmlgraphics</groupId>
    <artifactId>batik-bridge</artifactId>
    <version>1.9.1</version>
</dependency> 
```*

# java - 在 HBase 中使用带有起始行、结束行和过滤器的 Scan

> ID：12087090
> 
> 赞同：3
> 
> 时间：2012-08-23T07:52:55.413
> 
> 标签：java, hbase, database-scan

我需要在 HBase 中使用 Scan 来扫描满足特定条件的所有行：这就是我将使用过滤器的原因（实际上是一个包含两个 SingleColumnValueFilter 的复合过滤器列表）。现在，我的 rowKeys 以这种方式构建：

```
a.b.x|1|1252525  
a.b.x|1|2373273  
a.b.x|1|2999238  
...  
a.b.x|2|3000320  
a.b.x|2|4000023  
...  
a.b.y|1|1202002  
a.b.y|1|1778949  
a.b.y|1|2738273 
```

作为附加要求，我只需要迭代那些 rowKey 以“abx|1”开头的行

现在，问题

1.  如果我在过滤器列表中使用额外的 PrefixFilter，扫描仪是否总是扫描所有行（并且在每个行上都应用过滤器）？
2.  如果我通过 startRow（前缀）和过滤器列表（没有 PrefixFilter）实例化扫描，我知道扫描从给定的行前缀开始。那么，假设我使用“abx”作为 startRow，扫描是否也会扫描 aby？
3.  如果我使用 new Scan(startRow, endRow) 然后 setFilter 会有什么行为？总而言之：缺少的构造函数 Scan(byte [] start, byte [] end, Filter filter) 呢？

在此先感
谢安德里亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:33:44.247

行键在 hbase 中排序（词法）。因此，所有“abx|1”都将出现在“abx|2”之前，依此类推。由于行键存储为字节数组并按字典顺序排序，因此请注意非固定长度的行键以及在混淆时不同的字符类别。但是对于您的要求，这条线上的东西应该可以工作：

```
Scan scan = new Scan(Bytes.toBytes("a.b.x|1"),Bytes.toBytes("a.b.x|2"); //creating a scan object with start and stop row keys

scan.setFilter(colFilter);//set the Column filters you have to this scan object.

//And then you can get a scanner object and iterate through your results
ResultScanner scanner = table.getScanner(scan);
for (Result result = scanner.next(); result != null; result = scanner.next())
{
    //Use the result object
} 
```

更新： ToBytes 应该是 toBytes

# r - XTS：按交易日分割外汇盘中柱数据

> ID：12087092
> 
> 赞同：3
> 
> 时间：2012-08-23T07:53:11.443
> 
> 标签：r, xts

我想将一个函数应用于价值 20 个交易日的每小时外汇数据（作为众多示例中的一个）。

我从`rollapply(data,width=20*24,FUN=FUN,by=24)`. 这似乎运作良好，我什至可以断言我总是通过 480 个酒吧......直到我意识到这不是我想要的。由于夏令时和市场假期的变化，这 480 条酒吧的开始和结束时间多年来一直在漂移。

所以，我想要的是一个函数，它将一天视为我们有数据的每一天的 22:00 到 22:00。（纽约夏令时 21:00 到 21:00 - 我的数据时区是 UTC，开始时间定义为东部时间下午 5 点）

所以，我以这个为核心制作了自己的 rollapply 函数：

```
 ep=endpoints(data,on=on,k=k) 
 sp=ep[1:(length(ep)-width)]+1
 ep=ep[(width+1):length(ep)]
 xx <- lapply(1:length(ep), function(ix) FUN(.subset_xts(data,sp[ix]:ep[ix]),...) ) 
```

然后我用 on="days"、k=1 和 width=20 调用它。

这有两个问题：

1.  天是天，不是交易日！因此，我得到的数据通常不到 4 周，而是不到 3 周。
2.  截止时间是 UTC 午夜。我无法弄清楚如何将其更改为使用 22:00（或 21:00）截止。

> **更新**：上面的问题1是错误的！XTS`endpoints`功能*在*交易日有效，而不是日历日。我不这么认为的原因是时区问题使它看起来像一个为期 6 天的交易周：周日到周五。一旦时区问题得到解决（见我的自我回答），使用`width=20`并且`on="days"`确实给了我 4 周的数据。

（*通常*很重要：当这 4 周内有交易假期时，我希望收到 4 周 1 天的数据，即总是正好 20 个交易日。）

我开始研究一个将数据切成几周的功能，以为我可以将它们分成五个 24 小时的块，但这感觉是错误的方法，*肯定有人在我之前发明了这个轮子？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T01:55:30.587

以下是如何让黎明正确：

```
x2=x
index(x2)=index(x2)+(7*3600)
indexTZ(x2)='America/New_York' 
```

即仅设置时区将黎明时间设置为 17:00；我们希望它在 24:00，所以首先添加 7 小时。

在以下方面的帮助下： [POSIXct 和 xts 中的时区，从 R 中的 GMT 转换](https://stackoverflow.com/questions/11917185/time-zones-in-posixct-and-xts-converting-from-gmt-in-r)

这是完整的功能：

```
rollapply_chunks.FX.xts=function(data,width,FUN,...,on="days",k=1){
data <- try.xts(data)

x2 <- data
index(x2) <- index(x2)+(7*3600)
indexTZ(x2) <- 'America/New_York'

ep <- endpoints(x2,on=on,k=k)    #The end point of each calendar day (when on="days").
    #Each entry points to the final bar of the day. ep[1]==0.

if(length(ep)<2){
    stop("Cannot divide data up")
}else if(length(ep)==2){  #Can only fit one chunk in.
    sp <- 1;ep <- ep[-1]
}else{
    sp <- ep[1:(length(ep)-width)]+1
    ep <- ep[(width+1):length(ep)]
}

xx <- lapply(1:length(ep), function(ix) FUN(.subset_xts(data,sp[ix]:ep[ix]),...) )
xx <- do.call(rbind,xx)   #Join them up as one big matrix/data.frame.

tt <- index(data)[ep]  #Implicit align="right". Use sp for align="left"
res <- xts(xx, tt)
return (res)
} 
```

您可以看到我们使用*修改后*的索引来拆分*原始*数据。（如果 R 在幕后使用写时复制，那么唯一的额外内存需求应该是索引的副本，而不是数据的副本。）

（法律位：请考虑它在 MIT 下获得许可，但如果需要，明确许可在 GPL-2 XTS 包中使用。）

# wcf - Web.Release.config 中的不同端点地址

> ID：12087094
> 
> 赞同：0
> 
> 时间：2012-08-23T07:53:37.363
> 
> 标签：wcf

就像标题一样。我想在发布模式下构建时有不同的端点地址，如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:10:05.737

在 Visual Studio 2010 中，您可以创建配置转换。本质上，您创建了一个名为 Web.Release.Config 的文件，当您在 Release 配置中构建时，该文件的内容将合并到 web.config 中。请参阅[此处](http://weblogs.asp.net/srkirkland/archive/2009/10/13/common-web-config-transformations-with-visual-studio-2010.aspx)以使用示例，但它在网络上被广泛记录。

在 Visual Studio 2008 及更早版本（其中不提供转换功能）中，我们已成功使用 T4 模板在构建时生成我们的 web.config。我们生成多个配置（每个环境一个），为此我建议查看[Oleg Sych 的](http://www.olegsych.com/2008/03/how-to-generate-multiple-outputs-from-single-t4-template/)博客，该博客详细介绍了如何从单个 T4 模板生成多个配置文件。

但是，如果您只想修改配置的一小部分（听起来像您这样做），那么您可能可以使用简单的 T4 文件`web.config.tt`来生成您的配置 - 我们的需求有点复杂！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:13:34.500

在大多数情况下，与 T4 相比，Web 配置转换将是此实例的最佳选择。

我已经非常喜欢[Slow Cheetah](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5)插件，它使您能够在差异视图中预览转换：

# c# - 无法获取 @Html.DropDownList 的值

> ID：12087095
> 
> 赞同：1
> 
> 时间：2012-08-23T07:53:38.363
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

我有一个创建 cshtml 页面，如下所示：-

```
@model MvcCommons.ViewModels.CompositeViewModel
@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"></script>

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)

<fieldset>
    <legend>Article</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.ArticleViewModel.Article.ArticleTitle)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.ArticleViewModel.Article.ArticleTitle)
        @Html.ValidationMessageFor(model => model.ArticleViewModel.Article.ArticleTitle)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.ArticleViewModel.Article.ArticleDate)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.ArticleViewModel.Article.ArticleDate)
        @Html.ValidationMessageFor(model => model.ArticleViewModel.Article.ArticleDate)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.ArticleViewModel.Article.ArticleText)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.ArticleViewModel.Article.ArticleText)
        @Html.ValidationMessageFor(model => model.ArticleViewModel.Article.ArticleText)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.ArticleViewModel.Article.ArticleSource)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.ArticleViewModel.Article.ArticleSource)
        @Html.ValidationMessageFor(model => model.ArticleViewModel.Article.ArticleSource)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.ArticleViewModel.Article.CategoryID, "Category")
    </div>
    <div class="editor-field">
        @Html.DropDownList("CategoryID", String.Empty)
        @Html.ValidationMessageFor(model => model.ArticleViewModel.Article.CategoryID)
    </div>

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

然后我在 Create Action 中获取 viewModel，如下所示：-

```
 [HttpPost]
    public ActionResult Create(CompositeViewModel viewModel)
    {
        if (ModelState.IsValid)
        {
            unitOfWork.ArticleRepository.Insert(viewModel.ArticleViewModel.Article);
            unitOfWork.Save();
            return RedirectToAction("Index");
        }

        PopulateDropDownList(viewModel.ArticleViewModel.Article.CategoryID);
        return View(viewModel);
    } 
```

PopulateDropDownList 代码如下：-

```
 private void PopulateDropDownList(object selectedCategory = null)
    {
        var categoryQuery = unitOfWork.CategoryRepository.Get(
                        orderBy: q => q.OrderBy(d => d.CategoryTitle));
        ViewBag.CategoryID = new SelectList(unitOfWork.CategoryRepository.Get(), "CategoryID", "CategoryTitle", selectedCategory);

    } 
```

我的问题是，无论我在下拉列表中选择什么值，CompositeViewModel viewModel 中的 CategoryID 始终为 0！在 Create cshtml 中输入的其他数据在 viewModel 中正确填充。

我无法发现我做错了什么。

感谢您的帮助和时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:01:39.197

你不应该使用[DropDownListFor](http://msdn.microsoft.com/en-us/library/ee703573.aspx)：

```
@Html.DropDownListFor(model => model.ArticleViewModel.Article.CategoryID, (SelectList)ViewBag.CategoryID) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:00:25.090

你应该写

```
@Html.DropDownList("ArticleViewModel.Article.CategoryID", ViewBag.CategoryID, null) 
```

所以 ModelBinding 可以正常工作，甚至可以使用`DropDownListFor<>()`.

# php - 如何在雄辩的 Laravel 中使用名称查找条目？

> ID：12087098
> 
> 赞同：7
> 
> 时间：2012-08-23T07:54:02.040
> 
> 标签：php, mysql, orm, laravel

默认情况下，我们通常通过 id 号搜索 db 表上的任何条目。但我找不到如何按名称列搜索任何条目。

这是我查找条目并将其呈现以查看的代码

控制器：作者

```
class Authors_Controller extends Base_Controller {

    public $restful = true;

    public function get_view($id){
        $authorModel = Authors::find($id);
        return View::make('authors.view')
            ->with('author', $authorModel)
            ->with('title', $authorModel->name);
    }

} 
```

型号：作者

```
<?php 

class Authors extends Eloquent {
    public static $table = 'authors';
} 
```

路线 ：

```
Route::controller(Controller::detect());

Route::get('author/(:any)', array('as'=>'author', 'uses'=>'authors@view')); 
```

看法 ：

```
@layout('main.index')

@section('content')
<h1>{{$author->name}}</h1>

<p>
    {{$author->bio}}
</p>

<small>
    {{$author->created_at}} |
    {{HTML::link(URL::$base.'/authors/', 'Go back')}}
</small>
@endsection 
```

我如何使 url 不显示 id 而是显示帖子的名称

> some.com/category/name（而不是 some.com/category/id）

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-23T11:14:31.280

在您的控制器中，您总是会`$id`按照 Eloquent 查询使用的方式进行搜索：

```
$authorModel = Authors::find($id); 
```

由于可以为您的命名路由提供 int 或字符串 (:any)，因此在控制器中运行类型检查`$id`并根据结果运行不同的查询。

```
public function get_view($id)
{
   if (is_numeric($id))
   {
       $authorModel = Authors::find($id);
   }
   else
   {
       $column = 'name'; // This is the name of the column you wish to search

       $authorModel = Authors::where($column , '=', $id)->first();
   }

   return View::make('authors.view')
                ->with('author', $authorModel)
                ->with('title', $authorModel->name);

} 
```

我希望这对你有帮助。

作为旁注，您的 Eloquent 模型。

如果您使用正确的命名约定，则无需提供表名。

```
class Author extends Eloquent {

} 
```

请注意，单数`Author`将映射到自动调用的表，`Authors`无需您的任何干预。

# file - 谷歌应用引擎如何验证电子邮件附件

> ID：12087102
> 
> 赞同：0
> 
> 时间：2012-08-23T07:54:16.437
> 
> 标签：file, google-app-engine, email, mime-types, attachment

附件的 MIME 类型由文件名确定。如果文件名是 *.csv，则对其进行验证以进行处理。有没有办法确定文件扩展名/mimetype 是否适合文件中的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:45:06.553

实际上，在接收邮件时，附件类型不是通过文件名确定的，而是通过[Multipart message subtypes](http://en.wikipedia.org/wiki/MIME#Multipart_messages)确定的。另请参阅[相关的 RFC](http://www.w3.org/Protocols/rfc1341/7_2_Multipart.html)。

现在，发件人当然可以撒谎：*.csv 文件实际上可能不包含 CSV 内容。但这是高度特定于内容的。要检查这一点，您实际上需要阅读 CSV 内容并检查它是否有效。实际检查内容是否有效不是电子邮件系统或电子邮件客户端的工作。

如果您需要检查有效的 CSV，您应该对其进行解析并检查其内容。请参阅[opencsv](http://opencsv.sourceforge.net/)。

# sql - sql 转换为 int 失败

> ID：12087112
> 
> 赞同：0
> 
> 时间：2012-08-23T07:54:43.107
> 
> 标签：sql, sql-server-2008

SQL 服务器管理器 2008。

我最近更改了一个存储过程来查看不同的表。

从那以后我一直收到同样的错误：

“将 varchar 值 'BC8018' 转换为数据类型 int 时，消息 245，级别 16，状态 1，行 1 转换失败。”

现在我将查询拆分到根目录以查找此问题发生的位置，并确定它发生在我的新表的 JOIN 上。

现在我比较了我在表中使用的唯一字段，Pareto 和 NewPareto 都是整数。

继承人的代码：

```
SELECT i.Acct,
   i.Name, 
   i.Document, 
   i.Part, 
   i.Qty, 
   i.Unit, 
   dbo.PeriodInsert.NewPareto,
   i.pg,
   i.[DateTime],
   i.BinSeqNo

FROM   
OPENQUERY(SACBAUTO, 'SELECT dbo.iHeads.acct,
                            dbo.iHeads.name,
                            dbo.iLines.Document,
                            dbo.iLines.Part,
                            dbo.iLines.Pg,
                            dbo.iLines.Qty,
                            dbo.iLines.unit,
                            dbo.iHeads.[DateTime], 
                            dbo.iLines.BinSeqNo 
                     FROM Autopart.dbo.iheads INNER JOIN Autopart.dbo.iLines ON 
                     Autopart.dbo.Iheads.document = autopart.dbo.iLines.document
                     WHERE dbo.iLines.Pg not in (''60'',''61'',''62'')

                      ') i
left JOIN
dbo.PeriodInsert
ON 
i.Part collate SQL_Latin1_General_CP1_CI_AS = dbo.PeriodInsert.NewPareto 
WHERE
 (i.[DateTime] BETWEEN '2012-03-01' AND '2012-08-23') AND
 i.Acct = '1557' 
```

请记住，这是对原始存储过程的分解，但这是它的根源。我觉得很奇怪，使用字段 pareto 的名为 NEWpareto 的原始表也是一个 int 表。任何想法为什么这东西突然停止工作只是因为一张桌子？

如果您需要更多信息，请告诉我。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:58:35.657

`dbo.iLines.Part`不是一个 int - 它有一个排序规则 - 所以如果 NewPareto 是，那么你正在尝试将它转换为一个 int 来进行连接。在该字段中搜索“BC8018”并检查它是否有效。如果是，那么您将必须`i.Part`加入`convert(nvarchar(...), dbo.PeriodInsert.NewPareto)`

# java - 如何在进化算法中初始化染色体以解决实变量上的 LP/ILP 或一般 COS？

> ID：12087115
> 
> 赞同：0
> 
> 时间：2012-08-23T07:54:53.893
> 
> 标签：java, math, optimization, mathematical-optimization, evolutionary-algorithm

我正在研究用于优化问题的 Java 框架。到目前为止，我已经实现[了 lp_solve](http://lpsolve.sourceforge.net/5.5/)和[GLPK](http://www.gnu.org/software/glpk/)，因此我可以处理线性问题 (LP) 和整数线性问题 (ILP)。现在我想提供使用进化算法作为求解器的可能性，以便能够处理具有非线性约束或非线性目标函数的问题。通常用于处理约束优化问题 (COS)。我找到了遗传算法的[Apache commons 遗传包](http://commons.apache.org/math/userguide/genetics.html)，并开始实现遗传算法。

我的算法中的染色体代表优化问题的解决方案，即它由一个 map 组成`Variable -> Number`。现在，在第一批人群中，我想随机创建一个解决方案并从那里开始进化。因此，我需要找到变量的随机值。我可以访问变量的下界和上界，以及它的域是否是整数是实数。因此，我通过以下方式启动变量：

```
//Create a Random Number generator
Random generator = new Random();

//Create a new Map to store the variables and their assigned values
Map<String,Number> newRepresentation = new HashMap<String,Number>();

//Iterate over all variables from the problem
for (Entry<String,Variable> entry : problem.getVariables().entrySet()) {
    Variable variable = entry.getValue();
    Number uB = variable.getUpperBound();
    Number lB = variable.getLowerBound();
    //Create a random value for this variable
    Number randomValue = (generator.nextDouble() * (uB.doubleValue() - lB.doubleValue())) + lB.doubleValue();
    //If the variable has Integers as its domain, make the random value an Integer
    if (variable.getType() == OptVarType.INTEGER) randomValue = randomValue.intValue();
    newRepresentation.put(variable.getName(), randomValue);
} 
```

这应该给我一张将`newRepresentation`所有变量分配给随机数的地图。但是，如果变量不受限制，即下限 equals`0`和上限 equals `Integer.MAX_VALUE`，我永远不会得到接近下限的值。例如，我有问题

```
max 3x+4y
s.t.
x+2y <= 14
3x-y >= 0
x-y <= 2
x in {0,...,2147483647}
y in {0,...,2147483647} 
```

那么最优解是`x=6, y=4`。但变量由我的 EA 初始化为：

```
A new Population has been initiated: {y=1430866067, x=1616622921}
A new Population has been initiated: {y=1483081480, x=1389387196}
A new Population has been initiated: {y=242558338, x=376547119}
A new Population has been initiated: {y=1861689859, x=959676986}
... 
```

该值永远不会接近最优解所在的下限。因此，即使经过几分钟的搜索，我的 EA 也没有找到至少接近最优解的解。

问题：如何修改染色体的起始值，使值均匀分布在整个搜索空间中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:25:11.487

首先，我考虑过你的整数值在你转换后是否仍然均匀分布。

例子：

您想创建一个介于 5 和 10 之间的整数。因此，您在该间隔中创建了一个均匀分布的双精度数（这适用于您的代码），并且它在 [5,5.5) 中的可能性等于它在[5.5,6), 在 [6,6.5], ... , [9.5,10)。现在，要将其转换为整数，您需要对值进行下限，将我描述的两个区间映射到每个可能的整数值。所以这对我来说似乎很好。

我还进行了一个简短的测试，它对我来说效果很好。所以我只看到您的问题的两个可能原因：

1.  随机数发生器坏了。（如果您使用标准 JDK，这不太可能）
2.  您执行的试验太少，也无法获得低起始值 - 间隔非常大。

编辑：我查看了 Number 类的文档。转换为整数可以自由使用截断或舍入。如果确实使用舍入，则随机整数值不再均匀分布，因此您应该明确地对双精度值进行下限。

# multithreading - 理解分配：使用 servlet 搜索 1 万亿以上的素数

> ID：12087116
> 
> 赞同：3
> 
> 时间：2012-08-23T07:54:54.330
> 
> 标签：multithreading, algorithm, servlets, primes

我是一名在大学学习 IT 的学生。我一直在分配寻找万亿以上素数的任务。已给出步骤：

*   起始数字为一万亿

*   选择奇数候选人

*   将它们除以 3 和它们的平方根之间的每个奇数。如果其中一个整数均分候选者，则它被宣布为素数。

现在这就是我想出的：

```
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class PrimeSearcher extends HttpServlet{
    private long number = 10000000000000001L;
private boolean found = false;
public void doGet(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {
    PrintWriter out = response.getWriter();

    while(!checkForPrime(number)){
        number = number+2;
    }

    if(found){
        out.println("The first prime number above 1 quadrillion is : " + number);
    }

}

public boolean checkForPrime(long numberToCheck){
    double sqrRoof = Math.sqrt(numberToCheck);
    for(int i=3; i< sqrRoof; i++){
        if(numberToCheck%i==0){
         return false;
        }
    }
    found= true;
    return found;
}

} 
```

我担心的是不确定我是否走在正确的道路上，另一个问题是这总是一个数字，第一个。谷歌搜索后，我在[servlet.com](http://www.javafaq.nu/java-example-code-1025.html)和[javafaq](http://www.javafaq.nu/java-example-code-1025.html)上发现他们正在使用线程，我已经运行了他们的线程，看起来很酷。我不太明白那个，但它给出了不同的数字。

所以我现在对如何实现该算法感到困惑，我真的不想复制那个算法。也许在理解了他们的方法之后，我可以更好地编写这个算法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:44:12.540

此外，您需要`checkForPrime`直到`i<=sqrRoof`（sqrRoof 可以是整数）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:10:37.983

我认为它看起来不错，但您可能需要`i`in`checkForPrime`成为一种`long`类型。而且您不会增加`i`2（您只需要检查奇数除数）。

只是准备好这个需要很长时间.......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T13:57:52.077

检查大素数的标准方法是使用埃拉托色尼筛法生成一个低素数列表，直到某个限制。使用该列表检查万亿范围内的奇数，以消除大多数非素数。

然后使用[Miller-Rabin](http://en.wikipedia.org/wiki/Miller-Rabin_test)概率素数检验来检查剩余的大数是否真的是素数。如果您重复 MR 测试多达 64 次，那么您的硬件发生故障的可能性要比您无意中找到一个合数的可能性大得多。

对于大数，MR 测试比试除法要快得多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T10:16:46.323

你的源代码中有 10 万亿，而不是 1 万亿。只是让你知道。:)

如果您需要它们，千万亿以上的质数是：

```
37,91,159,187,223 ... 
```

10 万亿以上：

```
61,69,79 ... 
```

# asp.net - 为什么我的桌面应用程序没有将数据发布到我的网页？

> ID：12087117
> 
> 赞同：1
> 
> 时间：2012-08-23T07:09:12.513
> 
> 标签：asp.net, desktop-application

我正在尝试将数据从我的桌面应用程序发布到我的网页。

这是发布数据的代码

```
var httpWebRequest = (HttpWebRequest)WebRequest.Create("http://localhost:2524/HomeLogin.aspx");
httpWebRequest.UseDefaultCredentials = true;
httpWebRequest.ContentType = "application/x-www-form-urlencoded";
httpWebRequest.Method = "POST";

byte[] requestBytes = Encoding.UTF8.GetBytes("MAC="+ lblMAC.Text.Trim());
httpWebRequest.ContentLength = requestBytes.Length;
using (var requestStream = httpWebRequest.GetRequestStream())
{
    requestStream.Write(requestBytes, 0, requestBytes.Length);
    requestStream.Close();
} 
```

在我的网页的页面加载中，我`ASP.NET`正在运行这个应用程序并试图从中获取价值。这是我的代码

```
System.Diagnostics.Process.Start("C:\\Program Files\\Default Company Name\\MACSetup\\MAC.exe") ;
txtUsername.Text = Request.QueryString["MAC"]; 
```

我无法获取数据。也没有抛出错误。我想我可能遗漏了一些东西。

谁能帮我这个？

欢迎任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:30:25.723

Request.QueryString 仅在您使用 GET 时才有效。对于 POST，您应该使用 Request.Params。

# c# - 如何从 DB 中读取嵌入了锚标记的文本并在 mvc 和 C# 中显示相同的文本

> ID：12087121
> 
> 赞同：0
> 
> 时间：2012-08-23T07:55:12.487
> 
> 标签：c#, asp.net-mvc-3

我在 DB 中有一行，其中包含如下所示的文本

```
Will candidate handle Personally Identifiable Information (PII) as defined <a target ='_blank' href='http://intranet.hp.com/sites/privacyrulebook/Pages/Glossary.aspx'> here</a>? 
```

我将在 asp.net MVC、C# 中阅读相同内容，并且将在页面上打印相同内容。

我的要求是文本应该显示为文本并带有文本中提到的链接。请查看上述数据库文本中的锚标记。

有人请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:59:46.387

如果你想让 " `here`" 成为一个链接，你可以这样做：

`@(new HtmlString(Model.TheTextFromDB))`

`Model.TextFromDB`你的实际文字在哪里。这将打印您的文本并制作“ `here`”链接。如果这是其他人放在那里的任意文本，您可能不想在不先过滤的情况下显示它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:10:50.090

我认为你可以使用

```
<%= model.HtmlContent %> 
```

或者

```
@Html.Raw(model.Content) 
```

# objective-c - 在objective-c中使用基于时间的ProgressBar

> ID：12087125
> 
> 赞同：0
> 
> 时间：2012-08-23T07:55:31.520
> 
> 标签：objective-c, ios, progress-bar, nstimer

嗨，我想根据时间在我的 iPhone 应用程序中使用进度条，例如如果一个人从上午 10:00 开始旅程并在上午 11:00 结束，那么每 5 分钟我将更新与当前时间相比的进度，怎么样可能的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:00:12.640

您可以使用一个简单`NSTimer`的方法来实现这一点：

`viewDidLoad`当然，这些变量需要在你的头文件中声明。

```
UIProgressView *myProgressView = [[UIProgressView alloc] initWithProgressViewStyle:UIProgressViewStyleDefault];
float someFloat = 0;

NSTimer *myTimer = [NSTimer scheduledTimerWithTimeInterval:300 target:self selector:@selector(methodToUpdateProgress) userInfo:nil repeats:YES]; 
```

然后这将更新进度视图（假设最小值/最大值为 0-100）

```
- (void)methodToUpdateProgress
{
    if(someFloat == 100){
         [myTimer invalidate];
    }else{
         someFloat = someFloat + 12;
         [myProgressView setProgress:someFloat animated:YES];
    }
} 
```

此外，如果调用它的时间实际上是一个问题，这个例子应该对你有很大帮助。**引用自：** [我如何使用 NSTimer？](https://stackoverflow.com/questions/1449035/how-do-i-use-nstimer)

```
NSDate *d = [NSDate dateWithTimeIntervalSinceNow: 60.0];
NSTimer *t = [[NSTimer alloc] initWithFireDate: d
                              interval: 1
                              target: self
                              selector:@selector(onTick:)
                              userInfo:nil repeats:YES];

NSRunLoop *runner = [NSRunLoop currentRunLoop];
[runner addTimer:t forMode: NSDefaultRunLoopMode];
[t release]; 
```

**注意：**这是一个非常粗略的示例，但它应该能够理解重点。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:08:01.983

iVar：

```
NSDate *_startDate = ....
NSDate *_finishDate = ....
UIProgressBarView *_progressBar = .... 
```

触发方法：

```
- (void)start
{
   [self updateProgressBar];
   NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:updateInterval 
                                                     target:self 
                                                     selector:@selector(updateProgressBar) 
                                                     userInfo:nil 
                                                     repeats:YES];
} 
```

更新进度条视图

```
- (void)updateProgressBar
{
     NSTimeInterval diff = [_finishDate timeintervalSince:_startDate];
     NSTimeInterval pastTime = [_finishDate timeIntervallSinceNow];
     [_progressBar setProgress:pastTime/diff animated:YES];

} 
```

不要忘记在计时器完成时和在 dealloc 方法中使计时器无效。

如果您将完成日期和开始日期保存在代码中的其他位置。然后您可以重新创建具有相同状态的视图，即使它已被释放。这意味着用户不需要打开该视图 1 小时。例如。他/她在 30 分钟后关闭和打开。

# python - 如何自动生成 numpy dtype？

> ID：12087127
> 
> 赞同：0
> 
> 时间：2012-08-23T07:55:38.580
> 
> 标签：python, numpy

我有多个数组，数组名称为

```
 Level1
   Level2
   Level3
   .
   . 
```

等等。每个数组有 4 列和任意数量的行。列名的形式为

```
 AP%i BP%i AS%i BS%i 
```

其中`%i` 对应于数组名称中的相应索引（例如`Level1 -> AP01 BP01 AS01 BS01`）。如何创建具有正确列名的此类数组的 dtype，其中列名是变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:16:31.103

您可以使用这样的东西来动态生成所需的 dtypes：

```
for i in xrange(1, N+1): # N is number of arrays
    arr = globals()['Level%i' % i] # this gets the Level<X> value for each i
    arr.dtype = [('AP%02i' % i,float), ('BP%02i' % i, float), ('AS%02i' % i, float), ('BS%02i' % i, float)]
# example
print Level1[0]['AP01'] 
```

请记住根据您实际拥有的数据类型调整 dtype 中的类型。

# solr - 在solr4.0中获取分面后的总计数

> ID：12087137
> 
> 赞同：0
> 
> 时间：2012-08-23T07:56:45.587
> 
> 标签：solr, facet

我正在使用`solr 4.0`并有以下查询：

`http://localhost:8987/solr/select/?q=priority%3A*&version=2.2&start=0&rows=0&indent=on&facet=on&facet.field=priority&facet.mincount=1`

这将返回以下内容：

`<lst name="priority"> <int name="67JP 0041952">1</int> <int name="67SU 1140793">1</int> <int name="69SU 1328511">1</int> <int name="AU 2007 242957">2</int> <int name="AU 2008 201480">1</int> <int name="CN 1993 103001">3</int> <int name="CN 1997 106616">1</int> </lst>`

该字段`priority`是多值的。现在我想要实现的是从分面后返回的结果中获取总计数，即 10。有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:40:46.387

要获得你需要检查的方面的总数[SOLR-2242](https://issues.apache.org/jira/browse/SOLR-2242)
修复版本是 Solr 4.0，所以这应该在当前版本中可用。

# php - 由 PHP-SDK 提供支持的 PHP 类中的 Facebook 登录/注销/检查用户

> ID：12087138
> 
> 赞同：0
> 
> 时间：2012-08-23T07:56:48.060
> 
> 标签：php, facebook, oauth, authorization, facebook-php-sdk

我有 PHP-Class 可以使用 Facebook API：

```
class Social {
   private $name;
   private $context;
   private $tocken;

   public function check(){
     $this->tocken = $this->context->getAccessToken(); // get current tocken
     if (isset($_SESSION['fb_tocken']) AND !empty($_SESSION['fb_tocken'])){
        // session tocken not null
        if ($_SESSION['fb_tocken'] == $this->tocken){
           // session tocken = current tocken
           // update last active
           return true;
        } elseif ($this->tocken == APPLICATION_TOCKEN) {
          // current tocken == default tocken
          $this->logout();
        } else {
          // current tocken <> default tocken
          $this->logout();
        }
     } else {
        // session tocken is null
        if ($this->tocken == APPLICATION_TOCKEN){
          // current tocken is default
          return false;
        } else {
          // current tocken is not default
          if ($this->getUserInfo()){
             // user registered - login action
             if ($this->login())
                return true;
             else
                return false;
          } else {
             // register new user
             if ($this->register()){
                if ($this->login()){
                   return true;
                } else
                   return false;
             } else
                return false;
          }
        }
  }
   }
   // ...
}; 
```

如果用户使用 alogritm：

1 - 登录 facebook 2 - 登录应用程序 3 - 从 facebook 注销 4 - 登录 facebook 5 - 打开应用程序

应用问题：

第五步后，我的应用无法授权用户。但是如果用户按下“刷新”，他就会被授权。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:40:56.040

这是正确的行为 - 但如果没有其余代码（即获取令牌的位），则无法确认。

发生的情况是，当用户注销时，当前令牌（您存储在会话中）变得无效。用户重新登录 Facebook，您需要获取新令牌，这不会自动发生 - 但是当您进行刷新时，我认为您的代码 getAccessToken()（上面未显示）将获取新令牌。

最简单的解决方法是在 Javascript 中添加一个侦听器以进行登录和注销。您可以在[此处找到详细信息，](http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)并且您需要 auth.login 处理程序。触发后，只需刷新页面即可。

还有其他选项使用 Javascript 将新令牌泵入 PHP 侦听器，该侦听器可以在幕后更新您的会话。

# python - 使用 wxPython 自定义窗口框架和窗口外观

> ID：12087140
> 
> 赞同：4
> 
> 时间：2012-08-23T07:56:57.553
> 
> 标签：python, wxpython, wxwidgets

举个简单的例子，游戏管理器 Steam 使用的自定义窗口看起来与操作系统提供的默认窗口不同。随机 Steam 警报中的一个示例：http: [//i.imgur.com/5frzU.png](http://i.imgur.com/5frzU.png)

我想使用具有这种自定义外观的 wxPython 制作一个程序。我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T08:11:56.433

[这](http://hasenj.wordpress.com/2009/04/14/making-a-fancy-window-in-wxpython/)是一个很好的教程，向您展示如何在您自己的定制设计中制作一个窗口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T14:56:49.817

wxPython 在大多数情况下使用运行它的操作系统的本机小部件。因此，它真的不支持主题化。你可以做“halex”提到的黑客，你可以通过使用透明框架和一些花哨的绘图或自定义小部件来做到这一点。否则，您可能想查看不同的工具包。

# c# - 使用套接字 (C#) 进行文件传输 - 接收到的文件不包含完整数据

> ID：12087145
> 
> 赞同：1
> 
> 时间：2012-08-23T07:57:16.203
> 
> 标签：c#, sockets, bytearray

我为使用套接字连接的文件传输创建了一个服务器和一个客户端。我面临的问题是收到的文件，如果它的大小超过 8KB，是不完整的。

如果您遇到此问题，您能否指导我找出我做错了什么（在服务器/客户端）？

以下是这两种方法：

**客户：**

```
#region FILE TRANSFER USING C#.NET SOCKET - CLIENT

class FTClient
{
    public static string curMsg_client = "Idle";
    public static void SendFile(string fileName)
    {
        try
        {
            //IPAddress[] ipAddress = Dns.GetHostAddresses("localhost");
            //IPEndPoint ipEnd = new IPEndPoint(ipAddress[0], 5656);

            string IpAddressString = "192.168.1.102";
            IPEndPoint ipEnd_client = new IPEndPoint(IPAddress.Parse(IpAddressString), 5656);
            Socket clientSock_client = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.IP);

            string filePath = "";

            fileName = fileName.Replace("\\", "/");
            while (fileName.IndexOf("/") > -1)
            {
                filePath += fileName.Substring(0, fileName.IndexOf("/") + 1);
                fileName = fileName.Substring(fileName.IndexOf("/") + 1);
            }

            byte[] fileNameByte = Encoding.UTF8.GetBytes(fileName);
            if (fileNameByte.Length > 5000 * 1024)
            {
                curMsg_client = "File size is more than 5Mb, please try with small file.";
                return;
            }

            curMsg_client = "Buffering ...";
            string fullPath = filePath + fileName;

            byte[] fileData = File.ReadAllBytes(fullPath);
            byte[] clientData = new byte[4 + fileNameByte.Length + fileData.Length];
            byte[] fileNameLen = BitConverter.GetBytes(fileNameByte.Length);

            fileNameLen.CopyTo(clientData, 0);
            fileNameByte.CopyTo(clientData, 4);
            fileData.CopyTo(clientData, 4 + fileNameByte.Length);

            curMsg_client = "Connection to server ...";
            clientSock_client.Connect(ipEnd_client);

            curMsg_client = "File sending...";
            clientSock_client.Send(clientData, 0, clientData.Length, 0);

            curMsg_client = "Disconnecting...";
            clientSock_client.Close();
            curMsg_client = "File [" + fullPath + "] transferred.";

        }
        catch (Exception ex)
        {
            if (ex.Message == "No connection could be made because the target machine actively refused it")
                curMsg_client = "File Sending fail. Because server not running.";
            else
                curMsg_client = "File Sending fail." + ex.Message;
        }

    }
}

#endregion 
```

和**服务器：**

```
#region FILE TRANSFER USING C#.NET SOCKET - SERVER

class FTServer
{
    IPEndPoint ipEnd_server;
    Socket sock_server;
    public FTServer()
    {
        //make IP end point to accept any IP address with port 5656
        //these values will be altered depending on ******* (and/or other ImportSystem)
        //this was initially coded, but threw a SocketException on sock.Bind(ipEnd) {Only one usage of each socket address (protocol/network addres/port) is normally permitted}
        //ipEnd = new IPEndPoint(IPAddress.Any, 5656);
        //
        //I'll set it like this (giving the IP through a string)
        string IpAddressString = "192.168.1.102";
        ipEnd_server = new IPEndPoint(IPAddress.Parse(IpAddressString), 5656);
        //
        //creating new socket object with protocol type and transfer data type
        sock_server = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.IP);
        //bind end point with newly created socket
        sock_server.Bind(ipEnd_server);
    }
    public static string receivedPath = @"C:\Users\Adrian.Constantin\Desktop\Simulare_Forder_Import\";
    public static string curMsg_server = "Stopped!";

    public void StartServer()
    {
        try
        {
            curMsg_server = "Starting...";

            sock_server.Listen(100);

            curMsg_server = "Running and waiting to receive file.";

            Socket clientSock = sock_server.Accept();

            byte[] clientData = new byte[512000];

            int receivedBytesLen = clientSock.Receive(clientData, SocketFlags.None);
            clientSock.ReceiveBufferSize = 8192;

            curMsg_server = "Receiving data...";

            int fileNameLen = BitConverter.ToInt32(clientData, 0);
            string fileName = Encoding.UTF8.GetString(clientData, 4, fileNameLen);

            BinaryWriter bWrite = new BinaryWriter(File.Open(receivedPath + "/" + fileName, FileMode.OpenOrCreate)); ;
            bWrite.Write(clientData, 4 + fileNameLen, receivedBytesLen - 4 - fileNameLen);

            curMsg_server = "Saving file...";
            bWrite.Close();

            clientSock.Close();
            curMsg_server = "Received and Archived file [" + fileName + "]; Server stopped.";

        }
        catch (SocketException ex)
        {
            curMsg_server = "File Receving error.";
            MessageBox.Show(String.Format("{0} Error cide: {1}", ex.Message, ex.ErrorCode));
        }
    }

}

#endregion 
```

编辑：24.08.2012（我已经设法找出问题并让服务器正常工作）服务器的完整代码是： **服务器：**

```
#region FILE TRANSFER USING C#.NET SOCKET - SERVER

class FTServer
{
    IPEndPoint ipEnd_server;
    Socket sock_server;
    public FTServer()
    {
        string IpAddressString = "192.168.1.102";
        ipEnd_server = new IPEndPoint(IPAddress.Parse(IpAddressString), 5656);
        sock_server = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.IP);
        sock_server.Bind(ipEnd_server);
    }
    public static string receivedPath = @"C:\";
    public static string curMsg_server = "Stopped!";

    public void StartServer()
    {
        try
        {
            curMsg_server = "Starting...";

            sock_server.Listen(100);

            curMsg_server = "Running and waiting to receive file.";

            Socket clientSock = sock_server.Accept();
            clientSock.ReceiveBufferSize = 16384;

            byte[] clientData = new byte[1024 * 50000];

            int receivedBytesLen = clientSock.Receive(clientData, clientData.Length, 0);
            curMsg_server = "Receiving data...";

            int fileNameLen = BitConverter.ToInt32(clientData, 0);
            string fileName = Encoding.UTF8.GetString(clientData, 4, fileNameLen);

            BinaryWriter bWrite = new BinaryWriter(File.Open(receivedPath + fileName, FileMode.Append));
            bWrite.Write(clientData, 4 + fileNameLen, receivedBytesLen - 4 - fileNameLen);

            while (receivedBytesLen > 0)
            {
                receivedBytesLen = clientSock.Receive(clientData, clientData.Length, 0);
                if (receivedBytesLen == 0)
                {
                    bWrite.Close();
                }
                else
                {
                    bWrite.Write(clientData, 0, receivedBytesLen);
                                        }
            }

            curMsg_server = "Saving file...";
            bWrite.Close();

            clientSock.Close();
            curMsg_server = "Received and Archived file [" + fileName + "] (" + (receivedBytesLen - 4 - fileNameLen) + " bytes received); Server stopped.";

        }
        catch (SocketException ex)
        {
            curMsg_server = "File Receving error.";
            MessageBox.Show(String.Format("{0} Error code: {1}", ex.Message, ex.ErrorCode));
        }
    }

}

#endregion 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T08:07:40.910

你陷入了套接字使用最经典的陷阱。这与伯克利开发的套接字的想法一样古老。

你看，你还没有阅读文档:)

例如，请参阅[http://msdn.microsoft.com/en-us/library/ms145160.aspx](http://msdn.microsoft.com/en-us/library/ms145160.aspx) - 返回值是什么？

Send 和 Receive 方法都没有义务实际发送/接收您提供的所有数据。这就是为什么它们都返回一个“int”来描述实际发送/接收了多少。之所以采用这种设计，是因为系统的内部缓冲区有限。如果您提供要发送的 999GB 数组，那么您的网卡在实际发送之前将如何存储它？

您会看到 8KB 阈值的行为，可能是因为这是内部缓冲区的大小，或者可能是 TCP 网络数据包的最大大小。我不记得它们有多大，但大约是这样。

要发送和接收您的数据，您必须使用某种循环，例如，以简单的形式：

```
int bytesToBeSent = arr.Length;
int bytesActuallySent = 0;
while(bytesActuallySent < bytesToBeSent)
    bytesActuallySent += socket.Send(arr, bytesActuallySent, bytesToSend - bytesActuallySent, ....); 
```

和 recv - 同样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T08:07:21.433

来自[MSDN](http://msdn.microsoft.com/en-us/library/26f591ax.aspx)：

> Receive 方法将读取尽可能多的可用数据，最多为 size 参数指定的字节数

它**不***保证一口气阅读所有内容；它读取它可以*达到*的最大值（在您的情况下是缓冲区的大小）。从**任何**流中读取时，通常需要有一个读取/接收循环。在您的情况下，我会说缓冲区非常大，您应该手动读取长度字节，然后在一个**小**缓冲区（例如 4096 字节）上进行读取/接收循环以进行文件处理。您不需要 512k 缓冲区。

一个经典的读/接收循环是：

```
int read;
byte[] buffer = new byte[4096];
while((read = socket.Receive(buffer)) > 0) {
    output.Write(buffer, 0, read);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-13T06:39:53.483

您需要在每个发送方法之前延迟大约 200 毫秒，因为您的接收缓冲区被传入数据覆盖。例子：

```
Thread.Sleep(200);
socket.send(sendbuffer); 
```

# java - SQLite LIKE 语句和转义字符

> ID：12087146
> 
> 赞同：0
> 
> 时间：2012-08-23T07:57:23.697
> 
> 标签：java, android, sqlite, sql-like

我需要删除密钥包含某个字符串的数据库条目。

转义前的 SearchString：

```
EntityCollection(Id='INST_PAT_ID%200100010050057716') 
```

转义代码：

```
logger.debug("wildCard: " + wildCard);
String escapedString = wildCard.replace("%", "\\%");
String escapedString2 = escapedString.replace("'", "\\'");
String escapedString3 = escapedString2.replace("_", "\\_");
logger.debug("escapedString3: " + escapedString3); 
```

转义后的 SearchString：

```
EntityCollection(Id=\''INST\_PAT\_ID\%200100010050057716\'')%'' {escape '\'}' in key. 
```

SQL 语句如下所示。

```
final String where = "key LIKE ?";
final String[] args = new String[] { DatabaseUtils.sqlEscapeString("'%" + escapedString3 + "%'" + " {escape '\\'}") };
int success = database.delete(CacheDatabaseHelper.DATABASE_TABLE, where, args);

logger.debug("Delete attempt affected " + success + " lines!");
logger.debug("Deleted all cache entries from database containing: " + args[0] + " in key."); 
```

但是我无法让它工作，因为它会生成错误的 SQL 语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:14:10.950

由于您`?`在查询中使用，它是参数化的。您没有使用连接（似乎），因此您不必担心转义字符。只需使用原始字符串。但是，由于 中没有`%`字符，因此`where`您的查询相当于使用`=`。

# php - 多个 WHERE AND 查询 - Mysql / PHP

> ID：12087152
> 
> 赞同：1
> 
> 时间：2012-08-23T07:57:46.350
> 
> 标签：php, mysql

试图将一个查询的结果放入`WHERE`另一个查询的语句中：

```
$query1 = "SELECT DISTINCT company_id FROM location WHERE state = 'XX'";
$result1 = mysql_query($query1) or die(mysql_error());
while($row1 = mysql_fetch_array($result1)) {
    //Collect WHERE STATEMENT HERE
} 
```

我尝试了以下方法：

```
$q1 = "SELECT company FROM company WHERE id = '16', id = '7' ORDER BY company";
$q1 = "SELECT company FROM company WHERE id = '16' AND id = '7' ORDER BY company";
$q1 = "SELECT company FROM company WHERE id = '16' && id = '7' ORDER BY company"; 
```

连同其他变体

`WHERE AND`如果使用不同的表名，谷歌搜索只提供了多个，但不一样。有人有任何指示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:01:23.323

你也可以使用`IN`：

```
$x = array('16', '7');

$q1 = "SELECT company FROM company WHERE id IN(". implode(',', $x) .") ORDER BY company"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:12:37.487

对于通用代码：

```
$ids = array (
[0] => 2
[1] => 4
[2] => 19
[3] => 16
);  

$ids = join(',',$ids);  
$sql = "SELECT * FROM company WHERE id IN ($ids)"; 
```

参考：[同样的例子](https://stackoverflow.com/questions/907806/php-mysql-using-an-array-in-where-clause)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T07:59:36.090

采用`OR`

```
$q1 = "SELECT company FROM company WHERE (id = '16' OR id = '7') ORDER BY company"; 
```

# java - Spring 3.1 Validation-当您有 2 个单独的模型用于表单提交和持久性时如何使用 @valid

> ID：12087160
> 
> 赞同：0
> 
> 时间：2012-08-23T07:58:07.023
> 
> 标签：java, spring, validation, spring-mvc, bean-validation

我有两个单独的模型`AccountDetailsForm`和`AccountDetails`，前者用于表单提交，后者用于持久性。

AccountDetailsForm:

```
public class AccountDetailsForm {

    private AccountDetails accountDetails;

    @NotNull
    private String confirmPassword;

    //setter and getters
} 
```

和帐户详细信息：

```
@Entity
@Table(name = "ACCOUNT")
public class AccountDetails {

    @Id
    @Column(name = "USER_NAME")
    @NotEmpty
    @Max(value = 60)
    private String userName;

    @Column(name = "PASSWORD")
    @NotEmpty
    @Min(value = 8)
    private String password;

   //setters and getters
} 
```

现在我正在使用以下方法验证提交的表单`@Valid`：

```
@RequestMapping(value="userRegistration", method = RequestMethod.POST)
public ModelAndView registerUser(@Valid AccountDetailsForm accountDetailsForm, BindingResult result,Model model){

    //I autowire localValidatorFactoryBean to validate the fields in AccountDetails bean.
    localValidatorFactoryBean.validate(accountDetailsForm.getAccountDetails(), result);

    if (result.hasErrors()){
        model.addAttribute("accountDetailsForm", new AccountDetailsForm());
        model.addAllAttributes(result.getModel());
        return new ModelAndView("userRegistration");
    } 
```

我正在使用休眠进行持久化。`@Valid`有没有办法使用而不是显式调用`validate()`方法或使用 spring 验证器实现来验证 accountDetails bean ？

我不介意听到有关`confirmPassword`解决方法的建议。`confirmPassoword`我正在遵循当前的方法，因为在模型中有一个字段没有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:05:05.560

放入对象：`@Valid`_`AccountDetails``AccountDetailsForm`

```
public class AccountDetailsForm {

    @Valid
    private AccountDetails accountDetails;

    @NotNull
    private String confirmPassword;

        //setter and getters
} 
```

当在你的控制器中被`AccountDetailsForm`验证时，也将被验证。`@Valid``AccountDetails`

参考例子[在这里](http://docs.jboss.org/hibernate/validator/4.1/reference/en-US/html/validator-usingvalidator.html#d0e410)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:57:29.663

查看注释内的组字段：您可以指定要应用的依赖类。这里可能是这样的：

```
@Valid(groups=AccountDetails.class) 
```

使用 maven，我目前在 Spring MVC 3.1 项目中使用这些版本的库：

```
springframework 3.1.2.RELEASE
javax.validation 1.0.0.GA
hibernate-validator-annotation-processor 4.1.0.Final 
```

# php - 如何将分号分隔的字符串放入数组中？

> ID：12087161
> 
> 赞同：2
> 
> 时间：2012-08-23T07:58:08.923
> 
> 标签：php, csv, explode

好吧，我只是想知道如何将这个分号分隔的字符串放入数组中

```
one,two,three; four,five,six; if( i < x { "seven,eight"; } if( x < i ) { nine; } 
```

我需要的结果是

```
[0] => one,two,three
[1] => four,five,six
[2] => if( i < x { "seven,eight"; } if( x < i ) { nine; } 
```

我知道如何分解这些分离的值，但我陷入了困境

```
if( i < x { "seven,eight"; } if( x < i ) { nine; } 
```

原始数据是这个

```
bonus2 bAddRace,RC_DemiHuman,80; bonus2 bIgnoreDefRate,RC_DemiHuman,30; if(getrefine()>=6) { bonus2 bAddRace,RC_DemiHuman,40; } if(getrefine()>=9) {  autobonus2 "{ bonus bShortWeaponDamageReturn,20; bonus bMagicDamageReturn,20; }",200,1000,BF_WEAPON,"{ specialeffect2 EF_REFLECTSHIELD; }"; } 
```

到目前为止我尝试过的代码是这样的

```
function build_item_script_options( $data = array() )
{
    $html = "";
    $bonus_txt = "";
    $bonus_opts = "";
    $bonus_opts_array = array();

    $script = explode( ";", $data['script'] );
    for( $i = 0; $i <= count( $script ) - 1; $i++ )
    {
        if( strtolower( substr( $script[$i], 0, 5 ) ) == 'bonus' )
        {
            $bonus = explode( ',', $script[$i] );
            for( $k = 1; $k <= $bonus[$i] - 1; $k++ )
            {
                array_push( $bonus_opts_array, $bonus[$i][$k] );
            }
            $bonus_txt = $bonus[0];
            $bonus_opts = implode( ',', $bonus_opts_array );
        }
        else
        {
            $bonus_txt = $script[$i];
        }

        $html .= "<option opts=\"" . $bonus_opts . "\" value=\"" . $bonus_txt . "\" selected=selected>" . $bonus_txt . "</option>";
    }

    return $html;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:06:04.510

这是你需要的吗？

```
$str = 'one,two,three; four,five,six; if( i < x { "seven,eight"; } if( x < i ) { nine; }';
$str = explode("; ", $str, 3);
print_r($str); 
```

例子：

> [http://codepad.org/fqKMTUcp](http://codepad.org/fqKMTUcp)

****编辑****

你也可以试试这个：

```
$open_brackets = '0';
$string = '';
$str = 'one,two,three; four,five,six; if( i < x { "seven,eight"; } if( x < i ) { nine; }';
$split = str_split($str);
foreach($split as $bracket){
$string .= $bracket;
if($open_brackets == '0' && $bracket == ';'){
$string = substr_replace($string, "*", -1);
}
if($bracket == '{'){
$open_brackets++;
}
if($bracket == '}'){
$open_brackets--;
}
}
$string = explode('* ', $string);
print_r($string); 
```

例子：

> [http://codepad.org/uO9sGnDz](http://codepad.org/uO9sGnDz)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:06:46.587

你不能通过简单地爆炸来做到这一点`;`- 你想做的事情看起来很像解析语言，为此你需要一个具有智能的实际语言解析器，因此它可以决定是否`;`属于第一级或在其他不需要爆炸的函数中。

例如，您可以计算您在沿着字符串移动时遇到的括号的数量，并且只有`;`在没有括号打开时才发生爆炸。

一些伪代码：

```
function explode_context_sensitive(string str) {
    int open_brackets = 0, last_semicolon = 0;
    string[] result = new string[];
    for (int idx = 0; idx < strlen(str); idx++) {
        if (str[idx] == ";" && open_brackets == 0) {
            result[] = substr(str, last_semicolon, idx);
            last_semicolon = idx;
        }
        else if (str[idx] == "(")
            ++open_brackets;
        else if (str[idx] == ")")
            --open_brackets;
    }
    return result;
} 
```

您需要扩展这种方法以满足您的需求，可能计算不同类型的括号或处理不适合的括号......

简而言之：如果你想做到这一点，你需要做很多工作。如果您不想重新创建语言的整个语法，则上下文相关的语言解析非常困难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T08:08:42.327

使用 * 或其他一些特殊字符而不是分号，因为有时它可能会发生冲突，因为 php 识别为语句中断。试试这个 ：

```
$value = explode('*',$arr); 
```

现在您可以通过 $value[0],$value[1] 等访问您的数组（arr）值。您还必须在 implode 时使用：

```
$arr = implode('*',my,name,is,this); 
```

这将产生 my*name*is*this。您可以使用顶部的 explode 来简单地破坏它。快乐编码！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-23T08:01:11.100

```
[2] => ( i < x ) ? "seven,eight":  "nine"; 
```

这是你想要的？

# python - python中数组的轮廓3D

> ID：12087162
> 
> 赞同：0
> 
> 时间：2012-08-23T07:58:09.290
> 
> 标签：python, matplotlib

在 python 中，使用命令绘制 2D 数组的 2D 轮廓非常简单`contour`。

```
 img=ones((4,4))
      contour(img) 
```

我想知道如果我有 3D 数组，是否存在类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:03:11.267

查看`Axes3D`模块，您还可以在其中找到[轮廓](http://matplotlib.sourceforge.net/mpl_toolkits/mplot3d/tutorial.html#mpl_toolkits.mplot3d.Axes3D.contour)函数。

从文档：

> Axes3D.contour(X, Y, Z, *args, **kwargs)
> 
> 创建 3D 等高线图。

![在此处输入图像描述](../Images/e665fb5af709a368495e3976dfd376cd.png)

# jquery - 内容应在 html 页面中从页眉填充到页脚

> ID：12087163
> 
> 赞同：2
> 
> 时间：2012-08-23T07:58:13.050
> 
> 标签：jquery, html, jquery-mobile

我正在使用 jquery 手机。我创建了一个非常简单的页面，其中有一个固定的页眉和页脚。我在那个页面上只有两个按钮。因为页脚固定在底部，所以页面的一半是银色（data-theme=c），一半是灰色（底部页面）。

无论我想在一页上放置多少内容，我都希望我的整个页面从页眉到页脚都是银色（根据指定的主题）。是否可以？

```
<div data-role="page" data-theme="b" id="ui-page-start" class="ui-page-active">
    <div data-role="header" data-theme="b" data-backbtn="false">
        </div>

    <div data-role="content" class="ui-content" role="main" style="text-align: center;"data-theme="c"> 
    <br/>
    <div>
        <input type='text' id='jid' placeholder="JID" data-mini="true" value='sobha@ns382290.ovh.net' style="border-radius: 10px;">

        <input type='password' data-mini="true" id='password' placeholder="Password"style="border-radius: 10px;">
        </div>                  

    </div>
    <div data-role="footer" data-position="fixed" class="ui-bar-a fade " role="contentinfo" style=": 212px; ">
        </div>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:26:52.013

我这样做是使用 CSS 从`data-role="content"`div 中删除背景，并将其应用到`data-role="page"`div。这是一个展示它的jsbin：

[http://jsbin.com/ijeqiy/2/](http://jsbin.com/ijeqiy/2/)

您可以使用`.ui-body-`该类来定位单个主题。例如，在您的代码中，您在页面 div 上使用了主题 b，因此您可以像这样覆盖它：

```
.ui-body-b {    
    background: #F9F9F9; /* the background color you want */
}

.ui-content {
    background: none; /* remove the background color from the content because it's not long enough */
} 
```

# android - ShareActionProvider 不可点击且在首次渲染时无法正确渲染

> ID：12087164
> 
> 赞同：10
> 
> 时间：2012-08-23T07:58:14.180
> 
> 标签：android, android-actionbar, shareactionprovider

我的 ActionBar 中有一个 ShareActionProvider 和其他一些选项。然而，ShareActionProvider 似乎在首次以纵向模式渲染时无法正确渲染，并且在第一次渲染时无法点击。方向更改会重新渲染屏幕，然后所有应该可见的选项都可见，并且当向后旋转时，ActionBar 会再次重新渲染，但这次它也可以在纵向模式下正确渲染。

我附上了一张描述这种情况的图片：

1.  共享选项没有正确呈现，它旁边应该有一个图标，如果它不适合布局，它应该变成一个 3 点菜单。

2.  定向后，所有选项都按预期可见。

3.  旋转回纵向会重新渲染 ActionBar，现在 3 点菜单按原样显示，并且可以单击。

关于这里发生了什么的任何想法？

![动作栏说明](../Images/8045b91b2b833d3f507dbd825bc93632.png)

这是我的 XML：

```
 <?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/item_delete"
        android:icon="@android:drawable/ic_menu_delete"
        android:showAsAction="ifRoom|withText"
        android:title="Delete"
        android:visible="false"/>
    <item
        android:id="@+id/item_edit"
        android:icon="@android:drawable/ic_menu_edit"
        android:showAsAction="ifRoom|withText"
        android:title="Edit"
        android:visible="false"/>
    <item
        android:id="@+id/item_share"
        android:actionProviderClass="android.widget.ShareActionProvider"
        android:showAsAction="ifRoom|withText"
        android:title="Share"
        android:visible="false"/>
    <item
        android:id="@+id/item_save"
        android:icon="@android:drawable/ic_menu_save"
        android:showAsAction="ifRoom|withText"
        android:title="Save"
        android:visible="false"/>
    <item
        android:id="@+id/menu_search"
        android:actionViewClass="android.widget.SearchView"
        android:icon="@android:drawable/ic_menu_search"
        android:showAsAction="ifRoom"
        android:title="@string/menu_search"
        android:visible="false"/>

</menu> 
```

这就是我处理片段中的选项菜单的方式：

```
 /**
 * Hook into the OptionsMenu and add an Edit, Delete and Share option.
 */
@Override
public void onPrepareOptionsMenu(Menu menu) {
    MenuItem deleteItem = menu.findItem(R.id.item_delete);
    deleteItem.setVisible(true);

    MenuItem editItem = menu.findItem(R.id.item_edit);
    editItem.setVisible(true);

    MenuItem shareItem = menu.findItem(R.id.item_share);
    shareItem.setVisible(true);
    shareActionProvider = (ShareActionProvider) shareItem.getActionProvider();
    shareActionProvider.setShareIntent(getShareIntent());

    super.onPrepareOptionsMenu(menu);
}

/**
 * Builds an intent that takes the path for the image and passes it to 
 * the sharing mechanism as a stream built on the URI of the image path.
 * @return the intent to share the image as a stream
 */
private Intent getShareIntent()
{
    Intent shareIntent = new Intent();
    shareIntent.setAction(Intent.ACTION_SEND);
    shareIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("file://" + receipt.getPhoto()));
    shareIntent.setType("image/jpeg");
    return shareIntent;
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-05-14T21:42:01.883

`ShareActionPRovider`那是因为你必须在你膨胀菜单之后在右边添加一个意图，在`onCreateOptionsMenu`.

如果您仅在 中执行此操作，`onPrepareOptionsMenu`则必须手动调用`invalidateOptionsMenu()`以触发 ActionBar 更新（正如所选答案告诉您的那样）。但这不是这样做的方法。

当配置更改时它工作正常，因为`onPrepareOptionsMenu()`被调用，然后你的共享按钮将工作，因为它现在有一个 Intent。

要解决这个问题，只需执行以下操作：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {

    getSupportMenuInflater().inflate(R.menu.YOUR_MENU_XML, menu);

    ShareActionProvider provider = (ShareActionProvider) menu.findItem(R.id.menu_share).getActionProvider();

    if (provider != null) {
        Intent shareIntent = new Intent();
        shareIntent.setAction(Intent.ACTION_SEND);
        shareIntent.putExtra(Intent.EXTRA_TEXT, YOUR_TEXT);
        shareIntent.setType("text/plain");
        provider.setShareIntent(shareIntent);
    }

    return true;
} 
```

这样，`ShareActionProvider`将有一个`Intent`从一开始，并将按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:32:25.897

因此，似乎在 Fragment 的*onCreateView中调用“* **getActivity().invalidateOptionsMenu()** ”会使菜单按应有的方式重新渲染。虽然它应该在第一次运行时正确呈现，但在不更改菜单的情况下使菜单无效并不是一个合适的解决方案。

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T03:57:44.743

它看起来像平台错误。您可以查看此[http://code.google.com/p/android/issues/detail?id=25467](http://code.google.com/p/android/issues/detail?id=25467)了解更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T22:04:23.607

我不认为这是一个错误。因为你的头衔变了。它最初更短（“Details”而不是“ReceiptDetail”），因此系统一定认为有更多空间来显示更多操作项。

ShareActionProvider 的宽度也是动态的（最多可以是正常宽度的 2 倍以上）。

为了测试一两件事，我建议您将共享操作项移到第一个位置，删除您的临时解决方法，看看它是否仍然存在。您还可以删除共享操作项并使用 3 个或更多常规操作项作为测试。*

# ruby-on-rails - 如何在从其中的下拉列表中执行选择时预先填充表单（ajax 方式），Ruby on Rails？

> ID：12087168
> 
> 赞同：0
> 
> 时间：2012-08-23T07:58:27.027
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, forms

这是我目前的 _form.html.erb 部分，但我希望根据我所做的第一个（区域）下拉选择来更新它的元素：

```
<%= form_for(@setting) do |f| %>
  <div class="form">

     <div class="fieldBlock">
    <%= f.label :region%>
       <%= f.select :region_id, options_from_collection_for_select(Region.all, 'id',  'region_code'), 
:onChange => remote_function(:update => ":mobile, :telephone", :method => "get", :url => { :controller => :Settings, :action => :form_update, :id => :region_id}) %>
   </div>

<div class="fieldBlock">
<%= f.label :city_id, "City" %>
   <%= f.select :city_id, options_from_collection_for_select(City.all, 'id', 'name'), :prompt => 'select a city' %>
</div>

<div class="fieldBlock">
<%= f.label :mobile, "Mobile" %> <%= f.text_field :mobile%></div>

<div class="fieldBlock">
<%= f.label :telephone, "Telephone No"  %> <%= f.text_field :telephone %></div>

<div class="fieldBlock">
<% f.submit "Update Contact" %>

At present this is the controller method that helps in prepopulating:

def index
 setting = Setting.find_by_user_id(current_user.id)

 if setting.blank?
   @setting = City.first.dup

else
   @setting = setting
end 
```

结尾

如何在选择区域下拉列表值时以 ajax 方式更新表单？

现在，这是我的 form_update 操作：

```
 def form_update(id)
 setting = Setting.find_by_region_id(id)

   respond_to do |format|
     if setting.blank?
        @setting = Setting.first.dup
        format.json {@setting}
      else
        @setting = setting
        format.json {@setting}
      end
  end 
```

结尾

我还必须使用 Prototype-Rails 来使 remote_function 工作。我的字段仍然没有更新，我在这里缺少什么..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:18:39.560

You need to use `OnChange` option of `select` tag

This should help [ [How to add an onchange event to select tag in rails](https://stackoverflow.com/questions/979400/how-to-add-onchange-event-to-select-tag-in-rails) ]

A better explanation of using `:onChange` option of `select_tag` is here [ [http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/select#51-Demo-select-onchange-invoke-an-ajax-](http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/select#51-Demo-select-onchange-invoke-an-ajax-) ]

**Edit:**

**Explanation:** When you will select any option of your dropdown, the action provided in `OnChange` will be executed. Now you can make a ajax call to your server to get the values that you want to update your fields with. To do that you need `remote_function` ( described below).

Considering your example the following snippet should work

```
<%= form_for(@setting) do |f| %>
    <div class="form">
        <div class="fieldBlock">
        <%= f.label :region%>
        <%= f.select :region_id, options_from_collection_for_select(Region.all, 'id',  'region_code'), 
             :onchange => remote_function( ... ... ...) %>
    </div>
<% end %> 
```

Above I have shown only the dropdown part of your form. Note the `:onchange` option here. This should contain a `remote_function` which will be like following

```
:onchange => remote_function(:update => "message_id",
                             :method => "put",
                             :with => "'item=' + value",  
                             :url => { :controller => :orders, :action => :set_customer_id, :id => order.id})) 
```

Here:

`:update`: is the HTML node whose contain will be updated. So put all your `:city_id`, `:mobile`, `:telephone` fields in a HTML node with unique id that you will use here.
`:method`: just use as defined in your route. May be GET.
`:with`: Some extra attributes to supply with the request.
`:url`: The URL where you have to request.

If this still doesnt help, please share how you are trying. May be a small fix can solve the problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:05:21.770

如果您使用带有 jquery 的 rails，您可以尝试以下
[http://samuelmullen.com/2011/02/dynamic-dropdowns-with-rails-jquery-and-ajax/](http://samuelmullen.com/2011/02/dynamic-dropdowns-with-rails-jquery-and-ajax/)

虽然我自己没有尝试过，但听起来很有趣。

# php - 如何在 PHP 中获取文件的真实路径，但没有以下链接？

> ID：12087174
> 
> 赞同：1
> 
> 时间：2012-08-23T07:58:54.213
> 
> 标签：php

PHP 有一个很好的`realpath()`函数，可以将类似的东西转换`/dir1/dir2/../dir3/filename`为`/dir1/dir3/filename`. 这个函数的“问题”是，如果`/dir1/dir3/filename`不是一个实际文件，而只是一个到另一个文件的链接，PHP 会跟随那个链接并返回实际文件的真实路径。

但是，我实际上需要获取链接本身的真实路径。我所需要的只是解决`/dir/..`路径中的复杂性。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:14:23.027

为您的要求编写了一个函数。

```
function realpath_no_follow_link($str) {
  if (is_link($str)) {
    $pathinfo = pathinfo($str);
    return realpath_no_follow_link($pathinfo['dirname']) . '/' .$pathinfo['basename'];
  }
  return realpath($str);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T00:14:43.420

我希望找到一个现有的 PHP 函数来执行此操作，或者按照 xdazz 的答案进行一些简单的操作（但这实际上会按照我想要的方式工作）。由于找不到这样的答案，我编写了自己的脏函数。我很高兴听到您的意见和改进建议！

```
// return the contracted path (e.g. '/dir1/dir2/../dir3/filename' => '/dir1/dir3/filename')
// $path: an absolute or relative path
// $rel: the base $path is given relatively to - if $path is a relative path; NULL would take the current working directory as base
// return: the contracted path, or FALSE if $path is invalid
function contract_path($path, $rel = NULL) {
  if($path == '') return FALSE;
  if($path == '/') return '/';
  if($path[strlen($path) - 1] == '/') $path = substr($path, 0, strlen($path) - 1); // strip trailing slash
  if($path[0] != '/') { // if $path is a relative path
    if(is_null($rel)) $rel = getcwd();
    if($rel[strlen($rel) - 1] != '/') $rel .= '/';
    $path = $rel . $path;
  }
  $comps = explode('/', substr($path, 1)); // strip initial slash and extract path components
  $res = Array();
  foreach($comps as $comp) {
    if($comp == '') return FALSE; // double slash - invalid path
    if($comp == '..') {
      if(count($res) == 0) return FALSE; // parent directory of root - invalid path
      array_pop($res);
    }
    elseif($comp != '.') $res[] = $comp;
  }
  return '/' . implode('/', $res);
} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-23T08:03:05.293

你可以试试 abspath() 函数。

# iphone - MKAnnotationView 不显示标题

> ID：12087181
> 
> 赞同：2
> 
> 时间：2012-08-23T07:59:33.187
> 
> 标签：iphone, xcode, mkmapview, mkannotationview, callouts

我正在`MKAnnotationView`使用以下代码为两个设置标题：

```
-(MKAnnotationView *)mapView:(MKMapView *)mV viewForAnnotation:
(id <MKAnnotation>)annotation 
{

if(([annotation isKindOfClass:[Test_flag class]])) 
{

    MKAnnotationView *pinView = nil; 

    if(annotation != mapView.userLocation) 
    {
        static NSString *defaultPinID = @"PinId1";
        pinView = (MKAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:defaultPinID];
        if ( pinView == nil ) pinView = [[[MKAnnotationView alloc]
                                          initWithAnnotation:annotation reuseIdentifier:@"pin1"] autorelease];
        pinView.canShowCallout = YES;
        pinView.animatesDrop = YES;
        [pinView setImage:[UIImage imageNamed:@"flg.png"]];
        [pinView setSelected:YES animated:YES];

    } 
    else 
    {
        [mapView.userLocation setTitle:@"I am here"];
    }
    return pinView;
}
else if(([annotation isKindOfClass:[Distance1 class]])) 
{
    MKAnnotationView *pinView = nil; 

    if(annotation != mapView.userLocation) 
    {
        static NSString *defaultPinID = @"PinId4";
        pinView = (MKAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:defaultPinID];
        if ( pinView == nil ) pinView = [[[MKAnnotationView alloc]
                                          initWithAnnotation:annotation reuseIdentifier:@"pin4"] autorelease];

        pinView.canShowCallout = YES;
        [pinView setImage:[UIImage imageNamed:@"Circle_Grey.png"]];
        [pinView setSelected:YES animated:YES];

    } 
    else 
    {
        [mapView.userLocation setTitle:@"I am here"];
    }
    return pinView;
} 
```

当我触摸地图时，两者`MKAnnotationView`都是指向的，但它们不显示标题。是什么原因？请帮我找。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:04:36.443

你错过了在课堂上写`title`方法。`Test_flag`

# javascript - 使用像素火，是否可以让“图像”标头报告回来并允许客户端浏览器通过该图像运行加载 html？

> ID：12087188
> 
> 赞同：0
> 
> 时间：2012-08-23T07:59:50.473
> 
> 标签：javascript, html, .htaccess

是否可以使用像素将 html 加载到客户端浏览器中，并让该浏览器加载 html？

我认为 .htaccess 标头修改可能是可能的，但我需要查看像素火灾的个人来加载 html，并让他们的浏览器读取它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:02:43.953

不，浏览器会期待图像，如果返回 HTML 文档（这对于 404 或阻止访问某些网站的防火墙很常见）然后浏览器将其作为损坏的图像处理，它不会处理 HTML。

# c# - C#查找应用程序的安装目录

> ID：12087189
> 
> 赞同：0
> 
> 时间：2012-08-23T07:59:59.460
> 
> 标签：c#, windows, registry, installation

我构建了一个运行安装文件并在安装完成后自动修补它的应用程序。

我使用这个注册表键**HLKM\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall**但有些应用程序没有这个键。

如何找到安装目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:07:38.030

你可以使用`system`和`application`类。

```
Application.ExecutablePath 
```

例如，您可以获得包含可执行文件的目录的全名，如下所示：

```
string executableName = Application.ExecutablePath;
FileInfo executableFileInfo = new FileInfo(executableName);
string executableDirectoryName = executableFileInfo.DirectoryName; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:08:33.890

如果您使用 VS 安装项目作为安装程序，那么您可以使用[自定义操作](http://msdn.microsoft.com/en-us/library/d9k65z2d%28v=vs.80%29.aspx)作为获取有关安装环境信息的一种方法。

话虽如此，我觉得可能有更好的方法来实现您的目标，并且通过更多信息，我认为我们可以帮助您实现目标。

**编辑**

我想我现在跟着你。如果我这样做，我将首先对我正在打包的每个第 3 方应用程序的默认设置位置进行硬编码。如果用户更改了默认值，将找不到它，因此提示他们输入新路径。请记住，您可以使用[Environment.SpecialFolder](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)来获取 Program Files（或其他系统文件夹）的实际位置，而不是假设 C:\。对于大约 99.9% 的安装和用户而言，此方法无需任何额外的用户交互即可完成。

另一种选择是为那些相反的第 3 方二进制文件创建自己的安装程序。当然你也必须维护更新，但听起来你已经在用你的补丁做类似的事情了。

# ruby-on-rails - 复选框按钮仅在第一次工作

> ID：12087191
> 
> 赞同：0
> 
> 时间：2012-08-23T08:00:05.167
> 
> 标签：ruby-on-rails, coffeescript

我有一个用 gem (ios-checkboxes) 制作的 iphonestyle 复选框按钮。我希望通过此按钮仅显示一些表格行（已完成/未完成的规范），具体取决于按钮状态。如果我第一次按下它，工作正常，之后它停止工作。

这是查看代码。

```
= 'Show completed specifications'
= check_box @specifications, :status_set
%br
%table(id = "specifications")
  %thead
    %tr
      %th Title
      %th Added
      %th
  %tbody
    - @specifications.each do |spec|
      - if spec.status
        %tr{class: "completed"} // here i add a class on the COMPLETED specifications
          %th= spec.title
          %th= spec.created_at.strftime("%d-%m-%y %H:%M")
          %th= link_to "View", project_specification_path(params[:project_id], spec.id)
      - else
        %tr{class: "not_completed"} // NOT COMPLETED specifications
          %th= spec.title
          %th= spec.created_at.strftime("%d-%m-%y %H:%M")
          %th= link_to "View", project_specification_path(params[:project_id], spec.id) 
```

咖啡脚本代码

```
$('.iPhoneCheckContainer').live "click", -> // the checkbox class
  is_completed = @.checked
  if is_completed
    $('.completed').show()
    $('.not_completed').hide()
  else
    $('.completed').hide()
    $('.not_completed').show() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:04:36.833

我怀疑你真正需要做的是：

```
if $(this).is(':checked')
  // Stuff when checked
else
  // stuff when not checked 
```

这可能是检查普通复选框的理想方式。虽然我不确定 ios-checkboxes 生成什么样的标记，所以这可能对你有用，也可能对你不起作用。

编辑：

该`live`方法在 jquery 中已弃用。您应该使用[on](http://api.jquery.com/on/)来绑定事件而不是`bind`or `live`：

```
$('.iPhoneCheckContainer').on "click", ->
  // Event 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:01:05.540

问题在于

```
is_completed = @.checked 
```

看起来 ios-checkboxes gem 不像普通复选框那样工作。

我通过在按钮上添加一个新类来解决问题，该类具有在任何单击事件上在真/假之间切换变量的功能。根据该变量，我显示了已完成/未完成的规格。

# c# - 使用正则表达式检索不带有带点的字母数字的数值

> ID：12087197
> 
> 赞同：1
> 
> 时间：2012-08-23T08:00:28.143
> 
> 标签：c#, regex

嗨，有人可以帮我从单独的字符串中提取数字..假设我的字符串如下

```
AB12(100).HJI(20).D76R(222) 
```

我需要输出如下：

```
 100.20.222(I need to get the digits which are in brackets appended with dot) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:06:46.453

好的。这很简单：

```
var value = @"AB12(100).HJI(20).D76R(222)"; 
MatchCollection matches = Regex.Matches(value, @"(?<=\()(\d+)(?=\))");  
var result = String.Join(matches, ".") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:20:31.773

您还可以使用[此](http://regexr.com?31ts0)替换正则表达式：

```
/[A-Za-z0-9]+\((\d+)\)/$1/g 
```

`C#`代码将是：

```
string input = "AB12(100).HJI(20).D76R(222)";
string pattern = @"[A-Za-z0-9]+\((\d+)\)";
string result = System.Text.RegularExpressions.Regex.Replace(input, pattern, "$1"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T08:26:31.977

只是另一个版本

```
 string text = "AB12(100).HJI(20).D76R(222)";
 MatchCollection match = Regex.Matches(text, @"\(\d+\)"); //(100)(20)(222)
 string[] digits = new string[match.Count];

 for(int i=0; i<digits.Length;i++)
 {
     digits[i] = match[i].Value.Trim(new char[]{'(',')'});
 }
 string output = String.Join(".", digits); //100.20.222 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T08:13:58.920

另一个即兴创作：

```
string input = "AB12(100).HJI(20).D76R(222)";
string output = string.Join(".", Regex.Matches(input, @"\((?<value>\d{1,})\)").OfType<Match>().Select(m => m.Groups["value"].Value)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T08:14:12.853

```
var value = @"AB12(100).HJI(20).D76R(222)"; 
var matches = Regex.Matches(value, @"(?<=\()(\d+)(?=\))");
var result = String.Join(".", matches.OfType<Match>().Select(x => x.Value).ToArray()); 
```

# objective-c - 具有动态显示图像的大量图像视图

> ID：12087203
> 
> 赞同：0
> 
> 时间：2012-08-23T08:00:58.400
> 
> 标签：objective-c, ios

我想做`UIScrollView`很多小的`UIImageView`，我想立即显示空白滚动视图。然后当它准备好时将图像加载到`UIImageViews`. 例如，当我必须从我正在使用的服务器下载某些部分时： `connectionDidFinishLoading`使用`NSURLConnection`但在这里我不想下载在线图像，我在我的应用程序中有它，但不想在`viewDidLoad`. 如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:24:02.043

请参阅[bddynamicgridviewcontroller](http://www.cocoacontrols.com/platforms/ios/controls/bddynamicgridviewcontroller)链接以获取行主导的网格布局中的 UIImageView 列表

另请参阅[SDWebImage](https://github.com/rs/SDWebImage)以延迟加载大量图像

看看[带有下载图像的 UITables – 简单的异步代码](http://www.markj.net/iphone-asynchronous-table-image/)链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:10:30.733

首先，使用[`AQGridView`](https://github.com/AlanQuatermain/AQGridView)- 它类似于`UITableView`但允许每行多列（即照片网格）。如果您下载源代码，它会提供如何将其用于您想要的内容的示例。

至于在下载时显示图像，一种方法是使用[`FLImageView`](https://github.com/anoopr/fully-loaded). 同样，下载源代码并将其添加到您的项目中，然后`UIImageView`在每次`AQGridViewCell`使用`FLImageView`then 调用`loadImageAtURL:placeholderImage:`或`loadImageAtURLString:placeholderImage:`加载图像时使用 a 代替。这还允许您在下载图像时显示标准占位符图像。

像标准一样，只会根据需要创建`UITableView`单元格（即仅在屏幕上或几乎在屏幕上的单元格），并且单元格会被重复使用，因此它会变得又快又好。`AQGridView`

# html - 具有 z-index 的元素内图像的 z-index

> ID：12087206
> 
> 赞同：1
> 
> 时间：2012-08-23T08:01:10.413
> 
> 标签：html, css, z-index

我的图像的 z-index 有问题。我有一个列表，每个列表项都有一个图像。现在我想让列表项中的图像显示在其他列表项上方。

```
<li style="position: relative; z-index:9;">
 <img src="/" />
</li>
<li style="position: relative; z-index:8;">
 <img src="/" style="position: absolute; z-index:999;" />
</li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:05:15.467

`z-index`从父元素继承，所以无论你在 s 上的什么 z-index 都`UL`将被应用到`LI`s 上，因此也应用到`img`s 上。您必须使用位于`LI`要覆盖的图像顶部的另一个元素。

# google-maps-api-3 - Google 地图 api 中的 infoWindow 数组

> ID：12087212
> 
> 赞同：0
> 
> 时间：2012-08-23T08:01:25.590
> 
> 标签：google-maps-api-3, coffeescript

我寻找错误，但找不到。由于某种原因，任何谷歌地图 infoWindow 总是显示相同的信息。

这是一个咖啡脚本代码

```
infowindow = new google.maps.InfoWindow()
for company in companiesData
  marker = new google.maps.Marker({
    position: new google.maps.LatLng(company.latitude, company.longitude)
    map: map
  })

  #debugger ---> each company.name is different!
  google.maps.event.addListener(marker, 'click', ()->
    infowindow.setContent(company.name)
    infowindow.open(map,this)
  ) 
```

我对其进行了调试，发现每个 company.name 都不同。

输出 javascript

```
 infowindow = new google.maps.InfoWindow();
  _results = [];
  for (_j = 0, _len1 = companiesData.length; _j < _len1; _j++) {
    company = companiesData[_j];
    marker = new google.maps.Marker({
      position: new google.maps.LatLng(company.latitude, company.longitude),
      map: map
    });
    _results.push(google.maps.event.addListener(marker, 'click', function() {
      infowindow.setContent( company.name);
      return infowindow.open(map, this);
    }));
  }
  return _results;
}); 
```

那么错误在哪里呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T08:22:06.993

您需要关闭可变公司。您可以通过在单独的函数中创建标记来做到这一点。例如：

```
infowindow = new google.maps.InfoWindow()
for(var n = 0 ; n < n companiesData.length ;n++){
  createMarker(companiesData[n]);
}

function createMarker(data){
  var marker = new google.maps.Marker({
    position: new google.maps.LatLng(parseFloat(data.latitude), parseFloat(data.longitude)),
    map: map
  })

  #debugger ---> each company.name is different!
  google.maps.event.addListener(marker, 'click', function(){
    infowindow.setContent(data.name);
    infowindow.open(map,this);
  }
  )
} 
```

[**解释在这里。**](http://econym.org.uk/gmap/closure.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:26:56.063

我有同样的...尝试在单独的函数中创建标记。它对我有帮助。

看看： [https ://developers.google.com/maps/articles/phpsqlsearch_v3](https://developers.google.com/maps/articles/phpsqlsearch_v3)

使用“searchLocationsNear(center)”函数查找代码。

# facebook - 获取facebook群组的所有成员

> ID：12087214
> 
> 赞同：1
> 
> 时间：2012-08-23T08:01:28.323
> 
> 标签：facebook, facebook-graph-api

有：“所有属于该组成员的用户（目前只能返回前500个成员）。” 在 facebook graph api group 文档中。如果我有超过 500 名成员的群组，我怎样才能获得 facebook 群组的所有成员？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T08:10:11.547

```
{
  "data": [
  ], 
  "paging": {
    "previous": "https://graph.facebook.com/<>/members?limit=5000&offset=0"
  }
} 
```

# wordpress - 如何从 WordPress 中删除现有的重复帖子？

> ID：12087218
> 
> 赞同：2
> 
> 时间：2012-08-23T08:01:50.053
> 
> 标签：wordpress

我的 word-press 中至少有 9000 个帖子，我只想删除之前创建的重复帖子？所以我只想删除那些在我的word-pres中的额外帖子。我试图找出我是否有任何与之相关的插件，但我不能

是否有任何插件或脚本可以帮助我做到这一点？

回复将不胜感激！

感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T09:41:34.960

你可能应该从限制开始[`revisions`](http://codex.wordpress.org/Revision_Management)

```
define('WP_POST_REVISIONS', 10); // paste in wp-config 
```

[http://codex.wordpress.org/Editing_wp-config.php#Post_Revisions](http://codex.wordpress.org/Editing_wp-config.php#Post_Revisions)

我还建议使用以下 SQL 从数据库中删除所有当前修订：

```
DELETE a,b,c FROM `wp_posts` a
LEFT JOIN `wp_term_relationships` b ON (a.ID = b.object_id)
LEFT JOIN `wp_postmeta` c ON (a.ID = c.post_id)
WHERE a.post_type = 'revision'; 
```

之后列出具有相同帖子标题的所有帖子：

```
SELECT * FROM `wp_posts` ORDER BY `wp_posts`.`post_title` DESC 
```

寻找双重职位标题、职位类型等，并注意那里的 ID 如果您有双重 ID 列表。使用此 SQL 删除它们：

```
DELETE a,b,c,d,e FROM `wp_posts` a
LEFT JOIN `wp_term_relationships` b ON (a.ID = b.object_id)
LEFT JOIN `wp_postmeta` c ON (a.ID = c.post_id)
LEFT JOIN `wp_comments` d ON (a.ID = d.comment_post_ID)
LEFT JOIN `wp_commentmeta` e ON (d.ID = e.comment_id)
WHERE a.ID = FOUND_ID; # 1 ID at once 
```

**开始之前做个备份，**
希望对你有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T10:47:37.010

你好，达山可能会对你有所帮助。

[http://blog.xoogie.net/2009/07/14/auto-delete-duplicate-post/](http://blog.xoogie.net/2009/07/14/auto-delete-duplicate-post/)

这个插件用于删除 wordpress 中的重复帖子。

谢谢...

# matlab - 优化这段代码？

> ID：12087221
> 
> 赞同：0
> 
> 时间：2012-08-23T08:02:13.127
> 
> 标签：matlab, io, fopen, printf, textscan

我有一个名为reference的“父”文本文件，它是：

```
VERSION 3.82
CALCULATION 3
OPTIONS 0
PROJNAME 
DATE 
ENGINEER 
NOTES ""
PASSWORD 
MSTART CONSTANTS
RHO 1.225
RHOW 1027
VISCOS .0000182
GRAVITY 9.81
MEND

MSTART WINDND
SPMODEL 7
NLAT 31
NVER 45
LATDIM 150
VERDIM 220
LONGLS 340.2
LATLS 0
VERTLS 0
XLV 113.4
YLV 0
ZLV 0
XLW 27.72
YLW 0
ZLW 0
LAMBDA1 0
CohScale 12
COHDEC 3
SCALE 33.6
GAMMA 3.9
YDIML 0
N2 32
YDIMS 0
K1MIN 3
LENGTH 1830
STEP .2233888
UBAR 3
SEED 12
OUTFILE None
DIAM 0
HUBHT 0
TURBHTTYPE 0
TURBBOTTOM 0
GUSTAVT 0
GUSTSPEED 0
TOLERANCE 0
DLONGMIN 0
DLONGMAX 0
Z0MIN 0
Z0MAX 0
MAXITER 14
MAXSEED 100
NFILES 1
UseWindShear 0
WVMODEL 0
MATCHFILE ''
SPACING 0
SAMPLEFREQ 0
MEANSPEED 0
ILAT 0
IVERT 0
GUSTMETHOD 0
DLONG 0
ILAT 0
IVERT 0
LONGGUST 0
LATGUST 0
VERTGUST 0
iLONGGUST 0
iLATGUST 0
iVERTGUST 0
PEAKINESS 0
MAXFRAN 0
MEND

0CONSTANTS
0WINDND 
```

这个想法是生成一组类似的文件，只更改上述文件的 4 个确定的行（LENGTH，STEP，UBAR，SEED）。

目前我正在使用这段代码：

```
clc
clear all
close all

V = [4 6 8 10 12 14 16 18 20 22 24 26 28 29];

for j = 1:6
f1 = ['D:\01_department\DLC1-2']
if exist(f1,'dir') ~= 7
    mkdir(f1);
end 
fname = [f1 '\' 's0' num2str(j)];
if exist(fname,'dir') ~= 7
    mkdir(fname);
end
 for i = 1:length(V),
filename = [fname '\' num2str(V(i)) '.$PJ'];
 fid = fopen(filename,'w');
 fprintf(fid, 'VERSION 3.82\r\n')
 fprintf(fid, 'CALCULATION 3\r\n')
 fprintf(fid, 'OPTIONS 0\r\n')
 fprintf(fid, 'PROJECTNAME\t\r\n')
 fprintf(fid, 'DATE\t\r\n')
 fprintf(fid, 'ENGINEER\t\r\n')
 fprintf(fid, 'NOTES\t""\r\n')
 fprintf(fid, 'PASSWORD\t\r\n')
 fprintf(fid, 'MSTART CONSTANTS\r\n')
 fprintf(fid, 'RHO 1.225\r\n')
 fprintf(fid, 'RHOW 1027\r\n')
 fprintf(fid, 'VISCOS 0.0000182\r\n')
 fprintf(fid, 'GRAVITY 9.81\r\n')
 fprintf(fid, 'MEND\r\n')
 fprintf(fid, '\r\n')
 fprintf(fid, 'MSTART WINDND\r\n')
 fprintf(fid, 'SPMODEL 7\r\n')
 fprintf(fid, 'NLAT 31\r\n')
 fprintf(fid, 'NVER 45\r\n')
 fprintf(fid, 'LATDIM 150\r\n')
 fprintf(fid, 'VERDIM 220\r\n')
 fprintf(fid, 'LONGLS 340.2\r\n')
 fprintf(fid, 'LATLS 0\r\n')
 fprintf(fid, 'VERTLS 0\r\n')
 fprintf(fid, 'XLV 113.4\r\n')
 fprintf(fid, 'YLV 0\r\n')
 fprintf(fid, 'ZLV 0\r\n')
 fprintf(fid, 'XLW 27.72\r\n')
 fprintf(fid, 'YLW 0\r\n')
 fprintf(fid, 'ZLW 0\r\n')
 fprintf(fid, 'LAMBDA1 0\r\n')
 fprintf(fid, 'CohScale 12\r\n')
 fprintf(fid, 'COHDEC 3\r\n')
 fprintf(fid, 'SCALE 33.6\r\n')
 fprintf(fid, 'GAMMA 3.9\r\n')
 fprintf(fid, 'YDIML 0\r\n')
 fprintf(fid, 'N2 32\r\n')
 fprintf(fid, 'YDIMS 0\r\n')
 fprintf(fid, 'K1MIN 3\r\n')
 fprintf(fid, 'LENGTH %g\r\n', V(i)*610)
 fprintf(fid, 'STEP %g\r\n', V(i)/13.4295)
 fprintf(fid, 'UBAR %g\r\n', V(i))
 fprintf(fid, 'SEED %i\r\n', randi(999,1))
 fprintf(fid, 'OUTFILE None\r\n')
 fprintf(fid, 'DIAM 0\r\n')
 fprintf(fid, 'HUBHT 0\r\n')
 fprintf(fid, 'TURBHTTYPE 0\r\n')
 fprintf(fid, 'TURBBOTTOM 0\r\n')
 fprintf(fid, 'GUSTAVT 0\r\n')
 fprintf(fid, 'GUSTSPEED 0\r\n')
 fprintf(fid, 'TOLERANCE 0\r\n')
 fprintf(fid, 'DLONGMIN 0\r\n')
 fprintf(fid, 'DLONGMAX 0\r\n')
 fprintf(fid, 'Z0MIN 0\r\n')
 fprintf(fid, 'Z0MAX 0\r\n')
 fprintf(fid, 'MAXITER 14\r\n')
 fprintf(fid, 'MAXSEED 100\r\n')
 fprintf(fid, 'NFILES 1\r\n')
 fprintf(fid, 'UseWindShear 0\r\n')
 fprintf(fid, 'WVMODEL 0\r\n')
 fprintf(fid, 'MATCHFILE %c\r\n', '')
 fprintf(fid, 'SPACING 0\r\n')
 fprintf(fid, 'SAMPLEFREQ 0\r\n')
 fprintf(fid, 'MEANSPEED 0\r\n')
 fprintf(fid, 'ILAT 0\r\n')
 fprintf(fid, 'IVERT 0\r\n')
 fprintf(fid, 'GUSTMETHOD 0\r\n')
 fprintf(fid, 'DLONG 0\r\n')
 fprintf(fid, 'ILAT 0\r\n')
 fprintf(fid, 'IVERT 0\r\n')
 fprintf(fid, 'LONGGUST 0\r\n')
 fprintf(fid, 'LATGUST 0\r\n')
 fprintf(fid, 'VERTGUST 0\r\n')
 fprintf(fid, 'iLONGGUST 0\r\n')
 fprintf(fid, 'iLATGUST 0\r\n')
 fprintf(fid, 'iVERTGUST 0\r\n')
 fprintf(fid, 'PEAKINESS 0\r\n')
 fprintf(fid, 'MAXFRAN 0\r\n')
 fprintf(fid, ' MEND\r\n')
 fprintf(fid, '\r\n')
 fprintf(fid, '0CONSTANTS\r\n')
 fprintf(fid, '0WINDND\r\n')
 fclose(fid)
 end
end 
```

但是这样一来，代码大部分时间都花在了编写输出上。我想更多地做同样的事情，只阅读参考文件（使用 fopen() 或其他命令）和改变（打印）

```
fprintf(fid, 'LENGTH %g\r\n', V(i)*610)
fprintf(fid, 'STEP %g\r\n', V(i)/13.4295)
fprintf(fid, 'UBAR %g\r\n', V(i))
fprintf(fid, 'SEED %i\r\n', randi(999,1)) 
```

在新文件中。

有谁知道如何达到这个结果？如果可能的话，我也想矢量化而不是使用 for 循环。

否则，我正在考虑这种过程：感谢您的回答并与我分享代码。

您可能注意到代码由块组成：它们以“MSTART”开头，以“MEND”结尾；每个 MSTART 后跟单个块的标签/名称。

在这种情况下，块是 CONSTANTS 和 WINDND。我想知道是否有可能：

```
1.read the parent file;
2.find the different block the parent file presents;
3.store the information/strings of each block in a Matlab structure;
4.write new files just recalling the blocks of the parent file;
5.look for strings LENGTH, STEP, UBAR, SEED;
6.update the above string with the corresponding formula;
7.store in a specified folder. 
```

代码的开头是：

```
%# read lines
fid = fopen('file.txt','rt');
C = textscan(fid, '%s', 'Delimiter','\r\n'); 
C = C{1};  fclose(fid);

%# start/end of each structure
startIdx = find(ismember(C, 'MSTART'));
endIdx = find(ismember(C, 'MEND')); 
```

但是我不知道如何继续，因为我只是 Matlab 的大一新生，尤其是文本/结构操作。

我希望你能对我有耐心。

问候。

我提前感谢大家。

最诚挚的问候，弗朗切斯科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:48:15.570

这应该有效：

```
clc, clear all, close all

V = [4 6 8 10 12 14 16 18 20 22 24 26 28 29];

fid = fopen('parent.txt', 'r');
C = textscan(fid,'%s', 'delimiter', '\r\n');
C = C{1};
fclose(fid);

D = C;
for j = 1:6
    f1 = 'd:\01_department\dlc1-2';
    if exist(f1,'dir') ~= 7, mkdir(f1); end

    fname = [f1 '\' 's0' num2str(j)];
    if exist(fname,'dir') ~= 7, mkdir(fname); end

    for i = 1:numel(v)
        filename = [fname '\' num2str(V(i)) '.$pj'];

        D{strncmp('LENGTH', c, length('LENGTH'))} = ...
            sprintf('length %g', V(i)*610);

        D{strncmp('STEP', c, length('STEP'))} = ...
            sprintf('STEP %g', V(i)/13.4295);

        D{strncmp('UBAR', c, length('UBAR'))} = ...
            sprintf('UBAR %g', V(i));

        D{strncmp('SEED', c, length('SEED'))} = ...
            sprintf('SEED %i', randi(999,1));

        fid = fopen(filename,'w');        
        txt = sprintf([repmat('%s\r\n',1,size(d,1)),'\r\n'],d{:});        
        fprintf(fid, '%s', txt);        
        fclose(fid);

    end
end 
```

这仍然可以改进——要替换的字符串是理想的矢量化，和/或只在命令中输入一次。但是哦，好吧，这应该已经给你一个显着的加速。

# java - 如何在 JSP 项目中使用 Flex

> ID：12087224
> 
> 赞同：0
> 
> 时间：2012-08-23T08:02:18.993
> 
> 标签：java, apache-flex, jakarta-ee

我如何在我的 Java EE 项目中使用 flex 以及我可以用 Flex 做些什么新的事情，因为在安装插件和添加 SDK 之后我无法在 Netbeans 中运行 flex 应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:28:52.250

Flex 最终被编译为 SWF 文件。如果您在网页上看到过一些 Flash 动画，请单击查看源代码，这就是它的样子。JSP 将生成嵌入了 SWF 文件的 html。[像flashdevelop](http://www.flashdevelop.org/)这样的 flex 有免费的 IDE 。您还可以像 java 一样使用纯文本编辑器和 flex sdk 开发 flex 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:35:48.250

如果您完全是初学者，我建议您阅读以下教程并复制其练习：http: [//media.techtarget.com/tss/static/articles/content/Flex/Flex_Chapter20.pdf](http://media.techtarget.com/tss/static/articles/content/Flex/Flex_Chapter20.pdf)

# javascript - 将鼠标悬停在具有缓动效果的控件上时向左/向右设置 div 动画

> ID：12087225
> 
> 赞同：1
> 
> 时间：2012-08-23T08:02:22.353
> 
> 标签：javascript, jquery, animation, easing, mousedown

我正在根据[这个先前的问题](https://stackoverflow.com/questions/1511529/how-to-scroll-div-continuously-on-mousedown-event)开发一个功能。

但是，如果滚动开始缓慢而迅速地加速会很好，但似乎不可能使用动画功能中可用的缓动，因为当用户按住下一个/上一个按钮时，它会被多次触发。

任何人都知道如何实现这一目标？

谢谢 ：）

现在使用 JSFiddle：http: [//jsfiddle.net/4YJPG/4/](http://jsfiddle.net/4YJPG/4/)

其他相关问题，如果时间轴 div 可以在宽度可变的新项目添加到右侧时动态更新宽度，那么确保滚动到达任一端后可靠停止的最佳方法是什么？

更新：带有代码的 JSFiddle 停止时间轴 div 滚动到末端（希望具有动态宽度）：http: [//jsfiddle.net/eFFKU/4/](http://jsfiddle.net/eFFKU/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:32:19.390

如果您更改元素的宽度或在时间轴中添加/删除一些新元素，此解决方案不会中断。

**[这是工作的jsFiddle。](http://jsfiddle.net/eFFKU/12/)**

```
var liWidth = $('#timeline ul li').outerWidth(true);
//this calculates element's width with their margins/paddings/borders
var liTotal = $('#timeline ul li').index()-9;
//need to descry first seen li's from calculation for true value of MaxRange
var MaxRange = ( liTotal  * liWidth ) * -1;

$('.prev').click(function(){
    var current = parseInt($('#timeline').css('right'));
    if ( current <= 0  && current > MaxRange ) {
        $timeline.stop(false,true).animate({'right':'-='+liWidth+'px'},1000);
    }
});

$('.next').click(function(){
    var current = parseInt($('#timeline').css('right'));
    if ( current <= -1 ) {
        $timeline.stop(false,true).animate({'right':'+='+liWidth+'px'},1000);
    }
}); 
```

如果你想完美地做到这一点：你需要添加另一个 if 条件；当左移和右移按钮被点击并且不同的值被添加到 $timeline 的右 css 时，这个按钮不会完美地滑动。

您可以编写一个等式，将当前右侧的值除以 50/liWidth，如果它不可除，您可以重置时间线，然后再次初始化 next/prev 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T10:05:07.013

这并不难。就这样做吧。在 onClick（左/右）上绑定一个函数，如下所示

```
var val=5; 

setInterval(function() {
    val++;
}, 100); 
```

并将 '-+10px' 替换为 val ，这样它就会开始缓慢并快速移动。您需要考虑的是将 val 转换为字符串并 concat 'px' 并将限制设置为 val ex: 30

# javascript - 带有类的 Javascript/jQuery 回调

> ID：12087226
> 
> 赞同：1
> 
> 时间：2012-08-23T08:02:30.833
> 
> 标签：javascript, class, jquery-mobile, scope, this

我正在尝试在 javascript 上使用“类”（原型），但遇到了一个奇怪的“未定义”错误。

```
/**
 * Use the camera to take a picture and use it as custom image.
 */
function CameraMedia(imgTag, saveButton){
    this.__camera__ = navigator.camera;
    this.__imageTag__ = imgTag;
    this.__saveButton__ = saveButton;
    this.__selectedImage__ = null;
}

/**
 * Executes the camera of the device.
 * @param {Object} type selects between gallery or camera. Parameters could be "GALLERY" or "CAMERA" ignoring case.
 */
CameraMedia.prototype.run = function(type){
    var that = this;
    function onDeviceReady(){
          var options = {
              quality: 50,
              allowEdit : true
          };
          that.__camera__.getPicture(that.__successOperation__, that.__errorOperation__, options);
    }
    document.addEventListener("deviceready", onDeviceReady, true);
};

/**
 * Operation that might be performed in case of success in taking the image.
 */
CameraMedia.prototype.__successOperation__ = function(imageData){
    this.__selectedImage__ = imageData;
    $(this.__imageTag__).attr("src", imageData);
    $(this.__imageTag__).attr("image-changed", true);
    $(this.__saveButton__).show();
}

/**
 * Operation that might be performed in case of error in taking the image.
 */
CameraMedia.prototype.__errorOperation__ = function(message){
    alert(message);
} 
```

问题是`this`元素上`__successOperation__`没有引用 CameraMedia 对象。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:06:47.197

这个是正常的。您正在将一个函数从一个对象（基本上是一个哈希图）传递给回调，而不是整个对象。

为了解决这个问题，jQuery 有一个代理方法（下划线有一个绑定方法），它们是这样的：

```
that.__camera__.getPicture($.proxy(that.__successOperation__, that), that.__errorOperation__, options); 
```

如果您希望使用 vanilla javascript，您也可以实现此目的（示例 3）：

```
var a = {
    data: "1",
    func: function() {
        console.log(this.data);
    }
};

//This will log out undefined (Example #1)
var myFunction = function(callback) {
    callback();
};
myFunction(a.func);

//This will work (Example #2)
var myFunction2 = function(callback) {
    callback.func();
};
myFunction2(a);

//This will also work (Example #3)
myFunction(function() {
    a.func()
});​ 
```

JSFiddle：http: [//jsfiddle.net/PBxFs/](http://jsfiddle.net/PBxFs/)

# android - 尝试为 ImageView 设置动画，但不起作用

> ID：12087227
> 
> 赞同：0
> 
> 时间：2012-08-23T08:02:31.487
> 
> 标签：android, animation

动画文件从左上角放大到全屏

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >
<scale
    android:duration="800"
    android:fromXScale=".1"
    android:fromYScale=".1"
    android:pivotX="100%"
    android:pivotY="0%"
    android:toXScale="1.0"
    android:toYScale="1.0"/>
</set> 
```

在 onCreate 我有

```
newHintAnimation = AnimationUtils.loadAnimation(this,
                R.anim.newhintzoomin);
newHintAnimation.setAnimationListener(this) ; 
```

在我的点击

```
try {
    hintBitmap = BitmapFactory.decodeStream(this.getApplicationContext()                    .getAssets().open("logos/"+question.getShintFileName()));
    } catch (IOException e) {
    hintBitmap = null ;
    e.printStackTrace();

hintImage.setVisibility(View.VISIBLE) ;
hintImage.setImageBitmap(hintBitmap);
newHintAnimation.reset() ;
hintImage.startAnimation(newHintAnimation) ; 
```

我的布局 xml 具有以下内容

```
<ImageView
    android:id="@+id/hintImage"
    android:layout_width="60dip"
    android:layout_height="60dip"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/question_header_layout"
    android:layout_marginLeft="10dip"
    android:layout_marginTop="10dip"
    android:visibility="visible" /> 
```

我检查了一下，我在位图上没有得到空值。如果使用 overridePendingTransition(R.anim.newhintzoomin, 0) 在 Activity 中运行相同的代码；有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:11:41.523

请尝试这是：

```
Animation hyperspaceJumpAnimation = AnimationUtils.loadAnimation(this, R.anim.newhintzoomin);
hintImage.startAnimation(newHintAnimation); 
```

让我知道它是否有效:) 祝你好运

# wpf - 运行时的 DataGrid 本地化

> ID：12087230
> 
> 赞同：1
> 
> 时间：2012-08-23T08:02:44.357
> 
> 标签：wpf, datagrid, localization

我在[Christians Mosers Wpf 教程](http://www.wpftutorial.net/LocalizeMarkupExtension.html)中使用带有 MarkupExtension 的本地化。到目前为止，一切都很好。

唯一不起作用的是运行时 DataGrid 内容的本地化。例如，我有一个绑定到 observableCollection 的数据网格。它包含一个显示功能名称的 TextColumn。功能名称应该是可本地化的。

```
<DataGridTextColumn Header="{t:Translator Feature}" IsReadOnly="True"
  Binding="{Binding Path=Feature, Converter={Utilities:EnumDescriptionConverter}, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/> 
```

Feature 是一个枚举值，我使用转换器从中检索描述。转换器也进行翻译。

```
public object Convert(object value, System.Type targetType, object parameter,   System.Globalization.CultureInfo culture)
{
  if (value is Enum)
  {
    var myEnum = (Enum)value;
    string description = GetEnumDescription(myEnum);
    return TranslationManager.Instance.Translate(description);
  }

  return value;
} 
```

问题是转换器仅在第一次填充数据网格时才被调用。当当前区域性改变时，数据网格内容永远不会改变。

每次当前语言更改时，如何让数据网格内容更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T09:35:24.247

我通过让 ViewModel 监听 LanguageChangedEvents 解决了这个问题。事件处理程序在（数据网格的）基础数据视图上调用 Refresh()，并触发 PropertyChangedEvents。

```
private void OnLanguageChanged(object sender, EventArgs args)
{
  //call refresh in order to update the translations within the list
  IEditableCollectionView list = (ListCollectionView) this.FeaturesView;
  if (list.IsEditingItem) list.CommitEdit();
  if (list.IsAddingNew) list.CommitNew();
  this.FeaturesView.Refresh();
  OnPropertyChanged(FeaturesViewProperty);

  ...
} 
```

# android - CDATA 未在 XML Android 中解析

> ID：12087233
> 
> 赞同：2
> 
> 时间：2012-08-23T08:03:02.987
> 
> 标签：android, xml-parsing

我在我的活动中使用 XML DOM 解析器，它必须使用 CDATA 值解析 XML。DOM Parser 对纯 XML 工作得非常好，但是当数据包含 CDATA 值时它就不起作用了。

我需要解析的 XML 文件如下：

```
<?xml version="1.0" encoding="utf-8"?>
<organizations>
  <organization>
    <name><![CDATA[Center for Maximum]]></name>
    <image><![CDATA[https://www.xyz.com/company_placeholder.png]]></image>
    <city><![CDATA[Austin]]></city>
    <state><![CDATA[Texas]]></state>
  </organization>
</organizations> 
```

我已经添加`setCoalescing(true)`到我的`DocumentBuilderFactory`对象中，但即便如此它也没有正确解析。它给出了错误`java.net.MalformedURLException: Protocol not found:`。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T03:38:52.780

好吧，我为这个问题找到的唯一解决方案是使用 XPATH 来解析各种项目值。例如，如果我们需要解析上述 XML 代码中的“名称”项，那么我们需要执行以下操作：

```
 XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(url); // getting XML from URL

    Document doc = parser.getDomElement(xml); // getting DOM element

    XPath xPath = XPathFactory.newInstance().newXPath();
    String name = null;
    try {
        name=xPath.evaluate("//organization/name/text()", doc).trim();
    } 
    catch (XPathExpressionException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } 
```

现在字符串`name`具有项目“名称”的所需值。这是我在代码中用于解析 CDATA 的解决方法。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-27T17:09:55.937

我在我的活动中使用 XML DOM 解析器，它必须使用 CDATA 值解析 XML。对于解析 CDATA 内容，您可以在元素上尝试 getTextContent，您将能够在 CDATA 标记内获取数据。

```
 NodeList nodeListGetName = doc.getElementsByTagName("name");
 Element eleName = (Element) nodeListGetName.item(0);
 String strName = eleName.getTextContent(); 
```

在上面的代码中，我已经解析了`<name>`节点的数据。您可以将相同的模式用于其他 CDATA 内容解析。

# internet-explorer-9 - IE9 通过 WURFL 被检测为移动设备

> ID：12087237
> 
> 赞同：2
> 
> 时间：2012-08-23T08:03:19.177
> 
> 标签：internet-explorer-9, user-agent, wurfl, mobile-devices, ektron

我有一个 Ektron 站点，它使用 WURFL（最新版本，2.3.2）来检测设备。使用 IE9 浏览网站时，会向用户显示该网站的移动版本。

用户代理是-

```
Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0) 
```

[当我在WURFL 主页](http://tools.scientiamobile.com/?user-agent-string=Mozilla/5.0+%28compatible;+MSIE+9.0;+Windows+NT+6.1;+Win64;+x64;+Trident/5.0%29)上输入此 UA 时，它显示为通用网络浏览器。

但是，当使用 Asp.NET WURFL 库时，它会被检测为移动设备。

以下代码-

```
IWURFLManager wurflManager = wurflManagerProvider.WURFLManager;
IDevice device = wurflManager.GetDeviceForRequest(Request);
var device_os = device.GetCapability("device_os");
var device_os_version = device.GetCapability("device_os_version");
var device_model = device.GetCapability("model_name");

deviceinfo.Text += "WURFL Model: ";
deviceinfo.Text += device_model;

deviceinfo.Text += "WURFL Device OS: ";
deviceinfo.Text += device_os;

deviceinfo.Text += "WURFL Device OS Version: ";
deviceinfo.Text += device_os_version; 
```

输出-

```
WURFL Model: Windows Mobile 7.5
WURFL Device OS: Windows Phone OS
WURFL Device OS Version: 7.5 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:23:15.857

问题是 WURFL 并非旨在区分桌面设备和移动设备。它只关注移动设备。台式机通常被检测为移动设备。一种解决方法是包含一个 desktop_browser_patch.xml 文件。但是，您必须手动将 Firefox 15 和 16 添加到补丁文件中，并继续使用每个发布的 Firefox 版本对其进行更新。

我发现最好在用户代理上使用正则表达式来确定它是桌面还是移动。如果它是移动设备，则仅使用 Wurfl 来检测设备功能。网上有几个正则表达式。他们都是不完美的。还要检查 Request.Browser.IsMobileDevice。如果这是真的，那么它就是一个移动设备。如果这是错误的，那么它可能是也可能不是移动设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T15:31:42.257

我在这里聚会有点晚了，但我在这个问题上与 Ektron 支持合作。

直到 Ektron 版本 8.6，他们都在使用 tholder WURFL API 驱动程序。而且它不能正常工作。它不仅将 IE 9 检测为移动浏览器，还没有将 Android OS 4.0+ 检测为移动浏览器（始终显示桌面）。

补丁文件也没有解决问题。

我得到这个问题的原因是因为它没有读取整个 wurfl.xml.gz 文件。

在 Ektron 支持的多次反复来回之后，决定为 Ektron 8.6 制作一个修补程序来解决这个问题将是一项艰巨的任务。

升级到 Ektron 8.7 可以解决这个问题，因为它使用新的 WURFL API 驱动程序并现在可以正确检测 IE 9 和 Android。

# xcode - Xcode 文件和文件夹干净的结构和组织

> ID：12087244
> 
> 赞同：12
> 
> 时间：2012-08-23T08:03:40.303
> 
> 标签：xcode, file, structure, directory, organization

在使用 Xcode 开发四年后，我开始问自己（嗯，是的，我知道，有点晚了，但是当你深入编码时，你看不到其他东西）什么样的文件和文件夹的结构和组织可以是遵循某种准则的好人。

我看到了谷歌[编码指南](http://google-styleguide.googlecode.com/svn/trunk/objcguide.xml)，我想知道这个问题的主题是否有类似的文档。

我可以看到，如果您在 Xcode 中创建一个新项目（我使用的是最新版本），您将拥有一个与应用程序同名的文件夹，然后在“支持文件”中，然后是框架和产品。最后两个很好，但我只是想知道我是否添加了一些图形和其他类以及静态库等等，我如何命名它们以及将它们放在哪里（例如：一些标准图形，如图标和默认图像将进入“支持文件”中名为“设计”或“标准设计”的文件夹）。之类的规矩。

这是因为当您开始处理多个项目（我的意思是每天 3-4 个）时，您希望在同一个文件夹中找到相同的东西，甚至因为对于未来的更新和参考，您将知道在哪里可以找到正确的东西在正确的地方。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-23T08:28:27.950

我认为最好的策略是根据与它们相关的程序功能的哪个部分将它们组织成组（组是 XCode中的*“文件夹” ，它们不是真正的文件系统文件夹，除非你明确地使它们如此）。*将它们组织在实际文件夹中是否是一个好主意有点争议（有时我这样做有时我不这样做）。

不管怎样，在开始按组组织文件之前，您应该开始组织项目的结构。我的意思是系统地遵循与如何模块化项目、将代码放在哪里（在哪里意味着*在哪些类中*）等相关的最佳实践。

关于如何组织项目的一个很好的起点是 Matt Gallagher在他著名的博客*CocoaWithLove中**[的每个 Mac 应用程序的设计](http://cocoawithlove.com/2010/06/design-of-every-mac-application.html)*帖子。他的本体分析也使得如何组织组几乎不言自明（事实上，他承认通过转录项目的组名来创建本体）。

# javascript - Jquery DOM 到达 Node

> ID：12087249
> 
> 赞同：0
> 
> 时间：2012-08-23T08:04:06.957
> 
> 标签：javascript, jquery, html

我的产品列表显示在无序列表中，如下所示。

![](../Images/76340d14e0504262bdf3c473fc58c2f2.png)

当用户对项目感兴趣时，他们将单击我感兴趣，我将更改背景颜色以及感兴趣的项目的刻度线。

为了使刻度线出现，我使用了一个 jquery 函数，当我感兴趣时它被调用

我在函数中添加了以下行以使刻度出现

```
<pre>                   $(this).parent().children(1).children(0).children(0).children(0).children(0).children(0).show();
</pre> 
```

整个jquery函数如下

```
<pre>
$(".checklist .checkbox-select").click(
  function(event) {         $(this).parent().children(1).children(0).children(0).children(0).children(0).children(0).show());           
}
);
</pre> 
```

**我正在更改 Div 的显示，其中勾选从无到阻止**

我想知道是否有比通过所有子节点到达具有 Tick 图像的 div 更好的方法来导航 DOM

```
<pre>
    <li>
        <div style="padding:10px 0px 0px 10px;">
         <table>
          <tr>
            <td>
              <div class="TickImgCont" style="display:none;">
            <img src="../templates/default/images/tick_white.gif" height="31" width="35"/>                  
              </div>
            </td>
            <td>
             <div class="ImgContainerHeaderFont">Product Name</div>                      
             <div class="ImgContainerSubHeaderFont">Product</div>                        
            </td>
          </tr>
         </table>    
        </div>
        <div class="ImgContainer">
          <img src="../sample.jpg" height="150" width="200"/>
        </div>
        <div>
         <table class="PrefTblStyl" align="center">
           <tr>
            <td>Sample Text</td>
            <td>Sample Text</td>
           </tr>
           <tr>
            <td>Sample Text</td>
            <td>Sample Text</td>
           </tr>
         </table>
        </div>          
       <a class="checkbox-select" href="#" onclick="AddProjectId(1)">I Am Interested</a>
       <a class="checkbox-deselect" href="#" onclick="RemoveProjectId(1)">NotInterested</a>
    </li>
 </pre> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:12:00.380

```
$(".checklist .checkbox-select").on('click', function() {
    $(this).parent().find('.TickImgCont').show();
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:08:00.837

你可以使用

```
 $(".checklist .checkbox-select").click(
    function(event) {
         $(this).closest('.TickImgCont').show());      
    }
  });

<li>
    <div style="padding:10px 0px 0px 10px;">
     <table>
      <tr>
        <td>
          <div class="TickImgCont" style="display:none;">
        <img src="../templates/default/images/tick_white.gif" height="31" width="35"/>                  
          </div>
        </td>
        <td>
         <div class="ImgContainerHeaderFont">Product Name</div>                      
         <div class="ImgContainerSubHeaderFont">Product</div>                        
        </td>
      </tr>
     </table>    
    </div>
    <div class="ImgContainer">
      <img src="../sample.jpg" height="150" width="200"/>
    </div>
    <div>
     <table class="PrefTblStyl" align="center">
       <tr>
        <td>Sample Text</td>
        <td>Sample Text</td>
       </tr>
       <tr>
        <td>Sample Text</td>
        <td>Sample Text</td>
       </tr>
     </table>
    </div>          
   <a class="checkbox-select" href="#" onclick="AddProjectId(1)">I Am Interested</a>
   <a class="checkbox-deselect" href="#" onclick="RemoveProjectId(1)">NotInterested</a>
</li> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T08:08:52.910

一个更好的主意是创建一个单独的 CSS 类，该类具有框的样式，包括刻度的图像。这样，您只需要添加类而不是执行大量的 jQuery 调用。

# java - 将带有包文件夹的文件复制到另一个目的地的简单方法

> ID：12087252
> 
> 赞同：0
> 
> 时间：2012-08-23T08:04:20.503
> 
> 标签：java, deployment, patch

我在类路径中有一个 Java 类`x.java`及其编译表示`x.class`。我想`x.java`在我的 IDE 视图中选择，按下按钮“创建补丁”并在所选文件夹中找到所有包作为文件夹和`x.class`.

例如，如果包是`com.x.y`我会找到文件夹 com,x,y 和文件夹 y 我会找到`x.class`.

有没有插件/工具可以做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:46:45.210

没有这样的插件；一些插件（如 Web 工具项目）可以通过仅复制修改过的文件来更新 Web 项目，但这是一种特殊情况，现有的工具已经解决了剩下的问题。

例如，尝试`rsync`( [docs ) 或](https://www.samba.org/ftp/rsync/rsync.html)[Unison](http://www.cis.upenn.edu/~bcpierce/unison/)。他们会为您找到所有更改（因此无需选择或记住任何内容）并以有效的方式传输它们。

# php - highchart中柱形图的3级向下钻取？

> ID：12087253
> 
> 赞同：8
> 
> 时间：2012-08-23T08:04:21.730
> 
> 标签：php, jquery, charts, highcharts

我正在尝试实施 3 LEVEL Column 向下钻取报告。我显示的分数基于`agent->customer->question`

我正在使用 fusher 制作的图表作为参考 我已经[使用 php 实现了它](http://jsfiddle.net/Fusher/NULTY/)

1.  我想在这个[图表示例](http://jsfiddle.net/highcharts/fj6d2/) 中实现滚动，你看到的是折线图。当 x 轴上有太多数据时，如何实现列向下滚动。

2.  我想禁用图例点击（它会导致柱形图消失）

3.  在列内钻取时是否可以使用下一个上一个按钮，具体取决于您所在的列，它将带您进行下一个钻取或返回。目前，您必须钻取所有级别才能返回，或者使用按钮将图表恢复到初始状态或刷新图表，这有点像我正在寻找的东西。

4.  图表未在 ie7 和 ie8 中呈现，它与 mozilla 和 chrome 一起工作正常 ie 显示错误。

5.  如果我用我的电脑上下载的本地版本的 highcharts 加载图表。对于向下钻取的负列，它显示额外的列。

但是在 js 中，在 highcharts 服务器上使用最新版本的 highcharts 时，它工作正常，不知道奇怪的行为。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-24T08:43:37.443

我实现了在 highcharts 中使用 coulmn 图表进行 3 级钻取的目标

感谢富瑟的例子

我说过了吗

现在我有一个工作图表，我需要手动传递 php 数据:)

这是工作的 js 小提琴：http: [//jsfiddle.net/NULTY/1200/](http://jsfiddle.net/NULTY/1200/)

在第一列上显示 3level 钻头。完成后我将使用 php 代码进行更新:)

```
edit: fixed jsFiddle link with working dependencies 
```

# migration - 将 OpenLaszlo 应用程序迁移到 5.0 时出错：org.openlaszlo.sc.CompilerError / 覆盖未标记为覆盖的函数

> ID：12087255
> 
> 赞同：2
> 
> 时间：2012-08-23T08:04:29.593
> 
> 标签：migration, openlaszlo, lzx

我在 OL 3.3 中有一个富文本类，我正在将其转换为 OL5.0 我使用了 5.0 中的孵化器代码，但是当我编译它时。我收到这个错误。知道为什么会出现这个错误吗？

> [exec] org.openlaszlo.sc.CompilerError：extensions/views/richinputtext.lzx：113：错误：覆盖未标记为覆盖的函数，在行：function updateData（）{
> 
> [exec] extensions/views/richinputtext.lzx：182：错误：覆盖未标记为覆盖的函数，在行中：function getText（）{

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:47:30.190

<richinputtext> 组件仅适用于 SWF8 运行时。该组件是为旧的 LaszloMail 应用程序创建的。它不适用于基于 DHTML 或基于 ActionScript 的运行时，例如 SWF10 或 SWF11。对于 Webtop 和电子邮件客户端，Laszlo 使用基于 Dojo 框架组件的[富文本编辑器。](http://labs.openlaszlo.org/trunk-nightly/docs/developers/richtext.html)

# xml - XSLT 模板的执行顺序

> ID：12087257
> 
> 赞同：2
> 
> 时间：2012-08-23T08:04:35.800
> 
> 标签：xml, xslt

我有一个像这样的 xml 文件：receipt.xml

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xml" href="receipt.xslt"?>
    <printedslip>
      <pos>
        <posno>11546546</posno>
      </pos>
      <store>
        <storeno>1</storeno>
        <storename>Store 01</storename>
        <orgno>001</orgno>
        <postalcode>550</postalcode>
      </store>
      <cashier>
        <userno>1</userno>
        <name>Sara</name>
      </cashier>
      <headertext>Receipt Profile Header</headertext>
    </printedslip> 
```

和一个 xslt 文件：receipt.xslt

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:include href="params.xslt"/>
  <xsl:include href="store.xslt"/>
  <xsl:include href="headergroup.xslt"/>

  <xsl:output method="text" />
  <xsl:strip-space elements="*"/>

  <xsl:template match="store">
    <xsl:call-template name="store">
      <xsl:with-param name="value" select="store"/>
      <xsl:with-param name="store_no"  select="$store_no"/>    
    </xsl:call-template>
  </xsl:template>

  <xsl:template match="headertext">
    <xsl:call-template name="receiptheader">
      <xsl:with-param name="value" select="headertext"/>
    </xsl:call-template>
  </xsl:template>

  <xsl:template match="cashier">
    <xsl:call-template name="cashier">
      <xsl:with-param name="value" select="cashier"/>
      <xsl:with-param name="cashier" select="$cashier"/>
    </xsl:call-template>
  </xsl:template>
</xsl:stylesheet> 
```

我希望收到按模板添加到 XSLT 文件中的顺序形成的输出文本。相反，我首先收到商店信息、收银员和标题文本，按照节点在 XML 文件中出现的顺序。我想从 XSLT 文件中获得订单：商店、标题文本、收银员。

有解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T08:37:48.960

添加一个与打印单匹配的模板，然后您可以定义子元素的调用顺序：

```
<xsl:template match="printedslip">
    <xsl:apply-templates select="store"/>
    <xsl:apply-templates select="headertext"/>
    <xsl:apply-templates select="cashier"/>
</xsl:template> 
```

否则，订单取决于输入 XML（商店、收银员、标题文本）。XSLT 中模板的顺序不会影响打印单中元素的顺序。

通常，XSLT 处理器从上到下遍历输入 XML 中的所有元素——因此，如果您不想要该顺序——您需要告诉处理器（在 xslt 中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:09:49.230

我想和`xsl:apply-template`你一起可以达到你的目标

# scala - 避免在函数内装箱/拆箱

> ID：12087259
> 
> 赞同：14
> 
> 时间：2012-08-23T08:04:39.527
> 
> 标签：scala, macros, boxing

对于数字密集型代码，我编写了一个具有以下签名的函数：

```
def update( f: (Int,Int,Double) => Double ): Unit = {...} 
```

但是，因为`Function3`不是专门的，所以每次应用都会`f`对 3 个参数和结果类型进行装箱/拆箱。

我可以使用一个特殊的更新程序类：

```
trait Updater {
  def apply( i: Int, j: Int, x: Double ): Double
}
def update( f: Updater ): Unit = {...} 
```

但是调用很麻烦（和java-ish）：

```
//with function
b.update( (i,j,_) => if( i==0 || j ==0 ) 1.0 else 0.5 )

//with updater
b.update( new Updater {
  def apply( i: Int, j: Int, x: Double ) = if( i==0 || j ==0 ) 1.0 else 0.5
} ) 
```

有没有办法在仍然使用 lambda 语法的同时避免装箱/拆箱？我希望宏会有所帮助，但我想不出任何解决方案。

**编辑：**我用 javap 分析了 function3 生成的字节码。编译器会生成一个未装箱的方法，以及通用方法（见下文）。有没有办法直接调用未装箱的？

```
public final double apply(int, int, double);
  Code:
   0:   ldc2_w  #14; //double 100.0d
   3:   iload_2
   4:   i2d
   5:   dmul
   6:   iload_1
   7:   i2d
   8:   ddiv
   9:   dreturn

public final java.lang.Object apply(java.lang.Object, java.lang.Object, java.lang.Object);
  Code:
   0:   aload_0
   1:   aload_1
   2:   invokestatic    #31; //Method scala/runtime/BoxesRunTime.unboxToInt:(Ljava/lang/Object;)I
   5:   aload_2
   6:   invokestatic    #31; //Method scala/runtime/BoxesRunTime.unboxToInt:(Ljava/lang/Object;)I
   9:   aload_3
   10:  invokestatic    #35; //Method scala/runtime/BoxesRunTime.unboxToDouble:(Ljava/lang/Object;)D
   13:  invokevirtual   #37; //Method apply:(IID)D
   16:  invokestatic    #41; //Method scala/runtime/BoxesRunTime.boxToDouble:(D)Ljava/lang/Double;
   19:  areturn 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T15:58:31.123

由于您提到宏作为一种可能的解决方案，我想到了编写一个宏，它接受一个匿名函数，提取应用方法并将其插入到一个匿名类中，该类扩展了一个名为`F3`. 这是相当长的实现。

特质`F3`

```
trait F3[@specialized A, @specialized B, @specialized C, @specialized D] {
  def apply(a:A, b:B, c:C):D
} 
```

宏

```
 implicit def function3toF3[A,B,C,D](f:Function3[A,B,C,D]):F3[A,B,C,D] = macro impl[A,B,C,D]

  def impl[A,B,C,D](c:Context)(f:c.Expr[Function3[A,B,C,D]]):c.Expr[F3[A,B,C,D]] = {
    import c.universe._
    var Function(args,body) = f.tree
    args = args.map(c.resetAllAttrs(_).asInstanceOf[ValDef])
    body = c.resetAllAttrs(body)
    val res = 
      Block(
        List(
          ClassDef(
            Modifiers(Flag.FINAL),
            newTypeName("$anon"),
            List(),
            Template(
              List(
                AppliedTypeTree(Ident(c.mirror.staticClass("mcro.F3")),
                  List(
                    Ident(c.mirror.staticClass("scala.Int")),
                    Ident(c.mirror.staticClass("scala.Int")),
                    Ident(c.mirror.staticClass("scala.Double")),
                    Ident(c.mirror.staticClass("scala.Double"))
                  )
                )
              ),
              emptyValDef,
              List(
                DefDef(
                  Modifiers(),
                  nme.CONSTRUCTOR,
                  List(),
                  List(
                    List()
                  ),
                  TypeTree(),
                  Block(
                    List(
                      Apply(
                        Select(Super(This(newTypeName("")), newTypeName("")), newTermName("<init>")),
                        List()
                      )
                    ),
                    Literal(Constant(()))
                  )
                ),
                DefDef(
                  Modifiers(Flag.OVERRIDE),
                  newTermName("apply"),
                  List(),
                  List(args),
                  TypeTree(),
                  body
                )
              )
            )
          )
        ),
        Apply(
          Select(
            New(
              Ident(newTypeName("$anon"))
            ),
            nme.CONSTRUCTOR
          ),
          List()
        )
      )

    c.Expr[F3[A,B,C,D]](res)
  } 
```

由于我将宏定义为隐式，因此可以这样使用：

```
def foo(f:F3[Int,Int,Double,Double]) = {
  println(f.apply(1,2,3))
}

foo((a:Int,b:Int,c:Double)=>a+b+c) 
```

在调用 foo 之前，将调用宏，因为`foo`需要`F3`. 正如预期的那样，调用`foo`打印“6.0”。现在让我们看一下`foo`方法的反汇编，以确保不会发生装箱/拆箱：

```
public void foo(mcro.F3);
  Code:
   Stack=6, Locals=2, Args_size=2
   0:   getstatic       #19; //Field scala/Predef$.MODULE$:Lscala/Predef$;
   3:   aload_1
   4:   iconst_1
   5:   iconst_2
   6:   ldc2_w  #20; //double 3.0d
   9:   invokeinterface #27,  5; //InterfaceMethod mcro/F3.apply$mcIIDD$sp:(IID)D
   14:  invokestatic    #33; //Method scala/runtime/BoxesRunTime.boxToDouble:(D)Ljava/lang/Double;
   17:  invokevirtual   #37; //Method scala/Predef$.println:(Ljava/lang/Object;)V
   20:  return 
```

在这里完成的唯一拳击是调用`println`. 耶！

最后一点：在当前状态下，宏仅适用于特殊情况，`Int,Int,Double,Double`但很容易修复。我把它作为练习留给读者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T09:31:29.720

关于由 Scalac 生成的扩展匿名类`Function3`（您显示的字节码） - 无法`apply`从 内部调用带有原始参数的重载`b.update`，因为该`update`方法采用 a `Function3`，它没有`apply`带有原始参数的 a 。

从`Function3`字节码中，唯一`apply`的是：

```
public abstract java.lang.Object apply(java.lang.Object, java.lang.Object, java.lang.Object); 
```

您可以改为使用`Function2[Long, Double]`专门针对这些类型的 ，并将 2 个整数`x`和`y`long as编码`(x.toLong << 32) + y`，并将它们解码为`v & 0xffffffff`and `(v >> 32) & 0xffffffff`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T09:44:14.520

作为`Function1`专门的，一种可能的解决方案是使用柯里化并将更新方法更改为：

```
def update( f: Int => Int => Double => Double ): Unit = {...} 
```

并相应地更改内联函数。用你的例子（`update`稍作修改以快速测试它）：

```
scala> def update( f: Int => Int => Double => Double ): Double = f(1)(2)(3.0)
update: (f: Int => (Int => (Double => Double)))Double

scala> update(i => j => _ => if (i == 0 && j == 0) 1.0 else 0.5)
res1: Double = 0.5 
```

**编辑：** Ase 在评论中解释，它并不完全有帮助，因为第一个参数仍然被装箱。我留下答案以跟踪它。

# .net - 使用 sql server 2008 GeoGraphy 在半径中搜索邮政编码

> ID：12087263
> 
> 赞同：0
> 
> 时间：2012-08-23T08:04:53.223
> 
> 标签：.net, sql-server-2008-r2, geospatial, geography, postal-code

我关注了这个博客 [http://blogs.lessthandot.com/index.php/DataMgmt/DataDesign/sql-server-2008-proximity-search-with-th] 并按照指导做了一切，我很高兴一切顺利，下面提到了我的表定义，下面也提到了我正在执行的查询。

我正在使用可从[https://www.ordnancesurvey.co.uk/opendatadownload/products.html下载的 CodePointData 数据](https://www.ordnancesurvey.co.uk/opendatadownload/products.html)

> 使用 [TestDb] 去
> 
> ```
> /****** Object:  Table [dbo].[PostCode]    Script Date: 08/23/2012 05:32:05 ******/
> SET ANSI_NULLS ON
> GO
> 
> SET QUOTED_IDENTIFIER ON
> GO
> 
> CREATE TABLE [dbo].[PostCode](
>     [PostCode] [nvarchar](10) NOT NULL,
>     [Coordinates] [geography] NOT NULL,
>     [Coordinates1] [geography] NULL,
>  CONSTRAINT [PK_PostCode] PRIMARY KEY CLUSTERED
> (
>     [PostCode] ASC
> )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) 
> ```
> 
> 开 [初级] ) 开 [初级]
> 
> ```
> GO
> 
> SELECT distinct(left(h.postcode,4))
> from postcode g
> join postcode h on g.postcode <> h.postcode
> and g.postcode ='IG1 4LF'
> and h.postcode <> 'IG1 4LF'
> Where g.coordinates.STDistance(h.coordinates)<=(1*1609.344)
> order by left(h.postcode,4) 
> ```

当我运行上述查询时，它提供了许多不属于该半径的邮政编码。我正在使用另一个站点[http://www.freemaptools.com/find-uk-postcodes-inside-radius.htm](http://www.freemaptools.com/find-uk-postcodes-inside-radius.htm)验证我的结果，这个站点说 1 英里半径包含邮政编码 IG1、IG2、IG3，但是当我我正在运行上述查询，我​​的结果是 E12、IG1、IG2、IG3、IG4、IG5、IG6。我无法找出为什么它在半径一英里内给了我这么多或邮政编码。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T23:53:18.580

当它们接近任一极时，经线之间的距离变为零。您可能会假设地球是平的（平面投影），因此赤道（或其他位置）的经度距离在整个地球上是恒定的。平坦地球假设会出错，这会导致距离计算在靠近两极的地方增加得过大。

# c# - C# 特化类的实例

> ID：12087264
> 
> 赞同：0
> 
> 时间：2012-08-23T08:05:03.057
> 
> 标签：c#, inheritance

我有一个问题，我一直在谷歌搜索，但找不到答案。

假设您有一个名为 Account 的类，它继承自一个名为 AccountInquiry 的类。

如果您有一个 AccountInquiry 实例，您能否将其转换为 Account 实例而不有效地复制它。如果不是什么是管理这个的最佳方法。

基本上有一点背景知识，当有人在我们的网站上填写基本的姓名/电子邮件表格时，会创建一个帐户查询，一旦他们完成此操作，他们就会看到第二个表格。如果填写第二张表格，则将帐户查询转换为帐户。

非常感谢

山姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T08:10:12.610

这听起来不像`Account`真的*是*一个`AccountInquiry`。这听起来更像是两个完全独立的类，即使它们具有一些相同的属性。

在使用继承之前要小心——考虑它是否*真的*合适。

在这种情况下，您`AccountInquiry`听起来像是一个真实的有效搜索条件`Account`-因此您可能应该有一些能够执行查询的*服务类，其方法如下：*

```
List<Account> FindAccounts(AccountInquiry inquiry) 
```

或者可能只是一个返回类型，`Account`如果只匹配一个帐户。这里没有进行“转换”——您只需使用一个对象的属性来查找另一个对象。

（我怀疑它真的应该是*询问*而不是顺便*询问*，但这是一个旁白。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:07:37.593

如果原始类（帐户）是 AccountInquiry 的向下转换，则只能向上转换，所以，不，这是不可能的。

复制是唯一的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T08:09:49.260

> 你能在不有效复制的情况下将其转换为 Account 的实例吗

在这种情况下，没有。`Account`可以降级，`AccountInquiry`但反之则不行。您可以使用[AutoMapper](https://github.com/AutoMapper/AutoMapper)之类的工具来更轻松地映射字段。

作为一种替代方法，您可以做的是创建一个可以完全消除问题`Account`的属性。`AccountInquiry`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T08:18:17.407

你不能，但是 ¿ 这个怎么样？

```
Account account = new Account();

account.CustomerID = 25;

account.MaxAmount = (decimal)5000.00; 
```

进而

```
((AccountInquiry)account).Method = "ListChanges";
((AccountInquiry)account).StartDate = DateTime.Today.AddDays(-10);
((AccountInquiry)account).EndDate = DateTime.Today; 
```

然后，如果您需要传递给他的参数应该是 Type 的任何方法，您可以。

# extjs4.1 - 如何在 extjs4 雷达图中使用渲染器功能

> ID：12087268
> 
> 赞同：0
> 
> 时间：2012-08-23T08:05:12.333
> 
> 标签：extjs4.1

我有一个包含 4 个雷达系列的雷达图，我想为每种类型使用渲染器功能。

我的示例代码是：

系列：[{类型：'雷达'，

```
 xField: 'name', 
    yField: 'data3', 
    renderer: function(storeItem, item, i, display){
        alert(storeItem)
    },
    showInLegend: true, 
    showMarkers : false,

    markerConfig: { 
        radius: 5, 
        size: 5            
    }, 
    style: { 
        'stroke-width': 2,
         stroke : '#FFF',
         fill: 'none' 
    } 
},{ 
    type: 'radar', 
    xField: 'name', 
    yField: 'data2', 
    showMarkers: true, 
    showInLegend: true, 
    markerConfig: { 
        radius: 5, 
        size: 5 
    }, 
    style: { 
        'stroke-width': 2,
         stroke : '#FF0',
        fill: 'none' 
    } 
},{ 
    type: 'radar', 
    xField: 'name', 
    yField: 'data5', 
    showMarkers: true, 
    showInLegend: true, 
    markerConfig: { 
        radius: 5, 
        size: 5 
    }, 
    style: { 
        'stroke-width': 2,
         stroke : '#0FF',
         fill: 'none' 
    } 
}] 
```

在哪里添加渲染功能？我尝试以所有可能的方式添加，但它不起作用。我做错了吗？或者雷达图没有这个功能？请有人告诉我我正在使用 extjs4.1.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T23:43:29.320

如有疑问，请 grep 来源。

该`renderer`函数从不在雷达图中调用。看起来像另一个文档错误。该`label.renderer`函数被调用，但它仅适用于格式化显示文本。

# jwplayer - JWPlayer 插件

> ID：12087270
> 
> 赞同：0
> 
> 时间：2012-08-23T08:05:17.937
> 
> 标签：jwplayer

我正在尝试开发 Flash 插件，它将在播放器上打印一些文本。我的问题是如何做到这一点？我的意思是有什么功能可以在播放器上放一些文字吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:43:36.443

JWPlayer 支持 SRT 文件（字幕），因此您可以创建此文件以将文本放在视频上，如果您需要生成这些文本，您可以使用 PHP 来完成，然后给出输出 url

你可以在他们的官方网站上找到更多关于如何添加字幕的信息

其他方式可以只是使用 CSS 和 Javascript 的组合在 videoplayer 容器上添加文本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T19:11:24.280

没有为播放器显示文本的内置功能，但您自己应该很容易做到。

首先，这是 JWPlayer用于创建 Flash 插件的[文档。](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/17677/flash-plugin-api-reference)

然后你想要做的是在插件的显示中添加一个精灵和一个文本字段。

首先，您需要在 .as 文件的开头导入相关的 flash 类。

```
import flash.text.TextField
import flash.text.TextFormat;
import flash.display.Sprite; 
```

然后你想创建一个 Sprite 和一个 TextField。将 TextField 放在 Sprite 中，将 Sprite 放在播放器的显示控件中。

```
var textHolderSprite:Sprite = new Sprite();
var displayText:TextField = new TextField();

displayText.width = 200; // set size of your text field
displayText.height = 300;
displayText.x = 50;//and position it.
displayText.y = 100;

displayText.text = "hello world";//set the text you want to display.
displayText.wordWrap = true; // wrap text if you want to.
displayText.selectable = false; //probably want to make it not selectable.
displayText.textColor = 0xFFFFFF; //set the text colour;

//bonus: set font size and alignment; look at TextFormat documentation for more options.
var displayTextFormat:TextFormat = new TextFormat();
displayTextFormat.size = "17";          
displayTextFormat.align = "center";
displayText.setTextFormat(displayTextFormat);

//put the TextField inside the sprite.
textHolderSprite.addChild(displayText);

//the following api object, is a com.longtailvideo.jwplayer.player.IPlayer object, as described in the JWPlayer plugin documentation.
var displayControl:MovieClip = (api.controls.display as MovieClip); //get the player's display control.
displayControl.addChild(textHolderSprite);//add youre sprite.

//When you're done with the text, don't forget to remove the sprite.
displayControl.removeChild(textHolderSprite); 
```

祝你好运！

# java - 你如何在 Java 中组织类源代码？

> ID：12087275
> 
> 赞同：5
> 
> 时间：2012-08-23T08:06:09.170
> 
> 标签：java

到目前为止，我的平均类包含大约 500 行代码和大约 50 个方法。IDE 是 Eclipse，我在其中打开了“保存操作”，以便方法按字母顺序排序，首先是公共方法，然后是私有方法。要在代码中查找任何特定方法，我使用“快速大纲”。如果需要，“Open Call Hierarchy”会显示方法的序列，因为它们一个一个地调用。

这种方法具有以下优点：

*   我可以开始输入新方法而无需考虑将其放置在代码中的何处，因为保存后它将由 Eclipse 自动放置到适当的位置。
*   我总是在代码的上部找到公共方法（不必在整个类中搜索它们）

但是也有一些缺点：

在将大方法重构为更小的方法时，我不太满意新的私有方法被放置在代码的不同部分，因此很难遵循代码概念。为了避免这种情况，我以一些奇怪的方式命名它们以使它们靠近每个，例如：showPageFirst()、showPageSecond() 而不是 showFirstPage()、showSecondPage()。

可能有一些更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T08:18:40.683

Organize your code for its audiences. For example, a class in a library might have these audiences:

1.  An API client who wants more detail on how a public method works.
2.  A maintainer who wants to find the relevant method to make a small change.
3.  A more serious maintainer who wants to do a significant refactoring or add functionality.

For clients perusing the source code, you want to introduce core concepts. First we have a class doc comment that includes a glossary of important terms and usage examples. Then we have the code related to one term, then those related to another, then those related to a third.

For maintainers, any pair of methods that are likely to have to change together should be close by. A public method and its private helper and any constants related to it only should show up together.

Both of these groups of users are aided by grouping class members into logical sections which are separately documented.

For example, a collection class might have several mostly orthogonal concerns that can't easily be broken out into separate classes but which can be broken into separate sections.

1.  Mutators
2.  Accessors
3.  Iteration
4.  Serializing and toString
5.  Equality, comparability, hashing

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T08:15:55.240

Don't worry about physically ordering your methods inside the class, if you can't see it just use Ctrl-O and start typing the method name and you will jump straight to it.

Having self-describing method names results in more maintainable code than artificially naming them to keep them in alphabetical order.

Hint: learn your shortcut keys and you will improve your productivity

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-23T08:14:59.027

好吧，命名您的方法以便它们更容易在您的 IDE 中发现确实不好。他们的名字应该反映他们所做的，仅此而已。

作为对您问题的回答，最好的办法可能是将您的类拆分为多个类，并隔离在每个此类中具有共同点的方法组。例如，如果您有

```
public void largeMethodThatDoesSomething() {
 //do A
 //do B
 //do C
} 
```

然后你已经重构了：

```
public void largeMethodThatDoesSomething() {
 doA();
 doB();
 doC();
}

private void doA() {};
private void doB() {};
private void doC() {}; 
```

您可以创建一个名为 SomethingDoer 的类，在其中放置所有这 4 个方法，然后在原始类中使用该类的实例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T08:09:37.913

组织你描述的方式听起来比我目前看到的 99% 的 Java 代码要好。但是，另一方面，请确保您的类不要增长太多并且方法不要太大。

类通常应少于 1000 行，方法应少于 150。

# php - 我需要从文本框中的名字和姓氏的前两个字母到页面中的某个位置

> ID：12087276
> 
> 赞同：-2
> 
> 时间：2012-08-23T08:06:18.287
> 
> 标签：php, javascript, jquery, html, css

我需要名字和姓氏的前两个字母，它将在像 Salman Shaikh 这样的文本框中输入，所以它会在我的页面中的某个位置作为 SASH 我需要这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:16:07.167

Here is live example with jQuery.

[http://jsfiddle.net/rPTrK/](http://jsfiddle.net/rPTrK/)

I'll paste the code in here also -

```
jQuery(document).ready(function() {
    jQuery("#submit").click(function() {
        var firstName = $("#name").val().substr(0, 2);
        var surname = $("#surname").val().substr(0, 2);
        $("body").append(firstName+surname);
    });        
});​ 
```

In case you don't know - jQuery is JS library. You can get it [here](http://jquery.com/) . Download the latest jquery release and insert it in your html/php file between the tags, just like you normally insert js scripts.

**Attention:** You must insert my created code only after you have inserted the jQuery library, otherwise it won't work.

**EDIT: Updated to your suggested version -**

[http://jsfiddle.net/pg8La/](http://jsfiddle.net/pg8La/)

Code -

```
jQuery(document).ready(function() {
    jQuery("#form1").change(function() {
        var firstName = $("#name").val().substr(0, 2);
        var surname = $("#surname").val().substr(0, 2);
        if(firstName != "" && surname != "") {
            $("body").append(firstName+surname);
        }
    });        
});​ 
```

**EDIT 2: Final example per your request -**

[http://jsfiddle.net/K52fR/](http://jsfiddle.net/K52fR/)

And code here -

**HTML**

```
<form id="form1">
    <input type="text" name="name" id="name" placeholder="name" />
    <br />
    <input type="text" name="surname" id="surname" placeholder="surname" />
    <br />
    <h2 id="text">WSCPP<span id="nameSurname"></span><span id="time"></span><span id="randomNr"></span></h2> 
</form>​ 
```

**jQuery/JS -**

```
jQuery(document).ready(function() {
    jQuery("#form1").change(function() {
        var firstName = $("#name").val().substr(0, 2);
        var surname = $("#surname").val().substr(0, 2);
        if(firstName != "" && surname != "") {
            $("#nameSurname").text(firstName+surname);
        }
    });        
    var currentTime = new Date(); 
    var month = currentTime.getMonth() + 1;
    var day = currentTime.getDate(); var year = currentTime.getFullYear();
    $("#time").text(day + "" + month + "" +year);
    $("#randomNr").text(Math.floor(Math.random()*90000+9999));
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:16:50.240

Check following for program

[http://jsfiddle.net/YNV87/](http://jsfiddle.net/YNV87/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T08:18:01.293

How about this:

```
$_REQUEST['firstname'] = 'Salman ';
$_REQUEST['lastname'] = 'Shaikh';

$firstname = strtoupper(substr($_GET['firstname'], 0, 2));
$lastname = strtoupper(substr($_GET['lastname'], 0, 2));

echo $firstname.$lastname; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T08:15:10.420

我假设您正在将数据发布到某个页面，这就是您`php` 的问题中有标签的原因。

```
$firstname = substr($_POST['firstname'],2);
$lastname = substr($_POST['lastname'],2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T08:16:34.687

Explode the string to an array.

```
$name_array=explode(' ',$name);
$first=substr(trim($name_array[0]),0,2);
$last=substr(trim($name_array[1]),0,2); 
```

# sql-server-2005 - 如何使用主键约束 VB6.0 & SQL Server 添加新记录

> ID：12087277
> 
> 赞同：0
> 
> 时间：2012-08-23T08:06:19.843
> 
> 标签：sql-server-2005, vb6

我想创建一个消息框，只要`txt_unit`等于`unit_no`数据库中的 就会触发。这是在数据库中插入新数据的过程中。我正在使用 VB6 和 SQL Server 2005。
这是我的代码：

```
If txt_unit.Text = 'same unit number that exist in the DB' Then
MsgBox "Duplicate Record", vbCritical, "Duplicate"  
txt_unit.Text = ""  
txt_unit.SetFocus 
```

这将在数​​据输入期间为用户节省时间。
提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T09:18:58.830

在浏览网页寻找答案后，我看到了这个解释 VB6 中的错误处理的网站。
我现在终于可以继续前进了。这是代码：

```
On Error GoTo err_CmdAdd_Click

con.Open _
    "Provider = sqloledb;" & _  
    "Data Source=server;" & _  
    "Initial Catalog=database;" & _  
    "User ID=username;" & _  
    "Password=password;"

If img_edit.BorderStyle = 1 Then

Set rs = con.Execute("insert into a_owner values('" & txt_unit.Text & "', " _
& " '" & txt_tower.Text & "'  )")

MsgBox "Record added successfully...", vbInformation

ado1.Refresh

exit_err_CmdAdd_Click:  
Exit Sub

err_CmdAdd_Click:

MsgBox "Duplicate Record!", vbCritical, "Duplicate"
txt_unit.Text = ""  
txt_unit.SetFocus

End If 
```

# java - xjc 类生成期间缺少超类；层次结构不一致错误

> ID：12087278
> 
> 赞同：1
> 
> 时间：2012-08-23T08:06:26.627
> 
> 标签：java, jakarta-ee, jaxb, xjc

我是 JAXB 新手。对于一个项目，我获得了带有 xsd 的绑定文件，以便我可以使用模式类。Jaxb 绑定文件（mainbindings.xjb）如下所示：

```
<jxb:bindings version="2.0">
   <jxb:bindings schemaLocation="main.xsd" node="/xsd:schema">  
      <jxb:globalBindings fixedAttributeAsConstantProperty="true" collectionType="com.example.Impl" choiceContentProperty="false" typesafeEnumMemberName="generateName" enableFailFastCheck="false" generateIsSetMethod="true" underscoreBinding="asWordSeparator">
         <xjc:serializable uid="100"/>
         <xjc:superClass name="com.example.mySuperClass"/>
         <jxb:javaType name="java.util.Calendar" xmlType="xsd:dateTime" parseMethod="javax.xml.bind.DatatypeConverter.parseDateTime" printMethod="javax.xml.bind.DatatypeConverter.printDateTime"/>
      </jxb:globalBindings>
   </jxb:bindings>
</jxb:bindings> 
```

我生成的类没有使用 xjc 编译器错误：

**xjc -b mainbindings.xjb -b main.xsd -extension**

从这个站点，我了解到编译器不会生成超类： http: [//blog.frankel.ch/customize-your-jaxb-bindings](http://blog.frankel.ch/customize-your-jaxb-bindings)

但是，当我在 eclipse 项目下复制这些类时，我在大多数每个类上都看到以下错误： **类型的层次结构不一致**

我用谷歌搜索了这个错误，并从这个站点（http://java.syntaxerrors.info/index.php?title=Inconsistent_hierarchy）发现如果超类不存在，那么这个错误就会弹出。我按照这里的建议尝试了刷新，但错误仍然存​​在。

另外，如果 xjc 不生成超类，如果我不手动创建随机超类，怎么能解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:36:29.000

该扩展旨在让您生成的类扩展现有类。您将需要提供此类。顺便说一句 - 您目前如何尝试使用此扩展程序？

# php - 按大于今天的日期对 SQL 结果排序 (dMY)

> ID：12087284
> 
> 赞同：1
> 
> 时间：2012-08-23T08:06:41.313
> 
> 标签：php, mysql

在我的 sql 查询中，我按时间顺序输出日期。

我数据库中的日期以 dMY 格式存储。

我想要做的是按等于或大于今天的日期对结果进行排序，以便首先输出。

在我的查询中，我的查询中有这种排序

```
...From $db ORDER BY STR_TO_DATE(sortdate, '%d-%M-%Y') ASC 
```

谁能告诉我是否可以在今天的日期进行比较，因为每条记录都是从数据库输出的？

这会给我今天的日期

```
$todaysdate = date("d-M-Y", time()); 
```

但是谁能告诉我是否可以将其构建到我的查询中？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:08:20.953

`DATEDIFF`结合`CURRENT_DATE`==> 检查mysql [http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_current-date](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_current-date)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:08:32.070

您确实应该以 dateTime 格式存储日期。这将使执行各种订单、比较和许多其他事情变得更加容易*。*例如，您可以使用 mysql`now()`函数仅获得您需要的结果吗？

```
...From $db where sortDate>=now() ORDER BYsortdate ASC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T08:11:26.933

我的猜测是您将日期保存在 VARCHAR 列中。请不要那样做，当你想对日期做一些事情（像这样）时，你会让自己变得非常复杂。我建议您将该列转换为 DATE 字段，然后使用：

```
SELECT * FROM my_table WHERE my_date_field >= CURDATE() 
```

如果你想以 dmY 格式输出日期，你可以使用 DATE_FORMAT()

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T08:16:51.777

假设 sortdate 是 datetime 字段，为了首先显示等于或大于今天的日期，可以使用 UNION。

```
SELECT * FROM my_table WHERE sortdate>= CURDATE()
UNION
SELECT * FROM my_table WHERE sortdate< CURDATE() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T08:10:08.637

您可以使用`WHERE sortdate >= $todaysdate`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-23T08:17:36.043

只需将此条件放在 date_column >= curdate()/$todaysdate 之类的位置

谢谢

# php - android中的Base64和mcrypt_encrypt

> ID：12087288
> 
> 赞同：2
> 
> 时间：2012-08-23T08:06:47.187
> 
> 标签：php, android, encryption, base64, nosuchmethoderror

我需要使用密钥在 android 中加密某个文本。在 PHP 中，加密代码如下所示

```
$this->securekey = hash('sha256',$textkey,TRUE);
$this->iv = mcrypt_create_iv(32, MCRYPT_DEV_URANDOM);
return base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $this->securekey, $input, MCRYPT_MODE_ECB, $this->iv)); 
```

对于 Base64，我在 Netbeans 中为我的 Android 应用程序添加了来自 apache.org (commons-codec-1.6.jar) 的 commons 编解码器。代码中没有错误。但是当我运行应用程序并调用使用编解码器的函数时，应用程序停止并需要前关闭。

在 logCat 中说：

```
Android Runtime: java.lang.NoSuchMethodError: 
org.apache.commons.codec.binary.Base64.decodeBase64 
```

这是我的代码：

```
public static String crypt(String input, String key){
            byte[] crypted = null;
            try{
                SecretKeySpec skey = new SecretKeySpec(org.apache.commons.codec.binary.Base64.decodeBase64(key), "AES");
                Cipher cipher = Cipher.getInstance("AES/ECB/PKCS5Padding");
                cipher.init(Cipher.ENCRYPT_MODE, skey);
                crypted = cipher.doFinal(input.getBytes());
            }catch(Exception e){
            }
           return org.apache.commons.codec.binary.Base64.encodeBase64String(crypted);
        } 
```

我不确定我的代码是否与 PHP 代码进行相同的加密。我在 Android 和 PHP 之间找到了这个链接[http://www.androidsnippets.com/encrypt-decrypt-between-android-and-php](http://www.androidsnippets.com/encrypt-decrypt-between-android-and-php)但它不使用 Base64，仅用于 mcrypt_encrypt。谁能帮我获得与 PHP 服务器相同的加密。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T17:58:13.790

您的错误仅仅是因为您忘记将 Apache 编解码器库添加到您的运行时环境。仅仅针对它进行编译是不够的；该库需要实际*存在*于 Android 设备上。

您无法使用默认的 Java 库在 Android 上获得相同的加密，您可能需要 Bouncy Castle 库。您示例中的 PHP 代码使用块大小为 32 字节的 Rijndael。AES 是 Rijndael 的子集，块大小为 16 字节。`MCRYPT_RIJNDAEL_128`这在 PHP mcrypt 中被称为。

其他一些实现细节：

*   ECB 不使用 IV（现在我已经用更好的东西替换了默认的 mcrypt_encrypt 样本）；
*   mcrypt_encrypt 不执行 PKCS5Padding，我认为它使用空格；
*   `input.getBytes()`不可移植，使用平台默认编码，可能与PHP编码不同；

最后是一些安全警告：

*   仅在密码上使用 SHA-256 被认为是不安全的，请使用 PBKDF2；
*   ECB被认为是不安全的，使用CBC；
*   `MCRYPT_DEV_URANDOM`不安全（这基本上意味着 PHP 加密毫无价值，最好使用 PHP openssl 包装器）；

祝你好运！

# c# - 在 Winform 的组合框中获取旧的选定索引

> ID：12087290
> 
> 赞同：7
> 
> 时间：2012-08-23T08:06:57.810
> 
> 标签：c#, winforms, combobox

我有一个组合框（winform）。此组合框有一些项目（例如 1、2、3、4）。

现在，当我更改此组合中的选择时，我想知道**旧索引**和**新索引**。

我怎么得到这个？

我希望**避免**的可能方法。

1.  添加一个**输入事件**，缓存当前索引，然后在选择索引更改时获取新索引。

2.  使用事件发送者收到的选定文本/选定项属性。

**我理想中想要的：**

1.  在收到的事件参数中，我想要类似的东西：

    e.旧索引；e.新索引；

    现在，在**SelectionIndex Change 事件**中收到的事件参数完全没用。

2.  我不想使用多个事件。

3.  如果 C# 不提供此功能，我可以让我的事件将旧索引和新索引作为事件参数传递吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T08:18:39.077

似乎这是一个可能的重复

[ComboBox SelectedIndexChanged 事件：如何获取之前选择的索引？](https://stackoverflow.com/questions/3237885/combobox-selectedindexchanged-event-how-to-get-the-previously-selected-index)

> 没有内置任何内容，您需要监听此事件并在类变量中跟踪。

但是这个答案似乎暗示了一种扩展组合框以跟踪先前索引 [https://stackoverflow.com/a/425323/81053的明智方法](https://stackoverflow.com/a/425323/81053)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-04T08:41:10.963

1-制作整数列表
2-绑定一个按钮以切换到上一个屏幕（按钮名称“prevB”）
3-按照代码中的描述更改组合框索引

```
//initilize List and put current selected index in it

List<int> previousScreen = new List<int>();
previousScreen.Add(RegionComboBox.SelectedIndex);    

//Button Event
 private void prevB_Click(object sender, EventArgs e)
    {
        if (previousScreen.Count >= 2)
        {
            RegionComboBox.SelectedIndex = previousScreen[previousScreen.Count - 2];
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-06T10:10:24.077

您需要将 ComboBox 替换为以下控件：

```
public class AdvancedComboBox : ComboBox
{
    private int myPreviouslySelectedIndex = -1;
    private int myLocalSelectedIndex = -1;

    public int PreviouslySelectedIndex { get { return myPreviouslySelectedIndex; } }

    protected override void OnSelectedIndexChanged(EventArgs e)
    {
        myPreviouslySelectedIndex = myLocalSelectedIndex;
        myLocalSelectedIndex = SelectedIndex;
        base.OnSelectedIndexChanged(e);
    }
} 
```

现在你可以得到`PreviouslySelectedIndex`财产。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-29T15:55:02.733

您可以使用 YourComboBox.Tag （或其他未使用的字符串/int 属性）来存储旧的选定索引...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-09T11:23:17.447

我用这样的一对

comboBox.SelectedItem 新项目

comboBox.SelectionBoxItem 旧项目

# c - EOF 重定向文件或从标准输入获取输入

> ID：12087293
> 
> 赞同：-1
> 
> 时间：2012-08-23T08:07:09.910
> 
> 标签：c

我设计了一个带有一些状态转换的解析器。现在我想将一个文件重定向到我在 C 中创建的解析器中以提供令牌。

我的设计是这样的，我需要在我的字符串末尾有一个空格（''），也就是说，我需要在从文件或标准输入中读取的字符串后面附加一个空格字符。但问题是索引。为了从我需要做的文件重定向

```
int length=0;

while((c1=getchar())!=EOF)
{
a[length]=c1;
length ++;
}
a[length-1]=' ';
a[length]=EOF; 
```

从标准输入读取时，我需要做

```
int length=0;
while((c1=getchar())!=EOF)
{
a[length]=c1;
length ++;
}
a[length]=' ';
a[length+1]=EOF; 
```

输入既可以来自标准输入输入，也可以来自文件重定向（例如 ./a.out < ac）现在我如何根据输入类型将这些合并到我的代码中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T08:13:26.723

首先，两者`cat data | ./a.out`产生`./a.out < data`完全相同的效果，即程序`stdin`读取文件。

也许您想要的是类似`./a.out data`. 为此，我建议这样的循环：

```
void process_my_data(FILE *);  // main logic here!

int main(int argc, char * argv[])
{
    if (argc == 1)
    {
        process_my_data(stdin);
    }
    else
    {
        while (--argc)
        {
            FILE * f = fopen(argv[argc], "rb");
            process_my_data(f);
            fclose(f);
        }
    }
} 
```

# tridion - HTTP 上传给出 403 错误

> ID：12087295
> 
> 赞同：0
> 
> 时间：2012-08-23T08:07:20.800
> 
> 标签：tridion

我们正在为 Tridion 5.3 SP1 环境设置新的 Content Delivery 服务器。根据说明手册中的说明，为 HTTPS 上传创建新网站。当我们使用 localhost:20000/httpupload.asp 从内容交付服务器浏览 httpupload 网站时，有时会出现 500 错误，有时会出现 403 错误。有人可以让我们确切知道我们是否出错了。即使我们尝试从不同的机器访问 httpupload.asp 也会出现 500 错误。

注意：修改权限授予 IUSR 和 IWAM 用户在工作文件夹上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:59:22.603

Make sure you have enabled directory browsing in IIS.

Also make sure that the 'asp' extension is present in the Extensions in IIS.

# iphone - 核心数据：获取背景并在主线程上使用 objectWithID，性能优势？

> ID：12087302
> 
> 赞同：1
> 
> 时间：2012-08-23T08:07:39.317
> 
> 标签：iphone, objective-c, ios5, core-data

我最近阅读了核心数据编程指南，Apple 建议我们这样做

> 您在后台线程上获取一个托管对象上下文，并将获取的对象的对象 ID 传递给另一个线程。在第二个线程（通常是应用程序的主线程，以便您随后可以显示结果）中，您使用第二个上下文在具有这些对象 ID 的对象中出错（您使用 objectWithID: 来实例化对象）。（此技术仅在使用 SQLite 存储时才有用，> 因为来自二进制和 XML 存储的数据在打开时会立即读入内存。）

据我了解，在后台上下文中获取不会在主线程上下文中注册托管对象，因此从 objectWithID 返回的托管对象很可能是错误的。当我们在主线程上使用它时，我们将触发新一轮的 SQLite Store 之旅。所以用户界面可能被阻止了。

我错过了什么吗？有没有办法避免主线程上的 I/O 开销？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T12:57:53.630

当您在后台执行 fetch 然后使用 objectID 在主线程上执行 fetch 时，不会听到太多声音。首先，记录将在 CoreData 缓存中，这使得主线程上的相同获取更快，其次，使用 objectID 获取比使用平均获取请求获取快得多。您通常会创建一个后台获取请求，找到您正在寻找的对象的 objectID，然后将这些 objectID 移动到主线程。当然，对于后台线程，您必须使用与主线程不同的 NSManagedObjectContext 实例。

我建议您查看 WWDC 2010 视频“掌握核心数据”。它涉及核心数据和多线程，解释了在后台/主线程上缓存和获取的性能。

# css - HTML div bg 颜色超出屏幕

> ID：12087309
> 
> 赞同：0
> 
> 时间：2012-08-23T08:08:00.813
> 
> 标签：css, html, background, styles

我想创建一个`<div>`具有背景颜色的元素，它从屏幕中间开始向右移动到页面末尾（屏幕外），但我不想触发任何滚动条。`<div>`我想在开头（在屏幕内）有一些信息`<div>`。
这是 HTML 代码示例：

```
<div id="footer">
   <h2>Information</h2>
   <p>Some text</p>
   <p class="alignright">Another information in this paragraph.</p>
</div> 
```

这就是我希望它的样子：

[http://postimage.org/image/h60apjfjf/](http://postimage.org/image/h60apjfjf/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:12:04.520

你不能只使用身体的css背景图像来达到那个效果吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:12:46.567

你可以这样做：

```
#footer {
    float: right;
    width: 50%;
    background-color: blue;
    overflow: hidden;
}​ 
```

溢出隐藏不是必需的，但如果出现滚动条，则不会。

**编辑：**例如：http: [//jsfiddle.net/8nu68/](http://jsfiddle.net/8nu68/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T08:15:30.220

您可以通过将页脚 div 包装在另一个 div 中来做到这一点。这不仅允许您完全定位页脚 div，而且还允许您将页脚 div 放在外面而不生成滚动条或显示溢出。

例如：

```
<div id="footer-wrapper">

    <div id="footer">

        <h2>Information</h2>
        <p>Some text</p>
        <p class="alignright">Another information in this paragraph.</p>

    </div>

</div>

#footer-wrapper { width:300px; height:100px; position:relative; overflow:hidden; }
#footer { position:absolute: top:50px; left:50%; width:300px; } 
```

等等

position:relative 表示带有 position:absolute 的页脚 div 将使用包装器作为位置参考。溢出：隐藏将阻止滚动条并隐藏溢出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T08:24:30.213

CSS 会让你轻松做到这一点。类似于以下内容：

```
#footer {
   background-color: #b0c4de;
   width: 50%;
   height: 20px;
   float: right;
} 
```

这是一个很好的资源：[http ://www.w3schools.com/css/default.asp](http://www.w3schools.com/css/default.asp)

# java - 用 x 个块迭代列表并从每个块中挑选出 y 个元素

> ID：12087311
> 
> 赞同：0
> 
> 时间：2012-08-23T08:08:01.680
> 
> 标签：java, hibernate, list, persistence, loops

我没有一个聪明或至少可行的想法如何解决以下挑战：

我有 198 个作业，让每个作业由 10 个人解决，然后我使用 Java hibernate & persistence API 在 PostgreSQL 数据库中编写所有内容。到目前为止效果很好。

有时我对一项作业确实有 10 个不同/不同的答案 - 对于其他作业，我只有 2 或 3 个不同/不同的答案（例如，对于“什么是 5 + 5”的作业，8 人告诉“10”，2 人告诉“25”）

现在我运行一条 SQL 语句来获得一个包含我的作业和不同答案的列表：

```
 SELECT DISTINCT question, answer FROM survey INNER JOIN results ON results.survey_id=results.id; 
```

我现在得到的是一个看起来或多或少像这样的结果列表：

```
+---------+----------+--------+
| ID      | Question | Answer | 
+---------+----------+--------+
| 1       | Q1      | 20      |
| 2       | Q1      | 22      | 
| 3       | Q1      | 25      | 
| 4       | Q1      | 21      | 
| 5       | Q1      | 22      | 
| 6       | Q1      | 10      | 
| 7       | Q1      | 20.5    |
| 8       | Q1      | 22.3    |
| 9       | Q1      | 28      |
| 10      | Q1      | 26      |
| 11      | Q2      | 52      |
| 12      | Q2      | 51      |
| 13      | Q3      | 78      |
| 14      | Q3      | 80      |
| ...     | ...     | ...     |
| ...     | ...     | ...     |
| ...     | ...     | ...     |
+---------+---------+---------+ 
```

现在具有挑战性的部分：

我现在想从每个作业（Q1、Q2、Q3 ......）中随机挑选 4 个不同的答案（如果可能），并创建一个新作业，人们必须对最佳答案进行投票。

但如图所示，有时我的作业确实有少于 4 个不同的答案。在这种情况下，我想拿走所有可用的东西。

我如何遍历我的列表并执行这种“挑选”？

PS随机选择答案并不是很重要-选择前4个答案也可以。

感谢你的帮助

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:15:21.500

如果结果集那么小，我会

```
// if random is needed [see here][1] to adapt the criteria
var answers = session.createCriteria(Answer.class)
    .setFetchMode("Question", FetchMode.eager)
    .list<Answer>();

// map of orginal question to voting question
Map<Question, Question> questions = new Hashmap<Question, Question>();
for (Answer answer : answers)
{
    if (questions.ContainsKey(answer.getQuestion()))
    {
        Question votingQuestion = questions.get(answer.getQuestion());
        if (votingQuestion.getPossibleAnswers().Count() < 4)
            votingQuestion.getPossibleAnswers().add(answer.Text);
    }
    else
    {
        Question votingQuestion = createVotingQuestion(answer.getQuestion());
        votingQuestion.getPossibleAnswers().add(answer.Text);
        questions.add(answer.getQuestion(), votingQuestion);
    }
} 
```

# android - 警报对话框省略

> ID：12087314
> 
> 赞同：0
> 
> 时间：2012-08-23T08:08:21.213
> 
> 标签：android, dialog, alert

如果字符串太长，是否可以在警报对话框中显示所有文本？当它太长时，对话框不会显示整个消息，而是会添加一个**省略号** `...`

我的代码是：

```
builder = new AlertDialog.Builder(this);

builder.setMessage("Do you want to play the game again.")
.setPositiveButton("OK", new DialogInterface.OnClickListener() {
public void onClick(DialogInterface dialog, int id) {
    //Do Something for OK
}
.setNegativeButton("No", new DialogInterface.OnClickListener() {
public void onClick(DialogInterface dialog, int id) {
    //Do Something for No                   
}
}
});
alert = builder.create();
alert.show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:21:48.297

创建一个 ScrollView 并将其添加到 AlertDialog，然后在其中显示您的文本。就像是：

```
AlertDialog alertDialog = new AlertDialog.Builder(this).create();
String str = getString(R.string.text); 
final ScrollView s_view = new ScrollView(getApplicationContext());
final TextView t_view = new TextView(getApplicationContext());
t_view.setText(str);
t_view.setTextSize(14);     
s_view.addView(t_view);
alertDialog.setTitle("Title");
alertDialog.setView(s_view); 
```

这里 ScrollVies 包含一个 TextView ，其中包含来自 的文本`R.string.test`，并且该 ScrollView 被设置为对话框的内容视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:13:11.180

我认为你必须手动截断你的字符串。

这是一个可以帮助您的链接：

[http://www.java2s.com/Tutorial/Java/0040__Data-Type/TruncateaStringtothegivenlengthwithnowarningsorerrorraisedifitisbigger.htm](http://www.java2s.com/Tutorial/Java/0040__Data-Type/TruncateaStringtothegivenlengthwithnowarningsorerrorraisedifitisbigger.htm)

# java - Java 搜索字符串是否存在

> ID：12087317
> 
> 赞同：0
> 
> 时间：2012-08-23T08:08:27.310
> 
> 标签：java, arrays, search

我正在尝试确定当前数组中是否已经存在用户输入的值，该怎么做？

用户输入的值来检查变量是 **accno**并且要比较的数组是 **accnums**

这就是我目前正在做的事情

```
public class Randomtopic {

    static BigDecimal[] accbal = new BigDecimal[20];
    static Integer[] accnums = new Integer[20];

    public static void main(String[] args) {
        displayMenu();
    }

    public static void displayMenu() {
        int option, accno;
        double accbal;
        Scanner sc = new Scanner(System.in);
        System.out.println(" Add an account");
        System.out.println("Search an account with the given account number");
        System.out.print("Enter Your Choice: ");
        option = sc.nextInt();
        switch (option) {
            case 1:
                System.out.println("You have choosen to add account");
                addAccount();
                break;
            case 2:
                System.out.println("You have choosen to search for an account");
                System.out.print("Enter the Account Number: ");
                accno = sc.nextInt();
                System.out.println(search(accno, accnums));
                break;
            default:
                System.out.println("Please choose an appropriate option as displayed");
        }
        displayMenu();
    }

    public static void addAccount() {
        //String accno;
        int i = 0;
        int accno, input;
        BigDecimal accbala;
        DecimalFormat df = new DecimalFormat("0.00");
        //BigDecimal[] accbal= new BigDecimal[20];
        Scanner sc = new Scanner(System.in);
        //String[] accnums = new String[20];
        int j;
        System.out.print("Enter the account number: ");
        accno = sc.nextInt();
        if (String.valueOf(accno).matches("[0-9]{7}")) {
            System.out.print("Enter account balance: ");
            accbala = sc.nextBigDecimal();
            for (j = 0; j < accnums.length; j++) {
                if (accnums[j] == null )
             break;
         else if(accnums[j].equals(accno))
         {
              System.out.println("Account already exists");
         }
            }
            //System.out.print(j);
            if (j == accnums.length) {
                System.out.print("Account storage limit has reached.");

            } else {

                    accnums[j] = accno;
                    accbala = accbala.setScale(2, RoundingMode.HALF_UP);
                    accbal[j] = accbala;

            }
            input = accnums[0];
            System.out.println("The value: " + input + " witha a balance of " + accbal[0].toString());
        } else {
            System.out.println("Wrong NRIC");
        }
        displayMenu();
    }

    public static String search(int accnum, Integer[] numbers) {
        // Integer[] numbers;
        //int key;
        //numbers = accnums;
        // System.out.print("Enter the Account Number: ");        
        for (int index = 0; index < numbers.length; index++) {
            if (numbers[index].equals(accnum)) {
                return String.valueOf(index);
                // System.out.println("The account number exists in this array index :"+index);//We found it!!!
            }
            break;
        }
        return "-1";
    }
} 
```

所以我的问题？当我第一次输入 accnum 时，我得到 NullPointerException。Tks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:11:23.083

你`accnums`充满了`null`价值观。检查它们是否不是`null`。我想你是从方法`NullPointerException`中抛出的。`search`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:19:27.503

如果我正确理解了您的代码，则您有多个帐户具有由帐号标识的关联余额。在这种情况下，我会使用 Map 而不是摆弄数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T08:23:14.270

当您第一次运行方法搜索时，您的数组`accnums`中填充了空值，因此当您调用 line 时，`if ( numbers[index].equals(accnum))`您正在尝试在 null 对象上调用 equal 方法，

您可以做的是将`accnums`数组从数组更改为列表，然后大小将取决于数字元素，所以它不会像你的数组那样有固定的大小

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T08:42:48.683

您的代码中的问题没有在您正在搜索的 accnum 中添加任何内容。所以您的 accnum 包含 NULL 值。如果您将 accnum 数组更改为列表/哈希图，则不会出现异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T17:20:04.153

当您实例化或创建一个数组时，这些值默认设置为 null；每当您遍历可能为空值的数组时，都需要跳过这些。例如，

```
for(loop conditions)
        if (numbers[index] != null && (numbers[index].equals(accnum))) {
            return String.valueOf(index);
            //your text goes here;
        }
        break;//I suggest you take this line out of your original code. Your for loop will end this once you have iterated through the entire array, or you will automatically break out if you find the value.
} 
```

如果您必须使用数组，那么这是迭代它的最佳方式。if 子句中的括号和 && 阻止您执行 .equals 检查 numbers[index] == null 的值 - 反过来，防止抛出 null 错误。您唯一的选择是将 numbers[ ] 中的每个值设置为 0 或其他值，而不是在迭代时跳过该值。这将通过静态最终 int 来完成。但是，这不是理想的编码。

理想情况下，您应该使用 ArrayList - 这样您不仅可以使其更高效，而且更具可读性。

# c++ - 使用成员函数 top() 从 priority_queue 获取元素

> ID：12087319
> 
> 赞同：0
> 
> 时间：2012-08-23T08:08:29.720
> 
> 标签：c++, stl, iterator, priority-queue

祝大家有美好的一天！我有：

*“A类.h”*

```
class ClassA
{
....
public:
priority_queue<OBJECT*, vector<OBJECT*>, compound_objectNS::compare>  m_prior_queue_Objects; 
....
} 
```

*“B类.h”*

```
class ClassB
{
void someFunction(void);
ClassA* m_network;
} 
```

*“B类.cpp”*

```
void ClassB::someFunction(void)
{
vector<Compound_object*>::const_iterator vit;
vit = this->m_network->m_prior_queue_Objects.top(); 
```

*   在这里我从 iSense 得到 -**错误没有运算符“=”匹配这个操作数**。怎么了？！}

更新：typedef Compound_object* OBJECT*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:13:04.243

`priority_queue::top()`返回对元素的 const 引用，并且您正在尝试分配给迭代器。你可以做两件事：

从 const 引用实例化一个（const 或 non-const）指针：

```
OBJECT* p = priority_queue::top(); 
```

从返回中实例化对指针的 const 引用。

```
const OBJECT*& r = priority_queue::top(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:12:11.917

`top`的声明：

```
const value_type& top ( ) const 
```

* * *

所以，`top`会返回`const OBJECT*&`到“top”对象。

您正在尝试将其分配给`vector<Compound_object*>::const_iterator`.

`vit`将 's type更改为`const OBJECT*`以编译它。

* * *

您不能遍历`priority_queue`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T08:14:09.093

`m_prior_queue_Objects.top()`和的类型`vit`不同，所以`operator=`不能使用。

# sencha-touch - 动态填充 Sencha Touch 选择器

> ID：12087321
> 
> 赞同：1
> 
> 时间：2012-08-23T08:08:32.467
> 
> 标签：sencha-touch

我在我的一个移动项目中使用 Sencha Touch。作为它的组件之一，我正在使用 Picker。我知道选择器值是从“数据”属性中获取的，该属性是一个包含对象的数组，如下所示：

```
[{"text":"One","value":1},{"text":"Two","value":2},{"text":"Three","value":3}] 
```

但是我需要做的是 - 用从商店动态生成的数组中的值填充选择器。有人可以帮我解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:09:01.977

使用[Ext.Picker.Slot](http://docs.sencha.com/touch/2-0/#!/api/Ext.picker.Slot)允许您向其中添加 Ext.data.Store。该商店将使您能够从服务器获取数据，并且将填充 Picker 插槽。

这是 Sencha 文档中给出的内容：

```
A general picker class. Ext.picker.Slots are used to organize multiple 
scrollable slots into a single picker. slots is the only necessary configuration.

The slots configuration with a few key values:

name: The name of the slot (will be the key when using 
getValues in this Ext.picker.Picker)
title: The title of this slot (if useTitles is set to true)
data/store: The data or store to use for this slot.
Remember, Ext.picker.Slot class extends from Ext.dataview.DataView. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T06:08:17.983

```
{   
    xtype:'picker',
    width:'100%',
    height:'100%',
    id:'chooseLocationRoomListPicker',
    baseCls:'pickerCls',
    cancelButton: false,
    doneButton: false,
    toolbar:false,
    slots : [{
             name:'chooseLocationRoomListPickerList',
             store: Ext.getStore('roomStore'),
             displayField: 'level',
             valueField: 'id',
             align:'center',
             value:'202'
    }]
} 
```

# android - Android：将应用程序使用的所有 SharedPreferences 重置为默认值

> ID：12087328
> 
> 赞同：3
> 
> 时间：2012-08-23T08:09:04.497
> 
> 标签：android, preferences, reset

在我的应用程序中，首选项由`SharedPreferences`. 我需要重置为应用程序默认值。

我知道如何重置特定的所有值`SharedPreferences`：

```
SharedPreferences prefs = getSharedPreferences(
      "name_of_the_preferences_file",
      MODE_PRIVATE
      );

SharedPreferences.Editor editor = prefs.edit();

editor.clear();
editor.commit(); 
```

但问题是只有一个特定首选项“name_of_the_preferences_file”的首选项被重置。当然，所有其余的偏好都不会受到影响。

那么，如何实现完全的默认重置呢？

最好获取所有首选项文件的名称，然后一一重置。

但理想情况下，我希望以编程方式销毁所有应用程序数据。这可能是最好的变体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:51:18.393

原始答案：请参阅[删除共享首选项](https://stackoverflow.com/questions/3687315/deleting-shared-preferences)

编辑：您说“我需要重置为应用程序默认值”。该链接提供了解决方案：您没有提到重置所有应用程序的所有首选项。您无法从您自己的应用程序中删除其他应用程序的首选项，因为共享首选项存储在一个文件中，您的应用程序对包含这些文件的目录没有写入权限

# c# - 具有排序可能性的文本用户控件

> ID：12087337
> 
> 赞同：0
> 
> 时间：2012-08-23T08:10:02.210
> 
> 标签：c#, winforms, sorting, user-controls, richtextbox

我需要控制`winforms`每秒可以添加数十行。我现在使用`richtextbox`，但我正在寻找具有排序可能性的东西（根据一些数据时间或整数）

添加的行只是几个 int 和 datetime 的自定义对象复合体。

延迟方面在这里非常重要。

**编辑：**

它也可以是一些表格/网格，但我想这需要太多时间（搜索现有行并将新行插入适当的位置）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T20:23:55.467

`RichTextBox`通常会在管理、搜索和插入方面提供更多开销。

更合适的是像`ListView`. 它可以更简单地控制排序、滚动等。

此外，ListView 具有处理虚拟数据支持的能力。如果性能或内容大小是一个问题，这将使您只需担心当前显示在 ListView“视图”窗口中的子集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:37:20.397

两个选项 像现在一样使用 RichTextBox 将数据保存在类似 SortedList 的结构中，控件将从该结构中更新。或者，您可以使用网格，格式化网格的外观以删除行和列网格线，并且每条新线都将被附加这种方式，您可以让用户通过单击标题进行排序...

至于每秒添加十行，我很确定这两个控件都可以处理比这更多的流量......

# c# - 如何在 Unity 中注册用于传递对象实例的辅助类

> ID：12087347
> 
> 赞同：0
> 
> 时间：2012-08-23T08:10:33.917
> 
> 标签：c#, dependency-injection, unity-container

我有一个场景，我需要使用辅助类注入一个类型的实例。在我们的系统中，我们目前正在使用 Unity 将该对象注入到各个层中。

这是我目前拥有的：

```
container.RegisterInstance<ITest, new Test()>(); 
```

但不是那样，我想使用一个帮助类来为我创建实例：

```
container.RegisterInstance<ITest, Helper.GetITestIntance()>(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T08:41:32.443

```
container.RegisterType<ITest>(
    new ContainerControlledLifetimeManager(),
    new InjectionFactory(o => Helper.GetITestIntance())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:17:34.040

According to this: [http://social.msdn.microsoft.com/Forums/en/wpf/thread/b71665b9-cc71-4c88-9776-6ccb4f871819](http://social.msdn.microsoft.com/Forums/en/wpf/thread/b71665b9-cc71-4c88-9776-6ccb4f871819) there does not seem to be a direct way. You can either register an instance that will be used, or register a "Type" that the container will instantiate on his own at some moments when it is required. There does not seem to be any way to register a "factory", nor the Type-registering methods do not take any delegates/callbacks..

There **could** be some way with use of Container Extensions - maybe you will be able to intercept the query for an instance and then provide your own response.. I think this a good place to start reading on it:

[http://visualizationtools.net/default/unity-objectbuilder-part-i/](http://visualizationtools.net/default/unity-objectbuilder-part-i/)
[http://visualizationtools.net/default/unity-objectbuilder-part-ii/](http://visualizationtools.net/default/unity-objectbuilder-part-ii/)

edit: sorry, sorry, I've overlooked the `LifetimeManager` registration paramter. It seems this is exactly what you are looking for: [http://tavaresstudios.com/Blog/post/Writing-Custom-Lifetime-Managers.aspx](http://tavaresstudios.com/Blog/post/Writing-Custom-Lifetime-Managers.aspx)

So, write a factory in form of LifetimeManager, the creation would be done in GetValue method, and register a Type with your this Manager - and the Unity will ask the manager for object instances.

# codeigniter - phpass 不工作

> ID：12087348
> 
> 赞同：1
> 
> 时间：2012-08-23T08:10:34.863
> 
> 标签：codeigniter, passwords, bcrypt, phpass

我在创建帐户时对密码进行哈希处理，并且它可以工作（密码设置为 VARCHAR(60)）但是当我尝试这样做时：

```
 $query = $this->CI->db->query("SELECT * FROM users WHERE email = ?", $email);

    if ($query->num_rows() > 0) {
        $user_pass = $query->row()->password;

        $hasher = new PasswordHash(PHPASS_HASH_STRENGTH, PHPASS_HASH_PORTABLE);

        if ($hasher->CheckPassword($user_pass, $pass)) {
            return true;
        } else {
            return false;
        }
    } else {
        return false;
    } 
```

它总是返回假。关于为什么会这样的任何想法？（我提供的密码是正确的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:02:48.177

我认为您已经反转了检查密码字段。它必须是这样的：

```
$hasher->CheckPassword(password which has to be checked, password from database). 
```

这会有所不同，因为 Check Password 将对要检查的密码进行哈希处理。

# ruby - 获取文件更改的最新提交

> ID：12087349
> 
> 赞同：4
> 
> 时间：2012-08-23T08:10:36.483
> 
> 标签：ruby, git, rugged

我手头的任务是弄清楚最后一次提交的提交 ID 是什么，特定文件在哪里更改。我正在使用红宝石/坚固耐用。我想出的唯一解决方案是遍历所有提交，在树中搜索与该文件的提交相关联的文件，并将该文件 oid 与第一个（最新）提交的文件的 oid 进行比较：

```
def commit_oid commit, file
    commit.tree.walk( :postorder ) { | root, obj |
        return obj[ :oid ] if "#{root}#{obj[ :name ]}" == file 
    }

    raise "\'#{file}\' not found in repository"     
end

def find_last_commit file
    johnny = Rugged::Walker.new( get_repository )
    johnny.push get_repository.head.target

    oid = commit_oid johnny.first, file
    old_commit = johnny.first.oid

    johnny.each do | commit |
        new_oid = commit_oid commit, file

        return old_commit if new_oid != oid

        old_commit = commit.oid 
    end

    old_commit
end 
```

这可行，但似乎很复杂。必须有一种更简单的方法来获取信息，“提交改变了什么”。有没有更简单、更直接的方法来完成同样的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T08:47:19.063

运行`$ git log <file>`将为您提供仅更改给定文件的提交的反向时间顺序日志。`$ git whatchanged <file>`将做同样的事情，添加一行更改的详细信息（即模式更改，更改类型）。它非常适合视觉目的，但不适合脚本。

如果您只需要最近提交的哈希，则以下内容将很好地工作：`$ git rev-list --max-count 1 HEAD <file>`

# c# - 在运行时确定变量名

> ID：12087354
> 
> 赞同：0
> 
> 时间：2012-08-23T08:10:54.520
> 
> 标签：c#, .net, wpf, string

您如何确定变量的名称并在运行时访问它？例如，如果我有两个字符串：

```
string A = "This is A!";
string B = "This is B!"; 
```

我在文本框中输入 A，然后我想使用消息框显示 A 的内容。

```
MessageBox.Show(A); //Variable A is retrieved from the textbox input 
```

这是可以通过反射实现的吗？如果没有，我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:27:47.553

我不明白，你到底会得到什么，但你可以使用这样的表达：

```
 static void PrintVariableName<T>(Expression<Func<T>> expression)
    {
        Console.WriteLine(((MemberExpression)expression.Body).Member.Name);
    }

    static void Main(string[] args)
    {
        var a = "Hello, world!";

        PrintVariableName(() => a);
    } 
```

你能描述具体的用例而不是概念问题吗？

# java - 为添加到列表的元素执行循环体

> ID：12087360
> 
> 赞同：0
> 
> 时间：2012-08-23T08:11:31.447
> 
> 标签：java, collections

我想将循环中的元素添加到列表中，这样循环体也将为它们执行。我知道这种技术很常见，以防止`ConcurrentModificationException`：

```
List<Element> thingsToBeAdd = new ArrayList<Element>();
for(Iterator<Element> it = mElements.iterator(); it.hasNext();) {
    Element element = it.next();
    if(...) {  
         //irrelevant stuff..
        if(element.cFlag){
            // mElements.add(new Element("crack",getResources(), (int)touchX,(int)touchY));
            thingsToBeAdd.add(new Element("crack",getResources(), (int)touchX,(int)touchY));
            element.cFlag = false;
       }           
   }
}
mElements.addAll(thingsToBeAdd ); 
```

不幸的是，它不会为新元素执行循环。

编辑：

```
List<Element> thingsToBeAdd = new ArrayList<Element>();
for(Iterator<Element> it = mElements.iterator(); it.hasNext();) {
    Element element = it.next();
    if(...) {  
        //irrelevant stuff..
        if(element.cFlag){
            // mElements.add(new Element("crack",getResources(), (int)touchX,(int)touchY));
            thingsToBeAdd.add(new Element("crack",getResources(), (int)touchX,(int)touchY));
            element.cFlag = false;
       }           
   }
   mElements.addAll(thingsToBeAdd );
} 
```

这将导致`ConcurrentModificationException`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:15:34.853

你不是在`mElements`循环完成后添加元素吗

```
mElements.addAll(thingsToBeAdd ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:28:37.093

你试过`CopyOnWriteArrayList`吗？

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CopyOnWriteArrayList.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CopyOnWriteArrayList.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T09:00:30.040

我使用递归实现了我的目标：

```
private List<Element> executeForEachElement(List<Element> oldList)
    List<Element> newElements = new LinkedList<Element>();
    for (Element elem : oldList {
            newElements.addAll(generateNewElements(elem));
    }
    if (!newElements.isEmpty()) {
        oldList.addAll(executeForEachElement(newElements));
    }

    return oldList;
} 
```

# objective-c - 使用 Objective C 显示地图

> ID：12087361
> 
> 赞同：1
> 
> 时间：2012-08-23T08:11:32.467
> 
> 标签：objective-c, uiview, webview, maps

我正在使用此代码创建此地图：

```
 AGSTiledMapServiceLayer *tiledLayer =        [AGSTiledMapServiceLayer         
tiledMapServiceLayerWithURL:[NSURL URLWithString:@"http://server.arcgisonline.com/ArcGIS/rest/services/ESRI_StreetMap_World_2D/MapServer"]];        [self.mapView addMapLayer:tiledLayer withName:@"Tiled Layer"];       
[self addSubView:mapView];

return self; 
```

我正在返回自我并希望像这样显示它：

```
 Mymap *myMap = [[Mymap alloc] initWithFrame:CGRectMake(20,20, 100, 100)];    
[self.webView addSubView:myMap]; 
```

什么都没有发生……有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:01:26.613

使用情节提要或 xib。然后，添加 uiview 在其上添加 mapview。现在，通过控件拖动将此 mapOutlet 连接到特定类。而且，就是这样，它会在您的设备上向您显示地图。

# c# - 文本绑定到本地属性：验证不起作用

> ID：12087363
> 
> 赞同：0
> 
> 时间：2012-08-23T08:11:47.303
> 
> 标签：c#, wpf, validation, binding

我是 WPF 新手并且有一个（在我看来）奇怪的问题：我想将本地属性（名称：XmlText）绑定到 TextBox.Text 属性并使用如下验证规则验证值：

```
<TextBox Height="23" Width="301" Margin="78,14,0,0" Name="tbXMLFile" HorizontalAlignment="Left" VerticalAlignment="Top" TextChanged="tbXMLFile_TextChanged">
    <TextBox.Style>
        <Style TargetType="{x:Type TextBox}">
            <Style.Triggers>
                <Trigger Property="Validation.HasError" Value="true">
                    <Setter Property="ToolTip"
                            Value="{Binding RelativeSource={RelativeSource Self},
                                            Path=(Validation.Errors),
                                            Converter={StaticResource ErrorsToStringConverter}}"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </TextBox.Style>
    <TextBox.Text>
        <Binding Path="XmlText" UpdateSourceTrigger="PropertyChanged">
            <Binding.ValidationRules>
                <local:RegexValidationRule Dateiendung="xml"></local:RegexValidationRule>
            </Binding.ValidationRules>
        </Binding>
    </TextBox.Text>
</TextBox> 
```

每次我的属性 XmlText 获得一个新值时，验证不会做任何事情，但如果我在我的 TextBox 中手动输入文本，它会验证。

如果我删除 TextChanged-Event 或将以下代码添加到事件中，验证将不再起作用：

```
XmlText = ((TextBox)sender).Text; 
```

有人可以解释为什么程序会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:41:47.920

真正的问题是 ValidationRules：它们不是为做你所想的而设计的！看看这篇文章，了解更多细节：http: [//msdn.microsoft.com/en-us/library/system.windows.controls.validationrule.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.validationrule.aspx)

（当您使用 WPF 数据绑定模型时，您可以将 ValidationRules 与您的绑定对象相关联。要创建自定义规则，请创建此类的子类并实现 Validate 方法。或者，使用内置的 ExceptionValidationRule，它会捕获以下异常在源更新期间抛出，或 DataErrorValidationRule，它检查源对象的 IDataErrorInfo 实现引发的错误。绑定引擎在每次传输输入值（即绑定目标属性值）时检查与绑定关联的每个 ValidationRule , 绑定源属性。）

如果您`System.ComponentModel.IDataErrorInfo`在绑定对象的类中实现接口，您将捕获任何验证（分配绑定属性以及来自 UI）。

它们只是两种方法，我向您展示了一个带有您的属性的示例：

```
public class TestObject : INotifyPropertyChanged, IDataErrorInfo
{
    private string _xmlText;

    public string XmlText
    {
        get
        {
            return _xmlText;
        }
        set
        {
            if (value != _xmlText)
            {
                _xmlText = value;
                NotifyPropertyChanged("XmlText");
            }
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void NotifyPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (null != handler)
            handler(this, new PropertyChangedEventArgs(propertyName));
    }

    public string Error
    {
        get { throw new NotImplementedException(); }
    }

    public string this[string columnName]
    {
        get
        {
            string result = null;
            if (columnName == "XmlText")
            {
                if (XmlText.Length > 5)
                    result = "Too much long!";
            }
            return result;
        }
    }
} 
```

现在您的绑定验证应该可以完美运行：

```
<TextBox.Text>
    <Binding Path="XmlText"
             UpdateSourceTrigger="PropertyChanged"
             ValidatesOnDataErrors="True"
             Mode="TwoWay" />
    </Binding>
</TextBox.Text> 
```

# python - 使用 os.walk 在文件中搜索字符串

> ID：12087366
> 
> 赞同：2
> 
> 时间：2012-08-23T08:11:56.143
> 
> 标签：python

我编写了一个 Python 脚本来从目录中的每个文件中找出包含特定脚本的行。如果我让这个脚本在包含这些文件的目录中运行，它工作正常。

```
#!/usr/bin/env python
import os

def searchthis(location, searchterm):
    for fname in os.listdir(location):
        fullpath = os.path.join(location, fname)
        for line in file(fullpath):
            if searchterm in line:
                print line

searchthis(os.getcwd(), "mystring") 
```

有什么办法可以做到这一点，`os.walk`并在所有目录和子目录中存在的每个文件中递归搜索。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T08:34:12.323

您可以使用这样的简单迭代器：

```
def all_files(dir):
    for root, dirs, files in os.walk(os.path.abspath(dir)):
        for f in files:
            yield os.path.join(root, f) 
```

例如：

```
 for path in all_files(os.getcwd()):
     with open(path) as f:
         for n, line in enumerate(f, 1):
             if term in line:
                 print path, n 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T08:33:49.220

```
#!/usr/bin/env python

import os

def searchthis(location, searchterm):
   for dir_path, dirs, file_names in os.walk(location):
      for file_name in file_names:
         fullpath = os.path.join(dir_path, file_name)
         for line in file(fullpath):
            if searchterm in line:
                print line

searchthis(os.getcwd(), "mystring") 
```

# asp.net - 从html锚标签C#中获取href值

> ID：12087367
> 
> 赞同：2
> 
> 时间：2012-08-23T08:11:58.840
> 
> 标签：asp.net, c#-4.0

如何使用 C# 仅从 html 锚标记中获取 href 值谢谢

```
string ref="<a href="http://www.google.com"></a>";
//i want get result from 
//string ref like 
//http://www.google.com 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T08:14:23.237

您可以使用 HTML 解析库，例如[Html Agility Pack](http://htmlagilitypack.codeplex.com/)。例如：

```
using System;
using HtmlAgilityPack;

class Program
{
    static void Main()
    {
        var doc = new HtmlDocument();
        doc.LoadHtml("<a href=\"http://www.google.com\"></a>");
        var nodes = doc.DocumentNode.SelectNodes("a[@href]");
        foreach (var node in nodes)
        {
            Console.WriteLine(node.Attributes["href"].Value);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T09:15:31.043

如果您想在没有**HtmlAgilityPack**的情况下执行此操作，则可以使用**正则表达式**执行此操作：

```
 string ref= @"<a href=""http://www.google.com"">test</a>";
 var regex = new Regex("<a [^>]*href=(?:'(?<href>.*?)')|(?:\"(?<href>.*?)\")", RegexOptions.IgnoreCase);
 var urls = regex.Matches(ref).OfType<Match>().Select(m => m.Groups["href"].Value).SingleOrDefault(); 
```

希望它可以帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T08:26:44.653

使用[htmlagilitypack](http://htmlagilitypack.codeplex.com/)。

```
 var url= @"<a href="http://stackoverflow.com" ></a>";
    HtmlDocument document = new HtmlDocument();
    document.LoadHtml(url);
    var tempValue= document.DocumentNode.SelectSingleNode("//a");
    var link= tempValue.Attributes["href"].Value; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-07T10:06:14.307

如果您需要锚链接以及锚文本，那么您可以使用以下函数返回包含 HTML 字符串中所有锚（URL；文本）的字符串列表。

```
 public static List<string> ExtractLinks(string htmlString)
    {
        List<string> list = new List<string>();
        string anchorStart = "<a";
        string anchorEnd = "</a>";
        string anchorText = string.Empty;
        Regex regex = new Regex("(?:href)=[\"|']?(.*?)[\"|'|>]+", RegexOptions.Singleline | RegexOptions.CultureInvariant);
        if (regex.IsMatch(htmlString))
        {
            foreach (Match match in regex.Matches(htmlString))
            {
                try
                {
                    string strURL = match.Groups[1].Value; // should contain the HRF URL 

                    int baseIndex = htmlString.IndexOf(strURL); // Get the Start Index of current URL.                       

                    // Start from baseindex and finc the fisrt instance of "<a" which should be the start of anchor
                    int anchorStartIndex = htmlString.LastIndexOf(anchorStart, baseIndex, StringComparison.CurrentCultureIgnoreCase);

                    // Find the end index of anchor 
                    int anchorEndIndex = htmlString.IndexOf(anchorEnd, anchorStartIndex, StringComparison.CurrentCultureIgnoreCase);

                    // The actual anchor text would be found b/w ">"  and "</a>" so need to find the index of ">"
                    int indexofanchorTextStart = htmlString.LastIndexOf(">", anchorEndIndex);

                    //find the substring b/w ">" and "</a>"
                    anchorText = htmlString.Substring(indexofanchorTextStart + 1, anchorEndIndex - indexofanchorTextStart - 1);
                    anchorText = HttpUtility.HtmlDecode(anchorText);

                    // get Full anchor from start to end
                    // string substringAheadAnchor = htmlString.Substring(anchorStartIndex, anchorEndIndex - anchorStartIndex + anchorEnd.Length + 1);

                }
                catch (Exception ex)
                {
                    // Log Exception in parsing the anchor Text 
                }

                if (!list.Contains(match.Groups[1].Value + ";" + anchorText))
                {
                    list.Add(match.Groups[1].Value + ";" + anchorText);// Append URL and Text using semicolun as seperator.  
                }
            }
        }

        return list;
    } 
```

# google-app-engine - 创建 datastore.Key 的成本：将 key 存储在 struct 与 id 中并从数据存储中获取

> ID：12087374
> 
> 赞同：1
> 
> 时间：2012-08-23T08:12:13.287
> 
> 标签：google-app-engine, google-cloud-datastore, go

考虑以下两种选择。

A）将密钥存储在结构中。

```
type Point struct {
    Place *datastore.Key
    Lat   float64
    Lon   float64
} 
```

然后使用密钥获取：

```
place := new(Place)
if err := datastore.Get(c, k, point.Place); err != nil {
    return err
} 
```

B) 存储 id

```
type Point struct {
    Place int64
    Lat   float64
    Lon   float64
} 
```

然后在创建密钥后获取。

```
k := datastore.NewKey(c, "Place", "", point.Place, nil)
place := new(Place)
if err := datastore.Get(c, k, place); err != nil {
    return err
} 
```

存储密钥而不是 id 会占用更多空间。为了看到权衡，最好了解创建密钥需要多少资源。换句话说，创建密钥真的很便宜，还是创建一次并存储它更好？

使用单个键，可能无关紧要，但是假设我获取点列表，并且对于每个点，我都想检索该位置（即循环遍历点以构建键数组并获取它们）。

编辑：我没有考虑在这里分配 ID 或键，只使用它们（即所有点和位置都已经在数据存储中，问题只是存储 id 还是整个键）。

前动画，亚历山大·英灵

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:34:53.897

Key 基本上只是一组属性的包装器：种类、ID/名称、父键、命名空间。

因此，从种类和 ID 创建密钥不需要任何成本，因为这是本地操作（不需要数据存储）。

OTOH，密钥分配确实需要成本，因为这会创建一个具有唯一 ID 的密钥，并且这需要在后台查询数据存储。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T14:55:27.660

我认为彼得给出了一个很好的答案，但这里涉及到两件事：

1.  您似乎在问从 ID 生成密钥并存储 ID 以节省存储成本或存储实际密钥是否更便宜。从 ID 生成密钥是一个非常简单的散列，几乎可以忽略不计——您可能需要担心许多更重要的事情。我不能说它要花多少钱，但你可以做一个非常简单的实验，循环几十万次并估算成本。它可能比存储便宜，但我怀疑它会非常重要。

2.  困难的部分是生成唯一 ID，您没有在问题中包含该 ID。为此，获取保证唯一的数据存储密钥可能更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T21:42:51.587

如前所述，创建密钥几乎没有成本；因此，您会选择存储 ID，这样可以节省一些存储成本。存储密钥的好处是它被键入到 id 实际指向的内容，并且可以防止代码中可能出现的错误。例如，如果您存储了 ID，则可以检索该 ID，然后在代码中为错误的实体创建密钥，如果您存储了密钥，则无需担心该错误。并且以数据存储为代价，存储 ID 和 Key 的差异可能可以忽略不计，您花在思考上的时间更有价值。

# php - php 执行停止 simplexml_load_string() 错误

> ID：12087380
> 
> 赞同：0
> 
> 时间：2012-08-23T08:12:22.903
> 
> 标签：php

我有这个从谷歌 API 加载谷歌天气的 php 脚本。

```
<?php

      //Weather Forecast icon and temperature from google weather API

      $setYourLanguage = "en"; // Possibilities: "en" - english; "ru" - russian; "ka" - georgian;
      //WEATHER, read google XML weather forecast
      $URL = "http://www.google.com/ig/api?weather=".$myCity."&hl=".$setYourLanguage."";

      $dataInISO = file_get_contents($URL);
      $dataInUTF = mb_convert_encoding($dataInISO, "UTF-8", "ISO-8859-2"); //fix Google's API UTF-8 bug
      $xml = simplexml_load_string($dataInUTF); 

      $current = $xml->xpath("/xml_api_reply/weather/current_conditions");
      $iconData = str_replace("/ig/images/weather/", "weather/",  $current[0]->icon['data']);
      $iconData = str_replace(".gif", ".png", $iconData);

?> 
```

但有时页面无法加载，我在 apache2 日志中收到错误：

```
[Thu Aug 23 12:04:16 2012] [error] [client ::1] PHP Warning:  simplexml_load_string(): Entity: line 1: parser error : Start tag expected, '<' not found in /Library/WebServer/Documents/wordpress/wp-content/themes/directorypress/homepage-structure.php on line 23
[Thu Aug 23 12:04:16 2012] [error] [client ::1] PHP Warning:  simplexml_load_string(): Unsupported API in /Library/WebServer/Documents/wordpress/wp-content/themes/directorypress/homepage-structure.php on line 23
[Thu Aug 23 12:04:16 2012] [error] [client ::1] PHP Warning:  simplexml_load_string(): ^ in /Library/WebServer/Documents/wordpress/wp-content/themes/directorypress/homepage-structure.php on line 23
[Thu Aug 23 12:04:16 2012] [error] [client ::1] PHP Fatal error:  Call to a member function xpath() on a non-object in /Library/WebServer/Documents/wordpress/wp-content/themes/directorypress/homepage-structure.php on line 25
[Thu Aug 23 12:05:57 2012] [error] [client ::1] What 
```

任何想法为什么会发生这种情况？我的理论是它无法正确连接到 URL 并以这种方式失败......但是为什么页面加载停止了？有没有办法避免这个错误？并允许页面完全加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:17:42.773

如果 SimpleXml 无法加载 XML，则变量的值`$xml`是`false`而不是 type 的实例`SimpleXMLElement`。也就是说，错误消息所说的内容：

> [Thu Aug 23 12:04:16 2012] [error] [client ::1] PHP 致命错误：在 /Library/WebServer/Documents/wordpress/wp-content 中的非对象上调用成员函数 xpath() /themes/directorypress/homepage-structure.php 第 25 行

因此，您应该在访问对象上的函数之前进行检查。

```
if ($xml) {
      $current = $xml->xpath("/xml_api_reply/weather/current_conditions");
      $iconData = str_replace("/ig/images/weather/", "weather/",  $current[0]->icon['data']);
      $iconData = str_replace(".gif", ".png", $iconData);
} 
```

然后您的页面将完全加载，即使从 web 服务加载 XML 失败。

# android - 如何从 android 应用程序中的任何 url 流式传输视频？

> ID：12087383
> 
> 赞同：0
> 
> 时间：2012-08-23T08:12:44.890
> 
> 标签：android, youtube, video-streaming, vimeo

我想使用媒体播放器从任何网址播放视频。我发现，可以使用 rtsp url 播放 youtube 视频，但不能在 app 中播放其他视频，例如 vimeo 视频。有什么方法可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:34:21.563

不幸的是 Vimeo 不提供对 RTSP 的支持，您可以使用 flash 来实现这一点，因为 Android 支持 flash，并且可以通过 WebView 和简单的 HTML 轻松添加

另外，请记住，通过非 Vimeo 播放器播放 Vimeo 视频通常会违反其 TOS。

# php - 使用简单 XML 解析 XML 字符串时丢失标签和数据

> ID：12087385
> 
> 赞同：0
> 
> 时间：2012-08-23T08:12:53.220
> 
> 标签：php, xml, parsing, simplexml, zoho

我遇到了一个小问题。我正在使用 Zoho CRM API，它以如下格式返回给我一个 XML：

```
<response uri="/crm/private/xml/Contacts/getRecords">
    <result>
        <Contacts>
            <row no="1">
                <FL val="Contact Owner">
                    <![CDATA[ Kristo Vaher ]]>
                </FL>
                <FL val="Lead Source">
                    <![CDATA[ Partner ]]>
                </FL>
            </row>
        </Contacts>
    </result>
</response> 
```

当我通过 simplexml_load_string() 创建一个 XML 对象时，它将为我提供新对象中的大部分 XML，但它不会为我提供 FL 标记（CDATA 元素）的“内部”字符串，即实际感兴趣的数据我。

我的新 SimpleXML 对象只有以下数据：

```
[1] => SimpleXMLElement Object
    (
        [@attributes] => Array
            (
                [val] => Contact Owner
            )

    ) 
```

我最好的猜测是，这是因为 XML 不应该真正以这种方式构建，我在某处读到，如果 XML 标记具有属性，则不能在 XML 标记中包含内部内容，反之亦然（这是正确的吗？）。

我的替代方案是什么？自己编写解析器并不是一个真正的选择。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:20:33.677

获取属性：

```
foreach ($value->attributes() as $key => $val){
    // get all attributes
} 
```

获取数据：

```
echo (string) $load->result->Contacts->row->FL[0]; 
```

# git - 如何忽略提交中显示的文件列表

> ID：12087391
> 
> 赞同：0
> 
> 时间：2012-08-23T08:13:17.087
> 
> 标签：git, bitbucket, egit, jgit

我刚刚将项目从 Bitbucket(GIT) 导入 Eclipse。它工作得很好。当我再次请求 Pull 时，它说一切都是最新的。

但是，如果我尝试提交同一个项目，即使没有更改代码中的任何内容，它也会尝试将所有内容都提交回来。因为我相信它们不应该出现在提交中，因为它们没有被改变。如何标记它们它们没有改变。

# heroku - 白色导航栏，Bootstrap 中的放置问题

> ID：12087395
> 
> 赞同：2
> 
> 时间：2012-08-23T08:13:25.767
> 
> 标签：heroku, twitter-bootstrap, sinatra

今天我想在 Heroku 上的 Sinatra 应用程序中安装 Twitter Bootstrap。不幸的是，有一些显示问题：导航栏是白色而不是黑色，并且内容的位置不正确。

我使用来自 www.bootstrapcdn.com 的 Bootstrap 版本。我的应用在这里：[http](http://sultry-depths-9340.herokuapp.com/) ://sultry-depths-9340.herokuapp.com/ 这是我的 layout.haml： http: [//pastebin.com/zWQ6H5st](http://pastebin.com/zWQ6H5st)

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T10:41:49.710

新版本的引导程序（2.1.0）使用白色导航栏，现在是默认的。你可以使用`<div class="navbar navbar-inverse">`它变成深色背景。

# python - Python pdb - 如何更改“l”命令列出的默认行？

> ID：12087398
> 
> 赞同：3
> 
> 时间：2012-08-23T08:13:36.787
> 
> 标签：python, list, line, default, pdb

我正在尝试从原始 pdb 程序调试我的 python，而不是通过 emacs 运行 pdb（它在代码的文本显示中使用标记跟踪当前行）。pdb 中的 list 命令 l 只显示几行代码，这有点烦人，我宁愿让它在我的终端中填充当前函数的所有代码，直到当前行。

我知道我可以通过查看输入 l 50,100 （其中 100 是当前行）的行号来手动执行此操作，但这很耗时，我想将其设置为自动工作。

我想知道是否有办法定义一个 pdb 命令来做到这一点？我猜它需要（1）访问当前行的编号N；然后 (2) 执行“l N-50, N”。我已经搜索了很多，但找不到以前这样做过的人。也许有一种方法可以访问 pdb 模块自己的内部来获取行号？

（或者一种迂回的方法是编写一次调用 list 的东西，解析输出以提取当前行，然后执行一个新的 list 命令，我想知道是否有人已经这样做了？这是 IDE 设法获取当前行的方式来自 pdb 的信息还是我想知道他们是否在使用它的内部？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:20:37.687

您可能可以扩展 PDB 类，但扩展接口的文档记录不是很好。

如果我正确理解您的用例，我会建议使用[pdb++](http://pypi.python.org/pypi/pdbpp/)及其**粘性**功能，它几乎可以满足您的需求。

# javascript - Google Map API v3 未显示

> ID：12087401
> 
> 赞同：-1
> 
> 时间：2012-08-23T08:13:52.823
> 
> 标签：javascript, google-maps-api-3

我尝试将此脚本添加到我的 html 页面：（**它是一个临时链接，已被删除）**（此脚本单独工作正常，当我将其添加到我的 html 时它不显示地图）

它计算距离并显示结果，但地图未显示。

出发下方的城市文本框是地址1，到达下方的城市文本框是地址2。该地图应该显示在带有 id: map_canvas 的 div 标签中，但它没有显示。我尝试添加和删除表单标签，更改布局等，但没有任何效果。

如果有人能帮我解决这个问题，我会很高兴。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:20:02.260

将您的`width`and`height`属性设置`map_canvas`为绝对值，例如`400px`.

不能告诉你确切的原因，但它会出现。可能是因为 x% of nothing（因为最初 div 中没有内容）等于什么都没有，并且当您将地图添加到其中时，div 不会刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:40:31.590

这是你的身高设置。尝试

```
 <div id="map_canvas" style="width:100%; height:500px;"></div> 
```

另请参阅此[jsFiddle](http://jsfiddle.net/j3fFg/)

# python - Python，数据库结果用 ('result') 保存

> ID：12087405
> 
> 赞同：0
> 
> 时间：2012-08-23T08:14:00.553
> 
> 标签：python, mysql

我使用简单的代码从我的数据库中选择了一些 url

```
def crearArchivo(self):
        #Se conecta a la base de datos
        db = MySQLdb.connect("localhost","root","","proyectoacademias" )

        cursor = db.cursor()

        #Selecciona la lista de valores que no hayan sido procesados
        sql = "SELECT url_paper_web FROM acw_papers_web WHERE finalizado = 0"

        cursor.execute(sql)

        #Recibe todos los datos
        datos = cursor.fetchall()

        #Crea el archivo
        archivo = open('urls.txt','w')
        archivo.close()

        #Lo abre
        archivo = open('urls.txt','w')

        #Establece un contador para determinar el numero de filas
        contador=0;

        #Para cada fila la guarda en el archivo y si no es la ultima agrega un salto de linea
        for columna in datos:

            contador+=1;

            archivo.write(str(columna))

            if(contador!=len(datos)):
                archivo.write("\n") 

        #Se cierra todo
        archivo.close()
        db.close() 
```

这种方法将这些链接放在一个文件中......问题是这些链接不是像 http://google.com 那样保存，而是像（'http://google.com'）一样保存

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:16:36.137

每个`columna`变量实际上是一行，而不是一列。只需选择该行中的第一个值：

```
archivo.write(columna[0]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:19:10.513

那是因为 columna 是一个[元组](http://docs.python.org/tutorial/datastructures.html)。看起来您想编写第一个（在这种情况下，是唯一的元素）：

```
archivo.write(columna[0]) 
```

# mongodb - mongodb索引（反向）优化

> ID：12087416
> 
> 赞同：12
> 
> 时间：2012-08-23T08:14:25.390
> 
> 标签：mongodb, optimization, indexing

我有一个 mongodb 集合，“功能”，有 3 个字段：名称、活动、重量。我将按权重降序对特征进行排序：

```
db.features.find({active:true},{name:1, weight:1}).sort({weight:-1}) 
```

为了优化，我为它创建索引：

```
db.features.ensureIndex({'active': 1, 'weight': -1}) 
```

`explain()`我可以看到它在查询中使用时效果很好。

但是，当我通过权重升序查询它时，我想我刚刚创建的索引将不起作用，我需要创建另一个权重升序索引。询问：

```
db.features.find({active:true},{name:1, weight:1}).sort({weight:1}).explain() 
```

当我使用 explain() 显示索引如何工作时，我发现它打印出来：

```
"cursor" : "BtreeCursor active_1_weight_-1 reverse", 
```

索引反向是否意味着查询已被索引优化？

一般来说，如果我将按重量在某些情况下升序和在其他情况下降序对它进行排序，我是否需要创建 2 个索引，例如按重量升序和按重量降序？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-16T15:13:16.190

我知道我迟到了，但我想补充一点细节。当您使用 explain() 并输出 cursor: BtreeCursor 时，它并不总是保证仅使用索引来满足您的查询。您还必须检查 explain() 结果中的“indexOnly”选项。如果 indexOnly 输出为 true，则表示仅使用索引就可以满足您的查询，并且根本没有引用集合中的文档。这称为*“覆盖索引查询”* [http://docs.mongodb.org/manual/applications/indexes/](http://docs.mongodb.org/manual/applications/indexes/)

但是如果explain的结果是cursor:BtreeCursor和indexOnly:false，则说明除了使用索引之外，还引用了集合。在您的情况下，对于查询：

```
 db.features.find({active:true},{name:1, weight:1}).sort({weight:1}).explain() 
```

Mongo 会使用索引 'active': 1, 'weight': -1 来满足查询的初始部分，即 db.features.find({active:true}) 并且会在不使用索引的情况下完成排序。因此，要准确了解，您必须查看 explain() 中的 indexOnly 结果。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-23T08:40:20.200

从本[文档](http://www.mongodb.org/display/DOCS/Explain#Explain-OutputFields)可以看出，当`explain()`输出时`BtreeCursor`，表示使用了索引。使用索引时，会设置 indexBounds 以指示在索引中扫描的键边界。但是，如果 putput 显示`BasicCursor`，则表示表扫描样式操作。

因此，根据您所说的，从`explain()`结果中，您可以看到您在`BTree Cursor`名为的索引上使用了 a ，`active_1_weight_-1`并且`reverse`意味着您正在以相反的顺序迭代索引。

所以不，您不需要创建单独的索引。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-02T02:51:02.403

这很令人困惑。在 mongodb 类中有一个示例，请参见下文。

### 注意 BtreeCursor reverse 仅用于在跳过和限制命令中进行排序

### 不是为了查找记录。

### 教训是如果 nscan =40k 并且 n=10 意味着 btree 索引不用于定位记录。

### 因此，当您看到 btreecursor 索引反向时，并不一定意味着索引习惯于定位 reocrd。

假设您有一个名为 tweets 的集合，其文档包含有关推文时间的created_at 和用户发布推文时的followers_count 的信息。您可以从以下解释输出中推断出什么？db.tweets.find({"user.followers_count":{$gt:1000}}).sort({"created_at" : 1 }).limit(10).skip(5000).explain() { "cursor" ：“BtreeCursor created_at_-1 reverse”，“isMultiKey”：假，“n”：10，“nscannedObjects”：46462，“nscanned”：46462，“nscannedObjectsAllPlans”：49763，“nscannedAllPlans”：49763，“scanAndOrder”：假，“indexOnly”：假，“nYields”：0，“nChunkSkips”：0，“millis”：205，“indexBounds”：{“created_at”：[[{“$minElement”：1}，{“$maxElement”：1}]]}，“server”：“localhost.localdomain:27017”}此查询执行集合扫描。yes 查询使用索引来确定返回结果文档的顺序。yes 查询使用索引来确定哪些文档匹配。否 查询返回 46462 个文档 否 { "$maxElement" : 1 } ] ] }, "server" : "localhost.localdomain:27017" } 此查询执行集合扫描。yes 查询使用索引来确定返回结果文档的顺序。yes 查询使用索引来确定哪些文档匹配。否 查询返回 46462 个文档 否 { "$maxElement" : 1 } ] ] }, "server" : "localhost.localdomain:27017" } 此查询执行集合扫描。yes 查询使用索引来确定返回结果文档的顺序。yes 查询使用索引来确定哪些文档匹配。否 查询返回 46462 个文档 否 yes 查询使用索引来确定返回结果文档的顺序。yes 查询使用索引来确定哪些文档匹配。否 查询返回 46462 个文档 否 yes 查询使用索引来确定返回结果文档的顺序。yes 查询使用索引来确定哪些文档匹配。否 查询返回 46462 个文档 否

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T08:34:09.233

假设您使用的是 2.0+，那么反向遍历对 MongoDB 来说成本并不高，因此对于这种情况，您不需要为正向/反向排序创建单独的索引。如果您愿意，可以通过创建它并使用[hint()](http://www.mongodb.org/display/DOCS/Optimization#Optimization-Hint)来确认（优化器将缓存当前索引一段时间，因此不会自动选择其他索引）。

# android - 带有文本和按钮的 Listactivity 单击奇怪的行为

> ID：12087417
> 
> 赞同：0
> 
> 时间：2012-08-23T08:14:31.453
> 
> 标签：android, android-intent

我有一个 listactivity 应用程序，每一行包含 TEXT 和 BUTTON，文本和按钮都必须是可点击的（我试图得到它），当单击文本时它将打开 MyDay 活动，当单击按钮时它将打开 My_videos 活动。

当您打开应用程序并单击任何按钮时会发生什么，它不会在所有行中的任何按钮中单击操作，但是当您单击任何行文本时，它将打开 MyDay 活动，然后 **仅单击第一行**中的任何按钮，它将打开 My_videos 活动，即 videoview，但同时其他按钮在其余行中不可点击。

任何建议将被认真考虑 ，

谢谢。

**我的代码：**

**MyArrayAdapter 类：**

```
 public class MyArrayAdapter extends ArrayAdapter<String> {
private final Activity context;
private final String[] classes;
Button bt1, bt2, bt3, bt4, bt5;   

Typeface tf;

public MyArrayAdapter(Activity context, String[] classes) {
    super(context, R.layout.row, classes);
    this.context = context;
    this.classes = classes;
              }

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    tf=Typeface.createFromAsset(context.getAssets(),"BFantezy.ttf"); 
    LayoutInflater inflater = context.getLayoutInflater();
    View rowView = inflater.inflate(R.layout.row, null, true);
    TextView textView = (TextView) rowView.findViewById(R.id.row_label);
    Button bt1=(Button) rowView.findViewById(R.id.button1); 
    Button bt2=(Button) rowView.findViewById(R.id.button2); 
    Button bt3=(Button) rowView.findViewById(R.id.button3); 
    Button bt4=(Button) rowView.findViewById(R.id.button4); 
    Button bt5=(Button) rowView.findViewById(R.id.button5); 

    String s = classes[position];
    textView.setText(s);
    ((TextView)textView).setTypeface(tf); 

if ( s.startsWith("First")) {

    bt1.setBackgroundResource(R.drawable.ic_launcher);
    bt2.setBackgroundResource(R.drawable.ic_launcher); 
    bt3.setBackgroundResource(R.drawable.ic_launcher); 
    bt4.setBackgroundResource(R.drawable.ic_launcher); 
    bt5.setBackgroundResource(R.drawable.ic_launcher); }

if ( s.startsWith("Second")) {

    bt1.setBackgroundResource(R.drawable.ic_launcher); 
    bt2.setBackgroundResource(R.drawable.ic_launcher); 
    bt3.setBackgroundResource(R.drawable.ic_launcher); 
    bt4.setBackgroundResource(R.drawable.ic_launcher); 
    bt5.setBackgroundResource(R.drawable.ic_launcher); }    

if ( s.startsWith("Third")) {

    bt1.setBackgroundResource(R.drawable.ic_launcher); 
    bt2.setBackgroundResource(R.drawable.ic_launcher); 
    bt3.setBackgroundResource(R.drawable.ic_launcher); 
    bt4.setBackgroundResource(R.drawable.ic_launcher); 
    bt5.setBackgroundResource(R.drawable.ic_launcher); }        

if ( s.startsWith("Fourth")) {

    bt1.setBackgroundResource(R.drawable.ic_launcher); 
    bt2.setBackgroundResource(R.drawable.ic_launcher); 
    bt3.setBackgroundResource(R.drawable.ic_launcher); 
    bt4.setBackgroundResource(R.drawable.ic_launcher); 
    bt5.setBackgroundResource(R.drawable.ic_launcher); }    

if ( s.startsWith("Fifth")) {

    bt1.setBackgroundResource(R.drawable.ic_launcher); 
    bt2.setBackgroundResource(R.drawable.ic_launcher); 
    bt3.setBackgroundResource(R.drawable.ic_launcher); 
    bt4.setBackgroundResource(R.drawable.ic_launcher); 
    bt5.setBackgroundResource(R.drawable.ic_launcher); }        

return rowView;  }} 
```

**My_videos 类：**

```
 public class My_videos extends Activity {  
private VideoView vid;  
String night;  
/** Called when the activity is first created. */  
@Override  
public void onCreate(Bundle savedInstanceState) {   
    super.onCreate(savedInstanceState);   
    setContentView(R.layout.video);    

    Bundle bdl = getIntent().getExtras(); 
    night = bdl.getString("video");   

    vid = (VideoView) findViewById(R.id.videoView1); 

      if (night.equalsIgnoreCase("button1")) {    
         vid.setVideoURI(Uri.parse("android.resource://" + getPackageName()
                        + "/" + R.raw.b));
         vid.setMediaController(new MediaController(My_videos.this));  
             vid.requestFocus();    
             vid.start(); }  

     else if (night.equalsIgnoreCase("button2")) {   
        vid.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
                       + "/" + R.raw.bb)); 
         vid.setMediaController(new MediaController(My_videos.this));
             vid.requestFocus(); 
             vid.start(); } 

     else if (night.equalsIgnoreCase("button3")) { 
     vid.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
                    + "/" + R.raw.bbb)); 
         vid.setMediaController(new MediaController(My_videos.this));
             vid.requestFocus();
             vid.start(); } 

     else if (night.equalsIgnoreCase("button4")) { 
     vid.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
                    + "/" + R.raw.bbbb)); 
         vid.setMediaController(new MediaController(My_videos.this)); 
             vid.requestFocus();     
             vid.start(); } 

     else if (night.equalsIgnoreCase("button5")) {   
     vid.setVideoURI(Uri.parse("android.resource://" + getPackageName()  
                    + "/" + R.raw.bbbbb)); 
         vid.setMediaController(new MediaController(My_videos.this));   
             vid.requestFocus();      
             vid.start(); }  

                                      } } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:51:00.927

您在 onItemCLik 方法中定义单击侦听器时做错了

只需在基本适配器的 getView 方法中为 TextView 和 Button 设置一个 CLick 侦听器......即，从 OnItemClikc 方法中删除所有点击侦听器

```
public View getView(final int position, View convertView, ViewGroup parent) {
    tf=Typeface.createFromAsset(context.getAssets(),"BFantezy.ttf"); 
    LayoutInflater inflater = context.getLayoutInflater();
    View rowView = inflater.inflate(R.layout.row, null, true);
    TextView textView = (TextView) rowView.findViewById(R.id.row_label);
    textView.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            // do what ever do want to ie open activity 
            //must use postion to get that item  
        }
    });
    Button bt1=(Button) rowView.findViewById(R.id.button1); 
    bt1.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent intent = new Intent();    
            intent.setClass(ListButton.this, My_videos.class); 
            //this will send the respective  string to intent class ; 
            intent.putExtra("video", classes[position].toString);

        }
    });
return rowView;  }} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T10:12:17.970

您设置的侦听器不正确。为了使侦听器工作，您必须单击该`ListView`行一次以实际设置 and 的侦听`Buttons`器`TextView`。正确的方法是在`getView`布局视图时在方法中设置侦听器。

首先删除`onListItemClick`回调中的代码，然后修改适配器。我已将您的适配器重写为更高效的版本（尽管可以进行更多改进）。由于代码很大，您可以在这里找到新的适配器[https://gist.github.com/3463215](https://gist.github.com/3463215)。看看这是不是你想要的。

`R.layout.video`布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<LinearLayout  android:layout_width="match_parent"
    android:layout_height="wrap_content" >
<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="One" />

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
     android:text="Two" />

<Button
    android:id="@+id/button3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="three" />

<Button
    android:id="@+id/button4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Four" />

<Button
    android:id="@+id/button5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Five" />

</LinearLayout>

<VideoView
    android:id="@+id/videoView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />

</LinearLayout> 
```

# java - 在 Java 中将日期添加到日期

> ID：12087419
> 
> 赞同：87
> 
> 时间：2012-08-23T08:14:34.613
> 
> 标签：java, date

如何在 Java 中将 x 天添加到日期？

例如，我的日期是`01/01/2012`，使用`dd/mm/yyyy`格式。

加上 5 天，输出应该是`06/01/2012`.

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-08-23T08:22:47.823

```
SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
Calendar c = Calendar.getInstance();
c.setTime(new Date()); // Using today's date
c.add(Calendar.DATE, 5); // Adding 5 days
String output = sdf.format(c.getTime());
System.out.println(output); 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2014-05-02T23:18:25.653

# java.time

通过 Java 8[日期和时间 API](http://docs.oracle.com/javase/tutorial/datetime/)，您可以使用[`LocalDate`](http://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html)该类。

```
LocalDate.now().plusDays(nrOfDays) 
```

请参阅[Oracle 教程](http://docs.oracle.com/javase/tutorial/datetime/TOC.html)。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-08-23T08:21:01.720

```
Calendar cal = Calendar.getInstance();
cal.set(Calendar.DAY_OF_MONTH, 1);
cal.set(Calendar.MONTH, 1);
cal.set(Calendar.YEAR, 2012);
cal.add(Calendar.DAY_OF_MONTH, 5); 
```

您也可以像这样减去天数：`Calendar.add(Calendar.DAY_OF_MONTH, -5);`

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2013-12-26T07:31:03.580

这是一些简单的代码，可以打印五天后的日期：

```
DateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy");
Calendar c = Calendar.getInstance();
c.add(Calendar.DATE, 5);
System.out.println(dateFormat.format(c.getTime())); 
```

示例输出：

```
16/12/2021 
```

另请参阅：[日历#add](https://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#add(int,%20int))

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2012-08-23T08:17:02.793

If you're using [Joda-Time](https://www.joda.org/joda-time/) (and there are lots of good reasons to - a simple, intuitive API and thread safety) then you can do this trivially:

```
new LocalDate().plusDays(5); 
```

to add 5 days to today's date, for example.

EDIT: My *current* advice would be to now use the [Java 8 date/time API](https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html)

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2016-03-16T16:37:08.500

简单，无需任何其他 API：

要将 8 天添加到当前日期：

```
Date today = new Date();
long ltime = today.getTime()+8*24*60*60*1000;
Date today8 = new Date(ltime); 
```

# android - 单击时如何获取列表视图元素的各个关联ID

> ID：12087422
> 
> 赞同：1
> 
> 时间：2012-08-23T08:14:39.937
> 
> 标签：android, hashmap, listactivity

我正在通过列表活动显示一个数组列表。此外，我将 id 与这些 arraylist 元素相关联，我可以将它们放在一个 hashmap 中。但问题是我想在单击元素时获取元素的特定 id。如何实现。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:22:08.730

`getItemId(position)`如果您在适配器中实现了该方法，则可以根据单击的位置返回 id 。您在此处返回的 id 将是您的方法中的`long id`参数。`onListItemClick(...)``ListActivity`

`getItemId(int position)`是`ArrayAdapter`班级的一员。`ListActivity`将从您的适配器调用该函数`ListView`。您所要做的就是提供实现，其余的就可以了。

[http://developer.android.com/reference/android/widget/ArrayAdapter.html#getItemId(int](http://developer.android.com/reference/android/widget/ArrayAdapter.html#getItemId(int) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:50:05.187

```
 ListView lv = getListView();
      lv.setOnItemClickListener(new OnItemClickListener() {

      @Override
      public void onItemClick(AdapterView<?> adapter, View v, int position, long id) {
            long pos=lv.getItemAtPosition(position);
            //do your stuff here

     }

}); 
```

如果您使用自己的 ArrayAdapter，则可以实现 getItem(position) 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T08:25:37.497

对我有用的答案如下。希望它可能对其他人有用。我在 Arraylist> testdata 中有数据。我是这样通过的：-

```
this.setListAdapter(new SimpleAdapter(Grammar_tab_start.this, testdata ,
                       .layout.tab_single_item, new String[] { "module_name"},
                        new int[] { R.id.from}));
  ListView lv = getListView();

   to single list item on click
  lv.setOnItemClickListener(new OnItemClickListener() 
  public void onItemClick(AdapterView<?> parent, View view,
              int position, long id)

  {

        Log.i("check","Module item clicked");
  HashMap<String,String> pos=(HashMap<String, String>) lv.getItemAtPosition(position) ;

  Log.i("check","----" + position + "id" + id +"actual is "+ pos.get("module_id"));
         } 
```

我使用 lv.getItemAtPosition() 函数来检索被点击的整个对象。然后从中拿走了开斋节的一部分。干杯。

# map - JobConf 中未设置输出目录

> ID：12087423
> 
> 赞同：1
> 
> 时间：2012-08-23T08:14:45.647
> 
> 标签：map, hadoop, mapreduce

我在下面提到一个简单的mapR程序的驱动程序代码

```
 import org.apache.hadoop.fs.Path;
   import org.apache.hadoop.io.IntWritable;
   import org.apache.hadoop.io.Text;
   import org.apache.hadoop.mapred.JobClient;
   import org.apache.hadoop.mapred.JobConf;
   import org.apache.hadoop.mapreduce.Job;
   import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;
   import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;

  @SuppressWarnings("deprecation")
  public class CsvParserDriver {
      @SuppressWarnings("deprecation")
      public static void main(String[] args) throws Exception
      {
          if(args.length != 2)
          {
              System.out.println("usage: [input] [output]");
              System.exit(-1);
          }

          JobConf conf = new JobConf(CsvParserDriver.class);
          Job job = new Job(conf);
          conf.setJobName("CsvParserDriver");

          FileInputFormat.setInputPaths(job, new Path(args[0]));
          FileOutputFormat.setOutputPath(job, new Path(args[1]));

          conf.setMapperClass(CsvParserMapper.class);
          conf.setMapOutputKeyClass(IntWritable.class);
          conf.setMapOutputValueClass(Text.class);

          conf.setReducerClass(CsvParserReducer.class);
          conf.setOutputKeyClass(Text.class);
          conf.setOutputValueClass(Text.class);

          conf.set("splitNode","NUM_AE");

          JobClient.runJob(conf);
      }
  } 
```

我正在使用以下命令运行我的代码

```
hadoop jar CsvParser.jar CsvParserDriver /user/sritamd/TestData /user/sritamd/output 
```

（上面命令中的所有相应的jar和目录都创建好了）

我得到**错误**

```
Exception in thread "main" org.apache.hadoop.mapred.InvalidJobConfException: Output directory not set in JobConf. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T23:34:40.293

您没有创建 apache-hadoop-tutorial 中指定的 HDFS 输入和输出目录。

如果要使用本地目录`file:///user/sritamd/TestData`- 添加 FS 前缀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-22T15:54:03.993

这可能是由旧 API 和新 API 引起的。

这是我用于配置的新 Job API。

Step1：导入新的API库

```
import org.apache.hadoop.mapreduce.Job 
```

Step2：通过新的 API 作业进行配置。

```
val job = Job.getInstance(conf)
job.getConfiguration.set(TableOutputFormat.OUTPUT_TABLE, tableName)
job.setOutputFormatClass(classOf[TableOutputFormat[Put]]) 
```

希望这可以帮到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T00:08:01.477

我认为您需要将输入和输出目录设置为**conf**而不是**job**喜欢：

```
FileInputFormat.setInputPaths(conf, new Path(args[0]));

FileOutputFormat.setOutputPath(conf, new Path(args[1])); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-02T05:12:25.123

尝试这个

```
 Configuration configuration = new Configuration();
 Job job = new Job(configuration, "MyConfig"); 
```

然后

```
 FileInputFormat.setInputPaths(job, new Path(args[0]));
  FileOutputFormat.setOutputPath(job, new Path(args[1])); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-20T11:33:46.990

可能不会创建您的 HDFS 文件系统，您需要首先格式化给定目录，并且该目录可以用作 Hadoop 文件的输入和输出

/usr/local/hadoop/bin/hadoop 名称节点-格式

使用链接：- [http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/)

并按照每一步

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-29T10:58:12.953

如果您在标准模式（无集群）下运行 hadoop 来测试代码，则不需要在输出路径中添加 fs 前缀。您可以初始化 Job 并设置路径。以下代码应该可以工作（确保您使用的是 Job（来自 org.apache.hadoop.mapreduce.Job）或来自 org.apache.hadoop.mapred.JobConf 的 JobConf）

```
 Job job = new Job();
        job.setJobName("Job Name");
        job.setJarByClass(MapReduceJob.class);

        FileInputFormat.setInputPaths(job,new Path(args[0]));
        FileOutputFormat.setOutputPath(job,new Path(args[1]));

        job.setMapperClass(MaxTemperatureMapper.class);
        job.setReducerClass(MaxTemperatureReducer.class);

        job.setOutputKeyClass(Text.class);
        job.setOutputValueClass(IntWritable.class);

        System.exit(job.waitForCompletion(true)? 0:1); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-09T17:06:47.530

我有同样的问题，但修复了它。我使用`job.waitForCompletion(true)`了在使用 .A 时导致 hbase 上的 spark 崩溃的问题，`saveAsNewAPIHadoopFile(...)`您不应该等待您的工作，因为它使用的是旧的 Hadoop api 而不是新的 API

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-09-23T16:22:03.843

*   首先确保您的目录不存在。如果存在删除它。
*   第二次在 Eclipse 中运行您的代码，如果它运行正常并给出`ArrayOutofBounds`警告。

否则，请检查您插入的库，确保插入所有 CLIENT 库或检查您的类是否在包中。

如果以上所有条件都满足您的工作将执行。

# vb.net - 返回模型集合作为输出

> ID：12087424
> 
> 赞同：0
> 
> 时间：2012-08-23T08:14:57.653
> 
> 标签：vb.net, collections, model

我只是想创建一个函数来返回一组用户。但是，为了以后能够将项目添加到集合中，我使用了arrayList，但最后我得到了一个错误 `Type ArrayList cannot be converted to 1-Dimensional array of Users`

这是我的代码：

```
Function getDoctorsList() As Users()
    Dim userCollection As New ArrayList
    Dim sql = "SELECT * FROM '" + _tblName + "' WHERE usertype = 'doctor'"
    Dim dr As SqlDataReader = dbHelper.ExecuteAndGetReader(sql)
    While dr.Read
        Dim user As New Users
        user.Id = IIf(IsDBNull(dr("id")), 0, dr("id"))
        user.UserName = IIf(IsDBNull(dr("username")), "", dr("username"))
        user.UserNin = IIf(IsDBNull(dr("user_nin")), 0, dr("user_nin"))
        user.UserType = IIf(IsDBNull(dr("usertype")), "", dr("usertype"))
        user.Password = IIf(IsDBNull(dr("password")), "", dr("password"))
        userCollection.Add(user)
    End While
    Return userCollection
End Function 
```

如何解决此类问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:16:16.393

要么让你的方法返回一个`ArrayList`：

```
Function getDoctorsList() As ArrayList() 
```

创建一个`Array`你的`ArrayList`：

```
Return userCollection.ToArray() 
```

或者，最好的解决方案是让您的方法返回一个`IEnumerable(Of User)`

```
Function getDoctorsList() As IEnumerable(Of User) 
```

您还应该使用 a`List(of User)`而不是 a `ArrayList`，因为它是类型安全的（并且更清晰）并且它还实现了`IEnumerable(Of User)`.

* * *

**编辑**

`IEnumerable(of Users)`使用and 的示例[`DataRowExtensions`](http://msdn.microsoft.com/en-us/library/system.data.datarowextensions.aspx)：

```
Function GetDoctorsList() As IEnumerable(of Users)
    Dim sql = "SELECT * FROM '" + _tblName + "' WHERE usertype = 'doctor'"
    Dim table = new DataTable()
    table.Load(dbHelper.ExecuteAndGetReader(sql))
    Return (from row in table.AsEnumerable()
            select new User() With
            {
               .Id = row.FieldOf(Of Integer)("id"),
               .UserName = row.Field(Of String)("username"),
               .UserNin = row.Field(Of Integer)("user_nin"),
               .UserType = row.Field(Of String)("usertype"),
               .Password = row.Field(Of String)("password")
            }).ToList()
End Function 
```

# python - Django 文档中的 Django ListView mixin 抛出错误，为什么

> ID：12087426
> 
> 赞同：0
> 
> 时间：2012-08-23T08:15:02.183
> 
> 标签：python, django, mixins, django-class-based-views

我正在尝试采用[Django 文档示例，将基于类的视图与 mixins 结合使用](https://docs.djangoproject.com/en/dev/topics/class-based-views/)，以便能够以一种简单的方式以 CSV 格式下载列表视图中的对象，但我失败得很惨，并没有真正看到什么我做错了。

我有一个定义为：

```
class MyObjectList(CSVResponseMixin,
                   MultipleObjectTemplateResponseMixin,
                   BaseListView
                   ):
    object_type = None
    def get_context_data(self, **kwargs):
        object_type = self.object_type
        ...some code...
        return context

    def render_to_response(self, context, **kwargs):
        if self.request.GET.get('format', '') == 'csv':
            return CSVReponseMixin.render_to_response(self, context, **kwargs)
        else:
            return MultipleObjectTemplateResponseMixin.render_to_response(self, context, **kwargs) 
```

混合是：

```
class CSVResponseMixin(object):
    def render_to_response(self, ctx, **kwargs):
        return self.HttpResponse.render_to_response(self.convert_to_csv(ctx), **kwargs)

    def conver_to_csv(ctx):
        return do_csv_magic(ctx) 
```

在`urls.py`视图中称为：

```
url(r'^list/foos/$',
    MyObjectList.as_view(object_type="someobject", model=models.MyModel),
    name="myobjects",
) 
```

但是，当我尝试在*没有*查询的情况下访问视图时`?format=csv`，我得到一个`TypeError`

```
Exception Value:  __init__() got an unexpected keyword argument 'request'
Exception Location: /usr/lib/python2.6/site-packages/django/views/generic/base.py in render_to_response, line 97 
```

**编辑**：我在问题中添加了一些细节，最后用不同的方法实现了这个，但我仍然想知道我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T19:04:13.193

[根据 docs](https://docs.djangoproject.com/en/1.3/topics/http/shortcuts/#render-to-response)，`render_to_response`仅采用以下参数：`template_name, dictionary, context_instance, mimetype`

因此，`FooResponseMixin`在您致电时：

```
self.HttpResponse.render_to_response(self.mutilate_context(ctx), **kwargs) 
```

您在不接受的情况下传递了额外的`kwargs`参数`render_to_response`。删除`**kwargs`或仅将您需要的内容分配给变量以传递给接受的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T22:25:15.103

简而言之，你做得过火了。我不确定你在这里的意图是什么，但我了解到最好的方法是找到最接近你想要做的事情的通用视图，然后简单地将其扩展为`views.py`. 示例很多，但我邀请您在[https://bitbucket.org/BerislavLopac/resume/src/d7cfcf9c370b/resume_app/myproject/web/views.py](https://bitbucket.org/BerislavLopac/resume/src/d7cfcf9c370b/resume_app/myproject/web/views.py)查看我的代码。

# python - 当规范坚持时如何避免类耦合

> ID：12087427
> 
> 赞同：3
> 
> 时间：2012-08-23T08:15:03.463
> 
> 标签：python, design-patterns, architecture, decoupling

我有两个耦合类`DhcpServer`和`SessionManager`. 我的规范中有以下要求导致了这种耦合：

*   `DhcpServer`如果禁止，则不得发布 IP 地址租约`SessionManager`（例如，创建会话时发生错误）
*   `SessionManager`必须在创建新租约时启动会话，`DhcpServer`并在租约到期或被客户端明确释放时立即销毁会话
*   另一方面，如果停止相应的会话（例如，系统管理员的请求），`DhcpServer`则必须销毁租约`SessionManager`

起初，将所有代码放在一个类中是很诱人的。但是职责是不同的，所以我把它们一分为二，创建了两个接口：

```
class ISessionObserver(object):
    def onSessionStart(**kwargs): pass
    def onSessionStop(**kwargs): pass

class IDhcpObserver(object):
    def onBeforeLeaseCreate(**kwargs):
        """
        return False to cancel lease creation
        """
        pass
    def onLeaseCreate(**kwargs): pass
    def onLeaseDestroy(**kwargs): pass 
```

然后我实现`IDhcpObserver`了 in`SessionManager`和`ISessionObserver`in `DhcpServer`。这导致了耦合。尽管这些类不直接相互依赖，但它们确实依赖于相互包中声明的接口。

稍后我想为会话启动添加另一个协议，使`SessionManager`' 的逻辑保持不变。我也不希望它实现`IAnotherProtocolObserver`。

同样的 DHCP 服务器也与我的会话概念无关。由于 Twisted（我正在使用）没有 DHCP 协议实现，我想将它作为一个单独的项目发布，它既不依赖也不依赖`SessionManager`于它的包。

如何在保持代码块松散耦合的同时满足我的规范要求？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T08:50:19.547

解耦类的一个好方法是使用[事件](https://en.wikipedia.org/wiki/Event-driven_programming)。

因此，您需要做的是在发生某些事情时“触发”事件。`SessionManager`示例：当可以创建会话时发送事件“会话已创建” 。`DhcpServer`侦听该事件并在收到该事件时准备租约。

现在您需要的只是第三个类，它创建另外两个并配置事件侦听器。

这个解决方案的美妙之处在于它让一切变得简单。当您编写单元测试时，您总是只需要其中一个类，因为您只需要检查是否触发了正确的事件。

# c# - 使用 C# 为 Windows 设置 ipv6

> ID：12087431
> 
> 赞同：2
> 
> 时间：2012-08-23T08:15:09.063
> 
> 标签：c#, windows, ipv6

我在 Windows 中设置 Ipv6 时遇到问题。
下面的代码可以设置 IPv4 地址，但我不能尝试设置 IPv6。
请帮我。

```
ManagementClass mc = new ManagementClass("Win32_NetworkAdapterConfiguration");
try
{

    ManagementObjectCollection moc = mc.GetInstances();

    foreach (ManagementObject mo in moc)
    {
        // Make sure this is a IP enabled device. Not something like memory card or VM Ware
        if ((bool)mo["IPEnabled"])
        {
            if (mo["Caption"].Equals(nicName))
            {
                ManagementBaseObject newIP = mo.GetMethodParameters("EnableStatic");
                ManagementBaseObject newGate = mo.GetMethodParameters("SetGateways");
                ManagementBaseObject newDNS = mo.GetMethodParameters("SetDNSServerSearchOrder");

                newGate["DefaultIPGateway"] = new string[] { Gateway };
                newGate["GatewayCostMetric"] = new int[] { 1 };

                newIP["IPAddress"] = IpAddresses.Split(',');
                newIP["SubnetMask"] = new string[] { SubnetMask };

                newDNS["DNSServerSearchOrder"] = DnsSearchOrder.Split(',');

                ManagementBaseObject setIP = mo.InvokeMethod("EnableStatic", newIP, null);
                ManagementBaseObject setGateways = mo.InvokeMethod("SetGateways", newGate, null);
                ManagementBaseObject setDNS = mo.InvokeMethod("SetDNSServerSearchOrder", newDNS, null);

                break;
            }
        }
    }
}
catch (Exception ex)
{
    string str = ex.Message;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:45:55.080

我还尝试通过 WMI 设置一个固定的 IPv6 地址，但它似乎不起作用（IPv4 地址确实起作用）。
我发现这样做的唯一方法是从代码中启动 netsh，并使用它来设置固定（静态）IPv6 地址。如果有人有更优雅的解决方案，我会很乐意使用它。同时：

使用 .NET System.Diagnostics.Process 类启动 netsh 进程。

告诉您所需参数的 netsh 命令参考[在这里。](http://technet.microsoft.com/en-us/library/cc754516%28v=ws.10%29.aspx)

我发现我需要为我发送的每个命令启动一个新的 netsh 进程。
对于每个 netsh 进程，我为进程的 OutputDataReceived 事件创建了一个处理程序，用于记录 netsh 反馈。

# javascript - jQuery 选择器混淆

> ID：12087433
> 
> 赞同：1
> 
> 时间：2012-08-23T08:15:11.437
> 
> 标签：javascript, jquery, text, jquery-selectors, html-lists

我有以下代码..

```
<span class="under"> 
texthere
    <ul class="list">
        <li> list text here</li>
    </ul>
</span> 
```

当我运行时，`$(".under").text()`我得到“这里的 textherelist 文本”。

我已经尝试过`$(".under :not(.list)").text()`并且被低估了。

我也没有得到正确的输出`$(".under").not(".list").text()`

所以我最后一次尝试是`$(".list").parent().text()`

这导致 textherelist 文本在这里

这么简单的事情我哪里错了？

ps 不必是 jQuery 可以是 JavaScript，如果它更简单的话。

想要的结果： texthere

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T08:19:24.360

所以我猜你在看文字：`texthere`？

```
var elem = $(".under").clone(),
    text = $.trim(elem.children().remove().end().text()); 
```

[**小提琴**](http://jsfiddle.net/G774V/)

克隆元素，删除所有子元素并获取剩余文本。​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T08:17:17.657

从[文档](http://api.jquery.com/text/)：

> 描述：获取匹配元素集中每个元素的组合文本内容，包括它们的后代。

所以是的，这种行为是意料之中的。

您可以尝试这样做以仅获取选择器的直接文本节点：

```
$('.under').contents().filter(function(){ return(this.nodeType == 3); }).text() 
```

解释：

`.contents()`( [docs](http://api.jquery.com/contents/) ) 返回选择器的子节点，包括文本节点

> 描述：获取匹配元素集中每个元素的子元素，包括文本和注释节点。

`.filter()`接受回调以仅返回您需要的内容，基于此，您只接受带有`nodeType == 3`的内容，这是一个文本节点。

[http://jsfiddle.net/R4Pzf/](http://jsfiddle.net/R4Pzf/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T08:25:20.113

干得好：

```
var text = $('.under').contents(':not(.list)').text(); 
```

示例：http: [//jsfiddle.net/ak4FU/1/](http://jsfiddle.net/ak4FU/1/)

# regex - 如何在忽略空格和非字母数字字符的字符串中突出显示字符串？

> ID：12087440
> 
> 赞同：0
> 
> 时间：2012-08-23T08:15:38.827
> 
> 标签：regex, search, replace, whitespace, match

生成在另一个字符串中找到的突出显示字符串的最佳方法是什么？

我想忽略所有不是字母数字但将它们保留在最终输出中的字符。

例如，在以下 3 个字符串中搜索“PC3000”会得到以下结果：

```
 ZxPc 3000L = Zx<font color='red'>Pc 3000</font>L

   ZXP-C300-0Y  =  ZX<font color='red'>P-C300-0</font>Y

   Pc3 000  =   <font color='red'>Pc3 000</font> 
```

我有以下代码，但我可以在结果中突出显示搜索的唯一方法是删除所有空格和非字母数字字符，然后将两个字符串都设置为小写。我被困住了！

```
public string Highlight(string Search_Str, string InputTxt)
    {

        // Setup the regular expression and add the Or operator.
        Regex RegExp = new Regex(Search_Str.Replace(" ", "|").Trim(), RegexOptions.IgnoreCase);

        // Highlight keywords by calling the delegate each time a keyword is found.
        string Lightup = RegExp.Replace(InputTxt, new MatchEvaluator(ReplaceKeyWords));

        if (Lightup == InputTxt)
        {
            Regex RegExp2 = new Regex(Search_Str.Replace(" ", "|").Trim(), RegexOptions.IgnoreCase);
            RegExp2.Replace(" ", "");

            Lightup = RegExp2.Replace(InputTxt.Replace(" ", ""), new MatchEvaluator(ReplaceKeyWords));

            int Found = Lightup.IndexOf("<font color='red'>");

            if (Found == -1)
            {
                Lightup = InputTxt;
            }

        }

        RegExp = null;
        return Lightup;
    }

    public string ReplaceKeyWords(Match m)
    {
        return "<font color='red'>" + m.Value + "</font>";
    } 
```

多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:42:40.893

一种方法是创建一个仅包含字母数字的输入字符串版本和一个将字符位置从新字符串映射到原始输入的查找数组。然后搜索仅字母数字版本的关键字，并使用查找将匹配位置映射回原始输入字符串。

用于构建查找数组的伪代码：

```
cleanInput = "";
lookup = [];
lookupIndex = 0;

for ( index = 0; index < input.length; index++ ) {
    if ( isAlphaNumeric(input[index]) {
        cleanInput += input[index]; 
        lookup[lookupIndex] = index;
        lookupIndex++;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:54:32.003

`[^a-z0-9]?`通过在每个字符之间插入可选的非字母数字字符类 ( ) 来更改搜索字符串。而不是`PC3000`使用

```
P[^a-z0-9]?C[^a-z0-9]?3[^a-z0-9]?0[^a-z0-9]?0[^a-z0-9]?0 
```

这匹配`Pc 3000`,`P-C300-0`和`Pc3 000`。

# c# - 将表达式与 .NET 微框架结合使用

> ID：12087441
> 
> 赞同：2
> 
> 时间：2012-08-23T08:15:40.073
> 
> 标签：c#, wpf, expression-blend, .net-micro-framework

我刚开始在意大利的一家较小的软件公司实习，我被分配尝试在 netmf 中开发/创建一个软件，比如为员工使用的时间戳机，它可以用在 gadgeteere board(hydra) 上3,5 英寸屏幕和智能卡读卡器。

我的“老板”让我用专业表达混合设计 GUI，到目前为止这并不难，但现在我被困住了，因为我看不到将混合项目转移到 netmf 的方法。我试着找书，但是那里的书太少了，而且你找到的大多是关于 netmf 3.0 的！

那么有人可以帮助我，给我一个想法或指出正确的方向吗？我非常感谢您的帮助，如果需要，我很乐意提供更多信息。

谢谢马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:27:55.033

在 VS2010 中创建一个新的 .net mf 项目并在其中插入现有的 xaml 文件怎么样？该解决方案有什么不好？因为我担心 Blend 只针对 3.5 和 4.0。

编辑：你如何创建新项目？？？那么创建一个新项目，将其命名保存，在项目主设置中选择程序集名称和命名空间，更改目标框架，然后使用添加现有项目，然后浏览添加所有 xaml/code/... 文件.. .

# java - which language is better to convert excel to xml

> ID：12087444
> 
> 赞同：-3
> 
> 时间：2012-08-23T08:15:44.243
> 
> 标签：java, vb.net, excel, vba

i need to write a script to arrange data in excel and convert into xml automaticlly which language is more suitable, java or VBA macro? or anything else? but VB looks a little ..confused anybody do this kind of programming before, give me some suggestions!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:22:02.040

如果您使用 Java，则可以使用 Apache POI 读取 Excel 文件，并使用 JAXB 生成 XML 文件。

阿帕奇 POI： http: [//poi.apache.org/](http://poi.apache.org/)

JAXB：[http ://www.oracle.com/technetwork/articles/javase/index-140168.html](http://www.oracle.com/technetwork/articles/javase/index-140168.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:23:59.103

在我看来，这不是语言的问题，而是适当的库的问题。可能有很好的库可以在 VB 中操作 excel，因为它们来自同一家公司。但是，在 java 中，您会发现一些库可以使操作和导出 excel。java中的库之一是：

[http://poi.apache.org/](http://poi.apache.org/)

# android - 使用键盘时，ListView 不会滚动到结束

> ID：12087446
> 
> 赞同：8
> 
> 时间：2012-08-23T08:15:47.933
> 
> 标签：android, listview, android-listview

当收到或发送新消息时，我的 ListView 应该自动滚动到结束。但是，当我使用 Android 键盘从 ListView 下方的 EditText 发送消息时，ListView 调整大小并且我要发送的新消息出现在屏幕外，我必须向下滚动才能看到它，即使键盘消失并且 ListView 再次调整大小。

要滚动 ListView 我使用：

```
listView.postDelayed(new Runnable() {

        @覆盖
        公共无效运行（）{
            listView.setSelection(listView.getCount());
        }
    }, 100);
```

但在我的情况下无法正常工作。

有谁知道它为什么会发生？有没有办法，总是滚动 ListView 结束？

谢谢，非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-26T18:03:27.097

试试这个 insead 你的代码：

```
listView.setTranscriptMode(ListView.TRANSCRIPT_MODE_ALWAYS_SCROLL); 
```

（或通过 XML 布局设置）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-23T12:30:37.467

将选择设置为列表后，您可以尝试添加这行代码：

```
listView.smoothScrollToPosition(listView.getCount()); 
```

生成的代码应如下所示：

```
listView.postDelayed(new Runnable() {
        @Override
        public void run() {
            listView.setSelection(listView.getCount());
            listView.smoothScrollToPosition(listView.getCount());
        }
    }, 100); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T08:30:18.417

将活动清单中的 android:windowSoftInputMode 设置为`adjustPan|adjustResize`.

# java - 在没有文档的情况下查找有关 Java 类的信息

> ID：12087464
> 
> 赞同：0
> 
> 时间：2012-08-23T08:16:48.627
> 
> 标签：java, class, jar

作为我正在从事的项目的一部分，我需要使用一个类将序列化数据写入文件，但我所看到的只是`.jar`文件和一个相当不透明的使用示例。有什么办法可以收集到一些信息，比如继承的类和公共方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:19:36.440

您可以使用解压缩 jar `jar xf {jarname}`，然后对相关文件使用[反编译器。](http://java.decompiler.free.fr/)它不会给你来源，但你会得到结构、字段名称等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:19:32.043

您的 IDE 应该能够告诉您这一切。只需创建一个类的实例并输入
`inst.` `Ctrl+Space`

您现在应该看到公共字段和方法的列表。如果这不起作用，请尝试`javap`转储类的 API（还有转储字节码的选项）或像[jad这样的 Java 反编译器](http://www.varaneckas.com/jad/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T08:28:43.783

使用命令 jar xf "jar_name" 转到您的 java JDK 目录（即 C:\Dev\Java\jdk1.6.0_26\bin）。比去[下载 JAD](http://www.varaneckas.com/jad/)并下载反编译器。然后从解压缩的 jar 中反编译类。

# file - 读取/写入 J 中的文件 - `1!:2' 不起作用）

> ID：12087466
> 
> 赞同：1
> 
> 时间：2012-08-23T08:16:50.683
> 
> 标签：file, file-io, j

我正在尝试[学习 J 中的示例，](http://www.rogerstokes.free-online.co.uk/28.htm)但它不起作用。如何在 J 中写入/读取文件？

```
 F =: 'c:\temp\demofile.xyz'       NB. a filename
   'some data' 1!:2 < F    NB. write to file F
|file name error
|   'some data'    1!:2<F 
```

我正在Windows 7下尝试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:03:37.193

正如@Eelvex 建议的那样，问题在于对文件夹“c:\temp”的写入权限。然而文件名很好，J是`file name error`由于缺乏权限而产生的。

# c++ - ON_LBN_SELCHANGE 的参数是什么？

> ID：12087471
> 
> 赞同：1
> 
> 时间：2012-08-23T08:17:06.970
> 
> 标签：c++, mfc

我在 MSDN 中的任何地方都找不到处理 ON_LBN_SELCHANGE 的示例。那么，afx_msg函数长什么样子，消息映射中ON_LBN_SELCHANGE需要哪些参数呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:25:52.230

的通知处理程序`LBN_SELCHANGE`没有参数。

所有列表框通知处理程序都有一个通用语法（[链接](http://msdn.microsoft.com/en-us/library/y04ez4c9%28v=vs.80%29.aspx)）

> 每个消息映射条目采用以下形式：
> 
> ```
>  ON_Notification( id, memberFxn ) 
> ```
> 
> 其中 id 指定发送通知的列表框控件的子窗口 ID，memberFxn 是您编写的用于处理通知的父成员函数的名称。
> 
> 父函数原型如下：
> 
> ```
>  afx_msg void memberFxn( ); 
> ```

# c++ - At what moment is an object exactly "created"?

> ID：12087472
> 
> 赞同：2
> 
> 时间：2012-08-23T08:17:13.830
> 
> 标签：c++, memory, exception-handling, constructor

Let's say we have some class with a constructor:

```
class MyClass
{
public:
    MyClass()
    {
    //our code goes here
    throw "OMG";//well, some code that throws an exception
    }
}; 
```

Now, when an exception occurs, stack unwinding is being performed. I also know that if the exception is thrown from the constructor, the corresponding object's destructor will *not* be called, because the object was never completely "created" in the first place.

I'm a little confused by this. To me that implies that the object is considered "created" only when the constructor finishes. But obviously, all the memory is allocated at some place before (or *right after*) the constructor is called, because we can manipulate the object's members inside the constructor.

So when exactly is the object created in memory, and what happens to the memory of an object that caused the exception?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:22:55.593

*内存分配*和*对象构造*在 C++ 中是两个独立的东西。编译器只是确保当它们一起被调用时（这是常规的 -​​ 即非放置 -`new`运算符的情况）并且构造失败，分配被恢复。

此外，当类具有子对象（基类和/或字段）时，编译器以固定顺序调用它们的构造函数，并确保当其中一个抛出时，已经构造的子对象被正确处理（即，调用它们的析构函数）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T08:23:32.177

内存分配在构造函数的主体之前。

如果构造函数失败，**则会释放****自动分配**的内存。

 **[而“自动分配”的口音很重要——如果你在构造函数中动态分配了内存，而构造函数失败了（比如你之前可能用过`new`）`throw "OMG"`，这块内存就会泄漏。]

[那是因为 - 你已经分配了这个内存，你需要释放它。]

你是对的，没有调用析构函数，但析构函数不是释放内存的析构函数，它分配给类的**自动**成员。
[它（基本上）用于释放*由用户*（在构造函数或其他地方）分配的内存。]

* * *

换句话说，为对象分配内存不同于对象的构造。

另一个例子 - 如果你动态创建一个对象，比如：

```
MyObj* = new MyObj; 
```

这将：

*   称呼`operator new`
*   然后调用构造函数`MyObj`

看，两者都不一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T08:21:22.507

对象的内存被释放，但不调用析构函数（因此，例如，如果您没有正确处理构造函数中的异常，则不会释放在构造函数中创建的动态分配的指针）。在 C++11 中，规范说当且仅当*一个*构造函数完全完成时才调用析构函数（相关，因为构造函数可以引用另一个构造函数）。

示例（未释放由 new int () 分配的内存）：

```
struct Broken {
   int * i;
   Broken () {
      i = new int {5};
      OperationCausingException ();
   }

   ~Broken {
      delete i;
   }
}

try {
   Broken * b = new Broken {};
} catch (...) {
}
// memory leak: *b is freed, but b->i still exists 
```**

# java - Removing all non-word characters in a Cyrillic UTF-8 encoded String

> ID：12087479
> 
> 赞同：3
> 
> 时间：2012-08-23T08:17:47.167
> 
> 标签：java, string

Normally, in order to remove non-word characters from a String the `replaceAll` method can be used:

```
String cleanWords = "some string with non-words such as ';'".replaceAll("\\W", ""); 
```

The above returns a cleaned string **"somestringwithnonwordssuchas"**.

However, if the string contains Cyrillic characters they get recognised as non-word, and get removed from the string. It is expected that Cyrillic characters would remain. Hence the question.

What is a proper way to deal with the task of removing non-word characters regardless of the language, assuming that string has UTF-8 encoding?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T08:24:08.950

试试`[^\\p{L}]`。这应该匹配除字母之外的每个 Unicode 代码点。

该类对可能的字符[`Pattern`类](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#ubpc)进行了非常全面的描述。请注意，POSIX 字符类默认情况下仅支持 ASCII，对您没有多大帮助，您需要使用 Unicode 特定的类。

请注意，有一个[`UNICODE_CHARACTER_CLASS`标志](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#UNICODE_CHARACTER_CLASS)可以更改 POSIX 类的行为以符合[Unicode 标准的这一部分](http://www.unicode.org/reports/tr18/#Compatibility_Properties)（基本上使它们等同于它们最接近的 Unicode 感知等价物）。

# ios - How to dial number starts with * in iphone app

> ID：12087480
> 
> 赞同：-3
> 
> 时间：2012-08-23T08:17:50.027
> 
> 标签：ios, iphone, phone-call

I am developing an iPhone app and I need it to call a number that starts with *, is there a way to overcome Apple's restrictions (I know they prevent that)?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:35:30.403

如果 Apple 明确限制了某些东西，那么您不能只是在 SDK 中“克服”它。通常绕过 Apple 安全协议的唯一方法是为 Cydia 开发一个应用程序。

# c++ - 返回一个指针数组？

> ID：12087482
> 
> 赞同：5
> 
> 时间：2012-08-23T08:18:07.323
> 
> 标签：c++, arrays, oop, pointers, return

我是一个初级程序员，我在 C++ OOP 方面遇到了很多麻烦。具体来说，今晚我试图编写一个简单的类，它接收事件并在多个图像之间切换，并带有一个指向存储在数组中的每个图像的指针。在尝试创建一个返回指向数组本身的指针的“getter”函数时，我遇到了一个令人困惑的问题。

基本上，我试图做这样的事情：

```
class SlideShow
{
public:
    image *getSlideArray();
private:
    image *slideArray[10];
}; 
```

所以，我想要一个数组来存储指向每个图像的指针。而且我还想要一个函数来返回数组本身的地址。我在尝试定义 getSlideArray() 函数时遇到了一个问题……我只是不完全确定它为什么不起作用……

这是我最初在课堂源文件中尝试的内容：

```
image *SlideShow::getSlideArray()
{
    return this->slideArray;
} 
```

在这次尝试中，编译器不断提出使用“this”关键字的问题，说我试图返回的不是先前指定的类型。但是，到目前为止，这是我编写 getter 函数的方式，它通常在使用简单变量时有效……我怀疑这里存在一些问题，因为“this”是一个指针, 和 'slideArray' 是指向一个数组的指针，该数组也包含指针......但我很糟糕，这种引用级别现在让我头疼。我花了一段时间才收集对指针的基本理解，使用地址和运算符引用等。指向指针和指针数组的指针更加令人困惑。

我还应该提到，我找到了一种解决方法，我的代码可以在其中编译。（虽然我不能真正运行它来检查它是否在运行时工作..）我的工作涉及将定义/返回语句添加到类声明本身（在头文件中）：

```
class SlideShow
{
public:
    image *getSlideArray() {return *slideArray;);
private:
    image *slideArray[10];
}; 
```

现在。这编译正确......但是，这也让我感到困惑。我知道，通常，当您返回一个数组（例如，一个整数数组）时，您将返回数组的第零个插槽的地址。但是，如果我试图返回一个 intArray[5]，那么在返回它时，我会简单地写 'intArray'，对吗？本质上，我对为什么在这种情况下必须在“slideArray”之前添加 * 感到困惑......

因此，无论我尝试哪种方式，它都让我感到困惑。我知道这里有一些“技巧”，它可能与返回指向指针的指针或其他东西有关，但我自己无法解决。我真的很希望学习这个主题，这样我就可以开始掌握编程，尤其是 OOP ......

谁能帮助我更好地理解这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T08:23:41.263

您正在使用的方法定义：

```
image *SlideShow::getSlideArray() {
    return this->slideArray;
} 
```

表示`image`正在返回指向 an 的指针。但是，您正试图返回一个`image`. 你应该这样做：

```
image *SlideShow::getSlideArray(int image_idx) {
    return this->slideArray[image_idx];
} 
```

或者

```
image **SlideShow::getSlideArray() {
    return this->slideArray;
} 
```

取决于您是要一起返回所有图像（第二个选项）还是一个接一个（第一个选项）。

顺便说一句，您根本不需要使用`this`。下一个代码相当于上面的第二个选项：

```
image **SlideShow::getSlideArray() {
    return slideArray;
} 
```

前面的解释应该可以解决您的问题。但是，您最好使用 STL 容器，而不是使用“原始指针”和 C 样式数组（请参阅@juanchopanza 的答案）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T08:23:55.083

我将使用指针或智能指针的标准库容器，并返回它（按值或引用，取决于您的用例）。

对于动态大小：

```
#include <vector>

class SlideShow
{
public:
    std::vector<image*> getSlideArray() const {return slideArray; }
private:
    std::vector<image*> slideArray;
}; 
```

对于静态大小（假设 C++11 支持）：

```
#include <array>

class SlideShow
{
public:
    std::array<image*, SOME_SIZE> getSlideArray() const {return slideArray; }
private:
    std::array<image*, SOME_SIZE> slideArray;
}; 
```

如果您没有 C++11，请尝试使用`std::tr1::array`from header`<tr1/array`或`boost::array`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-23T08:48:00.827

您的第一种方法失败了，因为您在函数中给出了错误的返回类型，您应该使用`image**`：

```
image **SlideShow::getSlideArray()
{
    return this->slideArray;
} 
```

但一般来说，返回类的私有部分是一个非常糟糕的主意，因为它违反了封装规则。在这里，没有什么可以阻止调用代码在数组末尾迭代并崩溃。我认为编写特定的访问器函数会更好，比如`getImage(int i)`边界`setImage(int i, image *img)`检查，甚至重载`[]`运算符。总而言之，我认为这样编写这段代码会更好：

```
class SlideShow
{
public:
    image *getImage(int i);
    void setImage(int i, image *img);
private:
    image *slideArray[10];
};

image *SlideShow::getImage(int i)
{
    if (i >= 0) && (i < 10)
        return slideArray[i];
    else
        // throw exception
}

void SlideShow::setImage(int i, image *img)
{
    if (i >= 0) && (i < 10)
        slideArray[i] = img;
    else
        // throw exception
} 
```

Note: you should probably also consider case in setImage where there already is an image on i-th position, but I ommited it for sake of simplicity.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-23T08:23:45.417

```
image **SlideShow::getSlideArray()
{
    return this->slideArray;
} 
```

可能会工作

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-23T08:33:14.650

我想建议您考虑使用标准 C++ 库：容器（例如，`std::vector`）和智能指针（例如，`std::shared_ptr`）。

但是，如果您想粘贴原始数组：

```
class SlideShow {
public:
    image **getSlides() { return &slideArray_[0]; }
    std::size_t slideCount() { return sizeof(slideArray_)/sizeof(*slideArray_); }

private:
    image *slideArray_[10]; // Array of pointers to images.
}; 
```

客户端代码：

```
SlideShow slideshow;

// Fill the slideshow here.

image** slides = slideshow.getSlides();
for (std::size_t i = 0; i < slideshow.slideCount(); ++i) {
    image *slide = slides[i];
} 
```

该类`SlideShow`将指向图像的指针数组公开为指向图像**指针的指针**。要获取数组的大小，客户端代码应调用`slideCount()`成员函数。

# objective-c - UISegmentedControl 不允许我编辑选定的颜色

> ID：12087487
> 
> 赞同：1
> 
> 时间：2012-08-23T08:18:31.840
> 
> 标签：objective-c, xcode, cocoa-touch, uisegmentedcontrol

所以我有一些代码，我希望将分段控制器的选定颜色设置为我要求的颜色，并将未选定的段设置为另一种颜色，见下文：

```
 //normal segment
NSDictionary *normalAttributes = [NSDictionary dictionaryWithObjectsAndKeys:
                                  [UIFont fontWithName:@"Rok" size:20.0],UITextAttributeFont,
                                  [UIColor colorWithRed:75.0/255.0 green:75.0/255.0 blue:75.0/255.0 alpha:1.0], UITextAttributeTextColor,
                                  [UIColor clearColor], UITextAttributeTextShadowColor,
                                  [NSValue valueWithUIOffset:UIOffsetMake(0, 1)], UITextAttributeTextShadowOffset,
                                  nil];//[NSDictionary dictionaryWithObject:  [UIColor redColor]forKey:UITextAttributeTextColor];
[segmentedControl setTitleTextAttributes:normalAttributes forState:UIControlStateNormal];

NSDictionary *selectedAttributes = [NSDictionary dictionaryWithObjectsAndKeys:
                                    [UIFont fontWithName:@"Rok" size:20.0],UITextAttributeFont,
                                    [UIColor whiteColor], UITextAttributeTextColor,
                                    [UIColor clearColor], UITextAttributeTextShadowColor,
                                    [NSValue valueWithUIOffset:UIOffsetMake(0, 1)], UITextAttributeTextShadowOffset,
                                    nil] ;//[NSDictionary dictionaryWithObject:  [UIColor redColor]forKey:UITextAttributeTextColor];
[segmentedControl setTitleTextAttributes:selectedAttributes forState:UIControlStateSelected]; 
```

那么我做错了什么？直接改变所选段的颜色真是令人沮丧！我很想只使用一排按钮！

感谢任何提供帮助的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:44:58.367

在 UISegmentedControl 的值更改事件中添加此代码：

```
 for (int i=0; i<[sender.subviews count]; i++) 
 {
   if ([[sender.subviews objectAtIndex:i]isSelected] ) 
   {               
     UIColor *tintcolor=[UIColor redColor]; //your requiremnent color here
     [[sender.subviews objectAtIndex:i] setTintColor:tintcolor];
     break;
   }
 } 
```

# asp.net - ASP:ListItem 存储对象

> ID：12087488
> 
> 赞同：2
> 
> 时间：2012-08-23T08:18:37.027
> 
> 标签：asp.net, html

我有一个`<asp:ListItem>`控件，我希望将其扩展为具有 2 个值。有人可以帮我做到这一点。

基本上我想要`<asp:ListItem value="x" value2="b" text="Hello">`

有谁知道我怎么能做到这一点。我考虑过创建一个对象并将其存储在使用适当的 .ToString() 方法提交的值中，但是我只能将字符串存储在列表项中。

如果我在 HTML 中创建它，我可以抛出一个属性并读取它们，但我在后面的代码中创建我的列表项，所以我不确定如何添加属性。

更新

一种方法是使用 HTML5 中使用的“数据-”。但是对于双向数据覆盖控件以添加附加值，以便 ViewState 缓存它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:32:13.563

如果您的要求是`value`通过客户端脚本使用属性，那么我建议存储 jsonString。这是一种解决方法。

```
<asp:ListItem value="{'d': ['x','b'] }" text="Hello"> 
```

样本：

**产品.cs**

```
public class Product
{
    public int ID { get; set; }
    public string Name { get; set; }
    public string Desc { get; set; }
    public string JsonString
    {
        get
        {
            return "{\"d\": [\"" + ID + "\",\"" + Desc + "\"]}";
        }
    }
} 
```

**绑定`List<T>`**

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        List<Product> products = new List<Product>()
        {
             new Product(){ ID=1, Name="A", Desc="A1"},
             new Product(){ ID=2, Name="B", Desc="B1"},
             new Product(){ ID=3, Name="C", Desc="C1"},
        };

        ListBox1.DataSource = products;
        ListBox1.DataTextField = "Name";
        ListBox1.DataValueField = "JsonString";
        ListBox1.DataBind();
    }
} 
```

**标记**

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <script type="text/javascript">
        $(function () {
            $("#ListBox1").change(function () {
                var sel = $(this).val();
                v = jQuery.parseJSON(sel);
                console.log(v.d[0] + " " + v.d[1]);
            });
        });
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:ListBox ID="ListBox1" runat="server"></asp:ListBox>
    </div>
</body> 
```

# c# - C# 无法访问该文件，因为它被其他进程使用

> ID：12087492
> 
> 赞同：2
> 
> 时间：2012-08-23T08:18:44.087
> 
> 标签：c#, sql-server-2008, streamwriter, export-to-csv

我有将 SQL 转换为 CSV 的代码：

```
public void CreateCSVFile(DataTable dt, string strFilePath, bool Is_Ordre, int TypeDonne)
{

    //FileStream fs = new FileStream(strFilePath, FileMode.Create);
    // FileStream fs = File.Create(strFilePath);

    // Create the CSV file to which grid data will be exported.
    //StreamWriter sw = new StreamWriter(fs);
    //StreamWriter sw = new StreamWriter(strFilePath, false);
    using (var sw = new StreamWriter(strFilePath, false))
    {
        // First we will write the headers.
        //DataTable dt = m_dsProducts.Tables[0];
        int iColCount = dt.Columns.Count;
        for (int i = 0; i < iColCount; i++)
        {
            sw.Write(dt.Columns[i]);
            if (i < iColCount - 1)
            {
                sw.Write(",");
            }
        }
        if (Is_Ordre) sw.Write(", TYP_DONNE");

        sw.Write(sw.NewLine);

        // Now write all the rows.
        foreach (DataRow dr in dt.Rows)
        {
            for (int i = 0; i < iColCount; i++)
            {
                if (!Convert.IsDBNull(dr[i]))
                {
                    sw.Write("\'" + dr[i].ToString().Replace("'", " ").Replace(",", ".") + "\'");
                }
                else
                {
                    sw.Write("\' \'");
                }
                if (i < iColCount - 1)
                {
                    sw.Write(",");
                }
            }
            if (Is_Ordre) sw.Write(", \'" + TypeDonne + "\'");
            sw.Write(sw.NewLine);
        }                
        sw.Flush();
        sw.Close();
        sw.Dispose();
    }
        //fs.Close();

} 
```

之后，我通过电子邮件发送 CSV 文件：

```
Attachment data_OD = new Attachment(LeSource, MediaTypeNames.Application.Octet);
Attachment data_LV = new Attachment(LeSource_LV, MediaTypeNames.Application.Octet);
oEmail.SendingEmail(ClientID,  data_OD, data_LV);

public void SendingEmail(string CodeClient, Attachment dataOD, Attachment dataLV)
{
    try
    {
        Pers_Conf oConf = LeConf.Get_Config(CodeClient);

        MailMessage omail = new MailMessage();
        var oSmtp = new SmtpClient("smtp.gmail.com", 587)
        {
            Credentials = new NetworkCredential("xxxxxx@gmail.com", "xxxxxx"),
            EnableSsl = true
        };

        omail.From = new MailAddress("xxxxx@gmail.com");               
        omail.To.Add(oConf.EmailAddr);
        omail.Subject = "xxxxxx_" + CodeClient;
        omail.Body = CodeClient;

        omail.Attachments.Add(dataOD);
        omail.Attachments.Add(dataLV);

        oSmtp.Send(omail);
    }
    catch (Exception excThrown)
    {
        throw excThrown;
    } 
```

似乎`StreamWriter`没有正确关闭文件，我已经尝试过：

```
 Try
    {
    StreamWriter sw = new StreamWriter(strFilePath, false);
    }
    Catch
    {
    }
    Finaly
    {
     sw.Flush();
     sw.Close();
     sw.Dispose();
} 
```

但在`finally`块中它不识别`sw`。

任何的想法 ？

PS：这行代码抛出一个异常，告诉其他进程正在使用该文件

```
 using (var sw = new StreamWriter(strFilePath, false)) 
```

没有关闭是因为`StreamWriter`没有正确关闭还是因为发送电子邮件正在使用这个文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:35:32.203

Supposing you enter in this code more than one time.
In either case you need to call the `MailMsg.Dispose()` of the `MailMessage` class. Otherwise, it will hold the attachment resulting in a file locked the next time you try to write in it.

Try to use the `using` statement also on the MailMessage

```
 try 
        { 
            Pers_Conf oConf = LeConf.Get_Config(CodeClient); 

            using(MailMessage omail = new MailMessage())
            {
                .....
                oSmtp.Send(omail); 
            }
        } 
        catch (Exception excThrown) 
        { 
            throw excThrown; 
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:21:09.957

那是因为您`StreamWriter`的声明超出范围，请尝试以下操作：

```
using (StreamWriter sw = new StreamWriter(strFilePath, false))
{
} 
```

这将在编译时为您添加`try`和代码。`finally`或者，如果您想自己指定`try`块，请执行以下操作：

```
StreamWriter sw;

try
{
    sw = new StreamWriter(strFilePath, false);
}
catch
{
}
finally
{
    sw.Flush();
    sw.Close();
    sw.Dispose();        
} 
```

This will give it scope to the `finally`.

**EDIT**

You could try adding `using` blocks to your file stream to create your file, and then write to this stream with `StreamWriter` as you're kind of already doing, as Darin points out.

```
using (FileStream fs = new FileStream(strFilePath, FileMode.Create, FileAccess.Write))
{
    using (StreamWriter sw = new StreamWriter(fs))
    {
        // write your content

        sw.Flush();
        sw.Close();
    }

    fs.Close();
} 
```

If you're creating your file using `File.Create` as it seems in your code (but it's commented out) then you're not closing your `FileStream` so this may be a factor.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T08:23:09.913

The StreamWriter will be out of scope. If you refractor to the following...

```
StreamWriter sw;
try
{
   sw = new StreamWriter(strFilePath, false);
}
Catch
{

}
finally
{
 sw.Flush();
 sw.Close();
 sw.Dispose();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T08:23:14.803

In your last block of code `sw` is not recognized because it is out of scope.

Please try this:

```
 StreamWriter sw;

 try
 {
    sw = new StreamWriter(strFilePath, false);
 }
 catch
 {
    // Never do an empty catch BTW!    
 }
 finally
 {
   if (sw != null)
   {
     sw.Flush();
     sw.Close();
     sw.Dispose();
   }
} 
```

or better yet, use a using statement:

```
using (StreamWriter sw = new StreamWriter(strFilePath, false))
{
    // Just do your thing, at the end sw will be cleaned up for you :)
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T08:28:20.960

So, it looks like your first attemopt was reasonable (in summary below)

```
using (var sw = new StreamWriter(strFilePath, false)) 
{ 
    sw.Flush();  
    sw.Close();  
    sw.Dispose();  
} 
```

Though sw..Dispose() not needed as it is in a using{} block.

So what exactly was the problem you were seeing?

Ok, I have just seen your edit. Are you sure it is not something else locking the file, possibly the Attachment. I cannot see what scope this is being declared in, but is it possible that it is hanging on to the file? If you want to check what is locking it you can use ProcessMonitor...

[http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)

# android - Android：多个 IntentServices - stopService

> ID：12087495
> 
> 赞同：2
> 
> 时间：2012-08-23T08:18:53.167
> 
> 标签：android, intentservice

我多次使用唯一的 id 值启动 IntentService。当我重新创建意图并使用它在当前 IntentService 上调用 stopService 时，整个 IntentService 队列在停止当前 IntentService 之上被取消。此外，对队列中的 IntentService 调用 stopService 无效。

启动服务：

```
Intent intent = new Intent(context, IntentService.class);
intent.putExtra("action", "scan");
intent.putExtra("id", id);
context.startService(intent); 
```

停止服务

```
Intent intent = new Intent(context, IntentService.class);
intent.putExtra("action", "scan");
intent.putExtra("id", id);
context.stopService(intent); 
```

我希望将具有关联 ID 的 IntentService 停止/从队列中删除，然后让队列的其余部分运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:20:51.390

我认为您可能必须在这里实现自己类型的意图服务。[看代码](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/app/IntentService.java)

尽管查看了该`stopSelf(int)`方法，但如果您知道创建每个意图的内容，则可以手动执行此操作。

```
mActivityManager.stopServiceToken(
                new ComponentName(this, mClassName), mToken, startId); 
```

所以像：

```
mActivityManager.stopServiceToken(
                new ComponentName(this, IntentService.class.getSimpleName()), null, mStartId); 
```

我还没有尝试过，但可能会朝着正确的方向轻推。虽然我认为它可能不会做任何事情，因为它只会停止运行服务。

否则，您将不得不制作自己的 IntentService ，您可以在其中触发删除意图..可能值得轻推@commonsguy

干杯，
克里斯

# ant - 如何将应用程序的控制台输出提取到 Jenkins 控制台输出？

> ID：12087500
> 
> 赞同：1
> 
> 时间：2012-08-23T08:19:22.813
> 
> 标签：ant, jenkins, aix, jenkins-plugins

我有一个通过 Jenkins 在 AIX 平台上运行的应用程序（AIX 是从节点）。当我在 Windows 上运行同一个应用程序时，我可以通过 Jenkins 的控制台看到应用程序的所有输出，但是当我在 AIX 上运行同一个应用程序时，我不仅可以看到任何东西，除了我在 ANT 脚本中定义的内容。是否有任何方法或任何可用的插件允许 Jenkins 将所有输出提取到其控制台输出窗口。如果没有，那么有什么方法可以通过 ANT 完成。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:53:14.983

这可以通过 ANT 完成。有一个名为“spawn”的属性，如果它被定义并设置为 false，那么我可以在 Jenkins 控制台上看到我的输出。

# c# - Is advanced formatting supported for a DataGridView's TopLeftHeaderCell?

> ID：12087506
> 
> 赞同：0
> 
> 时间：2012-08-23T08:19:35.893
> 
> 标签：c#, forms, user-interface, datagridview

My DataGridView's `TopLeftHeaderCell` value displays information about columns and rows like this:

> Date \ Value

Is there any better way to display this information? For example, I'd like to have a line from top left to bottom right corner of the cell and have "Date" and "Value" words on each side of the line. Is anything like that possible?

![enter image description here](../Images/44f1cc009c26942b0105227bbd85a3c7.png)

# java - 为什么当类从 Thread 继承或实现接口时无法转换为 $Proxy0？

> ID：12087509
> 
> 赞同：1
> 
> 时间：2012-08-23T08:19:36.003
> 
> 标签：java, netbeans, aop

我尝试实现 AOP，但`(java.lang.ClassCastException) java.lang.ClassCastException: $Proxy0 cannot be cast to myPackage.Person`在 (2) 行出现异常。可能是什么问题呢？`Person`必须是线程，所以它扩展了类`Thread`。

**主要的**

```
1\. ApplicationContext ctx = new ClassPathXmlApplicationContext("config/appContext.xml");
2\. Person p = (Person)ctx.getBean("p1");
3\. p.start(); 
```

**人**

```
public class Person extends Thread{

    private String name;

    public Person(String name) {
        setPersonName(name);
    }

    public void setPersonName(String name) {
        this.name = name;
    }    
} 
```

**方面**

```
public class LogSettersCalls {

    public void logSetterCall(JoinPoint theJoinPoint)
    {
        String methodName = theJoinPoint.getSignature().getName();
        Object newValue = theJoinPoint.getArgs()[0];
        Object theObject = theJoinPoint.getTarget();
        System.out.println(theObject );
    }
} 
```

**配置**

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd"
       default-lazy-init="true">

    <aop:config>
        <aop:pointcut expression="execution(void set*(*))" id="theSettersLogger" />
        <aop:aspect ref="logSettersCallsBean">
            <aop:before pointcut-ref="theSettersLogger" method="logSetterCall"/>
        </aop:aspect>
    </aop:config>
   <bean id="logSettersCallsBean" class="aop.LogSettersCalls" />

    <bean id="p1" class="myPackage.Person" >    
        <constructor-arg index="0" type="java.lang.String" value="igor"/>
    </bean>
</beans> 
```

df

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:23:08.027

撇开我不确定它是否直观或是否适合派生（你不能使用组合或类似的东西吗？）这一事实不谈`Person`，`Thread`我怀疑问题是 AOP 正在重写你的类，它不再是`Person`.

我会将实现 ( `PersonImpl`) 与合适的接口 ( `Person`) 分开，然后演员表应该可以工作。

# android - 检查 SDCard 是否存在，布尔值始终为真

> ID：12087510
> 
> 赞同：21
> 
> 时间：2012-08-23T08:19:48.920
> 
> 标签：android, splash-screen, android-sdcard

在我的启动画面中，我想检查手机是否有 SDCard。布尔语句如下：

```
 Boolean isSDPresent = android.os.Environment.getExternalStorageState()
            .equals(android.os.Environment.MEDIA_MOUNTED ); 
```

所以，如果我的手机插槽中有 SDCard，这个布尔值将返回 true，到目前为止一切都很好。当我从设置菜单转到“卸载 SDCard”并删除 SDCard，然后终止应用程序并再次启动它时，布尔值也将为真。

如果我`Astro File Manager`在卸载和删除 sdcard 后启动，我仍然可以访问`/mnt/sdcard`路径，为什么？

我怎样才能做到这一点？

提前致谢！

**编辑**

使用以下代码进行测试：

```
File path = Environment.getExternalStorageDirectory(); 
String pathS = path.getPath(); 
```

当 SDCard 在插槽中时，`pathS`contains `mnt/sdcard`，但是当我移除 SDCard 时，`pathS`它仍然`/mnt/sdcard`...

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-23T08:22:51.433

我发现手机，比如三星的 Galaxy 手机，`/mnt/sdcard`指向的是内部存储器，而不是预期的外部 SD 卡。

通过调用[Environment.isExternalStorageRemovable()](http://developer.android.com/reference/android/os/Environment.html#isExternalStorageRemovable())可以知道[Environment.getExternalStorageDirectory()返回的路径是否真的是外部 SD 卡](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory())

只是想从 getExternalStorageDirectory() 的文档中添加这个重要说明：

> 注意：不要被这里的“外部”这个词弄糊涂了。最好将此目录视为媒体/共享存储。它是一个文件系统，可以保存相对大量的数据，并且在所有应用程序之间共享（不强制执行权限）。传统上这是一张 SD 卡，但它也可以作为设备中的内置存储实现，与受保护的内部存储不同，并且可以作为文件系统安装在计算机上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T08:30:02.380

不应该是：

```
boolean isPresent = Environment.getExternalStorageState().equals(
   Environment.MEDIA_MOUNTED
); 
```

正如文档所述[`Environment.getExternalStorageState()`](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageState%28%29)：

> 获取**主要“外部”存储设备的当前状态**。

对于[`Environment.MEDIA_MOUNTED`-constant](http://developer.android.com/reference/android/os/Environment.html#MEDIA_MOUNTED)：

> `getExternalStorageState()``MEDIA_MOUNTED` **如果媒体存在并以读/写访问权限安装在其安装点，则**返回。

这将适用于 API 级别 1+

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-02T12:31:16.623

我修改了如果存在sd卡，则设置路径如果不设置在内部目录中

```
 Boolean isSDPresent = android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED);
    if(isSDPresent)
    {
      path = theAct.getExternalCacheDir().getAbsolutePath() + "/GrammarFolder";
    }
    else
    {
        path = theAct.getFilesDir() + "/GrammarFolder";
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-03T15:34:37.043

如果您想显示是否插入了 sdcard，那么只需复制粘贴此代码，它对所有设备都 100% 有效，代码在这里：

```
File file = new File("/mnt/extSdCard");
         try
         {
         File list[] = file.listFiles();
         Toast.makeText(getApplicationContext(), "Yes sdcard is mounted, file count "+list.length, Toast.LENGTH_LONG).show();
         }
         catch(NullPointerException o)
         {
         Toast.makeText(getApplicationContext(), "Sorry no sdcard is mounted:", Toast.LENGTH_LONG).show();
         } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-22T07:09:27.433

我们有两种记忆状态。一种是内置存储卡，另一种是外置SD卡。这取决于设备制造商如何制造存储卡路径。因此，如果您正在检查 sd 卡的可用性，那么由于内部存储器，它可能在两种情况下都返回 true。所以去这个方法：

```
File[] listOfInternalAndExternalStorage=context.getExternalFilesDirs(null); 
   if(listOfInternalAndExternalStorage.length>=2){
     // it contains sd card
   } 
```

上面的代码会检查 listOfInternalAndExternalStorage 是否大于 1 是否有外部存储，否则不包含 sd 卡。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-19T04:18:51.050

//如果你喜欢保存外部试试这个...

```
public  String preferextstorage(Context con){
    int version = Build.VERSION.SDK_INT;
    String result=con.getFilesDir().getPath();
    if (version>=19) {
    File[] listOfInternalAndExternalStorage = con.getExternalFilesDirs(null);
    if (listOfInternalAndExternalStorage.length >= 2) {
            // it contains sd card
            if (listOfInternalAndExternalStorage[1]==null){
                result=listOfInternalAndExternalStorage[0].getPath();
            }else
            {
                result=listOfInternalAndExternalStorage[1].getPath();
            }
            return result;
        }
    }
    return result;
} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-08-23T08:56:32.803

此代码片段可能有助于您检测和处理三星设备的异常：

```
public static String getExternalStorage() {

    String str = Environment.getExternalStorageDirectory().getAbsolutePath();
    if ( isSamsungDevice() ) {
        if ( isSamsungExternalSDMounted() ) {
            str += "/external_sd";
        }
    }
    return str;
}

private static boolean isSamsungDevice() {

    return new File( Environment.getExternalStorageDirectory().getAbsolutePath() + "/external_sd" ).exists();
}

private static boolean isSamsungExternalSDMounted() {

    return exec( "mount" ).indexOf( "external_sd" ) >= 0;
}

public static String exec( String paramString ) {

    try {
        String str = "";
        InputStream localInputStream = Runtime.getRuntime().exec( paramString ).getInputStream();
        byte[] arrayOfByte = new byte[1024];
        StringBuilder localStringBuilder = new StringBuilder();
        while ( true ) {

            int i = localInputStream.read( arrayOfByte, 0, arrayOfByte.length );
            if ( i == -1 ) {
                str = localStringBuilder.toString();
                break;
            }

            localStringBuilder.append( new String( arrayOfByte, 0, i ) );
        }

        return str;
    } catch ( IOException e ) {
        e.printStackTrace();
        return null;
    }
} 
```

# symfony - 我可以在 TWIG 中使用可变变量吗？

> ID：12087513
> 
> 赞同：0
> 
> 时间：2012-08-23T08:20:08.163
> 
> 标签：symfony, twig

我使用 symfony2 和 TWIG，我想使用一些全局变量来指向页面中平板电脑的索引：

**应用程序/配置/参数.ini**

```
tab_branch="1" 
```

**应用程序/配置/config.yml**

```
twig:
    globals:
        tab_branch: %tab_branch% 
```

**src/ACME/BranchBundle/Controller/defaultController.php**

```
/**
 * @Template()
 */
public function showAction($id) {
    ...
    return array(
        'tab' => 'tab_branch',
    );
} 
```

**src/ACME/BranchBundle/Resources/views/default/show.html.twig**

```
<input type="hidden" id="tablndex" value="{{ {{ tab }} }}" />  //not working 
```

我真正想做的就是让`{{ tab }}`被解析到`tab_branch`，然后`{{ tab_branch }}`被解析到`1`（就像`$$foo`在PHP中一样），我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:42:39.700

我使用 twig 语法在数据中的任何位置引用其他变量中的变量：

```
foo: "{{ bar.baz }}/quu.txt"
bar:
    baz: /tmp 
```

然后我渲染直到结果不再改变：

```
 while( $template !== ($result = $twig->render($template, $data)) )
    {
        $template = $result;
    } 
```

这是

*   不优雅：每个变量值都应该在嵌入之前呈现
*   不足：变量名在使用前没有渲染，所以 foo.{{i}} 不起作用
*   简单：我不必引用过滤器或代码，只需引用变量。
*   小：上面的实现很短，希望很清楚。也可以是单行递归方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:09:40.870

编写一个自定义函数来允许这样的评估。

您可能对此提案[`eval`功能感兴趣](https://github.com/fabpot/Twig-extensions/pull/53/files)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T08:39:41.187

这不能按照您尝试的方式完成，twig 不能那样工作。如果选项卡的可能值不多，您可以执行以下操作：

```
{% if tab == 'tab_branch' %}
    {{tab_branch}}
{% else if tab == 'other_tab' %}
    {{other_tab}}
{% endif %} 
```

我知道，不是很优雅...

# iphone - iphone开发：如何调用函数

> ID：12087517
> 
> 赞同：-4
> 
> 时间：2012-08-23T08:20:23.210
> 
> 标签：iphone, objective-c, function, methods, method-call

假设我有一个 void 函数，它只是`NSLog(@"Call me");`在它的身体里。

在我看来，我怎么能像每十秒钟一样调用它。我知道这听起来像是非常初学者的问题，但我真的需要它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T08:21:49.960

```
NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:10 target:self selector:@selector(yourMethod) userInfo:nil repeats:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:22:51.343

使用 NSTimer 类 [NSTimer scheduledTimerWithTimeInterval:10.0 target:self 选择器:@selector(makeMyProgressBarMoving) userInfo:nil repeats:YES]

# facebook - 使用 PHP SDK 3.2.0 几个小时后，长寿命页面访问令牌过期

> ID：12087518
> 
> 赞同：0
> 
> 时间：2012-08-23T08:20:26.390
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk, access-token, facebook-access-token

在我的应用高级设置中启用了删除 offline_access 权限；

我首先调用以下函数：

```
public function app_login( $url_redirect=null ) {
        $facebook = new Facebook(array(
            'appId' => APP_ID,
            'secret' => APP_SECRET,
            'cookie' => true,
            'fileUpload' => true
        ));

        //check if redirection url specified
        if( $url_redirect != null )
            $go_to = $url_redirect;
        else
            $go_to = 'APP_URL';

        $loginParams = array(

            'scope'         => 'publish_stream,user_activities,user_checkins,user_interests,user_location,manage_pages,email,read_insights,read_stream',
            'redirect_uri'  => $go_to
        );
        $login_url = $facebook->getLoginUrl( $loginParams );

        if ( ! $facebook->getUser() ) {

            echo '<script>window.top.location = "' . $login_url . '";</script>';

            return true;
        }

        return $facebook;

    } 
```

返回一个名为 $facebook 的值，然后我通过以下调用请求扩展用户令牌：

```
$facebook->setExtendedAccessToken();
$extended_token = $facebook->getAccessToken(); 
```

将 $extended_token 保存在我的数据库中，然后获取用户页面

```
$pages = @json_decode( FB_Actions::file_get_contents_curl( 'https://graph.facebook.com/' . $facebook->getUser() . '/accounts?access_token=' . $extended_token ) ); 
```

并将页面令牌保存在我的数据库中。当我稍后尝试使用这些令牌时，我收到一条回复说令牌已过期。

有人知道我的问题是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T23:08:45.777

我遇到了同样的问题并在这里找到了解决方案-[使用 setExtendedAccessToken() 获取长期访问令牌返回短期令牌](https://stackoverflow.com/questions/12196958/getting-long-lived-access-token-with-setextendedaccesstoken-returns-short-live)

```
// ask for the extended token and get it from session ...
$facebook->setExtendedAccessToken();
$access_token = $_SESSION["fb_".FB_APP_ID."_access_token"];
// now set it into the facebook object ....
$facebook->setAccessToken($access_token);
// now our fb object will use the new token as usual ...
$accessToken = $facebook->getAccessToken(); 
```

还使用 facebook 调试工具 - [https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

# mysql - 如何在mysql数据库中查询10条随机唯一记录？

> ID：12087519
> 
> 赞同：6
> 
> 时间：2012-08-23T08:20:26.487
> 
> 标签：mysql

> **可能重复：**
> [如何在每次执行 SQL 查询时选择随机唯一记录](https://stackoverflow.com/questions/4966154/how-to-select-random-unique-records-on-each-execution-of-the-sql-query)

我有该结构的数据库：

```
id int
image_name varchar(200)
category_id int 
```

大约有200条记录，id是唯一的，大约有20个类别，我的iamges就在它们之间进行分类。

你能帮我查询一下，它会给我 10 条具有唯一 category_ids 的记录吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T08:22:52.740

```
select DISTINCT(category),id,image_name FROM images 
  WHERE id=
    (FLOOR(RAND() * 
           (SELECT COUNT(*) FROM images )
          )
    ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T08:26:11.520

```
SELECT DISTINCT(category),id,image_name FROM images ORDER BY RAND() LIMIT 10 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-23T08:26:35.323

```
SELECT DISTINCT category_id,id,image_name FROM images ORDER BY RAND() LIMIT 10 
```

# ios - UITableView 区分滑动删除和多行选择

> ID：12087522
> 
> 赞同：1
> 
> 时间：2012-08-23T08:20:43.023
> 
> 标签：ios, uitableview, edit

我正在使用 UITableView，并希望同时支持 Apple 提供的标准编辑工具。到目前为止，我可以在单元格上滑动以显示“删除”按钮，然后点击右上角的“编辑”按钮进入多行编辑模式。这工作正常。

问题是，我希望我的 tableView 就像邮件应用程序一样，在使用滑动手势进入编辑模式时“除了显示删除按钮之外什么都不做”，在进入时“显示垃圾箱按钮（任何地方）”多行编辑模式。我无法弄清楚我如何知道我处于哪种编辑模式......

例如，我添加了`setEditing`隐藏标签栏的方法（只是为了检查我的表格的行为）：

```
-(void)setEditing:(BOOL)editing animated:(BOOL)animated 
{

    self.tableView.allowsMultipleSelectionDuringEditing = editing;
    [super setEditing:editing animated:animated];

    if (editing) {

        self.tabBarController.tabBar.hidden = YES;

    } else {

        self.tabBarController.tabBar.hidden = NO;
    }

} 
```

现在，当我在单元格上滑动时，或者当我点击编辑按钮时，标签栏被隐藏，之后又恢复正常。我只想在点击编辑按钮时隐藏它。

我应该在哪里以及如何做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:52:46.447

为什么不把发件人交给编辑方法，像这样呢？

```
-(void)setEditing:(BOOL)editing animated:(BOOL)animated sender:(id)sender
{

    self.tableView.allowsMultipleSelectionDuringEditing = editing;
    [super setEditing:editing animated:animated];
    if (editing && [sender isKindOfClass:[UIButton class]]) 
    {
        self.tabBarController.tabBar.hidden = YES;
    } 
    else 
    {
        self.tabBarController.tabBar.hidden = NO;
    }

} 
```

# java - 为什么 AndEngine 的 CollisionHandler 在一次碰撞中产生多个事件？

> ID：12087523
> 
> 赞同：2
> 
> 时间：2012-08-23T08:20:46.887
> 
> 标签：java, android, collision-detection, andengine

我正在写一个**摆动钟摆**的 GameActivity（在 AndEngine 中）。

在应用`CollisionHandler`时，这会产生**一系列的碰撞事件**而不是一个？？实际上，我希望它只在精灵碰撞时执行**一次。**

**我的情况**：当与**`movingBall`**相撞时**`mLeftWall`**，它叫**`5 times`**of **`onCollision()`**；这是不正常的，我预计只有一次。

我应该`ContactListener`改用并注册`PhysicsWorld`吗？这是我的代码：

**MyGameActivity.java：**

```
/** List of objects to check collision of any animating objects. E.g: walls  */
private ArrayList<IShape> mCollidingTargetList = new ArrayList<IShape>();

/** user-defined collision handler */
PendulumCollisionCallback collideActionCallback = new PendulumCollisionCallback();

@Override
public Scene onCreateScene() 
{
    final Scene scene = super.onCreateScene();

    final VertexBufferObjectManager vertexBufferObjectManager = this.getVertexBufferObjectManager();

    //Create walls
    mWallLeft = new Rectangle(0, 0, 2, mCameraHeight, vertexBufferObjectManager);
    mWallRight = new Rectangle(mCameraWidth - 2, 0, 2, mCameraHeight, vertexBufferObjectManager);
    PhysicsFactory.createBoxBody(mPhyscisWorld, mWallLeft, BodyType.StaticBody, mWallFixtureDef);
    PhysicsFactory.createBoxBody(mPhyscisWorld, mWallRight, BodyType.StaticBody, mWallFixtureDef);
    scene.attachChild(mWallLeft);
    scene.attachChild(mWallRight);

    //Create movingBall - the pendulum ball
    final AnimatedSprite movingBall = new AnimatedSprite(mCenterX, mCenterY, this.mCircleFaceTextureRegion, this.getVertexBufferObjectManager());
    final Body ballBody = PhysicsFactory.createCircleBody(this.mPhysicsWorld, movingBall, BodyType.DynamicBody, mObjectFixtureDef);
    movingBall.setUserData(ballBody); // for getting the body attached with UI

    //..... Stuff to create anchorBody and RevoluteJoint with the movingBall

    //list of bodies where sprites collide
    this.mCollidingTargetList.add(mWallLeft);
    this.mCollidingTargetList.add(mWallRight);

    //Manage user-defined collision handler: movingBall collides with walls
    CollisionHandler pendulumCollideHandler = new CollisionHandler(collideActionCallback, movingBall, mCollidingTargetList);
    scene.registerUpdateHandler(pendulumCollideHandler);

    return scene;
} 
```

**PendulumCollisionCallback.java:**

```
public class PendulumCollisionCallback implements ICollisionCallback
{
    public PendulumCollisionCallback()
    { }

    /**
     * @param animatedShape
     *      Entity to check collision with other targets
     * @param pTargetShape
     *      Target to check the collision
     * @return <code>true</code> to proceed, <code>false</code> to stop further collosion-checks.
     */
    @Override
    public boolean onCollision(IShape animatedShape, IShape pTargetShape) 
    {
        String pendulPos = String.format("Pendul:x=%f, y=%f", animatedShape.getX(), animatedShape.getY());      
        Log.d("COLLIDE", pendulPos);
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T03:53:17.787

我发现了这个问题。这是因为分离`Physics Handler`和场景的`UpdateHandler`工作顺序。

虽然`PhysicsWorld`仍在控制身体碰撞，但身体仍在向前移动几帧 => 以便 UI 精灵（与此身体相连）的位置与碰撞对象相交。在这些帧期间，`updateHandler`产生碰撞事件`CallbackHandler`。

解决方案是添加**布尔标志**的一种棘手方法，该标志在第一次碰撞时**设置并在完成碰撞时****取消设置**（尽管这不是很好）。

P/S：我的帧率观察形式**`FPSLogger`**是`~88,9 FPS`。

# android - facebook 墙帖描述中的换行符

> ID：12087525
> 
> 赞同：0
> 
> 时间：2012-08-23T08:20:51.853
> 
> 标签：android, facebook

我真的需要在 facebook 墙贴的描述中添加一个**换行符**。有一个使用`<center></center>`标签的黑客攻击，但它不再起作用了。我正在使用适用于 Android 的 Facebook API：

```
public Bundle createFacebookMsg() {
    Bundle params = new Bundle();
    ...
    params.putString("description", "my custom string with LINE BREAKS");

    // does not work any more
    // params.putString("description", "line1<center></center>line2");

    ...
    return params;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-16T22:36:28.947

这对我有用：

```
StringBuilder messageData = new StringBuilder(title).append('\n')
    .append('\n').append(message).append('\n').append('\n')
    .append(description);
// Message
postParams.putString("message", messageData.toString()); 
```

# asp.net - 在从视图模型构建的 asp.net 表单中实现验证的最简单方法是什么？

> ID：12087529
> 
> 赞同：0
> 
> 时间：2012-08-23T08:21:08.710
> 
> 标签：asp.net, vb.net, validation, asp.net-mvc-2

我有一个模型类，我用它来创建表单

```
Public Class Users
    Public Property Id As Integer
    Public Property UserName As String
    Public Property UserNin As Int16
    Public Property UserType As String
    Public Property Password As String

    Property UserTypes As IEnumerable(Of SelectListItem) = {
            New SelectListItem With {.Value = "admin", .Text = "Admin"},
            New SelectListItem With {.Value = "doctor", .Text = "Doctor"},
            New SelectListItem With {.Value = "reception", .Text = "Receptionist"}
    }
End Class 
```

我的 View 类，使用上面的 ViewModel 使用 HTML Helpers 生成表单

```
<% Using (Html.BeginForm("Create", "User", FormMethod.Post))%>
    <table>
        <tr>
            <td>
                User Name
            </td>
        </tr>
        <tr>
            <td>
                <%= Html.TextBoxFor(Function(x) x.UserName)%>
            </td>
        </tr>
        <tr>
            <td>
                User NIN
            </td>
        </tr>
        <tr>
            <td>
                <%= Html.TextBoxFor(Function(x) x.UserNin)%>
            </td>
        </tr>
        <tr>
            <td>
                Password
            </td>
        </tr>
        <tr>
            <td>
                <%= Html.PasswordFor(Function(x) x.Password)%>
            </td>
        </tr>
        <tr>
            <td>
                <%= Html.DropDownListFor(Function(x) x.UserType, Model.UserTypes)%>
            </td>
        </tr>
        <tr>
            <td>
                <input type="submit" value="Add New User" />
            </td>
        </tr>
    </table>
<% End Using%> 
```

现在为这种情况添加验证的最佳方法是什么？

* * *

更新：

这是我在另一种情况下尝试过的，但我仍然没有看到任何验证，该操作被调用并处理。

这是我的模型课

```
Public Class LoginUser
    <Required()>
    Public Property UserName As String

    <Required()>
    <StringLength(8)>
    Public Property Password As String

End Class 
```

这是部分视图

```
<% Using (Html.BeginForm("Login", "User", FormMethod.Post))%>
<% Html.EnableClientValidation()%>
<table ID="loginTable" runat="server">
    <tr>
        <td>
            <label for="username">UserName</label>
        </td>
    </tr>
    <tr>
        <td>
            <%= Html.TextBoxFor(Function(x) x.UserName)%>
            <%= Html.ValidationMessageFor(Function(x) x.UserName) %>
        </td>
    </tr>
    <tr>
        <td>
            <label for="password">Password</label>
        </td>
    </tr>
    <tr>
        <td>
            <%= Html.TextBoxFor(Function(x) x.Password)%>
            <%= Html.ValidationMessageFor(Function(x) x.Password)%>
        </td>
    </tr>
    <tr>
        <td>
            <input type="submit" value="Login" />
        </td>
    </tr>
</table>
<% End Using%> 
```

登录操作

```
<HttpPost()>
Function Login() As ActionResult
    If ModelState.IsValid Then
        Dim sql As String
        Dim username As String = Request.Form("username").ToString
        Dim password As String = Request.Form("password").ToString
        Dim dbHelper As New DBHelper(False)

        sql = "SELECT * FROM " & _tblName & " WHERE username = '" & username & "' and password = '" & password & "'"
        Try
            Dim dr As DataRow = dbHelper.ExecuteAndGetRow(sql)

            If Convert.ToInt16(dr.Item(0).ToString) > 0 Then
                Dim nin As String = dr.Item(4)
                Session("loggedin") = 1
                Session("logged") = dr.Item(0)
                Session("logged_nin") = dr.Item(4)
                ViewData("message") = "Login Successful"
                ViewData("show_loginForm") = False
            Else
                ViewData("message") = "Login failed"
                ViewData("show_loginForm") = True
            End If
        Catch ex As Exception
            ViewData("message") = "Login failed"
            ViewData("show_loginForm") = True
        End Try

        Return View()
    Else
        Return View()
    End If
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:24:13.317

您可以使用数据注释。例如，如果该字段是必需的，则使用以下属性`UserName`对其进行装饰：`<Required>`

```
<Required>
Public Property UserName As String 
```

并在视图中为错误消息放置一个相应的占位符：

```
<%= Html.TextBoxFor(Function(x) x.UserName) %>
<%= Html.ValidationMessageFor(Function(x) x.UserName) %> 
```

或者，如果您想将所有错误消息集中在一个地方，您可以使用 ValidationSummary 助手：

```
<%= Html.ValidationSummary() %> 
```

`ModelState.IsValid`在 POST 控制器操作中，您可以使用布尔属性验证模型是否有效：

```
<HttpPost()>
Function Create(model As Users) As ActionResult
    If ModelState.IsValid Then
        ' validation succeeded => do some processing and redirect
        Return RedirectToAction("Create")
    End If

    ' validation failed => redisplay the same view so that the user
    ' can fix the errors
    Return View(model)
End Function 
```

这是[MSDN 上的一篇文章，](http://msdn.microsoft.com/en-us/library/ee256141%28VS.98%29.aspx)它也解释了这一点。

# javascript - 显示时getElementById（）无法获取元素：无

> ID：12087532
> 
> 赞同：5
> 
> 时间：2012-08-23T08:21:14.430
> 
> 标签：javascript, asp.net-ajax

当要查找的元素 has 时，我们有几种情况`$get('foo')`或`document.getElementById('foo')`失败`style="display:none;"`。这似乎在某些浏览器中有效，但在其他浏览器中无效；特别是下面显示的情况在具有兼容模式的 IE9 中可以正常工作，但在关闭兼容模式时会失败。

谁能解释为什么会发生这种情况，以及我们如何解决它？下面是一个例子。

我们的 ASPX 页面包含

```
<span id="JobAddressCheckBoxWrapper" style="display: none;">
  <asp:CheckBox ID="JobAddressCheckBox" CssClass="DefaultTextCell" runat="server" Text="__Job address"
    Style="margin-right: 2em;" onclick="ShowJobAddress();" />
</span>
<span id="PredefinedReplyCheckBoxWrapper">
  <asp:CheckBox ID="PredefinedReplyCheckBox" CssClass="DefaultTextCell" runat="server"
    Text="__Pre-defined reply" onclick="ShowReplies()" AutoPostBack="false" Style="margin-right: 2em;" />
</span> 
```

这导致生成的 HTML

```
<span style="display: none;" id="JobAddressCheckBoxWrapper">
  <span style="margin-right: 2em;" class="DefaultTextCell">
    <input id="JobAddressCheckBox" onclick="ShowJobAddress();" name="JobAddressCheckBox" type="checkbox">
    <label for="JobAddressCheckBox">Job address</label>
  </span>
</span>
<span id="PredefinedReplyCheckBoxWrapper">
  <span style="margin-right: 2em;" class="DefaultTextCell">
    <input id="PredefinedReplyCheckBox" onclick="ShowReplies();" name="PredefinedReplyCheckBox" type="checkbox">
    <label for="PredefinedReplyCheckBox">Predefined reply</label>
  </span>
</span> 
```

以下 Javascript 语句应导致包装器变量包含对象，但在某些浏览器或 IE9 的兼容模式中，jobAddressWrapper 的值为 null。预定义ReplyWrapper 的值永远不会为空。它们之间的唯一区别是 JobAddressCheckboxWrapper 具有`style="display:none;"`.

```
var jobAddressWrapper = $get('JobAddressCheckboxWrapper');
var predefinedReplyWrapper = $get('PredefinedReplyCheckBoxWrapper'); 
```

或者

```
var jobAddressWrapper = document.getElementById('JobAddressCheckboxWrapper');
var jobAddressWrapper = document.getElementById('PredefinedReplyCheckBoxWrapper'); 
```

元素被 span 包裹的 HTML 模式是不相关的；在其他情况下，元素没有被 span 包裹，但如果有`style="display:none;"`.

**更新（回应评论等）：**

1.  $get 提供了 Sys.UI.DomElement 类的 getElementById 方法的快捷方式。[更多信息在这里](http://msdn.microsoft.com/en-us/library/bb397717.aspx)
2.  这些调用是在从 onload 调用和响应用户交互的函数中进行的。在任何一种情况下都会出现问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T06:17:09.817

这确实是一个奇怪的问题，所以在进行任何其他操作之前，请检查代码是否存在拼写错误和范围混淆！这也是非常*非常*古老的 - 所以希望你还没有遇到这个问题。=)

但是，当您试图解决此类问题，甚至更好地找到问题的原因时，您可能会找到一种解决方案通常会有所帮助。使用 jQuery selection `$('#AnyID')`，如果您不熟悉，请注意 css # 语法。

浏览器在尝试更加兼容方面已经走了很长一段路，还有很长的路要走。早些时候，我经常使用 jQuery 来推断为什么 vanilla JS 指令在一个浏览器中没有按照我想要的方式工作，而在另一个浏览器中却可以工作。通常我会发现我对 JS 的理解不够好，而 jQuery 只知道我需要学习的东西 =)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-08T15:29:52.110

这个答案可能与问题的每个实例都不相关，但我在使用 ASP.NET 母版页时遇到了它；

使用 ContentPlaceHolderID="MainContent"，我的 div id="IdValidationErrorDiv" 实际上具有渲染的 id 为“MainContent_IdValidationErrorDiv”。

使用此 ID 调用 getElementById 成功。

# c# - Analog of VBA`s FillBLOB in c# while inserting large string into ntext

> ID：12087536
> 
> 赞同：0
> 
> 时间：2012-08-23T08:21:22.050
> 
> 标签：c#, sql-server, vba

Im converting code from VBA into c# and it is all about creating looong string and inserting it into MSSQL ntext field, im not kinda sure about the string`s size, but it looks rather too long for me. In VBA code insert statement looks like this:

```
With rstFormat
    .AddNew
.Fields("field").Value      = b
.Fields("field2").Value     = "a"
FillBLOB .Fields("loongstring"), loongstring 
```

So, i guess, FillBlob is a good idea, but how i can do the same with c#?

I am using ADO.NET.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:47:41.677

What about assigning a string variable to the NTEXT parameter like this:

```
SqlCommand mySqlCommand_new;
mySqlCommand_new = SQLConnection.CreateCommand();
mySqlCommand_new.CommandText = "insert table (column) values(@text)";
mySqlCommand_new.Parameters.Add(new SqlParameter("@text", SqlDbType.NText));
mySqlCommand_new.Parameters["@code"].Value = text;
mySqlCommand_new.ExecuteNonQuery(); 
```

[http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/2eee04ec-7510-42aa-97ea-8163b40c4c9b/](http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/2eee04ec-7510-42aa-97ea-8163b40c4c9b/)

# vim - 在gvim中调整窗口框架大小时保持拆分窗口比例

> ID：12087537
> 
> 赞同：2
> 
> 时间：2012-08-23T08:21:43.910
> 
> 标签：vim

我主要在带有窗口拆分功能的 Windows 上使用 gvim（：vsp 等）。当我调整框架（GUI 窗口）的大小时，我希望它们保持比例。是否有捷径可寻？

即，当我使用 :vsp 时，左右窗口都占据了框架的 50%。假设我使框架宽两倍。现在左边的窗口要小得多——分成 25%/75%。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T08:29:38.743

尝试这个：

```
:au VimResized * wincmd = 
```

当你调整窗口大小时，`:wincmd =`将被调用。

# https - HTTPS 上的 FusionCharts，混合内容警告

> ID：12087541
> 
> 赞同：0
> 
> 时间：2012-08-23T08:21:59.310
> 
> 标签：https, fusioncharts

我在 IE8 中遇到了可怕的“混合内容”警告，在检查并消除了我的代码中的任何“http:”痕迹后，我发现以下行是原因：

```
<script type="text/javascript" src="/plugins/FusionCharts_Intranet/Charts/FusionCharts.js"></script> 
```

我在 FusionCharts 网站上读到，当使用某些方法时，它只能通过 HTTPS 工作。但是，如果我创建一个仅包含上述行的测试页面，则会引发错误。

有谁之前经历过这个吗？我很高兴尝试不同的数据检索方法（json 等），但是在生成任何图表之前就抛出错误的事实令人费解。

在 IE9 中我得到同样的错误，但它是“可绕过的”。在 IE8 中，它完全停止了页面加载（它似乎停止了 jquery 的加载，这是在加载页面时使用的）。

谢谢，瓦卢克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:38:26.143

我确信即将发布的 FusionCharts 将修复此问题。但在此之前，有一个简单的代码编辑可以抑制这些错误：

1.  `FusionCharts.js`在文本编辑器中打开文件。
2.  检查是否发布版本（在文件注释中说`@version fusioncharts/3.2.4-release.8565`（对于以后的版本，这可能不起作用。）
3.  查找文本`src=javascript:void(0)`（应该只有一个实例）
4.  将文本替换为`src='//:'`
5.  保存文件！

这应该可以修复错误。

# c# - 启动应用程序无法找到客户端 WCF 服务的端点配置

> ID：12087550
> 
> 赞同：0
> 
> 时间：2012-08-23T08:22:16.577
> 
> 标签：c#, wcf

我有一个 ServiceLibrary Application(Host) - LTService，它是我的应用程序的起点。它的合约接受三个参数用户名、密码和 xmlstring。在验证它之后，我正在验证和反序列化 xmlstring。现在我在同一个解决方案中有另一个 ServiceLibrary Application(Host) - WCFServiceDialler。它接受用户名、密码和我从上面反序列化 xml 的过程中获得的对象。

我让我的客户在另一个 Web 应用程序 prj 中使用 DiallerService - partnercontract 我在其中添加服务引用，它可以找到 WCFServiceDialler 公开的合同。但是当我运行以下代码时：

```
> LeadTransfer.PartnerContracts.DiallerServiceReference.DiallerClient
> client = new
> LeadTransfer.PartnerContracts.DiallerServiceReference.DiallerClient("wsHttpBinding");
>         WCFServiceDialler.DiallerData diallerData = new WCFServiceDialler.DiallerData();
>         diallerData.Username = "xxxx";
>         diallerData.Password = "xxx";
>         DiallerServiceReference.CarLeadDO temp = new DiallerServiceReference.CarLeadDO();
>         diallerData.carLeadDO = (DiallerServiceReference.CarLeadDO)Convert.ChangeType(tempDataMediator,
> typeof(DiallerServiceReference.CarLeadDO));
>         client.DiallerProcess(diallerData); 
```

第一条语句引发异常

> 在 ServiceModel 客户端配置部分中找不到名称为“wsHttpBinding”和合同“DiallerServiceReference.IDialler”的端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此名称匹配的端点元素。

我无法弄清楚它无法找到端点。我的启动应用程序都是上面的 WCF 服务项目。

以下是我的客户端服务应用程序中的 wsdl 定义：

```
 <?xml version="1.0" encoding="utf-8"?>
<wsdl:definitions xmlns:wsap="http://schemas.xmlsoap.org/ws/2004/08/addressing/policy" xmlns:wsa10="http://www.w3.org/2005/08/addressing" xmlns:tns="http://tempuri.org/" xmlns:msc="http://schemas.microsoft.com/ws/2005/12/wsdl/contract" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:wsx="http://schemas.xmlsoap.org/ws/2004/09/mex" xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema" name="Service" targetNamespace="http://tempuri.org/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
  <wsp:Policy wsu:Id="WSHttpBinding_IDialler_policy">
    <wsp:ExactlyOne>
      <wsp:All>
        <sp:SymmetricBinding xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
          <wsp:Policy>
            <sp:ProtectionToken>
              <wsp:Policy>
                <sp:SecureConversationToken sp:IncludeToken="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy/IncludeToken/AlwaysToRecipient">
                  <wsp:Policy>
                    <sp:RequireDerivedKeys />
                    <sp:BootstrapPolicy>
                      <wsp:Policy>
                        <sp:SignedParts>
                          <sp:Body />
                          <sp:Header Name="To" Namespace="http://www.w3.org/2005/08/addressing" />
                          <sp:Header Name="From" Namespace="http://www.w3.org/2005/08/addressing" />
                          <sp:Header Name="FaultTo" Namespace="http://www.w3.org/2005/08/addressing" />
                          <sp:Header Name="ReplyTo" Namespace="http://www.w3.org/2005/08/addressing" />
                          <sp:Header Name="MessageID" Namespace="http://www.w3.org/2005/08/addressing" />
                          <sp:Header Name="RelatesTo" Namespace="http://www.w3.org/2005/08/addressing" />
                          <sp:Header Name="Action" Namespace="http://www.w3.org/2005/08/addressing" />
                        </sp:SignedParts>
                        <sp:EncryptedParts>
                          <sp:Body />
                        </sp:EncryptedParts>
                        <sp:SymmetricBinding>
                          <wsp:Policy>
                            <sp:ProtectionToken>
                              <wsp:Policy>
                                <sp:SpnegoContextToken sp:IncludeToken="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy/IncludeToken/AlwaysToRecipient">
                                  <wsp:Policy>
                                    <sp:RequireDerivedKeys />
                                  </wsp:Policy>
                                </sp:SpnegoContextToken>
                              </wsp:Policy>
                            </sp:ProtectionToken>
                            <sp:AlgorithmSuite>
                              <wsp:Policy>
                                <sp:Basic256 />
                              </wsp:Policy>
                            </sp:AlgorithmSuite>
                            <sp:Layout>
                              <wsp:Policy>
                                <sp:Strict />
                              </wsp:Policy>
                            </sp:Layout>
                            <sp:IncludeTimestamp />
                            <sp:EncryptSignature />
                            <sp:OnlySignEntireHeadersAndBody />
                          </wsp:Policy>
                        </sp:SymmetricBinding>
                        <sp:Wss11>
                          <wsp:Policy />
                        </sp:Wss11>
                        <sp:Trust10>
                          <wsp:Policy>
                            <sp:MustSupportIssuedTokens />
                            <sp:RequireClientEntropy />
                            <sp:RequireServerEntropy />
                          </wsp:Policy>
                        </sp:Trust10>
                      </wsp:Policy>
                    </sp:BootstrapPolicy>
                  </wsp:Policy>
                </sp:SecureConversationToken>
              </wsp:Policy>
            </sp:ProtectionToken>
            <sp:AlgorithmSuite>
              <wsp:Policy>
                <sp:Basic256 />
              </wsp:Policy>
            </sp:AlgorithmSuite>
            <sp:Layout>
              <wsp:Policy>
                <sp:Strict />
              </wsp:Policy>
            </sp:Layout>
            <sp:IncludeTimestamp />
            <sp:EncryptSignature />
            <sp:OnlySignEntireHeadersAndBody />
          </wsp:Policy>
        </sp:SymmetricBinding>
        <sp:Wss11 xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
          <wsp:Policy />
        </sp:Wss11>
        <sp:Trust10 xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
          <wsp:Policy>
            <sp:MustSupportIssuedTokens />
            <sp:RequireClientEntropy />
            <sp:RequireServerEntropy />
          </wsp:Policy>
        </sp:Trust10>
        <wsaw:UsingAddressing />
      </wsp:All>
    </wsp:ExactlyOne>
  </wsp:Policy>
  <wsp:Policy wsu:Id="WSHttpBinding_IDialler_DiallerProcess_Input_policy">
    <wsp:ExactlyOne>
      <wsp:All>
        <sp:SignedParts xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
          <sp:Body />
          <sp:Header Name="To" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="From" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="FaultTo" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="ReplyTo" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="MessageID" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="RelatesTo" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="Action" Namespace="http://www.w3.org/2005/08/addressing" />
        </sp:SignedParts>
        <sp:EncryptedParts xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
          <sp:Body />
        </sp:EncryptedParts>
      </wsp:All>
    </wsp:ExactlyOne>
  </wsp:Policy>
  <wsp:Policy wsu:Id="WSHttpBinding_IDialler_DiallerProcess_output_policy">
    <wsp:ExactlyOne>
      <wsp:All>
        <sp:SignedParts xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
          <sp:Body />
          <sp:Header Name="To" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="From" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="FaultTo" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="ReplyTo" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="MessageID" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="RelatesTo" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="Action" Namespace="http://www.w3.org/2005/08/addressing" />
        </sp:SignedParts>
        <sp:EncryptedParts xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
          <sp:Body />
        </sp:EncryptedParts>
      </wsp:All>
    </wsp:ExactlyOne>
  </wsp:Policy>
  <wsdl:types>
    <xsd:schema targetNamespace="http://tempuri.org/Imports">
      <xsd:import schemaLocation="http://localhost:56435/Service.svc?xsd=xsd0" namespace="http://tempuri.org/" />
      <xsd:import schemaLocation="http://localhost:56435/Service.svc?xsd=xsd1" namespace="http://schemas.microsoft.com/2003/10/Serialization/" />
      <xsd:import schemaLocation="http://localhost:56435/Service.svc?xsd=xsd2" namespace="http://schemas.datacontract.org/2004/07/WCFServiceDialler" />
      <xsd:import schemaLocation="http://localhost:56435/Service.svc?xsd=xsd3" namespace="http://schemas.datacontract.org/2004/07/LeadTransfer.DiallerData.DataContracts.Car.Aviva" />
    </xsd:schema>
  </wsdl:types>
  <wsdl:message name="IDialler_DiallerProcess_InputMessage">
    <wsdl:part name="parameters" element="tns:DiallerProcess" />
  </wsdl:message>
  <wsdl:message name="IDialler_DiallerProcess_OutputMessage">
    <wsdl:part name="parameters" element="tns:DiallerProcessResponse" />
  </wsdl:message>
  <wsdl:portType name="IDialler">
    <wsdl:operation name="DiallerProcess">
      <wsdl:input wsaw:Action="http://tempuri.org/IDialler/DiallerProcess" message="tns:IDialler_DiallerProcess_InputMessage" />
      <wsdl:output wsaw:Action="http://tempuri.org/IDialler/DiallerProcessResponse" message="tns:IDialler_DiallerProcess_OutputMessage" />
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="WSHttpBinding_IDialler" type="tns:IDialler">
    <wsp:PolicyReference URI="#WSHttpBinding_IDialler_policy" />
    <soap12:binding transport="http://schemas.xmlsoap.org/soap/http" />
    <wsdl:operation name="DiallerProcess">
      <soap12:operation soapAction="http://tempuri.org/IDialler/DiallerProcess" style="document" />
      <wsdl:input>
        <wsp:PolicyReference URI="#WSHttpBinding_IDialler_DiallerProcess_Input_policy" />
        <soap12:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <wsp:PolicyReference URI="#WSHttpBinding_IDialler_DiallerProcess_output_policy" />
        <soap12:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="Service">
    <wsdl:port name="WSHttpBinding_IDialler" binding="tns:WSHttpBinding_IDialler">
      <soap12:address location="http://localhost:56435/Service.svc/ws" />
      <wsa10:EndpointReference>
        <wsa10:Address>http://localhost:56435/Service.svc/ws</wsa10:Address>
        <Identity xmlns="http://schemas.xmlsoap.org/ws/2006/02/addressingidentity">
          <Upn>Pandeysi@cis.ad.capita.co.uk</Upn>
        </Identity>
      </wsa10:EndpointReference>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions> 
```

第一个 LTService 应用程序的配置：

```
<system.serviceModel>
<services>
  <service behaviorConfiguration="http" name="TestCDLWCF.Service">
    <endpoint address="wstest" binding="wsHttpBinding" contract="TestCDLWCF.ILeadTransfer">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:8732/Design_Time_Addresses/TestCDLWCF/Service1/" />
      </baseAddresses>
    </host>
  </service>
  <service name="WCFServiceDialler.Service">
    <endpoint address="ws" binding="wsHttpBinding" bindingConfiguration=""
      contract="WCFServiceDialler.IDialler" />
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:8732/Design_Time_Addresses/WCFServiceDialler/Service/mex" />
      </baseAddresses>
    </host>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="http">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
    <behavior>
      <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpGetEnabled="true"/>
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>

  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" /> 
```

WCFServiceDialler 应用程序的配置：

```
 <system.serviceModel>
    <bindings>
      <wsHttpBinding>
        <binding name="binding" />
      </wsHttpBinding>
    </bindings>
    <services>
      <service name="WCFServiceDialler.Service">
        <endpoint address="ws" binding="wsHttpBinding" bindingConfiguration="binding"
          contract="WCFServiceDialler.IDialler" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8732/Design_Time_Addresses/WCFServiceDialler/Service/mex" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel> 
```

我的项目中使用 wcfdiallerservice 的配置：

```
 <system.serviceModel>
    <bindings>
        <wsHttpBinding>
            <binding name="WSHttpBinding_IDialler" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
                allowCookies="false">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <reliableSession ordered="true" inactivityTimeout="00:10:00"
                    enabled="false" />
                <security mode="Message">
                    <transport clientCredentialType="Windows" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="Windows" negotiateServiceCredential="true"
                        algorithmSuite="Default" />
                </security>
            </binding>
            <binding name="WSHttpBinding_IDialler1" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
                allowCookies="false">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <reliableSession ordered="true" inactivityTimeout="00:10:00"
                    enabled="false" />
                <security mode="Message">
                    <transport clientCredentialType="Windows" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="Windows" negotiateServiceCredential="true"
                        algorithmSuite="Default" />
                </security>
            </binding>
        </wsHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://localhost/Service.svc/ws" binding="wsHttpBinding"
            bindingConfiguration="WSHttpBinding_IDialler" contract="WCFServiceDialler.IDialler"
            name="WSHttpBinding_IDialler">
            <identity>
                <servicePrincipalName value="host/CIDDTS4FCMG4.cis.ad.capita.co.uk" />
            </identity>
        </endpoint>
        <endpoint address="http://localhost:56435/Service.svc/ws" binding="wsHttpBinding"
            bindingConfiguration="WSHttpBinding_IDialler1" contract="DiallerServiceReference.IDialler"
            name="WSHttpBinding_IDialler1">
        </endpoint>
    </client>
</system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:59:01.747

在您的服务客户端中，您正在创建客户端对象的实例并将其传递给应该存在于配置文件中的端点的名称：

```
LeadTransfer.PartnerContracts.DiallerServiceReference.DiallerClient client = new LeadTransfer.PartnerContracts.DiallerServiceReference.DiallerClient("wsHttpBinding"); 
```

您已在客户端配置文件中定义了以下端点：

```
 <client>  
        <endpoint address="http://localhost/Service.svc/ws" binding="wsHttpBinding"  
            bindingConfiguration="WSHttpBinding_IDialler" contract="WCFServiceDialler.IDialler"  
            name="WSHttpBinding_IDialler">  
            <identity>  
                <servicePrincipalName value="host/CIDDTS4FCMG4.cis.ad.capita.co.uk" />  
            </identity>  
        </endpoint>  
        <endpoint address="http://localhost:56435/Service.svc/ws" binding="wsHttpBinding"  
            bindingConfiguration="WSHttpBinding_IDialler1" contract="DiallerServiceReference.IDialler"  
            name="WSHttpBinding_IDialler1">  
        </endpoint>  
    </client> 
```

基本上，您是在告诉您的客户端对象从配置中名为“wsHttpBinding”的端点节点加载其配置，但唯一可用的端点名为“WSHttpBinding_IDialler”和“WSHttpBinding_IDialler1”。

解决方案是通过指向现有端点配置来更新创建客户端对象的方式，如下所示：

```
LeadTransfer.PartnerContracts.DiallerServiceReference.DiallerClient client = new LeadTransfer.PartnerContracts.DiallerServiceReference.DiallerClient("WSHttpBinding_IDialler"); 
```

# c# - 关于 WCF 和 ASYNC 的信息

> ID：12087552
> 
> 赞同：0
> 
> 时间：2012-08-23T08:22:35.167
> 
> 标签：c#, wcf, asynchronous, async-await

我正忙于创建需要 ASYNC 调用的 WCF Web 服务。到目前为止，我已经这样做了：

```
public async Task<bool> sendData(Data data) {
    bool sent = await Task<bool>.Factory.StartNew(() => {
        return someNameSpace.ReceiveData(data);
    });

    return sent;
} 
```

所以我的问题是，对 dll 的调用是否也需要标记为异步？

IE。在dll中

```
public async Task<bool> ReceiveData(Data data) {
    // some async code
    // some code here
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T11:55:41.073

您可能会发现我的[`async`/ `await`intro 很有帮助](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)。我也有专门处理[`async`WCF](http://nitoprograms.blogspot.com/2012/08/async-wcf-today-and-tomorrow.html)的帖子。

一些一般要点：

*   除非您明确希望在后台线程上运行某些代码，否则不要使用`StartNew`(或)。`Task.Run`
*   你可以 await any `Task`，不管它来自哪里。返回 a 的方法`Task`可能是也可能不是`async`- 它只会*在*该方法中产生影响。

因此，如果您`ReceiveData`是其中任何一个（它们看起来与 相同`SendData`）：

```
public async Task<bool> ReceiveData(Data data);
public Task<bool> ReceiveData(Data data); 
```

然后你可以`await`在`SendData`：

```
public async Task<bool> SendData(Data data)
{
  bool sent = await someNameSpace.ReceiveData(data);
  ... // do other stuff
  return sent;
} 
```

# date - 使用 gnuplot 制作基于时间的图表时遇到麻烦

> ID：12087554
> 
> 赞同：6
> 
> 时间：2012-08-23T08:22:38.747
> 
> 标签：date, time, format, gnuplot

我使用的数据文件如下所示：

```
2012.07.21  83
2012.07.22  54
2012.07.23  122
2012.07.24  104
2012.07.25  97
2012.07.26  114
2012.07.27  97
2012.07.28  83
2012.07.29  60
2012.07.30  106
2012.07.31  75 
```

这是其中的一小部分，该文件还包含其他年份。我想要一个按日期显示数字的图表。（显示每天有多少结果）

我所做的是：

```
gnuplot> set xdata time
gnuplot> set timefmt "%Y.%m.%d"
gnuplot> plot "sample.txt" 
```

但它说：需要完整使用 x 时间数据的规范

我做错了什么？有什么建议么？我对 gnuplot 有点陌生，所以我不知道该怎么做

任何帮助都会很棒。提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T08:43:29.297

只需添加`using 1:2`到您的`plot`行。

# asp.net-mvc - 如何在 Nancy 中复制 ASP.NET MVC 的 RenderAction？

> ID：12087559
> 
> 赞同：1
> 
> 时间：2012-08-23T08:22:55.813
> 
> 标签：asp.net-mvc, nancy

我正在考虑将现有的 ASP.NET MVC3 应用程序移植到 Nancy 上。

该应用程序目前大量使用 html 帮助程序扩展 RenderAction。

我不知道如何在 Nancy 中复制这种行为。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T07:58:44.880

它不支持开箱即用 - 虽然它是可能的，但它也将是一个合理的工作量，并且需要您对 Nancy 实施的胆量有相当多的了解。我们支持渲染部分，但不重新运行整个请求堆栈（这基本上是 RenderAction 所做的）。

# c# - VS2012代码覆盖只分析测试dll

> ID：12087560
> 
> 赞同：6
> 
> 时间：2012-08-23T08:23:01.720
> 
> 标签：c#, visual-studio-2012

我试图让代码覆盖在 VS2012 高级版中工作，但我遇到了一些麻烦。

我有一个包含几个不同项目的 C# 解决方案，但最值得注意的是要测试的 Kernel.dll 和使用 NUnit 和 Rhino Mocks 测试的 Kernel.Tests.dll。

使用 NUnit 测试适配器（Beta 2），将测试导入测试资源管理器可以正常工作，运行它们也是如此。但是当涉及到代码覆盖率时，我只从测试 dll 本身得到分析，而不是从被测试的代码中得到分析。这是我不使用 .runsettings 文件的时候。

我还尝试使用 .runsettings 文件（如这里：http: [//msdn.microsoft.com/en-us/library/jj159530.aspx](http://msdn.microsoft.com/en-us/library/jj159530.aspx)）与此规范：

```
<Include>
    <ModulePath>.*\.dll$</ModulePath>
</Include>

<Exclude>
    <ModulePath>.*\.Tests\.dll$</ModulePath>
</Exclude> 
```

但这只是给了我一个空的结果，因为现在测试 dll 也没有包含在内。

问题似乎是它没有找到解决方案的其他部分，但我不确定它到底在哪里，或者我需要设置什么才能找到它。

有没有人遇到同样的问题？关于如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:31:00.177

听起来 NUnit 测试适配器本身可能存在问题。我在 Visual Studio Gallery Q&A 部分读到，他们已经修复了与测试适配器和由测试程序集链接的调试程序集有关的错误。这听起来与我有关，所以你可能想在这里提交一个错误：[https ://bugs.launchpad.net/nunit-vs-adapter/+filebug](https://bugs.launchpad.net/nunit-vs-adapter/+filebug)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:34:09.407

这不是 NUnit 测试适配器的问题，而是 Visual Studio 2012 和 TFS 2012 中的代码覆盖率功能的问题。使用`ExcludeFromCodeCoverage`属性装饰所有测试类，覆盖率计算器将减少噪音。

请参阅博客[Visual Studio 2012 RC – 代码覆盖率的新增功能](http://blogs.msdn.com/b/visualstudioalm/archive/2012/06/19/visual-studio-2012-rc-what-s-new-in-code-coverage.aspx "代码覆盖率的新变化")和 MSDN 文章[自定义代码覆盖率分析](http://msdn.microsoft.com/en-us/library/jj159530.aspx "自定义代码覆盖率分析")。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-07T00:33:22.063

我在标准 MSTest 测试中遇到了问题中描述的问题。[http://blogs.msdn.com/b/allendm/archive/2012/06/05/troubleshooting-missing-data-in-code-coverage-results.aspx](http://blogs.msdn.com/b/allendm/archive/2012/06/05/troubleshooting-missing-data-in-code-coverage-results.aspx)的“进一步分析”部分中的说明提供了更多信息关于问题：

*   cd "\团队工具\动态代码覆盖工具"
*   CodeCoverage.exe 分析 /include_skipped_modules my.coverage > analysis.xml

就我而言，我在 analysis.xml 文件中看到了很多**reason="path_is_excluded" 。**显然，让 VS 认为您想要排除 DLL 真的很容易。理论上，在问题中描述的部分中添加通配符应该有效。使用我想要覆盖的 DLL 的完全限定路径获得了更好的结果。

这个示例 .runsettings 文件派上用场了：http: [//msdn.microsoft.com/en-us/library/jj159530.aspx#sample](http://msdn.microsoft.com/en-us/library/jj159530.aspx#sample)

此外，首先从命令行运行测试似乎鼓励 Visual Studio UI 做正确的事情。总之，这不是最容易开始工作的过程，但使用 CodeCoverage.exe 至少你不会完全失明。

# asp.net - 如何配置 IIS 以在浏览器中以“http://localhost/AppName/Default.aspx”的形式运行应用程序

> ID：12087570
> 
> 赞同：1
> 
> 时间：2012-08-23T08:23:37.760
> 
> 标签：asp.net, iis, iis-7

我从我的visualstudio 2010将应用程序作为网站打开所以应用程序有这个URL

```
"http://localhost:9698/AppName/Default.aspx" 
```

后来，我在 IIS 7 中将应用程序添加为网站，我得到了这个 URL

```
"http://AppName/Default.aspx" 
```

注意：我在我的主机文件中使用了 Appname，在我的 IIS 7 设置中使用了 Appname 作为主机名。

现在，当它从 IIS 运行时，我需要将 URL 设为“http://localhost/AppName/Default.aspx”...我该如何更改它？

我这样做的原因是，我需要将此 URL 作为 Canvas URL 提供给我的 Facebook 应用程序。Facebook dosent 接受“http://AppName/Default.aspx”作为有效域。所以我需要将 Apps localhost URL 更改为

“http://localhost/AppName/Default.aspx”

如何 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T08:58:47.750

您需要做的就是在 IIS 管理器的默认网站之外创建一个名为“AppName”的虚拟目录。将该虚拟目录指向作为 Web 应用程序根目录的文件夹，然后就完成了。

`localhost`将已经解析到您的环回地址，因此不需要`hosts`修改文件，也不需要 IIS 主机头。您的默认网站应处理对`all unassigned`IIRC 的请求。换句话说，从您的默认网站中删除任何主机标头。（虽然我想`localhost`如果你真的想的话，你可以用作主机头......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:28:11.523

http:// 之后的第一部分是服务器地址。

本地主机是您执行命令的机器。

AppName 不是有效的域名。这就是为什么facebook不会接受它。您需要注册一个域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T08:37:16.683

首先尝试在 IIS 上运行此应用程序，但使用默认设置（不更改主机文件或 IIS），url 应该是你想要的。然后您必须更改设置以使用您的 IP 而不是“localhost”

# javascript - JS 对象字面量中的方法和子方法

> ID：12087571
> 
> 赞同：0
> 
> 时间：2012-08-23T08:23:39.077
> 
> 标签：javascript, oop, object, object-literal

因此，如果我像这样在 Javascript 中声明一个对象：

```
var myhouse = {
    room: {
        bed: function() { return "sleep"; }
    }
} 
```

我可以打电话：

```
myhouse.room.bed(); 
```

我可以制作一个可以调用的方法吗：

```
myhouse.room(); 
```

? 我不能只说：

```
var myhouse = {
    room: {
        function() { return "stuff"; },
        bed: function() { return "sleep"; }
    }
} 
```

这是无效的。那么我错过了什么？这样做是个好主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:28:57.107

你不能用一个文字来做，你需要一个额外的赋值来设置一个函数的属性：

```
var myhouse = {
    room: function() { return "stuff"; }
};
myhouse.room.bed = function() { return "sleep"; }; 
```

要使其成为单个表达式，您可以使用 IEFE

```
var myhouse = {
    room: (function(){
        var room = room = function() { return "stuff"; }
        room.bed = function() { return "sleep"; };
        return room;
    })()
}; 
```

或逗号运算符（非常不可读，但有效）：

```
var myhouse = {
    // using myhouse as an already declared variable
    room: (myhouse = function() {return "stuff";},
           myhouse.bed = function() {return "sleep";},
           myhouse)
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T08:27:14.050

如果您知道该函数也是对象，则可以使用此类语法。

```
var room = function() { return "stuff"; }
room.bed = function() { return "sleep"; };

var myhouse = { room: room };
myhouse.room(); // stuff
myhouse.room.bed(); // sleep 
```

或者

```
var myhouse = { room: function() { return "stuff"; } };
myhouse.room.bed = function() { return "sleep"; };
myhouse.room(); // stuff
myhouse.room.bed(); // sleep 
```

# django - django 表单的 ViewDoesNotExist/Import 错误

> ID：12087583
> 
> 赞同：2
> 
> 时间：2012-08-23T08:24:18.360
> 
> 标签：django, django-forms

当我添加一个表格来添加电话号码时，一切正常。

但是，当我为 full_name 添加字段时，出现此错误：

```
ViewDoesNotExist at /phone/ Could not import accounts.views.add_phone. View does not exist in module accounts.views.. 
```

这是代码：

视图.py

```
class PhoneForm(forms.Form):
    phone = forms.IntegerField()
    full_name = forms.Charfield()

def add_phone(request):

if request.method == 'POST':
    form = phone_name_form(request.POST)

    if form.is_valid():

        phone = form.cleaned_data['phone'] 
        #fullname = form.cleaned_data['fullname']

        user = request.user

        #store phone number to user profile
        user.get_profile().phone = phone
        user.get_profile().save()

        #store fullname in the "firstname" field for User
       # print "fullname"
        #print fullname

        return HttpResponseRedirect("/menu/")

else:
    form = phone_name_form() #an unbound form

return render_to_response("phone_form.html", {'form' : form}, context_instance=RequestContext(request)) 
```

phone_form.html

```
<form action="" method="post">{% csrf_token %}
{{ form.as_p }}
<input type="submit" value="Submit" />
</form> 
```

网址.py

```
from django.conf.urls import patterns, include, url
from django.conf import settings

from django.contrib import admin 
admin.autodiscover()

urlpatterns = patterns('',
url(r'^signup/$', 'accounts.views.signup'),
url(r'^accounts/', include('registration.backends.simple.urls')),
url(r'^phone/$', 'accounts.views.add_phone'),
url(r'^users/', 'accounts.views.register_complete'),

url(r'^$', 'food.views.menu'),
url(r'^menu/$', 'food.views.menu'),
url(r'^menu/(?P<hour>\d+)/$', 'food.views.menu_hour'),
url(r'^menu/(?P<hour>\d+)/(?P<food>\w+)/$', 'cart.views.add_to_cart_view'),

url(r'^images/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.MEDIA_ROOT}),
url(r'^cart/', include('cart.urls')),

url(r'^checkout/', 'cart.views.checkout'),

#url(r'^menu/12/$', 'food.views.menu_hour'),

# Examples:
# url(r'^$', 'foodchute.views.home', name='home'),
# url(r'^foodchute/', include('foodchute.foo.urls')),

# Uncomment the admin/doc line below to enable admin documentation:
# url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

# Uncomment the next line to enable the admin:
url(r'^admin/', include(admin.site.urls)), 
```

)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T07:45:01.727

您肯定拼错了表单字段类型。最常见的是大写错误。

不过，Django 应该更准确地报告这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:35:34.463

我拼错了“CharField”。我没有大写“F”，一旦我修复了它，它现在可以工作了。这是一个多么奇怪的错误......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T08:29:37.567

也许您必须将视图的名称从更改`add_phone`为`register_complete`

# c++ - 如何使按钮显示随机答案？

> ID：12087590
> 
> 赞同：-3
> 
> 时间：2012-08-23T08:24:37.507
> 
> 标签：c++, random, c++-cli

我想做的是在 C++ 中单击按钮时显示随机答案。我可以使用 char* 创建数组，但无法在文本框中显示它。（我对 C++ 有点陌生）

谢谢你的答案。

[编码我得到的](http://pastebin.com/rVF2Caqv)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:44:17.357

您没有使用 unicode 字符格式，因此将其更改`char*`为`wchar_t*`.

```
wchar_t* answers[7][40] = {L"hello",L"this",L"is",L"an",L"answer",L"randoms",L"stuff"}; 
```

# asp.net - 在 ASP.NET 中验证自定义主题的验证码

> ID：12087603
> 
> 赞同：1
> 
> 时间：2012-08-23T08:25:43.707
> 
> 标签：asp.net, validation, recaptcha

我按照本指南在 ASP.NET 中使用 recaptcha 自定义主题：[https](https://developers.google.com/recaptcha/docs/customization) ://developers.google.com/recaptcha/docs/customization 。但是无论我输入什么，验证（Page.IsValid）总是返回true。那么我怎样才能在自定义主题中正确验证recaptcha？

# javascript - ExtJS 4 中的商店是什么？

> ID：12087604
> 
> 赞同：-3
> 
> 时间：2012-08-23T08:25:48.677
> 
> 标签：javascript, extjs, extjs-mvc

我不明白它是什么。请给我一个简单的解释。

ExtJS 4 中 MVC 中的存储是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:30:03.540

你查看过 Ext 的[文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store)吗？

> Store 类封装了模型对象的客户端缓存。

（如果模型是行，则商店是表......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:47:18.520

CD 说的是真的。存储用于将数据连接到网格、组合框、树形网格……它存储模型。

# c# - 如何获取基类的泛型类型参数？

> ID：12087606
> 
> 赞同：25
> 
> 时间：2012-08-23T08:26:01.110
> 
> 标签：c#, generics, reflection

我有以下三个课程：

```
public class TestEntity { }

public class BaseClass<TEntity> { }

public class DerivedClass : BaseClass<TestEntity> { } 
```

我已经得到了在运行时使用反射的`System.Type`对象。`DerivedClass`如何获得使用反射的`System.Type`对象？`TestEntity`

谢谢。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-23T08:36:10.753

我假设您的代码只是一个示例，您并不明确知道`DerivedClass`.

```
var type = GetSomeType();
var innerType = type.BaseType.GetGenericArguments()[0]; 
```

请注意，此代码在运行时很容易失败，您应该验证您处理的类型是否符合您的预期：

```
if(type.BaseType.IsGenericType 
     && type.BaseType.GetGenericTypeDefinition() == typeof(BaseClass<>)) 
```

也可以有更深的继承树，因此需要一些具有上述条件的循环。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-23T08:44:58.050

您可以使用 BaseType 属性。以下代码对继承中的更改具有弹性（例如，如果您在中间添加另一个类）：

```
Type GetBaseType(Type type)
{
   while (type.BaseType != null)
   {
      type = type.BaseType;
      if (type.IsGenericType && type.GetGenericTypeDefinition() == typeof(BaseClass<>))
      {
          return type.GetGenericArguments()[0];
      }
   }
   throw new InvalidOperationException("Base type was not found");
}

// to use:
GetBaseType(typeof(DerivedClass)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T08:36:48.853

```
var derivedType = typeof(DerivedClass);
var baseClass = derivedType.BaseType;
var genericType = baseClass.GetGenericArguments()[0]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T08:36:52.277

它认为这应该有效：

```
var firstGenericArgumentType = typeof(DerivedClass).BaseType.GetGenericArguments().FirstOrDefault(); 
```

或者

```
var someObject = new DerivedClass();
var firstGenericArgumentType = someObject.GetType().BaseType.GetGenericArguments().FirstOrDefault(); 
```

# c# - 我可以直接从 List<> 中“提取”一个项目吗？

> ID：12087607
> 
> 赞同：3
> 
> 时间：2012-08-23T08:26:02.667
> 
> 标签：c#, .net, linq, list

我有一个包含 5 个项目的列表。

我想提取最后一项，例如：

```
string lastItem = myList.Last(); 
```

但在此之后，myList 必须包含 4 个项目，除了刚刚提取的最后一个项目之外的所有项目。

是否可以？或者我需要使用.Take(4)？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T08:29:59.257

如果要取最后一个，可以执行以下操作。

```
string lastItem = myList.Last();
myList.Remove(myList.Last());
//myList.Count() will now be 4. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T08:28:23.263

您可以使用[`List.Remove`](http://msdn.microsoft.com/en-us/library/cd666k3e.aspx)或[`List.RemoveRange`](http://msdn.microsoft.com/en-us/library/y33yd2b5.aspx)方法[`List.RemoveAt`](http://msdn.microsoft.com/en-us/library/5cw9x18z.aspx)从列表中删除元素。

要在使用您使用的列表索引器获得对列表的引用后删除列表的最后一个元素：

```
var element = myList[myList.Count - 1];
myList.RemoveAt(myList.Count - 1); 
```

使用`RemoveAt`而不是`Remove`更有效，因为不需要首先找到要删除的项目的索引，并且还要注意`Remove`只删除与要删除的项目匹配的第一个匹配项，因此在具有重复项的列表中不会最后一个元素。

最后，如果您有一个算法会多次删除列表的最后一项，您不妨考虑另一种数据结构，例如[`Queue`](http://msdn.microsoft.com/en-us/library/7977ey2c.aspx).

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-23T08:32:30.967

您可以创建一个扩展方法，该方法采用任何索引来进行提取/删除：

```
public static T Extract<T>(this List<T> list, int index)
{
    var item = list[index];
    list.RemoveAt(index);
    return item;
} 
```

最后一项总是可以使用 找到`Count - 1`，所以调用很简单：

```
var item = list.Extract(list.Count - 1); 
```

这意味着您可以按索引“提取”任何项目。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-23T08:33:50.443

创建一个扩展方法来执行此操作

```
public static class Extension
{
  public static string RemoveLast(this IList<string> myList)
  {
     int lastItemIndex = myList.Count - 1;
     string lastItem = myList.Last();
     myList.RemoveAt(lastItemIndex);
     return lastItem; 
  }
} 
```

称它为

```
string itemRemoved = lst.RemoveLast(); //this will delete the last element from list & return last element as well 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-23T08:50:02.050

为什么不使用 Stack 而不是 List 似乎更合适

```
[Test]
public void MyTest()
{
    Stack<int> stack = new Stack<int>(new[] { 1, 2, 3, 4, 5 });
    int pop = stack.Pop();
    Assert.AreEqual(stack.Count, 4);
    Assert.AreEqual(pop, 5);
} 
```

# java - 获取文件夹路径

> ID：12087608
> 
> 赞同：3
> 
> 时间：2012-08-23T08:26:06.417
> 
> 标签：java, jar

我的程序在 SRC 目录中有一个 RMI 文件夹。我想将程序打包到 JAR 中。如何获取此目录中的文件夹路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:31:34.920

如果您使用的是 Eclipse，则右键单击所需的文件，然后单击导出。单击后，您将获得导出为 JAR 文件的选项。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T08:46:42.583

获取类路径下的文件路径：例如jar a\a.log中有一个文件，可以通过以下方式获取绝对路径：

```
Thread.currentThread().getContextClassLoader().getResource("a\a.log"); 
```

如果得到流量：

```
Thread.currentThread().getContextClassLoader().getResourceAsStream("a\a.log"); 
```

其他几种方式

1、获取当前班级的资源

```
MyServlet.class.getResourceAsStream(name) 
```

2、获取Classpath资源

```
Thread.currentThread().getContextClassLoader().getResourceAsStream(name) 
```

3、如何在Servle中访问？t访问web应用的资源

```
ServletContext context = this.getServletContext(); 
String catalogFileName = context.getInitParameter(“catalogFileName”); 
InputStream is = null; 
BufferedReader catReader = null; 

try { 
is = context.getResourceAsStream(catalogFileName); 
catReader = new BufferedReader(new InputStreamReader(is)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T07:48:45.320

我通过获取的相对路径找到了一个解决方案`System.getProperty("user.dir")`

# java - Java 子字符串

> ID：12087609
> 
> 赞同：3
> 
> 时间：2012-08-23T08:26:06.813
> 
> 标签：java, string, variables, split, substring

基本上我有这些连接字符串需要拆分，下面是一个示例：

```
name=type,info1;101;localhost;-1;false;false 
```

我想把它分成三个变量：名称、类型和信息。

名称是 '=' 之前的位 ("name") 类型是 '=' 之后和 ',' 之前的位 ("type") 信息是 ',' 之后的所有内容 ("info1;101 ;本地主机;-1;假;假")

我曾尝试使用“.split”功能，但无济于事。有人可以帮我使用带有子字符串的正则表达式吗？谢谢。

没有太多实践拆分功能，所以它是这样的：

```
String name [] = connString.split(",");
String type [] = connString.split(";");
String info [] = connString.split(""); 
```

更多的：

您可以使用“.split”方法将这一行中的参数从 XML 文档中分离出来吗？

```
 <rect x="298.43" width="340.00" y="131.12" height="380.00" id="rect_1" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: rgb(255, 102, 0); "/> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T08:32:30.390

你的意思是？

```
String s = "name=type,info1;101;localhost;-1;false;false";
String[] parts = s.split(",");
String[] parts2 = parts[0].split("=");
String name = parts2[0];
String type = parts2[1];
String info = parts[1]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T08:35:14.857

我认为你应该在这里使用模式。

```
Pattern p = Pattern.compile("(\\w+)=(\\w+),(.*)");
Matcher m = p.matcher(str);
if (m.find()) {
    String name = m.group(1);
    String type = m.group(2);
    String info = m.group(3);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-23T08:37:37.943

只使用一个`.split()`：

```
String s = "name=type,info1;101;localhost;-1;false;false";
String[] words = s.split("=|,");
String name = words[0];
String type = words[1];
String info = words[2];
System.out.println("Name: " + name + "\nType: " + type + "\nInfo: " + info); 
```

**输出：**

```
Name: name
Type: type
Info: info1;101;localhost;-1;false;false 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T08:32:43.387

分裂：

```
@Test
public void testParseUsingSplit() {
    String line = "name=type,info1;101;localhost;-1;false;false";

    String name;
    String type;
    String info;

    String[] split1 = line.split(",", 2);
    info = split1[1];
    String[] split2 = split1[0].split("=");
    name = split2[0];
    type = split2[1];

    Assert.assertEquals("name", name);
    Assert.assertEquals("type", type);
    Assert.assertEquals("info1;101;localhost;-1;false;false", info);
} 
```

正则表达式：

```
@Test
public void testParseUsingRegex() {
    String line = "name=type,info1;101;localhost;-1;false;false";

    Pattern pattern = Pattern.compile("([^=]+)=([^,]+),(.*)");
    Matcher m = pattern.matcher(line);
    Assert.assertTrue(m.matches());

    String name = m.group(1);
    String type = m.group(2);
    String info = m.group(3);

    Assert.assertEquals("name", name);
    Assert.assertEquals("type", type);
    Assert.assertEquals("info1;101;localhost;-1;false;false", info);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-23T08:39:36.073

```
public  void splitString(String connectionString) {
        String[] splitted = connectionString.split(",");
        String[] nameAndType = splitted[0].split("=");
        String name = nameAndType[0];
        String type = nameAndType[1];
        String info = splitted[1].substring(splitted[1].indexOf("info")+4);
        System.out.println(" name "+name);
        System.out.println(" type "+type);
        System.out.println(" info "+info);
    } 
```

试试这个。这是你想要做的吗？

# wcf - Websphere MQ 7.5 上的无缝 WCF Web 服务

> ID：12087611
> 
> 赞同：1
> 
> 时间：2012-08-23T08:26:12.350
> 
> 标签：wcf, iis, ibm-mq

我正在尝试使用 WMQ 传输创建 WCF Web 服务。托管在 IIS 上。

我找不到关于这个主题的好的文档。从示例中我发现似乎有很多细节需要“手动”编程（与使用 MSMQ 传输的 WCF Web 服务相比）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T09:49:21.803

WCF 的 WMQ 配置非常简单 - 几个月前我尝试过，它只是在配置文件中提供 bindingElement 扩展，在自定义绑定中使用扩展并指定具有该绑定的端点以及特定于 WCF 的相当复杂的 JMS URI。就这样。

但是 IBM 不提供任何在 IIS 中托管的支持。支持仅用于自托管。如果您想要 IIS 托管，您需要构建自己的外部 WAS 侦听器并与 IIS 集成（您需要完成 IBM 的工作） -这是与构建 WAS 侦听器相关[的可扩展性示例。](http://msdn.microsoft.com/en-us/library/aa717041%28v=vs.100%29)

旁注：Tibco EMS（竞争性技术）提供 WAS 监听器。

# php - Zend_Http_Client 在尝试请求无效 URL 时挂起

> ID：12087615
> 
> 赞同：4
> 
> 时间：2012-08-23T08:26:25.620
> 
> 标签：php, zend-framework, curl

我`Zend_Http_Client`用来请求 URL，HTTP 客户端的超时设置为 10。

```
$config = array(
    'adapter'   => 'Zend_Http_Client_Adapter_Curl',
    'curloptions' => array(
        CURLOPT_USERAGENT      => 'Zend_Curl_Adapter',
        CURLOPT_HEADER         => 0,
        CURLOPT_VERBOSE        => 0,
        CURLOPT_RETURNTRANSFER => 1,
        CURLOPT_TIMEOUT        => 10,
        CURLOPT_SSL_VERIFYPEER => false,
    ),
); 
```

为了测试，我还添加了一个设定的时间限制来尝试阻止它挂起：

```
set_time_limit(10);

try {
    $client->request($method);
} catch (Zend_Http_Client_Exception $e) {
    // ...
} 
```

该请求只是挂起，因此我无法获得响应对象，也不会引发异常/致命事件。以前有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T18:59:44.340

您是否尝试过添加[CURLOPT_CONNECTTIMEOUT](http://www.php.net/manual/en/function.curl-setopt.php)选项？

# javascript - 以某种方式使用像素操作修改画布在 IE9 中并不完全有效

> ID：12087625
> 
> 赞同：4
> 
> 时间：2012-08-23T08:27:26.447
> 
> 标签：javascript, html, canvas, internet-explorer-9, html5-canvas

在第一次尝试在 HTML5 画布上完成一些像素操作时，我编写了一个代码来更改背景图像的特定部分。我正在使用蒙版图像来标记需要更改的特定部分。我一次绘制 2 条垂直线 1 像素。我的代码如下所示：

```
var backgroundTemp=[0,0,false];

function generateBg(){
    var bgGenCanvas  = document.getElementById("backgroundGenerator");
    var bgGenCtx = bgGenCanvas.getContext("2d");

    var bgMaskCanvas  = document.getElementById("backgroundMask");
    var bgMaskCtx = bgMaskCanvas.getContext("2d");

    if(backgroundTemp[0]==0){
        var img = new Image();
        img.onload=function(){
            bgGenCtx.drawImage(this,0,0);
            backgroundTemp[0]++;
            generateBg();
        }
        backgroundTemp[0]++;
        img.src = 'images/ordnerGreen.png';
    }
    if(backgroundTemp[1]==0){
        var img = new Image();
        img.onload=function(){
            bgMaskCtx.drawImage(this,0,0);
            backgroundTemp[1]++;
            generateBg();
        }
        backgroundTemp[1]++;
        img.src = 'images/ordnerMask.png';
    }
    if(backgroundTemp[0]==2 && backgroundTemp[1]==2 && backgroundTemp[2]==false){
        backgroundTemp[2]=true;
        var newColor=hexToRgb(settings.ordnerColor);
        var genData = bgGenCtx.getImageData(0,0,bgGenCanvas.width,bgGenCanvas.height);
        var maskData = bgMaskCtx.getImageData(0,0,bgMaskCanvas.width,bgMaskCanvas.height);
        var darkenAt1=796*4;
        var darkenAt2=996*4;
        var widthPerLine=bgGenCanvas.width*4;
        for(var i=0;i<maskData.data.length;i+=4){
            var currentLine=Math.ceil(i/widthPerLine);

            var red=maskData.data[i];
            var green=maskData.data[i+1];
            var blue=maskData.data[i+2];

            if(red==255 && green==255 && blue==255){
                red=newColor.r;
                green=newColor.g;
                blue=newColor.b;
                if(darkenAt1==i || darkenAt2==i){
                    red-=Math.floor(red/4);
                    green-=Math.floor(green/4);
                    blue-=Math.floor(blue/4);
                    if(darkenAt1==i){
                        darkenAt1+=parseInt(widthPerLine);
                    }
                    if(darkenAt2==i){
                        darkenAt2+=parseInt(widthPerLine);
                    }
                }
                genData.data[i]=red;
                genData.data[i+1]=green;
                genData.data[i+2]=blue;
            }
        }
        bgGenCtx.putImageData(genData,0,0);
        document.getElementById('viewerBackground').style.backgroundImage="url('"+bgGenCanvas.toDataURL()+"')";
    }
}

$(window).load(function(){generateBg();}); 
```

起初它随机工作或不工作。有时结果是空的，有时是原始图像，有时是修改后的图像。我认为图像可能尚未完成加载，因此我添加了一个结构以确保它们都将被加载。这适用于 Firefox 和 Chrome。但是在 IE 中问题仍然存在，每次我按 F5 时都会得到一个随机结果。

任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T20:07:56.960

根据图像加载速度（以及它们在缓存中的可用性），您最终可能会执行 3 次像素迭代，而不是只执行一次。

在最坏的情况下，您的 onLoad 侦听器将在指定图像的 src 后立即执行（如果图像在缓存中可用）

为避免这种情况，您应该尝试按顺序加载图像（即从 backgroundTemp[0] onLoad 函数加载 backgroundTemp[1] 图像）并从 backgroundTemp[1] onLoad 启动像素迭代内容。

# php - 我无法上传大于 2,5 M 的图像

> ID：12087627
> 
> 赞同：0
> 
> 时间：2012-08-23T08:27:43.167
> 
> 标签：php, javascript, uploadify

我正在使用uploadify 2.1.4来上传大文件，现在的问题是我显然无法上传大于2M的图像！

我在 php.ini 上的设置都设置为大数字，所以它们应该可以工作！我的脚本设置是：

```
'uploader': 'uploadifyit/uploadify.swf',
        'script': 'uploadifyit/uploadify.php',
        'cancelImg': 'uploadifyit/cancel.png',
        'folder': 'images',
        'auto': false, // use for auto upload
        'multi': true,
        'queueSizeLimit': 100,
                 'sizeLimit': 20971520,

post_max_size = 30M
upload_max_filesize = 20M
max_execution_time = 600     
max_input_time = 600    
memory_limit = 64M 
```

你能告诉我我做错了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:38:23.173

如果您不能自己增加限制，那么您的主机可能会阻止它。向您的托管服务提供商提交请求增加限制的请求，假设您在经销商或共享托管平台上，他们可能会拒绝。

要修改 PHP 设置，您可能至少需要一个 VPS，因为大多数共享和经销商（共享）将在用户之间共享 PHP.ini。

# android - 使用 webview 下载图像

> ID：12087639
> 
> 赞同：2
> 
> 时间：2012-08-23T08:28:28.587
> 
> 标签：android, image, webview

我正在 webview 中显示来自移动网站的画廊。如何从 webview 下载这些图像？webview 有什么额外的设置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:39:47.880

我认为最好的方法是解析页面的 html 代码并获取图像 url。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-05T09:34:23.227

这解决了我的问题

```
`          `@Override
            public boolean shouldOverrideUrlLoading (WebView view, String url) {
                boolean shouldOverride = false;
                // We only want to handle requests for image files, everything else the webview
                // can handle normally
                if (url.endsWith(".jpg")) {
                    shouldOverride = true;
                    Uri source = Uri.parse(url);
                    // Make a new request pointing to the mp3 url
                    DownloadManager.Request request = new DownloadManager.Request(source);
                    // Use the same file name for the destination
                    File destinationFile = new File (destinationDir, source.getLastPathSegment());
                    request.setDestinationUri(Uri.fromFile(destinationFile));
                    // Add it to the manager
                    manager.enqueue(request);
                }
                return shouldOverride;
            }`` 
```

确保添加下载管理器、SD 读取、SD 写入的权限！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T10:04:39.753

只需使用 webview 加载图像的 URL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-29T07:23:01.260

```
webview.setWebViewClient(new WebViewClient(){
public boolean shouldOverrideUrlLoading(WebView view, String url) {

         if(url.contains("http://m.dudamobile.com/?source=DM_DIRECT") ){

                     DownloadManager dm =    (DownloadManager)getSystemService(DOWNLOAD_SERVICE);
                Request request = new Request(
                        Uri.parse(url));
                enqueue = dm.enqueue(request);
             return true;
         }

         else
              {
                  view.loadUrl(url);
                   return true;
              } 
 }}

 //register your broadcast reciever of Download manager in the activity

 BroadcastReceiver receiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            String action = intent.getAction();
            if (DownloadManager.ACTION_DOWNLOAD_COMPLETE.equals(action)) {
                long downloadId = intent.getLongExtra(
                        DownloadManager.EXTRA_DOWNLOAD_ID, 0);
                Query query = new Query();
                query.setFilterById(enqueue);
                try{
                Cursor c = dm.query(query);
                if (c.moveToFirst()) {
                    int columnIndex = c
                            .getColumnIndex(DownloadManager.COLUMN_STATUS);
                    if (DownloadManager.STATUS_SUCCESSFUL == c
                            .getInt(columnIndex)) {

                     // ImageView view = (ImageView) findViewById(R.id.imageView1);
                        String uriString = c
                                .getString(c
                                               .getColumnIndex(DownloadManager.COLUMN_LOCAL_URI));
                        mNotificationManager.notify(1, notification);
                       // view.setImageURI(Uri.parse(url1));
                       /* Intent i = new Intent();
                        i.setAction(DownloadManager.ACTION_VIEW_DOWNLOADS);
                        startActivity(i);*/
                    }
                    }
                }catch(NullPointerException e)
                {
                    Toast.makeText(getApplicationContext(),"Item not downloadable :( ",     Toast.LENGTH_LONG).show();

                }
            }
        }
    };
    registerReceiver(receiver, new IntentFilter(
         DownloadManager.ACTION_DOWNLOAD_COMPLETE));
} 
```

`

# java - Java Apache CLI 如何在保持程序正常运行的同时处理未知参数异常？

> ID：12087640
> 
> 赞同：0
> 
> 时间：2012-08-23T08:28:29.930
> 
> 标签：java, apache, command-line-interface, apache-commons-cli

我正在使用 Apache Commons CLI 创建一个基于 CLI 的应用程序。即使用户提供了一些额外的参数，我也希望我的程序能够正常运行。在这种情况下，程序应该忽略额外的参数。例如，我的程序设计为接受 6 个参数，而我提供了第 7 个参数。在这种情况下，程序将打印用法并且不会解析参数。我希望我的应用程序解析所有 6 个参数并忽略第 7 个参数。Apache Commons CLI 可以吗？

# java - Android 从整数数组列表中获取值变成一个数字

> ID：12087641
> 
> 赞同：4
> 
> 时间：2012-08-23T08:28:32.403
> 
> 标签：java, android

我是 Android 新手，从我在这里读到的大部分问题都与 Imageview 设置图像有关。这是我的问题，与 ImageView 错误相同，因为需要 Int List 而不是 String List 的某些函数，所以我创建了 Integer 的数组列表。基本上就像我创建的大多数功能一样

```
private ArrayList<Integer> myArrayList = new ArrayList<Integer>();

public void setPicture(Integer datanumber)
{
    if (datanumber>=10)
    {
         myArrayList.add(R.drawable.picture);
    }
    else{
        myArrayList.add(R.drawable.picture_gray);
    }
 ///and so on
} 
```

一切正常，直到我发现我无法使用此代码获取此字符串 ex "R.drawable.picture"

```
 myArrayList.get(0).toString(); 
```

相反，它给了我我无法理解的随机数。我的问题是如何将其恢复为默认值（或我添加到列表中的那个） 感谢您花时间阅读我的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:30:21.607

利用`String.valueOf(myArrayList.get(0));`

代替`myArrayList.get(0).toString();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:35:31.380

它没有给你一个随机数。它给你的价值`R.drawable.picture`。中的所有资源`R.*.*`都通过数字引用。如果您查看 R.java 内部，这一点很明显，它显示如下：

```
public final class R {
    public static final class attr {
    }
    public static final class drawable {
        public static final int help=0x7f020000;
        public static final int ic_action_search=0x7f020001;
        public static final int ic_launcher=0x7f020002;
        public static final int splash1=0x7f020003;
    }
    public static final class id {
        public static final int userName=0x7f070002;
    }
    public static final class layout {
        public static final int splash=0x7f030003;
    }
    public static final class menu {
        public static final int action=0x7f060000;
        public static final int menu=0x7f060001;
    }
    public static final class string {
        public static final int app_name=0x7f040000;
        public static final int create_user=0x7f040004;
        public static final int help=0x7f040001;
        public static final int image=0x7f040002;
        public static final int primarymodtext=0x7f040003;
    }
} 
```

你得到的是 int value `R.drawable.picture`。这是因为当您向数组列表添加值时，您将传入存储在`R.drawable.picture`.

您仍然可以像使用`R.drawable.picture`. 正常传进去就行了。

# php - Wordpress XML-RPC 发布到特定类别

> ID：12087648
> 
> 赞同：2
> 
> 时间：2012-08-23T08:28:48.347
> 
> 标签：php, wordpress, xml-rpc

我已经尝试了很长时间，但它仍然只发布为“未分类”，在文档中声明使用整数值作为类别 ID，但这不起作用。我也尝试按原样和小写字母编写类别名称，并输入 slug。根据文档，我做的一切都是正确的，但它仍然不起作用！ [wp. ​​newPost](http://codex.wordpress.org/XML-RPC_WordPress_API/Posts#wp.newPost "wp.​​newPost")并且因为它使用[wp_insert_post()](http://codex.wordpress.org/Function_Reference/wp_insert_post)。

```
public function create_post( $title, $body )
{
    $title = htmlentities( $title, ENT_NOQUOTES, 'UTF-8' );
    $content = array(
        'post_category' => array( 18 ), // my category id
        'post_type' => 'post',
        'post_status' => 'pending',
        'post_title' => $title,
        'post_content' => $body,
        'comment_status' => 'closed',
    );

    $params = array( 0, $this->username, $this->password, $content );
    return $this->send_request( 'wp.newPost', $params );
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T10:53:13.013

嘿，我最近开始使用新的 API。

您应该在 XML-RPC 请求中使用 terms_names 参数，如新文档中所述：

[http://codex.wordpress.org/XML-RPC_WordPress_API/Posts#wp.newPost](http://codex.wordpress.org/XML-RPC_WordPress_API/Posts#wp.newPost)

例子：

您的代码应更改为如下所示。

```
public function create_post( $title, $body )
{
    $title = htmlentities( $title, ENT_NOQUOTES, 'UTF-8' );
    $content = array(
        'post_type' => 'post',
        'post_status' => 'pending',
        'post_title' => $title,
        'post_content' => $body,
        'terms' => array('category' => array( 18 ) ),
        'comment_status' => 'closed',
    );

    $params = array( 0, $this->username, $this->password, $content );
    return $this->send_request( 'wp.newPost', $params );
} 
```

但是，我对这种 API 方法有一个问题，Post ID 不会仅返回一个错误的布尔值。让我知道您是否有任何插入类别的运气以及您是否设法收到 POST ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T18:51:43.230

谢谢，这是一个救生员！如果您需要为您的帖子提供标签，您可以使用`tags_input`属性将它们传递到数组中，如下所示：

```
$content['tags_input'] = "action, adventure, thriller"; 
```

如果需要传入特定的时间戳，应该使用如下格式

```
D, d M Y H:i:s +0000 
```

`post_date`并使用or`post_date_gmt`属性传递它：

```
$content['post_date_gmt | post_date'] = date("D, d M Y H:i:s +0000", strtotime($your_specific_date_and_time)); 
```

希望它可以帮助将来的人！

# javascript - $.ajax 延迟对象

> ID：12087653
> 
> 赞同：1
> 
> 时间：2012-08-23T08:29:08.090
> 
> 标签：javascript, ajax, jquery

这两个代码 (1)(2) 对我来说似乎以相同的方式工作。

我的问题是：
1）这两个代码是否等效？
2）如果是，为什么？如果不是，我应该更喜欢什么，为什么？

* * *

(1)

```
$.ajax({
    url: backendRouter.generate('feedback_send'),
    type: 'POST',
    dataType: 'json',
    data: data
    success: callback,
    done: function () {
        // some code
    }
}); 
```

* * *

(2)

```
$.ajax({
    url: backendRouter.generate('feedback_send'),
    type: 'POST',
    dataType: 'json',
    data: data
    success: callback
}).done(function () {
    // some code
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T08:30:15.437

是的，这两个代码是等价的，除了（错误地？）你留`success: callback`在了后者。

但是恕我直言，后者是首选，因为延迟对象比直接提供回调灵活得多`$.ajax`。

特别是，使用延迟对象可以更好地分离启动 AJAX 调用和处理该调用结果之间的逻辑和责任。此外，一些 AJAX 辅助函数不支持`error`回调。如果我写：

```
function doAjax() {
    return $.get(...);
} 
```

然后，我可以将任意数量的`done`和`fail`处理程序附加到该函数调用的*结果*，而不必将这些处理程序传递给`doAjax`函数。

我还可以使用,等将返回的`promise()`对象与其他 Promise结合起来，以便在多个异步事件（包括其他 AJAX 调用、计时器、动画等）之间实现非常强大的同步。我*不能*这样做`$.when()``$.pipe()`*`success:`*

# java - @EventListener & IRequestCycle.getResponseBuilder.updateComponent 不更新组件

> ID：12087655
> 
> 赞同：2
> 
> 时间：2012-08-23T08:29:20.000
> 
> 标签：java, html, tapestry, event-listener

我的应用程序有问题，我想做的是当有人`shopStatus`将表单上的字段更改为时`Pass`，我希望它更新我的字段`shopApprovalDate`为必填项。我为此使用以下事件侦听器

```
@EventListener(targets="shopStatus", events="onchange")
public void onLicenseStatusChange(IRequestCycle cycle) {
    cycle.getResponseBuilder().updateComponent("shopStatus");
    cycle.getResponseBuilder().updateComponent("shopApprovalDateRequired");
    cycle.getResponseBuilder().updateComponent("shopApprovalDate");

} 
```

这是我为此使用的 html

```
<td valign="center" align="left" class="rightTD" height="30" >
         <span jwcid="@If" condition="ognl:company.shopStatus == @valueobject.ShopStatus@Pass" renderTag="literal:false">
            <input jwcid="shopApprovalDateRequired@CustomDatePicker" disabled="ognl:disabled || isShopApprovalDateDisabled()"
            value="ognl:company.shopApprovalDate" displayName="message:company.shopApprovalDate" validators="validators:maxDateToday,required" />
         </span>
         <span jwcid="@Else" renderTag="literal:false">
            <input jwcid="shopApprovalDate@CustomDatePicker" disabled="ognl:disabled || isShopApprovalDateDisabled()"
            value="ognl:company.shopApprovalDate" displayName="message:company.shopApprovalDate" validators="validators:maxDateToday" />
         </span>
        </td> 
```

问题是，如果我将 更改`shopStatus`为`Pass`没有任何反应，但如果我保存页面并重新加载页面，则`shopApprovalDate`设置为强制，因此 html 代码正在工作，就像更改时`@EventListener`没有更新一样！我已经通过代码进行了调试，它击中了监听器，但没有发生任何事情`shopApprovalDate``shopStatus`

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T11:39:40.990

这是因为您需要对调用 @IF @Else 而不是实际组件本身的东西调用更新

如果您在 @If @Else 之外添加一个并在事件侦听器中调用它，那么它应该可以工作，然后像这样

这`<div>`

```
<div jwcid="licenceAuthRequiredDiv@Any">
<td valign="center" align="left" class="rightTD" height="30" >
     <span jwcid="@If" condition="ognl:company.shopStatus == @valueobject.ShopStatus@Pass" renderTag="literal:false">
        <input jwcid="shopApprovalDateRequired@CustomDatePicker" disabled="ognl:disabled || isShopApprovalDateDisabled()"
        value="ognl:company.shopApprovalDate" displayName="message:company.shopApprovalDate" validators="validators:maxDateToday,required" />
     </span>
     <span jwcid="@Else" renderTag="literal:false">
        <input jwcid="shopApprovalDate@CustomDatePicker" disabled="ognl:disabled || isShopApprovalDateDisabled()"
        value="ognl:company.shopApprovalDate" displayName="message:company.shopApprovalDate" validators="validators:maxDateToday" />
     </span>
    </td>
</div> 
```

事件监听器

```
@EventListener(targets="licensingStatus", events="onchange")
public void onLicenseStatusChange(IRequestCycle cycle){
    cycle.getResponseBuilder().updateComponent("licenceAuthRequiredDiv");
} 
```

# java - 当要评估多个 1 表达式时解析 XML 文件崩溃

> ID：12087665
> 
> 赞同：1
> 
> 时间：2012-08-23T08:30:03.237
> 
> 标签：java, xml, parsing, xpath

我想创建一个类来解析 XML。这是我的代码：

```
public class ParserXML {

private String Flux;
private ArrayList<String> EvaluateExpr = new ArrayList<String>();
private ArrayList<String> Result  = new ArrayList<String>();

public ParserXML(String url, ArrayList<String> exp) {
    this.Flux = url;
    this.EvaluateExpr = exp;

    this.loadXmlFlux();
}

private void loadXmlFlux() {

    HttpClient httpclient = null;

    try {
        httpclient = new DefaultHttpClient();
        HttpGet httpget = new HttpGet(this.Flux);

        ResponseHandler<String> responseHandler = new BasicResponseHandler();
        String responseBody = httpclient.execute(httpget, responseHandler);

        InputSource docXml = new InputSource(new StringReader(responseBody)); 

        XPathFactory xpathFactory = XPathFactory.newInstance();

        XPath xpath = xpathFactory.newXPath();

        ArrayList<String> result = new ArrayList<String>();

        /*
         * Looping on all expression to evaluate
         */
        for (String i : this.EvaluateExpr) {
            try {
                result.add(xpath.evaluate(i, docXml));
            } catch (XPathExpressionException e) {
                e.printStackTrace();
            }

        }

        this.Result = result;

    } catch (HttpResponseException ex) {        
        ex.printStackTrace();
    }
    catch (IOException ex) {
       ex.printStackTrace();
    }   
    finally{
        if(httpclient!=null) {
            httpclient.getConnectionManager().shutdown();
        }
    }
}

public ArrayList<String> getResult() {
    return this.Result;
} 
```

}

当我只有一个表达式要评估时，这个类工作正常。但是，如果我想在 XML 流上评估 2 表达式，我会出错。

> java.io.IOException：流在 com.sun.org.apache.xerces.internal.impl.XMLEntityScanner.load 的 java.io.StringReader.read(Unknown Source) 处的 java.io.StringReader.ensureOpen(Unknown Source) 处关闭（未知来源）在 com.sun.org.apache.xerces.internal.impl.XMLEntityScanner.arrangeCapacity（未知来源）在 com.sun.org.apache.xerces.internal.impl.XMLEntityScanner.skipString（未知来源）在 com .sun.org.apache.xerces.internal.impl.XMLVersionDetector.determineDocVersion(Unknown Source) at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source) at com.sun.org.apache .xerces.internal.parsers.XML11Configuration.parse(Unknown Source) at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source) at com.sun.org.apache.xerces.internal.parsers .DOMParser。解析（未知来源）在 com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse（未知来源）在 com.sun.org.apache.xpath.internal.jaxp.XPathImpl.evaluate（未知来源）在com.sun.org.apache.xpath.internal.jaxp.XPathImpl.evaluate(Unknown Source) at Common.ParserXML.loadXmlFlux(ParserXML.java:56) at Common.ParserXML.(ParserXML.java:29) at Domaine.Ahref .loadReferringDomains(Ahref.java:46) 在 Domaine.Ahref.(Ahref.java:19) 在 MainApp.checkAhrefs(MainApp.java:199) 在 MainApp.main(MainApp.java:67) ------- -------- 链接到 ------------------ com.sun.org.apache.xpath.internal.jaxp 处的 javax.xml.xpath.XPathExpressionException。 XPathImpl.evaluate(Unknown Source) at com.sun.org.apache.xpath.internal.jaxp.XPathImpl.evaluate(Unknown Source) at Common.ParserXML。loadXmlFlux(ParserXML.java:56) 在 Common.ParserXML.(ParserXML.java:29) 在 Domaine.Ahref.loadReferringDomains(Ahref.java:46) 在 Domaine.Ahref.(Ahref.java:19) 在 MainApp.checkAhrefs( MainApp.java:199) 在 MainApp.main(MainApp.java:67) 原因：java.io.IOException: Stream closed at java.io.StringReader.ensureOpen(Unknown Source) at java.io.StringReader.read(Unknown来源）在 com.sun.org.apache.xerces.internal.impl.XMLEntityScanner.arrangeCapacity（未知来源）在 com.sun .org.apache.xerces.internal.impl.XMLEntityScanner.skipString(Unknown Source) at com.sun.org.apache.xerces.internal.impl.XMLVersionDetector.determineDocVersion(Unknown Source) at com.sun.org.apache.xerces .internal.parsers。XML11Configuration.parse(Unknown Source) at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source) at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source ) 在 com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(Unknown Source) 的 com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(Unknown Source)

我不明白为什么我不能在循环中再次使用“xpath.evaluate(i, docXml)”。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T08:33:19.310

您使用相同的`InputSource`两次 - 之后`InputSource`读取输入一次，输入已用尽。

最简单的方法可能是`InputSource`为每次迭代创建一个新的，每次都有一个新的`StringReader`。基本上移动这条线：

```
InputSource docXml = new InputSource(new StringReader(responseBody)); 
```

进入循环。

或者，我确信必须有一种方法可以针对已解析的 DOM 表示（例如`Document`）评估 XPath 表达式，但我最近还没有完成足够的 Java XML 工作来了解相关的魔法咒语。这将避免必须为每个表达式重新解析 XML，这显然很好。

# javascript - jQuery 偏移顶部无法正常工作

> ID：12087670
> 
> 赞同：17
> 
> 时间：2012-08-23T08:30:16.147
> 
> 标签：javascript, jquery, raphael, offset

我正在尝试创建一个脚本，通过鼠标在元素中绘制一些东西，而我正在`Raphaeljs`这样做。

`top`为了正确绘图，我需要找到`left`‍<code>input‍‍</code> 元素。我`var offset = $("#input").offset();`用来获取`left`和`top`。

但`top`值不正确。`10px`低于‍‍实际距离`top`。我认为`10px`可能会更改不同的分辨率然后我无法正常添加`10px`它然后**我想知道如何解决问题！**

我[在这里](http://matonia.net/t/)上传了我的测试。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-23T18:18:05.883

jQuery`.offset()`函数有[这个限制](http://api.jquery.com/offset/)：

> 注意：jQuery 不支持获取隐藏元素的偏移坐标或考虑在 body 元素上设置的边框、边距或填充。

在这种情况下，主体有一个 10 像素的上边框，这就是为什么你的绘图偏离了 10 像素。

推荐解决方案：

```
var offset = $("#input").offset();
x = x - offset.left - $(document.body).css( "border-left" );
y = y - offset.top + $(document.body).css( "border-top" ); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-01-29T15:51:11.740

在与这个问题斗争了一段时间并查看了各种可能的答案之后，我得出的结论是 jQuery **offset().top**（以及它使用的大概 DOM API）对于一​​般用途来说太不可靠了。它不仅被记录为排除 html 级别的边距，而且在其他几种情况下也会返回意外结果。

**position().top**确实有效，但设计页面以使其等效可能不切实际/不可能。

幸运的是，我发现**element.getBoundingClientRect().top**完美地获得了相对于视口的位置。然后，如果需要，您可以添加**$(document).scrollTop()**以从文档顶部获取位置。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-23T08:44:46.680

我有两种不同的解决方案：

**1)您可以使用**[outerHeight(true)](http://api.jquery.com/outerHeight/)方法计算上述元素的总高度。此方法将使用边距、填充和边框计算高度。

这**不会产生冲突**，它会返回真值。 [这是 jsFiddle 示例。](http://jsfiddle.net/47Kt6/4/)

html

```
<div class="header"></div>
<div class="nav"></div>
<div class="myEle"></div> 
```

jQuery

```
var myEleTop = $('.header').outerHeight(true) + $('.nav').outerHeight(true); 
```

**2）**如果您将`top`css 定义为相对于主体定位的元素，您也可以使用此值：

```
parseInt($('#myEle').css('top')); 
```

# wpf - 运行时的 Wpf 本地化不影响日期格式

> ID：12087674
> 
> 赞同：2
> 
> 时间：2012-08-23T08:30:25.863
> 
> 标签：wpf, date, localization, format

我在[Christians Mosers Wpf 教程](http://www.wpftutorial.net/LocalizeMarkupExtension.html)中使用带有 MarkupExtension 的本地化。在运行时更改当前语言效果很好，但我发现日期格式永远不会更新。无论选择哪种语言，它始终为 en-US 格式。

我正在像这样设置当前语言

```
Thread.CurrentThread.CurrentUICulture = value;
Thread.CurrentThread.CurrentCulture = value; 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:28:14.590

我遇到了同样的问题，但是使用`LocBinding`Advanced [WPF Localization](http://www.codeproject.com/Articles/249369/Advanced-WPF-Localization)并简单地`DateTimeConverter`解决了我的问题。因此，当我在运行时切换当前语言时，转换器**确实会被触发。**

我的 XAML 看起来像：

```
<TextBlock Style="{StaticResource EntryBoxHeader}">
    <TextBlock.Text>
        <LocBinding StringFormat="{}{0:d}">
           <Binding Source="{x:Static System:DateTime.Now}" Path="." Converter="{StaticResource dtConvertor}"/>
        </LocBinding>
    </TextBlock.Text>
</TextBlock> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:36:44.693

我必须编写一个转换器，以使我的日期在 XAML 中正确本地化（您的`Thread.CurrentThread.CurrentUICulture`并且`Thread.CurrentThread.CurrentCulture`可能已经包含正确的值！）！：

```
public sealed class DateTimeToStringConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value == null)
            return null;

        if (value is DateTime)
                // HERE YOU HAVE TO PASS YOUR CULTURE INFO:
                return ((DateTime)value).ToString("d", Thread.CurrentThread.CurrentUICulture);
        else
            throw new NotImplementedException();
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value == null)
            return null;
        else
            throw new NotImplementedException();
    }
} 
```

...然后在你的 XAML 中使用它（记得在资源字典中声明它），如下（`converter:`前缀与`DateTimeToStringConverter`声明类的命名空间有关！）：

```
<Window.Resources>
    <ResourceDictionary>
        <converters:DateTimeToStringConverter x:Key="DateTimeToStringConverter" />
    </ResourceDictionary>
</Window.Resources>

<TextBlock Text="{Binding Path=Date, Mode=OneWay, Converter={StaticResource DateTimeToStringConverter}}"  /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T08:36:53.950

尝试 ：

```
public static class LanguageManipulator
{
    public static void SetXmlFromCurrentCulture()
    {
        var curr = CultureInfo.CurrentCulture;
        var lang = XmlLanguage.GetLanguage(curr.Name);

        SetCulture(lang, curr);

        var meteadata = new FrameworkPropertyMetadata(lang);
        FrameworkElement.LanguageProperty.OverrideMetadata(typeof (FrameworkElement), meteadata);
    }

    private static void SetCulture(XmlLanguage lang, CultureInfo cult)
    {
        var propertynames = new[]
                                {
                                    "_equivalentCulture",
                                    "_specificCulture",
                                    "_compatibleCulture"
                                };

        const BindingFlags flags = BindingFlags.ExactBinding | BindingFlags.SetField | BindingFlags.Instance | BindingFlags.NonPublic;

        foreach (var name in propertynames)
        {
            var field = typeof (XmlLanguage).GetField(name, flags);
            if (field != null) field.SetValue(lang, cult);
        }

    }
} 
```

并在设置线程文化后调用 SetXmlFromCurrentCulture。

# html - CSS 向左固定，向右流动，在固定宽度内居中

> ID：12087675
> 
> 赞同：3
> 
> 时间：2012-08-23T08:30:26.960
> 
> 标签：html, css, width, fixed, fluid

我创建了一个我想使用 CSS 创建的图像。我还在[JSFiddle](http://jsfiddle.net/a9Yda/1/)中做了一个小设置。

问题是我可以创建所有内容，除了右侧的流体列。我正在使用它在幻灯片中显示图像，我希望它们从屏幕右侧出现并在左侧“后面”内容 1 中消失。

我尝试了绝对、相对和固定定位。但结果要么失去内容 1 的居中左侧定位，要么在第 2 列的右侧没有流动列。

![在此处输入图像描述](../Images/2a511c1188d3cbed00bd8a16f7dd6a4e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:34:23.573

您需要使用 width:100% 来填充整个屏幕，[http://jsfiddle.net/a9Yda/2/](http://jsfiddle.net/a9Yda/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T09:11:56.003

[这段代码](http://jsfiddle.net/a9Yda/4/)是你要找的吗？

我在右边的 div 中添加了一个固定的位置和最小宽度，这似乎已经达到了你想要的效果。

# c# - 插入数据集

> ID：12087676
> 
> 赞同：0
> 
> 时间：2012-08-23T08:30:35.507
> 
> 标签：c#, dataset

将数据插入数据集的命令是什么？以下代码有什么问题：

```
DataSetReasons.Data_Tracker_RcodeDataTable GRX = 
    new DataSetReasons.Data_Tracker_RcodeDataTable();

DataSetReasons.Data_Tracker_RcodeRow rowx = 
    DataSetReasons.Data_Tracker_RcodeRow();

rowx.dtrc_id = 5;
rowx.eval_id = 28;
rowx.dtcr_StaffNum = "505651";
rowx.dtrc_RC1 = "C";
rowx.dtrc_RC2 = "A";
rowx.dtrc_RM1 = 2;
rowx.dtrc_RM2 = 4;

GRX.Rows.Add(rowx); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:47:19.377

用以下行替换您的代码：

DataSetReasons.Data_Tracker_RcodeRow rowx = GRX.NewRow();

关于将数据表添加到数据集，您必须创建一个数据集对象并将数据表添加到数据集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:39:04.730

您必须将数据表 GRX 添加到数据集 DataSetReasons。

```
 DataSetReasons.Data_Tracker_RcodeDataTable GRX = 
    new DataSetReasons.Data_Tracker_RcodeDataTable();

DataSetReasons.Data_Tracker_RcodeRow rowx = 
    DataSetReasons.Data_Tracker_RcodeRow();

rowx.dtrc_id = 5;
rowx.eval_id = 28;
rowx.dtcr_StaffNum = "505651";
rowx.dtrc_RC1 = "C";
rowx.dtrc_RC2 = "A";
rowx.dtrc_RM1 = 2;
rowx.dtrc_RM2 = 4;

GRX.Rows.Add(rowx);

    DataSetReasons.Tables.Add(GRX);//<-- 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T08:34:18.930

解决了，谢谢大家...这是代码：

```
DataSetReasons.Data_Tracker_RcodeDataTable GRX =
new DataSetReasons.Data_Tracker_RcodeDataTable();

GRX.Rows.Add(13, 28, "C", 5, "A", 2, TextBox2.Text); 
```

# c# - 事件总线和事件聚合器之间的区别？

> ID：12087678
> 
> 赞同：1
> 
> 时间：2012-08-23T08:30:38.403
> 
> 标签：c#, wpf, events, prism

我刚刚开始使用 WPF 和 Prism，并且正在学习事件聚合器。关于这一切，我的第一个问题是：事件总线和事件聚合器有什么区别？

听起来像 MS 绒毛——公平地说，这是 Practices 命名空间中的一个常见问题！它只是一个带有 MS 名称的事件总线吗？有点像他们在没有明显原因的情况下进行依赖注入并将其重命名为策略注入？

w://

# c++ - 访问工会成员需要类型转换吗？

> ID：12087679
> 
> 赞同：0
> 
> 时间：2012-08-23T08:30:43.937
> 
> 标签：c++, casting, struct, unions

我对 C++ 中的以下代码有疑问：

```
typedef struct {
    int id;
    int age;
} Group1;

typedef struct {
    int id;
    char name;
    float time;  
} Group2;

typedef union {
    Group1 group1;
    Group2 group2;
} ServiceData;

typedef struct {
    ServiceData data;
} Time; 
```

然后我有一个变量：

```
Group1 * group1;
group1 = new Group1;

group1->id = 10;
group1->age = 20; 
```

然后有两个方法是这样定义的：

```
void method1(ServiceData * data) {
    //inside the method call method hello
    hello(data);
};

void hello(Group1 *group1) {
    printf("%d",group1->id);
} 
```

我`method1`这样称呼：

```
method1((ServiceData *)group1); 
```

但是在里面`method1`，当参数`group1`传给method的时候`hello()`，我想拿到里面的id的值`group1`。我需要做任何演员`hello`阵容吗？或者在里面`method1`，我需要`(group*)`在传递给它之前将它投射到`hello()`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T08:35:46.097

您不需要演员，只需访问以下中的正确字段`union`：

```
void method1(ServiceData * data) {
    //inside the method call method hello
    hello(&data->group1);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:38:21.143

代替

```
method1((ServiceData *)group1); 
```

你应该这样做：

```
ServiceData data;
data.group1.id = 10;
data.group1.age = 20;
method1(data); 
```

的实现`method1`应该看起来像

```
void method1(ServiceData * data) {
    hello(&data->group1);
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T08:36:06.327

当然，你必须写

```
 hello ( (Group1 * ) data); 
```

（或写数据-> group1，其他答案）。

但不要这样做，而是使用继承，如果它是 C++：

```
 struct GroupBase {
    int id;
    virtual ~GroupBase {
    }
 }

 struct Group1 : public GroupBase {
    int age;
    virtual ~Group1 { }
 }

 struct Group2 : public GroupBase {
    char name;
    float time;
    virtual ~Group2 { }
 }

 void method1 (GroupBase* data) {
    hello (std::dynamic_cast<Group1*> (data));
 } 
```

# android - 如何在设备超出 Android 中的默认设置路径时通知？

> ID：12087680
> 
> 赞同：-1
> 
> 时间：2012-08-23T08:30:49.543
> 
> 标签：android, google-maps, gps

如何以编程方式在 Android GPS 中以错误的方向进行通知。我有一个路径设置默认值。当用户移出该路径时（例如向右或向左 + 或 - 100 米），它应该通知用户。先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:42:19.937

您始终可以使用欧几里德几何检查设置路径中的点与实际位置之间的距离。尽管如果准确性恶化，您将得到误报。由于 GPS 位置提供坐标，它变得比这更复杂一些。但是看看这个网站：

[计算地球上两点之间的距离](http://www.codecodex.com/wiki/Calculate_Distance_Between_Two_Points_on_a_Globe#Java)

注意：您必须稍微修改该代码。

# linux - PostgreSQL 无法启动：“server.key”具有组或世界访问权限

> ID：12087683
> 
> 赞同：29
> 
> 时间：2012-08-23T08:30:59.687
> 
> 标签：linux, postgresql, openerp, odoo, private-key

当我使用命令启动 PostgreSQL 时：

```
$ sudo /etc/init.d/postgresql start 
```

Pg 没有启动。报告的错误是：

```
 * Starting PostgreSQL 8.4 database server
 * The PostgreSQL server failed to start. Please check the log output:
2010-01-21 22:10:00 PST FATAL: private key file "server.key" has group or world access
2010-01-21 22:10:00 PST DETAIL: File must be owned by the database user or root, must have no write permission for "group", and must have no permissions for "other". 
```

...当我尝试以用户身份访问`psql`时`postgres`：

```
$ sudo su postgres
$ psql 
```

它给了我一个错误：

```
 could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"? 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-08-28T05:09:51.363

我用..解决了它

1）进入相关目录（使用>locate server.key）

2) 备份旧的 server.key 链接。

3) 复制 ssl-cert-snakeoil.key 到 server.key

4-5) 将其所有者和组更改为 postgres

6) 确保权限为 700 或 740（根据错误消息的要求）

我的 Ubuntu 12.04 和 postgresql-8.3 的配方：

```
sudo cd /var/lib/postgresql/8.3/main/
sudo mv server.key server.key-0
sudo cp /etc/ssl/private/ssl-cert-snakeoil.key server.key
sudo chown postgres server.key
sudo chgrp postgres server.key
sudo chmod 740 server.key
sudo /etc/init.d/postgres-8.3 start 
```

现在它的工作！谢谢你的支持。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-06-18T23:08:41.383

如何不硬拷贝服务器密钥并将其留在原处和原样。

相反，它更简单：

更改 PostgreSQL 数据目录中的“server.key”链接权限（它是指向私有 certificate.key 文件的链接所在的位置）

`# cd /var/lib/postgresql/9.1/main/`

至

```
# chown -R postgres:postgres server.key` 
```

并确保原始证书在

```
# /etc/ssl/private/ssl-cert-snakeoil.key 
```

具有这些属性，通过设置它们

```
# chmod 640 ssl-cert-snakeoil.key
# chown root:ssl-cert ssl-cert-snakeoil.key 
```

此解决方案已在 Debian 上进行了测试。请记住，CentOS 可以使用带有扩展用户权限管理的 SELinux，可以通过以下方式查看

```
# ls -laZ * 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-23T08:39:35.747

如错误消息所述，修复密钥文件的权限`server.key`。服务器作为用户“postgres”运行，该用户应该拥有该文件。尝试

```
#cd <path/to/pgsql/data> 
#chown postgres server.key
#chmod 0640 server.key 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-12-06T22:45:15.957

将权限设置`/etc/ssl/private`为`root:ssl-cert`。对[这个问题](https://github.com/hw-cookbooks/postgresql/issues/156)的评论让我尝试了这个解决方案。

***注意****：即使是艰难的答案也被接受，它并没有解决我的问题。为了帮助其他人，我想在这里回答*。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-12-03T14:09:45.330

它发生在我身上，结果我错误地从“ssl-cert”组中删除了 postgres 用户，将其设置为

> gpasswd -a postgres ssl-cert

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-02-08T19:53:39.270

```
sudo chown postgres /var/lib/postgresql/8.4/main/server.key

sudo chmod 0640 /var/lib/postgresql/8.4/main/server.key 
```

在 postgresql 之后点击选项卡以确认您的版本。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-25T08:11:49.653

按照这个[https://www.postgresql.org/docs/9.6/ssl-tcp.html](https://www.postgresql.org/docs/9.6/ssl-tcp.html)

使用“chmod og-rwx server.key”并使用 chown 命令将用户更改为 postgres 用户。

# php - 试图设置会话变量

> ID：12087687
> 
> 赞同：0
> 
> 时间：2012-08-23T08:31:19.803
> 
> 标签：php, mysql

```
if(isset($_SESSION['admin'])) {
echo "<li><b>Admin</b></li>";
}

<?php
session_name('MYSESSION');
session_set_cookie_params(0, '/~cgreenheld/');
session_start();

$conn = blah blah
$query2 = 'Select Type from User WHERE Username = "'.$_SESSION['user'].'" AND Type =\'Admin\'';
$result2 = $conn->query($query2);
if($result2->num_rows==1) {
$_SESSION['admin'] = $result2;
}
?> 
```

嗨，我正在尝试设置此会话变量，但似乎没有设置，我想知道是否有人可以提供帮助。如果 session['admin'] isset 它应该回显管理按钮。但我不太确定为什么？（我确实有会话开始和每个页面上的所有内容，这不是问题或任何“你没有 php 标签”我已经检查了 mysql 查询，它确实从我的表中返回了一些东西。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T08:32:43.730

在与会话变量有关的任何事情之前，您`session_start();`应该位于页面顶部。

从[文档](http://php.net/manual/en/function.session-start.php)：

当 session_start() 被调用或会话自动启动时，PHP 将调用打开和读取会话保存处理程序。

从评论编辑：

```
<?php
    session_name('MYSESSION');
    session_set_cookie_params(0, '/~cgreenheld/');
    session_start();
    // Moved to start after answer was accepted for better readability
    // You had the <?php after this if statement? Was that by mistake?
    if(isset($_SESSION['admin'])) 
    {
        echo "<li><b>Admin</b></li>";
    }

    // If you have already started the session in a file above, why do it again here?

    $conn = blah blah;
    $query2 = 'Select Type from User WHERE Username = "'.$_SESSION['user'].'" AND Type =\'Admin\'';
    // Could you echo out the above statement for me, just to 
    // make sure there aren't any problems with your sessions at this point?
    $result2 = $conn->query($query2);
    if($result2->num_rows==1) 
    {
        $_SESSION['admin'] = $result2;
        // It seems you are trying to assign the database connection object to it here.
        // perhaps try simply doing this:
        $_SESSION['admin'] = true;
    }
?> 
```

从进一步的评论中编辑 2：

您必须像这样实际获取获取数据 - 从[本教程](http://www.php-mysql-tutorial.com/wikis/mysql-tutorials/retrieve-data-from-a-mysql-database.aspx)中截取，这可能会帮助您更多：

```
$query  = "SELECT name, subject, message FROM contact";
$result = mysql_query($query);

while($row = mysql_fetch_array($result, MYSQL_ASSOC))
{
    echo "Name :{$row['name']} <br>" .
     "Subject : {$row['subject']} <br>" .
     "Message : {$row['message']} <br><br>";
} 
```

但是话虽如此，当我们在谈论它时，最好不要使用旧`mysql_*`功能并转向更好的[PDO](http://au.php.net/manual/en/book.pdo.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:32:55.083

移动`session_start();`到页面顶部。您正在尝试检索未加载的会话。

**编辑：**尝试 echoing `$_SESSION['admin']`，如果它甚至包含一些东西。`if($result2->num_rows==1)`还尝试通过添加`echo('its working');`或在其中调试代码`die('its working');`，以检查 $result2 是否恰好包含 1 行，因为目前似乎 $result2 包含多于 1 行或根本没有行。

# hadoop - 如何用盐处理 DISTINCT

> ID：12087690
> 
> 赞同：1
> 
> 时间：2012-08-23T08:31:36.933
> 
> 标签：hadoop, apache-pig

我按照帮助[如何处理](https://stackoverflow.com/questions/11999268/how-to-handle-spill-memory-in-pig)来自alexeipab的猪溢出内存，它确实工作正常，但我现在有另一个问题，相同的示例代码：

```
pymt = LOAD 'pymt' USING PigStorage('|') AS ($pymt_schema);

pymt_grp_with_salt = GROUP pymt BY (key,salt)

results_with_salt = FOREACH pymt_grp {
    --distinct
    mid_set = FILTER pymt BY xxx=='abc';
    mid_set_result = DISTINCT mid_set.yyy;
    result = COUNT(mid_set_result)   
}

pymt_grp = GROUP results_with_salt BY key;

result = FOREACH pymt_grp {

   GENERATE SUM(results_with_salt.result); --it is WRONG!!
} 
```

我不能在那个组中使用 sum，这与没有盐计算的结果有很大不同。

有什么解决办法吗？如果先过滤，会花费很多 JOIN 工作，并且会降低性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:28:38.053

为此，您需要在 mid_set.yyy 和 salt 之间建立多对一关系，以便将来自不同行的 mid_set.yyy 的相同值映射到相同的 salt 值。如果不是，那么 mid_set.yyy 的值将出现在 GROUP pymt BY (key, salt) 生成的不同包中，在不同的盐中存在 DISTINCT，因此在最终汇总中多次包含。这就是为什么在使用盐和 COUNT of DISTINCT 时会得到错误结果的原因。

一种简单的方法是用 mid_set.yyy 本身替换 salt，或者编写一个 UDF/静态方法，通过计算 mid_set.yyy 的哈希值并做 mod N 来计算 salt，其中 N 可以是 1 到无穷大，最佳分布 N 应该是一个素数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:20:19.903

谢谢alexeipab，你给了我很大的帮助，我的做法如下

```
pymt = LOAD 'pymt' USING PigStorage('|') AS ($pymt_schema);

pymt = FOREACH pymt GENERATE *, (yyy%$prime_num) as salt;

pymt_grp_with_salt = GROUP pymt BY (key,salt); 
```

有用！！

如果 yyy 是 num 整数，则可以使用 hash 将字符串或其他字符串转换为整数

# javascript - 通过 onclick 到 textarea 添加和删除多个标签

> ID：12087694
> 
> 赞同：-2
> 
> 时间：2012-08-23T08:31:56.217
> 
> 标签：javascript, jquery, html

我有一个带有 textarea 和数据库标签列表的表单（已经在 textarea 下查询和显示），并且想要在 textarea 上添加这些标签（用逗号分隔），如果标签已经存在，则在用户点击它们时将其删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:28:03.473

我想我知道你的意思，请看看这个小提琴 [http://jsfiddle.net/joevallender/QyqYW/1/](http://jsfiddle.net/joevallender/QyqYW/1/)

代码如下。`tags`将来自服务器并且`selectedTags`是当前选择的托管数组。如有必要，您也可以将数据从服务器加载到其中`selectedTags`，例如编辑现有的标记帖子。如果你这样做了，你`click()`会将函数中的代码重构为它自己的函数，这样它也可以在准备好的文档上运行。

我已经包含了一些类切换和调试屏幕，所以你可以看到发生了什么。

HTML

```
<textarea id="tags"></textarea>
<div id="tagButtons"></div>
<div id="debug"></div> 
```

和 JavaScript

```
var tags = [
  'JavaScript',    
  'jQuery',
  'HTML5',    
  'CSS3'
];

var selectedTags = [];

for(var i = 0; i < tags.length; i++) {
  var el = $('<span>').text(tags[i]);
  $('#tagButtons').append(el);
}

$('#tagButtons span').click(function(){
  var val = $(this).text();
  var index = selectedTags.indexOf(val);
  if(index > -1) {
    var removed = selectedTags.splice(index,1); 
    $(this).removeClass('selected');
    $('#debug').prepend($('<div>').html('Removed: ' + removed));
  } else {
    selectedTags.push(val);
    $(this).addClass('selected');
    $('#debug').prepend($('<div>').html('Added: ' + val));
  }
  $('#tags').val(selectedTags.join(', '));
}); 
```

**编辑**这是一个双向工作[http://jsfiddle.net/joevallender/QyqYW/14/](http://jsfiddle.net/joevallender/QyqYW/14/)

# r - R：在方程内注释

> ID：12087695
> 
> 赞同：1
> 
> 时间：2012-08-23T08:31:58.010
> 
> 标签：r

是否可以在 R 的方程中进行注释？例如：

```
100 /* item 1 */ + 200 /* item 2 */ 
```

给出300的答案。

我认为`/* */`是C代码。虽然，我不确定`100 /* item 1 */ + 200 /* item 2 */`是否会在 C 中运行。

如果我`100 # item 1 # + 200 # item 2 #`在 RI 中使用得到 100 的答案，因为第一个之后的所有内容都`#`被忽略了，正如我所料。

我想我可以使用：

```
#  item 1     item 2
   100    +    200 
```

我只是在想，当方程变得非常长且复杂，占用多行时，在方程中进行注释可能会很好。

以下工作并返回 300：

```
(100 +  # item 1
 200  ) # item 2 
```

这需要在每个注释之后换行，这是我可以得出的最接近上面仅包含一行的初始示例的方法。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T08:46:47.037

这是不可能的。正如[R 语言手册的注释部分所述](http://cran.r-project.org/doc/manuals/R-lang.html#Comments)，唯一的注释字符是#。从 # 到行尾的所有内容都将被忽略（除非 # 在字符串中被引用）。

# python - 在 Django 中正确使用related_name

> ID：12087696
> 
> 赞同：23
> 
> 时间：2012-08-23T08:32:11.770
> 
> 标签：python, django

我有两个使用 ForeignKey 关联在一起的模型，并且使用了 related_name。这是一个例子。

```
class Student(models.Model):
    name = models.CharField(max_length=255)
    birthday = models.DateField(blank=True)

class Class(models.Model):

    name = models.CharField(max_length=255)
    student = models.ForeignKey(Student,
                                related_name='classes',
                                null=True)

    def __unicode__(self):
        return self.name 
```

例如，我想访问类名。

这是我尝试过的。

```
john = Student.objects.get(username = 'john')
print john.classes.name 
```

什么都没有打印出来。

但是当我尝试`john.classes`

我在 0x109911410 处得到 django.db.models.fields.related.RelatedManager 对象。这表明它们是相关的。但我想获得班级名称。

难道我做错了什么？如何使用related_name 访问类的名称？需要一些指导。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-23T08:38:09.473

是的，班级是经理。一位老师可以上几节课。所以要输出他们的名字，你应该这样做：

```
john = Student.objects.get(username = 'john')
for class2 in john.classes.all():
   print class2.name 
```

如果您只想为一名学生上课，请使用一对一的关系。在这种情况下，您可以使用您的方法访问相关字段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T08:44:53.450

请注意：您正在定义一对多关系。因此，学生可能有多个班级，因此 john.classes.name 无法工作，因为您尚未指定要为其命名的班级。在 john.classes 中，“类”只是一个管理器，您可以像使用任何其他 Django 模型管理器一样使用它。你可以做一个 john.classes.all()（就像 sergzach propsed），也可以做 john.classes.get(...) 或 john.classes.filter(...) 之类的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-19T07:29:20.440

你可以这样做来访问表中的第一行

```
john = Student.objects.get(username = 'john')    
john.classes.all().first().name # to access first row
john.classes.all().last().name # to access last row 
```

在上面的示例中，您不想遍历对象

它会给你第一行的类名

# ios5 - 故事板和内存管理

> ID：12087699
> 
> 赞同：0
> 
> 时间：2012-08-23T08:32:20.277
> 
> 标签：ios5, uistoryboard

我决定在我一直在做的项目中使用故事板。当应用程序启动时，它会执行`awakeFromNib`then的正确操作`viewDidLoad`，但是当应用程序完成对另一个视图的转移时，它不会调用`viewDidUnload` ~~，而且我认为 dealloc~~也不会调用。我用过 Apple 的 Instruments 并没有显示任何内存泄漏。

请注意，我正在使用自定义 segues 并通过将`NSLog`s 插入方法来测试它。有没有其他人遇到过这个？

只想更新：`dealloc`实际上是调用但不是`viewDidUnload`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:44:23.650

`viewDidUnload`在实际卸载视图时调用。如果要在未显示视图时清理资源，请将其放入`viewDidDisappear`.

如果您想查看 viewDidUnload 发生了什么，请在模拟器中运行您的应用程序，然后从菜单栏中选择 Hardware | 模拟内存警告。

在内存压力下，不在屏幕上的视图被删除，也`viewDidUnload`就是发送方法的时候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T15:11:10.113

该`viewDidUnload`方法仅用于`didReceiveMemoryWarning`（即当视图被删除以恢复一些内存时，但视图控制器不是）。如果您想`viewDidUnload`在模拟器中运行时查看，请将 ViewController 推送或呈现到辅助视图，然后从模拟器的菜单中生成内存警告。我引用[UIViewController 类参考](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/viewDidUnload)：

> 当内存不足的情况发生并且不需要当前视图控制器的视图时，系统可能会选择从内存中删除这些视图。[`viewDidUnload`方法] 在视图控制器的视图被释放后调用，这是您执行任何最终清理的机会。如果您的视图控制器存储了对视图或其子视图的单独引用，您应该使用此方法来释放这些引用。您还可以使用此方法删除对您为支持视图而创建但在视图消失后不再需要的任何对象的引用。您不应使用此方法发布用户数据或任何其他无法轻松重新创建的信息。
> 
> 在调用此方法时，视图属性为 nil。

# php - chrome中的Mysql查询问题

> ID：12087701
> 
> 赞同：1
> 
> 时间：2012-08-23T08:32:23.970
> 
> 标签：php, mysql

```
 <?php
session_start();
include("configdb.php");
if(!session_is_registered(username)){
header("location:index.php");
}
?>
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Projects</title>
<link href="style.css" rel="stylesheet" type="text/css" />

<script type="text/javascript">

function un_check(){
for (var i = 0; i < document.frmactive.elements.length; i++) {
var e = document.frmactive.elements[i];
if ((e.name != 'allbox') && (e.type == 'checkbox')) {
e.checked = document.frmactive.allbox.checked;
}
}
}
function Confirm(form){
alert("Project has been activated!");
form.submit();
}
function unConfirm(form){
alert("Project has been Deactivated!");
form.submit();
}
</script>
</head>

<body>
<div id="costDiv">
<div id="divErc"></div>
<div id="costBack">

<?php

if(isset($_POST['checkbox'])){$checkbox = $_POST['checkbox'];
if(isset($_POST['activate'])?$activate = $_POST["activate"]:$deactivate = $_POST["deactivate"])

$id = "('" . implode( "','", $checkbox ) . "');" ;
$sql="UPDATE projects SET p_isActive = '".(isset($activate)?'1':'0')."' WHERE p_id IN $id";
$result = mysql_query($sql) or die(mysql_error());

}

?>
<?php include("hor_menu.php"); ?>

<form name="frmactive" method="post" action="">

<table width="350" border="0" cellspacing="1" cellpadding="5" align="center" style="margin-left:150px ; margin-right:auto ; margin-top:20px ; margin-bottom:auto ; position:absolute ; width:400px">

<tr>
<td align="center" ><input type="checkbox" name="allbox" onclick="un_check(this);" title="Select or Deselct ALL" style="background-color:#ccc;"/></td>

<td align="left"><strong>Project</strong></td>
<td align="left"><strong>Country</strong></td>
<td align="left"><strong>Active</strong></td>

</tr>

<?php
while($rows=mysql_fetch_array($result)){
?>
<tr>
<td align="center"><input name="checkbox[]" type="checkbox" id="checkbox[]" value="<?php echo $rows['p_id']; ?>"/></td>
<td><?php echo $rows['p_name']; ?></td>
<td><?php echo $rows['p_country']; ?></td>
<td><?php if ($rows['p_isActive'] == '1'){ echo'Active';} else{ echo 'Inactive';} ?></td>

</tr>
<?php
}
?>
<tr>
<td colspan="5"><input name="activate" type="submit" id="activate" value="Activate" onClick="Confirm(this.form)" />
<input name="deactivate" type="submit" id="deactivate" value="Deactivate" onClick="unConfirm(this.form)"/></td>
</tr>
</table>

?>
</td>
</tr>
</table>
</form>
</body>
</html> 
```

我有这个代码。当我检查一个复选框项目时，将根据底部激活或停用。但是，此代码在除 google chrome 和 safari 之外的所有浏览器上都能完美运行。任何人都可以帮忙。它一直在我的 sql 中出现错误更新查询中 where 子句之后的语法尤其是。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:09:14.677

这是不合法`id="checkbox[]"`的：摆脱它。

没有必要将所有内容都分配给`ID`. `ID`仅在您实际在 javascript 中使用它时才分配。否则就别管它了。

`INPUT`字段确实需要一个`name`属性，但它的工作*方式*与`ID`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:40:05.753

如果您收到取决于浏览器的 SQL 错误，那么您很可能需要检查您的输入。PHP 执行不会因您使用的浏览器而有所不同，除了它从客户端控件（如文本框或触发器）获取的数据之外。

我建议您`$sql`以某种方式记录变量，您可以尝试使用`var_dump`, 来查看数据在浏览器之间的变化。

# view - 在 Lotus Notes 7 的视图中扩展单元格

> ID：12087702
> 
> 赞同：0
> 
> 时间：2012-08-23T08:32:25.180
> 
> 标签：view, cell, lotus-notes, rows

我有一个包含 5 列的视图。每列都有一个字段的值。

例如，如果文本字段中的值太大，则在视图列中说：“sadereara meareareareea eraarerea emeammera”，它只出现：“saderera”。它只出现在他指定长度的列中。

是否有可能扩展/扩展单元格/行以查看所有文本，而不仅仅是其中的一部分？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T08:59:36.547

在样式选项卡（第三个选项卡）上的视图属性中，您可以将行的高度设置为例如 9，然后标记将行缩小到内容选项。

![在此处输入图像描述](../Images/7d216eb7f482758297953f83af6e85f8.png)

这应该够了吧。

# c++ - 使用顶点缓冲区对象在 OpenGL 中绘制曲面时出现不希望的锯齿

> ID：12087704
> 
> 赞同：1
> 
> 时间：2012-08-23T08:32:26.450
> 
> 标签：c++, opengl, cuda, vbo

首先，我给出了在 opengl 中有问题的渲染图像的屏幕截图。第四个表面图像是由 Matlab 绘制的，这就是图像在 Opengl 中的样子。

![这里的问题](../Images/f88a6943194b350f508f3aa98aed8e5e.png)

.

![另一个角度](../Images/502b9b8cb1c2dffd097647441234ff58.png)

.

![...](../Images/9d854cf47be11d401ead26acee5a17e0.png)

.

数据集的matlab渲染： ![MATLAB 渲染](../Images/3deea1477e563e6e6d4053ac00e557f9.png)

（前3张是OpenGL在不同角度绘制的有问题的锯齿状图，第4张是正确的MATLAB绘制的图像）

图像是一个 1024 x 1024 的复矩阵。每个元素的虚部是点的高度（在 1024x1024 高度图中），实部是点的颜色。

在 matlab 中，我们创建了一个小的高斯形状的山。在 OpenGL 中，它是用破布和锯齿呈现的。“衣衫褴褛”遍布整个图像。

此外，根据对象的视角，似乎存在一条线以外的区域，不仅会出现更奇怪的锯齿版本，而且渲染的图形也会产生高度跳跃/变化。

什么会导致这种情况？为什么会发生这种“衣衫褴褛”，那条线是什么？我们现在已经用完了所有的想法，并且会感谢任何帮助。下面给出了 VBO 代码的相关部分。我们基本上为一个顶点创建了一个 float4 对象。结构中的第一、第二和第三个浮点数对应点的坐标。第 4 个浮点数（视为 4 个单字节数字）是 RGBA 颜色。

另请注意，包含高度图和颜色信息的复杂矩阵存储在 GPU 中，因此代码中有对 CUDA 的调用。当所有数据都转储到一个文件中时，matlab成功绘制了地图，所以数据肯定是正确的。

```
#define BUFFER_OFFSET(i) ((char *)NULL + (i))

void initGL()
{
...
  glViewport(0, 0, window_width, window_height);
    glEnable(GL_BLEND);
glEnable(GL_COLOR_MATERIAL);
glBlendFunc (GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

// projection
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
gluPerspective(60.0, (GLfloat)window_width / (GLfloat) window_height, 0.1, 15.0);
...
}

void display()
{
camx += camx_v;
camy += camy_v;
camx_v=0;
camy_v=0;

glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

// set view matrix
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();

gluLookAt(0, 0, 1, /* look from camera XYZ */
           0, 0, 0, /* look at the origin */
           0, 1, 0); /* positive Y up vector */

drawGround();

glTranslatef(camx, camy, translate_z);

glRotatef(rotate_x, 1.0, 0.0, 0.0);
glRotatef(rotate_y, 0.0, 1.0, 0.0);

glBindBuffer(GL_ARRAY_BUFFER, vbo);
glEnableClientState(GL_VERTEX_ARRAY);
glVertexPointer(3, GL_FLOAT, 16, BUFFER_OFFSET(0));
glEnableClientState(GL_COLOR_ARRAY);
glColorPointer(4, GL_UNSIGNED_BYTE, 16, BUFFER_OFFSET(12));

glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, vbo_i);
glDrawElements(GL_TRIANGLES, (mesh_width-1) * (mesh_height-1) * 6, GL_UNSIGNED_INT, (GLvoid*)0);

glDisableClientState(GL_VERTEX_ARRAY);
glDisableClientState(GL_COLOR_ARRAY);

glutSwapBuffers();

 }

 void createVBO(GLuint* vbo, struct cudaGraphicsResource **vbo_res, 
       unsigned int vbo_res_flags)
{

glGenBuffers(1, vbo);
glBindBuffer(GL_ARRAY_BUFFER, *vbo);

unsigned int size = mesh_width * mesh_height * 4 * sizeof(float);
glBufferData(GL_ARRAY_BUFFER, size, 0, GL_DYNAMIC_DRAW);

glBindBuffer(GL_ARRAY_BUFFER, 0);

cutilSafeCall(cudaGraphicsGLRegisterBuffer(vbo_res, *vbo, vbo_res_flags));

 }

  void createIBO(GLuint* vbo, struct cudaGraphicsResource **vbo_res, 
       unsigned int vbo_res_flags, unsigned int numofindice)
  {

glGenBuffers(1, vbo);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, *vbo);

unsigned int size = (mesh_width-1) * (mesh_height-1) * numofindice * sizeof(GLuint);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, size, 0, GL_STATIC_DRAW);

glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0);
cutilSafeCall(cudaGraphicsGLRegisterBuffer(vbo_res, *vbo, vbo_res_flags));

}

  void main()
 {
 initGL();
createVBO(&vbo, &cuda_vbo_resource, cudaGraphicsMapFlagsWriteDiscard);
    createIBO(&vbo_i, &cuda_vbo_resource_i, cudaGraphicsMapFlagsWriteDiscard, 6);
   glutMainLoop();
  } 
```

//内核填充GPU中的INDEX BUFFER，在程序初始化时调用一次。

```
 __global__ void fillIBO(unsigned int* pos_i, unsigned int M)
 {
   unsigned int x = blockIdx.x*blockDim.x + threadIdx.x;
unsigned int y = blockIdx.y*blockDim.y + threadIdx.y;

unsigned int bi;

if(y<M-1 && x<M-1)
{

    bi =  ((M-1)*y +x)*6;

    //TRI
    pos_i[bi++] = x + y*M + 1;
    pos_i[bi++] = x + y*M + M + 1;
    pos_i[bi++] = x + y*M;

    pos_i[bi++] = x + y*M; 
    pos_i[bi++] = x + y*M + M + 1;
    pos_i[bi++] = x + y*M + M; 

}    
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:52:59.267

~~将第二个三角形替换为：~~

 ~~```
pos_i[bi++] = x + y*M + 1;
pos_i[bi++] = x + y*M + M + 1;
pos_i[bi++] = x + y*M + M; 
```~~  ~~另外，我很确定应该是

```
bi =  (M*y +x)*6; 
```~~

# c# - 无法在 VS 2010 中打开 .RPT 文件

> ID：12087714
> 
> 赞同：1
> 
> 时间：2012-08-23T08:32:58.430
> 
> 标签：c#, visual-studio-2010

我已经安装了 Visual Studio 2010，它不包括 Crystal Reports，所以我从 MSDN 外部下载了 SAP Crystal Report 并安装了 SAP Crystal Reports 当我打开 Visual Studio 2010 时，我无法设计现有的 .RPT 文件，但是当我运行应用现有报告打开

那么我不能设计 .rpt 文件的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:00:43.577

您可能需要在开发人员机器上安装 Crystal Reports For Visual Studio 2010 以及运行时引擎。
![在此处输入图像描述](../Images/cf91a320a90888a34f2d0617640fe194.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T10:34:09.997

实际上提供了两个版本的 Crystal Reports：

- Crystal Reports Redistribution Version。
- Visual Studio 的水晶报表。

确保您下载了正确的。
如果问题仍然存在，请尝试卸载 CR 并清理注册表和所有内容，然后重新安装。

希望能帮助到你

# python - PyQt4：获取 QListWidget 中所有标签的列表

> ID：12087715
> 
> 赞同：3
> 
> 时间：2012-08-23T08:33:01.500
> 
> 标签：python, qt4, pyqt4

我是 PyQt4 的新手，尤其是 QListWidget。我正在尝试获取 QListWidget 中当前显示的所有标签的（Python）列表。我能够获得所有 QListWidgetItems 的列表，但我不确定如何从那里获取标签......

这是我用来获取所有 QListWidgetItems 列表的方法：

```
 items = []
    for index in xrange(self.ui.QListWidget.count()):
         items.append(self.ui.QListWidgetitem(index)) 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T08:36:21.637

`.text()`返回 QListWidgetItem 中的文本。请注意，您需要调用`.item(index)`原始 QListWidget 实例来获取列表小部件中包含的项目：

```
items = []
for index in xrange(self.ui.QListWidget.count()):
     items.append(self.ui.QListWidget.item(index))
labels = [i.text() for i in items] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-01T08:22:12.697

您可以强制列表小部件返回所有项目`findItems`：

```
lst = [i.text() for i in self.lstFiles.findItems("", QtCore.Qt.MatchContains)] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-17T19:50:53.613

这是使用列表理解的解决方案：

```
labels = [list_widget.item(i).text() for i in range(list_widget.count())] 
```

# sql-server - 将 varchar 值隐式转换为 varchar - 排序规则冲突

> ID：12087721
> 
> 赞同：5
> 
> 时间：2012-08-23T08:33:22.167
> 
> 标签：sql-server

运行此脚本时出现以下错误。我尝试过使用以下内容：COLLATE Latin1_General_CI_AS。请问可以排序吗？谢谢

> 消息 457，级别 16，状态 1，第 8 行
> 无法执行 varchar 值到 varchar 的隐式转换，因为值的排序规则由于排序规则冲突而未解决

```
DECLARE @AccountID INT 
SET @AccountID = 12

SELECT TOP 1    ac.AccountID,
            co.Email,
            ao.AccountOptionID
FROM CRM.acc.Account ac
INNER JOIN CRM.[profile].[Profile] pr
    ON pr.ProfileID = ac.ProfileFK
INNER JOIN CRM.[profile].Contact co
    ON pr.ProfileID = co.ProfileFK
LEFT JOIN CRM.acc.[AccountOption] ao
    ON ao.AccountFK = ac.AccountID
LEFT JOIN (
            SELECT OptionID
            FROM CRM.acc.[Option]
            WHERE [Name] = 'SMS messages') op
    ON op.OptionID = ao.OptionFK
WHERE ac.AccountID = @AccountID

UNION ALL

SELECT      u.UnsubscribeID,
        u.EmailAddress,
        u.SentEmailFK
FROM  Email.dbo.Unsubscribe u
  INNER JOIN  (
                    SELECT      CASE
                                      WHEN AccountTypeFK = 2 THEN OnlineBillingEmail
                                      ELSE EmailBillingEmail
                                END [EmailAddress]
                    FROM  CRM.acc.Account
                    WHERE AccountID = @AccountID                    
                    ) ace
        ON ace.EmailAddress COLLATE DATABASE_DEFAULT  = u.EmailAddress COLLATE DATABASE_DEFAULT
WHERE ISNULL(ace.EmailAddress, '') != '' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T08:53:16.600

似乎您的数据库上有不同的排序规则类型。然后，在连接表或其他数据库中的表时，您可能会遇到问题，就像在这种情况下一样。要解决这个问题，您可以指定列的排序规则，或者在连接两列时使用 COLLATE 子句强制排序。[在 MSDN 中](http://msdn.microsoft.com/en-us/library/ms187582%28v=sql.105%29.aspx)查看有关排序规则的更多信息

您还需要指定使用有问题的列的 COLLATE 子句。[检查这个答案](https://stackoverflow.com/questions/3861782/sql-server-error-implicit-conversion-of-because-the-collation-of-the-value-is-u)，它回答了一个非常相似的问题

最好在全局范围内坚持单一的排序规则。否则你会有问题。

[查看不同排序规则](http://msdn.microsoft.com/en-us/library/ms143515%28v=sql.105%29.aspx)的详细说明

已编辑：要检查列排序规则，请使用此代码段

```
SELECT name, collation_name
  FROM sys.columns
  WHERE OBJECT_ID IN (SELECT OBJECT_ID
                        FROM sys.objects
                       WHERE type = 'U'
                         AND name = 'your_table_name'
                      )
    AND name = 'your_column_name' 
```

编辑：添加片段以获取数据库上具有不同排序规则的所有列

```
SELECT [TABLE_NAME] = OBJECT_NAME([id]),
       [COLUMN_NAME] = [name],
       [COLLATION_NAME] = collation
  FROM syscolumns
 WHERE collation <> 'your_database_collation_type'
   AND collation IS NOT NULL
   AND OBJECTPROPERTY([id], N'IsUserTable')=1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:40:49.317

尝试这个

```
ace.EmailAddress COLLATE Latin1_General_CI_AS = u.EmailAddress COLLATE Latin1_General_CI_AS 
```

# android - android中的动态调用布局

> ID：12087722
> 
> 赞同：1
> 
> 时间：2012-08-23T08:33:23.537
> 
> 标签：android, android-layout, android-activity

我有 2 个活动（MainActivity 和 CallLayoutActivity），还有 2 个布局（main 和 layout_for_use）。
在布局（主）中，我有 6 个按钮。例如：当我按下按钮 3 时，它显示布局颜色粉红色或按下按钮 4 显示布局颜色蓝色。

我想要的是我不想创建 6 个 CallLayoutActivities 和 6 个布局。

暗示

按钮 1：Mainactivity > CallLayoutActivity > 布局颜色白色
按钮 2：Mainactivity > CallLayoutActivity > 布局颜色黑色

我使用 onClickListener 和 Intent 调用新类的每个按钮

```
Intent i_btn_number = new Intent(MainActivity.this, CallLayoutActivity.class);
StartActivity(i_btn_number); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:37:29.987

通过意图将按钮编号传递给 CallLayoutActivity，并根据该按钮编号更改 CallLayoutActivity 中布局的颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:37:41.940

我想你想做这样的事情

例如：

```
if(btn1)
    i_btn_number.putExtra("color","color_here-1";
else if(btn2)
    i_btn_number.putExtra("color","color_here-2";
else if(btn3)
    i_btn_number.putExtra("color","color_here-2";
... 
```

在**CallLayoutActivity.java中**

```
color = getIntent().getStringExtra("color");
layout.setBackgroundColor(color); 
```

# formatting - 用 awk 附加文件名

> ID：12087725
> 
> 赞同：1
> 
> 时间：2012-08-23T08:33:41.670
> 
> 标签：formatting, gawk

使用 GnuWin32 中包含的 gawk for Windows，如何将文件名附加到文本文件中？

这是我想要的一个例子：

```
Filename -> text.txt
"aaaa","bbbb","c" 
```

结果应该是：

```
"aaaa","bbbb","c","text.txt" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T08:36:39.497

它存在（至少在 Linux 版本中）一个`FILENAME`带有正在处理的文件名的变量。所以使用它：

```
awk '
    BEGIN {
        FS = OFS = ",";
    }
    {
        print $0 OFS "\"" FILENAME "\""
    }
' input-file 
```

# ruby-on-rails - 使用多模型形式在 rails3 中创建新对象

> ID：12087735
> 
> 赞同：0
> 
> 时间：2012-08-23T08:34:09.280
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, multi-model-forms

就rails而言，我是n00b。我正在尝试在我的第一个 rails3 项目中创建一个单一的多模型表单。详情如下：

```
class Item < ActiveRecord::Base
  # attr_accessible :title, :body
  has_many :item_reviews, :dependent => :destroy
  accepts_nested_attributes_for :item_reviews
end 
```

和

```
class ItemReview < ActiveRecord::Base
  # attr_accessible :title, :body
  belongs_to :item
end 
```

很明显，一个项目可以有多个评论，但是当我创建一个项目时，我希望它至少有 1 条评论。所以我想在创建项目时以单一形式获取项目和第一次审查。

我正在使用以下视图：

```
<%provide(:title,'Create')%>
<h1> Add an Item review</h1>

<div class="row">
  <div class="span6 offset3">
    <%= form_for (@item) do |f| %>

      <%= f.label :name %>
      <%= f.text_field :name %>

      <% f.fields_for :item_reviews, @item.item_reviews do |ff| %>
        <%= ff.label :shop_address %>
        <%= ff.text_field :shop_address %>
      <% end %>

      <%= f.submit "Submit", class: "btn btn-large btn-primary" %>

    <% end %>

  </div>
</div> 
```

`<% f.fields_for :item_reviews, @item.item_reviews do |ff| %>`将无法工作，因为没有与`@item`当前关联的 item_review ( `@item = Item.new`) 在我保存 @item 之前，我无法创建新的 item_review。在那种情况下我该怎么办。

我知道一种可能性是独立于模型的形式，但我不能使用上面的东西来简化生活。

**PS：**我正在使用引导程序，以防万一有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:42:38.433

有一些方法可以实现带有项目评论的实例。关键是用一些嵌套实例创建一个实例而不实际保存

```
@item = Item.new
@item.item_reviews.build 
```

然后以你的形式

```
form_for @item do |f|
...
  f.fields_for :item_reviews do |ff| 
```

使用此代码，存在一个审查实例，您可以呈现表单

# c# - jQuery 和 ASP.NET 页面加载

> ID：12087737
> 
> 赞同：1
> 
> 时间：2012-08-23T08:34:20.053
> 
> 标签：c#, jquery, asp.net, html, pageload

我使用 Web 控件测试 jQuery 和 ASP.NET，并且在我的测试中，如果我单击按钮，则每次都加载新的 Side。jQuery 代码将 Css 类添加到标签。

我的aspx：

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Main.aspx.cs" Inherits="jQueryAnwendung.Main" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>jQuery Anwendung</title>

    <script src="Scripte/jquery-1.8.0.min.js" type="text/javascript"></script>

    <style type="text/css">
        .CssKlasse 
        {
            background:red;
            font-size:40px; 
            }
    </style>

    <script type="text/javascript" language="javascript">

        $(document).ready(function () {
            $("#<%= b1.ClientID%>").click(function (event) {
                $("#<%= bild1.ClientID %>").slideToggle('slow');
            });

        });

    </script>

</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:Button ID="b1" runat="server" text="Bild verkleinern/vergrößern"/>
        <asp:Image ID="bild1" runat="server" ImageUrl="~/Theme/net.png" Width="50" Height="50" /> 
    </div>
    </form>
</body>
</html> 
```

我能做些什么？

塔拉索夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:40:35.383

生成的id更加冗长；打开浏览器并单击*查看源代码*。你会注意到它。将 ID 复制并粘贴到您的 jQuery 选择器中。

另一种方法是`b1.clientID`在你的`.aspx`:内部调用`$("<%= b1.ClientID %>")`，它将`clientID`在运行时输出生成的。

从 ASP.NET 4 开始，`StaticMode`您可以完全控制生成的 ID。有关更多信息，请查看：http: [//msdn.microsoft.com/en-us/library/system.web.ui.control.clientid.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientid.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:41:04.807

如果您使用 asp 控件，您有两种方法来处理它

首先是在你的 jQuery 函数中进行更改`"#b1`和`"#l1"`更改`"<%= #b1.ClientID%>"``"<%= #l1.ClientID %>"`

其次是添加属性`ClientIDMode="Static"`到你的`asp:Button`和`asp:Label`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T08:44:33.387

当您单击 Asp 按钮时会导致回发 - 页面重新加载并且您的脚本未执行，您可以改用 HTML 按钮或尝试禁用此按钮上的回发。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T09:11:12.570

在您的处理程序中，防止按钮正常运行：

```
$("#<%= b1.ClientID%>").click(function (event) {
  event.preventDefault(); //prevent the control to act in its default way
  $("#<%= bild1.ClientID %>").slideToggle('slow');
}); 
```

# symfony - 文件上传：如何使用断言排除 MIME 类型？

> ID：12087738
> 
> 赞同：9
> 
> 时间：2012-08-23T08:34:19.427
> 
> 标签：symfony, mime-types, assert

在 Symfony 中，我可以使用以下方式接受 MIME 类型：

```
/**
  * @Assert\File( maxSize="10M", mimeTypes={"application/pdf", "image/png"} )
  */
public $file; 
```

但是我怎样才能从那个列表中排除一些东西呢？比方说，我想允许除 PHP 文件之外的所有上传？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T18:38:28.177

您可以通过断言实现[回调约束。](http://symfony.com/doc/2.0/reference/constraints/Callback.html)此方法的一个优点是您可以将错误消息应用于表单中的任何字段（或多个字段）。

```
use Symfony\Component\Validator\ExecutionContext;

/**
 * @ORM\Entity()
 * @Assert\Callback(methods={"validateFile"})
 */
class MyEntity
{

    public function validateFile(ExecutionContext $context)
    {
        $path = $context->getPropertyPath();
        if (/* $this->file is not in allowed mimeTypes ... */) {
            $context->setPropertyPath($path . '.file');
            $context->addViolation("Invalid file mimetype", array(), null);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-17T17:01:33.217

您无需创建任何回调即可执行此操作。只要确保：

1) 在您的 app/config/config.yml 中将 enable_annotations 参数设置为 true：

```
# app/config/config.yml
framework:
    validation:      { enable_annotations: true } 
```

2）在您的实体文件中正确包含验证约束。

```
// YourEntity.php
use Symfony\Component\Validator\Constraints as Assert; 
```

3）正确使用注释。例子：

```
// YourEntity.php
/**
 * @Assert\File(
 *      maxSize="5242880",
 *      mimeTypes = {
 *          "image/png",
 *          "image/jpeg",
 *          "image/jpg",
 *          "image/gif",
 *          "application/pdf",
 *          "application/x-pdf"
 *      }
 * )
 */
 private $arquivo; 
```

上面的代码在我的 Symfony 2.3.9 上运行良好。

[]s

# android - 当我们缩小到最高级别时，谷歌地图在冰淇淋三明治中不可见

> ID：12087741
> 
> 赞同：0
> 
> 时间：2012-08-23T08:34:25.450
> 
> 标签：android, android-mapview, android-maps

我有一个谷歌地图应用程序。当我们缩小到最高级别时，地图是不可见的。![在此处输入图像描述](../Images/e916b0f4984824da4afda48d4fcc1e56.png)如图所示，只看到一些灰线。这只发生在冰淇淋三明治中。这不会在 Froyo 发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:27:34.667

这是因为没有足够的地图信息来填满屏幕。您正处于`MapView`显示整个地球的地步。您将获得带有 (-) 的放大镜，因为该缩放无法获得图像数据。

您有 2 个选项中的 1 个，1，创建缩放检查器...如果此人的缩放比例低于 (x)（5 或 4 可能是一个很好的 zoomLevel），则将缩放级别重置为 (x)。或者，如果您仍然需要显示整个世界地图，您可以更改您的应用程序以使用横向而不是纵向视图。我正在开发的应用程序也发生了同样的事情，我选择了解决方案 1。

# python - 我应该在函数调用的最后一个参数之后添加一个逗号吗？

> ID：12087742
> 
> 赞同：45
> 
> 时间：2012-08-23T08:34:26.980
> 
> 标签：python, function, coding-style, parameter-passing

做什么比较好？

```
self.call(1, True, "hi") 
```

或者

```
self.call(1, True, "hi",) 
```

以及在以下情况下：

```
self.call(
    1,
    True,
    "hi"
) 
```

或者

```
self.call(
    1,
    True,
    "hi",
) 
```

?

在数据结构中添加尾随逗号的原因我很熟悉，但是函数调用呢？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-07-05T15:14:37.613

我认为在函数调用中避免使用尾随逗号没有技术上的理由，但有些人可能确实发现它们会分散注意力。有些人可能会停下来说：

*“嗯，我想知道那是否真的应该在那里？”*

我不愿称其为好处，但使用尾随逗号和缩进样式的一个*效果*是在添加参数时**使版本控制差异看起来更清晰。**

例如，这样的函数：

```
def my_fun(a, b, c=None):
    ... 
```

...这样称呼：

```
my_fun(
    a='abc',
    b=123
) 
```

...然后更改为：

```
my_fun(
    a='abc',
    b=123,
    c='def'
) 
```

在 git 中产生这个差异：

```
$ git diff
...
 my_fun(
     a='abc',
-    b=123
+    b=123,
+    c='def'
 ) 
```

然而，

```
my_fun(
    a='abc',
    b=123,
) 
```

变成...

```
my_fun(
    a='abc',
    b=123,
    c='def',
) 
```

在 git 中产生这个差异：

```
$ git diff
...
 my_fun(
     a='abc',
     b=123,
+    c='def',
 ) 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2018-04-04T15:23:41.967

我也会把我的 2 美分留在这里，即使这个帖子已经存在了很长一段时间，它可能会让某人受益:)

**PEP8**实际上确实说明[了何时使用尾随逗号](https://www.python.org/dev/peps/pep-0008/#when-to-use-trailing-commas)，并且如果您遵循他们的建议（不是强制性的，但绝对**推荐**），那么可以排除您的第二个单行示例，即：

不：

```
self.call(1, True, "hi",) 
```

是的：

```
self.call(
    1,
    True,
    "hi",
) 
```

函数调用中的用法（**谨慎使用到从不使用**），原因如下：

* * *

*   编码原则之一是函数应该做**一件事**，而且**只做一件事**。因此，看到后面的逗号，可能会出现很多问题，而实际上它们不应该出现。通常，当您在某处看到尾随逗号时，您**会期望**该内容会**随着时间而改变**。因此，如果它是一个**list**、**tuple**、**dict**等，它通常表明无论是谁设计它，都是为了在该数据结构中物理添加、删除或切换行，而且......你看不到功能非常频繁，或者至少你不应该，如果你这样做，应该考虑更好的设计。

*   如前所述，一个函数也应该是非常可预测的，你不要设计一个同时向月球发送邮件和火箭的函数，并且在调用它发送邮件时留下一个**逗号**，因为谁知道你什么时候可以发送火箭并且你想要更少混乱的差异（它只会导致更多的混乱和糟糕的设计）。

*   **任意数量的参数**（甚至是固定但大量的参数）通常表明您要么在那里实例化一个对象，要么您正在**做多个事情**，而实际上您应该做的是将您的设计拆分为创建多个较小的函数，**每个函数只做一件事**，因此**不需要尾随逗号**。

*   还要考虑一下，即使你确实有一个函数，你可以用多个参数调用它，想想你多久会这样做一次，这意味着什么？好吧，这意味着：

    *   在调用位置（可能在另一个函数中，或在模块中或某处）重构代码，因为通常函数的结果存储在变量中，并且您需要使用该新结果，因此这意味着重构。
    *   如果它不暗示重构，那么它意味着该函数不返回任何东西，或者它返回相同的东西，在这种情况下，它意味着它使用调用中传递的额外参数执行多项操作，如前所述，不是很理想。

实际用途

* * *

*   **尾随逗号**是有意义的，就像您在数据结构中所说的那样，数据结构预计会随着时间的推移发生物理变化，因为如果您在运行时更改它，那么它对编辑器中的任何内容都没有任何意义，除了定义也可能是一个空结构`[]`xD

*   如果数据结构（**列表、字典、集合、元组**等）预计会发生变化（实际上是源代码），那么实际上建议使用尾随逗号并且实际上很有用（[请参阅完整的 PEP 链接](https://www.python.org/dev/peps/pep-0008/#when-to-use-trailing-commas)，它有用例和建议）

结论：

* * *

*   **推荐**用于预期会发生物理变化的多行数据结构
*   **很少**在函数调用中
*   **从不**在函数定义中

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-08-23T08:38:44.543

在数据结构中，结尾的逗号“有用”，可以更轻松地添加项目：

```
a = [
      1,
      2,
      3,
    ] 
```

更容易变成

```
a = [
      1,
      2,
      3,
      4,
      5,
    ] 
```

因为您不必编辑`3,`.

但是在通常不会改变长度的函数调用中没有这样的好处。所以我不鼓励使用尾随逗号。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-12-14T19:02:37.013

我认为，在这个问题上，同样的原因适用于列表和元组，因为函数参数列表正是如此。

[以下是针对该语言 ( cf](https://docs.python.org/dev/faq/design.html#why-does-python-allow-commas-at-the-end-of-lists-and-tuples) )做出的设计决策的常见问题解答中的引述：

> **为什么 Python 允许在列表和元组末尾使用逗号？**
> 
> Python 允许您在列表、元组和字典的末尾添加一个尾随逗号：
> 
> ```
> [1, 2, 3,]
> ('a', 'b', 'c',)
> d = {
>     "A": [1, 5],
>     "B": [6, 7],  # last trailing comma is optional but good style
> } 
> ```
> 
> 允许这样做有几个原因。
> 
> 当列表、元组或字典的文字值分布在多行时，添加更多元素会更容易，因为您不必记住在前一行添加逗号。这些行也可以重新排序而不会产生语法错误。
> 
> 意外省略逗号会导致难以诊断的错误。例如：
> 
> ```
> x = [
>   "fee",
>   "fie"
>   "foo",
>   "fum"
> ] 
> ```
> 
> 这个列表看起来有四个元素，但实际上包含三个：“fee”、“fiefoo”和“fum”。始终添加逗号可以避免这种错误来源。
> 
> 允许尾随逗号也可以使程序代码生成更容易。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-10-25T15:52:06.373

这是特定于工具的，但它实际上使 vim/Gvim 中的代码重构更加容易，即使在单行函数参数列表上也是如此。

> def foo(a, b, c, e, d, ):

变成

> def foo(a, b, c, d, e, ):

使用 vim 时，只需按两次键 (dW) 即可删除“e”或“d”，移动到要粘贴的位置并按 (p)。

如果您没有结束逗号，则最终必须将其从新的最后一项中删除并将其添加到旧的最后一项中。或者，您必须更加小心地删除直到逗号和更精确地粘贴。使用逗号无处不在，您可以将所有内容视为可以轻松交换的统一块。

Vim 显然在 python 编写者中很受欢迎，所以这实际上似乎有一些优点：[https ://www.sitepoint.com/which-code-editors-do-pythonists-use/](https://www.sitepoint.com/which-code-editors-do-pythonists-use/)

# php - 无法从 $class 获取静态变量

> ID：12087743
> 
> 赞同：5
> 
> 时间：2012-08-23T08:34:27.267
> 
> 标签：php, class, scope

我有一个关于“动态”类初始化的问题，让我解释一下我的意思：

```
$class = 'User';
$user = new $class();

//...is the same as doing
$user = new User(); 
```

所以......这不是问题，但我在从类中调用静态变量时遇到了一些麻烦，例如：

```
$class = 'User';
print $class::$name; 
```

这给出了以下错误：

> 解析错误：语法错误，出现意外的 T_PAAMAYIM_NEKUDOTAYIM

当然，我已经测试过了`print User::$name;`，这很有效。所以课堂有效。

为什么会这样，有没有办法解决它？

***后续问题：***
还有什么正当理由不使用这种“动态”方式来创建类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:42:19.517

这是我在评论中链接的问题的答案：

> 您可以使用[反射](http://uk3.php.net/language.oop5.reflection)来执行此操作。给定类名创建一个[ReflectionClass](http://uk3.php.net/manual/en/language.oop5.reflection.php#language.oop5.reflection.reflectionclass) 对象，然后使用 getStaticPropertyValue 方法获取静态变量值。
> 
> ```
> class Demo
> {
>     public static $foo = 42;
> }
> 
> $class = new ReflectionClass('Demo');
> $value=$class->getStaticPropertyValue('foo');
> var_dump($value); 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T08:41:36.553

此代码在 PHP 5.4.3 上运行良好：

```
<?php

class A {
    public static $var = "Hello";
}

print(A::$var);

$className = "A";
print($className::$var);

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T08:48:00.413

如果您没有 5.3 及更高版本的 PHP 版本，并且您不想使用反射（在我看来这太过分了 - 除非您想访问多个静态属性），您可以定义 getter 函数并通过 call_user_func 调用它():

```
class A {
    public static $var = "Hello";
    public static function getVar() {
        return self::$var;
    }
}
$className = "A";
echo call_user_func(array($className, 'getVar')); 
```

# php - 不知道如何处理 redis 和 php

> ID：12087747
> 
> 赞同：-1
> 
> 时间：2012-08-23T08:34:42.043
> 
> 标签：php, redis

我已经阅读了redis和php的教程。我目前正在使用predis。我有三个名为`form.php`、`submit.php`和的文件`mail.php`。在`form.php`我有一个简单的形式。在`submit.php`我写了一个简单的代码来显示一些东西。并且在`mail.php`. 我写了一些发送邮件的代码。当我提交表格时，`form.php`它应该继续`submit.php`。并且`mail.php`应该在后台启动。我写过这样的东西：

`submit.php`

```
 $client = new \Predis\Client();
  $client->select(4);
      $client->lpush('xxxx',$x['to']);
 $arrOutput=shell_exec('php mail.php');
    print_r($arrOutput); 
```

在`mail.php`

```
 require '/var/www/predis/autoload.php';
        \Predis\Autoloader::register();

echo "hi";

require_once('Services/Notification.php');

$client = new \Predis\Client();
      $client->select(4);

$u=$client->blpop('xxxx',0);

var_dump($u);

notification_on_signup($u[1]); 
```

那么请告诉我应该如何配置这个东西。这样我就可以在 bakground 中发送 mail.php

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:52:07.837

你可以很容易地实现你想要的。在大多数现代 JS 框架中，您不仅可以提交对服务器的异步调用，还可以提交成功/失败的回调函数。

假设你使用`jQuery`它会类似于这个：

```
$.post('submit.php', function(response) {
    //do you want to do anything with response string?
    //do it now
    $.post('mail.php', function(response) {

    });
}); 
```

检查[文档](http://api.jquery.com/jQuery.post/)。

# api - 黑莓推送客户端应用程序订阅

> ID：12087748
> 
> 赞同：0
> 
> 时间：2012-08-23T08:34:51.213
> 
> 标签：api, blackberry, push

在 BlackBerry 推送客户端应用程序中，我有几件事需要澄清。我开发了一个支持推送的应用程序，它可以从安装在可公开访问的位置（通过 BIS）的示例推送发起程序应用程序接收推送消息。我现在遇到了一个关于向每个设备发送个性化消息的问题。为此，我需要使用 BlackBerry 推送 SDK 附带的订阅 API。[这个问题](http://supportforums.blackberry.com/t5/BlackBerry-Push-Development/Confusion-in-sample-client-side-application/td-p/1776667)与此处发布的内容相似，但它不包含任何信息。我的问题是，

1.  我使用 BlackBerry 客户端应用程序注册的注册 API 来接收来自 PPG 的推送消息。它只需要应用 ID、设备端口和推送 URL（而不是推送发起者 URL）。客户端应用程序在应用程序 UI 启动时自行注册（这就是我向推送 API 注册的方式）。这是我需要做的所有事情来使用推送发起者为该客户端获取订阅，还是客户端需要直接联系推送发起者进行订阅？
2.  为什么我需要在推送发起者应用程序中提供订阅/取消订阅 URL（我没有在客户端推送应用程序中提供任何取消订阅/订阅功能）或者有没有办法通过应用程序管理器/操作系统来实现？还是我需要从 PushResult 对象中获取取消订阅的用户并对其进行处理？
3.  当推送客户端没有订阅推送发起者的机制时，推送发起者如何最初了解客户端？
4.  除了 RIM 提供的文档资料外，是否有博客文章或教程描述了整个通信过程中涉及的每一个步骤？

目前我正在使用 Push Essentials，但以后可能会迁移到 Push Plus 服务（在遥远的未来）。

请感谢您的快速回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:02:26.387

好的，有两件事要记住：1) BlackBerry Infrastructure（Push Proxy Gateway 或 PPG）*需要*将您的设备列为订阅了您的特定应用程序 ID，以便将推送传送到您的设备。从设备订阅会将其注册到 PPG 并告诉 PPG“我希望允许将来自此 App ID 的推送传递给我”。如果您的设备未订阅 PPG，那么您来自发起方的推送将被发送，并被 PPG 接受，但绝不允许传送到目标设备。

2) 即使设备已向 PPG 注册，发送推送的服务器如何跟踪已注册的设备？这是通过向 Push Initiator 注册来完成的。Push SDK 中包含的客户端示例应用程序有一个机制来展示如何做到这一点。服务器示例也设置为接收这些请求并将客户端添加到数据库中，以便将来推送时包含它。

考虑到所有这些，如果发生以下情况会发生什么：1) 用户卸载应用程序 2) 用户切换设备

在上述情况下，需要一种机制来取消注册设备，使其不再接收来自 PPG 和服务器 Push Initiator 的推送。客户端示例应用程序再次展示了如何做到这一点。

# java - Java RMI 远程接口教程 - 错误：解组参数

> ID：12087751
> 
> 赞同：1
> 
> 时间：2012-08-23T08:34:54.133
> 
> 标签：java, rmi, classnotfoundexception, unmarshalling

尝试通过 Netbeans 测试 rmi 教程以设置远程服务器 - 客户端接口。运行服务器时出现以下异常：

*异常：java.rmi.ServerException：RemoteException发生在服务器线程中；嵌套异常是：java.rmi.UnmarshalException：错误解组参数；嵌套异常是：java.lang.ClassNotFoundException：remotetests.MyRemoteInterface*

rmi 注册表在后台运行。

似乎服务器无法发布远程对象？？下面是服务器、远程接口和客户端类

请帮忙 - 谢谢！

**服务器类如下所示：**

```
package remotetests;

import java.io.Serializable;

import java.net.InetAddress;

import java.rmi.*;

import java.rmi.registry.LocateRegistry;

import java.rmi.server.*;

public class MyRemoteClass extends UnicastRemoteObject implements MyRemoteInterface, serializable {

    public MyRemoteClass() throws RemoteException {

        //Constructor code

        System.out.println("MyRemote constructor");

    }

    public void myMethod1() throws RemoteException {

        //Here we put the code we want

        System.out.println("I am in myMethod1()");

    }

    public int myMethod2() throws RemoteException {

        return 5; //Here we put the code we want

    }

    public void anotherMethod() {

        //If we define another method, this can´t be called in a remote way unless we call it from the remote interface

    }
    public static void main(String[] args) {
        try {
            System.out.println("running main");
            MyRemoteInterface mir = new MyRemoteClass();
            InetAddress address = java.net.InetAddress.getLocalHost();
            System.out.println("host name : " + address.getHostName());

//Naming.rebind("//"+java.net.InetAddress.getLocalHost().getHostAddress() "/RMI_Test", mir);
            LocateRegistry.getRegistry().rebind("//"+java.net.InetAddress.getLocalHost().getHostAddress(), mir);

//System.out.println("Server started. Bound RMI test");

        } catch (Exception e) {

            System.err.println("exception: " + e);
        }
    }
} 
```

**远程接口类：**

```
package remotetests;

import java.rmi.*;

public interface MyRemoteInterface extends Remote {

    public void myMethod1() throws RemoteException;

    public int myMethod2() throws RemoteException;

} 
```

**客户端类：**

```
package remotetests;

public class MyRMIClient {

   public void MyRMIClient(String[] args){

        try{
            MyRemoteInterface mir = (MyRemoteInterface) java.rmi.Naming.lookup("//"+args[0] +":" +args[1]+"/RMITest");

            //MyRemoteInterface mir = (MyRemoteInterface) java.rmi.Naming.lookup("//127.0.0.1:1099/RMITest/");

            //We print myMethod1() as much as we get back myMethod2()

            int monitor = mir.myMethod2();

            for(int i=1;i<mir.myMethod2();i++){

                mir.myMethod1();

            }

        }catch (Exception e){

            e.printStackTrace();
        }  
    }
}* 
```

# debugging - IPython 在 vi / Vim 中跳转到错误？

> ID：12087755
> 
> 赞同：2
> 
> 时间：2012-08-23T08:35:13.097
> 
> 标签：debugging, vim, vi, ipython

使用 Vim 开发 C 代码时，可以运行`:make`然后`:cp`直接跳转到代码中的编译器错误。

我想知道在使用 IPython 和 Vim 作为编辑器时是否有任何类似的功能，以便在发生错误时我可以键入启动编辑器、打开文件并直接进入该行的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:22:16.353

语法错误应该是可能的，但我不知道执行此操作的代码是否仍然有效 - 它已经存在一段时间没有任何测试。要尝试它，请在您的`ipython_config.py`文件中设置：

```
c.TerminalInteractiveShell.autoedit_syntax = True 
```

# javascript - 选择行时获取JQgrid表的列值

> ID：12087757
> 
> 赞同：4
> 
> 时间：2012-08-23T08:35:16.207
> 
> 标签：javascript, jquery, html, jqgrid

当在 jqgrid 表中选择（单击）一行时，我想在 javascript 函数中获取 2 列的值。我想要的是在每一行上添加一个 javascript onclick 事件，并且 javascript 函数获取所选行的 col3 和 col4 的值。我的代码是

```
jQuery("#table1").jqGrid({
        url:'petstore.do?q=1&Path='+path,
        datatype: "json",
        colNames:['col1','col2','col3','col4'],
        colModel:[
                  {name:'col1',index:'col1',sortable:true,width:250},
              {name:'col2',index:'col2',sortable:true,width:100},
              {name:'col3',index:'col3', sortable:true,width:100},
              {name:'col4',index:'col4', sortable:true},
        ],
        multiselect: false,
        paging: true,
        rowNum:10,
        rowList:[10,20,30],
        pager: $("#pager")

    }).navGrid('#pager',{edit:false,add:false,del:false}); 
```

任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T09:22:32.307

您应该处理该`onSelectRow`事件（在单击该行后立即引发该事件），然后您可以使用`getRowData`方法来获取选定的行数据作为数组：

```
$('#table1').jqGrid({
    url: 'petstore.do?q=1&Path='+path,
    datatype: 'json',
    colNames: ['col1', 'col2', 'col3', 'col4'],
    colModel: [
               {name:'col1', index:'col1', sortable:true, width:250},
               {name:'col2', index:'col2', sortable:true, width:100},
               {name:'col3', index:'col3', sortable:true, width:100},
               {name:'col4', index:'col4', sortable:true}
    ],
    multiselect: false,
    paging: true,
    rowNum: 10,
    rowList: [10,20,30],
    pager: $('#pager'),
    onSelectRow: function(rowId){ 
        var rowData = $('#table1').jqGrid('getRowData', rowId);
        //You can access the desired columns like this --> rowData['col3']
        ...
    }
}).navGrid('#pager', {edit:false, add:false, del:false}); 
```

这应该可以得到你想要的。

# javascript - MVC3递归部分视图和Javascript文件

> ID：12087758
> 
> 赞同：0
> 
> 时间：2012-08-23T08:35:20.917
> 
> 标签：javascript, jquery, asp.net-mvc-3

我对 MVC3 和 javascript 有一些问题

我有一个带有视图的结构，包含部分视图，包含部分视图。

*   看法
    *   局部视图 1
        *   局部视图 2

在部分视图 1 中，我有一个 jquery 数据表。对此的设置位于 Javascript 文件中。该文件是从局部视图 1 导入的，并且工作正常。

单击此表中的一行时，我加载了带有 3 个 jquery 数据表的部分视图 2。它们都设置在与第一个表的“单击”操作相同的功能中。

对于这 3 个新表，我需要一个按钮。我希望将此“单击”操作的功能放置在同一个 Javascript 文件中。但这就是问题所在。如果我直接在部分视图 2 中包含 javascript，则单击按钮有效。

如果我将它包含在 javascript 文件中，它会对点击做出反应。

我怀疑这是一个范围问题，但为部分视图 1 加载的脚本也可用于部分视图 2，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:40:36.417

PV2 的点击事件应该位于 PV2，而不是 PV1。因为当 PV2 重新加载而 PV1 没有重新加载时，点击事件将不会被识别，因为 PV1 将 PV2 的按钮视为不同的按钮。

编辑：所以我相信你是对的。

# php - 移动浏览器不支持会话变量？

> ID：12087759
> 
> 赞同：0
> 
> 时间：2012-08-23T08:35:21.137
> 
> 标签：php, javascript, mobile, cookies, jquery-mobile

我有我的网络应用程序的浏览器版本，并且我有一些值存储在 cookie 中。现在我正在制作一个移动版本，但我的 cookie 似乎无法正常工作。是否可以在移动设备上使用 cookie？

我正在尝试执行此代码，而我的 php 给了我一个空值：

```
$(document).ready(function() {
    var session_lang= '<?php if(isset($_SESSION['SESS_LANGUAGE']))
                            echo $_SESSION['SESS_LANGUAGE'];?>';
            if (session_lang!='')
            {
                check_and_change(session_lang);   
            }
    }); 
```

有没有其他方法可以将数据存储在内部存储器中，以便它可以作为 cookie 工作？移动设备是否支持会话变量？我在看萤火虫，我可以看到我可以创建会话变量，但是当我想读取它时它是空的。可能是什么问题以及如何解决这个问题？

编辑：我会给你几乎整个代码，这样你就可以看到我在做什么......顺便说一句。此代码在 PC 浏览器上正常运行。

Javascript 文件：

```
$(document).ready(function() {

    function languageChange()
    {
         var lang = $('#websites1 option:selected').val();

        return lang;
    }

    $('#websites1').change(function(e) {                    

        var lang = languageChange();

        var dataString = 'lang=' + lang;

        $.ajax({

            type: "POST",
            url: "pass_value.php",
            data: dataString,
            dataType: 'json',
            cache: false,
            success: function(response) {

                    check_and_change(response.message);
                 }
        });

        return false;

    });

} );

    function check_and_change(lang)
     {
            switch (lang)
                         { //do something
                          }
    } 
```

然后我放在上面的第一部分是在我正在寻找并且正在打开的实际 php 站点上：

最后一件事是 pass_value.php：

```
<?php 
session_start();

$_SESSION['SESS_LANGUAGE'] = $_POST['lang'];

print json_encode(array('message' => $_SESSION['SESS_LANGUAGE']));
die();
?> 
```

我真的不知道为什么这个代码在手机上不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T12:02:33.790

Cookie[绝对](https://stackoverflow.com/questions/4152696/sessions-and-cookies-in-mobile-application) [适用](http://www.quora.com/Are-cookies-supported-on-Mobile-devices)于移动浏览器。你说“我在看萤火虫”，这让我觉得你并没有真正在手机上看它。

您是否已[开始会话](http://www.php.net/manual/en/session.examples.basic.php)并[打开错误报告](http://php.net/manual/en/function.error-reporting.php)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-01T09:32:27.217

我也遇到过类似的情况，发现在我的平板调用我在`.ajax( )`调用的 URL 参数中指定的脚本之前，它实际上是在`index.php`再次调用该脚本。

我的手机也是这样。由于我已经在 中初始化了我的会话变量`index.php`，它们不断被重新设置为它们的初始值（看起来它们没有被正确地存储在页面之间）。

我从来没有弄清楚为什么`index.php`会被召回，但我`if !isset( )`在初始化语句周围添加了检查，并清除了它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-05-09T05:52:05.507

在 Android 上，打开“数据保护程序”有效地破坏了我的会话。我有一个登录脚本，登录成功后会重定向到上一页。一直工作到我打开数据保护程序。关闭它使其再次工作。谷歌确实声明数据保护程序可能会影响我猜想包括我的脚本的安全页面，该脚本不在 HTTPS 网站上。

# google-chrome - 远程调试 - 如何创建端口代理？

> ID：12087762
> 
> 赞同：5
> 
> 时间：2012-08-23T08:35:30.210
> 
> 标签：google-chrome, remote-debugging, google-chrome-devtools, iptables, portforwarding

我正在尝试从框 B（Windows）访问在框 A（Debian）上运行的远程调试端口。在框 A 上，我正在运行带有`--remote-debugging-port=9222`标志的 Chrome，我可以看到它正常工作（我可以`localhost:9222`从 A 上的另一个浏览器访问）。另外，我确定框 A 和 B 已连接，因为我可以`:80`从框 B 访问在框 A 上运行的 (apache) 就好了。我现在需要做的是允许盒子 B 访问`:9222`盒子 A。我已经研究了端口转发和 iptables 规则，但我没有让它工作。

**编辑**

机器 B 是 Windows，所以我不确定如何在那里使用 ssh，我找到了一个似乎可以正常工作的端口转发[应用程序。](http://www.quantumg.net/portforward.php)虽然它给了我一个错误：“收到连接但无法连接到主机-B：9222”。所以看起来 9222 没有对外部连接开放。A 上 netstat 的输出给了我：

```
root@template:/home/developer# netstat -nap | grep 9222
tcp        0      0 127.0.0.1:9222      0.0.0.0:*    LISTEN      24300/user 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T11:34:56.763

我在[这里](https://stackoverflow.com/a/9269355/1143495)找到了答案。一切都归结为：

*   在一个控制台中打开 Chrome：`google-chrome --remote-debugging-port=9222`
*   并在另一个中设置代理：`ssh -L 0.0.0.0:9223:localhost:9222 localhost -N`
*   现在你应该可以通过另一台机器访问远程调试了`http://192.168.1.123:9223/`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T18:01:39.987

浏览器将套接字绑定到 localhost 地址。这就是您在访问端口时遇到问题的原因。

您可以借助 ssh 端口转发功能解决问题。

ssh user@host-A.example.org -L 9111:127.0.0.1:9222

运行此命令后，请在主机 B 上打开 localhost:9111

ssh 会将连接转发到主机 A 并将其连接到 localhost:9222

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T17:58:42.943

另一种解决方案是在 nc 的帮助下转发主机 A 上的另一个端口

[http://en.wikipedia.org/wiki/Netcat](http://en.wikipedia.org/wiki/Netcat)

# android - 如何在android中更改蓝牙传输文件的接收位置

> ID：12087766
> 
> 赞同：1
> 
> 时间：2012-08-23T08:35:40.887
> 
> 标签：android

我已经在android的两个设备之间通过蓝牙很好地完成了文件传输。默认情况下它接收到蓝牙接收文件夹。是否可以更改文件的接收位置？例如。我在两个设备（D1 和 D2）上都安装了我自己的应用程序。从我在 D1 上的应用程序，我向 D2 发送文件。是否可以将文件直接接收到我自己在 D2 上的应用程序中打开？如果是这样，我该怎么做？

我的代码：

```
sendDirectly.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        if (btAdapter.isEnabled()) {
        Set<BluetoothDevice> devices = btAdapter.getBondedDevices();
            if (devices.size() > 0) {
                for ( BluetoothDevice device : devices) {
                    deviceBTAddress=device.getAddress();
                }

                ContentValues values = new ContentValues();
                // values.put(BluetoothShare.URI, Uri.fromFile(new
                // File(uri.getPath())).toString());
                values.put(BluetoothShare.URI, uri.toString());
                values.put(BluetoothShare.MIMETYPE, "image/jpeg");
                values.put(BluetoothShare.DESTINATION, deviceBTAddress);
                values.put(BluetoothShare.DIRECTION, 
                           BluetoothShare.DIRECTION_OUTBOUND);
                Long ts = System.currentTimeMillis();
                values.put(BluetoothShare.TIMESTAMP, ts);
                final Uri contentUri = getApplicationContext().getContentResolver()
                                       .insert(BluetoothShare.CONTENT_URI, values);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:56:47.827

[https://developer.android.com/reference/android/bluetooth/BluetoothSocket.html](https://developer.android.com/reference/android/bluetooth/BluetoothSocket.html)

看看这个，我会说这将是通过蓝牙以编程方式发送文件的更好选择

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T21:28:07.850

它比您设置它的方式简单得多 - 您需要做的就是进入计算机的控制面板并导航到您的蓝牙设置，然后单击“更改蓝牙设置”。从那里，您可以快速确定要保存传入文件传输的位置，甚至可以委派 PIM 设置以发送诸如名片和日历项目之类的内容，以通过蓝牙直接发送到您的 Outlook Thunderbird 或您使用的任何电子邮件客户端. 同样的概念也适用于移动设备。只需进入蓝牙设置并将默认值更改为您希望保存传入 BT 传输的自定义位置。

# android - GridView 中的矩形图像

> ID：12087770
> 
> 赞同：2
> 
> 时间：2012-08-23T08:35:58.860
> 
> 标签：android, android-layout, android-xml

如何创建图像为矩形 (120 x 58.5) 的 GirdView，这会导致非方形单元格？目前，如果我有这个 XML 布局，则图像上方和下方都有空白，因为单元格是 120 x 120。每个单元格的宽度应该是 120，高度应该是 58。

```
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/AppsOverviewGrid"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:columnWidth="120dp"
    android:numColumns="auto_fit"
    android:verticalSpacing="0dp"
    android:horizontalSpacing="8dp"
    android:stretchMode="columnWidth"
    android:gravity="center">
</GridView> 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:47:57.137

在我看来，理想的解决方案是为 gridview 布局中的项目创建一个布局文件，您可以在其中指定图像的高度（使用 ImageView）。然后，您可以使用带有 LayoutInflater 的自定义适配器将您的网格视图项与您的主布局连接起来。

这是一个很好的教程（2.示例）：[http ://www.mkyong.com/android/android-gridview-example/](http://www.mkyong.com/android/android-gridview-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-19T12:48:31.480

最简单的方法就是在适配器中设置图像视图的宽度和高度。

```
public class ImageAdapter extends BaseAdapter {

 // create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) {
            // if it's not recycled, initialize some attributes
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(120, 58));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
        } else {
            imageView = (ImageView) convertView;
        }

        imageView.setImageResource(pictureArray[position]);

        return imageView;
    }

   // references to our images
    private Integer[] pictureArray= {
            R.drawable.pic1, R.drawable.pic2,
     }

} 
```

然后将Adapter设置为gridview。

```
 GridView gridview = (GridView) findViewById(R.id.gridview);
    gridview.setAdapter(new ImageAdapter(this)); 
```

# asp.net-mvc-3 - 如何将用户输入的文本框值从 JSON 格式的视图传递到控制器操作方法

> ID：12087771
> 
> 赞同：0
> 
> 时间：2012-08-23T08:36:02.677
> 
> 标签：asp.net-mvc-3, jquery

我需要将用户在 View 中输入的 Html 帮助器文本框值作为参数传递给控制器​​操作方法。当我使用 Jquery 从 Javascript 函数调用控制器操作方法时，以 JSON 格式传递文本框值，这些值在 JSON 中正确出现，正如我在 firebug/fiddler 中找到的那样，但这些值没有从我的文本框中传递控制器动作方法的参数。当我调试控制器操作方法时，该参数显示为 null。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:35:09.350

框架将尝试使用从查询字符串、提交的表单等中解析的值填充操作方法的参数。尝试确保框架在消息中的某处可以找到类似 ParameterName=someValue 的内容，然后您将获得 someValue 传递使用 parameterName 进入操作方法的 Parameter。

# python - 替换字符串列表中的一个字符串

> ID：12087772
> 
> 赞同：2
> 
> 时间：2012-08-23T08:36:04.920
> 
> 标签：python

我有一个字符串列表。

如果其中一个字符串（例如在索引 5 处）是空字符串，我想用“N”替换它。

我怎么做？天真的方法（对于 java 程序员）不起作用：

```
string_list[5] = "N" 
```

给

> “str”对象不支持项目分配

（string_list 最初来自一个 .csv 文件——这就是它可能包含空字符串的原因。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T08:41:57.083

您的错误似乎表明您的 string_list 不是字符串列表，而是真正的字符串（不支持分配，因为字符串是不可变的）。

如果您的 string_list 是一个真正的字符串列表，例如 : `string_list = ["first", "second", "", "fourth"]`，那么您将能够`string_list[2] = "third"`获取`string_list = ["first", "second", "third", "fourth"]`.

如果您需要自动检测空字符串在列表中的位置，请尝试使用[index](http://docs.python.org/tutorial/datastructures.html)：

```
string_list[string_list.index("")] = "replacement string"

print string_list
>>> ["first", "second", "replacement string", "fourth"] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T08:48:02.950

您说您有**一个字符串列表，**但从您的错误来看，您似乎正在尝试索引一个**字符串**

```
l =  ["a", "b", "", "c"] 
```

是一个字符串列表。

```
l = ["N" if not x else x for x in l] 
```

是用“N”替换空字符串的字符串列表

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T08:38:53.310

试试这个：

```
>>> s = 'abc de'
>>> s.replace(' ', 'N')
'abcNde' 
```

正如其他人所提到的，这听起来`string_list`实际上是一个字符串本身，这意味着您不能使用赋值来更改字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T08:44:26.873

在 python 中使用列表并在需要时将它们转换为字符串。

```
>> str = list("Hellp")

>> str
['H', 'e', 'l', 'l', 'p']

>> str[4] = 'o'

>> str
['H', 'e', 'l', 'l', 'o'] 
```

使其成为字符串使用

```
>> "".join(str)

'Hello World' 
```

Python 字符串是不可变的，不能修改。

或者您可以使用[List Comprehensions](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)。

就像是：

```
>> myStr = ['how', 'are', 'yew', '?']

>> myStr = [w.replace('yew', 'you') for w in myStr] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-29T12:55:46.053

以下示例遍历列表（子列表）列表，以替换字符串、单词：

```
myoldlist=[['aa bbbbb'],['dd myword'],['aa myword']]
mynewlist=[]
for i in xrange(0,3,1):
    mynewlist.append([x.replace('myword', 'new_word') for x in myoldlist[i]])

print mynewlist
# ['aa bbbbb'],['dd new_word'],['aa new_word'] 
```

# perl - Perl 如何解析打印 "" 。($x, $y) ."\n"?

> ID：12087775
> 
> 赞同：2
> 
> 时间：2012-08-23T08:36:11.790
> 
> 标签：perl

我从《Learning Perl》第 6 版了解到。(ISBN: 978-1-449-30358-7) p.58`($x, $y) = "something", "new";`是一个列表上下文。那么为什么下面的代码会打印“bee”呢？请解释代码是如何解析的。

```
$dina = bobba;
$ba = bee;
print " " . ($dina, $ba)."\n"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T08:38:06.087

连接运算符`.`将标量上下文强加到由逗号运算符创建的列表上，因此它返回其最后一个成员。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T09:10:18.367

最相关的文档引用是 perlop(1) 中的这段：

```
Comma Operator
    Binary "," is the comma operator.  In scalar context it evaluates its
    left argument, throws that value away, then evaluates its right
    argument and returns that value.  This is just like C's comma operator. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T12:57:22.897

"`($x, $y) = ("something", "new");`是一个列表上下文。" 没有意义。（添加了缺少的括号以避免偏离主题。）

首先，在列表上下文中*评估某些内容。*

其次，无法知道根据您发布的内容将在哪个上下文中评估该表达式，但很可能在*void*上下文中评估它。

您可能指的是子表达式`($x, $y)`和`("something", "new")`。它们确实在列表上下文中进行评估，这是因为列表赋值运算符在列表上下文中评估其操作数。

在您的代码中，`($x, $y)`是连接运算符 ( `.`) 的操作数。连接运算符组合了两个字符串，因此它期望字符串作为操作数。字符串是标量，连接运算符在标量上下文中评估其操作数。

* * *

在标量上下文中，

```
$x, $y 
```

与

```
do { $x; $y } 
```

（没有额外的范围）。列表的每个项目在 void 或标量上下文中依次评估，并且整体评估列表中最后一项返回的内容。

```
>perl -E"sub f { say 'f'; 3 } sub g { say 'g'; 4 } say ':'.(f,g);"
f
g
:4 
```

# blackberry - 具有标题/部分的列表字段

> ID：12087778
> 
> 赞同：1
> 
> 时间：2012-08-23T08:36:26.273
> 
> 标签：blackberry, header, listfield

我是黑莓新手，对它了解不多。我正在学习和实施具有太多部分/标题的列表。到目前为止，我已经实施了： ![在此处输入图像描述](../Images/a3748f7e649cd5434893dade098ca855.png)

这是我的代码：

```
public  class MyScreen extends MainScreen
    {
        /**
         * Creates a new MyScreen object
         */
        public MyScreen()
        {        
            super(Manager.NO_VERTICAL_SCROLL);
            setTitle("Simple List Demo");

            add(new LabelField("A"));
            add(new SeparatorField());

            Manager mainManager = getMainManager();

            SimpleList listField = new SimpleList(mainManager);

            listField.add("Item 1");
            listField.add("Item 2");
            listField.add("Item 3");

            add(new SeparatorField());
            add(new LabelField("B"));
            add(new SeparatorField());

            SimpleList list=new SimpleList(mainManager);

            list.add("Item 4");
            list.add("Item 5");
            list.add("Item 6");

            add(new SeparatorField());

        }
    } 
```

我想实现为： ![在此处输入图像描述](../Images/120c24b524cfd1c0c1a8d0c844490cf9.png)

任何人都可以分享如何实现这种列表字段的想法。我已经采用了两个列表字段并添加了分隔符字段，标签字段来区分，但这不是方法，因为这太繁琐而无法实现和维护太多列表。任何帮助将不胜感激.

提前致谢。

阿卡什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:31:53.530

它不是`ListField`屏幕上的一个实例。有几个`ListField`实例被实例分开`LabelField`。

只需将`LabelField`和`ListField`实例的组合添加到一个屏幕。

# java - 如果我删除 struts2 .action 扩展名，为什么欢迎文件列表不起作用？

> ID：12087779
> 
> 赞同：5
> 
> 时间：2012-08-23T08:36:26.503
> 
> 标签：java, struts2, action-mapping

如果我删除`.action`我的 Struts2 应用程序中的扩展，我会遇到问题。我把这个放在我的`struts.xml`：

```
<constant
    name="struts.action.extension"
    value="" /> 
```

该应用程序可以正常工作，但在索引页面中除外。我有`web.xml`这个：

```
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list> 
```

当我访问时`http://localhost/myApp/`，我收到以下错误：

```
There is no Action mapped for namespace [/] and 
action name [index.jsp] associated with context path [/myApp]. 
- [unknown location] 
```

但是，如果我访问`http://localhost/myApp/fooAction`，我不会收到任何错误并且可以完美运行。

如果我将扩展名更改为非空扩展名（如`"html"`），如果我访问`http://localhost/myApp/`.

那么，我在做什么有问题吗？为什么我在删除扩展程序时会收到此错误？有没有可能的方法不得到它？

**编辑：**如果我在错误中执行操作，`<welcome-page>`则错误如下：

```
There is no Action mapped for namespace [/] and action name [] 
associated with context path [/myApp]. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T11:05:15.300

我在其中一个应用程序中遇到了同样的问题，我需要在页面加载时调用 Action 来代替`index.jsp`或调用`welcom.jsp`。`<welcome-page>`我执行了以下步骤

将以下条目放在我的 web.xml 中。

```
 <welcome-file-list>
            <welcome-file>index</welcome-file>
</welcome-file-list> 
```

我在我的 web-app 文件夹中创建了一个名称为空的文件`index`，最后在我的 struts.xml 文件中放置了以下条目

```
<action name="index" class="welcomeAction">
     <result>/ab.jsp</result>
 </action> 
```

所以在这种情况下，当我点击这个 URL 时`www.myapp.com/myApp`，它调用了 Struts2 的索引操作，我能够为我的欢迎页面做所有的初始化工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T20:31:30.667

我有同样的问题，但解决了！！！！
如果你使用

```
<constant name="struts.action.extension" value=""/> 
```

在 struts.xml
然后把欢迎文件作为

```
<welcome-file>index.jsp</welcome-file> 
```

在 web.xml 中
并在 struts.xml 中给出如下操作

```
<package name="default" extends="struts-default">
    <action name="index.jsp">
        <result>WEB-INF/login.jsp</result>
    </action>
</package> 
```

# python - 有没有办法在 Maya 中安装鼻子？

> ID：12087780
> 
> 赞同：0
> 
> 时间：2012-08-23T08:36:30.457
> 
> 标签：python, maya, nose

我在家中在 Linux 上使用 Autodesk Maya 2008，在工作中在 Windows 7 上使用 Maya 2012。到目前为止，我的大部分努力都集中在前者上。我找到[了这个线程](https://stackoverflow.com/questions/639744/running-unit-tests-with-nose-inside-a-python-environment-such-as-autodesk-maya)，并设法让那里的设置在家工作。它的要点是为系统上安装的任何 Python 安装鼻子，然后创建一个 py 脚本，将该鼻子蛋添加到 sys.path，并加载到 maya.standalone 模块中，然后导入鼻子并运行它。然后通过 Maya 的 Python 版本（maya 目录结构中的 mayapy）运行该 py 脚本。

我不确定在 Maya 2008 的内置 Python 2.5 安装中运行 Python 2.6 安装是否值得关注。此外，这只是一个更混乱的设置，我想为许多同事这样做。将鼻子直接安装到 Maya 2008 (Python 2.5) 和 2012 (Python 2.6) 会很好。

为此，我尝试下载鼻子并通过 Maya 的 mayapy 可执行文件安装它：

```
~sudo /autodesk/maya2008-x64/bin/mayapy setup.py build
running install
error: invalid Python installation: unable to open /autodesk/maya2008-x64/lib/python2.5/config/Makefile (No such file or directory) 
```

里面没有配置文件夹。显然，这与缺少 python-dev 有关。我已经安装了，但是在 Python 的系统版本中。我不知道如何为 Maya 的 Python 安装它，或者是否有可能。是吗？Maya 的 Python 版本是否过于疯狂/一次性考虑到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:33:05.030

由于`nose`是纯 Python 包，因此可以安全地将其强制到 Maya 内置 Python 的 sys.path 中。

`*.pyc`如果您将相同的`nose`安装与另一个 2.X 版本的 Python 一起使用，我认为可能发生的最糟糕的情况是一些颠簸。在这里，Maya 2011 和 2013 在 OS X 和 Linux 上使用 Python 2.6.4，所以我只需确保将安装的版本添加到`python2.6/site-packages`目录中。

这通常也适用于已编译的包，使我们也能够`PyQt4`为 Maya 构建。

几个月以来，我一直在毫无后果地这样做，甚至将其添加到`sys.path`正在运行的 Maya GUI 中，以便针对 GUI 编写测试！

# javascript - 带有日期选择器的事件

> ID：12087789
> 
> 赞同：0
> 
> 时间：2012-08-23T08:37:02.563
> 
> 标签：javascript, jquery, datepicker

我是初学者，不熟悉 jquery ui(datepicker)。所以我很难完成我的练习。我只想将日历绑定到事件页面。每个事件都有一个日期和类名，然后是日期的参考并且类名将被转移到日期选择器。最后为日期选择器上的每个类名添加不同的背景颜色。谢谢！

我在后面写了一个简单的代码。顺便说一下，我上面提到的“事件”只是指“活动”！获取活动的日期和类名，然后将这两个引用传递给 datepicker。然后活动日期将显示在日历上，并根据其班级名称以不同的背景颜色显示。

```
$(function(){
    var Event = function(text,className){
    this.text = text;
    this.className = className; 
    };
var events = {};
events[new Date("08/08/2012")] = new Event("event_one","pink");
events[new Date("08/12/2012")] = new Event("event_two","green");
events[new Date("08/31/2012")] = new Event("event_three","red");
$('#datepicker').datepicker({
    beforeShowDay : function(date) {
    var event = events[date];
    if (event) {
        return [true,event.className,event.text];
    }
    else {
        return [true,'',''];
    }
    }
});
});
body{ font: 62.5% "Trebuchet MS", sans-serif; margin: 50px;}
.demoHeaders { margin-top: 2em; }
.pink > a { 
    background-color: pink !important;
    background-image:none !important;
}
.red > a { 
    background-color: red !important;
    background-image:none !important;
}
.green > a { 
    background-color: green !important;
    background-image: none !important;
} 
```

​​​

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:08:31.173

Datepicker 具有`setDate`可用于在 datepicker 中设置日期的方法。[这里的方法部分](http://jqueryui.com/demos/datepicker/)解释得很好。

# javascript - 移动设备上本地存储 (html5) 的安全性？

> ID：12087790
> 
> 赞同：2
> 
> 时间：2012-08-23T08:37:07.737
> 
> 标签：javascript, html, local-storage

如果您在 Android 上使用 javascript 将数据写入本地存储，如下所示：

```
localStorage.data = "test"; 
```

可以以某种方式访问​​和查看这些数据吗？我有一些重要的数据要保存，比如用户个人信息，我不希望任何人看到这些数据（即使他们为此付出了一些努力）。解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:40:52.313

如果您可以访问浏览器，则根本不受保护。

任何从用户浏览器连接到您的站点的人都可以简单地输入`console.log(localStorage)`开发人员的工具（在大多数浏览器上使用 Ctrl-大写-i）以清楚地查看它。

一种解决方案可能是使用服务器提供的密钥加密数据，但这不会那么安全：一旦您访问浏览器（并且您拥有用户），就很容易（例如使用扩展程序）更改执行的 javascript回到网站）。我建议将这些数据存储在服务器上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T08:41:43.743

我假设您是在谈论技术漏洞，而不是物理上掌握实际设备的人？

如果是这样，我的理解是只有保存数据的域上的代码才能访问它。因此，如果有人管理了 XSS 攻击，或者您错误地包含了其他人的脚本，那么您可能会受到攻击。

# ruby-on-rails - 如何将引导日期选择器放在我的表单中并在日期参数中有值？

> ID：12087794
> 
> 赞同：3
> 
> 时间：2012-08-23T08:37:28.243
> 
> 标签：ruby-on-rails, ruby, twitter-bootstrap

我正在使用 bootstrap-datepicker.js，它工作正常。

```
<div class="well">
<div id="dp5" class="input-append date" data-date-format="dd-mm-yyyy" data-date="12-02-2012">
<input class="span2" type="dp5" readonly="" value="12-02-2012" size="16">
<span class="add-on">
<i class="icon-th"></i>
</span>
</div>

  </div> 
```

我想在这种类型的rails中以我的形式使用它

```
<%= simple_form_for(@customer) do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">
    <%= f.input :name %>
    <%= f.input :email %>
    <%= f.input :address %>
    <%= f.input :phone %>
    <%= f.input :Projects %>
     <%= f.radio_button :status, 0, :checked => true%>Publish
    <%= f.radio_button :status, 1 %>Unpublish
    <%= f.radio_button :status, 2 %>Trash

  </div>

  <div class="form-actions">
    <%= f.button :submit %>
  </div>
<% end %> 
```

在这里，我想将日期选择器放在我的表单中

```
`<%f.(datepicker)%>` 
```

这样当我提交表单时，我会在参数日期中获得日期值。当我单击日期选择器中的日期时，它应该隐藏并且默认日期应该指向当前日期。我的 appication.js 包括

```
 $(function(){  
        $('#dp5').datepicker({
            format: 'mm-dd-yyyy'
        });
        $('#dp3').datepicker({
            format: 'mm-dd-yyyy'
        });

    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T08:50:30.630

采用`<%= f.text_field :name_of_the_date_column, :value=>Date.today.strftime('%m-%d-%Y'), :id =>"dp5" %>`

要自动隐藏使用这个

```
$("#dt5").datepicker({
        format: 'mm-dd-yyyy'
    })
.on('changeDate', function(ev){
  $('#dt5').datepicker('hide');
}); 
```

代替

```
$("#dt5").datepicker(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-26T02:35:21.460

[我刚刚在这里](https://stackoverflow.com/a/19018373/2238268)回答了一个类似的问题，并在下面包含了我的答案：

* * *

我还需要让它工作并支持不使用以美国为中心的日期格式的多个语言环境，例如：日期格式为 dd/mm/yyyy 的 en-AU（澳大利亚）。

# 问题

Rails 期望日期格式`yyyy-mm-dd`来自浏览器，但您希望在用户的区域设置中显示日期。虽然日期控件允许您指定显示格式，但它不允许您单独指定要发送回服务器的格式。

# 解决方案

构建一个隐藏的输入字段，将正确的格式发送回您的 Rails 服务器。我使用自定义 simple_form 输入控件执行此操作，该控件构建日期选择器输入字段和隐藏字段，并在输入控件更改时使用一些 javascript 转换为 rails 日期。

结果是您可以在 rails 中有一个不错的引导日期选择器，并将其与 simple_form 一起使用，如下所示：

```
<%= f.input :date, as: :bootstrap_datepicker %> 
```

或者使用长日期格式：

```
<%= f.input :date, as: :bootstrap_datepicker, input_html: { format: :long } %> 
```

# 执行

创建或编辑以下文件：

**宝石文件**

```
gem 'bootstrap-sass'
gem 'bootstrap-datepicker-rails' 
```

**config/locales/en-AU.yml**

```
en-AU:
  date:
    datepicker:
      default: "dd/mm/yyyy"
      long: "dd MM, yyyy"
    formats:
      default: ! '%d/%m/%Y'
      long: ! '%d %B, %Y' 
```

**config/locales/en-US.yml**

```
en-US:
  date:
    datepicker:
      default: "mm/dd/yyyy"
      long: "MM dd, yyyy"
    formats:
      default: "dd/mm/yyyy"
      long: ! '%B %d, %Y' 
```

**应用程序/资产/样式表/application.css.scss**

```
@import "bootstrap-responsive";
@import "bootstrap-datepicker"; 
```

**应用程序/资产/javascripts/application.js.coffee**

```
#= require bootstrap
#= require bootstrap-datepicker
#= require bootstrap-datepicker-rails 
```

或者，**app/assets/javascripts/application.js**

```
//= require bootstrap
//= require bootstrap-datepicker
//= require bootstrap-datepicker-rails 
```

**应用程序/资产/javascripts/bootstrap-datepicker-rails.js.coffee**

```
$ ->
  # convert bootstrap-datepicker value to rails date format (yyyy-mm-dd) on our hidden field
  $(document).on 'changeDate', '.bootstrap-datepicker', (evt) ->
    rails_date = evt.date.getFullYear() + '-' + ('0' + (evt.date.getMonth() + 1)).slice(-2) + '-' + ('0' + evt.date.getDate()).slice(-2)
    $(this).next("input[type=hidden]").val(rails_date) 
```

**应用程序/输入/bootstrap_datepicker_input.rb**

```
class BootstrapDatepickerInput < SimpleForm::Inputs::Base
  def input
    text_field_options = input_html_options.with_indifferent_access
    format =  text_field_options.delete(:format)
    hidden_field_options = text_field_options.dup
    hidden_field_options[:class] = text_field_options[:class].dup # so they won't work with same array object
    hidden_field_options[:id] = "#{attribute_name}_hidden"
    text_field_options[:class] << 'bootstrap-datepicker'
    text_field_options[:type] = 'text'
    text_field_options[:value] ||= format_date(value(object), format)
    set_data_option text_field_options, 'date-format', I18n.t(format, scope: [:date, :datepicker], default: :default)
    default_data_option text_field_options, 'provide', 'datepicker'

    return_string =
      "#{@builder.text_field(attribute_name, text_field_options.to_hash)}\n" +
      "#{@builder.hidden_field(attribute_name, hidden_field_options.to_hash)}\n"
    return return_string.html_safe
  end

protected

  def default_data_option(hash, key, value)
    set_data_option(hash,key,value) unless data_option(hash, key)
  end

  def data_option(hash, key)
    hash[:data].try(:[],key) || hash["data-#{key}"]
  end

  def set_data_option(hash, key, value)
    hash[:data].try(:[]=,key,value) || (hash["data-#{key}"] = value)
  end

  def value(object)
    object.send @attribute_name if object
  end

  def format_date(value, format=nil)
    value.try(:strftime, I18n.t(format, scope: [ :date, :formats ], default: :default))
  end
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-12T11:10:23.337

您可以更简洁地表达这一点：

```
$("#dt5").datepicker({
                           format: 'mm-dd-yyyy',
                           autoclose: true
                           }) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-18T03:31:33.927

我检查了所有答案，没有一个对我有用。我使用了以下内容：

```
<%= f.text_field :article_date, {"data-provide" => 'datepicker', 
                                 "data-date-format" => "yyyy-mm-dd"} %> 
```

在我的情况下，MySQL 预期`yyyy-mm-dd`格式，而 datepicker 默认格式是`mm/dd/yyyy`. 恕我直言，用户不关心格式，所以我宁愿到处都有相同的格式，省去很多麻烦。

# perforce - Perforce 中的二进制类型

> ID：12087797
> 
> 赞同：5
> 
> 时间：2012-08-23T08:37:39.333
> 
> 标签：perforce

这个文件类型到底是什么，它与什么不同`binary`？

它似乎被自动分配给`.zip`和`.jar`文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T08:39:24.027

**解决了**

事实证明，`ubinary`这意味着未压缩的二进制文件，这是有道理的，因为尝试进一步压缩 a `.zip`or`.jar`是没有意义的。

# php - PHP时差每小时比赛现场

> ID：12087800
> 
> 赞同：2
> 
> 时间：2012-08-23T08:37:55.930
> 
> 标签：php, jquery, mysql, database

我正在使用 codeigniter 在 php 中开发一个小应用程序。

应用程序有一个 jquery 倒数计时器，倒计时时间留给当前比赛。比赛是基于每小时和全球的（我在这里说全球是为了表明每个人的比赛都将在同一时间结束 - 占用服务器时间）

这是我正在使用的逻辑：

由于比赛是每小时一次，一天将进行 24 场比赛。所以我正在做的是：我在数据库中创建了一个时间戳字段，并使用 cron 作业每小时更新（当前时间戳 + 1 小时）。这个时间是比赛的结束时间。

然后，当用户要去应用程序时，我正在调用一个获取比赛结束时间和当前时间的函数。然后得到这个时间和剩余时间的差异，我正在输入java脚本计数以显示剩余时间。

现在问题：

一切正常，除非时间为 12 比 1。计数器总是显示负时间。意味着时间差异将变为负数。

我尝试了什么：

我试着把

```
 date_default_timezone_set('Europe/London'); 
```

但没有运气！

这是我的代码：

```
$query="SELECT comp_end_time FROM competetions WHERE comp_type=1 ORDER BY comp_id DESC LIMIT 1";
$sql=mysql_query($query);
$row=mysql_fetch_array($sql);
date_default_timezone_set('Europe/London');
$end_time=strtotime($row['comp_end_time']);
$now=date("Y-m-d g:i:s");
$current_time=strtotime($now);
$time_diff=$end_time-$current_time;

$minutes=floor($time_diff / 60);
$sec = $time_diff - ($minutes * 60);
$minutes=(strlen($minutes) == 1) ? '0'.$minutes: $minutes;
$sec=(strlen($sec) == 1) ? '0'.$sec: $sec;

$min1=substr($minutes, 0, 1);
$min2=substr($minutes, 1, 2);
$sec1=substr($sec, 0, 1);
$sec2=substr($sec, 1, 2);

$data=array(
       'min1'=>$min1,
       'min2'=>$min2,
       'sec1'=>$sec1,
       'sec2'=>$sec2
       );
return $data;
} 
```

这是使用 cron 更新时间的代码：

```
function update_timer(){
date_default_timezone_set('Europe/London');
$now=date("Y-m-d g:i:s");
$currentTime=strtotime($now);
$timeAfterOneHour=$currentTime+60*60;
$new_hr=date("Y-m-d g:i:s",$timeAfterOneHour);
echo date("Y-m-d g:i:s",$currentTime).'<br>';
echo $new_hr;
mysql_query("UPDATE  `zaggora1_hotpant`.`competetions` SET  `comp_end_time` =  '$new_hr' WHERE  `competetions`.`comp_id` =1;");
} 
```

有人知道为什么时差会变成负数吗？任何建议使用一些不同的方式来完成这项任务？我是否必须使用 codeigniter 日期帮助等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T04:36:36.700

以下是我要改变的几件事：

```
$now=date("Y-m-d g:i:s");
$current_time=strtotime($now); 
```

这可以简化为：

```
$current_time = time(); 
```

对于您的 cron 脚本：

```
$now=date("Y-m-d g:i:s");
$currentTime=strtotime($now);
$timeAfterOneHour=$currentTime+60*60;
$new_hr=date("Y-m-d g:i:s",$timeAfterOneHour); 
```

可以改为：

```
$currentTime = time();
$timeAfterOneHour=$currentTime+60*60;
$new_hr=date("Y-m-d H:i:s",$timeAfterOneHour); 
```

注意格式中的`H`而不是？那是因为如果您使用带有前导零的 24 小时制时钟，则更容易比较时间。`g``date()`

# selenium - Selenium 没有按名称查找元素

> ID：12087802
> 
> 赞同：1
> 
> 时间：2012-08-23T08:37:57.617
> 
> 标签：selenium, selenium-webdriver

我想使用 Selenium WebDriver 在页面上查找元素。页面打开，但从未找到该字段。

测试页面：

```
<applet...>
    <param name="password" value="Password" />
</applet> 
```

硒脚本：

```
WebElement query = driver.findElement(By.name("password")); //always timeout 
```

可能有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:46:07.217

selenium 本身无法测试 java 小程序，请查看 FEST [http://docs.codehaus.org/display/FEST/Selenium](http://docs.codehaus.org/display/FEST/Selenium)

*编辑*

这个问题之前已经在 selenium 用户组上提出过[https://groups.google.com/forum/?fromgroups=#!searchin/selenium-users/applet/selenium-users/h8o8MrurxDQ/5J7ppui38o8J](https://groups.google.com/forum/?fromgroups=#!searchin/selenium-users/applet/selenium-users/h8o8MrurxDQ/5J7ppui38o8J)还有更多工具你也可以在那里的问题中使用

# html - 用于显示聊天文本消息的最佳 html 标签？

> ID：12087809
> 
> 赞同：1
> 
> 时间：2012-08-23T08:38:22.733
> 
> 标签：html, css

文本窗口需要具有固定的宽度和长度，并且必须自动换行长文本。它不能有水平滚动条，但它需要垂直条。您只能显示文本，但不能在其中输入文本。使用什么 html/css？我认为SO的提问页面中的预览窗口符合要求！它只是一个div。这是怎么做的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T14:44:14.500

您可以使用一个简单`div`的来显示聊天气泡。我个人会使用一些简单的东西，例如：

```
<div class="chat-bubble"></div> 
```

所有的内容都会被包裹在里面`div`。然后我会`chat-bubble`在 CSS 中设置类的样式，让它看起来像我想要的那样。

[这](http://nicolasgallagher.com/pure-css-speech-bubbles/)是在 CSS 中制作聊天气泡的非常简洁的演练，应该是您尝试做的一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-24T14:53:03.913

*我意识到这个问题有点老了，但我认为这是一个有趣的案例。*

使用`div`HTML 元素是可能的，但在语义方面不是最佳解决方案。请记住，这[`div`是*最通用*的HTML 元素](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/div)。除了应该以某种方式将其与其他内容分开之外，它没有说明您的标记内容。

更好的方法是混合使用更具描述性的 HTML 5 元素，并用看起来像聊天气泡的东西覆盖它们的默认样式。

考虑这个例子，改编自[这篇文章](https://gabrieleromanato.name/how-to-mark-up-chats-and-conversations-in-html5)

```
<ul class="chat">
  <li class="message">
    <figure class="sender">
      <img src="https://example.org/avatar.png" alt="" class="avatar" />
      <figcaption>Example sender name</figcaption>
    </figure>
    <blockquote>
      <p>Text message</p>
    </blockquote>
  <li>
  <!-- more chat messages ... -->
</ul> 
```

# android - 如何检测开关何时滑动而不是单击

> ID：12087810
> 
> 赞同：10
> 
> 时间：2012-08-23T08:38:29.863
> 
> 标签：android, user-interface, view, switch-statement

我设法捕获了单击切换视图的时间，以便主要活动做出相应的响应；但是每当我滑动它而不是单击它时，就好像什么都没发生一样。我怎样才能检测到这个？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-23T08:55:07.903

之前已经实现了 Switch 按钮添加

```
android:onClick="onSwitchClicked" 
```

在我的 .xml 清单上并将相应的方法添加到我的主要活动中并没有提供预期的结果；因为正如问题所说，它仅在单击时才有效。注意到最好这样做：

```
powerSwitch.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                if(isChecked){
                    //code
                }else{
                    //code
                }
            }
        }); 
```

这样，每当 Switch 的状态发生变化时，无论是滑动还是点击，都会调用该方法。

有关详细信息，请参阅本教程：http: [//developer.android.com/guide/topics/ui/controls/togglebutton.html](http://developer.android.com/guide/topics/ui/controls/togglebutton.html)

# php - 需要使用 pregmatch 从字符串中提取日期

> ID：12087811
> 
> 赞同：0
> 
> 时间：2012-08-23T08:38:31.237
> 
> 标签：php, preg-match

我有这个字符串

> 9 月 1 日起可使用设备齐全的自助式 2 卧室套房，步行 5 分钟即可到达 UVIC。

现在我正在使用预匹配来提取它：这是正则表达式。

```
'/\bavailable\\s(?P<date_available>[?:Jan(?:uary)?|Feb(?:ruary)?|Mar(?:ch)?|Apr(?:il)?|May|Jun(?:e)|Jul(?:y)?|Aug(?:ust)?|Sep(?:tember)?|Oct(?:ober)?|Nov(?:ember)?|Dec(?:ember)?|immediately]+[\\s\d]+)[st|nd|rd|th]?/i' 
```

目前这个正则表达式可以从一个字符串中提取：

```
Available september 1st.
Available September 2nd
available september 3rd
available september 4th
available sept 1 
```

输出示例是：

```
Array
(
    [0] => available September 1
    [date_available] => September 1
    [1] => September 1
) 
```

但是当字符串为：

```
Available for september 1st.
Available in September 2nd
available since september 3rd
available at september 4th 
```

任何人都可以帮我处理这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:43:37.803

使用通配符 AZ，2 到 5 个字母（匹配“on”之类的内容）：

```
$regex = '/\bavailable[ ]*(?:[a-z]{2,5})?[ ]*' .
    '(?P<date_available>immediately|now|' .
    '(?:(?:Jan(?:uary)?|Feb(?:ruary)?|Mar(?:ch)?' .
    '|Apr(?:il)?|May|Jun(?:e)|Jul(?:y)?|Aug(?:ust)?' .
    '|Sep(?:tember)?|Oct(?:ober)?|Nov(?:ember)?|Dec(?:ember)?)' .
    '[ ]+[\d]+))' .
    //end <date_available>
    '(?:st|nd|rd|th)?/i'; 
```

用法：

```
$lines = array(
    'Fully furnished self contained 2 bedroom suite just 5 minute walk to UVIC is available now.',
    'bedroom suite just 5 minute walk to UVIC is available on September 34.',
    'bedroom suite just 5 minute walk to somewhere is available on Apr 1.',
    );

foreach ($lines as $line) {
    echo $line, "\n<br>\n";
    if (preg_match($regex, $line, $matches) === 1) {
        print_r($matches['date_available']);
    } else {
        echo "Does not match.";
    }
    echo "\n<br>\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:47:58.840

我实际上根本无法让您的工作，看起来好像您正在尝试使用带方括号的字符类，`[ ]`而不是分组和交替使用括号`( )`。

根据您的要求，以下可能是我能得到的最短的

```
$pattern = '/\bavailable\s+(?:(?:for|in|at|since)\s+)?((?:immediately|now)|(?:Jan(?:uary)?|Feb(?:ruary)?|Mar(?:ch)?|Apr(?:il)?|May|June?|July?|Aug(?:ust)?|Oct(?:ober)?|(?:Sept|Nov|Dec)(?:ember)?)\s+?\d{1,2}(?:st|nd|rd|th)?)/i'; 
```

这不包括命名的子模式，因为所需的匹配总是存在的，`$matches[1]`但是如果你想包含一个命名的子模式，那么你总是可以放入一个。

```
$pattern = '/\bavailable\s+(?:(?:for|in|at|since)\s+)?(?P<date_available>(?:immediately|now)|(?:Jan(?:uary)?|Feb(?:ruary)?|Mar(?:ch)?|Apr(?:il)?|May|June?|July?|Aug(?:ust)?|Oct(?:ober)?|(?:Sept|Nov|Dec)(?:ember)?)\s+?\d{1,2}(?:st|nd|rd|th)?)/i'; 
```

作为对@EthanB早期解决方案的回应，您似乎没有捕获 date 的序数后缀`st, nd, rd, th`，如果是这种情况，并且不需要，那么您可以通过不包括它来使其更短，尝试这样做是没有意义的匹配天数之后的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T09:01:32.873

以下适用于您的所有示例，尽管我没有在 PHP 中输​​入您的“命名子模式”，因为我不知道它们的确切语法

```
\bavailable\s+(?:(?:for|in|at|since)\s+)?((?:Jan(?:uary)?|Feb(?:ruary)?|Mar(?:ch)?|Apr(?:il)?|May|June?|July?|Aug(?:ust)?|Sept(?:ember)?|Oct(?:ober)?|Nov(?:ember)?|Dec(?:ember)?)\s+\d{1,2}(?:st|nd|rd|th)?) 
```

# actionscript-3 - 在 as3 中多次使用 1 个对象？

> ID：12087812
> 
> 赞同：0
> 
> 时间：2012-08-23T08:38:35.790
> 
> 标签：actionscript-3, flash

我正在尝试制作书签之类的东西，我在舞台上有 1 个便条，当用户单击它时，它开始拖动，用户将它放到他们想要的地方。问题是我希望这些笔记被多次拖动..这是我的代码：

```
import flash.events.MouseEvent;

//notess is the instance name of the movie clip on the stage
notess.inputText.visible = false;
//delet is a delete button inside the movie clip,
notess.delet.visible = false;
//the class of the object i want to drag
var note:notes = new notes  ;

notess.addEventListener(MouseEvent.CLICK , newNote);

function newNote(e:MouseEvent):void
{
    for (var i:Number = 1; i<10; i++)
    {

        addChild(note);
                //inpuText is a text field in notess movie clip
        note.inputText.visible = false;
        note.x = mouseX;
        note.y = mouseY;        
        note.addEventListener( MouseEvent.MOUSE_DOWN , drag);
        note.addEventListener( MouseEvent.MOUSE_UP , drop);
        note.delet.addEventListener( MouseEvent.CLICK , delet);

    }
}

function drag(e:MouseEvent):void
{
note.startDrag();
}

function drop(e:MouseEvent):void
{
    e.currentTarget.stopDrag();
    note.inputText.visible = true;
    note.delet.visible = true;
}
function delet(e:MouseEvent):void
{
    removeChild(note);
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:22:51.160

如果您正在拖动多种类型的对象（例如注释和图像），您可以执行类似的操作，而不是对要实例化的对象类型进行硬编码。

```
function drop(e:MouseEvent):void{
   // Get a reference to the class of the dragged object
   var className:String = flash.utils.getQualifiedClassName(e.currentTarget);
   var TheClass:Class = flash.utils.getDefinitionByName(className) as Class;

   var scope:DisplayObjectContainer = this; // The Drop Target

   // Convert the position of the dragged clip to local coordinates
   var position:Point = scope.globalToLocal( DisplayObject(e.currentTarget).localToGlobal() );

   // Create a new instance of the dragged object
   var instance:DisplayObject = new TheClass();
   instance.x = position.x;
   instance.y = position.y;
   scope.addChild(instance);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:58:04.033

您需要在拖放时创建笔记类的新实例，从拖动的笔记中复制位置和其他变量，将新笔记添加到舞台，并将拖动的笔记返回到其原始位置。

就像是：

```
function drop($e:MouseEvent):void
{
    $e.currentTarget.stopDrag();
    dropNote($e.currentTarget as Note);
}

var newNote:Note;

function dropNote($note:Note):void
{
    newNote = new Note();
    // Copy vars:
    newNote.x = $note.x;
    newNote.y = $note.y;
    // etc.
    // restore original note. 
    // You will need to store its original position before you begin dragging:
    $note.x = $note.originalX;
    $note.y = $note.orgiinalY;
    // etc.
    // Finally, add your new note to the stage:
    addChild(newNote);
} 
```

...这确实是伪代码，因为我不知道您是否需要将新注释添加到列表中，或者将其链接到其原始注释。如果您使用[Google ActionScript Drag Drop Duplicate](https://www.google.co.uk/search?q=actionscript%20drag%20drop%20duplicate)，您会发现更多示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T08:59:10.917

我认为您不是针对拖动功能中的拖动对象和对象实例化中的问题

```
for (var i:Number = 1; i<numberOfNodes; i++) {

        note = new note();
        addChild(note);
        ...
        ....
    }

 function drag(e:MouseEvent):void{
        (e.target).startDrag();
    } 
```

# cakephp - 使用 CakePHP 的单页网站

> ID：12087817
> 
> 赞同：1
> 
> 时间：2012-08-23T08:38:58.507
> 
> 标签：cakephp, layout, single-page-application

我目前正在使用 CakePHP 开发一个单页可滚动网站（5 个页面显示为一个页面）。我已经处理了每个控制器操作，并且一切运行良好。我对整个应用程序有一个布局，每个操作都有一个视图。我的挑战是找到一种方法来加载每个操作的视图，而无需重新加载布局内的页面。我应该将所有视图内容放在布局中（不回显 $content_for_layout）还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:21:32.143

考虑到`div`您要更新的 id `#content`：

```
$.ajax({
    url:"http://yourdomain.com/controller/action",
    context:document.body,
    dataType:"html",
    data:{id:123}, // in case you need to pass some params
    success:function(data){
        $("#content").html(data);
    }
}) 
```

该操作必须返回要在该 div 中显示的 HTML。如果您想将每个页面加载到不同的 div 中，则必须为每个页面创建一个 div 并为每个页面调用 AJAX。

首次加载页面时，您可以为您定义的任何默认操作提取数据。然后，当你想改变内容时，只需调用 AJAX。

# java - 类路径和命令行开关（-cp、-D）

> ID：12087818
> 
> 赞同：0
> 
> 时间：2012-08-23T08:39:03.733
> 
> 标签：java, classpath

我在运行我的 jar 文件时遇到了很多困难，可能是因为我不确定在命令行上使用各种开关时要使用的正确语法。这是我所拥有的：

`java -classpath %appdata%\.minecraft\bin\minecraft.jar;%appdata%\.minecraft\bin\mp3spi.jar;%appdata%\.minecraft\bin\jl.jar;%appdata%\.minecraft\bin\tritonus.jar;%appdata%\.minecraft\bin\lwjgl.jar; net.minecraft.client.Minecraft username password server.com:25565 -D java.library.path=%appdata%\.minecraft\bin\lwjgl.jar`

我需要将所有这些东西都包含在我的类路径中，并设置`-D`为我拥有的值。

有人可以帮我找出问题吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T08:43:20.223

首先放置您的选项（带有 的类路径，带有`-classpath`的系统属性`-D`），然后是您的类 ( `net.minecraft.client.Minecraft`)，最后是类参数 ( `username`, `password`, ...)。

此外，它是`-Dproperty=value`，没有空格分隔 the`-D`和您的设置。
最后，`java.library.path`指向一个目录，而不是一个文件。

这是[文档](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html)。

# android - 调用另一个活动时应用程序崩溃（提供 logcat）

> ID：12087825
> 
> 赞同：0
> 
> 时间：2012-08-23T08:39:25.293
> 
> 标签：android, logcat

我正在编写一个显示来自网站的数据的小应用程序。数据以 json 字符串形式提供。我有 3 项活动很好。现在我更改了一项活动的代码并想对其进行测试。但从那时起，所有活动都不再起作用，我没有发现调试器的错误。也许有人可以帮助我使用 logcat。

谢谢

```
08-23 08:17:09.600: E/Trace(641): error opening trace file: No such file or directory (2)
08-23 08:17:10.368: D/dalvikvm(641): GC_FOR_ALLOC freed 93K, 2% free 10954K/11143K, paused 60ms, total 64ms
08-23 08:17:10.738: D/gralloc_goldfish(641): Emulator without GPU emulation detected.
08-23 08:17:32.118: D/AndroidRuntime(641): Shutting down VM
08-23 08:17:32.118: W/dalvikvm(641): threadid=1: thread exiting with uncaughtexception (group=0x40a13300)
08-23 08:17:32.260: E/AndroidRuntime(641): FATAL EXCEPTION: main
08-23 08:17:32.260: E/AndroidRuntime(641): java.lang.RuntimeException: Unable to start activity ComponentInfo{de.damps.fantasy/de.damps.fantasy.scoresActivity}: android.os.NetworkOnMainThreadException
08-23 08:17:32.260: E/AndroidRuntime(641):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
08-23 08:17:32.260: E/AndroidRuntime(641):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
08-23 08:17:32.260: E/AndroidRuntime(641):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
08-23 08:17:32.260: E/AndroidRuntime(641):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
08-23 08:17:32.260: E/AndroidRuntime(641):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-23 08:17:32.260: E/AndroidRuntime(641):  at android.os.Looper.loop(Looper.java:137)
08-23 08:17:32.260: E/AndroidRuntime(641):  at android.app.ActivityThread.main(ActivityThread.java:4745)
08-23 08:17:32.260: E/AndroidRuntime(641):  at java.lang.reflect.Method.invokeNative(Native Method)
08-23 08:17:32.260: E/AndroidRuntime(641):  at java.lang.reflect.Method.invoke(Method.java:511)
08-23 08:17:32.260: E/AndroidRuntime(641):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-23 08:17:32.260: E/AndroidRuntime(641):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-23 08:17:32.260: E/AndroidRuntime(641):  at dalvik.system.NativeStart.main(Native Method)
08-23 08:17:32.260: E/AndroidRuntime(641): Caused by: android.os.NetworkOnMainThreadException
08-23 08:17:32.260: E/AndroidRuntime(641):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
08-23 08:17:32.260: E/AndroidRuntime(641):  at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
08-23 08:17:32.260: E/AndroidRuntime(641):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
08-23 08:17:32.260: E/AndroidRuntime(641):  at java.net.InetAddress.getAllByName(InetAddress.java:214)
08-23 08:17:32.260: E/AndroidRuntime(641):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:70)
08-23 08:17:32.260: E/AndroidRuntime(641):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
08-23 08:17:32.260: E/AndroidRuntime(641):  at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:341)
08-23 08:17:32.260: E/AndroidRuntime(641):  at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
08-23 08:17:32.260: E/AndroidRuntime(641):  at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
08-23 08:17:32.260: E/AndroidRuntime(641):  at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
08-23 08:17:32.260: E/AndroidRuntime(641):  at libcore.net.http.HttpEngine.connect(HttpEngine.java:310)
08-23 08:17:32.260: E/AndroidRuntime(641):  at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
08-23 08:17:32.260: E/AndroidRuntime(641):  at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
08-23 08:17:32.260: E/AndroidRuntime(641):  at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
08-23 08:17:32.260: E/AndroidRuntime(641):  at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
08-23 08:17:32.260: E/AndroidRuntime(641):  at java.net.URL.openStream(URL.java:462)
08-23 08:17:32.260: E/AndroidRuntime(641):  at de.damps.fantasy.Json.readUrl(Json.java:39)
08-23 08:17:32.260: E/AndroidRuntime(641):  at de.damps.fantasy.Json.<init>(Json.java:20)
08-23 08:17:32.260: E/AndroidRuntime(641):  at de.damps.fantasy.scoresActivity.parse(scoresActivity.java:110)
08-23 08:17:32.260: E/AndroidRuntime(641):  at de.damps.fantasy.scoresActivity.onCreate(scoresActivity.java:34)
08-23 08:17:32.260: E/AndroidRuntime(641):  at android.app.Activity.performCreate(Activity.java:5008)
08-23 08:17:32.260: E/AndroidRuntime(641):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
08-23 08:17:32.260: E/AndroidRuntime(641):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
08-23 08:17:32.260: E/AndroidRuntime(641):  ... 11 more
08-23 08:17:32.399: D/dalvikvm(641): GC_CONCURRENT freed 227K, 3% free 11198K/11463K, paused 77ms+106ms, total 270ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:47:26.013

当您从网站下载数据时，您必须实现一个 AsynTask。

例子 ：

使用 AsyncTask ：

```
public class MyAsyncTask extends AsyncTask<Void, Void, Result>{
                    private Activity activity;
                    private ProgressDialog progressDialog;

        public MyAsyncTask(Activity activity) {
                        super();
            this.activity = activity;
        }

        @Override
        protected void onPreExecute() {
        super.onPreExecute();
            progressDialog = ProgressDialog.show(activity, "Loading", "Loading", true);
        }

        @Override
        protected Result doInBackground(Void... v) {
        //do your stuff here
        return null;

        }

        @Override
        protected void onPostExecute(Result result) {
            progressDialog.dismiss();
            Toast.makeText(activity.getApplicationContext(), "Finished.", 
                    Toast.LENGTH_LONG).show();
        } 
```

}

从活动中调用它：

```
MyAsyncTask task = new AsyncTask(myActivity.this);
task.execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:46:18.473

您正在主 UI 线程上的该 Activity 中执行一些网络活动。每当您的构建目标设置为蜂窝或更高时，这将引发异常。要修复它，请减少构建目标，或将网络操作移动到它自己的[Thread](http://developer.android.com/reference/java/lang/Thread.html)或[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T08:42:12.250

您正在 UI 线程中进行一些网络操作，避免长时间运行不需要 UI 的任务，在其他线程中，通过以下链接可以实现此目的：

[http://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

# bash - 如何配置bash完成以扩展部分路径，如emacs“minibuffer-complete”？

> ID：12087826
> 
> 赞同：2
> 
> 时间：2012-08-23T08:39:33.467
> 
> 标签：bash, emacs, path, partial, bash-completion

我想配置我的 bash shell 来扩展部分输入的树结构，就像它执行 emacs“minibuffer-complete”命令一样。

想象一下，我有两个文件夹，foo1 和 foo2。foo1 包含一个子文件夹 sub1，而 foo2 包含子文件夹 wow。所以我有：

foo1/sub1/

foo2/哇/

现在，如果我键入，在 emacs 中打开文件时

f/w

然后按 TAB 会自动将其展开为“foo1/wow/”。

我想在 bash 中有类似的功能。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T12:31:35.073

你可以反过来使用 emacs Mx shell 命令。它打开一个带有自动完成功能的*Shell缓冲区，就像在 minibuffer 中一样*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T11:29:32.147

虽然我不知道如何在 bash 中执行此操作，或者即使可能，但我知道如果您将 shell 更改为 zsh，则可以完成。

默认情况下它没有启用，我也不知道如何启用它，但我使用[zsh grml config](http://grml.org/zsh/)，它启用了你正在谈论的那种扩展。

Zsh，特别是结合上述配置，还有许多其他有用的功能。

如果您不愿意更改外壳，那么恐怕这不是一个有用的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-08T05:43:06.017

披露：我是该项目的作者

我已经编写了在 bash 中启用此类完成所需的完成功能：[https ://github.com/sio/bash-complete-partial-path](https://github.com/sio/bash-complete-partial-path)

希望你会发现这个项目很有用

# javascript - 我需要将 jsFiddle 中的脚本放到工作中

> ID：12087832
> 
> 赞同：0
> 
> 时间：2012-08-23T08:40:00.230
> 
> 标签：javascript, image, button, radio-button, radio

我有一个小问题...我需要将此脚本[http://jsfiddle.net/mctcs/](http://jsfiddle.net/mctcs/)放在我的页面上，但我不知道该怎么做。在哪里复制什么，以及如何使 jquery 工作！我没有关于 jquery 的先验知识，也不知道它是如何工作的。

```
(function($){

$.fn.imageTick = function(options) {

    var defaults = {
        tick_image_path: "images/radio.gif",
        no_tick_image_path: "no_images/radio.gif",
        image_tick_class: "ticks_" + Math.floor(Math.random()),
        hide_radios_checkboxes: false
    };

    var opt = $.extend(defaults, options);

    this.each(function(){

        var obj = $(this);
        var type = obj.attr('type'); // radio or checkbox

        var tick_image_path = typeof opt.tick_image_path == "object" ?
            opt.tick_image_path[this.value] || opt.tick_image_path["default"] :
            opt.tick_image_path;

        var no_tick_image_path = function(element_id) {
            var element = document.getElementById(element_id) || { value: "default" };
            return typeof opt.no_tick_image_path == "object" ?
                opt.no_tick_image_path[element.value] || opt.no_tick_image_path["default"]:
                opt.no_tick_image_path;
        }

        // hide them and store an image background
        var id = obj.attr('id');
        var imgHTML = '<img src="' + no_tick_image_path(id) + '" alt="no_tick" class="' + opt.image_tick_class + '" id="tick_img_' + id + '" />';

        obj.before(imgHTML);
        if(!opt.hide_radios_checkboxes){
            obj.css('display','none');
        }

        // if something has a checked state when the page was loaded
        if(obj.attr('checked')){
            $("#tick_img_" + id).attr('src', tick_image_path);
        }

        // if we're deadling with radio buttons
        if(type == 'radio'){

            // if we click on the image
            $("#tick_img_"+id).click(function(){
                $("." + opt.image_tick_class).each(function() {
                    var r = this.id.split("_");
                    var radio_id = r.splice(2,r.length-2).join("_");
                    $(this).attr('src', no_tick_image_path(radio_id))
                });
                $("#" + id).trigger("click");
                $(this).attr('src', tick_image_path);
            });

            // if we click on the label
            $("label[for='" + id + "']").click(function(){
                $("." + opt.image_tick_class).each(function() {
                    var r = this.id.split("_");
                    var radio_id = r.splice(2,r.length-2).join("_");
                    $(this).attr('src', no_tick_image_path(radio_id))
                });
                $("#" + id).trigger("click");
                $("#tick_img_" + id).attr('src', tick_image_path);
            });

        }

        // if we're deadling with checkboxes
        else if(type == 'checkbox'){

            $("#tick_img_" + id).click(function(){
                $("#" + id).trigger("click");
                if($(this).attr('src') == no_tick_image_path(id)){
                    $(this).attr('src', tick_image_path);
                }
                else {
                    $(this).attr('src', no_tick_image_path(id));
                }

            });

            // if we click on the label
            $("label[for='" + id + "']").click(function(){
                if($("#tick_img_" + id).attr('src') == no_tick_image_path(id)){
                    $("#tick_img_" + id).attr('src', tick_image_path);
                }
                else {
                    $("#tick_img_" + id).attr('src', no_tick_image_path(id));
                }
            });

        }

    });
}

})(jQuery);

$(function() {
    $("input[name='gender']").imageTick({
        tick_image_path: { 
            male: "http://i47.tinypic.com/13yjdac.jpg", 
            female: "http://i49.tinypic.com/261kfia.jpg"
            //"default": "images/gender/default_checked.jpg" //optional default can be used
        },
        no_tick_image_path: { 
            male: "http://i45.tinypic.com/vr4nwy.jpg", 
            female: "http://i47.tinypic.com/2m5mr9s.jpg"
            //"default": "images/gender/default_unchecked.jpg" //optional default can be used
        },
        image_tick_class: "gender",
    });
}); 
```

我需要一些说明，比如在哪里粘贴哪些代码（head、body）、制作什么文件（js、html）以及要更改哪些值，这样才能正常工作！有人可以zipp示例或其他东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:43:13.537

我们可以通过在末尾添加一个来查看小提琴的***完整页面版本。***`/show/`

保存[这个](http://fiddle.jshell.net/mctcs/show/)版本的小提琴。它包含运行该特定小提琴所需的所有脚本和资源。

在您的应用程序中比较并满足它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:47:20.717

# 最简单的解决方案

[下载 jQuery](http://docs.jquery.com/Downloading_jQuery)，将`.js`文件添加到您的网站，然后将 javascript 窗口（左下角）中的所有内容添加到HTML 页面`script`标签中的标签中。`head`

```
<script type="text/javascript" src="/js/jQuery.js"></script>
<script type="text/javascript">
  ..script here
</script> 
```

然后将您的 HTML 代码（左上角）添加到`body`您希望这些元素出现的任何位置。

* * *

# 更好的解决方案

[下载 jQuery](http://docs.jquery.com/Downloading_jQuery)，将`.js`文件添加到您的网站。

javascript 代码的第一部分是一个 jQuery 插件。创建一个新的 javascript 文件，名为`jquery.imagetick.js`.

然后将第二部分`head`连同对 jQuery 库和插件文件的脚本引用一起添加到您的标签中。

```
<script type="text/javascript" src="/js/jQuery.js"></script>
<script type="text/javascript" src="/js/jQuery.imagetick.js"></script>
<script type="text/javascript">
      $(function() {
    $("input[name='gender']").imageTick({
        tick_image_path: { 
            male: "http://i47.tinypic.com/13yjdac.jpg", 
            female: "http://i49.tinypic.com/261kfia.jpg"
            //"default": "images/gender/default_checked.jpg" //optional default can be used
        },
        no_tick_image_path: { 
            male: "http://i45.tinypic.com/vr4nwy.jpg", 
            female: "http://i47.tinypic.com/2m5mr9s.jpg"
            //"default": "images/gender/default_unchecked.jpg" //optional default can be used
        },
        image_tick_class: "gender",
    });
});
</script> 
```

# jquery - Internet Explorer 中的 JQuery 根本不工作，但在 Chrome 和 Firefox 中完美工作

> ID：12087835
> 
> 赞同：0
> 
> 时间：2012-08-23T08:40:05.107
> 
> 标签：jquery, internet-explorer, get

此代码适用于 Chrome 和 Firefox，但不适用于 IE8 ><

```
 <script src="jquery-latest.js"></script>

 <script type="text/javascript">

    $.get("http://api.hostip.info/get_html.php", function(data){
        alert("Data Loaded: " + data);

    });
 </script> 
```

有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:42:59.307

尝试这个：

```
$(document).ready(function(){
    $.get("http://api.hostip.info/get_html.php", function(data){
        alert("Data Loaded: " + data);   
    });
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:47:26.057

这是另一种方法，它实际上在 IE 中获取 IP：

```
<script type="text/javascript">
window.onload = function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src = "http://jsonip.appspot.com/?callback=DisplayIP";
    document.getElementsByTagName("head")[0].appendChild(script);
};

function DisplayIP(response) {
    document.getElementById("ipaddress").innerHTML = "Your IP Address is " 
                                                      + response.ip;
}
</script>

<span id="ipaddress"></span> 
```

# python - python的多个stdin.write用法

> ID：12087838
> 
> 赞同：0
> 
> 时间：2012-08-23T08:40:25.260
> 
> 标签：python, windows, subprocess, python-2.5

我有一个 Visual Studio 应用程序，它采用交互式参数，例如

```
- PATH 
```

在 input 上，显示 MENU #1（它再次接受参数/用户输入），在 input 上再次显示 MENU #2。

我需要从 Python 调用这个 VS 应用程序（exe）。我有限制坚持使用 Python 2.5 版本。

我尝试使用 subprocess.popen 和 stdin.write。

我能够通过 MENU#1 进行解析，但无法继续进行 MENU #2 等等......

有关实现上述目标的任何提示/示例。？

我的代码如下所示：

```
p = subprocess.Popen('app.exe',stdin=subprocess.PIPE,stdout=subprocess.PIPE,stderr=None)
p.stdin.write(file_path)  # for menu 1

time.sleep(0.5)

p.stdin.write('0')         # for menu 2..

...

o,e = p.communicate() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:43:35.133

改用[`pexpect`模块](https://pypi.python.org/pypi/pexpect)；它可以让你控制一个比 subprocess 模块更好的交互式输入的程序。

```
import pexpect

p = pexpect.spawn('app.exe')
p.sendline(file_path)
p.expect('Menu #2:.*')
p.sendline('0') 
```

对于 Windows，您可以改用模块到 Windows 控制台[`wexpect.py`](http://sage.math.washington.edu/home/goreckc/sage/wexpect/)的端口。`pexpect`

# javascript - div 在表定义中的 IE 中不起作用

> ID：12087840
> 
> 赞同：0
> 
> 时间：2012-08-23T08:40:26.453
> 
> 标签：javascript, css, html-table

该`div`标记在表定义中不起作用：

```
<table>
<tr></tr>
<div id="choice"><tr>
<td>-------</td>
<td>-------</td>
<td>-------</td>
<td>-------</td>
</tr></div>
<tr></tr>
</table> 
```

如果我正在尝试--->`getElementById("choice").innerhtml="some data with td's"`不能在 IE 浏览器中运行？

但是，如果我使用`div`，通过启动新表，例如，

```
<table>
<tr></tr>
<div id="choice"><table>
<tr>
<td>-------</td>
<td>-------</td>
<td>-------</td>
<td>-------</td>
</tr>
</table>
</div>
<tr></tr>
</table> 
```

但是我可以只用一张表来做这个，在 IE 上运行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T08:54:32.877

表格标签必须遵循特定的语义。**您只能在 TD 或 TH 内**插入标签（div 和其他标签）！不能在 table /table 之间插入不属于以下之一的任何标签：tr、td、th、thead、tbody、tfoot（无论如何你必须正确嵌套它们！）。不幸的是，这是一个很常见的错误，它可能会破坏表格结构，例如：

```
<form>
  <table> 
    <tr>
      <td>
        <input type="text" name="foo" />
        <input type="submit" value="send" />
      </td>
    </tr>
    </form>
  </table> 
```

上面的例子很难调试......所以要注意尊重表语义

# ios - 是否可以将观察者添加到 tableView.contentOffset？

> ID：12087848
> 
> 赞同：9
> 
> 时间：2012-08-23T08:40:59.677
> 
> 标签：ios, uitableview, observer-pattern

我需要跟踪 tableView.contentOffset.y 是否可以将观察者添加到 tableView.contentOffset？

我认为这是不可能的，因为 contentOffset 不继承 NSObject 类。

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-23T08:48:24.063

`UITableView`是一个`UIScrollView`子类，因此您可以使用该`UIScrollViewDelegate`方法`scrollViewDidScroll:`在视图滚动时得到通知。检查该`contentOffset`方法中`scrollView`的

`contentOffset`是一个关键路径，所以你也可以使用 KVO 观察它的变化

```
[self.tableView addObserver:self forKeyPath:@"contentOffset" options:NSKeyValueObservingOptionNew | NSKeyValueObservingOptionOld context:nil]; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2019-05-23T11:52:40.023

斯威夫特 5

```
tableContentObserver = table.observe(\UITableView.contentOffset, options: .new) { [weak self] table, change in
    self?.navigationItem.rightBarButtonItem?.title = "\(change.newValue)"
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-11-13T20:28:05.360

**斯威夫特 3**

`contentOffset`使用键值观察 (KVO)为键路径添加观察者：

```
tableView.addObserver(self, forKeyPath: #keyPath(UIScrollView.contentOffset), options: [.old, .new], context: nil) 
```

并处理更改通知：

```
override func observeValue(forKeyPath keyPath: String?, of object: Any?, change: [NSKeyValueChangeKey : Any]?, context: UnsafeMutableRawPointer?) {
    if keyPath == #keyPath(UIScrollView.contentOffset) {
      // Your code
    }
  } 
```

# keyboard - 什么是文本服务，如何在 Windows 8 中交互文本服务框架？

> ID：12087852
> 
> 赞同：1
> 
> 时间：2012-08-23T08:41:17.207
> 
> 标签：keyboard, windows-8, ime

我正在 Metro 应用程序 (C#) 中开发第三方 IME，我需要了解如何将文本服务与文本服务框架 (TSF) 交互。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T19:29:27.920

文本服务框架可从 Metro 风格应用程序中的 C++ 组件获得。这是[Metro 风格应用程序中 C++ 的可用 COM API 列表](http://msdn.microsoft.com/en-us/library/windows/apps/hh452772.aspx)。向下滚动到 Text Services Framework，您会看到大多数 API 都可用。

至于如何做，这取决于你想做什么——你可以像从任何其他 C++ 应用程序中那样调用 COM 组件。这是一个参考，应该有助于[TSF API 的各种用法](http://msdn.microsoft.com/en-us/library/windows/desktop/ms629225%28v=vs.85%29.aspx)。

# java - CameraView 仅适用于模拟器

> ID：12087854
> 
> 赞同：1
> 
> 时间：2012-08-23T08:41:31.280
> 
> 标签：java, android, eclipse, android-emulator

阅读本教程后，我编写了一个小相机应用程序：

[http://www.brighthub.com/mobile/google-android/articles/43414.aspx](http://www.brighthub.com/mobile/google-android/articles/43414.aspx)

在模拟器中一切正常（好吧，没有相机，但至少没有错误；））

然后我试图让它在我的 HTC Wildfire S 上运行。但在启动后应用程序立即崩溃。

这是我的Activity的代码，也许有人有想法，如何解决这个问题：

```
public class CameraView extends Activity implements SurfaceHolder.Callback {

    android.hardware.Camera mCamera;
    boolean mPreviewRunning = false;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        getWindow().setFormat(PixelFormat.TRANSLUCENT);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.camera_surface);
        SurfaceView mSurfaceView = (SurfaceView)findViewById(R.id.surface_camera);
        SurfaceHolder mSurfaceHolder = mSurfaceView.getHolder();
        mSurfaceHolder.addCallback(this);
        mSurfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        mCamera = android.hardware.Camera.open();
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        if(mPreviewRunning) {
            mCamera.stopPreview();
        }

        android.hardware.Camera.Parameters params = mCamera.getParameters();
        params.setPreviewSize(width, height);
        mCamera.setParameters(params);

        try {
            mCamera.setPreviewDisplay(holder);
        } catch (IOException ex) {
            ex.printStackTrace();
        }

        mCamera.startPreview();
        mPreviewRunning = true;
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        mCamera.stopPreview();
        mPreviewRunning = false;
        mCamera.release();
    }

    android.hardware.Camera.PictureCallback mPictureCallback = new android.hardware.Camera.PictureCallback() {

        @Override
        public void onPictureTaken(byte[] data, android.hardware.Camera camera) {

        }
    };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:54:38.610

你得到一个例外，因为你试图让相机使用它不支持的宽度和高度。您要求它使用 SurfaceView 的宽度和高度，这很少与支持的预览尺寸之一匹配。相反，请尝试使用以下内容：

```
 public class CameraView extends Activity implements SurfaceHolder.Callback {

android.hardware.Camera mCamera;
boolean mPreviewRunning = false;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    getWindow().setFormat(PixelFormat.TRANSLUCENT);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

    setContentView(R.layout.camera_surface);
    SurfaceView mSurfaceView = (SurfaceView)findViewById(R.id.surface_camera);
    SurfaceHolder mSurfaceHolder = mSurfaceView.getHolder();
    mSurfaceHolder.addCallback(this);
    mSurfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
}

@Override
public void surfaceCreated(SurfaceHolder holder) {
try {
        mCamera.setPreviewDisplay(previewHolder);   
    }
    catch (Throwable t) {
        Log.e(TAG, "Exception in setPreviewDisplay()", t);
    }
}

@Override
 public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
    Camera.Parameters parameters=camera.getParameters();
    Camera.Size size=getBestPreviewSize(width, height, parameters);

    if (size!=null) {
        parameters.setPreviewSize(size.width, size.height);
        camera.setParameters(parameters);
        camera.startPreview();
        inPreview=true;
    }
  }

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    mCamera.stopPreview();
    mPreviewRunning = false;
    mCamera.release();
}

android.hardware.Camera.PictureCallback mPictureCallback = new android.hardware.Camera.PictureCallback() {

    @Override
    public void onPictureTaken(byte[] data, android.hardware.Camera camera) {

    }
};

    private Camera.Size getBestPreviewSize(int width, int height, Camera.Parameters parameters) {
    Camera.Size result=null;

    for (Camera.Size size : parameters.getSupportedPreviewSizes()) {
        if (size.width<=width && size.height<=height) {
            if (result==null) {
                result=size;
            }
            else {
                int resultArea=result.width*result.height;
                int newArea=size.width*size.height;

                if (newArea>resultArea) {
                    result=size;
                }
            }
        }
    }

    return(result);
}
} 
```

这段代码全部改编自我为我的书写的代码。我更改了您的一些代码，因此可能需要修复一些变量名和导入，但它应该可以正常工作。

getBestPreviewSize() 是这里的神奇方法，它计算要使用的最佳和最佳相机预览尺寸。

# php - 电话号码验证的简单正则表达式更改

> ID：12087855
> 
> 赞同：4
> 
> 时间：2012-08-23T08:41:31.843
> 
> 标签：php, regex

我有这个功能来检查我的电话号码：

```
function isValid( $what, $data ) {

        switch( $what ) {

                // validate a phone number
                case 'phone_number':
                        $pattern = "/^[0-9-+]+$/";

                break;

                default:
                        return false;
                break;

        }
        return preg_match($pattern, $data) ? true : false;
} 
```

我想更改该正则表达式以接受以下内容：`)` `(`(800) 和`space`.

因此，例如这个数字将通过验证，现在没有通过：

+1 (201) 223-3213

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T09:03:42.330

让我们一步一步地构造正则表达式。还要考虑在匹配之前修剪空格。

*   一开始可能有也可能没有+号。这也需要逃避。`\+?`
*   然后是一个或多个数字，在带括号的部分之前如果数字可以直接以括号中的组开头，`[0-9]+`您可能想写`[0-9]*`
*   然后，可选地在括号中出现一组数字：`(\[0-9]+\)?`. 假设只允许一个这样的组
*   然后是本地电话号码，也允许使用连字符：`[0-9-]*`
*   最后一个字符必须是数字`[0-9]`，此处不允许使用连字符

    ```
    ^\+?[0-9]+(\([0-9]+\))?[0-9-]*[0-9]$ 
    ```

[在这里](http://regexr.com?31ttm)查看结果。修剪空格看起来像`$trimmed = str_replace(' ', '', $pattern);`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T08:43:42.247

这个正则表达式怎么样：

```
/^[0-9-+()\s]+$/ 
```

[在此处](http://regexr.com?31tsu)查看实际操作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T08:52:48.513

```
'/\(?\b[0-9]{3}\)?[-. ]?[0-9]{3,5}[-. ]?[0-9]{4,8}\b/' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T10:39:11.693

由于您似乎正在使用它进行验证，您可以使用它`str_replace('[\s\+\-\(\)]', '', $data)`来获取一个应该（如果电话号码有效）只包含数字的字符串。然后，您可以通过运行轻松测试此假设`preg_match('\d{11}', $data)`（`{11}`表示 11 位数字，如果允许范围，请使用 min, max 像这样`{min,max}`，例如`\d{10,11}`）。

值得注意的是，这不像 Lorlin 的回答那样彻底，因为您忽略了括号`+`s 或`-`s 的任何无效使用。您可能想使用两者的组合，或者最适合您需要的任何东西。

# c# - 如何将 IEnumerable 扁平化为 2 个值？

> ID：12087859
> 
> 赞同：2
> 
> 时间：2012-08-23T08:41:35.460
> 
> 标签：c#, .net, linq

```
class AgeClass
{
    string[] Names {get;set;}
    int Age {get;set;}
}

...

IEnumerable<AgeClass> myList = ...; // a few instances of AgeClass 
```

现在我想（从我的列表中）得到一个

```
IEnumerable<KeyValuePair<string,int>> 
```

有一对姓名和年龄。如何轻松做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-23T08:45:26.927

```
myList.SelectMany(
     x=> x.Names.Select(
          z => new KeyValuePair<string,int>(z,x.Age))); 
```

请注意，您必须知道 linq 正在创建一个查询 - 每次您枚举此集合时，都会根据`myList`. 要删除此效果，只需添加`.ToList()`到此行的末尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:53:53.487

使用查询 linq 语法：

```
var result = from el in myList
             from n in el.Names
               select new KeyValuePair<string, int>(n, el.Age); 
```

# .net - 是否可以通过 ResourceManager 检索 .NET 资源项的实际内容类型（MIME 类型）？

> ID：12087862
> 
> 赞同：3
> 
> 时间：2012-08-23T08:41:48.927
> 
> 标签：.net, resources, mime-types, content-type

在 .NET 资源文件中，可以插入各种类型的内容 - 从纯文本到图像，后者表示为 base64 编码的字节数组（至少在 resx 文件中看起来像）。

我的目的是能够列出应用程序中的资源并显示其他信息，例如内容 (MIME) 类型、大小（以字节为单位）等。我需要按内容类型对资源进行分组和排序/过滤。

我的问题是 - 是否可以检索资源项的正确 MIME 类型。例如，如果我在应用程序资源中存储了 JPG 图像，我希望其内容类型为`image/jpeg`. 如果我存储了 JSON 文本，我希望它的 MIME 类型为`application/json`.

是否可以通过 .NET 标准资源管理功能来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:47:30.387

好吧，我想它是肯定的，也不是。根据[本文](http://msdn.microsoft.com/en-us/library/ms950960.aspx)，可以使用专门准备的资源，因此：对于任何具有资源的给定文件，只有具有此类信息的文件才可以。我也找不到在 VS2010 的 resx 编辑器中显示类型和 mimetype 列的方法。然而，它在属性中显示文件类型，而不是 mimetype。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:05:38.517

我已经阅读了许多有关 MIME 类型检索的相关问题。大多数情况都与使用物理文件有关。然而，在资源场景中，情况并非总是如此，因为按名称获取资源会返回一个几乎可以是任何东西的对象。此外，基于对象的二进制表示来确定 MIME 类型还有其他明显的缺点 1）它不能保证类似类型的正确性（`.docx`文件可能被错误地识别为`application/zip`）或导致性能下降，因为它们需要处理对象字节。

因此，我认为定义资源的人负责它们所代表的内容类型。因此，我决定根据资源集名称和资源名称来定义 mime 类型映射，这是应用程序配置的一部分。这将导致在添加新资源时添加内容类型描述的额外工作，但很容易管理并且不需要重新构建应用程序。

例如 ，具有以下内容的**自定义配置部分可以完成这项工作：**

```
<resourceContentTypeMapping>
    <resourceSet name="CommonResources" defaultContentType="text/plain">
       <!-- This would map enties in CommonResource.resx file -->
       <item key="AppIcon" contentType="image/jpeg" />
    </resourceSet>

    <resourceSet name="SomeOtherResources" defaultContentType="text/plain">
        ...
    </resourceSet>

    ...
</resourceContentTypeMapping> 
```

该`defaultContentType`属性确定为所有未映射资源返回的内容类型。由于资源文件中的大多数项目都是字符串，我决定这`text/plain`将减轻我的工作，因为我只需要描述非文本资源。分组到资源集允许从单个 resx 文件中唯一地描述资源项。

# c# - 如何使用 htmlgeneric 控件在 c# 中添加 javascript 函数

> ID：12087863
> 
> 赞同：0
> 
> 时间：2012-08-23T08:41:51.217
> 
> 标签：c#, asp.net

我正在研究 asp.net c# 。我想通过使用 htmlgeneric 控件在 c# 中添加 javascript 函数。我使用了代码，

```
HtmlGenericControl scriptTagLinks = new HtmlGenericControl("script");
scriptTagLinks.Attributes["type"] = "text/javascript"; 
string scrip = "$(function () {$([src='" + url + "']" + ").pinit();});";
    // txtDesc.Text = rdr.GetString(4);
    // TxtLink.Text = rdr.GetString(6);
scriptTagLinks.Attributes["src"] = scrip;
this.Controls.Add(scriptTagLinks); 
```

但我应该这样，

```
 <script type="text/javascript">
   $(function () {

        $("[src='/pinterest/portals/0/Images/about-person3.jpg']").pinit(); 
        $("[src='/pinterest/portals/0/Images/about-us-group.jpg']").pinit();

    });
    </script> 
```

但我得到这个

```
 <script src="$(function () {$([src='/pinterest/portals/0/Images/about-us-group.jpg']).pinit();});" type="text/javascript"> 
```

如何`$([src='/pinterest/portals/0/Images/about-us-group.jpg']).pinit();});`在标签之间添加。

# c# - 客户端获取从 C++ COM dll 返回的字节数组

> ID：12087870
> 
> 赞同：4
> 
> 时间：2012-08-23T08:42:14.430
> 
> 标签：c#, c++, com-interop

我在 C++ COM 头文件和 IDL 文件中有这个声明：

```
//Header file:
#define MAX_LENGTH      320
typedef BYTE            PRE_KEY [MAX_LENGTH];

//IDL file:
#define MAX_COUNT       10
HRESULT Save([in] DWORD dwCommand, [in]float fdata[MAX_COUNT], [out] PRE_KEY* phKey); 
```

这是 C# 客户端代码：

```
//After C# interop compilation, the method's signature in C# becomes:
Save(uint dwCommand, float[] fdata, out byte[] phKey);

//The code to call the C++ COM server:    
uint dwCommand = 2;
float[] fdata = new float[dwCommand];

fdata[0] = 1; 
fdata[1] = 2;

byte[] phKey = new byte[320];

save(dwCommand, fdata, out phKey); 
```

在调用返回 C# 之前，ntdll.dll 中的代码会崩溃，但 C++ 服务器已经完成处理，不再在堆栈中。

任何人都可以弄清楚如何解决这个问题？而且由于我正在使用互操作编译来编译 idl 文件以生成 C# 签名，因此我无法在 C++ IDL 文件中执行某些操作并手动更改 C# 签名。

有趣的是，我有另一个类似的调用，它从 C++ 到 C# 返回完全相同的 phKey，并且它工作得很好。唯一的区别是调用 phKey 在一个结构中，而整个结构是一个“[out]”参数。真的不明白为什么这可以在结构中返回，但不能直接作为参数返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T14:08:03.560

IDL 声明中的 [out] 属性是一个严重的互操作问题。这意味着您的 COM 服务器将分配数组，调用者需要释放它。这很少有好的结果，无法保证您的服务器和客户端使用相同的堆。当您将 C 运行时分配器与 malloc() 函数或 new[] 运算符一起使用时，总是会失败，CRT 使用自己的私有堆，除非它们共享完全相同版本的 CRT，否则调用者永远无法访问该堆。一般情况下这种情况的可能性非常小，当您通过 CLR 进行互操作时为零。

这就是它爆炸的原因，CLR 知道它需要在将数组复制到托管数组后释放它。它将使用 CoTaskMemFree()，使用为 COM 互操作分配保留的堆。当然，您没有使用 CoTaskMemAlloc() 来分配数组。

这个问题的一般解决方案是让调用者提供数组，被调用者填充它。这需要参数上的 [in, out]。还有一个额外的参数，指示传递的数组的大小，[sizeis] 告诉编组器它。非常高效，无需分配。使用自动化 SAFEARRAY 类型避免了必须指定额外的参数，CLR 知道该类型。

# java - jvm如何运行程序

> ID：12087871
> 
> 赞同：0
> 
> 时间：2012-08-23T08:42:13.447
> 
> 标签：java, jvm

程序 1：当我编写一个简单的 B 类而不在我的 java 程序中创建对象时。JVM 如何为包含成员字段和成员函数的类代码分配内存。

```
class B
{
     int a=10;
     public void print()
     {
         System.out.println("inside B class");
     }

} 
```

程序2：当我创建该类的对象时，jvm如何为对象分配内存......见下面的代码

```
class B
{
    int a=10;
    public void print()
    {
        System.out.println("inside B class");
    }

    public static void main(String args[])
    {
        B b=new B();
        b.print();

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:47:56.273

此示例中存在三个分配级别：

*   当类被加载时（通常是第一次在代码中的某个地方引用它），然后为其结构、代码和静态字段分配内存。

*   当一个实例被创建（`new B()`）时，非静态字段的内存和一些元数据（对象头）被分配。此内存在堆上。

*   当调用方法时，堆栈中的内存会分配给该方法内的局部变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T09:22:46.263

这个站点信息量很大，所以看看它[链接](http://www.cubrid.org/blog/dev-platform/understanding-jvm-internals/)你就能明白 jvm 是如何运行程序的

# javascript - 使用画布设置超时

> ID：12087874
> 
> 赞同：2
> 
> 时间：2012-08-23T08:42:24.810
> 
> 标签：javascript, animation, canvas

我正在尝试使用画布运行动画背景。现在`setTimeout`显示 chrome 中的错误`Uncaught SyntaxError: Unexpected identifier`。我一定是动画错误。

当我删除`setTimeout`并拥有 时`tiles()`，一切正常（即没有动画，但显示我想要的正确背景）。所以我敢肯定，这与`setTimeout.`

有人给我线索吗？

```
function createBackground(){        
        var canvas = document.createElement('canvas'),
            ctx = canvas.getContext('2d'),
            background = $('#game .background')[0],
            rect = background.getBoundingClientRect(), //returns the dimension of background
            gradient,
            m = monster.settings.monsterSize;

        canvas.width = rect.width;
        canvas.height = rect.height;

        /* create checker */
        tile_cols = canvas.width / m;
        tile_rows = canvas.height / m;

        setTimeout(tiles(ctx, m, tile_cols, tile_rows), 300);

        /* add canvas to html element */
        background.appendChild(canvas); 
    }

    function tiles(ctx, m, tile_cols, tile_rows){
        for (var i=0; i<tile_cols; i++){
            for (var j=0; j<tile_rows; j++){
                var x = Math.ceil(Math.random()*3);

                switch(x){
                    case 1:
                        ctx.fillStyle = 'black';
                        break;

                    ....

                    case 3:
                        ctx.fillStyle = '#00080E';
                        break;  
                }

                ctx.strokeStyle = 'black';
                ctx.beginPath(); 
                ...
                ctx.closePath();

                ctx.fill();
                ctx.stroke();

            };
        };      

        return this;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T08:51:54.683

您将结果分配`tiles(ctx, m, tile_cols, tile_rows)`给第一个参数`setTimeout`

将其更改为

```
setTimeout(function() {
    tiles(ctx, m, tile_cols, tile_rows)
}, 300); 
```

你应该看看[requestAnimationFrame](https://developer.mozilla.org/en-US/docs/DOM/window.requestAnimationFrame)这个任务。Paul Irish 写了一篇关于它的[好文章](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)。

# java - 二叉搜索树是否平衡？

> ID：12087880
> 
> 赞同：3
> 
> 时间：2012-08-23T08:42:48.897
> 
> 标签：java, algorithm, data-structures, tree, binary-tree

这已经在[这里](https://stackoverflow.com/questions/742844/how-to-determine-if-binary-tree-is-balanced)讨论过，但是我在下面有一个实现（在线程中从未讨论过），

```
public boolean isBalanced(BSTNode node) {
    if(maxHeight() > (int)(Math.log(size())/Math.log(2)) + 1) 
        return false;
    else
        return true;
} 
```

其中 maxHeight() 返回树的最大高度。基本上我正在检查 maxHeight > log(n)，其中 n 是树中元素的数量。这是一个正确的解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T08:52:00.830

这个解决方案是不正确的。如果高度为 ，则平衡树是平衡的`O(lg(n))`，因此它（高度）需要更小`c*lg(n)`- 对于一些 CONSTANT `c`。您的解决方案假定此常数为 1。

请注意，只有一棵[完整的树](http://en.wikipedia.org/wiki/Binary_tree#Types_of_binary_trees)`lg(n)`具有精确的高度。

[以斐波那契树](http://lcm.csa.iisc.ernet.in/dsa/node112.html)为例，它*是*一棵平衡树（实际上是[AVL 树](http://en.wikipedia.org/wiki/AVL_tree)的最坏情况）。但是 - 它的高度大于`lgn`( `~1.44*lg(n)`)，并且建议的算法将返回不平衡的斐波那契树。

# mysql - 比赛中的句号/句号运算符

> ID：12087884
> 
> 赞同：2
> 
> 时间：2012-08-23T08:43:03.480
> 
> 标签：mysql, match-against

我可以使用匹配来搜索/中`foo`的所有行：`col1``col2`

```
SELECT col1, col2
FROM some_table
WHERE MATCH (col1,col2)
      AGAINST ('foo' IN BOOLEAN MODE); 
```

**但是假设我想用foo** 搜索所有行。*（即 foo 以句号作为下一个字符）*。在[Boolean Full-Text Searches 的文档页面上](http://dev.mysql.com/doc/refman/5.6/en/fulltext-boolean.html)，**它没有提到句号是 operator**，所以我想我可以使用其中任何一个：

```
AGAINST ('foo.' IN BOOLEAN MODE);
AGAINST ('"foo."' IN BOOLEAN MODE);
AGAINST ('"foo\."' IN BOOLEAN MODE); 
```

但是，这将返回与以下相同的结果：

```
AGAINST ('foo.couldBeAnything' IN BOOLEAN MODE);
AGAINST ('foo' IN BOOLEAN MODE);
AGAINST ('foo*' IN BOOLEAN MODE); 
```

.

`.`在这种情况下，运营商是什么？以及如何匹配`foo.`？

*注意：我首先问了这个[关于比赛的问题，`foo.bar`](https://stackoverflow.com/questions/12076780/match-against-foo-bar-with-a-full-stop-period)这导致我问了这个后续问题。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T17:10:26.010

句号或任何标点符号在全文搜索中被**视为空格，不幸的是，这意味着无法搜索标点符号。**这背后的原因是文本搜索是为了查找“单词”（不包括标点符号）。

要对标点符号进行此类搜索，您可以匹配正则表达式，例如使用[preg_match](http://php.net/manual/en/function.preg-match.php)。

# mysql - 如何对 sql 表列进行拆分

> ID：12087885
> 
> 赞同：3
> 
> 时间：2012-08-23T08:43:02.950
> 
> 标签：mysql, string, split

我有一个存储一些逗号分隔字符串的表。有没有办法编写一个 sql 来为通过逗号拆分获得的每个令牌字符串返回一个单独的行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T08:47:30.587

您可以简单地编写和调用存储过程

```
DELIMITER $$

DROP PROCEDURE IF EXISTS explode_table $$
CREATE PROCEDURE explode_table(bound VARCHAR(255))

  BEGIN

    DECLARE id INT DEFAULT 0;
    DECLARE value TEXT;
    DECLARE occurance INT DEFAULT 0;
    DECLARE i INT DEFAULT 0;
    DECLARE splitted_value INT;
    DECLARE done INT DEFAULT 0;
    DECLARE cur1 CURSOR FOR SELECT table1.id, table1.value
                                         FROM table1
                                         WHERE table1.value != '';
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;

    DROP TEMPORARY TABLE IF EXISTS table2;
    CREATE TEMPORARY TABLE table2(
    `id` INT NOT NULL,
    `value` VARCHAR(255) NOT NULL
    ) ENGINE=Memory;

    OPEN cur1;
      read_loop: LOOP
        FETCH cur1 INTO id, value;
        IF done THEN
          LEAVE read_loop;
        END IF;

        SET occurance = (SELECT LENGTH(value)
                                 - LENGTH(REPLACE(value, bound, ''))
                                 +1);
        SET i=1;
        WHILE i <= occurance DO
          SET splitted_value =
          (SELECT REPLACE(SUBSTRING(SUBSTRING_INDEX(value, bound, i),
          LENGTH(SUBSTRING_INDEX(value, bound, i - 1)) + 1), ',', ''));

          INSERT INTO table2 VALUES (id, splitted_value);
          SET i = i + 1;

        END WHILE;
      END LOOP;

      SELECT * FROM table2;
    CLOSE cur1;
  END; $$
-------------------
CALL explode_table(','); 
```

# php - 使用从 Android 发送的数据在 php 中设置 SESSION 元素

> ID：12087886
> 
> 赞同：0
> 
> 时间：2012-08-23T08:43:04.403
> 
> 标签：php, android, session, http-headers

我正在尝试将数据从 Android 发送到 php，后者必须将数据保存在**SESSION**中。但是，我的会话仍然是空的。另一方面，当我从网站设置 SESSION 时，它可以工作。我认为这是因为

```
xmlHttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"); 
```

我的 js 中的行（用于测试目的）。Android的等效线是什么？
在我的 Android 中，我有：

```
httpclient = new DefaultHttpClient();
String url = "http://www.weddingwatch.org/WebGL/Testing/" + myTablet + "saveCoordinates.php";
HttpPost httppost = new HttpPost(url);  
httppost.setEntity(new UrlEncodedFormEntity(data[0], HTTP.CONTENT_ENCODING));
HttpResponse response = httpclient.execute(httppost); 
```

“ **HTTP.CONTENT_ENCODING** ”不是不适合将数据发送到服务器以供稍后处理，例如设置 SESSION 元素吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T23:24:58.837

我终于找到了解决我的问题的方法。为了找到 SESSION 元素，您必须指定 SESSION ID 否则它会与其他 SESSION 元素混合。希望我的假设是正确的。因此，在我在我的 php 中设置一个会话 id 之后，我能够在稍后的过程中检索这些元素。

# visual-studio-2012 - 如何为文本服务框架编写 COM 对象？

> ID：12087897
> 
> 赞同：1
> 
> 时间：2012-08-23T08:43:40.437
> 
> 标签：visual-studio-2012

在 Visual Studio 2011 中，如何为文本服务框架编写 COM 对象？

# putty - 如何将远程主机的呼叫转接到本地主机

> ID：12087900
> 
> 赞同：0
> 
> 时间：2012-08-23T08:43:49.873
> 
> 标签：putty, iptables, forwarding, nat

我希望所有对 my_remote_host:port 的调用都重定向到 my_local_host:port，我的远程主机是 Linux，我的本地主机是 Windwos

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:49:44.423

打开文件 C:\Windows\System32\drivers\etc\hosts

127.0.0.1 my_local_host

# selenium - Mink：在@BeforeStep 中等待页面加载

> ID：12087901
> 
> 赞同：5
> 
> 时间：2012-08-23T08:43:52.497
> 
> 标签：selenium, selenium-webdriver, behat, mink

我想在依赖于 jQuery 的 @BeforeStep 钩子中的页面上执行一些 javascript。但是当时没有定义jQuery，实际上页面是空白的。

这是我想要实现的目标：

```
/**
 * @BeforeStep @javascript
 */
public function registerAjaxEventHandlers()
{
    $javascript = <<<JS
        window.jQuery(document).ready(function () {
            if (window.__ajaxStatus !== undefined) {
                return;
            }
            window.__ajaxStatus = 'none';

            $('body').ajaxStop(function() {
              window.__ajaxStatus = 'idle';
            });

            $('body').ajaxStart(function() {
              window.__ajaxStatus = 'in-flight';
            });
        });
JS;
        //$this->getSession()->wait(5000, 'window.jQuery !== undefined');
        $this->getSession()->executeScript($javascript);
    } 
```

我想也许我可以等待页面首先加载 jQuery（注释行），但事实并非如此。似乎在处理该钩子之前执行已停止。

在 behat/mink 生态系统中，在页面上执行 javascript 的正确位置是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T07:41:07.237

这个怎么样？

```
$this->getSession()->wait(5000, 'typeof window.jQuery == "function"'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-31T02:12:35.660

您的 javascript 在该步骤之前执行，即在页面加载之前。但是如果你加载一个页面，各种 ondomload/pageload JavaScript 也会被触发。

如果您乐于在初始页面之后运行它，您可以像这样使用@AfterStep：

```
/**
 * @AfterStep
 */
public function set_selenium_css_selector (Behat\Behat\Event\StepEvent $event) {
  $this->getSession()->wait(10, 'jQuery ("body").addClass ("selenium")');
} 
```

# php - Yii 中的 Scopes - 在新模型上执行模式

> ID：12087903
> 
> 赞同：1
> 
> 时间：2012-08-23T08:43:54.523
> 
> 标签：php, yii

对于某些模型，我们`valid`在 MySQL 中使用布尔值实现了软删除。

在类中，scopes方法定义如下：

```
public function scopes() {
    return array(
        'valid'=>array(
            'condition'=>"t.valid=1",
        )
    );
} 
```

这样当我们加载模型时，我们可以调用作用域，使其仅包含有效（未删除）模型以及其他查找条件，或者任何它发生的情况。

这不是很干，我想知道是否有另一种实现相同目标的方法，它可能适用于接口，所有模型派生自的抽象模型类，或者，如果使用 5.4，一个特征。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T17:03:36.637

Yii 有一个名为[Behaviors](http://www.yiiframework.com/doc/guide/1.1/en/basics.component#component-behavior)的特性 ，它类似于 php 5.4 的特性，但也适用于早期版本。

软删除行为.php：

```
class SoftDeleteBehavior extends CActiveRecordBehavior {
    public $deleteAttribute = 'valid';
    public $deletedValue = 0;

    public function beforeDelete($event) {
        if ($this->deleteAttribute !== null) {
            $this->getOwner()->{$this->deleteAttribute} = $this->deletedValue;
            $this->getOwner()->update(array($this->deleteAttribute));

            // prevent real deletion of record from database
            $event->isValid = false;
        }
    }

    /**
     * Default scope to be applied to active record's default scope.
     * ActiveRecord must call this from our own default scope.
     * @return array the scope to be applied to default scope
     */
    public function defaultScope() {
        return array(
            'condition' => $this->getOwner()->getTableAlias(false,false).'.'.$this->deleteAttribute
                . ' <> '.var_export($this->deletedValue, true),
        );
    }
} 
```

然后我有这个类从行为中应用deafultscope：ActiveRecord.php（我当然在这个类中有更多的方法，缺点是如果你需要扩展方法，你需要调用父方法）：

```
class ActiveRecord extends CActiveRecord {

    public function defaultScope() {
        $scope = new CDbCriteria();

        foreach ($this->behaviors() as $name => $value) {
            $behavior = $this->asa($name);
            if ($behavior->enabled && method_exists($behavior,'defaultScope')) {
                $scope->mergeWith($behavior->defaultScope());
            }
        }

        return $scope;
    }
} 
```

然后你在你的模型中使用它：

```
class MyModel extends ActiveRecord {
    public function behaviors() {
        return array(
            'SoftDeleteBehavior' => array(
                'class' => 'application.components.behaviors.SoftDeleteBehavior',
            ),
        );
    }
} 
```

**PROTIP** : 当你使用 gii 生成模型时，你可以指定你自己的 ActiveRecord 类

# python - Pythonic 按字段名称对命名元组列表进行排序的方法

> ID：12087905
> 
> 赞同：75
> 
> 时间：2012-08-23T08:44:13.680
> 
> 标签：python, sorting, namedtuple, field-names

我想对命名元组列表进行排序，而不必记住字段名的索引。我的解决方案似乎很尴尬，并希望有人能有一个更优雅的解决方案。

```
from operator import itemgetter
from collections import namedtuple

Person = namedtuple('Person', 'name age score')
seq = [
    Person(name='nick', age=23, score=100),
    Person(name='bob', age=25, score=200),
]

# sort list by name
print(sorted(seq, key=itemgetter(Person._fields.index('name'))))
# sort list by age
print(sorted(seq, key=itemgetter(Person._fields.index('age')))) 
```

谢谢，尼克

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-08-23T08:48:23.720

```
from operator import attrgetter
from collections import namedtuple

Person = namedtuple('Person', 'name age score')
seq = [Person(name='nick', age=23, score=100),
       Person(name='bob', age=25, score=200)] 
```

按名称排序列表

```
sorted(seq, key=attrgetter('name')) 
```

按年龄排序列表

```
sorted(seq, key=attrgetter('age')) 
```

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2012-08-23T08:50:12.423

```
sorted(seq, key=lambda x: x.name)
sorted(seq, key=lambda x: x.age) 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-05-27T17:28:15.880

我测试了这里给出的两种替代方案的速度，因为@zenpoy 关心性能。

测试脚本：

```
import random
from collections import namedtuple
from timeit import timeit
from operator import attrgetter

runs = 10000
size = 10000
random.seed = 42
Person = namedtuple('Person', 'name,age')
seq = [Person(str(random.randint(0, 10 ** 10)), random.randint(0, 100)) for _ in range(size)]

def attrgetter_test_name():
    return sorted(seq.copy(), key=attrgetter('name'))

def attrgetter_test_age():
    return sorted(seq.copy(), key=attrgetter('age'))

def lambda_test_name():
    return sorted(seq.copy(), key=lambda x: x.name)

def lambda_test_age():
    return sorted(seq.copy(), key=lambda x: x.age)

print('attrgetter_test_name', timeit(stmt=attrgetter_test_name, number=runs))
print('attrgetter_test_age', timeit(stmt=attrgetter_test_age, number=runs))
print('lambda_test_name', timeit(stmt=lambda_test_name, number=runs))
print('lambda_test_age', timeit(stmt=lambda_test_age, number=runs)) 
```

结果：

```
attrgetter_test_name 44.26793992166096
attrgetter_test_age 31.98247099677627
lambda_test_name 47.97959511074551
lambda_test_age 35.69356267603864 
```

使用 lambda 确实比较慢。最多减慢 10%。

**编辑**：

进一步的测试显示了使用多个属性进行排序时的结果。添加了以下两个具有相同设置的测试用例：

```
def attrgetter_test_both():
    return sorted(seq.copy(), key=attrgetter('age', 'name'))

def lambda_test_both():
    return sorted(seq.copy(), key=lambda x: (x.age, x.name))

print('attrgetter_test_both', timeit(stmt=attrgetter_test_both, number=runs))
print('lambda_test_both', timeit(stmt=lambda_test_both, number=runs)) 
```

结果：

```
attrgetter_test_both 92.80101586919373
lambda_test_both 96.85089983147456 
```

Lambda 仍然表现不佳，但不那么好。现在慢了大约 5%。

测试在 Python 3.6.0 上完成。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-01-10T07:39:48.993

这对某些人来说可能有点太“神奇”，但我偏爱：

```
# sort list by name
print(sorted(seq, key=Person.name.fget)) 
```

编辑：这假设`namedtuple`使用`property()`内置来实现访问器，因为它利用了`fget`此类属性的属性（[请参阅文档](https://docs.python.org/3/library/functions.html#property)）。在某些实现中这可能仍然是正确的，但似乎 CPython 不再这样做，我认为这与[https://bugs.python.org/issue32492](https://bugs.python.org/issue32492)中引用的优化工作有关（所以，从 3.8 开始）。这种脆弱性就是我提到的“魔法”的代价；`namedtuple`当然不承诺使用`property()`.

写作`Person.name.__get__`更好（在实施更改之前和之后工作）但可能不值得奥秘而不是简单地写成`lambda p: p.name`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-03-10T19:18:56.763

因为没有人提到使用 itemgetter()，这里你如何使用 itemgetter()。

```
from operator import itemgetter
from collections import namedtuple

Person = namedtuple('Person', 'name age score')
seq = [
    Person(name='nick', age=23, score=100),
    Person(name='bob', age=25, score=200),
]

# sort list by name
print(sorted(seq, key=itemgetter(0)))

# sort list by age
print(sorted(seq, key=itemgetter(1))) 
```

# php - PHP webdrivers 测试从命令行运行良好，但仅在 jenkins 开始构建时部分运行

> ID：12087911
> 
> 赞同：0
> 
> 时间：2012-08-23T08:44:27.750
> 
> 标签：php, selenium, jenkins, webdriver

**软件版本：** jenkins version 1.478 selenium Standalone version 2.25 chrome driver version Chrome version 21 PHPunit 3.6.10 PHP webdriver bindings [http://code.google.com/p/php-webdriver-bindings/](http://code.google.com/p/php-webdriver-bindings/) Ubuntu 11.10 使用GUI

**摘要：** 在一个新的终端窗口中我运行： java -jar selenium-server-standalone-2.25.0.jar -Dwebdriver.chrome.driver=chrome_driver

当作为 ant PHPunit 任务的一部分运行时，PHPUnit/webdriver 测试运行良好。Chrome 出现、页面加载、点击发生等。浏览器在 tearDown() 时关闭。

但是，当 jenkins 运行 ant phpunit 构建任务时。出现以下情况。Chrome 浏览器打开。出现第一个网页，发送密钥工作，提交表单。但浏览器窗口似乎没有关闭。它挂起。詹金斯构建无限期挂起。我需要杀死构建。

关于为什么硒测试在命令行上工作而不是来自詹金斯的任何想法？

谢谢杰米

更新：似乎 webdriver 点击。Selenium 停止/挂起并且不再接受命令。

IE

$element = $this->webdriver->findElementBy(LocatorStrategy::xpath, "/html/body/div[5]/div[3]/div[2]/ul/li[2]/a"); $元素->点击（）；

//此行以下不执行。$element2 = $this->webdriver->findElementBy(LocatorStrategy::xpath, "/html/body/div[5]/div[10]/div[2]/ul/li[2]/a"); $element2->点击();

更新 2：我已经用这个替换了 PHP webdriver 绑定：

[https://github.com/Element-34/php-webdrivergs](https://github.com/Element-34/php-webdrivergs)这个版本：

一些进展。测试 webdriver/phpunits 测试执行并完成。然而，詹金斯 PHPUnit 构建步骤仍然永远挂起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:46:48.047

您是否尝试过 webdriver.quit() 方法？

# php - 获取输入路径以提交到 php 中的 Dropbox

> ID：12087914
> 
> 赞同：2
> 
> 时间：2012-08-23T08:44:33.900
> 
> 标签：php, javascript, html, forms, dropbox

我有以下内容；

```
$FilePath = "c:\user\test\koala.jpg";

$put = $dropbox->putFile($FilePath); 
```

或者

```
$put = $dropbox->putFile("c:\user\test\koala.jpg"); 
```

这很好用，并将文件上传到保管箱。

`c:\user\test\koala.jpg`但是，由于安全限制，显然我无法通过表单输入框获得完整路径。

有没有办法解决这个问题。我可以`$FilePath`通过某种形式的输入，而无需将其作为临时文件提交到我的服务器。

我在下面放了完整的代码。

```
<?php

// @link https://github.com/BenTheDesigner/Dropbox/blob/master/Dropbox/API.php#L122-139

// Require the bootstrap
require_once('bootstrap.php');

// Extend your sript execution time where required
set_time_limit(0);

$put = $dropbox->putFile($FilePath);

// Dump the output
// var_dump($chunked); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:11:33.543

如何将您的文件上传到您的服务器，并在运行脚本后将它们复制到您的 Dropbox 帐户。然后运行脚本以擦除临时目录或特定文件夹中的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:42:56.250

测试这样的东西：

**HTML**

```
...
<form type="POST" action="myPhpUploadPage.php" enctype="multipart/form-data">
   <input type="file" name="file"/><br/>
   <input type="submit" value="send"/>
</form>
... 
```

**PHP (myPhpUploadPage.php)**

```
// Require the bootstrap
require_once('bootstrap.php');

// Extend your sript execution time where required
set_time_limit(0);

if(isset($_FILES['file'])){
  $FilePay = $_FILES['file']['tmp_name'];
  $put = $dropbox->putFile($FilePath);
} else {
  echo 'not file selected';
} 
```

# c# - 类似于 Asp.Net 中的 request.getContextPath()

> ID：12087917
> 
> 赞同：0
> 
> 时间：2012-08-23T08:44:47.100
> 
> 标签：c#, asp.net, .net

我需要知道，我们如何在 asp.net中获取当前的 url 路径（例如[http://www.mywebsite.com/ ）。](http://www.mywebsite.com/)我发现 java 有**request.getContextPath()**来获取它。即使在 dot net 我们也有这个 System.Web.HttpContext.Current.Request.UrlReferrer.Host System.Web.HttpContext.Current.Request.ApplicationPath

有没有其他方法可以产生相同的结果。

我也很想知道我将如何使用 aspx 页面中的代码。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:57:47.170

我相信你想要的是[HttpRequest.AppRelativeCurrentExecutionFilePath](http://msdn.microsoft.com/en-us/library/system.web.httprequest.apprelativecurrentexecutionfilepath)属性

该属性获取应用程序根目录的虚拟路径，并通过使用波浪号 (~) 表示应用程序根目录（如“~/page.aspx”）使其相对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T12:21:38.877

我懂了 ：）

```
http://<%=System.Web.HttpContext.Current.Request.UrlReferrer.Host+System.Web.HttpContext.Current.Request.ApplicationPath%>/page.aspx 
```

干杯:) :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T08:58:58.467

context.Request.Url.ToString() 能否达到您的要求？

```
context.Request.Url.ToString() 
```

返回：“http://localhost:52550/myapp/somepage/”

# javascript - jQuery检测屏幕大小变化而不刷新

> ID：12087925
> 
> 赞同：3
> 
> 时间：2012-08-23T08:45:06.803
> 
> 标签：javascript, jquery, screen-orientation

我有一个基于屏幕大小运行的脚本

```
if (document.documentElement.clientWidth >= 1024) {//script} 
```

这工作正常，但需要在更改之间刷新，因为这将在移动网站上使用，我需要查看方向是否更改。

我怎样才能在不刷新的情况下检测屏幕大小？

[Jsfiddle 演示](http://jsfiddle.net/Kyle_Sevenoaks/TjzFW/)。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T08:48:49.117

试试这个：

```
$(window).resize(function() {
    if (document.documentElement.clientWidth >= 1024) {    
        $('div').click(function() {
            $('p').slideToggle();
        });
    }
}).resize() 
```

* * *

*更新：*

您可以使用`orientationchange`事件：

```
$(window).bind('orientationchange', check);

function check() {
     if (document.documentElement.clientWidth >= 1024) {    
            $('div').click(function() {
                $('p').slideToggle();
            });
     }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T08:47:50.660

```
function calculateHeight(){ 
   //do some calculations

}

calculateHeight();

$(window).resize(function(){
    calculateHeight();  
}); 
```

这是你的游戏。在`calculateHeight`您编写计算代码时，然后运行一次以使所有内容都具有正确的大小。之后 $(windows).resize(); 每次调整窗口大小时都会调用，以便您可以再次计算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T08:47:39.830

你可以试试 jQuery resize() 方法： [http ://api.jquery.com/resize/](http://api.jquery.com/resize/)

# css - 使用 CSS 创建选项卡式矩形

> ID：12087929
> 
> 赞同：2
> 
> 时间：2012-08-23T08:45:18.257
> 
> 标签：css, tabs

是否有人知道任何可以实现选项卡式矩形外观的 CSS 技巧，如下图所示。

显然，这不能使用一个 div 来实现，但是，任何人都可以想出一种比将一个 div 重叠在另一个上以在边界上形成间隙更好的方法吗？

这是我目前的解决方案，但我觉得它可能会更好：

HTML：

```
<div id="handle"></div>
<div id="menu"></div> 
```

CSS（忽略颜色和定位等）：

```
#handle {
    width: 90px;
    height: 20px;
    border-left: 1px solid #666;
    border-right: 1px solid #666;
}

#menu {
    width: 600px;
    height: 100px;
    border: 1px solid #666;
    margin-top: 19px; /* Notice it is one pixel higher then the bottom of the #handle, this covers the top border where the handle is */
} 
```

**以上CSS如有错误请不要更正，我没有测试过。这纯粹是为了展示我目前实现这一目标的方法**

非常感谢任何评论

![选项卡式矩形](../Images/4f1bafbe69269d21e3168c7c69020c3c.png)

**更新**

这是菜单的 HTML：

```
<nav id="global-nav">
    <ul>
        <li id="homNav"><a href="#" title="Home"></a></li>
        <li id="masNav"><a href="#" title="#">#</a>
            <!-- This is where the submenu starts -->
            <div class="handle"></div>
            <div class="subMenu">
                <!-- Content Here -->
            </div>
            <!-- This is where the submenu ends -->
        </li>
        <li id="shiNav"><a href="#" title="#">#</a>
            <div class="handle"></div>
            <div class="subMenu">
                <!-- Content Here -->
            </div>
        </li>
        <li id="repNav"><a href="#" title="#">#</a>
            <div class="handle"></div>
            <div class="subMenu">
                <!-- Content Here -->
            </div>
        </li>
        <li id="setNav"><a href="#" title="#">#</a>
            <div class="handle"></div>
            <div class="subMenu">
                <!-- Content Here -->
            </div>
        </li>
    </ul>
</nav> 
```

这是菜单的 CSS（我还没有包含子菜单 css）：

```
/* Navigation */
#global-nav {position:absolute;width:460px;height:27px;left:15px;top:43px;}

#global-nav ul {margin:0;padding:0;list-style-type:none;}
#global-nav ul li {position:relative;display:block;width:92px;height:27px;float:left;padding:0;margin-left:8px;z-index:10;cursor:pointer;background-image:url("http://beta.example.net/_images/_global/sprite.png");background-position:-173px -32px;}
#global-nav ul li:hover {background-position:-173px -59px;}
#global-nav ul li:active {background-position:-173px -86px;}
#global-nav ul li a {display:block;width:92px;height:27px;line-height:27px;text-align:center;color:#fff;font-size:12px;text-shadow:#666 0 -1px 0;}
#global-nav ul li:hover a {color:#666;text-shadow:#fff 0 1px 0;}
#global-nav ul li:active a {color:#666;text-shadow:none;}

/* Set styles for specific navigation buttons */
#homNav {width:47px !important;margin-left:0 !important;margin-right:12px;background-position:-126px -32px !important;}
#homNav a {width:47px !important;}
#homNav:hover {background-position:-126px -59px !important;}
#homNav:active {background-position:-126px -86px !important;}

/* Set hovers of sub menu buttons to active images */
#masNav:hover,
#shiNav:hover,
#repNav:hover,
#setNav:hover
{background-position:-173px -86px !important;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:32:42.770

在仔细查看之后，我得出结论，我最初的覆盖边框的方法是实现这个选项卡式菜单的最佳方式。

HTML：

```
<nav id="global-nav">
    <ul>
        <li id="homNav"><a href="#" title="Home"></a></li>
        <li id="masNav"><a href="#" title="#">#</a>
            <div class="subMenuHandle horizontal-sprite">
                <div class="bg-noise"></div>
            </div>
            <div class="subMenu horizontal-sprite">
                <div class="bg-noise"></div>
            </div>
        </li>
        <li id="shiNav"><a href="#" title="#">#</a>
            <div class="subMenuHandle horizontal-sprite">
                <div class="bg-noise"></div>
            </div>
            <div class="subMenu horizontal-sprite">
                <div class="bg-noise"></div>
            </div>
        </li>
        <li id="repNav"><a href="#" title="#">#</a>
            <div class="subMenuHandle horizontal-sprite">
                <div class="bg-noise"></div>
            </div>
            <div class="subMenu horizontal-sprite">
                <div class="bg-noise"></div>
            </div>
        </li>
        <li id="setNav"><a href="#" title="#">#</a>
            <div class="subMenuHandle horizontal-sprite">
                <div class="bg-noise"></div>
            </div>
            <div class="subMenu horizontal-sprite">
                <div class="bg-noise"></div>
            </div>
        </li>
    </ul>
</nav> 
```

CSS（抱歉压缩，只是我的格式化方式）：

```
/* Navigation */
#global-nav {position:absolute;width:460px;height:27px;left:15px;top:43px;}

#global-nav ul {margin:0;padding:0;list-style-type:none;}
#global-nav ul li {position:relative;display:block;width:92px;height:27px;float:left;padding:0;margin-left:8px;z-index:10;background-image:url("http://beta.example.net/_images/_global/sprite.png");background-position:-173px -32px;}
#global-nav ul li:hover {background-position:-173px -59px;}
#global-nav ul li:active {background-position:-173px -86px;}
#global-nav ul li a {display:block;width:92px;height:27px;line-height:27px;text-align:center;color:#fff;font-size:12px;text-shadow:#666 0 -1px 0;}
#global-nav ul li:hover a {color:#666;text-shadow:#fff 0 1px 0;}
#global-nav ul li:active a {color:#666;text-shadow:none;}

/* Set styles for specific navigation buttons */
#homNav {width:47px !important;margin-left:0 !important;margin-right:12px;background-position:-126px -32px !important;}
#homNav a {width:47px !important;}
#homNav:hover {background-position:-126px -59px !important;}
#homNav:active {background-position:-126px -86px !important;}

/* Set hovers of sub menu buttons to active images */
#masNav:hover,
#shiNav:hover,
#repNav:hover,
#setNav:hover
{background-position:-173px -86px !important;}

/* Set the sub menu handles */
#global-nav .subMenuHandle {position:relative;display:none;width:90px;height:12px;margin-top:-1px;border-left:1px solid #666;border-right:1px solid #666;z-index:1000;background-color:#fff;background-repeat:repeat-x;}

/* Set the sub menu container */
#global-nav .subMenu {position:relative;display:none;margin-top:-1px;width:910px;height:180px;border:1px solid #666;z-index:999;background-color:#ddd;background-position:0 -12px;background-repeat:repeat-x;}

/* Set the menu hovers to show sub menus */
#global-nav ul li:hover .subMenuHandle,
#global-nav ul li:hover .subMenu
{display:block;}

/* Set the sub menu container positions */
#masNav .subMenu {margin-left:-83px;}
#shiNav .subMenu {margin-left:-183px;}
#repNav .subMenu {margin-left:-283px;}
#setNav .subMenu {margin-left:-383px;}

/* Set the noise in the menus */
.bg-noise {position:absolute;left:0;top:0;width:100%;height:100%;background:url("https://www.beta.net/_images/_global/bg-noise.png") repeat;} 
```

# java - 不支持 EhCache“ehcache.disk.store.dir”设置

> ID：12087935
> 
> 赞同：3
> 
> 时间：2012-08-23T08:45:33.437
> 
> 标签：java, caching, weblogic, ehcache, disk

我们正在使用 EhCache 2.4.2 作为缓存库的 Sun JVM 1.6.0_x 64 位在 Solaris 上的 WebLogic Server 10.3.4 中运行 Spring 3.0.5 Web 应用程序。WLS 设置为具有 2 个节点的集群，两个节点都运行在同一台物理机器上，通过标准 `startManagedWebLogic.sh`脚本启动（不使用 NodeManager/管理控制台）。

在我们`ehcache.xml`中，我们设置了这样的磁盘存储路径：

```
<?xml version="1.0" encoding="UTF-8"?>
<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:noNamespaceSchemaLocation="http://ehcache.org/ehcache.xsd"
  updateCheck="false">

  <!-- Location of persistent caches on disk -->
  <diskStore path="ehcache.disk.store.dir" />
  .. 
```

根据[EhCache 的 2.4 系列文档，](http://www.ehcache.org/documentation/2.4/user-guide/storage-options#storage) 此设置允许设置 JVM 系统属性以指定磁盘存储路径。

`startManagedWebLogic.sh`使用标准`JAVA_OPTIONS`元素设置系统属性：

```
JAVA_OPTIONS="-Dehcache.disk.store.dir=/var/tmp/EhCache-${SERVER_NAME} <other stuff>"
export JAVA_OPTIONS 
```

在`SERVER_NAME`这些选项之前在同一脚本中定义。

在集群节点启动期间，我可以看到属性设置正确（包装以提高可读性）：

```
/usr/jdk/jdk1.6.0_21/bin/java -d64 -server -Xms4096m -Xmx4096m
-XX:PermSize=512m -XX:MaxPermSize=512m -XX:+UseParallelOldGC
-verbose:gc -XX:+PrintGCTimeStamps -Dweblogic.Name=Node2 [..]
-Dehcache.disk.store.dir=/var/tmp/EhCache-Node2 [..]
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
weblogic.Server 
```

但是，然后使用应用程序，我可以看到占位符没有正确替换，因此使用占位符名称而不是实际路径设置：

```
2012-08-22 11:52:59,426 DEBUG [net.sf.ehcache.CacheManager] - [Creating new CacheManager with default config]
2012-08-22 11:52:59,429 DEBUG [net.sf.ehcache.CacheManager] - [Configuring ehcache from classpath.]
..
2012-08-22 11:52:59,458 DEBUG [net.sf.ehcache.config.DiskStoreConfiguration] - [Disk Store Path: ehcache.disk.store.dir]
..
2012-08-22 11:52:59,586 DEBUG [net.sf.ehcache.store.DiskStore] - [IOException reading index. Creating new index. ]
2012-08-22 11:52:59,587 DEBUG [net.sf.ehcache.store.DiskStore] - [Index file ehcache.disk.store.dir/bookmarksCountForUserCache.index deleted.]
2012-08-22 11:52:59,588 DEBUG [net.sf.ehcache.store.DiskStore] - [Index file ehcache.disk.store.dir/bookmarksCountForUserCache.index created successfully]
2012-08-22 11:52:59,588 DEBUG [net.sf.ehcache.store.DiskStore] - [Index file dirty or empty. Deleting data file bookmarksCountForUserCache.data]
2012-08-22 11:52:59,597 DEBUG [net.sf.ehcache.store.MemoryStore] - [Initialized net.sf.ehcache.store.LruMemoryStore for bookmarksCountForUserCache]
2012-08-22 11:52:59,600 DEBUG [net.sf.ehcache.store.LruMemoryStore] - [bookmarksCountForUserCache Cache: Using SpoolingLinkedHashMap implementation]
2012-08-22 11:52:59,601 DEBUG [net.sf.ehcache.Cache] - [Initialised cache: bookmarksCountForUserCache] 
```

在我的 WLS 域内的文件系统中，我可以看到 `ehcache.disk.store.dir`创建了一个新文件夹，因此该路径被解释为相对路径。

`ehcache.disk.store.dir`我也尝试使用标准模式，而不是使用纯字符串`${ehcache.disk.store.dir}`，但这只会更改要创建的文件夹名称`${..}`。

**有没有办法使用系统属性和所有节点的相同 EhCache 配置来指定每个节点的磁盘存储路径？**

我们`ehcache.xml`位于已部署的 .war 文件中，因此对于所有集群节点都是相同的。更改应用程序代码不是一种选择，因为我们已经结束了此版本的代码冻结。但是，我可以调整服务器的启动设置来设置系统属性，如上所述。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T13:38:15.710

使用`-Dehcache.disk.store.dir`系统属性应该仍然有效。
我也无法通过休眠配置设置属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-17T01:22:19.823

您是否尝试过 -Djava.io.tmpdir=/var/tmp/EhCache-${SERVER_NAME}？

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-06T17:45:46.337

不幸的是，我们无法弄清楚这种行为的原因。

`diskStore`作为一种解决方法，我们通过注释以下元素完全禁用了磁盘存储`ehcache.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:noNamespaceSchemaLocation="http://ehcache.org/ehcache.xsd"
  updateCheck="false">

  <!-- Location of persistent caches on disk
  <diskStore path="ehcache.disk.store.dir" />
  -->
  .. 
```

并为所有缓存设置属性`overflowToDisk`和。`diskPersistent``false`

# backbone.js - BackboneJS - 查看重新实例化后保留的类数组变量

> ID：12087938
> 
> 赞同：3
> 
> 时间：2012-08-23T08:45:47.923
> 
> 标签：backbone.js

我遇到了一个我无法解释的场景/错误，因为我有一个带有数组变量的 Backbone View 类，但即使在我重新实例化它之后变量值仍然存在。主干视图具有以下设置：

```
var TestView = Backbone.View.extend({
    a:"",
    b:"",
    items:[],
    initialize:function(){

    },
    add:function(value){
        this.items.push(value);
    }
}); 
```

这是我实例化类的方式：

```
this.formView = new TestView();
this.formView.add('halo');
this.formView.a = 'abc';

this.formView = new TestView();
this.formView.add('test');
this.formView.b = 'bcd';

console.log("a - " + this.formView.a);
console.log("b - " + this.formView.b);
console.log("items - ");
console.log(this.formView.items);
​ 
```

结果：

```
a -  
b - bcd 
items -  ["halo", "test"] 
```

令人惊讶的是，数组变量 'items' 仍然存在，它同时显示了 ['halo','test']。但不适用于正常变量。

这是 JsFiddle[链接](http://jsfiddle.net/mochatony/2SSVM/8/)。

它可以通过在初始化函数中清除数组来解决。

```
 initialize:function(){
      this.items = [];  
    }, 
```

但我想知道这是一个错误还是我误解了一些东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T11:46:42.087

嗯，这个问题很棘手，但它有一个解释。

首先，在*类上下文中定义**实例变量*不是一个好主意，这就是你正在做的事情：

 *```
var TestView = Backbone.View.extend({
  a: "",
  b: "",
  items: []
}); 
```

这是[Model.defaults](http://backbonejs.org/#Model-defaults)存在的原因之一。你宁愿这样做：

```
var TestView = Backbone.View.extend({
  initialize: function(){
    this.a = "";
    this.b = "";
    this.items = [];
  }
}); 
```

您的示例代码中发生的情况是，所有新的引用都`TestView`将共享相同的`String`and实例`Array`。这是因为在一个实例中更改 Array 将反映在另一个实例中。

最棘手的事情，你很敏捷地观察到，看起来共享行为并没有发生在字符串上，但实际上它正在发生。

发生的事情是，当您这样做时：

```
this.formView.a = 'abc'; 
```

您不是在*转换*String 实例，而是将其替换为新实例，因此原始 String 实例保持不变。

我想提供一个在一个实例中*操作*String`TestView`并看到更改反映在另一个`TestView`实例中的示例，但我没有找到任何就地操作 String 的[JS String 方法。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String)*

# iphone - iOS canOpenURL：如何在 iPhone 上没有 sim 卡时返回 NO？

> ID：12087939
> 
> 赞同：2
> 
> 时间：2012-08-23T08:45:48.300
> 
> 标签：iphone, objective-c

我使用 UIApplications 的 canOpenURL 来检查设备是否可以使用“tel:”方案拨打电话，但是当应用程序在没有 sim 的 iPhone 上运行时它返回 YES **，**在这种情况下，电话无法拨打电话，但它仍然返回 YES。有没有办法检查iPhone是否真的可以拨打电话？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:51:32.020

要检查 iPhone 是否真的可以拨打电话，请使用以下命令：

```
[[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"tel://"]]; 
```

该方法返回一个 BOOL，因此请检查 YES 或 NO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-03T07:28:17.683

```
[[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"tel://"]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T09:01:49.410

使用[Core Telephony`CTCarrier`](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/CTCarrier/Reference/Reference.html)获取当前运营商。缺少运营商可能意味着没有覆盖范围或缺少 SIM 卡。

# maven-plugin - resin-maven-plugin:4.0.14:run:在 com.caucho.maven.MavenRun 中找不到 setter、adder 或字段以获取“contextRoot”

> ID：12087940
> 
> 赞同：1
> 
> 时间：2012-08-23T08:45:49.530
> 
> 标签：maven-plugin, resin

在 Maven 网络项目中：

当我点击 Plugins->resin:run 控制台有一些错误信息： Failed to execute goal com.caucho:resin-maven-plugin:4.0.14:run (default-cli) on project sohutw-ginkgo-manage-web:无法解析 mojo com.caucho:resin-maven-plugin:4.0.14:run 的配置：在“contextRoot”的 com.caucho.maven.MavenRun 中找不到 setter、adder 或字段 -> [帮助 1]

理念：IntelliJ IDEA

pom.xml 内容是相关代码： `<plugin> <groupId>com.caucho</groupId> <artifactId>resin-maven-plugin</artifactId> <version>4.0.14</version> <configuration> <contextPath>/</contextPath> <port>8080</port> </configuration> </plugin>`

![在此处输入图像描述](../Images/6d673eebb9968cc99fa849ff9e966565.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:48:25.737

它被称为 contextRoot，而不是路径

# mysql - SaveChanges() 上的 KeyNotFoundException

> ID：12087942
> 
> 赞同：0
> 
> 时间：2012-08-23T08:45:57.997
> 
> 标签：mysql, asp.net-mvc-3, visual-studio-2010, entity-framework

好的，所以我正在尝试从表单更新我的数据库中的信息。但是当我调用 db.SaveShanges() 时，我得到了 KeyNotFoundException。我正在使用 MVC3 和 EF 4.1。我使用 Controller->Service->Repositry->EF 设计模式。

调用栈：

```
 at System.Collections.Generic.Dictionary`2.get_Item(TKey key)
   at System.Data.Objects.EntityEntry.UpdateComplexObjectSnapshot(StateManagerMemberMetadata member, Object userObject, Int32 ordinal, Object currentValue)
   at System.Data.Objects.EntityEntry.DetectChangesInProperties(Boolean detectOnlyComplexProperties)
   at System.Data.Objects.ObjectStateManager.DetectChangesInScalarAndComplexProperties(IList`1 entries)
   at System.Data.Objects.ObjectStateManager.DetectChanges()
   at System.Data.Objects.ObjectContext.DetectChanges()
   at System.Data.Entity.Internal.InternalContext.DetectChanges(Boolean force)
   at System.Data.Entity.Internal.InternalContext.GetStateEntries(Func`2 predicate)
   at System.Data.Entity.Internal.InternalContext.GetStateEntries()
   at System.Data.Entity.Infrastructure.DbChangeTracker.Entries()
   at System.Data.Entity.DbContext.GetValidationErrors()
   at System.Data.Entity.Internal.InternalContext.SaveChanges()
   at System.Data.Entity.Internal.LazyInternalContext.SaveChanges()
   at System.Data.Entity.DbContext.SaveChanges() 
```

我的存储库 db 是一个带有 DbSet 的 dbContext，用于我正在使用的模型。

```
public bool Save()
{
    try
    {
        db.SaveChanges();
    }
    catch(Exception e)
    {
        return false;
    }
    return true;
} 
```

调用存储库的我的服务

```
public bool UpdateUserInformationFromSettingsModel(UserSettingsModel model)
{

    int userInfoID = _profile.GetUserInformationID(model.userName);
    UserInformation userInfo = _repository.Get(userInfoID);
    if (userInfo == null)
    {
        return false;
    }
    userInfo.firstName = model.firstName;
    userInfo.lastName = model.lastName;
    userInfo.phone = model.phone;
    userInfo.invoiceReciever = model.invoiceReciever;
    userInfo.invoiceAddress = model.invoiceAddress;
    userInfo.address = model.address;
    userInfo.preferedLanguage = model.preferedLanguage;
    bool saveSuccess = _repository.Save();
    if(!saveSuccess)
    {
        return false;
    }

    return true;
} 
```

我的控制器

```
 [HttpPost]
    public ActionResult Edit(UserSettingsModel model)
    {
        if(ModelState.IsValid)
        {
            if (_userService.UpdateUserInformationFromSettingsModel(model))
            {
                return RedirectToAction("Settings");
            }
            ModelState.AddModelError("", GuiText.editSettingsError);
        }
        return View(model);
    } 
```

用户信息模型

```
public class UserInformation
{
    public int ID { get; set; }
    public string firstName { get; set; }
    public string lastName { get; set; }
    public string phone { get; set; }
    public string invoiceSendOption { get; set; }
    public string invoiceReciever { get; set; }
    public Address invoiceAddress { get; set; }
    public Address address { get; set; }
    public string preferedLanguage { get; set; }
    public string confirmCode { get; set; }
    public UserSiteSettings siteSettings { get; set; }

    public UserInformation()
    {
        firstName = "";
        lastName = "";
        phone = "";
        invoiceSendOption = "";
        invoiceReciever = "";
        invoiceAddress = new Address();
        address = new Address();
        preferedLanguage = "";
        confirmCode = "";
        siteSettings = new UserSiteSettings();
    } 
```

用户设置模型

```
 public class UserSettingsModel
{
    public string userName { get; set; }
    [Display(Name = "name", ResourceType=typeof(GuiText))]
    public string firstName { get; set; }
    public string lastName { get; set; }
    [Display(Name = "phone", ResourceType = typeof(GuiText))]
    public string phone { get; set; }
    [Display(Name = "invoiceInfo", ResourceType = typeof(GuiText))]
    public string invoiceReciever { get; set; }
    public Address invoiceAddress { get; set; }
    [Display(Name = "address", ResourceType = typeof(GuiText))]
    public Address address { get; set; }
    [Display(Name = "prefLang", ResourceType = typeof(GuiText))]
    public string preferedLanguage { get; set; }
    public List<SelectListItem> preferedLanguageList { get; set; } 
```

我已经检查了调试器中的变量，一切似乎都很好。

我正在使用 MySql 连接器 v6.5.4。

所以有人知道问题可能是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:02:09.930

经过几天的挫折和搜索，我发现了问题。我在我的 UserInformation 和 Address 类中使用了自定义的 equals 方法。这导致了问题。现在我已经删除了它并改变了我的单元测试以另一种方式工作。

# html - 元素不在 DIV 内

> ID：12087943
> 
> 赞同：1
> 
> 时间：2012-08-23T08:45:59.267
> 
> 标签：html, css

我正在使用 Smart Report Maker (www.mysqlreports.com) 为 Web 应用程序创建一些基本报告 - 当我将报告包含到我的模板中时，报告菜单的行为非常奇怪，并且不会留在封闭的 DIV 中。奇怪的是表格本身可以，但菜单没有，所以我怀疑这是在 Javascript 中应用于菜单的样式问题。

代码在下面链接到一个文本文件，因为它超过 42000 个字符，所以不允许我粘贴到这里。

有什么想法导致这种情况发生或我该如何解决？

[http://www.dowzell.com/stack/repaudit.txt](http://www.dowzell.com/stack/repaudit.txt)

[这显示了在模板之外的模板 http://www.dowzell.com/stack/img1.jpg](http://www.dowzell.com/stack/img1.jpg)时菜单应如何显示在表格上方

这显示了嵌入 [模板 http://www.dowzell.com/stack/img2.jpg时的实际外观](http://www.dowzell.com/stack/img2.jpg)

这显示了屏幕上的输出代码，显示菜单已移到所有 div 之外，尽管在上面的代码中被放置在 div 内。 [萤火虫 http://www.dowzell.com/stack/img3.jpg](http://www.dowzell.com/stack/img3.jpg)

谢谢杰森

# java - Mockito：调用方法 Aa 时执行 Bb

> ID：12087944
> 
> 赞同：19
> 
> 时间：2012-08-23T08:45:59.760
> 
> 标签：java, unit-testing, junit, junit4, mockito

我正在使用 Mockito 进行 JUnit 测试。因此，我要测试的代码中使用了一个给定的 A 类：

```
class A{

    public A(){}

    public final String a(String x){
        return "A.a: " + x;
    }

} 
```

我想用另一个具有相同参数和相同类型返回值的方法调用替换方法调用 Aa。如您所见，不可能通过扩展类来覆盖方法 a，因为它是最终的。所以我现在拥有的是另一个具有方法 Bb 的 B 类：

```
class B{

    public B(){}

    public String b(String x){
        return "B.b: " + x;
    }

} 
```

现在我想确保每次从代码中调用 Aa 时，都使用 Bb 的返回值。在不知道 x 的值的情况下，是否有可能使用 Mockito（类似`Mockito.when(A.a(x)).thenReturn(B.b(x));`）但使用相同的参数 x 来实现这一点？

任何帮助将不胜感激，在此先感谢您！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-23T09:30:23.190

好吧，mockito 模拟通过扩展类和覆盖方法来工作，在你的情况下，这是不可能的`A.a(String)`。如果你想让这种情况发生，你必须删除 final 修饰符。

现在假设`A.a(String)`不是最终的，你所问的对 mockito 来说是完全可行的：

```
given(mockA.a(anyString()).willAnswer(returnOfB(bInstance));

Answer<String> returnOfB(final B bInstance) {
    return new Answer<String>() {
         public String answer(Invocation invocation) {
             String arg = (String) invocation.getActualArguments()[0];
             return bInstance.b(arg);
         }
    };
} 
```

请注意，这个答案是写在手机上的，可能有拼写错误或名称错误，但您应该知道应该做什么才能实现您想要的。

干杯

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T09:27:48.313

[根据Mockito 限制](http://code.google.com/p/mockito/wiki/FAQ#What_are_the_limitations_of_Mockito)，无法覆盖 Mockito 生成的模拟的最终方法。但是您可以使用[Powermock](http://code.google.com/p/powermock/)在运行时破解代码，以便 Mockito 可以完成它的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T09:30:47.733

基本上我接受了你的设置并用它编写了一个单元测试。首先弹出的是一条错误消息，明确说明了这一点：

org.mockito.exceptions.misusing.MissingMethodInvocationException: when() 需要一个参数，该参数必须是“模拟方法调用”。

后来在跟踪中它指出“你存根：final/private/equals()/hashCode() 方法。这些方法*不能*被存根/验证。”

所以根据 Mockito 你不能存根 final 方法，就是这样。

编辑：因此，您必须删除 final 修饰符，或者，如果您坚持使用此类，请找到另一种解决方法。

# git - Git：git如何记住每个分支的索引？

> ID：12087946
> 
> 赞同：7
> 
> 时间：2012-08-23T08:46:06.000
> 
> 标签：git, git-index

例如，我在 repo 中创建文件 a（假设我在 master 分支上），然后我`git add a`和`git commit`. 之后我`git branch copy`和`git checkout copy`. 最后我在 word 目录中创建文件 b 然后`git add b`。

当我结帐回到主分支时，Git 似乎很聪明，并且`git ls-files`文件 b 没有列出。

所以我很困惑，因为我们`index`在一个 repo 中只有一个文件，git 如何同时为分支维护不同的暂存区域？

编辑：

如何解释暂存但未提交的文件，每个分支仍会记住？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T08:54:40.763

我没有详细研究实现，但是当您切换分支时，索引文件会手动更新以反映新的`HEAD`.

例如，我必须在这里`master`（有一个文件）和`test`（有两个文件）进行分支。

```
noufal@sanitarium% git branch
  master
* test
noufal@sanitarium% file .git/index
.git/index: Git index, version 2, 2 entries
noufal@sanitarium% git checkout master
Switched to branch 'master'
noufal@sanitarium% file .git/index
.git/index: Git index, version 2, 1 entries 
```

当分支切换发生时，它改变了索引。

此外，如果您“手动”切换分支，git 不会更新索引并且会感到困惑。从上面继续。

```
noufal@sanitarium% more .git/HEAD
ref: refs/heads/master
noufal@sanitarium% echo "ref: refs/heads/test" > .git/HEAD
noufal@sanitarium% file .git/index
.git/index: Git index, version 2, 1 entries
noufal@sanitarium% git status
# On branch test
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#       deleted:    b
# 
```

换句话说，索引有一个丢失的文件，该文件位于当前存储库中，因此它“暂存于删除”。

至于分期后切换分支，索引是一个单独的区域，不会改变。

```
noufal@sanitarium% git branch
* master
  test
noufal@sanitarium% ls
x
noufal@sanitarium% git status
# On branch master 
nothing to commit (working directory clean)
noufal@sanitarium% git checkout test
Switched to branch 'test'
noufal@sanitarium% ls
x
noufal@sanitarium% echo "Something" > b
noufal@sanitarium% git add b
noufal@sanitarium% git status
# On branch test   
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#       new file:   b
#
noufal@sanitarium% git checkout master
A       b
Switched to branch 'master'
noufal@sanitarium% git status                    # Also there in index on master branch.
# On branch master 
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#       new file:   b
#
noufal@sanitarium% git commit -m "Added b in master"
[master 41d0c68] Added b in master
 1 file changed, 1 insertion(+)
 create mode 100644 b
noufal@sanitarium% git status
# On branch master 
nothing to commit (working directory clean)
noufal@sanitarium% git checkout test
Switched to branch 'test'
noufal@sanitarium% ls                           # Missing in the test branch although it was `git add`ed here. 
x
noufal@sanitarium% 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T09:03:33.637

为了理解这一点，您需要更深入地研究 git 内部结构。

Git 将各种信息存储为对象。主要有三种对象。

*   **斑点**

    在 git 中存储准确的文件内容。

*   **树**

    存储树结构的信息，可能包含对其他 blob 对象和树对象的引用。

*   **犯罪**

    存储有关提交的信息，包含对树对象的引用和其他信息，例如作者、提交者、提交消息等。

索引文件实际上是一个树对象，它提供有关当前工作树的信息。

每个对象都由其内容的唯一 sha1 哈希标识。在`.git/refs`或 中`.git/packed_refs`，git 保存了分支和它指向的提交对象的 sha1 哈希之间的关系。

每次签出新分支时，git 只需根据与该分支的提交关联的树对象提取文件并生成新的索引文件。

[Git Internals](http://git-scm.com/book/en/Git-Internals)可以提供帮助。

# java - 测试 APK 无法从主 APK 解析/加载类 ~ 无法加载类 'android.support.v4.os.ParcelableCompatCreatorHoneycombMR2'

> ID：12087948
> 
> 赞同：2
> 
> 时间：2012-08-23T08:46:07.887
> 
> 标签：java, android, maven

我在使用 android maven 插件执行仪器测试时遇到问题。我已经按照“libraryprojects”示例进行到最后一个细节，但是，我的设置有一点不同~我将 android 支持 jar 添加为外部依赖项。

我的设置如下所示：

*   APK lib项目（具体为greendroid）

    ```
    <dependency>
      <groupId>com.google.android</groupId>
      <artifactId>support-v4</artifactId>
      <version>r6</version>
    </dependency>        

    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android</artifactId>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <scope>test</scope>
    </dependency> 
    ```

*   APK 项目

    ```
    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android</artifactId>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>greendroid</groupId>
        <artifactId>GreenDroidFragment</artifactId>
        <version>1.0.0-SNAPSHOT</version>   
        <type>apklib</type>                 
    </dependency> 
    ```

*   APK 测试项目（这就是问题所在....）

    ```
    <dependency>
          <groupId>com.google.android</groupId>
          <artifactId>support-v4</artifactId>
          <version>r6</version>
                      <scope>provided</scope>
    </dependency>                   
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android-test</artifactId>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>com.jayway.android.robotium</groupId>
            <artifactId>robotium-solo</artifactId>
            <version>3.2.1</version>
        </dependency>

        <dependency>
            <groupId>com.**</groupId>
            <artifactId>**</artifactId>
            <version>1.0.0-SNAPSHOT</version>
            <type>apk</type>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>com.**</groupId>
            <artifactId>**</artifactId>
            <version>1.0.0-SNAPSHOT</version>
            <type>jar</type>
            <scope>provided</scope>
        </dependency> 
    ```

问题是 delvik 在运行仪器测试时无法找到或链接支持 jar。

我的问题是，**我如何告诉 delvik 将测试 APK 中所需的文件与主应用程序 APK 进行对比**？从理论上讲，**将所需依赖项（android-support jar）的范围设置为在测试 APK 中提供应该可以工作，但不能**。

以下是我尝试过的一些场景：

*   通过将 android 支持 jar 打包为 APK 测试项目的一部分，delvik 抱怨它无法解析已编译的代码。这是因为主 APK 的 dex 输出与测试 APK 的 dex 输出不同。

    ```
    W/dalvikvm(328): Class resolved by unexpected DEX:      
    Lcom/**/android/**/GenerateOtpFragment;(0x44edffb0):0x121de0 ref   
    [Landroid/support/v4/app/Fragment;] Landroid/support/v4/app/Fragment;(0x44edffb0) 
    ```

*   由于没有将 android 支持打包为 APK 测试项目的一部分，delvik 无法找到已编译的代码。这发生在提供范围或完全排除依赖项时。

    ```
    W/ClassPathPackageInfoSource(632): Cannot load class. Make sure it is in your apk.
    Class name: 'android.support.v4.os.ParcelableCompatCreatorHoneycombMR2'. 
    Message: android.support.v4.os.ParcelableCompatCreatorHoneycombMR2 
    ```

我唯一能想到的就是以某种方式手动告诉 APK 测试项目使用 delvik 链接机制解决来自主 APK 项目的 android-support 依赖项。

任何想法将不胜感激，-迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-03T15:53:08.790

我不确定，但我怀疑这可能是一种解释：

[仪器测试扫描apk ...不是问题](https://groups.google.com/forum/#!topic/android-test-kit-discuss/fXrT6is9Hw8)

# icons - 是否可以更改 Visual Studio 2012 中的图标？

> ID：12087949
> 
> 赞同：96
> 
> 时间：2012-08-23T08:46:08.707
> 
> 标签：icons, visual-studio-2012, solution-explorer

有没有办法用**VS2010的图标替换****VS2012**解决方案资源管理器的图标？至少“文件夹”图标:(

 *** * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-03T08:05:53.000

**这是我安装的 VS2012 的照片，**它几乎看起来像我们都习惯的熟悉的 2010。这让我感觉又正常了！

![在此处输入图像描述](../Images/2efd3f8af994e03432ecbcfdb2fb324d.png)

这正是我如何一步一步地做到这一点的：

1) 关闭 Visual Studio 的所有实例

2)**下载[vsip](http://vsip.codeplex.com/)**并将其解压缩到临时目录。（截至 2013 年 1 月 3 日，当前版本为 1.5.2）

3）使用“以管理员身份运行”**打开命令提示符**

4) 转到临时目录并**运行 VSIP.exe** - 这将运行一个接受命令的交互式程序。
  4a) 键入“ **backup --version=2012** ” - 这将备份您所有的 VS2012 UI dll，以防万一出现问题并且您想卸载 VSIP。
  4b) 键入“ **extract** ” - 这将从您安装的 VS2010 中提取所有旧图标（根据 VS2010 许可证，VSIP 无法分发这些图标，因此我们必须进行本地安装才能从中提取它们）。
  4c) 键入“ **inject** ” - 这会将上一步中的所有旧 2010 图标注入 VS2012 DLL。
  4d) 输入“**菜单 -n** ”

5)**下载并安装[NiceVS](http://sourceforge.net/projects/nicevs/files/)** - 不要下载日期为 10/14 的版本，否则您将丢失图标。截至 2013 年 1 月 3 日，我下载了名为*"NiceVS.0.8.1.1 Beta.Full.vsix"*的文件。

6)**下载并安装[VS2012 颜色主题编辑器](http://visualstudiogallery.msdn.microsoft.com/366ad100-0003-4c9a-81a8-337d4e7ace05)**- 下次启动 VS2012 时，从颜色选择窗口中选择“蓝色”主题。

现在你应该有一个很好的 VS2012 安装，看起来像我上面的屏幕截图！需要三个不同的应用程序来修补这个可怕的 UI，但现在它肯定是可行的！如果您没有将 VS2010 与 VS2012 安装在同一台机器上，那么您必须在装有 VS2010 的机器上运行步骤 4b，然后将 VSIP Images 目录复制到您的 2012 开发机器上。

**更新：如果您在运行这些步骤***后*安装“VS 2012 Update 1” ，您将需要从 VSIP 管理员提示符重新运行步骤 4c（如果您没有保留 VS2010 图像的提取，则需要重新运行步骤 4）。文件菜单图标和配色方案保持不变，但更新将解决方案资源管理器中的图标恢复为丑陋的图标。重新运行 VSIP 注入可以立即修复它！

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-09-02T03:30:51.383

**简短答案：** 将旧图标破解到 2012 年。

Visual Studio 图标修补程序 - [http://vsip.codeplex.com](http://vsip.codeplex.com)

**长答案：** 目前，使用插件执行此操作是不可能的。我一直无法找到任何内置的方法来实现这一点，并且切换到 WPF 使得破解变得更加困难。

这个应用程序只是从 Visual Studio 2010 中的非托管 DLL 中提取图像资源，并将它们注入到 Visual Studio 2012 的 DLL 中。托管资源要复杂得多，并且尚未添加，尽管我已经得到了一些工作.

由于在检测到深色背景颜色时图标颜色如何反转，初始版本不适用于具有深色树视图背景颜色的主题。这在最新版本中变得更糟，因为现在包含菜单和工具栏图标。我正在使用[蓝色主题](http://visualstudiogallery.msdn.microsoft.com/366ad100-0003-4c9a-81a8-337d4e7ace05)运行它，它看起来不错。

破解图标反转的一种方法是编辑所有提取的图像，在图像映射中每个图标的右上角添加一个青色像素。这会将它们排除在反转过程之外。不过我还没有尝试过，因为我很早就在处理无法正确显示的图像时遇到了问题。您可以尝试一下，但这将是相当手动且耗时的，甚至可能无法正常工作。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-31T08:12:18.137

看看这个线程： [解决方案资源管理器 - 我的文件夹的自定义图标](https://stackoverflow.com/questions/6593274/solution-explorer-custom-icons-for-my-folders)

我认为它也适用于vs2012

如果没有 -> 您可以使用 ResHack（或 Resource Hacker）手动查找解决方案资源管理器的图标资源并简单地替换它！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-19T16:00:26.680

这是解决方案：

**Visual Studio 图标修补程序** [http://vsip.codeplex.com/](http://vsip.codeplex.com/)

来自 VSIP 网页的说明：

> 项目描述 Visual Studio Icon Patcher 允许您使用 Visual Studio 2010 中的图标更新 Visual Studio 2012。
> 
> 除非有人能找到通过插件更改图标的方法，否则更改图标的唯一方法是通过资源修补 Visual Studio 使用的 DLL。有许多托管和非托管 DLL 包含用于设置应用程序样式的位图和 PNG。目前只有非托管 DLL 是此过程的一部分，托管 DLL 有望很快推出。
> 
> 此项目不分发任何图像。您需要同时安装 Visual Studio 2010 和 2012 才能使用它。

***更新***
我刚刚使用**[Visual Studio 2012 Update 2](http://www.microsoft.com/en-us/download/details.aspx?id=38188)**[测试了VSIP](http://vsip.codeplex.com/)，它可以完美运行 :-)**

# c# - MVC + 在条件下返回不同的 PartialView

> ID：12087951
> 
> 赞同：0
> 
> 时间：2012-08-23T08:46:14.410
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-partialview

不确定这是否是 MVC 中的最佳方法，但我如何在有条件的情况下返回视图，假设如果我的“fbUID”丢失，我是否想返回另一个显示一些错误消息的视图，请提供帮助。谢谢。

```
public PartialViewResult GetCredentials(string facebookUID, string facebookAccessTok)
{
    string fbUID = facebookUID;

    if (fbUID != null)
    {
        // Request fb profile pic
        var rawImg = new Bitmap(ImageHelper.requestBitmapImage(fbUID));
        var processblurredImg = new Bitmap(rawImg);

        var gb = new GaussianBlur();

        for (int i = 0; i < 8; i++)
        {
            gb.ApplyInPlace(processblurredImg);
        }

        // Download it to local drive / server
        string uploadPath = Server.MapPath("~/upload");
        string fullPath = uploadPath + "\\ProfilePic.png";

        if (!Directory.Exists(uploadPath))
        {
            Directory.CreateDirectory(uploadPath);
        }
        if (uploadPath != null)
        {
            ImageHelper.savePng(fullPath, processblurredImg, 500L);
        }

        return PartialView("BlurredPhoto");
    }
    return PartialView("TestPartialView"); //if fbUID is null
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:52:44.333

看看动作过滤器。这些允许您通过控制器方法上的属性安装一个类，该属性在您的方法运行之前拦截调用。您可以在此处进行此类基本检查并从此处返回标准错误处理程序结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:03:44.923

ASP.NET MVC 具有内置功能`HandleErrorFilterAttribute`，可帮助您在操作或其他过滤器中发生某些错误时返回错误视图。内置`HandleError`过滤器返回视图而不是局部视图，因此您可能必须创建自定义过滤器才能返回局部视图。这个想法是，如果为 null，则您必须从您的操作中抛出一些自定义异常，`fbUID`并且自定义句柄错误过滤器在处理该异常时返回部分视图。

我建议仅当您在许多地方看到此功能时才使用自定义句柄错误过滤器方法，否则对于简单的事情来说它的工作量更大！

# android - 蓝牙文件夹，不同手机路径不同

> ID：12087952
> 
> 赞同：3
> 
> 时间：2012-08-23T08:46:15.263
> 
> 标签：android, bluetooth

我发现不同版本的android将接收到的蓝牙文件放在不同的文件夹中。例如，我正在运行的一部测试手机`android 2.2`将文件保存到此路径：

```
/mnt/sdcard/Downloads/Bluetooth 
```

和我的第二部测试手机，运行`android 4.0`将文件保存在这里

```
/mnt/sdcard/Bluetooth 
```

这个操作系统是“问题”还是手机制造商设置的？

如果第一个语句是正确的，我可以检查哪个版本的 android 运行，以及指向蓝牙文件夹吗？还是有更简单的方法来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T14:20:39.133

几个小时后，我做了两种方法来做到这一点。您应该将方法放在 a`AsyncTask`或 a`Thread`中。所以这是我的两种方法：

```
public List<File> folderSearchBT(File src, String folder)
        throws FileNotFoundException {

    List<File> result = new ArrayList<File>();

    File[] filesAndDirs = src.listFiles();
    List<File> filesDirs = Arrays.asList(filesAndDirs);

    for (File file : filesDirs) {
        result.add(file); // always add, even if directory
        if (!file.isFile()) {
            List<File> deeperList = folderSearchBT(file, folder);
            result.addAll(deeperList);
        }
    }
    return result;
} 
```

这是一种递归方法，它将`src`参数中的所有文件夹添加到列表中。

我在此方法中使用此方法：

```
public String searchForBluetoothFolder() {

    String splitchar = "/";
    File root = Environment.getExternalStorageDirectory();
    List<File> btFolder = null;
    String bt = "bluetooth";
    try {
        btFolder = folderSearchBT(root, bt);
    } catch (FileNotFoundException e) {
        Log.e("FILE: ", e.getMessage());
    }

    for (int i = 0; i < btFolder.size(); i++) {

        String g = btFolder.get(i).toString();

        String[] subf = g.split(splitchar);

        String s = subf[subf.length - 1].toUpperCase();

        boolean equals = s.equalsIgnoreCase(bt);

        if (equals)
            return g;
    }
    return null; // not found
} 
```

希望这会有所帮助，伙计们！

# jquery - 带有blueimp jquery文件上传的自定义文件上传按钮

> ID：12087954
> 
> 赞同：4
> 
> 时间：2012-08-23T08:46:16.083
> 
> 标签：jquery, file-upload, blueimp

我正在努力使用 jquery 文件上传插件，只要我在输入字段中选择文件，就会上传我的文件。

我想要一个上传文件的自定义提交按钮..

我怎样才能做到这一点？

标记：

```
<span>Add File</span>
<input id="fileupload" type="file" multiple="" data-url="upload.ashx" name="files[]" />

<label for="file_name">Name:</label>
<input type="text" name="file_name" id="file_name" />

<input type="button" id="uploadFileBtn" value="Upload" /> 
```

Javascript：

```
$('#fileupload').fileupload(
{
dataType: 'json',
done: function (e, data) {
    alert("success");                               
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T09:37:42.147

**解决方案**

fileupload 有一个 ADD 事件，一旦选择文件就会触发。我在 ADD 事件中编写了单击事件，从而覆盖了默认行为。

经过测试，它按预期工作。

**解决方案 2 - Jquery 表单插件**

经过一番研究，我找到了一种更好的方法来处理 ajax 文件上传。我正在使用位于以下位置的 Jquery 表单插件： http: [//www.malsup.com/jquery/form/](http://www.malsup.com/jquery/form/)

它的工作方式与常规表单一样，可以处理文件输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-03T17:47:42.650

您可以通过挂钩*添加*事件来做到这一点。在那里，您可以阻止上传者执行其默认行为。*jquery-file-upload* -docs 解释了这一点，但有点难找。

以下内容写在[blueimp 基本上传器教程](https://github.com/blueimp/jQuery-File-Upload/wiki/Basic-plugin#how-to-start-uploads-with-a-button-click)中：

```
$(function () {
    $('#fileupload').fileupload({
        dataType: 'json',
        add: function (e, data) {
            data.context = $('<button/>').text('Upload')
                .appendTo(document.body)
                .click(function () {
                    data.context = $('<p/>').text('Uploading...').replaceAll($(this));
                    data.submit();
                });
        },
        done: function (e, data) {
            data.context.text('Upload finished.');
        }
    });
}); 
```

实际上非常重要的是，您创建的提交按钮不在表单内！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T17:36:07.057

您的输入是否在同一个表单中？

更改您的代码：

```
<form id="fileupload" action="someAction" method="POST" enctype="multipart/form-data">
    <span>Add files</span>
    <input type="file" name="files[]" multiple>
    <button type="submit" class="btn btn-primary start">
        <span>Start upload</span>
    </button>
</form> 
```

# visual-studio - VS2012 下的单元测试失败：CollectionViewSource.GetDefaultView 返回 null

> ID：12087956
> 
> 赞同：0
> 
> 时间：2012-08-23T08:46:20.373
> 
> 标签：visual-studio, unit-testing, mstest, collectionviewsource

我最近尝试将解决方案从 VS2010 升级到 VS2012，作为其中的一部分，我引入了新的[.runsettings 文件](http://msdn.microsoft.com/en-us/library/jj159530.aspx)来生成代码覆盖率结果。

为了指定运行设置文件，我不得不取消选择在 VS2010 中工作的 .testsettings 文件。一旦我这样做并运行我的测试，它们中的大量开始失败，因为该`CollectionViewSource.GetDefaultView`方法返回 null 而不是预期的默认视图。

如果我重新选择旧的 .testsettings 文件，那么我的测试全部通过，但代码覆盖率设置不正确。

有没有其他人在升级时遇到过类似的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:41:37.580

我找出了问题所在：其中一个单元测试是手动重新启动，`Dispatcher`作为一些清理的一部分，并且在 VS2010 中运行良好，但在 VS2012 中运行良好。

我想这对于一个解决方案来说非常具体，但它可能会为任何发现它的人提供线索。

# c# - 日历事件，将事件放在行上

> ID：12087957
> 
> 赞同：1
> 
> 时间：2012-08-23T08:46:28.150
> 
> 标签：c#, asp.net-mvc, razor, calendar

我正在尝试创建一个包含事件的日历。我的麻烦是如何正确放置事件。

这是它的样子： ![](../Images/7549b2be6a44085297c24ef1c1df1a75.png)

这就是我想要的样子： ![在此处输入图像描述](../Images/7bfcc54dc008d88df3f07c5e28612129.png)

```
 @foreach (var item in Model.CalendarEventList.Where(q => q.CalendarEvent.Startdate.Date <= startDate.Date && q.CalendarEvent.Enddate.Date >= startDate.Date).ToList())
            {
                <div style="background-color: #bed4e6; border: 1px solid #000; font-size: 10px; margin-bottom: 2px;">
                    @item.CalendarEvent.Text
                </div>
            } 
```

我的 eventList 有 4 个事件，A、B、C 和 D，我的 startdate 是 currentDate。

每个事件类都有一个开始日期、结束日期和文本。

有谁知道我如何重写我的循环以正确放置事件？

提前致谢！

# javascript - 将 MongoDB 服务器数据同步到 IndexedDB 本地存储

> ID：12087958
> 
> 赞同：22
> 
> 时间：2012-08-23T08:46:35.117
> 
> 标签：javascript, mongodb, indexeddb

我正在尝试评估使用 IndexedDB 解决离线问题。它将填充当前存储在 MongoDB 数据库中的数据（按原样）。

一旦数据存储在 IndexedDB 中，它可能会在 MongoDB 服务器上发生更改，我需要传播这些更改。是否有任何现有的框架或库可以**为 Mongo**做这样的事情。我已经知道 CouchDB/PouchDB 并且没有探索这两个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2021-03-18T20:07:18.987

[ **2021 年同步解决方案**]

我知道所问的问题是专门针对 MongoDB 的，但由于这是一个旧线程，我认为读者可能正在为新应用程序或重建寻找其他解决方案。我真的可以推荐查看[AceBase](https://www.npmjs.com/package/acebase)，因为它完全符合您当时的要求。

AceBase 是一个免费和开源的实时数据库，可以在浏览器和服务器数据库之间轻松存储和同步。它在浏览器中使用 IndexedDB，在服务器上使用自己的二进制 db / SQL Server / SQLite 存储。离线编辑在重新连接时同步，客户端通过 websocket（FAST！）实时通知远程数据库更改。

最重要的是，AceBase 有一个称为“实时数据代理”的独特功能，它允许您对内存中对象的所有更改进行持久化并同步到本地和服务器数据库，以及远程更改以自动更新您的内存中对象. 这意味着您可以完全忘记数据库编码，并像只使用本地对象一样进行编码。无论您是在线还是离线。

以下示例展示了如何在浏览器中创建本地 IndexedDB 数据库，如何连接到与本地数据库同步的远程数据库服务器，以及如何创建实时数据代理以消除进一步的数据库编码。AceBase 也支持身份验证和授权，但为了简单起见，我省略了它。

```
const { AceBaseClient } = require('acebase-client');
const { AceBase } = require('acebase');

// Create local database with IndexedDB storage:
const cacheDb = AceBase.WithIndexedDB('mydb-local');

// Connect to server database, use local db for offline storage:
const db = new AceBaseClient({ dbname: 'mydb', host: 'db.myproject.com', port: 443, https: true, cache: { db: cacheDb } });

// Wait for remote database to be connected, or ready to use when offline:
db.ready(async () => {

    // Create live data proxy for a chat:
    const emptyChat = { title: 'New chat', messages: {} };
    const proxy = await db.ref('chats/chatid1').proxy(emptyChat);  // Use emptyChat if chat node doesn't exist

    // Get object reference containing live data:
    const chat = proxy.value;

    // Update chat's properties to save to local database, 
    // sync to server AND all other clients monitoring this chat in realtime:
    chat.title = `Changing the title`;
    chat.messages.push({ 
        from: 'ewout', 
        sent: new Date(),
        text: `Sending a message that is stored in the database and synced automatically was never this easy!` +
              `This message might have been sent while we were offline. Who knows!`
    });

    // To monitor and handle realtime changes to the chat:
    chat.onChanged((val, prev, isRemoteChange, context) => {
        if (val.title !== prev.title) { 
            alert(`Chat title changed to ${val.title} by ${isRemoteChange ? 'us' : 'someone else'}`); 
        }
    });
}); 
```

有关更多示例和文档，请参阅npmjs.com上的 AceBase[实时数据库引擎](https://www.npmjs.com/package/acebase)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-16T23:38:20.677

Open up a [changeStream](https://docs.mongodb.com/manual/changeStreams/) with the resumeToken. There's no guarantee of causal consistency however since we're talking multiple disparate databases.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T10:02:51.003

我没有使用过 IndexDB，但设计问题并不少见。我对您的应用程序的理解是，当客户端与 MongoDB 建立连接时，您将一组文档拉下来用于本地存储并断开连接。客户端然后可以在本地做事（不连接到数据服务器），然后推送更改。

在我看来，您必须处理两种一般情况：

1.  当 MongoDB 服务器更新并中断与客户端的连续性时，客户端将不得不
    1.  轮询数据（计时器？）或
    2.  保持 websocket 打开，让通知在管道上自由流动
2.  当用户需要将更改的数据推送回管道时
    1.  您可以异步重新连接，检查状态更改，（根据您的业务规则解决冲突）
    2.  有一个用于处理冲突的服务器端（轻量级）接口（取决于您的应用程序的复杂性，将 MongoDB 中状态更改的时间戳与 IndexedDB 更新进行比较就足够了）

# java - Junit - 运行一次设置方法

> ID：12087959
> 
> 赞同：131
> 
> 时间：2012-08-23T08:46:38.350
> 
> 标签：java, junit

我设置了一个带有几个测试的类，而不是使用`@Before`我想要一个在所有测试之前只执行一次的设置方法。Junit 4.8有可能吗？

* * *

## 回答 #1

> 赞同：220
> 
> 时间：2012-08-23T08:57:01.650

尽管我同意@assylias 的观点，使用`@BeforeClass`是一个经典的解决方案，但并不总是很方便。带有注解的方法`@BeforeClass`必须是静态的。对于一些需要测试用例实例的测试来说非常不方便。例如，基于 Spring 的测试用于`@Autowired`处理在 Spring 上下文中定义的服务。

在这种情况下，我个人使用带有注释的常规`setUp()`方法`@Before`并管理我的自定义`static`（！） `boolean`标志：

```
private static boolean setUpIsDone = false;
.....
@Before
public void setUp() {
    if (setUpIsDone) {
        return;
    }
    // do the setup
    setUpIsDone = true;
} 
```

* * *

## 回答 #2

> 赞同：94
> 
> 时间：2012-08-23T08:47:33.573

您可以[使用`BeforeClass`注释](http://kentbeck.github.com/junit/javadoc/4.8/)：

```
@BeforeClass
public static void setUpClass() {
    //executed only once, before the first test
} 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2016-03-17T01:56:33.380

JUnit 5 现在有一个 @BeforeAll 注释：

> 表示注解的方法应该在当前类或类层次结构中的所有@Test 方法之前执行；类似于 JUnit 4 的 @BeforeClass。此类方法必须是静态的。

JUnit 5 的生命周期注释似乎终于搞定了！您甚至无需查看即可猜出可用的注释（例如@BeforeEach @AfterAll）

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-06-29T13:36:58.677

当`setUp()`在测试类的超类中时（例如`AbstractTestBase`下面），接受的答案可以修改如下：

```
public abstract class AbstractTestBase {
    private static Class<? extends AbstractTestBase> testClass;
    .....
    public void setUp() {
        if (this.getClass().equals(testClass)) {
            return;
        }

        // do the setup - once per concrete test class
        .....
        testClass = this.getClass();
    }
} 
```

这应该适用于单个非静态方法，但如果不误入复杂反射的世界，`setUp()`我无法生成等效方法......赏金指向任何可以的人！`tearDown()`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-02-08T11:49:20.933

***编辑：*** 我刚刚在调试时发现该类也在每次测试之前实例化。我猜@BeforeClass 注释在这里是最好的。

你也可以在构造函数上设置，测试类毕竟**是一个类。**我不确定这是否是一种不好的做法，因为几乎所有其他方法都已注释，但它确实有效。你可以像这样创建一个构造函数：

```
public UT () {
    // initialize once here
}
@Test
// Some test here... 
```

ctor 将在测试之前被调用，因为它们不是静态的。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-02-03T12:43:16.060

使用 Spring 的 @PostConstruct 方法完成所有初始化工作，并且此方法在任何 @Test 执行之前运行

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-11-26T08:40:46.747

JUnit 5 @BeforeAll 可以是非静态的，前提是测试类的生命周期是每个类的，即用 a 注释测试类，`@TestInstance(Lifecycle.PER_CLASS)`你就可以开始了

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-09-18T08:43:39.680

试试这个解决方案： [https](https://stackoverflow.com/a/46274919/907576) ://stackoverflow.com/a/46274919/907576 ：

使用`@BeforeAllMethods`/`@AfterAllMethods`注释，您可以在实例上下文中执行 Test 类中的任何方法，其中所有注入的值都可用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-03-08T09:08:30.673

我的肮脏解决方案是：

```
public class TestCaseExtended extends TestCase {

    private boolean isInitialized = false;
    private int serId;

    @Override
    public void setUp() throws Exception {
        super.setUp();
        if(!isInitialized) {
            loadSaveNewSerId();
            emptyTestResultsDirectory();
            isInitialized = true;
        }
    }

   ...

} 
```

我用它作为我所有测试用例的基础。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-10-17T10:04:53.593

如果您不想强制声明在每个子测试上设置和检查的变量，则将其添加到 SuperTest 可以执行以下操作：

```
public abstract class SuperTest {

    private static final ConcurrentHashMap<Class, Boolean> INITIALIZED = new ConcurrentHashMap<>();
    protected final boolean initialized() {
        final boolean[] absent = {false};
        INITIALIZED.computeIfAbsent(this.getClass(), (klass)-> {
            return absent[0] = true;
        });
        return !absent[0];
    }
}

public class SubTest extends SuperTest {
    @Before
    public void before() {
        if ( super.initialized() ) return;

         ... magic ... 
    }

} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-06-01T10:49:33.830

我这样解决了这个问题：

添加到您的**Base**抽象类（我的意思是您在*setUpDriver()*方法中初始化驱动程序的抽象类）这部分代码：

```
private static boolean started = false;
static{
    if (!started) {
        started = true;
        try {
            setUpDriver();  //method where you initialize your driver
        } catch (MalformedURLException e) {
        }
    }
} 
```

现在，如果您的测试类将从**Base**抽象类扩展 -> *setUpDriver()*方法将在第一次 @Test 之前执行，每次运行仅**一次。**

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-04-15T00:53:52.203

经过一段时间的试验，这是我的解决方案。我需要这个进行春季启动测试。我尝试使用@PostConstruct，不幸的是它为每个测试执行。

```
public class TestClass {
    private static TestClass testClass = null;
    @Before
    public void setUp() {
        if (testClass == null) {
            // set up once
            ...
            testClass = this;
        }
    }
    @AfterClass
    public static void cleanUpAfterAll() {
        testClass.cleanUpAfterAllTests();
    }
    private void cleanUpAfterAllTests() {
        // final cleanup after all tests
        ...
    }
    @Test
    public void test1() {
        // test 1
        ...
    }
    @Test
    public void test2() {
        // test 2
        ...
    }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-08-03T12:46:40.243

这是另一种建议：

我要做的是创建一个名为 _warmup 的方法，或者只是 _ 使用 @FixMethodOrder(MethodSorters.NAME_ASCENDING) 注释测试类

这仅适用于您运行类中的所有测试

它有一个包含额外测试的缺点，它还将运行一个额外的 @Before 和 @After 通常建议您的测试方法是顺序独立的，这违反了该规则，但是为什么有人希望在报告中随机排序测试我不知道所以 NAME_ASCENDING 是我一直使用的

但是这样做的好处是使用最少的代码进行简单的设置，并且不需要扩展类/运行器等......测试运行长度更准确，因为所有设置时间都在方法 _warmup 上报告

# java - 小程序 isShowing() 与框架 isShowing()

> ID：12087969
> 
> 赞同：1
> 
> 时间：2012-08-23T08:47:17.747
> 
> 标签：java, applet, awt, frame

我正在尝试复制最初扩展 Applet 类的代码。但是下面的代码对于 a 总是正确的`Frame`。我知道如果 Frame也为真，那`isShowing()`将始终返回真。`isVisible()`除非`setVisible()`显式设置为 false，`isShowing()`否则将返回 true。

我的目标是在应用程序框架最小化时暂停守护线程循环。

```
public class Screen extends Applet{

@Override
public void init() {

    addComponentListener(new ComponentAdapter() {

        @Override
        public void componentShown(ComponentEvent e) {
            //do stuff

        }

        @Override
        public void componentHidden(ComponentEvent e) {
            //Stop doing stuff
        }       
    });
} 
```

实施建议（鲍里斯·帕夫洛维奇）

```
public class Screen extends Frame implements Runnable{

private boolean runL;
private Thread thread;

public Screen() {
    setSize(256,256);
    setVisible(true);

    addWindowFocusListener(new WindowAdapter() {

        @Override
        public void windowGainedFocus(WindowEvent e) {
            runL = true;
            starThread();
        }

        @Override
        public void windowLostFocus(WindowEvent e) {
            runL = false;
        }

    });

}

@Override
public void run() {
    while(runL){System.out.println("showing");}
}

private void starThread(){
    if(thread == null){
        thread = new Thread(this);
        thread.start();
    } else if(!thread.isAlive()){
        thread = new Thread(this);
        thread.start();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:53:42.330

查看“[如何使用焦点子系统](http://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html)”的教程。`WindowsAdapter`允许覆盖可用于启动/停止计算的不同状态转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:19:50.187

> 我的目标是在应用程序框架最小化时暂停守护线程循环。

添加 a`WindowListener`并在 上停止计算[`windowIconified(WindowEvent)`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/WindowListener.html#windowIconified%28java.awt.event.WindowEvent%29)。

# indexeddb - 获取 IndexedDB 错误

> ID：12087976
> 
> 赞同：0
> 
> 时间：2012-08-23T08:47:33.650
> 
> 标签：indexeddb

每隔第二次或第三次重新加载我正在构建的应用程序时，我都会收到此错误：`Uncaught Error: ConstraintError: DOM IDBDatabase Exception 4`; 并且它没有检索到任何数据，但其他时候它按预期工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:54:23.913

您是否在某处插入数据？

通常约束错误仅在使用相同键插入数据两次或创建索引或对象存储两次时发生。

# asp.net - 带有 Web 服务的移动 Web 应用程序

> ID：12087981
> 
> 赞同：0
> 
> 时间：2012-08-23T08:47:47.910
> 
> 标签：asp.net, asp.net-mvc, jquery, mobile, jquery-mobile

我想用 jquery mobile 和 html5 编写一个移动网络应用程序。是否可以使用 jquery ajax 功能为移动网络应用程序调用 asp.net 网络服务。有没有示例？和 asp.net web forms 或 asp.net mvc 我应该为移动 web 应用程序选择哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:35:44.087

当然，也可以使用 ASP.NET Web 服务。

检查[PhoneGap](http://phonegap.com/)移动平台。PhoneGap 是一个开源框架，用于使用 HTML5、Javascript 和 CSS 快速构建跨平台移动应用程序。

我建议实现一个 JSON Web 服务。

示例：

```
$.ajax({
    type: "POST",
    url: 'http://.../.../Test.asmx/WSMethod',
    data: 'parameter1=' + param1 + '&parameter2=' + param2,
    dataType: "json",
    success: function(data) {    
        // do something
    },
    error: function(err){
        // do something              
    }
}); 
```

上面的示例发布了两个参数，parameter1 和 parameter2。

如果您不想发布任何参数，请使用： data: ''

# safari - Safari 6 总页面大小 (kb)

> ID：12087991
> 
> 赞同：10
> 
> 时间：2012-08-23T08:48:18.070
> 
> 标签：safari, console, size, page-size

由于 Safari 6 的新版本有一个新的开发者控制台。在开发者控制台中，您可以查看时间线、网络请求等。我唯一缺少的是“总页面大小”。

有没有办法再次以 kb 为单位查看整个页面大小，或者 Apple 是否删除了它？非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-21T10:19:44.240

问题已解决，只需使用 Safari 7。它具有您所要求的功能。

# c# - SAP 连接器 3.0 .NET 在表结构上设置值

> ID：12087994
> 
> 赞同：1
> 
> 时间：2012-08-23T08:48:38.417
> 
> 标签：c#, .net, sap, connector, sap-dotnet-connector

我正在尝试通过 MVC3 应用程序上的 SAP 连接器 3.0 从 SAP 获取数据。

连接没有问题。

我的问题是当我尝试从它说的表中设置结构上的值时

> “表 [STRUCTURE ZHRS_ABSENCES]：无法设置值（存储元素值的数组为空）”

我的代码如下：

```
//create function    
IRfcFunction function = conex.Repository
                        .CreateFunction("Z_HR_PORTAL_GET_EMPLOYEE_DATA");

//get table from function
IRfcTable absenceHoli = function.GetTable("P_ABSENCES");

//setting value to structure
absenceHoli.SetValue(0, "0000483"); //this is where the error occurs 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T09:10:39.847

我不确定您使用的连接器，但在使用 JCo 时也存在类似的常见误解。一个表参数可以包含多行。您通常必须在表格中添加一行。这可能会返回某种您可以填充的结构。[还要检查这个答案。](https://stackoverflow.com/questions/4783739/add-items-to-irfctable)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T09:36:58.933

我认为您只需要在尝试调用 SetValue 之前附加一个新行

例如

```
absenceHoli.Append();    
absenceHoli.SetValue("ColumnName", "0000483"); // Add further SetValue statements for further columns 
```

您可以通过在获得表结构并检查它之后放置断点来获取列名，这可能比仅指定列索引更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-19T09:02:09.413

就我而言，我需要使用`Insert`：

```
absenceHoli.Insert();
absenceHoli.SetValue(..., ...); 
```

# linker - 在 IAR Embedded Workbench 中自动配置链接器

> ID：12087997
> 
> 赞同：4
> 
> 时间：2012-08-23T08:48:50.867
> 
> 标签：linker, embedded, msp430, iar, crc16

我正在做一个固件项目，我必须对闪存完整性进行 crc16 检查。

crc 使用 IAR Xlink 链接器计算并保存在闪存的末尾。再次在运行时从代码计算 crc，并与闪存中存储的值进行比较以检查完整性。但是，我们只能在闪存的代码段上计算 crc。每当我们对代码进行一些更改时，它的大小可能会发生变化。我可以自动化我现在手动执行的这个过程吗？

从 .xcl 链接器文件：

```
// ---------------------------------------------------------
// CRC16 Essentials: -H for fill,-J for checksum calculation
// ---------------------------------------------------------

-HFF         

-J2,crc16,,,CHECKSUM2,2=(CODE)5C00-FF7F;(CODE)10000-0x20A13 
```

在这里，我现在需要更改第二个代码段的结束值，即 0x20A13。我从 .map 文件中得到这个值，即我的代码在闪存内的内存范围。这是我做的第一个改变。

在这里，我需要对代码进行第二次更改：

```
 sum = fast_crc16(sum, 0x5C00, 0xFF7F-0x5C00+1);

  sum = fast_crc16(sum, 0x10000,0x20A13-0x10000+1); 

  //Check the crc16 values 
   if(sum != __checksum)
   {
    // Action to be taken if checksum doesn't match
   } 
```

请帮助自动化此过程！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:22:14.367

您可以尝试使用“C/C++ 编译器参考指南”中解释的 IAR 中的`__segment_begin`and`__segment_size`或`__segment_end`内部函数，您可以从 IAR EW430 的“帮助”菜单中获得该指南。该手册说他们使用链接器文件中定义的段，并且互联网上的很多人似乎都在使用它，但我尝试并得到编译器错误（IAR EW430 5.40.7）。如果它以某种方式损坏，您可能需要将其报告给 IAR 并进行修复（假设您有支持合同）。

你可以像这样使用它们：

```
sum = fast_crc16(sum, __segment_begin("CODE"), __segment_size("CODE")); 
```

我不知道拆分段会发生什么。但是为什么要从校验和计算中排除重置向量呢？您可以从 CODE 的开头到结尾并包含重置向量。

我想你可以像这样构造你的代码：

```
sum = fast_crc16(sum, __segment_begin("CODE"), (char *)__segment_begin("INTVEC") - (char *)__segment_begin("CODE") + 1);

sum = fast_crc16(sum, 0x10000, (char *)__segment_end("CODE") - 0x10000); 
```

此外，您可能注意到也可能没有注意到该`__checksum`变量被放入内存中任何合适的位置。我发现它潜伏在我的`DATA16_ID`段之后，它正好位于我校验和代码范围的中间，而且我不知道有一种方法可以自动跳过内存部分以进行校验和计算。我所做的是`__checksum`通过为前两个字节定义一个段并将其放入闪存中的前两个字节。

编辑：错过了第一个变化。如果您手动调整 IAR 链接器校验和例程的范围，那么为了能够使用编译器中的段内在函数，您需要在链接器中定义一个使用代码结尾的自定义段。

我不知道是否有任何方法可以自动化。你可能需要编译你的代码两次（呃）一次，段无限以获得代码的结尾，然后使用脚本来提取代码的结尾，然后更新链接描述文件。您可能会在预构建命令行事件上运行初始构建，然后使用不受限制的链接器文件构建 IAR 项目。但这似乎很丑陋。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T11:04:13.667

也许您也可以更改您的解决方案，在为应用程序保留的完整闪存上构建 crc，而不仅仅是为使用过的部分。

然后，您无需更改链接器文件或 c 代码，甚至引导加载程序也可以在不了解应用程序实际大小的情况下计算 crc。

# node.js - Node.js 和 MongoDB 性能问题

> ID：12087999
> 
> 赞同：0
> 
> 时间：2012-08-23T08:48:55.797
> 
> 标签：node.js, mongodb

我在使用 MongoDB 时遇到了一些奇怪的性能问题。[首先，我尝试通过确实有效的mongojs](https://github.com/gett/mongojs)驱动程序获取大约 1000 个文档，但在大约 60 多秒内完成了查询。请注意，文件无论如何都不大！

然后我尝试做同样的查询，但是对 mongo shell 运行了一个 explain() 来检查它是否真的只是查询太慢了。经检查，查询只用了 4ms 即可完成！我不知道是什么原因造成的。有任何想法吗？

更多细节：

*   小文件
*   MongoDB 服务器位于我通过 VPN 连接的另一台服务器上
*   索引放置在必要的地方

**编辑：**

我运行了wireshark并注意到以下内容：

1.  查询被发送到服务器

2.  服务器在 1ms 内响应 101 个文档（总是相同的数量）

3.  客户端执行“获取更多”请求

4.  服务器响应其余文档大约需要一两分钟

5.  带有文档的“获取更多”请求和服务器响应将继续，直到它发送完所有内容。即使是最小的大约 1000 个文档，这也可能需要……永远！

这是我在节点 CLI 中运行的一段代码：

```
/* Get all the documents (about 1000) */
var db = require('mongojs').connect("myIpAddress", ["myCollection"]);
db.myCollection.find({}).forEach(function(err, doc) {
    console.log(doc);
}); 
```

**编辑2：**

我不确定它是否相关，但我时不时地从wireshark收到一个“TCP Out of Order”数据包。

**编辑 3：**

我试图调整批量大小，这不起作用。我还尝试[了 MongoSkin](https://github.com/kissjs/node-mongoskin)以确保它不是[mongojs](https://github.com/gett/mongojs)做错了什么，但这也没有解决任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:54:28.133

其他一些想法：

1.  Mongoose 工作得很好，IMO，你能用 Mongoose 替换 Mongojs 吗？

2.  使用查找查询的参数并链接具有高值的 .batch_size() 。

3.  运行 Wireshark 并监控连接，看看哪个交互正在等待 60 秒。可能是一些特殊的 Nodejs - VPN 网络交互问题。

你能发布你的代码吗？

...编辑 - 试试这个（没有测试过，所以可能有一些语法怪癖 - 检查你的程序）

```
/* Get all the documents (about 1000) */
var db = require('mongojs').connect("myIpAddress", ["myCollection"]);
db.myCollection.find({}).forEach(function(err, doc) {
    console.log(doc);
}).batch_size(2000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T14:57:20.580

我通过将 MongoDB 服务器复制到运行 Node 服务器的相同位置来修复它。我认为这与我连接的 VPN 有关，尽管我不能肯定地说。