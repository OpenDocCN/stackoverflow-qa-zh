# StackOverflow 问答 10722000-10722999

# java - 字符串到字节到字符串

> ID：10722003
> 
> 赞同：0
> 
> 时间：2012-05-23T14:24:36.730
> 
> 标签：java, string, bytearray, byte

**问题在代码中的注释中**，我认为这是一种更简单的提问方式......

简单的问题，但我似乎找不到答案。我想将字符串转换为它的`byte[]`（简单，`String.getBytes()`）。然后我想将一个字节字符串（`101011010101001`例如）转换为一个字节 [] 并获取它的字符串值（这也很容易`new String(byte[])`：）

这是我到目前为止所得到的：

```
Scanner scan = new Scanner(System.in);
String string = scan.nextLine();
String byteString = "";
for (byte b : string.getBytes()) {
  byteString += b;
}
System.out.println(byteString);

//This isn't exactly how it works, these two parts in separate methods, but you get the idea...

String byteString = scan.nextLine();
byte[] bytes = byteString.literalToBytes() //<== or something like that...
//The line above is pretty much all I need...
String string = new String(bytes);
System.out.println(string); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:30:00.427

**编辑**

请参阅[此](https://stackoverflow.com/a/2057489/518587)答案以获取解决方案。

有了这个，你可以：

```
String string = scan.nextLine();
String convertByte = convertByte(string.getBytes());
System.out.println(convertByte);
String byteString = scan.nextLine();
System.out.println(new String(convertStr(byteString))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T14:31:32.960

这行不通。问题是，当您将字节转换为字符串时，您将得到一个字符串，例如

2532611134

那么分析这个字符串，第一个字节是2，还是25，还是253？

完成这项工作的唯一方法是使用 DecimalFormat 并确保字符串中的每个字节都是 3 个字符长

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T14:59:50.023

好的，因为向[我指出](https://stackoverflow.com/questions/10722003/string-to-bytes-to-string/10722103#comment13925545_10722003)[这个问题的](https://stackoverflow.com/questions/2057387/converting-a-set-of-strings-to-a-byte-array)[评论](https://stackoverflow.com/users/1094430/steptnt)者（导致我得到这个[答案](https://stackoverflow.com/a/2057513/971592)）不会回答，我将在这里发布解决方案：

```
Scanner scan = new Scanner(System.in);
String pass = scan.nextLine();
StringBuilder byteString = new StringBuilder();
for (byte b : pass.getBytes()) {
  b = (byte) (b);
  byteString.append(b).append(","); //appending that comma is what does the trick.
}
System.out.println(byteString);
//
String[] split = byteString.toString().split(","); //splitting by that comma is what does the trick... too...
byte[] bytes = new byte[split.length];
for (int i = 0; i < split.length; i++) {
  bytes[i] = (byte) (Byte.valueOf(split[i]).byteValue());
}
System.out.println(new String(bytes)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T14:46:24.467

我猜你想要的是这个

```
// to get back the string from byte array
StringBuilder byteString = new StringBuilder();
for (byte b : string.getBytes()) {
    byteString.append((char)b);
}
   System.out.println(byteString.toString());
// to get the binary representation from string
StringBuilder byteString = new StringBuilder();
    for (byte b : string.getBytes()) {
        System.out.print(Integer.toBinaryString((int)b));
    }
        System.out.println(byteString.toString()); 
```

# c# - 使用 IDataErrorInfo 更新源之前的 WPF 表单验证

> ID：10722005
> 
> 赞同：6
> 
> 时间：2012-05-23T14:24:51.113
> 
> 标签：c#, wpf, data-binding, entity-framework-4, validation

我正在尝试在 C#/WPF/Entity Framework 4.0 应用程序中实现优雅的表单验证。我有一个经典表单（一些文本框和复选框）和一个保存按钮。
我只想在用户按下保存时更新源（和数据库），我也只想在用户按下保存时运行表单验证。

我使用参数设置了所有绑定`UpdateSourceTrigger=Explicit`。我还将所有绑定放在一个`BindingGroup`.

当用户按下保存时，我触发`UpdateSources`绑定组的方法 - 这会`UpdateSource`在每个绑定上触发。此时（**在源更新完成之前**）我希望进行表单验证并在 GUI 中突出显示错误。如果没有输入错误，那么更新应该可以自由进行。

我想我可以通过`IDataErrorInfo`在`EntityObject`绑定的字段上实现，并`ValidatesOnDataErrors=True`在我的所有绑定上设置参数来实现这一点。

不幸的是，这不起作用，*因为*如此处所述： [MSDN 数据绑定概述 -](http://msdn.microsoft.com/en-us/library/ms752347.aspx#data_validation) 标题“验证过程”下的数据验证

> 5) 绑定引擎设置源属性。
> 
> 6) ...... 这是检查 ValidatesOnDataErrors 设置为 true 的绑定的时间点。

这对我来说似乎真的很愚蠢 - 为什么要在数据已经“提交”到对象之后验证数据？我一直在寻找一种方法来获得我想要的行为......以前有人做过这样的事情吗？

所以主要问题是：
**如何在更新源之前验证输入并在验证失败时取消更新？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T22:58:13.820

必须将值提交给对象，因为 IDataErrorInfo 仅使用 propertyName 来检索特定属性的错误。无法将建议值（应该验证）传递给它，因此只能使用提交的属性值。

我认为这是一个很好的方法，因为视图模型和视图始终是同步的，即使属性具有无效值并且视图模型中保留了无效值状态，因此基于该信息的附加逻辑可以包含在视图模型中而不是视图中.

如果您想将提议的值验证传播到视图模型，您将不得不使用自己的自定义界面和验证规则来完成。

以下是我的实现方式：

**IProposedValueErrorInfo.cs**

```
using System.Globalization;

namespace WpfApplication
{
    public interface IProposedValueErrorInfo
    {
        object GetError(string propertyName, object value, CultureInfo cultureInfo);
    }
} 
```

**ProposedValueErrorValidationRule.cs**

```
using System;
using System.Globalization;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;

namespace WpfApplication
{
    internal sealed class ProposedValueErrorValidationRule : ValidationRule
    {
        private readonly DependencyObject targetObject;
        private readonly DependencyProperty targetProperty;

        public ProposedValueErrorValidationRule(DependencyObject targetObject, DependencyProperty targetProperty)
            : base(ValidationStep.RawProposedValue, true)
        {
            if (targetObject == null)
                throw new ArgumentNullException("targetObject");
            if (targetProperty == null)
                throw new ArgumentNullException("targetProperty");

            this.targetObject = targetObject;
            this.targetProperty = targetProperty;
        }

        public override ValidationResult Validate(object value, CultureInfo cultureInfo)
        {
            var expression = BindingOperations.GetBindingExpression(this.targetObject, this.targetProperty);
            if (expression != null)
            {
                var sourceItem = expression.DataItem as IProposedValueErrorInfo;
                if (sourceItem != null)
                {
                    var propertyName = expression.ParentBinding.Path != null ? expression.ParentBinding.Path.Path : null;
                    if (propertyName != null)
                    {
                        var error = sourceItem.GetError(propertyName, value, cultureInfo);
                        if (error != null)
                            return new ValidationResult(false, error);
                    }
                }
            }
            return ValidationResult.ValidResult;
        }
    }
} 
```

**ProposedValueValidationBindingExtension.cs**

```
using System;
using System.Windows;
using System.Windows.Data;
using System.Windows.Markup;

namespace WpfApplication
{
    public sealed class ProposedValueValidationBindingExtension : MarkupExtension
    {
        private readonly Binding binding;

        public ProposedValueValidationBindingExtension(Binding binding)
        {
            if (binding == null)
                throw new ArgumentNullException("binding");

            this.binding = binding;
        }

        public override object ProvideValue(IServiceProvider serviceProvider)
        {
            var provideValueTarget = serviceProvider != null ? serviceProvider.GetService(typeof(IProvideValueTarget)) as IProvideValueTarget : null;
            if (provideValueTarget != null)
                this.binding.ValidationRules.Add(new ProposedValueErrorValidationRule(provideValueTarget.TargetObject as DependencyObject, provideValueTarget.TargetProperty as DependencyProperty));

            return this.binding.ProvideValue(serviceProvider);
        }
    }
} 
```

**个人.cs**

```
using System.Globalization;

namespace WpfApplication
{
    public class Person : IProposedValueErrorInfo
    {
        public int Age { get; set; }
        public string Surname { get; set; }

        #region IProposedValueErrorInfo Members

        object IProposedValueErrorInfo.GetError(string propertyName, object value, CultureInfo cultureInfo)
        {
            switch (propertyName)
            {
                case "Age":
                    int dummy;
                    return value is int || int.TryParse(value as string, NumberStyles.Integer, cultureInfo, out dummy) ? null : "Age must be a number.";
            }

            return null;
        }

        #endregion
    }
} 
```

**主窗口.xaml**

```
<Window x:Class="WpfApplication.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication"
        Title="MainWindow" Height="350" Width="525">
    <Window.DataContext>
        <local:Person Age="16"/>
    </Window.DataContext>
    <StackPanel>
        <TextBox Text="{local:ProposedValueValidationBinding {Binding Age}}" ToolTip="{Binding Path='(Validation.Errors)/ErrorContent', RelativeSource={RelativeSource Self}}"/>
        <TextBox Text="{local:ProposedValueValidationBinding {Binding Age}}" ToolTip="{Binding Path='(Validation.Errors)/ErrorContent', RelativeSource={RelativeSource Self}}"/>
    </StackPanel>
</Window> 
```

# android - WebView下载文件时如何通知Activity

> ID：10722007
> 
> 赞同：0
> 
> 时间：2012-05-23T14:25:01.707
> 
> 标签：android, android-widget, android-2.2-froyo

问题是：

我的应用程序为用户显示了一个 WebView，当他下载了一些文件后，我想在下载完成时调用一个逻辑。

我尝试使用**setDownloadListener()** ，但未调用方法**onDownloadStart()**

任何人都可以告诉我如何处理文件下载完成的事实吗？谢谢。

PS对不起我的英语=）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:47:34.903

为您的 webview 设置 webview 客户端。在 webview 客户端中，您可以覆盖 pagefinsih，从那里开始工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T14:27:21.323

如果 webview 中没有任何内容

您可以尝试在服务中运行一个循环来检查文件是否存在及其 MD5 校验和

在整个下载完成之前校验和不会正确

当它正确时，服务可以通知 UI

# java - Hibernate 在持久化到数据库之前通过 id 获取保存的对象

> ID：10722012
> 
> 赞同：0
> 
> 时间：2012-05-23T14:25:18.510
> 
> 标签：java, hibernate

我有一个休眠对象，我正在使用 session.saveOrUpdate 进行持久化，而没有提交给我对象 ID 的数据库。我将对象 id 传递给我的接口，稍后将用于在提交时重建对象。当我提交表单时，我不再能够进行会话查询来检索对象，因为从技术上讲，该对象在数据库中不存在。

有人知道如何检索该对象吗？如果我只是创建一个新对象，数据库 id 将失去控制。有什么想法吗？

问题编辑和澄清。

当表单提交并包含错误时，我需要捕获错误并重新加载包含错误的页面。我一直遇到的问题是我丢失了我的收藏中的非持久数据。我的解决方案是将当前对象与所有子对象临时保存到用户会话中，然后在页面重新加载后将保存的对象复制回主对象，这将返回所有用户以前的数据。但是，我遇到了无法懒惰地初始化角色集合的问题：这就是我求助于 session.update 之类的事务的原因。这解决了这个问题，但在实际保存到数据库之前，在验证错误之前为新创建的对象提供了 ID。

代码示例

```
@Property
private PurchaseRequest pr;

@Persist
private PurchaseRequest prPersist;   

Class<?> onActivate(Long prId) {
    if(request.isXHR()) {
        return null;
    }

    PurchaseRequest purchaseRequest = null;

    if(prPersist != null) {           
        session.update(prPersist);
        purchaseRequest = prPersist;
        prPersist = null;
    } else {
        purchaseRequest = (PurchaseRequest) session.createCriteria(PurchaseRequest.class)
            .add(Restrictions.idEq(prId))
            .uniqueResult();
    }

    this.pr = purchaseRequest;
} 
```

验证方法

```
void onValidateFromPR() throws Exception {
    if (form.getHasErrors()) {
        prPersist = this.pr;
        return Page.Index;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:14:12.670

`saveOrUpdate`如果您不希望将对象保存在数据库中，则没有理由为对象分配 ID。仅在表单提交且对象中包含的数据有效时才保存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T15:20:12.157

问题是对象保存在当前的数据库事务中。这就是其他事务（或会话）尚不可见的内容。

在提交当前事务之前，该对象不存在于另一个事务中。您可以与隔离级别一起玩，但我不推荐它。

您可以在事务结束时将其持久化，并使用`detach reattach`模式。或者您进行部分保存，即保存未完全完成的对象。你可以以某种方式标记它。

另一种方法是使用此类对象的内存存储。

生成 ID 是合法的，因为每次您调用`saveOrUpdate`或任何使对象持久化的方法时，您都在告诉 Hibernate 您最终愿意保存它。

# sql-server - 将 MS Access 中的代码转换为 SQL Server

> ID：10722013
> 
> 赞同：0
> 
> 时间：2012-05-23T14:25:23.780
> 
> 标签：sql-server, ms-access

以下两个函数，我想将它们从Access转换为SQL Server，我该如何修改我的代码？太感谢了。我以前从未使用过 SQL Server，并且努力学习它。LIS 是一个驱动器

```
Public Function PathDate(Ndate As Date) As Long
    PathDate = (Year(Ndate) * 10000) + (Month(Ndate) * 100) + Day(Ndate)
End Function

Public Function NormalDate(LISDate As Long) As Date

    If (LISDate = -1) Then
        NormalDate = "-1"
    Else
        NormalDate = MonthName(LISDate \ 100 Mod 100) & " " & LISDate Mod 100 & " ," & LISDate \ 10000
    End If
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T14:28:37.930

在 SQL Server 中，您无需进行所有数学运算即可将日期转换为整数并返回。

第一：

```
CREATE FUNCTION dbo.PathDate
(
    @NDate DATETIME
)
RETURNS INT
AS
BEGIN
    RETURN (SELECT CONVERT(CHAR(8), @NDate, 112));
END
GO 
```

第二个：

```
CREATE FUNCTION dbo.NormalDate
(
    @LISDate INT
)
RETURNS VARCHAR(32)
AS
BEGIN
    RETURN (SELECT DATENAME(MONTH, d) 
      + ' ' + RTRIM(DAY(d)) 
      + ', ' + RTRIM(YEAR(d)) 
    FROM 
    (
      SELECT d = CONVERT(DATETIME, CONVERT(CHAR(8), @LISDate))
    ) AS d);
END
GO 
```

示例用法：

```
DECLARE @NDate DATETIME, @LISDate INT;

SELECT @NDate = GETDATE(), @LISDate = 20120523;

SELECT dbo.PathDate(@NDate), dbo.NormalDate(@LISDate); 
```

结果：

```
20120523        May 23, 2012 
```

# java - 在 JSF 2.0 中使用自定义 java 注释的托管 Bean 方法授权

> ID：10722016
> 
> 赞同：2
> 
> 时间：2012-05-23T14:25:24.770
> 
> 标签：java, security, jakarta-ee, jsf-2, annotations

我想创建一个自定义注释来装饰限制对方法调用的访问的方法。

我的注释定义如下：

```
@Inherited
@Documented
@Retention(RetentionPolicy.RUNTIME)
public @interface Restrict {
   public enum RoleType {All, ROLE_A, ROLE_B, ROLE_C, ROLE_D}
   String roleLevel();
   RoleType roleType();
} 
```

然后使用如下注释。注释接收两个参数，一个是所需的最低角色类型，另一个是所需的最低角色级别。

```
@Restrict(roleType = RoleType.ALL, roleLevel="user")
String deleteSomething() {
  // delete intended whatever
  return success;
} 
```

我的意图是，当对使用此注释修饰的托管 Bean 方法的任何调用发生时，如上述方法“deleteSomething()”中所述，此调用将被拦截，并将方法上设置的参数与登录的参数进行比较用户适当的会话值。如果登录的用户会话角色值足够高，则允许调用 Managed Bean 的方法，否则将重定向用户或显示适当的消息。

我的问题是，有没有一种方法可以“挂钩”到被 bing 调用的方法，然后通过反射，查看方法上是否有 @Restrict 注释，然后处理所述注释。我已经尝试在 PhaseListener 类中执行此操作，但我不确定如何找出调用什么托管 Bean 来执行反射。我读过有关客户 ElResolver 的信息，但我不确定这是否对我有帮助。我还尝试找到一种方法来简单地创建一个侦听器，该侦听器以某种方式知道何时调用了带有 @Restrict 注释的方法。

```
Environment Specifics:

Tomcat 6.0.35 (considering upgrading to Tomcat 7.0.27)
JSF version 2.1.7
RichFaces 4.1.0 
```

我只是在寻找一些指导和一些可供我使用的选项。感谢任何可以帮助我的人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T16:48:57.683

您可以通过实现[`ActionListener`](http://docs.oracle.com/javaee/6/api/javax/faces/event/ActionListener.html)一个`<action-listener>`在`faces-config.xml`.

巧合的是，本周有人问并回答了同样的问题：[Custom Annotation JSF](https://stackoverflow.com/questions/10660273/custom-annotation-jsf)。请注意，特定目的不需要 JAAS，只需通过通常的方式`User`从会话中获取。`FacesContext`

# apache - WAMP Server 需要另一个 DocumentRoot，而不是我规定的

> ID：10722017
> 
> 赞同：1
> 
> 时间：2012-05-23T14:25:25.507
> 
> 标签：apache, wampserver

我安装了 WAMP 服务器，它正常工作。

我更改了**httpd.conf**中的一些设置，包括`DocumentRoot`指令。但是当我启动服务器并通过网络浏览器打开**localhost**`403 Forbidden`时，它会出错。当我打开错误日志时，我看到了原因：

> *警告：DocumentRoot [C:/Apache2/docs/dummy-host.example.com] 不存在*

但是等等......在**httpd.conf**文件中，该`DocumentRoot`指令被正确设置为**A:/website/www/**。

这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T00:48:59.073

听起来您编辑了错误的 DocumentRoot。

我使用另一个 WAMP（Wamp-Developer），但我猜测您的 httpd.conf 的 DocumentRoot 是服务器的（非虚拟主机）DocumentRoot。

您正在寻找编辑网站（本地主机）的 VirtualHost 块，该块位于 httpd.conf 的末尾或另一个文件中（包含在 httpd.conf 中）。

通过命令行运行 Apache，如下所示：

```
httpd -S 
```

它会告诉你虚拟主机在哪里。

您还需要确保您的自定义 DocumentRoot 具有所有设置的访问权限。

```
<Directory /xxxx>
order allow,deny
allow from all
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-03T09:53:14.090

可能您已在以下代码中取消注释此行`httpd.conf`：

```
# Virtual hosts
Include conf/extra/httpd-vhosts.conf 
```

`httpd-vhosts.conf`是您可以将 VirtualHost 指令与其他指令分开放置的文件，但它包含`dummy-host.example`导致错误的示例 VirtualHost（正是您的）。

因此，您必须用您的主机替换示例主机。但是你也可以在你的 httpd.conf 中直接注释包含行并将 VirtualHost 写入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-10T21:49:28.190

正确阅读错误日志很重要：

> 警告：DocumentRoot [C:/Apache2/docs/dummy-host.example.com] 不存在

所以我们必须在一些试图定义虚拟主机的文件中找到一个指令。就我而言（W7pro，WAMP），我在以下位置找到了它：

> C:\wamp\bin\apache\Apache2.2.21\conf\extra\httpd-vhosts.conf

只需编辑文件并删除相应的虚拟主机指令。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-30T09:41:31.017

如果可行，请尝试 127.0.0.1。转到 C:\Windows\System32\drivers\etc 并添加（或取消注释）以下行：

> 127.0.0.1 本地主机

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-19T18:57:49.057

对我来说，它是 MSSQL 报告服务：

> SQL Server 报告服务 (MSSQLSERVER)

禁用它并且它可以工作。

# javascript - Jquery // 悬停动画正在移除焦点动画

> ID：10722027
> 
> 赞同：1
> 
> 时间：2012-05-23T14:26:03.843
> 
> 标签：javascript, animation, jquery-plugins

我正在使用“animateWithCss.js”插件和以下代码以我正在使用的表单为 box-shadow 属性设置动画：

```
$("input, textarea").hover(function(){
    $(this).animateWithCss({boxShadow: "0px 0px 8px #11E1DC"}, {duration: 200});
    }, function()   {
    $(this).animateWithCss({boxShadow: "0px 0px 0px #0080FF"}, {duration:100});
});

$("input, textarea").focus(function() {
    $(this).animateWithCss({boxShadow: "0px 0px 4px #0080FF, 0px 0px 4px #0080FF, 0px 0px 8px #11E1DC, 0px 0px 8px #11E1DC, 0px 0px 8px #11E1DC, 0px 0px 8px #11E1DC"}, {duration: 200});
    });

$("input, textarea").blur(function(){
    $(this).animateWithCss({boxShadow: "0 0 0 #000"})
}); 
```

这就像我想要的那样工作，除了“.hover”函数正在从“.focus”动画中删除动画，如果输入或文本区域被聚焦并且我希望动画不会改变用户将鼠标悬停在焦点区域上。似乎无法弄清楚这一点。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:32:51.587

您可以使用

```
$("yourObject").is(":focus") 
```

检查对象是否被聚焦，防止出现悬停效果`focus`。当然，它可以与其他类（`active`,`hover`等）一起使用。

这就是完成您想要实现的目标所需要的一切。

**编辑：** 也许我太不准确了。这是完整的工作代码：

```
$("input, textarea").hover(function(){
    if ($(this).is(":focus")) { // Check if your object is being focused
       // Do nothing, do not activate hover effect
    }
    else { // Activate the effect
       $(this).animateWithCss({boxShadow: "0px 0px 8px #11E1DC"}, {duration: 200});
    }
}, function()   {
    if ($(this).is(":focus")) { // Check if your object is being focused
       // Do nothing, do not activate hover effect
    }
    else { // Activate the effect
       $(this).animateWithCss({boxShadow: "0px 0px 0px #0080FF"}, {duration:100});
    }
});

$("input, textarea").focus(function() {
    $(this).animateWithCss({boxShadow: "0px 0px 4px #0080FF, 0px 0px 4px #0080FF, 0px 0px 8px #11E1DC, 0px 0px 8px #11E1DC, 0px 0px 8px #11E1DC, 0px 0px 8px #11E1DC"}, {duration: 200});
    });

$("input, textarea").blur(function(){
    $(this).animateWithCss({boxShadow: "0 0 0 #000"})
}); 
```

# android - android - 一个包替换另一个包

> ID：10722032
> 
> 赞同：0
> 
> 时间：2012-05-23T14:26:26.730
> 
> 标签：android, eclipse

安卓。蚀。三星 S2 我有两个我写的应用程序。两个不同的包。两者都可以构建并且都可以在虚拟和真实设备上运行。我想把他们两个都留在真实的设备上，和他们一起玩几个星期。每次我安装一个，它都会替换另一个。无论我是通过从 Eclipse 运行它还是通过直接在手机上安装 APK 来安装，都会发生同样的情况。这些文件有不同的名称。应用名称不同。我尝试了不同的包名称。没运气。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:28:11.050

检查 AndroidManifest.xml 中的包名称。可能两者都一样

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.check.package.name.here"
    android:versionCode="1"
    android:versionName="1.00" > 
```

# c# - NotSupportedException 当我在 where 子句中使用方法时

> ID：10722034
> 
> 赞同：0
> 
> 时间：2012-05-23T14:26:37.160
> 
> 标签：c#, .net, linq, nhibernate, linq-to-nhibernate

我正在使用 nHibernate 3.2.0.4000。我使用 nHibernate.Linq 编写了这个查询

```
var entities = (from t in this.Session.Query<Task>()
                where NotIn(t, role.Tasks)
                select t).ToList(); 
```

这是方法的定义`NotIn()`

```
private bool NotIn(Task t, IEnumerable<TaskDto> tasks)
{
    foreach (var task in tasks)
    {
        if (t.Name == task.Name) return false;
    }
    return true;
} 
```

当我执行这个查询时，我遇到了一个`NotSupportedException`错误：

```
Boolean NotIn(Probel.NDoctor.Domain.DAL.Entities.Task, System.Collections.Generic.IEnumerable`1[Probel.NDoctor.Domain.DTO.Objects.TaskDto]) 
```

我发现了一个可读性较差的*非 Linq*解决方案，但我仍然想，至少，了解为什么不可能构建这样的 Linq 查询。

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T14:41:22.673

您必须使用表达式树转换`NotIn`为 nHibernate SQL 查询。

[nhibernate linq 提供程序扩展](http://fabiomaulo.blogspot.in/2010/07/nhibernate-linq-provider-extension.html)是一个很好的起点。

[此链接](http://www.codeproject.com/Articles/318177/Creating-In-and-NotIn-extension-methods-for-NHiber)具有nHibernate`In`的`NotIn`扩展方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T14:31:29.153

您在 Linq 中的代码最终会被 nhibernate 转换为 SQL 查询。您不能使用无法转换为 SQL 代码的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T14:32:00.650

NHibernate 无法反编译然后解析您的代码以获得有效的 SQL。无法从您的方法生成 sql 语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T14:36:17.640

而是使用：

```
var entities = (from t in this.Session.Query<Task>()
                where !role.Tasks.Any(rt => rt.Name == t.Name)
                select t).ToList(); 
```

# salesforce - 在所有批次执行后发送包含持久数据的电子邮件时出现问题

> ID：10722038
> 
> 赞同：0
> 
> 时间：2012-05-23T14:26:42.643
> 
> 标签：salesforce, apex-code

我在尝试发送包含我在创建的批次结束时出现的批次错误的电子邮件时遇到问题。问题是我的 outputList 列表总是由于某种原因被清除，即使它是一个静态列表。当我发送包含每个批次错误的电子邮件时，电子邮件会为使用 outputlist 创建的每个批次发送错误，但仍未清除，但是当我尝试在所有批次结束时发送电子邮件时， outputList 会被清除。我没有在我的 CreationBatch 类中的任何地方清除 outputList，我只是不断地将数据库中的错误与其他信息一起添加。有没有办法可以做到这一点（在所有批次结束时发送一封电子邮件，其中包含每批次的所有错误）？

```
// Class BusinessRules
//method to create cases has the following 
        CreationBatch cBatch = new CreationBatch();
        cBatch.caseList = cList;  //list of cases

        ID batchprocessid = Database.executeBatch(cBatch,5); 
```

CreationBatch 类具有以下内容

```
 static List<String> outputList = new List<String>();

// The execute method
global void execute(Database.BatchableContext BC, List<Case> scope){

//creates cases and insert them to database then runs this 
 finally{
         GetErrorsFromBatch();
         //commented this because I want to send one email at the end of all batches
        // when this one was here I used to get multiple emails with the error msgs
        //sendBatchEmail();

      }

}

// adds error to output list
 global void GetErrorsFromBatch(){     
....
//for each db error
 outputList.add(error); 
....
}

 global void finish(Database.BatchableContext BC){

// sends the email
// when I put this here I get one email at the end but the outputList is empty
    sendBatchEmail();
} 
```

我还尝试将 outputList(public static) 移动到 BusinessRules 类并添加每个批次的值，但奇怪的是，当我想发送电子邮件时它被清除了。

**编辑**

我试过用这个`global class CaseCreation implements Database.Batchable<sObject>, Database.Stateful` 但现在我得到这个错误`FATAL_ERROR|Internal Salesforce.com Error`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:43:46.820

为了解决这个问题，我创建了一个自定义对象，并使用它来存储值，然后在完成方法中检索信息。这也将帮助我存储错误并使用它来跟踪将来的问题，我安排了一个每 2 周运行一次的清理函数来处理多余的数据。

我针对 FATAL_ERROR 问题向 Salesforce 提出了一个案例，但我还没有得到回复。

# html - 航线图

> ID：10722042
> 
> 赞同：0
> 
> 时间：2012-05-23T14:26:48.137
> 
> 标签：html, flash

我想知道，我怎样才能创建一个类似于这个的路线图？

[http://www.flightmapping.com/maps/uk-ireland](http://www.flightmapping.com/maps/uk-ireland)

我的虚拟航空公司需要类似的东西，问题是我对如何在 Flash 上做到这一点一无所知。有没有其他方法可以制作这样的地图，可能是通过 CSS 或其他方式，或者有没有关于如何在 Flash 上制作这样的东西的有用教程？

谢谢你，HighFlyer

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:29:55.513

我已经将[amMap](http://ammap.com/examples/flight_routes)用于这种类型的事情。不需要您了解 Flash 并使用数据文件，您可以根据需要动态更新这些文件。他们有一个免费版本，你可以使用它，底部有一个署名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T02:50:43.703

查看这个[交互式飞行路线图](http://www.imapbuilder.com/interactive_map_resources/airline_route_map_flight_airways.php)，它也是使用 imap 映射软件在闪存中创建的。他们确实有免费试用版供您从他们的网站下载。

# jquery - jquery在点击时切换悬停效果

> ID：10722046
> 
> 赞同：0
> 
> 时间：2012-05-23T14:27:00.833
> 
> 标签：jquery, click, toggle, attr

我在尝试在单击时切换属性时遇到了一些问题。

[这是 JSFiddle 示例](http://jsfiddle.net/NSPUc/)

悬停效果对我来说效果很好，但是我想在单击路径（国家/地区）时切换效果

如果有人可以帮助我，那就太好了。

这就是我试图得到的：

[工作示例](http://gajel.de/map/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:31:49.413

单击与悬停相同：

```
$("path").click(function() {

    $(this).attr({
      fill: "#FF0000",
      stroke: "#00FF00"
    });
}) // etc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T14:34:02.940

这就是你想要的:)

[例子](http://jsfiddle.net/NSPUc/18/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T14:43:24.317

这应该会有所帮助。

```
$("path").toggle(function() {
    $(this).attr({
        fill: "#FFFFFF",
        stroke: "#eee"
    });
}, function() {
    $(this).attr({
        fill: "#FF0000",
        stroke: "#00FF00"
    });
}); 
```

下面的代码将从红色切换到白色，从白色切换到红色，因此您可以根据自己想要的颜色进行样式设置。

**[演示](http://jsfiddle.net/NSPUc/7/)**

# jquery - 选择器元素类更改后重新初始化jQuery函数？

> ID：10722047
> 
> 赞同：0
> 
> 时间：2012-05-23T14:27:01.440
> 
> 标签：jquery, javascript-events

我有两个 jQuery 函数，它们为相同的元素提供不同的功能。

这是我的基本 HTML 标记：

```
<ul>
  <li class="active">
    <a href="#head1" data-toggle="tab" class="fade">
      <img src="head1_down.jpg" />
    </a>
  </li>
  <li>
    <a href="#head2" data-toggle="tab" class="fade">
      <img src="head2_down.jpg" />
    </a>
  </li>
  <li>
    <a href="#head3" data-toggle="tab">
      <img src="head2_down.jpg" />
      <!-- Does not fade! No .fade class on link tag. -->
    </a>
  </li>
</ul> 
```

第一个函数`lookFade()`添加了一个淡入淡出效果，可以改变鼠标悬停时图像的来源：

```
// Helper functions
$.fn.lookUp = function() {
  $(this).attr('src', function(i,val) { return val.replace('down.jpg', 'up.jpg') });
  return $(this);
}

$.fn.lookDown = function() {
  $(this).attr('src', function(i,val) { return val.replace('up.jpg', 'down.jpg') });
  return $(this);
}

$.fn.lookFade = function() {
  $(this).hover(
    function() {
      $(this).fadeOut(function() {
        $(this).lookUp().fadeIn();
      })
    },
    function() {
      $(this).fadeOut(function() {
        $(this).lookDown().fadeIn();
      })
    }
  );
  return $(this);
}

// Change .active image on pageload
$('li.active > a.fade > img').lookUp();

// Fade effect on hover
$('li:not(.active) > a.fade > img').lookFade(); 
```

第二个函数在单击链接项时切换内容窗格（未显示在标记中，这有效！）。它还会更改链接标签内的图像，并将 .active 类从当前的 li 元素更改为单击的 li 元素。

```
// Toggle tabs and change .active
$('a[data-toggle="tab"]').click(function() {
  var head = $(this).attr('href');
  var active = "#" + $('.pane.active').attr('id');
  if (head != active) {
    $(active).removeClass('active');
    $(head).addClass('active');
    $(this).children('img').lookUp();
    $(this).parent().parent().children('li.active').removeClass('active');
    $(this).parent().addClass('active');
  }
}); 
```

**问题：**单击链接时，内容窗格会发生变化，甚至类也会正确调整。但是该`lookFade()`功能无法识别类更改，并且对于现在的 .active li 元素仍然会淡出（对于那些通过单击失去此类的人不会）。

谢谢阅读。我期待您的帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:38:02.920

更改元素的类不会更改绑定到它的事件。事件绑定到元素，而不是类。如果您想要这种类型的功能，请使用带有[.on()](http://api.jquery.com/on/)或[.delegate()的事件委托](http://api.jquery.com/delegate/)

由于您使用插件来执行这些操作，因此使其工作并不容易。我会放弃该方法并使用事件委托`lookFade`绑定`lookFade`事件（`mouseenter`和）。`mouseleave`

快速示例：

```
$('ul').delegate('li:not(.active) > a.fade > img','mouseenter',function(){
    $(this).fadeOut(function() {
        $(this).lookUp().fadeIn();
    });
}); 
```

# crystal-reports - 像我小时候一样向我解释 Crystal Reports？

> ID：10722049
> 
> 赞同：1
> 
> 时间：2012-05-23T14:27:05.110
> 
> 标签：crystal-reports, crystal-reports-2008

我每天都使用 CR 2008 v12 Developer 版本。Crystal 语法的报表、子报表和函数。分组和总结。还有所有的爵士乐。所有这些都通过与 SQL 数据库对话的 Universe 层输入。

但是，当我遇到问题时，我会在 SO 和其他地方看到线程，这听起来像是我使用的程序与其他程序完全不同。老实说 - 我不知道要问什么具体问题，但有人可以解释真正的 CR 潜力吗？我几乎只是通过它导出/安排 PDF。ASP/C# 如何发挥作用？我可以以某种方式将报告提示与 PHP 接口吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:04:13.323

首先，ASP.NET（C#、VB 等）开始发挥作用，因为 Crystal 提供了 .Net 程序集，允许您通过代码手动使用 Crystal Reports。需要注意的是，并不是您在 Crystal Reports IDE 中可以做的所有事情都可以通过代码来完成，因为它们并没有公开所有内容（例如，有些设置您只需要通过 IDE 才能在报表中进行设置）你不能从程序中做到这一点）。

因此，例如，我将 .Net 程序集与 Crystal 一起使用，因为它们的查看器在通过 Web 部署时对我不起作用（我们有与非常特殊的 Active Directory 集成的自定义安全模型）。我们还内置了自己的负载平衡模块，可以确定应该在哪里运行报告。.Net 程序集将允许您以编程方式执行诸如读取参数、设置参数、导出到文件或 Web 请求中的 HTTP 响应流、在运行时更改连接信息、在运行时更改数据库信息等操作。也许你想要出于安全需要编写自己的调度引擎，您可以使用这些来执行此操作。

# mysql - MySQL 使用具有和分组方式更新与 Select 相同的表

> ID：10722051
> 
> 赞同：5
> 
> 时间：2012-05-23T14:27:10.067
> 
> 标签：mysql

我有一个 Select 查询，它返回所有时间少于 8 天的会话的会话 ID。效果很好！

```
SELECT sessionID FROM session WHERE sessionStatus = 'open' GROUP BY sessionID HAVING MAX(refTime) <= 8; 
```

但是，我正在尝试更新表，以便会话 ID 小于 8 天的每条记录都将其 sessionStatus 更改为“关闭”。从stackoverflow我知道我无法更新我也从中选择的表，并且Having和Group By是使这更复杂的agerate函数。

我试过这个，但没有骰子！

```
UPDATE session 
SET sessionStatus='closed'
WHERE sessionID = (select * from (SELECT MAX(sessionID) FROM session where sessionStatus = 'open') as t); 
```

我真的很感激任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T14:32:02.003

这是我在这种情况下使用的解决方法：

```
CREATE TEMPORARY TABLE tempsessions AS SELECT MAX(sessionID) AS sessionID FROM session where sessionStatus = 'open';
UPDATE session SET sessionStatus = 'closed' WHERE sessionID IN (SELECT sessionID FROM tempsessions);
DROP TEMPORARY TABLE tempsessions; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T14:56:36.723

也试试这个——

```
UPDATE
  session s1
JOIN
  (SELECT MAX(sessionID) sessionID FROM session WHERE sessionStatus = 'open') s2
    ON s1.sessionID = s2.sessionID
SET
  s1.sessionStatus = 'closed'; 
```

# eclipse - 如何在工作空间中同时使用 SVN 和 Eclipse？

> ID：10722052
> 
> 赞同：3
> 
> 时间：2012-05-23T14:27:10.740
> 
> 标签：eclipse, svn, version-control, workspace

我为 Android 编写了一个简单的应用程序，但现在我想将它放入版本控制中。

所以我安装了 Subclipse 但有两个问题：

1.  我的项目位于*[workspace]/MyApp*但我想将其移动到*[workspace]/MyApp/work/trunk*（其中*work*是 SVN 工作目录）

    我总是得到我不必重叠工作区的错误。我创建了另一个工作区并将其用于这个项目——但这真的是最好的解决方案吗？

2.  分支呢？我来自 Code::Blocks，您可以在其中简单地移动项目文件！我认为在 Eclipse 中它有点复杂。是否有可用的重构/复制解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T15:32:32.207

1）正常的过程是右键单击Eclipse项目，然后左键单击Team -> Share project。您告诉 Eclipse 您想在 Subversion 中的哪个位置存储项目。Eclipse 工作区和 Subversion 主干是不同的目录。有时在不同的计算机上。

Eclipse 工作区称为 Subversion 工作副本。使用 Team -> Commit 将 Subversion 工作副本中的更改提交到 Subversion 主干（或分支）。您可以使用 Team -> Update 将更改从 Subversion 主干更新到 Subversion 工作副本。

2) 要在 Subversion 中分支，您可以使用 Subclipse 将模块从主干复制到分支。然后在 Eclipse 中检查分支。

要在 Eclipse 中移动模块，右键单击模块并左键单击 Refactor -> Move 选项。

要在 Eclipse 中复制模块，您只需复制和粘贴。必须使用 Team -> Add to version control 将复制的模块和新模块标识到 Subversion。

# php - PHP会话通过jquery ajax丢失？

> ID：10722053
> 
> 赞同：2
> 
> 时间：2012-05-23T14:27:13.300
> 
> 标签：php, jquery, ajax, session

我们的一位客户目前遇到了麻烦。我们的系统在登录后使用 AJAX 请求与服务器进行所有通信。无论在哪里使用 $_SESSION，session_start(); 位于脚本之上 - 包含在 try...catch 中，因为自定义错误处理程序会在错误时引发异常。因此，伪代码如下所示：

```
//set_error_handler_here
try{
session_start();
//do_something_with $_SESSION
(...)
} catch($e){
//handle error
} 
```

现在，问题是：我们的客户似乎随机丢失了会话，我的意思是 fe $_SESSION['id'] 将抛出“未知索引”错误。Internet Explorer 和 Chrome 都是这种情况。我们已经在各种系统中测试了这个系统几个月，可以确认我们以前没有出现过这个错误。

我们不使用 suhosin。会话到期前的时间内也有活动。有没有人对解决方案有任何想法？

**编辑：**我最终进行了测试，看看是否设置了 $_COOKIE['PHPSESSID']。isset($_COOKIE['PHPSESSID']) 返回错误。这意味着客户端可能受到某种形式的恶意软件的困扰，考虑到它发生在两个浏览器上。我要感谢所有尝试提供帮助的人，某些选项是我们没有想到的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:35:16.970

**案例 1**
您是否正在验证 http 用户代理？

如果是这样，这可能是一个问题，因为 IE 在兼容模式和正常模式下运行时会使用不同的用户代理。

**案例2**

你有集群应用服务器吗？所以可能是会话文件存储在一个服务器中而下一个请求转到另一台服务器的情况？

**案例3**

可能是应用程序级别的错误，其中会话未根据条件或用户或其他东西设置

**案例 4**
如果您有 iframe，也可能因为您在 iframe 中设置 cookie，浏览器可能会将其视为第三方 cookie 并拒绝它，除非在浏览器首选项中明确设置为

在这种情况下，您需要在尝试设置 cookie 的页面上设置 P3P 标头。

我建议你设置一些虚拟cookie，看看它是否会回来。并且还将会话 cookie 设置为[httpcookie](http://en.wikipedia.org/wiki/HTTP_cookie#HttpOnly_cookie)，以便无法从 javascript 访问它（假设某些脚本格式错误的 cookie）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-01T10:41:47.370

这可能是一种罕见的情况，但如果有人犯了我犯的同样错误，他可能会受益。

我有同样的问题，php会话丢失了。我没有使用 jquery ajax 而是简单的 xmlhttp ajax，但我认为这没关系，在后台会执行相同的步骤。

我在停止为我的 ajax 请求使用 IP 地址后解决了这个问题，所以从这里开始：`http://1.2.3.4/index.php?somekey=somevalue`我去了这个：`http://www.example.com/index.php?somekey=somevalue`

# javascript - textarea 的高度在值增加时增加，但在值减少时不减少

> ID：10722058
> 
> 赞同：4
> 
> 时间：2012-05-23T14:27:27.933
> 
> 标签：javascript, jquery, html

```
<body>
<script type="text/javascript">$(function(){
$("textarea").live("keyup keydown",function(){var h=$(this);
h.height(h[0].scrollHeight);
});});

</script>
<textarea style="resize:none;width:760px;height:60px; overflow:hidden;" ></textarea>
</body> 
```

当 textarea 溢出时，它会得到滚动条和 scrollheight，它们会被应用到它的高度，但不能减少 textarea 的高度，因为在减小它的值长度时它不会得到滚动条

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-23T14:48:43.490

textarea 的最小 scrollHeight 始终是高度。要获得准确的滚动高度，请先将高度设置为 1。

```
h.height(1).height(h[0].scrollHeight); 
```

[http://jsfiddle.net/aarongloege/t2vAr/](http://jsfiddle.net/aarongloege/t2vAr/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T15:00:38.423

如果您不想自己编写代码，也可以使用此脚本：[https](https://github.com/brandonaaron/jquery-expandable) ://github.com/brandonaaron/jquery-expandable 它已经包含一个不错的幻灯片效果 ;-)

# drupal-7 - Drupal 7 node_save 设置日期

> ID：10722062
> 
> 赞同：1
> 
> 时间：2012-05-23T14:27:44.517
> 
> 标签：drupal-7, nodes

我正在从 xml 自动创建节点，我需要为它们设置创建日期。我试过了

```
<?php 
   ...
   $node->created = $date //<- unix timestamp, $node is my node object
   $node->changed = $other_date; 
   ...
?> 
```

但没有运气，它设置了当前日期。有任何想法吗？谢谢

-编辑-

```
$newNode = (object) NULL;
$newNode->type = 'blog';
$newNode->title = $title;
$newNode->uid = 1;
$newNode->status = 1;
$newNode->comment = 0;
$newNode->moderate = 0;
$newNode->sticky = 0;
$newNode->body['und'][0] = array(
                                'value' => $body,
                                'format' => 'full_html');
$newNode->log      = 'Auto Imported Node';
$newNode->language = LANGUAGE_NONE;

// add fields
$newNode->field_description[LANGUAGE_NONE][0]['value'] = $description;
$newNode->field_byline[LANGUAGE_NONE][0]['value'] = $byline;
$newNode->field_small_image[LANGUAGE_NONE][0]['value'] = $smallimg;
$newNode->field_large_image[LANGUAGE_NONE][0]['value'] = $largeimg;

// save node
$newNode->created = $pd; // i've tried with commenting this line out, too
$newNode->date = $pd;
node_save($newNode); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T15:05:49.910

它应该适用于`$node->created`，但`$node->changed`不能使用 Drupal API 进行设置。

如果您使用的是用于设置的`node_submit()`函数，则需要设置为字符串日期。 `strtotime($node->date)``$node->created``$node->date`

```
$node->date = $date_string; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T19:43:07.357

@Zoltan：谢谢，你是对的！当我使用：

```
$node->date = '2005-05-06 08:17:27';
node_save($node); 
```

我保存后得到：

```
[created] => current timestamp
[changed] => current timestamp 
```

但是在 node_save 之前添加行时：

```
$node = node_submit($node); 
```

我保存后得到：

```
[created] => 1115360247
[changed] => current timestamp 
```

并且在节点页面上会显示“创建”日期

# javascript - Sencha Architect - 如何添加虚拟数据

> ID：10722063
> 
> 赞同：1
> 
> 时间：2012-05-23T14:27:45.233
> 
> 标签：javascript, extjs, sencha-architect

我正在使用 Sencha Architectur 开发一个应用程序。但我有一个小问题。我有一个嵌套列表，如何添加自定义数据，只是为了快速测试。因为我不想使用 json-url 创建模型和存储。

谢谢

# algorithm - 使用强化学习训练神经网络

> ID：10722064
> 
> 赞同：67
> 
> 时间：2012-05-23T14:27:54.927
> 
> 标签：algorithm, language-agnostic, machine-learning, neural-network, reinforcement-learning

我知道前馈神经网络的基础知识，以及如何使用反向传播算法训练它们，但我正在寻找一种算法，而不是我可以使用强化学习在线训练 ANN。

例如，[推车杆向上摆动](http://www.google.com/search?q=cart%20pole%20swing%20up)问题是我想用人工神经网络解决的问题。在那种情况下，我不知道应该做什么来控制钟摆，我只知道我离理想位置有多近。我需要让 ANN 基于奖励和惩罚来学习。因此，监督学习不是一种选择。

另一种情况类似于[蛇游戏](http://en.wikipedia.org/wiki/Snake_%28video_game%29)，反馈被延迟，并且仅限于目标和反目标，而不是奖励。

对于第一种情况，我可以考虑一些算法，例如爬山算法或遗传算法，但我猜它们都会很慢。它们也可能适用于第二种情况，但速度非常慢，不利于在线学习。

我的问题很简单：**是否有一种简单的算法可以通过强化学习来训练人工神经网络？**我主要对实时奖励情况感兴趣，但如果有基于目标情况的算法，那就更好了。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-23T14:42:13.097

有一些关于该主题的研究论文：

*   [通过不断发展的神经网络拓扑进行高效强化学习 (2002)](http://nn.cs.utexas.edu/downloads/papers/stanley.gecco02_1.pdf)
*   [使用神经网络进行强化学习，并应用于电机控制](http://www.remi-coulom.fr/Thesis/)
*   [强化学习神经网络解决自主移动机器人避障问题](http://www.ice.ci.ritsumei.ac.jp/~ruck/CLASSES/INTELISYS/NN-Q.pdf)

还有一些代码：

*   [神经网络强化学习的代码示例](http://www.cs.colostate.edu/~anderson/code/)。

这些只是关于该主题的一些顶级谷歌搜索结果。前几篇论文看起来还不错，虽然我没有亲自阅读过。如果您在 Google Scholar 上进行快速搜索，我认为您会发现更多关于强化学习的神经网络的信息。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-23T14:42:29.110

如果导致奖励的输出`r`反向传播到网络`r`时间，您将与奖励成比例地加强网络。这并不直接适用于负奖励，但我可以想到两种会产生不同效果的解决方案：

1) 如果你有一组在 rmin-rmax 范围内的奖励，将`0-(rmax-rmin)`它们重新调整为非负值。奖励越大，产生的强化就越强。

2）对于负奖励`-r`，反向传播随机输出`r`次数，只要它与导致负奖励的不同。这不仅会加强理想的输出，而且会分散或避免不良输出。

# actionscript-3 - ActionScript Vector 投射不一致？

> ID：10722067
> 
> 赞同：2
> 
> 时间：2012-05-23T14:28:05.660
> 
> 标签：actionscript-3, vector, casting

当像这样投射矢量时......

```
var v1:Vector.<String> = new Vector.<String>();
v1.push("foo");

var v2:Vector.<Object> = Vector.<Object>(v1)

v1.push("bar");

trace(v1);   //foo,bar
trace(v2);  //foo 
```

... 正如您在跟踪输出中看到的那样，创建了 Vector 的副本。

但是当您将第 3 行更改为...

```
var v2:Vector.<*> = Vector.<*>(v1) 
```

...没有创建副本，v1 和 v2 都指向同一个对象，跟踪输出都将是“foo,bar”。

为什么？不应该有某种一致的行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:05:42.337

您必须意识到这`Vector.<Something>(Vector.<Anotherthing>)`不是类型转换。事实上，你根本不能将一种向量转换为另一种向量！试试这个：

```
var v1:Vector.<String> = new Vector.<String>();
var v2:Vector.<Object> = v1 as Vector.<Object>; // throws an error 
```

您也不能分配子类型的向量：

```
var v1:Vector.<Object> = new Vector.<String>(); // throws an error 
```

那是因为虽然 String 是 Object 的子类型，但两种向量是[*不相关*的。](http://bugs.adobe.com/jira/browse/ASC-3836)

那么为什么你的符号没有失败呢？因为你真正在做的是调用[顶层函数`Vector()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/package.html#Vector%28%29)，它从你传入的任何集合类型数据创建一个向量。它的文档说：

> 如果 sourceArray 参数已经是`Vector.<T>`T 是基本类型的实例，则该函数返回该 Vector。否则，结果 Vector 将使用 sourceArray Array 或 Vector 的元素填充。

类型声明中的星号是占位符，因此变量将保存 Vector 的任何类型化实例，并且允许函数返回您传入的相同向量。

# zend-framework - 在远程服务器上找不到 Zend 自定义验证器

> ID：10722068
> 
> 赞同：0
> 
> 时间：2012-05-23T14:28:07.157
> 
> 标签：zend-framework, validation, zend-validate

我知道有一些类似的问题，但那里的答案对我没有帮助。

该应用程序在本地运行良好，但现在，除其他问题外，没有找到我制作的自定义验证器的类，尽管一些模型类（我还没有测试过）可以工作。这似乎不是区分大小写、类名、文件名或文件夹名的问题。

会不会有其他原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T22:31:04.900

我可能在一周前解决了这个问题。这是图书馆路径的问题。我是这样做的：

在公共/index.php 中：

```
defined('LIBRARY_PATH') || define('LIBRARY_PATH', realpath(dirname(__FILE__) . '/../library')); 
```

在 application/Bootsrap.php 我有类似的东西：

```
protected function _initAutoload() {

    // configure new autoloader
    $autoloader = new Zend_Application_Module_Autoloader ( array ('namespace' => '', 'basePath' => LIBRARY_PATH ) );

    // autoload validators definition
    $autoloader->addResourceType ( 'Validator', '/validate', 'MyValidate' );
} 
```

# java - Java 中的 Saxon：XSLT 代码重用

> ID：10722076
> 
> 赞同：0
> 
> 时间：2012-05-23T14:28:25.643
> 
> 标签：java, xml, xslt, saxon, plaintext

作为我从这个问题的思维模式的延续：[Java中的撒克逊人：XSLT for CSV to XML](https://stackoverflow.com/questions/10658681/saxon-in-java-xslt-for-csv-to-xml)

根据 Michael Kay 对该问题的回答，我最终得到了以下代码，用于将 XSLT 应用于文档：

```
Processor processor = new Processor(false);
StringWriter stringWriter = new StringWriter();
Serializer serializer = new Serializer(stringWriter);
XsltCompiler compiler = processor.newXsltCompiler();
XsltExecutable executable = compiler.compile(new StreamSource(new File(transformLocation)));
XsltTransformer transformer = executable.load();
transformer.setInitialTemplate(new QName("main"));
transformer.setParameter(new QName("filePath"), new XdmAtomicValue("location/of/Test.csv"));
transformer.setDestination(serializer);
transformer.transform();
String transformedDocument = stringWriter.toString().trim(); 
```

此代码使用了 Saxon 中的 s9api（我使用的是 9.4 HE 版本）。它允许我设置初始模板并动态注入要转换的文档的路径，这允许我转换非 XML 文件（例如 CSV，在这种特殊情况下）。

但是，这有点抹杀了我的代码可重用性。

让我解释一下：我有一个`transformDocument()`方法。最初，在我尝试做一些疯狂的事情（如转换 CSV 并且只使用 XML）之前，我的方法`marshalObjectToDocument()`和`unmarshalDocumentToObject()`方法都调用了它（有可重用性）。

下面是给定一个只有 XML 的世界的两个方向的比较：

1.  `unmarshalDocumentToObject()`
    *   我从一个包含文档的文件开始。
    *   我这样做：`new StreamSource(new File(documentLocation))`
    *   这`StreamSource`可以`transformDocument`作为“源”( `XsltTransformer.setSource()`) 传递给。
2.  `marshalObjectToDocument()`
    *   我从某种对象开始。
    *   这被编组为一个巨大的 XML 字符串。
    *   我这样做：`new StreamSource(new StringReader(giantStringOfXML))`
    *   这`StreamSource`可以`transformDocument`作为“源”( `XsltTransformer.setSource()`) 传递给。

在情况 1 ( `unmarshalDocumentToObject()`) 我有一个文件路径进入，所以我可以更改`transformDocument()`为获取文件路径字符串并将其传递给它，以便它可以手动将其注入 XSLT 参数。这适用于 XML 和纯文本。

在情况 2 ( `marshalObjectToDocument()`) 我没有文件路径。我有一个对象，它被转换为一个包含其 XML 表示的巨型字符串。我无法将文件路径字符串传递给，`transformDocument()`因为我没有文件。现在我不能使用`transformDocument()`. 代码可重用性被破坏。

在所有这一切中，我的目标是能够以某种方式在代码中以相同的方式处理 XML 和纯文本文档，并且能够重用我的代码来应用 XSLT 和 XSD，无论我是在编组还是解组。这是一个不切实际的目标吗？我是否注定要为每种文档类型和方向编写不同的代码？或者有人可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:02:35.550

这肯定是软件工程的标准和基本位吗？你在这里有三段代码：一个想要运行转换的应用程序；和 XSLT 引擎，它执行转换，以及一个接口层，它提供对 XSLT 引擎提供的服务的抽象，通常将功能子化以仅提供应用程序需要的功能，并以更简单的形式进行。接口层的优势在于它降低了转换 API 的复杂性；缺点是它也减少了功能。当您的应用程序开始需要更多以前隐藏的功能时，您有很多选择：您可以将功能添加到接口层（最终达到不再增加价值的地步），

代码的重用取决于识别可以在多个地方使用的功能块。如果您的应用程序的不同部分正在做不同的事情，那么它们重用代码就会变得更加困难。什么是新的？

# asp.net-mvc-3 - Azure 中的 MVC3 EF 应用程序，为什么我必须每隔一段时间对其进行一次预热？

> ID：10722080
> 
> 赞同：1
> 
> 时间：2012-05-23T14:28:41.787
> 
> 标签：asp.net-mvc-3, entity-framework, azure, azure-web-roles

我正在测试托管在 Azure 中的 MVC3 + EF 应用程序。我现在遇到的问题是每隔一段时间，比如 4-5 小时或一天，当我尝试访问该页面时，它非常慢。加载大约需要 6-8 秒，然后第二次加载会快很多。我在页面底部有静态内容cahced，js。所以我怀疑这是因为热身，但我的问题是为什么我必须偶尔热身。

PS：我的应用部署在生产环境中，我还没有启动，所以目前只有我和我的队友在访问它，它白天的页面请求不到10-20个，大部分发生在晚上时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:17:57.923

正如在其他一些 SO 答案（例如[这个](https://stackoverflow.com/questions/10352363/wcf-service-in-azure-worker-role-slow-on-first-request-after-being-idle)）中提到的，您可能会遇到 AppPool 超时情况。要禁用此超时，您可以通过启动脚本执行此操作：

```
%windir%\system32\inetsrv\appcmd set config -section:applicationPools -applicationPoolDefaults.processModel.idleTimeout:00:00:00 
```

# .net - 在 Windows 中以编程方式设置 Outlook 电子邮件

> ID：10722081
> 
> 赞同：0
> 
> 时间：2012-05-23T14:28:47.480
> 
> 标签：.net, python, email, com

我该怎么办？我需要使用什么语言（首选 Python，因为我的安装脚本的其余部分都在 Python 中）？可以访问 .NET 库（VB.NET、C#、IronPython，也许是 PyWin32）或 COM 的东西？还是有一些简单的命令行技巧？

我不反对使用 .NET 库或 COM 对象，但我对它们的了解有限，而且我使用的是标准 Python（并且不了解 C# 或 VB，尽管我不反对学习）。

我说的主要是 Outlook 2007 和 Outlook 2010。越通用越好，因为它将用于将同时分配两者的用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T20:17:24.773

似乎可以使用命令行中的配置文件配置 Outlook：

[http://technet.microsoft.com/library/cc179062.aspx](http://technet.microsoft.com/library/cc179062.aspx)

# mysql - 数据源配置向导问题无法获取名为的数据库对象的列信息

> ID：10722084
> 
> 赞同：1
> 
> 时间：2012-05-23T14:29:00.823
> 
> 标签：mysql, visual-studio-2010

我正在使用 Visual Studio 2010 并通过 MySqlODBC 5.1 驱动程序连接到 MySQL 数据库。该页面是一个报告页面（我使用的是水晶报告和 devexpresss 报告工具）。

我已经使用数据源配置向导成功测试了与我的 MYSQL 数据库的 ODBC 连接，在创建 connectionString 之后，我可以看到我的数据库对象，即表、存储过程，但是当我选择任何表时，它不会展开以显示列和当我点击完成时，它会给我数据源配置向导错误消息，

< `tyrepro`.. `vendor`> 无法获取名为“ `tyrepro`.. `vendor`”的数据库对象的列信息

*vendor 是这里的表名。

我尝试连接到系统数据库并选择表，但遇到了同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T04:45:07.767

最后我能够解决这个问题。罪魁祸首是 MYSQL ODBC 5.1 驱动程序，相反我下载了“dotConnect for MySQL”数据提供程序并用它来连接 MySQL。

# excel - 在 Excel 中使用 VBA 重命名集合中项目的键

> ID：10722086
> 
> 赞同：3
> 
> 时间：2012-05-23T14:29:07.167
> 
> 标签：excel, vba, collections

我有一个集合如下：

```
Set NodeColl = New Collection
NodeColl.Add "Node 1", "Node 1"
NodeColl.Add "Node 2", "Node 2"
NodeColl.Add "Node 3", "Node 3" 
```

我想知道是否有一种简单的方法可以重命名选择性项目的键而不影响其他项目或集合本身。例如，像 NodeColl.Items("Node 1").Key = "Some string"

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T15:00:00.867

不，您需要手动添加和删除；

```
with NodeColl
    .add .Item("Node 2"), "New Key", , "Node 2"
    .remove "Node 2"
end with 
```

*或者通过添加对Microsoft Scripting Runtime*的引用或使用`Dictionary`允许这样做的 a ；

 *```
dim NodeColl as object: Set NodeColl = createobject("Scripting.dictionary")
NodeColl.add "key for Node 1", "Node 1"
NodeColl.add "key for Node 2", "Node 2"
NodeColl.add "key for Node 3", "Node 3"

'//direct rename allowed;
NodeColl.Key("key for Node 2") = "New Key here" 
```*

# c++ - 由于 read() 阻塞，无法查看多个目录

> ID：10722091
> 
> 赞同：0
> 
> 时间：2012-05-23T14:29:29.680
> 
> 标签：c++, c, directory, inotify

我的问题是我使用 inotify 来查看多个目录，并使用 read() 函数来读取任何更改。我的观点是我不能在“同一时间”（“for”循环）中观看所有这些目录，因为 read() 函数会停止程序，直到当前观看的目录发生某些事情。

有简化的“主要”代码：

```
while (1){

    for(int i = 0; i < numberOfDirectories; i++){

        string fileEnd = get_event(fd[i], catalogs[i]).c_str());
        if(string != "") do some code;

    }
sleep(1);
} 
```

其中 get_event 返回更改文件的路径，fd[i] 是 inotify 的实例，catalogs[i] 包含监视目录的名称。

还有一些get_even func的代码：

```
#define BUFF_SIZE ((sizeof(struct inotify_event)+FILENAME_MAX)*1024)
string get_event(int fd, string target)
{
    ssize_t len;    
    char buff[BUFF_SIZE] = {0};       

    len = read (fd, buff, BUFF_SIZE); 
```

此时主“for”循环停止工作并等待第一个目录中发生某些事情。我只想检查监视目录中是否有任何更改，而不是等待更改。

帮助：<

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:36:02.390

如果您使用的是 LINUX/UNIX，则可以使用 SELECT 来监视多个文件描述符的新更改。无论哪个先更改，都会打破阻塞等待，为您提供更改的描述符的编号，让您处理，然后您只需再次监视它。

只要您在调用的描述符集中为您感兴趣的位置提供所有描述符，它就可以让您捕获任何更改，无论它们位于哪个描述符上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T14:48:21.917

称呼

```
fcntl(fd, F_SETFL, O_NONBLOCK); 
```

就在 read(...) 函数强制文件描述符进入非阻塞模式之前。

# c# - 创建 MouseEventHandler 的委托新实例

> ID：10722092
> 
> 赞同：3
> 
> 时间：2012-05-23T14:29:33.303
> 
> 标签：c#, delegates, mouseevent, anonymous-function

动态创建按钮时，我希望有一个新的 MouseEventHandler。我是这样做的，

```
this.Controls[btnAdd.Name].MouseClick += new MouseEventHandler(generalMethods.generatePopup()); 
```

但是，由于我需要将参数传递给事件，我让 generatePopup 接受一个表示按钮编号的整数（所以我可以进一步使用）。在过去，我只会使用匿名委托来传递额外的参数，但这似乎不起作用，因为我想创建一个 NEW 实例，因此；

```
this.Controls[btnAdd.Name].MouseClick += delegate(object sender, MouseEventArgs e) { new MouseEventHandler( generalMethods.generatePopup(sender, e, i); }; 
```

似乎错误出在新的 MouseEventHandler 上。如果我把它拿出来，它工作正常，我可以传递额外的数据，但因为它不是一个新实例，它不会给每个按钮自己的事件，就像这样；

```
this.Controls[btnAdd.Name].MouseClick += new MouseEventHandler(generalMethods.generatePopup()); 
```

有谁知道如何解决这个问题？例如仍然使用匿名委托方法，但仍然创建事件的新实例？

编辑：嗯，我试过这个（我相信参数通过了）但似乎不是为每个按钮创建一个新的鼠标事件处理程序，而是对所有按钮使用相同的，因为我设置了一个标签来测试它获得正确的按钮编号，但弹出窗口上的所有标签都返回最后一个按钮编号而不是正确的编号。有任何想法吗？

编辑2：这是我生成按钮的代码块：

```
 for (int i = 0; i <= count && i < 2; i++)
        {

            Button btnAdd = new Button();
            btnAdd.Text = dataTable.Rows[i]["deviceDescription"].ToString();
            btnAdd.Location = new Point(x, y);
            btnAdd.Tag = i;
            btnAdd.Name = "btn" + i.ToString();
            btnAdd.BackColor = Color.Green;

            this.Controls.Add(btnAdd);

            this.Controls[btnAdd.Name].MouseClick += (sender, e) =>
{
    int index = i;
    generalMethods.generatePopup(sender, e, index);
}; 
```

这是我的 generatePopup 方法，即 mouseEventHandler：

```
public void generatePopup(object sender, MouseEventArgs e, int buttonNumber)
    {
      //  DBConnector mDBConnector = new DBConnector();
      //  DataTable dataTable = mDBConnector.Select("SELECT * FROM devices WHERE deviceID = " + buttonNumber);

        DeviceBreakdownPopup popupDevice = new DeviceBreakdownPopup();
        popupDevice.lblDeviceNo.Text = buttonNumber.ToString();

        PopupWindow popup = new PopupWindow(popupDevice);
        popup.Show(Cursor.Position);

    } 
```

这是正在发生的事情的图像，只是为了清楚起见：

![错误示例](../Images/38f343f7440e47007bea6ae8e5bce57d.png)

在这里，我们看到两个弹出用户控件都给出了标签“2”，而我需要每个都有正确的值，“1”和“2”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T14:35:16.063

尝试这个：

```
this.Controls[btnAdd.Name].MouseClick += new MouseEventHandler(
    (sender, evt) => {
        generalMethods.generatePopup()
    }
); 
```

该`new MouseEventHandler(...)`部分是可选的 - 编译器从赋值的左侧计算出参数类型`+=`。

**编辑**您的代码的问题是*它访问修改后的闭包*。您应该从中创建一个临时变量`i`，并在您的 lambda 中使用它来解决问题。

```
for (int i = 0; i <= count && i < 2; i++)
    {

        Button btnAdd = new Button();
        btnAdd.Text = dataTable.Rows[i]["deviceDescription"].ToString();
        btnAdd.Location = new Point(x, y);
        btnAdd.Tag = i;
        btnAdd.Name = "btn" + i.ToString();
        btnAdd.BackColor = Color.Green;

        this.Controls.Add(btnAdd);
        var temp = i;
        this.Controls[btnAdd.Name].MouseClick += (sender, e) =>
            {
            int index = temp;
            generalMethods.generatePopup(sender, e, index);
        };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T14:58:33.493

返回什么类型`generatePopup`？如果它`MouseEventHandler`已经返回一个，那么你应该没问题（只要为每个实例生成一个新的处理程序）。类似于以下内容：

```
btnAdd.MouseClick += generalMethods.generatePopup();

/* in generalMethods */
private static int ButtonIndex = 0;
public MouseEventHandler generatePopup()
{
   int tempIndex = ButtonIndex++;
   return new MouseEventHandler((sender, ea) => generalMethods.generatePopup(sender, ea, tempIndex));
} 
```

您这样做的原因是因为该`generatePopup`方法将为每个按钮创建一个新`MouseEventHandler`按钮。生成的每个处理程序将为您创建的 lambda 创建一个闭包，添加`tempIndex`我们设置为本地字段的变量。因此，当创建处理程序时，会在 lambda（包括 tempIndex）上创建新的闭包，并将为每个单独的按钮（它是 tempIndex 的本地版本）调用 generatePopup 方法。变量的闭包发生在 Lambda 之外，因此您应该在指定 Lambda*之前*设置一个局部变量，它将被正确捕获。

试一试，让我们知道。

编辑：所以我看到您正在循环生成按钮。是否会出现动态生成它们的情况（即：不在该循环内，有时在初始创建之后）？如果是这样，您已经获得了按钮本身的所有信息：

```
(sender, ea) => generalMethods.generatePopup(sender, ea, (int)((Control)sender).Tag) 
```

由于您已经将索引附加到标签，因此您不必担心为不同的按钮使用不同版本的索引。在您当前的版本中，您正在尝试获取循环变量本身的引用（它会被重用），因此当您完成循环时， MouseEventHandler 的所有实例都会引用循环变量**的最终状态**。除非您创建一个临时变量来存储中间值，否则循环变量和 Lambda 不会混合使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T14:37:54.860

这应该有效：

```
this.Controls[btnAdd.Name].MouseClick += 
  (sender, e) => generalMethods.generatePopup(sender, e, i); 
```

这将创建一个具有唯一参数的唯一匿名方法，由每个按钮单击事件调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T14:36:09.900

我唯一能想到的是创建一个继承的控件并添加您自己的事件和属性。您的事件将在实例化时填充属性，并在触发时调用 mouseclick。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T14:36:24.127

使用标准事件模式。您可以检索事件的源并将其转换为所需的类型。

```
this.Controls[btnAdd.Name].MouseClick += new MouseEventHandler(MyControl_MouseClick);

//...

void MyControl_MouseClick(object sender, MouseEventArgs e)
{
    var button = sender as Button;

    if (button.Name == "Add") // here is how to retrieve the button name
    {
        ...
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-23T14:36:28.867

> **你不能这样做。**

委托语法后面是附加该特定事件的方法。您可以为该控件创建自定义控件和自定义事件。

这里我们如何创建事件：

```
 // Define a delegate named LogHandler, which will encapsulate
    // any method that takes a string as the parameter and returns no value
       public delegate void LogHandler(string message);

    // Define an Event based on the above Delegate
       public event LogHandler Log; 
```

参考[这个](http://www.akadia.com/services/dotnet_delegates_and_events.html)和[简化的事件和代表](http://www.codeproject.com/Articles/4773/Events-and-Delegates-simplified)。

要创建自定义控件，请遵循以下 -[在 Winforms 中创建自定义控件 - 第 1 部分](http://blogs.msdn.com/b/jfoscoding/archive/2004/12/06/275505.aspx)和[使用 .NET Framework 开发自定义 Windows 窗体控件](http://msdn.microsoft.com/en-us/library/6hws6h2t.aspx)：

```
public partial class UserControl1 : TextBox 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-23T14:47:25.840

您必须在内部范围内声明索引，否则它仍会引用您的循环参数。

```
for (int i = 0; i < 42; i++)
{
    this.Controls[name].MouseClick += (sender, e) =>
    {
        int index = i;
        generalMethods.generatePopup(sender, e, index);
    }
} 
```

您不需要为每个按钮指定一个处理程序（所有人都可以正常工作），但您必须为每个按钮授予其自己的索引对象。

# iphone - 如何从我的 itunesconnect 中删除应用内购买项目？

> ID：10722094
> 
> 赞同：0
> 
> 时间：2012-05-23T14:29:34.203
> 
> 标签：iphone

我有一个应用程序，我正在使用应用程序内购买项目订阅。由于某种原因，该应用程序被苹果拒绝。但我的应用内购买项目状态就像需要开发人员操作一样。我的删除选项不存在。我想从列表中删除该项目，我不想再次提交我的新提交。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:36:57.357

是的，开发人员需要采取的行动也让我感到困惑。但是无论如何，您都必须在 itunesconnect 的应用详细信息中为您的应用选择购买项目。因此，只需添加一个新的购买项目，在您的应用的应用详细信息中选择此项目，然后提交您的应用。

一切都应该没问题。

# facebook - 尝试检查用户是否安装了我的应用程序。但是得到 Uncaught OAuthException （访问令牌）

> ID：10722096
> 
> 赞同：0
> 
> 时间：2012-05-23T14:29:39.280
> 
> 标签：facebook, facebook-graph-api, oauth, access-token

我正在尝试检查用户是否安装了我的应用程序。流程如下；

```
 1\. Check whether has installed or authorize my app 
    2\. If yes, then direct user to play my app directly
       If no, then direct user to see welcoming page to read term of use and privacy. 
```

我好像没有访问令牌来检查权限。它显示以下错误。

```
 Fatal error: Uncaught OAuthException: An active access token must be used to query information about the current user 
```

我的代码是这样的。我还回显 $access_token 以查看我是否确实收到了访问令牌。是的，我确实得到了代码。但不知何故，我仍然得到错误。

```
require_once('src/facebook.php');

$app_id = "APP_ID";
$app_secret = "APP_secret";

// Init facebook api.
$facebook = new Facebook(array(
    'appId' => $app_id,
    'secret' => $app_secret,
    'cookie' => false,
));

$access_token = $facebook->getAccessToken();
//echo $access_token;

$permissions = $facebook->api("/me/permissions", $access_token);
if( array_key_exists('publish_stream', $permissions['data'][0]) ) {
   // Permission is granted!
   echo "App has been installed";
   //then redirect to content page
} else {
   echo "App has not been installed";
   //then redirect user to welcoming page and let user read "term of use" and "privasy"
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:49:34.993

您不需要将 in 传递`$access_token`给`api()`函数。尝试像这样调用 API：

`$permissions = $facebook->api("/me/permissions");`

如果这不起作用，您可能需要将 Facebook SDK 升级到最新版本。`access_token`此外，在查询 API 以获取用户权限之前，检查是否实际返回是值得的。如果用户尚未登录并已批准应用程序，您的代码将失败。将代码更改为：

```
$access_token = $facebook->getAccessToken();

if ( $access_token ) {
    $permissions = $facebook->api( "/me/permissions" );
    if( array_key_exists('publish_stream', $permissions['data'][0]) ) {
       // Permission is granted!
       echo "App has been installed";
       //then redirect to content page
    } else {
       echo "App has not been installed";
       //then redirect user to welcoming page and let user read "term of use" and "privasy"
    }
} 
```

# ruby-on-rails - 我如何在rails find中进行左连接

> ID：10722106
> 
> 赞同：1
> 
> 时间：2012-05-23T14:30:06.097
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, join

我有这个

```
User.joins(:notifications).joins(:company_users).joins(:role_users).where("notifications.id = ? AND role_users.role_id != '1' AND (company_users.company_id = ? OR users.company_id = ?)", notification.id, p.company_id, p.company_id) 
```

=> []

产生这个 sql

```
SELECT `users`.* FROM `users` 
INNER JOIN `subscriptions` ON `users`.`id` = `subscriptions`.`user_id` 
INNER JOIN `notifications` ON `notifications`.`id` = `subscriptions`.`notification_id` 
INNER JOIN `company_users` ON `company_users`.`user_id` = `users`.`id` 
INNER JOIN `role_users` ON `role_users`.`user_id` = `users`.`id` 
WHERE (notifications.id = 1 
AND role_users.role_id != '1' 
AND (company_users.compcany_id = 67 OR users.company_id = 67)) 
```

问题是我需要离开 company_users 并且不知道如何在 rails 中实现这一点

我知道我可以用 find_by_sql 做到这一点，因为我听说那不是真正的轨道……任何想法

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T14:38:15.557

解决了

```
User.joins(:notifications).joins("LEFT JOIN `company_users` ON `company_users`.`user_id` = `users`.`id`").joins(:role_users).where("notifications.id = ? AND role_users.role_id != '1' AND (company_users.company_id = ? OR users.company_id = ?)", notification.id, p.company_id, p.company_id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-02T13:24:22.620

类用户 < ActiveRecord::Base

```
 has_many :friends, :foreign_key=>"u_from",:class_name=>"Friend" 
```

结尾

类朋友 < ActiveRecord::Base

```
 belongs_to :user 
```

结尾

friends = user.friends.where(:u_req_status=>2).joins("LEFT OUTER JOIN users ON users.u_id = friends.u_to").select("friend_id,u_from,u_to,u_first_name,u_last_name,u_email,u_fbid, u_twtid,u_picture_url,u_quote")

# qooxdoo - Qooxdoo - 有没有办法获得 VirtualTree 选择的父级？

> ID：10722107
> 
> 赞同：0
> 
> 时间：2012-05-23T14:30:08.140
> 
> 标签：qooxdoo

我正在关注 VirtualTree 演示，似乎无法找到一种方法来获取选择的父母：

```
tree.getSelection().addListener("change", function(e){
    var selection = tree.getSelection();
    console.log(selection.getItem(0).getName()); // works just fine to get the name
} 
```

我正在尝试从此 JSON 存储中获取属性“祖父母”和“父母”：

```
 {
      "name": "root",
      "children": [
        {
          "name": "Grandparent",
          "children": [
            {
              "name": "Parent",
              "children": [
                {
                   "name": "Name of my Selected Item", 
```

我试过这个：

```
tree.getModel().getChildren().getItem(0) 
```

但是获取 getItem(X) 的值 X 也并不简单。

我很感激你能提供的任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:07:49.627

As the tree data model does not have any parent reference by default. There is no easy way to get achieve that. Still, you have two choices.

1.  You can use your own tree classes as model and implement the parent reference yourself. This can be done by using the delegate of the marshaler [1]. Just make sure you don't activate the bubble events for the parent reference because that leads to an dead lock.

2.  You can implement an search algorithm to get the parent. If you don't need that reference very often and your data is not too big, thats also a way you could take.

[1] [http://demo.qooxdoo.org/current/apiviewer/#qx.data.marshal.IMarshalerDelegate](http://demo.qooxdoo.org/current/apiviewer/#qx.data.marshal.IMarshalerDelegate)

# java - 覆盖 Java 中的成员变量（变量隐藏）

> ID：10722110
> 
> 赞同：72
> 
> 时间：2012-05-23T14:30:10.870
> 
> 标签：java, overriding

我正在研究 JAVA 中的覆盖成员函数，并考虑尝试使用覆盖成员变量。

所以，我定义了类

```
public class A{
    public int intVal = 1;
    public void identifyClass()
    {
        System.out.println("I am class A");
    }
}

public class B extends A
{
    public int intVal = 2;
    public void identifyClass()
    {
        System.out.println("I am class B");
    }
}

public class mainClass
{
    public static void main(String [] args)
    {
        A a = new A();
        B b = new B();
        A aRef;
        aRef = a;
        System.out.println(aRef.intVal);
        aRef.identifyClass();
        aRef = b;
        System.out.println(aRef.intVal);
        aRef.identifyClass();
    }
} 
```

输出是：

```
1
I am class A
1
I am class B 
```

我无法理解为什么当 aRef 设置为 b 时 intVal 仍然属于 A 类？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-05-23T14:32:20.570

当您在子类中创建同名变量时，这称为**隐藏**。生成的子类现在实际上将具有**这两个**属性。`super.var`您可以使用或访问超类中的那个`((SuperClass)this).var`。变量甚至不必是同一类型；它们只是共享名称的两个变量，很像两个重载方法。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2012-05-23T14:30:58.607

Java中的变量不是多态的；它们不会相互覆盖。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-12-29T12:15:43.983

**Java 中的字段没有多态性。**

`Variables`决定发生在编译时，因此总是会访问**基类变量**（而不是子类的继承变量）。

因此，每当发生向上转换时，请始终记住

1) 将访问基类变量。

2）将调用子类方法（如果发生覆盖，则为覆盖的方法，否则将调用从父类继承的方法）。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-05-23T14:41:45.430

变量在编译时解析，方法在运行时解析。aRef 属于 A 类型，因此 aRef.Intvalue 在编译时解析为 1。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-01-22T08:05:54.043

Java 函数中的覆盖概念将覆盖取决于对象类型，变量将根据引用类型访问。

1.  覆盖函数：在这种情况下，假设父类和子类都具有相同的函数名称和自己的定义。但是哪个函数将执行它取决于对象类型而不是运行时的引用类型。

例如：

```
Parent parent=new Child();
parent.behaviour(); 
```

这`parent`是 Parent 类的引用，但包含 Child Class 的对象，因此在这种情况下将调用 Child 类函数。

```
Child child=new Child();
child.behaviour(); 
```

这里`child`有一个 Child Class 的对象，所以 Child 类的函数会被调用。

```
Parent parent=new Parent();
parent.behaviour(); 
```

这里`parent`存放的是Parent Class的对象，所以Parent类函数会被调用。

2.  覆盖变量：Java 支持重载变量。但实际上这是两个同名的不同变量，一个在父类中，一个在子类中。并且两个变量可以是相同的数据类型，也可以是不同的。

当您尝试访问变量时，它取决于引用类型对象，而不是对象类型。

例如：

```
Parent parent=new Child();
System.out.println(parent.state); 
```

引用类型是 Parent，因此访问的是 Parent 类变量，而不是 Child 类变量。

```
Child child=new Child();
System.out.println(child.state); 
```

这里引用类型是 Child，因此访问的是 Child 类变量而不是 Parent 类变量。

```
Parent parent=new Parent();
System.out.println(parent.state); 
```

这里引用类型是Parent，所以访问的是Parent类变量。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-11-22T22:03:00.743

> 从 JLS Java SE 7 版§15.11.1：
> 
> 这种对字段访问的动态查找的缺乏允许程序通过简单的实现有效地运行。后期绑定和覆盖的功能是可用的，但只有在使用实例方法时才可用。

Oliver Charlesworth 和 Marko Topolnik 的回答是正确的，我想详细说明问题的部分*原因*：

在 Java中，[类成员](https://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)是根据引用的类型而不是实际对象的类型来*访问的。*出于同样的原因，如果你有一个`someOtherMethodInB()`in class `B`，你将无法在运行`aRef`之后访问它`aRef = b`。标识符（即类、变量等名称）在编译时解析，因此编译器依赖引用类型来执行此操作。

现在在您的示例中，运行`System.out.println(aRef.intVal);`它时会打印`intVal`定义的值，`A`因为这是您用来访问它的引用的类型。编译器会看到它`aRef`的类型`A`，这就是`intVal`它将访问的类型。不要忘记您*在*`B`. JLS 也有一个类似于你的例子，“15.11.1-1\. 字段访问的静态绑定”，如果你想看看的话。

但是为什么方法的行为不同呢？答案是对于方法，Java 使用**后期绑定**。这意味着在编译时，它会在运行时找到最合适的方法来*搜索*。搜索涉及在某些类中重写方法的情况。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-04-04T10:37:55.120

**这称为变量隐藏**。当你分配时`aRef = b;`，`aRef`有两个intVal，1被命名只是`intVal`另一个隐藏在下面`A.intVal`（见调试器截图），因为你的变量是类型的`class A`，即使你打印只是`intVal`java智能拾取`A.intVal`。

**答案 1**：访问子类的一种方法`intVal` 是`System.out.println((B)aRef.intVal);`

**答案 2**：另一种方法是 Java 反射，因为当您使用反射时，java 无法`A.intVal`根据类类型智能地拾取隐藏，它必须拾取以字符串形式给出的变量名称 -

```
import java.lang.reflect.Field;

class A{
    public int intVal = 1;
    public void identifyClass()
    {
        System.out.println("I am class A");
    }
}

class B extends A
{
    public int intVal = 2;
    public void identifyClass()
    {
        System.out.println("I am class B");
    }
}

public class Main
{
    public static void main(String [] args) throws Exception
    {
        A a = new A();
        B b = new B();
        A aRef;
        aRef = a;
        System.out.println(aRef.intVal);
        aRef.identifyClass();
        aRef = b;
        Field xField = aRef.getClass().getField("intVal");
        System.out.println(xField.get(aRef));
        aRef.identifyClass();
    }
} 
```

输出 -

```
1
I am class A
2
I am class B 
```

[![在此处输入图像描述](../Images/eedfee08e2c7785a16294e8d0487602b.png)](https://i.stack.imgur.com/mR94A.png)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-05-25T02:57:06.970

我希望这可以帮助：

```
public class B extends A {
//  public int intVal = 2;

    public B() {
        super();
        super.intVal = 2;
    }

    public void identifyClass() {
        System.out.println("I am class B");
    }
} 
```

因此无法覆盖基类的变量，但可以从继承类的构造函数中设置（更改）基类变量值。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-23T14:48:13.593

根据 Java 规范，实例变量在扩展时不会被子类从超类覆盖。

因此，子类中的变量只能看作是同名的。

此外，当在 B 的实例创建期间调用 A 的构造函数时，变量 (intVal) 被初始化并因此输出。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-05-23T15:22:40.737

嗯，希望你能得到答案。如果没有，您可以尝试在调试模式下查看。子类 B 可以访问两个 intVal。它们不是多态的，因此它们不会被覆盖。

如果您使用 B 的参考，您将获得 B 的 intVal。如果你使用 A 的参考，你会得到 A 的 intVal。就是这么简单。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-01-30T08:04:40.003

这是因为当您将 b 分配给 aRef 时，它会被解析，导致 aRef 仅属于 A 类。这意味着 aRef 无法访问 B 类的任何字段或方法。如果您使用 b.intVal 调用 intVal，您将得到 2。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2020-10-26T03:26:32.383

正如许多用户已经指出的那样，这不是多态性。多态性仅适用于方法（函数）。

现在至于为什么要打印类 A 的 intVal 的值，这是因为您可以看到引用 aRef 的类型是 A。

我明白你为什么对此感到困惑。通过相同的过程，您访问了 ex 的覆盖方法。方法 identifyClass() 但不是直接证明我写的第一行的变量。

现在为了访问你可以做的变量 ((Superclass)c).var

请注意，超类可以有很多级别，例如 A<-B<-C。那就是 C 扩展 B 和 B 扩展 A。如果您想要 A 的 var 的值，那么您可以完成 ((A)c).var 。

编辑：正如其中一位用户指出的那样，这个“技巧”不适用于静态方法，因为它们是静态的。

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2016-01-07T13:27:26.127

Java 具有封装的特点，这意味着它紧密地绑定了对象的属性和行为。所以只有通过类引用我们才能调用它的行为来改变它的属性。

并且在继承中只有方法覆盖，以便它只能影响它的属性。

# ruby-on-rails - 如何从引擎中访问主要的 Rails 主应用程序控制器？

> ID：10722112
> 
> 赞同：3
> 
> 时间：2012-05-23T14:30:13.430
> 
> 标签：ruby-on-rails, refinerycms

我已经安装了炼油厂`/`，我正在尝试将它集成到我现有的应用程序中。（我也是 Rails 的新手：）

我已经覆盖`views/refinery/_header.html.erb`将登录/注销/编辑配置文件菜单添加到页面顶部：

```
<% if current_user %>
    <%= link_to current_user.email, :controller => "users", :action => :edit, :id => current_user.id %>
    <%= link_to "Log out", main_app.logout_url %>
<% else %>
    <%= link_to "Sign Up", main_app.signup_url %> or
    <%= link_to "Log In", main_app.login_url %>
<% end %> 
```

但是，此代码在加载时会生成错误：

```
No route matches {:controller=>"refinery/users", :action=>"edit", :id=>"a7ruusdt"} 
```

## 问题

1.  覆盖 _header.html.erb 是实现此目标的最佳实践吗？
2.  如果是这样，我如何从 Refinery 标头中访问我的应用程序的控制器？换句话说，我如何从引擎中访问主应用程序的控制器？

这是`rake routes`输出：

```
$ rake routes
       logout GET    /logout(.:format)             sessions#destroy
        login GET    /login(.:format)              sessions#new
       signup GET    /signup(.:format)             users#new
        users GET    /users(.:format)              users#index
              POST   /users(.:format)              users#create
     new_user GET    /users/new(.:format)          users#new
    edit_user GET    /users/:id/edit(.:format)     users#edit
         user GET    /users/:id(.:format)          users#show
              PUT    /users/:id(.:format)          users#update
              DELETE /users/:id(.:format)          users#destroy
     sessions GET    /sessions(.:format)           sessions#index
              POST   /sessions(.:format)           sessions#create
  new_session GET    /sessions/new(.:format)       sessions#new
 edit_session GET    /sessions/:id/edit(.:format)  sessions#edit
      session GET    /sessions/:id(.:format)       sessions#show
              PUT    /sessions/:id(.:format)       sessions#update
              DELETE /sessions/:id(.:format)       sessions#destroy
    followers GET    /followers(.:format)          followers#index
              POST   /followers(.:format)          followers#create
 new_follower GET    /followers/new(.:format)      followers#new
edit_follower GET    /followers/:id/edit(.:format) followers#edit
     follower GET    /followers/:id(.:format)      followers#show
              PUT    /followers/:id(.:format)      followers#update
              DELETE /followers/:id(.:format)      followers#destroy
     refinery        /                             Refinery::Core::Engine

Routes for Refinery::Core::Engine:
                                       /system/resources/*dragonfly(.:format)       <Dragonfly::App name=:refinery_resources >
        insert_admin_resources GET     /refinery/resources/insert(.:format)         refinery/admin/resources#insert
               admin_resources GET     /refinery/resources(.:format)                refinery/admin/resources#index
                               POST    /refinery/resources(.:format)                refinery/admin/resources#create
            new_admin_resource GET     /refinery/resources/new(.:format)            refinery/admin/resources#new
           edit_admin_resource GET     /refinery/resources/:id/edit(.:format)       refinery/admin/resources#edit
                admin_resource PUT     /refinery/resources/:id(.:format)            refinery/admin/resources#update
                               DELETE  /refinery/resources/:id(.:format)            refinery/admin/resources#destroy
                                       /system/images/*dragonfly(.:format)          <Dragonfly::App name=:refinery_images >
           insert_admin_images GET     /refinery/images/insert(.:format)            refinery/admin/images#insert
                  admin_images GET     /refinery/images(.:format)                   refinery/admin/images#index
                               POST    /refinery/images(.:format)                   refinery/admin/images#create
               new_admin_image GET     /refinery/images/new(.:format)               refinery/admin/images#new
              edit_admin_image GET     /refinery/images/:id/edit(.:format)          refinery/admin/images#edit
                   admin_image PUT     /refinery/images/:id(.:format)               refinery/admin/images#update
                               DELETE  /refinery/images/:id(.:format)               refinery/admin/images#destroy
               admin_dashboard GET     /refinery/dashboard(.:format)                refinery/admin/dashboard#index
 admin_disable_upgrade_message         /refinery/disable_upgrade_message(.:format)  refinery/admin/dashboard#disable_upgrade_message
                                       /system/resources/*dragonfly(.:format)       <Dragonfly::App name=:refinery_resources >
                               GET     /refinery/resources/insert(.:format)         refinery/admin/resources#insert
                               GET     /refinery/resources(.:format)                refinery/admin/resources#index
                               POST    /refinery/resources(.:format)                refinery/admin/resources#create
                               GET     /refinery/resources/new(.:format)            refinery/admin/resources#new
                               GET     /refinery/resources/:id/edit(.:format)       refinery/admin/resources#edit
                               PUT     /refinery/resources/:id(.:format)            refinery/admin/resources#update
                               DELETE  /refinery/resources/:id(.:format)            refinery/admin/resources#destroy
                                       /system/images/*dragonfly(.:format)          <Dragonfly::App name=:refinery_images >
                               GET     /refinery/images/insert(.:format)            refinery/admin/images#insert
                               GET     /refinery/images(.:format)                   refinery/admin/images#index
                               POST    /refinery/images(.:format)                   refinery/admin/images#create
                               GET     /refinery/images/new(.:format)               refinery/admin/images#new
                               GET     /refinery/images/:id/edit(.:format)          refinery/admin/images#edit
                               PUT     /refinery/images/:id(.:format)               refinery/admin/images#update
                               DELETE  /refinery/images/:id(.:format)               refinery/admin/images#destroy
               admin_dashboard GET     /refinery/dashboard(.:format)                refinery/admin/dashboard#inde
 admin_disable_upgrade_message         /refinery/disable_upgrade_message(.:format)  refinery/admin/dashboard#disable_upgrade_message
                                       /system/resources/*dragonfly(.:format)       <Dragonfly::App name=:refinery_resources >
                               GET     /refinery/resources/insert(.:format)         refinery/admin/resources#insert
                               GET     /refinery/resources(.:format)                refinery/admin/resources#index
                               POST    /refinery/resources(.:format)                refinery/admin/resources#create
                               GET     /refinery/resources/new(.:format)            refinery/admin/resources#new
                               GET     /refinery/resources/:id/edit(.:format)       refinery/admin/resources#edit
                               PUT     /refinery/resources/:id(.:format)            refinery/admin/resources#update
                               DELETE  /refinery/resources/:id(.:format)            refinery/admin/resources#destroy
                                       /system/images/*dragonfly(.:format)          <Dragonfly::App name=:refinery_images >
                               GET     /refinery/images/insert(.:format)            refinery/admin/images#insert
                               GET     /refinery/images(.:format)                   refinery/admin/images#index
                               POST    /refinery/images(.:format)                   refinery/admin/images#create
                               GET     /refinery/images/new(.:format)               refinery/admin/images#new
                               GET     /refinery/images/:id/edit(.:format)          refinery/admin/images#edit
                               PUT     /refinery/images/:id(.:format)               refinery/admin/images#update
                               DELETE  /refinery/images/:id(.:format)               refinery/admin/images#destroy
               admin_dashboard GET     /refinery/dashboard(.:format)                refinery/admin/dashboard#index
 admin_disable_upgrade_message         /refinery/disable_upgrade_message(.:format)  refinery/admin/dashboard#disable_upgrade_message
                          root GET     /                                            refinery/pages#home
                 preview_pages POST    /pages/preview(.:format)                     refinery/pages#preview
                  preview_page GET|PUT /pages/*path/preview(.:format)               refinery/pages#preview
                          page GET     /pages/:id(.:format)                         refinery/pages#show
                         admin GET     /refinery/pages/*path/edit(.:format)         refinery/admin/pages#edit
          admin_children_pages GET     /refinery/pages/*path/children(.:format)     refinery/admin/pages#children
                               PUT     /refinery/pages/*path(.:format)              refinery/admin/pages#update
                               DELETE  /refinery/pages/*path(.:format)              refinery/admin/pages#destroy
  update_positions_admin_pages POST    /refinery/pages/update_positions(.:format)   refinery/admin/pages#update_positions
                   admin_pages GET     /refinery/pages(.:format)                    refinery/admin/pages#index
                               POST    /refinery/pages(.:format)                    refinery/admin/pages#create
                new_admin_page GET     /refinery/pages/new(.:format)                refinery/admin/pages#new
               edit_admin_page GET     /refinery/pages/:id/edit(.:format)           refinery/admin/pages#edit
                    admin_page PUT     /refinery/pages/:id(.:format)                refinery/admin/pages#update
                               DELETE  /refinery/pages/:id(.:format)                refinery/admin/pages#destroy
   link_to_admin_pages_dialogs GET     /refinery/pages_dialogs/link_to(.:format)    refinery/admin/pages_dialogs#link_to
  test_url_admin_pages_dialogs GET     /refinery/pages_dialogs/test_url(.:format)   refinery/admin/pages_dialogs#test_url
test_email_admin_pages_dialogs GET     /refinery/pages_dialogs/test_email(.:format) refinery/admin/pages_dialogs#test_email
              admin_page_parts POST    /refinery/page_parts(.:format)               refinery/admin/page_parts#create
           new_admin_page_part GET     /refinery/page_parts/new(.:format)           refinery/admin/page_parts#new
               admin_page_part DELETE  /refinery/page_parts/:id(.:format)           refinery/admin/page_parts#destroy
     new_refinery_user_session GET     /refinery/users/login(.:format)              refinery/sessions#new
         refinery_user_session POST    /refinery/users/login(.:format)              refinery/sessions#create
 destroy_refinery_user_session DELETE  /refinery/users/logout(.:format)             refinery/sessions#destroy
        refinery_user_password POST    /refinery/users/password(.:format)           refinery/passwords#create
    new_refinery_user_password GET     /refinery/users/password/new(.:format)       refinery/passwords#new
   edit_refinery_user_password GET     /refinery/users/password/edit(.:format)      refinery/passwords#edit
                               PUT     /refinery/users/password(.:format)           refinery/passwords#update
     new_refinery_user_session GET     /refinery/login(.:format)                    refinery/sessions#new
 destroy_refinery_user_session GET     /refinery/logout(.:format)                   refinery/sessions#destroy
new_refinery_user_registration GET     /refinery/users/register(.:format)           refinery/users#new
    refinery_user_registration POST    /refinery/users/register(.:format)           refinery/users#create
                     wymiframe GET     /wymiframe(/:id)(.:format)                   refinery/fast#wymiframe
                       message GET     /refinery/message(.:format)                  refinery/fast#message
                    admin_root         /refinery(.:format)                          refinery/admin/dashboard#index
                  admin_dialog GET     /refinery/dialogs/:id(.:format)              refinery/admin/dialogs#show
refinery_update_menu_positions         /refinery/update_menu_positions(.:format)    refinery/admin/core#update_plugin_positions
                               GET     /sitemap.xml(.:format)                       refinery/sitemap#index {:format=>"xml"}
                   admin_users GET     /refinery/users(.:format)                    refinery/admin/users#index
                               POST    /refinery/users(.:format)                    refinery/admin/users#create
                new_admin_user GET     /refinery/users/new(.:format)                refinery/admin/users#new
               edit_admin_user GET     /refinery/users/:id/edit(.:format)           refinery/admin/users#edit
                    admin_user PUT     /refinery/users/:id(.:format)                refinery/admin/users#update
                               DELETE  /refinery/users/:id(.:format)                refinery/admin/users#destroy
                                       /refinery/*path(.:format)                    refinery/admin/base#error_404
                               GET     /refinery/users(.:format)                    refinery/admin/users#index
                               POST    /refinery/users(.:format)                    refinery/admin/users#create
                               GET     /refinery/users/new(.:format)                refinery/admin/users#new
                               GET     /refinery/users/:id/edit(.:format)           refinery/admin/users#edit
                               PUT     /refinery/users/:id(.:format)                refinery/admin/users#update
                               DELETE  /refinery/users/:id(.:format)                refinery/admin/users#destroy
                                       /refinery/*path(.:format)                    refinery/admin/base#error_404
               marketable_page GET     /*path(.:format)                             refinery/pages#show
                               GET     /refinery/users(.:format)                    refinery/admin/users#index
                               POST    /refinery/users(.:format)                    refinery/admin/users#create
                               GET     /refinery/users/new(.:format)                refinery/admin/users#new
                               GET     /refinery/users/:id/edit(.:format)           refinery/admin/users#edit
                               PUT     /refinery/users/:id(.:format)                refinery/admin/users#update
                               DELETE  /refinery/users/:id(.:format)                refinery/admin/users#destroy
                                       /refinery/*path(.:format)                    refinery/admin/base#error_404
                               GET     /refinery/users(.:format)                    refinery/admin/users#index
                               POST    /refinery/users(.:format)                    refinery/admin/users#create
                               GET     /refinery/users/new(.:format)                refinery/admin/users#new
                               GET     /refinery/users/:id/edit(.:format)           refinery/admin/users#edit
                               PUT     /refinery/users/:id(.:format)                refinery/admin/users#update
                               DELETE  /refinery/users/:id(.:format)                refinery/admin/users#destroy
                                       /refinery/*path(.:format)                    refinery/admin/base#error_404 
```

注意：我已经推出了自己的身份验证，它没有与 Refinery 的集成，我也不希望它集成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:43:02.050

您可以在路由之前使用 main_app 和“engine_name”来访问您想要的。假设您有一个名为 Foo 的引擎，例如 Foo::Engine：

```
main_app.pages_url
foo.pages_url 
```

# android - Textview's text is owerflow background of the button

> ID：10722116
> 
> 赞同：1
> 
> 时间：2012-05-23T14:30:27.857
> 
> 标签：android, button, textview

I have a textview and a button and when my textview's text is filling with a long sentence it is filling background of my button. What should I do to fix it ?

![enter image description here](../Images/d746b5b22fc689024ecdc09be5445807.png)

**Textview is "dosyaAdi", button is "buttonEkIndir"**

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.03"
    android:background="#ededed" >

    <TextView
        android:id="@+id/txtKimden"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="5dp"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="@android:color/black"
        android:textSize="20dp" />

    <TextView
        android:id="@+id/txtKonu"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/txtKimden"
        android:layout_marginLeft="10dp"
        android:text="Small Text"
        android:ellipsize="end"
        android:maxLines="3"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="@android:color/black"
        android:textSize="17dp" />

    <ImageView
        android:id="@+id/imageViewAttachment"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/txtKonu"
        android:layout_marginLeft="10dp"
        android:src="@drawable/ic_email_attachment65x30" />

    <TextView
        android:id="@+id/dosyaAdi"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/imageViewAttachment"
        android:layout_toRightOf="@+id/imageViewAttachment"

        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="@android:color/black"
        android:textSize="17dp" />

    <TextView
        android:id="@+id/txtTarih"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/txtKimden"
        android:layout_alignBottom="@+id/txtKimden"
        android:layout_alignParentRight="true"
        android:layout_marginRight="10dp"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="@android:color/black"
        android:textSize="15dp" />

    <TextView
        android:id="@+id/txtSaat"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/txtTarih"
        android:layout_below="@+id/txtTarih"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="@android:color/black"
        android:textSize="15dp" />

    <Button
        android:id="@+id/buttonEkIndir"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="70dip"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/dosyaAdi"
        android:layout_alignBottom="@+id/dosyaAdi"
        android:layout_alignLeft="@+id/txtSaat"
        android:text="İndir" />

</RelativeLayout>

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#ededed" >
</RelativeLayout>

<WebView
    android:id="@+id/webvGovde"
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="1" /> 
```

and for this one :

"txtKonu" is left one , "txtSaat" is right one

![enter image description here](../Images/f415a90d81364cabbfed44b80ad55b4a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T14:35:29.317

You could add `android:layout_toLeftOf="@id/buttonEkIndir` to the offending dosyaAdi.

However, that will mean the text stays to the left of the button even when it goes below it (not sure if this is important to you, just thought I'd mention it).

**EDIT**

And for the second one add `android:layout_toLeftOf="@id/txtSaat` to txtKonu.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T14:37:05.357

Besides layout adjustment solution from others, I think you should also set the following to your **TextView** because its pretty useless to show such a long file-name :)

```
android:ellipsize="end"
android:singleLine="true" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T14:35:37.217

Look at `android:layout_toLeftOf`. I believe you need to add that to the text view that is overflowing and set it equal to your button view. You want that TextView to be to the Left of the button.

# c++ - 从头文件中获取数据到源文件中的非成员函数中

> ID：10722120
> 
> 赞同：-1
> 
> 时间：2012-05-23T14:30:43.037
> 
> 标签：c++, header-files

我有一个像 BigArr, arr, ... 在标题中声明的数据：

```
class TableView:public QWidget 
{
  Q_OBJECT

  public:TableView (QWidget * parent = 0);

  std::vector < TXdata >  BigArr;

  std::vector < float >  arr;
  std::vector < float >  arr2;
  std::vector < int >  arrlocKtab;
  std::vector < int >  arrlocKrow; 
```

在源文件中，我有一些从其他地方复制/粘贴的功能，例如：

```
static void
 multiply (float q[4], float value)
{
  q[0] *= value;
  q[1] *= value;
  q[2] *= value;
  q[3] *= value;
} 
```

以及我制作的其他一些功能，例如：

```
 void
 TableView::ShowContextMenu (const QPoint & pos)    // this is a slot
 { 
```

如何从头文件中获取声明以在复制/粘贴函数中工作。像：

```
 static void
     multiply (float q[4], float value)
    {

  arr[0]= something... 
```

我将 c/p 函数重命名为 void TableView::function 并将它们添加到头文件中的函数列表中得到了一些不好的结果。可能与静态无效和静态内联无效有关... Ty

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:36:04.433

您必须将乘法函数定义为 TableView 类的一部分，如下所示：

```
class TableView:public QWidget 
{
    ...
    void multiply(float q[4], float value);
    ...
}; 
```

然后在源文件中定义如下：

```
void TableView::multiply(float q[4], float value)
{
    ...
    arr[0] = something;
    ...
} 
```

或者，如果您不能/不想使其成为 TableView 的成员，则将 TableView 的实例传递给 multiply()。如果您决定将 TableView 的实例传递给该函数，那么您将不得不考虑如何访问类成员，或者通过创建一个 getter 函数或将它们公开。getter 访问函数是一种更简洁的解决方案。

无论哪种方式都可以，但如果您决定让所有成员函数，请考虑设计并确保类不会变得臃肿，称为低内聚：en.wikipedia.org/wiki/Single_responsibility_principle

# javascript - 在javascript中获取用户帧率

> ID：10722121
> 
> 赞同：0
> 
> 时间：2012-05-23T14:30:55.543
> 
> 标签：javascript, html, css, performance

我用 javascript/html/css 编写了一个小浏览器游戏。为了提高我的游戏的性能，我想检查游戏在玩游戏的人的浏览器上是否运行缓慢并自动降低偏好。

有人知道如何检查当前用户（或硬件数据）的每秒帧数吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T15:06:53.093

如果您只使用 javascript、html 和 css（没有 jquery 或 dojo 或...），那么您应该自己测量。我假设你会有一些 while 循环来重新渲染整个屏幕或部分。检查调用了多少次，通过使用 Date() 你可以决定一帧的时间：

```
from=new Date();
//render one frame
to = new Date();
dt=to-from;
setFPS(1000/dt); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T15:09:57.153

你可以使用

`window.requestAnimationFrame`

```
requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame ||
                    window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
var start = window.mozAnimationStartTime;  // Only supported in FF. Other browsers can use something like Date.now().

function step(timestamp) {
  var progress = timestamp - start;
  d.style.left = Math.min(progress/10, 200) + "px";
  if (progress < 2000) {
  requestAnimationFrame(step);
}
}
requestAnimationFrame(step); 
```

更多关于： [https ://developer.mozilla.org/en/DOM/window.requestAnimationFrame](https://developer.mozilla.org/en/DOM/window.requestAnimationFrame)

# css - jQuery Mobile 标题按钮左右浮动

> ID：10722139
> 
> 赞同：3
> 
> 时间：2012-05-23T14:32:07.557
> 
> 标签：css, jquery-mobile

我试图让标题在左侧和右侧有两组按钮，但我无法让所有东西对齐并正确地向左/向右浮动。关于实现这一目标的简单方法的任何想法。

```
 <div data-theme="a" data-role="header" data-position="fixed">
<!-- back button -->                    
       <a style=" margin:5px 0 10px 0;" data-role="button" 
    data-transition="slide" data-theme="b" href="#track_dash" 
    data-icon="arrow-l" data-iconpos="left">
          Back
       </a>

<!-- chart switch -->                    
            <div data-role="fieldcontain" style="float: right;">
                <form action="#" method="POST">
                    <fieldset data-role="controlgroup" data-type="horizontal" >
                       <input name="radiobuttons5" id="radio7" value="radio1" type="radio" />
                       <label for="radio7">
                            List
                       </label>
                       <input name="radiobuttons5" id="radio8" value="radio8" type="radio" />
                       <label for="radio8">
                            Chart
                       </label>
                    </fieldset>
                </form>
            </div>

      </div> 
```

![左侧设计/右侧实际编码设计](../Images/2d94538ed7e0fb68d38959468b418d52.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-23T15:17:12.463

`class="ui-btn-left`在后退按钮和控制组上使用`class="ui-btn-right"`。

也许您还需要在两个元素之间放置一个标题，至少是空的`<h1></h1>`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-05T15:16:27.057

你现在可能想出了一个解决方案，但我在页脚中做了这个，它对我有用：

```
<div data-role="footer" class="ui-bar" data-position="fixed" data-id="myFooter">
    <div class="footerContainer">    
        <a href="index.html" data-role="button" data-mini="true" data-inline="true"class="ui-btn-left">Cancel</a>
        <a href="index.html" data-role="button" data-mini="true" data-inline="true"class="ui-btn-right">Next</a>
    </div>
</div> 
```

本质上，我将按钮包装在一个 div 中，这使我可以使用 ui-btn-left 和 right 来浮动按钮并正确对齐它们，到目前为止似乎没有引起任何冲突。

这是CSS

```
.footerContainer{
    width:97%;
    height:38px;
    border:none;
    position:relative;
    } 
```

我将宽度设置为 97% 因为 100% 将采用宽度加上填充和 position:relative 以便包含浮动。

# objective-c - XCode Instruments 发现内存泄漏：为什么？

> ID：10722140
> 
> 赞同：3
> 
> 时间：2012-05-23T14:32:09.397
> 
> 标签：objective-c, ios, memory-management, memory-leaks

我正在对正在创建的应用程序进行调试，但在运行仪器时发现了我无法理解的内存泄漏。

如果我尝试按照 Instruments 的建议修改代码，我的应用程序会因为以下原因而崩溃

> 发送到已释放实例的消息

有人能帮我吗？

```
- (void) objectAtIndex:(int)index {
    SpecialObject *specialObj = [SpecialObject sharedInstance];

    id model = [self.datasource objectAtIndex:index];

    if ([model isKindOfClass:[ClassA class]]) {
        ClassA *objA = (ClassA *)model;
        specialObj.title = objA.title;

    } else if ([model isKindOfClass:[ClassB class]]) {
        ClassB *objB = (ClassB *)model;
        specialObj.title = objB.title;
    }
} 
```

`self.datasource`是一段`NSMutableArray`时间`specialObj.title`是一个`NSString`

它们被定义为`@property(nonatomic, retain)`。

我的问题是 Instruments 告诉我这两个

```
ClassA *objA = (ClassA *)model;
ClassB *objB = (ClassB *)model; 
```

是泄漏，但如果我释放`objA`并且`objB`我的应用程序崩溃。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:42:49.230

我的猜测是你永远不会释放数据源。假设您没有使用 ARC，在您的`dealloc`方法中，您应该有

```
[self setDataSource: nil]; 
```

或者

```
[instanceVariableThatBacksDataSourceProperty release]; 
```

很多人都做前者，但苹果推荐后者，这样在释放过程中不会触发 KVO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T15:47:28.987

泄漏和您的异常是不同的事情。几乎可以肯定，该异常是由于发布了您不应该发布的内容而引起的。

两者都有的事实表明您对 Objective-C 内存管理的理解并不出色。

您应该首先专注于理解异常，而这样做的第一步是查看[异常回溯](https://stackoverflow.com/q/8100054/581994)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T11:17:16.330

经过一番搜索，我发现了问题：XCode*通常会*告诉您泄漏的位置，但有时它会为您提供可能的位置。

这意味着内存泄漏发生在程序流中的某个地方，到达 XCode 指示的点，不一定是它所说的确切位置。

希望这可以在将来对其他人有所帮助！

# java - android中导入数据库的问题

> ID：10722143
> 
> 赞同：1
> 
> 时间：2012-05-23T14:32:21.197
> 
> 标签：java, android, database, sqlite, import

我是android开发的新手。现在我正在尝试使用 sqlite db。我使用 sqlite manager 创建了一个数据库 sqlite 文件。我已经尝试了以下代码，它在模拟器中运行良好，但是如果我在设备中发布应用程序崩溃，即，它会显示一条警报消息应用程序 CheckMobileForDatabase 已意外停止，我的 sdk 版本是 2.2(8)

```
 private void StoreDatabase() {
 File DbFile=new File("data/data/com.sqldemo/databases/idua1");
 if(DbFile.exists())
 {
     System.out.println("file already exist ,No need to Create");
 }
 else
 {
     try 
     {
         DbFile.createNewFile();
         System.out.println("File Created successfully");
         InputStream is = this.getAssets().open("idua1.sqlite");
         FileOutputStream fos = new FileOutputStream(DbFile);
         byte[] buffer = new byte[1024];
            int length=0;
            while ((length = is.read(buffer))>0)
            {
            fos.write(buffer, 0, length);
            }
         System.out.println("File succesfully placed on sdcard");
            //Close the streams
            fos.flush();
            fos.close();
            is.close();
     }
     catch (IOException e)
     {
         e.printStackTrace();
     }
   }    
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:37:46.560

这可能是由于存储在您的 android 设备中的以前版本的数据库，尝试从您的设备中删除以前的数据库或更改代码中的数据库版本，以便调用 onupgrade

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T15:31:28.323

没有你的 logcat，这只是在黑暗中拍摄。

您可以尝试以另一种方式检查文件是否存在：

```
private static boolean checkDataBase(String dbname) {
    SQLiteDatabase checkDB = null;
    boolean exist = false;
    try {
        String db = MAIN_DB_PATH + dbname;
        checkDB = SQLiteDatabase.openDatabase(db, null,
                SQLiteDatabase.OPEN_READONLY);
    } catch (SQLiteException e) {
        Log.v("db log", "database does't exist");
    }
    if (checkDB != null) {
        exist = true;
        checkDB.close();
    }
    return exist;
} 
```

如果它不存在，然后运行另一种方法来复制数据库：

```
private static void copyDataBase(String dbname) throws IOException {
    InputStream myInput = mCtx.getAssets().open(dbname);
    String outFileName = MAIN_DB_PATH + dbname;
    OutputStream myOutput = new FileOutputStream(outFileName);
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer)) > 0) {
        myOutput.write(buffer, 0, length);
    }
    myOutput.flush();
    myOutput.close();
    myInput.close();
} 
```

# solr - Solr - 如何构造一个需要 NOT NULL Location 字段的查询

> ID：10722145
> 
> 赞同：35
> 
> 时间：2012-05-23T14:32:25.410
> 
> 标签：solr, geospatial, solr-query-syntax

我有一个 Solr 索引，其中包含一组存储为`Location`类型的坐标；我想查询该字段具有非空值的文档。

对 Location 字段执行 NOT NULL 检查的查询语法是什么？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-05-23T18:14:26.927

规范的方式是这样的：

```
fieldName:[* TO *] 
```

正如 Paige Cook 建议的那样，在左侧使用 a`''`可能也可以，但我不像上面那样相信它。由于这是一个位置字段，您可能必须针对两个底层实际字段之一而不是这个逻辑复合字段来执行此操作。`fieldName`它们以某种数字后缀开头和结尾；在模式浏览器中查看实际名称是什么。

这里需要注意的重要一点是，像这样的查询对于 Solr 来说是昂贵的，因为它在这个字段上进行了全索引扫描。如果您有许多不同的位置字段值（上千个？），那么这很重要。如果您在过滤器查询中执行此操作，那么它将被缓存并且可能没有实际意义。如果您希望此查询快速运行，那么在索引时您应该索引一个布尔字段以指示该字段中是否有值。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-23T15:00:01.230

您可以将此添加到您的查询`fieldname:['' TO *]`中。这将等效于 NOT NULL 检查。

我从帖子中得到了这个 - [Solr - Field Not Null Searches](http://melikedev.com/2010/07/27/solr-field-not-null-searches/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-10-30T09:31:05.620

对于位置字段（solr.LatLonType），使用以下过滤查询：（`-fieldName:[-90,-180 TO 90,180]`超出此范围的坐标仍然无效）

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2017-06-15T11:44:11.357

试试这个`q= !fieldname:NULL`，这将等同于`Fieldvalue`is NOT NULL。

STW 问我有一个 Solr 索引，其中包含一组存储为 Location 类型的坐标；我想查询该字段具有非空值的文档。

对 Location 字段执行 NOT NULL 检查的查询语法是什么？

# exception - 地理名称异常 - 原因：java.lang.ClassNotFoundException: org.jdom.input.SAXBuilder

> ID：10722148
> 
> 赞同：0
> 
> 时间：2012-05-23T14:32:50.287
> 
> 标签：exception, noclassdeffounderror, geonames

我正在尝试运行一个软件，我可以用它来建立一个实体是否是地理实体：

```
public boolean isgeo(String e) throws Exception{

    ToponymSearchCriteria searchCriteria = new ToponymSearchCriteria();
    searchCriteria.setNameEquals(e);
    ToponymSearchResult searchResult = WebService.search(searchCriteria);
    entity = (ArrayList) searchResult.getToponyms();
    for (Toponym toponym : searchResult.getToponyms()) {
         System.out.println(toponym.getName()+" "+ toponym.getCountryName());
      }

    if(entity.size()>0)
        return true;
    else
        return false;

} 
```

但是当我调用这个函数时，我有这些例外：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/jdom/input/SAXBuilder
at org.geonames.WebService.connectAndParse(Unknown Source)
at org.geonames.WebService.search(Unknown Source)
at geonames.utility.isgeo(utility.java:35)
at geonames.main.main(main.java:31)
Caused by: java.lang.ClassNotFoundException: org.jdom.input.SAXBuilder
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356) 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T03:30:31.050

你需要jdom-1.0 jar。不要下载任何其他版本，因为它不起作用。将此 jar 文件添加到您的项目中。

# rest - 为函数分配网址

> ID：10722149
> 
> 赞同：0
> 
> 时间：2012-05-23T14:32:50.307
> 
> 标签：rest, amazon-ec2, amazon-web-services, fortran

对不起，如果我没有清楚地表达自己。我需要： 使一个函数可以通过 HTTP(S) 通信访问，这意味着应该为我的函数分配一个网址。用户可以发送正确格式的输入来启动此功能。

目前，这些函数是用 FORTRAN 编写的，这意味着我无法将它们放到 Google App Engine 中。我的方法是：

1.  将 FORTRAN 代码上传到此云服务器并编译成可执行文件。
2.  '发布'这个编译好的 FORTRAN 代码，它会给它一个网址。
3.  允许用户向该地址发送输入并进行一些计算。
4.  将计算结果保存到 AMAZON S3 并生成链接供用户下载。

所以我的问题是这个功能的名称是什么（我猜它是 REST）？有没有大的云服务器可以提供这个服务（比如AMAZON、GOOGLE）？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T15:32:12.460

此功能的名称是什么？它称为 Web 服务，也称为 Web API。

这里有一个很好的解释：http: [//www.ibm.com/developerworks/webservices/library/ws-restful/](http://www.ibm.com/developerworks/webservices/library/ws-restful/)

Web 服务或多或少与网站完全相同（在 Web 服务器上运行，使用 HTTP），但它只返回数据，通常是 XML 或 JSON，没有图形或格式。

至于托管，正如我所说，托管网络服务和托管网页之间基本上没有区别。在应用程序级别，Web 服务只返回数据，而网站返回 HTML 格式的网页。当您考虑 HTML (XHTML) 实际上是 XML 的一个子集时，网站和 Web 服务之间实际上根本没有区别 - 唯一的区别是消费者：一个旨在看起来不错并被阅读的人消费一个网页，另一个只返回数据，并打算被某种客户端应用程序使用。

== 编辑 ==

Fortran 的存在时间比互联网要长得多。它是第一个高级编程语言......我认为是在 1950 年代开发的，比互联网早了大约 20 年。您不会找到可以托管 Fortran Web 服务或应用程序的任何人。如果您需要 Web 交互，也许可以考虑用 Python 重写——它们非常相似。或者，大多数 Web 语言都支持调用控制台应用程序：

[http://php.net/manual/en/function.shell-exec.php](http://php.net/manual/en/function.shell-exec.php)

[从 ASP.NET MVC 调用控制台应用程序，但不想等待响应](https://stackoverflow.com/questions/6490666/call-a-console-app-from-asp-net-mvc-but-dont-want-to-wait-for-the-response)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T15:31:39.873

听起来您想将计算机上的某些功能作为**Web 服务**公开。具体来说，如果您希望它的行为就像您实际调用计算机上的特定函数一样，它可能是一个**远程过程调用**。

许多因素会导致选择使用哪个供应商，如果您正在寻找基于云的解决方案，我会确定您是否要使用特定的语言，并查看哪些解决方案可以支持它。除此之外，每个都有不同的支持和定价模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-07T23:52:50.270

任何云提供商尝试“支持”Fortran 都没有商业意义。再说了，Fortran 太“牛”了，真的很难支持。

策略：

1.  使用另一种语言/框架创建 Web 服务，然后通过 CLI 调用调用 Fortran 代码。
2.  使用 Fortran 包装器和高级工具包（例如 Fortran for .NET）来创建 Web 服务。
3.  将 Fortran 代码编译为本机代码（例如 .dll）并使用 JNA 从 Java 调用，然后使用 Java Web 服务为函数创建 REST/SOAP WS。这可以使用 Netbeans IDE 轻松实现。

就个人而言，我会考虑选择选项 3。

这些是我归类为“特技”的一些东西，所以我会自动排除 AppEngine。我会在一个盒子（或虚拟盒子）上执行此操作，在那里我可以获得 root 访问权限并做任何我想做的事情（有很多这样的）。

这里有一些资源。

使用 Java Native Access 从 Java 调用 Fortran：http: [//oms.javaforge.com/wiki/66061](http://oms.javaforge.com/wiki/66061)

使用 JNI 从 Java 调用 Fortran：http: [//www.math.ucla.edu/~anderson/JAVAclass/JavaInterface/JavaInterface.html](http://www.math.ucla.edu/~anderson/JAVAclass/JavaInterface/JavaInterface.html)

Fortran for .NET 使用 Lahey/Fujitsu Fortran Enterprise：[http ://www.lahey.com/lf71/lf71.htm](http://www.lahey.com/lf71/lf71.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T23:27:55.477

我建议使用 VPS 类型的服务。我删除了 Google App Engine，因为它目前无法运行 Fortran 代码。您将查看 Amazon EC2 或只是从 GoDaddy、BlueHost、HostGator 等网络托管公司获得 VPS，具体取决于您可能的使用情况。

根据您的经验，您可以使用 Python、Ruby 或 PHP 来执行此操作。它们都具有强大的 Web 框架，并且可以调用本地系统上的可执行文件，例如 Fortran 编译器。因此，您可以在 Django 或 Rails 等框架中编写 Web 代码，然后调用本地 cgi 来执行 Fortran 代码并通过框架返回结果。

其他建议：您可能想看看使用[Pypy](http://pypy.org/)和 python 进行计算，它可以做的几乎和 Fortran 一样多，但更现代一些。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-14T16:08:07.043

这是一个用 Fortran 编写的 Web 应用程序：[https](https://github.com/rlcarino/heeds) ://github.com/rlcarino/heeds 。Fortran 程序通过 FastCGI 与 nginx 网络服务器通信。程序的数据存储在文本文件中；没有使用“正式”数据库。

该程序的实时运行可以在[http://heeds.csu.edu.ph/](http://heeds.csu.edu.ph/ "http://heeds.csu.edu.ph/")中找到。该应用程序在云中的服务器上运行。一些用户通过运行 Free Basics 的 Android 智能手机连接到它，而无需支付蜂窝数据费用，而 Free Basics 可在该地区使用。

# facebook - 如何将我的应用程序保留在 Canvas 页面上

> ID：10722151
> 
> 赞同：0
> 
> 时间：2012-05-23T14:32:51.253
> 
> 标签：facebook, api, facebook-graph-api, facebook-canvas

我找不到始终流畅的 100% 工作方式将我的应用程序始终保留在画布中，当 Facebook 发布操作并流式传输时，它将链接到网站 url 而不是画布。

如何顺利解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:49:40.117

```
 <script type="text/javascript">

  if (parent.location.href == self.location.href) {

        window.location.href = "https://apps.facebook.com/APP

   <?php echo $_SERVER["REQUEST_URI"];?>";
    }

  </script> 
```

# mysql - 在不使用 top 的情况下查找薪水最高的前 2 名员工

> ID：10722152
> 
> 赞同：4
> 
> 时间：2012-05-23T14:32:51.397
> 
> 标签：mysql, sql, database

找出薪水最高的前 2 名员工。

表名是`salary`，列是`name,salary`

我们可以使用limit命令来做这个查询

```
select * from salary order by salary DESC limit 0,2 
```

但是如何在不使用 top 和 limit 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T14:40:13.620

我相信这个面试问题试图引导你使用嵌套选择、公用表表达式或类似的东西。`TOP 2`是一个简单的答案，显然`TOP`是为了这个目的而实施的——面试希望你“手动”做。

在理论代码中。在第一个（嵌套）选择中为每一行指定一个行数，然后从行数比您需要的行数多一个的结果中进行选择，在这种情况下为 3。

[MySQL - 在选择时获取行号](https://stackoverflow.com/questions/2520357/mysql-get-row-number-on-select)

嵌套选择（伪代码）：

```
select row_count, * from salary order by salary desc 
```

外选：

```
select * from <nested select> where row_count < 3 
```

***很抱歉，这不是 MySQL 代码，但我只知道 SQL Server。***

我有一些使用行数的 SQL Server 代码：

```
declare @Salaries table
(
   id int,
   salary money
)

insert into @salaries (id, salary)
values (1, 1),
(2, 2),
(3, 3),
(4, 4),
(5, 4)  -- A duplicating salary

;WITH Props AS
(
    SELECT *,
        ROW_NUMBER() OVER (ORDER BY salary desc) AS RowNumber
    FROM @Salaries
)
SELECT * FROM Props WHERE RowNumber < 3 
```

这将返回 ID 为 4 和 5 的行。

* * *

**解决 Sachin Kainth 的答案**

我相信这个答案是不正确的。尝试以下 SQL Server 代码：

```
declare @Salaries table
(
   id int,
   salary money
)

insert into @salaries (id, salary)
values (1, 1),
(2, 2),
(3, 3),
(4, 4),
(5, 4)

select * from @salaries where salary in -- "in" introduces the problem
(
SELECT MAX(E1.Salary)  
FROM @salaries E1, @salaries E2
WHERE E1.Salary < E2.Salary

union

SELECT MAX(Salary)  
FROM @salaries
) 
```

这将返回 ID 为 3、4 和 5 的行。而不仅仅是 4 和 5。这是因为外部 select with 子句`where salary in`将采用第 3、4 和 5 行，它们的薪水都由嵌套选择返回（返回薪水值 3 和 4)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T14:42:38.643

根据 SQL:2008 标准，您可以附加`FETCH FIRST 10 ROWS ONLY`到查询中。虽然，我从未尝试过这个。所以在你的情况下你会有

```
SELECT * FROM salary ORDER BY salary DESC FETCH FIRST 2 ROWS ONLY 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T15:37:47.243

这是在MySQL中：

```
SET @row := 0;
SELECT name, salary FROM
(SELECT name, salary, @row := @row + 1 AS Row FROM salary ORDER BY salary DESC)
  AS derived1
WHERE Row < 3 
```

仍然有一个警告。如果有重复的工资，结果可能会出现偏差。如果结果集大于两行，则结果中不会包含平局，但由于问题是针对两个薪水最高的员工而不是两个薪水最高的员工，所以这是我能做的最好的事情。

或许正确的答案是问“重复工资怎么办？”

如果它绝对必须是单个查询，这就是诀窍：

```
SELECT name, salary FROM
(SELECT name, salary, @row := @row + 1 AS Row FROM (SELECT @row := 0) AS d1, salary)
  AS d2
WHERE Row < 3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T14:39:31.367

```
select * from salary where salary in
(
SELECT MAX(E1.Salary)  
FROM Salary E1, Salary E2
WHERE E1.Salary < E2.Salary

union

SELECT MAX(Salary)  
FROM Salary
) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-05T07:37:28.167

```
+------+
| Sal  |
+------+
| 3500 | 
| 2500 |
| 2500 | 
| 5500 |
| 7500 |
+------+ 
```

以下查询将返回第 N 个最大值元素。

```
select SAL from EMPLOYEE E1 where 
 (N - 1) = (select count(distinct(SAL)) 
            from EMPLOYEE E2 
            where E2.SAL > E1.SAL ) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-05T11:39:28.437

> 表结构

```
CREATE TABLE `emp` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(20) DEFAULT NULL,
  `salary` int(10) DEFAULT NULL
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1 
```

> Mysql查询第n个术语n代表第n个项目

```
SELECT salary 
FROM emp 
WHERE salary = (SELECT DISTINCT(salary) 
                FROM emp AS e1 
                WHERE (n) = (SELECT COUNT(DISTINCT(salary)) 
                             FROM emp AS e2 
                             WHERE e1.salary <= e2.salary)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-10T00:40:11.173

```
SELECT e1.EmployeeID, e1.LastName, COUNT(DISTINCT e2.EmployeeID) AS sals_higher
FROM Employees e1
INNER JOIN Employees e2 ON e1.EmployeeID < e2.EmployeeID
GROUP BY e1.EmployeeID
HAVING sals_higher <= 2
ORDER BY e1.EmployeeID DESC 
```

访问[https://www.w3schools.com/sql/trysql.asp?filename=trysql_select_union3](https://www.w3schools.com/sql/trysql.asp?filename=trysql_select_union3) 并尝试给定的代码，它会为您提供前 2 个最大 EmployeeID。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-22T18:39:28.760

`我认为这可能有效

```
 select * from salary s1 where 2>=(select count(distinct id) from salary s2
 where s1.salary<=s2.salary) order by salary desc; 
```

这是关联查询。对于外部查询中的每一行，内部查询将运行并通过将外部查询的薪水值与表中的每个薪水进行比较来返回一个计数值。它就像编程语言的嵌套循环

假设我们有两列 id 和薪水的表 Salary

```
id Salary
1  1200
2  12345
3  123456
4  2535436 
```

输出将是

```
id salary
4  2535436
2  123456 
```

# c# - 显示数据表的最简单方法是什么？

> ID：10722157
> 
> 赞同：0
> 
> 时间：2012-05-23T14:33:13.513
> 
> 标签：c#, asp.net

来自 PHP 背景。显示用 C# 填充的数据表最简单（最好？）的方法是什么？可以根据需要修改数据的格式，现在，我正在考虑使用 2D 列表来存储数据。

Gridview 很好，但我还没有找到一种方法来使用 C# List 作为它的数据源。

不需要真正的功能。我可以实现自己的编辑器/插入器等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T14:37:15.603

Gridview 是您所需要的。要绑定到列表，只需将列表设置为数据源，然后离开：

```
List<x> myList = GetList();

myGrid.DataSource = myList;
myGrid.DataBind(); 
```

或者改用页面上的 ObjectDataSource 控件...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T16:01:42.850

DataTable 可能是另一个最佳选择，因为它可以支持表的特定列，或者您可以在 DataTable 中管理整个表 DataTable dt=new DataTable(); 现在您可以将数据库中的表存储到其中，并可以将其用作列表视图或网格视图的数据源

# python - GNU time(1) 报告错误的 I/O 计数

> ID：10722160
> 
> 赞同：0
> 
> 时间：2012-05-23T14:33:25.653
> 
> 标签：python, time, gnu

在 Fedora 16 上，在一个只对文件执行 10 次 1024 字节写入的小程序上运行 time(1)，报告“24 个输出”。我期望 I/O 计数为 10。请注意，如果我在程序上运行 strace，我可以看到 10 个 write() 调用。那么 time(1) 报告的 I/O 计数是多少？多谢

```
#!/usr/bin/python

import os
import pdb

SIZE_IO=1024
IONB=10

def test1(file):
    #pdb.set_trace()
    buffer= '\x01' * SIZE_IO
    fd = os.open(file, os.O_CREAT|os.O_RDWR, 0777)
    for ix in range(IONB):
        len = os.write(fd, buffer)
        print len
    os.close(fd)
    return 1

if name__== "__main":
    test1("ttt.txt")
    print 'ok' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T15:06:18.913

不是每个打印都会导致写入吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T16:00:10.390

摘自手册页中的*ACCURACY*部分`time(1)`：

> '%I' 和 '%O' 值据称只是“真实”输入和输出，不包括缓存设备提供的值。'%I' 和 '%O' 报告的 'real' I/O 的含义对于工作站来说可能是混乱的，尤其是无盘工作站。

# google-maps-api-3 - 从不同的 json 文件中获取数据

> ID：10722161
> 
> 赞同：0
> 
> 时间：2012-05-23T14:33:38.880
> 
> 标签：google-maps-api-3

我上周在 [http://code.google.com/p/gmaps-samples-v3/source/browse/trunk/talks/io2011/map-usability/mappanslow.html?spec=svn265&r=上找到了这个文件 mappanslow.html 265](http://code.google.com/p/gmaps-samples-v3/source/browse/trunk/talks/io2011/map-usability/mappanslow.html?spec=svn265&r=265) ，知道如何从 json 文件中获取数据对我来说非常有用。我目前正在 V3 中重新编码这张地图 [http://www.ville.rimouski.qc.ca/styles/carte/carte.jsp](http://www.ville.rimouski.qc.ca/styles/carte/carte.jsp)我的问题是用户必须能够选择哪些数据（来自不同的json 文件）将通过在“Imprimer”下的选择框中选择他想要的内容来显示。mappaslow.html 适用于一个 json 文件，但我尝试将代码用于多个 json 文件，如果我列出，例如，我的所有文件如下所示：

```
<script type="text/javascript" src="file1.json"></script>
<script type="text/javascript" src="file2.json"></script>
<script type="text/javascript" src="file3.json"></script> 
```

显示的数据始终来自最后一个（file3.json）。

有谁知道如何解决这个问题？

有来自 mappaslow.html 的代码：

```
<script type="text/javascript" src="markers.json"></script>
<script type="text/javascript">
var map;        
var timeout;        
var m = [];        
function init() {          
  map = new google.maps.Map(document.getElementById('map'), {
    center: new google.maps.LatLng(44.85471, -93.24185),
    zoom: 17,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    mapTypeControl: false
  });
  google.maps.event.addListener(map, 'bounds_changed', function() {
    clearMarkers();
    if (timeout) {
      window.clearTimeout(timeout);
    }
    timeout = window.setTimeout(function() {
      addMarkers();

    }, 500);
  });
}
function addMarkers() {
  var bounds = map.getBounds();
  for (var i = 0; i < markers.length; i++) {
    var pos = new google.maps.LatLng(markers[i].lat, markers[i].lng);
    if (bounds.contains(pos)) {
      var marker = new google.maps.Marker({
        map: map,
        position: pos
      });
      m.push(marker);
    }
  }
}

function clearMarkers() {          
  for (var i = 0, marker; marker = m[i]; i++) {            
    marker.setMap(null);
  }
  m = [];
}
google.maps.event.addDomListener(window, 'load', init);
</script> 
```

* * *

此示例中使用的 json 文件和我的地图如下所示：

```
var markers = [
{"lat":44.86065444748757, "lng":-93.26223975870084},
{"lat":44.84990797511595, "lng":-93.22287578639873}]; 
```

感谢您的建议@harmlessdragon，但我希望能够通过在参数中传递所选 .json 的名称来指定正确的变量，因为它们的结构是相同的。就像是：

```
 function addMarkers(jsonName) {
  var rightJson = jsonName;
  var bounds = map.getBounds();
  for (var i = 0; i < rightJson.markers.length; i++) {
    var pos = new google.maps.LatLng(rightJson.markers[i].lat, rightJson.markers[i].lng);
 ... 
```

有可能做这样的事情吗？我尝试了很多方法，但总是导致语法错误或未定义的东西。

别忘了目标是上面第二个链接的地图。。

* * *

@harmlessdragon，我终于找到了 json 文件的正确语法：

```
var markers = [{
            "file1": [
                {"lat": "number", "lng": "number"}, {"lat": "number", "lng": "number"}, 
        ]},{"file2": [
                {"lat": "number", "lng": "number"}, {"lat": "number", "lng": "number"}, 
        ]},{"file3": [
                {"lat": "number", "lng": "number"}, {"lat": number, lng: number"}
        ]           

}]; 
```

我看到一个警告，第一个循环识别了正确数量的“文件”。现在的问题是任何东西都会进入第二个循环：

```
for (var t = 0; t < markers[i].length; t++) { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:01:02.043

最近的编辑：

我将在这里关闭这个例子：

[http://www.json.org/js.html](http://www.json.org/js.html)

```
var myJSONObject = {"bindings": [
    {"ircEvent": "PRIVMSG", "method": "newURI", "regex": "^http://.*"},
    {"ircEvent": "PRIVMSG", "method": "deleteURI", "regex": "^delete.*"},
    {"ircEvent": "PRIVMSG", "method": "randomURI", "regex": "^random.*"}
   ]
};

myJSONObject.bindings[0].method    // "newURI" 
```

您的循环应类似于以下内容：

```
function addMarkers(param) {
   if (param == "1") {
    // if it is for file one, loop through all in file one
    for (t = 0; t < markers.file1.length; t++ ) {
           var pos = new google.maps.LatLng(markers.file1[t].lat, markers.file1[t].lng)
            // then create marker, push map, etc.
     }
   } else if (param == "2") {
     // if it is for file two, loop through all in file two instead
           for (t = 0; t < markers.file2.length; t++ ) {
           var pos = new google.maps.LatLng(markers.file2[t].lat, markers.file2[t].lng)
            // then create marker, push map, etc.
     }
   } else if ( param == "3") {
     for (t = 0; t < markers.file3.length; t++ ) {
           var pos = new google.maps.LatLng(markers.file3[t].lat, markers.file3[t].lng)
            // then create marker, push map, etc.
     }
   }
} 
```

///////////////////////////////////////// /////////////////////////////////

您不能以相同的名称存储不同的数据并在没有一些区分数据的指示符的情况下检索数据。如果您想使用相同的变量名称，则需要将该附加指标添加到您的 json 中并合并您的 json 文件。

你可以这样做：

```
var markers = [
      file1: {
                {lat: number, lng: number}, {lat: number, lng: number}, etc.
      }
      file2: {
              {lat: number, lng: number}, {lat: number, lng: number}, etc.
      }
      file3: {
              {lat: number, lng: number}, {lat: number, lng: number}, etc.
      }
 ]; 
```

然后，要检索数据，您需要添加另一个循环。这个json结构是一个数组......在一个数组内......在一个数组内，我认为这不是最有效的。

```
 function addMarkers(param) {

            ...

          for (var i = 0; i < markers.length; i++) {
              for (var t = 0; t < markers[i].length; t++) {
                 if (markers[i] == param) {
                   var pos = new google.maps.LatLng(markers[i].lat, markers[i].lng);
                   if (bounds.contains(pos)) {
                     var marker = new google.maps.Marker({
                         map: map,
                         position: pos
                     });
                    m.push(marker);
                  }
                 }
             } 
```

您可能需要考虑查看哈希映射结构。这是我刚刚查到的一个：

[http://freecode-freecode.blogspot.com/2007/06/hashmap-object-in-javascript-like.html](http://freecode-freecode.blogspot.com/2007/06/hashmap-object-in-javascript-like.html)

上面的代码中的某些语法可能是错误的，因为我不经常用 Javascript 编写代码，但我应该传达需要做什么的总体思路。

///////////////////////////////////////// //////////////////////////////////

也许我们需要的是关于 file1.json、file2.json 和 file3.json 的信息。

我正在进行一些假设，但这是我对正在发生的事情的猜测：

如果您有 files1.json、file2.json、file3.json 等，并且您按照有的示例，`var markers = []`那么您创建了 3 个具有相同名称的变量，它们相互覆盖，这就是为什么 files3.json ，您创建的最后一个是剩下的。

如果您希望此示例为您工作，则需要注意以下几点：

```
// This method adds a marker by looping through the variable 
// with the name 'markers', which you created
// in the JSON file with var markers = [].
function addMarkers() {
    var bounds = map.getBounds();
    for (var i = 0; i < markers.length; i++) {
      var pos = new google.maps.LatLng(markers[i].lat, markers[i].lng);
      if (bounds.contains(pos)) {
        var marker = new google.maps.Marker({
          map: map,
          position: pos
        });
        m.push(marker);
      }
    }
  } 
```

如果您希望此示例正常工作，则需要确保 json 文件具有不同名称的变量，并确保将上述方法更改为新名称。这可能意味着您将拥有 3 个不同的函数：addJSONFile1Markers、addJSONFile2Markers、addJSONFile3Markers，其中每个函数处理不同的变量。或者，您可以创建一个基于参数检查要为其添加标记的文件的函数。

```
function addMarkers(FILE2) {
   if (FILE2 == "file2") {
        // do this for file2
   }
   else if (FILE3 == "file3") {
        // do this for file 3
   }
} 
```

这只是伪代码中的一个示例。

如果这不是问题，请提供有关 json 文件的更多信息。

# axapta - ttsbegin、ttscommit 和“~”运算符

> ID：10722165
> 
> 赞同：3
> 
> 时间：2012-05-23T14:34:01.643
> 
> 标签：axapta, x++

我正在学习 X++，我有 2 个问题：

没看懂有什么用`ttsbegin and ttscommit`！我必须在哪里使用它，实用程序是什么？

[X++ 标准：ttsBegin 和 ttsCommit AX 2012](http://msdn.microsoft.com/en-us/library/aa609617.aspx)

这个运算符“~”有什么用处？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T15:04:40.203

从[文档](http://msdn.microsoft.com/en-us/library/aa622564.aspx)中：

> `ttsBegin`: 标记事务的开始。这确保了数据完整性，并保证在事务结束之前执行的所有更新（通过`ttsCommit`或`ttsAbort`）是一致的（全部或无）。
> 
> `ttsCommit`: 标志着一个事务的成功结束。这结束并提交事务。MorphX 保证提交的事务将根据意图执行。

注意

> 通常最好使用异常处理而不是`ttsAbort`. throw 语句自动中止当前事务。

这意味着您将开始一个事务`ttsBegin`并结束它`ttsCommit`（如果成功）或抛出异常（如果事务不成功）。从文档中不清楚，但事务意味着对应用程序表的操作。

当您希望确保对应用程序表的读取或更新操作不会因同时发生的其他表操作而不一致时，您将使用它们

请参阅同一链接中的示例。

[`~`运算符](http://msdn.microsoft.com/EN-US/library/aa870833)不是按位运算，即翻转整数中的每个位。例如，（假设 32 位整数）：`~0`is `FFFFFFFF`（每个位现在为 1），`~4`is `FFFFFFFB`（十六进制表示）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T14:57:06.773

当您访问表中的数据时使用 ttsbegin，它会通知系统到数据库的事务将发生。
当您在一行中更新/保存数据时，您必须调用 ttscommit 否则更改将恢复为原始值，类似于在 C#/VB 中使用数据集时，您必须告诉数据集提交所有更改到数据库。

ttsbegin 类似于 BEGIN SQL 语句，而 ttscommit 类似于 COMMIT SQL 语句。

你必须一起使用它们：
ttsbegin;
'在此处添加代码以检索数据和操作数据'
ttscommit;

您大声嵌套 ttsbegins 和 ttscommits，但要小心多次使用上述内容，因为不关闭一个 ttsbegin 可能会搞砸很多事情，我发现调用 ttsbegin 和 ttscommit 一次就足够了。

至于“~”，我在为 Axapta（Microsoft Dynamics AX）编写 X++ 的 2 年中从未使用过它。

# javascript - 循环检查复选框然后显示结果

> ID：10722167
> 
> 赞同：0
> 
> 时间：2012-05-23T14:34:03.670
> 
> 标签：javascript, jquery, html

我正在做一个练习，用户必须从列表中检查正确答案，然后按提交以查看他/她的表现如何。但是，我的提交按钮似乎不起作用。单击它时没有任何反应。这是脚本：

```
<script>
//Returns how many correct answers were checked
$('#submitButton').click(function(){
    var arrayScore = [];        
    var tempScore = 0;
    $('.confirmContainer').remove();
    $('.toggleConfirmList:checked').each(function(){
        arrayScore.push($(this).val());
    });
    for(var i=0; i<arrayScore.length; i++)
    {
        tempScore = arrayScore[i] + tempScore;  

    }

    $('feedback').show();
    $("#scoreArea").val(tempScore);     

});
</script> 
```

基本上我想禁用输入容器，然后在计算用户分数后显示反馈。

这是脚本使用的 HTML 代码：

```
<ol class="toggleConfirmList" start="1">
                        <!-- Start of toggleConfirm question -->
                        <li class="toggleConfirm">
                            <p class="question">What is your citizenship?
                            </p>
                            <div class="toggleInputContainer">
                            <input type="checkbox" value="1">
                            </div>
                        </li>  
                        <li class="toggleConfirm">  
                            <p class="question">What is the purpose of your trip</p>
                            <div class="toggleInputContainer">
                            <input type="checkbox" value="1">
                            </div>
                        </li>
                        <li class="toggleConfirm">  
                            <p class="question">How long will you be staying in Canada?</p>
                            <div class="toggleInputContainer">
                            <input type="checkbox" value="0">
                            </div>
                        </li>
                        <li class="toggleConfirm">  
                            <p class="question">Where will you be staying?</p>
                            <div class="toggleInputContainer">
                            <input type="checkbox" value="0">
                            </div>
                        </li>
                        <li class="toggleConfirm">  
                            <p class="question">What is your occupation?</p>
                            <div class="toggleInputContainer">
                            <input type="checkbox" value="0">
                            </div>
                        </li>
                        <li class="toggleConfirm">  
                            <p class="question">Do you have any family in Canada?</p>
                            <div class="toggleInputContainer">
                            <input type="checkbox" value="1">
                            </div>
                        </li>
                        <li class="toggleConfirm">  
                            <p class="question">How will you support yourself in Canada?</p>
                            <div class="toggleInputContainer">
                            <input type="checkbox" value="0">
                            </div>
                        </li>
                        <li class="toggleConfirm">  
                            <p class="question">Do you intend to work or study while you are in Canada?</p>
                            <div class="toggleInputContainer">
                            <input type="checkbox" value="0">
                            </div>
                        </li>
                        <li class="toggleConfirm">  
                            <p class="question">Have you ever been convicted of a criminal offence?</p>
                            <div class="toggleInputContainer">
                            <input type="checkbox" value="0">
                            </div>
                        </li>
                        <li class="toggleConfirm">  
                            <p class="question">Do you suffer from any medical conditions?</p>
                            <div class="toggleInputContainer">
                            <input type="checkbox" value="0">
                            </div>
                        </li>
                        <li class="toggleConfirm">  
                            <p class="question">Have you ever been refused a visa to Canada?</p>
                            <div class="toggleInputContainer">
                            <input type="checkbox" value="0">
                            </div>
                        </li>
                        <li class="toggleConfirm">  
                            <p class="question">In which country do you reside permanently?</p>
                            <div class="toggleInputContainer">
                            <input type="checkbox" value="1">
                            </div>
                        </li>                                          
                  </ol>

                      <div class="confirmContainer">
           <input type="button" id="submitButton" value="Submit">
           </div>
                      <div class="feedback">
                                    <strong>Answer:</strong>In the exercise you checked <span id="scoreArea">0</span> correct questions

                      </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:41:58.027

尝试将您的代码包装在`$(document).ready(function(){...});`. 可能是在 DOM 准备好之前它正在执行。

```
<script>
//Returns how many correct answers were checked
$(document).ready(function(){
    $('#submitButton').click(function(){
        var arrayScore = [];        
        var tempScore = 0;
        $('.confirmContainer').remove();
        $('.toggleConfirmList:checked').each(function(){
            arrayScore.push($(this).val());
        });
        for(var i=0; i<arrayScore.length; i++){
            tempScore = arrayScore[i] + tempScore;  
        }
        $('feedback').show();
        $("#scoreArea").val(tempScore);     
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T14:51:02.763

要将值设置为 span 元素，您应该使用`text()`方法而不是`val()`：

```
//Returns how many correct answers were checked
$('#submitButton').click(function(){
    var arrayScore = [];        
    var tempScore = 0;
    $('.confirmContainer').remove();
    $(':checkbox:checked').each(function(){ // for selecting checkboxes you can use ":checkbox" selector
        arrayScore.push(parseInt($(this).val())); // parseInt() the values
    });
    for(var i=0; i<arrayScore.length; i++)
    {
        tempScore = arrayScore[i] + tempScore;  

    }

    $('.feedback').show(); // class selectors should have '.'
    $("#scoreArea").text(tempScore); // use text() instead of val()    

}); 
```

[http://jsfiddle.net/EWgzq/2/](http://jsfiddle.net/EWgzq/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T14:47:16.050

```
<script>
//Returns how many correct answers were checked
$('#submitButton').click(function(){
    var arrayScore = [];        
    var tempScore = 0;
    $('.confirmContainer').remove();
    $('.toggleInputContainer input[type="checkbox"]:checked').each(function(){
        arrayScore.push($(this).val()*1); // See the *1
    });
    for(var i=0; i<arrayScore.length; i++)
    {
        tempScore = arrayScore[i] + tempScore;  

    }

    $('div.feedback').show(); // added div. it was missing.
    $("#scoreArea").html(tempScore);    // it should be .html() or .text() not .val(). The .val() works only for form elements 

});
</script> 
```

# django - django：将参数传递给自定义视图类（继承版）

> ID：10722168
> 
> 赞同：1
> 
> 时间：2012-05-23T14:34:05.050
> 
> 标签：django

再次为这可能是一个简单的问题道歉！

好的，所以！

我的问题是我有一个 saveModel 函数，它保存一个模型。如果模型都很好（is_valid），它将保存模型并重定向到pageA

如果模型不好，或者请求是 GET，那么我想重定向到 pageB

一切都很好，但是我这样做了好几次，真烦人！我不想一直剪切和粘贴，所以我想出了这个：

```
class SaveModel(View):
    def as_view(self):
        if request.method == "POST":
            form = SaveModel.getPostForm(self.request)
            if form.is_valid():
                processedForm = SaveModel.processForm(self.request)
                processedForm.save()
                if (self.success_template):
                    return render_to_response(self.success_template)
                else:
                    return render_to_response('pageA.html')
        else:
            form = SaveModel.getForm()
        if (self.context_object_name):
            contextName = context_object_name
        else:
            contextName = 'form'
        if (self.template_name):
            return render_to_response(template_name,{contextName:form})
        else :
            return render_to_response('pageB.html',{contextName:form})

    def getForm(self):
        return None

    def getPostForm(self,request):
        return None

    def processForm(self,form,request):
        return None 
```

然后，我定义了其他类来处理特定的模型，例如：

```
class StoryModelView(SaveModel):
    def getForm(self,request):
        return StoryForm()

    def getPostForm(self,request):
        return StoryForm(request.POST)

    def processForm(self,form,request):
        theStory = form.save(commit=False)
        theStory.user = request.user
        return theStory 
```

然后，最后，在我的 urls.py 中，我将引用（如上）要使用的模型，如下所示：

```
url(r'^addStory/$',
    StoryModelView.as_view(
        context_object_name='form',
        template_name='accounts/addStory.html',
        success_template='accounts/addStorySuccess.html'
    )
), 
```

但这似乎不起作用 - pycharm 向我保证我对 self.context_object_name 等的引用是无效的。我是 python 和 django 的新手（这就是为什么我认为我会和他们一起建立一个网站！聪明的安德鲁！），所以我确信我错过了很多东西（抽象方法和东西。 .. python 会这样做，对吗？）

我需要做什么才能让这一切正常工作？这是我应该做的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:23:19.650

由我回答！

好的，所以每个人写的关于 CreateView 的评论可能是正确的。“可能”是因为我从未最终使用它，因为我最终还是坚持使用我的代码。

如果有人像我一样是 python 和 django 的新手，想看看整个事情是如何工作的，我们来了！

```
class SaveModel(View):
    success_template = None
    context_object_name = None
    template_name = None

    def post(self, request):
        form = self.getPostForm(self.request)
        if form.is_valid():
            processedForm = self.processForm(form,self.request)
            processedForm.save()
            if self.success_template:
                return render_to_response(self.success_template)
            else:
                return render_to_response('accounts/addStorySuccess.html')
        else:
            self.renderValidations(form)

    def get(self,request):
        form = self.getForm()
        self.renderValidations(form)

    def renderValidations(self,form):
        if self.context_object_name:
            contextName = self.context_object_name
        else:
            contextName = 'form'
        if self.template_name:
            return render_to_response(self.template_name,{contextName:form})
        else :
            return render_to_response('accounts/addStory.html',{contextName:form})

    def getForm(self):
        return None

    def getPostForm(self,request):
        return None

    def processForm(self,form,request):
        return None 
```

那是主类，然后我可以像这样覆盖它：

```
class StoryModelView(SaveModel):
    def getForm(self):
        return StoryForm()

    def getPostForm(self,request):
        return StoryForm(request.POST)

    def processForm(self,form,request):
        theStory = form.save(commit=False)
        theStory.user = request.user
        return theStory 
```

几次我都对“自我”在 python 中的工作方式感到困惑。它似乎与所有方法调用一起神奇地发送，但你需要它作为方法声明中的第一个参数（但在调用/使用方法时你永远不需要使用它）

我认为覆盖 View 类时只有 post 或 get 方法。我对调用的“过程”或顺序不是很清楚，调度被提及为要覆盖的东西，但我怀疑这只是我需要更改何时/如何处理不同请求的地方类型（GET、POST、HEAD 等）

哦！urls.py！

```
url(r'^addStory/$',
    StoryModelView.as_view(
        context_object_name='form',
        template_name = 'accounts/addStory.html',
        success_template= 'accounts/addStorySuccess.html'
    )
), 
```

我可以将任何我想要的东西放入“as_view”调用中，然后，只要在覆盖类中定义了这些参数，一切都很好。

太好了！我的班级所有的工作和女性想要我。使用我的代码，这也可能发生在你身上！*

*结果非典型和虚构。您的结果可能会有所不同。

# android - SIP API 作为网络服务

> ID：10722169
> 
> 赞同：0
> 
> 时间：2012-05-23T14:34:22.457
> 
> 标签：android, ios, web-services, api, sip

我目前正处于我在一家提供 VoIP 解决方案的公司实习的早期阶段。我基本上是在这里为 iPhone 创建一个自定义的 SIP 客户端应用程序。然而，我告诉他们，如果我要正确设置 MVC 模式并且在可移植性方面更有效，那么在移植到不同平台时将需要编写最少的代码。

我选择使用 MonoTouch C#.NET，以获得高可移植性和生产力（学习 Objective-C 对我的时间框架来说太陡峭 + 内存管理太耗时）。为了创造更多的可移植性，我一直在考虑将 C# SIP 库公开为 Web 服务，因此当移植到 Android 时，连接到不同 API 的情况就更少了。此外，出于编译原因，MonoTouch 不允许使用动态库。

我的应用程序将与 SIP Web 服务通信，而 Web 服务又与 SIP 服务器通信。

SIP 对 HTTP 非常熟悉，但是这个解决方案可以工作吗？因为我也将面临实时传输协议。

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T16:23:08.563

据我所知，这行不通，因为正如您所提到的，您将面临 RTP。您可能会在对话中遇到很多延迟。此外，您必须弄清楚如何在客户端和服务器之间传输数据。

然而，要真正知道这是否可以做到，需要做一些原型来测试这类问题。

# c++ - 静态数组类变量“多重定义”C++

> ID：10722173
> 
> 赞同：6
> 
> 时间：2012-05-23T14:34:51.517
> 
> 标签：c++, static-members, multiple-definition-error, static-array

我正在编写一些代码，我需要有一个静态 int 数组的类变量。我知道我可以在头文件中使用类似的东西来做到这一点，啊：

```
#ifndef A_H_
#define A_H_

class A
{
public:
  static const int a[];
};

const int A::a[] = {1,2};

#endif 
```

如果我随后将此标头仅包含在另一个文件中，这很好用，如下所示，main.cpp：

```
#include "A.h"

#include <iostream>
using namespace std;

int main()
{

  A myA;  
  cout << "0: " << myA.a[0] << endl;
  cout << "1: " << myA.a[1] << endl;
} 
```

但是假设我需要我的 A 类更复杂一些，并且我也想要一个 A.cpp 文件。我将保持我的 main.cpp 文件相同，但随后将 Ah 更改如下（我刚刚添加了一个函数 printA）：

```
#ifndef A_H_
#define A_H_

class A
{
public:
  void printA() const;
  static const int a[];
};

const int A::a[] = {1,2};

#endif 
```

然后在文件 A.cpp 中：

```
#include "A.h"

#include <iostream>
using namespace std;

void A::printA() const
{

  cout << "Printing in A.cpp." << endl;
  cout << "A.0: " << a[0] << endl;
  cout << "A.1: " << a[1] << endl;

} 
```

用 gcc -o Ao -c A.cpp 编译 Ao 没问题。但是在编译 main.cpp (gcc -o atest main.cpp Ao) 时链接它会失败，并出现“'A::a' 的多重定义”。

我一直在网上搜索解决方案，发现在标头中声明了变量的人在多个地方包含标头时会出现“多重定义”错误，解决方案似乎是在标头，然后仅在一个源（非标头）源文件中定义它。但是我不能同时声明静态和外部的类变量，可以吗？如果我尝试，或者如果我只是将它声明为 extern，我会收到关于变量不是静态的警告（当我同时尝试这两种方法时也会出现“冲突说明符”错误）。

所以，我的问题是：如果头文件需要包含在多个源文件中，是否可以使用静态数组类变量？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-23T14:35:58.710

您违反了**单一定义规则**。在实现文件中移动定义：

```
//A.cpp
#include "A.h"
const int A::a[] = {1,2}; 
```

您所指的解决方案，带有`extern`，适用于非成员变量。在您的情况下`a`是班级成员。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-23T14:45:37.703

您应该删除“const int A::a[] = {1,2};” 头文件中的行。将此定义行放入其中一个 .cpp 文件中。然后，您可以在需要的地方多次包含头文件。

# cmake - Cmake ARGV 和宏BUG？

> ID：10722177
> 
> 赞同：0
> 
> 时间：2012-05-23T14:35:08.947
> 
> 标签：cmake

下面就奇怪了！

```
macro(foo in1)
  message("FIRST" ${in1})
  message("OPtional1:" ${ARGV1})
  message("OPtional2:" ${ARGV2})
if( NOT ${ARGV1} AND ${ARGV2} )
   message("IF")  
else()
   message("ELSE")  
endif()
endmacro() 
```

运行以下：

```
foo("gaga" false true) 
```

（应该给出“如果”）有效！

**但**

```
foo("gaga" false) 
```

（应该给出“ELSE”，因为第二个可选参数是 FALSE！）

结果错误：

```
cmake:126 (if):
given arguments:  "NOT" "false" "AND"
Unknown arguments specified 
```

这是bug吗？？

以下作品：

```
if( NOT "${ARGV1}" AND "${ARGV2}" )
   message("IF")  
else()
   message("ELSE")  
endif() 
```

为什么？？？

谢谢你的帮助！

（它的功能是有效的）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T15:55:41.720

在宏中，ARGV1 等不是真正的 CMake 变量。相反，`${ARGV1}`是宏调用中的字符串替换。这意味着您只有一个参数的调用扩展为

```
if( NOT false AND ) 
```

这解释了错误消息。通过将字符串扩展括在引号中，您现在有了

```
if( NOT "false" AND "") 
```

给 IF 命令一个空字符串来评估。其他解决方案：在尝试扩展 ARGV2 之前，使用 ${ARGC} 字符串替换来确定参数是否存在。或者，正如您所提到的，切换到函数而不是宏。在函数中，ARGV1 是一个实际的 CMake 变量，您可以更合理地编写它，即使根本没有 ${} 扩展：

```
function(foo in1)
  message("Optional1: " ${ARGV1})
  message("Optional2: " ${ARGV2})
if( NOT ARGV1 AND ARGV2 )
   message("IF")  
else()
   message("ELSE")  
endif()
endfunction() 
```

参考： [http ://www.cmake.org/cmake/help/v2.8.8/cmake.html#command:macro](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command:macro)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T08:31:58.403

```
if(NOT ARGV1 AND ARGV2) 
```

是相同的

```
if(ARGV2 AND NOT ARGV1) 
```

逻辑否定（和大多数其他一元运算符）在合取之前绑定。

# java - 实现 USSD 功能。将服务绑定到 PhoneUtils 而无需在每次更新时重新启动手机

> ID：10722178
> 
> 赞同：32
> 
> 时间：2012-05-23T14:35:12.740
> 
> 标签：java, android, ussd

我正在尝试实现一个应用程序来在 android 上发送、接收和解析 USSD 代码。到目前为止，我使用[http://commandus.com/blog/?p=58](http://commandus.com/blog/?p=58)上的代码来获得此功能。为了使服务正常工作，手机需要重新启动。用户第一次安装应用程序时这不是问题，但我在模拟器上测试时注意到的是，每次更新时手机都需要重新启动，即使该服务没有任何新内容。我想知道的是：

*   是否可以让 PhoneUtils 绑定到我的服务而无需重新启动？至少在更新时间？
*   如果没有办法这样做，我正在考虑创建 2 个应用程序，一个是用户将与之交互的普通应用程序，另一个是包含我的服务的单独应用程序。在这种情况下，如果用户需要任何 ussd 功能，将在第一次运行时提示用户安装第二个应用程序。我担心这对用户来说很烦人。您认为解决这种方法的最佳方法是什么？

作为参考，我已经包含了我用于服务的代码，因为接口部分与原始网站上发布的不同。

界面：

```
* This file is auto-generated.  DO NOT MODIFY.
package com.android.internal.telephony;

/**
 * Interface used to interact with extended MMI/USSD network service.
 */
public interface IExtendedNetworkService extends android.os.IInterface {
/** Local-side IPC implementation stub class. */
public static abstract class Stub extends android.os.Binder implements
        com.android.internal.telephony.IExtendedNetworkService {
    private static final java.lang.String DESCRIPTOR = "com.android.internal.telephony.IExtendedNetworkService";

    /** Construct the stub at attach it to the interface. */
    public Stub() {
        this.attachInterface(this, DESCRIPTOR);
    }

    /**
     * Cast an IBinder object into an
     * com.android.internal.telephony.IExtendedNetworkService interface,
     * generating a proxy if needed.
     */
    public static com.android.internal.telephony.IExtendedNetworkService asInterface(
            android.os.IBinder obj) {
        if ((obj == null)) {
            return null;
        }
        android.os.IInterface iin = (android.os.IInterface) obj
                .queryLocalInterface(DESCRIPTOR);
        if (((iin != null) && (iin instanceof com.android.internal.telephony.IExtendedNetworkService))) {
            return ((com.android.internal.telephony.IExtendedNetworkService) iin);
        }
        return new com.android.internal.telephony.IExtendedNetworkService.Stub.Proxy(
                obj);
    }

    public android.os.IBinder asBinder() {
        return this;
    }

    @Override
    public boolean onTransact(int code, android.os.Parcel data,
            android.os.Parcel reply, int flags)
            throws android.os.RemoteException {
        switch (code) {
        case INTERFACE_TRANSACTION: {
            reply.writeString(DESCRIPTOR);
            return true;
        }
        case TRANSACTION_setMmiString: {
            data.enforceInterface(DESCRIPTOR);
            java.lang.String _arg0;
            _arg0 = data.readString();
            this.setMmiString(_arg0);
            reply.writeNoException();
            return true;
        }
        case TRANSACTION_getMmiRunningText: {
            data.enforceInterface(DESCRIPTOR);
            java.lang.CharSequence _result = this.getMmiRunningText();
            reply.writeNoException();
            if ((_result != null)) {
                reply.writeInt(1);
                android.text.TextUtils
                        .writeToParcel(
                                _result,
                                reply,
                                android.os.Parcelable.PARCELABLE_WRITE_RETURN_VALUE);
            } else {
                reply.writeInt(0);
            }
            return true;
        }
        case TRANSACTION_getUserMessage: {
            data.enforceInterface(DESCRIPTOR);
            java.lang.CharSequence _arg0;
            if ((0 != data.readInt())) {
                _arg0 = android.text.TextUtils.CHAR_SEQUENCE_CREATOR
                        .createFromParcel(data);
            } else {
                _arg0 = null;
            }
            java.lang.CharSequence _result = this.getUserMessage(_arg0);
            reply.writeNoException();
            if ((_result != null)) {
                reply.writeInt(1);
                android.text.TextUtils
                        .writeToParcel(
                                _result,
                                reply,
                                android.os.Parcelable.PARCELABLE_WRITE_RETURN_VALUE);
            } else {
                reply.writeInt(0);
            }
            return true;
        }
        case TRANSACTION_clearMmiString: {
            data.enforceInterface(DESCRIPTOR);
            this.clearMmiString();
            reply.writeNoException();
            return true;
        }
        }
        return super.onTransact(code, data, reply, flags);
    }

    private static class Proxy implements
            com.android.internal.telephony.IExtendedNetworkService {
        private android.os.IBinder mRemote;

        Proxy(android.os.IBinder remote) {
            mRemote = remote;
        }

        public android.os.IBinder asBinder() {
            return mRemote;
        }

        public java.lang.String getInterfaceDescriptor() {
            return DESCRIPTOR;
        }

        /**
         * Set a MMI/USSD command to ExtendedNetworkService for further
         * process. This should be called when a MMI command is placed from
         * panel.
         * 
         * @param number
         *            the dialed MMI/USSD number.
         */
        public void setMmiString(java.lang.String number)
                throws android.os.RemoteException {
            android.os.Parcel _data = android.os.Parcel.obtain();
            android.os.Parcel _reply = android.os.Parcel.obtain();
            try {
                _data.writeInterfaceToken(DESCRIPTOR);
                _data.writeString(number);
                mRemote.transact(Stub.TRANSACTION_setMmiString, _data,
                        _reply, 0);
                _reply.readException();
            } finally {
                _reply.recycle();
                _data.recycle();
            }
        }

        /**
         * return the specific string which is used to prompt MMI/USSD is
         * running
         */
        public java.lang.CharSequence getMmiRunningText()
                throws android.os.RemoteException {
            android.os.Parcel _data = android.os.Parcel.obtain();
            android.os.Parcel _reply = android.os.Parcel.obtain();
            java.lang.CharSequence _result;
            try {
                _data.writeInterfaceToken(DESCRIPTOR);
                mRemote.transact(Stub.TRANSACTION_getMmiRunningText, _data,
                        _reply, 0);
                _reply.readException();
                if ((0 != _reply.readInt())) {
                    _result = android.text.TextUtils.CHAR_SEQUENCE_CREATOR
                            .createFromParcel(_reply);
                } else {
                    _result = null;
                }
            } finally {
                _reply.recycle();
                _data.recycle();
            }
            return _result;
        }

        /**
         * Get specific message which should be displayed on pop-up dialog.
         * 
         * @param text
         *            original MMI/USSD message response from framework
         * @return specific user message correspond to text. null stands for
         *         no pop-up dialog need to show.
         */
        public java.lang.CharSequence getUserMessage(
                java.lang.CharSequence text)
                throws android.os.RemoteException {
            android.os.Parcel _data = android.os.Parcel.obtain();
            android.os.Parcel _reply = android.os.Parcel.obtain();
            java.lang.CharSequence _result;
            try {
                _data.writeInterfaceToken(DESCRIPTOR);
                if ((text != null)) {
                    _data.writeInt(1);
                    android.text.TextUtils.writeToParcel(text, _data, 0);
                } else {
                    _data.writeInt(0);
                }
                mRemote.transact(Stub.TRANSACTION_getUserMessage, _data,
                        _reply, 0);
                _reply.readException();
                if ((0 != _reply.readInt())) {
                    _result = android.text.TextUtils.CHAR_SEQUENCE_CREATOR
                            .createFromParcel(_reply);
                } else {
                    _result = null;
                }
            } finally {
                _reply.recycle();
                _data.recycle();
            }
            return _result;
        }

        /**
         * Clear pre-set MMI/USSD command. This should be called when user
         * cancel a pre-dialed MMI command.
         */
        public void clearMmiString() throws android.os.RemoteException {
            android.os.Parcel _data = android.os.Parcel.obtain();
            android.os.Parcel _reply = android.os.Parcel.obtain();
            try {
                _data.writeInterfaceToken(DESCRIPTOR);
                mRemote.transact(Stub.TRANSACTION_clearMmiString, _data,
                        _reply, 0);
                _reply.readException();
            } finally {
                _reply.recycle();
                _data.recycle();
            }
        }
    }

    static final int TRANSACTION_setMmiString = (android.os.IBinder.FIRST_CALL_TRANSACTION + 0);
    static final int TRANSACTION_getMmiRunningText = (android.os.IBinder.FIRST_CALL_TRANSACTION + 1);
    static final int TRANSACTION_getUserMessage = (android.os.IBinder.FIRST_CALL_TRANSACTION + 2);
    static final int TRANSACTION_clearMmiString = (android.os.IBinder.FIRST_CALL_TRANSACTION + 3);
}

/**
 * Set a MMI/USSD command to ExtendedNetworkService for further process.
 * This should be called when a MMI command is placed from panel.
 * 
 * @param number
 *            the dialed MMI/USSD number.
 */
public void setMmiString(java.lang.String number)
        throws android.os.RemoteException;

/**
 * return the specific string which is used to prompt MMI/USSD is running
 */
public java.lang.CharSequence getMmiRunningText()
        throws android.os.RemoteException;

/**
 * Get specific message which should be displayed on pop-up dialog.
 * 
 * @param text
 *            original MMI/USSD message response from framework
 * @return specific user message correspond to text. null stands for no
 *         pop-up dialog need to show.
 */
public java.lang.CharSequence getUserMessage(java.lang.CharSequence text)
        throws android.os.RemoteException;

/**
 * Clear pre-set MMI/USSD command. This should be called when user cancel a
 * pre-dialed MMI command.
 */
public void clearMmiString() throws android.os.RemoteException;
} 
```

服务：

```
package net.g_el.mobile.mtc;

import android.app.Service;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.net.Uri;
import android.os.IBinder;
import android.os.PatternMatcher;
import android.os.RemoteException;
import android.util.Log;

import com.android.internal.telephony.IExtendedNetworkService;

/**
* Service implements IExtendedNetworkService interface.
* USSDDumbExtendedNetworkService Service must have name
* "com.android.ussd.IExtendedNetworkService" of the intent declared in the
* Android manifest file so com.android.phone.PhoneUtils class bind to this
* service after system rebooted. Please note service is loaded after system
* reboot! Your application must check is system rebooted.
* 
* @see Util#syslogHasLine(String, String, String, boolean)
*/
public class USSDDumbExtendedNetworkService extends Service {
public static final String TAG = "MobileServices";
public static final String LOG_STAMP = "*USSDTestExtendedNetworkService bind successfully*";
public static final String URI_SCHEME = "ussd";
public static final String URI_AUTHORITY = "g_el.net";
public static final String URI_PATH = "/";
public static final String URI_PAR = "return";
public static final String URI_PARON = "on";
public static final String URI_PAROFF = "off";
public static final String MAGIC_ON = ":ON;)";
public static final String MAGIC_OFF = ":OFF;(";
public static final String MAGIC_RETVAL = ":RETVAL;(";

private static boolean mActive = false;
private static CharSequence mRetVal = null;
private Context mContext = null;
private String msgUssdRunning = "G Testing...";

final BroadcastReceiver mReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        if (Intent.ACTION_INSERT.equals(intent.getAction())) {
            mContext = context;
            if (mContext != null) {
                msgUssdRunning = mContext.getString(R.string.msgRunning);
                mActive = true;
                Log.d(TAG, "activate");
            }
        } else if (Intent.ACTION_DELETE.equals(intent.getAction())) {
            mContext = null;
            mActive = false;
            Log.d(TAG, "deactivate");
        }
    }
};

private final IExtendedNetworkService.Stub mBinder = new IExtendedNetworkService.Stub() {

    @Override
    public void setMmiString(String number) throws RemoteException {
        Log.d(TAG, "setMmiString: " + number);
    }

    @Override
    public CharSequence getMmiRunningText() throws RemoteException {
        Log.d(TAG, "getMmiRunningText: " + msgUssdRunning);
        return msgUssdRunning;
    }

    @Override
    public CharSequence getUserMessage(CharSequence text)
            throws RemoteException {
        if (MAGIC_ON.contentEquals(text)) {
            mActive = true;
            Log.d(TAG, "control: ON");
            return text;
        } else {
            if (MAGIC_OFF.contentEquals(text)) {
                mActive = false;
                Log.d(TAG, "control: OFF");
                return text;
            } else {
                if (MAGIC_RETVAL.contentEquals(text)) {
                    mActive = false;
                    Log.d(TAG, "control: return");
                    return mRetVal;
                }
            }
        }

        if (!mActive) {
            Log.d(TAG, "getUserMessage deactivated: " + text);
            //return null;//Use this in order to cancel the output on the screen.
            return text;
        }
        String s = text.toString();
        // store s to the !
        Uri uri = new Uri.Builder().scheme(URI_SCHEME).authority(URI_AUTHORITY).path(URI_PATH).appendQueryParameter(URI_PAR,text.toString()).build();
        sendBroadcast(new Intent(Intent.ACTION_GET_CONTENT, uri));
        mActive = false;
        mRetVal = text;
        Log.d(TAG, "getUserMessage: " + text + "=" + s);
        return null;
    }

    @Override
    public void clearMmiString() throws RemoteException {
        Log.d(TAG, "clearMmiString");
    }
};

/**
 * Put stamp to the system log when PhoneUtils bind to the service after
 * Android has rebooted. Application must call
 * {@link Util#syslogHasLine(String, String, String, boolean)} to check is
 * phone rebooted or no. Without reboot phone application does not bind tom
 * this service!
 */
@Override
public IBinder onBind(Intent intent) {
    IntentFilter filter = new IntentFilter();
    filter.addAction(Intent.ACTION_INSERT);
    filter.addAction(Intent.ACTION_DELETE);
    filter.addDataScheme(URI_SCHEME);
    filter.addDataAuthority(URI_AUTHORITY, null);
    filter.addDataPath(URI_PATH, PatternMatcher.PATTERN_LITERAL);
    registerReceiver(mReceiver, filter);
    // Do not localize!
    Log.i(TAG, LOG_STAMP);

    return mBinder;
}

public IBinder asBinder() {
    Log.d(TAG, "asBinder");
    return mBinder;
}

@Override
public boolean onUnbind(Intent intent) {
    unregisterReceiver(mReceiver);
    return super.onUnbind(intent);
}

   } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T00:24:32.693

请清楚，您完全脱离了平台内部实现的杂草。听起来您希望它“运行良好”。你正在做的事情不会很好，期间。您无法保证这些内部实现在不同版本的平台，甚至是制造商设备上的不同平台版本中保持相同，也无法保证您在此接口周围看到的行为在不同情况下会保持相同的效果。

这只是坏坏坏。不要这样做。

# haskell - GADT 或幻像类型对函数调用进行类型检查，但保持类型的同质性

> ID：10722181
> 
> 赞同：5
> 
> 时间：2012-05-23T14:35:18.807
> 
> 标签：haskell, algebraic-data-types

我假设可以使用类型算术解决以下问题，但尚未找到解决方案。

## 问题

我有一个从字符串到值的有限映射（使用 Tries 作为实现），我从二进制/文本文件（json、xml、...）解析。

```
type Value = ...
type Attributes = Data.Trie Value 
data Object = Object Attributes 
```

每个映射具有相同类型的值，但不同的键集。我将具有相同键集的映射分组在一起，以防止必须一直进行类型切换我有一个需要某些键的专用功能：

```
data T1
data T2 
...

data Object a where
    T1 :: Attributes -> Object T1
    T2 :: Attributes -> Object T2
    ... 
```

这使我可以编写如下内容：

```
f1 :: Object T1 -> ... 
```

代替

```
f1 :: Object ->
f1 o | check_if_T1 o = ... 
```

这可行，但有两个缺点：

1.  Object 的同构列表现在变得异构，即我不能再拥有一个列表 [Object]。
2.  我需要编写很多样板来获取/设置属性：

    ```
    get :: Object a -> Attributes
    get (T1 a) = a
    get (T2 a) = a
    ... 
    ```

## 问题

1.  有没有更好的方法来根据 ADT 的构造函数专门化函数？
2.  我怎样才能重新获得拥有列表 [对象] 的能力？是否有专门的 Dynamic 版本只允许某些类型？我想过再次包装对象，但这会增加很多样板。例如，

    数据 TObject = TT1 T1 | TT2 T2 ...

我需要的是：

```
get :: a -> TObject -> Object a 
```

这样我就可以得出：

```
collect :: a -> [TObject] -> [Object a] 
```

我查看了 HList 但我认为它不适合我的问题。特别是，因为 [Object] 中的类型顺序在编译时是未知的。

在我看来，这可以使用函数依赖/类型算术来解决，但我还没有找到一个好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:34:16.403

1.  如果所有构造函数都返回一个单态`Object`类型并且没有递归，那么您可能需要考虑只使用单独的类型。代替

    ```
    data T1
    data T2

    data Object a where
        T1 :: Attributes -> Object T1
        T2 :: Attributes -> Object T2 
    ```

    考虑

    ```
    data T1 = T1 Attributes
    data T2 = T2 Attributes 
    ```

2.  `Dynamic`是一种方法，使用上述方法，您可以添加`deriving Typeable`并完成。或者，您可以手动完成：

    ```
    data TSomething = It's1 T1 | It's2 T2

    getT1s :: [TSomething] -> [T1]
    getT2s :: [TSomething] -> [T2]
    getT1s xs = [t1 | It's1 t1 <- xs]
    getT2s xs = [t2 | It's2 t2 <- xs] 
    ```

    正如你所说，这涉及到一些样板文件。该`Typeable`版本看起来更好一些：

    ```
    deriving Typeable T1
    deriving Typeable T2

    -- can specialize at the call-site to
    -- getTs :: [Dynamic] -> [T1] or
    -- getTs :: [Dynamic] -> [T2]
    getTs :: Typeable a => [Dynamic] -> [a]
    getTs xs = [x | Just x <- map fromDynamic xs] 
    ```

# c# - 如何将一个字段与一个表中的另一个字段连接起来？

> ID：10722185
> 
> 赞同：0
> 
> 时间：2012-05-23T14:35:30.947
> 
> 标签：c#, entity-framework, ef-code-first

我首先使用模型。

实体：

```
class User
{
Guid UserId{get;set;}
Guid RefererUserId {get;set;}
User RefereUser {get;set;}
} 
```

数据上下文：

```
public class DataContext : DbContext
    {
        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {

            modelBuilder.Entity<User>()
                .HasRequired(x => x.ReferrerUser)
                .WithMany()
                .HasForeignKey(x => x.ReferrerUserId).WillCascadeOnDelete(false);

        }
 public DbSet<User> Users { get; set; }
} 
```

我初始化数据库：

```
MembershipCreateStatus Status;
Membership.CreateUser("Demo", "123456", "demo@demo.com", null, null, true, out Status);

Roles.CreateRole("Admin");
Roles.AddUserToRole("Demo", "Admin");
DataContext db = new DataContext();
var a = db.Users.Where(x => x.Email == "demo@demo.com").FirstOrDefault();
a.MoneyRUB = 100;
a.MoneyUSD = 100;
db.SaveChanges(); 
```

我得到错误：

> INSERT 语句与 FOREIGN KEY SAME TABLE 约束“User_ReferrerUser”冲突。冲突发生在数据库“Kamikaze”、表“dbo.Users”、列“UserId”中。该语句已终止。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:45:31.207

尝试使`RefererUserId`可空（即`Guid?`，不`Guid`）。否则，将无法插入第一个用户。

您还需要进行更改`HasRequired`以`HasOptional`使模型意识到可能没有`RefererUser`.

有关首先在代码中设置可选链接的详细信息，请参阅[此答案。](https://stackoverflow.com/a/8021125/335858)

# .net - 将 Google 地图与来自一个或多个社交网络的地理定位照片混搭的最佳方式是什么？

> ID：10722186
> 
> 赞同：2
> 
> 时间：2012-05-23T14:35:35.797
> 
> 标签：.net, google-maps-api-3, twitter, mashup, google-image-search

我正在为一个项目进行概念验证，我需要将随机照片固定到谷歌地图上。这些照片可以来自另一个社交网络，但必须是非色情的。

到目前为止，我已经做了一些研究，Google 的图像搜索 API 已被弃用。因此，必须使用自定义搜索 API。很多图像不是照片，我不确定它处理地理定位的能力如何。Twitter 似乎更适合一些，除了人们可以发布几乎任何东西的图片这一事实。我还打算研究其他网络的 API，例如 Flickr、Picasa、Pinterest 和 Instagram。我知道那里有一些聚合服务可能也为我完成了一些混搭工作。

如果有人掌握社交 API 并且我应该在哪里寻找这种类型的解决方案，我将非常感谢您的帮助。

此外，在服务器端实现很重要的情况下，我是一名经验丰富的 .NET 开发人员。

# jsf - 为什么有时我的页面中的 UI 有时会出现有时不出现？

> ID：10722192
> 
> 赞同：0
> 
> 时间：2012-05-23T14:35:49.583
> 
> 标签：jsf, spring-security, primefaces, glassfish-3

我有小问题

为什么有时 page.jsf 中的 UI 有时会出现，但有时不会出现……
而且我在那里没有收到任何错误

我在用着 ：

netbeans 6.9.1
JSF 2.0
primefaces 3.1.1
springframework 3.0.2
glassfish 服务器 3.0

我的意思是：我无法在 jsf.page
**web.xml中加载我的 primefaces、javascript 和 css**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Production</param-value>
</context-param>
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/app-config.xml</param-value>
</context-param>
<context-param>
    <param-name>javax.faces.FACELETS_LIBRARIES</param-name>
    <param-value>/WEB-INF/springsecurity.taglib.xml</param-value>
</context-param>
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<servlet>
    <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/app-config.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.faces</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<servlet-mapping>
    <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
    <url-pattern>*.htm</url-pattern>
</servlet-mapping>
<welcome-file-list>
    <welcome-file>faces/index.jsp</welcome-file>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>
</web-app> 
```

**安全.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<b:beans xmlns="http://www.springframework.org/schema/security"
xmlns:b="http://www.springframework.org/schema/beans"
xmlns:s="http://www.springframework.org/schema/security"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/security
http://www.springframework.org/schema/security/spring-security-3.0.xsd">

<http auto-config="true" use-expressions="true">

    <intercept-url pattern="/assets/previews/**" access="permitAll" />
    <intercept-url pattern="/assets/thumbs/**" access="permitAll" />
    <intercept-url pattern="/css/**" access="permitAll"/>
    <intercept-url pattern="/design/**" access="permitAll" />
    <intercept-url pattern="/images/**" access="permitAll" />
    <intercept-url pattern="/js/**" access="permitAll" />
    <intercept-url pattern="/pageAllNews/**" access="permitAll" />

    <intercept-url pattern="/pageLogin/**" access="permitAll" />
    <intercept-url pattern="/resources/css/**" access="permitAll" />
    <intercept-url pattern="/resources/skins/tn3/**" access="permitAll" />
    <intercept-url pattern="/templates/**" access="permitAll"/>
    <intercept-url pattern="/userPage/**" access="permitAll" />

    <intercept-url pattern="/**" access="hasRole('ROLE_ADMIN')"/>
    <intercept-url pattern="/**" access="hasRole('ROLE_USER')"/>
    <intercept-url pattern="/**" access="hasAnyRole('ROLE_ADMIN','ROLE_USER')"/>

    <form-login login-processing-url="/j_spring_security_check"
                default-target-url="/userPage/home.jsf"
                login-page="/userPage/home.jsf"
                authentication-failure-url="/userPage/test.jsf"/>
    <logout logout-success-url="/userPage/home.jsf"/>
    <remember-me />

</http>

<authentication-manager>
    <authentication-provider>
        <password-encoder hash="md5"/>
        <jdbc-user-service data-source-ref="dataSource" />
    </authentication-provider>
</authentication-manager>

</b:beans> 
```

thx，需要您的帮助并建议
agundmt

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:56:47.967

我可以解决它，只需将符号 [*]
从

```
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

至

```
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/</url-pattern>
</filter-mapping> 
```

它的作品

# string - Unicode <-> 多字节转换（本机与托管）

> ID：10722193
> 
> 赞同：1
> 
> 时间：2012-05-23T14:35:51.750
> 
> 标签：string, unicode, native, managed, multibyte

我正在尝试将来自 .NET 的 unicode 字符串转换为本机 C++，以便我可以将它们写入文本文件。然后该过程将被反转，以便读取文件中的文本并将其转换为托管的 unicode 字符串。

我使用以下代码：

```
String^ FromNativeToDotNet(std::string value)
{
  // Convert an ASCII string to a Unicode String
  std::wstring wstrTo;
  wchar_t *wszTo = new wchar_t[lvalue.length() + 1];
  wszTo[lvalue.size()] = L'\0';
  MultiByteToWideChar(CP_UTF8, 0, value.c_str(), -1, wszTo, (int)value.length());
  wstrTo = wszTo;
  delete[] wszTo;

  return gcnew String(wstrTo.c_str());
}

std::string FromDotNetToNative(String^ value)
{ 
  // Pass on changes to native part
  pin_ptr<const wchar_t> wcValue = SafePtrToStringChars(value);
  std::wstring wsValue( wcValue );

  // Convert a Unicode string to an ASCII string
  std::string strTo;
  char *szTo = new char[wsValue.length() + 1];
  szTo[wsValue.size()] = '\0';
  WideCharToMultiByte(CP_UTF8, 0, wsValue.c_str(), -1, szTo, (int)wsValue.length(), NULL, NULL);
  strTo = szTo;
  delete[] szTo;

  return strTo;
} 
```

发生的情况是，例如一个日文字符被转换为两个 ASCII 字符（汉 ->“w）。我认为这是正确的？但另一种方式不起作用：当我调用 FromNativeToDotNet wizh "w 我只得到 "w 作为托管unicode 字符串...如何正确恢复日文字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T03:16:50.080

最好使用 UTF8Encoding：

```
static String^ FromNativeToDotNet(std::string value)
{
    array<Byte>^ bytes = gcnew array<Byte>(value.length());
    System::Runtime::InteropServices::Marshal::Copy(IntPtr((void*)value.c_str()), bytes, 0, value.length());
    return (gcnew System::Text::UTF8Encoding)->GetString(bytes);
}

static std::string FromDotNetToNative(String^ value)
{ 
    if (value->Length == 0) return std::string("");
    array<Byte>^ bytes = (gcnew System::Text::UTF8Encoding)->GetBytes(value);
    pin_ptr<Byte> chars = &bytes[0];
    return std::string((char*)chars, bytes->Length);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T15:55:59.577

> 一个日文字符被转换为两个 ASCII 字符（汉->“w）。我认为这是正确的？

不，那个字符，U+6F22，应该被转换成三个字节：0xE6 0xBC 0xA2

在 UTF-16（小端）中，U+6F22 以 0x22 0x6F 的形式存储在内存中，这看起来像`"o`在 ascii（而不是`"w`）中，所以看起来从 String^ 到 std::string 的转换有问题。

我对 String^ 不够熟悉，不知道从 String^ 转换为 std::wstring 的正确方法，但我很确定这就是你的问题所在。

* * *

我认为以下内容与您的问题没有任何关系，但这显然是错误的：

```
std::string strTo;
char *szTo = new char[wsValue.length() + 1]; 
```

你已经知道一个宽字符可以产生多个窄字符，所以宽字符的数量显然不一定等于或大于对应的窄字符的数量。

您需要使用 WideCharToMultiByte 来计算缓冲区大小，然后使用该大小的缓冲区再次调用它。或者您可以分配一个缓冲区来保存 3 倍于宽字符的字符数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T01:21:27.327

试试这个：

```
String^ FromNativeToDotNet(std::string value)
{
  // Convert a UTF-8 string to a UTF-16 String
  int len = MultiByteToWideChar(CP_UTF8, 0, value.c_str(), value.length(), NULL, 0);
  if (len > 0)
  {
    std::vector<wchar_t> wszTo(len);
    MultiByteToWideChar(CP_UTF8, 0, value.c_str(), value.length(), &wszTo[0], len);
    return gcnew String(&wszTo[0], 0, len);
  }

  return gcnew String((wchar_t*)NULL);
}

std::string FromDotNetToNative(String^ value)
{ 
  // Pass on changes to native part
  pin_ptr<const wchar_t> wcValue = SafePtrToStringChars(value);

  // Convert a UTF-16 string to a UTF-8 string
  int len = WideCharToMultiByte(CP_UTF8, 0, wcValue, str->Length, NULL, 0, NULL, NULL);
  if (len > 0)
  {
    std::vector<char> szTo(len);
    WideCharToMultiByte(CP_UTF8, 0, wcValue, str->Length, &szTo[0], len, NULL, NULL);
    return std::string(&szTo[0], len);
  }

  return std::string();
} 
```

# java - 在 Java 中使用 nanotime 比较方法速度性能

> ID：10722195
> 
> 赞同：0
> 
> 时间：2012-05-23T14:35:58.337
> 
> 标签：java, for-loop, while-loop, nanotime

我想比较两个 readDataMethod() 的速度性能（如果有的话），如下所示。

```
private void readDataMethod1(List<Integer> numbers) {
    final long startTime = System.nanoTime();
    for (int i = 0; i < numbers.size(); i++) {
        numbers.get(i);
    }
    final long endTime = System.nanoTime();
    System.out.println("method 1 : " + (endTime - startTime));
}

private void readDataMethod2(List<Integer> numbers) {
    final long startTime = System.nanoTime();
    int i = numbers.size();
    while (i-- > 0) {
        numbers.get(i);
    }
    final long endTime = System.nanoTime();
    System.out.println("method 2 : " + (endTime - startTime));
} 
```

大多数情况下，我得到的结果表明方法 2 具有“较低”的价值。

```
 Run         readDataMethod1    readDataMethod2

     1                  636331             468876
     2                  638256             479269
     3                  637485             515455
     4                  716786             420756 
```

此测试是否证明 readDataMethod2 比之前的更快？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T14:39:11.733

在第一个中，您为每次迭代调用 numbers.size() 。尝试将其存储在变量中，然后再次检查。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T14:40:01.687

> 此测试是否证明 readDataMethod2 比之前的更快？

您在*衡量*比较绩效而不是做出假设方面是正确的。

然而，在 Java 中编写微基准测试时，有很多潜在的问题需要注意。我建议您阅读 [如何在 Java 中编写正确的微基准测试？](https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T14:53:27.753

第二个版本运行得更快的原因是因为您在每次迭代时都调用 numbers.size() 。通过存储一个数字来替换它会使它与第一个几乎相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T15:22:34.927

> 此测试是否证明 readDataMethod2 比之前的更快？

正如@aix 所说，您走在正确的轨道上。但是，您的方法存在几个具体问题：

*   看起来您并没有“热身”JVM。因此可以想象，您的数字可能会因启动效果（JIT 编译）而失真，或者没有任何代码经过 JIT 编译。

*   我还认为你的跑步做的工作太少了。一`500000`纳秒，就是`0.0005`几秒，这没什么用。风险在于应用程序外部的“其他事物”可能会将噪声引入测量。我对需要几十秒的跑步更有信心。

# iis-7 - 经典 ASP 突然给我权限 (401.3) 错误

> ID：10722201
> 
> 赞同：4
> 
> 时间：2012-05-23T14:36:07.310
> 
> 标签：iis-7, asp-classic, permissions, asp.net-4.0, http-status-code-401

背景：我支持经典的 ASP 环境。作为支持的一部分，我在我的机器上本地有一个开发设置。我正在运行 IIS7。

为了访问我的环境，我使用“http://localhost:99999/”（出于隐私目的伪造端口号）。直到今天，我都没有遇到过这个问题。

我构建了一个旨在在此环境中运行的应用程序。该应用程序是 ASP.NET v.4.0（例如，我会说它称为“http://localhost:99999/DotNetApp/”）。当然，为了运行它，我必须设置我的环境应用程序池来支持它（现在它支持它）。

问题：配置后，我现在得到：

> ## “/”应用程序中的服务器错误。
> 
> 访问被拒绝。说明：访问处理此请求所需的资源时出错。您可能无权查看请求的资源。
> 
> 错误消息 401.3：您无权使用您提供的凭据查看此目录或页面（由于访问控制列表而拒绝访问）。请求 Web 服务器的管理员授予您对“[文件路径]\SourceFiles”的访问权限。

在我设置我的 IIS 配置之前，我没有得到这个。为什么我现在得到这个？

注意：这只发生在“http://localhost:99999/”；如果我尝试“http://localhost:99999/default.asp”（该页面没有问题），则不会发生这种情况。

任何人有任何见解？

提前致谢 。. .

**编辑：**其他症状：我尝试使用应用程序池设置。如果我将 .NET Framework 版本更改为 2.0.50727 或“无托管代码”，问题就会消失。将其更改为 4.0.31319 会破坏它。当然，如果我使用其他两个版本中的任何一个，我的 ASP.NET 应用程序将无法运行。

**编辑#2：**这个问题出现在所有指向文件夹或目录的链接上（例如“http://localhost:99999/somefolder/”），而不仅仅是网络根目录。

**编辑#3：**我有一个解决方法：在单独的应用程序池中设置“http://localhost:99999/”和“http://localhost:99999/DotNetApp/”。第一个在 .NET 2.0 中运行，而后者在 .NET 4.0 中运行。（一旦我的 8 小时限制结束，我会将此作为答案发布。）可能不是最好的答案——我更喜欢不那么杂乱无章的东西——但就目前而言，它会把事做好。但是，如果有人有一个解决方案可以让我在同一个应用程序池中运行所有内容，请务必发布！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T14:39:34.700

您可能必须在 IIS7 的“默认文档”设置中指定“default.asp”

编辑：检查是否已安装 ASP：控制面板 -> 程序和功能 -> Windows 功能 -> Internet 信息服务 -> Www 服务 -> 应用程序开发功能 -> ASP

![在此处输入图像描述](../Images/b2607506eee804d17716b9706b00d32b.png)

编辑最终解决方案：网站所在的文件夹中缺少 IUSR 帐户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T14:39:04.860

在 IIS 中为您的站点设置默认页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T14:43:20.553

尝试在文件夹属性中为目录“[filepath]\SourceFiles/”或/和“允许”其他用户名和组设置权限“Everyone”。

# html - 我应该如何创建和样式化基于大纲的文档？

> ID：10722213
> 
> 赞同：0
> 
> 时间：2012-05-23T14:36:43.193
> 
> 标签：html

所以默认的html文档是一个穿插<H#>标签的长文本，隐藏了文档的轮廓。我认为在文档本身中表示大纲视图会更有意义。

所以而不是

```
<h1>1 foo</h1>
<p>bar
<h2>1.1 subfoo</h2>
<p>bleep 
```

我更喜欢类似的东西

```
<ol>
  <li><heading>foo</heading>
    <p>bar
    <ol>
      <li><heading>subfoo</heading>
        <p>bleep
    </ol>
</ol> 
```

这是一个好方法吗？我应该如何用 CSS 设置它的样式？

这会破坏诸如屏幕阅读器、搜索引擎、锚链接之类的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T14:40:03.737

HTML5 有一个很好的方法来做到这一点：

```
<section>
    <header>1\. Foo</header>

    <!-- Content here -->

    <section>
        <header>1.1\. Subfoo</header>

        <!-- More content here -->
    </section>
</section> 
```

然后，要设置不同级别的样式，只需：

```
section header {
    /* Header 1 */
}

section section header {
    /* Header 2 */
}

/* And so on... */ 
```

不，它不应该破坏任何东西。

# java - 从 java HttpClient 使用 kerberos 对共享点进行身份验证

> ID：10722215
> 
> 赞同：6
> 
> 时间：2012-05-23T14:36:54.917
> 
> 标签：java, authentication, rest, sharepoint-2010, kerberos

我有一个 linux\java6 客户端，它将使用 NTLM 对 sharepoint2010 进行身份验证，然后使用 Apache Commons 发送 HTTP REST Web 服务`HttpClient`。

我可以使用 NTLM 执行此操作，但我想使用相同的 REST API 来访问使用 kerberos auth 的 sharepoint 2010。

任何示例如何使用 kerberos 共享点通过 HTTP 进行身份验证和发送 REST？（最好使用`HttpClient`）

ps 我无权访问共享点代码，但我可以访问共享点管理配置。这大致是我使用 NTLM 进行身份验证的方式：

```
HttpClient httpClient = new HttpClient(new SimpleHttpConnectionManager(true));
AuthPolicy.registerAuthScheme(AuthPolicy.NTLM, JCIFS_NTLMScheme.class);
String  localHostName = Inet4Address.getLocalHost().getHostName();
authscope = new AuthScope(uri.getHost(), AuthScope.ANY_PORT);
httpClient.getState().setCredentials(authscope,new NTCredentials(
             getUsername(),getPassword(),localHostName,getDomain()));

// after the initial ntlm auth I can call my REST service with "httpClient.executeMethod" 

int status = httpClient.executeMethod(new GetMethod(accessURI + "/sitecollection/info")); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T13:49:15.223

请确认您的环境已为 Kerberos 正确设置，这可以通过运行 kinit 来实现。如果失败，您需要确保您的 krb5.ini (windows) 或 krb5.conf (linux) 设置为正确指向您的域控制器。

确认 Kerberos 正常运行后，您可以使用来自 HttpClient 的示例代码，如下所示。

请注意，有许多问题可能会导致 Kerberos 失败，例如时间同步、支持的加密类型、跨域林的信任关系，并且确保您的客户端与服务器位于单独的盒子上也是值得的。

这是 HttpClient 下载中提供的示例代码，您需要确保您的 JAAS 配置和 krb5.conf 或 ini 是正确的！

```
public class ClientKerberosAuthentication {

    public static void main(String[] args) throws Exception {

        System.setProperty("java.security.auth.login.config", "login.conf");
        System.setProperty("java.security.krb5.conf", "krb5.conf");
        System.setProperty("sun.security.krb5.debug", "true");
        System.setProperty("javax.security.auth.useSubjectCredsOnly","false");

        DefaultHttpClient httpclient = new DefaultHttpClient();
        try {
            httpclient.getAuthSchemes().register(AuthPolicy.SPNEGO, new SPNegoSchemeFactory());

            Credentials use_jaas_creds = new Credentials() {

                public String getPassword() {
                    return null;
                }

                public Principal getUserPrincipal() {
                    return null;
                }

            };

            httpclient.getCredentialsProvider().setCredentials(
                    new AuthScope(null, -1, null),
                    use_jaas_creds);

            HttpUriRequest request = new HttpGet("http://kerberoshost/");
            HttpResponse response = httpclient.execute(request);
            HttpEntity entity = response.getEntity();

            System.out.println("----------------------------------------");
            System.out.println(response.getStatusLine());
            System.out.println("----------------------------------------");
            if (entity != null) {
                System.out.println(EntityUtils.toString(entity));
            }
            System.out.println("----------------------------------------");

            // This ensures the connection gets released back to the manager
            EntityUtils.consume(entity);

        } finally {
            // When HttpClient instance is no longer needed,
            // shut down the connection manager to ensure
            // immediate deallocation of all system resources
            httpclient.getConnectionManager().shutdown();
        }
    }

} 
```

# datagrid - 在dojo datagrid中选择后如何更新Row中的内容

> ID：10722217
> 
> 赞同：0
> 
> 时间：2012-05-23T14:37:03.910
> 
> 标签：datagrid, dojo, selection

我创建了一个道场数据网格。每列都附加了一个格式化程序。生成网格时，将调用格式化程序。现在我想要它，以便如果用户选择任何行，格式化程序将被调用，并且一些字符串应该附加到所选行的列元素。

像网格是这样的：

```
COLUMN
-------
a

b

c 
```

现在用户选择第二行，网格应更改为：

```
COLUMN
-------
a

b SELECTED

c 
```

目前我是这样实现的：

```
if(this.grid.selection.selectedIndex !== -1){
  retrun value + "SELECTED";
}else{
 return value;
} 
```

你能建议一个这样做的好方法吗？请注意，不应将“SELECTED”字符串添加到网格存储中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T17:33:05.427

格式化的不是点击/选择行。它仅在设置单元格的内容（值）时执行。相反，您希望将焦点移到 onRowClicked - 网格组件上的事件。它是这样工作的：

```
grid.onRowClick = onRowClickHandler; 
```

我不知道以下哪个示例会让您最接近您的目标，但 onRowClickHandler 可以这样设置：

```
function onRowClickHandler(evt) {
    var rows = this.selection.getSelected();
    // perform cell rendering here
    dojo.forEach(rows, function(row) {
       // this row is an item though.. you will have row._O as its index
    });
} 
```

或者

```
function onRowClickHandler(e) {
   var cellClicked = this.focus.cell
   cellClicked.formatter();
} 
```

但是，您可能会发现在网格组件中的任何位置都没有太多对可查看数据的引用。您可以使用以下查询选择器来查找单元格数据并通过调用每个值的格式化程序来更新查看的 html。不过，您需要为自定义值设置的“拆卸”捕获先前的选择。

```
var prevSelectedRows = [];
function onRowClickHandler(evt) {
    var idx = this.selection.selectedIndex,
        rawRow = dojo.query(".dojoxGridRow:nth-child("+(idx+1)+")", this.domNode)[0],
        self = this;

    // perform resetting of viewable values
    dojo.forEach(prevSelectedRows, function(raw) {
      dojo.query('.dojoxGridCell', raw).forEach(function(cellDOM, i) {
        cellDOM.innerHTML = cellDOM.innerHTML.replace("SELECTED", "");
      });

    });
    prevSelectedRows = []; // reset prev selection
    // look into grid.view.content for methods on this
    // perform setting of viewable values (SELECTED)
    dojo.query('.dojoxGridCell', rawRow).forEach(function(cellDOM, i) {
        // this function might be of interest, lets see how it looks in console
        console.log(self.layout.cells[i].formatter);
        cellDOM.innerHTML = cellDOM.innerHTML + "SELECTED"
    });

    prevSelectedRows.push(rawRow);
} 
```

# entity-framework - EF 迁移 - 一个数据库，两个项目

> ID：10722223
> 
> 赞同：2
> 
> 时间：2012-05-23T14:37:23.033
> 
> 标签：entity-framework, entity-framework-migrations

我们使用 EF Code First 和手动迁移 (AutomaticMigrationsEnabled = false;)。问题是我们需要在两个项目之间共享一个数据库。

```
Project-A
---DbContext-A
---------Model1
---------Model2
---------Model3

Project-B
---DbContext-A
---------Model2
---------Model3
---------Model4 
```

一些迁移文件是相同的，但其中一些是不同的。例如：Project-B 需要 Model4，但 Project-A 不需要。

目前，如果我通过一次迁移更新数据库，DbContext 将无法在其他项目中工作。

处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T18:57:25.087

我的感觉是，这与迁移的意图背道而驰。我认为您应该将`DbContext`、 实体和迁移拆分为两个项目之间共享的单独程序集。

如果这不是一个选项，您必须禁用与模型的兼容性检查。兼容性检查是作为`IDBInitializer.InitializeDatabase`实现的一部分完成的，它负责调用`Database.CompatibleWithModel`，因此编写您自己的自定义 DB Initializer 什么都不做将使您通过该步骤。这也意味着您接管了确保数据库与模型兼容的责任。EF 帮不了你了。

# dependency-injection - 使用 IWindsorInstaller 进行动态构造函数注入

> ID：10722226
> 
> 赞同：1
> 
> 时间：2012-05-23T14:37:33.670
> 
> 标签：dependency-injection, castle-windsor, castle

我不确定这是否可能，但我还是会问这个问题。

我有一个场景，我有许多不同的任务在处理过程中发送电子邮件。

电子邮件的发送是通过自定义类完成的

```
public interface IEmailProvider
{
    void SendEmail(some params);
}
public class EmailProvider : IEmailProvider
{
    private readonly IEmailConfig _config;

    public EmailProvider(IEmailConfig config)
    {
        _emailConfig = emailConfig;
    }

    public void SendEmail(some params)
    {
        // send the email using the params
    }
} 
```

我有一些使用电子邮件提供程序的任务，每个任务都提供自己的 IEmailConfig 实现。

```
public class Task1 : ICommand
{
    public Task1(IEmailProvider emailProvider)
    {}
}

public class Task2 : ICommand
{
    public Task2(IEmailProvider emailProvider)
    {}
} 
```

这是我设置的基本示例

```
public class TestInstaller : IWindsorInstaller
{
    public void Install(IWindsorContainer container, IConfigurationStore store)
    {
        // Default email provider set up
        container.Register(Component.For<IEmailProvider>().ImplementedBy<EmailProvider>()
            .Named("DefaultEmailProvider")
            .LifeStyle.Transient);

        // Task 1 email config set up
        container.Register(Component.For<IEmailConfig>().ImplementedBy<Task1EmailConfig>()
            .Named("Task1EmailConfig"));

        // Task 2 email config set up
        container.Register(Component.For<IEmailConfig>().ImplementedBy<Task2EmailConfig>()
            .Named("Task2EmailConfig"));

        // Task 1 set up
        container.Register(Component.For<ICommand>().ImplementedBy<Task1>()
            .Named("Task1Command"));

        // Task 2 set up
        container.Register(Component.For<ICommand>().ImplementedBy<Task2>()
            .Named("Task2Command"));
    }
} 
```

有没有一种方法可以让我做出决定，因为每个 ICommand 实现正在被解析，关于 IEmailConfig 的哪个实现传递给 EmailProvider 类的构造函数？

目前，我使用 ServiceOverride 功能为每个任务注册了一个 EmailProvider 实例。这意味着对于需要发送电子邮件的每个任务，我几乎必须复制电子邮件提供商的设置，并且它是必需的配置。我最终列出了这个......

```
Component.For<IEmailConfig>()
    .ImplementedBy<Task1EmailConfig>()
    .Named("Task1EmailConfig"));

Component.For<IEmaiProvider>()        
    .ImplementedBy<EmailProvider>)
    .Named("Task1EmailProvider")
    .DependsOn(ServiceOverride.ForKey("config").Eq("Task1Config"));

Component.For<ICommand>()
    .ImplementedBy<Task1>()
    .DependsOn(ServiceOverride.ForKey("emailProvider").Eq("Task1EmailProvider"))); 
```

对于每个任务，这将全部重复。

IEmailProvider 实现始终相同，只是传入的 IEmailConfig 会针对每个不同的任务进行更改。我不禁想到必须有一个更整洁的解决方案来解决我目前所拥有的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T01:03:08.953

我认为几个[处理程序选择器可以满足](http://docs.castleproject.org/Windsor.Handler-Selectors.ashx)您的需求。一个用于 IEmailProvider，一个用于 ICommand。

IEmailProvider 可以检查被激活的 IEmailProvider 的名称（如“Task1EmailProvider”）并去掉“Provider”并添加“Config”——这将为您提供可用于解决特定问题的密钥“Task1EmailConfig” IEmailConfig 对象。

同样，对 ICommand 执行相同的操作。它将依赖于您始终如一地命名您的 IEmailConfig，但它会消除您现在正在做的所有手动接线。

# sql - 在 SQL 查询中包含一对多关系的计数

> ID：10722228
> 
> 赞同：0
> 
> 时间：2012-05-23T14:37:52.983
> 
> 标签：sql

我有以下表格：

```
users
+----------+----------+----------+
| id       | name     | dob      |
+----------+----------+----------+

authentications
+----------+----------+----------+ 
| id       | user_id  | provider |
+----------+----------+----------+ 
```

一个用户，有许多身份验证。`user_id`在`authentications`表中是表的外键`users`。

我试图完成以下输出：

```
+---------------+---------------+---------------+---------------+ 
|    user.id    |   user.name   |   user.dob    |       C       |
+---------------+---------------+---------------+---------------+ 
```

在这里，C 是提供者为“facebook”的用户身份验证计数。如果不是计数，我可以得到一个布尔值，即如果存在身份验证，则为 true，如果不存在，则为 false，那会更好。

我不知道如何构建查询。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T14:44:16.953

使用用户和身份验证之间的 JOIN 创建查询，并首先在 User Id 字段中添加 GROUP BY。您的 group by 将需要包含您希望在结果中列出的后续字段，尽管它们不会改变结果的效果：

```
SELECT u.id, u.name, u.dob, COUNT(a.user_id) as authCount
FROM users u 
LEFT JOIN authentications a on u.id = a.user_id
WHERE a.provider = 'facebook'
GROUP BY u.id, u.name, u.dob 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T14:43:20.437

C 是计数，如果有 facebook 提供者，B 将返回 1，如果没有，则返回 0（布尔值）。更新为使用 LEFT OUTER JOIN 以便包括所有用户。

```
SELECT 
   users.id,
   users.name,
   users.DOB,
   SUM(CASE WHEN authentications.provider = 'facebook' then 1 else 0 end) as C,
   MAX(CASE WHEN authentications.provider = 'facebook' then 1 else 0 end) as B
FROM users
LEFT OUTER JOIN authentications
   ON users.id = authentications.user_id
GROUP BY users.id, users.name, users.DOB 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T10:23:08.883

1）这将返回每个用户的 FB 类型授权的实际计数：

`

```
Select Name UserName, ID UserID, COUNT(FBAuth) FBAuthCount
from Users LEFT JOIN
(Select UserID, COUNT(AuthType) FBAuth from Auth 
Where AuthType = 'FB'
Group by USERID) Auths on (Users.ID = Auths.UserId)
Group by ID, Name 
```

`

2) 这将为每个用户返回标志 true 或 false，具体取决于他们的授权类型：

`

```
Select Name UserName, ID UserID, 
CASE WHEN COUNT(FBAuth) > 0 THEN 'TRUE' ELSE 'FALSE' END FBAuthFLAG
from Users LEFT JOIN 
(Select UserID, COUNT(AuthType) FBAuth from Auth 
Where AuthType = 'FB'
Group by USERID) Auths on (Users.ID = Auths.UserId)
Group by ID, Name 
```

`

在较小的数据集上使用连接：更快的响应。最后，我相信这是一个：

`

```
SELECT users.id,
       users.email,
       users.name,
       users.sid,
       users.created_at,
       ( CASE
           WHEN fb_auth > 0
           THEN 'true'
           ELSE 'false'
         END ) AS facebook
FROM   users
       LEFT JOIN (SELECT authentications.user_id,
                         Count(authentications.provider) fb_auth
                  FROM   authentications
                  WHERE  provider = 'facebook'
                  GROUP  BY user_id) auths
              ON ( users.id = auths.user_id )
GROUP  BY users.id,
          users.email,
          users.name,
          users.sid,
          users.created_at 
```

`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-19T06:58:33.260

较早的答案有效，但速度极慢。该查询过去需要 15-20 分钟才能运行。一位朋友建议的这个运行速度要快得多（同一数据集约 4 秒）。

```
SELECT users.id,
       users.email,
       users.name,
       users.sid,
       users.created_at,
       ( CASE
           WHEN fb_auth > 0
           THEN 'true'
           ELSE 'false'
         END ) AS facebook
FROM   users
       LEFT JOIN (SELECT authentications.user_id,
                         Count(authentications.provider) fb_auth
                  FROM   authentications
                  WHERE  provider = 'facebook'
                  GROUP  BY user_id) auths
              ON ( users.id = auths.user_id )
GROUP  BY users.id,
          users.email,
          users.name,
          users.sid,
          users.created_at; 
```

# macos - NSWindow 属性设置为 assign 属性而不是 strong

> ID：10722238
> 
> 赞同：1
> 
> 时间：2012-05-23T14:38:23.217
> 
> 标签：macos

我注意到 Mac App 模板创建了以下内容：

> @interface AppDelegate : NSObject
> 
> @property (assign) IBOutlet NSWindow *window;

根据 ARC 指南，所有顶级对象都应使用强属性，但这是使用分配属性。有人会解释为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T22:29:25.957

一个窗口通常由 拥有`File's Owner`，通常是您的`NSApplication`实例（对于主 nib）或 的实例`NSWindowController`，不一定是应用程序委托或窗口委托。这就是为什么在委托类中不适合强引用的原因。

在 Mac OS/X 10.7 中，`NSWindow`（以及其他几个 Cocoa 类）不支持通过 ARC 进行管理，因此声明的属性`NSWindow`必须是`assign`而不是`strong`or `weak`。有关更详细的讨论，请参阅[过渡到 ARC](https://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)和[Nib 对象生命周期文档。](https://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)基本答案是您不能对覆盖`release`and`retain`方法的对象使用 ARC 管理的引用。

在 10.8 中，看起来 NSWindow 不在该列表中，但 Xcode 仍在生成`assign`属性而不是`weak`.

# java - 传入消息的侦听器

> ID：10722239
> 
> 赞同：1
> 
> 时间：2012-05-23T14:38:23.937
> 
> 标签：java

我目前正在尝试使用 Socket 和 ServerSocket 类创建一个聊天应用程序，但我遇到了一个障碍。当消息从服务器或客户端传入时，我需要某种侦听器来执行某个代码块，但我似乎找不到。一个选项当然是每 10 毫秒或其他时间检查传入的消息，但没有更智能的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:42:20.677

一般来说，你应该为你正在读取的每个 Socket 分配一个 Thread，以便 Thread 可以阻塞在套接字上并等待传入​​的信息。

你应该看看 DataFetcher：[http ://tus.svn.sourceforge.net/viewvc/tus/tjacobs/io/](http://tus.svn.sourceforge.net/viewvc/tus/tjacobs/io/)

该类可以异步工作，并在有新数据时通知 FetcherListener

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T14:52:34.350

我推荐[Netty](http://www.jboss.org/netty)或[Mina](http://mina.apache.org/)。至于 Socket 和 ServerSocket，`read()`调用是被阻塞的，所以在某种程度上，只要有传入数据，就会执行 read()s 下面的代码。

不过要注意不完整的消息，因为套接字提供字节流，并且应用程序通常更喜欢离散消息。

# .net - 如何使用 VS2010 分析 WER 收集的 .NET 应用程序崩溃转储？

> ID：10722242
> 
> 赞同：1
> 
> 时间：2012-05-23T14:38:42.000
> 
> 标签：.net, visual-studio, dump, crash-dumps, windows-error-reporting

我有一个 NET 4.0 应用程序，它在运行时会导致未处理的异常。当我从 VS2010 运行它时，它会在异常行上中断，我可以保存转储。当我稍后加载转储时，我准确地到达了崩溃的地方，并且能够看到局部变量的值。

我已经在 Win 7 中启用了故障转储收集（[即使禁用了 Windows 错误报告也会收集用户模式转储](http://sethusrinivasan.com/2012/04/20/collecting-user-mode-dumps-in-even-if-windows-error-reporting-is-disabled/http://sethusrinivasan.com/2012/04/20/collecting-user-mode-dumps-in-even-if-windows-error-reporting-is-disabled/)）。

当我加载由 WER 创建的转储时，我只能看到本机代码中发生异常的位置（即使我开始混合模式调试）。

是否有可能实现与 WER 和 VS 转储类似的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:18:09.023

这一系列视频帮助我解决了类似的情况。在其中，演示者解释了如何从托管和非托管代码中捕获和处理故障转储，以解决常见问题，例如生产系统中的内存泄漏和性能问题：

[http://channel9.msdn.com/Series/-NET-Debugging-Stater-Kit-for-the-Production-Environment/Diagnosing-Application-Issues-01](http://channel9.msdn.com/Series/-NET-Debugging-Stater-Kit-for-the-Production-Environment/Diagnosing-Application-Issues-01)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:16:43.897

我做了一些研究，偶然发现了关键信息。必须禁用选项/调试中的“仅我的代码”选项才能查看应用程序源代码。否则，应用程序代码隐藏`[External code]`在堆栈跟踪中，因此无法访问。

# installation - 用于电子邮件处理平台的设置

> ID：10722243
> 
> 赞同：0
> 
> 时间：2012-05-23T14:38:43.723
> 
> 标签：installation, email-processing

我的目标是构建一个系统，其中每个用户都有一个电子邮件地址，他可以将电子邮件转发到该地址。系统应从这些电子邮件中获取：主题、日期、收件人、文本。这些数据应该进入一个数据库，每个邮件和用户都有一个唯一的 ID。

现在我知道这听起来并不复杂，但我想知道使用哪种编程语言。另外我想知道如何托管电子邮件，因为会有相当多的电子邮件地址，并且应该有一些工作正在运行以检测新电子邮件何时进来。

在这方面不是很有经验，所以希望你们中的一些人能给我一些建议来研究。我希望这个问题不是太笼统 - 我已尽力具体。非常感谢所有输入。

谢谢，文森特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:52:25.930

基本上你需要三个组件

1.  邮件服务器（用于接收电子邮件）以 MS Exchange (Windows) 或 Postfix (Linux) 为例
2.  一些代码来解析传入的电子邮件，你可以使用几乎任何东西来做到这一点
3.  一个数据库，以SQL Server、My SQL为例

您的问题有点宽泛，无法提供更具体的建议

# c# - 实体框架；如何处理foreach循环中的异常并保持迭代

> ID：10722244
> 
> 赞同：9
> 
> 时间：2012-05-23T14:38:47.200
> 
> 标签：c#, asp.net-mvc, entity-framework

当我使用以下代码遍历 foreach 时，它成功捕获了发生的第一个异常并将 id 添加到我的错误列表中。在循环的所有后续迭代中，它将继续捕获先前的异常。

如何适当地捕获异常并撤消或清除失败的 DeleteObject 请求，以便可以执行后续删除。

```
public ActionResult Delete(int[] ListData)
{
    List<int> removed = new List<int>();
    List<int> error = new List<int>();
    Item deleteMe;
    foreach (var id in ListData)
    {
        deleteMe = this.getValidObject(id);
        if (deleteMe == null)
        {
            error.Add(id);
            continue;
        }

        try
        {
            this.DB.Items.DeleteObject(deleteMe);
            this.DB.SaveChanges();
            removed.Add(id);
        }
        catch (DataException ex)
        {
            // revert change to this.DB.Items?
            error.Add(id);
        }
    }
    if (error.Count > 0)
    {
        return Json(new { Success = false, Removed = removed, Error = error });
    }
    return Json(new { Success = true, Removed = removed });
} 
```

我已经搜索了 SO 和 google，大多数人会先处理所有删除对象，然后保存更改，这样它就是一个事务。但我需要它单独处理每个事务，因此单个故障不会停止其余事务。

我正在使用实体框架 4。

对于这个特定示例，我得到的异常是由与要删除的项目相关联的外键引起的。在生产中，我将处理这种情况，无论异常是什么，它都应该能够继续。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T15:39:21.363

我假设相同的上下文 ,`this.DB`被用于`this.getValidObject(id)`检索实体。如果是这种情况，在异常块调用中：`this.DB.detach(deleteme)`. 这应该可以防止`SaveChanges()`在下一次迭代中尝试删除有问题的实体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T14:47:01.457

您提供的代码看起来不错。你看到的错误是什么？正如您所指出的，也许您需要取消标记 this.DB.Items 中的某些内容，尽管我不这么认为。您还可以尝试为每个循环创建一个新的 DataContext，这样旧的、失败的 DataContext 在世界上的状态就无关紧要了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T15:12:36.590

如果我理解正确，您不能删除实体（项目），因为它有一个外键关联（子）。
您首先必须使用要删除的父（项目）更新所有子（相关）实体，通过删除关系，更新实体以与替代父（项目）相关或删除子实体（实体），然后最后删除 Parent(Item) 实体。

# asp.net - 表单身份验证超时大于会话超时

> ID：10722247
> 
> 赞同：0
> 
> 时间：2012-05-23T14:38:55.947
> 
> 标签：asp.net, asp.net-mvc

我正在通过 facebook 实现登录网站。我打电话给 FormsAuthentication.SetAuthCookie(response.email, true); 在 facebook 对用户进行身份验证后。

表单身份验证超时设置为 129600（3 个月）。

我应该将会话超时设置为相同的值吗？据我了解，会话超时应尽可能少。

如果会话超时小于表单超时是否正常？（例如表格 129600 session 30）

我知道有很多类似的问题，但这个问题对我来说并不清楚。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T14:42:20.147

您正在使用 cookie 进行身份验证，您的服务器会话无关紧要。一个潜在的问题是，如果您将数据存储在`Session`对象上并且它过期，这可能会给用户带来麻烦，因为依赖于该数据的功能可能会失败。

如果您`Session`正确处理服务器到期，则不会有任何问题。

# c++ - 将列解析为数组，同时区分行中的内容

> ID：10722252
> 
> 赞同：0
> 
> 时间：2012-05-23T14:39:19.323
> 
> 标签：c++

我正在尝试解析像下面的示例一样输出的文本文件，我的示例条目有限，但我的实际条目超过 15000 行，因此我无法单独阅读这些文件：

身份证IC时间

15:23:43.867 /g/mydata/dataoutputfile.txt 标识符

0003 1233 abcd

第0043章

000f 0bb4 ac24

000a a325 ac75

0023 0043 ac91 15:23:44.000 /g/mydata/dataoutputfile.txt 标识符

0003 1233 abcd

第0043章

000f 0bb4 ac24

000a a325 ac75

0023 0043 ac91

是我的输出。时间栏经常重置。

除了我在示例中的 3 列之外，我现在正在做的是另外制作 2 列。第一列是 ID 列的转换，转换为可理解的消息。第二个附加列将计算每个时间码之间的差异，时间码重置时除外。

我的逻辑是，将每一列读入一个数组，这样我就可以执行必要的翻译和操作。

我专注于首先获取时间码差异，因为我认为获取翻译会更简单一些。

我遇到的问题是将条目读入他们的矩阵：

我的代码看起来有点像这样：

```
while(readOK && getline(myfile,line))
{
stringstream ss(line);
string ident,IC,timehex,time,filelocation;
string junk1,junk2;
int ID[count];
int timecode[count2];
int idx=0;

if(line.find("ID") !=string::npos)
{
     readOK=ss>>ident>>IC>>timehex;
     myfile2<<ident<<"\t\t"<<IC<<"\t\t"<<timehex<<"\t\t"<<"ID Decoded"<<"\t\t"<<"DT"<<endl;
     myfile3<<"headers read"<<endl
}

else if(line.find("identifier") != string::npos)
{
     readOK=ss>>time>>filelocation;
     myfile3<<"time and location read";
     myfile2<<time<<"\t\t"<<filelocation<<endl;
}

else //this is for the hex code lines
{
     readOK=ss>>hex>>ID[idx]>>IC>>timecode[idx];

     if (readOK)
     {
          myfile2<<setw(4)<<setfill('0')<<hex<<ID[1000]<<"\t\t"<<IC<<"\t\t"<<timecode[1000]<<endl;
          myfile3<<"success reading info into arrays"<<endl;
     }

     else
     myfile3<<"error reading hex codes"<<endl;
}
idx++;
} 
```

尽管此代码无法正常工作。因为插入的时间和文件位置条目有助于跟踪我在代码中查看的时间，所以我不能只在每一行中读取完全相同的内容。

我的直觉告诉我，我太早地调用矩阵条目并且它们还没有被填充，因为如果我计算数字 1000，我得到一个 0（我的输入文件中有超过 15000 行并且我有我的数组的边界在我程序的另一部分动态设置）。

我似乎无法弄清楚如何正确分配条目，因为我遇到了一些继承问题，每次通过循环时计数变量都重置为 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:45:00.810

`int idx`在 while 循环范围之外定义（在 while 之前）。就像现在一样，每次循环都会被重置。

# jsf - 无法访问 p:columns 中托管 bean 中的嵌套属性

> ID：10722255
> 
> 赞同：8
> 
> 时间：2012-05-23T14:39:24.940
> 
> 标签：jsf, primefaces, el

我有以下两个简单的 POJO：

```
class Person {
   String name
   Address address;
   //and of course the getter/setter for the attributes
}

class Address {
   String city;
   //also getter/setter for this attribute
} 
```

还有一个支持bean：

```
@ManagedBean
@RequestScoped
class PersonController {

    private List persons;
    private List<String> columns = Arrays.toList("name", "address.city");
   //of course getter/setter
} 
```

现在我想创建一个数据表。

```
<p:dataTable var="person" value="#{personController.persons}" columnIndexVar="index">
    <p:columns var="column" value="#{personController.columns}">
        <h:outputText value="#{person[column]}"/>
    <p:columms>
</p:dataTable> 
```

当我执行这个时，我得到一个 ServletException：

> Person 类没有属性“address.city”。

但是，如果尝试在 p:columns 中访问这样的属性城市：

```
<h:outputText value="#{person.address.city}"/> 
```

一切安好。

为什么我不能访问这样的嵌套属性`#{person['address.city']}`？我怎样才能在里面访问它`p:columns`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T14:51:19.940

`#{person['address.city']}`默认情况下，不支持大括号表示字符串表达式中的嵌套 bean 属性。你基本上需要一个`#{person['address']['city']}`.

你需要在`ELResolver`这里定制。最简单的就是扩展现有的[`BeanELResolver`](http://docs.oracle.com/javaee/6/api/javax/el/BeanELResolver.html).

这是一个启动示例：

```
public class ExtendedBeanELResolver extends BeanELResolver {

    @Override
    public Object getValue(ELContext context, Object base, Object property)
        throws NullPointerException, PropertyNotFoundException, ELException
    {
        if (property == null || base == null || base instanceof ResourceBundle || base instanceof Map || base instanceof Collection) {
            return null;
        }

        String propertyString = property.toString();

        if (propertyString.contains(".")) {
            Object value = base;

            for (String propertyPart : propertyString.split("\\.")) {
                value = super.getValue(context, value, propertyPart);
            }

            return value;
        }
        else {
            return super.getValue(context, base, property);
        }
    }

} 
```

要让它运行，请在以下位置注册它`faces-config.xml`：

```
<application>
    <el-resolver>com.example.ExtendedBeanELResolver</el-resolver>
</application> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-28T06:34:54.683

除了@BalusC 答案之外，我还必须添加对 PrimeResourceHandler 的检查。否则，所有 #{resource...} 解析（如 primefaces.css 中的 #{resource['primefaces:spacer/dot_clear.gif']} ）都会失败，解析后的 CSS 文件的输出流会损坏。

```
public class ExtendedBeanELResolver extends BeanELResolver {

    private static final String PRIMEFACES_RESOURCE_PREFIX = "primefaces:";

    @Override
    public Object getValue(ELContext context, Object base, Object property) throws NullPointerException,
            PropertyNotFoundException, ELException {
        if (property == null || base == null || base instanceof ResourceBundle || base instanceof Map
                || base instanceof Collection || base instanceof PrimeResourceHandler) {
            return null;
        }

        String propertyString = property.toString();

        if (!propertyString.startsWith(PRIMEFACES_RESOURCE_PREFIX) && propertyString.contains(".")) {
            Object value = base;

            for (String propertyPart : propertyString.split("\\.")) {
                value = super.getValue(context, value, propertyPart);
            }

            return value;
        } else {
            return super.getValue(context, base, property);
        }
    }
} 
```

# asp.net - 您可以在 Web 应用程序中使用 System.Runtime.Caching.MemoryCache 吗？

> ID：10722264
> 
> 赞同：3
> 
> 时间：2012-05-23T14:39:59.847
> 
> 标签：asp.net, .net

System.Runtime.Caching.MemoryCache 被描述为一种用于非 Web 应用程序的 System.Web.Caching.Cache，但有什么区别呢？是否有理由不在 ASP.Net 应用程序中使用 System.Runtime.Caching.MemoryCache？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T14:52:09.420

我相信`System.Runtime.Caching`它实际上是更新的，并且是仿照`System.Web.Caching`的，不同之处在于您不必依赖 System.Web 程序集。此外，`System.Runtime.Caching.MemoryCache`是可扩展的，而您不能继承自`System.Web.Caching.Cache`

我的建议是，如果您有一个通用库，例如​​，同时用于 Web 和服务（例如），请使用，`System.Runtime.Caching`这样您就不必包含 System.Web 绒毛（如果您不需要它） ）。

以下是有关该主题的一些讨论：[dotnet System.Web.Caching.Cache vs System.RUntime.Caching.MemoryCache](https://stackoverflow.com/questions/3882733/dotnet-system-web-caching-cache-vs-system-runtime-caching-memorycache)

MSDN：[System.Runtime.Caching 命名空间](http://msdn.microsoft.com/en-us/library/system.runtime.caching.aspx)

MSDN：[System.Web.Caching 命名空间](http://msdn.microsoft.com/en-us/library/system.web.caching.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T14:49:40.183

是的，你当然可以。

至于不这样做的原因，它们并不完全相同，并且不共享相同的缓存优先级，因此如果您要同时使用它们，那么在内存不足的情况下，您可能会发现缓存中的内容被弹出你没想到的。

如果你只使用其中一种，你应该没问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T14:50:16.883

不同之处在于它针对非 asp.net 应用程序的使用进行了优化，因为它不依赖于 System.Web。根据[这个 MSDN page](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache.aspx)，另一个区别是您可以创建 MemoryCache 类的多个实例，以便在同一个应用程序和同一个 AppDomain 实例中使用。

因此，确实没有理由不在您的 asp.net 应用程序中使用 System.Web.Caching.Cache，但是是的，您也可以使用 System.Runtime.Caching.MemoryCache。

# actionscript-3 - AS3 - 缩放位图数据

> ID：10722267
> 
> 赞同：5
> 
> 时间：2012-05-23T14:40:09.533
> 
> 标签：actionscript-3, bitmapdata

我想将 BitmapData 缩放到不同的大小，例如 200、400、600 和 800。

有什么好的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-24T10:10:34.470

您不能直接缩放 a `BitmapData`，但可以对其进行缩放克隆。这是缩放 a 的简单示例`BitmapData`：

```
package {
import flash.display.Bitmap;
import flash.display.BitmapData;
import flash.display.Sprite;
import flash.geom.Matrix;

import mx.core.BitmapAsset;

public class Test extends Sprite {

    [Embed(source="test.jpg")]
    private var Image:Class;

    public function Test() {

        var originalBitmapData:BitmapData = BitmapAsset(new Image()).bitmapData;

        function scaleBitmapData(bitmapData:BitmapData, scale:Number):BitmapData {
            scale = Math.abs(scale);
            var width:int = (bitmapData.width * scale) || 1;
            var height:int = (bitmapData.height * scale) || 1;
            var transparent:Boolean = bitmapData.transparent;
            var result:BitmapData = new BitmapData(width, height, transparent);
            var matrix:Matrix = new Matrix();
            matrix.scale(scale, scale);
            result.draw(bitmapData, matrix);
            return result;
        }

        var bitmapA:Bitmap = new Bitmap(originalBitmapData);
        addChild(bitmapA);

        var bitmapB:Bitmap = new Bitmap(scaleBitmapData(originalBitmapData, 0.5));
        addChild(bitmapB);

    }
}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T14:43:22.553

设置位图对象的宽度和高度会缩放该图像，因此使用您的 bitmapData 创建一个位图，然后使用宽度/高度对其进行缩放，或者如果您想使用缩放值，请使用 scaleX/Y。

```
var bmp:Bitmap = new Bitmap(bmpData);
bmp.width = 400; //  or 600,800 etc.
bmp.height = 400; 
```

如果您不想使用位图对象并直接缩放 BitmapData，请参阅此 [调整 BitmapData 对象大小的最佳方法是什么？](https://stackoverflow.com/questions/964495/what-is-the-best-way-to-resize-a-bitmapdata-object)

# android - 在警报对话框中膨胀视图

> ID：10722269
> 
> 赞同：0
> 
> 时间：2012-05-23T14:40:16.593
> 
> 标签：android

我需要问我应该如何在警报对话框中充气三个按钮。基本上可以使用列表视图，当用户长按列表项时，应该会出现一个警告对话框，该对话框应该有编辑、删除和其他一些按钮，这些按钮应该在按下时执行它们的任务，我真的很感激，如果有人能告诉我我应该如何用按钮填充警报对话框。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:46:58.990

无需两次发明轮子。它称为上下文菜单：http: [//developer.android.com/guide/topics/ui/menus.html](http://developer.android.com/guide/topics/ui/menus.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T14:47:46.057

如果您使用 AlertDialog.Buider，您可以添加三个按钮。

```
new AlertDialog.Builder(this)
    .setPositiveButton("Edit", new OnClickListener()
        {
            // Code Here
        })
    .setNeutralButton("Delete", new OnClickListener()
        {
            // Code Here
        })
    .setNegativeButton("Delete", new OnClickListener()
        {
            // Code Here
        })
    .create()
    .show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T14:59:56.317

您可以使用上下文菜单，如下所示：

```
final OnCreateContextMenuListener occml = new OnCreateContextMenuListener() {

    @Override
    public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo)
    {
        AdapterContextMenuInfo info = (AdapterContextMenuInfo) menuInfo;
        menu.setHeaderTitle(pi.getBrowserIdentifier());
        menu.add(R.id.actionBarMenu_Settings, R.string.one, 1, getString(R.string.one));
        menu.add(R.id.actionBarMenu_Settings, R.string.two, 2, getString(R.two));
        menu.add(R.id.actionBarMenu_Settings, R.string.three, 3, getString(R.string.three));
    };
_listView= (ListView) findViewById(R.id.list);
_listView.setOnCreateContextMenuListener(occml); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T15:08:12.843

我正在这样做，你也可以

```
 AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle("Seçenekler");
    builder.setAdapter( /*#your adapter here#*/, new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int which) {

//do something
                        }
                    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-02T16:41:11.070

下一个代码在自定义对话框类中捕获视图覆盖 setView 扩展 alertdialog：

```
class example extends Activity{

private void onClick_show_dialog( View v )
{

    LayoutInflater lainf = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    final View frmFileSystem = lainf.inflate(R.layout.dlg_filesystem, (ViewGroup) findViewById(R.id.lilaFileSystem));

    dlg_filesystem = new DlgFileSystem(this);
    dlg_filesystem.setView(frmFileSystem);
    dlg_filesystem.setCancelable(true);
    dlg_filesystem.setButton( 'aceptar' , new DialogInterface.OnClickListener() { public void onClick( DialogInterface dialog, int which )
    {
        alert( dlg_filesystem.prueba );
    }});
    dlg_filesystem.setButton2( 'cancelar' , new DialogInterface.OnClickListener() { public void onClick( DialogInterface dialog, int which )
    {
    }});
    dlg_filesystem.show();
}

} 
```

和

```
public class DlgFileSystem extends AlertDialog{
public String prueba;
private Context context;
private View frmFileSystem;

public DlgFileSystem(Context context)
{ 
    super(context);
    this.context = context;
}

@Override
public void setView( View frmFileSystem )
{
    super.setView(frmFileSystem);
    this.frmFileSystem = frmFileSystem;
    TextView txprueba = (TextView)frmFileSystem.findViewById(R.id.txPrueba);
    txprueba.setText("adios");
}   
} 
```

# vb.net - 如何在 VB.net 中检索给定结构的默认值？

> ID：10722270
> 
> 赞同：4
> 
> 时间：2012-05-23T14:40:17.980
> 
> 标签：vb.net

如果我执行以下语句：

```
dim defaultDate as Date = Nothing 
```

`defaultDate`包含`Date`结构的默认值

我怀疑有一种干净的方法来检索这个值，比如某种 buitin 常量，但我找不到它。

**问：**在 VB.net 中检索给定结构的默认值的干净方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T14:42:30.647

正如您已经发现`Nothing`的那样，在 VB.NET 中为值类型执行此操作是正确的方法。

C# 有一种更“明确”的方式来处理`default(T)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T14:47:49.630

值类型不需要显式初始化。

默认情况下，所有字段都初始化为默认值。

```
dim defaultDate as Date ' Nothing not required
Console.WriteLine(defaultDate) ' 1/1/0001 12:00:00 AM 
```

[此处](https://stackoverflow.com/a/333840/649524)和[此处](https://stackoverflow.com/a/204009/649524)的默认构造函数说明

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T14:43:25.797

默认`Date`值为[`Date.MinValue`](http://msdn.microsoft.com/en-us/library/system.datetime.minvalue.aspx).

0001 年 1 月 1 日 0:00:00（午夜）。

[日期数据类型 (Visual Basic)](http://msdn.microsoft.com/en-us/library/3eaydw6e%28v=vs.100%29.aspx)

```
Dim d As Date = Nothing
If d = Date.MinValue Then
    ' yes, we are really here '
End If 
```

我通常更喜欢`Date.MinValue`而不是`Nothing`，但我认为这是一个品味问题。

# objective-c - iOS5：willSendRequestForAuthenticationChallenge 方法正在递归运行

> ID：10722272
> 
> 赞同：4
> 
> 时间：2012-05-23T14:40:24.853
> 
> 标签：objective-c, ios, ios5, basic-authentication

我正在使用以下代码对远程服务器的用户进行身份验证。如果我提供了正确的用户名和密码，则没有问题，因为正在进行身份验证并且我正在从服务器获得响应。

但是当我给出错误的凭据时，这个方法会以递归方式调用，所以我无法打破这个。

请帮助我，如何解决这个问题，以便我应该能够显示身份验证失败警报​​消息。

```
- (void)connection:(NSURLConnection *)connection willSendRequestForAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge
{

    NSURLCredential *credential = [NSURLCredential credentialWithUser:@"username"
                                                             password:@"password"
                                                          persistence:NSURLCredentialPersistenceForSession];
    [[challenge sender] useCredential:credential forAuthenticationChallenge:challenge];    
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T14:47:19.360

您需要检查错误计数并适当地取消身份验证质询：

```
if ([challenge previousFailureCount]) {
    [[challenge sender] cancelAuthenticationChallenge:challenge];
} else {
    [[challenge sender] useCredential:credential forAuthenticationChallenge:challenge];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T14:54:34.480

试试这个。

```
- (void)connection:(NSURLConnection *)connection willSendRequestForAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge
        {

        if ([challenge previousFailureCount] > 0) {
                // do something may be alert message
            } 
        else
        {

            NSURLCredential *credential = [NSURLCredential credentialWithUser:@"username"
                                                                     password:@"password"
                                                                  persistence:NSURLCredentialPersistenceForSession];
            [[challenge sender] useCredential:credential forAuthenticationChallenge:challenge]; 
        }

} 
```

# javascript - JavaScript 菜单控制子菜单

> ID：10722274
> 
> 赞同：-2
> 
> 时间：2012-05-23T14:40:26.273
> 
> 标签：javascript, css

我使用这个 javascript 来控制菜单下拉菜单。

是否可以告诉脚本始终显示子菜单 - 但前提是有子菜单？希望有人可以提供帮助。

防爆代码：http: [//jsfiddle.net/zQU7H/](http://jsfiddle.net/zQU7H/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:25:53.880

我添加了一个类 current 来模拟到 li 的活动链接

[http://jsfiddle.net/zQU7H/2/](http://jsfiddle.net/zQU7H/2/)

也许不是最终解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T16:37:15.283

**编辑以满足评论中解释的需求**

在了解您需要什么之后（请下次尝试更好地解释您的问题），这是一个更新的[Fiddle](http://jsfiddle.net/zQU7H/6/)，mgiht 可以帮助您。在这种情况下，我假设（如果我错了，请纠正我）你没有在您的网站中使用带有哈希的链接，它所做的是在 url 上搜索哈希，这个哈希应该等于标题一个元素（你可以突出显示它）你想显示的子菜单。例子：

`<a title="Bestilling" href="http://www.example.com/mypage.html#Handelsbetingelser"></a>`

您可以手动或使用 jquery 执行此操作：

```
$("#productNav ul li").each(function(){
    var title = $(this).children("a").attr("title");
    $(this).find("li a").attr("href",function(index,oldattr){
        return oldattr+"#"+title;
    });
}); 
```

此代码将添加主题标签和标题菜单父级。

**原来的**

我不知道我是否正确理解了您的问题，但如果有帮助，我已经更新了 khaled_webdevs Fiddle：http: [//jsfiddle.net/zQU7H/5/](http://jsfiddle.net/zQU7H/5/)。

它一次只显示一个子菜单，如果应该显示另一个子菜单，则更改它。在这个例子中，我制作了第一个带有子菜单的元素来显示，但是你可以删除它并通过添加类“current”来制作你不想显示的任何子菜单。

希望这可以帮助。

# maven - JAXB2 解析包含肥皂编码类型的 WSDL

> ID：10722275
> 
> 赞同：2
> 
> 时间：2012-05-23T14:40:27.133
> 
> 标签：maven, soap, wsdl, axis, jaxb2

我的 spring WS 中有 jaxb2 的问题。Spring ws 必须解析包含肥皂编码类型（数组）的 wsdl 文件（无 xsd）。我可以使用什么 maven 插件来使用 JAXB2 编组 wsdl 文件？这是wsdl文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions targetNamespace="http://xml.cibg.org/irisbox/" xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:impl="http://xml.cibg.org/irisbox/" xmlns:intf="http://xml.cibg.org/irisbox/" xmlns:apachesoap="http://xml.apache.org/xml-soap" xmlns:wsdlsoap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
<!--WSDL created by Apache Axis version: 1.4
Built on Apr 22, 2006 (06:55:48 PDT)-->
 <wsdl:types>
  <xsd:schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="http://xml.cibg.org/irisbox/">
   <xsd:import namespace="http://schemas.xmlsoap.org/soap/encoding/" schemaLocation="soap-encoding.xsd"/>
   <xsd:complexType name="ArrayOf_xsd_anyType">
    <xsd:complexContent>
     <xsd:restriction base="soapenc:Array">
      <xsd:attribute ref="soapenc:arrayType" wsdl:arrayType="xsd:anyType[]"/>
     </xsd:restriction>
    </xsd:complexContent>
   </xsd:complexType>
   <xsd:complexType name="ExternalIdsResponse">
    <xsd:sequence>
     <xsd:element name="externalIdsResponse" nillable="true" type="impl:ArrayOf_xsd_anyType"/>
    </xsd:sequence>
   </xsd:complexType>
  </xsd:schema>
 </wsdl:types>

     <message name="getExternalIdsRequest">

          <part name="organizationCode" type="xsd:string"/>

          <part name="externalModuleName" type="xsd:string"/>

          <part name="fromDate" type="xsd:dateTime"/>

          <part name="toDate" type="xsd:dateTime"/>

     </message>

     <message name="getExternalIdsResponse">

          <part name="getExternalIdsReturn" type="impl:ExternalIdsResponse"/>

     </message>

     <portType name="ExternalIdsService">

          <operation name="getExternalIds" parameterOrder="organizationCode externalModuleName fromDate toDate">

               <input name="getExternalIdsRequest" message="impl:getExternalIdsRequest"/>

               <output name="getExternalIdsResponse" message="impl:getExternalIdsResponse"/>

          </operation>

     </portType>

     <binding name="ExternalIdsSoapBinding" type="impl:ExternalIdsService">

          <wsdlsoap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>

          <operation name="getExternalIds">

               <wsdlsoap:operation soapAction=""/>

               <input name="getExternalIdsRequest">

                    <wsdlsoap:body use="encoded" namespace="http://xml.cibg.org/irisbox/" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>

               </input>

               <output name="getExternalIdsResponse">

                    <wsdlsoap:body use="encoded" namespace="http://xml.cibg.org/irisbox/" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>

               </output>

          </operation>

     </binding>

     <service name="ExternalIdsServiceService">

          <port name="ExternalIds" binding="impl:ExternalIdsSoapBinding">

               <wsdlsoap:address location="http://172.31.50.155:8988/irisbox/anonymous/services/ExternalIds"/>

          </port>

     </service>

</wsdl:definitions> 
```

# teamcity - 无法更改 server2008 上 Teamcity 中的 user.name

> ID：10722278
> 
> 赞同：0
> 
> 时间：2012-05-23T14:40:36.297
> 
> 标签：teamcity

我试图让构建代理在内置 SYSTEM 帐户之外的另一个帐户下运行。在我们之前的 Windows 2003 机器上，这不是问题；只需将其添加到 buildAgent.properties 并将 buildservice 配置为在所需帐户下运行即可。

但是，在我们的服务器 2008 安装中，新设置没有被选中。任何人都可以确认更改此设置实际上适用于 server2008 吗？/ 我还能尝试什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:36:45.230

好的，我在[这里](http://youtrack.jetbrains.com/issue/TW-5527)的 Teamcity 论坛上找到了答案，显然这是一个已知问题，将在 7.1 中修复，但目前有以下选项：

*   安装 7.1 EAP
*   使用控制台运行代理
*   在注册表中应用肮脏，肮脏的黑客

从 7 升级到 7.1 导致 TC 安装无法正常工作，因此我选择了选项 2：

要运行 agent.bat，我们在 Buildagent 目录中放置了一个批处理文件，其中包含：%windir%\system32\runas.exe /savecred /user:domain\user "%windir%\system32\cmd.exe /k D:\Teamcity \buildagent3\bin\agent.bat 开始"

# php - php语法错误 - 初学者

> ID：10722281
> 
> 赞同：1
> 
> 时间：2012-05-23T14:41:00.240
> 
> 标签：php, mysql, phpmyadmin

我是一个初学者，并试图掌握 php。我遇到了一个似乎无法解决的语法错误。我将向您展示下面的代码以及我尝试过的一些修复。如果有人有另一个想法那就太好了。谢谢：）

```
$subject_set = mysql_query("SELECT * FROM subjects", $connection);
if(!$subject_set){
  die("Database query failed: " . mysql_error());
}

while($subject = mysql_fetch_array($subject_set)) {
  echo "<li> {$subject['menu_name']} </li>";
}

$page_set = mysql_query("SELECT * FROM pages WHERE id_subjects = {$subject["id"]}", $connection);
if(!$page_set){
  die("Database query failed: " . mysql_error());
}

echo "<ul class='pages'>";
while($page = mysql_fetch_array($page_set)) {
  echo "<li> {$page['menu_name']} </li>";
}
echo "</ul>"; 
```

我得到：数据库查询失败：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 " 附近使用正确的语法

我知道问题出在 {$subject["id"]} 因为我得到了内容并且当我输入“WHERE id_subjects = 1”时没有错误。我试过了：

```
{$subject['id']}
{$subject[\"id\"]} 
```

但是得到了同样的错误......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T14:42:45.680

尝试

```
$page_set = mysql_query("SELECT * FROM pages WHERE id_subjects = '".$subject["id"]."'", $connection);
                if(!$page_set){
                    die("Database query failed: " . mysql_error());
                } 
```

顺便提一句。你真的应该远离 mysql_* 函数。它们已被弃用，移至 PDO 或 mysqli_*，它们也更安全（您现在容易受到 sql 注入的攻击）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T14:47:49.480

好吧，当 while 循环完成循环时，它将耗尽所有结果。`$subject['id']`不会有任何信息只是因为 $subject 不再有任何条目。

我猜您想首先列出所有主题，然后是每个主题下的所有页面。

使用 mySQL 不会很漂亮，但这就是您想要做的。（正如 Bono 所说，使用 PDO 或 mysqli，但这里有一个适用于 mySQL 的伪代码解决方案）。

```
loop through first query
    print subject name
    select pages using subject id
    loop through pages under that subject id
       print page names 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T14:45:51.510

如果你读回你的帖子，你可以清楚地看到这里出了什么问题。

```
"SELECT * FROM pages WHERE id_subjects = {$subject["id"]}" 
```

如您所见，“id”未连接到其余部分。那是因为使用 " 你关闭了字符串。

要解决此问题，只需使用

```
"SELECT * FROM pages WHERE id_subjects = " . $subject["id"] 
```

或者，如果您真的想将变量放在字符串中，您可以使用单引号字符串作为键：

```
"SELECT * FROM pages WHERE id_subjects = {$subject['id']}" 
```

我个人是第一个解决方案的粉丝。但这只是我的观点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T14:51:16.477

在带引号的字符串中不需要任何引号，只需使用

```
"SELECT * FROM pages WHERE id_subjects = {$subject[id]}" 
```

# c++ - 关闭 Qt 应用程序的 STDIN

> ID：10722283
> 
> 赞同：0
> 
> 时间：2012-05-23T14:41:14.187
> 
> 标签：c++, qt, cpu-usage

我正在开发一个项目，该项目具有多个使用命名管道进行通信的 C++ 可执行文件。主应用程序 (App1) 产生其余的应用程序。`STDIN`产卵时，它会为孩子们关闭：

```
close(STDIN_FILENO); 
```

它会重定向`STDOUT`到`STDERR`特定于子进程的其他文件。这使得 App1 的输出*仅*来自 App1 而没有子级。它还允许 App1 接受来自`STDIN`子进程的输入，而不是让它被子进程捕获。

其中一个子进程是 Qt 应用程序。生成时，它会使用尽可能多的 CPU，从而大大降低了我的计算机速度。如果我不关闭`STDIN`子进程，则此行为停止（但子进程捕获`STDIN`而不是主进程，这是我不想要的）。

为什么会发生这种情况，如何防止 Qt 应用程序使用所有 CPU 周期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:55:48.520

我想我在解决我遇到的另一个问题时弄清楚了问题所在。`STDIN`在重定向`STDERR`和文件描述符之前，我正在关闭`STDOUT`文件描述符。这弄乱了我用来`freopen()`重定向它们时使用的索引。

重定向后我将`close()`of移至`STDIN`，似乎不再有问题了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T15:43:49.100

也许给 Qt 应用程序它想要的东西？`dup2`之后`fork`但之前使用`exec`？`dup2`将用另一个文件描述符替换给定的文件描述符，以便您可以用文件替换标准输入。快速示例：

```
if(fork() == 0)
{
   int somefd = open("somefile", O_RDONLY);
   // replace stdin (0) with somefd before exec-ing
   if(dup2(somefd, 0) == -1)
   {
      // cunning plan failed
   }
   // exec Qt app here
} 
```

# mysql - 总和正在查询中相乘

> ID：10722285
> 
> 赞同：1
> 
> 时间：2012-05-23T14:41:20.490
> 
> 标签：mysql

我正在处理 2 个家庭作业问题，经过几个小时后，我几乎都解决了它们，我遇到的最后一个问题是我的两个查询都返回了双倍的数值而不是单数。

这是我所拥有的：

```
SELECT SUM(P.AMT_PAID) AS TOTAL_PAID, C.CITATION_ID, C.DATE_ISSUED, SUM(V.FINE_CHARGED) AS TOTAL_CHARGED
FROM PAYMENT P, CITATION C, VIOLATION_CITATION V
WHERE V.CITATION_ID = C.CITATION_ID
AND C.CITATION_ID = P.CITATION_ID
GROUP BY C.CITATION_ID; 
```

和我的另一个：

```
SELECT C.CITATION_ID, C.DATE_ISSUED, SUM(V.FINE_CHARGED) AS TOTAL_CHARGED, SUM(P.AMT_PAID) AS TOTAL_PAID, SUM(V.FINE_CHARGED) - SUM(P.AMT_PAID) AS TOTAL_OWED
FROM (CITATION C)
LEFT JOIN VIOLATION_CITATION V
ON V.CITATION_ID = C.CITATION_ID
LEFT JOIN PAYMENT P
ON P.CITATION_ID = C.CITATION_ID
GROUP BY C.CITATION_ID
ORDER BY TOTAL_OWED DESC; 
```

我确信我忽略了一些东西。如果其他人可以告诉我我哪里出错了，那将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T22:14:33.233

```
Select Sum(P.Amt_Paid) As Total_Paid, C.Citation_Id
    , C.Date_Issued, Sum(V.Fine_Charged) As Total_Charged
From Payment P
    Join Citation C
        On C.Citation_Id = P.Citation_Id
    Join Violation_Citation V
        On V.Citation_Id = C.Citation_Id
Group By C.Citation_Id 
```

首先，您应该使用 JOIN 语法，而不是使用逗号分隔的表列表。它使阅读更容易，更标准化，并有助于通过忽略过滤子句来防止出现问题。

其次，总和过大的最可能原因是`VIOLATION_CITATION`表的连接。如果您使用聚合函数删除 Group By 和列，您可能会看到`P.AMT_PAID`每个`VIOLATION_CITATION`. 也许，以下将解决问题：

```
Select Coalesce(PaidByCitation.TotalAmtPaid,0) As Total_Paid
    , C.Citation_Id, C.Date_Issued
    , Coalesce(ViolationByCitation.TotalCharged,0) As Total_Charged
    , Coalesce(ViolationByCitation.TotalCharged,0)
        - Coalesce(PaidByCitation.TotalAmtPaid,0) As Total_Owed
From Citation As C
    Left Join   (
                Select P.Citation_Id, Sum( P.Amt_Paid ) As TotalAmtPaid
                From Payment As P
                Group By P.Citation_Id
                ) As PaidByCitation
        On PaidByCitation.Citation_Id = C.Citation_Id
    Left Join   (
                Select V.Citation_Id, Sum( V.Find_Charged ) As TotalCharged
                From Violation_Citation As V
                Group By V.Citation_Id
                ) As ViolationByCitation
        On ViolationByCitation.Citation_Id = C.Citation_Id 
```

的用途`Coalesce`是确保如果左连接没有返回给定`Citation_ID`值的行，我们将`Null`用零替换。

# jms - 我应该取消订阅非持久 JMS 主题订阅者吗？

> ID：10722290
> 
> 赞同：1
> 
> 时间：2012-05-23T14:41:31.343
> 
> 标签：jms, subscriber, unsubscribe

我正在编写一个负责集群节点之间通信的 Java JMS 应用程序。消息传递是通过发布\订阅使用主题完成的。TopicSubscriber 是通过调用 TopicSession.createSubscriber(topic, null, true) 创建的，这意味着它不是持久订阅者。现在我正在实现一个“释放”方法，该方法应该取消订阅订阅者（然后关闭连接等）。我看到 TopicSession.unsubscribe(String name) 仅与持久订阅者相关，那么如何取消订阅非持久订阅者？有必要吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T04:04:51.493

不，您不需要`TopicSession.unsubscribe()`为非持久订阅签发。关闭消费者将从 JMS 提供者中删除订阅。您还可以从 JMS 提供程序执行`Session.Close()`或`Connection.Close()`删除订阅。

在您的`Release`方法中，只需关闭订阅者或会话或连接。

只有持久订阅才需要取消订阅。

# python - 导致错误的全局变量

> ID：10722293
> 
> 赞同：0
> 
> 时间：2012-05-23T14:41:36.633
> 
> 标签：python

所以我试图将变量“checks”声明为全局变量，因为我遇到了以下问题：

```
 File "C:\Python27\Projects\Automatic Installer\autoinstall.py", line 11, in installFunc
    if checks[0] == 1:
NameError: global name 'checks' is not defined 
```

这是我的代码，我尝试向程序主体和 installFunc 函数添加全局检查。我应该添加另一个位置/其他方式来指示检查应该包含程序中的信息吗？

```
import urllib
import subprocess
from Tkinter import *

global checks

def installFunc():
    global checks
    subprocess.call("md c:\MGInstall", shell=True)
    subprocess.call (u"net use w: \\it01\files")
    if checks[0] == 1:
        subprocess.call(u"w:\\software\\snagitup.exe")
    if checks[1] == 1:
        subprocess.call(u"w:\\software\\camtasia.exe")
    if checks[2] == 1:
        urllib.urlretrieve(u"SUPERLONGURLLOLOLOL", u"c:\\MGinstall\\gotomeeting.exe")
        subprocess.call (u"c:\\MGinstall\\gotomeeting.exe")
    urllib.urlretrieve(u"http://ninite.com/.net-7zip-air-chrome-cutepdf-dropbox-essentials-firefox-flash-flashie-java-klitecodecs-quicktime-reader-safari-shockwave-silverlight-vlc/ninite.exe", u"c:\\MGinstall\\MGinstall.exe")
    subprocess.call (u"c:\\MGinstall\\MGinstall.exe")
    subprocess.call (u"w:\\printers\\installer\\printer.exe")

app = Tk()

w = Label(app, text="CompanyName IT Automatic Installer")
w.pack()

text = ["Snagit", "Camtasia", "GotoMeeting"]
variables = []
for name in text:
    variables.append(IntVar())
    Checkbutton(text=name, variable=variables[-1]).pack()

b = Button(text="OK", command=installFunc)
b.pack()

app.mainloop()
checks = [variable.get() for variable in variables] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T14:44:45.820

我认为这是因为`checks`在主循环（发布代码的最后一行）之后设置。通过按下按钮从主循环调用该函数`installFunc`，但尚未定义检查。

在这种情况下使用全局数据无论如何都不是一个好主意。您可能应该执行以下操作：

```
def installFunc(checks):
    ...

checks = [variable.get() for variable in variables]
b = Button(text="OK", command=lambda : installFunc(checks)) 
```

或者，更好的是，将所有这些都包含在一个类中......这样你就可以做到：

```
self.b=Button(..., command=self.installFunc) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T14:47:48.960

将第一个“全局检查”（全局级别的检查）替换为“全局 = ...”，并对其进行适当的初始化。使用“全局”仅在函数/方法中真正相关。根据 Python 文档： global 语句是适用于整个当前代码块的声明。这意味着列出的标识符将被解释为全局变量。没有全局变量就不可能分配给全局变量，尽管自由变量可以引用全局变量而不被声明为全局变量。您可能还想阅读这篇文章 - 有很多相关信息：[在创建它们的函数之外的函数中使用全局变量](https://stackoverflow.com/questions/423379/using-global-variables-in-a-function-other-than-the-one-that-created-them)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T14:49:59.253

问题不在于第一次“全球检查”。导致错误的原因是在初始化之前访问了检查。

您必须在调用应用程序的主循环之前初始化检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T14:57:05.677

首先，**Python 不是 PHP**。

您需要使用关键字`global`if 只有当您要分配给函数范围内的全局变量时。

`global checks`在顶层根本没有意义，更重要的**是没有定义**该变量。

`global checks`in 你`installFunc()`没有意义，因为你没有为那个变量分配任何东西，事实上你甚至没有修改它。

在 Python 中，来自外部范围的变量在本地范围内是可见的，除非您尝试分配某些东西，这将被解释为在本地范围内重新定义该变量。

您的代码的问题是您仅`checks`在退出主循环后定义。正确的代码看起来像这样

```
import urllib
import subprocess
from Tkinter import *

#no global definition here...

def installFunc():
    #no global definition here...
    subprocess.call("md c:\MGInstall", shell=True)
    ...

...

#define checks before starting main loop
checks = [variable.get() for variable in variables]
app.mainloop() 
```

# java - lwuit.html.CSSEngine.applyStyleToUIElement 的 NullPointerException（未知来源）

> ID：10722301
> 
> 赞同：2
> 
> 时间：2012-05-23T14:42:16.527
> 
> 标签：java, java-me, lwuit, midp

我正在为LinkedIn登录执行以下程序，但不幸的是，在加载LinkedIn以进行“授予Yokeapp访问您的LinkedIn帐户”的登录窗口时，
它没有显示任何内容并引发错误。

我在安装了 S60 SDk 5th 的 Eclipse pulsar 中使用 LWuit-1.5 版本。

```
public class Login {
   Form form = new Form();
            String authorizeUrl = "";
            public Form Login() {
                Display.init(this);
                HttpRequestHandler  handler = new HttpRequestHandler();
                HTMLComponent htmlC = new HTMLComponent(handler);
                user = new LinkedInUser(Const.consumerKey, Const.consumerSecret);
                user.fetchNewRequestToken();

                if (user.requestToken != null) {
                    authorizeUrl = "https://www.linkedin.com/uas/oauth/authorize?oauth_token="
                                        + user.requestToken.getToken();

                    htmlC.setPage(authorizeUrl);
                    FlowLayout flow = new FlowLayout(Component.TOP);
                    form.setLayout(flow);
                    form.addComponent(htmlC);            
                }

                return form;
            }
        } 
```

我在我的 MIDlet 类 startApp() 中以下列方式调用此方法

```
Login login=new Login();
login.Login().show(); 
```

我收到以下错误

```
 Uncaught exception!                               
     java.lang.NullPointerException
            at com.sun.lwuit.html.CSSEngine.applyStyleToUIElement(Unknown Source)
            at com.sun.lwuit.html.CSSEngine.applyStyle(Unknown Source)
            at com.sun.lwuit.html.CSSEngine.checkSelector(Unknown Source)
            at com.sun.lwuit.html.CSSEngine.applyCSS(Unknown Source)
            at com.sun.lwuit.html.CSSEngine.applyCSS(Unknown Source)
            at com.sun.lwuit.html.CSSEngine.applyCSS(Unknown Source)
            at com.sun.lwuit.html.CSSEngine.applyCSS(Unknown Source)
            at com.sun.lwuit.html.CSSEngine.applyCSS(Unknown Source)
            at com.sun.lwuit.html.CSSEngine.applyCSS(Unknown Source)
            at com.sun.lwuit.html.CSSEngine.applyCSS(Unknown Source)
            at com.sun.lwuit.html.CSSEngine.applyCSS(Unknown Source)
            at com.sun.lwuit.html.HTMLComponent.applyAllCSS(Unknown Source)
            at com.sun.lwuit.html.ResourceThreadQueue.threadFinished(Unknown Source)
            at com.sun.lwuit.html.ResourceThreadQueue$ResourceThread.streamReady(Unknown Source)
            at com.sun.lwuit.html.ResourceThreadQueue$ResourceThread.run(Unknown Source)
            at java.lang.Thread.run(Unknown Source)
        -VM verbose connection exited 
```

HttpRequestHandler 文件代码是

```
 /*
     *  Copyright ï¿½ 2008, 2010, Oracle and/or its affiliates. All rights reserved
     */
    package com.yoke.symbian;

    import com.sun.lwuit.html.DocumentInfo;
    import com.sun.lwuit.html.DocumentRequestHandler;
    import com.yoke.helper.Storage;

    import java.io.ByteArrayInputStream;
    import java.io.IOException;
    import java.io.InputStream;
    import java.io.OutputStream;
    import java.util.Enumeration;
    import java.util.Hashtable;
    import java.util.Vector;
    import javax.microedition.io.Connector;
    import javax.microedition.io.HttpConnection;

        /**
         * An implementation of DocumentRequestHandler that handles fetching HTML documents both from HTTP and from the JAR.
         * This request handler takes care of cookies, redirects and handles both GET and POST requests
         *
         * @author Ofir Leitner
         */
        public class HttpRequestHandler implements DocumentRequestHandler {

            //Hashtable connections = new Hashtable();
            /**
             * A hastable containing all cookies - the table keys are domain names, while the value is another hashtbale containing a pair of cookie name and value.
             */
            static Hashtable cookies = Storage.getCookies();

            /**
             * A hastable containing all history - the table keys are domain names, while the value is a vector containing the visited links.
             */
            static Hashtable visitedLinks = Storage.getHistory();

            /**
             * If true will cache HTML pages, this also means that they will be buffered and read fully and only then passed to HTMLComponent - this can have memory implications.
             * Also note that for the cached HTMLs to be written Storage.RMS_ENABLED[TYPE_CACHE] should be true
             */
            static boolean CACHE_HTML=false;

            /**
             * If true will cache images, this also means that they will be buffered and read fully and only then passed to HTMLComponent - this can have memory implications.
             * Also note that for the cached images to be written Storage.RMS_ENABLED[TYPE_CACHE] should be true
             */
            static boolean CACHE_IMAGES=true;

            /**
             * If true will cache CSS files, this also means that they will be buffered and read fully and only then passed to HTMLComponent - this can have memory implications.
             * Also note that for the cached CSS files to be written Storage.RMS_ENABLED[TYPE_CACHE] should be true
             */
            static boolean CACHE_CSS=false;

            /**
             * Returns the domain string we use to identify visited link.
             * Note that this may be different than the domain name returned by HttpConnection.getHost
             * 
             * @param url The link URL
             * @return The link's domain
             */
            static String getDomainForLinks(String url) {
                String domain=null;
                if (url.startsWith("file:")) {
                    return "localhost"; // Just a common name to store local files under
                } 
                int index=-1;
                if (url.startsWith("http://")) {
                    index=7;
                } else if (url.startsWith("https://")) {
                    index=8;
                }
                if (index!=-1) {
                    domain=url.substring(index);
                    index=domain.indexOf('/');
                    if (index!=-1) {
                        domain=domain.substring(0,index);
                    }
                }
                return domain;
            }

            /**
             * {@inheritDoc}
             */
            public InputStream resourceRequested(DocumentInfo docInfo) {
                InputStream is=null;
                String url=docInfo.getUrl();

                String linkDomain=getDomainForLinks(url);

                // Visited links
                if (docInfo.getExpectedContentType()==DocumentInfo.TYPE_HTML) { // Only mark base documents as visited links

                    if (linkDomain!=null) {
                        Vector hostVisitedLinks=(Vector)visitedLinks.get(linkDomain);
                        if (hostVisitedLinks==null) {
                            hostVisitedLinks=new Vector();
                            visitedLinks.put(linkDomain,hostVisitedLinks);
                        }
                        if (!hostVisitedLinks.contains(url)) {
                            hostVisitedLinks.addElement(url);
                            Storage.addHistory(linkDomain, url);
                        }
                    } else {
                        System.out.println("Link domain null for "+url);
                    }
                } 

                String params=docInfo.getParams();
                if ((!docInfo.isPostRequest()) && (params !=null) && (!params.equals(""))) {
                    url=url+"?"+params;
                }

                // See if page/image is in the cache
                // caching will be used only if there are no parameters and no cookies (Since if they are this is probably dynamic content)
                boolean useCache=false;
                if (((docInfo.getExpectedContentType()==DocumentInfo.TYPE_HTML) && (CACHE_HTML) && ((params==null) || (params.equals(""))) && (!cookiesExistForDomain(linkDomain) )) ||
                    ((docInfo.getExpectedContentType()==DocumentInfo.TYPE_IMAGE) && (CACHE_IMAGES)) ||
                    ((docInfo.getExpectedContentType()==DocumentInfo.TYPE_CSS) && (CACHE_CSS)))
                {
                    useCache=true;
                    InputStream imageIS=Storage.getResourcefromCache(url);
                    if (imageIS!=null) {
                        return imageIS;
                    }
                }

                // Handle the file protocol
                if (url.startsWith("file://")) {
                    return getFileStream(docInfo);
                }

                try {
                    HttpConnection hc = (HttpConnection)Connector.open(url);
                    String encoding=null;
                    if (docInfo.isPostRequest()) {
                        encoding="application/x-www-form-urlencoded";
                    }
                    if (!docInfo.getEncoding().equals(DocumentInfo.ENCODING_ISO)) {
                        encoding=docInfo.getEncoding();
                    }
                    //hc.setRequestProperty("Accept_Language","en-US");

                    //String domain=hc.getHost(); // sub.domain.com / sub.domain.co.il
                    String domain=linkDomain; // will return one of the following formats: sub.domain.com / sub.domain.co.il

                    sendCookies(domain, hc);
                    domain=domain.substring(domain.indexOf('.')); // .domain.com / .domain.co.il
                    if (domain.indexOf('.',1)!=-1) { // Make sure that we didn't get just .com - TODO - however note that if the domain was domain.co.il - it can be here .co.il
                        sendCookies(domain, hc);
                    }

                    if (encoding!=null) {
                       hc.setRequestProperty("Content-Type", encoding);
                    }

                    if (docInfo.isPostRequest()) {
                       hc.setRequestMethod(HttpConnection.POST);
                       if (params==null) {
                           params="";
                       }
                       byte[] paramBuf=params.getBytes();
                       hc.setRequestProperty("Content-Length", ""+paramBuf.length);
                       OutputStream os=hc.openOutputStream();
                       os.write(paramBuf);
                       os.close();

                       //os.flush(); // flush is said to be problematic in some devices, uncomment if it is necessary for your device
                    }

                    String contentTypeStr=hc.getHeaderField("content-type");
                    if (contentTypeStr!=null) {
                        contentTypeStr=contentTypeStr.toLowerCase();
                        if (docInfo.getExpectedContentType()==DocumentInfo.TYPE_HTML) { //We perform these checks only for text (i.e. main page), for images/css we just send what the server sends 

        and "hope for the best"
                                if (contentTypeStr!=null) {
                                    if ((contentTypeStr.startsWith("text/")) || (contentTypeStr.startsWith("application/xhtml")) || (contentTypeStr.startsWith("application/vnd.wap"))) {
                                        docInfo.setExpectedContentType(DocumentInfo.TYPE_HTML);
                                    } else if (contentTypeStr.startsWith("image/")) {
                                        docInfo.setExpectedContentType(DocumentInfo.TYPE_IMAGE);
                                        hc.close();
                                        return getStream("<img src=\""+url+"\">",null);
                                    } else {
                                        hc.close();
                                        return getStream("Content type "+contentTypeStr+" is not supported.","Error");
                                    }
                                }
                            }

                            if ((docInfo.getExpectedContentType()==DocumentInfo.TYPE_HTML) ||
                                (docInfo.getExpectedContentType()==DocumentInfo.TYPE_CSS)) { // Charset is relevant for HTML and CSS only
                                int charsetIndex = contentTypeStr.indexOf("charset=");
                                if (charsetIndex!=-1) {
                                    String charset=contentTypeStr.substring(charsetIndex+8);
                                    docInfo.setEncoding(charset.trim());
                //                    if ((charset.startsWith("utf-8")) || (charset.startsWith("utf8"))) { //startwith to allow trailing white spaces
                //                        docInfo.setEncoding(DocumentInfo.ENCODING_UTF8);
                //                    }
                                }

                            }
                        }

                        int i=0;
                        while (hc.getHeaderFieldKey(i)!=null) {
                            if (hc.getHeaderFieldKey(i).equalsIgnoreCase("set-cookie")) {
                                addCookie(hc.getHeaderField(i), url);
                            }

                            i++;
                        }

                        int response=hc.getResponseCode();
                        if (response/100==3) { // 30x code is redirect
                            String newURL=hc.getHeaderField("Location");
                            if (newURL!=null) {
                                hc.close();
                                docInfo.setUrl(newURL);
                                if ((response==302) || (response==303)) { // The "302 Found" and "303 See Other" change the request method to GET
                                    docInfo.setPostRequest(false);
                                    docInfo.setParams(null); //reset params
                                }
                                return resourceRequested(docInfo);
                            }
                        }
                        is = hc.openInputStream();

                        if (useCache) {
                            byte[] buf=getBuffer(is);
                            Storage.addResourceToCache(url, buf,false);
                            ByteArrayInputStream bais=new ByteArrayInputStream(buf);
                            is.close();
                            hc.close(); //all the data is in the buffer
                            return bais;
                        }

                    } catch (SecurityException e) {
                        return getStream("Network access was disallowed for this session. Only local and cached pages can be viewed.<br><br> To browse external sites please exit the application and when asked for network access allow it.", "Security error");
                    } catch (IOException e) {
                        System.out.println("HttpRequestHandler->IOException: "+e.getMessage());
                        return getStream("The page could not be loaded due to an I/O error.", "Error");
                    } catch (IllegalArgumentException e) { // For malformed URL
                        System.out.println("HttpRequestHandler->IllegalArgumentException: "+e.getMessage());
                        return getStream("The requested URL is not valid.", "Malformed URL");
                    }

                    return is;

                }

                /**
                 * Checks if there are cookies stored on the client for the specified domain
                 *
                 * @param domain The domain to check for cookies
                 * @return true if cookies for the specified domain exists, false otherwise
                 */
                private boolean cookiesExistForDomain(String domain) {
                    Object obj=cookies.get(domain);
                    //System.out.println("Cookies for domain "+domain+": "+obj);
                    if (obj==null) {
                        int index=domain.indexOf('.');
                        if (index!=-1) {
                            domain=domain.substring(index); // .domain.com / .domain.co.il
                            if (domain.indexOf('.',1)!=-1) { // Make sure that we didn't get just .com - TODO - however note that if the domain was domain.co.il - it can be here .co.il
                                obj=cookies.get(domain);
                                //System.out.println("Cookies for domain "+domain+": "+obj);
                            }
                        }

                    }

                    return (obj!=null);
                }

                /**
                 * Sends the avaiable cookies for the given domain
                 * 
                 * @param domain The cookies domain
                 * @param hc The HTTPConnection
                 * @throws IOException
                 */
                private void sendCookies(String domain,HttpConnection hc) throws IOException {
                    //System.out.println("Sending cookies for "+domain);
                    Hashtable hostCookies=(Hashtable)cookies.get(domain);
                    String cookieStr="";
                    if (hostCookies!=null) {
                        for (Enumeration e=hostCookies.keys();e.hasMoreElements();) {
                            String name = (String)e.nextElement();
                            String value = (String)hostCookies.get(name);
                            String cookie=name+"="+value;
                            if (cookieStr.length()!=0) {
                                cookieStr+="; ";
                            }
                            cookieStr+=cookie;
                        }
                    }

                    if (cookieStr.length()!=0) {
                        //System.out.println("Cookies for domain "+domain+": "+cookieStr);
                        hc.setRequestProperty("cookie", cookieStr);
                    }

                }

                /**
                 * Returns an Inputstream of the specified HTML text
                 *
                 * @param htmlText The text to get the stream from
                 * @param title The page's title
                 * @return an Inputstream of the specified HTML text
                 */
                private InputStream getStream(String htmlText,String title) {
                    String titleStr="";
                    if (title!=null) {
                        titleStr="<head><title>"+title+"</title></head>";
                    }
                    htmlText="<html>"+titleStr+"<body>"+htmlText+"</body></html>";
                    ByteArrayInputStream bais = new ByteArrayInputStream(htmlText.getBytes());
                    return bais;

                }

                /**
                 * Adds the given cookie to the cookie collection
                 * 
                 * @param setCookie The cookie to add
                 * @param hc The HttpConnection
                 */
                private void addCookie(String setCookie,String url/*HttpConnection hc*/) {
                    //System.out.println("Adding cookie: "+setCookie);
                    String urlDomain=getDomainForLinks(url);

                    // Determine cookie domain
                    String domain=null;
                    int index=setCookie.indexOf("domain=");
                    if (index!=-1) {
                        domain=setCookie.substring(index+7);
                        index=domain.indexOf(';');
                        if (index!=-1) {
                            domain=domain.substring(0, index);
                        }

                        if (!urlDomain.endsWith(domain)) { //if (!hc.getHost().endsWith(domain)) {
                            System.out.println("Warning: Cookie tried to set to another domain");
                            domain=null;
                        }
                    }
                    if (domain==null) {
                        domain=urlDomain; //domain=hc.getHost();
                    }

                    // Check cookie expiry
                    boolean save=false;
                    index=setCookie.indexOf("expires=");
                    if (index!=-1) { // Cookies without the expires= property are valid only for the current session and as such are not saved to RMS
                        String expire=setCookie.substring(index+8);
                        index=expire.indexOf(';');
                        if (index!=-1) {
                            expire=expire.substring(0, index);
                        }
                        save=true;
                    }

                    // Get cookie name and value
                    index=setCookie.indexOf(';');
                    if (index!=-1) {
                        setCookie=setCookie.substring(0, index);
                    }
                    index=setCookie.indexOf('=');
                    String name=setCookie;
                    String value="";
                    if (index!=-1) {
                        name=setCookie.substring(0, index);
                        value=setCookie.substring(index+1);
                    }

                    Hashtable hostCookies=(Hashtable)cookies.get(domain);
                    if (hostCookies==null) {
                        hostCookies=new Hashtable();
                        cookies.put(domain,hostCookies);
                    }
                    hostCookies.put(name,value);

                    if (save) { // Note that we save all cookies with expiry specified, while not checking the specific expiry date
                        Storage.addCookie(domain, name, value);
                    }

                }

                /**
                 * This method is used when the requested document is a file in the JAR
                 *
                 * @param url The URL of the file
                 * @return An InputStream of the specified file
                 */
                private InputStream getFileStream(DocumentInfo docInfo) {
                    String url=docInfo.getUrl();

                    // If a from was submitted on a local file, just display the parameters
                    if ((docInfo.getParams()!=null) && (!docInfo.getParams().equals(""))) {
                        String method="GET";
                        if (docInfo.isPostRequest()) {
                            method="POST";
                        }
                        String params=docInfo.getParams();
                        String newParams="";
                        if (params!=null) {
                            for(int i=0;i<params.length();i++) {
                                char c=params.charAt(i);
                                if (c=='&') {
                                    newParams+=", ";
                                } else {
                                    newParams+=c;
                                }
                            }
                        }
                        return getStream("<h2>Form submitted locally.</h2><b>Method:</b> "+method+"<br><br><b>Parameters:</b><br>"+newParams+"<hr><a href=\""+docInfo.getUrl()+"\">Continue to local URL</a>","Form Results");
                    }

                    url=url.substring(7); // Cut the file://

                    int hash=url.indexOf('#'); //trim anchors
                    if (hash!=-1) {
                       url=url.substring(0,hash);
                    }

                    int param=url.indexOf('?'); //trim parameters, not relvant for files
                    if (param!=-1) {
                        url=url.substring(0, param);
                    }

                    // Use the following commented segment for loading HTML files saved with the UTF8 header added by some utils - 0xEF, 0xBB, 0xBF
                    // This is a simple code to skip automatically 3 chars on a certain file suffix (.htm isntead of .html)
                    // A better solution is to detect these bytes, but that requires buffering of the stream (to "unread" if these are not the right chars)
                    /*
                    if (url.endsWith(".htm")) {
                        System.out.println("Notepad UTF - Skipping 3 chars");
                        docInfo.setEncoding(DocumentInfo.ENCODING_UTF8); 
                        // If the UTF8 encoding string doesn't work on your device, try the following instead of the line above:
                        //docInfo.setEncoding("UTF-8");
                        InputStream is= getClass().getResourceAsStream(url);
                        try {
                            is.read();
                            is.read();
                            is.read();
                            return is; 
                        } catch (IOException ex) {
                            ex.printStackTrace();
                        }
                    }
                     */

                    return getClass().getResourceAsStream(url);
                }

                /**
                 * Reads an inputstream completely and places it into a buffer
                 * 
                 * @param is The InputStream to read
                 * @return A buffer containing the stream's contents
                 * @throws IOException
                 */
                static byte[] getBuffer(InputStream is) throws IOException {
                        int chunk = 50000;
                        byte[] buf = new byte[chunk];
                        int i=0;
                        int b = is.read();
                        while (b!=-1) {
                            if (i>=buf.length) {
                                byte[] tempbuf=new byte[buf.length+chunk];
                                for (int j=0;j<buf.length;j++) {
                                    tempbuf[j]=buf[j];
                                }
                                buf=tempbuf;
                            }
                            buf[i]=(byte)b;
                            i++;
                            b = is.read();
                        }
                        byte[] tempbuf=new byte[i];
                        for (int j=0;j<tempbuf.length;j++) {
                            tempbuf[j]=buf[j]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T19:02:21.153

LWUIT 中有许多与 OAuth 相关的错误，我们为[Codename One](http://www.codenameone.com/)修复了这些错误。不幸的是，我很难说出你触发的是哪一个，但是你可以查看我们的问题跟踪器，看看你是否能找到特定的东西。我们仍然有一些是开放的，但 OAuth 工作得更好。

# c#-4.0 - 为什么 LinkEntity.AddLink 用它自己的 LinkFromEntityName 而不是 LinkToEntityName 来初始化 LinkFromEntityName？

> ID：10722307
> 
> 赞同：3
> 
> 时间：2012-05-23T14:42:29.307
> 
> 标签：c#-4.0, dynamics-crm-2011

我正在尝试使用查询表达式生成这个基本的 SQL 语句：

```
SELECT *
FROM contact
INNER JOIN businessunit on contact.businessunitid = businessunit.businessunitid
INNER JOIN new_example on businessunit.new_exampleid = new_example.new_exampleid 
```

使用此查询表达式测试：

```
var query = new QueryExpression("contact");
var bu = query.AddLink("businessunit", "businessunitid", "businessunitid");
var buChildLink = bu.AddLink("new_example", "new_exampleid", "new_exampleid");

Assert.AreEqual("businessunit", buChildLink.LinkFromEntityName); // Fails. Actual value is "contact" 
```

解决方法是不使用 AddLink 方法，而是在您指定 LinkFromEntityName 的位置创建 LinkEntity，但我认为这是一个错误是错误的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T03:30:22.103

我创建了一个重载的通用 AddChildLink 方法，可以正确处理此问题，以便在查询表达式中正确添加链接。我还添加了一些默认某些参数的重载。

```
/// <summary>
/// Created do to possible bug (http://stackoverflow.com/questions/10722307/why-does-linkentity-addlink-initialize-the-linkfromentityname-with-its-own-lin)
/// Adds the new LinkEntity as a child to this LinkEnity, rather than this LinkEntity's LinkFrom Entity
/// Assumes that the linkFromAttributeName and the linkToAttributeName are the same
/// </summary>
/// <param name="link"></param>
/// <param name="linkToEntityName"></param>
/// <param name="linkAttributesName"></param>
/// <returns></returns>
public static LinkEntity AddChildLink(this LinkEntity link, string linkToEntityName, string linkAttributesName)
{
    return link.AddChildLink(linkToEntityName, linkAttributesName, linkAttributesName);
}

/// <summary>
/// Created do to possible bug (http://stackoverflow.com/questions/10722307/why-does-linkentity-addlink-initialize-the-linkfromentityname-with-its-own-lin)
/// Adds the new LinkEntity as a child to this LinkEnity, rather than this LinkEntity's LinkFrom Entity
/// Assumes that the linkFromAttributeName and the linkToAttributeName are the same
/// </summary>
/// <param name="link"></param>
/// <param name="linkToEntityName"></param>
/// <param name="linkAttributesName"></param>
/// <param name="joinType"></param>
/// <returns></returns>
public static LinkEntity AddChildLink(this LinkEntity link, string linkToEntityName, string linkAttributesName, JoinOperator joinType)
{
    return link.AddChildLink(linkToEntityName, linkAttributesName, linkAttributesName, joinType);
}

/// <summary>
/// Created do to possible bug (http://stackoverflow.com/questions/10722307/why-does-linkentity-addlink-initialize-the-linkfromentityname-with-its-own-lin)
/// Adds the new LinkEntity as a child to this LinkEnity, rather than this LinkEntity's LinkFrom Entity
/// </summary>
/// <param name="link"></param>
/// <param name="linkToEntityName"></param>
/// <param name="linkFromAttributeName"></param>
/// <param name="linkToAttributeName"></param>
/// <returns></returns>
public static LinkEntity AddChildLink(this LinkEntity link, string linkToEntityName,
    string linkFromAttributeName, string linkToAttributeName)
{
    return link.AddChildLink(linkToEntityName, linkFromAttributeName, linkToAttributeName, JoinOperator.Inner);
}

/// <summary>
/// Created do to possible bug (http://stackoverflow.com/questions/10722307/why-does-linkentity-addlink-initialize-the-linkfromentityname-with-its-own-lin)
/// Adds the new LinkEntity as a child to this LinkEnity, rather than this LinkEntity's LinkFrom Entity
/// </summary>
/// <param name="link"></param>
/// <param name="linkToEntityName"></param>
/// <param name="linkFromAttributeName"></param>
/// <param name="linkToAttributeName"></param>
/// <returns></returns>
public static LinkEntity AddChildLink(this LinkEntity link, string linkToEntityName,
    string linkFromAttributeName, string linkToAttributeName, JoinOperator joinType)
{
    var child = new LinkEntity(
        link.LinkToEntityName, linkToEntityName,
        linkFromAttributeName, linkToAttributeName, joinType);
    link.LinkEntities.Add(child);
    return child;
}

public static LinkEntity AddLink(this QueryExpression qe, string linkToEntityName, string linkAttributesName)
{
    return qe.AddLink(linkToEntityName, linkAttributesName, linkAttributesName);
}

public static LinkEntity AddLink(this QueryExpression qe, string linkToEntityName, string linkAttributesName, JoinOperator joinType)
{
    return qe.AddLink(linkToEntityName, linkAttributesName, linkAttributesName, joinType);
} 
```

这缩短了方法并允许链接：

```
var qe = new QueryExpression("new_entitya");
qe.AddLink("new_entityb", "new_entitybid").
    AddChildLink("new_entityc", "new_entitybid").
    LinkCriteria.AddCondition("new_entitycid", ConditionOperator.Equal, id); 
```

# html - 在 Padrino 中提交表单后如何让 Amazon SES 发送

> ID：10722313
> 
> 赞同：0
> 
> 时间：2012-05-23T14:42:55.087
> 
> 标签：html, padrino

按照此处的说明操作：http: [//www.padrinorb.com/guides/padrino-mailer](http://www.padrinorb.com/guides/padrino-mailer)

我在 app.rb 文件中添加了交付方式：

```
class OscarAffiliate < Padrino::Application
  register Padrino::Rendering
  register Padrino::Mailer
  register Padrino::Helpers

  enable :sessions

  set :delivery_method, :smtp => { 
    :address              => "email-smtp.us-east-1.amazonaws.com",
    :port                 => 587,
    :user_name            => 'AKIAIQ5YXCWFKFXFFRZA',
    :password             => 'AqMNMFecKSYR/TRu8kJgocysAL5SmIUsu2i8u/KAfeF/',
    :authentication       => :plain,
    :enable_starttls_auto => true  
  } 
```

但是通过 Padrino 和 Mailer 生成，我没有推荐的“会话”控制器，它应该属于：

```
post :create do
  email(:from => "tony@reyes.com", :to => "john@smith.com", :subject => "Welcome!",     :body=>"Body")
end 
```

我错过了什么吗？

我在办公室有一个基本数据收集的表格，只需要向 5 个收件人发送一封电子邮件，其中包含邮件正文中的所有表单字段。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T01:15:54.163

在我看来，您正在尝试在提交表单后向一个人（或多个人）发送电子邮件。您可能正在将该表单中的信息保存到数据库中。我认为您对如何使用 Padrino 邮件程序有点困惑。请允许我澄清一下：为了使用 Padrino 的邮件功能发送包含完整内容的电子邮件，您必须创建一个 Padrino 邮件程序（我在下面对此进行了概述）。然后您必须配置该邮件程序，以便在调用它时可以将变量传递给它。然后可以在视图中使用这些变量，您的邮件程序在发送电子邮件之前将其呈现到电子邮件正文中。这是完成您正在尝试做的事情的一种方式，它可能是最直接的。您可以在“Mailer Usage”下找到有关此过程的更多信息你在你的问题中提供了。我在下面概述了一个示例用法，根据我认为您的需求量身定制。

* * *

**指示**

*我将这个代码示例放在一起，并针对我的 AWS 账户进行了测试；它应该在生产中工作。*

在您的`app/app.rb`文件中，包括以下内容（您已经这样做了）：

```
set :delivery_method, :smtp => { 
  :address              => 'email-smtp.us-east-1.amazonaws.com',
  :port                 => 587,
  :user_name            => 'SMTP_KEY_HERE',
  :password             => 'SMTP_SECRET_HERE',
  :authentication       => :plain,
  :enable_starttls_auto => true  
} 
```

然后在中创建一个邮件程序`app/mailers/affiliate.rb`：

```
# Defines the mailer
DemoPadrinoMailer.mailer :affiliate do
  # Action in the mailer that sends the email. The "do" part passes the data you included in the call from your controller to your mailer.
  email :send_email do |name, email|
    # The from address coinciding with the registered/authorized from address used on SES
    from 'your-aws-sender-email@yoursite.com'
    # Send the email to this person
    to 'recipient-email@yoursite.com'
    # Subject of the email
    subject 'Affiliate email'
    # This passes the data you passed to the mailer into the view
    locals :name => name, :email => email
    # This is the view to use to redner the email, found at app/views/mailers/affiliate/send_email.erb
    render 'affiliate/send_email'
  end
end 
```

Affiliate Mailer 的`send_email`视图应位于`app/view/mailers/affiliate/send_email.erb`并如下所示：

```
Name: <%= name %>
Email: <%= email %> 
```

最后，您可以从您接受表单提交的任何方法（和控制器）内部调用您的邮件程序。请务必将字符串替换为实际的表单数据。在这个例子中，我使用了一个 POSTed`create`动作，它没有保存任何数据（因此字符串带有假数据）：

```
post :create do
  # Deliver the email, pass the data in after everything else; here I pass in strings instead of something that was being saved to the database
  deliver(:affiliate , :send_email, "John Doe", "john.doe@example.com")
end 
```

* * *

我真诚地希望这对您与 Padrino 的旅程有所帮助，并欢迎来到 Stack Overflow 社区！

真挚地，

罗伯特·克鲁本斯皮斯

# html - 1140 网格系统 - 网格内的网格

> ID：10722314
> 
> 赞同：1
> 
> 时间：2012-05-23T14:43:04.967
> 
> 标签：html, grid

所以我很难理解[1140 网格系统](http://cssgrid.net)

我查看了 1140 网站以获取线索，并尝试查找使用该系统构建的网站。

我已经设置了一个页面，但无法理解网格是如何相互放置的。

有没有人使用 1140 网格系统建立站点或知道站点，或者可以帮助了解它是如何设置的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:51:39.280

这是我将 1140 CSS 移动版更改为：

```
@media all and (max-width: 480px){  
    body         {/* font-size: 1em; */ -webkit-text-size-adjust: none;}
    .row, body   {width: 100%; min-width: 0; margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; margin-top: -1px;
.row .span1, .row .span2, .row .span2, .row .span3, .row .span4, .row .span5, .row .span6, .row .span7, .row .span8, .row .span9, .row .span10, .row .span11, .row .span12
                {width: auto; float: none; margin-left: 0px; margin-right: 0px; /*padding-left: 20px; padding-right: 20px;*/}
    } 
```

所以是的，20px 也困扰着我:-)。

当我将它与 Jquery Mobile 一起使用时，我已经对网格进行了相当大的更改，但原则仍然存在并且非常好。

# javascript - jsp 中包含多个 Javascript 标记

> ID：10722316
> 
> 赞同：0
> 
> 时间：2012-05-23T14:43:18.707
> 
> 标签：javascript, jsp, jsp-tags

这是我在jsp中的代码：

```
<script>  
var myArray = [];
</script>
    <c:forEach var="attributes" items="FROMthisBEAN"  varStatus="vStatus" >  
                <script>
                 //Executes for each iteration. Do something COOL.
                 myArray.push("Something from this iteration");
                </script>
    </c:forEach> 
```

现在请考虑以下几点：

```
<script>  
    var myArray = [];    
        <c:forEach var="attributes" items="FROMthisBEAN"  varStatus="vStatus" >  
                    myArray.push("Something from this iteration");
        </c:forEach>
 </script>
<c:forEach var="attributes" items="FROMthisBEAN"  varStatus="vStatus" >  
                //Executes for each iteration. Do something COOL.
</c:forEach> 
```

两个代码都给了我相同的输出。
问题是在性能方面哪个更好？
在第一种情况下，c:forEach 中的脚本标签会一次又一次地重复。
但在第二种情况下，我正在创建一个已经存在于 JSP 中的 c:forEach。
完全迷失在这里。请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T14:44:58.597

完全没有必要将这些东西放在单独的`<script>`标签中。如果你真的想让它变得更好，你可能应该考虑创建一个 JavaScript 数组字面量，而不是一系列“push()”调用。将 Java 数组呈现为 JSON 的 JSP 扩展就可以解决问题。

*edit* — to elaborate, a JSON encoder made available as a JSTL function would allow you to write something like:

```
<script>
  var myArray = ${yourTLD:toJSON( some.java.array _)};
</script> 
```

The "toJSON" function would take the array and render it as standard JSON, depending on its contents (and of course that'd probably be somewhat constrained, depending on the JSON code used). The resulting JavaScript delivered to the browser would look something like:

```
<script>
  var myArray = [ "something", "something", "something" ];
</script> 
```

again depending entirely on what's in the Java array. There are various JSON encoding libraries for Java, and it's not terribly hard to write one (and in fact that can be *easier* in special cases than adapting an open source library). Providing the function as a JSTL EL function is a matter of creating a public static function somewhere and declaring it in your .tld file.

# ssh - SOCKS 代理转发

> ID：10722327
> 
> 赞同：1
> 
> 时间：2012-05-23T14:43:42.480
> 
> 标签：ssh, socks

这是我的配置： 3 台 PC：PC-1、PC-2、PC-3

这是我最初所做的：在 PC-1 上设置 SOCKS 代理，使用 ssh 转发到 PC-2：

```
PC-1$ ssh -ND 1080 PC-2 
```

我将浏览器配置为使用 127.0.0.1:1080 并且一切正常。现在我想通过 PC-2 将所有连接转发到 PC-3。所以，像：

```
PC-1$ ssh -ND 1080 PC-2
PC-2$ ssh -ND 1080 PC-3 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T16:15:06.763

在 PC-2 上创建 SOCKS 代理，并将端口转发到 PC-1，如下所示：

```
PC-2$ ssh -ND 1080 PC-3
PC-1$ ssh -NL 1080:localhost:1080 PC-2 
```

将 PC-1 上的浏览​​器配置为使用`127.0.0.1:1080`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-04T11:48:15.190

仅在一个命令中使用更现代的变体：

```
PC-1$ ssh -J PC-2 -ND 1080 PC-3 
```

# java - Java 小程序和 64 位整数

> ID：10722329
> 
> 赞同：0
> 
> 时间：2012-05-23T14:43:49.400
> 
> 标签：java, architecture, applet

我正在开始一个国际象棋程序。在那个框架内，我在两种流行的板子表示之间犹豫不决，分别称为 0x88 和位板。Bitboards 是最新的开发，并被顶级开源算法之一使用 -> Crafty。

位板依赖于这样一个事实，即 64 位整数可以利用低级别的 64 位寄存器进行按位运算。（我们知道在 32 位机器上也可以有 64 位整数，但是移位等操作可能会适得其反）

鉴于 Java 小程序是一种“旧”技术，我的国际象棋小程序在客户端可用时是否能够从 64 位体系结构中受益？是否有任何东西将 Java 小程序限制为整数的 32 位表示？

除了不能真正回答问题的 JVM 考虑因素外，我通过谷歌搜索几乎没有发现任何具体内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T14:46:42.053

在客户端机器上，Java 小程序通常在与常规 Java 应用程序相同的 JVM 中执行。如果 JVM 支持 64 位硬件（最新的 JVM 也支持），那么 applet 也会利用它。applet 是一种“旧”技术这一事实是无关紧要的——它都建立在 JVM 之上，而这决定了与硬件的交互。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T14:46:20.223

根据定义，java 整数是 32 位的。如果你想要 64 位，你可以使用 long

# actionscript-3 - 为什么静态方法给我一个错误

> ID：10722331
> 
> 赞同：1
> 
> 时间：2012-05-23T14:43:53.267
> 
> 标签：actionscript-3, apache-flex, flex4, flex3, flex4.6

通过静态类型 Class 的引用调用可能未定义的方法测试。

这是我的课

```
package com.singleton.sample{
    public class SampleSingleton{

        public static function test( ):void{
            trace('hello world')
        }

    }
} 
```

这是我的 mxml

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" applicationComplete="init()">
    <mx:Script>
        <![CDATA[
            import com.singleton.sample.SampleSingleton;
            public function init():void{

                SampleSingleton.test() // error on this line
            }
        ]]>
    </mx:Script>
</mx:Application> 
```

请忽略命名中的单例引用，因为我将我的课程剥离到这个，但它仍然不起作用。

[编辑]

```
import com.singleton.sample.SampleSingleton;
public function init():void{
  SampleSingleton.test(); // this gives me the error
  com.singleton.sample.SampleSingleton.test(); // this works
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T15:50:07.710

我敢打赌，应用程序文件名为 SampleSingleton，因此您会遇到名称冲突。重命名应用程序。

# php - 在 zend 框架中使用 LIMIT 更新

> ID：10722333
> 
> 赞同：0
> 
> 时间：2012-05-23T14:44:01.113
> 
> 标签：php, mysql, zend-framework

> **可能重复：**
> [如何在 Zend Framework 中为更新查询添加限制？](https://stackoverflow.com/questions/1748660/how-do-i-add-a-limit-to-update-query-in-zend-framework)

我想进行更新并将 LIMIT 1 作为预防措施。这是我的代码：

```
$vals = array();
$vals['status'] = 'closed';
$where = $write->quoteInto('id =?', $orderID);

$write->update("order", $vals ,$where); 
```

我在哪里可以在此查询中添加 LIMIT？

（看起来过去有人问过，但我希望有人能回答）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:34:44.143

嗯...我的 Zend 生锈了，但我想过去我用过：使用[http://framework.zend.com/manual/en/zend.db.statement.html](http://framework.zend.com/manual/en/zend.db.statement.html)执行 SQL (selects/inserts/updates ) 作为普通的 sql 语句...

但是是的，所有旧的和当前的信息都是正确的——update() 无法设置“限制”——你只需要希望你正确设计了数据库并且这样的表不会有重复的键！

另外......'order'是一个非常糟糕的表名:)，'order'是MySQL中的保留字（实际上是任何数据库！）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:10:47.793

看起来您正在使用 Zend_Db_Adapter 来执行您的查询，所以我不确定您是否可以做我所做的事情，不管怎样。
我通常使用 Zend_Db_Table_Row save() 方法来插入和更新记录，但是我也使用 DbTable 模型来提供对 Table 和 Table_Row 抽象 api 的访问。

```
public function save(Music_Model_Artist $artist) {
        //if id is not null
        if (!is_null($artist->id)) {
            //find row, uses fetchRow() so will return NULL if not found
            $row = $this->findById($artist->id);
            $row->id = $artist->id;
        } else {
            //if ID is null create new row
            $row = $this->_getGateway()->createRow();
        }
        //assign data to row
        $row->name = $artist->name;
        //save new row or update
        $row->save();
        //return the row, in case I need it for something else
        return $row;
    } 
```

这相当于如果我在数据数组（或者在这种情况下是实体对象）中包含和 ID，则将更新该行，如果对象中没有 ID，则将创建一个新行。

如果您对我如何 __construct 课程感到好奇：

```
public function __construct(Zend_Db_Table_Abstract $tableGateway = NULL) {
        //pass in concrete DbTable Model, parent alts to using table name string to construct class
        $this->_tableGateway = new Application_Model_DbTable_Artist();
        parent::__construct($tableGateway);
    } 
```

希望这能提供一些帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T15:52:46.103

好吧，看起来没有办法做到这一点，我只是决定使用 straingt 查询功能。我仍然使用 where built 功能，从 WHERE 中删除任何有趣的不需要的值。

```
$where = $write->quoteInto('id =?', $order_id);
$write->query("UPDATE orders SET status = 'closed' WHERE $where LIMIT 1"); 
```

# sql - 使用大小写更改表中的值，而不考虑列

> ID：10722335
> 
> 赞同：1
> 
> 时间：2012-05-23T14:44:06.583
> 
> 标签：sql, null, case

我目前正在查询一个散布有一些空值的表。无需指定每一列（并且无需更新实际数据），有没有一种方法可以用“BLANK”一词替换所有空值？

我曾考虑过使用 CASE 但似乎您需要参考每一列才能做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T14:48:01.743

COALESCE(columnName, "Blank") AS FirstNotNull

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T14:49:36.160

不，你不能按照你的要求去做。这最好在应用层完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T14:47:16.677

不，最好的方法是使用 isnull，但不幸的是你必须在每一列上都这样做：

```
select isnull(your_field, "BLANK")
from your_table 
```

# android - 安卓。启动时升级数据库

> ID：10722338
> 
> 赞同：2
> 
> 时间：2012-05-23T14:44:22.717
> 
> 标签：android, database, sqlite

我指的是 Adroid 中的 SearchableDictionary v2 示例代码。在此示例中，在内容提供程序中，当使用 onUpgrade 方法检测到新的数据库版本时，数据库将被销毁并重新创建。但是此方法仅在调用搜索时启动。现在我想在应用程序升级后第一次启动应用程序时调用 onUpgrade 。那么，如果 onUpgrade 方法是在不同的活动中实现的，我如何让 onUpgrade 在主要活动中工作？谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T14:49:41.610

只需按照 Barak 的建议在您的 contentProvider 中创建更新方法，您只会打开和关闭 db，这将自动触发 onupgrade 在 mainActivity 中使用 contentResolver 来调用该方法并完成:)

# sql-server - 对于特定范围，DBCC FREEPROCCACHE 和 DBCC DROPCLEANBUFFERS 类似

> ID：10722339
> 
> 赞同：2
> 
> 时间：2012-05-23T14:44:26.590
> 
> 标签：sql-server, performance, tsql

我想检查选项以改进我的查询。

有时，我想在生产服务器上进行测试，所以我不能使用 DBCC FREEPROCCACHE 和 DBCC DROPCLEANBUFFERS 来清除整个服务器缓存。

您能否与我分享仅针对我的连接/范围进行一种“缓存清理”的方法？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T11:26:26.100

`DBCC FREEPROCCACHE (plan_handle | sql_handle | pool_name)`

通过传递 plan_handle 或其他选项，我们将能够清除特定 sp 或查询的缓存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T17:25:07.303

缓冲区不保存在用户特定的表中，也不按用户存储 - SQL Server 无法选择性地清除它，因为它不知道为哪些查询保存了哪些项目；这样做会在几乎所有情况下产生不必要的开销（除了你现在尝试做的事情。对不起。）尽管如此，还是有选择的。

然而，有一些建议可以改善这个问题，即使这个问题无法避免：

*   您可以使用 with(RECOMPILE) 强制查询查找新计划，但这不会清除缓存。*   您可以将每个查询运行两次，以查看缓冲数据后它运行的速度/速度。*   您可以反复交替这两种方法，看看它们是否变得更快，以及速度差异收敛到什么程度。*   您可以隔一两天运行它们，也可以在服务器重置后运行它们。（这是如果生产服务器偶尔会被重置。）

[本文](http://blogs.msdn.com/b/davidlean/archive/2010/10/24/quot-how-to-quot-performance-tuning-high-frequency-queries-test-harness.aspx)对在这种情况下进行测试有其他想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T20:33:00.463

如果停机时间可以，您可以使数据库脱机，然后立即使其联机。

# jax-ws - GUICE 3.0 框架中的 JAX-WS Web 服务

> ID：10722342
> 
> 赞同：0
> 
> 时间：2012-05-23T14:44:30.217
> 
> 标签：jax-ws, guice

我们使用 GUICE 框架作为服务层的一部分。现在需要构建 JAX-WS Web 服务。我们使用 JDK 1.6 JAX-WS API 构建了 Web 服务。但是现在，我们无法使用任何 GUICE 资源，因为我们的 Web 服务不是 guice 管理的。

我们正在使用 Guice 3.0。我们如何实现这一目标？

尝试了以下链接 [http://jax-ws-commons.java.net/guice/](http://jax-ws-commons.java.net/guice/)，但没有成功，最后在某些论坛上知道这仅与 Guice 2.0 兼容。

尝试的另一种方法是 [http://developian.blogspot.in/2008/11/google-guice-and-jax-ws.html](http://developian.blogspot.in/2008/11/google-guice-and-jax-ws.html)，但这在内部将开始使用一些访问受限的 sun API，因此我不想用...

现在什么是最好的方法或替代任何其他解决方案。

请指教。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:10:59.383

好吧，您可以注入一个包含 guice 注入器的 EJB。这意味着，如果您使用 Java EE，则可以使用 EJB。那个 EJB 应该是一个 Singleton 并且只处理持有注入器。如果你想注入一些东西，这是你得到注入器的 bean。当然，您必须在第一次通过 Guice.createInjector() 调用它时创建注入器。当拥有注入器时，使用注入器的方法 getInstance(Class clazz) 注入其他类是没有问题的。第一次调用使用注入的类时，您必须仅在 Web 服务中访问注入器。

否则，您可以在 Web 服务中使用静态注入器。也许那不会那么干净，但它会起作用。这需要您在构造函数中创建注入器。例如，在一个抽象服务类中，所有的 web 服务都依赖。然后您可以访问服务中的注入器并执行与上述相同的操作。

```
@Singleton
public class InjectorHolder
{
private Injector injector;

   public GuiceInjectorHolder()
   {
        injector = Guice.createInjector(new Module())
   }
}

    public Injector getInjector()
    {
    return injector;
    }

}

public abstract class AbstractService
{
@EJB
InjectorHolder holder;

public void method()
{
holder.getInjector().getInstance(clazz).doSomething();
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:24:34.883

您是否尝试过创建自己的 Servlet 并在 loadBus() 方法中绑定您的服务？解决方案在这里描述： [CXF and Google Guice using JAX-RS + JAX-WS](https://stackoverflow.com/questions/6263194/cxf-and-google-guice-using-jax-rs-jax-ws/8228288)

# php - FB 的“X、Y 和 Z 其他人都这样”之类的功能

> ID：10722343
> 
> 赞同：0
> 
> 时间：2012-05-23T14:44:32.977
> 
> 标签：php, algorithm

我正在尝试实现类似 facebook 之类的小部件，它说：

```
You, Name1, Name2 and 20 other people like this 
```

我获取了所有数据以显示此 HTML，但我似乎无法找到正确的算法来形成 HTML 字符串。

我的主要问题是我不知道何时放置`and`字符串或`,`（逗号）字符串。如果我只需要输入名称，它会起作用，但问题是`You`字符串总是必须放在第一位。

我将在此处粘贴我的代码以及针对某些特殊情况得到的输出（它是 PHP）。

```
$current_user = 0;
$html = "";
$count = count($result);
$key = 0;
foreach($result as $liked){
    if($key + 1 > $limit)
        break;

    if($liked->uid == $user->uid){
        $current_user = 1;
        continue;
    }

    $html .= "<a href='".$liked->href."'>".$liked->name."</a>";

    if($key < $count - 2)
        $html .= ", ";
    elseif($key == $count - 2 && $key + 1 != $limit)
        $html .= " and ";

    $key++;
}

if($current_user){
    $userHtml = "You";

    if($count > 2)
        $userHtml .= ", ";
    elseif($count > 1)
        $userHtml .= " and ";

    $html = $userHtml.$html;
}

$html = "&hearts; by ".$html;

if($count > $limit){
    $difference = $count - $limit;
    $html .= " and ".$difference." ".format_plural($difference,"other","others");
}

return $html; 
```

在当前用户是最后一个喜欢这个的特殊情况下，它会显示：

```
♥ by You, admin, edu2004eu and 
```

注意这个`and`词后面没有任何东西，因为`You`应该在它后面，但我把它放在了开头。有什么帮助吗？我只需要逻辑，而不是实际代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T15:25:30.947

你可以尝试这样的事情：

```
$likedBy = array('admin', 'eduard', 'jeremy', 'someoneelse');

// check if I like it and if so move me to the front
if (in_array($currentUsername, $likedBy)) {
  $me = array_search($currentUsername, $likedBy);
  unset($likedBy[$me]);
  array_unshift($likedBy, 'You');
}

// remove anything after the limit
$extra = array_splice($likedBy, 3);

// the comma list
$html = implode(', ', $likedBy);

// any extras? if so, add them here, if not rewrite the list so
// it's "You, Eduard and admin"
if (!empty($extra)) {
  $html .= ' and '.count($extra);
} else {
  $lastguy = array_splice($likedBy, 1);
  $html = implode(', ', $likedBy).' and '.$lastguy;
}

$html .= ' like this'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T15:22:02.807

Eduard，您只需将其放在`$key++;`循环的顶部并取出循环中的所有位置即可解决此问题`$key + 1`。

我认为正在发生的事情`$key + 1`是假设有一个当前用户。

如果当前用户不在第一个 $limit 个条目中，此行也不会显示当前用户

```
if($key + 1 > $limit)
    break; 
```

您可以通过将其放在查找当前用户的代码之后来解决此问题。

在 Java 中（我知道，但它是我运行的）它看起来像：

```
 List<String> users = Arrays.asList("Brian","Tom","Jack","John");
    int key = 0;
    String html = "";
    String currentUser = "Brian";
    int limit = 3;
    boolean foundCurrentUser = false;
    for (String user : users) {
        key ++;
        if (currentUser == user) {
            foundCurrentUser = true;
            continue;
        }
        if (key > limit) {
            continue;
        }
        html += user;

        if (key < users.size() - 1) {
            html += ",";
        } else if (key == users.size() - 1 && key != limit) {
            html += " and ";
        }
    }
    if (foundCurrentUser) {
        String userHTML = "You";
        if (key > 2) {
            userHTML += ", ";
        } else if (key == 1) {
            userHTML += " and ";
        }
        html = userHTML + html;
    }

    html = "Likeed by " + html;
    if (users.size() > limit ) {
        html += " and 3 other people";
    }
    System.out.println(html); 
```

# sql - SQL 结果转为带通配符的字符串

> ID：10722344
> 
> 赞同：0
> 
> 时间：2012-05-23T14:44:40.633
> 
> 标签：sql, sql-server

假设你有一个这样的表：

```
ID     FNAME      LNAME
1      Bob        Smith
2      Sally      Jones 
```

一个简单的 SELECT * FROM [Table] 将返回所有行。但是，如果您想从结果中构建一个字符串，并且列名未知，该怎么办？换句话说，这不起作用：

```
SELECT ID + ',' + FNAME + ',' + LNAME FROM [Table] 
```

因为你不知道列名。此外，COALESCE 不起作用，因为它不接受通配符。理想情况下，您希望执行如下操作：

```
SELECT dbo.FunctionThatSplitsResultsToString(*) FROM [Table] 
```

并让它返回

```
1,Bob,Smith
2,Sally,Jones 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T16:35:41.263

这是@Igor 给出的答案的更正版本。除了在值之间连接逗号字符之外，它还将 NULL 值转换为空字符串（因为将字符串连接到 NULL 会导致 NULL 值）。

```
DECLARE @sql NVARCHAR(max)='SELECT '
DECLARE @TableName NVARCHAR(max) = 'Table_Name' -- <-- Set the target table name here

SELECT @sql=@sql+N'ISNULL(CAST(' + name +' as NVARCHAR(max)), '''')+'',''+'
FROM sys.columns
WHERE object_id=OBJECT_ID(@TableName)

SELECT @sql=SUBSTRING(@sql,1,LEN(@sql)-5)+N' FROM ' + @TableName
--SELECT @sql -- uncomment to see the query string

EXEC sp_executesql @sql 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T16:00:42.913

正如第一个 Igor 所指出的，解决方案是动态 SQL。您需要正确构造底层 SQL 语句。

以下代码将所有列转换为 varchar()，然后将它们连接在一起。SQL 的最终形式删除了最后一个“+”号并添加了 from 语句：

```
declare @sql varchar(max);

select @sql = (select 'cast('+coalesce(column_name, '') + ' as varchar(255)) +'
               from information_schema.columns
               where table_name = <whatever>
               for xml path ('')
              );

select @sql = left(@sql, len(@sql - 2)) + ' from t';

exec(@sql); 
```

我承认以美国为中心，很少使用国际化。整个事情也适用于 nvarchars()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T16:59:50.503

试试下面的

去声明@ColumnsList VARCHAR(MAX), @SelectStatement VARCHAR(MAX),@TargetTable VARCHAR(250),@FINALSQL NVARCHAR(MAX) SET @TARGETTABLE ='TempData'

SELECT @ColumnsList = COALESCE(@ColumnsList+' + '','' +' ,'') + 'Cast('+ A.COLUMN_NAME + ' AS Varchar(250))' FROM（从 INFORMATION_SCHEMA.COLUMNS 中选择 Column_Name，其中 TABLE_NAME= @TARGETTABLE) A SELECT @FinalSql = 'Select ' +@ColumnsList + ' FROM ' + @TARGETTABLE

执行 SP_EXECUTESQL @FINALSQL GO

# jakarta-ee - 在 EJB 3.1 中存储 SFSB 引用

> ID：10722347
> 
> 赞同：3
> 
> 时间：2012-05-23T14:44:48.497
> 
> 标签：jakarta-ee, glassfish, java-ee-6, ejb-3.1

我想存储对有状态会话 Bean 的引用并将其保存到数据库或将其传输到另一个 VM。据我所知，在 EJB 2.x 中，可以使用`getHandle()`. 如果我尝试使用 Glassfish 3.1.1 序列化 SFSB 实例，则会收到以下异常：

```
java.io.NotSerializableException: com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate 
```

此外，我还没有找到获得 SFSB 句柄的方法。SFSB SessionContext 中对 EFBHome、EFBObject、EFBLocalHome 的所有引用都是空的，即使 bean 由容器正确管理。如果我正确理解规范，那么无论如何都不需要 EJB 3.1 中的句柄，因为开发人员应该能够直接使用 SFSB 引用。

[本文](http://www.jaceklaskowski.pl/wiki/Serializing_reference_of_@Stateful_session_beans_in_EJB_3.1_with_GlassFish_3.1)讨论了同样的问题，但建议使用 JavaEEObjectInputStream 类并没有在我的测试中公开方法 readObject。我想知道这种方法怎么可能奏效。

谁能建议一种在 Glassfish 中序列化 SFSB 以存储参考的好方法？我不想附加对 HTTPSession 的引用（我只是这么说，因为人们到处都推荐这个）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:04:14.740

这家伙显然找到了 glassfish 特定的解决方案：

[http://www.jaceklaskowski.pl/wiki/Serializing_reference_of_@Stateful_session_beans_in_EJB_3.1_with_GlassFish_3.1](http://www.jaceklaskowski.pl/wiki/Serializing_reference_of_@Stateful_session_beans_in_EJB_3.1_with_GlassFish_3.1)

# asp.net - 在 SqlDataSource1_Deleted 时在 response.write 中编写一些 javascript 代码

> ID：10722348
> 
> 赞同：0
> 
> 时间：2012-05-23T14:44:52.313
> 
> 标签：asp.net, vb.net, visual-studio-2010, events, sqldatasource

我有一个通知 j-query 插件.. 我在我的页面中品尝它（工作 100%）但是当我想在事件 SqlDataSource1_Deleted 和 response.write 方法中使用它时它不起作用

```
Protected Sub SqlDataSource1_Deleted(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.SqlDataSourceStatusEventArgs) Handles SqlDataSource1.Deleted

    Response.Write("<script  type='text/javascript'> showNotification({message: 'This is a sample Success notification', type: 'success' }); </script>")
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T14:52:56.273

如果您`Response.Write`在页面中使用，您将把代码放在 HTML 文档本身之前。这意味着它将在 jQuery 或任何插件加载之前运行。（而且它可能会导致页面以怪异模式呈现，这可能会破坏整个布局。）

使用[`RegisterStartupScript`方法](http://msdn.microsoft.com/en-us/library/system.web.ui.clientscriptmanager.registerstartupscript.aspx)在页面中添加脚本：

```
Protected Sub SqlDataSource1_Deleted(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.SqlDataSourceStatusEventArgs) Handles SqlDataSource1.Deleted
  Page.ClientScript.RegisterStartupScript(Page.GetType(), "notification", "showNotification({message: 'This is a sample Success notification', type: 'success' });", true)
End Sub 
```

# lua - 如何扩展 Doxygen 以支持 Lua？或者：如何编写 Doxygen 过滤器？

> ID：10722349
> 
> 赞同：2
> 
> 时间：2012-05-23T14:44:53.533
> 
> 标签：lua, doxygen

我正在开发一个一半 Lua 一半 C++ 的代码库。我们使用 Doxygen 来记录我们的 C++ 代码。

现在，我们也想在 Lua 部分使用 Doxygen。但是 Doxygen 缺乏对 Lua 的支持。

有[一个项目](https://github.com/alecchen/doxygen-lua)为 Doxygen 添加了 Lua 支持。它是用 Perl 编写的，我理解它的作用。它实现了一个过滤器，将 Lua 源文件转换为 Doxygen 可以解析的东西。但是，Doxygen 似乎无法识别所有功能等。

所以我的问题真的是：Doxygen 对过滤器的期望格式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T18:32:19.870

严格的答案是您的过滤器应该以 doxygen 支持的语言生成语法上有效的输出（您可以使用`EXTENSION_MAPPING`将您的语言的文件扩展名映射到支持的语言）。

由于 doxygen 的解析器相当松散（它是一个词法扫描器，而不是真正的解析器），如果您不 100% 遵循该语言的语法规则，它可能也能正常工作，但这将是一个跟踪和错误的过程来找出如果您升级到 doxygen 的未来版本，哪些偏差是允许的并且可能会中断。

# asp.net-mvc-3 - Azure asp.net mvc 3 发布/部署问题

> ID：10722355
> 
> 赞同：0
> 
> 时间：2012-05-23T14:45:05.950
> 
> 标签：asp.net-mvc-3, azure, azure-web-roles

您好，我有一个 MVC 3 Web 项目，之前已成功部署到 Azure。由于我在 github 上遇到了一些问题，并且 Azure 云项目不会发布，我们尝试删除/创建新项目；更新了不同的设置、端点；包括所有的dll；试图寻找诊断。即使我们尝试创建一个空白的新项目并部署它到目前为止也没有任何效果

```
3:37:12 PM - Preparing deployment for Subscription with Subscription ID: 519e1c......
3:37:13 PM - Connecting...
3:37:14 PM - Verifying storage account 'blahblah'...
3:37:15 PM - Uploading Package...
3:37:45 PM - Creating...
3:39:53 PM - Created Deployment ID: 244f269afefe40fb99........
3:39:53 PM - Starting...
3:40:28 PM - Initializing...

3:40:28 PM - Instance 0 of role Web is in an unknown state
3:45:34 PM - Instance 0 of role Web is starting the virtual machine
3:46:42 PM - Instance 0 of role Web is in an unknown state 
```

然后很忙，骑自行车......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T03:21:45.307

如果您想查看发生了什么，只需在实例上激活远程桌面。

我发现在实例回收之间有足够的时间来运行网站并获得黄色的死机屏幕，告诉您您缺少哪个 dll。

# php - 在 Symfony 2 中实现多个用户

> ID：10722356
> 
> 赞同：2
> 
> 时间：2012-05-23T14:45:13.600
> 
> 标签：php, symfony, fosuserbundle

有谁知道他们是否存在支持多种用户类型的捆绑包？

在我的示例中，我想要一个通用的 User 类（例如 FOSUser），我将从该类扩展以用于我的 CompanyUser 类和 EmployeeUser 类，因此这两个类将具有 User 的所有功能，但具有它们自己的类属性和方法。

从我读到的看起来 FOSUser 只支持一种类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:16:26.033

没有捆绑包。您应该使用组，或者如果没有其他方式 UserEntities 扩展 UserBaseModel。这些应该可以通过自定义 UserProvider 获得

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T22:56:15.743

你可以使用[RollerworksMultiUserBundle](https://github.com/rollerworks/RollerworksMultiUserBundle)

# java - 使用 Netty 的 Java 客户端点对点

> ID：10722364
> 
> 赞同：1
> 
> 时间：2012-05-23T14:45:44.107
> 
> 标签：java, multithreading, netty

我正在编写一个必须连接（并保持活动状态）到几个（数百个）远程对等方并管理消息传递/控制它们的进程。

我制作了这个软件的两个版本：第一个使用经典的“每个连接线程”模型，第二个使用标准 java NIO 和选择器（减少线程分配，但有问题）。然后，环顾四周，我发现 Netty 在大多数情况下可以提升很多，我开始使用它的第三个。我的目标是保持资源使用率很低，并保持快速。

一旦编写了带有自定义事件和动态处理程序切换的管道工厂，我就停在最肤浅的部分：它的分配。我阅读的所有示例都使用具有单个连接的单个客户端，所以我有疑问：*我设置了 a`ChannelFactory`和 a `PipelineFactory`，因此每个人`(new ClientBootstrap(factory)).connect(address)`都使用新管道创建了一个新通道。是否可以创建共享管道并将业务逻辑推迟到线程池？* 如果是这样，怎么做？

使用标准的 java NIO，我设法使用了两个小型线程池（线程 < 远程对等点），利用了选择器；然而，我在回收收听的写作频道时遇到了麻烦。

通信应该通过单个通道进行，该通道可以接收来自远程对等方的定时消息或进行 3 路控制（command-ack-ok）。

另一方面：一旦事件到达最后一个处理程序，会发生什么？是在那里我提取它还是我可以从任何一点提取消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T18:12:35.060

您应该只有一个引导程序（即一个 ChannelFactory 和一个 PipeLineFactory）。管道，甚至单独的通道处理程序，可以共享，但它们通常是为每个通道创建的。

您可以在管道中使用 ExecutionHandler 将执行从 IO 工作线程转移到线程池。

但是您为什么不阅读[http://netty.io/wiki/](http://netty.io/wiki/)上的详尽文档呢？你会在那里找到每个问题的答案。

# sql - 在 SQL 中限制结果

> ID：10722365
> 
> 赞同：2
> 
> 时间：2012-05-23T14:45:45.787
> 
> 标签：sql, sql-server, tsql

我有下表，其中包含以下列：

```
Person(id, name, surname) 
```

我想提取同名的人，但每个名字只返回 5 行。

有任何想法吗？谢谢。

编辑：因为我正在使用 jQuery Mobile 和 Phonegap 开发 iPad 应用程序，所以我使用的是 HTML5 本地数据库。我需要保持原来的顺序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T14:50:50.423

```
SELECT p1.* FROM Person p1
WHERE p1.id in (
    SELECT TOP 5 p2.id FROM Person p2
    WHERE p2.name = p1.name
)
ORDER BY p1.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T14:52:16.173

```
select distinct top 5  name from Person 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T14:53:21.743

您可以使用分区结束。例子：

```
USE Table1;

with TempXYZ as
(
select *, row_number() over (partition by fname order by fname) as ABC
)
SELECT * from TempXYZ where ABC <=5 
```

TempXYZ 只是一个用于存储数据的临时表，ABC 是一个虚拟字段，它将通过 fname 进行分区。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T14:56:53.440

```
select name, surname 
from Person a 
where id in (
select top 5 b.id from Person b where b.name=a.name
) 
```

# css - 底部填充不适用于非 Chrome 浏览器中的溢出元素

> ID：10722367
> 
> 赞同：15
> 
> 时间：2012-05-23T14:45:50.350
> 
> 标签：css

如果您在 Chrome 中查看这个小提琴：http: [//jsfiddle.net/up4Fa/](http://jsfiddle.net/up4Fa/)

你会看到一个溢出的元素，里面有 20px 的填充！一切正常，按预期工作。

但是，如果您在 IE9 或 Firefox 中运行相同的测试，则底部的文本会触及容器的边缘，并且底部填充将被忽略...

如果我在内部 div 上进行填充，它会出现问题，但我宁愿用一个 div 修复它，并且不明白为什么 firefox 和 IE 都有问题，但 Chrome 没有？

编辑：文字不是万一有人想知道的原因！如果我删除文本，它会对红色框执行相同的操作。

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-23T15:20:43.373

似乎当您通过定位间接设置容器 div 的尺寸时，这些浏览器无法预测 div 的高度并正确呈现填充。解决此问题的一个快速而肮脏的技巧是删除容器的底部填充：

```
div.container {
    ...
    padding: 20px 20px 0 20px;
    ...
} 
```

并为其最后一个孩子添加底部边距：

```
div.container > *:last-child {
    margin-bottom: 20px;
} 
```

[http://jsfiddle.net/xa9qF/](http://jsfiddle.net/xa9qF/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-04-23T14:30:40.010

在我看来，最好的方法是使用`:after`选择器

```
div.container:after{
    content:"";
    display:block;
    height:20px; /* Which is the padding of div.container */
} 
```

[http://jsfiddle.net/up4Fa/23/](http://jsfiddle.net/up4Fa/23/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-17T18:44:36.650

这是我在使用 CSS 网格时的修复：

```
/* Fix scrollbar removing padding-bottom */
@supports (-moz-appearance:none) {
  .container::after {
    content: "";
    height: 1px;
    margin: calc(var(--padding) - var(--gap));
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-16T23:16:21.397

> 视口单位一直存在争议，其中一些是因为移动浏览器如何通过对如何实现它们有自己的看法而使事情变得更加复杂。

```
.my-element {
  height: 100vh; /* Fallback for browsers that do not support Custom Properties */
  height: calc(var(--vh, 1vh) * 100);
}

// First we get the viewport height and we multiple it by 1% to get a value for a vh unit
let vh = window.innerHeight * 0.01;
// Then we set the value in the --vh custom property to the root of the document
document.documentElement.style.setProperty('--vh', `${vh}px`); 
```

[在移动设备上查看单元的技巧](https://css-tricks.com/the-trick-to-viewport-units-on-mobile/)

# windows - 查看其他应用程序的字体

> ID：10722371
> 
> 赞同：2
> 
> 时间：2012-05-23T14:46:01.383
> 
> 标签：windows, fonts

我们收到了一两个关于 Windows 桌面应用程序字体大小的投诉，现在我很想将它的字体选择和大小与其他应用程序进行比较。

我知道[Windows UX 指南](http://msdn.microsoft.com/en-us/library/windows/desktop/aa511258.aspx)有自己的建议，但我想看看在实践中使用了什么。

我知道我可以使用像 Spy++ 这样的工具来检查窗口类、样式和消息。是否有任何类似的工具可以识别 Windows 应用程序的字体？

# php - 通过 PHP 调整大量图像的大小，保持纵横比而不是使用我所有的 RAM？

> ID：10722372
> 
> 赞同：1
> 
> 时间：2012-05-23T14:46:02.250
> 
> 标签：php, memory-management, image-resizing, aspect-ratio

我有一个问题，我认为很容易解决，但结果比预期的要困难一些。

我正在一个网站上工作，有人可以为产品上传图片，它会即时调整它们的大小两次（500x500 和 150x150）。我试图保持纵横比，例如，如果我有 600x500 的图像，它将调整为 500x417 和 150x125。

我找到了（很多）执行此操作的代码，例如此类[，](http://www.white-hat-web-design.co.uk/blog/resizing-images-with-php/)但是我总是遇到内存问题。我认为该类在调整大小后不会卸载/销毁临时图像。

我让主机将我的内存限制从 32 升级到 64M，但是后来我的内存用完了。我也坚持使用 PHP 5.2.13，所以我没有垃圾收集器。

我的 PHP 相当新，所以对我来说类的工作方式非常陌生，否则我会尝试在需要的地方添加 imagedestroy() 函数。我摆弄了几个小时的链接课程，但没有成功。

任何人都可以：

- 指向一个魔术类的方向，该类在调整大小完成后保持纵横比以及卸载/销毁临时图像，以控制 RAM 使用？

-给我一些（非常需要！）指导我可以在哪里以及如何修改一个类（例如发布的类）以销毁临时图像。

- 告诉我，如果我要解决这个非常错误的问题？

哦，我曾经让 WideImage 类工作，它工作得很好，然后突然停止了。我花了几个小时试图修复它，但没有成功。

我的 PHP 安装有 GD，但没有 ImageMagick。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T03:59:45.580

好吧，我设法解决了我自己的问题。

我坐下来，擦掉所有调整大小的代码，从头开始，写了这个很棒的小函数来做我需要的事情。

```
function resizeimage($targetw, $targeth, $input, $savedest) {
    list($oldw, $oldh) = getimagesize($input);
    $imgratio = ($oldw / $oldh);
     if ($imgratio>1) { 
         $new_width = $targetw; 
         $new_height = ($targeth / $imgratio); 
     } else { 
         $new_height = $targeth; 
         $new_width = ($targetw* $imgratio); 
     }
  $imagetemp = imagecreatetruecolor($new_width, $new_height);
  $imageorig = imagecreatefromjpeg($input);
  imagecopyresampled($imagetemp, $imageorig, 0, 0, 0, 0, $new_width, $new_height, $oldw, $oldh);
  imagejpeg($imagetemp, $savedest, 95);
  imagedestroy($imageorig);
  imagedestroy($imagetemp);
  unset($oldw,$oldh,$imgratio,$new_height, $new_width, $imagetemp, $imageorig);
} 
```

输入目标宽度和高度，以及输入图像的位置（例如“uploads/images/testimage.jpg”），以及您希望保存它的位置（“uploads/images/resizedtestimage.jpg”）。

希望这个片段可以帮助将来的人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T14:56:08.657

以下是一些 GD 图像处理示例： http: [//fdcl.svn.sourceforge.net/viewvc/fdcl/trunk/modules/imageprocessing/gd/module.inc?revision=212 &view=markup](http://fdcl.svn.sourceforge.net/viewvc/fdcl/trunk/modules/imageprocessing/gd/module.inc?revision=212&view=markup)

一种方法是这种技术：

*   打开图像缩放到 500
*   `imagedestroy($this->original_image)`
*   使用缩放到 500 并缩小到 150 的图像
*   `imagedestroy($this->image500)`
*   `imagedestroy($this->image150)`

最后一个想法是使用任何可用的命令行工具为您调整大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T15:36:18.700

我做过类似的事情，但使用了 2 个可以从 Linux 服务器上的命令行运行的应用程序。

ImageMagick Mogrify：[http ://www.imagemagick.org/www/mogrify.html](http://www.imagemagick.org/www/mogrify.html)

```
mogrify -resize 750 "image.jpg" 
```

将调整为 750 像素宽

jpegoptim：[http ://freecode.com/projects/jpegoptim](http://freecode.com/projects/jpegoptim)

```
jpegoptim "image.jpg" –max=70 --strip-all 
```

将 jpeg 优化到 70% 并从图像中去除所有不必要的膨胀。

两者都从 CLI 运行并提供许多命令选项，确保您可以轻松使用其中一个或两个。

# c - 如何根据块定义页面？

> ID：10722373
> 
> 赞同：2
> 
> 时间：2012-05-23T14:46:02.247
> 
> 标签：c, memory, memory-management, block

我了解到，当我们管理诸如树或其他图之类的数据结构时，它的节点存储在计算机中称为块的东西中，图的节点可以组成块，并且它是在辅助和主要之间传输的块当数据结构在主内存和辅助内存之间移动时的内存。所以我认为块是什么很清楚，它可以由不同的大小组成，具体取决于架构，但通常是 4K。现在我想知道块与内存*页*的关系。页面是否由块组成，或者块与页面的关系是什么？我们可以用块来定义内存中的页面吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:24:05.063

您通常会尝试定义一个块，使其与内存页面的大小相同，或者它的大小可以被内存页面的大小整除，因此一个页面中可以容纳整数个块。

正如您所提到的，4K 往往效果很好——典型的内存页面大小是 4K 和 8K。大多数还支持至少一个更大的页面大小（例如，1 兆字节），但您通常可以或多或少地忽略它们；它们主要用于映射单个大块连续内存（例如，CPU 直接可见的图形内存部分）。

# php - 使用 htaccess 将 js/css 解析为 PHP 文件

> ID：10722375
> 
> 赞同：6
> 
> 时间：2012-05-23T14:46:17.510
> 
> 标签：php, javascript, .htaccess

嗨，我一直在努力在 htaccess 上执行以下操作，但它似乎不起作用。

有人可以帮我吗？

`AddType application/x-httpd-php .js`

我尝试了 php4,php5 版本的所有我可以在谷歌上找到的东西，但我没有运气。

我错过了什么？

在我的 file.js

以下是...

```
<?php 

$(document).ready();//jquery/javascript
?> 
```

我预计会出现 php 致命错误，但我将上述内容完全视为纯文本。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-24T21:57:49.460

如果您只想使用 .htaccess 配置来执行此操作（谁想在*每个*PHP 文件中设置标头？）：

```
<FilesMatch "\.css$">
  SetHandler application/x-httpd-php
  Header set Content-type "text/css"
</FilesMatch>

<FilesMatch "\.js$">
  SetHandler application/x-httpd-php
  Header set Content-type "application/javascript"
</FilesMatch> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-23T14:49:49.833

尝试：

```
<FilesMatch "\.(js)$">
AddHandler application/x-httpd-php .js
</FilesMatch> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T14:57:22.620

如果我是正确的，您的 PHP JS 文件必须带有内容类型的标头：application/x-javascript，否则它不会被解释为 JS。

Header("content-type: application/x-javascript");

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T14:49:31.837

如果您试图让 PHP 在 Javascript 文件中工作，您可以简单地将 Javascript 重命名为`javascript_file.js.php`并让 PHP 在其中工作。

将其包含到您的页面中不会有任何问题。

`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T14:53:30.813

一种可能性是您未配置为允许使用 .htaccess 文件。

你可以在你的 httpd.conf 中检查这个。

您要确保将`AllowOverride`其设置为`All`

例如

从

```
<Directory />
  Options FollowSymLinks
  AllowOverride None
  Order deny,allow
  Deny from all
  Satisfy all
</Directory> 
```

到

```
<Directory />
  Options FollowSymLinks
  AllowOverride All
  Order deny,allow
  Deny from all
  Satisfy all
</Directory> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-07T11:21:43.940

我对 .htaccess 了解不多，但我相信解决问题的部分方法是将 jQuery 移到 php 标签之外，如下所示：

```
<?php

?>
</script>
    $(document).ready();
<script> 
```

您的文件将被解析为任何其他 php 文件，因此您的 javascript 将在 javascript 标签内正常执行。

如果您想在 javascript 中包含 php 变量，请执行以下操作：

```
<?php
    $time=time();
?>

    <script>
        $( document ).ready(function(){
            $("SPAN").text("<? echo $time; ?>");
        });
    </script>
    <SPAN></SPAN> 
```

上面的代码将返回 SPAN 元素内的当前纪元时间戳

# php - PHP 已弃用的错误不会在 WordPress 仪表板上消失

> ID：10722381
> 
> 赞同：1
> 
> 时间：2012-05-23T14:46:26.830
> 
> 标签：php, wordpress, deprecated, error-reporting, simplepie

TL;DR : 在我们的服务器上升级了 PHP，导致 WordPress 中出现了一堆已弃用的错误，尝试了一些修复，但错误不会消失。

PHP 版本：5.3.10 WordPress 版本：3.3.2

我有一个 WordPress 安装已经启动并运行了一段时间，没有任何抱怨。

本周，我们将服务器上的 PHP 升级到 5.3.10，更新后，WordPress Dashboard 开始出现如下错误：

```
Deprecated: Assigning the return value of new by reference is deprecated in /home/random/public_html/wp-includes/class-simplepie.php on line 738 
```

大量（我怀疑是 116 个）这样的错误（每个都在不同的行上）出现在

*   传入链接
*   WordPress 博客
*   插件

正如 WordPress 论坛上的许多帖子所建议的那样，我在文件级别（通过将 error_reporting(0); 添加到 wp-config.php 和/或其他文件的顶部）和使用 PHP.ini 都禁用了错误报告。Phpinfo 确认 error_reporting = 0。

这没有任何效果，警告仍然显示在仪表板上。

我尝试禁用所有插件并恢复为默认主题（注意依次启用每个插件以查看其中一个是否导致问题），但错误继续出现。

接下来，我没有治疗症状，而是去看看是否可以解决问题的原因。

[使用 Simplepie 出现不推荐使用的错误](https://stackoverflow.com/questions/9141635/getting-deprecated-error-with-simplepie)

和

[不推荐通过引用分配 new 的返回值](https://stackoverflow.com/questions/1086539/assigning-the-return-value-of-new-by-reference-is-deprecated)

指出 class-simplepie.php 里面有一些过时的语法。

在我的文本编辑器中使用查找/替换我交换了所有 166 个实例

```
=& new 
```

为了

```
= new 
```

而且我仍然在仪表板上看到错误。

因此，据我所见，不应该报告任何错误，如果有，它们也不应该出现。

Wordpress 未在调试模式下运行。

可以在这里找到我的 phpinfo 的粘贴：http: [//pastebin.com/Pk68sDL1](http://pastebin.com/Pk68sDL1)，如果它对任何人有用的话。

不知道接下来要尝试什么。非常感谢任何提示。

D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T17:22:05.880

试试这个，你不会有这个错误：

```
error_reporting(0);
ini_set("display_errors", "off");
ini_set("display_startup_errors", "off"); 
```

或者在服务器的 php.ini 文件中设置相同的指令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T00:16:17.717

我今天遇到了完全相同的问题，我也尝试了您列出的所有解决方案。最终我意识到，在我更换后

```
=& new 
```

和

```
= new 
```

在 class-simplepie.php 中，我还需要重新加载仪表板中的模块。当您只是刷新浏览器页面，甚至隐藏模块然后再次显示时，这似乎不会发生。

因此，我在仪表板上突出显示了传入链接模块并单击了配置。我将 RSS 提要 URL 更改为其他任何内容（google.com），点击提交，它就起作用了。刷新了该模块，不再有来自 class-simplepie.php 的弃用错误。对 Wordpress 博客模块做了同样的事情，这也有效。

我唯一不知道的是如何刷新插件模块。它没有配置选项，我无法像其他人一样重新加载它。

编辑：插件模块现在也可以使用。只是需要时间来重置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T15:19:38.280

我也有这些警告。我偶然发现了一位 simplepie 开发人员的消息，说这发生在 PHP5.3+ 上，并且与 PHP4 的兼容性有关。使用 simplepie v1.3-dev 会降低这种向下兼容性并修复它。

从[GitHub下载](http://github.com/simplepie/simplepie)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-23T14:52:57.733

将其添加到 wp-config.php 文件的顶部，就在第一个之后

```
error_reporting(0); 
```

# iphone - touchesBegan 不适用于 UIImageView 动画

> ID：10722382
> 
> 赞同：1
> 
> 时间：2012-05-23T14:46:27.907
> 
> 标签：iphone, objective-c, uiimageview, touchesbegan

我这里有一些问题。我有一个方法叫

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
```

对于 a `UIImageView`，当图像是静态的时它工作正常，该`touchesBegan`方法被调用......但是当我制作`UIImageView`动画时，`touchesBegan`停止工作。关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T16:32:55.697

为了在动画期间接收 touchesBegan，您必须`UIViewAnimationOptionAllowUserInteraction`在创建动画时包含动画选项。[这里](http://iphonedevsdk.com/forum/iphone-sdk-development/64569-uiview-animatewithduration-blocks-the-screen-for-touch-input.html)有一个很好的讨论。

# jquery - Jquery链式选择在IE7中不起作用

> ID：10722390
> 
> 赞同：0
> 
> 时间：2012-05-23T14:47:02.047
> 
> 标签：jquery

我目前一直在玩 jquery.chained.js 并让它在 FF、IE8+、Safari、Chrome 中工作......问题是在 IE7 中，无论选择什么选项，它都会显示所有值。这是我的代码。

```
 <script type="text/javascript" charset="utf-8">  
  $(function() {

/* For jquery.chained.js */
$("#year").chained("#make");
$("#model").chained("#year");

$("#button").attr("disabled", true);
$("#model").bind("change", function(event) {
    if ("" != $("option:selected", this).val() && "" != $("option:selected", $("#model")).val()) {
      $("#button").attr("disabled", false);
    } else {
        $("#button").attr("disabled", true);          
    }
}); 
```

});

```
 <select style="width:125px" name="make" id="make">
      <option value="">Make</option>
      <option value="Ford">Ford</option>
      <option value="GM">GM</option>
      <option value="Other">Other</option>
    </select>
    <select style="width:125px" name="year" id="year">
      <option value="">Year</option>

      <option value="FordYear1" class="Ford">Ford Year Range 1</option>
      <option value="FordYear2" class="Ford">Ford Year Range 2</option>
      <option value="FordYear3" class="Ford">Ford Year Range 3</option>

      <option value="1991-1992" class="GM">1991-1992</option>
      <option value="1993+" class="GM">1993+</option>
      <option value="1993-1995" class="GM">1993-1995</option>
      <option value="1996+" class="GM">1996+</option>
      <option value="2006-2008" class="GM">2006-2008</option>
      <option value="2009+" class="GM">2009+</option>

      <option value="OtherYear1" class="Other">Other Year Range 1</option>
      <option value="OtherYear2" class="Other">Other Year Range 2</option>
      <option value="OtherYear3" class="Other">Other Year Range 3</option>

    </select>
    <select style="width:125px" name="model" id="model">
      <option value=""><i>Model</i></option>

      <option value="FordYear1Model1"       class="FordYear1">Ford Year Range 1 Model 1</option>
      <option value="FordYear1Model2"       class="FordYear1">Ford Year Range 1 Model 2</option>
      <option value="FordYear1Model3"         class="FordYear1">Ford Year Range 1 Model 3</option>

      <option value="FordYear2Model1"       class="FordYear2">Ford Year Range 2 Model 1</option>
      <option value="FordYear2Model2"       class="FordYear2">Ford Year Range 2 Model 2</option>
      <option value="FordYear2Model3"         class="FordYear2">Ford Year Range 2 Model 3</option>

      <option value="FordYear3Model1"       class="FordYear3">Ford Year Range 3 Model 1</option>
      <option value="FordYear3Model2"       class="FordYear3">Ford Year Range 3 Model 2</option>
      <option value="FordYear3Model3"         class="FordYear3">Ford Year Range 3 Model 3</option>

      <option value="4L80E or 4L85E"       class="1991-1992">4L80E or 4L85E</option>
      <option value="4L80E or 4L85E"       class="1993+">4L80E or 4L85E</option>
      <option value="4L60E or 4L65E"         class="1993-1995">4L60E or 4L65E</option>

      <option value="4L60E or 4L65E"       class="1996+">4L60E or 4L65E</option>
      <option value="4L70E"               class="2006-2008">4L70E</option>
      <option value="4L70E or 4L75E"         class="2009+">4L70E or 4L75E</option>

      <option value="OtherYear1Model1"       class="OtherYear1">Other Year Range 1 Model 1</option>
      <option value="OtherYear1Model2"       class="OtherYear1">Other Year Range 1 Model 2</option>
      <option value="OtherYear1Model3"         class="OtherYear1">Other Year Range 1 Model 3</option>

      <option value="OtherYear2Model1"       class="OtherYear2">Other Year Range 2 Model 1</option>
      <option value="OtherYear2Model2"       class="OtherYear2">Other Year Range 2 Model 2</option>
      <option value="OtherYear2Model3"         class="OtherYear2">Other Year Range 2 Model 3</option>

      <option value="OtherYear3Model1"       class="OtherYear3">Other Year Range 3 Model 1</option>
      <option value="OtherYear3Model2"       class="OtherYear3">Other Year Range 3 Model 2</option>
      <option value="OtherYear3Model3"         class="OtherYear3">Other Year Range 3 Model 3</option>   
    </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:02:56.333

尝试

`$(this).val()` 代替`$("option:selected", this).val()`

和

`$("#model")).val()`代替`$("option:selected", $("#model")).val())`

# ios - 应用程序已从图标或通知中打开

> ID：10722391
> 
> 赞同：3
> 
> 时间：2012-05-23T14:47:04.753
> 
> 标签：ios, notifications, push-notification

我的问题是这样的。

我向服务器发送请求，要求通知我将在 2 到 10 分钟内发生的事件并关闭应用程序，服务器将通过推送通知响应该请求。在服务器响应通知之前，应用程序会显示一个动画，以防它停留在前台。

当我收到通知时，当应用程序打开时，动画必须停止并显示通知中的一些数据。我的问题是，如果我不从通知打开应用程序（我从图标打开它），动画将继续显示，因为“didReceiveRemoteNotification”的回调方法永远不会被调用..

是否可以通过图标或通知（本地或推送）检查是否打开了应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T16:22:35.777

SDK帮助段落很好地解释了在不同的[`application:didFinishLaunchingWithOptions:`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/application%3adidFinishLaunchingWithOptions%3a)启动/唤醒场景中调用了哪些委托方法（例如单击注册的URL处理程序，打开支持的mime类型，回复远程/本地通知，单击主屏幕上的图标， ETC）

此外，如果您的应用程序在上述事件发生时已经在运行，`didReceiveRemoteNotification`那么`openURL`除了`applicationDidBecomeActive:`. 从调用的回调的组合中，您可以确定发生了哪个事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T16:17:18.987

您可以通过检查 launchOptions 对象来做到这一点。这应该告诉您是直接打开应用程序还是作为通知的结果。

你可以做这样的事情：

```
if(!launchOptions){
    NSLog(@"App invoked directly");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-15T12:07:37.937

您可以将此代码添加到 AppDelegate 的 applicationWillEnterForeground 方法中：

-(void)applicationWillEnterForeground:(UIApplication *)application {

```
// this method is called when staring an app that was closed / killed / never run before (after applicationDidFinishLaunchingWithOptions) and every time the app is reopened or change status from background to foreground (ex. returning from a mobile call or after the user switched to other app and then came back)

[[UNUserNotificationCenter currentNotificationCenter] getDeliveredNotificationsWithCompletionHandler:^(NSArray<UNNotification *> * _Nonnull notifications) {
    NSLog(@"AppDelegate-getDeliveredNotificationsWithCompletionHandler there were %lu notifications in notification center", (unsigned long)[notifications count]); 

    for (UNNotification* notification in notifications) {

        NSDictionary *userInfo = notification.request.content.userInfo;
        if (userInfo) {
            NSLog(@"Processed a notification in getDeliveredNotificationsWithCompletionHandler, with this info: %@", userInfo);
            [self showPushNotificationInAlertController:userInfo]; // this is my method to display the notification in an UIAlertController
        }
    }
    UIApplication.sharedApplication.applicationIconBadgeNumber = 0;

}]; 
```

} }

从方法应用程序 didFinishLaunchingWithOptions: 中删除此行，如果您已将其包含在其中，因为它会清除徽章编号以及通知中心中的所有通知：

```
UIApplication.sharedApplication.applicationIconBadgeNumber = 0; 
```

这目前在 iOS 12 中工作，没有机会在早期版本中进行测试。您还必须在此方法中实现代码以处理在应用程序处于前台时收到的通知：willPresentNotification:(UNNotification *)notification withCompletionHandler: 和此方法来处理用户通过点击通知打开您的应用程序的通知：didReceiveNotificationResponse: (UNNotificationResponse *) 使用CompletionHandler 响应：

# ruby-on-rails - rails habtm 协会实施问题

> ID：10722393
> 
> 赞同：0
> 
> 时间：2012-05-23T14:47:13.663
> 
> 标签：ruby-on-rails

我有两个模型，会议和与会者，它们共享一个 habtm 关系。我还有一个会议可以属于的用户模型（作为会议组织者）。

```
class Meeting < ActiveRecord::Base
  belongs_to :organizer, :class_name => User, :foreign_key => "organizer_id"
  has_and_belongs_to_many :attendees, :class_name => User, :association_foreign_key => "attendee_id"
end

class User < ActiveRecord::Base
  has_and_belongs_to_many :meetings, :class_name => Meeting, :association_foreign_key => "meeting_id"
end 
```

然后我有关系表..

```
create_table "attendees_meetings", :id => false, :force => true do |t|
  t.integer "attendee_id"
  t.integer "meeting_id"
end 
```

当我创建一个新会议，然后将与会者引用为 meeting.attendees 时，我收到一个错误。与组织者相同，meeting.organizer 会引发错误。我没有正确设置关系吗？

```
m = Meeting.create(:subject => "Test", :location => "Neverland", :body => "A test", :organizer_id => 8)
m.organizer
NoMethodError: undefined method `match' for #<Class:0x00000103d8cf08> 
```

与会者也是如此（尽管我目前尚未定义任何内容，但不应引发错误）

```
1.9.2-p318 :014 > m.attendees
(Object doesn't support #inspect)
=> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:59:01.547

上的`class_name`选项`has_and_belongs_to_many`应该是一个字符串，它是类的名称。您已经传递了类对象本身。所以，例如，

```
has_and_belongs_to_many :attendees, 
    :class_name => "User", 
    :association_foreign_key => "attendee_id" 
```

我认为您可能还需要在模型`:foreign_key => 'attendee_id'`中的`has_and_belongs_to_many`声明上添加 a`User`并且可以删除该`:association_foreign_key`选项，因为它是默认设置。实际上，您也可能会失去该`:class_name`选项，因为这也是默认设置。所以：

```
has_and_belongs_to_many :meetings, 
    :foreign_key => "attendee_id" 
```

# android - 如何在 Android 中通过 Seekbar 处理 EditText

> ID：10722397
> 
> 赞同：0
> 
> 时间：2012-05-23T14:47:24.177
> 
> 标签：android, seekbar

大家好，我有一个 EditText 和一个搜索栏。我想开发这样的应用程序，当我们滚动搜索栏时，EditText 中的值应该是增量或减量。所以如果有知道的请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:49:05.587

只需在 SeekBar 上设置一个侦听器并使用它来更新 EditText。

# ios - 这是什么iOS控制器？

> ID：10722402
> 
> 赞同：1
> 
> 时间：2012-05-23T14:47:48.053
> 
> 标签：ios, cocoa-touch, user-interface

谁能告诉我这是否是标准的 iOS 控制器？我经常在许多不同的应用程序中看到它。它的行为很像分段控制器，因为您可以选择一个选项，并且该选项“坚持”，直到您选择另一个。但它似乎也与开箱即用的分段控制器有点不同。是别的吗？

![在此处输入图像描述](../Images/ddc848e00f4bd1e9da97178ccc82b0ed.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:54:01.247

我用一排简单的`UIButton`实例做了一些

# jquery - 在 Rails 中创建向下钻取菜单

> ID：10722407
> 
> 赞同：0
> 
> 时间：2012-05-23T14:47:55.660
> 
> 标签：jquery, ruby-on-rails, ruby, arrays, drilldown

我有一个字符串数组，看起来类似于：

“文件夹1/filea/x1.png”、“文件夹1/fileb/x2.png”、“文件夹2/文件夹3/filec/x3.png”......

我的目标是创建一个向下钻取菜单，例如：http: [//iwantaneff.in/repo/plugins/menu-nav/drill.down/index.html](http://iwantaneff.in/repo/plugins/menu-nav/drill.down/index.html)

在 Rails 中，我尝试过使用 group_by 方法，但没有运气。基本上我需要创建一个文件夹结构，如

1.  文件夹1
    *   文件
        *   x1.png
    *   文件b
        *   x2.png
2.  文件夹2

等等.....

关于从哪里开始的任何想法？我在解决这个问题时遇到了很大的困难。我在每个数组上使用了 split 方法，所以我得到了一个数组数组，但这似乎没有得到任何地方。我想我需要使用递归来遍历子树？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T16:53:19.290

答案很简单）使用递归来解析和插入数据

解析示例 =>

```
 def parse(hash)
      hash.each do |k,v|
        files = v.select{|e| e.size == 1}
        hash[k] = {"files" => files.flatten} unless files.empty?
        dirs = v - files
        unless dirs.empty? 
          dirs = parse(dirs.group_by{|e| e.shift})
          if files.empty?
            hash[k] = dirs  
          else
            hash[k].merge! dirs
          end
        end 
      end
    end 
```

用于输入

```
h = {:root =>  ["folder1/filea/x1.png", "folder1/fileb/x2.png","folder1/fileb/folder4/111", "folder2/folder3/filec/x3.png","folder2/folder3/filec/x4.png"].map{|e| e.split("/")}}

parse(h) 
```

输出将是

```
{:root=>{"folder1"=>{"filea"=>{"files"=>["x1.png"]}, "fileb"=>{"files"=>["x2.png"], "folder4"=>{"files"=>["111"]}}}, "folder2"=>{"folder3"=>{"filec"=>{"files"=>["x3.png", "x4.png"]}}}}} 
```

# ruby-on-rails - 在 Rails 3.2.3 上预编译资产，rake 中止

> ID：10722408
> 
> 赞同：0
> 
> 时间：2012-05-23T14:47:56.657
> 
> 标签：ruby-on-rails

我有一个 Rails 3.2.3 应用程序，在我的本地机器上运行良好。

问题是，当我推送到 Heroku 时，我的 rake 中止了！预编译资产时的消息。在本地机器上，我得到了。

```
** Invoke assets:precompile (first_time)
** Execute assets:precompile
/Users/victory/.rvm/rubies/ruby-1.9.3-p125/bin/ruby /Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets --trace
** Invoke assets:precompile:all (first_time)
** Execute assets:precompile:all
** Invoke assets:precompile:primary (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:primary
rake aborted!
File to import not found or unreadable: custom.
Load path: /Users/victory/Documents/chinchin
  (in /Users/victory/Documents/chinchin/app/assets/stylesheets/application.css)
(sass):1
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sass-3.1.18/lib/sass/tree/import_node.rb:64:in `rescue in import'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sass-3.1.18/lib/sass/tree/import_node.rb:42:in `import'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sass-3.1.18/lib/sass/tree/import_node.rb:25:in `imported_file'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sass-3.1.18/lib/sass/tree/visitors/perform.rb:149:in `rescue in visit_import'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sass-3.1.18/lib/sass/tree/visitors/perform.rb:154:in `visit_import'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sass-3.1.18/lib/sass/tree/visitors/base.rb:37:in `visit'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sass-3.1.18/lib/sass/tree/visitors/perform.rb:18:in `visit'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sass-3.1.18/lib/sass/tree/visitors/base.rb:53:in `block in visit_children'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sass-3.1.18/lib/sass/tree/visitors/base.rb:53:in `map'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sass-3.1.18/lib/sass/tree/visitors/base.rb:53:in `visit_children'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sass-3.1.18/lib/sass/tree/visitors/perform.rb:27:in `block in visit_children'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sass-3.1.18/lib/sass/tree/visitors/perform.rb:39:in `with_environment'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sass-3.1.18/lib/sass/tree/visitors/perform.rb:26:in `visit_children'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sass-3.1.18/lib/sass/tree/visitors/base.rb:37:in `block in visit'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sass-3.1.18/lib/sass/tree/visitors/perform.rb:47:in `visit_root'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sass-3.1.18/lib/sass/tree/visitors/base.rb:37:in `visit'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sass-3.1.18/lib/sass/tree/visitors/perform.rb:18:in `visit'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sass-3.1.18/lib/sass/tree/visitors/perform.rb:7:in `visit'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sass-3.1.18/lib/sass/tree/root_node.rb:20:in `render'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sass-3.1.18/lib/sass/engine.rb:299:in `_render'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sass-3.1.18/lib/sass/engine.rb:246:in `render'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sass-rails-3.2.5/lib/sass/rails/compressor.rb:8:in `compress'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/actionpack-3.2.3/lib/sprockets/compressors.rb:74:in `compress'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sprockets-2.1.3/lib/sprockets/processing.rb:243:in `block in css_compressor='
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sprockets-2.1.3/lib/sprockets/processor.rb:29:in `call'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sprockets-2.1.3/lib/sprockets/processor.rb:29:in `evaluate'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/tilt-1.3.3/lib/tilt/template.rb:76:in `render'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sprockets-2.1.3/lib/sprockets/context.rb:177:in `block in evaluate'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sprockets-2.1.3/lib/sprockets/context.rb:174:in `each'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sprockets-2.1.3/lib/sprockets/context.rb:174:in `evaluate'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sprockets-2.1.3/lib/sprockets/bundled_asset.rb:26:in `initialize'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sprockets-2.1.3/lib/sprockets/base.rb:244:in `new'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sprockets-2.1.3/lib/sprockets/base.rb:244:in `build_asset'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sprockets-2.1.3/lib/sprockets/index.rb:89:in `block in build_asset'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sprockets-2.1.3/lib/sprockets/caching.rb:19:in `cache_asset'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sprockets-2.1.3/lib/sprockets/index.rb:88:in `build_asset'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sprockets-2.1.3/lib/sprockets/base.rb:163:in `find_asset'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sprockets-2.1.3/lib/sprockets/index.rb:56:in `find_asset'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/actionpack-3.2.3/lib/sprockets/static_compiler.rb:20:in `block in compile'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sprockets-2.1.3/lib/sprockets/base.rb:212:in `block in each_logical_path'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sprockets-2.1.3/lib/sprockets/base.rb:200:in `block (2 levels) in each_file'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sprockets-2.1.3/lib/sprockets/base.rb:190:in `each'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sprockets-2.1.3/lib/sprockets/base.rb:190:in `each_entry'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sprockets-2.1.3/lib/sprockets/base.rb:198:in `block in each_file'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sprockets-2.1.3/lib/sprockets/base.rb:197:in `each'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sprockets-2.1.3/lib/sprockets/base.rb:197:in `each_file'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sprockets-2.1.3/lib/sprockets/base.rb:210:in `each_logical_path'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/actionpack-3.2.3/lib/sprockets/static_compiler.rb:18:in `compile'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/actionpack-3.2.3/lib/sprockets/assets.rake:56:in `internal_precompile'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/actionpack-3.2.3/lib/sprockets/assets.rake:70:in `block (3 levels) in <top (required)>'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/Users/victory/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/actionpack-3.2.3/lib/sprockets/assets.rake:60:in `block (3 levels) in <top (required)>'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/Users/victory/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/bin/rake:19:in `load'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/bin/rake:19:in `<main>'
Tasks: TOP => assets:precompile:primary
rake aborted!
Command failed with status (1): [/Users/victory/.rvm/rubies/ruby-1.9.3-p125...]
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/file_utils.rb:53:in `block in create_shell_runner'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/file_utils.rb:45:in `call'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/file_utils.rb:45:in `sh'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:39:in `sh'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/file_utils.rb:80:in `ruby'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:39:in `ruby'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/actionpack-3.2.3/lib/sprockets/assets.rake:12:in `ruby_rake_task'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/actionpack-3.2.3/lib/sprockets/assets.rake:21:in `invoke_or_reboot_rake_task'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/actionpack-3.2.3/lib/sprockets/assets.rake:29:in `block (2 levels) in <top (required)>'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/Users/victory/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/bin/rake:19:in `load'
/Users/victory/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/bin/rake:19:in `<main>'
Tasks: TOP => assets:precompile 
```

在我的 application.css 中，我有

```
@import "custom";
@import "user";
@import "static_pages"; 
```

我在自定义中包含我的所有 css，但 user 和 static_pages 仍然留空。即使我取出第一行，用户或静态页面也会发生错误。

有谁知道如何解决这个问题？在本地主机上一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:15:41.410

确保那些其他 CSS 文件已提交到 git。

# c - C中的快速字符串比较

> ID：10722410
> 
> 赞同：11
> 
> 时间：2012-05-23T14:48:02.717
> 
> 标签：c, string, compare

我目前有这种循环

```
while(1)
{
    generate_string(&buffer);

    for(int i = 0; i < filelines; i++)
    {
        if(strcmp(buffer,line[i]) == 0)
        {
           /*  do something  */
        }
    }
} 
```

我有一个包含几百万个字符串的文件（希望很快会减半），所有这些字符串的数量都存储在**文件行中**

line[i] 基本上是存储字符串本身的位置。

目前，由于这百万个字符串的比较，函数**generate_string(&buffer);** 每秒执行大约 42 次。有没有更快的方法在 C 中进行字符串比较？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-23T14:57:22.013

`strcmp`通常由所有供应商优化。但是，如果您对此不满意，可以尝试：

*   查找[突发尝试](http://ww2.cs.mu.oz.au/~jz/fulltext/acmtois02.pdf)
*   使用后缀树进行快速字符串比较——参见[这篇](http://facweb.cs.depaul.edu/mobasher/classes/csc575/Suffix_Trees/index.html)文章
*   根据应用程序中字符串的大小，您可以编写自定义字符串比较器。例如：GNU`libc`曾经对小字符串进行过这种优化，他们将小于 5 个字节的字符串作为整数进行测试。MS`cl`还对小字符串进行了一些优化（请查一下）。

但更重要的是确保`strcmp`是你***真正的***瓶颈。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-23T16:13:08.537

我可以向你保证，**这个功能`strcmp`绝对不是瓶颈**。通常，strcmp 进行了很好的优化，可以根据架构对超过 4/8 字节的字符串进行 32 位或 64 位比较。newlib 和 GNU libc 都这样做。但是，即使您要查看两个字符串中的每个字节 20 次，也没有这里选择的算法和数据结构那么重要。

**真正的瓶颈是 O(N) 搜索算法**。文件中的单个 O(N log N) 传递可用于在适当的数据结构（无论是普通的 BST、trie 还是简单的排序数组）上进行 O(log N) 查找。

忍受我在这里 - 很多数学如下。但我认为这是一个很好的机会来说明为什么算法和数据结构的选择有时比字符串比较的方法更重要。史蒂夫谈到了这一点，但我想更深入地解释一下。

在 N=1e6 时，log(1e6, 2) = 19.9，因此对理想数据结构进行最多 20 次比较。

目前，您正在对 O(N) 或 1e6 操作进行最坏情况搜索。

所以假设你只是用 O(log N) 插入时间构建一个红黑树，然后你插入 N 个项目，构建树的时间是 O(N log N)。所以这是构建树所需的 1e6 x 20 或 20e6 操作。

在您当前的方法中，构建数据结构是 O(N) 或 1e6 次操作，但最坏情况下的搜索时间也是 O(N)。因此，当您读取文件并仅执行 20 次搜索操作时，理论上最坏的情况是 21,000,000 次操作。相比之下，红黑树和 20 次搜索的最坏情况是 20,000,400 次操作，或 999,600 次操作比在未排序数组上的 O(N) 搜索要好。因此，在 20 次搜索时，您就处于更复杂的数据结构真正获得回报的第一个点。但看看 1000 次搜索会发生什么：

未排序数组 = 初始化 + 1000 x 搜索时间 = O(N) + 1000 * O(N) = 1,000,000 + 2,000,000,000 = 2,001,000,000 次操作。

红黑 = 初始化 + 1000 x 搜索时间 = O(N log N) + 1000 * O(log N) = 20,000,000 + 20,000 = 20,020,000 次操作。

2,001,000,000 / 20,020,000 ~= 100 倍于 O(N) 搜索的操作。

在 1e6 次搜索中，即 (1e6 + 1e6 * 1e6) / (20e6 + 1e6 * 20 ) = 25,000 倍的操作。

假设您的计算机可以在 1 分钟内处理进行 log N 搜索所需的 40e6 次“操作”。使用您当前的算法完成相同的工作需要 25,000 分钟或 17 天。或者另一种看待方式是，O(N) 搜索算法只能处理 39 次搜索，而 O(log N) 算法可以执行 1,000,000 次。你做的搜索越多，它就越难看。

有关数据结构和算法的几种更好选择，请参阅 Steve 和 dirkgently 的回复。我唯一需要注意的是，`qsort()`史蒂夫建议的最坏情况复杂度*可能*为 O(N*N)，这比使用堆排序或各种树状结构得到的 O(N log N) 还要糟糕得多结构。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-31T13:06:06.623

[C语言计算机程序的优化](http://leto.net/docs/C-optimization.php)

> 在进行调用之前，您可以通过检查相关字符串的第一个字符来节省一点时间。显然，如果第一个字符不同，则没有理由调用 strcmp 来检查其余字符。由于自然语言中字母的分布不均匀，因此收益不是 26:1，而更像是大写数据的 15:1。

```
#define QUICKIE_STRCMP(a, b)  (*(a) != *(b) ? \  
  (int) ((unsigned char) *(a) - \
         (unsigned char) *(b)) : \
  strcmp((a), (b))) 
```

如果您使用的单词字典定义明确（意味着您不介意返回值形式 strcmp 但 0==equal），例如，一组以相同前缀开头的命令行参数，例如：tcp-accept , tcp-reject 比你可以重写宏并做一些指针运算来比较不是第一个而是第 N 个字符，在这种情况下是第 4 个字符，例如：

```
 #define QUICKIE_STRCMP(a, b, offset) \
            (*(a+offset) != *(b+offset))\ ? -1 : strcmp((a), (b))) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-23T14:57:25.163

如果我正确地回答了您的问题，您需要检查一个字符串是否符合目前所读取的所有行。我建议从文件行中使用 TRIE 甚至更好的[Patricia 树。](http://en.wikipedia.org/wiki/Patricia_tree)这种方式而不是遍历所有行，您可以线性检查您的字符串是否存在（并且需要更多的努力 - 在哪里）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-23T15:04:25.687

你已经在编译优化了，对吧？

如果你有一个 Trie 或哈希表数据结构，可以随时使用，那么你应该这样做。

如果做不到这一点，一个可能会加快速度的相当简单的更改是`line`在开始生成要搜索的字符串之前对数组进行一次排序。然后`buffer`在排序后的数组中进行二分查找。这很容易，因为您需要的两个功能是标准的 -`qsort`和`bsearch`.

对已排序数组的二进制搜索只需要对 log [2]（文件行）字符串进行比较，而不是关于文件行。因此，在您的情况下，每次调用要进行 20 次字符串比较，`generate_string`而不是几百万。根据您提供的数据，我认为您可以合理地预期它会快 20-25 倍，尽管我不保证。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-12-15T17:03:28.643

我对使用`strcmp()`和宏进行了基准测试，以逐字节进行比较。与`strcmp()`. 通常对于字符串比较，使用字节比较器宏要快得多，而不是`strcmp()`. 前任：

```
#define str3_cmp(m, c0, c1, c2, c3) m[0] == c0 && m[1] == c1 && m[2] == c2 && m[3] == c3 
```

与 相比，这“非常”快`strcmp()`。但是把这些写下来是一件很痛苦的事情，而且你需要逐个字符地拆分字符串，所以我编写了一个方便的 PHP 脚本来为你生成它作为头文件。

您可以在热循环中使用此字符串比较，您可以确切地知道`char*`要比较的大小。

```
#!/usr/bin/php
<?php
function generate_macro($num) : string {
        $returner = "#define str".$num."cmp_macro(ptr, ";
        for($x = 0; $x < $num; $x++){
                $returner .= "c".$x;
                if($x != $num-1){ $returner .= ", "; }
        }
        $returner .= ") ";
        for($x = 0; $x < $num; $x++){
                $returner .= "*(ptr+".$x.") == c".$x;
                if($x != $num-1){ $returner .= " && "; }
        }
        return $returner;
}
function generate_static_inline_fn(&$generated_macro, $num) : string {
        $generated_macro .= "static inline bool str".$num."cmp(const char* ptr, const char* cmp)".
                                "{\n\t\treturn str".$num."cmp_macro(ptr, ";
        for($x = 0; $x < $num; $x++){
                $generated_macro .= " *(cmp+".$x.")";
                if($x != $num-1){ $generated_macro .= ", "; }
        }
        $generated_macro .= ");\n}\n";
        return $generated_macro;
}

function handle_generation($argc, $argv) : void {
        $out_filename = $argv[$argc-1];
        $gen_macro = "";
        for($x = 0; $x < $argc-2; $x++){
                $macro = generate_macro($argv[$x+1])."\n";
                $gen_macro .= generate_static_inline_fn($macro, $argv[$x+1]);
        }
        file_put_contents($out_filename, $gen_macro);
}
handle_generation($argc, $argv);
?> 
```

这个脚本有两个参数。

1.  你的大小`char*`会比较。
2.  输出头文件名。

示例：`$ ./gen_faststrcmp.php 3 5 fast_strcmp.h` 这将生成`fast_strcmp.h`内容

```
#define str3cmp_macro(ptr, c0, c1, c2) *(ptr+0) == c0 && *(ptr+1) == c1 && *(ptr+2) == c2
static inline bool str3cmp(const char* ptr, const char* cmp){
                return str3cmp_macro(ptr,  *(cmp+0),  *(cmp+1),  *(cmp+2));
}
#define str5cmp_macro(ptr, c0, c1, c2, c3, c4) *(ptr+0) == c0 && *(ptr+1) == c1 && *(ptr+2) == c2 && *(ptr+3) == c3 && *(ptr+4) == c4
static inline bool str5cmp(const char* ptr, const char* cmp){
                return str5cmp_macro(ptr,  *(cmp+0),  *(cmp+1),  *(cmp+2),  *(cmp+3),  *(cmp+4));
} 
```

在您的代码中，您可以像这样使用该函数，

```
const char* compare_me = "Hello";
if(str5cmp(compare_me, "Hello")) { /* code goes here */ } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-23T14:51:10.963

我不知道有比调用`strcmp`字符串比较更快的方法，但你也许*可以避免*调用`strcmp`这么多。使用哈希表存储您的字符串，然后您可以检查字符串是否`buffer`在哈希表中。如果在您“做某事”时命中的索引很重要，则该表可以将字符串映射到索引。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-23T14:55:26.163

你可以尝试一些“便宜”的东西，比如基于第一个字符的筛选。如果第一个字符不匹配，则字符串不能相等。如果它们匹配，则调用 strcmp 来比较整个字符串。如果适合您的情况，您可能希望考虑更好的算法；例如，使用哈希表或类似的字符串表技术对文件/行进行排序并进行二进制搜索。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-23T14:56:13.073

在这种情况下，您可能可以通过二进制比较来解决问题，因为您的程序实际上并没有*排序*，而是比较是否相等。

您还可以通过提前确定长度来提高比较速度（当然前提是它们变化足够大）。当这里的长度不匹配时，`do something`不会发生。

当然，这里的散列将是另一个考虑因素，具体取决于您读取散列值的次数。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-11-02T20:53:42.183

这取决于字符串的长度。

如果不是太长，可以尝试逐字节比较：

```
str[0] == str2[0] && str[1] == str2[1] && str[2] == str2[2] 
```

否则，使用`memcmp()`，它比较内存块。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-12-05T21:14:41.703

用于`strcmp`常规字符串。但是如果字符串真的很长，你可以使用`memcmp`. 它将比较内存块。

# couchdb - CouchDB 返回“不评估函数”

> ID：10722412
> 
> 赞同：4
> 
> 时间：2012-05-23T14:48:03.913
> 
> 标签：couchdb

我得到了这个代码

```
 {
    "_id": "_design/test",
    "_rev": "10-651aa6314effdad0bca00fc4a3da38f6",
    "views": {
       "foo": {
           "map": "(function(doc){ emit(doc._id, doc._rev)})"
       },
       "bar": {
           "map": "(function(doc){if(doc.date && doc.title) {emit(doc.date, doc.title);})"
       }
      }
    } 
```

为什么它返回：

> 表达式不评估函数。((new String("(function(doc){if(doc.date && doc.title) {emit(doc.date, doc.title);})")))

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-24T21:52:55.753

我知道这个问题很老，答案实际上在问题的评论中，但似乎应该有一个已发布的答案。

缺少函数的最后一个花括号。缩进后，如下所示：

```
function(doc) {
  if (doc.date && doc.title) {
    emit(doc.date, doc.title);
  }
} 
```

请注意单行版本中末尾的两个大括号：

```
function(doc){if(doc.date && doc.title){emit(doc.date, doc.title);}} 
```

我更喜欢缩进和使用空格，所以我不会错过这些东西。

# python - 尽管已导入，但未定义类

> ID：10722415
> 
> 赞同：35
> 
> 时间：2012-05-23T14:48:15.057
> 
> 标签：python, class, module

我似乎遇到了一个非常令人困惑的错误。尽管导入了包含我的类的 .py 文件，Python 坚持认为该类实际上并不存在。

testmodule.py 中的类定义：

```
class Greeter:
    def __init__(self, arg1=None):
        self.text = arg1

    def say_hi(self):
        return self.text 
```

主要.py：

```
#!/usr/bin/python
import testmodule

sayinghi = Greeter("hello world!")
print(sayinghi.say_hi()) 
```

我有一个理论，即导入没有按应有的方式工作。我该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-23T14:48:49.577

使用完全限定名称：

```
sayinghi = testmodule.Greeter("hello world!") 
```

有一种替代形式`import`可以带入`Greeter`您的命名空间：

```
from testmodule import Greeter 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-05-23T14:52:05.170

```
import testmodule
# change to
from testmodule import Greeter 
```

或者

```
import testmodule
sayinghi = Greeter("hello world!")
# change to
import testmodule
sayinghi = testmodule.Greeter("hello world!") 
```

您导入了模块/包，但您需要引用其中的类。

你也可以这样做

```
from testmodule import * 
```

但要小心[命名空间污染](http://bytebaker.com/2008/07/30/python-namespaces/)

# jsf - JSF 和主干/underscore.js - 双引号转义

> ID：10722416
> 
> 赞同：1
> 
> 时间：2012-05-23T14:48:18.483
> 
> 标签：jsf, backbone.js, facelets, underscore.js

我在带有 Facelets 的 JSF 应用程序中使用了主干.js 和 underscore.js 模板。

我遇到的问题是模板表达式中的双引号，例如

```
<script type="text/template">
  {{ if (x == "foo") }} 
  ....
</script> 
```

正在逃跑`&quot;foo&quot;`。

避免这种情况的最佳方法是什么？

如果我把`<![CDATA[`第一件事放在我的`<script>`标签中，那么我也会`CDATA`在模板输出中看到 。

如果我尝试将模板放在外部 .js 文件中，那么 Eclipse 会抱怨很多，因为模板不是 Javascript 代码。

我在想也许将模板放在另一个文件中，扩展名不同于.js？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:36:08.730

尝试将您的 Javascript 代码包装在`f:verbatim`：

```
<f:verbatim>
 <script type="text/template">
  {{ if (x == "foo") }} 
  ....
 </script> 
</f:verbatim> 
```

# drupal - Drupal 7 和社交提及 API

> ID：10722419
> 
> 赞同：0
> 
> 时间：2012-05-23T14:48:35.330
> 
> 标签：drupal, rest, drupal-7

我正在尝试使用此处描述的示例 Social Mention RESTful API [http://code.google.com/p/socialmention-api/wiki/APIDocumentation](http://code.google.com/p/socialmention-api/wiki/APIDocumentation)

只需在我的 Drupal 7 模块中使用以下行：

```
$response = drupal_http_request('http://socialmention.com/search?q=iphone+apps&f=json&t=microblogs&lang=fr'); 
```

然后请求超时。我尝试了多种选择，但似乎无法从此 API 获得响应。非常感谢任何指针。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:13:34.370

刚刚结束使用 file_get_contents() 并且它有效。仍然不确定为什么 drupal_http_request() 失败了。

# java - 如果我将扩展活动更改为 OrmLiteBaseActivity 我得到一个 java.lang.NoClassDefFoundError

> ID：10722421
> 
> 赞同：1
> 
> 时间：2012-05-23T14:48:38.203
> 
> 标签：java, android, android-activity, noclassdeffounderror, ormlite

我开始为 android 开发并使用“ormlite”ORM-mapper (SQLite)。Mapper 有一个 OrmLiteBaseActivity 类，它从 Activity 扩展而来。如果我将“MainActivity 扩展 Activity”更改为“MainActivity 扩展 OrmLiteBaseActivity”，则代码编译没有错误。在第一次访问（MainActivity.class.getSimpleName()）这个类时，我得到一个 java.lang.NoClassDefFoundError。

我不明白有什么问题。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T18:24:02.860

我不是 100% 确定问题出在哪里，但我怀疑您的[ORMLite](http://ormlite.com/) jar*不在*`libs`您的 Android 项目下的子目录中。这在最近版本的 Google Eclipse 插件中有所改变。

看到这个问题：[Getting a java.lang.NoClassDefFoundError for each jar file](https://stackoverflow.com/questions/10669771/getting-a-java-lang-noclassdeffounderror-for-every-jar-file)

# jquery - JQuery Resizable 演示站点

> ID：10722422
> 
> 赞同：0
> 
> 时间：2012-05-23T14:48:41.860
> 
> 标签：jquery, html

我是 JQuery 的新手，我正在尝试在我的代码中实现可调整大小的 JQueryUI。[但是使用演示站点](http://jqueryui.com/demos/resizable/#default)中给出的示例来实现对我来说并不容易。

有人可以提供一些其他示例网站吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:14:01.927

你需要做的是有以下...

```
<script src="http://www.google.com/jsapi"></script>
<script>google.load("jquery",'1.7.1');</script>
<script>google.load("jqueryui", "1");</script>
<link type="text/css" rel="Stylesheet" href="http://ajax.microsoft.com/ajax/jquery.ui/1.8.5/themes/redmond/jquery-ui.css" />​ 
```

1.  谷歌脚本只是准备谷歌的cdn
2.  google.load()// 它加载 jquery 和 jquery ui（仅限 JavaScript）
3.  你需要jqui css

[http://jsfiddle.net/cKsj3/](http://jsfiddle.net/cKsj3/)

解释：

以上是托管在谷歌或微软上的CDN，所以我不必展示给你看。但是在 jquery UI 上你需要在那里下载一个主题。

并拿起以下文件

```
jquery core js
jquery ui js
jquery ui css
jquery images provided... 
```

所以你把它们放在你的主机上，例如public_html。

然后你像上面一样链接它们，但在适用的情况下更改 src 和 href。

# c# - DataAnnotations "NotRequired" 属性

> ID：10722428
> 
> 赞同：12
> 
> 时间：2012-05-23T14:49:05.597
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, data-annotations, validationattribute

我有一个复杂的模型。

我有 my `UserViewModel`which 有几个属性，其中两个是`HomePhone`and `WorkPhone`。两种类型`PhoneViewModel`。在`PhoneViewModel`我有`CountryCode`,`AreaCode`和`Number`所有的字符串。我想将其设为`CountryCode`可选但`AreaCode`强制`Number`。

这很好用。我的问题是 in`UserViewModel` `WorkPhone`是强制性的，而`HomePhone`不是。

无论如何我可以通过在`Require`属性中`PhoneViewModel`设置任何属性来禁用属性`HomeWork`吗？

我试过这个：

```
[ValidateInput(false)] 
```

但它仅适用于类和方法。

代码：

```
public class UserViewModel
{
    [Required]
    public string Name { get; set; }

    public PhoneViewModel HomePhone { get; set; }

    [Required]    
    public PhoneViewModel WorkPhone { get; set; }
}

public class PhoneViewModel
{
    public string CountryCode { get; set; }

    public string AreaCode { get; set; }

    [Required]
    public string Number { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T17:28:01.473

*[于 2012 年 5 月 24 日更新，使想法更清晰]*

我不确定这是正确的方法，但我认为您可以扩展概念并创建更通用/可重用的方法。

在 ASP.NET MVC 中，验证发生在绑定阶段。当您将表单发布到服务器时，`DefaultModelBinder`它会根据请求信息创建模型实例并将验证错误添加到`ModelStateDictionary`.

在您的情况下，只要绑定发生，`HomePhone`验证就会启动，*我认为*我们无法通过创建*自定义验证属性或类似类型*来做很多事情。

我所想的只是`HomePhone`当表单中没有可用值**（区域代码、国家代码和数字或空）**时，根本不为属性创建模型实例，当我们控制绑定时，我们控制验证，为此，我们有创建*自定义模型绑定器*。

在*自定义模型绑定器*中，我们正在检查属性是否存在`HomePhone`以及表单是否包含其属性的任何值，如果不是，我们不绑定该属性并且不会对`HomePhone`. 简单地说， 的值`HomePhone`将在`UserViewModel`.

```
 public class CustomModelBinder : DefaultModelBinder
  {
      protected override void BindProperty(ControllerContext controllerContext, ModelBindingContext bindingContext, PropertyDescriptor propertyDescriptor)
      {
        if (propertyDescriptor.Name == "HomePhone")
        {
          var form = controllerContext.HttpContext.Request.Form;

          var countryCode = form["HomePhone.CountryCode"];
          var areaCode = form["HomePhone.AreaCode"];
          var number = form["HomePhone.Number"];

          if (string.IsNullOrEmpty(countryCode) && string.IsNullOrEmpty(areaCode) && string.IsNullOrEmpty(number))
            return;
        }

        base.BindProperty(controllerContext, bindingContext, propertyDescriptor);
      }
  } 
```

最后，您必须在 global.asax.cs 中注册自定义模型绑定器。

```
 ModelBinders.Binders.Add(typeof(UserViewModel), new CustomModelBinder()); 
```

所以现在你们有一个以 UserViewModel 作为参数的动作，

```
 [HttpPost]
 public Action Post(UserViewModel userViewModel)
 {

 } 
```

我们的自定义模型绑定器开始发挥作用，并且表单不会为**areacode、countrycode 和 number**发布任何值，`HomePhone`不会出现任何验证错误并且`userViewModel.HomePhone`为 null。如果表单至少发布了这些属性的任何一个值，那么验证将按`HomePhone`预期进行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-20T12:43:30.590

我一直在使用这个惊人的 nuget 来做动态注释：[ExpressiveAnnotations](https://github.com/jwaliszko/ExpressiveAnnotations)

它使您可以做以前不可能的事情，例如

```
[AssertThat("ReturnDate >= Today()")]
public DateTime? ReturnDate { get; set; } 
```

甚至

```
public bool GoAbroad { get; set; }
[RequiredIf("GoAbroad == true")]
public string PassportNumber { get; set; } 
```

### 更新：在单元测试中编译注释以确保不存在错误

正如@diego 所提到的，在字符串中编写代码可能会令人生畏，但以下是我用来对所有验证进行单元测试以查找编译错误的方法。

```
namespace UnitTest
{
    public static class ExpressiveAnnotationTestHelpers
    {
        public static IEnumerable<ExpressiveAttribute> CompileExpressiveAttributes(this Type type)
        {
            var properties = type.GetProperties()
                .Where(p => Attribute.IsDefined(p, typeof(ExpressiveAttribute)));
            var attributes = new List<ExpressiveAttribute>();
            foreach (var prop in properties)
            {
                var attribs = prop.GetCustomAttributes<ExpressiveAttribute>().ToList();
                attribs.ForEach(x => x.Compile(prop.DeclaringType));
                attributes.AddRange(attribs);
            }
            return attributes;
        }
    }
    [TestClass]
    public class ExpressiveAnnotationTests
    {
        [TestMethod]
        public void CompileAnnotationsTest()
        {
            // ... or for all assemblies within current domain:
            var compiled = Assembly.Load("NamespaceOfEntitiesWithExpressiveAnnotations").GetTypes()
                .SelectMany(t => t.CompileExpressiveAttributes()).ToList();

            Console.WriteLine($"Total entities using Expressive Annotations: {compiled.Count}");

            foreach (var compileItem in compiled)
            {
                Console.WriteLine($"Expression: {compileItem.Expression}");
            }

            Assert.IsTrue(compiled.Count > 0);
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T09:17:52.763

我不会使用modelBinder；我会使用自定义的 ValidationAttribute：

```
public class UserViewModel
{
    [Required]
    public string Name { get; set; }

    public HomePhoneViewModel HomePhone { get; set; }

    public WorkPhoneViewModel WorkPhone { get; set; }
}

public class HomePhoneViewModel : PhoneViewModel 
{
}

public class WorkPhoneViewModel : PhoneViewModel 
{
}

public class PhoneViewModel 
{
    public string CountryCode { get; set; }

    public string AreaCode { get; set; }

    [CustomRequiredPhone]
    public string Number { get; set; }
} 
```

进而：

```
[AttributeUsage(AttributeTargets.Property]
public class CustomRequiredPhone : ValidationAttribute
{
    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        ValidationResult validationResult = null;

        // Check if Model is WorkphoneViewModel, if so, activate validation
        if (validationContext.ObjectInstance.GetType() == typeof(WorkPhoneViewModel)
         && string.IsNullOrWhiteSpace((string)value) == true)
        {
            this.ErrorMessage = "Phone is required";
            validationResult = new ValidationResult(this.ErrorMessage);
        }
        else
        {
            validationResult = ValidationResult.Success;
        }

        return validationResult;
    }
} 
```

如果不清楚，我会提供一个解释，但我认为这是不言自明的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-26T20:13:31.797

只是一些观察：如果绑定不仅仅是简单的归档，则以下代码会出现问题。我有一个案例，对象中有嵌套对象，它会跳过它并导致一些文件没有绑定到嵌套对象中。

可能的解决方案是

```
protected override void BindProperty(ControllerContext controllerContext, ModelBindingContext bindingContext, PropertyDescriptor propertyDescriptor)
     {
         if (!propertyDescriptor.Attributes.OfType<RequiredAttribute>().Any())
         {
             var form = controllerContext.HttpContext.Request.Form;

             if (form.AllKeys.Where(k => k.StartsWith(string.Format(propertyDescriptor.Name, "."))).Count() > 0)
             {
                 if (form.AllKeys.Where(k => k.StartsWith(string.Format(propertyDescriptor.Name, "."))).All(
                         k => string.IsNullOrWhiteSpace(form[k])))
                     return;
             }
         }

         base.BindProperty(controllerContext, bindingContext, propertyDescriptor);
     } 
```

非常感谢[Altaf Khatri](http://www.altafkhatri.com)

# html - 使用 jQuery Ajax 配置 HTML5 进度条

> ID：10722433
> 
> 赞同：1
> 
> 时间：2012-05-23T14:49:22.563
> 
> 标签：html, jquery, html5-canvas

我正在使用以下代码发出 ajax 请求。但是如何在接收响应时配置**value**属性。

```
$.ajax({
        url:url,
        cache:false,
        type:'POST',
        dataType:"json",
        data:'json',
        beforeSend:function(x){
            $('#main').html("<progress id='bar' value='0' max='100'></progress>").show();
        },
        success:function(json){
            $('#bar').val(100);
            parseResponse(json);
        },
        complete:function(){

            $('#bar').hide();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:52:05.097

```
// ...
beforeSend:function(x){
        $('#main').html("<progress id='bar' value='0' max='100'></progress").show();
        // the attribute name is value, not val ↑ 
},
success: function(json){
    $('#bar').val(100);
    alert(json);
    parseResponse(json);
},
// ... 
```

请参阅[`<progress>`@MDN](https://developer.mozilla.org/en/HTML/Element/progress)和[jQuery `.val()`API 文档](http://api.jquery.com/val/#val2)。

[http://jsfiddle.net/mattball/xTSHL/](http://jsfiddle.net/mattball/xTSHL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T15:44:59.120

试试怎么样：`$('#bar').attr('value', '100');`

如果这不起作用，那么它可能与您的`progress`元素是动态创建的事实有关。

# android - 用于显示对话框的 AsyncTask

> ID：10722434
> 
> 赞同：2
> 
> 时间：2012-05-23T14:49:23.013
> 
> 标签：android

执行任务时如何使用 AsyncTask 类显示对话框？？？

```
class TestAsynTask extends AsyncTask<Void, Void, Void> {

    @Override
    protected void onPreExecute() {
        ProgressDialog.show(???, null, null);
        super.onPreExecute();
    }
    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub
        return null;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T15:02:40.693

假设它`TestAsyncTask`是 an 的内部类`Activity`，那么您可以使用活动名称`.this`来获取上下文。如果 TestAsyncTask 不是内部类，那么您将需要将您的实例传递`Activity`给构造函数，以便您可以将其作为`Context`方法提供[`ProgressDialog.show()`](http://developer.android.com/reference/android/app/ProgressDialog.html#show%28android.content.Context,%20java.lang.CharSequence,%20java.lang.CharSequence%29)。

这是内部类方法的示例：

```
class MyActivity extends Activity {
    //Activity Lifecycle methods

    class TestAsynTask extends AsyncTask<Void, Void, Void> {
        ProgressDialog dialog;

        @Override
        protected void onPreExecute() {
            dialog = ProgressDialog.show(MyActivity.this, "title", "message");
            super.onPreExecute();
        }

        @Override
        protected Void doInBackground(Void... params) {
            //very long computation...
            return null;
        }

        @Override
        protected void onPostExecute(Void void) {
           dialog.cancel();
        }
    }
} 
```

您会注意到您应该将 保存`ProgressDialog`到方法中的实例变量并在`onPreExecute()`方法中调用`cancel()`它`onPostExecute()`。

另一种方法看起来相似：

```
class MyActivity extends Activity {
    //Activity Lifecycle methods

}

class TestAsynTask extends AsyncTask<Void, Void, Void> {
    ProgressDialog dialog;
    MyActivity activity;        

    TaskAsynTask(MyActivity activity) {
        this.activity = activity;
    }

    @Override
    protected void onPreExecute() {
        dialog = ProgressDialog.show(activity, "title", "message");
        super.onPreExecute();
    }

    @Override
    protected Void doInBackground(Void... params) {
        //very long computation...
        return null;
    }

    @Override
    protected void onPostExecute(Void void) {
        dialog.cancel();
    }
} 
```

# data-structures - 用于维护大量别名以便快速查找的数据结构

> ID：10722437
> 
> 赞同：1
> 
> 时间：2012-05-23T14:49:32.093
> 
> 标签：data-structures

我有一个列表（>50,000 字）。列表中的每个单词都有一组关联的别名。每个单词平均有 5 个别名。

我得到一个平均为 6 个单词的输入字符串。我要做：

```
// Pseudocode 
foreach word in input_string
    if word == x  or  word in alias(x) // x is a word in the list
       tag (word, x)  // Tag word with x
    else 
       tag (word, 0)
end 
```

什么是维护别名列表的快速数据结构，可以快速执行上面的查找？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T17:03:30.130

具有 O(n/k) 或 O(log n) 查找的[关联结构将是合适的。](http://en.wikipedia.org/wiki/Associative_array)

示例包括：

*   [哈希表](http://en.wikipedia.org/wiki/Hash_table)；或者
*   [尝试](http://en.wikipedia.org/wiki/Trie)

# xslt - 将数据报告为 xslt 中的列

> ID：10722438
> 
> 赞同：0
> 
> 时间：2012-05-23T14:49:34.567
> 
> 标签：xslt

我正在尝试将一些数据作为列而不是行返回，不确定是否可能？

所以我有以下xml：

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?> 
```

```
<CashBalanceResult>
  <CashBalanceLine Id="2" Name="Name1" ParentId="1" level="2">
    <Balances>
      <genericDate date="2012-05-21" index="0">10.000000000000</genericDate>
      <genericDate date="2012-05-22" index="1">20.000000000000</genericDate>
      <genericDate date="2012-05-23" index="2">30.000000000000</genericDate>
      <genericDate date="2012-05-24" index="3">40.000000000000</genericDate>
      <genericDate date="2012-05-25" index="4">50.000000000000</genericDate>
    </Balances>
  </CashBalanceLine>
  <CashBalanceLine Id="170" Name="Name2" ParentId="2" level="3">
    <Balances>
      <genericDate date="2012-05-21" index="0">340.000000000000</genericDate>
      <genericDate date="2012-05-22" index="1">440.000000000000</genericDate>
      <genericDate date="2012-05-23" index="2">550.000000000000</genericDate>
      <genericDate date="2012-05-24" index="3">660.000000000000</genericDate>
      <genericDate date="2012-05-25" index="4">770.000000000000</genericDate>
    </Balances>
  </CashBalanceLine>
  <CashBalanceLine Id="179" Name="Name3" ParentId="170" level="4">
    <Balances>
      <genericDate date="2012-05-21" index="0">5.000000000000</genericDate>
      <genericDate date="2012-05-22" index="1">6.000000000000</genericDate>
      <genericDate date="2012-05-23" index="2">6.000000000000</genericDate>
      <genericDate date="2012-05-24" index="3">5.000000000000</genericDate>
      <genericDate date="2012-05-25" index="4">6.000000000000</genericDate>
    </Balances>
  </CashBalanceLine>
</CashBalanceResult> 
```

然后我尝试使 genericdate 显示为 5 列：

```
name,2012-05-21,2012-05-22,2012-05-23,2012-05-24,2012-05-25
Name1,10.000000000000,20.000000000000,30.000000000000,40.000000000000,50.000000000000 
```

Name1,10.000000000000,20.000000000000,30.000000000000,40.000000000000,50.000000000000 Name2,340.000000000000,440.000000000000,550.000000000000,660.000000000000,770.000000000000 Name3,5.000000000000,6.000000000000,6.000000000000,5.000000000000,6.000000000000

可能吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:31:36.160

```
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="CashBalanceResult">
    <xsl:text>Name,</xsl:text>
    <xsl:value-of select="*/Balances/genericDate[@index=0]/@date"/>
    <xsl:text>,</xsl:text>
    <xsl:value-of select="*/Balances/genericDate[@index=1]/@date"/>
    <xsl:text>,</xsl:text>
    <xsl:value-of select="*/Balances/genericDate[@index=2]/@date"/>
    <xsl:text>,</xsl:text>
    <xsl:value-of select="*/Balances/genericDate[@index=3]/@date"/>
    <xsl:text>,</xsl:text>
    <xsl:value-of select="*/Balances/genericDate[@index=4]/@date"/>
    <xsl:text>&#xA;</xsl:text>
    <xsl:apply-templates/>
  </xsl:template>

  <xsl:template match="CashBalanceLine">
    <xsl:value-of select="concat(@Name,',',
                  Balances/genericDate[@index=0],',',
                  Balances/genericDate[@index=1],',',
                  Balances/genericDate[@index=2],',',
                  Balances/genericDate[@index=3],',',
                  Balances/genericDate[@index=4]

                  )"/>

    <xsl:if test="following-sibling::CashBalanceLine">
      <xsl:text>&#xA;</xsl:text>
    </xsl:if>
  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T15:27:49.260

这是一个 XSLT 2.0 选项...

**XML 输入**

```
<CashBalanceResult>
  <CashBalanceLine Id="2" Name="Name1" ParentId="1" level="2">
    <Balances>
      <genericDate date="2012-05-21" index="0">10.000000000000</genericDate>
      <genericDate date="2012-05-22" index="1">20.000000000000</genericDate>
      <genericDate date="2012-05-23" index="2">30.000000000000</genericDate>
      <genericDate date="2012-05-24" index="3">40.000000000000</genericDate>
      <genericDate date="2012-05-25" index="4">50.000000000000</genericDate>
    </Balances>
  </CashBalanceLine>
  <CashBalanceLine Id="170" Name="Name2" ParentId="2" level="3">
    <Balances>
      <genericDate date="2012-05-21" index="0">340.000000000000</genericDate>
      <genericDate date="2012-05-22" index="1">440.000000000000</genericDate>
      <genericDate date="2012-05-23" index="2">550.000000000000</genericDate>
      <genericDate date="2012-05-24" index="3">660.000000000000</genericDate>
      <genericDate date="2012-05-25" index="4">770.000000000000</genericDate>
    </Balances>
  </CashBalanceLine>
  <CashBalanceLine Id="179" Name="Name3" ParentId="170" level="4">
    <Balances>
      <genericDate date="2012-05-21" index="0">5.000000000000</genericDate>
      <genericDate date="2012-05-22" index="1">6.000000000000</genericDate>
      <genericDate date="2012-05-23" index="2">6.000000000000</genericDate>
      <genericDate date="2012-05-24" index="3">5.000000000000</genericDate>
      <genericDate date="2012-05-25" index="4">6.000000000000</genericDate>
    </Balances>
  </CashBalanceLine>
</CashBalanceResult> 
```

**XSLT 2.0**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="node()|@*">
    <xsl:apply-templates select="node()|@*"/>
  </xsl:template>

  <xsl:template match="CashBalanceResult">
    <xsl:text>Name,</xsl:text>
    <xsl:value-of select="*[1]/Balances/*/@date" separator=","/>
    <xsl:text>&#xA;</xsl:text>
    <xsl:apply-templates/>
  </xsl:template>

  <xsl:template match="CashBalanceLine">
    <xsl:value-of select="concat(@Name,',')"/>
    <xsl:value-of select="Balances/*" separator=","/>
    <xsl:if test="following-sibling::CashBalanceLine">
      <xsl:text>&#xA;</xsl:text>
    </xsl:if>
  </xsl:template>

</xsl:stylesheet> 
```

**输出**

```
Name,2012-05-21,2012-05-22,2012-05-23,2012-05-24,2012-05-25
Name1,10.000000000000,20.000000000000,30.000000000000,40.000000000000,50.000000000000
Name2,340.000000000000,440.000000000000,550.000000000000,660.000000000000,770.000000000000
Name3,5.000000000000,6.000000000000,6.000000000000,5.000000000000,6.000000000000 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-24T08:48:40.723

**如果**您在示例中的每一行中有固定数量的`genericDate`元素，那么在 XSLT 1.0 中实际上有一种相当简单的通用方法：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text"/>
  <xsl:strip-space elements="*" />

  <xsl:template match="CashBalanceResult">
    <xsl:text>name</xsl:text>
    <xsl:apply-templates select="CashBalanceLine[1]" mode="titles" />
    <xsl:text>&#10;</xsl:text>
    <xsl:apply-templates />
  </xsl:template>

  <xsl:template match="genericDate" mode="titles">
    <xsl:text>,</xsl:text>
    <xsl:value-of select="@date" />
  </xsl:template>

  <xsl:template match="CashBalanceLine">
    <xsl:value-of select="@Name" />
    <xsl:apply-templates />
    <xsl:text>&#10;</xsl:text>
  </xsl:template>

  <xsl:template match="genericDate">
    <xsl:text>,</xsl:text>
    <xsl:value-of select="." />
  </xsl:template>
</xsl:stylesheet> 
```

# javascript - 第一个元素将错误消息继续聚焦。Javascript

> ID：10722445
> 
> 赞同：0
> 
> 时间：2012-05-23T14:49:57.887
> 
> 标签：javascript, jquery, html

我有一个带有一些输入字段的表单：

```
Folder Name:
<input type="text" id="folderName" name="folderName" data-bind = "value: FolderName" />

Prefix:
<input id="prefix" name="prefix" data-bind = "value: Prefix" /> 
```

我使用 jquery 验证插件验证这些字段：

```
rules: {
            folderName: {
                required: true
            },
            prefix: {
                required: true,
                exactLength: 4
            },
} 
```

提交带有空字段的表单时，两个输入都会显示错误消息。我想要完成的是第一个带有错误消息的元素继续关注。我在 javascript 方面的技能相当差，因此任何工作示例都将不胜感激。谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:52:43.243

在您的验证触发后删除这样的东西

```
// set focus to first input
$('body').find(':input:first').focus(); 
```

# python - SQLAlchemy 关系：多个自引用列

> ID：10722446
> 
> 赞同：0
> 
> 时间：2012-05-23T14:49:59.130
> 
> 标签：python, sqlalchemy

有一个 sqlalchemy 对象

```
class Employee(Base):
    __tablename__ = "employee"
    # Columns
    id = Column(Integer, primary_key=True, autoincrement=True)
    representative_id = Column(Integer, ForeignKey('employee.id'))
    parent_id = Column(Integer, ForeignKey('employee.id'))
    affiliate_id = Column(Integer, ForeignKey('employee.id'))

    # Relatonships
    representative = relationship("Employee", ????)
    parent = relationship("Employee", ????)
    affiliate = relationship("Employee", ????) 
```

如果员工可以有 0 个或 1 个父母、附属机构和代表，如何以正确的方式配置关系？知道这三个是不同的。数据库 - MySQL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:09:32.777

我自己发现了如何做到这一点：

```
class Employee(Base):
    __tablename__ = "employee"
    # Columns
    id = Column(Integer, primary_key=True, autoincrement=True)
    representative_id = Column(Integer, ForeignKey('employee.id'))
    parent_id = Column(Integer, ForeignKey('employee.id'))
    affiliate_id = Column(Integer, ForeignKey('employee.id'))

    # Relatonships
    representative = relationship("Employee", 
                         primaryjoin="Employee.representative_id==Employee.id", 
                         remote_side=[id])
    parent = relationship("Employee",
                         primaryjoin="Employee.parent_id==Employee.id", 
                         remote_side=[id])
    affiliate = relationship("Employee",
                         primaryjoin="Employee.affiliate_id==Employee.id", 
                         remote_side=[id]) 
```

# java - 如果我将一个子类转换为它的超类，并调用一个在子类中被覆盖的方法，它会执行被覆盖的方法还是原始方法？

> ID：10722447
> 
> 赞同：4
> 
> 时间：2012-05-23T14:49:59.137
> 
> 标签：java, oop, inheritance, casting

考虑：

`Dog`是 的子类`Animal`，并且`Dog`覆盖`Animal.eat()`

```
Animal[] animals = getAllAnimals();
for (int i = 0; i < animals.length; i++) {
    animals[i].eat();
} 
```

If`Animal.eat()`被 覆盖，当从类型( ?)`Dog.eat()`的标识符调用方法时调用哪一个`Animal``animals[i]`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T14:52:28.343

将调用子类方法。[这就是多态](http://docs.oracle.com/javase/tutorial/java/IandI/polymorphism.html)的美妙之处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T14:53:36.440

子类将是唯一的方法调用，除非子类像这样调用超类：

```
class Dog {
  public eat() {
     super.eat();
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T15:00:02.060

编码

```
Animal a = new Dog();
a.eat(); 
```

将调用 Dog 的`eat`方法。但要小心！如果你有

```
class Animal {
  public void eat(Animal victim) { 
    System.out.println("Just ate a cute " + victim.getClass().getSimpleName()); 
  }
} 
```

你有一个 Cat 定义了一个额外的方法：

```
class Cat extends Animal {
  public void eat(Mouse m) { System.out.println("Grabbed a MOUSE!"); }
} 
```

然后你使用它们：

```
Animal cat = new Cat();
Animal mouse = new Mouse();
cat.eat(mouse); 
```

这将打印“刚吃了一只可爱的老鼠”，而不是“抓住了一只老鼠！”。为什么？因为多态性仅适用于方法调用中点左侧的对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T14:53:32.587

它将调用子类中的版本。

如果你不能传递一个子类对象作为它的超类并且没有得到子类方法，那么继承将毫无用处！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T15:07:35.527

一个[sscce](http://homepage1.nifty.com/algafield/sscce.html)

```
/**
 * @author fpuga http://conocimientoabierto.es
 * 
 * Inheritance test for http://stackoverflow.com/questions/10722447/
 *
 */

public class InheritanceTest {

    public static void main(String[] args) {
    Animal animals[] = new Animal[2];
    animals[0] = new Animal();
    animals[1] = new Dog();

    for (int i = 0; i < animals.length; i++) {
        animals[i].eat();

        if (animals[i] instanceof Dog) {
        System.out.println("!!Its a dog instance!!");
        ((Dog) animals[i]).eat();
        }
    }

    }

    private static class Animal {
    public void eat() {
        System.out.println("I'm an animal");
    }
    }

    private static class Dog extends Animal {
    @Override
    public void eat() {
        System.out.println("I'm dog");
    }
    }

} 
```

# vba - 使用宏替换 Excel 文件中的数据

> ID：10722451
> 
> 赞同：2
> 
> 时间：2012-05-23T14:50:08.593
> 
> 标签：vba, excel

我有一个 Excel 文件，其中包含二维数组中的一些数据。

![Excel 文档](../Images/1cf31800e2745752d18650d43912d186.png)

我想要做的是创建一个宏，它可以用表列的标题（toto、tata 或titi）替换星号'*'。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T15:03:50.230

像这样？

```
Option Explicit

Sub Sample()
    Dim oRange As Range, aCell As Range, bCell As Range
    Dim ws As Worksheet
    Dim ExitLoop As Boolean

    On Error GoTo Whoa

    '~~> Change this to the relevant sheet name
    Set ws = Worksheets("Sheet1")

    Set oRange = ws.Cells

    Set aCell = oRange.Find(What:="~*", LookIn:=xlValues, _
                LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                MatchCase:=False, SearchFormat:=False)

    If Not aCell Is Nothing Then
        Set bCell = aCell
        '~~> Assuming that the headers are in row 2
        aCell.Value = Cells(2, aCell.Column)
        Do While ExitLoop = False
            Set aCell = oRange.FindNext(After:=aCell)

            If Not aCell Is Nothing Then
                If aCell.Address = bCell.Address Then Exit Do
                '~~> Assuming that the headers are in row 2
                aCell.Value = Cells(2, aCell.Column)
            Else
                ExitLoop = True
            End If
        Loop
    End If
    Exit Sub
Whoa:
    MsgBox Err.Description
End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T15:38:51.643

仅使用工作表工具（无 VBA）：

*   `Ctrl-F`
*   找到什么 = ~*
*   `Find All`
*   `Ctrl-A`选择所有查找结果
*   `Close`查找对话框
*   假设您的标题在第二行，并假设光标落在 C 列某处（我做了两次，YMMV），输入公式`=C$2`
*   按`Ctrl-Enter`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T15:21:20.333

这是我想出的一个简单方法。

```
i = 3
While Cells(2, i).Value <> ""
    Range(Cells(3, i), Cells(6, i)).Select

    Selection.Replace What:="~*", Replacement:=Cells(2, i).Value, LookAt:=xlPart, _
    SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
    ReplaceFormat:=False
    i = i + 1
Wend 
```

Cells(x,y)：x 表示行，y 表示列。

可以使用更精细的范围选择来代替这个基本的范围选择来让代码选择适当的范围。

要在 excel 中实现，只需打开代码窗口并将此代码粘贴到所需的宏/子程序中。

# javascript - Raphael +FireFox：在 .click() 中使用 .toFront() 会禁用 dblclick()

> ID：10722452
> 
> 赞同：0
> 
> 时间：2012-05-23T14:50:16.097
> 
> 标签：javascript, firefox, raphael

你可以在这里看到问题：

这在 chrome 或 safari 中不会发生。

然而，在火狐...

[http://jsfiddle.net/jocose/aHj69/](http://jsfiddle.net/jocose/aHj69/)

如果你双击它会改变颜色。

问题是，如果您取消注释 click 下的“toFront”功能，dblclick 将不再被调用。

目前我有多个可拖动对象，并且希望在单击它们时将每个元素移到前面。这工作正常，但它禁用双击。

**更新：** 我只是尝试通过保存和比较单击之间的时间戳来手动指定双击。这在 Firefox 中有效，但在 IE 中无效。

IE 不允许您快速单击以注册双击。我认为它可能是在快速单击时调用双击而不是单击。Anways 最终结果是，当我快速单击两次时，IE 仅注册 1 次单击。

那么我唯一的选择是编写浏览器特定代码吗？

# function - 从 VB6 中的函数返回用户定义的类型

> ID：10722454
> 
> 赞同：4
> 
> 时间：2012-05-23T14:50:21.337
> 
> 标签：function, vb6

我是 VB 的新手。我在网上读到，为了从函数中返回，您执行以下操作 -

```
Private Function Add(ByVal x As Integer, ByVal y As Integer) As Integer
    Dim Res as integer
    Res = x + y
    Add = Res       ' use the function's name
End Function 
```

我的问题是，这种语法是否也适用于用户定义的类型？如果不是，语法是什么。我尝试了以下 -

```
Public Function getDetails() As clsDetails

Dim details As clsDetails

Set details = New clsDetails

With details
   .X = "R"
   .Y = "N"
   .Z = "N"
   ' more code follows
End With

getDetails = details 'gives error-> object variable or with block variable not set

End Function 
```

但这给了我上面一行的错误 - “对象变量或未设置块变量”。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T14:52:07.247

我想 clsDetails 不是 UDT，而是一个类。对于定义为对象的变量，您需要使用`SET`关键字。IE：

```
set getDetails = details 
```

有关使用 UDT 作为函数返回值或参数的详细信息，请参阅：[用户定义类型 (UDT) 作为类模块 (VB6) 中的 public Sub 中的参数](https://stackoverflow.com/q/975982/44522)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-16T15:10:30.397

```
// function definition  
Public Function add(a, b) 
    Dim c As integer
    c=Val(a) + Val(b) 
    add=c
End Function

// function calling 
    x=Text1.Text
    y=Text2.Text
    z=add(x, y) 
    MsgBox (z) 
```

# python - 使用多线程优化 python 脚本

> ID：10722455
> 
> 赞同：2
> 
> 时间：2012-05-23T14:50:22.030
> 
> 标签：python, multithreading, web-crawler, web-scraping, python-multithreading

大家好！我已经编写了小型网页爬虫功能。但是我是多线程的新手，我无法优化它。我的代码是：

```
alreadySeenURLs = dict() #the dictionary of already seen crawlers
candidates = set() #the set of URL candidates to crawl

def initializeCandidates(url):

    #gets page with urllib2
    page = getPage(url)

    #parses page with BeautifulSoup
    parsedPage = getParsedPage(page)

    #function which return all links from parsed page as set
    initialURLsFromRoot = getLinksFromParsedPage(parsedPage)

    return initialURLsFromRoot 

def updateCandidates(oldCandidates, newCandidates):
    return oldCandidates.union(newCandidates)

candidates = initializeCandidates(rootURL)

for url in candidates:

    print len(candidates)

    #fingerprint of URL
    fp = hashlib.sha1(url).hexdigest()

    #checking whether url is in alreadySeenURLs
    if fp in alreadySeenURLs:
        continue

    alreadySeenURLs[fp] = url

    #do some processing
    print url

    page = getPage(url)
    parsedPage = getParsedPage(page, fix=True)
    newCandidates = getLinksFromParsedPage(parsedPage)

    candidates = updateCandidates(candidates, newCandidates) 
```

可以看到，这里它在特定时间从候选人那里获取一个 url。我想让这个脚本成为多线程的，以这样一种方式，它可以从候选人那里获取至少 N 个 url，并完成这项工作。谁能指导我？提供任何链接或建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:59:39.047

您可以从这两个链接开始：

1.  Python中线程的基本参考 [http://docs.python.org/library/threading.html](http://docs.python.org/library/threading.html)

2.  他们在 python 中实际实现多线程 URL 爬虫的教程 [http://www.ibm.com/developerworks/aix/library/au-threadingpython/](http://www.ibm.com/developerworks/aix/library/au-threadingpython/)

此外，您已经有一个 python 爬虫：[http ://scrapy.org/](http://scrapy.org/)

# c# - C# - 如何根据 List 计数在 for 循环中获取 List<> 对象值

> ID：10722457
> 
> 赞同：0
> 
> 时间：2012-05-23T14:50:28.937
> 
> 标签：c#, asp.net

我有一个界面，例如

```
public interface Details
{
    int Id { get; set; }
    string Name { get; set; } 
} 
```

我在另一个类中有一个方法，比如

```
public void GetDetails()      
{ 
    List<Details> lstDetails = new List<Details>();        
    DetailsImpl objDetailsImpl;
    Details objDetails = new DetailsImpl();
    for (int i = 1; i <= 2; i++)
    {
        objDetailsImpl = new DetailsImpl(); //The **DetailsImpl** class is given below
        objDetails.Id = i;
        if(i==1)
           objDetails.Name = "FirstName";
        else
           objDetails.Name = "SecondName";
        lstDetails.Add(objDetails);
    }
    objDetailsImpl.InsertRecords(lstDetails);  
} 
```

我在另一个派生类中编写**InsertRecords方法，例如，**

```
public class DetailsImpl : Details
{
    Dictionary<object, object> objDictionary = new Dictionary<object, object>();
    public string Name { get; set; }
    public int Id { get; set; }

    public int InsertRecords(List<Details> lstDetails)
    {
        for (int i = 0; i < lstDetails.Count; i++)
        {
            //i want to get the integer value "Id" from List(lstDetails)
            Id = //How to get the Id value based on count, now the <lstDetails> count is 2

            //i want to get the Name object value also, how to i get???
            Name = Convert.ToString(String.Join(",",lstDetails.Select(s => s.Name).ToArray()));
            //If i using the above line for getting **Name** value means, its comes like "FirstName,LastName", but i want **Name** value based on row.....

            objDictionary.Clear();
            objDictionary.Add("@Id",Id);
            objDictionary.Add("@Id",Name);
            //Here i passed this parameter to "ExecuteNonQry" method for insert operations
            ExecuteNonQry("sp_name",objDictonary,CommandType.StoredProcedure);
        }
        return 1;
    }
} 
```

我想根据列表计数获取**Id、Name对象值。**我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T14:51:55.810

你正在尝试写

```
String.Join(", ", list.Select(o => o.Name)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T14:52:26.220

第th 元素的`Name`性质是`i`

```
lstDetails[i].Name 
```

值得指出的是，你**没有**a`List<>`你有`List<T>`- 而且你没有告诉我们 the`T`是什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T15:10:57.840

假设您的 List 有多个 Detail 类型的对象，其中 Detail 如下所示：

```
public class Detail
{
    public int Id{get;set;}
    public string Name {get;set;}
} 
```

现在你有一个包含 2 个细节对象的列表

```
lstDetails.Add(new Detail(){Id = 1, Name = "John"});
lstDetails.Add(new Detail(){Id = 2, Name = "Charlie"}); 
```

现在，如果您想在循环完成后`strValue`包含`John, Charlie`，您可以使用下面的代码而不使用循环

```
strValue = String.Join(",", lstDetails.Select(s => s.Name).ToArray()); 
```

# ruby-on-rails - jQuery UI 选项卡 - 样式标题

> ID：10722459
> 
> 赞同：1
> 
> 时间：2012-05-23T14:50:35.783
> 
> 标签：ruby-on-rails, jquery-ui, jquery-ui-tabs

有什么方法可以“堆叠”jQuery UI Tabs Header？请允许我解释一下：我的标签可能需要两个或多个单词才能使标题不言自明。例如：

“PDP 未开发”

我的问题是添加一堆标签时空间不足。所以不要把标签写成

```
PDP Undeveloped 
```

我希望它显示为

```
 PDP
Undeveloped 
```

那可能吗？如果没有，那么是否有解决此问题的替代方法？

提前致谢。

巴拉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T18:10:39.320

我建议使用`<br />`标签。由于您只希望它们在空间不足时生效，我建议使用媒体查询来打开多行显示。

```
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Nunc <br />tincidunt</a></li>
        <li><a href="#tabs-2">Proin <br />dolor</a></li>
        <li><a href="#tabs-3">Aenean <br />lacinia</a></li>
    </ul>
    <div id="tabs-1">Tab 1</div>
    <div id="tabs-2">Tab 2</div>
    <div id="tabs-3">Tab 3</div>
</div>

<style>
    br { display: none; }

    /* Replace 700px with whatever width you want the multi line display to start */
    @media screen and (max-width: 700px) {
        .ui-tabs li { height: 4em; }    
        br { display: inline; }
    }
</style> 
```

**现场示例**：http: [//jsfiddle.net/vvpeF/](http://jsfiddle.net/vvpeF/)

# tsql - T-SQL：使用 ROW_NUMBER 简化 Select 语句

> ID：10722460
> 
> 赞同：0
> 
> 时间：2012-05-23T14:50:37.550
> 
> 标签：tsql

我有以下执行基本选择语句的选择 SQL，尽管它确实包含计算列：

```
 Select *
    From
    (
      Select *,
             ROW_NUMBER() OVER
                              (ORDER BY
                                CASE WHEN @sortBy = 0 THEN R.DateCreated End Desc,
                                CASE WHEN @sortBy = 1 THEN R.DateCreated end Asc,
                                CASE WHEN @sortBy = 2 THEN TotalVotes END Desc,
                                CASE WHEN @sortBy = 2 THEN R.TotalFoundNotUseful END Desc
                              ) AS RowNumber 

      From
      (
        Select *, (TotalFoundUseful + TotalFoundNotUseful) As TotalVotes
      From Reviews
      Where (DealID = @dealID) And (TotalAbuses < 10) And (Deleted = 0)
    ) As R
  ) As Rev
  Where RowNumber BETWEEN @startRecord AND @endRecord 
```

如果仔细看，SELECT 语句本身执行了 3 次。我不敢相信这是必要的。有没有办法将其减少到 2 个选择语句（甚至可能是一个）。我实际上不需要返回 RowNumber。它仅用于选择一定范围内的行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:00:37.500

您可以通过将行号与原始选择放在评论中来做到这一点。如果你想在像 ROW_NUMBER 这样的窗口函数上有一个 WHERE 子句，你不能去一个。

您确实必须编写`TotalFoundUseful + TotalFoundNotUseful`两次，但它只会被评估一次，因此不会影响性能。

我也不希望移动到两个会对性能产生任何影响，但您应该对其进行测试。

```
Select *
    From
    (
  Select *, (TotalFoundUseful + TotalFoundNotUseful) As TotalVotes,
          ROW_NUMBER() OVER
              (ORDER BY
            CASE WHEN @sortBy = 0 THEN DateCreated End Desc,
            CASE WHEN @sortBy = 1 THEN DateCreated end Asc,
            CASE WHEN @sortBy = 2 THEN TotalFoundUseful + TotalFoundNotUseful END Desc,
            CASE WHEN @sortBy = 2 THEN TotalFoundUseful END Desc
          ) AS RowNumber 
 From Reviews
     Where (DealID = @dealID) And (TotalAbuses < 10) And (Deleted = 0)

  ) As Rev
  Where RowNumber BETWEEN @startRecord AND @endRecord 
```

# c# - 如何在两个表单之间传递文本框数据？

> ID：10722461
> 
> 赞同：0
> 
> 时间：2012-05-23T14:50:47.140
> 
> 标签：c#, winforms

如何在没有 Show()/ShowDialog() 的情况下通过按钮将文本框值发送到两个表单之间的文本框？我想 textBox 将在没有打开表单的情况下获得价值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:56:22.843

要访问您需要使用的文本框数据：textBox1.Text

表单是一个对象，因此您可以定义一个更新文本框值的方法（您可以使用公共访问器公开文本框本身）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T15:01:55.393

要将信息从父窗体传递到子窗体，您应该在子窗体上为其需要接收的数据创建一个属性，然后让父窗体设置该属性（例如，单击按钮时）。

要让子表单向父表单发送数据，子表单应该创建一个属性（它只需要是一个 getter），其中包含要发送到父表单的数据。`Form`然后它应该创建一个父级可以订阅的事件（或使用现有事件）。

一个例子：

```
namespace PassingDataExample
{
    public partial class ParentForm : Form
    {
        public ParentForm()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            ChildForm child = new ChildForm();
            child.DataFromParent = "hello world";

            child.FormSubmitted += (sender2, arg) =>
            {
                child.Close();

                string dataFromChild = child.DataFromChild;
            };

            child.Show();
        }
    }
}

namespace PassingDataExample
{
    public partial class ChildForm : Form
    {
        public ChildForm()
        {
            InitializeComponent();
        }

        public string DataFromParent { get; set; }

        public string DataFromChild { get; private set; }

        public event EventHandler FormSubmitted;

        private void button1_Click(object sender, EventArgs e)
        {
            DataFromChild = "Hi there!";

            if (FormSubmitted != null)
                FormSubmitted(this, null);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T15:02:36.117

我不知道你说“没有 Show()/ShowDialog()”到底是什么意思，但这无论如何都无关紧要，或者我只是在这里进一步假设你打开了两个窗口（不管你是如何完成的那）。

您希望避免两个表单之间的过多耦合，尤其是文本框等实现细节。您可以使用`delegates`并`events`触发两个表单之间的数据“发送”。然后，您可以轻松地传递事件数据，并且您*订阅*的其他表单（或事实上的任何其他对象）不知道表单的确切实现细节，它只知道它将通过委托（事件）接收的数据。我不会在这里发布所有代码，因为它已经在以下 URL 中得到了很好的解释：http: [//www.codeproject.com/Articles/17371/Passing-Data-between-Windows-Forms](http://www.codeproject.com/Articles/17371/Passing-Data-between-Windows-Forms)。

# android - 在 Eclipse 中添加断点，导致 Dalvik 崩溃

> ID：10722462
> 
> 赞同：7
> 
> 时间：2012-05-23T14:50:48.423
> 
> 标签：android, eclipse, dalvik, breakpoints

这是 Eclipse 的一个有趣的错误。我在用：

**版本：** Indigo 发布版本
**ID：** 20110615-0604

今天突然间，我在 Eclipse 上的 android 应用程序中设置了一个断点。当它到达代码时，调试（dalvik JVM）中止并崩溃：

> 试图在未准备的类中执行代码（后跟类名）

如果我不设置断点，它将毫无问题地运行。我已经通过谷歌搜索，但到目前为止一无所获。

另一个注意事项，我在哪里设置这个断点并不重要，它可能只是 onClick() 函数的第一行，或者其他任何地方。由于断点，应用程序“**暂停**”的那一刻，它就崩溃了。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-22T18:01:11.877

我遇到了同样的问题；对我来说，问题是通过删除我在调试器中设置的所有监视表达式来解决的（其中一个导致了问题）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T16:32:28.207

当使用带有这个（未准备的）类的静态方法的手表表达式时，我遇到了同样的问题。我通过从表达式列表中删除这个表达式解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T14:27:13.193

我通过删除未使用的导入包解决了这个问题。

实际上错误消息是说“试图在未准备的类中执行代码”（后跟类名）

我没有使用该类，但它是导入的。

只需删除导入，它就可以正常工作....

# objective-c - 无法结束后台任务

> ID：10722465
> 
> 赞同：0
> 
> 时间：2012-05-23T14:50:50.913
> 
> 标签：objective-c, background

我试图复制此博客中解释的内容，[http://developer.blueearth.net/2011/12/02/quick-tip-clearing-up-ios-multitasking/](http://developer.blueearth.net/2011/12/02/quick-tip-clearing-up-ios-multitasking/)，它解释了一种运行 NSTimer 的方法背景层出不穷。

问题是10分钟后我得到了这个。

```
Can't endBackgroundTask: no background task exists with identifier 2b55e8, or it may have already been ended. Break in UIApplicationEndBackgroundTaskError() to debug 
```

然后在应用停止执行 4 分钟后

知道我做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:32:36.740

2b55e8 听起来不是一个好的标识符，但我可能错了。在我在 iOS 6 上的应用程序中，它们从 1 开始，并通过该错误消息打印为整数，而不是十六进制值。

# php - 如果上传的图像尺寸较小，如何强制 WordPress 缩略图拉伸以适应？

> ID：10722466
> 
> 赞同：3
> 
> 时间：2012-05-23T14:50:51.383
> 
> 标签：php, wordpress

我网站上的用户上传的图片小于我的 WordPress 主题的基本缩略图尺寸。如何强制这些类型的图像垂直或水平拉伸，以免出现空白？

我`wp-admin>settings>media>thumbnail size`的设置为`124px x 156px`. 上传的图片`60px x 190px`破坏了网站布局。www.sharehouse.co 是测试站点。下面的代码是需要更改的。

```
<div class="post-left">
    <a href="<?php the_permalink(); ?>" <?php if ((get_option('cp_ad_image_preview') == 'yes') && (cp_get_image_url_raw($post->ID, 'large', 1) == true)) { ?>class="preview" rel="<?php echo cp_get_image_url_raw($post->ID, 'large', 1); ?>" <?php } ?>><?php if(get_post_meta($post->ID, 'images', true)) cp_single_image_legacy($post->ID, get_option('thumbnail_size_w'), get_option('thumbnail_size_h'), 'preview'); else cp_get_image_url_feat($post->ID, 'thumbnail', 'preview', 1); ?></a>                
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T14:54:36.233

因此，您需要做的第一件事是从`img`WordPress 创建的 HTML 中去除硬编码的宽度和高度属性。它认为您应该拥有这些尺寸并迫使您使用它们。

取自：[https ://wordpress.stackexchange.com/questions/5568/filter-to-remove-image-dimension-attributes](https://wordpress.stackexchange.com/questions/5568/filter-to-remove-image-dimension-attributes)

```
add_filter( 'post_thumbnail_html', 'remove_thumbnail_dimensions', 10 );
add_filter( 'image_send_to_editor', 'remove_thumbnail_dimensions', 10 );

function remove_thumbnail_dimensions( $html ) {
    $html = preg_replace( '/(width|height)=\"\d*\"\s/', "", $html );
    return $html;
} 
```

然后它只是CSS

```
.attachment img {
  width: 100%; /* scale to width of container, or whatever you want */
} 
```

# c# - C#：循环查找函数的最小值

> ID：10722467
> 
> 赞同：4
> 
> 时间：2012-05-23T14:50:58.140
> 
> 标签：c#, function, math, numerical-methods

我目前有这个功能：

```
 public double Max(double[] x, double[] y)
    {
        //Get min and max of x array as integer
        int xMin = Convert.ToInt32(x.Min());
        int xMax = Convert.ToInt32(x.Max());

        // Generate a list of x values for input to Lagrange

        double i = 2;
        double xOld = Lagrange(xMin,x,y);
        double xNew = xMax;
        do
        {
            xOld = xNew;
            xNew = Lagrange(i,x,y);
            i = i + 0.01;
        } while (xOld > xNew);

        return i;
    } 
```

这将在斜率减小的曲线上找到最小值......但是，[鉴于这条曲线](http://www.wolframalpha.com/input/?i=Plot%5B%280.1667%20x%5E5%2bx%5E4%20%28-3.3958%29%2b25.708%20x%5E3-%2888.854%20x%5E2%29%2b%20%28136.87%20x%29-70%29,%7Bx,0,6%7D%5D)，我需要找到三个最小值。

**如何找到三个最小值并将它们作为数组**或单个变量输出？这条曲线只是一个例子——它可以倒置——无论如何，我需要找到多个变量。因此，一旦找到第一个分钟，它就需要知道如何克服拐点并找到下一个...：/

*[拉格朗日函数可以在这里找到](http://en.wikipedia.org/wiki/Lagrange_multiplier)。** 出于所有实际目的，当我输入 x 时，拉格朗日函数会给我 f(x)...在视觉上，它表示由 wolfram alpha 提供的曲线。

*[这个难题的数学方面可以在这里找到](https://math.stackexchange.com/questions/148762/method-to-find-centroid-of-curve)。**

**可能的解决方案？** 生成一个输入数组，比如 x[1,1.1,1.2,1.3,1.4...]，从拉格朗日函数返回一个数组。然后找出这个函数的三个最低值？然后得到与值对应的键？我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T15:49:26.200

自从我上数值方法课程以来已经有一段时间了，所以请耐心等待。简而言之，有[多种方法](http://en.wikipedia.org/wiki/Root-finding_algorithm)可以搜索函数的根，并且根据您的函数是什么（连续的？可微分的？），您需要选择一种合适的方法。

对于您的问题，我可能首先尝试使用[牛顿法](http://en.wikipedia.org/wiki/Newton%27s_method)为您的函数找到二阶拉格朗日多项式的根。我还没有测试过这个库，但是 CodePlex 上有一个[基于 C# 的数值方法包](http://numerical.codeplex.com/)，它实现了开源的牛顿法。如果你想挖掘代码，你可以。

大多数根查找方法在更广泛的 CS 主题“搜索”中都有表亲。如果您想要一个非常快速和肮脏的方法，或者您有一个非常大的搜索空间，请考虑类似[Simulated Annealing](http://en.wikipedia.org/wiki/Simulated_annealing)。无法保证找到所有最小值，但它可以快速且易于编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T15:00:48.103

假设您只是想“蛮力”将其计算到一定的精确度，您需要您的算法基本上找到两个邻居都大于循环当前值的任何值。

为了简化这一点，假设您有一个数字数组，并且您想要找到三个局部最小值的索引。这是一个简单的算法：

```
public void Test()
{
    var ys = new[] { 1, 2, 3, 4, 5, 4, 3, 2, 1, 2, 3, 4, 5, 4, 3, 4, 5, 4 };
    var indices = GetMinIndices(ys);
}

public List<int> GetMinIndices(int[] ys)
{
    var minIndices = new List<int>();
    for (var index = 1; index < ys.Length; index++)
    {
        var currentY = ys[index];
        var previousY = ys[index - 1];
        if (index < ys.Length - 1)
        {
            var neytY = ys[index + 1];
            if (previousY > currentY && neytY > currentY) // neighbors are greater
                minIndices.Add(index); // add the index to the list
        }
        else // we're at the last index
        {
            if (previousY > currentY) // previous is greater
                minIndices.Add(index);
        }
    }
    return minIndices;
} 
```

因此，基本上，您传入为输入数组 (xs) 计算的函数结果数组 (ys)（未显示）。你从这个函数中得到的是最小索引。所以，在这个例子中，你会得到 8、14 和 17。

# c++ - CToolBar (MFC) 上带有 alpha 通道的 32 位图像

> ID：10722469
> 
> 赞同：4
> 
> 时间：2012-05-23T14:51:04.067
> 
> 标签：c++, image, mfc, toolbar

是否可以在 MFC 的 CToolBar 控件上显示带有 alpha 通道的 32 位图像？目前，我的工具栏使用 4 位图像，该图像由 Visual Studio 2010 中的“文件名”属性分配给它。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-25T01:14:35.710

迟到的答案，但我有同样的问题，所以如果其他人正在寻找解决方案：

带有 8 位 alpha 的 32 位图像可以开箱即用，至少在 XP 和更新版本上是这样。您需要 32 位 alpha BMP 格式的 BMP 文件，许多应用程序无法正确保存。我的方法是先生成PNG图像，然后使用这个小工具将它们转换为32位BMP：[https ://github.com/thomerow/png2bmp32](https://github.com/thomerow/png2bmp32)

一旦你有了这样的文件，它应该可以`toolbar.LoadBitmap(...)`毫无问题地使用。如果您使用工具栏的图像列表，或者如果您想使用图像列表在其他控件（例如树视图）中显示图标，请像这样加载图像：

```
CBitmap bitmap;
bitmap.LoadBitmap(...);
imageList.Create(WIDTH_OF_ICONS, HEIGHT_OF_ICONS, ILC_COLOR32, NUMBER_OF_IMAGES, 1);
imageList.Add(&bitmap, RGB(255, 0, 255)); // Color key isn't important.
bitmap.Detach(); 
```

希望这可以帮助！

编辑：我注意到“简单”`LoadBitmap()`在这里的 64 位版本中不起作用。我采用了上述使用图像列表的方法，结合`toolbar.GetToolBarCtrl().SetImageList(&imageList);`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T06:26:10.550

您可以使用 CMFCToolbar 而不是 CToolbar 来使用具有 alpha 通道的 32 位图像。这个类在 MFC 2008 Feature Pack (VS2008 SP1) 中并且已经包含在 VS2010 中。但是你不仅需要升级工具栏，还需要升级其他一些东西（CWinApp 到 CWinAppEx 等）。看看[这个](http://www.codeproject.com/Articles/217588/Porting-a-legacy-MFC-app-to-MFC-Feature-Pack)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-05T15:56:48.443

我有一个类似的问题。问题的原因是位图版本。所需的版本是版本 3 bmp v3，[bmp wiki](https://en.wikipedia.org/wiki/BMP_file_format)。但是 v3 默认为 24​​ 位深度，不包括 alpha 通道。

[我使用meatadata2go.com](https://imagemagick.org/)检查了 bmp 文件的元数据。

[然后，我能够使用imagemagick](https://imagemagick.org/)生成具有 32 位深度的 v3 bmp，保留 alpha 透明度。

我使用的命令是：

```
magick convert png_asset_name.png -define bmp3:alpha=on bmp3:new_bmp_asset_name.bmp 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T15:12:06.320

你看过[这个](http://www.codeguru.com/cpp/controls/imagelist/openfaq/article.php/c9045/True-Color-Image-List.htm)吗？这家伙从 CToolBar 派生了一个可以使用 32 位颜色的类。我希望这对你来说已经足够了。

# javascript - 根据计数和固定包装器调整元素的大小和计算大小

> ID：10722471
> 
> 赞同：0
> 
> 时间：2012-05-23T14:51:13.060
> 
> 标签：javascript, jquery

假设您有一个大小为 100px X 100px 的块 (div)。

现在我将一个大小为 100 X 100 像素的图像传递到这个块中。大小一样，所以很合身。

现在的问题是：如果我有 2、3 或 6 张图像并且我希望它们出现在 100 X 100 像素的框中，那么最好的方法是什么。

示例：1 张图片 -> 100 * 100，2 张图片，每张 50 * 50，9 张图片，每张 33% * 33%。

图像将始终具有相同的宽度和高度。

感谢任何提示！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-23T14:59:10.673

你回答了你自己的问题:-)

`imageWidth = containerWidth/amountImages`

对于您的“平铺”解决方案，您可以

`imageWidth = containerWidth/amountImagesInRow`

`imageHeight = containerHeight/amountImagesInColumn`

如果您想确定需要多少行/列：定义最小宽度并执行某种操作

`for(...){`

`if imageWidth < minWidth`

`amountImages -= 1;`

`imageWidth = containerWidth/amountImages`

`}`

`imagesInRow = amountImages;`

# php - Codeigniter 库类公共变量不起作用

> ID：10722477
> 
> 赞同：0
> 
> 时间：2012-05-23T14:51:33.103
> 
> 标签：php, class, codeigniter, variables

这是我的代码片段：

```
<?php

if (!defined('BASEPATH')) {
exit('No direct script access allowed');
}

class sample{

function __construct() {
    $this->ci = & get_instance();
    }

public $name;
public $style;

function set_data($data)
{
    /* List of parameters that you can set */

    $this->name = (isset($data['name']) ? $data['name']: ''); // Set select name
    $this->style = (isset($data['style']) ? $data['style']: ''); // Set select style

}

function select_both_dropdown()
{
    $select = '<select name="'.$this->name.'" class="chzn-select" style="'.$this->style.'">';
    $select .= '<option value=""></option>';
    $select .= '</select>';
return $select;
} 
```

控制器：

```
$data['select'] = $this->sample->select_both_dropdown(array(
        'name' => 'eventselect',
        'style' => 'min-width: 247px;'
    )); 
```

它是如何在控制器中加载的：function _construct( *) { parent::* _construct(); $this->load->library('tank_auth'); $this->load->library('sample'); }

当屏幕上的“选择负载”上没有填充。没有名称，没有样式等。我在做什么错？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T14:53:36.987

您需要正确引用它们；

在图书馆;

```
// as you have done
$this->select = 'foo'; 
```

在您的控制器中，它将类似于`$this->sample->name`或`$this->sample->style`

但是 $select 不是属性或被返回，因此将不可用。

更新 - 基于评论控制器；

```
$this->sample->set_data(array(
        'name' => 'eventselect',
        'style' => 'min-width: 247px;'
    ));
$data['select'] = $this->sample->select_both_dropdown(); 
```

**另一个更新**：

```
function select_both_dropdown($data)
{
    $this->set_data($data);
    $select = '<select name="'.$this->name.'" class="chzn-select" style="'.$this->style.'">';
    $select .= '<option value=""></option>';
    $select .= '</select>';
return $select;
} 
```

然后我会将 set_data() 更改为私有而不是公共。

# php - 严格标准：is_a()：已弃用。请使用 instanceof 运算符

> ID：10722484
> 
> 赞同：0
> 
> 时间：2012-05-23T14:51:56.247
> 
> 标签：php, cakephp, error-handling, cakephp-2.0

我正在使用 cakephp 2.0。我已将用户登录与 xenforo 集成，但在集成后，当我执行任何操作（如添加、编辑、删除）时，视图不会重定向，`$this->redirect`无法正常工作。

我收到此错误：

> 严格标准：is_a()：已弃用。请在......中使用 instanceof 运算符

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T14:55:47.440

此功能在 5.0 中已弃用，但由于它有有效的用例，未包含`instanceof`在 5.3 中，因此它在 5.3 中重新引入。我建议你升级你的 PHP 安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T14:53:36.590

因此，由于 is_a(): 已弃用。请改用[instanceof 运算符](http://php.net/manual/en/language.operators.type.php)。

```
if($object instanceof stdClass)
{
    ...
} 
```

# android - Android Canvas Paint 签名应用程序

> ID：10722486
> 
> 赞同：0
> 
> 时间：2012-05-23T14:52:04.583
> 
> 标签：android, canvas, bitmap, paint

我正在开发 android 绘画签名应用程序，它可以灵活地清除绘画并将画布保存为位图图像。我在这个应用程序中遇到了一个问题，每当我想将画布保存为位图时，我都需要检查签名是否足够长。如果签名太短，我必须要求用户再次签名。以下是我的代码： 这里面有两个类。

指绘活动

```
public class FingerPaintActivity extends Activity implements OnClickListener{

private Button clearBtn, saveBtn;

private View myView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    myView = findViewById(R.id.myView);

    clearBtn = (Button) findViewById(R.id.clearBtn);
    clearBtn.setOnClickListener(this);

    saveBtn = (Button) findViewById(R.id.submitBtn);
    saveBtn.setOnClickListener(this);

}

@Override
public void onClick(View v) {

    if (v == clearBtn) {

        MyView.clearCanvas();
        myView.invalidate();
        myView.refreshDrawableState();

    } else {

        myView.setDrawingCacheEnabled(true);

        myView.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
        myView.layout(0, 0, myView.getWidth(), myView.getHeight());
        myView.buildDrawingCache(true);
        Bitmap bm = Bitmap.createBitmap(myView.getDrawingCache());
        myView.setDrawingCacheEnabled(false);
        if (bm != null) {
            try {
                String path = Environment.getExternalStorageDirectory().toString();
                OutputStream fOut = null;
                File file = new File(path, "screentest.jpg");
                fOut = new FileOutputStream(file);
                bm.compress(Bitmap.CompressFormat.JPEG, 85, fOut);
                fOut.flush();
                fOut.close();
                Log.e("ImagePath", "Image Path : " + MediaStore.Images.Media.insertImage( getContentResolver(), file.getAbsolutePath(), file.getName(), file.getName()));

                sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://"+ Environment.getExternalStorageDirectory())));
            }
            catch (Exception e) {
                e.printStackTrace();
            }
        }
    }
}
} 
```

这是第二类：MyView

```
public class MyView extends View {

// private static final float MINP = 0.25f;
// private static final float MAXP = 0.75f;

private Bitmap mBitmap;
private static Canvas mCanvas;
private Path mPath;
private Paint mBitmapPaint;
private Paint mPaint;

public MyView(Context c) {
    super(c);

}

public MyView(Context context, AttributeSet attrs) {
    super(context, attrs);

    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setColor(Color.BLACK);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(6);
    mBitmap = Bitmap.createBitmap(320, 480, Bitmap.Config.ARGB_8888);
    mCanvas = new Canvas(mBitmap);
    mPath = new Path();
    mBitmapPaint = new Paint(Paint.DITHER_FLAG);
}

public MyView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);
}

@Override
protected void onDraw(Canvas canvas) {

    canvas.drawColor(0xFFAAAAAA);

    canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);

    canvas.drawPath(mPath, mPaint);
}

private float mX, mY;
private static final float TOUCH_TOLERANCE = 4;

private void touch_start(float x, float y) {
    mPath.reset();
    mPath.moveTo(x, y);
    mX = x;
    mY = y;
}

private void touch_move(float x, float y) {
    float dx = Math.abs(x - mX);
    float dy = Math.abs(y - mY);
    if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
        mPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
        mX = x;
        mY = y;
    }
}

private void touch_up() {
    mPath.lineTo(mX, mY);
    // commit the path to our offscreen
    mCanvas.drawPath(mPath, mPaint);
    // kill this so we don't double draw
    mPath.reset();
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    float x = event.getX();
    float y = event.getY();

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        touch_start(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_MOVE:
        touch_move(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_UP:
        touch_up();
        invalidate();
        break;
    }
    return true;
}

public static void clearCanvas() {
    Paint paint = new Paint();
    paint.setXfermode(new PorterDuffXfermode(Mode.CLEAR));
    mCanvas.drawPaint(paint);
    paint.setXfermode(new PorterDuffXfermode(Mode.SRC));

} 
```

}

我面临的唯一问题是在保存签名时，我必须在保存之前检查位图或画布或绘画的大小。我不知道要检查哪一个如果有人有想法请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:48:08.713

一种简单的方法是将触摸坐标之间的距离相加，并且仅在总和大于某个阈值时才接受签名。

因此，保持在 touch_move() 中绘制的总距离的运行总和

```
mTotal += Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2)); 
```

然后稍后

```
if(mTotal >= MINIMUM_SIGNATURE_LENGTH)
{
    acceptSignature();
} 
```

# iphone - Objective-c 的@property

> ID：10722492
> 
> 赞同：2
> 
> 时间：2012-05-23T14:52:10.277
> 
> 标签：iphone, objective-c, ipad

以下是否属实：

弱 = unsafe_unretain = 分配

强=保留

如果这是为什么它们被重复？我们应该选择哪一个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T14:55:23.987

不，这不是真的。`weak`表示不保留对象，另外，当对象被释放时，变量/属性将自动设置为 nil。`unsafe_unretained`表示对象不保留，但没有自动归零。`strong`并且`retain`是等价的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T14:55:20.343

`assign`通常用于原语，例如`int`or `double`，因为您只是在分配。`unsafe_unretained`用于您*知道*没有被保留的 Objective-C 对象，并理解为什么这是不安全的。`weak`是 iOS 5 中引入的一项新功能，类似于`unsafe_unretained`ARC，但与 ARC 具有不同的语义。查看 Apple 的[高级内存管理](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/MemoryMgmt/MemoryMgmt.pdf)指南了解更多信息。

实际上，`unsafe_unretained`如果您的目标是 iOS 5 或更高版本，您几乎永远不会使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T14:56:36.740

*   `strong`: 变量在其作用域内被保留。保留也用作强的同义词。
*   `copy`: 创建并保留一个副本。
*   `weak`: 用它来指向一个对象而不声明所有权。一旦对象被释放，指针将被取消。
*   `unsafe_unretained`: 与weak 相同，但释放后指针不为零。
*   `assign`: 原始值。

如果您的目标是 iOS 4，则不能使用弱。请改用 unsafe_unretained。
在 ARC 之前，属性的默认值是分配的，现在默认值是强的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T14:55:04.947

`weak`!=`unsafe_unretain`

`weak``nil`如果它指向的对象被释放，它将自动将其指针​​转换为 a 。

展望未来，您应该将`strong`&`weak`用于对象和`assign`原始类型

# javascript - 谷歌图表工具 - 未定义容器

> ID：10722493
> 
> 赞同：0
> 
> 时间：2012-05-23T14:52:10.637
> 
> 标签：javascript, containers, google-visualization

我正在使用谷歌图表 API（谷歌图表工具）在两个单独的 div 中绘制两个图表（折线图和条形图），分别称为“divChartG”和“divChartD”（分别用于左右）

我在 Firebug（Firefox 12.0）上的控制台中出现错误，在 format.js（直接来自 google 的 javascript 文件）中告诉“容器未定义”。

所以，我检查了论坛、帮助和其他内容，每个人都说“不要有两个具有相同 id 的 div”或“嘿，你错过了告诉你的 div 有你的 id！”

在我的 javascript 文件中，var firstDiv = "divChartG" 和 var secdDiv = "divChartD"。然后我画出我的图表并告诉找到并放置

```
document.getElementbyId(firstDiv)  //(or secdDiv) 
```

当我做

```
alert(firstDiv); 
```

它完全有效！所以我根本不明白......这真的很令人沮丧，因为我知道它会起作用！

预先感谢您给我的帮助或反思！:)

# performance - XTS 中不等时间的滚动列表

> ID：10722512
> 
> 赞同：2
> 
> 时间：2012-05-23T14:53:20.630
> 
> 标签：performance, r, xts

我有分时级别的股票数据，想创建一个前 10 秒所有分时的滚动列表。下面的代码有效，但需要很长时间才能处理大量数据。我想将此过程矢量化或以其他方式使其更快，但我没有提出任何建议。任何朝着正确方向提出的建议或推动将不胜感激。

```
library(quantmod)
set.seed(150)

# Create five minutes of xts example data at .1 second intervals
mins  <- 5
ticks <- mins * 60 * 10 + 1

times <- xts(runif(seq_len(ticks),1,100), order.by=seq(as.POSIXct("1973-03-17 09:00:00"),
                                                       as.POSIXct("1973-03-17 09:05:00"), length = ticks))

# Randomly remove some ticks to create unequal intervals
times <- times[runif(seq_along(times))>.3]

# Number of seconds to look back
lookback  <- 10
dist.list <- list(rep(NA, nrow(times)))

system.time(
  for (i in 1:length(times)) {

    dist.list[[i]] <- times[paste(strptime(index(times[i])-(lookback-1), format = "%Y-%m-%d %H:%M:%S"), "/",
                                  strptime(index(times[i])-1, format = "%Y-%m-%d %H:%M:%S"), sep = "")]
  }
)
>  user  system elapsed 
   6.12    0.00    5.85 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T17:00:00.047

你应该检查一下这个`window`功能，它会让你对日期的子选择更容易。以下代码用于`lapply`执行 for 循环的工作。

```
# Your code
system.time(
  for (i in 1:length(times)) {

    dist.list[[i]] <- times[paste(strptime(index(times[i])-(lookback-1), format = "%Y-%m-%d %H:%M:%S"), "/",
                                  strptime(index(times[i])-1, format = "%Y-%m-%d %H:%M:%S"), sep = "")]
  }
  )

#    user  system elapsed 
#    10.09    0.00   10.11

# My code 
system.time(dist.list<-lapply(index(times),
    function(x) window(times,start=x-lookback-1,end=x))
)
#    user  system elapsed 
#    3.02    0.00    3.03 
```

因此，大约快了三分之一。

但是，如果你真的想加快速度，并且你愿意放弃毫秒精度（我认为你的原始方法隐含地这样做），你可以只在独特的日期-小时-秒组合上运行循环，因为它们都会返回同一时间窗口。这应该会加快大约 20 或 30 倍的速度：

```
dat.time=unique(as.POSIXct(as.character(index(times)))) # Cheesy method to drop the ms.
system.time(dist.list.2<-lapply(dat.time,function(x) window(times,start=x-lookback-1,end=x)))

# user  system elapsed 
# 0.37    0.00    0.39 
```

# geolocation - 基于几何列对 PostgreSQL 表进行分区

> ID：10722528
> 
> 赞同：4
> 
> 时间：2012-05-23T14:54:07.607
> 
> 标签：geolocation, geospatial, postgis, postgresql-9.1

这是带有几何字段的表：

```
 Table "public.regions"
  Column   |         Type          |
-----------+-----------------------+-
 id        | integer               | 
 parent_id | integer               |
 level     | integer               |
 name      | character varying(55) |
 location  | geometry              | 
```

我存储了所有大陆、国家、州和城市的几何图形。由于它是一个巨大的表，我需要根据顶级位置（即大陆）对表进行分区以提高性能。

如何根据 geometry(continent) 对现有表进行分区？创建名为 asia, europe, australia ... 的继承表并根据包含的查询在这些表中插入行是否足够好？这会提高我的查询性能吗？

例如。我正在尝试运行以下查询：

> 11.562424 48.148679 是慕尼黑的某个地方
> 
> EXPLAIN ANALYZE SELECT id, name,level FROM regions WHERE Con​​tains((location),(GeomFromText('Point(11.562424 48.148679)')));

这在我的计算机中使用 PG 大约需要 500 毫秒，而在 Oracle 中相同的查询大约需要 200 毫秒。

# performance - SQL Server Express 性能问题

> ID：10722530
> 
> 赞同：5
> 
> 时间：2012-05-23T14:54:13.620
> 
> 标签：performance, sql-server-2008r2-express

**引发**

我正在运行 SQL Server Express 2008 R2。有十个用户使用存储过程对同一个表进行永久读/写。他们日夜这样做。

**问题**

随着数据库大小的增加，存储过程的性能越来越低。当数据库大小约为 200MB 时，存储过程调用平均需要 10 毫秒。当数据库大小约为 3GB 时，相同的调用平均需要 200 毫秒。所以我们必须每月清理一次数据库。

我们已经对一些具有积极影响的表进行了索引优化，但问题仍然存在。

最后，我不是 SQL Server 专家。你能给我一些提示来开始摆脱这个性能问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T15:00:19.623

*   下载并阅读[等待和队列](http://technet.microsoft.com/en-us/library/cc966413.aspx)
*   下载并遵循[SQL Server 2005/2008 性能和可扩展性故障排除流程图](http://sqlcat.com/sqlcat/b/presentations/archive/2008/04/18/troubleshooting-sql-server-2005-2008-performance-and-scalability-flowchart.aspx)
*   阅读[SQL Server 2005 中的性能问题疑难解答](http://technet.microsoft.com/en-us/library/cc966540.aspx)

SQL Server Express Edition 的限制（1GB 内存缓冲池、仅使用一个套接字 CPU、10GB 数据库大小）不太可能成为问题。应用程序设计、错误查询、过多的锁定并发和较差的索引更可能是问题所在。链接的文章（特别是第一篇）包括如何识别瓶颈的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T15:08:46.873

这很可能是一个简单的程序员错误 - 听起来你只是有：

*   某些表上的索引不正确。这不是优化 - 糟糕的索引就像 web 用户损坏的 HTML，如果你没有索引，那么基本上你没有使用应该使用的 SQL，你应该总是有适当的索引。
*   没有足够的硬件，例如 RAM。是的，它可以管理一个 10gb 的数据库，但是如果你的热集（一直访问的 suff）是 2gb，而你只有 1gb，它会比它需要的更频繁地访问磁盘。
*   慢速光盘，尤其是一个快速问题，因为大多数人不费心去获得正确的光盘布局。然后他们针对缓慢的 200 IOPS 最终用户磁盘运行 SQL 数据库，其中 - 根据需要 - SQL 数据库需要许多主轴或 SSD（目前典型的 SSD 有 40.000 IOPS）。

最后就是这样 - 加上可能非常糟糕的 SQL。典型的过滤器错误：somefomula(field) LIKE value，意思是“忘记你的索引，请在检查前进行表扫描并计算 someformula(field)”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T15:03:58.617

首先，SQL Server Express 不是您要求的最佳版本。获取开发者版进行测试。它与企业版完全一样，但如果您不用于“生产”，则免费。

关于性能，这里涉及很多东西，您可以使用它来改进它，因为索引直到分区。我们需要更多信息来提供帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-27T14:58:47.083

在优化 SQL 查询之前，您需要找到查询的热点。通常您可以使用 SQL Profiler 在 SQL Server 上执行此操作。对于 Express 版本，没有这样的工具。但是您可以使用一些查询来四处走动：

**返回所有 renct 查询：**

```
SELECT *
FROM sys.dm_exec_query_stats order by total_worker_time DESC; 
```

**只返回最耗时的查询：**

```
SELECT total_worker_time, execution_count, last_worker_time, dest.TEXT
FROM sys.dm_exec_query_stats AS deqs
CROSS APPLY sys.dm_exec_sql_text(deqs.sql_handle) AS dest
ORDER BY total_worker_time DESC; 
```

现在您应该知道需要优化哪个查询。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T10:00:47.547

可能是糟糕的索引、糟糕的数据库设计、可能没有应用规范化、不需要的列索引、糟糕的查询需要很长时间才能执行。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-05-23T14:59:20.470

SQLExpress 是为测试目的而构建的，性能受到 Microsoft 的直接限制，如果您在生产环境中使用它，您可能需要获得 SQL Server 的许可证。

看看这里[用于生产的 SQL Express 吗？](https://stackoverflow.com/questions/180537/sql-express-for-production)

# graphics - 使用 generatedInitialize() 教程

> ID：10722531
> 
> 赞同：-1
> 
> 时间：2012-05-23T14:54:18.187
> 
> 标签：graphics, prolog, 2d, logic-programming

最近有人告诉我 prolog 可以创建图形显示，并通过使用谓词`generatedInitialize()`.

我可以要求一些教程吗？

例如，如何显示一个矩形？

```
rectangle(2, 1, 2, 1).    %rectangle(length, width, length width). 
```

我正在使用 Win-Prolog 4.920。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T04:37:08.183

考虑检查[Visual Prolog 网站](http://wiki.visual-prolog.com/index.php?title=How_to_use_GUI_Package_in_Visual_Prolog)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:11:55.933

我`gfx`用来画出显示器。

```
display :-
    create_display,
    window_handler( display, display_handler ),
    show_dialog( display ).
create_display :-
    wdcreate( display,`Graphics Example`, 70, 50, 1200,510,[ws_sysmenu, ws_caption, ws_popup] ),
    wccreate( (display,2),grafix, ``, 10, 10, 1050, 457,[ws_child, ws_border, ws_visible, ws_tabstop] ),
    gfx_brush_create(red, 255, 0, 0, solid).
display_handler( _, msg_close, _, close ):-
    wclose(display).
display_handler( Win, msg_paint, grafix, _ ) :-
    gfx_paint( Win ),
    gfx( ( brush = red -> rectangle( 280, 212, 0, 12 ))),
    gfx_end( Win ). 
```

# openoffice.org - 如何使 LibreOffice Base 重新连接到数据库

> ID：10722538
> 
> 赞同：1
> 
> 时间：2012-05-23T14:54:47.347
> 
> 标签：openoffice.org, libreoffice, openoffice-base, libreoffice-base

我使用 LibreOffice Base 作为通用数据库客户端。有时它会失去与某个数据库的连接。有没有办法重新连接它？我的意思是，除了关闭和重新开放基地之外的其他方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T16:36:46.653

我没有测试它，但是 base 允许连接池（`Tools`-> `Options`-> `LibreOffice Base`-> `Connections`）：

![连接](../Images/c8bb1402fdee09418497e9a63d6a6020.png)

您是否尝试过长时间超时启用池？

# google-maps - 谷歌地图：有没有办法找出一个城市是否有详细的地图（不是街景）？

> ID：10722542
> 
> 赞同：2
> 
> 时间：2012-05-23T14:55:01.540
> 
> 标签：google-maps

我在地图上有一个点。该点属于一个还没有详细查看所有街道和建筑物的城市。但我希望谷歌在未来的某个时候能覆盖这座城市。所以我现在必须在卫星视图中显示地图，但如果地图在谷歌覆盖城市后立即开始以标准视图显示，那将是完美的。

是否有可能以编程方式确定城市是否在 Google 地图上有详细的街道和建筑物视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:32:46.877

我对地图上的给定点使用反向地理编码解决了我的问题。如果 result 有一个`ROOFTOP` `location_type`参数，这意味着该地图包含该点的建筑物。否则没有建筑物。

# maven - Maven：指定目录路径以选择文件和部署

> ID：10722544
> 
> 赞同：0
> 
> 时间：2012-05-23T14:55:03.350
> 
> 标签：maven

我正在使用 maven 2.2.1 版本作为我的 Java Application 的构建工具。

使用这个 Maven 工具，我在某个目录中构建 war 文件并将其复制到服务器（Tomcat）

这通过以下几行起作用

```
<copy file="D:/MyProject/target/Test.war"
tofile="C:/Softwares/apache-tomcat-6.0.33/webapps/Test.war" /> 
```

这一切都很好。

在这里我的问题是，我可以在其他地方指定目录路径而不是硬编码目录吗？

我已经看到`project.build.directory` 了 src 目录和`project.build.outputDirectory`目标目录的这些，我们可以在文件中指定这个属性名称吗？

请指导我，提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:08:47.263

对于战争路径，您可以使用内置的 Maven 属性：

```
${project.build.directory}/${project.build.finalName}.${project.packaging} 
```

您希望将部署路径设置为自定义 Maven 属性。有几种方法可以做到这一点。一种是直接在 pom 中设置，如下所示：

```
<properties>
  <deploy.path>C:/Softwares/apache-tomcat-6.0.33/webapps/Test.war</deploy.path>
</properties> 
```

但是，这仍然是对 pom 中的路径进行硬编码，只是在一个变量中。

另一种方法是使用[properties-maven-plugin](http://mojo.codehaus.org/properties-maven-plugin/plugin-info.html)读取属性文件。这将用户特定的设置排除在 pom 之外，并且您可以将属性文件排除在源代码控制之外。但是，这不是首选的 Maven 做事方式，未来版本可能不再支持此插件。

执行此操作的 Maven 方法是将部署路径存储在 ~/.m2/settings.xml 文件中。此属性将进入配置文件，默认情况下可以处于活动状态。有关说明，请参阅[此页面](http://maven.apache.org/examples/injecting-properties-via-settings.html)。

设置 deploy.path 变量后，将复制语句更改为如下所示：

```
<copy file="${project.build.directory}/${project.build.finalName}.${project.packaging}"
    tofile="${deploy.path}" /> 
```

编辑：

在一个最小的示例项目中，为我设置了以下属性：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-antrun-plugin</artifactId>
    <version>1.7</version>
    <executions>
      <execution>
        <id>compile</id>
        <phase>compile</phase>
        <configuration>
          <target>
            <echo message="project.build.directory: ${project.build.directory}"/>
            <echo message="project.build.finalName: ${project.build.finalName}"/>
            <echo message="project.packaging: ${project.packaging}"/>           
          </target>
        </configuration>
        <goals>
          <goal>run</goal>
        </goals>
      </execution>
    </executions>
  </plugin> 
```

If those properties aren't set for you, can you post your pom.xml?

# vb6 - 提早结束案件

> ID：10722546
> 
> 赞同：6
> 
> 时间：2012-05-23T14:55:06.853
> 
> 标签：vb6, exit, select-case

所以我在 Vb6 中有如下内容；

```
Select case Case

case "Case0"
...

case "Case1"
  if Condition Then
     Exit Select
  End If
  *Perform action*

case "Case2"
...

End Select 
```

但由于某种原因，我`Exit Select`抛出了错误`Expected: Do or For or Sub or Function or Property`。我知道，不漂亮。我应该使用别的东西吗？我可以只使用`if`语句而不是提前退出案例，但这需要重复的代码，我想避免这种情况。任何帮助将非常感激。

**更新**

尝试更改`Exit Select`为`End Select`并得到错误`End Select without Select Case`。它肯定在 a`Select Case`和 a之内`End Select`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T16:07:13.253

VB 没有退出`Select`块的功能。相反，您需要使内容有条件，可能会反转您的`Exit Select`条件。

```
Select case Case 

case "Case0" 
... 

case "Case1" 
  If Not Condition Then 
    *Perform action* 
  End If 

case "Case2" 
... 

End Select 
```

这将具有完全相同的最终结果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-23T15:38:11.603

VB6中没有`Exit Select`Statement - 只有 VB.NET

查看[退出声明](http://msdn.microsoft.com/en-us/library/aa243366%28v=vs.60%29.aspx)的语言参考-*没有*提及`Exit Select`

最好的选择是将您的选择语句重构为一个新的子例程，然后只需`Exit Sub`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T15:37:39.030

不幸的是，VB6 没有`Exit Select`可用的子句。

这仅在 VB.NET 中可用！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T19:33:56.197

试试这个

```
Do
    Select case Case

    case "Case0"
    ...

    case "Case1"
      if Condition Then
         Exit Do
      End If
      *Perform action*

    case "Case2"
    ...

    End Select
Loop While False 
```

编辑：顺便说一句，我会毫不犹豫地`GoTo`在这种情况下使用（不仅如此）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-11T10:23:45.960

刚刚发现一些非常琐碎的事情可以解决问题：

```
Select case Case 

case "Case0" 
... 

case "Case1" 
  A=A

case "Case2" 
... 

End Selec 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-25T20:20:21.267

只是以另一种方式回答这个老问题，您也可以使用 GoTo：

```
Select case Case

case "Case0"
...

case "Case1" 'you can use not condition as stated

  if Condition Then GoTo Exit_select
  *Perform action*

case "Case2"
...
Exit_select:
End Select 
```

# javascript - !function() { return false; 的操作细节 } ()

> ID：10722550
> 
> 赞同：2
> 
> 时间：2012-05-23T14:55:23.493
> 
> 标签：javascript, function

```
!function() { return false; } () 
```

我知道你为什么会写这样的东西，但我对它的工作方式有疑问。据我了解，感叹号做了两件事：

1.  它作用于`function() { return false; }`，把它变成一个表达式
2.  它还作用于执行函数的结果，因此整行计算为`true`

所以我的问题是：

1.  这是正确的解释吗？
2.  如果它是正确的，那么既然`()`比 绑定得更紧密`!`，那么第一部分（函数本身变为表达式）是如何发生的？为什么感叹号没有作用于整行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T15:01:33.130

根据[运算符优先级](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Operator_Precedence)，`function`声明（它是 的简写`new Function`）将首先发生，函数调用`()`将发生在第二个，而否定`!`将发生在最后。

为清楚起见进行编辑：您可以将这一行重写为这样来完成同样的事情：

```
// declare an anonymous function and assign it to the myFunc variable
var myFunc = function () { 
    return false; 
};

// execute the function and store it's return value (false) in returnValue
var returnValue = myFunc();

// negate the return value (true)
var output = !returnValue; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T15:15:49.597

1）它不会“改变”它。当解析器通过“函数”位时，它会期待一个表达式，因此“函数”被解析为（可能是匿名的）函数表达式的一部分，而不是函数语句。

2）*作用*于全线。如果您按照 jbabey 的建议查看优先级，您会看到函数调用比否定运算符绑定得更紧密，因此整个 like 被评估为

```
! ((function(){})()); 
```

或者类似的，也许更易读的版本：

```
var f = function(){ ... };
! (f()); 
```

# c# - 获取委托的 IntPtr 并调用

> ID：10722552
> 
> 赞同：2
> 
> 时间：2012-05-23T14:55:24.007
> 
> 标签：c#, pinvoke, marshalling

为了模拟来自 C++ 的调用，我正在尝试以下代码

```
 private delegate void CppFuncDelegate(string message);

    private static void Main(string[] args)
    {
        Console.WriteLine("+++ BEGIN TEST +++");

        Action<string> action = str => Console.WriteLine("Received:" + str);
        IntPtr delegatePtr = action.Method.MethodHandle.GetFunctionPointer();

        CppFuncDelegate cppFuncDelegate = (CppFuncDelegate)
           Marshal.GetDelegateForFunctionPointer(delegatePtr, 
                                                        typeof(CppFuncDelegate));
        cppFuncDelegate.Invoke("Hello");
    } 
```

但我明白了

> 检测到 PInvokeStackImbalance。调用 PInvoke 函数 'Test!Test.Program+CppFuncDelegate::Invoke' 使堆栈失衡。这可能是因为托管 PInvoke 签名与非托管目标签名不匹配。检查 PInvoke 签名的调用约定和参数是否与目标非托管签名匹配。

谁能告诉我我做错了什么？

**注意**：请不要告诉我做 action.Invoke(); 这不是这个练习的目的。我想获得委托的 IntPtr 句柄并使用 GetDelegateForFunctionPointer() 然后调用返回的委托。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T16:34:21.870

您不能使用 GetDelegateForFunctionPointer() 来获取托管函数的委托。这是来自[MSDN](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.RUNTIME.INTEROPSERVICES.MARSHAL.GETDELEGATEFORFUNCTIONPOINTER%29;k%28SOLUTIONITEMSPROJECT%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK%2cVERSION%3dV2.0%22%29;k%28DevLang-CSHARP%29&rd=true)：

> 您不能将无效的函数指针传递给 GetDelegateForFunctionPointer。此外，您只能将此方法用于纯非托管函数指针。您不能将此方法用于通过 C++ 或从 GetFunctionPointer 获得的函数指针。您不能使用此方法创建从函数指针到另一个托管委托的委托。

我不确定你为什么不能这样做，但我想这是因为微软的公共语言运行时使用 FastCall 调用约定，但PInvoke[不支持 FastCall](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.callingconvention.aspx)。

# windows-phone-7 - Windows Phone 中的增强现实

> ID：10722554
> 
> 赞同：3
> 
> 时间：2012-05-23T14:55:26.977
> 
> 标签：windows-phone-7, augmented-reality

我是 Windows Phone 7 的初学者。我的项目是在 windows phone 中开发增强现实。其中许多人建议使用[GART Toolkit](http://gart.codeplex.com/)。这似乎很好。但作为一个初学者，我无法理解这一点。除了 GART 或 GART 工具包的任何教程之外，它们是否还有其他可用的 SDK 或工具包？这里有 Windows Phone 爱好者吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T15:16:56.633

[http://igrali.wordpress.com/2012/05/13/windows-phone-and-geo-augmented-reality-toolkit-gart/](http://igrali.wordpress.com/2012/05/13/windows-phone-and-geo-augmented-reality-toolkit-gart/)是使用以下术语搜索时出现在 Bing 中的第二篇文章：windows phone增强现实教程gart

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T16:48:33.810

试试这个：

[http://igrali.wordpress.com/2012/05/24/implementing-augmented-reality-using-gart/](http://igrali.wordpress.com/2012/05/24/implementing-augmented-reality-using-gart/)

这是关于通过 6 个简单步骤实施 GART。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T16:28:55.433

MSDN 上还有[增强现实示例](http://msdn.microsoft.com/en-us/library/ff431744%28v=vs.92%29.aspx#BKMK_Sensors)，描述为：

> 此示例使用 Motion API 和 PhotoCamera 类创建增强现实应用程序，让您可以在旋转设备时将标签固定到空间中的点。有关更多信息，请参阅[如何：使用 Windows Phone 的组合运动 API](http://msdn.microsoft.com/en-us/library/hh202984%28v=vs.92%29.aspx)。

# jquery - jQuery 表单错误迭代

> ID：10722558
> 
> 赞同：0
> 
> 时间：2012-05-23T14:55:37.577
> 
> 标签：jquery, forms, validation

如果用户没有使用以下代码正确填写表单，我有一个 jQuery 表单，它会显示一条消息：

```
if (errorList.length > 0) {
                    permitted = false;

                    //Display error message
                    $("#" + stepName + " legend").after("<div id=\"errorList\" class=\"error\"><h3>Please correct the following </h3><ul></ul></div>");
                    for (var j = 0; j < errorList.length; j++) {
                        if (errorList[j] != undefined)
                            $("#errorList ul").append("<li>" + errorList[j] + "</li>");
                    }

                } 
```

问题是当用户尝试多次提交错误的表单时，会发生这种情况：

![在此处输入图像描述](../Images/299a865a4d0a602c35548d121d0bb0c6.png)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T14:57:56.660

在迭代之前添加一个`.empty`..

```
$("#errorList ul").empty();
for(var j = 0; j < errorList.length; j++) {
if (errorList[j] != undefined)
    $("#errorList ul").append("<li>" + errorList[j] + "</li>");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T14:56:57.753

尝试：

```
 if (errorList.length > 0) {
                permitted = false;

                //Display error message
                $("#" + stepName + " legend").after("<div id=\"errorList\" class=\"error\"><h3>Please correct the following </h3><ul></ul></div>");
                $("#errorList ul").empty(); // THIS FIXES IT
                for (var j = 0; j < errorList.length; j++) {
                    if (errorList[j] != undefined)
                        $("#errorList ul").append("<li>" + errorList[j] + "</li>");
                }

            } 
```

# java - 如何使用标题“范围”分部分发送文件？

> ID：10722559
> 
> 赞同：1
> 
> 时间：2012-05-23T14:55:41.110
> 
> 标签：java, android, networking, connection, android-networking

我想通过将大文件分成小部分并分别发送来发送大文件。我尝试使用 hedder“范围”并得到“org.apache.http.client.NonRepeatableRequestException：无法用不可重复的请求实体重试请求”。

```
// create authenticate client
DefaultHttpClient client = new DefaultHttpClient();

// create HTTP put with the file
HttpPut httpPut = new HttpPut(url);
final File recordingFile = new File(mDir, mName);
long fileLength = recordingFile.length();
for (int i=0; i < fileLength; i += 4096) {
    int length = Math.min(4096, (int)recordingFile.length() - i);
    InputStreamEntity entity = new InputStreamEntity(inputStream, length);
    httpPut.setEntity(entity);
    httpPut.addHeader("Connection", "Keep-Alive");
    httpPut.addHeader("Range", "bytes=" + i + "-" + (i + length));

    // Execute
    HttpResponse res = client.execute(httpPut);
    int statusCode = res.getStatusLine().getStatusCode();
} 
```

我还尝试了“Content-Range”标题（而不是“Range”），我得到了同样的例外。

```
httpPut.addHeader("Content-Range", "bytes=" + i + "-" + (i + length) + "/" + fileLength);
httpPut.addHeader("Accept-Ranges", "bytes"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:26:15.470

您重复发送多个 4096 位。例如，让我们采取前两个步骤： i = 0 发送范围 0-4096 i = **4096** 发送范围**4096** -8192。

修复此行：

```
for (int i=0; i <= fileLength; i += 4097) {
    int length = Math.min(4096, (int)recordingFile.length() - i + 1);
    /*...*/
} 
```

它应该可以正常工作。

更新：也许问题是由于某些原因（例如身份验证失败）它尝试再次重新发送相同的块，在这种情况下输入流已经被消耗。尝试使用 ByteArrayEntity 而不是 InputStreamEntity，如下所示：

```
ByteArrayInputStream bis = new ByteArrayInputStream(recordingFile);
for (int i=0; i <= fileLength; i += 4097) {
    int length = Math.min(4096, (int)recordingFile.length() - i + 1);
    byte[] bytes = new byte[length];
    bis.read(bytes);
    ByteArrayEntity entity = ByteArrayEntity(bytes);
    /*...*/
} 
```

# android - 基于 X 和 Y 的 osmdroid 标记，而不是纬度和经度

> ID：10722561
> 
> 赞同：1
> 
> 时间：2012-05-23T14:55:55.983
> 
> 标签：android, osmdroid

我使用 osmdroid 来显示一个大图像（4096x4096），它被分割成图块。

现在我想根据**图像**的 X 和 Y 坐标在地图上设置标记，而不是纬度和经度。

例如，是否可以根据这些数据在地图上添加标记？

*   X：10，Y：250
*   X：4000，Y：0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:17:37.760

我自己找到了解决方案。

Microsoft 已经编写了一个类 ( `microsoft.mappoint.TileSystem`)，它能够完全做到这一点。

代码示例：

```
GeoPoint geoPoint = TileSystem.PixelXYToLatLong(
    10, // X
    250, // Y
    3, // Level of detail
    null // Reuse
); 
```

# java - 如何远程访问 EJB3？

> ID：10722562
> 
> 赞同：0
> 
> 时间：2012-05-23T14:56:03.883
> 
> 标签：java, ejb-3.0

> 我将 JBOSS AS-7 用作 SERVER-A，将 tomcat 用作 SERVER-B。

我已经开发了一个 EJB 并将其部署在 JAR 中的 SERVER-A 上，我想从 Server-B 调用这个 EJB。问题是如何从 SERVER-B 访问 EJB？

EJB 代码如下：

```
package demo.ejb;

import javax.ejb.Remote;

@Remote
public interface RemoteBeanInterface {

   public void say(String saying);
}

package demo.ejb.session.stateless;

import javax.ejb.Remote;
import javax.ejb.Stateless;

import demo.ejb.RemoteBeanInterface;

@Stateless(name = "StatelessBeanDemo")
public class StatelessBeanDemo implements RemoteBeanInterface {

   @Override
   public void say(String saying) {
      System.out.println("[Say] : " + saying + "");
   }
} 
```

谁能帮助我如何从 SERVER-B 访问/调用 EJB？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:21:07.720

在这个示例中，您可以找到在 JBoss 中查找远程 EJB 所需的一切。它还包括您需要的 Maven 依赖项，请查看客户端项目。

[https://github.com/jbossas/quickstart/tree/master/ejb-remote/](https://github.com/jbossas/quickstart/tree/master/ejb-remote/)

# ruby-on-rails - Ruby on Rails：form_tag 不起作用

> ID：10722566
> 
> 赞同：2
> 
> 时间：2012-05-23T14:56:15.457
> 
> 标签：ruby-on-rails, ruby, haml

我正在尝试制作一个部分视图，该视图具有一个下拉菜单来选择星期，当按下提交按钮时，使用新数据重新打开同一页面。这是我遇到问题的代码：

```
= form_tag(:controller => "/payroll_issues", :action=> "index") do 
```

单击按钮时，它会将您带到正确的 url，但页面未加载，并显示“未收到数据，无法加载网页，因为服务器未发送数据。”

问题是，当我运行代码时

```
= form_tag(:controller => "/payroll_issues", :action=> "change_week") do 
```

change_week 只是重定向到索引，一切都很好。索引有什么我遗漏的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:41:46.920

表单标签助手创建一个带有 的表单标签`method = 'post'`，您的索引操作的路由可能设置为仅接受`'get'`请求。

要检查，您可以运行`rake routes`

如果你真的想要，你可以添加一个路由来接受你的 index 操作的 post 请求，如下所示：

```
# routes.rb
match '/' => 'payroll_issues#index', :as => :index, :via => :post 
```

但是，使用问题中的第二种技术会更好，创建一个单独的操作并重定向。

```
def change_week
  #do change week stuff
  redirect_to payroll_issues_url
end 
```

# javascript - 如何使用 jquery 包含树枝模板

> ID：10722570
> 
> 赞同：0
> 
> 时间：2012-05-23T14:56:28.813
> 
> 标签：javascript, jquery, twig

我有一个网页表单页面，可以通过单击链接动态添加其他字段。这个页面被分割成各种模板，特别是表单的每个字段都有自己的模板。现在要完成这项工作，我必须复制并粘贴最终生成的 html 代码并分配它来操作 DOM，有没有办法让 Jquery 重用我已经编写的 TWIG 模板？

有关我的情况的示例，请查看：[http ://symfony.com/doc/master/cookbook/form/form_collections.html#allowing-new-tags-with-the-prototype](http://symfony.com/doc/master/cookbook/form/form_collections.html#allowing-new-tags-with-the-prototype)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-01T15:16:11.953

我不知道我是否理解你。我在我的项目中拥有`Profile`实体集合`Study`。`ProfileType`有

```
public function buildForm(FormBuilder $builder, array $options)
{
    $builder
            ->add('studies', 'collection', array(
                'type' => new StudyType(),
                'allow_add' => true,
                'allow_delete' => true,
                'by_reference' => false,
                    )
            )
... 
```

在研究列表之后的模板中，我有`Add new`带有 JS 代码的按钮

```
 var children, classParts, nr, proto;
    children = $('#profile_' + name).children();
    if (children.size()) {
        classParts = children.last().attr('class').split('_');
        nr = classParts.pop()*1 + 1;
    } else {
        nr = 0;
    }
    proto = $('#profile_' + name + '').data('prototype');
    proto = proto.replace(/\$\$name\$\$/g, nr);
    $('#profile_' + name + '').append(proto) 
```

这是有效的，因为在渲染形式中我有新`Study`形式的原型。

# c# - 无法将 namespaceA.objectA 转换为 namespaceA.objectA

> ID：10722571
> 
> 赞同：1
> 
> 时间：2012-05-23T14:56:30.063
> 
> 标签：c#, reflection, casting, end-to-end

我的应用程序的 EndToEnd 测试包括手动加载已发布的文件。

在测试期间，我总是加载以下内容： - n 个调试程序集的 NUnit shadowcopy - n 个发布程序集的 Postbuildeventcopy

即使我确定这两个副本来自同一个构建生成（版本），我的反射加载也失败了。

在这里给出一点上下文是一些伪代码：

```
private HookingHelper globalhooker;
private Tools.ISomething globalmockery;

TestfixtureSetUp(){
    globalhooker = new globalhooker();
    globalhooker.Loadfrom("c:\postbuildcopy.dll");
    globalmockery = Mockrepository.Generate<Tools.ISomething>();
    globalhooker.SetViaReflection<Tools.ISomething>("nameofsomething", globalmockery);
 } 
```

我有一个帮助类，它使用 Loadfrom 在程序集中获取静态。在我调用任何东西之前，我必须注入一个模拟。

这个模拟是使用调试版本中工具库的影子副本创建的，因为 nunit 创建了它。

加载的库是发布版本，这对我很重要，因为我想尽可能接近真实环境进行测试。

当我尝试使用反射注入时，我必须使用`FieldInfo SetValue(...)`调用看起来像这样：

```
 public static void ReplaceFieldPublicStatic<T>(Type type, string fieldname, T obj)
    {
        FieldInfo field = AssemblyHelper.GetFieldInfoPublicStatic(type, fieldname);
        field.SetValue((T)obj, obj);
    } 
```

有时反射有效，有时我的类型不能相互转换。

该错误是由 生成的 ArgumentException `FieldInfo SetValue(...)`。

当我接受异常并调查`field.FieldType != typeof(T)`只有 GetHashCode() 调用之间的区别时，会给出不同的值。

我认为这涉及到一点随机性。

我可以强制 Typecast 吗？这甚至是明智的吗？

在构建我缺少的项目时，我需要做些什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:00:22.600

> 即使我确定这两个副本来自同一个构建生成（版本），我的反射加载也失败了。

是的 - 如果两种类型来自两个不同的`Assembly`对象，那么就 CLR 而言，它们是不同的类型。这些程序集可以从完全相同的字节序列加载，但它们仍然是不同的程序集。

基本上，您需要为每种类型选择*一个* `Assembly`使用。

# c - 将字体从文件加载到 pango？

> ID：10722577
> 
> 赞同：5
> 
> 时间：2012-05-23T14:56:40.887
> 
> 标签：c, fonts, cairo, pango

我有一个代码使用[Cairo](http://www.cairographics.org/)和[Pango](http://www.pango.org/)创建图像：

```
#include<stdio.h>
#include<cairo.h>
#include<pango/pangocairo.h>

#define IMAGE_WIDTH  650
#define IMAGE_HEIGHT 150

#define TEXT "HELLO WORLD"
#define FONT "MizuFontAlphabet Normal 40"

/*
 * $ gcc $(pkg-config pangocairo cairo --cflags --libs) file.c
 */

int main(int argc , char** argv) {

    cairo_surface_t *surface;
    cairo_t *cr;

    PangoLayout *layout;
    PangoFontDescription *desc;
    PangoRectangle extents;

    surface = cairo_image_surface_create(CAIRO_FORMAT_ARGB32, IMAGE_WIDTH, IMAGE_HEIGHT);
    cr      = cairo_create(surface);

    cairo_rectangle(cr, 0, 0, IMAGE_WIDTH, IMAGE_HEIGHT);
    cairo_set_source_rgb(cr, 0, 0, 0);
    cairo_fill(cr);
    cairo_stroke(cr);

    /* the font is needed to be installed in fonts directory */
    layout  = pango_cairo_create_layout(cr);
    pango_layout_set_text(layout, TEXT, -1);
    desc    = pango_font_description_from_string(FONT);
    pango_layout_set_font_description(layout, desc);
    pango_font_description_free (desc);

    pango_layout_get_pixel_extents(layout, NULL, &extents);
    int x   = (int) (IMAGE_WIDTH - extents.width) / 2;
    int y   = (int) (IMAGE_HEIGHT - extents.height) / 2;

    cairo_set_source_rgb(cr, 0.33, 0.55, 0.88);
    cairo_move_to(cr, x, y);
    pango_cairo_show_layout(cr, layout);

    g_object_unref(layout);

    cairo_surface_write_to_png(surface, "image.png");

    cairo_destroy(cr);
    cairo_surface_destroy(surface);

    return(0);
} 
```

我使用的字体 , `MizuFontAlphabet`, 是一种非标准字体，因此需要将其安装在字体目录中，以便我可以将其与 Pango 一起使用：

```
 desc    = pango_font_description_from_string(FONT); 
```

如果未安装该字体，我如何从文件中加载字体？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-08-31T12:35:30.333

通过将自定义字体添加到本地 fontconfig 状态，可以很容易地解决此问题：

```
#include <fontconfig/fontconfig.h>

std::string yourFontFilePath = "/home/testUser/bla.ttf";
const FcChar8 * file = (const FcChar8 *)yourFontFilePath.c_str();
FcBool fontAddStatus = FcConfigAppFontAddFile(FcConfigGetCurrent(), file); 
```

现在 pango 渲染引擎将使用您的自定义字体，只需使用 PangoFontDescription。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T07:19:03.967

你需要 Freetype 来做到这一点。

您可能想查看[fontview library 中的以下（GPL 许可）代码](https://github.com/khaledhosny/fontview/blob/master/font-model.c)。

特别是，功能`font_model_new`：

```
GObject *font_model_new (gchar *fontfile) {
    FontModel *model;
    FT_Library library;
    FT_Face face;
    FcConfig *config;
    TT_OS2* os2;

    g_return_val_if_fail (fontfile, NULL);

    if (FT_Init_FreeType(&library)) {
        g_error ("FT_Init_FreeType failed");
        return NULL;
    }

    if (FT_New_Face (library, fontfile, 0, &face)) {
        g_error ("FT_New_Face failed");
        return NULL;
    }

    if (!FT_IS_SFNT(face)) {
        g_error ("Not an SFNT font!");
        return NULL;
    }

    config = FcConfigCreate ();
    if (!FcConfigAppFontAddFile (config, (FcChar8*)fontfile)) {
        g_error ("FcConfigAppFontAddFile failed");
        return NULL;
    }

    model = g_object_new (FONT_MODEL_TYPE, NULL);
    model->file = g_strdup (fontfile);
    model->ft_face = face;
    model->config = config;
    model->family = face->family_name;
    model->style = face->style_name;
    model->units_per_em = face->units_per_EM;

    model->xheight = 0;
    model->ascender = 0;
    model->descender = 0;

    model->sample = NULL;

    memset(&model->color, 0, sizeof (ColorTable));

    /* Get font metadata if available/applicable */
    os2 = FT_Get_Sfnt_Table(face, ft_sfnt_os2);
    if (os2) {
        model->xheight = os2->sxHeight;
        model->ascender = os2->sTypoAscender;
        model->descender = os2->sTypoDescender;
    }

    model->family = get_font_name (face, TT_NAME_ID_PREFERRED_FAMILY);
    if (!model->family)
        model->family = get_font_name (face, TT_NAME_ID_FONT_FAMILY);

    model->style = get_font_name (face, TT_NAME_ID_PREFERRED_SUBFAMILY);
    if (!model->style)
        model->style = get_font_name (face, TT_NAME_ID_FONT_SUBFAMILY);

    model->copyright = get_font_name (face, TT_NAME_ID_COPYRIGHT);
    model->version = get_font_name (face, TT_NAME_ID_VERSION_STRING);
    model->description = get_font_name (face, TT_NAME_ID_DESCRIPTION);
    model->sample = get_font_name (face, TT_NAME_ID_SAMPLE_TEXT);

    model->mmvar = NULL;
    model->mmcoords = NULL;
    if (FT_HAS_MULTIPLE_MASTERS (face)) {
        if (FT_Get_MM_Var (face, &model->mmvar) != 0) {
            model->mmvar = NULL;
        }
    }

    load_color_table (model);

    return G_OBJECT (model);
} 
```

# mysql - 按类别获取具有第二个最近时间戳的行？

> ID：10722579
> 
> 赞同：0
> 
> 时间：2012-05-23T14:56:45.243
> 
> 标签：mysql, sql

我有一个 MySQL 表（称为`formstatus`），它有 4 列：`id`、`form`、`status`和`timestamp`，`id`作为主键，`form`和`status`一起唯一。我想获得`status`具有第二个最近时间戳的行集（特别是）`form`。我试过

```
SELECT form, status FROM (
  SELECT form, status, timestamp
  FROM formstatus
  WHERE timestamp < max(timestamp)
  GROUP BY form) as a
WHERE timestamp = max(timestamp)
GROUP BY form 
```

但它不起作用，因为显然在 where 子句中不允许聚合。那么，是否有一个查询*可以*返回我正在寻找的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T15:04:53.230

试试这个查询 -

```
SELECT
  t1.*, COUNT(*) pos
FROM formstatus t1
  LEFT JOIN formstatus t2
    ON t2.form = t1.form AND t2.timestamp >= t1.timestamp
GROUP BY
  t1.form, t1.timestamp
HAVING
  pos = 2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T15:02:51.757

生成错误是因为您不能在`WHERE`子句中使用聚合。尝试将您的条件移至`HAVING`子句。

```
GROUP BY form
HAVING timestamp < max(timestamp) 
```

# java - 如何将 JSON 数组转换为 Java 列表。我正在使用斯文森

> ID：10722587
> 
> 赞同：5
> 
> 时间：2012-05-23T14:57:10.750
> 
> 标签：java, json, parsing, svenson

我正在尝试将多个相同类型的对象转换为`List`Java 中的一个。例如，我的 json 将是：

```
{
    "Example": [
        {
            "foo": "a1",
            "bar": "b1",
            "fubar": "c1"
        },
        {
            "foo": "a2",
            "bar": "b2",
            "fubar": "c2"
        },
        {
            "foo": "a3",
            "bar": "b3",
            "fubar": "c3"
        }
    ]
} 
```

我有一堂课：

```
public class Example {
    private String foo;
    private String bar;
    private String fubar;
    public Example(){};
    public void setFoo(String f){
        foo = f;
    }
    public void setBar(String b){
        bar = b;
    }
    public void setFubar(String f){
        fubar = f;
    }
...
} 
```

我希望能够将我得到的 json 字符串转换为`Example`对象列表。我想做这样的事情：

```
JSONParser parser = new JSONParser();
parser.addTypeHint(".Example[]", Example.class);
List<Example> result = parser.parse(List.class, json); 
```

这样做我得到一个错误：

```
Cannot set property Example on class java.util.ArrayList 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T17:01:35.370

您无法将此 json 转换为，`List`但您可以将其转换为`Map`.
查看您的 json `String`：

```
...
"Example": [
        {
            "foo": "a1",
            "bar": "b1",
            "fubar": "c1"
        },
        {
            "foo": "a2",
            "bar": "b2",
            "fubar": "c2"
        },
        ...
]
} 
```

**这里“示例”是键（字符串），值是示例的列表对象。**

试试这个：

```
 parser.addTypeHint("Example[]", Example.class);
 Map<String,List<Example>> result1 = parser.parse(Map.class, json);
 for (Entry<String, List<Example>> entry : result1.entrySet()) {
     for (Example example : entry.getValue()) {
          System.out.println("VALUE :->"+ example.getFoo());
     }
 } 
```

完整代码`Example`：

```
import java.util.List;
import java.util.Map;
import java.util.Map.Entry;

import org.svenson.JSONParser;

public class Test {
    public static void main(String[] args) {
        JSONParser parser = new JSONParser();
        parser.addTypeHint(".Example[]", Example.class);
        String json = "{" + "\"Example\": [" + "{" + "\"foo\": \"a1\","
                + "\"bar\": \"b1\"," + "\"fubar\": \"c1\"" + "}," + "{"
                + "\"foo\": \"a2\"," + "\"bar\": \"b2\"," + "\"fubar\": \"c2\""
                + "}," + "{" + "\"foo\": \"a3\"," + "\"bar\": \"b3\","
                + "\"fubar\": \"c3\"" + "}" + "]" + "}\"";
        parser.addTypeHint("Example[]", Example.class);
        Map<String, List<Example>> result1 = parser.parse(Map.class, json);
        for (Entry<String, List<Example>> entry : result1.entrySet()) {
            for (Example example : entry.getValue()) {
                System.out.println("VALUE :->" + example.getFoo());
            }
        }
    }
}

public class Example {
    private String foo;
    private String bar;
    private String fubar;
    public Example(){}
    public void setFoo(String foo) {
        this.foo = foo;
    }
    public String getFoo() {
        return foo;
    }
    public void setBar(String bar) {
        this.bar = bar;
    }
    public String getBar() {
        return bar;
    }
    public void setFubar(String fubar) {
        this.fubar = fubar;
    }
    public String getFubar() {
        return fubar;
    }
} 
```

**输出**：

```
VALUE :->a1
VALUE :->a2
VALUE :->a3 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T18:47:12.183

我通过将我的 JSON 修改为以下形式来解决它：

```
[
    {
        "foo": "a1",
        "bar": "b1",
        "fubar": "c1"
    },
    {
        "foo": "a2",
        "bar": "b2",
        "fubar": "c2"
    },
    {
        "foo": "a3",
        "bar": "b3",
        "fubar": "c3"
    }
] 
```

然后我使用了java代码：

```
JSONParser parser = new JSONParser();
    ArrayList list = parser.parse(ArrayList.class, json);
    List<Example> result = new ArrayList<Example>();
    for(int i = 0 ; i < list.size() ; i++){
        HashMap<String, String> map = (HashMap) list.get(i);
        Example example = new Example();
        example.setFoo(map.get("foo"));
        example.setBar(map.get("bar"));
        example.setFubar(map.get("fubar"));
        result.add(example);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-05T05:03:50.423

我有一个这样的jsonstring：

```
[
{"author":"amahta","bookId":1,"bookName":"name"},
{"author":"amahta2","bookId":2,"bookName":"name2"}
] 
```

并通过这段代码将其转换为列表：

```
List<BookVO> listdata = new ArrayList<BookVO>();

JSONArray jArray = JSONArray.fromObject(booklist);
if (jArray != null) {
    for (int i = 0; i < jArray.size(); i++) {
        JSONObject obj = JSONObject.fromObject(jArray.get(i));
        listdata.add(new BookVO(Long.valueOf(obj.get("bookId")), obj.get("bookName"), obj.get("author")));
    }
} 
```

我使用 net.sf.json-lib jar 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-16T06:42:16.107

```
 String paymentMethod = "[{\"paymentType\":\"google_iap\",\"msisdn\":1486890084928,\"operator\":\"maroc_ma\",\"paymentMethod\":\"maroc_ma\",\"reactivationEnabled\":true }]";

     PaymentMethod mop = null;
        try {
            mop = mapper.readValue(paymentMethod, PaymentMethod.class);
        } catch (Exception e) {
            logger.warn("Error while parsing paymentMethod = " + paymentMethod + " \n" + e);
        }

     List<PaymentMethod> result = new ArrayList<PaymentMethod>();
     result.add(mop);

     billingInfo.setPaymentMethods(result); 
```

# javascript - 如何将键盘事件绑定到 div 元素？

> ID：10722589
> 
> 赞同：25
> 
> 时间：2012-05-23T14:57:13.947
> 
> 标签：javascript, jquery

有没有办法在 DIV 元素上监听键盘事件？

我的代码：

```
​&lt;div id="div" style="height:50px" class="ui-widget-content"></div>
<input id="input">​​​​​​​​​​​​​​

​$('#div,#input').keyup(function(event){
    console.log(event.keyCode);
});​​​​​​ 
```

实际上，代码仅针对输入触发，我可以为 div 处理它吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-23T15:00:31.087

您可以添加一个`tabindex`来`div`捕获这样的键盘事件

```
<div id="div" style="height:50px" class="ui-widget-content" tabindex="0"></div> 
```

喜欢在这里[回答](https://stackoverflow.com/a/148444/344304)。

[工作小提琴](http://jsfiddle.net/joycse06/nt2Lb/)

[参考](http://www.w3.org/WAI/GL/WCAG20/WD-WCAG20-TECHS/SCR29.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-23T15:01:23.447

添加一个`tabindex`，它应该工作

```
<div id="div" style="height:50px;" class="ui-widget-content" tabindex="1"></div> 
```

[**演示**](http://jsfiddle.net/6uzcN/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T15:02:15.570

您需要将 tabindex 添加到 div。

看到这个小提琴：

[http://jsfiddle.net/w2Y4d/1/](http://jsfiddle.net/w2Y4d/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T15:01:28.593

为什么不将输入放在 div 中，然后简单地找到 $('#input').closest('div') ？

否则，如果您的示例是您的输入如何与您的 div 相关的模式，那么只需 $('#input').prev() ？

# rhomobile - rhoconnect webservice登录需要

> ID：10722593
> 
> 赞同：0
> 
> 时间：2012-05-23T14:57:24.663
> 
> 标签：rhomobile

我是 Rhomobile 的新手，我想使用 Rhoconnect 登录网络服务，任何人都可以帮助我如何实现这一点。

我在设置控制器中尝试过：

```
 def do_login
     if @params['username'] and @params['password']
       begin
         SyncEngine.login(@params['username'], @params['password'], (url_for :action => :login_callback) )
         @response['headers']['Wait-Page'] = 'true'
         redirect :action => :index
       rescue Rho::RhoError => e
         @msg = e.message
         render :action => :login
       end
     else
       @msg = Rho::RhoError.err_message(Rho::RhoError::ERR_UNATHORIZED) unless @msg && @msg.length > 0
       render :action => :login
     end
   end 
```

在哪里`SyncEngine.login(@params['username'], @params['password'])`调用 sourecadapter 方法`login`；我在哪里打电话

```
 def login(username, password)
      user_info = {:username => username, :password => password }
      response = RestClient.get(@base+@params['username']+@params['password'])
      result = RestClient.post(:url => "my-webservice" ) 
      @msg=result["body"] 
      render :action => :index 
 end 
```

我试过了：

```
 class Application < Rhoconnect::Base
   class << self
     def authenticate(username,password,session)
       result = RestClient.post(:url => "mywebservice" )
       true # do some interesting authentication here...
     end
 end 
```

但我什么都没有……请给我一些想法；如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:44:13.643

来自 Rhodes 应用程序的 SyncEngine.login 调用将调用 RhoConnect 应用程序的 application.rb 中的 authenticate(username, password, session) 方法。然后，您可以编写 authenticate 方法来调用您的用户身份验证实现，如下所示：

```
def authenticate(username, password, session)
    # for example
    resp = RestClient.post(:url => "mywebservice", :login => {:username => username, :password => password})

    #parse resp as needed and return the result either true or false
    # i.e. status contains value true or false in the response body 
    result = JSON.parse(resp.body)['status']
end 
```

希望有帮助。

# ruby - 有没有一种简单的方法可以在 Ruby 中用任意基数表示整数？

> ID：10722598
> 
> 赞同：3
> 
> 时间：2012-05-23T14:57:41.310
> 
> 标签：ruby, erlang, integer

Erlang 有一种非常好的语法来表示具有任意基数的整数。是`base#number`。

例子：

```
> 2#101010.
42
> 16#2A.
42 
```

Ruby中有类似的东西吗？我已经知道了[`#to_i(base=10)`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-to_i)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T02:22:08.457

一种简单但不是非常有效或安全的方法来为任意基执行此操作：

```
class Fixnum
  def as_base(b)
    to_s.to_i(b)
  end
end

101010.as_base(2)
42 
```

（而且你必须做同样的`class Bignum`事情来处理任意大的整数文字......）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T15:02:55.070

有一个很好 的可能文字[列表](http://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Literals#Numerics) ，但基本上可以归结为

```
10 # base 10 by default
0b1010 # base 2
012 # base 8
0xa # base 16 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-23T15:01:14.397

除了受 C 启发的十六进制数字、二进制或八进制前导`0x`符号之外，语法中没有任何内容。不过在实践中效果很好。`0b``0``to_i`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-23T15:09:54.887

如果你有一个 int，你可以用 to_s 以任何基数表达它，就像字符串上的 to_i 一样。

```
irb(main):013:0> puts 255.to_s(2)
11111111 
```

# tree - 确定在 Google Apps 脚本树中选择了哪个 TreeItem

> ID：10722601
> 
> 赞同：2
> 
> 时间：2012-05-23T14:58:17.763
> 
> 标签：tree, google-apps-script

我第一次在 Google Apps 脚本中实现 treeView 并遇到了一些麻烦。

选择 treeItem 时，此处理程序确实会被触发

```
tree.addSelectionHandler(app.createServerSelectionHandler("restClick")); 
```

我期望能够识别处理程序中的选定项目

```
function restClick(e) {
  var app = UiApp.getActiveApplication();
  Logger.log(e.parameter.source);
  var tree = app.getElementById(e.parameter.source);
  Logger.log(tree.getId());
  return app;
} 
```

上面的代码正确识别了树对象-但是我不知道如何获取 selectedItem-没有适当的方法，例如 getSelectedItem() 并且 (e) 没有有用的属性可以帮助

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T15:36:15.280

这是一个[已知问题](http://code.google.com/p/google-apps-script-issues/issues/detail?id=307)。您应该点击链接并在此问题上加注星标，以跟踪更新并为它投票。如果这对您来说真的很重要，那么在问题评论中，有一个有点麻烦的解决方法的解释。

“树对象”应该像 Apps 脚本上的所有其他小部件一样工作，有一个`setName`方法可以让我们获取处理程序事件参数项名称或索引（在使用 将树作为回调元素添加到处理程序中之后`addCallbackElement`），例如

```
tree.setName('mytree').addSelectionHandler(app.createServerSelectionHandler("restClick").
    addCallbackElement(tree)); 
```

但这不起作用，如错误报告中所述。

# c++ - 为什么我需要在模板继承中使用范围解析？

> ID：10722606
> 
> 赞同：3
> 
> 时间：2012-05-23T14:58:53.003
> 
> 标签：c++, oop, templates, inheritance

如果我使用类，一切都很好：

```
struct Base1 {
  int value;
  Base1(int value) : value(value) { }
};

struct Test1 : public Base1 {
  int getValue() { return value; }  
  Test1(int value) : Base1(value) { }
}; 
```

但需要使用模板范围解析：

```
template <typename T>
struct Base {
  T value;
  Base(T value) : value(value) { }
};

template <typename T>
struct Test : public Base<T> {
  typedef Base<T> parent;
  T getValue() { return parent::value; }  // why do I need to use parent:: here?
  Test(T value) : parent(value) { }
}; 
```

如果没有范围解析，我会收到错误`'value' was not declared in this scope`（使用 gcc 编译器）。为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T15:07:20.203

因为编译器不知道`value`依赖于模板参数。因此，它尝试在第一次传递期间（在实例化模板之前）解决它，但失败了。

这两个选项是使用范围分辨率，就像你一样，或者使用`this->value`. 由于`this`始终是从属名称，因此这将强制在第二遍期间进行评估。

见[http://ideone.com/07odY](http://ideone.com/07odY)

编辑：至于为什么需要这样做：

虽然`Test<T>`派生自`Base<T>`，但由于模板专业化，您可以`Base<std::string>`（例如）完全不同于普通的`Base<T>`，并且没有名为 的成员`value`，或者它可能是不同的类型，或任何其他类型。通过强制它成为依赖名称，编译器被迫等到它知道所涉及的实际类型后再进行检查。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T15:02:27.190

因为没有其他方法可以告诉编译器（因为它没有在`Test`s 主体中定义）这`value`是一个依赖名称。您正在强迫编译器说“好吧！当我说type*有*这样一个成员时，请相信我。”`value``T`

# php - JQuery Resizable 实现不起作用

> ID：10722615
> 
> 赞同：2
> 
> 时间：2012-05-23T14:59:38.703
> 
> 标签：php, jquery, html, jsp

我正在尝试实现可调整大小的 JQueryUI。下面是我的暂定演示，稍后我将在实际代码中实现它。请帮我解决它。它不工作。

```
<head>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.8.20/themes/base/jquery-ui.css" type="text/css" media="all" />
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<style>
    #resizable { width: 150px; height: 150px; padding: 0.5em; }
    #resizable h3 { text-align: center; margin: 0; }
    .ui-resizable-helper { border: 1px dotted gray; }
</style>
<script>
    $(function() {
        //var a = $("#resizable").html();
        //alert(a);
        $("#resizable").resizable();
    });
</script>
</head>
<body>

<div id="demo-frame">
    <meta charset="utf-8">

    <div class="demo">  
        <div class="ui-widget-content ui-resizable" id="resizable">
            <h3 class="ui-widget-header">Resizable</h3>
            <div class="ui-resizable-handle ui-resizable-e" style="z-index: 1000;"></div>
            <div class="ui-resizable-handle ui-resizable-s" style="z-index: 1000;"></div>
            <div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se" style="z-index: 1000;"></div>
        </div>
    </div>
</div>

</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T15:08:28.653

似乎是您在 div 中的 div 导致了问题。[我在这个 jsFiddle http://jsfiddle.net/ta9N4/](http://jsfiddle.net/ta9N4/)上评论了他们，它似乎工作正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T15:13:41.740

该方法`resizable()`来自 jQuery UI API。而且您没有在 html 页面中包含 jQueryUI。
去[这里](http://jqueryui.com/download)下载它（或获取这个文件的链接），并像你为 jQuery 所做的那样包含它（`<script>`标签）。

# objective-c - SKPaymentQueue finishTransaction：在网络完成块内？

> ID：10722630
> 
> 赞同：4
> 
> 时间：2012-05-23T15:00:20.250
> 
> 标签：objective-c, ios, xcode, in-app-purchase

这个问题让我头疼了一段时间。

我的应用程序在自动更新订阅模型上运行。我有一个 SKPaymentQueue transactionObserver，当通过 Apple 成功完成购买时会收到通知，此时我将 Apple 收据发送到我的服务器以进行验证。一旦我验证了它，我就会向我的应用程序发送一个成功调用，该应用程序向用户提供内容，然后在事务上调用 finishTransaction: （[根据文档，](http://developer.apple.com/library/mac/#documentation/StoreKit/Reference/SKPaymentQueue_Class/Reference/Reference.html)这是正确的操作过程）。

问题是，恐怕要等这么久才能调用finishTransaction：在Apple 期望它被调用（3-4 秒）之后，它会禁止事务实际上“完成”。如果我在我的应用程序中成功购买（并且完成交易：已被调用），然后终止我的应用程序（在 Xcode 中“停止”）并再次运行它，在启动时将立即有一个、两个、三个，有时是四个或者在 UI 加载之前 SKPaymentQueue 中的五个交易。

这是在与 Apple 的交易完成后对我的服务器的调用：

```
-(void)completeTransaction:(SKPaymentTransaction *)transaction
{
    NSLog(@"complete transaction");
    [self sendReceiptToServer:transaction];
}

-(void)sendReceiptToServer:(SKPaymentTransaction*)transaction
{
    NSString *rawReceiptData = [[NSString alloc] initWithData:transaction.transactionReceipt encoding:NSUTF8StringEncoding];
    NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:rawReceiptData, @"receipt", [[UserSingleton sharedInstance] memberID], @"member", nil];

    NSMutableURLRequest *request = [[HTTPRequestSingleton sharedClient] requestWithMethod:@"POST" path:cFunctionAddCredits parameters:params];   
    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {

        NSLog(@"%@", JSON);
        NSString *creditsString = [JSON valueForKey:@"limit"];
        int numberOfCredits = [creditsString intValue];
        [self provideContent:transaction.payment.productIdentifier withNumberOfCredits:numberOfCredits];
        [[SKPaymentQueue defaultQueue] finishTransaction:transaction];

    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
        NSLog(@"failed to send receipt to server");  
        [[NSNotificationCenter defaultCenter] postNotificationName:cFailedToSendReceiptToServer object:transaction];
        [[SKPaymentQueue defaultQueue] finishTransaction:transaction];

    }];

    [operation start];
} 
```

如您所见，`[[SKPaymentQueue defaultQueue] finishTransaction:transaction];`在对我的服务器的请求的成功或失败块内被调用。这会以某种方式出现问题吗？

****编辑**** 如果我在将收据发送到我的服务器进行验证之前调用它似乎不会发生此问题`SKPaymentQueue:finishTransaction:`，这使我相信在网络请求块内调用它确实会导致问题。但这不是处理事情的正确方法，所以我仍然卡住了。

****编辑 2* *** 事实证明，在启动应用程序时，交易有时仍然会“恢复”，即使我`finishTransaction:`在将收据发送到我的服务器之前拨打电话也是如此。这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:42:48.313

经过数周的“幻影”购买，我终于意识到发生了什么。这不是`finishTransaction:`AFNetworking 的错。

应用程序启动时发生的交易实际上是 Apple 执行的自动更新过程的一部分。Apple Sandbox 中 1 个月订阅的[生命周期为 5 分钟](https://itunesconnect.apple.com/docs/iTunesConnect_DeveloperGuide.pdf#page=157)，因此在启动我的应用程序时，我的队列中会有 1、2 或 3 个事务，具体取决于我启动应用程序后是 5、10 还是 15 分钟最后的。

我不得不调整一些服务器端设置，以确保续订不会被视为与新订阅相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T15:09:43.550

完成交易需要多长时间都没关系..您需要打电话`[[SKPaymentQueue defaultQueue] finishTransaction:transaction];`以防万一您将内容交付给用户（在您成功完成订阅的情况下）。

# r - 在 ggplot2 中使用其他颜色

> ID：10722632
> 
> 赞同：0
> 
> 时间：2012-05-23T15:00:27.643
> 
> 标签：r, ggplot2

我的数据集如下所示： x:

```
Date       variable     value
1/1/2012   A             10
1/1/2012   B             10
1/1/2012   C             10
1/1/2012   D             10
1/2/2012   A             10
1/2/2012   B             10
1/2/2012   C             10
1/2/2012   D             10
1/3/2012   A             10
1/3/2012   B             10
1/3/2012   C             10
1/3/2012   D             10 
```

我正在这样做：

```
rhg_cols1<- c("#000000","#F8766D","#7CAE00","#00BFC4","#C77CFF" ) 
ggplot(x, aes(Date, value, fill = variable, colour=variable)) +     geom_point()+     scale_fill_manual(values = rhg_cols1) 
```

我仍然看到默认颜色。谁能告诉我有什么问题？更好的是，我喜欢说低=红色，高=黑色，而不是像 rhg_cols1 中那样给出特定的颜色。

非常感谢任何输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:04:27.000

你想用

```
+ scale_colour_manual(values=rhg_cols1) 
```

要设置低和高颜色，您可以使用该`scale_XXXX_gradient()`功能。

```
+ scale_colour_gradient(low="#000000", high="#C77CFF") 
```

一个使用的例子`scale_XXXX_gradient`是[here](http://learnr.wordpress.com/2010/01/26/ggplot2-quick-heatmap-plotting/)。

# servlets - 过滤器递归运行

> ID：10722638
> 
> 赞同：0
> 
> 时间：2012-05-23T15:00:40.407
> 
> 标签：servlets, servlet-filters

我写了一个 servlet 过滤器，它正在递归运行。

我想在会话中未设置特定属性时控制登录页面。

实际上登录页面与其他页面具有相同的 url 模式

```
<filter>
        <filter-name>AppFilter</filter-name>
        <filter-class>web.AppFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>AppFilter</filter-name>
        <url-pattern>/faces/*</url-pattern>
    </filter-mapping>
</filter> 
```

请告诉我 doFilter 不应递归运行的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:06:38.233

如果请求 URI 与登录页面本身匹配，只需检查过滤器，这样它就不会被重定向。

```
String loginURI = request.getContextPath() + "/faces/login.xhtml";

if (user != null || request.getRequestURI().equals(loginURI)) {
    chain.doFilter(request, response);
}
else {
    response.sendRedirect(loginURI);
} 
```

# html - 将文本浮动到右侧 CSS

> ID：10722646
> 
> 赞同：2
> 
> 时间：2012-05-23T15:01:00.967
> 
> 标签：html, css

如何在此处浮动此文本： ![在此处输入图像描述](../Images/a5b3242683759f8c6840f69c162cbc40.png)

HTML：

```
<div id="rightSide">
    <legend>Note:</legend>
    <p> If selecting recurrence please specifiy when the recurrence  ends with the Final Date (the last and final date of the event) field.</p>
</div> 
```

CSS：

```
#rightSide {
    background-color:#eee;
    width:20em;
    padding:5px;
    padding-right:-20em;
    margin:0 auto;
    float:right;
    border:1px solid #CCC;
    font:normal 12px Arial;
    color:#666666
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:05:29.327

在“Title”之后添加这个 div 并使除“Note” div 之外的所有其他潜水都向左浮动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T19:29:48.433

我知道这已经得到解答，但我想扔掉我用来做布局的东西，叫做[http://960.gs 。](http://960.gs)它将处理必须清除这些浮动，以及很好地将所有东西放在你想要的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T19:32:21.710

制作左列和右列`display:inline-block;vertical-alignment:top;`

# arrays - 数组中的 C 联合多态性

> ID：10722647
> 
> 赞同：7
> 
> 时间：2012-05-23T15:01:01.557
> 
> 标签：arrays, gcc, polymorphism, unions

鉴于以下情况：

```
typedef struct{
...
...
} A;

typedef struct{
...
... 
} B;

typedef union __attribute__((transparent_union)) {
    A a;
    B b;
} C; 
```

如果我声明一个函数

```
myMethod(C){
...
} 
```

以下是合法的，没有明确的强制转换：

```
A myA;
B myB;

meMethod(myA);
myMethod(myB); 
```

（来自：“ [c unions and polymorphism](https://stackoverflow.com/questions/10718150/c-unions-and-polymorphism) ”）

但是，为什么不允许以下情况：

```
C cArray[2];
c[0]=myA;
c[1]=myB; 
```

这会在没有显式转换的情况下给出不兼容的类型错误。有什么办法可以避免显式转换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T15:24:57.877

[GCC 文档](http://gcc.gnu.org/onlinedocs/gcc/Type-Attributes.html)指出：

> 此属性附加到联合类型定义，指示具有该联合类型的任何函数参数都会导致对该函数的调用以特殊方式处理。

换句话说，透明度仅适用于函数参数。

# c# - 单元测试 OpenIdRelyingParty

> ID：10722648
> 
> 赞同：0
> 
> 时间：2012-05-23T15:01:01.807
> 
> 标签：c#, asp.net-mvc-3, dependency-injection, openid, dotnetopenauth

如果这是一个重复的问题，我深表歉意（我没有找到类似的问题）。我正在尝试构建一个 OpenId 身份验证服务并对其进行单元测试，目前我有以下设置：

```
public class OpenIdAuthenticationService : IAuthenticationService
{
    private IConfigurationService   _configService;
    private OpenIdRelyingParty      _openIdRelyingParty;

    public OpenIdAuthenticationService(IConfigurationService configService)
    {
        _configService      = configService;
        _openIdRelyingParty = new OpenIdRelyingParty();            
    }
} 
```

显然 OpenIdRelyingParty 需要访问 HttpContext，有没有办法模拟 OpenIdRelyingParty 并将其注入服务？或者也许可以模拟 HttpContext 并以某种方式将其提供给 OpenIdRelyingParty ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:06:24.143

我会，因为您已经在这样做，所以`OpenIdRelyingParty`在您使用配置服务时注入您的构造函数。

除此之外，您可以在单元测试中模拟 HttpContext 。`HttpContext.Current`有一个 setter，所以将它设置为 mock/stub `HttpContextBase`。这是一个使用[NSubstitute](http://nsubstitute.github.com/)和 NUnit 的示例：

```
[TearDown]
public void CleanUp()
{
    HttpContext.Current = null;
}

[Test]
public void FakeHttpContext()
{
    var context = Substitute.For<HttpContextBase>();
    var request = Substitute.For<HttpRequestBase>();
    context.Request.Returns(request);
    //Do any more arragement that you need.

    //Act

    //Assert
} 
```

不过，这对我来说有点代码味道。它正在测试依赖项的依赖关系（或者无论兔子洞有多远）。但是，当重构不是一种选择时，它很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T15:35:29.020

要为 OpenIdRelyingParty 模拟 HttpContext，您应该修改该类的代码。即使你会浪费一些时间来嘲笑它，因为它是一个密封的类（但你可以使用[MOCKWCF](http://wcfmock.codeplex.com/)并非不可能）。

我认为最好为 **OpenIdRelyingParty**制作一个包装器或适配器。像：

```
public class OpenIdRelyingPartyWrapped
{
    private OpenIdRelyingParty openIdRelyingPartyTarget;
    ....
    public virtual IAuthenticationRequest CreateRequest(string text)
    {
        return this.openIdRelyingPartyTarget.CreateRequest(text);
    }
    ...
} 
```

然后，您将能够根据需要模拟它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T05:33:34.960

`OpenIdRelyingParty`可以通过使用接受 an 的方法重载在单元测试中使用`HttpRequestBase`，这是完全可模拟的。只有不将其作为参数的方法才需要`HttpContext.Current`.

# git - 将特定的 Git 提交导出为补丁

> ID：10722650
> 
> 赞同：4
> 
> 时间：2012-05-23T15:01:04.093
> 
> 标签：git, bash

我正在尝试将多个提交（在提交消息中包含特定票号 1234 的提交）导出到补丁文件。

*编辑*工作脚本在[https://github.com/amenk/SelfScripts/blob/master/git-extract-patches](https://github.com/amenk/SelfScripts/blob/master/git-extract-patches)

这就是我所拥有的

```
#!/bin/bash -x
commits=`git log --pretty=oneline | grep "#1234" | cut -f1 -d" "`
no=1;
for COMMIT in $commits
do
    git format-patch -1 $COMMIT --start-number=$no
    no=$(($no+1))
done 
```

但由于某种原因，执行 git format-patch 失败：

```
$ ./getpatches.sh 
++ git log --pretty=oneline
++ grep '#6809'
++ cut -f1 '-d '
+ commits='da591d66f05513488ee06857edc9d24a046c179d
4fd781da9cc503b961f8e4c42bbb136d9e3c1806
3a9311f5507f91f830b44673c57f672e7aabaac0'
+ no=1
+ for COMMIT in '$commits'
+ git format-patch -1 'da591d66f05513488ee06857edc9d24a046c179d' --start-number=1
fatal: ambiguous argument 'da591d66f05513488ee06857edc9d24a046c179d': unknown revision or path not in the working tree.
Use '--' to separate paths from revisions 
```

当我`git format-patch -1 'da591d66f05513488ee06857edc9d24a046c179d' --start-number=1`手动调用时，一切都很好。

*编辑：*

我认为这与引号有关。如果我将 a 添加`git log | grep $COMMIT`到循环中，则会收到以下错误：

```
+ grep '992ab41d3539539bd609209beed33a9de2f4277a'
grep: Unmatched [ or [^ 
```

另一个有趣的效果是，如果我`grep '992ab41d3539539bd609209beed33a9de2f4277a'`在 for 循环中硬编码，命令输出（因为`-x`选项 for`bash`没有引号，它可以工作。

```
 + grep 992ab41d3539539bd609209beed33a9de2f4277a 
```

这些报价来自哪里，我该如何摆脱它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T10:41:14.690

我的 git 隐式使用该`--color`选项，因此`$COMMIT`字符串包含一些颜色代码。所以这搞砸了解析。有趣的是，我的错误消息中也包含了颜色。

但是您在终端中看不到这个（它只是彩色的），并且在粘贴到堆栈溢出后也看不到。

解决方案是：

```
提交=`git log --no-color --pretty=oneline | grep "#1234" | 剪切-f1 -d""`

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T11:54:45.747

有一种更简单的获取提交列表的方法：

```
git log --format=%H --grep "CAT-300" 
```

# javascript - javascript/jQuery中函数定义的区别

> ID：10722651
> 
> 赞同：4
> 
> 时间：2012-05-23T15:01:10.663
> 
> 标签：javascript, jquery

版本 1：

```
function add(){
var a = 2;
...
...
...
} 
```

版本 2：

```
$(function(){
var ...
..
..
}); 
```

两个版本的主要区别在哪里？对于版本 2，它没有函数名称。如果它只是简单地运行函数中的代码，为什么不直接删除`$function(){..};`. 这真的让我感到困惑，因为如今，许多脚本都是以第 2 版的风格编写的。请帮助澄清我的困惑。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T15:03:57.660

示例 1 定义了一个名为 的函数`add`，而示例 2 只是将一个匿名函数传递给 jQuery 函数。

`$(function() {...});`语法是 的简写，`$(document).ready(function() {...});`它将一个函数作为其参数，然后在 DOM 准备好时执行该函数。这用于确保您想要在 Javascript 中使用的元素在执行代码之前确实存在。

编辑以解决以下评论：

`.click()`jQuery 函数有两个用途。如果您传递一个函数，那么它会创建一个额外的单击事件处理程序，该处理程序将在触发事件时运行该函数。如果您不传递函数，那么它将触发已附加到 jQuery 对象中元素的所有单击事件处理程序。所以，是的，你可以`.click()`在没有函数的情况下调用，但它不会做同样的事情。

您不能执行以下操作：

```
$(document).ready(var foo = 2;...); 
```

因为这会给你一个语法错误。但是，您可以以通常的方式定义一个函数，然后将其传递*给*调用`$(document).ready()`：

```
function foo() {
     var foo = 2;
     ...
}

$(document).ready(foo); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T15:09:01.477

示例 1 和示例 2 完全不同。jQuery IS javascript，所以函数定义是一样的。

`$(function(){...`只是一个简写，`$(document).ready(function(){...`而示例实际上正在生成一个名为 的新函数`add`。

您可以在函数中生成 add 函数，`ready`如下所示：

```
 $(function(){

       function add(){
            var foo = 1;               
       }

 }); 
```

jQuery 不是一种独立的新语言，其定义和语法与 javascript 不同，它是使用 javascript 的语法和定义用 javascript 编写的工具包。

将 jQuery 本身视为一个大函数，一个定义为 $ ... 的函数，因此`function add(){}`jquery 只是一个名为 $ 的函数`function $(){}`。您还可以使用与普通 javascript 函数相同的语法传递 jQuery 参数。

```
 function add(arg){
          //do something with arg
      }
      add('#elem');

      function $(arg){
          //do something with arg
      }
      $('#elem'); 
```

你看？jQuery 只是一个大而复杂的函数，我们可以传递多种类型的参数，并返回许多有用的工具。但是语法和定义与传统的javascript没有什么不同。

```
 function add(arg){
           var added = arg + 12;
           return this.alertAdded = function(){
                alert(added);
           }
      }

      add(30).alertAdded(); // will alert 42
      //vs
      $('#elem').fadeOut(); // same syntax but referring to very different functionality. 
```

这是 jQueryish 语法的示例，它是普通的普通旧 JS。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T15:06:37.100

```
function add(){
var a = 2;
...
...
...
} 
```

是一个简单的js函数。

```
$(function(){
var ...
..
..
}); 
```

是 jQuery Document.ready 的快捷方式：

```
$(document).ready () {}; 
```

您可能还想问：

```
(function($){
var ...
..
..
})(jQuery); 
```

这给出了一个封闭`$`符号 - 所以你可以使用美元。（可能已经加载了其他库）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T15:04:00.133

`$(function(){})`实际上是将函数包装在里面`$(document).ready()`；这样代码在加载 DOM 之前不会运行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-23T15:07:40.540

第一个版本将该函数添加到 window 命名空间，而第二个版本的范围仅在`$(function(){...`' 范围内，因此无法从括号外的代码访问。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-23T15:06:14.633

我相信这`$(function()`是 jQuery 中文档加载的简写。

如果你想创建一个“jQuery 函数”，你需要这样做：

```
jQuery.fn.yourfunctionname = function() {
     //code in here
} 
```

所以简而言之，你的第一个函数实际上定义了一个被调用的函数`add`，下一个函数是这个的简写：

`$(document).ready(function(){`

# sql - 3表Linq查询

> ID：10722654
> 
> 赞同：-1
> 
> 时间：2012-05-23T15:01:19.993
> 
> 标签：sql, linq, sql-server-ce

我在 SQLCE 数据库上有 3 个关系表。

产品 ProductCategory ProductPhoto

---------- ---------------------- -----

PId CatId PhotoId

名称 名称 值

CatId PID

我需要，列出 ProductCategories 和 Linq 的第一张产品照片。
如果无法使用 Linq，请使用 sql 代码。
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:15:30.350

```
from pc in ProductCategories
let photo = pc.Products.SelectMany(p => p.Photos).FirstOrDefault()
select new {pc, photo}; 
```

# mysql - 从 MySQL 中的存储过程创建一个新表

> ID：10722658
> 
> 赞同：0
> 
> 时间：2012-05-23T15:01:37.753
> 
> 标签：mysql, database, stored-procedures

我在 mySQL 中有一个带有参数的存储过程，我如何在存储过程中创建一个新表，将表名作为参数传递给存储过程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T15:41:41.733

可以从过程中创建表和其他一些对象 -

```
CREATE PROCEDURE procedure1(IN tableName VARCHAR(255))
BEGIN
  SET @sql = CONCAT('CREATE TABLE ', tableName, '(column1 INT(11))');
  PREPARE stmt FROM @sql;
  EXECUTE stmt;
  DEALLOCATE PREPARE stmt;
END 
```

有关支持的 DML 语句的更多信息，请单击此处 -[准备语句的 SQL 语法](http://dev.mysql.com/doc/refman/5.5/en/sql-syntax-prepared-statements.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T09:41:15.950

使用这种方式动态创建表。

```
DECLARE @tableName VARCHAR(50)
DECLARE @fieldType VARCHAR(50)
DECLARE @fieldName VARCHAR(50)
SET @tableName='abc'
SET @fieldType ='int'
SET @fieldName='id'

EXEC('CREATE TABLE '+@tableName+'( '+@fieldName+' '+@fieldType+' )') 
```

希望我的回答对你有所帮助。谢谢你

# java - 如何验证地图中的集合

> ID：10722660
> 
> 赞同：15
> 
> 时间：2012-05-23T15:02:05.753
> 
> 标签：java, validation, hibernate-validator

我`@Valid`对 JSR-303 的注释有疑问。该[注释](http://docs.jboss.org/hibernate/validator/4.3/reference/en-US/html_single/#d0e425)适用于普通列表或集合，但我正在尝试验证包含列表的地图，即

```
@Valid
HashMap<String, ArrayList<Object1>> map; 
```

在这种情况下，`Object1`不会验证类的实例。有没有一种方便的方法可以递归地执行此操作，而无需遍历每个对象并手动验证它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-23T15:22:38.350

当映射值本身是列表时，规范没有指定验证行为。

来自[JSR 303 规范](http://download.oracle.com/otndocs/jcp/bean_validation-1.0-fr-oth-JSpec/)：

> 迭代器提供的每个对象都经过验证。对于 Map，每个 Map.Entry 的值都经过验证（密钥未经过验证）。

由于您的案例中的值是一个列表，它没有 @Valid 注释，因此它不会被处理。要解决这个问题，您可以：

将包含的列表包装在另一个 bean 中，强制对列表进行注释处理。

```
public class ListHolder<T extends Iterable> {
    @Valid
    public T wrappedList;
} 
```

或者，您可以编写一个[自定义验证器](http://musingsofaprogrammingaddict.blogspot.com/2009/02/getting-started-with-jsr-303-bean.html)来处理您的复杂地图。像这样的东西：

```
@Target({ METHOD, FIELD, ANNOTATION_TYPE })
@Retention(RUNTIME)
@Documented
@Constraint(validatedBy = ValidMapValidator.class)
public @interface ValidMap {
   String message() default "valid.map";

   Class<?>[] groups() default {};

   Class<? extends Payload>[] payload() default {};
}

public class ValidMapValidator implements
      ConstraintValidator<ValidMap, Map<?, ?>> {

   @Override
   public void initialize(final ValidMap annotation) {
      return;
   }

   @Override
   public boolean isValid(final Map<?, ?> map,
         final ConstraintValidatorContext context) {
      if (map == null || map.size() == 0)
         return true;

      // Iterate each map entry and validate
      return true;
   }
} 
```

# performance - 开盖与生产

> ID：10722669
> 
> 赞同：1
> 
> 时间：2012-05-23T15:02:45.170
> 
> 标签：performance, code-coverage, opencover

如果我使用 opencover 为我的产品的所有构建提供在构建服务器上运行的覆盖率分析。

我的印象是 opencover（可能还有其他所有）“仪器”记录命中的代码。

这个检测代码是否“不安全”和/或更慢，因此我不应该在生产服务器上使用这个代码？

我希望我误解了这个过程，因为必须进行 2 次构建（1 次用于覆盖测试，实际用于生产）会减慢构建服务器的速度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T05:52:40.077

[OpenCover](https://github.com/sawilde/opencover)（以及 NCover 和[PartCover](https://github.com/sawilde/partcover.net4)）不会修改您通过构建生成的二进制文件。他们使用分析器 API 来检测内存中的二进制文件，因为它们正在被 JIT（即时编译）。

因此，您的二进制文件保持未修改并且可以安全地用于生产。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T15:16:56.883

我在**发布**模式下（在构建机器中）为多个项目运行单元测试和 openCover。如果您没有依赖于该模式的代码（如预编译指令等），则不需要为**调试模式执行此操作。**我希望能帮助你。

# sql - Grails多对多sql

> ID：10722671
> 
> 赞同：2
> 
> 时间：2012-05-23T15:02:48.623
> 
> 标签：sql, hibernate, grails, groovy, many-to-many

我正在尝试用 grails 制作一个 sql，但到目前为止我做不到......

我有 3 个域类：

```
class Device {
  String imei   
  List nodes
  static hasMany = [nodes:Node]
}

class Node {
  Integer signal
  static belongsTo = [network : Network]
}

class Network {
  String ssid
  static hasMany = [nodes: Node]
} 
```

所以，它与 3 个表是多对多的关系（我需要第三个表，因为我需要在其中包含一些变量）

我需要找到一台设备的所有网络（通过imei）。有任何想法吗..？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T15:07:40.593

不：

```
def networks = Device.findByImei( 'whatever' ).nodes*.network?.unique( false ) 
```

做吗？

# c++ - 为什么我所有的 mpi 线程都是大师？

> ID：10722680
> 
> 赞同：2
> 
> 时间：2012-05-23T15:03:09.967
> 
> 标签：c++, mpi

我开始使用 MPI 并编写了一个快速演示程序：

```
int main(int argc, char** argv)
{
    MPI_Init(&argc, &argv);
    int myRank = MPI_Comm_rank(MPI_COMM_WORLD, &myRank);
    if (myRank) {
    cout << "slave" << endl;
    }
    else {
    cout << "master" << endl;
    }
    MPI_Finalize();
    return 0;
} 
```

我使用以下命令运行它：

```
aprun -n 4 test 
```

我的输出是

```
master
master
master
master 
```

我期待类似的东西

```
slave
master
slave
slave 
```

为什么会这样？为什么我所有的线程都是主人？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T15:09:14.660

问题出在这一行：

```
int myRank = MPI_Comm_rank(MPI_COMM_WORLD, &myRank); 
```

您不应将 myRank 分配给对 MPI_Comm_rank 的调用结果。做就是了：

```
int myRank;
MPI_Comm_rank(MPI_COMM_WORLD, &myRank); 
```

它会起作用。

# javascript - if语句中的jQuery多个条件

> ID：10722682
> 
> 赞同：29
> 
> 时间：2012-05-23T15:03:17.743
> 
> 标签：javascript, jquery

这个循环跳过某些键的语法是什么？我写它的方式不能正常工作。

```
 $.each(element, function(i, element_detail){
    if (!(i == 'InvKey' && i == 'PostDate')) {
        var detail = element_detail + '&nbsp;';
        $('#showdata').append('<div class="field">' + i + detail + '</div>');
       }
 }); 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-05-23T15:05:31.057

尝试

```
if (!(i == 'InvKey' || i == 'PostDate')) { 
```

或者

```
if (i != 'InvKey' || i != 'PostDate') { 
```

这表示如果 i 不等于`InvKey`OR`PostDate`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-23T15:04:00.980

`i == 'InvKey' && i == 'PostDate'`永远不会是真的，因为`i`永远不可能同时等于两个不同的事物。

你可能正在尝试写

```
if (i !== 'InvKey' && i !== 'PostDate')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-11T12:16:54.847

**更通用的方法：**

```
if ( ($("body").hasClass("homepage") || $("body").hasClass("contact")) && (theLanguage == 'en-gb') )   {

       // Do something

} 
```

# php - 通过 PHP 推送的 HTML5 音频未缓存

> ID：10722684
> 
> 赞同：0
> 
> 时间：2012-05-23T15:03:20.730
> 
> 标签：php, html5-audio

我正在编写一个网络音频播放器，我遇到了缓存相当不可靠的问题，唯一想到的是我正在服务的标题。

由于一般的复杂性和安全性，我必须通过 PHP 解析文件，这很好，因为这意味着我可以动态创建它们，但出现的问题是浏览器似乎不再缓存音轨，除了在极少数情况下，其他时候他们可能只缓存曲目的前 1/4。我无法可靠地弄清楚它正在缓存什么或为什么。

提供该文件的代码如下。仅供参考，“EncodeTrack”函数仅对尚未创建的轨道进行编码，如果文件已存在则不执行任何操作。

```
 ## Track Decoder and Streamer
if($_GET['playtrack']) {
    error_log("Dec Start");
    $dectimer = microtime(1);
    ini_set('display_errors', 0);
    $track = trim($_GET['playtrack']);
    preg_match('%^(\w+)\-(\w+)\.(\w+)$%', $track, $trackbits);
    $trackid = $trackbits[1];
    $trackquality = $trackbits[2];
    $trackformat = $trackbits[3];

    $trackarr = mysql_fetch_array(mysql_query("SELECT * FROM `tracks` NATURAL JOIN `artists` NATURAL JOIN `albums` WHERE `track_hash` = '$trackid' LIMIT 1"));
    $file = "$musicfolder/$trackarr[artist_folder]/$trackarr[album_folder]/$trackarr[track_path]";
    $trackpath = escapeshellarg($file);

    EncodeTrack($trackid, $trackformat, $trackpath, $trackquality);
    $transfile = "tmp/$trackid-$trackquality.$trackformat";

    if(file_exists($transfile)) {
        $filesize = filesize($transfile);
        $file = fopen($transfile, 'r');

        if($_SERVER['HTTP_RANGE']) {
            $partial = 1;

            $range = str_replace('bytes=', '', $_SERVER['HTTP_RANGE']);
            $range = explode(',', $range);
            $range = explode('-', $range[0]);

            if($range[0] === '') {
                $end = $filesize - 1;
                $start = $end - intval($range[0]);
            }elseif($range[1] === '') {
                $start = intval($range[0]);
                $end = $filesize - 1;
            }else{
                $start = intval($range[0]);
                $end = intval($range[1]);
                if ($end >= $filesize || (!$start && (!$end || $end == ($filesize - 1)))) $partial = false; // Invalid range/whole file specified, return whole file
            }      
            $length = $end - $start;

            header("HTTP/1.1 206 Partial Content", 1, 206);
            header("Content-Range: bytes $start-$end/$filesize");
            fseek($file, $start);
        }else{
            $length = $filesize;
        }

        $data = fread($file, $filesize);
        fclose($file);

        header("Content-Length: $length");
        header("Content-Type: audio/$trackformat");
        header("Accept-Ranges: bytes");
        header("Expires: Tue, 23 May 2062 10:00:00 GMT");
        header("ETag: $length");
        header("Cache-Control: public");

        echo($data);
    }else{
        header("HTTP/1.1 404 Not Found", 1, 404);
    }

    error_log("Dec Complete - ".round((microtime(1) - $dectimer)*100));
    exit;
} 
```

我不知道我在这里缺少什么。就部分内容处理而言，这也可能是我做错的事情，但据我所知，这是理智的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:26:48.140

如果您怀疑部分内容处理有问题，`pecl_http`请发送正确的标头和字节。

[用http_send_file()](http://us.php.net/manual/en/function.http-send-file.php)替换`if(file_exists($transfile))`块，如下所示：

```
http_send_file($transfile); 
```

您的代码更轻松，更容易出现错误......更重要的是，[pecl_http](http://pecl.php.net/package/pecl_http)为您提供免费的奖励功能，例如`http_throttle()`

希望这可以帮助 ！

# c# - 在只有 Frameworks 2.0 和 4.0 的机器上运行以 3.0 为目标的 .NET 应用程序

> ID：10722686
> 
> 赞同：0
> 
> 时间：2012-05-23T15:03:32.930
> 
> 标签：c#, .net

谁能建议针对 .NET 3.0 的应用程序是否可以在具有 .NET 2.0 和 4.0 但不是 3.0 的用户计算机上运行？3.0 和 3.5 的安装程序在此特定机器上崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T15:06:50.603

[.NET Framework 4.0 独立于 .NET Framework 2.0/3.0/3.5（都是一个框架。2.0 是基础、完整的框架。3.0 和 3.5 是 2.0 的扩展。）。](http://social.msdn.microsoft.com/Forums/hr/netfxsetup/thread/db61f1a6-8d74-4014-957d-3bdc4d6525e5)

/编辑

我很好奇，赶紧自己试了试。这实际上取决于您是否针对 3.0/3.5 构建应用程序并最终**真正使用 3.0/3.5 特定的东西**（例如 Linq）。如果您不使用它，那么它当然仍然可以工作。

但如果这样做，用户将看到 Microsoft 错误报告对话框。

似乎“没有直接针对 .NET 3.0/3.5”，因为它取决于目标依赖项（项目引用）。

但最终答案仍然应该是：“不，因为你永远不知道！”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:11:35.850

4.0 框架名义上向后兼容为早期版本（1.1 和更高版本）编译的程序集。CLR 中的某些更改仍有可能破坏您的应用程序。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/ff602939.aspx](http://msdn.microsoft.com/en-us/library/ff602939.aspx)。

故事的寓意：在 4.0 CLR 上测试您的 3.5 应用程序以确保其正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T16:09:42.087

**.Net4**很可能拥有您的程序所需的所有东西，有一个选项可以重定向程序集的使用（有点乏味但有）您可以修改应用程序的配置文件，通常在开发中命名为**App.config和****ApplicationName .exe.config**部署时。

在部分**配置**中，对所有应重定向的程序集尝试此操作：

```
<runtime>
<generatePublisherEvidence enabled="false"/>
<gcServer enabled="true"/>
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
  <dependentAssembly>
    <assemblyIdentity name="System" publicKeyToken="b77a5c561934e089" culture="neutral"/>
    <bindingRedirect oldVersion="0.0.0.0-65535.65535.65535.65535" newVersion="4.0.0.0"/>
  </dependentAssembly>
</assemblyBinding>
</runtime> 
```

# actionscript-3 - 平滑地旋转一个固定的 od 度数的影片剪辑

> ID：10722690
> 
> 赞同：0
> 
> 时间：2012-05-23T15:03:37.063
> 
> 标签：actionscript-3

我正在尝试将 MovieClip 旋转固定的度数，它必须让我平滑等，所以 mc.rotate(int) 出来了。

目前我有这个无限期旋转：

```
 public function wheelSpinning () : void
    {
        addEventListener(Event.ENTER_FRAME, startSpin);
    }

    public function startSpin(event:Event):void 
    {
        mc.rotation+=1;
    } 
```

谁能指出我正确的方向？第一次这样做，我很难过。Google fu 返回的结果好坏参半，我担心我使用了错误的关键字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T15:53:47.260

使用[Greensock.com](http://greensock.com)的 TweenMax 库。它有一个非常有用的方法/插件：`shortRotation`自动以最短方向旋转（当对象旋转超过 180 度时非常有用）。

```
TweenMax.to(mc, 1, {shortRotation:{rotation:270}}); 
```

就是这样。

我不会使用 Flash 的 Tween 类——它们效率不高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T15:34:46.377

解决方案 1：一旦您达到所需的旋转，就删除该事件。

```
public function startSpin(event:Event):void 
{
    if(mc.rotation == someValue)
    {
        removeEventListener(Event.ENTER_FRAME, startSpin);
    }
    else
        mc.rotation+=1;
} 
```

解决方案2：使用flash的补间！ [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/transitions/Tween.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/transitions/Tween.html)

解决方案 3：使用第三方补间库。我使用 Tweener [http://hosted.zeh.com.br/tweener/docs/en-us/](http://hosted.zeh.com.br/tweener/docs/en-us/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T19:54:48.950

您可以使用基本的**[缓动](http://gizma.com/easing/)**来保持平稳：

```
private var degrees:Number = 2; // increase rotation by 2
private var easing:Number = .5; // easing value
private var finalDegree:Number = 90; // Degree the rotation will iterate to

...

public function wheelSpinning() : void
{
    addEventListener(Event.ENTER_FRAME, startSpin);
}

public function startSpin(evt:Event):void 
{
    var c:Number = mc.rotation + degrees * easing;

    if (c >= finalDegree) 
    {
       /* Prevent the rotation from being greater than the
          finalDegree value and remove the event listener */
        mc.rotation = finalDegree;
        removeEventListener(Event.ENTER_FRAME, startSpin);
    }
    else
    {
        /* Apply the easing to the rotation */
        mc.rotation = c;
    }
} 
```

使用这些价值观并找出适合您需求的价值观。如果您正在学习 AS3，我建议您避免使用库来制作动画并自己编写所有内容。尽管库的底层内容比我在这里介绍的要复杂得多，但您将对正在发生的事情有一个基本的了解。
否则，最好使用一个封装了所有这些有趣数学的库，而只需担心您的应用程序/游戏的逻辑。你可以在那里找到很多库，比如**[GTween](http://gskinner.com/blog/archives/2008/08/gtween_a_new_tw.html)**或**[Greensock](http://www.greensock.com/)**。

希望能帮助到你。

# django - 如何确定用户是否使用 fandjango 应用程序从 facebook 注销

> ID：10722702
> 
> 赞同：0
> 
> 时间：2012-05-23T15:04:34.223
> 
> 标签：django, django-facebook, fandjango

我正在使用 fandjango 应用程序来处理 facbook 用户信息。如果用户从 facebook 注销并从同一浏览器点击 url，我会收到错误
**Error validation access token: The session is invalid because the user logged out**。
有人可以告诉我，如何解决这个问题以及如何识别用户是否从 Facebook 注销。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T02:12:07.660

您可以检查您请求的 facebook 对象：

```
def view(request):
    if request.facebook and hasattr(request.facebook, 'user') and request.facebook.user is not None:
        // Here you are sure that request.facebook.user is logged in 
```

# c# - 从字符串中删除“\”字符

> ID：10722704
> 
> 赞同：0
> 
> 时间：2012-05-23T15:04:44.600
> 
> 标签：c#, string

我想`'\'`从我的字符串中删除字符。

我已经尝试了几种方法，但我仍然没有任何运气

这是我的一小段代码。它实际上是从另一个站点获得的 HTML。

我将在我自己的网站上使用它，但 \ 会出现问题！

```
 src=\"http://bartarinha.com/file/logo/ideal.jpg\" style=\"border: 0px none\"> 
```

这段代码给了我错误：

```
news_body_html = news_body_html.Replace("\", " "); 
```

删除字符的正确方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-23T15:05:47.093

试试 news_body_html.Replace("\\", " ");

或 news_body_html.Replace(@"\", " ");

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-23T15:05:43.710

试一试

```
news_body_html = news_body_html.Replace("\\", " "); 
```

编辑：

实际上试试这个：

```
news_body_html = news_body_html.Replace('\\', ' '); 
```

请注意，我在斜杠周围使用单引号。我忘记了 Replace 需要一个 char 作为参数。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-23T15:07:15.337

您必须转义转义字符：

```
news_body_html = news_body_html.Replace("\\", " "); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-23T15:07:08.307

```
news_body_html = news_body_html.Replace("\\", " "); 
```

这将从您的代码中删除 \ 。\ 是最常用于 \n 以创建新行的控件，因此它将其视为无事可做的命令，因此什么也不做。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-23T15:08:52.717

以下[问题](https://stackoverflow.com/questions/894905/how-to-replace-occurrences-of-with-an-empty-string)询问如何从字符串中替换“-”，但同样的方法应该适用于您的问题。

请记住，要在 ac# 字符串中使用 \，您需要使用“\”，因为它是单个 \ 是转义字符

# powershell - 使用 PowerShell 函数返回复杂对象？

> ID：10722705
> 
> 赞同：2
> 
> 时间：2012-05-23T15:04:48.150
> 
> 标签：powershell

大多数开箱即用的 PowerShell 命令都返回“复杂”对象。

例如，`Get-Process`返回一个数组`System.Diagnostics.Process`。

我写过的所有函数要么返回一个简单类型，要么返回一个现有类型的对象。

如果我想退回自制物品，指南是什么？

例如，假设我有一个具有以下属性的对象：`Name`, `Age`. 在 C# 中我会写

```
public class Person {
    public string Name { get; set; }
    public uint Age { get; set; }
} 
```

从 PowerShell 函数返回此类对象有哪些选择？

1.  由于我的目标是创建 PowerShell 模块，我应该移至 ac# 模块而不是 ps1 文件吗？
2.  我应该在自定义 DLL 中编译这些对象并在我的模块中使用它来引用它`LoadWithPartialName`吗？
3.  我应该把我的类放在一个 powershell 字符串中，然后动态编译它吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T16:41:37.557

您可以使用以下语法：

```
New-Object PSObject -Property @{
   Name = 'Bob'
   Age = 32
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T15:35:18.450

有几个选项可以使用自定义属性创建您自己的对象。还可以使用其他属性扩展现有对象。最明确的方法是使用 Add-Member cmdlet：

```
$test = New-Object PSCustomObject
Add-Member -InputObject $test -Name Name -Value 'Bob' -MemberType NoteProperty
Add-Member -InputObject $test -Name Age -Value 32 -MemberType NoteProperty 
```

您还可以将对象可以扩展的事实与 Select-Object 可以隐式地向管道中的对象添加属性的事实相结合：

```
$test = '' | Select @{n='Name'; e={'Bob'}}, @{n='Age'; e={32}} 
```

就我个人而言，我更喜欢第一种方法，因为它更明确且更少挥手魔法，但归根结底，它是一种脚本语言，所以无论什么工作都是正确的方法。

# c - 更改 GtkWindow 时更改 GtkButton 颜色

> ID：10722708
> 
> 赞同：1
> 
> 时间：2012-05-23T15:05:01.067
> 
> 标签：c, gtk

我正在尝试一个简单的示例 Gtk 程序并使用 GtkTable 来对齐我的小部件。

我的布局应该是：

窗口背景为黑色。按钮应为白色，而按钮上的文本应为黑色。所有标签都应为白色，以便在黑色窗口背景下可以看到它们。

考虑到这一点。这是我到目前为止所做的。

代码：

```
#include <gtk/gtk.h>
#include <glib.h>
#include <stdlib.h>     /* for atoi() and exit() */
#include <stdio.h>      /* standard in and output*/

typedef struct cmd_widgets{
    GtkWidget *button1;
    GtkWidget *combo;
    GtkWidget *label;

}my_cmd_widgets;

static gboolean close_application( GtkWidget *widget, GdkEvent  *event, gpointer   data )
{
  gtk_main_quit ();
  return FALSE;
}

static void UpdateChoice( GtkWidget *widget, gpointer data)
{
    my_cmd_widgets *widgrp;
    widgrp = (my_cmd_widgets *)data;
    gchar *text =  gtk_combo_box_get_active_text(GTK_COMBO_BOX(widgrp->combo));
    GString *val = g_string_new("You have chosen :  ");
    g_string_append(val, text);
    gtk_label_set_text(GTK_LABEL(widgrp->label), val->str);
    g_free(text);
}

int main(int argc, char *argv[]) {

  GtkWidget *window;
  GtkWidget *table;

  GtkWidget *label1;
  GtkWidget *label2;
  GtkStyle  *style;

  GtkWidget *align;

  my_cmd_widgets grp_widgets;
  GtkWidget *image;

  gtk_init(&argc, &argv);
  gtk_rc_parse("fonts.rc");

  window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
  gtk_window_set_position(GTK_WINDOW(window), GTK_WIN_POS_CENTER);
  gtk_window_set_title(GTK_WINDOW(window), "Tour App");
  gtk_container_set_border_width(GTK_CONTAINER(window), 10);

  table = gtk_table_new(7, 1, FALSE);
  gtk_container_add(GTK_CONTAINER(window), table);

  label1 = gtk_label_new("Our Tour Package Offers");
  align = gtk_alignment_new(0.0, 0.5, 0.0, 0.0);
  gtk_container_add(GTK_CONTAINER(align), label1);
  gtk_table_attach(GTK_TABLE(table), align, 0, 1, 1, 2, GTK_FILL, GTK_FILL, 0, 10);

  label2 = gtk_label_new("Select City: ");
  align = gtk_alignment_new(0.0, 0.5, 0.0, 0.0);
  gtk_container_add(GTK_CONTAINER(align), label2);
  gtk_table_attach(GTK_TABLE(table), align,0, 1, 2, 3, GTK_FILL, GTK_FILL, 0, 0);
  gtk_widget_show(align);
  grp_widgets.combo = gtk_combo_box_new_text();
  gtk_combo_box_append_text(GTK_COMBO_BOX(grp_widgets.combo), "Paris");
  gtk_combo_box_append_text(GTK_COMBO_BOX(grp_widgets.combo), "London");
  gtk_combo_box_append_text(GTK_COMBO_BOX(grp_widgets.combo), "Tokyo");
  gtk_combo_box_append_text(GTK_COMBO_BOX(grp_widgets.combo), "New York");

  /* Creates a new button1\. */

   grp_widgets.button1 = gtk_button_new_with_label ("See Itinerary");

   grp_widgets.label = gtk_label_new("");
   align = gtk_alignment_new(0.0, 0.5, 0.0, 0.0);
   gtk_container_add(GTK_CONTAINER(align), grp_widgets.label);
   gtk_table_attach(GTK_TABLE(table), align,0, 1, 5, 6, GTK_FILL, GTK_FILL, 0, 0);
   gtk_widget_show(align);

  image = gtk_image_new ();
  gtk_image_set_from_file (GTK_IMAGE(image), "Images/olympics_logo.gif");

  //column 1
  gtk_table_attach(GTK_TABLE(table), image, 0, 1, 0, 1,
      GTK_FILL | GTK_SHRINK, GTK_FILL | GTK_SHRINK, 0, 0);
  gtk_table_attach(GTK_TABLE(table), grp_widgets.combo, 0, 1, 3, 4,
      GTK_FILL | GTK_SHRINK, GTK_FILL | GTK_SHRINK, 0, 15);
  gtk_table_attach(GTK_TABLE(table), grp_widgets.button1, 0, 1, 4, 5,
      GTK_FILL | GTK_SHRINK, GTK_FILL | GTK_SHRINK, 5, 15);

  g_signal_connect(window, "destroy",G_CALLBACK(gtk_main_quit), NULL);
  g_signal_connect (window,"delete-event",G_CALLBACK (close_application), NULL);
  g_signal_connect_swapped(G_OBJECT(window), "destroy", G_CALLBACK(gtk_main_quit), G_OBJECT(window));
  g_signal_connect (G_OBJECT(grp_widgets.button1), "clicked", G_CALLBACK (UpdateChoice), (gpointer)&grp_widgets);

  gtk_widget_show(table);

  gtk_widget_show_all(window);

  gtk_main();

  return 0;
} 
```

这是包含 TABLE AND WINDOW 属性的 rc 文件：

```
style "window"
{
  font_name = "fixed 12"
  bg[NORMAL] = { 0.0, 0.0, 0.0 }
}
style "table"
{
  bg[NORMAL] = { 1.0, 1.0, 1.0 }
  fg[NORMAL] = { 1.0, 1.0, 1.0 }
}

style "container" {
        font_name = "bold 12"
        xthickness = 10
        ythickness = 10
        bg[NORMAL] = { 1.0, 1.0, 1.0 }
        fg[NORMAL] = { 1.0, 1.0,1.0 }          
}

style "button" {
        font_name = "bold 12"
        xthickness = 10
        ythickness = 10 
        #bg[NORMAL] = { 0.0, 0.0, 0.0 }   
        fg[NORMAL] = { 0.0, 0.0, 0.0 }  
}

#widget_class "*GtkButton*" style "button"
widget_class "GtkWindow" style "window"
widget_class "*GtkTable*" style "table" 
```

上面代码中的问题是，当我在表格或窗口样式上将 fg 更改为白色时，Button 的文本（标签）仍然是白色的。即使将 fg 更改为黑色（如下所示），我的按钮上的标签文本仍然是白色的。另外，如何拉伸图像和窗口上的所有小部件，以便每当我调整窗口大小时，所有小部件的大小也会调整为适合屏幕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T01:43:05.613

> 所有标签都应为白色，以便在黑色窗口背景下可以看到它们。

根据我在网上查到的：

> GtkLabel Widget 是少数几个不创建自己的窗口来渲染自己的 GTK+ 小部件之一。为了设置 GtkLabel Widget 的背景颜色，您需要更改其父级的背景颜色。

所以在那种情况下，举个简单的例子，我只在 GtkEventBox 中打包了一个标签。
代码段：

```
GtkWidget *eventBox;
...
eventBox = gtk_event_box_new();

label1 = gtk_label_new("Our Tour Package Offers");
gtk_container_add(GTK_CONTAINER(eventBox), label1);
align = gtk_alignment_new(0.0, 0.5, 0.0, 0.0);
gtk_container_add(GTK_CONTAINER(align), eventBox);
... 
```

简化的 rc 文件：

```
style "window"
{
  font_name = "fixed 12"
  bg[NORMAL] = { 0.0, 0.0, 0.0 }
}

style "label"{
  bg[NORMAL] = { 1.0, 1.0, 1.0 }
}

widget_class "GtkWindow" style "window"
widget_class "*GtkAlignment*GtkEventBox*" style "label" 
```

结果：
![在此处输入图像描述](../Images/480e5b6c6d3b167ddce6cf18723d5f47.png)

# php - 从站点php中提取数据

> ID：10722709
> 
> 赞同：0
> 
> 时间：2012-05-23T15:05:11.997
> 
> 标签：php

我有一个项目正在进行中。我使用 php 和 mysql 作为后端。问题是我需要为超过 10k 种产品创建一个在线目录……每个产品都带有 pdf 文件作为附件。现在我无法一一浏览它们......所以在这里向您请教专家。如何从带有 .jsp 扩展名的供应商网页中获取这些数据？有没有一种方法可以不用一个一个地提取这么多的数据？谢谢你，期待你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:10:30.867

这是非常糟糕的做法 - 它很慢，我猜您的供应商不会喜欢它，而且每当供应商网站上的 html 代码发生更改时，您的代码就会变得垃圾。

所以最好的方法是使用一些 API（如果他们提供的话）。如果你真的需要解析其他网站的 html 代码，你应该试试[cURL 。](http://php.net/manual/en/book.curl.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T15:07:38.087

是的，请联系您的供应商以获取产品信息。如果您抓取并重新发布他们的网站，他们不会感到好笑。

> 有没有一种方法可以不用一个一个地提取这么多的数据？

不，除了访问每个产品页面之外，没有其他方法可以做到这一点。您无法存储未收到的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T15:11:01.440

询问供应商是否有可以与之交互的 Web 服务或 API。

# jquery-mobile - phonegap 触摸事件/div 溢出

> ID：10722710
> 
> 赞同：2
> 
> 时间：2012-05-23T15:05:14.583
> 
> 标签：jquery-mobile, cordova, touch-event

我的问题：

我有一个带有表格的css div（jquery-mobile 1.0），-如果我在div（溢出）中添加太多行，触摸事件不会触发javascript函数......知道吗？

它不会触发函数和“溢出，在它正常工作之前！）

```
$('#mytable').append('<tr><td width=20%>
    <a href=add.html onclick=setId('+row.UserId+');>
    <img src=./icons/patientendaten.png width=48px height=48px></a></td>
    <td width=20%>'+row.Datum+'</td><td width=20%>'+row.Patient+'</td>
    <td width=20%><center><a href=# onclick=delete_entry('+row.UserId+');>
         <img src=./icons/delete.png></a></center></td><td width=20%><center>
         <img src=./icons/edit.png></center>
    </td></tr>'); 
```

更多细节：

```
<div data-role="content">  

    <div id="twitter">

       <div class="ui-grid-d">
        <div class="ui-block-a"><div class="ui-bar ui-bar-d">Akte</div></div>
        <div class="ui-block-b"><div class="ui-bar ui-bar-d">Datum</div></div>
        <div class="ui-block-c"><div class="ui-bar ui-bar-d">Patient/in</div></div>
        <div class="ui-block-d"><div class="ui-bar ui-bar-d">Löschen</div></div>
        <div class="ui-block-e"><div class="ui-bar ui-bar-d">Fallbeisp. erstellen</div></div>
        <br>

    <table id=mytable>

    </table>

  </div>
     </div>
         </div> 
```

我在 android 3.2 上使用 jquery mobile 1.0 和最新的 phonegap 1.7

此外，logcat 给了我（当我添加第 6 行时）

> 05-24 23:59:18.030：E/libEGL(16161)：在没有当前上下文的情况下调用 OpenGL ES API（每个线程记录一次）
> 
> 05-24 23:59:18.030: D/ShaderProgram(16161): 无法加载顶点着色器！

这是我的div：

![div 示例](../Images/88d6b71f5b108a025b7563fd65e17cd9.png)

日志猫：

```
05-23 17:05:51.800: V/webview(30492):  singleCursorHandlerTouchEvent -getEditableSupport  FASLE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:07:30.797

我想出了蓝色 div 是问题的解决方案...jquery-mobile/phonegap 有导致错误的溢出问题！

```
05-24 23:59:18.030: E/libEGL(16161): call to OpenGL ES API with no current context (logged once per thread)

05-24 23:59:18.030: D/ShaderProgram(16161): couldn't load the vertex shader!

#twitter {
    position:absolute;
    top:140px;
    left:40px;
    width: 880px;
    height: 400px;
    border: 5px solid;
    border-color: #458d91;
    -moz-border-radius:16px;
    -khtml-border-radius:16px;
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 10px;
    padding-top: 10px;
    padding-left:10px;
    padding-right:10px;
    padding-bottom: 10px;
    overflow: auto;
  } 
```

如果我删除溢出和高度，那么没有任何问题。

在这种情况下使用列表可能是更好的方法。

我还尝试了不同的 jquery-mobile、jquery - 结合不同的 phonegap 版本 - 这是在三星 Galaxy 10.1 平板电脑 - android 3.2 上测试的

希望这可以帮助。

# php - 我应该在模型中使用一个大型 sql 查询还是将其分解为更小的查询？

> ID：10722711
> 
> 赞同：3
> 
> 时间：2012-05-23T15:05:17.443
> 
> 标签：php, sql, codeigniter, join

我正在为我的一个项目使用 codeigniter，现在我拥有的是一个包含 PROJECT 信息的表格，并且我正在特定视图中显示所有 PROJECTS。

现在，我还希望同一个视图显示有关项目的其他相关信息，例如视图数量以及相关标签。但这将需要模型中的多个 JOINS（这将需要我更改现有查询......）但它会使视图不必直接调用模型。

如果我只是分解查询，并在 VIEW 中与其他信息相关的 2 个单独的查询，我会获得更好的性能吗？我发现这更清楚，但我想知道它是否更慢，因为我在循环中调用每个项目的模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:09:58.380

为什么不同时编写代码 - 并使用[CI Profilier 进行测试？](http://codeigniter.com/user_guide/general/profiling.html)

那么你将百分百确定。此外 - 如果结果“接近”，您可以选择更适合您的编程逻辑的选项。

ps您还可以将对模型的多次调用循环到控制器中的数组（如$projects）中，并将该变量传递给视图，因此在任何一种情况下，“视图”都不会直接调用“模型”。

# c# - XtraRichEdit - 以编程方式更改输入字体颜色

> ID：10722716
> 
> 赞同：0
> 
> 时间：2012-05-23T15:05:40.777
> 
> 标签：c#, winforms, devexpress, richedit

是否可以以编程方式更改文档中的当前字体颜色？

我的意思不是改变文档特定选择的颜色。我需要让用户以蓝色书写所有文本。是否可以以编程方式将输入颜色更改为蓝色？

我尝试使用`ChangeFontColorCommand`，但找不到正确的使用方法。此代码模拟工具栏按钮使用的命令：

```
var command = new ChangeFontColorCommand(RichEdit);
var uiState = (IValueBasedCommandUIState<Color>) command.CreateDefaultCommandUIState();
uiState.EditValue = Color.Blue;
command.ForceExecute(uiState); 
```

**是否可以将用户编写的所有文本都写成蓝色？**如何？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:19:35.613

[Document.DefaultCharacterProperties](http://documentation.devexpress.com/#CoreLibraries/DevExpressXtraRichEditAPINativeDocument_DefaultCharacterPropertiestopic)属性是否适合您的需求？
请尝试以下方法：

```
richEditControl.Document.DefaultCharacterProperties.ForeColor = Color.Blue; 
```

# javascript - 浏览器无法处理大型 JSON

> ID：10722720
> 
> 赞同：2
> 
> 时间：2012-05-23T15:05:48.290
> 
> 标签：javascript, json, apache2, webgl

我们有一个提供网站的 Apache 服务器。该网站创建了一个 GET-Request，它在服务器上运行一个 C++ 程序。该程序创建一个 3D-Scene 并使用包含该场景的 json 响应 Get-Request。然后使用 WebGL 在浏览器中渲染场景。

这对于小场景非常有效。当 json 大于 ~125 mb 时，Chrome 会抛出错误。Firefox 可以处理高达 ~260 mb 的 json。

我使用 jquery 创建了 Get-Request：

```
BP2011D1.ServerProxy.prototype.loadMesh = function(requestParameter, callbackOnSuccess,   callbackOnError)
{   
$.ajax({
    type: "GET",
    url: this.getServerURL() + "/cgi-bin/" + this._treemapDirectory + "/hpi_bp2011_app_fcgi",
    data: requestParameter + "&functionName=getMesh",
    dataType: "json",
    success: callbackOnSuccess.execute,
    error: callbackOnError.execute
});
}; 
```

对于大型 json，会执行 callbackOnError，因此 json 似乎无效。

我知道 json 应该是完全有效的。

我认为浏览器无法处理大 json 或大字符串。他在末尾剪辑了一些字符，因此缺少的括号使 json 无效。

有没有办法处理这个问题？我需要处理高达 800 mb 的 json。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T15:18:26.340

通过 AJAX 分块（以几 MB 为单位）下载它们。假设您有一个高级浏览器（由于 WebGL），您可以使用诸如“线程”之类的[网络工作者](https://developer.mozilla.org/En/Using_web_workers)在后台批量解析它们，然后将它们添加到主对象以供使用。

对于每个块：

```
download -> create worker -> parse JSON in worker -> add to main object 
```

即使它绕过了 800MB JSON 解析问题，我也不知道 800MB 对象的影响。它在浏览器堆上仍然很重。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T15:18:34.883

您需要确定造成问题的原因：

1.  获取那么大的json
2.  评估那么大的 json (eval())
3.  要求 javascript 存储这个

我假设您通过 xhr 获取 json，在前两种情况下，您可以尝试创建一些分页，在其中添加 GET-parameter part={0,1,2,3,4,5...}，允许浏览器在多个 xhr 请求中获取一个巨大的 json（通过实现这个服务器端）。这将需要服务器将其拆分，而浏览器将其合并：

{a:1, b:5} - 拆分 -> {a:1} 和 {b:5} - 合并 -> {a:1, b:5}

或者：

[1, 5] - 拆分 -> [1] 和 [5] - 合并 -> [1, 5]

请理解，在执行此操作时，您需要找到一个拆分和合并的好地方，即在这种情况下：

{小：<1mb 对象>，巨大：<799mb 对象>}

或者您可能决定只获取字符串并拆分和合并它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T03:40:29.413

您可以尝试使用更紧凑的格式

[http://code.google.com/p/webgl-loader/](http://code.google.com/p/webgl-loader/)

您还可以滚动您自己的格式并使用二进制 XHR 直接以二进制格式下载大部分内容

[http://www.html5rocks.com/en/tutorials/file/xhr2/](http://www.html5rocks.com/en/tutorials/file/xhr2/)

# sungridengine - 使用选项 -sync yes 避免在 SGE 中打印作业退出代码

> ID：10722722
> 
> 赞同：0
> 
> 时间：2012-05-23T15:05:51.700
> 
> 标签：sungridengine

我有一个 Perl 脚本，它向 SGE 提交了一堆数组作业。我希望所有作业并行运行以节省时间，并且脚本等待它们全部完成，然后继续下一个处理步骤，该步骤集成来自所有 SGE 输出文件的信息并生成最终输出。

为了将所有作业发送到后台然后等待，我使用 Parallel::ForkManager 和一个循环：

```
$fork_manager = new Parallel::ForkManager(@as); 
# @as: Max nb of processes to run simultaneously
for $a (@as) {
    $fork_manager->start and next; # Starts the child process
    system "qsub <qsub_options> ./script.plx";
    $fork_manager->finish; # Terminates the child process
}
$fork_manager->wait_all_children; 
<next processing step, local> 
```

然而，为了让“等待”部分工作，我不得不在 qsub 选项中添加“-sync yes”。但作为一个“副作用”，SGE 会为每个数组作业中的每个任务打印退出代码，并且由于有许多作业并且单个任务很轻，因此由于所有这些中断消息，它基本上使我的 shell 无法使用，而qsub 作业正在运行。

我怎样才能摆脱这些消息？如果有的话，我有兴趣检查 qsub 的作业退出代码（这样我可以在下一步之前检查一切是否正常），但不是每个任务的一个退出代码（无论如何我通过选项 -e 记录任务的错误以防我需要它）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T04:25:29.113

最简单的解决方案是将输出从 qsub 重定向到某个地方，即

```
system("qsub <qsub options> ./script.plx >/dev/null 2>&1"); 
```

但这掩盖了您可能希望看到的错误。或者，您可以使用 open() 启动子进程并读取它的输出，仅在子进程生成错误时打印一些内容。

不过，我确实为您提供了替代解决方案。您可以在没有 -sync y 的情况下将作业提交给 SGE，并在 qsub 打印时捕获作业 ID。然后，将您的摘要和结果收集代码转换为后续工作，并根据第一个工作的完成情况提交它。您可以使用 -sync y 提交此最终作业，以便您的调用脚本等待它结束。请参阅 qsub 手册页中的 -hold_jid 文档。

此外，不要让您的调用脚本决定何时提交下一个作业（最多），而是使用 SGE 的 -tc 选项来指定同时作业的最大数量（注意 -tc 不在手册页中，但它在 qsub 的 -help 输出中）。当然，这取决于您使用足够新版本的 SGE 来拥有 -tc。

# bash - 寻找 。-exec 回声 {} \; = `-exec' 缺少参数

> ID：10722723
> 
> 赞同：5
> 
> 时间：2012-05-23T15:05:51.997
> 
> 标签：bash, find

为什么这不起作用？（echo 不是真正的命令）

```
$ find . -type d -exec echo {} \;
find: missing argument to `-exec' 
```

无论如何，我设法做到了：

```
$ for f in `find . -type d`; do echo $f; done 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-03-10T07:29:56.273

这对我有用。

```
find . -type f -exec file '{}' \; 
```

大括号括在单引号中，以防止它们被解释为 shell 脚本标点符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T15:44:23.153

以下行来自 的示例部分`man find`：

```
find . -type f -exec file '{}' \; 
```

在我看来，该`{}`部分需要用单引号引起来。

# jquery - 如果我向许多元素添加匿名 jQuery 函数，它会重复多次吗？

> ID：10722728
> 
> 赞同：3
> 
> 时间：2012-05-23T15:06:07.810
> 
> 标签：jquery

我有以下内容：

```
$('#menu a[href^="/C"], #menu a[href^="/Test"], #menu a[href^="/T"]')
        .live('click', function (event) {
.....
.....
        }); 
```

它查看每个菜单地址链接，然后为每个链接添加一个功能。然而......标记的功能大约有二十行长，我有多达一百个地址链接。

当以这种方式编码时，这是否意味着所有这二十行都添加到一百个链接中的每一个？我应该将其更改为使用命名函数还是使用系统生成的名称创建的匿名函数而不是在每个链接内部存储？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T15:09:46.197

您正在使用事件委托，因此事件仅绑定到`document`. 所以，不，这二十行只绑定在一个地方。

请使用`delegate`方法或`on`方法，`.live`在较新版本的jQuery中被贬低并且效率低下。

```
$("#menu").delegate('a[href^="/C"], a[href^="/Test"], a[href^="/T"]','click',function(){...}); 
```

或者

```
$("#menu").on('click','a[href^="/C"], a[href^="/Test"], a[href^="/T"]',function(){...}); 
```

如果您使用的是非常旧版本的 jQuery 并且必须使用`.live`，请尝试使用此语法，它对您的用例更有效，但必须在 $(document).ready() 内

```
$('a[href^="/C"], a[href^="/Test"], a[href^="/T"]','#menu').live('click',function(){...}); 
```

# ssl - 这些证书是什么，它们来自哪里？

> ID：10722729
> 
> 赞同：0
> 
> 时间：2012-05-23T15:06:09.163
> 
> 标签：ssl, azure, ssl-certificate

我们部署了一个使用 HTTPS 的 Azure Web 角色。我们将证书上传到 azure，在门户刷新后不久又出现了两个证书。这不是一个狂野的购物车证书，也许这是标准行为，但我以前没见过。

**原始证书的名称如下：**

subdomain.domain.com

**出现的三个证书的名称如下：**

VeriSign 3 类公共主要证书颁发机构 - G5

3 类公共主要证书颁发机构

VeriSign 3 类国际服务器 CA - G3

我提到的 3 个证书是正常生成的还是我应该研究的问题？

我们有一个类似的部署，它有一个 ssl，但不会生成这些额外的证书。这就是引发我们担忧的原因，让我问为什么......？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T15:54:14.323

当您在任何 Web 应用程序中启用 HTTPS 端点并将 SSL 证书绑定到它时，绑定到 HTTPS 端点的证书可以是单个证书，也可以是一个链，它取决于以下几个因素：

1.  当证书创建为自签名 ROOT 时，链中将只有一个证书。无法验证此证书是否具有 SSL 隧道，因为没有其他部分可以验证它以及为什么它被称为自签名根
2.  在几乎所有情况下，当您从知名 CA（证书颁发机构）购买证书时，您将获得 3 个（或更多）证书：

    2.1。根证书：此证书有助于使用 PKI 安全基础设施在两台机器之间创建 SSL 隧道。

    2.2\. 中间证书 -> 这是根据需要创建具有多个证书的链

    2.3\. 域证书 -> 这是您的 *.domainname.com 或 domainname.com

[这是https://mail.google.com](https://mail.google.com)上的链式 SSL 证书示例

![在此处输入图像描述](../Images/4d0e19bdf7881f1d9403c501ef4ecd2c.png)

并且所有这些证书都链接到一个 PFX（如果私钥嵌入证书中）或 CER（没有任何私钥），因此当您仅部署一个 PFX 证书时，您会看到该链是开放的，并且所有证书都已列出。

如果您浏览您的 url 并通过浏览器打开证书视图，您将看到与您在门户中看到的完全相同的链，您还可以验证证书指纹是否匹配。

# jquery - jQuery单击事件在移动浏览器中不起作用

> ID：10722730
> 
> 赞同：35
> 
> 时间：2012-05-23T15:06:11.157
> 
> 标签：jquery, android, ipad, mobile

jQuery click 事件似乎没有在移动浏览器中触发。

HTML如下：

```
<!-- This is the main menu -->
<ul class="menu">
   <li><a href="/home/">HOME</a></li>
   <li class="publications">PUBLICATIONS &amp; PROJECTS</li>
   <li><a href="/about/">ABOUT</a></li>
   <li><a href="/blog/">BLOG</a></li>
   <li><a href="/contact/">CONTACT</a></li>
 </ul>

 <!-- This is the sub-menu that is to be fired on click -->
 <div id="filter_wrapper">
   <ul id="portfolioFilter">
      <li><a href="/nutrition-related/">Nutrition related</a></li>
      <li><a href="/essays/">Essays and Nonfiction</a></li>
      <li><a href="/commissioned/">Commissioned works</a></li>
      <li><a href="/plays/">Plays and performance</a></li>
      <li><a href="/new-projects/">New Projects</a></li>
    </ul>
  </div> 
```

这是移动端的 jQuery 脚本：

```
$(document).ready(function(){
   $('.publications').click(function() {
       $('#filter_wrapper').show();
   });
 }); 
```

当我在移动浏览器上单击“出版物”列表项时，没有任何反应。

您可以在此处查看该网站：[http ://www.ruthcrocker.com/](http://www.ruthcrocker.com/)

不确定是否有 jQuery 移动特定事件。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-08-14T23:23:58.373

*我知道这是一个已解决的老话题，但我刚刚回答了一个类似的问题，虽然我的回答可以帮助其他人，因为它涵盖了其他解决方案选项：*

点击事件在支持触摸的设备上的工作方式略有不同。没有鼠标，所以技术上没有点击。根据这篇文章 - [http://www.quirksmode.org/blog/archives/2010/09/click_event_del.html](http://www.quirksmode.org/blog/archives/2010/09/click_event_del.html) - 由于内存限制，点击事件只能从锚点和输入元素模拟和调度。任何其他元素都可以使用触摸事件，或者通过向原始 html 元素添加处理程序来手动初始化单击事件，例如，强制列表项上的单击事件：

```
$('li').each(function(){
    this.onclick = function() {}
}); 
```

现在 click 会被 li 触发，因此可以被 jQuery 监听。

* * *

在您的情况下，您可以将侦听器更改为 @mason81 所提供的锚元素，或者在 li 上使用触摸事件：

```
$('.menu').on('touchstart', '.publications', function(){
    $('#filter_wrapper').show();
}); 
```

这是一些实验的小提琴 - [http://jsbin.com/ukalah/9/edit](http://jsbin.com/ukalah/9/edit)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-05-23T15:14:31.860

如果您已经（或不介意）使用 jQuery Mobile，Raminson 有一个很好的答案。如果你想要一个不同的解决方案，为什么不直接修改你的代码如下：

更改您遇到问题的 LI 以包含 A 标记并在那里应用类而不是 LI

```
<!-- This is the main menu -->
<ul class="menu">
   <li><a href="/home/">HOME</a></li>
   <li><a href="#" class="publications">PUBLICATIONS &amp; PROJECTS</a></li>
   <li><a href="/about/">ABOUT</a></li>
   <li><a href="/blog/">BLOG</a></li>
   <li><a href="/contact/">CONTACT</a></li>
 </ul> 
```

而您的 javascript/jquery 代码...返回 false 以停止冒泡。

```
$(document).ready(function(){
   $('.publications').click(function() {
       $('#filter_wrapper').show();
       return false;
   });
 }); 
```

这应该适用于您正在尝试做的事情。

另外，我注意到您的网站在新选项卡/窗口中打开了其他链接，这是故意的吗？

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-23T15:07:43.317

您可以使用 jQuery Mobile[`vclick`](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)事件：

> 用于处理触摸设备上的 touchend 或鼠标单击事件的规范化事件。

```
$(document).ready(function(){
   $('.publications').vclick(function() {
       $('#filter_wrapper').show();
   });
 }); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-04T18:01:55.427

**JqueryMobile：**重要 - 使用`$(document).bind('pageinit')`，而不是`$(document).ready()`：

```
$(document).bind('pageinit', function(){
   $('.publications').vclick(function() {
       $('#filter_wrapper').show();
   });
}); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-01-11T22:12:28.597

我遇到了同样的问题并通过添加来修复它`"mousedown touchstart"`

`$(document).on("mousedown touchstart", ".className", function() { // your code here });`

不喜欢别人

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-11-22T20:55:39.670

**jQuery 中触摸和点击的解决方案（不使用 jQuery Mobile）**

让[jQuery Mobile 站点构建您的下载](http://jquerymobile.com/download-builder/)并将其添加到您的页面。对于快速测试，您还可以使用下面提供的脚本。

接下来，我们可以使用以下代码片段重新连接对 $(...).click() 的所有调用：

```
<script src=”http://u1.linnk.it/qc8sbw/usr/apps/textsync/upload/jquery-mobile-touch.value.js”&gt;</script>

<script>

$.fn.click = function(listener) {

    return this.each(function() {

       var $this = $( this );

       $this.on(‘vclick’, listener);

    });

};
</script> 
```

[来源](http://maxrohde.com/2013/09/04/touch-and-click-in-jquery-without-jquery-mobile/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-04-11T20:01:47.210

使用此解决方案，您可能可以解决所有移动点击问题。仅使用“点击”功能，但将 z-index:99 添加到 css 中的元素：

```
 $("#test").on('click', function(){
    alert("CLICKED!")
  });
```

```
#test{   
  z-index:99;
  cursor:pointer;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

<div id="test">CLICK ME</div>
```

*信用：[https ://foundation.zurb.com/forum/posts/3258-buttons-not-clickable-on-iphone](https://foundation.zurb.com/forum/posts/3258-buttons-not-clickable-on-iphone)*

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-07-17T17:46:40.243

Vohuman 的回答将我引向了我自己的实现：

```
$(document).on("vclick", ".className", function() {
  // Whatever you want to do
}); 
```

代替：

```
$(document).ready(function($) {
  $('.className').click(function(){
    // Whatever you want to do
  });
}); 
```

我希望这有帮助！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-08T12:45:36.947

```
$('.publications').on('mousedown touchstart', 
   $('#filter_wrapper').show();
}); 
```

# android - Android - ICS 设置适配器

> ID：10722737
> 
> 赞同：3
> 
> 时间：2012-05-23T15:06:33.943
> 
> 标签：android, listview, user-interface, adapter

是否有任何类型的预定义适配器或自定义实用程序可以帮助我快速创建一个感觉就像原生 ICS 设置的 ListView？

我已经广泛阅读了这份文件：

[http://developer.android.com/design/patterns/settings.html#flow-structure](http://developer.android.com/design/patterns/settings.html#flow-structure)

并且完全理解它，但是滚动我自己的 ListView 适配器来处理大分隔符、细分隔符和不同大小的标题等似乎有点工作。谷歌搜索并没有产生很多面​​向编程的结果，主要是结束的项目用户，例如如何使用 ICS 中的设置。

**编辑：**浏览[源代码](https://github.com/android/platform_packages_apps_settings/blob/master/src/com/android/settings/Settings.java)似乎表明设置应用程序中嵌入了一个大型自定义适配器，在 Settings.java （应用程序入口点）中。

尽管如此，我相信我的问题仍然存在，因为我仍然想获得该适配器的提取版本，或者使用它的教程或自定义的。

**编辑 2：**也许我应该扩展[PreferenceActivity](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/preference/PreferenceActivity.java)。

**编辑3：**也许扩展不起作用，因为我正在使用[ActionBarSherlock](http://actionbarsherlock.com/)，所以我必须扩展 SherlockActivity。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:29:30.677

您应该阅读有关[ActionBarSherlock的文档](http://actionbarsherlock.com/)

# objective-c - 在 Objective-C 中实现“在 Finder 中显示”按钮

> ID：10722740
> 
> 赞同：22
> 
> 时间：2012-05-23T15:06:39.217
> 
> 标签：objective-c, macos, cocoa, finder

在我的应用程序中，我想创建一个“在 Finder 中显示”按钮。

[![在 Xcode 的 Finder 中显示](../Images/da6f1d2d01735c9efc8b656593a6168b.png)](https://i.stack.imgur.com/cPhjv.png)

我已经能够弄清楚如何弹出该目录的 Finder 窗口，但还没有弄清楚如何像操作系统那样突出显示文件。

这可能吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-23T15:18:02.340

```
NSArray *fileURLs = [NSArray arrayWithObjects:fileURL1, /* ... */ nil];
[[NSWorkspace sharedWorkspace] activateFileViewerSelectingURLs:fileURLs]; 
```

[从选择特定文件](https://stackoverflow.com/questions/7652928/launch-osx-finder-window-with-specific-files-selected)的 Launch OSX Finder 窗口中被盗

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-23T15:22:39.147

你可以使用这样的`NSWorkspace`方法`-selectFile:inFileViewerRootedAtPath:`：

```
[[NSWorkspace sharedWorkspace] selectFile:fullPathString inFileViewerRootedAtPath:pathString]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-05T08:49:21.583

值得一提的是，欧文的方法仅适用于 osx 10.6 或更高版本（参考：[https](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html) ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html ）。

因此，如果你写的东西要在老一代人身上运行，最好按照贾斯汀建议的方式来做，因为它还没有被弃用（还）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-24T01:31:11.237

```
// Place the following code within your Document subclass

// enable or disable the menu item called "Show in Finder"
override func validateUserInterfaceItem(anItem: NSValidatedUserInterfaceItem) -> Bool {
    if anItem.action() == #selector(showInFinder) {
        return self.fileURL?.path != nil;
    } else {
        return super.validateUserInterfaceItem(anItem)
    }
}

// action for the "Show in Finder" menu item, etc.
@IBAction func showInFinder(sender: AnyObject) {

    func showError() {
        let alert = NSAlert()
        alert.messageText = "Error"
        alert.informativeText = "Sorry, the document couldn't be shown in the Finder."
        alert.runModal()
    }

    // if the path isn't known, then show an error
    let path = self.fileURL?.path
    guard path != nil else {
        showError()
        return
    }

    // try to select the file in the Finder
    let workspace = NSWorkspace.sharedWorkspace()
    let selected = workspace.selectFile(path!, inFileViewerRootedAtPath: "")
    if !selected {
        showError()
    }

} 
```

# android - 在 Android SeekBar thumb 上添加动态文本

> ID：10722746
> 
> 赞同：20
> 
> 时间：2012-05-23T15:06:59.137
> 
> 标签：android, seekbar

我正在尝试在 Android 2.2 中制作这个自定义的 SeekBar，而我所做的一切似乎都是错误的！我试图在 SeekBar 的拇指图像上显示 seekbar 的值。有人有这方面的经验吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2017-03-22T09:29:57.183

我采用了一种不同的方法，它提供了更多自定义拇指的可能性。最终输出将如下所示：

[![在此处输入图像描述](../Images/2ff7ede464831c20c64f6d9306f97fc7.png)](https://i.stack.imgur.com/AUlFj.png)

首先，您必须设计将设置为拇指可绘制的布局。

**layout_seekbar_thumb.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <LinearLayout
        android:layout_width="@dimen/seekbar_thumb_size"
        android:layout_height="@dimen/seekbar_thumb_size"
        android:background="@drawable/ic_seekbar_thumb_back"
        android:gravity="center"
        android:orientation="vertical">

        <TextView
            android:id="@+id/tvProgress"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="0"
            android:textColor="#000000"
            android:textSize="14sp" />

    </LinearLayout>

</LinearLayout> 
```

`seekbar_thumb_size`根据您的要求，这里可以是任何小尺寸。我`30dp`这里用过。对于背景，您可以使用您选择的任何可绘制/图标。

现在您需要将此视图设置为拇指可绘制视图，因此请使用以下代码获取它：

`View thumbView = LayoutInflater.from(YourActivity.this).inflate(R.layout.layout_seekbar_thumb, null, false);`

在这里我建议初始化这个视图，`onCreate()`这样就不需要一次又一次地膨胀它。

现在，当 seekBar 进度发生变化时，将此视图设置为可绘制拇指。在您的代码中添加以下方法：

```
public Drawable getThumb(int progress) {
        ((TextView) thumbView.findViewById(R.id.tvProgress)).setText(progress + "");

        thumbView.measure(View.MeasureSpec.UNSPECIFIED, View.MeasureSpec.UNSPECIFIED);
        Bitmap bitmap = Bitmap.createBitmap(thumbView.getMeasuredWidth(), thumbView.getMeasuredHeight(), Bitmap.Config.ARGB_8888);
        Canvas canvas = new Canvas(bitmap);
        thumbView.layout(0, 0, thumbView.getMeasuredWidth(), thumbView.getMeasuredHeight());
        thumbView.draw(canvas);

        return new BitmapDrawable(getResources(), bitmap);
} 
```

现在从`onProgressChanged()`.

```
seekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
            @Override
            public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {

                // You can have your own calculation for progress                    
                seekBar.setThumb(getThumb(progress));
            }

            @Override
            public void onStartTrackingTouch(SeekBar seekBar) {

            }

            @Override
            public void onStopTrackingTouch(SeekBar seekBar) {

            }
        }); 
```

**注意：**初始化时也调用`getThumb()`方法`seekBar`以使用默认值对其进行初始化。

使用这种方法，您可以对进度更改有任何自定义视图。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-23T15:14:10.517

我假设你已经扩展了基类，所以你有类似的东西：

```
public class SeekBarHint extends SeekBar {
  public SeekBarHint (Context context) {
      super(context);
  }

  public SeekBarHint (Context context, AttributeSet attrs, int defStyle) {
      super(context, attrs, defStyle);
  }

  public SeekBarHint (Context context, AttributeSet attrs) {
      super(context, attrs);
  }
} 
```

现在`onDraw`，您使用自己的一些代码覆盖该方法。插入以下内容：

```
@Override
protected void onDraw(Canvas c) {
    super.onDraw(c);
} 
```

现在，您想在拇指附近绘制一些文本，但没有方便的方法来获取拇指的 x 位置。我们只需要一点数学。

```
@Override
protected void onDraw(Canvas c) {
    super.onDraw(c);
    int thumb_x = ( (double)this.getProgress()/this.getMax() ) * (double)this.getWidth();
    int middle = this.getHeight()/2;
    // your drawing code here, ie Canvas.drawText();
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-04-14T06:17:25.560

```
seekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
            @Override
            public void onProgressChanged(SeekBar seekBar, int progress, boolean b) {
                int val = (progress * (seekBar.getWidth() - 2 * seekBar.getThumbOffset())) / seekBar.getMax();
                text_seekbar.setText("" + progress);
                text_seekbar.setX(seekBar.getX() + val + seekBar.getThumbOffset() / 2);
            }

            @Override
            public void onStartTrackingTouch(SeekBar seekBar) {
                text_seekbar.setVisibility(View.VISIBLE);

            }

            @Override
            public void onStopTrackingTouch(SeekBar seekBar) {
                text_seekbar.setVisibility(View.GONE);
            }
        }); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-03-23T17:19:41.160

嘿，我找到了另一个解决方案，似乎更简单：

```
 private void setText(){
    int progress = mSeekBar.getProgress();
    int max= mSeekBar.getMax();
    int offset = mSeekBar.getThumbOffset();
    float percent = ((float)progress)/(float)max;
    int width = mSeekBar.getWidth() - 2*offset;

    int answer =((int)(width*percent +offset - mText.getWidth()/2));
    mText.setX(answer);

}

@Override
public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
    setText();
    mText.setText(""+progress);
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-01-03T11:42:18.407

这对我有用

```
@Override
public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
int val = (progress * (seekBar.getWidth() - 2 * seekBar.getThumbOffset())) / seekBar.getMax();
_testText.setText("" + progress);
_testText.setX(seekBar.getX() + val + seekBar.getThumbOffset() / 2);
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-04-27T12:03:20.650

以下代码将您的`TextView`中心与`SeekBar`拇指中心对齐。YOUR_TEXT_VIEW*宽度*必须是xml 中的*wrap_content*。

希望这段代码对您有所帮助。

```
@Override
public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
       YOUR_TEXT_VIEW.setText(Integer.toString(progress));
       double pourcent = progress / (double) seekBar.getMax();
       int offset = seekBar.getThumbOffset();
       int seekWidth = seekBar.getWidth();
       int val = (int) Math.round(pourcent * (seekWidth - 2 * offset));
       int labelWidth = YOUR_TEXT_VIEW.getWidth();
       YOUR_TEXT_VIEW.setX(offset + seekBar.getX() + val
                 - Math.round(pourcent * offset)
                 - Math.round(pourcent * labelWidth/2));
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-06-04T12:02:14.640

我使用这个库来创建可绘制文本视图，并以编程方式将该可绘制对象放入拇指中。

[https://github.com/amulyakhare/TextDrawable](https://github.com/amulyakhare/TextDrawable)

代码是这样的：

```
seekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
        @Override
        public void onStartTrackingTouch(SeekBar seekBar) {
        }
        @Override
        public void onProgressChanged(SeekBar seekBar, int progress, boolean fromTouch) {
            String dynamicText = String.valueOf(progress);
            TextDrawable drawable = TextDrawable.builder()
                    .beginConfig()
                    .endConfig()
                    .buildRoundRect(dynamicText , Color.WHITE ,20);
            seekBar.setThumb(drawable);

        }
        @Override
        public void onStopTrackingTouch(SeekBar seekBar) {

        }
    }); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-04-04T13:14:36.283

对我来说效果不错，
有一点硬代码）
请写下 smbd 可能有的改进

```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Rect;
import android.support.v7.widget.AppCompatSeekBar;
import android.util.AttributeSet;
import android.util.TypedValue;

public class CustomSeekBar extends AppCompatSeekBar {

    @SuppressWarnings("unused")
    private static final String TAG = CustomSeekBar.class.getSimpleName();

    private Paint paint;
    private Rect bounds;

    public String dimension;

    public CustomSeekBar(Context context) {
        super(context);
        init();
    }

    public CustomSeekBar(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public CustomSeekBar(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init();
    }

    private void init(){
        paint = new Paint();
        paint.setColor(Color.WHITE);
        paint.setStyle(Paint.Style.STROKE);
        paint.setTextSize(sp2px(14));

        bounds = new Rect();
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        String label = String.valueOf(getProgress()) + dimension;
        paint.getTextBounds(label, 0, label.length(), bounds);
        float x = (float) getProgress() * (getWidth() - 2 * getThumbOffset()) / getMax() +
            (1 - (float) getProgress() / getMax()) * bounds.width() / 2 - bounds.width() / 2
            + getThumbOffset() / (label.length() - 1);
        canvas.drawText(label, x, paint.getTextSize(), paint);
    }

    private int sp2px(int sp) {
        return (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_SP, sp, getResources().getDisplayMetrics());
    }
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-10-04T13:04:16.857

IMO 最好的方法是通过代码来完成。真的没那么可怕，毕竟我们都是程序员 :)

```
class ThumbDrawable(context: Context) : Drawable() {

    private val paint = Paint(Paint.ANTI_ALIAS_FLAG)
    private val textPaint = Paint(Paint.ANTI_ALIAS_FLAG)
    private val textBounds = Rect()

    private var shadowColor = context.resources.getColor(R.color.wallet_screen_option_shadow)
    private val size = context.resources.getDimensionPixelSize(R.dimen.thumbRadius).toFloat()
    private val textSize = context.resources.getDimensionPixelSize(R.dimen.thumbTextSize).toFloat()
    var progress: Int = 0

    init {
        textPaint.typeface = Typeface.createFromAsset(context.assets, "font/avenir_heavy.ttf")
        val accentColor = context.resources.getColor(R.color.accent)
        paint.color = accentColor
        textPaint.color = accentColor
        textPaint.textSize = textSize
        paint.setShadowLayer(size / 2, 0f, 0f, shadowColor)
    }

    override fun draw(canvas: Canvas) {
        Timber.d("bounds: $bounds")
        val progressAsString = progress.toString()
        canvas.drawCircle(bounds.left.toFloat(), bounds.top.toFloat(), size, paint)
        textPaint.getTextBounds(progressAsString, 0, progressAsString.length, textBounds)
        //0.6f is cause of the avenirs spacing, should be .5 for proper font
        canvas.drawText(progressAsString, bounds.left.toFloat() - textBounds.width() * 0.6f, bounds.top.toFloat() - size * 2, textPaint)
    }

    override fun setAlpha(alpha: Int) {
    }

    override fun getOpacity(): Int {
        return PixelFormat.OPAQUE
    }

    override fun setColorFilter(colorFilter: ColorFilter?) {
    }

} 
```

并在您的搜索栏实现中

```
class CustomSeekBar @JvmOverloads constructor(context: Context, attrs: AttributeSet? = null, defStyleAttr: Int = 0) :
        SeekBar(context, attrs, defStyleAttr) {

    init {
        thumb = ThumbDrawable(context)
        setPadding(0, 0, 0, 0);
    }

    override fun invalidate() {
        super.invalidate()
        if (thumb is ThumbDrawable) (thumb as ThumbDrawable).progress = progress

    }

} 
```

最终结果是这样的 [![搜索栏执行结果](../Images/e7ba5376f54bab3d97a5d1ab3b3765fe.png)](https://i.stack.imgur.com/xOWsj.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-07-25T16:48:48.667

我创建了这个例子来展示 textview 应该如何支持不同类型的屏幕尺寸以及如何计算 Thumb 的实际位置，因为有时位置可能是 0。

```
public class CustomProgressBar extends RelativeLayout implements AppCompatSeekBar.OnSeekBarChangeListener {

    @BindView(R.id.userProgressBar)
    protected AppCompatSeekBar progressSeekBar;
    @BindView(R.id.textPorcent)
    protected TextView porcent;
    @BindView(R.id.titleIndicator)
    protected TextView title;

    public CustomProgressBar(Context context) {
        super(context);
        init();
    }

    public CustomProgressBar(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    private void init() {
        LayoutInflater inflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        inflater.inflate(R.layout.custom_progressbar_view, this, true);
        ButterKnife.bind(this);
        setColors(R.color.green, R.color.progress_bar_remaining);
        progressSeekBar.setPadding(0, 0, 0, 0);
        progressSeekBar.setOnSeekBarChangeListener(this);
    }

    private void setPorcentTextViewPosition(float widthView) {
        int width = CoreUtils.getScreenSize().x;
        float xPosition = ((float) progressSeekBar.getProgress() / 100) * width;
        float finalPosition = xPosition - (widthView / 2f);
        if (width - xPosition < widthView) {
            porcent.setX(width - widthView);
        } else if (widthView < finalPosition) {
            porcent.setX(finalPosition);
        }
    }

    public void setColors(int progressDrawable, int remainingDrawable) {
        LayerDrawable layer = (LayerDrawable) progressSeekBar.getProgressDrawable();
        Drawable background = layer.getDrawable(0);
        Drawable progress = layer.getDrawable(1);

        background.setColorFilter(ContextCompat.getColor(getContext(), remainingDrawable), PorterDuff.Mode.SRC_IN);
        progress.setColorFilter(ContextCompat.getColor(getContext(), progressDrawable), PorterDuff.Mode.SRC_IN);
    }

    public void setValues(int progress, int remaining) {
        int value = (progress * remaining) / 100;
        progressSeekBar.setMax(remaining);
        porcent.setText(String.valueOf(value).concat("%"));

        porcent.post(new Runnable() {
            @Override
            public void run() {
                setPorcentTextViewPosition(porcent.getWidth());
            }
        });
        progressSeekBar.setProgress(value);
    }

    public void setTitle(String title) {
        this.title.setText(title);
    }

    @Override
    public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
    }

    @Override
    public void onStartTrackingTouch(SeekBar seekBar) {
    }

    @Override
    public void onStopTrackingTouch(SeekBar seekBar) {
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-06-01T05:32:05.037

将 TextView 添加到您的布局中。添加`onSeekBarChangeListener`.

您将需要精确度，以便文本恰好位于搜索栏拇指的中间，您必须进行一些计算。这是因为文本的宽度不同。比如说，你想显示从 0 到 150 的数字。188 的宽度与 111 不同。因此，你显示的文本总是会向某一侧倾斜。

解决它的方法是测量文本的宽度，将其从搜索栏拇指的宽度中删除，将其除以 2，然后将其添加到已接受答案中给出的结果中。现在您不会关心数字范围有多大。这是代码：

```
 override fun onProgressChanged(seekBar: SeekBar, progress: Int, fromUser: Boolean) {
                    val value = progress * (seekBar.width - 2 * seekBar.thumbOffset) / seekBar.max
                    label.text = progress.toString()
                    label.measure(0, 0)
                    val textWidth =  label.measuredWidth
                    val firstRemainder = seekThumbWidth - textWidth
                    val result = firstRemainder / 2
                    label.x = (seekBar.x + value + result)
                } 
```

# python - python子进程正在覆盖用于stdout的文件-我需要它附加到文件（windows）

> ID：10722752
> 
> 赞同：3
> 
> 时间：2012-05-23T15:07:16.533
> 
> 标签：python, windows, file, subprocess, stdout

我想将`STDOUT`of附加`subprocess.call()`到现有文件中。我下面的代码覆盖了文件 -

```
log_file = open(log_file_path, 'r+')
cmd = r'echo "some info for the log file"'
subprocess.call(cmd, shell=True, stdout=log_file, stderr=STDOUT)
log_file.close() 
```

我正在寻找`>>`in`subprocess.call()`或的等价物`subprocess.Popen()`。试图找到它让我发疯..

更新：

按照到目前为止的答案，我已将代码更新为

```
import subprocess

log_file = open('test_log_file.log', 'a+')
cmd = r'echo "some info for the log file\n"'
subprocess.call(cmd, shell=True, stdout=log_file, stderr=subprocess.STDOUT)
log_file.close() 
```

我正在从 Windows 的命令行运行此代码 -

```
C:\users\aidan>test_subprocess.py 
```

这会将文本添加到日志文件中。当我再次运行脚本时，没有添加任何新内容。它似乎仍然在覆盖文件..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T15:09:05.980

请改用“a”附加模式：

```
log_file = open(log_file_path, 'a+') 
```

如果您仍然看到以前的内容被覆盖，则可能是 Windows 需要您显式查找文件末尾；打开为 'r+' 或 'w' 并寻找到文件的末尾：

```
import os

log_file = open(log_file_path, 'r+')
log_file.seek(0, os.SEEK_END) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T15:09:22.343

修改打开 log_file_path 的方式。您正在打开文件以读取和写入“r+”。使用 'a' 附加模式而不是 'r+'：

```
log_file = open(log_file_path, 'a+') 
```

# jquery - 特定的 JQuery 函数（与 GreaseMonkey 一起使用）在与之交互之前不会更新

> ID：10722764
> 
> 赞同：1
> 
> 时间：2012-05-23T15:07:50.713
> 
> 标签：jquery, facebook, greasemonkey, contains, updating

*编辑：帖子底部的解决方案。*

我有一个自定义的 GreaseMonkey 脚本，它使用 JQuery 过滤和修改我的 Facebook 新闻提要中的某些提要项目。它一直工作得很好，但是这个特定的工作不正常：

```
$("h6.uiStreamHeadline:contains('shared') a[id^='js_']").html("someone else"); 
```

这应该做的是替换在我的新闻提要上共享特定项目的页面名称。例如，当它说“John Smith 分享了Funny-Pictures-For-Everyone 的照片”时，此功能将其转换为“John Smith 分享了其他人的照片”。

以下是我的一些其他“过滤器”：

```
$("h6.uiStreamHeadline:contains('was tagged in')").closest("li").html("<li><i style='color:#CCCCCC;margin-left:15px;'>Post Hidden (someone tagged somewhere else)</i></li>");
    $("h6.uiStreamHeadline:contains('were tagged in')").closest("li").html("<li><i style='color:#CCCCCC;margin-left:15px;'>Post Hidden (multiple friends tagged somewhere else)</i></li>");
    $("h6.uiStreamHeadline:contains('commented on her own')").closest("li").html("<li><i style='color:#CCCCCC;margin-left:15px;'>Post Hidden (someone commented on their own stuff)</i></li>");
    $("h6.uiStreamHeadline:contains('commented on his own')").closest("li").html("<li><i style='color:#CCCCCC;margin-left:15px;'>Post Hidden (someone commented on their own stuff)</i></li>");
    $("h6.uiStreamHeadline .wallArrowIcon").closest("li").html("<li><i style='color:#CCCCCC;margin-left:15px;'>Post Hidden (Wall-to-Wall post)</i></li>");
    $("h6.uiStreamHeadline:contains('commented on a')").closest("li").html("<li><i style='color:#CCCCCC;margin-left:15px;'>Post Hidden (people commenting on something i probably don't care about)</i></li>"); 
```

这些都可以正常工作，并在页面加载时进行替换。但是，有问题的功能在我与之交互之前不会更新。例如，如果页面上的名称是“Funny-Pictures-For-Everyone”，当我将鼠标放在它上面并出现 Facebook 的小弹出内容时，名称将变为“其他人”。我不知道为什么页面加载时它不会改变。我想知道这是否是时间问题，但我不知道该怎么做，我不知道为什么其余的都可以工作。

我确实理解所讨论的功能与其他大多数功能有些不同。其余的替换了整个帖子`closest("li")`，而我遇到的问题只是替换了`<a></a>`它选择的标签中的内部 HTML 或文本。

提前感谢您的帮助。

*我想出了一个似乎是解决这个问题的有效解决方案：*

正如下面的 Brock Adams 所提到的，我尝试选择的 ID 属性在我与之交互之前并不存在于元素中。所以，我必须在页面加载时找到一些东西。我检查了内部 HTML 并发现我想要选择的一个元素是唯一一个没有“类”属性的元素，无论是在与它交互之前还是之后。因此，我想出了以下似乎工作得很好：

```
$("h6.uiStreamHeadline:contains('shared') a:not([class])").html("someone else"); 
```

我 <3 jQuery XD

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T21:56:18.537

问题是，直到您将鼠标悬停在该链接上，Facebook 才会为该链接分配一个 ID（和一堆其他杂物）！

解决方案：~~永远不要使用 Facebook！曾经！~~...呃，我的意思是，为该过滤器尝试不同的方法。也许：

```
$("h6.uiStreamHeadline:contains('shared') > div.actorName > a").html("someone else"); 
```

# entity-framework - 实体框架 DBContext 生成器的用途

> ID：10722766
> 
> 赞同：1
> 
> 时间：2012-05-23T15:07:58.070
> 
> 标签：entity-framework, frameworks, entity, poco, t4

这对许多人来说可能是一个显而易见的问题，但我正在为这个问题挠头。

有人可以向我解释通过 t4 模板（例如 ADO.Net DBContext Generator）生成 POCO 类的目的/优势对标准 EDMX 数据访问有什么好处吗？

我知道它们提供了对实体类定义的可扩展性，但是如果开发团队对此不感兴趣，它们还有什么其他明显的目的或优势？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:09:56.323

正如 ThomasH 在评论中提到的，提供的链接为我提供了所需的信息。

# sitecore - Sitecore 保存访客信息

> ID：10722770
> 
> 赞同：0
> 
> 时间：2012-05-23T15:08:08.497
> 
> 标签：sitecore

我是 Sitecore 的新手。我有一个关于在 Sitecore 中为访问者保存价值的问题。我想为访问者保存一个值，下次访问者访问该网站时，我想检索这个值。

我尝试使用 Tracker.Visitor.Tag，但这是会话范围的。在下一次访问中，标签消失了。

是否可以将访问者的特定信息保存到 Sitecore 数据库？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:13:00.620

对于未经身份验证的用户而言，Sitecore 数据库并没有什么特别之处。由于您的用户是匿名的，因此可以将其视为标准的 ASP.NET 功能，因此您可以使用**会话**或**cookie**来持久化某些内容。Sitecore 数据库确实存储了 CMS 驱动的内容，如果需要，还会存储有关 Core 数据库中特定用户的数据，但是这些是经过身份验证的用户（建立在 ASP.NET 成员资格之上）。

要考虑的一件事是您希望如何使用这些信息（也许您可以在更高级别上详细说明您要完成的工作？）。我这么说的原因是，如果您使用特定于用户的数据更新组件，如果该组件在 Sitecore 中缓存 HTML 输出，除非您按照您认为是“唯一的”的确切标准进行缓存，否则它不会按用户更改用户。” 这将需要一些额外的工作来缓存和“按参数变化”，其中这些参数是您的自定义标准。

例如

1.  假设您有一个现有的子布局控件，该控件当前缓存并因数据源而异。
2.  您希望更新代码以显示用户计算机上的 cookie 认为的用户特定值。用户的特殊性现在被视为基于此 cookie。
3.  现在，您还需要更新子布局，使其既因数据源而异，又因 cookie 键而异，以将它们与其他人分开。

# eclipse - 将现有的 Gradle Git 项目导入 Eclipse

> ID：10722773
> 
> 赞同：58
> 
> 时间：2012-05-23T15:08:13.060
> 
> 标签：eclipse, gradle, import

我已经从这里安装了 eclipse gradle 插件

[http://kaczanowscy.pl/tomek/2010-03/gradle-ide-integration-eclipse-plugin](http://kaczanowscy.pl/tomek/2010-03/gradle-ide-integration-eclipse-plugin)

有没有一种简单的方法可以使用 gui 导入 eclipse gradle 项目，而不是做东西

此处描述：http: [//gradle.org/docs/current/userguide/eclipse_plugin.html](http://gradle.org/docs/current/userguide/eclipse_plugin.html)

?

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-05-24T02:58:59.730

通常这是一个简单的添加`apply plugin: "eclipse"`和`build.gradle`运行

```
cd myProject/
gradle eclipse 
```

然后刷新您的 Eclipse 项目。

有时您需要调整`build.gradle`以以某种非常特定的方式生成 Eclipse 设置。

如果您使用 STS，则对 Eclipse有[gradle 支持](http://static.springsource.org/sts/docs/2.7.0.M1/reference/html/gradle/gradle-sts-tutorial.html)，但我不确定它有多好。

我所知道的唯一一个对 gradle 有不错的原生支持的 IDE 是[IntelliJ IDEA](http://www.jetbrains.com/idea/)。它可以从 GUI 完全导入 gradle 项目。您可以尝试免费的社区版。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-08-19T07:45:18.067

有一种将 Gradle 项目导入 Eclipse 的最简单快捷的方法。只需从这里下载 Eclipse 的**Gradle 插件**。
[https://marketplace.eclipse.org/content/gradle-integration-eclipse-0](https://marketplace.eclipse.org/content/gradle-integration-eclipse-0)

然后从导入中选择 Gradle，您的项目将被导入。然后你必须点击**Build Model**来运行它。

* * *

**编辑****Gradle 插件**
的 上述链接不再有效。您可以使用@vikramvi 评论中提到的链接

 **[https://marketplace.eclipse.org/content/buildship-gradle-integration](https://marketplace.eclipse.org/content/buildship-gradle-integration)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-09-11T10:41:08.243

将以下内容添加到您的 build.gradle

```
apply plugin: 'eclipse' 
```

并浏览到项目目录

```
gradle eclipse 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-03-10T08:41:22.783

我之前已经解决了这个问题，但没有找到完整的基于 gui 的解决方案。今天我得到了 spring 提供的基于 GUI 的解决方案。

简而言之，我们只需要做这么多：

1.从更新站点在eclipse中安装插件： [站点链接](http://dist.springsource.com/snapshot/TOOLS/gradle/nightly)

2.将项目导入为gradle并浏览.gradle文件..就是这样。

完整的文档在[这里](https://github.com/spring-projects/eclipse-integration-gradle/blob/master/README.md)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-25T15:05:46.790

最简单的方法是使用sts gradle集成和导入项目

[http://static.springsource.org/sts/docs/2.7.0.M1/reference/html/gradle/gradle-sts-tutorial.html](http://static.springsource.org/sts/docs/2.7.0.M1/reference/html/gradle/gradle-sts-tutorial.html)

不要忘记单击“构建模型”按钮。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-06-23T07:53:14.267

您可以执行以下步骤：

1.  使用 Eclipse Marketplace 安装 Buildship Gradle 集成。只需键入 Buildship 并单击搜索项。现在点击安装。

2.  单击文件 -> 导入 ▸ 现有的 Gradle 项目。

3.  导航到项目根目录。

4.  单击完成以加载您的项目。

第一次导入 Gradle 项目可能需要一些时间。所以请耐心等待。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-08-15T14:30:35.480

打开eclipse并右键单击包资源管理器→导入选择gradle浏览到您签出的位置单击“构建模型”选择所有项目并点击完成

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-04-06T09:24:15.180

转到他们维护官方存储库的 GitHub 页面： [https ://github.com/spring-projects/eclipse-integration-gradle/blob/master/README.md](https://github.com/spring-projects/eclipse-integration-gradle/blob/master/README.md)

复制最新发布链接： [http](http://dist.springsource.com/release/TOOLS/gradle) ://dist.springsource.com/release/TOOLS/gradle （最新发布）

在 Eclipse 中使用它->帮助->安装新软件..->将链接粘贴到“使用”中->按 enter->选择扩展名->单击下一步并同意许可并按照提示操作。

安装后，只需将项目导入为等级项目，eclipse 将完成其余的工作。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-08-21T06:58:03.393

在回答这个问题时，`Eclipse Version: 2020-06 (4.16.0)`有一个`File --> Import --> Gradle --> Existing gradle project`菜单选项。您可以使用此选项将 gradle 项目直接导入 Eclipse。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-02-01T13:21:30.910

我使用另一个 Eclipse 插件来导入现有的 gradle 项目。

您可以使用 Eclipse Marketplace 客户端安装**Builship Gradle Gntegration 2.0 。**

然后选择**文件 ▸ 导入 ▸ 现有 Gradle 项目。**

最后，指明您的项目根目录，然后单击完成。

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2017-05-09T12:09:05.810

将以下内容添加到您的 build.gradle

```
apply plugin: 'eclipse' 
```

并浏览到项目目录

```
gradle eclipse 
```

完成后，您可以从 eclipse 中将项目导入为简单的 Java 项目。**

# blackberry - 如何检测黑莓中文本框字段上的事件？

> ID：10722782
> 
> 赞同：1
> 
> 时间：2012-05-23T15:08:48.800
> 
> 标签：blackberry

我想在屏幕上添加一个文本字段。当我在该文本框中输入任何单词/字母时，我想知道我输入的单词/字母。我还想处理在该文本中输入的任何新字母出现时的事件框或从该文本框中删除任何单词/字母后。那么应该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:53:10.147

只需`FieldChangeListener`为此字段实施和设置

# c# - xml中的命名空间问题

> ID：10722784
> 
> 赞同：0
> 
> 时间：2012-05-23T15:08:58.037
> 
> 标签：c#, asp.net, xml, xml-serialization, xsd

```
XmlElement xmlElementSAPD = xmlDocument.CreateElement("SAPD");
root.AppendChild(xmlElementSAPD);

xmlElementSAPD.AppendChild(XmlFunctions.GetXMLElement(xmlDocument, "smu", dr.GetString("sma").Trim())); 
```

上面的 c# 代码在下面创建 XML。

```
<SAPD>
<smu>123</smu>
</SAPD> 
```

如何更改上面的代码以便我可以得到

```
<ns0:SAPD>
<ns0:smu>123</ns0:smu>
</ns0:SAPD> 
```

任何人？如何在 xml 节点中添加 ns0:？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:16:11.410

您必须将命名空间添加到您的 xml 文档中。

只是给你一个想法看看下面

```
XmlDocument doc = new XmlDocument();  
XmlSchema schema = new XmlSchema();
schema.Namespaces.Add("ns0", "http://www.sample.com/file");
doc.Schemas.Add(schema); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T15:28:19.877

您的前缀 ns0 需要使用命名空间进行映射，否则 xml 将无效。

假设 ns0 被映射到`http://tempuri.org`下面的代码可以使用：

```
 XmlDocument doc = new XmlDocument();
        XmlElement sapd= doc.CreateElement("ns0","SAPD","http://tempuri.org");
        XmlElement smu = doc.CreateElement("ns0", "smu", "http://tempuri.org");
        smu.InnerText = "123";
        sapd.AppendChild(smu);
        doc.AppendChild(sapd);
        doc.InnerXml.ToString(); 
```

# .net - 检测图像中的对象

> ID：10722785
> 
> 赞同：0
> 
> 时间：2012-05-23T15:08:58.167
> 
> 标签：.net, image-processing, computer-vision, image-recognition, background-subtraction

好吧，所以这个可能有点棘手，我更多的是寻找方向而不是我想的具体答案。本质上，我需要在 VB.net 应用程序中进行一些对象检测。我想知道图片中是否有汽车。这是一张静止的图片，算法不需要太快或任何东西，但我基本上是在尝试检测图片中的汽车或没有汽车。这个想法是针对一个更大的应用程序，其中一个功能将处理一个停车场并试图判断每个停车位是否有汽车。我基本上会有一个单独的程序将一个更大的图像切割成单个空间的区域，然后这个程序将循环遍历每个空间检测汽车或没有汽车。

我也对边缘检测进行了一些研究，但我只是不确定这是否真的能很好地解决这个问题，汽车似乎有很多边缘，因为我基本上想要汽车的轮廓本身来检测这都是一个对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T15:17:20.143

您可以使用背景减法。这将涉及将空停车场图像作为背景，然后比较该图像与任何后续图像之间的变化。如果您正在查看停车位，那么您可能希望将图像拆分为多个扇区（停车位）并为每个扇区进行背景减法。然而，由于随着太阳移动，停车场的照明不断变化，您将遇到背景图像会因阴影、亮度等而发生变化的问题。处理这个问题的一种方法是逐帧比较，如果它改变了某个阈值，那么很可能是汽车停了，而不是太阳移动了，因为汽车会在很短的空间内引起更大的变化时间比灯光的效果要好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T15:25:08.893

下雪时你可以填满所有的地方。您可能想查看此链接[http://examples.simplecv.org/en/latest/examples/parking.html](http://examples.simplecv.org/en/latest/examples/parking.html)（它在 python 中，但可以提供帮助）或购买一个更可靠的实际停车场检测系统而不是比较图像。

# django - 如何从 Django 中的模型中获取特定列？

> ID：10722787
> 
> 赞同：1
> 
> 时间：2012-05-23T15:08:59.340
> 
> 标签：django

如何从 Django 中的模型中获取特定列（从广告中选择城市）以及如何仅显示重复一次的城市？（我有伦敦 x3）

我的模型：

```
class Advert(models.Model):

    title = models.CharField(max_length=255)
    company = models.CharField(max_length=255)
    city = models.CharField(max_length=255) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-23T15:13:15.853

尝试

```
Advert.objects.values('city').distinct() 
```

或者

```
Advert.objects.values_list('city', flat=True).distinct() 
```

此外，检查[文档](https://docs.djangoproject.com/en/2.2/ref/models/querysets/)是利用 Django ORM QuerySet 的必要条件。

# wpf - 查找包含隐藏节点和折叠节点的逻辑子节点

> ID：10722791
> 
> 赞同：4
> 
> 时间：2012-05-23T15:09:09.943
> 
> 标签：wpf, xaml, recursion, logical-tree

我试图找到这个问题的答案，在每一篇文章中我都找到了递归查找孩子的答案，但他们都没有与隐藏或崩溃的孩子一起工作

同样在每个帖子中，有人问这是否可能，但没有人回答，所以我开始认为这是不可能的

如果有人有办法做到这一点，我将永远感激不尽。

我的功能如下所示：

```
 public static DependencyObject FindLogicalDescendentByName(this DependencyObject source, string name)
    {
        DependencyObject result = null;
        IEnumerable children = LogicalTreeHelper.GetChildren(source);

        foreach (var child in children)
        {
            if (child is DependencyObject)
            {
                if (child is FrameworkElement)
                {
                    if ((child as FrameworkElement).Name.Equals(name))
                        result = (DependencyObject)child;
                    else
                        result = (child as DependencyObject).FindLogicalDescendentByName(name);
                }
                else
                {
                    result = (child as DependencyObject).FindLogicalDescendentByName(name);
                }
                if (result != null)
                    return result;
            }
        }
        return result;
    } 
```

- 编辑所以，我意识到我的问题是我试图在创建项目之前找到它，

我正在绑定到 xaml 中的一个属性，该属性会关闭并按给定名称查找项目，但该项目当时没有创建，如果我在 xaml 中重新订购该项目，它可以工作并找到该项目。 .. 哦！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T15:21:06.033

这是我的代码，如果您指定 X:Name 和类型，它就可以工作

调用示例：

```
System.Windows.Controls.Image myImage = FindChild<System.Windows.Controls.Image>(this (or parent), "ImageName");

/// <summary>
/// Find specific child (name and type) from parent
/// </summary>
public static T FindChild<T>(DependencyObject parent, string childName) where T : DependencyObject
{
   // Confirm parent and childName are valid. 
   if (parent == null) return null;

   T foundChild = null;

   int childrenCount = VisualTreeHelper.GetChildrenCount(parent);
   for (int i = 0; i < childrenCount; i++)
   {
      var child = VisualTreeHelper.GetChild(parent, i);
      // If the child is not of the request child type child
      T childType = child as T;
      if (childType == null)
      {
         // recursively drill down the tree
         foundChild = FindChild<T>(child, childName);

         // If the child is found, break so we do not overwrite the found child. 
         if (foundChild != null) break;
      }
      else if (!string.IsNullOrEmpty(childName))
      {
         var frameworkElement = child as FrameworkElement;
         // If the child's name is set for search
         if (frameworkElement != null && frameworkElement.Name == childName)
         {
            // if the child's name is of the request name
            foundChild = (T)child;
            break;
         }
      }
      else
      {
         // child element found.
         foundChild = (T)child;
         break;
      }
   }

     return foundChild;
  } 
```

# openerp - 如何将附件文件大量加载到 OpenERP

> ID：10722795
> 
> 赞同：2
> 
> 时间：2012-05-23T15:09:25.483
> 
> 标签：openerp

我在磁盘上有以前员工工资单的 PDF 文件。我想将它们加载到 OpenERP，作为每个员工的附件。此外，我想每个月附加更多的文件。为了实现这一点，我想编写一个特定的模块/插件，或者一个通过 XML-RPC 访问 OpenERp 的 Python 程序。

我应该如何与员工模型交互以以编程方式附加文件？是否有可用于此的 ORM 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T18:25:07.713

如果您想使用附件进行更高级的操作，我建议您查看[`document`](http://apps.openerp.com/addon/671)模块以及[`document_ftp`](http://apps.openerp.com/addon/625)模块。它们将附件存储在文件系统中，因此您只需复制文件即可，而无需通过 API。我们在 OpenERP 5.0 中使用了 FTP 服务器，它可以很好地附加大量文件。

不过要小心。当您安装这些模块时，我认为您会丢失所有当前的附件。您必须以某种方式将这些附件迁移到文件系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:43:12.140

使用 openerp 导入/导出功能。

制作 csv 文件，然后进行导入。

# c# - 将房间设置为可用

> ID：10722796
> 
> 赞同：-1
> 
> 时间：2012-05-23T15:09:25.797
> 
> 标签：c#, asp.net, sql

我的预订系统有问题。在表房间中，我有一个名为 isAvailable 的列，其数据类型为位。当 Registereduser 从带有选定索引的 gridview 预订房间时，此列设置为 0。一切正常，但现在我必须在员工用户删除选定的预订时更新表格。我的想法是在数组中保存已删除行的索引，并比较表房间和表预订的索引。如果未找到索引，则将 isAvailable 设置回 1，从而使其可用。这是个好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:14:30.190

为什么不创建一个新标志并将 IsDeleted 设置为 true？这样有两个标志，您可以查看房间是否在可用时被删除或在不可用时被删除，并为您的员工提供更多审计数据。

# android - 在 Android 中使用静态数据填充 SQLiteDatabase

> ID：10722797
> 
> 赞同：0
> 
> 时间：2012-05-23T15:09:34.467
> 
> 标签：android, sqlite, insert

我有一个包含多个表的数据库。这些表之一（运动）是我必须放置一个静态对象列表的地方，每个对象都有一个_id、名称、徽标和一个 int。_id 将被其他表用于执行一些查询（例如，从“table X”中选择，其中 sport_id = _id），所以它不应该超时更改（有没有办法更新对这个 _id 的所有引用，如果它会改变？）。我应该把代码放在哪里（我认为这将是一个简单的 db.insertSport() 列表）以使其仅添加一次这一行（并检查行号是否增加，以添加新行）？不会有太多排，最多50排。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:20:22.430

我想我会在 dbHelper 中创建一个方法来插入该数据，然后在应用程序启动时立即调用该方法。我在这里做了几个假设......首先，您将使用应用程序发送此静态信息，当您想要添加更多信息时，您将发送一个新版本。

您可以将数据作为文本文件存储在资产文件夹中，然后在方法中执行批量插入读取文件。

如果您正确设置它（使用方法中`insertWithOnConflict`的`CONFLICT_IGNORE`标志），它每次只会添加新行（如果有），因此您可以在每次应用程序启动时运行它，而不必担心重复数据或因违反约束而崩溃。

如果您只希望它在有其他信息时一次又一次地运行，请在文本文件中输入一个版本号并与前一个版本号（您可以将其存储在 SharedPreferences 中）进行检查。

**编辑**

使用 insertWithOnConflict 的示例：

```
public long createItem(String yourdata) {
    ContentValues initialValues = new ContentValues();
    initialValues.put(YOUR_COLUMN, yourdata);
    return mDb.insertWithOnConflict(YOUR_TABLE, null, initialValues,
            SQLiteDatabase.CONFLICT_IGNORE);
} 
```

[您可以在此处](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)阅读 SQLiteDatabase 类（具有常量和方法）

# asp.net - 寻找有关与我的 MVC 应用程序通信的 ASP.NET 网络表单应用程序的响应选项

> ID：10722798
> 
> 赞同：0
> 
> 时间：2012-05-23T15:09:35.500
> 
> 标签：asp.net, asp.net-mvc-3, webforms, restful-url

我已经在这里阅读了大量关于类似问题或关于这将涵盖的主题的问题/答案。我遇到了大量不同的文章，它们概述了设置 MVC 以响应入站请求。

但是，我无法清楚地了解我所面临的问题的局限性。

**问题：**

我正在创建一个 asp.net MVC 3 站点。但是，在两种情况下，我将有一个 asp.net WebForms 应用程序调用我的站点并且我需要响应。

1.  一个是简单地返回几个字符串
2.  第二个有点复杂，一个查询结果，一个不确定的数据量，用于 webforms 应用程序的报告目的。

由于#2，我是否被迫使用某种类型的服务，如 SOAP，以便可以在两个应用程序之间交换对象？

我真的很想对我的 URI 使用 RESTful 方法，但我的缺点是

1.  我必须回传的报告信息有什么限制
2.  响应将发送到网络表单应用程序

有人能给我一些关于我的选择的见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:25:16.187

听起来您需要一个单独的服务来处理这些细节，我会开始研究 Web API 来满足这些需求，您甚至可以将该 API 用于其他事情

如果 Web API 对您来说过于“早期采用”，那么您可以求助于 WCF

# ios - Flipboard soundcloud 播放器

> ID：10722802
> 
> 赞同：0
> 
> 时间：2012-05-23T15:09:48.573
> 
> 标签：ios, soundcloud

在 Flipboard 的最新更新中，他们添加了 soundcloud 集成。他们是如何集成自定义播放器的？

是否可能是带有自定义播放器 HTML 的 webview：http: [//developers.soundcloud.com/docs/custom-player](http://developers.soundcloud.com/docs/custom-player)

![在此处输入图像描述](../Images/05ef6f20211d5a15e978ec937e6be409.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:52:25.187

我不确定 UI，但音频播放肯定是在 obj c 中实现的。SoundCloud 自定义播放器无法使用，因为它需要 adobe flash。

# android - Robotium搜索setError的edittext

> ID：10722803
> 
> 赞同：1
> 
> 时间：2012-05-23T15:09:51.287
> 
> 标签：android, text, assert, robotium

我有一个 txt.setError 文本，我想检查在测试时屏幕上是否出现错误我的测试用例是；

```
solo.enterText(0, "example");
solo.clickOnImageButton(3);
assertTrue(solo.searchText("E-posta adresleri için lütfen şu biçimi kullanın: ad@example.com")); 
```

![在此处输入图像描述](../Images/c623409ee9c7663de69f02fe0bc13525.png)

onclick imagebutton后我得到了setError文本

但是我得到了 AssertionFailedError 我做错了什么？

**编辑：**

问题的根源在于 Robotium 的发布。我使用的是 2.1 ，但是对于这个断言，需要 robotsium 3.0 和更高版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-16T16:08:42.103

尝试使用 solo.waitfortext() 而不是 assertTrue(solo.searchText())。问题可能是断言在显示文本之前执行。

所以我想说你有两个可能的选择。

选项1：

```
solo.enterText(0, "example");
solo.clickOnImageButton(3);
solo.waitforactivity(solo.getcurrentactivity().tostring). // you will wait untill the screen is entirely displayed.
assertTrue(solo.searchText("E-posta adresleri için lütfen şu biçimi kullanın: ad@example.com")); 
```

选项2（最佳选项）

```
solo.enterText(0, "example");
solo.clickOnImageButton(3);
boolean textExist = solo.WaitForText("E-posta adresleri için lütfen şu biçimi kullanın: ad@example.com"));
if (!textExist){
Fail();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-30T21:45:32.027

另外的选择：

```
EditText myEditText = (android.widget.EditText) solo.getView(com.my.app.R.id.myEditText);
solo.clickOnView(myButton);

//Waits for error
solo.sleep(2000);

boolean result = myEditText.getError() == null;
if(!result){
    fail();
} 
```

# excel - Excel posix时间

> ID：10722804
> 
> 赞同：1
> 
> 时间：2012-05-23T15:09:53.110
> 
> 标签：excel, posix, epoch

Microsoft Excel 中有没有办法将常规日期转换为纪元（posix）时间？我正在尝试将所有时间作为双精度存储在数据库中，我需要首先将日期转换为我拥有的 csv 文件中的日期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T15:14:16.123

```
=(A1-25569)*86400 
```

从这里得到这个：

[http://untangible.com/2009/01/covert-unix-epoch-dates-in-microsoft-excel-include-timezone-examples.html](http://untangible.com/2009/01/covert-unix-epoch-dates-in-microsoft-excel-including-timezone-examples.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-12T18:54:49.240

我确认，这对我有用 row.Cells(, colTimestamp) = JSON("timestamp") / 86400 + 25569

您还可以在 excel 中实现一个公式来执行转换 FechaPosix - =(I2/86400)+DATE(1970;1;1)

# blackberry - 在另一位经理中添加一位经理

> ID：10722807
> 
> 赞同：0
> 
> 时间：2012-05-23T15:09:55.913
> 
> 标签：blackberry, java-me, blackberry-jde, layout-manager

如何将眼睑字段管理器添加到网格字段管理器。

我已经创建了一个网格布局。现在我想在它上面添加一个眼睑字段管理器。

我已经能够分别添加它们，但现在无法一起使用它们。

当我想集成时使用了以下代码

```
 _eyelidFieldManager.add(grid);
         add(_eyelidFieldManager); 
```

这还能如何实现？

我也尝试过添加这种方式

```
 grid.add(_eyelidFieldManager);
       add(grid); 
```

但我得到的是眼睑现场管理器位于网格下方。我想将眼睑叠加在网格顶部。这样当我点击网格屏幕上的任意位置时，眼睑就会打开。您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:18:17.067

[`EyelidFieldManager`](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/extension/container/EyelidFieldManager.html)主要有三种添加字段的方法：

*   **`addTop(Field f)`**：在上眼睑上添加一个字段。
*   **`addBottom(Field f)`**：在下眼睑上添加一个区域。
*   **`add(Field f, int x, int y)`**: 添加一个字段并将其放置在指定的绝对位置。使用此方法添加的字段将在盖子关闭后保持可见。

正如你所看到的，`EyelidFieldManager`extends from`AbsoluteFieldManager`这就是这个类如此成问题的原因，因为在盖子之间添加的字段必须使用绝对坐标进行布局。

反过来，`AbsoluteFieldManager`extends`Manager`所以它有一个额外的**`add(Field f)`**方法，该方法被覆盖以将字段添加到下眼睑。这就是您的情况。您应该改用上面列出的第三种添加方法并提供绝对坐标。

# apache-flex - 从 flex LCDS 服务中检索数据的延迟

> ID：10722810
> 
> 赞同：0
> 
> 时间：2012-05-23T15:10:13.667
> 
> 标签：apache-flex, lcds

我们使用远程对象从 java webservice 中检索数据。在初始加载时，我们正在创建 4 个远程对象并点击服务“myService”。在 java 端，从 remoteObj1 调用的函数首先执行，然后执行第二、第三和第四。但是只有在执行第 4 个远程对象的 java 函数后，才会调度所有 4 个远程对象的结果事件。

我们希望如果第一个函数首先执行，那么应该首先调度该远程对象的结果事件。它不应该等待第四个函数执行。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:41:39.700

最简单的方法是链接事件处理程序。等到第一个 RemoteObject 的结果处理程序被调用，然后进行第二次调用，依此类推。

请记住：AVM 是非阻塞和异步的，并且编程模型是事件驱动的。因此，它与同步的“幼稚”Java 代码不同。

# web-services - 启用内容类型协商时，JAXRS RESTful 服务是否容易受到 CSRF 攻击？

> ID：10722813
> 
> 赞同：4
> 
> 时间：2012-05-23T15:10:21.673
> 
> 标签：web-services, rest, jax-rs, csrf

我有一个带有 @Consumes(MediaType.JSON) 之类的注释的 RESTful API - 在这种情况下，CSRF 攻击是否仍然可以在这样的服务上进行？我一直在修补在服务器端使用 CSRFGuard 保护我的服务或从客户端进行双重提交。但是，当我尝试使用带有 enctype="text/plain" 的 FORM 发布请求时，它不起作用。[此处](http://appsandsecurity.blogspot.co.uk/2012/01/stateless-csrf-protection.html#comment-form)解释了该技术如果我的消费注释中有 MediaType.APPLICATION_FORM_URLENCODED，则此方法有效。当我使用 POST/PUT/DELETE 动词时，内容协商很有用，但 GET 仍然可以访问，这可能需要研究。

任何建议或意见都会很棒，如果您需要更多信息，请告诉我。

干杯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-01T15:46:22.650

JAX-RS 旨在创建应该是无状态的 REST API。跨站点请求伪造不是无状态应用程序的问题。

Cross Site Request Forgery 的工作方式是有人可能会欺骗您单击链接或在浏览器中打开链接，这会将您定向到您登录的站点，例如某些在线论坛。由于您已经在该论坛上登录，攻击者可以构造一个 url，这样说：someforum.com/deletethread?id=23454

该论坛程序设计不当，将根据会话 cookie 识别您，并确认您有能力删除该主题，实际上将删除该主题。

这一切都是因为程序根据会话 cookie 对您进行了身份验证（甚至基于“记住我”cookie）

使用 RESTful API 没有 cookie，请求之间不维护任何状态，因此无需防止会话劫持。

您通常使用 RESTFul api 进行身份验证的方式是发送一些额外的标头。如果有人欺骗您点击指向 RESTful API 的 url，浏览器不会发送额外的标头，因此没有风险。

简而言之 - 如果 REST API 的设计方式应该是无状态的，那么就没有跨站点伪造的风险，也不需要 CSRF 保护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-31T11:15:01.690

添加另一个答案，因为 Dmitri 的答案混合了服务器端状态和 cookie。

如果您的服务器通过多个请求将用户信息存储在内存中，则应用程序不是无状态的。这会降低水平可伸缩性，因为您需要为每个请求找到“正确”的服务器。

Cookie 只是一种特殊的 HTTP 标头。它们通常用于识别用户会话，但并非每个 cookie 都意味着服务器端状态。服务器也可以在不启动会话的情况下使用来自 cookie 的信息。另一方面，使用其他 HTTP 标头并不一定意味着您的应用程序自动是无状态的。如果您将用户数据存储在服务器的内存中，则不是。cookie 和其他标头之间的区别在于浏览器处理它们的方式。对我们来说最重要的是浏览器会在每个后续请求中重新发送它们。如果有人欺骗用户提出他不想提出的请求，这将是有问题的。

这对于使用 JSON 的 API 来说是个问题吗？是的，分两种情况：

*   攻击者让用户提交一个带有`enctype=text/plain`: Url 编码内容的表单不是问题，因为结果不能是有效的 JSON。`text/plain`如果您的服务器将内容解释为 JSON 而不是纯文本，则会出现问题。如果您的资源带有注释，`@Consumes(MediaType.JSON)`那么您应该没有问题，因为它不会接受`text/plain`并且应该返回 status `415`。（请注意，JSON 可能有一天会成为有效的编码类型，而这将不再有效）。
*   攻击者让用户提交 AJAX 请求：同源策略阻止向其他域发出 AJAX 请求，因此只要您不使用诸如`Access-Control-Allow-Origin: *`.

# mysql - GROUP BY 和/或 UNION 合适吗？还是我应该只使用嵌套的 SELECT？

> ID：10722814
> 
> 赞同：-1
> 
> 时间：2012-05-23T15:10:22.967
> 
> 标签：mysql, sql

我对“交叉引用”两列感兴趣并返回两条信息：

列是`saddr`, `daddr`, `sbytes`, `dbytes`。

我想找到`DISTINCT` `saddr`并匹配它们`DISTINCT` `daddr`，然后`SUM`是`sbytes`和`dbytes`。

我还想简单地找到每个存在的记录`saddr`数`daddr`（假设`daddr`N 记录匹配 this `saddr`）。

对于那些可能对上下文感兴趣的人，我正在使用一个名为[argus](http://qosient.com/argus/)的包及其客户端[rasqlinsert](http://qosient.com/argus/man/man1/rasqlinsert.1.pdf)来构建网络流量数据库。

谢谢，

马特

[编辑]

样本数据：

```
SELECT saddr,daddr,sbytes,dbytes FROM argus.argus2012K17 limit 5;

   '01:80:c2:00:00:0a', '20:fd:f1:74:36:96', 194, 0
   '01:80:c2:00:00:0a', '20:fd:f1:74:36:b6', 194, 0
   '192.168.100.11', '212.243.210.210', 120, 120
   '192.168.100.11', '212.243.210.210', 422, 3667
   '192.168.100.23', '99.248.99.240', 132, 0 
```

期望的结果：

```
saddr, daddr, how many records found where they both exist, sum of all sbytes in these records, sum of all dbytes in these records

    '01:80:c2:00:00:0a', '20:fd:f1:74:36:96', 2, 388, 0
    '192.168.100.11', '212.243.210.210', 2, 542, 3787
    '192.168.100.23', '99.248.99.240', 1, 132, 0 
```

我认为我在围绕查询的“它们都存在的地方”方面遇到了最大的麻烦。

[编辑2]

我得出的结论是，我只需要花时间阅读并了解[GROUP BY](http://www.sql-tutorial.com/sql-group-by-sql-tutorial/)并执行嵌套查询即可获得我想要的信息。但是，如果有人有更多的输入，将不胜感激。

[编辑 3] 解决方案：

```
SELECT saddr, daddr, SUM(sbytes), SUM(dbytes), count(saddr) FROM argus.argus2012K17 GROUP BY saddr, daddr; 
```

回报：

```
SELECT saddr, daddr, SUM(sbytes), SUM(dbytes), count(saddr) FROM argus.argus2012K17 where saddr='01:80:c2:00:00:0a' GROUP BY saddr, daddr;
    '01:80:c2:00:00:0a', '20:fd:f1:74:36:96', 326114, 0, 1681
    '01:80:c2:00:00:0a', '20:fd:f1:74:36:b6', 326114, 0, 1681 
```

地狱是的。

```
SELECT stime, saddr, daddr, SUM(sbytes), SUM(dbytes), count(saddr) FROM argus.argus2012K17 WHERE stime BETWEEN 1337187600 AND 1337187700 GROUP BY saddr, daddr; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:15:43.547

使用这些结构并没有错，假设它们给你想要的结果。用嵌套的 SELECT 模拟它们会给您相同或更差的性能。

我想你只需要这个：

```
SELECT saddr, daddr, SUM(bytes) GROUP BY saddr, daddr 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T15:54:28.767

为此，您需要一张驾驶桌和一组人。SQL 不能单独使用 group by 生成具有 0 cnt 的行：

```
select driver.saddr, driver.daddr, coalesce(t.sumbytes) as bytes
from (select saddr, daddr
      from (select distinct saddr from t) cross join
           (select distinct daddr from t)
     ) driver left outer join
     (select saddr, daddr, sum(byets) as sumbytes
      from t
      group by saddr, daddr
     ) as tsum
     on t.saddr = tsum.saddr and t.daddr = tsum.daddr 
```

此语句获取 saddr 和 daddr 的所有组合。然后它将它加入到字节的总和中。当不存在总和时，外部选择产生 0。

# .net - 如何自动更新 .NET 项目 COM 引用？

> ID：10722818
> 
> 赞同：0
> 
> 时间：2012-05-23T15:10:36.087
> 
> 标签：.net, com, build, msbuild-4.0, project-reference

我有一个旧版 VB6 COM DLL，它作为参考包含在 .NET 项目中。我的手动构建过程如下所示：

1.  构建 VB6 DLL
2.  将 VB6 DLL 复制到参考目录
3.  注册 VB6 DLL`regsvr32`
4.  在 .NET 项目中，删除旧的引用
5.  添加对新 VB6 DLL 的引用（浏览）
6.  将引用的独立属性设置为 True
7.  构建 .NET 解决方案

我正在自动化这个过程。步骤 4 到 6 给我带来了麻烦。当我注册新的 VB6 COM DLL 时，.NET 项目中的旧引用无效。通过查看项目文件，我看到了这一点：

```
<ItemGroup>
  <COMReference Include="DllName">
    <Guid>{65CDCC83-E707-4AA3-8940-FE79F265D570}</Guid>
    <VersionMajor>50</VersionMajor>
    <VersionMinor>0</VersionMinor>
    <Lcid>0</Lcid>
    <WrapperTool>tlbimp</WrapperTool>
    <Isolated>True</Isolated>
    <EmbedInteropTypes>True</EmbedInteropTypes>
  </COMReference>
</ItemGroup> 
```

我相信我需要`Guid`用 COM 的新 clsid 自动覆盖该属性，并且我可能需要更改`VersionMajor`和`VersionMinor`属性。

不幸的是，这些似乎不是 VB6 COM DLL 文件的属性。我在哪里可以获得这些信息和/或我什至走在正确的道路上？是否有一些工具或选项可以自动为我执行此操作？

**编辑**

如果我不更新引用，我得到的构建错误是 error [MSB3179](http://msdn.microsoft.com/en-us/library/ms228225%28v=vs.90%29.aspx)。

错误消息的实际文本是：

c:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft.Common.targets(2580,9)：错误 MSB3179：隔离 COM 引用“DllName”时出现问题：未检测到此组件的注册类。[路径/到/projfile.vbproj]

...其中“DllName”是我的 DLL 名称，“path/to/projfile.vbproj”是带有 COM 引用的项目文件的完全限定路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T20:19:52.700

我没有尝试过，但您可以通过使用 tlbimp 显式生成互操作程序集来实现此目的，而不是让 Visual Studio 通过添加对 COM DLL 的引用来为您完成此操作。

就像是：

1.  构建 VB6 DLL
2.  将 VB6 DLL 复制到参考目录
3.  运行 tlbimp（例如从批处理文件）以在参考目录中生成互操作程序集。
4.  .NET 项目应该在步骤 3 中具有对互操作程序集输出的引用。
5.  构建 .NET 解决方案

> 使用你的方法，我不再使用免注册 COM

我对无注册 COM 没有太多经验，但也许您可以使用命令行工具手动生成清单，而不是设置独立属性 - 例如使用[此答案](https://stackoverflow.com/a/476986/13087)中描述的 MT.EXE 工具。

# crystal-reports - IsNull Crystal Reports 的问题

> ID：10722820
> 
> 赞同：0
> 
> 时间：2012-05-23T15:10:36.577
> 
> 标签：crystal-reports, crystal-reports-12

我正在使用 Crystal Reports 12.3 和 Peachtree Accounting 2012 来管理一些数据库。我现在的任务只是制作一个包含过去 30 天内未下订单的客户的报告。我是新手，所以我请求你的帮助。

我的第一次尝试是使用这个公式（我在公式编辑器 -> 记录选择中做我所有的事情）：

`not ({Customers.LastInvoiceDate} in Aged0To30Days)`

除了空值之外，一切似乎都很好。我需要在报告记录中包含空值。所以我将公式重写为：

`not ({Customers.LastInvoiceDate} in Aged0To30Days) OR IsNull({Customers.LastInvoiceDate})`

但在 Peachtree Accounting 2012 中，我看到一个客户的空白`LastInvoiceDate`字段不在报告中。

我的最后一个公式中是否存在某种错误？还是 DateTime 类型有一些“其他”黑色值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T15:25:21.183

您应该始终首先检查空值，因此请尝试将第二个公式反转为

`isnull({Customers.LastInvoiceDate}) or not({Customers.LastInvoiceDate} in Aged0To30Days)`

如果 Crystal 遇到 null 并且没有首先明确处理，那么公式的其余部分将出错并且不计算。解决此问题的另一种方法是告诉 Crystal 在公式工作室中使用“空值的默认值”而不是“空值的例外”（这是公式工作室工具栏中的下拉设置）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T01:34:24.097

长度（修剪（{Customers.LastInvoiceDate}））= 0

一条不需要 isnull 函数和 OR 运算符的语句。

# coldfusion - Coldfusion 连接字符串设置的位置

> ID：10722821
> 
> 赞同：6
> 
> 时间：2012-05-23T15:10:38.630
> 
> 标签：coldfusion

这对我来说是新的：我正在研究一个 ColdFusion 网站。

问题是我什至找不到连接字符串。在一些 qryXXX.cfm 文件中，我发现

```
<cfquery name="GetXXX" datasource="xxxx"> 
```

但我就是找不到这个数据源的存储位置。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-23T15:15:04.937

数据源在 ColdFusion Administrator 中定义。

在默认开发人员安装中，CF 管理员可在以下位置获得：

`http://localhost:8500/CFIDE/administrator/index.cfm`
[（在服务器上，它的配置可能与此不同。）]

登录后，在左侧菜单中，转到“数据和服务”部分，第一个条目是“数据源”，这是您要进入的区域。

在此区域中，您将找到所有已定义数据源的列表 - Actions 列中的第一个图标可让您编辑/查看详细信息。

CF 管理员使用的实际数据存储在`{coldfusion-dir}/lib/neo-datasource.xml`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T17:01:44.370

在 Coldfusion 7 中，该文件称为 neo-query.xml，并存储在 jrun 安装中，位于

C:\Apps\JRun4\servers\cfusion\cfusion-ear\cfusion-war\WEB-INF\cfusion\lib

根据您的安装，路径可能会略有不同

# vb.net - 看不懂这个功能

> ID：10722822
> 
> 赞同：1
> 
> 时间：2012-05-23T15:10:40.703
> 
> 标签：vb.net, function, encryption, this

```
Public Function encrypt(ByVal message As Byte(), ByVal password As String) As Byte()

    Dim passarr As Byte() = System.Text.Encoding.Default.GetBytes(password)

    Randomize()

    Dim rand As Integer = Int((255 - 0 + 1) * Rnd()) + 1
    Dim outarr(message.Length) As Byte
    Dim u As Integer

    For i As Integer = 0 To message.Length - 1
        outarr(i) += (message(i) Xor passarr(u)) Xor rand
        If u = password.Length - 1 Then u = 0 Else u = u + 1
    Next

    outarr(message.Length) = 112 Xor rand
    Return outarr

End Function 
```

我想问的问题：

1.  `getbytes(password)`它已经声明为字符串...为什么要获取字节！

2.  这里的作用是`message`什么？

3.  正在`rand`做`outarr`什么`message`？

4.  `outarr(message.Length) = 112 Xor rand`- 我无法理解这

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:18:10.253

该函数正在加密一个字符串。由于它正在对消息执行算术计算，因此您需要一个字节表示（因此您可以对字节进行算术运算）。

`outarr`是作为加密结果的字节数组。加密基于一个随机值`rand`，它是 0 到 255 之间的整数。

我相信，这`112 xor rand`部分是为了能够从加密代码中获取随机数（通过知道“秘密”值 112）

# ruby - 面向对象的方式处理复杂的方法

> ID：10722825
> 
> 赞同：2
> 
> 时间：2012-05-23T15:10:46.527
> 
> 标签：ruby, oop

我有一个正在使用 ruby​​ 进行的项目，它需要一些工人的大量工作。大多数业务逻辑都包含在这些工作人员中，它们变得相当复杂。我设计的技术模拟了 compose 方法模式，但它严重依赖实例变量来保持状态。我设置它的方式似乎是合乎逻辑的，但我想从社区获得一些反馈，看看这是否是错误的，或者不是我可以设置的最干净的方式。

我本质上是使用工人执行（Sidekiq）方法作为一种开关

```
def perform(transaction_id, data, account_id)
  @transaction_id = transaction_id
  @data           = data
  @account        = Account.new(account_id)

  @campaign_tag   = nil
  @match_str      = nil
  @options        = nil

  has_starter_tag     || return
  find_campaign       || return
  determine_options   || return
  find_active_option  || return
  reservation_over    || return
  already_filled      || return

  send_to_inventory
end 
```

每种方法都遵循相同的逻辑。检查规则，如果不满意，执行操作（发送电子邮件等）并返回 false，从而停止执行。如果满意，则存储一些完成事务所需的 ivar 数据并返回 true，从而进入下一步。

```
def has_starter_tag
  result = true

  @campaign_tag = find_starter_tag(@account, @data[:variable])
  if !@campaign_tag
    result = false
    send_email_about_badness
    log_some_stuff
  end

  result
end 
```

为了测试这段代码，我对每个方法所依赖的实例变量进行了存根。我知道这是一种代码味道，因为我的测试知道实现而不是接口。也就是说，我喜欢这些方法的干净界面，我觉得我可以扫描源代码并确切地知道发生了什么。

如果我做错了，有人可以花点时间解释一下正确的方法（或至少另一种方法）吗？我一直在弄清楚如何处理必须执行许多似乎相互依赖的小步骤的对象时遇到问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T00:51:01.363

我的直觉是，您正试图对此进行过度架构。

您所描述的内容不算作设计模式-它只是将所需的功能分成许多单独的方法。问题是这些方法彼此紧密耦合，以至于将它们分开除了“分组”功能之外没有其他用途。这些功能似乎唯一的共同点是它们检查某些内容并取消检查失败的工作。除了重复功能之外，您可以通过将所有代码放在一个函数中并用空行分隔各个部分来实现大致相同的效果。

有时在代码中找到一些 OOP 解决方案或设计模式可能会适得其反。归根结底，真正重要的是，它是否提供了优势？它会保存代码吗？它是否使代码易于维护和扩展？（代码是否*需要*易于扩展？）不要为了 OOP 而尝试使用 OOP。

# python - 一组文件的 SFTP 完整文件路径

> ID：10722826
> 
> 赞同：0
> 
> 时间：2012-05-23T15:10:47.147
> 
> 标签：python, sftp

假设我有一个文件列表，例如

```
files = ["C:\\MyDir\\some_file.txt",
         "C:\\MyDir\\another_file.txt",
         "C:\\MyDir\\some_file.old"] 
```

我想提取以“some”开头的“.txt”文件。我使用标准的 fnmatch.filter 方法：

```
my_files = fnmatch.filter([os.path.basename(i) for i in files], "some*.txt") 
```

返回 ["some_file.txt"]。现在假设这些文件实际上位于 SFTP 站点上，我想在过滤后从 SFTP 站点下载它们。如何获取要下载的文件的完整文件路径？

```
os.path.abspath("some_file.txt") 
```

由于明显的原因将无法正常工作。我可以简单地在我的过滤器模式前加上另一个通配符（“*”），但这是一种解决方法。有没有一种干净的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T20:48:41.910

如果您想要完整路径名，则必须对完整路径名应用过滤器。`fnmatch`模式有点有限，无论如何都会转换为正则表达式，所以为什么不直接使用`re`：

```
import re
files = ["C:\\MyDir\\some_file.txt",
     "C:\\MyDir\\another_file.txt",
     "C:\\MyDir\\some_file.old"]

patern = re.compile(r"\\some[^\\]*\.txt$", re.I)
filtered_files = [f for f in files if pattern.search(f)] 
```

# actionscript-3 - AS3：如何遍历 this 的属性？就像 for(var s in this)

> ID：10722829
> 
> 赞同：1
> 
> 时间：2012-05-23T15:10:53.527
> 
> 标签：actionscript-3

一个类有一个从给定对象更新其实例属性的方法。

由于某种原因，在 ActionScript 3 中循环遍历`this`失败的属性。

我试过类似的东西：

```
class myThing() {
    public var A:String;
    public var B:String;
    public var C:String;
    ...
    public function bindToObject( obj:Object){
        for( var s in this){
            if( obj.hasOwnProperty(s)) this[s] = obj[s];
        }
    }
} 
```

这样循环永远不会执行，就好像`this`根本没有属性一样。

请就将 Object 属性复制到我的班级实例的智能方法提出建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T15:24:15.587

您可能想尝试反过来做。含义，解析源对象的属性，并将其值分配给目标对象。我自己研究了这个问题，这是我实现该方法的方式：

```
private function parseData(data:Object):void
{
    for (var property:String in data)
        if (this.hasOwnProperty(property))
            this[property] = data[property];
} 
```

它的意图与您的**bindToObject**方法非常相似，除了该方法解析参数对象这一事实。选择这种方式的原因是，在我的上下文中，目标对象的所有属性都被认为是可选的（即，如果我只为源对象传递一个属性，例如，在 3 个中，那么它不会感觉解析所有目标对象的属性）。但是，在您的情况下，上下文可能会有所不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T15:23:51.983

```
class myThing() {
    public var A:String;
    public var B:String;
    public var C:String;
    ...

    setPropertyIsEnumerable("A");
    setPropertyIsEnumerable("B");
    setPropertyIsEnumerable("C"); 
```

假设你的类扩展`Object`。

# c# - 通过带有字段的http表单上传图像

> ID：10722830
> 
> 赞同：0
> 
> 时间：2012-05-23T15:10:53.547
> 
> 标签：c#, html

我今天有一个可以发布到我的网站的程序，但我需要为我的程序添加文件上传支持（对于 jpg）。我只是让我的程序发布就遇到了这样的问题，现在经过几个小时我无法让它与文件上传一起工作。

今天我的代码不是很好，但它可以工作，我是唯一一个使用它的人。这是我的代码，有点被剥离，但我希望你能明白我需要什么帮助。谢谢！

（“upfile”是图像的输入字段名称）

```
public static string Post(string url, int id, string message)
{
    try
    {
        string param =
            string.Format(
                "MAX_FILE_SIZE=2097152&id={0}&com={1}&upfile", id, message);

        byte[] bytes = Encoding.ASCII.GetBytes(param);

        var post = (HttpWebRequest)WebRequest.Create(url);

        post.ProtocolVersion = HttpVersion.Version10;
        post.Method = "POST";
        post.AllowAutoRedirect = false;
        post.ContentType = "application/x-www-form-urlencoded";
        post.ContentLength = bytes.Length;

        post.UserAgent =
            "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.15) Gecko/2009101601 Firefox/3.0.15 (.NET CLR 3.5.30729)";
        post.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";

        Stream requestStream = post.GetRequestStream();
        requestStream.Write(bytes, 0, bytes.Length);
        requestStream.Close();

        var webResponse = (HttpWebResponse)post.GetResponse();
        var sr = new StreamReader(webResponse.GetResponseStream());
        return sr.ReadToEnd();
    }
    catch (Exception exception)
    {
        return null;
    }
} 
```

编辑：抱歉我的解释不佳，我需要帮助：我今天使用上述方法在我的网站上发布，但我需要添加支持以在我的方法中上传文件。我无法在不久的将来更改网页的工作方式，因此必须使用 POST 请求来完成。我无法让它工作，然后我尝试自己做，所以我想知道是否有人可以帮助我需要添加什么来读取图像并将其与请求一起发布！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:57:47.220

您需要使用 multipart/form-data 的编码而不是 application/x-www-form-urlencoded，然后您需要对 post 数据进行相应的编码

请参阅[使用 HTTPWebrequest (multipart/form-data) 上传文件](https://stackoverflow.com/questions/566462/upload-files-with-httpwebrequest-multipart-form-data)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T15:18:52.983

我假设您需要比当前解决方案更好的解决方案。如果您使用的是 c#，则可以使用 FILE 上传控件来上传文件。您甚至可以将其限制为您允许的有效文件类型。

控制是文件上传

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T16:01:50.040

您的内容类型不应该是`multipart/form-data;`？如果您可以使用上传课程，我可以为您提供一个。

# c# - csc.exe 引用外部 .dll 文件

> ID：10722832
> 
> 赞同：11
> 
> 时间：2012-05-23T15:10:55.280
> 
> 标签：c#, windows, csc

我正在尝试`c#`使用`Growl C# API`.

我尝试以两种不同的方式编译我的程序：

**1）**我将`.dll`文件保存在与文件相同的目录中`.cs`。比我跑

```
csc /r:Growl.Connector.dll,Growl.CoreLibrary.dll /out:test.exe *.cs 
```

它编译得很好，也运行得很好。

**2）**现在我在当前工作目录中创建了一个目录，命名为`growl`并将所有`.dll`引用保存在那里。

现在，当我尝试使用以下命令编译它时

```
csc /r:"D:\Modified\Growl_NET_Connector_SDK\libraries\growl\Growl.Connector.dll","D:
\Modified\Growl_NET_Connector_SDK\libraries\growl\Growl.CoreLibrary.dll" /out:test.exe *.cs 
```

它编译得很好，但是当我尝试运行它时，发生了下面提到的异常。

```
Unhandled Exception: System.IO.FileNotFoundException: Could not load file or assembly 'Growl.Connector, Version=2.0.0.0, Culture=n
eutral, PublicKeyToken=980c2339411be384' or one of its dependencies. The system cannot find the file specified.
 at GrowlNotification.Program.Main(String[] args) 
```

所以，我的问题是当文件位于外部文件夹中时，引用`.dll`文件的正确方法是什么。`csc`

这是第二种情况的[目录结构](http://pastie.org/3956013)。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T15:13:03.950

> 所以，我的问题是当文件位于外部文件夹中时，在 csc 中引用 .dll 文件的正确方法是什么。

您已经在*构建*时引用了它们。您只需要在*执行*时也使它们可用，但是当您想要运行它时，将它们复制到与可执行文件相同的目录中。

如果这些是已签名的程序集，您也可以使用全局程序集缓存进行调查，但我个人会坚持将可执行文件与它所依赖的库一起保存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T15:15:58.647

您可以在编译时使用 /lib 和 /reference 命令行开关添加这些。

[http://msdn.microsoft.com/en-us/library/s5bac5fx.aspx](http://msdn.microsoft.com/en-us/library/s5bac5fx.aspx)

***但是*** （引自文章）

> 使用 /lib 的替代方法是将任何所需的程序集复制到工作目录中；这将允许您简单地将程序集名称传递给 /reference。然后，您可以从工作目录中删除程序集。由于程序集清单中未指定依赖程序集的路径，因此可以在目标计算机上启动应用程序，并将在全局程序集缓存中查找并使用程序集。
> 
> 因为编译器可以引用程序集并不意味着公共语言运行时就能在运行时找到并加载程序集。有关运行时如何搜索引用的程序集的详细信息，请参阅运行时如何定位程序集。

所以乔恩斯基特的回答更好。（我只是添加这个以提供比我在评论中更多的信息，而不是作为答案。乔恩的答案是最好的 IMO）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-31T18:00:26.540

您可以在库文件夹中创建指向程序集的[符号链接](https://msdn.microsoft.com/en-us/library/windows/desktop/aa365680(v=vs.85).aspx)，这样您只需在一个位置更新它们。

# python - 在空行中重复数据，直到出现非空行

> ID：10722833
> 
> 赞同：2
> 
> 时间：2012-05-23T15:10:56.990
> 
> 标签：python, awk, formatting

我有一个如下所示的数据文件：

```
 xyz123            2.000    -0.3974     0.0  hij123       
                                          6.0  lmn123      
                                          8.7  efg123      
                                         13.9  uvw123      
                                         28.5  rst123       
 abc123            10.000     0.1943     0.0  wxy123       
                                         10.7  xyz123       
                                         19.9  pqr123     
                                         20.6  stu123      
                                         20.6  klm123      
 def123            50.000    -0.2595    19.2  jkl123      
                                         26.1  stu123      
                                         27.1  def123     
                                         27.1  ghi123     
                                         27.6  abc123 
```

*** uvw123 15.000 -0.3635

```
 lmn123            40.000    -0.3695     19.2  jkl123      
                                         26.1  stu123      
                                         27.1  def123     
                                         27.1  ghi123     
                                         27.6  abc123 
```

我需要将其转换为：

```
xyz123,2.000,-0.3974,0.0,hij123       
xyz123,2.000,-0.3974,6.0,lmn123      
xyz123,2.000,-0.3974,8.7,efg123      
xyz123,2.000,-0.3974,13.9,uvw123      
xyz123,2.000,-0.3974,28.5,rst123       
abc123,10.000,0.1943,0.0,wxy123       
abc123,10.000,0.1943,10.7,xyz123       
abc123,10.000,0.1943,19.9,pqr123     
abc123,10.000,0.1943,20.6,stu123      
abc123,10.000,0.1943,20.6,klm123      
def123,50.000,-0.2595,19.2,jkl123      
def123,50.000,-0.2595,26.1,stu123      
def123,50.000,-0.2595,27.1,def123     
def123,50.000,-0.2595,27.1,ghi123     
def123,50.000,-0.2595,27.6,abc123 
```

*** uvw123,15.000,-0.3635,

```
lmn123,40.000,-0.3695,19.2,jkl123      
lmn123,40.000,-0.3695,26.1,stu123      
lmn123,40.000,-0.3695,27.1,def123     
lmn123,40.000,-0.3695,27.1,ghi123     
lmn123,40.000,-0.3695,27.6,abc123 
```

如何使用 Python 或 AWK 或 sed 做到这一点？

更新：因此，如果您注意到输入数据中有一行看起来像“ uvw123 15.000 -0.3635 ”，并且当我使用来自 aix 的 python 代码时，该行会变得混乱。有没有办法修改您的代码并正确输出我展示的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:16:05.193

这是一个 Python 解决方案：

```
import re

with open('data.txt') as f:
  prev = []
  for line in f:
    tok = [t for t in re.split(r'\s+', line.rstrip()) if t]
    if len(tok) < len(prev):
      tok = prev[:-len(tok)] + tok
    print ','.join(tok)
    prev = tok 
```

它跟踪每列 (in `prev`) 的最新值，并使用它来填充当前行中缺失的列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T02:41:58.353

```
awk 'BEGIN {OFS = ","} NF == 5 {a = $1; b = $2; c = $3; $1 = $1; print; next} {$4 = $1; $5 = $2; $1 = a; $2 = b; $3 = c; print}' inputfile 
```

分成多行：

```
awk 'BEGIN {
        OFS = ","
    } 
    NF == 5 {
        a = $1; 
        b = $2; 
        c = $3; 
        $1 = $1; 
        print; 
        next
    } 
    {
        $4 = $1; 
        $5 = $2; 
        $1 = a; 
        $2 = b; 
        $3 = c; 
        print
    }' inputfile 
```

这样做会`$1 = $1`迫使生产线与新的`OFS`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T16:13:17.850

使用 awk：

```
awk 'BEGIN{OFS="\t";} NF==2{print a,b,c,$1,$2}{};NF==5{a=$1; b=$2; c=$3;print $1,$2,$3,$4,$5}{}' logfile 
```

这首先将输出字段分隔符设置为选项卡（您可以根据需要进行更改），然后查看行中有多少列。如果有 5 个，它将前三个设置为变量 a、b 和 c，然后将它们全部打印出来。

如果只有两列，则打印 a、b 和 c（即最后一整行的前三列），然后是该行的两列。

**更新：**

我没有注意到只有三列的行！下面的 awk 命令应该提供您指定的输出：

```
awk 'BEGIN{OFS="\t";} $1~/^[a-z]/{a=$1; b=$2; c=$3;print $1,$2,$3,$4,$5}{}$1!~/^[a-z]/{print a,b,c,$1,$2}{}' logfile 
```

这与以前类似，但查看第一个字段是否以字母开头，而不是查看列数。如果需要，这个正则表达式可以更具体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T15:58:52.163

假设文件是​​制表符分隔的。

您可以迭代每一行，并应用于`split("\t")`每一行，例如

```
for line in lines:
    result = line.split("\t") 
```

如果 len(result) 是 5，那么你点击了一个新的部分。您可以像这样解压缩这些值

```
h1, h2, h3, v1, v2 = result 
```

否则，它是

```
v1, v2 = result 
```

然后，您可以使用 打印出变量`",".join([h1, h2, h3, v1, v2])`。

至于第二个问题，没有看到文件中的隐形字符，很难分辨。例如，您可以通过在 vi 中使用“设置列表”来查看它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T16:36:57.253

一个`awk`（和`tr`）解决方案，不是特别优雅：

```
awk 'BEGIN { OFS = ","}
  { if (NF == 5) {
    split($0, a); print $1, $2, $3, $4, $5
  } else {
    print a[1], a[2], a[3], $1, $2
  } }' | tr -d ' \t' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-14T16:09:10.953

使用 awk：

```
awk 'BEGIN {OFS=","} /^[^ ]/ {f1=$1; f2=$2; f3=$3; f4=$4; f5=$5} /^[ ]/ {f4=$1; f5=$2}  {print f1,f2,f3,f4,f5}' < input.txt 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-14T16:52:09.077

你可以尝试这样的事情开始 -

```
awk 'NF>3{a=$1;b=$2;c=$3;$1=$1;print;next}NF<3{d=$1;e=$2;print a,b,c,d,e;next}{$1=$1;}1' OFS=',' file 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-05-23T15:17:32.453

一个简单的 grep 就可以做到

```
$ cat so.txt 
xyz123 2.000 -0.3974 0.0 hij123
6.0 lmn123
8.7 efg123
13.9 uvw123
28.5 rst123
abc123 10.000 0.1943 0.0 wxy123
10.7 xyz123
19.9 pqr123
20.6 stu123
20.6 klm123
def123 50.000 -0.2595 19.2 jkl123
26.1 stu123
27.1 def123
27.1 ghi123
27.6 abc123
$ cat so.txt | grep "-"
xyz123 2.000 -0.3974 0.0 hij123
def123 50.000 -0.2595 19.2 jkl123 
```

# php - If Else 语句语法错误

> ID：10722837
> 
> 赞同：0
> 
> 时间：2012-05-23T15:11:15.470
> 
> 标签：php

我有以下功能，它应该采用用户凭据并验证它们。如果它们有效，则将它们插入数据库。插入后检查它们是否成功插入。如果不返回false。如果电子邮件一开始就无效，则返回 false。Eclipse + Aptana 插件报告最后一个 else 部分的语法错误。当我尝试使代码合理化时，它似乎应该正常运行。我可以确认所有的 {brackets} 都在正确的层次顺序

这是代码：

```
 public function storeUser($name, $email, $password) {
    $uuid = uniqid('', true);
    $hash = $this->hashSSHA($password);
    $encrypted_password = $hash["encrypted"]; // encrypted password
    $salt = $hash["salt"]; // salt
    if((filter_var($email, FILTER_VALIDATE_EMAIL)) && preg_match('/@.+\./', $email)); { //validate the email 
    $result = mysql_query("INSERT INTO users(unique_id, name, email, encrypted_password, salt, created_at) VALUES('$uuid', '$name', '$email', '$encrypted_password', '$salt', NOW())"); 

    // check for successful store
    if ($result) {
        // get user details 
        $uid = mysql_insert_id(); // last inserted id
        $result = mysql_query("SELECT * FROM users WHERE uid = $uid");
        // return user details
        return mysql_fetch_array($result);
    } else {
        return false; //unsuccessful store
    }
     else { //THIS IS LINE 45
        //not a valid email
        return false;
    }
    }
} 
```

它返回以下错误：

```
05-23 11:07:10.758: E/JSON(1601): <b>Parse error</b>:  syntax error, unexpected T_ELSE in <b>/home/content/40/8529140/html/webapps/projects/functions/DB_Functions.php</b> on line <b>45</b><br />
05-23 11:07:10.758: E/JSON Parser(1601): Error parsing data org.json.JSONException: Value <br of type java.lang.String cannot be converted to JSONObject 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T15:12:38.253

```
if((filter_var($email, FILTER_VALIDATE_EMAIL)) 
      && preg_match('/@.+\./', $email)); { //<<<REMOVE THE ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T15:17:45.960

关于右大括号，您的`else`陈述处于错误的位置。如果您`}`在第二个之前移动其中一个，`else`它将起作用。实际上也许不会，您也有一个流浪者`;`，但其他建议仍然有效。

如果你更一致地缩进你的代码，你就不会被这类问题所困扰。

```
public function storeUser($name, $email, $password) {
    $uuid = uniqid('', true);
    $hash = $this->hashSSHA($password);
    $encrypted_password = $hash["encrypted"]; // encrypted password
    $salt = $hash["salt"]; // salt
    if ( //validate the email 
         filter_var($email, FILTER_VALIDATE_EMAIL) &&
         preg_match('/@.+\./', $email)
         ) {
        $result = mysql_query (
            "INSERT INTO users(unique_id, name, email, encrypted_password, salt, created_at) VALUES('$uuid', '$name', '$email', '$encrypted_password', '$salt', NOW())"
        );
        if ($result) { // check for successful store
            // get user details 
            $uid = mysql_insert_id(); // last inserted id
            $result = mysql_query("SELECT * FROM users WHERE uid = $uid");
            // return user details
            return mysql_fetch_array($result);
        } else {
            return false; //unsuccessful store
        }
    } else {
        //not a valid email
        return false;
    }
} 
```

另外：不要使用这些`mysql_*`功能。学习使用 PDO 和参数化查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T15:13:24.377

您没有正确关闭大括号，并且在外部之后有一个额外的分号`if`：

```
if((filter_var($email, FILTER_VALIDATE_EMAIL)) && preg_match('/@.+\./', $email)) { //validate the email 
   $result = mysql_query("INSERT INTO users(unique_id, name, email, encrypted_password, salt, created_at) VALUES('$uuid', '$name', '$email', '$encrypted_password', '$salt', NOW())"); 

   // check for successful store
   if ($result) {
      // get user details 
      $uid = mysql_insert_id(); // last inserted id
      $result = mysql_query("SELECT * FROM users WHERE uid = $uid");
      // return user details
      return mysql_fetch_array($result);
   } else {
     return false; //unsuccessful store
   }
} // close of outer if
else {
    //not a valid email
    return false;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T15:14:10.453

你看到这个结尾的小分号了吗？`if((filter_var($email, FILTER_VALIDATE_EMAIL)) && preg_match('/@.+\./', $email));`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T15:15:36.107

你放错了一个支架。尝试这个

```
 public function storeUser($name, $email, $password) {
    $uuid = uniqid('', true);
    $hash = $this->hashSSHA($password);
    $encrypted_password = $hash["encrypted"]; // encrypted password
    $salt = $hash["salt"]; // salt
    if((filter_var($email, FILTER_VALIDATE_EMAIL)) && preg_match('/@.+\./', $email)) { //validate the email 
    $result = mysql_query("INSERT INTO users(unique_id, name, email, encrypted_password, salt, created_at) VALUES('$uuid', '$name', '$email', '$encrypted_password', '$salt', NOW())"); 

    // check for successful store
    if ($result) {
        // get user details 
        $uid = mysql_insert_id(); // last inserted id
        $result = mysql_query("SELECT * FROM users WHERE uid = $uid");
        // return user details
        return mysql_fetch_array($result);
    } else {
        return false; //unsuccessful store
    }
    }
     else {
        //not a valid email
        return false;
    }

} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-05-23T15:13:19.523

为什么`else {}`最后有两个街区...？你只能拥有一个。

# css - * { 框尺寸：边框框；} ：要边框框还是不边框框所有元素？

> ID：10722841
> 
> 赞同：9
> 
> 时间：2012-05-23T15:11:30.833
> 
> 标签：css, margin, padding, border-box

我将开始开发一个新网站，并准备好处理浏览器用来计算元素宽度和高度的不同方法（[盒子模型的东西](http://www.w3.org/TR/CSS21/box.html)）。不知何故，我想到了：如果我只适用`box-sizing`于网站中的所有元素怎么办？

我是相信这`box-sizing: border-box;`是 CSS 中最好的命令之一的人之一，尽管它有所有的局限性。然而，同样的限制让我想知道我是否应该适用`box-sizing`于所有元素：

```
* { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; -ms-box-sizing: border-box; box-sizing: border-box; } 
```

当然，我的网站应该与尽可能多的浏览器兼容，`box-sizing`当我们想到 IE7- 时会产生一些问题。但是，有时日程安排很紧，如果不用担心这个具体问题，多花几分钟时间会很好。

无论如何，你认为应用`box-sizing:border-box;`到所有元素是一个好策略还是我应该只对真正需要它的元素继续这样做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T15:36:55.357

我认为这是个好主意。事实上，我将开始在我的网站上做同样的事情。

在这里，保罗谈到以同样的方式使用它

[http://paulirish.com/2012/box-sizing-border-box-ftw/](http://paulirish.com/2012/box-sizing-border-box-ftw/)

> 我们已经在我的一个项目中使用 *{box-sizing: border-box;} 大约一年了（部署在生产环境中，平均每月访问量超过 100 万次），而且它似乎运行得很好. 该项目已经在 IE8 和 9 以及最新的 Firefox 和 Chrome 版本中进行了测试，我们没有遇到任何问题。所有 jQuery (+UI) 偏移计算和动画都运行良好，即使在我们显示为 inline-block 的任何元素中也是如此。最近我们已经开始在移动设备（iPhone、iPad 和 Android）上测试该项目，并且我们还没有遇到任何关于 box-sizing 的问题，所以它似乎工作得很好。

我发现这有助于解决 IE7 中的问题

[https://github.com/Schepp/box-sizing-polyfill](https://github.com/Schepp/box-sizing-polyfill)

# javascript - 如何将所有行选择到表中

> ID：10722846
> 
> 赞同：1
> 
> 时间：2012-05-23T15:11:56.437
> 
> 标签：javascript, jquery

我有一个带分页的 HTML 表格。我使用此 JavaScript 选择表中的所有行： 主复选框：

```
<h:column id="selection_column">
    <f:facet name="header">
         <h:selectBooleanCheckbox class="checkall"/>
    </f:facet>
</h:column> 
```

JavaScript 代码：

```
$(window).load(function () {
        $(document).delegate(".checkall", "click", function(event) {
              $(this).closest("table").find(':checkbox').attr('checked', this.checked);
        });
    }); 
```

问题是当我使用它时，只选择了第一页中的行。不选择进入第二页的行，依此类推。我该如何解决这个问题？

编辑

我有一个想法，但我不知道它是否会起作用：我可以创建一个复选框（让我们称之为主复选框），当它被选中时，所有行都会被选中。我对其进行了测试——一旦选择了这个复选框，当我移动页面时总是会选中这个复选框。但是我需要一个 JavaScript 代码，它在加载时检查是否选中了主复选框，然后选中了所有复选框。你能帮我用这种方式重写JavaScritp吗？

# plugins - QT5 鼠标插件未使用 qtwebkit 加载

> ID：10722847
> 
> 赞同：0
> 
> 时间：2012-05-23T15:11:58.567
> 
> 标签：plugins, qt5

我已经为基于 MIPS 的嵌入式平台交叉编译了 QT5。没有指针设备。因此，通过修改 evdevmouse 插件创建了“基于套接字”的指针设备，并且它正在工作。

但是当我尝试运行“QtWebkit”时，它从不尝试搜索或加载这个插件。我不确定有什么区别。（它加载图像/ eglfs 等除此之外的其他插件）。

任何人都可以建议绕过的方法吗？

编辑：QtWebkit 是“QtTestBrowser”应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T05:24:07.447

> “但是当我尝试运行“QtWebkit”时，它从不尝试搜索或加载这个插件”

最后我找到了原因。由于我们在应用程序中所做的一些更改，argv 中存在少量损坏，因此无法正确找到“-plugin”。

我启用了 QT_DEBUG_PLUGINS，发现它根本没有尝试加载它，然后找到了原因。

# mysql - MySQL查询以显示日期之间的时间段

> ID：10722850
> 
> 赞同：0
> 
> 时间：2012-05-23T15:12:12.513
> 
> 标签：mysql

在我的表中，我有两个单独的日期字段 X 和 Y。在字段 x 中我的日期是 13/08/2008，在字段 YI 中的日期是 13/08/2015。

我想知道是否有一种 sql 方法可以计算出字段 X 和 Y 之间的六个月日期周期，并将结果显示在单独的行上？所以，我希望在两个领域有以下结果：

```
BEGIN     | END
13-Aug-08 | 13-Feb-09
13-Feb-09 | 13-Aug-09
13-Aug-09 | 15-Feb-10
15-Feb-10 | 13-Aug-10
13-Aug-10 | 14-Feb-11
14-Feb-11 | 15-Aug-11
15-Aug-11 | 13-Feb-12
13-Feb-12 | 13-Aug-12
13-Aug-12 | 13-Feb-13
13-Feb-13 | 13-Aug-13
13-Aug-13 | 13-Feb-14
13-Feb-14 | 13-Aug-14
13-Aug-14 | 13-Feb-15
13-Feb-15 | 13-Aug-15 
```

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:52:56.493

你可以尝试这样的事情：

```
DATE '2006-05-20' + INTERVAL 5 DAY   -> DATE '2006-05-25' 
DATE '2006-05-20' + INTERVAL 5 MONTH -> DATE '2006-10-20' 
DATE '2006-05-20' + INTERVAL 5 YEAR  -> DATE '2011-05-20' 
```

* * *

**示例 1：**

```
CREATE TABLE BEGIN_DATES
(
     BDates DATETIME
); 

INSERT INTO BEGIN_DATES VALUE ('13/08/2008'); 
INSERT INTO BEGIN_DATES VALUE ('13/02/2009');
INSERT INTO BEGIN_DATES VALUE ('13/08/2009');
INSERT INTO BEGIN_DATES VALUE ('15/02/2010');
INSERT INTO BEGIN_DATES VALUE ('13/08/2010');
INSERT INTO BEGIN_DATES VALUE ('14/02/2011');
INSERT INTO BEGIN_DATES VALUE ('15/08/2011');
INSERT INTO BEGIN_DATES VALUE ('13/02/2012');
INSERT INTO BEGIN_DATES VALUE ('13/08/2012');
INSERT INTO BEGIN_DATES VALUE ('13/02/2013');
INSERT INTO BEGIN_DATES VALUE ('13/08/2013');
INSERT INTO BEGIN_DATES VALUE ('13/02/2014');
INSERT INTO BEGIN_DATES VALUE ('13/08/2014');
INSERT INTO BEGIN_DATES VALUE ('13/02/2015');

SELECT BDates AS BEGIN, (BDates + INTERVAL 6 MONTH) AS END
FROM BEGIN_DATES

DROP TABLE BEGIN_DATES 
```

* * *

**示例 2：**

```
BEGIN
SET @date = '2008-08-13';
SET @Edate ='2015-08-13';

WHILE @date <= @Edate DO

SELECT @date AS BEGIN_DATE, CAST(@date AS DATETIME) + INTERVAL 6 MONTH AS END_DATE;  -- ADDDATE(@date,INTERVAL 6 MONTH)

SET @date = CAST(@date AS DATETIME) + INTERVAL 6 MONTH;   -- Or ADDDATE(@date,INTERVAL 6 MONTH)

END WHILE;
END 
```

# vb.net - 将 Excel 范围导出为图像 (VB.NET)

> ID：10722851
> 
> 赞同：2
> 
> 时间：2012-05-23T15:12:21.833
> 
> 标签：vb.net, excel, vba, charts

[我有一个工作的 excel vba 宏，它可以从这里](http://snipplr.com/view/54755/)做我想要的，我正在尝试将它转换为 VB.NET。

来自 VBA 的代码：

```
Sub bah()
''' Set Range you want to export to file
    Dim rgExp As Range: Set rgExp = Range("B2:C6")
    ''' Copy range as picture onto Clipboard
    rgExp.CopyPicture Appearance:=xlScreen, format:=xlBitmap
    ''' Create an empty chart with exact size of range copied
    With ActiveSheet.ChartObjects.Add(Left:=rgExp.Left, Top:=rgExp.Top, _
    Width:=rgExp.Width, Height:=rgExp.Height)
    .Name = "ChartVolumeMetricsDevEXPORT"
    .Activate
    End With
    ''' Paste into chart area, export to file, delete chart.
    ActiveChart.Paste
   ActiveSheet.ChartObjects("ChartVolumeMetricsDevEXPORT").Chart.Export "C:\Users\ajohnson\Desktop\workdamnit.jpg"
ActiveSheet.ChartObjects("ChartVolumeMetricsDevEXPORT").Delete
End Sub 
```

这样做是获取一个 excel 范围，然后将其放入作为该范围副本的图表中，并将其保存为 JPG。

这是我最近尝试使它成为 VB.NET：

```
Dim xlApp As New Excel.Application
Dim xlWorkBook As Excel.Workbook
Dim xlWorkSheet As Excel.Worksheet
Dim xlRange As Excel.Range
xlWorkBook = xlApp.Workbooks.Open("C:\test.xlsx")
xlWorkSheet = xlWorkBook.Sheets("Sheet1")

 xlRange = xlWorkSheet.Range("B2:C6")
        With xlWorkSheet.ChartObjects.add(xlRange.Left, xlRange.Top, xlRange.Width, xlRange.Height)
            .name = "Chart1"
            .activate()
        End With
xlWorkSheet.ChartObjects("Chart1").Paste()
        xlWorkSheet.ChartObjects("Chart1").chart.export(Filename:="C:\Users\ajohnson\Desktop\saveit.jpg")
        xlWorkSheet.ChartObjects("Chart1").delete() 
```

我在转换`ActiveChart.Paste`方法时遇到了麻烦。我无法让它在 VB.NET 中工作。当我在 VB.NET 中执行此操作时，它要么抛出错误，要么只留下一个空框（如果我`.chart`在粘贴它运行之前添加，但不粘贴任何值），但在 VBA 中它会填充感兴趣的值。我曾尝试创建一个图表对象，但这似乎也不起作用。

我觉得我快要解决它了，但我不能完全理解它。我想我可以将它保留为 VBA 宏并从 VB.NET 调用它，但这在某种程度上似乎很荒谬。任何帮助将不胜感激。我也对不同的方法持开放态度，这正是我遇到的在 VBA 中运行良好的东西，所以我认为这是一个很好的起点。

一如既往的感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T16:50:32.363

我只需要更加努力地访问 MSDN 就可以到达那里。原来你必须将图表对象放在图表中，我得到的代码如下所示：

```
 xlRange = xlWorkSheet.Range("B2:C6")
    xlRange.CopyPicture(Excel.XlPictureAppearance.xlScreen, Excel.XlCopyPictureFormat.xlPicture)
    Dim oChtobj As Excel.ChartObject = xlWorkSheet.ChartObjects.add(xlRange.Left, xlRange.Top, xlRange.Width, xlRange.Height)
    Dim oCht As Excel.Chart
    oCht = oChtobj.Chart
    oCht.Paste()
    oCht.Export(Filename:="C:\saveit.jpg")
    oChtobj.Delete() 
```

我打算删除这个问题，因为它很快就被我解决了（这忽略了我在这里发布之前花费的大量时间），但是当我搜索像我这样的问题时，它会来到这个页面，所以也许这将在未来帮助某人。如果您出于某种原因希望将范围从 excel 复制到 jpg（可能将其附加到 Outlook 电子邮件的正文，因为这就是我正在做的事情），这应该适合您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T23:12:50.017

并且 C# 等效项需要调用 Activate() 否则将抛出 COMException

```
Excel.Range xlRange = xlWorkSheet.Range("B2:C6");

range.CopyPicture(Excel.XlPictureAppearance.xlScreen, Excel.XlCopyPictureFormat.xlPicture);
Excel.ChartObject chartObj = myWorksheet.ChartObjects().Add(range.Left, range.Top, range.Width, range.Height);

chartObj.Activate();  // Don't Forget!

Excel.Chart chart = chartObj.Chart;
chart.Paste();
chart.Export(@"C:\image.png");

chartObj.Delete(); 
```

# java - 使用 Jersey 通过 Graph API 上传照片

> ID：10722855
> 
> 赞同：2
> 
> 时间：2012-05-23T15:12:45.390
> 
> 标签：java, rest, facebook-graph-api, upload, jersey

我有一个 Java 应用程序，我尝试通过带有 Jersey 的图形 api 将照片上传到 Facebook。到目前为止，泽西岛一切正常，我可以发布消息等。

我搜索了几个小时以找到一个如何做到这一点的例子。我发现的最好的教程是这个：

[http://neopatel.blogspot.de/2011/04/jersey-posting-multipart-data.html](http://neopatel.blogspot.de/2011/04/jersey-posting-multipart-data.html)

我唯一知道的是我必须使用 multipart/formdata。

有没有人有一个例子或知道必须这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T11:44:29.720

您是否尝试使用[jersey-multipart](http://jersey.java.net/nonav/apidocs/1.8/contribs/jersey-multipart/index.html)包？

您为文件创建一个`FormDataMultiPart`，为消息和 access_token 创建一个。`FileDataBodyPart``FormDataBodyPart`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T18:10:42.120

这是我的解决方案。

```
String url = "https://graph.facebook.com/me/photos";
File file = new File("path");

ClientConfig cc = new DefaultClientConfig();
cc.getClasses().add(MultiPartWriter.class);
Client client = Client.create(cc);

WebResource webResource = client.resource(url); 
FormDataMultiPart fdmp = new FormDataMultiPart(); 

fdmp.bodyPart(new FileDataBodyPart("source", file, MediaType.APPLICATION_OCTET_STREAM_TYPE));
fdmp.bodyPart(new FormDataBodyPart("message", "YAY I did it!"));
fdmp.bodyPart(new FormDataBodyPart("access_token", accessToken));

ClientResponse response = webResource.type(MediaType.MULTIPART_FORM_DATA_TYPE).post(ClientResponse.class, fdmp); 
String string = response.getEntity(String.class); 
```

# ios - JSON 的 NSMutableDictionary

> ID：10722857
> 
> 赞同：1
> 
> 时间：2012-05-23T15:12:53.967
> 
> 标签：ios, xcode, json, nsmutabledictionary

我遇到了一个问题！

我有一个带有 JSON 的字符串，例如：

> {"用户名":"用户名","密码":"密码"}

我用 xcode 构建这个 JSON 字符串，如：

```
 NSMutableDictionary *jsonDict = [[NSMutableDictionary alloc] init];
     [jsonDict setValue:self.usernameField.text forKey:@"UserName"];
     [jsonDict setValue:self.passwordField.text forKey:@"PassWord"];
     NSLog(@"Dict: %@",jsonDict);

     NSData *jsonData = [NSJSONSerialization dataWithJSONObject:jsonDict options:kNilOptions error:nil];
     NSString *jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];
     NSLog(@"JSON String: %@",jsonString);

     NSString *postStr = [NSString stringWithFormat:@"%@",jsonString]; 
```

但现在我想要一个带有 JSON 的字符串，例如：

```
{ "comp": [
  { "id": "1" },
  { "id": "2" },
  { "id": "3" }
 ],
"contact": [
  { "mail": "some@email.com", "name": "Name"  },
  { "mail": "email@email.com", "name": "Name"  }
 ]
} 
```

但是我该怎么做呢？有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:17:08.913

这会给你补偿。使用你所拥有的和这个例子，你应该能够很容易地取得联系。

```
NSDictionary *id1 = [NSDictionary dictionaryWithObjectsAndKeys:
                       @"1", "id", nil];
NSDictionary *id2 = [NSDictionary dictionaryWithObjectsAndKeys:
                       @"2", "id", nil];
NSDictionary *id3 = [NSDictionary dictionaryWithObjectsAndKeys:
                       @"3", "id", nil];

NSArray *ids = [NSArray arrayWithObjects:id1, id2, id3, nil];

NSDictionary *comp = [NSDictionary dictionaryWithObjectsAndKeys:ids, @"comp", nil]; 
```

此外，请查看以下库以轻松进行序列化/反序列化。 [JSONKit](https://github.com/johnezang/JSONKit)

# c++ - 如何创建类类型数组？

> ID：10722858
> 
> 赞同：6
> 
> 时间：2012-05-23T15:12:55.260
> 
> 标签：c++, arrays, types, abstract-factory

我有一个类“Base”，以及从 Base 派生的几十个类。我想有一种方法可以通过索引为我创建正确的类。像这样：

```
class Base
{
};

class A : public Base
{
}

class B : public Base
{
}

class C : public Base
{
}

Type array = { A, B, C }; 
```

然后我可以做`new array[i];`

如何用 C++(0x) 实现这一点？通常我会使用抽象工厂模式。但是因为我有很多派生类，这真的会减慢程序的速度。

由于派生类只会使用一次，我还教过使用它：

```
Base *array = { new A, new B, new C }; 
```

但这会导致巨大的内存消耗，而不是计算不是每个类都会一直被使用。

有什么建议吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T15:37:02.797

您不能使用类数组，但可以使用指向函数的指针数组。

```
typedef std::unique_ptr<Base> (*Creator)();

template <typename T>
std::unique_ptr<Base> make() { return new T{}; }

Creator const array[] = { make<A>, make<B>, make<C> };

int main() {
    std::unique_ptr<Base> b = array[1]();

    b->foo();
} 
```

对于那些担心创建这么多模板函数的成本的人，这里有一个例子：

```
#include <stdio.h>

struct Base { virtual void foo() const = 0; };

struct A: Base { void foo() const { printf("A"); } };
struct B: Base { void foo() const { printf("B"); } };
struct C: Base { void foo() const { printf("C"); } };

typedef Base* (*Creator)();

template <typename T>
static Base* make() { return new T{}; }

static Creator const array[] = { make<A>, make<B>, make<C> };

Base* select_array(int i) {
    return array[i]();
}

Base* select_switch(int i) {
    switch(i) {
    case 0: return make<A>();
    case 1: return make<B>();
    case 2: return make<C>();
    default: return 0;
    }
} 
```

LLVM/Clang 生成以下输出：

```
define %struct.Base* @select_array(int)(i32 %i) uwtable {
  %1 = sext i32 %i to i64
  %2 = getelementptr inbounds [3 x %struct.Base* ()*]* @array, i64 0, i64 %1
  %3 = load %struct.Base* ()** %2, align 8, !tbaa !0
  %4 = tail call %struct.Base* %3()
  ret %struct.Base* %4
}

define noalias %struct.Base* @select_switch(int)(i32 %i) uwtable {
  switch i32 %i, label %13 [
    i32 0, label %1
    i32 1, label %5
    i32 2, label %9
  ]

; <label>:1                                       ; preds = %0
  %2 = tail call noalias i8* @operator new(unsigned long)(i64 8)
  %3 = bitcast i8* %2 to i32 (...)***
  store i32 (...)** bitcast (i8** getelementptr inbounds ([3 x i8*]* @vtable for A, i64 0, i64 2) to i32 (...)**), i32 (...)*** %3, align 8
  %4 = bitcast i8* %2 to %struct.Base*
  br label %13

; <label>:5                                       ; preds = %0
  %6 = tail call noalias i8* @operator new(unsigned long)(i64 8)
  %7 = bitcast i8* %6 to i32 (...)***
  store i32 (...)** bitcast (i8** getelementptr inbounds ([3 x i8*]* @vtable for B, i64 0, i64 2) to i32 (...)**), i32 (...)*** %7, align 8
  %8 = bitcast i8* %6 to %struct.Base*
  br label %13

; <label>:9                                       ; preds = %0
  %10 = tail call noalias i8* @operator new(unsigned long)(i64 8)
  %11 = bitcast i8* %10 to i32 (...)***
  store i32 (...)** bitcast (i8** getelementptr inbounds ([3 x i8*]* @vtable for C, i64 0, i64 2) to i32 (...)**), i32 (...)*** %11, align 8
  %12 = bitcast i8* %10 to %struct.Base*
  br label %13

; <label>:13                                      ; preds = %9, %5, %1, %0
  %.0 = phi %struct.Base* [ %12, %9 ], [ %8, %5 ], [ %4, %1 ], [ null, %0 ]
  ret %struct.Base* %.0
} 
```

不幸的是，它还不够智能，无法使用常规数组代码自动内联函数（LLVM 优化器的已知问题，我不知道 gcc 是否做得更好）......但`switch`确实可以使用它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-23T15:35:35.890

```
typedef Base* BaseMaker();

template <class X> Base* make() {
  return new X;
}

BaseMaker* makers[] = { make<A>, make<B>, make<C> };

Base* b = makers[2](); 
```

# python - 字符串插值期间自定义添加方法失败

> ID：10722859
> 
> 赞同：8
> 
> 时间：2012-05-23T15:12:56.043
> 
> 标签：python, python-3.x

```
#it's python 3.2.3
class point:
    def __init__(self, x, y):
        self.x = x
        self.y = y

    def __add__(self, point):
        self.x += point.x
        self.y += point.y
        return self

    def __repr__(self):
        return 'point(%s, %s)' % (self.x, self.y)

class Test:
    def __init__(self):
        self.test1 = [point(0, i) for i in range(-1, -5, -1)]
        self.test2 = [point(i, 0) for i in range(-1, -5, -1)]

        print('%s\n+\n%s\n=\n%s' % (self.test1[0], self.test2[0], self.test1[0] + self.test2[0]))

test = Test()
input() 
```

这个程序的输出是

```
point(-1, -1)
+
point(-1, 0)
=
point(-1, -1) 
```

但应该是

```
point(-1, -1)
+
point(-1, 0)
=
point(-2, -1) 
```

但如果我这样做

```
print(point(-1, -1) + point(-1, 0)) 
```

它完美地工作

我想知道为什么，以及如何解决这个问题

ps对不起，如果我的英语不好:)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-23T15:17:13.157

您的`__add__`函数将左侧参数修改为`+`. 例如：

```
>>> x = point(0, 0)

>>> x + point(1, 1)
point(1, 1)

>>> x
point(1, 1) 
```

你应该变成`__add__`像

```
def __add__(self, oth):
    return point(self.x + oth.x, self.y + oth.y) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T15:41:46.610

你说输出应该是：

```
point(-1, -1)
+
point(-1, 0)
=
point(-2, -1) 
```

实际上应该是：

```
point(0, -1)
+
point(-1, 0)
=
point(-1, -1) 
```

因为您正在创建第一个点`[point(0, i) for i in range(-1, -5, -1)]`（注意`x`参数是`0`）。

这是`(self.test1[0], self.test2[0], self.test1[0] + self.test2[0]))`被评估的结果 - 加法修改了该元组中的第一个点（它们是同一个对象）。这也是您的第二个示例正常工作（或看起来）的原因 - 您只打印一次修改后的对象。

您提供的实现`__add__`适用于`__iadd__`实现`+=`运营商。正确的实现应该创建一个全新的`point`对象：

```
def __add__(self, oth):
    return point(self.x + oth.x, self.y + oth.y) 
```

# jquery - jQuery使用.position在div中水平和垂直旋转图像

> ID：10722862
> 
> 赞同：-1
> 
> 时间：2012-05-23T15:13:10.470
> 
> 标签：jquery, jquery-ui

这是我的小提琴示例：

[http://jsfiddle.net/jwuliger/jSXNm/](http://jsfiddle.net/jwuliger/jSXNm/)

我正在尝试使用 .position UI 方法使图像在我的容器 div 中居中。

```
 $draggable.position({ of: $canvas, my: 'center', at: 'center' }); 
```

有人可以帮我让这张图片在旋转时在画布 div 中水平和垂直居中吗？特别是在角度 90 和 270 处。

它不工作。任何其他解决方案也可以！

谢谢！

**编辑：**

要使图像旋转，请单击图像。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-23T18:33:52.573

我找到了一个解决方案：

[http://jsfiddle.net/jwuliger/jSXNm/1/](http://jsfiddle.net/jwuliger/jSXNm/1/)

我只是玩了边距：

```
 var canvasWidth = parseInt($("." + $canvas.attr("class").replace(" ", ".")).width());
 var canvasHeight = parseInt($("." + $canvas.attr("class").replace(" ", ".")).height());
 var offsetLeft = (canvasWidth - $draggable.width()) / 2;
 var offsetTop = (canvasHeight - $draggable.height()) / 2;
 $draggable.css({ 'margin-top': offsetTop - 2, 'margin-left': offsetLeft }); 
```

# c++ - 删除获取 AccessViolationException 的指针

> ID：10722865
> 
> 赞同：2
> 
> 时间：2012-05-23T15:13:21.813
> 
> 标签：c++

我有一个类指针声明：

```
MyClass* a; 
```

在销毁方法中，我有：

```
 if (a)
    {
        delete a;
        a= NULL;
    } 
```

删除指针a时出现问题：

```
Attempted to read or write protected memory. This is often an indication that other memory is corrupt. 
```

问题的原因是什么，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T15:20:50.893

使用您当前的声明：

```
MyClass* a; 
```

`a`得到一个随机值。如果您以后再也没有给它一个有效值，例如：

```
a = new MyClass(); 
```

它将指向内存中的未知位置，很可能不是为您的程序保留的内存区域，因此当您尝试删除它时会出错。

避免这个问题的最简单方法是`a`在声明它时给出一个值：

```
MyClass* a = new MyClass(); 
```

或者，如果您在声明它时不能给它一个值（也许您还不知道），请将它分配给 null：

```
MyClass* a = 0; 
```

顺便说一句，您可以`if (a)`从代码中删除测试 ( )。`delete`是对空指针的无操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T15:16:59.017

除非您在此之后初始化了指向某物的指针：

```
MyClass* a; 
```

指针`a`将保存一些随机值。所以你的测试

```
if (a) { } 
```

将通过，您尝试删除一些随机内存位置。

您可以通过初始化指针来避免这种情况：

```
MyClass* a = 0; 
```

其他选项是指向的对象已在别处删除并且指针未设置为`0`，或者它指向在堆栈上分配的对象。

正如在别处所指出的那样，您*可以*通过使用智能指针而不是首先使用裸指针来避免所有这些麻烦。我建议看看[std::unique_ptr](http://en.cppreference.com/w/cpp/memory/unique_ptr)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T15:18:31.923

使用智能指针释放内存。`delete`在应用程序代码中总是错误的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T15:15:09.913

你是如何分配`a`指向的内存的？如果你使用`new[]`（为了创建一个数组`MyClass`），你必须用`delete[] a;`. 如果您分配它`malloc()`（在使用类时这可能是一个坏主意），您必须使用`free()`.

如果你用 分配了内存`new`，你可能在其他地方出现了内存管理错误——例如，你可能已经 deallocated 了`a`，或者你写的东西超出了某个数组的范围。尝试使用 Valgrind 来调试内存问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-23T15:16:43.510

你应该使用

```
MyClass* a = NULL; 
```

在你的声明中。如果您从不实例化 a，则指针指向未定义的内存区域。当包含类的析构函数执行时，它会尝试到`delete`那个随机位置。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-23T15:21:42.587

当你这样做时，`MyClass* a;`你声明一个指针而不分配任何内存。你不初始化它，`a`也不一定是NULL。因此，当您尝试删除它时，您的测试`if (a)`成功，但释放失败。你应该这样做，`MyClass* a = NULL;`或者`MyClass* a(nullptr);`如果你可以使用 C++11。（我假设在这种情况下您不会`new`在任何地方使用，因为您告诉我们您只声明了一个指针。）

# function - 当您从另一个窗体调用它时，如何使 VB6 函数返回一个值？

> ID：10722868
> 
> 赞同：0
> 
> 时间：2012-05-23T15:13:32.810
> 
> 标签：function, vb6

我有一个名为 Form1 的表单。在 Form1 中，我有以下代码 -

```
Dim details As clsDetails

Set details = getDetials(1) ' This fails. It doesn't assign a value. 
```

getDetails 函数在一个单独的模块中声明如下 -

```
Public Function getDetials(detailNumber As Integer) As clsDetails

    Dim details As clsDetails

    Select Case detailNumber
        Case "1"
            Debug.Print "Inside case1"

            Set details = getDetail1()

            Debug.Print details.comment ' This prints correctly.

    End Select

    Set getDetails = details

End Function 
```

但是，当我执行上述代码时，尽管调用了 getDetails 函数并在其中正确打印了详细信息，但 Form1 中的 details 变量并没有被设置。如何纠正这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T15:29:09.480

你有`Option Explicit`定义关键字吗？

看起来你可能有错字。您的函数被调用`getDetials`，但您将结果设置为的变量是`getDetails`，因此未设置返回值。

我修正了错字，一切都按我的预期工作。使用`Option Explicit`关键字将捕获这些类型的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T15:31:07.800

我认为这可能是没有[Option Explicit On的情况](http://msdn.microsoft.com/en-us/library/aa266183%28v=vs.60%29.aspx)

检查表单顶部是否有 Option Explicit（实际上无处不在）

您的类型错误声明了函数`getDetials`，然后设置了一个调用`getDetails`新创建的类的对象，实际上是在创建一个新对象，并且根本没有设置函数返回。

插入 Option Explicit，你会发现它不会编译！

当您在任何地方添加 Option Explicit 时，请转到`Tools`> `Options`>`Editor`选项卡并勾选框`Require variable declaration`- 这将确保每次向项目添加新代码文件时都会添加它。

# c# - 您可以在选择项目之前在 linq 查询中设置属性吗？

> ID：10722872
> 
> 赞同：3
> 
> 时间：2012-05-23T15:13:45.057
> 
> 标签：c#, .net, linq, list, linq-to-objects

有没有办法在查询中间设置属性？

```
var products = from p in Products
               let pricecalc = p.IsDiscontinued ? 0 : p.UnitPrice
               // somehow set p.Price = pricecalc
               select p; 
```

我知道我可以使用 `select new Product { .. set props here .. }`，但我不想这样做。

目前，我在想我将不得不使用 a`foreach`来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T15:19:17.477

是的，但您需要一个扩展方法：

```
public static TSource Apply<TSource>(this IEnumerable<TSource> source, Action<TSource> action)
    where TSource : class // wouldn't work for value types, since the action would work on a copy
{
    foreach(var item in source)
    {
        action(item);
        yield return item;
    }
} 
```

然后你可以像这样使用它：

```
var products = Products.Apply(p => p.Price = p.IsDiscontinued ? 0 : p.UnitPrice); 
```

但是我不建议这样做；Linq 查询不应该产生副作用。您可能应该更改查询以返回包含更新价格的新对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T15:24:49.907

代替

```
 let pricecalc = p.IsDiscontinued ? 0 : p.UnitPrice 
```

采用

```
 let pricecalc = (p.Price = p.IsDiscontinued ? 0 : p.UnitPrice) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T15:19:22.627

```
Products.Select(p => {
    var pricecalc = p.IsDiscontinued ? 0 : p.UnitPrice;
    p.Price = pricecalc;
    return p;
}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T15:24:01.573

您*可以*将其用于 LINQ 语句，但据我所知，如果没有某种解决方法，就无法明确地做到这一点。

像这样的东西会照顾它，而不需要任何额外的方法：

```
var products = from p in Products                
    let pricecalc = p.IsDiscontinued ? 0 : p.UnitPrice                
    //introduce a throwaway let variable, just to modify something on p
    let ignored = p.Price = pricecalc
    select p; 
```

正如其他人所说，我建议不要使用这种方法。

# sql - 在 Oracle 中避免相关子查询

> ID：10722874
> 
> 赞同：0
> 
> 时间：2012-05-23T15:13:45.383
> 
> 标签：sql, database, oracle, subquery, oracle9i

在 Oracle 9.2.0.8 中，我需要返回一个记录集，其中每个字段 (WO_NUM) 的特定字段 (LAB_SEQ) 最大（它是顺序 VARCHAR 数组“0001”、“0002”等） . 要选择最大值，我尝试按降序排序并选择第一行。我在 StackOverflow 上可以找到的所有内容都表明，唯一的方法是使用相关子查询。然后我在外部查询的 WHERE 子句中使用这个最大值来为每个 WO_NUM 获取我想要的行：

```
SELECT lt.WO_NUM, lt.EMP_NUM, lt.LAB_END_DATE, lt.LAB_END_TIME
FROM LAB_TIM lt WHERE lt.LAB_SEQ = (
   SELECT LAB_SEQ FROM (
      SELECT lab.LAB_SEQ FROM LAB_TIM lab WHERE lab.CCN='1' AND MAS_LOC='1'
          AND lt.WO_NUM = lab.WO_NUM ORDER BY ROWNUM DESC
   ) WHERE ROWNUM=1
) 
```

但是，这会为 lt.WO_NUM 错误返回无效标识符。研究表明，ORacle 8 只允许关联子查询更深一层，并建议重写以避免子查询——选择最大值的讨论表明无法做到这一点。任何帮助执行此语句将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T15:19:13.437

您的相关子查询需要类似于

```
SELECT lt.WO_NUM, lt.EMP_NUM, lt.LAB_END_DATE, lt.LAB_END_TIME
FROM LAB_TIM lt WHERE lt.LAB_SEQ = (
   SELECT max(lab.LAB_SEQ)
     FROM LAB_TIM lab 
    WHERE lab.CCN='1' AND MAS_LOC='1'
      AND lt.WO_NUM = lab.WO_NUM 
  ) 
```

由于您使用的是 Oracle 9.2，因此使用相关子查询可能会更有效。我不确定谓词`lab.CCN='1' AND MAS_LOC='1'`在您当前的查询中做了什么，所以我不太确定如何将它们转换为分析函数方法。`LAB_SEQ`和的组合是`WO_NUM`不是唯一的`LAB_TIM`？您是否需要在`CCN`和上添加谓词`MAS_LOC`才能为每个 获得一个唯一的行`WO_NUM`？或者您是否使用这些谓词来减少输出中的行数？基本方法将类似于

```
SELECT *
  FROM (SELECT lt.WO_NUM, 
               lt.EMP_NUM, 
               lt.LAB_END_DATE, 
               lt.LAB_END_TIME,
               rank() over (partition by wo_num
                                order by lab_seq desc) rnk
          FROM LAB_TIM lt)
   WHERE rnk = 1 
```

但我不清楚是否需要将它们添加到解析函数中的子句中`CCN`，或者是否需要将它们添加到子句中。`MAS_LOC``ORDER BY``WHERE`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T15:35:58.660

这是关联子查询更好的一种情况，尤其是在表上有索引的情况下。但是，应该可以将相关子查询重写为连接。

我认为以下是等价的，没有相关的子查询：

```
SELECT lt.WO_NUM, lt.EMP_NUM, lt.LAB_END_DATE, lt.LAB_END_TIME
FROM (select *, rownum as r
      from LAB_TIM lt
     ) lt join
     (select wo_num, max(r) as maxrownum
      from (select LAB_SEQ, wo_num, rownum as r
            from LAB_TIM lt
            where lab.CCN = '1' AND MAS_LOC = '1'
           ) 
     ) ltsum
     on lt.wo_num = ltsum.wo_num and
        lt.r = ltsum.maxrownum 
```

我有点不确定 Oracle 如何在 ORDER BY 中使用 rownums。

# ruby-on-rails - 文件上传 Rspec 集成否定测试失败

> ID：10722875
> 
> 赞同：2
> 
> 时间：2012-05-23T15:13:49.773
> 
> 标签：ruby-on-rails, rspec, paperclip, integration-testing

我有几个自定义验证器用于验证回形针附件是图像而不是超过 5MB。一切都按预期工作

不过我对一件事有点好奇。我的集成测试在上传失败后检查天气`user.avatar`为零，并且它返回某种随机的东西。

考试：

```
 it 'Does not allow a non-image file to be uploaded as an avatar' do
   visit edit_user_path(@user)
   attach_file('user_avatar', File.dirname(__FILE__)+'/users_spec.rb')
   click_button 'Update'
   page.should have_content "Avatar must be an image"
   @user.reload
   @user.avatar.should be_nil
 end 
```

结果：

```
1) Users Avatars Does not allow a non-image file to be uploaded as an avatar
 Failure/Error: @user.avatar.should be_nil
   expected: nil
        got: /avatars/original/missing.png
 # ./spec/requests/users_spec.rb:147:in `block (3 levels) in <top (required)>' 
```

我猜这是某种默认的占位符回形针粘在那里，但是当我转到用户`show`页面时，`@user.avatar`正如`nil`预期的那样。是什么赋予了？

我也试过了，结果一样

```
@user.should_not have_attached_file(:avatar) 
```

鉴于它是回形针自己的匹配器，似乎它应该可以工作，但它也失败了

在几个 puts 语句之后，它似乎在对它做任何事情之前就`@user.avatar`产生`/avatars/original/missing.png`了，所以我想我至少可以确定它没有改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:45:50.670

啊哈！文件？如果文件附加到给定字段，则方法返回 true，因此以下代码为我提供了我想要的测试：

```
@user.avatar.file?.should be_false 
```

# javascript - 如何检测该图像元素在视图中？(jQuery 移动)

> ID：10722876
> 
> 赞同：0
> 
> 时间：2012-05-23T15:13:52.410
> 
> 标签：javascript, jquery, jquery-mobile

我试图通过检测图像是否在视图中然后下载来克服移动设备上的图像大小下载限制。还需要反其道而行之，将image src换成更小的image来释放内存。有谁知道如何在 jQuery Mobile 下最好地检测视图中和相反的图像？

附言。我正在尝试使用[unlock.js](http://luis-almeida.github.com/unveil/)，但到目前为止还没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:19:59.423

我猜你的意思是活动页面中的图像。在这种情况下，这将检索其中包含的所有图像：

```
$.mobile.activePage.find('img'); 
```

编辑：

```
$.mobile.activePage.find('img').each(function(index, el){
    var pos = $(el).position().top;
    var current = $(window).scrollTop();
    var height = $(window).height();
    if((pos > current) && (pos < current + height)) {
         // the image is in the viewport
    } else {
         // the image is not in the viewport
    }
}); 
```

# spring - 用于更新的 SimpleJdbcInsert 等效项

> ID：10722882
> 
> 赞同：6
> 
> 时间：2012-05-23T15:14:10.783
> 
> 标签：spring, jdbc, sql-update, simplejdbcinsert

我正在使用 Spring 的 SimpleJdbcInsert 类来创建实体 - 例如：

```
final SimpleJdbcInsert insert = new SimpleJdbcInsert(dataSource).withTableName("abc");

insert.execute(new BeanPropertySqlParameterSource(abc)); 
```

是否有与此类等效的更新？例如，假设我们正在处理单列主键，类似下面的内容将是一个方便的界面：

```
final SimpleJdbcUpdate update = new SimpleJdbcUpdate(dataSource).withTableName("abc").withIdColumn("abcId");

update.execute(new BeanPropertySqlParameterSource(abc)); 
```

Spring 是否在某个地方开箱即用地提供了此功能？

谢谢杰

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-23T11:10:45.203

对于任何未来的读者——我想出了一个使用反射的便利功能；

适用于简单的 pojo：

```
public void dao_update(NamedParameterJdbcTemplate database, String table, Object pojo, String[] keys) {

        StringBuilder sqlBuilder = new StringBuilder("UPDATE ");
        sqlBuilder.append(table);
        sqlBuilder.append(" SET ");
        boolean first = true;
        for (Field field : pojo.getClass().getDeclaredFields()) {
            if (!first) {
                sqlBuilder.append(",");
            }
            first = false;
            sqlBuilder.append(field.getName());
            sqlBuilder.append(" = :");
            sqlBuilder.append(field.getName());
        }

        first = true;
        for (String key : keys) {
            if (first) {
                sqlBuilder.append(" WHERE ");
            } else {
                sqlBuilder.append(" AND ");
            }
            first = false;
            sqlBuilder.append(key);
            sqlBuilder.append("= :");
            sqlBuilder.append(key);
        }
        database.getJdbcOperations().update(sqlBuilder.toString(), new BeanPropertySqlParameterSource(pojo));
    } 
```

示例用法：

```
dao_update(database, "employee", my_employee, "id"); 
```

生成：

更新员工 SET id = :id，name = :name，salary = :salary WHERE id = :id

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-10T15:25:28.883

Spring JIRA 中有一个关于缺少`SimpleJdbcUpdate`类的问题：[https](https://jira.springsource.org/browse/SPR-4691) ://jira.springsource.org/browse/SPR-4691 。你可能想在那里投票。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-23T21:49:03.947

你必须使用 JdbcTemplate

参见：[13.2.1.1 JdbcTemplate 类使用示例](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/jdbc.html#jdbc-introduction)

前任：

```
this.jdbcTemplate.update(
    "update t_actor set = ? where id = ?", 
    "Banjo", 5276L); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T20:41:41.757

最简单的方法是：（[来源](https://docs.spring.io/spring/docs/2.0.x/reference/jdbc.html)）

```
public void setName(int id, String name) {
    this.jdbcTemplate.update("update mytable set name = ? where id = ?", 
    new Object[] {name, new Integer(id)});
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-05T16:08:11.050

您可以通过使用 SimpleJdbcTemplate 而不是 JdbcTemplate 并通过扩展 SimpleJdbcDaoSupport 来获得更相似的效果，所有 DB 操作都可以放在一个 DAO 类中：

```
import java.util.List;

import javax.sql.DataSource;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.jdbc.core.BeanPropertyRowMapper;
import org.springframework.jdbc.core.namedparam.BeanPropertySqlParameterSource;
import org.springframework.jdbc.core.namedparam.MapSqlParameterSource;
import org.springframework.jdbc.core.namedparam.SqlParameterSource;
import org.springframework.jdbc.core.simple.SimpleJdbcDaoSupport;
import org.springframework.stereotype.Repository;

@Repository
public class BankDaoImpl extends SimpleJdbcDaoSupport implements BankDao {

    @Autowired
    public BankDaoImpl(@Qualifier("dataSource") DataSource dataSource) {
        setDataSource(dataSource);
    }

    @Override
    public void insert(Bank bank) {
        String sql = "INSERT INTO BANK (id, oib, short_name, name, street, town, postal_code, homepage_url, last_change) VALUES (NEXT VALUE FOR bank_seq, :oib, :shortName, :name, :street, :town, :postalCode, :homepageUrl, CURRENT_TIMESTAMP)";
        SqlParameterSource parameterSource = new BeanPropertySqlParameterSource(
                bank);

        getSimpleJdbcTemplate().update(sql, parameterSource);
    }

    @Override
    public void update(Bank bank) {
        String sql = "UPDATE BANK SET oib=:oib, short_name=:shortName, name=:name, street=:street, town=:town, postal_code=:postalCode, homepage_url=:homepageUrl, last_change=CURRENT_TIMESTAMP WHERE id=:id";
        SqlParameterSource parameterSource = new BeanPropertySqlParameterSource(
                bank);

        getSimpleJdbcTemplate().update(sql, parameterSource);
    }

    @Override
    public void delete(String id) {
        String sql = "DELETE FROM BANK WHERE id=:id";

        getSimpleJdbcTemplate().update(sql,
                new MapSqlParameterSource("id", id));
    }

    @Override
    public Bank findById(String id) {
        String sql = "select b.ID, b.OIB, b.SHORT_NAME, b.NAME, b.STREET, b.TOWN, b.POSTAL_CODE, b.HOMEPAGE_URL, b.LAST_CHANGE, CASE WHEN count(f.id) = 0 THEN 0 ELSE 1 END AS ready " +
                "from BANK WHERE b.ID = :id"; 

        return getSimpleJdbcTemplate().queryForObject(sql,
                BeanPropertyRowMapper.newInstance(Bank.class),
                new MapSqlParameterSource("id", id));
    }
} 
```

# .net - 为什么 Azure 实例上不存在某些特定于 Azure 的程序集？

> ID：10722886
> 
> 赞同：3
> 
> 时间：2012-05-23T15:14:18.663
> 
> 标签：.net, deployment, azure, assemblies, gac

Azure 角色可能需要一组特定于 Azure 的 .NET 程序集，例如`Microsoft.WindowsAzure.ServiceRuntime`和`Microsoft.WindowsAzure.StorageClient`. 事实证明后者[不在 Azure 实例上的 GAC 中](http://blog.arunstephens.com/2011/01/16/microsoft-windowsazure-storageclient-is-not-actually-on-azure/)，因此我必须在 Visual Studio 项目中将“复制本地”设置为“真”，以便它进入服务包并部署到 Azure。如果我不这样做，则程序集不存在，并且缺少的依赖项将阻止我的角色开始。

这对我来说没有任何意义。要么它只是一个错误，要么我不了解全局。

是否有充分的理由说明 Azure 实例 GAC 中不存在密钥程序集，而我必须将它们与我的服务包一起携带？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T15:15:16.210

这些关键的 Azure 程序集不是 .NET Framework 的一部分 - 这就是它们不在 GAC 中的原因。也许将来它们会被添加到 .NET Framework 中。

Azure 并非专门用于仅运行 .NET 代码。[人们将它用于其他平台](http://www.windowsazure.com/en-us/develop/overview/)，例如 Java、PHP、node.js、python 等。在 VM 角色实例中添加特定于 .NET Azure 实现的程序集是没有意义的。

是的 - 当我第一次开始使用 Azure 时，这也是一个烦恼，但如果您将这个本地发布到没有 Azure SDK 的机器上，情况也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:07:36.777

> > 是否有充分的理由说明 Azure 实例 GAC 中不存在密钥程序集，而我必须将它们与我的服务包一起携带？

我想指出，并非每个项目都需要使用存储，因此没有预先安装存储组件是有道理的。加载的程序集减少了，您获得了微小的性能改进。但是每个项目都需要与 Windows Azure 运行时集成。所以运行时程序集是预先安装的。根据我的经验，默认情况下，当我们创建 Windows Azure web/worker 角色时，存储程序集引用会自动将本地复制设置为 true。因此，我们不需要执行额外的任务来使其工作。

此致，

明旭。

# reporting-services - Team Foundation Server 项目门户（报告服务）用户访问权限

> ID：10722892
> 
> 赞同：1
> 
> 时间：2012-05-23T15:14:43.743
> 
> 标签：reporting-services, tfs

我无法弄清楚如何在 TFS 2010 中为项目门户设置用户访问权限。

> 授予用户 XXXXXXX 的权限不足以执行此操作 (rsAccessDenied)

![在此处输入图像描述](../Images/f199e90eb3609a1b7e989736148b2ecf.png)

我尝试将用户添加到 TFS 中的各个管理员组，但问题似乎*只*与 Reporting Services 权限有关。

我将此用户映射到 RS 数据库中的 RSExec 角色，并确保他们可以访问 IIS 虚拟目录。我已经尝试了几个通过 Google 找到的解决方案，但其中许多是针对以前版本的 TFS/RS 的，这些选项甚至都不适用，其他的似乎根本不起作用。

理想情况下，我想将整个域组添加到整个项目集合中，以便他们可以访问其下的任何项目门户，我不想为每个项目设置自定义权限，更不用说各种 Web 部件了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T15:29:17.437

使用此工具：[http](http://tfsadmin.codeplex.com/) : //tfsadmin.codeplex.com/ 在统一界面中管理 TFS/SharePoint/SSRS。

# java - Java 从 php 上的 http 请求读取 JSON - 错误请求 400

> ID：10722896
> 
> 赞同：0
> 
> 时间：2012-05-23T15:14:48.723
> 
> 标签：java, php, json

我愿意从 http 请求中读取一个简单的 json 文件。这是我试图阅读的 URL：

[http://tccdahora.servehttp.com/teste.php](http://tccdahora.servehttp.com/teste.php)

因此，我得到了一种将 URL 转换为 JSON 的方法，但它不起作用，我尝试了许多不同的方法或在帖子中获取标题，但没有成功。

这是方法：

```
public static JSONArray getPostJSONObject(String url) throws Throwable {

    // faz o POST na pagina php e obtem o inputstream de resposta
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(url); // "http://tccdahora.servehttp.com/teste.php"
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    httppost.setHeader("host", url);
    //httppost.setHeader("Content-Type", "application/json");
    HttpResponse response = httpclient.execute(httppost);
    HttpEntity entity = response.getEntity();
    InputStream is = entity.getContent();

    // transforma o que o php printar em uma strigzona
    JSONArray jArray;
    BufferedReader reader = new BufferedReader(new InputStreamReader(
            is, "iso-8859-1"), 8);
    StringBuilder sb = new StringBuilder();
    sb.append(reader.readLine() + "\n");

    String line = "0";
    while ((line = reader.readLine()) != null) {
        sb.append(line + "\n");
    }
    is.close();
    String result = sb.toString();
    Log.e("", result);
    // transformando em uma array de objetos JSON
    jArray = new JSONArray(result);
    return jArray;
} 
```

我做错了什么吗？我收到了错误的请求错误，并且帖子中的字符串返回了一个通知错误的 HTML 代码，而不是我的浏览器显示的 json。

非常感谢您的关注！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T18:05:27.103

删除以下行：

```
httppost.setHeader("host", url); 
```

# xaml - Blend中的反向路径动画

> ID：10722897
> 
> 赞同：0
> 
> 时间：2012-05-23T15:14:52.173
> 
> 标签：xaml, animation, expression-blend

我在 Blend 中有一个路径动画，它是通过使用快捷方式将形状转换为运动路径而创建的圆圈中移动的东西。当动画开始时它顺时针移动，但我希望它逆时针开始。XAML 中是否有任何方法可以改变该方向，而无需使用自动反转？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T16:06:30.080

这应该可以帮助您从根本上反转动画但没有自动反转。

[http://msdn.microsoft.com/en-us/library/cc294966%28v=expression.40%29.aspx](http://msdn.microsoft.com/en-us/library/cc294966%28v=expression.40%29.aspx)

# objective-c - UITextField 中的缩进

> ID：10722901
> 
> 赞同：5
> 
> 时间：2012-05-23T15:15:14.157
> 
> 标签：objective-c, ios, xcode, uitextfield, indentation

![例如，我想要](../Images/ec11cfdd3eab9a4e4d2ddec4b037eed6.png)

UITextView 缩进问题：

例如，我希望“测试”文本稍微正确，我应该设置什么属性？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-23T18:05:58.330

试试这个

```
 UIView *paddingView           = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 10, 20)];
    self.yourtextField.leftView             = paddingView;
    self.yourtextField.leftViewMode         = UITextFieldViewModeAlways; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-23T15:17:29.023

创建一个子类并覆盖`textRectForBounds:`and `editingRectForBounds:`。您的新实现可能看起来像

```
- (CGRect)textRectForBounds:(CGRect)bounds;
{
    return CGRectInset([super textRectForBounds:bounds], 10.f, 0.f);
}

- (CGRect)editingRectForBounds:(CGRect)bounds;
{
    return CGRectInset([super editingRectForBounds:bounds], 10.f, 0.f);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-12T14:07:52.817

试试这个简单的方法....

```
textfield.frame = CGRectMake(textfield.frame.origin.x+10, textfield.frame.origin.y, textfield.frame.size.width, textfield.frame.size.height); 
```

# background - 大型浏览器的最小高度和高度为 100% 的图像

> ID：10722904
> 
> 赞同：1
> 
> 时间：2012-05-23T15:15:19.740
> 
> 标签：background, height, background-image, css

我想要一个仅在浏览器大于图像大小时才调整大小的背景图像。因此，我需要一个等于图像像素高度的最小高度，但如果浏览器的高度大于图像高度，我还需要一个 100% 的高度。

我知道我可以使用 div 来做到这一点，但我更愿意使用 background-image 和 background-size CSS 属性。到目前为止，这就是我所拥有的：

```
 body{
       background-image:url('Images/newBG.jpg');background-size: 1911px 824px;
    } 
```

知道我应该把最小高度放在哪里，或者如果不使用 div 甚至可以做到这一点？如果有人有 div 解决方案，我也会很感激。

# vb.net - 无法从批处理中启动 VB Windows 服务

> ID：10722905
> 
> 赞同：1
> 
> 时间：2012-05-23T15:15:22.127
> 
> 标签：vb.net, windows-services, batch-file, windows-server-2003

我使用 Visual Studios '05 在 Visual Basic 中创建了一个自定义 Windows 服务。

`Computer Management`该服务在我们运行 Windows Server 2003 的服务器上。我已经安装了该服务，当我`Start`手动进入该服务时它运行完美。

我创建了一个批处理文件来使用该`NET START`命令启动服务。每当我运行批处理文件时，服务都不会启动。我从命令提示符处收到此消息：

> “服务名称”正在启动。
> 
> 无法启动“服务名称”。该服务没有报告错误。键入 NET HELPMSG 3543 可获得更多帮助。

我不知道该怎么办。（已经“谷歌搜索”了几个小时。）当我手动运行它时它会启动，但它不会通过批处理文件启动。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T17:48:33.090

尝试强制它在批处理文件中提升。

```
@ECHO OFF
:: Automatically elevate...

@ECHO OFF
SETLOCAL

:: Check if script was run with administrator privilages
    >nul 2>&1 "%SYSTEMROOT%\system32\cacls.exe" "%SYSTEMROOT%\system32\config\system"

:: If the error flag is set, we do not have admin.
    IF "%ERRORLEVEL%"=="0" GOTO GOTADMIN

:UACPROMPT
    ECHO. Set UAC = CreateObject^("Shell.Application"^) > "%temp%\getadmin.vbs"
    ECHO. UAC.ShellExecute "%~s0", "", "", "runas", 1 >> "%temp%\getadmin.vbs"
    "%TEMP%\getadmin.vbs"
    EXIT /B

:GOTADMIN
    if exist "%temp%\getadmin.vbs" ( del "%temp%\getadmin.vbs" )
    CD /D "%~dp0"
ENDLOCAL
GOTO SCRIPTSTART

:: THE ACTUAL SCRIPT STARTS HERE
:SCRIPTSTART
NET START [whatever service] 
```

# jasper-reports - 如果表达式在 iReport 中有效，如何擦除表格中的行

> ID：10722908
> 
> 赞同：7
> 
> 时间：2012-05-23T15:15:33.840
> 
> 标签：jasper-reports, pdf-generation, ireport

我在 iReport 中有一个包含 3 个字段（A、B、C）的表格。如果字段 C 不为空，我将打印行。例如，如果我的数据源中有 2 条记录：

1.  A = 第一，B = 第二，C = 第三

2.  A = 向上，B = 向下，C = NULL

该表必须只有第一行。

我尝试在每个单元格中插入此表达式（在“表达式时打印”属性中）：

```
!$F{C}.equals(null) 
```

但这样的结果是第二行是空的（但可见）。

编辑：在第一个答案（现在已删除）之后，表中的列类似于：

```
<jr:column ...>
<jr:columnHeader ...>
   <staticText>
    <reportElement .../>
        <text><![CDATA[ID]]></text>
   </staticText>
</jr:columnHeader>
<jr:detailCell ...>
   <textField isBlankWhenNull="false">
    <reportElement ... isRemoveLineWhenBlank="true">
        <printWhenExpression><![CDATA[$F{ID}!=null]]></printWhenExpression>
    </reportElement>
        <textFieldExpression><![CDATA[$F{ID}]]></textFieldExpression>
   </textField>
</jr:detailCell>
</jr:column>
<jr:column ...>
<jr:columnHeader ...>
    <staticText>
        <reportElement .../>
        <text><![CDATA[CITY]]></text>
    </staticText>
</jr:columnHeader>
<jr:detailCell ...>
    <textField isBlankWhenNull="false">
        <reportElement ... isRemoveLineWhenBlank="true">
            <printWhenExpression><![CDATA[$F{ID}!=null]]></printWhenExpression>
        </reportElement>
        <textFieldExpression><![CDATA[$F{CITY}]]></textFieldExpression>
    </textField>
</jr:detailCell>
</jr:column> 
```

数据源是一个 xml 文件。我也试过了，`isBlankWhenNull="true"`但没有改变。这是结果的屏幕： ![标签](../Images/cf4e119b34a69fa4cdfedf460d782694.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:33:38.040

当您将 print when 表达式放在字段上时，只会删除该字段。因此，空间将保留。将相同的表达式放在细节带上，然后再试一次。

**编辑：**

进一步看问题，我注意到没有选项可以在表元素的详细信息级别省略记录（表达式时打印）。[正如您在 iReport 和架构定义](http://jasperreports.sourceforge.net/xsd/components.xsd)中看到的那样，该选项不存在。此外，`isBlankWhenNull="true"`不起作用的原因是，即使文本字段为空，详细信息行仍会占用分配的高度。此外，您尝试修改的 PrintWhenExpression 适用于整个表而不是行。因此，似乎不可能按照您希望的方式进行。

在这里，我将为您提供以下步骤来解决您的问题：

1.  将 XPath 查询更新为您的数据集运行属性（右键单击 > 从表设计器视图编辑表数据源），以便省略 C 为空的记录。
2.  选择您的子数据集并从连接/数据源表达式菜单中选择“使用数据源表达式”。
3.  插入以下表达式：

`((net.sf.jasperreports.engine.data.JRXmlDataSource)$P{REPORT_DATA_SOURCE}).subDataSource("/root[c!='']")`

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T14:35:23.343

我找到了另一个解决这个问题的方法：对于用于表的数据集，添加过滤器表达式，例如 $F{dateRemoved}==null。

这样，空行将被删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-28T12:27:25.673

直接回答问题：

1.  使用后 -> Print When Expression
2.  仅高出 1 英寸并选中“空白时删除线”选项

3.  100% 工作

# openerp - 如何将图标添加到 OpenERP 自定义开发模块

> ID：10722909
> 
> 赞同：1
> 
> 时间：2012-05-23T15:15:35.837
> 
> 标签：openerp

在 OpenERP Web 6.1 中，模块看板视图为每个应用程序显示一个图标。如何将模块图标添加到自定义开发的模块中。我曾尝试在 处添加图像`mymodule\static\src\img\icon.png`，但看起来这还不够。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T06:18:47.093

在`__openerp__.py`您的模块文件中添加**'application':True**，然后如您所述将图像（64x64 像素）添加到 yourmodule/static/ing/icon.png ，现在重新启动服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-14T07:19:17.340

在 odoo v8 中，您可以在文件夹中添加图标`addons/your_module/static/description/icon.png`

例如，您可以在`\openerp\addons\hr\static\description\`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T11:23:23.763

我在当地也做过同样的练习。

但它在我身边工作正常。

您可以通过跟踪文件找到问题的确切位置：server/openerp/modules/module.py

有一个功能

```
def get_module_icon(module): 
```

如果此函数返回如下值：yourmodule/static/src/img/icon.png 那么从您这边就可以了。

同时运行“更新模块列表”向导。

请采用最新版本的 webclient。

希望这可以帮到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-01T02:59:07.010

从 openERP 7.0 开始，您可以通过编辑模块`__openerp__.py`文件来更改图标，将键`icon`设置为图标的路径，而无需遵循太多约定，尽管它需要位于`/static`目录下。如：

```
{
  'name': 'Some Module Name',
  'icon': "/{my_module_name}/static/img/some_icon.png",
  ...
} 
```

路径是这样的，因为它将用作`<img>`'`src=`属性的值。

```
<img class="oe_module_icon" src="/{my_module_name}/static/img/some_icon.png"> 
```

# c# - 随机整数中最可能的位

> ID：10722910
> 
> 赞同：10
> 
> 时间：2012-05-23T15:15:35.790
> 
> 标签：c#, c, random

我做了这样的实验——用 C 和 C# 制作了 1000 万个随机数。然后从随机整数的15位中计算每个位设置了多少次。（我选择了 15 位，因为 C 只支持最多 的随机整数`0x7fff`）。

我得到的是： ![在此处输入图像描述](../Images/9083d240d8a91ae6d7c0c0642ce1bd20.png)
我有两个问题：

1.  为什么有 3 个最可能的位？`C`万一比特`8,10,12`是最有可能的。并且`C#`在位`6,8,11`是最有可能的。

2.  似乎 C# 最可能的位*大多*被移动了 2 个位置，然后与 C 最可能的位相比。为什么是这样 ？因为 C# 使用其他 RAND_MAX 常量还是什么？

* * *

我的测试代码`C`：

```
void accumulateResults(int random, int bitSet[15]) {
    int i;
    int isBitSet;
    for (i=0; i < 15; i++) {
        isBitSet = ((random & (1<<i)) != 0);
        bitSet[i] += isBitSet;
    }
}

int main() {
    int i;
    int bitSet[15] = {0};
    int times = 10000000;
    srand(0);

    for (i=0; i < times; i++) {
        accumulateResults(rand(), bitSet);
    }

    for (i=0; i < 15; i++) {
        printf("%d : %d\n", i , bitSet[i]);
    }

    system("pause");
    return 0;
} 
```

并测试代码`C#`：

```
static void accumulateResults(int random, int[] bitSet)
{
    int i;
    int isBitSet;
    for (i = 0; i < 15; i++)
    {
        isBitSet = ((random & (1 << i)) != 0) ? 1 : 0;
        bitSet[i] += isBitSet;
    }
}

static void Main(string[] args)
{
    int i;
    int[] bitSet = new int[15];
    int times = 10000000;
    Random r = new Random();

    for (i = 0; i < times; i++)
    {
        accumulateResults(r.Next(), bitSet);
    }

    for (i = 0; i < 15; i++)
    {
        Console.WriteLine("{0} : {1}", i, bitSet[i]);
    }

    Console.ReadKey();
} 
```

很感谢 ！！顺便说一句，操作系统是 Windows 7、64 位架构和 Visual Studio 2010。

**编辑**
非常感谢@David Heffernan。我在这里犯了几个错误：

1.  C 和 C# 程序中的种子是不同的（C 使用零和 C# - 当前时间）。
2.  我没有尝试使用不同的`Times`变量值来研究结果的可重复性。

以下是我在分析设置第一位的概率如何取决于调用 random() 的次数时得到的结果： ![在此处输入图像描述](../Images/1fed1f23f0174ce0ec6f3f8031c4ab0f.png)
所以许多人注意到 - 结果不可重现，不应认真对待。（除非以某种形式确认 C/C# PRNG 足够好:-)）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-23T15:29:28.637

这只是常见的或花园采样变化。

想象一个实验，你反复掷硬币十次。您不会期望每次都获得五个正面。这取决于采样变化。

同样，您的实验也会受到抽样变化的影响。每个位遵循相同的统计分布。但抽样变化意味着您不会期望在 0 和 1 之间有精确的 50/50 分割。

现在，您的情节误导您认为这种变化在某种程度上很重要或具有意义。如果您从 0 开始绘制图表的 Y 轴，您会对此有更好的理解。该图表如下所示：

![在此处输入图像描述](../Images/b08f2cc8cf3a958eb630d82ee046818d.png)

如果 RNG 行为正常，那么每个位将遵循概率为 0.5的[二项式分布。](http://en.wikipedia.org/wiki/Binomial_distribution)该分布具有方差*np(1 − p)*。对于您的实验，这给出了 250 万的方差。取平方根得到大约 1,500 的标准差。因此，您可以简单地从检查结果中看出，您看到的变化并没有明显异常。您有 15 个样本，没有一个样本与真实平均值的标准差超过 1.6 个。这没什么好担心的。

你试图辨别结果中的趋势。你说过有“3个最可能的位”。这只是您对该示例的特定解释。尝试使用不同的 RNG 种子再次运行程序，您将获得看起来有些不同的图表。他们仍然具有相同的品质。有些位比其他位设置得更多。但是不会有任何可辨别的模式，当您将它们绘制在包含 0 的图表上时，您会看到水平线。

例如，这是您的 C 程序为`98723498734`.

![在此处输入图像描述](../Images/b3e9dd21c7133d86828fd2a311a92f14.png)

我认为这应该足以说服您进行更多试验。当你这样做时，你会发现没有特殊的位被给予优待。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T15:25:46.237

您知道偏差约为 2500/5,000,000，降到 0.05%？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T15:33:09.987

请注意，每个位的频率差异仅变化约 0.08%（-0.03% 至 +0.05%）。我不认为我会认为这很重要。如果每一点都*完全*一样可能，我会发现 PRNG 非常有问题，而不仅仅是有点问题。您应该期望在应该或多或少建模随机性的过程中存在一定程度的差异......

# ruby - 红宝石注入有条件的块？

> ID：10722913
> 
> 赞同：15
> 
> 时间：2012-05-23T15:15:41.770
> 
> 标签：ruby, inject

做第一个 Project Euler 问题：在 1 和 1000 之间求和 3 和 5 的倍数，我想出了这个（很简单）

```
sum = 0
1.upto(999) { |i| sum += i if 0 == i%3 || 0 ==  i%5 }
sum 
```

但我认为这会起作用，但它不起作用，有人可以告诉我我做错了什么，或者为什么它不起作用？

```
1.upto(999).inject(0) { |sum, i| sum + i if 0 == i%3 || 0 ==  i%5 } 
```

谢谢！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-23T15:22:14.467

`inject`将块的结果作为第一个参数传递给下一次迭代。`nil`当您的`if`语句为 false时，您的块将返回，然后以`sum`.

为了得到正确的答案，当它为假时，该块应该返回当前总和：

```
1.upto(999).inject(0) { |sum, i| (0 == i%3 || 0 ==  i%5) ? sum + i : sum } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T16:07:54.373

补充答案：如果您要解决欧拉问题，您应该开始构建自己的可重用代码扩展。在这种情况下，第一个扩展名是`Enumerable#sum`：

```
module Enumerable
  def sum
    inject(0, :+)
  end
end 
```

现在您可以编写一个解决方案来区分总结的条件（您可以大声朗读它，这是有道理的，这是函数式/声明式风格的典型）：

```
1.upto(999).select { |x| x % 3 == 0 || x % 5 == 0 }.sum 
```

您甚至可以将其推进一步并创建`Fixnum#divisible_by?`，以便您可以编写：

```
1.upto(999).select { |x| x.divisible_by?(3) || x.divisible_by?(5) }.sum 
```

更多：这不是问题，但稍后严格的实现（使用数组的那些）将需要太多内存。然后尝试[懒惰](http://bugs.ruby-lang.org/issues/4890)：

```
require 'lazy'
1.upto(999).lazy.select { |x| x % 3 == 0 || x % 5 == 0 }.sum 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T17:41:38.130

或者，使用`&`proc 来处理 self.

```
(1..999).select{|x| x%3==0||x%5==0}.inject &:+ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-22T23:14:02.177

`(1..999).to_a.keep_if{|d| d%3 == 0 || d%5 == 0}.reduce(:+)`为了完整性。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-23T15:25:46.517

```
1.upto(999).inject(0) { |sum, i| sum += i if 0 == i%3 || 0 ==  i%5; sum } 
```

也可以工作（注意`+=`）。

# python - 如何从 Perl 导入和调用 Python 函数？

> ID：10722917
> 
> 赞同：1
> 
> 时间：2012-05-23T15:15:52.717
> 
> 标签：python, perl

我几乎没有 Perl 经验，但我想知道是否有人能指出我正确的方向。我有一个带有一堆函数的 python 模块，我需要创建一个可以调用这些 Python 函数的 Perl 包装器。

已编辑

```
use Inline Python => <<'END_OF_PYTHON_CODE';
import example_API
END_OF_PYTHON_CODE

   print getPortConfig("google.com", "<port>0</port>"); 
```

有了这个，我不断得到，无法在 @INC 中找到 Inline.pm

编辑

如何将它安装到 Windows 机器上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T15:21:00.893

Perl 在 cpan 中有一个名为 Inline::Python 的模块

如果可以接受，请尝试。我从不使用它。

# ios - IOS5 应用程序中的多个 UIPickerViews

> ID：10722918
> 
> 赞同：0
> 
> 时间：2012-05-23T15:15:53.153
> 
> 标签：ios, xcode, uitextfield, storyboard, uipickerview

我大约两个月前开始学习 iOS 编程，到目前为止我很喜欢它，但是我在我正在制作的应用程序中使用 UIPicker(s) 和 UIDatePickers 有点挣扎，我希望有人可以指出我正确的方向。该应用程序应该模仿已经存在的 PHP Web 应用程序，这只不过是一个带有一堆下拉菜单的表单。

假设我有 GetAddressViewController，它将有一堆输入字段。为了简单起见，假设我将只有 3 个输入字段：国家、城市和街道。

用户应该点击“国家”输入字段，UIPicker 会像键盘一样显示出来，在选择国家后，Web 应用程序将返回一个包含该国家所有城市的 JSON 数组。当用户点击“城市”输入字段时重复相同的过程，UIPicker 弹出返回城市列表，用户选择一条街道，UIPicker 滑出，Web 应用程序返回一系列街道等。

可以说，在我的 GetAddressViewController.h 文件中，我有：

```
#import <UIKit/UIKit.h>

@interface GetAddressViewController : UIViewController
{
    UITextField *countryField;
    UITextField *cityField;
    UITextField *streetField;

    NSArray *countries;
    NSArray *cities;
    NSArray *streets;
}

@property(nonatomic, strong) IBOutlet UITextField *countryField;
@property(nonatomic, strong) IBOutlet UITextField *cityField;
@property(nonatomic, strong) IBOutlet UITextField *streetField;

@property(nonatomic, strong) IBOutlet NSArray *countries;
@property(nonatomic, strong) IBOutlet NSArray *cities;
@property(nonatomic, strong) IBOutlet NSArray *streets;

@end 
```

在 GetAddressViewController.m 文件中，我合成了属性，而在情节提要中，我只有 3 个已连接到适当插座的输入字段。我应该注意的现有代码中是否存在一些基本错误？

现在，我觉得在阅读有关选择器视图的教程时错过了一些东西，因为我在 StackOverflow 上找到的大多数示例对我来说没有多大意义。

有人可以向我指出一个可以帮助我的基本类似示例。UIPickers 是要走的路还是有更好的方法？

我已经有一段时间没有感到这种无助了，任何帮助将不胜感激，谢谢

**编辑：**

好的，我正在取得进展，我希望我可以帮助遇到同样问题的其他人。要完成这项工作并将 pickerview 连接到输入字段 inputView 属性，您需要执行此操作。

到您的 .h 文件中，您需要添加两个委托：UIPickerViewDelegate 和 UIPickerViewDataSource

```
@interface ViewController : UIViewController<UIPickerViewDelegate, UIPickerViewDataSource>{ ... 
```

然后在你的 .m 文件中，你需要有这样的东西。我的 wiewDidLoad 方法中有这段代码。

```
UIPickerView *cityPicker = [[UIPickerView alloc] initWithFrame:CGRectZero];
    cityPicker.delegate = self;
    cityPicker.dataSource = self;
    [cityPicker setShowsSelectionIndicator:YES];
    cityField.inputView = cityPicker; 
```

这仅仅意味着当您点击 cityField 时会出现 cityPicker pickerview。之后，您需要添加以下 pickerview 委托方法，这些方法将使用正确的数据填充 pickerview。在我的例子中，数据是一个包含城市列表的数组。

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{
    return cities.count;
}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
    return [cities objectAtIndex:row];
}

- (void) pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    cityField.text = (NSString *)[cities objectAtIndex:row];
} 
```

如果您想要“完成”来隐藏 UIPicker，您将需要以下代码：

```
UIToolbar*  mypickerToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 56)];
    mypickerToolbar.barStyle = UIBarStyleBlackOpaque;
    [mypickerToolbar sizeToFit];

    NSMutableArray *barItems = [[NSMutableArray alloc] init];

    UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
    [barItems addObject:flexSpace];

    UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(pickerDoneClicked)];
    [barItems addObject:doneBtn];

    [mypickerToolbar setItems:barItems animated:YES];

    cityField.inputAccessoryView = mypickerToolbar; 
```

并添加一个新方法 pickerDoneClicked

```
-(void)pickerDoneClicked
{
    NSLog(@"Done Clicked");
    [cityField resignFirstResponder];
} 
```

我希望这可以帮助某人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:28:46.477

嗨，请遵循多个pickerview的整个解决方案或仅使用**-(void)createActionsheet**它可能会解决您的问题

**在 .h 中定义**

```
UIActionSheet *actionSheet;
NSString *pickerType;
BOOL select 
```

**在.m 中定义**

```
-(IBAction)countryBtnPressed:(id)sender
{
    [self createActionSheet];
    pickerType = @"picker";
    select = NO;
    UIPickerView *chPicker = [[UIPickerView alloc] initWithFrame:CGRectMake(0.0, 44.0, 0.0, 0.0)];
    chPicker.dataSource = self;
    chPicker.delegate = self;
    chPicker.showsSelectionIndicator = YES;
    [actionSheet addSubview:chPicker];
    Txt.text = [array objectAtIndex:0];
    [chPicker release];
}

-(IBAction)stateBtnPressed:(id)sender
    {
        [self createActionSheet];
        pickerType = @"statepicker";
        select = NO;
        UIPickerView *chPicker = [[UIPickerView alloc] initWithFrame:CGRectMake(0.0, 44.0, 0.0, 0.0)];
        chPicker.dataSource = self;
        chPicker.delegate = self;
        chPicker.showsSelectionIndicator = YES;
        [actionSheet addSubview:chPicker];
        stateTxt.text = [stateArray objectAtIndex:0];
        [chPicker release];
    }

/// Create Action Sheet
- (void)createActionSheet {
if (actionSheet == nil) {
    // setup actionsheet to contain the UIPicker
    actionSheet = [[UIActionSheet alloc] initWithTitle:@"Select"
                                              delegate:self
                                     cancelButtonTitle:nil
                                destructiveButtonTitle:nil
                                     otherButtonTitles:nil];

    UIToolbar *pickerToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
    pickerToolbar.barStyle = UIBarStyleBlackOpaque;
    [pickerToolbar sizeToFit];

    NSMutableArray *barItems = [[NSMutableArray alloc] init];

    UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
    [barItems addObject:flexSpace];
    [flexSpace release];

    UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(pickerDone:)];
    [barItems addObject:doneBtn];
    [doneBtn release];

    [pickerToolbar setItems:barItems animated:YES];
    [barItems release];

    [actionSheet addSubview:pickerToolbar];
    [pickerToolbar release];

    [actionSheet showInView:self.view];
    [actionSheet setBounds:CGRectMake(0,0,320, 464)];
}
}

#pragma mark UIPickerViewDelegate Methods

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {
    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{
    int count;
    if ([pickerType isEqualToString:@"picker"])
        count = [array count];
    else if([pickerType isEqualToString:@"picker"])
            count = [statearray count];
return count;
}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
    NSString *string;

    if ([pickerType isEqualToString:@"picker"])
        string = [array objectAtIndex:row];
    if ([pickerType isEqualToString:@"statepicker"])
        string = [statearray objectAtIndex:row];

return string;
}

// Set the width of the component inside the picker
- (CGFloat)pickerView:(UIPickerView *)pickerView widthForComponent:(NSInteger)component {
    return 300;
}

// Item picked
- (void)pickerView:(UIPickerView *)thePickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
    select = YES;
    if ([pickerType isEqualToString:@"picker"])
    {
        Txt.text = [array objectAtIndex:row];
    }
    if ([pickerType isEqualToString:@"statepicker"])
    {
        stateTxt.text = [statearray objectAtIndex:row];
    }

}

- (void)pickerDone:(id)sender
{
    if(select == NO)
    {
        if ([pickerType isEqualToString:@"picker"])
        {
            Txt.text = [array objectAtIndex:0];
        }
        else if ([pickerType isEqualToString:@"statepicker"])
        {
            stateTxt.text = [statearray objectAtIndex:0];
        }

}
    [actionSheet dismissWithClickedButtonIndex:0 animated:YES];
    [actionSheet release];
    actionSheet = nil;

}

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T16:11:18.117

UIPickers 可以使用，但在这种特殊情况下，条目列表可能是一个很长的列表，并且条目有时可能不仅仅是一个简单的字符串，例如，如果国家名称是“津巴布韦共和国” , Africa" 或类似的 UIPicker 控制器无法以最佳方式显示数据。您可以使用表格视图并以模态方式呈现它们。如果条目列表超过一百个左右，表格视图为您提供了一种更好的选择方式。

# objective-c - Objective-C - 页面卷曲后检测视图的关闭

> ID：10722920
> 
> 赞同：0
> 
> 时间：2012-05-23T15:15:55.617
> 
> 标签：objective-c, dismiss, page-curl

我有一个主视图，它通过页面卷曲转换在另一个视图中调用设置面板。一切似乎都很好，但是当我关闭设置视图时，它不会触发我的主视图的“viewWillAppear”方法，这给我带来了很多麻烦，因为它没有更新设置。

有一个对我来说似乎很好的[答案](https://stackoverflow.com/questions/4156667/tracking-when-the-page-curl-modal-closesis-dismissed)，但我不知道如何实现它。还有另一种简单的方法或有人可以向我解释如何应用该答案？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:32:48.340

您应该对设置更改做出反应，而不是对视图做出反应。我的意思是，使用[键值观察 (KVO)](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)将是一个更可靠的设计，以便您的主视图可以通知代表您的设置的对象的更改。

或者，如果您不能或不想观察特定对象，您可以使用`NSNotificationCenter`并让您的设置视图在应用新设置时触发通知，并且您的其他视图可以注册以收听这些通知。 [这](https://stackoverflow.com/questions/2191594/how-to-send-and-receive-message-through-nsnotificationcenter-in-objective-c)是一个简单的例子。

我希望这有助于解决您的问题。

# itext - 使用 Itext 创建 PDF 后页

> ID：10722924
> 
> 赞同：0
> 
> 时间：2012-05-23T15:16:04.200
> 
> 标签：itext

我目前正在使用 iText (Java) 创建 PDF 文档。

此 PDf 文档旨在作为要打印的名片。

这是我的代码的一部分：

```
public void write() throws DocumentException, FileNotFoundException, IOException {
    String extension = ".pdf";
    String file = "testerPDF";

    String filename = file + extension;

    Document doku = new Document(PageSize.A4, 10,20,50,150);

    PdfWriter writer = PdfWriter.getInstance(doku, new FileOutputStream(new   File(filename)));

    doku.open();

    Phrase textblock = new Phrase();

    // jetzt durch den Vector iterarieren
    for(int i = 0; i < vector.size(); i++) {
        Chunk chunk=new Chunk((String)vector.get(i));

        textblock.add(chunk);
    }

    doku.add(new Paragraph(textblock));

    doku.close();
    writer.close();
} 
```

所以我现在需要一种方法来为这个创建的 PDF 编写一个 Back Page。这样文档看起来就像纸上的名片。

# facebook - 使用 Facebook publish_stream 登录

> ID：10722927
> 
> 赞同：0
> 
> 时间：2012-05-23T15:16:13.150
> 
> 标签：facebook, login

当我使用以下代码创建按钮时，它不会要求获得**publish_stream**的权限。代码有什么问题？

```
 <div class="fb-login-button" scope="email,user_checkins,publish_stream">
    Login with Facebook
  </div> 
```

这是完整的代码；（ps：除非它托管在本地主机上，否则它不起作用）。[http://jsfiddle.net/xCTCh](http://jsfiddle.net/xCTCh)

# c# - 如何将类型与另一个程序集中的工厂例程配对？

> ID：10722928
> 
> 赞同：1
> 
> 时间：2012-05-23T15:16:21.340
> 
> 标签：c#, reflection

我正在尝试在我的程序中创建一个通用例程，它将为我实例化对象。实际负责调用 new Object() 的例程位于必须实例化的工厂的不同程序集中。

```
namespace ExternalLib
{
    class Object1Factory
    {
        public Object1 getObject1()
            //...
    }
    class Object2Factory
        // Same implementation as Object1Factory
} 
```

我正在尝试为我的应用程序提供一个例程，该例程将允许我调用适当的例程来为我“新建”对象。

```
namespace MyApp
{
    class Program
    {
        static void Main()
            //...
        static Object getNewObject(string typeName)
        {
            //This is where I have problems
        }
    }
} 
```

我可以访问外部库和我的程序的源代码，尽管重新编写架构的成本太高。

**我尝试过**的：我最初的想法是在工厂和/或工厂例程上使用自定义属性并使用反射来获取方法，然后调用该方法。我最初使用签名`private static T getNew<T>()`并尝试在类型参数上使用 switch 语句，但实现起来`getNewObject(string typeName)`会更容易。工厂具有相同的构造函数签名，但没有继承链接。

**总而言之**：创建对象的例程在另一个程序集中的工厂中，我如何自动调用这些例程以根据类型获取对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T15:34:34.433

如果你想继续走这条路——你能把所有的工厂方法放在一个叫做“ObjectFactory”的工厂类中吗？

```
Type t = typeof(OtherAssembly.ObjectFactory);

MethodInfo m = t.GetMethods().Where(a => a.ReturnType.Name == typeName).FirstOrDefault();

return m.Invoke(null, new object[] { /* PARAMETERS */ }); 
```

**编辑**- 回应詹姆斯对问题的评论，指出他更愿意将工厂类分开：

（下面使用 Martin 的想法，并依赖于所有 Factory 类的名称为“[Type]Factory”）

（工厂类也有非静态方法）

```
Type t = Type.GetType(String.Format("OtherAssembly.{0}Factory", typeName));

var myFactory = Activator.CreateInstance( t );

MethodInfo m = t.GetMethods().Where(a => a.ReturnType.Name == typeName).FirstOrDefault();

return m.Invoke(myFactory, new object[] { /* PARAMETERS */ }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T15:28:40.807

也许我在问题中遗漏了一些东西，但是仅仅使用这个有什么问题：

```
static Object getNewObject(string typeName)
{
    var type = Type.GetType(typeName);
    return Activator.CreateInstance(type);      
} 
```

如果 typeName 是 Object1 并且您想获取 Object1Factory，则可能需要进行一些字符串操作和反射，然后使用反射调用工厂上的 getObject1() 方法

如果您可以传入 typeName 为“MyNameSpace.Object1，Object1Assembly”，那么它将从相关程序集中加载它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T15:23:37.517

纯粹为了响应您的尝试，如果您将签名更改为：

```
static T GetNew<T>() where T : new()
{
    // Then you can do this:
    return new T();
} 
```

它为 type 上的公共无参数构造函数放置了一个通用约束`T`。但是，这是没有意义的，因为调用代码看起来像这样：

```
var obj = GetNew<MyClass>(); 
```

而它通常看起来像这样：

```
var obj = new MyClass(); 
```

所以我不会把它作为一个解决方案，但它会起作用并且会否定 switch 语句的需要。

# ruby-on-rails-3 - Active Admin + Authlogic 集成 - Rails 3.2

> ID：10722930
> 
> 赞同：4
> 
> 时间：2012-05-23T15:16:29.800
> 
> 标签：ruby-on-rails-3, authlogic, activeadmin

有谁知道如何将 Active Admin 与 Authlogic 集成（我正在使用 authlogic_ldap_authenticable gem 对 AD 进行身份验证）？我知道 Active Admin 使用 Devise，那么我应该对 Active Admin 进行哪些更改才能使其与 Authlogic 一起使用？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:41:17.900

注意：当我这样做时，我使用了 Rails 3.2.8 和 Active Admin 0.5.0。

这是一种方法：

1.  首先，通过添加更新 Gemfile `gem activeadmin`，然后运行`rails generate active_admin:install`​​. 这些按照 Active Admin README 中的说明进行。

2.  通常已经有一个使用 Authlogic 的用户模型，如果您打算使用它，请删除 Active Admin 默认生成的新管理员用户的所有文件：

    *   db/migrate/*_create_admin_users.rb（迁移文件）
    *   应用程序/模型/admin_user.rb
    *   规格/模型/admin_user_spec.rb
3.  删除特定于设计的文件：

    *   config/locales/devise.en.yml
    *   配置/初始化程序/devise.rb
4.  删除 config/routes.rb 中的设计引用。

5.  有一个生成的文件`app/admin/admin_user.rb`。`user.rb`您可以通过将文件重命名为、在其中注册`User`而不是`AdminUser`、并删除特定于设计的列上的索引来重用它。或者，您可以完全删除文件，然后从头开始创建自己的文件。

6.  在您的 Active Admin 配置中更新以下内容（请参阅 参考资料`config/initializers/active_admin.rb`）：

    *   config.authentication_method
    *   config.current_user_method
    *   config.logout_link_path

    默认`config.authentication_method`值为`:authenticate_admin_user`. 将其设置为您用于需要管理员用户的过滤方法之前的任何内容，例如`:require_admin`. 默认`config.current_user_method`值为`:current_admin_user`. 一个使用 Authlogic 的典型 Rails 应用程序可能有一个`:current_user`方法。并且`config.logout_link_path`应该设置为您的注销路径，例如`:logout_path`.

您可能需要根据您的情况修改这些说明。

# ruby-on-rails - rake 文本中的错误。我使用脚手架创建了一个数据库，然后用 rake 迁移了它，它运行时没有错误，但是当我启动服务器时，它给出了运行时错误

> ID：10722932
> 
> 赞同：0
> 
> 时间：2012-05-23T15:16:41.470
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rake, bundle, scaffold

所以我进行了 rake 测试，结果如下

7 次测试，0 次断言，0 次失败，7 次错误，0 次跳过 ** 调用测试：集成（first_time） ** 调用测试：准备 ** 执行测试：集成 运行测试时出错：功能！#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T17:06:31.407

我发现问题在于命名模型。包括最后的那些“s”是造成问题的原因。

# linq - 具有多列和默认值的 Linq 左连接

> ID：10722939
> 
> 赞同：2
> 
> 时间：2012-05-23T15:16:57.557
> 
> 标签：linq, linq-to-entities

我对 linq 相当陌生，我需要加入两个具有以下要求的表：

应该离开加入 t1 和 t2。

如果 t2 为空，则查询不应失败 - 应使用默认值。

我的查询：

```
var final = from t1 in saDist.AsEnumerable()
            from t2 in sapGrouped.AsEnumerable()
            where
                t1.Supplier.Id == t2.Supplier.Id && t1.VatRate == t2.VatRate
            select
                new
                {
                    t1.Supplier,
                    Amount = t1.Amount - t2.Amount,
                    Advance = t1.Advance - t2.Advance,
                    Balance = t1.Balance - t2.Balance,
                    t1.VatRate
                }; 
```

有人可以纠正这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T16:17:46.187

这在[Linqpad](http://www.linqpad.net/)中作为 C# 程序工作。

基本上你的连接语法需要调整（见[这个](http://social.msdn.microsoft.com/Forums/en-US/linqprojectgeneral/thread/e09b50af-5ab4-4cfb-9617-ef2be339c17f/)），你需要考虑到什么时候没有什么可以加入到“t2”（所以我们做一个空检查并在空时使用 0，否则 t2.Amount 等）

我创建了一些虚拟数据，以便您可以玩耍。

有关另一个示例，请参见[http://codingsense.wordpress.com/2009/03/08/left-join-right-join-using-linq/](http://codingsense.wordpress.com/2009/03/08/left-join-right-join-using-linq/)。

我希望它做你想做的事。

谢谢， 多米尼克

```
    公开课A
    {
        无效的主要（）
        {

            Distributor dist1 = new Distributor() { SupplierID = 1, Amount = 3, Balance = 4, Advance = 3, VatRateID = 1, Name = "A", DeptSupplierID = 1 };
            Distributor dist2 = new Distributor() { SupplierID = 2, Amount = 3, Balance = 4, Advance = 3, VatRateID = 1, Name = "B", DeptSupplierID = 1 };
            Distributor dist3 = new Distributor() { SupplierID = 3, Amount = 3, Balance = 4, Advance = 3, VatRateID = 1, Name = "C", DeptSupplierID = 1 };
            Distributor dist4 = new Distributor() { SupplierID = 4, Amount = 3, Balance = 4, Advance = 3, VatRateID = 1, Name = "D", DeptSupplierID = 2 };
            Distributor dist5 = new Distributor() { SupplierID = 5, Amount = 3, Balance = 4, Advance = 3, VatRateID = 1, Name = "E", DeptSupplierID = 2 };
            Distributor dist6 = new Distributor() { SupplierID = 6, Amount = 3, Balance = 4, Advance = 3, VatRateID = 1, Name = "F", DeptSupplierID = 2 };
            Distributor dist7 = new Distributor() { SupplierID = 7, Amount = 3, Balance = 4, Advance = 3, VatRateID = 1, Name = "G", DeptSupplierID = 6 };
            Distributor dist8 = new Distributor() { SupplierID = 8, Amount = 3, Balance = 4, Advance = 3, VatRateID = 1, Name = "H", DeptSupplierID = 3 };
            Distributor dist9 = new Distributor() { SupplierID = 9, Amount = 3, Balance = 4, Advance = 3, VatRateID = 1, Name = "I", DeptSupplierID = 3 };
            Distributor dist10 = new Distributor() { SupplierID = 10, Amount = 3, Balance = 4, Advance = 3, VatRateID = 1, Name = "J", DeptSupplierID = 7 };
            Distributor dist11 = new Distributor() { SupplierID = 11, Amount = 3, Balance = 4, Advance = 3, VatRateID = 1, Name = "K", DeptSupplierID = 7 };
            Distributor dist12 = new Distributor() { SupplierID = 12, Amount = 3, Balance = 4, Advance = 3, VatRateID = 1, Name = "L", DeptSupplierID = 5 };

            SAPGroup Dept1 = new SAPGroup() { SupplierID = 1, Amount = 3, Balance = 4, Advance = 3, VatRateID = 1, Name = "Development" };
            SAPGroup Dept2 = new SAPGroup() { SupplierID = 2, Amount = 3, Balance = 4, Advance = 3, VatRateID = 1, Name = "Testing" };
            SAPGroup Dept3 = new SAPGroup() { SupplierID = 3, Amount = 3, Balance = 4, Advance = 3, VatRateID = 1, Name = "Marketing" };
            SAPGroup Dept4 = new SAPGroup() { SupplierID = 4, Amount = 3, Balance = 4, Advance = 3, VatRateID = 1, Name = "Support" };

            列表 ListOfDistributors = new List();
            ListOfDistributors.AddRange((new Distributor[] { dist1, dist2, dist3, dist4, dist5, dist6, dist7,
    dist8, dist9, dist10, dist11, dist12 }));

            列表 ListOfSAPGroup = new List();
            ListOfSAPGroup.AddRange(new SAPGroup[] { Dept1, Dept2, Dept3, Dept4 });

            var final = 来自 ListOfDistributors 中的 t1
                        在 ListOfSAPGroup 中加入 t2
                        在新的 { t1.SupplierID, t1.VatRateID } 上等于新的 { t2.SupplierID, t2.VatRateID }
                        进入 JoinedDistAndGrouped
                        来自 JoinedDistAndGrouped.DefaultIfEmpty() 中的 t2
                        选择新的
                        {
                            Name1 = t1.Name,
                            Name2 = (t2 == null) ? “没有名字”：t2.Name，
                            供应商 ID = t1.供应商 ID，
                            Amount = t1.Amount - (t2 == null ? 0 : t2.Amount),
                            Advance = t1.Advance - (t2 == null ? 0 : t2.Advance),
                            余额 = t1.Advance - (t2 == null ? 0 : t2.Balance),
                            增值税率ID = t1.增值税率ID
                        };

            final.转储（）；
        }
    }

    类分销商
    {
        公共字符串名称 { 获取；放; }
        公共 int 供应商 ID { 获取；放; }
        公共 int VatRateID { 获取；放; }
        公共 int DeptSupplierID { 获取；放; }
        公共int金额{获取；放; }
        公共 int Advance { 获取；放; }
        公共 int 余额 { 获取；放; }
    }

    SAPGroup 类
    {
        公共 int 供应商 ID { 获取；放; }
        公共 int VatRateID { 获取；放; }
        公共字符串名称 { 获取；放; }
        公共int金额{获取；放; }
        公共 int Advance { 获取；放; }
        公共 int 余额 { 获取；放; }
    }

    公开课结果
    {
        公共字符串 Name1 { 获取；放; }
        公共字符串 Name2 { 获取；放; }
        公共 int 供应商 ID { 获取；放; }
        公共int金额{获取；放; }
        公共 int Advance { 获取；放; }
        公共 int 余额 { 获取；放; }
        公共 int VatRateID { 获取；放; }
    }

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T08:42:14.770

感谢您的输入。没有一个答案完全符合我的要求，但我设法让我的原始代码正常工作：

```
var final = from t2 in saDist.AsEnumerable()
            from t1 in sapGrouped.AsEnumerable().DefaultIfEmpty()
            where
                t1 == null || (t2.Supplier.Id == t1.Supplier.Id && t2.VatRate == t1.VatRate)
            select
                new
                {
                    t2.Supplier,
                    Amount = t2.Amount - (t1 == null ? 0 : t1.Amount),
                    Advance = t2.Advance - (t1 == null ? 0 : t1.Advance),
                    Balance = t2.Balance - (t1 == null ? 0 : t1.Balance),
                    t2.VatRate
                }; 
```

如果您对此有任何意见或改进，请告诉我，谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T15:36:33.347

据此，您正在寻找类似的东西（这是未经测试的，但希望能引导您走上正确的道路）[：](http://geekswithblogs.net/AzamSharp/archive/2008/04/07/121103.aspx)

```
var final = from t1 in saDist.AsEnumerable()
            join t2 in sapGrouped.AsEnumerable()
            on t1.Supplier.Id equals t2.Supplier.Id 
            and t1.VatRate equals t2.VatRate into t1_t2 //not sure about this line
            from t2 in t1_t2.DefaultIfEmpty()
            {
                t1.Supplier,
                Amount = t1.Amount - t2.Amount,
                Advance = t1.Advance - t2.Advance,
                Balance = t1.Balance - t2.Balance,
                t1.VatRate
            }; 
```

注意`.DefaultIfEmpty()`，这满足：“如果 t2 为空，则查询不应失败 - 应使用默认值。”

# c++ - VSPerfReport：独占时间等于包含时间

> ID：10722941
> 
> 赞同：0
> 
> 时间：2012-05-23T15:16:59.490
> 
> 标签：c++, visual-studio-2008, profiling

我正在使用 Microsoft (VSPerf) 的检测分析器对 C++ 进行分析，并使用 VSPerfReport 将 .vsp 报告文件转换为 .csv。在 Report_FunctionSummary.csv 中，对于调用同一目标文件中的其他函数的函数，独占和包含时间是相同的。这是一个已知问题，如何解决？我正在使用 Visual Studio 2008。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:35:53.730

包含时间是独占时间加上被调用者的时间。因此，如果例程没有被调用者，则包含时间等于独占时间。如果例程确实调用了其他例程但分析器看不到那些其他例程，它也将是相等的。

# r - 如何从 R 中的 bspline 平滑拟合获得逆预测

> ID：10722942
> 
> 赞同：3
> 
> 时间：2012-05-23T15:17:04.763
> 
> 标签：r, smoothing

我正在使用功能数据分析技术来平滑离散数据集。我使用的是 fda 包和函数 smooth.basis。它给了我一个合适的光滑物体，但现在我需要得到它的倒数。代码如下所示：

```
basisobj<-create.bspline.basis(c(0,1),7)
fit=smooth.basis(argvals=Data$Time,y=Data$Score,fdParobj=basisobj)$fd 
```

我想知道当 Data$Score 为 20 时 Data$Time 的值是多少。

我确实尝试了 inverse.predict 函数，但它只能给出 lm 函数的结果。

谢谢！

# php - PHP如何压缩位于不同路径的多个文件？

> ID：10722944
> 
> 赞同：2
> 
> 时间：2012-05-23T15:17:10.803
> 
> 标签：php, zip

我在网络服务器中托管了 16631 个文件，其中 2719 个是文本文件，其中包含位于服务器上的特定文件列表。

使用 PHP，是否可以为每个文本文件创建一个 ZIP？可以将文本文件名作为 ZIP 文件名吗？

我想在 ZIP 文件中保持相同的目录结构。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:14:12.707

接受 Jeff Hines 的建议，您可以使用[`ZipArchive`](http://php.net/manual/en/class.ziparchive.php)该类来创建 zip。

在伪代码中

1.  获取文件夹中的文本文件列表
2.  读取文本文件并获取要添加到 zip 的文件列表
3.  使用 ZipArchive 将每个列出的文件添加到新的 zip 文件中。
4.  写入标志以指定您已完成此文件。

您可能需要一次在 10 个文件上运行它，因为它可能会超时。

# jquery - Zend Framework Jquery 加载有一些奇怪的行为

> ID：10722949
> 
> 赞同：0
> 
> 时间：2012-05-23T15:17:21.847
> 
> 标签：jquery, zend-framework, zend-form

我一直在使用 Jquery 和 Ajax 在 Zend Framework 应用程序中构建动态表单，但遇到了问题。出于某种奇怪的原因，除非我添加标准的 Jquery 对象之一，如 datePicker，否则 Jquery 将无法在我的页面上运行。

每当我添加日期选择器时，我的代码工作得非常好，当我删除日期选择器时，它会给出`$(document).ready(function()`变量未定义的错误。考虑到 jquery 没有被加载，这本身是正确的，因此该变量对浏览器没有意义。

我已经`echo $this->Jquery();`正确设置了库、引导程序和所有内容，否则日期选择器将无法运行，并且当日期选择器出现时，它和其他代码完美地工作，表明它已正确设置。

有没有其他人遇到过 Jquery 加载不正确的问题？

我在引导程序中的代码：

```
protected function _initViewHelpers()
{
    $view = new Zend_View();
    $view->addHelperPath('ZendX/JQuery/View/Helper/', 'ZendX_JQuery_View_Helper');
    $viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper('ViewRenderer');
    $viewRenderer->setView($view); 
```

我在布局中的代码：

```
<?php  
echo $this->jQuery();
echo $this->layout()->content; 
?> 
```

我的 application.ini 也有这`autoloaderNamespaces[] = "ZendX"`条线

这是我认为的jquery代码：

```
<p>All fields are required.</p>

<?= $this->form; ?>

<script type="text/javascript">

$(document).ready(function() {

  $("#addElement").click( 
      function() { 
          ajaxAddField();
       }
    );

  $("#removeElement").click(
      function() {
          removeField();
      }
    );
  }
);

// Get value of id - integer appended to dynamic form field names and ids
var id = $("#id").val();

// Retrieve new element's html from controller
function ajaxAddField() {
  $.ajax(
    {
      type: "POST",
      url: "<?=$this->url(array('action' => 'newfield', 'format' => 'html'));?>",
      data: "id=" + id,
      success: function(newElement) {

        // Insert new element before the Add button
        $("#addElement-label").before(newElement);

        // Increment and store id
        $("#id").val(++id);
      }
    }
  );
}

function removeField() {

  // Get the last used id
  var lastId = $("#id").val() - 1;

  // Build the attribute search string.  This will match the last added  dt and dd elements.  
  // Specifically, it matches any element where the id begins with 'newName<int>-'.
  searchString = '*[id^=newName' + lastId + '-]';

  // Remove the elements that match the search string.
  $(searchString).remove()

  // Decrement and store id
  $("#id").val(--id);
}

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T15:46:55.513

尝试明确启用它

```
$this->jQuery()->enable(); 
```

并在 _initViewHelpers() 的最后一行设置它

```
Zend_Controller_Action_HelperBroker::addHelper($viewRenderer); 
```

# c++ - 它的核心是如何实现 boost 元组（在 boost 标头中没有所有额外的细节）

> ID：10722950
> 
> 赞同：2
> 
> 时间：2012-05-23T15:17:22.950
> 
> 标签：c++, templates, boost

它似乎是一个包含 10 个东西的硬编码模板，但也有一个与 Lokki 的 Typelist 非常相似的 cons 模板类的实现。那么 boost tuple 模板是否只是 Typelist/cons 实现的包装器？或者它的要点是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T15:27:23.457

在 C++03 中（因为否则我们将讨论`std::tuple`）没有可变参数模板功能，因此它使用足够数量的参数 (*) 和特定默认值来模拟。

[您可以通过阅读设计决策原理](http://www.boost.org/doc/libs/1_49_0/libs/tuple/doc/design_decisions_rationale.html)来获得实际实现的提示：

> **cons 列表的结束标记 (nil, null_type, ...)**
> 
> 元组在内部表示为 cons 列表：
> 
> ```
> tuple<int, int> 
> ```
> 
> 继承自
> 
> ```
> cons<int, cons<int, null_type> > 
> ```
> 
> `null_type`是列表的结束标记。最初的提议是`nil`，但这个名字在 MacOS 中使用，并且可能会导致问题，所以 `null_type`被选择了。考虑的其他名称是`null_t`and `unit`（SML 中的空元组类型）。
> 
> 请注意，这`null_type`是一个空元组的内部表示： `tuple<>`继承自`null_type`.

(*) 通常在 Boost 中，代码是使用宏生成的，因此上限是可配置的。

# android - 创建 Android AVD 冻结

> ID：10722958
> 
> 赞同：2
> 
> 时间：2012-05-23T15:17:52.593
> 
> 标签：android, android-emulator, android-2.2-froyo, avd, galaxy-tab

我正在尝试设置一个 Android 开发环境。我下载了最新的**Android SDK**，并且已经在我的**64 位 ubuntu 11.04上安装了****JDK 6**。我启动了 AVD 管理器并使用 Galaxy 选项卡模板插件创建了一个 AVD，一切正常。

 **第二天，我启动了 AVD 管理器，并尝试使用 Android 开源项目 3.2 和所有默认选项创建一个新的管理器。一旦我单击创建，AVD Manager 就会**冻结并占用内存**。我尝试用 Android 开源项目 2.2 和 Galaxy tab addon 创建一个。同样的情况。我删除了现有的 AVD 并再次尝试，没有运气。

我搜索了这个问题并找到了一些适用于 Windows 但不是 Linux 的解决方案。谁能指出我的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T15:54:08.173

你等了多久？当我在 64 位 Windows 上执行此操作时，它似乎以您所描述的方式锁定了好几分钟，但如果不理会它最终会完成。给它五到七分钟，看看它是否完成。**

# mysql - mysql合并脚本创建表

> ID：10722964
> 
> 赞同：0
> 
> 时间：2012-05-23T15:18:10.640
> 
> 标签：mysql

我遇到了一个问题，我想不出解决它的方法。我需要将几种语言的国家名称插入到我的 mysql 数据库上的表中。我找到了这些链接[link1](https://github.com/umpirsky/country-list/blob/master/country/icu/en/country.mysql.sql) (en) , [link2](https://github.com/umpirsky/country-list/blob/master/country/icu/de/country.mysql.sql) (de) 等，但我不知道如何进行才能最终得到一个如下所示的表格：

```
CREATE TABLE `country` (
  `id` varchar(2) NOT NULL,
  `en` varchar(64) NOT NULL,
  `de` varchar(64) NOT NULL,
  ...
  ...
  PRIMARY KEY (`id`)
) ENGINE=MYISAM DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:35:36.967

好吧，我终于想通了，所以我发帖可能是为了帮助别人。

我创建了 2 个表 (country_en) 和 (country_de)，然后运行以下语句：

```
DROP table if exists `countries`;

CREATE TABLE `countries` (
  id  varchar(2), el varchar(100), de varchar(100)
);

INSERT INTO `countries`
SELECT country_en.id, el, de
FROM   country_en 
JOIN   country_de ON (country_en.id = country_de.id); 
```

它创建表`countries`并在它们的公共键上连接其他 2 个表`id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T15:53:44.367

我可以建议你另一种桌子设计。创建`languages`表，并修改一个小`country`表：添加`lang_id`字段并创建外键 - FOREIGN KEY (lang_id) REFERENCES 语言 (id)。然后填充`languages`和`country`表格。

例如：

```
CREATE TABLE languages(
  id VARCHAR(2) NOT NULL,
  name VARCHAR(64) NOT NULL,
  PRIMARY KEY (id)
) ENGINE = INNODB;

CREATE TABLE country(
  id VARCHAR(2) NOT NULL,
  lang_id VARCHAR(2) NOT NULL DEFAULT '',
  name VARCHAR(64) NOT NULL,
  PRIMARY KEY (id, lang_id),
  CONSTRAINT FK_country_languages_id FOREIGN KEY (lang_id)
  REFERENCES languages (id) ON DELETE RESTRICT ON UPDATE RESTRICT
)
ENGINE = INNODB;

-- Populate languages
INSERT INTO languages VALUES 
  ('en', 'English'),
  ('de', 'German');

-- Populate names from 'en' table
INSERT INTO country SELECT id, 'en', name FROM country_en;

-- Populate names from 'de' table
INSERT INTO country SELECT id, 'de', name FROM country_de; 
```

...您的链接中的表格在哪里`country_en`和是什么。`country_de`

# javascript - 使用 jquery 将答案保存在变量中 - 为什么这不起作用？

> ID：10722967
> 
> 赞同：-1
> 
> 时间：2012-05-23T15:18:27.760
> 
> 标签：javascript, jquery, html

所以我有一个调查，一次显示一个问题。当用户点击他/她的答案时，问题消失，下一个问题消失。在调查结束时，我想显示他们选择的所有答案。

所以这是我在用户选择一个选项时运行的函数：

```
 $('#actualThumbnails .thumb').click(function(){
    var id = this.id;
    var myClass = $(this).attr('class');
    firstQuestion = myClass+id;
    allAnswers += firstQuestion;
    startQuestionTwo();
}); 
```

所以理想情况下，我必须打印 allAnswers 并且它应该可以工作。但由于某种原因 allAnswers 没有得到变量。这实际上使事情无法正常工作，但我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:28:27.100

确保`allAnswers`在全局范围内声明函数之外

```
var allAnswers; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T15:25:44.737

首先要说的是，试试 console.log(...)，这允许您将对象和信息写入浏览器 javascript-console（ff 中的 firebug、chrome 中的 CTRL+SHIFT+I 和 ie 中的 F12）应用程序使用它，因为它可能是众多原因之一。

无论如何，您没有声明 allAnswers，也许尝试这样的事情：

```
var allAnswers = new Array();

$('#actualThumbnails .thumb').click(function(){
    var id = this.id;
    var myClass = $(this).attr('class');
    firstQuestion = myClass+id;
    allAnswers.push("This should be the answer for question " + id);
    startQuestionTwo();
}); 
```

# python - Flask-WTF - validate_on_submit() 永远不会执行

> ID：10722968
> 
> 赞同：40
> 
> 时间：2012-05-23T15:18:28.330
> 
> 标签：python, forms, validation, flask, wtforms

我正在使用 Flask-WTF：

这是我的表格：

```
from flask.ext.wtf import Form, TextField

class BookNewForm(Form):
    name = TextField('Name') 
```

这是控制器：

```
@book.route('/book/new', methods=['GET', 'POST'])
def customers_new():
    form = BookNewForm()
    if form.is_submitted():
        print "submitted"
    if form.validate():
        print "valid"
    if form.validate_on_submit():
        flash("Successfully created a new book")
        return redirect(url_for('.books_show'))
    return render_template('views/books_new.html', form=form) 
```

现在的问题是，如果您查看我的打印语句，它总是打印提交，但它永远不会打印有效并且 validate_on_submit() 永远不会执行。为什么？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-05-29T04:47:15.920

您没有在 HTML 表单中插入 CSRF 字段。

```
<form method=post>
    {{ form.csrf_token }}
    {{ form.name }}
    <input type=submit>
</form> 
```

添加`form.csrf_token`到模板 ( [docs](http://flask-wtf.readthedocs.io/en/latest/quickstart.html#creating-forms) ) 后，表单将按预期进行验证。

在验证表单后添加`print(form.errors)`以查看引发的错误。 `errors`在验证之前将为空。在这种情况下，有一个关于丢失的错误

```
@book.route('/book/new_no_csrf', methods=['GET', 'POST'])
def customers_new_no_csrf():
    form = BookNewForm()
    print(form.errors)

    if form.is_submitted():
        print "submitted"

    if form.validate():
        print "valid"

    print(form.errors)

    if form.validate_on_submit():
        flash("Successfully created a new book")
        return redirect(url_for('.books_show'))

    return render_template('books_new.html', form=form) 
```

```
{}
submitted
{'csrf_token': [u'CSRF token missing']}
127.0.0.1 - - [29/May/2012 02:01:08] "POST /book/new_no_csrf HTTP/1.1" 200 -
127.0.0.1 - - [29/May/2012 02:01:08] "GET /favicon.ico HTTP/1.1" 404 - 
```

[我在 GitHub 上创建了一个示例。](https://github.com/ajford/Flask-wtf-SO-Question-10722968)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-23T23:10:19.623

你可以打印错误

```
print form.errors 
```

或者

```
app.logger.debug(form.errors) 
```

如果你得到 csrf-error，你应该在你的模板中设置**form.csrf_token 。**

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-07-04T00:15:33.900

当我试图在我的模板中渲染一个`FormField`被迭代的对象时，我遇到了这个问题。`FieldList`我必须嵌入两个 hidden_​​tag 元素，一个用于`FieldList`表单，一个用于`FieldForm`表单，在模板注释中搜索关键字“HIDDEN TAG”

```
class ParamRangeForm( FlaskForm ):
    minX = FloatField( )
    maxX = FloatField( )

class ParamRangesForm( FlaskForm ):
    paramRanges = FieldList( FormField( ParamRangeForm ) )
    submit      = SubmitField( 'Submit' )

    def loadParams( self ) :
        for paramName in ["p1" , "p2" , "p3", "p4"] :
            prf = ParamRangeForm( )
            prf.minX = -100.9#float('-inf')
            prf.maxX = 100.5#float('-inf')
            self.paramRanges.append_entry( prf )

...

  <form action="" method="POST" enctype="multipart/form-data">
    {{ rangesForm.hidden_tag() }} <!--#### HIDDEN TAG #1 -->
    <table>
      <!--Print Column Headers-->
      <thead>
      <tr>
        <th class="ColumnHeader">Parameter</td>
        <th class="ColumnHeader">Min</td>
        <th class="ColumnHeader">Max</td>
      </tr>
      </thead>

      <!--Print Parameter Rows-->
      <tbody>
      {% for paramRange in rangesForm.paramRanges %}
        <tr>
          {{ paramRange.hidden_tag() }} <!--#### HIDDEN TAG #2 -->
          <td>p{{ loop.index }}</td>
          <td>{{ paramRange.minX }}</td>
          <td>{{ paramRange.maxX }}</td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
    </div>
    {{ rangesForm.submit() }}
  </form> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-25T07:08:51.573

在模板 html 文件中的标记之后插入：

```
 {{ form.csrf_token }} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-18T01:11:32.260

如果我在每次请求之前都没有登录，我正在清除烧瓶会话。这导致了这个问题。

```
@main.before_request
def before_request():
    if not current_user.is_authenticated():
        # TODO clean sessions may cause CSRF missing issue
        session.clear()
        print "Session Cleared"
        return redirect(url_for('auth.login')) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-15T20:10:59.137

我认为 API 已经改变。也许尝试改变

```
from flask.ext.wtf import Form 
```

到：

```
from flask_wtf import Form 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-09T10:34:50.820

我花了几个小时调试 Flask-WTF 的验证问题。与许多其他问题一样，问题是 CSRF 验证问题。但是，我的问题不是由我发现的任何常见问题引起的。

CSRF 的标准 Flask-WTF 实现需要将**两**件事传递给浏览器。

**一：**隐藏的 CSRF 表单域 eg

```
<input id="csrf_token" name="csrf_token" type="hidden" value="ImYzODdmZTdhYTRlMmNkYWRjYmRlYWFmZjQxMDllZTQ1OWZmYzg3MTki.XKvOPg.gUCkF9j-vg0PrL2PRH-v43GeHu0"> 
```

**二：**会话cookie HTTP响应头 例如

```
Set-Cookie: session=eyJjc3JmX3Rva2VuIjoiZjM4N2ZlN2FhNGUyY2RhZGNiZGVhYWZmNDEwOWVlNDU5ZmZjODcxOSJ9.XKvOPg.a3-W62MHvaGVkv2GYCi-dgpLE3Y; HttpOnly; Path=/ 
```

如果缺少其中任何一个，浏览器将无法发送正确的 CSRF 验证。当然，这反过来会导致表单验证失败。

如果`csrf_token`表单中存在隐藏字段但缺少会话cookie，则提交表单时您将收到以下响应...

```
Bad Request
The CSRF session token is missing. 
```

在我的情况下，由于我的代码中的错误，会话 cookie 丢失了。我需要在整个 Flask 站点中提供自定义 HTTP 标头。我像这样包含它...

```
class LocalFlask(Flask):

    def process_response(self, response):
        response.headers['my-header'] = 'My Header Value'
        return response

app = LocalFlask(__name__) 
```

然而，这会导致任何依赖该`Flask.response.headers`方法的东西失败。其中之一是 Flaks-WTF 设置会话 cookie HTTP 标头。

这可以通过将`super()`方法添加到`LocalFlask`类中来解决，以便它继承`Flask`类的方法。

```
class LocalFlask(Flask):

    def process_response(self, response):
        response.headers['my-header'] = 'My Header Value'
        #LocalFlask inherits methods from Flask
        super(LocalFlask, self).process_response(response)
        return response

app = LocalFlask(__name__) 
```

# objective-c - 故事板segue modal不能有后退按钮？

> ID：10722969
> 
> 赞同：2
> 
> 时间：2012-05-23T15:18:30.707
> 
> 标签：objective-c, ios, ipad

因此，我们在弹出框内构建了一个条形按钮，并使用了连接到情节提要中的 UIViewController 的模态 segue。但是，没有返回按钮。我们如何构建一个后退按钮？

# python - 比较两个 CSV 文件以跟踪更改的 Pythonic 方法

> ID：10722976
> 
> 赞同：0
> 
> 时间：2012-05-23T15:18:57.493
> 
> 标签：python, csv, comparison

我有一个生成 CSV（从网站解析的数据）的 Python 脚本。以下是 CSV 文件的示例：

**文件 1.csv**

```
China;Beijing;Auralog Software Development (Deijing) Co. Ltd.;;;
United Kingdom;Oxford;Azad University (Ir) In Oxford Ltd;;;
Italy;Bari;Bari, The British School;;Yes;
China;Beijing;Beijing Foreign Enterprise Service Group Co Ltd;;;
China;Beijing;Beijing Ying Biao Human Resources Development Limited;;Yes;
China;Beijing;BeiwaiOnline BFSU;;;
Italy;Curno;Bergamo, Anderson House;;Yes; 
```

**文件2.csv**

```
China;Beijing;Auralog Software Development (Deijing) Co. Ltd.;;;
United Kingdom;Oxford;Azad University (Ir) In Oxford Ltd;;;
Italy;Bari;Bari, The British School;;Yes;
China;Beijing;Beijing Foreign Enterprise Service Group Co Ltd;;;
China;Beijing;Beijing Ying Biao Human Resources Development Limited;;Yes;
This;Is;A;New;Line;;
Italy;Curno;Bergamo, Anderson House;;Yes; 
```

如你看到的，

*中国;北京;北外在线 北外;;;* ==> File1.csv 中的这一行不再出现在 File2.csv 和*This;Is;A;New;Line;;* ==> File2.csv 中的这一行是新的（在 File1.csv 中不存在）。

我正在寻找一种方法来比较这两个 CSV 文件（要知道的重要一点是行的顺序不重要......它们不能在任何地方）。

我想要的是一个可以告诉我的脚本： - 一个新行：*This;Is;A;New;Line;;* - 删除一条线：*中国；北京；北外在线；；；* 等等 ... ！

我试过但没有任何成功：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

import csv

f1 = file('now.csv', 'r')
f2 = file('past.csv', 'r')

c1 = csv.reader(f1)
c2 = csv.reader(f2)

now = [row for row in c2]
past = [row for row in c1]

for row in now:
    #print row
    lol = past.index(row)
    print lol

f1.close()
f2.close()

_csv.Error: new-line character seen in unquoted field - do you need to open the file in universal-newline mode? 
```

知道最好的方法吗？非常感谢你;）

编辑：

```
import csv

f1 = file('now.csv', 'r')
f2 = file('past.csv', 'r')

c1 = csv.reader(f1)
c2 = csv.reader(f2)

s1 = set(c1)
s2 = set(c2)

lol = s1 - s2
print type(lol)
print lol 
```

这似乎是个好主意，但是：

```
Traceback (most recent call last):
  File "compare.py", line 20, in <module>
    s1 = set(c1)
TypeError: unhashable type: 'list' 
```

**编辑2（请不要关心上面的内容）：** **在您的帮助下，这是我正在编写的脚本：* *

```
#!/usr/bin/python
# -*- coding: utf-8 -*-
import os
import csv

### COMPARISON THING ###
x=0

fichiers = os.listdir('/me/CSV')
for fichier in fichiers:
    if '.csv' in fichier:
        print('%s -----> %s' % (x,fichier))
        x=x+1

choice = raw_input("Which file do you want to compare with the new output ? ->>>")
past_file = fichiers[int(choice)]
print 'We gonna compare %s to our output' % past_file

s_now = frozenset(tuple(row) for row in csv.reader(open('/me/CSV/now.csv', 'r'), delimiter=';')) ## OUR OUTPUT
s_past = frozenset(tuple(row) for row in csv.reader(open('/me/CSV/'+past_file, 'r'), delimiter=';')) ## CHOOSEN ONE

added = [";".join(row) for row in s_now - s_past]  # in "now" but not in "past"
removed = [";".join(row) for row in s_past - s_now]  # in "past" but not in "now"

c = csv.writer(open("CHANGELOG.csv", "a"),delimiter=";" )
line = ['AD']
for item_added in added:
    line.append(item_added)
    c.writerow(['AD',item_added])

line = ['RM']
for item_removed in removed:
    line.append(item_removed)
    c.writerow(line) 
```

两种错误：

```
 File "programcompare.py", line 21, in <genexpr>
    s_past = frozenset(tuple(row) for row in csv.reader(open('/me/CSV/'+past_file, 'r'), delimiter=';')) ## CHOOSEN ONE
_csv.Error: line contains NULL byte 
```

或者

```
 File "programcompare.py", line 21, in <genexpr>
    s_past = frozenset(tuple(row) for row in csv.reader(open('/me/CSV/'+past_file, 'r'), delimiter=';')) ## CHOOSEN ONE
_csv.Error: newline inside string 
```

几分钟前它还在工作，但我已经更改了 CSV 文件以使用不同的数据进行测试，我在这里:-)

对不起，最后一个问题！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T15:35:48.363

如果您的数据不是太大，将它们加载到[集合（或 freezeset）](http://docs.python.org/library/stdtypes.html#set)中将是一种简单的方法：

```
s_now = frozenset(tuple(row) for row in csv.reader(open('now.csv', 'r'), delimiter=';'))
s_past = frozenset(tuple(row) for row in csv.reader(open('past.csv', 'r'), delimiter=';')) 
```

要获取已添加的条目列表：

```
added = [";".join(row) for row in s_now - s_past]  # in "now" but not in "past"
# Or, simply "added = list(s_now - s_past)" to keep them as tuples. 
```

同样，被删除的条目列表：

```
removed = [";".join(row) for row in s_past - s_now]  # in "past" but not in "now" 
```

* * *

为了解决您为什么会看到的更新问题，csv在迭代时`TypeError: unhashable type: 'list'`将每个条目作为 a 返回。不可[散列](http://docs.python.org/glossary.html#term-hashable)，因此不能插入到.`list``lists``set`

为了解决这个问题，您需要在将条目添加到集合之前将`list`条目转换为s。`tuple`有关如何完成此操作的示例，请参阅我的答案中的上一部分。

* * *

为了解决您看到的其他错误，它们都是由 CSV 文件的内容引起的。

**_csv.Error：字符串内的换行符**

看起来您`"`在数据中的某处有引号字符 ()，这会使解析器感到困惑。我对 CSV 模块不够熟悉，无法准确地告诉您出了什么问题，无论如何都不能不看一下您的数据。

但是，我确实设法重现了这样的错误：

```
>>> [e for e in csv.reader(['hello;wo;"rld'], delimiter=";")]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
_csv.Error: newline inside string 
```

在这种情况下，可以通过指示读者不要对引号进行任何特殊处理来修复它（参见[csv.QUOTE_NONE](http://docs.python.org/library/csv.html#csv.QUOTE_NONE)）。（请注意，这将禁用引用数据的处理，从而分隔符可以出现在带引号的字符串中，而不会将字符串拆分为单独的条目。）

```
>>> [e for e in csv.reader(['hello;wo;"rld'], delimiter=";", quoting=csv.QUOTE_NONE)]
[['hello', 'wo', '"rld']] 
```

**_csv.Error：行包含 NULL 字节**

我猜这可能取决于您的 CSV 文件的编码。请参阅以下问题：

*   [Python CSV 错误：行包含 NULL 字节](https://stackoverflow.com/questions/4166070/python-csv-error-line-contains-null-byte)
*   [CSV阅读器（Python）中的“行包含NULL字节”](https://stackoverflow.com/questions/7894856/line-contains-null-byte-in-csv-reader-python)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T15:28:00.757

将 csv 文件逐行读取到集合中。比较集合。

```
>>> s1 = set('''China;Beijing;Auralog Software Development (Deijing) Co. Ltd.;;;
... United Kingdom;Oxford;Azad University (Ir) In Oxford Ltd;;;
... Italy;Bari;Bari, The British School;;Yes;
... China;Beijing;Beijing Foreign Enterprise Service Group Co Ltd;;;
... China;Beijing;Beijing Ying Biao Human Resources Development Limited;;Yes;
... China;Beijing;BeiwaiOnline BFSU;;;
... Italy;Curno;Bergamo, Anderson House;;Yes;'''.split('\n'))
>>> s2 = set('''China;Beijing;Auralog Software Development (Deijing) Co. Ltd.;;;
... United Kingdom;Oxford;Azad University (Ir) In Oxford Ltd;;;
... Italy;Bari;Bari, The British School;;Yes;
... China;Beijing;Beijing Foreign Enterprise Service Group Co Ltd;;;
... China;Beijing;Beijing Ying Biao Human Resources Development Limited;;Yes;
... This;Is;A;New;Line;;
... Italy;Curno;Bergamo, Anderson House;;Yes;'''.split('\n'))
>>> s1 - s2
set(['China;Beijing;BeiwaiOnline BFSU;;;'])
>>> s2 - s1
set(['This;Is;A;New;Line;;']) 
```

# c# - 通过 Web 服务获取 SharePoint 并构建 SQL 表？

> ID：10722978
> 
> 赞同：0
> 
> 时间：2012-05-23T15:19:02.150
> 
> 标签：c#, .net, sql-server-2008, sharepoint-2010

场景：我无权在与 SharePoint 相同的服务器上运行该程序。我只能访问 SharePoint 服务器 Url。因此，我选择使用 Web 引用访问 SharePoint 服务来访问 SharePoint 2010 列表。

这是我的代码

```
using System;
using System.Net;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;

namespace SPTechOpsProjectTracker
{
    class Program
 {
    static void Main(string[] args)
    {
        //Add a reference to my web service
        TechOpsProjectWebService.Lists listService = new TechOpsProjectWebService.Lists();
        //use the logged in user’s credentials
        listService.Credentials = System.Net.CredentialCache.DefaultCredentials;

        String listGUID = "a486016e-80b2-44c3-8b4a-8394574b9430";
        String activeItemViewGUID = "60689d51-5787-4ef1-9515-c050f20fa424 ";
        //calling the GetListItems service to return the 1000 list items 
        //for theparticular list and view that you pass to the function
        System.Xml.XmlNode activeItemData = listService.GetListItems(listGUID, activeItemViewGUID, null, null, "1000", null, "");

        // Go through the list to see what was returned

    foreach(System.Xml.XmlNode listItem in activeItemData) 
    {
     // Get the attributes
     System.Xml.XmlAttributeCollection attrs = listItem.Attributes;
     Console.WriteLine(listItem.OuterXml);
     Console.WriteLine("Press any key to continue"); 
     Console.ReadLine();

    }

     //connect to my SQL server 2008 server

     //Create a database

     //Create a table in that database.

     //Dump the values of attributes obtained from my code to that table.

    }
   }
} 
```

问题：我需要连接到我的 SQL Server 2008 服务器 创建一个数据库 在该数据库中创建一个表。将从我的代码中获得的属性值转储到该表中。

非常感谢您的帮助/建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:37:00.500

看看[这个](http://www.codeproject.com/Articles/4416/Beginners-guide-to-accessing-SQL-Server-through-C)，一个通过 C# 连接到 SQL Server 的指南。

问候！

# jquery - 在性能方面，哪种方式使用 jQuery 选择器更好？

> ID：10722979
> 
> 赞同：0
> 
> 时间：2012-05-23T15:19:07.493
> 
> 标签：jquery, performance

我正在优化我们网站上使用的 JavaScript 代码，需要一些关于做什么和不做什么的指针/提示。我们使用 jQuery 1.7.1 作为我们的库。

当谈到优化/编写优化代码时，我仍然是新手，但我知道的是我们需要减少 DOM 遍历的次数。

所以，我正在考虑的是缓存更频繁使用的元素，然后出于任何原因使用缓存的元素。

我感到困惑或应该说的是好奇，如果在 DOM 准备好时，我将“body”元素缓存在全局范围的变量中，然后在所有 JavaScript 代码/文件中使用它来查找我可能的任何元素之后需要那里。

喜欢

```
jQuery(function(){
    myGlobalObj.body = jQuery('body');

    ..
    ..
    ..
    myGlobalObj.body.find('.someElement').<whatever>;
    ..
    ..
    ..
    myGlobalObj.body.find('#someOtherElement').<whatever>;
    ..
    ..
    ..

}); 
```

它会被证明对提高性能有用吗？是否有任何不利影响，比如没有更新 DOM 树，或者其他什么？

请指教。

编辑＃1：感谢大家的评论和回答，但我想我没有说清楚。

我知道使用基于 ID 的选择器比使用带有类名的选择器的好处，但我担心的是，通过使用“body”的缓存引用（或搜索元素的最近过滤父项）来搜索/隔离会提高性能目标元素。

即不是每次都使用 $(..whateverElement..)，

$cachedParent.find(..whateverElement..) 会被证明是一个更好的执行者吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T15:22:53.267

`$("#id")`比遍历整个集合`$(".class")`要高效得多。`$(".class")`

审查这个的一个好方法是：

```
var yourElement = $(".class");
for (var i=0; i< yourElement.length; i++)
 { alert(i);} 
```

`$("#id")`将返回并仅在该一个元素上运行（如果不正确的多个 id 具有相同的值，则第一次出现）。

`.children()`编辑：当使用and`.parent()`函数时，它也会变得有点复杂。这些与 Jorge 下面提到的有关 jquery 选择器原生可用参数的内容有关（并且执行几乎相同）

@Jorge - 很好的观察

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T15:21:56.620

`$('#id')`是最快的方法

您可以保存参考以供以后重复使用

`var $cache = $('.cache');`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T15:22:27.867

只是`$('.someElement')`并且`$('#someOtherElement')`将比使用更好，`.find`因为它使用本机`getElementsByClassName(..)`和`getElementById(..)`本机方法。

[证明](http://jsperf.com/find-vs-idv2)

# interpreter - 什么是元循环解释器

> ID：10722981
> 
> 赞同：5
> 
> 时间：2012-05-23T15:19:14.793
> 
> 标签：interpreter, self-interpreter, metacircular

同一个人可以向我解释什么是元循环解释器吗？维基百科上的定义是：

> 元循环评估器是自解释器的一种特殊情况，其中父解释器的现有设施直接应用于正在解释的源代码，而无需任何额外的实现。

但是我不知道如何理解句子：“自解释器，其中父解释器的现有设施直接应用于正在解释的源代码”。

在stackoverflow上，我找到了[答案](https://stackoverflow.com/a/1481132/493982)，说元循环解释器是没有任何附加功能的自我解释器，所以我很困惑。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T15:36:36.720

你有什么不清楚的地方？您提到的stackoverflow帖子尽可能清晰。假设您发明了自己的非常基本的语言，将其称为 Tiny ML 表示微小的元语言（实际上不要，这个名字是 ML 部分）。

然后你为那个微小的 ml 语言编写一个解释器，比如说用 C 语言。一旦该解释器启动并运行，您就可以使用这个可以运行 Tiny ML 代码的解释器并在 Tiny ML 中编写另一个解释器，该解释器可以处理更复杂的 Tiny ML 版本，我们称该语言为 Hyper ML。有了它，你的最后一个解释器应该是虚幻的元循环解释器。

# objective-c - 访问 Objective C 中的公共字段

> ID：10722985
> 
> 赞同：2
> 
> 时间：2012-05-23T15:19:28.413
> 
> 标签：objective-c, field, public

我尝试了以下示例代码：

```
    #import "基础/Foundation.h"

    @接口示例
    {
        @public NSString* 名称；
    }
    @结尾

    @实现示例 @end

    主函数（）
    {
        例子*我；
        我->名字=@“世界”；
    }
```

看来我的代码在这一点上讨厌我。我确实理解公开一个字段是多么糟糕的主意，但我不确定为什么在 main() 的最后一行出现错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T15:27:41.373

这里有很多错误

你的类应该是子类`NSObject`，所以它应该被声明为

```
@interface example : NSObject
{
    @public NSString* name;
}

@end 
```

* * *

接下来，您实际上需要一个类的实例来获取它的值，例如

```
example *me = [[example alloc] init];
NSLog(@"%@", me->name); 
```

* * *

下一个类以大写字母开头，通常有一个前缀，例如我会使用

```
PSExample 
```

* * *

接下来请不要像这样访问实例变量，您应该通过访问器使您的对象状态可用，而不是直接访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T15:25:08.200

您没有分配或初始化`me`变量。您可能想要继承`NSObject`然后使用它：

```
example *me = [[example alloc] init] 
```

至少你需要`alloc`它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T15:25:47.740

您需要先初始化变量，然后才能访问它。此外，您应该从`NSObject`.

```
#import "Foundation/Foundation.h"

@interface example : NSObject
{
    @public NSString* name;
}
@end

@implementation example @end

int main()
{
    example* me = [[example alloc] init];
    me->name = @"World";
} 
```

# html - 提交带有 url 的表单时的禁止页面

> ID：10722987
> 
> 赞同：0
> 
> 时间：2012-05-23T15:19:28.820
> 
> 标签：html, forms, url

几天前，我为我的网站更改了主机，现在在新服务器上我遇到了一个奇怪的错误，当我使用 get 方法提交表单时，服务器内带有 url 的输入文本字段似乎无法找到页面。

这是我正在测试它的地方

[http://www.oscurodrago.it/tools/testserver.php](http://www.oscurodrago.it/tools/testserver.php)

这是生成 404 禁止页面的错误示例

[http://www.oscurodrago.it/tools/testserver.php?u=http%3A%2F%2Fexemple.com](http://www.oscurodrago.it/tools/testserver.php?u=http%3A%2F%2Fexemple.com)

那是没有网址的网址

[http://www.oscurodrago.it/tools/testserver.php?u=test](http://www.oscurodrago.it/tools/testserver.php?u=test)

你知道为什么它不起作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T15:37:54.837

我想这是由于您主机上的一些 mod_security 设置造成的。他们很可能不喜欢将 URL 作为参数传递（这可能是跨站点脚本漏洞）。

因此，您可以要求您的主机不要那么严格（我猜他不会这样做），或者尝试使用 POST 而不是 GET 提交表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T15:37:36.933

你可能想检查文件的 CHMOD 是 644，这是大多数服务器需要的安全性，尤其是在运行 SuExec 或 SuPHP 时。

# python - SQLight 3：附加表

> ID：10722990
> 
> 赞同：0
> 
> 时间：2012-05-23T15:19:39.360
> 
> 标签：python, sqlite, python-3.x

我有一个`table1`带有一些数据的列属性`col1 col2 col3`，比如 matrix `A`。我得到了带有属性的新数据`col2 col3 col4`——它们以带有属性名称的列表和`B`数据本身的矩阵的形式出现。

我想将新数据添加到现有数据中`table1`以获得如下结构：

```
col1 col2 col3 col4
a11  a12  a13  -
     ...
aN1  aN2  aN3  -
-    b11  b12  b13
-         ...
-    bM1  bM2  bM3 
```

有什么简单的方法吗？也许首先创建一个新的临时表，以某种方式将其附加到现有的临时表并删除它？

此外，我希望能够检查新数据是否`col2`与某些现有数据相交，例如是否`b11`等于`ai2`.

ps 我使用 Python3 中的 sqlite3 包 - 不知道它是否对 SQLite 功能带来任何限制......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:22:35.657

您是否尝试过 ALTER 方法？

```
example=sqlite3.connect('your_database_name.db')
cursor=example.cursor()
cursor.execute('ALTER TABLE your_table_name ADD COLUMN your_data TEXT') 
```

或者它说“TEXT”的地方，你把你的数据类型是“REAL”，“INT”希望这会有所帮助

# css - Shadowbox Firefox 与滚动条不兼容的问题

> ID：10722991
> 
> 赞同：0
> 
> 时间：2012-05-23T15:19:40.787
> 
> 标签：css, cross-browser, shadowbox

Firefox 中的 Shadowbox 总是向我显示滚动条；使用 Chrome，IE 和 Safari 工作正常。有谁知道如何解决这个问题？我在 shadowbox.css 中尝试了不同的东西，但没有任何效果。

![Shadowbox 滚动问题](../Images/5498c4318e62523299743b8d6c232560.png)

**shadowbox.css**

```
#sb-title-inner,#sb-info-inner,#sb-loading-inner,div.sb-message{font-family:"HelveticaNeue-Light","Helvetica Neue",Helvetica,Arial,sans-serif;font-weight:200;color:#fff}
#sb-container{position:fixed;margin:0;padding:0;top:0;left:0;z-index:999;text-align:left;visibility:hidden;display:none}
#sb-overlay{position:relative;height:100%;width:100%;}
#sb-wrapper{position:absolute;visibility:hidden;width:100px;}
#sb-wrapper-inner{position:relative;border:0px solid #303030;overflow:hidden;height:100px;}
#sb-body{position:relative;height:100%;}
#sb-body-inner{position:absolute;height:100%;width:100%;}
#sb-player.html{height:100%;overflow:visible;}
#sb-body img{border:none;}
#sb-loading{position:relative;height:100%;}
#sb-loading-inner{position:absolute;font-size:14px;line-height:24px;height:24px;top:50%;margin-top:-12px;width:100%;text-align:center;}
#sb-loading-inner span{background:url(loading.gif) no-repeat;padding-left:34px;display:inline-block;}
#sb-body,#sb-loading{background-color: ;}
#sb-title,#sb-info{position:relative;margin:0;padding:0;overflow:hidden;}
#sb-title,#sb-title-inner{height:26px;line-height:26px;}
#sb-title-inner{font-size:16px;}
#sb-info,#sb-info-inner{height:20px;line-height:20px;}
#sb-info-inner{font-size:12px;}
#sb-nav{float:right;height:16px;padding:2px 0;width:45%;}
#sb-nav a{display:block;float:right;height:16px;width:16px;margin-left:3px;cursor:pointer;background-repeat:no-repeat;}
#sb-nav-close{background-image:url(close.png); visibility:hidden;}
#sb-nav-next{background-image:url(next.png);}
#sb-nav-previous{background-image:url(previous.png);}
#sb-nav-play{background-image:url(play.png);}
#sb-nav-pause{background-image:url(pause.png);}
#sb-counter{float:left;width:45%;}
#sb-counter a{padding:0 4px 0 0;text-decoration:none;cursor:pointer;color:#fff;}
#sb-counter a.sb-counter-current{text-decoration:underline;}
div.sb-message{font-size:12px;padding:10px;text-align:center;}
div.sb-message a:link,div.sb-message a:visited{color:#fff;text-decoration:underline;} 
```

shadowbox iframe 所在的站点是 ( [http://www.miradorhotel.com.co](http://miradorhotel.com.co) )。当您进入该网站时，它会自动弹出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T18:41:00.913

谢谢。最简单的解决方案是更改您的 iframe，以便 scrolling="no" 摆脱滚动条。

如果您担心小屏幕上的用户，请将 iframe 和其中的表格都更改为使用固定大小而不是百分比，然后如前所述设置 scrolling="no"。

# dynamics-crm-2011 - 无法在使用发送消息的 crm 2011 插件中使用 InputParameter["Target"]

> ID：10722992
> 
> 赞同：1
> 
> 时间：2012-05-23T15:19:43.577
> 
> 标签：dynamics-crm-2011

我有一个使用发送消息针对电子邮件实体注册的插件。

`context.InputParameters["Target"]`没有找到。

我发现了一些使用 InputParameters["EmailId"] 的旧 4.0 代码。

我对如何获得这些信息感到困惑。我一直在网上搜索，找不到这些参数的列表或如何解决这个问题。每个 msdn 站点都在讨论什么是输入参数，但仅列出 Target 作为示例。请帮助我理解这一点。直接问题：我在哪里可以找到这些参数的列表以使 sur ei 正确执行此操作。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:14:30.080

[CRM 4 中输入和输出参数的首选来源是 Patrick Verbeeten 的博客。](http://www.patrickverbeeten.com/Blog/2008/01/25/CRM-40-Plug-in-message-input-parameters) 我认为它仍然与 CRM 2011 非常相关。看起来信息也可以从元数据中提取，因为他有一个用于[CRM 2011](http://www.patrickverbeeten.com/CRM-Applications/Dynamics-CRM-Developers-Tool-2011)的工具。

如果您接受此答案，请感谢 Pat 的努力 :)

# java - 如何通过套接字传输 1 个文件的多个文件

> ID：10722996
> 
> 赞同：0
> 
> 时间：2012-05-23T15:20:10.077
> 
> 标签：java

此代码发送一个特定文件，如何使用套接字将文件列表从一个目录（服务器）发送到另一个目录（客户端）？请帮忙。

服务器类

```
import java.io.BufferedInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.OutputStream;
import java.net.ServerSocket;
import java.net.Socket;

public class Main {
  public static void main(String[] args) throws IOException {
    ServerSocket servsock = new ServerSocket(123456);
    File myFile = new File("s.pdf");
    while (true) {
      Socket sock = servsock.accept();
      byte[] mybytearray = new byte[(int) myFile.length()];
      BufferedInputStream bis = new BufferedInputStream(new FileInputStream(myFile));
      bis.read(mybytearray, 0, mybytearray.length);
      OutputStream os = sock.getOutputStream();
      os.write(mybytearray, 0, mybytearray.length);
      os.flush();
      sock.close();
    }
  }
} 
```

客户端类

```
import java.io.BufferedOutputStream;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.net.Socket;

public class Main {
  public static void main(String[] argv) throws Exception {
    Socket sock = new Socket("127.0.0.1", 123456);
    byte[] mybytearray = new byte[1024];
    InputStream is = sock.getInputStream();
    FileOutputStream fos = new FileOutputStream("s.pdf");
    BufferedOutputStream bos = new BufferedOutputStream(fos);
    int bytesRead = is.read(mybytearray, 0, mybytearray.length);
    bos.write(mybytearray, 0, bytesRead);
    bos.close();
    sock.close();
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T15:22:12.197

发送者可以在每个文件的数据前面加上文件的长度。这将使接收方能够计算出一个文件何时结束而下一个文件何时开始。

# android - 活动之间的自定义转换android

> ID：10722999
> 
> 赞同：3
> 
> 时间：2012-05-23T15:20:13.977
> 
> 标签：android, android-activity, transition

我正在构建一个 android 应用程序，我希望能够从一个活动到另一个活动进行自定义转换。当我在第一个活动上按下一个按钮时，我希望它减小它的大小并转到屏幕的一个角落，直到它消失，然后调用第二个活动。当然，在第一个activity调整大小和移动的过程中，第二个activity会开始出现（我想说的是，这段时间，我不希望下面出现黑屏）。有人有这种东西的经验吗？我还想指出，我正在为 API 3.0+ 构建我的应用程序，因此可以使用更新的函数和方法。谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-28T19:47:07.777

您应该能够为此使用简单的缩放动画。在第二个活动中，您可以执行以下操作：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    overridePendingTransition(R.anim.scale_from_corner, R.anim.scale_to_corner);
} 
```

对于动画，它将是：

scale_to_corner.xml

```
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <scale android:fromYScale="1.0" android:toYScale="0"
        android:fromXScale="1.0" android:toXScale="0" 
        android:duration="500"/>
</set> 
```

和 scale_from_corner.xml

```
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <scale android:fromYScale="0" android:toYScale="1.0"
        android:fromXScale="0" android:toXScale="1.0" 
        android:duration="500" android:pivotX="100%"
        android:pivotY="100%" />
</set> 
```

这将使您的第一个活动缩小到左上角，而您的第二个活动从右下角增长。如果你想改变它们增长或收缩到的点，你可以改变 pivotX 和 pivotY。