# StackOverflow 问答 12108000-12108999

# java - Jagatoo 文档

> ID：12108013
> 
> 赞同：0
> 
> 时间：2012-08-24T10:54:21.807
> 
> 标签：java

除了 doc 文件夹中的单个 PDF 之外，我找不到 Jagatoo 的任何文档。有吗？

将使阅读结构更容易，而不是调查所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:00:19.053

阅读源代码。

在没有足够文档的情况下，源代码确实是最好的文档。我发现如果我真的想围绕一个框架或库，最好的办法是花一个晚上（或周末，视情况而定）对源代码进行适当的*深入研究。*额外的好处是，如果您想自己实现缺少的功能，您确切知道需要去哪里，更好的是，将其贡献回开源社区。

PS我猜你的意思是[这个页面](http://sourceforge.net/projects/jagatoo/files/documentation/InputSystem/)上的PDF是你唯一能找到的。您还可以查看 Xith3D 如何[使用](http://xith.org/)JAGaToo。

# google-maps - JavaScript 压缩 | 谷歌地图

> ID：12108014
> 
> 赞同：2
> 
> 时间：2012-08-24T10:54:25.427
> 
> 标签：google-maps, google-maps-api-3

我在 WordPress 中创建了一个脚本来加载我所有的 JavaScript 文件，合并并压缩它们。在我使用的 JavaScript 文件和以下 JavaScript 文件中：

```
http://maps.googleapis.com/maps/api/js?sensor=false 
```

虽然我的脚本运行良好，但谷歌地图加载的 JavaScript 文件看起来没有运行，以便从谷歌加载所有外部 JavaScript 文件。

谷歌地图文件在我生成的合并压缩后的 JavaScript 文件的最顶部，其内容如下：

```
window.google = window.google||{};
google.maps = google.maps||{};
(
    function()
    {
        function getScript(src)
        {
            document.write('<'+'script src="'+src+'"'+' type="text/javascript"><'+'/script>');
        }

        var modules = google.maps.modules = {};
        google.maps.__gjsload__ = function(name, text)   
        {
            modules[name]=text;
        };

        google.maps.Load = function(apiLoad)
        {
            delete google.maps.Load;
            apiLoad(
            [
                null,
                [
                    [
                        [
                            "http://mt0.googleapis.com/vt?lyrs=m@183000000\u0026src=api\u0026hl=en-US\u0026",
                            "http://mt1.googleapis.com/vt?lyrs=m@183000000\u0026src=api\u0026hl=en-US\u0026"],
                        ...
                        DATA
                        ...
                null,
                null,
                0,
                "http://khm.googleapis.com/mz?v=115\u0026",
                null,
                "https://earthbuilder.google.com",
                "https://earthbuilder.googleapis.com"
            ],
            loadScriptTime
        );
    };

    var loadScriptTime = (new Date).getTime();
    getScript(
        "http://maps.gstatic.com/intl/en_us/mapfiles/api-3/9/13b/main.js"
    );
}
)(); 
```

以上内容与我通过网络浏览器直接访问 URL [http://maps.googleapis.com/maps/api/js?sensor=false的内容相同。](http://maps.googleapis.com/maps/api/js?sensor=false)

现在的问题是，虽然我得到了正确的数据，但我在控制台中得到的 google mas 对象如下：

```
console.log(google);
Object
    maps: Object
    Load: function (apiLoad)
    {
        delete google.maps.Load;
        ...
        data
        ...
    }
    __gjsload__: function(name, text)
    {
        modules[name] = text;
    }
    modules: Object
        __proto__: Object
        __proto__: Object 
```

对于以下我得到：

```
console.log(google.maps.LatLng);
undefined 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T20:37:38.023

Google Maps API 团队有特定的代码，不允许您在本地复制主脚本。特别是，该代码每隔这么多小时就会“过期”。您不能将 Google Maps API 脚本与您的其他脚本结合使用。

# javascript - jQuery 和 YUI 加载

> ID：12108018
> 
> 赞同：0
> 
> 时间：2012-08-24T10:54:32.137
> 
> 标签：javascript, jquery, yui

我在我的应用程序中使用 jQuery 和 YUI-3.6.0。我正在使用 YUI 历史模块。我尝试在 YUI 历史上创建一个包装器，如下所示。（这保存在“history-wrapper.js”中）

```
var MyHistory;

(function() {
    YUI().use('history', function (Y) {
        var history = null;

        MyHistory = function() {
            history = new Y.History();
        };

        MyHistory.prototype.save= function() {
            history.add({
                data : "some data"
            });
        };

        MyHistory.prototype.load= function() {
            var data = (history.get("data");
            //process data
        };
    });
})(); 
```

我正在使用此包装器和以下代码行

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="yui/yui/yui-min.js"></script>
<script type="text/javascript" src="js/history-wrapper.js"></script>
<script type="text/javascript">
    var jQ = jQuery.noConflict();

    jQ(document).ready(function() {
        var history = new MyHistory();
        history.save();
    });
</script> 
```

我在两个不同的应用程序中使用相同的代码。

*   在一个应用程序中，一切正常，因为首先加载了 Wrapper。
*   在其他应用程序中，它抛出“MyHistory is not defined”，因为在加载包装器之前调用了“jQ(document).ready”函数。

我不知道是什么导致了这种行为。谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:57:47.893

YUI.use() 中的回调函数“function(Y){... where you defined MyHistory...}”仅在加载依赖项（历史记录）时执行。

然后，当您尝试使用包装器时，您无法保证已定义 MyHistory。

解决方案可能是将您的 JQuery 代码也放入 YUI.use() 中。你可以让 YUI 加载器加载 jquery 和历史模块，你不再需要包装 Histroy 插件。

我不确定它是否完全像这样（现在无法检查）。

```
<script type="text/javascript" src="yui/yui/yui-min.js"></script>
YUI({
    modules: {
        'jquery': {
            path: 'js/jquery.js'
        }
    }
}).use('history', 'jquery' , function (Y) {
 var jQ = Y.jQuery.noConflict(); //or juste jQuery.noConflict();

    jQ(document).ready(function() {  //it is likely the document will already be ready
        var history = new Y.History();
        history.save();

    });    
}); 
```

# sql - SQL：选择（空=空）；

> ID：12108021
> 
> 赞同：11
> 
> 时间：2012-08-24T10:54:59.077
> 
> 标签：sql, postgresql-8.4

这个问题不在我正在查看的数据库考试中，所以它可能无法在真实情况下使用......

> 以下有效的 SQL 语句会产生什么输出？解释你的答案！
> 
> 选择（空=空）；

我可以很容易地产生语句的输出，即

```
学校=>选择（空=空）；
 ？柱子？
----------

(1 行)

```

在 psql 8.4.11 中，但是如何以及为什么这是我不知道的答案...我猜它会尝试评估括号内的表达式并得出真/假，但显然不是。

关于它为什么表现得如此的任何提示？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T10:58:57.203

`NULL`代表“未知值”。不知道一个值是真还是假或其他任何东西。

那么，当比较两个未知值时，答案会是什么？UnknownA 是否等于 UnknownB？

回答？未知...

以下是 SQL Server 的示例：

```
IF (NULL = NULL)
  PRINT 'Equals'

IF (NULL != NULL)
  PRINT 'Not Equals'

IF (NULL IS NULL)
  PRINT 'IS'

IF (NULL IS NOT NULL)
  PRINT 'IS NOT' 
```

唯一被打印的东西：`IS`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T10:59:23.257

我想，预期的答案是`NULL`。这就是 MySQL 所做的。实际上，这也是 PostgreSQL 返回的内容。可能，您的 SQL 客户端只是没有显示唯一返回值为 a 的单行`NULL`。

但是，MS SQL 服务器没有布尔类型，因此它不能只选择布尔表达式的结果。所以 MS SQL 中的结果是错误的。

问题的重点是检查您对 SQL 中的 NULL 逻辑的理解。而不是`=`，您应该`IS`在比较时使用运算符`NULL`（除非该`ANSI_NULLS`选项在 MySQL 中设置为 true）。

# magento - 如何获取在 2 个或更多类别中找到的产品

> ID：12108026
> 
> 赞同：1
> 
> 时间：2012-08-24T10:55:17.510
> 
> 标签：magento, collections, filter, categories

几天来，我一直在尝试获得有关如何按 2 个或更多类别过滤产品集合的干净解决方案。产品应同时属于 A 类和 B 类，而不是其中任何一个。我尝试了多种在互联网上找到的解决方案，但均未成功。到目前为止，我发现的唯一解决方法（但我没有找到）是使用原始查询，然后从 id 中获取集合：

```
SELECT e.entity_id FROM catalog_product_entity AS e INNER JOIN catalog_category_product AS ccp on ccp.product_id=e.entity_id where ccp.category_id =100 or ccp.category_id = 101 group by entity_id having count(*) > 1 
```

这将返回在类别 100 和 101 中都找到的产品列表。但是，我希望实际上有一种“Magento 方式”或者不需要执行原始查询就可以做到这一点。有人对此有线索吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T08:00:05.547

经过一夜的工作，我终于找到了一个合适的解决方案：

```
$cat_ids = array(4,5,6);
$collection = Mage::getModel('catalog/product')->getCollection();
$collection->joinField('category_id', 'catalog/category_product', 'category_id', 'product_id = entity_id', null, 'left')
    ->addAttributeToFilter('category_id', array('in' => array('finset' => $cat_ids)))
    ->getSelect()
    ->group('entity_id')
    ->having('count(*) = ' . count($cat_ids)); 
```

你去吧。以上将返回同时属于所有提供的类别的所有产品。感谢 activeDev 和 Jurgen 的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:49:19.427

这应该可以正常工作。

```
$collection = Mage::getModel('catalog/product')
            ->getCollection()
            ->joinField('category_id', 'catalog/category_product', 'category_id', 'product_id = entity_id', null, 'left')
            ->addAttributeToFilter('category_id', array('in' => array('finset' => '36,37')))
            ->addAttributeToSelect('*')
            ->setPageSize(5); 
```

这来自[http://blog.chapagain.com.np/magento-how-to-filter-product-collection-using-2-or-more-category-filters/](http://blog.chapagain.com.np/magento-how-to-filter-product-collection-using-2-or-more-category-filters/)，但似乎有点过时了。

我无法确认这是否适用于我正在处理当前不包含类别的版本。但我按预期得到了一个空集合，所以让我知道！

# android - 从上方和下方出现的菜单在不使用菜单按钮的情况下隐藏并显示在 android 的屏幕触摸上

> ID：12108028
> 
> 赞同：0
> 
> 时间：2012-08-24T10:55:23.273
> 
> 标签：android

是否可以在 android 中创建一个菜单，显示某人何时触摸图表并带来更多选项。我想要一个从上方和下方出现的菜单，就像您触摸菜单按钮时菜单在 android 中的显示方式一样。现在没有按钮，我希望用户触摸图表或表格，然后从上方和下方甚至两侧出现两个菜单。任何建议将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:15:15.340

建议：
制作您想要显示的菜单布局，并将其包含在您的活动布局中。默认情况下将其设置为 GONE，这将隐藏它。
然后为您的图表设置一个触摸监听器，并将菜单的可见性更改为 VISIBLE 以显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:12:14.157

我认为您需要的是上下文菜单；看到[这个例子](http://moorandroid.blogspot.in/p/context-menu.html)希望这有帮助:)干杯:)

# mysql - 为什么排序在 MySQL 中有效，但在 Coldfusion 结果集中无效？

> ID：12108030
> 
> 赞同：0
> 
> 时间：2012-08-24T10:55:31.447
> 
> 标签：mysql, sorting, coldfusion

我正在运行`Coldfusion8/MySQL 5.0.88`并进行搜索，我需要`ASC/DESC`根据用户设置对其结果进行排序。

如果我在 MySQL 中运行这个查询，它可以工作：

```
 SELECT a.*
  FROM artikelstammdaten a
        WHERE a.aktiv = "ja"
        AND a.firma LIKE '%test_comp%' 
  GROUP BY a.iln, a.artikelnummer, a.preis_aktuell, a.artikelbezeichnung
  HAVING sum(a.bestand) != 0 OR (a.nos = "ja" AND a.nos_anzeige = "ja")

  ORDER BY a.preis_aktuell ASC
  LIMIT 0, 24 
```

这会产生在 MySQL 中运行的预期结果。但如果我在 Coldfusion 中这样做：

```
 <cfquery datasource="db" name="results">
      SELECT a.*
           FROM artikelstammdaten a
           WHERE a.aktiv = "ja"
<cfif LOCAL.search.s_firma neq "" AND LOCAL.search.s_firma neq "Default">
           AND a.firma LIKE <cfqueryparam value="%#LOCAL.search.s_firma#%" cfsqltype="cf_sql_varchar">
    </cfif>
      GROUP BY a.iln, a.artikelnummer, a.preis_aktuell, a.artikelbezeichnung
      HAVING sum(a.bestand) != 0 OR (a.nos = "ja" AND a.nos_anzeige = "ja")

      ORDER BY <cfqueryparam value="#variables.sortierung#" cfsqltype="cf_sql_varchar"> <cfqueryparam value="#variables.sortierung2#" cfsqltype="cf_sql_varchar" maxlength="4">
      LIMIT <cfqueryparam value="#variables.first#" cfsqltype="cf_sql_numeric">, <cfqueryparam value="#variables.last#" cfsqltype="cf_sql_numeric">
 </cfquery> 
```

它只是列出没有任何顺序的结果..

**问题：**
知道我做错了什么以及如何正确排序吗？

谢谢！

**解决方案**：

```
<cfset variables.allowSort = "DESC,ASC,all_columns_names_that_are_ok,seperated_by_comma">
<cfif listfindnocase(variables.allowSort, variables.sortierung, ",") EQ 0>
    ORDER BY a.artikelnummer DESC
<cfelse>
    ORDER BY #variables.sortierung# #variables.sortierung2#
</cfif> 
```

因此，如果排序列或排序方向的提交值与允许列表不匹配，我将使用默认排序标准，否则提交值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T11:07:34.507

你不能`<cfqueryparam ...>`在`ORDER BY`.

[有关此主题的更多信息](http://www.chapter31.com/2008/11/22/cfqueryparam-does-not-work-in-order-by-what-are-my-options/)，请参阅 Michael Sharman 的这篇博文。

# jquery - 如何使用 jQuery 从输入字段中插入值？

> ID：12108035
> 
> 赞同：1
> 
> 时间：2012-08-24T10:55:37.547
> 
> 标签：jquery, html, input, html-table, visualization

我有以下结构的表：

```
<table class="table-info" border='1px' >

    <tr >
        <td class="view" style='background:red; width:100px' ></td>
        <td>6</td>
        <td><span class="title" style="cursor: pointer">Some title</td>
        <td title="url"><a href="#" target="_blank">088835522112</a></td>
        <td>AUDIO</td>
        <td><input class="input-text" type="text" value=""></td>
    </tr>
       <tr >
        <td class="view" style='background:red; width:100px' ></td>
        <td>6</td>
        <td><span class="title" style="cursor: pointer">Some title</td>
        <td title="url"><a href="#" target="_blank">088835522112</a></td>
        <td>AUDIO</td>
        <td><input class="input-text" type="text" value=""></td>
    </tr>
        <tr >
        <td class="view" style='background:red; width:100px' ></td>
        <td>6</td>
        <td><span class="title" style="cursor: pointer">Some title</td>
        <td title="url"><a href="#" target="_blank">088835522112</a></td>
        <td>AUDIO</td>
        <td><input class="input-text" type="text" value=""></td>
    </tr>

</table>​ 
```

我想可视化输入字段的值`"td class='view'"`。我怎么能用 jQuery 做到这一点？

[http://jsfiddle.net/dilyan_kn/R4Dqr/](http://jsfiddle.net/dilyan_kn/R4Dqr/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T10:59:52.603

如果我说得对，这应该有效：

```
​$(".input-text"​).on("keyup", function() {
    $(this).closest("tr").find(".view").html(this.value);
})​​​​​​​​​;​ 
```

**演示：http:** [//jsfiddle.net/R4Dqr/1/](http://jsfiddle.net/R4Dqr/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:05:49.743

[工作小提琴](http://jsfiddle.net/R4Dqr/2/)

```
$(".input-text").on("keyup", function() {
    $(this).closest("tr").find('td:first').html(this.value);
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T11:10:40.100

```
$('.input-text').bind('keyup', function() 
{ 
  $(this).closest("tr").css('color', 'white').find(".view").html(this.value);
}); 
```

# java - 双 -> 提取整数

> ID：12108036
> 
> 赞同：0
> 
> 时间：2012-08-24T10:55:41.213
> 
> 标签：java, int, double, decimal, extract

```
int a = 4;
int b = 3;
int c = 10;
int d1 =(int) (double)(a*b)/c;
double d2 =(double)(a*b)/c;
System.out.println("d1: " + d1);
System.out.println("d2: " + d2);

Result: d1: 1 and d2: 1.2 
```

如何提取/删除 1.2 的 1.0。所以我得到 d2 = 0.2 和 d1 = 1 当 a = 9 -> (9*3)/10 时。d2 = 0.7 和 d1 = 2 当 a = 6 -> (6*3)/10 时。d2 = 0.8 和 d1 = 1

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:59:36.610

```
int a = 4;
int b = 3;
int c = 10;
// Store the original value.
double original = (double)(a*b)/c;
int d1 = (int)(original);
// Get the difference between the original value and the floored one.
double d2 = original - d1;
System.out.println("d1: " + d1);
System.out.println("d2: " + d2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:00:55.090

只需从浮点值中减去整数部分：

```
double d = (double) (a*b)/c;
int intPart = (int) d;
double fracPart = d - intPart; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T11:33:06.883

尝试这个

```
int a = 9;
int b = 3;
int c = 10;

int d1 =(int) (double)(a*b)/c;
double d2 =(double)((a*b)%c)/c;
System.out.println("d1: " + d1);
System.out.println("d2: " + d2); 
```

# javascript - Javascript 元素

> ID：12108038
> 
> 赞同：0
> 
> 时间：2012-08-24T10:55:50.260
> 
> 标签：javascript, javascript-events

我需要以下帮助：

我有一个包含 h3-s 和段落的页面，我希望最初隐藏所有段落。

如果单击 h3，脚本将循环遍历它下面的标签，显示段落标签，如果它涉及另一个 h3 标签，它应该打破循环。

**我无法控制 html 输出，因此我无法嵌套标签或提供任何 h3-s id。下面的代码就是我必须玩的全部**。

例如，如果单击 H3 Title2，则显示 Title 2 Para 1 和 Title 2 Para 2，如果再次单击 H3 Title2，则隐藏 Title 2 Para 1 和 Title 2 Para 2。

```
<h3>H3 Title1</h3>
<p>Title 1 Para 1</p>
<p>Title 1 Para 2</p>
<p>Title 1 Para 3</p>
<p>Title 1 Para 4</p>

<h3>H3 Title2</h3>
<p>Title 2 Para 1</p>
<p>Title 2 Para 2</p>

<h3>H3 Title3</h3>
<p>Title 3 Para 1</p>
<p>Title 3 Para 2</p>

<h3>H3 Title4</h3>
<p>Title 4 Para 1</p>
<p>Title 4 Para 2</p>
<p>Title 4 Para 3</p> 
```

请不要 jQuery

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:04:45.017

查看[getElementsByTagName](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByTagName)以获取页面上的所有 H3，您希望将 click() 处理程序附加到这些。

在您的 onclick 中，您循环遍历所有下一个元素，直到到达 H3 并跳出循环。查看[nextElementSibling](https://developer.mozilla.org/en-US/docs/DOM/Element.nextElementSibling)获取 H3 之后的元素。

`display:block`为了显示/隐藏，要么设置一个 css 类，要么直接更改元素的样式，在和之间切换`display:none`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:07:15.903

就像是..

```
var pHide = function () {
    var ps = document.getElementsByTagName('p'), i = ps.length;
    while(i-->0) ps[i].style.display = 'none';
},
toggleDisplay = function (elm) {
    elm.style.display = elm.style.display === 'none' ? 'block' : 'none';
},
nextNode = function (elm) { // can't assume built in?
    var e = elm;
    while( e = e.nextSibling ) if ( e.tagName !== undefined ) break;
    return e;
},
addActions = function () {
    var hs = document.getElementsByTagName('h3'), i = hs.length;
    while(i-->0) hs[i].addEventListener('click',function () {
        var elm = this;
        while( (elm = nextNode(elm)) && elm.tagName.toLowerCase() != 'h3') if(elm.tagName.toLowerCase() == 'p') toggleDisplay(elm);
    }, false);

};
pHide();
addActions();​ 
```

示例[**小提琴**](http://jsfiddle.net/zKSEt/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T12:26:07.027

我完全同意[xqwzts 的](https://stackoverflow.com/users/501759/xqwzts)回答：获取对单击的 H3 元素的引用，遍历以下节点并检查它们（类型和名称）。

这是另一个可能更容易阅读的解决方案：

```
// the event handler we are going to use
var handler = function() {
    // `this` refers to the clicked element
    var node = this.nextSibling;
    // iterate over all following nodes
    for(; node ; node = node.nextSibling) {
        if(node.nodeName === 'P') {
            // if it is a p element, toggle the visibility
            node.style.display = node.style.display === 'block' ? '' : 'block';
        }
        else if(node.nodeName === 'H3') { // or node.nodeType === 1
            break; // if it is a H3 element (or an element but not P), stop
        }
    }
};

// get all h3 elements
var h3s = document.getElementsByTagName('h3');

// assign a click event handler to all of them
for(var i = 0, l = h3s.length; i < l; i++) {
    h3s[i].onclick = handler;
} 
```

[**演示**](http://jsfiddle.net/UwLhJ/)

有多种方法可以绑定事件处理程序，所有这些方法都在[quirksmode.org](http://www.quirksmode.org/js/introevents.html)上得到了很好的解释。

**参考：** [`getElementsByTagName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByTagName) , [`Node#nodeName`](https://developer.mozilla.org/en-US/docs/DOM/Node.nodeName), [`Node#nodeType`](https://developer.mozilla.org/en-US/docs/DOM/Node.nodeType),[`Element#style`](https://developer.mozilla.org/en-US/docs/DOM/element.style)

# jquery - 如果 ID 存在，找到锚标签并添加类

> ID：12108042
> 
> 赞同：0
> 
> 时间：2012-08-24T10:55:56.577
> 
> 标签：jquery, css

我的网站上有一组 Vimeo iframe，刷新时会从数组中随机调用。这些 iframe 中的每一个都有唯一的 ID。

我所追求的是取决于显示哪个 iframe，它会识别 ID 并向菜单项添加一个类。

到目前为止，我有这个：

```
$("#yuan-photofilm").find(".menu-nav li ul li a").addClass('active-vimeo'); 
```

我的想法是，如果`#yuan-photofilm`存在，它会找到`.menu-nav li ul li a`并添加类`.active-vimeo`- 但它似乎不起作用。

有任何想法吗？

谢谢，R

这是一些 HTML

```
<div class="grid_7 suffix_5">
        <div class="video-container">
            <iframe id="jack-photofilm" src="http://player.vimeo.com/video/46822673?title=0&amp;portrait=0&amp;byline=0&amp;color=ffffff" width="650" height="366" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>   </div>
</div>
<div class="clear"></div>
    <div class="grid_7">
        <ul class="menu-nav">
            <li class="current-menu-nav-item"><a href="index.php">Photofilms</a>
                <ul>
                    <li><a href="#yuan" id="yuan">Yuan Shuai</a></li>
                    <li><a href="#nina" id="nina">Nina</a></li>
                    <li><a href="#zhuoer" id="zhuoer">Zhuoer</a></li>
                    <li><a href="#qingqing" id="qingqing">Uncle Douglas and Qingqing</a></li>
                    <li><a href="#jack" id="jack">Jack</a></li>
                </ul>   
            </li>
            <li><a href="still.php">Photographs</a></li>
            <li class="sub-info-menu"><a href="information.php">Information</a></li>
            <li><a href="http://blog.youziproject.com">Blog</a></li>
        </ul>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:02:01.863

每个元素似乎都有一个 ID，为什么不直接定位它呢？

```
if ($("#yuan-photofilm").length) {
   $("#yuan").addClass('active-vimeo');
} 
```

或更动态：

```
$('.menu-nav li ul li a').each(function(i,e) {
    if ($('#'+e.id+'-photofilm').length) $(e).addClass('active-vimeo');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:10:09.610

我认为每个人都错过了 jQuery 选择器的重点。只需使用：

```
$("#yuan-photofilm .menu-nav li ul li a").addClass('active-vimeo'); 
```

​ 如果`#yuan-photofilm`不存在，则选择器将失败并且不会添加类。这可以在[http://jsfiddle.net/LtwW5/中看到](http://jsfiddle.net/LtwW5/)

**已编辑**

看过您的 HTML 后，您可以将其更改为以下任何一种：

```
$("#yuan-photofilm").addClass('active-vimeo');
$(".menu-nav li ul li a#yuan-photofilm").addClass('active-vimeo'); 
```

取决于您希望对结构的严格程度（例如，如果`#yuan-photofilm`在其他地方发生使用第二个，它不应该因为它是一个 id 但生成的代码并不总是这样）

# c++ - 我应该如何使用 Win32::API 在 perl 中加载用 c++ 编写的 dll

> ID：12108047
> 
> 赞同：0
> 
> 时间：2012-08-24T10:56:10.433
> 
> 标签：c++, perl, dll

我正在尝试在 perl 脚本中加载用 c++ 创建的 dll。

头文件包含：

```
class MathsFuncs {
  static __declspec(dllexport) int __stdcall add(int a, int b);
} 
```

为什么我不能在 perl 中使用 Win32::API 加载这个函数？

**编辑以回答评论：**

其余的 c++ 是：

```
// MathsFuncs.cpp
#include "MathsFuncs.h"

int add(int a, int b) {
  return a+b;
} 
```

我在 cygwin 中使用：

```
cl MathsFuncs.cpp /LD 
```

（分类是 x86）

生成 dll 文件：（`MathsFuncs.dll`
以及大量其他文件 .lib .exp 等）

Perl 脚本是：

```
#!/utils/bin/perl -w
use strict;
use warnings;
use Win32::API;

Win32::API->Import('MathsFuncs', 'int add(int, int)');# or die "ji\n";

print "1 + 2 = ";
print add(1,2);
print "\n"; 
```

当我`perlpart.pl`在 cygwin 中运行时，我得到输出：

```
Segmentation fault (core dumped) 
```

而且我总是得到相同的结果，我看不出我做错了什么。有什么明显的东西我失踪了。这是我第一次尝试 A：创建一个 dll，B：在 perl 中加载一个 dll

编辑：我所有的文件和编译的输出等都[在这里](http://www.sendspace.com/filegroup/LCUDy7MieCREyo8Rtha9mLF7AT8THfPUvnrRiDc%2Blsd35uvCYo6%2Faz%2FKtbObD%2BA4LsO%2Fwv2lZss)（现在稍微过时了），但是所有的更改源都在问题中

# c++ - sphinx 可以在没有数据库的情况下工作吗？

> ID：12108048
> 
> 赞同：-8
> 
> 时间：2012-08-24T10:56:19.510
> 
> 标签：c++

如果 sphinx 不需要数据库，那么如何在 sphinx 的索引中存储字符串或文本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T11:03:19.660

来自狮身人面像网站：

> Sphinx 让您可以快速轻松地批量索引和搜索存储在 SQL 数据库、NoSQL 存储或文件中的数据——或者动态索引和搜索数据，使用 Sphinx 就像使用数据库服务器一样。

* * *

> 非 SQL 存储索引。数据也可以以一种称为 XMLpipe 的简单 XML 格式流式传输到批处理索引器，或直接插入到增量 RT 索引中。

所以是的，它可以在没有数据库的情况下工作......如何？您可能可以阅读文档...您搜索了吗？

# java - Thunderbird api 通过 Java 发送邮件

> ID：12108049
> 
> 赞同：1
> 
> 时间：2012-08-24T10:56:27.360
> 
> 标签：java, jakarta-mail, thunderbird

我一直在使用 Java 邮件 API 发送通过 Java 程序生成的邮件。我现在要做的是通过Thunderbird邮件客户端发送邮件，以便将邮件保存到用户的已发送邮件文件夹中，如果邮件失败，用户可以重新发送邮件。

我还想知道是否有可能在 Java 邮件 API 中获得投递报告。

## 编辑

我发现我们的邮件服务器是 POP3 并且它不存储邮件。那么向发件人发送另一封邮件并定义对这些邮件进行分类的规则是否是个好主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:02:39.083

即使您使用 java 邮件 api（至少是 gmail）发送它，您仍然可以使用 Thunderbird 在已发送的文件夹中看到。事实上，5 分钟前，我使用我建立的网站看到了这个。我正在使用 Java API 发送电子邮件，当我检查发送文件夹时，我可以看到它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:31:07.640

Thunderbird 中的收件箱/发件箱通常映射到您的 IMAP 帐户。IMAP-Account 设置在邮件服务器上。您的所有邮件和文件夹都存储在该邮件服务器上。客户端（Thunderbird）只显示来自服务器的内容。通过远程调用（IMAP 协议），您可以在服务器上创建/删除/编辑/移动文件夹和邮件。发送邮件不是 IMAP 的一部分。在这里，您使用 SMTP 协议。当您在 Thunderbird 中配置邮件帐户时，您必须配置 IMAP 和 SMTP。当您发送邮件时，Thunderbird 会执行以下步骤： - 通过 SMTP 协议发送邮件 - 通过 IMAP 协议在发件箱中创建邮件

SMTP 和 IMAP 完全不同。但是，如果您想发送邮件并在发件箱中看到这封邮件，则必须同时使用两者。您可以使用 java mail api 编写相同的工作流程。

# python - 在 Python 中列出已安装的模块

> ID：12108050
> 
> 赞同：0
> 
> 时间：2012-08-24T10:56:30.537
> 
> 标签：python

这是我想出的列出已安装模块的基本代码。

```
import sys as s
mod=s.modules.keys()
for indx,each in enumerate(mod):
    print indx,each 
```

但我正在寻找的是，它应该只打印出父模块名称，如

```
 numpy.f2py.pprint'
 numpy.distutils.atexit'
 numpy.distutils.sys'
 numpy.f2py.sys' 
```

它应该将它计为一次 Numpy 并移动以寻找下一个模块并以相同的方式重复......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T11:02:38.517

```
import sys
print set([each.split('.')[0] for each in sys.modules.keys()]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T10:59:51.213

```
import sys as s
mod=s.modules.keys()
mods_seen = list()
for indx,each in enumerate(mod):
    parts = each.split('.')
    if not parts[0] in mods_seen:
        print indx,each
        mods_seen.append(parts[0]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T10:59:16.103

system 命令`pip freeze`可以满足您的需求，但是我不确定它是列出所有模块还是仅列出使用 pip 安装的模块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-08T07:27:21.357

```
def __listAllModules(self):
    """ This method returns all the modules installed in python
        including the built in ones.
    """
    allmodules = list(sys.builtin_module_names)
    allmodules += list(t[1] for t in pkgutil.iter_modules())
    allmodules = sorted(allmodules)
    return allmodules 
```

# google-places-api - Google Place API 定价和查询提升请求

> ID：12108053
> 
> 赞同：1
> 
> 时间：2012-08-24T10:56:36.220
> 
> 标签：google-places-api

关于 Google Place API 的使用，Google 允许此 Place API 每 24 小时 1000 次查询，如果使用信用卡验证帐户，则每 24 小时 100,000 次查询。每 24 小时超过 100,000 个查询，我们可以写信给 Google 请求提升。

有没有人有解除 Place API 查询限制的经验？如果您没有获得批准，Google 超出查询使用量的定价模型是什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T01:36:17.853

Places API 目前没有定价模型，因为它是一项免费服务。如果您超出使用量，您只会收到`"status": "OVER_QUERY_LIMIT"`任何后续 Places API 请求的响应。即使启用了计费，**您也不会为使用 Places API**付费。

如果您申请[Places API 配额提升](http://places-quota-uplifts.appspot.com/)，只要您的申请符合 Google 地图[服务条款](https://developers.google.com/maps/terms)和 Places API[要求](https://developers.google.com/places/documentation/#Limits)，您应该会获得配额提升。

# iphone - cocos2d sprite 当前位置

> ID：12108055
> 
> 赞同：0
> 
> 时间：2012-08-24T10:56:41.850
> 
> 标签：iphone, objective-c, cocoa, cocos2d-iphone

嗨，我有一个包含 CCsprite 的类，我在游戏层中使用该类来四处走动。我想获得节点的当前位置，所以我打电话，

```
NSLog(@"%d",myClass.sprite.position.x);
NSLog(@"%d",myClass.sprite.position.y); 
```

或者

```
NSLog(@"%d",myClass.position.x);
NSLog(@"%d",myClass.position.y); 
```

但它只在控制台中返回 0 值。我在这里处理错误的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:59:28.383

尝试`NSLog("%@", NSStringFromPoint(self.position));`或`NSLog("%@", NSStringFromPoint(sprite.position));`取决于您从哪里调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:00:10.540

`position`成员变量是 type ，因此它的成员（和，两个浮点数）的`CGFloat`正确标志是, not 。`x``y``%f``%d`

# android - 动作条夏洛克，改变标签下线条的颜色？

> ID：12108057
> 
> 赞同：2
> 
> 时间：2012-08-24T10:56:50.467
> 
> 标签：android, actionbarsherlock

如何更改突出显示的操作栏 Sherlocks 选项卡下显示的线条的颜色。

它的默认值为电蓝色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T06:47:18.787

这里是基于[google i/o app](http://code.google.com/p/iosched/) implementation 的实现：

设置主题样式：

```
<style name="Theme.Styled" parent="Theme.Sherlock.Light">

    <item name="android:actionBarTabBarStyle">@style/Widget.Styled.TabBar</item>
    <item name="actionBarTabBarStyle">@style/Widget.Styled.TabBar</item>

</style>

 <style name="Widget.Styled.TabView" parent="Widget.Sherlock.Light.ActionBar.TabView">
    <item name="android:background">@drawable/tab_white_ab</item>
</style> 
```

像这样创建一个可绘制对象 - 请注意，在 google I/O 应用程序中，非聚焦状态是透明的 - 在下面的示例中，我将透明更改为绿色：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<!-- Non focused states -->
<item android:state_focused="false"
    android:state_selected="false"
    android:state_pressed="false"
    android:drawable="@drawable/tab_green_unselected"
             />
    <!--  android:drawable="@android:color/transparent"-->

<item android:state_focused="false"
    android:state_selected="true"
    android:state_pressed="false"
    android:drawable="@drawable/tab_white_selected" />

<!-- Focused states -->
<item android:state_focused="true"
    android:state_selected="false"
    android:state_pressed="false"
    android:drawable="@drawable/item_focused" />
<item android:state_focused="true"
    android:state_selected="true"
    android:state_pressed="false"
    android:drawable="@drawable/tab_white_selected_focused" />

<!-- Pressed -->
<!--    Non focused states -->
<item android:state_focused="false"
    android:state_selected="false"
    android:state_pressed="true"
    android:drawable="@drawable/item_pressed" />
<item android:state_focused="false"
    android:state_selected="true"
    android:state_pressed="true"
    android:drawable="@drawable/tab_white_selected_pressed" />

<!--    Focused states -->
<item android:state_focused="true"
    android:state_selected="false"
    android:state_pressed="true"
    android:drawable="@drawable/item_focused" />
<item android:state_focused="true"
    android:state_selected="true"
    android:state_pressed="true"
    android:drawable="@drawable/tab_white_selected_pressed" /> 
```

希望这可以帮助。

# javascript - jquery将容器动画到左边一半

> ID：12108059
> 
> 赞同：0
> 
> 时间：2012-08-24T10:57:02.663
> 
> 标签：javascript, jquery, jquery-animate, slide

我有一个容器，我正在向其中添加一些内容（通过溢出隐藏：隐藏）。我想将容器一直向左滑动，这样它就会显示新内容而不显示任何原始内容。它与图像滑块的风格相似。当前内容以一种方式滑出，而新内容同时以另一种方式滑出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:19:01.527

如果您提供了一些代码，将更容易更好地理解这个问题。可能是我错了，但据我了解，我在

[http://jsfiddle.net/pXy2C/](http://jsfiddle.net/pXy2C/)

检查它是否是您需要的东西？

# awk - awk 命令插入除空行之外的相应行号

> ID：12108062
> 
> 赞同：1
> 
> 时间：2012-08-24T10:57:09.293
> 
> 标签：awk

我现在正在做作业，让我难过的问题是：

> “编写一个 awk 命令，在上面的文本文件中的每一行之前插入相应的行号。在这种情况下，不应对空行进行编号。”

我有一个答案，但我很难找到每个组件的作用的解释。

命令是：

```
awk '{print (NF? ++a " " :"") $0}' <textfile.txt> 
```

我知道那`NF`是字段编号，它`$0`指的是整个输入记录。我尝试使用该命令来查找什么是什么，但是每当我省略某些内容时，它似乎总是有语法错误。

所以，我的问题是每个组件的作用是什么？做什么的`++a`？`?`后`NF`? _ 引号的作用是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:04:49.273

指令`... ? ... : ...`是一个`if-else`. 因此，它与以下内容相同：

```
if ( NF > 0 ) {
    ++a;
    print a " " $0;
} else {
    print $0;
} 
```

`a`是一个变量，只有在找到包含字段的行时才会增加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:38:42.117

```
print (NF? ++a " " :"") $0 
```

您的解决方案中使用了三元运算符。对于空行 NF 将始终为 0 所以

```
cond?true case:false case 
```

如果 NF > 0 则打印 a 或 print "" a++ 表示在打印后将 a 递增 1，这将用于下一个非空行处理。

```
awk 'BEGIN{count=1}{if($0~/^$/){print}else{print count,$0;count++}}' your_file 
```

测试如下：

```
> cat temp.cc
int main ()
{

}
> awk 'BEGIN{count=1}{if($0~/^$/){print}else{print count,$0;count++}}' temp.cc
1 int main ()
2 {

3 }
> 
```

# r - 基于边界条件的数据框中的子集行和列

> ID：12108065
> 
> 赞同：0
> 
> 时间：2012-08-24T10:57:21.237
> 
> 标签：r

我有一些问题要表达自己。可能，这就是为什么我还没有找到任何对我有帮助的东西。这个例子应该清楚我想要什么。假设我有坐标的 amxm 矩阵结构。可以说它的范围从 A1 到 E5 。我想对距离外部坐标 k 行的行/列进行子集化。

在我的示例中，k 是 2。所以我想选择数据框中所有坐标为 B2、B3、B4、C2、C4、D2、D3、D4 的记录。手动，我会执行以下操作：

```
cc <- data.frame(x=(LETTERS[1:5]), y=c(rep(1,5),rep(2,5),rep(3,5), rep(4,5), rep(5,5)) , z=rnorm(25))
slct <- with(cc, which( (x=="B" | x=="C" | x=="D" ) & (y==2 | y==3 | y==4) & !(x=="C" & y==3) ))
cc[slct,] # result data frame 
```

但是，如果矩阵尺寸增加，那将不是很好的方法。有更好的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:28:21.650

相当难以阅读，但它确实有效。

```
m <- 5   # Matrix dimensions
k <- 2   # The index of the the inner square that you want to extract
cc[(cc$x %in% LETTERS[c(k,m-k+1)] & !cc$y %in% c(1:(k-1), m:(m-k+2))) |
   (cc$y %in% c(k, m-k+1)         & !cc$x %in% LETTERS[c(1:(k-1), m:(m-k+2))]),] 
```

第一行比较`k`从矩阵的左右边缘提取第 :th 列，但不提取比`k`上下边缘更近的部分。第二行做同样的事情，但行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T11:29:49.133

```
cc$xy <- paste0(cc$x,cc$y)

coords <- c("B2","B3","B4", "C2", "C4", "D2", "D3", "D4")
cc[cc$xy %in% coords,]

#   x y          z xy
#7  B 2 -0.9031472 B2
#8  C 2 -0.1405147 C2
#9  D 2  1.6017619 D2
#12 B 3  1.7713041 B3
#14 D 3 -0.2005749 D3
#17 B 4  1.8671238 B4
#18 C 4  0.3428815 C4
#19 D 4  0.1470436 D4 
```

# security - 我应该使用什么哈希算法来存储密码？

> ID：12108068
> 
> 赞同：6
> 
> 时间：2012-08-24T10:57:35.620
> 
> 标签：security, hash, passwords

我并不真正了解有关散列算法强度的最新发展；目前我存储密码的最佳选择是什么？

此外，加盐和密钥拉伸可以为我提供多少安全性？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T11:13:45.697

*   [MD5已经坏了](http://www.win.tue.nl/hashclash/rogue-ca/)。
*   [SHA-1 有明显的弱点](http://www.schneier.com/blog/archives/2005/02/cryptanalysis_o.html)。
*   SHA-2 目前被认为是足够的。
*   [SHA-3 将很快成为 FIPS 标准](http://csrc.nist.gov/groups/ST/hash/sha-3/index.html)。
*   最佳实践是将密码散列与随机加盐和密钥拉伸结合起来，例如[PBKDF2](http://en.wikipedia.org/wiki/PBKDF2)。
*   [关于密码加盐、散列和拉伸](http://crackstation.net/hashing-security.htm)的一个很好的讨论。
*   我[在 C# 中实现密码加盐、散列和拉伸](http://sleeksoft.co.uk/public/techblog/articles/20130411_1.html)。

至于散列提供的额外安全性，这取决于您使用多少散列迭代。例如，假设您决定使用 2^14 次哈希迭代。这将密码的熵增加了 14 位。根据摩尔定律，哈希提供的每多一点熵意味着在与今天相同的时间内破解密码大约需要额外的 18 个月。因此，要在今天破解原始密码的同时破解迭代哈希将需要 21 年（14 x 18 个月）。

salting 提供的额外安全性是双重的：它阻止了彩虹表的有效使用，并且使得破解大量密码列表（但不是单个密码）变得更加耗时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T19:06:47.760

[看看这个。](http://codahale.com/how-to-safely-store-a-password/)

security.stackexchange 上的这个问题很好地讨论了 bcrypt 与 PBKDF2 -[是否有安全专家推荐 bcrypt 用于密码存储？](https://security.stackexchange.com/questions/4781/do-any-security-experts-recommend-bcrypt-for-password-storage)

关键是散列函数本身并不能防止预计算攻击（例如彩虹表）。添加盐不会保护您免受字典或暴力攻击。使用 bcrypt 或 PBKDF2 比使用散列算法构建自己的方案要好得多。

# css - 这个数据 css 是什么？

> ID：12108071
> 
> 赞同：0
> 
> 时间：2012-08-24T10:57:43.490
> 
> 标签：css, image, crypt

这是一种向用户隐藏图片路径的方法吗？

```
background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPHJhZGlhbEdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY3g9IjUwJSIgY3k9IjUwJSIgcj0iNzUlIj4KICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNjZGEwZmYiIHN0b3Atb3BhY2l0eT0iMSIvPgogICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjMzcxNDVjIiBzdG9wLW9wYWNpdHk9IjEiLz4KICA8L3JhZGlhbEdyYWRpZW50PgogIDxyZWN0IHg9Ii01MCIgeT0iLTUwIiB3aWR0aD0iMTAxIiBoZWlnaHQ9IjEwMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T10:58:37.040

这是 svg 图像的 base64 编码。还有[另一个 StackOverflow 答案，它稍微详细地解释了它](https://stackoverflow.com/a/3453840/39709)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T10:58:51.103

这实际上是base64中的svg文件。这样您就可以在您的网站中拥有图片或其他文件，而无需实际将它们上传到您的网站空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T11:03:57.340

图像的base64编码。使用图像而不将其放置在任何地方。

以下是为您的图像获取此类代码的方法：[**Base 64 Image Maker**](http://webcodertools.com/imagetobase64converter/Create)

# ios - Apache Cordova 2.0 在加载网页时显示无限输入文本

> ID：12108072
> 
> 赞同：0
> 
> 时间：2012-08-24T10:57:57.843
> 
> 标签：ios, cordova, cordova-2.0.0

我已按照[此指南](http://docs.phonegap.com/en/2.0.0/guide_cordova-webview_ios.md.html#Embedding%20Cordova%20WebView%20on%20iOS)将 Cordova Web 应用程序嵌入到我的 iOs 应用程序中：

```
CDVViewController* viewController = [CDVViewController new];
viewController.wwwFolderName = [NSString stringWithFormat:
                                @"/data/volumes/%@",
                                self.book.code];
viewController.startPage = @"index.html";//@"gallery.html";
viewController.useSplashScreen = NO;
viewController.view.frame = self.view.frame;
[self.view addSubview:viewController.view]; 
```

一切正常，但是当 CDVViewController 加载 html 页面（howto 上建议的测试 index.html）时，应用程序显示无限输入文本框，带有不同的字符串

![在此处输入图像描述](../Images/a2d171ab72ad8c702e1491c866129741.png)

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:18:20.723

问题解决：在Phonegap库中，每个操作系统都有自己的cordova-2.0.0.js，我正在加载Android版本:)

# cocos2d-iphone - 如何向上穿过精灵体

> ID：12108076
> 
> 赞同：0
> 
> 时间：2012-08-24T10:58:13.967
> 
> 标签：cocos2d-iphone, box2d-iphone

如何向上穿过精灵体？我想将 box2d 用于整个身体。当它通过向上方向时，它看起来像跳跃精灵的身体。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:01:34.873

您可能想要施加力或脉冲（这是仅在时间戳中施加的力）。请参阅此链接[http://www.iforce2d.net/b2dtut/jumping](http://www.iforce2d.net/b2dtut/jumping)

# wcf - 使用内存中的对象创建 WCF 数据服务操作

> ID：12108078
> 
> 赞同：0
> 
> 时间：2012-08-24T10:58:22.037
> 
> 标签：wcf, wcf-data-services

我正在尝试使用内存对象图创建 WCF DataService。这意味着后端不是实体框架存储，而是驻留在内存中的一堆对象。

我正在尝试创建一个名为**GetUsersByName**的服务操作，它有一个 name 参数并将匹配的用户作为 IQueryable 集合返回。

我按照文档添加了此操作的访问规则

```
config.SetServiceOperationAccessRule("GetUsersByName", ServiceOperationRights.All); 
```

但是当调用**SetServiceOperationAccessRule**方法时，我在客户端收到异常：

```
System.AggregateException was unhandled. 
```

这是我的控制台应用程序的完整代码

```
 using System;
    using System.ServiceModel;
    using System.ServiceModel.Web;
    using System.ServiceModel.Description;
    using System.Data.Services;
    using System.Data.Services.Common;
    using System.Collections.Generic;
    using System.Runtime.Serialization;
    using System.Collections.ObjectModel;
    using System.Linq;
    using System.Web;
    using System.Net.Http;
    using System.Net;
    using System.IO; 

    namespace WCF_OData
    {

        class Program
        {
            static void Main(string[] args)
            {
                string serviceAddress = "http://localhost:8080";
                Uri[] uriArray = { new Uri(serviceAddress) };
                Type serviceType = typeof(UserDataService);

                using (var host = new DataServiceHost(serviceType, uriArray)) {
                    host.Open();

                    var client = new HttpClient() { BaseAddress = new Uri(serviceAddress) };
                    Console.WriteLine("Client received: {0}", client.GetStringAsync("Users?$format=json").Result);

                    HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://localhost:8080");
                    request.Method = "GET";
                    request.Accept = @"application/json";

                    using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
                    {
                        Console.WriteLine(response.StatusCode);
                        Console.WriteLine(response.ContentType);
                        Console.WriteLine((new StreamReader(response.GetResponseStream())).ReadToEnd());
                    }

                    Console.WriteLine("Press any key to stop service");
                    Console.ReadKey();
                }

            }
        }

        [EnableJsonSupport]
        [ServiceBehavior(IncludeExceptionDetailInFaults = true)]   
        public class UserDataService : DataService<UserService> {
            public static void InitializeService(DataServiceConfiguration config)
            {
                config.SetEntitySetAccessRule("Users", EntitySetRights.All);
                config.SetServiceOperationAccessRule("GetUsersByName", ServiceOperationRights.All);

                config.UseVerboseErrors = true;

                config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V2;
            }

        }

        public class UserService
        {
            private List<User> _List = new List<User>();

            public UserService()
            {
                _List.Add(new User() { ID = 1, UserName = "John Doe" });
                _List.Add(new User() { ID = 2, UserName = "Jane Doe" });
            }

            public IQueryable<User> Users
            {
                get
                {
                    HttpContext x = HttpContext.Current;
                    return _List.AsQueryable<User>();
                }
            }

            [OperationContract]
            [WebGet(UriTemplate="GetUsersByName")]
            public IQueryable<User> GetUsersByName(string name)
            {
                return new List<User>().AsQueryable(); 
            }
        }

        [DataServiceKey("ID")]
        public class User
        {
            public int ID { get; set; } 
            public string UserName { get; set; }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:07:36.183

看起来这里发生了一些事情，所以这可能需要几次迭代才能完成。首先要解决的问题是服务运营。服务操作需要在继承自DataService的类上声明：[“服务操作是添加到DataService派生的数据服务类的方法”](http://msdn.microsoft.com/en-us/library/cc668788.aspx)。这是一个示例：

```
using System.Data.Entity;
using System.Data.Services;
using System.Data.Services.Common;
using System.Linq;
using System.ServiceModel;
using System.ServiceModel.Web;

namespace Scratch.Web
{
    [ServiceBehavior(IncludeExceptionDetailInFaults = true)]
    public class ScratchService : DataService<ScratchEntityFrameworkContext>
    {
        static ScratchService()
        {
            Database.SetInitializer(new ScratchEntityFrameworkContextInitializer());
        }

        public static void InitializeService(DataServiceConfiguration config)
        {
            config.SetEntitySetAccessRule("*", EntitySetRights.All);
            config.SetServiceOperationAccessRule("*", ServiceOperationRights.AllRead);
            config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V3;
            config.UseVerboseErrors = true;
        }

        [WebGet]
        public IQueryable<Product> FuzzySearch(string idStartsWith)
        {
            var context = new ScratchEntityFrameworkContext();
            return context.Products.ToList().Where(p => p.ID.ToString().StartsWith(idStartsWith)).AsQueryable();
        }
    }
} 
```

然后，您应该能够从浏览器调用您的服务操作，其 URL 格式类似于以下内容：`http://localhost:59803/ScratchService.svc/FuzzySearch()?idStartsWith='1'`

我们是否可以先尝试在浏览器中实现此功能，然后查看 AggregateException 是否仍然发生？

# selenium - jenkins 错误 FATAL: Unable to find build script at C:\selenium tests for moveon\moveon4tests1\build.xml

> ID：12108079
> 
> 赞同：4
> 
> 时间：2012-08-24T10:58:25.270
> 
> 标签：selenium, jenkins, build.xml

我正在使用 Jenkins 和 Ant 来运行我的硒测试。当我在本地机器上运行它们时它工作正常。现在我有一个位于不同位置的 Jenkins 服务器，我必须在该服务器上运行我的测试。当我尝试在该服务器上运行测试时它失败了，因为它找不到`build.xml`文件。你能告诉我如何更改主目录路径吗？

```
Started by user :**********
Building in workspace /var/lib/jenkins/jobs/moveon4 java tests/workspace
FATAL: Unable to find build script at C:\selenium tests for move\movetests1\build.xml
Build step 'Invoke Ant' marked build as failure
Finished: FAILURE 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T13:30:37.957

您是否在 Jenkins 作业配置中为执行 Ant 构建的构建步骤使用“Invoke Ant”？如果是这样，构建文件的位置就隐藏在高级部分中——这是 Jenkins 的一个恼人的怪癖。

# jquery - iOS Web 应用程序 GO 键盘按钮不提交 Ajax 表单

> ID：12108083
> 
> 赞同：5
> 
> 时间：2012-08-24T10:58:32.733
> 
> 标签：jquery, ajax, jquery-ui, ios5, iphone-web-app

我有这个 iOS 网络应用程序，它需要通过 Ajax 提交一个表单，这在很大程度上是有效的。唯一不起作用的是键盘上的 GO 按钮没有响应。

在桌面浏览器上，一切正常提交（提交按钮，或输入键）

在 Safari iOS 上，一切正常（提交按钮、GO 键盘按钮）

但是在 iOS 上将其用作 Web App 时，GO 按钮不起作用！

什么可能导致这种行为？据我所知，iOS 网络应用程序仍在使用 Safari ...... :)

```
<form id="myForm" name="form" action="link-to-script.php" method="post">
<table>
    <tr>
        <td><input id="name" name="name" type="text" size="20" maxlength="25" /></td>
    </tr>
    <tr>
        <td><input id="email" name="email" type="text" size="20" maxlength="50" /></td>
    </tr>
    <tr>
        <td><input type="submit" name="Submit" value="Send" /></td>
    </tr>
</table> 
```

```
$('#myForm').submit(function(e) {
    e.preventDefault();  // Doesn't matter
    var dataString = $(this).serialize();
    $.ajax({
        type: "POST",
        url: "http://link-to-script.php?",  // Valid link for the use of this form
        cache: false,
        data: dataString,
        success: function() {

        }
    });
}); 
```

更新（已解决）：我`preventDefault()`再次删除了。它并没有成为我的瓶颈，但我不喜欢不必要的代码。:)

当我`return false;`在底部添加时`$('#myForm').submit(function() {`，一切都像我想要的那样工作。

iOS GO 按钮、Enter 和 Submit 按钮现在都响应了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-02-23T16:56:33.467

我发现在标签中添加 target="_blank" 会破坏 iOS 键盘上的 Go 按钮。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T12:10:15.593

您是否尝试过连接到“完成/输入”按钮：

```
$("#myForm input").live("keyup", function(evt) {
  if (evt.keyCode === 13) {
    $("#myForm").trigger("submit");
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T22:59:32.020

在表单中提供表单操作的完整 URL，或者不要通过 JS 提交。您为同一个表单设置了两个表单操作 - 一个在没有完整 URL 的表单操作中，第二个在您的 Ajax 提交中。

另外，为什么要阻止 JS 的默认表单操作？

# java - 如何在存储过程中将模式名称作为参数传递

> ID：12108085
> 
> 赞同：1
> 
> 时间：2012-08-24T10:58:38.640
> 
> 标签：java, sql, oracle11g

我需要将模式名称作为参数传递给存储过程。但我最终得到错误 ORA00942: `table or view does not exist`。我google了很多，但没有找到任何解决方案。

实际上，在我们的应用程序中，我们正在一个模式中编写存储过程 (SP)，并为所有其他模式引用相同的 SP。

考虑一下我必须在不同的模式（1 个客户的 1 个模式）中找到一个项目的库存。然后

```
select * from abc.stock_table where itemid=xxx; 
```

在此查询中，我想`abc`用不同的模式名称替换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:12:53.300

动态更改已编译的 PLSQL 代码中的方案是不可能的。您应该改用动态 SQL。 [http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/dynamic.htm](http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/dynamic.htm) 但是你必须明白这个选项有副作用——每次你调用动态sql时它都会再次编译。所以它更慢，风险更大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:13:51.877

从不同的模式为您的对象创建公共同义词。授予它的特权。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T11:10:07.560

您需要使用动态 SQL，互联网上有大量资料。例如在[甲骨文网站上](http://docs.oracle.com/cd/B10500_01/appdev.920/a96590/adg09dyn.htm)

```
CREATE OR REPLACE PROCEDURE query_invoice(
       month VARCHAR2, 
       year VARCHAR2) IS
    TYPE cur_typ IS REF CURSOR;
    c cur_typ;
    query_str VARCHAR2(200);
    inv_num NUMBER;
    inv_cust VARCHAR2(20);
    inv_amt NUMBER;
BEGIN
    query_str := 'SELECT num, cust, amt FROM inv_' || month ||'_'|| year 
      || ' WHERE invnum = :id';
    OPEN c FOR query_str USING inv_num;
    LOOP
        FETCH c INTO inv_num, inv_cust, inv_amt;
        EXIT WHEN c%NOTFOUND;
        -- process row here
    END LOOP;
    CLOSE c;
END;
/ 
```

# iphone - 想要在没有 OAuth 身份验证的情况下使用 API

> ID：12108093
> 
> 赞同：0
> 
> 时间：2012-08-24T10:59:00.240
> 
> 标签：iphone, ios, twitter

我想使用[http://api.twitter.com/1/blocks/create.json?screen_name=xxxxxxx](http://api.twitter.com/1/blocks/create.json?screen_name=xxxxxxx) (Twitter API) 在 iOS 5 中使用 Twitter 和帐户框架来阻止特定朋友或关注者访问我的帐户，

那么我应该怎么做才能解决这个问题，因为我只想使用 Twitter 帐户，不想使用 OAuth。

它会生成如下错误：HTTP/1.1 401 API 是安全的。需要安全凭证

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:27:35.357

Twitter API 需要 OAuth 身份验证。但是，如果您对 iOS 5 及更高版本感到满意，您可以使用内置的 Twitter 框架代表您执行 OAuth 计算，这将为您节省大量时间。查看以下文档`TWRequest`：

[http://developer.apple.com/library/ios/#documentation/Twitter/Reference/TwitterFrameworkReference/_index.html](http://developer.apple.com/library/ios/#documentation/Twitter/Reference/TwitterFrameworkReference/_index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:55:03.980

实际上，您需要将发布请求的参数放在正文中。这在请求查询下的 OAuth 工具描述中进行了描述：

如果您已登录，则[此](https://dev.twitter.com/docs/api/1.1/post/statuses/update)工具在每个 REST API 文档页面的右侧都可用

您可以使用 twitter 的 apigee[控制台](https://apigee.com/console/twitter)对其进行测试，但除非您在正文中包含 screen_name 参数，否则您将收到相同的错误

# android - 如何设置/更新我的偏好值（PreferencesAcitivity）？Android

> ID：12108094
> 
> 赞同：2
> 
> 时间：2012-08-24T10:59:03.210
> 
> 标签：android, save, sharedpreferences, android-preferences

我有一个 SettingsActivity ( extends PreferenceActivity ) ，它是从一个preferences.xml 文件(res-->xml-->preferences.xml) 加载的。

首选项.xml 是这样的：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<PreferenceCategory android:title="Patient&apos;s Settings" >
    <EditTextPreference
        android:defaultValue="Not Set"
        android:key="patientMobile"
        android:title="mobile number" />
</PreferenceCategory>
<PreferenceCategory android:title="Doctor&apos;s Settings" >
    <EditTextPreference
        android:defaultValue="Not Set"
        android:key="docEmail"
        android:title="e-mail" />
    <EditTextPreference
        android:defaultValue="Not Set"
        android:key="docMobile"
        android:title="mobile number" />
</PreferenceCategory>
<PreferenceCategory android:title="Application Settings" >
    <SwitchPreference
        android:disableDependentsState="false"
        android:enabled="true"
        android:key="lang"
        android:summaryOff="English"
        android:summaryOn="Greek"
        android:switchTextOff="EN"
        android:switchTextOn="GR" />
</PreferenceCategory> 
```

我如何从另一个活动中设置/更新/覆盖这些值？

我从 web 服务中检索信息，然后我想保存这些值，然后从 SettingsActivity 中看到：

```
1.patientMobile (string)
2.docEmail      (string)
3.docMobile     (string) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T11:05:44.557

[`SharedPreferences`](http://developer.android.com/reference/android/content/SharedPreferences.html)您可以使用和 首选项的键来读取/设置/更新这些值。

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(context);
String patientMobile = preferences.getString("patientMobile");

//or set the values. 
SharedPreferences.Editor editor = preferences.edit();
editor.putString("patientMobile", "yes"); //This is just an example, you could also put boolean, long, int or floats
editor.commit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:15:11.930

当您检索值时，您将它们保存为：

```
SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(YourActivity.this);
Editor editor = sp.edit();
editor.putString("patientMobile", patientMobile);
if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.GINGERBREAD) {
    editor.apply();
} else {
    editor.commit();
} 
```

要读取值，只需调用`sp.getString("patientMobile", defaultValue);`

请参阅[应用（）](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#apply%28%29)。还有[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)文档。

# asp.net - 在 asp.net webforms 中实现多 web 项目结构

> ID：12108096
> 
> 赞同：0
> 
> 时间：2012-08-24T10:59:07.203
> 
> 标签：asp.net, webforms, mef, virtualpathprovider, multiple-projects

我正在一个具有多个业务领域的 Web 应用程序中工作。随着时间的推移，它的大小已成为开发和维护的问题。我想根据具有要共享的公共文件（母版页、资源、Css 等）的主根 Web 项目将 Web 项目分成几个子项目或库，理想情况下我希望有某种注入允许我有选择地发布该“组件”或简单地发布自定义变体，尽管它的配置取决于部署后的数据库设置。

我搜索了整个网络，阅读了与多个项目、依赖注入和复合应用程序相关的所有页面，直到我软化了我的头脑，但找不到任何真正有用的东西。理论方法或单元测试应用程序的主要部分（嗯，你不能制作你想要的应用程序，但你仍然可以对其他东西进行单元测试）其他方法在 VS2010 .Net 4.0 中根本不起作用

有人可以就完整的解决方案或示例向我介绍吗？或者干脆让我们讨论。

我们说该解决方案具有以下结构，其中模块内容已经分为目录：

解决方案

```
 L_ Datalayer library project
      L_ Bussiness logic /common utils library project
      L_ Web project
      L_ Controls
      L_ Images
      L_ Css....
      L_ Warehouse
      L_ Sales
      Masterpages
      ... 
```

Warehouse and Sales 包含与“模块”相关的页面

谢谢，

* * *

我发布了我在该主题上的进展。

根据 Steven 的建议，我使用 MEF 进行了更多实验。由于缺乏文档，特别是对于 web 表单，这是一个痛苦的*。到目前为止，我设法在我的解决方案中实现了 MEF，并成功地插入了一个对主应用程序可见的插件项目。

然后通过具有插件名称、默认页面 url 及其顺序的界面加载可用插件，选择所有这些数据并呈现菜单选项卡。那部分很容易。

单击菜单元素必须重定向到插件的主页，这将为其包含的页面呈现几个菜单（来自另一个导出界面）

我终于在插件项目中嵌入了一个 aspx 页面作为资源。我目前陷入困境的地方。

¿ 有没有办法使用 MEF 将嵌入的页面作为资源嵌入到库中，或者我也被迫使用 VirtualPathProvider？¿ 重定向到该页面的语句具体如何？我尝试了几种方法，但没有一种方法有效（MEF 和 VirtualPathProvider）

我查看了无数关于它的文章，但它们都以控制渲染结束，而不是页面。太令人沮丧了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:09:49.027

虽然这不是您问题的答案，但由于我的建议很长，我将其添加为答案。我建议您研究一下[NopCommerce](http://www.nopcommerce.com)采用的方法，他们使用自己的框架在 .net 上进行了扩展，该框架支持插件和现有解决方案的扩展。虽然我绝对知道 nopcommerce 是一种电子商务解决方案，但是如果您研究它，您可以根据您的业务需求对其进行修改，或者至少它可以让您了解在设计解决方案时应该采用什么。希望能帮助到你。

# wpf - WPF 使用 SurfaceListBox - 突出显示颜色选择

> ID：12108104
> 
> 赞同：0
> 
> 时间：2012-08-24T10:59:31.097
> 
> 标签：wpf, listbox, transparent

我需要帮助来更改 SurfaceListBox 选择的颜色。

现在我使用这个：

```
<Style x:Key="styleSurfaceListBox" TargetType="{x:Type my:SurfaceListBox}">
    <Setter Property="ItemsPanel">
       <Setter.Value>
           <ItemsPanelTemplate>
               <StackPanel Orientation="Horizontal"
               VerticalAlignment="Center"
               HorizontalAlignment="Center"
               Background="Transparent" />                        
           </ItemsPanelTemplate>
        </Setter.Value>
    </Setter>            
</Style> 
```

我需要什么使选择颜色透明？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:46:28.937

感谢 dvvrd！

我创建我的`SurfaceListBoxItem`风格是这样的：

```
 <Style x:Key="item" TargetType="{x:Type my:SurfaceListBoxItem}"  >
        <Style.Triggers>
            <Trigger Property="IsSelected" Value="true">
                <Setter Property="Foreground" Value="Transparent" />
                <Setter Property="Background" Value="Transparent" />
            </Trigger>
            <Trigger Property="IsFocused" Value="true">
                <Setter Property="Foreground" Value="Transparent" />
                <Setter Property="Background" Value="Transparent" />
            </Trigger>

            <Trigger Property="IsEnabled" Value="true">
                <Setter Property="Foreground" Value="Transparent" />
                <Setter Property="Background" Value="Transparent" />
            </Trigger>
            <Trigger Property="IsMouseOver" Value="true">
                <Setter Property="Foreground" Value="Transparent" />
                <Setter Property="Background" Value="Transparent" />
            </Trigger>                
        </Style.Triggers>
    </Style> 
```

然后我指出`ItemContainerStyle`：

```
SurfaceListBox1.ItemContainerStyle = (Style)this.Resources["item"]; //item is the KEY on my style. 
```

再次感谢 dvvrd！

# networking - BitTorrent Mainline DHT 使用的不可靠的 RPC 协议中错误消息的必要性是什么？

> ID：12108107
> 
> 赞同：2
> 
> 时间：2012-08-24T10:59:40.723
> 
> 标签：networking, rpc, bittorrent, dht

[Mainline DHT](http://wikipedia.org/wiki/Mainline_DHT)是 BitTorrent 使用的 DHT，它在 UDP 上实现了一个称为 KRPC 的 RPC 协议。KRPC 包括对[此处列出](http://www.bittorrent.org/beps/bep_0005.html#errors)的错误消息的支持。

为什么这是必要的？由于这是一个不可靠的协议，因此无法保证会收到这些消息，也无法保证它们没有明显的用途。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T19:03:01.813

如果您向节点发送格式错误的消息，该节点返回错误消息可能会有所帮助，以便您可以修复代码，而不是假装未收到消息。

如果每个节点都会响应错误消息，客户端开发人员将更容易修复其 DHT 实现中的错误。

据我所知，只有 libtorrent (rasterbar) 和原始的 BitTorrent Mainline (python 版本) 在 DHT 中发送错误代码。其他客户端可能会这样做，但主要是 uTorrent 不会。

**更新：**

错误代码在[put/get 扩展](http://libtorrent.org/dht_store.html)中被扩展以用于*原子写入*。当更新 DHT 中的插槽时，错误消息可能会通知编写器该插槽在读取-更新-写入之间进行了更新，并且应该重试。这在规范中称为 CAS（以 CPU 操作比较和交换命名）。

uTorrent、libtorrent 和 Bleep 支持此扩展。

# javascript - 原型继承中的奇怪行为

> ID：12108109
> 
> 赞同：2
> 
> 时间：2012-08-24T10:59:51.400
> 
> 标签：javascript, prototype

我对原型继承的概念相对较新，所以也许这就是原型继承应该如何工作，或者这只是 javascript，但看起来原型继承只是好的原始类型。例如我有以下代码：

```
var leg = {
    type: null
};

var Animal = {
  traits: {},
  leg: Object.create(leg)
};

var lion = Object.create(Animal);
lion.traits.legs = 4;
lion.leg.type = 'left';

var bird = Object.create(Animal);
bird.traits.legs = 2;
bird.leg.type = 'right';

alert(lion.traits.legs) // shows 2???
alert(lion.leg.type) // shows right??? 
```

最后两行显示了我的困惑。这真的是原型继承应该如何工作，还是这只是 javascript 实现它的方式？

如果这真的是原型继承应该如何工作，我真的不明白这种类型的继承在大多数情况下会有什么用处。如果我只能拥有原始类型，那么在创建复杂对象方面似乎非常有限，因为在很多情况下我有一个对象存储另一个对象的实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:04:06.437

不要继承非原始*状态*。继承方法。使每个对象都有自己的状态。状态是使对象独一无二的原因，如果您的所有对象共享相同的状态，则没有意义。

```
var Animal = {
    method1: function() {},
    method2: function() {}
};

var lion = Object.create(Animal, {
    traits: {
        value: {}
    },
    leg: {
        value: {
            type: null
        }
    }
});

var bird = Object.create(Animal, {
    traits: {
        value: {}
    },
    leg: {
        value: {
            type: null
        }
    }
}); 
```

顺便说一句，做几乎相同的事情有一个更简洁和更好支持的语法：

```
function Animal(traits, leg) {
    this.traits = traits;
    this.leg = leg;
}

var method = Animal.prototype;

method.method1 = function() {

};

method.method2 = function() {

};

var lion = new Animal({}, {type: null}),
    bird = new Animal({}, {type: null}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:04:48.760

**是**的，这就是它应该如何工作的。属性`traits`和`leg`是在实例之间共享的可变对象。原型继承的想法是您从原型继承所有状态，除非您明确覆盖它。您不会覆盖字段`trait`和`leg`，因此它们与原型共享。

这与从不继承状态的基于类的继承不同，您必须在构造函数中初始化所有状态。

您*可以*拥有复杂的对象，但如果每个实例都需要拥有自己的新对象字段实例，则必须在创建实例后创建它们，就像在构造函数中一样。

原型继承很有用（与基于类的继承相比），因为：

1.  您可以节省大量内存，因为您只为与原型不同的字段分配“槽”。在基于类的对象中，您始终必须为所有字段分配空间，即使它们从未更改过默认值。

2.  继承更改很容易。例如，如果您在 UI 框架中有一个“窗口”原型，并且有很多从该原型继承的具体窗口，您可以更改原型上的颜色，并且它会自动继承到所有没有显式覆盖它的实例。

# vim - 读取文件并将内容存储在寄存器中

> ID：12108112
> 
> 赞同：6
> 
> 时间：2012-08-24T11:00:02.313
> 
> 标签：vim

vim 中有没有办法读取文件，例如 with `:r`，然后将其存储在某个寄存器中？有没有办法做同样的事情，但只能使用文件中与某些模式匹配的行？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-24T11:19:37.367

尝试这个：

```
:let @x = join(readfile("~/.vimrc"), "\n") 
```

它将读取`.vimrc`注册`x`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-24T12:02:41.740

使用外部 grep，您可以执行以下操作：

```
:let @x = system('grep pattern filename') 
```

仅将`pattern`文件`filename`中匹配的行放在 register 中`x`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T11:12:23.030

您可以使用 创建一个新缓冲区`:new`，读取文件`:r <filename>`，使用 拉取整个文件以获得寄存器（例如，x）`gg"xyG"`，然后使用 删除缓冲区`:q!`。如果您打算多次执行此操作，您可以为其创建映射。

`:h :g`要对匹配模式的行执行相同操作，您可以在执行复制到寄存器之前执行全局命令 ( )。

# macos - 在 Mac OS X 中将守护进程使用的可执行文件放在哪里

> ID：12108113
> 
> 赞同：0
> 
> 时间：2012-08-24T11:00:03.563
> 
> 标签：macos, daemon

我正在为 Mac OSX 制作一个守护进程。所以我的守护进程将运行一个可执行文件。你能告诉我放置可执行文件的最佳位置在哪里吗？我希望为每个用户运行它。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:04:50.127

重要的不是你的守护进程，而是它的属性列表（plist）。launchd 将为所有用户枚举和执行 /System/Library/LaunchDaemons 和 /Library/LaunchDaemons 中的守护进程。A la Apple，您应该将后者用于第 3 方 plist。plist 的“程序”键可以指向您的守护程序，它可以在任何地方。但请记住，您确实需要 root 权限才能写入任一文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:22:32.903

您可以在其中创建 HelperTools 文件夹`/Library/Application Support/`并将您的守护程序放置在 HelperTools 文件夹中。

# java - 这个接口定义中的尖括号是什么意思？

> ID：12108118
> 
> 赞同：4
> 
> 时间：2012-08-24T11:00:11.423
> 
> 标签：java, generics, interface

我对 Java 编程比较陌生，我遇到了一个接口和一个实现它的类的声明：

```
public interface Abcd<E extends Comparable<E>>{
......
......
......
}

public class AbcdImpl<E extends Comparable<E>> implements Abcd<E>{
......
......
......
} 
```

你能解释一下`<E extends Comparable<E>>`代表什么，通常是什么意思`<E>`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T11:10:19.413

`E`代表类型，字母不必是 E 可以是任何东西，但通常人们会使用`T`, `K`, `E`,之类的字母`V`。使用以某种方式表示类型用途的字母是有意义的。例如在`Map`interface`Map<K,V>`中，K 代表键，V 代表值。

至于`<E extends Comparable<E>>`它意味着作为泛型类型的类型 E`AbcdImpl`需要自己实现`Comparable`接口（为自己）。所以任何类`E`都必须有一个方法

```
compareTo(E obj) 
```

用于将 的一个实例与`E`的另一个实例进行比较`E`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T11:12:20.903

你看到的是一个泛型类型声明。

见[http://en.wikipedia.org/wiki/Generics_in_Java](http://en.wikipedia.org/wiki/Generics_in_Java)

`Abcd<E>`通常读作“E 的 Abcd”。

例如，List 是一个项目列表，但没有指定项目的种类。List 是一个字符串列表，是泛型 List 的参数化版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T11:36:23.767

我认为你应该看看[课程：泛型](http://docs.oracle.com/javase/tutorial/extra/generics/index.html)
它将帮助你理解泛型集合。

# jquery - jQuery 库与函数冲突

> ID：12108123
> 
> 赞同：0
> 
> 时间：2012-08-24T11:00:20.720
> 
> 标签：jquery

我通过javascript使用动态菜单如下

```
<script type="text/javascript">

ddaccordion.init({`enter code here` //top level headers initialization
    headerclass: "expandable", //Shared CSS class name of headers group that are expandable
    contentclass: "categoryitems", //Shared CSS class name of contents group
    revealtype: "clickgo", //Reveal content when user clicks or onmouseover the header? Valid value: "click", "clickgo", or "mouseover"
    mouseoverdelay: 200, //if revealtype="mouseover", set delay in milliseconds before header expands onMouseover
    collapseprev: true, //Collapse previous content (so only one open at any time)? true/false 
    defaultexpanded: [], //index of content(s) open by default [index1, index2, etc]. [] denotes no content
    onemustopen: false, //Specify whether at least one header should be open always (so never all headers closed)
    animatedefault: false, //Should contents open by default be animated into view?
    persiststate: true, //persist state of opened contents within browser session?
    toggleclass: ["", "openheader"], //Two CSS classes to be applied to the header when it's collapsed and expanded, respectively ["class1", "class2"]
    togglehtml: ["suffix", "<img src='<?php echo $this->baseurl; ?>/images/up.png' class='statusicon' />", "<img src='<?php echo $this->baseurl; ?>/images/down.png' class='statusicon'/>"], //Additional HTML added to the header when it's collapsed and expanded, respectively  ["position", "html1", "html2"] (see docs)
    animatespeed: "fast", //speed of animation: integer in milliseconds (ie: 200), or keywords "fast", "normal", or "slow"
    oninit:function(headers, expandedindices){ //custom code to run when headers have initalized
        //do nothing
    },
    onopenclose:function(header, index, state, isuseractivated){ //custom code to run whenever a header is opened or closed
        //do nothing
    }
})
</script> 
```

使用 ddaccordion.js 库。当我悬停这个主菜单时，我的子菜单通过 javascript 显示在弹出窗口中，如下所示

```
<script type="text/javascript">
jQuery.noConflict();
    var showQV = function(node) {
        node.fadeIn();
    };

    var hideQV = function(node) {
        node.fadeOut();
    };
    $(document).ready(function () {     
        var t1,t2;
        t1 = t2 = null;
        var currentQuickView = null;
        $(".popup_menu").hover(function() {

            clearTimeout(t2);
            var that = this;
            t1 = setTimeout(function() {
                currentQuickView && (currentQuickView.get(0) != $($(that).attr("popUpSelect")).get(0)) && hideQV(currentQuickView);
                currentQuickView = $($(that).attr("popUpSelect"));
                showQV($($(that).attr("popUpSelect")));
            }, 500);
        },
                function() {
                    var that = this;

                    clearTimeout(t1);
                    t2 = setTimeout(function() {
                        hideQV($($(that).attr("popUpSelect")));
                    }, 500);
                });

        $(".popUpView").hover(function() {
            clearTimeout(t2);
            var that = this;
            t1 = setTimeout(function() {
                showQV($(that));
            }, 500);
        },
                function() {
                    var that = this;
                    clearTimeout(t1);
                    t2 = setTimeout(function() {
                        hideQV($(that));
                    }, 500);
                });

        $(".jqVertTabs").click(function() {
            if (!$(this).hasClass("genTabOpen")) {
                var oldSelected = $(".genTabOpen");
                var newSelected = $(this);
                var oldTabId = parseInt(oldSelected.attr("tabId"));
                var newTabId = parseInt(newSelected.attr("tabId"));
                oldSelected.removeClass("genTabOpen").addClass("genTabClose");
                $(oldSelected.children()[0]).removeClass("tbOpen").addClass("tbClose");
                $(this).removeClass("genTabClose").addClass("genTabOpen");
                var child = $(this).children()[0];
                $(child).removeClass("tbClose").addClass("tbOpen");
                $(".arrowList", oldSelected.parent()).slideUp();
                $(".arrowList", newSelected.parent()).slideDown();

            }
        });
    });
</script> 
```

使用 main-menu.js。它在 Firefox 和 IE 中完美运行。但是 chrome 中的冲突。因此，任何已知的解决方案都可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:12:25.423

不要打电话`jQuery.noConflict()`。`$`它作为 jQuery 的快捷方式被移除。你不需要 -`$`与其他任何东西都不冲突。首先加载 jQuery，然后是 ddaccordion，然后是您的自定义 jQuery 代码。

# java - 获取 Java ProgressMonitor 的取消事件

> ID：12108127
> 
> 赞同：5
> 
> 时间：2012-08-24T11:00:39.593
> 
> 标签：java, multithreading, swing, swingworker, progressmonitor

我有一个 ProgressMonitor`pm`和一个 SwingWorker `sw`。`cancel`当我按下-button on时，我想取消 SwingWorker `pm`。我想这应该不会太难，我阅读了一些关于 SwingWorker 和 ProgressMonitor 的教程，但我无法让它工作。

```
final ProgressMonitor pm = new ProgressMonitor(frame, "checking", "...", 0, 100);
final SwingWorker sw = new SwingWorker()
{
    protected Object doInBackground() throws Exception 
    {
        doSomethingAndUpdateProgress();
    }
};

sw.addPropertyChangeListener(new PropertyChangeListener()
{
    public void propertyChange(PropertyChangeEvent evt)
    {
        if(evt.getPropertyName().equals("progress"))
        {
            updateProgress();
        }
        if(pm.isCanceled())
        {
            cancelAction();
        }
        if(pm.isDone())
        {
            doneAction();
        }
    }
});

sw.execute(); 
```

进度更新工作得很好，但`pm.isCanceled()`从来没有`true`。我想我需要 ProgressMonitor 的 propertyChangeListener，但我不知道如何在其中添加一个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T11:06:56.637

> 我阅读了一些关于 SwingWorker 和 ProgressMonitor 的教程，但我无法让它工作。

取消总是调用一个 InteruptedExeption，

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.util.ArrayList;

public class SwingWorkerExample extends JFrame implements ActionListener {

    private static final long serialVersionUID = 1L;
    private final JButton startButton, stopButton;
    private JScrollPane scrollPane = new JScrollPane();
    private JList listBox = null;
    private DefaultListModel listModel = new DefaultListModel();
    private final JProgressBar progressBar;
    private mySwingWorker swingWorker;

    public SwingWorkerExample() {
        super("SwingWorkerExample");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        getContentPane().setLayout(new GridLayout(2, 2));
        startButton = makeButton("Start");
        stopButton = makeButton("Stop");
        stopButton.setEnabled(false);
        progressBar = makeProgressBar(0, 99);
        listBox = new JList(listModel);
        scrollPane.setViewportView(listBox);
        getContentPane().add(scrollPane);
        //Display the window.
        pack();
        setVisible(true);
    }
//Class SwingWorker<T,V> T - the result type returned by this SwingWorker's doInBackground
//and get methods V - the type used for carrying out intermediate results by this SwingWorker's
//publish and process methods

    private class mySwingWorker extends javax.swing.SwingWorker<ArrayList<Integer>, Integer> {
//The first template argument, in this case, ArrayList<Integer>, is what s returned by doInBackground(),
//and by get(). The second template argument, in this case, Integer, is what is published with the
//publish method. It is also the data type which is stored by the java.util.List that is the parameter
//for the process method, which recieves the information published by the publish method.

        @Override
        protected ArrayList<Integer> doInBackground() {
//Returns items of the type given as the first template argument to the SwingWorker class.
            if (javax.swing.SwingUtilities.isEventDispatchThread()) {
                System.out.println("javax.swing.SwingUtilities.isEventDispatchThread() returned true.");
            }
            Integer tmpValue = new Integer(1);
            ArrayList<Integer> list = new ArrayList<Integer>();
            for (int i = 0; i < 100; i++) {
                for (int j = 0; j < 100; j++) { //find every 100th prime, just to make it slower
                    tmpValue = FindNextPrime(tmpValue.intValue());
//isCancelled() returns true if the cancel() method is invoked on this class. That is the proper way
//to stop this thread. See the actionPerformed method.
                    if (isCancelled()) {
                        System.out.println("SwingWorker - isCancelled");
                        return list;
                    }
                }
//Successive calls to publish are coalesced into a java.util.List, which is what is received by process,
//which in this case, isused to update the JProgressBar. Thus, the values passed to publish range from
//1 to 100.
                publish(new Integer(i));
                list.add(tmpValue);
            }
            return list;
        }//Note, always use java.util.List here, or it will use the wrong list.

        @Override
        protected void process(java.util.List<Integer> progressList) {
//This method is processing a java.util.List of items given as successive arguments to the publish method.
//Note that these calls are coalesced into a java.util.List. This list holds items of the type given as the
//second template parameter type to SwingWorker. Note that the get method below has nothing to do with the
//SwingWorker get method; it is the List's get method. This would be a good place to update a progress bar.
            if (!javax.swing.SwingUtilities.isEventDispatchThread()) {
                System.out.println("javax.swing.SwingUtilities.isEventDispatchThread() + returned false.");
            }
            Integer percentComplete = progressList.get(progressList.size() - 1);
            progressBar.setValue(percentComplete.intValue());
        }

        @Override
        protected void done() {
            System.out.println("doInBackground is complete");
            if (!javax.swing.SwingUtilities.isEventDispatchThread()) {
                System.out.println("javax.swing.SwingUtilities.isEventDispatchThread() + returned false.");
            }
            try {
//Here, the SwingWorker's get method returns an item of the same type as specified as the first type parameter
//given to the SwingWorker class.
                ArrayList<Integer> results = get();
                for (Integer i : results) {
                    listModel.addElement(i.toString());
                }
            } catch (Exception e) {
                System.out.println("Caught an exception: " + e);
            }
            startButton();
        }

        boolean IsPrime(int num) { //Checks whether a number is prime
            int i;
            for (i = 2; i <= num / 2; i++) {
                if (num % i == 0) {
                    return false;
                }
            }
            return true;
        }

        protected Integer FindNextPrime(int num) { //Returns next prime number from passed arg.
            do {
                if (num % 2 == 0) {
                    num++;
                } else {
                    num += 2;
                }
            } while (!IsPrime(num));
            return new Integer(num);
        }
    }

    private class TaskListener implements PropertyChangeListener {

        private String name;

        TaskListener(String name) {
            this.name = name;
        }

        @Override
        public void propertyChange(PropertyChangeEvent e) {
            System.out.println(name + ": "
                    + e.getOldValue() + " -> " + e.getNewValue());
        }
    }

    private JButton makeButton(String caption) {
        JButton b = new JButton(caption);
        b.setActionCommand(caption);
        b.addActionListener(this);
        getContentPane().add(b);
        return b;
    }

    private JProgressBar makeProgressBar(int min, int max) {
        JProgressBar progressBar1 = new JProgressBar();
        progressBar1.setMinimum(min);
        progressBar1.setMaximum(max);
        progressBar1.setStringPainted(true);
        progressBar1.setBorderPainted(true);
        getContentPane().add(progressBar1);
        return progressBar1;
    }

    private void startButton() {
        startButton.setEnabled(true);
        stopButton.setEnabled(false);
        System.out.println("SwingWorker - Done");
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        if ("Start" == null ? e.getActionCommand() == null : "Start".equals(e.getActionCommand())) {
            startButton.setEnabled(false);
            stopButton.setEnabled(true);
// Note that it creates a new instance of the SwingWorker-derived class. Never reuse an old one.
            (swingWorker = new mySwingWorker()).execute(); // new instance
            swingWorker.addPropertyChangeListener(new TaskListener("Task"));

        } else if ("Stop" == null ? e.getActionCommand() == null : "Stop".equals(e.getActionCommand())) {
            startButton.setEnabled(true);
            stopButton.setEnabled(false);
            swingWorker.cancel(true); // causes isCancelled to return true in doInBackground
            swingWorker = null;
        }
    }

    public static void main(String[] args) {
// Notice that it kicks it off on the event-dispatching thread, not the main thread.
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                SwingWorkerExample swingWorkerExample = new SwingWorkerExample();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T14:34:58.103

在执行长时间运行的任务期间，您希望定期检查是否`ProgressMonitor`已取消。您的工作是检查是否有必要取消任务 - 否则谁知道您可能会挂起哪些资源。

所以基本上，你想改变你的`doSomethingAndUpdateProgress()`方法，以便它也检查是否`ProgressMonitor`被取消。

这是一个演示，展示了它是如何工作的：

```
import java.awt.*;
import javax.swing.*;

public class TempProject extends Box{

    public TempProject(){
        super(BoxLayout.Y_AXIS);
        final ProgressMonitor pm = new ProgressMonitor(this, "checking", "...", 0, 100);
        final SwingWorker sw = new SwingWorker<Integer, Integer>()
        {
            protected Integer doInBackground() throws Exception 
            {
                int i = 0;
                //While still doing work and progress  monitor wasn't canceled
                 while (i++ < 100 && !pm.isCanceled()) {
                     System.out.println(i);
                     publish(i);
                     Thread.sleep(100);
                 }
                 return null;
            }

             @Override
             protected void process(java.util.List<Integer> chunks) {
                 for (int number : chunks) {
                     pm.setProgress(number);
                 }
             }

        };

        sw.execute();
    }

    public static void main(String args[])
    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
                frame.setContentPane(new TempProject());    
                frame.pack();
                frame.setVisible(true);
            }
        });
    }   

} 
```

# android - BroadcastReceiver 用于何时删除发送的 SMS 消息？

> ID：12108128
> 
> 赞同：1
> 
> 时间：2012-08-24T11:00:49.373
> 
> 标签：android, broadcastreceiver, android-contentprovider

当用户删除手机已发送短信文件夹中的所有内容时，是否有广播事件？当用户清除她的发送框时，我需要能够触发一个动作。

如果不是整个发送框，至少是单独的消息——也就是说，当这个特定的发送消息被删除时做一些事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T03:43:33.350

我不得不在我的应用程序中更改解决此问题的方法，并且不再需要侦听器来检测何时删除 SMS 消息，但这可能有助于：

1.  创建一个`ContentObserver`监听`Uri` `content:\\sms`.
2.  `ContentObserver`从执行时开始做某事`onChange()`。例如，您可能想要遍历收件箱中的所有邮件（通过`Cursor`）并检查哪些邮件丢失。当然，这需要您对先前检查中存在的消息进行存档。

# gwt - 如何为 RPC 使用相同的 servlet 并在 GWT 中上传文件。

> ID：12108129
> 
> 赞同：2
> 
> 时间：2012-08-24T11:00:49.817
> 
> 标签：gwt, servlets, gwt-rpc, gwt2, formpanel

我创建了一个必须使用 fileUpload 的 Web 应用程序。

我必须将文件及其属性发送到服务器。对于发送文件，我使用了 FormPanel，对于属性，我使用了 RPC。

```
public void onModuleLoad() {
    final FileServiceEndPoint serviceEndPoint = new FileServiceEndPoint();
    new AddDocument();
    Button b = new Button("addDocument");
    b.addClickHandler(new ClickHandler() {
        private Map<String, String> docProperty;
        public void onClick(ClickEvent event) {
            docProperty =getProperties();
            AsyncCallback<String> callback = new AsyncCallback<String>() {
                public void onSuccess(String result) {
                    System.out.println("he ha" +result);
                }
                public void onFailure(Throwable caught) {

                }
            };
            serviceEndPoint.uploadAttachement(docProperty, callback);
        }
    });
    RootPanel.get().add(b);
} 
```

这个新的 AddDocument(); 包含上传文件的代码（formPanel 代码）

```
private FormPanel getFormPanel() {
        if (uploadForm == null) {
            uploadForm = new FormPanel();
            uploadForm.setAction(GWT.getHostPageBaseURL() +"TestUploadFileServlet");
            uploadForm.setEncoding(FormPanel.ENCODING_MULTIPART);
            uploadForm.setMethod(FormPanel.METHOD_POST);
            uploadForm.setWidget(getFileUpload());

            System.out.println(GWT.getHostPageBaseURL() +"TestUploadFileServlet");

            uploadForm.addFormHandler(new FormHandler() {

                public void onSubmitComplete(FormSubmitCompleteEvent event) {
                    AddDocument.this.hide(true);        
                }

                public void onSubmit(FormSubmitEvent event) {
                }
            });

        }
        return uploadForm;
    }

private Button getAddButton() {
        if (addButton == null) {
            addButton = new Button("ADD");
            addButton.addClickHandler(new ClickHandler() {
                public void onClick(ClickEvent event) {
                    uploadForm.submit();
                }
            });
            addButton.setText("Add");

        } 
```

为 Sending 属性创建接口。

***端点：***

```
public class FileServiceEndPoint implements FileServiceAsync{

FileServiceAsync service = (FileServiceAsync)GWT.create(FileService.class);
ServiceDefTarget endpoint = (ServiceDefTarget) service;

public FileServiceEndPoint() {
endpoint.setServiceEntryPoint(GWT.getHostPageBaseURL() + “TestUploadFileServlet”);
}

public void uploadAttachement(Map docProperty,
AsyncCallback callback) {
service.uploadAttachement(docProperty, callback);
}
} 
```

**在服务器上：**

```
public class FileUploadImpl extends RemoteServiceServlet implements FileService {

private static final long serialVersionUID = 1L;
private static final Logger log = Logger.getLogger(FileUploadImpl.class
.getName());

String a;
protected void service(final HttpServletRequest request,HttpServletResponse response)
throws ServletException,IOException {

a=”5″;
System.out.println(“ServletWorking Fine “);
}
public String uploadAttachement(Map docProperty) {
// TODO Auto-generated method stub
return “Checked”;
}
} 
```

**当我调试 formPanel.submit 时：调试器进入服务器并打印 ServletWorking Fine（*这是完美的*）**

**当我调试 addProperties 按钮时，它会转到服务器并打印 ServletWorking Fine。但它不应该进入服务方法。调试器应该进入 UploadAttachement。**

请告诉如何使用相同的 servlet 传递 hashMap。

# java - 检查 ID 是否包含在 JPA 的列表中

> ID：12108139
> 
> 赞同：3
> 
> 时间：2012-08-24T11:01:18.293
> 
> 标签：java, sql, jpa, named-query

我有一个包含其他实体列表的实体。例如，它可以是具有地址实体列表的 Person。这些地址并不特定于一个人。（它实际上是与数据库中间的连接表的多对多关系）

我正在搜索以尝试找到所有**没有**ID X 的地址的人

（由于示例的琐碎性，这可能没有意义。在我的现实世界中它确实如此:)）

通过命名查询是：

```
SELECT p FROM Person p left join fetch p.addresses a WHERE p.addresses IS EMPTY OR a.id != :addressId 
```

addressId 是我传入的地址的id

我的问题最好用一个例子来解释

*   人 1 可能有地址 1 和地址 2
*   人 2 可能有地址 2
*   人 3 可能有地址 3

现在想要的结果

*   如果我传入地址 1，那么我希望 person2 和 person 3 返回
*   如果我传入地址 3，那么我希望 person1 和 person 2 返回
*   如果我传入地址 2，那么我希望人 3 返回

目前，当我传入地址 1 时，我得到了所有三个。我认为这是因为人 1 也有地址 2，这意味着它通过了查询。

有谁知道我如何在列表中搜索一个 id，如果它存在于任何元素中，那么不返回它？

希望这是有道理的。如果没有，我可以尝试提供更多详细信息

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T13:20:40.600

你可以只使用这个查询：

```
select p from Person p where not exists 
(select a from Person pe left join pe.addresses a where p = pe and a.id = ?1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:17:39.113

我想我已经找到了一种方法，方法是使用 ID 检索实际实体。然后我可以使用 NOT MEMBER OF

例如，而不是这个

```
SELECT p FROM Person p left join fetch p.addresses a WHERE p.addresses IS EMPTY OR a.id != :addressId 
```

我愿意

```
entityManager.find(Address.class, addressId);
SELECT p FROM Person p WHERE :address NOT MEMBER OF p.addresses 
```

我必须对 entityManger.find 进行额外调用，但我不必在 JPQL 中明确地进行连接。我不确定这是否因为这个额外的调用而效率低下。尽管方法略有不同，但它确实解决了问题。

我仍然有兴趣看看它是否可以仅使用 id 来完成......

# javascript - 计算元素占用的可用高度？

> ID：12108144
> 
> 赞同：0
> 
> 时间：2012-08-24T11:01:43.290
> 
> 标签：javascript, jquery

我在一个页面上有以下三个 iframe。红色 Iframe 包含 3 个主要元素，其中可滚动 div 是动态加载的。

我想在加载到一定数量时设置可滚动 div 的高度，以便它不会将按钮推出用户视图。

我必须考虑 jQuery 选项卡高度和按钮高度以及窗口/Iframe 高度然后执行`scrollableDivHeight = (windowHeight-jqueryTabsHeight-buttonsHeight).`

![在此处输入图像描述](../Images/779345275558392193e483ae53718ccb.png)

我知道这对某些人来说可能是微不足道的，但我刚刚开始使用 java-script，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:06:58.783

检测浏览器窗口的可用高度可能很棘手（即取决于浏览器）。看看这个教程： http: [//www.howtocreate.co.uk/tutorials/javascript/browserwindow](http://www.howtocreate.co.uk/tutorials/javascript/browserwindow)。您可能还需要为按钮和选项卡设置固定高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:40:46.427

试试下面的代码..

```
<script type="text/javascript" >
    $(window).load(function(){ // Window load .. to ensure that images are loaded from header and footer part, then the body part is resized
            var winW = 630, winH = 460;
                if (document.body && document.body.offsetWidth) { 
                 //Internet Explorer (backward-compatibility mode):
                 winW = document.body.offsetWidth;
                 winH = document.body.offsetHeight;
                }
                if (document.compatMode=='CSS1Compat' &&
                    document.documentElement &&
                    document.documentElement.offsetWidth ) {
                //Internet Explorer (standards mode, document.compatMode=='CSS1Compat'):
                 winW = document.documentElement.offsetWidth;
                 winH = document.documentElement.offsetHeight;
                }
                if (window.innerWidth && window.innerHeight) {
                 // most other browsers – as well as IE9 (standards mode):
                 winW = window.innerWidth;
                 winH = window.innerHeight;
                }

            var headerHeight = $("#head").outerHeight(true); // include margin  
            var footerHeight = $("#foot").outerHeight(true); // include margin
            var extraBitForIe8 = 0; 
            if($.browser.msie && $.browser.version==8)
                extraBitForIe8= 4; // For ie 8, to avoid scroll bar
            var bodyHeight = winH - headerHeight - footerHeight - extraBitForIe8 
            $("#body").height(bodyHeight);
        })        
    </script>

    </head>
    <body  >
        <div id="head" style="background:red; margin:10px; padding:10px; color: white" >Header content goes here <br> Header content goes here <br> Header content goes here</div>
        <div id="body" style="background:black; color:white; margin:0 10px; padding:0 10px;"  >Body content goes here <br>Body content goes here  <br> Body content goes here </div>
        <div id="foot"  style="background:yellow; margin:10px; padding:10px;" >Footer content goes here <br> Footer content goes here <br> Footer content goes here</div> 
    </body> 
```

# ruby-on-rails - 从链接名称 Rails 将值传递给控制器

> ID：12108145
> 
> 赞同：0
> 
> 时间：2012-08-24T11:01:47.553
> 
> 标签：ruby-on-rails

我有一个名称列表，其中包含：

```
<td><%= product.date %></td> 
```

它在我的索引页中。（这是我的应用程序列表）

我想为其分配一个自定义链接，并将该值传递给控制器​​：我试过这个：

```
<td><%= link_to product.date, {:controller => "product", :action => "sort_by_date", <how do I pass the 'product.date' string?>  }%></td> 
```

我阅读了 rails 路线指南，但找不到帮助

谢谢

什么耙路线返回：

```
 products GET    /products(.:format)          products#index
                 POST   /products(.:format)          products#create
 new_product GET    /products/new(.:format)      products#new
edit_product GET    /products/:id/edit(.:format) products#edit
     product GET    /products/:id(.:format)      products#show
                 PUT    /products/:id(.:format)      products#update
                 DELETE /products/:id(.:format)      products#destroy
            root        /    

                        products#home.html 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T11:08:25.190

像下面这样使用

```
<%= link_to product.date, {:controller => "product", :action => "sort_by_date", :product_date => product.date %> 
```

在你的控制器中你应该得到日期`params[:product_date]`

您还可以使用资源辅助函数来传递自定义参数，如下所示。

```
<%= link_to product.date, products_path(:product_date => product.date) 
```

此方法将路由到`ProductsController#index`带有`params[:product_date]`

* * *

**编辑：**

我刚刚尝试了以下

```
resources :products do
 collection do
    get 'sort_by_date' => 'products#sort_by_date'
 end
end 
```

耙子路线如下

```
sort_by_date_products GET    /products/sort_by_date(.:format)   products#sort_by_date 
```

要生成 URL，最好使用如下的资源辅助函数

```
sort_by_date_products_path(:product_date => '1/1/2012') 
```

这将生成一个类似的 url `/product/sort_by_date?product_date=1/1/2012`，它将调用的`sort_by_date`方法`ProductsController`并且也`params[:product_date]`可用。

让我们检查它是否工作......

# c# - 使用 Timers 频繁创建单个超时

> ID：12108149
> 
> 赞同：4
> 
> 时间：2012-08-24T11:02:00.907
> 
> 标签：c#, timer

我正在处理设置为在经过一段时间后发生的超时，之后我想得到一个回调。现在我正在使用一个`Timer`在被触发时自行处理的方法来执行此操作。

```
public class Timeouter
{
    public void CreateTimeout(int timeout, Action onTimeout)
    {
        Timer t = null;
        t = new Timer(_ =>
            {
                onTimeout();
                t.Dispose();
            }, new object(), timeout, Timeout.Infinite);    
    }
} 
```

我有点担心这个计时器的资源使用，因为它可能会被非常频繁地调用，因此会设置很多计时器来触发一次并自行处理。考虑到计时器是一个`IDisposable`，它会向我表明它确实使用某种昂贵的资源来完成它的任务。

*   我是否过于担心 的资源使用情况`Timer`，或者解决方案是否可以？
*   我还有其他选择吗？最好有一个计时器并根据需要调整它的频率来启动和停止它以适应其中的几个超时？任何其他可能更轻量级的选项可以在给定的时间段后执行*一次任务？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:08:46.127

创建一个可以计时*多个*间隔的廉价计时器在直观上很简单。你只需要**一个**计时器。将其设置为最接近的到期时间。当它滴答作响时，为每个到期的计时器触发回调或事件。然后重复一遍，再次查看下一个到期时间的活动计时器列表。如果计时器更改其间隔，则只需再次重复搜索。

回调中可能会发生一些潜在的昂贵的事情。处理这个问题的最佳方法是在线程池线程上运行该代码。

这是对系统资源的非常节俭的使用，只有一个计时器和最便宜的线程。每当计时器的状态发生变化时，您都会为此付出一点开销，查看活动计时器列表的复杂度为 O(n)，您可以使用 SortedList 使其大部分时间为 O(log(n))。但是哦是很小的。

您可以轻松地自己编写该代码。

但是您不必这样做， System.Timers.Timer**已经以这种方式工作**。不要帮忙。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:44:14.120

.Net 有 2 或 3 个昂贵的计时器类。但是`System.Threading.Timer`，您使用的课​​程非常便宜。此类不使用内核资源或让线程休眠等待超时。相反，它对所有 Timer 实例仅使用一个线程，因此您可以轻松拥有数千个计时器，并且仍然获得很小的处理器和内存占用。您必须调用`Dispose`只是因为您必须通知系统停止跟踪某些计时器实例，但这并不意味着这是一个昂贵的类/任务。一旦达到超时，此类将安排回调由`ThreadPool`线程执行，因此它不会启动新线程或类似的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T11:26:15.753

虽然它不是答案，但由于篇幅原因，我将其添加为答案。

在服务器/客户端环境中，AFAIK 在服务器上使用 Timers 并不是最好的方法，如果你有胖客户端甚至瘦客户端，你应该在客户端设计一些轮询机制，如果它希望在服务器上执行某个操作本身（由于客户端在设置计时器后可能会断开连接，然后重新实例化并再次设置计时器，以此类推，导致您的服务器在将来的某个时间不可用（潜在的 DOS 攻击）），

或者考虑使用单个计时器策略来处理所有客户端，该策略实现滑动到期或客户端特定策略来处理它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T11:26:48.753

另一种选择是维护将超时的事物的排序列表，将它们添加到列表中，使用它们的到期时间而不是它们的持续时间，保持列表按到期时间排序，然后在它到期时从列表中弹出第一个项目.

您当然需要在辅助线程上执行大部分操作并调用您的回调。您实际上也不需要保持线程旋转，您可以在 add 方法上设置一个等待句柄，并将超时设置为（略小于）直到下一次超时到期的持续时间。有关超时等待的更多信息，请参见[此处。](http://msdn.microsoft.com/en-us/library/cc190477.aspx)

我不知道这是否比创建大量计时器更好。

# asp.net-mvc-3 - Telerik 网格验证 ORM 和视图模型类

> ID：12108150
> 
> 赞同：0
> 
> 时间：2012-08-24T11:02:09.747
> 
> 标签：asp.net-mvc-3, validation, telerik, telerik-grid, telerik-mvc

我在 Telerik 网格中获得验证时遇到问题。我已经构建了视图模型并在其中放置了数据注释，但我不能使用它们。使用 Telerik 网格，我只能使用 ORM 类来选择数据。

如何通过 ORM 类中的视图模型类传递数据，以便进行验证？

我使用 Telerik ORM。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:16:02.767

我解决了。我发布我的解决方案以防其他人遇到相同或类似的问题

```
public ActionResult Index()
    {//getting data from database
        var narucitelji= _repository.GetNarucitelji() ;
        Liste liste=new Liste();     //put data from ORM class to ViewModel
        foreach (var item in narucitelji)
        {
            Narucitelj_mod nar=new Narucitelj_mod();
            nar.ID_narucitelja=item.ID_narucitelja;
            nar.Ime_narucitelja=item.Ime_narucitelja;
            nar.Prezime_narucitelja=item.Prezime_narucitelja;
            nar.Adresa_narucitelja=item.Adresa_narucitelja;
            liste.NarList.Add(nar);
        }
   //return list 
        return View(liste.NarList);
    } 
```

在 foreach 循环中，我将数据从 ORM 类获取到 ViewModel 类。Liste 是一个类，其中我有一个列表，我将 ViewModel 中的数据 I 放入其中。最后，您将列表发送到视图。确保将列表和视图引用到您的 ViewModel

# c# - 自动完成订单

> ID：12108154
> 
> 赞同：4
> 
> 时间：2012-08-24T11:02:27.957
> 
> 标签：c#, linq, autocomplete

假设我们有一个`Human`s 的集合：

```
public class Human
{
    public string FirstName { get; set; }
    public string SecondName { get; set; }
    public string CompanyName { get; set; }
}

var people = new List<Human>(){...}; 
```

我们如何在先按时`FirstName`再按时对人`SecondName`进行排序时实现自动完成`CompanyName`？

我试过：

```
people.Where(x => x.FirstName.StartsWith(term) || x.SecondName.StartsWith(term) 
  ||  x.CompanyName.StartsWith(term))
  .OrderBy(x => x.FirstName).ThenBy(x => x.SecondName).ThenBy(x => x.CompanyName) 
```

但这不能正常工作。我想`FirstName`首先只查看所有匹配的字段，然后只查看`SecondName`字段等等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T11:16:51.390

```
people.Where(x => x.FirstName.StartsWith(term)).OrderBy(x => x.FirstName)
.Concat(people.Where(x => x.SecondName.StartsWith(term)).OrderBy(x => x.SecondName))
.Concat(people.Where(x => x.CompanyName.StartsWith(term)).OrderBy(x => x.CompanyName)) 
```

添加`.Distinct()`到最后取决于您是否要排除一个人以多种方式匹配的情况（在这种情况下，您也可以使用`.Union()`而不是`.Concat()`取决于您的来源 - 它被记录为保留可枚举来源的顺序，但不是与其他可查询的来源，因此它可能会根据 ) 的来源弄乱排序`people`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T11:13:03.650

我想你会想要

```
people.Where(x => x.FirstName.StartsWith(term) ||
                  x.SecondName.StartsWith(term) ||
                  x.CompanyName.StartsWith(term))
    .OrderByDescending(x => x.FirstName.StartsWith(term))
    .ThenByDescending(x => x.SecondName.StartsWith(term))
    .ThenBy(x => x.FirstName)
    .ThenBy(x => x.SecondName)
    .ThenBy(x => x.CompanyName) 
```

这使

*   名字第一个匹配的每个人
*   然后每个名字匹配的人
*   （然后，每个人的公司名称都匹配）
*   在此顺序中，它将像以前一样按名字/姓氏/公司名称排序。

`Descending`是/否需要`false`小于`true`.

您可以通过使用带有 person 和三个 bool 等的匿名类来稍微优化这一点，`Select`然后在 and ordering 子句中使用这些 bool ，从而避免调用5 次而不是 3 次，但是当您有基本排序工作。`FirstNameMatches``SecondNameMatches``Where``StartsWith`

如果您想按第二名对第二名匹配进行排序，而按公司名称对公司名匹配进行排序，则会更加棘手。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T11:33:52.947

你正在做的错误是你使用`ThenBy()`after `OrderBy()`。使用它，您在内部重新排序已排序的列表，而不是按属性是否匹配进行排序。

您应该做的是以三种方式过滤列表，然后加入它们并使用`Union()`.

那么呢：

```
people.Where( x => x.FirstName.StartsWith( term ) ).OrderBy( x => x.FirstName )
      .Union( people.Where( x => x.SecondName.StartsWith( term ) ).OrderBy( x => x.SecondName ) )
      .Union( people.Where( x => x.CompanyName.StartsWith( term ) ).OrderBy( x => x.CompanyName ) ); 
```

* * *

**编辑 ：**

*正如Jon Hanna*指出的那样，如果您使用它，这将无法工作，`Queryable.Union()`因为它不会保留查询的顺序：

> Enumerable.Union() 被指定为保留顺序，但 Queryable.Union() 不是。一个给定的实现可以，但它不是必须的，而另一个（或对同一实现的更新）可能不会。因此，如果 people 不是内存中的源，那么给出的代码可以以任何顺序给出结果。乔恩·汉纳

# android - 如何将图像从页面卷曲显示到另一个视图？

> ID：12108155
> 
> 赞同：0
> 
> 时间：2012-08-24T11:02:29.317
> 
> 标签：android, curl, opengl-es, android-widget, android-view

我正在使用 Harism Page Curl(Open GL) [https://github.com/harism/android_page_curl](https://github.com/harism/android_page_curl)。它现在工作正常。在这里，我想通过单击将页面卷曲上的图像显示到另一个视图。你能帮我吗，如果可能的话..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:04:55.860

您在点击事件上检查[了](https://stackoverflow.com/questions/10779862/how-can-i-show-page-curl-animation-on-click-of-the-button-in-android)页面卷曲吗？这对我也有帮助。

# c - 将整数分配/转换为指针

> ID：12108160
> 
> 赞同：-5
> 
> 时间：2012-08-24T11:02:39.363
> 
> 标签：c, pointers

```
#include<stdio.h>

#define int int*

main(){
    int *p,q;
    p=(int *)5;
    q=10;
    printf("%d",q+p);
} 
```

我的问题是，在 line`p=(int *)5`中，`q=10`它是如何在内部工作的，因为`p`并且`q`都是指针类型，我们怎么可能为指针变量分配一个整数值`q`？还有一件事这种类型的铸造如何`p=(int*)5`在这里工作？

通过使用这个公式，我们可以回答

新地址=旧地址+数字*指针指向的数据类型的大小

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:20:48.770

`#define int int*`将替换`int *p, q`为`int* *p, q`. 所以Here是指向并且是类型`p`的双指针。`int``q``int`

例如，在 char 中考虑以下相同逻辑的程序

```
#include<stdio.h>  
#define char char*  
main()
{     
    char *p,q;     
    printf("%d, %d\n", sizeof(p), sizeof(q));
} 
```

输出是

```
4, 1 
```

`p=(int *)5;`- 该语句也将被`p=(int* *)5;`前辈替换。所以它没有发出任何警告。

所以现在`printf("%d",q+p);`将为您`45`提供 32 位机器或`85`64 位机器的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:11:20.257

指针实际上是计算机中的所有数据，无论其逻辑含义如何，都以数字的形式物理实现。

在指针的情况下，数字通常是虚拟地址；因此，当您手动为指针赋值时，您正在设置一个虚拟地址。

碰巧的是，虚拟地址的范围通常从 0 到 CPU 的地址总线宽度，因此您可以摆脱它-当然，除非该地址尚未分配并且访问它会导致异常。

然而，有时（通常是没有虚拟内存的嵌入式系统）地址是物理的，而不是虚拟的，并且一些硬件设备（时钟、寄存器等）具有已知的物理地址，这些地址被手动分配给指针，然后指针被读取/写入.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T11:19:41.780

> p=(int *)5;

变量 p 指向地址 00000005。如果试图改变这个地址的值，可能会导致其他数据的损坏和不可预知的程序运行时间。例如

```
**p=10 
```

导致异常

**未处理的异常：访问冲突写入位置 0x00000005。**

在下一个操作之前尝试**printf("%p",p)**以查看指针 p 的初始地址。

> printf("%d",q+p);

地址算术的魔法从这里开始。您可以将指针 q 的地址添加到另一个指针。所以指针移动到地址空间中的新位置。试试这个：

```
p = p+ q
printf("%p",p); 
```

# netbeans - 如何将@note 和@warning 标签添加到Netbeans？

> ID：12108162
> 
> 赞同：0
> 
> 时间：2012-08-24T11:02:45.223
> 
> 标签：netbeans, doxygen, phpdoc

我习惯了 @note 和 @warning 以及其他 Doxygen 标签，我在 Netbeans 中想念它们（目前使用 7.2 for PHP）。有没有一些简单的方法来添加它们？或者也许已经有一些插件？

澄清我正在寻找的内容：

1.  我想对 Netbeans 中的标签进行自动完成。
2.  在具有例如@note标签的方法/属性的自动完成中，我希望它像我写的那样呈现：`<strong>Note:</strong>`。

注意：我喜欢一些 JavaDoc 语法（如 {@link}），所以我正在寻找扩展而不是完全替代。

# android - 如何将 Fennec 与 eclipse for android 连接起来

> ID：12108164
> 
> 赞同：1
> 
> 时间：2012-08-24T11:03:05.110
> 
> 标签：android, eclipse, perl, fennec

我正在尝试检查 Mozilla Fennec 代码并将其与 Eclipse 连接以进行一些更改并将其部署到设备上。

我指的是这个链接。访问：[https ://wiki.mozilla.org/Mobile/Fennec/Android#Connecting_Eclipse_to_Android_Build_tree](https://wiki.mozilla.org/Mobile/Fennec/Android#Connecting_Eclipse_to_Android_Build_tree)

我已经检查了整个代码并在 mozconfig_values 文件中添加了所需的路径。当我执行 run ./create_projects.pl 时，它给了我错误：

> 未找到“运行”命令，您的意思是：

我想我提到 mozconfig_values 文件中的路径是错误的。请指导我克服这个问题或告诉我如何在 Ubuntu 12.04 上运行“Perl”文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:28:03.560

您从字面上输入`run ./create_projects.pl`了 ，但这是错误的。您的外壳/操作系统正确地抱怨没有 command `run`。

`perl ./create_projects.pl`改为键入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T03:13:14.933

类型

> ./create_projects.pl

之前没有任何东西

# android - Android HttpURLConnection 很慢

> ID：12108166
> 
> 赞同：1
> 
> 时间：2012-08-24T11:03:35.753
> 
> 标签：android, timeout, httpurlconnection, galaxy

这是我使用以下代码所面临的情况：

如您所见，我正在尝试读取 HTTP 流。当我在 Android 模拟器上运行以下代码时，它可以 100% 运行浏览器它在 100% 的时间内工作，当我尝试使用 Galaxy S3 浏览器（在 wifi 和 3g 中）连接时它工作...... 100% 的时间。但是，当我尝试在 Wi-Fi 上使用 Galaxy S3 进行连接时，大约 80% 的时间会超时。如果我删除超时属性，我会得到奇怪的异常，例如：

```
"recvfrom failed: ETIMEDOUT"
"failed to connect to <URL>: connect failed: ENETUNREACH (Network is unreachable)"
"unable to resolve the host <URL>: no address associated with hostname" 
```

我愿意接受任何建议...

```
public static final String getHttpResponse(String url)
{
    HttpURLConnection conn = null;
    InputStream response = null;
    try { 
        URL address = new URL(url);
        conn = (HttpURLConnection)address.openConnection();
        conn.setConnectTimeout(30 * 1000); //30 seconds
        conn.setReadTimeout(30 * 1000); //30 seconds

        response = conn.getInputStream();

        if(conn.getResponseCode() != HttpURLConnection.HTTP_OK) { 
            Log.e("Util.getHttpResponse", Integer.toString(conn.getResponseCode()));
            return null; 
        }

        String result = Util.streamToString(response);
        return result;

    } catch(IOException e) {
        response = conn.getErrorStream();
        Log.e("Util.getHttpResponse", Util.streamToString(response));
        return null;

    } finally { 
        if( response != null ) { 
            try {
                response.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        if(conn != null) { 
            conn.disconnect();
        }
    }
} 
```

更新： - 使用 AndroidHttpClient 不起作用 - 获取输入流后，我在 Eclipse IDE 中弹出一个错误...正如您所见，我的调试光标一直到第 107 行 .. 在我完成之后这次的输入流... ![蚀](../Images/0e5a66e26cf55142e47fb4ac0845f9ef.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:56:15.970

我在 Android 设备上遇到了同样的问题。我在 url 中使用 IP 地址。最后，我发现 HttpURLConnection.connect(...) 方法在内部涉及 getHostName() 。之后，我在 url 中使用域，然后它 100% 的时间工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:19:49.703

作为一个实验，如果你尝试使用`AndroidHttpClient`class 来做同样的事情呢？它有一些预定义的超时和其他设置，我们被告知，在大多数情况下应该可以正常工作。

# html - 使用 Photoshop 操作更改文件名

> ID：12108169
> 
> 赞同：3
> 
> 时间：2012-08-24T11:03:54.577
> 
> 标签：html, css, photoshop, photoshop-script

我有 100 个 326 dpi 的 iPhone 视网膜 PNG 切片图像

像.. login@2x.png, textfield@2x.png 等...

现在我想在 163 dpi 的普通视图中使用相同的图像，我们可以通过单击 Photoshop 操作轻松更改 100 个文件的分辨率，但是有什么方法可以通过操作更改文件名？

比如从 login@2x.png 到 login.png

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T09:31:25.723

当您录制动作时。

不要“保存”原件。相反，请执行“另存为”（ctrl+shift+S）并将其保存到新目录。然后关闭原始文件而不保存！

当您运行您的操作时，所有文件都将保存到新目录中。

现在您可以使用 Photoshop 中的批量重命名工具来重命名文件，但如果您想要一个真正强大的重命名实用程序，请尝试批量重命名实用程序（免费软件）

[http://www.bulkrenameutility.co.uk/Main_Intro.php](http://www.bulkrenameutility.co.uk/Main_Intro.php)

它几乎可以执行您能想到的任何批量重命名操作，以及一些操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:15:47.287

我认为使用 Photoshop 你不能做到（不确定）但我总是使用[http://graphicssoft.about.com/od/renamers/Batch_Rename_Picture_Files_Tools_Tips.htm](http://graphicssoft.about.com/od/renamers/Batch_Rename_Picture_Files_Tools_Tips.htm)

其中一些工具

# actionscript-3 - as3 视频在调试模式下不显示在 PC 上

> ID：12108171
> 
> 赞同：0
> 
> 时间：2012-08-24T11:04:03.177
> 
> 标签：actionscript-3, ipad, video

我正在使用 Flashdevelop 为 iPad 开发 as3+AIR 应用程序。我使用 StageVideo 流式传输 flv，并且在 iPad 上部署一切正常。但是在 Flashdevelop 调试模式下的 PC 上，没有视频显示，尽管它被播放（NET_STATUS 事件被调度）。知道发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T23:39:04.973

根据 Adob​​e 的[Flash 路线图](http://www.adobe.com/devnet/flashplatform/whitepapers/roadmap.html)，PC 上将不支持 StageVideo，直到 2013 年。

尝试添加一些检查 StageVideoAvailabilityEvent.STAGE_VIDEO_AVAILABILITY 的代码：

```
function onStageVideoState(e:StageVideoAvailabilityEvent):void
{
    var available:Boolean = (e.availability == StageVideoAvailability.AVAILABLE);
    trace("Got StageVideo?", available);
}

stage.addEventListener(StageVideoAvailabilityEvent.STAGE_VIDEO_AVAILABILITY, onStageVideoState); 
```

当 StageVideo 不可用时，您必须使用常规 Video 对象作为后备。

# android - 如何防止移动设备在显示 HTML 页面时关闭其显示

> ID：12108175
> 
> 赞同：1
> 
> 时间：2012-08-24T11:04:10.353
> 
> 标签：android, html, ios, mobile, windows-phone

是否可以告诉移动浏览器，只要显示某个 HTML 页面，设备就不应关闭其屏幕？

我想构建类似[Project Blinkenlights](http://blinkenlights.net/blinkenlights)的东西，但每个参与者都带来了他/她自己的像素。在给定的时间点将每个显示器设置为某种颜色是可以管理的，只需让每个人打开一个显示空白页面的网站并更改背景为屏幕着色。我会使用 JavaScript 链接设备并让它们登录到控制服务器。但是因为设备进入睡眠状态而让像素闪烁会以某种方式打破这个概念。

一个专用的应用程序将是矫枉过正，而且不是每个路过的旁观者都会安装一个应用程序（至少我不会）。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:23:27.773

我很确定如果不将 webview 捆绑在应用程序中，您将无法做到这一点。不管操作系统是什么。这一切都是为了保护用户（和他的设备电池）

# jquery - jQuery冲突？Drupal 6

> ID：12108177
> 
> 赞同：1
> 
> 时间：2012-08-24T11:04:16.567
> 
> 标签：jquery, drupal-6

安装了 drupal 6，我在主页上安装了用于图像轮播的 flexslider。我之前已经完成了所有工作，所以我知道一切都在加载，我猜我有另一个版本的 jQuery 被引入，尽管它之前确实有效！我只是不记得在它停止工作之前我做了什么！

我也在运行这个脚本来引入 jquery 1.7.1，因为我需要一些 twitter bootstrap javascript。

代码：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>
    var jq17 = jQuery.noConflict();
</script> 
```

即使我将它们全部移除，我的 flexslider 也不想工作，我有点困惑。

我知道 drupal 会通过 $scripts 自动引入他们的 jquery 版本，该版本是 1.3。它也需要它来运行后端的东西。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:53:33.580

你可以使用这个脚本

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>
(function ($){
    //your scrip in jquery 171
})(jQuery171);
</script> 
```

# ios - iOS 版本未按预期工作

> ID：12108179
> 
> 赞同：0
> 
> 时间：2012-08-24T11:04:21.133
> 
> 标签：ios, memory, memory-management, memory-leaks

我正在使用此代码从 config.plist 文件中获取书名。但是我的内存管理是有问题的。'[dict release]' 完全破坏了应用程序并退出。

该代码在删除“[dict release]”时有效，但据我所知，它会导致内存泄漏。

`bnames`是一个全局 NSMutableArray

我究竟做错了什么？

```
- (NSString *)loadBookname: (NSInteger) bookToLoad {
    bookToLoad = [self bookOrder:bookToLoad];

    //---get the path to the property list file---
    plistFileNameConf = [[self documentsPath] stringByAppendingPathComponent:@"Config.plist"];

    //---if the property list file can be found---
    if ([[NSFileManager defaultManager] fileExistsAtPath:plistFileNameConf]) {
        //---load the content of the property list file into a NSDictionary object---
        dict = [[NSDictionary alloc] initWithContentsOfFile:plistFileNameConf];
        bnames = [dict valueForKey:@"BookNames"];
        [dict release];
    }
    else {
        //---load the property list from the Resources folder---
        NSString *pListPath = [[NSBundle mainBundle] pathForResource:@"Config" ofType:@"plist"];
        dict = [[NSDictionary alloc] initWithContentsOfFile:pListPath];
        bnames = [dict valueForKey:@"BookNames"];
        [dict release];
    }
    plistFileNameConf = nil;

    NSString *bookNameTemp;
    bookNameTemp = [bnames objectAtIndex:bookToLoad - 1];
    NSLog(@"bookName: %@", bookNameTemp);
    return bookNameTemp;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T11:15:04.963

您需要正确分配数组：

```
bnames = [[NSArray alloc] initWithArray:[dict valueForKey:@"BookNames"]]; 
```

仔细检查您的 dict 是否返回正确的数据类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:33:56.077

您分配 NSDictionary 的方式似乎没有任何问题（尽管您也可以使用 [NSDictionary dictionaryWithContentsOfFile:] 并且不必担心发布。

无论哪种方式，我都建议问题不在于 [release] 而可能是发布前的行：

```
bnames = [dict valueForKey:@"BookNames"]; 
```

a) 分配在哪里。我在任何地方都看不到它的分配或声明？b) 您期望返回什么类型的价值？

在它上面设置一个断点，并确保你得到你所期望的或任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T14:11:44.967

我发现似乎是解决该问题的更好方法。这让 iOS 可以管理内存。

```
//---finds the path to the application's Documents directory---
- (NSString *) documentsPath {
    NSLog(@"Start documentsPath");
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [paths objectAtIndex:0];
    //  NSLog(@"Found documentsPath 40");
    NSLog(@"End documentsPath");
    return documentsDir;
}

- (NSString *) configPath {
    NSLog(@"Start configPath");
    NSString *plistFileNameConf = [[self documentsPath] stringByAppendingPathComponent:@"Config.plist"];
    if (![[NSFileManager defaultManager] fileExistsAtPath:plistFileNameConf]) {
        plistFileNameConf = [[NSBundle mainBundle] pathForResource:@"Config" ofType:@"plist"];
    }
    NSLog(@"plistFile: %@",plistFileNameConf);
    NSLog(@"End configPath");
    return plistFileNameConf;
} 
```

以下根据需要调用上述代码：

```
NSString *Choice;
NSArray *properties;
NSString *errorDesc = nil;
NSPropertyListFormat format;
NSData *plistXML = [[NSFileManager defaultManager] contentsAtPath:[self configPath]];
NSDictionary *temp = (NSDictionary *)[NSPropertyListSerialization propertyListFromData:plistXML mutabilityOption:NSPropertyListMutableContainersAndLeaves format:&format errorDescription:&errorDesc];
if (!temp) {
    NSLog(@"Error reading plist: %@, format: %d", errorDesc, format);
}
Choice = [temp objectForKey:@"Choice"];
properties = [temp objectForKey:Choice]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T11:14:57.903

如果`dict`它还不是一个强大的属性，那就让它成为一个。然后，`self.dict`在分配给它时使用（并保留释放）。

# algorithm - 计算数组中向量之间的最大距离

> ID：12108181
> 
> 赞同：8
> 
> 时间：2012-08-24T11:04:31.617
> 
> 标签：algorithm, complexity-theory

假设我们有一个包含 n 个向量的数组。我们想计算这些向量之间的最大欧几里得距离。最简单的（天真的？）方法是迭代数组并为每个向量计算其与所有后续向量的距离，然后找到最大值。然而，这个算法会增长（n-1）！关于数组的大小。

有没有其他更有效的方法来解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T11:13:05.320

您对朴素算法复杂性的计算很不稳定，它应该是`O(n(n-1)/2)`，它减少到`O(n^2)`。计算两个向量之间的距离是向量`O(k)`中`k`元素的数量；这仍然给出了远低于`O(n!)`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T13:17:07.043

蛮力算法的复杂度为 O(N^2 * K)（K 是向量中元素的数量）。但是我们可以通过知道在欧几里得空间中的点 A、B 和 C 来做得更好：

```
|AB| + |AC| >= |BC| 
```

算法应该是这样的：

如果到目前为止找到的最大距离是`MAX`并且对于 a`|AB|` 有一个点`C`，例如距离`|AC|`和`|CB|`已经计算和`MAX > |AC|+|CB|`，那么我们可以跳过计算`|AB|`。

很难说出这个算法的复杂性，但我的直觉告诉我它离我不远`O(N*log(N)*K)`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T11:28:09.523

这个问题之前一直在这里，请参阅[如何找到两个最远的点？](https://stackoverflow.com/questions/2736290/how-to-find-two-most-distant-points)

答案是：在欧几里得空间中**可以**在小于 O(n^2) 的时间内完成。另见[http://mukeshiitm.wordpress.com/2008/05/27/find-the-farthest-pair-of-points/](http://mukeshiiitm.wordpress.com/2008/05/27/find-the-farthest-pair-of-points/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T11:50:41.280

因此，假设您有一对点 A 和 B。考虑分别在北极和南极具有 A 和 B 的超球面。超球面中包含的任何点 C 是否可以比 B 更远离 A？

进一步假设我们将点集划分为 sqrt(N) 个超框，每个超框有 sqrt(N) 个点。对于任何一对超框，我们可以在 k 时间内计算它们中包含的无限点集合中任意两点之间可能的最大距离——通过简单地计算它们最远角之间的距离。如果我们已经有一个比这更好的候选者，我们可以丢弃这些超框中的所有点对。

# knockout.js - 超过 1 个 Observable 的淘汰赛阵列过滤器

> ID：12108183
> 
> 赞同：0
> 
> 时间：2012-08-24T11:04:37.583
> 
> 标签：knockout.js

我有一个 observableArray，我通过它`arrayFilter`返回一个过滤集。但我目前只为 1 个 observable 做这件事。如何添加第二个 observable：

```
return ko.utils.arrayFilter(self.complaints(), function (complaint) {
    return complaint.RaisedBy == self.currentUser();
}); 
```

所以我还想根据我的对象的`Code`属性进行过滤：`complaint`

```
return ko.utils.arrayFilter(self.complaints(), function (complaint) {
    return complaint.Code == self.currentCode();
}); 
```

我怎样才能将它们两者结合起来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:08:34.127

你有没有尝试过：

```
return ko.utils.arrayFilter(self.complaints(), function (complaint) {
    return complaint.Code == self.currentCode() && complaint.RaisedBy == self.currentUser();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:09:36.840

像这样的东西应该工作：

```
self.myDependantObservable = ko.computed(function(){
   var currentUser = self.currentUser();
   var currentCode = self.currentCode();

   return result = ko.utils.arrayFilter(self.complaints(), function (complaint) {
     return (complaint.RaisedBy == currentUser && complaint.Code == currentCode);
   });

}); 
```

# python - 如何迭代由defaultdict创建的dict？

> ID：12108186
> 
> 赞同：2
> 
> 时间：2012-08-24T11:04:46.093
> 
> 标签：python

我正在迭代使用以下内容创建的字典。

```
 tree = defaultdict(partial(defaultdict, partial(defaultdict, list)))
 for dt, hour, value in flat_list:
     tree[dt][hour]=[]
     tree[dt][hour].append(value) 
```

我的输出如下所示：

```
 for k,v in tree.iteritems():
     2012-08-07 defaultdict(<functools.partial object at 0x1e0a050>, {'17': ['30']})
     2012-08-24 defaultdict(<functools.partial object at 0x1e0a050>, {'3': ['70']}) 
```

我该如何摆脱这些东西？我如何像普通的字典一样迭代？：

```
defaultdict(<functools.partial object at 0x1e0a050> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T11:08:11.240

您已经像常规字典一样迭代默认字典，但您也在*打印*默认字典表示。

要像打印常规字典一样打印这些，只需将它们变回一个：

```
 for k,v in tree.iteritems():
     print k, dict(v) 
```

请注意，a`defaultdict`是 的直接子类`dict`，除了更新的`__getitem__`行为和更新的`__repr__`钩子¹之外，a 的行为与正常`defaultdict`行为*完全相同*`dict`，当然在迭代方面。

^(1[`__copy__`并且也被覆盖，以便在使用模块时`__deepcopy__`创建一个新的。出于同样的原因，为该模块提供了一个自定义。`defaultdict``copy``__reduce__``pickle`])

# android - 如何从 ORMLITE 中删除记录？

> ID：12108195
> 
> 赞同：26
> 
> 时间：2012-08-24T11:05:47.210
> 
> 标签：android, ormlite

我需要从 ORMLite 数据库中删除一条记录我可以使用以下方式按 id 删除一条记录

```
@Override
public void Delete(int id) throws SQLException {
    this.dao.deleteById(id);
} 
```

但是如果我必须从同一个表中删除一条记录而不是按 id 而是按名称或我想要的任何其他字段怎么办

```
public void Deletefromcanteen(String name,MealType mealtype) {
    this.dao.deletebyName(name);
} 
```

我应该使用 querybuilder 编写什么查询来删除 name = name 和 mealtype = say (lunch) 的记录

我在我的数据库助手类中尝试过这样的事情

```
public  void deletefromcanteen(int id, String mealtype) {
    try {
        Dao<CanteenLog, Integer> canteenDao = getCanteen();
        DeleteBuilder<CanteenLog, Integer> deleteBuilder = canteenDao
                .deleteBuilder();
        deleteBuilder.where().eq("user_id", id).and().eq("meal", mealtype);
        canteenDao.delete(deleteBuilder.prepare());
    } catch (Exception e) {
        ...
    }
} 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-08-24T11:14:17.210

```
deleteBuilder.where().eq("FIELD_NAME", arg);
deleteBuilder.delete(); 
```

更新：

例如 ：

```
//Get helper
DatabaseHelper helper = OpenHelperManager.getHelper(App.getContext(), DatabaseHelper.class);

//get dao
Dao dao = helper.getDao(YOUR_CLASS.class);

//delete elements from table in field by arg
DeleteBuilder<CanteenLog, Integer> deleteBuilder = dao.deleteBuilder();
deleteBuilder.where().eq("FIELD_NAME", arg);
deleteBuilder.delete(); 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:11:30.827

为了节省构建查询，您可以执行选择以查找 ID，然后按 ID 执行删除。如果您已经为此表设置了选择查询，这将很简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-19T03:57:37.533

也可以这样

```
DatabaseHelper.getInstance().getDao(YourObject.class).delete(yourObjectInstance); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-12T21:54:39.883

如果您使用的是 Kotlin，则需要执行类似的操作，因为类型推断当前对于流式语法无法正常工作：

```
val deleteBuilder = dao.deleteBuilder()
            val where = deleteBuilder.where().eq("address", address)
            deleteBuilder.setWhere(where)
            deleteBuilder.delete() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-24T06:38:50.490

如果您已经有要删除的对象（或对象列表）的实例，只需执行以下操作：

```
//Get helper
DatabaseHelper helper = 
    OpenHelperManager.getHelper(App.getContext(), DatabaseHelper.class);
// delete 'em !
helper.getDao(YourObject.class).delete(yourObjectInstance); 
```

如果您没有要删除的实例，或者您想使用 SQL 方式（！）：

```
//Get helper
DatabaseHelper helper = 
    OpenHelperManager.getHelper(App.getContext(), DatabaseHelper.class);

//get dao
Dao dao = helper.getDao(YOUR_CLASS.class);

//delete elements from table in field by arg
DeleteBuilder<CanteenLog, Integer> deleteBuilder = dao.deleteBuilder();
deleteBuilder.where().eq("FIELD_NAME", "FIELD_VALUE");
deleteBuilder.delete(); 
```

如果您需要更复杂的`Where`逻辑，则使用`deleteBuilder.where().or()`or`deleteBuilder.where().and()`添加更多约束。

# ruby-on-rails - 在应用程序中使用自动完成功能与 ransack

> ID：12108197
> 
> 赞同：0
> 
> 时间：2012-08-24T11:05:56.687
> 
> 标签：ruby-on-rails, ruby-on-rails-3, autocomplete, jquery-autocomplete, ransack

再会。我讨厌一个控制器，它使用 ransack 按标题查找文章。我需要用于查找信息的字段以使用自动完成功能。目前它发现没问题，但没有自动完成，你能帮我解决这个问题和 gem [https://github.com/crowdint/rails3-jquery-autocomplete-app](https://github.com/crowdint/rails3-jquery-autocomplete-app)吗？

宝石文件

```
 gem "ransack"
    gem 'rails3-jquery-autocomplete'
    gem 'nifty-generators'
    gem 'jquery-rails', '~> 2.0' 
```

鉴于：

```
<%= search_form_for @q do |f| %>
  <%= f.label t('.find') %>
  <%= f.autocomplete_field :title_cont,
    articles_autocomplete_article_title_path, :size => 15 %><br />
  <%= f.submit :value=>'Search', :class=>'fl_right' %>
<% end %> 
```

布局负责人：

```
 <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
      <%= javascript_include_tag '/javascripts/jquery-ui-1.8.23.custom.min.js',
      '/javascripts/autocomplete-rails.js', '/javascripts/rails.js'  %>
    <%= stylesheet_link_tag '/stylesheets/ui-lightness/jquery-ui-1.8.23.custom.css' %> 
```

控制器

```
class ArticlesController < ApplicationController
  autocomplete :article, :title 
```

**更新 1** 和 routes.rb

```
get 'articles/autocomplete_article_title' 
```

**UPDATE 2** 在视图中，代替 `<%= f.autocomplete_field :title_cont,` 使用 1) :title_start 没有变化 2) :articles_article_title_start 等等导致错误。

**更新 3** 我编辑了 routes.rb。将 get 'articles/autocomplete_article_title' 移到语言环境变量的范围内，**现在它可以工作了。**..自动完成下拉列表出现...但为空:(现在必须修复那个。

**更新 4** 尝试使用[http://railscasts.com/episodes/102-auto-complete-association](http://railscasts.com/episodes/102-auto-complete-association)。但它适用于旧版本的导轨......等等

**更新 5** 在 routes.rb 中更改

```
 resources :articles do
    get 'autocomplete_article_title'
  end 
```

还没有运气。

**更新 6** 据我了解，当前的问题是：ransack & autocomplete 使用一个字段。它适用于对 autocomplete_field 类型的字段进行洗劫。但我不知道如何使用自动完成功能使 ransack 可接受的字段名称。你能帮忙吗？

**更新 7** 所以在视图中

```
 f.text_field :title_start,
      "data-autocomplete" => articles_autocomplete_article_title_path,
      :size => 15 
```

在路线.rb

```
scope '(:locale)' do
  resources :users
  resources :news
  resources :articles do

  end
  get 'articles/autocomplete_article_title'
  get "news/index" , as: 'news'

# match "/news*tail" => 'news#index'
  root :to => 'News#index', as: 'news'
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:11:11.740

代替

```
f.autocomplete_field :title_cont,
    articles_autocomplete_article_title_path, :size => 15 
```

尝试

```
f.text_field :title_cont, "data-autocomplete" => articles_autocomplete_article_title_path 
```

在我的项目中，我使用了 meta_search 和 simple_form，就像

```
f.input :country_name_equals, url: autocomplete_country_name_path, :as => :autocomplete 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:35:18.890

做了两件事：重新路由路线（先进先出）

> 获取“文章/autocomplete_article_title”
> 获取“新闻/索引”，如：“新闻”
> 资源：用户
> 资源：新闻
> 资源：文章

和 2) 在控制器中重新路由权限

```
 skip_before_filter :authorize, except: [:edit, :update, :destroy] 
```

# asp.net - 使用无序列表而不是表会产生很大的不同吗？

> ID：12108199
> 
> 赞同：0
> 
> 时间：2012-08-24T11:06:02.963
> 
> 标签：asp.net, html, css, user-interface

一个**DNN**模块由几个表单组成，其中文本字段、标签和日期选择器使用*'tr'*和*'td'* html 标签排列。后来，有人告诉我将这些表转换为无序列表，*'ul'*和*'li'*这样做会大大改善 UI 渲染体验吗？

我已经仔细阅读了以下文档，但仍有疑问：[Tables vs. Unordered Lists](http://css-discuss.incutio.com/wiki/Tables_Vs_Lists)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:15:37.000

> 1.  在呈现具有二维信息的数据时，表格很有用。
> 2.  无序列表在呈现具有单维信息的数据时很有用。

* * *

以上是文章中值得考虑的几点

请记住，浏览器在嵌套数据方面存在问题，这里是表格。所以列表肯定会提高性能

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T11:10:07.823

就用户而言，这样做与 UI 渲染体验无关。

这个想法是将标记与表示分开。您标记表单并使用 CSS 来呈现它。

表格应该留给表格数据。

注意：浏览器在处理非常大且高度嵌套的表格时确实存在性能问题，这是在 CSS 存在之前布局任何内容的唯一方法。然而，由于 CSS 确实存在，它应该用于表示而不是 HTML 表格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T11:11:47.723

听起来好像您正在布置一个表单（“文本字段、标签和日期选择器”），在这种情况下，您最好使用 DIV、P、SPAN 和 LABEL 标签来组织您的控件，而不是 TABLE 标签*或*列表.

正如 Oded 所说，它不会对 UI 渲染产生太大影响，但最好为表格数据保留表格，我要补充一点，有序或无序的列表最好保存在列表中的数据 :)

如果您正在布置表单控件，我认为此讨论可能与您的决定更相关： http: [//css-discuss.incutio.com/wiki/Tables_Vs_Divs](http://css-discuss.incutio.com/wiki/Tables_Vs_Divs)

冒着*真正*引发争论的风险，我对 Asp.Net 表单中一行的首选布局是这样的：

```
<p class="form-line"> <!-- You could as well use a <div> -->
    <label>Field Name:</label>
    <asp:YOUR_CONTROL_HERE/>
    <asp:YOUR_VALIDATION_CONTROL_HERE/>
</p> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T11:49:12.977

@JcFx - 实际上并非如此！

```
<div style="width: 100%; margin-top: 10px">
        <div style="float: left; display: inline-block; width: 50%" class="div1">
            <div style="float: left; display: inline-block; width: 25%" class="div2">
                <ul>
                    <li class="list1">
                        <asp:Label ID="lblPrefix" runat="server" Text='Prefix'></asp:Label>
                    </li> 
```

等等。

# email - 是否有充分的理由发送 HTML 电子邮件的文本版本？

> ID：12108201
> 
> 赞同：1
> 
> 时间：2012-08-24T11:06:24.727
> 
> 标签：email, html-email, email-client

多年来，我还没有看到或听说过任何无法读取和显示 HTML 的电子邮件客户端。

我正在为一个新网站创建电子邮件模板，并且想知道是否值得尝试为发送的每封自动电子邮件提供文本版本。

简而言之，**还有什么好的理由将文本版本与 HTML 电子邮件一起发送？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:03:08.893

文本版本肯定会减少您的邮件最终成为垃圾邮件的可能性，并且对不能或不会显示 HTML 的用户代理更友好。大多数电子邮件库可以从 HTML 自动生成文本版本。

当替代方案不需要更多工作时，为什么要故意疏远一些用户？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:13:47.703

我认为这取决于您的订阅表单中是否提供此选项。如果不是这种情况，则没有理由花费时间或金钱来创建文本版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T10:00:02.183

我认为这是向客户发送电子邮件活动的重要部分。您还需要确保您有一个文本版本，以防渲染客户端无法处理 html 片段。这有助于确保您至少也不会发送垃圾邮件。如果您不指定文本版本，几乎所有营销电子邮件引擎都具有将 html 电子邮件转换为文本版本的默认选项。

# php - php date.timezone 仅对命令行脚本无法正常工作

> ID：12108207
> 
> 赞同：9
> 
> 时间：2012-08-24T11:06:53.727
> 
> 标签：php

我的 php.ini 文件中有这个条目：

```
date.timezone = 'Europe/London'; 
```

但是每次我在命令行脚本中使用 DateTime() 时，我仍然会收到以下错误：

```
Exception: DateTime::__construct(): It is not safe to rely on the system's timezone settings. 

You are *required* to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. 

We selected 'Europe/London' for 'BST/1.0/DST' instead 
```

因此，我必须在任何脚本中执行以下操作才能使其正常工作：

```
date_default_timezone_set('Europe/London'); 
```

还有什么可能导致此错误？

**更新**

我在命令行和网络浏览器中都使用了以下内容：

```
<?php

var_dump(ini_get('date.timezone'));
exit; 
```

在命令行中我得到：

```
string(0) "" 
```

在网络浏览器中，我得到：

```
string(13) "Europe/London" 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-24T11:29:14.530

CLI 和 webserver（以及 cgi 和 fpm）使用不同`php.ini`的 -files。因为您说您在浏览器中看到了正确的值，所以我猜您编辑了错误的值。在 cli 类型上

```
php --ini 
```

要找出哪个是您必须编辑的。例如，它是第二行中的那个

```
Loaded Configuration File:         /etc/php5/cli/php.ini 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:37:33.363

一些服务器（如媒体寺）对特定域进行配置。因此服务器将访问 /etc/php.ini 下的通用 php.ini 文件，但浏览器访问域的 php.ini 文件。可能会发生问题

# android - 在没有坐标的 MapView 上显示点

> ID：12108211
> 
> 赞同：0
> 
> 时间：2012-08-24T11:07:10.937
> 
> 标签：android, google-maps

有没有办法在不知道坐标的情况下在谷歌 MapView 上显示一个点，只用一个地址？

我的目标是避免使用地理编码 API，我知道它有使用限制。它是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:10:43.690

使用 Android [Geocoder](http://developer.android.com/reference/android/location/Geocoder.html)类，您可以做到这一点。您可以通过给定地址获取 Latitude ， Longitude ..

就像是，

```
Geocoder geoCoder = new Geocoder(this);
List<Address> address;

try {
    address = geoCoder.getFromLocationName("Address",1);
    if (address == null) {
        return null;
    }
    Address location = address.get(0);
    location.getLatitude();
    location.getLongitude();
} 
```

和

```
My goal is to avoid using the geocoding API, which I understand has a usage limit. Is this correct? 
```

正如您所说，您不想限制查询...

所以看看这两个链接[android-geocoder-limitations](http://java.dzone.com/android-geocoder-limitations)和 SE Question [/how-to-avoid-google-map-geocode-limit](https://gis.stackexchange.com/questions/15052/how-to-avoid-google-map-geocode-limit)会对你有所帮助……</p>

# map - golang 地图打印乱序

> ID：12108215
> 
> 赞同：12
> 
> 时间：2012-08-24T11:07:23.220
> 
> 标签：map, go

为什么地图打印不正常，我该如何让它正常打印？

```
package main

import (
    "fmt"
)

type monthsType struct {
    no   int
    text string
}

var months = map[int]string{
    1:"January", 2:"Fabruary", 3:"March", 4:"April", 5:"May", 6:"June",
    7:"July", 8:"August", 9:"September", 10:"October", 11:"Novenber", 12:"December",
}

func main(){
    for no, month := range months {
        fmt.Print(no)
        fmt.Println("-" + month)
    }
} 
```

打印出来：

```
10-October
7-July
1-January
9-September
4-April
5-May
2-Fabruary
12-December
11-Novenber
6-June
8-August
3-March 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-24T11:48:36.993

代码：

```
func DemoSortMap() (int, error) {
    fmt.Println("use an array to access items by number:")
    am := [2]string{"jan", "feb"}
    for i, n := range am {
        fmt.Printf("%2d: %s\n", i, n)
    }
    fmt.Println("maps are non-sorted:")
    mm := map[int]string{2: "feb", 1: "jan"}
    for i, n := range mm {
        fmt.Printf("%2d: %s\n", i, n)
    }
    fmt.Println("access items via sorted list of keys::")
    si := make([]int, 0, len(mm))
    for i := range mm {
        si = append(si, i)
    }
    sort.Ints(si)
    for _, i := range si {
        fmt.Printf("%2d: %s\n", i, mm[i])
    }

    return 0, nil
} 
```

（大部分是从 M. Summerfield 的[书中](http://books.google.de/books?id=HW-5SZ1HKusC&pg=PT217&lpg=PT217&dq=%224.3.4%20Key-Ordered%20Map%20Iteration%22&source=bl&ots=Fp7245_0iv&sig=IhJnSkLX2hFA021V2XkBPRiREf4&hl=de#v=onepage&q=%224.3.4%20Key-Ordered%20Map%20Iteration%22&f=false)偷来的）

输出：

```
use an array to access items by number:
 0: jan
 1: feb
maps are non-sorted:
 2: feb
 1: jan
access items via sorted list of keys::
 1: jan
 2: feb 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-26T14:10:38.813

地图未排序，因此您可以使用切片对地图进行排序。Mark Summerfield 的书“Programming in Go”在第 204 页解释了这一点，强烈推荐。

# php - MySQl 表中的条目未显示默认结果

> ID：12108216
> 
> 赞同：-1
> 
> 时间：2012-08-24T11:07:23.090
> 
> 标签：php, mysql, resultset

我有一张表，我需要在其中显示一个部门学生的成绩。我创建了测试矩阵编号并为它们分配了分数。假设 400Level 有 8 名学生，8 名学生中有 3 名没有结转，而其他 5 名学生有。该表应该显示 8 名学生注册的不同课程及其相应分数。如果未注册特定课程，则应显示默认值。

以下是实现此结果的示例脚本

```
<?php
require_once "scripts/connect_to_mysql.php";
$sq = mysql_query("SELECT DISTINCT course_code FROM tbl_result_400");
//$r = mysql_fetch_assoc($sq);
$k = 1;
echo "<table border = 1 bgcolor = 'white' class='member_tableheader'><tr>";
                        echo "<td width = '50px' align='left' valign='top'>COURSES<BR>UNITS</td>";
                        while ($r = mysql_fetch_assoc($sq)){
                                $v=$r['course_code'];
                                $sq1 = mysql_query("SELECT course_unit FROM tbl_result_400 WHERE course_code = '$v'");
                                $rr = mysql_fetch_assoc($sq1);//$v = "sup";
                                echo "<td width = '100px' align='center' valign='top'>".$r['course_code']."<BR>"."(".$rr['course_unit'].")"."<BR>"."</td>";
                                ++$k;
                        }
                        echo "</tr>";

                        echo "<tr>";
                        $sq2 = mysql_query("SELECT DISTINCT matric_no FROM tbl_registered_courses_400 ORDER BY matric_no");
                        $rrr = mysql_fetch_assoc($sq2);

                                do{
                                        $vv = $rrr['matric_no']; $t = 1;
                                        $sq4 = mysql_query("SELECT * FROM tbl_result_400 where matric_no = '$vv'");
                                        $n = mysql_num_rows($sq4);
                                $sq3 = mysql_query("SELECT score FROM tbl_result_400 where matric_no = '$vv'");

                                echo "<td width = '100px' align='center' valign='top'>".$vv."</td>";
                                while($rs = mysql_fetch_assoc($sq3)){
                                        if($t <= $n){
                                        if(empty($rs['score'])){
                                            $emptyScore = "&nbsp; --- &nbsp;";
                                        echo "<td width = '100px' align='center' valign='top'>".$emptyScore."</td>";    
                                        }else{
                                                echo "<td width = '100px' align='center' valign='top'>".$rs['score']."</td>";
                                                }
                                        };
                                        if($t == $n ){echo "<tr>";}
                                        /*if($t > $n){
                                                echo "<td width = '100px' align='center'
valign='top'>".$rs['score']."</td>";
                                        }*/
                                        ++$t;
                                }
                                }while($rrr = mysql_fetch_assoc($sq2));
                                echo "</tr>";
                        echo "</tr>";
echo "</table>";
?> 
```

下图显示了我得到的结果： ![在此处输入图像描述](../Images/8b89afd926f20aa4f352447ff8521122.png)

想要的结果如下图所示： ![在此处输入图像描述](../Images/5180dd5855e2c0710497565dc21548bf.png)

从上面的图片可以看出，matric_no 03/55ec101 的学生没有注册 PHY 152 课程，因此没有 PHY 152 的默认分数。

据推测，矩阵编号为 06/55ec101 的学生除了 PHY 152 之外的所有课程都没有分数。我无法将我的代码修复为破折号的默认分数。

请帮我解决这个问题。

下面是不同矩阵数的示例 SQL：

```
 --
    -- Table structure for table `tbl_registered_courses_400`
    --

    CREATE TABLE IF NOT EXISTS `tbl_registered_courses_400` (
      `id` int(11) NOT NULL AUTO_INCREMENT,
      `matric_no` varchar(15) NOT NULL,
      `course_code` varchar(15) NOT NULL,
      `course_unit` varchar(15) NOT NULL,
      `semester_registered` varchar(6) NOT NULL,
      `session_registered` varchar(15) NOT NULL,
      PRIMARY KEY (`id`)
    ) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=19 ;

    --
    -- Dumping data for table `tbl_registered_courses_400`
    --

    INSERT INTO `tbl_registered_courses_400` (`id`, `matric_no`, `course_code`, `course_unit`, `semester_registered`, `session_registered`) VALUES
    (1, '03/55ec101', 'CSC 402', '6', '1', '2015/2016'),
    (2, '03/55ec101', 'CSC 499', '3', '1', '2015/2016'),
    (3, '03/55ec101', 'CHM 401', '3', '1', '2015/2016'),
    (4, '03/55ec101', 'CSC 470', '2', '1', '2015/2016'),
    (5, '03/55ec101', 'CSC 414', '3', '1', '2015/2016'),
    (6, '03/55ec101', 'CSC 411', '2', '1', '2015/2016'),
    (7, '03/55ec101', 'CSC 403', '3', '1', '2015/2016'),
    (8, '03/55ec101', 'BLY 401', '2', '1', '2015/2016'),
    (9, '03/55ec101', 'PHY 152', '3', '1', '2015/2016'),
    (10, '06/55ec101', 'CSC 402', '6', '1', '2015/2016'),
    (11, '06/55ec101', 'CSC 499', '3', '1', '2015/2016'),
    (12, '06/55ec101', 'CHM 401', '3', '1', '2015/2016'),
    (13, '06/55ec101', 'CSC 470', '2', '1', '2015/2016'),
    (14, '06/55ec101', 'CSC 414', '3', '1', '2015/2016'),
    (15, '06/55ec101', 'CSC 411', '2', '1', '2015/2016'),
    (16, '06/55ec101', 'CSC 403', '3', '1', '2015/2016'),
    (17, '06/55ec101', 'BLY 401', '2', '1', '2015/2016'),
    (18, '06/55ec101', 'PHY 152', '3', '1', '2015/2016'); 
```

这是结果表的 SQl：

```
 --
    -- Table structure for table `tbl_result_400`
    --

    CREATE TABLE IF NOT EXISTS `tbl_result_400` (
      `id` int(11) NOT NULL AUTO_INCREMENT,
      `department_id` int(11) NOT NULL,
      `matric_no` varchar(15) NOT NULL,
      `session` varchar(15) NOT NULL,
      `semester` varchar(15) NOT NULL,
      `level` varchar(10) NOT NULL,
      `course_code` varchar(10) NOT NULL,
      `course_unit` varchar(10) NOT NULL,
      `ca` varchar(4) NOT NULL,
      `exam` varchar(4) NOT NULL,
      `score` varchar(10) NOT NULL,
      `grade` varchar(2) NOT NULL,
      PRIMARY KEY (`id`)
    ) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=52 ;

    --
    -- Dumping data for table `tbl_result_400`
    --

    INSERT INTO `tbl_result_400` (`id`, `department_id`, `matric_no`, `session`, `semester`, `level`, `course_code`, `course_unit`, `ca`, `exam`, `score`, `grade`) VALUES
    (1, 2, '03/55EC101', '2015/2016', '1', '400', 'CSC 499', '3', '', '', '51', ''),
    (2, 2, '06/55EJ101', '2015/2016', '1', '400', 'CSC 499', '3', '', '', '69', ''),
    (3, 2, '06/55EJ102', '2015/2016', '1', '400', 'CSC 499', '3', '', '', '60', ''),
    (4, 2, '06/55EJ103', '2015/2016', '1', '400', 'CSC 499', '3', '', '', '54', ''),
    (5, 2, '06/55EJ104', '2015/2016', '1', '400', 'CSC 499', '3', '', '', '73', ''),
    (6, 2, '03/55EC101', '2015/2016', '1', '400', 'CSC 470', '3', '', '', '72', ''),
    (7, 2, '06/55EJ101', '2015/2016', '1', '400', 'CSC 470', '3', '', '', '68', ''),
    (8, 2, '06/55EJ102', '2015/2016', '1', '400', 'CSC 470', '3', '', '', '87', ''),
    (9, 2, '06/55EJ103', '2015/2016', '1', '400', 'CSC 470', '3', '', '', '53', ''),
    (10, 2, '06/55EJ104', '2015/2016', '1', '400', 'CSC 470', '3', '', '', '45', ''),
    (11, 2, '03/55EC101', '2015/2016', '1', '400', 'CSC 414', '2', '', '', '55', ''),
    (12, 2, '06/55EJ101', '2015/2016', '1', '400', 'CSC 414', '2', '', '', '65', ''),
    (13, 2, '06/55EJ102', '2015/2016', '1', '400', 'CSC 414', '2', '', '', '76', ''),
    (14, 2, '06/55EJ103', '2015/2016', '1', '400', 'CSC 414', '2', '', '', '59', ''),
    (15, 2, '06/55EJ104', '2015/2016', '1', '400', 'CSC 414', '2', '', '', '77', ''),
    (16, 2, '03/55EC101', '2015/2016', '1', '400', 'CSC 411', '2', '', '', '56', ''),
    (17, 2, '06/55EJ101', '2015/2016', '1', '400', 'CSC 411', '2', '', '', '65', ''),
    (18, 2, '06/55EJ102', '2015/2016', '1', '400', 'CSC 411', '2', '', '', '66', ''),
    (19, 2, '06/55EJ103', '2015/2016', '1', '400', 'CSC 411', '2', '', '', '76', ''),
    (20, 2, '06/55EJ104', '2015/2016', '1', '400', 'CSC 411', '2', '', '', '67', ''),
    (21, 2, '03/55EC101', '2015/2016', '1', '400', 'CSC 403', '3', '', '', '66', ''),
    (22, 2, '06/55EJ101', '2015/2016', '1', '400', 'CSC 403', '3', '', '', '65', ''),
    (23, 2, '06/55EJ102', '2015/2016', '1', '400', 'CSC 403', '3', '', '', '68', ''),
    (24, 2, '06/55EJ103', '2015/2016', '1', '400', 'CSC 403', '3', '', '', '79', ''),
    (25, 2, '06/55EJ104', '2015/2016', '1', '400', 'CSC 403', '3', '', '', '90', ''),
    (26, 2, '03/55EC101', '2015/2016', '1', '400', 'CSC 402', '4', '', '', '65', ''),
    (27, 2, '06/55EJ101', '2015/2016', '1', '400', 'CSC 402', '4', '', '', '72', ''),
    (28, 2, '06/55EJ102', '2015/2016', '1', '400', 'CSC 402', '4', '', '', '48', ''),
    (29, 2, '06/55EJ103', '2015/2016', '1', '400', 'CSC 402', '4', '', '', '80', ''),
    (30, 2, '06/55EJ104', '2015/2016', '1', '400', 'CSC 402', '4', '', '', '69', ''),
    (31, 2, '03/55EC101', '2015/2016', '2', '400', 'CSC 498', '6', '', '', '61', ''),
    (32, 2, '06/55EJ101', '2015/2016', '2', '400', 'CSC 498', '6', '', '', '55', ''),
    (33, 2, '06/55EJ102', '2015/2016', '2', '400', 'CSC 498', '6', '', '', '59', ''),
    (34, 2, '06/55EJ103', '2015/2016', '2', '400', 'CSC 498', '6', '', '', '52', ''),
    (35, 2, '06/55EJ104', '2015/2016', '2', '400', 'CSC 498', '6', '', '', '60', ''),
    (36, 2, '03/55EC101', '2015/2016', '2', '400', 'CSC 419', '4', '', '', '72', ''),
    (37, 2, '06/55EJ101', '2015/2016', '2', '400', 'CSC 419', '4', '', '', '62', ''),
    (38, 2, '06/55EJ102', '2015/2016', '2', '400', 'CSC 419', '4', '', '', '45', ''),
    (39, 2, '06/55EJ103', '2015/2016', '2', '400', 'CSC 419', '4', '', '', '37', ''),
    (40, 2, '06/55EJ104', '2015/2016', '2', '400', 'CSC 419', '4', '', '', '50', ''),
    (41, 2, '03/55EC101', '2015/2016', '2', '400', 'MAT 412', '3', '', '', '56', ''),
    (42, 2, '06/55EJ101', '2015/2016', '2', '400', 'MAT 412', '3', '', '', '45', ''),
    (43, 2, '06/55EJ102', '2015/2016', '2', '400', 'MAT 412', '3', '', '', '46', ''),
    (44, 2, '06/55EJ103', '2015/2016', '2', '400', 'MAT 412', '3', '', '', '57', ''),
    (45, 2, '06/55EJ104', '2015/2016', '2', '400', 'MAT 412', '3', '', '', '67', ''),
    (46, 2, '03/55EC101', '2015/2016', '2', '400', 'CSC 412', '3', '', '', '67', ''),
    (47, 2, '06/55EJ101', '2015/2016', '2', '400', 'CSC 412', '3', '', '', '55', ''),
    (48, 2, '06/55EJ102', '2015/2016', '2', '400', 'CSC 412', '3', '', '', '60', ''),
    (49, 2, '06/55EJ103', '2015/2016', '2', '400', 'CSC 412', '3', '', '', '69', ''),
    (50, 2, '06/55EJ104', '2015/2016', '2', '400', 'CSC 412', '3', '', '', '59', ''),
    (51, 0, '06/55EC101', '2015/2016', '1', '400', 'PHY 152', '3', '20', '58', '78', 'A'); 
```

关于如何在第二张图像中获得结果的任何有用线索，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:56:47.533

你的意思是这样的：

```
<?php

    $db = new PDO('mysql:host=localhost;dbname=test;charset=utf8', 'root', '');
    $stmt = $db->query("SELECT DISTINCT course_code FROM tbl_result_400");

    $k = 1;
    echo "<table border = 1 bgcolor = 'white' class='member_tableheader'><tr>\n";
    echo "<td width = '50px' align='left' valign='top'>COURSES<BR>UNITS</td>\n";
    $coursesArray = array();
    while($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
        $v = $row['course_code'];
        $stmt2 = $db->query("SELECT course_unit FROM tbl_result_400 WHERE course_code = '$v'");
        $rr = $stmt2->fetch(PDO::FETCH_ASSOC);
        echo "<td width = '100px' align='center' valign='top'>".$row['course_code']."<BR>"."(".$rr['course_unit'].")"."<BR>"."</td>\n";
        $k++;
        $coursesArray[$k] = $row['course_code'];
    }

    $flipArray = array_flip($coursesArray);
    $createEmpty = array();
    foreach($flipArray as $num => $value){
        $createEmpty[$num] = 0;
    }

    echo "</tr><tr>";
    $stmta = $db->query("SELECT DISTINCT matric_no FROM tbl_registered_courses_400 ORDER BY matric_no");

    $z = 0;
    $newDisplay = array();
    while( $row = $stmta->fetch(PDO::FETCH_ASSOC)) {
        $vv = $row['matric_no'];
        $t = 1;
        $stmt = $db->query("SELECT * FROM tbl_result_400 where matric_no = '$vv'");
        $n = $stmt->rowCount();
        echo "<td width = '100px' align='center' valign='top'>".$vv."a</td>\n";

        $newDisplay[$z] = $createEmpty;

        while($row = $stmt->fetch(PDO::FETCH_ASSOC)){
            foreach($coursesArray as $num => $name){
                if($row['course_code'] == $name){
                    $newDisplay[$z][$name] = $row['score'];
                }
            }
        }

        foreach($newDisplay[$z] as $num => $value){
            if($value){
                echo "<td width = '100px' align='center' valign='top'>".$value."</td>\n";    
            } else {
                echo "<td width = '100px' align='center' valign='top'> &nbsp; --- &nbsp; </td>\n";
            }
        }

        echo "</tr><tr>";

        $z++;

    }
    echo "</tr>";
    echo "</table>";

?> 
```

# c++ - Qt QTextEdit 行号

> ID：12108221
> 
> 赞同：2
> 
> 时间：2012-08-24T11:07:45.337
> 
> 标签：c++, qt, code-editor

我正在为 Qt 中的 GLSL 编写代码编辑器，但在显示 QTextEdit 的行号时遇到问题。我不了解[Qt Code Editor Example](https://doc.qt.io/qt-5/qtwidgets-widgets-codeeditor-example.html)中的示例，但这部分

```
QTextBlock block = firstVisibleBlock();
int blockNumber = block.blockNumber();
int top = (int) blockBoundingGeometry(block).translated(contentOffset()).top();
int bottom = top + (int) blockBoundingRect(block).height(); 
```

考虑到我没有 firstBisibleBlock、blockBoundingGeometry 和 blockBoundingRect 方法这一事实，它并不能与 QTextEdit 很好地结合。我知道这些块保存在 QTextDocument 中，但该类也没有这些方法。

我试着搜索一个例子，但每次有人问这个问题时，他都会被引导到同一个链接。

有人可以帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:32:50.427

该示例使用`QPlainTextEdit`和访问`firstVisibleBlock()`等受保护的功能。

查看源代码`QPlainTextEdit`并了解 IT 为实现这些功能所做的工作。看起来好像它们是根据文档实现的（至少`firstVisibleBlock()`是这样）。

或者，复制示例并从`QPlainTextEdit`您自己派生，不要使用`QTextEdit`.

# c# - 使用配置文件中的多个搜索条件查找 WCF 服务证书

> ID：12108223
> 
> 赞同：1
> 
> 时间：2012-08-24T11:07:53.417
> 
> 标签：c#, .net, wcf, x509certificate

我想知道，有没有办法找到 WCF 服务证书，使用`.config`文件中的几个搜索条件？

例如，如果我想按主题名称查找证书，那么我的配置将包含以下几行：

```
 <serviceCertificate findValue="host.domain.com"
                            storeLocation="LocalMachine"
                            storeName="My"
                            x509FindType="FindBySubjectName"/> 
```

**如果我想按主题名称和**应用程序策略查找证书，我应该在配置文件中添加什么？

我知道，该`X509Certificate2Collection`课程[允许](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate2collection.find)这样做：

```
 return store
                .Certificates
                .Find(X509FindType.FindByApplicationPolicy, "1.3.6.1.5.5.7.3.1", false)
                .Find(X509FindType.FindBySubjectName, "host.domain.com", false)
                .Cast<X509Certificate2>()
                .SingleOrDefault(); 
```

那么`.config`-files呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:00:53.350

编写一个自定义服务行为，您将能够从配置中提供您的应用程序策略和主题名称，在证书存储中连续执行两次查找。

```
public class ServerCertificateServiceBehavior : IServiceBehavior
{
    private X509Certificate2 certificate;

    public ServerCertificateServiceBehavior(StoreName storeName, StoreLocation storeLocation, string subjectName, string applicationPolicy)
    {
        X509Store store = new X509Store(storeName, storeLocation);
        store.Open(OpenFlags.ReadOnly | OpenFlags.OpenExistingOnly);

        certificate = store
            .Certificates
            .Find(X509FindType.FindByApplicationPolicy, applicationPolicy, false)
            .Find(X509FindType.FindBySubjectName, subjectName, false)
            .Cast<X509Certificate2>()
            .SingleOrDefault();
    }

    public void AddBindingParameters(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase, Collection<ServiceEndpoint> endpoints, BindingParameterCollection bindingParameters)
    {
        serviceHostBase.Credentials.ServiceCertificate.Certificate = this.certificate;
    }

    public void ApplyDispatchBehavior(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase) { }
    public void Validate(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase) { }
} 
```

扩展元素：

```
public class ServerCertificateServiceBehaviorExtensionElement : BehaviorExtensionElement
{
    [ConfigurationProperty("applicationPolicy", IsRequired = true)]
    public string ApplicationPolicy
    {
        get
        {
            return (string)base["applicationPolicy"];
        }
        set
        {
            base["applicationPolicy"] = value;
        }
    }

    [ConfigurationProperty("subjectName", IsRequired = true)]
    public string SubjectName
    {
        get
        {
            return (string)base["subjectName"];
        }
        set
        {
            base["subjectName"] = value;
        }
    }

    [ConfigurationProperty("storeLocation", DefaultValue = 2)]
    public StoreLocation StoreLocation
    {
        get
        {
            return (StoreLocation)base["storeLocation"];
        }
        set
        {
            base["storeLocation"] = value;
        }
    }

    [ConfigurationProperty("storeName", DefaultValue = 5)]
    public StoreName StoreName
    {
        get
        {
            return (StoreName)base["storeName"];
        }
        set
        {
            base["storeName"] = value;
        }
    }

    public override Type BehaviorType
    {
        get { return typeof(ServerCertificateServiceBehavior); }
    }
    protected override object CreateBehavior()
    {
        return new ServerCertificateServiceBehavior(
                this.StoreName, 
                this.StoreLocation, 
                this.SubjectName, 
                this.ApplicationPolicy);
    }
} 
```

配置变为：

```
<behaviors>
  <serviceBehaviors>
    <behavior name="YourServiceBehaviorConfiguration">
      <!-- ... -->
      <serverCertificate storeLocation="LocalMachine"
                         storeName="My"
                         subjectName="host.domain.com"
                         applicationPolicy="1.3.6.1.5.5.7.3.1" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<extensions>
  <behaviorExtensions>
    <add name="serverCertificate" type="Extensions.ServerCertificateServiceBehaviorExtensionElement, Extensions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"/>
  </behaviorExtensions>
</extensions> 
```

# tiles - 动作未从动作中的正向路径转发到瓦片定义

> ID：12108224
> 
> 赞同：0
> 
> 时间：2012-08-24T11:07:55.160
> 
> 标签：tiles, struts-1

我的 struts-config.xml 有一些指向切片定义的前向操作。但是它需要路径，因为它是给定的&不指向tiles-definition.xml&显示路径不是以`"/"`字符 开头

我的 struts-config.xml 是：

```
<?xml version="1.0" encoding="UTF-8"?>    

<!DOCTYPE struts-config PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 1.1//EN" "http://jakarta.apache.org/struts/dtds/struts-config_1_1.dtd">
<struts-config>
   <data-sources />
<form-beans >
   <form-bean name="feelSafeForm" type="com.feelsafe.struts.form.FeelSafeForm" />
</form-beans>
<global-exceptions />
<global-forwards >
   <forward name="login1" path="/feelSafe.do?do=login" />
   <forward name="admin" path="/feelSafe.do?do=admin1" />
</global-forwards>
<action-mappings >
<action
  attribute="feelSafeForm"
  input="/index.jsp"
  name="feelSafeForm"
  parameter="do"
  path="/feelSafe"
  scope="request"
  type="com.feelsafe1.struts.action.FeelSafeAction">

  <forward name="adminmainpage" path="feelsafe.adminmainpage" />
  <forward name="login" path="feelsafe.login" />

 </action>

</action-mappings>

<message-resources parameter="com.feelsafe.struts.ApplicationResources" />

<plug-in className="org.apache.struts.tiles.TilesPlugin">
   <set-property property="definitions-parser-validate" value="true" />
   <set-property property="moduleAware" value="true" />
   <set-property property="definitions-config" value="/WEB-INF/tiles-definition.xml" />
</plug-in>

</struts-config> 
```

瓷砖-definition.xml 是：

```
<!DOCTYPE tiles-definitions PUBLIC
   "-//Apache Software Foundation//DTD Tiles Configuration 1.1//EN"
   "http://struts.apache.org/dtds/tiles-config_1_1.dtd">     
<component-definitions>

<definition name="feelsafe.common" path="/feelsafeLayout/layout.jsp">
   <put name="title" type="string" value="FeelSafe Hospital"/>
   <put name="header1" value="/feelsafeLayout/header.jsp"/>
   <put name="footer1" value="/feelsafeLayout/footer.jsp"/>
</definition>

<definition name="feelsafe.login" extends="feelsafe.common">
   <put name="body1" value="/feelsafeJspFiles/login.jsp"/>
</definition> 

<definition name="feelsafe.admin" extends="feelsafe.common">
   <put name="body1" value="/feelsafeAdminJspFiles/adminlogin.jsp"/>
</definition>

</component-definitions> 
```

调用登录时，控制转到转发标签并给出`500 Error`：

> org.apache.jasper.JasperException：javax.servlet.ServletException：javax.servlet.jsp.JspException：名称 login1 的异常转发：javax.servlet.ServletException：java.lang.IllegalArgumentException：路径 feelsafe.login 不以“ /“ 特点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-23T09:19:23.377

当我从 web.xml 中的操作 servlet 的 init 参数中删除此代码段时，我得到了同样的错误

```
 ...
    <servlet-class>org.apache.struts.action.ActionServlet</servlet-class>
    ...
    <init-param>
        <param-name>chainConfig</param-name>
        <param-value>org/apache/struts/tiles/chain-config.xml</param-value>
    </init-param> 
```

因此，当您使用 1.1 等旧版本的 dtd 时，请尝试将此 init-param to action servlet 添加到您的 web.xml 文件中。我在 1.3 上测试过

# oracle - 在 Oracle 中强制查询超时

> ID：12108225
> 
> 赞同：2
> 
> 时间：2012-08-24T11:07:56.100
> 
> 标签：oracle

我正在寻找[MsSql](https://stackoverflow.com/questions/798192/forcing-a-query-timeout-in-sql-server)`WAITFOR DELAY`中的 oracle 等效项，因此我可以测试当我的脚本超时时会发生什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T11:07:56.100

愚蠢的，输入这个问题给了我完美的谷歌查询，这导致了这个答案：

```
BEGIN
    dbms_lock.sleep(5);
END; 
```

# iphone - 在后台播放音频

> ID：12108228
> 
> 赞同：1
> 
> 时间：2012-08-24T11:08:16.530
> 
> 标签：iphone, objective-c, ios

我在表格视图中显示媒体层次结构。当我在表格视图中点击歌曲时，它会使用 MPMoviePlayerViewController 播放歌曲。但是当我点击完成按钮时，声音停止播放。我创建了以下代码：

```
 NSURL *songUrl=[operationControl getSong:stringId];
    mediaPlayerController = [[MPMoviePlayerViewController alloc] initWithContentURL:songUrl];
    [self presentModalViewController:mediaPlayerController animated:YES];
    [[mediaPlayerController moviePlayer] play]; 
```

我想浏览媒体层次结构以及在后台播放歌曲。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T11:16:55.900

您应该启动 AVAudioSession 并在主 plist 中声明您的应用程序在后台播放音乐。

在 didFinishLaunchingWithOptions 中：

```
 // Setup audio session
  AVAudioSession *sharedSession = [AVAudioSession sharedInstance];
  [sharedSession setCategory:AVAudioSessionCategoryPlayback error:nil]; 
```

在 applicationDidBecomeActive 中：

```
 [sharedSession setActive:YES error:nil]; // FIXME: Error handling 
```

在主 plist 中添加：必需的背景模式 - 应用播放音频

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T11:15:20.937

听起来您没有正确设置音频会话。从

[http://developer.apple.com/iphone/library/documentation/AudioVideo/Conceptual/MultimediaPG/UsingAudio/UsingAudio.html](http://developer.apple.com/iphone/library/documentation/AudioVideo/Conceptual/MultimediaPG/UsingAudio/UsingAudio.html)

例如，当使用默认音频会话时，应用程序中的音频会在自动锁定时间超时并且屏幕锁定时停止。如果要确保在屏幕锁定的情况下继续播放，请在应用程序的初始化代码中包含以下行：

```
NSError *setCategoryErr = nil;
NSError *activationErr  = nil;
[[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayback error:&setCategoryErr];
[[AVAudioSession sharedInstance] setActive:YES error:&activationErr]; 
```

AVAudioSessionCategoryPlayback 类别可确保在屏幕锁定时继续播放。激活音频会话会使指定的类别生效。

# c# - 来自telerik mvc网格的复选框未被选中

> ID：12108232
> 
> 赞同：0
> 
> 时间：2012-08-24T11:08:26.127
> 
> 标签：c#, asp.net-mvc, razor, telerik-mvc

我使用 Telerik mvc 网格中的复选框。我面临的问题是我的复选框在第一次点击时没有被选中。在第二次单击时，它会被选中，但是在单击另一个复选框时，前一个复选框会被取消选中。我该如何解决这个问题。这是我使用的代码：

```
 @(Html.Telerik().Grid<PermissionMappingModel>()
                .Name("mAdministratorpermission-grid")
                .DataKeys(keys => keys.Add(m => m.Id))
                .Editable(editing => editing.Mode(GridEditMode.InCell))
                .ToolBar(commands =>
                {
                    commands.SubmitChanges().ButtonType(GridButtonType.Image).ImageHtmlAttributes(new { style = "margin-left:0" });

                })

                .Columns(columns =>
                {
                    columns.Bound(x => x.Id).Hidden(true);
                    columns.Bound(x => x.CategoryName).ReadOnly(true).Width(125);
                    columns.Bound(x => x.Name).ReadOnly(true).Width(200);
                    columns.Bound(x => x.IsAllowed)

                        .ClientTemplate("<input type='checkbox' name='checkedRecords' value='<#= IsAllowed #>' />").Width(15).Centered();  

                })

                                                                       .DataBinding(
                                                                       dataBinding => dataBinding.Ajax()
                                                                                       .Select("MAdminCustomerPermissionLoad", "Security")
                                                                                       .Update("MAdminSavePermission", "Security")
                                                                                       )

                                                                       .Groupable(grouping => grouping.Groups(groups => { groups.Add(c => c.CategoryName); }).Visible(false))
                                                                       .ClientEvents(events =>
                                                                       {
                                                                           events.OnDataBinding("OnMAdminPermissionViewDataBinding");
                                                                           events.OnSubmitChanges("OnMAdminPermissionSubmit");
                                                                           events.OnEdit("OnMAdminPermissionEdit");
                                                                       })

                                                                       .Sortable()

                                                                   ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:36:53.097

好的，首先你需要改变：

```
.ClientTemplate("<input type='checkbox' name='checkedRecords' value='<#= IsAllowed #>' />") 
```

为了：

```
.ClientTemplate("<input type='checkbox' name='checkedRecords' checked='<#= IsAllowed #>' />") 
```

那应该可以解决您的第一个问题。对于第二个，我可能建议启用多选，如下所示：

```
.Selectable(selection =>
                {
                    selection.Enabled(true);
                    selection.Mode(GridSelectionMode.Multiple);
                }) 
```

但这是一个长镜头。希望这可以帮助

# html - 发生了什么 在 HTML5 中？

> ID：12108236
> 
> 赞同：0
> 
> 时间：2012-08-24T11:08:36.390
> 
> 标签：html

在 HTML5 中，引入了新标签以便更好地定义页面布局。一些标签是页眉、页脚、部分、旁边、导航、文章... 以前，为了定义这些页面部分，使用了 DIV。那么，DIV 现在会发生什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T11:09:56.573

没有什么。

对于没有其他具有更合适语义的元素的情况，它继续作为通用容器元素存在。

# php - Codeigniter：foreach 方法或结果数组？？[模型+视图]

> ID：12108237
> 
> 赞同：4
> 
> 时间：2012-08-24T11:08:51.170
> 
> 标签：php, arrays, codeigniter, model, foreach

我目前正在关注使用 Framework Codeigniter 查看数据库中数据的教程。我学习的方法有很多种。是否有更可靠的方法 - 显示为数组或在视图文件中使用“foreach”？任何意见都会有所帮助。

这是我使用两种方法的代码：

方法一模型：

```
function getArticle(){
    $this->db->select('*');
    $this->db->from('test');
    $this->db->where('author','David');
    $this->db->order_by('id', 'DESC');
    $query=$this->db->get();

    if($query->num_rows() > 0) {
        foreach ($query->result() as $row) {
            $data[] = $row;
        }
        return $data;
    }$query->free_result();
} 
```

}

方法一查看文件：

```
 <?php foreach($article as $row){ ?>
        <h3><?php echo $row->title;  ?></h3>
        <p><?php echo $row->content;  ?></p>
        <p><?php echo $row->author;  ?></p>
        <p><?php echo $row->date; ?></p>
<?php } ?> 
```

方法 2 模型：类 News_model 扩展 CI_Model {

```
function getArticle(){
    $this->db->select('*');
    $this->db->from('test');
    $this->db->where('author', 'David');
    $this->db->order_by('id', 'DESC');
    $query=$this->db->get();

    if ($query->num_rows()>0) { 
        return $query->row_array();
    }
    $query->free_result();
} 
```

方法二查看文件：

```
 <?php echo '<h3>' .$article['title'].'</h3>' ?>
    <?php echo '<p>' .$article['content']. '</p>' ?>
    <?php echo '<p>' .$article['author']. '</p>' ?>
    <?php echo '<p>'. $article['date']. '</p>' ?> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-24T11:57:01.677

我会这样做：

**模型**

```
function getArticle() {
    $this->db->select('*');
    $this->db->from('test');
    $this->db->where('author','David');
    $this->db->order_by('id', 'DESC');
    return $this->db->get()->result();
} 
```

}

**控制器**

```
function get_tests() {
    $data = array(
        'tests' => $this->mymodel->getArticle()
    }
    $this->load->view('myview', $data);
} 
```

**看法**

```
<table>
    <?php foreach($tests as $test) { ?>
    <tr>
        <td><?php echo $test->title;?></td>
        <td><?php echo $test->content;?></td>
        <td><?php echo $test->author;?></td>
        <td><?php echo $test->date;?></td>
    </tr>
</table> 
```

如果您希望使用数组而不是对象，请在模型更改行中

```
return $this->db->get()->result(); 
```

到

```
return $this->db->get()->result_array(); 
```

并在视图中回响

```
<td><?php echo $test['title'];?></td> 
```

附言

在您使用的代码`$query->free_result();`中，它甚至没有运行，因为当您使用关键字时，`return`之后的所有内容都不会被解析。无论如何，没有必要释放结果。

PS2。

您使用`if($query->num_rows() > 0) {`但没有该`else`部分，这意味着它也没有必要。如果您不向视图中的 foreach 语句返回任何行，则不会出现任何错误。

# .net - 我们可以将xelement传递给wcf吗，我的意思是作为参数，如果不能，那么如何将xml文档传递给wcf

> ID：12108240
> 
> 赞同：0
> 
> 时间：2012-08-24T11:08:54.827
> 
> 标签：.net, wcf

我创建了一个 WCF 服务，其中一个操作方法包含 XElement 作为参数。我得到一个异常，如下所示

**IXmlSerializable 类型“System.Xml.Linq.XElement”不能在部分信任下反序列化，因为它没有公共无参数构造函数**

我们可以将 xelement 传递给 wcf，我的意思是作为参数，如果不能，那么如何将 xml 文档传递给 wcf。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:21:24.757

尝试使用`XmlElement`而不是`XElement`，这应该适用于完全和部分信任（这似乎是你的情况）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:12:10.053

如果您想将 XML 数据作为参数传递，请使用字符串，或者如果您的 XML 具有固定结构，请创建适当的（或生成）DataContract 类并使用强类型参数。

# php - 数据库中的 FadeIn 内容被一些 php 抓取

> ID：12108243
> 
> 赞同：1
> 
> 时间：2012-08-24T11:09:01.160
> 
> 标签：php, jquery, mysql, fadein

这段代码（带有另一个 php 文件）从数据库中抓取一些内容并将其放入名为 about_content 的 div 中。

```
$(document).ready(function(){
        $('a#about-menu').click(function() {
            var id = $('a#about-menu').attr('class');

            $.post('subpages/content_about/about_content.php',{id: id}, function(id){

                $('div#about_content').text(id)
            });
        });
}); 
```

一切正常，但你能告诉我如何修改它，让这些东西淡入淡出，而不是直接被打进去……我不确定如何在这种情况下使用 fadeIn 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:10:44.400

尝试..

```
$('div#about_content').css('opacity', '0').text(id).fadeIn(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T16:37:56.580

你可以做

```
 $('div#about_content').hide();
   $('div#about_content').html(id);
   $('div#about_content').fadeIn(1000); 
```

没有测试，所以我不确定你可以试试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T16:47:36.210

这会淡出现有内容，然后替换内容并淡入！

```
$(document).ready(function(){
    $('a#about-menu').click(function() {
        var id = $('a#about-menu').attr('class');
        $.post('subpages/content_about/about_content.php',{id: id}, function(id){
            $('div#about_content').fadeOut('fast',function(){ $(this).html(id).fadeIn(); });
        });
    });
}); 
```

[演示](http://jsfiddle.net/Mvwj9/)

# asp.net - 在 sharepoint 2010 中的可视 webpart 之间传递值

> ID：12108250
> 
> 赞同：1
> 
> 时间：2012-08-24T11:09:46.450
> 
> 标签：asp.net, sharepoint-2010

我是 SharePoint 新手，但在 asp.net Web 应用程序开发方面有更好的经验。我正在使用 Visual Studio 开发 SharePoint 应用程序。我创建了两个可视化 webpart - 1\. StudentPersonalDetails：添加学生的个人详细信息和 2\. StudentCourseDetails：添加学生的课程详细信息。在 StudentPersonalDetails 中单击保存时，它会将数据添加到列表 - ListPersonalDetails。当在 StudentCourseDetails 中单击保存时，它应该将数据添加到列表 - ListCourseDetails。ListCouseDetails 包含要从 StudentPersonalDetails 传递到 StudentCourseDetails 的 StudentID。

我怎样才能做到这一点？我正在使用 Visual Studio 2010 进行应用程序开发。SharePoint 2010 中是否有使用会话变量、视图状态变量或查询字符串的做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:24:50.377

您似乎想要进行 Web 部件通信。此功能在 SharePoint 中可用，您可以在此处查看执行此操作的示例。

[http://msdn.microsoft.com/en-us/library/ff597538.aspx](http://msdn.microsoft.com/en-us/library/ff597538.aspx)

您还可以通过单击编辑菜单在 Web 部件上看到此选项，并且在 Web 部件选项上有一个连接选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:05:03.793

这里有一些链接；可能对你有帮助。最好将此问题移至 sharepoint.stackexchange.com

[http://msdn.microsoft.com/en-us/vstudio/ff623014.aspx](http://msdn.microsoft.com/en-us/vstudio/ff623014.aspx)

[http://blogs.msdn.com/b/bethmassi/archive/2010/01/28/creating-a-sharepoint-visual-web-part-using-visual-studio-2010.aspx](http://blogs.msdn.com/b/bethmassi/archive/2010/01/28/creating-a-sharepoint-visual-web-part-using-visual-studio-2010.aspx)

视频： [http ://www.youtube.com/watch?v=mFHQYQIMVPk](http://www.youtube.com/watch?v=mFHQYQIMVPk)

[http://blogs.msdn.com/b/bethmassi/archive/2010/01/28/creating-a-sharepoint-visual-web-part-using-visual-studio-2010.aspx](http://blogs.msdn.com/b/bethmassi/archive/2010/01/28/creating-a-sharepoint-visual-web-part-using-visual-studio-2010.aspx)

# php - mod_rewrite 和 {QUERY_STRING}

> ID：12108253
> 
> 赞同：0
> 
> 时间：2012-08-24T11:09:51.460
> 
> 标签：php, apache, .htaccess, mod-rewrite, query-string

更改了我的网址

```
http://www.website.com/b.php?n=45&t=example 
```

对此

```
http://www.website.com/45/example 
```

通过使用这个 mod_rewrite

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?([^/]+)/(.*) /b.php?n=$1&b=$2 [L,QSA] 
```

如何让我的查询字符串仍然有效，因为我想使用 $_GET

```
echo '<img src="gifs/' . $_GET["t"] . '/' . $_GET["n"] . '.gif">'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:31:07.517

您可以使用以下 .htaccess 代码将完整的 url 发送到 b.php 文件，在那里您可以使用**explode**函数拆分 url 并可以单独获取查询字符串

```
Options +FollowSymLinks
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/* b.php?url=%{REQUEST_URI} [L,NC,QSA] 
```

# windows - JavaFX 2 不做脏区优化吗？

> ID：12108262
> 
> 赞同：0
> 
> 时间：2012-08-24T11:10:19.867
> 
> 标签：windows, animation, javafx-2, frame-rate

我正在使用的测试应用程序如下所示：http: [//imgur.com/hlMRO](http://imgur.com/hlMRO)。它有 3 个`ImageViews`被移动，在带有剪贴蒙版`TranslateTransition`的 a 内部。`Pane`

在我看来，只有剪贴蒙版内的区域需要重新绘制，无论窗口大小如何，它的大小都是相同的。然而，当我最大化我的应用程序窗口时，FPS 显着下降（从 ~500 fps 到 ~180 fps）（即使帧率在技术上应该仍然足够高，动画也会变得不稳定）。

（注意：我知道有一个设置可以控制它。我设置它的方式似乎没有任何区别。）

JavaFX 2 是否没有进行适当的脏区优化？或者这是我的视频驱动程序或视频卡的神器？

# c# - 如何在metroUI的webview上显示下载的内容

> ID：12108264
> 
> 赞同：2
> 
> 时间：2012-08-24T11:10:20.670
> 
> 标签：c#, webview, microsoft-metro, windows-runtime

我想在我的 webview 上显示一些下载的内容（如图像、视频、css 等）。但是，我只能在我的项目中显示文件或 www.contents 中的内容。我已经尝试过 ms-appdata 方案，但它仍然没有显示任何内容。

ps：下载的内容在我的applicationdata文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T07:46:50.397

首先，您不需要使用 WebView 来显示下载的项目。
其次，要引用 Application Data 文件夹中的文件，您需要使用**正确的 Uri 方案**，在这种情况下：

```
ms-appdata:///local/ 
```

有一篇很好的文章描述了在您的 Windows 8 应用程序中使用的可用 Uri 方案：
[URI 方案](http://msdn.microsoft.com/en-us/library/windows/apps/jj655406.aspx)

# alfresco - Alfresco New Production（服务器）系统安装

> ID：12108268
> 
> 赞同：1
> 
> 时间：2012-08-24T11:10:32.003
> 
> 标签：alfresco

我将在一个新的生产系统（服务器系统）中安装 Alfresco。那么系统（服务器）配置需要满足以下要求吗？

以下是我的要求：

*   用户数=100
*   每天无单据交易=1000
*   所需吞吐量=3.472222

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T08:47:58.233

这取决于您使用的是哪种服务器。[这是](http://wiki.alfresco.com/wiki/Server_Installation)Alfresco wiki 上关于在各种服务器上安装 alfresco 的文章列表。

为了获得更好的性能，您需要进行 JVM 调优。[这是](https://wiki.alfresco.com/wiki/JVM_Tuning)关于它的文章。

# java - 在 Java 中运行命令行？

> ID：12108275
> 
> 赞同：-5
> 
> 时间：2012-08-24T11:10:53.290
> 
> 标签：java, windows

> **可能重复：**
> [在 Java 中运行命令行](https://stackoverflow.com/questions/8496494/running-command-line-in-java)

有没有办法在 Java 应用程序中运行这个命令行？

```
cd "C:\Program Files\myfolder\"&&"C:\Program Files\Java\jre6\bin\java.exe" -jar myjar.jar 
```

我可以用命令运行它，但我不能在 Java 中执行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:18:32.553

在 Java 中，您可以使用 Runtime.getRuntime().exec("yourcommand") 来运行命令行参数。

[http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html)

但是，我建议使用比您当前正在做的更便携的引用方式。

如果您想在运行时加载类而不是调用 java 程序，也可以使用 Java 6 Compiler API。

[http://www.javabeat.net/2007/04/the-java-6-0-compiler-api/](http://www.javabeat.net/2007/04/the-java-6-0-compiler-api/)

# perl - 不本地化循环变量会产生不同的结果

> ID：12108277
> 
> 赞同：2
> 
> 时间：2012-08-24T11:11:06.420
> 
> 标签：perl, closures

当我输入以下代码并运行它时，它会输入**<FONT COLOR='foo'></FONT>**。但是，当我添加`my`到循环变量 ( `for my $name (@colors)`) 时，它会键入预期的**<FONT COLOR='red'></FONT>**。谁能解释为什么？

```
@colors = qw(red blue green yellow orange purple violet);
$name = 'foo';
for $name (@colors) {
  no strict 'refs';
  *$name = sub { "<FONT COLOR='$name'></FONT>" };
}
print red(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T11:22:40.767

在您的循环中，您创建了几个潜艇。这些子程序可以看到创建它们的上下文的所有变量。

如果我们使用局部/全局变量，sub 将始终看到最新的值（将变量插值到字符串中不会发生在编译时或“定义时”，而是在 sub 执行时发生。）在我们的情况下，循环*外*的当前值为`foo`。

如果我们使用带有 的词法变量`my`，我们在循环内使用的变量在循环外是不可见的，在循环的所有其他迭代中也是不可见的。但是，它仍然对子本身可见。这称为闭包。闭包仅适用于词法变量，并且是实现信息隐藏或构造专门定制的子类的强大方法，如示例代码中的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T11:44:57.063

闭包捕获变量，而不是值。

可以将`for my $x`其视为每次通过循环创建一个新变量。内部子程序捕获此变量，而不是类似名称的包变量，其值永远不会从`foo`.

当您删除 时`my`，只会创建一个变量（一个包变量），因此在循环中创建的每个 sub 都引用同一个变量（其值从`foo`to`red`到`blue`to ... to `violet`to `foo`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T11:29:47.317

for 循环中使用的变量有一些魔力。对于循环的每次迭代，它被设置为适当的值。循环结束后， $name 设置为它的旧值。基本上，您创建的每个子程序都会看到相同的变量，这会改变它的值。我已经修改了你的例子来证明这一点：

```
@colors = qw(red blue green yellow orange purple violet);
$name = 'foo';
for $name (@colors) {
  no strict 'refs';
  *$name = sub { "<FONT COLOR='$name'></FONT>" };
  print $name . &{$name} . "\n";
}
print red() . "\n"; 
```

您可以通过使用如下函数定义局部变量来创建它`my`：

```
for my $name (@colors) { 
```

根据经验，您应该始终`use strict;`在您的程序中执行变量的初始化。

# xamarin.ios - MonoTouch.Dialog 使用任意元素上的事件进行导航

> ID：12108278
> 
> 赞同：0
> 
> 时间：2012-08-24T11:11:08.237
> 
> 标签：xamarin.ios, monotouch.dialog

如何使用事件导航回来（比如说 Tapped for String 元素）？以编程方式

```
Section s =  someelement.Parent as Section;
RootElement re =  s.Parent as RootElement;
// how to get to DialogViewControler or something to navigate back? 
```

谢谢

梅尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T22:25:49.100

这里很新，但您不想使用`NavigationController`来做到这一点吗？我猜你`DialogViewController`在你的活动实施的地方？所以你可以这样做：

```
this.NavigationController.PopViewControllerAnimated(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T00:59:57.330

如果您的 DVC 在 NavController 中，Baramuse 的答案将起作用。但是 MTD 可以在导航控制器样式和模式对话框样式中使用。你最好让 MTD 为你工作（所以如果将来有任何变化，你的代码仍然可以工作）。[仅提供`DialogViewController`方法](https://github.com/migueldeicaza/MonoTouch.Dialog/blob/master/MonoTouch.Dialog/DialogViewController.cs)：

```
 /// <summary>
    /// Dismisses the view controller.   It either pops or dismisses
    /// based on the kind of container we are hosted in.
    /// </summary>
    public void DeactivateController (bool animated)
    {
        var parent = ParentViewController;
        var nav = parent as UINavigationController;

        if (nav != null)
            nav.PopViewControllerAnimated (animated);
        else
            DismissModalViewControllerAnimated (animated);
    } 
```

# .net - 实体框架搜索

> ID：12108279
> 
> 赞同：0
> 
> 时间：2012-08-24T11:11:12.440
> 
> 标签：.net, entity-framework-4

我目前有一个搜索，可以让我过滤产品，以获得多种组合。

例如，我可能从所有产品开始，然后按类别或热门商店进行选择 - 每次选择过滤器时它都会简单地处理数据，显示每种过滤器的总数以及仍然可用的可能选择。用户可以多次执行此操作以进入他们的最终列表。

我是第一次与 EF 合作，搜索将有大约 10k 产品开始。

与 Linq2Sql 或 SP 相比，使用 EF 的主要区别在于它不仅获取数据，而且同时实现它们，虽然抓取页面数据需要 60 毫秒，但 10k 产品需要 4 秒。虽然这听起来不是很多，但每次用户刷新搜索时我都不能这样做。

我可以缓存数据，但这确实在上限阈值或服务器场方面限制了应用程序，尽管它现在符合要求。

然而，我想知道除了创建一个定制的 SP 之外是否有更好的方法来实现这一点。我不想使用 javascript，因为它是网站运行的基础。

有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:14:25.503

您不应该加载所有 10k 产品。如果您需要提取类别等，请单独执行，并且只提取您所在当前页面所需的数据量。这意味着所有工作都将在 SQL 服务器上完成，应用程序只能处理它需要的数据量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:16:58.207

使用一些支持分页的控件。

然后在您的选择查询中相应地使用`.Skip()`and 。`.Take()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T17:37:45.107

重构代码，以便不需要导航属性。这将查询的表数从 3 个减少到 1 个，并给出可接受的结果。

# sql - 使用通配符从 Oracle 上的单个表中选择多个列

> ID：12108280
> 
> 赞同：0
> 
> 时间：2012-08-24T11:11:13.657
> 
> 标签：sql, oracle, oracle11g

我在 Oracle 上有一个表 TABLE_A，它有多个以 X 开头的列。例如。Xxaa、xxyyy、aax 等。现在我想选择以 X 开头的字段。有没有使用通配符的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T11:27:43.570

您可以通过动态 SQL 构建查询，然后按照您认为合适的方式运行它：

```
declare
  SQL_QUERY   varchar2(4000);
begin
  select    'select '
         || LISTAGG(CNAME, ',') within group (order by CNAME)
         || ' from table_a'
    into SQL_QUERY
    from COL
   where TNAME = 'TABLE_A' and CNAME like 'X%';

  dbms_output.PUT_LINE(SQL_QUERY);
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:13:31.320

不，你不能那样做。您需要“手动”列出每一列。

（顺便说一句：这听起来像是一个非常奇怪的要求，它*可能*表明设计不佳-但这很难根据您提供的信息来判断）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T11:19:09.793

有点，但你必须在元表（syscolumns thingies）中使用它们，然后构建一个查询然后执行它。做一个更好的设计比那样脆弱的东西更容易。

# jquery - 识别输入文本类型的最佳实践

> ID：12108282
> 
> 赞同：0
> 
> 时间：2012-08-24T11:11:27.340
> 
> 标签：jquery, html, frontend

我有一种输入文本必须触发“keydown”上的功能。为了识别这种类型的输入，我使用了 ID #autocomplete。所以

```
$('#autocomplete').keydown(function(){
   //function autocomplete
}); 
```

问题是我在同一个页面中有两次输入，所以 jquery 搜索第一个 id，而忽略第二个。（我使用的是旧的 jquery 版本，1.3）。

我改用**$("input#autocomplete")**解决了它。它有效，但它是最佳实践吗？我猜ID必须是唯一的。我可以改用*类*或*名称*，但两者都对代码的其他部分有影响（*类*对设计，*名称*对服务器部分接收表单参数）。

哪个是最好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:12:34.967

一个确实`id`应该是[**唯一**](http://www.w3.org/TR/html401/struct/global.html#h-7.5.2)的`document`。如果你真的不能让它独一无二，另一种选择是你的选择器，或者添加一个`class`，`input`然后选择它作为`$(.class)`。

> id 属性为元素分配一个唯一标识符（可以由 SGML 解析器验证）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T11:14:32.520

如果您对它们对 和 的影响有疑问或`class`由于`name`它们的影响，您总是可以使用属性。`design``server`

```
<input data-id="my-id"/> 
```

然后像这样选择它

```
$("[data-id=my-id]") 
```

具有`data-`前缀的自定义属性是 HTML5 中的标准。

# c++ - 如何在 qtslot 中调用我的函数？

> ID：12108283
> 
> 赞同：1
> 
> 时间：2012-08-24T11:11:27.977
> 
> 标签：c++, qt, signals-slots

我试图将我的函数称为 Qt 中的函数槽，但我不知道该怎么做。似乎以下方法是错误的：

更新：根据一个答案，我更新了我的源代码，但显然还是有问题。尝试编译这段代码会导致这些错误：

> C2515：'没有合适的默认构造函数可用。'

和

> C2665: QObject::connect': 3 个重载都不能转换所有参数。'

分别在 Visual Studio 2010 中。

```
#include <QtGui/QApplication>
#include <QPushButton>
#include <QObject>
#include <QMessageBox>

class myclass;
int main(int argc,char *argv[])
{
    QApplication a(argc,argv);

    QPushButton btnshowmessage("show");
    myclass *my=new myclass();
    QObject::connect(&btnshowmessage,SIGNAL(clicked()),my,SLOT(warningmessage()));
    btnshowmessage.show();
    return a.exec();
}
//////////////////////////////////////////////////////////////////////////
class myclass: public QObject
{
Q_OBJECT
public:myclass(){}

        public slots:
            void warningmessage()
            {
                QMessageBox::warning(0,"Warning","Test Message!",QMessageBox::Ok);
            }
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T11:18:22.600

您使用信号和插槽将一个*对象的*信号连接到另一个*对象的*插槽。每个信号或槽都应该在一个类中，该类也必须从`QObject`类派生并包含`Q_OBJECT`宏。

因此，要使您的代码正常工作，请将插槽放入您的某个类中：

```
class MySlotClass:public QObject
{
Q_OBJECT
public slots:
void MyFunction()
    {
        QMessageBox::warning(0,"WarningTest","This is a waring text message",QMessageBox::Ok);
    }
} 
```

并像这样连接：

```
MySlotClass m = new MySlotClass();
Qobject::connect(&btnShowaMessageBox,SIGNAL(clicked()), &m ,SLOT(MyFunction())); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T11:16:59.817

目前，Qt 不允许将信号连接到未在某些 QObject 派生上声明为槽的函数。我相信[Qt5 可能会提供这种可能性](http://woboq.com/blog/new-signals-slots-syntax-in-qt5.html)，但 connect 将有不同的语法来允许这样做。

基本上你的槽函数必须在一个 QObject 派生类中并在一个

```
public slots: 
```

部分。

阅读[有关信号/插槽的文档](http://doc.qt.nokia.com/4.7-snapshot/signalsandslots.html)。

# programming-languages - 哪些编程语言支持真正的跨平台软件互操作性？

> ID：12108285
> 
> 赞同：1
> 
> 时间：2012-08-24T11:11:34.587
> 
> 标签：programming-languages, interop, cross-platform

首先，我不想**煽动**任何狂热或燃烧的战争，就像我的语言比你的好。

我的问题是哪些编程语言支持在它们上编写的软件在最常见的平台（MacOS、Windows、Linux）之间的**真正**互操作性，而该特定软件没有高比例的重写以使其在另一个平台上工作。

我不希望收到狂热的答案。请提供有效答案，例如“ **Java**支持各种操作系统之间的互操作性，**因为*** *xyz* *”或“ **Python**支持，**因为*** *abc* *”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:16:25.440

Python + PyQt 是真正的跨平台，因为要运行 .py 脚本，您需要在系统中安装 Python 解释器，这在所有操作系统上都是一样的。PyQt 也是跨平台的，可以在您提到的这三个系统中拥有漂亮的原生外观。

# jpa - JPA查询多对一可为空的关系

> ID：12108286
> 
> 赞同：0
> 
> 时间：2012-08-24T11:11:40.930
> 
> 标签：jpa, jpa-2.0

我有以下实体，并想寻求有关如何从关系双方查询选定属性的帮助。这是我的模型。假设所有表都在数据库中正确创建。我使用的 JPA 提供程序是 Hibernate。

```
@Entity
public class Book{

@Id
private long id; 
@Column(nullable = false)
private String ISBNCode;

@ManyToOne(cascade = CascadeType.DETACH, fetch = FetchType.LAZY, optional = false)
private Person<Author> author;

@ManyToOne(cascade = CascadeType.DETACH, fetch = FetchType.LAZY, optional = true)
private Person<Borrower> borrower;

}

@Inheritance
@DiscriminatorColumn(name = "personType")
public abstract class Person<T>{

@Id
private long id;

@OneToOne(cascade = CascadeType.ALL, fetch = FetchType.EAGER)
private Info information;

}

@Entity
@DiscriminatorValue(PersonType.Author)

public class Author extends Person<Author> {

private long copiesSold;
}

@Entity
@DiscriminatorValue(PersonType.Borrower)

public class Borrower extends Person<Borrower> {

.....
}

@Entity

public class Info {

@Id
private long id;
@Column(nullable=false)
private String firstName;
@Column(nullable=false)
private String lastName;
......;

} 
```

如您所见， book 表与不可为空的 Person 和可空的 Person 具有多对一关系。

我需要以表格格式显示以下内容 -

```
ISBNCode - First Name - Last Name - Person Type 
```

如何编写一个 JPA 查询，让我只选择我想要的属性。我想从 Book 中获取属性 ISBN 代码，然后从与 Person 对象相关的 Info 对象中获取名字和姓氏，而后者又与 Book 对象相关。我不想从 Info 对象中获取所有信息，只对选定的信息感兴趣，例如在这种情况下的名字和姓氏。

请注意，Borrower 和 Book 之间的关系标记为 optional=true，这意味着可能有一本书可能还没有被某人借过（显然它有一个作者）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:43:32.387

搜索作者“Marc”的书籍的示例：

标准 JPA 标准

```
CriteriaQuery<Book> criteria = builder.createQuery( Book.class );  
Root<Book> personRoot = criteria.from( Book.class );  
Predicate predicate = builder.conjunction();
List<Expression<Boolean>> expressions = predicate.getExpressions();  
Path<Object> firtsName = personRoot.get("author").get("information").get("firstName");
expressions.add(builder.equal(firtsName, "Marc"));
criteria.where( predicate );  
criteria.select(personRoot); 
List<Book> books = em.createQuery( criteria ).getResultList(); 
```

标准 JPA 休眠

```
List<Book> books = (List<Book>)sess.createCriteria(Book.class).add( Restrictions.eq("author.information.firstName", "Marc") ).list(); 
```

为了方便和可能性，我们建议使用休眠标准。

问候，

# php - 随机化子服务器

> ID：12108290
> 
> 赞同：1
> 
> 时间：2012-08-24T11:12:00.207
> 
> 标签：php, arrays, clipbucket

我正在使用一个视频脚本，我想随机化 url thumbs：有一个 common.php 定义了 thumbs dir 和 url 的全局变量：

```
define('THUMB_FILES_DIR',' ');
define('THUMB_FILES_URL','');
define('THUMBS_DIR',THUMB_FILES_DIR.'/thumbs');
define('THUMBS_URL',THUMB_FILES_URL.'/thumbs'); 
```

获得拇指的功能是：

```
 /**
     * FUNCTION USED TO GET THUMBNAIL
     * @param ARRAY video_details, or videoid will also work
     */

function get_thumb($vdetails,$num='default',$multi=false,$count=false,$return_full_path=true,$return_big=true,$size=false){
        global $db,$Cbucket,$myquery;
        $num = $num ? $num : 'default';
        #checking what kind of input we have
        if(is_array($vdetails))
        {
            if(empty($vdetails['title']))
            {
                #check for videoid
                if(empty($vdetails['videoid']) && empty($vdetails['vid']) && empty($vdetails['videokey']))
                {
                    if($multi)
                        return $dthumb[0] = default_thumb();
                    return default_thumb();
                }else{
                    if(!empty($vdetails['videoid']))
                        $vid = $vdetails['videoid'];
                    elseif(!empty($vdetails['vid']))
                        $vid = $vdetails['vid'];
                    elseif(!empty($vdetails['videokey']))
                        $vid = $vdetails['videokey'];
                    else
                    {
                        if($multi)
                            return $dthumb[0] = default_thumb();
                        return default_thumb();
                    }
                }
            }
        }else{
            if(is_numeric($vdetails))
                $vid = $vdetails;
            else
            {
                if($multi)
                    return $dthumb[0] = default_thumb();
                return default_thumb();
            }
        }

        #checking if we have vid , so fetch the details
        if(!empty($vid))
            $vdetails = $myquery->get_video_details($vid);

        if(empty($vdetails['title']))
        {
            if($multi)
                    return default_thumb();
            return default_thumb();
        }

        #Checking if there is any custom function for
        if(count($Cbucket->custom_get_thumb_funcs) > 0)
        {

            foreach($Cbucket->custom_get_thumb_funcs as $funcs)
            {

                //Merging inputs
                $in_array = array(
                'num' => $num,
                'multi' => $multi,
                'count' => $count,
                'return_full_path' => $return_full_path,
                'return_big' => $return_big
                );
                if(function_exists($funcs))
                {
                    $func_returned = $funcs($vdetails,$in_array);
                    if($func_returned)
                    return $func_returned;
                }
            }
        }

        #get all possible thumbs of video
        if($vdetails['file_name'])
        $vid_thumbs = glob(THUMBS_DIR."/".$vdetails['file_name']."*");
        #replace Dir with URL
        if(is_array($vid_thumbs))
        foreach($vid_thumbs as $thumb)
        {
            if(file_exists($thumb) && filesize($thumb)>0)
            {
                $thumb_parts = explode('/',$thumb);
                $thumb_file = $thumb_parts[count($thumb_parts)-1];

                if(!is_big($thumb_file) || $return_big)
                {
                    if($return_full_path)
                        $thumbs[] = THUMBS_URL.'/'.$thumb_file;
                    else
                        $thumbs[] = $thumb_file;
                }
            }elseif(file_exists($thumb))
                unlink($thumb);
        }

        if(count($thumbs)==0)
        {
            if($count)
                return count($thumbs);
            if($multi)
                    return $dthumb[0] = default_thumb();
            return default_thumb();
        }
        else
        {
            if($multi)
                return $thumbs;
            if($count)
                return count($thumbs);

            //Now checking for thumb
            if($num=='default')
            {
                $num = $vdetails['default_thumb'];
            }
            if($num=='big' || $size=='big')
            {

                $num = 'big-'.$vdetails['default_thumb'];
                if(!file_exists(THUMBS_DIR.'/'.$vdetails['file_name'].'-'.$num.'.jpg'))
                $num = 'big';               
            }

            $default_thumb = array_find($vdetails['file_name'].'-'.$num,$thumbs);

            if(!empty($default_thumb))
                return $default_thumb;
            return $thumbs[0];
        }

    }

    /**
     * Function used to check weaether given thumb is big or not
     */
    function is_big($thumb_file)
    {
        if(strstr($thumb_file,'big'))
            return true;
        else
            return false;
    }
    function GetThumb($vdetails,$num='default',$multi=false,$count=false)
    {

        return get_thumb($vdetails,$num,$multi,$count);
    }

    /**
     * function used to get detaulf thumb of ClipBucket 
     */
    function default_thumb()
    {
        if(file_exists(TEMPLATEDIR.'/images/thumbs/processing.png'))
        {
            return TEMPLATEURL.'/images/thumbs/processing.png';
        }elseif(file_exists(TEMPLATEDIR.'/images/thumbs/processing.jpg'))
        {
            return TEMPLATEURL.'/images/thumbs/processing.jpg';
        }else
        return BASEURL.'/files/thumbs/processing.jpg';
    } 
```

我想以这种方式随机化从中提供图像的拇指 url `http://img[random number].domainname`

如果我使用拇指 url 的值创建一个数组，然后将结果随机播放到

```
define('THUMB_FILES_DIR',' ');
define('THUMB_FILES_URL',''); 
```

所有拇指都将具有相同的 url 值如何将不同的值传递给 html 页面？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-24T11:47:47.367

您需要使用函数，而不是为拇指 url 使用全局变量。然后它可以在调用时随机选择一个 URL。

# php - 列数与第 1 行的值计数与 2 个相同长度的数组不匹配

> ID：12108294
> 
> 赞同：0
> 
> 时间：2012-08-24T11:12:11.690
> 
> 标签：php, mysql, save

我正在尝试保存到数据库，我需要实现一个系统，用户可以在该系统中指定数据必须保存在给定表的哪些字段中。

在我的测试中，我尝试了以下方法，一切正常：

```
$v = $rowdata; // array with the data to be saved
$r =  "field1,field2,field3"; // fields of the table in which to save 
```

然后我准备了带有字段名称的数组，并将其放入以前的结构中：

```
$v = $rowdata; // data to be saved
$r = $tablefields; // fields of the table to populate 
```

但随后我收到以下消息：

```
Column count doesn't match value count at row 1 
```

我检查了 print_r 并且两个数组（$rowdata 和 $tablefields）具有完全相同数量的元素。知道为什么我会收到此错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:16:05.633

你需要在 php中使用[implode函数：](http://php.net/manual/en/function.implode.php)

```
$r = implode(",", $tablefields); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:33:03.120

或者

```
$r = array('field1', 'field2', 'field3'); 
```

# delphi - 提取文件摘要信息的问题

> ID：12108295
> 
> 赞同：2
> 
> 时间：2012-08-24T11:12:11.893
> 
> 标签：delphi, winapi, delphi-xe

对不起，我的英语不好，但我希望你能理解我的问题。我在使用 WinAPI 函数时遇到问题`StgOpenStorageEx`。我需要获取文件的摘要信息。我找到了一些解决方案，但在所有解决方案中我都需要使用`StgOpenStorageEx`. 因为它不在标准模块中，所以我自己声明它是从 ole32.dll 中导出的，如下所示

```
function StgOpenStorageEx (
  const pwcsName : POleStr;  //Pointer to the path of the
                             //file containing storage object
  grfMode : LongInt;         //Specifies the access mode for the object
  stgfmt : DWORD;            //Specifies the storage file format
  grfAttrs : DWORD;          //Reserved; must be zero
  pStgOptions : Pointer;     //Address of STGOPTIONS pointer
  reserved2 : Pointer;       //Reserved; must be zero
  riid : PGUID;              //Specifies the GUID of the interface pointer 
  out stgOpen :              //Address of an interface pointer
  IStorage ) : HResult; stdcall; external 'ole32.dll'; 
```

接下来我需要像这样使用这个功能

```
 var
        res, open: hresult;
        stg: IStorage;
        PropSetStg: IPropertySetStorage;
        PropStg: IPropertyStorage;
        FileName: string;

    const
        IID_IPropertySetStorage : TGUID =     '{0000013A-0000-0000-C000-000000000046}';
        FmtID_SummaryInformation: TGUID =     '{F29F85E0-4FF9-1068-AB91-08002B27B3D9}';

    function StgOpenStorageEx (
     const pwcsName : POleStr;  //Pointer to the path of the
                                //file containing storage object
     grfMode : LongInt;         //Specifies the access mode for the object
     stgfmt : DWORD;            //Specifies the storage file format
     grfAttrs : DWORD;          //Reserved; must be zero
     pStgOptions : Pointer;     //Address of STGOPTIONS pointer
     reserved2 : Pointer;       //Reserved; must be zero
     riid : PGUID;              //Specifies the GUID of the interface pointer
     out stgOpen :              //Address of an interface pointer
     IStorage ) : HResult; stdcall; external 'ole32.dll';
     ...
     implementation
     ...
     FileName:=OpenDialog1.FileName;
     res:=StgOpenStorageEx(PWideChar(FileName),
        STGM_READ or STGM_SHARE_DENY_WRITE,
        STGFMT_FILE,
        0, nil,  nil, @IID_IPropertySetStorage, stg);
     OleCheck(res);

     PropSetStg := Stg as IPropertySetStorage;

     open:=PropSetStg.Open(FmtID_SummaryInformation,
        STGFMT_FILE or STGM_READ or STGM_SHARE_EXCLUSIVE, PropStg); //open=-2147287038 
     OleCheck(open); // EOleSysError "%1 could not be found
     ... 
```

根据指令`OLECheck(Open)`，我有一个 EOleSysError“找不到 %1”。 `Open`返回 -2147287038

请告诉我我做错了什么 [带有完整功能代码的文章](http://www.tek-tips.com/viewthread.cfm?qid=992447)

IDE：Embarcadero® Delphi® XE 版本 15.0.3890.34076

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:24:45.377

此代码片段使用 STGFMT_ANY，尽管它处于禁止状态。 [http://forum.sources.ru/index.php?showtopic=115495](http://forum.sources.ru/index.php?showtopic=115495)

也许这是要走的路，如果它确实有效。（该代码在 unicode Delphi 之前使用。需要应用升级到 Unicode 感知 Delphi 的常规检查和简化）

该片段使用*StringToOleStr*而不是 typecast，因为即使在 Delphi XE2 中，该功能仍然不仅仅是 typecast 存根 - 它可能会有所不同。

该片段还区分了具有内部属性的文件（如 DOC、XLS、MSC 文件）和那些仅“可能”被 Vista 中的 NTFS-5 包装到外部属性中的文件。例如，对于 DOC 和 JPEG 文件，STGFMT_* 常量应该不同。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa380330.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380330.aspx)

# javascript - 给予用户第二次尝试

> ID：12108299
> 
> 赞同：0
> 
> 时间：2012-08-24T11:12:17.497
> 
> 标签：javascript, jquery

在我的拼写游戏中，有一个网格，里面有要拼写的单词。用户会在网格中获得一个突出显示的区域以及一些线索，例如图片和诸如“猫”之类的单词的声音。

然后，用户应该单击网格一侧的相应字母以获得正确答案。

如果用户正确拼写了单词，单词会淡出以显示后面的图像部分。游戏的目的是正确拼写所有单词并显示整个图像

如果用户拼写错误的单词，则应用了一种样式使其呈红色发光，然后应在 2 秒后消失，并且应给予他/她再次尝试拼写该单词的尝试。

目前，当一个单词拼写错误时，样式似乎会使该单词发出红色光，但在 2 秒后它不会消失，并且用户不会再次看到该单词。

我已经使用这行代码在 2 秒后摆脱了样式...

```
$('.drop-box.spellword').removeClass('wordglow wordglow3 wordglow4', "2000"); 
```

由于某种原因它不起作用

添加样式的脚本在这里...

```
if (!$('.drop-box.spellword:not(.occupied)').length) {
            var wordIsCorrect = 0;
            $('.drop-box.spellword').each(function() {
                if ($(this).attr("data-letter") == $(this).find("div").attr("data-letter")) {
                    wordIsCorrect++;
                }
            });
            console.log(wordIsCorrect);
            console.log($('.drop-box.spellword').length);
            if ($('.drop-box.spellword').length == wordIsCorrect) {

                $('.drop-box.spellword').addClass('wordglow2');
                $(right).val('Well Done!');
                $(right).show();
                audioS.play();
                $('.counter').html(completeWords + '/6').show();
                $(wrong).hide();
                $('.minibutton').prop('disabled', false);

            } else {

                $('.drop-box.spellword').addClass("wordglow4").css('color', 'transparent');
                $(wrong).val('Try Again');
                $('.minibutton').prop('disabled');
                $(wrong).show();
                audioF.play();
                $('.counter').html(completeWords + '/6').show();
                $(right).hide();
                $('.minibutton').prop('disabled', true);   

            } 
```

为了给用户另一次尝试，我认为您可以使用类似这样的东西..

```
$('.drop-box.spellword').splice(0, $('.drop-box.spellword').length); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:24:30.607

jQuery 的[removeClass](http://api.jquery.com/removeClass/)不支持将第二个参数视为计时器，但您可以使用 setTimeout() 手动执行此操作：

```
setTimeout(function() {
    $('.drop-box.spellword').removeClass('wordglow wordglow3 wordglow4');
}, 2000); 
```

至于再给用户一次尝试，你为什么要使用`splice()`？不是每个带有类 drop-box.spellword 的元素都是带有单独字符串的文本输入吗？在这种情况下，您可以使用`$('.drop-box.spellword').val('')`清除该类的所有输入。

**编辑：**

要从其他子项中删除类，请将其修改为以下内容：

$('.drop-box.spellword').removeClass('wordglow4'); $('.drop-box.spellword').children('.ui-widget-content').removeClass('wordglow')

jsFiddle 真的很大，所以我不确定 wordglow3 应用在哪里，但原理是一样的，找到元素并从中 removeClass()，都在你的定时函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:24:34.507

要在 2 秒后删除该类，请使用以下命令：

```
setTimeout(function(){
  $('.drop-box.spellword').removeClass('wordglow wordglow3 wordglow4')
},2000) 
```

`removeClass`在删除课程之前不接受任何关于延迟的论点。
我不确定您要对 执行什么操作，但是我可以看到的一个错误是您在通话`splice`中忘记了`$`before 。`('.drop-box.spellword')``splice()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T11:25:51.497

您必须使用 javascript 的 setTimeout 函数，因为 jQuery 的 removeClass 不接受超时参数。
此外， removeClass 一次只删除一个类，因此您必须将它们链接起来。

尝试替换这个：

```
$('.drop-box.spellword').removeClass('wordglow wordglow3 wordglow4', "2000"); 
```

为了这：

```
setInterval(
   function(){
       $('.drop-box.spellword').removeClass('wordglow').removeClass('wordglow3').removeClass('wordglow4');
   }, 2000
); 
```

# java - 从按钮数组中返回选择

> ID：12108307
> 
> 赞同：1
> 
> 时间：2012-08-24T11:12:54.140
> 
> 标签：java, swing, jbutton

我有一个从 AZ 创建按钮的数组，但我想在返回按下按钮的方法中使用它。

这是我的按钮原始代码：

```
String  b[]={"A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"};
for(i = 0; i < buttons.length; i++)
{
    buttons[i] = new JButton(b[i]);
    buttons[i].setSize(80, 80);
    buttons[i].setActionCommand(b[i]);
    buttons[i].addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e) {
            String choice = e.getActionCommand();
            JOptionPane.showMessageDialog(null, "You have clicked: "+choice);
        }
    });
    panel.add(buttons[i]);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:23:51.513

*   `ActionListener`可以返回（每个`Listeners`在 Swing 中）`Object`代表`JButton`

*   由此`JButton`你可以确定，`getActionCommand()`或者`getText()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T14:03:58.607

我不确定你的问题是什么，所以我有几个答案：

1.  如果您想将按钮创建拉入一个方法 - 请参阅`getButton`示例中的方法

2.  如果您想在单击时访问实际按钮，您可以通过使用`ActionEvent.getSource()`方法（未显示）或在声明期间将按钮标记为最终按钮（如示例所示）来实现。从那里你可以用按钮做任何你想做的事情。

3.  如果您的问题是“我如何创建一个接收一组字母并将最后点击的按钮返回给我的方法”，您应该修改您的问题以明确说明这一点。我没有在这里回答这个问题，因为除非您有非常特殊的情况，否则这可能不是解决您正在处理的问题的好方法。您可以解释为什么需要这样做，我们可以提出更好的替代方案。

例子：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class TempProject extends Box{
    /** Label to update with currently pressed keys */
    JLabel output = new JLabel();

    public TempProject(){
        super(BoxLayout.Y_AXIS);
        for(char i = 'A'; i <= 'Z'; i++){
            String buttonText = new Character(i).toString();
            JButton button = getButton(buttonText);
            add(button);
        }
    }

    public JButton getButton(final String text){
        final JButton button = new JButton(text);
        button.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent e) {
                JOptionPane.showMessageDialog(null, "You have clicked: "+text);
                //If you want to do something with the button:
                button.setText("Clicked"); // (can access button because it's marked as final)
            }
        });
        return button;
    }

    public static void main(String args[])
    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
                frame.setContentPane(new TempProject());    
                frame.pack();
                frame.setVisible(true);
                new TempProject();
            }
        });
    }   
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T11:22:20.200

我不确定您到底想要什么，但是如何将键存储在队列中（例如 a `Deque<String>`）以及需要轮询已按下的按钮的任何方法查询该队列。这样，您还可以获得按钮按下的顺序。

或者，您可以在每个按钮（或调度事件的中央按钮）上注册其他操作侦听器，以在触发事件时接收事件。我可能更喜欢这种方法，但这取决于您的确切要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T11:43:14.647

尝试将动作侦听器更改为此

```
 JOptionPane.showMessageDialog(null, "You have clicked: "+((JButton)e.getSource()).getText()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T18:00:11.217

**1.**首先，当您将创建按钮时，请将其上的文本从 A 设置为 Z。

**2.**现在，当您的 GUI 准备就绪时，您单击按钮，提取按钮上的文本，然后显示您已单击此按钮的消息。

**例如：**

我正在向您展示，您将如何提取按下的按钮的名称，我正在使用该`getText()`方法

```
butt.addActionListener(new ActionListener(){

   public void actionPerformed(ActionEvent e)
       {

       JOptionPane.showMessageDialog(null, "You have clicked: "+butt.getText());

       }

   }); 
```

# javascript - 通过单击主菜单外部关闭子菜单在 IE 中不起作用，但在 Firefox 和 Chrome 中起作用

> ID：12108311
> 
> 赞同：0
> 
> 时间：2012-08-24T11:12:59.560
> 
> 标签：javascript, jquery, html, css

`ul`我有一个 javascript 代码，它使用和`li`元素制作的子菜单关闭 mwnu 。

打开一个子菜单，如果我在页面的其他区域或菜单之外单击，则必须关闭该子菜单。

此脚本仅适用于 Firefox 和 Chrome，但不适用于 IE。

JS代码：

```
$(function(){
    $(".item").on("click focusout", function(){
        $(".test").toggleClass("no-display");
    });       

    $(document).on("click", function(e){
        if(!$(".test").hasClass("no-display") && $(e.originalEvent.target).closest(".mega").length === 0) {
            $(".test").addClass("no-display");
        }
    });
}); 
```

和 HTML 代码：

```
<ul class="mega">
    <li>Item1</li>
    <li class='item'>Item2
        <ul class='test no-display'>
            <li>SubItem1</li>
            <li>SubItem2</li>
        </ul>
    </li>
    <li>Item3</li>
</ul> 
```

更好的是，我提供[Jsfiddle](http://jsfiddle.net/xemhT/1/)来查看实际问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:28:56.817

这是我认为更简单的一种方法：

```
$("html").click(function() {
    if(!$(".test").hasClass("no-display")) {
        $(".test").addClass("no-display");
    }
});
$(".test").click(function(event) {
    event.stopPropagation();
});
$(".item").click(function() {
    $(".test").toggleClass("no-display");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:33:00.533

也许您可以为此使用**stopPropagation()**。像这样写：

```
var box = $('.item');
        var sub = $('.test');

        box.click(function() {
            sub.show(); return false;
        });

        $(document).click(function() {
            sub.hide();
        });

        box.click(function(e) {
            e.stopPropagation();
        }); 
```

​</p>

检查更多[http://jsfiddle.net/xemhT/2/](http://jsfiddle.net/xemhT/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T11:19:59.020

使用以下代码：

```
$(document).click(function(){
    if( $('.test').is(':visible') ) {
        $('.test').hide();
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T11:22:54.563

我会用 BODY 点击监听器试试这个，它在 IE 中对我有用：

```
jQuery('body').click(function(event) {
    var target = jQuery(event.target);
    // your code
}); 
```

# android - 如何在 ActionBarSherlock 上设置共享选项？

> ID：12108319
> 
> 赞同：1
> 
> 时间：2012-08-24T11:13:31.773
> 
> 标签：android, actionbarsherlock, shareactionprovider

我使用以下方法在我的 ActionBarSherlock 中包含了 Share：

```
LayoutInflater inflater = getLayoutInflater();
        final View view = inflater.inflate(R.layout.share,
                null, false);

menu.add("Share")
    .setIcon(R.drawable.ic_title_share_default)
    .setActionView(view1)
    .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM| MenuItem.SHOW_AS_ACTION_WITH_TEXT); 
```

和 share.xml 是：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/share_action_provider"
        android:actionProviderClass="com.actionbarsherlock.widget.ShareActionProvider"
        android:icon="@drawable/ic_title_share_default"
        android:showAsAction="ifRoom"
        android:title="Share"/>

</menu> 
```

我怎样才能将所有默认选项作为下拉菜单？像蓝牙、消息传递、facebook、linkedin 等以及它们的默认实现？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-24T11:16:17.680

如果我没记错的话，您应该将您不想作为操作显示在 ActionBar 中的选项菜单设置为：`android:showAsAction="never".`然后，这将自动强制显示溢出菜单并在那里显示您的选项。

# php - 如何从 DOMNodeList 中获取原始数据

> ID：12108324
> 
> 赞同：3
> 
> 时间：2012-08-24T11:13:50.563
> 
> 标签：php, domdocument

我有一个`DomDocument`，这是不可能的`var_dump`（这真的让我很生气）我这样做：

```
var_dump($dom->getElementsByTagName('url')); 
```

在这样的回应中：

```
<?xml version="1.0" ?>
<rss version="2.0">
  <channel>
      <url>beaute-mode/cheveux/11460--choisir-un-headband</url>
      <title>get_url_article</title>
      <host>myhost</host>
  </channel>
</rss> 
```

但是我得到了`var_dump`回显：`object(DOMNodeList)[262]`而不是我的原始数据（这是一个 URL）。

**所以我的问题很简单，但是如何在不被封装的情况下获取原始数据`DomNodeList`？**

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T11:15:04.293

[`DOMNodeList::item()`](http://php.net/manual/en/domnodelist.item.php)将`DOMNode`在`DOMNodeList`by 索引中给出一个。例如，要获取列表中的第一个节点：

```
$dom->getElementsByTagName('url')->item(0) 
```

要获取元素包含的实际数据，请使用如下代码：

```
if ($node = $dom->getElementsByTagName('url')->item(0)) {
  $url = $node->nodeValue;
} else {
  // Element does not exist, handle error here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:40:39.157

`DomNode`PHP 本身——即使在 PHP 5.4 中宣布了改进——在显示和的结构信息方面也不是很好`DomNodeList`。

您可以执行我在类似问题[Debug a DOMDocument Object in PHP](https://stackoverflow.com/questions/684227/debug-a-domdocument-object-in-php)中概述的操作：

```
$doc = new DOMDocument();
$doc->loadXML($xml);
DomTree::dump($doc->getElementsByTagName('url')); 
```

这将输出以下内容：

```
`<url>
  `"beaute-mode/cheveux/11460--choisir-un-headband" 
```

[您可以在我的这个 Gist 中](https://gist.github.com/3449600)找到源代码。

# javascript - 日期格式“dd-My”的正则表达式是什么

> ID：12108332
> 
> 赞同：2
> 
> 时间：2012-08-24T11:14:32.163
> 
> 标签：javascript, asp.net, regex

日期格式的正则表达式是什么`'01-Aug-12'.`

我`dd-M-y`在 asp.net 应用程序中有日期格式，并希望从`asp.net regular expression validator control`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T11:19:50.033

一个非常基本的格式检查将是：

```
\d{2}-[A-Za-z]{3}-\d{2} 
```

[在这里](http://regexr.com?31ubr)亲自看看。

要实际验证，我们需要像@Brijesh Gandhi 建议的那样进行一天检查，然后添加一个完整的月份列表，如下所示：

```
([12]\d|0[1-9]|3[0-1])-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-\d{2} 
```

如果你想允许小写月份`aug`，你可以像这样添加不区分大小写的修饰符`?i:`......

```
([12]\d|0[1-9]|3[0-1])-(?i:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-\d{2} 
```

...但这也将允许一个月，例如`aUg`- 仅允许第一个字符为大写或小写可能是最正确的。

```
([12]\d|0[1-9]|3[0-1])-([Jj]an|[Ff]eb|[Mn]ar|[Aa]pr|[Mm]ay|[Jj]un|[Jj]ul|[Aa]ug|[Ss]ep|[Oo]ct|[Nn]ov|[Dd]ec)-\d{2} 
```

[在此处](http://regexr.com?31ucj)查看此最终版本。

**请注意，这仍然不会检测到 2012 年 2 月 30 日这样的无效日期。**不接受这些特殊日期的正则表达式将非常长/难看。即使使用 Javascript 的`Date.parse(...)`/`new Date(...)`也无助于检测这些，因为它很乐意接受上述不存在的日期，并返回 3 月 1 日。因此，要 100% 正确，您需要自己进行复杂的编码，或者使用像[datejs](http://www.datejs.com/)这样的库。

**编辑 1：**缩短了@Brijesh Gandhi 的一天检查时间，更新了 Regexr 链接。

**编辑2：**关于正确性的评论。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T11:16:41.533

为什么是正则表达式？我会使用它来验证它

```
DateTime.TryParse(...) 
```

无论如何，正则表达式的基本形式可能是

```
[0-3][0-9]-[A-Z][a-z][a-z]-[0-9][0-9] 
```

这总比没有好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-24T13:09:18.827

这不会太优雅，但如果你想使用正则表达式来验证日期，它在这里：

## 带有解释的正则表达式

```
(
  (
    31-(Jan|Mar|May|Jul|Aug|Oct|Dec)|                                   # months with 31 days
    (0[1-9]|[12]\d|30)-(Jan|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)|   # months with 30 or 31 days
    (0[1-9]|1\d|2[0-8])-Feb                                             # February up to 28th
  )
  -\d\d                                                                 # any two digits represent the year
)|
(
    29-Feb-([02468][048]|[13579][26])                                   # February 29th
) 
```

此正则表达式不接受无效日期，例如`00-Aug-00`,`32-Aug-00`并且`29-Feb-01`接受包括闰日 ( `29-Feb-04`) 在内的有效日期。**请注意**，我们假设`00`代表年份`2000`，而不是`1900`。所以，我们接受`29-Feb-00`了闰日！

## 在一行中：

看看它[在行动](http://regexr.com?31ucv)：

```
((31-(Jan|Mar|May|Jul|Aug|Oct|Dec)|(0[1-9]|[12]\d|30)-(Jan|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)|(0[1-9]|1\d|2[0-8])-Feb)-\d\d)|(29-Feb-([02468][048]|[13579][26])) 
```

## 不区分大小写

在[Javascript](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)中，添加一个`i`作为第二个参数：

```
var re = new RegExp(regexStr, "i"); 
```

在 ASP.NET 中，使用[RegexOptions.IgnoreCase](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regexoptions.aspx)：

```
Regex re = new Regex(regexStr,RegexOptions.IgnoreCase); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-24T13:56:48.423

正则表达式绝对不是这里的路。如果日期无效，我们可以做一个简单[`Date.Parse`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/parse)的返回。`NaN`

```
var myDate = '01-Aug-12​';
var isValidDate = !isNaN( Date.parse( myDate )); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-24T11:42:25.537

试试这个正则表达式

```
([1-2][0-9]|[0][1-9]|[3][0-1])-[a-zA-Z][A-Za-z][a-zA-Z]-[0-9][0-9] 
```

`00-aug-12`根据此正则表达式，日期无效`[0-3][0-9]-[A-Z][a-z][a-z]-[0-9][0-9]`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-24T11:24:36.427

这是日期格式的每种组合的正则表达式`dd-MMM-yy`：

```
[0123][0-9]-[JFMASOND][aepuco][nbrylgptvc]-[0-9][0-9] 
```

请注意月份部分过于严格，而您仍然可以提供无效的日期。也许最好尝试解析日期并检查它是否有效。

# iphone - iPhone :- 单击按钮时自动向下滚动

> ID：12108346
> 
> 赞同：3
> 
> 时间：2012-08-24T11:15:22.047
> 
> 标签：iphone, ios, xcode

我在这里搜索了很多，但我无法做到。

基本上，我想向下滚动，即向下滚动以检查我正在使用的优惠券图像是否可用。这是通过单击按钮启动的。

这就是我创建滚动视图的方式：

```
UIScrollView   *scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 20, 320, 440)];
    scrollView.contentSize = CGSizeMake(320,500);

[self.view addSubView:scrollView]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T11:23:52.760

```
-(void)movedown
{
 [scrollView setContentOffset:CGPointMake(0,500) animated:YES];
} 
```

它可用于在 y 方向上向下移动最多 500，就像您希望从 500`scrollView.contentSize = CGSizeMake(320,500);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T11:25:16.317

```
- (IBAction) yourBtnInScrollViewPressed : (id) sender
{
    [yourScrollView scrollRectToVisible:CGRectMake(x, y, yourScrollView.frame.size.width, yourScrollView.frame.size.height) animated:YES];
} 
```

您可以在按下按钮时根据需要更改 UIScrollView 位置。

```
- (IBAction) yourBtnInScrollViewPressed : (id) sender
{
    [yourScrollView setContentOffset:CGSizeMake(x,y)];
    //set Your x and Y coordinates as you required.
} 
```

您可以更改 UIScrollView 的当前代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T11:25:41.923

我发表了一篇关于自动滚动 UIScrollViews 的相当不错的帖子。也许它可以帮助你一点。

[UITableView 以一定的速度滚动流畅？](https://stackoverflow.com/questions/3979119/uitableview-scroll-smooth-with-certain-speed/7774732#7774732)

祝你好运 ;）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T11:18:57.397

```
-(IBAction)scrolldown
{

[scrollView setContentOffset:CGSizeMake(100,30)]; //change 30 if you want to see below images.

} 
```

# javascript - 无论 JSON 对象是否有多个数组，都循环遍历 JSON 项

> ID：12108359
> 
> 赞同：2
> 
> 时间：2012-08-24T11:16:37.070
> 
> 标签：javascript, arrays, json

我有一个函数的工作版本来遍历 JSON 对象中的单个数组，例如

```
[{
    "Name": "John",
    "Surname": "Johnson"
}, {
    "Name": "Peter",
    "Surname": "Johnson"
}] 
```

示例功能：

```
function FindName(NameToFind, data1) {

    objData = JSON.parse(data1);

    for (var i = 0; i < objData.length; i++) {

        var Name = objData[i].Name;

        if (Name == NameToFind) {
            alert("found!");
        }
    }
} 
```

现在我需要更改此函数以允许单个或多个数组，例如

```
{
    "Table1": [{
        "Name": "John",
        "Surname": "Johnson"
    }, {
        "Name": "Peter",
        "Surname": "Johnson"
    }],

    "Table2": [{
            "Name": "Sarah",
            "Surname": "Parker"
        },
        {
            "Name": "Jonah",
            "Surname": "Hill"
        }
    ]
} 
```

有没有办法确定对象是否有 1 个数组（如第一个示例）或多个数组（如第二个示例），以及有关如何扩展函数以能够遍历所有项目的任何建议/指导它有 1 个数组还是多个数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T11:23:20.273

你的第一个对象是一个数组，第二个不是。

你可以测试你的论点[是否是一个数组](https://stackoverflow.com/questions/4775722/javascript-check-if-object-is-array)，甚至只是测试

```
if (objData[0]) // that's an array 
```

**编辑：** 如果你想遍历一个（只是 json 解码）对象的所有属性，当它不是一个数组时，你可以这样做：

```
for (var key in objData) {
    var value = objData[key];
    // now use the key and the value
    // for example key = "Table1"
    // and value = [{"Name":"John","Surname":"Johnson"}, ... ]
} 
```

# android - 安卓语音识别服务忙吗？

> ID：12108361
> 
> 赞同：7
> 
> 时间：2012-08-24T11:16:42.780
> 
> 标签：android, speech-recognition

我从我的应用程序中使用 Android 语音识别服务。

事实证明，当两个客户端尝试同时发送请求时（例如，用户从一个应用程序启动了一次语音搜索，然后在搜索仍处于活动状态时切换到另一个应用程序，并启动了另一个搜索），服务停止工作.

有没有办法确定正在进行语音识别会话，以便我可以拒绝开始另一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-05T16:07:08.320

您可能应该在 onError 处理程序中捕获 ERROR_RECOGNIZER_BUSY ：

```
@Override
public void onError(int error) {
  switch (error) {
    case SpeechRecognizer.ERROR_RECOGNIZER_BUSY:
      // do something reasonable
    …
  }
} 
```

您最有可能（仅？）收到开始收听的请求；不幸的是，我不知道有任何方法可以在不尝试的情况下测试这种情况（例如，我认为您无法预先检测到另一个进程的侦听器处于活动状态以移除麦克风按钮）

（在停止监听时，如果你试图以某种方式杀死另一个进程的监听器，你只会得到这个错误。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-13T20:02:21.247

我收到此错误（ERROR_RECOGNIZER_BUSY）并发现我的意图设置中缺少该包。所以我刚刚添加了这一行，它现在可以工作了：

```
Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
...
intent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE, context.getPackageName()); 
```

# sql-server-2008 - SQL Server 2008 中的表值参数

> ID：12108367
> 
> 赞同：0
> 
> 时间：2012-08-24T11:16:59.497
> 
> 标签：sql-server-2008

我正在尝试在 SQL Server 2008 中创建表类型，但出现此错误：

> *消息 156，级别 15，状态 1，第 1 行
> 关键字“AS”附近的语法不正确。*

但我没有发现任何问题。

这是代码：

```
CREATE TYPE DeptType AS TABLE
(
    DeptId INT, DeptName VARCHAR(30)
);
GO 
```

请告诉我哪里出错了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:25:34.467

只需指定数据库名称或模式名称并尝试。

```
CREATE TYPE dbo.DeptType AS TABLE
(
    DeptId INT, DeptName VARCHAR(30)
);
GO 
```

# sql-server - 为什么要在桌面应用程序中关闭数据库连接

> ID：12108368
> 
> 赞同：2
> 
> 时间：2012-08-24T11:17:02.287
> 
> 标签：sql-server, winforms, database-connection, desktop-application, database-security

当用户登录时。我打开连接“conn”，它是一个公共静态成员，我的 dbclass 具有与数据库相关的所有功能。然后**conn 保持打开状态，直到应用程序关闭**

它不会显着降低应用程序性能，但会显着**提高数据库查询性能**。

**有什么安全问题**吗？如果数据库是集中式的，两台或三台PC使用独立的应用程序，那么登录时打开连接会出现什么安全问题？

或者未来还有什么问题需要解决？

**编辑**回复第一条评论

我检查了timespan.totalmilliseconds。涉及打开和执行查询的时间比仅在连接已经打开时执行查询的时间少两倍

**编辑 --- 需要的实际答案**。

如果有人有充分的理由告诉我不存在安全问题，或者有充分的理由告诉我这是主要的安全问题。在等待其他人的回应后，这将被接受。

**通过谷歌搜索，我没有找到任何与我的问题相关的文章/答案。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:37:42.750

我能想到的第一个问题是无论出于何种原因连接关闭（防火墙？）的情况。

如果您保持连接打开并且由于某种原因连接被迫关闭，您的程序将需要重新启动才能再次使用。但是，如果您只在需要进行查询时打开连接，请再次关闭它。即使连接已关闭，您的程序也会在需要进行新查询时尝试重新连接。

这是假设我们正在谈论访问单个数据库的单台计算机。如果我们谈论的是更多人可以访问的数据库，那么从不关闭连接将在某些时候导致主机出现问题（达到最大连接数）。更不用说它会多么容易受到攻击，导致您的连接数在几秒钟内达到最大值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:19:41.140

风险是连接字符串可能被盗。即使您将 SqlConnection 对象声明为私有。您应该最小化用户权限。也可以加密连接字符串。但无论如何，我认为这是不安全的。

# android - 如何在片段中设置内容视图？

> ID：12108370
> 
> 赞同：37
> 
> 时间：2012-08-24T11:17:09.997
> 
> 标签：android, android-fragments, android-view

现在我有这个片段，我想使用 setContentView 但到目前为止我找不到如何。您可以在下面的代码中看到我的案例，我没有尝试扩展布局，而是尝试将其与名为 SampleView 的视图一起使用。那么我该怎么做呢？提前致谢

```
public class largeImageScroller extends SherlockFragment {

// Physical display width and height.
private static int displayWidth = 0;
private static int displayHeight = 0;

/** Called when the activity is first created. */
public View onCreateView(LayoutInflater inflater, ViewGroup group, Bundle saved) {

        getActivity();
        // displayWidth and displayHeight will change depending on screen
        // orientation. To get these dynamically, we should hook onSizeChanged().
        // This simple example uses only landscape mode, so it's ok to get them
        // once on startup and use those values throughout.

        Display display = ((WindowManager)
getActivity().getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
        displayWidth = display.getWidth();             
        displayHeight = display.getHeight();    

        // SampleView constructor must be constructed last as it needs the
        // displayWidth and displayHeight we just got.
        setContentView(new SampleView(this));
}

private static class SampleView extends View {
        private static Bitmap bmLargeImage; //bitmap large enough to be scrolled
        private static Rect displayRect = null; //rect we display to
        private Rect scrollRect = null; //rect we scroll over our bitmap with
        private int scrollRectX = 0; //current left location of scroll rect
        private int scrollRectY = 0; //current top location of scroll rect
        private float scrollByX = 0; //x amount to scroll by
        private float scrollByY = 0; //y amount to scroll by
        private float startX = 0; //track x from one ACTION_MOVE to the next
        private float startY = 0; //track y from one ACTION_MOVE to the next

        public SampleView(Context context) {
                super(context);

                // Destination rect for our main canvas draw. It never changes.
                displayRect = new Rect(0, 0, displayWidth, displayHeight);
                // Scroll rect: this will be used to 'scroll around' over the
                // bitmap in memory. Initialize as above.
                scrollRect = new Rect(0, 0, displayWidth, displayHeight);

                // Load a large bitmap into an offscreen area of memory.
                bmLargeImage = BitmapFactory.decodeResource(getResources(),
                        R.drawable.ground_floor_b);
        }

        @Override
        public boolean onTouchEvent(MotionEvent event) {

                switch (event.getAction()) {
                        case MotionEvent.ACTION_DOWN:
                                // Remember our initial down event location.
                                startX = event.getRawX();
                                startY = event.getRawY();
                                break;

                        case MotionEvent.ACTION_MOVE:
                                float x = event.getRawX();
                                float y = event.getRawY();
                                // Calculate move update. This will happen many times
                                // during the course of a single movement gesture.
                                scrollByX = x - startX; //move update x increment
                                scrollByY = y - startY; //move update y increment
                                startX = x; //reset initial values to latest
                                startY = y;
                                invalidate(); //force a redraw
                                break;
                }
                return true; //done with this event so consume it
        }

        @Override
        protected void onDraw(Canvas canvas) {

                // Our move updates are calculated in ACTION_MOVE in the opposite direction
                // from how we want to move the scroll rect. Think of this as dragging to
                // the left being the same as sliding the scroll rect to the right.
                int newScrollRectX = scrollRectX - (int)scrollByX;
                int newScrollRectY = scrollRectY - (int)scrollByY;

                // Don't scroll off the left or right edges of the bitmap.
                if (newScrollRectX < 0)
                        newScrollRectX = 0;
                else if (newScrollRectX > (bmLargeImage.getWidth() - displayWidth))
                        newScrollRectX = (bmLargeImage.getWidth() - displayWidth);

                // Don't scroll off the top or bottom edges of the bitmap.
                if (newScrollRectY < 0)
                        newScrollRectY = 0;
                else if (newScrollRectY > (bmLargeImage.getHeight() - displayHeight))
                        newScrollRectY = (bmLargeImage.getHeight() - displayHeight);

                // We have our updated scroll rect coordinates, set them and draw.
                scrollRect.set(newScrollRectX, newScrollRectY,
                        newScrollRectX + displayWidth, newScrollRectY + displayHeight);
                Paint paint = new Paint();
                canvas.drawBitmap(bmLargeImage, scrollRect, displayRect, paint);

                // Reset current scroll coordinates to reflect the latest updates,
                // so we can repeat this update process.
                scrollRectX = newScrollRectX;
                scrollRectY = newScrollRectY;
        }
}
} 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-08-24T11:18:58.827

你不调用`setContentView`片段，实际上你需要返回一个`View`from `onCreateView`。

尝试更换：

```
setContentView(new SampleView(this)); 
```

有了这个：

```
return new SampleView(this); 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-08-24T11:22:15.463

返回您要使用的视图实例：

```
 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.ads_tab, container, false);
    } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-24T11:34:11.347

`getActivity()`此外，从调用也不安全`onCreateView()`。确保您在 . 或之后调用它`onActivityCreated()`，因为此时您`Fragment`已与`Activity`. 检查`Fragment`的生命周期。

[碎片](http://developer.android.com/guide/components/fragments.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-05-11T04:10:50.053

如前所述，您需要在片段的情况下返回视图。但是，如果您想像使用它一样使用它`setContentView()`，您可以按照以下方式进行操作。

1.把这段代码放在你必须放的地方`setContentView()`

```
View v = inflater.inflate(R.layout.activity_home, container, false); 
```

2.现在，如果您想从 xml 文件中访问某些内容，可以使用

```
chart = v.findViewById(R.id.chart); 
```

3.最后`OnCreateView()`你必须把

```
return v; 
```

完整示例：

```
 public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {

    View v = inflater.inflate(R.layout.activity_home, container, false);

    chart = v.findViewById(R.id.chart);

    return v;
   } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-24T11:24:00.317

在活动中，我们需要使用`setContentView(R.layout.main)`

在片段中，我们需要覆盖`onCreateView()`以设置所需的视图。

# java - 使用 java 连接到 ibm mq 7.5 的问题

> ID：12108372
> 
> 赞同：2
> 
> 时间：2012-08-24T11:17:17.617
> 
> 标签：java, ibm-mq

我对ibm mq很陌生，发现和mb相关的文档或书籍很少，我唯一找到的就是2004年写的《WebSphere MQ Using Java》。但是现实世界已经发生了很大的变化。我根据[this在redhat linux 64位上成功安装并验证了mq server 7.5](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/index.jsp?topic=/com.ibm.mq.doc/lq10440_.htm)

我还创建了队列管理器`myqm1`、队列`LQ.TEST`、通道`JAVA.CHANNEL`，并通过服务器上的命令行进行了一些测试，以确保它们运行良好。但是，当我在 windows xp 上安装 mq 客户端并在 java 代码下面编写时，它总是抛出一个`exception:com.ibm.mq.MQException: MQJE001: Completion Code '2', Reason '2035'`

我的代码：

> 导入 com.ibm.mq.*；导入 com.ibm.mq.constants.MQConstants；
> 
> /** * 简单示例程序 */ public class MQSample {
> 
> ```
> // code identifier
> static final String sccsid = "@(#) MQMBID sn=p000-L120604 su=_H-IvIK4nEeGko6IWl3MDhA pn=MQJavaSamples/wmqjava/MQSample.java";
> 
> // define the name of the QueueManager
> private static final String qManager = "myqm1";
> // and define the name of the Queue
> private static final String qName = "LQ.TEST";
> 
> /**
>  * Main entry point
>  *
>  * @param args - command line arguments (ignored)
>  */
> public static void main(String args[]) {
>     try {
>         MQEnvironment.hostname = "58.2.221.196"; 
>         MQEnvironment.channel = "JAVA.CHANNEL"; 
>         MQEnvironment.port = 1414;
>         MQEnvironment.properties.put(MQC.TRANSPORT_PROPERTY, MQC.TRANSPORT_MQSERIES);
>         MQEnvironment.userID = "mqm"; 
>         MQEnvironment.password = "mqm";
>         MQEnvironment.CCSID = 1208;
> 
>         // Create a connection to the QueueManager
>         System.out.println("Connecting to queue manager: " + qManager);
>         MQQueueManager qMgr = new MQQueueManager(qManager);
> 
>         // Set up the options on the queue we wish to open
>         int openOptions = MQConstants.MQOO_INPUT_AS_Q_DEF | MQConstants.MQOO_OUTPUT;
> 
>         // Now specify the queue that we wish to open and the open options
>         System.out.println("Accessing queue: " + qName);
>         MQQueue queue = qMgr.accessQueue(qName, openOptions);
> 
>         // Define a simple WebSphere MQ Message ...
>         MQMessage msg = new MQMessage();
>         // ... and write some text in UTF8 format
>         msg.writeUTF("Hello, World!");
> 
>         // Specify the default put message options
>         MQPutMessageOptions pmo = new MQPutMessageOptions();
> 
>         // Put the message to the queue
>         System.out.println("Sending a message...");
>         queue.put(msg, pmo);
> 
>         // Now get the message back again. First define a WebSphere MQ
>         // message
>         // to receive the data
>         MQMessage rcvMessage = new MQMessage();
> 
>         // Specify default get message options
>         MQGetMessageOptions gmo = new MQGetMessageOptions();
> 
>         // Get the message off the queue.
>         System.out.println("...and getting the message back again");
>         queue.get(rcvMessage, gmo);
> 
>         // And display the message text...
>         String msgText = rcvMessage.readUTF();
>         System.out.println("The message is: " + msgText);
> 
>         // Close the queue
>         System.out.println("Closing the queue");
>         queue.close();
> 
>         // Disconnect from the QueueManager
>         System.out.println("Disconnecting from the Queue Manager");
>         qMgr.disconnect();
>         System.out.println("Done!");
>     } catch (MQException ex) {
>         ex.printStackTrace();
>         System.out.println("A WebSphere MQ Error occured : Completion Code " + ex.completionCode
>                 + " Reason Code " + ex.reasonCode);
> 
>     } catch (java.io.IOException ex) {
>         System.out.println("An IOException occured whilst writing to the message buffer: " + ex);
>     }
>     return;
> } } 
> ```

任何人都可以向我阐明这一点吗？我完全崩溃了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T16:48:20.897

为了扩展 Shashi 的答案，从 WMQ V7.1 开始，默认的 CHLAUTH 规则会阻止所有 SVRCONN 通道上的所有访问，*并且*它们会阻止所有 SVRCONN 通道上的管理访问。如果您真的想连接到`JAVA.CHANNEL`as`mqm`那么您将需要覆盖*这两种*行为。

如果您实际上愿意允许使用管理用户 ID 与 QMgr 进行未经身份验证的远程连接，那么您可以选择完全禁用 CHLAUTH 规则。您可以通过发出`ALTER QMGR CHLAUTH(DISABLED)`命令来执行此操作，`runmqsc`但是非常不鼓励这样做，因为它使 QMgr 对使用 WMQ 管理用户 ID 的匿名远程代码执行开放。然而，这似乎是你想要做的。

推荐的方法是使用 *非*管理 ID。例如，如果你`mquser`用一个私有组调用了一个 ID，`mquser`那么你可以授予它在 QMgr 上连接和查询的权限，并打开指定的队列进行 put、get、浏览和查询。由于 ID 不是管理 ID，因此在未经身份验证的频道上使用相对安全。您可以更改代码以将 ID 指定为`mquser`，`mqm`然后使用 CHLAUTH 规则来允许连接。例如：

```
SET CHLAUTH('JAVA.CHANNEL') TYPE(USERMAP) +
    CLNTUSER('mquser') USERSRC(MAP) +
    MCAUSER('mquser') ACTION(ADD) 
```

上面的规则告诉 QMgr “当你看到来自`mquser`ID的连接时`JAVA.CHANNEL`，然后将 MCAUSER 设置为`mquser`并允许连接。”

授予权限时，请记住授予组而不是用户。例如，如果使用`setmqaut`选项`-g`而不是`-p`选项。如果授权错误有任何问题，您可以使用事件消息轻松解决这些问题。首先，使用`ALTER QMGR AUTHOREV(ENABLED)`. 这将导致 QMgr 将事件消息发送到`SYSTEM.ADMIN.QMGR.EVENT`队列中。您可以使用[SupportPac MH05](http://ibm.co/SupptPacMH05)或[SupportPac MS0P](http://ibm.co/SupptPacMS0P)来解析事件消息。对于任何给定的授权事件，消息都会告诉您请求访问的 ID、API 调用（连接、打开、关闭等）、调用对象以及使用的确切选项。

在 WMQ V7.1 之前，WebSphere MQ 允许所有远程连接，甚至是匿名的管理连接。尽管这使您可以轻松连接，但在当今更加恶劣的网络环境中，在 QMgr 的主机服务器上远程匿名执行代码的能力被视为不可接受的安全风险。所以现在一个新的 QMgr 默认设置为不允许*任何*远程管理访问。作为管理员，这要求您明确禁用安全性以获取旧行为或明确提供安全访问。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T16:22:15.170

在 MQ v7.5 中，默认情况下会阻止对队列管理器的访问。您需要为您创建的通道创建通道认证记录，`JAVA.CHANNEL`以允许用户访问队列管理器。请点击此[链接](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r1/topic/com.ibm.mq.doc/zs14190_.htm)了解有关通道认证记录的更多详细信息

# xmlsec - 将 SignedDataObjects（并因此添加 proofOfApproval 属性）添加到封装签名中

> ID：12108373
> 
> 赞同：0
> 
> 时间：2012-08-24T11:17:26.057
> 
> 标签：xmlsec, xades4j

我正在按照以下语句使用 xades4j 创建一个信封签名：

```
Element elemToSign = doc.getDocumentElement();
XadesSigner signer = new XadesTSigningProfile(...).newSigner();
new Enveloped(signer).sign(elemToSign); 
```

但是我还需要在签名中添加其他属性，例如 ProofOfApprova 等...

我看到在 xades4j 示例中，proofOfApprovalProperties 使用不同的签名声明添加到封装签名中，例如：

```
AllDataObjsCommitmentTypeProperty globalCommitment = AllDataObjsCommitmentTypeProperty.proofOfApproval();
CommitmentTypeProperty commitment = CommitmentTypeProperty.proofOfCreation();

DataObjectDesc obj1 = new DataObjectReference('#' + elemToSign.getAttribute("Id"))
    .withTransform(new EnvelopedSignatureTransform())
    .withDataObjectFormat(new DataObjectFormatProperty("text/xml", "MyEncoding")
    .withDescription("Isto é uma descrição do elemento raiz")
    .withDocumentationUri("http://doc1.txt")
    .withDocumentationUri("http://doc2.txt"))
    .withIdentifier("http://elem.root"))
    .withCommitmentType(commitment)
    .withDataObjectTimeStamp(dataObjsTimeStamp)

SignedDataObjects dataObjs = new SignedDataObjects(obj1)
    .withCommitmentType(globalCommitment);

signer.sign(dataObjs, elemToSign); 
```

我在这里看到使用了另一个签名过程，更具体地说，我创建 DataObjectreference 的语句说我对根标签使用“Id”属性对我来说是不可用的，因为在输入中我可以有任何类型的 xml 文档而我不能知道我可以使用哪种属性（如果存在）定义根标签。

简而言之，我可以有一些示例代码，在其中创建信封签名并使用“new Enveloped(signer).sign(elemToSign);”放置 proofOfApproval 属性，或者无论如何都不知道 xml 源结构？

谢谢

M。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:12:51.513

proofOfApproval 属性必须应用于被签名的数据对象，因此需要使用 SignedDataObjects 类。

Enveloped 类只是简单场景的助手。如果我理解正确，您想签署整个 XML 文档。XML-Signatures 规范定义了引用上的空 URI (URI="") 就是这个意思。如果您检查 Enveloped 类上的代码，您会看到它添加了一个带有空 uri的*DataObjectReference 。*

总而言之，您需要以下内容：

```
DataObjectDesc obj1 = new DataObjectReference("")
    .withTransform(new EnvelopedSignatureTransform())
    .withCommitmentType(CommitmentTypeProperty.proofOfApproval());
signer.sign(new SignedDataObjects(obj1), elemToSign); 
```

# c# - 标签空异常

> ID：12108374
> 
> 赞同：-3
> 
> 时间：2012-08-24T11:17:27.813
> 
> 标签：c#, asp.net, c#-4.0

每次我尝试将 发送`HttpContext.Current.User.Identity.Name`到标签时，我都会收到一个空异常。任何想法为什么？

这就是我正在使用的。

```
String Utilizador = Page.User.Identity.Name;

Response.Write(Utilizador);

Label1.Text = Utilizador; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:34:53.347

由于您已通过身份验证并且您正在获取`NullReferenceException`in `Label1.Text = Utilizador;`，因此您没有对该标签的引用。

> 现在一切都在母版页中

在 MasterPage 上重命名它，编译它，重新命名`Label1`（例如，我强烈建议使用更好的名称`LblUserName`）。然后重新编译它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:22:17.367

您需要禁用未经身份验证的用户。在 web.config 中：

```
<authorization><deny users="?" /></authorization> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T11:27:06.037

您需要实例化您的标签

```
 Label Label1 = new Label();
  Label1.Text = Utilizador; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T12:50:17.420

您可以尝试在 web.config 中添加身份验证标签，如下所示。

```
<authentication mode="Windows" /> 
```

# php - 处理 php 中的 unix 时间戳？

> ID：12108380
> 
> 赞同：0
> 
> 时间：2012-08-24T11:18:09.333
> 
> 标签：php, unix-timestamp

比如说我有一个unix时间戳`1345810244`，我想做的是有一个函数来检查这个时间戳是否与今天相同，即

```
function isToday($unixTimestamp) {

   if ($unixTimestamp == (today){
      return true;
   else
      return false;

} 
```

我对处理 unix 时间戳很陌生，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T11:21:03.240

```
if (date('Y-m-d', $timestamp) == date('Y-m-d')) {
    // yes, it's the same day
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:22:15.533

如果您想在没有 DateTime 函数的情况下执行此操作，最简单的方法（可能不是最准确的，由于缺少时区偏移）将是：

```
function isToday($unixTimestamp)
{
    return date('d.m.Y', $unixTimestamp) === date('d.m.Y');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T11:23:20.150

来自 unix 时间戳的日期和时间

```
$timestamp = "1340892242";
    $date = date('Y-m-d', $timestamp);
    $time = date("H:i:s", $timestamp);
    echo $date;
    echo $time; 
```

# tfs - VS2012 可以与 TFS2010 一起使用吗？

> ID：12108384
> 
> 赞同：6
> 
> 时间：2012-08-24T11:18:24.107
> 
> 标签：tfs, visual-studio-2012

我正在考虑使用 VS2012 RC 将编码的 UI 测试放在一起（因为 VS2010 SP2 FP2 不完全支持 IE9）。

目前，我的测试项目包含在连接到我们的 TFS 团队项目的解决方案中。我还设置了一个构建定义以在签入新代码时构建项目（构建在我们的构建机器上执行）。

我想如果我将我的解决方案升级到 VS2012，那么为了能够在构建机器上构建解决方案，我也需要在那里安装 VS2012 RC，对吗？但是，是否可以在我的构建定义中指定由 VS2012 而不是 VS2010 构建的项目？

我是否可以在使用 TFS2010 的同时使用 VS2012 升级我的项目？我应该注意我的解决方案将是唯一升级到 VS2012 的解决方案。公司内其他所有解决方案仍需VS2010构建。我想，至少几个月后，全公司范围内的 VS2012 升级都不会到位。

还是我需要一台单独的构建机器或任何东西？

任何想法，想法或解决方案表示赞赏！

更新：所以我试了一下，一切正常。我唯一的问题是在我的构建机器上重新构建后我没有工作的编码 UI 测试，但我想这可能是我需要在其他地方询问的问题。澄清一下，解决方案构建成功，但测试仍然失败。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T14:18:09.643

Visual Studio 2012 的项目更改允许大多数类型仍由带有 SP1 的 Visual Studio 2010 打开，因此这取决于您的解决方案中的项目类型 - 请参阅[此页面](http://msdn.microsoft.com/en-us/library/hh266747.aspx)以获取完整的兼容性列表：

> 如果您在带有 Service Pack 1 (SP1) 的 Visual Studio 2010 中创建资产，其中许多将在 Visual Studio 2012 中加载和运行，而无需您进行任何进一步的操作。许多资产也将在带有 SP1 的 Visual Studio 2010 中再次打开而不会出现任何问题，即使您在 Visual Studio 2012 中打开这些资产也是如此。

另请参阅VS 博客上的[“使用 Visual Studio 11 进行往返” ，其中包含更多详细信息。](http://blogs.msdn.com/b/visualstudio/archive/2012/03/28/round-tripping-with-visual-studio-11.aspx)

请注意，如果您的构建过程使用自定义构建活动，那么仅安装 Visual Studio 2012[会破坏本地计算机上的构建定义](http://blogs.msdn.com/b/jpricket/archive/2012/07/17/tfs-2012-cleaning-up-workflow-xaml-files-aka-removing-versioned-namespaces.aspx)，而且 VS2012 不支持 MVC1 或 MVC2 项目。哦，Visual Studio 2012 不再是 RC，它是上周 RTM 的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T14:19:04.120

（我想您的意思是 2012 RTM 而不是 RC，现在最终版本已经发布）

理论上（根据我的阅读）VS2012 和 VS2010 使用相同的项目/解决方案文件格式，因此您应该能够在没有任何兼容性问题的情况下在它们之间切换（除了，可能是因为创建 VS2010 没有的新文件类型等明显的事情）不懂）

TFS 更新历来是向后兼容的，因此您通常可以使用不同的客户端和服务器版本（但通常您需要为新服务器上的旧客户端安装兼容包，针对旧服务器运行的新客户端通常很好）。所以我希望这能很好地工作。

我会说尝试一下，但在您签入之前仔细区分出现在 VCS2012 的 Pending Changes 中的任何文件，以确保它没有更改任何会导致问题的内容。最糟糕的情况是你的开发机器得到一个“损坏”的代码版本，你需要恢复到 2010。

（这是我在我们的 130 个项目的 C# 解决方案中一直使用的方法，到目前为止（1 天）它运行良好，除了新的 UI 让我的眼睛流血，因为他们试图在所有无法区分的单色中找到信息杂乱无章）

# regex - 如何匹配一组数字中的一个？

> ID：12108385
> 
> 赞同：0
> 
> 时间：2012-08-24T11:18:24.653
> 
> 标签：regex

我正在尝试匹配正则表达式中包含以下内容之一的一组数字：

1,2,3,4,5,6,7,8,9,10,11

但我无法弄清楚正则表达式。

对于个位数，这种模式在 "0|1|2|3|4|5|6|7|8|9" 上工作得很好，但在两位数上却失败了。例如，由于正则表达式在 12 中找到 1，因此 12 次通过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:20:40.423

您可以使用开始和结束锚点来强制匹配整个字符串：

```
^(0|1|2|3|4|5|6|7|8|9|10|11)$ 
```

可以缩短为：

```
^(\d|10|11)$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T12:02:08.407

如果您想检查是否只有**一个**数字介于*0 和 11*之间，这将起作用。

```
^[0-9]$|^1?[0-1]$ 
```

如果你想匹配一个字符串，如：

```
1,2,3,12,32,5,1,6,8, 11 
```

并匹配 0-11 然后您可以使用以下内容：

```
(?<=,|^)([0-9]|1?[0-1])(?=,|$) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T11:21:16.337

使用这个正则表达式`^(0|1|2|3|4|5|6|7|8|9|(10)|(11))$`

# wpf - 如何在一个视图模型上绑定一些控件

> ID：12108387
> 
> 赞同：0
> 
> 时间：2012-08-24T11:18:32.747
> 
> 标签：wpf

我有一个包含一些字段的视图模型，即

```
`type ViewModel =
    member x.a = [1;2;3]
    member x.b = [4;5;6]
    member x.c = [7]` 
```

 `并在 WPF 应用程序中放置一些视图，如：

```
<Control.Resources>
                    <DataTemplate x:Key="ItemTempl">
                        <TextBlock Text="{Binding}" />
                    </DataTemplate>

                    <DataTemplate x:Key="SomeTempl">
                        <ListBox ItemsSource="{Binding}"
                                 ItemTemplate="{StaticResource ItemTempl}" />
                    </DataTemplate>
                </Control.Resources>

                <StackPanel>
                    <TabControl x:Name="ListBoxViewPresenter">
                        <TabItem Header="vm.a" Content="{Binding vm.a}" 
                             ContentTemplate="{StaticResource SomeTempl}"/>
                        <TabItem Header="vm.b" Content="{Binding vm.b}" 
                             ContentTemplate="{StaticResource SomeTempl}"/>
                        <TabItem Header="vm.c" Content="{Binding vm.c}" 
                             ContentTemplate="{StaticResource SomeTempl}"/>
                    </TabControl>
                    <ListBox x:Name="ListBoxViewPresenter">
                        <ListBoxItem Content="{Binding vm.a}" 
                                     ContentTemplate="{StaticResource SomeTempl}" />
                        <ListBoxItem Content="{Binding vm.b}" 
                                     ContentTemplate="{StaticResource SomeTempl}" />
                        <ListBoxItem Content="{Binding vm.c}" 
                                     ContentTemplate="{StaticResource SomeTempl}" />
                    </ListBox>
                </StackPanel> 
```

我应该怎么做才能实现这种行为：当您单击 ListBoxViewPresenter 中 vm.a/b/c 中的某个元素时，必须在相应的 TabItem 中选择 ListBoxViewPresenter 中的相同元素。

UPD：特别是我真正的问题，从原始主题改变。

我有带有字段的 ViewModel：onelines、twolines... 和一个名为 selected_scheme 的字段。在xml中：

```
<TreeViewItem Header="{Binding Path=name}" x:Name="ProjectArea">
                    <TreeViewItem Header="Однониточные планы" Style="{StaticResource MyTreeViewItem}">
                        <ContentPresenter Content="{Binding onelines}" ContentTemplate="{StaticResource SchemeWrapperTemplate}" />
                    </TreeViewItem>
                    <TreeViewItem Header="Двухниточные планы" Style="{StaticResource MyTreeViewItem}">
                        <ContentPresenter Content="{Binding twolines}" ContentTemplate="{StaticResource SchemeWrapperTemplate}" />
                    </TreeViewItem> 
```

和数据模板：

```
 <DataTemplate x:Key="SchemeWrapperTemplate">
            <ListBox ItemsSource="{Binding schemes}" 
                     ItemTemplate="{StaticResource SchemeTemplate}"
                     SelectedItem="{Binding selected_scheme}">
                <ListBox.Style> 
```

在程序的其他地方：

```
 <Grid Grid.Row="1">
                    <TextBlock Text="{Binding selected_scheme.path}" />
                </Grid> 
```

当您单击某些列表框时，如果您单击尚未选择的项目，则所选项目不会改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:37:13.667

首先，您应该定义`ItemsSource`您的，`TabItem`并且它们也受到约束。然后你可以将它们绑定到你的 ViewModel 中的一个属性。`ListBox``ViewModel``SelectedItem`

这是一个代码示例（我懒得创建一个单独的 ViewModel 类，因此它与我的主窗口类混合在一起，但你明白了......）：

代码隐藏：

```
namespace WpfApplication13
{
    public partial class MainWindow : Window, INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;

        private object _currentlySelectedItem;

        public object CurrentlySelectedItem
        {
            get { return _currentlySelectedItem; }

            set
            {
                _currentlySelectedItem = value;

                if (this.PropertyChanged != null)
                {
                    this.PropertyChanged(this, new PropertyChangedEventArgs("CurrentlySelectedItem"));
                }
            }
        }

        public class MyClass
        {
            public string MyString { get; set; }

            public MyClass(string myString)
            {
                this.MyString = myString;
            }
        }

        private List<MyClass> _myItemsSource = new List<MyClass>
                                               { 
                                                  new MyClass("toto"),
                                                  new MyClass("tata") 
                                               };

        public List<MyClass> MyItemsSource
        {
            get { return _myItemsSource; }
            set { _myItemsSource = value; }
        }

        public object A
        {
            get { return "toto"; }
        }

        public object B
        {
            get { return "tata"; }
        }

        public MainWindow()
        {
            InitializeComponent();

            this.DataContext = this;
        }
    }
} 
```

xml：

```
<Window x:Class="WpfApplication13.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <StackPanel>
            <TabControl x:Name="ListBoxViewPresenter"
                        SelectedItem="{Binding CurrentlySelectedItem}"
                        ItemsSource="{Binding MyItemsSource}" />
            <ListBox x:Name="ListBoxViewPresenter2"
                     SelectedItem="{Binding CurrentlySelectedItem}"
                     ItemsSource="{Binding MyItemsSource}" />
        </StackPanel>
    </Grid>
</Window> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:44:42.477

New answer after you edited :

It does not make much sense to bind the same object to the SelectedItem property of two different lists that contain different elements. You have to redesign your application or you may be confronted to many problems due to this strange design in the futur.

Still, you can achieve want you want to do with a little codebehing. When the user clicks on one of your ListBox, you set the selected item of your other listbox to null. Then you will be notified when you re-click on the first listbox since the selection goes from null to something.

xaml:

```
<Window x:Class="WpfApplication13.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <StackPanel>
            <ListBox x:Name="ListBoxViewPresenter"
                     SelectedItem="{Binding CurrentlySelectedItem}" 
                     ItemsSource="{Binding MyItemsSource}" />
            <ListBox x:Name="ListBoxViewPresenter2"
                     SelectedItem="{Binding CurrentlySelectedItem}" 
                     ItemsSource="{Binding MyItemsSource2}" />
        </StackPanel>
    </Grid>
</Window> 
```

codebehind:

```
using System.Collections.Generic;
using System.Windows;
using System.Windows.Input;
using System.ComponentModel;

namespace WpfApplication13
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window, INotifyPropertyChanged
    {
        #region INotifyPropertyChanged Members

        public event PropertyChangedEventHandler PropertyChanged;

        #endregion

        private object _currentlySelectedItem;

        public object CurrentlySelectedItem
        {
            get { return _currentlySelectedItem; }

            set
            {
                _currentlySelectedItem = value;

                if (this.PropertyChanged != null)
                {
                    this.PropertyChanged(this, new PropertyChangedEventArgs("CurrentlySelectedItem"));
                }
            }
        }

        private List<int> _myItemsSource = new List<int> { 1, 2 };

        private List<int> _myItemsSource2 = new List<int> { 3, 4 };

        public List<int> MyItemsSource
        {
            get { return _myItemsSource; }
            set { _myItemsSource = value; }
        }

        public List<int> MyItemsSource2
        {
            get { return _myItemsSource2; }
            set { _myItemsSource2 = value; }
        }

        public MainWindow()
        {
            InitializeComponent();

            this.DataContext = this;

            ListBoxViewPresenter.PreviewMouseDown += ListBoxViewPresenter_PreviewMouseDown;
            ListBoxViewPresenter2.PreviewMouseDown += ListBoxViewPresenter2_PreviewMouseDown;
        }

        void ListBoxViewPresenter_PreviewMouseDown(object sender, MouseButtonEventArgs e)
        {
            ListBoxViewPresenter2.SelectedItem = null;
        }

        void ListBoxViewPresenter2_PreviewMouseDown(object sender, MouseButtonEventArgs e)
        {
            ListBoxViewPresenter.SelectedItem = null;
        }
    }
} 
````

# windows - MS Windows 文本服务可以使用 IME 吗？

> ID：12108389
> 
> 赞同：1
> 
> 时间：2012-08-24T11:18:39.597
> 
> 标签：windows, ime, text-services-framework

[在阅读了TSF Aware](http://blogs.msdn.com/b/tsfaware/)博客和[MSDN 示例](http://archive.msdn.microsoft.com/tsf/Release/ProjectReleases.aspx?ReleaseId=1755)等资源后，我开始尝试使用文本服务。

以使用为其构建了 TS（文本服务）的日语为例，我看到 XP/Vista/Win7 语言栏上的 TS 可以替代 MS IME 和日语输入。

因此，用户可以使用 IME 输入法或使用我的 TS 以及其他选项。如果我构建并使用“CandidateList”MSDN TS 示例，它的行为就像日语输入法一样，会弹出一个“虚拟”候选列表窗口，但没有实现。

那么我可以得出结论，TS 只是 IME 的替代品吗？还是 TS 可以向 IME 添加功能/使用 IME？否则，我不会假装自己制定候选人选择算法，而习惯/喜欢 IME 的人那时不会使用我的 TS。

TS 可以调用 IME 从而给出相同的最终结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T21:52:17.063

通常，IME 是使用 TSF 实现的。TSF 没有定义一个文本服务与另一个文本服务通信的规范方式。

# c++ - C++11：数组的编译时间计算

> ID：12108390
> 
> 赞同：43
> 
> 时间：2012-08-24T11:18:46.337
> 
> 标签：c++, templates, c++11, constexpr

假设我有一些 constexpr 函数 f：

```
constexpr int f(int x) { ... } 
```

而且我在编译时知道一些 const int N ：

任何一个

```
#define N ...; 
```

或者

```
const int N = ...; 
```

根据您的回答需要。

我想要一个 int 数组 X：

```
int X[N] = { f(0), f(1), f(2), ..., f(N-1) } 
```

这样函数在编译时就被评估，X 中的条目由编译器计算，结果被放置在我的应用程序映像的静态区域中，就好像我在我的 X 初始化器列表中使用了整数文字一样。

有什么办法可以写这个吗？（例如使用模板或宏等）

**最好的：（感谢 Flexo）**

```
#include <iostream>
#include <array>
using namespace std;

constexpr int N = 10;
constexpr int f(int x) { return x*2; }

typedef array<int, N> A;

template<int... i> constexpr A fs() { return A{{ f(i)... }}; }

template<int...> struct S;

template<int... i> struct S<0,i...>
{ static constexpr A gs() { return fs<0,i...>(); } };

template<int i, int... j> struct S<i,j...>
{ static constexpr A gs() { return S<i-1,i,j...>::gs(); } };

constexpr auto X = S<N-1>::gs();

int main()
{
        cout << X[3] << endl;
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-24T11:38:33.253

有一个纯 C++11（没有 boost，也没有宏）解决这个问题。[使用与此答案](https://stackoverflow.com/a/7858971/168175)相同的技巧，我们可以构建一个数字序列并将它们解包以调用`f`以构造 a `std::array`：

```
#include <array>
#include <algorithm>
#include <iterator>
#include <iostream>

template<int ...>
struct seq { };

template<int N, int ...S>
struct gens : gens<N-1, N-1, S...> { };

template<int ...S>
struct gens<0, S...> {
  typedef seq<S...> type;
};

constexpr int f(int n) {
  return n;
}

template <int N>
class array_thinger {
  typedef typename gens<N>::type list;

  template <int ...S>
  static constexpr std::array<int,N> make_arr(seq<S...>) {
    return std::array<int,N>{{f(S)...}};
  }
public:
  static constexpr std::array<int,N> arr = make_arr(list()); 
};

template <int N>
constexpr std::array<int,N> array_thinger<N>::arr;

int main() {
  std::copy(begin(array_thinger<10>::arr), end(array_thinger<10>::arr), 
            std::ostream_iterator<int>(std::cout, "\n"));
} 
```

（用 g++ 4.7 测试）

`std::array`您可以通过更多的工作完全跳过，但我认为在这种情况下，使用`std::array`.

您也可以递归地执行此操作：

```
#include <array>
#include <functional>
#include <algorithm>
#include <iterator>
#include <iostream>

constexpr int f(int n) {
  return n;
}

template <int N, int ...Vals>
constexpr
typename std::enable_if<N==sizeof...(Vals),std::array<int, N>>::type
make() {
  return std::array<int,N>{{Vals...}};
}

template <int N, int ...Vals>
constexpr
typename std::enable_if<N!=sizeof...(Vals), std::array<int,N>>::type 
make() {
  return make<N, Vals..., f(sizeof...(Vals))>();  
}

int main() {
  const auto arr = make<10>();
  std::copy(begin(arr), end(arr), std::ostream_iterator<int>(std::cout, "\n"));
} 
```

可以说这更简单。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T11:51:40.580

如果您希望数组存在于静态内存中，您可以试试这个：

```
template<class T> struct id { typedef T type; };
template<int...> struct int_pack {};
template<int N, int...Tail> struct make_int_range
    : make_int_range<N-1,N-1,Tail...> {};
template<int...Tail> struct make_int_range<0,Tail...>
    : id<int_pack<Tail...>> {};

#include <array>

constexpr int f(int n) { return n*(n+1)/2; }

template<class Indices = typename make_int_range<10>::type>
struct my_lookup_table;
template<int...Indices>
struct my_lookup_table<int_pack<Indices...>>
{
    static const int size = sizeof...(Indices);
    typedef std::array<int,size> array_type;
    static const array_type& get()
    {
        static const array_type arr = {{f(Indices)...}};
        return arr;
    }
};

#include <iostream>

int main()
{
    auto& lut = my_lookup_table<>::get();
    for (int i : lut)
        std::cout << i << std::endl;
} 
```

如果您想处理数组的本地副本，只需删除 & 符号。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-24T11:24:17.603

Boost.Preprocessor 可以帮助你。但是，限制是您必须使用整数文字，例如`10`代替`N`（即使是编译时常量）：

```
#include <iostream>

#include <boost/preprocessor/repetition/enum.hpp>

#define VALUE(z, n, text) f(n)

//ideone doesn't support Boost for C++11, so it is C++03 example, 
//so can't use constexpr in the function below
int f(int x) { return x * 10; }

int main() {
  int const a[] = { BOOST_PP_ENUM(10, VALUE, ~) };  //N = 10
  std::size_t const n = sizeof(a)/sizeof(int);
  std::cout << "count = " << n << "\n";
  for(std::size_t i = 0 ; i != n ; ++i ) 
    std::cout << a[i] << "\n";
  return 0;
} 
```

输出（[ideone](http://ideone.com/xY0NJ)）：

```
count = 10
0
10
20
30
40
50
60
70
80
90 
```

以下行中的宏：

```
int const a[] = { BOOST_PP_ENUM(10, VALUE, ~) }; 
```

扩展为：

```
int const a[] = {f(0), f(1), ... f(9)}; 
```

更详细的解释在这里：

*   [BOOST_PP_ENUM](http://www.boost.org/doc/libs/1_46_1/libs/preprocessor/doc/ref/enum.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-05T10:41:02.943

这里有很多很棒的答案。问题和标签指定`c++11`，但几年过去了，一些（像我一样）偶然发现这个问题的人可能愿意使用`c++14`. `std::integer_sequence`如果是这样，可以使用;简洁明了地做到这一点。此外，它可用于实例化更长的数组，因为当前的“我拥有的最佳”受到递归深度的限制。

```
constexpr std::size_t f(std::size_t x) { return x*x; } // A constexpr function
constexpr std::size_t N = 5; // Length of array

using TSequence = std::make_index_sequence<N>;

static_assert(std::is_same<TSequence, std::integer_sequence<std::size_t, 0, 1, 2, 3, 4>>::value,
"Make index sequence uses std::size_t and produces a parameter pack from [0,N)");

using TArray = std::array<std::size_t,N>;

// When you call this function with a specific std::integer_sequence,
// the parameter pack i... is used to deduce the the template parameter
// pack.  Once this is known, this parameter pack is expanded in
// the body of the function, calling f(i) for each i in [0,N).

template<std::size_t...i>
constexpr TArray
get_array(std::integer_sequence<std::size_t,i...>)
{
  return TArray{{ f(i)... }}; 
}

int main()
{

  constexpr auto s = TSequence();
  constexpr auto a = get_array(s);

  for (const auto &i : a) std::cout << i << " ";  // 0 1 4 9 16

  return EXIT_SUCCESS;

} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-15T10:54:35.893

我稍微扩展了 Flexo 和 Andrew Tomazos 的答案，以便用户可以指定计算范围和要评估的函数。

```
#include <array>
#include <iostream>
#include <iomanip>

template<typename ComputePolicy, int min, int max, int ... expandedIndices> 
struct ComputeEngine
{
  static const int lengthOfArray = max - min + sizeof... (expandedIndices) + 1;
  typedef std::array<typename ComputePolicy::ValueType, lengthOfArray> FactorArray;

  static constexpr FactorArray compute( )
  {
    return ComputeEngine<ComputePolicy, min, max - 1, max, expandedIndices...>::compute( );
  }
};

template<typename ComputePolicy, int min, int ... expandedIndices> 
struct ComputeEngine<ComputePolicy, min, min, expandedIndices...>
{
  static const int lengthOfArray = sizeof... (expandedIndices) + 1;
  typedef std::array<typename ComputePolicy::ValueType, lengthOfArray> FactorArray;

  static constexpr FactorArray compute( )
  {
    return FactorArray { { ComputePolicy::compute( min ), ComputePolicy::compute( expandedIndices )... } };
  }
};

/// compute 1/j
struct ComputePolicy1
{
  typedef double ValueType;

  static constexpr ValueType compute( int i )
  {
    return i > 0 ? 1.0 / i : 0.0;
  }
};

/// compute j^2
struct ComputePolicy2
{
  typedef int ValueType;

  static constexpr ValueType compute( int i )
  {
    return i * i;
  }
};

constexpr auto factors1 = ComputeEngine<ComputePolicy1, 4, 7>::compute( );
constexpr auto factors2 = ComputeEngine<ComputePolicy2, 3, 9>::compute( );

int main( void )
{
  using namespace std;

  cout << "Values of factors1" << endl;
  for ( int i = 0; i < factors1.size( ); ++i )
  {
    cout << setw( 4 ) << i << setw( 15 ) << factors1[i] << endl;
  }
  cout << "------------------------------------------" << endl;

  cout << "Values of factors2" << endl;
  for ( int i = 0; i < factors2.size( ); ++i )
  {
    cout << setw( 4 ) << i << setw( 15 ) << factors2[i] << endl;
  }

  return 0;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-24T17:37:36.017

这是一个更简洁的答案，您可以在原始序列中显式声明元素。

```
#include <array>

constexpr int f(int i) { return 2 * i; }

template <int... Ts>
struct sequence
{
    using result = sequence<f(Ts)...>;
    static std::array<int, sizeof...(Ts)> apply() { return {{Ts...}}; }
};

using v1 = sequence<1, 2, 3, 4>;
using v2 = typename v1::result;

int main()
{
    auto x = v2::apply();
    return 0;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-25T00:00:00.610

这个怎么样？

```
#include <array>
#include <iostream>

constexpr int f(int i) { return 2 * i; }

template <int N, int... Ts>
struct t { using type = typename t<N - 1, Ts..., 101 - N>::type; };

template <int... Ts>
struct t<0u, Ts...>
{
    using type = t<0u, Ts...>;
    static std::array<int, sizeof...(Ts)> apply() { return {{f(Ts)...}}; }
};

int main()
{
    using v = typename t<100>::type;
    auto x = v::apply();
} 
```

# android - 我扎根了还是没有？

> ID：12108399
> 
> 赞同：0
> 
> 时间：2012-08-24T11:19:09.653
> 
> 标签：android, root

我正在尝试确定我的 Android 设备是否已植根。超级用户应用程序无处可寻。在我手机上的终端模拟器中，我无法输入命令`su`，并且命令`id`报告我不是 root。但是，当我使用 时`adb shell`，我对手机具有完全的 root 访问权限，这让我感到困惑。这是否意味着我已经扎根了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:33:44.940

我相信您正在使用的构建是调试或用户调试。

在这种情况下，应用程序无法获得 root 访问权限，因为 su 不存在。只有 ADB_SHELL 将获得 root 访问权限。

您可以在执行 adb remount 后将预编译的 su 推送到 /system/bin

编辑：如果您想从应用程序获得 root 访问权限，请关注此[线程](http://forum.xda-developers.com/showthread.php?t=449536)

# ruby-on-rails - Rails 3.2 - Formtastic gem 不会安装

> ID：12108401
> 
> 赞同：0
> 
> 时间：2012-08-24T11:19:31.090
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin, formtastic

我正在开发 Rails 3.2 应用程序，并计划安装 activeadmin 来管理资源。但是，当我添加`gem 'activeadmin'`到 Gemfile 并运行`bundle`时，会产生此错误：

```
NoMethodError: undefined method `spec' for nil:NilClass
An error occured while installing formtastic (2.1.1), and Bundler cannot continue.
Make sure that `gem install formtastic -v '2.1.1'` succeeds before bundling. 
```

果然，当我尝试仅安装 formtastic 并添加`gem formtastic`到 Gemfile 并运行`bundle`时，我得到了同样的错误。有其他人遇到这种情况吗？顺便说一句，我已经尝试过 formtastic 版本 2.2.1 和 2.1.1（因为活动管理员需要 ~> 2.1.1）。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:41:55.360

这可能会帮助您[http://www.tweetegy.com/2011/04/installing-rails-gem-fails-with-undefined-method-spec-for-nilnilclass-error/](http://www.tweetegy.com/2011/04/installing-rails-gem-fails-with-undefined-method-spec-for-nilnilclass-error/)

# xaml - 在代码中创建 RowDefinitions 和 ColumnDefinitions

> ID：12108405
> 
> 赞同：3
> 
> 时间：2012-08-24T11:19:46.797
> 
> 标签：xaml, windows-phone

我为 windows-phone 开发应用程序，我想创建 2 行和 2 列的表我为此表创建 xaml 代码

```
<Grid Background="White">   
    <Grid.ColumnDefinitions>
        <ColumnDefinition/>
        <ColumnDefinition/> 
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition /> 
    </Grid.RowDefinitions/>      
</Grid> 
```

我想在代码中创建这个网格

```
Grid chat_userpicgrid = new Grid();
newgrid.Children.Add(chat_userpicgrid); 
```

但我不知道如何创建 RowDefinitions 和 ColumnDefinitions。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T11:28:41.480

```
Grid newGrid = new Grid();
newGrid.Background = new SolidColorBrush(Colors.White);
newGrid.ColumnDefinitions.Add(new ColumnDefinition());
newGrid.ColumnDefinitions.Add(new ColumnDefinition());
newGrid.RowDefinitions.Add(new RowDefinition());
newGrid.RowDefinitions.Add(new RowDefinition()); 
```

在特定单元格中定位元素：

```
Grid chat_userpicgrid = new Grid();
Grid.SetColumn(chat_userpicgrid, 1);
Grid.SetRow(chat_userpicgrid, 1);
newGrid.Children.Add(chat_userpicgrid); 
```

查看[此 MSDN 页面底部的代码](http://msdn.microsoft.com/en-us/library/system.windows.controls.columndefinition.aspx)

# android - 在不使用互联网的情况下在两部安卓手机之间来回传输文件

> ID：12108412
> 
> 赞同：0
> 
> 时间：2012-08-24T11:20:08.733
> 
> 标签：android, gprs

我有一个应用程序将短信从一个机器人发送到另一个机器人，然后处理短信中包含的信息。问题是短信只能携带少量数据。我想在两部手机之间传输更大的文件（可能不超过 1Mb），但不使用互联网。我在想也许是 GPRS，在这种情况下，任何人都可以给我一些关于 GPRS 的一般编码问题的指示，我需要考虑这样做并让我开始。或者任何人对如何做到这一点有任何其他想法？

编辑：抱歉，为了更清楚起见，我需要通过一些地址（例如电话号码）访问手机以下载文件，它可能在任何地方，所以除非它在附近，否则蓝牙将无法工作（对吗？）。如果有这样的东西，也许调制解调器或传真之类的东西会这样做。我很惊讶这很难做到，这似乎是手机的设计初衷。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:24:01.680

我不认为GPRS会工作。

它依赖于分布在各处的移动运营商单元（它的成本很高，而且我认为您不允许发送任意数据包）。

它应该在长距离上工作吗？如果没有，蓝牙或[WiFi 直](http://developer.android.com/guide/topics/connectivity/wifip2p.html)连将是选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T16:33:19.860

如果您正在谈论短距离传输，则[近场通信也可能是您的解决方案。](http://developer.android.com/guide/topics/connectivity/nfc/index.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-24T11:39:19.690

使用蓝牙传输文件

```
 Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);
        sharingIntent.setType("text/plain");
        sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT,mailBody);//mail body is your content         
        startActivity(Intent.createChooser(sharingIntent,"Share using")); 
```

# python - Python 列出混淆

> ID：12108416
> 
> 赞同：-1
> 
> 时间：2012-08-24T11:20:28.653
> 
> 标签：python, list

> **可能重复：**
> [Python 中的“Least Astonishment”：可变默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)
> [Python 列表混淆](https://stackoverflow.com/questions/5957341/python-list-confusion)

我对 Python 中的列表列表有点困惑。我有这两个片段：

```
li1 = [['a'], ['a'], ['a']]
print li1
for i in range(0, len(li1)):
    li1[i] += [i]
print li1

li2 = [['a']] * 3
print li2
for i in range(0, len(li2)):
    li2[i] += [i]
print li2 
```

创建后 li1 和 li2 是相同的，但是当我添加元素时，它们的行为会有所不同：

```
[['a'], ['a'], ['a']]
[['a', 0], ['a', 1], ['a', 2]]
[['a'], ['a'], ['a']]
[['a', 0, 1, 2], ['a', 0, 1, 2], ['a', 0, 1, 2]] 
```

有人可以解释一下诀窍在哪里吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T11:21:31.390

在`li2 = [['a']] * 3`您创建一个包含三个列表元素的列表时，但这些列表实际上是同一个对象。这意味着：当您修改 时`li2[0]`，您也修改了`li2[1]`and `li2[2]`。

以下行实际上创建了一个列表，其中包含三个不同的列表对象：

```
li1 = [['a'], ['a'], ['a']] 
```

在这种情况下，当您修改时，`li1[0]`您只修改该列表。其他列表不受影响。`li1`这解释了为什么您在和中得到不同的列表`li2`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:28:05.207

检查`id()`每个元素的值，这清楚地表明了他们行为的原因。

```
>>> li1 = [['a'], ['a'], ['a']]
>>> for x in li1:                  #different id()
    id(x)

145497484
145514156
145511500 
```

相同的值`id()`：

```
>>> li1=['a']*3
>>> for x in li1:
    print id(x)

3078093024
3078093024
3078093024 
```

# iphone - 使用 USB 和 Wi-fi 将图像从计算机共享到 iphone

> ID：12108418
> 
> 赞同：1
> 
> 时间：2012-08-24T11:20:46.883
> 
> 标签：iphone, objective-c, ios5, sync, wifimanager

我想借助 USB 和 Wi-Fi 将图像从计算机同步到 iPhone 设备。如何在我的应用程序中创建 SBWifiManager？像我的磁盘这样的大多数应用程序都做我想做的事情。

创建设备的 IP 地址，然后在计算机的网络浏览器中使用该地址连接应用 Wi-Fi 管理器，两者都应连接相同的 Wi-Fi。然后将图像从计算机同步到我的应用程序。

我应该如何开始以及在开始之前知道什么是好的？

# algorithm - 优化树中的值，其中容差在某处深处

> ID：12108422
> 
> 赞同：2
> 
> 时间：2012-08-24T11:20:56.087
> 
> 标签：algorithm, optimization, tree

我目前正在用树做一些计算。每个节点都有我要计算的 5 个值和决定如何计算这些值的类型。一些计算可能是相当复杂的算法。节点内的所有计算仅取决于其子节点的值，因此我从下到上进行计算。对于每个节点类型，一个值取决于子节点的不同值。我主要对根节点中的 5 个值感兴趣，这取决于所有其他节点中的所有值。所有这一切都很好。一个节点只能有 1 或 2 个子节点，树通常不超过 5 层。

对于某些节点类型，存在容差；意思是有些值没有关系，看这张图，我用XX标记了。有时，某些值甚至是相关的，例如 C = XX * A。目前，这些值只是设置为一些默认值。有时甚至会存​​在复杂的关系，例如牛顿法等算法的多种可能解决方案，具体取决于起始值。

![对不起我的绘画技巧不好](../Images/c58f80785171c4fbb24adace525293d0.png)

现在我可以对根节点的值应用评级。我想要的是通过调整树深处的 XX 值来优化这个评级。每个节点内的计算可以是许多可能的公式的范围，而容差可以是许多可能的模式之一，所以我不能只找出一些公式，但我需要一些非常灵活的算法。我不知道这样的算法。有人有想法吗？

/编辑：澄清一下，目前还不清楚树中有多少值是空闲的。不仅有一个 XX，而且可能有任意数量（我猜最多 10 个），所以我的第一步是识别这些值。此外，我将在一个时间窗口内对许多生成的树执行此操作，因此速度也不是不重要的。谢谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:22:17.263

正如另一个答案所指出的，这看起来像是一个优化问题。您可以考虑使用[遗传算法](http://en.wikipedia.org/wiki/Genetic_algorithm)。基本上，您尝试通过“交配”具有不同特征（在您的情况下为叶子上的值）的不同个体（在您的情况下为树）并根据目标函数（在您的情况下，您在根节点上获取）。可以通过向您的种群添加突变来改进算法（就像在自然界的进化中一样）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T12:15:03.533

如果您有 3 个输入值 XX、YY 和 ZZ，则您正在搜索 3 维空间。您要做的是应用优化算法或[启发式算法](http://en.wikipedia.org/wiki/Heuristic_algorithm)。您对算法的选择是关键，这是您的时间和计算机时间之间的成本效益。我猜你只想做一次。

无论您使用哪种方法，您都需要了解问题，这意味着了解您的算法如何随着不同的输入值而变化。有些解决方案有一个很好的最小值，很容易找到（例如使用牛顿法），有些则没有。

我建议从简单开始。最基本的方法之一就是进行迭代搜索。它很慢，但它有效。您需要确保您的迭代步长不会太大，这样您就不会错过一些甜蜜点。

```
For XX = XXmin to XXmax
  For YY = YYmin to YYmax
    For ZZ = ZZmin to ZZmax

      result = GetRootNodeValue(XX, YY, ZZ)

      If result < best_result then
        print result, XX, YY, ZZ
        best_result = result
      End if

    End For
  End For
End For 
```

下面是另一种方法，它是一种随机优化方法（使用随机点收敛到最佳解决方案），它的结果在大多数情况下都是合理的。我已经成功地使用了它，它擅长收敛到最小值。如果没有明确的全局最小值，这很好用。您必须为您的问题配置参数。

```
' How long to search for, a larger value will result in long search time
max_depth = 20000

' Initial values
x0 = initial XX value
y0 = initial YY value
z0 = initial ZZ value

' These are the delta values, how far should the default values range
dx = 5
dy = 5
dz = 5

' Set this at a large value (assuming the best result is a small number)
best_result = inf

' Loop for a long time
For i = 1 To max_depth

    ' New random values near the best result
    xx = x0 + dx * (Rnd() - 0.5) * (Rnd() - 0.5)
    yy = y0 + dy * (Rnd() - 0.5) * (Rnd() - 0.5)
    zz = y0 + dy * (Rnd() - 0.5) * (Rnd() - 0.5)

    ' Do the test
    result = GetRootNodeValue(xx, yy, zz)

    ' We have found the best solution so far
    If result < best_result Then
        x0 = xx
        y0 = yy
        z0 = zz
        best_result = result
    End If

    Print progress
Next i 
```

有许多优化算法可供选择。以上是一些非常简单的方法，但它们可能不是最适合您的问题。

# c - strcmp() 认为字符串不相等.. 但它们是吗？

> ID：12108423
> 
> 赞同：5
> 
> 时间：2012-08-24T11:21:00.407
> 
> 标签：c, compare, fgets, strcmp

由于未知原因，运行我的 C 程序的结果非常出乎意料。我认为它必须是某种初学者的错误，但是我真的不知道它在哪里。

```
#include <stdio.h>
#include <string.h>
int main()
{
char string1[50];
char string2[50];
int compare;

puts("Enter two strings: ");
fgets(string1, strlen(string1)+1, stdin);
fgets(string2, strlen(string2)+1, stdin);

compare=strcmp(string1, string2); /* usage of extra variable makes the code more readable but wastes more memory */

printf("%d: ",compare);

if (compare<0) puts("First string is lesser");
else if (compare>0) puts ("First string is bigger");
     else puts("Strings are equal");

return 0;
  } 
```

在测试中：

```
Enter two strings: 
heheisntthisalongstring
heheisntthisalongstring
1: First string is bigger

------------------
(program exited with code: 0)
Press return to continue 
```

这些字符串不应该相等吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-24T11:22:59.347

```
fgets(string1, strlen(string1)+1, stdin);
fgets(string2, strlen(string2)+1, stdin); 
```

这些都是错误的。`string1`并且`string2`没有初始化，`strlen`只是计算字节数，直到达到`\0`. 在这种情况下，`strlen`可以返回任何（随机非负数）数字。

使用`sizeof`, 而不是`strlen`这里。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T11:24:10.543

这里

```
 char string1[50]; 
 char string2[50]; 
```

你没有初始化它们，所以你的初始调用`strlen`是不可靠的，因为它们正在寻找他们在数组开始后找到的第一个空字符。这可能在任何地方，调用的结果可能会或可能不会真实反映大小 - 你根本不能依赖结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T11:37:23.207

`string1`不是 memset 为 0，所以`strlen(string1)`value 不会给出期望值 ( `50`)。`strlen`将计算字符直到达到`\0`. 所以它也可能导致崩溃（一种未定义的行为）。

更好的 memset `string1`，`string2`如下所示。

```
char string1[50] = {0}; 
char string2[50] = {0}; 
```

并且还使用`sizeof`运算符来获取值`50`。

```
fgets(string1, sizeof(string1), stdin); 
fgets(string2, sizeof(string2), stdin); 
```

或者直接去scanf

```
scanf("%s", string1);
scanf("%s", string2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T11:45:08.607

这里看看[this-strlen](http://msdn.microsoft.com/en-us/library/78zh94ax%28v=vs.71%29.aspx)

尽管您使用的代码不好，但您仍然可以通过使用公共字符串变量`strncmp`的第三个参数来获得预期的答案。`strlen`纯娱乐。始终初始化您的变量，否则它们会导致您的应用程序崩溃。您可以在此处查看示例[-strncmp](http://msdn.microsoft.com/en-us/library/eywx8zcx%28v=vs.71%29.aspx)

# java - Java Play2- 用于工作的 Akka

> ID：12108431
> 
> 赞同：0
> 
> 时间：2012-08-24T11:21:27.227
> 
> 标签：java, playframework-2.0, akka, jobs

我正在尝试使用 akka 在 java play2 中创建工作。

我总是遇到同样的错误`error: cannot find symbol`

它指向`system.actorOf()`Intellij 和 Eclipse 不要给我错误消息。

但我找不到这种方法。我使用了以下导入

```
import play.libs.Akka;
import akka.actor.ActorSystem;
import akka.actor.ActorRef;
import akka.actor.UntypedActorFactory;
import akka.actor.UntypedActor;
import akka.actor.Props;
import akka.actor.ActorRefFactory; 
```

也许文档已经过时并且他们已经删除了`system.actorOf()`?

```
public class Global extends GlobalSettings {

    ActorRef tickActor = system.actorOf(new Props().withCreator(new UntypedActorFactory() {
          public UntypedActor create() {
            return new UntypedActor() {
              public void onReceive(Object message) {
                if (message.equals("Log")) {
                  controllers.Application.log();
                } else {
                  unhandled(message);
                }
              }
            };
          }
        }));

    @Override
    public void onStart(Application app) {
        Cancellable cancellable = system.scheduler().schedule(Duration.Zero(), Duration.create(10, TimeUnit.SECONDS),
                tickActor, "Log");

    }
} 
```

编辑：

.

哦...谷歌将我重定向到过时的文档。现在是`Akka.System()`..

*   谁能给我一个关于如何使用 up2date 代码创建 tickActor 的示例？

[http://www.playframework.org/documentation/2.0.2/JavaAkka](http://www.playframework.org/documentation/2.0.2/JavaAkka)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:59:09.413

我强烈建议您查看有关[actor](http://doc.akka.io/docs/akka/2.0.3/java/typed-actors.html)和[schedulers](http://doc.akka.io/docs/akka/2.0.3/java/scheduler.html)的 Akka 文档。

你也可以看看这个问题：[Play Framework 2.0 schedules an Akka Actor at server launch](https://stackoverflow.com/questions/10177626/play-framework-2-0-schedule-an-akka-actor-at-server-launch)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T12:02:59.983

解决了。

顺便说一句，文档中有一些错别字。

```
import java.util.concurrent.TimeUnit;

import play.*;
import play.mvc.*;
import play.mvc.Http.RequestHeader;

import static play.mvc.Results.*;
import play.libs.Akka;
import akka.actor.ActorSystem;
import akka.actor.ActorRef;
import akka.actor.UntypedActorFactory;
import akka.actor.UntypedActor;
import akka.actor.Props;
import akka.actor.ActorRefFactory;

import akka.util.*;
public class Global extends GlobalSettings {

    ActorRef tickActor;

    @Override
    public void onStart(Application app) {
        Logger.info("D");
        tickActor = Akka.system().actorOf((new Props().withCreator(new UntypedActorFactory() {
              public UntypedActor create() {
                    return new UntypedActor() {
                      public void onReceive(Object message) {
                        if (message.equals("Log")) {
                                 //Do something
                         // controllers.Application.log();
                        } else {
                          unhandled(message);
                        }
                      }
                    };
                  }
                })));
        Akka.system().scheduler().schedule(
                  Duration.create(0, TimeUnit.MILLISECONDS),
                  Duration.create(30, TimeUnit.MINUTES),
                  tickActor, 
                  "Log"
                );

    }

} 
```

# python - 是否有python的计划任务对象

> ID：12108434
> 
> 赞同：0
> 
> 时间：2012-08-24T11:21:32.077
> 
> 标签：python, scheduled-tasks

我有多个通过计划任务在一夜之间运行的 python 脚本。我想要做的是运行另一个 python 脚本，该脚本在这些脚本之后运行，该脚本获取有关该特定任务的信息，并为我提供有关脚本时间、脚本名称、是否成功运行等的信息。

使用 python 如何访问这些属性？我可以为此使用什么对象？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:45:09.890

您可以编写自己的 logmanager 类！当您为每个执行的事情运行脚本时，您可以写入日志文件。
例如写一个 LogManager：

```
class LogManager():
    def get_time():
        # via time,date lib

    def get_script_name():
        # via os, path, system libs

    def get_pid():
        # via os, system libs

    def append_all_information_in_file():
        log = open("logfile", "a")
        log.write(get_time(), get_script_name(), get_pid())
        log.close() 
```

如果你运行你的脚本，你可以从 LogManager 类继承你想要的日志信息。我希望我正确理解了您的问题，并且答案很有帮助！

# reporting-services - SSRS 2005 出口性能问题

> ID：12108440
> 
> 赞同：0
> 
> 时间：2012-08-24T11:22:04.173
> 
> 标签：reporting-services, reportingservices-2005

我们有一些 SSRS 2005 报告，托管在报告服务器上。当我们尝试将报告导出到 excel 时，它需要比平时更多的时间来下载。否则报告需要合理的时间来呈现。

当我对报表服务器运行 SQL 探查器时发现，它在内部调用“ReadChunkPortion”sp 数千次。我假设这与分页有关。

我们可以在进行导出时有条件地禁用分页吗？感谢任何帮助/指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T19:37:01.353

您可能幸运地将 InteractiveHeight 属性更改为 0，如[本页](http://msdn.microsoft.com/en-us/library/ms156282%28v=sql.90%29.aspx)最后一句中所述。不过，这可能会影响 HTML 的呈现方式，因此请注意它可能产生的影响。

以我的经验，SSRS 导出到 Excel 通常效率低下，数据集越大，越令人沮丧。[似乎您无能为力来改变这一点](http://social.msdn.microsoft.com/forums/en-US/sqlreportingservices/thread/e1add311-634c-4158-98cc-ef4c7fc72286/)。

如果设置 InteractiveHeight 属性不起作用，并且您确实需要 Excel 导出运行得更快，您可能只需导出到 .csv 然后在 Excel 中打开。不幸的是，它需要用户执行更多步骤，但根据报表的大小，它仍然可能比坐着等待 Excel 导出完成要快。

# java - 从 javascript 表达式中获取变量 (Rhino)

> ID：12108447
> 
> 赞同：4
> 
> 时间：2012-08-24T11:22:31.567
> 
> 标签：java, javascript, rhino

我正在使用 Rhino 来评估 js 表达式，方法是将所有可能的变量值放在范围内并评估匿名函数。然而，表达式相当简单，我只想把表达式中使用的值，以提高性能。

代码示例：

```
 Context cx = Context.enter();

    Scriptable scope = cx.initStandardObjects(null);

    // Build javascript anonymous function
    String script = "(function () {" ;

    for (String key : values.keySet()) {
        ScriptableObject.putProperty(scope, key, values.get(key));
    }
    script += "return " + expression + ";})();";

    Object result = cx.evaluateString(scope, script, "<cmd>", 1, null); 
```

我想从作为变量名的表达式中获取所有标记。

例如，如果表达式是

```
(V1ND < 0 ? Math.abs(V1ND) : 0) 
```

它会回来`V1ND`的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T14:31:13.450

[Rhino 1.7 R3](https://developer.mozilla.org/en-US/docs/New_in_Rhino_1.7R3)引入了一个可用于查找名称的[AST 包：](http://www.jarvana.com/jarvana/view/org/mozilla/rhino/1.7R3/rhino-1.7R3-javadoc.jar!/org/mozilla/javascript/ast/package-frame.html)

```
import java.util.*;
import org.mozilla.javascript.Parser;
import org.mozilla.javascript.ast.*;

public class VarFinder {
  public static void main(String[] args) throws IOException {
    final Set<String> names = new HashSet<String>();
    class Visitor implements NodeVisitor {
      @Override public boolean visit(AstNode node) {
        if (node instanceof Name) {
          names.add(node.getString());
        }
        return true;
      }
    }
    String script = "(V1ND < 0 ? Math.abs(V1ND) : 0)";
    AstNode node = new Parser().parse(script, "<cmd>", 1);
    node.visit(new Visitor());
    System.out.println(names);
  }
} 
```

输出：

```
[V1ND, abs, Math] 
```

但是，我不确定这对效率有多大帮助，除非表达式可以缓存。您将解析代码两次，如果您需要`abs`在进一步检查时从函数中消除变量的歧义，`Math`则需要。

# ios - UIImage 未在按钮 IBAction 上的 setImage 上更新

> ID：12108449
> 
> 赞同：0
> 
> 时间：2012-08-24T11:22:37.277
> 
> 标签：ios, xcode, uiimageview, uibutton

所以我正在使用这两个函数更改按钮的图像和 UIImageView 的图像：

```
- (IBAction)changeButton:(id)sender {

    //switch image to group if it is a badge. switch image to badge if it is a group.

    if([[properties objectForKey:@"current_item"] isEqualToString:@"badge"]){
        NSLog(@"reaching badge");
        UIImage *imageToSet = [UIImage imageNamed:current_group_image];
        [changeButtonOutlet.imageView setImage:imageToSet];
        [properties setObject:@"group" forKey:@"current_item"];
    } else {
        if([[properties objectForKey:@"current_item"] isEqualToString:@"group"]){
            NSLog(@"reaching group");
            UIImage *imageToSet = [UIImage imageNamed:current_badge_image];
            [changeButtonOutlet.imageView setImage:imageToSet];         
            [properties setObject:@"badge" forKey:@"current_item"];

        } 
    }

    [self switchBadgeImage];
}

-(void)switchBadgeImage{
    if([[properties objectForKey:@"current_item"] isEqualToString:@"badge"]){
        [badgeImageView setImage:[UIImage imageNamed:current_badge_image ]];
    } else {
    if([[properties objectForKey:@"current_item"] isEqualToString:@"group"]){
        [badgeImageView setImage:[UIImage imageNamed:current_group_image ]];    
    }
    }

} 
```

但是图像不更新。如果我向 changeButton IBAction 发送垃圾邮件，有时我可以很快看到图像发生变化，但它总是会弹回默认图像（仅用于按钮）。

这是我反复按下按钮时控制台日志告诉我的内容：

```
2012-08-24 12:20:52.414 MyApp[1448:707] reaching group
2012-08-24 12:20:52.559 MyApp[1448:707] reaching badge
2012-08-24 12:20:52.687 MyApp[1448:707] reaching group
2012-08-24 12:20:52.846 MyApp[1448:707] reaching badge
2012-08-24 12:20:52.976 MyApp[1448:707] reaching group
2012-08-24 12:20:53.117 MyApp[1448:707] reaching badge
2012-08-24 12:20:53.262 MyApp[1448:707] reaching group
2012-08-24 12:20:53.348 MyApp[1448:707] reaching badge 
```

我究竟做错了什么？多谢你们！

* * *

编辑：修复它！这是更新的代码：

-(void)switchBadgeImage{ NSLog(@"当前组图像：%@", current_group_image); NSLog(@"当前徽章图片：%@", current_badge_image);

```
current_item = [properties objectForKey:@"current_item"];

if([current_item isEqualToString:@"badge"]){
    NSLog(@"current item is equal to badge");
    [badgeImage setImage:[UIImage imageNamed:current_badge_image ]];
} else {
    if([current_item isEqualToString:@"group"]){
         NSLog(@"current item is equal to group");
        [badgeImage setImage:[UIImage imageNamed:current_group_image ]];    
    }
} 
```

}

```
- (IBAction)changeButton:(id)sender {

    //switch image to group if it is a badge. switch image to badge if it is a group.

    if([[properties objectForKey:@"current_item"] isEqualToString:@"badge"]){
        NSLog(@"reaching badge");
        UIImage *imageToSet = [UIImage imageNamed:current_badge_image];
        [changeButtonOutlet setImage:imageToSet forState:UIControlStateNormal];
        [properties setObject:@"group" forKey:@"current_item"];
        [properties synchronize];
    } else {
        if([[properties objectForKey:@"current_item"] isEqualToString:@"group"]){
            NSLog(@"reaching group");
            UIImage *imageToSet = [UIImage imageNamed:current_group_image];
            [changeButtonOutlet setImage:imageToSet forState:UIControlStateNormal];
            [properties setObject:@"badge" forKey:@"current_item"];
            [properties synchronize];
        } 
    }

    [self switchBadgeImage];

} 
```

实际上有一些问题。首先，我以错误的方式切换图像。其次，我没有同步 UserDefaults。将当前项目保存到 UserDefaults 后，我也没有更新 current_item 变量。

感谢所有的帮助，如此之快！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T11:41:35.353

```
UIImage *image = [UIImage imageNamed:@"image.png"];
[changeButtonOutlet setImage:image forState:UIControlStateNormal]; 
```

试试这个，我知道你需要为那个按钮设置状态。此代码将设置图像及其不和背景。如果还有其他东西，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:34:14.050

要为 设置图像`UIButton`，您必须指定`UIControlState`要使用的图像。该`imageView`属性不是用于设置背景图像，而是用于设置[`configure the appearance and behavior of the button’s view`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html).

设置图像的正确方法是

```
[changeButtonOutlet setImage:imageToSet forState:UIControlStateNormal]; 
```

[此处](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIControl_Class/Reference/Reference.html#//apple_ref/c/tdef/UIControlState)列出了不同的控制状态及其应用。

# java - 如何在生成的线程完成执行时停止主进程

> ID：12108457
> 
> 赞同：1
> 
> 时间：2012-08-24T11:22:59.593
> 
> 标签：java, multithreading

这是我的代码

```
public class Main {

private static class GetData implements Runnable{

    private List list;
    private SqlQuery query;
    GetData(SqlQuery<String> param){
        this.query=param;
    }

    public void run(){

        list = query.execute();

    }

}

public static void main(String[] args){

    ApplicationContext context = new      ClassPathXmlApplicationContext("database.xml");
    SqlQuery<String> parameter =  (SqlQuery<String>) context.getBean("BEAN_NAME");

    System.out.println("hello");

    new Thread(new Inner(parameter)).start();

   for(each element in list of inner class){

       System.out.println(element.id);
   }

}

} 
```

那么我的问题是在我从 xml 文件中获取查询之后，它执行但它不打印任何东西？为什么？

另外，如果我创建另一个线程并运行它以创建另一个列表，我如何确保在我的所有线程都完成执行之后，我的主程序才会继续执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:27:54.897

改变

```
new Thread(new Inner(parameter)).start(); 
```

至

```
Thread t = new Thread(new Inner(parameter));
t.start(); 
```

并放在 你的 for 循环`t.join();` **之后。**

**编辑**：对于 5 个或任意数量的线程说 n

像这样创建一个线程数组

```
Thread[] tArray = new Thread[n];

for (int j = 0; j < tArray .length; j++) {

//your code to start the thread goes here

} 
```

一旦你启动了它们，**在主函数的末尾**再次循环它们以将它们中的每一个加入到主线程中。

```
for (int j = 0; j < tarray .length; j++) {

tArray.join()

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:36:29.617

如果您正在使用一个线程并希望主程序等待其执行完成。你不需要使用线程机制。相反，您可以将主程序中的方法实质上添加到 Thread.run() 中。否则，如果您想使用多个线程，您可以使用 Thread.join 方法，以便所有其他线程在该行等待，直到所有线程执行完成。我还建议您研究倒计时机制。它可以为您提供无需手动参与加入/等待操作的现成机制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T11:25:29.577

使用要等待的线程的**join方法。**[Thread.join() javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#join%28%29)

这个怎么运作 ：

加入另一个线程（称为 B）的线程（我们称他为 A）将停止执行，直到加入的线程 (B) 完成并返回。

**编辑**：
事实上，除非您的线程处于守护程序模式，否则您的程序将不会退出。JVM在退出前自动加入所有正在运行的非守护线程

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T11:27:30.607

`new Thread(runnable).start();`异步执行提供的 runnable 并继续执行到下一行，因此循环在任何内容添加到列表之前执行。

所以如果你想在线程完成后执行循环，你将不得不等待它。最简单的方法是运行 Runnable: `new Inner(parameter).run();`。

现在这违背了并行执行的目的。

假设您有多个可运行对象，您可以使用 ExecutorService（而不是使用更复杂且容易出错的低级 Thread API）来并行运行各种任务并在它们全部执行时收集结果完全的：

```
ExecutorService executor = Executors.newCachedThreadPool();
executor.submit(runnable1); //first task
executor.submit(runnable2); //second task

executor.shutdown(); //stop accepting new tasks
executor.awaiTermination(Integer.MAX_VALUE, TimeUnit.SECONDS); //wait until both tasks finish

//now you can use the results of your tasks. 
```

最后，请注意，如果您使用线程，您将在线程（工作线程和主线程）之间共享可运行的列表，并且您需要使用线程安全结构来实现这一点 - 例如，通过使用[CopyOnWriteArrayList](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArrayList.html)：

```
list = new CopyOnWriteArrayList(query.execute()); 
```

# perl - Perl：取消引用数组正在使用标量上下文？

> ID：12108458
> 
> 赞同：1
> 
> 时间：2012-08-24T11:23:04.863
> 
> 标签：perl, dereference

我对 Perl 和取消引用有一个奇怪的问题。

我有一个带有数组值的 INI 文件，在两个不同的部分下，例如

```
[Common]
animals =<<EOT
dog
cat
EOT

[ACME]
animals =<<EOT
cayote
bird
EOT 
```

我有一个子例程将 INI 文件读入 %INI 哈希并处理多行条目。

然后我使用一个`$org`变量来确定我们是使用公共数组还是特定组织数组。

```
@array = @{$INI{$org}->{animals}} || @{$INI{Common}->{animals}}; 
```

'Common' 数组工作正常，即如果`$org`不是 'ACME' 我得到值（狗猫）但如果`$org`等于 'ACME'` 我得到 2 的值？

有任何想法吗？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T11:31:06.230

取消引用数组当然不会强制标量上下文。但使用`||`的是。因此，像你的例子一样`$val = $special_val || "the default";`工作得很好，而你的例子没有。

因此`@array`将包含单个数字（第一个数组中的元素数），或者如果为 0，则包含第二个数组的元素。

perldoc 页面甚至专门列出了这个`perlop`例子：

```
In particular, this means that you shouldn't use this for selecting
between two aggregates for assignment:

    @a = @b || @c;              # this is wrong
    @a = scalar(@b) || @c;      # really meant this
    @a = @b ? @b : @c;          # this works fine, though 
```

根据您的需要，解决方案可能是：

```
my @array = @{$INI{$org}->{animals}}
   ? @{$INI{$org}->{animals}}
   : @{$INI{Common}->{animals}}; 
```

# xaml - 让 ListView 滚动到所选项目

> ID：12108464
> 
> 赞同：8
> 
> 时间：2012-08-24T11:23:14.763
> 
> 标签：xaml, windows-runtime, winrt-xaml

我有一个 WinRT/C#/XAML 应用程序，其视图具有项目的垂直 ListView。根据项目的数量，ListView 会显示一个垂直滚动条。这是 XAML 定义：

```
<UserControl.Resources>
    <CollectionViewSource
        x:Name="myViewSource"
        Source="{Binding myViewModel.Items}" />
</UserControl.Resources>
...
<ListView
    x:Name="myListView"
    ItemsSource="{Binding Source={StaticResource myViewSource}}"
    SelectedItem="{Binding SelectedItem, Mode=TwoWay}">
</ListView> 
```

现在，每次我导航到该视图时，ListView 的选定项都是通过从后面的代码 ( `OnNavigatedTo`) 中设置视图模型中的数据绑定 SelectedItem 属性来选择的。我的问题： ListView 不会自动滚动到这个选定的项目。滚动条保留在 ListView 的顶部，用户必须手动滚动才能看到所选项目。

我在后面的代码中设置了 SelectedItem 后尝试执行`myListView.ScrollIntoView(MyViewModel.SelectedItem);`（in `OnNavigatedTo`），但它不起作用。滚动条保持在顶部。

我知道 SO 上的这个线程：[Scroll WinRT ListView to specific group](https://stackoverflow.com/questions/11325384/scroll-winrt-listview-to-particular-group)。这似乎是一个类似的问题。但是，当我手动或使用 WinRT XAML 工具包遍历 ListView 的可视化树时，它找不到 ScrollViewer（而是返回 null）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-27T07:18:38.117

Thanks to Filip I noticed that calling `ScrollIntoView()` in `OnNavigatedTo()` was too early, because the `ListView` control is not loaded yet in this place.

The first solution idea was to bind the `Loaded` event of the ListView:

```
myListView.Loaded += (s, e) => 
    myListView.ScrollIntoView(MyViewModel.SelectedItem); 
```

Unfortunately that causes a nasty visual effect, where current ListView items overlap with the selected item for parts of a second, before everything is rearranged well.

The final solution I found is to call `ScrollIntoView()` asynchronously via the `Dispatcher` of the view:

```
myListView.Loaded += (s, e) => Dispatcher.RunAsync(CoreDispatcherPriority.Normal,
    () => myListView.ScrollIntoView(MyViewModel.SelectedItem)); 
```

With this solution the layouting works fine.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-10T15:02:05.107

我有类似的需求，并以稍微不同的方式解决了它。我从 ListView 订阅了 SelectionChangedEvent 并在处理程序中执行了滚动。

XAML：

```
<ListView x:Name="myListView" SelectionChanged="myListView_SelectionChanged" ...>
</ListView> 
```

代码：

```
private void myListView_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    myListView.ScrollIntoView(myListView.SelectedItem);
} 
```

# php - 多次上传是否遵循我们选择图像的相同上传顺序？

> ID：12108468
> 
> 赞同：8
> 
> 时间：2012-08-24T11:23:21.003
> 
> 标签：php, html, file-upload

我正在使用 HTML5 多重上传功能。

```
<input name='upload[]' type=file multiple="multiple" id="profileImages" /> 
```

它的工作完美。现在我有一个查询

**上传图片时多次上传是否遵循任何顺序？**

假设我有 5 张图片

```
a.png
b.png
c.png
d.png
e.png 
```

现在，如果我按以下顺序选择图像，则在上传图像时

```
a.png, 
b.png,
e.png,
d.png,
c.png 
```

**这些图片会按照我选择的顺序上传吗？**

意味着`$_FILES['upload']['name']`数组将有（使用**PHP**）

```
[0] =>'a.png',
[1] =>'b.png',
[2] =>'e.png',
[3] =>'d.png',
[4] = >'c.png' 
```

还是取决于**文件大小**或**浏览器**或**任何其他因素/属性**？

* * *

### 边注

进一步我将这些图像单独存储在 **profile_image_table**

```
id(pk ) | profile_id | image_name 
```

上述问题的答案将使我的工作变得容易，因为如果按我们选择的顺序上传多张图片，那么为给定的主要个人资料图片（使用`MIN(id)`或`MAX(id)`）选择一张图片会更容易`profile_id`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T05:09:33.010

HTML5与服务器相关的文件上传*无关。*时期。没有可靠的“秩序”。正如评论所指出的，新 HTML5`multiple`字段产生的实际顺序可能因浏览器而异。要了解原因，我们需要看看当用户代理（浏览器）向 PHP 服务器提交具有多个文件字段的表单时会发生什么。

当您从 HTML 表单上传多个文件时，您的浏览器会自动为您做几件事：

1.  发送一个`Content-Type: multipart/form-data`标头来通知远程 HTTP 服务器它正在这个单个请求的上下文中发送几个离散的信息“块”。
2.  构建符合 HTTP 规范的原始 HTTP 消息，以使用 HTTP 协议传输文件。

原始 HTTP 消息将如下所示：

```
POST /somePath HTTP/1.1
User-Agent: my-browser-v0.1
Host: www.example.com
Content-Length: 42
Content-Type: multipart/form-data; boundary=--------------------

------------------------------
Content-Disposition: form-data; name="file[]" filename="file1.txt"
Content-Type: text/plain

these were the contents of file1.txt
------------------------------
Content-Disposition: form-data; name="file[]"; filename="file2.txt"
Content-Type: text/plain

these were the contents of file2.txt 
```

这完全取决于浏览器从表单中放置数据的顺序。用户代理嗅探并不是确定排序的真正可行选项。相反，如果字段的顺序很重要（毫无意义的想法，但无论如何），您应该使用一种形式，其中存在有限数量的可能文件字段并单独命名它们。这样，您可以通过`$_FILES`数组中的字段名称访问文件。毕竟，您不需要使用新的 HTML5 功能，因为它存在：

```
<form action='' method='post' enctype='multipart/form-data'>
  <input name='file1' type=file>
  <input name='file2' type=file>
  <input type='submit'>
</form> 
```

并在您的 PHP 文件中直接按名称访问字段。您将知道哪个表单字段名称是第一个，因为您以这种方式编写了 HTML：

```
<?php
$_FILES['file1'];
$_FILES['file2']; 
```

* * *

在您的情况下，也许更好的解决方案是简单地拥有一个直接命名的文件字段（因此您始终知道它是主要字段），然后添加多选字段供用户添加更多文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T22:55:51.340

简单地说，不，这取决于浏览器和服务器以及他们希望执行的顺序。

对于从网页到 PHP 的文件，需要三个步骤。

1.  浏览器获取文件并将它们很好地放入 Apache（或其他）的帖子中，然后传输所有内容。

2.  浏览器将看到传入的数据，将保留标头，其中一些将传递给 PHP，但不是全部，对于文件，它会将它们写入 /tmp，然后将它们所在位置的信息发送给 PHP。

在购买上述情况下，订单可以更改。从技术上讲，它们应该按相同的顺序排列，但不是必须的。在通过 Flash 或任何其他多选选项批量上传的情况下，它们将反向进行，但取决于 wo 知道哪些文件可能会从它们的顺序中取出并放在第一位或最后一位。

**确保它们按相同顺序排列的最佳方法是为所有文件字段使用不同的名称，而不是使用数组。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-25T11:58:38.563

我在使用 Laravel 媒体库包时遇到了这样的问题。

当我想上传多个文件时，这是一个问题，因为与我在数据库中保存时选择的顺序相比，使用了不同的顺序。

反正，

事实上，我们有时会因为思维复杂而犯错。作为解决方案，我做了输入中继器。

像一个

```
<input name='upload[]' type='file'/>
<input name='upload[]' type='file'/>
<input name='upload[]' type='file'/> 
```

这样，我们就可以按顺序发布每个上传的文件。是的，我们不能选择多个，但我找不到任何其他解决方案。

我觉得还不错。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-07-30T07:07:52.977

在谷歌浏览器中，您上传的所有文件都会根据文件名进行排列。我已经测试过了。

# c# - 返回对象时出现 NHibernate LazyInitializationException

> ID：12108469
> 
> 赞同：0
> 
> 时间：2012-08-24T11:23:25.580
> 
> 标签：c#, jquery, web-services, nhibernate

有人可以向我解释为什么会发生这种情况 - 我在客户和项目之间有一个一对多的映射。

以下是各自映射文件中的两种关系：

客户：

```
<!-- Relationship with project -->
<bag name="projects" cascade ="all-delete-orphan" lazy="false">
  <key column="client_id" />
  <one-to-many class="Project" ></one-to-many>
</bag> 
```

项目：

```
<many-to-one name="client"
         class="Client"
         column="client_id"
         cascade="all-delete-orphan" 
         fetch="join"
         not-null="false"
         lazy="false" /> 
```

以下是返回特定客户端的 Web 方法。

```
public Client RetrieveEqualsClient(string propertyName, object propertyValue)
{
    Client c = new Client();
    ConfigureNHibernate();
    using (ISession session = m_SessionFactory.OpenSession())
    {
        ICriteria criteria = session.CreateCriteria(typeof(Client));
        criteria.Add(Expression.Eq(propertyName, propertyValue));
        c = criteria.List<Client>()[0];

        return c;
    }
} 
```

我从我的 aspx 页面调用该方法，如下所示：

```
$.ajax
(
    {
        type: "post",
        url: "NHibernateWebService.asmx/RetrieveEqualsClient",
        data: "{id: " + id + "}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        error: function (result) { alert("Failure: " + result.statusText); },
        success: function (result) { alert(result); }    
     }
 ) 
```

这给了我一个例外： NHibernate LazyInitializationException: failed to lazily initialize a collection, no session or session was closed, here - //this is in the Client class

```
public virtual IList<Project> projects 
{
    get { return c_projects ?? ( c_projects = new List<Project>()); }//Exception Occurs Here!
    set { c_projects = value; }
} 
```

我经历了有关此异常的各种问题，但无法使其发挥作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:54:39.907

尝试`fetch="join"`为项目设置：

```
<bag name="projects" cascade ="all-delete-orphan" fetch="join"> 
  <key column="client_id" /> 
  <one-to-many class="Project" ></one-to-many> 
</bag> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T19:54:43.940

您得到的异常是由于您尝试在`ISession`.
这可能会发生，因为在序列化时，序列化程序会读取该属性，并且它发生在您的`using`范围之外。
最好的办法是[使用 dto 而不是序列化你的 POCO](http://ayende.com/blog/4011/the-stripper-pattern)。

所以你的代码看起来像：

```
using (ISession session = m_SessionFactory.OpenSession())
    {
        ICriteria criteria = session.CreateCriteria(typeof(Client));
        criteria.Add(Expression.Eq(propertyName, propertyValue));
        var list = criteria.List<Client>();
        if (!list.Any())
           return null;
        return new ClientDTO(list[0]);
    } 
```

此外，我不确定您通过从客户端获取属性名称进行的动态查询。
您正在创建 UI 代码和数据库之间的强耦合（如果 Id 属性更改，这意味着您必须更改 jQuery 代码......）

如果确实，您的客户总是要求使用 Id 的客户，那么该`Get<Client>(id)`方法将更合适且不易出错。

# eclipse - 如何强制 Eclipse，仅在特定路径中创建工作区？

> ID：12108472
> 
> 赞同：0
> 
> 时间：2012-08-24T11:23:35.080
> 
> 标签：eclipse, workspace

我们已经在organisatoin中设置了eclipse的多用户环境。我们需要强制工作空间位置位于某个路径。例如，默认目录应该是 /newdir/，如果用户名 id 是 'rg123'，则工作空间应该被允许为 '/newdir/rg123/workspace1' 或 '/newdir/rg123/workspace2' 等。所以必须强制用户在 /newdir/ 目录下创建工作区，否则在用户输入正确的路径之前应该抛出错误。

我知道可以通过设置更改默认工作区位置。但这是否可以强制特定位置，否则应该抛出错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:38:14.243

我想没有办法做到这一点，但你可以编写一个插件来检查变量并生成错误`PROJECT_LOC`。`WORKSPACE_LOC`但我会建议您将其保留为`Convention`比`Compulsion`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T19:29:43.023

启动时的 -data 命令行选项可以强制它使用特定位置。我无法想象您为什么要在此之外强制执行此操作。

# php - 嵌入 FOSRegistrationFormType 时验证规则不起作用

> ID：12108475
> 
> 赞同：1
> 
> 时间：2012-08-24T11:23:52.033
> 
> 标签：php, fosuserbundle, symfony-2.1, symfony-sonata

嗨，我想将 FOSUserBundle 中的一部分注册表单嵌入到另一个注册表单中。当我尝试添加现有电子邮件时，由于未使用唯一验证器，因此引发了“违反完整性约束”异常。我怎样才能解决这个问题。当单独使用注册表单时，验证器工作正常。

主要形式：

```
class SoldierType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ...
            ->add('user', new NameFormType('Application\Sonata\UserBundle\Entity\User')) 

        ;

    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'validation_groups' => array('registration')
        ));

    }

    public function getName()
    {
        return 'wnc_soldierbundle_soldiertype';
    }
} 
```

名称表格

```
namespace Application\Sonata\UserBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;
use FOS\UserBundle\Form\Type\RegistrationFormType as BaseForm;

class NameFormType extends BaseForm
{

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('firstname')
                ->add('lastname')
                ->add('email', 'email', array('label' => 'form.email', 'translation_domain' => 'FOSUserBundle'));

    }

    public function getName()
    {
        return 'fos_user_name';
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:39:33.660

添加`cascade_validation`将使验证在嵌入式表单中工作。

```
 public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'validation_groups' => array('Registration'),
            'cascade_validation' => true,
        ));

    } 
```

# python - python，igraph处理顶点重新编号

> ID：12108479
> 
> 赞同：2
> 
> 时间：2012-08-24T11:24:09.650
> 
> 标签：python, igraph

我正在实现一种算法，用于使用 python+igraph 在有向图中查找密集子图。主循环维护两个最初相同的子图 S 和 T，并根据这些节点相对于另一个图的入度（或出度）的计数来删除节点（和入射边）。我遇到的问题是 igraph 对顶点重新编号，因此当我从 T 中删除一些节点时，其余节点不再对应于 S 中的相同节点。

这是关键的循环的主要部分。

```
def directed(S):
    T = S.copy()
    c = 2
    while(S.vcount() > 0 and T.vcount() > 0):
        if (S.vcount()/T.vcount() > c):
            AS = S.vs.select(lambda vertex: T.outdegree(vertex) < 1.01*E(S,T)/S.vcount())
            S.delete_vertices(AS)
        else:
            BT = T.vs.select(lambda vertex: S.indegree(vertex) < 1.01*E(S,T)/T.vcount())
            T.delete_vertices(BT) 
```

这不起作用，因为删除顶点对顶点 id 的影响。这个问题有标准的解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T21:47:23.457

一种可能性是为`name`顶点属性中的顶点分配唯一名称。当顶点被删除时，它们保持不变（与顶点 ID 不同），您可以使用它们来引用函数中的顶点，如`indegree`or `outdegree`。例如：

```
>>> g = Graph.Ring(4)
>>> g.vs["name"] = ["A", "B", "C", "D"]
>>> g.degree("C")
2
>>> g.delete_vertices(["B"])
>>> g.degree("C")
1 
```

请注意，我已经删除了顶点`B`，因此顶点`C`也获得了一个新 ID，但名称仍然相同。

在您的情况下，具有`select`条件的行可能会像这样重写：

```
AS = S.vs.select(lambda vertex: T.outdegree(vertex["name"]) < 1.01 * E(S,T)/S.vcount()) 
```

当然，这假设最初的顶点名称在 和 中是相同`S`的`T`。

# html - CSS 背景图像重复是否会增加页面负载？

> ID：12108482
> 
> 赞同：1
> 
> 时间：2012-08-24T11:24:22.490
> 
> 标签：html, css

假设在一个 10px 的无序列表项中重复一个 1px 宽度和 20px 高度、大小为 1kb 的图像。那么以kb为单位的页面大小会增加10kb（listitem的宽度*图像的大小）还是只有1kb。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:27:08.720

下载的页面大小不会改变（即 HTML 和图像的大小）。

由于是*同一张*图片，所以会从单次下载中重复使用。

但是，在内存中，由于需要渲染背景，内存会有所增加。无法确定这将导致什么样的内存增加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T11:27:41.673

您只向服务器发出一次请求以获得该一张背景图片，所以不，它不会增加页面大小。

您建议的图像是减小页面大小的理想方法。

如果你想走得更远，你可以考虑使用 CSS sprites 来进一步减少页面大小和加载时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T11:25:41.127

不，它不会增加尺寸。它将保持 1kb 大小。

> “基本上，图像切片对于分解大图像很有用，这样单个图像的加载速度就会比整个大图像更快。”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T11:25:54.197

图像只加载到浏览器的缓存中一次。所以加载量只有1kb。这就是为什么 spritesheets 是个好主意。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-24T11:26:07.213

不，一点也不，它不会增加加载页面的时间。图像仅加载一次。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-24T11:27:23.797

绝对不会
在浏览器下载背景时，与下载的背景图片重复背景，从不下载多次，你可以用firebug检查

# sql-server - 插入下一条记录

> ID：12108489
> 
> 赞同：0
> 
> 时间：2012-08-24T11:24:55.413
> 
> 标签：sql-server, sql-server-2008

我有这样的要求，我必须为 one `BID`， one插入记录`SID`，如果`execdate`and`stopbilldate`存在，那么我需要插入新记录，`NULL`示例`Stopbilldate` 如下：

```
Sno BID     SID LID     Comapny Execdate    StopBilldate
5   BLDG100 C   6500    Cole    1/5/2012    5/29/2012
6   BLDG100 C   000000  Vacant  5/30/2012   NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:44:39.120

[`TRIGGER`](http://msdn.microsoft.com/en-us/library/ms189799.aspx)你可以在你的桌子上做这个。触发器是一种在事件发生时将执行的存储过程。

这是您可以放在桌子上的示例：

```
CREATE TRIGGER [trg_yourTable]
   ON  [yourTable]
   AFTER INSERT
AS 
BEGIN
    SET NOCOUNT ON;

    -- Insert statements for trigger here
    INSERT INTO yourTable (bid, sid, lid, company, execdate, stopbilldate)
    SELECT i.bid, i.sid, 0, 'Vacant', DATEADD(day, 1, i.stopbilldate), null
    FROM inserted i
    WHERE i.bid is not null
        and i.sid is not null
END 
```

当您`INSERT`在表中数据时，这将运行并且`INSERT`您要添加到表中的附加行。

# javascript - 从 PhoneGap FileEntry 中提取 base64 编码数据

> ID：12108493
> 
> 赞同：2
> 
> 时间：2012-08-24T11:25:05.100
> 
> 标签：javascript, android, ios, cordova, cordova-2.0.0

我正在使用 Phonegap 2.0 并尝试从其 URI 获取编码为 base64 的媒体，但没有成功。

```
function tryToSend(fileReader) {
    // I don't really what the parameter is
}

function win(file) {
    alert(file.name + ' ' + file.type); // type is undefined here
    var reader = new FileReader();
    reader.onloadend = tryToSend;
    var encoded = reader.readAsDataURL(file); // encoded is undefined here
}

function fail(error) {
    console.log(error);
}

function onResolveSuccessCompleted(fileEntry) {
    fileEntry.file(win, fail);
}

function onResolveFailed(error) {
    console.log(error);
}

window.resolveLocalFileSystemURI(MY_FILE_URI, onResolveSuccessCompleted, onResolveFailed); 
```

最后，我无法为我的文件提取 base64 编码数据，我需要它在 JSON AJAX 调用中发送它。

我的代码有问题吗？你知道实现我需要的方法吗？

干杯。

西里尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:38:14.130

好的，捕获 reader.readAsDataURL 的返回值是没有意义的，因为它是一个异步调用并且不返回任何内容。你的 tryToSend 方法应该写成：

```
function tryToSend(evt) {
    var encoding = evt.target.result;
    // now encoding has your file as a base64 encoded string.
} 
```

# css - cfmail 没有格式化 css

> ID：12108495
> 
> 赞同：5
> 
> 时间：2012-08-24T11:25:06.037
> 
> 标签：css, email, coldfusion, html-email, cfmail

首先以我有限的知识道歉，我刚刚开始在CF。

因此，当满足表单查询时，我尝试使用 cfmail 发送 html 电子邮件。

我遇到的问题是我嵌入在电子邮件头中的 css 要么抛出错误，要么根本没有格式化。请有人看看我的代码并告诉我哪里出错了。

顺便说一句，当我取出 CSS 中的 # 标签时，它似乎可以工作，但电子邮件发送时没有格式化！！！

```
 <cfmail to="customer email" from="xxxxxxx@gmail.com" subject="Your order at has been shipped" type="html">
        <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/1999/REC-html401-19991224/strict.dtd">

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Title</title>
<style type="text/css">
body {
    color: #000000;
    font-family: Arial, Helvetica, sans-serif;
}
body, td, th, input, textarea, select, a {
    font-size: 12px;
}
p {
    margin-top: 0px;
    margin-bottom: 20px;
}
a, a:visited, a b {
    color: #378DC1;
    text-decoration: underline;
    cursor: pointer;
}
a:hover {
    text-decoration: none;
}
a img {
    border: none;
}
#container {
    width: 680px;
}
#logo {
    margin-bottom: 20px;
}
table.list {
    border-collapse: collapse;
    width: 100%;
    border-top: 1px solid #DDDDDD;
    border-left: 1px solid #DDDDDD;
    margin-bottom: 20px;
}
table.list td {
    border-right: 1px solid #DDDDDD;
    border-bottom: 1px solid #DDDDDD;
}
table.list thead td {
    background-color: #EFEFEF;
    padding: 0px 5px;
}
table.list thead td a, .list thead td {
    text-decoration: none;
    color: #222222;
    font-weight: bold;
}
table.list tbody td a {
    text-decoration: underline;
}
table.list tbody td {
    vertical-align: top;
    padding: 0px 5px;
}
table.list .left {
    text-align: left;
    padding: 7px;
}
table.list .right {
    text-align: right;
    padding: 7px;
}
table.list .center {
    text-align: center;
    padding: 7px;
}
</style>
</head>
<body>
<div id="container">
  <p>Your Order has been Shipped</p>
  <table class="list">
    <thead>
      <tr>
        <td class="left" colspan="2">text_order_detail;</td>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="left"><b>text_order_id</b><br />
          <b>text_date_added</b><br />
          <b>text_payment_method</b><br />
          <b>text_shipping_method</b>
          </td>
        <td class="left"><b>text_email</b><br />
          <b>text_telephone</b><br />
          <b>text_ip<br /></td>
      </tr>
    </tbody>
  </table>
    <table class="list">
    <thead>
      <tr>
        <td class="left">text_instruction</td>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="left">comment</td>
      </tr>
    </tbody>
  </table>
  <table class="list">
    <thead>
      <tr>
        <td class="left">text_payment_address</td>
        <td class="left">text_shipping_address</td>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="left">payment_address</td>
        <td class="left">shipping_address</td>
      </tr>
    </tbody>
  </table>
  <table class="list">
    <thead>
      <tr>
        <td class="left">text_product</td>
        <td class="left">text_model</td>
        <td class="right">text_quantity</td>
        <td class="right">text_price</td>
        <td class="right">text_total</td>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="left">product
          <br />
          <small>option</small>
 </td>
        <td class="left">product['model']</td>
        <td class="right">product['quantity']</td>
        <td class="right">product['price']</td>
        <td class="right">product['total']</td>
      </tr>
    </tbody>
    <tfoot>
      <tr>
        <td colspan="4" class="right"><b>total['title']</b></td>
        <td class="right">total['text']</td>
      </tr>
    </tfoot>
  </table>
  <p>text_footer</p>
  <p>text_powered</p>
</div>
</body>
</html>
    </cfmail>
        </cfif> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T12:03:50.287

两个问题首先是您需要`##`在 CSS 中使用而不是`#`，否则 ColdFusion 会尝试将它们作为变量处理。第二个是你`</cfif>`的页面底部有一个错误，但这可能只是你复制和粘贴代码的时候。

`##`我用代替测试了代码，`#`并且在 CF 9.0.1 上正确发送了电子邮件

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T11:29:48.757

您应该坚持 HTML 电子邮件的内联样式，而不是按照您的方式呈现样式。

例如

```
<td style="padding:10px;"></td> 
```

# c# - OdbcConnection 文本驱动程序忽略 scheme.ini 设置

> ID：12108500
> 
> 赞同：1
> 
> 时间：2012-08-24T11:25:24.920
> 
> 标签：c#, csv, odbc

这是我的代码：

```
 OdbcConnection conn = new OdbcConnection("Driver={Microsoft Text Driver (*.txt; *.csv)};DSN=scrapped.csv");
        conn.Open();
        OdbcCommand foo = new OdbcCommand(@"SELECT * FROM [scrapped.csv] WHERE KWOTA < 100.00", conn);
        IDataReader dr = foo.ExecuteReader();
        StreamWriter asd = new StreamWriter("outfile.txt");
        while (dr.Read())
        {
            int cols = dr.GetSchemaTable().Rows.Count;
            for (int i = 0; i < cols; i++)
            {
                asd.Write(string.Format("{0};",dr[i].ToString()));
            }
            asd.WriteLine();
        }
        asd.Flush();
        asd.Close();
        dr.Close();
        conn.Close(); 
```

这是我的 Scheme.ini

```
 [scrapped.csv]

Format=Delimited(;)
NumberDigits=2
CurrencyThousandSymbol= 
CurrencyDecimalSymbol=,
CurrencyDigits=2

Col1=DataOperacji Date
Col2=DataKsiegowania Date
Col3=OpisOperacji Text
Col4=Tytul Text
Col5=NadawcaOdbiorca Text
Col6=NumerKonta Text
Col7=Kwota Currency
Col8=SaldoPoOperacji Currency 
```

在这里，我有来自我的 CSV 的样本：

```
2013-01-22;2013-08-24;notmatter;"notmatter";"notmatter";'notmatter';7 111,55;10 222,20;
2013-03-26;2013-08-23;notmatter;"notmatter";"notmatter";'notmatter';-275,00;15 466,24; 
```

因此，即使我在 scheme.ini 中设置了日期和货币，而我写入输出文件的区域设置（应该由 odbc 默认使用但不是）值也是一团糟。

如果有空间（我的本地 thousend 分隔符）它们是空的，如果我的值像 15,45 我得到了 15,4500。

日期字段也表现异常，即使我插入到 scheme.ini 中，`DateTimeFormat`我也没有像我在格式中指定的那样得到任何东西。

任何帮助将不胜感激，如何处理它，我想使用 ODBC 并查询 CSV 数据，如数据库`WHERE something = something`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:06:28.007

我在您的 schema.ini 中添加了一行并针对 adodb 连接运行，它在日期问题上对我有用，其他位仍然不正确。注意日期时间格式。

```
[scrapped.csv]
Format=Delimited(;)
NumberDigits=2
CurrencyThousandSymbol= 
CurrencyDecimalSymbol=,
CurrencyDigits=2
DateTimeFormat="yyyy-mm-dd"

Col1=DataOperacji Date
Col2=DataKsiegowania Date
Col3=OpisOperacji Text
Col4=Tytul Text
Col5=NadawcaOdbiorca Text
Col6=NumerKonta Text
Col7=Kwota Currency
Col8=SaldoPoOperacji Currency 
```

您可能还需要：

```
ColNameHeader=False
MaxScanRows=0 
```

但目前，我看不到让空间被接受为 CurrencyThousandSymbol 的方法

# bash - 检查密码是否 / 在 bash

> ID：12108509
> 
> 赞同：2
> 
> 时间：2012-08-24T11:25:48.923
> 
> 标签：bash

我正在尝试编写一个 bash 脚本，它将“cd ..”直到找到包含另一个特定目录的目录，或者到达“/”目录。

我想要实现的是：

```
while test -d REQUIRED_DIR || [[ "$PWD" != "/" ]];do cd ..; done 
```

`REQUIRED_DIR`目标是在到达根目录时找到或停止导航。

下面是不起作用的 bash 代码。

```
while if [ "$PWD"=="/" ];then echo $PWD;false;else true;fi
do
        cd ..
        #echo `pwd`
done 
```

即使不在根目录中，if 条件也总是通过。

更新：- 当我离开空格时，“如果”按预期工作，像这样的“==”符号 `[ "$PWD" == "/" ]`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T11:28:54.937

`while if`对我来说是一个新的，我不完全确定你想通过组合它们来实现什么。

我想你可能想`while`自己尝试一下：

```
while [[ "$PWD" != "/" ]] ; do
    cd ..
done 
```

或者您可以尝试更简单的方法：

```
cd / 
```

如果如您的评论中所述，您*需要*零碎地进行操作，以便最终进入包含 a 的第一个目录，`$REQUIRED_DIR`或者`/`如果找不到，您可以简单地执行以下操作：

```
while [[ "$PWD" != "/" ]] ; do
    if [[ -d "$REQUIRED_DIR" ]] ; then
        break
    fi
    cd ..
done 
```

# objective-c - Objective-C 中的项目“模板”

> ID：12108516
> 
> 赞同：0
> 
> 时间：2012-08-24T11:26:32.920
> 
> 标签：objective-c, ios, project

我正在为 iOS 构建给定的代码库，用于创建两种共享通用功能的应用程序。理想情况下，新结构如下所示：

```
×-> General Implementation        <-------------×
|                                               |
×-- GeneralMainProject Implementation   <---×   SomeProjectX Implementation
                                            |
    MainProjectVersionX Implementation  ----× 
```

其中每个实现可能包括从上层继承类的类，以及一组实用程序类。

问题是，当我想使用子类时，我必须覆盖它的每一次使用（例如，在 GeneralMainProject AppDelegate 中）。

知道如何通过技术或不同的设计解决这个问题吗？类构成和类别没有帮助，因为它们需要字段字典和/或运行时缺点。

谢谢。

# iphone - iPhone 是否支持 RTSP url

> ID：12108523
> 
> 赞同：0
> 
> 时间：2012-08-24T11:27:13.117
> 
> 标签：iphone, rtsp, live555

我正在尝试在我的 iPhone 应用程序中播放 RTSP url。我使用过许多第三方 API，例如 Live555、FFMpeg

我得到了代码 Live555，但它没有在模拟器和设备中运行。没有显示错误。它总是显示构建成功。

请让我知道在这种情况下我该怎么做。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:31:25.897

我们当然可以提供帮助，但我需要更多关于您正在尝试做什么以及您遇到的错误类型的详细信息。我们还有一些其他的框架可以尝试，我认为最有帮助的是，如果你有一个公共 URL 用于你试图播放的任何提要。

如果你喜欢，你也可以使用 [https://github.com/mooncatventures-group在设备上编译和试用](https://github.com/mooncatventures-group)

设备和模拟器上的性能差异很大，我们只是不打扰模拟器，所以一切都是为设备编译的。

# java - Java：使用 sftp 从远程位置下载文件

> ID：12108525
> 
> 赞同：0
> 
> 时间：2012-08-24T11:27:12.797
> 
> 标签：java, ftp, download, sftp, apache-camel

我必须在单击超链接时使用 SFTP 下载位于远程位置的文件。我使用 JBOSS 5.1 作为我的服务器并使用 struts2。我已经实现了下面的代码，我发现 ConsumerTemplate 的 receiveBody() 是 null ？有人可以指导我解决上述问题吗？

代码 ：

```
CamelContext ctx = new DefaultCamelContext();
                ConsumerTemplate consumer = ctx.createConsumerTemplate();
                String camel_ftp_uri = MessageFormat.format(CAMEL_FTP_PATTERN, ftp_mode, ftp_user, ftp_address, ftp_dir, ftp_options);
                System.out.println("camel_ftp_uri ::: "+camel_ftp_uri);

                Object obj= consumer.receiveBody(camel_ftp_uri);
                System.out.println("obj  ::"+obj); 
```

当我打印`camel_ftp_uri`时得到 :camel_ftp_uri :::

`ftp://ccc_uat1@1x.xxx.xx.xxx//from_ccc/file.txt?disconnect=true`

我在 SOF 中引用了以下链接：

[如何通过 SFTP 从服务器检索文件？](https://stackoverflow.com/questions/14617/java-what-is-the-best-way-to-sftp-a-file-from-a-server)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T05:25:25.063

Camel FTP 组件您必须使用起始目录配置 ftp uri，然后提供要下载的文件名作为单独的参数。你做错的是起始目录是文件名。

这个

```
ftp://ccc_uat1@1x.xxx.xx.xxx//from_ccc/file.txt?disconnect=true 
```

应改为

```
ftp://ccc_uat1@1x.xxx.xx.xxx//from_ccc/?disconnect=true&fileName=file.txt 
```

# towerjs - 在 TowerJS 视图中覆盖模板逻辑

> ID：12108531
> 
> 赞同：0
> 
> 时间：2012-08-24T11:27:33.447
> 
> 标签：towerjs, coffeekup

如何覆盖模板在 TowerJS 中的呈现方式？我知道我可以使用 Jade，但如果我坚持使用 CoffeeKup，我怎么能拥有这个代码：

```
formFor @user, (form) ->
  form.fieldset "Profile", (fields) ->
    fields.field "firstName"
    fields.field "lastName"
    fields.field "email"
  form.fieldset "Address", (fields) ->
    fields.field "lat", as: hidden
    fields.field "lng", as: hidden
    fields.field "street"
    fields.field "city", as: "select", collection: ["CA"] 
```

...生成这个：

```
<form class='form' data-method='post' method='post' novalidate='true' role='form'>
  <fieldset class='fieldset' id='profile'>
    <legend class='legend'>
      <span>Profile</span>
    </legend>
    <li class='field-list'>
      <li class='field string optional validate'>
        <label class='label' for='active-record-user-first-name-input'>
          <span>First Name</span> 
```

...而不是这个：

```
<form class='form' data-method='post' method='post' novalidate='true' role='form'>
  <fieldset class='fieldset' id='profile'>
    <legend class='legend'>
      <span>Profile</span>
    </legend>
    <ol class='field-list'>
      <li class='field string optional validate'>
        <label class='label' for='active-record-user-first-name-input'>
          <span>First Name</span> 
```

我想我是在挑剔`<ol>`vs `<ul>`，但我刚刚开始使用 Tower 来评估铁路和德比。这是 CoffeKup 问题还是 Mint 问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:09:48.817

您可以通过设置自定义该标签：

```
Tower.View.fieldListTag = 'ul' # or whatever 
```

配置变量在这里：

*   [https://github.com/viatropos/tower/tree/master/packages/tower-view/shared/view.coffee#L16-92](https://github.com/viatropos/tower/blob/399fff92ed6477c123fa11bfb5b07405436a87d7/packages/tower-view/shared/view.coffee#L16-92)

# ipad - 设备处于平面模式时的 iPad 方向问题

> ID：12108532
> 
> 赞同：1
> 
> 时间：2012-08-24T11:27:33.623
> 
> 标签：ipad, orientation, landscape-portrait

实际上我开发了一个 iPad 应用程序。它可以根据需要正常工作。但是我在最初启动应用程序时遇到了方向问题。实际上，我将 iPad 平放为横向（水平）样式。现在每次应用程序启动时，它都会以纵向模式打开。我还检查了支持的方向样式和其他内容。我将日志放入 ViewDidLoad 中以获取 3 个方向，1）viewControllerOrientation - 纵向 2） ApplicationStatusbarOrientation - 纵向 3） DeviceOrientation - 平面。

现在我有麻烦，即使设备处于平面模式（它真的像水平一样）而不是纵向，但为什么它总是以纵向模式打开。

# c# - 根据输入坐标绘制多边形

> ID：12108534
> 
> 赞同：5
> 
> 时间：2012-08-24T11:27:38.750
> 
> 标签：c#, draw, polygon

如何根据 C# 中给出的输入坐标绘制多边形。

![在此处输入图像描述](../Images/fe8401f397357958be4ff2cd612fb149.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T13:03:31.600

您没有显示任何代码，因为基于这些坐标，您正在对图像应用某种形式的缩放。

使用 PictureBox 的 Paint 事件，这里是一个使用屏幕上这些坐标的示例。它填充多边形，然后绘制边框，然后循环遍历所有点以绘制红色圆圈：

```
void pictureBox1_Paint(object sender, PaintEventArgs e) {
  e.Graphics.SmoothingMode = SmoothingMode.AntiAlias;
  e.Graphics.Clear(Color.White);

  // draw the shading background:
  List<Point> shadePoints = new List<Point>();
  shadePoints.Add(new Point(0, pictureBox1.ClientSize.Height));
  shadePoints.Add(new Point(pictureBox1.ClientSize.Width, 0));
  shadePoints.Add(new Point(pictureBox1.ClientSize.Width,
                            pictureBox1.ClientSize.Height));
  e.Graphics.FillPolygon(Brushes.LightGray, shadePoints.ToArray());

  // scale the drawing larger:
  using (Matrix m = new Matrix()) {
    m.Scale(4, 4);
    e.Graphics.Transform = m;

    List<Point> polyPoints = new List<Point>();
    polyPoints.Add(new Point(10, 10));
    polyPoints.Add(new Point(12, 35));
    polyPoints.Add(new Point(22, 35));
    polyPoints.Add(new Point(24, 22));

    // use a semi-transparent background brush:
    using (SolidBrush br = new SolidBrush(Color.FromArgb(100, Color.Yellow))) {
      e.Graphics.FillPolygon(br, polyPoints.ToArray());
    }
    e.Graphics.DrawPolygon(Pens.DarkBlue, polyPoints.ToArray());

    foreach (Point p in polyPoints) {
      e.Graphics.FillEllipse(Brushes.Red, 
                             new Rectangle(p.X - 2, p.Y - 2, 4, 4));
    }
  }
} 
```

![在此处输入图像描述](../Images/5eeda63affd23612e7785fac3c8bce87.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T11:32:36.693

您可以使用[Graphics.DrawPolygon](http://msdn.microsoft.com/en-us/library/dd0c4s09%28v=vs.100%29.aspx)。您可以将坐标存储在 Point 数组中，然后可以将其传递给 DrawPolygon 方法。你可能想看：

[使用 C# 在 WinForms 中绘制图形](http://www.dotnettutorials.com/tutorials/graphics/winforms-drawing-cs.aspx)

```
private System.Drawing.Graphics g;
System.Drawing.Point[] p = new System.Drawing.Point[6];
p[0].X = 0;
p[0].Y = 0;
p[1].X = 53;
p[1].Y = 111;
p[2].X = 114;
p[2].Y = 86;
p[3].X = 34;
p[3].Y = 34;
p[4].X = 165;
p[4].Y = 7;
g = PictureBox1.CreateGraphics();
g.DrawPolygon(pen1, p); 
```

# excel - 使用宏设置 Excel 数据连接 (csv)

> ID：12108537
> 
> 赞同：4
> 
> 时间：2012-08-24T11:27:41.177
> 
> 标签：excel, vba

我一直在寻找以下问题的解决方案，但没有发现任何真正有用的东西：我有一个 Excel 表，其中包含与多个 csv 的数据连接。可悲的是，excel确实将连接保存为绝对路径。理想情况下，我可以将路径设置为相对路径，但我会选择一个允许用户根据`thisworkbook.path`首次使用前更新连接的宏。

该项目位于文件夹 d:\project 中，excel 工作表位于 d:\project\excel 中，csv 位于 d:\project\results 中。如果我将项目作为 zip 文件发送给某个用户，然后他解压缩到 c:\my documents\project 中，他将不得不重新连接 10 个左右的 csv。

我的总体想法是编写一个宏（没有真正的代码，因为我是 vba 的新手，如果我知道代码，我就不必问了）

```
filepath = thisworkbook.path
cons = thisworkbook.connections
for each cons
   filename = cons.filename
   newpath = filepath & filename
end for 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-04T12:55:56.800

我知道这是一个老问题，但我现在一直在寻找同样的东西，我终于想通了。也许其他人也说过同样的话，但我没有通过搜索谷歌找到它......

假设您已经具备以下条件：

1.  您已经在工作簿中设置了数据连接（假设它的名称是连接管理器中的 MyData
2.  数据连接的目的地已经定义并且在 Sheet1 中的某个位置
3.  您有一个单元格（例如 Sheet2 的 A1），其中包含要连接到的文件名
4.  您只需要更改连接正在查找的路径，使其遵循工作簿的路径

如果是这种情况，这样的事情应该可以解决问题。

```
Dim fileLoc As String
Dim fileName As String

fileLoc = ThisWorkbook.Path
fileName = Sheet2.Range("A1").Value

Dim conString As String
conString = "TEXT;" & fileLoc & "\" & fileName

Sheet1.QueryTables.Item("MyData").Connection = conString 
```

根据您的情况需要随时修改或调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T20:57:40.857

您可以像这样访问连接路径

```
Sub UpdateConnections()
    Dim con As WorkbookConnection
    Dim ConString As String
    For Each con In ThisWorkbook.Connections
        ConString = con.Ranges.Item(1).QueryTable.Connection
        ' Path update code here
    Next
End Sub 
```

对于文本数据源返回一个字符串，如`"TEXT;C:\My\Path\Documents\FileName.csv"`

在测试这一点时，我发现更改路径也会影响其他一些属性，因此您可能需要在更改路径后重置一堆属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T12:07:51.017

感谢您的帮助，以下是我最后想到的：

```
Sub UpdateAllConnections()

    For Each cn In ThisWorkbook.Connections
        cn.Delete
    Next cn

    Dim arrConNames(1) As String
    Dim arrSheetNames(1) As String
    arrConNames(0) = "test1.csv"
    arrConNames(1) = "test2.csv"
    arrSheetNames(0) = "test1"
    arrSheetNames(1) = "test2"

    Dim indCon As Integer

    For indCon = LBound(arrSheetNames) To UBound(arrSheetNames)
        UpdateConnections arrConNames(indCon), arrSheetNames(indCon)
    Next
End Sub

Sub UpdateConnections(ConName As String, SheetName As String)
    FilePath = ThisWorkbook.Path
    ResultPath = Replace(FilePath, "Excel-Shell", "Results")
    ThisWorkbook.Worksheets(SheetName).Select
    ActiveSheet.Cells.Clear
    With ActiveSheet.QueryTables.Add(Connection:= _
        "TEXT;" & ResultPath & "\" & ConName, Destination:=Range( _
        "$A$1"))
        .Name = ConName
        .FieldNames = True
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .RefreshStyle = xlInsertDeleteCells
        .SavePassword = False
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 0
        .TextFilePromptOnRefresh = False
        .TextFilePlatform = 850
        .TextFileStartRow = 1
        .TextFileParseType = xlDelimited
        .TextFileTextQualifier = xlTextQualifierDoubleQuote
        .TextFileConsecutiveDelimiter = False
        .TextFileTabDelimiter = False
        .TextFileSemicolonDelimiter = True
        .TextFileCommaDelimiter = False
        .TextFileSpaceDelimiter = False
        .TextFileColumnDataTypes = Array(1, 1)
        .TextFileTrailingMinusNumbers = True
        .Refresh BackgroundQuery:=False
    End With
End Sub 
```

# http - 当凭据标志为真时，无法在 Access-Control-Allow-Origin 中使用通配符

> ID：12108538
> 
> 赞同：3
> 
> 时间：2012-08-24T11:27:41.450
> 
> 标签：http, node.js, socket.io

我正在尝试让 nowelium / socket.io-titanium 工作我让它在设备上工作但在网站上我在控制台中收到以下错误

```
XMLHttpRequest cannot load http://127.0.0.1:8080/socket.io/1/?t=1345807417891\. Cannot use wildcard in Access-Control-Allow-Origin when credentials flag is true. 
```

我正在使用 socket.io 这里是 chat.js 服务器

```
var io = require('socket.io').listen(8080);

var archiveMessages = {};
var channels = ['foo channel', 'bar channel'];

var chat = io.of('/chat');
chat.on('connection', function(socket){
  console.log('connected: %s', socket.id);

  // push available channel list
  socket.emit('available_channel', channels);

  socket.on('join', function(value){
    console.log('%s joined channel: %s', socket.id, value.channelId);

    socket.join(value.channelId);
    socket.set('channel_id', value.channelId, function(){
      var messages = archiveMessages[value.channelId] || [];
      socket.emit('joined', messages);
      socket.broadcast.to(value.channelId).emit('user:join', {
        id: socket.id
      });
    });
  });

  socket.on('post', function(message){
    socket.get('channel_id', function(err, channelId){
      console.log('%s says<%s channel>: %s', socket.id, channelId, message);

      if(!(channelId in archiveMessages)){
        archiveMessages[channelId] = [];
      }
      archiveMessages[channelId].push(message);

      socket.emit('posted', {
        message: message
      });
      socket.broadcast.to(channelId).emit('user:message', {
        id: socket.id,
        message: message
      });
    });
  });

  socket.on('disconnect', function(){
    console.log('%s disconnected', socket.id);
    socket.get('channel_id', function(channelId){
      socket.leave(channelId);
      socket.broadcast.to(channelId).emit('user:leave', {
        id: socket.id
      });
    });
  });
});

var image = io.of('/image');
image.on('connection', function(socket){

  socket.on('upload', function(param){
    console.log('upload base64 size: %d', param.base64.length);

    if(param.download){
      socket.emit('download', {
        base64: 's' + new Array(65534).join('0') + 'e'
      });
    }
  });
}); 
```

这是我正在运行的 index.html

```
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>chat sample</title>
    <style>
    #rooms button {
      display: block;
    }
    </style>
    <script type="text/javascript" src="http://localhost:8080/socket.io/dist/socket.io.js"></script>
    <script type="text/javascript">
    var $ = function(id){
      return document.getElementById(id);
    };
    window.addEventListener('load', function (){
      var socket = io.connect('127.0.0.1:8080');

      var chat = socket.of('/chat');

      console.log(chat);

      chat.on('available_channel', function(channels){
        channels.forEach(function (channelId){

          var button = document.createElement('button');
          button.appendChild(document.createTextNode(channelId));

          $('rooms').appendChild(button);
          button.addEventListener('click', function(){
            $('chat').style.display = '';
            chat.emit('join', {
              channelId: channelId
            });
          });
        });
      });

      var addMessage = function(message){
        var li = document.createElement('li');
        li.appendChild(document.createTextNode(message));
        $('messages').appendChild(li);
      };
      chat.on('joined', function(messages){
        messages.forEach(function(message){
          var li = document.createElement('li');
          li.appendChild(document.createTextNode(message));
          $('archives').appendChild(li);
        });
      });
      chat.on('posted', function(value){
        return addMessage('you posted: ' + value.message);
      });
      chat.on('user:join', function(value){
        return addMessage(value.id + ' joined this channel');
      });
      chat.on('user:leave', function(value){
        return addMessage(value.id + ' leaved this channel');
      });
      chat.on('user:message', function(value){
        return addMessage(value.id + ' says ' + value.message);
      });

      $('submit').addEventListener('click', function (){
        var messageValue = $('message').value;
        if(/^\s+$/.test(messageValue)){
          return;
        }

        chat.emit('post', messageValue);
        $('message').value = '';
      });
    });
    </script>
  </head>
  <body>
    <div id="rooms">
    </div>
    <div id="chat" style="display:none">
      <input type="text" id="message" value="" placeholder="message here" />
      <input type="submit" id="submit" value="send" />
      <p>archives</p>
      <ul id="archives" style="color: #999"></ul>
      <p>messages</p>
      <ul id="messages"></ul>
    </div>
  </body>
</html> 
```

谁能告诉我为什么会发生这种情况？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:37:56.827

我想知道将它切换到 localhost 是否可以解决这个问题。

如果我没记错的话，我研究了 Access-Control-Allow-Origin 并将其追溯到网络浏览器作为罪魁祸首。我最终开始寻找一种方法来禁用浏览器进行检查。在 Chrome 中，这是我的快捷方式。

```
...Chrome\Application\chrome.exe --allow-file-access-from-files --disable-web-security 
```

看看这是否有效。我不知道它是否真的可以解决问题，就像它只是抑制问题一样。如果您从您尝试访问的主机调用网页，我认为您根本不会遇到这个问题。例如，当我尝试使用网页 mydomain.com/myprogram.html 访问 mydomain.com 上的 Web 服务时，它不会抱怨跨域访问。

# c# - 从我的 c++ 应用程序调用 c# dll（解析 XML 文件）以将数组/列表返回给 c++

> ID：12108542
> 
> 赞同：2
> 
> 时间：2012-08-24T11:27:59.203
> 
> 标签：c#, c++, visual-c++, dll, interop

我有一个简单的 c++ 应用程序。此应用程序只是打印文本。我还有 ac# .dll NET 3.5，它解析复杂的 xml 文件，提取值并将它们保存到列表中。它就像 2 个具有 4 种方法的类。他们打开一个文件，解析 xml 并将其存储到一个列表中。当 c# .dll 完成后，它有一个包含 10000 个值的列表；

由于我不想用 c++ 编写复杂的解析 XML，我想使用我的 c# xml 解析 .dll。

我是否可以从我的 c++ 应用程序中调用我的 c# .dll，让 c# .dll 解析指定的 xml 文件，然后将创建的列表连同解析的 xml 值返回给我的 c++ 应用程序？

在我的 c++ 应用程序中，我将继续修改返回列表中的数据。

编辑：**我将使用 vc++（Microsoft Visual Studio 2010）**

edit2：vc++ 应用程序将是另一个更大应用程序的扩展/插件。我会将插件注册到那个更大的应用程序中，每次我按下菜单中的图标时，我的 vc++ 应用程序都会启动

编辑3：有没有人经历过这样的任务？如果可能的话，我有点需要明确的是或否。

edit4：**我确实想避免读取由我的 .net .dll 编写的文件。我希望我的 c++ 应用程序向我的 .net .dll 发送一个字符串并接收一个列表/数组对象。或者这是一个坏主意，我应该在 C++ 本身中进行 xml 解析？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T10:48:46.287

是的，你可以做到，但有点难。一种方法是使用 C++ 加载 CLR 并执行您的函数，如下所示：

*受 Blizzhackers.cc 启发的代码*

```
void StartNET()
{
   DWORD result;
   ICLRRuntimeHost* pCLR = NULL;

   CorBindToRuntimeEx(NULL, L"wks", NULL, CLSID_CLRRuntimeHost, IID_ICLRRuntimeHost, (LPVOID*)&pCLR);
   pCLR->Start();

   pCLR->ExecuteInDefaultAppDomain(L"C:\\myNET.dll", L"myNet.Program", L"Main", L"arg", &result);

   pCLR->Stop();
} 
```

此 C++ 代码将从和执行`int Main(string arg)`函数，我的意思是：`namespace myNet``class Program`

myNET.dll：

```
namespace myNet
{
     class Program
     {
            int Main(string arg)
            {
                    //and here you can run your XML parser:

                    List<string> myList = XMLParse();

                    FileStream fs = new Filestream("xmllist.txt");
                    StreamWriter sw = new StreamWriter(fs);

                    foreach(string s in myList)
                         sw.WriteLine(s);

                    sw.Close();
                    fs.Close();

                    return 1;
            }

            List<string> XMLParse()
            {
                    //Your code here
                    return aList;
            }
     }

} 
```

在此之后，您可以使用 c++ 从 xmllist.txt 中获取文件，例如：

```
vector<char[]> getList()
{
      vector<char[]> *myVector = new vector<char>;
      ifstream cin("xmllist.txt");
      while(!cin.eof())
      {
          char line[100];
          cin >> line;
          myVector.push(line);
      }
      cin.close();
      return myVector;
} 
```

我不知道这最后一个功能是否有效，但你明白了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:49:24.207

前段时间我在 C++ 中创建了一个托管/非托管 dll。（请注意，尽管 C++.net 没有最简单的语法。）

实际上，我现在不知道从哪里开始，也许这有信息[http://channel9.msdn.com/Forums/TechOff/101918-Mixing-Managed-and-Unmanaged-C-in-a-DLL](http://channel9.msdn.com/Forums/TechOff/101918-Mixing-Managed-and-Unmanaged-C-in-a-DLL)。这当然很可能与.. VS 2005？这样，您就可以在一个二进制/程序集中管理非托管代码，从而调用 C# dll。

除此之外，您可以将 C# 对象包装为 COM 对象。[http://msdn.microsoft.com/en-us/library/ms404285.aspx](http://msdn.microsoft.com/en-us/library/ms404285.aspx)。然后你可以使用 COM 互操作。

在每种情况下，编组输入/输出都需要一些试验和错误——如果您以前从未做过，这并不那么明显。

实际上，这个链接应该涵盖所有内容：http: [//msdn.microsoft.com/en-us/library/ms973872.aspx](http://msdn.microsoft.com/en-us/library/ms973872.aspx)。

# php - 蛋糕PHP中的两种认证-通过不同的交叉领域

> ID：12108543
> 
> 赞同：0
> 
> 时间：2012-08-24T11:28:03.227
> 
> 标签：php, cakephp

**在我的应用程序中，我需要首先通过用户名和密码**（都是数据库字段）通过两种方式检查用户身份验证，cake php 已经通过

```
 $this->Auth->fields = array(
        'username' => 'username', 
        'password' => 'password'
        ); 
```

现在我需要的是，如果在第一种情况下用户无法进行身份验证，然后检查用户名和**forgot_password**（两者都是数据库字段）的用户数据，我该如何使用 Auth 组件字段？我努力了 ：

```
else
{
$this->Auth->fields = array(
        'username' => 'username', 
        'password' => 'forgot_password'
        );
$this->Auth->login();       
} 
```

但这不起作用..还有其他方法吗？我需要两种类型的交叉检查条件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:51:27.260

您应该必须使用`$this->Auth->constructAuthenticate();`.

```
<?php
function login()
{       
    if ($this->request->is('post'))
    {
        if (!$this->Auth->login())
        {
            $this->Auth->authenticate = array('Form' => array('fields' => array('username' => 'username',
                                                'password' => 'forgot_password')));
            $this->Auth->constructAuthenticate();
            if ($this->Auth->login())
            {
                //Your message here
                //redirect to further pages
            }
            else
            {
                //redirect to login page
            }
        }
    }
} 
```

# java - 在没有处理程序的情况下验证 Soap 消息签名

> ID：12108547
> 
> 赞同：0
> 
> 时间：2012-08-24T11:28:16.363
> 
> 标签：java, web-services, soap, soaphandler

我在使用 Soaphandler 进行签名验证时遇到了一些问题。有没有办法捕捉到soapmessage 或任何方法来验证没有处理程序的Soapmessage 签名？

# sql - 为什么备份 sql server 查询在没有变量的情况下不起作用？

> ID：12108548
> 
> 赞同：2
> 
> 时间：2012-08-24T11:28:17.470
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

这是工作......

```
declare @dbName varchar(50)
set @dbName='myDb'
    BACKUP DATABASE @dbName TO DISK = 'c:\backup\myDb.bak' 
```

但为什么它不起作用？因为两者都是相似的查询。

```
 BACKUP DATABASE 'mydb' TO DISK = 'c:\backup\myDb.bak' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T11:31:26.160

[文档](http://msdn.microsoft.com/en-us/library/ms186865.aspx)说：

```
BACKUP DATABASE { database_name | @database_name_var } 
    TO <backup_device> [ ,...n ] 
```

所以它需要一个数据库名称 (fe `mydb`) 或一个变量 (fe `@dbname`.) 但不是字符串文字 (fe `'mydb'`.)

只需省略引号即可将字符串文字更改为数据库名称：

```
BACKUP DATABASE mydb TO DISK = 'c:\backup\myDb.bak' 
```

# c# - 将数据行分配给通过数据表选择方法获取的数据行的索引，而不是更新该数据表

> ID：12108549
> 
> 赞同：1
> 
> 时间：2012-08-24T11:28:18.733
> 
> 标签：c#, datatable, datatable.select

有一个数据表（source），并且创建了这个数据表的一个副本（copy），并且在这个副本中，DataGridView中的一些行被修改了。

修改结束后，一个方法是用复制数据表中的修改行更新源数据表。

```
DataTable source ;// it is population by database. 
```

及其副本

```
DataTable copy = source.Copy(); // Here is the copy datatble. 
```

方法是这样的：

```
public static void UpdateData(DataTable source, DataTable copy)
{
    foreach (DataRow row in copy.Rows)
    {
        if (row.RowState == DataRowState.Modified)
        {
            var relRow = source.Select("Id = '" + row["Id"] + "'");
            if (relRow.Any())
            {
                //relRow[0] = row; //This statement is not udating row in the source dataTable.
                foreach (var column in copy.Columns)
                {
                    relRow[0][column.ColumnName] = row[column.ColumnName];
                }
            }
        } 
        else if (row.RowState == DataRowState.Added)
        {
               //Performing some operations to for checking additional values. modiging 'row' with some relative data, and adding to source.
                source.Rows.Add(row.ItemArray);
        }       
    }

    return source;
} 
```

当将行对象分配给 datarows 数组的第一个元素 `relRow[0] = row`时，它不会更新源数据表，而是在 relRow[0] 中调试时显示修改后的数据。

逐列分配反映数据表中的更改。

所以，问题是：为什么`relRow[0] = row`不在源数据表中更新？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:11:03.943

通过编写`relRow[0] = row;`，您只需重新分配 relRow 的*引用*，修改本地数组的第 0 个元素。它实际上并没有改变表中行的内容。您的代码与以下内容相同：

```
DataRow[] localRows;
// here, localRows will reference items in the source table. 
// Below, you overwrite the reference.
localRows = source.Select("Id = '" + row["Id"] + "'");
if(localRows.Any())
{
    //changes what reference the 0th element of the localRows array points to,
    // doesn't change anything about the datatable.
    // localRows[0] now points to the local variable row (i.e. the item from copy)
    localRows[0] = row; 
} 
```

要修改表格，您可以替换`relRow[0] = row;`为修改relRow*元素*而不是其引用的内容：

```
for(var col = 0; col < source.Columns.Count; i++)
{
    relRow[0][col] = row[col];
} 
```

# api - Shopify 订单 API 中是否公开了订单项属性？

> ID：12108551
> 
> 赞同：3
> 
> 时间：2012-08-24T11:28:22.137
> 
> 标签：api, shopify

是否可以在 Order API 中检索所有订单行项目的自定义属性（参见此处[http://wiki.shopify.com/Line_Item_Properties ）？](http://wiki.shopify.com/Line_Item_Properties)

我需要为所有订单创建一个自定义报告，但它们依赖于显示这些属性。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T13:37:52.383

默认情况下，订单项属性通过它们存在的 Order API 公开。这是一个示例行项目 XML 片段，请注意底部的“会标”属性：

```
<line-items type="array">
  <line-item>
    <id type="integer">223039148</id>
    <requires-shipping type="boolean">true</requires-shipping>
    <fulfillment-service>manual</fulfillment-service>
    <grams type="integer">0</grams>
    <price type="decimal">9.99</price>
    <quantity type="integer">1</quantity>
    <sku/>
    <title>All the Tests</title>
    <product-id type="integer">90620559</product-id>
    <variant-id type="integer">212221205</variant-id>
    <vendor>soundcloud</vendor>
    <variant-title nil="true"/>
    <fulfillment-status nil="true"/>
    <name>All the Tests</name>
    <variant-inventory-management/>
    <properties type="array">
      <property>
        <name>Monogram</name>
        <value>omg</value>
      </property>
    </properties>
  </line-item>
</line-items> 
```

请注意，如果属性数组为空，则该数组将不存在，因此请确保在代码中满足这一要求。

# javascript - 修剪正则表达式结果

> ID：12108554
> 
> 赞同：0
> 
> 时间：2012-08-24T11:28:40.163
> 
> 标签：javascript, regex

我正在使用 RegExp 从字符串中提取特定单词，如下所示：

```
&lt;div&nbsp;class&nbsp;=&nbsp;&#39;&#39;&gt;&lt;/div&gt;class&nbsp;class&nbsp; 
```

我目前的 RegExp 语句是这样的：

```
/(&lt;)[^(&gt;)]*(;|&nbsp;|&#39;|&quote;)(class)?(&nbsp;|&#39;|&quote;|=)/gi 
```

在这种情况下，我不想匹配“类”这个词，但前提是它之前和之后都有特定的字符（或与号）。此语句匹配：

```
&lt;div&nbsp;class&nbsp; 
```

在原始字符串之外，我在替换方法中使用它（在“类”所在的位置插入文本）并且我想保留它周围的其他字符，有没有办法将此匹配修剪为仅选择（替换）单词“类”（在这种情况下）？

或者有没有更好的方法来做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:27:10.937

您可以使用下一个代码来完成这项工作：

```
var removeSubstring=(function(){
    var fn=function($0,$1,$2,$3){return $1+$3;};
    return function(str,before,after,removed){
        var rg=new RegExp("("+before+")("+removed+")("+after+")","gi");
        return str.replace(rg,fn);
    };
})();

var str="&lt;div&nbsp;class&nbsp;=&nbsp;&#39;&#39;&gt;&lt;/div&gt;class&nbsp;class&nbsp;&lt;div&nbsp;class&nbsp;";
var before="&lt;div&nbsp;";
var after="&nbsp;";
var removed="class";

removeSubstring(str,before,after,removed);
// &lt;div&nbsp;&nbsp;=&nbsp;&#39;&#39;&gt;&lt;/div&gt;class&nbsp;class&nbsp;&lt;div&nbsp;&nbsp; 
```

但是您必须确保 in*`before`*和字符串中*`after`*的*`removed`*内容不包含特殊的*RegExp*格式字符（例如`.` `[` `]` `?` `*`和其他，请参阅[MDN RegExp](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)）。否则必须先转义*`before`*,*`after`*和*`removed`*字符串中的这些特殊字符。

**更新：**

您还可以使用有效的*正则表达式*来*`before`*进行*`after`*更*`removed`*灵活的搜索。例如下一个代码删除字母*'X'*，*'V'*和*'Z'*但不删除*'x'*，*'v'*和*'z'*：

```
var str="qXd ezrwsvrVa etxceZd";
var before="q|w|e|r";
var after="a|s|d|f";
var removed="z|x|c|v";

removeSubstring(str,before,after,removed);
// "qd ezrwsvra etxced" 
```

如果您需要用另一个字符串替换子字符串，您可以使用下一个函数：

```
function replaceSubstring(str,before,after,removed,inserted){
    var rg=new RegExp("("+before+")("+removed+")("+after+")","gi");
    return str.replace(rg,function($0,$1,$2,$3){
        // $1 is searched "before" substring
        // $2 is searched "removed" substring
        // $3 is searched "after" substring
        return $1+(inserted||"")+$3;
    });
};

var str="qXd ezrwsvrVa etxceZd";
var before="q|w|e|r";
var after="a|s|d|f";
var removed="z|x|c|v";
replaceSubstring(str,before,after,removed,"DDDD")
// "qDDDDd ezrwsvrDDDDa etxceDDDDd" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:38:52.467

尝试这个：

```
var match = /your regex here/.exec(myString)
match = match.replace('class','') 
```

# java - TextField 大小和垂直对齐

> ID：12108559
> 
> 赞同：4
> 
> 时间：2012-08-24T11:28:56.287
> 
> 标签：java, swing, layout, miglayout

我[在](http://www.miglayout.com/)`DialogBox`. _

每个面板都使用 MigLayout。

显示行有一个面板。每列都有一个面板（交付类型、选择元素、排序）。输出文件行有一个面板。有一个按钮面板。

也许有更好的方法可以在没有太多面板的情况下做到这一点？

![miglayout 示例](../Images/576c44aef3398ef1da50bf7829fe466c.png)

我的代码

```
//set global layout
this.setLayout( new MigLayout( "wrap 3, debug" ) );

this.add( getSearchPanel(), "span 3, wrap" );

// middle section
this.add( getLivraison(), "width 33%" );
this.add( getChoixElement(), "width 33%" );
this.add( getProfile(), "width 33%" );

JLabel lblFichierSortie = new JLabel( "Output file" );
JTextField txtFichierSortie = new JTextField();
this.add( lblFichierSortie, "span 2, right" );
this.add( txtFichierSortie, "width 33%, wrap" );

this.add( getButton(), "span 3, right" );

private JPanel getSearchPanel() {
    JPanel searchPanel = new JPanel( new MigLayout() );

    JLabel lblEmission = new JLabel( "Show" );
    JTextField txtEmission = new JTextField( 10 );
    JTextField txtEM = new JTextField( 5 );

    searchPanel.add( lblEmission, "width 2%" );
    searchPanel.add( txtEmission, "split 2,right,width 60%, growx" );
    searchPanel.add( txtEM, "width 38%, growx" );

    return searchPanel;
}

private JPanel getLivraison() {
    JPanel livraisonPanel = new JPanel( new MigLayout() );
    JLabel lblComponent1 = new JLabel( "Delivery type" );
    JCheckBox chkFluxElementaire = new JCheckBox( "Flux" );
    JCheckBox chkTranscoding = new JCheckBox( "Transcoding" );

    livraisonPanel.add( lblComponent1, "wrap" );
    livraisonPanel.add( chkFluxElementaire, "wrap" );
    livraisonPanel.add( chkTranscoding, "wrap" );

    return livraisonPanel;
}

private JPanel getChoixElement() {
    JPanel component2 = new JPanel( new MigLayout() );
    JLabel lblChoix = new JLabel( "Choose element" );
    JLabel lblVideo = new JLabel( "Vidéo" );

    JLabel lblAudio = new JLabel( "Audio" );
    JLabel lblAudio2 = new JLabel( "Audio 2" );
    JLabel lblSubTitle = new JLabel( "ST" );
    JLabel lblMontage = new JLabel( "Montage" );

    //todo put combobox below every label
    component2.add( lblChoix, "wrap" );
    component2.add( lblVideo,"wrap" );
    component2.add( lblAudio,"wrap" );
    component2.add( lblAudio2, "wrap" );
    component2.add( lblSubTitle, "wrap" );
    component2.add( lblMontage, "wrap" );

    return component2;
}

private JPanel getProfile() {
    JPanel component3 = new JPanel( new MigLayout() );
    JLabel lblSortie = new JLabel( "Sortie" );
    component3.add( lblSortie, "wrap" );

    JLabel lblProfil = new JLabel( "Profil" );
    component3.add( lblProfil, "wrap" );

    JComboBox cbxProfil = new JComboBox();
    component3.add( cbxProfil, "wrap" );

    return component3;
}

private JPanel getButton() {
    JPanel buttonPanel = new JPanel( new MigLayout( "fillx,insets 0" ) );

    JButton okButton = new JButton( "Ok" );
    okButton.setMnemonic( 'O' );
    buttonPanel.add( okButton, "split,right,width 100!" );

    // Cancel button
    JButton cancelButton = new JButton( "Cancel" );
    cancelButton.setMnemonic( 'C' );

    buttonPanel.add( cancelButton, "width 100!" );
    return buttonPanel;
} 
```

在我移动窗口之前，我的文本字段没有大小，我不明白为什么。另外，为什么不是每列的组件都从面板顶部开始？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T12:19:22.557

试试这个“顶部对齐问题”：

```
// set global layout
this.setLayout(new MigLayout("wrap 3, debug", null, "[top]")); 
```

对于“texfield 大小问题”：

```
this.add(getSearchPanel(), "span 3, wrap, grow"); 
```

如果您想在没有内部 JPanel 的情况下获得相同的结果，您可以这样做：

```
final JLabel lblEmission = new JLabel("Show");
final JTextField txtEmission = new JTextField(10);
final JTextField txtEM = new JTextField(5);

this.add(lblEmission, "width 2%, span 3, split 3");
this.add(txtEmission, "right,width 60%, growx");
this.add(txtEM, "width 38%, growx"); 
```

但是，这不是我最喜欢的解决方案。使用内部面板，代码更加简单和可重用。我认为当您在组件上添加一些用于用户交互的侦听器和用于与模型交互的控制器时，此代码将过于复杂。当这种情况发生时，您可能希望将其提取到具有[单一责任](http://en.wikipedia.org/wiki/Single_responsibility_principle)`SearchPanel`的可重用顶级类中。如果没有简单的内部面板，提取这个类会困难得多。

这就是为什么当我设计 swing gui 时，我更喜欢先使用[BorderLayout](http://docs.oracle.com/javase/7/docs/api/java/awt/BorderLayout.html)，然后使用 MigLayout（对于更复杂的面板）。

# c# - 保持 ASP.NET 会话活动

> ID：12108564
> 
> 赞同：0
> 
> 时间：2012-08-24T11:29:23.110
> 
> 标签：c#, asp.net-mvc-3, session

根据我们当前的设置，需要在两个站点之间维护镜像会话，一个托管在 IIS 6.0 中的现有 ASP.NET 网站，现在将新网站包含在 iFrame 中，并单独托管在 IIS 7.5（它是 MVC3）中。

有人对如何使父会话与子网站会话保持一致有任何建议吗？

我最初的想法是创建一个 ActionFilter 以在 OnActionExecuting 方法上向父站点上的各种 HTTPHandler 触发 HttpWebRequest。有人怀疑这将如何保持特定会话内联，可能缺少关于会话 ID 的各种知识？

就像是：

```
public override void  OnActionExecuting(ActionExecutingContext filterContext)
{
    try
    {
        var request = WebRequest.Create(
                      ConfigurationManager.AppSettings["HeartbeatURI"]);
        using (var webResponse = request.GetResponse())
        {
            var response = webResponse as HttpWebResponse;
            if (response != null && response.StatusCode == HttpStatusCode.OK)
            { 
```

有人在这里有任何建议/建议吗？谢谢！

**更新：**

在提出一些有用的建议后，我将调查浏览器是否提供解决方案，例如：

```
function setHeartbeat() {
    setTimeout("heartbeat()", 300000); // every 5 min
}

function heartbeat() {
    $.get(
        "http://soemthing:1234/heartbeathandler.ashx",
        null,
        function(data) {
            setHeartbeat();
        },
        "json"
    );
} 
```

将按我的要求执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:50:24.667

您的代码示例没有考虑两个基本问题：

首先，会话是每个客户端的。*此解决方案尝试从辅助服务器*“检测”单个连接。所以它不会工作。

其次，会话需要客户端交互，通过 cookie 或特殊的额外 URL 值。该解决方案没有尝试合并这些，因此根本不会创建任何会话。

编辑：还有第三个问题：*无论您做什么，*都不能保证进程中的会话保持活跃；应用程序随时可能被回收，应用程序回收将擦除进程中的会话值。因此，您需要有一些外部会话管理系统，以便维护会话（在*两台服务器上）。*

* * *

不过，真的；尝试像这样保持会话非常脆弱。听起来它对您的应用程序非常重要，但几乎不能保证它会一直工作。IMO，重新引用您的应用程序不需要会话，或者能够即时重建它们，将是一个更好的选择。

# wpf - 如何根据列值禁用 listviewitem 行

> ID：12108568
> 
> 赞同：0
> 
> 时间：2012-08-24T11:29:30.770
> 
> 标签：wpf, data-binding, row, listviewitem, datatrigger

请帮我

根据列属性之一禁用 listviewitem。

说，在列表视图行中，如果我选中了某个复选框，那么我必须禁用该行。

问候， 拉曼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:09:54.310

```
 <ListView>
        <ListView.ItemTemplate>
            <DataTemplate >
                <StackPanel Orientation="Horizontal">
                    <Label Content="{Binding}"  IsEnabled="{Binding ElementName=ch,Path=IsChecked}"/>
                    <CheckBox Name="ch"/>
                </StackPanel>
            </DataTemplate>
        </ListView.ItemTemplate>
        <ListBoxItem Content="item 1"/>
        <ListBoxItem Content="item 2"/>
    </ListView> 
```

# android - 如何找到列表视图滚动完成的时间？

> ID：12108570
> 
> 赞同：1
> 
> 时间：2012-08-24T11:29:39.340
> 
> 标签：android, listview

有没有可以调用的方法来找出滚动没有起作用？

或者是否有任何可以设置为在列表视图停止滚动时调用的侦听器？

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T11:38:07.647

```
 listView.setOnScrollListener(new OnScrollListener() {
                    @Override
                    public void onScrollStateChanged(AbsListView view, int scrollState) {
                        switch (scrollState) {
                        case OnScrollListener.SCROLL_STATE_IDLE:
                            Log.i("", "here scrolling is finished");
                            break;
                        case OnScrollListener.SCROLL_STATE_TOUCH_SCROLL:
Log.i("", "here scrolling is finished");
                        case OnScrollListener.SCROLL_STATE_FLING:
                            Log.i("", "its scrolling....");
                            break;
                        default:
                            break;
                        }
                    } 
```

祝你好运...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T11:32:10.637

您需要实现`OnScrollListener`which 提供的方法可以帮助您检测`ListView`. 阅读[这篇](https://stackoverflow.com/questions/6358428/implementation-of-onscrolllistener-to-detect-the-end-of-scrolling-in-a-listview)文章。

# unit-testing - 在单元测试中模拟查找表是否正确？

> ID：12108577
> 
> 赞同：0
> 
> 时间：2012-08-24T11:29:49.117
> 
> 标签：unit-testing, mocking

当您为逻辑层编写测试时，您模拟了所使用的数据访问层，因为您不希望测试用例相互依赖。

但是查找表呢？假设您有一个根据**Sizes**表中的大小计算值的逻辑：

小 1
中 2
大 3

现在，您是否在测试中以某种方式模拟此表？例如使用字典？当表发生变化时（*一个真正的配置表将包含数百个值，有时不会是简单的键值形式*）你如何保持代码和表不同步？

或者你改变这个规则......并直接从数据库中获取值？但是如果明天我更改数据源怎么办？或者我无法以某种方式访问​​数据库？测试用例不应该在任何条件下运行吗？

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:41:00.167

我仍然会模拟查找表，即使对于“快乐”的测试场景，您只需返回从数据库返回的真实数据。

但是您可以灵活地测试边缘情况，例如从数据库中删除数据的情况，或者是否没有返回数据。

例如

```
// Happy tests:
Mock.Setup for GetLookupData() => return FetchRealDataHere();
Assert.AreEqual(3, Mock.Object.CountOfSizes()); // Ensure that Small, Medium and Large
... Do Good scenario unit Tests here

// Test Edge cases / destructive tests
Mock.Setup for GetLookupData() => return new Collection() [{ Small, 1}] [{ Medium 2}] -   // But omit large
... Exception case Unit tests here, e.g. Try and Insert a Large product here.

// Test empty collection
Mock.Setup for GetLookupData() => return new Collection() [Empty]
//  Assert that "NoItemsFoundException" was thrown by your logic here

// Handle empty collection
Mock.Setup for GetLookupData() => return new Collection() [Empty] 
```

**编辑**我已经为下面的更新评论更新了伪模拟设置/单元测试代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:36:18.693

单元测试的主要思想是，您不需要整个数据来测试您的逻辑。您正在寻找一些代表不同案例的数据，并证明这些案例的逻辑。就这样。但是，通过单元测试，您不是在测试数据，而是在测试程序逻辑。

# c# - 转换日期时间

> ID：12108578
> 
> 赞同：3
> 
> 时间：2012-08-24T11:29:51.270
> 
> 标签：c#, datetime-format

> **可能重复：**
> [如何在 C# 中将 DateTime 对象转换为 dd/mm/yyyy？](https://stackoverflow.com/questions/941502/how-to-convert-datetime-object-to-dd-mm-yyyy-in-c)

我是 c# 的新手，希望有人可以帮助我清理一些代码。

我有以下方法将 DateTime 转换为自定义事件字符串，例如`30th of Jan 2012`转换为`201201`（忽略日期）

```
public ConvertToEventDate(DateTime date)
{   
    var year = date.Year.ToString();
    var month = date.Month.ToString();
    month = month.Length == 2 ? month : "0" + month;
    return year + month;
} 
```

我想知道是否有更好的方法来进行这种转换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:31:17.407

```
public string ConvertToEventDate(DateTime date)
{ 
    return date.ToString("yyyyMM", CultureInfo.InvariantCulture);
} 
```

查看[自定义格式字符串文档](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T11:31:22.207

我会这样做；

```
public string ConvertToEventDate(DateTime date)
{   
    return date.ToString("yyyyMM");
} 
```

您也可以将其放入这样的扩展方法中；

```
public static class ExtenstionMethods
{
    public static string ToEventDate(this DateTime date)
    {
        return date.ToString("yyyyMM");
    }
} 
```

然后这样称呼它；

```
DateTime date = new DateTime(2012, 30, 1);

    date.ToEventDate(); 
```

与此相反；

```
ConvertToEventDate(date); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T11:34:28.253

其他人建议`ToString("yyyyMM")`基本上就在那里 - 但我*建议*你可能想要指定不变的文化*。*否则，如果线程的当前文化使用非公历，您最终可能会得到一个您不期望的月/年。所以我会使用：

 *```
string text = date.ToString("yyyyMM", CultureInfo.InvariantCulture); 
```

如果您想稍后更改确切的格式，请参阅[自定义日期和时间格式字符串的文档以获取更多信息。](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T11:31:51.697

尝试

```
return date.ToString("yyyyMM"); 
```*

# c# - 提取两个字符之间的字符串？

> ID：12108582
> 
> 赞同：7
> 
> 时间：2012-08-24T11:30:21.923
> 
> 标签：c#, .net, string, visual-studio-2010

我想在`< >`

例如。

输入字符串：`"abc" <abc@gmail.com>; "pqr" <pqr@gmail.com>;`

输出字符串：`abc@gmail.com;pqr@gmail.com`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-01-17T11:34:56.810

没有正则表达式，你可以使用这个：

```
public static string GetStringBetweenCharacters(string input, char charFrom, char charTo)
    {
        int posFrom = input.IndexOf(charFrom);
        if (posFrom != -1) //if found char
        {
            int posTo = input.IndexOf(charTo, posFrom + 1);
            if (posTo != -1) //if found char
            {
                return input.Substring(posFrom + 1, posTo - posFrom - 1);
            }
        }

        return string.Empty;
    } 
```

进而：

`GetStringBetweenCharacters("\"abc\" <abc@gmail.com>;", '<', '>')`

你会得到

`abc@gmail.com`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-24T11:45:28.227

```
string input = @"""abc"" <abc@gmail.com>; ""pqr"" <pqr@gmail.com>;";
var output = String.Join(";", Regex.Matches(input, @"\<(.+?)\>")
                                    .Cast<Match>()
                                    .Select(m => m.Groups[1].Value)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-24T14:24:53.307

经过测试

```
string input = "\"abc\" <abc@gmail.com>; \"pqr\" <pqr@gmail.com>;";
matchedValuesConcatenated = string.Join(";", 
                                Regex.Matches(input, @"(?<=<)([^>]+)(?=>)")
                                .Cast<Match>()
                                .Select(m => m.Value)); 
```

(?<=<) 是后面的非捕获外观，因此 < 是搜索的一部分，但不包含在输出中

捕获组不超过一次或多次

也可以使用非捕获组 @"(?:<)([^>]+)(?:>)"

LB+1 的答案也是正确的。直到我自己写了一个答案，我才意识到这是正确的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T11:37:00.087

使用该[`String.IndexOf(char, int)`方法](http://msdn.microsoft.com/en-us/library/5xkyx09y.aspx)`<`从字符串中的给定索引开始搜索（例如，您在其中找到`>`字符的最后一个索引，即在前一个电子邮件地址的末尾 - 或`0`在查找第一个地址时）。

编写一个循环，只要找到另一个`<`字符就会重复，每次找到一个`<`字符时，都要寻找下一个`>`字符。使用该[`String.Substring(int, int)`方法](http://msdn.microsoft.com/en-us/library/aka44szs.aspx)提取您知道其开始和结束位置的电子邮件地址。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T11:49:25.450

可以使用以下正则表达式和一些 linq。

```
 var regex = new Regex(@"\<(.*?)\>");
        var input= @"""abc"" <abc@gmail.com>;  ""pqr""  <pqr@gmail.com>";
        var matches = regex.Matches(input);
       var res = string.Join(";", matches.Cast<Match>().Select(x => x.Value.Replace("<","").Replace(">","")).ToArray()); 
```

<> 括号之后被删除，你也可以将它整合到`Regex`我猜。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-08-24T11:39:21.033

```
string str = "\"abc\" <abc@gmail.com>; \"pqr\" <pqr@gmail.com>;";
        string output = string.Empty;
        while (str != string.Empty)
        {
            output += str.Substring(str.IndexOf("<") + 1, str.IndexOf(">") -1);
            str = str.Substring(str.IndexOf(">") + 2, str.Length - str.IndexOf(">") - 2).Trim();
        } 
```

# php - 如何按相同的键和值对数组进行分组

> ID：12108584
> 
> 赞同：14
> 
> 时间：2012-08-24T11:30:30.090
> 
> 标签：php, arrays

我有一个这样的数组：D

```
Array
(
[0] => Array
    (
        [type] => AAA
        [label_id] => A1,35
    )

[1] => Array
    (
        [type] => AAA
        [label_id] => A2,34
    )

[2] => Array
    (
        [type] => BBB
        [label_id] => B1,29
    )

[3] => Array
    (
        [type] => CCC
        [label_id] => C1,20
    )

[4] => Array
    (
        [type] => CCC
        [label_id] => C2,19
    )

[5] => Array
    (
        [type] => CCC
        [label_id] => C3,18
    )
) 
```

现在我想让它像这样按相同的键和值分组。

```
Array
(
[0] => Array
    (
        [type] => AAA
        [label_id] => Array
            (
                [0] => A1,35
                [1] => A2,34
            )
    )
[1] => Array
    (
        [type] => BBB
        [label_id] => Array
            (
                [0] => B1,29
            )
    )
[2] => Array
    (
        [type] => CCC
        [label_id] => Array
            (
                [0] => C1,20
                [1] => C2,19
                [2] => C3,18
            )
   )
   ) 
```

有谁知道这是怎么做到的吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-24T11:47:56.547

这应该可以解决问题

```
$args = array
(
    array( 'type' => 'AAA', 'label_id' => 'A1,35' ),
    array( 'type' => 'AAA', 'label_id' => 'A2,34' ),
    array( 'type' => 'BBB', 'label_id' => 'B1,29' ),
    array( 'type' => 'CCC', 'label_id' => 'C1,20' ),
    array( 'type' => 'CCC', 'label_id' => 'C2,19' ),
    array( 'type' => 'CCC', 'label_id' => 'C3,18' )  
);

$tmp = array();

foreach($args as $arg)
{
    $tmp[$arg['type']][] = $arg['label_id'];
}

$output = array();

foreach($tmp as $type => $labels)
{
    $output[] = array(
        'type' => $type,
        'label_id' => $labels
    );
}

var_dump($output); 
```

输出是：

```
array
  0 => 
    array
      'type' => string 'AAA' (length=3)
      'label_id' => 
        array
          0 => string 'A1,35' (length=5)
          1 => string 'A2,34' (length=5)
  1 => 
    array
      'type' => string 'BBB' (length=3)
      'label_id' => 
        array
          0 => string 'B1,29' (length=5)
  2 => 
    array
      'type' => string 'CCC' (length=3)
      'label_id' => 
        array
          0 => string 'C1,20' (length=5)
          1 => string 'C2,19' (length=5)
          2 => string 'C3,18' (length=5) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-24T11:35:42.933

```
<?php

$grouped_types = array();

foreach($types as $type){
        $grouped_types[$type['type']][] = $type;
}

?> 
```

# html - Google 文档查看器禁用下载

> ID：12108585
> 
> 赞同：5
> 
> 时间：2012-08-24T11:30:39.453
> 
> 标签：html, pdf, iframe, google-docs

请看一下这个链接

[http://jsfiddle.net/C7Py6/3/](http://jsfiddle.net/C7Py6/3/)

谷歌查看器工具栏上的最后一个图标 -![在此处输入图像描述](../Images/9c0bbc8afec70f385f98c2dd6316dece.png)使用户能够在新的浏览器窗口中查看并下载 PDF。问题是，我怎样才能让它只查看并禁用下载（至少禁用此工具栏项）。谷歌查看器可以吗？还是有任何其他查看器可以像 Google Viewer 一样工作，但只能查看？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T10:00:30.063

您可以在 Google Docs 上托管您的 PDF 文件并阻止查看器下载。为此，请执行以下操作：

1.  在 docs.google.com 网站上登录您的 Google 文档帐户后，您应该会在您的帐户中看到文档列表。右键单击要通过禁用下载选项保护的特定文档。
2.  然后点击“阻止观众下载”选项。这将删除下载选项，其他查看文档的用户无法下载整个文档文件并复制其副本。

![在此处输入图像描述](../Images/26403973b0715ef96ad28f3ba1a7c91f.png)

另请注意，由于您只能阻止下载您创建的文档，请单击左侧的“我拥有”选项。这将显示您创建和拥有的文档。然后，您可以禁用和阻止显示文件的文档下载选项。

然后，您可以在您的网站上共享此 PDF。它只会被**查看**。代码将如下所示：

```
<iframe src="url to pdf/preview" width="640" height="480"></iframe> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T21:36:01.313

这种技术仍然允许用户“制作副本”，并且拥有所有权，他们可以随意下载。没有测试过这个，但我很确定我是对的......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T05:24:21.400

这是控制 Google Apps 的所有功能的简单方法[http://www.saasid.com/what-we-do/saasid-for-google-apps/](http://www.saasid.com/what-we-do/saasid-for-google-apps/)

应用程序特性控制使组织可以完全管理应用程序特性和功能，而无需对应用程序后端进行复杂更改。选项卡、菜单选项、按钮和链接可以被禁用或从视图中删除，或者可以简单地监控和记录它们的使用。Google Apps 的应用程序功能控制功能包括：

可以将 Gmail 设为仅限公司使用，可以删除 Gmail 邮件的文件附件，删除聊天框，从 Google 云端硬盘的菜单或文档编辑器中删除共享选项

# django - Django collectstatic 无法与 django-pipeline 和 yui-compressor 一起使用

> ID：12108586
> 
> 赞同：2
> 
> 时间：2012-08-24T11:30:48.097
> 
> 标签：django, yui-compressor, broken-pipe

我已经在 virtualenv 下的 Django 1.4.1 应用程序上安装了[django-pipeline](https://github.com/cyberdelia/django-pipeline/)，但是当我运行时`python manage.py collectstatic`，我得到：

```
Traceback (most recent call last):
  File "./manage.py", line 11, in <module>
    execute_manager(settings)
  File "/home/hg/VIRTUALENVS/movie/lib/python2.6/site-packages/django/core/management/__init__.py", line 459, in execute_manager
    utility.execute()
  File "/home/hg/VIRTUALENVS/movie/lib/python2.6/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/home/hg/VIRTUALENVS/movie/lib/python2.6/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/home/hg/VIRTUALENVS/movie/lib/python2.6/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/home/hg/VIRTUALENVS/movie/lib/python2.6/site-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/home/hg/VIRTUALENVS/movie/lib/python2.6/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py", line 163, in handle_noargs
    collected = self.collect()
  File "/home/hg/VIRTUALENVS/movie/lib/python2.6/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py", line 119, in collect
    dry_run=self.dry_run)
  File "/home/hg/VIRTUALENVS/movie/lib/python2.6/site-packages/pipeline/storage.py", line 30, in post_process
    packager.pack_stylesheets(package)
  File "/home/hg/VIRTUALENVS/movie/lib/python2.6/site-packages/pipeline/packager.py", line 90, in pack_stylesheets
    variant=package.variant, **kwargs)
  File "/home/hg/VIRTUALENVS/movie/lib/python2.6/site-packages/pipeline/packager.py", line 100, in pack
    content = compress(paths, **kwargs)
  File "/home/hg/VIRTUALENVS/movie/lib/python2.6/site-packages/pipeline/compressors/__init__.py", line 76, in compress_css
    css = getattr(compressor(verbose=self.verbose), 'compress_css')(css)
  File "/home/hg/VIRTUALENVS/movie/lib/python2.6/site-packages/pipeline/compressors/yui.py", line 14, in compress_css
    return self.compress_common(css, 'css', settings.PIPELINE_YUI_CSS_ARGUMENTS)
  File "/home/hg/VIRTUALENVS/movie/lib/python2.6/site-packages/pipeline/compressors/yui.py", line 8, in compress_common
    return self.execute_command(command, content)
  File "/home/hg/VIRTUALENVS/movie/lib/python2.6/site-packages/pipeline/compressors/__init__.py", line 235, in execute_command
    pipe.stdin.write(smart_str(content))
IOError: [Errno 32] Broken pipe 
```

我的设置是：

```
# static
STATIC_ROOT = join(REPOSITORY_ROOT, 'static_collected')
STATIC_URL = '/static/'
STATICFILES_DIRS = (join(REPOSITORY_ROOT, 'static'),)
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
)

# pipeline (css/js compression)
STATICFILES_STORAGE = 'pipeline.storage.PipelineCachedStorage'
PIPELINE = True
PIPELINE_CSS = {
    'base_style': {
        'source_filenames': (
            'css/style.css',
            'css/effects.css',
            'css/rs_style.css',
            'css/jq/jquery-ui-movieplayer.css',
        ),
        'output_filename': 'CACHE/css/style.css',
    },
}

PIPELINE_JS = {
    'base_scripts': {
        'source_filenames': (
          'js/jq/jquery.js',
          'js/mv.core.js',
          'js/toolbox/toolbox.core.js',
          'js/swfobject.js',
          'swf/jwplayer5.9.2156.js',
          'js/jq/jquery-ui.custom.min.js',
          'js/mongo_autocomplete.js',
          'js/rs_script.js',
        ),
        'output_filename': 'CACHE/js/scripts.js',
    }
} 
```

在添加 django-pipeline 之前，管理命令运行良好，它找到了所有内容，因此与查找静态文件或目录权限无关。Yuicompressor 是全局安装的，可以在下面找到，`/usr/local/bin/yuicompressor`所以我没有`PIPELINE_YUI_BINARY`在我的设置中修改。

有什么线索吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:12:23.570

```
IOError: [Errno 32] Broken pipe 
```

这个错误意味着`yuicompressor`在我们有时间发送数据之前已经退出（大部分时间是因为它崩溃或因为它没有被发现）。检查您的`yuicompressor`路径，并检查是否`yuicompressor`确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:09:51.427

在设置中添加可执行文件的路径，例如

```
PIPELINE_YUI_BINARY = '/usr/bin/yui-compressor'
PIPELINE_LESS_BINARY = '/usr/local/lib/node_modules/less/bin/lessc' 
```

路径可能不同（尤其是对于 lessc，在此示例中，less 是使用“npm install -g less”安装的）

# jsoup - Jsoup 错误？Jsoup.parse 卡住

> ID：12108588
> 
> 赞同：1
> 
> 时间：2012-08-24T11:30:51.470
> 
> 标签：jsoup

我尝试解析以下网址：[http ://www.cisg.law.pace.edu/cisg/biblio/full-biblio.html](http://www.cisg.law.pace.edu/cisg/biblio/full-biblio.html)

```
URL url = new URL("http://www.cisg.law.pace.edu/cisg/biblio/full-biblio.html");
int timeout = 20 * 1000;
System.out.println("Start parsing...");
Jsoup.parse(url, timeout);
System.out.println("Done"); 
```

我运行它并且从未收到“完成”消息。奇怪的是，这个 HTML 只有 3MB，所以我看不出它需要这么长时间的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T14:25:37.473

似乎是一个错误。我已经使用 jsoup 1.6.3 版本尝试了您所说的内容，但执行被卡在`Document doc = DataUtil.parseByteData(byteData, charset, url.toExternalForm(), req.parser());`了`org.jsoup.helper.HttpConnection`.

您可以使用以下代码验证是否正在建立连接：

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.URL;
import java.net.URLConnection;

import org.jsoup.Jsoup;

public class JSoupTest 
{
    public static void main(String[] args) throws Exception 
    {
        URL url = new URL("http://www.cisg.law.pace.edu/cisg/biblio/full-biblio.html");
        //int timeout = 20 * 1000;
        System.out.println("Start parsing...");
        //Jsoup.parse(url, timeout);

        URLConnection con = url.openConnection();
        BufferedReader reader = new BufferedReader(new InputStreamReader(con.getInputStream()));

        String line = null;
        while(true)
        {
            line = reader.readLine();
            if(line == null)
                break;
            System.out.println(line);
        }

        System.out.println("Done");
    }
} 
```

# sharepoint - 从 Sharepoint 日历扩展重复事件不适用于 ViewFields 查询

> ID：12108589
> 
> 赞同：3
> 
> 时间：2012-08-24T11:31:00.260
> 
> 标签：sharepoint, calendar, field, expand, recurrence

我的帖子是[通过 WebServices 从 Sharepoint 日历扩展重复事件的继续？](https://stackoverflow.com/questions/376142/expand-recurring-events-from-a-sharepoint-calendar-over-webservices/12105181#12105181)

问题是在视图字段查询为空或为空时扩展工作。但是由于我设置了一些字段，因此响应与预期不符。

我使用的 Lists.asmx 服务方法是

```
public System.Xml.XmlNode GetListItems(string listName, string viewName, System.Xml.XmlNode query, System.Xml.XmlNode viewFields, string rowLimit, System.Xml.XmlNode queryOptions, string webID) 
```

当我使用如下所示的 viewFields 值时，该方法不会扩展重复事件：

```
var viewFields = new XmlDocument();
viewFields.LoadXml(@"
    <ViewFields>
        <FieldRef Name='ID' />
        <FieldRef Name='Title' />
    </ViewFields>"); 
```

viewFields 有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T05:34:37.423

问题是视图字段应该包含附加字段**EventDate**、**EndDate**、**fRecurrence**和**RecurrenceData**。当此项不存在时，扩展不起作用。因此，如果要检索类别（例如），则应使用以下 ViewFields 查询：

```
<ViewFields>
    <FieldRef Name='EventDate' />
    <FieldRef Name='EndDate' />
    <FieldRef Name='fRecurrence ' />
    <FieldRef Name='RecurrenceData' />
    <FieldRef Name='Category' />
</ViewFields> 
```

# python - 使用 twisted 和 Sphinx 自动生成命令文档

> ID：12108590
> 
> 赞同：2
> 
> 时间：2012-08-24T11:31:02.400
> 
> 标签：python, python-sphinx, buildout

我有一个项目，我使用 buildout 生成许多 cmdline 工具，并使用 Sphinx 生成文档。

有没有一种方法可以让我在 cmdline 的代码定义附近编写文档，然后让 Sphinx 使用每个命令的代码中的文档字符串为一页中的所有命令生成文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:26:25.233

A partial solution is to use "autofunction" (see [autodoc documentation](http://sphinx-doc.org/ext/autodoc.html#module-sphinx.ext.autodoc)) to document your code. For example with a `.rst` file like this:

```
Command line tools
==================

.. autofunction:: mypackage.tools.do_something
.. autofunction:: mypackage.importtasks.import
.. autofunction:: mypackage.feed_the_cat 
```

This'll document them like functions, which might not look as nice.

Another solution is to generate a proper `.rst` file from the docstring yourself. You can generate it into the sphinx directory and use it from there. As an example you can look at a [README.rst I generated](https://github.com/reinout/tools/blob/master/tools/README.rst) for a collection of tools (console_scripts entry points like yours, btw) and at [the script that generates the README](https://github.com/reinout/tools/blob/master/generate_python_docs.py).

You basically iterate over a bunch of files and add the relevant `.__doc__` items to a text file. I couldn't find how to use `setuptools` or `pkginfo` to get my hands on the `console_scripts` entry from the `setup.py`, but that's something you can do if needed in a custom script :-)

# api - 从链接打开时关闭 infoWindow 的 Google map API V3 问题

> ID：12108596
> 
> 赞同：0
> 
> 时间：2012-08-24T11:31:10.333
> 
> 标签：api, google-maps, google-maps-api-3

我正在使用多个标记和信息窗口在谷歌地图上从 V2 迁移到 V3，并且地图工作正常，当单击标记时，信息窗口打开和关闭正常。

在地图旁边，我正在以常规文本链接格式列出所有点（标记），例如当用户单击“电影院”时，相应的信息窗口就会打开。我有这个工作但有问题。首先，地图本身不会移动以打开信息窗口，然后可以将其隐藏一半，当单击以关闭信息窗口时，它不会移动。在版本 2 中，我使用 Loughcrew 来执行此操作。这是我目前拥有的脚本：

```
<div id="map" style="width: 500px; height: 500px; border:solid 1px black; "></div>

<script type="text/javascript">
   var myLatlng = new Array();
   var  marker = new Array();
   var infowindow = new Array();                            

   function initialize() {
      //set the map options
      var mapOptions = {
          zoom: 8,
          center: new google.maps.LatLng(53.50046357326504,-6.8280029296875),
          streetViewControl: true,
          overviewMapControl:true,
          mapTypeId: google.maps.MapTypeId.ROADMAP
      }
      var map = new google.maps.Map(document.getElementById("map"), mapOptions);
      myLatlng[0] = new google.maps.LatLng(53.738315087044704,-7.80029296875);
      //marker
      marker[0] = new google.maps.Marker({
         position: myLatlng[0],
         map: map,
         icon: 'bus.png',
         title:"This is test 1"
      });
      infowindow[0] = new google.maps.InfoWindow({
         content: 'Hey, here is come info'
      });

      google.maps.event.addListener( marker[0], 'click', function() {
         infowindow[0].open(map, marker[0]);
      });

      myLatlng[1] = new google.maps.LatLng(53.12633883947352,-7.3443603515625);
      //marker
      marker[1] = new google.maps.Marker({
         position: myLatlng[1],
         map: map,
         icon: 'tennis-sports.png',
         title:"This is another test again"
      });

      infowindow[1] = new google.maps.InfoWindow({
         content: 'And more info here!'
      });

      google.maps.event.addListener( marker[1], 'click', function() {
         infowindow[1].open(map, marker[1]);
      });

/********************* end of markers  ********************/
   }//end initialize

   function loadScript() {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src = "http://maps.googleapis.com/maps/api/js?key=xxxxxxxx&sensor=false&callback=initialize";
      document.body.appendChild(script);
   }

   window.onload = loadScript;

</script>

<a href="javascript:infowindow[1].open(map, marker[1]);" id="link1">Test link</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:04:23.427

试试这样：

```
<a href="javascript:openInfoWindow(1);" id="link1">Test link</a>

function openInfoWindow(i) {
    infowindow[i].open(map, marker[i])
    map.setCenter(marker[i].getPosition())
} 
```

# php - 如何在php中从索引创建字符串

> ID：12108603
> 
> 赞同：-3
> 
> 时间：2012-08-24T11:31:25.793
> 
> 标签：php, string, function, indexing

我必须将一个索引传递给一个函数，并从该索引返回一个包含 1 到 4 个字符的字符串。

我有：

```
$string = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'; 
```

所以如果我说 index(20) 函数应该返回较低的“k”，因为它是它在 $string 变量中的索引。

但...

如果我输入索引

```
62 it should return 10
63 .. 11 
```

那是因为从索引 62 开始，它应该从 1 而不是 0 开始字符串，并循环到下一个索引，所以它们将是 2 长度的字符串

如果我输入索引

```
3843 .. ZZ 
```

这是因为从索引 3843 开始，来自 [0-9a-zA-Z][0-9a-zA-Z] 的所有可能性都已结束，现在字符串以 3 长度开始。

```
3844 .. 100

...

9999 .. 2Bh 
```

所有的可能性和 [0-9a-zA-Z][0-9a-zA-Z][0-9a-zA-Z] 但我只需要直到索引 9999

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:48:43.047

您的问题有点难以理解，不确定这是否是您想要的：

```
$string = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'; 

function t($n)
{
    global $string;
    $ret = $string{$n%62};
    if($n>=62)
        $ret = t(floor($n/62)).$ret;
    return $ret;
}

echo t(9999); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:10:45.323

你所要求的基本上是一个数字基转换器，从基数 10（十进制）数字到基数 64（使用你的字符串作为计数系统中的 64 位数字）。

PHP 确实提供了一个内置[`base_convert()`函数](http://php.net/manual/en/function.base-convert.php)，但是虽然它可以很好地在十六进制和十进制之间进行转换，但它不适用于像这样的非常高的基数。这部分是因为通常没有人需要它们，部分是因为这种基数的数字不是公认的标准。

在上面链接的页面的评论中有几个例子`base_convert()`，人们编写的函数确实试图为高基数工作。我不能保证他们中的任何一个。

# android - 如何在android中调整条形图中的条形？

> ID：12108604
> 
> 赞同：0
> 
> 时间：2012-08-24T11:31:28.737
> 
> 标签：android, bar-chart

我现在正在尝试使用 achartengine 在 android 中创建一个条形图，希望我已经创建了它，但这里的问题是我创建的条形图与每个条形图显示的距离太近，我需要在下面显示这些条形图订单（ord1，ord2 等，..）都在 x 轴上？

任何人都可以让我知道解决这个问题的解决方案吗？

下图会很清楚，请找到

![在此处输入图像描述](../Images/bf8bf027848f524e468c43aa049f49e0.png)

请找到我的参考资料

**BarActivity.java**

```
 public class BarActivity extends Activity 
 { 
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    Intent intent = createIntent();
    startActivity(intent);
}

 public Intent createIntent() 

 {

String[] titles = new String[] { "Order's profit of the year", " " };
List<double[]> values = new ArrayList<double[]>();
values.add(new double[] { 29, 83, 47, 33 });
values.add(new double[] {});

int[] colors = new int[] { Color.WHITE, Color.BLACK};

XYMultipleSeriesRenderer renderer = buildBarRenderer(colors);
renderer.setOrientation(Orientation.HORIZONTAL);

setChartSettings(renderer, "Profit for the year 2012", " ", " ", 0,100, 0,100, Color.GRAY, Color.LTGRAY);

renderer.setXLabels(1);
renderer.setYLabels(10);

renderer.addXTextLabel(10.75, "ord1");
renderer.addXTextLabel(20.75, "ord2");
renderer.addXTextLabel(30.75, "ord3");
renderer.addXTextLabel(40.75, "ord4");

int length = renderer.getSeriesRendererCount();
for (int i = 0; i < length; i++) 
{
  SimpleSeriesRenderer seriesRenderer = renderer.getSeriesRendererAt(i);
  seriesRenderer.setDisplayChartValues(true);
  }

return ChartFactory.getBarChartIntent(this, buildBarDataset(titles, values), renderer,Type.DEFAULT);
}

protected XYMultipleSeriesRenderer buildBarRenderer(int[] colors) 
{

// creates a SeriesRenderer and initializes it with useful default values as well as colors

    XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();

    renderer.setAxisTitleTextSize(16);

    renderer.setChartTitleTextSize(20);

    renderer.setLabelsTextSize(15);

    renderer.setLegendTextSize(15);

    int length = colors.length;

    for (int i = 0; i < length; i++) 
    {
      SimpleSeriesRenderer r = new SimpleSeriesRenderer();
      r.setColor(colors[i]);
      renderer.addSeriesRenderer(r);
    }
    return renderer;
  }

   protected void setChartSettings(XYMultipleSeriesRenderer renderer, String title, String xTitle,
   String yTitle, double xMin, double xMax, double yMin, double yMax, int axesColor,int labelsColor) 
  {

  // sets lots of default values for this renderer

   renderer.setChartTitle(title);

   renderer.setXTitle(xTitle);
   renderer.setYTitle(yTitle);

   renderer.setXAxisMin(xMin);
   renderer.setXAxisMax(xMax);

   renderer.setYAxisMin(yMin);
   renderer.setYAxisMax(yMax);

   renderer.setAxesColor(axesColor);
   renderer.setLabelsColor(labelsColor);

   renderer.setApplyBackgroundColor(true);
   renderer.setBackgroundColor(Color.BLACK);

}

protected XYMultipleSeriesDataset buildBarDataset(String[] titles, List<double[]> values) 
{

    // adds the axis titles and values into the dataset

    XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
    int length = titles.length;

    for (int i = 0; i < length; i++) 
    {
      CategorySeries series = new CategorySeries(titles[i]);
      double[] v = values.get(i);
      int seriesLength = v.length;
      for (int k = 0; k < seriesLength; k++) 
      {
        series.add(v[k]);
      }

      dataset.addSeries(series.toXYSeries());
     }
    return dataset;
    }
  } 
```

感谢您宝贵的时间！..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:56:58.450

您正在调用`setChartSettings`一些参数，这些参数将 X 轴视觉范围设置在 0 到 100 之间，并且 Y 轴的视觉范围也相同。您可以调整这些参数以获得更好的放松显示。

您还可以`renderer.setBarSpacing()`调整 ber 图表中条形之间的间距。

# ios - 如何识别用户是否在 iOS 5 应用程序中锁定了屏幕

> ID：12108611
> 
> 赞同：2
> 
> 时间：2012-08-24T11:32:27.343
> 
> 标签：ios, ios5

我们的 iOS 应用程序有自己的密码屏幕，每次应用程序加载时都会向用户显示。

另一个要求是，如果用户锁定屏幕，则应显示密码屏幕。最初，我使用应用程序委托中的 applicationWillResignActive 方法将密码视图设置为模式。我将其设置为 resign 而不是 applicationDidBecomeActive，这样当 iOS 使我们的应用程序再次可见时，您不会看到视图之间的快速切换。

这适用于用户锁定屏幕但 resignActive 在收到 SMS 警报时也被调用的情况，这意味着即使用户关闭通知，他们也会被要求再次输入密码。

有没有办法确定屏幕是否已被锁定，以便我可以专门响应该事件？

# html - ie7-8 不渲染图像宽度的包装器：100%

> ID：12108612
> 
> 赞同：0
> 
> 时间：2012-08-24T11:32:29.357
> 
> 标签：html, internet-explorer, css, cross-browser

我在 IE7-8 中的主页有问题，似乎带有背景图像的滑块包装器由于某种原因没有被渲染，迫使内部 div 不居中并且看起来一团糟。

看看[这里](http://cmf.sd1dev2.co.uk)，在 Chrome、Safari、Firefox 中一切正常。但不是 IE！我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T11:34:16.767

您正在使用 HTML5 标签，旧版浏览器不支持这些标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:53:37.173

仅供参考，[**Html5shiv**](http://code.google.com/p/html5shiv/)脚本允许您在旧浏览器上使用 HTML5 标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T11:43:55.690

IE 仍然不支持 HTML5/CSS3，所以请尝试使用其他标签，如 div 或任何块标签

# oracle - 如何在表中添加名称存储在临时变量中的列

> ID：12108619
> 
> 赞同：0
> 
> 时间：2012-08-24T11:32:50.830
> 
> 标签：oracle, loops, plsql, alter-table, temporary

每次运行循环时，我都想在表中添加一列。我创建了一个临时变量，它将为循环中的每次迭代采用不同的名称。现在我想在我的表中添加一个同名的列。我尝试过这样的事情，部分代码显示在 oracle sql developer 中：

```
DECLARE V_COUNT VARCHAR (10) := ZIP_COD
BEGIN
ALTER TABLE ABCD 
ADD V_COUNT varchar(10);

update ABCD b
set b.V_COUNT = (select d.ZIP_cod
from ORA_DMSTORE d
where b.id_dmstore = d.id_dmstore);
END; 
```

这显示错误“通常是 PL/SQL 编译错误”。我不知道如何摆脱它。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:32:02.643

首先，你不能`ALTER TABLE ..`在 PL/SQL 中做，你必须使用`dbms_sql`or `execute immediate`：

`n`并且列名不能以数字开头，因此在我的示例中，您需要某种前缀。

因此，一种可能的解决方案是：

```
DECLARE 
 V_COUNT VARCHAR (10) := ZIP_COD;
BEGIN
 EXECUTE IMMEDIATE 'ALTER TABLE ABCD ADD (n'||V_COUNT||' varchar(10))';

 EXECUTE IMMEDIATE '
 update ABCD b 
   set b.n'||V_COUNT||' = (select d.ZIP_cod
                             from ORA_DMSTORE d
                            where b.id_dmstore = d.id_dmstore)
 ';
END;
/ 
```

# javascript - 明确设置后无法访问元素属性

> ID：12108621
> 
> 赞同：0
> 
> 时间：2012-08-24T11:32:58.623
> 
> 标签：javascript, asp.net, html

我有一个我无法解决的问题。在我的课堂上，我设置：

```
text.Attributes.Add("oldValue", text.Text); 
```

调试代码我可以看到值设置正确。当我使用 chrome 查看页面源时，我看到以下内容：

```
<input name="astextMon" type="text" value="4,25" 
       id="textMon" class="inputText"
       autocomplete="on" 
       onfocus="ValidateReadStatus(this.id,this.ValueId);SetFocus(this.id);"
       valueid="408412" 
       oldvalue="4,25" 
       onchange="return GridOnChange('0;0',this,'textMon',1,true);" 
       onkeydown="return GridOnKeyDown(this.id,'0;0');"           
       ondblclick="SetTextPos('0;0');"
> 
```

如您所见，该`oldvalue`属性已设置并具有正确的值，但如果我尝试访问它，我总是会得到`undefined`. 即使从 Chrome 控制台访问元素。

我在这里想念什么？

编辑。将代码放在这里时发生了名称属性中的拼写错误。那不是问题。我认为区分大小写也不是问题，因为当我删除时：

```
text.Attributes.Add("oldValue", text.Text); 
```

在我的班级中， oldvalue="4,25" 属性从元素中消失了。我也尝试将 oldValue 更改为 oldvalue，但同样的问题仍然存在。

我正在尝试使用

```
alert(element.oldvalue) or alert(element["oldvalue"]) or 
alert(element["oldValue"]) or alert(element["oldValue"]) none work. 
```

如果我`alert(element.value)`正确键入它会提醒 value 属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:52:32.970

JavaScript 区分大小写：
`... oldvalue="4,25" ...` 并 `text.Attributes.Add("oldValue", text.Text);`
引用 2 个**不同的**属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:54:27.103

好的，所以我通过使用解决了我的问题

```
$(element).attr("oldValue"); 
```

我不知道为什么在使用 JQuery 时我可以很好地访问该属性，但没有它它是未定义的。如果有人有答案，我很想听听。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T12:00:31.910

您可以使用类似这样的方法来获取您定义的属性：

```
document.getElementById('textMon').attributes['oldvalue'].value; 
```

您将在哪里获得：`oldvalue: 4,25`

还有几件事：

1.  `name=astextMon"`应该`name="astextMon"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T11:39:07.027

也许问题是在您的代码片段中输入标签无效，在名称属性之后您必须添加引号字符。

```
<input name="astextMon" ...> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T11:42:16.223

缺少第一个引号`name=astextMon"`将其更改为`name="astextMon"`

# c# - 限制可以使用打开文件对话框选择的文件

> ID：12108628
> 
> 赞同：15
> 
> 时间：2012-08-24T11:33:25.697
> 
> 标签：c#, .net, winforms, openfiledialog

我有一个 C# Windows 窗体应用程序，我在其中加载 XML 文件或 CSV 文件以进行某些任务操作。当我单击我拥有的浏览按钮时，会出现一个打开文件对话框，我可以导航到驱动器上的某个位置并选择文件，然后使用上传按钮上传它。

如果我加载 JPG 或 ZIP 文件或任何格式不是 CSV 或 XML 的文件，我的应用程序就会崩溃。有没有办法限制打开文件对话框在 C# 中仅打开 CSV 或 XML 文件？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-24T11:36:05.703

采用

```
openFileDialog.Filter = "CSV files (*.csv)|*.csv|XML files (*.xml)|*.xml"; 
```

这样只显示 csv 文件或 xml 文件。

奇数管道在过滤器下拉列表中可见的内容和相应的*实际*文件扩展名之间划定，偶数管道在第一个完整文件扩展名和第二个完整文件扩展名之间划定。

例如，“CSV 文件 (*.csv)|*csv”表示用户将在过滤器下拉列表中看到“CSV 文件 (*.csv)”，该选项将查找任何匹配的文件`*.csv`。

在上面的代码行中，“XML”之前的管道表示一个全新的过滤器选项，它将出现在 CSV 选项的下方。

尽管如此，如果用户输入完整的名称，他们也可以选择其他文件类型 - 因此请检查选择的文件名并相应地更正您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:37:54.907

您可以使用该[`Filter`](http://msdn.microsoft.com/en-us/library/system.windows.controls.openfiledialog.filter%28v=vs.95%29.aspx)属性让用户选择某种类型的文件。

然而！这不是保证。用户仍然可以在文件名框中输入 '(star).(star)' 并显示所有文件。因此，您还应该检查代码中的结果文件。

您可以使用该[`Path.GetExtension()`](http://msdn.microsoft.com/en-us/library/system.io.path.getextension.aspx)方法执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T11:40:22.643

您可以在“打开文件”对话框中应用过滤器，该对话框仅显示 .xml 和 csv 文件，如上所述。使用 path.getextension [http://msdn.microsoft.com/en-us/library/system.io.path.getextension.aspx](http://msdn.microsoft.com/en-us/library/system.io.path.getextension.aspx)您可以检查用户是否确实选择了具有正确扩展名的文件。如果选择了错误的扩展名，您可以提示选择不同的文件。

我强烈建议在上传之前检查文件扩展名。只需在用户选择文件后检查扩展名。如果选择了错误的文件，请不要继续上传/处理...

# java - 以编程方式使用单个片段初始化 FragmentActivity

> ID：12108630
> 
> 赞同：0
> 
> 时间：2012-08-24T11:33:34.997
> 
> 标签：java, android, android-fragments

我正在尝试将片段添加到活动中，以避免声明布局 xml。我正在做

```
@Override
protected void onCreate(Bundle arg0) {
    super.onCreate(arg0);
    getSupportFragmentManager().beginTransaction()
            .add(android.R.id.content, new mFragment()).commit();
} 
```

但它崩溃了：

```
java.lang.IllegalStateException: The specified child already has a parent. 
You must call removeView() on the child's parent first. 
```

是否有避免此错误的简短形式，或者我必须在之前恢复内容布局并删除他们的所有视图？谢谢

编辑 mFragment 代码：

```
public class mFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View result= inflater.inflate(R.layout.activity_main, container);
        return result;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T11:45:03.537

在充气时尝试以下代码。

```
View result= inflater.inflate(R.layout.activity_main, container, false); 
```

默认情况下，这将避免将视图添加到父级。通过使用另一种方法，它将默认添加一个父级。因此，当您尝试动态添加它时，它会抛出上述异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:43:15.910

改变：

```
View result= inflater.inflate(R.layout.activity_main, container); 
```

到：

```
View result= inflater.inflate(R.layout.activity_main, container, false); 
```

# mysql - Mysql连接两个表并回收

> ID：12108632
> 
> 赞同：3
> 
> 时间：2012-08-24T11:33:41.647
> 
> 标签：mysql, join

假设我有两张桌子：

```
zoo_tbl
name
------
dog
cat
monkey
lion
tiger
elephant
fish

palette_tbl
rgb
------
pink
yellow
green 
```

我想对两个表进行连接，以便 rgb 行在一个循环中重复。

```
name       rgb
---------------------
dog        pink
cat        yellow
monkey     green
lion       pink
tiger      yellow
elephant   green
fish       pink 
```

我应该如何构建这个查询？我有一个想法，在加入之前创建一个带有重复 rgb 值的大型临时表，但即使这样做，我也必须在加入之前枚举 zoo_tbl 和临时表。必须有一种更简单/更直接的方法来做到这一点......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T11:50:30.220

假设您在table`PRIMARY KEY`列上，这将为您解决问题：`id``palette_tbl`

```
SELECT name,
       (SELECT rgb FROM palette_tbl WHERE id = @row_id) AS rgb,
       (@row_id:= IF(@row_id = @cnt, 1, @row_id + 1)) AS dummy_id
FROM zoo_tbl a, (SELECT @row_id:= 1, @cnt := (SELECT COUNT(1) FROM palette_tbl)) dummy; 
```

[SQLFIDDLE 演示在这里](http://sqlfiddle.com/#!2/0dd48/2)

# java - rabbit - 打开关闭通道

> ID：12108635
> 
> 赞同：0
> 
> 时间：2012-08-24T11:33:48.773
> 
> 标签：java, rabbitmq

使用频道一段时间后，我的 rabbitmq 重新启动。
然后，当 java 客户端应用程序（仍在运行）尝试使用通道时 -
我尝试使用关闭通道。

有没有办法检查通道是否关闭？
有没有办法让它保持打开状态？
有没有办法在不永久保留的情况下做到这一点？
（我希望当服务器重新启动时它会删除通道和队列，但能够在新使用时创建它们）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:23:39.067

`Channel`有一个`isOpen`可以使用的方法。

您要做的是监视您的连接，以便在它关闭时开始轮询服务器以再次恢复。查看文档`Connection.addShutdownListener`和`ShutdownNotifier`接口。

不幸的是，关闭的频道无法重新连接，您需要在连接再次备份后创建新频道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:40:49.360

您可能想查看[Spring AMQP 集成](http://www.springsource.org/spring-amqp)，尤其是[Spring Retry](http://static.springsource.org/spring-amqp/docs/1.1.x/reference/html/amqp.html#d4e349)。从第 2.12 节开始：

> Spring Retry 提供了几个 AOP 拦截器和很大的灵活性来指定重试的参数（尝试次数、异常类型、退避算法等）。Spring AMQP 还提供了一些方便的工厂 bean，用于以方便的形式为 AMQP 用例创建 Spring Retry 拦截器，并带有强类型回调接口，供您实现自定义恢复逻辑。有关更多详细信息，请参阅 StatefulRetryOperationsInterceptor 和 StatelessRetryOperationsInterceptor 的 Javadocs 和属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T20:07:39.493

您可以查看[Lyra](https://github.com/jhalterman/lyra)，这是一个 RabbitMQ 客户端，可在资源（连接/通道）意外关闭时自动恢复它们。

# javascript - Facebook 身份验证 redirect_uri 不是绝对 URI

> ID：12108638
> 
> 赞同：1
> 
> 时间：2012-08-24T11:34:00.710
> 
> 标签：javascript, facebook, facebook-authentication

我想在没有 JS SDK 的情况下使用 facebook 客户端身份验证来避免弹出。我尝试了很多不同的代码，但很多小时都没有工作，请帮忙。

这是我的代码

```
FB.init({
    appId  : appId,
    status : true,  // check login status
    cookie : true,  // enable cookies to allow the server to access the session
    xfbml  : false, // parse XFBML
    channel : 'http://fb.spot-the-differences.com/index.php',
    oauth : true
});
FB.getLoginStatus(function(response) {
    if (response.status == 'connected') {
        ...
    } else if (response.status === 'not_authorized') {            
    top.location = "https://www.facebook.com/dialog/oauth?client_id=" + 
    appId + "&redirect_uri='" +
    encodeURIComponent('http://fb.spot-the-differences.com') +
    "'&scope=read_friendlists,publish_actions,publish_stream,email&esponse_type=token";
}); 
```

我尝试添加 /index.php ，将 url 更改为 ip 地址尝试了很多代码，但它总是错误

```
API Error Code: 191
API Error Description: The specified URL is not owned by the application
Error Message: redirect_uri isn't an absolute URI. Check RFC 3986. 
```

**脸书基本设定**

```
Site URL: http://fb.spot-the-differences.com/
Canvas Page: http://apps.facebook.com/spot-the-differences
Canvas URL: http://fb.spot-the-differences.com/
Secure Canvas URL: https://fb.spot-the-differences.com/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:08:30.493

# redis - 收到错误“mytasks.add”类型的未注册任务

> ID：12108639
> 
> 赞同：10
> 
> 时间：2012-08-24T11:34:07.833
> 
> 标签：redis, celery

我写了一个文件`mytasks.py`

```
from celery import Celery

celery = Celery("tasks",
                broker='redis://localhost:6379/0',
                backend='redis')

@celery.task
def add(x,y):
        return x+y 
```

`task.py`如下_

```
from mytasks import add

add.delay(1,1) 
```

我已经启动了 redis 服务器，我已经启动了 celery 服务器。但是当我运行 task.py 时，我收到以下错误：

```
 Received unregistered task of type 'mytasks.add'.
The message has been ignored and discarded.

Did you remember to import the module containing this task?
Or maybe you are using relative imports?
Please see http://bit.ly/gLye1c for more information.

The full contents of the message body was:
{'retries': 0, 'task': 'mytasks.add', 'eta': None, 'args': (1, 1), 'expires': None, 'callbacks': None, 'errbacks': None, 'kwargs': {}, 'id': 'a4792308-d575-4de4-8b67-26982cae2fa4', 'utc': True} (173b)

Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/celery/worker/consumer.py", line 411, in on_task_received
    strategies[name](message, body, message.ack_log_error)
KeyError: 'mytasks.add' 
```

可能的原因是什么

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-24T13:22:39.670

嘿我已经解决了我做了一件事我添加的问题

```
CELERY_IMPORTS=("mytasks") 
```

在我的`celeryconfig.py`文件中，我成功了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T14:37:17.813

也可以`include`在 Celery 类中使​​用参数：http: [//docs.celeryproject.org/en/latest/getting-started/next-steps.html#proj-celery-py](http://docs.celeryproject.org/en/latest/getting-started/next-steps.html#proj-celery-py)

# javascript - 如何在javascript中获取facebook用户喜欢的页面名称、类别列表？

> ID：12108645
> 
> 赞同：0
> 
> 时间：2012-08-24T11:34:32.433
> 
> 标签：javascript, facebook, facebook-graph-api

我有一个 facebook 应用程序，我需要在其中获取**用户喜欢页面的名称、类别列表。**
我已将“user_likes”添加到我的权限列表中，并**成功获得了访问用户喜欢页面列表的权限。**

我想知道的是如何访问这些详细信息并将它们分配给变量？
我试过下面的代码

```
FB.Event.subscribe("auth.login", function (response) {
   FB.api('/me/likes', function(user) {
            if (user) {
                var pageCount = user.data.length; //just try to get the length to check wheter it works 
                // I want to add name and category into variables here
         });
       }); 
```

并将'184'分配给pageCount，这意味着它可以工作。我想访问名称和类别列表
谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:54:09.913

刚刚使用下面的代码来获取数据

```
FB.Event.subscribe("auth.login", function (response) {
   FB.api('/me/likes', function(user) {
            if (user) {
                var pageCount = user.data.length; 
                var pageName = user.data[0].name;
                var pageCategory = user.data[0].category;            
         });
       }); 
```

这将分配第一个喜欢的页面的名称和类别，使用 for 循环获取所有数据

# sql - 从 SQL 表中查询 Visual Studio 2010 负载测试数据

> ID：12108648
> 
> 赞同：1
> 
> 时间：2012-08-24T11:34:57.920
> 
> 标签：sql, visual-studio-2010, load-testing

我在 Visual Studio 2010 中设置了负载测试，运行了几次，然后将数据导出到 SQL 数据库中。这应该是这样做的典型方式。它有所有这些标准表：

[http://blogs.msdn.com/b/billbar/archive/2006/02/10/what-is-the-data-in-the-vsts-load-test-results-store.aspx](http://blogs.msdn.com/b/billbar/archive/2006/02/10/what-is-the-data-in-the-vsts-load-test-results-store.aspx)

我尝试在测试中查询特定 requestURI 的“第一个字节的时间”。

关于如何组合此查询的任何想法？实际存储的特定 URI 的“到第一个字节的时间”表在哪里？有没有列出这些负载测试数据库的常见查询的网站？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:00:42.700

我想我明白了：

```
/****** Script for SelectTopNRows command from SSMS  ******/
SELECT TOP 1000 [LoadTestRunId]
      ,[CounterId]
      ,[InstanceId]
      ,[LoadTestItemId]
      ,[InstanceName]
      ,[CumulativeValue]
      ,[OverallThresholdRuleResult]
  FROM [LoadTest2010].[dbo].[LoadTestPerformanceCounterInstance] where 
  LoadTestItemId = 12  -- The specific element in the web page I'm interested in
  and LoadTestRunId = 127 -- The specefic load test run I am using
  and CounterId = 78  -- The time to first byte metric 
```

# spring - spring storedprocedure in out 参数使用

> ID：12108650
> 
> 赞同：1
> 
> 时间：2012-08-24T11:35:08.793
> 
> 标签：spring, jdbctemplate, java-stored-procedures

嗨，我正在调用一个带有 in out 参数的 oracle 存储过程。我正在从我的类中调用从 spring 的 StoredProcedure 类扩展的过程。根据帖子的数量，我已在我的类中将 inout 参数声明为 out 参数，并将值传递给我的映射函数中的参数。问题是它只能作为输出参数而不是作为参数。有人可以告诉我我可能做错了什么吗？

```
public class MyService extends StoredProcedure {
    public MyService(JdbcTemplate jdbcTemplate,String sqlString) {
        setJdbcTemplate(jdbcTemplate);        
        setSql(sqlString);
        setFunction(false);                       
        declareParameter( new SqlOutParameter("inoutparam",OracleTypes.INTEGER));
        declareParameter( new SqlParameter("inparam",Types.VARCHAR));
        compile();
    }

    public Map execute(int arg1,String arg2) {
        Map<String, Object> inParams = new HashMap<String, Object>();
        inParams.put("inoutparam", arg1);
        inParams.put("inparam", arg2);      
        Map<String,Object> map = execute(inParams);
        return map;          
    }
}

PROCEDURE prc_my_proc (
 inoutparam        IN OUT NUMBER,
 inparam             VARCHAR2)
IS
BEGIN

INSERT INTO save_log values ( inoutparam,sysdate);
inoutparam := 100;
END prc_my_proc; 
```

# c# - Math.Sin、Math.Cos 和 Math.Tan 精度以及正确显示它们的方式

> ID：12108651
> 
> 赞同：3
> 
> 时间：2012-08-24T11:35:18.043
> 
> 标签：c#, .net, winforms, math

我正在用 C# 编写一个计算器。

`textBoxResult`是我显示数字的文本框

`recount`是以度为单位的角度并以弧度为单位返回的函数

我把角度从`texBoxInput`

```
public double recount(int number)
{
    double wyjscie = 0.0;
    double Number = number;
    wyjscie = Number * (Math.PI / 180);
    return wyjscie;
}

//function which is called out when user presses the button:
textBoxResult.Text = Math.Round(Math.Tan(recount(Convert.ToInt32(texBoxInput.Text))),2).ToString(); 
```

正如你所看到的，我在使用 时试图对这个数字进行四舍五入`Math.Tan`，但仍然`Math.Tan`让我认为 90 度的棕褐色是 1,63317787283838E+16 。

我一直在努力寻找答案，但失败了。我无法弄清楚如何显示正确的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T12:19:29.117

基本上，看起来这是预期的行为`Math.Tan`。我不太了解其他语言，所以我不确定这对于浮点数学是否正常或特定于 C# 实现。（注意：之后，我发现 Google 的在线计算器返回相同的结果，表明它对浮点三角函数的预期行为，可能与*pi*不合理和双精度数据类型的限制有关）

但是，从这个结果向后工作，我看到`Math.Atan(// your result);`并且`Math.Atan(double.PositiveInfinity)`都返回 90 度，这表明这是预期的吗？

这是我的测试：

```
var deg = 90.0;
var rads = deg * (Math.PI / 180);
var result = Math.Tan(rads);

if (Double.IsInfinity(result))
    Console.WriteLine("Tan of 90 degrees is Infinity");
else if (Double.IsNaN(result))
    Console.WriteLine("Tan of 90 degrees is Undefined");
else
    Console.WriteLine("Tan of 90 degrees is {0}", result);

Console.WriteLine("Arc Tan of {0} is {1} degrees", double.PositiveInfinity, Math.Atan(double.PositiveInfinity) * 180 / Math.PI);
Console.WriteLine("Arc Tan of {0} is {1} degrees", result, Math.Atan(result) * 180 / Math.PI); 
```

这给出了以下输出：

```
Tan of 90 degrees is 1.63317787283838E+16
Arc Tan of Infinity is 90 degrees
Arc Tan of 1.63317787283838E+16 is 90 degrees 
```

所以我的猜测是，除非有人可以进来并提供解决方法，否则您可能必须将此作为边缘情况进行编程才能获得正确的结果。

任何三角函数的“正确结果”都将限于`double`15 位有效数字的精度，因此如果您需要更多，则需要找到一个支持更精确数学的库。

由于`Math.Tan(Math.PI/2)`似乎提供了不受欢迎的响应，您可以执行以下操作：

```
public double ComputeTangent(double angleRads)
{
    if (angleRads == Math.PI/2)
        return double.PositiveInfinity
    if (angleRads == - Math.PI/2)
        return double.NegativeInfinity

    return Math.Tan(angleRads);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T12:02:56.480

`Round`正在做[它在锡上所说的](http://msdn.microsoft.com/en-us/library/75ks3aby.aspx)：

> 可以返回的整数和小数位数的最大总数为 15。如果四舍五入的值包含超过 15 位，则返回 15 个最高有效位。如果四舍五入的值包含 15 位或更少位，则返回整数位和位数参数指定的小数位数。

`1.63317787283838E+16`是 15 位最高有效数字，并且没有小数部分。

如果你想显示这个，`1,63E+016`你可以使用：

`number.ToString('E2', CultureInfo.CreateSpecificCulture("fr-FR"))`

（或任何其他`,`用作小数分隔符的语言环境）

请参阅：[指数（“E”）格式说明符](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#EFormatString)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-02T02:54:08.660

```
 using System;

namespace Lab_Ex_12
{
    class SimpleCalculator
    {
        double num1, num2;
        public void read()
        {
            Console.WriteLine("\n Enter any two numbers:");
            Console.Write("\n Number1 : ");
            num1 = double.Parse(Console.ReadLine());
            Console.Write("\n Number2 : ");
            num2 = double.Parse(Console.ReadLine());
        }
        public void add()
        {
            double sum = num1 + num2;
            Console.WriteLine("\n Result : ({0}) + ({1}) = {2}", num1, num2, sum);
        }
        public void subtract()
        {
            double diff = num1 - num2;
            Console.WriteLine("\n Result : ({0}) - ({1}) = {2}", num1, num2, diff);
        }
        public void multiply()
        {
            double prod = num1 * num2;
            Console.WriteLine("\n Result : ({0}) X ({1}) = {2}", num1, num2, prod);
        }
        public void divide()
        {
            double qt = num1 / num2;
            Console.WriteLine("\n Result : ({0}) / ({1}) = {2}", num1, num2, qt);
        }
    }
    class ArithmeticOperations
    {
        public static void Main()
        {
            SimpleCalculator SC = new SimpleCalculator();
            int ch, i=1;
            while(i==1)
            {
                Console.Clear();
                Console.WriteLine("\n *************************");
                Console.WriteLine("\n   ZAHID SIMPLE CALCULATOR.");
                Console.WriteLine("\n *************************");
                Console.WriteLine("\n 1-----> ADDITION");
                Console.WriteLine("\n 2-----> SUBTRACTION");
                Console.WriteLine("\n 3-----> MULTIPLICATION");
                Console.WriteLine("\n 4-----> DIVISION");
                Console.WriteLine("\n 5-----> EXIT");
                Console.WriteLine("\n *************************");
                Console.Write("\n\n Enter your choice: ");
                ch = int.Parse(Console.ReadLine());
                switch (ch)
                {
                    case 1: SC.read();
                            SC.add();
                            break;
                    case 2: SC.read();
                            SC.subtract();
                            break;
                    case 3: SC.read();
                            SC.multiply();
                            break;
                    case 4: SC.read();
                            SC.divide();
                            break;
                    case 5: Environment.Exit(-1);
                            break;
                    default: Console.WriteLine(" Sorry !!! Wrong  choice.");
                            break;
                }
                Console.Write("\n Press ENTER to Continue. ");
                Console.ReadLine();
            }
            Console.WriteLine("\n Cannot continue... Bye");
        }
    }
} 
```

# html - https 上的 context.getImageData()？

> ID：12108655
> 
> 赞同：0
> 
> 时间：2012-08-24T11:35:50.273
> 
> 标签：html, canvas, https, getimagedata

我[对本地主机上的这篇文章 context.getImageData() 有同样的问题吗？](https://stackoverflow.com/questions/8688600/context-getimagedata-on-localhost)，但不是 localhost 我在 https 站点上工作，所以这会引发画布问题。这种情况有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:14:58.197

当您尝试从跨不同域加载的图像中获取数据时，就会出现这些问题。

解决此问题的一种方法（如果您是控制提供图像的人）是启用 CORS（跨源资源共享）。这基本上是在服务图像中添加一个 Access-Control-Allow-Origin 标头。

您可以在[http://www.w3.org/TR/cors/](http://www.w3.org/TR/cors/)中阅读所有相关信息。您的用例在[http://www.w3.org/TR/cors/#use-cases](http://www.w3.org/TR/cors/#use-cases)的“不污染画布元素”部分中有具体描述。

[在http://enable-cors.org/](http://enable-cors.org/)中有一个很好的资源来了解如何启用 CORS 。如果您正在运行 apache 实例，最简单的方法是使用 .htaccess 文件来启用标头。

但是，如果您无法控制所提供的图像，那么您可能需要获得使用它们的许可，并可能将它们复制到您自己的服务器上。

# php - 如果我的字符串末尾有空格，如何修剪所有空格？

> ID：12108658
> 
> 赞同：0
> 
> 时间：2012-08-24T11:36:07.357
> 
> 标签：php, regex

我的代码是这样的：

```
 case 'phone_number':
                        $pattern = "/^\s*\+?\s*([0-9]+\s*)+\s*(\((\+?[0-9]+\s*)+\))?\s*[0-9-\s]*[0-9]\s*(x\s*[\d]{1,})?$/";
                        //$trimmed = str_replace(' ', '', $pattern);
                        $pattern = preg_replace(' ', '', $pattern);

                break;

                default:
                        return false;
                break;

        }
        return preg_match($pattern, $data) ? true : false; 
```

这是对电话号码的验证，我想在要删除的号码后是否有空格，这样它就不会因我的错误条件而失败`trim(strlen($_POST['phone_number'])) > 30`

我怎样才能做到这一点 ？多谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T11:46:01.367

您正在调用：

```
trim(strlen($_POST['phone_number'])) > 30 
```

翻译为：

```
strlen($_POST['number'])) --> will be 10, or 12

trim( the_number_above ) --> nothing to trim 
```

当然，这个数字将少于 30 - 以正确的顺序调用函数：

```
strlen(
    trim( $_POST['phone_numer'] )
) > 30 
```

无论如何，我会在脚本一开始就修剪所有输入，而不是在你做的每一次检查中。

# php - 通过 jquery POST 方法传递字符串

> ID：12108659
> 
> 赞同：0
> 
> 时间：2012-08-24T11:36:14.767
> 
> 标签：php, jquery, cakephp

我正在尝试将一个字符串从 jQuery 传递到我的 cakePHP 控制器。我想我在帖子中的代码是正确的，但我正在努力检索控制器中的字符串。

jQuery代码是：

```
$('#Button1').click(function() 
{       
    var dataString = 'tdata';

    $.post('http://atvcloud2.athtem.eei.ericsson.se/Configs', {data: dataString} , function(data) 
    {
         alert(data);
    });

}); 
```

我试图在控制器中检索如下：

```
$data = $_POST['Model']['data']; 
```

但我不断收到错误说未定义的索引模型。提前为任何帮助欢呼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:37:29.197

`Model`应该从哪里来？

您正在访问`$_POST`超全局，它的键是提交数据的键。

```
$_POST['data'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:41:23.333

您可以使用以下代码执行相同操作：

```
$('#Button1').click(function() 
    {       
            var dataString = 'tdata';
            $.ajax({
                url: "http://atvcloud2.athtem.eei.ericsson.se/Configs",
                type: 'post',
                data: {
                    myInput: dataString
                    },
                beforeSend: function(xhr){
                },
                success: function( data ) {
                }
            });

    }); 
```

在您的控制器中，您可以通过以下方式访问它：

```
$this->request->data('myInput'); //myInput is your query string variable that you passed via ajax. 
```

# sencha-touch - 如何在sencha架构师中将json存储或xml存储映射到饼图

> ID：12108661
> 
> 赞同：0
> 
> 时间：2012-08-24T11:36:19.547
> 
> 标签：sencha-touch, extjs, sencha-touch-2, sencha-architect, sencha-charts

我是煎茶及其所有产品的新手。我开始与 sencha 建筑师合作。在那个时候，当我设计一些项目时，当我尝试运行它的请求 url 并且我将它上传到一个免费的 web 托管站点上。[我的测试应用程序](http://praveen.comyr.com/sencha/test1/app.html)。当我预览它时，它显示一个空页面。我认为这可能是因为没有为饼图提供任何数据。谁能指导我如何在 jsonstore 或 xmlstore 中添加存储并将其映射到饼图。视频高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:29:35.280

如果您在运行您的应用程序时右键单击桌面 safari/chrome 并选择检查元素，然后查看您的控制台，您会看到什么错误？

# android - 链接到 Facebook 应用程序的粉丝专页 fb://page/Page_ID 不起作用以及有关 fb:// 链接的其他问题

> ID：12108666
> 
> 赞同：1
> 
> 时间：2012-08-24T11:36:32.787
> 
> 标签：android, ios, hyperlink, qr-code, facebook-page

以下是关于 iOS 和 android fb 应用程序的 fb:// 链接的一些问题：

(1) Todav 我创建了指向粉丝页面的链接 fb://page/PAGE_ID，然后创建了一个二维码。发生了什么：我用 iPhone 扫描了二维码，打开了 fb 应用程序，但没有打开粉丝页面本身，只打开了我自己的 fb 页面的墙。最奇怪的是：几天前它工作正常。但是我昨天下载了一个 ios 的 fb 应用更新，也许在这一点上有所改变。任何人都可以帮助我：链接本身的形式是否错误？是否有另一种可能性来创建指向在 fb 应用程序中打开的粉丝页面的链接？

(2) 如果我已经更改了 Facebook 粉丝专页的 URL，是否可以创建这样的链接，用名称代替 Site_ID？只是为了营销目的看起来更好......

(3) 几天前我用 fb:// 链接测试了一个 iphone 功能。发生了什么：fb 应用程序打开并显示了粉丝页面。但不幸的是，粉丝专页的“活动”网站被打开了。如果“墙”站点打开，我们更愿意。有谁知道，是否可以通过将在 fb 应用程序中打开的链接直接链接到“墙”？

# php - php date() 日期的数字描述

> ID：12108668
> 
> 赞同：-1
> 
> 时间：2012-08-24T11:36:41.393
> 
> 标签：php

在 php 中使用哪个更安全/更好来获取一天的数字：

```
date('w'); // Numeric representation of the day of the week 
```

或者

```
date('N'); // From php manual: ISO-8601 numeric representation of the day of the week (added in PHP 5.1.0) 
```

我喜欢第二个版本，因为它感觉更自然，但我想知道除了使用这两种方法之外是否有任何影响？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T11:49:32.843

这真的是微不足道的，就像评论说的它不会影响你的项目。

来自： http: [//php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

N - 1（周一）到 7（周日）

w - 0（星期日）到 6（星期六）

我能看到的唯一行为差异是你做了某种算术可能会被改变（比如从周日算起 5 天），或者数组算术（即）数组的索引为 0，所以如果你使用 'w' 那么它可以用于访问数组的元素，如“Sunday”（或其他语言如西班牙语的 Sunday）。

要考虑的另一件事是，如果您使用 ISO 标准 - 并且标准发生变化，例如引入一周中的新一天 - 那么 PHP 更有可能更新“N”并弃用“w”。

# java - 在系统中查找增量更改的方法

> ID：12108669
> 
> 赞同：2
> 
> 时间：2012-08-24T11:36:44.457
> 
> 标签：java, postgresql

我们有一个基于 Java 的系统，以 postgres 作为数据库。由于某些原因，我们希望及时（例如 1 小时）将某些更改传播到不同的位置。两种广泛的方法是

*   在发生这种情况时记录对文件的所有更改。然而，这种方法会将代码分散到各处。
*   以某种方式在某些日志文件中的两个时间戳之间找到 postgres 中的增量更改并将其发送。但是我不确定这种方法有多可行。

有人对此有任何想法/想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:41:24.730

有几个不同的选项可用：

*   根据写入的数据量，您可以尝试一下[Bucardo](http://bucardo.org/)。

*   否则，也可以将 PgQ 与[Londiste](http://wiki.postgresql.org/wiki/Londiste_Tutorial)[结合](http://skytools.projects.postgresql.org/doc/pgq-sql.html)使用

*   或者通过使用触发器自己创建一些东西，这样你就可以生成某种审计表

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T12:04:56.620

如果数据库大小不是很大，您可以通过以下方式快速完成：

*   将整个 postgresql 转储到文本文件。

*   （如果转储文件未排序 *1）对文本文件进行排序。

*   使用以前的转储文件创建一个差异文件。

当然，我只建议在您的数据库将保持相对较小并且您将其用于几台服务器的情况下这样做。

*1：我不知道它是否以某种方式排序，请查看文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T12:46:57.983

有许多预先打包的方法，因此您可能不需要开发自己的方法。许多选项在此 Wiki 页面上进行了总结和比较：

[http://wiki.postgresql.org/wiki/Replication,_Clustering,_and_Connection_Pooling](http://wiki.postgresql.org/wiki/Replication,_Clustering,_and_Connection_Pooling)

其中许多基于使用触发器来捕获数据，并基于更友好的用户界面自动生成触发器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-05T15:49:07.543

我建议不要编写自己的解决方案，而是利用其他人已经完成的工作。在你描述的情况下，我会选择 PgQ + Londiste（都是 Skytools 包的一部分），它易于设置和使用。如果您不想要流式复制，您仍然可以使用 PgQ / Londiste 轻松捕获 DML 并将它们写入您可以在需要时加载的文件。这将允许您在新需求出现时扩展您的设置/处理。

# android - 听 BOOT_COMPLETE_ACTION ，当我的应用程序是强制停止

> ID：12108670
> 
> 赞同：0
> 
> 时间：2012-08-24T11:36:45.047
> 
> 标签：android

通常我可以收听启动完成操作。但是当用户明确强制停止我的应用程序，然后重新启动手机时。在这种情况下，我该如何收听启动完成操作。请用这段代码回答。如果是 ICS

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:41:33.703

你不能，除非你的用户再次启动你的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:42:22.297

> Intent.ACTION_BOOT_COMPLETED 每次重新启动设备时都会收听，要收听，您需要将其与 Manifest.xml 一起注册或通过代码注册

在您的应用程序中，您必须决定从哪里开始监听设备重新启动。之后，您必须注册 Action_boot_completed。

对不起，我不能为你写代码，但只能建议。

# search - Liferay 搜索不提供网络内容的结果

> ID：12108671
> 
> 赞同：0
> 
> 时间：2012-08-24T11:36:48.830
> 
> 标签：search, permissions, liferay

我们公司正在使用 Liferay 门户 6.0.5 CE。

在liferay 中，我们有一个社区，社区成员很少，网络内容也很少。

默认情况下，所有成员都有角色`Community member`，他们可以查看这些网络内容。但是如果用户尝试通过 liferay 搜索来搜索网页内容，它不会提供任何结果。

如果我设置`permissions`了也可以查看的网络内容`Guest role`，那么搜索会提供相关结果。

如果重要的话，在我们拥有 Liferay 5.x 并迁移到 6.0 之前，然后迁移到 6.0.5。

对此有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:22:55.287

从 5.0 迁移时，似乎尚未设置文章的访客查看权限（如果之前已为访客用户设置了所有权限）。简单的解决方法是为您希望在相应社区中对来宾可见的所有文章分配来宾查看权限。下面代码中的这一行分配了查看权限

```
JournalArticleLocalServiceUtil.addArticleResources(groupId,
                article.getArticleId(), new String[] { "VIEW" },
                new String[] { "VIEW" }); 
```

它被称为资源，您将向文章资源添加权限。

```
 ThemeDisplay themeDisplay = (ThemeDisplay) request
            .getAttribute(WebKeys.THEME_DISPLAY);
    long groupId = themeDisplay.getLayout().getGroupId();
    List<JournalArticle> articles = JournalArticleLocalServiceUtil
            .getArticles(groupId);

    for (JournalArticle article : articles) {
        JournalArticleLocalServiceUtil.addArticleResources(groupId,
                article.getArticleId(), new String[] { "VIEW" },
                new String[] { "VIEW" });
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T06:00:40.240

感谢您的建议，但我通过 hook for search portlet 解决了这个问题。对于搜索，我使用了 DynamicQuery 和 PermissionChecker 以及简单的方法 String.contains()。它的工作速度有点慢，但它可以工作——至少对于 1k+ 的网络内容！

# javascript - 使用 javascript(ajax, jquery?) 从表中删除对象(用户等)

> ID：12108672
> 
> 赞同：0
> 
> 时间：2012-08-24T11:36:50.227
> 
> 标签：javascript, jquery, ajax, asp.net-mvc, asp.net-mvc-3

我对 C# MVC3、javascript、jquery、ajax 等还是很陌生。现在我已经有了带有编辑和删除脚手架的常用索引，但我想使用引导程序中的弹出框从数据库中删除行。

弹出框正在工作，看起来不错。

谁能指出我正确的方向。我不知道用谷歌自动取款机做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:41:57.183

考虑的视图：使用 jquery 删除/隐藏列或行

在服务器上：使用视图中的 id 从数据库中删除该元素。

对不起，如果我不明白你的问题。

# asp.net-mvc - MVC RouteLink 中的 HTML

> ID：12108674
> 
> 赞同：4
> 
> 时间：2012-08-24T11:36:54.110
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有一个这样构造的 RouteLink

```
<p class="articleLink">
    @MvcHelper.Html.RouteLink(article.Title, "Article_Route", new RouteValueDictionary() { { "articleId", article.Id }, { "seoUrl", article.SeoUrl } }))
</p> 
```

但是，`article.Title`可能包含 HTML，即值可能是`<em>Sample</em> Title`这样呈现的

```
<a href="/Article/111111/Sample-Title">&lt;em&gt;Sample&lt;/em&gt; Title</a> 
```

有什么方法可以防止 HTML 被转义，而是被视为实际的 HTML？或者在这种情况下我是否需要创建一个标准的 HTML`<a href...`链接（从而失去与 RouteLink 帮助程序相关的所有细节）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T11:43:33.390

如果您希望在锚点中使用 HTML，请不要使用`Html.RouteLink`（因为默认情况下它会对链接文本进行 HTML 编码，正如您所注意到的），而不是使用使用生成 url`a`手动构建标签：`Url.RouteUrl`

```
<p class="articleLink">
    <a href="@(Url.RouteUrl("Article_Route",
                   new RouteValueDictionary() 
                      { { "articleId", article.Id }, 
                        { "seoUrl", article.SeoUrl } }))">
        @Html.Raw(article.Title)
    </a>
</p> 
```

或者您可以创建自己的非编码`RouteLink`助手。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-24T11:44:04.997

您可以使用[HtmlHelper.Raw()](http://msdn.microsoft.com/en-us/library/gg480740%28v=vs.98%29.aspx)。话虽如此，在模型/视图模型中保留任何 HTML 可能不是一个好主意，这违反了模型和表示分离的原则，也是一个安全隐患。

# ios - CAlayer优化

> ID：12108679
> 
> 赞同：0
> 
> 时间：2012-08-24T11:37:16.420
> 
> 标签：ios, optimization, calayer

我以这种方式将图层应用于 UIImageView：

```
CALayer * l = [image1 layer];
            [l setMasksToBounds:YES];
            [l setCornerRadius:6.0]; 
```

因为我有 100 张图像，我注意到没有这个层，UIScrollView 中的滚动要快得多。我该如何优化这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:39:57.943

如果可能，请使用 a`UITableView`而不是 a 。`UIScrollView`这将显着提高滚动速度。

# sql - TSQL 从函数/过程中选择没有第一个 n 的所有列

> ID：12108680
> 
> 赞同：0
> 
> 时间：2012-08-24T11:37:20.517
> 
> 标签：sql, tsql, sql-server-2005, unpivot

我知道这可能听起来很傻，但我想创建一个函数来处理来自不同大小的表的数据。

可以说我有这样的第一张桌子：

```
ID    IRR     M0    M1
----------------------
 1      0    -10     5
 2      0    -20    10
 3      0   -100   100
 4      0    -10     0 
```

第二张桌子是这样的：

```
ID    IRR     M0    M1    M2
----------------------------
 1      0    -10     5    60
 2      0    -20    10     0
 3      0   -100   100   400
 4      0    -10     0    10 
```

我想创建能够处理两个表中的数据的函数。

我知道第一列包含 ID，第二列 IRR，其余列将保留特定月份的现金流。

函数应该能够处理所有列而不是前 2 列并将结果存储在第二列中。

我知道我可以从特定表中获取所有列：

```
SELECT COLUMN_NAME 
FROM INFORMATION_SCHEMA.columns 
WHERE TABLE_NAME = 'First_Table' 
```

当我想创建将这些列作为行返回的函数时，问题就开始了。

我可以像这样创建函数：

```
CREATE FUNCTION UnpivotRow (@TableName  varchar(50), @FromWhichColumn int, @Row int)
RETURNS @values TABLE
(
    id INT IDENTITY(0, 1),
    value DECIMAL(30, 10)
)
... 
```

但是这个函数应该怎么看？

我认为这种处理表的理想应该是这样的：

```
ProjectID    TimePeriod    Value
--------------------------------
        1             0      -10
        1             1        5
        2             0      -20
        2             1       10
        3             0     -100
        3             1      100
        4             0      -10
        4             1        0 
```

**我需要在不知道列数的情况下取消透视整个表。**

* * *

**编辑：** 如果这不能在函数内部完成，那么可能在一个过程中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:55:23.463

这可以使用动态 SQL 来执行[`UNPIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX),
    @colTP as  NVARCHAR(MAX)

select @cols = stuff((select ','+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('table1') and
               C.name like 'M%'
         for xml path('')), 1, 1, '')

set @query = 'SELECT id, 
              replace(timeperiod, ''M'', '''') timeperiod, 
              value
              from table1
            unpivot 
            (
               value
               for timeperiod in (' + @cols + ')
            ) u '

exec(@query) 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/8b1d3/10)。

该解决方案必须放在存储过程中。

# c# - SQL Server CE GROUP BY 子句

> ID：12108682
> 
> 赞同：0
> 
> 时间：2012-08-24T11:37:24.470
> 
> 标签：c#, sql-server-ce

我必须使用`GROUP BY`语句从 SQL Server CE 中提取数据。

现在我得到

> *在聚合和分组表达式中，SELECT 子句只能包含聚合和分组表达式。[选择子句=，日期]*

但我真的很想约会。

查询如下

```
SELECT Date 
FROM Installments 
GROUP BY ID 
HAVING Sr = max(Sr) 
```

我究竟做错了什么？请解释

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:40:50.817

如果您按 ID 分组，则每个组可能有多个不同的日期，因此您不能选择日期。例如，您可以

```
select Max(Date) FROM Installments GROUP BY ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:41:21.020

正如它所说，您需要在 group by 子句中包含要返回的列。

```
SELECT Date FROM Installments GROUP BY ID, Date 
```

我怀疑你可能想要做的是这个

```
SELECT Date
FROM Installments
WHERE sr = (Select MAX(sr) from Installments) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T11:41:57.770

当您使用分组依据时，您按某个字段分组，并应用聚合函数。因此，在选择中，您应该先输入该字段（分组结果），然后再输入使用的函数的结果。

也许你想要类似的东西

```
SELECT Id, Max(date) FROM Installments GROUP BY ID 
```

这取决于你想要什么。

在此处阅读有关[Group by 的信息](http://msdn.microsoft.com/en-us/library/ms173245%28v=sql.90%29.aspx)

# php - DATE 数据类型的 Mysql PDO 准备语句问题

> ID：12108687
> 
> 赞同：1
> 
> 时间：2012-08-24T11:37:50.227
> 
> 标签：php, mysql, sql, pdo, prepared-statement

我对日期数据类型有疑问。我有一个 php mysql pdo 语句：

```
$mystmt = $mydb->prepare("
    SELECT  `ad_id` 
        FROM `tbl_actions`
        WHERE 
            (`actiondate` > :nowcookietime  )
");
$mystmt->execute(array(
            ':nowcookietime'=>date("Y-m-d H:i:s", time()-$cookiedurationlock),
           )
);
$testnotinsql = $mystmt->fetch(PDO::FETCH_ASSOC); // EMPTY 
```

代码运行返回空。但是，如果我从 general_log 获取下面的 sql 并在 sql 工具（HeidiSQL）中运行，它将返回记录。来自 general_log 的 SQL：

```
SELECT  ad_id 
        FROM tbl_actions
        WHERE 
            (actiondate> '2012-08-24 17:53:21' ) 
```

我的 PHP 时区是 UTC+7 Mysql 是 SYSTEM（哪个 UTC） 据我所知，如果使用相同的时区在 php 中插入和查询，这不是时区问题。

我用强制字符串测试绑定参数

```
':nowcookietime'=>date("Y-m-d H:i:s", time()-$cookiedurationlock), 
```

但它同样是空的。

但是：如果使用引号，则返回行

```
':nowcookietime'=>"'".date("Y-m-d H:i:s", time()-$cookiedurationlock)."'", 
```

你能澄清一下这句话有什么问题吗，因为我知道我们不需要报价，mysql pdo 报价给我们。

**编辑1：**

我更新了正确的sql。从测试中获取时，在 sql 中使用引号是我的错误。:nowcookietime 周围没有引号仍然是空的。

**已关闭**
请参阅下面的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:03:45.550

正如NB在评论中所说，使用

```
(actiondate > :nowcookietime) 
```

在 sql 语句中没有 :nowcookietime 周围的单引号。

自包含示例：

```
<?php
$mydb = setup();
$cookiedurationlock = 40;
$mystmt = $mydb->prepare("
    SELECT  `ad_id` 
        FROM `tmp_tbl_actions`
        WHERE 
            (`actiondate` > :nowcookietime )
");
$mystmt->execute(array(
    ':nowcookietime'=>date("Y-m-d H:i:s", time()-$cookiedurationlock),
));
$testnotinsql = $mystmt->fetch(PDO::FETCH_ASSOC);
var_dump($testnotinsql);

function setup() {
    $pdo = new PDO('mysql:host=localhost;dbname=test;charset=utf8', 'localonly', 'localonly');
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $pdo->exec('
        CREATE TEMPORARY TABLE tmp_tbl_actions (
            ad_id int auto_increment,
            actiondate DATETIME,
            primary key(ad_id),
            key(actiondate)
        )
    ');

    $stmt = $pdo->prepare('INSERT INTO tmp_tbl_actions (actiondate) VALUES(?)');
    $t = time();
    for($i=-80; $i<10; $i++) {
        $stmt->execute(array(date('Y-m-d H:i:s', $t+$i)));
    }
    return $pdo;
} 
```

印刷

```
array(1) {
  ["ad_id"]=>
  string(2) "42"
} 
```

冒号在

```
':nowcookietime'=>date(... 
```

可能是多余的，但它也用于[http://docs.php.net/manual/en/pdostatement.execute.php的示例 #2](http://docs.php.net/manual/en/pdostatement.execute.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T19:41:18.340

我找出原因。

1.  基本上有脚本将 $cookiedurationlock 设置得太短，所以大多数时候它是空的。
2.  添加报价时，比较将是（`actiondate`> '\'2012-08-25 02:28:22\'' ），因此它将返回行。
3.  查询之后，有一个插入新操作行。因此，当我从工具运行跟踪 sql 时，数据发生了变化，它返回了在这个 sql 之后添加的新数据。

我想我必须将我的脚本组织成更简单的脚本。
感谢你的帮助。

# mysql - 从另一个表和不同的数据库更新表

> ID：12108690
> 
> 赞同：28
> 
> 时间：2012-08-24T11:38:12.343
> 
> 标签：mysql, sql

基本上，我想做的是以下内容：我的第一个数据库（prc）中有一个表“用户”，如下所示：

```
prc.user :
id_user : 45 | name_user : Test | login_user : test | pwd_user : test
[...] 
```

在我的第二个数据库中（名为：prc_test）

```
prc_test.user
id_user : 45 | name_user : Test | login_user : test | pwd_user : test
[...] 
```

我想做的事情是用来自“prc.user”的pwd_user的值更新“prc_test.user”中的所有“pwd_user”字段但是在prc_test.user中，id与prc.user中的不同，所以我想用“name_user”来做，（没有双打）。

我该怎么做的任何线索？我在谷歌上搜索过，但我发现的总是一些特定的情况，或者插入语句......

（我使用的是 MySQL5.5）

谢谢 ！

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-08-24T11:46:01.720

```
UPDATE 
  prc.user, 
  prc_test.user 
SET 
  prc_test.user.pwd_user = prc.user.pwd_user
WHERE 
  prc_test.user.name_user = prc.user.name_user 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-12T08:25:58.177

更新 prc_test.user SET prc_test.user.pwd_user = (SELECT prc.user.pwd_user FROM prc.user WHERE prc_test.user.id_user= prc.user.id_user)

# iphone - cassert 文件未找到，但我使用 Box2d 模板

> ID：12108692
> 
> 赞同：7
> 
> 时间：2012-08-24T11:38:22.153
> 
> 标签：iphone, cocos2d-iphone, game-physics, box2d-iphone

我正在使用带有 Box2d 的 cocos2d 模板，但是当我在我的项目中导入 Box2d.h 时，它给了我错误 cassert fiel not found 我有 cocos2d 2.0 版，请帮助我

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-24T11:55:40.553

确保所有项目的源代码文件的文件扩展名为 .mm 而不是 .m。或者将每个 .m 文件的类型设置为 Objective-C++。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T07:52:04.777

更改您的文件扩展名 .mm 就是这样

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T06:13:45.060

在 xcode 4 中更改扩展名将不起作用。而是转到构建设置（选项卡）并将 C++ 标准库设置从编译器默认更改为 libc++ (LLVM...)。

如果您现在构建它，您将收到一条错误消息，指出应用程序与 iOS 5 或更高版本不兼容。所以转到摘要（选项卡）并将部署目标更改为 5.0。它现在应该可以成功构建。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-18T12:01:30.960

这是我解决问题的方法。清理和重新创建项目对我来说似乎不是一个好主意。

对于这个问题，网上有几个答案，但每个答案都没有帮助我解决问题。一个在 SO 上

[cassert 文件未找到，但我使用 Box2d 模板](https://stackoverflow.com/questions/12108692/cassert-file-not-found-but-i-use-box2d-template)，另一个在 cocos2d-iphone 论坛上，

[http://www.cocos2d-iphone.org/forums/topic/cannot-include-box2d-cassert-file-not-found-despite-every-file-being-mm/](http://www.cocos2d-iphone.org/forums/topic/cannot-include-box2d-cassert-file-not-found-despite-every-file-being-mm/)

结合这两个建议对我有用 -

> 1.  将您的所有（不是 cocos2d 或 box2d 文件，只是您的项目文件）从 .m 重命名为 .mm
> 2.  确保在每个文件的右侧窗格中，“类型”选项设置为“默认 - 目标 C++ 源”</li>

对我来说还有另一个问题，对你来说可能不是问题，我正在使用以下签名为 CCLabelTTF

```
CCLabelTTF *title = [CCLabelTTF labelWithString:@"Hello" dimensions:CGSizeMake(720.0f, 880.0f) alignment:UITextAlignmentLeft fontName:@"Arial" fontSize:34]; 
```

这已被弃用，并导致整个地方的错误。我现在正在使用以下稍作修改的版本并修复了错误 -

```
CCLabelTTF *title = [CCLabelTTF labelWithString:@"Hello" dimensions:CGSizeMake(720.0f, 880.0f) hAlignment:kCCTextAlignmentRight fontName:@"Arial" fontSize:34]; 
```

我最近写的这个修复可以在 - [http://indiangamer.com/how-i-fixed-the-cocos2d-box2d-include-file-not-found-error/](http://indiangamer.com/how-i-fixed-the-cocos2d-box2d-include-file-not-found-error/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-10T21:54:54.087

对于像我这样的人：我只是尝试重新打开一个非常旧的 xcode 项目，并在 cassert 文件中遇到此错误。

只需将目标设置为新目标（在我的情况下为 iOS 13），它就会自动选择正确版本的 c++ stdlib，一切正常。

# magento - Magento 自定义模块网格未显示

> ID：12108697
> 
> 赞同：3
> 
> 时间：2012-08-24T11:38:37.223
> 
> 标签：magento

所以我试图在我的自定义模块中显示一个网格（暂时显示任何东西，一旦它工作我会担心这个集合！）。

问题是我的网格小部件类的 _prepareCollection() 和/或 _prepareColumns() 方法似乎从未被调用，并且网格从未显示（按钮和标题文本也不显示）。（Magento 管理员页眉和页脚以及导航正确显示。中间只是空白！）

这是我到目前为止所拥有的：

应用程序/代码/本地/MyNamespace/Mymodule/etc/config.xml

```
<?xml version="1.0" ?>
<config>
    <modules>
        <MyNamespace_Mymodule>
            <version>0.0.1</version>
        </MyNamespace_Mymodule>
    </modules>
    <!-- Define frontend and backend routers -->
    <admin>
        <routers>
            <mymodule>
                <use>admin</use>
                <args>
                    <module>MyNamespace_Mymodule</module>
                    <frontName>mymodule</frontName>
                </args>
            </mymodule>
        </routers>
    </admin>
    <!-- /Define frontend and backend routers -->
    <global>
        <helpers>
            <mymodule>
                <class>MyNamespace_Mymodule_Helper</class>
            </mymodule>
        </helpers>  
        <blocks>
            <mymodule>
                <class>MyNamespace_Mymodule_Block</class>
            </mymodule>
        </blocks>
    </global>
    <adminhtml>
        <menu>
            <mymodule module="mymodule">
                <title>My Module</title>
                <sort_order>80</sort_order>              
                <children>
                    <items module="mymodule">
                        <title>Manage My Module</title>
                        <sort_order>0</sort_order>
                        <action>mymodule/adminhtml_mymodule</action>
                    </items>
                </children>
            </mymodule>
        </menu>
       <!-- define layout updates -->
        <layout>
            <updates>
                <mymodule>
                    <file>mymodule.xml</file>
                </mymodule>
            </updates>
        </layout>
        <!-- /define layout updates -->
    </adminhtml> 
</config> 
```

然后我的控制器：

app/code/local/MyNamespace/Mymodule/controllers/Adminhtml/MymoduleController.php

```
<?php
class MyNamespace_Mymodule_Adminhtml_MymoduleController extends Mage_Adminhtml_Controller_action
{
    public function indexAction() {
        $this->getLayout()->createBlock('mymodule/adminhtml_mymodule');
        $this->loadLayout();
        $this->renderLayout();
    }
} 
```

然后在我的网格容器中：

app/code/local/MyNamespace/Mymodule/Block/Adminhtml/Mymodule.php

```
<?php
class MyNamespace_Mymodule_Block_Adminhtml_Mymodule extends Mage_Adminhtml_Block_Widget_Grid_Container
{
    public function __construct()
    {
        echo  __METHOD__ . " (Line #" . __LINE__ . ")<br/>";
        parent::__construct();
        $this->_controller = 'adminhtml_mymodule';
        $this->_blockGroup = 'mymodule';
        $this->_headerText = Mage::helper('mymodule')->__('my header text'); // this is not rendered
        $this->_addButtonLabel = Mage::helper('mymodule')->__('my button text'); // this is not rendered

    }

    protected function _prepareLayout()
    {
        $this->setChild( 'grid',
            $this->getLayout()->createBlock( $this->_blockGroup.'/' . $this->_controller . '_grid',
            $this->_controller . '.grid')->setSaveParametersInSession(true) );
        return parent::_prepareLayout();
    }
} 
```

然后在我的网格小部件中：

app/code/local/MyNamespace/Mymodule/Block/Adminhtml/Mymodule/Grid.php

```
<?php
class MyNamespace_Mymodule_Block_Adminhtml_Mymodule_Grid extends Mage_Adminhtml_Block_Widget_Grid
{

    public function __construct()
    {
        parent::__construct();
        $this->setId('mymoduleGrid');
        $this->setDefaultSort('id');
        $this->setDefaultDir('ASC');
        $this->setSaveParametersInSession(true);
    }

    protected function _prepareCollection()
    {
        echo  __METHOD__ . " (Line #" . __LINE__ . ")<br/>"; // This is never called
        $collection = Mage::getModel('catalog/product')->getCollection(); // just a temp collection for the time being

        $this->setCollection($collection);
        return parent::_prepareCollection();
    }

    protected function _prepareColumns()
    {
        echo  __METHOD__ . " (Line #" . __LINE__ . ")<br/>"; // This is never called
        $this->addColumn('id', array(
          'header'    => Mage::helper('mymodule')->__('ID'),
          'align'     =>'right',
          'width'     => '10px',
          'index'     => 'id',
        ));
        return parent::_prepareColumns();
    }
} 
```

最后是我的布局 xml：

app/design/adminhtml/default/default/layout/mymodule.xml

```
<?xml version="1.0"?>
<layout version="0.1.0">
    <adminhtml_mymodule_index>
        <reference name="content">
            <block type="mymodule/adminhtml_mymodule" name="mymodule" />
        </reference>
    </adminhtml_mymodule_index>
</layout> 
```

日志中没有显示任何错误，我现在有点难过，其他 SO 答案似乎不合适。

任何人都可以解释为什么我的网格（即使是空的）没有显示？

谢谢你。

**编辑**注意到某些类的大小写错误（Mynamespace 应该是 MyNamespace）。改变了它们，但没有区别

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T15:33:56.177

这是您布局的句柄标签的问题。

它应该是：

```
<?xml version="1.0"?>
<layout version="0.1.0">
    <mymodule_adminhtml_mymodule_index>
        <reference name="content">
            <block type="mymodule/adminhtml_mymodule" name="mymodule" />
        </reference>
    </mymodule_adminhtml_mymodule_index>
</layout> 
```

有关解释和一些提示，您可以阅读以下内容：

[我的布局没有加载到我的 Magento 管理视图中](https://stackoverflow.com/questions/11862940/my-layout-isnt-loading-in-my-magento-admin-view/11864693#11864693)

= 更新 =

您也不需要像`$this->getLayout()->createBlock('mymodule/adminhtml_mymodule');`在您的控制器中那样调用控制器`mymodule.xml`

或者

您可以通过将控制器的操作更改为以下方式来省略您的`mymodule.xml`（无需调用它）：

```
public function indexAction() {
    $this->loadLayout();
    $myblock = $this->getLayout()->createBlock('mymodule/adminhtml_mymodule');
    $this->_addContent($myblock);
    $this->renderLayout();
} 
```

见定义：

```
Mage_Adminhtml_Controller_Action

protected function _addContent(Mage_Core_Block_Abstract $block)
{
    $this->getLayout()->getBlock('content')->append($block);
    return $this;
} 
```

上面的那些代码和`mymodule.xml`, 附加块`'mymodule/adminhtml_mymodule'`一样`content`

都是你的选择！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:55:09.617

您能否确保正确调用您的索引操作？

当你这样做时：

```
<?php
class Mynamespace_Mymodule_Adminhtml_MymoduleController extends Mage_Adminhtml_Controller_action
{
public function indexAction() {
    echo "im here";exit; //<----does this display?
    $this->getLayout()->createBlock('mymodule/adminhtml_mymodule');
    $this->loadLayout();
    $this->renderLayout();
} 
```

}

最后，首先加载您的布局很重要。所以在我的选择中，将您的索引操作更改为：

```
<?php
class Mynamespace_Mymodule_Adminhtml_MymoduleController extends Mage_Adminhtml_Controller_action
{
public function indexAction() {
    $this->loadLayout();    // <---- This first
    $this->getLayout()->createBlock('mymodule/adminhtml_mymodule');// <---- then this
    $this->renderLayout();
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-20T11:10:54.940

我知道这与答案并不严格相关，但希望这可能对某人有所帮助。

以防万一有人正在阅读这篇文章，完全没有希望 - 确保`app/design/adminhtml/default/default/layout`.

我在本地的自定义网格没有问题，但是当我迁移它时，它显示了上面的症状（空白屏幕等）

这是因为我没有复制那个文件。

# google-apps-script - 将我的应用程序发布为 Web 应用程序时出现问题？

> ID：12108698
> 
> 赞同：-3
> 
> 时间：2012-08-24T11:38:38.353
> 
> 标签：google-apps-script, google-apps-for-education

我们的组织正在使用 Google Apps for Edu，并且正在编写一些我们通常只能从管理应用程序/控制台执行的操作，所以我猜正在开发的脚本/应用程序将需要特权“权限”。

我尝试使用“部署为网络应用程序”屏幕中的所有组合（发布 => 部署为网络应用程序），但应用程序 URL 显示我们的 Google Apps for Edu 登录屏幕，我认为这是因为我在做像 UserManager 这样的管理工作。创建用户（）。

我想知道评委现在如何能够访问我的应用程序，或者可能错过了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T16:20:45.897

什么是“一些东西”？安全模型非常简单。当您发布 Web 应用程序时，您有 2 个选择 - 一个，脚本以“您”身份运行，另一个脚本以运行脚本的用户身份运行。根据您的设置方式，评委将看到授权消息（以用户身份运行脚本）或查看正在运行的脚本（以您身份运行时）。请参阅[https://developers.google.com/apps-script/execution_web_apps#permissions](https://developers.google.com/apps-script/execution_web_apps#permissions)

# java - 如何为 OSGI Bundle (Eclipse-Plugin) 提供 log4j.properties？

> ID：12108705
> 
> 赞同：5
> 
> 时间：2012-08-24T11:39:02.693
> 
> 标签：java, eclipse-plugin, log4j, osgi, slf4j

**项目设置：**

1.  Logging-1.0.jar
    *   包含一个使用 slf4j/log4j 的 Logger.class
    *   依赖于 slf4j-api.jar、slf4j-log4j.jar、log4j.jar
2.  日志记录OSGI-1.0.jar
    *   包装日志项目
    *   包含一个 Activator 和 MANIFEST.MF
    *   lib/ 包含 logging-1.0.jar、slf4j-api.jar、slf4j-log4j.jar、log4j.jar
    *   来自 lib/ 的 jar 被添加到类路径中，来自 logging-1.0.jar 的包被导出
3.  SomeBundle-1.2.jar
    *   包含一个 Activator 和 MANIFEST.MF
    *   依赖于 LoggingOSGI-1.0.jar

从 SomeBundle 访问 Logger 类有效，但日志记录项目找不到 log4j.properties（log4j:WARN No appenders could be found for logger）。

**问题：**

*   我必须在哪里放置 log4j.properties？
*   有什么想法我可以尝试吗？（已经尝试过：不同的目录、Eclipse-Buddies、-Dlog4j.configuration 作为 VM 参数）
*   将是一个扩展点，它告诉日志记录项目 log4j.properties 的位置，这是一个好的解决方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T13:25:56.383

当我大约六年前最后一次尝试这个时，解决方案变成了使用*log4j.properties文件创建一个**片段包*，然后将该片段（通过清单头）附加到加载日志库的包（“Logging -1.0.jar，”在你的情况下）。对于看似如此简单的目标，感觉需要大量的项目结构、构建时间和部署开销。*`Fragment-Host`*

 *有关片段包的更多详细信息，请参阅[*OSGi 服务平台核心规范*](http://www.osgi.org/Download/Release5)的第 3.14 节。

另一种想法是考虑使用配置管理服务来指定磁盘上日志配置文件的路径，在你的包之外。这将需要扩充您的日志库以查找配置（或者，更好的是，*监听*一个），然后将该配置传递给日志实现。

*如果我没有指出OSGi 服务平台服务纲要*第 101 节中指定的 OSGi 日志服务，我也会失职。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:29:35.813

为了解决我的问题，我将此代码添加到配置 log4j 的 LoggingOSGI-1.0 的激活器中。文件路径取自系统属性：`-Dlog4j.configuration=path/to/log4j.properties`.

仍然对此解决方案的其他方法或意见感兴趣。

```
private static final String LOG4J_CONFIG_KEY = "log4j.configuration";

public void start(BundleContext bundleContext) throws Exception {
    Activator.context = bundleContext;

    if (System.getProperties().containsKey(LOG4J_CONFIG_KEY)) {
        String file = System.getProperties().getProperty(LOG4J_CONFIG_KEY);
        PropertyConfigurator.configure(file);
    }
} 
```*

# java - 为什么JVM消耗的内存比-Xms指定的少？

> ID：12108706
> 
> 赞同：12
> 
> 时间：2012-08-24T11:39:03.590
> 
> 标签：java, linux, garbage-collection, jvm

我的问题如题，通过搜索得到了一些知识：

1.  linux has shared memory [如何测量应用程序或进程的实际内存使用情况？](https://stackoverflow.com/questions/131303/linux-how-to-measure-actual-memory-usage-of-an-application-or-process)

2.  JVM 将保留 Xms 中设置的内存量 [-Xms JVM 参考堆内存是什么意思？](https://stackoverflow.com/questions/8231829/what-does-the-xms-jvm-mean-in-reference-to-heap-memory)

但是还是不知道为什么，有的能帮上忙吗？

这是我在 Ubuntu12.04(64bit) 上运行的测试 | JDK 1.7.0_04。顶部显示如下：

```
 PID USER      PR  NI  VIRT  RES       SHR S %CPU %MEM    TIME+  COMMAND
 4067 brian     20   0 5316m **262m** 7496 S    0  3.3   0:00.30 java -**Xms4096m** -Xmx4096m Test
 4066 brian     20   0 3182m **256m** 7496 S    0  3.3   0:00.30 java -**Xms2048m** -Xmx2048m Test
 4065 brian     20   0 2114m **252m** 7492 S    0  3.2   0:00.30 java -**Xms1024m** -Xmx1024m Test
 4064 brian     20   0 1314m  **76m** 7584 S    0  1.0   0:00.20 java -**Xms256m** -Xmx256m Test
 4063 brian     20   0 1180m  **51m** 7608 S    0  0.7   0:00.21 java -**Xms128m** -Xmx128m Test 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T11:45:34.097

您正在查看*常驻*内存 - 即消耗的物理 RAM。请参阅[此处](http://www.unixtop.org/display/resident.html)了解更多信息。

然而，*虚拟*内存是应用程序消耗的内存，包括换出（到磁盘）的内存。您会看到与虚拟内存和您的`-Xms`设置有更密切的对应关系。

有关更多信息，请参阅[此 ServerFault 答案](https://serverfault.com/questions/138427/top-what-does-virtual-memory-size-mean-linux-ubuntu)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-24T12:19:10.410

当您的 JVM 启动时，它会将您的最大堆大小保留为启动时的一个连续虚拟内存块。但是，只有实际使用的页成为常驻页（实际主存）

当您设置最小大小时，它不会强制 JVM 在不需要时使用那么多内存。取而代之的是，到现在为止，减少内存并不费力（您可能仍会看到一些较小的集合）在大多数应用程序中，几乎立即达到最小大小，但是“hello world”程序将使用相同的内存，无论您设置多大最小尺寸。

# sharepoint - 与 ASP.net 应用程序的 SharePoint 会话

> ID：12108707
> 
> 赞同：0
> 
> 时间：2012-08-24T11:39:04.417
> 
> 标签：sharepoint

如何在一个 SharePoint 站点和另一个 asp.net 站点之间共享会话变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T23:41:05.937

如果您想在您的 asp.net 和 sharepoint 之间共享任何数据，那么我建议您将其保存在 sharepoint 属性包中。您可以使用您的 asp.net 应用程序中的客户端对象模型访问属性包

财产包介绍： [http://www.sharepointsecurity.com/sharepoint/sharepoint-development/what-is-a-property-bag/](http://www.sharepointsecurity.com/sharepoint/sharepoint-development/what-is-a-property-bag/) http://www.fivenumber.com/understanding-sharepoint-property-bag-settings /

从 asp.net 应用程序访问 sharepoint 属性包： [https ://www.nothingbutsharepoint.com/sites/devwiki/articles/Pages/Making-use-of-the-Property-Bag-in-the-ECMAScript-Client-Object-模型.aspx](https://www.nothingbutsharepoint.com/sites/devwiki/articles/Pages/Making-use-of-the-Property-Bag-in-the-ECMAScript-Client-Object-Model.aspx)

# bash - sed - 我如何使它成为“一个班轮”？

> ID：12108709
> 
> 赞同：0
> 
> 时间：2012-08-24T11:39:11.547
> 
> 标签：bash, shell, sed, bin

我想要这个脚本：

```
#!/bin/sh

cat source.txt | sed "/replace_text_holder/ {
r file.txt
d
}" | cat 
```

一定要这样**写**：

```
cat source.txt | sed "/replace_text_holder/ { r file.txt d }" | cat 
```

但这不起作用。任何人都知道为什么，和/或我如何解决它？

我目前受到此错误的骚扰：

```
unbalanced "{" 
```

我试过插入“\n”让它相信有一个新行，但这不起作用。

显然我不知道我在做什么......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T11:45:11.113

尝试这个：

```
sed -e '/replace_text_holder/{r file.txt' -e 'd}' 
```

# django - 多个注释总和项会产生夸大的答案

> ID：12108710
> 
> 赞同：19
> 
> 时间：2012-08-24T11:39:17.263
> 
> 标签：django, django-queryset, annotate

在以下设置中，我想要一个带有项目列表的 QuerySet，每个项目都用其所有任务持续时间的总和（作为 tasks_duration）和所有任务的子任务持续时间的总和（作为 subtasks_duration）进行注释。我的模型（简化）如下所示：

```
class Project(models.Model):
    pass

class Task(models.Model):
    project = models.ForeignKey(Project)
    duration = models.IntegerField(blank=True, null=True)

class SubTask(models.Model):
    task = models.ForeignKey(Task)
    duration = models.IntegerField(blank=True, null=True) 
```

我让我的 QuerySet 像这样：

```
Projects.objects.annotate(tasks_duration=Sum('task__duration'), subtasks_duration=Sum('task__subtask__duration')) 
```

与 Django annotate()中解释的行为相关，[多次导致错误答案](https://stackoverflow.com/q/1265190/532513)我得到的 tasks_duration 远高于应有的值。多个 annotate(Sum()) 子句在结果 SQL 中产生多个左内连接。tasks_duration 只有一个 annotate(Sum()) 项，结果是正确的。但是，我想同时拥有 tasks_duration 和 subtasks_duration。

进行此查询的合适方法是什么？我有一个可行的解决方案，可以按项目执行，但预计速度会慢得无法使用。我也有类似的工作与 extra() 调用，但我真的很想知道我想要的是否可以使用纯 Django。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2017-08-21T18:08:29.127

[此处](https://code.djangoproject.com/ticket/10060)报告了该错误，但即使在 Django 1.11 中也尚未解决。该问题与以反向关系连接两个表有关。请注意，distinct 参数适用于 Count，但不适用于 Sum。因此，您可以使用一个技巧并编写如下所示的 ORM：

```
 Projects.objects.annotate(
      temp_tasks_duration=Sum('task__duration'),
      temp_subtasks_duration=Sum('task__subtask__duration'),
      tasks_count=Count('task'),
      tasks_count_distinct=Count('task', distinct=True),
      task_subtasks_count=Count('task__subtask'),
      task_subtasks_count_distinct=Count('task__subtask', distinct=True),
 ).annotate(
      tasks_duration=F('temp_tasks_duration')*F('tasks_count_distinct')/F('tasks_count'),
      subtasks_duration=F('temp_subtasks_duration')*F('subtasks_count_distinct')/F('subtasks_count'),
 ) 
```

**更新：** 我发现您需要使用子查询。在以下解决方案中，首先过滤与外部查询相关的任务（OuterRef 引用外部查询，因此针对每个项目过滤任务），然后按“项目”对任务进行分组，以便总和适用于所有每个项目的任务，如果项目存在任何任务，则仅返回一个结果（您已按“项目”过滤，然后按同一字段分组；这就是为什么只有一组可以在那里。）否则没有。如果项目没有任务，结果将为 None，这意味着我们不能使用 [0] 来选择计算的总和。

```
from django.db.models import Subquery, OuterRef
Projects.objects.annotate(
    tasks_duration=Subquery(
        Task.objects.filter(
            project=OuterRef('pk')
        ).values(
            'project'
        ).annotate(
            the_sum=Sum('task__duration'),
        ).values('the_sum')[:1]
    ),
    subtasks_duration=Sum('task__subtask__duration')
) 
```

运行此代码只会向数据库发送一个查询，因此性能非常好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T10:04:47.890

我也收到此错误。完全相同的代码。如果我单独进行聚合，它会起作用，但是一旦我尝试同时获得两个总和，其中一个会高出 2 倍，而另一个会高出 3 倍。

我不知道为什么 Django 会这样。我在这里提交了一个错误报告： [https](https://code.djangoproject.com/ticket/19011) ://code.djangoproject.com/ticket/19011 你可能也有兴趣关注它。

# javascript - window.getSelection() 不提供 html 节点

> ID：12108713
> 
> 赞同：2
> 
> 时间：2012-08-24T11:39:27.013
> 
> 标签：javascript, jquery, getselection

这是我的页面来源：

```
<body>
<div>
    <p><span id="1">word</span> <span id="2">word</span> </p>
    <div><span id="3">word</span> <span id="4">word</span></div>
    <ul>
        <li><span id="5">word</span> <span id="6">word</span></li>
    </ul>
    </ul>
    <p><span id="7">word</span> <span id="8">word</span> <strong><span id="9">word</span></strong> </p>
</div>
</body> 
```

我想突出显示（应用新类）用户选择的跨度并获取它的 ID。

我可以通过 window.getSelection() 获取用户选择的内容。但我不知道如何获取选定的文本节点。

***提前致谢， 洛根***

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T12:24:54.657

`window.getSelection()`返回一个包含 start ( ) 和 end ( )的`selection`对象 ( [ref](https://developer.mozilla.org/en-US/docs/DOM/Selection) )。因此，根据您提供的 HTML - 将 ID 修改为不只使用数字 ( [ref](https://stackoverflow.com/a/79022/145346) ) - 这是一个[演示](http://jsfiddle.net/Mottie/R7f4T/)。单击任何单词，或选择一组单词以查看它们获得“红色”类名称。`anchorNode``extentNode`

**修改后的 HTML**

```
<div>
    <p><span id="s1">word1</span> <span id="s2">word2</span> </p>
    <div><span id="s3">word3</span> <span id="s4">word4</span></div>
    <ul>
        <li><span id="s5">word5</span> <span id="s6">word6</span></li>
    </ul>
    <p><span id="s7">word7</span> <span id="s8">word8</span> <strong><span id="s9">word9</span></strong> </p>
</div> 
```

**脚本**

```
$('div').bind('mouseup', function(){

    var i,
        s = window.getSelection(),
        // get ID of starting node
        start = parseInt((s.anchorNode.parentNode.id || '').substring(1), 10),
        // get ID of end node
        end = parseInt((s.extentNode.parentNode.id || '').substring(1), 10),
        // start gathering spans
        spans = $('#s' + start);

    // remove selected class
    $('span[id^=s]').removeClass('red');

    // add each span
    for (i = start; i <= end; i++) {
        spans = spans.add( $('#s' + i) );
    }

    // add selected class
    spans.addClass('red');

}); 
```

​ ​</p>

# javascript - 车把模板

> ID：12108715
> 
> 赞同：1
> 
> 时间：2012-08-24T11:39:30.803
> 
> 标签：javascript, handlebars.js

我有数据数组，当我尝试使用车把模板编译它时，在获取“列”的值时出现“var fn = options.fn，inverse = options.inverse; - 选项未定义”错误。有人可以让我知道这里错过了什么吗？

```
testData = [
  title : 'text1',
  values : {column: [0, 0, 0]}
]

<table>
{{#each}}
<tr>    
    <td>{{title }}</td>
    {{#each values}}
        <td>{{column}}</td> 
    {{/each}}   
</tr>
{{/each}}
</table>

var template = Handlebars.compile(tmpl_src);    
var html = template(testData);
$(body).html(html); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:33:18.597

我无法重现您的错误，但看起来 Handlebars 助手被错误地调用了。最有可能的候选人是你的`{{#each}}`as`each`应该被调用的东西来迭代。我们可以通过使用一个对象调用模板函数来解决这个问题，以便您`testData`在模板中拥有一个名称：

```
var testData = [
    { title : 'text1', values : {column: [0, 0, 0]} },
    //...
];
var template = Handlebars.compile(tmpl_src);    
var html = template({
    rows: testData
}); 
```

然后对模板稍作调整：

```
<table>
    {{#each rows}}
        <tr>    
            <td>{{title}}</td>
            {{#each values.column}}
                <td>{{.}}</td> 
            {{/each}}   
        </tr>
    {{/each}}
</table> 
```

我还调整了内部`each`，以便它迭代内部数组`values`而不是尝试迭代`values`自身，`{{.}}`引用当前项目，这样应该会给你你所追求的零。

演示：http: [//jsfiddle.net/ambiguous/CRCG5/](http://jsfiddle.net/ambiguous/CRCG5/)

# java - 您如何通过 HTTP 请求获取用户 X.509 证书 - （无 SSL）

> ID：12108716
> 
> 赞同：0
> 
> 时间：2012-08-24T11:39:31.757
> 
> 标签：java, authentication, x509

我们希望使用 LDAP 中的 X.509 证书和组对用户进行身份验证/授权。

使用 Tomcat 5.5，我们能够通过 SSL 获取 X.509 证书然后切换回 http 并继续在请求中使用 userPrincipal 来做到这一点。迁移到 Tomcat 6 和 7 后，userPrincipal 在切换回 http 后不再可用。

在这个问题[中，我可以在不使用 HTTPS 连接的情况下使用 SSL 证书吗？](https://stackoverflow.com/questions/6636499/can-i-use-ssl-certificate-without-using-a-https-connection/6637436#6637436)据说您可以在没有 SSL 的情况下请求 X.509 证书。我正在尝试确认是否有可能，以及是否有人知道如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T12:41:34.270

让我们考虑一下。

用户身份验证通常是这样的：

1.  要求客户证明其身份
2.  接收用户身份证明
3.  传回一个唯一的随机字符串，客户端可以在未来使用它来证明他的身份（会话令牌）。

身份验证后返回未加密的 HTTP 是个坏主意。每个人都可以在线上看到会话令牌。他们可以窃取它并用它来冒充用户。有关示例，请参阅[FBController](http://my.opera.com/quakerdoomer/blog/fbcontroller-v3-0-facebook-control-utility-version-3-0)或搜索“会话劫持”。

使用未加密的会话来传递用户身份证明同样是个坏主意。每个人都可以重播这个并以用户的身份冒充。无论您使用 X.509 证书还是用户名/密码：都是一样的。

如果你真的想要，你可以使用 Javascript 实现你自己的伪 HTTPS。例如，雅虎使用 JavaScript 在通过网络发送用户密码之前获取用户密码的加盐 SHA1。您可以使用 Javascript 使用 X.509 的私钥对 nonce 进行签名，并通过公共证书发送。**请注意，使用此方法时您仍然对会话劫持持开放态度，因此这只是一种虚假的安全感！**

一个更好的方法是只使用标准的 HTTPS。全连接是加密的，这意味着在传递用户证明、会话劫持甚至查看用户请求的信息时不存在机密性问题。

# html - 使用 DTD 学习 (X)HTML

> ID：12108717
> 
> 赞同：0
> 
> 时间：2012-08-24T11:39:39.230
> 
> 标签：html, dtd

我正在考虑学习（X）HTML。我在网上阅读了有关 w3schools 和有关该主题的讨论，并打算远离它（或最多将其用作参考）。我认为在学习编程语言时最好去原始源（php.net、python.org、mysql.com、...）。我试图阅读 (X)HTML 4/5 规范，但在开始后不久就放弃了。据我所知，下一个最好的事情是 DTD。如果学习，您对此有何看法，您能推荐替代方案吗？还有用于 HTML 5 的 DTD 或类似 DTD 的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:29:23.010

HTML 不仅仅是 DTD。从 DTD 学习 HTML 就像从包含文件学习 C 一样——**你只是不这样做**。

DTD 只是指定了一些简单的语法规则。您可以使用它来粗略地验证您的代码，但它是有限的。它肯定对语义一无所知。

这是一个猜测工作。就像，你有：

```
<html>
   <body> 
```

现在 DTD*只*说您可以选择以下之一：`<h1>`, `<h2>`, ..., `<ul>`, `<ol>`, ..., `<p>`, ...</p>

好吧，有时它会*简要*描述特定元素或属性的含义（在*评论*中）。但仅此而已。它没有解释给定元素的目的是什么，有哪些替代方案以及哪个更适合特定任务。

另外，请记住，如今 HTML 很少单独使用。你至少也必须了解 CSS（除非你要写一些难看的汤——那么*请不要开始*），而且 CSS 不适合 DTD。

规格对您来说是*最重要*的文件，但它们也不适合学习。规范是您在掌握了所有基础知识之后开始使用的东西，并且您可以在其中检查您对它们的理解。但仅 HTML 和 CSS 规范也不够。至少有[WCAG 。](http://www.w3.org/TR/WCAG/)还有一点常识。

我认为您可以[从 Mozilla](https://developer.mozilla.org/en-US/docs/HTML/Introduction)开始的一个教程。*它也不是完美的，在开始编写好的*HTML之前，您需要阅读更多内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:45:33.030

那里有很多资源。许多很棒的书籍和网站。不要从规范中学习，它*非常*干燥。您无法从 DTD 中学习——它只是一堆代码，概述了哪些元素可以包含什么，等等。这里有几件事要检查： http:
[//jessey.net/simon/xhtml_tutorial/](http://jessey.net/simon/xhtml_tutorial/)
[http://diveintohtml5.info](http://diveintohtml5.info)
[http://www.kirupa.com/html5/introduction_html.htm](http://www.kirupa.com/html5/introduction_html.htm) [https://developer.mozilla。 org/en-US/docs/HTML/Introduction](https://developer.mozilla.org/en-US/docs/HTML/Introduction)
是的，我确实（！）认为您可以向 w3schools 学习。这是另一个很好的资源。

# iphone - 设备不接受移动配置文件

> ID：12108724
> 
> 赞同：0
> 
> 时间：2012-08-24T11:39:56.320
> 
> 标签：iphone, ios, xcode

我创建了一个临时配置文件，其中包括我要测试的设备。它是第 4 代。运行 iOS 5.1 的 iPod Touch。当我在 iTunes 中将移动配置文件拖到我的 iPod 中时，我收到一条消息，指出应用程序无法在我的设备中运行，因此无法添加配置文件。我的应用程序是使用 iOS 4.3 设置的部署目标和 iOS 5.1 的基本 SDK 构建的。

可能是什么问题？

# php - 更改指向重定向页面 php 的链接

> ID：12108726
> 
> 赞同：-3
> 
> 时间：2012-08-24T11:40:01.593
> 
> 标签：php

如何更改字符串示例中的 url：

这是一个链接`<a href="http://google.com.au">http://google.com.au</a>`

对于这样的事情

这是一个警告页面链接`<a href="./warn.php?link=http://google.com.au">http://google.com.au</a>`

编辑：

我要做的是获取最终用户输入的描述，他们可能会在描述中输入链接，我想更改所有链接以使它们转到警告页面，警告页面是`./warn.php?site=link`

字符串可能看起来像这样

```
This is a awesome description <a href="google.com.au">Google</a> and this another link <a href="http://google.com.au/images">Google images</a> 
```

好的，这是我尝试过的：

```
$descc = mysql_real_escape_string($_POST['description']);

$descc = preg_replace('"\b(http://\S+)"', '<a href="./warn.php?site='.base64_encode(.'$1'.).'">$1</a>', $descc); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:44:40.093

检查这个，虽然我不确定你是否真的指的是这个，然后让我知道这个案例——

```
$mylink = "http://google.com.au";

This a warning page link <a href="./warn.php?link=<?php echo $mylink ?>">http://google.com.au</a> 
```

**编辑版本 1.0**

即使它在描述框数据上，您也可以通过 jquery 或 php 之类的方式获取它

```
$mylink = $_GET['desc_name_data']; 
```

请更具体地解决问题:)

**编辑版本 1.1**

检查这个然后让我知道——

```
echo preg_replace('(<a href="http://\S+)', '<a href="./warn.php?site='.'google.com.au'.'">google.com.au', $descc); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:43:58.133

你可以看看`preg_replace()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T11:58:49.890

我不确定我是否理解您的问题，但[urlencode](http://php.net/manual/en/function.urlencode.php)可能会有所帮助。

```
<a href="./warn.php?link=<?php echo urlencode('http://google.com.au'); ?>">http://google.com.au</a> 
```

如果不是这样，那么请更具体地说明您要实现的目标和[尝试过](http://mattgemmell.com/2008/12/08/what-have-you-tried/)的目标。

编辑：

好的，您可以尝试使用[HTML 解析器](http://simplehtmldom.sourceforge.net/)从链接中提取 href，然后适当地重写。这可能比正则表达式更可靠。

如果您将 url 作为查询字符串传递，您仍应添加 urlencode。

# button - 为 sagepay 网关创建一个基本的立即付款按钮

> ID：12108728
> 
> 赞同：5
> 
> 时间：2012-08-24T11:40:19.337
> 
> 标签：button, opayo

我有一个客户注册了 sagepay 帐户。他当前的网站运行 wordpress 3.0，目前没有任何电子商务功能。

他需要一个按钮，让用户通过 sagepay 提交 300 英镑的押金（这个金额永远不会改变）。（通常，我会建议使用贝宝来做类似的事情，但显然由于他的业务的旅行性质，贝宝不会让我的客户拥有专业帐户）

我已经查看了 3 月份在这里的类似线程中描述的方法（[如何制作 SagePay BuyNow 按钮？](https://stackoverflow.com/questions/9540321/how-do-i-make-a-sagepay-buynow-button)），但我不确定如何在 wordpress 的页面中实现这一点，对php bar 基本模板编辑，所以我完全迷失在 $PAYMENT_CRYPT 部分。

如果有人可以提供我需要采取的步骤来实现每次提交相同金额的基本按钮，然后在将所有卡详细信息/客户详细信息发送到 sagepay 网关后收集它们，我们将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:20:27.647

简而言之，没有。这些不是解决这个问题的简单方法。除非您链接到 SagePay 的付款表单并使用新的 IFRAME 功能。您可以在 WordPress 中包含允许在模板页面或模板文件上使用 PHP 代码的某些信息。

1 - 在您的 PHP 服务器中对表单进行 IFRAME 并自行对表单进行编码，这样 CSS 将变得像 WordPress 页面上的 CSS

2 - 为它创建一个支付模块

3 - 为 WordPress 使用现有的支付电子商务服务器模块 - 已经有很多插件

4 - 创建一个支付按钮超链接，一旦点击，它将转到您服务器上的一个 PHP 表单，金额为 300 英镑。

5 - 使用 Nochex 或其他支付供应商、谷歌钱包等（这对客户来说不是一个简单的选择）

使用 FORM，您可以：

```
<? 

# Define your vars

$serverLive="https://live.sagepay.com/gateway/service/vspform-register.vsp"
//$serverLive="https://test.sagepay.com/gateway/service/vspform-register.vsp"
$YOUR_VENDOR_LOGIN_NAME="";
$VendorTxCode="406227821909";
$Amount="350.00";
$Currency="GBP";
$Description="1 ACME Widget";
$SuccessURL="http://example.com/success.php";
$FailureURL="http://example.com/fail.php";
$BillingSurname="Smith";
$BillingFirstnames="John";
$BillingAddress1="123 Main Street";
$BillingCity="Anywhere";
$BillingPostCode="29555";
$BillingCountry="USA";
$DeliverySurname="Smith";
$DeliveryFirstnames="John";
$DeliverAddress1="123 Main Street";
$DeliveryCity="Anywhere";
$DeliveryPostCode="29555";
$DeliveryCountry="GBP";

# The address information can be done via jQuery on your page or get some defaults

?>
<form action="<?=$serverLive?>" method="POST" id="SagePayForm" name="SagePayForm">
    <input type="hidden" name="VPSProtocol" value="2.23" />
    <input type="hidden" name="TxType" value="PAYMENT" />
    <input type="hidden" name="Vendor" value="<?= $YOUR_VENDOR_LOGIN_NAME ?>" />
    <input type="hidden" name="Crypt" value="<?= $PAYMENT_CRYPT ?>">    
    <input type="image" src="images/buynow-sagepay.png" />
</form>
<script type="text/javascript">
function submitform()
{
  document.SagePayForm.submit();
}
submitform();
</script> 
```

即使使用此代码，您仍然需要使用一些 SagePay 库，例如 XOR 和 Crypt 函数：

```
// Crypt and XOR functions
private function simpleXor($string, $password) {
    $data=array();
    for ($i=0; $i < utf8_strlen($password); $i++) {
        $data[$i]=ord(substr($password, $i, 1));
    }
    $output='';
    for ($i=0; $i < utf8_strlen($string); $i++) {
    $output .= chr(ord(substr($string, $i, 1)) ^ ($data[$i % utf8_strlen($password)]));
    }
    return $output;     
} 
```

# c# - 名为“Table”的 DataTable 已属于此 DataSet

> ID：12108731
> 
> 赞同：4
> 
> 时间：2012-08-24T11:40:37.670
> 
> 标签：c#, asp.net

当我将第二个表（dtResult）添加到数据集时，它给出了错误

名为“Table”的 DataTable 已属于此 DataSet。

```
DataTable dtSession = new DataTable();
DataTable dtResult= new DataTable();
dtResult.TableName = "A";
dtSession.TableName = "B";
dtSession = objOpt.GetSearchDetails().Copy();
ds.Tables.Add(dtSession);
dtResult = objOpt.Search_Synchronous().Copy();
ds.Tables.Add(dtResult); 
```

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T11:42:22.747

您需要在从您的方法中获取副本并将其添加到`DataSet`.

```
DataTable dtResult= new DataTable();

dtSession = objOpt.GetSearchDetails().Copy();
dtSession.TableName = "B";
ds.Tables.Add(dtSession);

dtResult = objOpt.Search_Synchronous().Copy();
dtResult.TableName = "A";
ds.Tables.Add(dtResult); 
```

由于您从方法中获取副本，`objOpt.GetSearchDetails().Copy()`并且`objOpt.Search_Synchronous().Copy()`它们正在覆盖之前分配给表的名称，并且这两个都返回带有名称的表`Table`，这就是您收到此错误的原因

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-08T14:39:23.120

我今天遇到了这个异常，但它与添加 DataTable 无关。

我有一个 ASP.Net Core WebApi，在 Post 和 Put 端点中，我试图保存/更新新记录*，并*在数据库（在同一个表中）中搜索具有相同详细信息的现有记录，如果这样的记录存在，要更新它。

当它试图保存这些更改时，我遇到了这个异常。

解决方案是将其拆分，首先保存新/更新的记录...

```
//  Avoid an "A DataTable named 'Users' already belongs to this DataSet." exception
await _context.SaveChangesAsync(); 
```

...然后检查现有记录，如有必要进行更新，然后进行单独保存...

```
await _context.SaveChangesAsync(); 
```

是的，这很奇怪，但保存两次为我解决了这个问题。

（我很感激这并不能回答这个确切的 StackOverflow 问题，但是对于任何在遇到这个措辞奇怪的异常时偶然发现此页面的人来说，这将是一个救命稻草！）

# .htaccess - 重写规则以更改 url

> ID：12108737
> 
> 赞同：0
> 
> 时间：2012-08-24T11:40:46.200
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我想重写一个 URL，如：

```
http://domainname.com/all-studio-methods

```

到：

```
http://domainname.com/review.php?id=25&cas=all-studio-methods

```

我的`.htaccess`文件目前如下所示：

```
Options +FollowSymlinks
RewriteEngine On
RewriteRule ^([^/\.]*)$ review.php?id=$1&cas=$2 [L] 
```

但它不能正常工作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:08:22.177

如评论中所述，您有以下规则：

```
RewriteRule ^([^/\.]*)$ review.php?id=$1&cas=$2 [L] 
```

`$1`和`$2`是在正则表达式中被匹配分组替换的反向引用，它`^([^/\.]*)$`只有 1 个分组，即整个匹配。`$2`由于您没有其他分组，因此将始终为空白。这也意味着这`$1`将是整个匹配项（例如**all-studio-methods**），您将获得这样的 URI：

```
review.php?id=all-studio-methods&cas= 
```

这显然不是你想要的。评论问从哪里来`id=25`。它不是来自 URI `/all-studio-methods`，. 所以为了重写到`id=25`，它必须在 URI 的某个地方，例如：

```
http://domainname.com/25-all-studio-methods 
```

然后你会有这样的规则：

```
RewriteRule ^([0-9]+)-([^/\.]*)$ review.php?id=$1&cas=$2 [L] 
```

如果您真的不希望`25-`在 URI 中使用 ，则需要重写 php 代码以`review.php`使其不需要 id。它需要在给定`cas`.

或者，您可以创建[一个重写映射](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritemap)以映射`cas`到一个 id。这将是几乎相同的事情，无论哪种情况，您都在编写代码来执行此操作。

# cmake - 从 CTest 脚本访问 CMake 缓存变量

> ID：12108741
> 
> 赞同：4
> 
> 时间：2012-08-24T11:40:53.503
> 
> 标签：cmake, ctest

我的项目链接到带有 valgrind 抑制文件以及 CMake 脚本的第三方库。该脚本将抑制文件的位置存储在 CMake 缓存变量中。

我编写了一个 CTest 脚本，它在我的项目上运行连续测试并提交到仪表板。我想在内存检查阶段使用抑制文件。不幸的是，CTest 脚本似乎对 CMake 缓存一无所知。如何从我的 CTest 脚本访问 CMake 缓存变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T14:41:28.687

您不能从 ctest -S 脚本直接访问 CMake 缓存变量。

但是，您可以：

1.  使用“include”在 ctest -S 脚本中包含第三方 CMake 脚本（在更新步骤之后，因此源代码树是最新的）
2.  在配置步骤之后读取 CMakeCache.txt 文件以提取感兴趣的缓存变量
3.  将代码添加到您的 CMakeLists.txt 文件中，以编写一个仅包含您要查找的信息的迷你脚本

对于 (1)，代码类似于：

```
include(${CTEST_SOURCE_DIRECTORY}/path/to/3rdParty/script.cmake) 
```

如果脚本只执行简单的操作，例如设置您可以引用的变量值，那么这实际上是可能的。如果它执行任何 CMake-configure-time 操作，例如 find_library 或 add_executable，那么您不应该这样做。

对于 (2)：

```
file(STRINGS ${CTEST_BINARY_DIRECTORY}/CMakeCache.txt result
  REGEX "^CURSES_LIBRARY:FILEPATH=(.*)$")
message("result='${result}'")
string(REGEX REPLACE "^CURSES_LIBRARY:FILEPATH=(.*)$" "\\1"
  filename "${result}")
message("filename='${filename}'") 
```

对于 (3)：

在 CMakeLists.txt 文件中：

```
file(WRITE "${CMAKE_BINARY_DIR}/mini-script.cmake" "
  set(supp_file \"${supp_file_location}\")
") 
```

在您的 ctest -S 脚本中，在 ctest_configure 调用之后：

```
include("${CTEST_BINARY_DIRECTORY}/mini-script.cmake")
message("supp_file='${supp_file}'")
# use supp_file as needed in the rest of your script 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:59:54.403

测试应该`CMakeLists.txt`通过命令在你的文件中配置`ADD_TEST()`。然后 CTest 脚本只需调用`ctest_test()`即可运行所有已配置的测试。通过这样做，您可以访问缓存变量，而且您可以`make test`在任何时候运行以运行测试。为每晚测试和/或仪表板提交保存 CTest 脚本。

# android - android上所有音频的包装器

> ID：12108756
> 
> 赞同：0
> 
> 时间：2012-08-24T11:41:48.527
> 
> 标签：android, android-mediaplayer

我想对所有播放的音频应用自定义过滤器，有没有办法将监听器应用于所有系统音频播放（铃声、闹钟、音乐）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:49:41.733

不是来自 Android SDK 应用程序。您可以创建自己的 Android 操作系统自定义构建，其中包含您希望的更改，然后将该构建放入您安装在设备上的 ROM 模块中。

# android - 添加按钮后项目选择不起作用

> ID：12108758
> 
> 赞同：0
> 
> 时间：2012-08-24T11:41:56.053
> 
> 标签：android, listview, button

我正在开发一个使用 a`ListView`作为主界面的 android 应用程序。`List`包含`TextView`和中的每个项目`Button`。当`Button`可见时，项目选择不起作用，而当按钮不可见时，项目选择工作没有问题。如果我将按钮更改为`ImageView`.

当按钮可见时，是否有解决方案可以使项目选择起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:19:01.533

我们不能直接为`List`item 和`Button`. 所以我们必须使用自定义适配器。

试试这个例子：[http ://code.google.com/p/codemobiles/source/browse/CustomListViewDemo/](http://code.google.com/p/codemobiles/source/browse/CustomListViewDemo/)

[单击在 Listitem Listview android 上不起作用](https://stackoverflow.com/questions/11610023/click-is-not-working-on-the-listitem-listview-android)

# facebook - 嵌入电子邮件的 Facepile

> ID：12108763
> 
> 赞同：0
> 
> 时间：2012-08-24T11:42:11.700
> 
> 标签：facebook, email, facepile

有兴趣了解如何将来自 facebook 的数据（例如“facepile”）嵌入到在服务器端生成的电子邮件中。只能在添加到网页时找到 doco。

意识到电子邮件不能使用 javascript 来获取电子邮件中的实时数据，但有兴趣在“facepile”的时间抓取快照并将其添加到电子邮件中。即静态内容

也有兴趣使用 facebook“活动提要”做同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:25:45.950

理论上是的，但是任何电子邮件客户端都不太可能呈现客户端 javascript 或 iframe，这意味着实际上没有必要尝试这样做，因为最好的情况是大多数人会收到一封损坏的电子邮件，并且由于 javascript，rest 将自动阻止或删除电子邮件

# wpf - 刷新后设置 MultiSelectCollectionView 的 CurrentPosition

> ID：12108764
> 
> 赞同：0
> 
> 时间：2012-08-24T11:42:14.247
> 
> 标签：wpf, observablecollection

调用 Refresh 后是否有解决方法来设置 MultiSelectCollectionView 的 CurrentPosition？

我声明如下：

```
MultiSelectCollectionView<customersViewModel> Customers { get; set; } 
```

然后我在批量更新后进行刷新：

```
Customers.Refresh(); 
```

这很好，但我失去了当前的光标位置 - 在调用 Refresh() 之后它回到位置 1。

理想情况下，我想这样称呼：

```
Customers.CurrentPosition = _currentPosition; 
```

刷新后，但它是一个只读属性。

任何帮助，非常感谢。

谢谢，

乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:18:03.830

我不知道 MultiSelectCollectionView 是什么，但假设它实现了 ICollectionView 你有一些方法可用于在视图中导航当前选定的位置。

似乎您可以使用 MoveCurrentToPosition 方法重新选择在刷新之前选择的项目。

```
var _currentPosition = Customers.CurrentPosition;
Customers.Refresh();
Customers.MoveCurrentToPosition(_currentPosition); 
```

# c# - 如何在 Redirecttoaction 中传递 List

> ID：12108770
> 
> 赞同：14
> 
> 时间：2012-08-24T11:42:28.767
> 
> 标签：c#, asp.net-mvc-3, controller, actionresult

我想从 RedirectToAction 方法传递多个参数

我怎么能通过？

我的一个**行动方法**

```
 [HttpPost, ActionName("SelectQuestion")]
    public ActionResult SelectQuestion(string email,List<QuestionClass.Tabelfields> model)
    {

        List<QuestionClass.Tabelfields> fadd = new List<QuestionClass.Tabelfields>();
        for (int i = 0; i < model.Count; i++)
        {
            if (model[i].SelectedCheckbox == true)
            {
                List<QuestionClass.Tabelfields> f = new List<QuestionClass.Tabelfields>();
                fadd.Add(model[i]);
            }
        }

        return RedirectToAction("Question", new { email = email, model = fadd.ToList() });
    } 
```

我的另一种**行动方法**

```
 [HttpGet]
    public ActionResult Question(string email,List<QuestionClass.Tabelfields> model)
    {
    } 
```

我没有得到**model**的值。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-24T12:22:52.337

重定向时，您不能在 url 中传递复杂对象的集合。

一种可能性是使用 TempData：

```
TempData["list"] = fadd.ToList();
return RedirectToAction("Question", new { email = email}); 
```

然后在问题操作中：

```
var model = TempData["list"] as List<QuestionClass.Tablefields>; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-01-31T08:31:55.633

我解决此问题的方法是使用 Newtonsoft.Json nuget 包中的 JsonConvert 方法将列表序列化为 JSON 对象。然后可以将序列化的列表作为参数传递，然后再次反序列化以重新创建原始列表。

因此，在您的 SelectQuestion 方法中，您将使用以下代码：

```
return RedirectToAction("Question", 
    new { 
        email = email, 
        serializedModel = JsonConvert.SerializeObject(fadd.ToList()) 
    }); 
```

在您的 Question 方法中，您将使用此代码来反序列化对象。

```
[HttpGet]
public ActionResult Question(string email, string serializedModel)
{
    // Deserialize your model back to a list again here.
    List<QuestionClass.Tabelfields> model = JsonConvert.DeserializeObject<List<QuestionClass.Tabelfields>>(serializedModel);
} 
```

**重要**的是，这会将模型作为查询字符串参数添加到您的 url，因此只能对非常简单的小对象执行此操作，否则您的 url 会太长。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-05T20:58:46.113

这可能甚至不再活跃了，但我会在这里留下我是如何做到的，以帮助其他人。

我使用简单的重定向而不是 RedirectToAction 解决了这个问题：

```
List<int> myList = myListofItems;
var list = HttpUtility.ParseQueryString("");
myList.ForEach(x => list.Add("parameterList", x.ToString()));
return Redirect("/MyPath?" + list); 
```

然后，在您的其他方法上：

```
public ActionResult Action(List<int> parameterList){} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-24T12:36:11.143

`RedirectToAction`方法 向浏览器返回一个 HTTP 302 响应，这会导致浏览器向指定的操作发出**GET**请求。

您应该将数据保存在`TempData`/之类的临时存储中`Session`。TempData 使用 Session 作为后备存储。

如果你想让它保持真正的无状态，你应该在查询字符串中传递一个 id 并在你的`GET`操作中获取项目列表。真正的无国籍。

```
return RedirectToAction("Question", new { email = email,id=model.ID }); 
```

并在您的 GET 方法中

```
public ActionResult Question(string email,int id)
{

   List<QuestionClass.Tabelfields> fadd=repositary.GetTabelFieldsFromID(id);
    //Do whatever with this
   return View();
} 
```

假设从 Id`repositary.GetTabelFieldsFromID`返回一个 List`TabelFields`

# php - 特定数据未进入 codeigniter

> ID：12108771
> 
> 赞同：0
> 
> 时间：2012-08-24T11:42:33.983
> 
> 标签：php, codeigniter

我正在对codeigniter进行一些练习以从数据库中检索数据，并且我成功地做到了这一点。但是当我想获取特定字段的数据时就会出现问题。要检索我在本地主机上使用以下 URL 的特定值：

```
localhost/codeigniter/index.php/news/view/city-news 
```

其中 news 是控制器，view 是控制器的方法，city-news 是参数。

**这是我的控制器代码**：

```
public function view($slug)
    {

        $data['news'] = $this->news_model->get_news($slug);//here i am getting the slug value.
                if (empty($data['news_item']))
            {
        show_404();
            }

        $data['title'] = $data['news_item']['title'];

        $this->load->view('templates/header', $data);
        $this->load->view('news/view', $data);
        $this->load->view('templates/footer');
    } 
```

这个方法调用了模型news_model的get_news($slug)方法。下面是这个方法的代码：

```
public function get_news($slug = FALSE)
   {

    if ($slug === FALSE)
    {
        $query = $this->db->get('news');
        return $query->result_array();
    }
    echo $slug;//here is i m also getting the slug value.
    $query = $this->db->get_where('news', array('slug' => $slug));//i think this is not working properly
    print_r($query->row_array());die;//now i am getting values here.   
    return $query->row_array();
   } 
```

但我的视图仍然显示“找不到 404 页面”。我的视图代码是：

```
<?php
echo '<h2>'.$news_item['title'].'</h2>';
echo $news_item['text'];
?> 
```

现在请告诉我哪里出错了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T12:31:25.967

您的错误是您正在设置`$data['news']`和测试`$data['news_item']`：

```
$data['news'] = $this->news_model->get_news($slug);//here i am getting the slug value.

if (empty($data['news_item'])) // <=== HERE IS THE ERROR
{
    show_404();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:47:14.100

这是控制器的清理代码：

```
public function view($slug)
{

    $news = $this->news_model->get_news($slug);
            if (empty($news))
        {
    show_404();
        }

    $data['title'] =$news['title'];
    $data['text'] = $news['text'];

    $this->load->view('templates/header', $data);
    $this->load->view('news/view', $data);
    $this->load->view('templates/footer');
} 
```

该方法调用模型news_model的get_news($slug)方法：

```
public function get_news($slug = FALSE)
{

if ($slug === FALSE)
{
    $query = $this->db->get('news');
    return $query->result_array();
}
echo $slug;
$query = $this->db->get_where('news', array('slug' => $slug));
print_r($query->row_array());die;//now i am getting values here.   
return $query->row_array(); 
```

}

```
<?php echo '<h2>'.$title.'</h2>'; echo
$text; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T07:37:23.017

一个小错误：这里

```
if (empty($data['news_item'])) // <=== put "news" here
{
    show_404();
} 
```

并在您看来尝试获取数据

```
echo $news; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T12:13:34.127

您是否尝试过`where`如下简单查询

```
$data = $this->db->where('slug', $slug)->from('news'); 
```

你必须把东西放进去`$data`。意味着至少 mysql 对象。数据库中的行是否可用是另一部分。

其次我担心真假。意味着据我所知`Boolean`，商店`INT(1)`意味着 0 或 1。你也需要检查一下。

你可以调试你的查询

```
$this->db->last_query(); 
```

希望这可以帮助。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-24T11:47:37.137

die() 是一个使用 exit 代替的函数。

在脚本的开头设置它

```
ini_set('display_errors', 1);
error_reporting(E_ALL); 
```

也使用 var_dump($query); 如果在调用查询时没有引发异常或致命错误，则检查它是否返回任何结果

如果数组为空，则表示数据库中没有此 slug 的消息。当没有找到特定新闻时，您应该设置一些条件

还有这个蛞蝓的价值是什么，它是否包含任何特殊字符等？

# unit-testing - 如何在使用 Moq 的测试中引发事件？

> ID：12108772
> 
> 赞同：5
> 
> 时间：2012-08-24T11:42:35.887
> 
> 标签：unit-testing, events, moq

这是父类中代码实现的一部分：

```
handler.FooUpdateDelegate += FooUpdate(OnFooUpdate);
protected abstract void OnFooUpdate(ref IBoo boo, string s); 
```

我在测试方法中模拟了处理程序：

```
Mock<IHandler> mHandler = mockFactory.Create<IHandler>(); 
```

这个...

```
mHandler.Raise(x => x.FooUpdateDelegate += null, boo, s); 
```

...不管用。它说：

> System.ArgumentException：找不到附加或分离方法 Void set_FooUpdateDelegate(FooUpdate) 的事件。

我想提高`OnFooUpdate`它以触发要在子类中测试的代码。

**问题：**如何使用 Moq 提升委托（不是常见的事件处理程序）？

如果我完全错过了这一点，请启发我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T09:47:04.083

看起来您正在尝试提出委托而不是事件。是这样吗？

你的代码是这样的吗？

```
public delegate void FooUpdateDelegate(ref int first, string second);

public class MyClass {
    public FooUpdateDelegate FooUpdateDelegate { get; set; }
}

public class MyWrapperClass {

    public MyWrapperClass(MyClass myclass) {
        myclass.FooUpdateDelegate += HandleFooUpdate;
    }

    public string Output { get; private set; }

    private void HandleFooUpdate(ref int i, string s) {
            Output = s;
    }

} 
```

如果是这样，那么您可以像这样直接调用 myClass FooUpdateDelegate

```
[TestMethod]
public void MockingNonStandardDelegate() {

    var mockMyClass = new Mock<MyClass>();
    var wrapper = new MyWrapperClass(mockMyClass.Object);

    int z = 19;
    mockMyClass.Object.FooUpdateDelegate(ref z, "ABC");

    Assert.AreEqual("ABC", wrapper.Output);

} 
```

编辑：使用界面添加版本

```
public interface IMyClass
{
    FooUpdateDelegate FooUpdateDelegate { get; set; }
}    

public class MyClass : IMyClass {
    public FooUpdateDelegate FooUpdateDelegate { get; set; }
}

public class MyWrapperClass {

    public MyWrapperClass(IMyClass myclass) {
        myclass.FooUpdateDelegate += HandleFooUpdate;
    }

    public string Output { get; private set; }

    private void HandleFooUpdate(ref int i, string s) {
            Output = s;
    }

}

[TestMethod]
public void MockingNonStandardDelegate()
{

   var mockMyClass = new Mock<IMyClass>();
   // Test fails with a Null Reference exception if we do not set up
   //  the delegate property. 
   // Can also use 
   //  mockMyClass.SetupProperty(m => m.FooUpdateDelegate);

   mockMyClass.SetupAllProperties();

   var wrapper = new MyWrapperClass(mockMyClass.Object);

   int z = 19;
   mockMyClass.Object.FooUpdateDelegate(ref z, "ABC");

   Assert.AreEqual("ABC", wrapper.Output);

} 
```

# c# - 从 SQL 检索图像时，VS 2010 中的 gridview 中不显示图像

> ID：12108775
> 
> 赞同：1
> 
> 时间：2012-08-24T11:42:43.130
> 
> 标签：c#, asp.net, sql, visual-studio-2010, gridview

我正在尝试从具有 ID、名称和图像的图像表中提取数据。我认为图像存储为字节，它的图像数据类型。但是，我看不到正在显示的图像，而是一个小的错误图标。输出截图如下。请您帮忙更正并显示图像。我是新手:(

我使用此代码。我想调整它以将二进制解码图像放入名为 Image 的第三个 gridview 列中。我使用了 ImageField。我不使用任何模板，因为我看到项目模板在 VS 2010 编辑器中已过时。

```
 conn.Open();  
  // open the connection 
  SqlDataAdapter Sqa = new SqlDataAdapter("select * from Images", conn);
  DataTable ds = new DataTable();
  Sqa.Fill(ds);   // fill the dataset 
  for (int i = 0; i < ds.Rows.Count; i++)
  {
      MemoryStream ms = new MemoryStream((byte[])ds.Rows[i]["Image"]);
  }
  GridView1.DataSource = ds; // give data to GridView
  GridView1.DataBind();
  conn.Close();
  GridView1.Visible = true; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:49:58.827

这不是您想显示图像的方式。目前，您正在将 gridview 字节数组作为图像列的源。但是gridview不知道这个数组是一个图像。如果您将数据源设置为图像链接数组会更好，并且图像本身将通过单独的请求从数据库中请求。Http 处理程序适合此解决方案。

看看[这篇文章](http://www.codeproject.com/Articles/34084/Generic-Image-Handler-Using-IHttpHandler)。

# html-lists - li 背景图片不显示

> ID：12108776
> 
> 赞同：0
> 
> 时间：2012-08-24T11:42:44.430
> 
> 标签：html-lists, anchor, background-image

我浏览了大量有类似问题的帖子，但我就是无法弄清楚我的问题。请有人帮忙，这让我发疯。

以下代码用于我的站点导航。我希望背景是图像，而不仅仅是背景颜色。我还希望在悬停时更改背景图像。正如我们的猫鼬朋友所说...简单！....但不适合我。

```
<div class="sub-menu" id="sub-menu">
<ul>
<li><a class="on" href="#" title=" You Are Here ">&raquo; Overview</a></li>
<li><a href="graduates-endorsements.html" title=" What Clients Say About The Programme ">Endorsements</a></li>
<li><a href="graduates-programme.html" title=" Programme Focus, Programme Leader and Venues ">The Detail</a></li>
<li><a href="graduates-funding.html" title=" Delegate Sponsored Places and Busaries ">Funding</a></li>
<li><a href="graduates-apply.html" title=" Online application Form ">Apply Online</a></li>
<li><a class="end" href="graduates-terms.html" title=" Terms &amp; Conditions ">Terms</a></li>
</ul>
</div>

div.sub-menu { position: relative; width: 920px; height: 40px; padding: 0; margin: 0;  border-top: solid 1px #FFFFFF; }
#sub-menu ul { list-style: none; padding: 0; margin: 0; }
#sub-menu li { float: left; margin: 0; }
#sub-menu li a { padding: 0 30px; width: 93px; height: 40px; line-height: 36px; text-align: center; float: left; display: block; color: #FFFFFF; text-decoration: none; background-color: #555555; border-right: solid 1px #858585; }
#sub-menu li a:hover { color: #050505; background-color: #f3b607; }
#sub-menu li a.on { background-color: #555555; color: #FBAF5D; cursor: default; }
#sub-menu li a.end { width: 89px; }
#sub-menu li a.end-on { text-align: center; float: left; display: block; color: #FBAF5D; text-decoration: none; border-right: none; }

/* Hide from IE5-Mac \*/
#sub-menu li a{ float: none }
/* End hide */

#sub-menu { font-weight: normal; font-size: 14px; font-family: verdana; } 
```

谢谢你，我真的很感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:55:45.423

在您的问题主题中，您说您希望将背景图像放入“li”标签，但根据您显示的代码，您已为“a”标签提供背景。

您可以将背景图像和颜色一起放在任何标签“li”和“a”中

例如。背景：#00ff00 url('smiley.gif') 不重复固定中心；详情参考： [http ://www.w3schools.com/cssref/css3_pr_background.asp](http://www.w3schools.com/cssref/css3_pr_background.asp)

如果您也想放置悬停效果，请在锚点“a”标签上实现它。因为像 ie6 这样的旧浏览器没有内置对 li 悬停效果的支持。

使用以下模式。

```
a{
   background:   url('img1') no-repeat fixed center; 
}
a:hover{
   background:   url('img2') no-repeat fixed center; 
} 
```

希望它可以帮助你。

# java - 查找组合框弹出窗口的所有者

> ID：12108778
> 
> 赞同：1
> 
> 时间：2012-08-24T11:42:49.920
> 
> 标签：java, swing, awt, jcombobox, jpopup

我有一个向用户显示设置的弹出窗口。如果您在外部单击，它会隐藏，但如果您在内部单击，它仍然可见。

处理此行为的事件处理程序获取`Component`（被单击），并且通过`component.getParent()`递归使用，我可以检查它是否是我的设置面板的子项。到目前为止，这已经奏效。

但是我只是`JComboBox`在该面板中添加了一个，结果发现“可选项目弹出窗口”（它有名称吗？）单击时显示的组合框不是组合框的子项。尝试在组合框中选择某些内容会隐藏我的设置面板。

使用 NetBeans 调试器，我可以看到它的类型`BasicComboPopup$1`（那是一个匿名类吗？），但它不是既不是`ComboPopup`，`JPopupMenu`也不是`BasicComboPopup`。

我需要一种方法来识别单击的“组合框弹出窗口”的所有者/父组合框。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T12:18:23.327

不完全确定，但您可能正在寻找

```
 popup.getInvoker(); 
```

这将返回调用组合框。

下面的实用方法（从 SwingXUtilities 中复制，它是 SwingX 框架附带的）：如果您找到了事件的源组件（不幸的是，方法中的命名是 focusOwner ;-)，它会检查该源是否在父级下方的某个位置，包括弹出窗口.

只是注意到你的父母是一个弹出窗口，所以你必须稍微调整逻辑，切换第一个和第二个 if 块（虽然没有尝试 - 有多个可见弹出窗口是不寻常的。:-)

```
/**
 * Returns whether the component is part of the parent's
 * container hierarchy. If a parent in the chain is of type 
 * JPopupMenu, the parent chain of its invoker is walked.
 * 
 * @param focusOwner
 * @param parent
 * @return true if the component is contained under the parent's 
 *    hierarchy, coping with JPopupMenus.
 */
public static boolean isDescendingFrom(Component focusOwner, Component parent) {
    while (focusOwner !=  null) {
        if (focusOwner instanceof JPopupMenu) {
            focusOwner = ((JPopupMenu) focusOwner).getInvoker();
            if (focusOwner == null) {
                return false;
            }
        }
        if (focusOwner == parent) {
            return true;
        }
        focusOwner = focusOwner.getParent();
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:51:56.210

1.  不确定你是否在谈论

    *   `mouse`事件

    *   `keyboard`事件

    *   `mouse`和`keyboard`事件

2.  看看[SwingUtilities](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html)有用于`child`vs的方法，`parent`反之亦然

3.  发布[SSCCE](http://sscce.org/)，详细描述所需事件，因为有几种方法可以提取和修改`Popup`from`JComboBox`

编辑

如果您使用`AWT Popup`或`Swing lightweight`与`AWT heavyweight`组件混合，那么您必须查看[Darryl 的 Swing Utils](http://tips4java.wordpress.com/2008/11/13/swing-utils/)

# c++ - 在 C++ 中重定向 bash 标准输入和标准输出

> ID：12108783
> 
> 赞同：2
> 
> 时间：2012-08-24T11:42:58.447
> 
> 标签：c++, bash, redirect, stdout, stdin

我需要帮助才能使以下工作。我需要从 c++ 启动一个 bash 进程，这个 bash 进程需要接受来自 stdin 的输入并按照正常输出到 stdout。

从不同的过程中，我需要将命令写入标准输入，然后按照上面的方法在 bash 中实际执行，然后我对标准输出的结果感兴趣。

这是我迄今为止尝试过的，但输出对我来说根本没有意义......

```
 if (pipe(pipeBashShell)) {
            fprintf(stderr, "Pipe error!\n");
            exit(1);
        }

        if ((pipePId = fork()) == -1) {
            fprintf(stderr, "Fork error. Exiting.\n"); /* something went wrong */
            exit(1);
        }

        if (pipePId == 0) { //this is the child process
            dup2(pipeBashShell[0], STDIN_FILENO);
            dup2(pipeBashShell[1], STDOUT_FILENO);
            dup2(pipeBashShell[1], STDERR_FILENO);

            static char* bash[] = {"/bin/bash", "-i", NULL};
            if (execv(*bash, bash) == -1) {
                fprintf(stderr, "execv Error!");
                exit(1);
            }
            exit(0);
        } else {
            char buf[512];
            memset(buf, 0x00, sizeof(buf));
            sprintf(buf, "ls\n");
            int byteswritten = write(pipeBashShell[1], buf, strlen(buf));
            int bytesRead = read(pipeBashShell[0], buf, sizeof(buf));

            write(STDOUT_FILENO, buf, strlen(buf));
            exit(0);
        } 
```

.

上述结果的输出如下：

' (main) bash:: command not found gerhard@gerhard-work-pc:~/workspaces/si/si$ gerhard orkspaces/si/si$ gerhard@gerhard-work-pc:~/workspa ....

我试图发送到 bash 的命令是“ls”，它应该给我一个目录列表

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T11:57:16.890

您已经创建了**一个**管道（有两端），并且您正在尝试将其用于双向通信——从您的主进程到 bash，反之亦然。为此，您需要两个单独的管道。

您连接文件描述符的方式使 bash 与自身对话——它将提示解释为它找不到的命令，然后将错误消息解释为后续命令。

编辑：

正确的设置如下：

1.  准备**两个**管道：

    ```
    int parent2child[2], child2parent[2];
    pipe(parent2child);
    pipe(child2parent); 
    ```

2.  `fork()`

3.  在父进程中：

    ```
    close(parent2child[0]);
    close(child2parent[1]);
    // write to parent2child[1], read from child2parent[0] 
    ```

4.  在子进程中：

    ```
    close(parent2child[1]);
    close(child2parent[0]);
    dup2(parent2child[0], STDIN_FILENO);
    dup2(child2parent[1], STDOUT_FILENO); 
    ```

# javascript - 如何使 JavaScript 中的 Mouseover 函数占用更少的资源？

> ID：12108787
> 
> 赞同：1
> 
> 时间：2012-08-24T11:43:05.983
> 
> 标签：javascript, mouseevent, mouseover, onmouseover, kineticjs

如何使 JavaScript 中的鼠标悬停功能减少资源密集型？我使用了一种方法，其中一个功能激活另一个（鼠标悬停），这个功能激活第一个（鼠标移出）。我使用了 Kinetic.js，但我也希望有另一个库的解决方案。

我想稍后将它与鼠标悬停功能的其他选项一起使用。

我的代码：

```
<head> 
<script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.0.0.js"></script>
<script>
    var scolor = "green"
    var ncolor = "red"

    function changeCircle (circleLayer, nx, ny, nradius, nfill, nstroke, nstrokeWidth) {
        var stage = new Kinetic.Stage("container", 578, 200);
        var context = circleLayer.getContext();
        circleLayer.clear();
        var ncircle = new Kinetic.Circle({
            x: nx ,
            y: ny ,
            radius: nradius ,
            fill: nfill ,
            stroke: nstroke ,
            strokeWidth: nstrokeWidth
        });

        circleLayer.add(ncircle);
        stage.add(circleLayer);

        ncircle.on("mouseout", function(){
            drawCircle (nx, ny, nradius, scolor, nstroke, nstrokeWidth);
        });
    }

    function drawCircle(sx, sy, sradius, sfill, sstroke, sstrokeWidth) {    
        var stage = new Kinetic.Stage("container", 578, 200);
        var circleLayer = new Kinetic.Layer();
        circleLayer.clear();

        //circle
        var scircle = new Kinetic.Circle({
            x: sx ,
            y: sy ,
            radius: sradius ,
            fill: sfill ,
            stroke: sstroke ,
            strokeWidth: sstrokeWidth
        });

        scircle.on("mouseover", function() {
            changeCircle(circleLayer, sx, sy, sradius, "red", sstroke, sstrokeWidth);
        });

        circleLayer.add(scircle);   
        stage.add(circleLayer);
    }

    window.onload = function(){
        drawCircle (200, 100, 50, "green", "black", 3);
    };
</script>
</head>
<body>
    <div id="container">
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:31:10.210

Before mouseover and mouseout, clear div(container) Tag.

```
 <head>
        <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.0.0.js"></script>
        <script>
            var scolor = "green"
            var ncolor = "red"
            function changeCircle(circleLayer, nx, ny, nradius, nfill, nstroke, nstrokeWidth) {
                var stage = new Kinetic.Stage({ container: "container", width: 578, height: 200 });
                var context = circleLayer.getContext();
                circleLayer.clear();
                var ncircle = new Kinetic.Circle({
                    x: nx,
                    y: ny,
                    radius: nradius,
                    fill: nfill,
                    stroke: nstroke,
                    strokeWidth: nstrokeWidth
                });
                circleLayer.add(ncircle);
                stage.add(circleLayer);
                ncircle.on("mouseout", function() {
                    document.getElementById("container").innerHTML = "";
                    drawCircle(nx, ny, nradius, scolor, nstroke, nstrokeWidth);
                });
            }
            function drawCircle(sx, sy, sradius, sfill, sstroke, sstrokeWidth) {
                var stage = new Kinetic.Stage({ container: "container", width: 578, height: 200 });
                var circleLayer = new Kinetic.Layer();
                //circle
                var scircle = new Kinetic.Circle({
                    x: sx,
                    y: sy,
                    radius: sradius,
                    fill: sfill,
                    stroke: sstroke,
                    strokeWidth: sstrokeWidth
                });
                scircle.on("mouseover", function() {
                    document.getElementById("container").innerHTML = "";
                    changeCircle(circleLayer, sx, sy, sradius, "red", sstroke, sstrokeWidth);
                });
                circleLayer.add(scircle);
                stage.add(circleLayer);
            }
            window.onload = function() {
                drawCircle(200, 100, 50, "green", "black", 3);
            };
        </script>
    </head>
    <body>
        <div id="container">
        </div>
    </body> 
```

OR use mouseout event in same function

```
<head>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.0.0.js"></script>
    <script>
        var scolor = "green"
        var ncolor = "red"

        function drawCircle(sx, sy, sradius, sfill, sstroke, sstrokeWidth) {
            var stage = new Kinetic.Stage({ container: "container", width: 578, height: 200 });
            var circleLayer = new Kinetic.Layer();
            //circle
            var scircle = new Kinetic.Circle({
                x: sx,
                y: sy,
                radius: sradius,
                fill: sfill,
                stroke: sstroke,
                strokeWidth: sstrokeWidth
            });
            scircle.on("mouseover", function() {
                scircle.attrs.fill = "red";
                circleLayer.draw();
            });
            scircle.on("mouseout", function() {
                scircle.attrs.fill = "green";
                circleLayer.draw();
            });
            circleLayer.add(scircle);
            stage.add(circleLayer);
        }
        window.onload = function() {
            drawCircle(200, 100, 50, "green", "black", 3);
        };
    </script>
</head>
<body>
    <div id="container">
    </div>
</body> 
```

# html - IE8 不会将图像放在 div 上

> ID：12108792
> 
> 赞同：0
> 
> 时间：2012-08-24T11:43:15.700
> 
> 标签：html, css

我正在开发一个简单的 CSS 和 HTML 网站，正在尝试一些东西。

我想让图像漂浮在 div 上。像这样：

```
 <div id="big_container">
        <img id="img1" src="images/fun.png"/>
        <div id="some_container"></div>
    </div> 
```

这是它的CSS：

```
#big_container{ width: 960px; height: 270px; margin-left: auto; margin-right: auto; margin-top: 42px;}

#some_container{ width: 100%; height: 198px; border: 1px solid #cccccc;}

#img1{ width: 69px; height: 200px; float: left; position: relative; left: 200px;} 
```

这样做的目的不是将div`img`放在`some_container`div 上，而是将其放在第一个位置，然后在图像之后，在其下方放置`some_container`div。

我怎样才能让图像漂浮在 div 上？Firefox 和 Chrome 可以正确显示。IE8 没有。

**编辑**

根据 Kyle Sevenoaks 的说法，我尝试删除`relative`and 。`left`但它仍然显示在 div 上方，并且不重叠。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:51:08.253

您可以使用位置：绝对；使其显示在您需要的 div 上：

```
#img1{ width: 69px; height: 200px; position: absolute; left: 200px;}​ 
```

[http://jsfiddle.net/Kyle_Sevenoaks/dLnm7/](http://jsfiddle.net/Kyle_Sevenoaks/dLnm7/)

**编辑**

我忘了提到你应该添加`position: relative;`到父 div 中。

[http://jsfiddle.net/Kyle_Sevenoaks/dLnm7/1/](http://jsfiddle.net/Kyle_Sevenoaks/dLnm7/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:56:48.430

浮动元素不会将其置于同一父级中其他元素的顶部。您还尝试在相对定位的元素上使用“左”CSS 值。“float”适用于相对定位的元素，“left”适用于绝对和固定定位的元素。

这是您将“img1”定位在“some_container”顶部的CSS（包括边距声明的简写）。注意“位置：相对；” 应用于父“big_container”。

```
#big_container{ width: 960px; height: 270px; margin: 42px auto 0; position:relative;}
#some_container{ width: 100%; height: 198px; border: 1px solid #CCC;}
#img1{ width: 69px; height: 200px; position: absolute; left: 200px; top:0px; } 
```

您现在将看到 IE8 在这里没有错。其他浏览器可能对您很好，并忽略了任何冲突的 CSS 声明，从而为您提供所需的结果。IE8 不那么复杂，可能并没有从字面上补偿和采用您的 CSS。

# java - Java Bytebuffer 完全填满

> ID：12108796
> 
> 赞同：0
> 
> 时间：2012-08-24T11:43:38.410
> 
> 标签：java, arrays, nio, bytebuffer

我目前正在使用 Java ByteBuffer

```
 ByteBuffer batch = ByteBuffer.allocate(tuple_size * batch_size ) ;
    int pos = 0;
    int sent = 0;
    while ( sent++ < batch_size) {
            Event event = (Event) it.next();
            batch.put(event.getData(), pos, tuple_size);
            pos += tuple_size;

        }
    return batch.array(); 
```

目前，batch_size 设置为 2。我的问题是，在第二轮中，我得到一个 IndexOutofBoundsException，鉴于此我无法解释，打印出以下详细信息：

```
 System.out.println(pos + " " +  batch.capacity() +  " " + batch.position() + " " +  batch.remaining()); 
```

我得到：0 200 0 200（第 0 轮）

100 200 100 100（第一轮）

这是人们所期望的。现在，根据文档，绑定检查似乎确实成立：

```
 offset - The offset within the array of the first byte to be read; must be non-negative and no larger than array.length
 length - The number of bytes to be read from the given array; must be non-negative and no larger than array.length - offset 
```

如何完全填满缓冲区？（同时保持底层缓冲区的长度为 tuple_size * batch_size？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:02:14.460

我认为您不需要*pos*变量。该`put`方法试图读取`event.getData()`位置*pos*，而我认为您想`event.getData()`从位置 0 读取。您可以简单地使用`batch.put(event.getData())`将数组的全部内容附加到缓冲区中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:50:58.453

如果 tuple_size 对 event.getData() 足够大，您的问题并不明显。如果不是，那将导致您的 IndexOutofBoundsException。也许它已经关闭了一个？

另一种可能性是您的迭代器`it`仅包含一个元素。

编辑：根据文档，如果您的缓冲区空间不足，您应该得到一个 BufferOverflowException 。从文档中引用：

> 此方法将字节从给定的源数组传输到此缓冲区。如果要从数组复制的字节数多于此缓冲区中的剩余字节数，即如果 length > remaining()，则不传输任何字节并抛出 BufferOverflowException。

这表明您的问题不是您所期望的。

# asp.net-mvc-3 - 如何将实体模型中的数据绑定到 mvc3 中的 DropDown？

> ID：12108798
> 
> 赞同：0
> 
> 时间：2012-08-24T11:43:42.037
> 
> 标签：asp.net-mvc-3, html-select

大家好，我有 EmployeeDetails 表，这是我的 linq 查询，用于从表中获取所需列...现在我想将此数据绑定到 DropDown 我该怎么做

```
 var EmployeeDetails = db.EmployeeDetails.ToList<EmployeeDetail>().Select(e => new
        {
           id=e.EmployeId,
          Name = e.EmployeeName
        }).ToList(); 
```

这是我的控制器

```
 public ActionResult Index()
    {                       
        return View();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:00:12.667

您必须将模型传递给您的视图。只有这样，您才能将任何数据绑定到下拉列表。看看[这篇文章](http://codeclimber.net.nz/archive/2009/08/10/how-to-create-a-dropdownlist-with-asp.net-mvc.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:26:05.673

你真的应该使用 ViewModel ..

所以像这样的东西..

员工详细信息 DTO：

```
public class EmployeeDetails 
{
    public int Id {get;set;}
    public string Name {get;set;}
} 
```

查看模型有点像这样：

```
public class EmployeeViewModel
{
    public EmployeeDetails EmployeeDetails {get;set;}
} 
```

您的操作可能看起来像这样：

```
public ActionResult Index()
{                       
    //Setup a viewmodel
    var viewModel = new EmployeeViewModel();
    viewModel.EmployeeDetails = //your query to get employee details
    return View(viewModel);
} 
```

然后在视图中你可以做一些这样的事情：

```
@model {fullnamespace}.EmployeeViewModel

<select>
    <option> --- Select Option --- </option>
@foreach (var employeeDetail in Model.EmployeeDetails)
{
    <option value="@employeeDetail.Id">@employeeDetail.Name</option>
}
</select> 
```

# java - Java（Linux）和Windows系统之间的字符编码

> ID：12108801
> 
> 赞同：0
> 
> 时间：2012-08-24T11:43:49.237
> 
> 标签：java, sockets, character-encoding

我有一个简单的程序，它向运行服务的远程服务器发出请求，我相信该服务是用 Delphi 编写的，但肯定是在 Windows 上运行的。

我被告知该服务将使用 Windows 的默认编码。

当我得到响应并使用 println 输出它时，我在输出中得到了一些奇怪的符号，这让我认为这是一个字符编码问题。

如何告诉 Java 来自远程系统的输入是 Windows 编码？

我尝试了以下方法：

```
_receive = new BufferedReader(new InputStreamReader(_socket.getInputStream(),"ISO-8859-1"));
_System.out.println(_receive.readLine()); 
```

额外的字符在输出中显示为正方形，正方形中有 4 个数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:52:38.303

除非您知道“默认编码”是什么，否则您无法分辨它是什么。“默认编码”一般是系统全局代码页，在不同系统上可能不同。

你真的应该尝试让人们使用双方都同意的编码；如今，这应该几乎总是 UTF-16 或 UTF-8。

顺便说一句，如果您在 Windows 机器上发送一个字符，并且在 Java 机器上收到多个“奇怪的符号”，那么 Windows 机器很可能已经在发送 UTF-8。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:46:07.750

使用`cp1252`代替`ISO-8859-1`，因为它是 Windows 的默认设置。

# c# - 在 asp.net 中重写 URL 的任何技术

> ID：12108802
> 
> 赞同：-1
> 
> 时间：2012-08-24T11:43:50.603
> 
> 标签：c#, asp.net, url-rewriting

如何删除 .aspx 页面名称和扩展名并在 asp.net 中重写 URL 提供任何建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T11:46:31.893

如果您使用的是 IIS7+，请查看本指南。

[http://www.iis.net/download/urlrewrite](http://www.iis.net/download/urlrewrite)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:46:16.703

使用可以 Intelligencia.UrlRewriter.dll 在 .Net 中进行 urlrewriting。你可以从**[这里下载](http://urlrewriter.net/)**

# iphone - 使用 CGContextScaleCTM 时避免拉伸笔画

> ID：12108804
> 
> 赞同：2
> 
> 时间：2012-08-24T11:43:57.050
> 
> 标签：iphone, ios, cocoa-touch, core-graphics

我有一个正在绘制的形状，`drawRect`它存储在`CGMutablePathRef`( `shapeMutablePath`) 中。每次`drawRect`调用时，形状都会被拉伸以适应屏幕，并在其周围有一个笔触边框。我想知道，如何在不拉伸的情况下绘制笔触边框？即拉伸`shapeMutablePath`，然后在它周围绘制描边边框，以便每次绘制时它的宽度都相同？我尝试更改比例的顺序以及添加和绘制路径无济于事。

```
- (void) drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSaveGState(context);

    CGContextSetRGBFillColor(context, 1.0000, 1.0000, 1.0000, 1.0000);
    CGContextSetRGBStrokeColor(context,0.0000,0.0000,0.0000,1.0000);
    CGContextSetLineWidth(context, DialogueTextViewLineWidth);

    CGContextScaleCTM (context, self.frame.size.width / self.shapeMutablePathWidth, self.frame.size.height / self.shapeMutablePathHeight);
    CGContextAddPath(context, self.shapeMutablePath);
    CGContextDrawPath(context, kCGPathFillStroke);
    CGContextRestoreGState(context);    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:00:38.933

而不是缩放 CTM 并使用原始路径：

```
CGContextScaleCTM (context, self.frame.size.width / self.shapeMutablePathWidth, self.frame.size.height / self.shapeMutablePathHeight);
CGContextAddPath(context, self.shapeMutablePath); 
```

...创建一个转换后的路径并使用它来代替：

```
CGAffineTransform trn = CGAffineTransformMakeScale(self.bounds.size.width / self.shapeMutablePathWidth, self.bounds.size.height / self.shapeMutablePathHeight);
CGPathRef transformedPath = CGPathCreateCopyByTransformingPath(self.shapeMutablePath, &trn);
CGContextAddPath(context, transformedPath);
CGPathRelease(transformedPath); 
```

这将填充和描边相同（缩放）的区域，但变换不会影响描边宽度。

顺便说一句，您通常会使用边界，而不是框架的大小来计算比例。

# javascript - 如何使用 javascript 或 jquery 将整个 html 页面转换为 pdf

> ID：12108806
> 
> 赞同：22
> 
> 时间：2012-08-24T11:43:58.880
> 
> 标签：javascript, jquery

我试图将一个具有动态值的html页面转换为pdf，但我不能。我看到了一些像**jspdf**这样的 api，但这不符合我的需要。任何人都可以推荐适合此目的的 Javascript 或 jQuery 库吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-24T11:51:02.610

这是一个在本地工作的小片段 - 您可以更改为适合您的主机设置：

```
URL url = new File("test.html").toURI().toURL();
WebClient webClient = new WebClient(); 
HtmlPage page = webClient.getPage(url);

OutputStream os = null;
try{
   os = new FileOutputStream("test.pdf");

   ITextRenderer renderer = new ITextRenderer();
   renderer.setDocument(page,url.toString());
   renderer.layout();
   renderer.createPDF(os);
} finally{
   if(os != null) os.close();
} 
```

或者，这里是 jsPDF 的链接：[http ://code.google.com/p/jspdf](http://code.google.com/p/jspdf)

这是一个使用 jsPDF 的有用示例：

```
var doc = new jsPDF();
doc.text(20, 20, 'Hello world!');
doc.text(20, 30, 'This is client-side Javascript, pumping out a PDF.');
doc.addPage();
doc.text(20, 20, 'Do you like that?');

// Output as Data URI
doc.output('datauri'); 
```

更多信息可以在这里找到：[http ://snapshotmedia.co.uk/blog/jspdf](http://snapshotmedia.co.uk/blog/jspdf)

# c# - Visual Studio 2012 错误。找不到 .net 数据提供者

> ID：12108807
> 
> 赞同：2
> 
> 时间：2012-08-24T11:44:01.247
> 
> 标签：c#, asp.net-mvc-3, connection-string, visual-studio-2012, machine.config

我目前正在 MVC3 Visual Studio 2012 中开发一个项目。我正在连接到外部数据库，但是当我尝试添加新控制器时出现此错误。

**无法检索“Project.Models.Class”的元数据。找不到请求的 .Net Framework 数据提供程序。它可能没有安装。**

我无法弄清楚为什么它找不到我的 .Net Framework 数据提供程序。我已经更改了我能找到的两个 machine.config 文件，它们现在看起来像这样：

```
<system.data>
    <DbProviderFactories>
    <add name="Microsoft SQL Server Compact Data Provider 4.0" invariant="System.Data.SqlServerCe.4.0" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=4.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"/>
    <add name="Oracle Data Provider for .NET" invariant="Oracle.DataAccess.Client" description="Oracle Data Provider for .NET" type="Oracle.DataAccess.Client.OracleClientFactory, Oracle.DataAccess, Version=2.112.1.0, Culture=neutral, PublicKeyToken=89b483f429c47342"/>
  <add name="Odbc Data Provider" invariant="System.Data.Odbc" description=".Net Framework Data Provider for Odbc" type="System.Data.Odbc.OdbcFactory, System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
  <add name="OleDb Data Provider" invariant="System.Data.OleDb" description=".Net Framework Data Provider for OleDb" type="System.Data.OleDb.OleDbFactory, System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
  <add name="OracleClient Data Provider" invariant="System.Data.OracleClient" description=".Net Framework Data Provider for Oracle" type="System.Data.OracleClient.OracleClientFactory, System.Data.OracleClient, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
  <add name="SqlClient Data Provider" invariant="System.Data.SqlClient" description=".Net Framework Data Provider for SqlServer" type="System.Data.SqlClient.SqlClientFactory, System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/></DbProviderFactories>
</system.data>

<system.data>
    <DbProviderFactories>
        <add name="Odbc Data Provider" invariant="System.Data.Odbc" description=".Net Framework Data Provider for Odbc" type="System.Data.Odbc.OdbcFactory, System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
        <add name="OleDb Data Provider" invariant="System.Data.OleDb" description=".Net Framework Data Provider for OleDb" type="System.Data.OleDb.OleDbFactory, System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
        <add name="OracleClient Data Provider" invariant="System.Data.OracleClient" description=".Net Framework Data Provider for Oracle" type="System.Data.OracleClient.OracleClientFactory, System.Data.OracleClient, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
        <add name="SqlClient Data Provider" invariant="System.Data.SqlClient" description=".Net Framework Data Provider for SqlServer" type="System.Data.SqlClient.SqlClientFactory, System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
        <add name="SQL Server Compact Edition Data Provider" invariant="System.Data.SqlServerCe" description=".NET Framework Data Provider for Microsoft SQL Server Compact Edition" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=9.0.242.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"/>
        <add name="Microsoft SQL Server Compact Data Provider" invariant="System.Data.SqlServerCe.3.5" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=3.5.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"/>
        <add name="Microsoft SQL Server Compact Data Provider 4.0" invariant="System.Data.SqlServerCe.4.0" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=4.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"/></DbProviderFactories>
</system.data> 
```

我的连接字符串如下所示：

```
<connectionStrings>
<add name="NottherealnameTest" providerName=".NET Framework Data Provider for SQL         Server" connectionString="Data Source=*****************;Initial      Catalog=************;Persist Security Info=True;User   ID=*************;Password=*****************" />
  </connectionStrings>
 </configuration> 
```

我当然出于安全目的审查了一些信息，但这是基本布局。

谁能看到我看不到的错误？或者知道为什么会发生这种情况？任何帮助将不胜感激。

# c++ - 加载和卸载 shell 扩展库

> ID：12108811
> 
> 赞同：2
> 
> 时间：2012-08-24T11:44:22.350
> 
> 标签：c++, windows, visual-c++, shell-extensions

我正在开发一个上下文菜单（shell 扩展），当我尝试重建解决方案时，它说 .dll 库无法打开，因为它正在使用中。如何手动卸载库，以便重建它并在重建后再次加载它？任何命令行命令？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T13:30:03.847

[以下是使用 shell 扩展的一些技巧](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144064%28v=vs.85%29.aspx)。您可以在会话之间手动关闭并重新启动 shell，也可以配置 shell 以更快地卸载扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T14:07:46.510

这是我找到的解决方案：有一个名为[ShellExView](http://www.nirsoft.net/utils/shexview.html)的小型免费程序，我使用它禁用了 shell 扩展，我使用以下命令重新启动资源管理器：*taskkill /f /im explorer.exe*，在 Visual Studio 中重建库，启用扩展在 ShellExView 中并在命令提示符下使用 explorer.exe 再次启动资源管理器。

# php - 服务器中的phonegap文件上传不起作用

> ID：12108815
> 
> 赞同：1
> 
> 时间：2012-08-24T11:45:03.780
> 
> 标签：php, jquery, iphone, xcode, cordova

我正在使用 phonegap 录音。

除了在服务器上上传文件外，所有功能都运行良好。

```
function uploadFile() {
                var ft = new FileTransfer();
                var recordingPath = $('#audiopath').val();
                var name = $('#audioname').val();
                alert('Path is: ' + recordingPath);
                ft.upload(recordingPath,
                          "http://lab1.XXXXXXX.com/XXXXXX/upload.php",
                          function(result) {
                          alert(result);
                          console.log('Upload success: ' + result.responseCode);
                          console.log(result.bytesSent + ' bytes sent');
                          },
                          function(error) {
                          console.log('Error uploading file ' + recordingPath + ': ' + error.code);
                          },
                          { fileName: name });   
            } 
```

我的 php 文件代码是，

```
$new_image_name = time()."audio.wav";

move_uploaded_file($_FILES["recordingPath"]["tmp_name"], "/XXXXX/www/XXX/XXX/filefromphone/".$new_image_name); 
```

以前我将文件完整路径和文件名保存到两个隐藏字段中，并在按钮单击中获取值。

该文件没有上传人。它在咀嚼我一整天。我错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T15:04:29.957

我已经解决了这个问题。

```
var options = new FileUploadOptions();
options.fileKey="file";
options.fileName=$('#audioname').val();
options.mimeType="audio/wav";
options.chunkedMode = false; 
```

我在初始化之前将此代码添加到函数的顶部`new FileTransfer();`

它现在正在工作....希望它也能帮助其他人

# python - 如何将 Google App Engine 与 MS-SQL 结合使用

> ID：12108816
> 
> 赞同：3
> 
> 时间：2012-08-24T11:45:04.293
> 
> 标签：python, sql-server, google-app-engine

我用

*   蟒蛇2.7
*   pyodbc 模块
*   谷歌应用引擎 1.7.1

我可以将 pydobc 与 python 一起使用，但 Google App Engine 无法加载该模块。我得到一个名为 pydobc 的无模块错误。

如何修复此错误或如何将 MS-SQL 数据库与我的本地 Google App Engine 一起使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T11:47:33.217

Google App Engine 不*支持*访问您自己的 SQL 服务器，也不支持加载您自己的 C-API 库。

您*可以*使用使用 MySQL 数据库实现的 Google Cloud SQL 存储，您可以通过他们的[Cloud SQL API for Python](https://developers.google.com/appengine/docs/python/cloud-sql/developers-guide)访问该存储。

请注意，`rdbms`Google 提供的模块实现了[PEP 249 Python 数据库 API 2.0](http://www.python.org/dev/peps/pep-0249/)规范，就像 pyodbc 模块一样，因此使用它应该没有问题：

```
from google.appengine.api import rdbms

conn = rdbms.connect(instance=INSTANCE_NAME, database=DATABASE)
cursor = conn.cursor()
cursor.execute('SELECT * FROM sometable') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T20:56:43.923

至少在理论上，您可以将数据从 MS-SQL 复制到 Google Cloud SQL 数据库。可以在 MS-SQL 数据库中创建触发器，以便每个事务都通过您必须构建的 REST API 反映在您的 App Engine 应用程序上。

# struts2 - Struts 2 - 有没有办法在输入字段中转义 HTML？

> ID：12108820
> 
> 赞同：0
> 
> 时间：2012-08-24T11:45:10.597
> 
> 标签：struts2

当我允许用户使用 输入文本`s:textfield`时，他可以输入类似`<b>Name</b>`或类似的内容`\Me/`。我希望在将它们保存到数据库之前将它们转义。当我们检索它们时，转义是自动完成的，但我希望它在我们保存它时也发生。

我试图`json`从我的操作类返回一个输出，但由于`\a/`存储在我的数据库中的名称，正在形成错误的 json。如果名称在保存到数据库之前已被转义，则可以避免这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:55:22.457

您可以使用[StringEscapeUtils](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringEscapeUtils.html)。您可以调用`escapeJavascript(textfield)`您的操作，然后将其存储到数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T18:43:02.240

@Daud，您解释的问题称为***跨站点脚本***或XSS。而且我认为您应该使用**过滤器**来清理请求参数。这是最复杂的方法。您可以为通过请求发布某些参数的操作调用这些过滤器。

访问***[我的博客](http://jeevanpatil.wordpress.com/2011/07/22/prevention_of_xss/)***，了解如何使用过滤器方法避免 XSS 威胁。

当我们的项目由专门从事安全测试的知名公司进行测试时，我也遇到了这个问题，他们建议使用这种过滤器方法。

你可以试一试。

# ruby-on-rails - 无法在 Rails 中销毁对象

> ID：12108822
> 
> 赞同：0
> 
> 时间：2012-08-24T11:45:24.043
> 
> 标签：ruby-on-rails

我不能在使用 Rails 3.2.6 的对象上使用 destroy 方法 这是我的代码。@checkin 找到一个对象，我检查了。

```
@checkin = Checkin.where("user_id = ? AND event_id = ?", current_user.id, params[:event_id])

    if @checkin.destroy
      render :json => {:results => @checkin}
    else 
      render :json => {:errors => @checkin.errors.full_messages}, status: 422
    end 
```

我得到错误：

```
wrong number of arguments (0 for 1) 
```

**更新**

这是堆栈跟踪：

```
activerecord (3.2.6) lib/active_record/relation.rb:378:in `destroy'
actionpack (3.2.6) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.6) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.6) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.6) lib/active_support/callbacks.rb:414:in `_run__2516945162825430073__process_action__3384959627746267634__callbacks'
activesupport (3.2.6) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.6) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.6) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.6) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.6) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.6) lib/active_support/notifications.rb:123:in `block in instrument' 
```

**更新 2（在控制台中尝试）**

```
@checkin = Checkin.where("user_id = ? AND event_id = ?", 46, 1)
  Checkin Load (0.3ms)  SELECT "checkins".* FROM "checkins" WHERE (user_id = 46 AND event_id = 1)
 => [#<Checkin id: 1, user_id: 46, event_id: 1, created_at: "2012-08-15 14:14:56", updated_at: "2012-08-15 18:18:40">]

ruby-1.9.2-p290 :009 > @checkin.destroy
ArgumentError: wrong number of arguments (0 for 1)
    from /Users/dkrusenstrahle/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.2.6/lib/active_record/relation.rb:378:in `destroy'
    from (irb):9
    from /Users/dkrusenstrahle/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.6/lib/rails/commands/console.rb:47:in `start'
    from /Users/dkrusenstrahle/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.6/lib/rails/commands/console.rb:8:in `start'
    from /Users/dkrusenstrahle/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.6/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T11:56:06.660

嗨`where`总是给你数组和数组没有销毁方法，活动记录对象有销毁方法，销毁这个

```
@checkin = Checkin.where("user_id = ? AND event_id = ?", 46, 1).first
@checkin.destroy if @checkin 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T12:50:11.433

因为`@checkin`是一个集合，你应该使用，

```
@checkin.destroy_all 
```

# javascript - 背景定位下拉菜单问题

> ID：12108831
> 
> 赞同：0
> 
> 时间：2012-08-24T11:46:15.713
> 
> 标签：javascript, jquery, html, css

就目前而言，我已经使用 background-position css 属性创建了一个导航菜单。[点击这里](http://iamnatesmithen.com/bodyworks/header.php)

```
 #nav-menu li a{
    background: url("images/navbar.png") no-repeat scroll 0 0 transparent;
    display: block;
    cursor: pointer;
    height: 102px;
}

#nav-menu .shop a{
    background-position: left top;
    width: 139px;
} 
```

在商店链接上，我创建了一个下拉功能来显示另一个菜单，我遇到的问题是我的财产中的所有标签都在复制背景

# nav-menu li a

有没有办法我可以在我的节目中取消这个特定的背景图像并隐藏菜单以显示另一个背景图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:51:13.683

在#nav-menu li a 中，您应该使用后代运算符，以便只选择直接子代。

例如

```
#nav-menu > li > a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:06:02.913

在你的 css 中替换：

```
#nav-menu li a{
background: url("images/navbar.png") no-repeat scroll 0 0 transparent;
display: block;
cursor: pointer;
height: 102px;
} 
```

和 ：

```
#nav-menu > li > a{
background: url("images/navbar.png") no-repeat scroll 0 0 transparent;
display: block;
cursor: pointer;
height: 102px;
} 
```

[**在此处**](http://meyerweb.com/eric/articles/webrev/200006b.html)了解有关直接死者选择器（“ >”）的更多信息[](http://meyerweb.com/eric/articles/webrev/200006b.html)

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T12:10:22.427

您可以使用第一个孩子；仅将背景设置为第一个元素

```
 #nav-menu li:first-child a{
        background: url("images/navbar.png") no-repeat scroll 0 0 transparent;
    } 
```

或者您可以在另一个元素`<li>`之后的所有元素上将背景强制为其他`<li>`元素

```
 #nav-menu li + li a{
        background-image: none;
    } 
```**

# java - 如何捕获错误“位图太大而无法上传到纹理中”

> ID：12108841
> 
> 赞同：6
> 
> 时间：2012-08-24T11:46:47.883
> 
> 标签：java, android, bitmap

我的 android 应用程序处理非常大的位图。因此，我在图像视图上关闭了硬件加速。但是，一些用户已将开发人员选项“强制 GPU 加速”设置为打开。这会导致错误“位图太大而无法上传到纹理中”。如果我使用 isHardwareAccelerated() 检查视图，它总是返回 false。

有什么方法可以捕获 OpenGL 错误“位图太大而无法上传到纹理中”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:54:26.963

位图由像素组成，您可以计算位图矩阵中的像素数，设置位图像素数的限制。在 OpenGL 中我不能说，但总的来说我们可以轻松处理它们，还有一个方法
bitmap.inSampleSize();

如果你分配

```
Bitmap.inSampleSize()= 1; 
```

然后将加载原始位图像素。

```
Bitmap.inSampleSize()= 2; 
```

那么像素将变为原始像素的一半。

```
Bitmap.inSampleSize() = 4 
```

那么像素将变为原始像素的 1/4。这样你可以减少位图中像素的大小，我在我的程序中做了这件事，希望它也能和你一起工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:40:11.820

我没有在 Android 上使用 OpenGL，因此不知道是否有什么特别的事情必须做才能捕获未捕获的异常或错误。您可以尝试[注册](https://stackoverflow.com/questions/4427515/using-global-exception-handling-on-android)一个全局异常处理程序并检查您是否能够在此处捕获 OpenGL 错误。

# jquery - 如何使用 jQuery 只允许/测试文本字段中的数字？

> ID：12108842
> 
> 赞同：0
> 
> 时间：2012-08-24T11:46:50.830
> 
> 标签：jquery

是否有正则表达式或解决方案来测试输入字段是否具有以下条件（例如）

我想测试用户输入只有**数字**，没有十进制，例如大于 0 且不大于 20。基本上我正在为一些东西编写客户端脚本，比如将 Quantity 添加到购物车中，我想确保（在客户端）他可以输入 1 到 20 之间的任何值，所以不接受 0 ..letters、1.3 等。 ..

是否有插件或正则表达式可以在客户端为我测试？

不确定我是否正确？这是我的尝试

```
 var re = /^\d+$/;
    var str = $(this).val();
    if (re.test(str) && str > 0 && str <= 20){
        status = 'success';         
    } else {
        status = 'error';
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:54:30.330

这将起作用：

```
/^([1-9]|[1][0-9]|[2][0])$/ 
```

它将匹配 1-20。

### 代码示例

```
$(function() {
    "use strict";
    var limit = /^([1-9]|[1][0-9]|[2][0])$/,
        value = "19";

    if(limit.test(value)) {
        // Will in this example go here.
    }
    else {
        // Do something when it fails.
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:55:28.963

在客户端尝试这个正则表达式，

```
^1?[1-9]$|^[1-2]0$ 
```

匹配 1 到 20 之间的整数（含）

# java - WebDriver 使用 java 验证活动元素

> ID：12108846
> 
> 赞同：0
> 
> 时间：2012-08-24T11:47:26.687
> 
> 标签：java, webdriver, selenium-webdriver, testng

在登录 Yahoo 邮件时，光标会自动聚焦在 Yahoo ID 文本字段上。我想验证光标是否聚焦在 Yahoo ID 文本字段上。文本字段的 HTML 如下：

```
<input name="login" id="username" maxlength="96" tabindex="1" value=""> 
```

如何验证 Yahoo ID 文本字段是否已聚焦或处于活动状态？顺便说一句，我正在使用带有 java 的 WebDriver (Selenium 2)，TestNG 作为测试框架

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:55:30.217

我认为，以下代码会起作用。请尝试以下方法：

```
WebDriver driver = new FirefoxDriver();
JavascriptExecutor jse = (JavascriptExecutor)driver;
WebElement actualYahooId = (WebElement)jse.executeScript("return document.getElementById('username');");
WebElement expectedYahooId = (WebElement)jse.executeScript("return document.activeElement;");
assertEquals(actualYahooId, expectedYahooId); 
```

# c# - 循环通过xml

> ID：12108848
> 
> 赞同：-8
> 
> 时间：2012-08-24T11:47:32.837
> 
> 标签：c#, xml

```
 <result>
   <email>
    <Id>1</Id>
    <Subject>hi</Subject>
   </email>
   <email>
    <Id>2</Id>
    <Subject>hi2</Subject>
   </email>
</result> 
```

如何循环通过此 xml 以将 ID、主题保存在对象列表中

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T11:51:00.167

假设您正在打开一个文件，使用 LINQ to XML 可以非常简单地实现它：

```
using System.Xml.Linq;

var doc = XDocument.Load(@"path\to\file.xml");
var result = doc.Element("result");
foreach(var mail in result.Elements("email")) {
    Console.WriteLine("id: {0}\nsubject: {1}",
        (int)mail.Element("Id"),
        (string)mail.Element("Subject"));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:52:32.107

你必须有一个电子邮件类。（您可以在代码示例中更改名称）它应该可以工作。

```
XDocument xdoc = new XDocument();
xdoc = XDocument.Load(fileName);
var songlist = from c in xdoc.Element("Result").Elements("email")
                           select new eMail{ 
                               ID = c.Element("ID").Value, 
                               Subject = c.Element("Subject").Value }; 
```

# wcf - C# 从 wcf Web 服务调用服务器服务

> ID：12108849
> 
> 赞同：0
> 
> 时间：2012-08-24T11:47:36.010
> 
> 标签：wcf

我已经使用 C# 开发了一个 WCF Web 服务，该服务可以使用与我的后端数据对话的 COBOL VM 向我的移动客户端提供我需要的数据。它有效，但非常不可靠。我认为这与 Web 服务的生命周期有关，我只是不明白它是如何崩溃的。我相信问题是COOBL VM，它是一个单例，以及每次关闭它的过程。我已经试过了

```
lock(myobject)
{
... run my code here
} 
```

我想将 COBOL VM 移动到服务器服务，我可以在其中保留我的 COBOL VM 并调用它。我不知道如何在所有 WCF Web 服务调用中保留 COBOL VM。我正在寻找显示 wcf Web 服务与服务器服务通信的示例，这样我就可以将我的业务层代码移出服务，并让它调用服务器服务以获取所需的数据。通过这种方式，我可以让 COBOL VM 一直运行，而不是像在 Web 服务中那样经历加载、执行和关闭过程。

有没有人有任何 WCF Web 服务与 WCF 服务器服务通信的好例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:59:39.173

> 保持 COBOL VM 一直运行，而不是像我在 Web 服务中那样经历加载、执行然后关闭过程。

然后创建一个托管此 VM 客户端的 Windows 服务，因此您只需连接一次并保持其运行。然后，您可以让该服务也托管 WCF 服务，然后查询 VM 客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T01:18:28.333

您可能最好考虑使用 CORBA 解决方案 - CORBA 是唯一可以让您访问已经运行的进程的远程处理技术。

# asp.net-mvc-3 - How to publish MVC3 project on IIS 7

> ID：12108860
> 
> 赞同：1
> 
> 时间：2012-08-24T11:48:08.177
> 
> 标签：asp.net-mvc-3

Hello everyone I want to ask how to publish a MVC3 project on IIS 7

I have done these steps:

```
Installed neccessary dlls

Microsoft.Web.Infastructure
System.Web.Helpers
System.Web.Mvc
System.Web.Razor
System.Web.WebPages
System.Web.WebPages.Deployment
System.Web.WebPages.Razor

Changed Framework 
```

But it still does not publish

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:29:54.203

When you deploy it you can keep your projet in root folder where local disk C: or whatever and please dont forget to which framework you are using and you can change the framework at application pool

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:55:58.993

> Requested URL: /Views/Home/Index.cshtml

Your requested URL is wrong. You cannot directly access Views. You should pass through a controller action, so the correct url that you need to type in your browser is `/home/index`.

You may take a look at some of the tutorials about ASP.NET MVC here: [http://asp.net/mvc](http://asp.net/mvc)

# qt - qradiobutton问题

> ID：12108861
> 
> 赞同：3
> 
> 时间：2012-08-24T11:48:13.337
> 
> 标签：qt, qradiobutton

我的单选按钮有问题。

我创建了一个带有两个单选按钮的GroupBox，并将其独占，因此当检查另一个时，将取消选中。

当我检查一个时，它连接到一个作为函数的插槽，因此它执行操作，更具体地说，更改比例并转换滑块的值。

问题是当我错误地点击了已经检查过的按钮时，因为即使它已经检查过它仍然连接到函数并且滑块的值再次更改，这是我不想要的。

这是他们的代码：

```
//Conect change from MM or PIXEL, making the change in the scale
  connect(ui->radioButton, SIGNAL(pressed())), this, SLOT(mm()));
  connect(ui->radioButton_2, SIGNAL(pressed()), this, SLOT(pixel())); 
```

之前已经检查过，有没有办法阻止它？

我将在这里发布 mm() 和 pixel() 函数：

```
// Function to transform the slider scale from pixel to mm
void planevolume::mm()
{
    // Set the sliders ranges and connections
    // X Slider
      double xvaluem=ui->Slider->value();
      ui->Slider->setRange(xmin, xmax/(256.0/3.0), 1.0/(256.0/3.0));
      ui->Slider->setValue(xvaluem/(256.0/3.0));
      ui->Slider->setScale(xmin, (xmax+1.0)/(256.0/3.0), ((xmax+1.0)/16.0)/(256.0/3.0));
      connect(ui->Slider, SIGNAL(valueChanged(double)), ui->lcdNumber, SLOT(display(double)));

    // Y Slider
      double yvaluem=ui->Slider_2->value();
      ui->Slider_2->setRange(ymin, ymax/(512.0), 1.0/(512.0));
      ui->Slider_2->setValue(yvaluem/(512.0));
      ui->Slider_2->setScale(ymin, (ymax+1.0)/512.0, (((ymax+1.0)/16.0)/512.0));
      connect(ui->Slider_2, SIGNAL(valueChanged(double)), ui->lcdNumber_2, SLOT(display(double)));

    // Z Slider
      double zvaluem=ui->Slider_3->value();
      ui->Slider_3->setRange(zmin, zmax/(64.0/3.0), 1.0/(64.0/3.0));
      ui->Slider_3->setValue(zvaluem/(64.0/3.0));
      ui->Slider_3->setScale(zmin, (zmax+1.0)/(64.0/3.0),(((zmax+1.0)/16.0)/(64.0/3.0)));
      connect(ui->Slider_3, SIGNAL(valueChanged(double)), ui->lcdNumber_3, SLOT(display(double)));
}

// Function to transform the slider scale from mm to pixel
void planevolume::pixel()
{
    // Set the sliders ranges and connections
    // X Slider
      double xvaluep=ui->Slider->value();
      ui->Slider->setRange(xmin, xmax, 1.0);
      ui->Slider->setValue(xvaluep*(256.0/3.0));
      ui->Slider->setScale(xmin, xmax+1.0, (xmax+1.0)/16.0);
      connect(ui->Slider, SIGNAL(valueChanged(double)), ui->lcdNumber, SLOT(display(double)));

    // Y Slider
      double yvaluep=ui->Slider_2->value();
      ui->Slider_2->setRange(ymin, ymax, 1.0);
      ui->Slider_2->setValue(yvaluep*(512.0));
      ui->Slider_2->setScale(ymin, ymax+1.0, (ymax+1.0)/16.0);
      connect(ui->Slider_2, SIGNAL(valueChanged(double)), ui->lcdNumber_2, SLOT(display(double)));

    // Z Slider
      double zvaluep=ui->Slider_3->value();
      ui->Slider_3->setRange(zmin, zmax, 1.0);
      ui->Slider_3->setValue(zvaluep*(64.0/3.0));
      ui->Slider_3->setScale(zmin, zmax+1.0, (zmax+1.0)/16.0);
      connect(ui->Slider_3, SIGNAL(valueChanged(double)), ui->lcdNumber_3, SLOT(display(double)));
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T15:18:10.177

`pressed()`您可以尝试使用信号，而不是使用`toggled(bool)`信号。仅当按钮更改状态时才会发出此信号。看看：[http ://doc.qt.io/qt-4.8/qabstractbutton.html#toggled](http://doc.qt.io/qt-4.8/qabstractbutton.html#toggled)

编辑：如果两个按钮都连接到`toggled(bool)`，则选中一个将取消选中另一个并触发信号。但请注意，该信号有一个`bool`给出按钮的新状态的信号。您的插槽也必须具有此`bool`参数，即，在您的情况下，您需要将插槽重写为`void planevolume::mm(bool on)`and `void planevolume::pixel(bool on)`。

完成此操作后，您可以简单地检查参数的值。如果是`false`，则表示该按钮已被选中，而现在刚刚被取消选中。然后，两个函数的第一行可以很简单

```
if (!on) return; 
```

意思是，如果单选按钮刚刚被取消选中，不要做任何事情，走开。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T11:51:18.530

我认为最好的选择是存储一个与选择哪个选项框相关的 int 值。每次单击选项框时，使用变量检查它是否已被选中，然后再决定。

问候，

# android - 无法访问 HTC ONE V 上的存储卡

> ID：12108866
> 
> 赞同：0
> 
> 时间：2012-08-24T11:48:37.163
> 
> 标签：android, android-videoview, android-video-player

我正在 Android 中开发和测试一个简单的视频播放器示例。代码如下：

```
VideoView vid = (VideoView) findViewById(R.id.videoView1);

vid.setVideoPath("/sdcard/myvideo.mp4");
vid.setMediaController(new MediaController(this));
vid.start();
vid.requestFocus(); 
```

我正在使用 HTC ONE V。当我在手机上运行此程序时，我`NullPointerException`在设置视频路径的线路上得到了一条（即`setVideoPath("/sdcard/myvideo.mp4")`）。我认为访问存储卡有问题。

那么谁能告诉我这是在 HTC ONE V 上访问存储卡与其他手机不同的方式？如果是，那么如何访问存储卡 HTC ONE V。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T11:56:17.753

如果您在线上收到 NullpointerException

```
vid.setVideoPath("/sdcard/myvideo.mp4"); 
```

那么这表明 vid 为空。

因此，请确保`setContentView`在`Oncreate`调用 findviewbyid 之前完成并确保 R.id.videoView1 存在于您设置的布局中。

正如其他人指出的那样，不要硬编码 sdcard 路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T11:52:08.317

你应该使用

```
vid.setVideoPath(Environment.getExternalStorageDirectory().toString()+filename); 
```

代替

```
vid.setVideoPath("/sdcard/myvideo.mp4"); 
```

# iphone - 在 iPhone 上强制关闭应用程序时如何处理现有数据？

> ID：12108867
> 
> 赞同：1
> 
> 时间：2012-08-24T11:48:37.167
> 
> 标签：iphone, file-io, ios5

我已将一些值加载到我的应用程序的本地文档中。当应用程序运行时，应用程序会写入 50 条记录。

现在，当用户强制关闭应用程序并再次启动时：*文件只写入新记录 50+现有 50。*

如何处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:20:47.143

如果您的应用程序被完全强制退出，则您没有机会写出额外的数据。不再运行您的代码。

如果您正在谈论当您的应用程序在后台并且操作系统想要释放内存时发生的强制退出，您必须在您的应用程序委托中实现回调（您也可以使用通知，但让我们保持简单）并观察何时操作系统将您的应用程序置于后台。此时，将数据写入磁盘：

```
@implementaton MyAppDelegate
- (void)applicationDidEnterBackground: (UIApplication *)application {
    [myDatabase commit];
    [myFiles save];
    [myWhatever doWhatever];
    // etc.
}
@end 
```

# java - 线程被锁定在“www.protocol.http.HttpURLConnection”

> ID：12108870
> 
> 赞同：2
> 
> 时间：2012-08-24T11:48:52.093
> 
> 标签：java, threadpool, httpurlconnection, heap-dump, thread-dump

我的线程在调用时被锁定

```
new URL(url).openConnection(); 
```

线程转储的一部分是：

```
sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1195)
    - locked <0x00000007056a2498> (a sun.net.www.protocol.http.HttpURLConnection)
    at java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:379) 
```

似乎被锁定在

```
"JakartaHttpHandler-http-timeout-pool-12-thread-1" daemon prio=10 tid=0x0000000046bb6800 nid=0x162 waiting on condition [0x00000000431b7000]
   java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x00000007521c68b8> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject) 
```

最后堆细节说，

```
compacting perm gen  total 41408K, used 41295K [0x00000007fae00000, 0x00000007fd670000, 0x0000000800000000)
   the space 41408K,  99% used [0x00000007fae00000, 0x00000007fd653e58, 0x00000007fd654000, 0x00000007fd670000) 
```

线程不会在不抛出任何异常的情况下继续进行。

首先，我打算改变`-XX:MaxPermSize`. 还有什么我可以做的吗？

我敢肯定，人们一定遇到过这个例外。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:13:26.603

是否有可能您实际上被困在更下方的“connect()”调用中？

您正在寻找的代码可能更接近：

```
 HttpURLConnection connection = new URL(url).openConnection();
    connection.setConnectTimeout(10000);
    connection.setReadTimeout(10000);
    connection.connect(); 
```

这将创建连接对象，将其设置为 10 秒的连接超时（尝试与远程主机建立连接）和 10 秒的读取超时（等待响应所花费的时间）。如果您的网络速度非常慢，可以想象第一个可能需要更高。如果您的服务由于对某些资源的长时间操作而需要一段时间来响应，则可能需要增加第二个。在任何情况下，默认值都是无穷大，这对于任何生产系统都可能不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:53:43.687

在堆栈跟踪中往上走一点。您的应用程序可能正在打开与外部网站的连接，例如 SpringFramework.org，可能是为了获取 XSD。

查看这些网站是什么，并检查是否可以从使用 wget 部署应用程序的机器访问它们。

# scala - Scala Lift - 连接到远程 MongoDB

> ID：12108871
> 
> 赞同：2
> 
> 时间：2012-08-24T11:48:57.960
> 
> 标签：scala, mongodb, lift, mongohq

我目前在我的本地机器上运行我的应用程序，在 Boot.scala 我有：

```
MongoDB.defineDb(

    DefaultMongoIdentifier, 
    MongoAddress(MongoHost("127.0.0.1", 27017), "platform")

) 
```

我已成功将应用程序部署到云提供商，并且正在设置数据库@mongohq.com

我需要更改哪些内容才能使应用程序能够连接？我看过这里：

[https://www.assembla.com/wiki/show/liftweb/Mongo_Configuration](https://www.assembla.com/wiki/show/liftweb/Mongo_Configuration)

但是我对 mongohq 提供的连接细节有点困惑，他们提供的只是：

```
Mongo URI 
mongodb://<user>:<password>@<host>:<port>/<my_account_name> 
```

在此先感谢您的帮助，非常感谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:17:22.370

我特别不熟悉 MongoHQ，但你应该可以在 Boot 中这样放置一些东西：

```
MongoDB.defineDbAuth(

    DefaultMongoIdentifier, 
    new Mongo(new ServerAddress("<host>", <port>)), 
    <my_account_name>, 
    <user>, 
    <pass>

) 
```

<*> 变量是在您注册 MongoHQ 时提供给您的连接 URI 的特定部分。

# .net - 如何修复 Visual Studio 2012（Web 开发）中的新项目空列表？

> ID：12108873
> 
> 赞同：1
> 
> 时间：2012-08-24T11:48:58.850
> 
> 标签：.net, visual-studio-2012

我在 Visual Studio 2012 中的“新建项目”窗口不显示任何项目模板。我怎样才能解决这个问题？

我已经尝试过：

1.  维修安装
2.  重新安装VS2012
3.  devenv.exe /installvstemplates
4.  工具>>导入和导出设置>>重置所有设置

...不成功...

其他人还有相同的疑问么？

# objective-c - 如何在 UITableView 中直接编辑一行，而不进入编辑模式

> ID：12108874
> 
> 赞同：0
> 
> 时间：2012-08-24T11:49:03.467
> 
> 标签：objective-c, ios

在 a`UITableView`中，我希望能够在`cell.textLabel.text`触摸该行时编辑该行的属性。

换句话说，我希望能够直接编辑该行，而不是进入编辑模式。

我该如何实施？

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"Cell";

    CMTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[CMTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    int tagsCount = [[currentComic Tags] count];

    [[cell textField] setTag:[indexPath row]];
    [[cell textField] setText:[tagsDisplayName objectAtIndex:[indexPath row]]];

    return cell;
} 
```

这是 CMTableViewCell 的子类：

```
...

-(void)viewDidLoad
{    
    textField = [[UITextField alloc] init];
    [textField setFrame:CGRectMake(5,5,50,400)];
    [self addSubview:textField];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:10:32.060

添加`UITextField`无边框作为子视图。在将其添加到子视图之前 - 将 Tag nubmer 设置为`UITextField`from `indexPath.row`at`tableview cellForRowAtIndexPath`方法。当用户输入数据时 -`UITextFieldDelegate`按下“返回”按钮时使用方法保存它。不幸的是，我不能给你代码，因为现在我在 Windows 上。回家，这将有所帮助

**更新**：更改数据源中的数据所需的标记号。当您按下 UITextField 中的“返回”按钮时，您可以通过从 UITextField 获取此标记号获取 UITableViewCell 来保存更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:52:40.127

这很简单：

```
- (void)tableView:(UITableView *)tableView
                             didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    cell.textLabel.text = @"...";
} 
```

**更新**

```
- (void)tableView:(UITableView *)tableView
                             didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    UITextField *textField = [[UITextField alloc] init];
    [textField setTag:[indexPath row]];
    [tagsTableView addSubview:textField];
    FreeAndNil(textField);
} 
```

# .net - 如何在多平台（Windows 和 Web）中一起使用泛型类

> ID：12108882
> 
> 赞同：1
> 
> 时间：2012-08-24T11:49:32.367
> 
> 标签：.net, vb.net, class, generics, reference

我在.Net 中有一个类项目这个项目是通用的。这个项目得到treeNode 控件（Web 和windows（通用））和返回（Web 或Windows）TreeNode。在 Windows 项目中，我引用了这个通用项目并有一个错误

警告 1 引用的程序集“.......dll”无法解析，因为它依赖于“System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a”目标框架“.NETFramework,Version=v4.0,Profile=Client”。请删除对不在目标框架中的程序集的引用，或考虑重新定位您的项目。

如何解决这个问题并在 windows 和 web 项目中使用这个泛型类项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:08:05.797

“.NETFramework,Version=v4.0,Profile=Client”表示“客户端配置文件”，这意味着您的应用只能使用 .net 的一个子集。System.Web.* 程序集不属于该子集。编译器抱怨是因为您引用了一个*不属于客户端配置文件*的程序集，并且*您的项目未引用*该程序集，因此它无法解析程序集位置。您必须包含对所引用程序集的引用，并将属性“复制本地”更改为“true”（单击程序集引用，然后按 F4）。这将导致程序集被复制到当前项目的“/bin”文件夹中。您还必须将此程序集与您的项目一起部署，因为它在客户端计算机上不可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:51:07.890

添加对`System.Web.dll`项目的引用。如果您的项目将在具有“.NET 客户端配置文件”的计算机上运行，​​那么您只需要确保 System.Web.dll 的副本与您的应用程序捆绑在一起。

# com - RunningObjectTable 和弱注册

> ID：12108885
> 
> 赞同：0
> 
> 时间：2012-08-24T11:49:46.893
> 
> 标签：com, marshalling

我正在尝试实现以下功能，我觉得我真的很接近但还不是很接近。我发布这个问题是为了看看是否有人可能已经做过类似的事情，对如何最好地实现这一点有一些见解。

在一个应用程序（称为 MainApp）中，我正在创建需要从另一个应用程序（称为工具）访问的 COM 对象。为此，我需要将 MainApp 中的对象注册到 ROT。由于此问题范围之外的原因，我正在使用作为服务运行的自定义 IRunningObjectTable 实现；此外，COM 对象需要在创建时将自己注册到 ROT 中，并在不再需要时自行取消注册。这意味着 ROT 必须只持有对 COM 对象的弱引用，并且不能延长它们的生命周期。

此外，当 COM 对象仍然存在时，ROT 可能会被关闭。这不得导致 MainApp 中的泄漏或崩溃。

该工具将询问 ROT 并获取已注册对象的接口。它将从对象中提取信息并在执行此操作时使它们保持活动状态，但在处理完它们后立即释放它们。

我面临的主要问题与实现弱表注册以及让 COM 对象注册和撤销自己而不是由其创建者注册或撤销有关。

感谢您的任何提示。

# visual-studio-2012 - 如何在 VS2012 RC 中执行有序的测试列表？

> ID：12108887
> 
> 赞同：0
> 
> 时间：2012-08-24T11:49:46.330
> 
> 标签：visual-studio-2012, mstest

在 VS2012 RC 中，我注意到没有测试列表编辑器、测试视图和测试列表。

我有一个有序的测试列表 - 我如何在 VS2012 中运行它？

通常，我会去测试视图，选择有序的测试列表，然后运行它。

但是没有测试视图，我该怎么办？

在新的测试资源管理器窗口中，所有测试都显示在“未运行”部分。当我尝试运行与有序测试列表关联的测试时，我收到此错误：

> 调用执行程序“executor://orderedtestadapter/v1”时发生异常：找不到存储“..\bin\debug\codeduisanity.dll”的测试“PhaseOneAdminLogonTest”。

有没有办法解决？

我希望能够开始使用 VS2012 自动化我的测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:02:55.740

看起来当项目从 VS2010 升级时，有序的测试列表也没有升级。我创建了一个新的有序测试列表，并添加了相同的项目，然后测试工作。

# android - 为微调项设置 onClickListener？

> ID：12108893
> 
> 赞同：35
> 
> 时间：2012-08-24T11:50:15.447
> 
> 标签：android, spinner, listener

我有从数据库填充的微调器：

```
catSpinner = (Spinner) findViewById(R.id.spinner1);
cursor = dataAdapter.getAllCategory();
startManagingCursor(cursor);
String[] from = new String[] { DataAdapter.CATEGORY_COL_NAME };
int[] to = new int[] { android.R.id.text1 };
SimpleCursorAdapter catAdapter = new SimpleCursorAdapter(this,  
           android.R.layout.simple_spinner_dropdown_item, cursor, from,to, 0);
catAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
catAdapter.notifyDataSetChanged();
catSpinner.setAdapter(catAdapter); 
```

`AlertDialog`当我选择最后一项（`Add new category...`）时，我想打电话。
添加新类别后，我希望“item( `Add new category...`)”再次成为最后一个类别。
我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-08-24T11:55:06.647

你**不应该**打电话`OnItemClickListener`给微调器。Spinner 不支持项目点击事件。调用此方法将引发异常。检查[这个](http://developer.android.com/reference/android/widget/Spinner.html#setOnItemClickListener%28android.widget.AdapterView.OnItemClickListener%29)。

你可以申请`OnItemSelectedListener`代替。

**编辑 ：**

```
spinner.setOnItemSelectedListener(new OnItemSelectedListener() 
{
    public void onItemSelected(AdapterView<?> parent, View view, int position, long id) 
    {
        String selectedItem = parent.getItemAtPosition(position).toString();
        if(selectedItem.equals("Add new category"))
        {
                // do your stuff
        }
    } // to close the onItemSelected
    public void onNothingSelected(AdapterView<?> parent) 
    {

    }           
}); 
```

就在列表末尾添加“添加新类别”而言，我认为您最好使用自定义适配器，在添加所有项目后，您可以将该常量（“添加新类别”）添加到末尾数组，使其始终排在最后。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-24T11:55:37.813

挂钩到 Spinner 的 OnItemClickListener。然后检查所选项目是否为“添加新类别”。

如果是，则显示对话框以添加新项目。

在添加新项目时，

1.  删除最后一项“添加新类别”。
2.  添加输入的新类别。
3.  然后再次添加项目“添加新类别”。

这将使“添加新类别”项成为最后一项。

代码示例：

布局 main.xml ：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:weightSum="10" >

<Spinner
    android:id="@+id/cmbNames"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

布局 spinner_item.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/tvName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

活动课：

```
public class MainActivity extends Activity {

private static final String NAME = "name";
private static final String ADD_NEW_ITEM = "Add New Item";

private SimpleAdapter adapter;
private Spinner cmbNames;
private List<HashMap<String, String>> lstNames;
private int counter;

private OnItemSelectedListener itemSelectedListener = new OnItemSelectedListener() {

    @Override
    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {
        HashMap<String, String> map = lstNames.get(arg2);
        String name = map.get(NAME);
        if (name.equalsIgnoreCase(ADD_NEW_ITEM)) {
            lstNames.remove(map);
            counter++;
            addNewName(String.valueOf(counter));
            addNewName(ADD_NEW_ITEM);
            adapter.notifyDataSetChanged();
        }
    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }
};

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    populateList();

    cmbNames = (Spinner) findViewById(R.id.cmbNames);
    adapter = new SimpleAdapter(this, lstNames, R.layout.spinner_item,
            new String[] { NAME }, new int[] { R.id.tvName });
    cmbNames.setAdapter(adapter);
    cmbNames.setOnItemSelectedListener(itemSelectedListener);
}

private void populateList() {
    lstNames = new ArrayList<HashMap<String, String>>();

    addNewName("abc");
    addNewName("pqr");
    addNewName("xyz");
    addNewName(ADD_NEW_ITEM);
}

private void addNewName(String name) {
    HashMap<String, String> map = new HashMap<String, String>();
    map.put(NAME, name);
    lstNames.add(map);
}

} 
```

# jquery - 是否可以将鼠标光标放在元素后面或者鼠标光标是否有 z-index？

> ID：12108897
> 
> 赞同：3
> 
> 时间：2012-08-24T11:50:38.083
> 
> 标签：jquery, css, mouse, z-index, mousemove

当鼠标悬停在某个元素上时，我想用自定义图像替换鼠标光标。我通过首先关闭鼠标光标来做到这一点

```
cursor: none; 
```

当它悬停在元素上时。

然后我读出了悬停元素上的光标位置，并将图形的css位置设置为稍微偏移的光标位置，这样鼠标光标就不会在图形上方，而是仍然在悬停区域上方。

我在这里做了一个小提琴：http: [//jsfiddle.net/TimG/6XeWK/](http://jsfiddle.net/TimG/6XeWK/)

现在它可以安静地工作了。问题只是当您快速移动鼠标时，鼠标光标离开悬停区域并“滑过”图像当然无法确定鼠标相对于悬停区域的位置（快速移动到左下角在黑色悬停区域）。我可以通过将图形设置为

```
display: none; 
```

在图像的 css 位置更改之前和更改之后将其设置为

```
display: block; 
```

再次。不幸的是，它并不能完全防止这个问题。

那么：有什么方法可以防止这种情况发生吗？或者有没有办法将鼠标光标放在手后面？有点像为鼠标光标设置 z-index （我的猜测是，这是不可能的，因为它不是 DOM 元素）？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T12:07:22.350

### 问题

> 有没有办法将鼠标光标放在手后面？

快速移动鼠标时看到鼠标指针的原因是您偶尔会将光标**悬停**在指针上，因此`.hoverbox:hover`不会应用样式。

在您的`mousemove`事件绑定中，将 css 样式`cursor: none` **也**添加到指针，即使不小心移动到手上，您也不应该再看到鼠标指针。将 应用于`cursor: none`in `.pointer:hover`CSS 也不起作用。

```
$(".hoverBox").mousemove(function(e) {
    var tWidth = $(window).width();
    var position = $(this).position();
    var fingerPosition = position.top + e.clientY + 15;
    var fingerWidth = $(this).parent().find('.pointer').width();

    $('.pointer').css('display', 'none').css('top', fingerPosition).css('left', e.clientX - fingerWidth - 15).css('display', 'block').css('cursor', 'none');
}); 
```

### [演示](http://jsfiddle.net/6XeWK/5/)- 在指针上方隐藏光标

**编辑**
我无法`cursor: url()`在提琴手中工作，但我猜这主要是因为提琴手呈现输出槽`fiddle.jshell.net`并且图像可能必须在服务器本地。

但是，如果您只想使用指针，您也可以随时使用`cursor: pointer style`。

CSS：

```
.hoverBox {
    width: 400px;
    height: 300px;
    background: black;
    cursor: pointer;
} 
```

### [演示](http://jsfiddle.net/6XeWK/7/)- 使用默认指针光标

# powershell - 在 Powershell 中的环境选项卡用户 adsi 中为 TSclients 添加登录程序

> ID：12108898
> 
> 赞同：1
> 
> 时间：2012-08-24T11:50:40.580
> 
> 标签：powershell, adsi, terminal-services, iadstsuserex

嗨，我正在尝试为将使用 powershell 脚本创建的远程客户端设置登录程序参数。如下所示

![在此处输入图像描述](../Images/77e0f3d8265aa6ea6a699fbc4ab90027.png)

我设法使用登录脚本在配置文件选项卡中设置

```
$objUser.PSBase.InvokeSet('LoginScript', "logoff.cmd") 
```

作为这个线程中的种子[here](https://stackoverflow.com/questions/2778973/assign-logon-scripts-to-local-users)

问题是我在 ADSIedit 中找不到属性，我使用和工作的一些属性也没有在 ADSIedit 中显示，例如 PasswordExpired

这使我相信该属性确实存在。下面是我的代码

```
$objComputer = [ADSI]"WinNT://127.0.0.1"
$objUser = $objComputer.Create('user', $username)
$objUser.SetPassword($password)
$objUser.PSBase.InvokeSet('Description', "user " + $userName)
$objUser.PSBase.InvokeSet('userflags', 512)
$objUser.PSBase.InvokeSet('passwordExpired', 1)
$objUser.SetInfo(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:43:42.747

[在IADsTSUserEx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380823%28v=vs.85%29.aspx)库中找到答案花了很长时间才弄清楚

这是下面的代码

```
# adds user
$objComputer = [ADSI]"WinNT://127.0.0.1"
$objUser = $objComputer.Create('user', $username)
$objUser.SetPassword($password)
$objUser.PSBase.InvokeSet('Description', "user " + $userName)
$objUser.PSBase.InvokeSet('userflags', 512)
$objUser.SetInfo();
# set password not to expire
wmic USERACCOUNT WHERE "Name = '$username'" SET Passwordexpires=FALSE
#set logoff script
$ou = [adsi]"WinNT://127.0.0.1"
$user = $ou.psbase.get_children().find("test")
$user.PSBase.InvokeSet("TerminalServicesInitialProgram", "C:\logoff.bat")
$user.setinfo() 
```

# c++ - c++系统命令

> ID：12108904
> 
> 赞同：1
> 
> 时间：2012-08-24T11:51:03.963
> 
> 标签：c++, system-calls

我已经编写了一个示例 C++ 程序...这里我使用系统命令调用带有参数的 Python 程序...

```
system("python /home/rpms/a3/dsp/noise_rem_python.py /home/rpms/a3/dsp/files/p1f%d.txt",tid);

/home/rpms/a3/dsp/noise_rem_python.py is a program name 
```

`/home/rpms/a3/dsp/files/p1f%d.txt`是这个程序的一个参数。

但我收到错误消息：

> “/usr/include/stdlib.h：在函数‘void* writefile(void*)’中：/usr/include/stdlib.h:712：错误：函数‘int system(const char*)’写入文件的参数太多.cpp:29：错误：此时在文件中”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:36:19.853

你也可以这样做：

```
char command[200];    // 200 is just an example value that can hold the whole string
sprintf(command, "python /home/rpms/a3/dsp/noise_rem_python.py /home/rpms/a3/dsp/files/p1f%d.txt", tid);
system(command); 
```

如果您想以相同的风格进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:55:27.790

说这个：

```
#include <string>

system(("python /home/rpms/a3/dsp/noise_rem_python.py /home/rpms/a3/dsp/files/p1f" + std::to_string(tid) + ".txt").c_str()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T11:54:55.710

查看您传递给函数的参数的结尾

... ,tid);

如果您尝试格式化字符串？在将其用作论据之前先这样做。

# python - 如何避免在 sqlalchemy 中缓存？

> ID：12108913
> 
> 赞同：11
> 
> 时间：2012-08-24T11:51:33.723
> 
> 标签：python, sqlalchemy

我对 SQL Alchemy 有疑问 - 我的应用程序作为一个持续工作的 Python 应用程序工作。

我有这样的功能：

```
def myFunction(self, param1):
   s = select([statsModel.c.STA_ID, statsModel.c.STA_DATE)])\
                        .select_from(statsModel)

   statsResult = self.connection.execute(s).fetchall()

   return {'result': statsResult, 'calculation': param1} 
```

我认为这是一个明显的例子——一个结果集是从数据库中获取的，第二个只是作为参数传递。

问题是，当我更改数据库中的数据时，此函数仍然返回数据，就像没有更改一样。当我更改输入参数中的数据时，返回的参数“计算”具有适当的值。

当我重新启动应用服务器时，情况恢复正常 - 从 MySQL 获取新数据。

我知道关于 SQLAlchemy 缓存有几个问题，例如：

[如何在 Sqlalchemy orm 会话中正确禁用缓存？](https://stackoverflow.com/questions/4285474/how-to-disable-caching-correctly-in-sqlalchemy-orm-session)

[如何禁用 SQLAlchemy 缓存？](https://stackoverflow.com/questions/10210080/how-to-disable-sqlalchemy-caching)

但是我还能怎么称呼这种情况呢？似乎 SQLAlchemy 保留了之前获取的数据，并且在应用程序重新启动之前不会执行新查询。我怎样才能避免这种行为？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-24T20:23:09.643

调用`session.expire_all()`将从会话中逐出所有数据库加载的数据。随后对对象属性的任何访问都会发出一条新`SELECT`语句并取回新数据。请参阅[http://docs.sqlalchemy.org/en/latest/orm/session_state_management.html#refreshing-expiring](http://docs.sqlalchemy.org/en/latest/orm/session_state_management.html#refreshing-expiring)了解背景信息。

如果您在调用后仍然看到所谓的*“缓存” ，那么您需要按照我上面链接的*[答案](https://stackoverflow.com/questions/10210080/how-to-disable-sqlalchemy-caching)`expire_all()`中的描述关闭交易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T13:20:21.390

几种可能。

1.  您正在`session`不正确地或在不正确的时间重复使用您的设备。最好的做法是在你提交之后扔掉你的`session`，并在你使用它之前的最后一刻得到一个新的。看似缓存的行为实际上可能是由于`session`您的应用程序的生命周期非常长。
2.  存活时间超过 的对象`session`不会被合并到后续的`session`. 如果您不将它们重新合并，“元数据”可能无法更新它们的状态。这对于 SQLAlchemy 的 ORM API 来说更令人担忧，到目前为止您似乎没有使用它。
3.  您的更改未提交。你说他们是，所以我们会假设这不是它，但如果其他途径都没有解释它，你可能想再看一遍。

一个通用的调试技巧：如果你想确切地知道 SQLAlchemy 在数据库中做什么，传递`echo=True`给`create_engine`函数。引擎将打印它运行的所有查询。

另[请查看](https://stackoverflow.com/questions/7447309/problem-while-committing-data-using-sqlalchemy-session-object-in-a-loop/7448270#7448270)我向其他人提出的建议，他们正在使用 ORM 并遇到事务性问题，该建议解决了他们的问题，但从未指出问题。也许它会帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-27T06:06:57.627

您需要将事务隔离级别更改为`READ_COMMITTED` [http://docs.sqlalchemy.org/en/rel_0_9/dialects/mysql.html#mysql-isolation-level](http://docs.sqlalchemy.org/en/rel_0_9/dialects/mysql.html#mysql-isolation-level)

# forms - 使用 jQuery 和 AJAX 传递变量自动刷新 Div 内容

> ID：12108919
> 
> 赞同：1
> 
> 时间：2012-08-24T11:51:59.013
> 
> 标签：forms, variables, jquery

我正在尝试设置一个页面，用户可以在其中从选择菜单中选择 1 个条件，然后从另一个菜单中选择第二个条件。

然后，我希望这些变量使用 ajax 通过我的自动更新 div，以便在刷新的 .php 中使用它们。

选择菜单工作正常，但我将如何通过 ajax 传递值，然后确保它记住它们以进行刷新。

**形式**

```
<select id="employee_user"> 
<option value="">--</option> 
<option value="333">Test User</option> 
<option value="111">Testing Testing</option>     
</select> 

<select id="they" onchange="showUser(this.value, employee_user.value)"> 
<option value="">--</option> 
<option value="20120801" class="333" title="Test User">20120801</option> 
<option value="20110801" class="333" title="Test User">20110801</option> 
<option value="20100801" class="333" title="Test User">20100801</option> 
<option value="20120801" class="111" title="Testing Testing">20120801</option> 
<option value="20110801" class="111" title="Testing Testing">20110801</option> 
</select> 

</form> 
```

**自动刷新分区**

```
<script>
(function($)
{
    $(document).ready(function()
    {
        $.ajaxSetup(
        {
            cache: false,
            beforeSend: function() {
                $('#updatingdiv').hide();
                $('#loading').show();
            },
            complete: function() {
                $('#loading').hide();
                $('#updatingdiv').show();
            },
            success: function() {
                $('#loading').hide();
                $('#updatingdiv').show();
            }
        });
        var $container = $("#updatingdiv");
        $container.load("getholidaylog.php");
        var refreshId = setInterval(function()
        {
            $container.load('getholidaylog.php');
        }, 9000);
    });
})(jQuery);
</script>

    <div id="updatingdiv"></div>
    <img src="loading.gif" id="loading" alt="loading" style="display:none;" /> 
```

**然后 getholidaylog.php 会：**

```
$year = $_GET["year"];
$username = $_GET["username"]; 
```

并用于数据库查询。

**编辑**

```
$j(document).ready(function() {     
    $j("#year_select").change(function (){
        $.ajaxSetup(
        {
            cache: false,
            beforeSend: function() {
                $('#updatingdiv').hide();
                $('#loading').show();
            },
            complete: function() {
                $('#loading').hide();
                $('#updatingdiv').show();
            },
            success: function() {
                $('#loading').hide();
                $('#updatingdiv').show();
            }
        });
        var $container = $("#updatingdiv");

        var user_select= $j('#user_select').val();
        var year_select= $j('#year_select').val();
        $container.load('getholidaylog.php',{username:user_select,year:year_select}); 
        var refreshId = setInterval(function()
        {
            $container.load('getholidaylog.php');
        }, 9000);
    });

})(jQuery); 
```

**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T09:54:42.623

以下代码成功将值传递给php页面

```
<script type="text/javascript">
    $(document).ready(function(){
        $("#they").change(function () {
        var firstVal = $("#employee_user").val();
        var secVal = $("#they").val();

        $.ajax({
                type: "POST",
                data: "year="+ firstVal +"&username="+ secVal,
                url: "getholidaylog.php",
                success: function(msg){
                $("#updatingdiv").html(msg);

                }
            });
        });
    }); 
</script> 
```

但不是将 getholidaylog.php 加载到 div 中，而是将相应页面的内容加载到 div 中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T12:53:32.100

做这样的事情..

在 html 中添加两个隐藏字段，如下所示：

```
-------
<input type="hidden" id="userselect" />
<input type="hidden" id="yearselect" />
</form> 
```

现在像这样更改您的jQuery代码..

像这样修改 year_select 的 onchange 函数并单独放置。不要在此包含 ajax 设置。

```
 $j("#year_select").change(function (){                   
                $('#userselect').val($('#employee_user').val());
                $('#yearselect').val($('#they').val());
            }); 
```

现在从隐藏字段中获取值。更改这些行。

```
 var user_select= $j('#userselect').val();
        var year_select= $j('#yearselect').val(); 
```

所以你的最终 hmtl 标记看起来像这样：

```
<select id="employee_user"> 
<option value="">--</option> 
<option value="333">Test User</option> 
<option value="111">Testing Testing</option>     
</select> 

<select id="they" onchange="showUser(this.value, employee_user.value)"> 
<option value="">--</option> 
<option value="20120801" class="333" title="Test User">20120801</option> 
<option value="20110801" class="333" title="Test User">20110801</option> 
<option value="20100801" class="333" title="Test User">20100801</option> 
<option value="20120801" class="111" title="Testing Testing">20120801</option> 
<option value="20110801" class="111" title="Testing Testing">20110801</option> 
</select> 
<select id="employee_user"> 
<option value="">--</option> 
<option value="333">Test User</option> 
<option value="111">Testing Testing</option>     
</select> 

<select id="they" onchange="showUser(this.value, employee_user.value)"> 
<option value="">--</option> 
<option value="20120801" class="333" title="Test User">20120801</option> 
<option value="20110801" class="333" title="Test User">20110801</option> 
<option value="20100801" class="333" title="Test User">20100801</option> 
<option value="20120801" class="111" title="Testing Testing">20120801</option> 
<option value="20110801" class="111" title="Testing Testing">20110801</option> 
</select> 
 <input type="hidden" id="userselect" />
<input type="hidden" id="yearselect" />
</form> 
```

您的代码将如下所示：

```
$(function(){
      $("#year_select").change(function (){                   
                    $('#userselect').val($('#employee_user').val());
                    $('#yearselect').val($('#they').val());
                });

    $.ajaxSetup(
    {
        cache: false,
        beforeSend: function() {
            $('#updatingdiv').hide();
            $('#loading').show();
        var user_select= $j('#userselect').val();
        var year_select= $j('#yearselect').val();
        },
        complete: function() {
            $('#loading').hide();
            $('#updatingdiv').show();
        },
        success: function() {
            $('#loading').hide();
            $('#updatingdiv').show();
        }
    });

    $container.load('getholidaylog.php',{username:user_select,year:year_select}); 
    var refreshId = setInterval(function()
    {
        $container.load('getholidaylog.php');
    }, 9000);
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T11:54:53.773

低级`$.ajax()`方法包含一个名为的变量`data`，您可以通过该变量将数据传递给服务器。因此，如果您想要在这种情况下发送数据，您可以执行以下操作：

```
$.ajax({
  data: {year:1999,username:'Codded'}
}); 
```

也一样`load`，第二个参数用于传递数据，所以你可以这样做

```
$("#divId").load('foo.php',{username:'Codded',year:1999}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T11:59:06.747

您可以使用 ajax 函数的 data 属性来传递选定的值，如下例所示：

```
$.ajax({
data: {'name': 'Dan'} // name is the name of the variable and Dan is the value in your case if the selected value 
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T05:23:40.160

检查您的选择 id 是否与下面给出的相同，因为它与您编码的选择框不匹配

```
var user_select= $j('#user_select').val();
var year_select= $j('#year_select').val(); 
```

# mysql - 如果行已包含 INSERT 数据，则阻止 MySQL 插入

> ID：12108920
> 
> 赞同：1
> 
> 时间：2012-08-24T11:52:00.017
> 
> 标签：mysql, insert, key, duplicates

有点问题。首先，这是我的表结构。

表 doc_perms

```
id    user_id    doc_id   can_view    can_edit    can_delete 
```

ID 是 PK，user_id 和 doc_id 是其他表的 FK。

基本上，我需要的是防止执行 INSERT 查询，如果 user_id 和 doc_id 的 INSERT 数据已经存在于一行中，而不管其余列如何。

例如

如果你有数据

```
user_id  doc_id
   1        1
   1        2 
```

然后您尝试使用 user_id = 1 和 doc_id = 2 进行 INSERT，查询失败，因为其中已经有一行包含该数据。

希望这是有道理的。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T11:55:11.500

假设 中没有重复项`doc_perms`，您可以在上[创建唯一索引](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)`(user_id, doc_id)`：

```
CREATE UNIQUE INDEX doc_perms_index 
  ON doc_perms (user_id,doc_id) 
```

如果有重复，您可以使用[ALTER IGNORE ... ADD UNIQUE INDEX](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)将删除它们：

```
ALTER IGNORE TABLE doc_perms 
  ADD UNIQUE INDEX doc_perms_index (user_id, doc_id) 
```

（在所有共享相同（user_id，doc_id）的行中，除了一个之外的所有行都将被删除。保留的行未指定。）

创建唯一索引后，如果重复，`INSERT INTO doc_perms ...`将引发错误。`(user_id, doc_id)`

如果您希望插入，但 UPDATE 其他列何时`(user_id, doc_id)`重复，那么（正如@moopet 已经提到的）您可以使用[INSERT ... ON DUPLICATE KEY UPDATE](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)。例如：

```
INSERT INTO doc_perms (user_id, doc_id, foo) 
  VALUES (1, 2, 3) ON DUPLICATE KEY UPDATE foo = 3''' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:55:19.907

您可以使用`INSERT ... ON DUPLICATE KEY UPDATE`

请参阅此处的 MySQL 手册：http: [//dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

# zend-framework2 - 如何在 ZF2 的控制器动作中呈现不同的视图

> ID：12108921
> 
> 赞同：17
> 
> 时间：2012-08-24T11:52:01.743
> 
> 标签：zend-framework2

如何在控制器操作中呈现不同于默认视图的不同视图。默认情况下，它会尝试在视图文件夹中找到与操作相同的视图，但我想在视图文件夹中呈现不同的视图以进行控制器操作。

我们可以这样做这个ZF1`$this->_helper->viewRenderer('foo');`

谁能知道，如何在 Zendframework 2 中实现上述目标？

我们可以使用禁用视图

```
$response = $this->getResponse();
        $response->setStatusCode(200);
        $response->setContent("Hello World");
        return $response; 
```

我不知道如何在 zf2 中更改/呈现不同的视图。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-24T12:48:12.353

可以使用

```
public function abcAction()
{
    $view = new ViewModel(array('variable'=>$value));
    $view->setTemplate('module/controler/action.phtml'); // path to phtml file under view folder
    return $view;
} 
```

感谢[akrabat](http://zf2test.akrabat.com/)几乎涵盖了所有场景。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-25T15:24:17.817

我在 Zend Framew 2 中的解决方案很简单。对于**索引**操作，我更喜欢调用**parrent::indexAction()**构造函数 bcs 我们扩展**Zend\Mvc\Controller\AbstractActionController**。或者只是在 indexAction 中**返回 array() 。**ZF 将自动返回 index.pthml 而没有定义必须返回的内容。

**return new ViewManager()**是相同的**return array()**

```
<?php

 namespace Test\Controller;

 use Zend\Mvc\Controller\AbstractActionController,
     Zend\View\Model\ViewModel;

 // Or if u write Restful web service then use RestfulController
 // use Zend\Mvc\Controller\AbstractRestfulController

 class TestController extends AbstractActionController
 {
    /*
     * Index action
     *
     * @return main index.phtml
     */

     public function indexAction()
     {
          parent::indexAction();

          // or return new ViewModel();
          // or much simple return array();
     }

    /*
     * Add new comment
     *
     * @return addComment.phtml
     */

     public function addAction()
     {
         $view = new ViewManager();
         $view->setTemplate('test/test/addComment.phtml');  // module/Test/view/test/test/

      return $view;
     } 
```

不要忘记在 module/config/module_config 中配置 route 和 view_manager

```
 'view_manager' => array(
        'template_path_stack' => array(
            'Test' => __DIR__ . '/../view',
        ),
    ), 
```

# ruby-on-rails - 在 Ruby on Rails 中打印不带引号的字符串数组

> ID：12108924
> 
> 赞同：7
> 
> 时间：2012-08-24T11:52:14.650
> 
> 标签：ruby-on-rails, ruby, arrays, string

我需要在没有字符串引号的 JavaScript 中打印一个字符串数组。

我有一个包含字符串值的数组，它作为 <%= array %> 嵌入到页面中。对于脚本，数组应该以 [[value1]、[value2]、[value3]] 等形式打印，但是当我输出数组时，它会在值周围添加引号，因此脚本不起作用。

如何从输出中删除引号？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T12:25:26.047

我不确定我是否理解正确，但是在输出数组时，您可以执行以下操作：

```
array = ["value1", "value2"]    
array.to_s.gsub('"', '') 
```

# php - PHP 在 JQuery 中加载为 XML

> ID：12108926
> 
> 赞同：0
> 
> 时间：2012-08-24T11:52:17.250
> 
> 标签：php, jquery, xml, xml-parsing

我正在尝试加载 XML 以填充搜索框。我的代码在静态 xml 文件中运行良好，但我需要加载 PHP 文件以根据数据库中的数据生成动态 XML 文件。

我知道 PHP 文件在浏览器中加载时会生成 XML，并且页面源会显示正确的节点等，但是当我在 JavaScript 中引用 .php 文件时，它无法加载或显示错误...使用 . xml 文件（它是 php 输出源的副本）它加载得很好。

我希望有人检查我是否正确编码了 XML 或在我的 JavaScript 中遗漏了某些内容……我们将不胜感激。

```
JS

var myArr = [];
$.ajax({            
     url: "people.php", // change to full path of file on server
     type: "GET",
     dataType: "xml",
     success: parseXml,
     complete: setupAC,
     failure: function(data) {
       alert("XML File could not be found");
     }
});

function parseXml(xml){
     $(xml).find("person").each(function(){     
        var thisItem = $(this).find('name').text();
        myArr.push(thisItem);
        alert(thisItem);
     });    
}

PHP

<?php

    include '../../inc_global/connect.php';

    $query = 'SELECT * FROM candidates';  

    $result = mysql_query($query, $link);

    $xmlOutput = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n";
    $xmlOutput .= "<people>\n";

    while ($line = mysql_fetch_assoc($result)) {

   $xmlOutput .= "<person>\n"; 
   $xmlOutput .= "<name>" . $line['name'] . "</name>\n"; 
   $xmlOutput .= "</person>\n";

}

$xmlOutput .= "</people>\n";

echo $xmlOutput;

mysql_close($link);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:57:25.740

尝试在输出信息之前放置标题：

```
....
header ("Content-Type:text/xml");  
echo $xmlOutput;
.... 
```

完整代码：

```
<?php

    include '../../inc_global/connect.php';

    $query = 'SELECT * FROM candidates';  

    $result = mysql_query($query, $link);

    $xmlOutput = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n";
    $xmlOutput .= "<people>\n";

    while ($line = mysql_fetch_assoc($result)) {

   $xmlOutput .= "<person>\n"; 
   $xmlOutput .= "<name>" . $line['name'] . "</name>\n"; 
   $xmlOutput .= "</person>\n";

}

$xmlOutput .= "</people>\n";

header ("Content-Type:text/xml");  //<----------- xml header here
echo $xmlOutput;

mysql_close($link);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:03:21.217

检查 php 中发生的情况，将您的浏览器指向`people.php`.

无论如何，我建议你：

### 为 PDO 删除 mysql_

因为`mysql_`功能很差，会阻止与小鸡见面，而[PDO](http://php.net/manual/en/book.pdo.php)有帮助；

### 对原始 XML 使用 SimpleXML

[SimpleXML](http://php.net/manual/en/book.simplexml.php)可帮助您构建代码，而不会对链接字符串感到厌烦。

### 为您的文档提供正确的 HTTP 标头

您正在生成一个 XML 文档，让浏览器意识到这一点：

```
header ("Content-Type:text/xml");  
echo $xmlOutput; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T12:11:32.217

您能否确保函数 parseXml(xml) 在 ajax 调用成功时调用它时不需要任何参数。请注意，我没有尝试过代码，但这里只是一个猜测。

# android - 移至垃圾箱功能

> ID：12108928
> 
> 赞同：-1
> 
> 时间：2012-08-24T11:52:27.677
> 
> 标签：android

在首页上，您可以按住图标几秒钟将图标拖到垃圾箱中，垃圾箱会弹出，然后您将它们移开。是否可以在我自己的应用程序中实现此功能？这意味着我想在我的绘图视图中按下一个形状，然后将此形状移动到垃圾箱中并将其从我的绘图队列中删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:58:32.683

您无法获得满足您要求的现成物品，但请访问下面的链接，以便您了解如何实现目标的想法和指导。

[拖放文章](http://www.vogella.com/articles/AndroidDragAndDrop/article.html)

[分步指南](http://blahti.wordpress.com/2011/01/17/moving-views-part-2/)

[安卓开发者](http://developer.android.com/guide/topics/ui/drag-drop.html)

我已经尽力了 ....

# java - 使用 CSVWriter 导出带有 BLOB 的数据库表

> ID：12108934
> 
> 赞同：1
> 
> 时间：2012-08-24T11:52:58.777
> 
> 标签：java

我已经尝试使用 CSVWriter 将我的数据库表导出为 CSV。

但我的表包含 BLOB 数据。如何将它们包含在我的导出中？

然后稍后，我将使用 CSVReader 导入导出的 CSV。谁能分享一些概念？

这是我的导出代码的一部分

```
ResultSet res = st.executeQuery("select * from "+db+"."+obTableNames[23]);

int colunmCount = getColumnCount(res);

try {
   File filename = new File(dir,""+obTableNames[23]+".csv");
   fw = new FileWriter(filename);

   CSVWriter writer = new CSVWriter(fw);
   writer.writeAll(res, false);
   int colType = res.getMetaData().getColumnType(colunmCount);  
   dispInt(colType);
   fw.flush();
   fw.close();

} catch (IOException e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:07:51.197

您是否看过Apache 提供的[`encodeBase64String(byte[] data`)](http://commons.apache.org/codec/apidocs/org/apache/commons/codec/binary/Base64.html#encodeBase64String%28byte%5B%5D%29)方法？[`Base64`](http://commons.apache.org/codec/apidocs/org/apache/commons/codec/binary/Base64.html)

> 使用 base64 算法对二进制数据进行编码，但不对输出进行分块。

这应该允许您返回代表您的二进制大对象的编码字符串并将其合并到您的 CSV 中。

然后，另一边的人可以使用[`decodeBase64String(String data)`](http://commons.apache.org/codec/apidocs/org/apache/commons/codec/binary/Base64.html#decodeBase64%28java.lang.String%29)BLOB 再次取回。

# php - 静态:: 在私有成员上

> ID：12108935
> 
> 赞同：0
> 
> 时间：2012-08-24T11:53:05.777
> 
> 标签：php, static

它有什么意义吗？

```
public static function a(){

  static::_b();

}

private static function _b(){

} 
```

这里的 static 在任何情况下都与 self 相同，因为您不能覆盖子类中的私有函数，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:19:52.780

正如 Germann Arlington 在评论中所说。子类可以拥有自己的 _b() 实现——即使具有不同的可见性。

```
<?php
class Foo {
    public static function a() { static::_b(); }
    private static function _b() { echo 'Foo'; }
}

class FooEx extends Foo {
    public static function _b() { echo 'FooEx'; }
}

FooEx::a(); 
```

印刷`FooEx`

# asp.net-mvc - ajax过程中的Jquery Ajax发布动画？

> ID：12108937
> 
> 赞同：0
> 
> 时间：2012-08-24T11:53:09.713
> 
> 标签：asp.net-mvc, jquery, loading-image

下拉更改时，我在我的 mvc 应用程序上执行 ajax 发布。

```
$(function () {
    $('#meters').change(function () {
        var analizor_id = $(this).val();
        if (analizor_id && analizor_id != '') {
            $.ajax({
                url: '@Url.Action("AnalizorInfoPartial", "Enerji")',
                type: 'GET',
                cache: false,
                data: { analizor_id: analizor_id },
                success: function (result) {
                    $('#TableAnalizorInfo').html(result);
                }
            });
        }
    });
}); 
```

落下

```
@Html.DropDownList("sno", new SelectList(Model, "sno", "AnalizorAdi"), "-- Analizör Seçiniz --", new { id = "meters" }) 
```

我可以在 ajax 过程中显示加载图像或其他任何内容吗？（在开始 - 结束事件之间）和代码示例？

**编辑**

我可以这样使用吗？

```
success: function (result) {
    $('#TableAnalizorInfo').html(result);
}
begin:function(){ 
    //show image
}
complete:function(){ 
    //hide image
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T11:58:12.630

当然，您要查找的事件是`beforeSend`和`complete`：

```
if (analizor_id && analizor_id != '') {
     $.ajax({
         url: '@Url.Action("AnalizorInfoPartial", "Enerji")',
         type: 'GET',
         cache: false,
         beforeSend: function() {
             // Show your spinner
         }, 
         complete: function() {
             // Hide your spinner
         },
         data: { analizor_id: analizor_id },
         success: function (result) {
            $('#TableAnalizorInfo').html(result);
        }
    });
} 
```

或者您可以使用[全局 AJAX 事件处理程序](http://api.jquery.com/category/ajax/global-ajax-event-handlers/)为页面上的所有 AJAX 请求全局执行此操作：

```
$(document).ajaxSend(function() {
    // Show your spinner
}).ajaxComplete(function() {
    // Hide your spinner
}); 
```

# javascript - Web 服务器上的错误 301Moved Permanently

> ID：12108938
> 
> 赞同：0
> 
> 时间：2012-08-24T11:53:17.177
> 
> 标签：javascript, jquery

我在 localhost 上成功运行了代码。但服务器上的相同代码我得到错误 301 永久删除已永久移动。我使用发布请求。我的代码如下。

```
$(function(){

        $("#search_text").keyup(function(e){
            var sVal = $(this).val();

            $("#search").removeAttr('disabled');
            $.post('http://localhost/website/index.php/search/ajaxResults',{Search:sVal},function(data){

                             //my code here
            });

    });
}); 
```

它成功地完成了。

但在网络服务器上也是一样的，代码如下：

```
$(function(){

        $("#search_text").keyup(function(e){
            var sVal = $(this).val();

            $("#search").removeAttr('disabled');
            $.post('http://schoolanduniversity.com/index.php/search/ajaxResults',{Search:sVal},function(data){

                             //my code here
            });

    });
}); 
```

我收到错误 301

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:56:25.043

那是因为这个网址：

```
http://schoolanduniversity.com/index.php/search/ajaxResults 
```

重定向到这个网址：

```
http://www.schoolanduniversity.com/index.php/search/ajaxResults 
```

的DNS配置`schoolanduniversity.com`是重定向到`www.schoolanduniversity.com`，就是这样。

如果您更改网址以将其`www`放在前面，它应该可以工作

这`error code 301`不是一个错误，它更像是一个警告，比如

> 您正在尝试访问thispage.com，但服务器已移至thatpage.com，请下次使用thatpage.com

有关更多信息，请在此处查看：[HTTP/1.1：状态代码定义 # 错误代码 301](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.2)

# r - 使用正式方法定义的 S3 对象的 S3 样式分派

> ID：12108939
> 
> 赞同：7
> 
> 时间：2012-08-24T11:53:17.350
> 
> 标签：r, cran, s4

与[这个](https://stackoverflow.com/questions/12100856/combining-s4-and-s3-methods-in-a-single-function)问题有关，但略有不同，希望更清楚。

我正在寻找一种*干净*的方式来正式注册 S4 和 S3 类的方法，但不依赖于糟糕的 S3-dot-naming-scheme 进行调度。一个例子：

```
setClass("foo");
setClass("bar");

setGeneric("test", function(x, ...){
    standardGeneric("test");
});

setMethod("test", "bar", function(x, ...){
    return("success (bar).");
});

obj1 <- 123;
class(obj1) <- "bar";
test(obj1); 
```

这个例子展示了我们如何`test`为类的 S3 对象注册一个方法`bar`，而不需要命名函数`test.bar`，这很棒。但是，限制是如果我们以这种方式注册方法，它们只会被分派到对象的第一个 S3 类。例如：

```
obj2 <- 123;
class(obj2) <- c("foo", "bar");
test(obj2); 
```

这不起作用，因为 S4 方法分派只会尝试类`foo`及其超类。如何扩展此示例，以便在找不到合适的方法时自动选择`test`方法？例如 S3 风格的调度，但不必重新命名所有内容和？`bar``foo``test.foo``test.bar`

总而言之：如何创建一个使用正式方法分派的通用函数，但对于具有多个类的 S3 对象，还依赖于对象的第二个、第三个等类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T16:19:13.523

`?setOldClass`将给出答案：

```
setOldClass(c("foo", "bar"))

setGeneric("test", function(x, ...)standardGeneric("test"))
setMethod("test", "bar", function(x, ...)return("success (bar).")) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T12:14:13.247

你可以写一个方法

```
test = function(x, ...) UseMethod("test")

setGeneric("test")

.redispatch = function(x, ...)
{
    if (is.object(x) && !isS4(x) && length(class(x)) != 1L) {
        class(x) = class(x)[-1]
        callGeneric(x, ...)
    } else callNextMethod(x, ...)
}

setMethod(test, "ANY", .redispatch) 
```

但我个人不会以这种方式混合 S3 和 S4。

# c# - 为 EF 5.0 模型提供连接字符串

> ID：12108941
> 
> 赞同：3
> 
> 时间：2012-08-24T11:53:19.837
> 
> 标签：c#, entity-framework, dbcontext

所以我想这真的很简单，但由于某种原因我无法找到答案。我的问题是我之前使用过从 ObjectContext 继承的 EF 4.3.1 上下文，并且自动生成总是创建一个接受连接字符串作为参数的重载构造函数。

现在我正在尝试切换到 EF 5.0，我必须使用 DbContext 版本。但是从 DbContext 继承的 MyEntities 仅具有可用的无参数构造函数。我想我可以自己添加重载的构造函数，并使其调用 base(connectionString)，但是对自动生成的文件进行手动更改似乎充其量是一项冒险的事情。

那么如何创建一个使用我在运行时提供的连接字符串的 MyEntities 实例呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T12:35:51.797

您是否尝试过使用连接工厂？

此示例适用于 SqlLite，但它适用于所有数据库。

你可以创建一个类似于这个的类：

```
public class SqLiteConnectionFactory : IDbConnectionFactory
{
     public System.Data.Common.DbConnection CreateConnection(string nameOrConnectionString)
     {
       var databaseDirectory = @"C:\\master.db";

        var builder = new SQLiteConnectionStringBuilder
        {
            DataSource = databaseDirectory,
            Version = 3
        };
        return new SQLiteConnection(builder.ToString());
       }
} 
```

然后在第一次访问上下文之前通过执行此语句来使用 if：

```
Database.DefaultConnectionFactory = new ConnectionFactories.SqLiteConnectionFactory (); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:09:58.733

这是一个构建连接字符串的函数（此处为 firebird）：

```
private static string ConnectionString(string dbFileName)
    {
        // Specify the provider name, server and database.
        const string providerName = "FirebirdSql.Data.FirebirdClient";
        const string metaData = "res://*/RcModel.csdl|res://*/RcModel.ssdl|res://*/RcModel.msl";

        // Initialize the EntityConnectionStringBuilder.
        EntityConnectionStringBuilder entityBuilder = new EntityConnectionStringBuilder();

        //Set the provider name.
        entityBuilder.Provider = providerName;

        FbConnectionStringBuilder sqlBuilder = new FbConnectionStringBuilder();

        sqlBuilder.UserID = "sysdba";
        sqlBuilder.Password = "masterkey";
        sqlBuilder.DataSource = @"127.0.0.1";
        sqlBuilder.Database = dbFileName;
        sqlBuilder.Dialect = 3;
        sqlBuilder.Charset = "UTF8";
        sqlBuilder.ServerType = FbServerType.Default;

        // Set the provider-specific connection string.
        entityBuilder.ProviderConnectionString = sqlBuilder.ConnectionString;
        entityBuilder.Metadata = metaData;
        return entityBuilder.ToString();
    } 
```

以这种方式使用它：

```
 string cs = ConnectionString(@"C:\myDbFile.fbd");
        EntityConnection conn = new EntityConnection(cs);
        MyEntities db = new MyEntities(conn); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-01T20:56:47.117

您可以在创建 MyEntities 的地方执行此操作。像这样的东西：

```
MyEntities dataContext = new MyEntities();

dataContext.Database.Connection.ConnectionString = "<YOUR CONNECTION STRING>"; 
```

如果您的 edmx 设置为在配置中查找连接字符串，它在创建时仍会这样做，但您可以删除嵌入其中的数据库提供程序连接字符串。这样做之后，它看起来像这样（如果连接到 SQL）：

```
 <connectionStrings>
      <add name="MyEntities" connectionString="metadata=res://*/MyEntities.csdl|res://*/MyEntities.ssdl|res://*/MyEntities.msl;provider=System.Data.SqlClient;provider connection string=;" providerName="System.Data.EntityClient" />
</connectionStrings> 
```

# mysql - 大型 MySQL 表，使用 MEMORY/HEAP 的任何缺点

> ID：12108946
> 
> 赞同：2
> 
> 时间：2012-08-24T11:53:36.897
> 
> 标签：mysql

我有一个大约 120M 记录和 1.5Gb 大小的表。此表是只读的（永远不会被写入），并且可以随时从外部源重新填充。所以重启 MySQL 不会有问题。

有什么理由我不应该为此使用 MEMORY 存储引擎吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:58:10.933

您应该测量**启动时间**（包括表的人口）。否则**memory**是限制（内存和匹配服务器硬件的成本）。也测量一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:57:03.387

我不明白为什么不。如果你只做阅读，那么你应该没问题。

我已经运行过这种大小的表，只要您的服务器可以接受它，那么您应该没问题。如果有的话，从长远来看，它可以减少硬盘驱动器的磨损。

我做过类似的事情，没有遇到任何麻烦。

# entity-framework - 在 EF5 中，如何创建一个将被读取但不会插入或更新的字段

> ID：12108951
> 
> 赞同：2
> 
> 时间：2012-08-24T11:53:57.173
> 
> 标签：entity-framework, entity-framework-5

我不想要来自 [NotMapped] 的功能 - 如果设置，我希望它读取一个值，但从不更新该值。我基本上是`<property update="false" insert="false" ... />`在 NHibernate 之后。

实体框架可以做到这一点吗？

我想要做的是在插入时将 DateTime 列“CreateStamp”设置为当前的 DateTime。

这就是我所拥有的。

配置：

```
Property(s => s.CreateStamp)
            .IsRequired()
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Computed); 
```

迁移脚本（已应用）：

```
CreateStamp = c.DateTime(nullable: false, defaultValueSql: "GETDATE()"), 
```

该属性在类中定义为：

```
public DateTime?    CreateStamp { get; set; } 
```

EF 生成的查询试图将 NULL 插入 CreateStamp 列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:05:37.750

听起来像是商店产生的价值。您可以在该字段上设置`StoreGeneratedPattern`为[计算。](http://msdn.microsoft.com/en-us/library/system.data.metadata.edm.storegeneratedpattern.aspx)

# java - 在同一个项目中使用 TIKA 和 POI 而不会遇到版本问题？

> ID：12108956
> 
> 赞同：0
> 
> 时间：2012-08-24T11:54:40.683
> 
> 标签：java, classpath, apache-poi, dependency-management, apache-tika

我需要将报告生成为 xls 表，但我的项目中已经有 TIKA。现在 TIKA 确实*包含*POI，我担心的是 TIKA 1.2（我目前正在使用）包含 POI 3.8 的 beta 版本。

我预见到有一天我必须更新 POI 或 TIKA 由于错误修复，同时保持另一个不变。有没有人有这种情况的经验？这是现实中的问题还是我应该使用 TIKA 附带的 POI 版本？

如果我想/需要将它们分开，是否有公认的做法来管理这个（我想没有办法绕过我自己的 ClassLoader 来做到这一点？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T18:05:30.677

作为一般规则，只需使用两者的最新版本即可。每当有新版本发布时，Tika 都会升级其 POI 依赖项，以进行错误修复和新功能。

如果您需要运行比 Tika 支持的更新版本的 POI，那么您应该从 SVN 中检查 Tika。那里通常有针对较新版本的修复，如果没有，它们将发布到 Tika JIRA。

# primefaces - Primefaces 3.3 Spring Webflow 2.3.1Final Primefaces 未定义

> ID：12108973
> 
> 赞同：0
> 
> 时间：2012-08-24T11:55:45.647
> 
> 标签：primefaces, spring-webflow-2

```
I am new to Primefaces and also to SWF. I have setup sauch page:

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>Welcome to OTV_JSF_Spring_Hibernate_Project</title>
</h:head>
<h:body>
    <f:view>
        <h:form>
            <p:panel header="Keyboard Demo">
                <h:panelGrid columns="2" cellpadding="5">
                    <h:outputText value="USERs : "/>

                    <p:inputText id="name" value="#{sampleBean.jmeno}"/>
                    <p:selectOneRadio id="customRadio">
                        <f:selectItem itemLabel="Option 1" itemValue="1"/>
                        <f:selectItem itemLabel="Option 2" itemValue="2"/>
                        <f:selectItem itemLabel="Option 3" itemValue="3"/>
                    </p:selectOneRadio>

                    <h:outputText value="Basic QWERTY: "/>
                    <p:keyboard value="#{sampleBean.zadavanaHodnota}" layout="qwertyBasic"/>

                    <h3>Inline</h3>
                    <p:calendar size="21" value="#{sampleBean.datum}" id="inlineCal" mode="popup"
                                showOn="focus"/>

                    <p:commandButton action="pokracuj" value="Prechod na druhou stranku"/>
                    <p:dataTable rendered="false"/>

                </h:panelGrid>
            </p:panel>

            <p:dialog widgetVar="dialog" showEffect="fade" hideEffect="fade" header="Values">
                <h:panelGrid columns="2" id="display" cellpadding="5">
                    <h:outputText value="Value2:"/>
                    <h:outputText value="#{sampleBean.zadavanaHodnota}"/>
                </h:panelGrid>
            </p:dialog>

        </h:form>
    </f:view>
    <p:spinner/>
</h:body>

</html> 
```

根据文档，它应该没问题，但是当我在任何 AS（JBoss，WL）上运行它时，它会在 JS 中输出错误：Primefaces not defined。生成页面的开头如下所示：

```
<html xmlns="http://www.w3.org/1999/xhtml"><head><link type="text/css" rel="stylesheet" href="/blank-web-1.0.0-SNAPSHOT/*/javax.faces.resource/theme.css?ln=primefaces-ui-lightness" /><link type="text/css" rel="stylesheet" href="/blank-web-1.0.0-SNAPSHOT/*/javax.faces.resource/primefaces.css?ln=primefaces" /><link type="text/css" rel="stylesheet" href="/blank-web-1.0.0-SNAPSHOT/*/javax.faces.resource/keyboard/keyboard.css?ln=primefaces" /><script type="text/javascript" src="/blank-web-1.0.0-SNAPSHOT/*/javax.faces.resource/jquery/jquery.js?ln=primefaces"></script><script type="text/javascript" src="/blank-web-1.0.0-SNAPSHOT/*/javax.faces.resource/primefaces.js?ln=primefaces"></script><script type="text/javascript" src="/blank-web-1.0.0-SNAPSHOT/*/javax.faces.resource/keyboard/keyboard.js?ln=primefaces"></script> 
```

问题很明显 - 静态资源 - Primefaces.js、themes.js 没有找到。我尝试了各种 SWF 配置，但没有成功。例如，我目前关于资源阅读的 conf 是这样的：

```
 <faces:resources />

    <!--<mvc:resources location="/, classpath:/META-INF/resources/, classpath:/META-INF/" order="1" mapping="/resources/**" />-->

    <mvc:resources mapping="/javax.faces.resource/**" location="/, classpath:/META-INF/resources/" /> 
```

我也尝试了资源 servlet，但它也没有工作。ResourceServlet org.springframework.js.resource.ResourceServlet 1 ResourceServlet /resources/* */*

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:46:13.903

不带 mvc:resources 标签试试。还要确保将 Primefaces JAR 部署到您的服务器。

# java - 作为 Teamcity 构建的一部分，如何在一些自定义 Junit 中执行“svn diff”

> ID：12108982
> 
> 赞同：1
> 
> 时间：2012-08-24T11:56:44.163
> 
> 标签：java, svn, diff, teamcity

作为 Teamcity 构建的一部分，如何在一些自定义 Junit 中执行“svn diff”。

我想知道当前版本和以前版本的文件之间发生了什么变化。

我知道 Teamcity 在结帐模式下运行时，它会结帐完整回购然后应用更改。想要在应用更改和存储文件之前获取差异。

你能给出任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T17:52:00.943

您的选择似乎是：

*   从您的测试中执行 svn 客户端进程。确保您在 TeamCity 中使用代理端结帐并将客户端安装在代理计算机上，因为 TeamCity 使用 Java 库而不是 svn 客户端。

*   使用 TeamCity 的 teamcity.build.changedFiles.file 构建[参数](http://confluence.jetbrains.net/display/TCD7/Predefined+Build+Parameters)。但这只会列出自上次构建相同构建配置以来的文件更改

*   使用 TeamCity 的[REST API](http://confluence.jetbrains.net/display/TW/REST+API+Plugin)列出更改，然后获取他们的文件

*   编写一个 TeamCity Java 插件，该插件将从其开放 API 获取文件信息并将其提供给构建

# magento - “文件未上传”magento 错误，即使文件已上传到特定文件夹

> ID：12108986
> 
> 赞同：0
> 
> 时间：2012-08-24T11:56:53.057
> 
> 标签：magento, file-upload

我正在制作一个应用程序，其中我正在从我的自定义选项卡上传文件，如下所示

![在此处输入图像描述](../Images/63806378b6f2e962953c4fe1d193c15d.png)

我为事件创建了一个名为`catalog_product_save_after`. 在特定功能中，我将这些文件上传到目录/产品文件夹，并将其上传到这些文件夹而没有任何错误。

但是，当我尝试将这些图像分配给该特定产品时，出现以下错误。 `File was not uploaded`在文件中`E:\xampp\htdocs\magento\lib\Varien\File\Uploader.php on line 152`

如果我检查`system.log`然后我看到`2012-08-24T11:33:15+00:00 ERR (3): User Error: Some transactions have not been committed or rolled back in E:\xampp\htdocs\magento\lib\Varien\Db\Adapter\Pdo\Mysql.php on line 3645`这个错误。

我的观察者功能如下

```
public function Savedata($observer)
    {
        $params     =   Mage::app()->getRequest()->getParams();

        $product    =   $observer->getEvent()->getProduct();

        $product_id =   $product->getId();

        $filesData  =   array();

        $keysData   =   array_keys($_FILES);

        foreach($keysData as $keys)
        {
            $uploader = new Varien_File_Uploader("$keys");
            $uploader->setAllowedExtensions(array('jpeg', 'jpg', 'png', 'tiff'));
            $uploader->setAllowRenameFiles(true);
            $uploader->setFilesDispersion(false);

            $path = Mage::getBaseDir('media') . DS  . "catalog" . DS . "product";

            if(!is_dir($path))
            {
                mkdir($path);
            }

            $extension  =   pathinfo($_FILES["$keys"]['name'], PATHINFO_EXTENSION);

            $date = new DateTime();

            $file_name                  =   $keys . "_" . $product_id . "." . $extension;

            $_FILES["$keys"]['name']    =   $file_name;

            $uploader->save($path, $_FILES["$keys"]['name']);
            $filesData[]    =   $path .DS. $_FILES["$keys"]['name'];
        }

        print_r($filesData);
        ///till this works file.. when i add following code, program dies. 

        try 
        {
            $productData = Mage::getModel('catalog/product')->load($product_id);

            print_r($productData->getData());

            foreach($filesData as $file)
            {
                $productData->addImageToMediaGallery($file, "image" ,false, false);
            }
            $productData->save();

            $productData = Mage::getModel('catalog/product')->load($product_id);

            print_r($productData->getData());
        }
        catch (Exception $e)
        {
            echo $e->getMessage() . "||" . $e->getCode() . "||" . $e->getFile() . "||" . $e->getLine();
        }

        exit();
    } 
```

有什么建议我哪里出错了吗？为什么会出现这个错误？

我正在使用 magento 1.7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:06:58.710

我看到您将在保存目录/产品对象时对其进行更新。

您正在使用事件`catalog_product_save_after`。

在观察者内部，您调用：

```
$productData = Mage::getModel('catalog/product')->load($product_id);
...
$productData->save(); 
```

$productData 是目录/产品对象->您保存了它。

你可以猜到会发生什么，它会触发事件`catalog_product_save_after`等等，永远循环。

我看到您打电话`$productData->save();`是因为在这种情况下，该值已保存且无法更改。

因此`catalog_product_save_after`，您可以使用`catalog_product_save_before`.

与您的代码相同，但删除，`$productData->save();`因为它会自动调用保存。

```
Mage_Core_Model_Abstract

public function save()
{
    /**
     * Direct deleted items to delete method
     */
    if ($this->isDeleted()) {
        return $this->delete();
    }
    if (!$this->_hasModelChanged()) {
        return $this;
    }
    $this->_getResource()->beginTransaction();
    $dataCommited = false;
    try {
        $this->_beforeSave();
        if ($this->_dataSaveAllowed) {
            //see this line below, it will call save, so you don't need to call save in your `catalog_product_save_before` (no looping forever)
            $this->_getResource()->save($this);
            $this->_afterSave();
        }
        $this->_getResource()->addCommitCallback(array($this, 'afterCommitCallback'))
            ->commit();
        $this->_hasDataChanges = false;
        $dataCommited = true;
    } catch (Exception $e) {
        $this->_getResource()->rollBack();
        $this->_hasDataChanges = true;
        throw $e;
    }
    if ($dataCommited) {
        $this->_afterSaveCommit();
    }
    return $this;
} 
```

# iphone - 是否有用于录制演示的 iOS 屏幕录像机框架？

> ID：12108987
> 
> 赞同：-3
> 
> 时间：2012-08-24T11:56:54.630
> 
> 标签：iphone, ios, video, screen, record

我想在设备上录制我的应用程序演示。为了录制应用内演示，是否有可以放入应用程序中录制屏幕的框架？

当然，这个框架会在提交到 App Store 之前被删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:02:39.967

如果您的设备已越狱，请尝试[以下](http://www.ijailbreak.com/applications/cydia-app-display-recorder/)操作：

我不知道质量。如果您还可以在 iOS 模拟器上演示您的应用程序，请使用任何 Mac 屏幕视频捕获程序并记录您的屏幕。
之后，剪掉你的iOS框架，你就完成了。

# php - 用文本框输入日期

> ID：12108988
> 
> 赞同：0
> 
> 时间：2012-08-24T11:56:59.477
> 
> 标签：php, cakephp, cakephp-2.2

摆脱这三个`<select>`元素并允许用户在常规`<input type="text">`控件中键入日期的标准方法是什么？

要求包括：

*   日期格式必须是 D/M/Y
*   必须正确打印现有日期
*   无法中断日期验证

我找不到任何合理的文档，只是在像我一样无知的用户编写的论坛线程中进行黑客攻击 xD

**澄清：**请注意*CakePHP*标签。我已经知道如何在常规 PHP 中处理日期。我需要关于精确的 CakePHP 机制的帮助，我可以使用它来调整框架的默认功能（我的意思是调整而不是覆盖）。

到目前为止，我已将其添加到模型中：

```
public $validate = array(
    'fecha' => array(
        array(
            'rule' => 'notEmpty',
            'required' => true,
        ),
        array(
            'rule' => array('date', 'dmy'),
        ),
    )
); 
```

...我在视图中组成了这样的字段：

```
echo $this->Form->input(
    'Foo.fecha',
    array(
        'type' => 'text',
    )
); 
```

...但我能做的就是读取和验证用户输入：它不会正确打印以前的日期，也不会正确存储新日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T06:55:18.527

这是我的发现的摘要。似乎适当的机制是使用[模型回调方法](http://book.cakephp.org/2.0/en/models/callback-methods.html)在两种日期格式之间切换：

*   数据库格式，例如：`2012-08-28`
*   显示格式，例如：`28/08/2012`

脚步：

1.  添加两个实用方法来`AppModel`在我的自定义格式（又名“显示格式”）和 MySQL 的默认格式（又名“DB 格式”）之间进行转换。
2.  向我的模型添加一个`afterFind()`过滤器，从数据库读取时转换为显示格式。
3.  将表单控件呈现为`'type' => 'text'`.
4.  向模型内的字段添加`'rule' => array('date', 'dmy')`验证规则。
5.  在我的模型中添加一个`beforeSave()`过滤器，在保存之前转换为 DB 格式。

这些步骤可以用实现和回调的[行为](http://book.cakephp.org/2.0/en/models/behaviors.html)以及可能的其他一些行为来封装，例如. 该行为可以直接应用于并将负责遍历数据数组以在两种格式之间转换日期（如果模型具有附加表）。代码不是微不足道的，而是可以完成的，它使一切变得透明。`afterFind()``beforeSave()``beforeFind()``AppModel`

缺点：

*   使代码仅限 MySQL（*但是，它不是已经仅限 MySQL 了吗？*）
*   使其难以本地化。
*   如果你需要做日期数学，你会发现自己有人类可读的字符串。

能够使用*三种*格式会更加坚如磐石：

*   数据库格式，例如：`2012-08-28`
*   显示格式，例如：`28/08/2012`
*   PHP 内部格式，例如 Unix 时间戳或`DateTime`对象

遗憾的是，CakePHP 核心并不是为此而设计的，如果您尝试以这种方式实现它，一切都会变得过于复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T12:05:34.290

唯一可能的方法是让用户输入他想做的任何事情，然后在他想要提交表单或其他内容时检查其有效性。或者更好的是，选择 jQuery datepicker。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T12:07:33.113

如果您将使用帮助程序编写输入字段，则可以`type`选择`input`. `formhelper`试试这个，例如：

```
<?php
echo $this->Form->input('birth_dt', array(
    'type'  => 'text',
    'label' => 'Date of birth',
)); 
```

**编辑：（阅读您的评论后）**

如果是这样的解决方案，可以是在表单提交后验证输入值或使用ajax vaildation。

# android - 服务器-客户端的 JSON-RPC

> ID：12108997
> 
> 赞同：0
> 
> 时间：2012-08-24T11:57:19.247
> 
> 标签：android, json, rpc

我正在尝试构建一个具有客户端和服务器的系统，客户端必须使用服务器的一些方法，这些方法应该返回对象。我认为可以使用 JSON-RPC 架构，有人可以帮我吗？（客户端是android，服务器是android或linux）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:18:40.577

您可以在 Androin [http://www.codeforest.net/android-json-rpc-client-and-php-zend-framework-server上尝试将此作为 JSON 客户端](http://www.codeforest.net/android-json-rpc-client-and-php-zend-framework-server)

这作为 php 服务器（和客户端，如果需要）[http://jsonrpcphp.org/?page=download&lang=en](http://jsonrpcphp.org/?page=download&lang=en)

祝你好运

# java - "Wrong" return type when using if vs. ternary opertator in Java

> ID：12108998
> 
> 赞同：17
> 
> 时间：2012-08-24T11:57:19.867
> 
> 标签：java, if-statement, return, ternary-operator

In the following class, the return type of the two methods is inconsistent with the idea that the ternary operator:

```
return condition?a:b; 
```

is equivalent to

```
if(condition) {
    return a;
} else{ 
    return b;
} 
```

The first returns a Double and the second a Long:

```
public class IfTest {
    public static Long longValue = 1l;
    public static Double doubleValue = null;

    public static void main(String[] args) {
        System.out.println(getWithIf().getClass());// outpus Long
        System.out.println(getWithQuestionMark().getClass());// outputs Double
    }

    public static Object getWithQuestionMark() {
        return doubleValue == null ? longValue : doubleValue;
    }

    public static Object getWithIf() {
        if (doubleValue == null) {
            return longValue;
         } else {
            return doubleValue;
        }
    }
} 
```

I can imagine this has to do with the compiler narrow casting the return type of `getWithQuestionMark()` but is that language wise ok? It's certainly not what I would have expected.

Any insights most welcome!

Edit: there's very good answers below. Additionally, the following question referenced by @sakthisundar explores another side effect of the type promotion occurring in the ternary operator: [Tricky ternary operator in Java - autoboxing](https://stackoverflow.com/questions/8098953/tricky-ternary-operator-in-java-autoboxing)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-24T12:03:19.540

Basically it's following the rules of [section 15.25 of the JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.25), specifically:

> Otherwise, if the second and third operands have types that are convertible (§5.1.8) to numeric types, then there are several cases:
> 
> *   [...]
>     
>     
> *   Otherwise, binary numeric promotion (§5.6.2) is applied to the operand types, and the type of the conditional expression is the promoted type of the second and third operands.

So [section 5.6.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.6.2) is followed, which will basically involves unboxing - so this makes your expression work as if `longValue` and `doubleValue` were of types `long` and `double` respectively, and the widening promotion is applied to the `long` to get an overall result type of `double`.

That `double` is then boxed in order to return an `Object` from the method.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T12:10:57.787

In addition to @Jon's answer, looking at the bytecode you see:

```
public static java.lang.Object getWithQuestionMark();
  Code:
   0:   getstatic       #7; //Field doubleValue:Ljava/lang/Double;
   3:   ifnonnull       16
   6:   getstatic       #8; //Field longValue:Ljava/lang/Long;
   9:   invokevirtual   #9; //Method java/lang/Long.longValue:()J
   12:  l2d
   13:  goto    22
   16:  getstatic       #7; //Field doubleValue:Ljava/lang/Double;
   19:  invokevirtual   #10; //Method java/lang/Double.doubleValue:()D
   22:  invokestatic    #11; //Method java/lang/Double.valueOf:(D)Ljava/lang/Double;
   25:  astore_0
   26:  aload_0
   27:  areturn 
```

Whereas if you tell the compiler that you're not interested in numbers:

```
public static Object getWithQuestionMark() {
    return doubleValue == null ? (Object)longValue : (Object)doubleValue;
} 
```

you'll get what you were after (bytecode)

```
public static java.lang.Object getWithQuestionMark();
  Code:
   0:   getstatic       #7; //Field doubleValue:Ljava/lang/Double;
   3:   ifnonnull       12
   6:   getstatic       #8; //Field longValue:Ljava/lang/Long;
   9:   goto    15
   12:  getstatic       #7; //Field doubleValue:Ljava/lang/Double;
   15:  areturn 
```

outputs:

```
$ java IfTest
class java.lang.Long
class java.lang.Long 
```

# java - Java - 试图规划程序类的布局

> ID：12108999
> 
> 赞同：1
> 
> 时间：2012-08-24T11:57:23.307
> 
> 标签：java, layout

我在弄清楚这一点时遇到了一些麻烦，所以如果您能提供帮助，那就太好了。

我编写了一些从站点地图获取 URL 列表的代码。然后我去每个页面，抓取所有链接，然后测试它们的状态（200,404 等）。

我正在使用 HttpClient。我一切正常，但由于我是 Java 新手，我认为我的代码是一个完整的黑客/迷宫，如果组织正确，我很可能会获得更好的性能。所以我所拥有的是

主类 - 这构建了 gui

解析站点地图类 - 这会解析站点地图并获取 URL 列表。

名为 PingURl 的类 - 我确定我的上述内容很差，但这是我认为最糟糕的部分。这个类打开所有的 url，抓取它们的链接，然后测试链接的状态并返回它。我想这门课应该被分解？最重要的是，我认为我应该在它自己的类中隔离对链接的测试，这样以后实现线程会很容易吗？

基本上我在寻求建议。如果有人可以帮助我更好地布置项目。其次，我相信这是我最薄弱的领域，所以要改进我需要更多地了解这一点，我什至不知道该怎么称呼它（设计/布局问题？）。您还可以推荐资源以了解更多信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:09:43.690

Java是一种IMO语言，体现了良好的OO设计。考虑到面向对象的设计非常有效。

[http://java.sun.com/developer/onlineTraining/Programming/BasicJava2/oo.html](http://java.sun.com/developer/onlineTraining/Programming/BasicJava2/oo.html)

就你的问题而言，我认为它工作得很好。您有点遵循模型-视图-控制器模式： http: [//www.codinghorror.com/blog/2008/05/understanding-model-view-controller.html](http://www.codinghorror.com/blog/2008/05/understanding-model-view-controller.html)

我不能告诉你如何设计你的代码，但我会告诉你如果我遇到同样的问题我会怎么做：

我会得到一个代表超链接的类。在该类中，将有已被抓取的超链接，以及一个 getter 和 setter。以及一个布尔值和一个 ping 函数。这意味着如果我创建一个“超链接”对象，那么我可以在该对象上调用（“ping”），因为它是该类的一部分。这意味着 ping 函数只是设置表示连接性的布尔值。

这样，您的解析器基本上会获得一个页面，并且对于它找到的每个链接，它都会根据您自己的“超链接”类创建一个新的“超链接”对象。并将其放入数组中。因此，一旦您的解析器执行，您就会得到一组指向超链接的指针。

然后你所要做的就是在每一个上调用 ping 函数来查看它是否存在。

我认为这种设计是最好的，因为它可以很容易地从一个超链接测试扩展到 1000 个。

关于设计的东西太多了，也有无数的原则。从来没有一种绝对的方法可以解决问题。但是你获得的经验越多，你对设计模式和模型的阅读越多，你就会越了解它:)